# StackOverflow 问答 13065000-13065999

# php - 收集学生成绩数组的数据并通过 sql 循环插入，仅适用于没有数据的学生

> ID：13065000
> 
> 赞同：0
> 
> 时间：2012-10-25T08:54:49.920
> 
> 标签：php, sql, loops

大家好，这只是跳跃的另一个障碍。我有一个表格中的学生动态列表

```
<form method="POST" name="assignments" id="assignments" action="<? $_SERVER['PHP_SELF']; ?>">

<?php
$key = 0;
while($row_students = mysql_fetch_array($students))
{ ?>
<div style="margin-bottom:3px;">
<select name="student[<?php echo $key ?>][grade]" size="1">
  <option value="NULL">--</option>
  <option value="0">0</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="20" selected="selected">20</option>
</select>

<?php echo $row_students['student_number'];?> 
<input name="student[<?php echo $key ?>][student_id]" type="hidden" 
 value="<?php echo $row_students['student_number']; ?>" /> -

<?php echo $row_students['student_name'] ; ?>
<input name="student[<?php echo $key ?>][assignment_name]" type="hidden" 
 value="<?php echo $row_assignments['assignment_name'];?>" />
 </div>
 <br/>
<?php $key++;} ?>
<input name="section" type="hidden" value="<?php echo $_SESSION['section']; ?>" />
<input name="submit" type="submit" value="submit" />
| <a href="index.php">Cancel</a>
</form> 
```

然后我有一个 sql 循环并将它们插入到工作的数据库中

```
if(!empty($_POST['submit'])){ 

$sql = array(); 
foreach( $_POST['student'] as $row ) { 
$sql[] = '(
         '."NULL".',
         '.mysql_prep($row['grade']).', 
                 '.mysql_prep($row['student_id']).', 
         '."'{$row['assignment_name']}'".',
         '."'{$current_section}'".')
         '; } 

 mysql_query( 'INSERT INTO 
               graded_assignment (id, grade, student_id,    assignment_name, section) 
               VALUES '.implode(',', $sql)); 
confirm_query($sql);                       
if(mysql_affected_rows()>=0)  
{  
    redirect_to("index.php?assignment=1");
}
} 
```

这里是？如果我在老师提交成绩后将学生转移到另一个班级，他将已经提交了数据，而新老师将无法提交成绩，因为一个学生的数据已经存在。

我如何先检查学生的数据是否存在，然后仅在没有数据的地方插入？student_id 和 assignment_name 是唯一的，因此不会插入组合。

或者如果学生已经有数据，请不要在学生列表中回显他的名字

谢谢，我只是想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:44:06.217

考虑到您使用的是 MySQL，请使用

```
INSERT .. ON DUPLICATE KEY IGNORE 
```

（或者如果您想更新，请更新）。但是，您需要设置一个主键才能使其工作。

# installshield - 使用 InstallShield 两次安装相同的程序？

> ID：13065007
> 
> 赞同：0
> 
> 时间：2012-10-25T08:55:14.090
> 
> 标签：installshield

是否有一个`NoUninstall=Y`或类似的选项可以放入 Setup.ini 中的程序？

我想比较一些软件的补丁和非补丁版本的行为。为此，我需要在不同文件夹中安装 2 个副本。

当我第二次运行 setup.exe 时，系统会提示我卸载。

如果我更改`DoMaintenance=N`-> `DoMaintenance=Y`，我可以选择修改、修复、卸载。

我无权访问原始的 InstallShield 项目文件。

我想避免使用 Virtual PC。

否则我可以在 Windows/Regedit 中更改第一次安装的 GUID 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:17:40.410

我不确定在注册表中更改安装程序的 GUID，但我想这是可能的，但更好的是更改您的设置。据我了解，您可以访问 setup.ini，也许您可​​以访问 msi？如果是这样，您可以更改组件的 GUID `PackageCode`、`UpgradeCode`、`ProductCode`和`ProductName`或`ProductVersion`。

PS 要编辑 MSI，您可以使用 Orca，或者更有用且免费的 InstEd。

# go - 来自 io.ReadCloser 的 ReadLine

> ID：13065010
> 
> 赞同：7
> 
> 时间：2012-10-25T08:55:22.327
> 
> 标签：go

我需要找到一种从 io.ReadCloser 对象中读取一行的方法，或者找到一种在“结束行”符号上拆分字节数组的方法。但是我不知道结束线符号，我找不到它。

我的应用程序执行了一个 php 脚本，需要从脚本中获取实时输出，并在得到它时用它做“某事”。

这是我的一小段代码：

```
cmd := exec.Command(prog, args)   
/* cmd := exec.Command("ls")*/
out, err := cmd.StdoutPipe()
if err != nil {
  fmt.Println(err)
}
err = cmd.Start()
if err != nil {
  fmt.Println(err)
} 
```

`out`在此之后，我在 go 例程中监视缓冲区。我尝试了2种方法。
1) `nr, er := out.Read(buf)`where`buf`是一个字节数组。这里的问题是我需要为每个新行制动数组
2）我的第二个选项是创建一个新的 bufio.reader 如果我执行类似的命令，它运行良好，我逐行获取输出，但是如果我执行一个 php 脚本它立即得到一个 End Of File 错误并退出（我猜这是因为 php 的延迟输出）
`r := bufio.NewReader(out)
line,_,e := r.ReadLine()`
`ls`

编辑：我的问题是我在 go 例程中创建 bufio.Reader 而如果我在`StdoutPipe()`minikomi 建议之后立即执行它，它工作正常

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T10:55:48.550

您可以使用 bufio 创建一个阅读器，然后阅读直到下一个换行符（注意，单引号表示字符！）：

```
stdout, err := cmd.StdoutPipe()
rd := bufio.NewReader(stdout)
if err := cmd.Start(); err != nil {
    log.Fatal("Buffer Error:", err)
}

for {
    str, err := rd.ReadString('\n')
    if err != nil {
        log.Fatal("Read Error:", err)
        return
    }
    fmt.Println(str)
} 
```

如果您试图在 goroutine 中读取阅读器，而没有任何东西可以停止脚本，它将退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-04T20:46:22.560

另一种选择是`bufio.NewScanner`：

```
package main

import (
   "bufio"
   "os/exec"
)

func main() {
   cmd := exec.Command("go", "env")
   out, err := cmd.StdoutPipe()
   if err != nil {
      panic(err)
   }
   buf := bufio.NewScanner(out)
   cmd.Start()
   defer cmd.Wait()
   for buf.Scan() {
      println(buf.Text())
   }
} 
```

[https://golang.org/pkg/bufio#NewScanner](https://golang.org/pkg/bufio#NewScanner)

# c# - 动态类型实例化，无需锁定 dll

> ID：13065011
> 
> 赞同：1
> 
> 时间：2012-10-25T08:55:24.403
> 
> 标签：c#, dll, com+

我有一个由几个服务组件组成的**COM+ 应用程序。**

其中一个按需实例化从 dll 到 `Activator.CreateInstance(pluginType, args);`. 该类型本身不是服务组件，它仅包含组件知道的某些接口的实现。

我对实例化本身没有问题，问题是 dll 被 .dll 锁定`dllhost.exe`，如果可能的话，我希望能够在不关闭 COM+ 应用程序的情况下替换它。

是否有可能在不关闭 COM+ 应用程序的情况下以某种方式解锁 dll？

或者从另一个角度来看，有没有一种方法可以以编程方式卸载 dll 来解锁它？

*注意：*该 dll 与其他 dll 一起位于 COM+ 应用程序根目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:07:35.833

这不是 COM+ 的特定问题，它在 Windows 上是通用的，并且是其工作方式的基础。从可执行文件（exe 或 dll）加载代码是由 Windows 为可执行文件创建内存映射文件完成的。仅当页面错误需要实际读取文件并将代码映射到 RAM 时，才会从文件中读取代码。当其他进程竞争 RAM 并且代码未映射时，这种情况会反复发生。

MMF 将锁定文件。必需，以便在将代码映射到 RAM 时无法修改文件。

对此没有解决方法，加载了 DLL 的进程*必须*终止，或者必须在释放锁之前合作并卸载 DLL。充其量您可以在使用文件时重命名该文件，否则不会影响该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:27:25.387

加载的模块在 windows 中被引用计数。在 Windows 中，我们有 loadLibrary 和 freelibrary。如果调用了 freelibrary 并且引用计数为零，则 dll 将被卸载并可以自由替换、删除等。

在 .NET 中，尽管一旦将程序集加载到 appDomain 中，它就会一直存在，直到 appdomain 终止（除非反射发出可收集的程序集）。如果您要生成另一个 appdomain 并在新的 appdomain 死亡时在此处创建实例，则程序集将被卸载。

Asp.net 做了一些叫做影子缓存的事情。Asp.net，您可以随时替换 dll，而无需终止工作进程。他们通过不加载 bin 文件夹中的 dll 来做到这一点，而是将它们复制到单独的位置并从那里加载到单独的 appdomain 中。他们观察 bin 文件夹，当发生更改时，他们会杀死 appdomain，将 dll 复制到 temp 文件夹，然后创建一个新的 appdomain。

影子复制程序集 [http://msdn.microsoft.com/en-us/library/ms404279.aspx](http://msdn.microsoft.com/en-us/library/ms404279.aspx)

# php - 发送隐藏表单数据或从数据库获取数据更快

> ID：13065012
> 
> 赞同：0
> 
> 时间：2012-10-25T08:55:24.673
> 
> 标签：php, database, forms, security, hidden

我正在使用隐藏形式发送价值。带有提交按钮。

就像是：

```
<form action="users.php?action=edit" method="POST">
<input type="hidden" name="first_name" value="Josh" size="20" maxlength="19"/>
<input type="submit" name="done" value="Done"/>
</form> 
```

我正在创建的下一个表单中使用这些值。我不知道哪个会更好，这样做还是从数据库中获取数据。另外，哪个更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:57:30.393

速度是可变的。

更重要的问题是什么更安全：如果您将信息存储在表单上，​​恶意用户可能会更改它。

永远不要相信来自 Web 表单的任何数据 - 始终检查并验证它。

我记得一个可能是杜撰的故事，关于早期的网上商店如何将价格存储在表单的隐藏字段中，并且对销售水平感到高兴，结果发现这些销售的价格大大降低，原因是狡猾的消费者的现场干预。

见[http://www.ethicalhacker.net/content/view/43/2/](http://www.ethicalhacker.net/content/view/43/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:02:52.153

我猜“乔希”是要编辑的用户，只有登录的“乔希”用户才能做到这一点。如果您毫不犹豫地向用户显示隐藏字段中的数据，您可以使用隐藏字段。

请注意，用户可以篡改表单字段中的值。用户可以在 HTTP 请求中添加/更改的所有内容都需要在您的服务器上进行验证（如果它是一个合理的值，如果用户实际上有权编辑“Josh”等）

在您的示例中，虽然没有真正的理由使用隐藏字段：

```
<form action="users.php?action=edit&first_name=Josh" method="POST">
<input type="submit" name="done" value="Done"/>
</form> 
```

关于速度：对于少量数据，隐藏字段版本可能会更快，因为您避免了整个数据库往返（连接、事务、断开连接）。PHP 不保留连接池，连接到数据库的成本很高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:00:43.440

从数据库中获取数据更加安全，因为数据不能被篡改。如果您将它放在隐藏字段中，它将显示可以修改的 php 变量的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:05:28.843

我想它首先从数据库中获取数据人们可以操作数据，然后我猜你的数据库是本地主机或在同一个网络中 - 这比通过互联网发送它更快并且安全！

# javascript - ThreeJS - 如何在动画中设置当前时间

> ID：13065018
> 
> 赞同：9
> 
> 时间：2012-10-25T08:55:50.153
> 
> 标签：javascript, three.js

我在 ThreeJS 中使用蒙皮/骨骼动画。我有一个动画，我希望能够通过它来回移动，并跳转到其中的不同位置，而不是通常的循环行为。

动画是这样创建的，如示例中所示：

```
var animation = new THREE.Animation( mesh, geometry.animation.name ); 
```

我尝试使用负增量更新动画，以及直接设置animation.currentTime：

```
animation.currentTime = animationLocation; 
```

这些似乎只有在我及时向前移动时才有效，但如果我向后移动，动画就会中断并且我得到一个错误：

```
THREE.Animation.update: Warning! Scale out of bounds: ... on bone ... 
```

实际工作没有错误的一件事是调用`stop()`，然后`play()`使用新的开始时间：

```
animation.stop();
animation.play( true, animationLocation ); 
```

...但是，当我查看这些函数实际上在做什么时，它们涉及许多函数调用、循环、重置转换等。这似乎是一种可怕的方法，即使它可以作为一种 hack。

可能此功能尚不存在，在这种情况下，我将尝试挖掘并创建一个工作量最少的功能，但我希望还有另一种我还没有找到的方法。

有人能帮忙吗？

[更新]

作为我进度的更新，我将发布我目前拥有的最佳解决方案......

我提取了`stop()`and`play()`函数的内容，并尽可能地剥离了所有内容，对“play()”已经设置的某些值进行了一些假设。

这似乎仍然不是最好的方法，但它比调用`stop()`then做的工作少了一点`play()`。

这就是我能够理解的：

```
THREE.Animation.prototype.gotoTime = function( time ) {

    //clamp to duration of the animation:
    time = THREE.Math.clamp( time, 0, this.length );

    this.currentTime = time;

    // reset key cache
    var h, hl = this.hierarchy.length,
        object;

    for ( h = 0; h < hl; h ++ ) {

        object = this.hierarchy[ h ];

        var prevKey = object.animationCache.prevKey;
        var nextKey = object.animationCache.nextKey;

        prevKey.pos = this.data.hierarchy[ h ].keys[ 0 ];
        prevKey.rot = this.data.hierarchy[ h ].keys[ 0 ];
        prevKey.scl = this.data.hierarchy[ h ].keys[ 0 ];

        nextKey.pos = this.getNextKeyWith( "pos", h, 1 );
        nextKey.rot = this.getNextKeyWith( "rot", h, 1 );
        nextKey.scl = this.getNextKeyWith( "scl", h, 1 );

    }

    //isPlaying must be true for update to work due to "early out"
    //so remember the current play state:
    var wasPlaying = this.isPlaying;
    this.isPlaying = true; 

    //update with a delta time of zero:
    this.update( 0 );

    //reset the play state:
    this.isPlaying = wasPlaying;

} 
```

该函数在实用性方面的主要限制是您不能从一个任意时间插值到另一个时间。您基本上可以在动画中擦洗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:35:24.500

您可以使用`THREE.Clock`和分配`startTime`, `oldTime`, `elapsedTime`.

# c - 使用 bzip2 低级例程压缩数据块

> ID：13065023
> 
> 赞同：4
> 
> 时间：2012-10-25T08:56:23.207
> 
> 标签：c, compression, bzip2

**概述**

我正在使用`libbzip2`库中的低级调用： `BZ2_bzCompressInit()`，`BZ2_bzCompress()`并将`BZ2_bzCompressEnd()`数据块压缩到标准输出。

我正在从更高级别的调用中迁移工作代码，因为我有一个字节流进入，我想将这些字节压缩成一*组*离散的块（*离散块*是一组包含一组感兴趣的令牌的字节 -我的输入在逻辑上分为这些块的组）。

一组完整的块可能包含 500 个块，我想将其压缩为一个 bzip2 流并写入标准输出。

在一组中，使用我在下面概述的伪代码，如果我的示例缓冲区一次能够容纳 101 个块，我将打开一个新流，在 101、101、101、101 和最后一次运行中压缩 500 个块关闭流的 96 个块。

**问题**

问题是我的`bz_stream`结构实例，它在例程的单次传递中跟踪压缩字节的数量`BZ2_bzCompress()`，似乎声称写入的压缩字节比最终压缩文件中的总字节多。

例如，压缩输出可能是一个真实大小为 1234 字节的文件，而报告的压缩字节数（我在调试时跟踪）略高于 1234 字节（比如 2345 字节）。

我的粗略伪代码分为两部分。

第一部分是我为压缩块子集所做的工作的粗略草图（我知道在此之后还有另一个子集）：

```
bz_stream bzStream;
unsigned char bzBuffer[BZIP2_BUFFER_MAX_LENGTH] = {0};
unsigned long bzBytesWritten = 0UL;
unsigned long long cumulativeBytesWritten = 0ULL;
unsigned char myBuffer[UNCOMPRESSED_MAX_LENGTH] = {0};
size_t myBufferLength = 0;

/* initialize bzStream */
bzStream.next_in = NULL;
bzStream.avail_in = 0U;
bzStream.avail_out = 0U;
bzStream.bzalloc = NULL;
bzStream.bzfree = NULL;
bzStream.opaque = NULL;
int bzError = BZ2_bzCompressInit(&bzStream, 9, 0, 0); 

/* bzError checking... */

do
{
    /* read some bytes into myBuffer... */

    /* compress bytes in myBuffer */
    bzStream.next_in = myBuffer;
    bzStream.avail_in = myBufferLength;
    bzStream.next_out = bzBuffer;
    bzStream.avail_out = BZIP2_BUFFER_MAX_LENGTH;
    do 
    {
        bzStream.next_out = bzBuffer;
        bzStream.avail_out = BZIP2_BUFFER_MAX_LENGTH;
        bzError = BZ2_bzCompress(&bzStream, BZ_RUN);

        /* error checking... */

        bzBytesWritten = ((unsigned long) bzStream.total_out_hi32 << 32) + bzStream.total_out_lo32;
        cumulativeBytesWritten += bzBytesWritten;

        /* write compressed data in bzBuffer to standard output */
        fwrite(bzBuffer, 1, bzBytesWritten, stdout);
        fflush(stdout);
    } 
    while (bzError == BZ_OK);
} 
while (/* while there is a non-final myBuffer full of discrete chunks left to compress... */); 
```

现在我们总结输出：

```
/* read in the final batch of bytes into myBuffer (with a total byte size of `myBufferLength`... */

/* compress remaining myBufferLength bytes in myBuffer */
bzStream.next_in = myBuffer;
bzStream.avail_in = myBufferLength;
bzStream.next_out = bzBuffer;
bzStream.avail_out = BZIP2_BUFFER_MAX_LENGTH;
do 
{
    bzStream.next_out = bzBuffer;
    bzStream.avail_out = BZIP2_BUFFER_MAX_LENGTH;
    bzError = BZ2_bzCompress(&bzStream, (bzStream.avail_in) ? BZ_RUN : BZ_FINISH);

    /* bzError error checking... */

    /* increment cumulativeBytesWritten by `bz_stream` struct `total_out_*` members */
    bzBytesWritten = ((unsigned long) bzStream.total_out_hi32 << 32) + bzStream.total_out_lo32;
    cumulativeBytesWritten += bzBytesWritten;

    /* write compressed data in bzBuffer to standard output */
    fwrite(bzBuffer, 1, bzBytesWritten, stdout);
    fflush(stdout);
} 
while (bzError != BZ_STREAM_END);

/* close stream */
bzError = BZ2_bzCompressEnd(&bzStream);

/* bzError checking... */ 
```

**问题**

*   我是否计算`cumulativeBytesWritten`（或者，特别是`bzBytesWritten`）不正确，我将如何解决这个问题？

我一直在调试版本中跟踪这些值，我似乎没有“重复计算”这些`bzBytesWritten`值。`cumulativeBytesWritten`每次成功`BZ2_bzCompress()`通过后，都会对该值进行计数并使用一次以递增。

*   或者，我是否不了解`bz_stream`状态标志的正确使用？

例如，只要我继续发送一些字节，以下内容是否会压缩并保持 bzip2 流打开？

```
bzError = BZ2_bzCompress(&bzStream, BZ_RUN); 
```

同样，以下语句是否可以压缩数据，只要至少有一些字节可从`bzStream.next_in`指针（`BZ_RUN`）访问，然后当没有更多可用字节时（`BZ_FINISH`）结束流？

```
bzError = BZ2_bzCompress(&bzStream, (bzStream.avail_in) ? BZ_RUN : BZ_FINISH); 
```

*   或者，我根本没有正确使用这些低级调用？我应该回到使用更高级别的调用来不断地将一组压缩的数据块附加到一个主文件吗？

对此可能有一个简单的解决方案，但是在调试可能出现的问题的过程中，我已经在桌面上敲了几天的头，而且我没有取得太大进展。谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:07:30.377

在回答我自己的问题时，我似乎误算了写入的字节数。我不应该使用`total_out_*`成员。以下更正工作正常：

```
bzBytesWritten = sizeof(bzBuffer) - bzStream.avail_out; 
```

其余的计算如下。

# knockout.js - 淘汰自定义可调整大小绑定到 2 个 observables 被更新两次

> ID：13065024
> 
> 赞同：5
> 
> 时间：2012-10-25T08:56:27.820
> 
> 标签：knockout.js, jquery-ui-resizable, custom-binding

我试图创建一个与 jquery ui 可调整大小的小部件的淘汰赛绑定。我的自定义绑定绑定到视图模型上的 2 个不同的 observable，即“left”和“width”。

```
<div class="layer" data-bind="resizable: {left: left, width: width}">
<div class="left ui-resizable-handle ui-resizable-w"><<<</div>
<div class="right ui-resizable-handle ui-resizable-e">>>></div>
</div>

ko.bindingHandlers.resizable = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        var values = valueAccessor();
        $(element).resizable({
            handles: null,
            resize: function(event, ui) {
                values.left(ui.position.left);
                values.width(ui.size.width);
            }
        });
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        var values = valueAccessor();
        $(element)
            .css('left', values.left() + 'px')
            .css('width', values.width() + 'px')
            ;
    }
};

var vm = {
    left: ko.observable(50),
    width: ko.observable(300)
    };

ko.applyBindings(vm); 
```

问题是，当我使用左句柄调整 div 的大小时，2 个 observables 被更新，从而在同一个绑定中触发 2 个更新。我需要它来触发一次更新。

对于这种绑定，我有哪些选择？创建绑定到多个可观察对象的绑定的推荐方法是什么？

我的真实世界代码更复杂，但我认为 iv 将我的问题归结为这个小提琴：

[http://jsfiddle.net/MatteS75/3dwVp/10/](http://jsfiddle.net/MatteS75/3dwVp/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:20:52.083

您是否尝试过使用 Michael Best 的 Knockout [Deferred Updates 插件](https://github.com/mbest/knockout-deferred-updates)？

这是一个更新的小提琴：http: [//jsfiddle.net/jearles/3dwVp/11/](http://jsfiddle.net/jearles/3dwVp/11/)

您需要做的就是在淘汰后包含他的 .js 文件。

```
<script type="text/javascript" src="knockout-2.1.0.js"></script>
<script type="text/javascript" src="knockout-deferred-updates.js"></script> 
```

# java - javax.naming.NamingException：从类加载器实例化 InitialContextFactory org.jboss.naming.remote.client.InitialContextFactory 失败

> ID：13065025
> 
> 赞同：5
> 
> 时间：2012-10-25T08:56:34.873
> 
> 标签：java, javascript, web-services, jboss, jboss7.x

我对 Jboss-as-7.1.1 有疑问。当我部署它时，它会正确部署，但是当我从客户端发送请求时，我收到此错误：

> javax.naming.NamingException：JBAS011843：无法实例化 InitialContextFactory

**我的错误日志：-**

```
14:18:22,952 INFO  [stdout] (http--127.0.0.1-8080-1) BusinessClass::sendResponse Starts...
14:18:22,953 INFO  [stdout] (http--127.0.0.1-8080-1) Enter the Try Block Edited by vivek
14:18:22,962 ERROR [stderr] (http--127.0.0.1-8080-1) javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jboss.naming.remote.client.InitialContextFactory from classloader ModuleClassLoader for Module "deployment.responsecomponent.ear.response.war:main" from Service Module Loader
14:18:22,978 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.naming.InitialContextFactoryBuilder.createInitialContextFactory(InitialContextFactoryBuilder.java:64)
14:18:22,996 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:664)
14:18:22,998 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
14:18:23,007 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.init(InitialContext.java:223)
14:18:23,008 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.<init>(InitialContext.java:197)
14:18:23,010 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jsp.response_jsp._jspService(response_jsp.java:132)
14:18:23,011 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
14:18:23,012 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
14:18:23,014 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
14:18:23,037 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
14:18:23,038 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
14:18:23,040 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
14:18:23,041 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
14:18:23,049 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
14:18:23,051 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
14:18:23,053 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
14:18:23,054 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
14:18:23,064 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
14:18:23,065 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
14:18:23,066 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
14:18:23,068 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
14:18:23,069 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
14:18:23,076 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
14:18:23,078 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
14:18:23,081 ERROR [stderr] (http--127.0.0.1-8080-1)    at java.lang.Thread.run(Thread.java:662) 
```

**服务器日志：-**

```
JBoss Bootstrap Environment

  JBOSS_HOME: /home/vivekray/Desktop/vivek/jboss-as-7.1.1.Final

  JAVA: /home/vivekray/Softwares/jdk1.6.0_30/bin/java

  JAVA_OPTS:  -server -XX:+TieredCompilation -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

14:14:09,212 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
14:14:09,978 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
14:14:10,233 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
14:14:13,122 INFO  [org.xnio] XNIO Version 3.0.3.GA
14:14:13,148 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
14:14:13,224 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
14:14:13,264 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
14:14:13,553 INFO  [org.jboss.as.clustering.infinispan] JBAS010280: Activating Infinispan subsystem.
14:14:13,557 INFO  [org.jboss.as.configadmin] JBAS016200: Activating ConfigAdmin Subsystem
14:14:13,619 INFO  [org.jboss.as.naming] JBAS011800: Activating Naming Subsystem
14:14:13,660 INFO  [org.jboss.as.osgi] JBAS011940: Activating OSGi Subsystem
14:14:13,707 INFO  [org.jboss.as.security] JBAS013101: Activating Security Subsystem
14:14:13,765 INFO  [org.jboss.as.webservices] JBAS015537: Activating WebServices Extension
14:14:13,809 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
14:14:14,204 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-4) JBAS015400: Bound mail session [java:jboss/mail/Default]
14:14:14,260 INFO  [org.jboss.as.connector] (MSC service thread 1-3) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
14:14:14,514 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
14:14:14,773 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-2) JBoss Web Services - Stack CXF Server 4.0.2.GA
14:14:15,739 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-4) Starting Coyote HTTP/1.1 on http--127.0.0.1-8080
14:14:16,378 WARN  [com.arjuna.ats.arjuna] (Transaction Expired Entry Monitor) ARJUNA012210: Unable to use InetAddress.getLocalHost() to resolve address.
14:14:16,636 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) JBAS017100: Listening on /127.0.0.1:9999
14:14:16,639 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on /127.0.0.1:4447
14:14:16,717 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-3) JBAS015012: Started FileSystemDeploymentService for directory /home/vivekray/Desktop/vivek/jboss-as-7.1.1.Final/standalone/deployments
14:14:17,095 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
14:14:17,201 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "responsecomponent.ear"
14:14:24,491 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jaxb-api.jar in "/content/responsecomponent.ear/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,502 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jaxb-impl.jar in "/content/responsecomponent.ear/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,515 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jsr173_1.0_api.jar in "/content/responsecomponent.ear/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,524 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry activation.jar in "/content/responsecomponent.ear/lib/jaxb-xjc-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,539 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jaxb-api.jar in "/content/responsecomponent.ear/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,548 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry activation.jar in "/content/responsecomponent.ear/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,564 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jsr173_1.0_api.jar in "/content/responsecomponent.ear/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,567 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jaxb1-impl.jar in "/content/responsecomponent.ear/lib/jaxb-impl-2.1.7.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,575 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry bcel.jar in "/content/responsecomponent.ear/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,580 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry jibx-run.jar in "/content/responsecomponent.ear/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,583 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry xpp3.jar in "/content/responsecomponent.ear/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,585 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry stax-api.jar in "/content/responsecomponent.ear/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,589 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry wstx-asl.jar in "/content/responsecomponent.ear/lib/jibx-bind-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,594 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry xercesImpl.jar in "/content/responsecomponent.ear/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,596 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry xml-apis.jar in "/content/responsecomponent.ear/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,599 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry serializer.jar in "/content/responsecomponent.ear/lib/xalan-2.7.0.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,602 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry activation.jar in "/content/responsecomponent.ear/lib/mail-1.4.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,613 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry xpp3.jar in "/content/responsecomponent.ear/lib/jibx-run-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,615 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry stax-api.jar in "/content/responsecomponent.ear/lib/jibx-run-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,617 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-4) Class Path entry wstx-asl.jar in "/content/responsecomponent.ear/lib/jibx-run-1.2.1.jar"  does not point to a valid jar for a Class-Path reference.
14:14:24,630 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "response.war"
14:14:24,633 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "AsyncResponseComponentVer2.jar"
14:14:25,750 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-1) JNDI bindings for session bean named SPConnectorResponseComponent in deployment unit subdeployment "AsyncResponseComponentVer2.jar" of deployment "responsecomponent.ear" are as follows:

    java:global/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:app/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:module/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:jboss/exported/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:global/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome
    java:app/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome
    java:module/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome
    java:jboss/exported/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome

14:14:26,794 INFO  [org.jboss.web] (MSC service thread 1-2) JBAS018210: Registering web context: /response
14:14:26,797 INFO  [org.jboss.as] (MSC service thread 1-3) JBAS015951: Admin console listening on http://127.0.0.1:9990
14:14:26,807 INFO  [org.jboss.as] (MSC service thread 1-3) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 18387ms - Started 222 of 303 services (80 services are passive or on-demand)
14:14:26,958 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "responsecomponent.ear" 
```

**我的代码：-**

```
 Context context=null;
    System.out.println("BusinessClass::sendResponse Starts...");
    HashMap ack_gateway=null;
    try {

        System.out.println("Enter the Try Block Edited by vivek");

        //add by vivek

            Properties props = new Properties();
                    props.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
                    props.put(Context.PROVIDER_URL, "remote://localhost:4447");
                    props.put(Context.SECURITY_PRINCIPAL, "testuser");
                    props.put(Context.SECURITY_CREDENTIALS, "testpassword");
                    context = new InitialContext(props);
                System.out.println("\n\tGot initial Context: "+context);
                System.out.println("Got Initial Context");
              SPResponseEJBHome home = (SPResponseEJBHome)  ortableRemoteObject.narrow(context.lookup            ("SPConnectorResponseComponent"),SPResponseEJBHome.class);

        System.out.println("BusinessClass::sendResponse Starts...");

        System.out.println("Got Home object");
        SPResponseEJBRemote remote = home.create();
        System.out.println("Got Remote object"); 
```

任何人有一些想法请帮助我？谢谢 vivek

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T07:36:18.593

我花了一天时间关注 JBoss 6 的教程和电子书（以及论坛解决方案）。主要的“问题”是 JBoss 7 对 JNDI 设置和 InitialContext 有不同的方法。

最后我找到了一个拯救我一天的教程，希望这对你也有帮助：

[http://theopentutorials.com/examples/java-ee/ejb3/how-to-create-a-simple-ejb3-project-in-eclipse-jboss-7-1/](http://theopentutorials.com/examples/java-ee/ejb3/how-to-create-a-simple-ejb3-project-in-eclipse-jboss-7-1/)

**我是如何解决的**

道具必须只有这个条目：

**props.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");**

客户端文件夹中缺少包含以下内容的**jboss-ejb-client.properties**：

```
remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED=false

remote.connections=default

remote.connection.default.host=localhost
remote.connection.default.port = 4447
remote.connection.default.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS=false 
```

**构建路径中缺少jboss-client-7.1.0.Final.jar** ( JBOSS_HOME /bin/client)。

最好的问候，丹尼尔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:07:11.590

首先，从服务器日志中，我看到了一些与类路径相关的警告，所以在我看来，稍后会跳出一些错误。也许您已经解决了这个问题，但是您从客户端报告的错误几乎总是与您用于编译该客户端的类路径有关，例如，使用以下命令进行编译：

```
javac -cp <JBOSS_FOLDER>/bin/client/jboss_client.jar <your src directory> 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T13:23:38.697

您可以使用另一种方式来查找您的 bean。

```
BeanRemoteInterface bean = doLookup(); 
```

doLockup()-方法：

```
private static BeanRemoteInterface doLookup() {
Context context = null;
BeanRemoteInterface bean = null;
try {
     // 1\. Obtaining Context
    context = ClientUtility.getInitialContext();

    // 2\. Generate JNDI Lookup name
    String lookupName = getLookupName();

    // 3\. Lookup and cast
    System.out.println("LookUpName: " + lookupName);
    bean = (BeanRemoteInterface) context.lookup(lookupName);
   } catch (NamingException e) {
    e.printStackTrace();
   }
 return bean;
} 
```

getLookupName()-方法：

```
private static String getLookupName() {
/*
 * The app name is the EAR name of the deployed EJB without .ear suffix.
 * Since we haven't deployed the application as a .ear, the app name for
 * us will be an empty string
 */
String appName = "";

/*
 * The module name is the JAR name of the deployed EJB without the .jar
 * suffix.
 */
String moduleName = "PackageName";

/*
 * AS7 allows each deployment to have an (optional) distinct name. This
 * can be an empty string if distinct name is not specified.
 */
String distinctName = "";

// The EJB bean implementation class name
// String beanName = HelloWorldImpl.class.getSimpleName();
String beanName = "NameOfYourBeanImplementation";

// Fully qualified remote interface name
final String interfaceName = BeanRemoteInterdface.class.getName();

// Create a look up string name
String name = "ejb:" + appName + "/" + moduleName + "/" + distinctName
        + "/" + beanName + "!" + interfaceName;

return name;
} 
```

ClientUtility 类

```
 import java.util.Properties;
  import javax.naming.Context;
  import javax.naming.InitialContext;
  import javax.naming.NamingException;

  public class ClientUtility {

   private static final String PROVIDER_URL = "jnp://localhost:1099";
   private static final String JNP_INTERFACES = "org.jboss.naming:org.jnp.interfaces";
   private static final String INITIAL_CONTEXT_FACTORY="org.jnp.interfaces.NamingContextFactory";

   private static Context initialContext;

   public static Context getInitialContext() throws NamingException
   {
    if (initialContext == null) {
        Properties prop = new Properties();
        prop.put(Context.INITIAL_CONTEXT_FACTORY, INITIAL_CONTEXT_FACTORY);
        prop.put(Context.URL_PKG_PREFIXES, JNP_INTERFACES);
        prop.put(Context.PROVIDER_URL, PROVIDER_URL);
        initialContext = new InitialContext(prop);
    }
    return initialContext;
   }
 } 
```

# android - Android 远程构建系统 - 安装自动化

> ID：13065030
> 
> 赞同：2
> 
> 时间：2012-10-25T08:57:14.983
> 
> 标签：android, automation, installation

我已经在 Windows 机器上使用 Ant 为 Android 构建了一个远程构建系统，我正在尝试找出自动安装程序的选项，以便将构建系统部署到我客户的一台机器上。

安装程序应该能够下载 Android SDK、Ant、GIT、启动和配置 Android 的安装管理器、配置系统设置（如 PATH 环境变量）、配置 GIT 等。

将来某个时候我可能不得不使用 Linux 客户端计算机。

除了在 Qt 中编写这样的软件之外，我不知道如何做到这一点。非常感谢任何帮助/想法。

# java - Swing：在 Linux 中调整 JFrame 的大小，例如 Frames

> ID：13065032
> 
> 赞同：7
> 
> 时间：2012-10-25T08:57:19.733
> 
> 标签：java, swing, jframe, mouse-listeners, componentlistener

我想知道是否有可能以这种方式实现 JFrame 的大小调整，它的大小已经调整，例如 linux 中的标准窗口。更准确的说：如果用户开始拖动，只有未来的窗口大小会被预览，而原始内容不会被调整大小。一旦用户释放鼠标，Frame 就会调整为该大小。在图像中：

**(1) 调整大小前的状态**

![在此处输入图像描述](../Images/5161dd8226b44beae65675e342d5db4c.png)

**(2) 用户开始拖动（在红圈处）**

![在此处输入图像描述](../Images/493f659986dfd800d8a3d19225008562.png)

**(3) 用户释放鼠标，框架被调整大小**

![在此处输入图像描述](../Images/3ff12c4c6d7d7e8d2ae048407b43e000.png)

是否有可能在 Java Swing 中实现这一点？

**编辑：**

由于这个程序有一天也应该像 7 一样在较低的 Java RE 中运行，所以我尝试将 mKorbel 建议和评论中的建议与半透明框架结合起来。结果接近目标，除了

*   contentPane 的内容在我停止移动鼠标后调整大小，而不是在释放鼠标时
*   框架标题会立即调整大小，而不仅仅是当我停止拖动框架边框时。
*   它仅在从右侧或底部调整大小时才有效，否则内容会随着拖动而移动。

我认为第一点可以通过代码和 MouseListener 的组合来解决，例如 if mouseReleased(), then resize 。这是代码，请随意尝试。对于进一步的建议，我仍然对任何建议感到高兴。

该代码是对 Java 教程中的[GradientTranslucentWindowDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/misc/index.html#GradientTranslucentWindowDemo)的略微修改。我希望它被允许在这里发布，否则请指出任何侵犯版权的原因。黑色的 JPanel 应该是应用程序的内容，因为 contentPane 保持不可见。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.beans.PropertyChangeListener;

import javax.swing.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class GroundFrame extends JFrame {

    Timer timer;
    JPanel panel2;

    public GroundFrame() {
        super("GradientTranslucentWindow");

        setBackground(new Color(0,0,0,0));
        setSize(new Dimension(300,200));
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
        panel.setBackground(new Color(0,0,0,0));
        setContentPane(panel);

        setLayout(null);
        panel2 = new JPanel();
        panel2.setBackground(Color.black);
        panel2.setBounds(0,0,getContentPane().getWidth(), getContentPane().getHeight());
        getContentPane().add(panel2);

        addComponentListener(new ComponentListener() {

            @Override
            public void componentShown(ComponentEvent e) {}

            @Override
            public void componentResized(ComponentEvent e) {
                timer = new Timer(50, new Action() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if(timer.isRunning()){

                        }else{
                            resizePanel(getContentPane().getSize());
                        }
                    }

                    @Override
                    public void setEnabled(boolean b) {}

                    @Override
                    public void removePropertyChangeListener(PropertyChangeListener listener) {}

                    @Override
                    public void putValue(String key, Object value) {}

                    @Override
                    public boolean isEnabled() {return false;}

                    @Override
                    public Object getValue(String key) {return null;}

                    @Override
                    public void addPropertyChangeListener(PropertyChangeListener listener) {}
                });
                timer.setRepeats(false);
                timer.start();

            }

            @Override
            public void componentMoved(ComponentEvent e) {}

            @Override
            public void componentHidden(ComponentEvent e) {}
        });
    }

    public void resizePanel(Dimension dim){
        panel2.setBounds(0,0,dim.width, dim.height);
        repaint();
    }

    public static void main(String[] args) {
        GraphicsEnvironment ge =
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();
        boolean isPerPixelTranslucencySupported =
            gd.isWindowTranslucencySupported(PERPIXEL_TRANSLUCENT);

        if (!isPerPixelTranslucencySupported) {
            System.out.println(
                "Per-pixel translucency is not supported");
                System.exit(0);
        }

        JFrame.setDefaultLookAndFeelDecorated(true);

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GroundFrame gtw = new GroundFrame();
                gtw.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:04:41.090

> 如果窗口将被预览，则只有将来的大小，而原始内容不会调整大小。一旦用户释放鼠标，Frame 就会调整为该大小

非常复杂的想法，但是

*   添加`ComponentListener`到`JFrame`

*   覆盖[componentResized(ComponentEvent e)](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ComponentListener.html#componentResized%28java.awt.event.ComponentEvent%29)

*   添加具有短延迟（400-600）的[摆动定时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)，输出到[摆动动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

*   如果继续调整大小，则调用`Timer#restart()`

编辑

使用此代码进行测试

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Vector;

public class ComponentEventDemo extends JPanel
        implements ComponentListener, HierarchyListener,
        ItemListener {

    private JFrame frame;
    private static final long serialVersionUID = 1L;
    private JTextArea display;
    private JLabel label;
    private JComboBox comboBox;
    private JComboBox comboBox1;
    private String newline = "\n";
    private Vector<String> listSomeString = new Vector<String>();
    private Vector<String> listSomeAnotherString = new Vector<String>();

    public ComponentEventDemo() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
        listSomeString.add("Pool");
        listSomeString.add("None of the above");
//
        listSomeAnotherString.add("-");
        listSomeAnotherString.add("XxxZxx Snowboarding");
        listSomeAnotherString.add("AaaBbb Rowing");
        listSomeAnotherString.add("CccDdd Knitting");
        listSomeAnotherString.add("Eee Fff Speed reading");
        listSomeAnotherString.add("Eee Fff Pool");
        listSomeAnotherString.add("Eee Fff None of the above");
        comboBox = new JComboBox(listSomeString);
        comboBox1 = new JComboBox(listSomeAnotherString);
        display = new JTextArea();
        display.setEditable(false);
        JScrollPane scrollPane = new JScrollPane(display);
        scrollPane.setPreferredSize(new Dimension(350, 200));

        label = new JLabel("This is a label", JLabel.CENTER);
        label.addComponentListener(this);

        JCheckBox checkbox = new JCheckBox("Label visible", true);
        checkbox.addItemListener(this);
        checkbox.addComponentListener(this);

        JPanel panel = new JPanel(new GridLayout(1, 2));
        panel.add(label);
        panel.add(checkbox);
        panel.addComponentListener(this);
        frame = new JFrame("ComponentEventDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scrollPane, BorderLayout.CENTER);
        frame.add(panel, BorderLayout.PAGE_END);
        frame.pack();
        frame.setVisible(true);
    }

    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            label.setVisible(true);
            label.revalidate();
            label.repaint();
        } else {
            label.setVisible(false);
        }
    }

    protected void displayMessage(String message) {
        //If the text area is not yet realized, and
        //we tell it to draw text, it could cause
        //a text/AWT tree deadlock. Our solution is
        //to ensure that the text area is realized
        //before attempting to draw text.
        // if (display.isShowing()) {
        display.append(message + newline);
        display.setCaretPosition(display.getDocument().getLength());
        //}
    }

    public void componentHidden(ComponentEvent e) {
        displayMessage(e.getComponent().getClass().getName() + " --- Hidden");
    }

    public void componentMoved(ComponentEvent e) {
        displayMessage(e.getComponent().getClass().getName() + " --- Moved");
    }

    public void componentResized(ComponentEvent e) {
        displayMessage(e.getComponent().getClass().getName() + " --- Resized ");
    }

    public void componentShown(ComponentEvent e) {
        displayMessage(e.getComponent().getClass().getName() + " --- Shown");

    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                ComponentEventDemo componentEventDemo = new ComponentEventDemo();
            }
        });
    }

    public void hierarchyChanged(HierarchyEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T10:45:16.633

模仿这种行为的一个简单技巧是使框架不可调整大小并将框架的某些部分专用于调整大小句柄，然后添加鼠标侦听器并自行调整大小：

```
 public static class GroundFrame extends JFrame {
        private boolean doResize = false;

        public GroundFrame() throws HeadlessException {
            setResizable(false);

            getContentPane().addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    Point point = e.getPoint();
                    if (point.x >= getWidth() - 50) {
                        doResize = true;
                    }
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                }

                @Override
                public void mouseReleased(MouseEvent e) {
                    if (doResize) {
                        setSize(e.getX(), getHeight());
                        doResize = false;
                    }
                }
            });
        }
    } 
```

您甚至可以让 jframe 不装饰，并自己执行所有操作，如调整大小、移动、关闭等。

但同样，此行为由窗口管理器或合成管理器控制（例如，您可以调整 compiz 为您做这样的事情）。我认为实时调整大小是 NeXT 的主要广告功能之一，在当时是向前迈出的一大步 :)

此外，我尝试的另一个技巧是基于 java 7 在事件发生时报告调整大小的事件，而不是在鼠标释放时报告，因此可以在第一次调整大小后保存窗口大小，然后恢复它，直到调整大小完成。但是，工作不是很顺利：

```
 public static class GroundFrame extends JFrame {
        private Timer timer;
        private Dimension oldSize;

        public GroundFrame() throws HeadlessException {
            timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    oldSize = null;
                    invalidate();
                }
            });
            timer.setRepeats(false);

            addComponentListener(new ComponentAdapter() {
                public void componentResized(ComponentEvent e) {
                    if (oldSize == null) {
                        oldSize = getSize();
                        timer.start();
                    } else {
                        setSize(oldSize);
                        timer.restart();
                    }
                }
            });
        }
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-25T11:06:41.703

+1 mKorbel 和 Denis Tulskiy 的回答。

我做了一种可能会有所帮助的抽象解决方案。`JFrame`它支持从（NORTH，EAST，SOUTH 和 WEST）的所有四个侧面调整大小（增加和减少高度和宽度），`JFrame`当鼠标移动到角落之一时，它也可以同时调整宽度和高度。

基本上我所做的是：

*   添加`MouseMotionListener`和`MouseListener`到`JFrame`
*   覆盖`mouseDragged(..)`,和s 。`mouseMoved(..)`_`mousePressed(..)``mouseReleased(..)``Listener`
*   设置`JFrame`为不可调整大小。
*   `mouseMoved(..)`监听鼠标距离底部或右侧*10px*或更少的时间。，`JFrame`然后设置适当的调整大小方向（高度或宽度），相应地更改鼠标`Cursor`（`Cursor.getPredefinedCursor(Cursor.E_RESIZE_CURSOR)`用于最右侧/宽度调整大小、`Cursor.getPredefinedCursor(Cursor.S_RESIZE_CURSOR)`底部/高度调整大小、`Cursor.getPredefinedCursor(Cursor.N_RESIZE_CURSOR)`框架顶部高度调整大小或`Cursor.getPredefinedCursor(Cursor.W_RESIZE_CURSOR)`左侧宽度调整大小）并调用`canResize(true)`.
*   在`mouseDragged(..)`拖动方向时更新新尺寸的宽度或高度
*   在`mouseReleased(..)`设置`JFrame`为新的大小。
*   在`mousePressed(..)`我们检查用户按下的坐标（这允许我们查看帧大小是否在减少/增加）。

看看我做的这个例子：

```
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class JFrameSizeAfterDrag extends JFrame {

    //direction holds the position of drag
    private int w = 0, h = 0, direction, startX = 0, startY = 0;

    public JFrameSizeAfterDrag() {
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        addMouseListener(new MouseAdapter() {
            //so we can see if from where the user clikced is he increasing or decraesing size
            @Override
            public void mousePressed(MouseEvent me) {
                super.mouseClicked(me);
                startX = me.getX();
                startY = me.getY();
                System.out.println("Clicked: " + startX + "," + startY);
            }

            //when the mouse is relaeased set size
            @Override
            public void mouseReleased(MouseEvent me) {
                super.mouseReleased(me);
                System.out.println("Mouse released");
                if (direction == 1 || direction == 2 || direction == 5 || direction == 6) {
                    setSize(w, h);
                } else {//this should move x and y by as much as the mouse moved then use setBounds(x,y,w,h);
                    setBounds(getX() - (startX - me.getX()), getY() - (startY - me.getY()), w, h);
                }
                validate();
            }
        });

        addMouseMotionListener(new MouseAdapter() {
            private boolean canResize;

            //while dragging check direction of drag
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                System.out.println("Dragging:" + me.getX() + "," + me.getY());
                if (canResize && direction == 1) {//frame height  change
                    if (startY > me.getY()) {//decrease in height
                        h -= 4;
                    } else {//increase in height
                        h += 4;
                    }
                } else if (canResize && direction == 2) {//frame width  change
                    if (startX > me.getX()) {//decrease in width
                        w -= 4;
                    } else {//increase in width
                        w += 4;
                    }
                } else if (canResize && direction == 3) {//frame height  change
                    if (startX > me.getX()) {//decrease in width
                        w += 4;
                    } else {//increase in width
                        w -= 4;
                    }
                } else if (canResize && direction == 4) {//frame width  change
                    if (startY > me.getY()) {//decrease in height
                        h += 4;
                    } else {//increase in height
                        h -= 4;
                    }
                } else if (canResize && direction == 5) {//frame width and height  change bottom right
                    if (startY > me.getY() && startX > me.getX()) {//increase in height and width
                        h -= 4;
                        w -= 4;
                    } else {//decrease in height and with
                        h += 4;
                        w += 4;
                    }
                } /* Windows dont usually support reszing from top but if you want :) uncomment code in mouseMoved(..) also
                 else if (canResize && direction == 6) {//frame width and height  change top left
                 if (startY > me.getY() && startX > me.getX()) {//decrease in height and with
                 h += 4;
                 w += 4;
                 } else {//increase in height and width
                 h -= 4;
                 w -= 4;
                 }
                 } else if (canResize && direction == 8) {//frame width and height  change top right
                 if (startY > me.getY() && startX > me.getX()) {//increase in height and width
                 h -= 4;
                 w -= 4;
                 } else {//decrease in height and with
                 h += 4;
                 w += 4;
                 }
                 }
                 */ else if (canResize && direction == 7) {//frame width and height  change bottom left
                    if (startY > me.getY() && startX > me.getX()) {//increase in height and width
                        h -= 4;
                        w -= 4;
                    } else {//decrease in height and with
                        h += 4;
                        w += 4;
                    }
                }
            }

            @Override
            public void mouseMoved(MouseEvent me) {
                super.mouseMoved(me);
                if (me.getY() >= getHeight() - 10 && me.getX() >= getWidth() - 10) {//close to bottom and right side of frame show south east cursor and allow height witdh simaltneous increase/decrease
                    //System.out.println("resize allowed..");
                    canResize = true;
                    setCursor(Cursor.getPredefinedCursor(Cursor.SE_RESIZE_CURSOR));
                    direction = 5;
                } /*Windows dont usually support reszing from top but if you want :) uncomment code in mouseDragged(..) too
                 else if (me.getY() <= 28 && me.getX() <= 28) {//close to top side and left side of frame show north west cursor and only allow increase/decrease in width and height simultaneosly
                 //System.out.println("resize allowed..");
                 canResize = true;
                 setCursor(Cursor.getPredefinedCursor(Cursor.NW_RESIZE_CURSOR));
                 direction = 6;
                 }  else if (me.getY() <= 28 && me.getX() >= getWidth() - 10) {//close to top and right side of frame show north east cursor and only allow increase/decrease in width and height simultaneosly
                 //System.out.println("resize allowed..");
                 canResize = true;
                 setCursor(Cursor.getPredefinedCursor(Cursor.NE_RESIZE_CURSOR));
                 direction = 8;
                 } 
                 */ else if (me.getY() >= getHeight() - 10 && me.getX() <= 10) {//close to bottom side and left side of frame show north west cursor and only allow increase/decrease in width and height simultaneosly
                    //System.out.println("resize allowed..");
                    canResize = true;
                    setCursor(Cursor.getPredefinedCursor(Cursor.SW_RESIZE_CURSOR));
                    direction = 7;
                } else if (me.getY() >= getHeight() - 10) {//close to bottom of frame show south resize cursor and only allow increase height
                    //System.out.println("resize allowed");
                    canResize = true;
                    setCursor(Cursor.getPredefinedCursor(Cursor.S_RESIZE_CURSOR));
                    direction = 1;
                } else if (me.getX() >= getWidth() - 10) {//close to right side of frame show east cursor and only allow increase width
                    //System.out.println("resize allowed");
                    canResize = true;
                    setCursor(Cursor.getPredefinedCursor(Cursor.E_RESIZE_CURSOR));
                    direction = 2;
                } else if (me.getX() <= 10) {//close to left side of frame show east cursor and only allow increase width
                    //System.out.println("resize allowed");
                    canResize = true;
                    setCursor(Cursor.getPredefinedCursor(Cursor.W_RESIZE_CURSOR));
                    direction = 3;
                } else if (me.getY() <= 28) {//close to top side of frame show east cursor and only allow increase height
                    // System.out.println("resize allowed..");
                    canResize = true;
                    setCursor(Cursor.getPredefinedCursor(Cursor.N_RESIZE_CURSOR));
                    direction = 4;
                } else {
                    canResize = false;
                    setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
                    // System.out.println("resize not allowed");
                }
            }
        });

        //just so GUI is visible and not small
        add(new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(200, 200);
            }
        });

        pack();
        setVisible(true);
    }

    @Override
    public void setVisible(boolean bln) {
        super.setVisible(bln);
        w = getWidth();
        h = getHeight();
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JFrameSizeAfterDrag();
            }
        });
    }
} 
```

**更新：**

你做了很好的例子我通过添加`MouseAdapter`哪些覆盖`mouseReleased(..)`哪些调用`resizePanel(...)`来修复代码`mouseReleased(..)`

请参阅此处以获取固定代码（还修复了一些小问题，例如添加`ComponentAdapter`而不是`ComponentListener`和`AbstractAction`代替`Action`）：

```
import java.awt.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;
import java.awt.event.ActionEvent;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class JFrameSizeAfterDrag2 extends JFrame {

    private Timer timer;
    private JPanel panel2;
    boolean canResize = true,firstTime = true;

    public JFrameSizeAfterDrag2() {
        super("GradientTranslucentWindow");

        setBackground(new Color(0, 0, 0, 0));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        setContentPane(new JPanel(null) {//contentpane layout is null only
            @Override
            protected void paintComponent(Graphics g) {
                Paint p = new GradientPaint(0.0f, 0.0f, new Color(0, 0, 0, 0), 0.0f, getHeight(), new Color(0, 0, 0, 0), true);
                Graphics2D g2d = (Graphics2D) g;
                g2d.setPaint(p);
                g2d.fillRect(0, 0, getWidth(), getHeight());
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        });

        panel2 = new JPanel();
        panel2.setBackground(Color.black);
        getContentPane().add(panel2);

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent me) {
                super.mouseReleased(me);
                if (canResize) {
                    resizePanel(getContentPane().getSize());
                }
            }
        });

        addComponentListener(new ComponentAdapter() {

            @Override
            public void componentResized(ComponentEvent e) {
                timer = new Timer(50, new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if (timer.isRunning()) {
                            canResize = false;
                        } else {
                            canResize = true;
                            if (firstTime == true) {
                                firstTime = false;
                                resizePanel(getContentPane().getSize());
                            }
                        }
                    }
                });
                timer.setRepeats(false);
                timer.start();

            }
        });
        pack();
    }

    public void resizePanel(Dimension dim) {
        panel2.setBounds(0, 0, dim.width, dim.height);
        revalidate();
    }

    public static void main(String[] args) {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();
        boolean isPerPixelTranslucencySupported = gd.isWindowTranslucencySupported(PERPIXEL_TRANSLUCENT);

        if (!isPerPixelTranslucencySupported) {
            System.out.println("Per-pixel translucency is not supported");
            System.exit(0);
        }

        JFrame.setDefaultLookAndFeelDecorated(true);

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrameSizeAfterDrag2 gtw = new JFrameSizeAfterDrag2();
                gtw.setVisible(true);
            }
        });
    }
} 
```

# jquery-mobile - jQuery Mobile - 嵌套列表视图中的弹出窗口

> ID：13065037
> 
> 赞同：5
> 
> 时间：2012-10-25T08:57:35.170
> 
> 标签：jquery-mobile

我尝试创建一个列表视图，其中没有子元素的元素可以有一个编辑按钮。当用户单击此按钮时，应出现一个弹出菜单。

![在此处输入图像描述](../Images/07ca4c155a002605b60c0c273ade182d.png)

这是单个 JQM 页面中的代码。

```
<div data-role="content">
<ul data-role="listview">
    <li>
        <h3>Colors</h3>
        <ul>
            <li>Blue
                <p class="edit">
                    <a href="#" onclick="openEditMenu()" data-role="button"
                        data-icon="gear" data-inline="true" data-iconpos="notext">Edit</a>
                </p>
            </li>
            <li>Orange</li>
            <li>Purple</li>
        </ul>
    </li>
    <li><h3>Item</h3>
        <p class="edit">
            <a href="#" onclick="openEditMenu()" data-role="button"
                data-icon="gear" data-inline="true" data-iconpos="notext">Edit</a>
        </p></li>
    </ul>
</div>
<div data-role="popup" id="popupMenu">
    <ul data-role="listview" data-inset="true" >
            <li data-role="divider" data-theme="a">Edit Element</li>
            <li><a href="#">Edit</a></li>
            ...
    </ul>
</div>
<script>
    function openEditMenu() {
        $('#popupMenu').popup('open');
    }
</script> 
```

在第一层，这就像预期的那样工作。如果您导航到嵌套列表的第二级，则不会显示弹出窗口。

我看到 JQM 中的弹出窗口必须放在同一页面上。似乎 JQM 在列表视图的子页面上找不到弹出窗口。

是否有人成功实现了这样的解决方案，或者 JQM 1.2 的弹出功能不可能实现？

[在 jsfiddle 你可以找到我的示例代码。](http://jsfiddle.net/ynqjw/2/)

感谢您的提示或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T07:05:14.997

正如您在上面的评论中所说，来自 jQm 文档的*弹出 div 必须嵌套在与链接相同的页面内。*'。

您可以尝试克隆弹出窗口并将其附加到其他页面。然后你重新初始化并打开它。您可以尝试以下方法：

```
var nestedLiPage = $(".ui-page-active");
$('#popupMenu').clone().appendTo(nestedLiPage).popup().popup('open'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-02T05:27:54.887

[解决了]

[http://jsfiddle.net/F9awk/](http://jsfiddle.net/F9awk/)

```
function openEditMenu() {
  var nestedLiPage = $(".ui-page-active");
  $('#popupMenu').clone().appendTo(nestedLiPage).popup().popup('open');
} 
```

# plsql - 在选择语句中使用游标

> ID：13065038
> 
> 赞同：1
> 
> 时间：2012-10-25T08:57:43.950
> 
> 标签：plsql

希望你能帮助我，我试图在 sql 查询中使用游标。我有 99% 的把握可以做到这一点，请问有什么建议吗？这是我的代码

```
FUNCTION filter (c_cur_trip_menu IN  c_menu_tripulantes) 
        RETURN c_menu_tripulantes IS 
    BEGIN
             SELECT * 
            FROM c_cur_trip_menu  , opciones_migradas 
            WHERE  mnu.mnu_idemnu = id_opcion;      

            RETURN c_cur_trip_menu;
    END filter; 
```

我想要的是将光标用作表格。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:53:33.847

您可以将数据从 复制`cursor`到`temporary table`，但不能像表格那样使用游标。如果要在 oracle 中构建的函数，则不能使用`select`语法来显示数据：

```
 FOR cur in c_cur_trip_menu
 LOOP
     dbms_output.put_line(cur.col1||' 'cur.col2);
 END LOOP; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:30:41.060

您不能从游标中选择（但您可以从任何选择语句创建游标（使用游标（您的查询））），但表或流水线函数可以帮助您完成任务。[http://www.oracle-base.com/articles/misc/pipelined-table-functions.php](http://www.oracle-base.com/articles/misc/pipelined-table-functions.php)可以帮助您。尽管如此，我从来没有理解尝试移动函数方法以在基于 sql 的数据库中检索数据 - 视图完美地解决了它。CBO 估计的功能很弱，因此您可以提前创建使查询工作更慢的地方。为了什么——不知道......

# android - 方向更改后未重新添加片段

> ID：13065043
> 
> 赞同：2
> 
> 时间：2012-10-25T08:57:52.723
> 
> 标签：android, android-fragments, android-orientation

当设备旋转时，我的应用程序中的片段不会重新添加到活动的视图中。如果我正确理解了文档（以及关于 SO 的类似问题），这应该由片段管理器处理（无需在我的清单中指定 android:configChanges）。

我的活动看起来像：

```
public class MainActivity extends SherlockFragmentActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        if (savedInstanceState == null){
            getSupportFragmentManager().beginTransaction()
                .add(R.id.main_fragment_placeholder, new DashboardFragment(),"dashboard")
                .commit();
        }
    }
} 
```

Fragment 看起来像（为了清楚起见，省略了 clicklisteners 等）：

```
public class DashboardFragment extends SherlockFragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.fragment_dashboard, container, false);
    }
} 
```

布局文件看起来像（activity_main.xml）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:id="@+id/main.main">

    <FrameLayout android:id="@+id/main_fragment_placeholder"
             android:layout_height="fill_parent"
             android:layout_weight="1"
             android:layout_width="0px"
             />

</LinearLayout> 
```

和fragment_layout.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main.wrapper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <my.layout.DashboardLayout
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:id="@+id/main.dashboard">
    <!-- some buttons here -->
    </my.layout.DashboardLayout>

</LinearLayout> 
```

但是，当我旋转我的设备时，屏幕总是变黑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T07:42:05.553

原来我做了一件愚蠢的事。我在我的活动中覆盖了该`onSaveInstanceState(...)`方法，而没有调用`super.onSaveInstanceState()`，这导致片段没有被重新创建。在这里发布答案，希望我可以节省其他人的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:07:19.310

片段通常会在配置更改时重新创建。如果您不希望发生这种情况，请使用

`setRetainInstance(true);`在片段的构造函数中

这将导致在配置更改期间保留片段。

[http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean) )

# c# - 在 Visual Studio 中引用项目而不是开源项目的 DLL 会更慢吗？

> ID：13065045
> 
> 赞同：0
> 
> 时间：2012-10-25T08:58:04.877
> 
> 标签：c#, visual-studio, compilation

是不是比较慢？有时会出现由开源项目触发的异常或问题，直接访问代码可以让您更深入地了解自己做错了什么。它是否会减慢项目速度，尤其是它是否会增加编译时间？假设没有对项目进行任何更改 - 我认为它不需要每次都重建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:05:12.473

> 假设没有对项目进行任何更改 - 我认为它不需要每次都重建？

默认情况下，如果您选择构建，Visual Studio 只考虑更改的代码。如果您选择 Re-Build 选项，那么将考虑编译所有内容。

> 它是否会减慢项目速度，尤其是它是否会增加编译时间？

如果慢是指应用程序执行性能，那么不，应该没有任何区别，对于编译时间，是的，它会增加一点（如果没有对参考项目进行任何更改）。如果项目在多个位置被引用并且对项目进行了更改，那么一切都应该经过编译过程以确保一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:01:35.983

我个人更喜欢让项目本身打开（至少开始时）。只要您不经常清理/构建，构建应该只编译具有更改代码的项目，因此编译速度只有很小的差异。

运行时，假设您打开的版本与 DLL 中的版本相同并且您进行了发布构建，那么速度应该没有真正的差异

也就是说，在我了解发生了什么之后，我通常会切换到 DLL 以避免解决方案资源管理器中的混乱和 VS 中的额外内存使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:02:53.393

如果您不打算更改开源库中的任何内容。那么这是一个开销。因为每次编译项目时它都会编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:31:43.990

一般来说，您应该尽可能使用项目引用。这是来自一篇旧文章，但我相信它仍然适用：

> 使用项目引用的优点是：
> 
> *   他们在加载了解决方案和项目集的所有开发工作站上工作。这是因为项目文件中放置了一个项目全局唯一标识符 (GUID)，该文件在当前解决方案的上下文中唯一标识了引用的项目。
> *   它们使 Visual Studio .NET 构建系统能够跟踪项目依赖关系并确定正确的项目构建顺序。
> *   它们避免了引用程序集在特定计算机上丢失的可能性。
> *   它们会自动跟踪项目配置更改。例如，当您使用调试配置进行构建时，任何项目引用都引用由引用的项目生成的调试程序集，而它们引用发布配置中的发布程序集。这意味着您可以跨项目自动从调试切换到发布版本，而无需重置引用。
> *   它们使 Visual Studio .NET 能够检测和防止循环依赖。

取自：

[http://msdn.microsoft.com/en-us/library/Ee817675%28pandp.10%29.aspx](http://msdn.microsoft.com/en-us/library/Ee817675%28pandp.10%29.aspx)

# iphone - ASIDownLoadCache 不起作用

> ID：13065046
> 
> 赞同：0
> 
> 时间：2012-10-25T08:58:07.907
> 
> 标签：iphone, objective-c, ios, ipad, asihttprequest

```
 ASIHTTPRequest *request = [[ASIHTTPRequest alloc]initWithURL:[NSURL URLWithString:url]];
request.requestHeaders = header;
request.requestMethod = @"GET";
request.tag = DBRequestTypeChannelCategory;
[request setDelegate:self];
[request setNumberOfTimesToRetryOnTimeout:2];
[request setDownloadCache:[ASIDownloadCache sharedCache]];
[request setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];
[request setCachePolicy:ASIFallbackToCacheIfLoadFailsCachePolicy];
[request setSecondsToCache:60*60*24*3];
[request startAsynchronous]; 
```

这是我关于 http 的代码，如果我将手机转为飞行模型。我懂了

```
Error Domain=ASIHTTPRequestErrorDomain Code=1 "A connection failure occurred" UserInfo=0x1fd67bf0 {NSUnderlyingError=0x1fd66bf0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error 2.)", NSLocalizedDescription=A connection failure occurred} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:08:02.113

您发布的错误意味着崩溃是由于连接故障造成的，如果您启用了飞行模式，这是有道理的。您应该能够通过设置故障处理程序来消除这种情况。

```
 [request setFailedBlock:void^{
        //
    }]; 
```

或者

```
 [request setDidFailSelector:@selector(requestWentWrong:)]; 
```

要在不访问 Internet 的情况下访问缓存数据，只需将以下内容添加到您的请求中。

```
 [request setCachePolicy:ASIFallbackToCacheIfLoadFailsCachePolicy]; 
```

为了使其工作，您需要确保将缓存存储设置为永久，以防止在用户存在应用程序时删除缓存。

```
 [request setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy]; 
```

# ms-word - 以下 VSTO Word 2010 单词插件单击一次部署错误是否有解决方法？

> ID：13065047
> 
> 赞同：5
> 
> 时间：2012-10-25T08:58:16.770
> 
> 标签：ms-word, vsto, clickonce

部署 Word Add in 时，它发布时没有错误。复制文件后出现以下错误。

我没有太多事情要做。这是堆栈跟踪。

> ************** 异常文本 **************
> 
> System.ArgumentException：值不在预期范围内。在 System.Deployment.Internal.Isolation.IActContext.ApplicationBasePath(UInt32 Flags, String& ApplicationPath) 在 System.ActivationContext.get_ApplicationDirectory() 在 System.AppDomainSetup..ctor(ActivationArguments activationArguments) 在 Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager .CreateAppDomainSetup(ActivationContext context, Uri deploymentManifestUri, AddInInstallationStatus installStatus) 在 Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.InstallAddIn()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T00:40:57.920

在弄乱了一些依赖项之后，我最近也遇到了这个问题。上述解决方案均无效（在 MSDN 或此处）。

我如何修复它：

*   找到一个有效的旧版本。
*   找到 .dll.manifest 文件。
*   将该清单与出错的清单进行区分。

就我而言，我看到那里错误地引用了一个 .dll（因此我有一个 v2 和一个 v4）。我删除了这个参考，谢天谢地，它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:38:54.867

~~这是您正在寻找的答案：-~~

问题：-
在更新失败期间打开进程监视器并查看 Winword.exe 是否正在浏览以下注册表项-> HKCU\Software\Classes\Software\Microsoft\Windows\CurrentVersion\Deployment\SideBySide\2.0\Marks\mmiw.. vsto_510943deeecbc925_0002.0000_2055f5031035ea75\appid

在此有人设法检查了 Word 的“兼容模式”复选框，在 Windows XP SP2 下默认运行（看看您是否可以使程序与您的系统兼容）。

如果这不是问题

~~然后进一步阅读：-[部署 VS 2008 SP1 Word 2007](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/14f5ee63-fa59-42d3-ab8a-6bfbe4917907)~~

* * *

我在***[这里](http://social.msdn.microsoft.com/Forums/en/vsto/thread/7ab8d7a2-9d37-402d-98db-ac74f8b04b14)找到了关于此主题的另一篇文章。***它显示了一种可能的解决方法，您可以尝试获得结果？我不完全确定，但在这方面，开发人员使用的是 Outlook 2008，我认为他在他的代码中删除了 Outlook 的实例并重新实现了其中的一部分，而忽略了其他部分。也许这可能是一个临时修复或帮助您了解问题所在？

* * *

（对不起，我的答案不是很清楚，我目前没有太多时间进行堆栈溢出，当我有更多时间时我会清理答案（它会流动））++这就是我的全部可以找到有关此错误的信息，但是Microsoft论坛上有人遇到相同问题，也许您可​​以在那里更快地找到答案？如果您按照我发布的链接进行操作，您应该能够找到一些可以为您提供体面修复的信息。

PS。如果这不起作用，请尽快回复，我会尽快搜索，我想我找到了其他可能有用的东西，在我发布之前必须自己理解它。

# android - 从android中的内部存储器打开文件

> ID：13065048
> 
> 赞同：2
> 
> 时间：2012-10-25T08:58:18.277
> 
> 标签：android, android-intent

我正在使用以下代码在 /data/data/com.abc.def/files/ 目录中写入数据。

```
InputStream input = new BufferedInputStream(url.openStream());
            FileOutputStream fos = openFileOutput(file_name, Context.MODE_WORLD_READABLE);
            byte data[] = new byte[1024];

            long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    publishProgress(""+(int)((total*100)/lenghtOfFile));
                    fos.write(data, 0, count);
                }

                fos.flush();
                fos.close();
                input.close();
            } catch (Exception e) {} 
```

使用以下代码通过意图打开文件。

```
File file = getDir(file_name, Context.MODE_WORLD_READABLE);
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(file),"application/vnd.android.package-archive");
            startActivity(intent); 
```

但它给出了类似“**解析包有问题**”的错误

![在此处输入图像描述](../Images/9ae993ff54b4e4a0dbd37093208ba53e.png) 请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:02:43.830

我的手机是运行 Android 版本 2.3.3 的三星 Galaxy S II，当我尝试安装软件包时，我收到错误“解析错误”。我使用 Android 3.2 来制作这些包。

您正尝试在 2.3.3 设备上打开 3.2 应用程序。

解决方案

从清单文件中更改所需的 API 级别标记 android:minSdkVersion

或删除所需的 API 级别标记 android:minSdkVersion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:32:44.097

我解决它。

```
String fileName = "tmp.apk";
FileOutputStream fos = openFileOutput(fileName,
        MODE_WORLD_READABLE | MODE_WORLD_WRITEABLE);

// write the .apk content here ... flush() and close()

// Now start the standard instalation window
File fileLocation = new File(context.getFilesDir(), fileName);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(fileLocation),
                       "application/vnd.android.package-archive");
context.startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:14:58.750

您使用的 API 级别是多少？尝试使用 8+ (Froyo 或以上)

* * *

## 编辑

将此行添加到您的清单文件

```
<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" /> 
```

或者

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

这样您就可以在更高版本中编译并在更低版本中运行

# ios - iOS - 从 RemoteIO AudioUnit 录制

> ID：13065052
> 
> 赞同：0
> 
> 时间：2012-10-25T08:58:40.180
> 
> 标签：ios, core-audio, audiounit

我正在尝试从 remoteIO 录制，这是我的回调。我有一个问题......代码永远不会进入 if (*ioActionFlags == kAudioUnitRenderAction_PostRender)

我如何真正停止录制，使其进入 kAudioUnitRenderAction_PostRender ？对 Core Audio 来说非常新，所以这可能是一个愚蠢的问题（我感觉很好；））非常感谢。

码头。

```
static OSStatus RecordingCallback (
                               void *                           inRefCon,
                               AudioUnitRenderActionFlags * ioActionFlags,
                               const AudioTimeStamp *           inTimeStamp,
                               UInt32                           inBusNumber,
                               UInt32                           inNumberFrames,
                               AudioBufferList *                ioData) {
EffectState *effectState = (EffectState*) inRefCon;

// just copy samples
UInt32 bus1 = 1;
CheckError(AudioUnitRender(effectState->rioUnit,
                            ioActionFlags,
                            inTimeStamp,
                            bus1,
                            inNumberFrames,
                            ioData),
           "Couldn't render from RemoteIO unit");

if (*ioActionFlags == kAudioUnitRenderAction_PostRender)
{
    OSStatus result = ExtAudioFileWriteAsync(effectState->outputFile,inNumberFrames,ioData);
    if(result) printf("ExtAudioFileWriteAsync %ld \n", result);
}
return noErr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:16:42.983

这里有几个问题。

首先，您可能打算检查是否设置了 kAudioUnitRenderAction_PostRender，对吗？在这种情况下，您应该使用`*ioActionFlags & kAudioUnitRenderAction_PostRender`而不是`*ioActionFlags == kAudioUnitRenderAction_PostRender`. 前者将检查是否设置了标志，而您正在做的是检查是否仅设置了该标志（即，如果`kAudioUnitRenderAction_OutputIsSilence`还设置了标志，则为`*ioActionFlags == kAudioUnitRenderAction_PostRender`）`false`。

也就是说，在这种情况下，我认为您根本不需要检查该标志。该标志的描述如下：

> 在渲染通知 Proc 上调用 - 在音频单元的渲染操作之前或之后调用。如果设置了此标志，则在渲染操作完成后调用 proc。

这听起来好像该标志仅在 AUGraph 渲染通知中使用，以指示回调是在渲染完成之前还是之后发生（与您无关，因为看起来您正在从 RemoteIO 获取回调）。

所以基本上，你不需要在你的情况下检查那个标志。不过，您*应该*检查您的`AudioUnitRender`电话是否返回`noErr`。

# iphone - AddressBook kABPersonEmailProperty 为某些联系人返回 nil

> ID：13065053
> 
> 赞同：3
> 
> 时间：2012-10-25T08:58:44.353
> 
> 标签：iphone, facebook, ios6, contacts, addressbook

我正在使用以下代码来检索用户选择的人员的电子邮件地址

```
ABMultiValueRef emailMultiValue = ABRecordCopyValue(person, kABPersonEmailProperty);
NSArray *emailAddresses = (__bridge NSArray*)ABMultiValueCopyArrayOfAllValues(emailMultiValue); 
```

自从 iOS6 和 Facebook 集成以来，一切都运行良好。当我选择一个未链接到 Facebook 帐户的联系人时（这意味着我不是该联系人在 FB 上的朋友），一切正常，我检索到 2 个电子邮件地址（工作和家庭）。但是，当我选择一个通过 Facebook 链接到我的联系人（该联系人还有一个家庭和工作电子邮件地址以及联系人浏览器中的 Facebook 电子邮件地址）时，`emailAddresses`数组是`nil`.

以前有没有人遇到过这个问题或对此有任何提示？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:31:13.990

要过滤掉 Facebook 联系人，您可以检查人员的 kABSourceTypeProperty。如果它返回 kABSourceTypeCardDAV，它*可能*来自 Facebook，但肯定不是本地联系人（这将返回 kABSourceTypeLocal）。

不幸的是，从 iOS 6 开始，没有 Facebook 特定的源类型，因此使用 kABSourceTypeCardDAV 可能会过滤掉您可能真正关心的其他源。无论如何，这里有一些代码；

```
ABRecordRef source = ABPersonCopySource(person);
NSNumber *sourceTypeRef = (__bridge NSNumber *)((CFNumberRef)ABRecordCopyValue(source, kABSourceTypeProperty)

if ([sourceTypeRef intValue] == kABSourceTypeCardDAV)
    ; // this is probably, maybe, could be a Facebook contact
if ([sourceTypeRef intValue] == kABSourceTypeLocal)
    ; // this is definitely a local contact
if ([sourceTypeRef intValue] == kABSourceTypeExchange)
    ; // this is from an exchange server
// etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:53:14.227

我找到了一种方法来检查一个人是否是 Facebook 联系人。就我而言，问题是 facebook 联系人不可编辑，所以我不想在我制作的“地址簿更新程序”功能中显示它们。

（在苹果的地址簿应用程序中，您可以编辑 facebook 联系人，但该应用程序实际所做的是使用新信息创建一个新联系人并将其链接到 facebook 联系人。我不能这样做，因为链接不是公共 API在 iOS 中。）

因此，要找到我想忽略的那些 facebook 联系人，我只需检查当我将名字设置为当前名字时ABRecordSetValue 是否返回*true ，就像这样。*

```
bool didset = ABRecordSetValue(person, kABPersonFirstNameProperty, ABRecordCopyValue(person, kABPersonFirstNameProperty), nil); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:37:58.760

我发现自 iOS6 以来有链接的联系人（普通联系人 <-> facebook <-> twitter 等等......）。

为了获取所有链接联系人的所有电子邮件，以下帖子帮助了我： [iOS 6 address book empty kABPersonPhoneProperty](https://stackoverflow.com/questions/13032565/ios-6-address-book-empty-kabpersonphoneproperty)

希望能帮助到你！

# c# - GridView可以用var填充吗？

> ID：13065065
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:59:39.697
> 
> 标签：c#, asp.net, sql-server, linq

我正在尝试在 GridView 中显示 excel 工作表和 sql server 数据表之间的重复行。

这是我的代码：

```
var matched = (from table1 in dt4.AsEnumerable()
                join table2 in oltlb.AsEnumerable() on
                table1.Field<int>("ID") equals table2.Field<int>("ID")
                where table1.Field<string>("Data") == table2.Field<string>("Data")
                select table1);
DataTable dthi5 = new DataTable();
dthi5 = matched.CopyToDataTable(); 
```

我可以在 GridView 中显示 var 的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:03:29.790

是的，它可以用你的变量填充。（在这种情况下，您必须强制转换它`.ToList()`）

你要明白那`var`是强类型！它不像在 php 中，您可以在其中切换变量的类型。

尝试写作

```
var x = null; 
```

在 Visual Studio 中。会有错误！

您的`var` **每次**都必须声明类型安全。这只是一个简短的咒语，让程序员不必总是在变量前面写长类型名。所以你`var`的情况是一个`IEnumerable<T>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:12:37.733

尝试这个

```
var matched = (from table1 in dt4.AsEnumerable()
                  join table2 in oltlb.AsEnumerable() on
                table1.Field<int>("ID") equals table2.Field<int>("ID")
                  where table1.Field<string>("Data") == table2.Field<string>("Data")
                  select table1);
      DataTable dthi5 = new DataTable();
      dthi5 = matched.CopyToDataTable();

myGridView.DataSource = dthi5;
myGridView.DataBind(); 
```

或者

```
myGridView = matched.ToList();
myGridView.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T02:39:36.197

You can definitely bind var to gridview.

Let's assume there's an employee table with three fields

> emp_id emp_fname emp_lname

First way: if you give the whole table or a particular record to var then to list would work...

employees is a data context class once you've established a successful connection to sql server..

```
var result = from alias in dc.employees
          where alias.emp_id == id --(this is the passed parameter) 
```

You can also manually specify the id, for example:

```
where alias.emp_id == 5
          select alias; 
```

The whole employee record having id = 5 would get selected.

You can now simply bind this to gridview

```
gridview1.datasource = result.tolist();
gridview1.databind(); 
```

If you give the whole table, then also tolist would work

```
var result  = from alias in dc.employess
              select alias;

gridview1.datasource = result.tolist();
gridview1.databind(); 
```

If you select multiple columns then tolist won't work. You need to return object.

the method has been defined in class1.

```
public static object returnquery()
{

dcdatacontext dc = new dcdatacontext();

var result = from alias in dc.employees
             where alias.emp_id == 5
             select new
             {
                alias.emp_fname,
                alais.emp_lname
             };

 return result;
} 
```

You need to catch the object.

```
object obj = new class1.returnquery();

gridview1.datasource = obj;
gridview1.databind(); 
```

Or you can simply try this and see if it works. I haven't tried this actually.

```
var result = from alias in dc.employees
             where alias.emp_id == 5
             select new
             {
                alias.emp_fname,
                alias.emp_lname
             };

gridview1.datasource= result.object();
gridview1.databind(); 
```

# android - Android 4 在 BufferedReader 上崩溃？

> ID：13065066
> 
> 赞同：0
> 
> 时间：2012-10-25T08:59:42.707
> 
> 标签：android, json, bufferedreader

我有这段代码在 android <4 上运行良好：

```
 try{
            URL url = new URL("http://www.mysite.com/data.php");
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            while((testo=in.readLine()) != null){
                testo2+=testo;
            }
            in.close();
            JSONObject jObject = new JSONObject(testo2);
            button.setText(jObject.getString("n"));
            textView1a.setText(" "+jObject.getString("so"));
            textView1b.setText(jObject.getString("tc")+" ");
        }
        catch(MalformedURLException e){
            System.out.println("1");
        }
        catch(IOException e){
            System.out.println("2");
        }
        catch(JSONException e){
            System.out.println("3");
        } 
```

但在 android >4 中不起作用，它会使应用程序崩溃。我不知道为什么，但它似乎在缓冲阅读器上崩溃了。我的网址返回一个字符串

```
{"n":"788531","so":"412848","tc":"609774","is":"14270","di":"55.257953749124"} 
```

我将其解析为 json。

# javascript - Django中的Javascript函数

> ID：13065067
> 
> 赞同：2
> 
> 时间：2012-10-25T08:59:43.457
> 
> 标签：javascript, jquery, django

我正在用 django 开发一个应用程序。我正在尝试根据通过您的网络摄像头观看您的人数来实现得分计数器。

我实现了一个函数来获取正在观看你直播的人数。现在我想要另一个计数，它采用用户的现有分数并每分钟为每个正在观看的人添加一分。

这是获取观看人数的功能：

```
 var url = window.location.pathname.split('/');
  var id = url[3];

setInterval(function() {
   $.ajax({
       type: "GET",
       url: "http://myxml",
       success: parseXml
   });
}, 2000);

function parseXml(xml){
   $(xml).find("user").each(function() {

           if($(this).attr("id") === id ) {
               $(".Score").html($(this).attr("count"))
           }
       });
} 
```

它完美地工作。

现在，这是我尝试实现以获取现有分数并为其添加分数的函数：

```
 setInterval(function UserScore(){
      var self = $(this),
      score=self.attr('existing-score'),
      $(".PlayerScore").html($(this).attr("Score"+"existing-score"))
   }, 60000); 
```

以及呈现它的html：

```
 <div class="PlayerScore" existing-score="{{ dub.user.userprofile.score }}"></div> 
```

这个功能不起作用。什么都没有出现。

我真的是 Django 和 Javascript 的新手，所以我猜这个函数肯定有很多错误。因此，非常欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:12:40.777

尝试这个：

```
setInterval(function(){
  var score = $(".PlayerScore").attr('existing-score');
  var watchers = $(".Score").attr("count");
  $(".PlayerScore").html($(this).attr(score+watchers))
}, 60000); 
```

这里有一些变化。

*   使用`var`关键字将变量声明保持在当前范围内。否则，您将声明全局变量，最终您将踩到其他一些具有相同名称的变量。非常难调试。
*   无需命名函数`UserScore`，只需将其设为匿名即可。
*   获取现有`score`作为值，并获取数量`watchers`作为值。
*   `PlayerScore`将这些值设置为新的组合。`PlayerScore`是一个类，我不知道这是否是故意的，但如果它是一个`id`.

# c++ - 执行 MUIRCT 后如何对语言中性 C++ 程序集进行版本控制

> ID：13065068
> 
> 赞同：0
> 
> 时间：2012-10-25T08:59:50.510
> 
> 标签：c++, windows-mui

我们有一个 resource.dll，我们使用 Windows SDK 中的 MUIRCT 工具将其拆分为一个语言中性 Resource.dll 和一个特定于语言的 Resource.dll.mui。

不幸的是，LN 文件没有任何版权、公司或版本信息（从 Explorer\Properties\Details 选项卡查看时），并且当将此程序集放入 VS 时，它显然没有版本块。有谁知道如何在执行 MUIRCT.exe 后正确地对语言中性文件进行版本控制？

希望这是有道理的，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:53:38.113

好的，所以终于设法了解我哪里出错了 - 感谢 Hans 为我指出了资源配置文件的方向。

事实证明，资源配置文件可以包含两个子元素 - “localizedResources”，它允许自定义哪些资源类型进入 .mui 文件，还有一个“neutralResources”元素，它允许自定义哪些资源类型进入语言中性文件.

在我们的资源配置文件中，“neutralResources”元素为空 - 要解决我的问题，我只需将正确的资源 typeNameID（版本资源的 #16）添加到此元素中！最终结果是版本块在 LN 文件中，并且所有属性\详细信息都可见！

# java - Java MessageDigest 提供 31 位而不是 32 位

> ID：13065070
> 
> 赞同：0
> 
> 时间：2012-10-25T09:00:02.260
> 
> 标签：java, md5

我正在尝试使用 java 中的 MessageDigest 生成 MD5 哈希码。请在下面找到示例代码。我正在尝试的字符串与一些代码（KO00001）和系统日期相结合。

```
String s = "KO00001"+"25/10/2012";
byte[] buffer = s.getBytes();
MessageDigest md5 = MessageDigest.getInstance("MD5");
md5.update(buffer);
String str = new BigInteger(1,md5.digest()).toString(16).toUpperCase();
System.out.println(str+"    length:"+str.length()); 
```

对于像 KO0000126/10/2012、KO0000126/10/2012 这样的所有字符串，我将长度设为 32。但对于字符串“KO0000125/10/2012”，结果长度为 31。

可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:10:24.363

我推荐[`org.apache.commons.codec.digest.DigestUtils.md5Hex()`](https://commons.apache.org/codec/api-release/org/apache/commons/codec/digest/DigestUtils.html#md5Hex%28byte%5b%5d%29)这个任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:19:37.900

这只是因为您从使用 的哈希码的字节数组表示中获得的数字`BigInteger`比其他数字少一个位置。换句话说，此表示中的第一个（高位）数字是`ZERO`。只是比较：

```
KO0000125/10/2012:
10 radix: 14105476919805249323079848858308382190    length:38
16 radix: A9C9DB4AA1D19A4126E63A7ECFD0DEE    length:31

KO0000124/10/2012:
10 radix: 132805232305710448716177011414649345991    length:39
16 radix: 63E95B7C6574B57A3FD202484D0D17C7    length:32

KO0000126/10/2012:
10 radix: 256722737628903394348650044729556126214    length:39
16 radix: C123003325E6846E04656C2F3E7ECA06    length:32 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T09:12:35.113

`md5.digest()` **是**16 个字节。

我怀疑您然后尝试将其输出为 32 个字符的十六进制字符串。

为此，您应该执行类似的操作。

```
public static String toHexString(byte[] bytes) {
    if (bytes == null) {
        throw new IllegalArgumentException("byte array must not be null");
    }
    StringBuffer hex = new StringBuffer(bytes.length * 2);
    for (int i = 0; i < bytes.length; i++) {
        hex.append(Character.forDigit((bytes[i] & 0XF0) >> 4, 16));
        hex.append(Character.forDigit((bytes[i] & 0X0F), 16));
    }
    return hex.toString();
} 
```

结果是`d41d8cd98f00b204e9800998ecf8427e`

（编辑 1：或如 Tichodroma 建议的那样：不要重新发明轮子，使用 Apache Commons Codec。实际上很多这些问题的答案是“首先检查 Apache Commons”）

（编辑 2：不要使用 getBytes() 而不指定编码）

# ruby-on-rails - Rails Paperclip 路径和 url 不公开......如何？

> ID：13065081
> 
> 赞同：1
> 
> 时间：2012-10-25T09:00:53.803
> 
> 标签：ruby-on-rails, url, path, paperclip

所以我使用回形针来保存图像。我的问题是，我必须将它们存储在公共路径之外。当我尝试这样的事情时：

```
:url => "users_pictures/:id/:basename.:extension",
:path => ":rails_root/assets/users_pictures/:id/:basename.:extension" 
```

我收到一条错误消息，该图像未预编译。如果我删除 :url 和 :path，一切正常。所以在我看来，这不是我的语法问题。我正在考虑访问，但 public 有 710，这个资产文件夹有 750。我是否必须修改我的 development/production.rb 可能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-25T09:21:39.507

尝试这个

```
:url => "users_pictures/:id/:basename.:extension",
:path => ":rails_root/public/assets/users_pictures/:id/:basename.:extension" 
```

# opencv - 用基本矩阵opencv确定相机运动

> ID：13065082
> 
> 赞同：2
> 
> 时间：2012-10-25T09:00:56.207
> 
> 标签：opencv, 3d, translation, camera-calibration

我尝试使用opencv从基本矩阵确定相机运动。我目前正在使用光流来跟踪每隔一帧中点的移动。基本矩阵是从基本矩阵和相机矩阵推导出来的。我的算法如下

1\. 使用 goodfeaturestotrack 函数从帧中检测特征点。

2\. 跟踪点到接下来的两到三帧（Lk 光流），在此期间使用对应点计算平移和旋转向量

3\. 两帧或三帧后刷新点（使用 goodfeaturestotrack）。再次找到平移和旋转向量。

我知道我无法添加平移向量来从一开始就找到总运动，因为当我刷新点并重新开始新的跟踪时，轴会不断变化。谁能建议我如何计算从原点开始的运动总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-22T03:06:47.673

你问的是一个典型的视觉里程计问题。连接李群的变换矩阵 SE3。您只需将 T_1 T_2 T_3 相乘，直到得到 T_1to3

您可以尝试使用此代码[https://github.com/avisingh599/mono-vo/blob/master/src/visodo.cpp](https://github.com/avisingh599/mono-vo/blob/master/src/visodo.cpp)

```
 for(int numFrame=2; numFrame < MAX_FRAME; numFrame++)
    if ((scale>0.1)&&(t.at<double>(2) > t.at<double>(0)) && (t.at<double>(2) > t.at<double>(1))) {

      t_f = t_f + scale*(R_f*t);
      R_f = R*R_f;

    } 
```

它简单的数学概念。如果您觉得困难，只需查看机器人正向运动学以便于理解。只是连接部分，而不是 DH 算法。 [https://en.wikipedia.org/wiki/Forward_kinematics](https://en.wikipedia.org/wiki/Forward_kinematics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-04T21:43:20.840

将所有相对相机位置写入一个 4x4 变换矩阵，然后将每个矩阵一个接一个地相乘。例如：

相对于原点坐标系的第 1 帧位置 = [R1 T1]

相对于第 1 帧坐标系的第 2 帧位置 = [R2 T2]

相对于第 2 帧坐标系的第 3 帧位置 = [R3 T3]

第 3 帧相对于原点坐标系的位置 = [R1 T1] * [R2 T2] * [R3 T3]

# java - super.clone() 操作在派生类中不起作用

> ID：13065085
> 
> 赞同：2
> 
> 时间：2012-10-25T09:01:06.953
> 
> 标签：java, inheritance, clone, cloneable

*这是因为我的项目面临的技术困难而提出的。*

**问题：** 我需要克隆一个类的对象，它从第三方库类扩展属性（继承）（我们无权修改其内容）

让我用下面的例子来解释：

**家长班：**

```
public class UnChangeableBaseClass {

  //fields and Methods

} 
```

**儿童班：**

```
class DerivedLocalClass extends UnChangeableBaseClass implements Cloneable {

   // local fields and methods

   public Object clone(){

      Object clonedObj= null;

      try{
       clonedObj = super.clone();
      }
      catch(CloneNotSupportedException e){
        //log exceptions
      }

   }

} 
```

当我尝试这样做时，`super.clone()`方法是指 Class - `UnChangeableBaseClass`Type 并且它不会覆盖`Object clone()`方法。我相信所有的类都是用 扩展的`java.lang.Object class`，隐式`protected Object clone()`方法将被继承到这个父类。所以，我认为派生类中的这个方法会覆盖父/对象克隆方法。但是在运行时 JVM 搜索在`UnChangeableBaseClass`. 希望我以正确的方式解释而不会使您感到困惑。

**我的问题如下：**

1.  在这种典型情况下如何实现克隆方法，我们无法
    在父类中添加任何方法以必须`super.clone()`调用对象克隆方法。

2.  如果上述情况不可能，是否有任何其他方法可以克隆派生类
    对象（通过考虑上述场景中的所有限制）

3.  最后，只是为了了解这种 JVM 行为的原因（如上所述）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:09:52.663

> 在这种典型情况下如何实现克隆方法，我们无法在父类中添加任何方法以使 super.clone() 调用对象克隆方法。

好吧，由于`clone`方法是`Object`类中的受保护方法，因此它也可以在您的超类中访问`UnChangeableBaseClass`，因为它是从`Object`类扩展而来的。所以，基本上你可以从你的基类`clone`中使用 访问该方法。`super.clone()``DerivedLocalClass`

> 如果上述情况不可能，是否有任何其他方法可以克隆派生类对象（通过考虑上述场景中的所有限制）

我建议，即使您可以选择使用`clone`方法来克隆对象，也不应该使用它。最好**`copy-constructor`**在派生类中使用 a ，并添加`super()`对基类构造函数的调用。

另外，请参阅[`Effective Java - Item#11 - Override clone judiciously`](http://my.safaribooksonline.com/book/programming/java/9780137150021/creating-and-destroying-objects/ch02lev1sec1#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODAxMzcxNTAwMjElMkZjaDAzbGV2MXNlYzQ=)，这表明该`clone`方法已损坏。

在这篇文章中： - [`Josh Bloch on Design - Copy Constructor versus Cloning`](http://www.artima.com/intv/bloch13.html)，你想看到的第一段`Bloch`： -

> 如果你读过我书中关于克隆的项目，尤其是如果你读到字里行间，你就会知道我认为克隆被严重破坏了。有一些设计缺陷，其中最大的一个是 Cloneable 接口没有克隆方法。这意味着它根本不起作用：制作可克隆的东西并没有说明你可以用它做什么。相反，它说明了它可以在内部做什么。它表示如果通过重复调用 super.clone 最终调用 Object 的 clone 方法，该方法将返回原始的字段副本。

所以，结论是，你可以有一个`copy constructor`在你的`DerivedLocalClass`，它会返回你调用对象的副本，像这样： -

```
public DerivedLocalClass(DerivedLocalClass obj) {
    this.setVar(obj.getVar());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:13:47.670

JVM 克隆通过使用标记接口 Cloneable 而不是查找 Object.clone() 来工作。确实，所有 Java 类都将继承 clone 方法，但根据 javadoc for Cloneable

```
A class implements the Cloneable interface to indicate to the Object.clone() method that it is legal for that method to make a field-for-field copy of instances of that class. 
```

在你的情况下，你不能做 super.clone() 因为它没有被标记为可克隆。如果您无法更改父类，那么您必须自己制作一个副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:26:00.463

我使用的是 java 1.7，运行 OP 给出的代码没有任何问题。除非超类已覆盖克隆以引发异常，否则我认为即使超类未声明自己可克隆，这也应该有效。

我会注意到

```
public Object clone() 
```

没有覆盖克隆方法，它缺少 throws 子句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:12:01.057

正确的方法签名如下

```
@Override
public Object clone() throws CloneNotSupportedException {
    return super.clone();
} 
```

克隆是类中的`Protected`方法，`Object`因此您可以在类中访问它，并且如果您从它扩展。 `super.clone()`只需要从调用当前类对象的`clone()`方法的对象调用方法`internalClone`。`this`

```
 internalClone((Cloneable) this); 
```

所以上面的`clone()`方法只有在调用它的实例不是`Object`时才会抛出`CloneNotSupportedException``Cloneable`

我看到一些关于克隆方法的误解

1.  `clone()`方法`protected`在`Object`类内，所以你不能 `clone()`在类外调用。例如`child.clone()`，除非您覆盖它并进行访问`public`
2.  `Cloneable`是标记接口，如果你不标记类`Cloneable`，那么你会得到`CloneNotSupportedException`如果你调用`clone()`方法
3.  如果一个类只包含原始字段或对不可变对象的引用，那么通常情况下，返回的对象中`super.clone`不需要修改任何字段。
4.  按照惯例，返回的对象应该通过调用`super.clone`. 如果一个类及其所有类都`superclasses (except Object)`遵守这个约定，那么`x.clone().getClass() == x.getClass()`.

所以下面的代码工作正常

```
public  class Child extends UnChangeableBaseClass
        implements
            Cloneable {

    int index = 0;

    public Child(int index) {

        this.index = 10;
    }
    @Override
    public Object clone() throws CloneNotSupportedException {
        return super.clone();
    }

} 
```

参考 ：

1.  [对象#克隆（）](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)
2.  [可克隆](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)

# websocket - 如何从远程ip连接到websocket

> ID：13065086
> 
> 赞同：1
> 
> 时间：2012-10-25T09:01:08.437
> 
> 标签：websocket, tornado

我使用 tornado 服务器和静态 html 页面创建了 Web 套接字测试应用程序，以检查与该服务器的连接。

当我尝试从 localhost 连接到 websocket 时，它工作正常。如果我尝试从远程 IP 连接，我会得到“超时关闭连接”。

`netstat -lnp`给我下一个结果：

```
tcp    0      0 0.0.0.0:8080        0.0.0.0:*         LISTEN      14837/python2.7 
```

# c# - 在现有文档中编辑 Range NumberFormat

> ID：13065087
> 
> 赞同：3
> 
> 时间：2012-10-25T09:01:09.657
> 
> 标签：c#, .net, excel-interop, number-formatting

我无法更改现有 Excel 文档 (xlsx) 中的列格式。列内容实际上是数字，但显示为文本，因此出现绿色三角形，告诉单元格显示为文本。

因此，我在 C# 应用程序中打开此文档并执行以下操作：

```
sheet_.Range[sheet_.Cells[1, 2], sheet_.Cells[rowNum, 2]].EntireColumn.NumberFormat = "0"; 
```

但它不会更改列以将内容显示为数字（它们保持左侧对齐）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-15T19:23:35.703

我知道这是一个旧帖子，但我一直在处理同样的问题。我收到的 .xlsx 文件已经有表示“数字为文本”错误的绿色三角形。我找不到以编程方式运行 Excel 错误检查命令“转换为数字”的方法，您可以通过单击 Excel 来执行此操作，并且更改具有这些错误的单元格上的 NumberFormat 对我不起作用，但我能够使用 TextToColumns 方法“刷新”单元格格式。

```
int lastCol = sheet.UsedRange.Columns.Count;
        if(lastCol > 1)
        {
            for (int i = 1; i <= lastCol; i++)
            {
                sheet.Columns[i].TextToColumns(Type.Missing, XlTextParsingType.xlDelimited, XlTextQualifier.xlTextQualifierNone);
            } 
```

从那里您可以更改 NumberFormat。我碰巧有被放入科学计数法的长整数，所以我用它再次使它们成为常规整数：

```
sheet.Cells.NumberFormat = "#"; 
```

（PS，如果有人找到有关用于自定义 NumberFormats 符号的权威指南，我仍在努力寻找！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T08:59:52.893

尝试通过 get_Range 方法访问单元格值！例如，对于您想要的数字格式，假设您的 excel 单元格中有这个数字：1546,65

```
sheet_.get_Range("P10", "Q10").NumberFormat = "0"; // returns 1546
sheet_.get_Range("P10", "Q10").NumberFormat = "0,00"; // returns 1546,65
sheet_.get_Range("P10", "Q10").NumberFormat = "#.##0,00"; // returns 1.546,65 
```

你可以玩这些数字格式！

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:32:36.583

我没有找到解决这个问题的理想方法，结果如下：

```
 sheet_.get_Range("A1", "A100").NumberFormat = "0";

    for(int i = 1; i <= 100; i++)
    {
       sheet_.Cells[1, i].Value = sheet_.Cells[1, i].Value;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T15:19:22.487

我知道这是一篇旧帖子，但我偶然发现了这个并有一个解决方案。您是否尝试过不分配任何 NumberFormat？默认情况下，excel 根据单元格内容决定，因此如果您有存储为文本的数字，则不会出现绿色三角形。如果您想根据数据类型读取值，请参考这篇文章

[http://www.codeproject.com/Articles/335589/Export-Multiple-Datasets-to-Multiple-Excel-sheets](http://www.codeproject.com/Articles/335589/Export-Multiple-Datasets-to-Multiple-Excel-sheets)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-18T12:05:13.587

对我来说，使用**Style**和**NumberFormatLocal**解决了这个问题：

```
sheet_.get_Range("A1", "A100").Style.NumberFormatLocal = "0"; 
```

# python - 如何让 pyparser 以特定形式工作

> ID：13065088
> 
> 赞同：1
> 
> 时间：2012-10-25T09:01:15.317
> 
> 标签：python, parsing

对不起，对不起标题。我想不出更好的了

我正在尝试使用具有以下要求的 pyparsing 实现 DSL：

1.  变量：它们都以 v_ 开头
2.  一元运算符：+、-
3.  二元运算符：+、-、*、/、%
4.  常数
5.  函数，就像只有一个变量的普通函数一样
6.  函数需要像这样工作： `foo(v_1+v_2) = foo(v_1) + foo(v_2)`, `foo(bar(10*v_6))=foo(bar(10))*foo(bar(v_6))`. 任何二进制操作都应该是这种情况

我可以让 1-5 个工作

这是我到目前为止的代码

```
from pyparsing import *

exprstack = []

#~ @traceParseAction
def pushFirst(tokens):
    exprstack.insert(0,tokens[0])

# define grammar
point = Literal( '.' )
plusorminus = Literal( '+' ) | Literal( '-' )
number = Word( nums )
integer = Combine( Optional( plusorminus ) + number )
floatnumber = Combine( integer +
                       Optional( point + Optional( number ) ) +
                       Optional( integer )
                     )

ident = Combine("v_" + Word(nums))

plus  = Literal( "+" )
minus = Literal( "-" )
mult  = Literal( "*" )
div   = Literal( "/" )
cent   = Literal( "%" )
lpar  = Literal( "(" ).suppress()
rpar  = Literal( ")" ).suppress()
addop  = plus | minus
multop = mult | div | cent
expop = Literal( "^" )
band = Literal( "@" )

# define expr as Forward, since we will reference it in atom
expr = Forward()
fn = Word( alphas )
atom = ( ( floatnumber | integer | ident | ( fn + lpar + expr + rpar ) ).setParseAction(pushFirst) |
         ( lpar + expr.suppress() + rpar ))

factor = Forward()
factor << atom + ( ( band + factor ).setParseAction( pushFirst ) | ZeroOrMore( ( expop + factor ).setParseAction( pushFirst ) ) )

term = factor + ZeroOrMore( ( multop + factor ).setParseAction( pushFirst ) )
expr << term + ZeroOrMore( ( addop + term ).setParseAction( pushFirst ) )
print(expr)
bnf = expr

pattern =  bnf + StringEnd()

def test(s):
    del exprstack[:]
    bnf.parseString(s,parseAll=True)
    print exprstack

test("avg(+10)")
test("v_1+8")
test("avg(v_1+10)+10") 
```

这是我想要的。

我的功能属于这种类型：

```
foo(v_1+v_2) = foo(v_1) + foo(v_2) 
```

任何其他二进制操作也应有相同的行为。我不知道如何让解析器自动执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:17:18.077

将函数调用分解为单独的子表达式：

```
function_call = fn + lpar + expr + rpar 
```

然后向 function_call 添加一个解析操作，从 expr_stack 中弹出运算符和操作数，然后将它们推回堆栈：

*   如果是操作数，则推入操作数然后函数
*   如果是运营商，则推送运营商

由于您只进行二进制操作，因此您最好先做一个简单的方法：

```
expr = Forward()
identifier = Word(alphas+'_', alphanums+'_')
expr = Forward()
function_call = Group(identifier + LPAR + Group(expr) + RPAR)

unop = oneOf("+ -")
binop = oneOf("+ - * / %")
operand = Group(Optional(unop) + (function_call | number | identifier))
binexpr = operand + binop + operand

expr << (binexpr | operand)

bnf = expr 
```

这为您提供了一个更简单的结构来使用，而不必弄乱 exprstack。

```
def test(s):
    exprtokens = bnf.parseString(s,parseAll=True)
    print exprtokens

test("10")
test("10+20")
test("avg(10)")
test("avg(+10)")
test("column_1+8")
test("avg(column_1+10)+10") 
```

给出：

```
[['10']]
[['10'], '+', ['20']]
[[['avg', [['10']]]]]
[[['avg', [['+', '10']]]]]
[['column_1'], '+', ['8']]
[[['avg', [['column_1'], '+', ['10']]]], '+', ['10']] 
```

您想扩展`fn(a op b)`为`fn(a) op fn(b)`，但`fn(a)`应该不理会，因此您需要测试已解析表达式参数的长度：

```
def distribute_function(tokens):
    # unpack function name and arguments
    fname, args = tokens[0]

    # if args contains an expression, expand it
    if len(args) > 1:
        ret = ParseResults([])
        for i,a in enumerate(args):
            if i % 2 == 0:
                # even args are operands to be wrapped in the function
                ret += ParseResults([ParseResults([fname,ParseResults([a])])])
            else:
                # odd args are operators, just add them to the results
                ret += ParseResults([a])
        return ParseResults([ret])
function_call.setParseAction(distribute_function) 
```

现在您的测试调用将如下所示：

```
[['10']]
[['10'], '+', ['20']]
[[['avg', [['10']]]]]
[[['avg', [['+', '10']]]]]
[['column_1'], '+', ['8']]
[[[['avg', [['column_1']]], '+', ['avg', [['10']]]]], '+', ['10']] 
```

这甚至应该通过类似的调用递归地工作`fna(fnb(3+2)+fnc(4+9))`。

# php - 如何获取用户计算机的详细信息？

> ID：13065091
> 
> 赞同：3
> 
> 时间：2012-10-25T09:01:21.617
> 
> 标签：php

我有一个图像库。每个图像都有一个**报告滥用**选项。如果图像是从登录用户报告的，则会在 report_table 中添加一条新记录，其中包含 user_id、image_id、report_reason 和用户的 IP。

经过几天的监控，我发现有些人在我的网站上使用不同的帐户登录并报告我的图像，即使没有报告图像的意义。

我需要做的是确定报告请求是否来自同一台计算机。正如我们所知，大多数互联网用户都使用动态 IP。所以 IP 并不是识别它们的唯一数据。

有什么办法可以从用户计算机上获取更多详细信息，或者我该如何克服这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:05:25.520

在 PHP 中，您从用户那里得到的只是自愿包含在 HTTP 请求中的任何内容，所有内容都显示在`$_SERVER`超级全局中。您无法进入用户的计算机以获取更多信息。

您*可以*使用 Javascript 中的各种技巧更多地对用户的浏览器进行指纹识别。它不能保证唯一性，但可能是一个很好的指标。在您的情况下，这可能是也可能不是一个现实的解决方案。有关更多信息，请参阅[https://panopticlick.eff.org](https://panopticlick.eff.org)。

您显然可以在用户第一次访问时使用唯一 ID 设置一个永不过期的 cookie，但不能保证用户不会删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:04:17.107

你可以通过php获得很多信息

[PHP.net](http://www.php.net/manual/en/reserved.variables.server.php)

或者你使用

[浏览器鹰](http://www.cyscape.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:32:24.797

至于我们 stackoverflow 家伙的评论，克服这个问题的最好方法是使用良好和适当的用户管理和限制。即使 cookie 可以做得更好，也不能保证 cookie 会在用户计算机中存在。因此，持续监控和用户管理将解决这个问题。感谢所有朋友提出宝贵的意见。

# c# - C# Image：保存图像的校验和

> ID：13065092
> 
> 赞同：2
> 
> 时间：2012-10-25T09:01:30.227
> 
> 标签：c#

我有以下代码将图像（位图）转换为字节数组：

```
public byte[] ConvertImageToByteArray(Image imageToConvert, ImageFormat formatOfImage)
{
    byte[] Ret;
    try
    {
        using (MemoryStream ms = new MemoryStream())
        {
            imageToConvert.Save(ms, formatOfImage);
            Ret = ms.ToArray();
        }
    }
    catch (Exception) 
    { 
        throw;
    }

    return Ret;
} 
```

并将字节数组转换回图像（位图）：

```
public Bitmap ConvertByteArrayToImage(byte[] myByteArray)
{
    Image newImage;

    using (MemoryStream ms = new MemoryStream(myByteArray, 0, myByteArray.Length))
    {
        ms.Write(myByteArray, 0, myByteArray.Length);
        newImage = Image.FromStream(ms, true);
    }
    return newImage;
 } 
```

这是我的主程序：

```
 byte[] test = ConvertImageToByteArray(Image.FromFile("oldImage.bmp"), ImageFormat.Bmp);

    Bitmap bmp = ConvertByteArrayToImage(test);
    bmp.Save("newImage.bmp"); 
```

但是当我比较两个图像文件（新旧位图图像）时，它们的校验和似乎不同。发生这种情况有什么原因吗？如何修复它以保持其完整性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:33:50.680

基本上，有很多方法可以将相同的图像编码到 BMP 文件中。如果我在找到的随机图像上尝试您的示例，我看到 .NET`Bitmap`类保存文件而不填充BMP 标头`biSizeImage`中结构中的字段[`BITMAPINFOHEADER`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183376%28v=vs.85%29.aspx)（但由 IrfanView 生成的原始图像已填充），这是完全正确的并记录在案的可能性。（“对于 BI_RGB 位图，这可能设置为零。”）

这绝对不是 BMP 格式中唯一可变的东西。例如，图像中有多种可能的像素数据顺序（从上到下，从下到上），在标题中指定。（“如果 biHeight 为正，则位图为自下而上的 DIB，其原点为左下角。如果 biHeight 为负，则位图为自上而下的 DIB，其原点为左上角。”）

因此，如果您从不受您控制的源接收任何 BMP 文件并且确实需要使用完全相同的 BMP 变体生成图像，那么您有很多工作要做，而且我认为您不能使用标准的 .NET帮助类。

另请参阅此问题：[Save bitmap to file has zero in image size field](https://stackoverflow.com/questions/4812915/save-bitmap-to-file-has-zero-in-image-size-field)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:54:28.837

聊了一会儿，您的解决方案归结为读取和写入字节，将图像对象从方程式中取出并处理原始字节。

要读取文件：

```
 MemoryStream ms = new MemoryStream(File.ReadAllBytes("filename")); 
```

要写入文件：

```
 File.WriteAllBytes("outputfile", ms.ToArray()); 
```

# android - 重用片段结构并传递复杂的参数

> ID：13065093
> 
> 赞同：1
> 
> 时间：2012-10-25T09:01:32.713
> 
> 标签：android, android-fragments, listener, bundle, android-alertdialog

我已经实现了一个 DialogFragment 类，它显示一个对话框并在按下它的按钮时调用一个自定义侦听器。

由于我想在许多项目中重用这个类，我需要在创建片段时传递监听器。但是我不知道我该怎么做。

我知道我不应该在构造函数中传递侦听器，因为如果必须重新创建片段，Android 可以调用默认构造函数，并且我无法通过 Bundle 参数传递侦听器，因为 Bundle 不支持它。

我发现的唯一解决方案是让活动实现自定义侦听器并在 onAttach 方法中检查它。问题是这种方式会将实现类限制为所有者活动，并且可能不适合应用程序。

你找到更好的解决方案了吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:16:23.753

您通常有一个静态`newInstance()`方法来创建您的片段并传递您的片段可能需要的任何值。这就是传递你的听众的方法。

看看这里`newInstance()`也以方法为例：http: [//developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

# vhdl - 在 VHDL 状态机中实现延迟

> ID：13065101
> 
> 赞同：0
> 
> 时间：2012-10-25T09:01:53.833
> 
> 标签：vhdl, fifo, xilinx

我正在编写一个状态机，它通过设置和读取读/写使能来控制来自芯片的数据流。我的时钟以 27 MHz 运行，周期为 37 ns。然而，我正在与之通信的芯片的规范要求我将“读取请求”信号保持至少 50 ns。当然这不可能在一个周期内完成，因为我的周期是 37 ns。

我考虑过我可以创建一个额外的状态，它只会将下一个状态标记为我实际完成读取的状态，因此增加了另一个周期延迟（意味着我持有 74 ns 的“读取请求”），但这不会听起来不错。

另一种选择可能是使用柜台，但我想知道是否还有另一种选择我还没有访问过？

当状态应该持续超过一个时钟周期时，应该如何在状态机中实现延迟？

谢谢！

![T1 必须大于 50 ns](../Images/ef47bed55ee4b309f8b13c6ba6934faf.png) （T1 必须大于 50 ns）请[在此处](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://www.ftdichip.com/Support/Documents/DataSheets/ICs/DS_FT245R.pdf&ei=vwCJUJyXPMOQhQeQsYGABg&usg=AFQjCNGaC351imKRH5z8t9mBHTl9egicxQ&sig2=gFj_N9jVJtayzC0qfaTaZg)查看完整的数据表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:19:29.873

只有使用时钟才能可靠地实现延迟 - 通过额外的状态或在现有状态下使用计数器添加额外的“滴答”在我看来是完全可以接受的。如果您重新使用具有较慢外部芯片的相同状态机（或者如果您使用不同的时钟频率为 FPGA 供电），计数器可能会更灵活 - 您只需更改最大计数，而不是添加多个状态机的“等待”状态。

# haskell - Parsec 和 Applicative 风格

> ID：13065102
> 
> 赞同：10
> 
> 时间：2012-10-25T09:01:55.797
> 
> 标签：haskell, functional-programming, applicative

有人可以帮助我了解如何使用 Applicative 样式来编写 Parsec 解析器吗？这是我的代码：

```
module Main where
import Control.Applicative hiding (many)
import Text.Parsec
import Data.Functor.Identity
data Cmd = A | B deriving (Show)

main = do
  line <- getContents
  putStrLn . show $ parseCmd line

parseCmd :: String -> Either ParseError String
parseCmd input =  parse cmdParse "(parser)" input

cmdParse :: Parsec String () String
cmdParse = do
  slash <- char '/'
  whatever <- many alphaNum
  return (slash:whatever)

cmdParse2 :: String -> Parsec String () String
cmdParse2 = (:) <$> (char '/') <*> many alphaNum 
```

但是当我尝试编译它时，我得到以下信息：

```
/home/tomasherman/Desktop/funinthesun.hs:21:13:
    Couldn't match expected type `Parsec String () String'
                with actual type `[a0]'
    Expected type: a0 -> [a0] -> Parsec String () String
      Actual type: a0 -> [a0] -> [a0]
    In the first argument of `(<$>)', namely `(:)'
    In the first argument of `(<*>)', namely `(:) <$> (char '/')'
Failed, modules loaded: none. 
```

这个想法是我希望 cmdParse2 做与 cmdParse 相同的事情，但是使用应用程序......我的方法可能完全错误，我是 haskell 的新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:26:39.387

您的应用程序使用是正确的，您只是有一个不正确的签名。尝试：

```
cmdParse2 :: Parsec String () String 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T09:24:27.403

你的方法在我看来是正确的，问题是`cmdParse2`类型错误。它应该具有与 相同的类型`cmdParse`。顺便说一句，您可以`char '/'`在应用样式解析器中省略括号。

# python - Python nltk 只读

> ID：13065103
> 
> 赞同：1
> 
> 时间：2012-10-25T09:02:09.337
> 
> 标签：python, eclipse, ubuntu, nltk

我正在尝试遵循此处的建议： [Jython: ImportError: No module named multiarray](https://stackoverflow.com/questions/6956306/jython-importerror-no-module-named-multiarray/11086933#11086933)（但是当我尝试在 eclipse 中更改和保存 nltk/metrics/segmentation.py 文件时（在 ubuntu 11 下）我得到

资源的父级：`/usr/local/lib/python2.7/dist-packages/nltk/metrics/segmentation.py`标记为只读。 `/usr/local/lib/python2.7/dist-packages/nltk/metrics/segmentation.py`（权限被拒绝）我已经尝试过`chmod 777 -r`，但这并没有做任何事情。

任何人都可以帮助一个菜鸟超过他的深度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:53:49.393

Chmod 的递归是大写的“R”，选项 -R 位于权限之前，权限本身位于目录之前。因此：

```
sudo chmod -R 777 dir/name 
```

应该做你想做的。

但是，我总是很难告诉人们去 chmodding 777 任性。

默认情况下，主目录之外的所有目录都是只读的。三组用户共有三种权限：“读”、“写”、“执行”。如果您`ls -l` 在相关目录上运行命令，您应该会看到如下内容：

```
drwxr-xr-x    4 shannon  admin   136 Oct  7 18:22 chunkers/
drwxr-xr-x  122 shannon  admin  4148 Nov  1 08:22 corpora/
drwxr-xr-x   12 shannon  admin   408 Nov  1 08:22 grammars/ 
```

Linux 系统的安全性主要基于这样一个事实，即只有 root 可以做任何事情。其他所有人，包括您的用户名，都必须请求许可。这可能看起来很麻烦，但我们 Linux 用户很高兴每个人都必须请求许可。

那么，这个废话是什么意思：

```
drwxr-xr-x 4 shannon admin some-numbers date-time dir/name 
```

1.  `drwx`：这是用户/所有者（香农）可以为`rwx`.
2.  `r-x`：组（在本例中为管理员）可以执行以下操作：（`rx`读取和执行，而不是写入）。
3.  `r-x`: 其他人（任何其他用户）可以执行以下操作：`rx`.

等等。

要编辑该文件，您可以将相关目录的所有者永久更改为您自己：

```
sudo chown -R yourusername /usr/local/lib/python2.7/dist-packages/nltk/ 
```

当然，您可以通过多种不同的方式授予自己编辑内容的权限（例如，您可以`sudo chgrp -R g+w dir/name`然后确保您的用户名是现在可以*写入*目录的组的一部分）。这是一个很好的制作方法，以便其他人可以做一些事情来做这个目录。

可能最好的解决方案是使用 sudo 和命令行编辑器来编辑文件，因为您可能不会多次编辑文件，对吗？

```
sudo nano /usr/local/lib/python2.7/dist-packages/nltk/metrics/segmentation.py 
```

使用 CTRL+o 保存并使用 CTRL+x 退出。

无论如何，有些答案不如其他答案安全，但我一直对 chmod 777 一切犹豫不决。也许我被教导过于偏执。

# sql - SQL 并排显示两个结果

> ID：13065105
> 
> 赞同：4
> 
> 时间：2012-10-25T09:02:25.377
> 
> 标签：sql, sqlite

我有两个表，并且正在对每个表进行有序选择。我希望在一个结果中看到两个订单的结果。

示例（简化）：

```
"SELECT * FROM table1 ORDER BY visits;"
name|# of visits
----+-----------
 AA | 5
 BB | 9
 CC | 12
.
.
.

"SELECT * FROM table2 ORDER BY spent;"
name|$ spent
----+-------
 AA | 20
 CC | 30
 BB | 50
.
.
. 
```

我想将结果显示为两列，这样我就可以直观地感受到最常访问的访问者是否也是最好的买家。（我知道这个例子是糟糕的数据库设计，而不是真实的场景。这是一个例子）

我想得到这个：

```
name by visits|name by spent
--------------+-------------
 AA           | AA
 BB           | CC
 CC           | BB 
```

我正在使用 SQLite。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:06:27.450

```
 Select A.Name as NameByVisits, B.Name as NameBySpent
    From (Select C.*, RowId as RowNumber From (Select Name From Table1 Order by visits) C) A
    Inner Join
    (Select D.*, RowId as RowNumber From (Select Name From Table2 Order by spent) D) B
    On A.RowNumber = B.RowNumber 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:10:47.377

尝试这个

```
select 
    ISNULL(ts.rn,tv.rn), 
    spent.name, 
    visits.name 
from 
(select *, (select count(*) rn from spent s where s.value>=spent.value ) rn from spent) ts  
    full outer join
(select *, (select count(*) rn from visits v where v.visits>=visits.visits ) rn from visits) tv     
    on ts.rn = tv.rn
order by ISNULL(ts.rn,tv.rn) 
```

它为源表中的每个条目创建一个等级，并将两者的等级连接起来。如果有重复的排名，他们将在结果中返回重复的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-17T17:09:35.180

我知道这不是一个直接的答案，但我一直在寻找它，以防有人需要它：这是一个更简单的解决方案，适用于每列只有一个结果：

```
select 
   (select roleid from role where rolename='app.roles/anon') roleid, -- the name of the subselect will be the name of the column
   (select userid from users where username='pepe') userid;          -- same here 
```

结果：

```
 roleid                |                userid
 --------------------------------------+--------------------------------------
  31aa33c4-4e66-4da3-8525-42689e46e635 | 12ad8c95-fbef-4287-9834-7458a4b250ee 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T09:08:29.373

对于支持公用表表达式和窗口函数（例如，SQL Server、Oracle、PostreSQL）的 RDBMS，我会使用：

```
WITH most_visited AS
(
  SELECT ROW_NUMBER() OVER (ORDER BY num_visits) AS num, name, num_visits
  FROM visits
),
most_spent AS
(
  SELECT ROW_NUMBER() OVER (ORDER BY amt_spent) AS num, name, amt_spent
  FROM spent
)
SELECT mv.name, ms.name
FROM most_visited mv INNER JOIN most_spent ms
ON mv.num = ms.num
ORDER BY mv.num 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T09:06:08.480

只需将 table1 和 table2 与名称作为键连接，如下所示：

```
select a.name, 
   b.name, 
   a.NumOfVisitField, 
   b.TotalSpentField 
from table1 a
left join table2 b on a.name = b.name 
```

# url - 在所有网址中保留获取参数

> ID：13065108
> 
> 赞同：2
> 
> 时间：2012-10-25T09:02:28.577
> 
> 标签：url, parameters, assign

我正在使用 prestashop，我想运行 a/b 测试。这意味着您在将 50% 的流量重定向到模板 A 和 50% 的流量到模板 B 的同时测试您网站的 2 个不同模板。

我必须在我的文件夹中设置主题：

-主题A -主题B

要运行测试，我需要通过不同的 url 表单 themeA 访问 themeB。

因此，在文件夹“/config”中，我修改了文件 setting.inc.php，如下所示：

`if(isset($_GET['ab'])) { define('_THEME_NAME_', 'themeB'); } else{ define('_THEME_NAME_', 'themeA'); }`

现在我可以通过键入以下内容访问主题：www.myshop.com/?ab

我的问题是，每当我单击链接时， ?ab 参数都会丢失并返回到模板 A。

我发现有人使用另一个 cms 解决了使用此代码的问题：

```
`$this->redirect(array('name')); ` 
```

但我不知道如何使其适应 prestashop 以及我应该把它放在哪里。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:57:46.310

如果在“主题检查”之前启动了会话（[http://sg3.php.net/manual/en/function.session-start.php][1]），则一种快速的解决方法可能是使用会话。

```
// Page => watermelons.php    
<?php
session_start();

if(isset($_GET['ab']) || isset($_SESSION['ab'])) {
    $_SESSION['ab'] = 'themeB';
    define('_THEME_NAME_', 'themeB');
} else{
    define('_THEME_NAME_', 'themeA');
}

echo _THEME_NAME_;

?>
<br /><a href="coconuts.php">go to coconuts</a>

// Page => coconuts.php    
<?php
session_start();

if(isset($_GET['ab']) || isset($_SESSION['ab'])) {
    $_SESSION['ab'] = 'themeB';
    define('_THEME_NAME_', 'themeB');
} else{
    define('_THEME_NAME_', 'themeA');
}

echo _THEME_NAME_;

?>
<br /><a href="watermelons.php">go to watermelons</a> 
```

# php - 带有服务器名称的 PHP 电子邮件脚本

> ID：13065109
> 
> 赞同：0
> 
> 时间：2012-10-25T09:02:31.927
> 
> 标签：php, email, localhost

我有一个可以在我的服务器上正常工作的电子邮件脚本，但是当我把它放在另一个服务器上时，我需要将服务器名称从 localhost 更改为他们拥有的名称。我拥有的电子邮件脚本没有服务器名称，我想知道该怎么做？下面是脚本...

```
<?PHP
$email = $_POST["emailaddress"];
$firstname = $_POST["firstname"];
$lastname = $_POST["lastname"];
$zipcode = $_POST["zipcode"];
$feedback = $_POST["feedback"];
$date=date("d-m-Y");

$to = "";
$subject = "New Feedback Received";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: $email\n";

$message = "

<html>
<head></head>
<body>

A visitor to your website has left the following feedback; <br /><br />
Date: $date <br />
First Name: $firstname <br />
Last Name: $lastname <br />
Zip Code: $zipcode <br />
Email Address: $email <br />
Feedback: $feedback <br />

<img src=\"" />
</body>
</html>
";
$user = "$email";
$usersubject = "Thank You";

$userheaders = 'MIME-Version: 1.0' . "\r\n";
$userheaders .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$userheaders .= "From: info@westmorelandberryfarm.com\n";
$usermessage =
"
<html>
<head></head>
<body>
Thank you for your feedback, your comments are important to us.
<br /><br />
We hope to see you at the Farm very soon!
<br /><br />
<br />
Tel:  <br />
<a href=\""</a><br />
<img src=\"" />
</body>
</html>
";

mail($to,$subject,$message,$headers);
mail($user,$usersubject,$usermessage,$userheaders);
$fh = fopen("feedback.txt", "a");
fwrite($fh, "Date:$date\r\nFirst Name:$firstname\r\nLast Name:$lastname\r\nEmail:$email\r\nZip   Code:$zipcode\r\nFeedback:$feedback\r\n \r\n");
fclose($fh);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:08:33.477

如果您将它放在一个实时服务器环境中，例如`Amazon`or `Rackspace`，您将拥有一个合格的服务器名称，您可以从`$_SERVER[]`变量中获取该名称。但最重要的是您必须确保您的服务器实例有一个`non-black listed ip,`或分配一个弹性 ip 用于在所有域上传递邮件。

# android - 用 Handler 覆盖 onBackPressed 会导致 NPE

> ID：13065110
> 
> 赞同：1
> 
> 时间：2012-10-25T09:02:36.207
> 
> 标签：android, handler

我有一个显示 ListView 的活动。我想在 25 秒后调用 Activity 的 onBackPressed() 。目前它正在导致NPE。谁能告诉我为什么？谢谢。它也不显示listView，它立即返回调用屏幕，然后在指定时间后，NPE 发生。

```
@Override
protected void onNewIntent(Intent intent) {
    setIntent(intent);
    super.onNewIntent(intent);
}

 Handler handler = new Handler();
    Runnable runnable = new Runnable() {
        public void run() {
            returnToMenu();

        }

        private void returnToMenu() {

            handler.postDelayed(runnable, 25000);
            onBackPressed();
        }
    };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.getrotalayout);

     setCurrentDateOnView();

    nfcscannerapplication = (NfcScannerApplication) getApplication();

    //set titlebar to carer's name
    Cursor cursorCarerName = nfcscannerapplication.loginValidate.queryAllFromCarer();
    cursorCarerName.moveToLast();
    String carerTitleName = cursorCarerName.getString(cursorCarerName
                    .getColumnIndex(LoginValidate.C_CARER_FIRSTNAME)) + " " + cursorCarerName.getString(cursorCarerName
                            .getColumnIndex(LoginValidate.C_CARER_LASTNAME)) ;
    setTitle(carerTitleName + " is currently logged in");

    listView = (ListView) findViewById(R.id.rotalist);
    textViewDate = (TextView)findViewById(R.id.textviewdate);
    Log.e(TAG, "textview = "+textViewDate);

    listView.setAdapter(arrayAdapter);
    listView.setOnItemClickListener(this);

    runnable.run();

}// end of onCreate 
```

.

```
10-25 10:00:25.780: E/AndroidRuntime(20896): FATAL EXCEPTION: main
10-25 10:00:25.780: E/AndroidRuntime(20896): java.lang.NullPointerException
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1359)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:439)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.app.FragmentManagerImpl.popBackStackImmediate(FragmentManager.java:454)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.app.Activity.onBackPressed(Activity.java:2185)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at com.carefreegroup.GetRota$1.returnToMenu(GetRota.java:77)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at com.carefreegroup.GetRota$1.run(GetRota.java:70)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.os.Handler.handleCallback(Handler.java:608)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.os.Looper.loop(Looper.java:156)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at android.app.ActivityThread.main(ActivityThread.java:5045)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at java.lang.reflect.Method.invokeNative(Native Method)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at java.lang.reflect.Method.invoke(Method.java:511)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-25 10:00:25.780: E/AndroidRuntime(20896):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:09:20.790

替换以下行`onCreate`

```
runnable.run(); 
```

和

```
handler.postDelayed(runnable, 25000); 
```

并删除该行

```
handler.postDelayed(runnable, 25000); 
```

从`returnToMenu`方法上。

# asp.net - ASP.NET 捆绑 - 默认虚拟路径？

> ID：13065120
> 
> 赞同：6
> 
> 时间：2012-10-25T09:03:11.667
> 
> 标签：asp.net, bundle, asp.net-optimization, web-optimization

据我所知（因为坦率地说，文档`System.Web.Optimization`非常稀少），捆绑在 ASP.NET 中的工作方式是注册一组文件（Javascript 或 CSS，与`ScriptBundle`and对应`StyleBundle`），并将它们与虚拟路径相关联；例如，`~/bundles/jqueryui`对于所有 jQuery UI 脚本。稍后，当您在非调试模式下运行时，ASP.NET 可以缩小这些文件，并且缩小版本将在您为捆绑包指定的虚拟路径中提供。

默认捆绑设置将一些脚本捆绑注册`~/bundles/...`为虚拟路径，并将一些 CSS注册`~/Content/css`为虚拟路径。我的问题是，这不是不一致吗？`~/bundles/js/...`拥有类似and的东西不是更有意义`~/bundles/css/...`吗？事实上，该`~/Content`目录实际上是作为一个真实目录存在的，因此甚至存在名称冲突的可能性。我原以为您希望您的虚拟包路径是默认情况下*不*存在的目录，并且不打算在实际文件系统上创建。是否有某些原因`~/Content/css`用于我不理解的 CSS 捆绑虚拟路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T17:10:14.653

很好的问题，简短的故事是，总的来说，这根本不重要。但是，某些脚本文件和 CSS 取决于它们在磁盘上的物理位置，因为它们使用相对路径来引用其他内容。例如，如果您查看新 ASP.NET 4.5 项目中的默认 jQuery UI 包，您会发现它的路径相当长。那是因为 jQuery 的 CSS 对某些图像文件有相对引用。为了让那些正确解析路径很重要，否则“..”之类的东西将不会进入正确的父目录。

# javascript - 在 MongooseJs 中选择特定字段

> ID：13065121
> 
> 赞同：9
> 
> 时间：2012-10-25T09:03:15.097
> 
> 标签：javascript, node.js, mongodb, mongoose

我有一个带有 Mongoose ODM 的 NodeJS 应用程序。我想从集合中选择三个特定字段。例如，我的集合是“用户”，具有字段 '_id','username','email','usertype','password'... 我只想选择 'username','email'&'usertype' 。这是**我的代码**

```
 var query = models.User.find({}).select('UserName', 'Email', 'UserType'); 
```

这适用于 mongoose 2 版本，我更新到 Mongodb 2.2 和 Mongoose 3.3.1。现在我收到错误

```
500 TypeError: Invalid select() argument. Must be a string or object. 
```

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T09:09:33.507

由于 mongoose 3 [select()](http://mongoosejs.com/docs/api.html#query_Query-select)参数可以是：

*   包含排除/包含字段的 0-1 映射的对象
*   以空格分隔的字段名字符串（`-`需要排除的字段之前）

所以你应该使用：

```
var query = models.User.find({}).select('UserName Email UserType'); 
```

或者

```
var query = models.User.find({}).select({UserName : 1, Email : 1, UserType: 1}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-18T14:18:14.083

从 Mongoose 版本 4 开始，您不需要 select()。

```
var query = models.User.find({}, 'UserName Email UserType'); 
```

# thinking-sphinx - Padrino 应用程序不知道自己的根路径

> ID：13065122
> 
> 赞同：0
> 
> 时间：2012-10-25T09:03:16.703
> 
> 标签：thinking-sphinx, padrino

我有一个似乎不知道自己的根路径的 Padrino 应用程序。该应用程序运行良好，但是当我尝试要求我编写并放入`models`文件夹中的文件时，它说找不到它。该文件需要在模型文件夹中的另一个文件中：`DvdActor.rb`. 我可以使用这些路径中的任何一个，但它不会找到它：

```
/app/models/file.rb
file.rb
models/file.rb
app/models/fie.rb
... 
```

如果我使用它只会找到它：

```
"#{Padrino.root}/app/models/file.rb" 
```

此外，`Thnking Sphinx`gem 在编写配置文件或索引时也会遇到问题（如果我硬编码配置文件的路径）。

当我让 Padrino 生成一个模型时，它会`model`在 app 文件夹本身的根文件夹中创建一个新文件夹。

我可以从头开始重新创建我的应用程序并复制文件，但我已经有 Heroku 和 git 设置等，并且不想重新创建所有这些（有时只是复制文件不能正常工作）。

有没有办法重置这个？

# ruby-on-rails - Rails 明智地编写 csv 文件列

> ID：13065130
> 
> 赞同：0
> 
> 时间：2012-10-25T09:03:38.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我喜欢使用内置的 csv rails 库将我的 rails 应用程序中的数据集导出为 csv 文件。通常一个 csv 文件是按行编写的，就像下面的示例一样，它来自我的 datasets_controller.rb：

```
require 'csv'

dataset = Dataset.find(6)
dataset_headers = dataset.datacolumns.collect { |dc| dc.columnheader }

csv_file = CSV.generate do  |csv|                                                                                                           
   csv << dataset_headers
end 
```

现在我的问题是我是否也可以像这样明智地编写我的 csv 文件列？

```
require 'csv'    

dataset_columns = Datacolumn.all(:conditions => ["dataset_id = ?", 6], :order => "columnnr ASC").uniq 

csv_file = CSV.generate do  |csv|                                                                                                           
   csv << "here put one after another all my data columns"
end 
```

编辑：

根据道格拉斯的建议，我想出了下面的colde。

```
 data_columns=Datacolumn.all(:conditions => ["dataset_id = ?", dataset.id], :order => "columnnr ASC").uniq

    CSV.generate do |csv|
        value=Array.new 
        data_columns.each do |dc|
          value << dc.columnheader
          dc.sheetcells.each do |sc|
            if sc.datatype && sc.datatype.is_category? && sc.category 
              value << sc.category.short
            elsif sc.datatype && sc.datatype.name.match(/^date/) && sc.accepted_value
              value << sc.accepted_value.to_date.to_s
            elsif sc.accepted_value
              value << sc.accepted_value
            else
              value << sc.import_value
            end 
          end 
          csv << value
          value = Array.new 
        end 
      end 
```

对于这种情况，输出不会转置，如下所示：

```
height,10,2,<1,na
fullauthor,Fortune,(Siebold & Zucc.) Kuntze,Fortune,(Siebold & Zucc.) Kuntze
Year,1850,1891,1850,1891
fullname,Mahonia bealei,Toxicodendron sylvestre,Mahonia bealei,Toxicodendron sylvestre 
```

但是当我将写入 csv 的行更改为

```
csv << value.transpose 
```

我收到一个错误，告诉我它无法将字符串转换为数组来执行此操作。有人知道如何解决这个问题吗？

对此的任何帮助将不胜感激。

最好的克拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:44:12.330

您可以使用`Array#transpose`，它将您的行翻转为列。一个简单的例子：

```
> a = [['name', 'charles', 'dave'],['age', 24, 36],['height', 165, 193]]
=> [["name", "charles", "dave"], ["age", 24, 36], ["height", 165, 193]]
> a.transpose
=> [["name", "age", "height"], ["charles", 24, 165], ["dave", 36, 193]] 
```

因此，假设`dataset_columns`是一个数组：

```
require 'csv'    

dataset_columns = Datacolumn.all(:conditions => ["dataset_id = ?", 6], :order => "columnnr ASC").uniq 

csv_file = CSV.generate do  |csv|                                                                                                           
   csv << dataset_columns.transpose
end 
```

# winapi - 我如何知道 Windows 机器上的特定文件是否支持备用数据流？

> ID：13065133
> 
> 赞同：1
> 
> 时间：2012-10-25T09:03:48.750
> 
> 标签：winapi, alternate-data-stream

使用来自 C/C++ 的原始 Windows 编程 API 和文件句柄或文件、文件夹、链接等的路径；如何以编程方式确定文件（等）是否支持`ADS`（备用数据流）？

我假设我必须知道的一件事是该文件是否在 NTFS 分区上，但我再次知道它可能会挂载某种 Mac 或 *nix 文件系统，这些文件系统支持数据分叉或某种替代数据流，并且所有这些情况都可能被单个 API 调用或数据结构覆盖。

其次，我不确定是否可以存在于 NTFS 分区上的每种对象都可以具有 ADS - 例如文件夹、符号链接、硬链接等等？

什么 API 等可以处理所有情况来告诉我给定文件等是否具有 ADS 的能力？

（对于这个问题，我不是在寻找文件是否*有*ADS，而是在寻找文件是否有可能拥有它们。例如，它可能包括我刚刚创建的文件。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:20:34.250

ADS 是 NTFS 的一项功能。您可以使用它`GetVolumeInformation()`来检测给定路径是否在 NTFS 文件系统上，即使该卷是否完全支持 ADS。AFAIK，只有真实文件才能附加 ADS。您可以`GetFileAttributes()`用来检测路径是否是文件、目录、符号链接等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:39:34.970

Like any other file, Directories can also host other ADS! Any file object on NTFS can store more than one DATA Stream. The 'visible' one is named, any additional data stream is 'invisible' as far as Explorer is concerned. Actually, at the prompt now one can display ADS using the /R switch when invoking dir.

# jquery-mobile - JSON 文件未在 Chrome 或 Internet Explorer 上加载

> ID：13065134
> 
> 赞同：1
> 
> 时间：2012-10-25T09:04:00.437
> 
> 标签：jquery-mobile

我正在创建一个 jQuery Web 移动应用程序。它在 Firefox 上运行良好，但在 Internet Explorer 或 Google Chrome 上运行时显示错误： `json file not load`

```
$.getJSON('menu.json', function(menu) {
    var processedTemplate = $.mustache($("#menuTemplate").html(),    menu.menu);
    $list.html(processedTemplate);
});
// .error(function(jqXHR, textStatus, errorThrown) {
// alert("error " + textStatus + " incoming Text " + jqXHR.responseText);
// });
.error(function() { alert("Sorry can't load JSON file locally in this browser!")}); 
```

# android - 为什么 Eclipse 无法识别我的 Android 手机？

> ID：13065139
> 
> 赞同：1
> 
> 时间：2012-10-25T09:04:26.170
> 
> 标签：android, eclipse, debugging

我有 Galaxy Nexus。我打开了调试模式，当我尝试更新驱动程序软件时，我收到一条消息说我的驱动程序是最新的。

我正在尝试运行一个简单的“hello world”，但是当我尝试运行它时 Eclipse 无法识别我的手机已连接...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:16:34.563

在您的设备设置中尝试这三件事...

1.  未知来源：允许安装非市场应用程序。（在我的 Galaxy sIII 上，它位于“安全性”下）

2.  打开 USB 调试（在开发人员选项下。在将设备插入计算机之前执行此操作。

3.  打开 USB 网络共享（在我的手机上，它位于“无线和网络”设置下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:10:29.997

USB 调试模式应该在您的手机中打开，如果使用 Windows 安装所需的所有驱动程序，而在 Mac 和 linux 中，您只需要检查您的 USB 调试
`Setting->Developer options`

# makefile - 使目标取决于执行

> ID：13065142
> 
> 赞同：1
> 
> 时间：2012-10-25T09:04:32.163
> 
> 标签：makefile, gnu-make

我希望我的 make 目标依赖于执行文件。例如我有简单的makefile：

```
a.out: test.cpp
    gcc test.cpp 
```

我想要这样的东西：

```
a.out: test.cpp, `which gcc`
    gcc test.cpp 
```

这意味着更改您的 gcc（特别是更新）将导致 a.out 的重建（即使 test.cpp 没有更改）。

但它看起来像一个不合时宜的解决方案，因为您应该为该规则工具中使用的每条规则添加一个额外的先决条件。

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:07:17.033

在 GNU `make`makefile 中，您可以使用：

```
CC := $(shell which gcc)

a.out: test.cpp ${CC}
    ${CC} -o $@ test.cpp 
```

请注意，只有在编译器可执行文件被修改时才会触发构建，而不仅仅是因为它与上次构建程序时不同。从历史上看，SUN`make`有一个“.make.state”文件和一个`.KEEP_STATE`跟踪此类事情的目标。`clearmake`如果您选择这样做，IBM Rational ClearCase还可以跟踪此类问题。

# c# - 用 IDal 包装 EntityFrameWork 界面

> ID：13065146
> 
> 赞同：1
> 
> 时间：2012-10-25T09:04:40.187
> 
> 标签：c#, .net, entity-framework, architecture

我只想用接口包装我的`EntityFrameWork`类。`IDal<T>``CRUD operations`

我想创建对应于每个实体的 BL 数据模型

意思是如果我有`TempEntity`我将创建`TempBlObj`和接口`IDal<TempBlObj>`

是否有完成此类任务的指导方针？

我在实施时遇到了问题`Save(TempBlObj)`

因为实体中的保存是通过以下方式完成的：

`mDbEntities.SaveChanges();`

这取决于对实体参考所做的更改。

有什么解决办法吗？

**更新**

我这样做是为了模拟我的`IDal<T>`界面

例如为了改变 TempEntity.status

我将不得不创建一个具体的方法`ChangeStatus()`而不是通用的`CRUD`：`Save(BlObj item)`

因为保存实体就像

`..take reference to some entity, do some change..`和

`mMamDbEntities.SaveChanges();`

我尝试添加 BlObjects 以放松 Bl 和具体 EntityFW 之间的依赖关系

**更一般：**

使用 ORM 时，使用`IDal<T>`接口（`CRUD`操作）进行松散封装的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:01:55.860

在为我的系统规划存储库时，我会尝试记住几个事实：

*   O/RM 可以帮助我实现存储不感知的实体。这意味着我*没有*专门划分业务实体和数据库实体。我有一个`User`实体——ORM 无论如何都应该坚持它，我不打算在这里介绍额外的层。

*   我将从限制较少的界面开始：

```
 interface IDal {
        T Get<T>(id);
        void Save(object o); //or T, if needed
        IQueryable<T> Query<T>();
    } 
```

*   并且 - 可以很好地模拟它（使用 Moq 的示例）。

```
 var users = new List<User>(){ /* Users here */}
    var mockedRepository = new Mock<IRepository>();

    //getup GET
    mockedRepository.Setup(
        self => self.Get<User>( It.IsAny<int>() )
    .Returns( (int id) => _users.First(u => u.Id == id) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:09:20.227

拯救实体的责任不应该是实体本身的工作。这是个坏主意。您可以考虑在您的情况下实施[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。

# java - struts 电子邮件应用程序。电子邮件正文的动态 Html 内容

> ID：13065163
> 
> 赞同：1
> 
> 时间：2012-10-25T09:05:38.310
> 
> 标签：java, string, email, struts

在 struts2 应用程序中，我希望在用户登录时发送电子邮件通知。

我希望邮件正文是 Html 内容，用户在运行时输入的数据。

任何人都可以建议最好的方法！

敌人现在正在使用 mail.jar，并且能够轻松发送静态内容。但面临的困难 1\. 维护长的 HTMl 代码字符串。2\. 如何用动态值替换字符串中的值

请有人可以帮助我提供适当的解决方案。或在电子邮件应用程序中遵循的最佳实践！

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:43:17.490

[您可以使用CKEditor](http://ckeditor.com/)或[TinyMCE](http://www.tinymce.com/)之类的 WYSIWYG（所见即所得）编辑器，让用户在不知道 html 的情况下编写 html。

然后，在用户提交正文后，您将输出是纯 html，并将其注入邮件正文。

故事结局...

请记住将 mimetype 设置为`text/html`而不是设置为`text/plain`，否则您将看到标签而不是它们的表示...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:11:35.283

1.  您可以将电子邮件正文放在属性文件中并从那里读取。

2.  对于替换，您可以在您的字符串中定义“占位符”，例如 {FIRSTNAME} {LASTNAME} 等，然后对代码中的动态部分执行 replaceAll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:35:00.760

你需要研究的是“freemarker”。它是一个图书馆，你可以用它来实现你的目的。

# c++ - C++11 标记元组

> ID：13065166
> 
> 赞同：40
> 
> 时间：2012-10-25T09:05:49.807
> 
> 标签：c++, c++11, tuples

C++11 元组很好，但它们对我有两个巨大的缺点，按索引访问成员是

1.  不可读
2.  难以维护（如果我在元组中间添加一个元素，我就完蛋了）

本质上我想要实现的是这个

```
tagged_tuple <name, std::string, age, int, email, std::string> get_record (); {/*...*/}
// And then soomewhere else

std::cout << "Age: " << get_record().get <age> () << std::endl; 
```

在 boost::property_map 中实现了类似的东西（类型标记），但我无法理解如何在具有任意数量元素的元组中实现它

PS 请不要**建议**使用元组元素索引定义枚举。

**UPD** 好的，这是一个动机。在我的项目中，我需要能够“即时”定义许多不同的元组，并且它们都需要具有某些通用函数和运算符。这是结构无法实现的

**UPD2** 实际上，我的示例实施起来可能有点不切实际。这个怎么样？

```
tagged_tuple <tag<name, std::string>, tag<age, int>, tag<email, std::string>> get_record (); {/*...*/}
// And then somewhere else

std::cout << "Age: " << get_record().get <age> () << std::endl; 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-25T09:58:55.307

我不知道有任何现有的类可以做到这一点，但是使用 a`std::tuple`和索引类型列表将一些东西放在一起相当容易：

```
#include <tuple>
#include <iostream>

template<typename... Ts> struct typelist {
  template<typename T> using prepend = typelist<T, Ts...>;
};

template<typename T, typename... Ts> struct index;
template<typename T, typename... Ts> struct index<T, T, Ts...>:
  std::integral_constant<int, 0> {};
template<typename T, typename U, typename... Ts> struct index<T, U, Ts...>:
  std::integral_constant<int, index<T, Ts...>::value + 1> {};

template<int n, typename... Ts> struct nth_impl;
template<typename T, typename... Ts> struct nth_impl<0, T, Ts...> {
  using type = T; };
template<int n, typename T, typename... Ts> struct nth_impl<n, T, Ts...> {
  using type = typename nth_impl<n - 1, Ts...>::type; };
template<int n, typename... Ts> using nth = typename nth_impl<n, Ts...>::type;

template<int n, int m, typename... Ts> struct extract_impl;
template<int n, int m, typename T, typename... Ts>
struct extract_impl<n, m, T, Ts...>: extract_impl<n, m - 1, Ts...> {};
template<int n, typename T, typename... Ts>
struct extract_impl<n, 0, T, Ts...> { using types = typename
  extract_impl<n, n - 1, Ts...>::types::template prepend<T>; };
template<int n, int m> struct extract_impl<n, m> {
  using types = typelist<>; };
template<int n, int m, typename... Ts> using extract = typename
  extract_impl<n, m, Ts...>::types;

template<typename S, typename T> struct tt_impl;
template<typename... Ss, typename... Ts>
struct tt_impl<typelist<Ss...>, typelist<Ts...>>:
  public std::tuple<Ts...> {
  template<typename... Args> tt_impl(Args &&...args):
    std::tuple<Ts...>(std::forward<Args>(args)...) {}
  template<typename S> nth<index<S, Ss...>::value, Ts...> get() {
    return std::get<index<S, Ss...>::value>(*this); }
};
template<typename... Ts> struct tagged_tuple:
  tt_impl<extract<2, 0, Ts...>, extract<2, 1, Ts...>> {
  template<typename... Args> tagged_tuple(Args &&...args):
    tt_impl<extract<2, 0, Ts...>, extract<2, 1, Ts...>>(
      std::forward<Args>(args)...) {}
};

struct name {};
struct age {};
struct email {};

tagged_tuple<name, std::string, age, int, email, std::string> get_record() {
  return { "Bob", 32, "bob@bob.bob"};
}

int main() {
  std::cout << "Age: " << get_record().get<age>() << std::endl;
} 
```

您可能希望在现有访问器之上编写`const`和右值访问器。`get`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T09:52:45.297

C++ 没有像;`struct`这样可以迭代的类型。`tuple`这是非此即彼的。

最接近的方法是通过 Boost.Fusion 的[struct adapter](http://www.boost.org/libs/fusion/doc/html/fusion/adapted/adapt_struct.html)。这允许您将结构用作融合序列。当然，这也使用了一系列宏，并且它要求您按照要迭代它们的顺序显式列出结构的成员。在标题中（假设您想在许多翻译单元中迭代结构）。

> 实际上，我的示例实施起来可能有点不切实际。这个怎么样？

您可以实现类似的东西，但这些标识符实际上需要是类型或变量或其他东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-13T03:56:44.620

我有我自己的实现来炫耀，它可以让你不要在文件顶部声明属性。也存在声明属性的版本，但不需要定义它们，声明就足够了。

当然，它是纯 STL，并且不使用预处理器。

例子：

```
#include <named_tuples/tuple.hpp>
#include <string>
#include <iostream>
#include <vector>

namespace {
unsigned constexpr operator "" _h(const char* c,size_t) { return named_tuples::const_hash(c); }
template <unsigned Id> using at = named_tuples::attribute_init_int_placeholder<Id>;
using named_tuples::make_tuple;
}

int main() {
  auto test = make_tuple( 
      at<"nom"_h>() = std::string("Roger")
      , at<"age"_h>() = 47
      , at<"taille"_h>() = 1.92
      , at<"liste"_h>() = std::vector<int>({1,2,3})
      );

  std::cout 
    << test.at<"nom"_h>() << "\n"
    << test.at<"age"_h>() << "\n"
    << test.at<"taille"_h>() << "\n"
    << test.at<"liste"_h>().size() << std::endl;

  test.at<"nom"_h>() = "Marcel";
  ++test.get<1>();

  std::cout 
    << test.get<0>() << "\n"
    << test.get<1>() << "\n"
    << test.get<2>() << "\n"
    << test.get<3>().size() << std::endl;

  return 0;
} 
```

在这里找到完整的源代码[https://github.com/duckie/named_tuple](https://github.com/duckie/named_tuple)。随意阅读，很简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T13:55:48.840

您必须在这里解决的真正问题是：

*   标签是强制性的还是可选的？
*   标签是唯一的吗？它是在编译时强制执行的吗？
*   标签驻留在哪个范围内？您的示例似乎在声明范围内声明了标签，而不是封装在类型中，这可能不是最佳的。

[ecatmur](https://stackoverflow.com/a/13066078/401200)提出了一个很好的解决方案；但是标签没有封装，标签声明有点笨拙。C++14 将引入[按类型寻址的元组](http://en.wikipedia.org/wiki/C++14#Tuple_addressing_via_type)，这将简化他的设计并保证标签的唯一性，但不能解决它们的范围。

[Boost Fusion Map](http://www.boost.org/doc/libs/1_55_0/libs/fusion/doc/html/fusion/container/map.html)也可以用于类似的事情，但同样，声明标签并不理想。

[在c++ Standard Proposal forum](https://groups.google.com/a/isocpp.org/forum/#!msg/std-proposals/N-kIXNrkTUk/s5iXjc7jzT8J)上有一个类似的提案，它可以通过将名称直接关联到模板参数来简化语法。

[此链接](https://bitbucket.org/tlutz/named-variadic-template-proposal)列出了实现此功能的不同方法（包括[ecatmur](https://stackoverflow.com/a/13066078/401200)的解决方案），并为此语法提供了不同的用例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-10T05:45:36.590

这是另一种方法，定义类型有点丑陋，但它有助于防止编译时出错，因为您使用`type_pair`类定义了对（很像`std::map`）。下一步是添加检查以确保您的密钥/名称在编译时是唯一的

用法：

```
 using user_t = tagged_tuple<type_pair<struct name, std::string>, type_pair<struct age, int>>;
  // it's initialized the same way as a tuple created with the value types of the type pairs (so tuple<string, int> in this case)
  user_t user  { "chris", 21 };
  std::cout << "Name: " << get<name>(user) << std::endl;
  std::cout << "Age: " << get<age>(user) << std::endl;
 // you can still access properties via numeric indexes as if the class was defined as tuple<string, int>
  std::cout << "user[0] = " << get<0>(user) << std::endl; 
```

我选择不让 get 成为成员函数，以使其尽可能与 std::tuple 相似，但您可以轻松地将一个添加到类中。 [源代码在这里](https://gist.github.com/ilsken/dd91285d50197d6345f9)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-23T23:36:24.327

[这是使用 brigand 元编程库（ https://github.com/edouarda/brigand](https://github.com/edouarda/brigand) ）的类似于 ecatmur 的答案的实现：

```
#include <iostream>
#include <brigand/brigand.hpp>

template<typename Members>
class TaggedTuple{

    template<typename Type>
    struct createMember{
        using type = typename Type::second_type;
    };

    using DataTuple = brigand::transform<Members, createMember<brigand::_1>>;
    using Keys = brigand::keys_as_sequence<Members, brigand::list>;
    brigand::as_tuple<DataTuple> members;

public:

    template<typename TagType>
    auto& get(){
        using index = brigand::index_of<Keys, TagType>;
        return std::get<index::value>(members);
    }
};

int main(){

    struct FloatTag{};
    struct IntTag{};
    struct DoubleTag{};

    TaggedTuple<brigand::map<
            brigand::pair<FloatTag, float>,
            brigand::pair<IntTag, int>,
            brigand::pair<DoubleTag, double>>> tagged;

    tagged.get<DoubleTag>() = 200;
    auto val = tagged.get<DoubleTag>();
    std::cout << val << std::endl;

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-12T18:00:20.367

我使用 boost 预处理器实现了“c++ named tuple”。请参阅下面的示例用法。通过从元组派生，我可以免费获得比较、打印、散列、序列化（假设它们是为元组定义的）。

```
#include <boost/preprocessor/seq/for_each_i.hpp>
#include <boost/preprocessor/comma_if.hpp>

#define CM_NAMED_TUPLE_ELEMS_ITR(r, xxx, index, x ) BOOST_PP_COMMA_IF(index) BOOST_PP_TUPLE_ELEM(2,0,x) 
#define CM_NAMED_TUPLE_ELEMS(seq) BOOST_PP_SEQ_FOR_EACH_I(CM_NAMED_TUPLE_ELEMS_ITR, "dum", seq)
#define CM_NAMED_TUPLE_PROPS_ITR(r, xxx, index, x) \
      BOOST_PP_TUPLE_ELEM(2,0,x) BOOST_PP_CAT(get_, BOOST_PP_TUPLE_ELEM(2,1,x))() const { return get<index>(*this); } \
      void BOOST_PP_CAT(set_, BOOST_PP_TUPLE_ELEM(2,1,x))(const BOOST_PP_TUPLE_ELEM(2,0,x)& oo) { get<index>(*this) = oo; }
#define CM_NAMED_TUPLE_PROPS(seq) BOOST_PP_SEQ_FOR_EACH_I(CM_NAMED_TUPLE_PROPS_ITR, "dum", seq)
#define cm_named_tuple(Cls, seq) struct Cls : tuple< CM_NAMED_TUPLE_ELEMS(seq)> { \
        typedef tuple<CM_NAMED_TUPLE_ELEMS(seq)> Base;                      \
        Cls() {}                                                            \
        template<class...Args> Cls(Args && ... args) : Base(args...) {}     \
        struct hash : std::hash<CM_NAMED_TUPLE_ELEMS(seq)> {};            \
        CM_NAMED_TUPLE_PROPS(seq)                                           \
        template<class Archive> void serialize(Archive & ar, arg const unsigned int version)() {                                                    \
          ar & boost::serialization::base_object<Base>(*this);                              \
        }                                                                   \
      }

//
// Example:
//
// class Sample {
//   public:
//   void do_tata() {
//     for (auto& dd : bar2_) {
//       cout << dd.get_from() << " " << dd.get_to() << dd.get_tata() << "\n";
//       dd.set_tata(dd.get_tata() * 5);
//     }
//     cout << bar1_ << bar2_ << "\n";
//   }
//
//   cm_named_tuple(Foo, ((int, from))((int, to))((double, tata)));  // Foo == tuple<int,int,double> with named get/set functions
//
//   unordered_set<Foo, Foo::hash> bar1_;
//   vector<Foo> bar2_;  
// }; 
```

请注意，上面的代码示例假设您已经为 vector/tuple/unordered_set 定义了“通用”ostream 打印函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-10T15:30:38.190

我已经“解决”了生产代码中的类似问题。首先，我有一个普通的结构（实际上是一个具有各种成员函数的类，但它只是我们这里感兴趣的数据成员）......

```
class Record
{
    std::string name;
    int age;
    std::string email;
    MYLIB_ENABLE_TUPLE(Record) // macro
}; 
```

然后在结构定义下方，但在任何命名空间之外，我有另一个宏：

```
MYLIB_DECLARE_TUPLE(Record, (o.name, o.age, o.email)) 
```

这种方法的缺点是成员名称必须列出两次，但这是我能想到的最好的方法，同时仍然允许结构自己的成员函数中的传统成员访问语法。宏出现在数据成员本身的定义附近，因此保持它们彼此同步并不难。

在另一个头文件中，我有一个类模板：

```
template <class T>
class TupleConverter; 
```

定义第一个宏是为了将这个模板声明为`friend`结构的一个，因此它可以访问它的私有数据成员：

```
#define MYLIB_ENABLE_TUPLE(TYPE) friend class TupleConverter<TYPE>; 
```

定义第二个宏是为了引入模板的特化：

```
#define MYLIB_DECLARE_TUPLE(TYPE, MEMBERS) \
    template <>                            \
    class TupleConverter<TYPE>             \
    {                                      \
        friend class TYPE;                 \
        static auto toTuple(TYPE& o)       \
            -> decltype(std::tie MEMBERS)  \
        {                                  \
            return std::tie MEMBERS;       \
        }                                  \
    public:                                \
        static auto toTuple(TYPE const& o) \
            -> decltype(std::tie MEMBERS)  \
        {                                  \
            return std::tie MEMBERS;       \
        }                                  \
    }; 
```

这会创建相同成员函数名称的两个重载，一个`TupleConverter<Record>::toTuple(Record const&)`是公共的，`TupleConverter<Record>::toTuple(Record&)`一个是私有的，只能`Record`通过友谊访问。两者都返回他们的参数，通过`std::tie`. 公共 const 重载返回一个对 const 的引用元组，私有非常量重载返回一个对非常量引用的元组。

在预处理器替换之后，两个`friend`声明都引用了在同一个头文件中定义的实体，因此其他代码应该没有机会滥用友谊来破坏封装。

`toTuple`不能是 的成员函数`Record`，因为在 的定义完成之前无法推导出它的返回类型`Record`。

典型用法如下所示：

```
// lexicographical comparison
bool operator< (Record const& a, Record const& b)
{
    return TupleConverter<Record>::toTuple(a) < TupleConverter<Record>::toTuple(b);
}

// serialization
std::ostream& operator<< (std::ostream& os, Record const& r)
{
    // requires template<class... Ts> ostream& operator<<(ostream&, tuple<Ts...>) defined elsewhere
    return os << TupleConverter<Record>::toTuple(r);
} 
```

有很多方法可以扩展它，例如通过添加另一个成员函数，`TupleConverter`其中返回`std::vector<std::string>`数据成员的名称。

如果我被允许使用可变参数宏，那么解决方案可能会更好。

# python - 用于更快处理数据的多进程 Python/Numpy 代码

> ID：13065172
> 
> 赞同：2
> 
> 时间：2012-10-25T09:06:30.123
> 
> 标签：python, numpy, parallel-processing, multiprocessing

我正在阅读数百个 HDF 文件并分别处理每个 HDF 的数据。但是，这会花费大量时间，因为它一次只能处理一个 HDF 文件。我只是偶然发现了[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)，现在我想知道如何使用多处理来加快速度。

到目前为止，我想出了这个：

```
import numpy as np
from multiprocessing import Pool

def myhdf(date):
    ii      = dates.index(date)
    year    = date[0:4]
    month   = date[4:6]
    day     = date[6:8]
    rootdir = 'data/mydata/'
    filename = 'no2track'+year+month+day
    records = read_my_hdf(rootdir,filename)
    if records.size:
        results[ii] = np.mean(records)

dates = ['20080105','20080106','20080107','20080108','20080109']
results = np.zeros(len(dates))

pool = Pool(len(dates))
pool.map(myhdf,dates) 
```

然而，这显然是不正确的。你能按照我的思路去做我想做的事吗？我需要改变什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:38:03.623

尝试[使用 joblib](http://packages.python.org/joblib/)以获得更友好的`multiprocessing`包装器：

```
from joblib import Parallel, delayed

def myhdf(date):
    # do work
    return np.mean(records)

results = Parallel(n_jobs=-1)(delayed(myhdf)(d) for d in dates) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:52:15.313

Pool classes [map](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)函数就像标准的 python 库`map`函数，保证您按照放入它们的顺序返回结果。知道这一点，唯一的另一个技巧是您需要以一致的方式返回结果，然后过滤它们。

```
import numpy as np
from multiprocessing import Pool

def myhdf(date):
    year    = date[0:4]
    month   = date[4:6]
    day     = date[6:8]
    rootdir = 'data/mydata/'
    filename = 'no2track'+year+month+day
    records = read_my_hdf(rootdir,filename)
    if records.size:
        return np.mean(records)

dates = ['20080105','20080106','20080107','20080108','20080109']

pool = Pool(len(dates))
results = pool.map(myhdf,dates)
results = [ result for result in results if result ]
results = np.array(results) 
```

如果你真的想要结果，你可以使用[imap_unordered](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.imap_unordered)

# php - XMPPHP 无法连接到 Prosody

> ID：13065173
> 
> 赞同：-2
> 
> 时间：2012-10-25T09:06:35.003
> 
> 标签：php, xmpp

> **可能重复：**
> [jaxl 无法连接到 Prosody](https://stackoverflow.com/questions/13064858/jaxl-cant-connect-to-prosody)

我可以对其他客户端进行很好的身份验证，包括 SleekXMPP 和 Strophe。

在 Ubuntu 12.04 上使用 Prosody 0.8.2 和最新的 pearhub/cwXMPPHP (0.0.2)。

编码：

```
require 'XMPPHP/BOSH.php';

$conn = new XMPPHP_BOSH('localhost', 5280, 'yang@localhost', 'asdf', 'xmpphp', 'localhost', $printlog=true, $loglevel=XMPPHP_Log::LEVEL_VERBOSE);
$conn->autoSubscribe();

$conn->connect('http://localhost/chat/candy/example/http-bind/'); 
```

来自客户：

```
<body xmlns="http://jabber.org/protocol/httpbind" xmlns:xmpp="urn:xmpp:xbosh" content="text/xml; charset=utf-8" rid="3001" lang="en" hold="1" to="localhost" route="xmpp:localhost:5280" secure="true" xmpp:version="1.6" wait="1" ack="1" xmpp="urn:xmpp:xbosh"/> 
```

从服务器：

```
<body authid='ceb81a64-8fd4-485e-8b55-d848d1cef249' xmpp:version='1.0' xmlns:stream='http://etherx.jabber.org/streams' xmlns:xmpp='urn:xmpp:xbosh' inactivity='60' wait='1' polling='5' secure='true' hold='1' from='localhost' ver='1.6' sid='ceb81a64-8fd4-485e-8b55-d848d1cef249' requests='2' xmlns='http://jabber.org/protocol/httpbind'> 
```

输出：

```
$ php login.php
127.0.0.1 - - [25/Oct/2012:02:02:38 -0700] "POST /chat/candy/example/http-bind/ HTTP/1.1" 200 477 "-" "-"
PHP Warning:  SimpleXMLElement::__construct(): Entity: line 1: parser error : Start tag expected, '<' not found in /usr/share/php/XMPPHP/BOSH.php on line 75
PHP Warning:  SimpleXMLElement::__construct():  in /usr/share/php/XMPPHP/BOSH.php on line 75
PHP Warning:  SimpleXMLElement::__construct(): ^ in /usr/share/php/XMPPHP/BOSH.php on line 75
PHP Fatal error:  Uncaught exception 'Exception' with message 'String could not be parsed as XML' in /usr/share/php/XMPPHP/BOSH.php:75
Stack trace:
#0 /usr/share/php/XMPPHP/BOSH.php(75): SimpleXMLElement->__construct('?????????????R?...')
#1 /home/yang/chat/login.php(39): XMPPHP_BOSH->connect('http://localhos...')
#2 {main}
  thrown in /usr/share/php/XMPPHP/BOSH.php on line 75 
```

韵律服务器日志：

```
$ Oct 25 02:02:38 socket        debug   server.lua: accepted new client connection from 127.0.0.1:41407 to 5280
Oct 25 02:02:38 mod_bosh        debug   BOSH body open (sid: %s)
Oct 25 02:02:38 bosh869caf76-5a90-4d5f-9a75-6bc1dd54a5f5        debug   BOSH session created for request from 127.0.0.1
Oct 25 02:02:38 mod_bosh        info    New BOSH session, assigned it sid '869caf76-5a90-4d5f-9a75-6bc1dd54a5f5'
Oct 25 02:02:38 httpserver      debug   Sending response to c5fa80
Oct 25 02:02:38 httpserver      debug   Destroying request c5fa80
Oct 25 02:02:38 httpserver      debug   Request has destroy callback
Oct 25 02:02:38 socket  debug   server.lua: closed client handler and removed socket from list
Oct 25 02:02:38 mod_bosh        debug   Session 869caf76-5a90-4d5f-9a75-6bc1dd54a5f5 has 0 out of 1 requests open
Oct 25 02:02:38 mod_bosh        debug   and there are 0 things in the send_buffer 
```

有任何想法吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:38:45.543

pearhub 上的那个包已经过时了。请尝试 github 上的任何分叉，[https://github.com/cweiske/xmpphp/network](https://github.com/cweiske/xmpphp/network)

# liquibase - 在 Liquibase 中压缩列

> ID：13065175
> 
> 赞同：0
> 
> 时间：2012-10-25T09:06:38.433
> 
> 标签：liquibase

我希望通过 Liquibase 压缩一列，但我无法在 Liquidbase 网站上找到任何此类示例。

我想知道是否有人有这方面的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:59:52.200

您可以使用该元素将自定义 SQL 语句添加到[Liquibase](http://www.liquibase.org/)更改日志，并使用更改集上的属性来定义它们要运行的数据库。`<sql>``dbms`

```
<changeSet id=".." dbms="oracle">
  <sql>
    alter table foobar move compress;
  </sql>
  <rollback>
   <sql>
     alter table foobar nocompress;
   </sql>
  </rollback>
</changeSet> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-29T12:13:52.940

您可以使用[modifyDataType](http://www.liquibase.org/documentation/changes/modify_data_type.html)

```
<changeSet author="liquibase-docs" id="modifyDataType-example">
    <modifyDataType catalogName="cat"
            columnName="id"
            newDataType="A String"
            schemaName="public"
            tableName="person"/>
</changeSet> 
```

# jquery - Backbone Marionette Composite 视图 onRender 执行两次

> ID：13065176
> 
> 赞同：2
> 
> 时间：2012-10-25T09:06:46.747
> 
> 标签：jquery, backbone.js, requirejs, marionette

我有一个骨干木偶复合视图如下

```
VideosView = Backbone.Marionette.CompositeView.extend({
        template : videosTpl,
        id : "video",
        itemView : VideoView,

        initialize : function() {
                 //fetching the collection 
            var myVideos = new VideoCollection();
            myVideos.fetch();
            this.collection = myVideos;
        },
        appendHtml : function(collectionView, itemView) {
            //appending each videos to the video list
            console.log("appendHtml");
            collectionView.$("ul").append(itemView.el);

        },
        onRender: function(){
            console.log("onRender");

        },
        onShow: function(){
            console.log("onShow");

        }
    }); 
```

控制台中的输出是

> *   渲染
> *   展出
> *   4 附加HTML
> *   渲染

根据骨干木偶的预期代码流是

> *   4 附加HTML
> *   渲染
> *   展出

这是怎么发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:52:18.190

那可能是因为您在初始化函数中获取数据？提取会导致 collection.reset() ，因此您的复合视图将按照文档中的说明重新呈现：

“复合视图的模型和集合将在以下条件下重新呈现自己：

*   当集合的“重置”事件被触发时，它只会重新呈现组合内的集合，而不是包装模板......”

事实上，由于 Javascript 的异步性质，当您分配给您`this.collection`的值时，`myVideos`并不能保证它已经完成了它的工作。`fetch()`

当您调用 VideosView 时，请尝试类似的操作：

```
var myVideos = new VideoCollection();

myVideos.fetch({success:function(){

    var View = new VideosView({collection:myVideos});
}}); 
```

当然，现在您可以取消初始化功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:44:02.483

你用的是什么版本的木偶？在 v1.0.0-beta1 中有一个错误导致此问题：[https ://github.com/marionettejs/backbone.marionette/issues/287](https://github.com/marionettejs/backbone.marionette/issues/287)

它已在 v1.0.0-beta2 中修复（在撰写本文时，最新版本是 v1.0.0-beta3）

# jquery-plugins - jquery-ui-datetimepicker-addon 返回值始终将时间设置为 00:00

> ID：13065180
> 
> 赞同：2
> 
> 时间：2012-10-25T09:06:55.283
> 
> 标签：jquery-plugins, jquery-ui-datepicker, datetimepicker

我正在打电话`$("#from_date").datetimepicker("getDate")`，无论小时/分钟滚动条设置为多少，返回值的时间部分都设置为 0。

我做错了什么/错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:16:52.093

我有同样的问题。我修改了这样的脚本：

```
 //if (date && tp_inst._parseTime($(target).val(), tp_inst.timeOnly))
        try
        {
            date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);
        }
        catch (err)
        {
            window.console && console.log(err)
        } 
```

我没有深入调查，但我认为问题在于，我使用 altField 并且解析的 $(target).val() 是日期而不是时间。我也尝试了时间，但解析器没有处理它。所以我只是将值添加到日期，这对我有用。

# extjs4 - 在 extjs 中将按钮定义为指向新页面的链接

> ID：13065181
> 
> 赞同：2
> 
> 时间：2012-10-25T09:07:11.043
> 
> 标签：extjs4

`enter code here`var text ='填充'; if(value != undefined && value !=''){ text = Ext.Date.format(value,'Ymd'); } 返回''+文本+''

单击“填充”链接时，上面的代码是指向新页面的链接。我需要将“填充”链接作为按钮。如何使用 extjs 将按钮而不是文本定义为链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T14:31:25.820

我为 ExtJS 实现的 LinkBut​​ton。它可以直接用作链接（将'stopEvent'设置为false）或用作按钮（使用订阅'click'事件）

[ExtJs 的链接按钮](https://gist.github.com/Pencroff/6868891)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:59:29.163

使用 JavaScript 的代码很简单：

```
var btnLink = new Ext.Button({
  text: 'Fill',
  handler: function(){
    //you can put here any controls
    window.open("http://your-link-here.com", "_self")
  }
}); 
```

这将作为同一页面上的 href 打开链接，如果您想在新窗口中打开它，您可以尝试 window.open(url) 代替..

# iphone - 通过视频显示信息

> ID：13065183
> 
> 赞同：0
> 
> 时间：2012-10-25T09:07:16.063
> 
> 标签：iphone, ios, video, dynamic

我正在为 iOS（iPhone 和 iPad）构建一个应用程序，用户可以在其中观看治疗练习的视频剪辑。但是，我想在视频播放的“上方”或旁边覆盖一些动态生成的信息（由他们的理疗师分配给他们的代表次数和组数）。重复次数和组数就像一个计数器，计算他们在下一个练习开始之前剩下的工作量。

如果可能的话，这是一个我想实现的模型[带有动态信息叠加的视频](http://imm.io/J7LH)

因此，当视频播放时，“保持”将计数指定的秒数。当达到时间限制时，“Sets”增加 1，Hold 再次从 0 开始。当所有组都完成时，“Reps”增加 1，Hold 和 Reps 从 0 开始。等等。

视频播放和所有这些信息可以同时显示在 iPhone/iPad 上吗？

我查看了许多可能内置此功能的视频托管解决方案，但找不到任何适合我需要的东西。

这有可能吗，因为我以前从未见过这样的事情？

解决方案是否可以使用 iFrame 来显示视频，然后将我想要在屏幕上的所有其他信息与此分开？只是一个想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:09:09.450

是的，这是可能的，看看这个示例项目：

[http://www.musicalgeometry.com/?p=1273](http://www.musicalgeometry.com/?p=1273)

这适用于相机覆盖，但也适用于现有视频。

# c# - 当用户下载我的应用程序时，如何清除此浏览器警告？

> ID：13065184
> 
> 赞同：2
> 
> 时间：2012-10-25T09:07:16.893
> 
> 标签：c#, google-chrome, browser, warnings

我有用户从网站下载的 ac# 应用程序。我将 .exe 和其他一些文件捆绑在一个 zip 文件中。问题是当用户下载我的 zip 文件时，Chrome 浏览器突然开始显示以下警告：

> “flc-app.zip 不常被下载，可能很危险”

这是有人[报告同样的问题](http://code.google.com/p/chromium/issues/detail?id=141853)。

我需要怎么做才能让 Chrome 在用户下载 zip 文件时不发出此警告？我需要签署应用程序吗？我该怎么做？要花多少钱？

在查看此内容时，我想我发现一些以未签名的 zip 格式交付的应用程序并没有导致 Chrome 发出警告。此[pop3 实用程序](http://www.poppeeper.com/)以 exe 而不是 zip 的形式提供。它似乎没有签名，当我下载它时 Chrome 也没有警告它。

我在其他地方看到过使用 Google 的 WebMaster Tools 注册可能会解决问题的建议。这不适用于这种情况，因为该网站已在 Google WebMaster Tools 注册多年。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:12:03.160

最好的资源是[这篇博](http://blogs.msdn.com/b/ieinternals/archive/2011/03/22/authenticode-code-signing-for-developers-for-file-downloads-building-smartscreen-application-reputation.aspx)文和[这篇博](http://blogs.msdn.com/b/ie/archive/2011/03/22/smartscreen-174-application-reputation-building-reputation.aspx)文。

总结一下：

1.  使用验证码签名对您的包进行签名。
2.  不要成为恶意软件（我相信你已经知道了）。
3.  [标记](http://msdn.microsoft.com/en-us/windows/dd203105.aspx)您的软件（如果它不是浏览器插件）。

这可能是一个令人沮丧的过程，所以坚持下去。微软没有透露要建立声誉需要多少下载量，但实际上，一旦您停止更改软件包（哈希是声誉的一部分），您就可以很快克服这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-07T14:15:50.300

我可以通过在我的 Microsoft skydrive 上发布 zip 文件来解决这个问题

[如本指南](http://www.guidepedia.info/2013/07/how-to-get-skydrive-direct-download-link.html?_lbGate=696478)中所述，可以直接链接到天空驱动器文件，要点概述如下。

*   将您的 zip 文件上传到您的 Microsoft skydrive。
*   右键单击文件并选择共享。
*   点击获取链接。
*   选择仅查看选项。
*   现在复制链接并将“redir”替换为“下载”以创建直接链接，如图所示。

[https://skydrive.live.com/redir?resid=xxxxxxxxxx&authkey=!xxxxxxxxxx](https://skydrive.live.com/redir?resid=xxxxxxxxxx&authkey=!xxxxxxxxxx)

[https://skydrive.live.com/download?resid=xxxxxxxxxx&authkey=!xxxxxxxxxx](https://skydrive.live.com/download?resid=xxxxxxxxxx&authkey=!xxxxxxxxxx)

**只要我从https**位置链接到文件，我就可以在 chrome 中下载文件而不会抱怨。

# mysql - 从任一 mysql 表中检索值

> ID：13065191
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:07:36.623
> 
> 标签：mysql, sql

我有表 a 和 b，每个都有一个平均字段。一次仅将数据插入其中一个表中，因此任何一个平均字段都可以在给定时间保持为空。如何检索两个表中任一字段中不为空的值

```
Table a
id  average labref
1   325      123

Table b
id  average labref
2    null    123 
```

如果表 a 是具有平均值的值，我选择该值，如果下一个时间表 b 是具有平均值的 a 并且表一是平均值为空，我选择表 a 的值。他们都使用了相同的 ID，称为 labref！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:09:39.050

```
select average from (
select average from tablea
union
select average from tableb) a

where average is not null 
```

或者

```
select CASE WHEN a.average is null then b.average else a.average end average from tablea a inner join table b 
on a.labref=b.labref 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:12:26.017

```
SELECT 
    IF(a.average IS NULL, b.average, a.average) AS average 
FROM 
    a, b 
where a.id = b.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:36:47.700

尝试：

```
select labref, max(average) from
(select labref, average from a union all 
 select labref, average from b) ab
group by labref 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T09:18:38.260

您能否按以下方式使用 IFNOTNULL() 函数：

```
select IFNOTNULL(average,(select average from b)) from a 
```

我还没有测试过这个，我想不通。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T09:25:24.190

你可以试试这个

```
select average from a, b where a.average IS NOT NULL and b.average IS NOT NULL 
```

我不确定是否使用`IS NOT NULL`两次。

# java - Selenium 2 (WebDriver) 的配置，使用 IE 并使用 WebDriver 上传文件

> ID：13065192
> 
> 赞同：1
> 
> 时间：2012-10-25T09:07:47.160
> 
> 标签：java, internet-explorer, file-upload, selenium, selenium-webdriver

如何配置 Selenium WebDriver？我有使用 Selenium 和 Java 的自动化测试用例。现在我需要使用 WebDriver 自动上传和下载文件。我添加了 webdriver-common-0.9.7376.jar。我喜欢使用 Internet Explorer。我怎样才能做到这一点？

我只是声明变量并使用驱动程序

```
private static WebDriver driver;
driver.findElement(By.id(upload)).sendKeys("file to be upload"); 
```

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:05:26.520

问。1：如何配置WebDriver？

Ans：有两种方法：1）仅添加“selenium-server-standalone-2.29.0.jar”

或者，2) 添加“selenium-java-2.29.0.jar”和位于“selenium-java-2.29.0\selenium-2.29.0\libs”文件夹中的所有 jars

[您可以从http://code.google.com/p/selenium/downloads/detail?name=selenium-server](http://code.google.com/p/selenium/downloads/detail?name=selenium-server-2.29.0.zip)下载“selenium-server-2.29.0.zip”和“selenium-java-2.29.0.zip” [-2.29.0.zip](http://code.google.com/p/selenium/downloads/detail?name=selenium-server-2.29.0.zip)和[http://code.google.com/p/selenium/downloads/detail?name=selenium-java-2.29.0.zip](http://code.google.com/p/selenium/downloads/detail?name=selenium-java-2.29.0.zip)分别。提取它们，你可以得到相应的jar文件来添加。

问。2：如何实例化IE，如何上传文件？

答：java代码如下：

```
File file = new File("C:\\Program Files\\Internet Explorer\\iexplore.exe");
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
WebDriver driver = new InternetExplorerDriver();
driver.findElement(By.id("upload")).sendKeys("file to be upload"); 
```

如果“文件文件 = 新文件（“C:\Program Files\Internet Explorer\iexplore.exe”）；” 不起作用下载“IEDriverServer”并将该行替换为以下内容：

```
File file = new File("E:\\Ripon\\IEDriverServer_Win32_2.29.1\\IEDriverServer.exe"); 
```

[[注意：您可以从http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)下载“IEDriverServer” ]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:19:39.520

下载 selenium-java 2.25 0r 任何版本后，您需要添加所有 jar。首先添加所有 jar，然后添加所有所有 lib 文件夹 jar。

*   selenium-java-2.25.0.jar
*   selenium-java-2.25.0-srcs.jar 然后是所有 lib jar（不要忘记添加所有 lib 文件夹 jar）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:02:31.393

如果没有为您的浏览器实例化驱动程序，它将不会打开浏览器窗口进行上传/下载操作。如果您使用的是 IE，则必须编写`driver = new InternetExplorerDriver();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:14:38.803

`webdriver-common`您可能需要`selenium-java`来自[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)的最新包，而不是旧的和过时的包。

如果您还需要在本地运行 Selenium RC，或 Remote WebDriver ot Selenium Grid，您将需要`selenium-server`那里的软件包（如果您还不知道这些是什么，只需使用`selenium-java`）。

在这两种情况下，对于 running `InternetExplorerDriver`，您还需要`IEDriverServer`上述页面中的 。使用 32 位还是 64 位版本取决于您。

* * *

[您可以在文档](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)中找到设置它的示例。如果您仔细研究一下，您会在该文档中找到更多有用的信息。

例如，对于 Internet Explorer，您将执行以下操作：

```
System.setProperty("webdriver.ie.driver", "C:\\path\\to\\IEDriverServer.exe");
WebDriver driver = new InternetExplorerDriver();

// your testing code

driver.quit(); 
```

* * *

您上传文件的方法是正确的。

截至目前（Selenium v​​2.29.0），您无法通过任何 WebDriver 下载文件。如果你真的想这样做，你将不得不[另寻出路](https://stackoverflow.com/search?q=webdriver+download+file)。

# iphone - 在 Xcode 中调试时如何打印常量/宏的值？

> ID：13065193
> 
> 赞同：2
> 
> 时间：2012-10-25T09:07:50.713
> 
> 标签：iphone, ios, xcode, ipad

在调试 iOS 应用程序时，我知道如何使用以下方法打印对象的值：

**打印**“变量名”

**po** "变量名"

**p** “整数变量”

我想知道在 Xcode 中调试时如何打印常量的值？有没有打印常量值的命令？因为，如果我使用上述命令，Xcode 会返回一个错误说

`error: use of undeclared identifier`

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T11:10:58.527

宏（当你#define 某些东西时你得到的）是语言预处理器的领域。它们被扩展，并且在编译代码时使用扩展的值。

调试器不会解析您的源文件，它会根据二进制文件中的内容工作。所以不，您将无法在调试器中查看#define 宏的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T21:16:12.700

老问题，但现在使用[`-g3`](https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)(GCC) 或[`-fdebug-macro`](https://clang.llvm.org/docs/UsersManual.html#cmdoption-fdebug-macro)(Clang) 编译将为此类预处理器宏生成调试信息。

# c - 在c中显示带有中文区域设置的特殊字符

> ID：13065194
> 
> 赞同：2
> 
> 时间：2012-10-25T09:07:55.443
> 
> 标签：c, encoding, gb2312

我需要调整现有的非 unicode c 项目来显示汉字。由于截止日期很短，而且我是 C 和编码的新手，为了支持在 gui 应用程序中显示中文文本，我已经将系统语言环境更改为简体中文 PRC 的路线。这反过来又将项目中的编码（在 Visual Studio 2010 中）更改为简体中文（GB2312）。

除了特殊字符（例如：度数符号、上标 2 等）显示为问号外，一切正常。我相信这是因为我们过去传递 \260 即 ascii 表中度数符号的八进制值，这不再等同于 gb2312 表中的任何内容。 

在键盘中显示度数符号的工作流程如下： 

显示函数（数据，'\260'）；//将度数符号的八进制值传递到键盘 

此 display_function 用于将整数输入转换为字符串以在键盘上显示： 

数据->[ pos ] = (char) ch; 

基本上我需要让这个（和其他特殊字符）正确显示。有没有办法使用当前设置传递这个符号？ 

根据 gb23212 的字符列表，该符号是受支持的，因此我目前的想法是计算出该符号的八进制值并保持现有函数不变。这些当前将值作为字符传递。使用下表： 

[http://ash.jp/code/cn/gb2312tbl.htm](http://ash.jp/code/cn/gb2312tbl.htm)。 

和下面的公式来获得八进制值： 

与行关联的八进制数乘以 10 并添加到与列关联的八进制数。 

我相信这会是`A1E0 x 10 + 3 = 414403.` 

但是，当我尝试将其传递给 display_function 时，我得到“错误 C2022：'268'：对于字符来说太大了”。

我要解决这个问题了吗？我不想更改现有函数，因为它们已广泛使用，但我是否需要更改函数以使用宽字符？ 

如果以上内容令人费解并且充满了不正确的假设，我们深表歉意！一两个星期以来，我一直在努力解决这个问题，而编码、字符集和语言环境似乎变得越来越混乱！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:39:07.460

如果当前函数仅支持 8 位字符，并且您需要使用它们来显示 16 位字符，那么您的猜测可能是正确的 - 您可能必须更改函数以使用“wchar”之类的东西而不是“char”。

如果这些功能在其他项目中使用，也可以将它们复制为其他名称以提供其他用户的兼容性。

但是如果它只是一个项目，那么也许你会想要检查在项目的几乎所有地方用“wchar”替换“char”的可能性。

# objective-c - 缩短的问号冒号 ?: 是一种 Objective-C 语法吗？

> ID：13065196
> 
> 赞同：24
> 
> 时间：2012-10-25T09:08:07.330
> 
> 标签：objective-c

Xcode 没有给出我的*（可能的）*错字错误：

```
 NSString *theme = [[NSUserDefaults standardUserDefaults] objectForKey:@"theme"];
 NSLog(@"Theme: %@", theme ?: @"Default"); 
```

事实证明：

```
 NSLog(@"Theme: %@", theme ?: @"Default"); 
```

工作方式相同：

```
 NSLog(@"Theme: %@", theme ? theme : @"Default"); 
```

上面的缩短语法只对[gcc 有用](http://en.wikipedia.org/wiki/%3f%3a#C)吗？或者它是Objective-C的一部分？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T09:13:50.590

它是 C 中条件表达式的 GNU 扩展：

从[这里](http://en.wikipedia.org/wiki/%3F%3A#C)：

> C 的 GNU 扩展允许省略第二个操作数，并隐式使用第一个操作数作为第二个操作数：

```
a = x ? : y; 
```

# objective-c - 使用一个 ActivityIndi cator 和两个类

> ID：13065198
> 
> 赞同：0
> 
> 时间：2012-10-25T09:08:10.810
> 
> 标签：objective-c, ios, objective-c-blocks, uiactivityindicatorview

我有一个`UIActivityIndicator`在我所有视图的顶部开始动画。在他开始动画之后，这个当前视图的父视图被弹出。现在，在他制作动画之后，我正在调用另一个带有块的类并运行一些服务器命令。

我的问题是，在另一个班级我从服务器得到响应，但我不能告诉 `UIActivityIndicator`停止，因为他在另一个班级。（我不得不说我不想在 Application Delegate 上实现任何东西）。

在服务器类上，我得到响应后，`UIAlertView`出现了一个，但是`UIAlertView`在服务器类内部实现了。那就是我想要`UIActivityIndicator`停止的地方。

我希望我能很好地理解它，如果没有，请告诉我。

谢谢你。

```
- (void)buttonPressed:(id)sender
{
    UIView * darkView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
    darkView.backgroundColor = [UIColor blackColor];
    darkView.alpha = 0.5f;

    UIActivityIndicatorView * activityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [darkView addSubview:activityIndicator];
    activityIndicator.center = darkView.center;

    [activityIndicator startAnimating];
    [[UIApplication sharedApplication].keyWindow addSubview:darkView];

    // Inside this class (ShareByEmail) there is a UIAlertView that should stop the 
    // animation that already running right now.
    ShareByEmail *sbe = [[ShareByEmail alloc]init];
    [sbe share];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:12:14.270

一种选择是保留`UIActivityIndicator`作为单例对象并在项目中的任何位置使用它。另一种选择是尝试使用`notifications`. 您需要为此活动指示器添加和删除观察者，并且每当触发/执行请求时，您需要发布通知以启动/停止活动指示器。

**更新：**

在您的情况下，您可以在为活动指示器分配内存后立即`[[NSNotificationCenter defaultCenter] addObserver:activityIndicator selector:@selector(startAnimating) name:@"startActivityIndicator" object:nil]`将其设置为。`[[NSNotificationCenter defaultCenter] addObserver:activityIndicator selector:@selector(stopAnimating) name:@"stopActivityIndicator" object:nil]`现在，当您想要启动或停止它时，请调用`[[NSNotificationCenter defaultCenter] postNotificationName:@"startActivityIndicator" object:nil]`或`[[NSNotificationCenter defaultCenter] postNotificationName:@"stopActivityIndicator" object:nil]`。确保未释放活动指示器。我建议您将活动指示器声明为此类中的类级别变量，并在 init 方法左右分配内存。在您的按钮按下方法中，您可以使用`[darkView addSubview:activityIndicator];`

# ios - 将视图另存为原始大小的图像

> ID：13065201
> 
> 赞同：0
> 
> 时间：2012-10-25T09:08:18.390
> 
> 标签：ios, uiscrollview, uiimage, save, contentsize

有很多关于如何将视图保存为图像的主题。他们都给出了相同的答案：

```
CGRect rect = [myView bounds];
UIGraphicsBeginImageContextWithOptions(rect.size,YES,[[UIScreen mainScreen] scale]);
CGContextRef context = UIGraphicsGetCurrentContext();
[myView.layer renderInContext:context];   
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我的问题是我有一个包含多个包含图像的连接 imageViews 的视图。我想将该“持有人”视图保存为与其中的图像大小相对应的大小。因此，如果我并排有 2 张 400x400 的图像，我想保存 400x800 的图像，无论它们是否显示，比如说 30x60。

另外，上面的代码只捕获屏幕上的内容，而忽略了其余部分。例如，如果我想获得具有内容大小的整个滚动视图，这是不可能的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:38:50.880

如果您想获取 UIScrollView 的整个 contentSize 的图像，请查看[this](https://stackoverflow.com/a/3539944/251513)。

# android - Android相当于IOS的networkActivityIndi catorVisible？

> ID：13065202
> 
> 赞同：6
> 
> 时间：2012-10-25T09:08:21.620
> 
> 标签：android, ios, android-notification-bar

如何在 Android 的状态栏上显示网络指示器？`networkActivityIndicatorVisible`Android中的IOS相当于什么？或者如果没有，我如何在 Android 中创建类似的网络指示器？

# spring - Spring MVC 组件扫描问题

> ID：13065205
> 
> 赞同：0
> 
> 时间：2012-10-25T09:08:32.843
> 
> 标签：spring, spring-mvc

我正在使用组件扫描来扫描所有 Controller、Service 和 DAO 类。如果我将我的服务和 DAO 接口与实现者放在同一个包中，这会导致组件扫描过程变慢（会慢两倍）吗？它是否也扫描子包？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:16:35.970

是的，它会更慢。但是，在设计封装布局时，您不应将此视为一个因素。让架构驱动类的放置，而不是一些任意的框架要求和特性。

*如果您的应用程序非常*庞大并且您想减少引导时间，您也可以过滤掉一些类/模式（请参阅[*4.10.3 使用过滤器自定义扫描*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-scanning-filters)）：

```
<context:component-scan base-package="org.example">
  <context:include-filter type="regex" expression=".*Stub.*Repository"/>
  <context:exclude-filter type="annotation"
                          expression="org.springframework.stereotype.Repository"/>
</context:component-scan> 
```

是的，它确实扫描子包。

# linux - Linux内核header.S源，为什么在清零BSS时需要_end+3？

> ID：13065207
> 
> 赞同：7
> 
> 时间：2012-10-25T09:08:36.173
> 
> 标签：linux, assembly, linux-kernel, x86, bootloader

在 Linux 源代码树中，文件[arch/x86/boot/header.S](http://lxr.free-electrons.com/source/arch/x86/boot/header.S?v=3.19)具有与此类似的 x86 代码，用于在调用之前清除*BSS部分：*`main`

```
...
# Zero the bss
    movw    $__bss_start, %di
    movw    $_end+3, %cx
    xorl    %eax, %eax
    subw    %di, %cx
    shrw    $2, %cx
    rep; stosl
... 
```

为什么`_end`地址加了3？为什么不`movw $_end, %cx`代替`movw $_end+3, %cx`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-26T04:41:01.230

如果代码逐字节清除*BSS*`movw $_end, %cx`部分就足够了。但是，此代码不会使用他们使用STOSL 的*STOSB将**BSS**归零*。一次存储 32 位通常比 8 位更有效。

 **[*STOSL*](http://www.felixcloutier.com/x86/STOS:STOSB:STOSW:STOSD:STOSQ.html)将存储*EAX*（使用 设置为零*）足够的时间以将BSS*`xorl %eax, %eax`的整个范围清除为 0。+3 确保如果*BSS*部分的长度（$_end-$__bss_start）不能被 4 整除，计算需要清除的*DWORD*的数量将被四舍五入。如果没有发生这种向上取整，那么在大小不能被 4 整除的情况下，最后一个字节可能不会被清除。

 ***此处进行的计算假设`__bss_start`是指向 BSS 段开头的指针，并且是指向*BSS*`_end`结尾的指针。计算要清除的 32 位*DWORD数量的等式实际上是：*

 **```
NUMDWORDS=(_end+3-__bss_start) >> 2 
```

（在计算`shrw $2, %cx`中`>>2`）是整数除以 4，结果总是向下舍入。我们将 +3 添加到字节数，以便在除以 4 时有效地向上舍入到最接近的*DWORD*数。然后将该值用作*DWORD*的数量*STOSL*将设置为零。*******

# c# - 获取特定于登录用户的数据

> ID：13065208
> 
> 赞同：1
> 
> 时间：2012-10-25T09:08:42.540
> 
> 标签：c#, razor, webmatrix

我需要列出登录用户的活动线索，并允许分页和可选择排序，由于布局要求，我不能使用网格。

过去 2 天我一直在网上搜索，但找不到任何可行的解决方案

任何帮助或方向将不胜感激。

```
var query = db.Query("SELECT a.listingId, a.datetime, c.details, c.buycommercial, c.buyindustrial, c.buyretail, c.buyland, c.tencommercial, c.tenindustrial, c.tenretail, c.tenland, c.investor, c.developer, d.companyname, d.firstname, d.lastname, d.tel, d.cell, d.email FROM dbo.tblactivebroker a JOIN dbo.tblActiveListing b ON a.ListingId = b.ListingId JOIN dbo.tblListings c ON b.ListingId = c.ListingId JOIN dbo.tblContact d ON c.crmid = d.id WHERE b.active = 'True' AND a.ActiveBrokerID = @0",brokerid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:57:42.260

如果您正在谈论扩展查询，则可以使用 string.Format。

例子：

```
var query = db.Query(string.Format("SELECT a.listingId, a.datetime, c.details, c.buycommercial, c.buyindustrial, c.buyretail, c.buyland, c.tencommercial, c.tenindustrial, c.tenretail, c.tenland, c.investor, c.developer, d.companyname, d.firstname, d.lastname, d.tel, d.cell, d.email FROM dbo.tblactivebroker a JOIN dbo.tblActiveListing b ON a.ListingId = b.ListingId JOIN dbo.tblListings c ON b.ListingId = c.ListingId JOIN dbo.tblContact d ON c.crmid = d.id WHERE b.active = 'True' AND a.ActiveBrokerID = {0} AND a.listingId = {1} ORDER BY a.ActiveBrokerID", brokerId, listingId)) 
```

但是，现在是 2012 年，更好的方法是使用[LINQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)和[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)。

# midi - MIDI 文件中的序列号。它是如何工作的？

> ID：13065209
> 
> 赞同：3
> 
> 时间：2012-10-25T09:08:50.643
> 
> 标签：midi

我已经在谷歌上搜索了一段时间，但我发现的所有信息都有点模棱两可。我不是midi专家，我只对midi文件感兴趣。我需要知道这个元事件的用途，以及它如何影响多轨 MIDI 文件（格式 1）的播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:13:43.337

对于类型 1 和类型 2 MIDI 文件，序列号表示给定轨道的事件将跟随此事件。如果您只对解析类型 1 文件感兴趣，这基本上表明实际 MIDI 事件的开始。但是，类型 2 文件可能有多个轨道，每个轨道都以序列元事件开头。

有关更多信息，请参阅：[http ://home.roadrunner.com/~jgglatt/tech/midifile/seq.htm](http://home.roadrunner.com/~jgglatt/tech/midifile/seq.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T22:18:04.130

我的理解是序列号只是可用于识别歌曲的附加信息。我认为它是序列名称的数字替代或补充。

想象一个鼓盒，它可以将其鼓模式保存或加载到单个 MIDI 文件中（或者可能保存到单个 Format 2 MIDI 文件中的单个轨道中）。或者想象一个可以将其伴奏模式保存或加载到单独的 MIDI 文件中的电子键盘。在这样的场景中，我想序列号可用于指示 MIDI 文件（或格式 2 轨道）对应的模式号或伴奏号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T00:31:05.797

“序列号”是 MIDI 文件中的一个错误概念，从未明确实现过。对于类型 0 或类型 1 的单个文件，它没有任何意义。这是一个无操作。

对于类型 2 的文件，或类型 0 或类型 1 文件的集合，它旨在按顺序识别单独的序列，就像一种播放列表。然后玩家可以按数字选择一个序列。

如果未指定序列号，则按顺序分配，尽管对于单个文件，这几乎只对类型 2 重要。

实际上，据我所知，序列号从未真正被使用过。也许在游戏等嵌入式应用程序中......

# llvm - 在 LLVM pass 中找不到函数原型

> ID：13065210
> 
> 赞同：0
> 
> 时间：2012-10-25T09:08:52.820
> 
> 标签：llvm

在 LLVM Pass 中，当我想添加使用头文件中的函数的新代码时。
由于源代码中未使用该函数，因此它的原型被 clang 删除。所以我的 pass 尝试从模块中查找函数定义，它返回。
如何在代码生成中使用这样的功能？
我正在使用 LLVM-3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:58:39.247

好吧，您可以添加一个调用原型的存根函数，这样它就不会被删除。在这种情况下，您的通行证需要删除此存根函数。

另一种方式 - 只需使用 C++ API 构建原型的定义。当然，只有在你的原型没有改变的情况下才有可能。

# opengl-es - 带有opengl覆盖的MONODROID相机预览

> ID：13065212
> 
> 赞同：0
> 
> 时间：2012-10-25T09:09:01.880
> 
> 标签：opengl-es, xamarin.android, android-camera

我使用 Monodroid 创建了一个增强现实应用程序，它在技术基础上运行良好。但是，我使用的图形是在画布上绘制的，速度真的太慢了​​。

该应用程序是一个简单的平视罗盘和速度显示 a-la luke-skywalkers 双筒望远镜。

我正在尝试使用 openGL 半透明/透明覆盖进行相机预览，是的，我已经阅读了可用的内容，但它都是纯 Android SDK / Java。

有谁知道在 C# 和 Monodroid 中可能使用 AndroidGameView 获得这种效果的方法？无论我做什么，我都可以看到其中一个，但不能同时看到两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:16:54.650

与无益的混蛋一起工作很愉快。 [http://bobpowelldotnet.blogspot.fr/2012/10/monodroid-camera-preview-as-opengl.html](http://bobpowelldotnet.blogspot.fr/2012/10/monodroid-camera-preview-as-opengl.html)

# php - PHP 在搜索短语周围获得 10 个单词

> ID：13065215
> 
> 赞同：0
> 
> 时间：2012-10-25T09:09:11.150
> 
> 标签：php, regex, search

我正在尝试执行以下操作：

从文本块（当我说单词时，我的意思是单词或文本块中的数字）

例如

文本块：“欢迎使用 Stack Overflow！访问您的用户页面以设置您的姓名和电子邮件。”

如果您要搜索“访问您的”，它将返回：“欢迎来到 Stack Overflow！访问您的用户页面以设置您的”

我试过用这个

```
$preg_safe = str_replace(" ", "\s", preg_quote($search)); 
$pattern = "/(\w*\S\s+){0,8}\S*\b($preg_safe)\b\S*(\s\S+){0,8}/ix";
if(preg_match_all($pattern, $full_text, $matches))
{ 
    $result = str_replace(strtolower($search), "<span class='searched-for'>$search</span>", strtolower($matches[0][0])); 
}
else
{ 
    $result = false; 
} 
```

如果搜索短语是英文的，它就可以工作，但我也需要它以其他语言工作。例如，它不适用于希伯来语搜索短语。

我试图将模式更改为：

```
$pattern = "(*UTF8)/(\w*\S\s+){0,8}\S*\b($preg_safe)\b\S*(\s\S+){0,8}/i"; 
```

但它没有用。

我怎样才能使它适用于其他语言？

////////////////// 编辑 //////////

正如 enrico.bacis 建议的那样 - 我已将模式更改为：

```
$pattern = "/(\w\p{Hebrew}*\S\s+){0,20}\S*\b($preg_safe)\b\S*(\s\S+){0,20}/ixu"; 
```

现在它适用于英语和希伯来语搜索短语，但是当有特殊字符（例如'）时，结果文本会被剪切。

如何使模式返回搜索短语周围的文本，即使它包含特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:19:08.350

您的问题在于`\w`与希伯来字符不匹配，实际上`\w`只是所谓“单词”字符的快捷方式：`[A-Za-z0-9_]`.

要使正则表达式也能够捕获希伯来语字符，您只需进行两项更改：

*   添加`u`到修饰符以管理 UTF8 字符（因此您的修饰符将是`/ixu`）

*   替换模式`[\w\p{Hebrew}]`中的每一次出现`\w`。

您也可以[在此处](https://stackoverflow.com/questions/6796333/hebrew-regex-match-not-working-in-php)查看有关此主题的更多答案。

# postgresql - 获取修改列名的触发过程

> ID：13065220
> 
> 赞同：2
> 
> 时间：2012-10-25T09:09:26.987
> 
> 标签：postgresql

我一直在寻找一种方法来在触发器函数中的 INSERT 期间获取任何已修改列的名称。我可以使用触发器过程 TG_TABLE_NAME 修改表，修改后的列有什么类似的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:28:06.687

不，列名没有等价物`TG_TABLE_NAME`。您需要比较触发器中的`old`和`new`记录。`UPDATE`

对于`INSERT`触发器，“修改”列名的想法甚至没有任何意义。您是指不是默认值的列吗？

无论如何，您需要检查`NEW`and （如果适用）`OLD`记录。动态地执行此操作可能会很棘手。该`hstore`扩展通常是最有用的工具，因为它允许您在未知行集的列之间进行比较和迭代。

# wix - 具有权限的自定义操作

> ID：13065223
> 
> 赞同：0
> 
> 时间：2012-10-25T09:09:31.197
> 
> 标签：wix

您好我已经使用 WIX 创建了一个 MSI 安装程序。我的自定义操作有问题。我有一个填充文本框的自定义操作，它似乎只在我从命令提示符运行 MSI 并以管理员身份运行 cmd 时才起作用。是否存在连接以及如何使用特权运行我的自定义操作。我的自定义操作在单击按钮时立即运行。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:57:23.753

填写文本框不需要任何权限，因此根据您提供的信息，这不应该发生。很有可能它确实需要提升，比如为了获取它放入框中的文本，这就是它出现问题的原因。仅当从提升的上下文启动 .msi 时，才会提升 UI 序列。即使 .msi 不是，也可以提升延迟序列，但这对您的 UI 没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:30:39.717

以下是有关该主题的一些必读内容：

[Windows Installer 中自定义操作的安装阶段和脚本内执行选项](http://www.installsite.org/pages/en/isnews/200108/index.htm)

我读了几遍才明白。基本上，您需要在 InstallInitialize 和 InstallFinalize 之间对自定义操作进行排序，并将其安排为[Deferred](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368268%28v=vs.85%29.aspx) with No Impersonation。如果您需要访问 MSI 会话，您可能还需要为立即安排自定义操作。你

# java - 在jqgrid中为一条记录显示多行

> ID：13065225
> 
> 赞同：1
> 
> 时间：2012-10-25T09:09:33.960
> 
> 标签：java, jquery

嗨，我想在 jqgrid 中显示单个记录的多行。例如，如果一个网格有 10 列，如 c1,c2,c3...c10 和值如 va1,va2,va3....,va10 和 vb1,vb2,vb3....,vb10 等。它应该显示为，

---------------------- ->标题

## |c1|c2|c3|c4|c5|

## |c6|c7|c8|c9|c10|

---------------------- ->值1

## |va1|va2|va3|va4|va5|

## |va6|va7|va8|va9|va10|

---------------------- ->值2

## |vb1|vb2|vb3|vb4|vb5|

## |vb6|vb7|vb8|vb9|vb10|

* * *

. ->值3。.

请帮我

谢谢，杰

# c - 文件大小总是在变化，使用 C 和 fopen_s 函数

> ID：13065226
> 
> 赞同：0
> 
> 时间：2012-10-25T09:09:37.263
> 
> 标签：c, file, filesize, fseek

我写了这个基本功能：

```
int save_files(PCHAR fileName)
 {
     errno_t         err;
     FILE*           pFile    =    NULL;

do
{
    if (!fileName)
    {
        printf("Input is NULL \n");
        break;
    }

    err = fopen_s( &pFile, fileName, "r");
    if(0 != err)
    {
        printf("The file %s was not opened for reading\n", fileName);
    }
    else
    {
       printf("The file %s was opened for reading \n", fileName);
    }

    /*getting the fileSize */
    fileSize    =   dbg_getFileSize(pFile);
    printf("############# FILE SIZE IS :  %d #############\n" );
 } 
```

这是获取文件大小的函数：

```
UINT32 dbg_getFileSize(FILE *file)
 {
        UINT32  size = 0 ;

         if (file == NULL)
            {

            return -1;
             }

         fseek(file , 0L , SEEK_END);
         size = ftell(file);
         fseek(file, 0L, SEEK_SET);/*set it to the head!!! */

         return size;

     } 
```

我一直打开相同的路径，每次尝试用“r”和“rb”打开它时都会得到不同的大小，但仍然得到相同的不同数字..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:13:41.150

由于以下行，您会获得不同的文件大小：

```
printf("############# FILE SIZE IS :  %d #############\n" ); 
```

实际上并没有指定您要打印的变量。因此，当你调用它时，它可能会得到堆栈上的任何垃圾（我说可能，但鉴于你调用了可怕的“未定义行为” ^((a) ，)*任何事情都*可能发生）。

你可能想试试这个：

```
printf("############# FILE SIZE IS :  %d #############\n", fileSize ); 
```

* * *

^((a))从`C99 7.19.6.1 The fprintf function`，在 中不变`C11 7.20.6.1`，等效部分：

> fprintf 函数将输出写入 stream 指向的流，在 format 指向的字符串的控制下，该字符串指定后续参数如何转换为输出。**如果格式的参数不足，则行为未定义。**如果格式已用尽而参数仍然存在，则评估多余的参数（一如既往），否则将被忽略。当遇到格式字符串的结尾时，fprintf 函数返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:13:51.490

您忘记将 fileSize 添加到您的 printf 中，而是从堆栈或寄存器中打印随机信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:18:47.820

正如 paxdiablo 指出的那样，您没有使用变量名。因此， printf 将采用堆栈上的值并尝试打印它 - 这是一个未定义的行为。

**Undefined behavior** The results are undefined if there are insufficient arguments for the format. If the format is exhausted while arguments remain, the excess arguments are evaluated but are otherwise ignored.
See [http://cims.nyu.edu/cgi-systems/man.cgi?section=3C&topic=printf](http://cims.nyu.edu/cgi-systems/man.cgi?section=3C&topic=printf)

# php - 为什么是 $M-; 语法上有效，它有什么作用？

> ID：13065232
> 
> 赞同：11
> 
> 时间：2012-10-25T09:10:09.437
> 
> 标签：php

我不认为自己是 PHP 专家，但我已经设计了几个页面，现在每个页面都包含几千行代码。对于我当前用于游戏网站的项目，我撤回了包含该行的现有函数

```
$M–; 
```

现在我对 PHP 的基本理解告诉我这不起作用，因为它应该是 - 简称 -1。但这不是破折号，脚本运行没有错误（`error_reporting (E_ALL)`）但`$M`前后回显给了我相同的值。

那么它有什么作用，为什么我没有收到错误消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:16:07.267

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:14:21.850

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T09:12:04.397

看起来它可能`$M - null;`基本上将其解释为 $M 减去零。哪个不会做？

# android - android自定义列表视图

> ID：13065233
> 
> 赞同：0
> 
> 时间：2012-10-25T09:10:20.107
> 
> 标签：android, listview

我有一个关于android的问题。我不是安卓专家。我想在列表中显示员工表数据（列表视图或网格任何东西）。不像表格视图，列表如下所示。我认为为此我需要自定义列表视图？是否可以有一个列表视图/网格视图来自定义如下？请指教。或者任何已经可用的开源代码？

```
 [Reviewer Name (Editable)]       
               Employee Lest           
---------------------------------------
Employee1                    [Click Me]

Male (0)          Female ( )
Salary : [5999 (editable)]
Qualification
[X]BA
[ ]BSc
[ ]Matriculation
[ ]Other
[Submit Button]
---------------------------------------
Employee2                    [Click Me]

Male (0)          Female ( )
Salary : [5999 (editable)]
Qualification
[X]BA
[ ]BSc
[ ]Matriculation
[ ]Other
[Submit Button]
---------------------------------------
Employee3                    [Click Me]

Male (0)          Female ( )
Salary : [5999 (editable)]
Qualification
[X]BA
[ ]BSc
[ ]Matriculation
[ ]Other
[Submit Button]
--------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:13:31.070

是的，您需要实现一个自定义适配器，它会扩展自定义布局。实现自定义适配器（通过扩展`BaseAdapter`类或`ArrayAdapter<Employee>`类）查看本教程：[http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:16:40.820

自定义列表视图将为您完成这项工作。
[这](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)是一个非常适合您的案例的教程。
您的自定义列表视图的布局应该是这样的：

```
---------------------------------------
TextView                    Button

RadioGroup
TextView  EditText
TextView
CheckBox TextView
CheckBox TextView
CheckBox TextView
CheckBox TextView
Button
--------------------------------------- 
```

# activemq - 删除 ActiveMq 集群中的队列？

> ID：13065240
> 
> 赞同：1
> 
> 时间：2012-10-25T09:10:40.887
> 
> 标签：activemq

我使用JDBC Master Slave配置了一个activemq集群，我的要求是当我使用队列时我应该删除它，如果你知道代理jmxserviceurl，使用jmx可以删除一个队列，但是在集群中，我不知道哪个代理队列创建上，那么还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:01:53.143

您为什么不“垃圾收集”它们，而不必担心未使用的队列会在集群中混乱？

[http://activemq.apache.org/delete-inactive-destinations.html](http://activemq.apache.org/delete-inactive-destinations.html)

# c# - 如何在c#中获取单元格ID

> ID：13065241
> 
> 赞同：0
> 
> 时间：2012-10-25T09:10:39.670
> 
> 标签：c#, asp.net, web

**C＃**

```
 for(int k = 0; k < tableAppointment.Rows[0].Cells.Count; k++)
            {
                cellID = tableAppointment.Rows[0].Cells[k];
    } 
```

**aspx**

```
<table id="tableAppointment" runat="server">
        <tr Class="csstextheader">
            <td class="csstextheader" width="70px">
                                        </td>
            <td class="csstextheader" width="70px">
                                            <b>Time Slot&nbsp;</b>
                                        </td>
            <td ID="9"><span>C</span></td>

        </tr>
</table> 
```

如何获取单元格 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:25:16.847

试试这个

```
 for(int k = 0; k < tableAppointment.Rows[0].Cells.Count; k++)
 {
     var currentCell = tableAppointment.Rows[0].Cells[k];
     string ID = currentCell.Attributes["ID"]; //for this, k must be count-1, the last cell
 } 
```

确定具有 ID 的单元格，例如最后一个单元格`tableAppointment.Rows[0].Cells[2] or tableAppointment.Rows[0].Cells[Count-1]`

# eclipse - 使用 Maven、EJB 和 Eclipse

> ID：13065242
> 
> 赞同：1
> 
> 时间：2012-10-25T09:10:42.273
> 
> 标签：eclipse, maven, ejb

我想构建一个生成 EJB 客户端以公开接口的 Maven EJB 项目。

当我在我的 POM 中使用它时它工作正常：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ejb-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <ejbVersion>3.1</ejbVersion>
        <generateClient>true</generateClient>
    </configuration>
</plugin> 
```

内置了两个 JAR，`target`但在 Eclipse 中，我只有一个用于实现和接口的项目。

我想在 Eclipse 中创建两个单独的项目，一个用于接口，一个用于实现（当我们在没有 Maven 的情况下创建 EJB 项目时的 Eclipse 传统方式）。请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:33:25.760

好吧，我成功地在基于**maven-archetype-quickstart**原型的 Eclipse 2 Maven 项目中使用 M2E 构建，一个用于 ejb 实现 (ejb-impl)，一个用于 ejb 客户端 (ejb-client)。

在 ejb-impl 中，我选择打包到`ejb`我的 ejb-client 中，我选择`jar`打包。

我使用 maven-ejb-plugin 插件从 ejb-impl 生成 ejb，我不使用 generateClient 选项（默认值已设置为 false）。

我使用 maven-ear-plugin 从 ejb-impl、ejb-client 和一些 war 模块 (jsf) 生成 ear。我使用 jarModule 来包含 ejb-client，所以它在`lib`目录下打包到 ear 文件中，因此无需修改清单或其他任何内容，其他模块可以轻松访问 ejb-client。

因此，有了 Maven，我现在可以只使用或分发 EJB 的接口方法而不是实现，并且没有冗余代码。

# capistrano - Cap deploy error find_file_in_path: no such file foud

> ID：13065243
> 
> 赞同：2
> 
> 时间：2012-10-25T09:10:42.503
> 
> 标签：capistrano, capifony

我正在使用 capyfony + symfony2。

帽部署

```
/var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:183:in `find_file_in_load_path': no such file to load --  (LoadError)
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:171:in `load_from_file'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:89:in `load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `block in load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `each'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from Capfile:3:in `load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:93:in `instance_eval'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:93:in `load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:89:in `load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `block in load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `each'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `block in load_recipes'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `each'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `load_recipes'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:31:in `execute!'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:14:in `execute'
    from /var/lib/gems/1.9.1/gems/capistrano-2.13.4/bin/cap:4:in `<top (required)>'
    from /usr/local/bin/cap:19:in `load'
    from /usr/local/bin/cap:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:05:21.777

我遇到了同样的问题。通过调查，我试图提出：

```
puts Gem.find_files('symfony2.rb') 
```

在我的*Capfile*文件中，如[https://github.com/everzet/capifony/issues/190](https://github.com/everzet/capifony/issues/190)所述。然而，它什么也没返回。我想我想念这个文件。我怎么才能得到它？

**编辑 ：**

经过更多调查，我终于找到了解决方案。

我为 Capifony 2.1.16 使用了 Capfile。似乎新版本的 Capifony (2.2) 需要对 Capfile 文件进行一些更改。使用以下它应该可以工作：

```
load 'deploy' if respond_to?(:namespace) # cap2 differentiator
Dir['vendor/bundles/*/*/recipes/*.rb'].each { |bundle| load(bundle) }
load Gem.find_files('capifony_symfony2.rb').last.to_s
load 'app/config/deploy' 
```

# doctrine - ZF2 和 EntityManager（学说）

> ID：13065245
> 
> 赞同：7
> 
> 时间：2012-10-25T09:10:44.783
> 
> 标签：doctrine, zend-framework2, entitymanager

我有个问题。我尝试在没有控制器的情况下获取实体管理器，但我没有找到办法。此时，我得到这样的实体管理器：

```
(Controller)
public function getEntityManager()
{
    if (null === $this->_em) {
        $this->_em = $this->getServiceLocator()->get('Doctrine\ORM\EntityManager');
    }
    return $this->_em;
}

(Plugin)
public function getEntityManager()
{
    if($this->_em == null){
        $this->_em = $this->getController()->getServiceLocator()->get('doctrine.entitymanager.orm_default');
    }
    return $this->_em;
} 
```

你看，我总是需要一个控制器。但是，如果我需要模型中的 EntityManager，我就有问题了。我可以给模型控制器，但我认为这确实是一个糟糕的方法。

你有什么想法在没有控制器的情况下获得 EntityManager 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T09:31:20.287

我处理 Doctrine 的方式是通过服务，我这样做如下：

```
//some Controller
public function someAction()
{
    $service = $this->getServiceLocator()->get('my_entity_service');
    return new ViewModel(array(
        'entities' => $service->findAll()
    ));
} 
```

`Service->findAll()`看起来像这样：

```
public function findAll()
{
    return $this->getEntityRepository()->findAll();
} 
```

现在我们需要定义`my_entity_service`. 我在我的内部做这个`Module.php`

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'my_entity_service' => 'Namespace\Factory\MyServiceFactory'
        )
    );
} 
```

接下来我创建工厂（注意：这也可以通过 Module.php 中的匿名函数来完成）

```
<?php
namespace Namespace\Factory;

use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\ServiceManager\FactoryInterface;
use Namespace\Model\MyModel;

class MyServiceFactory implements FactoryInterface
{
    /**
     * Create service
     *
     * @param ServiceLocatorInterface $serviceLocator
     * @return mixed
     */
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $myModel= new MyModel();
        $myModel->setEntityManager($serviceLocator->get('Doctrine\ORM\EntityManager'));

        return $myModel;
    }    
} 
```

现在有很多东西要咀嚼：DI完全明白。这里发生的事情实际上非常简单。您无需创建模型并以某种方式访问​​ EntityManager，而是调用 ZF2 的 ServiceManager 为您创建模型并将 EntityManager 注入其中。

如果这仍然让您感到困惑，我很乐意尝试更好地解释自己。但是，为了进一步澄清，我想了解您的用例。即：你需要 EntityManager 做什么，或者你到底在哪里需要它。

**此代码示例超出了问题范围**

只是为了给你一个我通过 ServiceFactories 用表单做的事情的例子：

```
public function createService(ServiceLocatorInterface $serviceLocator)
{
    $form = new ReferenzwertForm();
    $form->setHydrator(new DoctrineEntity($serviceLocator->get('Doctrine\ORM\EntityManager')))
         ->setObject(new Referenzwert())
         ->setInputFilter(new ReferenzwertFilter())
         ->setAttribute('method', 'post');

    return $form;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T17:47:26.020

您真正的问题是“**如何在我自己的课程中获取 ServiceManager 的实例**”

为此，请查看文档：（页面底部[http://zf2.readthedocs.org/en/latest/modules/zend.service-manager.quick-start.html](http://zf2.readthedocs.org/en/latest/modules/zend.service-manager.quick-start.html)）

> 默认情况下，Zend Framework MVC 注册了一个初始化器，它将注入 ServiceManager 实例，它是 Zend\ServiceManager\ServiceLocatorInterface 的实现，到任何实现 Zend\ServiceManager\ServiceLocatorAwareInterface 的类中。一个简单的实现如下所示。

所以在你的类中实现 ServiceLocatorInterface 然后在你的类中你可以调用：

```
$this->getServiceLocator()->get('doctrine.entitymanager.orm_default'); 
```

或您已注册的任何其他服务。

# java - 如何在数据库应用程序中最好地处理多种语言？

> ID：13065247
> 
> 赞同：4
> 
> 时间：2012-10-25T09:10:45.130
> 
> 标签：java, sql, database, design-patterns, internationalization

我有一系列用于以各种语言显示消息的属性文件。
因此，根据当前的语言设置，一条消息可以用英语、法语或德语等显示。
在我的数据库中，我有各种记录，而不是实际值，我放置了属性文件的键，以便在检索记录时使用该数据我可以用相应的语言显示消息。
例如，我的数据库中可能有一条记录，例如：

`John| Smith| AQ| etc`

在`AQ`相应的属性文件中可以显示为`Doctor`等`Arzt`。
我的问题是我需要按这些属性进行排序，这些属性在数据库中的值虽然是代码，但在数据库中排序是不可能的。
从[这里](https://stackoverflow.com/questions/12975288/sort-from-sql-using-java)我得到了使用临时表和排序的建议，但这对我来说是 1 个属性。
我正在寻找一个更通用的解决方案来处理多个属性文件，并尽可能避免在代码中检查：
例如`if this query sorts on X create this temp table`等。
是否有一个通用的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:18:55.233

与其将语言信息存储在属性文件中，不如将其存储在数据库的表中。那么这一切都可以轻松完成。

```
Records:
first | last  | messageid |
John  | Smith | 1         |

Messages:
messageid | language | message |
1         | English  | Mr.     |
1         | Spanish  | Sr.     |
2         | English  | Doctor  |
etc... 
```

然后以本地语言按消息排序的查询将如下所示：

```
select first, last, message from records r
    inner join messages m on m.messageid = r.messageid
    where language = [your current language]
    order by message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:44:11.440

好问题！

恕我直言，您想继续使用属性文件来本地化这种字符串 - 它允许您使用 Java 的内置 IL8N 功能，从而为您节省大量时间。

一般来说，我的建议是在数据库中存储域对象的本地字符串——例如，如果你有一个产品数据库，并且你需要存储产品名称，那显然是域的一部分；管理产品的人员还需要管理产品名称，并且您希望能够强制执行业务逻辑和参照完整性。

您可能会争辩说这适用于您给出的示例 - 标题是“人”域的一部分，应该在数据库中进行管理。

对于用户界面元素——按钮上的文本、菜单项的名称——属性文件是绝对正确的。

如果您认为“标题”是用户界面的一部分，或者您不想移动它，因为您已经建立了本地化流程，我的建议是使用 Java 进行排序，而不是 SQL；取决于您连接到数据库的方式，有很多方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:15:56.357

在应用程序启动时，您可以同步包含键、区域设置和实际消息的表。这些将是普通表，因此您可以在普通 SQL 查询中访问它们。

但我建议您始终在应用程序中进行排序，因为这看起来真的很像应用程序逻辑。

# android - Nexus Jellybean 手机中的 Phonegap 点击问题

> ID：13065260
> 
> 赞同：0
> 
> 时间：2012-10-25T09:11:45.690
> 
> 标签：android, cordova, dom-events, phonegap

我正在使用 Phonegap 开发一个 Android 应用程序。在 Google Nexus 手机中，当我单击一次时，需要单击两次意味着我正在调用的函数将被执行两次。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:40:14.287

像这样调用按钮或 href 上的函数：

```
$('#buttonID').off("click").on("click", function () {

}); 
```

# sql-server - sp_dropuser 存储过程与 tsql 中的删除用户语句

> ID：13065264
> 
> 赞同：2
> 
> 时间：2012-10-25T09:12:02.210
> 
> 标签：sql-server, tsql

正如标题所暗示的，从数据库中删除用户时，哪种选择更可取（如果有的话，在什么条件下）：`sp_dropuser`存储过程还是`DROP USER`命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:13:54.117

`sp_dropuser`正在被弃用，取而代之的是`DROP USER`.

[在这里](http://msdn.microsoft.com/en-us/library/ms189758.aspx)引用 MSDN ：

> 此功能将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。请改用 DROP USER。

因此`DROP USER`是一个要一起去的。

这同样适用于其他类似的存储过程，例如`sp_adduser`.

# c++ - 如何将模板化对象存储在 STL 容器和成员函数调用中

> ID：13065271
> 
> 赞同：3
> 
> 时间：2012-10-25T09:12:19.760
> 
> 标签：c++, templates, stl, c++11, member-function-pointers

假设你有一个像

```
template<class T>
struct A {
  void foo() {
    // Need access to "T" here
    typedef typename someTrait<T>::someType T2;
  }
}; 
```

并且您想使用容器（可能是 STL）“注册”（或存储）类的实例（或指向它的指针），以便以后调用`foo()`所有已注册实例的方法。

由于要存储使用不同模板参数实例化的实例 ( `A<int>`, `A<float>`, ...) 显然不能使用 a`std::vector`并存储实例或指向它的指针。我能想象的是制作方法`static`并将函数指针存储到`void foo()`，例如：

```
 void static foo();

 typedef void (* fooPtr)(void);
 std::vector<fooPtr> 
```

但不知何故，我觉得这不是很 C++11-ish。有没有一个很好的解决方案可以引入包装类或其他东西？

引入基类并使用动态转换会引入对 的依赖`RTTI`，对吧？我想避免依赖`RTTI`.

在 C++11 中如何做到这一点？（我不想引入额外的依赖项，比如链接到 Boost 或依赖于`RTTI`.）

感谢您的意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:17:23.753

也许你可以只使用虚拟方法？这也适用于 C++03。

```
struct ABase {
    virtual void foo() = 0;
};

template<class T>
struct A : ABase {
    virtual void foo() override {
        // Access to "T" here
    }
};

...

std::vector<std::unique_ptr<ABase>> vec;
vec.emplace_back(new A<int>());
vec.emplace_back(new A<float>());

for (auto& p_a : vec)
    p_a->foo(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T09:24:02.900

如果你真的需要一个函数数组，你可以使用`std::function`with 连线来`std::bind`

```
std::vector<std::function<void()> vec;
A<int> a;
vec.push_back(std::bind(&A<int>::foo, &a)); //now a should live at least as long, as vec
// or vec.push_back(std::bind(&A<int>::foo, a)); - now a will be _copied_ to vec 
```

`foo`现在是一个成员函数（`std::bind`在这里将函数“绑定”到给定变量）

# java - Maven原型插件未应用所有属性

> ID：13065274
> 
> 赞同：0
> 
> 时间：2012-10-25T09:12:30.760
> 
> 标签：java, maven, archetypes

在我正在进行的一个项目中，我们还使用自定义原型来更轻松地生成新的域/连接器。在尝试编写自动化测试来验证这些原型之后，我遇到了生成这些原型的问题。由于某种原因，并非所有使用标志或使用交互模式提供的属性`-D`都应用于生成的`pom.xml`

原型看起来[像这样](https://github.com/openengsb/openengsb-framework/tree/master/tooling/archetypes/domain)。

运行[此命令](http://pastebin.com/2rc70NPm)会生成[此 pom.xml](http://pastebin.com/9eDLtnP3)。它应用了属性`${package}`和的字段，`${domainInterface}`但没有应用`groupId`、和的字段。`artifactId``version``name`

所以我的问题是，我做错了什么，是原型损坏了还是 maven 原型插件中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:00:07.863

我尝试通过克隆 GitHub 存储库、在本地安装原型然后运行您的命令来重现这一点。

```
git clone https://github.com/openengsb/openengsb-framework.git
cd openengsb-framework/tooling/archetypes/domain
vim pom.xml 
```

删除了父 pom 引用，然后：

```
mvn clean install
mvn archetype:generate -DarchetypeGroupId=org.openengsb.tooling.archetypes -DarchetypeArtifactId=org.openengsb.tooling.archetypes.domain -DarchetypeVersion=3.0.0-SNAPSHOT -DgroupId=org.openengsb.domain -DartifactId=org.openengsb.domain.foodomain -Dversion=1.0.0-SNAPSHOT -Dname=FooDomain -DopenengsbVersion=3.0.0-SNAPSHOT -Dpackage=org.openengsb.domain.foodomain -DdomainInterface=FooDomain -DdomainName=foodomain -DinteractiveMode=false
cd org.openengsb.domain.foodomain/
cat pom.xml 
```

渲染这个 pom.xml（这里只粘贴了一部分）：

```
 <properties>
    <bundle.symbolicName>org.openengsb.domain.foodomain</bundle.symbolicName>
    <bundle.namespace>org.openengsb.domain.foodomain</bundle.namespace>
    <domain.name>FooDomain</domain.name>
  </properties>

  <groupId>org.openengsb.domain</groupId>
  <artifactId>org.openengsb.domain.foodomain</artifactId>
  <version>1.0.0-SNAPSHOT</version>

  <name>FooDomain</name> 
```

# xsd - 是否可以定义具有一系列节点的 XML 模式，每个枚举值一个节点？

> ID：13065281
> 
> 赞同：0
> 
> 时间：2012-10-25T09:12:45.380
> 
> 标签：xsd

```
<xs:simpleType name="ItemCategoryEnum">
  <xs:restriction base="xs:string">
    <xs:enumeration value="Kitchen"></xs:enumeration>
    <xs:enumeration value="Bathroom"></xs:enumeration>
  </xs:restriction>
</xs:simpleType> 
```

是否可以定义一个元素“Inventory”，它应该有尽可能多的节点，命名为“Category”，因为“ItemCategoryEnum”有可能的枚举值？

因此，对于上面的示例，兼容的 XML 应该如下所示：

```
<Inventory>
  <Category name="Kitchen">
    <Item></Item>
    <Item></Item>
    <Item></Item>
  </Category>
  <Category name="Bathroom">
    <Item></Item>
    <Item></Item>
    <Item></Item>
  </Category>
</Inventory> 
```

仅将“Category”的“name”属性指定为“ItemCategoryEnum”类型是不够的，因为这只能确保“name”属性不能具有枚举中列出的任何其他值。如果某些枚举值从未使用过，它不会抱怨。这意味着以下 XML 也将是兼容的：

```
<Inventory>
  <Category name="Kitchen">
    <Item></Item>
    <Item></Item>
    <Item></Item>
  </Category>
</Inventory> 
```

这里没有与“浴室”对应的类别。我希望将这一事实视为错误。

-桑迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:58:25.793

最简单的方法是将类别名称从属性值提升为元素名称。

否则，您可以使用 XSD 1.1 断言来检查约束（尽管您将负责使断言与类型的枚举值保持同步）。

# c# - 如何为通用闭源类型的所有实例指定自定义 UITypeEditor？

> ID：13065286
> 
> 赞同：0
> 
> 时间：2012-10-25T09:12:59.200
> 
> 标签：c#, .net, typedescriptor, uitypeeditor

如何为*泛型*类型的所有实例指定自定义 UI 编辑器？该类型是在另一个我不拥有的程序集中定义的。

* * *

这是我尝试过的，受到[https://stackoverflow.com/a/849778/284795](https://stackoverflow.com/a/849778/284795)的启发，但没有任何效果（旧编辑器仍然存在）。在这里，泛型类型`List<>`和自定义编辑器`DateTimeeditor`- 废话，但这只是一个示例。

```
TypeDescriptor.AddAttributes(typeof(List<>),new EditorAttribute(typeof(System.ComponentModel.Design.DateTimeEditor),typeof(UITypeEditor)));
TypeDescriptor.GetEditor(new List<int>(),typeof(UITypeEditor)).Dump(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:38:41.623

尝试以下内容

`Customer`是任意类

`EditorBase`定义为

```
public class EditorBase : System.Drawing.Design.UITypeEditor {
} 
```

代码：

```
System.Collections.Hashtable table = new System.Collections.Hashtable();

table.Add(typeof(Customer), typeof(EditorBase).AssemblyQualifiedName);

System.ComponentModel.TypeDescriptor.AddEditorTable(typeof(System.Drawing.Design.UITypeEditor), table);

object editor = System.ComponentModel.TypeDescriptor.GetEditor(typeof(Customer), typeof(System.Drawing.Design.UITypeEditor)); 
```

# iphone - 二进制表达式 nsstring 和 id 的无效操作数

> ID：13065287
> 
> 赞同：0
> 
> 时间：2012-10-25T09:13:14.503
> 
> 标签：iphone, objective-c

嗨，即使我使用类型转换，我也得到错误的无效操作数到二进制表达式 nsstring 和 id 这是我遇到问题的代码。请更正此代码。

```
for (int j = 0 ; j<newarray.count ; j++){
        if(j<newarray.count){
 message = (NSString *) message + [newarray objectAtIndex:j]+ "," ;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:17:04.113

您不能将`+`运算符与对象一起使用，对于您的特定情况，您可以将整个循环替换为：

```
NSString* message = [newarray componentsJoinedByString:@","]; 
```

而且 FIY Objective-C 根本不支持运算符重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:19:05.997

我不确定这是否是您的意图，但是如果您尝试将新信息附加到用逗号分隔的字符串中，则可以使用以下内容：

```
for (int j = 0 ; j<newarray.count ; j++){
    [message stringByAppendingString:[NSString stringWithFormat:@"%@,",[newarray objectAtIndex:j]]];
} 
```

此外，您的条件`if(j<newarray.count)`在此循环中始终评估为真，因此是不必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:16:57.200

您应该强制转换“[newarray objectAtIndex:j]”，其默认返回类型是“id”

[检查这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/objectAtIndex%3a)

IIRC NSString 也没有 + 操作数重载。所以也许你应该试试[NSString stringWithFormat:]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:19:35.237

您似乎在假设C++ 中的`NSString`行为。`std::string`尝试这个：

```
NSMutableString *message = ...;
for (unsigned j = 0; j < newarray.count; j++)
{
    if (j > 0)
        [message appendString:@", "];
    [message appendString:[newarray objectAtIndex:j]];
} 
```

# php - 搜索字符串时MySQL查询未找到结果

> ID：13065288
> 
> 赞同：0
> 
> 时间：2012-10-25T09:13:20.590
> 
> 标签：php, mysql, string

我在使用 MySQL 查询时遇到问题。我的数据库结构如下所示：

```
id (PRIMARY_KEY, AUTO_INCREMENT)

deviceID (TEXT)

name (TEXT)

latidude (TEXT)

longitude (TEXT) 
```

现在这是第一个条目的样子（按照上面的顺序）：

```
1 fc29daf8-bc53-4235-a1df-7d54b4e67b4c username 46.993393 5.448076 
```

我正在使用此查询搜索数据库：

```
$result = mysql_query("SELECT name FROM position WHERE deviceID = '$deviceID'"); 
```

但它没有找到条目。deviceID 是从 $_GET 获得的，它与数据库中的 this 完全相同。我还通过使用 echo 打印它来检查它是否正确。

它像这样发送到 PHP 文件：

```
read_uniqueid.php?deviceID=fc29daf8-bc53-4235-a1df-7d54b4e67b4c 
```

并像这样从 .php 文件中读取：

```
$deviceID = $_GET['deviceID'];
echo $deviceID.'<br>'; 
```

在这些行之后，发送上面的查询。

有一个与数据库的有效连接。如果我搜索它的名称，我只会在查询中遇到问题，然后我会得到所有其他条目。

此查询有效并为我提供了所有条目：

```
$result = mysql_query("SELECT * FROM position WHERE name = '$name'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:16:30.150

试试看，

```
$result = mysql_query("SELECT name FROM position WHERE deviceID like '%$deviceID%'"); 
```

列 deviceID 可能在值之前或之后有空格。

# .net - ServiceStack认证失败时，不重定向？

> ID：13065289
> 
> 赞同：10
> 
> 时间：2012-10-25T09:13:24.160
> 
> 标签：.net, authentication, servicestack

我们正在构建一个使用基本身份验证的 ServiceStack API。我目前在我的 AppHost 中设置了身份验证，如下所示：

```
var authDb = new OrmLiteConnectionFactory("Server=(...);", true, MySqlDialectProvider.Instance);

var authRepo = new OrmLiteAuthRepository(authDb);
authRepo.CreateMissingTables();
container.Register<ICacheClient>(c => new MemoryCacheClient());
container.Register<IUserAuthRepository>(c => authRepo);

Plugins.Add(
    new AuthFeature(() => new AuthUserSession(), new IAuthProvider[] { new BasicAuthProvider() })
); 
```

当执行没有授权标头或错误的用户名+传递的请求时，响应是重定向到 /Account/Login.aspx?ReturnUrl=...

部分请求 + 响应示例：

```
POST http://localhost:60278/reserve HTTP/1.1

HTTP/1.1 302 Found
Location: /Account/Login.aspx?ReturnUrl=%2freserve
X-Powered-By: ServiceStack/3,924 Win32NT/.NET 
```

有没有办法让它只响应 HTTP 401 Unauthorized 或 HTTP 403 Forbidden ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-25T16:38:33.230

默认情况下，ServiceStack 的 AuthFeature 只会尝试将您重定向到**HTML** Content-Type 请求的默认`~/login`路径。您可以通过将 AuthFeature 中的重定向路径设置为 null 来覆盖它：

 **```
Plugins.Add(new AuthFeature(...) { HtmlRedirect = null }); 
```

这将回退到`401 UnAuthorized`其他内容类型获得的标准响应。

将 HtmlRedirect 全局设置为 null 后，您可以临时将其添加回来，例如：

```
[Authenticate(HtmlRedirect="~/path/to/redirect/to")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-17T06:00:30.943

如果以下方法不起作用：

```
Plugins.Add(new AuthFeature(...) { HtmlRedirect = null }); 
```

尝试将 设置`OverrideHtmlRedirect = false`为提供程序。这适用于`NetCoreIdentityAuthProvider`- 特别是对于 JWT 不记名身份验证

```
Plugins.Add(
  new AuthFeature(..., 
  new CustomAuthProvider(AppSettings) { OverrideHtmlRedirect = false }
) { HtmlRedirect = null }); 
```

如果一切都失败了，请检查 Github 代码以查看是否强制执行 html 重定向**

# c# - 使用 FluentValidation.NET 进行条件规则评估

> ID：13065294
> 
> 赞同：3
> 
> 时间：2012-10-25T09:13:34.677
> 
> 标签：c#, fluentvalidation

我想要达到的目标可以粗略地概括为一个简单的 OR 条件。

虽然使用流畅验证（何时/除非）支持其他属性的条件属性验证，但似乎没有一种方法可以支持同一属性的条件规则？还是我错过了什么？

基本上我想实现：

```
RuleFor(x => x.Property).CanEitherValidateThisRule().Or.CanValidateThisRule(); 
```

唯一的替代方法是将规则组合在一个自定义规则中？
但是，这将规则逻辑紧密结合在一起，实际上它们是我可能想在其他对象/字段上使用的完全独立的条件。

有人建议在 FluentValidation.NET 的未来版本中支持这一点，有没有人知道使用扩展方法实现这一点的方法，或者是否有我错过的语法？

**编辑**：找到讨论：[.NET 的流利验证 - 查看讨论](http://fluentvalidation.codeplex.com/discussions/348513)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:45:00.013

您可以尝试[为同一属性链接验证器](http://fluentvalidation.codeplex.com/wikipage?title=CreatingAValidator&referringTitle=Documentation&ANCHOR#Chaining) 虽然这是一种肮脏的方式来做您想做的事，但如果您对一小部分代码进行验证，它仍然值得。

如果您想要一种更清洁的方式，那么到目前为止，我认为创建[自定义验证器类](http://fluentvalidation.codeplex.com/wikipage?title=Custom&referringTitle=Documentation&ANCHOR#CustomValidator)是最方便的选择。

我链接到的 wiki 页面提供了所有必要的工具。

# python - 如何在python创建的BaseHTTPSERVER上执行python脚本？

> ID：13065306
> 
> 赞同：3
> 
> 时间：2012-10-25T09:14:19.717
> 
> 标签：python, http, webserver, cgi

我只是创建了一个 python 服务器：

```
python -m SimpleHTTPServer 
```

我有一个.htaccess（我不知道它是否对python服务器有用）：

```
AddHandler cgi-script .py
Options +ExecCGI 
```

现在我正在编写一个简单的 python 脚本：

```
#!/usr/bin/python
import cgitb
cgitb.enable()
print 'Content-type: text/html'
print '''
<html>
     <head>
          <title>My website</title>
     </head>
     <body>
          <p>Here I am</p>
     </body>
</html>
''' 
```

我将 test.py （我的脚本名称）作为一个执行文件，其中包含：

```
chmod +x test.py 
```

我用这个地址在 Firefox 中启动：(http : //) 0.0.0.0:8000/test.py

问题，脚本没有执行......我在网页中看到代码......服务器错误是：

```
localhost - - [25/Oct/2012 10:47:12] "GET / HTTP/1.1" 200 -
localhost - - [25/Oct/2012 10:47:13] code 404, message File not found
localhost - - [25/Oct/2012 10:47:13] "GET /favicon.ico HTTP/1.1" 404 - 
```

如何简单地管理 python 代码的执行？是否可以在 python 服务器中编写来执行 python 脚本，例如：

```
import BaseHTTPServer
import CGIHTTPServer
httpd = BaseHTTPServer.HTTPServer(\
    ('localhost', 8123), \
CGIHTTPServer.CGIHTTPRequestHandler)
###  here some code to say, hey please execute python script on the webserver... ;-)
httpd.serve_forever() 
```

或者是其他东西...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T10:57:28.890

你在正确的轨道上`CGIHTTPRequestHandler`，因为`.htaccess`文件对内置的 http 服务器没有任何意义。有一个`CGIHTTPRequestHandler.cgi_directories`变量指定可执行文件被视为 cgi 脚本的目录（[这里是检查本身](http://hg.python.org/cpython/file/cbdd6852a274/Lib/http/server.py#l951)）。您应该考虑移动`test.py`到`cgi-bin`or`htbin`目录并使用以下脚本：

***cgiserver.py：***

```
#!/usr/bin/env python3

from http.server import CGIHTTPRequestHandler, HTTPServer

handler = CGIHTTPRequestHandler
handler.cgi_directories = ['/cgi-bin', '/htbin']  # this is the default
server = HTTPServer(('localhost', 8123), handler)
server.serve_forever() 
```

***cgi-bin/test.py：***

```
#!/usr/bin/env python3
print('Content-type: text/html\n')
print('<title>Hello World</title>') 
```

你最终应该得到：

```
|- cgiserver.py
|- cgi-bin/
   ` test.py 
```

运行`python3 cgiserver.py`并发送请求到`localhost:8123/cgi-bin/test.py`. 干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-21T14:27:56.390

您是否尝试过使用[Flask](http://flask.pocoo.org/)？这是一个轻量级的服务器库，使这变得非常容易。

```
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello_world():
    return '<title>Hello World</title>'

if __name__ == '__main__':
    app.run(debug=True) 
```

在这种情况下`<title>Hello World</title>`，返回值呈现为 HTML。您还可以将 HTML 模板文件用于更复杂的页面。

这是一个很好的简短的 youtube[教程](https://youtu.be/ZVGwqnjOKjk)，可以更好地解释它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-02T09:07:55.523

您可以使用更简单的方法并使用`--cgi`启动 http 服务器的 python3 版本的选项：

```
python3 -m http.server --cgi 
```

正如命令所指出的：

```
python3 -m http.server --help 
```

# java - 使用 JPA 和 Oracle 管理具有增量 id 的复合主键

> ID：13065309
> 
> 赞同：2
> 
> 时间：2012-10-25T09:14:26.737
> 
> 标签：java, oracle, jpa, sequence, composite-key

使用 JPA，我尝试修改多语言内容的持久对象，这意味着我需要一个复合键，带有 id 和语言。id 还需要使用序列递增（我使用的是 Oracle）。如何做呢？

目前，我得到了一个 Contenu 课程：

```
@Entity
@Table(name = "CONTENUS")
public class Contenus implements java.io.Serializable {

    private ContenusId id;
    ...
} 
```

和一个 ContenusId 类：

```
@Embeddable
public class ContenusId implements java.io.Serializable {

    private Long id;
    private String langue;
    ...
} 
```

但这不处理增量 id。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:02:57.673

首先，您需要为 JPA 实体管理器创建和 ID 类，以了解如何检查两个对象是否相等。此 ID 类应覆盖`equals()`和`hashcode()`方法。

```
/**
 * ContenusPK.java
 * 
 * $Source$
 */
import java.io.Serializable;

public class ContenusPK implements Serializable
{
    public static final long serialVersionUID = 1L;

    private Long id;
    private String langue;

    /*
     * (non-Javadoc)
     * @see java.lang.Object#hashCode()
     */
    @Override
    public int hashCode()
    {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((id == null) ? 0 : id.hashCode());
        result = prime * result + ((langue == null) ? 0 : langue.hashCode());
        return result;
    }

    /*
     * (non-Javadoc)
     * @see java.lang.Object#equals(java.lang.Object)
     */
    @Override
    public boolean equals(Object obj)
    {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        ContenusPK other = (ContenusPK) obj;
        if (id == null)
        {
            if (other.id != null)
                return false;
        }
        else if (!id.equals(other.id))
            return false;
        if (langue == null)
        {
            if (other.langue != null)
                return false;
        }
        else if (!langue.equals(other.langue))
            return false;
        return true;
    }

    /**
     * @return the serialversionuid
     */
    public static long getSerialversionuid()
    {
        return serialVersionUID;
    }

    /**
     * @return the id
     */
    public Long getId()
    {
        return id;
    }

    /**
     * @return the langue
     */
    public String getLangue()
    {
        return langue;
    }

    /**
     * @param id the id to set
     */
    protected void setId(Long id)
    {
        this.id = id;
    }

    /**
     * @param langue the langue to set
     */
    protected void setLangue(String langue)
    {
        this.langue = langue;
    }

} 
```

然后你需要声明你的实体的复合主键属性，将ID类与实体关联，并定义ID​​生成策略，如下：

```
@IdClass(ContenusPK.class)
@Entity
@TableName(name="")
public class Contenus {

    @Id
    @GeneratedValue(
        strategy = GenerationType.SEQUENCE, 
        generator = "GENERATOR_NAME")
    @SequenceGenerator(
        name = "GENERATOR_NAME", 
        sequenceName = "SEQUENCE NAME IN DB")
    @Column(name = "CONTENUS_ID")
    private Long id;

    @Id
    @Column(name = "LANGUE")
    private String langue;

    ...
} 
```

# css - Twitter bootstrap .transition 的多个转换？

> ID：13065310
> 
> 赞同：23
> 
> 时间：2012-10-25T09:14:32.223
> 
> 标签：css, twitter-bootstrap, less, css-transitions

我想在 Bootstrap v2.1.0 中为两个属性设置动画，

`opacity`和`margin`。_

我试过了：

`.transition(opacity 0.5s, margin 0.25s);`：无输出
`.transition('opacity 0.5s, margin 0.25s');`：无效的 CSS 输出
`.transition(opacity 0.5s); .transition(margin 0.25s);`：边距覆盖不透明度。

请注意，我使用的是[lessphp](http://leafo.net/lessphp/)，因此使用 JavaScript 正则表达式的解决方案将不起作用。

我知道我可以复制 mixin 并对其进行修改以接受两个参数，但这看起来很老套，肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-28T00:26:05.513

## 两个选项（取决于 LESS 的版本）

**少（1.3.3+）**

less2css.org显示这适用[于](http://less2css.org/)LESS 1.3.2 的实验，但[问题文档](https://github.com/less/less.js/issues/1211)似乎表明这是[1.4 版本添加](https://github.com/less/less.js/commit/c583acede0d0e2449582167e8b28922ee69f2cdd)。

每当它变得有效时，在某些时候，分号被引入作为参数混合中可能的变量分隔符，同时仍然允许逗号。a 的存在`;`导致逗号不被视为*分隔*变量，而是变量本身*值*的一部分（逗号分隔列表）。然后，这允许（[引用该站点](http://lesscss.org/features/#mixins-parametric-feature-mixins-with-multiple-parameters)）我们使用“虚拟分号创建带有一个包含逗号分隔的 css 列表的参数的 mixin 调用”。

***因此，以下工作可以在没有转义字符串***的情况下产生与上面相同的输出（**注意**“虚拟”分号放在变量条目的末尾，就在参数 mixin 调用的右括号*之前）：*

```
.transition(opacity 0.5s, margin 0.25s;);
                                      |
                                semicolon here 
```

**LESS（1.3.3 之前，但也适用于更高版本）**

`~`对传入的变量进行字符串插值 ( )：

```
.transition(~"opacity 0.5s, margin 0.25s"); 
```

**两种解决方案都输出**：

```
-webkit-transition: opacity 0.5s, margin 0.25s;
-moz-transition: opacity 0.5s, margin 0.25s;
-o-transition: opacity 0.5s, margin 0.25s;
transition: opacity 0.5s, margin 0.25s; 
```

# javascript - javascript检测点击了哪两个键盘键

> ID：13065314
> 
> 赞同：0
> 
> 时间：2012-10-25T09:14:52.440
> 
> 标签：javascript, html

我有一个 html 页面，上面有菜单。菜单有一个javascript。在这个 javascript 中，如果按下键盘键 1，那么我调用第一个菜单的链接，这工作正常，但现在要求增加到 17-18 个菜单。也就是说，如果用户按下 16（即按键 1，然后按键 6），则必须显示第 16 个编号的菜单。我需要帮助确定同时按下了哪两个键。

```
if(event.keyCode==49)
            {
                self.location="pages/abc/finishgoods.jsp";

            }
            if(event.keyCode==50)
            {
                window.navigate("pages/submenu.jsp");

            } 
```

任何人都可以帮助我检测到这一点。我不能使用 jquery，因为我的页面适用于 IE 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:44:11.540

这些方面的东西（未经测试，但理论在这里）

```
var current_keys = [], // to store keypresses
    key_timer;

// on press, store the current key and give the user a little while to press another
// on keypress {
  current_keys.push(event.keyCode);
  clearTimeout(keyTimer); // refresh the timer
  keyTimer = setTimeout(interpret_keys, 250);
// }

// they've had their chance, work out what they pressed
function interpret_keys ()
{
  var keys = -1
      key,
      i = 0;

  for (i; i < current_keys.length; i++)
  {
    key = current_keys[i] - 48; // turn 48 to 0, 49 to 1, etc
    key >= 0 && key <= 9 && keys += '' + key; // only 0-9 is valid here
  }

  keys = parseInt(keys); // make sure it's a number
  current_keys = []; // reset the tracking variable

  // keys now contains (theoretically) a number such as 1, 2, 16, etc, which can map to your selectable item
} 
```

# mysql - sql语句的问题

> ID：13065320
> 
> 赞同：-2
> 
> 时间：2012-10-25T09:15:18.277
> 
> 标签：mysql

我在这个 sql 语句中有一个错误，我不知道为什么：

```
SELECT t1.id_servidor_virtual as id_servidor_virtual,
    t1.nombre_servidor as nombre_servidor, 
    t1.plantilla as plantilla, 
    (SELECT tt1.descripcion
        FROM sku_precios tt1
        WHERE tt1.id_sku_precio = 'VM --') as c_sv,
    t1.sv_pvp as c_sv_pvp,
    t1.sv_pvp_dist as c_sv_pvp_dist,
    (SELECT tt1.descripcion
        FROM sku_precios tt1
        WHERE tt1.id_sku_precio = 'VCPU --') as c_cpu,
    t1.cpu_cant as c_cpu_cant,
    t1.cpu_pvp as c_cpu_pvp,
    t1.cpu_pvp_dist as c_cpu_pvp_dist,
    (SELECT tt1.descripcion
        FROM sku_precios tt1
        WHERE tt1.id_sku_precio = 'RAM --') as c_ram,
    t1.ram_cant as c_ram_cant,
    t1.ram_pvp as c_ram_pvp,
    t1.ram_pvp_dist as c_ram_pvp_dist,
    aletras(t1.ram_cant) as c_ram_unidad,
    (SELECT tt1.descripcion
        FROM sku_precios tt1 
        WHERE tt1.id_sku_precio = 'HDSTD --') as c_hdd,
    t1.hdd_cant as c_hdd_cant,
    t1.hdd_pvp as c_hdd_pvp,
    t1.hdd_pvp_dist as c_hdd_pvp_dist,
    aletras(t1.hdd_cant) as c_hdd_unidad,
    (SELECT tt1.descripcion
        FROM sku_precios tt1
        WHERE tt1.id_sku_precio = 'IPP --') as c_ip,
==> (t1.ip_pvpt1.ip_polled_pvpt1.ip_custom_pvp) as c_ip_pvp, 
    (t1.ip_pvp_distt1.ip_polled_pvp_distt1.ip_custom_pvp_dist) as c_ip_pvp_dist, 
    t1.id_servidor_virtual as parent_id, 
    (SELECT COUNT(t2.id_servicio_adicional) 
        FROM servicios_adicionales t2 
        WHERE t2.id_servidor_virtual = t1.id_servidor_virtual) as cant_sa,
    DATE_FORMAT(t2.f_inicio_contrato, '%d-%m-%Y') as f_inicio_contrato, 
    DATE_FORMAT(t2.f_fin_contrato, '%d-%m-%Y') as f_fin_contrato, 
    (SELECT tt2.n_pedido 
        FROM servidores_virtuales tt1 
        INNER JOIN pedidos tt2 ON tt2.id_pedido = tt1.id_pedido 
        WHERE tt1.id_servidor_virtual = t2.id_pedido_actualizado) as n_pedido_actualizado, 
    (SELECT t3.descuento 
        FROM albaranes t3 
        WHERE t3.id_pedido = t1.id_pedido 
        AND t3.id_cuenta_emisora = 2) as descuento 
FROM servidores_virtuales t1 
LEFT OUTER JOIN pedidos t2 ON t2.id_pedido = t1.id_pedido 
WHERE t1.id_pedido = 230; 
```

错误是：

> Err] 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 32 行的 '.ip_custom_pvp) as c_ip_pvp, ' 附近使用正确的语法

第 32 行标有`==>`。

你可以帮帮我吗？。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:22:00.543

```
t1.ip_pvpt1.ip_polled_pvpt1.ip_custom_pvp 
```

你确定你不应该在那里有一些其他的字符，比如一个`+`或`-`标志吗？

在我看来，这是三个*独立*的列：

```
t1.ip_pvp   t1.ip_polled_pvp   t1.ip_custom_pvp 
```

应该以其他方式加入，而不仅仅是删除它们之间的空白:-)

顺便说一句，这不是唯一的事件，只是我捡到的第一个。下一行也有一个。

MySQL 抱怨的原因是您显然违反了`schema.object`命名标准，因为填充对象名称中有*两个* `.`字符（因此是三个而不是两个级别）。

# ssh - 即使在将机器设置为无密码 SSH 登录后仍然要求输入密码

> ID：13065323
> 
> 赞同：0
> 
> 时间：2012-10-25T09:15:30.947
> 
> 标签：ssh, centos, scp

我需要将文件从远程机器复制到我的本地机器，并且我需要自动化它。

我已经尝试过 SCP 命令并且它正在工作，但是，我无法自动化它要求本地机器和远程机器的用户密码的部分。

根据这篇[文章](http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/)，我可以使用 ssh-keygen 和 ssh-copy-id 执行 SSH 登录而无需密码

按照那里写的所有说明后，我尝试使用它访问远程机器

> ssh lalala@XXX.XXX.XXX.XXX

它有效，它不再要求输入密码。但是当我尝试使用以下命令从该机器复制文件时，

```
scp lalala@XXX.XXX.XXX.XXX:'/a/b/c.txt' lelele@XXX.XXX.XXX.YYY:'/b/c/' 
```

它仍然要求输入本地机器的密码，即 lelele@XXX.XXX.XXX.YYY

我想知道我是不是做错了什么？会是什么呢？命令的格式有问题吗？

顺便说一句，我正在使用 Centos，我打算使用 python 对其进行编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T18:07:44.090

如果您要复制到本地计算机，为什么不这样做

```
scp lalala@XXX.XXX.XXX.XXX:'/a/b/c.txt' /b/c/ 
```

?

我在一台具有类似设置的机器上尝试了您的线路，但没有被要求输入密码；我得到了一个错误，但这可能是由于我们的配置不同。我试过我的，它奏效了。

关于您在远程机器上的连接是否成功，您可以在此处跟踪该文件：

```
tail -f /var/log/secure 
```

如果您在那里没有看到任何错误，您可以确定（好吧，永远不要说总是）您的带有生成键的布局正在工作。

在这种情况下，我敢打赌你不会看到任何错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-24T09:17:30.353

我认为您可能有多个 ssh 密钥，并且仅将身份设置为是。如果是这样，请检查这个答案：[https ://askubuntu.com/a/999306/398861](https://askubuntu.com/a/999306/398861)

# asp.net-mvc-3 - Public ActionResult Delete(int id, brand brand) - Null 品牌对象（MVC3 和实体框架）

> ID：13065324
> 
> 赞同：0
> 
> 时间：2012-10-25T09:15:31.493
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, null-object-pattern

我正在使用实体框架学习 MVC 3，但我的控制器中的删除操作结果方法存在问题。我有两种用于删除的 ActionResult 方法，一种使用 [HttpPost] 向数据库提交数据，另一种用于使用基于 ID 的正确记录填充视图。

我的问题是我的参数中有一个空对象，所以当我尝试提交删除事务时，它看不到正确的值，因为我有带有空值的空对象。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using DBFirstMVC.Models;

namespace DBFirstMVC.Controllers
{
    public class BrandController : Controller
    {
        // Instantiate model of my database when controller is called
        //TestBradEntities db = new DBFirstMVC.Models.TestBradEntities();
        //
        // GET: /Brand/

        public ActionResult Index()
        {
            using (var db = new DBFirstMVC.Models.TestBradEntities1())
            {
                return View(db.Brands.ToList());
            }
        }

        //
        // GET: /Brand/Details/5

        public ActionResult Details(int id)
        {
            return View();
        }

        //
        // GET: /Brand/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /Brand/Create

        [HttpPost]
        public ActionResult Create(Brand brand)
        {

            using (var db = new DBFirstMVC.Models.TestBradEntities1())
            {
                db.Brands.Add(brand);
                db.SaveChanges();
            }
            return RedirectToAction("Index");
        }

        //
        // GET: /Brand/Edit/5

        public ActionResult Edit(int id)
        {
            try
            {
                using (var db = new DBFirstMVC.Models.TestBradEntities1())
                {
                    return View(db.Brands.Find(id));
                }
            }
            catch (Exception ex)
            {
                return View(ex.ToString());

            }
        }

        //
        // POST: /Brand/Edit/5

        [HttpPost]
        public ActionResult Edit(int id, Brand brand)
        {
            try
            {
                using (var db = new DBFirstMVC.Models.TestBradEntities1())
                {
                    db.Entry(brand).State = System.Data.EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }

            }
            catch (Exception ex)
            {
                return View();
            }
        }

        //
        // GET: /Brand/Delete/5

        public ActionResult Delete(int id)
        {
            using (var db = new DBFirstMVC.Models.TestBradEntities1())
            {
                return View(db.Brands.Find(id));
            }
        }  

        //
        // POST: /Brand/Delete/5

        [HttpPost]
        public ActionResult Delete(int id, Brand brand)
        {
            try
            {
                using (var db = new DBFirstMVC.Models.TestBradEntities1())
                {
                    db.Entry(brand).State = System.Data.EntityState.Deleted;
                    db.SaveChanges();
                }
                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        }
    }
} 
```

这是带有空对象的代码：

```
 [HttpPost]
 public ActionResult Delete(int id, Brand brand) 
```

品牌为空，我不明白为什么。例如

```
[HttpPost]
public ActionResult Edit(int id, Brand brand) 
```

编辑 actionresult 中的品牌参数在对象中有数据，而不是空值。

有谁知道如何解决这一问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:12:44.800

我有同样的问题！

我把 find 的代码行放在第一位：

```
[HttpPost]
    public ActionResult Delete(int id, Student student)
    {
        try
        {
            using (var schoolClient = new SchoolSrvManagerClient())
            {
                student = schoolClient.GetStudent(id);
                student.MarkAsDeleted<Student>();
                schoolClient.UpdateStudent(student);
            }
            return RedirectToAction("ShowStudents");
        }
        catch (Exception)
        {
            return View();
        }
    } 
```

查看代码：

```
@model SchoolSTEModel.Student

@{
    ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<fieldset>
    <legend>Student</legend>

    <div class="display-label">StudentName</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.StudentName)
    </div>

    <div class="display-label">StandardId</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.StandardId)
    </div>
</fieldset>
@using (Html.BeginForm()) {
    <p>
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to List", "Index")
    </p>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:14:12.283

我为解决这个问题所做的就是添加这行代码：

```
brand = db.Brands.Find(id); 
```

这似乎找到了与我作为 int id 参数传递给 ActionResult 方法的 ID 关联的正确数据。我不明白为什么 Edit actionresult 方法有效，但这不起作用，但这对我来说是一个可以接受的解决方案。

# php - 无法安装 Pear Text_Diff

> ID：13065326
> 
> 赞同：1
> 
> 时间：2012-10-25T09:15:40.430
> 
> 标签：php, windows, pear

我尝试使用安装Pear [Text_Diff](http://pear.php.net/package/Text_Diff/redirected)

```
pear install Text_Diff 
```

但是，它说

> 包“pear.php.net/Text_Diff”没有可用的版本。安装失败。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:24:24.057

Windows 上的 PEAR 有时需要在安装前运行以下命令进行一些刷新：

*   `pear clear-cache`
*   `pear update-channels`

最后再次：

*   `pear install Text_Diff`

# java - 解决在一台机器上使用两个 jboss 4.2.2 实例时已经使用的异常

> ID：13065327
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:15:45.113
> 
> 标签：java, jboss, jboss-4.2.x

我在一台机器上使用两个 JBoss 4.2.2 实例。我在第二个实例中更改了所有端口号。在启动第二个实例时仍然显示一个波纹管错误。

```
 14:28:58,624 WARN  [ServiceController] Problem starting service jboss.mq:service=InvocationLayer,type=UIL2
       java.net.BindException: Address already in use
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
at java.net.ServerSocket.bind(ServerSocket.java:328)
at java.net.ServerSocket.<init>(ServerSocket.java:194)

 14:29:00,228 ERROR [URLDeploymentScanner] Incomplete Deployment listing:

 --- MBeans waiting for other MBeans ---
 ObjectName: jboss.mq:service=InvocationLayer,type=UIL2
 State: FAILED
 Reason: java.net.BindException: Address already in use
 I Depend On: jboss.mq:service=Invoker

 --- MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM ---
 ObjectName: jboss.mq:service=InvocationLayer,type=UIL2
 State: FAILED
 Reason: java.net.BindException: Address already in use
 I Depend On: jboss.mq:service=Invoker 
```

但是服务器在这两种情况下都启动了。任何人都可以建议如何纠正这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:24:26.687

您是否在 jbossmq-service.xml 中配置了 jboss mq 端口？如果没有看到[https://community.jboss.org/wiki/ConfigurePorts?_sscc=t](https://community.jboss.org/wiki/ConfigurePorts?_sscc=t)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:30:56.400

听起来您仍然需要为 MQ 服务进行端口配置（即不使用默认值）。

更多信息：

*   [解决 java.net.BindException](http://www.mastertheboss.com/jboss-configuration/solving-javanetbindexception-address-already-in-use-jvm_bind)
*   [MQ 地址已在使用中](https://community.jboss.org/thread/64032)
*   [配置端口](https://community.jboss.org/wiki/ConfigurePorts?_sscc=t)

# android - 从传递字符串数据的服务调用活动

> ID：13065328
> 
> 赞同：1
> 
> 时间：2012-10-25T09:15:48.607
> 
> 标签：android, android-activity, android-service

我想从 Android 中的服务调用 Activity A（并将一些字符串传递给它）。这个活动 A 反过来调用另一个活动 B`startActivityForResult().`基本上，我希望我的服务等到获得活动 B 的结果。请给我一些关于如何完成这个实现的想法（以及在意图中设置哪个标志）？

**服务**：

```
Intent intent = new Intent(getBaseContext(),ActivityA.class);       
intent.putExtra("code",script);
intent.putExtra("type", type);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

**活动A**：

```
Intent intent = new Intent(this,ActivityB.class);
intent.putExtra("code",code);
intent.putExtra("type", type);      
startActivityForResult(intent,REQUEST_CODE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:17:15.937

首先创建一个接口

```
public interface MyActions {
public void doActions();
} 
```

现在让您的服务类实现该接口

```
public class MyService extends Service implements MyActions{ 
```

并覆盖该方法

```
@Override
public void doActions() {
    //Some code
} 
```

现在您的活动 A 正在通过 startActivityForResult 方法调用 B，因此覆盖 A 的 onActivityResult

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    //Some code
} 
```

现在在这个 A 类中创建接口的静态实例

```
static MyActions mActions; 
```

现在写一个像这样的静态方法

```
public static void setMyListener(MyActions act){
    mActions = act;
} 
```

现在在您为 A 类覆盖的 onActivityResult 中添加这行代码

```
mActions.doActions(); 
```

所以你得到

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    mActions.doActions();
} 
```

现在在 onStart() 方法中的 Service 类中，在调用活动之前写下这一行

```
ActA.setMyListener(this); 
```

现在就完成了，当从 Activity B 调用转到 A 的 onActivityResult 并且从 A 服务可以侦听 doActions() 的覆盖方法时

## 将所有代码写入您想要执行的服务的 doActions() 方法中

这是代码

第一个活动：ActA.java

```
public class ActA extends Activity {
static MyActions mActions;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.act1);
    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivityForResult(new Intent(ActA.this,ActB.class), 15);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.d("Response","requestCode" + requestCode + " resultCode" + resultCode);
    mActions.doActions();
}

public static void setMyListener(MyActions act){
    mActions = act;
}
} 
```

第二个活动：ActB.java

```
public class ActB extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.act2);
}
} 
```

应用启动时的 MainActivity

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //Start the service
    startService(new Intent(this, MyService.class));
}
} 
```

接口：MyActions.java

```
public interface MyActions {
public void doActions();
} 
```

服务类：MyService.java

```
public class MyService extends Service implements MyActions{

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

public void onStart(Intent intent, int startId) {

    super.onStart(intent, startId);
    Log.d("Response", "Started");
    ActA.setMyListener(this);
    startActivity(new Intent(this,ActA.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
}

@Override
public void doActions() {
    Log.d("Response", "Listener working");
}

} 
```

# javascript - html表单中的按钮和onchange

> ID：13065329
> 
> 赞同：5
> 
> 时间：2012-10-25T09:15:49.667
> 
> 标签：javascript, html, forms

有一个相当简单的 html 应用程序。

更改文本字段将导致提交，然后重绘。按下按钮也会导致提交。

当更改字段并通过按按钮离开时，浏览器会发生冲突。浏览器开始一次提交，中止它并进行下一次提交。结果是不可靠的。

是否有一种简单的解决方案可以在**不**切换到某些 AJAX 方法（比如 GWT）的情况下使用按钮和字段提交一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:38:26.840

您可以在开始提交表单时取消任何其他事件处理程序。这类似于单击后禁用提交，以防止不耐烦的用户两次提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:11:17.720

您可以发送一个标志，告知提交函数是否已调用一次，如果已调用提交，则不要为该用户调用提交。

**或者**，您可以在从文本字段更改调用函数后立即禁用提交按钮，这样用户将无法单击提交按钮。

可能会帮助你

# c# - MVC4 捆绑缓存头

> ID：13065330
> 
> 赞同：22
> 
> 时间：2012-10-25T09:15:52.257
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

我想更改从捆绑请求发送的缓存标头。目前它有所不同，`User-Agent`但我不希望这样，有没有办法更改捆绑请求发送的标头？

在快速查看`System.Web.Optimization`程序集后，我可以看到标题设置在`Bundle.SetHeaders`其中是一个私有静态函数，所以我认为它不可能，尽管我很想被证明是错误的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T17:43:34.370

这不是我们今天公开的事情。我们只在 BundleResponse 上公开 IBundleTransform 可以更改的 Cacheability 属性。是的，我们明确设置了以下内容：

```
 HttpCachePolicyBase cachePolicy = context.HttpContext.Response.Cache;
                cachePolicy.SetCacheability(bundleResponse.Cacheability);
                cachePolicy.SetOmitVaryStar(true);
                cachePolicy.SetExpires(DateTime.Now.AddYears(1));
                cachePolicy.SetValidUntilExpires(true);
                cachePolicy.SetLastModified(DateTime.Now);
                cachePolicy.VaryByHeaders["User-Agent"] = true; 
```

我们有一个待办事项的工作项目来打开它，并在未来使其更具可扩展性/可定制性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-10T07:47:10.540

[如janv8000 对此响应的评论](https://stackoverflow.com/a/13074223/4924629)中所述，有一个解决方法。您需要将以下 URL 重写规则添加到您的 Web 服务器：

```
<system.webServer>
    <rewrite>
        <outboundRules>
            <rule name="Cache Bundles" preCondition="IsBundles" patternSyntax="ExactMatch">
                <match serverVariable="RESPONSE_Vary" pattern="User-Agent" />
                <action type="Rewrite" value="Accept-Encoding" />
            </rule>
            <preConditions>
                <preCondition name="IsBundles" patternSyntax="Wildcard">
                    <add input="{URL}" pattern="*/bundles/*" />
                </preCondition>
            </preConditions>
        </outboundRules>
    </rewrite>
</system.webServer> 
```

显然，您需要注意将所有捆绑包放在捆绑包文件夹中或`IsBundles`相应地更改前提条件。

# vb.net - 如何使用 TFS sdk 和 vb.net 取消标记文件

> ID：13065331
> 
> 赞同：1
> 
> 时间：2012-10-25T09:15:50.933
> 
> 标签：vb.net, tfs-sdk

我正在为我们的 SQL 开发人员编写一个小应用程序，以允许他们使用 TFS 创建标签以便于代码部署，问题是 .ssmssqlproj 文件在我创建时被添加到标签中。我添加了一个子来循环遍历并取消标记这些文件，但我就是无法工作。下面的代码

```
 Public Sub UnlabelItem()

    Dim returnValue As LabelResult()
    Dim labelName As String = "1208-2210"
    Dim labelScope As String = "$/"
    Dim version As VersionSpec = New LabelVersionSpec(labelName, labelScope)

    Dim path As String = "$/FEPI/Database/FEPI/000 Pre Tasks.ssmssqlproj"
    Dim recursion As RecursionType = RecursionType.None

    Dim itemspec As ItemSpec = New ItemSpec(path, recursion)

    returnValue = sourceControl.UnlabelItem(labelName, labelScope, itemspec, version)

End Sub 
```

这是一个测试 Sub 只是为了让它工作，这是我得到的错误

“Microsoft.TeamFoundation.VersionControl.Client.ItemSpec”类型的值无法转换为“Microsoft.TeamFoundation.VersionControl.Client.ItemSpec 的一维数组”

有人对 unlabel 命令有任何运气吗？

马特

# sharepoint - 如何在 Visual Studio 中查看 SharePoint 网站的代码？

> ID：13065335
> 
> 赞同：1
> 
> 时间：2012-10-25T09:15:59.370
> 
> 标签：sharepoint, sharepoint-2010

我已经建立了一个 SharePoint 2010 站点，我想在 Visual Studio 2010 中查看该站点的代码以根据要求编辑代码。

这怎么可能？

# api - html cfgrid 更改列标题上的升序排序和降序排序菜单项的文本

> ID：13065338
> 
> 赞同：1
> 
> 时间：2012-10-25T09:16:20.760
> 
> 标签：api, extjs, coldfusion, cfgrid

我正在努力让它发挥作用，并希望得到任何帮助。我有一个 html 格式的 cfgrid。我希望能够更改单击列标题时出现的排序菜单的文本。我知道有一个 ext api 可以让您进行很多更改，但我似乎无法确定如何更改此文本。需要更改三个文本：升序排序、降序排序和列。请注意，此网格必须是 html 格式，而不是 applet 格式，我认为您可以选择更改排序按钮文本。

更改文本的原因是我在应用程序中的语言功能。

任何帮助将不胜感激

非常感谢

JC

我们正在使用 Coldfusion 9.01 我不确定你想看到什么代码，因为我所拥有的只是一个创建的 cfgrid，它对我的​​问题的任何答案都没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:23:58.980

在直接的 ColdFusion 中可能无法做到这一点，但如果您使用的是最新版本，则可以使用 JavaScript 为您处理。

在幕后，CFGRID 只不过是 EXTJ。我们能够“抓取”作为网格的“原生”JS 对象，然后像使用“原生”EXTJ 一样使用它。

查看有关如何“获取”本机 JS 对象的链接 - [http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WS0ef8c004658c1089-6262c847120f1a3b244-7ff7.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WS0ef8c004658c1089-6262c847120f1a3b244-7ff7.html)

# sql-server-2008 - 在 SQL Server Management Studio 2008 中使用“日期”数据类型

> ID：13065340
> 
> 赞同：0
> 
> 时间：2012-10-25T09:16:26.923
> 
> 标签：sql-server-2008, datetime

我有一个包含现有数据的数据库，该数据库使用 datetime 字段，该字段是使用日期和时间的时间戳。

我只想存储日期，而不是时间，因为无论如何都不会使用时间，但由于应用程序的工作方式，它在报告数据时会导致不一致。

我相信在我的表上使用“设计”视图有一个“日期”数据类型，但是当我尝试使用它时，它说数据类型无效。我也不能使用 SQL 中的 ALTER TABLE 语法来做到这一点。

因为它是实时数据，所以我不想做太多可能导致问题的更改。不过，我们有一个演示系统，我可以使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:24:38.550

SQL server 2008 有一个`date`数据类型，它只存储日期

最简单的方法是像这样更改表：

```
alter table your_table alter column  <dt_col> date 
```

由于您无法更改表格，我认为剩下的唯一方法是在选择时进行转换

```
select convert(date,<dt_col>) from your_table 
```

或者您可以使用此 select 语句创建一个视图并在所有查询中使用该视图

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/f887b/1)

# solr - 如何配置具有多个核心的 Solr 复制

> ID：13065341
> 
> 赞同：8
> 
> 时间：2012-10-25T09:16:27.933
> 
> 标签：solr, replication

我让 Solr 运行多个内核。由于负载很重，我想设置一个包含完全相同索引的从站。

文档[http://wiki.apache.org/solr/SolrReplication](http://wiki.apache.org/solr/SolrReplication)声明“将复制请求处理程序添加到每个核心的 solrconfig.xml”，但我只有一个 solrconfig.xml。

我的配置：
配置：/data/solr/web/solr/conf/config 文件
数据：/data/solr/data/solr/core 数据目录

真的有必要为每个核心复制 solrconfig.xml 吗？
我应该把这些多个 solrconfig 文件放在哪里？

solr.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
  <solr persistent="true">
  <property name="dih.username" value="user"/>
  <property name="dih.password" value="passwd"/>
  <property name="jdbclib" value="/usr/progress/dlc102b/java"/>
  <property name="dih.dburl" value="jdbc:datadirect:openedge://172.20.7.218:31380;databaseName=easource"/> <cores adminPath="/admin/cores">
    <core instanceDir="/data/solr/web/trunk/" name="product" dataDir="/data/solr/data/trunk/product-swap">
      <property name="dih-config" value="dih-config-product.xml"/>
    </core>
    <core instanceDir="/data/solr/web/trunk/" name="product-swap" dataDir="/data/solr/data/trunk/product">
      <property name="dih-config" value="dih-config-product.xml"/>
    </core>
    <core instanceDir="/data/solr/web/trunk/" name="periodp" dataDir="/data/solr/data/trunk/periodp">
      <property name="dih.config" value="dih-config-periodp.xml"/>
    </core>
    <core instanceDir="/data/solr/web/trunk/" name="periodp-swap" dataDir="/data/solr/data/trunk/periodp-swap">
      <property name="dih.config" value="dih-config-periodp.xml"/>
    </core>
  </cores>
</solr> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T09:48:41.597

您需要做的是复制您在从属服务器上的 solr 实例，并在`solrconfig.xml`. 最佳做法是`instanceDir`为每个核心设置不同的目录，因为通常每个核心都有自己的`schema.xml`和`solrconfig.xml`. 无论如何，您可以使用相同的 conf，只需将您配置`solr.xml`为指向相同`instanceDir`但不同`dataDir`的 ，您也可以像`dataDir`在您的配置中`solrconfig.xml`一样：

```
<solr persistent="true" sharedLib="lib">
    <cores adminPath="/admin/cores">
        <core name="core0" instanceDir="core">
            <property name="dataDir" value="/data/core0" />
        </core>
        <core name="core1" instanceDir="core">
            <property name="dataDir" value="/data/core1" />
        </core>
    </cores>
</solr> 
```

如果您当前有多个核心但只有一个`solrconfig.xml`.

slaves上的`solrconfig.xml`replication部分需要包含master的url，包括core name，当然每个core都不一样。但是您可以像这样使用占位符 ${solr.core.name} ：

```
<requestHandler name="/replication" class="solr.ReplicationHandler" >
    <lst name="slave">
        <str name="masterUrl">http://master_host:port/solr/${solr.core.name}/replication</str>
        <str name="pollInterval">00:00:20</str>
    </lst>
</requestHandler> 
```

事实上，像这样的一些属性`solr.core.name`会自动添加到[核心作用域中](http://wiki.apache.org/solr/CoreAdmin)，您可以在配置中引用它们。因此，如果您没有任何特定于核心的设置，则每个核心的复制部分都可以相同。

此外，您可以对具有以下配置的[主从](http://wiki.apache.org/solr/SolrReplication#enable.2BAC8-disable_master.2BAC8-slave_in_a_node)`enable.master`配置使用相同的配置，并`enable.slave`根据您想要执行的操作更改您分配给环境变量的值（true 或 false） 。我的意思是你可以使用同一个文件，但当然它会在不同的机器上，因为在同一台机器上拥有 master 和 slave 没有多大意义。

```
<requestHandler name="/replication" class="solr.ReplicationHandler" >
    <lst name="master">
        <str name="enable">${enable.master:false}</str>
        <str name="replicateAfter">commit</str>
    </lst>
    <lst name="slave">
        <str name="enable">${enable.slave:false}</str>
        <str name="masterUrl">http://master_host:8983/solr/${solr.core.name}/replication</str>
        <str name="pollInterval">00:00:60</str>
    </lst>
</requestHandler> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:37:46.920

是的，您需要在要复制的每个核心副本中拥有完全相同的文件副本。

要卸载更多的 solr 实例，我建议您有一个仅用于索引的主服务器和 2 个从主服务器复制的从服务器，用于查询您的文档。

# php - 点击功能上的PHP计数器按钮

> ID：13065345
> 
> 赞同：-4
> 
> 时间：2012-10-25T09:16:33.393
> 
> 标签：php, javascript, html

```
<?php
    $chance=$_COOKIE['chanceNo'];
    ?>
        <input length="2" type="text" name="chance" id="chance" readonly="readonly" value="<? echo $chance?>"/> 
```

我正在尝试创建一个 onlick 函数来减少机会。例如，当用户单击卡片/按钮时，文本框中的 $chance 应该减少。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:31:23.377

你可以通过两种方式做到这一点

*   一种方法是添加一个表单和一个带有 onclick 事件的按钮，并在每次单击时将带有 javascript 的表单提交到同一页面，减少 php 中的 cookie 值并显示该页面。

*   如果您不想重新加载页面，另一个使用 AJAX。您可以使用单独的文件来减少 cookie 值并在 ajax 响应中发送减少的 cookie 值。您可以使用 ajax 响应值填充文本框。

希望这可以帮助。

# c# - XML 验证与 XSD 失败，因为 'refname' 未声明，尽管 refname 不允许用于模式

> ID：13065348
> 
> 赞同：0
> 
> 时间：2012-10-25T09:16:36.293
> 
> 标签：c#, xsd, xml-validation

我正在尝试通过 C# 代码中的 XSD 验证 XML。但是它不断抛出**XmlSchemaValidationException**，即“*未声明'refname'属性。* ”。

进行验证的代码：

```
XmlReaderSettings xmlSettings = new XmlReaderSettings();
            xmlSettings.Schemas = new System.Xml.Schema.XmlSchemaSet();
            xmlSettings.Schemas.Add(null, @"\\[Network-drive path]\KVSchemaMod.xsd");
            xmlSettings.ValidationType = ValidationType.Schema;
            xmlSettings.DtdProcessing = DtdProcessing.Parse;
            xmlSettings.ValidationFlags = XmlSchemaValidationFlags.AllowXmlAttributes;
            xmlSettings.ValidationFlags = XmlSchemaValidationFlags.ProcessInlineSchema;
            xmlSettings.ValidationFlags = XmlSchemaValidationFlags.ReportValidationWarnings;
            XmlReader reader = XmlReader.Create(@"\\[Network-drive path]\KV_Article.xml", xmlSettings);

            // Parse the file.
            while (reader.Read()) ; 
```

XSD（删除了重复部分）：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:sql="urn:schemas-microsoft-com:mapping-schema">
<xs:annotation>
    <xs:appinfo>
        <sql:relationship name="ProductIdentifier"
        parent="tblKVProduct"
        parent-key="record_reference"
        child="tblKVProductIdentifier"
        child-key="record_reference" />
... (More SQL-mappings)
<xs:element name="ONIXMessage" sql:is-constant="1">
    <xs:complexType>
        <xs:sequence>
            <xs:element minOccurs="0" maxOccurs="unbounded" name="Product" sql:relation="tblKVProduct">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="1" maxOccurs="1" name="RecordReference" sql:field="record_reference" >
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:minLength value="0"/>
                                    <xs:maxLength value="32"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
...(More elements under Product) 
```

要验证的 XML（ONIX 标准）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ONIXMessage SYSTEM "http://www.editeur.org/onix/2.1/reference/onix-  international.dtd">
<ONIXMessage>
<Product>
    <RecordReference>0786606274</RecordReference>
    <NotificationType>03</NotificationType>
    <ProductIdentifier>
        <ProductIDType>01</ProductIDType>
        <IDTypeName>Kustantajan tuotenumero</IDTypeName>
        <IDValue>95535</IDValue></ProductIdentifier>
    <ProductIdentifier>
        <ProductIDType>02</ProductIDType>
        <IDValue>0786606274</IDValue></ProductIdentifier>
    <ProductIdentifier>
        <ProductIDType>03</ProductIDType>
        <IDValue>9780786606276</IDValue>
    </ProductIdentifier>
...(And more Product-fields) 
```

XML 也有一个 Header 标记作为 ONIXMessage 的第一个子项（紧随其后的所有 Product 标记也是 ONIXMessage 的子项），但由于架构中没有引用任何字段，我看不出它们如何导致这种特殊情况错误。

当我搜索错误时，我读到了 XmlSchemaElement.RefName 属性（[MSDN 定义](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaelement.refname.aspx)），它甚至明确表示“*如果包含元素是架构元素，则无法设置该值。* ”因为 XSD 就是这种情况，我不知道不明白为什么它会抛出一个关于它没有被声明的错误。

我一直试图找出这是否与缺少命名空间有关，但在我看来这应该不是问题，因为 XML 和 XSD 都没有。或者是否需要将名称空间强制到根元素上以验证 XML？

验证代码确实可以与另一组 XML/XSD 一起使用（尽管在这些方面的构建非常不同），但这可能只是一个侥幸，而错误实际上是我验证的方式吗？

只是为了完成，XML 中的 Header 标记：

```
<Header>
    <FromCompany></FromCompany>
    <FromPerson></FromPerson>
    <FromEmail></FromEmail>
    <AddresseeIdentifier>
        <AddresseeIDType></AddresseeIDType>
        <IDTypeName></IDTypeName>
        <IDValue></IDValue>
    </AddresseeIdentifier>
    <ToCompany></ToCompany>
    <ToPerson></ToPerson>
    <MessageNumber></MessageNumber>
    <SentDate></SentDate>
    <MessageNote></MessageNote>
</Header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:50:53.267

鉴于您没有提供完整的示例，因此无法重现您的问题。如果您想要基于推测以外的任何答案，您需要将您的架构和数据缩减为说明问题的最小示例，以便问题回答者可以重现问题并更详细地研究它。当然，经常会发生这样的情况，你的问题在这个过程中消失了，因为你在寻找问题的一个小例子的过程中发现出了什么问题。但这只是你必须承担的风险。

话虽如此，但我会继续推测。XMLSchemaElement 对象上的 RefName 属性几乎可以肯定是一个红鲱鱼。该消息听起来更像是您尝试验证的 XML 有一个名为`refname`某处的属性（在您省略的位中），并且您的 XSD 模式没有定义它。当然，您提供的 XSD 片段没有定义。

[但是，在http://www.editeur.org/onix/2.1/reference/onix-international.dtd](http://www.editeur.org/onix/2.1/reference/onix-international.dtd)（您在 XML 中指向）定义的词汇表确实定义`refname`为许多元素的属性（可能所有元素） ，虽然我没有单独检查每一个）。因此，ONIXMessage 元素可能包含具有`refname`属性的后代并非完全不可信。

实际上，这不仅不可信。这是肯定的。

您的 XML 指向的 DTD 为`refname`所有元素（至少是我见过的所有元素）上的属性提供了一个默认值，您的 XSD 模式声明似乎没有准备好。也就是说，模式验证器看到的文档的第一个开始标签不是`<ONIXMessage>`but `<ONIXMessage refname="ONIXMessage" shortname="ONIXmessage">`。

如果您不使用 www.editeur.org 提供的 XSD，最简单的方法可能是重新考虑该决定并使用 editeur.org 中的模式，而不是自己滚动。它包括 refname 和 shortname 属性的声明。如果您*正在*使用该架构，或者更确切地说是尝试使用它，则出现严重错误并且您的验证器没有找到或读取它。在这种情况下，您最好的方法是找出您的系统为什么没有找到正确的模式文档。

# c++ - C ++如何使用数组在类中创建子类

> ID：13065354
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:16:59.277
> 
> 标签：c++

C ++如何使用数组在类中创建子类

大家好，我还在学习 C++ 并在这里遇到一些问题。

基本上我有一个父类

让我们将此父类称为

```
Vehicle 
```

它有 2 个子类，假设它们是

`Car and Motorcycle`

我将创建一个车辆对象，假设车辆大小为 20

```
Vehicle veh[20] 
```

我将执行以下操作

```
string vType;

cout << "Please enter your vehicle Type:";
cin >> vType; 
```

所以我做一个比较 if (vType=="Car")

它将从子类返回 4 个轮子，但是我如何在 Car 和 Motorcycle 声明它的 4 个轮子和 2 个轮子，我知道我需要创建 2 个额外的 cpp 文件

```
class Car : public Vehicle
{
private:
int noOfWheels;
public:
computePrice();
} 
```

但是我如何将 noOfWheels 专门设置为 Car 为 4 和 Motorcycle 为 2。

接下来是棘手的部分..在知道它有多少个轮子之后

我需要为每个轮子存储一个数组

```
string wheel[4]; 
```

因为我知道汽车有 4 个轮子。

我如何提示 4 种类型并将其存储在一个数组中，并将所有这些都存储在一个名为 Vehicle 的对象中。

我可以使用 for 循环，这不是问题，我坚持的部分是我如何创建一个字符串数组并将 4 提示存储，然后存储到这个 Vehicle[0]

```
wheel 1:
wheel 2:
wheel 3:
wheel 4: 
```

当用户想要打印数据时，它将是

```
Vehicle[0]
Type: Car
Wheel: 4
Wheel[0] = Fine condition
Wheel[1] = Need to check again
Wheel[2] = Fine condition
Wheel[3] = Might need get repair 
```

**感谢所有帮助。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:22:48.107

首先，您的数组的声明是错误的。由于您正在处理多态类，因此您需要使用指针。

```
Vehicle* veh[20]; 
```

否则，您将拥有所谓的*对象切片*。这意味着即使您创建 a`Car`或 a在您将它们分配给数组时`Motorcycle`它们也会被转换为s 。`Vehicle`

“我如何将 noOfWheels 专门设置为 Car 为 4 和 Motorcycle 为 2。”

在构造函数中

```
class Car : public Vehicle
{
public:
    Car() : noOfWheels(4) { ... }
private:
    int noOfWheels;
    ...
};

class Motorcycle : public Vehicle
{
public:
    Motorcycle() : noOfWheels(2) { ... }
private:
    int noOfWheels;
    ...
}; 
```

但就我个人而言，我认为您根本不需要 noOfWheels 数据成员。由于每种车辆的轮子数量是固定的，因此浪费空间，因此您需要一个虚函数

```
class  Vehicle
{
public:
    virtual int noOfWheels() const = 0;
    ...
};

class Car : public Vehicle
{
public:
    virtual int noOfWheels() const { return 4; }
    ...
};

class Motorcycle  : public Vehicle
{
public:
    virtual int noOfWheels() const { return 2; }
    ...
}; 
```

'我如何创建一个字符串数组并将 4 提示存储到这个 Vehicle[0]'

我将再次使用构造函数来初始化车轮名称。

```
class Car : public Vehicle
{
public:
    Car(const std::string* w)
    { wheel[0] = w[0]; wheel[1] = w[1]; wheel[2] = w[2]; wheel[3] = w[3]; }
    virtual int noOfWheels() const { return 4; }
private:
    std::string wheel[4];
    ...
}; 
```

使用构造函数来初始化类。这就是他们的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:47:05.687

看起来答案已被接受，但我全部输入了，所以我会全部发布。我猜这是OOP的失败。

让我们假设所有车辆都有轮子。所有这些轮子都有一个条件。有些车辆的轮子比其他车辆多或少。

您需要将类的**公共**方面分成更高的顺序，分成基类。

您还需要组织您的类以与其他类组合以构建一个整体。

这里我们有一个轮子类，它有一个`condition`，它是一个字符串。您可以随时查询它的状况。

```
class Wheel 
{
  public:
    const std::string GetCondition() const { return mCondition; }
  private:
    std::string mCondition;
}; 
```

我们知道车辆会有轮子，所以我们将轮子容器存储在这里，以便通过**继承**在子类之间共享。

```
class Vehicle
{
  public:
    Vehicle(unsigned int wheelCount) { mWheels.resize(wheelCount, Wheel()); }
    virtual unsigned int GetWheelCount() { return mWheels.size(); }
    virtual const std::string GetWheelCondition(int wheelNumber)
    {
      return mWheels[wheelNumber].GetCondition();
    }
  protected:
    std::vector<Wheel> mWheels; // All vehicles have wheels.
}; 
```

汽车是*一种*。`Vehicle`因此它**继承**自`Vehicle`. 它继承了一个保存`Wheel`对象的成员。它还继承了有助于*查找车轮计数*和*通过索引获取车轮状态的方法。*这是您可以专攻课程的级别。和类都有轮子，它们具有相同的核心功能`Car`。`Motorbike`我们可以通过添加或重载方法来专门化该类。

```
class Car : public Vehicle
{
  public:
    Car() Vehicle(4) {}
    Car(unsigned int wheelCount) : Vehicle(wheelCount) {}
}

class Motorbike : public Vehicle
{
  public:
    MotorBike(unsigned int wheelCount) : Vehicle(wheelCount) {}
    void DoWheelie() { throw; }
} 
```

我们可以像这样使用这些对象，

```
Car car(4); // Car with 4 wheels. specialized constructor.
Car standardCar(); // Car with 4 wheels, as default constructor.
Car uberCar(42); // Car with 42 wheels.    
Motorbike bike(2); // Bike with 2 wheels.
Motorbike badBike(); // No default constructor defined! Will not compile!

car.GetWheelCount(); // 4
bike.GetWheelCount(); // 2

bike.DoWheelie(); // All good.
car.DoWheelie(); // NOPE! Method doesn't exist for this. 
```

关于多态性和堆分配的好处还有很多要说的，但我想我会留在这里。希望它有帮助。

# delphi - 如何忽略 Delphi QA 审计中的某些文件？

> ID：13065355
> 
> 赞同：0
> 
> 时间：2012-10-25T09:16:59.560
> 
> 标签：delphi, static-analysis

我正在使用Delphi XE中出色的**审计工具。**
它真的很有用，因为它发现了一些架构异味，违反编码规则......

但是，我没有找到任何方法来忽略某些文件。我有产生许多警告的第 3 方文件（从 XML 数据绑定自动生成）......然后报告被污染，因为我想忽略这些文件，完成后只看到 0 个警告。

**有什么方法可以忽略审计工具中的文件？**

# java - 调用 map 方法后 Java 7 文件通道未正确关闭

> ID：13065358
> 
> 赞同：5
> 
> 时间：2012-10-25T09:17:10.883
> 
> 标签：java, memory-management, java-7, filechannel

我正在开发一个 sc2replay 解析工具。[我在 MPQLIB http://code.google.com/p/mpqlib/](http://code.google.com/p/mpqlib/)之上构建它

不幸的是，该工具使用文件通道来读取 bzip 文件，并使用`map(MapMode.READ_ONLY, hashtablePosition, hashTableSize);`

调用该函数后，关闭文件通道不会在进程中释放文件。具体来说，我无法重命名/移动文件。

该问题出现在 Java 7 中，并且在 Java 6 上运行良好。

这是一个简单的代码片段来复制它：

```
 FileInputStream f = new FileInputStream("test.SC2Replay");
    FileChannel fc = f.getChannel();

    fc.map(MapMode.READ_ONLY, 0,1);

    fc.close();

    new File("test.SC2Replay").renameTo(new File("test1.SC2Replay")); 
```

注释掉 fc.map 将允许您重命名文件。

PS from here[我应该关闭 FileChannel 吗？](https://stackoverflow.com/questions/8066130/should-i-close-the-filechannel)

它指出您不需要同时关闭文件通道和文件流，因为关闭一个会关闭另一个。我也尝试关闭一个或两个，但仍然没有奏效。

在 Java 7 上使用 FileChannel.map 读取数据后重命名文件是否有解决方法，因为现在每个人似乎都有 Java 7？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:19:18.487

再会，

似乎 FileChannel.map 会导致 java 7 出现问题。如果使用 FileChannel.map，则无法再关闭该文件。

一个快速的解决方法是使用 FileChannel.map(MapMode.READ_ONLY, position, length)

您可以使用

```
ByteBuffer b = ByteBuffer.allocate(length); 
fc.read(b,position);
b.rewind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:38:36.980

这是一个[记录在案的错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4796385)。该错误报告涉及 Java 1.4，他们认为这是一个文档错误。关闭文件通道不会关闭底层流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T01:47:20.257

如果您使用 Sun JRE，您可以通过强制转换到他们的实现并告诉它自己释放来作弊。如果您不依赖正在关闭的文件或从不打算使用另一个 JRE，我只建议您这样做。

在某个时候，我希望这样的东西能成为适当的公共 API。

```
try (FileInputStream stream = new FileInputStream("test.SC2Replay");
     FileChannel channel = stream.getChannel()) {

    MappedByteBuffer mappedBuffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, 1);
    try {
        // do stuff with it
    } finally {
        if (mappedBuffer instanceof DirectBuffer) {
            ((DirectBuffer) mappedBuffer).cleaner().clean();
        }
    }
} 
```

# lotus-domino - 在 Domino 中使用 wsdl 使用 Web 服务

> ID：13065359
> 
> 赞同：1
> 
> 时间：2012-10-25T09:17:11.723
> 
> 标签：lotus-domino

我们在应用程序中大量使用 Web 服务 Consumers\Providors，包括 LS 和 java 设计元素。

我有一个 Web 服务 (wcf) wsdl，我试图将它导入到 LotusScript Web Consumer 设计元素中，保存时出现以下错误：

非会员：INVOKE

...在线如下所示。

Function GetCopyDestinations(service As XSD_STRING, ocsCode As XSD_STRING, Fault1 As InteropErrorInfoStruct_n1) As ArrayOfInteropMessageDestination_n1 Set GetCopyDestinations = Service.Invoke("GetCopyDestinations", service, ocsCode, Fault1) <<<<=====ERROR ON THIS LINE End Function

我认为这是 wsdl --> Web 服务类转换器不喜欢 wsdl 的结构...？我与创建我们正在使用的服务的开发人员一起工作，因此我可以更改结构，但是，由于上面的错误，我不确定从哪里开始。我认为这意味着它认为对象服务没有方法 .Invoke()。

我查看了文件：lsxsd.lss，其中包括 LS Web 服务元素。LS Web 服务中的“存根”类继承自 lsxsd.lss 文件中的 PortTypeBase，PortTypeBase 没有 invoke() 方法，所以我不太确定该方法是从哪里继承的。我们成功使用的其他 LS Web 服务具有完全相同的结构，因此看起来这是正确的。

我唯一能想到的就是让我的同事将 wsdl 剥离成裸露的骨头，然后添加 1 个方法，看看它是否导入，添加另一个，看看它是否导入，等等。

作为旁注，我尝试将 ws 导入 java 使用者，它可以正常导入。然后，我以与我为所有其他 java 消费者服务完全相同的方式构建存根，它似乎成功地完成了。当我运行我的测试工具代理时，会创建存根，但在尝试运行任何操作时会出错：

java.rmi.RemoteException：找不到服务的操作描述

我的意思是，它在 wsdl 文件中找不到操作，或者类似的东西......？如果我在运行时输出，则端点 url 和 PortName 显示正确。

作为对此的附注......我在上面尝试使用的服务，我们现在有一个正在生产中的版本，它在一个 LS 网络消费者中，但是新的已经添加了新的操作。为了进行完整性检查，然后我将“实时” wsdl ...我们知道可以工作...导入 LS 网络消费者设计元素并运行测试工具代理，按预期工作...很好。然后我将“live”wsdl 导入到 java 消费者设计元素中。运行服务时，我们得到同样的错误......！？

java.rmi.RemoteException：找不到服务的操作描述

所以现在我真的，真的很困惑。我想在这里发布 wsdl，但我认为 NDA 等不允许我，但如果有任何帮助，我将按如下方式构建存根：

ITKInteropV10Stub 存根 = (ITKInteropV10Stub) new ITKInteropServiceV10_ServiceLocator().getITKInteropV10();

这是与我使用的所有其他 java web 服务类似的存根构造函数模式。

我一直在谷歌搜索\搜索几天，搜索上面列出的错误，我真的很难找到前进的道路。

理想情况下，解决 LS Web 消费者中的导入问题效果最好，因为后端逻辑当前位于将访问此服务的 LS 脚本库中。如果我让它在 java 中工作，那也很好，它只是使从 Web 服务到 LS 库中的数据检索变得更加复杂。

任何意见\建议都会张开双臂欢迎！

问候

缺口

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:35:43.910

LotusScript 不区分大小写。您有一个名为“服务”的 XSD_STRING 变量和另一个名为“服务”的对象，看起来它可能是一个 NotesWebServiceEngine 对象？（内部 LS 对象）。

# html - Magento wordpress 标题 cms 块

> ID：13065361
> 
> 赞同：2
> 
> 时间：2012-10-25T09:17:14.707
> 
> 标签：html, wordpress, magento, php

我有一个小问题。我通过 fishpig 模块在我的 magento 商店中包含了一个 wordpress 博客。这很好用，但我想包括的是通过博客上的静态 cms 块的标题选项。我想我需要在主页博客的 phtml 中进行一些调整。app/design/frontend/base/default/template/wordpress/homepage.phtml

这是当前代码：

```
<div class="page-title blog-title <?php if (!$this->isFirstPage()): ?>not-<?php endif; ?>first-page<?php if ($this->isFirstPage() && $this->getTagLine()): ?> with-tagline<?php endif; ?>">
<h1><?php echo $this->escapeHtml($this->getBlogTitle()) ?></h1>
</div>
<?php if ($this->isFirstPage() && $this->getTagLine()): ?>
<p class="blog-desc blog-tag-line"><?php echo $this->escapeHtml($this->getTagLine()) 
?></p>
<?php endif; ?>
<div class="blog-home">
<?php echo $this->getPostListHtml() ?>
</div> 
```

我玩弄了以下代码行，但我无法让它工作：

```
echo $this->getLayout()->createBlock('cms/block')->setBlockId('example_block')->toHTML(); 
```

任何解决方案都会很棒！！

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:22:20.967

You can display static blocks on the blog page using this code

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('example_block')->toHTML();?> 
```

But first you need to create a static block in the admin panel. Admin-> Cms-> Static blocks. Then, after you have specified for the static block title, identifier, status and content, you'll need to replace the block identifier in your code to the identifier of the block that you created in the admin.

For example, you have created a block with identifier "blog_header" means the code to show this block on frontend, will be the

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('blog_header')->toHTML();?> 
```

# java - 日期格式的java正则表达式提取错误信息

> ID：13065364
> 
> 赞同：1
> 
> 时间：2012-10-25T09:17:26.670
> 
> 标签：java, regex, date

我正在使用正则表达式来确定输入日期的格式。这是我正在使用的模式之一

```
 ^((18[5-9]|19[0-9]|20[0-9])\\d)(0?[1-9]|1[012])(0?[1-9]|[12][0-9]|3[01])$ 
```

所以约束是在 1850 和 2099 之间有年份。例如，如果我在从中提取年、月和日时将此字符串作为日期 20011212 传递，这就是我得到的：年：2001，月：200，天：12。任何想法为什么？

```
 pattern = Pattern.compile(PATTERN);
    matcher = pattern.matcher(dateString);
    if (matcher.matches()){
       matcher.reset();
       if (matcher.find()){
          Integer.parseInt(matcher.group(1));
          Integer.parseInt(matcher.group(2));
          Integer.parseInt(matcher.group(3));
       }
    } 
```

代码被简化了，但即使在这个简化的版本上，它也会返回错误的结果。感谢您提供任何建议/解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:27:48.310

在正则表达式中，您放入的所有内容`(...)`都是一个捕获组。一年中有两个组，它们都是捕获组：

```
group(1) = ((18[5-9]|19[0-9]|20[0-9])\\d)
group(2) = (18[5-9]|19[0-9]|20[0-9])
group(3) = (0?[1-9]|1[012])
group(4) = (0?[1-9]|[12][0-9]|3[01]) 
```

你也可以像这样使用非捕获块：`(?:...)`

所以你的模式应该是：

```
^((?:18[5-9]|19[0-9]|20[0-9])\\d)(0?[1-9]|1[012])(0?[1-9]|[12][0-9]|3[01])$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T09:28:30.460

第二组是年份的前三位，使用非捕获组：

```
^((?:18[5-9]|19[0-9]|20[0-9])\\d)(0?[1-9]|1[012])(0?[1-9]|[12][0-9]|3[01])$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T09:29:17.453

将您的正则表达式更改为`^(18[5-9]\\d|19[0-9]\\d|20[0-9]\\d)(0?[1-9]|1[012])(0?[1-9]|[12][0-9]|3[01])$`. 您在创建第二个匹配组的年份的前 3 位数字周围有太多括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T09:29:52.613

这是因为您在 year 正则表达式中有一个捕获组（一对括号）。您可以：

*   计算左括号并选择正确的括号。如果您将来要更改正则表达式，则很难维护。
*   使用命名组。并非所有的正则表达式都支持这一点。我认为Java是其中之一。
*   使用非捕获组。

非捕获组`?:`在组的开头表示为：

```
^((?:18[5-9]|19[0-9]|20[0-9])\\d)(0?[1-9]|1[012])(0?[1-9]|[12][0-9]|3[01])$
   ^^--- here 
```

请注意，环视 ( `(?= ... )`, ...) 也是非捕获的。

# angularjs - Firebase 回调和 AngularJS

> ID：13065367
> 
> 赞同：4
> 
> 时间：2012-10-25T09:17:44.203
> 
> 标签：angularjs, firebase

我正在结合 Firebase 学习 AngularJS。我真的在`on`努力应对 Firebase 的回调并尝试更新`$scope`...

```
$apply already in progress <----

    var chat = angular.module('chat', []);
   chat.factory('firebaseService', function ($rootScope) {
  var firebase = {};
  firebase = new Firebase("http://gamma.firebase.com/myUser");
  return {
    on: function (eventName, callback) {
      firebase.on(eventName, function () {  
        var args = arguments;
        $rootScope.$apply(function () {
          callback.apply(firebase, args);
        });
      });
    },
    add: function (data) {
      firebase.set(data);
    }
  };
});

chat.controller ('chat', function ($scope, firebaseService) {
    $scope.messages = [];
    $scope.username;
    $scope.usermessage;              
    firebaseService.on("child_added",function(data){        
        $scope.messages.push(data.val());       
    });
    $scope.PushMessage = function(){
        firebaseService.add({'username':$scope.username,'usermessage':$scope.usermessage});   
    };
}); 
```

如果我取出`$rootscope.$apply`它，它会按预期工作，但不会在页面加载时更新 DOM。

谢谢！

**更新**

解决方案 1 - 删除`$rootscope.$apply`服务并注入并应用`$timeout`到控制器：

```
firebaseService.on('child_added',function(data){        
    $timeout(function(){
        $scope.messages.push(data.val());                       
    },0);
}); 
```

解决方案 2 - 实施“SafeApply”方法（感谢[Alex Vanston](http://coderwall.com/p/ngisma)）：

```
$scope.safeApply = function(fn) {
        var phase = this.$root.$$phase;
        if(phase == '$apply' || phase == '$digest') {
            fn();
        } else {
            this.$apply(fn);
        }
    }; 
```

尽管这些都可以工作并且代码不多，但我觉得它们太hacky了。是不是有一些官方的 Angular 方式来处理异步回调？

我为类似情况找到的另一个很好的例子：[HTML5Rocks - AngularJS and Socket.io](http://www.html5rocks.com/en/tutorials/frameworks/angular-websockets/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T08:30:52.233

解决方案 1 - 删除服务上的 $rootscope.$apply 并将 $timeout 注入并应用到控制器：

```
firebaseService.on('child_added',function(data){        
    $timeout(function(){
        $scope.messages.push(data.val());                       
    },0);
}); 
```

解决方案 2 - 实施“SafeApply”方法（感谢 Alex Vanston）：

```
$scope.safeApply = function(fn) {
        var phase = this.$root.$$phase;
        if(phase == '$apply' || phase == '$digest') {
            fn();
        } else {
            this.$apply(fn);
        }
    }; 
```

# nodes - 如何强制两个节点并排？

> ID：13065370
> 
> 赞同：7
> 
> 时间：2012-10-25T09:17:53.440
> 
> 标签：nodes, graph-theory, graphviz, dot

我使用`dot -Tsvg`.

这是我制作的点语言文件：

```
digraph genealogy {
    size = "7,7";
    node [fontsize = "10", shape = "box", style="filled", fillcolor="aquamarine"];
    p1 [ fillcolor="aquamarine", label="node" ];
    p2 [ fillcolor="aquamarine", label="node" ];
    p3 [ fillcolor="aquamarine", label="node" ];
    p4 [ fillcolor="aquamarine", label="node" ];
    p5 [ fillcolor="aquamarine", label="node" ];
    p6 [ fillcolor="aquamarine", label="node" ];
    p7 [ fillcolor="aquamarine", label="node" ];
    p8 [ fillcolor="aquamarine", label="node" ];
    p9 [ fillcolor="aquamarine", label="node" ];
    p11 [ fillcolor="aquamarine", label="node" ];
    p12 [ fillcolor="aquamarine", label="node" ];
    p13 [ fillcolor="aquamarine", label="node" ];
    p16 [ fillcolor="aquamarine", label="node" ];
    p17 [ fillcolor="aquamarine", label="node" ];
    b1 [ shape = "point", style="filled", fillcolor="white" ];
    p3 -> b1 [arrowhead = "none", color="red"];
    b2 [ shape = "point", style="filled", fillcolor="white" ];
    p2 -> b2 [arrowhead = "none", color="red"];
    p3 -> b2 [arrowhead = "none", color="red"];
    b3 [ shape = "point", style="filled", fillcolor="white" ];
    p4 -> b3 [arrowhead = "none", color="red"];
    p5 -> b3 [arrowhead = "none", color="red"];
    b4 [ shape = "point", style="filled", fillcolor="white" ];
    p6 -> b4 [arrowhead = "none", color="red"];
    p11 -> b4 [arrowhead = "none", color="red"];
    b2 -> p1 [arrowhead = "onormal", color="red"];
    b3 -> p2 [arrowhead = "onormal", color="red"];
    b3 -> p6 [arrowhead = "onormal", color="red"];
    b3 -> p7 [arrowhead = "onormal", color="red"];
    b4 -> p8 [arrowhead = "onormal", color="red"];
    b4 -> p9 [arrowhead = "onormal", color="red"];
    b1 -> p12 [arrowhead = "onormal", color="red"];
    b1 -> p13 [arrowhead = "onormal", color="red"];
    b1 -> p16 [arrowhead = "onormal", color="red"];
    p4 -> p5 [dir="none", arrowhead = "none",  color="blue"];
    p7 -> p17 [dir="none", arrowhead = "none",  color="blue"];
} 
```

这是结果：

![](../Images/4a21fa5c05c56831cc56dd88c4d8e23b.png)

我想强制由蓝线连接的节点并排（水平），而不是彼此下方或另一个疯狂的位置。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T12:14:42.233

您可以使用 rank 属性。设置 rank="same" 或 rank="source" 可能会有帮助。这会将两个节点置于相同等级或最低等级。这是其中一种可能性：

```
digraph genealogy {
    size = "7,7";
    node [fontsize = "10", shape = "box", style="filled", fillcolor="aquamarine"];

    subgraph _1 {
     rank="same";
     p4 [ fillcolor="aquamarine", label="node" ];
     p5 [ fillcolor="aquamarine", label="node" ];
     p4 -> p5 [dir="none", arrowhead = "none",  color="blue"];
}
    subgraph _2 {   
    rank="source";  
    p7 [ fillcolor="aquamarine", label="node" ];
    p17 [ fillcolor="aquamarine", label="node" ];
    p7 -> p17 [dir="none", arrowhead = "none",  color="blue"];
}

p1 [ fillcolor="aquamarine", label="node" ];
p2 [ fillcolor="aquamarine", label="node" ];
p3 [ fillcolor="aquamarine", label="node" ];
p6 [ fillcolor="aquamarine", label="node" ];
p8 [ fillcolor="aquamarine", label="node" ];
p9 [ fillcolor="aquamarine", label="node" ];
p11 [ fillcolor="aquamarine", label="node" ];
p12 [ fillcolor="aquamarine", label="node" ];
p13 [ fillcolor="aquamarine", label="node" ];
p16 [ fillcolor="aquamarine", label="node" ];
b1 [ shape = "point", style="filled", fillcolor="white" ];
p3 -> b1 [arrowhead = "none", color="red"];
b2 [ shape = "point", style="filled", fillcolor="white" ];
p2 -> b2 [arrowhead = "none", color="red"];
p3 -> b2 [arrowhead = "none", color="red"];
b3 [ shape = "point", style="filled", fillcolor="white" ];
p4 -> b3 [arrowhead = "none", color="red"];
p5 -> b3 [arrowhead = "none", color="red"];
b4 [ shape = "point", style="filled", fillcolor="white" ];
p6 -> b4 [arrowhead = "none", color="red"];
p11 -> b4 [arrowhead = "none", color="red"];
b2 -> p1 [arrowhead = "onormal", color="red"];
b3 -> p2 [arrowhead = "onormal", color="red"];
b3 -> p6 [arrowhead = "onormal", color="red"];
b3 -> p7 [arrowhead = "onormal", color="red"];
b4 -> p8 [arrowhead = "onormal", color="red"];
b4 -> p9 [arrowhead = "onormal", color="red"];
b1 -> p12 [arrowhead = "onormal", color="red"];
b1 -> p13 [arrowhead = "onormal", color="red"];
b1 -> p16 [arrowhead = "onormal", color="red"];

} 
```

![输出在这里](../Images/de009ea57965be2e6e79413eabc52202.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-06T15:14:59.543

只是为了缩短另一个答案：将您想要的节点并排放置在带有`rank="same"`选项的子图中。

前：

```
digraph G {
A, B
    //subgraph {
    //  rank="same"
        C, D
    //}
A -> B -> C -> D
} 
```

[![前](../Images/6e2c712b421eb318c1d0c06510b2102a.png)](https://i.stack.imgur.com/KR2IW.png)

后：

```
digraph G {
A, B
    subgraph {
        rank="same"
        C, D
    }
A -> B -> C -> D
} 
```

[![后](../Images/15166a5373c5ed6ab06271b286b4316e.png)](https://i.stack.imgur.com/SUaQe.png)

# asp.net - 如何将 linq 存储过程的结果转换为标量标签

> ID：13065373
> 
> 赞同：0
> 
> 时间：2012-10-25T09:18:13.160
> 
> 标签：asp.net, linq

我创建了一个 aspx 页面，并将名称传递给一个文本框，该文本框必须显示一条消息，指出`user`数据库中存在。为此，我使用了一个 linq 并在其中编写了一个存储过程（`Select username from logintest where username=@name`）。

我希望将存储过程的输出转换为标签。

谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:23:07.697

我想你会想要：

```
lblUsername.Text = (Select username from logintest where username=@name).FirstOrDefault().ToString(); 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/bb340482.aspx](http://msdn.microsoft.com/en-us/library/bb340482.aspx)

并且：[Linq FirstOrDefault](https://stackoverflow.com/questions/8886796/linq-firstordefault)

有关更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:22:46.110

尝试使用任何。代码示例：

```
logintestDataContext dct = new logintestDataContext();
string userName = "john";

var logintest = (from lt in dct.logintest 
                  where lt.username.Contains(userName)
                  select lt
                 );

lblUserExist.Text = logintest.Any().ToString(); 
```

让我们解释一下代码：

在 logintestDataContext 是表 logintest

```
logintestDataContext dct = new logintestDataContext(); 
```

使用 Linq，var logintest 由表 logintest 填充，其中用户名类似于字符串 userName（在本例中为 john）

```
string userName = "john";
var logintest = (from lt in dct.logintest 
                  where lt.username.Contains(userName)
                  select lt
                 ); 
```

如果 logintest 中有结果，则标签文本变为 true。如果没有结果标签文本变为假。

```
lblUserExist.Text = logintest.Any().ToString(); 
```

# notifications - 在应用程序开发中更改 Windows 8 Toast 通知声音

> ID：13065374
> 
> 赞同：1
> 
> 时间：2012-10-25T09:18:26.610
> 
> 标签：notifications, windows-8, microsoft-metro, toast, windows-applications

我正在使用 JavaScript 和 Html 中的 toast 开发用于消息传递通知的 Windows 8 应用程序。由于默认吐司声音是“默认”，但我想将其转换为“短信”声音。我还接受用户的输入，以了解在通知期间要显示的内容。

我的 HTML 代码看起来像

```
<div>String to display <input type="text" size="20" maxlength="20"      
id="inputString" /></div>
<button id="inputButton" class="action">button</button> 
```

javascript代码看起来像

```
(function () {
"use strict";
var page = WinJS.UI.Pages.define("/html/home.html", {
    ready: function (element, options) {
        document.getElementById("inputButton").addEventListener("click", noti, false);
 ...

function noti(e) {
    var targetButton = e.currentTarget; 
```

现在我被困现在该怎么办..

我有来自示例 sdk 的以下代码，我无法适应

```
 var toastSoundSource = targetButton.id;

    // Get the toast manager for the current app.
    var notificationManager = Notifications.ToastNotificationManager;

    var content = ToastContent.ToastContentFactory.createToastText02();

    content.audio.content = ToastContent.ToastAudioContent[toastSoundSource]; 
```

我也读过一些博客说它可以通过使用它来完成

```
toast.Audio.Content = ToastAudioContent.Silent; 
```

我想我只是把事情搞砸了。请尽快提供帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:46:33.037

我一直在检查你的代码，确实你的问题在这里：

```
var toastSoundSource = targetButton.id; // you are getting the id of your button, however your button ID is not a valid index for the sounds we have available in Win8.
content.audio.content = ToastContent.ToastAudioContent[toastSoundSource]; //so when your code arrive here, nothing changes, and Winjs keeps using the DEFAULT sound... 
```

为了解决您遇到的问题...您可以做两件事，将按钮 id 更改为“sms”或通过以下方式之一实现您的代码：

第一 - 强制窗口使用短信（如果这是你想使用的唯一声音......

```
 function noti(e) {
    var targetButton = e.currentTarget;
    var toastSoundSource = targetButton.id;
    // Get the toast manager for the current app.
    var notificationManager = Notifications.ToastNotificationManager;
    var content = ToastContent.ToastContentFactory.createToastText02();
    content.audio.content = ToastContent.ToastAudioContent.sms; // force system to use SMS sound
    var toast = content.createNotification();
    notificationManager.createToastNotifier().show(toast);
} 
```

第二 - 如果您有更多可用选项，您可以创建一个 if/else，而不是代码可以根据单击的按钮在声音上选择...

```
function noti(e) {
    var targetButton = e.currentTarget;
    var toastSoundSource = targetButton.id;
    // Get the toast manager for the current app.
    var notificationManager = Notifications.ToastNotificationManager;
    var content = ToastContent.ToastContentFactory.createToastText02();

    if ( toastSoundSource == "inputButton") 
       content.audio.content = ToastContent.ToastAudioContent.sms;
    else 
           content.audio.content = ToastContent.ToastAudioContent.im

    var toast = content.createNotification();
    notificationManager.createToastNotifier().show(toast);
} 
```

我希望这有帮助 ：）

# objective-c - 如何在 Xcode 中为所有相同的方法调用添加断点？

> ID：13065375
> 
> 赞同：2
> 
> 时间：2012-10-25T09:18:30.100
> 
> 标签：objective-c, xcode

例如，我想为所有`[super dealloc];`调用添加断点。有没有什么快速的方法可以为所有**相同**的方法调用添加断点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:24:05.183

仅出于调试目的，您可以创建 NSObject 类别并在那里重新定义这些方法。

```
@implementation NSObject (debug)
-(void) dealloc {

}
@end 
```

这同样适用于其他类，但不能保证适用于 iOS 类，因为某些内部类别可能会干扰您的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:23:55.377

我不确定是否有快速的方法，但您可以调整 NSObject dealloc 方法，并在其上设置断点。

# magento - Magento：addColumn 选项以提供管理网格标识符

> ID：13065378
> 
> 赞同：2
> 
> 时间：2012-10-25T09:18:34.990
> 
> 标签：magento

我正在尝试在我的自定义报告管理 html 网格视图中的列中添加一个标识符，以便我可以使用 Javascript 操作背景颜色。

```
$this->addColumn('qty_ordered', array(
    'header'    => Mage::helper('report')->__('Qty'),
    'sortable'  => false,
    'filter'    => false,
    'type'      => 'number',
    'index'     => 'qty_ordered'
)) 
```

所以我尝试添加以下选项无济于事：

```
'identifier'    => 'qtytest'
'id'            => 'qtytest' 
```

如果有人知道可以做到这一点的选项，那就太好了。

此外，我似乎找不到找到 $column 选项的好资源。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:31:34.377

`Mage_Adminhtml_Block_Widget_Grid::addColumn`执行以下操作：

```
public function addColumn($columnId, $column)
    {
        if (is_array($column)) {
            $this->_columns[$columnId] = $this->getLayout()->createBlock('adminhtml/widget_grid_column')
                ->setData($column)
                ->setGrid($this);
        } 
```

这意味着它使用类创建块：`Mage_Adminhtml_Block_Widget_Grid_Column`所以，evrika，这个类包含您需要的所有文档。

看起来`Mage_Adminhtml_Block_Widget_Grid_Column::getCssClass`您似乎可以使用以下命令指定一个 css 类：

```
'column_css_class'    => 'your_css_class_here' 
```

如果您希望自定义逻辑显示数据，您始终可以为您的列使用自定义渲染器。

# emacs - 禁止 emacs 在新框架中打开 org-mode 菜单

> ID：13065387
> 
> 赞同：4
> 
> 时间：2012-10-25T09:18:56.883
> 
> 标签：emacs, org-mode

我的 emacs 的 org-mode 在新框架中显示菜单（例如 TODO 菜单，其选项在按 Cc Ct 后出现）。打开 pdf 文件也是如此（它也会在新框架中打开它们）。

如何告诉 emacs 在与新缓冲区相同的帧中打开它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:55:39.943

对于打开文件，您可以自定义`org-link-frame-setup`变量。它的帮助 ( `C-h v`) 去：

> **org-link-frame-setup**是在“org.el”中定义的变量。
> 
> 为以下链接设置框架配置。使用 Emacs 跟踪链接时，在另一个窗口或框架中显示此链接通常很有用。此变量可用于为不同类型的链接进行设置。
> 
> 对于 FILE，使用任何
> **`find-file`**
> `find-file-other-window`
> `find-file-other-frame`

因此，您的`.emacs`文件中应该执行以下操作（它保留其他所有内容的默认值，但欢迎任何了解 elisp 的人改进此代码）：

```
(setq org-link-frame-setup (quote ((vm . vm-visit-folder-other-frame)
               (vm-imap . vm-visit-imap-folder-other-frame)
               (gnus . org-gnus-no-new-news)
               (file . find-file)
               (wl . wl-other-frame)))
  ) 
```

# c# - SQL Server CE 数据库不影响插入和更新

> ID：13065388
> 
> 赞同：0
> 
> 时间：2012-10-25T09:19:00.683
> 
> 标签：c#, .net, sql-server, sql-server-ce

我正在编写 C# Forms 应用程序并使用普通的 SQL Server CE 数据库（`.sdf`）。

发生的事情是没有更改写入数据库。例如，当尝试添加一行时，它永远不会出现在数据库表中。但是当做选择时，它似乎确实存在！

这里有什么问题 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:26:13.690

当您使用`|DataDirectory|`或仅使用相对路径时，您的项目文件夹中有 SDF 文件的 2 个副本。

您的应用程序正在使用`..\Root\bin\debug`.

您的工具（VS 服务器资源管理器）正在查找`..\Root`.

# wpf - MediaElement 不播放 mp3

> ID：13065389
> 
> 赞同：0
> 
> 时间：2012-10-25T09:19:04.700
> 
> 标签：wpf

我正在尝试使用 MediaElement 控件播放 mp3 文件。

如果我将此控件直接放在我的主 wpf 窗口上，它就可以工作。

但现在我想创建一个类并播放 mp3。所以我有一堂课：

```
 class Player
    {
        private MediaElement media;
        public MediaElement MyMedia
        {
            get { return media; }
            set { media = value; }
        }

        public Player()
        {
            media = new MediaElement();
            media.LoadedBehavior = MediaState.Manual;
            media.Source = new Uri(@"C:\Users\DELL\Downloads\Music\yumeji.mp3",UriKind.RelativeOrAbsolute);
            media.Play();
        }

    } 
```

但它不起作用。

编辑：

我用这个代码，

```
 MediaPlayer m = new MediaPlayer();
  m.Open(new Uri(@"C:\Users\DELL\Downloads\Music\yumeji.mp3"));
  m.Play(); 
```

当我使用它时，它会播放 mysound 3 秒然后停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:31:35.763

为了工作，MediaElement 必须是逻辑树的一部分。

确实，如果您将其添加到面板中，例如，它将起作用

```
Player p = new Player();
myGrid.Children.Add(p.MyMedia); 
```

这就是为什么如果你把它放在一个`Window`

但是，如果您只是想播放 mp3 而不将其添加到逻辑树中，那么您可以使用[naudio library](http://naudio.codeplex.com/wikipage?title=MP3)来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:12:24.283

您的问题是您需要保留对 MediaPlayer 的引用。这是垃圾收集。

# c# - Mono中的IEnumerable接口和Skip方法

> ID：13065392
> 
> 赞同：2
> 
> 时间：2012-10-25T09:19:20.793
> 
> 标签：c#, mono, ienumerable, ilist

我正在寻找[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)接口的[Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx)方法。

[IList](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)公共`IEnumerable`接口，所以我认为我能够访问该方法。

无论如何，以下代码无法在 Mono 上编译：

```
private static void SkipFirst(IList<float> list)
{
    IList<float> skippedFirst = list.Skip(1);
} 
```

这是错误：

> 错误 CS1061：类型`System.Collections.Generic.IList<float>' does not contain a definition for`Skip' 并且找不到扩展方法`Skip' of type` System.Collections.Generic.IList'（您是否缺少 using 指令或程序集引用？）

我究竟做错了什么？如何从`IList`接口访问该方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:30:46.010

`Skip`是一个扩展方法，所以它实际上不是任何集合类的方法。相反，它是由 Linq 定义的。您需要添加对 Linq 的引用： `using System.Linq;`

`list.Skip(1)`只是语法糖，它实际上被转换为`Enumerable.Skip(list, 1)`

此外，`Skip`返回`IEnumerable<T>`这意味着您需要使用

```
IList<float> skippedFirst = list.Skip(1).ToList(); 
```

或者

```
IEnumerable<float> skippedFirst = list.Skip(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:22:27.483

1.  你忘记`using System.Linq`了你的用法。
2.  Skip 是 LINQ 方法，因此您需要在使用 skip with`ToList()`方法后转换为列表。

最终结果：

```
using System.Linq;

// some code

private static void SkipFirst(IList<float> list)
{
    IList<float> skippedFirst = list.Skip(1).ToList();
} 
```

# php - magpierss 解析后从 utf-8 xml 返回垃圾文本

> ID：13065402
> 
> 赞同：0
> 
> 时间：2012-10-25T09:20:02.647
> 
> 标签：php, xml, encoding, magpie

我一直在使用 MagpieRSS 从 xml 文件中获取提要。XML 文件采用 UTF-8 字符编码 ( `language = 'ja,jp'`)。

但是在解析 xml 之后，Magpie 返回垃圾字符串而不是日文字符。

如何告诉 Magpie 返回 UTF-8 格式以获取我需要的正确日文字符？

# android - Windows Server 2008 上的真正小型消息代理 (RSMB)

> ID：13065404
> 
> 赞同：0
> 
> 时间：2012-10-25T09:20:11.937
> 
> 标签：android, amazon-web-services, windows-server-2008, push-notification, messagebroker

我想问一下如何在 Windows Server 2008 上使用 RSMB。我使用 amazon 作为服务器。我使用 android 作为客户端

当我尝试将我的 mqtt 客户端连接到服务器时。发生错误。

我使用基于此链接的简单通知。[http://tokudu.com/2010/how-to-implement-push-notifications-for-android/](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)

当我在本地主机中使用时它工作正常。但是当我尝试连接到真正的服务器时它不会工作。这是日志。

```
10-25 14:26:24.820: I/DemoPushService(3952): Starting service...
10-25 14:26:24.820: I/DemoPushService(3952): Connecting...
10-25 14:26:44.730: I/dalvikvm(3952): threadid=3: reacting to signal 3
10-25 14:26:44.750: I/dalvikvm(3952): Wrote stack traces to '/data/anr/traces.txt' 
```

当我在客户端启动服务时发生此错误。

之前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:11:24.903

怀疑这是你的问题，但我可能会建议使用 Eclipse Paho java jar 而不是旧的 wmqtt.jar。还可以使用 mqttSample.jar MQTT 测试实用程序来验证您的配置。它是 IA92 下载的一部分[http://www-01.ibm.com/support/docview.wss?uid=swg24006006](http://www-01.ibm.com/support/docview.wss?uid=swg24006006)

这是 mqttSample.jar 测试实用程序的屏幕截图

![th](../Images/43b6ed3eeba1f4fa781d71f5e7ca0c9f.png)

# linux - 将逗号分隔的数字模式匹配为字符串

> ID：13065406
> 
> 赞同：2
> 
> 时间：2012-10-25T09:20:18.840
> 
> 标签：linux, bash, shell, bash4

如何为此进行模式匹配：4,7,9....n - 逗号分隔的数字字符串作为用户输入？我为此使用了 case 语句，我相信，case 宁愿使用模式匹配而不是正则表达式。这是用户得到的：

```
Do you want to delete any of these?
     [ 1 ]   launch-EOsgR4
     [ 2 ]   launch-SWZQdJ
     [ 3 ]   launch-tHAdIm
     [ 4 ]   launchd-235.z4KTVx
     [ 5 ]   launchd-257.nM2wOZ
     [ 6 ]   progress.log
     [ 7 ]   ssh-8pISGGnlZ5
----------------------------------------
Single: 4; Multiple: 2,3; Range: 4..7
a to delete all; n to cancel and exit
----------------------------------------
( [1][2][3][4][5][6][7] | a | n ): 
```

而且，如上所示，用户可以选择单个数字（简单），范围：6..9（也不是那么难）或多个：3,5,6（使用“单个数字”有点难）选项）。这是我到目前为止所做的......

```
#!/usr/bin/env bash

NL=$(echo -e "\033[0;0m")
BD=$(echo -e "\033[0;1m")
ERR=$(printf "\n%-25s" "$(echo -e "\033[1;31m[ ERROR ]\033[0m")")
WRN=$(printf "\n%-25s" "$(echo -e "\033[1;33m[ WARN  ]\033[0m")")

ls /tmp | tail -n9 > list_of_file
s=$(printf "%-40s" "-")

function lstFile()
{
    local file=$1
    if [[ -s $file ]]
    then
        LINES=( $(cat $file) ); echo ""
        for ix in ${!LINES[@]}
        do
            printf "%-5s%-14s%s\n" "" "${BD}[ $(( ix+1 )) ]" "${LINES[$ix]}${NL}"
        done
   else
       exit 0
   fi

   LST=$(echo ${!LINES[@]}|awk -v ORS=']' '{for (i=1; i<=NF; i++) print "["($i+1)}')
}

function delOpt()
{
    echo "${s// /-}"
    echo -e "Single: 4; Multiple: 2,3; Range: 4..7"
    echo -e "${BD}a${NL} to delete all; ${BD}n${NL} to cancel and exit"
    echo "${s// /-}"
    echo -n "( $1 | a | n ): "
}

echo -e "\nDo you want to delete any of these?"
lstFile list_of_file

ANS=
until [[ "${ANS}" == "N" || "${ANS}" == "n" || "${ANS}" == "e" ]]
do
    delOpt $LST
    read ANS && echo ""

    ANS=$( tr '[:upper:]' '[:lower:]' <<< "$ANS" )
    [[ -n $(echo $ANS|grep -E -w "^[aen0-9,]{1,}") ]] && : || ANS="X"

case ${ANS} in
    [0-9]..[0-9] )

    for ix in $(eval echo \{$ANS\}); do
        LINE=${LINES[(( $ix-1 ))]}
        echo -e "Deleting:  ${BD}${LINE}${NL}"
        sed -i -c "/$LINE/d" list_of_file
    done
    unset LINE
    lstFile list_of_file
    ;;

    [0-9,]* )
    ANS=$(echo $ANS | awk -F' |,' '{for (i=1; i<=NF; i++) print $i}')
    for ix in $ANS; do
        if [[ $ix -gt ${#LINES[@]} ]]
        then
            echo  "${ERR}Out-of-range value: ${bd}$ix${NL}"
        else
            LINE=${LINES[(( $ix-1 ))]}
            echo -e "Deleting:  ${BD}${LINE}${NL}"
            sed -i -c "/$LINE/d" list_of_file > /dev/null 2>&1
        fi
    done
    unset LINE
    lstFile list_of_file
    ;;

    a )              
    for ix in ${LINES[@]}; do
        echo "Deleting:  ${BD}${ix}${NL}"
        sed -i -c "/$ix/d" list_of_file
    done
    exit 0
    ;;

    n|e ) exit 0
    ;;

    * ) echo "${WRN}Invalid entry! Should be digit or ${BD}a${NL} for All."
    printf "%-14s%s\n\n" "" "Otherwise, enter ${UL}n${NL}o or ${UL}e${NL}xit to quit"
    ;;
esac
done 
```

这工作正常（有点），但有一些竞争条件。例如

```
2,d,7 - throws in: bad array subscript
6..10 - throws in: (( 6..11-1 )): syntax error: invalid arithmetic operator (error token is "..11-1 ))")
but, 
6..9  - throws in: first RE may not be empty 
```

有没有办法有单独的选项来捕获“单个”和“多个”数字输入？另外，对整体改进有什么建议吗？

非常感谢任何帮助。干杯！！

* * *

**更新：31/10**

现在正在工作。感谢 Alepac 的建议。
以防万一，如果其他人也在寻找类似的东西，我把它放在这里。根据我的原始代码，此函数将从文件中删除行：`list_of_file`根据用户输入。

```
function chkINPUT()
{
    local I_PUT=( "$@" )
    local MAX=${#LINES[@]}
    #IFS=', ' read -a SPLITTED <<< "$I_PUT"
    local SPLITTED=( $(echo "${I_PUT[@]}" | awk -F',| ' '{for (i=1; i<=NF; i++) print $i}') )

    for idx in "${!SPLITTED[@]}"
    do
        SPLTD=${SPLITTED[idx]}

        # Check if it's a range [4..7]
        if [[ "${SPLTD}" =~ ^[0-9]{1,2}\.\.[0-9]{1,2}$ ]]
        then
            for ix in $(eval echo \{$SPLTD\}); do
                if (( ${ix} <= $MAX )); then
                    LINE=${LINES[(( ix-1 ))]}
                    echo -e "Deleting:  ${BD}${LINE}${NL}"
                    sed -i -e "/$LINE/d" list_of_file 2>&1 > /dev/null
                    unset LINE
                else
                    echo -e "\t${ix} => Out of range"
                    break
                fi
            done

        # Check if it's a single input
        elif [[ "${SPLTD}" =~ ^[[:digit:]]+$ ]]
        then
            if (( ${SPLTD} <= $MAX )); then
                LINE=${LINES[(( SPLTD-1 ))]}
                echo -e "Deleting:  ${BD}${LINE}${NL}"
                sed -i -e "/$LINE/d" list_of_file 2>&1 > /dev/null
                unset LINE
            else
                echo  "${ERR}Out-of-range value: ${bd}$SPLTD${NL}"
            fi

        else
            echo  "${ERR}Invalid entry: ${bd}$SPLTD${NL}; must be an integer from the list!"
        fi
    done
} 
```

然后，像这样使用它：

```
ANS= 
until [[ "${ANS}" == "N" || "${ANS}" == "n" || "${ANS}" == "e" ]] 
do
    delOpt $LST
    read ANS && echo ""
    ANS=$( tr '[:upper:]' '[:lower:]' <<< "$ANS" )

    case ${ANS} in
        [0-9]* )
        chkINPUT ${ANS}
        ;; 
```

希望能帮助到你。干杯！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:51:57.637

我认为最好的选择可能是将字符串拆分为数组，然后在数组上循环。下一个问题可能是如何拆分字符串，这是一个选项：

```
#!/bin/sh
ANS="1,2,3..4"
echo ans = ${ANS}
IFS=', ' read -a SPLITTED <<< "$ANS"
for index in "${!SPLITTED[@]}"
do
    echo "$index ${SPLITTED[index]}"
done 
```

结果

```
alepac@mypc:/tmp$ . test.sh 
ans = 1,2,3..4
0 1
1 2
2 3..4 
```

这样，您甚至可以喜欢`1,3..5,8,n`并正确解析它

# ruby-on-rails - 如何测量每个 gem 在初始化时需要多少内存？

> ID：13065408
> 
> 赞同：13
> 
> 时间：2012-10-25T09:20:32.317
> 
> 标签：ruby-on-rails, ruby, memory, gem, bundler

我有一个带有捆绑程序的 Rails 2.3.10 应用程序。启动时内存占用非常大（开发模式下为 300MB）。

我想看看每个 gem 在启动时占用多少内存。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-11T02:45:01.783

我们遇到了一个问题，即没有流量或请求的基本 Rails 应用程序在启动时的占用空间约为 140MB。

我们使用以下方法来跟踪我们应用程序的 Gemfile 中指定的每个 gem 的内存需求，而无需尝试修补 bundler。

1.  使用`rails new myappname`生成一个新的空 Rails 应用程序
2.  将 Gemfile 从主项目复制到这个新的 rails 项目
3.  运行`bundle install`，然后`rails server`确保可以启动 rails 服务器并加载所需的任何基本配置
4.  打开 Gemfile，除了 rails gem 的规范外，`require: false`在每一行的末尾追加。确保使用一个名称指定但需要使用 :require => 'othergemname' 的任何其他 gem 使用较旧的 ruby​​ 哈希表示法，以便下面的模式匹配将捕获它。
5.  再次运行`bundle install`以重新生成 Gemfile.lock
6.  创建以下脚本，该脚本将手动使用 Gemfile 中指定的每个 gem，并记录 rails 进程之前和之后消耗的系统内存。

    ```
    # require_and_profile.rb
    def require_and_profile(gemname = nil)
      unless gemname
        puts "%-20s: %10s | %10s" % ['gem','increment','total']
        return
      end
      # This is how to get memory of calling process in OS X, check host OS for variants
      memory_usage = `ps -o rss= -p #{Process.pid}`.to_i / 1024.0
      require gemname
      puts "%-20s: %10.2f | %10.2f" % [ gemname, (`ps -o rss= -p #{Process.pid}`.to_i / 1024.0 - memory_usage), (`ps -o rss= -p #{Process.pid}`.to_i / 1024.0)]
    end

    pattern = /^[^#]*gem[ ]*['"]([^,'"]*)['"][ ,~>0-9\.'"]*(:require[ => ]*['"]([^'"]*)['"][, ])?/

    require_and_profile
    File.open('Gemfile').each do |line|
      if line.match(pattern)
      if line.match(pattern)[3]
        require_and_profile line.match(pattern)[3]
      else
          require_and_profile line.match(pattern)[1]
        end
      end
    end 
    ```

7.  跑`rails c`

8.  `load 'require_and_profile.rb'`
9.  输出显示每个 gem 增加了多少（以 MB 为单位）到基础应用程序占用空间（增量）以及包含 gem 后的总占用空间（总计）。

例如，这有助于我们确定，当我们只在 :asset 组中需要它时，我们一直在启动时需要资产同步。我们确实发现，在不同的启动过程中，每个 gem 的内存占用并不完全相同，但运行几次确实会向您显示哪些是需要内存的 gem 的模式。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-26T21:33:26.717

现在使用 derailed gem 有一种更简单的方法：

添加到您的gemfile：

```
gem 'derailed', group: :development 
```

然后在您的应用程序根目录的命令行上：

```
bundle exec derailed bundle:mem 
```

这将打印出每个 gem 包含多少内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:47:34.447

我会这样做：

*   在捆绑器中找到需要所有宝石的地方。
*   在需要每个 gem 之后，获取当前对象计数 ( `c = 0; ObjectSpace.each_object { c += 1 }`)

通过这种方式，您将看到哪个 gem 导致实例化的对象最多，因此间接导致最多的内存使用。

不过有两个警告：

*   内存使用量与对象的数量并没有真正的线性关系，但是您应该对哪些 gem 是最严重的违规者有一个足够好的估计
*   正如已经指出的那样：gem 在需要时可能不会加载所有代码，因此当加载更多代码时，gem 可能会导致更多的内存使用......

# php - 'IN'语句的PHP OCI8绑定（未知数量）参数

> ID：13065415
> 
> 赞同：6
> 
> 时间：2012-10-25T09:20:59.507
> 
> 标签：php, sql, oracle-call-interface

对于 SQL IN 子句，在将 SQL 与 PHP OCI8 绑定时如何处理未知数量的参数？

例如，给定以下查询

```
select * from table1
where id > :id_1
and id in (:id_array_of_unknown_size) 
```

和要绑定的变量数组

```
$bind_array = array(
    ':id_1' => '1',
    ': id_array_of_unknown_size' => array('7','2','5',),
); 
```

同样重要的是要注意，在我的特定情况下，输入`array($bind_array)`可能包含也可能不包含绑定元素的子数组。它也可以是以下

```
select * from table1
where id > :id_1
and id !=  :id_2 
```

和

```
$bind_array = array(
    ':id_1' => '1',
    ':id_2' => '5',
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-24T12:58:47.107

一种方法是在 IN 子句中绑定少量固定值，如[oci_bind_by_name](http://php.net/manual/en/function.oci-bind-by-name.php#example-2202)的文档中所述。还有一种解决方案可以将多个条件与可变数量的值绑定。

```
<?php
$ids = array(
    103,
    104
);

$conn         = oci_pconnect($user, $pass, $tns);
// Using ORACLE table() function to get the ids from the subquery
$sql          = 'SELECT * FROM employees WHERE employee_id IN (SELECT column_value FROM table(:ids))';
$stmt         = oci_parse($conn, $sql);
// Create collection of numbers. Build in type for strings is ODCIVARCHAR2LIST, but you can also create own types.
$idCollection = oci_new_collection($conn, 'ODCINUMBERLIST', 'SYS');

// Maximum length of collections of type ODCINUMBERLIST is 32767, maybe you should check that!
foreach ($ids as $id) {
    $idCollection->append($id);
}

oci_bind_by_name($stmt, ':ids', $idCollection, -1, SQLT_NTY);
oci_execute($stmt, OCI_DEFAULT);
oci_fetch_all($stmt, $return);
oci_free_statement($stmt);

oci_close($conn);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:00:16.680

您应该将数组与另一个函数绑定 - oci_bind_array_by_name

[http://php.net/manual/en/function.oci-bind-array-by-name](http://php.net/manual/en/function.oci-bind-array-by-name)。

[您不能只用 oci_bind_by_name http://php.net/manual/en/function.oci-bind-by-name.php](http://php.net/manual/en/function.oci-bind-by-name.php)将 :variable 替换为数组对象

# encryption - 将加密列移动到不同的服务器

> ID：13065416
> 
> 赞同：0
> 
> 时间：2012-10-25T09:21:08.157
> 
> 标签：encryption, sql-server-2008-r2, certificate

很像“[使用另一个数据库中的 SQL 证书](https://stackoverflow.com/questions/11611199/use-sql-certificate-from-another-database)”中的问题，但是这一次，我将数据库移动到另一个服务器。如何移动必要的证书，以保证相同的代码仍然有效？

```
EncryptByCert(Cert_ID('CertifiacteName'), 'SecretData') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:49:47.577

实际上，您的证书在您的数据库备份中。

此外，您的证书很可能是由数据库主密钥加密的。因此，您需要让您的数据库主密钥 (DMK) 在目标实例上工作。

默认情况下，DMK 受密码和服务主密钥 (SMK) 保护。默认情况下，密钥是自动打开的。这意味着，如果您有权使用证书，它会在您需要时自动解密。

由于在新实例上您的 SMK 不同，它不会自动发生。但是您可以通过密码打开DMK。所以你需要什么——移动你的数据库，打开主密钥，改变它，让它被新的服务器 SMK [msdn](http://msdn.microsoft.com/en-us/library/ms174433.aspx)加密。

您需要在新实例上执行的操作：

```
OPEN MASTER KEY DECRYPTION BY PASSWORD = 'your password (from previous instance)'
ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY 
```

# android - 使用 Worklight 平台加载 jquery 移动应用程序的初始页面

> ID：13065419
> 
> 赞同：0
> 
> 时间：2012-10-25T09:21:20.040
> 
> 标签：android, jquery-mobile, ibm-mobilefirst

这是为跨平台开发的 worklight 应用程序，当我启动应用程序时，我需要显示默认页面，我使用 jquery mobile 来开发放置在同一 html 文件下的页面...

```
<html>
<body>
<div data-role="page1" id="one">
.
.
</div>
<div data-role="page2" id=two>
.
.
</div>
</body>
</html> 
```

在 wlCommonInit() 函数中，我试图像这样加载第一页

```
function wlCommonInit(){
$.mobile.changePage("#one");
} 
```

目前结果页面不是我所期望的，它加载了两个页面，每个页面元素相互重叠......如何加载在相同 html 中定义的初始页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:18:09.230

您可以在 Worklight 的开发人员工作站点上查看 jQuery 移动应用程序示例 - [http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/docs/WorklightStarter_jQueryMobile.zip](http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/docs/WorklightStarter_jQueryMobile.zip)

# selectmanycheckbox - 刷新页面时清除选中的值。在 h:selectManyCheckbox

> ID：13065420
> 
> 赞同：2
> 
> 时间：2012-10-25T09:21:20.677
> 
> 标签：selectmanycheckbox

我在使用 h:selectManyCheckbox 时遇到问题。刷新页面时清除选中的值。
我用过 JSF 1.2

> `<h:selectManyCheckbox value="${dmsParticipantsForm.filterCompany}" style="text-align: left" class="companySelector" layout="pageDirection" > <f:selectItems value="${dmsActionForm.companies}" /> </h:selectManyCheckbox>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T13:19:13.040

您是否将选定的值存储在某处（例如在会话中）？如果是这样，您加载选定的值..

```
...

private List<Item> selectedItems = new ArrayList<>(); // getter-setter

@PostConstruct
public void prepare() {
    getSelectedItems().addAll(getSessionBeanOrOtherResource().getSelectedOrStoredValues());
} 
```

# linux - gcc 链接选项以查看为什么某些目标文件链接到二进制文件

> ID：13065421
> 
> 赞同：8
> 
> 时间：2012-10-25T09:21:23.360
> 
> 标签：linux, gcc, compilation, linker, ld

我有一些链接问题。

为了调查这个问题，我添加了**-t**链接器标志 (gcc -Wl,-t) 来打印使用了哪些库以及使用了静态库中的哪些对象。

有一个静态库，在某些配置中使用一组目标文件，而在另一组中使用。

有什么办法（可能是**ld**标志）来查看为什么特定对象（在对象文件中定义了以前未定义的符号）链接到二进制文件中，而其他来自同一个静态库的不是？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T12:20:46.617

我正在寻找的标志是**-M**，它将链接映射打印到标准输出。

来自 ld(1)：

```
 -M
  --print-map
      Print a link map to the standard output.  A link map provides information about the link, including the following:
           ·   Where object files are mapped into memory.
           ·   How common symbols are allocated.
           ·   All archive members included in the link, with a mention of the symbol which caused the archive member to be brought in.
           ·   The values assigned to symbols. 
```

列表中的第二项是我正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:59:37.140

由于您在上次编辑问题和答案后一个多月添加了赏金，我假设您不喜欢自己的答案。

据我了解，您正试图找出是什么对象（A）导致其他对象（B）被链接。

如果您在没有 B 存在的情况下进行编译/链接（即在命令行上没有），那么您应该会收到错误消息，告诉您为什么需要它，这将引用 A。

如果 B 在库中，您可能需要制作该库的不包含 B 的特殊版本。

# ios - IOS应用每30秒发送一次请求

> ID：13065422
> 
> 赞同：1
> 
> 时间：2012-10-25T09:21:26.230
> 
> 标签：ios, nsurlconnection, nstimer

我正在编写一个应用程序来将 gps 坐标发送到服务器。我需要每 30 秒发送一次坐标。我正在使用一个按钮来启动该发送请求，但我无法按照要求每 30 秒重新发送一次坐标的计时器或循环过程。有任何想法吗？发布一些代码来帮助：

```
-(IBAction)pushedGo:(id)sender
{

    NSMutableData *data = [[NSMutableData alloc]init];
    self.receivedData = data;
    [data release];

    NSString *contentType = @"text/html";
    NSString *mimeType = @"text/xml";

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://telesto.zapto.org:81/SMART_EdgeNode/EdgeNode/DataFeeds/3/addMeasurement"]];

    NSString *string1 = [ NSString stringWithFormat:@"%f", locationController.dblLatitude];
    NSString *string2 = [ NSString stringWithFormat:@"%f", locationController.dblLongitude];

    NSLog(@"%@",string1);
    NSLog(@"%@",string2);

    NSString *bodystring =[NSString stringWithFormat:@"geoX#%@#geoY#%@", string1, string2];

    NSData *body = [bodystring dataUsingEncoding:NSUTF8StringEncoding];

    NSLog(@"%@",bodystring);

    NSMutableDictionary* headers = [[[NSMutableDictionary alloc] init] autorelease];
    [headers setValue:contentType forKey:@"Content-Type"];
    [headers setValue:mimeType forKey:@"Accept"];
    [headers setValue:@"no-cache" forKey:@"Cache-Control"];
    [headers setValue:@"no-cache" forKey:@"Pragma"];
    [headers setValue:@"close" forKey:@"Connection"];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                   timeoutInterval:60.0];
    [request setHTTPMethod:@"PUT"];

    [request setAllHTTPHeaderFields:headers];

    [request setHTTPBody:body];

    self.conn = [NSURLConnection connectionWithRequest:request delegate:self];
 } 
```

这就是我用来通过点击我的应用程序上的按钮来发起请求的代码。是否有可能在点击该按钮后使其不只发送 1 个请求，而是每 30 秒发送许多请求，直到我退出应用程序或我点击另一个按钮停止发送请求？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:24:20.587

使用`NSTimer`：

```
[NSTimer scheduledTimerWithTimeInterval:30.0 target:self selector:@selector(request:) userInfo:nil repeats:YES]; 
```

# c - Noobie void 指针混淆

> ID：13065424
> 
> 赞同：-2
> 
> 时间：2012-10-25T09:21:28.917
> 
> 标签：c, void-pointers

抱歉这个 Noobie 问题，我只是无法使以下任何一个代码工作？

片段1：

```
int main(void) {
    void *ptr;
    *ptr = 1;
    printf("%d", *ptr);
    return 0;
} 
```

片段2：

```
int main(void) {
    void *ptr;
    int a = 1;
    ptr = &a;
    printf("%d", *ptr);
    return 0;
} 
```

片段3：

```
int main(void) {
    void *ptr;
    int a = 1;
    (int*)ptr = &a;
    printf("%d", *ptr);
    return 0;
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:31:12.767

`Snippet 1`
您不能取消引用 void 指针。
`Snippet 2`
同样的错误。
`Snippet 3`
`*(int*)ptr = &a;`不需要。void 指针可以保存任何类型的指针的地址。

如果您想使用 void 指针，您可以执行以下操作
`void *p;`
`int a=5;`
`int *i_ptr = NULL;`
`p = &a`
`i_ptr = p`
`printf("\n %d",*i_ptr);`

在这里，您将地址从 void 指针复制到整数指针。但是您必须确保 p 包含指向 int 的指针的地址以进行正确的类型转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:47:30.480

片段 1 没有任何意义。您正试图将某些东西存储到“虚空”中，这是不可能的。

片段 2 是有道理的，但由于您不能获取“指向 void 的指针”的内容，因此不能使用 *ptr。相反，将其转换为指向 int 的指针，然后获取它的内容。 `printf("%d", *(int*)ptr);`

Snippet 3 没有任何意义，类型转换不是有效的 C 语法。除此之外，它与片段 2 有相同的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:32:48.277

您可以像这样将指针类型转换到位（在片段 3 中）

`printf("%d",*(int*)ptr);`

在所有 3 个片段中，您都在取消引用 void 指针。这是标准不允许的（或者是未定义的行为，我不记得了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:25:55.940

解引用`void`指针是`undefined behaviour`

你应该试试这个

```
ptr=(int*)&a; 
```

创建一个类型的指针`int`

然后将这个ptr分配给那个，你可以取消引用那个指针

```
int *p;
p=ptr;
printf("%d",*p); 
```

# java - 无法访问 GUI 上的对象

> ID：13065425
> 
> 赞同：0
> 
> 时间：2012-10-25T09:21:29.757
> 
> 标签：java, android, eclipse, android-layout

> **可能重复：**
> [在 Eclipse 中为 Android 开发：R.java 未生成](https://stackoverflow.com/questions/2757107/developing-for-android-in-eclipse-r-java-not-generating)

从 R.id.* 我可以访问 txtWeight、txtLength、lblWeight 和 lblLength，仅此而已。不能从 Java 代码访问所有其他对象。

```
TextView lblAverage = (TextView) findViewById (R.id.lblAverage);

lblAverage cannot be resolved or is not a field 
```

这是整个布局文件；

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="4dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/fts  logo" />

    <TextView
        android:id="@+id/lblWeight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView1"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="21dp"
        android:text="Weight:"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/txtWeight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/lblWeight"
        android:layout_alignBottom="@+id/lblWeight"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:inputType="numberDecimal" />

    <TextView
        android:id="@+id/lblLength"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/lblWeight"
        android:layout_below="@+id/txtWeight"
        android:layout_marginTop="24dp"
        android:text="Length:"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/txtLength"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/lblLength"
        android:layout_alignBottom="@+id/lblLength"
        android:layout_alignLeft="@+id/txtWeight"
        android:ems="10"
        android:inputType="numberDecimal" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lblLength"
        android:layout_centerHorizontal="true"
        android:ellipsize="none"
        android:paddingTop="16dp"
        android:text="Weight in kilograms, length in meters" />

    <Button
        android:id="@+id/btnCalculate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="16dp"
        android:paddingLeft="24dp"
        android:paddingRight="24dp"
        android:text="Calculate"
        android:onClick="btnCalculate_clicked" />

    <TextView
        android:id="@+id/lblBMI"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnCalculate"
        android:layout_centerHorizontal="true"
        android:text="Your BMI is"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:visibility="invisible" />

    <TextView
        android:id="@+id/lblComparedToIndex"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/lblBMI"
        android:layout_below="@+id/lblBMI"
        android:layout_marginTop="14dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:visibility="invisible" />

    <Button
        android:id="@+id/btnSubmitToIndex"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lblComparedToIndex"
        android:layout_centerHorizontal="true"
        android:text="Submit to index"
        android:visibility="invisible"
        android:onClick="btnSubmitToIndex_clicked" />

    <TextView
        android:id="@+id/lblAverage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Average BMI: ?"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:28:24.750

```
I think R.java is not compiled correctly.
Try cleaning your project and import id for your application package once again.
I hope it will work 
```

# python - 双索引字典

> ID：13065426
> 
> 赞同：22
> 
> 时间：2012-10-25T09:21:34.390
> 
> 标签：python, dictionary

我希望能够根据两个整数值在字典中存储和查找值。

因此，当我查找一个值时，我想使用键`read_length`并`min_size`访问元素，如下所示：

```
number_of_read_lengths[read_length][min_size] 
```

我知道我可以创建嵌套字典，但这有点麻烦。

有没有一种简单的方法可以做我想做的事情？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-25T09:22:42.077

您可以使用任何不可变和可散列的对象作为键，包括元组

```
number_of_read_lengths = {}

number_of_read_lengths[14,3] = "Your value" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T09:34:06.650

使用元组可能很烦人——你必须记住在索引期间放置元组。

我会推荐一个嵌套的字典，但是一个`defaultdict`，像这样：

```
from collections import defaultdict

number_of_read_lengths = defaultdict(dict)

number_of_read_lengths[1][2] = 3

print(number_of_read_lengths) 
```

此代码将给出：

```
defaultdict(<type 'dict'>, {1: {2: 3}}) 
```

这样，`number_of_read_lengths`在访问或设置字典时，字典中任何不存在的元素都将被创建为字典。简单有效。

更多信息`defaultdict`：[http](http://docs.python.org/library/collections.html#collections.defaultdict) ://docs.python.org/library/collections.html#collections.defaultdict 还有例子：[http ://docs.python.org/library/collections.html#defaultdict-examples](http://docs.python.org/library/collections.html#defaultdict-examples)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T09:23:25.653

您可以尝试使用元组作为键：

```
number_of_read_lengths[(read_length, min_size)] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T09:36:21.897

只是从我所做的评论中扩展一点：

`dict`键*必须*是可散列的，这是一个简单的元组。但是，包含诸如列表之类的不可散列值的元组是不可散列的（即使它是不可变的！），因此不能用作`dict`键：

```
>>> bad = ([12],[32])
# still immutable
>>> bad[1] = [21]
Traceback (most recent call last):
File "<input>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment

# but not hashable!
>>> d = {}
>>> d[bad] = 2
Traceback (most recent call last):
  File "<input>", line 1, in <module>
TypeError: unhashable type: 'list' 
```

您甚至可以将可变*和*可散列`dict`的对象用作键，但这并不是真正有用，应该避免使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-04T16:53:54.203

这是定义双索引字典的另一种方法。对我来说，更容易想象这个而不是其他方法。

```
dict_dict_v2 = {}
dict_dict_v2.setdefault(2, {})
dict_dict_v2.setdefault(3, {})
dict_dict_v2[2]['1.1.1.1'] = {}
dict_dict_v2[2]['1.0.1.0'] = {}
dict_dict_v2[3]['1.1.1.1'] = "double"
dict_dict_v2[3]['1.0.1.0'] = 12    

dict_dict_v2[2]['1.1.1.1']['mac']=1111
dict_dict_v2[2]['1.1.1.1']['id']=1111

dict_dict_v2[2]['1.0.1.0']['id']=1010

print str(dict_dict_v2)
"""output: 
{1: {'1.0.0.0': {'mac': 1010, 'id': 1000}, '1.1.1.1': {'mac': 1111}}, 
 2: {'1.1.1.1': {'mac': 1111, 'id': 1111}, '1.0.1.0': {'id': 1010}}, 
 3: {'1.1.1.1': 'double', '1.0.1.0': 12}}
""" 
```

您可以使用以下 dict 基本功能：

```
print "len-> "+str(len(dict_dict_v2[2]))
print "keys-> "+str(dict_dict_v2[2].keys())
print "values-> "+str(dict_dict_v2[2].values())
"""output: 
len-> 2
keys-> ['1.1.1.1', '1.0.1.0']
values-> [{'mac': 1111, 'id': 1111}, {'id': 1010}]
"""
print "len for 1.1.1.1-> "+str(len(dict_dict_v2[2]['1.1.1.1']))
print "keys for 1.1.1.1-> "+str(dict_dict_v2[2]['1.1.1.1'].keys())
print "values for 1.1.1.1-> "+str(dict_dict_v2[2]['1.1.1.1'].values())
"""output: 
len for 1.1.1.1-> 2
keys for 1.1.1.1-> ['mac', 'id']
values for 1.1.1.1-> [1111, 1111]
""" 
```

# ios - IOS - 媒体播放器卡在“正在加载...”

> ID：13065433
> 
> 赞同：1
> 
> 时间：2012-10-25T09:22:21.057
> 
> 标签：ios, ios-simulator, media-player

我添加了 MediaPlayer 库并编写了代码以全屏模式播放视频。

我还在我的视图中添加了一个按钮，该按钮链接到一个使用外部视频 URL 启动 MediaPlayer 的函数。现在我确定代码是正确的，因为 MediaPlayer 正在加载到屏幕中，如果我尝试错误的 URL，它将显示错误。

**问题是，MediaPlayer 一直卡在“正在加载...”**顶部并显示。我试图在我的浏览器中播放视频并且它有效。我还在浏览器中尝试了来自另一台服务器的不同视频，它也可以工作，但在 MediaPlayer 中从来没有。

此外，单击 MediaPlayer 中的“完成”按钮没有效果，也不会让我回到启动它之前的视图！它使 MediaPlayer 一直在屏幕上，“正在加载...”卡住了。

我正在使用 XCode 4.5 和 IOS 模拟器 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:10:10.780

这个答案真的帮助了我。

[mediaplayer 框架不在 iOS 6 中播放视频](https://stackoverflow.com/questions/13243903/mediaplayer-framework-not-playing-video-in-ios-6)

在我的案例中，添加控制器并从 UIViewController 而不是另一个 UIView 加载它是成功的关键。

# c# - 如何转换列表 列出 在 C# 中使用 LINQ 将空或空字符串转换为 0

> ID：13065438
> 
> 赞同：0
> 
> 时间：2012-10-25T09:22:32.487
> 
> 标签：c#, linq-to-objects

如何`List<string> to List<int>`在 C# 中使用 LINQ 将要转换为 0 的空字符串或空字符串转换为 0

以下 LINQ 语句将转换为`List<sting>`，`List<int>`但这些语句是否适用于上述场景

```
listofIDs.Select(int.Parse).ToList()

var intList = stringList.Select(s => Convert.ToInt32(s)).ToList() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:33:23.683

这是我的音调：

```
 var stringlist = new List<String> { "1", "2", "", null };
        var intList = stringlist.Select(s => { int i; return int.TryParse(s, out i) ? i : 0; }).ToList();
        Debug.Print("{0},{1},{2},{3}", intList[0], intList[1], intList[2], intList[3]); 
```

测试输出：1,2,0,0

与 IsNullOrWhiteSpace 建议没有什么不同。但是，它比只使用 int.Parse unguarded 更安全，如果输入无效，它将引发异常。

给你一个建议：TDD！熟悉众多 .NET 测试框架之一。你可以用另外 2-3 行代码来回答像你这样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:24:54.483

```
stringList.Select(s => string.IsNullOrEmpty(s) ? 0 : int.Parse(s)).ToList(); 
```

或者，如果您使用的是 .Net 框架 4.0 或更高版本，您可以尝试使用[string.IsNullOrWhiteSpace](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)

```
stringList.Select(s => string.IsNullOrWhiteSpace(s) ? 0 : int.Parse(s)).ToList(); 
```

例如：

```
List<string> stringList = new List<string> { "1", "2", "3", "    ", "", "4" };
List<int> newListOfInt = stringList.Select(s => string.IsNullOrWhiteSpace(s) ? 
                                                  0 : int.Parse(s)
                                           ).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:24:15.787

尝试这个：

```
listofIDs.Select(id => string.IsNullOrEmpty(id)? 0 : int.Parse(id)).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:24:50.897

```
var intList = stringList.Select(s => (String.IsNullOrEmpty(s))? 0 : Convert.ToInt32(s)).ToList() 
```

# xml - 在 SQL Server 存储过程中从 XML 中提取键和值

> ID：13065440
> 
> 赞同：1
> 
> 时间：2012-10-25T09:22:41.113
> 
> 标签：xml, sql-server-2008, tsql, xml-parsing

我收到类似的 XML 数据

```
<t>
  <ID>8</ID>
  <FirstName>name 8</FirstName>
  <LastName>surname 8</LastName>
  <DateOfBirth>1963-05-23T00:00:00</DateOfBirth>
</t> 
```

在 SQL Server 存储过程中。有不同的 xml 数据格式（字段编号和字段名称可以不同）。现在，我应该提取每个字段及其值并将每个字段/值作为单独的记录插入表中。

是否有示例如何使用 TSQL 执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:28:06.237

您可以轻松扫描 XML - 如果它始终位于`<t>`根节点下并且始终只有一层深度：

```
DECLARE @input XML = '<t>
  <ID>8</ID>
  <FirstName>name 8</FirstName>
  <LastName>surname 8</LastName>
  <DateOfBirth>1963-05-23T00:00:00</DateOfBirth>
</t>'

SELECT
    FieldName = nodes.value('local-name(.)', 'varchar(50)'),
    FieldValue = nodes.value('(.)[1]', 'varchar(50)')
FROM
    @input.nodes('/t/*') AS Tbl(nodes) 
```

输出是：

![在此处输入图像描述](../Images/febd958677d586910e90ba678a37217d.png)

但这实际上取决于您现在要如何处理该数据 - 一旦您从 XML 中检索到它......您的预期目标表的结构是什么样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:26:48.960

`@x`你的xml在哪里

```
insert yourtable (ID, Firstname, Lastname, DOB)
select 
    @x.value('(/t/ID)[1]','int'),
    @x.value('(/t/FirstName)[1]','varchar(50)'),
    @x.value('(/t/LastName)[1]','varchar(50)'),
    @x.value('(/t/DateOfBirth)[1]','datetime') 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms178030(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms178030(v=sql.100).aspx)

# mule - Mule - 代理 ClientId 配置

> ID：13065445
> 
> 赞同：0
> 
> 时间：2012-10-25T09:23:00.050
> 
> 标签：mule

我正在使用 activeMQ 连接器

```
 <jms:activemq-connector name="Active_MQ_1"  brokerURL="${amq.broker.url.1}"  eagerConsumer="true" numberOfConsumers="3" dynamicNotification="true" validateConnections="true" clientId="mule-server-01"  doc:name="Active MQ">
 <reconnect count="5" frequency="3000" blocking="false"/>
 </jms:activemq-connector> 
```

现在，如果您看到上面的“clientId”属性，我已经得到了硬编码。我们在 2 台服务器中部署应用程序，在进行生产部署之前，我必须手动将其更改为相应机器的名称。

有没有一种方法可以让我使用一些 SYS_ENV 或像 $HOSTNAME 这样的宏，它们在部署后会自动替换为机器名称？

仅供参考 - 此客户端 ID 很有用，也可以查看 ActiveMQ 队列上的消费者。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:27:28.497

使用与属性相同的属性解析器机制`brokerURL`，即。Spring 的属性解析器。

它允许您执行以下操作：

*   为该值提供系统属性，以便您可以从命令行传递它。
*   使用可选配置文件覆盖默认值。

这为您提供了足够的选项来适应您的生产环境实践。

# c# - 在 C# 中，我是否必须执行显式向上转换？

> ID：13065447
> 
> 赞同：3
> 
> 时间：2012-10-25T09:23:08.997
> 
> 标签：c#, casting, upcasting

给定具有基类`B`和子类的类层次结构`S`：

```
class B { }
class S : B { } 
```

我可以通过隐式转换将 a 分配`S`给a：`B`

```
B b = new S(); 
```

如果我想将其降级为 a`S`我必须明确地这样做：

```
B b = new S();
...
S s = (S)b; 
```

现在，我的理解是我们可以保证从`S`to始终存在赋值兼容性`B`，因此我们永远不必以以下方式执行显式向上转换：

```
S s = new S();
B b = (B)s; // or
B b2 = s as B; 
```

这个断言是否正确，或者正如问题所述，我是否必须执行明确的向上转型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:38:55.583

如果该类具有显式实现，则可以使用接口：

```
interface I {
    void Method();
}

class C : I {
    void I.Method() { ... }
}

C c = new C();
c.Method();      // won't compile
((I)c).Method(); // have to cast to I first 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:36:05.470

如果你有

```
class B { }
class S : B { }
class T : B { } 
```

你尝试做类似的事情

```
var b = myBool ? new S() : new T(); 
```

除非您将`S`或`T`实例（或两者）显式转换为`B`.

匿名方法也是如此；这个

```
new bool[0].Select(b => 
    { if (b) { return new S(); } else { return new T(); } }); 
```

没有强制转换将无法编译（或指定`Select<bool, B>`，但这可能是不可能的，例如，如果您的源是匿名类型）。

另外，如果你有

```
class B { public void DoSomething() { } }
class S : B { public new void DoSomething() { } } 
```

然后

```
S s = new S();
s.DoSomething();       // calls the S version
((B)s).DoSomething();  // calls the B version 
```

# java - 从一个字符串中返回两个子字符串

> ID：13065448
> 
> 赞同：0
> 
> 时间：2012-10-25T09:23:10.010
> 
> 标签：java, regex, string, arraylist, substring

在搜索预先填充的 ArrayList 时，调用它

```
List<String> myList= new ArrayList<String>(); 
```

我正在尝试根据这些包含某些正则表达式值的元素向其中添加新元素。当我只需要返回元素的一个子字符串时，我就成功了。例如，如果我有

```
String removable = "X"; 
```

它驻留在一个元素中，称之为

```
ABCDX 
```

X 很容易被删除并使用代码添加到 ArrayList

```
 if(myList.get(i).length() == 5 && myList.get(i).substring(4,5).contains(removable))
   {
            myList.add(i+1, myList.get(i).substring(0, 4));
   } 
```

但是当我有一个元素时

```
ABXCD , 
```

我认为可以处理

```
 if(myList.get(i).length() == 5 && myList.get(i).substring(2,3).contains(removable))
   {
            myList.add(i+1, myList.get(i).substring(0, 2).substring(3, 5));
   } 
```

我得到一个字符串索引越界异常。如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:25:15.487

在您使用的第二个代码示例中

```
abc1List.get(i) 
```

这不应该是

```
myList.get(i) 
```

**编辑**

我相信您的问题是您正在对子字符串进行子字符串化。您的代码执行此操作

```
myList.get(i).substring(0, 2).substring(3, 5) 
```

所以这就是说，获取一个字符串的子字符串，然后获取之前检索到的子字符串的一个子字符串。由于第一个子字符串只有 2 个字符长，因此当您尝试从不存在的索引 3 开始时，第二个子字符串会返回越界。

您的代码几乎可以计算为：

```
"ABXCD ,".substring(0,2) = "AB"

"AB".substring(3,5) = Out of bounds substring retrieval! 
```

你需要做类似的事情

```
myList.get(i).substring(0, 2) + myList.get(i).substring(3, 5) 
```

或找到另一种方法来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:26:12.610

检查它是否包含`X`然后使用

```
string = string.replaceAll("X",""); 
```

然后将其添加到列表中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:31:55.733

`abc1List.get(i).substring(0, 2).substring(3, 5)`似乎错了。你不打算取子串的子串吗？你想要这样的东西：

```
myList.add(i+1,abc1List.get(i).substring(0, 2));
myList.add(i+2,abc1List.get(i).substring(3, 5)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:49:52.317

是的，确实问题在于形成另一个子串的子串。由于 substring(0, 2) 仅包含 3 个字符，形成另一个长度更大的子字符串会给出错误。您可以使用 + 运算符连接 2 个子字符串

# c - 请求不是结构或工会的成员？

> ID：13065450
> 
> 赞同：0
> 
> 时间：2012-10-25T09:23:24.807
> 
> 标签：c, arrays, pointers

我有以下代码：

```
people[nextfreeplace] -> personName = name;
people[nextfreeplace] -> age = age;

typedef struct person
{
  char *personName;
  int age;
}Person; 
```

人声明是`Person *people[]`

我收到一个`error: request for member 'personName' in something not a structure or union`

```
error: request for member 'age' in something not a structure or union 
```

但我不确定程序有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:28:52.677

我假设`people`是`Person *`or `Person[]`。

使用 operator`->`时，您可以取消引用并访问该变量。相当于做`(*var).personName`。

用点更改`->`，就像使用 person[1] 时一样，您已经取消引用您的指针，然后像使用简单的操作一样访问您的变量`Person var`

```
people[nextfreeplace].personName = name;
people[nextfreeplace].age = age; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:25:18.560

使用`.`而不是`->`因为您使用的是结构数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:43:30.913

类型的声明需要在访问类型的（成员）实例之前完成。

```
typedef struct person
{
  char *personName;
  int age;
}Person;

...

Person *people[];

...

people[nextfreeplace] -> personName = name;
people[nextfreeplace] -> age = age; 
```

# testing - PyCharm：如何在所有打开的项目中运行测试？

> ID：13065453
> 
> 赞同：1
> 
> 时间：2012-10-25T09:23:33.750
> 
> 标签：testing, pycharm

我想在 PyCharm 中设置一个“配置”，在*几个*打开的项目中运行测试（例如，nosetests）。我怎样才能做到这一点？

我在 Windows 上使用 PyCharm 2.6.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:30:31.283

您可以尝试`all in folder`在测试运行器中使用该选项并指定多个项目共用的文件夹。

我还[添加了一个新功能请求](http://youtrack.jetbrains.com/issue/PY-7928)，以便它可以在所有情况下工作（例如，如果没有项目的公共文件夹或不需要扫描公共文件夹中的其他文件）。

# django - 多站点 Django 部署中的语法案例

> ID：13065454
> 
> 赞同：2
> 
> 时间：2012-10-25T09:23:43.883
> 
> 标签：django, django-sites

我正在部署一个 Django 项目来管理某种事件。单个数据库有两个部署，站点位于斯洛伐克。它们用于名为“Akadémia Trojstenu”和“Klub Trojstenu”的活动。简单的部分是我可以只使用`sites`框架，相应地为每个站点设置显示名称，并在我需要引用事件名称的模板中使用它。

在您意识到斯洛伐克语使用语法案例之前，这看起来没问题。这意味着，在某些地方我需要写“Program Akadémie Trojstenu”/“Program Klubu Trojstenu”或“Staré Akadémie”/“Staré Kluby”。

例如，考虑以下模板代码：

```
<link rel="alternate" type="application/atom+xml" title="Novinky pre {{ site.name }}" href="{% url "news_feed" %}" /> 
```

`site.name`包含“Akadémia Trojstenu”，但在这种情况下，我需要它输出“Novinky pre Akadémiu Trojstenu”，即第四个语法案例中变量的内容。

我目前看到的唯一方法是对模板中的所有此类事件进行特殊处理，查看当前站点的域并输出名称的正确语法大小写。这种解决方案显然是严重抗 DRY、丑陋并且会吃掉小孩。

有人有更好的建议吗？是否有某种标准解决方案？我想有很多语言使用语法案例，肯定有人在我之前遇到过这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:11:47.327

只需[在翻译字符串中使用变量](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)：

```
output = _('Today is %(month)s %(day)s.') % {'month': m, 'day': d} 
```

这也适用于[模板](https://docs.djangoproject.com/en/1.2/topics/i18n/internationalization/#blocktrans-template-tag)：

```
{% blocktrans with site.name as site_name %}Novinky pre {{ site_name }}.{% endblocktrans %} 
```

最后，您可能会发现使用[翻译上下文](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#contextual-markers)很有用。

在那里你不必“吃小孩”（除非你真的很饿）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:00:23.130

正如@jpic 所说，您可以使用上下文标记来做到这一点。将站点名称嵌入模板中实际上会更简单，因为它会被 django 的`makemessages`.

```
<link rel="alternate" type="application/atom+xml" 
      title="Novinky pre {% trans 'Akadémia Trojstenu' context '4th' %}" 
      href="{% url "news_feed" %}" /> 
```

由于这对于多个站点可能并不简单，因此您可以创建一个额外的 .po 文件并手动输入所有站点名称及其翻译和上下文名称。

这有点容易出错，因为您正在手动同步翻译文件和一些数据库值，但至少它们都在一个地方并且在模板之外。

```
msgctxt "1st"
msgid "Akadémia Trojstenu"
msgstr "Akadémia Trojstenu"

msgctxt "2nd"
msgid "Akadémia Trojstenu"
msgstr "????? Trojstenu"

msgctxt "3rd"
msgid "Akadémia Trojstenu"
msgstr "Akadémie Trojstenu"

msgctxt "4th"
msgid "Akadémia Trojstenu"
msgstr "Akadémiu Trojstenu"

...

msgctxt "3rd"
msgid "Klub Trojstenu"
msgstr "Klubu Trojstenu"

... 
```

将多余的 .po 粘贴到另一个目录中并在`LOCALE_PATHS`设置中注册该目录。请记住您这样做了，因此当有人添加新站点或更改站点名称并开始想知道为什么翻译被破坏时，您知道在哪里看。

完成此操作后，您应该能够像这样使用站点名称：

```
<link rel="alternate" type="application/atom+xml" 
      title="Novinky pre {% trans site.name context '4th' %}" 
      href="{% url "news_feed" %}" /> 
```

当然，如果问题仅限于站点名称，您可能会在站点模型上添加更多字段来保存其他案例（子类化它）。由于站点对象从未真正改变，我认为这种非规范化不会造成任何麻烦。

# ios - 纵向视频转横向

> ID：13065455
> 
> 赞同：0
> 
> 时间：2012-10-25T09:23:45.580
> 
> 标签：ios, xcode, ios5, video, ios6

我知道像这样的问题可能已经存在，但为了像我这样的其他人，我会继续问

我有一个应用程序设置为仅允许纵向，但此设置会影响我的视频，因为我希望只有视频也能够以横向播放。有没有一种方法可以添加到我的 .m 文件中来完成这项工作？这是我的代码；

```
 #import "BIDVideosViewController.h"

 @interface BIDVideosViewController ()

 @end

 @implementation BIDVideosViewController

 @synthesize moviePlayer ;

 @synthesize tableList;

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
 self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
 if (self) {
    // Custom initialization
 }
 return self;
 }

 - (void)viewDidLoad
 {
 [super viewDidLoad];
 UITableView *table = [[UITableView alloc]initWithFrame:self.view.bounds];
 [table setDelegate:self];
 [table setDataSource:self];
 [self.view addSubview:table];
 tableList = [[NSMutableArray alloc] initWithObjects:@"Gangan",@"SwimGood",@"German Ice", nil];

 }

 - (void)didReceiveMemoryWarning
 {
 [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
 }

 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 return [tableList count];
 }

 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
 static NSString *DisclosureButtonIdentifier = @"DisclosurebutotonIdentifier";
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:DisclosureButtonIdentifier];
 if (cell == nil)
 {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:DisclosureButtonIdentifier];
 }

 NSInteger row = [indexPath row];
 NSString *rowString = [tableList objectAtIndex:row];
 cell.textLabel.text = rowString;

 return cell;
 }

 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
{
    NSBundle *str = [tableList objectAtIndex:indexPath.row];
    if ([str isEqual:@"Gangan"])
    {
        NSBundle *bundle = [NSBundle mainBundle];
        NSString *thePath = [bundle pathForResource:@"Gangan" ofType:@"mp4"];
        NSURL *theurl = [NSURL fileURLWithPath:thePath];
        moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:theurl];

        [moviePlayer setMovieSourceType:MPMovieSourceTypeFile];
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES];

        [moviePlayer play];
    }
    else if ([str isEqual:@"SwimGood"])
    {
        NSBundle *bundle = [NSBundle mainBundle];
        NSString *thePath = [bundle pathForResource:@"SwimGood" ofType:@"mp4"];
        NSURL *theurl = [NSURL fileURLWithPath:thePath];
        moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:theurl];
        [moviePlayer setMovieSourceType:MPMovieSourceTypeFile];
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES];

        [moviePlayer play];

    }
    else if ([str isEqual:@"German Ice"])
    {
        NSBundle *bundle = [NSBundle mainBundle];
        NSString *thePath = [bundle pathForResource:@"German Ice" ofType:@"mp4"];
        NSURL *theurl = [NSURL fileURLWithPath:thePath];
        moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:theurl];
        [moviePlayer setMovieSourceType:MPMovieSourceTypeFile];
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES];

        [moviePlayer play];
    }

   }
   }
   @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:43:54.437

在您的视图控制器 .m 文件中，您应该有

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

在那里您可以返回`YES`支持的方向，这将使您能够旋转视频。

也不是说如果你使用 UINavigationController，这种方法将不起作用，除非所有视图都以相同的方式`UINavigationController`管理。`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`

同样在您的 Targets -> "You Project" -> Summary 中，您可以设置支持的方向。

编辑：去[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/tdef/UIInterfaceOrientation)看看 UIInterfaceOrientation。那里有你需要的常量。

我会这样写：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation == UIInterfaceOrientationPortrait)
       return YES;  
    if (interfaceOrientation == UIInterfaceOrientationLandscapeRight)
       return YES; 
    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
       return YES;
} 
```

# php - 在具有多个属性的可配置产品上显示缺货产品？

> ID：13065459
> 
> 赞同：1
> 
> 时间：2012-10-25T09:23:57.520
> 
> 标签：php, magento-1.5, configurable-product

我想在可配置产品中显示缺货产品。我已经成功地为具有单个属性的可配置产品完成了此操作，但在可配置产品具有两个属性时找不到执行此操作的方法

# javascript - 如何使用 Javascript 解码 Google Places JSON？

> ID：13065464
> 
> 赞同：0
> 
> 时间：2012-10-25T09:24:10.093
> 
> 标签：javascript, json, google-maps, google-maps-api-3, google-places

我在这里有一个脚本：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Places Autocomplete</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <script>
      function initialize() {
        var input = document.getElementById('searchTextField');
        var options = {
            types: ['(cities)'],
            componentRestrictions: {country: 'us'}
        };

        var autocomplete = new google.maps.places.Autocomplete(input, options);
}
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div>
      <input id="searchTextField" type="text" size="50">
    </div>
  </body>
</html> 
```

我要做的就是从自动完成获取 JSON 输出并提取 long_name 、 short_name`administrative_area_level_1`并`administrative_area_level_2`查看下图。

![我想要的截图](../Images/6b4639eb039848df81df974ecef462e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:27:29.653

使用[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/) 像这样：

```
var results = jQuery.parseJSON(google_json); 
```

然后：

```
alert(results[0].types[0]);
alert(results[0].types[1]); 
```

因此，使用 google-places 自动完成功能，您需要在此链接中执行此操作：[https ://developers.google.com/maps/documentation/javascript/places?hl=pl#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places?hl=pl#places_autocomplete)

```
var input = document.getElementById('searchTextField'); // input must be global
function initialize() {

    var options = {
        types: ['(cities)'],
        componentRestrictions: {country: 'us'}
    };

    //var autocomplete = new google.maps.places.Autocomplete(input, options);
    var service = new google.maps.places.AutocompleteService();
    service.getQueryPredictions(input, callback);

}

function callback(predictions, status) {
    for (var i = 0, prediction; prediction = predictions[i]; i++) {
        alert(prediction.types[0]);
        alert(prediction.types[1]);
    }
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

在这里你有活的例子：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/places-queryprediction?hl=pl](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-queryprediction?hl=pl)

# 最终更新

使用这个脚本：

```
<script>

    function initialize() {
        var input = document.getElementById('searchTextField');
        var options = {
    types: ['(cities)'],
    componentRestrictions: {country: 'us'}
    };

    var autocomplete = new google.maps.places.Autocomplete(input, options);
    google.maps.event.addListener(autocomplete, 'place_changed', function () {
       alert(this.types[0]);
       alert(this.types[1]);          
    });

    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:28:31.093

这很简单，但很难找到：

最后使用 GeoComplete JS 实现：

[http://ubilabs.github.com/geocomplete/](http://ubilabs.github.com/geocomplete/)

网站有足够的文档来协助实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:17:03.007

如果您想在选择地点后处理结果，您必须绑定如下事件

```
google.maps.event.addListener(autocomplete, 'place_changed', your_function); 
```

以下页面上的代码将对您非常有帮助[https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

# typo3 - 如何从typo3访问外部文件服务器？

> ID：13065469
> 
> 赞同：2
> 
> 时间：2012-10-25T09:24:20.380
> 
> 标签：typo3

我正在使用typo3并尝试制作一个扩展名，以呈现一些存储在文件服务器中的图像。我正在考虑使用 curl 来获取图像并显示它们。但我想知道正确的方法是什么。

从外部文件服务器访问图像并通过扩展程序呈现它们是否安全且可以，例如使用 curl 之类的东西？

还是应该使用网络服务将图像存储在typo3上？

我需要使用每天更新的大约 500 张图像，所以我相信我的typo3 安装将非常容易使用所有这些图像。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:52:31.477

您的解决方案会给网络服务器和文件服务器带来额外的压力。所有这些通常由网络服务器提供的图像都将涉及 TYPO3、您的代码和文件服务器上的请求的初始化。

然后，您应该考虑两件事并回答您关于安全性的问题以及图像的副本是否应保存在网络服务器上：

1.  **缓存**- 如果不需要，则非常可取，这样文件服务器就不会受到压力。您应该在网络服务器上制作图像的副本并继续提供该图像的副本。显然，它们会占用磁盘空间，因此您必须定期修剪缓存并根据某些标准删除缓存的图像。

2.  **安全**性 - 您必须采取措施确保只能显示属于页面一部分的图像。您还必须确保文件服务器不会以任何方式暴露。

我认为这两件事都要求您跟踪数据库中的图像，以便您知道哪些图像是页面的一部分，它们在文件服务器上的原始位置是什么，副本的生命周期是什么以及何时将其删除，什么是文件的指纹，以便您可以跟踪文件服务器上图像的可能替换等。总而言之，您将不得不解决一些问题。

# codeigniter - 以 codeIgniter 样式查询

> ID：13065474
> 
> 赞同：1
> 
> 时间：2012-10-25T09:24:46.157
> 
> 标签：codeigniter

我有以下查询：

```
SET @sql = NULL ;
SELECT GROUP_CONCAT( DISTINCT CONCAT(  'select latitude,longitude,max(serverTime) as serverTime,', deviceID,  ' AS device from  d', deviceID,  '_gps' ) 
SEPARATOR  '  UNION ALL  ' ) 
INTO @sql 
FROM devices
WHERE accountID =2;
PREPARE stmt FROM @sql ;
EXECUTE stmt; 
```

有人可以帮我以 codeIgniter 风格编写上述查询....

另一件事是：以 1 和 2 格式编写查询有什么区别

```
1\. $query = $this->db->query('YOUR QUERY HERE'); 

 2\. $this->db->select("...");  
    $this->db->from(); 
    $this->db->where(); 
```

如果我们使用 2nd 样式，它会对性能有什么影响吗...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:02:09.230

尝试这个：

```
$sql = "SELECT GROUP_CONCAT( DISTINCT CONCAT(  'select latitude,longitude,max(serverTime) as serverTime,', deviceID,  ' AS device from  d', deviceID,  '_gps' ) SEPARATOR  '  UNION ALL  ' ) 
INTO @sql FROM devices WHERE accountID =2;"

$this->db->set('@sql', 'NULL', FALSE);
$query = $this->db->prepare($sql);           

$query->execute(); 
```

两种格式的性能应该大致相同。我更喜欢第二种，因为它更具可读性和可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:55:02.980

请检查[文档](http://codeigniter.com/user_guide/database/active_record.html)！

我认为你的问题对 ActiveRecord 来说有点复杂，所以也许你应该用原始查询做一些部分（例如。`GROUP_CONCAT`）

形式 1\. 和 2\. 之间的区别：在第二种形式中，ActiveRecord 将保护您的标识符。我认为 ActiveRecord 的主要优点是：您可以动态地内爆您的查询。其他优点：函数调用可能更具可读性，大查询字符串可能有点不可读。

# opengl-es-2.0 - OpenGLES 2——何时使用 glBindTexture，何时使用 glActiveTexture？

> ID：13065477
> 
> 赞同：17
> 
> 时间：2012-10-25T09:24:58.153
> 
> 标签：opengl-es-2.0, textures

好吧，所以这些纹理真的让我很困惑。我一直在看[这个](http://blog.db-in.com/all-about-opengl-es-2-x-part-2/)教程（我认为它很棒），特别是标题为“您可以定义多达 32 个纹理单元，但每个着色器最多只能定义 8 个纹理。”的图像。据我了解，它是这样工作的：

你激活一个纹理单元。然后，您将纹理对象（类似于图像中的“纹理数据”立方体）绑定到该单元内的某个目标。因此，glGenTextures 制作对象并获取它们的名称，然后 glBindTexture 将该纹理绑定到 TEXTURE_2D 或其他东西（我目前对其他目标不感兴趣）。然后您可以使用 glTexImage2D 指定纹理数据。

现在。我正在使用 3 个着色器程序，每个程序都需要不同的纹理。这是我想要做的：

在初始化阶段，我遍历每个纹理单元，然后

*   glActiveTexture
*   glBindTexture（在活动纹理单元上操作）
*   glTexImage2D（对当前绑定的对象进行操作）

对于着色器，我使用 glUniform 将每个着色器中的制服与 glActiveTexture 的 GL_TEXTUREi 中指定的“i”值匹配。我总共只需要四个纹理，而且它们非常小。

现在，在渲染过程中，我应该可以正常切换程序，一切正常，对吧？每个程序已经有一个统一的指定使用哪个单元，每个单元已经有一个对象绑定到它的 TEXTURE_2D 目标，每个对象都有 glTexImage2D 指定的数据，对吧？所以我的渲染函数中不需要绑定或激活单元？至少我是这么理解的，但是我在错误的地方绘制了错误的纹理。

此外，在我的一个程序中，我想在单个表面的三个纹理之间切换。所以我想我将每个纹理加载到一个对象中，并将每个对象绑定到一个单元，然后在渲染时我可以只 glUniform 告诉程序使用哪个纹理单元。

所以我想知道我是否误解了OpenGL中纹理的基本结构，或者对象与单元的绑定是否在程序切换时过期，或者类似的东西。或者我是否必须多次绑定纹理——但是何时，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T22:48:03.900

不要忘记为每个纹理对象设置 glTexParameteri。

```
void loadTextures() {
    GLint texture_object_handles[3];
    glGenTextures(3, texture_object_handles);

    for (int i = 0 ; i < 3 ; ++i) {
        glActiveTexture(GL_TEXTURE0 + i);
        glBindTexture(GL_TEXTURE_2D, texture_object_handles[i]);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexImage2D(GL_TEXTURE_2D, ...);
    }
    return;
}

void draw() {
    // Draw three different materials without rebinding any textures.
    for (i = 0 ; i < 3 : ++i) {
        ... specify other uniforms and attributes
        glUniform1i(texture_location, i);
        ... 
        glDrawElements(...);
    }
    return;
} 
```

# c++ - 如何检测 Windows 2012 核心版 (C++)

> ID：13065479
> 
> 赞同：4
> 
> 时间：2012-10-25T09:25:01.587
> 
> 标签：c++, core, windows-server

我需要在我的程序中检测 Windows 2012 上的版本。
在以前的操作系统上，我使用了 GetProductInfo 的 pdwReturnedProductType，但根据 msdn：

> PRODUCT_*_SERVER_CORE 值不会在 Windows Server 2012 中返回。例如，基本服务器
> 版本 Server Datacenter 用于构建两种不同的安装选项：“完整服务器”
> 和“核心服务器”。对于 Windows Server 2012，GetProductInfo 将返回 PRODUCT_DATACENTER，无论在产品安装期间使用的选项如何。

还有其他检测核心版本的可能性吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:49:50.497

```
HKLM\Software\Microsoft\Windows NT\CurrentVersion\Server\ServerLevels\
    ServerCore = 1
    Server-Gui-Mgmt = 1
    Server-Gui-Shell = 1 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/hh846315%28v=vs.85%29.aspx)，使用这些注册表值是一种方法。另一种方法是解析 dism 的输出`/online /get-features /format:table`并查看功能 ServerCore-FullServer 是启用还是禁用。如果它被禁用，那么您处于 servercore gui-less 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:45:02.980

您可以创建一个程序/函数来测试 .NET Core 版本中不存在的特性/库。例如：

```
using System;

public class CoreChecker
{
    public static void Main(string args[])
    {
        try
        {
            ImportNonCoreComponent();

            Console.WriteLine("NonCoreAssembly found... this is full server.");
        }
        catch (Exception e)
        {
            Console.WriteLine("NonCoreAssembly not found... this is core server.");
        }
    }

    public static void ImportNonCoreComponent()
    {
        using NonCoreAssembly;
    }
} 
```

如果这不起作用，您需要将 using 移动到类范围，然后在 ImportNonCoreComponent 中从 NonCoreAssembly 创建一个类（我不记得它是如何工作的确切语义）。

注意： using 语句需要与测试函数隔离。当 JIT 编译器处理它时，它会抛出一个异常。该异常不会被测试函数处理，因此 try...catch 语句需要在调用它的方法中。

您可以使用此技术在 MSI 中实现自定义操作以在安装期间失败，或者将其用作 C# 应用程序的一部分以显示“您需要使用完整服务器”的消息。（如果他们安装应用程序然后降级到核心，这将起作用）。

如果差异是行为上的，您可以在测试函数中检查该行为。

确保测试功能适用于不同的场景和不同的 .NET 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:55:45.020

实际上，我没有找到任何正确的方法来检测 Windows Core Edition。
因此，对于 Win 2012，解决方案是检测 dwm.exe 进程是否正在运行（桌面窗口管理器）。它始终在运行，不能被用户杀死，并且在 Windows Core 版本中不存在。

# c# - 对于运算符重载，C# 编译器如何决定哪种实现适用于混合类型的操作数？

> ID：13065480
> 
> 赞同：4
> 
> 时间：2012-10-25T09:25:03.663
> 
> 标签：c#, overloading, operator-keyword

```
int normal;
int? nullable;
var x = normal/nullable; // expression evaluates to Nullable<int>
var y = nullable/normal; // also Nullable<int> 
```

编辑：我最初的问题有点吸引我不想要的答案。标题实际上总结了这个问题，而用于说明它的示例选择不当。

在上面，编译器只有一种可能：int.divide 运算符不支持可为空的 int 操作数，int? 确实如此，这就解决了。没有歧义，也不需要任何类型的在场规则。

但是，如果我有两种重载同一个运算符的类型，比如说除法，并且它们都支持另一种类型作为操作数之一，该怎么办？

这里真的有两个问题：

1）当两种类型都支持Type1/Type2和Type2/Type1时，编译器如何决定是使用Type1还是Type2的运算符？是否有从左到右的优先级（对于二进制操作）或其他？

2) 是否有关于对称性等操作的任何假设？换句话说，A + B 必须始终等于 B + A，还是取决于类型？

最后，这些问题可能有点学术性，因为在许多实际场景中，任何类型的方法（无论是虚拟方法、普通实例方法还是静态“实用”方法，即使后者最接近于运算符）都可以用于同样的结局。再说一次，在某些情况下，通过使用运算符而不是普通方法语法来启用更易于阅读的语法可能会获得真正的价值。（语法是语言首先具有运算符的唯一原因；它毕竟只是一种方法。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:27:58.543

> 编译器如何确定它是可空类型的除法运算符，而不是适用的常规 int 运算符？

因为无法应用“常规”运算符。
这当然使用普通运算符：

```
 var x = normal/nullable.Value; 
```

但是，当您结合正常和可空值时，请考虑可空值是“未知的”。多少钱`x + unknown`？又是未知数。并且因为结果可能是`null`表达式的结果类型，所以必须可以为空。

# c++ - C++ 中的密集索引映射

> ID：13065483
> 
> 赞同：0
> 
> 时间：2012-10-25T09:25:15.840
> 
> 标签：c++, map

我很难找到一种容器，也许我使用的命名不正确。

有谁知道像 std::map 这样的 C++ 容器，但关键是整数类型。它具有按索引插入、删除和检索的 O(1) 复杂度。它的迭代器应该遍历由索引（键）映射的元素。它还应该以有序的方式遍历索引。它应该是随机访问并且具有 O(1) 复杂度才能移动到任意位置。

我愿意考虑迭代器是双向的并且它的递增/递减是 O(1) 复杂度的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:27:33.037

**你在问不可能的事**

`O(1)`按顺序删除、插入、搜索和迭代将`O(n)`通过推送所有元素来启用排序，然后按顺序迭代。

[以整数排序](http://en.wikipedia.org/wiki/Integer_sorting)而闻名的最佳算法是`O(n * sqrt(loglogn))`，所以如果我们有像您描述的那样 - 它会击败最知名的整数排序算法。

* * *

**编辑**（根据您对问题的评论）：

如果您可以使用`O(1)`搜索/查找/插入，但不保证迭代顺序 - 您可以使用[unordered_map](http://www.cplusplus.com/reference/stl/unordered_map/)，它实现了一个[哈希表](http://en.wikipedia.org/wiki/Hash_table)。

# ios - 在 Rubymotion 中安装 Facebook-iOS-SDK 3.1.1 时遇到问题

> ID：13065490
> 
> 赞同：0
> 
> 时间：2012-10-25T09:25:27.310
> 
> 标签：ios, facebook-ios-sdk, rubymotion

我正在尝试将 Facebook-iOS-SDK 安装到我的 RubyMotion 项目中，但遇到了一些障碍。

根据[入门说明](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)的第 5 节，我应该包括 FacebookSDK 框架和 SQLite3。

我知道如何在 XCode 中执行这些操作，但不知道何时使用 Rubymotion - 有人可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:14:47.887

我建议通过motion-cocoapods gem 使用CocoaPods 包含它。

将 motion-cocoapods 添加到您的 Rakefile：

```
require 'motion-cocoapods' 
```

在您的应用设置中，添加以下内容：

```
app.pods do
  dependency 'Facebook-iOS-SDK'
end 
```

因此还包括 sqlite 库：

```
app.libs += ['/usr/lib/libz.dylib', '/usr/lib/libsqlite3.dylib'] 
```

在你的框架下面添加这个：

```
app.weak_frameworks += %w{ AdSupport Accounts Social } 
```

做一个`rake clean`然后再次构建，你应该安装它。哦，`gem install motion-cocoapods`如果您使用捆绑器，可能会将其放入您的 Gemfile 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:50:36.023

一些人对此有疑问，所以我写了一篇博客文章详细说明了这些步骤：

[如何在 RubyMotion 项目中使用 Facebook iOS SDK](http://gavinmorrice.com/blog/posts/30-how-to-use-the-facebook-ios-sdk-in-your-rubymotion-project)

再次感谢 Jamon Holmgren 为我指明了正确的方向！

# facebook - 喜欢按钮 - 当我从 Facebook 返回页面时，它没有被“点赞”

> ID：13065491
> 
> 赞同：2
> 
> 时间：2012-10-25T09:25:33.863
> 
> 标签：facebook

我在我的网页上单击我喜欢按钮。好吧，在我的 Facebook 个人资料上，我可以看到我喜欢它。

现在，当我点击 Facebook 上的这个链接时，它会打开“点赞”页面，但在“点赞”按钮上却没有“点赞”。

事实上，我喜欢的链接是[http://www.mywebsite.com/?ID=1](http://www.mywebsite.com/?ID=1)。

从 Facebook 打开的链接是[http://www.mywebsite.com/?ID=1&fb_action_ids=4752322324997&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582](http://www.mywebsite.com/?ID=1&fb_action_ids=4752322324997&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582)（所以两个不同的“位置”）。它增加了一些令人上瘾的参数。

为什么？我该如何解决？我的代码（直接取自 facebook 开发者页面）：

```
<div id="fb-root"></div>
<script>
    (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1&appId=25352352352";
    fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script>

<fb:like send="false" layout="button_count" width="450" show_faces="false"></fb:like> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:09:23.477

放在身体之后

```
<div id="fb-root"></div

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];

  if (d.getElementById(id)) return;

  js = d.createElement(s); js.id = id;

  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxxxxxx";

  fjs.parentNode.insertBefore(js, fjs);

}(document, 'script', 'facebook-jssdk'));
<script> 
```

appId= 输入您的应用程序 ID。

应用程序不应处于沙盒模式。

还要检查 Firefox 是否有任何 Javascript 错误。

将代码放在您想要的按钮下方

```
<div class="fb-like" data-send="false" data-width="450" data-show-faces="true"></div> 
```

喜欢按钮需要应用程序 ID。

# perl - 如何在 Perl POD 派生的手册页中使用 Unicode 字符？

> ID：13065495
> 
> 赞同：9
> 
> 时间：2012-10-25T09:25:53.160
> 
> 标签：perl, unicode, internationalization, manpage, perl-pod

如果这是不可能的，那么处理从 UTF-8 编码的 POD 派生的手册页的最佳做法是什么？

为了在 POD 中使用 Unicode，首先要做的是使用指令

```
=encoding UTF-8 
```

（如此处所讨论[）](https://stackoverflow.com/questions/207871/how-do-i-use-unicode-characters-in-pod-and-perldoc)。和工具可以正常工作`pod2text`并`pod2html`产生完美的 UTF-8 编码输出。

但是，该`pod2man`工具不会：

```
pod2man -u MyModule.pm | nroff -Tutf8 -man | less 
```

也没有`perldoc`。非 ASCII 字符全部被损坏或 X-ed。关于 perlbug 是否可能是**roff*中的错误，存在[一些不确定的讨论。](https://rt.perl.org/rt3//Public/Bug/Display.html?id=111448)`pod2man`

由于我的模块专门处理 Unicode 并打算在 CPAN 上分发，因此启用 Unicode 的手册页是必须的。

我正在使用 Perl 5.14.2、perldoc 3.15 和 *roff 1.21。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T06:03:42.760

你很幸运！ [这个错误](https://rt.cpan.org/Ticket/Display.html?id=26121)似乎已[在 Pod::Perldoc 3.16 中修复](https://metacpan.org/source/MALLEN/Pod-Perldoc-3.17/Changes#L46)。所以只需更新 Pod::Perldoc，问题就解决了一半。

但是，pod2man 来自[不同的发行版](https://metacpan.org/release/podlators)，是完全不同的代码库。对于 UTF-8，它仍然被破坏。不幸的是，Perl 安装程序使用它来生成手册页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T12:09:53.027

所有`perldoc`, `pod2man`,`nroff`都可以正确处理 Unicode UTF-8 字符。不幸的是，诸如 Build.PL 和*cpan*程序之类的 Perl 安装程序还不能。因此，除非您在安装过程中手动进行一些摆弄，否则安装的手册页将被破坏。

[对于我的最小示例](https://gist.github.com/3964396)，这些都可以正常工作：

```
perldoc lib/MyModule.pm        # works as of 3.16 (@Schwern)
perldoc -t lib/MyModule.pm     # display with pod2text
pod2man -u lib/MyModule.pm     # produces UTF-8 man page
pod2man -u lib/MyModule.pm | nroff -Tutf8 -man - -Kutf8 | less 
```

`nroff`仅当您将*输入*编码 ( `-K`) 也传递给*groff* ( [source](http://www.simplicidade.org/notes/archives/2012/07/tip_homebrew_perldoc_groff.html) ) 时才有效；`-`您必须使用选项结束开关来保护它。

这很好。但是，大多数用户都希望安装文档，然后使用`man MyModule`或进行查阅`perldoc MyModule`。在 的情况下`perldoc`，您的选择是使用最新版本 (3.16) 或`-t`switch。

在 的情况下`man`，如果您使用 Build.PL (Module::Build) 安装模块，您可以在安装之前修复损坏的生成文档：

```
perl Build.PL
./Build
# now overwrite the broken man pages:
pod2man -u -s 3pm lib/MyModule.pm blib/libdoc/MyModule.3pm
./Build install 
```

迷人的！现在您可以使用`man MyModule`.

如果您使用*cpan*安装模块，您的手册页将被破坏。（您可以在本地 CPAN 构建目录上尝试相同的解决方法，例如`~/.cpan/build`，这也应该可以。）

# c++ - C++ 帮助 - getline

> ID：13065499
> 
> 赞同：0
> 
> 时间：2012-10-25T09:26:03.210
> 
> 标签：c++, whitespace, getline

我已经做 C++ 两个星期了，我正在创建一个非常简单的程序，它允许用户输入他们的名字，然后输出全名，这是代码；

```
#include <iostream>
#include <string>

using namespace std;

int main ()
{
    string first ;
    string middle ;
    string last;

    cout << "What is your firstname?" << endl;
    getline(cin, first);
    cout << "Your firstname is ";
    first = first;
    cout << first << endl;
    cout << endl;

    cout << "What is your middle name?" << endl;
    getline(cin, middle);
    cout << "Your middle name is ";
    middle = middle;
    cout << middle << endl;
    cout << endl;

    cout << "What is your lastname?" << endl;
    getline(cin, last);
    cout << "Your lastname is ";
    last = last;
    cout << last << endl;
    cout << endl;

    cout << "Your full name is " <<  first + middle + last << endl;

    system ("pause");
    return 0;
} 
```

我遇到的问题是它不会在最后一个 cout 中输出空格

```
cout << "Your full name is " <<  first + middle + last << endl; 
```

任何帮助，将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:39:41.083

将您的输出线更改为

```
cout << "Your full name is " <<  first << " " << middle << " " << last << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:43:59.040

那是因为你没有告诉它在我认为你想要它们的地方写空间。

我的猜测是你得到的空间就好了

```
"Your full name is " 
```

那么你想要你和字符串之间`first`的空格吗`middle`？`last`但是你永远不会在那里添加任何空格。

看起来像的部分

```
<<  first + middle + last << 
```

必须更改为包含空格

```
<<  first + " " + middle + " " + last << 
```

所以你最后的整个 cout 应该是

```
cout << "Your full name is " <<  first + " " + middle + " " + last << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:46:31.503

```
#include <iostream>
#include <string>

using namespace std;

int main ()
{
    string first ;
    string middle ;
    string last;

    cout << "What is your firstname?\n";
    getline(cin, first);
    cout << "Your firstname is " << first << "\n\n";

    cout << "What is your middle name?\n";
    getline(cin, middle);
    cout << "Your middle name is " << middle << "\n\n";

    cout << "What is your lastname?\n";
    getline(cin, last);
    cout << "Your lastname is " << last << "\n\n";

    cout << "Your full name is " <<  first +" "+ middle +" "+ last << "\n\n";

    system ("pause");
    return 0;
} 
```

# ado - 如何记录 ADO 连接的执行语句

> ID：13065500
> 
> 赞同：2
> 
> 时间：2012-10-25T09:26:02.473
> 
> 标签：ado, inno-setup

我正在使用ado连接从inno[连接到sql 2008](https://stackoverflow.com/questions/12260493/connect-to-sql-2008-using-inno-setup)，我想知道我们是否可以将详细信息记录到文件中，以便捕获sql抛出的错误。

注意：通过 ado 连接我不只是执行选择查询，我正在使用 ado 连接来执行一组语句来创建数据库、过程、表等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:33:44.403

要记录特定于数据库提供程序的错误，请使用ADO对象的[`Errors`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675299%28v=vs.85%29.aspx)集合。[`Connection`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681519%28v=vs.85%29.aspx)如何将这些错误记录到文件中，显示以下伪脚本：

```
procedure ConnectButtonClick(Sender: TObject);
var
  I: Integer;  
  ADOError: Variant;
  ADOConnection: Variant;  
  ErrorLog: TStringList;
begin
  ErrorLog := TStringList.Create;
  try    
    try
      ADOConnection := CreateOleObject('ADODB.Connection');
      // open the connection and work with your ADO objects using this
      // connection object; the following "except" block is the common
      // error handler for all those ADO objects
    except
      // InnoSetup scripting doesn't support access to the "Exception" 
      // object class, so now you need to distinguish, what caused the
      // error (if ADO or something else); for this is here checked if
      // the ADO connection object is created and if so, if its Errors
      // collection is empty; if it's not, or the Errors collection is
      // empty, then the exception was caused by something else than a
      // database provider
      if VarIsEmpty(ADOConnection) or (ADOConnection.Errors.Count = 0) then
        MsgBox(GetExceptionMessage, mbCriticalError, MB_OK)
      else
        // the Errors collection of the ADO connection object contains
        // at least one Error object, but there might be more of them,
        // so iterate the collection and for every single Error object
        // add the line to the logging string list
        for I := 0 to ADOConnection.Errors.Count - 1 do
        begin
          ADOError := ADOConnection.Errors.Item(I);
          ErrorLog.Add(
            'Error no.: ' + IntToStr(ADOError.Number) + '; ' +
            'Source: ' + ADOError.Source + '; ' +
            'Description: ' + ADOError.Description          
          );
        end;      
    end;
  finally
    ErrorLog.SaveToFile('c:\LogFile.txt');
    ErrorLog.Free;
  end;
end; 
```

# regex - 使用正则表达式匹配双换行符

> ID：13065501
> 
> 赞同：2
> 
> 时间：2012-10-25T09:26:04.020
> 
> 标签：regex, edifact

我正在编写一个正则表达式，它将从 EDIFACT UN 代码列表中提取各种信息。由于有数以万计的代码，我不想全部输入，所以我决定使用正则表达式来解析文本文件并提取出我需要的位。文本文件的结构使我可以轻松识别我想要的位。

我已经使用[Regex Hero](http://regexhero.net/tester/ "正则表达式英雄")创建了以下 Regex来测试它，但我无法让它将所有内容匹配到**codeComment**组的双换行符。我试过使用字符类**[^\n\n]**但这仍然不匹配双换行符。

**注意：**我在 Regex Hero 上选择了 Multiline 选项。

```
(?<element>\d+)\s\s(?<elementName>.*)\[[B|C|I]\]\s+Desc: (?<desc>[^\n]*\s*[^\n]*)
^\s*Repr: (?<type>a(?:n)?)..(?<length>\d+)
^\s*(?<code>\d+)\s*(?<codeName>[^\n]*)
^\s{14}(?<codeComment>[^\n]*) 
```

这是我用来匹配的示例文本。

-------------------------------------------------- --------------------

*   1073 文档行动作代码 [B]

        描述：指示与文档行关联的操作的代码 。

    代表：一个..3

    1 包含在单据/交易
        中 单据行包含在
        单据/交易中。
        也应该捕捉到这一点。

    2 从单据/交易
        中排除 单据行 从单据/交易中排除
        。

我想要的是 codeComment 包含以下内容：

```
The document line is included in the
          document/transaction.
          should capture this as well. 
```

但它只提取第一行：

```
The document line is included in the 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:31:22.297

在一个字符类中，每个字符都算一次，无论你写它的频率如何。所以一个字符类不能用于检查连续的换行符。但是您可以使用前瞻断言：

```
^\s{14}(?<codeComment>(?s)(?:(?!\n\n).)*) 
```

`(?s)`打开单行模式（以允许点匹配换行符）。

`(?!\n\n)`断言当前位置没有两个连续的换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-13T03:52:50.770

尝试

```
 [\r\n]{2,} 
```

“匹配双换行符”

在 DWR 中用于删除双重/臃肿的换行符（由于某种原因从解压缩文件中遗留下来）

更多信息： [如何删除解压缩后出现在 PHP/CSS/JS 文件中的不需要的“额外换行符”？](https://stackoverflow.com/questions/56570846/how-to-remove-unwanted-extra-line-breaks-that-appear-in-php-css-js-files-after)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-18T18:25:28.160

这个很简单，最适合我：

```
/[\r]?\n[\r]?\n/g 
```

# c# - 使用 C#.NET 执行外部 EXE

> ID：13065504
> 
> 赞同：2
> 
> 时间：2012-10-25T09:26:24.207
> 
> 标签：c#, asp.net

我正在 C# 中执行一个进程，但我希望能够在不指定路径的情况下执行它。我在哪里可以将可执行文件放在项目中，以便代码在不指定路径的情况下找到它？

目前我有：

```
 ProcessStartInfo psi = new ProcessStartInfo();
        psi.FileName = @"C:\Docs\wkhtmltopdf.exe"; 
```

哪个运行良好，但我想结束的是：

```
 ProcessStartInfo psi = new ProcessStartInfo();
        psi.FileName = "wkhtmltopdf.exe"; 
```

我尝试将 EXE 放在项目的文件夹中、项目的根目录中、项目的`bin`文件夹中 - 均未成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:38:06.873

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = "wkhtmltopdf.exe";  
psi.WorkingDirectory = Environment.CurrentDirectory;
Process proc = Process.Start(psi); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:34:43.407

我现在在猜，但也许这会有所帮助？

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)

只需将此路径设置为`Environment.CurrentDirectory`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:31:46.773

随时放置二进制文件并将此文件夹添加到系统的 %PATH% 变量中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:39:16.793

我会使用其中一个[Enviroment.SpecialFolders](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)。

然后，您可以推断出正确的路径，而无需硬编码任何值或请求用户输入。

# c# - 为什么 StreamWriter 会覆盖我的文件？

> ID：13065508
> 
> 赞同：5
> 
> 时间：2012-10-25T09:26:35.410
> 
> 标签：c#, filestream, streamwriter

我`SteamWriter`用来向文本文件写入内容，但是它用新数据覆盖旧数据。我如何确保它只会添加新数据而不是覆盖旧数据？
我的代码：

```
class Program
{
    const string filename = @"C:\log.txt";
    static void Main()
    {
        FileStream fs;
        fs = new FileStream(filename, FileMode.Create, FileAccess.Write);
        StreamWriter writer = new StreamWriter(fs);
        writer.WriteLine("test");

        writer.Close();
        fs.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T09:29:09.273

如果你使用`FileMode.Create`，[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)：

> 指定操作系统应该**创建一个新文件**。如果文件*已经存在*，**它将被覆盖**。这需要 FileIOPermissionAccess.Write 权限。FileMode.Create相当于请求如果文件不存在就使用CreateNew；否则，使用截断。如果文件已经存在但为隐藏文件，则会抛出 UnauthorizedAccessException 异常。

因此`FileMode.Append`，如果要将内容添加到文件末尾，则需要改用：

> *如果文件存在*，则打开文件并**查找文件末尾**，或 **创建一个新文件**。这需要 FileIOPermissionAccess.Append 权限。FileMode.Append 只能与 FileAccess.Write 结合使用。试图在文件结尾之前寻找一个位置会引发 IOException 异常，并且任何读取尝试都会失败并引发 NotSupportedException 异常。

```
FileStream fs = new FileStream(filename, FileMode.Append, FileAccess.Write); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-19T04:27:54.613

要附加到文件，您可以将流的位置更新到末尾。

```
...
using (FileStream fs = new FileStream(filename, FileMode.OpenOrCreate, FileAccess.Write))
{
    fs.Seek(0, SeekOrigin.End);
    using (StreamWriter writer = new StreamWriter(fs))
    {
        // To append, update the stream's position to the end of the file
        writer.WriteLine("test");
    }
}
... 
```

附带说明一下，如果您打算覆盖文件，并且原始文件的长度比新数据的长度长，则在完成写出文件后，您需要在基础文件流上使用 SetLength() . 换句话说，

```
 ...
    {
        writer.WriteLine("test");
        fs.SetLength(fs.Position);
    }
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:28:34.300

尝试这个

```
string path = your file path;
   using(StreamWriter sw = new StreamWriter(path,true))
           {

                    sw.WriteLine("string here");
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:30:34.550

```
fs = new FileStream(filename, FileMode.Append, FileAccess.Write); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T09:36:40.680

正如其他人指出的问题，我想我会建议一个更简单的解决方案

```
File.AppendAllText(filename, "test"); 
```

# asp.net - 带有 jQ uery UI 和 jQGrid 的中文 ASP.NET MBCompression

> ID：13065510
> 
> 赞同：0
> 
> 时间：2012-10-25T09:26:37.347
> 
> 标签：asp.net, encoding, compression

我们使用以下组件开发我们的多语言网站：

**MBCompresion** - 我们使用该库的源文件来集成 JS/CSS 缩小和压缩。此外，我们编写了 HttpFilter，它将页面上的所有 JS / CSS 组合到一个请求中（一个用于 JS，一个用于 CSS）。我们使用 MBCompression 中的 FileSystemStorage 作为缓存策略。

**jQueryUI Datepicker** - 我们按原样使用它，包括本地化文件。

**jQGrid** - 同样，我们按原样使用它，包括本地化文件。

所有这一切都很好...... ASPX 页面上的“脚本”标签组合成单个“脚本”标签。它向 jslib.axd HttpHandler 发出请求，处理程序将所有 JS 文件合并为一个文件，用 GZip 压缩它，将压缩文件保存在 FileSystem 上，然后将该文件发送给客户端。

**问题**：唯一的问题是网站切换到中文时。当网站在中文时，使用 GZip 压缩和 FileSystem 缓存，到达客户端的 javascript 无效 - 它包含奇怪的字符和错误，如“Uncaught SyntaxError: Unexpected token ILLEGAL”。经过一番调查，我发现只有 jqGrid 和 jQuery Datepicker 的中文本地化文件存在问题。
这是到达客户端的 javascript 示例（只是一些行）：

```
jQuery(function($){$.datepicker.regional['zh']={closeText:'s�',prevText:'&#x3c;
Uncaught SyntaxError: Unexpected token ILLEGAL
',nextText:'&#x3e;',currentText:'�)',monthNames:['','�','   ','�','�','m','','k',']','A','A','A�'],monthNamesShort:['','�','    ','�','�','m','','k',']','A','A','A�'],dayNames:['�','','�','   ','�','�','m'],dayNamesShort:['h�','h','h�','h  ','h�','h�','hm'],dayNamesMin:['�','','�',' ','�','�','m'],weekHeader:'h',dateFormat:'yy-mm-dd',firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:'t'};$.datepicker.setDefaults($.datepicker.regional['zh']);}); 
```

当我禁用 GZip 压缩时，一切正常。当我将缓存更改为 OutputCache 时，一切都可以...唯一的问题是，当我在中文上使用带有 FileSystemCache 的 GZip 时。所有其他语言（甚至日本人）都可以完美运行。

我什至不知道有什么问题。我认为它可能与Encoding或其他东西有关，但我在FileStream上没有看到将压缩JS写入文件的此类参数或属性。

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:30:27.693

解决了！！！问题出在 Utils 类中的 MBCompression StringToBytes 方法中：

```
 /// <summary>
        /// Convert string to byte[]
        /// <para>Faster than the built-in method, and prevent encoding problems</para>
        /// </summary>
        /// <param name="stringValue"></param>
        /// <returns></returns>
        public static byte[] StringToBytes(string value)
        {
            int length = value.Length;
            byte[] resultBytes = new byte[length];
            for (int i = 0; i < length; i++)
            {
                resultBytes[i] = (byte)value[i];
            }
            return resultBytes;
        } 
```

我将此方法更改为：

```
 /// <summary>
        /// Convert string to byte[]
        /// <para>Faster than the built-in method, and prevent encoding problems</para>
        /// </summary>
        /// <param name="stringValue"></param>
        /// <returns></returns>
        public static byte[] StringToBytes(string value)
        {
            Encoding Utf8 = Encoding.UTF8;
            return Utf8.GetBytes(value);
        } 
```

现在看起来一切正常，包括中文。

# c# - c#如何在特定类型的构造函数中传递参数？

> ID：13065512
> 
> 赞同：0
> 
> 时间：2012-10-25T09:26:42.383
> 
> 标签：c#, wcf, web-services

我正在创建一个网络服务（wcf）。我需要将参数传递给该 Web 服务中的构造函数，任何人都建议我这样做。. . .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:44:56.547

有一个名为 IInstanceProvider 的接口负责服务实例的创建和缓存。实现这个类而不是创建一个服务行为来注入它。尽管只保留无参数并进行任何初始化以获取您传入的这些参数，但这会更容易。

[http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iinstanceprovider.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iinstanceprovider.aspx) [http://www.darkside.co.za/archive/2008/02/21/custom-servicehostfactory-for -wcf 和 iis.aspx](http://www.darkside.co.za/archive/2008/02/21/custom-servicehostfactory-for-wcf-and-iis.aspx)

# clojure - Clojure 连续权力

> ID：13065515
> 
> 赞同：3
> 
> 时间：2012-10-25T09:26:51.070
> 
> 标签：clojure

程序员将如何继续产生从 1 到极限的 2 的连续幂？

我看到了文档[http://clojuredocs.org/clojure_core/1.2.0/clojure.core/iterate](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/iterate)但仍然需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T10:19:35.877

将任务分为两个步骤。

如果您首先创建一个惰性无限（无需事先确定您需要的最大功率）2 的幂序列，您可以随后以您选择的任何方式对其进行切片和切块

`(def powers-of-2 (iterate (partial *' 2) 2))`

获得前 n 次幂

`(take 5 powers-of-2)`

获得小于 70 的幂

`(take-while (partial > 70) powers-of-2)`

添加：

其实我更喜欢更一般的形式：

`(defn powers-of [n] (iterate (partial *' n) n))`

`(take 5 (powers-of 2))`

除了更通用之外，除非您有效率问题，否则通过每次为新的惰性序列调用高阶函数，您可以避免抓住头部并允许内存被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:49:46.500

您可以使用`for`表格：

```
(def powers (for [x (range)] 
                 (java.lang.Math/pow 2 x)))

(take 10 powers)
(1.0 2.0 4.0 8.0 16.0 32.0 64.0 128.0 256.0 512.0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:46:19.727

这是一种方法：

```
(defn powers-of-two
  [n]
  (map ; we are mapping over a sequence 
    (comp int #(Math/pow 2 %)) ; a composition of two functions
                               ; Math/pow returns doubles so int is used to make them into integers
    (range 1 (inc n)))) ; a sequence from 1 to 10

(powers-of-two 15) ;=> (2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:29:52.973

有两种解释“限制”的方法，从你的问题来看，不确定你的意思是哪一种。

另外，您说“从 1 开始直到极限”。您的意思是“从 0^2（即 1）开始直到一个限制”，还是“从 1^2（即 2）开始”？在下面的示例中，我假设您要从 0^2 开始。如果您想从 1^2 开始，请在下面的代码中`(range)`替换为。`(drop 1 (range))`

在第一种解释中，“limit”的意思是“给我一个 n 元素的序列，其中元素是 2 的连续幂”。Ankur 和其他人展示了如何做到这一点：

```
;; return the sequence (0^2, 1^2, 2^2 ... 149^2) 
(take 150 (for [x (range)] (java.lang.Math/pow 2 x)))
; => (1.0 2.0 4.0 8.0 ..... 7.1362384635297994E44)

;; this is functionally equivalent:
(for [x (range 150)] (java.lang.Math/pow 2 x)) 
```

另一种解释是“给我一系列小于限制的 2 的连续幂”。您可以通过以下方式做到这一点：

```
;; return the sequence (0^2, 1^2, 2^2 ... 2^7)
(for [x (range) :let [r (Math/pow 2 x)] :while (< r 150)] r)
; => (2.0 4.0 8.0 16.0 32.0 64.0 128.0) 
```

# c# - SqlException 未被用户代码处理

> ID：13065519
> 
> 赞同：3
> 
> 时间：2012-10-25T09:27:03.843
> 
> 标签：c#, asp.net, sql-server

我正在研究一个航空公司预订系统，一切都编译得很好......用户应该注册到该网站，然后检查可用的航班，然后用户可以预订航班，但是在预订航班时我遇到了问题无法插入数据库，弹出错误提示

```
SqlException was unhandled by user code
Violation of PRIMARY KEY constraint 'PK_Plist'. Cannot insert duplicate key in object 'dbo.Plist'.
The statement has been terminated. 
```

有什么问题或我在做什么不正确这是我的代码，并且此代码上闪烁异常

int i = cmd.ExecuteNonQuery();

完整代码

```
protected void Button1_Click1(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(constring);
        SqlCommand cmd = new SqlCommand();
        cmd.CommandType = CommandType.Text;
        cmd.Connection = con;
        con.Open();
        cmd.CommandText = "select flightid from schedule where flightid='" + DropDownList1.Text + "' and Flightname='" + DropDownList2.Text + "' and Fromstation='" + DropDownList3.Text + "' and Tostation='" + DropDownList4.Text + "' and dateandtimings='" + DropDownList6.Text + "'";
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        DataSet ds = new DataSet();
        da.Fill(ds, "emp");
        if (ds.Tables["emp"].Rows.Count > 0)
        {

            cmd.CommandText = "insert into Plist(Pid,passengername,flightid,Flightname,Fromstation,Tostation,category,Dateandtimings) values('" + Autonumber() + "','" + TextBox1.Text + "','" + DropDownList1.Text + "','" + DropDownList2.Text + "','" + DropDownList3.Text + "','" + DropDownList4.Text + "','" + DropDownList5.Text + "','" + DropDownList6.Text + "')";
            int i = cmd.ExecuteNonQuery();
            cmd.CommandText = "update pid set pid='" + Autonumber() + "'";
            int k = cmd.ExecuteNonQuery();
            if (DropDownList5.Text == "Firstclass")
            {
                cmd.CommandText = "update schedule set Firstclass=Firstclass-1 where flightid='" + DropDownList1.SelectedValue + "'";
                int j = cmd.ExecuteNonQuery();
            }
            else if (DropDownList5.Text == "Bussinessclass")
            {
                cmd.CommandText = "update schedule set Bussinessclass=Bussinessclass-1 where flightid='" + DropDownList1.SelectedValue + "'";
                int j = cmd.ExecuteNonQuery();

            }
            else
            {
                cmd.CommandText = "update schedule set Economicclass=Economicclass-1 where flightid='" + DropDownList1.SelectedValue + "'";
                int j = cmd.ExecuteNonQuery();
            }
            if (i > 0)
            {
                Label.Visible = true;
                Label.Text = "success";
            }

            else
            {
                Label.Visible = true;
                Label.Text = "error";
            }

            Label16.Visible = true;
            Label16.Text = "Your Ticket ID is " + a;
            con.Close();
        }
        else
        {
            Label16.Visible = true;
            Label16.Text = "There is no flight with these details so please check flight schedule and submit your request";
        }

    }
    protected void SqlDataSource4_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
    {

    }
    protected void SqlDataSource5_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:31:40.603

异常表示您正在插入重复的主键；可能 Pid 是这个主键。

您可以做的是从插入中取出 Pid，然后 Pid 的值将来自数据库本身。通常，主键来自计数器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:33:01.023

您正在尝试在主键字段中插入一个值。尝试为该列设置一个标识，以便 sql 自动创建没有重复的 id

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:28:41.297

您正在尝试插入重复的主键记录，这就是错误的原因。检查插入语句的主键值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T09:33:37.583

您正在尝试将重复的主键插入到表 Plist 中。主键必须是唯一的。我看起来您使用的这种自动编号方法不好。您可以更改 PID 列，使其成为标识列。使用标识列，sql server 将为您插入的每条记录提供一个唯一的序列号。

SQL 身份 [http://msdn.microsoft.com/en-us/library/ms186775.aspx](http://msdn.microsoft.com/en-us/library/ms186775.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T10:22:16.740

您要做的是首先检查现有记录，如果不存在，则添加新记录。您的代码将始终尝试添加新记录。

```
if notexists(select id from tabname where id='yourid')

begin

    -- Your insert statement

end

else

begin

    return 0 -- for existing value

end 
```

# sed - 从特定单词开始后删除所有单词

> ID：13065522
> 
> 赞同：1
> 
> 时间：2012-10-25T09:27:12.723
> 
> 标签：sed

如何删除以下字符串中从 COMMENT 单词开始的所有单词？

```
echo "first_mail_sent_date_time datetime NOT NULL  COMMENT 'The date and time',"  |  sed 's/ COMMENT \w*/ /g' 
```

上面的 sed 命令将只删除单词 COMMENT。我需要在 COMMENT 之后删除所有内容，但保留最后一个逗号。

我可以使用 awk 但为了保持一致性，我正在寻找 sed 解决方案。

```
awk -F'COMMENT' '{print $1 ","}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:43:11.627

这可能对您有用（GNU sed）：

```
sed 's/ COMMENT.*,/,/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:40:07.400

使用这个 sed 命令：

```
sed "s/ COMMENT.*'[^']*'/ /" 
```

**测试：**

```
str="first_mail_sent_date_time datetime NOT NULL COMMENT 'The date and time'FOO,"
echo $str | sed "s/ COMMENT.*'[^']*'/ /" 
```

**输出：**

```
first_mail_sent_date_time datetime NOT NULL FOO, 
```

# wpf - WPF Expander 控制下拉面板

> ID：13065528
> 
> 赞同：2
> 
> 时间：2012-10-25T09:27:42.390
> 
> 标签：wpf, xaml, expander

我想以这样的方式设置我的扩展器控件的样式，它可以有一个下拉面板，就像组合框控件一样。

下拉面板应该像它可以覆盖在其他项目（如组合框）之上。

这是我正在使用的扩展器的 XAML 样式：

```
<Style TargetType="{x:Type Expander}">
    <Setter Property="Background" Value="{StaticResource Brush_ButtonFill}"/>
    <Setter Property="BorderBrush" Value="{StaticResource Brush_ContainerButtonBorder}"/>
    <Setter Property="Foreground" Value="{StaticResource Brush_FontReadonly}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Expander}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*" x:Name="ContentRow"/>
                    </Grid.RowDefinitions>
                    <Border Visibility="Collapsed" Grid.Row="1" x:Name="ExpandSite" Background="{StaticResource BrushTransparent}" BorderBrush="{StaticResource Brush_DropdownShadow}">
                        <ContentPresenter Focusable="false"/>
                    </Border>
                    <Border Grid.Row="0" x:Name="Border" Background="{StaticResource Brush_ButtonBorder}" Visibility="Collapsed" BorderThickness="1"/>
                    <ToggleButton Template="{StaticResource ExpanderToggleButtonControlTemplate}" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" OverridesDefaultStyle="True" Background="{StaticResource Brush_ButtonFill}" BorderBrush="{StaticResource Brush_ButtonBorder}" BorderThickness="{TemplateBinding BorderThickness}" Foreground="{StaticResource Brush_ButtonBorder}" d:LayoutOverrides="VerticalAlignment" />
                    <ContentPresenter Margin="15,2,2,2" RecognizesAccessKey="True" ContentSource="Header" VerticalAlignment="Center" HorizontalAlignment="Left" IsHitTestVisible="False"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="True">
                        <Setter Property="Visibility" Value="Visible" TargetName="ExpandSite"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Opacity" Value="0.5"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

 <Style x:Key="ExpanderStyle_Dropdown" TargetType="{x:Type Expander}" BasedOn="{StaticResource TextStyle_BaseControl}">
    <Setter Property="Background" Value="{StaticResource Brush_ButtonFill}"/>
    <Setter Property="BorderBrush" Value="{StaticResource Brush_ButtonBorder}"/>
    <Setter Property="Foreground" Value="Black"/>
    <!--<Setter Property="Foreground" Value="{StaticResource Brush_FontReadonly}"/>-->
    <Setter Property="FontSize" Value="{StaticResource FontSizeMedium}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Expander}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="54"/>
                        <RowDefinition Height="*" x:Name="ContentRow"/>
                    </Grid.RowDefinitions>
                    <Border Visibility="Collapsed" Grid.Row="1" x:Name="ExpandSite" Background="{StaticResource Brush_ButtonShadow}" CornerRadius="0,0,5,5" Margin="0,-5,0,0" Panel.ZIndex="1000">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Focusable="false" Margin="5,10,5,5" Panel.ZIndex="1000"/>
                    </Border>
                    <Border Grid.Row="0" x:Name="Border" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="7" Padding="5" Background="{StaticResource Brush_CZBlueSelected}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Border Grid.Row="0" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="5,0,0,5" Padding="5" Grid.ColumnSpan="1" Margin="0,0,1,0"/>
                            <Border x:Name="Shadow" CornerRadius="5" Padding="5" Grid.ColumnSpan="2" BorderBrush="{StaticResource Brush_SearchinputBorder}" BorderThickness="0,0,0,2" Margin="0,0,0,-2"/>
                            <ToggleButton Template="{StaticResource ExpanderToggleButtonControlTemplate_DropDown}" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" OverridesDefaultStyle="True" Background="{StaticResource Brush_ButtonFill}" BorderBrush="{StaticResource Brush_ButtonBorder}" Grid.Column="1" BorderThickness="{TemplateBinding BorderThickness}" Foreground="{StaticResource Brush_ButtonBorder}" Margin="1,0,0,0" Height="44" />
                            <ContentPresenter Margin="4" RecognizesAccessKey="True" ContentSource="Header" VerticalAlignment="Center" HorizontalAlignment="Center" IsHitTestVisible="False"/>
                        </Grid>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="True">
                        <Setter Property="Visibility" Value="Visible" TargetName="ExpandSite"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Opacity" Value="0.5"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

现在在 XAML 屏幕中使用与以下相同的内容：

```
<Expander Name="expanderNextScan" Header="{Binding ElementName=listBoxExpander,Path=SelectedItem.Content}" ExpandDirection="Up" Grid.Column="3" Height="54" Width="Auto" Style="{DynamicResource ExpanderStyle_Dropdown}" >
        <Grid Background="#FFE5E5E5" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            <ListBox x:Name="listBoxExpander" Height="100" Width="{Binding ElementName=expanderNextScan,Path=ActualWidth}" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Visible" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" Margin="0,-10,0,0" Panel.ZIndex="5">
                <ListBoxItem Content="Go to Next Scan" FontSize="{StaticResource FontSizeMedium}" IsSelected="True"/>
                <ListBoxItem FontSize="{StaticResource FontSizeMedium}" Content="Print with preview" />
                <ListBoxItem FontSize="{StaticResource FontSizeMedium}" Content="Export as PDF"/>
                <ListBoxItem FontSize="{StaticResource FontSizeMedium}" Content="Export to DICOM"/>
            </ListBox>
        </Grid>
    </Expander> 
```

现在想要以这样一种方式设置它的样式，即展开器下拉列表中的列表框的 z-index 应该大于屏幕上的其他控件，以便它可以覆盖其他控件，例如组合框下拉列表。

请尽快回复。

# c# - 如果无法设置转换器参数，IValueConverter 保持状态

> ID：13065531
> 
> 赞同：4
> 
> 时间：2012-10-25T09:27:58.823
> 
> 标签：c#, wpf, ivalueconverter

我有一个 IValueConverter，它通过查找表将枚举值转换为本地化字符串，反之亦然。要找到正确的表，首先需要知道表的名称。当枚举值通过 Convert 方法传递到转换器时，可以找到它。当字符串通过 ConvertBack 方法传递到转换器时，它不是（枚举类型是唯一的，但字符串值不是）。

该转换器在 DataTemplates 上用于数据网格和属性网格中使用的编辑器。

在一种情况下，可以将表的名称作为 ConverterParameter 传递，因为 DataTemplate 是动态生成的。另一方面，似乎不可能做到这一点。我当前的解决方案在 Convert 方法中查找表名并将其存储以在 ConvertBack 方法中使用（即 IValueConverter 维护对 Convert 和 ConvertBack 的调用之间的状态）。这假设始终在 ConvertBack 之前调用 Convert，这似乎不是一个安全的假设。我正在使用转换器的每个绑定实例：

```
<converters:EnumToStringConverter x:Key="EnumToStringConverter" x:Shared="False"/> 
```

这是安全的还是会再次困扰我？转换器方法如下所示：

```
private string listName = null;

public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (parameter == null)
    {
        parameter = ListManager.FindListNameFromObject(value);
    }
    listName = (string)parameter;
    return ListManager.GetKeyFromValue((string)parameter, value);
}

public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{

    if (parameter == null)
    {
        parameter = listName;
    }
    return ListManager.GetValueFromKey((string)parameter, (string)value);
} 
```

我一直在尝试查看是否可行的另一种方法是在转换器上创建一个依赖属性，并以某种方式将其绑定到集合的名称。有没有办法将转换器的 DataContext 设置为与其作用的绑定相同？目前，转换器是一个静态资源，因此没有 DataContext。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:24:44.313

`Converters`不允许`DependencyObject`在 WPF 中使用 s，因为它们无法为其可能动态更改的属性提供投标。

下面的代码将 a 转换`Key`为`Value`&`Value`使用`Key`动态绑定`Dictionary`。

**XAML**

```
 <StackPanel>
   <StackPanel.Resources>
      <FrameworkElement x:key="ProxyElement" 
                        DataContext="{Binding}" />
   </StackPanel.Resources>
   <ContentControl Visibility="Collapsed" 
                   DataContext="{Binding MyDictionary}"
                   Content="{StaticResource ProxyElement}" />
   <TextBox Text="{Binding Key, 
                           Converter={StaticResource MyConverter},
                           ConverterParameter={StaticResource ProxyElement}}"/>
 </StackPanel> 
```

**C＃**

```
 public class MyConverter : IValueConverter
 {
     object Convert(value, parameter ..)
     {
          var dict 
              = ((FrameworkElement)parameter).DataContext 
                  as Dictionary<string, string>)parameter;
          return (dict[value.ToString()];
     }

     object ConvertBack (value, parameter ..)
     {
        var dict 
              = ((FrameworkElement)parameter).DataContext 
                  as Dictionary<string, string>)parameter;

        foreach(var item in dict)
        {
            if (item.Value == value)
            {
                return item.Key;
            }
        }
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:51:11.007

您总是可以将您的值绑定到“。” 然后，这将在转换器中为您提供 DataContext，然后您可以将状态保留在该对象中。

# c# - LINQ XML - 读取 XML 数据

> ID：13065532
> 
> 赞同：0
> 
> 时间：2012-10-25T09:28:01.380
> 
> 标签：c#, xml, linq

我在使用 LINQ 查询 XML 时遇到问题，无法解决

我正在尝试提取元素值

这是XML

```
<response>
  <make>DODGE</make>
  <make>CHRYSLER</make>
  <make>JEEP</make>
  <make>RAM</make>
  .......etc
</response> 
```

这是我到目前为止的代码......

```
 XElement parsedXml3 = XElement.Parse(xml3);
        var query2 = from m in parsedXml3.Descendants("response")
                     select m.Elements("make").Select(e => e.Value);
        List<string> ls = new List<string>();
        foreach (var o in query2)
        {
            ls = o.ToList();
        }
        ls.Sort(); 
```

感谢您的帮助 - 扩展解释会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:41:48.913

尝试这个。

```
XElement parsedXml3 = XElement.Parse(xml3); //parse your xml string 
```

没有必要使用`parsedXml3.Descendants("response")`，因为这里的响应是根节点

```
var makes= parsedXml3.Elements("make") //Get All make Elements
           .Select(x=>x.Value).ToList(); //Select Value from make Element 
                                         //and Store in List<string>
makes.Sort();
foreach (var  make in makes)
{
   Console.WriteLine(make);
} 
```

或者您可以将代码修改为

```
XElement parsedXml3 = XElement.Parse(xml3);
var ls= (from m in parsedXml3.Descendants("make")
             select m.Value).ToList();

//List<string> ls = new List<string>();
//foreach (var o in query2)
//{
//    ls.Add(o);
//}
ls.Sort(); 
```

# symfony - Symfony2 在调用 php app/console 时允许内存耗尽：schema:update

> ID：13065537
> 
> 赞同：10
> 
> 时间：2012-10-25T09:28:15.003
> 
> 标签：symfony

我有一个大问题...

我想更新我的数据库的架构，但我遇到了问题。

当我运行这个脚本时：

```
php app/console doctrine:schema:update --dump-sql 
```

我有这个错误：

```
Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to allocate 32 bytes) in /Applications/MAMP/htdocs/myApp/vendor/doctrine/lib/Doctrine/ORM/Tools/SchemaTool.php on line 509 
```

我试图增加**php.ini**中的 memory_limit但没有任何效果。

我已经跑了，`php app/console cache:clear`但它什么也没做。**还是一样的问题**...

请帮忙...

我什么都做不了...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-25T09:34:08.637

做：

```
php -d memory_limit=200M app/console doctrine:schema:update --dump-sql 
```

200M 或更高

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:38:23.243

首先通过创建输出 php 配置的 php 文件检查 php.ini 位置

```
<?php

    phpinfo(); 
```

在浏览器中运行此文件并检查“加载的配置文件”，这是 php.ini 的位置。

解决此问题的另一种方法是将下一行代码添加到 app/console 文件：

```
ini_set('memory_limit', '64M'); 
```

64 MB 应该足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T18:49:53.543

合并和总结所有答案和评论：

1.  您发出什么命令并不重要，重要的是您的 PHP 配置。

2.  这是错误：

    > 致命错误：允许的内存大小为 134217728 字节已用尽（尝试分配 434032 字节）

3.  解决方案：在您的 php.ini 中更改此示例，然后重新启动 Apache/web 服务器：

    ```
    ; Maximum amount of memory a script may consume (128MB)
    ; http://php.net/memory-limit
    memory_limit=512M 
    ```

测试和工作。

# android - 列表中选择的项目未显示为已选择

> ID：13065550
> 
> 赞同：0
> 
> 时间：2012-10-25T09:28:57.560
> 
> 标签：android, listview, android-listview

现在这可能是一个难以理解的问题。

**我真正想要的是：**要从通话记录中获取不同来电者的填充列表，让用户选择他想要的数量，然后通过点击按钮将它们列入黑名单。

因此，我得出结论，我想要的是以下

**结束我想要的：**有一个带有标题按钮和项目列表的活动。从项目列表中，用户可以选择任意数量的项目（通过使用复选框来实现，稍后将显示我是如何做到的），然后通过选择标题按钮执行操作。

**我做了什么：**活动布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" >
    <LinearLayout android:id="@+id/add_btn_layout" android:layout_width="match_parent" android:layout_height="50dp" android:padding="2dp" >
        <Button android:id="@+id/btn_blacklist_sender" android:layout_width="match_parent" android:layout_height="wrap_content" android:textSize="21dp" >
        </Button>
    </LinearLayout>
    <ListView android:id="@+id/list_chose_to_blacklist" android:layout_width="wrap_content" android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="horizontal" android:padding="2dp" >
<CheckBox android:id="@+id/isDelete" android:layout_width="wrap_content" android:layout_height="wrap_content" android:paddingLeft="43dp" android:paddingRight="3dp" />
</LinearLayout> 
```

在活动中：

```
public class CallerChooseToBlacklistActivity extends Activity {

Button btnBlacklistCaller;
ListView listCallers;
HashSet<String> toBlacklistNumbers = new HashSet<String>();
String caller = "Sender";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chose_to_blacklist);

    btnBlacklistCaller = (Button) findViewById(R.id.btn_blacklist_sender);
    btnBlacklistCaller.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            BlacklistNumberHelper helper = new BlacklistNumberHelper(
                    getApplicationContext());
            for (String number : toBlacklistNumbers) {
                helper.insert(number, DbHelper.TABLE_CALL_BLACKLIST,
                        DbHelper.C_CALL_BLACKLIST_NO);
            }
            helper.close();
            onResume();
        }
    });
    btnBlacklistCaller.setText(getString(R.string.btn_blacklist_caller));

    listCallers = (ListView) findViewById(R.id.list_chose_to_blacklist);
}

@Override
protected void onResume() {
    super.onResume();

    String[] projection = new String[] { CallLog.Calls._ID,
            CallLog.Calls.NUMBER };
    Cursor cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI,
            projection, null, null, null);

    for (int idx = 0; idx < cursor.getColumnCount(); idx++) {
        Log.d(MainActivity.TAG, idx + ":" + cursor.getColumnName(idx));
    }

    HashSet<String> distinctCallers = new HashSet<String>();
    ArrayList<String> allreadyBlacklisted = (new BlacklistNumberHelper(
            getApplicationContext())).getAllNumbers(
            DbHelper.TABLE_CALL_BLACKLIST, DbHelper.C_CALL_BLACKLIST_NO);
    if (cursor.moveToFirst()) {
        for (int i = 0; i < cursor.getCount(); i++) {
            try {
                String address = cursor.getString(
                        cursor.getColumnIndexOrThrow("number")).toString();
                boolean isPresent = false;
                for (String no : allreadyBlacklisted)
                    if (no.equalsIgnoreCase(address)) {
                        isPresent = true;
                        break;
                    }
                if (!isPresent)
                    distinctCallers.add(address);
                cursor.moveToNext();
            } catch (IllegalArgumentException e) {
            }
        }
    }

    ArrayList<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();

    for (String address : distinctCallers) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put(caller, address);
        fillMaps.add(map);
    }

    String[] from = { caller };
    int[] to = { R.id.isDelete };
    SimpleAdapter cursorAdapter = new SimpleAdapter(this, fillMaps,
            R.layout.row_blacklist, from, to);
    cursorAdapter.setViewBinder(VIEW_BINDER);
    listCallers.setAdapter(cursorAdapter);
}

// custom binder to bind columns customally
final ViewBinder VIEW_BINDER = new ViewBinder() {
    public boolean setViewValue(View view, Object arg1, String arg2) {
        if (view.getId() == R.id.isDelete) {
            CheckBox cb = (CheckBox) view;
            cb.setText(arg2);
            cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    String text = buttonView.getText().toString();
                    if (isChecked)
                        toBlacklistNumbers.add(text);
                    else if (toBlacklistNumbers.contains(text))
                        toBlacklistNumbers.remove(text);
                }
            });
            return true;
        } else {
            return false;
        }
    }

};
} 
```

**问题是什么：**当我选择一个项目并向下滚动并通过向上滚动所选项目返回时，所选项目上的检查发生了变化。虽然当我查看哈希集时`toBlacklistNumbers`，我最初选择的数字只是在那里。这意味着当我点击标题按钮时，它会将其列入黑名单。要从哈希集中删除它，我必须先选择它，然后取消选择它。但这不是我想要的。

当我向下滚动列表时，我不希望该项目被取消选择。这显然不是 android 版本的问题，因为我在 Android 2.2 和 Android 4.1 上检查过它

**更新**：通过更改选定的项目，我的意思是我选择的项目不再被选中，而是选择了它上面或下面的任何项目。另外，当我向下滚动时，下面列表中的许多项目也会被自动选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:37:25.840

您没有处理回收权，您没有`CheckBox`根据以下数据设置状态`toBlacklistNumbers`：

```
@Override
public boolean setViewValue(View view, Object arg1, String arg2) {
            if (view.getId() == R.id.isDelete) {
                CheckBox cb = (CheckBox) view;
                cb.setText(arg2);
                String data = (String) arg1;
                if (toBlacklistNumbers.contains(data)) {
                    cb.setChecked(true);
                } else {
                    cb.setChecked(false);
                }               
                cb.setOnCheckedChangeListener(mListener);
                return true;
            } else {
                return false;
            }
        } 
```

where`mListener`是一个单一的`OnCheckedChangeListener`，所以当用户滚动时你不会每次都创建一个：

```
private OnCheckedChangeListener mListener = new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            String text = buttonView.getText().toString();
            if (isChecked)
                toBlacklistNumbers.add(text);
            else if (toBlacklistNumbers.contains(text))
                toBlacklistNumbers.remove(text);
        }
    }; 
```

另外，不要`onResume`自己调用该方法，这是一个只能由系统调用的生命周期方法。

# iphone - “基于矢量的数据”解决方案比“基于瓦片的数据”解决方案复杂多少？

> ID：13065552
> 
> 赞同：0
> 
> 时间：2012-10-25T09:29:02.147
> 
> 标签：iphone, objective-c, ios, openstreetmap

我已经下载了 Objective-c 的 Routme 项目源代码，并使用了一些平铺数据示例。对于我们的应用程序，我们需要在我们的自定义服务器上托管所有平铺图像并将它们提供给我们的应用程序。但是，iPhone 的一个磁贴图像大小为 10KB，这使得欧洲或美国的整个磁贴包非常大。为了减少所需的带宽，我开始考虑使用源 OSM 矢量数据。这肯定会降低带宽要求，但是我们需要自己从矢量数据代码中实现地图渲染。这样的解决方案要复杂得多，是否有任何矢量数据呈现用于 openstreetmaps 数据的objective-c 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:52:22.707

它相当复杂，虽然带宽要求下降，但相应的 CPU 和 GPU 要求却上升。
我们开发了一个框架，用于处理可用的 OpenStreetMap 矢量数据，但仅作为商业产品。
如果您有兴趣，可以通过网页找到更多信息：http:
[//www.fasterimaging.com/?page_id=26](http://www.fasterimaging.com/?page_id=26)

# string - ORACLE - 字符串到数字

> ID：13065555
> 
> 赞同：5
> 
> 时间：2012-10-25T09:29:18.827
> 
> 标签：string, oracle, numbers

我对桌子上的一列有一点问题。该列是一个名为“prize”的 Varchar。数据类似于：

```
00008599
00004565
00001600
etc... 
```

他们必须成为：

```
85.99
45.65
16.00
etc... 
```

我尝试过使用 to_number 函数，但它不起作用。就像是：

```
SELECT to_number(prize, '999999.99') FROM TABLE 
```

错误是：ORA-01722

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T09:31:31.307

您可以使用 LTRIM 去除前导零并除以 100：

```
SELECT to_number(ltrim(prize, '0')) / 100 FROM table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:49:51.913

请注意，您自己必须处理字符串是 100 倍的事实。最简单的方法应该是这样的：

```
SELECT to_number(prize)/100 FROM TABLE 
```

# javascript - 从子窗口调用父 javascript 中的函数

> ID：13065560
> 
> 赞同：1
> 
> 时间：2012-10-25T09:29:43.177
> 
> 标签：javascript, jsp, window

我有一个javascript函数，它使用打开一个新的jsp窗口`window.open(...);` 我还有`function passValues(value);`

在我的子窗口中，我做了一些事情，最终我会将值传递给我的父 javascript，如下所示：

```
window.opener.passValues(value); 
```

当我尝试`'this'`在函数中使用时，它指的是`window.opener`.

这我不想发生.. 我希望我的 this 仍然是我调用`passValues function`.

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:14:54.903

发生这种情况是因为在事件处理程序中“this”指的是调用的函数。所以有必要做一个参考：`var self = this`在回调内部。并将“self”用作“this”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:32:22.367

`Function.prototype.call`使用or调用函数`Function.prototype.apply`。

```
window.opener.passValues.call( this, value ); 
```

这将`.passValues`使用 , 的当前值调用`this`，以将其固定到当前`window`对象，只需调用

```
window.opener.passValues.call( window, value ); 
```

* * *

`.call()`并且两者都提供了在*调用函数中*`.apply()`设置 *this 上下文变量的值的选项。

 ** * *

参考： .call( [)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call) , [.apply()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:50:19.277

`call`在您的子窗口中，使用or调用父函数`apply`并使用`this`

```
window.opener.passValues.call(this, value); 
```

或者如果您想传递多个参数，请使用 apply

```
window.opener.passValues.apply(this, [value1, value2]); 
```

但是，如果您在子范围 (this) 的上下文中调用父函数，则可以使用 this.value 访问子窗口的全局变量，因此传递值可能已过时。

请注意， 的值`this`取决于函数调用本身的上下文...例如，如果您从链接的 onclick 处理程序中调用它（顺便说一句，不要这样做），则指`this`的是链接的上下文，不给孩子`window`。当您从实例化对象（使用`new`）中调用它时也是如此`this`，指的是类的范围而不是子项`window`。如有疑问，请替换`this`为您希望调用该函数的对象的范围。

```
 window.opener.passValues.call(window, value); 
```*

# codeigniter - codeigniter中的ip地址数组验证

> ID：13065561
> 
> 赞同：0
> 
> 时间：2012-10-25T09:29:46.843
> 
> 标签：codeigniter, validation, ip

我想知道如何在 codeigniter 中进行 ip 地址数组验证。我有一个包含某些 IP 地址的数组。

```
 Consider texbox which is generated dynamically with name=ip[] and id auto increments like ip1 ip2......

 if for eg: $ip=$this->input->post('ip'); 
 $ip[0] =1.1.1.1, $ip[1]=2.2.2.2, $ip[2]=3.3.3.3 
```

我如何验证 IP 地址。我尝试使用以下内容：

```
 for ($i = $ip[0]; $i <= end($ip); $i++) {
                    if (!$this->input->valid_ip($i)) {
                        echo " Not a valid IP address";}} 
```

当使用 2.2.2.2、2.2.2.3、2.2.2.4 等接近的 IP 范围或单个 IP 地址时，它工作正常。但是当输入是 2.2.2.2、3.3.3.3、4.4.4.4 时，它会滞后。同样，当 2 个 ip 有效时它也会滞后，但如果第三个是“文本”，它就会滞后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:03:24.337

解决了问题，

```
 foreach($ip as $value){
       if (!$this->input->valid_ip($value)) {
       echo " <script>alert('Not a valid IP address');</script>";}} 
```

# c# - 剑道网格不显示数据

> ID：13065562
> 
> 赞同：-2
> 
> 时间：2012-10-25T09:29:51.990
> 
> 标签：c#, asp.net, json

我正在尝试将数据库中的数据绑定到 KendoUI Grid，但数据未显示...我正在从数据库中获取数据成功转换为序列化代码，但数据未显示在 Kendo Grid 中。请帮助我...

```
<div id="example" class="k-content">
<div id="grid"></div>

        <script type="text/javascript">           
            $(document).ready(function(){

                 $("#grid").kendoGrid({

                    dataSource:
                    {
                    type:"odata",
                    serverPaging: true,
                    serverSorting:true,
                    pageSize:100,
                    transport:
                    {
                        read: 
                        {
                        url:"Fetchdata.aspx",
                         contentType: "application/json;charset=utf-8",
                         dataType: "odata",
                        jsonReader: 
                                 {
                                    root: "rows",  
                                    page: "page",
                                    total: "total",
                                    records: "records",
                                    repeatitems: false               

                                }                  

                        }
                    }
                    },
                    height:100,
                    scrollable:
                    {
                        virtual: true
                    },
                    sortable: true,
                    columns: [
                         "dptId",
                          { title: "Name", field: "dptName" },
                          { title: "Description", field: "dptdescription" }
                              ]                                         
               });                
            });
        </script>
        </div> 
```

protected void Page_Load(object sender, EventArgs e) {

```
 Response.Write(GetData());
    Response.End();

}

protected string GetData()
{

    EmployeeBM empbm = new EmployeeBM();
    List < Departement> list= new List<Departement>();

    list = empbm.BindDepartment();
    return GridData(1, 1,list.Count, list);
}

public string GridData(int noOfPages, int startPage, int noOfRecords, List<Departement> list)
{
    var gridData = new
                       {
                           total = noOfPages,   
                           page = startPage,   
                           records = noOfRecords,   
                           rows = list,            
                       };

    var jsonSerializer = new JavaScriptSerializer(); 
    return jsonSerializer.Serialize(gridData);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:10:59.733

我在您的代码中看到了很多问题：

*   `dataType`不能设置为“odata” 。尝试“json”。引用[jQuery 文档](http://api.jquery.com/jQuery.ajax/)：

    > 默认值：智能猜测（xml、json、脚本或 html）

*   Kendo DataSource`type`也设置为“odata”，但您的页面显然不是 OData 服务。删除它。

*   您正在设置`jsonReader`Kendo 数据源不支持的设置。我想您需要使用[架构](http://docs.kendoui.com/api/framework/datasource#schema-object)设置。

# java - TreeMap 通用参数警告

> ID：13065566
> 
> 赞同：1
> 
> 时间：2012-10-25T09:29:54.830
> 
> 标签：java, generics, compiler-warnings, unchecked

```
Map<Date, Integer> m = new HashMap<Date, Integer>(); // line 1
Map<Date, Integer> sMap = new TreeMap(m);            // line 2 
```

第 2 行给出了这个错误：

> 类型安全：TreeMap 类型的表达式需要未经检查的转换才能符合 Map

我找到的解决方案是：[如何修复“List 类型的表达式需要未经检查的转换...”？](https://stackoverflow.com/questions/367626/how-do-i-fix-the-expression-of-type-list-needs-unchecked-conversion)

但是，`@SuppressWarnings("unchecked")`我的代码是否会失败或者是否存在安全的情况。更一般地说，我们什么时候可以安全地添加`@SuppressWarnings("unchecked")`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:32:39.487

实例化时尝试指定 TreeMap 的泛型类型。

```
Map<Date, Integer> m = new HashMap<Date, Integer>(); // line 1
Map<Date, Integer> sMap = new TreeMap<Date,Integer>(m); 
```

此答案假定您使用的是 java.util.TreeMap。请参阅：[http ://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:35:01.280

如果您使用 Java 7，则可以使用[菱形语法](http://docs.oracle.com/javase/7/docs/technotes/guides/language/type-inference-generic-instance-creation.html)：

```
Map<Date, Integer> m = new HashMap<>();
Map<Date, Integer> sMap = new TreeMap<>(m); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:32:49.383

正确的方法是：

```
1\. Map<Date, Integer> m = new HashMap<Date, Integer>();
2\. Map<Date, Integer> sMap = new TreeMap<Date, Integer>(m); 
```

如果您确定泛型类型，您还可以取消“未检查”警告。在这种情况下，你是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:34:50.373

如前所述，向 TreeMap 添加泛型参数可以解决问题，因为编译器现在可以**保证**不会发生无效转换。如果您省略泛型参数，编译器将无法为您提供此保证，因此会警告您。那么只有正确类型的对象才存储在 TreeMap 中是您的责任。

如果您确定只有正确的对象被放入 TreeMap，您可以放心地忽略该警告。如果它失败并且您在运行时遇到类转换异常，那是您自己的错（：

一般来说，如果您取消警告，您实际上是在忽略编译器的提示，即您的代码中可能存在问题。但是编译器是愚蠢的，在某些情况下您可以放心地说不会发生任何问题（例如，您有其他检查到位或不允许发生错误的设计）。如果是这种情况，您可以取消警告。

# css - CSS：3列布局，左侧动态全宽，中心和右侧自动内容宽度

> ID：13065571
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:30:11.913
> 
> 标签：css, multiple-columns, dynamic-columns

我需要做下一件事：

```
 max-width to center     content auto width    content auto width
<-----------------------><--------------------><-------------------->
          left                  middle                right 
```

所以中间/中心列和右列将在里面有内容并且宽度会自动增长。但是左边的，我需要尽可能宽，直到捕捉到中间的。

我现在所拥有的，它是中间和正确的，带有“float：right”。剩下一个，带有“float：left”。

但是这样一来，左上角的宽度就受到了限制。

如何使其尽可能宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:34:51.670

据我所知，这只能使用`display: table`. 如果我理解正确，[这](http://jsfiddle.net/guc9V/5/)就是你想要的。它使 div 充当表格单元格，并将左侧的一个设置为 100% 的宽度，自动填充任何空闲空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:36:07.113

让它们都向左浮动。这样它们都以最大宽度“倾斜”在左列上。

此外，您将需要一些宽度考虑或明确的条件..

[这将为您清除很多](http://www.dynamicdrive.com/style/layouts/item/css-liquid-layout-33-fluid-fluid-fluid/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:38:21.230

尝试这个：

[http://jsfiddle.net/vcw7Q/](http://jsfiddle.net/vcw7Q/)

仅使用 50-24-24% 完成...

HTML

```
<div id="divLeft">
    div left to center
</div>    
<div id="divRight1">
    div right 1
</div>    
<div id="divRight2">
    div right 2
</div> 
```

CSS

```
#divLeft{
    width: 50%;
    display: inline-block;
    background-color: forestGreen;
}
#divRight1{
    width: 24%;
    display: inline-block;
    background-color: blue;
}
#divRight2{
    width: 24%;
    display: inline-block;
    background-color: red;
} 
```

# git - git 拉错误

> ID：13065572
> 
> 赞同：2
> 
> 时间：2012-10-25T09:30:15.420
> 
> 标签：git, cross-platform

我正在尝试将在 Linux 机器上进行的提交拉入 Windows 机器。我收到此错误消息：

```
error: git checkout-index: unable to create file my/folder/name/: (Invalid argument) 
```

在*Linux*机器上似乎有 2 个这样*的“名称”*文件夹，分别称为：`'name'`和`'Name'`. 即使将它们合并`'name'`并重新提交后，我仍然会收到相同的错误消息。

在 Windows 上我有 git 版本 1.7.3.1.msysgit.0，在 Linux 上我有 git 版本 1.7.5.4。

我确实发现了[一堆](https://stackoverflow.com/questions/3689137/error-git-checkout-index-unable-to-create-file) [看似](https://stackoverflow.com/questions/10976765/error-git-checkout-index-unable-to-create-file-permission-denied)[相关的这种性质](https://stackoverflow.com/questions/6114301/git-checkout-index-unable-to-create-file-file-name-too-long)[的](https://stackoverflow.com/questions/1209902/git-checkout-and-reset-on-windows-occasionally-shows-random-files-have-changed) SO 问题，但没有一个有明确或相关的解决方案。

**更新：**文件托管在远程托管服务上，以便 Windows 和 Linux 机器从远程存储库中提取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:48:59.560

*由于解决方案的怪异，回答我自己的问题。*

第一步是 @Don Branson、@VonC 和 @robinst 建议的。我`clone`在我的 Windows 机器上清理了一个新文件夹。
这似乎不起作用，并且 git 返回了完全相同的错误。

但是`git status`，尽管存在同名文件夹并包含正确的文件，但将有问题的文件夹显示为“已删除”。
然后我上演并提交了“已删除”文件夹，推送到远程仓库。并从我的原始仓库中提取提交。*瞧*，分支已正确更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:11:32.407

当你`git pull`git 将按顺序应用提交。因此，即使最终提交合并了目录，它们也不会出现在它为到达 HEAD 而应用的提交中。我会在 Windows 机器上尝试一个新的 git clone。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:24:20.190

问题可能是 Git在删除`name`旧目录之前首先尝试创建新文件（使用新名称）。`Name`因此，当它尝试创建新目录`name`时，它不会注意到`Name`已经存在，因为它比较它们区分大小写。

您可以尝试以下操作（当然使用干净的工作目录）：

1.  递归删除`my/folder/Name`（旧位置）。
2.  做`git reset --hard origin/branchname`（你正在拉的分支）。

或者，只做一个新的克隆。

# osgi - 在给定包中引用 OSGi DS 的最佳实践

> ID：13065573
> 
> 赞同：0
> 
> 时间：2012-10-25T09:30:17.823
> 
> 标签：osgi, declarative-services

**我的要求：** 我有一项服务可以处理我的项目的持久性。让我将此服务称为 PersistenceProvider 服务，并假设它位于“my.persistenceservice”包中。

现在，我有另一个名为“my.persitenceconsumer”的包，它使用名为 MyPersistenseConsumer 的类之一的 bind() unbind() 方法引用 PersistenceProvider 服务。因此，当“my.persistenceconsumer”捆绑启动时，它将使用 bind() 方法获取 PersistenceProvider 服务的引用，并且 MyPersistenceConsumer 可以使用 PersistenceProvider 服务

但是，我还需要从“my.persitenceconsumer”包中的不同类中使用这个 PersistenceProvider 服务。

**我的问题是：** 在不同的类中使用这种共享服务的最佳方式是什么（在同一个包中）

**解决方案之一：** 我可以在“my.persitenceconsumer”包中添加 Activator 类 .. 具有静态 getInstance() 方法。可以由 MyPersistenceConsumer.bind() 调用并将 PersistenceProvider 与 Activator 一起存储。后面“my.persitenceconsumer”包中的所有类都可以通过 Activator 类使用 PersistenceProvider。

这是代码：

```
public class MyPersistenceConsumer {
  public void bindPersistenceProvider(PersistenceProvider ppRef) {
    MyPersistenceConsumerActivator.getInstance().bindPersistenceProvider(ppRef);
  }
}

public class MyPersistenceConsumerActivator {
  static MyPersistenceConsumerActivator instance;
  PersistenceProvider ppRef;

  public static getInstance() {
    return instance;
  }

  public void bindPersistenceProvider(PersistenceProvider ppRef) {
    this.ppRef = ppRef;
  }
  public PersistenceProvider getPersistenceProvider() {
    return ppRef;
  }

  public void start(BundleContext context) throws Exception {
        instance = this;
  }
}

public class MyClass1 {

  public void usePersistenceProvider(){
    PersistenceProvider pp Ref =
      MyPersistenceConsumerActivator.getInstance().getPersistenceProvider();
  }

}

public class MyClass2 {

  public void usePersistenceProvider(){
    PersistenceProvider pp Ref =
      MyPersistenceConsumerActivator.getInstance().getPersistenceProvider();
  }

} 
```

**最后：** 以上是好方法..还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:34:41.083

单身人士是 DS 试图消除的邪恶。单例创建脆弱的系统，它们与全局变量有相同的问题。

最好的解决方案是无耦合。使用 DS 我会使用：

```
@Component
public class MyClass1 {
  @Reference
  void setPP( PersistenceProvider pp ) { ... }
} 
```

MyClass2 也是如此。如果类之间存在实例关系，请传递对象，因为那时您已经耦合。与往常一样，最小化耦合并最大化内聚。

工厂和单例正是 OSGi 试图阻止的邪恶，有很好的理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T15:42:35.303

我推荐两种可能性：

*   制作使用持久服务声明性服务的对象。这个 SCR 将处理所有生命周期管理，您将获得非常模块化和可测试的类。
*   或者，您可以在这些对象的构造函数中传递对持久性服务的引用。这里唯一的问题是您必须确保这些对象在持久性服务消失后不会尝试访问它。

这些方法中的任何一种都优于您提出的基于单例的解决方案。

# ruby - 在本地覆盖 Vagrant 配置设置（每个开发人员）

> ID：13065576
> 
> 赞同：58
> 
> 时间：2012-10-25T09:30:33.053
> 
> 标签：ruby, vagrant

我希望一般地回答这个问题，但为了说明它，这里有一个用例：

我将 Vagrant 用于一个简单的 LMAP 项目。我使用独立的 Puppet 进行配置。现在，可能有一些开发人员坐在代理后面，他们需要对 VM 进行一些额外的配置。我在 Puppet 方面有一些工作：我可以将代理 IP（如果有）作为一个事实传递给`Vagrantfile`Puppet，如果它被设置，Puppet 会做出相应的反应。

我唯一的问题是：开发人员如何为他们的开发环境指定/覆盖此设置而无需更改`Vagrantfile`（受版本控制并且必须保持开发环境中立）？

如果人们可以在一个名为 eg 的文件中覆盖一些 Vagrant 设置，那就太好了`Vagrantfile.local`，我将通过`.gitignore`.

由于 Vagrantfile 只是 Ruby，我尝试了以下方法：

```
# Also load per-dev custom vagrant config
custom_vagrantfile = 'Vagrantfile.local'
load custom_vagrantfile if File.exist?(custom_vagrantfile) 
```

文件包含基本上有效，但看起来在包含的文件中，我不再处于同一个 Vagrant 上下文中......

```
Vagrant::Config.run do |config|
  config.vm.provision :puppet do |puppet|
    puppet.facter = { "proxy" => "proxy.host:80" }
  end
end 
```

...还“重置”了我在 main 中创建的所有其他 puppet 配置值`Vagrantfile`，这让我觉得我在这里走错了方向。我应该注意，我是 Ruby 的菜鸟；）

任何人都可以给我一个提示，甚至是一个可行的解决方案，说明如何在这里完成每个开发者的定制？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-05-11T05:53:09.407

这`Vagrantfile`只是 Ruby，所以 YAML 是另一种选择。

例如，在`Vagrantfile`我这样做：

```
# -*- mode: ruby -*-
# vi: set ft=ruby :
require 'yaml'

settings = YAML.load_file 'vagrant.yml'
db_ip_address = settings['db']['ip_address']
api_ip_address = settings['api']['ip_address']

Vagrant.configure("2") do |config|
  config.vm.box = "ffuenf/ubuntu-13.10-server-amd64"
  config.vm.box_url = "https://vagrantcloud.com/ffuenf/ubuntu-13.10-server-amd64/version/4/provider/virtualbox.box"

  config.vm.define "db" do |db|
    db.vm.synced_folder settings['db']['artifacts_dir']['host'], settings['db']['artifacts_dir']['guest']
    db.vm.network "private_network", ip: db_ip_address
    ... other stuff ...
  end

  config.vm.define "api" do |api|
    api.vm.synced_folder settings['api']['artifacts_dir']['host'], settings['api']['artifacts_dir']['guest']
    api.vm.network "private_network", ip: api_ip_address
    api.vm.network "forwarded_port", guest: settings['api']['forwarded_port']['guest'], host: settings['api']['forwarded_port']['host']
  end
end 
```

然后我有一个`vagrant.yml`用于开发人员特定配置的文件（我只是编了一个名字；你可以使用任何你喜欢的名字）：

```
db:
  ip_address: 192.168.4.14
  artifacts_dir:
    host: /Users/willie/myapp/db-scripts
    guest: /opt/myapp/db

api:
  ip_address: 192.168.4.15
  forwarded_port:
    host: 9080
    guest: 8080
  artifacts_dir:
    host: /Users/willie/myapp/artifacts
    guest: /opt/myapp/api 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-08T10:19:32.343

我建议使用环境变量来动态更改文件的行为，而`Vagrantfile`无需编辑文件本身。

举一个真实世界的例子，下面是默认情况下使用 Ubuntu 基础盒但有一个环境变量定义替代 Linux 发行版的方法：

```
if ENV['OPERATINGSYSTEM']
  if ENV['OPERATINGSYSTEM'].downcase == 'redhat'
    os_name = 'centos'
    config.vm.box     = 'centos'
    config.vm.box_url = 'https://dl.dropbox.com/u/7225008/Vagrant/CentOS-6.3-x86_64-minimal.box'
  else
    raise(Exception, "undefined operatingsystem: #{ENV['OPERATINGSYSTEM']}")
  end
else
  os_name = 'precise64'
  config.vm.box     = 'precise64'
  config.vm.box_url = 'http://files.vagrantup.com/precise64.box'
end 
```

本示例来自[https://github.com/puppetlabs/puppetlabs-openstack_dev_env](https://github.com/puppetlabs/puppetlabs-openstack_dev_env)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-30T01:36:10.110

如果您准备定义应用于所有 vagrant 框的设置，那么值得注意的是，“Vagrant 实际上会加载一系列 Vagrantfile，并在运行时合并设置。” （参考[https://docs.vagrantup.com/v2/vagrantfile/](https://docs.vagrantup.com/v2/vagrantfile/)）

所以我定义了以下内容`~/.vagrant.d/Vagrantfile`来增加我的 Vagrant 盒子的 RAM 量：

```
Vagrant.configure(2) do |config|
    config.vm.provider "virtualbox" do |vb|
      vb.memory = 2048
    end
end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-25T09:37:09.343

这是一个想法。它可能是“丑陋的”和“错误的”，但至少它有效:)

```
# file2.rb, this is your per-dev configuration file
puts "included external file which uses outer var: #{foo}"

# file1.rb, this would be your Vagrantfile
puts 'first'
foo = 'bar'

external = File.read 'file2.rb'
eval external
puts 'second' 
```

让我们运行它

```
$ ruby file1.rb
first
included external file which uses outer var: bar
second 
```

适应您的示例， file2.rb 将仅包含`config`不定义它的用法（`config`将从外部上下文提供）

```
 config.vm.provision :puppet do |puppet|
    puppet.facter = { "proxy" => "proxy.host:80" }
  end 
```

您的 Vagrant 文件可能如下所示：

```
Vagrant::Config.run do |config|
  external = File.read 'Vagrantfile.local'
  eval external

  # proceed with general settings here
  config.vm.provision :puppet do |puppet|
    puppet.facter = { "proxy" => "proxy.host:80" }
  end
end 
```

## 更新（另一种“数据驱动”方法）

```
# Vagranfile.local
config_values[:puppet][:facter][:proxy] = 'proxy.host:80'

# Vargantfile
Vagrant::Config.run do |config|
  config_values = {
    puppet: {
      facter: {
        proxy: nil
      },
      manifests_file: 'my_manifest.pp'

    }
  }
  external = File.read 'Vagrantfile.local'
  eval external # this should overwrite proxy config

  # proceed with general settings here
  config.vm.provision :puppet do |puppet|
    if config_values[:puppet][:facter][:proxy]
      puppet.facter = { "proxy" => config_values[:puppet][:facter][:proxy] } 
    end

    puppet.manifests_file = config_values[:puppet][:manifests_file]
  end
end 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-02T15:44:00.297

我相信这就是创建[Nugrant 插件](https://github.com/maoueh/nugrant)来解决的确切用例。它允许您的每个开发人员`.vagrantuser`在 YAML 中拥有一个（这是一个 .gitignore-ed 文件）指定自定义配置值，然后在`Vagrantfile`.

在您的情况下，代理开发人员的`.vagrantuser`文件如下所示：

```
proxy: 'proxy.host:80' 
```

你`Vagrantfile`看起来像这样（伪代码，我真的不知道 ruby​​）：

```
Vagrant::Config.run do |config|
  config.vm.provision :puppet do |puppet|
    if config.user.has_key?('proxy')
      puppet.facter = { "proxy" => config.user.proxy }
    end
  end
end 
```

您应该捆绑一个示例/参考 vagrantuser（即`vagrantuser.example`）文件，供您的开发人员复制并适应他们的环境。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-22T09:20:40.340

扩展@Willie Wheeler 的回答。我的设置是：

```
Root
|-- defaults.yml
|-- env.yml
|-- Vagrantfile 
```

**流浪文件**

```
# Load local env config
require 'yaml'
dir = File.dirname(File.expand_path(__FILE__))

# defaults
settings = YAML::load_file("#{dir}/defaults.yml")

if File.exist?("#{dir}/env.yml")
    env_settings = YAML::load_file("#{dir}/env.yml")
    settings.merge!(env_settings)
end
...
# Customize the amount of memory on the VM:
    vb.memory = settings["vb"]["memory"] 
```

**默认值.yml**

```
vb:
  memory: 1024 
```

**环境.yml**

```
vb:
  memory: 204 
```

这会将您拥有的任何默认值与您的 per-dev 配置合并。开发人员也很清楚他们可以实际更改哪些值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-03T12:25:02.623

考虑使用[vagrant-proxyconf](http://tmatilai.github.io/vagrant-proxyconf/)插件。它允许为全球所有 Vagrant VM 设置代理。

另一种解决方案是在配置期间运行外部 shell 脚本。我在开头使用单独`config.vm.provision`的部分`Vagrantfile`来做到这一点：

```
# reset: true below is needed to reset the connection to the VM so that new
# environment variables set in /etc/environment will be picked up in next
# provisioning steps
config.vm.provision "shell", reset: true, inline: <<-SHELL

  if [ -f /vagrant/Vagrantfile-settings.sh ]
  then
    /vagrant/Vagrantfile-settings.sh
  fi
SHELL 
```

然后只需在`Vagrantfile-settings.sh`旁边放一个文件`Vagrantfile`，将其添加到`.gitignore`（或其他）并将任何脚本放入其中，例如为交互式终端、所有守护进程和 docker 容器设置代理：

```
# Proxy for interactive terminals
echo "http_proxy=http://PROXY_ADDRESS:PROXY_PORT" >> /etc/environment
echo "https_proxy=http://PROXY_ADDRESS:PROXY_PORT" >> /etc/environment
echo "no_proxy=127.0.0.1,localhost" >> /etc/environment
# Proxy for daemons (e.g. Docker deamon - used to pull images, apt - run from default daily cron job)
mkdir /etc/systemd/system.conf.d
echo [Manager] > /etc/systemd/system.conf.d/01-http-proxy.conf
echo "DefaultEnvironment=\"http_proxy=PROXY_ADDRESS:PROXY_PORT\"" >> /etc/systemd/system.conf.d/01-http-proxy.conf
echo "DefaultEnvironment=\"https_proxy=PROXY_ADDRESS:PROXY_PORT\"" >> /etc/systemd/system.conf.d/01-http-proxy.conf
echo "DefaultEnvironment=\"no_proxy=127.0.0.1,localhost\"" >> /etc/systemd/system.conf.d/01-http-proxy.conf
echo "# Docker requires upper-case http proxy environment variables..." >> /etc/systemd/system.conf.d/01-http-proxy.conf
echo "DefaultEnvironment=\"HTTP_PROXY=http://PROXY_ADDRESS:PROXY_PORT2\"" >> /etc/systemd/system.conf.d/01-http-proxy.conf
echo "DefaultEnvironment=\"HTTPS_PROXY=http://PROXY_ADDRESS:PROXY_PORT\"" >> /etc/systemd/system.conf.d/01-http-proxy.conf
echo "DefaultEnvironment=\"NO_PROXY=127.0.0.1,localhost\"" >> /etc/systemd/system.conf.d/01-http-proxy.conf
# Proxy for docker containers started with `docker run`
mkdir /home/vagrant/.docker
cat <<EOF > /home/vagrant/.docker/config.json
{
  "proxies": {
    "default": {
      "httpProxy": "http:/PROXY_ADDRESS:PROXY_PORT",
      "httpsProxy": "http://PROXY_ADDRESS:PROXY_PORT",
      "noProxy": "127.0.0.1,localhost"
    }
  }
}
EOF
chown -R vagrant:vagrant /home/vagrant/.docker 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-01-07T15:47:32.413

您可以从 YAML 文件加载设置。[这在Drupal VM](https://github.com/geerlingguy/drupal-vm)中演示如下：

```
# Use config.yml for basic VM configuration.
require 'yaml'
dir = File.dirname(File.expand_path(__FILE__))
if !File.exist?("#{dir}/config.yml")
  raise 'Configuration file not found! Please copy example.config.yml to config.yml and try again.'
end
vconfig = YAML::load_file("#{dir}/config.yml") 
```

那么你可以[`config.yml`](https://github.com/geerlingguy/drupal-vm/blob/master/example.config.yml)像这样创建：

```
vagrant_box: geerlingguy/ubuntu1404
vagrant_user: vagrant
vagrant_ip: 192.168.88.88 
```

并且[`Vagrantfile`](https://github.com/geerlingguy/drupal-vm/blob/master/Vagrantfile)您可以将变量用作：

```
config.vm.box = vconfig['vagrant_box']
config.vm.network "private_network", ip: vconfig['vagrant_ip'] 
```

# jquery - 手风琴没有加载 ajax 称为元素

> ID：13065577
> 
> 赞同：0
> 
> 时间：2012-10-25T09:30:32.973
> 
> 标签：jquery, ajax, jquery-ui, accordion

我确实有一个很好的手风琴，就像[JQuery UI](http://jqueryui.com/accordion/)上的示例一样，它可以工作，但是当我用 ajax 调用刷新 div 时，手风琴不再工作了，它只是普通的 html ......我该怎么做我搜索了互联网，我只得到“如何将 ajax 加载到手风琴中”，或者我读到我已经发现 .live() 是不可能的。

我尝试在 ajax 完成后加载，如下所示： $("form.ajax").submit(function(){

```
 var url = $(this).attr('action');
    var element = '';
    if($(this).attr("element") != null)
    {
        element = $(this).attr("element");
    }
    else if($(this).attr("element") == null)
    {
        element = "render";
    }
    $("#"+element).html("<div id='loader'>Laden...<br /><img src=\"/site/templates/img/ajax-loader.gif\"/></div>");
    $.post(url, $(this).serialize(), function(data){
        $('#accordion').accordion();
        $("#"+element).html(data);

    });
    return false;
}); 
```

我不认为我是唯一一个有这个问题的人

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:36:38.900

您必须先填充 div，然后设置手风琴。像这样：

```
$("#"+element).html(data);
$('#accordion').accordion(); 
```

# visual-studio-2010 - 与 Visual Studio Professional 2010 并行安装 Visual Studio Express 2012 for Web

> ID：13065580
> 
> 赞同：0
> 
> 时间：2012-10-25T09:30:35.153
> 
> 标签：visual-studio-2010, visual-studio

我可以将**Visual Studio Express 2012 for Web**与我安装的**Visual Studio Professional 2010**并行安装吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:34:01.157

[这篇](http://msdn.microsoft.com/en-us/library/ms246609.aspx)关于 VS2012 并排安装的文章可能会有所帮助。它指出：

> 您可以在已安装早期版本的计算机上安装此版本的 Visual Studio。

只要你按正确的顺序安装它们，并注意条件，我认为你应该没问题。

# ios - 从 viewDidLoad 调用该方法时，CABasicAnimation 不起作用

> ID：13065593
> 
> 赞同：0
> 
> 时间：2012-10-25T09:31:38.650
> 
> 标签：ios, cabasicanimation, performselector

我有一个 imageView 添加到一个显示为 modalViewController 的视图中，带有样式水平翻转。我添加了以下代码来为 imageView 设置动画。

```
- (void)animateTheImageview:(UIImageView*) imageViewToAnimate{

    CABasicAnimation *fadeAnimation;
    fadeAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    fadeAnimation.duration = 1.5;
    fadeAnimation.repeatCount = INFINITY;
    fadeAnimation.autoreverses = NO;
    fadeAnimation.fromValue = [NSNumber numberWithFloat:1.0];
    fadeAnimation.toValue = [NSNumber numberWithFloat:0.5];
    fadeAnimation.removedOnCompletion = YES;
    fadeAnimation.fillMode = kCAFillModeForwards;
    [imageViewToAnimate.layer addAnimation:fadeAnimation forKey:@"animateOpacity"]; 
}

- (void)switchOnorOff
 {

    if (onOffSwitch.on)
    {

        self.lightImage.image = [UIImage imageNamed:@"CFLGlow.jpg"];
        [self animateTheImageview:self.lightImage];
    }
    else
    {

        self.lightImage.image = [UIImage imageNamed:@"CFL-BULB.jpg"];
        [self.lightImage.layer removeAllAnimations];
    }
} 
```

我从以下位置调用此方法`viewDidLoad`：

```
- (void)viewDidLoad
   {
      [self switchOnorOff];
   } 
```

我的问题是上面的代码没有为 imageView 设置动画。

但是当我尝试下面的代码时，它可以工作：

```
[self performSelectorOnMainThread:@selector(animateTheImageview:) withObject:self.lightImage waitUntilDone:YES]; 
```

我的问题是为什么会发生这个问题？有没有区别，

`[self performSelectorOnMainThread:@selector(animateTheImageview:) withObject:self.lightImage waitUntilDone:YES];`

和

`[self animateTheImageview:self.lightImage];`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:59:37.997

您不应该在 viewDidLoad 中执行任何动画，并且还应该在其中调用 [super viewDidLoad]，因为您只是在覆盖它。尝试在 viewWillAppear 或 viewDidAppear 上显示它。

然后，根据[NSObject Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3ainModes%3a)，执行SelectorOnMainThread:withObject:waitUntilDone：

> 在主线程的运行循环中排队消息

因此，队列中的其他消息可能会在执行动画之前先完成。

希望这可以帮助

# python - 是否可以在 Python / Numpy 中对这个三重循环进行矢量化？

> ID：13065596
> 
> 赞同：3
> 
> 时间：2012-10-25T09:31:42.430
> 
> 标签：python, numpy, vectorization

我正在尝试加快我的代码，目前在 Python / Numpy 中运行需要一个多小时。大部分计算时间发生在下面粘贴的函数中。

我正在尝试对 Z 进行矢量化，但我发现三重 for 循环相当困难。我可以在`numpy.diff`某处实现该功能吗？看一看：

```
def MyFESolver(KK,D,r,Z):
    global tdim
    global xdim
    global q1
    global q2
    for k in range(1,tdim):
        for i in range(1,xdim-1):
            for j in range (1,xdim-1):
                Z[k,i,j]=Z[k-1,i,j]+r*q1*Z[k-1,i,j]*(KK-Z[k-1,i,j])+D*q2*(Z[k-1,i-1,j]-4*Z[k-1,i,j]+Z[k-1,i+1,j]+Z[k-1,i,j-1]+Z[k-1,i,j+1])
    return Z 
```

`tdim = 75` `xdim = 25`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:17:22.750

我同意，这很棘手，因为四个边上的 BC 破坏了刚度矩阵的简单结构。您可以像这样摆脱空间循环：

```
from pylab import *
from scipy.sparse.lil import lil_matrix
tdim = 3;     xdim = 4;  r = 1.0;  q1, q2 = .05, .05; KK= 1.0; D = .5  #random values
Z = ones((tdim, xdim, xdim))
#Iterate in time
for k in range(1,tdim):
    Z_prev = Z[k-1,:,:] #may need to flatten
    Z_up = Z_prev[1:-1,2:]
    Z_down = Z_prev[1:-1,:-2]

    Z_left = Z_prev[:-2,1:-1]
    Z_right = Z_prev[2:,1:-1]

    centre_term  = (q1*r*(Z_prev[1:-1,1:-1] + KK) - 4*D*q2)* Z_prev[1:-1,1:-1] 

    Z[k,1:-1,1:-1]= Z_prev[1:-1,1:-1]+ centre_term + q2*(Z_up+Z_left+Z_right+Z_down) 
```

但我不认为你可以摆脱时间循环......

我认为表达式：

```
Z_up = Z_prev[1:-1,2:] 
```

makes a copy in numpy, whereas what you want is a view - if you can figure out how to do this - it should be even faster (how much?)

Finally, I agree with the rest of the answerers - from experience, this kind of loops are better done in C and then wrapped into numpy. But the above should be faster than the original...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:07:59.450

这看起来像是 Cython 的理想案例。我建议在 Cython 中编写该函数，它可能会快数百倍。

# excel - 如何正确捕获 Excel 单元格边框？

> ID：13065597
> 
> 赞同：2
> 
> 时间：2012-10-25T09:31:44.997
> 
> 标签：excel, vsto, excel-2007, excel-2010, vba

我`A1`使用“格式化单元格”为单元格（例如）添加了底部边框：

![在已设置下边框的 Excel 工作表中显示单元格 <code>A1</code>。](../Images/356ebb6e64c8c54be36646c6764acd13.png) [`A1`有底部边框，`A2`没有***边框***。]

如果我然后以编程方式捕获单元格的格式，则单元格`A2` *的底部边框将`A1`*被捕获为单元格*的顶部边框`A2`*。

这不是在本机“格式刷”中发生的情况，将格式复制`A2`到其他单元格不会向该目标单元格添加任何边框 - 我试图用代码复制的行为。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:11:54.657

这应该更像是评论，但我还没有访问“评论”的权限。格式刷与格式化单元格时所看到的区别在于您访问的是`Borders`对象还是`range`对象。在边框对象中，两个单元格*共享*一个共同的边框，因此都有边框。但是这个边框是属于A1的，不是A2的，所以在复制**格式**的时候，只有复制A1的时候才能得到边框。

要在 VBA 中模拟这一点，您需要复制 A1 并像这样执行 PasteSpecial：

```
ActiveCell.PasteSpecial Paste:=xlPasteFormats 
```

# git - 与 git add -p 相反

> ID：13065599
> 
> 赞同：34
> 
> 时间：2012-10-25T09:31:53.520
> 
> 标签：git

有相反的`git add -p`吗？有时我错误地添加了一个块并想从索引中删除它（我这样做`git reset; git add -p`并再次添加所有好的块）。在这种情况下，一个`git remove-from-index -p`命令会很有帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-25T09:36:10.460

从 git-reset 手册页：

> 这意味着 git reset -p 与 git add -p 相反
> 
> ```
>  ^
>                                   |
>                         exact match of your post title 
> ```

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2014-01-03T01:56:46.833

不幸的是，没有直接相反的命令。您正在寻找的是“取消暂存”文件（`git add`已暂存文件以进行提交）。请参阅此答案以获取更多详细信息：

[为什么有两种方法可以在 git 中取消暂存文件？](https://stackoverflow.com/questions/6919121/why-are-there-2-ways-to-unstage-a-file-in-git)

# android - 如何在三星 Galaxy S3 上测试 Android 应用程序？

> ID：13065602
> 
> 赞同：0
> 
> 时间：2012-10-25T09:32:03.780
> 
> 标签：android, testing, samsung-mobile

我正在开发的应用程序之一在三星 Galaxy Ace 和三星 Galaxy Y 上运行良好，但一位用户报告说应用程序在安装三星 Galaxy S3 时崩溃。

现在我想知道一个运行良好的应用程序如何在另一部手机上安装时崩溃，这种崩溃的原因可能是什么？

另外，即使我没有三星 Galaxy S3 并且我不打算购买（考虑到手机的成本），我如何才能复制三星 Galaxy S3 的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:37:46.247

> 现在我想知道一个运行良好的应用程序如何在另一部手机上安装时崩溃，这种崩溃的原因可能是什么？

你知道当它崩溃时是什么异常吗？可能有很多原因。

*   不同的 VM 最大大小
*   不同的屏幕分辨率
*   权限 - 您是否使用特定的硬件功能/互联网/外部存储

不知道异常是不可能说出来的。如果您无法获得设备，您可以尝试尽可能靠近设备进行仿真。Android 模拟器允许您进行所有这些设置 - 屏幕分辨率、最大 VM 堆大小、RAM 大小、外部存储等。因此，请获取该设备的技术规格并相应地设置您的模拟器。然后尝试重现问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:41:21.960

正如 AppMobiGurmeet 在他的评论中提到的，您可以从创建一个与 Galaxy S3 具有相同特性的 Android 模拟器开始。

这足以解决简单的错误，但真的没有什么比在真实设备上测试更好的了。由于你不可能在这款手机上进行测试，我建议你在你的应用程序中实现一些崩溃报告系统，例如使用[ACRA](http://code.google.com/p/acra/)（一个非常棒的调试库）。这样你会看到崩溃的堆栈（这在大多数情况下足以理解出了什么问题）

# r - 在 R 中扩展的 Chernoff 面

> ID：13065609
> 
> 赞同：2
> 
> 时间：2012-10-25T09:32:33.793
> 
> 标签：r, plot

该`aplpack`库包含绘制美丽的切尔诺夫面孔的可能性`faces`。`symbols`并且`TeachingDemos`还提供了绘制这些面的变化的可能性。但是它们都不允许绘制超过 15 个维度（`symbols`允许为颜色增加两个维度，但它们以不方便的方式定义，因此某些面变成完全黑色，隐藏了面部的其他部分）。有没有办法`R`（可能使用另一个库）来绘制更多维度，例如通过添加具有不同长度四肢的身体或通过使用颜色来可视化某些维度？也许我已经监督了一些事情，并且其中的颜色`aplpack`也可以映射到变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:41:18.013

TeachingDemos 包还具有与`ms.face`函数一起使用`my.symbols`以创建以切尔诺夫面为符号的散点图的函数。这给出了面部的 15 个原始值，加上一个 x 坐标和一个 y 坐标；您还可以根据`my.symbols`变量指定颜色（针对整个面部，而不是单个特征）和总体尺寸。这给出了 19 个维度，您还可以改变线宽和样式，但这可能会扭曲绘图而不是帮助。

有了这么多维度，我可能会更多地`symbols`使用基于聚类过程排序的变量的星图（函数），或者使用某种类型的降维工具（主要组件，大巡演等）

# php - __set 在构造函数中？

> ID：13065612
> 
> 赞同：-3
> 
> 时间：2012-10-25T09:32:44.763
> 
> 标签：php, constructor, magic-methods

在__construct中设置属性时是否调用了魔术方法__set？

```
class MyClass
{
    public function __construct()
    {
        $this->property = 'something';
    }
    public function __set($name,$value)
    {
        $this->{$name} = ($name == 'property')?'other value':$value;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:37:55.627

这是完全合法的。从手册：

> __set() 在将数据写入不可访问的属性时运行。

是否从构造函数完成并不重要。

所以调用：

```
$x = new MyClass();
var_dump($x); 
```

将导致：

```
object(MyClass)#1 (1) { ["property"]=> string(11) "other value" } 
```

# r - 将列表附加到列表

> ID：13065617
> 
> 赞同：7
> 
> 时间：2012-10-25T09:32:52.653
> 
> 标签：r

我知道这是一个非常菜鸟的问题，但是如何将数据帧列表附加到数据帧以形成一个新列表，并且所有 data.frames 在列表中的同一级别？

我的一些尝试：

```
> df <- data.frame(time=1:5)
> df
  time
1    1
2    2
3    3
4    4
5    5
> innerlist <- list(df,df,df)
> innerlist
[[1]]
  time
1    1
2    2
3    3
4    4
5    5

[[2]]
  time
1    1
2    2
3    3
4    4
5    5

[[3]]
  time
1    1
2    2
3    3
4    4
5    5

> outerlist <- list(df,innerlist)
> outerlist
[[1]]
  time
1    1
2    2
3    3
4    4
5    5

[[2]]
[[2]][[1]]
  time
1    1
2    2
3    3
4    4
5    5

[[2]][[2]]
  time
1    1
2    2
3    3
4    4
5    5

[[2]][[3]]
  time
1    1
2    2
3    3
4    4
5    5

> outerlist2 <- c(df,innerlist)
> outerlist2
$time
[1] 1 2 3 4 5

[[2]]
  time
1    1
2    2
3    3
4    4
5    5

[[3]]
  time
1    1
2    2
3    3
4    4
5    5

[[4]]
  time
1    1
2    2
3    3
4    4
5    5

> outerlist3 <- cbind(df,innerlist)
> outerlist3
  time time time time
1    1    1    1    1
2    2    2    2    2
3    3    3    3    3
4    4    4    4    4
5    5    5    5    5 
```

假设所有`df`s 都是不同的数据帧。

我想将 df 附加到 innnerlist，并获得一个包含 4 个 dfs 的列表，例如：

```
> outerlistmagic <- magic( df, innerlist )
> outerlistmagic
[[1]]
  time
1    1
2    2
3    3
4    4
5    5

[[2]]
  time
1    1
2    2
3    3
4    4
5    5

[[3]]
  time
1    1
2    2
3    3
4    4
5    5

[[4]]
  time
1    1
2    2
3    3
4    4
5    5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:41:36.090

如果你想`df`成为一个列表元素，你必须把它包装起来，`list`因为 data.frame 在内部是一个列表。例如：

```
append(list(df), innerlist)
c(list(df), innerlist) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T09:42:08.590

如您所知，`c`组合列表的正确功能是。虽然 data.frame 也是一个列表，但`c`将删除 data.frame 属性并将其放入包含矢量的列表中。您可以通过将其包装在另一个列表中来保护它：

```
c(list(df),innerlist)
[[1]]
  time
1    1
2    2
3    3
4    4
5    5

[[2]]
  time
1    1
2    2
3    3
4    4
5    5

[[3]]
  time
1    1
2    2
3    3
4    4
5    5

[[4]]
  time
1    1
2    2
3    3
4    4
5    5 
```

# web-services - 使用来自 cbr.ru 的 R 和 SSOAP 的 Web 服务访问

> ID：13065622
> 
> 赞同：3
> 
> 时间：2012-10-25T09:33:08.013
> 
> 标签：web-services, r, soap

我正在尝试通过他们的网络服务平台从 CBR（俄罗斯中央银行 - cbr.ru）检索数据到 R。基本上，我的灵感来自[这个示例](http://arademaker.github.com/blog/2012/01/02/package-SSOAP.html)中使用 R 的 SSOAP 包的代码。

```
wsdl <- 'http://www.cbr.ru/secinfo/secinfo.asmx?WSDL'
doc  <- xmlInternalTreeParse(wsdl)
def <- processWSDL(doc)
ff  <- genSOAPClientInterface(def = def) 
xmlstr.f <- ff@functions #gives the list of functions that can be accessed 
# just an example of retrieval attempt 
t1 <- new('dateTime',as.POSIXct('2012-10-10')) #creating an object of dateTime class as requested 
xmlstr.f$GCurve(t1) #trying to call SOAP server with GCurve function 
```

我收到以下错误：

```
Error in .SOAP(server, .operation@name, parameters = as(parameters, "dateTime"),  : object '.operation' not found 
```

谁能给我关于这里出了什么问题的建议？

# java - 架构与设计模式

> ID：13065623
> 
> 赞同：3
> 
> 时间：2012-10-25T09:33:13.707
> 
> 标签：java, design-patterns

有人在采访中问我“架构和设计模式有什么区别？” 在讨论中，我不知不觉地说，设计模式构成了良好架构的基础。

我的假设正确吗？哪一个是两者的超集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:36:35.937

**架构**- 设置系统应该执行哪些功能，在组件之间拆分功能，设置组件在系统上下文中的行为和通信方式，设置组件的物理位置，最后选择工具以创建组件。

**设计**——虽然架构更多地处理全局，但设计应该深入到与实现某些组件相关的细节。组件的设计以类、接口、抽象类和其他 OO 特性结束，以完成给定的组件任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:35:28.887

恕我直言，关系是**结构设计模式**可以充当设计良好的**软件架构**的构建块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:38:19.900

在我看来，架构与您组织组件的方式有关。示例 2 层或 2 层架构。设计模式解决了与编码问题相关的常见问题。一个好的架构将利用有用/适当的设计模式。我想你是对的。

# matlab - Matlab比较不同大小的向量

> ID：13065627
> 
> 赞同：2
> 
> 时间：2012-10-25T09:33:33.800
> 
> 标签：matlab

如果我有 2 个向量：带有 n 个元素的 A 和带有 m 个元素且 m < n 的 B，

如何在不使用 for 循环的情况下识别 A 中 B 中的所有元素？

非常感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T09:35:43.150

`C = intersect(A,B)`将为您提供两者中的所有元素。

还有`ismember(A,B)`，它将返回一个逻辑数组，指示 A 的每个成员是否也是 B 的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:40:35.207

这是找出较长向量 (x) 的哪些元素在较短向量 (y) 中的一种解决方案

```
x = 1:10;
y = 2:4;

xrep = repmat(x,length(y),1)
yrep = repmat(y',1,length(x))

idx = any(xrep==yrep) 
```

# google-bigquery - 我的 BigQuery 账单是如何计算的

> ID：13065630
> 
> 赞同：1
> 
> 时间：2012-10-25T09:33:48.177
> 
> 标签：google-bigquery

我一直在使用 Bigquery 并为报告产品构建一些聚合。令我惊恐的是，我注意到这个月到目前为止我的账单超过了 4000 美元！似乎没有任何方法可以分解我的使用情况 - 有没有我可以通过数据处理/成本获得查询的报告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:39:03.447

BigQuery 数据处理的费用为每 GB 0.035 美元。[（请参阅此处](https://developers.google.com/bigquery/docs/pricing)的定价）。您可以通过查看查询作业来了解正在处理的数据量。

如果您使用的是 UI，它会在“运行查询”按钮旁边告诉您查询处理了多少数据。如果您使用的是 bq 命令行工具，您可以通过运行查看您已运行的作业`bq ls -j`，然后通过运行显示每个作业已处理了多少数据`bq show -j job_0bb47924271b433b895b690726099f69`（此处替换您自己的作业 id）。如果您直接使用 API 运行查询，则会在 statistics.totalBytesProcessed 字段中的作业中返回扫描的字节数。

如果您想减少花费的金额，您可以在查询中使用更少的列，将表分成更小的部分（例如每日表），或者对非时间敏感的查询使用批处理查询模式仅处理 0.020 美元/GB。

如果将表分成更小的部分，则可以在需要时使用“，”语法对多个表进行查询。例如`SELECT foo from table1, table2, table3`。

# mysql - 在 Servlet 中共享数据库连接

> ID：13065639
> 
> 赞同：0
> 
> 时间：2012-10-25T09:34:07.917
> 
> 标签：mysql, servlets, jdbc

我试图在 ServletContext 中共享一个 Jdbc Connection 对象，但这不是一个好主意！现在我想为每个 Servlet 共享一个 Jdbc！以所有且只有相同 Servlet 的线程共享连接的方式。现在我有些怀疑了！是错误还是不够安全？最后我使用MySql，连接的超时属性有问题吗？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:15:10.200

您需要连接池。这是执行此操作的标准方法。请阅读有关连接池以及如何在 Java 中实现它的信息。

您可以阅读此答案以进行更多解释：[在构造函数中打开数据库连接，我应该何时关闭它？](https://stackoverflow.com/questions/10798274/opening-a-database-connection-in-a-constructor-when-should-i-close-it/10798407#10798407)

# php - getLoginStatusURL() 迁移到 OAuth2

> ID：13065643
> 
> 赞同：2
> 
> 时间：2012-10-25T09:34:24.727
> 
> 标签：php, sdk, oauth-2.0, facebook-php-sdk

尝试调用时`getLoginStatusURL()`。我收到消息：

```
Please migrate to OAuth2 and use the new /dialog/oauth endpoint. extern/login_status.php is no longer available. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:31:47.277

SDK 中的`getLoginStatusUrl`方法没有与平台的其余部分保持同步（SDK 实际上不知道如何处理响应），不幸的是，它指的是很久以前不推荐使用的 url。

相反，您想要的是使用该`getLoginUrl`方法并传入`array('display' => 'none')`- 这将为您提供预期的结果。

```
$url = $facebook->getLoginUrl(array('display' => 'none')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:03:34.927

您需要确保您的应用程序设置为从查询字符串而不是 uri_fragment 中获取代码参数 - 这可以在 facebook 应用程序页面应用程序>设置>权限上进行设置。

使用 $facebook->getLoginUrl() 为我提供了登录 URL

# html - Adobe Air HTML动态图库-如何通过删除图片释放内存

> ID：13065645
> 
> 赞同：4
> 
> 时间：2012-10-25T09:34:29.947
> 
> 标签：html, memory, air, adobe, memory-leaks

我正在使用 Adob​​e Air 和他们的 HTML API 开发一个小型桌面应用程序。该应用程序有两个窗口，一个显示本地计算机文件夹中存在的图像幻灯片，另一个窗口允许您浏览这些图像（一个大图像和上一个/下一个按钮）。

首先进行快速测试，我只是将文件夹中的所有图像加载到每个窗口的 DOM 中，它工作得很好，直到我达到太多图像（150+），因为它们是来自 DSLR 的高分辨率 JPEG。显然，每个图像都占用了大量内存，并且可能会导致应用程序过度泄漏。所以我开始优化浏览窗口，而不是全部加载它们，我只使用一个标签并将 .src 值替换为 javascript。但是这种技术只是延迟问题，因为当我继续浏览所有图像时，内存使用量正在增长。替换镜像的 src 并不会释放上一个镜像使用的内存。如果我尝试从 DOM 中删除图像并重新创建它，同样的事情。

我有一个想法，但我不太喜欢它是在框架内显示图像，加载另一个 HTML 文件，将图像 src 作为参数传递给它。然后重新加载整个帧，希望它可以重置内存使用。还没试过。

任何人都知道如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:12:54.920

这是优化 Adob​​e Air 应用程序的好工具。Adobe[空气调谐器：](http://www.adobe.com/devnet/air/articles/air_performance.html)

我不熟悉你的项目；或者它是如何实施的。Adobe AIR 有几种释放内存的方法。这将允许您正确移除或处置您的物品。这些清理工作可以在[这里](http://help.adobe.com/en_US/air/reference/html/flash/system/System.html)找到。

有些人在创建媒体播放器时会做的一件事；尤其是拥有大型媒体的。例子：

假设您的媒体播放器包含六页内容；总计 1GB 的总数据。这对您的项目来说是一个非常非常大的内存分配。因此，与其一次性调用整个 1GB；第一页加载，第二页加载。

其他四个页面保持“未调用”而不是动态加载。然后用户切换到第二页；第三页内容开始预加载。用户切换到第三页；第四页将开始加载。但它也会处理在第一页中创建的数组或对象。这样它不会影响应用程序。

显然，这种方式很乏味，因为您要控制加载的各个方面。如果您的用户开始快速浏览页面，它也会带来问题。

所以另一种可能的解决方案；将是创建缩略图，因此尺寸要小得多。然后将全尺寸图像作为独立流加载，一旦它们离开该区域，就可以毫无问题地处理这些图像。这样一来，画廊就独立了。

如果您提供一些代码或一些额外的细节，我可能会在接口/内存实现建议之外为您提供帮助。

# spring - 搜索查询的缓存策略是什么

> ID：13065647
> 
> 赞同：2
> 
> 时间：2012-10-25T09:34:38.950
> 
> 标签：spring, caching, solr, search-engine, strategy-pattern

我们正在开发一个搜索引擎网络应用程序，使用户能够搜索大约 200 个门户网站的内容。

我们的业务合作伙伴负责维护和提供 solr/lucene 实例，该实例正在执行索引数据的主要工作。

我们的应用程序查询 solr 并以人性化的方式呈现结果。但是，我们想知道如何限制查询的数量，或许可以使用某种形式的**缓存**。结果可能会被缓存几个小时。

我们想知道的是：缓存查询结果的**好策略是什么？**显然，我们希望方法调用会有很大的不同……做缓存有意义吗？

是否有一些缓存系统特别适合这个用例？我们正在使用 Spring 3 进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:48:02.277

我要记住 Solr 已经内置了很多缓存，以加快常见查询。我建议您在使用自己的查询缓存[重新发明轮子之前，先研究一下 Solr/Lucene 的固有功能。](http://en.wikipedia.org/wiki/Not_invented_here)

[这](http://wiki.apache.org/solr/SolrCaching)是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:42:46.933

最简单的解决方案是在查询到 Solr 之前对其进行重组。

我创建了自己的`QueryBuilder`方法，在点击 Solr 之前，我通过了我的查询字符串。

所做的只是分解所有参数，然后将它们分类到预定义的组中。

例如，为了规范您的查询以便它们可以缓存，您可以按每个键的字母顺序排序，然后修改查询字符串，然后使用它来查询 Solr。（实际查询结果不变）。

在实际运行查询之前，您可以创建 Solr 查询字符串的哈希，并检查已保存的所有键的内存哈希。如果您发现自己很可能接近数百万个查询键，那么您可能希望开始考虑使用[BloomFilter](http://en.wikipedia.org/wiki/Bloom_filter)来减少键空间并在缓存命中时仍保持一定程度的准确性。

或者，您可能希望在您和 Solr 之间放置一个反向代理缓存。例如，如果您要查询 Solr 之类的`Spring -> Varnish -> Solr`，则[Varnish](https://www.varnish-cache.org/)可用于缓存，它将使用查询字符串作为哈希。然后，您可以设置 2 小时到期，以便自动刷新/清除/无效结果。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T14:14:45.813

我发现在 Lucene 之外缓存结果或呈现的内容效果最好。拥有一个指向缓存层的 API 搜索服务，其中包含来自 Lucene 索引的结果。

如果将缓存层分开，则可以插入所需的任何缓存...分布式缓存（Redis、Azure AppFabric、其他云缓存等）。您还可以缓存网页的部分呈现（即 ASP.NET 中的输出缓存）或使用 RESTful 约定缓存 API 调用本身。诸如缓存预热或主动缓存（基于使用）之类的事情很容易通过服务来完成。

然后，您的应用程序/索引缓存可以在您的应用程序的更多层中“重用”，而不仅仅是在索引级别进行缓存。这一切都取决于您的索引更新是否是实时的，查询对于每个客户端/用户 ID 是否具有日期级别的安全性等。如上所述，Solr 已经为您完成了“一些”这些工作。

# php - PHP-SDK 重定向过多

> ID：13065649
> 
> 赞同：3
> 
> 时间：2012-10-25T09:34:45.517
> 
> 标签：php, facebook

我正在为 Facebook 使用[PHP-SDK](https://github.com/facebook/facebook-php-sdk)，并让该示例在我的本地主机上运行。但是，当在服务器上构建脚本时，脚本一直忙于从我的脚本重定向到 facebook 并返回。（错误：Fout 310 (net::ERR_TOO_MANY_REDIRECTS):)

似乎更多的人遇到了这个问题（[这里](https://stackoverflow.com/questions/8771833/not-getting-access-token-or-too-many-redirects)，[这里](https://stackoverflow.com/questions/10200749/url-has-too-many-redirects-facebook-wont-be-able-to-scrape-this-url-until-the)，[这里](https://stackoverflow.com/questions/10573199/facebook-connect-gives-a-redirect-loop)，[这里](http://www.zymic.com/forum/lofiversion/index.php/t24244.html)）。虽然，我找不到明确的答案是什么问题。

重定向到 facebook（响应 302）：

```
https://www.facebook.com/dialog/oauth?client_id=166958180001271&redirect_uri=http%3A%2F%2Fdomain.com%2Fscripts%2FGateway.php%3Faction%3DAllowFacebookAccessAction%26app%3D14&state=0dbc178a375595da4751265a7147c01e#_=_ 
```

重定向到 mydomain（响应 302）：

```
http://domain.com/scripts/Gateway.php?action=AllowFacebookAccessAction&app=14&state=0dbc178a375595da4751265a7147c01e&code=AQD-dTeyns0OWpGb_PzfHxUy2iRmpc1XgP6Q24DDRX8MiRTE10lV-b-aSNIlOLVHk576vRs3H8Pf9n0kGwU827MrkzUCUoQGFGEQBkkOJnCy9zb6hZs7TVBsKL2iSuZIhDjLsCOPeKy3zfb37Q6LGhtMICCdB_IQAvU0uRvAkSAX8tdVJ65PEv8imx-2yvLaMoGJleZwKogh7m03vlhV8hJk#_=_ 
```

造成此问题的部分代码

```
...            
    $facebook = new FacebookApi(array(
            'appId' => $app->getProperty('apiKey'),
            'secret' => $app->getProperty('secretKey'),
        ));
    $user = $facebook->getUser();
    if (!$user) {    
        header('location: ' . $facebook->getLoginUrl());
        exit;
    }
... 
```

更新：

我排除了它的服务器设置。我能够在该服务器上运行原始示例脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:21:28.047

`secret`在您的应用设置[https://developers.facebook.com/apps](https://developers.facebook.com/apps)中重新检查您的应用，否则转储会话

```
<?php print_r($_SESSION); ?> 
```

并检查返回的令牌[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

很确定令牌被破坏或秘密。

如果没有，它在你没有显示的代码中。

# adfs2.0 - 将用户从 ADFS 导入到 openam

> ID：13065650
> 
> 赞同：1
> 
> 时间：2012-10-25T09:34:49.563
> 
> 标签：adfs2.0, openam

如何将用户从 ADFS 服务器导入到 openam。我参考了这个文档

[https://wikis.forgerock.org/confluence/display/openam/OpenAM+and+ADFS2+configuration](https://wikis.forgerock.org/confluence/display/openam/OpenAM+and+ADFS2+configuration)

他们说 ADFS 服务器上存在的用户必须存在于 openam 上。但是如果

我在 ADFS 上创建了数千个用户，然后无法在 openam.so 上手动创建它们

有什么方法可以通过访问 openam url 将用户从 adfs 服务器导入到 openam

即通过openam GUI 或从java 应用程序。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:02:28.683

好的 - 该文件令人困惑。

IP 和 SP 之间的区别在于，只有 IP 具有凭证存储（本例中为 AD）。

所以用户只需要存在于AD中。

如果查看图表，网络 A 中没有凭证存储。

这就是联邦的全部意义所在。

**更新：**

道歉 - 我似乎让一些人感到困惑。

那篇文章指的是[帐户链接](http://documentation.pingidentity.com/display/PF610/Account+Linking)，但根据[Using AD FS 2.0 for interoperable SAML 2.0-based federated Web Single Sign-On](http://www.google.co.nz/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=http://download.microsoft.com/documents/France/Interop/2010/Using_ADFS2_0_For_Interoperable_SAML_2_0-Based_Federated_SSO.docx&ei=m4-NUOH4DoiTiQeXyIGIDg&usg=AFQjCNHha9CCJPZ3D-hTdxmGM7SKMWj3hg&sig2=SRjfnRCzKZDPcyWJzq7JwA)：

“AD FS 2.0 不支持帐户链接方案。这种方案仍然可以通过适当的传入策略以某些方式实现。”

对于联邦，这里有一篇很好的文章：

[ForgeRock OpenAM 9.5.3 和 AD FS 2.0 集成：第 1 部分](http://blog.auth360.net/2011/10/09/forgerock-openam-9-5-3-and-ad-fs-2-0-integration-part-1/)

但请注意，这着眼于使用 OpenAM 作为 SAML 2.0 身份提供者 (IdP) 和 AD FS 2.0 作为 SAML 2.0 服务提供者 (SP)。

本文分为三个部分 - 全部在博客中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:40:32.060

实际上 OpenAM 不存储用户帐户，它们存储在所谓的身份存储库中（目前主要使用的是 LDAP 目录服务器，RDBMS 还存在一些问题）。

您可以从 AD 检索数据并将其导入身份存储库。

但是，如果您拥有 ADFS 和 OpenAM，为什么不让 OpenAM 通过将其配置为身份存储库来使用 AD 中的身份？您可以搜索 openam 用户别名……那里有很多解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:44:09.767

关于 SP 和 IdP ...用户仅在 IdP 处进行身份验证，但用户可能存在于 SP 端的不同帐户下。联邦/SAML 的一部分是“帐户链接”（不仅仅是单点登录），因此身份（用户帐户）可以存在于 SP 和 IdP 端

# c# - 跨线程调用？

> ID：13065653
> 
> 赞同：0
> 
> 时间：2012-10-25T09:34:58.550
> 
> 标签：c#

这是我第一次尝试编写非基于 Web 的程序，也是我第一次用 C# 编写任何东西。

我需要一个监视文件夹的程序，但我无法让它工作。我已经使用了这篇文章中的示例[Using FileSystemWatcher with multiple files](https://stackoverflow.com/questions/6943908/using-filesystemwatcher-with-multiple-files)，但正试图使其成为一个表单。

我当前的问题出现在 ProcessQueue 函数中，其中 fileList 显然是在另一个线程中定义的。每当文件实际提交到监视文件夹时，我都会收到一个错误，即使用 fileList 是一个跨线程调用

谁能向我解释这个错误，以及如何解决它？

```
namespace matasWatch
{
    public partial class Form1 : Form
    {
        private int n = 1;
        private bool isWatching = false;
        private List<string> filePaths;
        private System.Timers.Timer processTimer;
        private string watchedPath;
        private FileSystemWatcher watcher;

        public Form1()
        {
            filePaths = new List<string>();
            watchedPath = "C:\\Users\\username\\Desktop\\test";
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (!isWatching)
            {
                button1.Text = "Stop";
                isWatching = true;
                watcher = new FileSystemWatcher();
                watcher.Filter = "*.*";
                watcher.Created += Watcher_FileCreated;
                watcher.Error += Watcher_Error;
                watcher.Path = watchedPath;
                watcher.IncludeSubdirectories = true;
                watcher.EnableRaisingEvents = true;
            }
            else {
                button1.Text = "Watch";
                isWatching = false;

                watcher.EnableRaisingEvents = false;
                watcher.Dispose();
                watcher = null;
            }
        }

        private void Watcher_Error(object sender, ErrorEventArgs e)
        {
            // Watcher crashed. Re-init.
            isWatching = false;
            button1_Click(sender, e);
        }

        private void Watcher_FileCreated(object sender, FileSystemEventArgs e)
        {
            filePaths.Add(e.FullPath);

            if (processTimer == null)
            {
                // First file, start timer.
                processTimer = new System.Timers.Timer(2000);
                processTimer.Elapsed += ProcessQueue;
                processTimer.Start();
            }
            else{
                // Subsequent file, reset timer.
                processTimer.Stop();
                processTimer.Start();
            }
        }

        private void ProcessQueue(object sender, ElapsedEventArgs args)
        {
            try
            {
                fileList.BeginUpdate();
                foreach (string filePath in filePaths)
                {
                    fileList.Items.Add("Blaa");
                }
                fileList.EndUpdate();
                filePaths.Clear();
            }
            finally
            {
                if (processTimer != null)
                {
                    processTimer.Stop();
                    processTimer.Dispose();
                    processTimer = null;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:42:34.873

我假设 fileList 是一个 Windows 窗体控件。ProcessQueue 方法是从默认为后台线程的计时器线程调用的。fileList 控件驻留在 UI 线程中。您需要使用表单的 Invoke() 方法在委托中传递它来更新 fileList 控件。

```
 Invoke(new Action(() => 
    { 
        fileList.BeginUpdate();
        foreach (string filePath in filePaths)
        {
            fileList.Items.Add("Blaa");
        }
        fileList.EndUpdate();
        filePaths.Clear();    
    })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:44:42.803

尝试使用`System.Windows.Forms.Timer`而不是`System.Timers.Timer`在 UI 线程上执行计时器滴答事件。

有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx#S2)。

# android - 为什么我的 LinearLayout 总是得到空引用？

> ID：13065656
> 
> 赞同：1
> 
> 时间：2012-10-25T09:35:09.103
> 
> 标签：android, android-layout

我有一个名为的布局`view.xml`，其中包含一个`View`名为`view_related`. 基本上，在我的字典应用程序中，如果有与条目相关的单词，我将替换`view_related`为`LinearLayout`包含标题“相关条目”和`TextView`代表每个相关单词的一堆 s。

`NullPointerException`每次我在我的方法中添加一个`TextView`时，我都会得到一个，虽然我的代码看起来很简单，但我不明白为什么。`LinearLayout``Activity``onCreate()`

视图.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView android:id="@+id/view_header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="12pt"
        android:textColor="#fff"
        android:textStyle="bold"
        android:background="#990011"
        android:padding="10dp"
        android:text="lalala word"
        />

    <ScrollView android:id="@+id/view_description"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/view_header">
        <LinearLayout android:id="@+id/view_description_content"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
            <TextView android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="20dp"
                android:text="@string/demo_definition"
                />
                <!-- THIS WILL BE REPLACED -->
            <View android:id="@+id/view_related"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"></View>
        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

view_related.xml，`LinearLayout`将替换`View`view.xml 中的元素

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/view_related_entries"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView android:id="@+id/view_related_header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:textColor="#fff"
        android:textStyle="bold"
        android:textSize="7pt"
        android:background="#000"
        android:text="Related entries"
        />
    <LinearLayout android:id="@+id/view_related_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >
    </LinearLayout>
</LinearLayout> 
```

最后，该`onCreate`方法现在假设相关条目是“Hello”和“Goodbye：”

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view);

    LinearLayout ll = (LinearLayout) findViewById(R.id.view_related_list);
    TextView tv = new TextView(this);
    tv.setText("Hello");
    ll.addView(tv); // NULL POINTER EXCEPTION

    tv = new TextView(this);
    tv.setText("Goodbye");
    ll.addView(tv);

    LayoutInflater li = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
    View view = findViewById(R.id.view_related);
    ViewGroup parent = (ViewGroup) view.getParent();
    int index = parent.indexOfChild(view);
    parent.removeView(view);
    View llview = li.inflate(R.id.view_related_entries, parent, false);
    parent.addView(llview, index);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:38:14.563

```
setContentView(R.layout.view);
LinearLayout ll = (LinearLayout) findViewById(R.id.view_related_list); 
```

该函数`findViewById`仅查找实际设置的视图。您的 current`setContentView`没有设置包含您要在其中查找的 id 的 xml，因此我引用的第一行不会产生任何结果。

您应该加载正确的 XML，或者使用充气器充气您正在寻找的视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:38:12.433

行 ( `LinearLayout ll = (LinearLayout) findViewById(R.id.view_related_list);`) 将搜索`view_related_list`in `view.xml`，因为之前的行是您正在使用的视图..

您需要先充气`view_related.xml`，然后从中获取视图..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:51:19.027

您在代码中做了很多错误的事情。首先，您搜索`LinearLayout`不在当前布局中且当时也不在任何膨胀布局中的 a。其次，您尝试夸大`id`参考而不是`layout`参考。最后，您应该使用另一种方法来完成您正在尝试做的事情。您的代码应该是（根据我的理解）：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view);   

    LayoutInflater li = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
    View view = findViewById(R.id.view_related);
    ViewGroup parent = (ViewGroup) view.getParent();
    int index = parent.indexOfChild(view);
    parent.removeView(view);
    View llview = li.inflate(R.layout.view_related, parent, false); // is view_related the name of the extra layout file?
    parent.addView(llview, index);
    LinearLayout ll = (LinearLayout) findViewById(R.id.view_related_list); // or search for it in llview, llview.findViewById(R.id.view_related_list);
    TextView tv = new TextView(this);
    tv.setText("Hello");
    ll.addView(tv); // NULL POINTER EXCEPTION

    tv = new TextView(this);
    tv.setText("Goodbye");
    ll.addView(tv);
} 
```

在这种情况下，您应该使用 a[`ViewStub`](http://android-developers.blogspot.ro/2009/03/android-layout-tricks-3-optimize-with.html)添加新的布局文件。虽然，我不明白`view.xml`如果你要在`onCreate`方法中添加布局的内容，为什么不直接添加新的布局文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:37:35.467

我认为你需要使用`setContentView(R.layout.view_related);`而不是`setContentView(R.layout.view);`

或者您可以做的另一件简单的事情是在同一布局“视图”中采用线性布局，并在不需要时使其不可见并在需要时使其可见

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T09:39:59.453

您可能忘记在 manifest.xml 中声明您的 Activity

# opengl - 3D 模型渲染和着色器

> ID：13065658
> 
> 赞同：0
> 
> 时间：2012-10-25T09:35:21.600
> 
> 标签：opengl, shader, nvidia, cg

我有一个 3D 模型，在渲染时我使用着色器根据一些参数计算顶点颜色（计算密集型任务）。这些参数随时间变化。所以基本上我需要根据当前参数计算顶点颜色，并将其与之前渲染的顶点颜色相加。我将处理具有 5-1000 万个顶点的模型。有人可以帮我解决这个问题的方法。

对不起，不清楚的问题。我面临的问题是如何备份从着色器计算的先前顶点颜色。我不能使用混合，因为对象可以旋转。所以基本上我需要一种机制来保存从着色器计算的顶点颜色信息并在下一次传递中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:29:54.520

我认为[转换反馈](https://stackoverflow.com/questions/4970922/full-setup-of-transform-feedbackopengl)（DirectX 中的流输出）是您正在寻找的。它在核心 OpenGL 3.0 中可用。这使您能够将在顶点着色器中计算的属性记录到缓冲区对象中，然后可以在后续渲染过程中使用这些对象。

这是一个带有一些起点的相关问题：[Transform Feedback 的完整设置](https://stackoverflow.com/questions/4970922/full-setup-of-transform-feedbackopengl)。

[这篇](http://www.g-truc.net/post-0269.html)博文中也有一些信息。

# javascript - JQuery live 不能在 IE 上运行

> ID：13065662
> 
> 赞同：0
> 
> 时间：2012-10-25T09:35:35.710
> 
> 标签：javascript, jquery, internet-explorer

```
$('.enter').live('click', function (e) {
    e.preventDefault();
}); 
```

由于某种原因，这不会在指定的按钮上被调用，但是，当按下 f12 并弹出开发人员工具时，这有效！？我在所有其他元素上使用 live 并且它工作正常......非常奇怪且难以调试。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:54:44.233

如果您使用的是 jQuery 1.7+，最好使用`.on()`. 例如 ：

```
$(document).on('.enter', 'click', function(){
   ...
}); 
```

正如 jquery doc 所说`.live()`，已弃用[http://api.jquery.com/live/](http://api.jquery.com/live/)

`.live()`如果元素是在定义事件后创建的，我在 IE 上使用会遇到一些问题。

# c - 在一行中比较文本文件中的字符串并在找到时删除该行

> ID：13065664
> 
> 赞同：0
> 
> 时间：2012-10-25T09:35:41.633
> 
> 标签：c, linux

我有一个程序可以检测新连接的 ip 并将它们记录在文本文件中.. 例如

Myconnectedip.txt

```
New Connection from IP: 192.168.5.20
New Connection from IP: 192.168.5.30 
```

现在我的程序检测到 ip 192.168.5.30 已断开连接。它将更新文本文件并删除该行并更新我的文本文件。

```
New Connection from IP: 192.168.5.30 
```

现在，当我打开我的文本文件时，我会看到的唯一一行是

```
New Connection from IP: 192.168.5.20 
```

如何删除文本文件中的行字符串？

这就是我的做法..

```
char buff[20];
File *fp
fp = fopen("/tmp/Myconnectedip.txt", w+);

while ( fgets( buff, sizeof(buff), fp ) != NULL ) {
        if ( strstr( buff, "Connection Closed from IP: 192.168.5.20" ) != NULL ) {

            //When found how can i remove that line and update my textfile?.

        } else {
            // nothing to do here..
}
}
close(fp); 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:50:43.113

您可以像以前一样将每一行一一复制到其中`buff`，然后与要从现有文件中删除的行匹配。如果不匹配，则将其复制到某个临时文件中。一直执行到 eof()。您只是不必复制要从现有文件中删除的行。

之后，只需将临时文件重命名为与之前相同的名称。

# jquery - 使用 jquery 遍历父 li

> ID：13065667
> 
> 赞同：0
> 
> 时间：2012-10-25T09:35:44.513
> 
> 标签：jquery

大家好，我有一个菜单结构，其中包含使用 ul li ul li 等构建的子级和子级，我尝试使用以下代码循环仅通过根级别 li 并向子级 ul 添加一个类，但是，它循环/计算子级的第一个元素，所以不是有 5 个根 li，而是大约 40 个 var x = 0;

```
$('#BodyContent_FocusActivityMenu1_LeftNavFocus ul li').each(function () {
    if (x > 4) {
         alert(x);
          $(this).children('ul').addClass('toLong');
    }
    x++;
}); 
```

谁能告诉我我哪里出错了

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:37:02.697

你可以做

```
$('#BodyContent_FocusActivityMenu1_LeftNavFocus > ul > li').each(function () {
   .... 
```

但是不是你的循环，如果你想向 ul 添加一个类，它是索引大于 4 的 li 元素的子元素，你可以这样做

```
$('#BodyContent_FocusActivityMenu1_LeftNavFocus > ul > li:gt(4) > ul')
    .addClass('toLong'); 
```

# objective-c - Objective-c 声明方法

> ID：13065669
> 
> 赞同：0
> 
> 时间：2012-10-25T09:35:52.737
> 
> 标签：objective-c, syntax, methods

> **可能重复：**
> [私有方法声明 Objective-C](https://stackoverflow.com/questions/9414410/private-method-declaration-objective-c)

我假设在 Objective-C 类方法中需要在 .h 文件中声明，使它们公开可见，或者在 .m 文件中使用类扩展名使其更加私有。

我认为如果没有首先声明该方法，xcode 会抱怨，但是我在我的主 AppDelegate 类中添加了一个方法而不声明它，并且一切正常。

我混淆了哪一部分，我应该声明该类的所有方法，还是如果该方法仅由该类使用而没有其他地方使用，是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:41:01.303

无论如何，您声明方法。在 .h 文件中

```
@interface ViewController : UIViewController
-(void)myMethod;
@end 
```

或在 .m 的私有接口中

```
#import "ViewController.h"

@interface ViewController ()
-(void)myMethod;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:39:34.830

.h 文件中不需要声明所有类方法。仅在 .h 文件中声明您希望对其他人公开访问的那些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:39:48.687

Objective C 是非常动态的语言，它在运行时解析方法。这就是我们向对象发送消息而不是调用方法的原因（例如在 C++ 中）。因此，如果编译器没有看到方法声明，并不意味着该对象在运行时找不到它。

所以你实际上可以在任何你想要的地方定义 ObjC 方法（在任何文件中，甚至在不同的库中）。程序编译和链接的ObjC运行时都可以找到。

# mysql - mysql替换字符串计数限制

> ID：13065673
> 
> 赞同：1
> 
> 时间：2012-10-25T09:36:05.717
> 
> 标签：mysql, string, csv, replace

Mysql Replace 函数替换它在指定列或字符串中找到的字符串，是否有任何其他方法可以限制列/字符串的替换计数？

```
# replace 32 from the string, there are 3 occurance
SELECT REPLACE('32,138,149,145,146,121,134,127,129,120,132,232','32','');

# note: 132,232 converted to 1 and 2
print>>> ,138,149,145,146,121,134,127,129,120,1,2 
```

如何克服这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:02:03.587

假想将干草堆与“，”连接起来，然后寻找针“，32”，并将其替换为“，”

```
SELECT REPLACE(CONCAT(',','32,138,149,145,146,121,134,127,129,120,132,232',','), ',32,', ','); 
```

此外，如果您愿意，还可以修剪两端的逗号。

```
SELECT TRIM(BOTH ',' FROM REPLACE(CONCAT(',','32,138,149,145,146,121,134,127,129,120,132,232',','), ',32,', ',')); 
```

# iphone - 在 iOS 6.0 中，从应用程序后台播放到前台的视频从暂停到播放需要 2 秒的延迟

> ID：13065680
> 
> 赞同：3
> 
> 时间：2012-10-25T09:36:24.313
> 
> 标签：iphone, objective-c, ios, xcode

我有`VideoController`哪个播放视频。现在 VideoController 被推入`navigationController`。

```
 VideoController *ObjVideoController = [[VideoController alloc] init];
 ObjVideoController.strVideoURL = [AnimationArr objectAtIndex:SequenceCount];
 [self.navigationController pushViewController:ObjVideoController animated:NO];
 [ObjVideoController play:[AnimationArr objectAtIndex:SequenceCount]]; 
```

`Play method`在 VideoController 中是这样的：

```
 - (void)play:(NSString*)videoFile {
    playbaktime = 0.0;

    NSBundle *main = [NSBundle mainBundle];
    NSURL *url = [NSURL fileURLWithPath:[[main resourcePath] stringByAppendingPathComponent:videoFile]];

    if (!self.ctl)
    {
        self.ctl = nil;
        self.ctl = [[MPMoviePlayerController alloc]init];
        [self.view addSubview:self.ctl.view];
    }
    [self.ctl prepareToPlay];
    self.ctl.contentURL = url;
    self.ctl.controlStyle = 0;
    //self.ctl.useApplicationAudioSession = NO;
    [self.ctl.view setUserInteractionEnabled:NO];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        [self.ctl.view setFrame:CGRectMake(0,0,480,320)];
    else
        [self.ctl.view setFrame:CGRectMake(0,0,1024,768)];

    self.ctl.backgroundView.backgroundColor = [UIColor whiteColor];
    [self.ctl play];
} 
```

现在`observer`已添加为`UIApplicationWillResignActive`, `UIApplicationDidBecomeActive`。其选择器如下：

```
 -(void)Pause_Video:(NSNotification*)notification {
   Pausevideo = 1;
   playbaktime = self.ctl.currentPlaybackTime;
   [self.ctl pause];
 }

-(void)Play_Video:(NSNotification*)notification {

  if(self.ctl.loadState == MPMovieLoadStateUnknown)
  {
    [self play:self.strVideoURL];
    Pausevideo = 0;
  }
  else{
    if (self.ctl.playbackState == MPMoviePlaybackStatePaused) {
        [self.ctl play];
        Pausevideo = 0;
    } 
    else
    {
        [self.ctl setInitialPlaybackTime:playbaktime];
        [self.ctl play];
        Pausevideo = 0;
    }
   }  
  } 
```

希望您理解问题和帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:18:24.977

好像`prepareToPlay`每次播放前都在调用，这不是必须的，加载文件时调用一次即可。暂停后无需调用它。

此外，您会遇到延迟，因为通知不会立即触发。具体来说，`UIApplicationDidBecomeActive`只有在应用程序进入前台后才会触发。相反，您想要的是观察`UIApplicationWillEnterForegroundNotification`，它将在应用程序进入前台时触发，并允许您显着减少延迟。

# python - 如何手动安装 Flask 扩展？

> ID：13065682
> 
> 赞同：4
> 
> 时间：2012-10-25T09:36:27.327
> 
> 标签：python, flask, flask-login, flask-extensions

我有一个烧瓶项目，我将烧瓶模块（0.9 版）直接放在我的 app.py 文件旁边。我这样做是为了可以将所有内容捆绑到版本控制存储库中，而无需其他任何人使用它来安装额外的 Python 模块。

我想使用[flask-login](http://packages.python.org/Flask-Login/)，所以我尝试通过下载最新版本并将flask_login.py 文件放在我的“本地”flask/ext/ 目录中来手动安装它。但是，虽然我可以`import flask`，`import flask.ext`但我无法`import flask.ext.login`使用 Python throwing `ImportError: No module named flask.ext.login`。`import flask.ext.flask_login`也会引发导入错误。

如果 Flask 及其扩展是 app.py 本地的，我是否需要做一些不同的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:49:31.523

解决方案是将`flask_login.py`文件放在与我的 app.py 文件相同的目录中。无需修改`flask/ext/__init__.py`文件。

该`flask.ext`模块仅用作扩展导入器，*而不是*已安装扩展的存储库。根据导入路径，我认为该`flask/ext`文件夹是要复制扩展的位置。这是不正确的。扩展只需要在 python 路径上的某个地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:49:29.883

在您的情况下，Python 不会抛出异常，此 Flask 模块负责修改文件夹 `import`中的标准钩子： [https ://github.com/mitsuhiko/flask/blob/master/flask/exthook.py](https://github.com/mitsuhiko/flask/blob/master/flask/exthook.py)`ext`

所以，我不认为 put `flask_login.py`into`flask/ext`是在 Flask 中使用扩展的正确方法。文档建议使用`pip install flask-login`or `python setup.py install`。之后，您可以执行以下操作：

```
import flask_login 
```

如果您仍想手动执行此操作，`setup()`请从[ext/__ init__.py](https://github.com/mitsuhiko/flask/blob/master/flask/ext/__init__.py)中删除调用。不过，Flask 家伙这样做可能有充分的理由:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T17:10:36.890

> 是的，但重点是手动安装所有内容，以便它可以独立于版本控制存储库中，无需额外安装。我查看了 setup.py 文件，但无法确定它是如何实现安装的。– 苏维特 10 月 25 日 10:06

为什么不使用 virtualenv 来实现呢？您也可以将您的环境推送到源代码管理，尽管这不是正常使用。

见： http: [//www.virtualenv.org/en/latest/](http://www.virtualenv.org/en/latest/)

# mysql - 如何在mysql中使用系统变量

> ID：13065686
> 
> 赞同：6
> 
> 时间：2012-10-25T09:36:36.937
> 
> 标签：mysql

如何在我自己的 mysql 存储过程中使用像 JAVA_HOME 这样的系统（操作系统）变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:43:38.107

猜猜您可能需要使用外部库（例如 UDF Repository for MySQL）来执行此操作。可以在[此处](http://www.mysqludf.org/lib_mysqludf_sys/)找到对该库的引用。应该有一个可以达到目的的 sys_get() 函数调用。

# facebook - 如何知道有多少人和谁喜欢我的文章？

> ID：13065691
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:36:45.300
> 
> 标签：facebook

我想要任何 fql 或 sdk 函数，我通过我的 url 它给了我多少和谁喜欢这个 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:28:12.823

您可以从 Facebook Javascript SDK 获取*Like 事件*^*，然后从那里执行 Ajax 请求，并保存详细信息。

^(*其实是回调)

# php - CodeIgniter SMTP 电子邮件 - 用等号替换字符

> ID：13065695
> 
> 赞同：19
> 
> 时间：2012-10-25T09:36:51.247
> 
> 标签：php, codeigniter, email, smtp, exchange-server

我正在使用 CodeIgniter 电子邮件库通过我们的 Exchange 服务器发送电子邮件。我得到的问题是电子邮件的内容搞砸了。

有些单词被等号“=”替换，我尝试了 2 个不同的 Exchange 服务器（它们位于不同的位置，并且没有任何关系），但我仍然遇到同样的问题。如果我使用任何其他服务器作为 SMTP 服务器来发送电子邮件，一切正常，内容保持不变。

发送前的内容：

```
Dear Customer

Please find attached a comprehensive explanation of how to get our brochure of Angola. This has been sent to you at the request of Alex.

The information has been taken from www.example.co.uk  "Company name" is one of the leading tile and marble companies in the UK. 
```

通过 Microsoft Exchange 发送后的内容：

```
Dear Customer

Please find attached a comprehensive explanation of how to get our brochure of A=gola. This has been sent to you at the request of Alex.

The information has been taken from www.example.co.uk  "Company name" is one of the leadi=g tile and marble companies in the UK. 
```

正如您所看到的，出于某种原因，一些“n”字符被替换为等号“=”（示例：Angola > A=gola）

我的邮箱配置：

```
$this->load->library('email');
$config['charset']      = 'utf-8';
$config['mailtype']     = 'html';

// SMTP
$config['protocol']     = 'smtp';
$config['smtp_host']    = 'exchange.example.com'; //ssl://
$config['smtp_user']    = 'email@example.com';
$config['smtp_pass']    = 'password';
$config['smtp_port']    = 25;

$this->email->set_newline( "\r\n" );

$this->email->initialize( $config );

$this->email->clear();

......

$this->email->from( $frome, $fromn );
$this->email->to( $email );

$this->email->subject( $subject );
$this->email->message( $send_message );

$this->email->send(); 
```

有谁知道为什么微软交易所会这样？还是我应该使用某种设置？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-25T09:45:38.230

这很奇怪，特别是因为并非所有的`n`s 都被音译并且不在特定位置。

试着打电话`$this->email->set_crlf( "\r\n" );`。在 Exchange 中查找消息详细信息并检查`Content-Type`Charset / Encoding - 在此处发布原始内容，以便我们对其进行检查。

我在[Microsoft 知识库](http://support.microsoft.com/kb/146629)中找到了这个：

> Microsoft Exchange 使用增强的字符集。Microsoft Exchange 的默认 MIME 字符集是 ISO 8859-1。一些网关不支持此字符集为换行发出软返回的方式。发生这种情况时，每行都以等号结束，表示网关的行长支持结束处的换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-05T05:09:35.650

我通过设置函数解决`$charlim = '998'`了这个问题（有点）。`_prep_quoted_printable`

当我设置`$crlf = "\r\n"`生成的电子邮件时，由于某种原因完全是乱码。但我注意到 = 符号定期出现，这是由于行长限制为 76 个字符造成的。所以增加每行的最大字符数（998 是 RFC2822 限制）可以解决问题，只要你没有很长的行。

# asp.net-mvc - 下载生成的文件后重定向/显示视图

> ID：13065697
> 
> 赞同：15
> 
> 时间：2012-10-25T09:36:58.887
> 
> 标签：asp.net-mvc

我有一个下载动态生成文件的控制器操作：

```
 public ActionResult DownloadFile()
    {
        var obj = new MyClass { MyString = "Hello", MyBool = true };
        var ser = new XmlSerializer(typeof(MyClass));
        var stream = new MemoryStream();
        ser.Serialize(stream, obj);
        stream.Position = 0;

        Response.Clear();
        Response.AddHeader("Content-Disposition", "attachment; filename=myfile.xml");
        Response.ContentType = "application/xml";

        // Write all my data
        stream.WriteTo(Response.OutputStream);
        Response.End();

        return Content("Downloaded");
    } 
```

仅供参考：

```
 public class MyClass
    {
        public string MyString { get; set; }
        public int MyInt { get; set; }
    } 
```

这是有效的，并且文件 (myfile.xml) 已下载。
但是，“已下载”消息不会发送到浏览器。

同样，如果我替换`return Content("Downloaded");`
为，`return Redirect("www.something.com");`
则浏览器在文件下载之前被重定向。

作为一个序言，用户旅程是：

*   用户在以前的视图中填写表格
*   表格已提交
*   生成并下载 XML
*   用户被重定向/显示“已下载”视图*（因此按 F5 不会重新发布表单）*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T16:29:25.387

正如罗斯所说，您只能对 HTTP 请求返回一个响应。在这种情况下我要做的是：

1.  将请求发送到服务器
2.  服务器生成文件并将其存储在一些服务器端数据结构中（缓存、用户会话、临时数据）
3.  服务器返回一个`RedirectToAction()`（POST、REDIRECT、GET 模式）
4.  重定向的操作返回一个带有一些 javascript 的视图
5.  `window.location.href`通过将属性设置为将文件发送回浏览器的特殊下载操作来触发预生成文件的下载

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T14:45:34.263

每个 HTTP 请求只能有一个响应 - 您试图潜入两个（文件和页面）。

通常，当您发送“Content-Disposition：附件”HTTP 标头时，浏览器将停留在当前页面并弹出文件保存对话框（或自动将文件保存在下载中）。

如果您想阻止重新提交表单，您将不得不更改策略。我建议使用一些 javascript 来禁用表单的提交按钮并在 div 叠加层中显示“已完成”消息？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-24T18:40:14.043

这是下载文件后我重定向的方式。主要逻辑是等待重定向，直到文件下载。为此，计算服务器端响应并使用服务器端响应时间 + 一些偏移量延迟重定向。

服务器端控制器代码：

```
[HttpPost]
public ActionResult GetTemplate()
    {
        return Json(new {Url = Url.Action("ReturnTemplate") });
    }

[HttpGet]
public ActionResult ReturnTemplate()
    {
        FileResult fileResult = // your file path ;
        return fileResult;
    } 
```

客户端代码：

```
<div id="btnGen" align="right"><button class="main-button"     id="generateTemplate" type="Submit"></div> 
```

Javascript：

```
$("#generateTemplate").click(function () {
    var startTime = (new Date()).getTime(), endTime;

        $.ajax({
            url: '@Url.Action("GetTemplate", "Controller")',
            type: 'POST',
            traditional: true,
            dataType: "json",
            contentType: "application/json",
            cache: false,
            data: JSON.stringify(),
            success: function (result) {
                endTime = (new Date()).getTime();
                var serverResponseTime = endTime - startTime + 500;
                setInterval(function () { Back() }, serverResponseTime);
                window.location = result.Url;
            }
        });
});

function Back() {
    window.location = '@Url.Action("Index","Controller")';
} 
```

# ios - 从右横向直接更改为横向左

> ID：13065699
> 
> 赞同：1
> 
> 时间：2012-10-25T09:37:04.163
> 
> 标签：ios, xcode4.3, landscape, portrait

当我直接从横向右侧更改为横向左侧时，会出现错误。

我有一个网络视图和图像视图。在每个州，我都声明了特定的宽度高度和位置。当我处于纵向模式时，我有视图的特定坐标。我还为横向模式设置了它们。当我从左侧横向快速更改为横向右侧时，所有比例都搞砸了！

当我的应用程序处于横向模式并直接旋转到横向左侧时，我需要访问该状态。我需要访问它来进行修改，如果我不能，我怎么能强制我的应用程序在进入另一个横向模式之前通过纵向模式，例如：
横向右侧 - >横向左侧将按如下方式进行横向右-> 纵向-> 横向左。因为如果我直接从右到左旋转它，我的软件中会有一个错误，所以我需要修复它。请注意，我正在使用标签栏控制器，并且我已成功对其进行子类化，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:58:58.707

这里的问题是我对方向变化的处理，我应该从一开始就使用：

```
 if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) 
```

这给了我控制每个状态的选项。希望这对未来的人有所帮助

# java - 使用 Gmail Smtp 发送邮件时出现异常？

> ID：13065701
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:37:09.547
> 
> 标签：java, email, gmail

我正在尝试使用 Gmail smtp 服务器发送邮件。

```
package com;

import java.util.Properties;

import javax.mail.Message;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class Email {
public static void main(String[] args) {
    try 
    {
    String host = "smtp.gmail.com";
    final String from = "myuname@gmail.com";
    final String pass = "mypassword";
    Properties props = System.getProperties();
    props.put("mail.smtp.starttls.enable", "true"); 
    props.put("mail.smtp.host", host);
    props.put("mail.smtp.user", from);
    props.put("mail.smtp.password", pass);
    props.put("mail.smtp.port", "587");
    props.put("mail.smtp.auth", "true");

    String[] to = {"to@gmail.com"}; 

    Session session = Session.getInstance(props,
          new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(from, pass);
            }
          });
    MimeMessage message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));

    InternetAddress[] toAddress = new InternetAddress[to.length];

    // To get the array of addresses
    for( int i=0; i < to.length; i++ ) { 
        toAddress[i] = new InternetAddress(to[i]);
    }
    System.out.println(Message.RecipientType.TO);

    for( int i=0; i < toAddress.length; i++) { 
        message.addRecipient(Message.RecipientType.TO, toAddress[i]);
    }
    message.setSubject("sending in a group");
    message.setText("Welcome to JavaMail");
    Transport transport = session.getTransport("smtp");
    transport.connect(host, from, pass);
    transport.sendMessage(message, message.getAllRecipients());
    transport.close();
    }catch (Exception e) {
        System.out.println(e);
    }
}
} 
```

但我得到一个`exception`

```
javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 587;
  nested exception is:
    java.net.ConnectException: Connection refused: connect 
```

我怎样才能消除这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:42:36.670

一个更简单的选择是使用 apache commons mail。

```
import org.apache.commons.mail.*;

Email email = new SimpleEmail();
email.setHostName("smtp.googlemail.com");
email.setSmtpPort(465);
email.setAuthenticator(new DefaultAuthenticator("username", "password"));
email.setSSL(true);
try{
email.setFrom("yourID@gmail.com");
email.setSubject("hello");
String s="hi"
email.setMsg(s);
email.addTo(id);
email.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:23:47.663

我认为问题出在我的电子邮件 ID 中。我创建了一个新的，它正在工作。

谢谢大家。

# git - Git Merge：仅当不同文件中发生差异时如何进行新提交

> ID：13065703
> 
> 赞同：1
> 
> 时间：2012-10-25T09:37:16.753
> 
> 标签：git, merge

这是我的问题。例如，

```
 A---B---C topic
     /
D---E---F---G master 
```

`fileA`on `E`commit（topic和master的共同祖先）的内容是：

```
abc def 
```

`fileA`在`topic`分支上是：

```
abc def
abc 
```

`fileA`在`master`分支上是：

```
abc def
abc
gh  //added by master. 
```

做“ ”时，会得到`git checkout master; git merge topic`一个新的：`fileA`

```
abc def
abc
gh 
```

但我不希望这种情况发生，如果它在合并分支上的任何 2 个文件上出现差异，我希望 git 退出并向我抛出错误消息或类似的东西。

感谢 VonC 的编辑和回答。下次我会注意到问题格式:)。

**但是，如果其他人更改了主题中的另一个文件，而自提交 E 以来在 master 中没有更改，我可以允许它合并到我的分支中。我之前可能没有表达清楚**

为什么我需要这个？ 因为如果我不知道其他人对同一文件进行了新更改，即使它们可以合并，
我只想确保我的补丁与我的原始版本相比会产生“我自己的”更改。`fileA`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:52:09.390

目前，我可以通过 git 输出识别 git 是否正在合并同一文件中的不同更改：自动合并............

我将使用“git merge --no-commit”来测试输出。那是我的解决方法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:46:28.127

> 如果我不知道其他人对同一文件进行了新更改，我只想确保我的补丁与我的原始文件 A 相比会产生“我自己的”更改，

这意味着 master 可以快速转发到 topic，因为 topic 会添加新的提交，而 master 不会：

您可以通过首先尝试以下方法来测试是否是这种情况：

```
git checkout topic git merge --ff-only master 
```

然后您可以将主题合并到主控（简单合并）。

如果您只想测试：

```
 git checkout topic git merge --ff-only --no-commit master 
```

无需解析输出：如果命令完成，则意味着合并将是快进的。
（根据[OP Keith](https://stackoverflow.com/users/1754879/keith)`--no-commit`的[建议](https://stackoverflow.com/a/13079395/6309)）

# facebook - 为什么没有。我通过 Graph API 看到的 Facebook 朋友数量不等于否。在我的个人资料上显示的朋友？

> ID：13065704
> 
> 赞同：1
> 
> 时间：2012-10-25T09:37:18.620
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用以下代码在 Facebook 上的朋友列表中获取朋友列表：

```
//get the user's access token
$access_token = $facebook->getAccessToken();
//check permissions list
$permissions_list = $facebook->api(
   '/me/permissions',
   'GET',
   array(
      'access_token' => $access_token
   )
);

$frnds=  $facebook->api('/me/friends');
echo sizeof($frnds['data']).'<br>';
foreach($frnds['data'] as $frn)
{
   echo $frn['name'].'<br>'; 
} 
```

没有。朋友的数量，即 sizeof($frnds['data']) 比我的 Facebook 个人资料上实际显示的朋友少。我想知道为什么？

# swt - 如何在 Eclipse 视图中嵌入 jframe

> ID：13065714
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:37:56.903
> 
> 标签：swt, eclipse-rcp, jframe, awt, jpanel

> **可能重复：**
> [有什么方法可以将 Swing JFrame 从 SWT_AWT 桥嵌入到 AWT 框架中？](https://stackoverflow.com/questions/5502897/any-way-to-embed-a-swing-jframe-in-the-awt-frame-from-the-swt-awt-bridge)

我有一个有很多视图的 RCP 应用程序。我有一个扩展 JPanel 并绘制一些东西的类。有没有办法嵌入这个类以显示在视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:28:54.583

```
 Composite swtAwtComponent = new Composite(parent, SWT.EMBEDDED);
    java.awt.Frame frame = SWT_AWT.new_Frame( swtAwtComponent );
    javax.swing.JPanel panel = new javax.swing.JPanel( );
    frame.add(panel);
    frame.add(jFrameClass) 
```

# java - 尝试使用 Apache Wink 生成 JSON 数组时，我得到 WebApplicationException

> ID：13065715
> 
> 赞同：0
> 
> 时间：2012-10-25T09:37:59.397
> 
> 标签：java, json, apache, tomcat6, jax-rs

我是 JAX-RS 的新手。我正在尝试将 List 表示为 JSON 数组：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
@Path("/getUsersResource/{userId}")
public List<AbstractResource> getUsersResources(@PathParam("userId") final String userId) {
    if (userId == null) {
        return null;
    }

    User user = null;

    try {
        user = userDao.getUserById(Integer.parseInt(userId));
    } catch (NumberFormatException nfe) {
        user = userDao.getUser(userId);
    }

    if (user == null) {
        return null;
    }

    return abstractResourceDao.getUsersResources(null, user.userId);
} 
```

当我执行此网址时，我得到：

> {“异常”：{“名称”：“WebApplicationException”}}

我只用@XmlRootElement 注释了我的AbstractResource 类，当我将@Produces 注释参数更改为

> @Produces(MediaType.APPLICATION_XML)

我得到了正确的结果。这是我的 web.xml：

```
<servlet>
    <servlet-name>REST Application</servlet-name>
    <servlet-class>org.apache.wink.server.internal.servlet.RestServlet</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.balthaser.b3e.rest.RESTApplication</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>REST Client</servlet-name>
    <servlet-class>com.balthaser.b3e.rest.client.RESTClient</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
    <servlet-mapping>
    <servlet-name>REST Client</servlet-name>
    <url-pattern>/rest/index.html</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>REST Application</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

生成 JSON 数组时是否有任何其他要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T02:35:03.357

Apache Wink 使用 json.org 和 jettison 作为 Json 提供程序，它们无法正确处理 Java List。因此，您需要将 Wink 配置为使用 Jackson 作为 Json 提供程序。

这是细节。

[http://www.ibm.com/developerworks/java/library/wa-aj-jackson/index.html](http://www.ibm.com/developerworks/java/library/wa-aj-jackson/index.html)

# android - 应用在 Google Play 中不可见，甚至在应用的直接链接上也不起作用

> ID：13065717
> 
> 赞同：0
> 
> 时间：2012-10-25T09:38:02.117
> 
> 标签：android, google-play

我的应用未显示在 Google Play 市场中。我已经通过开发者控制台发布了。[但是即使在https://play.google.com/store/apps/details?id=not.visible.app](https://play.google.com/store/apps/details?id=not.visible.app)上也看不到该应用程序（它是假包只是为了说明问题）

不知道为什么它不起作用。这是我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="not.visible.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/Fake">
    <activity android:name=".LoginActivity" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MainMenuActivity"  android:theme="@android:style/Theme.NoTitleBar"></activity>
</application> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:49:00.150

我不知道是否需要，但您应该将屏幕支持放在清单中，例如：

```
<supports-screens android:normalScreens="true" android:xlargeScreens="true" android:largeScreens="true" android:smallScreens="true"></supports-screens> 
```

但是要在 Playstore 上看到您的应用，您应该等待 2/3 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:44:32.070

您的应用程序在 Market 中显示需要几个小时到一天的时间。你什么时候上传的？

# ruby-on-rails - Rails csv导入编码问题

> ID：13065725
> 
> 赞同：0
> 
> 时间：2012-10-25T09:38:17.907
> 
> 标签：ruby-on-rails, ruby, csv, encoding

我有这样的代码用于导入数据库：

```
require 'csv'
    CSV.foreach("/#{Rails.public_path}/uploads_prices/acc.csv", {:encoding => "ISO-8859-15:UTF-8", :col_sep => ";", :row_sep => :auto, :headers => :none}) do | row |
      @accum = Accumulator.new
      @accum.model = row[2]
      @accum.description = row[2]
      #@cross = OtherProductsCrossList.new
      logger.warn(row[1])
      logger.warn(row[2])

        if @accum.save
          if @accum.persisted?
            @accum.other_products_cross_lists.create(:cross_value => row[1], :distributor_id => 1, :product_type_id => 2)
          end
        end
    end 
```

我的文件如下所示：

```
Код № по каталогу  (артикул)    Наименование  товара    Ед. изм.    Цена опт.   Доп.    Остатки | Минск Класс   Группа  Бренд
96528   AH-36АЕТ    ASIAN HORSE 36з евр (тонк.кл.) 280A (187x127x227)                                                       шт      38,58           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
96529   AH-36АRТ    ASIAN HORSE 36з рус (тонк.кл.) 280A (187x127x227)                                                       шт      38,58           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
88634   AH-45АЕТ    ASIAN HORSE 45з евр 300A (238x129x227) (545158033)                                                      шт      46,14           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
82978   AH-45АЕ ASIAN HORSE 45з евр 300A тонк.клемы  (238x129x227) (545157033)                                          шт      36,57       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
96531   AH-60АЕ ASIAN HORSE 60з евр 510A (232x173x225)                                                                  шт      48,76           Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
82979   AH-70АЕ ASIAN HORSE 70з евр 600A (261x175x220)                                                                  шт      56,92       3   Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
96530   AH-70АR ASIAN HORSE 70з рус 600A (261x175x220)                                                                  шт      56,92       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
82980   AH-95АЕ ASIAN HORSE 95з евр 760A (306x173x225)                                                                  шт      77,21       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
96532   AH-95АR ASIAN HORSE 95з рус 760A (306x173x225)                                                                  шт      77,21       >8  Аккумуляторы и электрооборудование                                                                      ASIAN HORSE до 100А                                                                                     АКБ ASIAN HORSE
25335   600 103 085 Бэрен polar 100з (600103) 850A (353x175x190)                                                            шт      107,42          Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
102137  600 150 087 / L5 100    Бэрен polar 100з (600150) 870A (353x175x190)                                                            шт      94,7            Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
25332   544 111 042 / L1B 44    Бэрен polar 44з (544111) 420A (207x175x175)                                                             шт      47,83       4   Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
70160   544 150 039 Бэрен polar 44з (544150) 390A (175x175x190)                                                             шт      56,94           Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
70165   550 122 054 Бэрен polar 50з (550122) 540A (242x175x175)                                                             шт      63,21           Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
102134  554 150 052 / L1 54+    Бэрен polar 54з (554150) 520A (207x175x190)                                                             шт      55,92           Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
107894  554 150 054 / L2B 54    Бэрен polar 54з (554150) 520A (242x175x175)                                                             шт      60,93           Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
27574       Бэрен polar 55/59з (555112) 480A (242x175x190)                                                          шт      51,72           Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN
70161   555 114 051 Бэрен polar 55з (555114) 510A (207x175x190)                                                             шт      58,56           Аккумуляторы и электрооборудование                                                                      BAREN до 100 A                                                                                          АКБ BAREN 
```

但是对于亚洲马，我在 db Asian horse 中看到，但对于 Бэрен polar 我看到 Áýðåí polar。我如何告诉 rails 它必须正确导入俄语符号？

文件也在这里： [链接](https://dl.dropbox.com/u/59666091/acc.csv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:43:54.550

`# encoding: UTF-8`在 ruby​​ 代码文件的开头添加一行。[JEG](https://twitter.com/JEG2)对 Ruby 编码的深入解释有很大帮助：http: [//blog.grayproductions.net/articles/ruby_19s_three_default_encodings](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:09:15.703

没有任何帮助...但是我在 phpmyadmin 中尝试了许多编码，并设置这对我的问题有好处（cp1251bin）...在它不起作用之前不知道我的

# javascript - CKEditor - 使用数据处理器删除脚本标签

> ID：13065731
> 
> 赞同：3
> 
> 时间：2012-10-25T09:38:32.597
> 
> 标签：javascript, ckeditor, data-processing

我对 CKEditor 很陌生（两天前开始使用它），我仍在与一些配置作斗争，比如从编辑器中删除标签。

例如，如果用户在源模式下键入以下内容：

```
<script type="text/javascript">alert('hello');</script> 
```

我想删除它。

查看文档，我发现这可以使用 HTML 过滤器来完成。我这么定义它但它不起作用。

```
var editor = ev.editor;
var dataProcessor = editor.dataProcessor;
var htmlFilter = dataProcessor && dataProcessor.htmlFilter;
htmlFilter.addRules(
    {
        elements :
          {
             script : function(element)
                {
                   alert('Found script :' + element.name);
                   element.remove();
                },
             img : function( element )
                {
                   alert('Found script :' + element.name);
                   if ( !element.attributes.alt )
                       element.attributes.alt = 'Cookingfactory';
                   }
                 }
             }); 
```

img 部分运行良好，但不是脚本之一。我想我错过了什么。它甚至不显示脚本的警报消息。

任何帮助都会非常受欢迎:o)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T06:56:30.063

你可以使用这个：

```
CKEDITOR.replace('editor1', {
   on: {
      pluginsLoaded: function(event) {
         event.editor.dataProcessor.dataFilter.addRules({
            elements: {
               script: function(element) {
                  return false;
               }
            }
         });
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T10:07:50.093

如果您使用的是 CKEditor 4.1 或更高版本，您可以使用[高级内容过滤器](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)来允许您想要的内容。

如果您使用的是 CKEditor 4.4 或更高版本，还有一种更简单的方法。您可以使用[Disallowed Content](http://docs.ckeditor.com/#!/guide/dev_disallowed_content)来过滤您不喜欢的内容。

```
 config.disallowedContent = 'script'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T14:10:33.490

因为我有 CKEditor 4，所以我做了下一个

```
CKEDITOR.instances.editor1.config.protectedSource.push( /{.*\".*}/g ); 
```

它将忽略 smarty 大括号中的引号

# ruby-on-rails - 适用于多个域的 Rails 应用程序

> ID：13065741
> 
> 赞同：0
> 
> 时间：2012-10-25T09:39:07.470
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要创建一个具有相同五个站点的服务，并且一个将它们联合起来，但每个人都必须生活在一个单独的域中。也许以某种方式运行一个实例 Rails 应用程序根据域重定向用户？还是每个实例都开始一个新的 Rails 应用程序更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:10:04.330

一般来说，有两种方法可以用一个 rails 实例来做到这一点。

1.  根据域名将来自 http 服务器的 comming 请求重定向到不同的 uri 路径（'/site1'、'/site2' 等）。我不是设置这个的专家。但我确信这是可行的。

2.  根据 request.url.host 变量的值，将来自应用程序控制器的来自应用程序控制器的请求重定向到不同的路径。

    redirect_to my_site1_path if request.url.host == 'www.site1.com'

您可以选择其中任何一个，这取决于您:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:18:15.127

为什么不只设置一个 rails 应用程序实例，并配置您的 http 服务器（Apache、Nginx 或其他）来监听所有这些域上的连接？

# django - /admin/password_reset/ 处的 TemplateSyntaxError。解决办法是什么？

> ID：13065749
> 
> 赞同：0
> 
> 时间：2012-10-25T09:39:40.820
> 
> 标签：django

这是我的 urlconf（取自 Django 文档）

```
urlpatterns = patterns('',
 url(r'^admin/password_reset/$', 'django.contrib.auth.views.password_reset', name='admin_password_reset'),
(r'^admin/password_reset/done/$', 'django.contrib.auth.views.password_reset_done'),
(r'^reset/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$', 'django.contrib.auth.views.password_reset_confirm'),
(r'^reset/done/$', 'django.contrib.auth.views.password_reset_complete'),
) 
```

这是错误：

```
Caught NoReverseMatch while rendering: Reverse for 'django.contrib.auth.views.password_reset_confirm' with arguments '()' and keyword arguments '{'uidb64': 'NTA4MjY0NmZhOWQ3MTk1MDYzMGQyODgy', 'token': '3bv-abcb4fa27b0efa207808'}' not found. 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:59:22.687

我认为区别在于查询键：

```
<uidb36> 
```

是您的 url 正则表达式所期望的

但是您的页面正在发送

```
'uidb64' 
```

# django - 如何将数据从 django 传递到 d3.js

> ID：13065750
> 
> 赞同：5
> 
> 时间：2012-10-25T09:39:42.970
> 
> 标签：django, d3.js

我目前正在做一个调查网络项目，需要我使用 d3.js 来执行某种条形图可视化。我正在使用 Django 来编写我的 Web 应用程序。

我遇到的问题是如何将与对象相关的所有值传递到 d3.js 中使用的数组中？

```
choice = question.choicelist.get(choice_no=choice_no) 
```

其中对问题的每个选项的投票将是选项 1 = 4、选项 2 = 6、选项 3 = 7、选项 4 = 1。

对于 ds.js，读取数据集最简单的方法是：

```
var data = [ 4, 6, 7, 1] 
```

如何将数据传递给我的模板，以便 d3.js 能够像上面的代码一样读取它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T10:03:18.023

最方便的选择：将其转换为 json。Json是有效的javascript，所以可以直接插入到模板中，这似乎是你想要的。就像是

```
import json

def your_view(request):
    poll_results = [4, 6, 7, 1]
    poll_as_json = json.dumps(poll_results)
    # Gives you a string '[4, 6, 7, 1]'
    ...
    return render_or_whatever(context={'poll_as_json': poll_as_json}) 
```

在您的模板中：

```
<script ...>
   var data = {{ poll_as_json }};
   ...
</script> 
```

类似的东西？

# android - 在sqlite中一次插入多行

> ID：13065751
> 
> 赞同：0
> 
> 时间：2012-10-25T09:39:46.203
> 
> 标签：android

我刚刚创建了一个插入数据库的方法。但它仍然显示相同的结果。i,e 仅 unit1。代码如下 DbAdapter.java

```
private static final String DATABASE_NAME="bible1";
 private static final String DATABASE_TABLE="test1";
 private static final int DATABASE_VERSION=1;

 public static final String KEY_ID="_id";
 public static final String UNITS="units";
 public static final String CHAPTERS="chapters";

 private static final String CREATE_DATABASE="create table test1 (_id integer primary key autoincrement, units text not null, chapters text not null);";

 private static SQLiteHelper sqLiteHelper;
 private static SQLiteDatabase sqLiteDatabase;

 private Context context;

 //constructor

 public DbAdapter(Context c){
     context = c;
 }

 private static class SQLiteHelper extends SQLiteOpenHelper{

     public SQLiteHelper(Context context){

         super(context,DATABASE_NAME,null,DATABASE_VERSION);
     }
     @Override
     public void onCreate(SQLiteDatabase db) {
         // TODO Auto-generated method stub
         db.execSQL(CREATE_DATABASE);
         MakeUnits();
     }

     @Override
     public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
         // TODO Auto-generated method stub

     }

 }

 public DbAdapter open() throws SQLException{
     try{
     sqLiteHelper = new SQLiteHelper(context);
     sqLiteDatabase = sqLiteHelper.getWritableDatabase();
     }catch(NullPointerException ne){
         Log.e("Database", "error in creating the table");
     }

     return this;
 }

 public void close(){
     sqLiteHelper.close();
 }

 public static void MakeUnits()
 {
     createUnits("unit1","chapter1");
     createUnits("unit2","chapter2");  
 }

 public Cursor fetchAllNotes(){
     return sqLiteDatabase.query(DATABASE_TABLE, new String[]{KEY_ID,UNITS,CHAPTERS}, null, null, null, null, null);
 }

 public static long createUnits(String units,String chapters){
     ContentValues content= new ContentValues();
     content.put(UNITS, units);
     content.put(CHAPTERS, chapters);
     return sqLiteDatabase.insert(DATABASE_NAME, null, content);

 } 
```

那么现在该怎么办？我认为我创建的方法是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:43:07.213

您需要修改您的插入如下：

```
public static long MakeUnits(SQLiteDatabase db)
 {
     long total = 0;

     ContentValues insert1 = new ContentValues();
     insert1.put(UNITS, "Unit1");
     insert1.put(CHAPTERS, "CHAPTER1");
     total = db.insert(DATABASE_TABLE,null,insert1);

     insert1.clear();
     insert1.put(UNITS, "Unit2");
     insert1.put(CHAPTERS, "CHAPTER2");
     total += db.insert(DATABASE_TABLE,null,insert1);

     return total;
 } 
```

最好，我建议您使用某种**循环**来完成多个插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:49:35.390

# matplotlib - Matplotlib中通过OO接口获取图形管理器

> ID：13065753
> 
> 赞同：7
> 
> 时间：2012-10-25T09:39:52.860
> 
> 标签：matplotlib, figure

我希望能够获得已创建图形的 figure_manager：例如，我可以使用 pyplot 界面使用：

```
from pylab import*
figure()    
plot(arange(100))
mngr = get_current_fig_manager() 
```

但是，如果我有一些数字怎么办：

```
from pylab import *
fig0 = figure()
fig1 = figure()    
plot(arange(100))
mngr = fig0.get_manager() #DOES NOT WORK - no such method as Figure.get_manager() 
```

但是，仔细搜索图形 API [http://matplotlib.org/api/figure_api.html](http://matplotlib.org/api/figure_api.html)并没有用处。我的 IDE 中的图形实例也没有自动完成，没有一个方法/成员似乎给了我一个“经理”。

那么我该如何做到这一点，一般来说，如果在 OO 接口中有一个 pyplot 方法我需要它的类似方法，我应该在哪里查看？

PS：get_current_fig_manager() 到底返回了什么样的对象？在调试器中我得到：

```
type(get_current_fig_manager())
<type 'instance'> 
```

听起来很神秘……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T10:36:03.413

好问题。你的权利，文档没有说明能够获得经理或画布。根据代码经验，您的问题的答案是：

```
>>> import matplotlib.pyplot as plt
>>> a = plt.figure()
>>> b = plt.figure()

>>> a.canvas.manager
<matplotlib.backends.backend_tkagg.FigureManagerTkAgg instance at 0x1c3e170>
>>> b.canvas.manager
<matplotlib.backends.backend_tkagg.FigureManagerTkAgg instance at 0x1c42ef0> 
```

了解这些内容的最佳方式是阅读代码。在这种情况下，我知道我想要获取画布以便我可以掌握图形管理器，所以我查看了 set_canvas 方法`figure.py`并找到了以下代码：

```
def set_canvas(self, canvas):
    """
    Set the canvas the contains the figure

    ACCEPTS: a FigureCanvas instance
    """
    self.canvas = canvas 
```

从那里，（因为没有 get_canvas 方法），我知道画布被存储在哪里并且可以直接访问它。

高温高压

# ruby - 如何在（与）黄瓜代码中编写 ruby 代码？

> ID：13065755
> 
> 赞同：0
> 
> 时间：2012-10-25T09:40:00.867
> 
> 标签：ruby, google-chrome, cucumber

我想在黄瓜测试中集成一个 ruby​​ 代码：

```
FIX_TOKEN_FOR_TEST_COMPANY = "new_id"
FIX_ID_FOR_TEST_COMPANY    = 184

Given ... do

end

When ... do

end

Then ... do
  c = Company.find( FIX_ID_FOR_TEST_COMPANY );
  c.confirmation_token = FIX_TOKEN_FOR_TEST_COMPANY 
  c.confirmed_at = nil;
  Profile.find_by_email("cucumber@mail.de").destroy;
  c.save(:validate => false)
end 
```

这样对吗？

错误：找不到 ID=184 的公司 (ActiveRecord::RecordNotFound)

但是，如果我尝试在控制台（终端）中写入它就可以了。

# ruby-on-rails - Count 返回所有连接数据的计数，而不是主对象

> ID：13065762
> 
> 赞同：0
> 
> 时间：2012-10-25T09:40:34.910
> 
> 标签：ruby-on-rails, activerecord

我正在尝试计算养狗的用户。

```
User.joins(:pets).where("pets.type = ?", :dog).count 
```

这将返回用户数量 + 他们的狗的组合，而不是我只想要实际用户的数量。

我究竟做错了什么？

## 更新

我还尝试使用上面的查询来获取用户，它返回一个相同用户的数组，根据他们有多少狗重复多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:52:03.607

试试这个：

```
User.joins(:pets).where("pets.type = ?", :dog).count(distinct: true) 
```

请参阅[api 文档](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-count)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:52:06.450

联接将返回用户具有多个关联的所有重复行...

例如，如果用户 U1 有一条狗，而用户 U2 有两条狗，则连接将返回总共三行......所以不要使用连接，而是尝试使用包含选项......

有关更多信息，请参阅此 Railscast，[http:](http://railscasts.com/episodes/181-include-vs-joins) //railscasts.com/episodes/181-include-vs-joins ...

# ruby-on-rails - 异步 ActionMailer - 一些电子邮件未发送

> ID：13065767
> 
> 赞同：0
> 
> 时间：2012-10-25T09:40:52.400
> 
> 标签：ruby-on-rails, asynchronous, gmail, actionmailer

我有一个 Rails 应用程序，它使用与 gmail 帐户连接的 ActionMailer 来发送电子邮件通知。最近我将“发送邮件”功能放在单独的线程上，这样主请求线程就不会被阻塞。

问题是有些邮件没有被发送。在 Rails 日志中，它说电子邮件已发送，但如果我在浏览器中打开 gmail 并查看“已发送”部分，则有几封邮件丢失。

我认为某处存在“请求过多”错误，因为邮件是异步发送的，非常快。如果我在每个线程中增加延迟会有帮助吗？发送邮件是否有标准的“冷却”时间？

我不想使用延迟工作或其他替代方法。

# postgresql - 循环遍历 RECORD 列

> ID：13065774
> 
> 赞同：6
> 
> 时间：2012-10-25T09:41:16.623
> 
> 标签：postgresql, loops, for-loop, record, plpgsql

我需要通过键/索引遍历类型`RECORD`项，就像我可以在其他编程语言中使用数组结构一样。

例如：

```
DECLARE
    data1    record;
    data2    text;
...
BEGIN
...
FOR data1 IN
    SELECT
        *
    FROM
        sometable
LOOP

    FOR data2 IN
        SELECT
            unnest( data1 )   -- THIS IS DOESN'T WORK!
    LOOP
        RETURN NEXT data1[data2];   -- SMTH LIKE THIS
    END LOOP;

END LOOP; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T00:05:14.487

正如@Pavel 解释的那样，不可能像遍历数组那样简单地遍历记录。但是有几种方法可以解决它 - 取决于您的确切要求。最终，由于您想要返回同一列中的所有值，您需要将它们转换为相同的类型 -`text`这是明显的共同点，因为每种类型都有一个文本表示。

### 又快又脏

比如说，你有一个带有`integer`、 a`text`和一`date`列的表。

```
CREATE TEMP TABLE tbl(a int, b text, c date);
INSERT INTO tbl VALUES
 (1, '1text',     '2012-10-01')
,(2, '2text',     '2012-10-02')
,(3, ',3,ex,',    '2012-10-03')  -- text with commas
,(4, '",4,"ex,"', '2012-10-04')  -- text with commas and double quotes 
```

那么解决方案可以很简单：

```
SELECT unnest(string_to_array(trim(t::text, '()'), ','))
FROM   tbl t; 
```

适用于前两行，但不适用于第 3 行和第 4 行的特殊情况。
您可以使用文本表示中的逗号轻松解决问题：

```
SELECT unnest(('{' || trim(t::text, '()') || '}')::text[])
FROM   tbl t
WHERE  a < 4; 
```

这可以正常工作 - 除了第 4 行在文本表示中有双引号。通过将它们加倍来逃脱。但是数组构造函数需要将它们转义为`\`. 不知道为什么会出现这种不兼容...

```
SELECT ('{' || trim(t::text, '()') || '}') FROM tbl t WHERE a = 4 
```

产量：

```
{4,""",4,""ex,""",2012-10-04} 
```

但是你需要：

```
SELECT '{4,"\",4,\"ex,\"",2012-10-04}'::text[];  -- works 
```

### 适当的解决方案

如果您事先知道列名，那么干净的解决方案将很简单：

```
SELECT unnest(ARRAY[a::text,b::text,c::text])
FROM tbl 
```

由于您对熟知类型的记录进行操作，因此您只需查询系统目录：

```
SELECT string_agg(a.attname || '::text', ',' ORDER  BY a.attnum)
FROM   pg_catalog.pg_attribute a 
WHERE  a.attrelid = 'tbl'::regclass
AND    a.attnum > 0
AND    a.attisdropped = FALSE 
```

将其放入具有动态 SQL 的函数中：

```
CREATE OR REPLACE FUNCTION unnest_table(_tbl text)
  RETURNS SETOF text LANGUAGE plpgsql AS
$func$
BEGIN

RETURN QUERY EXECUTE '
SELECT unnest(ARRAY[' || (
    SELECT string_agg(a.attname || '::text', ',' ORDER  BY a.attnum)
    FROM   pg_catalog.pg_attribute a 
    WHERE  a.attrelid = _tbl::regclass
    AND    a.attnum > 0
    AND    a.attisdropped = false
    ) || '])
FROM   ' || _tbl::regclass;

END
$func$; 
```

称呼：

```
SELECT unnest_table('tbl') AS val 
```

回报：

```
val
-----
1
1text
2012-10-01
2
2text
2012-10-02
3
,3,ex,
2012-10-03
4
",4,"ex,"
2012-10-04 
```

这无需安装额外的模块即可工作。另一种选择是安装[hstore](http://www.postgresql.org/docs/current/interactive/hstore.html)扩展并[像@Craig 演示](https://stackoverflow.com/a/13078982/939860)的那样使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T23:50:52.930

PL/pgSQL 并不是真正为您想要做的事情而设计的。它不认为记录是可迭代的，它是可能不同且不兼容的数据类型的元组。

PL/pgSQL 具有`EXECUTE`动态 SQL，但`EXECUTE`查询不能直接引用 PL/pgSQL 变量`NEW`或其他记录。

您*可以*做的是将记录转换为`hstore`键/值结构，然后遍历`hstore`. 使用`each(hstore(the_record))`，它产生一`key,value`组元组。所有值都转换为它们的`text`表示。

这个玩具函数通过创建一个匿名来演示对记录的迭代`ROW(..)`- 它将具有列名`f1`, `f2`, `f3`- 然后将其转换为`hstore`，迭代其列/值对，并返回每一对。

```
CREATE EXTENSION hstore;

CREATE OR REPLACE FUNCTION hs_demo()
RETURNS TABLE ("key" text, "value" text)
LANGUAGE plpgsql AS
$$
DECLARE
  data1 record;
  hs_row record;
BEGIN
  data1 = ROW(1, 2, 'test');
  FOR hs_row IN SELECT kv."key", kv."value" FROM each(hstore(data1)) kv
  LOOP
    "key" = hs_row."key";
    "value" = hs_row."value";
    RETURN NEXT;
  END LOOP;
END;
$$; 
```

实际上你永远不会这样写，因为整个循环可以用一个简单的`RETURN QUERY`语句代替，而且它做同样的事情`each(hstore)`——所以这*只是*为了展示它是如何`each(hstore(record))`工作的，上面的函数永远不应该被实际使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T16:13:33.090

plpgsql 不支持此功能 - 记录不是像其他脚本语言那样的哈希数组 - 它类似于 C 或 ADA，在这些语言中此功能是不可能的。您可以使用其他 PL 语言，如 PLPerl 或 PLPython 或一些技巧 - 您可以使用 HSTORE 数据类型（扩展）或通过动态 SQL 进行迭代

请参阅[如何使用动态 SQL 设置复合变量字段的值](https://stackoverflow.com/questions/7711432/how-to-set-value-of-composite-variable-field-using-dynamic-sql)

但是请求这个功能通常意味着，所以你做错了。当您使用 PL/pgSQL 时，您的想法与使用 Javascript 或 Python 不同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:15:44.683

```
FOR data2 IN
    SELECT d
    from  unnest( data1 ) s(d)
LOOP
    RETURN NEXT data2;
END LOOP; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T12:45:18.097

如果您在循环之前对结果进行排序，您会完成您想要的。

```
for rc in select * from t1 order by t1.key asc loop
 return next rc;
end loop; 
```

会做你需要的。这也是执行此类任务的最快方式。

# qt4 - Qt 连接信号和插槽

> ID：13065775
> 
> 赞同：1
> 
> 时间：2012-10-25T09:41:19.897
> 
> 标签：qt4, signals, slots, disabled-control, disabled-input

在我的 Qt 项目中，我有一个`QPushButton`和一个`QLineEdit`实例。我想在按下 QPushButton 时禁用 QLineEdit。

我写了这段代码：

```
this->btn = new QPushButton(this);
this->txt = new QLineEdit(this);
QObject::connect(this->btn,SIGNAL(clicked(bool)),this->txt,SLOT(setDisabled(bool))); 
```

这是行不通的。你能帮我吗？我的错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:23:02.837

该`clicked(bool)`信号始终`false`用于不可检查的按钮。`true`除非您设置，否则它永远不会发出`setCheckable(true)`，在这种情况下，当您选中它时它会发出`true`，`false`当您取消选中它时它会发出。无法检查不可检查的按钮（显然），这就是信号总是发出的原因`false`。

因此，在这种情况下，只需提供您自己的插槽，您可以在其中手动切换`setDisabled(true)`和`setDisabled(false)`。或者首先使按钮可检查`setCheckable(true)`（在这种情况下它甚至可能更合适；只需测试一下即可。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:58:49.240

`QLineEdit``setDisabled`根据[文档](http://doc.qt.digia.com/qt/qlineedit.html#public-functions)没有方法

试试`setReadOnly`吧。

# umbraco - 如何在 umbraco 中验证数据类型？

> ID：13065778
> 
> 赞同：3
> 
> 时间：2012-10-25T09:41:23.880
> 
> 标签：umbraco

我在 umbraco 中创建了一个自定义数据类型，我想在保存之前检查该值，如果不正确，则提供错误消息。

您如何对数据类型强制执行验证规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:40:33.023

您是否考虑`ValidationProperty`过用于此目的？

添加属性后，您可以通过添加验证逻辑来​​实现该属性。这样，您可以在用户使用新的自定义数据类型保存记录之前确保数据验证。

例如

```
 [ValidationProperty("HasValidValue")]
    public partial class MyDataEditor : System.Web.UI.UserControl,
        umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor 
```

在您的自定义数据类型逻辑中，然后有类似以下的内容......

```
public string HasValidValue
        {
            get
            {
                if (CheckIfDataIsValid())
                    return "Valid";
                else
                    return String.Empty;
            }
        } 
```

这样您就可以在代码级别执行此操作。

谢谢， 吉格

# exception - 使用 ServiceStack，我可以添加日志引用所有错误响应吗？

> ID：13065785
> 
> 赞同：1
> 
> 时间：2012-10-25T09:41:40.060
> 
> 标签：exception, error-handling, customization, servicestack

我已经使用（在我的 AppHost.cs 中）实现了所有请求/响应的日志记录：

```
this.RequestFilters.Add(serviceLogFilter.LogRequest);
this.ResponseFilters.Add(serviceLogFilter.LogResponse); 
```

在记录请求期间，我从记录表中获取新 ID 并将其放入`IHttpRequest.Items`.

我的问题是：当发生错误时，比如传入数据的验证失败，或者我的业务逻辑抛出异常，有没有办法可以自定义返回的错误以包含我的日志引用？最好在错误响应中添加 JSON 正文。或者，设置自定义 HTTP 标头？

这个想法是，如果发生意外情况，我的客户可以给我一个日志参考，我会找到他的请求并且可以轻松地重现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:03:10.293

请参阅[this question on different ways to Handle exceptions](https://stackoverflow.com/a/13058304/85785) from old and [New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)。

使用`IHttpRequest.Items`字典在同一请求中的请求过滤器、服务和响应过滤器之间传递数据。

此外，[Request Logger插件的](https://github.com/ServiceStack/ServiceStack/wiki/Request-logger)[InMemoryRollingRequestLogger](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Providers/InMemoryRollingRequestLogger.cs)实现显示了另一种能够记录所有请求的方法。

# c - android NDK 构建错误

> ID：13065790
> 
> 赞同：0
> 
> 时间：2012-10-25T09:41:54.050
> 
> 标签：c

我用 c 写了一个小的 hello world 程序，它是

```
#include<stdio.h>
int main()
{
printf(“ Hello world\n”);
return 1;
} 
```

这是制作文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := cppTestProj
LOCAL_SRC_FILES := LOCAL_SRC_FILES := helloworld.c

include $(BUILD_SHARED_LIBRARY) 
```

当我尝试使用 ndk-build.cmd 从命令提示符执行相同操作时，我遇到了一些此类长期未知错误

```
jni/helloworld.c:59:1: error: stray '\277' in program
jni/helloworld.c:59:1: error: stray '\271' in program
jni/helloworld.c:59:1: error: stray '\362' in program
jni/helloworld.c:59:1: error: stray '\224' in program
jni/helloworld.c:59:1: error: stray '\34' in program
jni/helloworld.c:59:1: error: stray '\213' in program
jni/helloworld.c:59:1: error: stray '\7' in program
jni/helloworld.c:59:1: error: stray '\35' in program
jni/helloworld.c:59:1: error: stray '\310' in program
jni/helloworld.c:59:1: error: stray '\341' in program
jni/helloworld.c:59:1: error: stray '\24' in program
jni/helloworld.c:59:1: error: stray '\330' in program
jni/helloworld.c:59:1: error: stray '\370' in program
jni/helloworld.c:59:1: error: stray '\271' in program
jni/helloworld.c:59:1: error: stray '\220' in program
jni/helloworld.c:59:1: error: stray '\203' in program
jni/helloworld.c:59:1: error: stray '\223' in program
jni/helloworld.c:59:1: error: stray '\275' in program
jni/helloworld.c:59:1: error: stray '\23' in program
jni/helloworld.c:59:1: error: stray '\302' in program
jni/helloworld.c:59:1: error: stray '\214' in program
jni/helloworld.c:59:1: error: stray '\310' in program
jni/helloworld.c:59:1: error: stray '\1' in program
jni/helloworld.c:59:1: error: stray '\252' in program
jni/helloworld.c:59:1: error: stray '\261' in program
jni/helloworld.c:59:1: error: stray '\4' in program
jni/helloworld.c:59:1: error: stray '\326' in program
jni/helloworld.c:59:1: error: stray '\255' in program
jni/helloworld.c:59:1: error: stray '\200' in program
jni/helloworld.c:59:1: error: stray '\310' in program
jni/helloworld.c:59:1: error: stray '\242' in program
jni/helloworld.c:59:1: error: stray '\373' in program
jni/helloworld.c:59:1: error: stray '\235' in program
jni/helloworld.c:59:1: error: stray '\377' in program
jni/helloworld.c:59:1: error: stray '\24' in program
jni/helloworld.c:59:1: error: stray '\366' in program
jni/helloworld.c:59:1: error: stray '\17' in program
jni/helloworld.c:59:1: error: stray '\324' in program
jni/helloworld.c:59:105: warning: null character(s) ignored [enabled by default]

jni/helloworld.c:59:1: error: stray '\355' in program
jni/helloworld.c:59:1: error: stray '\277' in program
jni/helloworld.c:59:1: error: stray '\267' in program
jni/helloworld.c:59:1: error: stray '\363' in program
jni/helloworld.c:59:1: error: stray '\274' in program
jni/helloworld.c:59:1: error: stray '\5' in program
jni/helloworld.c:59:1: error: stray '\177' in program
jni/helloworld.c:59:1: error: stray '\335' in program
jni/helloworld.c:59:1: error: stray '\377' in program
jni/helloworld.c:60:1: error: stray '\321' in program
jni/helloworld.c:60:1: error: stray '\345' in program
jni/helloworld.c:60:1: error: stray '\344' in program
jni/helloworld.c:60:87: warning: null character(s) ignored [enabled by default]
jni/helloworld.c:60:1: error: stray '\353' in program
jni/helloworld.c:60:1: error: stray '\202' in program
jni/helloworld.c:60:1: error: stray '\216' in program
jni/helloworld.c:60:1: error: stray '\255' in program
jni/helloworld.c:60:1: error: stray '\226' in program
jni/helloworld.c:60:1: error: stray '\371' in program
jni/helloworld.c:60:1: error: stray '\272' in program
jni/helloworld.c:60:1: error: stray '\211' in program
jni/helloworld.c:60:1: error: stray '`' in program
jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:1: error: stray '\21' in program
jni/helloworld.c:60:1: error: stray '\254' in program
jni/helloworld.c:60:1: error: stray '\226' in program
jni/helloworld.c:60:1: error: stray '\252' in program
jni/helloworld.c:60:1: error: stray '\321' in program
jni/helloworld.c:60:1: error: stray '\36' in program
jni/helloworld.c:60:1: error: stray '\243' in program
jni/helloworld.c:60:1: error: stray '\252' in program
jni/helloworld.c:60:1: error: stray '\246' in program
jni/helloworld.c:60:1: error: stray '\256' in program
jni/helloworld.c:60:1: error: stray '\233' in program
jni/helloworld.c:60:1: error: stray '\220' in program
jni/helloworld.c:60:1: error: stray '\377' in program
jni/helloworld.c:60:1: error: stray '\22' in program
jni/helloworld.c:60:1: error: stray '@' in program
jni/helloworld.c:60:1: error: stray '\314' in program
jni/helloworld.c:60:1: error: stray '\34' in program
jni/helloworld.c:60:1: error: stray '\361' in program
jni/helloworld.c:60:1: error: stray '\200' in program
jni/helloworld.c:60:1: error: stray '\306' in program
jni/helloworld.c:60:1: error: stray '\21' in program
jni/helloworld.c:60:1: error: stray '\4' in program
jni/helloworld.c:60:1: error: stray '\34' in program
jni/helloworld.c:60:1: error: stray '\361' in program
jni/helloworld.c:60:1: error: stray '\200' in program
jni/helloworld.c:60:1: error: stray '\206' in program
jni/helloworld.c:60:1: error: stray '\213' in program
jni/helloworld.c:60:1: error: stray '\361' in program
jni/helloworld.c:60:1: error: stray '\260' in program
jni/helloworld.c:60:1: error: stray '\310' in program
jni/helloworld.c:60:1: error: stray '\332' in program
jni/helloworld.c:60:1: error: stray '\340' in program
jni/helloworld.c:60:1: error: stray '\265' in program
jni/helloworld.c:60:1: error: stray '\336' in program
jni/helloworld.c:60:1: error: stray '\10' in program
jni/helloworld.c:60:1: error: stray '\20' in program
jni/helloworld.c:60:1: error: stray '\274' in program
jni/helloworld.c:60:1: error: stray '\371' in program
jni/helloworld.c:60:1: error: stray '\337' in program
jni/helloworld.c:60:1: error: stray '\203' in program
jni/helloworld.c:60:1: error: stray '\252' in program
jni/helloworld.c:60:1: error: stray '\342' in program
jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:165: warning: null character(s) ignored [enabled by default]

jni/helloworld.c:60:1: error: stray '\221' in program
jni/helloworld.c:60:1: error: stray '\265' in program
jni/helloworld.c:60:1: error: stray '\301' in program
jni/helloworld.c:60:1: error: stray '\251' in program
jni/helloworld.c:60:1: error: stray '\361' in program
jni/helloworld.c:60:1: error: stray '\243' in program
jni/helloworld.c:60:1: error: stray '\262' in program
jni/helloworld.c:60:1: error: stray '\356' in program
jni/helloworld.c:60:1: error: stray '\201' in program
jni/helloworld.c:60:1: error: stray '\225' in program
jni/helloworld.c:60:1: error: stray '\356' in program
jni/helloworld.c:60:1: error: stray '\20' in program
jni/helloworld.c:60:1: error: stray '\4' in program
jni/helloworld.c:60:1: error: stray '\205' in program
jni/helloworld.c:60:1: error: stray '\34' in program
jni/helloworld.c:60:1: error: stray '\240' in program
jni/helloworld.c:60:1: error: stray '\246' in program
jni/helloworld.c:60:1: error: stray '#' in program
jni/helloworld.c:60:1: error: stray '\344' in program
jni/helloworld.c:60:1: error: stray '\350' in program
jni/helloworld.c:60:1: error: stray '\264' in program
jni/helloworld.c:60:1: error: stray '\211' in program
jni/helloworld.c:60:1: error: stray '\202' in program
jni/helloworld.c:60:1: error: stray '\5' in program
jni/helloworld.c:60:1: error: stray '\257' in program
jni/helloworld.c:60:1: error: stray '\241' in program
jni/helloworld.c:60:1: error: stray '\306' in program
jni/helloworld.c:60:1: error: stray '\362' in program
jni/helloworld.c:60:1: error: stray '\207' in program
jni/helloworld.c:60:1: error: stray '`' in program
jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:1: error: stray '#' in program
jni/helloworld.c:60:1: error: stray '\336' in program
jni/helloworld.c:60:1: error: stray '\10' in program
jni/helloworld.c:60:1: error: stray '\320' in program
jni/helloworld.c:60:1: error: stray '\342' in program
jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:216: warning: null character(s) ignored [enabled by default]

jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:1: error: stray '#' in program
jni/helloworld.c:60:1: error: stray '\336' in program
jni/helloworld.c:60:1: error: stray '\10' in program
jni/helloworld.c:60:1: error: stray '\320' in program
jni/helloworld.c:60:1: error: stray '\342' in program
jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:225: warning: null character(s) ignored [enabled by default]

jni/helloworld.c:60:1: error: stray '\215' in program
jni/helloworld.c:60:1: error: stray '#' in program
jni/helloworld.c:60:1: error: stray '\336' in program
jni/helloworld.c:60:1: error: stray '\10' in program
jni/helloworld.c:60:1: error: stray '\320' in program
jni/helloworld.c:60:1: error: stray '\361' in program
jni/helloworld.c:60:1: error: stray '\356' in program
jni/helloworld.c:60:1: error: stray '\207' in program
jni/helloworld.c:60:1: error: stray '\214' in program
jni/helloworld.c:60:236: warning: missing terminating ' character [enabled by de
fault]
jni/helloworld.c:60:1: error: missing terminating ' character
jni/helloworld.c:61:1: error: stray '\233' in program
jni/helloworld.c:61:1: error: stray '\361' in program
jni/helloworld.c:61:1: error: stray '\267' in program
jni/helloworld.c:61:1: error: stray '\213' in program
jni/helloworld.c:61:1: error: stray '\202' in program
jni/helloworld.c:61:1: error: stray '\16' in program
jni/helloworld.c:61:1: error: stray '\274' in program
jni/helloworld.c:61:1: error: stray '\21' in program
jni/helloworld.c:61:1: error: stray '\24' in program
jni/helloworld.c:61:1: error: stray '\202' in program
jni/helloworld.c:61:1: error: stray '\352' in program
jni/helloworld.c:61:1: error: stray '\16' in program
jni/helloworld.c:61:1: error: stray '\301' in program
jni/helloworld.c:61:22: warning: missing terminating " character [enabled by def
ault]
jni/helloworld.c:61:1: error: missing terminating " character
jni/helloworld.c:62:1: error: stray '\344' in program
jni/helloworld.c:62:1: error: stray '\267' in program
jni/helloworld.c:62:1: error: stray '\213' in program
jni/helloworld.c:62:1: error: stray '\202' in program
jni/helloworld.c:62:1: error: stray '\16' in program
jni/helloworld.c:62:1: error: stray '\274' in program
jni/helloworld.c:62:1: error: stray '\21' in program
jni/helloworld.c:62:1: error: stray '\24' in program
jni/helloworld.c:62:1: error: stray '\202' in program
jni/helloworld.c:62:1: error: stray '\352' in program
jni/helloworld.c:62:1: error: stray '\305' in program
jni/helloworld.c:62:1: error: stray '\33' in program
jni/helloworld.c:62:1: error: stray '\301' in program
jni/helloworld.c:62:22: warning: missing terminating " character [enabled by def
ault]
jni/helloworld.c:62:1: error: missing terminating " character
jni/helloworld.c:63:1: error: stray '\366' in program
jni/helloworld.c:63:1: error: stray '\234' in program
jni/helloworld.c:63:1: error: stray '\255' in program
jni/helloworld.c:63:1: error: stray '\212' in program
jni/helloworld.c:63:1: error: stray '\236' in program
jni/helloworld.c:63:1: error: stray '\322' in program
jni/helloworld.c:63:1: error: stray '\222' in program
jni/helloworld.c:63:1: error: stray '\4' in program
jni/helloworld.c:63:1: error: stray '\330' in program
jni/helloworld.c:63:1: error: stray '\6' in program
jni/helloworld.c:63:1: error: stray '\345' in program
jni/helloworld.c:63:1: error: stray '\251' in program
jni/helloworld.c:63:1: error: stray '\6' in program
jni/helloworld.c:63:19: error: invalid suffix "p" on integer constant
jni/helloworld.c:63:1: error: stray '\326' in program
jni/helloworld.c:63:1: error: stray '\22' in program
jni/helloworld.c:63:1: error: stray '\260' in program
jni/helloworld.c:63:1: error: stray '\230' in program
jni/helloworld.c:63:1: error: stray '\340' in program
jni/helloworld.c:63:1: error: stray '\276' in program
jni/helloworld.c:63:1: error: stray '\345' in program
jni/helloworld.c:63:1: error: stray '\271' in program
jni/helloworld.c:63:1: error: stray '\351' in program
jni/helloworld.c:63:1: error: stray '\342' in program
jni/helloworld.c:63:1: error: stray '\375' in program
jni/helloworld.c:63:1: error: stray '\247' in program
jni/helloworld.c:63:1: error: stray '\6' in program
jni/helloworld.c:63:1: error: stray '\2' in program
jni/helloworld.c:63:1: error: stray '\313' in program
jni/helloworld.c:63:1: error: stray '\31' in program
jni/helloworld.c:63:1: error: stray '\22' in program
jni/helloworld.c:63:1: error: stray '\210' in program
jni/helloworld.c:63:1: error: stray '\351' in program
jni/helloworld.c:63:1: error: stray '\201' in program
jni/helloworld.c:63:1: error: stray '\235' in program
jni/helloworld.c:63:1: error: stray '\342' in program
jni/helloworld.c:63:1: error: stray '\177' in program
jni/helloworld.c:63:1: error: stray '\4' in program
jni/helloworld.c:63:1: error: stray '\270' in program
jni/helloworld.c:63:1: error: stray '\203' in program
jni/helloworld.c:63:1: error: stray '\335' in program
jni/helloworld.c:63:1: error: stray '\363' in program
jni/helloworld.c:63:1: error: stray '\226' in program
jni/helloworld.c:63:1: error: stray '\4' in program
jni/helloworld.c:63:1: error: stray '\243' in program
jni/helloworld.c:63:1: error: stray '\304' in program
jni/helloworld.c:63:1: error: stray '\25' in program
jni/helloworld.c:63:1: error: stray '\22' in program
jni/helloworld.c:63:1: error: stray '\216' in program
jni/helloworld.c:63:1: error: stray '\337' in program
jni/helloworld.c:63:1: error: stray '\303' in program
jni/helloworld.c:63:1: error: stray '\235' in program
jni/helloworld.c:63:1: error: stray '#' in program
jni/helloworld.c:63:1: error: stray '\302' in program
jni/helloworld.c:63:1: error: stray '\331' in program
jni/helloworld.c:63:1: error: stray '\321' in program
jni/helloworld.c:63:1: error: stray '\365' in program
jni/helloworld.c:63:1: error: stray '\317' in program
jni/helloworld.c:63:1: error: stray '\360' in program
jni/helloworld.c:63:1: error: stray '\311' in program
jni/helloworld.c:63:1: error: stray '\300' in program
jni/helloworld.c:63:1: error: stray '\306' in program
jni/helloworld.c:63:1: error: stray '\272' in program
jni/helloworld.c:63:1: error: stray '\207' in program
jni/helloworld.c:63:1: error: stray '\252' in program
jni/helloworld.c:63:1: error: stray '\355' in program
jni/helloworld.c:63:1: error: stray '\320' in program
jni/helloworld.c:63:1: error: stray '\236' in program
jni/helloworld.c:63:1: error: stray '\33' in program
jni/helloworld.c:63:1: error: stray '\207' in program
jni/helloworld.c:63:1: error: stray '\214' in program
jni/helloworld.c:63:1: error: stray '\237' in program
jni/helloworld.c:63:1: error: stray '\372' in program
jni/helloworld.c:63:1: error: stray '\366' in program
jni/helloworld.c:63:1: error: stray '\345' in program
jni/helloworld.c:63:1: error: stray '\311' in program
jni/helloworld.c:63:1: error: stray '\315' in program
jni/helloworld.c:63:1: error: stray '\10' in program
jni/helloworld.c:63:1: error: stray '\331' in program
jni/helloworld.c:63:1: error: stray '\276' in program
jni/helloworld.c:63:1: error: stray '\256' in program
jni/helloworld.c:63:1: error: stray '\242' in program
jni/helloworld.c:63:1: error: stray '\5' in program
jni/helloworld.c:63:1: error: stray '\10' in program
jni/helloworld.c:63:1: error: stray '\372' in program
jni/helloworld.c:63:1: error: stray '\320' in program
jni/helloworld.c:63:1: error: stray '\321' in program
jni/helloworld.c:63:1: error: stray '\326' in program
jni/helloworld.c:63:1: error: stray '\7' in program
jni/helloworld.c:63:1: error: stray '\333' in program
jni/helloworld.c:63:1: error: stray '\37' in program
jni/helloworld.c:63:1: error: stray '\363' in program
jni/helloworld.c:63:139: warning: null character(s) preserved in literal [enable
d by default]
jni/helloworld.c:63:139: warning: missing terminating " character [enabled by de
fault]
jni/helloworld.c:63:1: error: missing terminating " character
make: *** [obj/local/armeabi/objs/cppTestProj/helloworld.o] Error 1 
```

我能知道是什么问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:14:48.537

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:46:30.073

you are compiling a library with main : see thelast line on your android.mk:

```
include $(BUILD_SHARED_LIBRARY) 
```

to build a binary use:

```
include $(BUILD_EXECUTABLE) 
```

# javascript - 可排序列表，仅在不同列表之间排序项目

> ID：13065791
> 
> 赞同：2
> 
> 时间：2012-10-25T09:41:56.673
> 
> 标签：javascript, jquery, jquery-ui

在此示例中， [http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)可以在不同列表和同一列表之间拖放项目。

是否可以禁用同一列表中的拖放功能，只允许在不同列表之间进行拖放？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:15:44.323

这是我可以在这里做的最好的事情：

```
$("#sortable1, #sortable2").sortable({
    connectWith: ".connectedSortable",
    stop: function(event, ui) {
        if (ui.item[0].parentNode == this) {
            $(this).sortable('cancel');
        }
    }
}).disableSelection();​ 
```

演示[http://jsfiddle.net/dfsq/J6uM5/](http://jsfiddle.net/dfsq/J6uM5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:13:15.827

**工作演示** `:)` [http://jsfiddle.net/UnFdU/1/](http://jsfiddle.net/UnFdU/1/)

我在三个事件后面建立了一个小逻辑`recieve`，`start`和`stop`。每次如果列表是相同的列表，那么用户不能删除它，如果不同的列表可以，请自己尝试。*下面的小解释*

*   当用户开始拖动时`start`说：`canDropThat = false;`

*   `recieve`仅当它从连接列表中删除时才会触发，即如果触发接收 make `canDropThat = true;`；因此允许丢弃。

*   最后`stop`检查标志，如果它是正确的标志，它允许丢弃否则拒绝。

希望它适合原因`:))`

**代码**

```
$(function() {
    canDropThat = false;
    var sortlists = $("#List1, #List2").sortable({
        tolerance: 'pointer',
        connectWith: '#List1, #List2',
        helper: 'original',
        scroll: true,
        receive: function(event, ui) {
            //Run this code whenever an item is dragged and dropped into this list 
            canDropThat = true;

        },
        start: function(event, ui) {
            canDropThat = false;
        },
        stop: function(event, ui) {
            if (!canDropThat) {
                $(this).sortable('cancel');
            }
        }

    }).on('scroll', function() {
        sortlists.scrollTop($(this).scrollTop());
    });

});​ 
```

# javascript - 使用 ajax 请求的结果作为变量

> ID：13065793
> 
> 赞同：0
> 
> 时间：2012-10-25T09:42:04.920
> 
> 标签：javascript, jquery, ajax

我想知道如何将 ajax 请求的结果用作“对象”。我会尽力解释。我有一个 ajax 请求，它每 2 秒向 xml 文件获取一个数字。然后我将它渲染到我的html中。

这是我的js：

```
 var url = window.location.pathname.split('/');
   var id = url[3];

setInterval(function() {
   $.ajax({
       type: "GET",
       url: "http://myxml",
       success: parseXml
   });
 }, 2000);

function parseXml(xml){
   $(xml).find("user").each(function() {

           if($(this).attr("id") === id ) {
               $(".DubScore").html($(this).attr("count"))
           }
       });
} 
```

和我的html：

```
 <div class="DubScore"> </div> 
```

它有效，我的页面上显示了一个计数。

我想要做的是获取这个数字并能够在我的 html 中做任何我不想用它做的事情。例如，将其命名为“Score”，并且能够执行“Score”+ 2 之类的操作。

我希望我的问题足够清楚。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:43:39.387

您可以解析属性值并将其存储在全局变量中：

```
var score;

function parseXml(xml){
   $(xml).find("user").each(function() {
           if($(this).attr("id") === id ) {
               score = parseInt($(this).attr("count"), 10);
           }
       });
} 
```

之后，您可以这样做，例如，

```
score += 2;
$(".DubScore").html(score); 
```

# html-email - 在 Outlook.com 中居中对齐电子邮件

> ID：13065795
> 
> 赞同：17
> 
> 时间：2012-10-25T09:42:10.013
> 
> 标签：html-email, email-client, hotmail, outlook.com

我创建了一个非常简单的 html 电子邮件。 [http://staging.xhtml-lab.com/mailtest/](http://staging.xhtml-lab.com/mailtest/)

它在所有电子邮件客户端中都可以正常工作，除了 hotmail.com/outlook.com

在 hotmail 电子邮件中是左对齐的，它应该保持居中对齐。

我已按照 emailology.org 的建议添加了以下代码，但没有效果。

```
<style type=“text/css”&gt;
/**This is to overwrite Hotmail’s Embedded CSS************/
table {border-collapse:separate;}
a, a:link, a:visited {text-decoration: none; color: #00788a} 
a:hover {text-decoration: underline;}
h2,h2 a,h2 a:visited,h3,h3 a,h3 a:visited,h4,h5,h6,.t_cht {color:#000 !important}
p {margin-bottom: 0}
.ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td {line-height: 100%}
/**This is to center your email in Hotmail************/
.ExternalClass {width: 100%;}
</style> 
```

关于我还能做些什么来使电子邮件中心对齐的任何建议？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-08-12T11:25:29.777

这应该会给你一个居中的电子邮件：

```
<table style="width: 100%; background: red;">
  <tr>
    <td>
      <center>
        <table style="width: 640px; background: blue; margin: 0 auto; text-align: left;">
          <tr>
            <td>
              Your content here
            </td>
          </tr>
        </table>
      </center>
    </td>
  </tr>
</table> 
```

`center`-tag 是 Outlook 和 Outlook.com 所需要的。其他客户端使用该`margin`属性。在某些客户端中，文本在`center`-tag 之后居中，因此该`text-align`属性是必需的。

如果您希望宽度根据屏幕大小而变化，请使用以下代码：

```
<table style="width: 100%; background: red;">
  <tr>
    <td>
      <center>
        <!--[if mso]>
        <table style="width: 640px;"><tr><td>
        <![endif]-->
        <div style="max-width: 800px; margin: 0 auto;">
          <table style="background: blue; text-align: left;">
            <tr>
              <td>
                Your content here
              </td>
            </tr>
          </table>
        </div>
      </center>
      <!--[if mso]>
      </td></tr></table>
      <![endif]--> 
    </td>
  </tr>
</table> 
```

Outlook 不支持`max-width`，因此 Outlook 的大小固定为 640 像素。对于所有其他客户端，电子邮件的宽度将与查看窗口的宽度相同，但最大为 800 像素。

如果您发现这些解决方案不起作用的客户，请告诉我，以便我们找到与尽可能多的客户合作的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T16:22:00.467

这是我构建的一个，用作我所有电子邮件的起点。它适用于所有主要的电子邮件客户端 100%：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title></title></head>
<body style="margin: 0px; padding: 0px background-color: #FFFFFF;" bgcolor="#FFFFFF"><!-- << bg color for forwarding (leave white) // main bg color >> --><table bgcolor="#252525" width="100%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td>
<!-- CENTER FLOAT WIDTH -->
<table width="600" border="0" valign="top" align="center" cellpadding="0" cellspacing="0"><tr><td><!-- Master Width of the center panel -->
preheader...
<!-- CENTER PANEL BG COLOR (to hide separation of tables on email forward from Outlook (known issue) -->
<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF"><tr><td><!-- Master Color of the center panel -->

content...

<!-- /CENTER BG COLOR -->
</td></tr></table>

<!-- /CENTER FLOAT WIDTH -->
</td></tr></table>
<!-- /CENTER FLOAT -->
</td></tr></table></body></html> 
```

当有人转发电子邮件时，它有一个内置的白色背景（他们可以在白色上键入，而 html 设计部分的背景保持彩色）。此外，主面板设置为 bgcolor，因为 Outlook 在转发时会在表格之间放置间隙。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-24T21:00:23.363

您还可以通过添加`align="center"`到您的主表标签来居中您的电子邮件模板：

```
 <body>
      <table align="center">
        <tr>
          <td style="width:600px;">
            <!-- content -->
          </td>
        </tr>
      </table>
   </body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T10:13:25.527

适用于 GMail 和 Outlook

```
<body style="width:600px;margin: auto;">
   <!-- content -->
</body> 
```

# mysql - Notepad++ 正则表达式增加数字

> ID：13065797
> 
> 赞同：0
> 
> 时间：2012-10-25T09:42:12.737
> 
> 标签：mysql, regex, notepad++, phpbb3

我们有一个旧的 PhPBB3 安装，里面有很多帖子。我们已经进行了新安装，其中已经包含新帖子。我想要做的是将 MySQL 从旧安装导出到 XML，将 post_id 和 topic_id 重置为新安装的以下编号。我们会将所有内容归入 1 个新类别（导入，111）。

```
 <column name="post_id">3</column>
        <column name="topic_id">3</column> 
```

新列在 3000 中运行，比如说 3337。所以我需要的是每一行

```
<column name="post_id">3</column> 
```

需要得到

```
<column name="post_id">3338</column> 
```

topic_id 也是如此......如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:55:13.177

您可以使用 Ruby、Python 或 Perl 来完成。以下是它在 Ruby 中的实现方式：

```
$ ruby -pi.bak -e '$_.gsub!(/(<column name="post_id">)(\d+)(<\/column>)/) { "#{$1}#{$2.to_i + 3000}#{$3}" }' file.xml 
```

您的`file.xml`将被就地编辑，备份副本将保存到`file.xml.bak`.

# c# - 如何将图像从 http 服务器存储到本地文件夹？时间：2019-05-10 标签：c#(win8,app)

> ID：13065799
> 
> 赞同：1
> 
> 时间：2012-10-25T09:42:15.487
> 
> 标签：c#, http, directory, store

我想将图像存储到本地文件夹，我从 http 服务器接收到该文件夹​​。

请求 (http://myServer:myPort/?imageID=5) 提供一个“tif-image-file”。如果我将此请求输入 Internet-Explorer，它就可以工作！

我的 C# 代码：

```
(...)
Uri myUri = new Uri("http://myServer:myPort/?imageID=5");
StorageFile myFile = StorageFile.GetFileFromApplicationUriAsync(myUri);
(...) 
```

但“myFile”始终为空 :(

我做错了什么？

谢谢！

隐形

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:17:20.327

好的，这是我的解决方案：

1.  我在我的文件夹中创建了一个空文件

    ```
     string myFilename = "myfile.tif";
     StorageFile myFile = await myFolder.CreateFileAsync(myFilename, CreationCollisionOption.ReplaceExisting); 
    ```

2.  背景下载器

    ```
     try
     {
         var download = new BackgroundDownloader().CreateDownload(myUri, myFile);
         await download.StartAsync();
     }
     catch (Exception E)
     {
         ...
     } 
    ```

下一个问题是，它只有在我每次将 Release-Mode 从“X64”更改为“AnyCPU”时才有效，反之亦然。如果我不更改发布模式，我的应用程序什么也不做。没有例外，没有程序崩溃......

这是一个错误吗？

（对不起，我的英语不好...）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T09:49:01.970

该`GetFileFromApplicationUriAsync`方法旨在用于加载本地应用程序资源。所以它不适合你的情况。您需要使用以下方法创建一个新`Storage`文件：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfileasync.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfileasync.aspx)`CreateStreamedFileAsnyc`

编辑：在你的情况下，它会更容易使用：http `CreateStreamedFileFromUriAsync()`: [//msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfilefromuriasync.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfilefromuriasync.aspx)

# ios - 拆分视图控制器中主视图控制器背后的人工制品

> ID：13065805
> 
> 赞同：1
> 
> 时间：2012-10-25T09:42:37.883
> 
> 标签：ios, ipad, ios5.1

我在 iOS 5.1 上遇到了拆分视图控制器的问题。在纵向上，我在底部的主视图控制器后面看到了一些渐变伪影。我尝试使用它并注意到它仅在主视图控制器实际上是导航控制器时出现。这是来自默认主从应用程序的代码：

```
MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];
UINavigationController *masterNavigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];

DetailViewController *detailViewController = [[[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil] autorelease];
UINavigationController *detailNavigationController = [[[UINavigationController alloc] initWithRootViewController:detailViewController] autorelease];

self.splitViewController = [[UISplitViewController alloc] init];
self.splitViewController.delegate = detailViewController;    
[self.splitViewController setViewControllers:@[masterNavigationController, detailNavigationController]];

[self.window setRootViewController:self.splitViewController]; 
```

我在代码中唯一改变的是我设置了 masterViewController.tableView.alpha = 0.1f 来向你展示桌子后面这个奇怪的渐变伪影（当 alpha 设置为 1.0f 时，我在右边只看到了这个伪影的一小部分）

在 iOS 6 上一切正常，问题只发生在 iOS 5.1 上，但我的应用程序也应该支持旧版本的 iOS。这是 iOS SDK 的记录错误还是管理错误？

提前致谢

![截图](../Images/6a0c3fe96cea20942c8886bcd238b0e5.png)

# java - 列表视图到字符串数组

> ID：13065807
> 
> 赞同：1
> 
> 时间：2012-10-25T09:42:42.563
> 
> 标签：java, android, arrays, string, listview

我有一个带有惰性适配器的 xml 解析器，我将所有数据解析为列表视图。

现在我想从 listivew 中获取所有数据（每行有 1 个文本视图）并将其放入字符串数组中，但我不知道该怎么做。因为如果我谷歌我只能得到关于如何使用和字符串数组来填充列表的结果。

我的解析器：

```
TextView txt =(TextView)vi.findViewById(R.id.tv);
HashMap<String, String> song = new HashMap<String, String>();
song = data.get(position);     
txt.setText(song.get(MainActivity.KEY_TXT)); 
```

我使用（到目前为止）获取我的字符串数组的方法：

```
private String[] txt = {

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:48:51.337

您只需在 listView 适配器的 getView() 方法中使用字符串数组。像这样： -

给 strArray 的大小与 listView 的大小相同。

```
String strArray[] = new String[<size of Your ListView>]; 

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    TextView textView;
    if (convertView == null) {

        convertView = inflater.inflate(R.layout.listitem, parent, false);
        textView = (TextView) convertView
                .findViewById(R.id.textView);
    }
    strArray[position] = textView.getText().toString();
    return convertView;
} 
```

现在您想将此 strArray 用于其他类，那么您必须将其设为静态，或者您可以通过`intent`.like 将其传递给其他类：--

```
Bundle b=new Bundle();
b.putStringArray(key, new String[]{value1, value2});
Intent i=new Intent(context, Class);
i.putExtras(b); 
```

然后在其他中，`activity class`您应该通过输入以下代码来获取此字符串数组：-

```
Bundle b=this.getIntent().getExtras();
String[] array=b.getStringArray(key); 
```

如果你想要传递字符串数组（即 strArray）的类不是`Activity`那么你应该让你的 strArray 像这样静态：

```
public static strArray[]; 
```

现在我认为你的问题将得到解决..

# android - 检查手机屏幕锁，特别是密码/密码

> ID：13065811
> 
> 赞同：1
> 
> 时间：2012-10-25T09:42:59.823
> 
> 标签：android

我需要检查这个应用程序是否启用了安全性（屏幕锁）。我已经找到了如何像这样检查 pattern_locks

```
boolean b = android.provider.Settings.Secure.getInt(
                getContentResolver(),Settings.Secure.LOCK_PATTERN_ENABLED, 0)==1; 
```

但是另外两个避开了我。我发现了一些关于使用需要广播接收器和大量权限/策略的 DevicePolicyManager 的密码......
这真的是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:39:52.760

经过深入研究，我发现除了DevicePolicyManager之外没有其他方法。
另外我听说这个模式检查可能很快就会被删除，所以请注意。

# windows-8 - “用于 Javascript 的 Windows 库的 Visual Studio 扩展”不会更新

> ID：13065812
> 
> 赞同：6
> 
> 时间：2012-10-25T09:43:01.533
> 
> 标签：windows-8, visual-studio-2012, updates, visual-studio-extensions

在此屏幕截图中点击更新按钮没有任何作用。什么都没有下载，安装等。没有消息，什么都没有！单击“发行说明”和“更多信息”也无济于事。

搜索此更新也没有任何用处。我该怎么办？

![](../Images/978ad1c5a1638c4076424bf2fe21ce69.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T15:12:48.753

谷歌浏览器是您的默认浏览器吗？在这种情况下，我看到了相同的行为，但在 IE 或 Firefox 中却没有。Wade 之前建议的[正是](http://www.microsoft.com/en-us/download/details.aspx?id=30687)按下该按钮将为您下载的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T14:15:11.757

我在 Visual Studio 2012 中遇到了同样的问题。虽然我不知道如何解决这个特定问题，但我能够从这里找到并应用更新：http: [//www.microsoft.com/en-us/download /details.aspx?id=30687](http://www.microsoft.com/en-us/download/details.aspx?id=30687)。一旦安装 VS 不再列出更新。

# android - 如何从普通链接调用原生 android 地图应用程序？

> ID：13065814
> 
> 赞同：2
> 
> 时间：2012-10-25T09:43:07.760
> 
> 标签：android, html, maps

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:53:57.043

在 Android 中，您可以使用`geo:`url 来实现此目的。
查看参数的[Android 文档](https://developer.android.com/guide/appendix/g-app-intents.html)。

基本上它去了

```
<a href="geo:lat,lon">My place</a> 
```

这可能会触发用户设备上的应用程序选择器，因为用户可能已经安装了多个“地图”类型的应用程序。

# android - 使用安装的 FB 应用程序发布到 FB 时处理无网络情况

> ID：13065817
> 
> 赞同：0
> 
> 时间：2012-10-25T09:43:15.140
> 
> 标签：android, facebook, connection

在我的应用程序中，我连接到 Facebook 并可以向其发布图像。我正在使用 FB Android API 3.0。

现在，我在安装并授权了 FB 应用程序的手机上运行我的应用程序时发现了一个错误，并且没有互联网连接。

当我第一次点击登录 FB 时，由于 FB 应用程序存在且已获得授权，我的应用程序发现它会通过该应用程序与 FB 通信，这是一种“登录”。

这使我能够在 facebook 上分享，当我点击“分享”时，我的应用程序将分享发送到 FB 应用程序，但由于没有互联网连接应用程序崩溃。

那么，这样做的正确方法是什么。

我计划实施共享前检查

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE); 
```

但我不确定这是否足够，因为如果网络在那里但非常糟糕，我可以获得有连接的正确信息，并且当共享开始时它可能会再次使应用程序崩溃。

有没有办法以某种方式从 FB App 获得没有互联网连接的响应并以某种方式处理消息？

# c# - FileSystemWatcher OnChanged 不会为实时更新的文件引发

> ID：13065822
> 
> 赞同：0
> 
> 时间：2012-10-25T09:43:43.113
> 
> 标签：c#, .net, visual-studio-2010, onchange, filesystemwatcher

我`FileSystemWatcher`对设置目录中的其他文件工作正常，但对于另一个程序大约每秒更新一次的文件，只有在我单击GUI 上的`OnChanged`a 时才会引发该事件。`button`我没有在`buttton`和之间建立联系`FileSystemWatcher`。

我试图通过实现一个计时器来调用 OnChanged 事件来解决这个问题。

```
private void timer1_Tick(object sender, EventArgs e)
{
   foreach(Page p in pages)
    {
     p.HandleFileChanged(sender, (FileSystemEventArgs)e);
    }
} 
```

但我不能投到`EventArgs`（`FileSystemEventArgs`值得一试！）

我的`Page`班级实现了一个`FileSystemWatcher`来观看特定文件。

我想调用 HandleFileChaned 方法，它的头是这样的：

```
public void HandleFileChanged(object source, FileSystemEventArgs e) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:12:26.973

请问您为什么不添加另一层，例如：

```
public void HandleFileChanged(object source, FileSystemEventArgs e)
{
    HandleFileChange(<path and file>);
}

public void timer1_Tick(object source, EventArgs e)
{
    HandleFileChange(<path and file>);
}

private void HandleFileChange(string pathAndFile)
{
    // Do what you have to do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:08:15.527

为什么不创建自己的 FileSystemEventArgs？

```
var args = new FileSystemEventArgs(WatcherChangeTypes.All, "MyDir", "MyFile");
p.HandleFileChanged(sender, args); 
```

# code-coverage - 如何在 Bullseye 中查看线路覆盖率

> ID：13065824
> 
> 赞同：2
> 
> 时间：2012-10-25T09:43:51.893
> 
> 标签：code-coverage, bullseye

最近我开始使用 BullseyeCoverage。我正在执行以下步骤：使用 BullseyeCoverage 进行编译，在创建的二进制文件上运行一些测试用例，生成覆盖率报告。

在覆盖率报告中有：函数覆盖率和条件/决策覆盖率。但是，没有线路覆盖。我试图找到一种生成线路覆盖率统计数据的方法，但没有成功。我想为此使用 covbr，但是，我需要一些可以完全涵盖我所有来源的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:13:03.883

Bullseye 不支持行覆盖（也称为语句覆盖）。原因见[http://www.bullseye.com/statementCoverage.html](http://www.bullseye.com/statementCoverage.html)

# c# - c#我的循环有什么问题

> ID：13065830
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:44:02.383
> 
> 标签：c#, loops, casting

我有一个 ChaseSelection 类，我用它来投射我的下拉列表对象，

现在我正在尝试将数据库中的值作为下拉列表中的默认值，但它似乎不起作用，有人可以帮忙吗？我什至不认为我的循环运行。这是我的追逐选择课，也放在下面的循环中：谢谢

```
 public class ChaseSelectionItems
    {
        public string code { get; set; }
        public string text { get; set; }

        public ChaseSelectionItems(string code, string text)
        {
            this.code = code;
            this.text = text;
        }

        public override string ToString()
        {
            return this.text;
        }
    }

        foreach (ChaseSelectionItems items in drpdwnChaseSecSelection.Items)
        {
            if (items.code == _Row.xcs_View)
            {
                drpdwnChaseSecSelection.SelectedValue = items.text;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:46:15.450

目前尚不完全清楚您是如何配置列表框的，但很可能您没有正确配置 ValueMember。以下可能会解决此问题：

```
 foreach (ChaseSelectionItems items in drpdwnChaseSecSelection.Items)
    {
        if (items.code == _Row.xcs_View)
        {
            // drpdwnChaseSecSelection.SelectedValue = items.text;
            drpdwnChaseSecSelection.SelectedItem = items;
        }
    } 
```

# .htaccess - 重写htaccess文件中的规则冲突？

> ID：13065831
> 
> 赞同：2
> 
> 时间：2012-10-25T09:44:03.250
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我在我的 htaccess 文件中有写规则，但是两个规则相互冲突。我的 htaccess 文件是：

```
# BEGIN REMOVE SLUG CUSTOM POST TYPE RULES
RewriteRule ^service-status/(.+)/$ /$1 [R=301,L]
RewriteRule ^country/(.+)/$ /$1 [R=301,L]
RewriteRule ^company/(.+)/$ /$1 [R=301,L]
# END REMOVE SLUG CUSTOM POST TYPE RULES

RewriteRule ^([a-zA-Z0-9_-]+)/numero/$ ?country=$1
RewriteRule ^introduction/([a-zA-Z0-9_-]+) ?company=$1
RewriteRule ^pays/(.+)?$ /pays?company=$1
RewriteRule ^([^/]*)/([^/]*)/$ /index.php?country=$1&company=$2

# BEGIN WordPress
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /ade/
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /ade/index.php [L]
</IfModule>

# END WordPress
all rule working fine but 
RewriteRule ^([^/]*)/([^/]*)/$ /index.php?country=$1&company=$2
RewriteRule ^([a-zA-Z0-9_-]+)/numero/$ ?country=$1
conflict each other both are working fine Individually 
```

我想要像 1 这样的网址。[http://abc.com/country-name/companyname/](http://abc.com/country-name/companyname/)

```
(RewriteRule ^([^/]*)/([^/]*)/$ /index.php?country=$1&company=$2) 
```

2.http://abc.com/country-name/numero/（numero是固定关键词）

```
RewriteRule ^([a-zA-Z0-9_-]+)/numero/$ ?country=$1 
```

我会感谢你的帮助。谢谢巴鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:39:29.787

尝试这个 ：

```
# BEGIN REMOVE SLUG CUSTOM POST TYPE RULES
RewriteRule ^service-status/(.+)/$ /$1 [R=301,L]
RewriteRule ^country/(.+)/$ /$1 [R=301,L]
RewriteRule ^company/(.+)/$ /$1 [R=301,L]
# END REMOVE SLUG CUSTOM POST TYPE RULES

RewriteRule ^([a-zA-Z0-9_-]+)/numero/$ ?country=$1
RewriteRule ^introduction/([a-zA-Z0-9_-]+) ?company=$1
RewriteRule ^pays/(.+)?$ /pays?company=$1
RewriteRule ^([^/]*)/([^/]*)/$ /index.php?country=$1&company=$2

# BEGIN WordPress
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /ade/
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /ade/index.php [L]
</IfModule>

# END WordPress
RewriteRule ^([a-zA-Z0-9_-]+)/numero/$ ?country=$1 [L]
RewriteRule ^([^/]*)/([^/]*)/$ /index.php?country=$1&company=$2 [L] 
```

# excel - 更改工作表上所有图表中的系列名称

> ID：13065837
> 
> 赞同：1
> 
> 时间：2012-10-25T09:44:14.427
> 
> 标签：excel, vba

我正在尝试遍历单个工作表上的每个图表并重命名第 3 个系列：

```
With Sheets("Actual Traded Points")
    For Each Chart In .ChartObjects
        Chart.SeriesCollection(3).name = "Actual Traded Points"
    Next Chart
End With 
```

但是 Chart 对象似乎没有 seriesCollection 对象，我无法弄清楚如何获得它。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:00:55.327

您实际上是在循环通过 ChartObjects，而不是 Charts。尝试：

```
For Each co In .ChartObjects
    co.Chart.SeriesCollection(3).name = "Actual Traded Points"
Next co 
```

# android - intent.setType(type) 可能的意图类型是什么？

> ID：13065838
> 
> 赞同：64
> 
> 时间：2012-10-25T09:44:19.040
> 
> 标签：android, android-intent

我正在搜索如何从我的应用程序发送电子邮件，我遇到了这个主题：

[如何从我的 Android 应用程序发送电子邮件](https://stackoverflow.com/questions/2197741/how-to-send-email-from-my-android-application)

它解决了向他的操作发送添加类型的问题：

```
i.setType("message/rfc822"); 
```

这也适用于我，我可以发送我的电子邮件，这很棒。我只是想知道我还能在那里设置什么。

我知道，如果我不设置任何内容，它将显示包含所有可用选项的列表。我想强迫用户使用我选择的任何选项来分享它。我可以探索这个以迫使用户以我想要的任何方式分享吗？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2014-06-10T06:53:22.230

这可能为时已晚，但作为初学者，这是我对您上述问题的尝试:) 希望这对您有所帮助，`myIntent.setType(String mimeType)`输入参数表示您希望从触发意图（此处*为 myIntent*实例）中获得的 MIME 类型数据。
通过使用以下 MIME 类型之一，您可以强制用户选择您想要的选项。
请注意，android 中的所有 MIME 类型都是小写的。

以下是您可以设置的常见 MIME 类型列表`setType()`：

```
image/jpeg
audio/mpeg4-generic
text/html
audio/mpeg
audio/aac
audio/wav
audio/ogg
audio/midi
audio/x-ms-wma
video/mp4
video/x-msvideo
video/x-ms-wmv
image/png
image/jpeg
image/gif
.xml ->text/xml
.txt -> text/plain
.cfg -> text/plain
.csv -> text/plain
.conf -> text/plain
.rc -> text/plain
.htm -> text/html
.html -> text/html
.pdf -> application/pdf
.apk -> application/vnd.android.package-archive 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T09:57:45.590

我认为您在广播共享意图时不应该强迫任何类型的行为。

```
i.setType("message/rfc822"); 
```

这将设置您的意图的 MIME 类型。我想，充其量，您必须知道您打算使用哪种 MIME 类型来共享您的内容（例如 Facebook）答案，并确保该应用程序是唯一可以回答您的意图的应用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-19T23:42:03.383

根据 Android API 文档，setType 的参数是表示 MIME 类型的字符串。请看一下[http://developer.android.com/reference/android/content/Intent.html#setType(java.lang.String)](http://developer.android.com/reference/android/content/Intent.html#setType(java.lang.String))

然后涉及到可以使用任何 MIME 类型来设置共享意图内容类型。您可以在 iana.org 站点找到完整列表，其中列出了 MIME 类型的完整列表：[http ://www.iana.org/assignments/media-types/media-types.xhtml](http://www.iana.org/assignments/media-types/media-types.xhtml)

我希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T09:51:35.510

您可能需要检查此链接： http: [//developer.android.com/reference/android/content/Intent.html#setType(java.lang.String)](http://developer.android.com/reference/android/content/Intent.html#setType(java.lang.String))

基本上它的作用是，它允许您设置用于发送意图的数据类型。

您可能还想查看一个现有问题：[Android - Intent.setType() arguments](https://stackoverflow.com/questions/10614891/android-intent-settype-arguments)

# java - 如何从jtable插入数据库？

> ID：13065839
> 
> 赞同：1
> 
> 时间：2012-10-25T09:44:23.630
> 
> 标签：java, swing, jdbc, jtable, row

我有 2 列的 jtable，然后我想将它的值插入数据库；

我知道它可以用类似的东西来完成。

```
 int count=table.getRowCount();
for(int i=0;i<count;i++){
Object obj1 = table.getValueAt(i, 0);
Object obj2 = table.getValueAt(i, 1); 
```

问题是.. getRowCount 不知道该行是否为空，然后在数据库中，该空值仍将插入（并且它将在数据库中生成我的自动增量值）

我的问题是如何从 jtable 插入数据库，但不会插入空行？

非常感谢任何帮助，，

如果我要求太多，请给我一个处理空行的线索，

原谅我的英语

这是将数据添加到数据库的损坏方法

```
public void addToDatabase(){
            for (int i=0;i<table.getRowCount();i++){

                //#####################################
                //maybe need something in here
                if(table.getValueAt(i, 0)==null||table.getValueAt(i, 1) ==null){
                    return;
                //and maybe need something not return, but to get the next row (Just.. maybe ...)    
                //#####################################

                }else{
                    try{
                        Connection c = getCon("databasez");
                        PreparedStatement p = c.prepareStatement("INSERT INTO table_data VALUES (?,?)");
                        p.setString(1, table.getValueAt(i, 0).toString());
                        p.setFloat (Float.parseFloat(table.getValueAt(i, 1).toString()));
                        p.executeUpdate();
                        p.close();
                    }catch(Exception e){
                        JOptionPane.showMessageDialog(this, "THERE WAS AN INVALID DATA");
                    }
                    }
                }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:50:52.337

假设您正在使用`DefaultTableModel`，则返回的结果`getValueAt()`将是`null`直到您编辑相应的单元格。

您还可以注册一个`TableModelListener`来接收一个[`TableModelEvent`](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/TableModelEvent.html)可以告诉您的听众发生了什么变化的内容。

```
private JTable table = new JTable(1, 2);
...
table.getModel().addTableModelListener(new TableModelListener() {

    @Override
    public void tableChanged(TableModelEvent e) {
        System.out.println(""
            + e.getType() + " "
            + e.getFirstRow() + " "
            + e.getLastRow() + " " 
            + e.getColumn());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:57:05.013

也许它会帮助你。 [http://www.exampledepot.com/egs/javax.swing.table/InsertRow.html](http://www.exampledepot.com/egs/javax.swing.table/InsertRow.html)

首先，我只是在这里看到了 getData 方法，没有看到您调用的 insert 或类似的方法，所以我认为代码与您所说的无关。

其次，你也可以学习搜索关于jtable的api。如果你完全了解一个类的方法以及如何在一般情况下使用它，我认为你理解和使用它非常好。这也可以提高您对类似事物的理解。你会变得越来越强大，可以不问问题地学习其他困难的东西。

那是我学习程序的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T16:43:18.683

```
JAVA swing,SIMPLE WAY TO store jTable DATA in database

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) // swing Button
{
 String name[] =new String[4]; // name is array and index 4 means no. of row 
 String age[]=new String[4]; //age is array and index 4 means no. of row  
//loop from 0 row to 4
for(int i=0;i<4;i++) 
 {
 name[i]=table.getValueAt(i,0).toString(); // it get value from 0 row and 0 column
 age[i]=table.getValueAt(i,1).toString();  // it get value from 0 row and 1 column

//similarly for more column  

try
{
Class.forName("com.mysql.jdbc.Driver");
Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/crm","root","");
Statement s1=con.createStatement();
int mc=s1.executeUpdate("insert into testtable(Name,Age) values('"+name[i]+"','"+age[i]+"')");

}

        catch(Exception ex)
        {
            javax.swing.JOptionPane.showMessageDialog(null,ex.getMessage().toString());

        }
} 
```

# android - 添加#31#时无法拨打电话

> ID：13065842
> 
> 赞同：0
> 
> 时间：2012-10-25T09:44:26.970
> 
> 标签：android, phone-call

我正在尝试从我的应用程序中实现调用功能。当某些条件为真时，我通过在我的号码前添加#31# 来隐藏我的来电显示。虽然如果不添加#31#，通话完全没问题，但是当添加#31#时，会弹出空白屏幕，好像正在加载电话应用程序，我的应用程序屏幕又回来了。我的代码片段是这样的

```
 String ph = "123456789";            
        String phNumber;
        if (hideCallerId) {
            phNumber = "#31#" + ph;
        }
        else {
            phNumber = ph; 
        }

        Intent intent = new Intent(Intent.ACTION_CALL);
        intent.setData(Uri.parse("tel:"+phNumber));
        startActivity(intent); 
```

**案例1：**当phNumber为123456789时，调用没有问题。

**案例 2：**当 phNumber 为 #31#123456789 时，会弹出空白屏幕，用户返回我的应用程序屏幕。

虽然当我使用#31#123456789 从我的设备拨号时，成功拨打了电话。我错过了什么。谁能帮帮我。

链接没有帮助我[Link1](https://stackoverflow.com/questions/3510856/how-to-programatically-hide-caller-id-on-android)。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:52:14.627

这不是一个真正的答案，但我的代表还不够高，无法发表评论。你有没有机会将 phnumber 声明为 int 或任何东西？也许#'s搞砸了？

如果这不起作用，您是否尝试过使用`ACTION_DIAL`？[android 开发者网站在此处](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL)提供了有关它们之间差异的更多信息。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:09:54.730

您只需对电话号码进行编码。

```
String phonenumber = "03012345,1234,#31#,98765"; // , = pauses
encodedPhonenumber = URLEncoder.encode(phonenumber, "UTF-8");
startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + encodedPhonenumber))); 
```

你可能想看看这个。[添加#31#时无法拨打电话](https://stackoverflow.com/questions/13065842/not-able-to-make-a-call-when-31-is-added)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-12T23:45:38.803

您需要对 进行编码，`'#'`因为它的***行为类似于拨号命令***，然后如果您将操作调用意图数据设置为以 开头的数字`'#'`，它将改为调用空白号码，尝试拨打***8488449#848 之***类的号码，如果未编码将拨打***`8488449`***这就是为什么您需要至少对`'#'`符号进行编码，`Uri.encode("#")` 例如拨打 8488449#848，我将执行以下操作： `startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:8488449"+Uri.encode("#")+"848"));`

# extjs - 直接更新存储时记录未设置为脏 extjs

> ID：13065843
> 
> 赞同：0
> 
> 时间：2012-10-25T09:44:27.933
> 
> 标签：extjs, ext.net

我有一个 Ext.net mvc 网格，并且一个商店已绑定到网格。网格在初始加载时折叠，在一次场景中，我们将更新控制器中的模型并将模型再次绑定回存储，如下所示

**StorePlanDetails.DataSource = 模型.CorePlanningRows; StorePlanDetails.DataBind();**

在保存时，如果我尝试使用 Store.getModifiedRecords() 方法获取修改后的记录，它不会获取更新的记录。

但是一旦我扩展网格并且如果我尝试获取 Store.getModifiedRecords() 它正在获取更新的记录。

调试后我发现如果我不扩展网格，则没有设置**脏标志。**

有没有办法克服这个问题。

我正在使用 Extjs 4.0 和 Ext.Net MVC。

# objective-c - 使用 Scripting Bridge/Obj-C 在 iTunes 上播放专辑/艺术家的歌曲

> ID：13065844
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:44:29.177
> 
> 标签：objective-c, itunes, scripting-bridge

给定专辑或艺术家的名称，我想告诉 iTunes 播放该艺术家或该专辑中的所有歌曲。我怎样才能做到这一点？我知道如何通过过滤包含所有曲目的数组来播放所有歌曲，但是我如何告诉 iTunes 只播放我想要的那些？

## 编辑

我知道我可以使用此代码来获取我想要播放的所有曲目，但我不知道如何告诉 iTunes 连续播放它们。有任何想法吗？

```
// Get the app
iTunesApplication* iTunes = [SBApplication applicationWithBundleIdentifier: @"com.apple.iTunes"];

// Get the library
iTunesSource* library;
for (iTunesSource* thisSource in [iTunes sources]) {
    if ([thisSource kind] == iTunesESrcLibrary) {
        library = thisSource;
        break;
    }
}

SBElementArray* tracks;
for (iTunesPlaylist* playlist in [library playlists]) {
    if ([playlist specialKind] == iTunesESpKMusic) {
        tracks = [playlist searchFor: name only: type == 0 ? iTunesESrAAlbums : iTunesESrAArtists];
     }
 }

 // There. Now what? how do I play all the tracks in 'tracks'? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:58:19.737

您可以播放一首歌曲。

```
iTunesTrack *track = [tracks objectAtIndex:0];
[track playOnce:YES]; 
```

如果您想播放多首歌曲，您应该创建或使用播放列表：

```
 for (iTunesUserPlaylist *thisList in playlists) {
        if ([[thisList name] isEqualToString:playlistName]) {
            playlist = thisList;
            break;
        }
    }        

[track duplicateTo:playlist];
[playlist playOnce:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:41:51.200

因此，iTunes 似乎没有 AppleScript/Scripting Bridge 命令来播放某个艺术家/某个专辑上的歌曲。根据[这个](https://stackoverflow.com/questions/12538855/itunes-song-queue?rq=1)问题，如果不创建新的播放列表（我不想这样做），就不可能告诉 iTunes 播放自定义曲目列表。总之，这个问题真的没有办法解决……

# objective-c - NSTimer 时间增量

> ID：13065847
> 
> 赞同：0
> 
> 时间：2012-10-25T09:44:37.027
> 
> 标签：objective-c, ios, nstimer

我是 obj-C for iOS 平台的初学者，正在尝试构建一些简单的项目来构建我的基础。

我有一个按钮可以增加标签的 NSTimer 时间，但是当我使用 NSLog 记录时间时，它使用时间增量之前的值。我需要能够记录更新的时间（增量后），因为我需要该值，并且在解决这部分问题后正在 IBAction 中实现更多功能。

例如，在我按下 15 分钟时，NSLog 会将其读取为“00:15:00.0”而不是“00:35:00.0”。

```
- (IBAction)onSkipPressed:(id)sender {
    startDate = [startDate dateByAddingTimeInterval:-1200];
    NSLog(@"%@",self.timeLabel.text);
} 
```

有谁知道这个问题的原因？如果我在 15 分钟调用此 IBAction，我应该如何解决它，以便 NSLog 将其读取为“00:35:00.0”。

编辑 - 开始按钮将启动计时器，timeLabel 将获取字符串。很抱歉错过了这么重要的细节。我认为项目中没有与此功能相关的任何其他代码。谢谢你向我指出。

```
- (void)updateTimer
{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.S"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    timeLabel.text = timeString;   
} 
```

我的 IBAction 触发计时器

```
- (IBAction)onStartPressed:(id)sender {
    startDate = [NSDate date];

    gameTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                 target:self
                                               selector:@selector(updateTimer)
                                               userInfo:nil
                                                repeats:YES];

    //hide start button and show timeLabel
    startButton.hidden=true;
    timeLabel.hidden=false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:33:29.260

我回去对涉及 NSTimer 的教程进行了一些修改。原来我所缺少的只是 1 行 [self updateTimer]

```
- (IBAction)onSkipPressed:(id)sender {
    startDate = [startDate dateByAddingTimeInterval:-1200];
    [self updateTimer];
    NSLog(@"%@",self.timeLabel.text);
} 
```

这解决了我的问题，并且更新了 timeLabel.text 以便我记录信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:17:04.960

嗯，你为什么传递负1200？

```
// this subtracts 1200 seconds from your date, no?
startDate = [startDate dateByAddingTimeInterval:-1200]; 
```

你不应该这样做：

```
// add 30 minutes (60 seconds a minute x 30 minutes) to your time interval
startDate = [startDate dateByAddingTimeInterval:(60 * 30)];
...
NSLog(@"%@",self.timeLabel.text); 
```

还是我误解了什么？

# android - 在 Android 地图中搜索离我当前位置最近的地方

> ID：13065850
> 
> 赞同：2
> 
> 时间：2012-10-25T09:44:39.837
> 
> 标签：android, map

在我的 android 应用程序中，我想在地图中搜索距离我当前位置最近的 5 个位置。此参数用于设置边界 **lowerLeftLatitude、lowerLeftLongitude、upperRightLatitude、upperRightLongitude。** 但我不知道设置它们的值。

此代码提供 5 个 plces：

```
 try {
                List<Address> addressList =geocoder.getFromLocationName(staddress, 5);//, lowerLeftLatitude, lowerLeftLongitude, upperRightLatitude, upperRightLongitude;
                    if(adr.getCountryName()!=null)
                    str+=adr.getCountryName().toString();
                }
                Log.v(addressList.toString(),"result");
                editText.setText(addressList.toString());

            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } 
```

如何为离我所在位置最近的地方设置这些值，**或者**有什么其他方法可以获取最近的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:50:41.583

您可以使用 Google api 根据纬度和经度获取最近的位置。 [例子](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

此 google api 将根据您传递的查询/参数返回 neasrt 位置。

[在这里学习](https://developers.google.com/places/documentation/search)。这项研究将对您有用

# c# - 以编程方式添加行和列

> ID：13065853
> 
> 赞同：0
> 
> 时间：2012-10-25T09:44:55.953
> 
> 标签：c#, datagridview

```
dataGridView2.Columns[0].HeaderText = "Drive";
dataGridView2.Columns[0].DataPropertyName = root.ToString();
this.dataGridView2.Rows.Add(dataGridView2.Columns[0].DataPropertyName);

dataGridView2.Columns[1].HeaderText = "Volume Name";
dataGridView2.Columns[1].DataPropertyName = volumename.ToString();
this.dataGridView2.Rows.Add(dataGridView2.Columns[1].DataPropertyName);

dataGridView2.Columns[2].HeaderText = "Size";
dataGridView2.Columns[2].DataPropertyName = size.ToString();
dataGridView2.Rows.Add(dataGridView2.Columns[2].DataPropertyName); 
```

我无法在列 [1] 和 [2] 中添加行，因为它正在添加列 [0] 索引。

# java - 哪些对象将被传递给 Mockito 中的自定义 ArgumentMatcher

> ID：13065855
> 
> 赞同：1
> 
> 时间：2012-10-25T09:44:56.700
> 
> 标签：java, mockito

我正在模拟中创建一个自定义参数匹配器。使用[这个](http://docs.mockito.googlecode.com/hg/latest/org/mockito/ArgumentMatcher.html)例子：

```
class IsListOfTwoElements extends ArgumentMatcher<List> {
    public boolean matches(Object list) {
        return ((List) list).size() == 2;
    }
} 
```

这让我想知道为什么参数的类型`list`是`Object`而不是`List`. 传递给 match 函数的参数可以是别的吗？如果是这样，示例是否不应该检查参数的类型并`false`在不是时返回`List`？

稍微改述一下这个问题：mockito 是否承诺只将正确的类型传递给`matches`函数？如果是这样，为什么不使用泛型类型。如果不是，如果传递了错误的类型，为什么示例不返回 false？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:55:06.967

*   如果您 extend [`ArgumentMatcher`](http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/ArgumentMatcher.html)，您将收到一个对象，并且您有责任强制转换它。Mockito 将根据类名对其进行描述。
*   如果您 extend [`BaseMatcher`](http://code.google.com/p/hamcrest/source/browse/trunk/hamcrest-java/hamcrest-core/src/main/java/org/hamcrest/BaseMatcher.java)，您将收到一个对象，并且您有责任强制转换它。描述只会说明匹配器通过了什么，而不是它所期望的。
*   如果您使用[`TypeSafeMatcher`](http://code.google.com/p/hamcrest/source/browse/trunk/hamcrest-java/hamcrest-core/src/main/java/org/hamcrest/TypeSafeMatcher.java)，您将收到您选择的类型的对象，并且您有责任描述它。它将为您检查非空性和类类型，并在类不匹配时提供合理的错误消息。

不要担心在你的匹配器中做出糟糕的演员表。Mockito 在[验证](http://code.google.com/p/mockito/source/browse/src/org/mockito/internal/verification/argumentmatching/ArgumentMatchingTool.java#43)和[调用匹配](https://code.google.com/p/mockito/source/browse/src/org/mockito/internal/invocation/InvocationMatcher.java#67)中将对其验证的调用包装在一个非常慷慨的 try/catch 块中，因此 ClassCastException 无论如何都会返回 false（或匹配失败）。

* * *

那么，为什么接口[`Matcher`](http://code.google.com/p/hamcrest/source/browse/trunk/hamcrest-java/hamcrest-core/src/main/java/org/hamcrest/Matcher.java)接受的比它的类型参数所允许的更多呢？

> 这个方法匹配 Object，而不是泛型类型 T。这是因为 Matcher 的调用者在运行时不知道类型是什么（因为 Java 泛型的类型擦除）。检查正确的类型取决于实现。

因此，换句话说，即使 Matcher 被参数化，它也不会在运行时提供非常强大的类型安全检查。但是，在 Mockito 中，它非常有用——`argThat(Matcher<T>)`返回一个 type 的值`T`而不是`Object`，因此您不必`argThat(...)`在测试中强制每次使用 of。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:12:43.390

因为 mockito 匹配器使用 Hamcrest 匹配器，所以在您提供的 javadoc 链接中，您会看到它继承了 in interface 的签名，`matches`这`org.hamcrest.Matcher`在实际接口中似乎不是通用的。

如果编译器正确地完成了他的工作，你可以假设你会得到正确的类型。

请注意，该`ArgumentCaptor`方法现在被推荐用于复杂的断言，例如，您可以在其中使用 AssertJ（FEST-Assert 的维护克隆）。

# delphi - 由于 UAC 无法调试 Delphi 进程

> ID：13065857
> 
> 赞同：0
> 
> 时间：2012-10-25T09:44:59.817
> 
> 标签：delphi, debugging, windows-7, uac

我发现 Win7/X64 机器的有趣问题。

这次我没有遇到 Delphi 6 和 UAC 的问题。exes 在他们的位置工作，所以我可以使用 Delphi 调试器。

但是今天我在运行项目时遇到错误：“无法创建进程。对于此操作，您需要更高的用户级别”。

我怎样才能防止这种副作用？这是什么原因造成的？我不明白为什么旧项目运行良好，但这个新项目不是......

感谢您的每一个想法，链接，信息！

* * *

附加信息：通常我使用正常启动的 Delphi 6 IDE（没有 SysAdmin rigths）。所以它从不问我“真的吗？” 亲切的 UAC 问题。每个旧项目都可以在 Delphi 6 中使用——我可以构建、运行、调试一切。这个问题只发生在这个项目上，所以我尽量找出差异来解决问题。我使用普通目录（“c:\dev\anyproject”），其他人使用“c:\dev\otherproject1..2..n”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:32:32.540

从 Windows 资源管理器启动时，您的应用程序是否请求提升？
它有清单吗？

exe 的名称，如`setup.exe`，也可以触发提升。[请参阅安装程序检测技术](https://stackoverflow.com/a/12996230/572834)的概述。

非提升的进程无法调试提升的进程。
如果您的应用程序在开始时需要提升，那么您需要运行提升的 IDE 才能对其进行调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:22:47.413

以管理员身份启动 IDE 应该可以解决问题（上下文菜单中的选项）。如果没有，您可以在开发时始终禁用 UAC。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T10:18:42.153

有许多限制需要管理员权限。例如：您不能将数据直接写入`program files`目录。

# serialization - 为什么我的代理实体持有这么多信息？

> ID：13065858
> 
> 赞同：2
> 
> 时间：2012-10-25T09:45:00.713
> 
> 标签：serialization, proxy, doctrine, doctrine-orm

我有这个基本模型：

![在此处输入图像描述](../Images/36a4c83162fc8133b81fd688247cf64d.png)

当我从表中获取一个条目`book`并转储输出时：

```
// no other Doctrine queries were made before this one:
$book = $em->getRepository('Entities\Book')->find(1);
var_dump($book); 
```

我得到了`Book`实体，但也得到了一个代理实体`Author`：

```
object(Entities\Book)#179 (3) {
  ["id":"Entities\Book":private]=>
  int(1)
  ["title":"Entities\Book":private]=>
  string(7) "MyBook1"
  ["author":"Entities\Book":private]=>
  object(Doctrine\Proxy\__CG__\Entities\Author)#171 (5) {
  [...]  // many more lines of output 
```

我的理解是，代理实体`Author`是可以预期的，因为当我这样做时，[这就是`Doctrine`延迟加载](https://stackoverflow.com/questions/4923817/can-you-explain-me-what-is-a-proxy-in-doctrine-2#4926050)表中信息的方式。`author``$book->getAuthor()`

**Q1：您是否确认现阶段预期会出现代理作者实体？**

然而让我印象深刻的是，当我查看`var_dump`输出（[我已上传到 pastebin 供您查看](http://pastebin.com/MACGFedZ)）时，它包含的不仅仅是`10,000`行！我没想到会找到的东西包括对模型的引用`dummy_table1`和与模型`dummy_table2`无关的`book`引用`author`：

```
["dummy_table1"]=>    // line 1301
object(Doctrine\DBAL\Schema\Table)#194 (10) {

["dummy_table2"]=>   // line 1384
object(Doctrine\DBAL\Schema\Table)#191 (10) { 
```

**Q2：这也是预期的吗？**

从那里我想知道：如果我想将包含`$book`在缓存中的信息存储在`serialize`以后在我的视图中重新使用（我不是在谈论用 做一些操作`$book`，只是输出一些属性），它会疯狂，因为我会`500KB`为书名而存储，这使我想到了最后一个问题：

**Q3：您如何缓存 Doctrine 查询的结果？您是否将整个实体序列化到缓存中，是否将所需的信息提取到数组中，然后将该数组存储在缓存中，但如果是这样，它不会很快变得很麻烦......？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:36:19.037

A1：实体中的关系在任何时候都存在（你已经写过你得到了延迟加载的想法）。只有在需要时，这种关系才会水合。

A2：庞大的`var_dump`数据对于学说实体来说是正常的。改为使用`Doctrine\Common\Util\Debug::dump($entity)`。

A3：Doctrine 有自己的查询和结果缓存机制。如果您再次查询，我认为这不会是低效的`$book`。此外，DQL 支持数组水合（返回数组而不是实体）。

# php - 在 Python 中将数据打包成二进制字符串

> ID：13065863
> 
> 赞同：0
> 
> 时间：2012-10-25T09:45:35.487
> 
> 标签：php, python, pack

使用 PHP [pack()](http://www.php.net/pack)函数，我将字符串转换为二进制十六进制表示：

```
pack('H*', $SECURE_SECRET) 
```

如何在 Python 中获得相同的结果？我试过`struct.pack`了，但结果不一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T10:09:19.663

`pack('H*', $value)`将十六进制数转换为二进制：

```
php> = pack('H*', '41424344')
'ABCD' 
```

在 Python 中，您可以使用[`binascii.unhexlify`](http://docs.python.org/library/binascii.html#binascii.unhexlify)来获得相同的结果：

```
>>> from binascii import unhexlify
>>> unhexlify('41424344')
>>> 'ABCD' 
```

# java - 将多个文件合并为一个

> ID：13065865
> 
> 赞同：8
> 
> 时间：2012-10-25T09:45:37.883
> 
> 标签：java, string, file, groovy

我在某些位置有 4 个不同的文件，例如： D:\1.txt D:\2.txt D:\3.txt 和 D:\4.txt

我需要创建一个新文件为**NewFile.txt**，它应该包含上述文件 1.txt、2.txt、3.txt 4.txt 中存在的所有内容......

所有数据都应该出现在新的单个文件（NewFile.txt）中。

请建议我在 java 或 Groovy 中做同样的事情......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T10:09:46.103

这是在 Groovy 中执行此操作的一种方法：

```
// Get a writer to your new file
new File( '/tmp/newfile.txt' ).withWriter { w ->

  // For each input file path
  ['/tmp/1.txt', '/tmp/2.txt', '/tmp/3.txt'].each { f ->

    // Get a reader for the input file
    new File( f ).withReader { r ->

      // And write data from the input into the output
      w << r << '\n'
    }
  }
} 
```

这样做的好处（通过调用`getText`每个源文件）是它不需要将整个文件加载到内存中，然后再将其内容写入`newfile`. 如果您的一个文件很大，则另一种方法可能会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T10:20:32.333

这是时髦的

```
def allContentFile = new File("D:/NewFile.txt")
def fileLocations = ['D:/1.txt' , 'D:/2.txt' , 'D:/3.txt' , 'D:/4.txt']
fileLocations.each{ allContentFile.append(new File(it).getText()) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T19:42:58.960

我尝试解决这个问题，如果将内容复制到数组并将数组写入不同的文件，我发现它很容易

```
public class Fileread 
{

public static File read(File f,File f1) throws FileNotFoundException
{

    File file3=new File("C:\\New folder\\file3.txt");
    PrintWriter output=new PrintWriter(file3);
    ArrayList arr=new ArrayList();
    Scanner sc=new Scanner(f);
    Scanner sc1=new Scanner(f1);
    while(sc.hasNext())
    {
        arr.add(sc.next());

    }
     while(sc1.hasNext())
    {
        arr.add(sc1.next());

    }
       output.print(arr);
   output.close();

    return file3;
}
/**
 *
 * @param args
 * @throws FileNotFoundException
 */
public static void main(String[] args) {
    try
    {
   File file1=new File("C:\\New folder\\file1.txt");
   File file2=new File("C:\\New folder\\file2.txt");
   File file3=read(file1,file2);
   Scanner sc=new Scanner(file3);
   while(sc.hasNext())
       System.out.print(sc.next());

    }
    catch(Exception e)
    {
        System.out.printf("Error  :%s",e);
    }
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T10:28:47.773

我正在向您展示它在 java 中的完成方式：

```
public class Readdfiles {
  public static void main(String args[]) throws Exception
  {
    String []filename={"C:\\WORK_Saurabh\\1.txt","C:\\WORK_Saurabh\\2.txt"};
    File file=new File("C:\\WORK_Saurabh\\new.txt");
    FileWriter output=new FileWriter(file);
    try
    {   
      for(int i=0;i<filename.length;i++)
      {
        BufferedReader objBufferedReader = new BufferedReader(new FileReader(getDictionaryFilePath(filename[i])));

        String line;
        while ((line = objBufferedReader.readLine())!=null )
        {
          line=line.replace(" ","");

          output.write(line);
        }
        objBufferedReader.close();
      }
      output.close();
    }
    catch (Exception e) 
    {
      throw new Exception (e);
    }
  }

  public static String getDictionaryFilePath(String filename) throws Exception
  {
    String dictionaryFolderPath = null;
    File configFolder = new File(filename);
    try 
    {
      dictionaryFolderPath = configFolder.getAbsolutePath();
    } 
    catch (Exception e) 
    {
      throw new Exception (e);
    }
    return dictionaryFolderPath;
  }
} 
```

如果您有任何疑问，请告诉我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T10:40:47.147

你可以在 Java 中做这样的事情。希望它可以帮助您解决您的问题：

```
import java.io.*;
class FileRead {
public void readFile(String[] args) {
for (String textfile : args) {

try{
      // Open the file that is the first 
      // command line parameter
      FileInputStream fstream = new FileInputStream(textfile);
      // Get the object of DataInputStream
      DataInputStream in = new DataInputStream(fstream);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));
      String strLine;
      //Read File Line By Line
      while ((strLine = br.readLine()) != null)   {
      // Print the content on the console
      System.out.println (strLine);

    // Write to the new file
      FileWriter filestream = new FileWriter("Combination.txt",true);
      BufferedWriter out = new BufferedWriter(filestream);
      out.write(strLine);
      //Close the output stream
      out.close();

      }
      //Close the input stream
      in.close();
        }catch (Exception e){//Catch exception if any
      System.err.println("Error: " + e.getMessage());
      }
}
}

 public static void main(String args[]) {
 FileRead myReader = new FileRead();
 String fileArray[] = {"file1.txt", "file2.txt", "file3.txt", "file4.txt"};
    myReader.readFile(fileArray);

  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T12:11:02.653

一个班轮示例：

```
def out = new File(".all_profiles")
['.bash_profile', '.bashrc', '.zshrc'].each {out << new File(it).text} 
```

或者

```
['.bash_profile', '.bashrc', '.zshrc'].collect{new File(it)}.each{out << it.text} 
```

如果你有大文件，Tim 的实现会更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-04T16:50:33.950

```
public static void main(String[] args) throws IOException {
    List<String> files=new ArrayList<String>();

        for(int i=10;i<14;i++)
            files.add("C://opt/Test/test"+i+".csv");

    String destFile ="C://opt/Test/test.csv";
    System.out.println("TO "+destFile);
    long st=System.currentTimeMillis();
    mergefiles(files, destFile);
    System.out.println("DONE."+(st-System.currentTimeMillis()));
}

public static void mergefiles(List<String> files,String destFile){
    Path outFile = Paths.get(destFile);
    try(FileChannel out=FileChannel.open(outFile, StandardOpenOption.CREATE, StandardOpenOption.WRITE)) {
          for(String file:files) {
            Path inFile=Paths.get(file);
            System.out.println(inFile);
            try(FileChannel in=FileChannel.open(inFile, StandardOpenOption.READ)) {
              for(long p=0, l=in.size(); p<l; )
                p+=in.transferTo(p, l-p, out);
            }catch (IOException e) {
                 System.out.println("ERROR:: "+e.getMessage());
            }
            out.write(ByteBuffer.wrap("\n".getBytes()));
          }
        } catch (IOException e) {
             System.out.println("ERROR:: "+e.getMessage());
        }
} 
```

# ios - ios键盘“Go”按钮的动作

> ID：13065868
> 
> 赞同：20
> 
> 时间：2012-10-25T09:45:45.547
> 
> 标签：ios, objective-c, uitextfield, uikeyboard, uitextfielddelegate

如何在 iOS 中将操作绑定到键盘的**Go按钮？**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-25T09:51:09.363

## Objective-C

假设您使用的是 UITextField，您可以使用`<UITextFieldDelegate>`方法`textFieldShouldReturn`。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder]; // Dismiss the keyboard.
    // Execute any additional code

    return YES;
} 
```

不要忘记将您放入此代码的类指定为文本字段的委托。

```
self.someTextField.delegate = self; 
```

或者，如果您更喜欢使用 UIControlEvents，您可以执行以下操作

```
[someTextField addTarget:self action:@selector(textFieldDidReturn:) forControlEvents:UIControlEventEditingDidEndOnExit];

- (void)textFieldDidReturn:(UITextField *)textField
{
    // Execute additional code
} 
```

请参阅[@Wojtek Rutkowski 的回答](https://stackoverflow.com/a/13066737/716216)，了解如何在 Interface Builder 中执行此操作。

## 迅速

UITextFieldDelegate

```
class SomeViewController: UIViewController, UITextFieldDelegate {
    let someTextField = UITextField()

    override func viewDidLoad() {
        super.viewDidLoad()

        someTextField.delegate = self
    }

    func textFieldShouldReturn(textField: UITextField) -> Bool {
        textField.resignFirstResponder() // Dismiss the keyboard
        // Execute additional code
        return true
    }
} 
```

UIControlEvents

```
class SomeViewController: UIViewController {
    let someTextField = UITextField()

    override func viewDidLoad() {
        super.viewDidLoad()

        // Action argument can be Selector("textFieldDidReturn:") or "textFieldDidReturn:"
        someTextField.addTarget(self, action: "textFieldDidReturn:", forControlEvents: .EditingDidEndOnExit)
    }

    func textFieldDidReturn(textField: UITextField!) {
        textField.resignFirstResponder()
        // Execute additional code
    }
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-25T10:36:46.443

您`UITextFiled`可以`Did End On Exit`在`Connections Inspector`. `Go`在点击/ `Return` / 您选择的任何内容`Return Key`后触发它，如`Attributes Inspector`.

![连接检查员](../Images/21872dd22d1ac67c8396f9babe7397a0.png)

# wordpress - 如何限制用户访问网页

> ID：13065870
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:45:50.347
> 
> 标签：wordpress, .htaccess

我想阻止对整个页面的访问，该页面在云上，因为它正在开发中，我在页面上使用 SEO 并开始出现在谷歌上。

该页面不是为所有人准备的，我需要通过一个简单的用户/通行证浮动表单来限制访问。

我在过去看到一个例子，但不记得我必须做什么。

我记得在 htaccess 中我必须写一些行来询问用户/通行证，并且这些行链接到服务器上具有数据的文件。可以是这样的吗？

我可以在 Wordprees 安装上执行此操作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:49:40.910

[创建一个 Apache 密码](http://httpd.apache.org/docs/2.2/howto/auth.html#gettingitworking)文件，例如`/path/to/passwords`

将此代码放入您的 .htaccess 中：

```
## password secure only sub.domain.com
SetEnvIfNoCase Host ^sub\.domain\.com$ SECURED

AuthType Basic
AuthName "My Protected Area"
AuthUserFile /path/to/passwords
Require valid-user
Satisfy         any
Order           allow,deny
Allow from      all
Deny from       env=SECURED 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:50:07.533

这是用于 .htaccess 和 .htpasswd 文件的链接。

[为您生成必要的文件以放置在您的服务器上](http://tools.dynamicdrive.com/password/)

那里也有一个常见问题解答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:23:37.863

WordPress 网站中最简单的答案是：

1) 转到设置/隐私并将站点设置为要求搜索引擎不要索引此站点。这将（来源：[Codex：隐私设置解释](http://codex.wordpress.org/Settings_Privacy_Screen)：

> *   导致 <meta name='robots' content='noindex,nofollow' /> 生成到您网站源的部分（如果使用 wp_head），导致搜索引擎蜘蛛忽略您的网站。
> *   导致对 robots.txt 的点击发回：用户代理：* 禁止：/ 注意：以上仅在站点根目录中安装了 WordPress 且不存在 robots.txt 时有效。
> *   停止对 ping-o-matic 和任何其他 RPC ping 服务的 ping (...)
> *   在“管理”>“设置”>“写作”屏幕上完全隐藏“更新服务”选项，并显示消息“由于您的博客的隐私设置，WordPress 未通知任何更新服务。”

您应该测试这是否有效，例如使用[Google 网站管理员工具](http://google.com/webmaster/tools)

2) 添加这些插件之一：[Private Only](http://wordpress.org/extend/plugins/private-only/)、[Registered Only](http://wordpress.org/extend/plugins/registered-only/)或类似的。他们将向任何试图查看该站点的访问者提示登录表单。

然后，您就可以在线工作，而不必担心网站的可见性。请记住撤消这些更改，特别是第 1 步。如果您忘记了这一点，以后可能会让您生气。它会破坏你所有的 SEO 努力。

还有一些不错的插件可以设置“即将推出”页面，并且仍然能够处理仅针对未登录用户显示“即将推出”的主题。

此致！

# javascript - 解释 var {A: a} = {A: 1}

> ID：13065872
> 
> 赞同：3
> 
> 时间：2012-10-25T09:46:01.663
> 
> 标签：javascript

我有以下代码（仅在 Firefox 中解析和正确运行）

```
var {A: a} = {A: 1};
console.log(a); // 1 
```

现在我们有一个名为 'a' 的变量，其值为 1

所以我有3个问题要问

1.  为什么我们在这里需要'var'？为什么我们在 '=' 的 rhs 上不需要 var
2.  'a' 如何在范围内？
3.  'a' 如何分配给 1？
    似乎在这里使用了成员明智的副本，但是为什么呢？
    lhs上的对象不应该引用rhs上的对象吗？

例如，

```
var b = {B: 1};
var c = {B: 2};
b = c;
b.B = 3;
console.log(c); 
```

在这个赋值（b = c）中，b 现在引用 c，它们共享同一个对象。为什么这个作业与我原来的作业不同？

忘了说我在 Firefox 16.0 上测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:49:26.310

您拥有的代码：

```
var {A: a} = {A: 1}; 
```

不是有效的 JavaScript，它仅在使用 Firefox 时有效，并且不会通过任何已知的 linter）。

正如 ThiefMaster 提到的，在文档中查找后，这种用法称为解构赋值。

你可以在这里阅读：[解构赋值](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Destructuring_assignment_%28Merge_into_own_page.2Fsection%29)

取自页面。

例如，您可以使用解构赋值来交换值：

```
var a = 1;
var b = 3;

[a, b] = [b, a]; 
```

# database - Heroku pg:info 给出 0 个表

> ID：13065878
> 
> 赞同：0
> 
> 时间：2012-10-25T09:46:25.437
> 
> 标签：database, heroku

我的 heroku 应用程序有开发计划

该应用程序可用且有效，如果我使用 pg:backups 下载备份并在本地查看它，我可以看到它有数据..

但是，当我这样做时，`heroku pg:info`它给了我 0 个表和 0 行..

```
Connections: 0
Created:     2012-10-25 09:18 UTC
Data Size:   6.1 MB
Fork/Follow: Unavailable
PG Version:  9.1.6
Plan:        Dev
Rows:        0/10000 (In compliance)
Status:      available
Tables:      0 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T18:40:09.460

几天后似乎会自行解决..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:09:33.803

我注意到，当您使用新计划创建新数据库并将数据从旧数据库恢复到新数据库时，pg:info 会打印有关数据库的无效数据。特别是数据大小显示为 0，即使它与旧数据库的大小相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:32:49.943

我也观察到了这一点。我刚刚升级到开发计划。这真的很令人困惑。

在进行生产之前，我能够在我的暂存应用程序上“测试”升级。

# sql-server - 使用模式获取表名

> ID：13065884
> 
> 赞同：0
> 
> 时间：2012-10-25T09:46:49.493
> 
> 标签：sql-server, schema

我在存储过程中看到了一些这样的查询

```
SELECT ORDINAL_POSITION 'column_id', column_name 'column_name', 
         column_name + ' : ' + data_type 'column_nametype',
         data_type 'data_type',
         CHARacter_maximum_length 'SIZE'
     FROM information_schema.columns
     WHERE table_name = @TableName 
```

但我发现 information_schema.columns 不是表名，它是一个模式，但它是如何检索数据的？我怎么知道实际的表名？模式的用途是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:04:23.130

试试这个查询：

```
 DECLARE @TableName NVARCHAR(MAX)

    SET @TableName = 'tblTest'

    SELECT 
            column_id 'column_id', columns.name 'column_name'
           ,columns.name + ' : ' + types.name 'column_nametype'
           ,types.name  'data_type'
           ,columns.max_length 'SIZE'
    FROM 
        sys.columns
    INNER JOIN
        sys.types
    ON
        types.system_type_id = columns.system_type_id
    WHERE 
        objecT_id = OBJECT_ID(@TableName)
    ORDER BY 
        Column_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:59:37.587

INFORMATION_SCHEMA 视图位于服务器上的 Master 数据库中，是一种特殊类型的视图，可以从数据库上下文中检索数据。也就是说，尽管它们位于主数据库中，但它们将检索您当前使用的任何数据库的信息。

就像任何其他视图一样，您可以查看这些视图的来源。在给出的特定示例中，它使用 sys.columns、sys.objects 和 sys.types，它们本身就是系统视图。

尽管诸如 sys.types 之类的视图是可以使用源代码的视图，但其中的某些系统表/视图无法直接引用。例如 sys.sysscalartypes 对用户不可用，系统函数 sysconv 也不可用。

INFORMATION_SCHEMA 视图的用户不限于 SQL Server，尽管实现似乎是特定于平台的。例如 MySQL 有自己的 INFORMATION_SCHEMA 结构。

不鼓励使用旧的 sysobjects（相对于 sys.objects）系统表，因为不能保证它们将来会继续使用。必须说，INFORMATION_SCHEMA 虽然通常很有用，但并不总是暴露 DBA 所需的信息级别。

# c# - 用Access数据库建项目成功，可以搜索数据但不能删除记录

> ID：13065885
> 
> 赞同：3
> 
> 时间：2012-10-25T09:46:56.460
> 
> 标签：c#, database, visual-studio-2010

我刚刚学习 Visual Studio C# 2 个月。最近写了一个可以连接Microsoft Access 2007的代码，运行流畅（可以显示数据，可以删除记录）但是，当我构建项目时，它仍然显示数据但不能删除记录。（它显示错误消息框“您的应用程序中发生了未处理的异常。如果单击继续，应用程序将忽略此错误并尝试继续。如果单击退出，应用程序将立即关闭”）我不知道它有什么问题。我尝试了很多方法来解决问题，但还没有成功。我将项目上传到 4shared.com，所以请通过此链接下载 --> [http://www.4shared.com/zip/bxhZC3Wp/WindowsFormsApplication32.html](http://www.4shared.com/zip/bxhZC3Wp/WindowsFormsApplication32.html)？

下载后，请打开并尝试运行代码（文件名WindowsFormsApplication32），您将看到3个文本框，输入1并单击button1，它将在textbox2中显示名称，在textbox3中显示城市。现在点击button2删除记录，可以看到删除记录成功。然后，打开文件夹 iii>Debug，安装程序（文件名 iii），然后打开程序（可能位于 C:\Program Files (x86)\Default Company Name\iii）。可以尝试和运行代码一样的方法，但是点击button2删除记录后，会显示messagebox错误（请通过此链接下载错误消息图片--> [http://www.4shared.com /photo/FgUODfoW/error_messagebox.html](http://www.4shared.com/photo/FgUODfoW/error_messagebox.html)？）任何人请帮助我。

PS。这就是我构建项目的方式。

1.  通过右键单击打开 Visual Studio2010 并选择“以管理员身份运行”。
2.  打开我的项目
3.  “文件”>“添加”>“新项目”
4.  在“添加新项目”窗口中，选择“其他项目类型”>“设置和部署”>“Visual Studio 安装程序”选择“设置项目”
5.  在“文件系统”选项卡中，右键单击“应用程序文件夹”>“添加”>“项目输出...”
6.  在“文件系统”选项卡中，右键单击“应用程序文件夹”>“添加”>“文件...”，然后选择我的 Microsoft Access 2007 文件。
7.  在“解决方案资源管理器”窗口中，右键单击我的项目并选择“构建”这样可以将数据库正确导入我的项目吗？

下面是代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace WindowsFormsApplication32
{
public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }
    private OleDbConnection connection;
    private OleDbDataAdapter adapter;

    private OleDbCommand command;
    private string sql;

    private void Form1_Load(object sender, EventArgs e)
    {
        string con = @"Provider=Microsoft.ACE.OLEDB.12.0;
                        Data Source=|DataDirectory|\bbb.accdb;
                        Persist Security Info=False;";
        connection = new OleDbConnection(con);
        if (connection.State == ConnectionState.Closed)
            connection.Open();
    }

    private void button1_Click(object sender, EventArgs e)
    {

        sql = "SELECT * FROM test WHERE id=" + textBox1.Text;

        command = new OleDbCommand(sql, connection);

        adapter = new OleDbDataAdapter(command);
        DataSet data = new DataSet();
        adapter.Fill(data, "abc");
        if (data.Tables["abc"].Rows.Count == 0) return;

        else
        {

            textBox2.Text = Convert.ToString(data.Tables["abc"].Rows[0]["Name"]);
            textBox3.Text = Convert.ToString(data.Tables["abc"].Rows[0]["City"]);
        }

    }

    private void button2_Click(object sender, EventArgs e)
    {
        DialogResult result = MessageBox.Show("are you sure to delete", "delete", MessageBoxButtons.OKCancel);
        if (result == DialogResult.Cancel) return;
        sql = "DELETE FROM test WHERE ID=" + textBox1.Text;
        command = new OleDbCommand(sql, connection);
        int r = (int)command.ExecuteNonQuery();
        if (r > 0)
        {
            MessageBox.Show("already delete");
            textBox1.Text = "";
            textBox2.Text = "";
            textBox3.Text = "";
        }
        else MessageBox.Show("error to delete");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:35:56.637

该错误是因为文件夹权限。如果您使用的是 Window 7，则在安装应用程序后，转到安装目录并右键单击可执行文件。单击“以管理员身份运行”，现在尝试删除记录。这次一定会成功的。

在任何操作系统中工作的替代方法 向本地系统用户 (MYPC\Users) 提供修改权限，然后重试。它会起作用的。

# asp.net - 调试 MySQL：连接太多

> ID：13065888
> 
> 赞同：0
> 
> 时间：2012-10-25T09:47:07.683
> 
> 标签：asp.net, mysql, mysql-connector

在我们使用 MySQL DB 部署新版本的 ASP.NET C# 应用程序后，我们遇到了连接问题。

昨天我收到“连接太多”错误，我正在查看打开的连接， `SHOW FULL PROCESSLIST`并且它们在白天不断增加。

有没有一个好方法可以找出我们的错误可能在哪里？就像检查睡眠连接所做的最后一个查询一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:00:59.307

确保您的应用程序正在正确关闭与数据库的连接....如果您的应用程序没有关闭连接，那么您将收到上述错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:31:45.323

[连接池](https://secure.wikimedia.org/wikipedia/en/wiki/Connection_pool)通常可以解决这个问题。在您的情况下，连接似乎保持打开的时间过长，这意味着在您的软件的某些分支中，没有确定的最终会在使用后关闭连接。在中心点诊断有问题的连接使用特别有用，因为它可以在任何给定时间关注打开的连接数量，并可能提醒某人进行转储以供以后分析。

您还可以增加 MySQL 实例允许的连接数。my.cnf 中的设置是“max_connections”。

最后，如果您愿意，可以尝试减少实例的“wait_timeout”或“interactive_timeout”属性。这些设置在一定时间后调节连接的自动关闭。

# asp.net - 对会话超时执行一些功能

> ID：13065890
> 
> 赞同：0
> 
> 时间：2012-10-25T09:47:19.583
> 
> 标签：asp.net, session, timeout

当会话在特定时间后自动超时（默认 20 分钟）时，我如何编写一些代码，例如在数据库中维护超时或记录任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:58:43.080

你可以使用`Session_OnEnd Event`，你可以找到所有相关的`methods`和`properties`关于[Session Object (IIS)](http://msdn.microsoft.com/en-us/library/ms524319%28v=vs.90%29.aspx)

请看一下[会话状态事件](http://msdn.microsoft.com/en-us/library/ms178583.aspx)

还有一篇关于[ASP.NET Session End Event Fires Immediately After Session Start的好文章](http://www.codeproject.com/Articles/246649/ASP-NET-Session_End-event-fires-immediately-after)

# c++ - 比较指向成员的指针？

> ID：13065893
> 
> 赞同：5
> 
> 时间：2012-10-25T09:47:27.510
> 
> 标签：c++

我很困惑为什么不能使用二元运算符比较指向成员的指针<

```
class Point3d{
  protected:
      //..
 public:
     float x;
      static list<Point3d*> *freeList;
 public:
     float y;
     static const int chunkSize = 250;
 public:
    float z; 
```

};
和一个模板：

```
template< class class_type, class data_type1, class data_type2 >

char* access_order(data_type1 class_type:: *mem1, data_type2 class_type:: *mem2)
{

    return
      mem1 < mem2 ?
         "member 1 accurs first":
         "member 2 accurs first";
} 
```

当我像下面这样调用 access_order 时：

```
access_order(&Point3d::z, &Point3d::y); 
```

g++ 报告：

```
"invalid operands of types ‘float Point3d::*’ and ‘float Point3d::*’ to binary ‘operator<’" 
```

有没有办法比较指向成员的指针，我的意思是不相等的比较，以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:26:31.613

您可以比较对象成员的**地址：**

```
A a;
if (std::less<void*>()(&a.a, &a.b))
    std::cout << "a precedes b\n";
else
    std::cout << "a follows b\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-24T14:26:34.050

最好的选择之一 - 通过 制作原始副本`std::memcpy`，计算哈希，然后将其用于比较（感谢@HolyBlackCat 的评论）。下面的函数计算传递的指向成员的指针的哈希值（在现代 C++ 17 编译器 VS、GCC.CLang 上测试）。

```
#include <cstring>
#include <string_view>
#include <functional>

template <typename TObject, typename TMember>
size_t HashMemberPtr(TMember TObject::* memberPtr)
{
    char buf[sizeof memberPtr];
    std::memcpy(&buf, &memberPtr, sizeof memberPtr);
    return std::hash<std::string_view>{}(std::string_view(buf, sizeof buf));
} 
```

不幸的是，它不兼容，`std::hash<>`因为 last 只需要一个模板参数。

如何使用：

```
struct CPoint3D
{
    float x;
    float y;
    float z;
};

int main()
{
    const size_t xHash = HashMemberPtr(&CPoint3D::x);

    assert(xHash == HashMemberPtr(&CPoint3D::x));
    assert(xHash != HashMemberPtr(&CPoint3D::y));
    assert(xHash != HashMemberPtr(&CPoint3D::z));

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T10:16:21.603

出于同样的原因，您通常无法比较指针。唯一支持的顺序比较是两个数据指针是否指向同一个数组。否则，比较的结果是未指定的；编译器不需要以任何合理的方式使运算符“工作”。（确保这里的总顺序需要在某些架构上进行额外的计算。）由于没有任何情况可以为指向成员的指针获得指定的结果，因此标准不允许它们作为运算符的参数。

如果您需要总订购`std::less`等。保证提供。包括，如果我正确理解标准，成员指针。（尽管为指向成员函数的指针提供总排序可能会非常昂贵。）然而，即使这样，这种排序也可能是任意的；它当然不需要反映内存中的任何顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:00:39.067

指向成员的指针本身并不指向某些内存。它们只是标签。您可以对它们做的唯一事情是将它们转换为使用运算符对给定对象的指针值的引用，`.*`或者`->*`存储在另一个指向成员变量的指针中。

```
struct A
{
    int a;
    float b;
};
A a;
int A::* p2m = &A::a;
int A::* p2m2 = p2m;

int & realPointer = a.*p2m; 
```

请注意，您只能比较相同类型的指针，因此您不能比较指向`A::a`( `int A::*`) 的指针和指向`A::b`( `float A::*`)的指针

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T09:55:28.773

如果 Point3d 重载 < 然后尊重它们并进行比较，

返回 *mem1 < *mem2 ？"member 1 accurs first": "member 2 accurs first";

或更改签名

char* access_order(data_type1 class_type:: &mem1, data_type2 class_type:: &mem2) char* access_order(data_type1 class_type:: mem1, data_type2 class_type:: mem2)

你想对实际的内存地址进行比较吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-24T15:21:36.987

指针比较似乎吸引了所有人，但它们总是导致不可移植或未定义的行为。

最简单的答案是你永远不应该这样做。没有经典方法无法解决的计算问题。

不要误会我的意思，我知道提出错误的问题可能会产生有趣的想法，或者更好地理解语言甚至 CPU 的工作原理。

# mysql - 如何在 cloudfoundry 中使用 vmc 为 MySQL 建立隧道？

> ID：13065894
> 
> 赞同：0
> 
> 时间：2012-10-25T09:47:27.000
> 
> 标签：mysql, cloud-foundry

我刚开始使用 CloudFoundry，我知道能够对 db 执行 sql 转储的唯一方法是

1.  创建 MySQL 服务
2.  绑定服务
3.  通往服务的隧道但我在最后一部分没有任何运气。[我按照云铸造论坛讨论](http://support.cloudfoundry.com/entries/21311716-how-can-i-work-with-mysql-service)的指示

我选择选项*1\. None*但我只是不知道如何运行 mysql --protocol=TCP --host=localhost --port=10000 --user=ub2sCBQ0mGsVZ --password=pRXana7vEOX0C df83386088ffc4f8d8cf288791d22fb99 < sample.sql

从命令行 (Windows) 或 SQLyog。

问题的另一部分当然是一旦我能够创建数据库和表并将数据插入其中。我的 webapp 需要如何连接到数据库？一方面，我想我知道[这里描述](http://docs.cloudfoundry.com/services/mysql/mysql.html)的答案， 但我不敢相信这是唯一的方法。这对于 Spring 来说非常困难，因为我必须在整个 Spring/Hibernate 机器开始创建所需的 bean 之前读取 env。有没有一个不太复杂的方法来做到这一点的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:11:56.940

如果您使用的是 Windows，我建议您使用 MySQL 工作台使用 VMC 打开隧道时提供的凭据进行连接。你可以从这里的 MySQL 网站下载它；

[https://www.mysql.com/products/workbench/](https://www.mysql.com/products/workbench/)

在部署使用 MySQL 服务的 Spring 应用程序时，您可以让它在您的应用程序中自动配置数据库连接。详情见下页；

[http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#determining-whether-your-application-can-be-auto-configured](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#determining-whether-your-application-can-be-auto-configured)

# excel - 在excel中将垂直数据转换为水平数据

> ID：13065896
> 
> 赞同：0
> 
> 时间：2012-10-25T09:47:34.737
> 
> 标签：excel

在一个excel表中，我有如下数据：

```
Name        Age
-------    -------
XYZ        24
ABC        25
CDE        26
GHI        27 
```

我希望这些数据在 excel 表中转换如下。

```
Name1     Age1    Name2     Age2    Name3     Age3    Name4     Age4
XYZ       24      ABC       25      CDE       26      GHI       27 
```

这可能吗？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T14:12:20.933

至于非 VBA 解决方案 - 您可以通过创造性地使用自动填充和排序来做到这一点：

做一些创造性的自动填充和排序： ![自动填充排序1](../Images/8c844832da8713c2a3ccd563cdec455a.png)

复制和粘贴转置： ![自动填充排序2](../Images/8190a3511be07ee25f7714e528b91be9.png)

你完成了： ![自动填充排序3](../Images/571715e276d959485b09d7ade31e870a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:05:56.983

将此粘贴到您的 vba 编辑器（标准模块）中并将代码添加到按钮。
代码假定表格从范围“A1”开始。
第一行包含标题，其他行包含示例中的值。
我粘贴了第 8 行的输出。
如果有帮助，请告诉我。

```
Option Explicit

Sub Name_Age()

Dim oRange                  As Excel.Range
Dim iRange_Cols             As Integer
Dim lRange_Rows             As Long
Dim lCnt                    As Long

Dim vArray                  As Variant
Dim vArray_Dest             As Variant

Dim lUbound_Rows            As Long
Dim lUBound_Cols            As Long

Set oRange = ThisWorkbook.Sheets(1).UsedRange
iRange_Cols = oRange.Columns.Count
lRange_Rows = oRange.Rows.Count - 1
ReDim vArray(1 To lRange_Rows, 0 To iRange_Cols)
ReDim vArray_Dest(1 To iRange_Cols, 1 To (lRange_Rows * iRange_Cols))
vArray = oRange

lCnt = 0
For lCnt = 1 To lRange_Rows
    vArray_Dest(1, (lCnt * 2) - 1) = CStr("Name" & lCnt)
    vArray_Dest(1, (lCnt * 2)) = CStr("Age" & lCnt)
    vArray_Dest(2, (lCnt * 2) - 1) = vArray(1 + lCnt, 1)
    vArray_Dest(2, (lCnt * 2)) = vArray(1 + lCnt, 2)
Next lCnt

lUbound_Rows = UBound(vArray_Dest, 1)
lUBound_Cols = UBound(vArray_Dest, 2)

Set oRange = Nothing
Set oRange = ThisWorkbook.Sheets(1).Range(Cells(8, 1), Cells(8 + lUbound_Rows - 1, lUBound_Cols))
oRange = vArray_Dest

End Sub 
```

# java - 在 SpringMVC 中处理静态页面的好习惯

> ID：13065898
> 
> 赞同：1
> 
> 时间：2012-10-25T09:47:38.150
> 
> 标签：java, servlets, spring-mvc

Spring MVC中如何处理几十个静态页面？我可以通过一个控制器功能来处理它，还是更好地为一页提供一个功能？或者我必须将静态页面移动到资源文件夹并像资源一样处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:58:08.833

> 我可以通过一个控制器功能来处理它，还是更好地为一页提供一个功能？

--> 那么最好为一页写一个函数。但是在控制器级别，根据功能创建控制器。如果您的页面与登录模块相关，`LoginController`请为您的静态页面添加方法。同样，如果您的页面属于注册模块，请将它们添加到`SignupController`.

此外，如果页面包含安全信息，则添加控制器，否则您可以允许公共访问静态页面。

# html - CSS 和表单问题 - 让我争吵 :(

> ID：13065900
> 
> 赞同：-1
> 
> 时间：2012-10-25T09:47:44.780
> 
> 标签：html, css, forms

我创建了一个表单，它应该看起来像这样：

[![截屏](../Images/b6fd5cce7f40175a080979b829a03a68.png)](https://i.stack.imgur.com/hxcbG.jpg)

有人可以帮我编辑我的代码，使其看起来像上图并解释我做错了什么吗？JSFiddle 会很棒，所以我可以理解如何修复它。

需要打开 zip 标签和字段并将提交按钮推到右侧，但它对我不起作用:(

我的尝试如下：

[http://jsfiddle.net/2w6mK/](http://jsfiddle.net/2w6mK/)

CSS：

```
 #form-container {
    width: 710px;
    height: 450px;
    padding: 20px 50px;
    margin: 35px 0 0 25px;
    }

form {
    position: relative;
    margin-left: -10px;
    }

form label {
    display: block;
    font: normal 12px/16px arial, Arial, Helvetica, sans-serif;
    font-weight: bold;
    color: #000;
    text-transform: uppercase;
    text-align: left;
    }

form [type="text"],

form [type="email"] {
    display: block;
    border: 1px solid #000;
        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
    border-radius: 2px;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
    box-sizing: border-box;
    font: 12px/14px arial, helvetica, verdana, sans-serif;
    width: 60%;
    padding: 5px 5px;
    margin: 5px 0;
        -webkit-appearance: none;
    }

.zip {
    display: block;
    border: 1px solid #000;
        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
    border-radius: 2px;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
    box-sizing: border-box;
    font: 12px/14px arial, helvetica, verdana, sans-serif;
    width: 20%;
    padding: 5px 5px;
    margin: 5px 0;
        -webkit-appearance: none;
    }

.dob-select {
       display: block;
    border: 1px solid #000;
        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
    border-radius: 2px;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
    box-sizing: border-box;
    font: 12px/14px arial, helvetica, verdana, sans-serif;
    width: 80px;
    height:25px;
        -webkit-appearance: none;
   overflow: hidden;
   background: url("http://s17.postimage.org/4tmf81arf/down_arrow.png") no-repeat right #fff;
   float: left;
   margin-right: 5px;
}

.dob-select select {
   background: transparent;
   width: 125px;
   height: 25px;
   border: none;
   padding: 5px 0 0 5px;
   color: #cccccc;
}

.left {
    float: left;    
}
form [type="submit"] {
    display: block;
    background-image: url("http://findmuck.files.wordpress.com/2012/06/green_submit_button_by_rukiaxichigo15.jpg") no-repeat;
    margin: 25px auto;
    width: 154px;
    height:57px;
    border: none;
    color: transparent;
    font-size: 0;
    float: left;
    }

form input[type=submit]:hover {
    background-image: url("http://findmuck.files.wordpress.com/2012/06/green_submit_button_by_rukiaxichigo15.jpg") no-repeat;
    cursor: hand;
    cursor: pointer;
}

#FileUpload {
    position:relative;
    margin-top: -13px;
    padding-bottom: 15px;
    }

#BrowserVisible {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
    background:url(images/btn_browse.gif) 100% 0px no-repeat;
    height:27px;
    width:390px;
    cursor: hand;
    cursor: pointer;
}

#FileField {
    display: block;
    margin-right: 85px;
    border: 1px solid #000;
        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
    border-radius: 2px;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
    box-sizing: border-box;
    font: 12px/14px arial, helvetica, verdana, sans-serif;
    color: #777;
    width: 300px;
    padding: 5px 5px;
    -webkit-appearance: none;
} 
```

HTML：

```
<div id="form-container">              

            <form>

                <fieldset>
                    <label for="name">Name</label>
                    <input type="text" name="name">
                </fieldset>

                <fieldset>
                <label for="dob">date of birth</label>
                <div class="dob-select">
                <select name="dob_day">
                <option value="01">01</option>

                </select>
                </div>
                <div class="dob-select">
                <select name="dob_month">
                <option value="01">Jan</option>
                </select>
                </div>
                <div class="dob-select">
                <select name="dob_year">
                <option value="2012">2012</option>
                </select>
                </div>
                </fieldset>

                <fieldset>
                    <label for="zip">zip</label>
                    <input type="text" class="short" name="zip">
                </fieldset>

                <fieldset>
                    <label for="email">Email</label>
                    <input type="email" name="email">
                </fieldset>

                <fieldset>                
                    <label for="subscribe"><input type="checkbox" class="left"> <p class="left">Tick</p></label>
                    <input type="submit" name="submit">
                </fieldset>       
            </form>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:04:42.373

编辑2：

添加

```
.short{
  width: auto !important;
} 
```

到 CSS 以绘制全长 ZIP 字段，如图所示。

* * *

`border: 1px solid silver;`编辑：当您了解定位是如何工作时删除，这是出于调试目的；）

* * *

看：http: [//jsfiddle.net/pb6mM/3/](http://jsfiddle.net/pb6mM/3/)

```
form input[type="submit"]{
    position: absolute;
    right: 0;
    bottom: 0;
}

fieldset{
    border: 1px solid silver;
}

.fieldsetDate{    
    padding-right: 30px;
}

.inlineBlock{
    display: inline-block;
} 
```

并添加

```
 margin-top: 6px;
   margin-bottom: 6px; 
```

使其`.dob-select {`与普通文本字段的高度相同。

HTML：

```
<div id="form-container">              

            <form>

                <fieldset>
                    <label for="name">Name</label>
                    <input type="text" name="name">
                </fieldset>

                <fieldset class="fieldsetDate inlineBlock">
                <label for="dob">date of birth</label>
                <div class="dob-select">
                <select name="dob_day">
                <option value="01">01</option>

                </select>
                </div>
                <div class="dob-select" >
                <select name="dob_month">
                <option value="01">Jan</option>
                </select>
                </div>
                <div class="dob-select">
                <select name="dob_year">
                <option value="2012">2012</option>
                </select>
                </div>
                </fieldset>

                <fieldset class="inlineBlock">

                    <label for="zip">zip</label>
                    <input type="text" class="short" name="zip">

                </fieldset>

                <fieldset>
                    <label for="email">Email</label>
                    <input type="email" name="email">
                </fieldset>

                <fieldset>                
                    <label for="subscribe"><input type="checkbox" class="left"> <p class="left">Tick</p></label>
                    <input type="submit" name="submit">
                </fieldset>       
            </form>

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:57:00.457

添加`Position:absolute`到输入按钮。并且html代码有细微的变化。检查演示。

**[演示](http://jsfiddle.net/Rnek8/3/)**

* * *

[**示例 CSS 表单**](http://jsfiddle.net/UsNhF/)

# delphi - 如何在 TDbGrid 中获取光标下的文本

> ID：13065902
> 
> 赞同：2
> 
> 时间：2012-10-25T09:47:55.003
> 
> 标签：delphi, mouseover, tdbgrid

屏幕宽度不足以显示一些文本字段。我不知道如何自动包装它们，我怀疑它是否可以轻松完成。

所以，我想我会做类似的事情

```
procedure TForm1.FormMouseMove(Sender: TObject;
    Shift: TShiftState; X,Y: Integer);

   var column, row : Integer;
begin
  myDbGrid.MouseToCell(X, Y, column, row);
  myDbGrid.Hinst := myDbGrid.Cells(column, row); // <==== ooops
end; 
```

或者，也许这样做`OnShowHint`并获取鼠标坐标并将它们转换为列和行（更有效）

但是，当然，TDbGrid 没有`Cells`. 当用户将鼠标移到网格的“单元格”上时，知道如何设置控件的提示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T10:43:43.423

使用此代码：

```
type
 THackGrid = class(TDBGrid);

procedure TForm1.DBGrid1MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
var
  Cell: TGridCoord;
  ActRec: Integer;
begin
  Cell := DBGrid1.MouseCoord(X, Y);
  if dgIndicator in DBGrid1.Options then
    Dec(Cell.X);
  if dgTitles in DBGrid1.Options then
    Dec(Cell.Y);
  if THackGrid(DBGrid1).DataLink.Active and (Cell.X >= 0) and
    (Cell.Y >= 0) then
  begin
    ActRec := THackGrid(DBGrid1).DataLink.ActiveRecord;
    try
      THackGrid(DBGrid1).DataLink.ActiveRecord := Cell.Y;
      Caption := DBGrid1.Columns[Cell.X].Field.AsString;
    finally
      THackGrid(DBGrid1).DataLink.ActiveRecord := ActRec;
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:27:08.837

这是直接从我的程序中获取的代码（尽管经过简化），该程序显示连接到网格的数据集的值之一作为提示。

```
procedure TMainForm.DBGrid1MouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Integer);
var
 MousePos: TGridCoord; // X = Column, Y = Row

begin
 MousePos:= DBGrid1.MouseCoord (X, Y);
 if mousepos.X = 6  // we are over the 'tops' field
  then mainform.hint:= qPeopleTops.asstring;  // show for current person
end; 
```

# jquery - 如何更改asp.net中treeview的几个节点的颜色？

> ID：13065903
> 
> 赞同：0
> 
> 时间：2012-10-25T09:47:55.287
> 
> 标签：jquery, asp.net

我需要以编程方式更改树视图中节点的颜色。asp.net 或 jquery 有什么解决方案吗？PS：我正在按需绑定树视图节点。

```
 private void BindTreeViewControl()
        {
            try
            {
                DataTable dt = new DataTable();

                dt = GetData();

                for (int i = 0; i < dt.Rows.Count; i++)
                {

                    TreeNode root = new TreeNode(dt.Rows[i]["Name"].ToString(), dt.Rows[i]["Name"].ToString());
                    root.SelectAction = TreeNodeSelectAction.SelectExpand;
                    root.ShowCheckBox = true;
                      child.PopulateOnDemand = Convert.ToUInt32(dt.Rows[i]["Count"]) > 0;                    TreeViewDemo.Nodes.Add(root);
                }
              }
            catch (Exception Ex)
            {
                throw Ex;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:06:45.203

迪，

[TreeNodeDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.treenodedatabound.aspx)将是您的合适选择。当数据项绑定到节点时会发生这种情况，您可以在那里访问节点的所有属性并在所需的位置设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:41:57.080

树节点颜色可以通过设置节点文本来改变

`<div class='myclass' style='color: red'>Node Text</a>`

# r - R在函数中具有多个参数的聚合

> ID：13065904
> 
> 赞同：8
> 
> 时间：2012-10-25T09:47:56.453
> 
> 标签：r, dataframe, aggregate

我试图通过在 data.frame 上使用聚合来避免耗时的 for 循环。但我需要其中一列的值进入最终计算。

```
dat <- data.frame(key = c('a', 'b', 'a','b'), 
rate = c(0.5,0.4,1,0.6), 
v1 = c(4,0,3,1), 
v2 = c(2,0,9,4))

>dat
  key rate v1 v2
1   a  0.5  4  2
2   b  0.4  0  0
3   a  1.0  3  9
4   b  0.6  1  4

aggregate(dat[,-1], list(key=dat$key),  
    function(x, y=dat$rate){
        rates <- as.numeric(y)
        values <- as.numeric(x)
        return(sum(values*rates)/sum(rates))
    }) 
```

注意：该函数只是一个示例！
这个实现的问题是它`y=dat$rate`给出了所有 4 个 dat 速率，而我想要的只是 2 个聚合速率！关于我如何做到这一点的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T05:36:33.990

`data.table`这是我使用“ ”包设法实现的目标：

```
DT <- data.table(dat, key = "key")
DT[, list(v1 = sum(rate * v1)/sum(rate), v2 = sum(rate * v2)/sum(rate)), by = "key"]
#    key       v1       v2
# 1:   a 3.333333 6.666667
# 2:   b 0.600000 2.400000 
```

好的。所以这很容易写出两个变量，但是当我们有更多的列时呢。`lapply(.SD,...)`与您的功能结合使用：

首先，一些数据：

```
set.seed(1)
dat <- data.frame(key = rep(c("a", "b"), times = 10),
                  rate = runif(20, min = 0, max = 1),
                  v1 = sample(10, 20, replace = TRUE),
                  v2 = sample(20, 20, replace = TRUE),
                  v3 = sample(30, 20, replace = TRUE),
                  x1 = sample(5, 20, replace = TRUE),
                  x2 = sample(6:10, 20, replace = TRUE),
                  x3 = sample(11:15, 20, replace = TRUE))
library(data.table)
datDT <- data.table(dat, key = "key")
datDT
#     key       rate v1 v2 v3 x1 x2 x3
#  1:   a 0.26550866 10 17 28  3  9 15
#  2:   a 0.57285336  7 16 14  2  7 13
#  3:   a 0.20168193  3 11 20  4  9 14
#  4:   a 0.94467527  1  1 15  4  6 13
#  5:   a 0.62911404  9 15  3  2 10 12
#  6:   a 0.20597457  5 10 11  2 10 13
#  7:   a 0.68702285  5  9 11  4  7 11
#  8:   a 0.76984142  9  2 15  4  6 15
#  9:   a 0.71761851  8  7 26  3  9 13
# 10:   a 0.38003518  8 14 24  5  8 15
# 11:   b 0.37212390  3 13  9  4  7 13
# 12:   b 0.90820779  2 12 10  2 10 11
# 13:   b 0.89838968  4 16  8  2  7 13
# 14:   b 0.66079779  4 10 23  1  8 12
# 15:   b 0.06178627  4 14 27  1  8 13
# 16:   b 0.17655675  6 18 26  1  9 11
# 17:   b 0.38410372  2  5 11  5  8 14
# 18:   b 0.49769924  7  2 27  4  6 13
# 19:   b 0.99190609  2 11 12  3  6 13
# 20:   b 0.77744522  5  9 29  4  9 13 
```

二、聚合：

```
datDT[, lapply(.SD, function(x, y = rate) sum(y * x)/sum(y)), by = "key"]
#    key      rate       v1        v2       v3       x1       x2       x3
# 1:   a 0.6501303 6.335976  8.634691 15.75915 3.363832 7.658762 13.19152
# 2:   b 0.7375793 3.595585 10.749705 16.26582 2.792390 7.741787 12.57301 
```

如果您有一个非常大的数据集，您可能想要进行`data.table`一般探索。

* * *

对于它的价值，我在基础 R 中也取得了成功，但我不确定这会有多有效，特别是因为转置等等。

```
t(sapply(split(dat, dat[1]), 
         function(x, y = 3:ncol(dat)) {
           V1 <- vector()
           for (i in 1:length(y)) {
             V1[i] <- sum(x[2] * x[y[i]])/sum(x[2])
           }
           V1
         }))
#       [,1]      [,2]     [,3]     [,4]     [,5]     [,6]
# a 6.335976  8.634691 15.75915 3.363832 7.658762 13.19152
# b 3.595585 10.749705 16.26582 2.792390 7.741787 12.57301 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T10:07:34.903

一种解决方案是`ddply`从`plyr`包中使用：

```
res = ddply(dat, .(key), summarise, result = sum(v1 * rate) / sum(rate))
> res
  key   result
1   a 3.333333
2   b 0.600000 
```

如果您想将此应用于所有`v`列，我建议您首先稍微更改您的数据结构：

```
dat = melt(dat, id.vars = c("key", "rate"))
> dat
  key rate variable value
1   a  0.5       v1     4
2   b  0.4       v1     0
3   a  1.0       v1     3
4   b  0.6       v1     1
5   a  0.5       v2     2
6   b  0.4       v2     0
7   a  1.0       v2     9
8   b  0.6       v2     4 
```

然后`ddply`再次使用：

```
res = ddply(dat, .(key, variable), summarise, result = sum(value * rate) / sum(rate))
> res
  key variable   result
1   a       v1 3.333333
2   a       v2 6.666667
3   b       v1 0.600000
4   b       v2 2.400000 
```

...或者您是否需要标准的 R 解决方案，您可以使用`by`：

```
res = by(dat, list(dat$key), function(x) sum(x$v1 * x$rate) / sum(x$rate))
> res
: a
[1] 3.333333
------------------------------------------------------------ 
: b
[1] 0.6 
```

# xcode - 方案脚本与构建阶段脚本

> ID：13065905
> 
> 赞同：16
> 
> 时间：2012-10-25T09:47:56.670
> 
> 标签：xcode

在我进行构建后，我想将一些文件复制到我的 Xcode 项目中。

我发现我可以做到这一点

1.  在具有自定义构建步骤的“构建阶段”中。

2.  我还可以在 Scheme 编辑器中执行不同“任务”之前和之后的脚本：

    *   **构建**（这是我可以添加脚本的地方）
    *   跑
    *   测试
    *   轮廓
    *   分析
    *   档案

我不完全理解这两种方法之间的差异/可能的影响，我想知道何时选择任何一种方法。感谢您的澄清。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T10:19:20.223

> 在我进行构建后，我想将一些文件复制到我的 Xcode 项目中。

我假设您想将文件复制到您的*构建产品*，而不是 Xcode 项目。

方案和构建阶段脚本之间存在一些细微差别。这里是其中的一些：

*   方案脚本是方案的一部分，因此与其他开发人员共享更具可配置性。另一方面，构建阶段脚本是目标的一部分，不能简单地通过选择其他方案来跳过。
*   方案脚本可以在依赖检查之前运行。因此，您可以使用它们来修改源文件并获得最新的结果。这对于构建阶段脚本是不可能的。
*   环境变量中传递给脚本的信息略有不同。根据您需要的信息，您有时必须选择正确的脚本类型。
*   仅当构建过程成功直到它们进入目标时，构建阶段脚本才会有条件地运行。
*   构建阶段脚本可以配置为仅在输入文件更改时运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:55:19.133

两者之间没有太大区别，但是您可以更好地控制构建顺序中构建阶段脚本的运行位置，因此这是可取的（例如，您可以修改已被标准 Xcode 构建阶段复制的文件）。

我自己总是使用 Build Phases 脚本，从未使用过 Scheme 脚本。它们更明显，更易于管理。

# tsql - Nhibernate Expression.In 限制

> ID：13065909
> 
> 赞同：0
> 
> 时间：2012-10-25T09:48:33.373
> 
> 标签：tsql, nhibernate, nhibernate-criteria

我正在查询 Nhibernate 条件查询，其中 In 子句的值超过 2100 个。我做了类似 Session.CreateCriteria(typeof()).Add(Expression.In("fieldName",arrayValue)) 之类的事情，其中​​ arrayValue 包含超过 2100 个值。我遇到错误 发生异常：UnknownError NHibernate.ADOException: could not execute query ..then the query with more then 3000 values in array. 在谷歌的帮助下，我们发现 Sql 中的 IN 子句仅支持 2100 个值。有没有人之前遇到过类似的问题？我们不想更改查询，因为它是以某种通用方式编写的，而不是定制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:48:44.157

You could split the array into multiple batches, query multiple times, and then combine the result.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:28:39.107

这是 SQL Server 的限制。我不建议这样做，但如果你坚持，你可以通过创建一个表值 sql 函数（参见[http://www.dzone.com/snippets/function-getting-comma](http://www.dzone.com/snippets/function-getting-comma)）来解决它用逗号（或任何你想要的分隔符）字符串并将值作为表返回，然后将所有 ID 作为（例如）1 个参数中的逗号分隔列表传递，并在条件查询中使用 SQLCriterion。

例如：

```
 criteria.Add(
      new SQLCriterion("{alias}.ID IN (SELECT element FROM dbo.GetCSVValues(?))", 
          new[]{csvListOfIds}, 
          new[]{NHibernateUtil.String})) 
```

# jsf - JSF Richfaces 4.0 与 MAVEN

> ID：13065911
> 
> 赞同：0
> 
> 时间：2012-10-25T09:48:49.883
> 
> 标签：jsf, maven, richfaces

我使用以下脚本创建了一个 jsf+richfaces 项目

```
 mvn archetype:generate \
       -DarchetypeGroupId=org.richfaces.archetypes \
       -DarchetypeArtifactId=richfaces-archetype-simpleapp \
       -DarchetypeVersion=4.0.0.Final \
       -DgroupId=com.confiz \
       -DartifactId=coinfling \
       -Dversion=1 
```

这将创建一个示例 jsf+richfaces 项目。然后我使用 mvn eclipse:eclipse 创建一个 eclipse 项目。当我将项目导入 Eclipse 时，它​​给出了一个类路径错误，我的所有richfaces jar 文件都丢失了？我以为 maven 会下载 jar 文件并将它们放入我的项目中。这是从 mvn eclipse:eclipse 阶段生成的类路径文件

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
  <classpathentry kind="src" path="src/main/java" including="**/*.java"/>
  <classpathentry kind="output" path="target/classes"/>
  <classpathentry kind="var" path="M2_REPO/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar"/>
  <classpathentry kind="var" path="M2_REPO/javax/servlet/jsp/jsp-api/2.1/jsp-api-2.1.jar"/>
  <classpathentry kind="var" path="M2_REPO/javax/el/el-api/1.0/el-api-1.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/javax/servlet/jstl/1.2/jstl-1.2.jar"/>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
  <classpathentry kind="var" path="M2_REPO/org/richfaces/ui/richfaces-components-ui/4.0.0.Final/richfaces-components-ui-4.0.0.Final.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/richfaces/ui/richfaces-components-api/4.0.0.Final/richfaces-components-api-4.0.0.Final.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/richfaces/core/richfaces-core-api/4.0.0.Final/richfaces-core-api-4.0.0.Final.jar"/>
  <classpathentry kind="var" path="M2_REPO/com/google/guava/guava/r08/guava-r08.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/richfaces/core/richfaces-core-impl/4.0.0.Final/richfaces-core-impl-4.0.0.Final.jar"/>
  <classpathentry kind="var" path="M2_REPO/net/sourceforge/cssparser/cssparser/0.9.5/cssparser-0.9.5.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/w3c/css/sac/1.3/sac-1.3.jar"/>
  <classpathentry kind="var" path="M2_REPO/com/sun/faces/jsf-api/2.0.4-b09/jsf-api-2.0.4-b09.jar"/>
  <classpathentry kind="var" path="M2_REPO/com/sun/faces/jsf-impl/2.0.4-b09/jsf-impl-2.0.4-b09.jar"/>
  <classpathentry kind="var" path="M2_REPO/net/sf/ehcache/ehcache/1.6.0/ehcache-1.6.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/testng/testng/5.10/testng-5.10-jdk15.jar"/>
  <classpathentry kind="var" path="M2_REPO/junit/junit/3.8.1/junit-3.8.1.jar"/>
</classpath> 
```

我究竟做错了什么 ？这个 M2 回购路径是什么？我现在该怎么办 ？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:23:38.590

看起来您需要根据 [http://maven.apache.org/plugins/maven-eclipse-plugin/配置工作区以将 M2_REPO 添加到类路径](http://maven.apache.org/plugins/maven-eclipse-plugin/)

“eclipse:configure-workspace 用于将类路径变量 M2_REPO 添加到 Eclipse，它指向您的本地存储库，并且可以选择配置其他工作空间功能。”

你能看看下面的链接是否对你有帮助： [http ://www.mkyong.com/maven/how-to-convert-maven-java-project-to-support-eclipse-ide/](http://www.mkyong.com/maven/how-to-convert-maven-java-project-to-support-eclipse-ide/)

另一个选项是安装 m2eclipse 插件。将您的项目作为 Maven 现有项目导入。我认为即使不运行 mvn eclipse:eclipse 也应该可以解决问题。由于您已经运行它，您可以删除类路径文件并继续将项目导入为 maven 现有项目。这也应该生成类路径文件。

这里有一些不同之处： http: [//docs.codehaus.org/display/MAVENUSER/Eclipse+Integration](http://docs.codehaus.org/display/MAVENUSER/Eclipse+Integration)

希望能帮助到你..

# php - Laravel 身份验证过滤器和注销

> ID：13065914
> 
> 赞同：1
> 
> 时间：2012-10-25T09:48:57.077
> 
> 标签：php, authentication, filter, logout, laravel

我正在用 laravel 开发一个网站。我遇到了身份验证过滤器和注销方法的问题。

在我的家庭控制器中，我想为以下一些方法应用 auth 过滤器。

```
public function __construct()
{
     parent::__construct(); 
     $this->filter('before',array('auth'))->except(array('index','view'));
} 
```

我有 action_logout 如下。

```
public function action_logout() 
{
    Auth::logout();
    return Redirect::to("/home/index");
} 
```

当我登录并尝试注销时，我无法访问注销操作。我尝试从动作内部呼应某些东西，但没有奏效。

改成这个..

```
$this->filter('before',array('auth'))->except(array('index','view','logout')); 
```

作品。从逻辑上讲，我应该只有在我登录后才能注销。但是在登录后应用上面的过滤器无法访问注销操作。帮助！。

# mercurial - Mercurial：如何创建计划外分支

> ID：13065917
> 
> 赞同：3
> 
> 时间：2012-10-25T09:49:04.097
> 
> 标签：mercurial, branch, commit

我的用例是这样的：

我正在开发一项新功能，并且对该功能进行了多次提交。由于它是一个次要功能，我什至没有考虑在功能分支中执行该功能。

然而。现在我的老板过来告诉我在我正在处理的同一分支上修复一个错误（默认）。

要解决这个问题，我想为我的功能创建一个功能分支，请将我所有现有的（未推送的）提交推送到该分支中。

所以我想在我第一次提交之前创建一个分支，然后以某种方式将我所有的提交移到那个分支。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:08:08.620

[对于这种情况，您可以通过变基](http://mercurial.selenic.com/wiki/RebaseExtension)（可能需要在您的配置中启用）来修复它。

在您的分支上，更新到要移动的更改集之前的修订：

```
hg up -r<revison> 
```

这假设需要移动连续的修订。

创建一个新分支：

```
hg branch "TempWork" 
```

将一个虚拟提交放到它上面以获得新的修订：

```
hg commit -m"New Branch" 
```

然后从要移动的第一个更改集执行变基（它会自动移动后代）并将新分支修订指定为目标：

```
hg rebase -s<base revision> -d<new branch revision> 
```

然后更新回您的主线分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:19:13.090

有两种方法可以解决这个问题，具体取决于您的偏好：

1.  在一个新的存储库中。

    为您的存储库创建一个新的克隆，并在那里进行您需要的错误修复。完成后将其推送到主存储库，并从原始存储库中的中断处继续。像往常一样拉并合并以获取新的更改。

2.  在现有存储库中。

    在您的本地更改之前更新到变更集，然后开始在那里修复和提交。这将创建一个新的匿名分支。完成后，使用 推送`push -r .`，这只会推送包含在工作副本中的更改。在此之后，与您的原始分支 ( ) 合并`hg merge`并从您离开的地方继续。

    请注意，`hg bookmark`如果您不喜欢不标记更改，您可以为功能分支添加书签。此外，您还可以使用`hg heads`.

就个人而言，我更喜欢在新的干净克隆中工作，因为您无需担心分支以及在何处留下未提交的更改。但是，如果您的项目设置很复杂，那么重用现有的 repo 可能会更方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T14:57:03.390

**第四种方法：使用 mq-patches**

*   您必须为 repo 启用并启动 mq 扩展

在修补程序时刻你

*   将功能提交转换为一组 mq 补丁 ( `hg qimport`)
*   取消应用 set ( `hg qpop -a`)中的所有补丁
*   代码修补程序，提交
*   ...
*   在干净的代码库上完成并测试修补程序
*   应用 set ( `hg qpush -a`) 中的所有补丁，修复可能的冲突
*   将补丁转换回变更集 ( `hg qfinish`)

# r - 在 R 中处理长格式数据

> ID：13065918
> 
> 赞同：0
> 
> 时间：2012-10-25T09:49:09.337
> 
> 标签：r, data.table, plyr, mean

我创建了一个具有 5 个变量（公司名称、关键项目、原产国、年份和价值）的长格式数据框我想要做的是创建一个表格，其中包含每年一个关键项目的值的平均值。这是我到目前为止所管理的：

```
for(i in dat$Year) {
  dat[dat$KeyItem == "Total Assets" & dat$Year == i, ]
  FUN1 <- mean(dat$Value, na.rm = TRUE)

} 
```

我在 R 方面几乎没有任何经验，如果这个问题太简单了，我很抱歉。预先感谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:52:42.910

由于您不共享数据，因此很难准确判断您想要什么。可能，您想`ddply`从`plyr`包中使用：

```
mean_values = ddply(dat, .(key_item, year), summarise, mn_value = mean(Value)) 
```

如果您的数据集变得非常大，您可能会选择`data.table`自学在这些情况下速度非常快的软件包。对于中型数据集，`ddply`可能也较慢，但足够快。

# x86 - 包含 x86 ARM x64 二进制文件的单个 NuGet 包

> ID：13065923
> 
> 赞同：9
> 
> 时间：2012-10-25T09:49:35.053
> 
> 标签：x86, windows-runtime, nuget, windows-phone

有没有办法制作一个包含针对 x86 ARM x64 等的二进制文件的 NuGet 包，以便 VisStudio/MSBuild 为每个给定的构建配置选择正确的二进制文件？

我只能看到对 os 目标的支持——即 Windows、Windows8、win、win8、wp、wp7、WindowsPhone、WindowsPhone7、silverilght4-wp71、wp71、WindowsPhone71 等。

你最终会得到一个这样的文件夹结构：

```
\content
    \net11
    \MyContent.txt
    \net20
        \MyContent20.txt
    \net40
    \sl40
        \MySilverlightContent.html

\tools
    init.ps1
    \net40
        install.ps1
        uninstall.ps1
    \sl40
        install.ps1
        uninstall.ps1 
```

我真的需要做一些 powershell-script 或 pre-build 步骤来完成这个吗？开箱即用的 NuGet 似乎应该支持这一点？

如果我必须使用脚本 - 有人有很好的示例代码吗？一个 ps1 脚本或某种构建钩子？

我还发现了这个主题的工作项：http: [//nuget.codeplex.com/workitem/679](http://nuget.codeplex.com/workitem/679)。但它自 2011 年 6 月以来一直存在，最后一次评论是在 7 月。

有任何想法吗？

非常感谢，乔恩

资料来源：

*   [http://docs.nuget.org/docs/release-notes/nuget-2.1](http://docs.nuget.org/docs/release-notes/nuget-2.1)
*   [http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Framework_Names](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Framework_Names)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T17:11:48.590

据我所知，这仍然不受支持。

这个 SO question 有两个适合您的答案，一个是用一个包解决这个问题，另一个是一个简单的多包解决方案：

[我应该如何创建或上传 32 位和 64 位 NuGet 包？](https://stackoverflow.com/q/7769580/1636560)

# variables - SSIS - 如何在脚本任务中访问系统变量

> ID：13065925
> 
> 赞同：3
> 
> 时间：2012-10-25T09:49:38.977
> 
> 标签：variables, ssis

谁能建议如何访问/读取脚本组件中的系统变量（例如，我想从脚本组件中的这个变量 System::PackageName 打包名称）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T10:01:09.740

在脚本任务编辑器中，在 ReadOnlyVariables 字段中提供要访问的变量名称（例如 System::PackageName）。

从脚本中，在 C# 示例中，使用以下命令：

```
public void Main()
    {
        bool fireAgain = true;

        // Read the variable
        String PackageName = (String)Dts.Variables["System::PackageName"].Value;

        // Post the value to progress results
        Dts.Events.FireInformation(3, "Package name:", PackageName, "", 0, ref fireAgain);

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

结果：

![包名为包](../Images/d57970bd7c236b8a0991d2f2e8e680aa.png)

# osgi - OSGi 包加载：标准 java 类的 NoClassDefFoundError

> ID：13065927
> 
> 赞同：0
> 
> 时间：2012-10-25T09:49:41.693
> 
> 标签：osgi, noclassdeffounderror, eclipse-virgo, idempiere

我正在尝试在处女座上运行 iDempiere。我加载了多个包没有问题。和加载正常`org.adempiere.server`。`org.idempiere.webservices`但是在加载`org.adempiere.ui.zk`捆绑包时，我`NoClassDefFoundError`在`org.adempiere.base`捆绑包中得到了一个。基本包在加载时没有引起任何问题`org.adempiere.server`，它也需要它。

奇怪的是，`javax.print.attribute.standard.MediaSize$NA`找不到的类是标准的Java类。

当执行时`clexport`，该类被导出。`org.eclipse.osgi` 当执行时`clload`，该类可以被其他包加载。

错误堆栈：

```
[2012-10-24 20:34:23.592] INFO  fs-watcher                   o.e.virgo.kernel.deployer.hot.HotDeploymentFileSystemListener     ApplicationConditionallyDeploying path 'D:\VIRGO-~1.REL\pickup\org.adempiere.ui.zk_1.0.0.v20121024-1809\'. 
[2012-10-24 20:34:23.777] INFO  start-signalling-1           org.compiere.web.AdempiereMonitorFilter                            
[2012-10-24 20:34:23.809] ERROR start-signalling-1           o.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/]   StandardWrapper.Throwable java.lang.NoClassDefFoundError: javax/print/attribute/standard/MediaSize$NA
    at org.compiere.util.Language.<clinit>(Language.java:101)
    at org.compiere.util.Ini.<clinit>(Ini.java:85)
    at org.compiere.util.WebEnv.initWeb(WebEnv.java:162)
    at org.compiere.util.WebEnv.initWeb(WebEnv.java:129)
    at org.compiere.web.AdempiereMonitor.init(AdempiereMonitor.java:1049)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.eclipse.gemini.web.tomcat.internal.TomcatServletContainer.startWebApplication(TomcatServletContainer.java:125)
    at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:95)
    at org.eclipse.virgo.web.core.internal.WebBundleLifecycleListener.onStarted(WebBundleLifecycleListener.java:122)
    at org.eclipse.virgo.kernel.install.artifact.internal.StandardArtifactStateMonitor.onStarted(StandardArtifactStateMonitor.java:271)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.asyncStartSucceeded(AbstractInstallArtifact.java:319)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.access$0(AbstractInstallArtifact.java:316)
    at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact$StateMonitorSignal.signalSuccessfulCompletion(AbstractInstallArtifact.java:252)
    at org.eclipse.virgo.kernel.core.internal.BundleStartTracker$1.run(BundleStartTracker.java:140)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.eclipse.virgo.kernel.osgi.framework.ExtendedClassNotFoundException: javax.print.attribute.standard.MediaSize$NA in KernelBundleClassLoader: [bundle=org.adempiere.base_1.0.0.v20121024-1809]
    at org.eclipse.virgo.kernel.userregion.internal.equinox.KernelBundleClassLoader.loadClass(KernelBundleClassLoader.java:139)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 25 common frames omitted
Caused by: java.lang.ClassNotFoundException: javax.print.attribute.standard.MediaSize$NA
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at org.eclipse.virgo.kernel.userregion.internal.equinox.KernelBundleClassLoader.loadClass(KernelBundleClassLoader.java:135)
    ... 26 common frames omitted 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:01:05.340

我看到一个：

```
Caused by: java.lang.ClassNotFoundException: javax.print.attribute.standard.MediaSize$NA 
```

这是 CNFE 而不是 NoClassDefFoundError

在模块“org.adempiere.base_1.0.0.v20121024-1809”中，您需要：

```
Import-Package: javax.print.attribute.standard 
```

FWIW 这是为该模块添加/合并到 MANIFEST.MF 中的条目。

# scala - 解释一些使用递归和柯里化的代码

> ID：13065928
> 
> 赞同：0
> 
> 时间：2012-10-25T09:49:42.947
> 
> 标签：scala

此代码中使用的方法产品如何？

这个函数的结果是 3600

所以 product 接受一个函数： f ， f 接受一个 Int 参数，该参数返回一个 Int 参数。

但是 (a: Int, b: Int) 不是表示返回了一个接受两个 Int 参数的函数吗？

我对这一行发生的事情感到困惑： f(a) * product(f)(a + 1, b)

功能齐全：

```
 def product(f: Int => Int)(a: Int, b: Int): Int =
    if(a > b) 1
    else {
     f(a) * product(f)(a + 1, b)
    }                                        
  product(x => x * x)(3 , 5) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:03:09.180

在 Scala 中，方法可以有多个参数列表。在此示例中，该方法`product`有两个参数列表：`(f: Int => Int)`和`(a: Int, b: Int)`。

第一个参数列表包含一个名为的参数`f`，该参数属于类型`Int => Int`（一个接受 an`Int`并返回 an的函数`Int`）。

第二个参数列表包含两个名为`a`和的参数`b`都是 type `Int`。

表达式`product(f)(a + 1, b)`并`product(x => x * x)(3 , 5)`简单地使用所有三个参数调用方法。

这样做的好处是你可以`product`只用第一个参数列表“调用”。然后你会得到一个函数，你可以通过提供第二个参数列表来调用它。例如：

```
val fn = product(x => x * x)  // only the first parameter list is applied
fn(3, 5)                 // fn is a function which you can pass the second list 
```

`product`仅使用第一个参数列表的“调用”称为**currying**。

# regex - htaccess rewriterule 将每个页面重定向到单个页面

> ID：13065933
> 
> 赞同：1
> 
> 时间：2012-10-25T09:49:48.430
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我想将每个 url 重定向到一个 php 文件，该文件将充当调度程序，该调度程序将根据 url 从数据库中提取内容。我不确定这有什么问题。请任何指点。

```
<IfModule mod_rewrite.c>
AddDefaultCharset utf-8

rewriteCond %{REQUEST_URI} !(^/admin/) 
rewriteCond %{REQUEST_URI} !(\.css$) 
rewriteCond %{REQUEST_URI} !(/robots\.txt$) 
rewriteCond %{REQUEST_URI} !(\.png$) 
rewriteCond %{REQUEST_URI} !(\.jpg$) 
rewriteCond %{REQUEST_URI} !(\.jpeg$) 
rewriteCond %{REQUEST_URI} !(\.pdf$) 
rewriteCond %{REQUEST_URI} !(\.gif$) 
rewriteCond %{REQUEST_URI} !(\.GIF$) 
rewriteCond %{REQUEST_URI} !(\.xml$) 
rewriteCond %{REQUEST_URI} !(\.js$) 
rewriteCond %{REQUEST_URI} !(\.ico$) 

RewriteRule . pageDispatcher.php   [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:54:10.473

将您的代码更改为：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (?!^admin/)^.*$ pageDispatcher.php [L] 
```

# json - 在php中合并json对象

> ID：13065937
> 
> 赞同：0
> 
> 时间：2012-10-25T09:49:54.337
> 
> 标签：json

我如何在 php 中合并两个 json 对象，其中一个数组是这样的

```
$arr_data = array('id'=>$country_id);
    $arr = json_encode($arr_data); 
```

另一个是这样的：

```
$arr_places = json_encode($xmlDoc); 
```

现在我想将它们合并到一个 json 对象中。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:54:11.630

这在很大程度上取决于您所说的“合并”是什么意思。只是一个简单的合并，或者你需要消除重复的属性？...等等。

最简单的方法就像 xdazz 提到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T12:06:37.940

这里的大多数答案都假设这是一个面对两个数组而不是对象的情况。OP 询问是否将两个对象合并到一个 JSON 中。

虽然对此有很多解决方案，但我有一个更进一步的技巧，通过将对象转换为 JSON 字符串，然后返回到关联数组，然后返回到 JSON，实际上将对象合并为单个 JSON 字符串。

可能是效率失败，但可以完成工作:-)这是一个代码示例：

```
 /**
     * Merges two objects into a single JSON structure
     * @param object $obj1
     * @param object $obj2
     * @return string the resuling JSON string
     */
    function mergeToJSON($obj1, $obj2) {
        $json1 = json_encode($obj1);
        $json2 = json_encode($obj2);
        if ($json1 === FALSE OR $json2 === FALSE) {
            return "";
        }
        $array1 = json_decode($json1, TRUE);
        $array2 = json_decode($json2, TRUE);
        $data = array_merge($array1, $array2);
        return json_encode($data);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T08:36:41.480

上述解决方案不适用于 PHP 版本 5.5.12

简而言之，我想要附加到 json 字符串并从中形成一个 json 字符串，如下所述：

```
$str1 = {
    timestamp: "2015-04-03T08:08:51+00:00",
    user: "admin",
    src_ip: "127.0.0.1"
}

$str2 =  {
    timestamp: "2015-04-03T08:08:51+00:00",
    user: "Peter_x",
    src_ip: "127.0.0.1"
}

$value1 = json_decode ($str1, TRUE);
$value2 = json_decode ($str2, TRUE);
$combined = array_merge ($value1, $value2);
$combined_json = json_encode ($combined);
file_put_contents("c:\outputfile", $combined_json, FILE_APPEND); 
```

结果是：

```
{
    "timestamp": "2015-04-03T08:08:51+00:00",
    "user": "admin",
    "src_ip": "127.0.0.1",
}
{
    "timestamp": "2015-04-03T08:08:51+00:00",
    "user": "Peter_x",
    "src_ip": "127.0.0.1",
} 
```

相反，我期望一个单一的 json 字符串。Firefox 无法解析它。令我惊讶的是，在结果字符串中，键在引号内。（例如：） `"timestamp"`。

谁能告诉我代码有什么问题或如何将两个 json 字符串合并为一个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:52:49.620

所以你应该先合并数组，然后使用`json_encode`.

```
$json = json_encode(array_merge($arr_data, $xmlDoc)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T09:59:25.980

合并结果然后编码。

```
$arr_data = array('id'=>$country_id);
$res = array_merge( $arr_data, $xmlDoc );
$merged = json_encode($res); 
```

# sql - postgres 检查*有条件地*限制重复项吗？

> ID：13065940
> 
> 赞同：2
> 
> 时间：2012-10-25T09:50:06.110
> 
> 标签：sql, database, postgresql, duplicates

我必须实施一项规则，即只有一个具有给定 ID 的“组”一次可以具有“进行中”或“问题”状态。是否可以在 Postgres 检查中表示这一点，还是我必须求助于应用程序中的逻辑？

例如：

```
INSERT INTO group (group_id, status) VALUES (1, 'In Progress'); -- okay
INSERT INTO group (group_id, status) VALUES (2, 'Problem'); -- okay
INSERT INTO group (group_id, status) VALUES (3, 'In Progress'); -- okay
INSERT INTO group (group_id, status) VALUES (4, 'Problem'); -- okay
INSERT INTO group (group_id, status) VALUES (1, 'Something else'); -- okay
INSERT INTO group (group_id, status) VALUES (2, 'Foo bar'); -- okay

INSERT INTO group (group_id, status) VALUES (1, 'In Progress'); -- should fail
INSERT INTO group (group_id, status) VALUES (1, 'Problem'); -- should fail
INSERT INTO group (group_id, status) VALUES (2, 'In Progress'); -- should fail
INSERT INTO group (group_id, status) VALUES (2, 'Problem'); -- should fail 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:02:55.320

我认为您需要一个部分唯一索引。

```
CREATE UNIQUE INDEX group_status_unq_idx 
ON "group"(group_id, status) WHERE (status IN ('In Progress', 'Problem')); 
```

但是，从您的描述中我不清楚为什么第二个预期失败会失败。你想*只允许一个`In Progress`或`Problem`任何给定`group_id`*的？如果是这样，您可以编写如下内容：

```
CREATE UNIQUE INDEX group_status_unq_idx
ON "group"(group_id) WHERE (status IN ('In Progress', 'Problem')); 
```

`status`...从部分唯一索引中省略并仅将其用于谓词。请参阅[此 SQLFiddle](http://sqlfiddle.com/#!12/03606/2)。

请注意，这不能表示为`UNIQUE`约束，因为唯一约束不采用谓词。PostgreSQL 唯一约束是*使用*（非部分）`UNIQUE`索引实现的，但它也会创建单纯的索引创建不会创建的元数据条目。部分唯一索引的工作方式类似于带有谓词的唯一约束，但无法通过诸如`information_schema`约束信息之类的元数据发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:57:46.667

如果我理解正确：

```
create unique index group_restriction_index on group
(status) where status in ('In Progress', 'Problem') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:03:01.080

您可以对多个列进行唯一约束：

```
CREATE TABLE group (
    group_id integer,
    status char(100),
    UNIQUE (group_id, status)
); 
```

（来自[Postgresql 文档](http://www.postgresql.org/docs/8.1/static/ddl-constraints.html)）。

但是，这将防止任何状态的重复，而不仅仅是`'In Progress'`and `'Problem'`。我不确定这是否是你想要的。

# actionscript-3 - 在动作脚本 3 中识别后代

> ID：13065942
> 
> 赞同：0
> 
> 时间：2012-10-25T09:50:07.337
> 
> 标签：actionscript-3, flash, button, actionscript, event-handling

我正在闪存中创建一个音序器。我有 8 个符号轨道实例，每个实例都有一个播放按钮。我想使用单个事件侦听器来处理自己播放每个样本。我遇到的问题是我不能给每个按钮一个唯一的实例名称，因为它位于轨道影片剪辑中。这是我的代码：

```
masterContainer.addEventListener(MouseEvent.CLICK, clickHandler);
function clickHandler(event:MouseEvent):void{
if(event.target.name == "masterPlay"){
    trace("master play was clicked");
}
if(event.target.name == "silglePlay1"){
    trace("track 1 play button");
}
if(event.target.name == "silglePlay2"){
    trace("track 2 play button");
}
} 
```

所有轨道都在主容器和主控件内。单曲播放按钮位于曲目符号旁边。不确定代码是否有帮助，但有没有办法在不创建 8 个单独的轨道符号的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:55:04.093

处理轨道影片剪辑中的单击事件，然后在事件处理程序中调度您自己的带有冒泡的自定义事件，您可以处理该事件并将 event.target 与您的轨道实例名称进行比较，该名称可以是唯一的。换句话说，您的轨道组件应该是自给自足的并封装自己的逻辑，在这种情况下是播放按钮点击处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:00:16.140

假设`track1`, `track2`, ...`track8`是您拥有的曲目，并且所有曲目中的播放按钮是`playBtn`. 然后，您也可以为所有人创建一个单一的侦听器，而无需在轨道中使用不同的播放按钮名称。`masterContainer`（我像你一样添加了监听器）

```
masterContainer.addEventListener(MouseEvent.CLICK, clickHandler);

function clickHandler(event:MouseEvent):void{
    var tapped = e.target;

    if(tapped.name == "masterPlay"){
        trace("master play was clicked");
    }

    if(tapped.name == "playBtn"){
        switch(tapped.parent.name){
            case "track1":
                trace("track 1 play button");
                break;
            case "track2":
                trace("track 2 play button");
                break;
            case "track3":
                trace("track 3 play button");
                break;
            case "track4":
                trace("track 4 play button");
                break;
            case "track5":
                trace("track 5 play button");
                break;
            case "track6":
                trace("track 6 play button");
                break;
            case "track7":
                trace("track 7 play button");
                break;
            case "track8":
                trace("track 8 play button");
                break;
        }
    }
} 
```

我想这会对你有所帮助。

# task - 基于任务的编程：#pragma omp task 与 #pragma omp parallel for

> ID：13065943
> 
> 赞同：16
> 
> 时间：2012-10-25T09:50:09.187
> 
> 标签：task, openmp

考虑：

```
 void saxpy_worksharing(float* x, float* y, float a, int N) {
      #pragma omp parallel for
      for (int i = 0; i < N; i++) {
         y[i] = y[i]+a*x[i];
      }
    } 
```

和

```
 void saxpy_tasks(float* x, float* y, float a, int N) {
      #pragma omp parallel
      {
         for (int i = 0; i < N; i++) {
         #pragma omp task
         {
           y[i] = y[i]+a*x[i];
         }
      }
   } 
```

使用任务和 omp 并行指令有什么区别？为什么我们可以用任务编写递归算法，例如归并排序，但不能用工作共享？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-25T12:23:51.647

我建议您查看劳伦斯利弗莫尔国家实验室的 OpenMP 教程，可[在此处](https://computing.llnl.gov/tutorials/openMP/)获得。

您的特定示例不应**使用**OpenMP 任务来实现。第二个代码创建`N`线程任务数的倍数（因为在缺少的代码中存在错误`}`；我稍后会回来），每个任务只执行一个非常简单的计算。[正如您在我对这个问题](https://stackoverflow.com/questions/13034718/producer-consumer-using-openmp-tasks)的回答中所看到的那样，任务的开销将是巨大的。除了第二个代码在概念上是错误的。由于没有工作共享指令，所有线程将执行循环的所有迭代，而不是`N`任务，`N`乘以线程任务将被创建的数量。它应该以下列方式之一重写：

单任务生产者 - 常见模式，NUMA 不友好：

```
void saxpy_tasks(float* x, float* y, float a, int N) {
   #pragma omp parallel
   {
      #pragma omp single
      {
         for (int i = 0; i < N; i++)
            #pragma omp task
            {
               y[i] = y[i]+a*x[i];
            }
      }
   }
} 
```

该`single`指令将使循环仅在单个线程内运行。`single`所有其他线程将跳过它并在构造结束时遇到隐式障碍。由于屏障包含隐式任务调度点，等待线程将在任务可用时立即开始处理任务。

并行任务生成器 - 对 NUMA 更友好：

```
void saxpy_tasks(float* x, float* y, float a, int N) {
   #pragma omp parallel
   {
      #pragma omp for
      for (int i = 0; i < N; i++)
         #pragma omp task
         {
            y[i] = y[i]+a*x[i];
         }
   }
} 
```

在这种情况下，任务创建循环将在线程之间共享。

如果您不知道 NUMA 是什么，请忽略有关 NUMA 友好性的评论。

# node.js - nodejs：中间件应该从堆栈中删除自己

> ID：13065944
> 
> 赞同：3
> 
> 时间：2012-10-25T09:50:09.623
> 
> 标签：node.js, middleware

我有一个中间件，它运行一系列动作一次，然后当新请求到达时我不想再使用它了。有没有办法让我的中间件从堆栈中删除自己？

谢谢，李

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:33:38.773

就在这里。考虑一下：

```
var app = require('express')();
function myHandler(req, res, next) {
  //do something usefull

  //locate this handler
  var handlerIndex = -1;
  for(var i =0; i < app.stack.length; i++) {
    if (app.stack[i].handle === myHandler) {
      handlerIndex = i;
    }
  }
 if (handlerIndex > -1) {
    app.stack.splice(handlerIndex, 1);
 }
 next();
});

app.use("/api", myHandler); 
```

把它当作符号代码，我没有机会测试它，但这个概念就在那里......

# arm - 在 OMAP 4460 上进行多个 DMA 传输时 CPU 是否被阻塞？

> ID：13065947
> 
> 赞同：3
> 
> 时间：2012-10-25T09:50:24.580
> 
> 标签：arm, embedded-linux, dma, omap, pandaboard

我想知道 DMA 在 Pandaboard 中的工作原理。我已经阅读了 Pandaboard 中使用的 OMPA4460 的 TRM，DMA 系统一次可以管理总共 128 个请求，最多 32 个逻辑通道和 4 个中断请求。当 DMA 正在进行时，CPU 是否有机会一次执行另一个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:49:22.703

> 但我想知道当 DMA 工作时，熊猫板的 CPU 是否有机会一次执行另一项任务？？？

DMA 的目的是专门在 I/O 设备和主存储器之间传输数据。按照设计，这是为了减轻 CPU 执行这种传输的工作，这就是所谓的*编程 I/O*。一旦 CPU 设置了 DMA 控制器来执行此数据传输，CPU 就可以自由地执行用于任何其他目的的指令。所以答案是“是的，100% 的机会”。

由于 PandaBoard 的 SoC 具有多通道 DMA 控制器，因此可以同时执行多个 I/O 操作。对性能和吞吐量的限制是内存带宽。请注意，由于指令和数据缓存，现代 CPU 倾向于使用更少的内存带宽（或以更突发的方式使用内存）。通常，当 CPU 和 DMA 控制器都争用内存时，CPU 会获得对内存的优先访问权。

请注意，这些特性都不是 PandaBoard 独有的。

# php - 我如何获得与 s.server="" 一起使用的设备名称？网站催化剂？

> ID：13065950
> 
> 赞同：0
> 
> 时间：2012-10-25T09:50:33.783
> 
> 标签：php, jquery, jquery-mobile

我正在向 SiteCatalyst 发送页面名称和页面信息。我需要发送访问者正在使用的设备的名称。

有人可以帮我吗

```
 s.pageName="<?php the_title();?> (<?php the_ID(); ?>)"

    s.server=""

    s.channel="Mobilwebben" 
```

我的问题是我需要什么变量来发送 s.server"" 以便我可以获得设备名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:06:32.783

为此，您可以使用`$_SERVER['HTTP_USER_AGENT']`PHP.net 中的 Quote：

> > User-Agent 的内容：当前请求的标头，如果有的话。这是一个字符串，表示正在访问页面的用户代理。一个典型的例子是：Mozilla/4.5 [en] (X11; U; Linux 2.2.9 i586)。除其他外，您可以将此值与 get_browser() 一起使用，以根据用户代理的功能定制您的页面输出。

你也可以使用这个免费的函数来使用 PHP 读取用户代理：

[检测移动浏览器](http://detectmobilebrowsers.mobi/)

我希望这有帮助。

# php - 本地文件存储

> ID：13065954
> 
> 赞同：2
> 
> 时间：2012-10-25T09:51:01.813
> 
> 标签：php, file, static, storage

从一个项目到为大量文件组织静态存储时遇到困难。对于图像，创建一个表 Image 并在其上计算存储路径的记录。像这样：

代码：

```
 $ image_id = 1665765;
 $ paddedId = str_pad ($ image_id, 20, '0 ', STR_PAD_LEFT);
 $ path = '/'. implode (DIRECTORY_SEPARATOR, str_split ($ paddedId, 2)); 
```

在输出：==> webroor.upload/00/00/00/00/00/00/01/66/57/65/1665765.jpg

$image_id 是需要图片的实体表中的一个字段（$user->image_id）。这种方法允许在一个$image_id 的基础上指定图像的完整路径，而不必调用base。当我们清楚地知道文件的格式（在这种情况下，总是.jpg）时，它就可以工作。但有时用户需要下载不同格式的图像。而这种做法是不实用的，因为要制作精神，并用文件（Images）加入表格，通过id来文件并计算其扩展路径。由于表图像可能很大（甚至在单独的数据库中）会降低系统性能。请与我们分享您存储的食谱。也许有人知道如何做得更好。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:11:02.267

有两种方法。

首先 - 您应该优化您的架构以存储数据库中所有文件的完整路径。但是对于已经存在的大量内容的项目来说，这并不容易。第二个 - 您已将所有上传的文件转换为一个特定的扩展名，例如 .jpg，您的所有麻烦都将消失。许多高负载社交网络使用此解决方案。

# nlp - 如何向 MeCab 添加停用词？

> ID：13065960
> 
> 赞同：4
> 
> 时间：2012-10-25T09:51:25.687
> 
> 标签：nlp, stop-words, mecab

我想在 MeCab 中添加停用词——比如“我”、“你”或其他词。但我在 MeCab 的手册上找不到任何停用词的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-02T07:29:15.850

MeCab 是一个词性标注器，它不做停用词删除。

您需要自己删除停用词，方法是处理输出并查看表面形式（文字标记）、基本形式（词形还原的规范形式）或词性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T08:45:29.663

我认为您不必在 MeCab 中添加停用词。您可以在 mecab 通过模式匹配（在 python 的情况下为 x.replace("stopword", "") ）或使用 POS 标签（删除带有特定标签的术语）向您传递标记化数据后删除停用词。

# jquery-plugins - KnockoutJS 未在自定义绑定处理程序中调用更新函数

> ID：13065962
> 
> 赞同：2
> 
> 时间：2012-10-25T09:51:33.363
> 
> 标签：jquery-plugins, knockout.js

我编写了一个多选 jQuery 插件，可以应用于普通的 HTML 选择元素。

但是，此插件将解析 select 元素及其选项，然后从 DOM 中删除 select 元素并插入 div 和复选框的组合。

我在 Knockout 中创建了一个自定义绑定处理程序，如下所示：

```
ko.bindingHandlers.dropdownlist = {
init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    // This will be called when the binding is first applied to an element
    // Set up any initial state, event handlers, etc. here

    // Retrieve the value accessor
    var value = valueAccessor();
    // Get the true value of the property
    var unwrappedValue = ko.utils.unwrapObservable(value);

    // Check if we have specified the value type of the DropDownList items. Defaults to "int"
    var ddlValueType = allBindingsAccessor().dropDownListValueType ? allBindingsAccessor().dropDownListValueType : 'int';

    // Check if we have specified the INIMultiSelect options otherwise we will use our defaults.
    var elementOptions = allBindingsAccessor().iniMultiSelectOptions ? allBindingsAccessor().iniMultiSelectOptions :
        {
            multiple: false,
            onItemSelectedChanged: function (control, item) {
                var val = item.value;

                if (ddlValueType === "int") {
                    value(parseInt(val));
                }
                else if (ddlValueType == "float") {
                    value(parseFloat(val));
                } else {
                    value(val);
                }
            }
        };

    // Retrieve the attr: {} binding
    var attribs = allBindingsAccessor().attr;

    // Check if we specified the attr binding
    if (attribs != null && attribs != undefined) {

        // Check if we specified the attr ID binding
        if (attribs.hasOwnProperty('id')) {
            var id = attribs.id;

            $(element).attr('id', id);
        }

        if (bindingContext.hasOwnProperty('$index')) {
            var idx = bindingContext.$index();

            $(element).attr('name', 'ddl' + idx);
        }
    }

    if ($(element).attr('id') == undefined || $(element).attr('id') == '') {
        var id = "ko_ddl_id_" + (ko.bindingHandlers['dropdownlist'].currentIndex);

        $(element).attr('id', id);
    }

    if ($(element).attr('name') == undefined || $(element).attr('name') == '') {
        var name = "ko_ddl_name_" + (ko.bindingHandlers['dropdownlist'].currentIndex);

        $(element).attr('name', name);
    }

    var options = $('option', element);

    $.each(options, function (index) {
        if ($(this).val() == unwrappedValue) {

            $(this).attr('selected', 'selected');
        }
    });

    if (!$(element).hasClass('INIMultiSelect')) {
        $(element).addClass('INIMultiSelect');
    }

    $(element).iniMultiSelect(elementOptions);

    ko.bindingHandlers['dropdownlist'].currentIndex++;
},
update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    var unwrappedValue = ko.utils.unwrapObservable(valueAccessor());

    var id = $(element).attr('id').replace(/\[/gm, '\\[').replace(/\]/gm, '\\]');

    var iniMultiSelect = $('#' + id);

    if (iniMultiSelect != null) {
        iniMultiSelect.SetValue(unwrappedValue, true);
    }
}};
ko.bindingHandlers.dropdownlist.currentIndex = 0; 
```

这会将原始的 HTML 选择元素转换为我的自定义多选。

但是，当第一次调用 update 函数时，在 init 之后，“element”变量仍将是原始的 select 元素，而不是我将自定义 html 保存在一起的包装器 div。

在页面完全加载并更改绑定到的可观察对象的值之后，根本不会触发更新功能！

不知何故，我有一种感觉，淘汰赛不再“知道”该做什么，因为我绑定到的原始 DOM 元素已经消失了......

有什么想法可能是这里的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:50:32.180

Knockout 中有清理代码，当它确定元素不再是文档的一部分时，它将处理用于触发绑定的计算的 observables。

您可能会找到一种方法来隐藏原始元素，或者将绑定放置在原始元素的容器上`select`（可能是一个不错的选择），或者将绑定重新应用于其中一个新元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T13:36:49.037

我今天遇到了类似的问题，这就是我解决它的方法。在我的更新处理程序中，我添加了以下行：

```
$(element).attr("dummy-attribute", ko.unwrap(valueAccessor())); 
```

这足以防止处理程序被 Knockout 的垃圾收集器处理掉。

JSFiddle（坏了）：http: [//jsfiddle.net/padfv0u9/](http://jsfiddle.net/padfv0u9/)

JSFiddle（固定）：http: [//jsfiddle.net/padfv0u9/2/](http://jsfiddle.net/padfv0u9/2/)

# git - 为跨平台开发准备 Windows Git 存储库

> ID：13065964
> 
> 赞同：2
> 
> 时间：2012-10-25T09:51:37.373
> 
> 标签：git, cross-platform, newline, eol, core.autocrlf

我有一个 Git 存储库，到目前为止，它主要用于 Windows 开发。Git EOL 问题的大多数方面（LF 与 CRLF）并不重要，开发过程顺利进行。
转移到 CMake 构建环境后，我想在 UNIX/Linux/MacOS 上构建代码。代码本身是可移植的，但从过去的经验和一些初步实验来看，这种转换有点痛苦，因为 Git 将未触及文件上的整个目录标记为已修改，检测文件中看似未修改的行并搞砸区分大小写的文件/文件夹名称。

此外，[从 Git 1.7.2](http://timclem.wordpress.com/2012/03/01/mind-the-end-of-your-line/)开始，Git 似乎有了一个新的 EOL 系统，它基于本地、每个项目、签入，`.gitattributes`而不是每个用户、全局，`.gitattributes`每个平台上的每次使用都应该设置。

任何人都可以建议一个回购准备路径/过程（在 Windows 上），它可以让我在 Linux 上拉取和提交文件而不会遇到所有这些麻烦？

可以看到部分建议，例如[here](https://stackoverflow.com/questions/170961/whats-the-best-crlf-handling-strategy-with-git/11199598#11199598)，但这太蛮力了，并且没有考虑到`.gitattributes`专门打算保留原样的文件（例如`*.sln`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T05:44:50.717

通常，在将数据存储到 VCS 之前不要自动转换数据（git IIRC 中的 autocrlf=false），否则您会误报数据没有发生变化。将数据含义的任何“解释”留给 VCS 之外的工具（编辑器等）。

为了防止虚假的换行更改，请考虑：

*   设置某种预提交钩子，拒绝任何仅包含重写换行符的更改的提交。
*   仅保护可能对换行更改敏感的少数文件（.sln、.vc* 文件等）。
*   弄清楚您的团队正在使用哪些编辑器，并确保每个人都对其进行了配置，以免他们虚假地重写换行符。（默认情况下，大多数编辑器已经设置为这种方式 - 因此，除非有人自行让他们的编辑器重写它们，否则您不会有问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:41:51.083

我使用 Notepad2，您可以将默认行尾更改为 Linux (LF)。

> 如果我理解正确，实际上不需要将源文件更改为在 Windows 机器上具有 LF。尽管 Git 使用 LF 签入它们，但在 Windows 上可以使用 CRLF 签出它们。

对我来说，这是一个**很大**的不。使用 git 时，我想**准确**检查repo 中的内容。当任何体面的 Windows 文本编辑器允许您选择默认行尾时，我认为[**没有理由**](https://stackoverflow.com/a/170968)使用 git convert 行尾。我不会也不会允许 git 弄乱行尾。

# ios - 发布到 openGraph 总是返回相同的 ID

> ID：13065967
> 
> 赞同：0
> 
> 时间：2012-10-25T09:51:47.510
> 
> 标签：ios, facebook, facebook-opengraph

我正在开发一个需要在对象上发布 openGraph 操作的 iOS 应用程序。
我正在使用**[facebook 调试器](https://developers.facebook.com/tools/explorer)**来测试我的 openGraph 对象和操作。
该过程总是产生相同的结果`id`，这意味着即使我像这样更改 URL 中的参数：

```
https://graph.facebook.com/me/MyNamespace:MyAction?MyObject=http://mysite.com/facebook/og1.php?page=1 
```

**或者**

```
https://graph.facebook.com/me/MyNamespace:MyAction?MyObject=http://mysite.com/facebook/og1.php?page=100 
```

请注意 URL**`page`参数更改**

但是我在 facebook 上收到了一个具有预期结果的帖子，但总是相同的 ID，这意味着我每个用户只能发布一次，而不是能够发布许多 opengraph 操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:42:55.793

我注意到ID实际上发生了**变化**。ID 是相当多的数字，并且每次增加大约 10,000 左右。所以中间只有一两个数字会改变。让我觉得这是同一个ID。

# wpf - 不同来源的不同 UpdateSourceTriggers？

> ID：13065971
> 
> 赞同：0
> 
> 时间：2012-10-25T09:52:05.643
> 
> 标签：wpf, xaml, binding, updatesourcetrigger

我有一个 WPF 文本框，其 Text 属性绑定到数据源。我还将第二个 TextBox 的 IsEnabled 属性绑定到第一个文本框的 Text.Length 属性，以便在第一个框中没有输入任何内容时禁用第二个框。问题是我希望文本源在属性更改时更新，但 IsEnabled 仅在失去焦点时更新，但我只能为文本正确定义一个 UpdateSourceTrigger。

解决此问题的一种方法是手动启用和禁用先前文本框失去焦点事件的文本框。但是，由于有很多这样的文本框，每个文本框的 IsEnabled 都绑定到前一个框的 Text 属性，这会很混乱。我想知道在 Xaml 中是否有更清洁的方法来执行此操作。

```
<TextBox Name="box1" Text="{Binding textSource1, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
<TextBox Name="box2" IsEnabled="{Binding ElementName=box1, Path=Text.Length}" Text="{Binding textSource2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/> 
```

在这里，我希望 box2 的 IsEnabled 属性在 box1 失去焦点时更新，但 textSource1 在 box1 上的 Text 属性更改时更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:00:28.607

您可以使用[MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)类。

```
<TextBox Name="box2"  Text="{Binding textSource2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="321,64,113,217">
        <TextBox.IsEnabled>
            <MultiBinding  Converter="{StaticResource myConv}">
                <Binding ElementName="box1" Path="Text.Length" />
                <Binding ElementName="box1" Path="IsFocused" />
            </MultiBinding>
        </TextBox.IsEnabled>
</TextBox> 
```

然后您需要一个具有所需自定义逻辑的转换器类

```
public class MyConverter : IMultiValueConverter
{

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        int textLength = (int)values[0];
        bool isFocused = (bool)values[1];

        if (textLength > 0)
            return true;

        if (isFocused == true)
            return true;

        return false;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

} 
```

# c# - 细绳？对于 C# in 方法

> ID：13065972
> 
> 赞同：3
> 
> 时间：2012-10-25T09:52:05.423
> 
> 标签：c#

我想要像 tkis "int?" 这样的东西。但对于字符串。你知道，如果我不给参数提供数据，我就不会出错。我需要一些想法来解决这个问题。

```
Example(4);

public void Example(int, string?){} 
```

对于你们所有人，我给分。感谢帮助。主题[关闭] :)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T09:53:00.690

这不可用，因为`string`它已经是引用类型，所以已经可以为空。`?`后缀是 的语法糖，[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)因此`int?`等价于`Nullable<int>`... 并且`Nullable<T>`具有 的约束`where T : struct`，即`T`必须是不可为空的值类型`string`...

换句话说，你可以写

```
public void Example(int x, string y)
{
    if (y == null)
    {
        ...
    }
} 
```

请注意，这与将其设为可选参数不同。传入一个`null`值仍然是传入一个值。如果你想让它成为一个可选参数，你也可以这样做：

```
public void Example(int x, string y = "Fred")

...

Example(10); // Equivalent to Example(10, "Fred"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T09:52:50.677

在 C# 4.0 中，您可以通过编写来使用可选参数

```
public void Example (int a, string b = null) {} 
```

否则，您可以重载该方法

```
public void Example (int a) {}
public void Example (int a, string b) {} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T09:52:52.203

string 类型默认为 null，您不需要将其设为 null，因为它已经是引用类型。你可以这样使用它。

```
public void Example(int i, string s)
{

} 
```

用 null 调用它将是

```
Example(null, null); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-25T09:54:04.953

System.String 是一种引用类型，因此您可以在不声明该变量可为空的情况下将其分配给字符串变量 null。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T09:54:44.953

你需要给字符串参数一个默认值吗？

例如

```
Example(4);

public void Example(int x, string y = null)
{
    // etc
} 
```

# php - 带有 Codeigniter 的 PHP 队列系统。如何？

> ID：13065975
> 
> 赞同：2
> 
> 时间：2012-10-25T09:52:11.610
> 
> 标签：php, mysql, codeigniter, queue

我正在为客户创建一个网站，他们需要能够生成 25,000 - 100,000 个条形码。我已经获得了一个生成代码的软件的许可，但是生成一个命令大约需要 20 到 30 分钟。60,000 个条形码。

所以我的问题是这个...

是否可以在 php 中使用设置时间限制函数设置为零（无时间限制），然后使用 Ajax 将变量传递给库并使用 ignore_user_abort 函数。这种方式基本上会发生这种情况：

客户选择条形码数量和类型，他们结帐并在支付网关发回 SUCCESSFUL 响应后，然后我们运行一个 ajax 请求，将时间限制设置为 UNLIMITED，然后告诉脚本运行，即使用户关闭浏览器或退出页面。通过这种方式，服务器处理订单，无论需要 2 秒还是 45 分钟都没有关系。订单完成后，客户可以刷新他们的帐户，他们会看到他们的订单。

我只是梦想认为这听起来是个好主意还是可行的解决方案？我在多年的 php 队列系统编码方面没有任何经验，所以我不想创建一个，除非我绝对必须这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:00:51.177

我会考虑使用类似 Gearman（[http://gearman.org/index.php](http://gearman.org/index.php)）的东西。

这也将与 CI 应用程序分开......然后 CI 将使用 Gearman 来处理队列......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:07:43.560

尝试在后端使用 CLI，默认情况下它没有时间限制.. [http://php.net/manual/en/info.configuration.php#ini.max-execution-time](http://php.net/manual/en/info.configuration.php#ini.max-execution-time)

我的意思是分三步..

首先将订单保存在您的数据库中..

第二！！！将 crontask 设置为每分钟运行一次，以获取和处理 1 个订单。当订单准备好（30 分钟后）使用下载链接或您作为响应返回的任何内容更新数据库并结束 crontasks。

第三。在他的订单准备好后，在某个页面上向用户显示结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:56:31.803

不要依赖一个长期运行的 PHP 实例。特别是如果它以任何方式与用户/浏览器相关联。将后端系统与 Web 服务器响应等临时进程正确分离。

建立一个合适的队列工作者系统。将所有订单放入队列（数据库、平面文件等），并让工作人员从队列中一一接受订单，处理它们，更新结果。worker 可以是一个 cron 作业、一个守护进程、一个无限循环的 PHP 脚本（如果它崩溃则由监视器重新启动）或其他任何东西。您还可以查看 AMQP、ZeroMQ 或类似的队列/消息传递系统。

# python - 我可以包装 windows dll 以在 Linux 下的 Python 中使用它吗？

> ID：13065982
> 
> 赞同：3
> 
> 时间：2012-10-25T09:52:35.000
> 
> 标签：python, linux, dll

是否可以包装 Windows DLL（特定硬件的驱动程序）以在 Linux 下从 Python 使用它。

如果是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-06T10:42:46.667

*免责声明：根据具体情况，以下当然不是最好的方法。这只是一种符合描述的可能方法。*

我编写了一个小的 Python 模块，用于在 Linux 上从 Python 调用 Windows DLL。它基于常规 Linux/Unix Python 进程和基于 Wine 的 Python 进程之间的 IPC。因为我自己在太多不同的用例/场景中都需要它，所以我将它设计为“通用”[`ctypes`模块](https://docs.python.org/3/library/ctypes.html)的替代品，它在后台自动完成大部分所需的管道。

示例：假设您在 Linux 上使用 Python，您安装了 Wine，并且想要调用`msvcrt.dll`（Microsoft C 运行时库）。您可以执行以下操作：

```
import zugbruecke as ctypes
dll_pow = ctypes.cdll.msvcrt.pow
dll_pow.argtypes = (ctypes.c_double, ctypes.c_double)
dll_pow.restype = ctypes.c_double
print('You should expect "1024.0" to show up here: "%.1f".' % dll_pow(2.0, 10.0)) 
```

[源代码 (LGPL)](https://github.com/pleiszenburg/zugbruecke)、[PyPI 包](https://pypi.python.org/pypi/zugbruecke)和[文档](http://zugbruecke.readthedocs.io/)。

它的边缘仍然有点粗糙（即 alpha 和不安全），但它确实可以处理大多数类型的参数（包括指针）。

*我真的很想看看它在与硬件驱动程序一起使用时如何表现和执行。非常欢迎反馈！*

# android - 使用姓名和公司搜索联系人（如默认的 android 2.3.3 联系人应用程序）

> ID：13065983
> 
> 赞同：4
> 
> 时间：2012-10-25T09:52:37.683
> 
> 标签：android, android-contacts, contactscontract

我开发了一个简单的联系人应用程序，还使用名称实现了搜索。但现在我想同时使用姓名和公司进行搜索（就像默认的 android 联系人应用程序一样）。我可以使用公司单独搜索，但无法获取其他联系信息，因为返回的联系人 ID 不同...我已在下面粘贴我的代码。

**使用姓名搜索获取联系人** *的代码：（搜索字符串是使用 textchangedlistener 从edittext 中获取的）*

```
 private Cursor getContactsByName(String temp) {
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME, };
        String selection = ContactsContract.Contacts.DISPLAY_NAME + " like '"
            + temp + "%'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";
        return managedQuery(uri, projection, selection, selectionArgs,
            sortOrder);
    } 
```

**使用公司搜索获取联系人** *的代码：（搜索字符串是使用 textchangedlistener 从edittext 中获取的）*

```
 private Cursor getContactsByCompany(String temp) {      
        Uri uri = ContactsContract.Data.CONTENT_URI;
        String[] proj = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME, Organization.COMPANY};      

        String selection3 = Data.MIMETYPE + "='" + Organization.CONTENT_ITEM_TYPE +
            "' AND " + Organization.COMPANY + " like '" + temp + "%'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";
        return managedQuery(uri, proj, 
            selection3, selectionArgs, sortOrder);      
    } 
```

在第一种情况下（即姓名搜索），我得到一个带有联系人 ID、姓名等信息的光标。使用联系人 ID，我在查看联系人页面中显示联系人的信息，例如照片、电子邮件。

在第二种情况下（即公司搜索），我得到一个带有信息联系人 ID、姓名和公司的光标。但是这里为相同联系人返回的联系人 id 与第一种情况下返回的不同。因此，我无法使用此联系人 ID 获取联系人的其他信息，例如照片、电子邮件等。

如果在案例 1 和案例 2 中联系人的联系人 ID 相同，我可以通过删除重复项将这两个搜索整合为一个。但这里不是这种情况。

所以我的问题是，如果联系人 ID 不同，我如何从第二种情况中找到联系信息，以及如何将这两种搜索结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:22:18.627

最后我找到了解决方案。

问题在于返回的联系人 ID。

所以在第一种情况下（***即按姓名搜索***），我们必须将**ContactsContract.Contacts._ID**作为联系人的 id。

在第二种情况下（***即按公司搜索***），由于 Uri 不同（在这种情况下是 ContactsContract.Data.CONTENT_URI），而且选择标准 Data.MIMETYPE 是 Organization.CONTENT_ITEM_TYPE，我们必须使用 Organization.CONTACT_ID

同样，当您使用电子邮件进行搜索时，您必须使用 ContactsContract.CommonDataKinds.Email.CONTACT_ID 作为联系人 ID。其他领域也是如此。

使用这些联系人 ID，我们可以按名称和公司组合搜索。*我们可以使用Set*概念删除联系人 ID 中的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:19:38.467

使用此功能进行组合搜索..它可以帮助你..

```
private Cursor getContactsByCompanyORname(String temp) {      
    Uri uri = ContactsContract.Data.CONTENT_URI;
    String[] proj = new String[] { ContactsContract.Contacts._ID,
        ContactsContract.Contacts.DISPLAY_NAME, Organization.COMPANY};      

    String selection3 = Data.MIMETYPE + "='" + Organization.CONTENT_ITEM_TYPE +
        "' AND " + Organization.COMPANY + " like '" + temp + "%'" + "' OR '" ContactsContract.Contacts.DISPLAY_NAME + " like '" + temp + "%'";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
        + " COLLATE LOCALIZED ASC";
    return managedQuery(uri, proj, 
        selection3, selectionArgs, sortOrder);      
} 
```

所以改变字符串选择3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T16:49:19.613

这花了很长时间和很多挫折！以下按联系人姓名、公司和职务进行搜索：

```
/**
 * Creates the Loader used to load contact data filtered by the
 * given Query String.
 */
private Loader<Cursor> createLoaderFiltered(String theQueryString) 
{      
final String[] COLS = new String[] {"contact_id", ContactsContract.Contacts._ID, 
                                    ContactsContract.Contacts.DISPLAY_NAME};

final String LIKE = " LIKE '%" + theQueryString + "%'";
final Uri    URI = ContactsContract.Data.CONTENT_URI;
final String ORANIZATION_MIME = Organization.CONTENT_ITEM_TYPE;
final String NAME_MIME = StructuredName.CONTENT_ITEM_TYPE;
final String WHERE = 
    "(" + 
    Data.MIMETYPE + "='" + ORANIZATION_MIME + "'" +
    " AND (" + Organization.COMPANY + LIKE + " OR " + Organization.TITLE + LIKE + ")" +
    " AND " + ContactsContract.Contacts.DISPLAY_NAME + " NOT " + LIKE +
    ") OR (" +
    Data.MIMETYPE + "='" + NAME_MIME + "'" +
    " AND " + ContactsContract.Contacts.DISPLAY_NAME + LIKE + ")";

final String SORT = ContactsContract.Contacts.DISPLAY_NAME + 
                    " COLLATE LOCALIZED ASC";

return new CursorLoader(getActivity(), URI, COLS, WHERE, null, SORT);      
} 
```

需要“ContactsContract.Contacts.DISPLAY_NAME NOT LIKE”子句来消除联系人姓名和公司/职务都匹配的联系人的重复行。

# javascript - 每次更改对象时调用一个函数

> ID：13065984
> 
> 赞同：1
> 
> 时间：2012-10-25T09:52:39.247
> 
> 标签：javascript, oop

```
obj={name:'value'}; 
```

每次更改对象（添加新属性，删除属性）和读取属性（炖另一个函数）时如何调用函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:55:44.610

看看 KnockoutJS。这是一个非常强大的 MVVM 框架，您将受益于完全使用它来将模型与视图逻辑分离。但是您也可以仅将其用于此特定需求（如果 40kb 可满足您的需求）...如果您查看 observables，他们会做您想做的事：http: [//knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

# f# - 从 F# 库访问 Windows 命名空间

> ID：13065985
> 
> 赞同：3
> 
> 时间：2012-10-25T09:52:40.397
> 
> 标签：f#, windows-8, microsoft-metro

我正在尝试创建一个 F# 库以与 Windows 应用商店应用程序一起使用。我需要访问 Windows 命名空间（尤其是`Windows.Storage`）。我应该为图书馆选择什么类型的项目？

当我选择 F# Portable Library 时，无法添加对 Windows.Storage 的引用，当我创建 F# Library 类型的项目时也是如此。我正在寻找类库（Windows Store Apps）之类的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:37:05.443

我`Windows.Storage`在这里找到了：`C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral\Windows.winmd`。这意味着 F# 不能直接引用它。

我建议您围绕它对后端进行建模（您必须将 C# 与您的 F# 代码结合起来，因为 F# 在 Windows 8 中无法单独工作）。

# seo - 我的数据对搜索引擎隐藏了吗？

> ID：13065988
> 
> 赞同：0
> 
> 时间：2012-10-25T09:52:44.717
> 
> 标签：seo

我创建了一个将商店与品牌联系起来的网站。许多商店可以有相同的品牌。

您可以搜索一个品牌，看看哪些商店出售这个品牌（图片）。
`www.mysite.com/?id=23&brand=my+brand+name`

如果你开一家商店，你可以看到他们有什么品牌。
`www.mysite.com/?id=235&store=my+store+name`

当您打开一个品牌时，整个商店列表已加载但隐藏。通过 jQuery 和下拉列表，我可以更改城市，地图和商店列表将动态更新。

但是如果我想在搜索引擎上得分更高，例如当用户 google 时 `"dovre oslo"` ，我希望搜索引擎找到所有商店

由于我试图在搜索引擎上排名更高，如果重新加载整个页面并在 URL 中添加城市名称会更好吗？

在打开商店页面时，我应该在 URL 中添加城市名称吗？

![在此处输入图像描述](../Images/14e4ed119d45d89963720e30b4effa2e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:06:14.337

经过一些讨论和思考，我得出的结论是，如果我使用下拉菜单和 jQuery 并不重要。

我的所有页面都列在我的站点地图中，因此对搜索引擎可见。

# jax-ws - 编写独立的 Java 客户端以使用 SAML2 令牌访问安全的 WCF Web 服务

> ID：13065991
> 
> 赞同：2
> 
> 时间：2012-10-25T09:52:51.167
> 
> 标签：jax-ws, wcf-client, wsit

我正在尝试使用普通 Java 客户端和 Metro Web 服务 API (webservices-rt-2.2.0-1) 访问在 .NET 平台上编写的安全 Windows Common Foundation (WCF) Web 服务

使用带有 ant 目标的 WCF Web 服务的 WSDL，我能够生成 Web 服务工件。

为了访问 WCF Web 服务，我需要在 SOAP 请求中插入一个 SAML2 令牌。此 SAML2 令牌是通过访问 REST 服务来检索的，该服务的响应包含 SAML2 断言。目前，我将令牌作为 String 对象（整个 Assertion XML）

```
My client code looks something like this:
 MyService service = new MyService(new URL(wsdlLocation), new QName("http://tempuri.org/",
        "MyService"));

IMyService port = service.getCustomBindingIMyService();

port.callMyServiceApi(); 
```

此代码引发以下错误：WST0029：无法从 IssuedToken 或客户端获取 STS 位置

因此，我将代码修改为以下内容：

```
MyService service = new MyService(new URL(wsdlLocation), new QName("http://tempuri.org/",
        "MyService"));

DefaultSTSIssuedTokenConfiguration config = new DefaultSTSIssuedTokenConfiguration(stsEndpointAddress, wsdl, "MyService","CustomBinding_IMyService","http://tempuri.org/");

STSIssuedTokenFeature feature = new STSIssuedTokenFeature(config);
IMyService  port = service.getCustomBindingIMyService(new WebServiceFeature[]{feature});

port.getApiVersion(); 
```

有了上述，STS位置错误消失了，但看到了以下错误。线程“主”javax.xml.ws.WebServiceException 中的异常：com.sun.xml.wss.jaxws.impl.SecurityClientTube.processRequest(SecurityClientTube.java:250) 处 com.sun.xml.ws 处的 java.lang.NullPointerException .api.pipe.Fiber.__doRun(Fiber.java:961) 在 com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) 在 com.sun.xml.ws.api.pipe .Fiber.doRun(Fiber.java:873) 在 com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) 在 com.sun.xml.ws.client.Stub.process(Stub .java:429) 在 com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:168) 在 com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:119 ) 在 com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:

我打开了 SOAP 消息的日志记录并检查了请求，我发现请求中没有与安全相关的信息。Web 服务端点正在返回一个失败响应，指示请求中存在无效安全性。

我想知道： 1\. 到目前为止，我与客户的关系是否正确？2\. 调用我的 REST 服务并解析 SAML2 令牌的响应的最佳方式是什么？3\. 如何将步骤 2 中的 SAML2 令牌全部设置到我的 Web 服务中？

根据 WCF Web 服务的实施者，他们使用的是 WS-Security 而不是联合安全性。收到的 SAML2 令牌如下所示：

```
<wsse:Security soap:mustUnderstand="true"
        xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <Assertion ID="_909088b3-d972-4b6f-84b1-26301c1c3b69"
                IssueInstant="2012-10-16T12:32:44.293Z" Version="2.0"
                xmlns="urn:oasis:names:tc:SAML:2.0:assertion">
                <Issuer>xyz:appl:identity</Issuer>
                <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                        <ds:SignedInfo>
                                <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                                <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
                                <ds:Reference URI="#_909088b3-d972-4b6f-84b1-26301c1c3b69">
                                        <ds:Transforms>
                                                <ds:Transform
                                                        Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                                                <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                                        </ds:Transforms>
                                        <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                                        <ds:DigestValue>some_value_here</ds:DigestValue>
                                </ds:Reference>
                        </ds:SignedInfo>
                        <ds:SignatureValue>sig_here</ds:SignatureValue>
                        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
                                <X509Data>
                                        <X509Certificate>certHere</X509Certificate>
                                </X509Data>
                        </KeyInfo>
                </ds:Signature>
                <Subject>
                        <NameID
                                Format="http://schemas.xyz.com/2009/09/Identity/Format/Idm/InsightUserName">user222</NameID>
                        <SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" />
                </Subject>
                <Conditions NotBefore="2012-10-16T12:32:44.293Z"
                        NotOnOrAfter="2022-01-01T12:00:00.000Z">
                        <AudienceRestriction>
                                <Audience>uri:samlclient.xyzbadal.com</Audience>
                        </AudienceRestriction>
                </Conditions>
                <AttributeStatement>
                        <Attribute
                                Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name">
                                <AttributeValue>user222</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname">
                                <AttributeValue>user222</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress">
                                <AttributeValue>support@abc.com</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/CustomerId">
                                <AttributeValue>11209</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/InsightUserId">
                                <AttributeValue>1</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/NameIdFormat">
                                <AttributeValue>http://schemas.xyz.com/2009/09/Identity/Format/Idm/InsightUserName</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/HasProfile">
                                <AttributeValue>True</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/Password">
                                <AttributeValue>test1</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/HasPassword">
                                <AttributeValue>True</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/LocaleName">
                                <AttributeValue>en-US</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/HasCredential">
                                <AttributeValue>false</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/InternalReferenceId">
                                <AttributeValue>user222</AttributeValue>
                        </Attribute>
                        <Attribute
                                Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/role">
                                <AttributeValue>CustomiseUI</AttributeValue>
                                <AttributeValue>EditConfiguration</AttributeValue>
                                ...
                        </Attribute>
                        <Attribute
                                Name="http://schemas.xyz.com/2009/09/Identity/Claims/ProfileUrl">
                                <AttributeValue>https://identity.com/able/</AttributeValue>
                        </Attribute>
                </AttributeStatement>
                <AuthnStatement AuthnInstant="2012-10-16T12:32:44.000Z"
                        SessionNotOnOrAfter="2022-01-01T12:00:00.000Z">
                        <AuthnContext>
                                <AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</AuthnContextClassRef>
                        </AuthnContext>
                </AuthnStatement>
        </Assertion>
</wsse:Security> 
```

我得到了几个 WSDL 文件。片段粘贴在下面：WSDL 1：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://schemas.xyz.com/TrackMe/2010/06/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://schemas.xyz.com/TrackMe/2010/06/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <wsdl:types>
    <xsd:schema targetNamespace="http://schemas.xyz.com/TrackMe/2010/06/Imports">
      <xsd:import schemaLocation="TrackMe.xsd" namespace="http://schemas.xyz.com/TrackMe/2010/06/"/>
      <xsd:import schemaLocation="TrackMe_1_2_3_4.xsd" namespace="http://schemas.xyz.com/shs/api"/>
      <xsd:import schemaLocation="TrackMe_1_2.xsd" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
      <xsd:import schemaLocation="TrackMe_1.xsd" namespace="http://schemas.xyz.com/TrackMe/2010/06/Data"/>
      <xsd:import schemaLocation="TrackMe_1_2_3_4_5.xsd" namespace="http://schemas.datacontract.org/2004/07/xyz.Validation"/>
      <xsd:import schemaLocation="TrackMe_1_2_3.xsd" namespace="http://schemas.datacontract.org/2004/07/xyz.TrackMe.PublicApiService.Contract"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="IMyService_GetApiVersion_InputMessage">
    <wsdl:part name="parameters" element="tns:GetApiVersion"/>
  </wsdl:message>
  <wsdl:message name="IMyService_GetApiVersion_OutputMessage">
    <wsdl:part name="parameters" element="tns:GetApiVersionResponse"/>
  </wsdl:message>
  <wsdl:message name="IMyService_GetApiVersion_FaultDetailFault_FaultMessage">
    <wsdl:part name="detail" element="q2:Fault" xmlns:q2="http://schemas.xyz.com/shs/api"/>
  </wsdl:message>
  ....
 <wsdl:operation name="GetApiVersion">
      <wsdl:input wsaw:Action="http://schemas.xyz.com/TrackMe/2010/06/IMyService/GetApiVersion" message="tns:IMyService_GetApiVersion_InputMessage"/>
      <wsdl:output wsaw:Action="http://schemas.xyz.com/TrackMe/2010/06/IMyService/GetApiVersionResponse" message="tns:IMyService_GetApiVersion_OutputMessage"/>
      <wsdl:fault wsaw:Action="http://schemas.xyz.com/TrackMe/2010/06/IMyService/GetApiVersionFaultDetailFault" name="FaultDetailFault" message="tns:IMyService_GetApiVersion_FaultDetailFault_FaultMessage"/>
    </wsdl:operation>
    ...
  </wsdl:portType>
</wsdl:definitions> 
```

WSDL 2：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name="MyService" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:i0="http://schemas.xyz.com/TrackMe/2010/06/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
  <wsp:Policy wsu:Id="CustomBinding_IMyService_policy">
    <wsp:ExactlyOne>
      <wsp:All>
        <sp:TransportBinding xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
          <wsp:Policy>
            <sp:TransportToken>
              <wsp:Policy>
                <sp:HttpsToken/>
              </wsp:Policy>
            </sp:TransportToken>
            <sp:AlgorithmSuite>
              <wsp:Policy>
                <sp:Basic256/>
              </wsp:Policy>
            </sp:AlgorithmSuite>
            <sp:Layout>
              <wsp:Policy>
                <sp:Strict/>
              </wsp:Policy>
            </sp:Layout>
            <sp:IncludeTimestamp/>
          </wsp:Policy>
        </sp:TransportBinding>
        <sp:SignedSupportingTokens xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
          <wsp:Policy>
            <sp:IssuedToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
              <sp:RequestSecurityTokenTemplate>
                <trust:TokenType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</trust:TokenType>
                <trust:KeyType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer</trust:KeyType>
              </sp:RequestSecurityTokenTemplate>
              <wsp:Policy>
                <sp:RequireInternalReference/>
              </wsp:Policy>
            </sp:IssuedToken>
          </wsp:Policy>
        </sp:SignedSupportingTokens>
        <sp:Wss11 xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
          <wsp:Policy/>
        </sp:Wss11>
        <sp:Trust13 xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
          <wsp:Policy>
            <sp:MustSupportIssuedTokens/>
            <sp:RequireClientEntropy/>
            <sp:RequireServerEntropy/>
          </wsp:Policy>
        </sp:Trust13>
        <wsaw:UsingAddressing/>
      </wsp:All>
    </wsp:ExactlyOne>
  </wsp:Policy>
  <wsdl:import namespace="http://schemas.xyz.com/TrackMe/2010/06/" location="TrackMe.wsdl"/>
  <wsdl:types/>
  <wsdl:binding name="CustomBinding_IMyService" type="i0:IMyService">
    <wsp:PolicyReference URI="#CustomBinding_IMyService_policy"/>
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    ...
     <wsdl:operation name="GetApiVersion">
      <soap12:operation soapAction="http://schemas.xyz.com/TrackMe/2010/06/IMyService/GetApiVersion" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="FaultDetailFault">
        <soap12:fault name="FaultDetailFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    ....
     </wsdl:binding>
  <wsdl:service name="MyService">
    <wsdl:port name="CustomBinding_IMyService" binding="tns:CustomBinding_IMyService">
      <soap12:address location="https://apidev2.devel.abc.com/tnt/public_api/TrackMe.svc"/>
      <wsa10:EndpointReference>
        <wsa10:Address>https://apidev2.devel.abc.com/tnt/public_api/TrackMe.svc</wsa10:Address>
      </wsa10:EndpointReference>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

如果您需要更多信息，请告诉我。将不胜感激任何帮助。提前致谢！卡尔。

# java - Java不可重入锁实现

> ID：13065994
> 
> 赞同：2
> 
> 时间：2012-10-25T09:53:03.953
> 
> 标签：java, concurrency, synchronization, locking, mutex

我已经实现了一个不可重入锁。我想知道这是否有任何错误、竞争条件等。我知道必须使用现有库（而不是编写我们自己的库）这一事实，但这只是为了看看我是否正确理解了 java 并发性。任何反馈表示赞赏。

```
public class MyLock {
private boolean isLocked = false;
private long owner = -1;
private static String TAG = "MyLock: ";

public synchronized void Lock() throws InterruptedException, IllegalStateException {
    if(!isLocked) {
        isLocked = true;
        owner = Thread.currentThread().getId();

    } else {
        if(owner == Thread.currentThread().getId()) {
            throw new IllegalStateException("Lock already acquired. " +
                                            "This lock is not reentrant");
        } else {
            while(isLocked == true) {
                System.out.println(TAG+"Waiting for Lock, Tid = " +
                        Thread.currentThread().getId());
                wait();
            }   
        }
    }
    System.out.println(TAG+"Lock Acquired: Owner = " + owner);
}

public synchronized void Unlock() throws IllegalStateException {
    if(!isLocked || owner != Thread.currentThread().getId()) {
        throw new IllegalStateException("Only Owner can Unlock the lock");
    } else {
        System.out.println(TAG+"Unlocking: Owner = " + owner);
        owner = -1;
        isLocked = false;
        notify();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-15T23:29:57.413

这是 Java 中“标准”/“不可重入”锁的实现，作为 Java 内置 ReentrantLock 的包装器，它简单地防止锁被多次获取。

```
/**
 * A "non-reentrant" lock, implemented as a wrapper around Java's ReentrantLock.
 *
 */
class StandardLock implements java.util.concurrent.locks.Lock {

    public static class LockAlreadyHeldException extends RuntimeException {}

    private final java.util.concurrent.locks.ReentrantLock mainLock;

    private void checkNotAlreadyHeld() {
        if (mainLock.getHoldCount()!=0) {
            throw new LockAlreadyHeldException();
        }
    }

    public StandardLock() {
        mainLock=new java.util.concurrent.locks.ReentrantLock();
    }

    public StandardLock(boolean fair) {
        mainLock=new java.util.concurrent.locks.ReentrantLock(fair);
    }

    @Override
    public void lock() {
        checkNotAlreadyHeld();
        mainLock.lock();
    }

    @Override
    public void lockInterruptibly() throws InterruptedException {
        checkNotAlreadyHeld();
        mainLock.lockInterruptibly();
    }

    @Override
    public boolean tryLock() {
        checkNotAlreadyHeld();
        return mainLock.tryLock();
    }

    @Override
    public boolean tryLock(long time, TimeUnit unit) throws InterruptedException {
        checkNotAlreadyHeld();
        return mainLock.tryLock(time, unit);
    }

    @Override
    public void unlock() {
        mainLock.unlock();
    }

    @Override
    public Condition newCondition() {
        return mainLock.newCondition();
    }
} 
```

这种方法的优点是该类实现了 Java 的 Lock 接口，因此附带条件变量以允许创建监视器。监视器对于充分利用锁进行并发编程很重要。

# amazon - Amazon Cloudfront - 将 CDN 域名传递到源服务器

> ID：13065997
> 
> 赞同：4
> 
> 时间：2012-10-25T09:53:45.687
> 
> 标签：amazon, cdn, amazon-cloudfront

我想知道 Amazon Cloudfront 是否可以将请求来自的 CDN 域名传递给源服务器。让我解释。

*   我有一个与源域相关联的外部 LAMP 服务器（例如：origin.mydomain.com）
*   我已成功设置 Cloudfront，将 origin.mydomain.com 设置为源服务器
*   最后，我将 2 个不同的 (CDN) 域指向 Cloudfront（例如：www.firstdomain.com 和 www.seconddomain.com）

现在，所有这些设置都运行良好。

但是我缺少 1 条信息：当源服务器 (origin.mydomain.com) 收到请求时，我还没有找到一种方法来知道请求最初来自 www.firstdomain.com 还是 www.seconddomain。 com; cloudfront 将有关请求的所有信息发送到源服务器，但原始 CDN 域除外 - 或者如果是，我不知道如何/从哪里获取它。

所以，恢复，我有这个：

DNS 域 -> Cloudfront -> 源域 -> LAMP 服务器

问题是：LAMP如何获取请求最初来自的DNS域名？

我是否错过了任何云端设置，或者我可以使用一些技巧来获取该信息？

注意：我知道我可以创建多个指向同一个源服务器的属性，但这不是这个项目的可行解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:39:37.013

您必须使用 Cloudfront 中的日志记录，因为 Cloudfront 实际向您的服务器发出请求的唯一时间是当它们没有该特定文件的缓存版本时。

要打开日志记录，您需要登录 AWS 控制台并在分发详细信息中为您要启用访问日志传送的分发选择编辑。然后为 AWS 设置目标存储桶和前缀以将日志文件传送到。日志记录目标应该是不同于源的另一个 S3 存储桶。否则，您的报告将包括对 Amazon 提供的日志文件的请求和对日志文件的下载请求。

当您配置日志记录时，它将以这种格式将日志保存在您指定的存储桶中：http: [//docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/AccessLogs.html#LogFileFormat](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/AccessLogs.html#LogFileFormat)