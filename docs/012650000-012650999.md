# StackOverflow 问答 12650000-12650999

# css - 我的 HTML5 Canvas PitchDeck 出现 CSS 问题

> ID：12650000
> 
> 赞同：0
> 
> 时间：2012-09-29T04:45:05.010
> 
> 标签：css, html

我的 PitchDeck Web 应用程序出现了一个问题（我认为在我的 CSS 中）：Kimerick：[http](http://kimerick.com/) ://kimerick.com/ 。

具体来说，在使用 Chrome 或 Safari 时，请注意右下角的箭头。只有在 Chrome 和 Safari 中，左箭头的大小不合适（相对于其他箭头）。然而，在 Opera 和 Firefox 中，所有箭头的大小都相同。

CSS 可以在这里找到：http: [//kimerick.com/css/main.css](http://kimerick.com/css/main.css)。有问题的类是“.controls”。

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:49:46.147

在 Chrome 中，箭头的大小对我来说似乎都合适。尝试清除两个浏览器中的缓存，然后使用 CTRL-F5 完全刷新页面。

# ubuntu - 在 Ubuntu 上安装 cqual 说 linux/config.h not found

> ID：12650001
> 
> 赞同：0
> 
> 时间：2012-09-29T04:45:14.480
> 
> 标签：ubuntu, installation

我正在尝试在我的 Ubuntu 12.04 机器上安装 cqual-0.991 工具。我下载了 tar 文件。确保安装了 emacs，这是 cqual 的必要条件。然后，运行命令

```
 ./configure
    make 
```

但我收到以下错误消息：

```
 In file included from regions.c:40:0:
    stats.c:52:26: fatal error: linux/config.h: No such file or directory
    compilation terminated.
    make[3]: *** [regions.o] Error 1
    make[3]: Leaving directory `/home/romaan/Desktop/SATool/cqual-0.991/src/libcompat'
    make[2]: *** [all-recursive] Error 1
    make[2]: Leaving directory `/home/romaan/Desktop/SATool/cqual-0.991/src'
    make[1]: *** [all] Error 2
    make[1]: Leaving directory `/home/romaan/Desktop/SATool/cqual-0.991/src'
    make: *** [all-recursive] Error 1
    root@ubuntu:/home/romaan/Desktop/SATool/cqual-0.991# su -
    root@ubuntu:~# cd /home/romaan/Desktop/SATool/cqual-0.991/
    root@ubuntu:/home/romaan/Desktop/SATool/cqual-0.991# make
    Making all in src
    make[1]: Entering directory `/home/romaan/Desktop/SATool/cqual-0.991/src'
    make  all-recursive
    make[2]: Entering directory `/home/romaan/Desktop/SATool/cqual-0.991/src'
    Making all in libcompat
    make[3]: Entering directory `/home/romaan/Desktop/SATool/cqual-0.991/src/libcompat'
    if gcc -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\"         -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE=\"cqual\" -DVERSION=\"0.991\" -DYYTEXT_POINTER=1 -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_FCNTL_H=1 -DHAVE_LIMITS_H=1 -DHAVE_MALLOC_H=1 -DHAVE_SYS_TIME_H=1 -DHAVE_UNISTD_H=1 -DTIME_WITH_SYS_TIME=1 -DSIZEOF_VOIDP=4 -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DPROTOTYPES=1 -D__PROTOTYPES=1 -DRETSIGTYPE=void -DHAVE_VPRINTF=1 -DHAVE_GETTIMEOFDAY=1 -DHAVE_STRDUP=1 -DHAVE_STRTOLD=1 -DHAVE_STRTOL=1  -I. -I. -DNMEMDEBUG -DNDEBUG -O9    -g -O2 -MT regions.o -MD -MP -MF ".deps/regions.Tpo" \
  -c -o regions.o `test -f 'regions.c' || echo './'`regions.c; \
then mv -f ".deps/regions.Tpo" ".deps/regions.Po"; \
else rm -f ".deps/regions.Tpo"; exit 1; \
fi
    In file included from regions.c:40:0:
    stats.c:52:26: fatal error: linux/config.h: No such file or directory
    compilation terminated.
    make[3]: *** [regions.o] Error 1
    make[3]: Leaving directory `/home/romaan/Desktop/SATool/cqual-0.991/src/libcompat'
    make[2]: *** [all-recursive] Error 1
    make[2]: Leaving directory `/home/romaan/Desktop/SATool/cqual-0.991/src'
    make[1]: *** [all] Error 2
    make[1]: Leaving directory `/home/romaan/Desktop/SATool/cqual-0.991/src'
    make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:26:18.317

CQual 现在已过时，无法安装在新版本的 Linux 或 Solaris 上。:(

# android - 单击 SlidingMenu 上的项目时更改前片段

> ID：12650005
> 
> 赞同：4
> 
> 时间：2012-09-29T04:45:50.220
> 
> 标签：android, android-fragments, android-viewpager

我正在尝试制作一个滑动菜单，就像 Youtube 或 Google+ 应用程序一样。

我正在关注[这个](https://github.com/iPaulPro/SlidingMenu)项目代码，我想要做的是当我点击左侧栏上的一个项目时，活动会随着新内容滑回左侧。

> 就像您在 Google+**主**屏幕上时一样，单击左侧菜单上的**配置文件**项目，它会在加载**配置文件**屏幕时滑回左侧。

所以这是我的代码。

我有这个名为**ExampleActivity.java**的主要活动：

```
 public class ExampleActivity extends SlidingFragmentActivity
{
    //public PagerAdapter adapter;
    public FragmentManager mFragmentManager;

    private List<Fragment> mFragments = new ArrayList<Fragment>();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        mFragmentManager = getSupportFragmentManager();

        // set the Behind View
        setBehindContentView(R.layout.frame);
        getSupportFragmentManager().beginTransaction().add(R.id.frame, new SampleListFragment()).commit();

        // customize the SlidingMenu
        this.setSlidingActionBarEnabled(true); 
        getSlidingMenu().setShadowWidthRes(R.dimen.shadow_width);
        getSlidingMenu().setShadowDrawable(R.drawable.shadow);
        getSlidingMenu().setBehindOffsetRes(R.dimen.actionbar_home_width); 
        getSlidingMenu().setBehindScrollScale(0.25f);
        getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);

        // customize the ActionBar
        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayHomeAsUpEnabled(true);

        setContentView(R.layout.main);
    }

    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
            case android.R.id.home:
                toggle();
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        this.getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我有处理左侧菜单点击的**SampleListFragment.java 。**

```
 public class SampleListFragment extends ListFragment
{
    private ExampleActivity mActivity;

    @Override
    public void onResume()
    {
        super.onResume();
        mActivity = (ExampleActivity)getActivity();
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id)
    {
        Fragment frag = null;

        switch(position)
        {
            case 0:
                frag = new FirstFragment();
                break;
            case 1:
                frag = new SecondFragment();
                break;
        }

        if (frag != null)
            replaceFragment(frag);
    }

    protected void replaceFragment(Fragment frag)
    {
        FragmentTransaction fragmentTransaction = mActivity.getSupportFragmentManager().beginTransaction();
        fragmentTransaction.add(R.id.main, frag);
        fragmentTransaction.commit();
        mActivity.showAbove();
    }

    /**
     * A callback function, executed when this fragment is attached to an
     * activity
     */
    @Override
    public void onAttach(Activity activity)
    {
        super.onAttach(activity);
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
        View v = inflater.inflate(R.layout.list, null);
        return v;
    }

    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);
        SampleAdapter adapter = new SampleAdapter(getActivity());
        for (int i = 0; i < 20; i++)
        {
            adapter.add(new SampleItem(new Fragment(), "Sample List",
                    android.R.drawable.btn_star));
        }
        setListAdapter(adapter);
    }

    private class SampleItem
    {
        public Fragment frag;
        public String tag;
        public int iconRes;

        public SampleItem(Fragment fram, String tag, int iconRes)
        {
            this.frag = frag;
            this.tag = tag;
            this.iconRes = iconRes;
        }
    }

    public class SampleAdapter extends ArrayAdapter<SampleItem>
    {
        public SampleAdapter(Context context)
        {
            super(context, 0);
        }

        public View getView(int position, View convertView, ViewGroup parent)
        {
            if (convertView == null)
            {
                convertView = LayoutInflater.from(getContext()).inflate(
                        R.layout.row, null);
            }

            ImageView icon = (ImageView) convertView
                    .findViewById(R.id.row_icon);
            TextView title = (TextView) convertView
                    .findViewById(R.id.row_title);

            convertView.setTag(title.getText().toString());

            return convertView;
        }

    }
} 
```

那么会发生什么，当我单击左侧菜单上的第一项时，调用 FirstFragment()，显示 toast 但布局未添加到活动中。

**这是 FirstFragment 类的代码：**

```
public class FirstFragment extends Fragment
{
    private ExampleActivity mActivity;

    @Override
    public void onCreate(Bundle b)
    {
        super.onCreate(b);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        super.onCreateView(inflater, container, savedInstanceState);
        View fragmentView = inflater.inflate(R.layout.firstfragment, container, false);

        TextView textView = (TextView) fragmentView.findViewById(R.id.textview);
        textView.setText("Lorem ipsum");

        return fragmentView;
    }

    @Override
    public void onResume()
    { 
        super.onResume();
        mActivity = (ExampleActivity)getActivity();
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);

        Toast.makeText(getActivity(), "First Fragment", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onAttach(Activity activity)
    {
        super.onAttach(activity);
    }
} 
```

这是**main.xml的****ExampleActivity.java**的布局：

 **```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <Button
        android:text="Random Button!"
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/logo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

**问题**

如何将第一个片段布局添加到活动中。它一直显示初始布局，但片段的布局没有加载到活动中。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:00:10.357

我按照这个关于 android 文档的教程进行操作，它很有效。

[http://developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)**

# c# - C# - 文件上传到服务器后损坏

> ID：12650013
> 
> 赞同：2
> 
> 时间：2012-09-29T04:47:03.903
> 
> 标签：c#, file-upload, ftp

我使用以下源代码上传文件 excel 和 pdf，但文件移动到服务器后，文件已损坏。我认为问题出在编码过程上`Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());`，但我不知道如何解决。

```
public static void sampleUpload()
    {
        // Get the object used to communicate with the server.
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://100.165.80.15:21/output/Group Dealer, Main Dealer, Zone, Branch, and Destination Report_20120927105003.pdf");
        request.Method = WebRequestMethods.Ftp.UploadFile;

        // This example assumes the FTP site uses anonymous logon.
        request.Credentials = new NetworkCredential("toc", "fid123!!");

        // Copy the contents of the file to the request stream.
        StreamReader sourceStream = new StreamReader("D:\\Group Dealer, Main Dealer, Zone, Branch, and Destination Report_20120927105003.pdf");
        byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
        sourceStream.Close();
        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();

        Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

        response.Close();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T04:54:51.890

不要将二进制文件作为文本读取。使用[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/dd782932%28v=vs.100%29.aspx)方法（如果不能使用 .Net 4.0，则使用等效代码）

```
 using(StreamReader sourceStream = ...){
   using(Stream requestStream = request.GetRequestStream())
   {
     sourceStream.CopyTo(requestStream);
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:56:19.690

您可以尝试使用处理原始字节的 BufferedStream。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T13:10:44.540

在我的情况下，我无法按照 Alexei 在他的回答中建议的那样使用 Stream.Copy，因为我使用的是 .NET Framework 2.0，而我只使用 Stream 来读取二进制文件，因为 Streamreader 旨在仅读取文本文件：

```
public static void sampleUpload()
{
    // Get the object used to communicate with the server.
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://100.165.80.15:21/output/Group Dealer, Main Dealer, Zone, Branch, and Destination Report_20120927105003.pdf");
    request.Method = WebRequestMethods.Ftp.UploadFile;
    request.UseBinary = true;

    // This example assumes the FTP site uses anonymous logon.
    request.Credentials = new NetworkCredential("toc", "fid123!!");

    // Copy the contents of the file to the request stream.
    byte[] b = File.ReadAllBytes(sourceFile);

    request.ContentLength = b.Length;
    using (Stream s = request.GetRequestStream())
    {
        s.Write(b, 0, b.Length);
    }

    FtpWebResponse response = (FtpWebResponse)request.GetResponse();

    Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

    response.Close();
} 
```

# ruby-on-rails - Rails - 在 Reload 和 Redirect_to 时检查复选框

> ID：12650017
> 
> 赞同：1
> 
> 时间：2012-09-29T04:48:15.620
> 
> 标签：ruby-on-rails, checkbox

我有一个用户选择首选项的页面 - 我希望他们选择的复选框在他们重新访问页面时自动选中（提交后）。

我在这里查看了其他几个似乎可以解决这个问题的线程，但我很确定。卡住了 - 有人可以向我扔一些 Rails 知识吗？！

```
> <%= form_for @like do |f| %> 
> <% Category.select { |category| category.gender == 'guy' }.each do |category| %> 
> <%= check_box_tag 'category_ids[]', category.id, true %> 
```

喜欢控制器：

```
def create
    @like = Like.new(params[:like])
    params[:category_ids].each do |category|
      Like.create(:category_id => category, :user_id => current_user.id)
    end
    redirect_to new_preference_path
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:02:47.613

您必须像这样向 check_box_tag 添加第三个参数：

```
<%= check_box_tag "category_ids[]", category.id, @like.category_ids.include?(category.id) %> 
```

因此，如果@like 的 category_ids 包含该类别，则检查复选框

# php - MySQL：LAST_INSERT_ID() 的问题

> ID：12650022
> 
> 赞同：0
> 
> 时间：2012-09-29T04:49:24.157
> 
> 标签：php, mysql

我想在同一个查询中插入多个表，使用 table2 从 table1 检索 id

这是我的sql代码

```
 $q = "
    INSERT INTO Product (pName, pBrand, pCategory, pSize, pQuantity, pPrice, pDetail)
        VALUES('$name', '$brand', '$category', '$size', '$quantity', '$price', '$detail');
    INSERT INTO Image (iName, iExt, iSize, pID)
        VALUES('$img_name', '$img_ext', '$img_size', LAST_INSERT_ID());";

 $mysqli->query($q); 
```

它显示了语法错误。但我将 $q 的输出复制到在 phpMyAdmin 的 SQL 查询中运行，它起作用了。你能指出我的错误在哪里吗？

```
 INSERT INTO Product (pName, pBrand, pCategory, pSize, pQuantity, pPrice, pDetail)
        VALUES(....); #1 row affected
    INSERT INTO Image (iName, iExt, iSize, pID)
        VALUES(....); #1 row affected 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:52:11.940

我不相信您可以通过单个查询调用运行多个语句；你需要打电话`mysqli_multi_query`：

[http://php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:06:18.360

```
$q = "
    INSERT INTO Product (pName, pBrand, pCategory, pSize, pQuantity, pPrice, pDetail)
        VALUES('$name', '$brand', '$category', '$size', '$quantity', '$price', '$detail');
    INSERT INTO Image (iName, iExt, iSize, pID)
        VALUES('$img_name', '$img_ext', '$img_size', LAST_INSERT_ID());";
$arr=explode(";",$q)
for($i=0;isset($arr[$i]);$i++)//or use limit($arr) in place of isset
{

 $mysqli->query('"'.$arr[$i].'"');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T05:07:11.870

```
 By default, mysql_query() and mysql_real_query() 
interpret their statement string argument 
as a single statement to be executed, and you process
 the result according to whether 
the statement produces a result set 
(a set of rows, as for SELECT) 
or an affected-rows count (as for INSERT, UPDATE, and so forth). 
```

阅读 C API 对 mysql 的支持

# android - android包含更多布局，程序死了

> ID：12650029
> 
> 赞同：0
> 
> 时间：2012-09-29T04:50:38.910
> 
> 标签：android, android-layout, layout, include

--tt.xml

```
<ViewFlipper android:layout_weight="36"
android:id="@+id/viewcontainer" android:measureAllChildren="true" 
    android:layout_width="fill_parent" android:layout_height="80dp"
android:persistentDrawingCache="animation"  android:flipInterval="500">
<include layout="@layout/remotecontrol_pv_layout" />                
<include layout="@layout/remotecontrol_number_layout" />
<include layout="@layout/voicecontrol_layout" />
<include layout="@layout/mousecontrol_layout" />
<include layout="@layout/keyboardcontrol_layout" />
</ViewFlipper> 
```

----在activity.java setContentView(R.layout.tt);当我调试这个程序时，程序就死了，没有日志，没有错误，没有异常，然后我像这样更改代码，一样，测试是否有问题：

```
<ViewFlipper android:layout_weight="36"
android:id="@+id/viewcontainer" android:measureAllChildren="true" 
    android:layout_width="fill_parent" android:layout_height="80dp"
android:persistentDrawingCache="animation"  android:flipInterval="500">
<include layout="@layout/remotecontrol_pv_layout" />                
<include layout="@layout/remotecontrol_pv_layout" />
<include layout="@layout/remotecontrol_pv_layout" />
<include layout="@layout/remotecontrol_pv_layout" />
<include layout="@layout/remotecontrol_pv_layout" />
</ViewFlipper> 
```

---这次效果很好。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:12:13.017

成功了！OOM错误，内存不足，布局过多

# javascript - 如何列出 iframe 请求的资源

> ID：12650030
> 
> 赞同：1
> 
> 时间：2012-09-29T04:50:41.417
> 
> 标签：javascript, networking, iframe, resources

我正在尝试构建一个网页，该网页将显示第 3 方 iframe 请求的资源。

与谷歌浏览器开发者工具中的网络选项卡提供类似输出的东西（但不是那么浮华）。

你们知道任何可以帮助我做到这一点的javascript函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:25:01.013

没有 JavaScript 函数可以让您在网页上的浏览器中执行此操作，因为如果框架内容不在您的域中（同源策略），您将无法访问它。

您也许可以拥有这样做的浏览器扩展程序。另一种选择是在服务器上解析/呈现第 3 方页面并检测使用的资源，而不是将结果发送到您的页面。

# javascript - 带有重定向的链接的 Chrome html 5 视频失败

> ID：12650034
> 
> 赞同：0
> 
> 时间：2012-09-29T04:51:22.370
> 
> 标签：javascript, html, html5-video

我正在 Mac OS X 10.8.2 上使用 Chrome 版本 22.0.1229.79 进行实验。

```
<video src="" type="video/mp4">
</video> 
```

如果 src url 将首先返回重定向，则 chrome 会取消请求。而在其他浏览器（opera、safari、firefox）中，将完成重定向并返回相应mp4文件的地址（https://www.example.com/path/to/video.mp4）。

我发现了一个相关问题[http://code.google.com/p/chromium/issues/detail?id=102201](http://code.google.com/p/chromium/issues/detail?id=102201)。

谁能提供一些关于这个问题的规范或处理它的方法？

如果用**iframe**替换 html5 视频标签，它将执行重定向并返回 mp4 文件。但是，将无法使用 javascript 控制视频。

# objective-c - 呈现 UIViewControllers 查看故事板

> ID：12650040
> 
> 赞同：1
> 
> 时间：2012-09-29T04:51:57.610
> 
> 标签：objective-c, ios, uistoryboard

在故事板之前的 iOS 中，我使用 nib 并使用以下代码呈现 UIViewControllers 视图。我试图弄清楚如何用故事板做到这一点。它在调用 initWithNib 时崩溃。我愿意接受有关如何解决此问题的所有建议。先感谢您。

```
 folderCollectionView = [[FolderCollectionViewController alloc] initWithNibName:@"FolderCollectionViewController" bundle:nil];

        folderView = [folderCollectionView view];
        [folderView setFrame:CGRectMake([[self view] bounds].origin.x, [[self view] bounds].origin.y, [[self view] bounds].size.width, [[self view] bounds].size.height)];
        folderCollectionView.delegate = self;
        [[self view] insertSubview:folderView atIndex:1];
        [[self view] bringSubviewToFront:folderView];
        [folderView setBackgroundColor:[UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.0f]];

        folderView.alpha = 0.0;
        [UIView animateWithDuration:1.2f
                              delay:0.0f
                            options: UIViewAnimationCurveEaseIn
                         animations:^{
                             folderView.alpha = 1.0;
                         }completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:36:49.413

代替

```
 folderCollectionView = [[FolderCollectionViewController alloc] initWithNibName:@"FolderCollectionViewController" bundle:nil]; 
```

和

```
 folderCollectionView = [self.storyboard instantiateViewControllerWithIdentifier:@"FolderCollectionViewController" bundle:nil]; 
```

确保在界面生成器中设置标识符

![在此处输入图像描述](../Images/018f69f79d4f3fcc61c753f5804dee16.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:32:53.400

对于情节提要，您通常不会使用 iniWithNib 方法。你通过调用来做到这一点

```
[self performSegueWithIdentifier:@"segueIdentifier" sender:buttonName]; 
```

在您从一个视图拖动到另一个视图后，该标识符在情节提要文件中设置。然后配置您实现的新视图

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    folderCollectionView = [segue destinationViewController];
    ...
    // Complete the rest of you view initialization here
} 
```

您可以在此处阅读有关故事板的更多信息：[Apple 的故事板](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:46:16.943

我有同样的问题。

我是这样做的：

```
AddsViewController *addsViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"AddsViewController"];
[self.navigationController pushViewController:addsViewController animated:YES]; 
```

# iphone - 处理设备方向 iPad 的最佳方法

> ID：12650046
> 
> 赞同：0
> 
> 时间：2012-09-29T04:52:48.640
> 
> 标签：iphone

> **可能重复：**
> [iphone/ipad 方向处理](https://stackoverflow.com/questions/2815802/iphone-ipad-orientation-handling)

请再说一遍。我是 iOS 的新手。你能告诉我处理设备方向的最佳方法吗？

我的意思是在方向改变时替换子视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:12:50.703

在发布任何问题之前，请先做一些 RnD。这是专门针对 iOS 的任何平台的最佳站点。这个问题已经回答了。因为你是一只新蜜蜂，没关系。

这是[链接](https://stackoverflow.com/questions/2815802/iphone-ipad-orientation-handling)，你可以试试这个。希望它对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:28:15.553

IOS 6中的新方法在这里让你知道`Device Orientation`

此方法用于支持设备方向`UIInterfaceOrientationMaskAll`意味着它将支持所有 4 个方向。

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

当您的设备更改当前方向时，将调用此方法。

```
-(BOOL)shouldAutorotate
{
   if(UIInterfaceOrientationPortrait == [[UIDevice currentDevice] orientation])                  
   {
      NSLog(@"Portrait Mode");
   }
   else if(UIInterfaceOrientationPortraitUpsideDown == [[UIDevice currentDevice] orientation])
   {
      NSLog(@"Portrait UpSideDown Mode");
   }
   else if(UIInterfaceOrientationLandscapeLeft == [[UIDevice currentDevice] orientation])
   {
      NSLog(@"Landscape Left Mode");
   }
   else
   {
      NSLog(@"Landscape Right Mode");
   }
   return YES;
} 
```

`UIInterfaceOrientation`有关IOS 中 IOS 6 [Interface Orientation](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/supportedInterfaceOrientationsForWindow%3a)的更多信息，请参阅此链接

# python - 如何使用 psycopg 和 gevent 汇集连接？

> ID：12650048
> 
> 赞同：17
> 
> 时间：2012-09-29T04:53:05.213
> 
> 标签：python, postgresql, asynchronous, gevent, psycopg

psycopg 文档状态：“Psycopg 连接不是绿色线程安全的，并且不能由不同的绿色线程同时使用。尝试使用每个线程一个游标一次执行多个命令将导致错误（或版本上的死锁） 2.4.2 之前）。因此，建议程序员要么避免在协程之间共享连接，要么使用库友好的锁来同步共享连接，例如用于池。

我找不到绿色线程安全的池实现 - 那里有吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T07:44:12.717

我假设你知道[gevent-psycopg2](https://github.com/zacharyvoase/gevent-psycopg2)模块，它使`psycopg`greenlet 友好。

寻找连接池解决方案我尝试了 2 个解决方案：

*   `SQLALchemy`- 它似乎与猴子补丁线程和`gevent-psycopg2`. 该类在内部[`QueuePool`](http://docs.sqlalchemy.org/en/rel_0_7/core/pooling.html#sqlalchemy.pool.QueuePool)使用`threading`模块进行锁定，因此需要进行猴子修补，即使`gevent-psycopg2`是`psycopg2`绿色的。

*   示例中有一个`psycopg2` [连接池](https://github.com/gevent/gevent/blob/master/examples/psycopg2_pool.py)`gevent`示例

我已经尝试了这两种解决方案，但不是在生产负载下 - 所以我还不能说它们的稳健性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T10:18:19.163

如果你打电话`gevent.monkey.patch_thread()`，你应该可以使用`psycopg2.pool.ThreadedConnectionPool`.

*   文档：http: [//initd.org/psycopg/docs/pool.html#psycopg2.pool.ThreadedConnectionPool](http://initd.org/psycopg/docs/pool.html#psycopg2.pool.ThreadedConnectionPool)
*   来源：[https ://github.com/dvarrazzo/psycopg/blob/2_4_5/lib/pool.py#L173](https://github.com/dvarrazzo/psycopg/blob/2_4_5/lib/pool.py#L173)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T07:39:55.620

这是一个很好的池（不仅仅是示例，而是在生产中使用）：[psycopg2_pool.py](https://github.com/gevent/gevent/blob/master/examples/psycopg2_pool.py)

# c++ - 闪烁（后台缓冲区？）

> ID：12650051
> 
> 赞同：2
> 
> 时间：2012-09-29T04:53:46.210
> 
> 标签：c++, opengl

一旦我运行我的应用程序，应用程序的视口就会在两个渲染之间以闪烁的模式闪烁。我假设前后缓冲区正在交换。

我怎样才能防止这种情况？我希望所有的三角形一直都在屏幕上。

我正在研究一个谢尔宾斯基垫片（我很接近但还没有完成。不要告诉我我想弄清楚！）。不过，我对一般代码清理很感兴趣。我愿意接受任何建议！

```
#include SFML/Graphics.hpp
#include GL/glew.h

using namespace sf;

struct point
{
    float x, y; // z is always 0 ... for now. MWUAHAHAA
};

point points[3] = {{0.f, 1.f},     // top
                 {-1.f, -1.f},     // left
                 { 1.f, -1.f}};     // right

point temp = {points[0].x, points[0].y};

void renderFirstTriangle()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBegin(GL_TRIANGLES);

    glColor3f(1.f, 1.f, 1.f);
    glVertex3f(points[0].x, points[0].y, 0.f);

    glColor3f(1.f, 1.f, 1.f);
    glVertex3f(points[1].x, points[1].y, 0.f);

    glColor3f(1.f, 1.f, 1.f);
    glVertex3f(points[2].x, points[2].y, 0.f);

    glEnd();
}

int main()
{
Window window(VideoMode(800, 600), "Fractal", Style::Default, ContextSettings(32));
window.setVerticalSyncEnabled(true);

renderFirstTriangle();

while (window.isOpen())
{
    Event event;
    while (window.pollEvent(event))
    {
        if (event.type == Event::Resized)
            glViewport(0, 0, event.size.width, event.size.height);

        else if (event.type == Event::Closed)
            window.close();
    }

    for (int i = 0; i < 2; i++)
    {
        // calculate new vertex positions

        temp.x = points[0].x;
        temp.y = points[0].y;

        glBegin(GL_TRIANGLES);

        if( i % 2 )
            glColor3f(0.1f, 0.1f, 0.1f);

        glVertex3f((points[0].x + points[1].x) / 2, (points[0].y + points[1].y) / 2, 0.0f);
        glVertex3f((points[1].x + points[2].x) / 2, (points[1].y + points[2].y) / 2, 0.0f);
        glVertex3f((points[2].x + temp.x) / 2, (points[2].y + temp.y) / 2, 0.0f);

        glEnd();
    }
    window.display();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:42:14.127

每次通过主循环清屏：

```
// g++ main.cpp -lGL -lsfml-graphics -lsfml-window
// using SFML 1.6

#include <SFML/Graphics.hpp>

using namespace sf;

struct point
{
    float x, y; // z is always 0 ... for now. MWUAHAHAA
};

point points[3] = {{0.f, 1.f},     // top
                 {-1.f, -1.f},     // left
                 { 1.f, -1.f}};     // right

point temp = {points[0].x, points[0].y};

void renderFirstTriangle()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBegin(GL_TRIANGLES);

    glColor3f(1.f, 1.f, 1.f);
    glVertex3f(points[0].x, points[0].y, 0.f);

    glColor3f(1.f, 1.f, 1.f);
    glVertex3f(points[1].x, points[1].y, 0.f);

    glColor3f(1.f, 1.f, 1.f);
    glVertex3f(points[2].x, points[2].y, 0.f);

    glEnd();
}

int main()
{
    Window window(VideoMode(800, 600), "Fractal");
    window.UseVerticalSync(true);

    renderFirstTriangle();

    while (window.IsOpened())
    {
        Event event;
        while (window.GetEvent(event))
        {
            if (event.Type == Event::Resized)
                glViewport(0, 0, event.Size.Width, event.Size.Height);

            else if (event.Type == Event::Closed)
                window.Close();
        }

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        for (int i = 0; i < 2; i++)
        {
            // calculate new vertex positions

            temp.x = points[0].x;
            temp.y = points[0].y;

            glBegin(GL_TRIANGLES);

            if( i % 2 )
                glColor3f(0.1f, 0.1f, 0.1f);

            glVertex3f((points[0].x + points[1].x) / 2, (points[0].y + points[1].y) / 2, 0.0f);
            glVertex3f((points[1].x + points[2].x) / 2, (points[1].y + points[2].y) / 2, 0.0f);
            glVertex3f((points[2].x + temp.x) / 2, (points[2].y + temp.y) / 2, 0.0f);

            glEnd();
        }
        window.Display();
    }
} 
```

# apache-flex - 关于 flex httpservice 问题

> ID：12650052
> 
> 赞同：0
> 
> 时间：2012-09-29T04:54:07.820
> 
> 标签：apache-flex

我创建了一个扩展 HttpService 的名为 xxHttpService 的类，并且我重写了构造方法，在该构造方法中我设置了一个自定义标头以便发送到本地服务器执行操作。奇怪的是，我无法从标头中获取值，它始终是 A因为我从服务器端将其设置为 B 。有什么见解吗？提前致谢 。

```
public class xxxHttpService extends HTTPService
    {
        public function xxxHttpService( handler:Function ){

            ****
            this.headers = {HTTP_USER: "Wking"};
            ****
              }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:34:28.857

如果您不使用 mxml 版本，则 mx.rpc.http.HTTPService 的构造函数具有以下标题：

```
HTTPService(rootURL:String = null, destination:String = null) 
```

如果您使用的是 mx.rpc.http.mxml.HTTPService 包中的 mxml 版本，则不能有带参数的构造函数。

我想你说的是第一种情况。

覆盖该构造函数将为您提供类定义：

```
public class XxxHttpService extends HTTPService
{
   public function XxxHttpService(rootURL:String = null, destination:String = null) {
      super(rootURL, destination);
      ...
      this.headers = {HTTP_USER: "Wking", HTTP_PASSWORD: "Equeen"};

   }

} 
```

构建此服务

```
myService = new XxxHttpService("http://rooturl" , "myDestination")
myService.addEventListener(myHandler, ResultEvent.RESULT)
...
protected function myHandler(event:ResultEvent) {
   ...
} 
```

应该给你：

```
HTTP_USER:Wking
HTTP_PASSWORD:Equeen 
```

在调用函数 send() 时的 http 标头中

```
myService.send(); 
```

我不确定，但如果你想将它们作为 GET 变量的 POST 发送，你应该这样做：

```
myService.method = "POST";//or "GET"
myService.send({HTTP_USER: "Wking", HTTP_PASSWORD: "Equeen"}); 
```

# c# - 如何使用 C#.net 在 datagridview 中添加电子邮件链接？

> ID：12650057
> 
> 赞同：0
> 
> 时间：2012-09-29T04:54:44.980
> 
> 标签：c#, datagridview, email

谁能告诉我如何将电子邮件链接添加到包含电子邮件地址的特定列。例如，我有一个数据库，在从 Excel 表填充的网格视图中包含员工或客户的详细信息。分别包含每个客户的电子邮件地址的列之一显示在网格视图中。我在这里想要的只是通过单击一个人的特定电子邮件 ID，邮件的撰写页面应该以收件人的所选电子邮件 ID 打开文本框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T05:33:22.043

添加 DataGridViewLinkColumn 并将其绑定到数据源的电子邮件地址列。在您的 DataGridView_CellClick 事件中添加以下代码：

```
if (e.ColumnIndex == 0) // Assuming it's the first column
{
    Process.Start("mailto:" + dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
} 
```

您可以致电 Process.Start("mailto:test@test.com"); 它应该启动您的默认邮件客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T05:45:49.457

在 DGV 的 cellclick 事件中，检查 columnindex 是否属于电子邮件列，如果您想使用默认邮件客户端，请使用 Adam 的解决方案以及从单元格获取的电子邮件值，或者您的应用程序是否有自己的撰写页面，将值作为属性或其他东西传递。简单的解决方案是最好的。

# c# - 如何在电子邮件正文中发送 IFrame？

> ID：12650060
> 
> 赞同：1
> 
> 时间：2012-09-29T04:54:55.847
> 
> 标签：c#, asp.net, email, iframe

我如何在电子邮件正文中发送 iframe。这就是我发送邮件的方式。

```
 string getemail = textbox_email.Text;
        System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
        message.To.Add(getemail);
        message.Subject = "Hello";
        message.From = new System.Net.Mail.MailAddress("sendingemail");
        message.Body = "This is message body";
        System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.gmail.com");
        smtp.Credentials = new System.Net.NetworkCredential("sendingemail", "password");
        smtp.EnableSsl = true;
        smtp.Send(message);
        Response.Write("Sent"); 
```

这是 html 中的 iframe。实际上 iframe 将包含 youtube 视频链接。

```
<iframe id="iframe" runat="server" src="http://www.w3schools.com"  scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe> 
```

我怎样才能在电子邮件正文中发送它？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:11:57.723

您可以使用[IsBodyHtml](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml%28v=vs.100%29.aspx)属性或[AlternativeViews](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.alternateviews%28v=vs.100%29.aspx)来发送 HTML。

如果您希望客户端将在您的 IFrame 中呈现内容，由于邮件客户端的安全限制（类似于阻止外部图像），它很可能不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:21:56.097

虽然您的电子邮件收件人的客户端不太可能呈现 iframe，但根据您的预期目标，您可能需要查看 WebClient 类的 DownloadString 方法。

# apache - 让 apache 在 LAN 上服务

> ID：12650065
> 
> 赞同：0
> 
> 时间：2012-09-29T04:55:39.677
> 
> 标签：apache, ubuntu

所以我运行了最新版本的 Ubuntu 和 Apache。Apache 适用于本地主机，但我无法弄清楚如何从同一无线网络上的笔记本电脑加载它。我尝试了很多不同的东西，但不确定哪些是相关的或有助于诊断问题。我是一个完整的 Linux 和网络菜鸟。感谢您的帮助！

编辑：澄清一下，Apache 在 Ubuntu 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:56:34.753

Ubuntu 服务器。ifconfig 获取IP地址。转到您的笔记本电脑并在您的网络浏览器中输入地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:04:04.337

如果您的 apache 在您的笔记本电脑上的 localhost 界面上运行，只需在浏览器窗口中输入：`http://localhost/`或`http://127.0.0.1`.

如果您想让您的站点可用于无线网络中的其他主机，您必须使用[指令](http://httpd.apache.org/docs/2.4/bind.html)`ifconfig`在您的外部 IP 地址（可以由实用程序显示）上运行 apache 。然后，如果您不使用[虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)，请使用绑定地址访问您的站点，否则使用配置的虚拟主机名。`Listen`

# cuda - 在 win7 64bit 中设置 tdrlevel cuda 时结果错误

> ID：12650074
> 
> 赞同：-2
> 
> 时间：2012-09-29T04:56:34.063
> 
> 标签：cuda

当我在 cuda 上计算时，这是真的，但是当我使用更大的数字进行计算时，我必须将 TdrLevel 设置为
[这个链接](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487368.aspx) 。但是在设置 tdrlevel 之后，我得到了一个错误的结果。(-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080-431602080- 431602080-431602080-431602080-431602080-431602080-431602080-4316080-431602080-431602080-431602080-431602080-431602080-431602080208020802080208021616020802002020802161602161616161616161616020802020802020202020200202161602020200202602026020202026020260转

我不知道哪里有问题。我的块数是 512 ，每个块的线程数是 1024 。我希望找到我的意思。

* * *

```
that's my program code for fibunatchi program it work without tdrlevel but have above result by tdrlevel :

#include <stdio.h>
#include <cuda.h>
#include   <dos.h>

__global__ void fibunat_array(float *a,int N )
{    
    for (int x=0; x< N; x += 1)
    {
        a[x]=0;
    }
    a[0]=1;a[1]=1;  
    for (int i=0; i< N; i += 1)
    {
        a[i+2]=a[i]+a[i+1];       
    }       
}

int main( void )
{
    time_t start,end;
    double dif;
    time ( &start );

    float *a_h,*a_d;
    const int N = 100;

    size_t size = N * sizeof( float );
    a_h = (float *)malloc( size );    

    cudaMalloc( (void **)&a_d, size );  
    cudaMemcpy( a_d, a_h, size, cudaMemcpyHostToDevice );

    int block_size = 9<<1;
    int n_blocks   = (N+ block_size-1) /block_size;
    square_array <<< n_blocks , block_size >>> ( a_d, N );
    cudaMemcpy( a_h, a_d, sizeof( float ) * N, cudaMemcpyDeviceToHost );

    for (int i = 0; i<N/3+10 ; i++)
        printf( "%d  ",(int)a_h[i] ); 

    free( a_h );
    cudaFree( a_d );

    time ( &end );
    dif=difftime(end,start);

    printf ( "\n\n");
    printf ( "total time for this calculate is : %d second\n\n",(int)dif);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:39:12.297

这段代码有几个问题。例如，一个问题是您使用名称 fibunat_array 定义内核，但您调用名称为 square_array 的内核。因此，您发布的代码甚至无法正确编译。另一个问题是你的内核是从串行代码解决问题的角度编写的，没有考虑并行运行线程。启动内核时创建的每个线程都将运行完全相同的代码。如果使用多个线程/块，这将不起作用，并且不是利用机器的好方法。

您似乎想要计算斐波那契数列中的前 100 个数字。您可能需要考虑这一点的含义。此[页面](http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibFormula.html)可能会有所帮助。例如，此序列范围内的一些最大数字不适合 64 位整数。对于 32 位代码，您的无符号整数大小在序列中大约 47 个数字之后会太小。此外，创建并行斐波那契生成器可能需要一个与您想到的串行算法不同的算法。

即使您确实创建了一个并行斐波那契生成器，并且假设每个线程计算该系列的 1 个元素，您也会在 100 个元素内用完（64 位）机器分辨率，这意味着您可以从机器中获得最大的并行度将少于 100 个线程（在这些假设下）。要产生一些在串行算法的加速方面可能不会给出非常令人满意的结果的东西需要做很多工作。一般来说，当我们可以运行数千个线程时，GPU 会提供最好的结果。

说了这么多，如果只是为了一个证明点，你可以得到一些工作。由于您的原始工作存在一些问题，因此我只提供一些确实产生正确结果的代码会更简单。这不是我所说的对 GPU 的合理使用，但是您可以通过对原始代码进行一些小的更改来获得正确的结果：

```
#include <stdio.h>
#include <cuda.h>
// #include   <dos.h>

__global__ void fib(float *a,int N )
{
    for (int x=0; x< N; x += 1)
    {
        a[x]=0;
    }
    a[0]=1;a[1]=1;
    for (int i=0; i< (N-2); i += 1)
    {
        a[i+2]=a[i]+a[i+1];
    }
}

int main( void )
{
//    time_t start,end;
//    double dif;
//    time ( &start );

    float *a_h,*a_d;
    const int N = 40;

    size_t size = N * sizeof( float );
    a_h = (float *)malloc( size );

    cudaMalloc( (void **)&a_d, size );
    cudaMemcpy( a_d, a_h, size, cudaMemcpyHostToDevice );

   //  int block_size = 9<<1;
   //  int n_blocks   = (N+ block_size-1) /block_size;
   fib<<<1,1>>> ( a_d, N ); // just one thread does all the work
   cudaMemcpy( a_h, a_d, sizeof( float ) * N, cudaMemcpyDeviceToHost );

   for (int i = 0; i<N ; i++)
     printf( "%d  ",(int)a_h[i] );

   printf("\n");
   free( a_h );
   cudaFree( a_d );

//    time ( &end );
//    dif=difftime(end,start);

//    printf ( "\n\n");
//    printf ( "total time for this calculate is : %d second\n\n",(int)dif);

} 
```

我已经注释掉了计时部分。如果你愿意，你可以取消注释。由于我们没有使用 GPU 中的任何并行性，因此时序不会令人印象深刻。此外，这段代码还有很多特点，其中最明显的一点是我们只启动了一个线程，并且实际上将 GPU 用作串行机器。由于这不是进行 GPU 编程的方法，因此您不应将此作为指导性示例。[CUDA SDK](http://developer.nvidia.com/cuda/cuda-cc-sdk-code-samples)中有许多优秀的 GPU 编程示例，以及网络上的各种其他资源。

# openssl - 无法生成 Apple Passbook 签名

> ID：12650075
> 
> 赞同：5
> 
> 时间：2012-09-29T04:57:41.347
> 
> 标签：openssl, certificate, ios6, smime, passbook

我正在编写一个 shell 脚本来使用 p12 证书从 manifest.json 自动生成一个 Apple Passbook 签名文件。这是我所做的：

```
openssl pkcs12 -passin pass:"mypass" -in "mycert.p12" -clcerts -nokeys -out certificate.pem
openssl pkcs12 -passin pass:"mypass" -in "mycert.p12" -nocerts -out key.pem
openssl smime  -passin pass:"mypass" -binary -sign -signer certificate.pem -inkey key.pem -in manifest.json -out signature -outform DER 
```

前两个功能工作正常。至少同时创建了 certificate.pem 和 key.pem。签名文件也被创建，但由于某种原因它是空的（0 字节），虽然 manifest.json 不为空，还有证书和密钥。这怎么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T02:05:34.317

我已经解决了这个问题。显然，我还需要 WWDR.pem 证书来执行此操作。它是这样工作的：

```
openssl pkcs12 -passin pass:"somepass" -in "mycert.p12" -clcerts -nokeys -out certificate.pem
openssl pkcs12 -passin pass:"somepass" -in "mycert.p12" -nocerts -out key.pem -passout pass:"somepass"
openssl smime -binary -sign -certfile WWDR.pem -signer certificate.pem -inkey key.pem -in manifest.json -out signature -outform DER -passin pass:"somepass" 
```

# wordpress - 如何防止 WordPress 页面被用户删除

> ID：12650079
> 
> 赞同：4
> 
> 时间：2012-09-29T04:59:15.710
> 
> 标签：wordpress

一些 WordPress 插件创建页面或帖子，插件的正常功能依赖于该页面或帖子的存在。例如，管理电子邮件列表的插件可能依赖于取消订阅页面，用户可能会故意或意外删除该页面。

插件如何防止其页面被删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T04:59:15.710

首先，当您创建页面时，您可以将其 ID 存储在稍后需要获取的选项中：

```
add_option('undeleteable_page_id', $the_page_id, '', 'no'); // 'no' so this option does not load on every page 
```

然后，您使用函数连接到删除操作以防止删除：

```
add_action('deleted_post', 'prevent_undeleteable_page_deletion');
add_action('trashed_post', 'prevent_undeleteable_page_trash'); 
```

在这些函数中，您检查被删除页面的 id 并将其与您在创建页面时存储的 id 进行比较。

```
if($id == get_option('undeleteable_page_id')) ... 
```

在“防止垃圾”功能中，您将状态更改回发布。在防止删除功能中，您重新创建页面。

我就是这样做的，它对我有用。我很想看看其他人如何解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T16:46:20.117

Stephen Jones 描述了另一种有趣的方法，即简单地将页面隐藏在 wp-admen 页面列表中，这里： [hide-certain-pages-posts-on-wp-admin-show-custom-filter](https://wordpress.stackexchange.com/questions/142884/hide-certain-pages-posts-on-wp-admin-show-custom-filter)

# clisp - 关于 stumpwm 和 swank(clisp)

> ID：12650082
> 
> 赞同：1
> 
> 时间：2012-09-29T04:59:42.170
> 
> 标签：clisp, slimv, stumpwm

我已经使用启用线程的 clisp 成功构建了 stumpwm。并且创建的 stumpwm 效果很好。但是，如果从 ~/.stumpwmrc 启动，swank 服务器将无法工作，如下所示：

```
(load  "~/.vim/slime/start-swank.lisp") 
```

swank 服务器确实已启动，`netstat -na`表明它正在端口 4005 上侦听。但`telnet 127.0.0.1 4005`会报告“连接已被对等方关闭”。使vim中的slimv无法连接到swank server。

如果我启动另一个 clisp REPL 并运行`(load "~/.vim/slime/start-swank.lisp")`，那么 telnet 和 slimv 都可以正常工作。

为什么`(load "~/.vim/slime/start-swank.lisp")`在 ~/.stumpwmrc 中不起作用？

仅供参考，stumpwm 日志：

```
 Starting swank on port 4005
 ;;  Loading file /home/***/.vim/slime/start-swank.lisp ...
 ;;  Loading file /home/***/.vim/slime/swank-loader.lisp ...
 ;;  Loaded file /home/***/.vim/slime/swank-loader.lisp
 ;;   Loading file /home/***/.slime/fasl/2012-03-06/clisp-2.49-unix-pc386/swank-backend.fas ...
 ;;  ...
 ;;   Loaded file /home/***/.slime/fasl/2012-03-06/clisp-2.49-unix-pc386/contrib/swank-mrepl.fas
 ;; Swank started at port: 4005. 
```

看起来不错，但我不能再使用 stumpwm 了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:02:45.873

我对 slimv 不熟悉，但似乎您要做的就是在 lisp 中启动一个服务器并连接到它。把事情简单化。因为我真的不想了解太多关于 .stumpwmrc 中发生的事情`start-swank.lisp`，而您可能也不想，所以我建议您通过将其放入 .stumpwmrc 中来启动一个 swank 服务器：

```
(ql:quickload "swank")
(swank:create-server :port #<choose a port number>) 
```

然后使用 slimv 的等效端口号连接到该端口号`M-x slime-connect`。如果 quicklisp 中的 swank 版本与 slimv 不兼容，请确保您有一个兼容的版本`REQUIRE`。

试试看，如果还是不行，请查看 swank 和 slimv 的版本号并发布您的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:20:45.290

从 clisp 邮件列表中，我得到了一个建议：我们应该修改 ~/.vim/slime/swank-clisp 如下：

```
(defimplementation preferred-communication-style () :spawn) 
```

运行`(load "~/.vim/slime/start-swank.lisp")`启动swank server后，slimv可以正常连接swank server。

现在 slimv 与 clisp(with thread support) 配合得很好。

问候！

# websocket - 如何使用wireshark调试websockets

> ID：12650083
> 
> 赞同：21
> 
> 时间：2012-09-29T05:00:09.347
> 
> 标签：websocket, wireshark

我已经在 localhost **ws://localhost:8001上使用****python tornado 服务器**托管了我的 websocket 服务器，并且客户端在 192.168.0.116 上的另一个系统上，所以当我们尝试通信时它工作正常，但无法使用**wireshark**调试它。我的 websocket 在端口 8001 上运行，所以我尝试使用

 ****```
tcp.port==8001 
```

但没有找到结果，所以我然后在 http 上尝试了它，我在 lan 中的 ip 是 192.168.0.219 和端口 8001。所以

```
http.host == 192.168.0.219 && tcp.port == 8001 
```

但没有找到结果。还有什么我可以尝试调试我的 websocket 的吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-25T17:06:45.257

您还可以使用显示过滤器过滤以仅显示 WebSocket 数据包：

```
(websocket) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-29T07:32:20.333

最后我找到了。

当我把

```
tcp.dstport == 8001 || tcp.srcport == 8001 
```

到时候我就可以捕捉到了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T06:31:05.283

检查过滤器的语法，在您的情况下，它应该是`tcp port 8001`.

一步步：

1.  捕获选项
2.  选择网络接口
3.  填写按钮“捕获过滤器：”旁边的字段`tcp port 8001`
4.  开始****

# sql - 如何在SQLite中选择某列总和满足某些要求的前N行？

> ID：12650084
> 
> 赞同：0
> 
> 时间：2012-09-29T05:00:50.400
> 
> 标签：sql, sqlite

如果我们有一个表，其中有一列名为 X 包含 int。现在我想尽可能多地选择（实际上我想删除）X之和但不超过300的最旧的N行？

```
 _id|X
    1|50
    2|150
    3|80
    4|100
    5|200
    6|70 
```

其中 1 是最旧的，6 是最新的。所以我想得到第 1、2、3 行，其 X 的总和为 280。是否可以通过一个 select 语句来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:59:11.217

这应该这样做：

```
.mode columns
.headers on

CREATE TABLE foo (id INTEGER PRIMARY KEY AUTOINCREMENT, value INT);
INSERT INTO foo (value) VALUES (50), (150), (80), (100), (200), (70);

SELECT t1.id, t1.value
FROM foo t1 INNER JOIN foo t2 ON t2.id <= t1.id
GROUP BY t1.id, t1.value
HAVING SUM(t2.value) <= 300
ORDER BY t1.id; 
```

`SELECT`回报：

```
id          value
----------  ----------
1           50
2           150
3           80 
```

要删除选定的记录：

```
DELETE FROM foo WHERE id IN (
    SELECT t1.id
    FROM foo t1 INNER JOIN foo t2 ON t2.id <= t1.id
    GROUP BY t1.id, t1.value
    HAVING SUM(t2.value) <= 300); 
```

# java - 将二维对象数组存储为字符串

> ID：12650088
> 
> 赞同：0
> 
> 时间：2012-09-29T05:02:46.770
> 
> 标签：java, arrays, string, multidimensional-array, maze

我有一个 Cell 类对象的二维数组。在一个单独的 Maze 类中，我从文件中读取 2D 数组，现在我需要一个将整个数组作为字符串返回的方法。我不知道该怎么做，任何帮助都会很棒（我在 Cell 类中有一个方法，它将单元格作为字符串返回）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T05:08:44.603

使用 2 个嵌套循环打印矩阵：

```
String temp = "";

// foreach row...
for( int i = 0; i < cells.length; i++ )
{

    // ... move across columns
    for( int j = 0; j < cells[i].length; j++ )
    {

        temp += (cells[i][j] + " ");

    }

    // let's move to a new line
    temp += "\n";

}

System.out.println(temp); 
```

假设你的`Cell`对象有一个`toString()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:41:17.027

您可以使用`Arrays.deepToString()`方法打印多维数组的字符串

```
 String[][] str = new String[][]{{"a","b"},{"c","d"}};
    System.out.println(Arrays.deepToString(str)); 
```

输出

```
 [[a, b], [c, d]] 
```

为此，您需要`toString()`在单元格类中有方法。`toString()`否则将使用默认方法。

# sql - 我是否在运行正确的 SQL 查询？

> ID：12650089
> 
> 赞同：1
> 
> 时间：2012-09-29T05:02:52.327
> 
> 标签：sql

我有以下表格，

清单：

```
ID varchar2(33)
Name varchar2(100) 
```

用户：

```
ID varchar2(33)
Name varchar2(100) 
```

用户列表

```
ID auto-generated
UserId references ID from Users
ListingId references ID from Listing 
```

我想找到最喜欢的用户列表（在这种情况下是 User_listing 表中计数最高的列表。例如，如果 user_listing 表包含`<id,user_id,listing_id>,`

```
1 1 2
1 1 3
1 2 3
1 3 3 
```

最喜欢的列表是 3

这是运行正确的查询吗？

```
Select Listing.name
  from Listing
 where Listing.id = (Select p.id 
                       from User_listing p, User_listing q
                     having count(p.id) > count(q.id)
                      GROUP BY p.id) 
```

另外，如果我必须打印出前 5 个最爱，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:27:12.407

这取决于您使用的是哪种 SQL，至少对于您获得前 5 条记录的部分。在 SQL Server 中，您将使用“Select Top 5”。在 MySQL、Postgres、Oracle 等中，它是“限制 5”。

这是一个 MySQL 解决方案，它选择了有关前 5 个列表的所有信息：

```
SELECT * FROM listing
JOIN 
(SELECT listing_id
FROM user_listing
GROUP BY listing_id 
ORDER BY count(listing_id) DESC
LIMIT 5) as top_five ON top_five.listing_id=listing.id; 
```

如果您只需要顶级列表的 id，则可以这样做：

```
SELECT listing_id
    FROM user_listing
    GROUP BY listing_id 
    ORDER BY count(listing_id) DESC
    LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:38:54.587

甲骨文方式

```
select * from (
    select ListingID, Name, count(*) FrequencyOfListingID
      from UserListing, Listing
     where Listing.ID = UserListing.ListingID
     group by ListingID 
     order by 2 desc) 
 where rownum < 6 
```

MsSql 方式**未测试**

```
 select Top 5 ListingID, Name, count(*) FrequencyOfListingID
      from UserListing, Listing
     where Listing.ID = UserListing.ListingID
     group by ListingID 
     order by 2 desc) 
```

MySQl 方式**未经测试**

```
 select ListingID, Name, count(*) FrequencyOfListingID
      from UserListing, Listing
     where Listing.ID = UserListing.ListingID
     group by ListingID 
     order by 2 desc 
     Limit 5 
```

# c - 用 C 编写自己的 Unix shell - PATH 和 execv 的问题

> ID：12650092
> 
> 赞同：4
> 
> 时间：2012-09-29T05:03:36.263
> 
> 标签：c, shell, unix, execv, getenv

我正在用 C 编写自己的 shell。它需要能够显示用户当前目录，根据完整路径执行命令（**必须使用 execv**），并允许用户使用 cd 更改目录。

这是作业。老师只给了我们关于 C 的基本入门知识和关于程序应该如何工作的非常简短的框​​架。由于我不是一个容易放弃的人，我已经研究了三天如何做到这一点，但现在我很难过。

这是我到目前为止所拥有的：

*   显示用户的用户名、计算机名和当前目录（默认为主目录）。
*   提示用户输入，并获取输入
*   将用户的输入按“”拆分为参数数组
*   通过“：”将环境变量 PATH 拆分为令牌数组

我不知道如何从这里开始。我知道我必须使用 execv 命令，但在我对谷歌的研究中，我还没有真正找到我理解的示例。例如，如果命令是 bin/ls，那么 execv 如何知道显示主目录中的所有文件/文件夹？如何告诉系统我更改了目录？

我一直在使用这个网站，这很有帮助： http: [//linuxgazette.net/111/ramankutty.html](http://linuxgazette.net/111/ramankutty.html)但我又一次被难住了。

谢谢你的帮助。让我知道是否应该发布一些现有代码，但我不确定是否有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:35:54.677

> 例如，如果命令是`bin/ls`，如何`execv`知道显示主目录中的所有文件/文件夹？如何告诉系统我更改了目录？

每个进程都有一个当前工作目录，可以使用[`chdir`](http://linux.die.net/man/3/chdir). 子进程将从其父进程继承工作目录。`cd`因此，通常您的 shell 将根据用户输入的命令来管理其当前工作目录。当输入一个非内置命令时，您将[`fork`](http://linux.die.net/man/3/fork)创建一个子进程，然后调用[`execv`](http://linux.die.net/man/3/execv)那里执行二进制文件。

If you ant to take the `PATH` into account for program names that contain no directory part, then you should try all possible combinations of a `PATH` element and the program name. You can either check whether the named file does exist, or simply try to execute it and continue with the next if that fails. If all `execv` calls failed, you will have to call [`_exit`](http://linux.die.net/man/2/_exit) in order to terminate the child process.

Note that most shells will treat any command which contains a `/` as a path which gets passed to `execv` directly. If the path does not *start* with a `/`, then it is a relative path, and the operating system will resolve it with respect to the current working directory. In other words, the `bin/ls` from your example would refer to the `ls` binary in the `bin` directory which is a subdirectory of the current working directory. Only commands which do not contain any `/` at all are either interpreted as a builtin command (like `cd`) or the name of some binary located on the `PATH`.

The first argument to `execv` is the path as you computed it. The first element of the `argv` list traditionally equals the name as it was enetered, i.e. without an added `PATH` directory. After that first argument, any additional command line parameters are passed, followed by a `NULL` to terminate the list.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:37:02.980

To implement the cd command you just need the system call `chdir`.

```
#include <unistd.h>

int chdir(
    const char *path /* the path name */
); 
```

So you can just call something like:

```
int ret1 = chdir("../foo/bar"); 
```

The return value of `chdir` is 0 when it was possible to change into that directory and -1 if an error occurred. For the error you should consolidate the man page.

The current directory can be checked by any program, so if you execute `ls` without any arguments, then ls checks in which directory it is running and uses this directory as the only argument. This is a feature of ls and not of the `execv` call.

For the second part.

```
#include <unistd.h>
int execv(
     const char *path, /* programm path*/
     char *const argv[]/* argument vector*/
); 
```

`execv` executes a executable file at the given `path` and with the arguments given in `argv`. So if you want to execute `/bin/ls ../foo /bar`, you need something similar to

```
char *cmd_str = "/bin/ls";
char *argv[] = {cmd_str, "../foo", "/bar", NULL };
if (execv(cmd_str, argv) == -1 ){
    /* an error occurred */
} 
```

The error returned by `execv` is -1\. If you want to know why it did not execute the comand check out the man pages.

The `NULL` in `char *argv[] = {cmd_str, "../foo", "/bar", NULL };` is there to indicate that there are no other arguments after the `NULL`.

The third part. Unix based system normally treat commands with a / in it as commands that can be executed directly. Which means you first check if there is a slash in the given command string.

```
int ret_value;
if (strchr(cmd_str, '/')
    if (execv(cmd_str, argv) == -1 ){
        /* an error occurred */
    } 
```

If there is no slash then you need to go through all directories in `PATH` and check if you can execute the command. So the given command is `ls ../foo /bar` and lets assume the value of `PATH` is `".:/sbin:/bin:/usr/bin"`. We would then try to first execute `./ls ../foo /bar` then `/usr/bin/ls ../foo /bar` and at last `/bin/ls ../foo /bar`.

Hope this helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T10:39:31.167

I think the issue is that you believe the shell is responsible for doing the work of `ls`. `ls` isn't really a "part" of the shell (in this case at least). The shell *executes* a program called `ls`. Most of the comments seem to be explaining how to find `ls`, but I don't believe that's what you're confused about.

You should consider carefully what the point of the shell is before you write it. The comments have indirectly pointed out the fact that the shell "simply" has to "call" programs like `ls` and `chdir`, not perform their tasks.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T10:52:53.257

`ls` knows by itself that, if not given any arguments, it is supposed to list files in the current working directory as returned by `getcwd`

# apache-flex - 如何在 Flex 中创建拖放图像功能？

> ID：12650095
> 
> 赞同：0
> 
> 时间：2012-09-29T05:03:41.207
> 
> 标签：apache-flex

我想创建一个谜题，使用户能够在列表框或任何其他边界内拖放图像。请帮助我我可以使用什么以及如何使用。我是新来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:28:22.913

查看[此](http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_7.html)链接。希望它可以帮助您解决问题。

# javascript - jQuery：调整窗口大小时检测元素的高度

> ID：12650104
> 
> 赞同：0
> 
> 时间：2012-09-29T05:06:12.587
> 
> 标签：javascript, jquery

我需要有关以下问题的帮助。

我正在创建一个响应式网站。它的结构非常基本：页眉、导航栏、正文和页脚。

在标题中，我有几个元素，所有这些元素都使用百分比来表示它们的尺寸，因此标题的*高度*由其中元素的高度决定。

对于导航栏，我计划使用“粘性”脚本，因此当您滚动页面时，导航栏会“粘”到页面顶部，一旦您一直向上返回，它就会“松开”并出现在标题下。

到现在为止还挺好。

问题是粘性脚本取决于标题的*高度*，以便正确地将导航栏粘贴在标题下方。因此，当我调整窗口大小以测试布局的响应性时，粘性导航栏会发疯。

我需要的是一种检测标题***高度***`<header>`并通过在ie上创建样式来修改 DOM 的方法。( `<header style="height:198.3px">`)，并在我调整浏览器窗口大小时为其分配动态高度。

我认为这是可以使用该`height();`属性完成的事情，但我不是 jQuery 专家，所以我不确定这是否可行。

任何帮助是极大的赞赏。

PS。顺便说一句，当您创建/编辑帖子时，Stackoverflow.com 会在右栏的框中使用此“粘性”功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:09:19.077

```
$('#elementId').height()//Return height of element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T05:09:24.393

您可以将事件侦听器添加到浏览器的调整大小事件。

```
$(window).resize(function () {
    // resize header here
    $("#header").css({
        height : $("#header").height()
    });
}); 
```

当您调整浏览器大小时，这将使用标题流体高度在标题上设置固定高度。

不确定这是否正是您要问的，但这演示了如何绑定到 resize 事件以及如何获取 DOM 节点高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T05:26:32.760

这样的事情应该让你开始：

```
var $sticky = $('#sticky');
var $header = $('header');

$(window).scroll(function() {
    if ($(this).scrollTop() > $header.offset().top + $header.height()) {
        $sticky.css({
            top: 0,
            position: 'fixed'
        });
    } else {
        $sticky.css({
            top: 'auto',
            position: 'absolute'
        });
    }
}).trigger('scroll');​ 
```

**演示：http: [//jsfiddle.net/Blender/S66gR/2/](http://jsfiddle.net/Blender/S66gR/2/)**

不要使用 JavaScript 复制 CSS，只需使用已有的内容即可。`position: fixed`使元素“粘”在屏幕上。

# php - 在 Zend 框架中配置站点时出现致命错误

> ID：12650106
> 
> 赞同：0
> 
> 时间：2012-09-29T05:06:23.930
> 
> 标签：php, zend-framework

我想将站点配置到 Zend 框架中，但是在配置代码时它显示以下错误：

```
 1\. Fatal error: Cannot redeclare class ExpediaRate in 
      /var/www/sitename/application/models/Search.php on line 3012 Call
      Stack: 0.0003 371520 1\.  {main}()
      /var/www/sitename/public/index.php:0 0.0087 1220360 
  2.
      Zend_Application->bootstrap() /var/www/sitename/public/index.php:97
      0.0087 1220404 
  3\. Zend_Application_Bootstrap_BootstrapAbstract->bootstrap()
      /var/www/sitename/library/Zend/Application.php:355 0.0087 1220404 
  4.
      Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap()
      /var/www/sitename/library/Zend/Application/Bootstrap/BootstrapAbstract.php:583
      0.0191 2475264 
  5\. Zend_Application_Bootstrap_BootstrapAbstract->_executeResource()
      /var/www/sitename/library/Zend/Application/Bootstrap/BootstrapAbstract.php:619
      0.0191 2475452 
  6\. Bootstrap->_initModels() /var/www/sitename/library/Zend/Application/Bootstrap/BootstrapAbstract.php:666
      0.0290 3903156 7.
 require_once('/var/www/sitename/application/models/Search.php')
          /var/www/sitename/application/Bootstrap.php:32 
```

无法理解这里有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T05:17:35.903

我认为您已经创建了`ExpediaRate` 两次该类，否则查看您的`application.ini`文件可能是您`include path`设置了两次。

# google-chrome - 编辑 Greasemonkey 脚本/Chrome 用户脚本时如何简化更改/重新加载过程？

> ID：12650111
> 
> 赞同：3
> 
> 时间：2012-09-29T05:07:47.333
> 
> 标签：google-chrome, google-chrome-extension, greasemonkey, userscripts

我发现我可以通过导航到`chrome://chrome/extensions/`第一个然后将`*.user.js`文件拖到此页面上来在 chrome 中安装 Greasemonkey 用户脚本。

每次更改脚本时都需要将此脚本拖到此页面上吗？当我更改脚本并希望查看更改时，我应该使用什么过程来重新加载更改的用户脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:11:02.903

对于普通`*.user.js`文件，是的，每次进行更改时都必须拖动它（重新安装）。

但是，如果您手动创建文件夹结构和您自己的`manifest.json`文件，如[**本答案的**](https://stackoverflow.com/a/5259212/331508)***控制脚本和名称***部分所示，那么您所要做的就是在每次更改后单击***重新加载***链接 - 或按。[](https://stackoverflow.com/a/5259212/331508)***`Ctrl``R`***

 ***我通常会在不同的窗口中打开扩展页面，这样我就可以快速`Alt``Tab`访问***重新加载***链接并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T01:49:11.453

我的方法是在 Firefox 下开发，然后只迁移到 Chrome 和我支持的任何其他浏览器，此时需要确保我的更新没有破坏辅助平台上的某些内容。

在 Firefox 中这样做有帮助的原因是，一旦安装了 Greasemonkey 脚本，您就可以编辑文件夹中已安装的文件`gm_scripts`，下次重新加载页面时它们会被拾取。

这甚至适用于使用诸如 CoffeeScript 之类的多文件脚本……您只需进行设置，以便用于生成最终文件的任何内容都在“监视更改并重新生成”模式下运行，并将安装的`gm_scripts`路径用作输出文件。***

# java - 如何根据它们的值将类对象添加到 hashMap？

> ID：12650122
> 
> 赞同：4
> 
> 时间：2012-09-29T05:11:49.463
> 
> 标签：java, object, hashmap

我正在从数据库中检索一些值，这些值需要添加到列表中，然后根据它们的值添加到具有特定键的 MAP，例如，

```
row 1   name = "A" category = "1"
row 2   name = "B" category = "2"
row 3   name = "C" category = "1"
row 4   name = "D" category = "3" 
```

我需要将第 1 行和第 3 行放在一个列表中，将第 2 行和第 4 行分别放在一个单独的列表中，然后将这三个列表放入 MAP 并使用类别名称 (1,2,3) 作为 MAP 的键。

```
MAP
   1 LIST1 (values of 2 rows)
   2 LIST2 (values of 1 row)
   3 LIST3 (values of 1 row) 
```

我不确定如何将它们添加到列表和 MAP。我的限制是，并非每次检索值时都会检索到相同的行，因此每次我可能需要不同数量的列表来保留已检索到的每个类别的值。

我的代码如下，

```
 ResultSet rs = st.executeQuery(SelectRows);
 Map map = new HashMap();
 if(rs.next())
 {
    item.setRowID(rs.getString("ID"));
    item.setName(rs.getString("Name"));                       
    item.setValue(rs.getString("Value"));
    item.setCat(rs.getString("Cat"));
    if(!map.containsKey(rs.getString("Cat"))){
        map.put(rs.getString("CatID"), new ArrayList());
    }
    map.get(rs.getString("CatID")).add(row);
 } 
```

最后一行遇到此错误>“”方法 add(Rows) 未定义对象类型。即使我将对象添加到列表中，我也会遇到相同的错误，方法 add(List) 未定义对象类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T05:42:12.767

您需要创建列表映射。当您阅读记录时，如果存在一个键（这里是类别），则将当前行添加到列表中

```
 Map map = new HashMap()
 for( Row row : resultset ) {
      if(!map.containsKey(row.category)){
            map.put(row.category, new ArrayList());
      }
      map.get(row.category).add(row.name);
  } 
```

**更新**

问题是您需要在此处指定泛型类型

```
 Map<String, List<Rows>> map = new HashMap<String, List<Rows>>()
 while( rs.next() ) {
      Rows row = new Rows();
      /*
       * code to initialize the values of row from the record
       */
      String category = rs.getString("Cat");
      if(!map.containsKey(category)){
            map.put(category, new ArrayList<Rows>());
      }
      map.get(category).add(row);
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T05:24:40.957

您可以使用以类别为键的地图，以列表的 ArrayList 作为值。ArrayList 在您添加时会自动更改大小。[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)使用 put(key, value) 添加元素。 [ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)使用 add(element) 或 add(index, element)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T05:29:46.907

我建议你在 Map 中使用 Map

```
Map<Integer, Map<Integer, String>> map = new HashMap<Integer, Map<Integer,String>>(); 
```

外部地图将根据行和值的地图进行分类。因此，每次您想根据行查找值时，您都可以轻松完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T20:22:51.730

我们还可以使用数组列表和链接列表以及向量空间。

```
Map<Integer, ArrayList<class-name(means object)>> map = new HashMap<>();

Map<Integer, Vector<class-name(means object)>> map = new HashMap<>();

Map<Integer, LinkList<class-name(means object)>> map = new HashMap<>(); 
```

所以使用其中之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-05T01:33:17.883

我声明了一个数据类型为 Map 的变量，如下所示：

```
Map params = new HashMap(); 
```

之后，我可以添加一个对象，如下所示：

```
params.put("id", indicatorId); 
```

# java - 如何在PhoneGap(Android)中调用android Soap Web服务

> ID：12650123
> 
> 赞同：0
> 
> 时间：2012-09-29T05:11:51.483
> 
> 标签：java, android, web-services, cordova, ksoap2

我想创建肥皂服务并从 android Phone gap 拨打电话..我不知道从哪里开始...有人能说一下吗...

任何人都可以向我推荐任何示例教程或示例。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:53:14.590

您可以使用 Jquery 来满足您的要求

有关详细信息，请查看这些链接，

[http://www.bennadel.com/blog/1853-Posting-XML-SOAP-Requests-With-jQuery.htm](http://www.bennadel.com/blog/1853-Posting-XML-SOAP-Requests-With-jQuery.htm)

[http://openlandscape.net/2009/09/25/call-soap-xm-web-services-with-jquery-ajax/](http://openlandscape.net/2009/09/25/call-soap-xm-web-services-with-jquery-ajax/)

[http://weblogs.asp.net/jan/archive/2009/04/09/calling-the-sharepoint-web-services-with-jquery.aspx](http://weblogs.asp.net/jan/archive/2009/04/09/calling-the-sharepoint-web-services-with-jquery.aspx)

[如何从 Phonegap（iPhone 应用程序）调用 SOAP 服务](https://stackoverflow.com/questions/11542195/how-to-call-soap-service-from-phonegap-iphone-app)

[http://kmithi.blogspot.in/2012/02/callling-web-services-in.html](http://kmithi.blogspot.in/2012/02/callling-web-services-in.html)

# php - MySQL 相关标签与连接

> ID：12650125
> 
> 赞同：0
> 
> 时间：2012-09-29T05:12:04.370
> 
> 标签：php, mysql, join

所以，我有一个数据库，其中有一个名为 artcles 的表，还有一个名为 article tags 的表。当用户查看一篇文章时，我想查询最多五篇标签与正在查看的文章相似的文章。这是我的两张表：

 `````
CREATE TABLE `articles` (
  `article_id` int(15) NOT NULL AUTO_INCREMENT,
  `parent_id` int(15) NOT NULL,
  `author_id` int(15) NOT NULL,
  `title` text NOT NULL,
  `content` text NOT NULL,
  `date_posted` text NOT NULL,
  `views` int(15) NOT NULL,
  `preview` text NOT NULL,
  `status` tinyint(1) NOT NULL,
  `modified_date` text NOT NULL,
  PRIMARY KEY (`article_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

CREATE TABLE `article_tags` (
  `tag_id` int(15) NOT NULL AUTO_INCREMENT,
  `article_id` int(15) NOT NULL,
  `keyword` varchar(250) NOT NULL,
  PRIMARY KEY (`tag_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
````  `我尝试编写自己的查询，但它们似乎从来没有工作过。我想在查询中使用联接，而不是诉诸使用 CSV 和 LIKE。这是我到目前为止的查询：

```
SELECT A2.article_id, count(A2.article_id) AS matches
FROM article_tags AS A1 JOIN article_tags ON (A1.keyword = A2.keyword AND 1.article_id != A2.article_id)
JOIN articles ON (A2.article_id = A.article_id) AS A
WHERE A1.article_id = 1
GROUP BY A2.article_id
ORDER BY matches DESC
LIMIT 5" 
```

这是我更新的查询：

 `````
$query = "
            SELECT t2.article_id, count(t2.keyword) AS matches
            FROM article_tags t1
            JOIN article_tags t2 ON (t1.keyword = t2.keyword AND t1.article_id != t2.article_id)
            WHERE t1.article_id = ".$article_id."
            GROUP BY t2.article_id
            ORDER BY matches DESC
            LIMIT 5"; 
````  `这是使用 var_dump 转储数组的结果

 `````
array
  0 => 
    array
      'article_id' => string '2' (length=1)
      'matches' => string '1' (length=1) 
````  ``````
$query = "
            SELECT t2.article_id, count(t2.keyword) AS matches
            FROM article_tags t1
            JOIN article_tags t2 ON (t1.keyword = t2.keyword AND t1.article_id != t2.article_id)
            WHERE t1.article_id = ".$article_id."
            GROUP BY t2.article_id
            ORDER BY matches DESC
            LIMIT 5";

        if($query = $this->db->query($query)){

            if($query->num_rows() > 0){

                foreach($query->result_array() as $id => $article){

                    $articles[$id] = $this->fetch_article($article['article_id']);

                }

            } else {

                $articles = array();

            }

        } else {

            $articles = array();

        }

        return $articles;

    } 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:51:15.503

`article_tags`基本上你的想法是正确的——在桌子上做一个自我加入。有一些你应该改进的地方：

*   COUNT`tag_id`而不是`article_id`，因为您想按相关性对文章进行排序，并且匹配标签的计数表示相关性。
*   加入`tag_id`而不是`keyword`. 加入非索引列将是一个性能问题。
*   `!=`出于性能原因，请勿使用in JOIN 条件。只需获取所有相关文章并删除最相关的一篇，这应该是当前文章本身
*   出于性能的原因，加入`articles`不是必需的。您不需要文章本身；`articles`在获得 5 篇相关文章的 id 后，只需执行简单的 SELECT 即可。

所以答案可能是这样的：

```
SELECT
    A2.article_id, count(A2.tag_id) AS matches
FROM 
    article_tags A1 
JOIN
    article_tags ON A1.tag_id=A2.tag_id
WHERE
    A1.article_id = 1
GROUP BY
    A2.article_id
ORDER BY
    matches DESC
LIMIT 6   -- instead of 5, because the first result would be the current article 
```

你应该得到一个有 6 个 id 的数组，然后删除第一个，然后执行 SELECT（例如在 python 中）：

```
article_ids = article_ids[1:]
articles = cursor.execute(
    "SELECT * FROM articles WHERE article_id IN (%s)" % ",".join(article_ids)
) 
```````````

# c# - 通过 C# 读取 XML

> ID：12650133
> 
> 赞同：-1
> 
> 时间：2012-09-29T05:13:12.153
> 
> 标签：c#, xml

我有一个提供 XML 数据的链接。我想处理我的应用程序中的数据。

如何在 C# 中处理这个问题？

通过 XmlReader 还是我需要下载 XML 数据

哪一种是最佳方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T05:47:32.840

您可以像这样从链接中获取 xml 文档

```
 using (WebClient wc = new WebClient())
    {            
        string xml = wc.DownloadString(url);

        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.LoadXml(xml);

    } 
```

不，您可以使用[System.Xml.Linq](http://msdn.microsoft.com/en-us/library/system.xml.linq%28v=vs.100%29.aspx)来解析 xmlDoc

```
// Create the query 
var custs = from c in xmlDoc.Elements("Customers") 
          select c ;

// Execute the query 
foreach (var customer in custs) 
{ 
     Console.WriteLine(customer); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:26:30.043

我使用`XDocument`它是因为它使得以 Linq 样式查询 xml 变得非常简单。除非您有非常特殊的需求或限制，否则我认为这是迄今为止最方便的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T05:27:57.343

首先将您的数据下载到 xml 文件中，然后您可以使用此代码进行 xml 读取

```
XmlTextReader xmlreader = new XmlTextReader(Server.MapPath("filename.xml"));
DataSet ds = new DataSet();
ds.ReadXml(xmlreader);
DataTable dt = new DataTable();
dt = (DataTable)ds.Tables[0]; 
```

我希望这能帮到您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T05:48:11.713

使用 XmlSerializer 将收到的字符串反序列化回对象图中：

```
public T Deserialize<T>(string xml)
{
    T deserialized;
    XmlSerializer xmlSerializer= new XmlSerializer(typeof(T));
    using (StringReader stringReader = new StringReader(xml))
    {
        var xmlReaderSettings = new XmlReaderSettings(); //
        using (XmlReader xmlReader = XmlReader.Create(stringReader, xmlReaderSettings))
        {
            xmlReader.MoveToContent();
            deserialized = (T)xmlSerializer.Deserialize(xmlReader);
        }
    }
    return deserialized;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T05:49:47.217

见下图。

![在此处输入图像描述](../Images/114acfb035baafb18bb846aec83478dc.png)

您将需要以下命名空间： **System.Xml；** 要了解 XPath 的工作原理，请访问：http: [//www.w3schools.com/xpath/default.asp](http://www.w3schools.com/xpath/default.asp)

# ios - 如何在 iOS 6 中以编程方式更改设备方向

> ID：12650137
> 
> 赞同：45
> 
> 时间：2012-09-29T05:14:28.523
> 
> 标签：ios, objective-c, uiinterfaceorientation

在**iOS 5**中，我们可以像这样以编程方式更改设备方向：

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

但是在**iOS 6** `setOrientation`中已弃用，如何在**iOS 6**中以编程方式更改设备方向？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-06-17T08:57:54.300

这是我的“五分钱”，在 iOS7 上用 ARC 测试过

```
[[UIDevice currentDevice] setValue:
                      [NSNumber numberWithInteger: UIInterfaceOrientationPortrait]
                            forKey:@"orientation"]; 
```

这不会像 performSelector 那样生成“泄漏”警告。

**UIAlertView** - 使用此代码，当您在 view(will/Did) 出现期间打开 UIAlertView 时，您会注意到除此视图之外的所有视图都是纵向的（苹果，真的吗？）我无法强制视图重新定向但发现如果您在打开 UIAlertView 之前稍作延迟，然后视图有时间更改方向。

**请注意**，我将从 2014 年 9 月 12 日开始发布我的应用周，如果它通过或失败，我将更新帖子。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-29T08:49:18.683

这不回答如何更改设备方向，而是提供可能对您有所帮助的附加信息。

**iOS 6 UI 界面方向 - *shouldAutorotateToInterfaceOrientation*：不工作**

方法*shouldAutorotateToInterfaceOrientation* : 在 iOS 6 中不受支持。它已弃用。以防万一如果你是一个新手，只是盯着可可工作，想知道为什么你的视图控制器在 iOS 6 中搞砸了，而在 iOS 5 中却完美无缺，只要知道*shouldAutorotateToInterfaceOrientation* : 不再受支持。即使它可能适用于 Xcode 4 到 4.3，但它不适用于 Xcode 4.5。

Apple 提供了一种新方法来完成这项工作，而且方式更加简洁。您改用***supportedInterfaceOrientations***。它返回视图控制器支持的所有界面方向，一个界面方向值的掩码。

**UIInterfaceOrientationMask 枚举：**

这些常量是用于指定视图控制器支持的界面方向的掩码位。

```
typedef enum {
    UIInterfaceOrientationMaskPortrait = (1 << UIInterfaceOrientationPortrait),
    UIInterfaceOrientationMaskLandscapeLeft = (1 << UIInterfaceOrientationLandscapeLeft),
    UIInterfaceOrientationMaskLandscapeRight = (1 << UIInterfaceOrientationLandscapeRight),
    UIInterfaceOrientationMaskPortraitUpsideDown = (1 << UIInterfaceOrientationPortraitUpsideDown),
    UIInterfaceOrientationMaskLandscape =
        (UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight),
    UIInterfaceOrientationMaskAll =
        (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
    UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown),
    UIInterfaceOrientationMaskAllButUpsideDown =
        (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
    UIInterfaceOrientationMaskLandscapeRight),
} UIInterfaceOrientationMask; 
```

**使用 shouldAutorotateToInterfaceOrientation: 方法：**

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return UIInterfaceOrientationIsLandscapeRight(toInterfaceOrientation);
} 
```

**使用supportedInterfaceOrientations 方法：**

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscapeRight;
} 
```

***这些是在 iOS6 中向 UIViewController 添加的关于方向的方法***

1.  [UIViewController preferredInterfaceOrientationForPresentation](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/preferredInterfaceOrientationForPresentation)

2.  [UIViewController 应该自动旋转](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/shouldAutorotate)

3.  [UIViewController 支持的接口方向](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)

***在 iOS6 中向 UIApplication 添加了有关方向的方法***

1.  [UIApplication supportedInterfaceOrientationsForWindow:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/supportedInterfaceOrientationsForWindow:)

2.  [UIInterfaceOrientationMask](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/tdef/UIInterfaceOrientationMask)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-03T11:01:05.803

我发现强制设备改变方向的最简单方法是呈现一个新的视图控制器（使用`presentViewController:animated:completion:`），其中新的视图控制器指定了一个特定的首选方向（通过实现方法`-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`）。

当一个新的视图控制器出现时，正如预期的那样，方向将更改为新视图控制器首选的方向。因此，最简单的实现（最佳实践？）是将特定方向所需的所有功能嵌入到单独的视图控制器中，并根据需要呈现。系统会为您改变方向。

显然这可能不适合所有用例，但幸运的是，同样的技巧适用于强制设备改变现有视图控制器的方向。

诀窍是呈现一个具有您需要的特定首选方向的新视图控制器，然后立即隐藏它。当新的视图控制器出现时，这将导致方向临时改变。最好的部分是，当新的视图控制器被关闭时，原始（呈现）视图控制器 `preferredInterfaceOrientationForPresentation`会再次被查询，您可以在此处指定您想要的最终方向。

这里要注意的一件重要事情是在原始视图控制器中临时禁用自动旋转（当从新呈现的然后关闭的视图控制器返回时），这样当用户将手机旋转到新方向时，它不会触发了进一步的自动旋转。

以下代码应说明我的观点，我的示例强制旋转为纵向，如果您想要其他方向，只需相应更改即可。

假设您有一个名为 的原始视图控制器`Original`和一个名为 的临时视图控制器`ForcePortrait`

```
@interface Original : UIViewController
{
    BOOL orientationToPortrait; //should set to NO by default
}
@end

@implementation Original
- (UIInterfaceOrientation) preferredInterfaceOrientationForPresentation
{
    if(orientationToPortrait)
    {
        //when we manually changed, show in Portrait
        return UIInterfaceOrientationPortrait;
    }
    else
    {
        //before manual orientation change, we allow any orientation
        return self.interfaceOrientation;
    }
}

-(BOOL) shouldAutorotate
{
    //we should 'lock' the rotation once we manually change it
    return !orientationToPortrait;
}

-(void) changeOrientationToPortrait
{
    //Sample method to change the orientation
    //when called, will show (and hide) the temporary view
    //Original.preferredInterfaceOrientationForPresentation will be called again after this method

    //flag this to ensure that we tell system we prefer Portrait, whenever it asked again
    orientationToPortrait = YES;

    //presenting the following VC will cause the orientation to temporary change
    //when the new VC is dismissed, system will ask what is our (Original) orientation preference again
    ForcePortrait* forcePortrait = [[ForcePortrait alloc] init];
    [self presentViewController:forcePortrait animated:NO completion:^{
        [forcePortrait dismissViewControllerAnimated:NO completion:nil];
    }];
}

@end

@interface ForcePortrait : UIViewController
@end

@implementation ForcePortrait
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
}
@end 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-09T13:59:33.610

尝试这个：

```
#import <objc/message.h>

if(UIDeviceOrientationIsLandscape(self.interfaceOrientation)){
        if ([[UIDevice currentDevice] respondsToSelector:@selector(setOrientation:)])
        {
            objc_msgSend([UIDevice currentDevice], @selector(setOrientation:), UIInterfaceOrientationPortrait );
        }
    } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-29T07:11:12.767

您应该放置
`[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];`
在您的 AppDelegate`didFinishLaunchingWithOptions`方法中。

然后，在您的应用程序中的任何位置，您都可以通过以下方式获取当前方向：

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

并通过以下方式测试方向：

```
UIInterfaceOrientationIsPortrait(orientation) 
UIInterfaceOrientationIsLandscape(orientation) 
```

作为，像

```
if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
{
    // code for landscape orientation
     // OR
    [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];
     //  OR
    [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeLeft];

}
else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
{
    // code for Portrait orientation
    //  OR
   [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortraitUpsideDown];
    //  OR
   [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-24T03:11:44.157

此代码适用于 iOS 8 或更高版本

```
NSNumber *value = [NSNumber numberWithInt:UIInterfaceOrientationLandscapeLeft];
[[UIDevice currentDevice] setValue:value forKey:@"orientation"]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-19T23:36:46.673

如果您想避免使用运行时库，请对 Bissy 的答案稍作修改：

```
if (UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation]))
{
    if ([[UIDevice currentDevice] respondsToSelector:@selector(setOrientation:)])
    {
        int orientationPortrait = UIInterfaceOrientationPortrait;
        NSMethodSignature *sig = [[UIDevice currentDevice] methodSignatureForSelector:@selector(setOrientation:)];
        NSInvocation* invo = [NSInvocation invocationWithMethodSignature:sig];
        [invo setTarget:[UIDevice currentDevice]];
        [invo setSelector:@selector(setOrientation:)];
        [invo setArgument:&orientationPortrait atIndex:2];
        [invo invoke];
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-11-04T06:44:33.863

@implementation UINavigationController（自动旋转）

```
 -(NSUInteger)supportedInterfaceOrientations
 {
   //make the check for iphone/ipad here

    if(IPHONE)
    {
      return UIInterfaceOrientationMaskPortrait;
    } 
    else
    {
      return UIInterfaceOrientationMaskLandscape;
    }
 }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
 {
    return UIInterfaceOrientationPortrait;
 }

 - (BOOL)shouldAutorotate
 {
    return NO;
 } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-05T12:16:13.870

Apple 在[ios6](/questions/tagged/ios6 "显示标记为“ios6”的问题")中以编程方式更改设备方向非常困难（请注意）。

据我所知，完成您所要求的唯一方法是模拟设备方向的变化。

使用`setTransform`旋转`UIView`并重新应用其自己的框架会产生所需的结果。

```
[YourView setTransform:CGAffineTransformMakeRotation(1.57)];
[YourView setFrame:CGRectMake(0, 0, YourView.frame.size.width, YourView.frame.size.height)]; 
```

当设备物理方向发生变化时，我们可以撤消转换。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [YourView setTransform:CGAffineTransformMakeRotation(0)];
    [YourView setFrame:CGRectMake(0, 0, YourView.frame.size.width, YourView.frame.size.height)];
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-22T11:14:30.263

试试这个……对我有用……

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
UIView *view = [window.subviews objectAtIndex:0];
[view removeFromSuperview]; [window addSubview:view]; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-01-15T16:31:06.117

这适用于 iOS7，强制自动旋转为纵向。

```
//In your viewController.m
#import <objc/message.h>

// for autorotate viewController to portraid
- (void)viewWillAppear:(BOOL)animated {
    UIInterfaceOrientation orientationStatusBar =[[UIApplication sharedApplication] statusBarOrientation];
    switch (orientationStatusBar) {
        case UIInterfaceOrientationPortrait:break;
        case UIInterfaceOrientationLandscapeLeft:
            objc_msgSend([UIDevice currentDevice], @selector(setOrientation:), UIInterfaceOrientationPortrait);
            break;
        case UIInterfaceOrientationLandscapeRight:
            objc_msgSend([UIDevice currentDevice], @selector(setOrientation:), UIInterfaceOrientationPortrait);
            break;
        default:
            break;
    }
}

// this permit autorotate
- (BOOL) shouldAutorotate
{
   // this lines permit rotate if viewController is not portrait
    UIInterfaceOrientation orientationStatusBar =[[UIApplication sharedApplication] statusBarOrientation];
    if (orientationStatusBar != UIInterfaceOrientationPortrait) {
        return YES;
    }
    //this line not permit rotate is the viewController is portrait
    return NO;
} 
```

注意：我在我的应用程序中实现了这个选项，但可能会被 Apple 拒绝（2012 年 10 月对 Austin 的 Sergey K. 编辑 6 的评论）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-08-30T08:41:26.690

```
if (self.interfaceOrientation != UIInterfaceOrientationLandscapeRight) {
// http://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation
// http://openradar.appspot.com/radar?id=697
// [[UIDevice currentDevice] setOrientation: UIInterfaceOrientationLandscapeRight]; // Using the following code to get around apple's static analysis...
[[UIDevice currentDevice] performSelector:NSSelectorFromString(@"setOrientation:") withObject:(id)UIInterfaceOrientationLandscapeRight];
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-22T10:20:55.017

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    // Return YES for supported orientations
   return NO;
} 
```

* * *

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   return  interfaceOrientation == UIInterfaceOrientationPortrait
           || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown ;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-12T13:47:53.747

这适用于 Xcode 6 和 5。

```
- (BOOL)shouldAutorotate {return YES;}
- (NSUInteger)supportedInterfaceOrientations {return (UIInterfaceOrientationMaskPortrait);} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-24T06:08:44.440

有趣的是，其他人在没有这样设置后没有遇到问题：

```
+ (void)setOrientation:(UIDeviceOrientation)orientation {
    [UIDevice.currentDevice setValue:@(orientation) forKey:@"orientation"];
    [UIViewController attemptRotationToDeviceOrientation];
    [UIDevice.currentDevice setValue:@(UIDeviceOrientationUnknown) forKey:@"orientation"];
} 
```

我的要求是能够强制方向，然后再次旋转到设备自然方向......有 UIDeviceOrientationDidChangeNotification 可以让你获得信息以女巫方向旋转设备但实际上如果你不设置它将部分不起作用在 UIDevice 中更改方向后立即未知，还有更多细节可以让它变得酷但会离开它，因为它超出了这个简单问题的上下文。

# java - 规则引擎或事件处理

> ID：12650138
> 
> 赞同：2
> 
> 时间：2012-09-29T05:14:29.727
> 
> 标签：java, events, rules, drools, esper

我有一个客户管理系统，企业使用它来存储客户数据和其他一些信息。我希望我的系统在以下几种情况下向用户（企业主）发送电子邮件：

1.  如果用户（企业主）在注册一周后没有将客户输入系统 - 向他发送一封电子邮件，提醒他添加客户。将此作为每周/每月提醒。

2.  如果用户达到一个里程碑（例如系统中有 100 个客户），则向他发送一封祝贺电子邮件，但如果他再次达到相同的里程碑（例如通过删除和添加），则不要这样做。

编辑 - 3\. 在假期前一周发送一封“假期快乐”电子邮件（给出这个例子主要是因为它是最简单的例子，它说明了对**事件**属性的依赖，而不是用户）。

我需要一个允许轻松添加基于先前/未来事件（未来事件具有已知日期）和用户属性的规则的系统。我读了一些关于[规则引擎和事件处理](http://thoughts.inphina.com/2010/04/15/event-processing-rule-engine/)的内容，但仍然不确定我的问题属于哪一类。

很高兴听到有关我可以使用的规则\事件处理模块的具体建议。我在考虑[Drools](http://www.jboss.org/drools/)或[Esper](http://esper.codehaus.org/)，但两者看起来都非常复杂，我想在花时间将它们添加到我的系统之前确保它是合适的。

如果重要的话，我正在使用 Java 和 Hibernate。

# java - 外部类测试需要私有内部类吗？

> ID：12650139
> 
> 赞同：0
> 
> 时间：2012-09-29T05:14:57.293
> 
> 标签：java, testing, junit, inner-classes

我有一个外部类 Outer 和一个内部类 Inner。为了在 Outer 中测试公共方法 outerMethod()，我需要创建一个 Inner 的实例，该实例将存储在一个名为 inners 的列表中。内部类是另一个类Other 的修改版本。

概述：

```
class Other{
    public Other(){
       //doesnt matter actual implementation
    }
}

class Outer{
    private List<Inner> inners = new ArrayList<Inner>();

    public Outer(){}

    public void outerMethod(){}

    private class Inner{
        public Inner(Other other){}
    }
} 
```

我的问题是我是否应该创建一个如下所示的方法只是为了测试目的。

```
public void createInnerInstance(Other other)
{
    Inner inner = new Inner(other);
    inners.add(inner);
} 
```

有没有其他解决方法？现在我可以将 Inner 公开，但 Outer 是唯一真正使用 Inner 的类。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:34:00.437

专门为测试目的更改代码可能不是一个好主意。

你有两个选择——要么按照@bot 在评论中的建议重新设计你的课程，要么应用变通方法。

您可以更改字段/内部类访问修饰符并从您的测试中使用它们。看看[这里](https://stackoverflow.com/questions/34571)，[这里](https://stackoverflow.com/questions/1771744)看看实现细节。

# perl - 如何使用 perl 从文件中删除类似的重新定义

> ID：12650140
> 
> 赞同：1
> 
> 时间：2012-09-29T05:15:15.617
> 
> 标签：perl, shell, perl-module

我有一个文件，其中包含以下数据

```
typedef INTEGER Id;
typedef Integer32 Id;
typedef Integer32 Id;
typedef Integer32 Id;
typedef INTEGER Identifier;
typedef Integer32 Index;
typedef Unsigned32 Identifier;
typedef Integer32 Index;
typedef Unsigned32 TunnelId;
typedef Unsigned32 TunnelId;
const Unsigned32 maxValue = 65535;
const Integer32 Index_maxValue = 65535;        
const Unsigned32 maxValue = 4294967295;
const Unsigned32 Index_maxValue = 65535; 
```

我需要按以下顺序选择变量：如果变量有……</p>

*   `INTEGER` 和`Integer32` 定义 -`Integer32` 必须选择
*   `Integer32`和`Unsigned32`定义 -`Unsigned32`必须选择
*   `INTEGER` 和`Unsigned32`定义 -`Unsigned32`必须选择

预期输出：

```
typedef Integer32 Id;
typedef Unsigned32 Identifier;
typedef Integer32 Index;
typedef Unsigned32 TunnelId;
const Unsigned32 maxValue = 65535;
const Unsigned32 Index_maxValue = 65535; 
```

我已经编写了下面的代码......但它没有产生上述预期的结果。

```
@file2 = @file // full content of the file in an array
for ($i = 0; $i <= $#file; $i++) {
   $temp = $file[$i];
   $check = $file[$i];
   $check =~ s/^\s+//;

   @fields = split(/ /, $check);

   @grepNames = grep(/$fields[2]/, @file2);

   if($#grepNames >= 1) {

      for ($j = 1; $j <= $#file; $j++) {
         if( $file[$i] =~ /INTEGER/ && $file[$j] =~ /Unsigned32/ ) {
            push(@data, $file[$j]);
         }
         elsif( $file[$i] =~ /INTEGER/ && $file[$j] =~ /Integer32/ ) {
            push(@data, $file[j]);
         }
         elsif( $file[$i] =~ /Unsigned32/ && $file[$j] =~ /Integer32/ ) {
            push(@data, $file[i]);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:00:49.293

尽管您接受了**0%**的问题（提高这个数字是非常公平的），但这里是对您的代码的分析，以便您下次可以编写更好（和工作）的 Perl。

## 关于编写 Perl 的一般评论

### 纪律与混乱

总是`use strict`和`use warnings`，尤其是当您试图找出脚本不工作的原因或当您是 Perl 新手时。通常，这些 pragma 会提醒您每个人偶尔会犯的最愚蠢的错误。

Perl 不会强迫您编写好的代码（和 TIM TOWDTY），但大多数时候您应该坚持使用`strict`Perl 的子集，除非您有充分*的*理由。

使用`strict` 意味着您必须使用 声明所有变量`my`，除非您有充分的理由。我认为声明变量是一件好事。

### Perl 不是 C

大多数内置函数不需要括号来分隔它们的参数。即`split(/ /, $check)`和`split / /, $check`在大多数情况下都是一样的。

此外，Perl 很少需要`for(INIT; COMPARE; INCREMENT)`循环结构，尤其是当最后一部分是`$i++`. 相反，您可以使用`foreach`-syntax 和*range*：

```
for my $i ($MIN .. $MAX) 
```

## 为什么你的代码不起作用

还有：有什么不好的成语可以避免

我已经指出，所有变量都应该声明为，`my`并且有更好的循环语法可用。

```
@file2 = @file // full content of the file in an array 
```

`//`不引入评论。它是*定义或*运算符。此外，此语句不会以`;`. 这会使 Perl 感到困惑，因为下面的`for`循环是同一语句的一部分——但这是无效的。

此外，您不会更改`@file2`or的内容`@file`，因此不需要进行复制。

```
$temp = $file[$i]; 
```

你从不使用`$temp`.

```
@grepNames = grep(/$fields[2]/, @file2); 
```

您可以使用它`grep`来找出有多少行包含相同的变量名称。当您稍后再次遍历*所有*元素时，这是多余的。`@file`

```
if($#grepNames >= 1) 
```

你写的是问题：*最高索引是否`@grepNames`大于或等于1？*而你可能是*说我们有不止一场比赛吗？*. 我把它写成

```
if (@grepNames > 1) 
```

然而，这主要是一种风格上的评论。

```
if( $file[$i] =~ /INTEGER/ ... 
```

等什么？如果`$file[$i]`包含`INTEGER`，那么将`$check`或`$temp`。使用标量而不是数组下标时，您可以节省一些输入。

```
push(@data, $file[$j]); 
```

`@data`即使您已经有一条具有相同变量名的行，您也可以将某些东西推到上面。更糟糕的是，如果`@file`包含*n 个*元素，那么内部`for`循环会迭代*n - 1 个*`@data`元素，并且在大多数情况下你会推送一些东西，使你的算法*O(n²)*

```
 i \ j | INTEGER | Int32 | UInt32
--------+---------+-------+-------
INTEGER | -       | j     | j
Int32   | i       | -     | j
UInt32  | i       | i     | - 
```

这是一个表格，说明（根据您的规则）应该将哪个元素放入`@data`. 您可能想将此表与您的`if`/ `elsif`s 进行比较，并确定是否可能缺少某些情况。

```
push(@data, $file[j]); 
```

你之前忘记了`$`印记`j`。

## 更好的解决方案

您的算法在*O(n²)*中运行，或者更确切地说是*O(n * (2n - 1))*。但是，您的问题可以在*O(n)*中解决。

我将问题视为：

> 输入中的每一行都有一个标识符和一个相关的权重。
> 
> 对于输出，从具有相同标识符的所有行的集合中选择具有最小权重的行。如果两条或多条线具有相同的最小权重，则可以选择这些最小线中的任何一条。
> 
> 一行的权重取决于该行中的第二个单词是什么关键字：
> 
> ```
> Unsigned32 => 1,
> Integer32  => 2,
> INTEGER    => 3, 
> ```
> 
> 如果第二个单词不是这些关键字，则应抛出错误。
> 
> *每个标识符第一次*出现的顺序在输入和输出中都是相同的。

在我的解决方案（如下所示）中，我使用了第一个和第三个单词作为标识符。如果输出中已经存在一条线，如果当前线的权重较低，我会更新它。

* * *

### 编辑：我的解决方案

```
#!/usr/bin/perl

use strict; use warnings;

my @data;
my %index;

while (<DATA>) {
   $_ =~ s/^\s+//;
   my @fields = split /\s+/, $_, 3;
   @fields = (@fields[0 .. 1], split /(?=\W)/, $fields[2], 2);
   my ($class, $type, $name, $rest) = @fields;
   if (defined $index{$class}{$name}) {
      # we have a predecessor
      my $index = $index{$class}{$name};
      $data[$index][1] = (sort compareTypes $data[$index][1], $type)[0];
   } else {
      push @data, \@fields;
      $index{$class}{$name} = $#data;
   }
}

foreach (@data)  {
   my @fields = @$_;
   print "@fields[0..2]$fields[3]";
}

sub compareTypes {
   my %weight = (
      Unsigned32 => 1,
      Integer32  => 2,
      INTEGER    => 3,
   );
   my $weight_a = $weight{$a} // die "undefined type $a";
   my $weight_b = $weight{$b} // die "undefined type $b";
   return $weight_a <=> $weight_b;
}

__DATA__
typedef INTEGER Id;
typedef Integer32 Id;
typedef Integer32 Id;
typedef Integer32 Id;
typedef INTEGER Identifier;
typedef Integer32 Index;
typedef Unsigned32 Identifier;
typedef Integer32 Index;
typedef Unsigned32 TunnelId;
typedef Unsigned32 TunnelId;
const Unsigned32 maxValue = 65535;
const Integer32 Index_maxValue = 65535;        
const Unsigned32 maxValue = 4294967295;
const Unsigned32 Index_maxValue = 65535; 
```

输出：

```
typedef Integer32 Id;
typedef Unsigned32 Identifier;
typedef Integer32 Index;
typedef Unsigned32 TunnelId;
const Unsigned32 maxValue = 65535;
const Unsigned32 Index_maxValue = 65535; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:16:54.960

解决了问题，附上工作代码。

```
#!/opt/perl/bin/perl

open  (DF, "< UNIQ_DEF.txt");
open  (DR, "> DEF_REM.txt");
my @var = <DF>;
my @param =();
my @param2=@var;

for ($i=0; $i<=$#var;$i++)
{
    $temp=$var[$i];
    $check=$var[$i];
    $check=~s/^\s+//;

    @params=split(/ /, $check);

    if (defined $params[2]){

        @Names = grep(/$params[2]/, @param2);

        if($#Names >= 1){
            if ($Names[0] =~ /Unsigned32/ && $Names[1] =~ /Unsigned32/) {
                print DR $Names[0];
            } elsif($Names[0] =~ /INTEGER/ && $Names[1] =~ /Unsigned32/) {              
                print DR $Names[1];
            } elsif($Names[0] =~ /Integer32/ && $Names[1] =~ /Integer32/) {
                print DR $Names[1];
            } elsif($Names[0] =~ /INTEGER/ && $Names[1] =~ /Integer32/) {
                print DR $Names[1];
            } elsif($Names[0] =~ /Integer32/ && $Names[1] =~ /Unsigned32/) {
                print DR $Names[1];
            } elsif($Names[0] =~ /Unsigned32/ && $Names[1] =~ /Integer32/) {
                print DR $Names[0];
            } else {
                print DR $var[$i];
            }
        } else {
            print DR $var[$i];
        }

    } else {
        print DR $var[$i];
    }

}
close(DF);
close(DR); 
```

# django - 运行带有和不带参数的页面：django

> ID：12650144
> 
> 赞同：0
> 
> 时间：2012-09-29T05:16:36.983
> 
> 标签：django, django-urls

我正在与 Django 合作。我想要一个页面使用参数和没有它。我尝试在这样的 url 中使用 '*' 但它不起作用：

```
url(r'^ask/(?P<pageNo>\d*)/$',
        'ask'), 
```

所以我想我必须为我的页面编写两个 url，一个带参数，另一个不带参数，如下所示：

```
url(r'^ask/$',
        'ask'),

url(r'^ask/(?P<id>\d+)/$',
        'ask'), 
```

它适用于参数，但没有它，不起作用。你介意帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:33:59.717

是的，您必须定义 2 个网址。

定义您的视图，该视图采用默认值的参数。

```
def ask(request, id=None):
   ...
   # when id is not passed from url try to get it from GET parameters
   if not id:
      id = request.GET.get('id')
   ... 
```

# c# - 如何在 C# ASP.NET 中调用 Global.asax 值

> ID：12650148
> 
> 赞同：0
> 
> 时间：2012-09-29T05:18:26.927
> 
> 标签：c#, asp.net, vb.net

这是我的 global.asax 的 VB 代码

```
<%@ Application Language="VB">
<script runat="server">

Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs on application startup
    Application("CS") = "server=myServer; user id=myUser; password=MyPaas; database=myData; pooling=true"
End Sub

Sub Application_End(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs on application shutdown
    Application("CS") = ""

End Sub

Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs when an unhandled error occurs
End Sub

Sub Session_Start(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs when a new session is started
End Sub

Sub Session_End(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs when a session ends.
    ' Note: The Session_End event is raised only when the sessionstate mode
    ' is set to InProc in the Web.config file. If session mode is set to StateServer
    ' or SQLServer, the event is not raised.
End Sub

</script> 
```

我在 VB 中这样称呼这个值： `Dim objConn As New SqlConnection(Application("CS"))`

如何在 C# ASP.NET 中进行此调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:31:37.810

等效的 C# 代码将是：

```
SqlConnection objConn = new SqlConnection(Application["CS"]); 
```

请注意“CS”周围的 [] 而不是 ()。

或者，您可以在 using 块中执行此操作：

```
using (SqlConnection objConn = new SqlConnection(Application["CS"]))
{

    // Do your data access here
} 
```

using 块确保调用 dispose （即使遇到异常）。有关 using 语句的更多信息，请参阅[using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)。

虽然我想知道 - 你为什么将 C# 与用 VB.NET 编写的 Global.asax 文件一起使用？

# ruby - 将数组映射到数组

> ID：12650151
> 
> 赞同：0
> 
> 时间：2012-09-29T05:18:49.820
> 
> 标签：ruby, arrays, hashmap

我有一个数据数组和一个按特定顺序排列的键数组：

```
original_data = ['hello', 'world', 'one', 'two']
keys = [:greeting, :location, :first, :second] 
```

我想将键映射到数据，以便能够通过这样的键引用每个数据。

```
data[:greeting].should == original_data[0] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:36:19.953

那将是：

```
data = Hash[keys.zip original_data] 
```

# php - 用 PHP 写入文件

> ID：12650153
> 
> 赞同：-1
> 
> 时间：2012-09-29T05:19:08.270
> 
> 标签：php, file, fwrite

PHP中这段代码的问题是什么？

```
<?php
$f = "log.txt";
$fh = fopen($f, 'a') or die("Can't open log file");
$s = "Test Line\n";
fwrite($f, $s);
fclose($f);
?> 
```

log.txt 的权限是 777。但是`fwrite`不能在里面写任何东西。问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T05:20:46.693

试试这个...

```
<?php
$f = "log.txt";
$fh = fopen($f, 'a') or die("Can't open log file");
$s = "Test Line\n";
fwrite($fh, $s);
fclose($fh);
?> 
```

实际上，您使用的是文件名而不是文件句柄。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T05:24:56.253

你会想知道[`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)：

```
file_put_contents("log.txt", "Test Line\n", FILE_APPEND); 
```

# android - 2 LinearLayout内的RelativeLayout

> ID：12650157
> 
> 赞同：0
> 
> 时间：2012-09-29T05:20:10.467
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

嗨，我必须开发一个可扩展列表视图 android 应用程序。在这里我希望在另一个 2 线性布局中创建相对布局。在这里我必须请帮助我。我该怎么做。在这里我必须运行应用程序意味着第一个线性布局分别有 2 个值，第二个线性布局有单独的 2 个值，如下面的格式。

这是希望需要的格式：

```
* Order info
  Payment_method:
         Payment_method
  Subtotal
         Subtotal
* CustomerInfo
  Firstname
        Firstname
  Lastname
        Lastname
  Phone
        Phone 
```

但我得到了以下格式。 ![在此处输入图像描述](../Images/a64d9b475918b9df9d004a010e2eee34.png) 为什么这里会出现上面的空间。请帮助我。我该如何解决这个错误。

这是我的 android 布局代码：

**主.xml：**

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 

    >

    <ExpandableListView android:id="@+id/android:list" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">
    </ExpandableListView>
    </LinearLayout> 
```

**group_row.xml**：

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layout_marginTop="170px"
   >
   <TextView
    android:id="@+id/order" 
    android:text="Order"
    android:layout_width="wrap_content"
    android:layout_height="70px"
    android:layout_marginLeft="70px"
    android:gravity="center_vertical"
    android:textColor="#FFFFFFFF"
    android:textSize="20dip"
            android:textStyle="bold"
/>

   </LinearLayout> 
```

**Expandablelistview.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
>
<LinearLayout
android:id="@+id/linear_layout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
>
<TextView
 android:id="@+id/payment_method1"
 android:paddingLeft="5px"
 android:textSize="15dip"
 android:text="payment_method"
 android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/> 
 <TextView
 android:id="@+id/payment_method"
 android:paddingLeft="75px"
 android:textSize="15dip"
 android:textColor="#10bcc9"
 android:textStyle="bold"
 android:text="payment_method"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
 <TextView
 android:id="@+id/subtotal1"
  android:text="subtotal"
 android:paddingLeft="5px"
 android:textSize="15dip"

 android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
<TextView
android:id="@+id/subtotal"
  android:text="subtotal"
 android:paddingLeft="65px"
 android:textSize="15dip"
android:textColor="#10bcc9"
android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
</LinearLayout>
   <LinearLayout
 android:id="@+id/linear_layout2"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_below="@id/linear_layout1"
 android:orientation="vertical" >
  >
              <TextView
 android:id="@+id/firstname1"
 android:paddingLeft="5px"
 android:textSize="15dip"

android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/> 
               <TextView
android:id="@+id/firstname"
 android:paddingLeft="65px"
 android:textSize="15dip"
android:textColor="#10bcc9"
android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>

              <TextView
android:id="@+id/lastname1"

 android:paddingLeft="5px"
 android:textSize="15dip"

android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
              <TextView
android:id="@+id/lastname"

 android:paddingLeft="65px"
 android:textSize="15dip"
android:textColor="#10bcc9"
android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
<TextView
android:id="@+id/phone1"
 android:paddingLeft="5px"
 android:textSize="15dip"

android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/> 
  <TextView
android:id="@+id/phone"
 android:paddingLeft="65px"
 android:textSize="15dip"
android:textColor="#10bcc9"
android:textStyle="bold"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
  </LinearLayout>

   </RelativeLayout> 
```

请参考我的布局文件并为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:58:51.063

您的布局不包含任何会显示向下箭头后跟字符串“订单信息”或向下箭头后跟字符串“客户信息”的代码。我认为这是故意的。

您似乎从线性布局开始并将其更改为相对布局。这是我要做的： 1 - 从相对布局中删除 android:orientation="vertical" 。2 - 将 id 添加到两个线性布局 3 - 添加代码以将第二个线性布局放置在第一个到第二个线性布局下方。android:layout_below="@id/linear_layout1"

这是完整的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/linear_layout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/payment_method1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="payment_method"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/payment_method"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="75dp"
        android:text="payment_method"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/subtotal1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="subtotal"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/subtotal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65dp"
        android:text="subtotal"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linear_layout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/linear_layout1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/firstname1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="First Name"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/firstname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65dp"
        android:text="first_name"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/lastname1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="Last Name"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/lastname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65dp"
        android:text="last_name"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/phone1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5dp"
        android:text="Phone"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65dp"
        android:text="phone"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />
</LinearLayout> 
```

# php - Ajax 发布表单 - 集成 XHR2 文件上传的困难

> ID：12650158
> 
> 赞同：1
> 
> 时间：2012-09-29T05:20:13.377
> 
> 标签：php, jquery, ajax, upload, xmlhttprequest

我搜索了 stackoverflow 和谷歌，发现了很多关于这个主题的材料，但没有一个能帮助我掌握我想要实现的目标。

我正在尝试创建一个表单，该表单异步发送表单数据并上传单个图像，通过相同的 php 脚本调整大小、重命名并将其保存到指定目录。

如果以传统方式发送数据，一切都会完美运行。

当我试图将 XHR 集成到处理非文件表单数据的现有 jQuery 中，并将该文件与其他所有内容一起发送到 PHP 脚本时，我会遇到困难。

我对JS不是特别精通，我非常处于学习状态。到目前为止，我发现的所有内容都是仅上传文件的示例形式，侧重于上传进度、多个文件上传和拖放（我对这个项目不感兴趣）。

我不喜欢复制代码并试图将其与我编写的内容一起使用，我宁愿了解如何去做......

有没有人遇到任何阅读材料/教程来演示和解释如何在标准 ajax 表单帖子中实现 ajax 文件上传？

提前致谢。

* * *

我正在使用的代码的简化示例：

```
<script>

$('#editgig_form').submit(function(){

    $('#ng_loading').fadeIn(500);

    var eg_dataString = $('#editgig_form').serialize();

    $.ajax({
        type: "POST",
        url: "Resorces/Components/GigDiary/edit_gig.php",
        data: eg_dataString,
        success: function(){

        $('#giglist_canvas').load('Resorces/Components/GigDiary/refresh.php');

        $('#ng_loading').fadeOut(500);
        popupclose(edit_gig);                   
        editmenu_selected = '';
        }

    });

return false;

});

</script> 
```

-

```
<form id="editgig_form" method="post" enctype="multipart/form-data">
    <input type="text" name="date" />
    <input type="text" name="venue" />
    <input type="file" name="image" />
</form> 
```

-

```
<?php

date = date("Y-m-d", strtotime($_POST['date']));
venue = $_POST['venue'];

// SCRIPT TO RESIZE IMAGE, SAVE TO DIRECTORY 

$update = "UPDATE gigdairy SET date="$date", venue="$venue", image="imgname";
mysql_query($update);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:57:40.340

您是否尝试打印要发送的数据（`console.log`在浏览器或`var_dump($_FILES)`php 中）？我知道你只是张贴你的文件名。

您将需要实现此功能（文件上传），或者您可以使用 jquery 插件，如 plupload、HTML5 文件上传......

此处的代码示例 [http://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)

# ruby - 更新已知的 RVM 列表

> ID：12650164
> 
> 赞同：31
> 
> 时间：2012-09-29T05:20:50.193
> 
> 标签：ruby, rvm

`rvm list known`是否可以在不升级整个 rvm 的情况下更新已知红宝石的列表（你得到什么）？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-29T07:52:58.113

不，不是，某些版本更改需要更改代码， ~~您应该坚持使用稳定以保持更高的稳定性（如果您担心的话）：~~

 ~~```
rvm get stable 
```~~ 

~~您应该善于坚持掌握（因为它很稳定）以获取最新版本：~~

 ~~```
rvm get master 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-03T03:40:18.377

[mpapis 的](https://stackoverflow.com/a/12650963/2767755)答案和意见是 100% 正确的。我在笔记本电脑中的设置如下。

将该行添加`rvm_autoupdate_flag=2`到`~/.rvmrc`. 只要您愿意，它就会一直自动更新 Rvm `rvm list known`。

**例子：**

```
arup@linux-wzza:~> rvm list known
Warning, new version of rvm available '1.26.0', you are using older version '1.25.33'.
You can disable this warning with:    echo rvm_autoupdate_flag=0 >> ~/.rvmrc
You can enable  auto-update  with:    echo rvm_autoupdate_flag=2 >> ~/.rvmrc
arup@linux-wzza:~> echo rvm_autoupdate_flag=2 >> ~/.rvmrc
arup@linux-wzza:~> rvm list known
Found old RVM 1.25.33 - updating.
Downloading https://get.rvm.io
Downloading https://github.com/wayneeseguin/rvm/archive/1.26.0.tar.gz
Downloading https://github.com/wayneeseguin/rvm/releases/download/1.26.0/1.26.0.tar.gz.asc
gpg: Signature made Wed 29 Oct 2014 06:22:06 PM IST using RSA key ID BF04FF17
gpg: Can't check signature: No public key
Warning, RVM 1.26.0 introduces signed releases and automated check of signatures when GPG software found.
Assuming you trust Michal Papis import the mpapis public key (downloading the signatures).
#....................
#..................... 
```~~

# io - haskell 如何将输入类型：String 转换为 Int

> ID：12650165
> 
> 赞同：0
> 
> 时间：2012-09-29T05:20:58.813
> 
> 标签：io

下面是转换类型的代码：string to int

```
get_int :: IO Int
get_int = do num <-getLine
             return (read num :: Int) 
```

但是当我在 GHCI 中运行它时，它向我显示一个错误：不在范围内：'num'。也许您的意思是“总和”，为什么？以及如何更正该代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:00:28.937

我不确定，但我认为与 ghci 不支持多行表达式有关。

它在编译时工作。

尝试

```
get_int = do num <-getLine;return (read num :: Int) 
```

在 ghci

# php - 避免重复结果mysql和php

> ID：12650167
> 
> 赞同：-1
> 
> 时间：2012-09-29T05:21:16.660
> 
> 标签：php, mysql, duplicates, distinct

我正在创建一个具有回复功能的评论系统，但我发现遇到了问题。

**评论表**

```
id post_id 评论回复

0 17 废话 2

1 17 你好 2

2 17 再见         

3 17 很棒 1

4 17 坏

```

**我的代码**

```
$comments = mysql_query("SELECT * FROM comment WHERE post_id='$post_id' ORDER BY id DESC");

while($comment = mysql_fetch_assoc($comments))
{
    $id = $comment['id'];

    $comment = $comment['comment'];

    $reply = $comment['replyTo'];

    echo $comment;

    echo "<br />";

    $replyQuery = mysql_query("SELECT * FROM comment WHERE replyTo='$id' ORDER BY id DESC");

    while($comment = mysql_fetch_assoc($comments))

    {

        $id = $comment['id'];

        $comment = $comment['comment'];

        $reply = $comment['replyTo'];

        echo $comment;

        echo "<br />";

     }

} 
```

**我的结果**

```
废话

伟大的

你好

再见

      废话

      你好

伟大的

坏的

```

**预期结果**

```
再见

      废话

      你好

      伟大的

坏的

```

**谢谢！！！！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:53:15.013

第一行应为：

```
$comments = mysql_query("SELECT * FROM comment WHERE post_id='$post_id' AND replyTo IS NULL ORDER BY id DESC"); 
```

以便只包含顶级评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:16:32.630

试试这个查询，它将在一个查询中包含所有结果。

> SELECT GROUP_CONCAT(id) AS id,GROUP_CONCAT(post_id) AS post_id,GROUP_CONCAT(comment) AS comment,GROUP_CONCAT(replyTo) AS replyTo FROM comment WHERE post_id=17 GROUP BY replyTo ORDER BY id DESC

结果看起来像

```
id    post_id   comment      replyTo

3      17           great           1

2,4    17,17        goodbye,bad    0,0

0,1    17,17        Blah,hello     2,2 
```

我不清楚你的要求。所以这只是一个建议......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T06:27:49.277

```
<?php
$comments = mysql_query("SELECT GROUP_CONCAT(id) AS id,GROUP_CONCAT(post_id) AS     post_id,GROUP_CONCAT(comment) AS comment,GROUP_CONCAT(date) AS date,GROUP_CONCAT(submittedBy)  AS submittedBy,GROUP_CONCAT(replyTo) AS replyTo FROM comment WHERE post_id='$post_id' GROUP BY replyTo ORDER BY id DESC");
while($comment = mysql_fetch_assoc($comments))
{
$cid = $comment['id'];
$comment_submit = $comment['submittedBy'];
$submitted_comment = $comment['comment'];
$comment_date = $comment['date'];
$replyTo = $comment['replyTo'];

echo'<div id="c'.$id.'" class="comment_container">';
    echo'<div class="comment_header">';
        echo'<a href="#" class="report">Flag</a>';
        echo'<a href="#" class="reply">Reply</a>';
        echo'<span>';
        echo $comment_submit.' - '.$comment_date.'</span>';
    echo'</div>';
    echo'<p>';
        echo $submitted_comment;
    echo'</p>';
    echo'
    <form method="post" class="replyForm">
        <textarea name="post_data_comment" class="replyTextArea" placeholder="@'.$comment_submit.'"></textarea>
        <input type="hidden" name="post_id" value="'.$post_id.'" />
        <input type="hidden" name="replyTo" value="'.$cid.'" />
        <div class="row_three">
            <span class="char_left_reply">Characters left: <span>500</span></span>
            <input type="button" value="Reply" name="share_reply" class="reply_comment" />
        </div>
    </form>
    ';
echo'</div>';

$reply = mysql_query("SELECT * FROM comment WHERE replyTo='$cid' ORDER BY id DESC");
while($replies = mysql_fetch_assoc($reply))
{
    $id = $replies['id'];
    $comment_submit = $replies['submittedBy'];
    $submitted_comment = $replies['comment'];
    $comment_date = $replies['date'];
    $replyTo = $replies['replyTo'];

    echo'<div id="c'.$id.'" class="comment_container" style="width:90%; float:right" >';
        echo'<div class="comment_header">';
            echo'<a href="#" class="report">Flag</a>';
            echo'<a href="#" class="reply">Reply</a>';
            echo'<span>';
            echo $comment_submit.' - '.$comment_date.'</span>';
        echo'</div>';
        echo'<p>';
            echo $submitted_comment;
        echo'</p>';
        echo'
        <form method="post" class="replyForm">
            <textarea name="post_data_comment" class="replyTextArea" placeholder="@'.$comment_submit.'"></textarea>
            <input type="hidden" name="post_id" value="'.$post_id.'" />
            <input type="hidden" name="replyTo" value="'.$cid.'" />
            <div class="row_three">
                <span class="char_left_reply">Characters left: <span>500</span></span>
                <input type="button" value="Reply" name="share_reply" class="reply_comment" />
            </div>
        </form>
        ';
    echo'</div>';
} 
```

} ?>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T07:11:38.643

请试试

```
$comments = mysql_query("SELECT distinct(comment),id,replyTo FROM comment WHERE post_id='$post_id' ORDER BY id DESC");

while($comment = mysql_fetch_assoc($comments))
{
    $id = $comment['id'];

    $comment = $comment['comment'];

    $reply = $comment['replyTo'];

    echo $comment;

    echo "<br />";

    $replyQuery = mysql_query("SELECT * FROM comment WHERE replyTo='$id' and comment <>  '$comment' ORDER BY id DESC");

    while($comment = mysql_fetch_assoc($comments))

    {

        $id = $comment['id'];

        $comment = $comment['comment'];

        $reply = $comment['replyTo'];

        echo $comment;

        echo "<br />";

     }

} 
```

# javascript - 如何向下滚动 - JQuery

> ID：12650170
> 
> 赞同：24
> 
> 时间：2012-09-29T05:22:29.563
> 
> 标签：javascript, jquery

我不是程序员，但我使用下面的代码将页面滚动到顶部。

如何调整它以向下滚动？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

<a class="btnMedio" href="javascript:;">
    <img src="http://desmond.imageshack.us/Himg41/scaled.php?server=41&filename=deixeseuemail.png&res=landing"/>
</a>

<script>
    $('.btnMedio').click(function(){
        $('html, body').animate({scrollTop:1000},'50');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-29T05:24:51.213

```
$('.btnMedio').click(function(event) {
    // Preventing default action of the event
    event.preventDefault();
    // Getting the height of the document
    var n = $(document).height();
    $('html, body').animate({ scrollTop: n }, 50);
//                                       |    |
//                                       |    --- duration (milliseconds) 
//                                       ---- distance from the top
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-29T05:34:17.213

尝试这个：

```
window.scrollBy(0,180); // horizontal and vertical scroll increments 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-12T16:24:12.813

这可以用来解决这个问题

```
<div id='scrol'></div> 
```

在 javascript 中使用这个

```
jQuery("div#scrol").scrollTop(jQuery("div#scrol")[0].scrollHeight); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-22T04:14:47.453

我主要使用以下代码向下滚动

```
$('html, body').animate({ scrollTop:  $(SELECTOR).offset().top - 50 }, 'slow'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-02T10:10:33.987

如果要向下滚动到 div (id="div1")。然后您可以使用此代码。

```
 $('html, body').animate({
     scrollTop: $("#div1").offset().top
 }, 1500); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-11T11:48:53.187

```
 jQuery(function ($) {
        $('li#linkss').find('a').on('click', function (e) {
            var
                link_href = $(this).attr('href')
                , $linkElem = $(link_href)
                , $linkElem_scroll = $linkElem.get(0) && $linkElem.position().top - 115;
            $('html, body')
                .animate({
                    scrollTop: $linkElem_scroll
                }, 'slow');
            e.preventDefault();
        });
    }); 
```

# javascript - Javascript匹配函数

> ID：12650175
> 
> 赞同：1
> 
> 时间：2012-09-29T05:23:49.860
> 
> 标签：javascript, jquery, regex

如何`match`在javascript中的函数内部给出表达式？

例如。

```
var val = $('#somElement').val();
var startWith = '#'
var match = val.match('/(\s)?' + startWith + '(.*?)(\s+|$)/'g); 
```

match 函数接受一个没有字符串的参数，因此上面的行是错误的。如何更改它，以便我可以根据我的变量值动态地将参数提供给 val.match？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T05:25:53.273

您需要显式构造一个 RegExp 对象：

```
var match = val.match( new RegExp('(\\s)?' + startWith + '(.*?)(\\s+|$)', 'g') ); 
```

请注意，反斜杠需要加倍，以说明字符串常量语法*也*使用反斜杠来引用特殊字符，并且您不需要前导和尾随正斜杠。

# python-3.x - AttributeError：“列表”对象没有属性“翻译”

> ID：12650183
> 
> 赞同：-1
> 
> 时间：2012-09-29T05:25:24.867
> 
> 标签：python-3.x

我是编程新手，我收到了这个错误：

回溯（最后一次调用）：文件“”，第 1 行，在 atbash_encrypt_list(['hello', 'goodbye', 'huh', 'later']) File "/Users/sebastiandemian/Desktop/School/CSC 241/ atbash_cypher.py”，第 8 行，在 atbash_encrypt_list 返回 atbash_encrypt(lst) 文件“/Users/sebastiandemian/Desktop/School/CSC 241/atbash_cypher.py”，第 5 行，在 atbash_encrypt 返回 s.translate(shifted_table) AttributeError: 'list ' 对象没有属性 'translate'

def atbash_encrypt(s): 字母 = 'abcdefghijklmnopqrstuvwxyz' shift_alphabet = 'zyxwvutsrqponmlkjihgfedcba'

def atbash_encrypt_list(lst): 返回 atbash_encrypt(lst)

谁能给我一个提示我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:38:42.450

您将列表传递给`atbash_encrypt_list`，它将列表*直接*传递给`atbash_encrypt`。您是不是要循环遍历元素（例如`return map(atbash_encrypt, lst)`）？

# java - JSP：如何在另一个页面上捕获超链接的文本

> ID：12650186
> 
> 赞同：1
> 
> 时间：2012-09-29T05:26:23.397
> 
> 标签：java, jsp, netbeans

jobview.jsp（显示所有作业的 JSP，作业参考号上的超链接）

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="java.sql.ResultSet"%>
<jsp:useBean id="job" scope="session" class="JobVacancies.Job" />
<%
        ResultSet rs = job.getResultSet();
        out.println("<h1>Job Vacancies</h1>");
        out.println("<table border=2>");
        out.println("<tr>");
        out.println("<td>Reference Number</td>");
        out.println("<td>Job Title</td>");
        out.println("<td>Brief Description</td>");
        out.println("<td>Date Posted</td>");
        out.println("<td>Date Closing</td>");
        out.println("</tr>");

        while (rs.next())
        {
          out.println("<tr>");
          out.println("<td><a href='jobdetail.jsp'>"+rs.getInt(1)+"</a></td>");
          out.println("<td>"+rs.getString(2)+"</td>");
          out.println("<td>"+rs.getString(3)+"</td>");
          out.println("<td>"+rs.getString(4)+"</td>");
          out.println("<td>"+rs.getString(5)+"</td>");
          out.println("</tr>");
         }
         out.println("</table>");
%> 
```

jobdetail.jsp(点击jobview.jsp根据Reference Number显示作业详情的JSP)

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Job Detail</title>
    </head>
    <body>
        <h1>Job Reference Number: </h1>

        <p><a href="index.jsp">Go back to job list</a></p>
    </body>
</html> 
```

我的问题是：如何在 jobdetail.jsp 上捕获超链接文本（点击 jobdetail.jsp 的参考号）。

我的目标是：将其`value(i)`用作`query("SELECT * FROM CQU.JOBS WHERE REFERENCE_NUM="+i)`

我是一个没有经验的编程学生。请尽可能详细地解释。如果你没有太多时间，请给我一些提示。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:29:54.947

您需要使用[查询字符串](http://en.wikipedia.org/wiki/Query_string)将信息作为请求参数传递。然后您可以使用[`getParameter(...)`](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)您的请求对象访问它。

在`jobview.jsp`你会做这样的事情：

```
int referenceNum = rs.getInt(1);
out.println("<a href='jobdetail.jsp?referenceNum="+referenceNum +"'>"+referenceNum +"</a>"); 
```

...`jobdetail.jsp`你会做这样的事情：

```
<h1>Job Reference Number: <% out.println(request.getParameter("referenceNum")) %></h1> 
```

PS，您应该考虑放弃[scriplets](http://en.wikipedia.org/wiki/Scriptlet)以支持[JSTL](http://en.wikipedia.org/wiki/JavaServer_Pages_Standard_Tag_Library)和[UEL](http://en.wikipedia.org/wiki/Unified_Expression_Language)。

# android - 如何在android中自动滚动水平滚动视图

> ID：12650191
> 
> 赞同：1
> 
> 时间：2012-09-29T05:26:56.440
> 
> 标签：android, horizontalscrollview

我在水平滚动视图中有五个图像，我想在页面加载完成后从左到右和从右到左自动滚动这些图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:11:54.963

您可以参考此项目[链接...](https://github.com/blessenm/SlideshowDemo)希望这可以解决您的问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:37:16.367

在 XML 文件中插入一个 Horizo​​ntalScrollView 标签 indise 你的 ScrollView 标签

**例如：**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:scrollbars="vertical">

<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="320px" android:layout_height="fill_parent">

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linlay" android:layout_width="320px"
        android:layout_height="fill_parent" android:stretchColumns="1"
        android:background="#000000"/>

</HorizontalScrollView>

</ScrollView> 
```

# android - 我们可以检索服务中的联系人吗？在安卓中

> ID：12650197
> 
> 赞同：0
> 
> 时间：2012-09-29T05:28:23.287
> 
> 标签：android, android-intent

我是Android新手，请帮我解决我的问题，这是我的问题....

我正在开发一个用于检索联系人的应用程序，但在我的应用程序中，我需要检索服务中的联系人，并且该服务需要每 5 分钟调用一次……在活动中，我有可能直接检索联系人……我试过了用于检索服务中的联系人，但我找不到任何解决方案..

我们有没有机会请告诉我，还有其他方法可以在服务中检索联系人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:07:33.790

请参阅此代码片段以检索联系人......

```
Cursor cursor = mContentResolver.query(
   RawContacts.CONTENT_URI,
   new String[]{RawContacts._ID,RawContacts.ACCOUNT_TYPE},
   RawContacts.ACCOUNT_TYPE + " <> 'com.anddroid.contacts.sim' "
    + " AND " + RawContacts.ACCOUNT_TYPE + " <> 'com.google' " //if you don't want to google contacts also
   ,
   null,
   null); 
```

**这是一个完整的程序给你............**

```
package com.example.android.contactmanager;
import android.app.Activity;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.RawContacts;
import android.util.Log;

public final class ContactManager extends Activity{

/**
 * Called when the activity is first created. Responsible for initializing the UI.
 */
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    printContactList();
}

/**
 * Print contact data in logcat.
 * SIM : Account_Type = com.anddroid.contacts.sim
 * Phone : Depends on the manufacturer e.g For HTC : Account_Type = com.htc.android.pcsc
 * Google : Account_Type = com.google
 */
private void printContactList() {
    Cursor cursor = getContacts();
    cursor.moveToFirst();
    while (cursor.isAfterLast() == false) {
        Log.d("Display_Name", cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME)));
        Log.d("Account_Type", cursor.getString(cursor.getColumnIndex(RawContacts.ACCOUNT_TYPE)));
        cursor.moveToNext();

    }
}

/**
 * Obtains the contact list for the currently selected account.
 *
 * @return A cursor for for accessing the contact list.
 */
private Cursor getContacts()
{
    // Run query
    Uri uri = ContactsContract.Data.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME,
            RawContacts.ACCOUNT_TYPE
    };
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, null, selectionArgs, sortOrder);
}
} 
```

# vb6 - 直到我重新启动应用程序才显示新的数据库记录

> ID：12650200
> 
> 赞同：0
> 
> 时间：2012-09-29T05:28:40.510
> 
> 标签：vb6, ado, recordset

当我移动到下一个表单时遇到问题，我刚刚添加的记录没有显示。例如，我输入“123456”然后进入下一个表格，它只会显示上一个记录，而不是“123456”。它只会在我停止程序然后再次运行时显示，并且“123456”将显示在第二个表单的文本框中。

表格1代码：

```
Private Sub Command1_Click()
    Form2.Hide
    Form1.Show
    Adodc1.Recordset.Update
End Sub

Private Sub Form_Load()
    Adodc1.Recordset.AddNew
End Sub 
```

表格2代码：

```
Private Sub Command1_Click()
    Adodc1.Recordset.Update
End Sub

Private Sub Form_Load()
    Adodc1.Refresh
    Adodc1.Recordset.MoveLast
End Sub 
```

有谁知道为什么直到我重新启动它才显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:46:56.940

ADODC 的一些注意事项：

*   对于刷新状态：`Adodc1.Recordset.Requery`
*   如果您使用 DataGrid 或任何控制器更新记录，则必须在提交更改之前离开当前编辑的记录。（当前编辑的行在DataGrid中没有变化）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:16:26.940

它可能与使用惰性写入的 Jet 数据库引擎有关，如[StackOverflow question](https://stackoverflow.com/questions/486970/why-is-my-access-database-not-up-to-date-when-i-read-it-from-another-process)中所回答的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:39:04.047

将 ADO 数据控件与 DataEnvironment 一起使用应该消除对数据库的单独连接的使用。我怀疑这就是你头痛的真正来源。

如果您使用的是 VBA，则所有赌注都已关闭，但是**您不应该将您的问题标记为 VB6！**

# python - 如何使用python在文本文件中查找特定单词

> ID：12650201
> 
> 赞同：-1
> 
> 时间：2012-09-29T05:29:10.000
> 
> 标签：python

我有一个包含 uss,uss,ussr 的文本文件想读取特定单词和单词“uss”的长度如何使用 python 读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:01:05.617

```
import re
def findwords(text, length):
    return re.findall(r"\b\w{{{0}}}\b".format(length), text) 
```

`\b`是一个词边界，确保只有整个词匹配。

`r"\w{{{0}}}".format(3)`结果`r"\w{3}"`。双括号是转义所必需的。

`\w`匹配字母数字字符；如果您想避免匹配数字或下划线，请`[^\W\d_]`在其位置使用：

```
def findwords(text, length):
    return re.findall(r"\b[^\W\d_]{{{0}}}\b".format(length), text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:33:42.513

为什么不使用正则表达式？

```
import re
help(re) 
```

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

为了您的麻烦，您可以使用以下正则表达式：
- `r'\w{3}'`：匹配 3 个字符（无数字）

您可以`\s`在匹配空间或制表符之前或之后添加。

# android - 如何使用 NDK r8b 将 C 或 C++ 源文件生成到临时程序集中

> ID：12650203
> 
> 赞同：0
> 
> 时间：2012-09-29T05:29:35.583
> 
> 标签：android, gcc, android-ndk, makefile

我的代码在编译器的优化中有一些问题，我想查看我的 c++ 文件的临时汇编代码。如何配置 android.mk 文件？

如果我使用

```
LOCAL_CFLAGS := -S 
```

编译器错误！和输出：

```
f:/codes/eclipse/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld.exe:./obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.o: file format not recognized; treating as linker script
f:/codes/eclipse/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld.exe:./obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.o:1: syntax error
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi-v7a/libsunred.so] Error 1 
```

并且没有任何汇编代码生成。

如果我使用

```
myasmfilter :=  $OBJS_DIR/SunRedVersion.S.original $OBJS_DIR/SunRedVersion.S $OBJS_DIR/SunRedVersion.o

    LOCAL_FILTER_ASM := myasmfilter 
```

把它拿出来

```
AsmFilter      : sunred <= SunRedVersion.s

myasmfilter ./obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.s ./obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.filtered.s
process_begin: CreateProcess(NULL, myasmfilter ./obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.s ./obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.filtered.s, ...) failed.
make (e=2): 系统找不到指定的文件。(system can't find the file)

make: *** [obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.filtered.s] Error 2 
```

它可以找到一个汇编代码，没有任何其他文件。如果我更改其他 cpp 文件，它仍然会输出第一个 make 文件的汇编代码。

有人知道如何编写**LOCAL_FILTER_ASM 过滤器**吗？能给我一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:31:09.720

**ndk-bulid**透明地运行**make**及其所有参数。因此，您可以按如下方式使用它：

```
ndk-build obj/local/armeabi-v7a/objs-debug/sunred/SunRedVersion.o LOCAL_CFLAGS=-S V=1 
```

...对于您要调查的任何 C 文件。甚至在命令行上指定多个目标。

# css - 您如何编写无序列表以在悬停时显示数据？

> ID：12650208
> 
> 赞同：0
> 
> 时间：2012-09-29T05:30:27.927
> 
> 标签：css, hover, html-lists

这有点难以解释。所以，我举个例子。

[http://www.genesee.edu/](http://www.genesee.edu/)

这是我大学的网站。在最底部，有一个联系信息区域。如果您将鼠标悬停在它上面，它会显示该位置的电话号码和资料。

我试图弄清楚这个功能被称为什么，以及如何将它编写到我的网站中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:36:05.023

在这种情况下，他们使用 Bootstrap `Navs`：

```
<ul class="nav nav-tabs">
 <li class="active">
  <a href="#">Home</a>
 </li>
 <li><a href="#">...</a></li>
 <li><a href="#">...</a></li>
</ul> 
```

[http://twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

使用引导程序`Tabs`：

```
$('#myTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
}) 
```

[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

从该页面的[`root.min.20120719035512.js`](http://www.genesee.edu/cms/home/includes/themes/swoosh/compiled/root.min.20120719035512.js)：

```
function hideCampusAddress() {
    $("div.campusInfo").each(function() {
        $(this).hide()
    })
}

function toggleCampusAddress(b) {
    var a = "div#pop_" + b;
    hideCampusAddress();
    $("div#showCampusInfo").html(function() {
        return $(a).html()
    })
}

$(document).ready(function() {
    $("ul#campus-selector li a").each(function() {
        $(this).mouseover(function() {
            nameArr = $(this).attr("id").split("_");
            toggleCampusAddress(nameArr[1]);
            $(this).parents().siblings().each(function() {
                $(this).children().removeClass("active")
            });
            $(this).addClass("active")
        })
    });
    hideCampusAddress();
    toggleCampusAddress("Batavia");
    $("#sel_Batavia").toggleClass("active");
}); 
```

并从页面来源：

```
<h3>Locations</h3>
<ul id="campus-selector" class="nav nav-tabs">
  <li class="vcard"><a class="org" href="/albion/" id="sel_Albion">Albion</a>
    <div id="pop_Albion" class="campusInfo">
      <div class="adr">456 West Ave Albion, NY 14411</div>
      <div class="tel">(585) 589-4936</div>
      <div class="email"><a href="mailto:albion@genesee.edu">albion@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard"><a class="org" href="/arcade/" id="sel_Arcade">Arcade</a>
    <div id="pop_Arcade" class="campusInfo">
      <div class="adr">25 Edward Street</div>
      <div class="tel">(585) 492-5265</div>
      <div class="email"><a href="mailto:arcade@genesee.edu">arcade@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard"><a class="org" href="/about/" id="sel_Batavia">Batavia</a>
    <div id="pop_Batavia" class="campusInfo">
      <div class="adr">One College Rd Batavia, NY 14020</div>
      <div class="tel">(585) 343-0055 | (866) CALL-GCC</div>
    </div>
  </li>
  <li class="vcard"><a class="org" href="/dansville/" id="sel_Dansville">Dansville</a>
    <div id="pop_Dansville" class="campusInfo">
      <div class="adr">31 Clara Barton St</div>
      <div class="tel">(585) 335-7820</div>
      <div class="email"><a href="mailto:dansville@genesee.edu">dansville@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard"><a class="org" href="/lima/" id="sel_Lima">Lima</a>
    <div id="pop_Lima" class="campusInfo">
      <div class="adr">7285 Gale Rd</div>
      <div class="tel">(585) 582-1226</div>
      <div class="email"><a href="mailto:lima@genesee.edu">lima@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard"><a class="org" href="/medina/" id="sel_Medina">Medina</a>
    <div id="pop_Medina" class="campusInfo">
      <div class="adr">11470 Maple Ridge Rd</div>
      <div class="tel">(585) 798-1688</div>
      <div class="email"><a href="mailto:medina@genesee.edu">medina@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard"><a class="org" href="/warsaw/" id="sel_Warsaw">Warsaw</a>
    <div id="pop_Warsaw" class="campusInfo">
      <div class="adr">115 Linwood Avenue</div>
      <div class="tel">(585) 786-3010</div>
      <div class="email"><a href="mailto:warsaw@genesee.edu">warsaw@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard" id="footer_dl"><a class="org" href="/depts/dl/" id="sel_Online">eLearning</a>
    <div id="pop_Online" class="campusInfo">
      <div class="adr">eLearning</div>
      <div class="tel">(585) 345-6969</div>
      <div class="email"><a href="mailto:online@genesee.edu">online@genesee.edu</a></div>
    </div>
  </li>
  <li class="vcard" id="footer_hs"><a class="org" href="/depts/ace/" id="sel_HighSchool">High School</a>
    <div id="pop_HighSchool" class="campusInfo">
      <div class="adr">Accelerated College Enrollment (ACE)</div>
      <div class="tel">(585) 345-6801 </div>
      <div class="email"><a href="mailto:ACE@genesee.edu">ACE@genesee.edu</a></div>
    </div>
  </li>
</ul>
<div id="showCampusInfo"></div> 
```

# css - 右对齐箭头

> ID：12650211
> 
> 赞同：2
> 
> 时间：2012-09-29T05:31:05.590
> 
> 标签：css, alignment

我正在尝试用左右箭头构建一个旋转木马。如何将右箭头对齐到屏幕的最右侧？我查看了许多帖子以弄清楚，尝试了浮动和对齐，无法弄清楚。

这是我的 JSFiddle：http: [//jsfiddle.net/agassi0430/CcAMD/](http://jsfiddle.net/agassi0430/CcAMD/)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T07:22:46.220

最容易`position: absolute;`在箭头上使用并使用`right: 0;` `left: 0;`. 您还必须记住设置`position: relative;`为包含它们的元素，以便绝对位置在该容器中工作。

[这是小提琴](http://jsfiddle.net/CcAMD/11/)。

另外，请注意您的 html 标记。`<li><li>`将（列表项）以外的任何内容放在`<ul></ul>`（无序列表）之间是无效的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:40:15.157

请试试这个：

```
 <div class="category">Most Discussed</div>
    <div class="contents">    
        <ul><div class="leftarrow"></div></ul>
        <ul><div class="content"></div>
            <li></li>
            <li></li>
            <li></li>
            <li></li></ul>
        <ul style="float:right;"><div class="rightarrow"></div></ul>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T06:48:17.900

我认为如果您可以从列表中删除箭头会有所帮助...但是如果您需要将它们保留在列表中，请尝试弄乱显示属性。如display:inline-block；在你的 CSS 中。但要小心，其中一些在旧版本的 IE 中不会很好地降级。对于 IE 7，您可能需要一个小的 css hack ......

# ruby-on-rails - 路由错误 - 使用带有自定义操作的 button_to 时没有路由匹配

> ID：12650213
> 
> 赞同：1
> 
> 时间：2012-09-29T05:31:29.587
> 
> 标签：ruby-on-rails

我有以下按钮来下载文件。

```
= button_to 'download', action: 'download', method: 'get' 
```

我`download`在 MoviesController 下有一个像这样的方法

```
# movies_controller.rb
def download
  …
end 
```

但是，我收到以下错误。知道如何解决这个问题吗？

```
Routing Error

No route matches {:action=>"download", :method=>"get", :controller=>"movies"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T05:57:39.750

在你的`routes.rb`：

```
resources :movies do
  get 'download', on: :member
end 
```

现在，在您的视图中，您需要指定要下载的电影：

```
= button_to 'download', download_movie_path(@movie), method: 'get' 
```

另外，请注意：

1.  使用而不是在助手`path`中指定。`controller/action`

2.  用于请求，如果您需要按钮样式的链接`link_to`，`GET`请通过 CSS 应用它。`button_to`with `GET`request 是一种不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T06:39:47.863

试试这个，它应该与您的视图代码一起使用，只需更改为**routes.rb**

```
resources :movies do
    get :download, :on => :collection
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T13:25:47.970

或者，如果您想指定控制器/动作（它有优势，因为它允许您传递任意参数），您还需要显式传递动作所依赖的任何参数（假设您正在尝试下载单个电影，而不是整个集合）。

```
button_to 'download', {controller: 'movies', action: 'download', id: movie.id }, method: 'get' 
```

此外，同上 Mikhail D 关于将 link_to 用于“获取”请求的观点。显式定义方法非常适合向“更新”操作发送请求（通过设置方法：：patch 或方法：：puts），但对于“获取”，只需使用 link_to。

# android - listview 适配器中的按钮

> ID：12650219
> 
> 赞同：1
> 
> 时间：2012-09-29T05:32:00.403
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

能解决我的问题吗。最后经过 2 天的努力，我清楚地得到了 70% 的输出。Exp：我有哪些数据来自服务器的列表视图。在列表视图中有一些文本、按钮和滚动索引 A、BC、D、E、F、G。
问题：按钮不起作用意味着当我单击它时...如果添加以下代码。它看起来像下面的图像：

在这里，我以这种方式使用了 XML ---> com.woozzu.android.widget.IndexableListView 在这种情况下，按钮 ONCLICK 不起作用 滚动视图 A、B、C 以正确的方式显示并且工作正常..

![在此处输入图像描述](../Images/49459227551c4b16e446a3c4f181a369.png)

**状态1：-**

homempleb.xml

```
 <LinearLayout
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:background="#335552"
        android:layout_below="@+id/relativeLayout4" >                       
 <com.woozzu.android.widget.IndexableListView          
            android:id="@+id/homelistView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"               
            android:layout_weight="1.04"
            android:dividerHeight="0dip" /> 
```

MainActivity.java

```
public class MainActivity extends Activity implements
    SearchView.OnQueryTextListener, SearchView.OnCloseListener {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.homempleb);
    Log.i("scan", " txtScanResult ");

    ActionItem nextItem = new ActionItem();
    final QuickAction quickAction = new QuickAction(this,
            QuickAction.VERTICAL);
    quickAction.addActionItem(nextItem);
    quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {
        @Override
        public void onDismiss() {
            Toast.makeText(getApplicationContext(), "Dismissed",
                    Toast.LENGTH_SHORT).show();
        }
    });

   // listView = (IndexableListView) findViewById(R.id.homelistView);
    listView = (ListView) findViewById(R.id.homelistView);
    listView.setTextFilterEnabled(true);
    listView.setFastScrollEnabled(true);
    listView.setFastScrollAlwaysVisible(true);
    objectAdapter = new EfficientAdapter(this);     
    listView.setAdapter(objectAdapter); 
```

}

高效适配器.java

```
public class EfficientAdapter extends BaseAdapter implements SectionIndexer {

private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private LayoutInflater mInflater;
private Context context;
protected ListView mListView;
private int positions;
ViewHolder holder;

public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;

    String patientListJson = CountriesList.jsonData;
    JSONObject jssson;
    try {
        jssson = new JSONObject(patientListJson);
        patientListJson = jssson.getString("PostPatientDetailResult");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
    patientListArray = new ArrayList<Patient>();
    for (JsonElement obj : Jarray) {
        Patient patientList = gson.fromJson(obj, Patient.class);
        patientListArray.add(patientList);
        Log.i("patientList", patientListJson);

    }
}

/**
 * sorting the patientListArray data
 */
public void sortMyData() {
    // sorting the patientListArray data
    Collections.sort(patientListArray, new Comparator<Object>() {
        @Override
        public int compare(Object o1, Object o2) {
            Patient p1 = (Patient) o1;
            Patient p2 = (Patient) o2;
            return p1.getName().compareToIgnoreCase(p2.getName());
        }

    });
}

public int getCount() {

    return patientListArray.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    this.positions = position;

    if (convertView  == null) {                     
        convertView = mInflater.inflate(R.layout.homemplebrowview, parent,false);
        holder = new ViewHolder();
        holder.text1 = (TextView) convertView.findViewById(R.id.name);
        holder.text2 = (TextView) convertView.findViewById(R.id.mrn);
        holder.text3 = (TextView) convertView.findViewById(R.id.date);
        holder.text4 = (TextView) convertView.findViewById(R.id.age);
        holder.text5 = (TextView) convertView.findViewById(R.id.gender);
        holder.text6 = (TextView) convertView.findViewById(R.id.wardno);
        holder.text7 = (TextView) convertView.findViewById(R.id.roomno);
        holder.text8 = (TextView) convertView.findViewById(R.id.bedno);

        holder.btnList = (Button) convertView.findViewById(R.id.listbutton);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.text1.setText(Util.formatN2H(patientListArray.get(position)
            .getName()));
    holder.text2.setText(patientListArray.get(position).getMrnNumber());
    holder.text3.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text4.setText(Util.formatN2H(patientListArray.get(position)
            .getAge()));
    holder.text5.setText(Util.formatN2H(patientListArray.get(position)
            .getGender()));
    holder.text6.setText(Util.formatN2H(patientListArray.get(position)
            .getWard()));
    holder.text7.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text8.setText(Util.formatN2H(patientListArray.get(position)
            .getBed()));

    //  holder.btnList.setOnClickListener(new OnClickListener(test));

    holder.btnList.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {                   
            Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
            Intent next = new Intent(context, Home.class);
            Log.i("next23", "next"+ next);
            context.startActivity(next);
        }
    });

    return convertView;
}

      /*OnItemClickListener test = new OnItemClickListener() {
onItemClick(AdapterView<?> parent, View view, int position, long id){
      ((TextView)view.findViewById(R.id.yourTextViewId)).getText();

  {
//    Button btnList=(Button)v.findViewById(R.id.listbutton);

    btnList.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {                   
        Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
        Intent next = new Intent(context, Home.class);
        Log.i("next23", "next"+ next);
        context.startActivity(next);
    }

});
      }

         };
      */

static class ViewHolder {
    public Button btnList;
    public TextView text8;
    public TextView text7;
    public TextView text6;
    public TextView text5;
    public TextView text4;
    public TextView text1;
    public TextView text2;
    public TextView text3;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

       /*public void onItemClick(AdapterView<?> arg0, View v, final int position,
          long arg3)
      {
    holder.btnList=(Button)v.findViewById(R.id.listbutton);

    holder.btnList.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {                   
        Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
        Intent next = new Intent(context, Home.class);
        Log.i("next23", "next"+ next);
        context.startActivity(next);
    }

});
      }
        */

public int getPositionForSection(int section) {
    // sorting the patientListArray data
    sortMyData();
    // If there is no item for current section, previous section will be
    // selected
    for (int i = section; i >= 0; i--) {
        for (int j = 0; j < getCount(); j++) {
            if (i == 0) {
                // For numeric section
                for (int k = 0; k <= 9; k++) {
                    if (StringMatcher.match(
                            String.valueOf(patientListArray.get(j)
                                    .getName().charAt(0)),
                            String.valueOf(k)))
                        return j;
                }
            } else {
                if (StringMatcher.match(
                        String.valueOf(patientListArray.get(j).getName()
                                .charAt(0)),
                        String.valueOf(mSections.charAt(i))))
                    return j;
            }
        }
    }
    return 0;
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
    String[] sections = new String[mSections.length()];
    for (int i = 0; i < mSections.length(); i++)
        sections[i] = String.valueOf(mSections.charAt(i));
    return sections;
}

    } 
```

**状态2：-**

在这种情况下，单击按钮工作正常，但滚动视图 A、B、C 也工作正常，但在侧面将没有字母 A、B、C、D、E、F、G ... 如果我在其中添加列表视图homempleb.xml，那么两者都可以正常工作，但没有图像中显示的字母索引。我希望按钮和滚动索引都像上面的图片一样工作。我不擅长这个主题。请帮助我它以这种方式显示：

![在此处输入图像描述](../Images/e1c71d20b7546f9f957fb4e3c58c1124.png)

homempleb.xml

```
<LinearLayout
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:background="#335552"
        android:layout_below="@+id/relativeLayout4" >                      
     <ListView
            android:id="@+id/homelistView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"               
            android:layout_weight="1.04"
            android:dividerHeight="0dip" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T13:19:20.007

如果有人还在乎：

TouchEvent 被索引滚动条捕获。 ~~见[https://github.com/denley/IndexableListView/commit/18210a54487ba079bb332fafec709e2de26883db](https://github.com/denley/IndexableListView/commit/18210a54487ba079bb332fafec709e2de26883db)~~

只需更改那几行，您就会很好。

编辑：我只是出于好奇。链接已失效。我猜这个错误在最近的版本中得到了解决（查看最近更新的[原始 IndexableListView 项目](https://github.com/woozzu/IndexableListView)）。我不知道发生了什么变化，甚至不知道问题出在哪里，所以这是我的工作职能，恕我直言，我可能对这个问题负责，以防万一：

IndexedListView.java

```
@Override
public boolean onTouchEvent(MotionEvent ev) {
    if (mScroller != null && mScroller.onTouchEvent(ev))
        return true;
    try{
    if (mGestureDetector == null) {
        mGestureDetector = new GestureDetector(getContext(),

                new GestureDetector.SimpleOnGestureListener() {
                    @Override
                    public boolean onFling(MotionEvent e1, MotionEvent e2,
                            float velocityX, float velocityY) {
                        if(mScroller!=null){
                        mScroller.show();
                        }
                        return super.onFling(e1, e2, velocityX, velocityY);
                    }

                });

    }
    }catch(Exception e){
        e.printStackTrace();
    }
    mGestureDetector.onTouchEvent(ev);

    return super.onTouchEvent(ev);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    if(mScroller!=null){
    if(mScroller.contains(ev.getX(), ev.getY())){
        return true;
    }

    return super.onInterceptTouchEvent(ev);
    }
    return false;
} 
```

IndexedScroller.java

```
public boolean onTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if (mState != STATE_HIDDEN && contains(ev.getX(), ev.getY())) {
            setState(STATE_SHOWN);
            mIsIndexing = true;

            mCurrentSection = getSectionByPoint(ev.getY());

            mListView.setSelection(mIndexer
                    .getPositionForSection(mCurrentSection));
            return true;
        }
        break;
    case MotionEvent.ACTION_MOVE:
        if (mIsIndexing) {

            if (contains(ev.getX(), ev.getY())) {

                mCurrentSection = getSectionByPoint(ev.getY());
                mListView.setSelection(mIndexer
                        .getPositionForSection(mCurrentSection));
            }
            return true;
        }
        break;
    case MotionEvent.ACTION_UP:
        if (mIsIndexing) {
            mIsIndexing = false;
            mCurrentSection = -1;
        }
        if (mState == STATE_SHOWN)
            setState(STATE_HIDING);
        break;
    }
    return false;
} 
```

# python - 如何在 sagemath 中添加标题、轴标签和图例？

> ID：12650222
> 
> 赞同：4
> 
> 时间：2012-09-29T05:32:48.730
> 
> 标签：python, graphing, sage

我目前正在使用 sagemath 托管的在线工作簿制作一些图表。

这是我正在尝试生成图表的一些代码示例：

```
myplot = list_plot(zip(range(20), range(20)), color='red')
myplot2 = list_plot(zip(range(20), [i*2 for i in range(20)]), color='blue')
combined = myplot + myplot2
combined.show() 
```

这是非常基本的——它本质上是两个并列的散点图。

有没有办法轻松添加轴标签、图例和可选的标题？

我设法破解了一个可以让我添加轴标签的解决方案，但它看起来非常丑陋和愚蠢。

```
from matplotlib.backends.backend_agg import FigureCanvasAgg 
def make_graph(plot, labels, figsize=6):
    mplot = plot.matplotlib(axes_labels=labels, figsize=figsize)
    mplot.set_canvas(FigureCanvasAgg(mplot))
    subplot = mplot.get_axes()[0]
    subplot.xaxis.set_label_coords(x=0.3,y=-0.12)
    return mplot

a = make_graph(combined, ['x axis label', 'y axis label'])
a.savefig('test.png') 
```

有没有更简单的方法来添加轴标签、图例和标题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T17:59:18.740

我最终找到了sagemath对象[的文档。](http://www.sagemath.org/doc/reference/sage/plot/graphics.html)`Graphics`

我不得不这样做：

```
myplot = list_plot(
    zip(range(20), range(20)), 
    color='red', 
    legend_label='legend item 1')

myplot2 = list_plot(
    zip(range(20), [i*2 for i in range(20)]), 
    color='blue', 
    legend_label='legend item 2')

combined = myplot + myplot2

combined.axes_labels(['testing x axis', 'testing y axis'])
combined.legend(True)

combined.show(title='Testing title', frame=True, legend_loc="lower right") 
```

我不完全确定为什么没有`title`方法以及为什么在不需要轴时必须在内部指定标题`show`，但这似乎确实有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T06:07:07.627

*   轴标签：`myplot.xlabel("text for x axis")`,`myplot.ylabel("text for y axis")`
*   标题：`myplot.title("My super plot")`
*   图例：`label="Fancy plot"`为调用添加一个参数`plot`并创建图例`legend()`

请参阅[此处](http://matplotlib.org/users/pyplot_tutorial.html)和[此处](http://matplotlib.org/users/legend_guide.html)以获取更多说明。

# javascript - jquery自动完成自定义数据JSP

> ID：12650224
> 
> 赞同：0
> 
> 时间：2012-09-29T05:33:10.110
> 
> 标签：javascript, jquery, jsp, autocomplete

我正在使用 [jquery 自动完成](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete)。我有这个要求，用户在文本框中键入并出现一个下拉列表，其中显示包含该字符的员工姓名，并且当他们键入时，列表变得更加简洁。

当用户选择员工时，其 emp_id、emp_email 等将被发送到控制器进行进一步处理。

此员工信息存储在 Hashmap 中，如下所示：

```
// 001 is emp id, Aaron Gonsalves is the display name 
and Aaron@email.com is the email id

empMap("1","001:Aaron Gonsalves:Aaron@email.com");    
empMap("2","002:Abraham Gonsalves:Abraham@email.com");
empMap("3","003:Ackon Gonsalves:Ackon@email.com"); 
```

我知道 jquery 支持键值对，但为此我必须使用 json（我猜是这样）来获取信息并将其发送到自动完成。无论如何，我不能在我的项目中使用 json。

对于 UI，我正在使用以下代码

```
 // This logic is working fine when <%=empMap> 
 // contains data like "Aaron Gonsalves,Abraham Gonsalves,Ackon Gonsalves"
 $(document).ready(function(){
     var data = "<%=empMap>".split(","); 
     $("#example").autocomplete(data);  // #example is my text box id
 }); 
```

是否有任何方法可以根据“：”在内部拆分数据并在我的下拉列表中显示 emp_name 并通过隐藏字段将 emp_id 和电子邮件发送到控制器？

请帮我一些代码，我是 jquery 的新手，我对它的了解很少。

为了您的信息，我正在使用 Weblogic Workshop 8.1、JPF 框架（类似于 Struts）、JDK 1.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:21:14.360

如果您将其转换为 JSON，它会容易得多。我了解您不想从服务器发送 json 对象，但您可以在客户端将地图（或任何数据结构）转换为 json。

您的问题的工作代码：[DEMO JSFiddle](http://jsfiddle.net/gxX9a/3/)

Javascript：

```
<script>
$(document).ready(function() {
    var dataFromJava = "{3=003:Ackon Gonsalves:Ackon@email.com, 2=002:Abraham Gonsalves:Abraham@email.com, 1=001:Aaron Gonsalves:Aaron@email.com}";
    parseMap(dataFromJava);
    var data = parseMap(dataFromJava);
    $("#example").autocomplete({
        source: data,
        select: function(event, ui) {
            $("#example").val(ui.item.label);
            $("#emp_id").val(ui.item.value);
            $("#email").val(ui.item.email);

            return false;
        },
        change: function(event, ui) {
            $("#emp_id").val('');
            $("#email").val('');
        }
    });
});

function parseMap(data) {
    //Remove { and }
    data = data.substring(1, data.length - 1);
    var rows = data.split(',');
    var result = new Array();
    for (i = 0; i < rows.length; i++) {
        var value = rows[i].split("=")[1];
        var variables = value.split(":");
        result[i] = {};
        result[i]['value'] = variables[0];
        result[i]['label'] = variables[1];
        result[i]['email'] = variables[2];
    }
    return result;
}​
function submitValue() {

    var name = $("#example").val();
    var id = $("#emp_id").val();
    var email = $("#email").val();

    alert(id + ":" + name + ":" + email);
}
</script>​ 
```

还使用最新版本的 Jquery 和 Jquery-UI（或 Jquery 自动完成）插件..

# php - jQuery nextUntil 的问题

> ID：12650225
> 
> 赞同：-1
> 
> 时间：2012-09-29T05:33:17.337
> 
> 标签：php, jquery, wordpress

有人可以帮我解决这个问题吗？我只想在为每个点击“showfaqanswer”时显示“faqanswer”。我看不出 PHP 和 jQuery 代码有什么问题。谢谢您的帮助！

```
<?php query_posts("cat=17&posts_per_page=7&offset=7"); ?>
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

<p>
<a href="#" id="showfaqanswer"><?php the_title(); ?></a><br />
</p>

<div id="faqanswer"><?php the_content(); ?></div> 

<?php endwhile; ?>

jQuery(document).ready(function() {
$('#showfaqanswer').click(function(){
$('#faqanswer').nextUntil('#showfaqanswer').show();
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:00:48.343

我们需要使用类。因为 id 必须是唯一的。

请试试这个：

```
<?php query_posts("cat=17&posts_per_page=7&offset=7"); ?>
<?php $i=1; ?>
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

<p>
<a href="#" id="<?php echo $i;?>" class="fanswer"><?php the_title(); ?></a><br />
</p>

<div id="faqanswer<?php echo $i;?>" style="display:none;"><?php the_content(); ?></div> 
<?php $i++; ?>
<?php endwhile; ?>

jQuery(document).ready(function() {
$('.fanswer').click(function(){
var id = $(this).id;
$('#faqanswer'+id).show();
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:50:17.683

阅读选择器上的[文档](http://api.jquery.com/nextUntil/)`nextUntil`：它获取*兄弟姐妹*，所以如果它没有兄弟姐妹，它不会选择任何东西。

```
$('#showfaqanswer').click(function(){

    // get the parent of the current #showfaqanswer, select until the the next p-tag
    $(this).parent().nextUntil('p').show();
}); 
```

# iphone - 使用 AFNetworking 发布请求

> ID：12650234
> 
> 赞同：0
> 
> 时间：2012-09-29T05:34:49.580
> 
> 标签：iphone, ios, afnetworking

我是编程新手，尤其是在网络方面。所以现在我正在创建应用程序来与 Instagram 进行交互。在我的项目中，我使用 AFNetworking。我在这里看到了他们的文档和许多示例。而且我还不明白如何获得对 Instagram API 的 POST 请求。请你能给我真实的代码示例或我可以阅读有关如何执行此操作的内容吗？请帮忙。我试图提出这样的请求，它没有错误也没有响应。它什么也没给:(

```
(IBAction)doRequest:(id)sender{

NSURL *baseURL = [NSURL URLWithString:@"http://api.instagram.com/"];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
[httpClient defaultValueForHeader:@"Accept"];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        user_token, @"access_token",
                        nil];

[httpClient postPath:@"/feed" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // reponseObject will hold the data returned by the server.
    NSLog(@"data: %@", responseObject);
}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}];

NSLog(@"click!!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T06:14:44.773

几件需要关心的事情。Instagram API 返回 JSON，因此您可以使用 AFJSONRequestOperation，它将返回已解析的 NSDictionary。
Instagram API 说：

> 所有端点都只能通过 https 访问，并且位于 api.instagram.com。

您应该更改您的 baseURL。

```
AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:yourURL];
NSURLRequest *request = [client requestWithMethod:@"POST"
                                             path:@"/your/path"
                                       parameters:yourParamsDictionary];
AFJSONRequestOperation *operation =
[AFJSONRequestOperation
 JSONRequestOperationWithRequest:request
 success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
{
    // Do something with JSON
}
 failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
{
    // 
}];

// you can either start your operation like this 
[operation start];

// or enqueue it in the client default operations queue.
[client enqueueHTTPRequestOperation:operation]; 
```

# python - 使用 Python BaseHTTPServer 处理同时/异步请求

> ID：12650238
> 
> 赞同：11
> 
> 时间：2012-09-29T05:36:13.947
> 
> 标签：python, simplehttpserver

我通过创建一个继承自 HTTPServer 和 ThreadingMixIn 的类来设置一个线程化（使用 Python 线程）HTTP 服务器：

```
class ThreadedHTTPServer(ThreadingMixIn, HTTPServer):
    pass 
```

我有一个从 BaseHTTPRequestHandler 继承的处理程序类，我用这样的东西启动服务器：

```
class MyHandler(BaseHTTPRequestHandler):
    ...

server = ThreadedHTTPServer(('localhost', 8080), MyHandler)
# Prevent issues with socket reuse
server.allow_reuse_address = True
# Start the server
server.serve_forever() 
```

这一切都很简单。我遇到的问题是，ThreadingMixIn、ForkingMixIn 或其他方式，请求最终阻塞了请求处理程序以返回。通过实现此示例代码可以很容易地看到这一点：

```
class MyHandler(BaseHTTPRequestHandler):
    def respond(self, status_code):
        self.send_response(status_code)
        self.end_headers()

    def do_GET(self):
         print "Entered GET request handler"
         time.sleep(10)
         print "Sending response!"
         respond(200) 
```

如果服务器同时处理这些，那么我们将能够发送两个请求并看到服务器在发送任何一个响应之前都进入了两个 GET 请求处理程序。相反，服务器将为第一个请求输入 GET 请求处理程序，等待它返回，然后输入第二个请求（因此第二个请求需要大约 20 秒而不是 10 秒才能返回）。

我有没有一种简单的方法来实现一个服务器不等待处理程序返回的系统？具体来说，我正在尝试编写一个系统，该系统在返回任何请求（一种长轮询形式）之前等待接收多个请求，并遇到第一个请求等待阻止任何未来请求连接到服务器的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T08:47:53.007

```
class ThreadedHTTPServer(ThreadingMixIn, HTTPServer):
    pass 
```

足够的。您的客户可能不会发出并发请求。如果您并行发出请求，线程服务器将按预期工作。这是客户端：

```
#!/usr/bin/env python
import sys
import urllib2

from threading import Thread

def make_request(url):
    print urllib2.urlopen(url).read()

def main():
    port = int(sys.argv[1]) if len(sys.argv) > 1 else 8000
    for _ in range(10):
        Thread(target=make_request, args=("http://localhost:%d" % port,)).start()

main() 
```

以及对应的服务器：

```
import time
from BaseHTTPServer   import BaseHTTPRequestHandler, HTTPServer, test as _test
from SocketServer     import ThreadingMixIn

class ThreadedHTTPServer(ThreadingMixIn, HTTPServer):
    pass

class SlowHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header("Content-type", "text/plain")
        self.end_headers()

        self.wfile.write("Entered GET request handler")
        time.sleep(1)
        self.wfile.write("Sending response!")

def test(HandlerClass = SlowHandler,
         ServerClass = ThreadedHTTPServer):
    _test(HandlerClass, ServerClass)

if __name__ == '__main__':
    test() 
```

所有 10 个请求都在 1 秒内完成。如果`ThreadingMixIn`从服务器定义中删除，则所有 10 个请求都需要 10 秒才能完成。

# c# - 进程无法访问文件 mdf 扩展名

> ID：12650243
> 
> 赞同：0
> 
> 时间：2012-09-29T05:37:33.213
> 
> 标签：c#, .net, windows, visual-studio, visual-studio-2012

我正在尝试删除 Visual Studio 2012 中的 .mdf 文件，但出现此错误“该进程无法访问该文件，因为它正被另一个进程使用”。我在这个问题上尝试了一些类似的帖子，但我没有发现任何帮助，因为其他每个帖子都在处理不同的过程。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:42:02.257

我想出了我需要做什么。在 Visual Studio 2012 中删除文件不会产生可以帮助您解决问题的错误；我所做的是尝试在 Windows 资源管理器中删除 .mdf 文件，然后我给了我一个错误，即使我删除了数据库，SQL Server 2008 R2 实际上仍在保留该文件。一旦我有了新的，我所要做的就是关闭 SQL Server 2008 R2 并尝试再次删除该文件并且它起作用了。

如果您需要有关如何打开和关闭 SQL Server 2008 R2 的说明，请参阅下面的链接。

[打开和关闭 SQL Server](http://technet.microsoft.com/en-us/library/ms175516%28v=sql.105%29.aspx)

# php - 如何将 ajax jquery 用于让错误显示的表单消息？

> ID：12650244
> 
> 赞同：0
> 
> 时间：2012-09-29T05:37:32.063
> 
> 标签：php, jquery

我是ajax jquery的新手，我读过它并弄乱了代码，但我仍然不了解一些东西，我试图创建一个消息表单，我希望我的php脚本处理消息，当他们出错时，我想要错误显示在表单的同一页面上，我也不希望页面在单击提交时刷新。

在这里我得到了什么，我知道它并不多，我仍然试图了解如何使用 ajax jquery

```
<script>
$.post("message/sendm.php", {message:"#message" } );

</script>
  <div id="send"  style="color:#000" class="reveal-modal">

       <form name="message" method="post" style="background:#999">
<table>
<tr><td>To:<?php echo $user ?></td></tr>  
<tr><td>Message:<textarea style="resize:none"  id="message"name="text" rows="10" cols="60"></textarea></td></tr>  
<tr><td><input name="message" type="submit" value="Send!"></td></tr>  
</form> 
     </table> 
```

我知道它并不多，我仍然试图了解如何使用 ajax jquery，如果有人知道一本好书来学习 ajax jquery，请告诉我。我已经尝试过[jquery](http://api.jquery.com/jQuery.post/)网站，它并没有真正有用，它没有解释一切，就像它没有解释如何将 $_Post 发送到 php 页面以处理任何错误以及如何在同一页面上显示它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:50:59.850

您可以使用 jQuery 对服务器进行 ajax 调用。我喜欢使用的一种方法是：

```
$("#form").submit(function (event) {
    event.preventDefault(); //this stops the default form action
    $.ajax({
        type: 'POST', //this is how you specify post or get
        url: 'myform.php', //this is where your server file for processing the form goes
        data: $('#form').serialize(); //serialize all the data from the form
        success: function (data) {
                 $('#alerts').html(data)//fills the element with the id of alerts with whatever is returned from the php page.
        }
    });
}); 
```

然后你只需要在你的服务器上创建一个页面来处理信息（在我的例子中它将是 myform.php。你从 php 页面输出的任何东西（即使用 echo）都将显示在带有 id 警报的元素中。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:01:02.747

如果您想要一种 Web 2.0 的感觉，您希望避免使用本机 HTML 表单提交。而是使用 jquery 中的 .button 函数创建一个按钮。单击 (.onclick) 时，序列化表单并使用 jquery 中的 .ajax 函数将其发布到后端。您可以使用 .done 函数或成功选项（在 Ajax 函数中）来处理响应

# java - Java：元帅解组为 .properties 格式？

> ID：12650245
> 
> 赞同：0
> 
> 时间：2012-09-29T05:37:48.477
> 
> 标签：java, properties, jaxb, marshalling

请注意，这与封送属性对象无关。

我想编组为属性格式。例子：

```
class Foo { String a = "aaa"; Item i = new Item(); }
class Item { String val = "Value"; }

marshall( new 
```

进入

```
a = Hello
i.value = Value 
```

我知道这种方法有其局限性，但没关系。

**这些方面有什么东西吗？**

如果没有，是否有一些简单的表达式语言库可以同时执行 - 查询对象*并*在其对象树中识别“字符串键”？

我检查了 BeanUtils - 那里什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:47:33.140

您可以为此使用 objectprops ( [http://code.google.com/p/objectprops/](http://code.google.com/p/objectprops/) )：

```
ObjectPropertiesStore store = new ObjectPropertiesStore();

// write the object to the store        
store.writeObject(new Foo());

// let's get the Properties object and print the contents to System.out
Properties properties = store.getDatabase();
properties.store( System.out, "My test"); 
```

或者，您可以使用 commons-lang 的 ReflectionToStringBuilder 并传递您自己实现的自定义[ToStringStyle](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/ToStringStyle.html)以简单的方式实现这一点，并将生成的字符串加载到 Properties 对象中。

# c# - 访问包含另一个类的属性的类的属性

> ID：12650247
> 
> 赞同：0
> 
> 时间：2012-09-29T05:38:14.273
> 
> 标签：c#

```
public class Customer
{
    public int id { get; set; }
    public Person CustPerson { get; set; }
    public Customer()
    {
        this.CustPerson = new Person();
    }
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
}

private void button1_Click(object sender, EventArgs e)
{
    List<Customer> CustomerList=new List<Customer>();
    for (int i = 0; i <= 4; i++)
    {
        Customer cust = new Customer();
        cust.id = i;
        cust.CustPerson.FirstName = "john" + i.ToString();
        cust.CustPerson.LastName = "deo" + i.ToString();
        cust.CustPerson.Age = 20 + i;
        CustomerList.Add(cust);
    }
    dataGridView1.DataSource = CustomerList;
} 
```

我希望`firstname`, `lastname`&`age`打印在 中`gridview`，但我得到一列，而不是三列，其中包含`mynamespace.person`:-(

帮帮我......任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:44:49.943

您只需选择`CustPerson`属性 (Linq)：

```
CustomerList.Add(cust.Select(c => c.CustPerson).ToArray()); 
```

还要确保`GridView`已`AutoGenerateColumns`设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:00:03.030

```
public partial class Form1 : Form
{
    DataGridViewCheckBoxColumn Column;
    CheckBox checkbox;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        List<Customer> CustomerList = new List<Customer>();
        for (int i = 0; i <= 4; i++)
        {
            Customer cust = new Customer();
            cust.id = i;                 
            cust.FirstName = "john" + i.ToString();
            cust.LastName = "deo" + i.ToString();
            cust.Age = 20 + i;
            CustomerList.Add(cust);
        }
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = CustomerList;            
    }
}
public class Customer:Person
{
    public int id { get; set; }       
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T07:21:53.190

[与此处](http://www.dotnetjohn.com/articles.aspx?articleid=219)描述的过程类似，您可以为 GridView 设置列以显示您喜欢的任何信息

```
 <asp:TemplateField HeaderText="First Name" SortExpression="CustPerson.FirstName">
         <ItemTemplate>
             <asp:Label ID="lblCustomerFirstName" runat="server" Text=''<%# ((Person)Eval("CustPerson")).Firstname %>''></asp:Label>
         </ItemTemplate>
     </asp:TemplateField>
     <asp:TemplateField HeaderText="Last Name" SortExpression="CustPerson.LastName">
         <ItemTemplate>
             <asp:Label ID="lblCustomerLastName" runat="server" Text=''<%# ((Person)Eval("CustPerson")).LastName %>''></asp:Label>
         </ItemTemplate>
     </asp:TemplateField>
     <asp:TemplateField HeaderText="Age" SortExpression="CustPerson.Age">
         <ItemTemplate>
             <asp:Label ID="lblCustomerAge" runat="server" Text=''<%# ((Person)Eval("CustPerson")).Age %>''></asp:Label>
         </ItemTemplate>
     </asp:TemplateField> 
```

# php - PHP - 登录系统：标头已经发送？

> ID：12650254
> 
> 赞同：0
> 
> 时间：2012-09-29T05:40:18.727
> 
> 标签：php, header, if-statement

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

所以我的网站基于一个脚本，其中包括页眉、文件夹中的页面，然后是页脚。我现在尝试引入登录系统，但问题是我不断收到已经发送的标题。这是我必须编写的代码，以便如果未设置会话，则重定向。

```
<?php 

if(empty($_SESSION['user'])) 
{ 

    header("Location: login.php"); 

    die("Redirecting to login.php"); 
} 
?> 
```

现在我说得对，标题已经发送问题，你可以在这里看到第一手资料 - [http://www.cogameservers.com/ncms](http://www.cogameservers.com/ncms)这不是因为标题内容已经显示，导致标题已经发送？

所以我有一个变量设置为一个名为 p 的 $_GET 变量，我可以制作一堆 if else 语句来实现它，以便如果 $_GET["p"] == home，那么我执行顶部的标题我的 header.php，是第一个调用的页面。

很抱歉，这可能看起来令人困惑，请在您希望看到的代码上留下请求

* * *

索引.php

```
<?php 
include($_SERVER['DOCUMENT_ROOT'].'/ncms/lib/php/_dc.php');
include($_SERVER['DOCUMENT_ROOT'].'/ncms/lib/php/_ncms_fns.php');

$script   = $_SERVER['SCRIPT_NAME'];
error_reporting(E_ALL);
include($_SERVER['DOCUMENT_ROOT'].'/ncms/default/header.php');
if($_GET["p"] == 'ncms' || !isset($_GET["p"])) {
    include($_SERVER['DOCUMENT_ROOT'].'/ncms/pages/home.php');
} else if(file_exists($_SERVER['DOCUMENT_ROOT'].'/ncms/pages/'.$_GET["p"].'.php')) {
    include($_SERVER['DOCUMENT_ROOT'].'/ncms/pages/'.$_GET["p"].'.php');    
} else {
    include($_SERVER['DOCUMENT_ROOT'].'/ncms/default/404.php'); 
}
include($_SERVER['DOCUMENT_ROOT'].'/ncms/default/footer.php');
?> 
```

谢谢 - 死灵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T05:45:58.637

那是因为你有并且当变量不存在`error_reporting(E_ALL);`时它会显示一个通知，这将导致标题已经发送通知。`$_GET`

用。。。来代替：

```
if(!isset($_GET["p"])) {
    include($_SERVER['DOCUMENT_ROOT'].'/ncms/pages/home.php');
} else if(file_exists($_SERVER['DOCUMENT_ROOT'].'/ncms/pages/'.$_GET["p"].'.php')) {
    include($_SERVER['DOCUMENT_ROOT'].'/ncms/pages/'.$_GET["p"].'.php');    
} else {
    include($_SERVER['DOCUMENT_ROOT'].'/ncms/default/404.php'); 
} 
```

如果`$_GET['p']`不存在，您会收到未定义的索引通知。

或者您可以更改：

```
$_GET["p"] = isset($_GET["p"]) ? $_GET["p"] : '';
if($_GET["p"] == 'ncms' || $_GET["p"] == '') { 
```

并在代码执行后添加标头，标头之前不应存在输出。

我看到您的问题仍然存在于第 85 行的 common.php 中。因为它输出了一些东西。验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:45:50.853

当您尝试在发送标头之前发送一些数据时会发生这种情况......因为您已经将它们与数据一起发送了。重定向必须位于页面上的任何其他内容之前。这包括您的大标题文本和所有错误。这还包括从服务器发送到浏览器的任何 HTML（可见或不可见）。每当服务器向浏览器发送任何内容时，它都会发送标头并且您无法再次发送它们。

因此，将重定向的代码移动到所有“标题”文本内容之上并修复其他错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T05:46:09.277

您应该`session_start`在输出任何内容之前调用。或者您的代码之前可能有一些空白`<?php`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T07:54:35.687

如果在 header.php 的开头似乎没有尾随空格，则可能是 BOM 问题。如果您的编辑器配置为将文件保存为“utf-8 with bom”或“utf-16 with bom”，则这些“字节顺序掩码”被视为 php 的输出。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-29T05:44:07.860

删除`<?php`statemnet 之前的空格，然后重试。

`<?php`如果语句前有空格，有时它会给出错误消息。

# php - 使用带有会话数据的where子句的php登录表单

> ID：12650256
> 
> 赞同：0
> 
> 时间：2012-09-29T05:40:31.293
> 
> 标签：php, html, forms, phpmyadmin

我创建了一个有效的登录表单，因此下一步是返回与已登录用户相关的数据，而不是整个表。我正在使用 php 会话将用户名从一个文件解析到另一个文件。我可以毫无问题地回显该值，但是当我尝试在以下语句中使用它时，会引发意外的 T_STRING 错误。如何正确解析变量。

```
$query = 'SELECT * FROM table WHERE table.username = $_SESSION['user']'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:22:56.530

您可以尝试在变量周围使用双引号和括号

```
$query = "SELECT * FROM table WHERE table.username = '{$_SESSION['user']}'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T05:43:24.130

尝试这个...

```
$query = 'SELECT * FROM table WHERE table.username = "' . $_SESSION['user'] . '"'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T05:44:00.947

尝试

```
$query = "SELECT * FROM table WHERE table.username = '$_SESSION['user']'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T05:43:19.523

您应该在查询字符串周围使用双引号。

```
$query = "SELECT * FROM table WHERE table.username = $_SESSION['user']"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T20:34:52.190

您可以将其分配给一个变量。

$user = $_SESSION['user'];

$query = "SELECT * FROM table WHERE table.username = $user";

# c# - 如何在 C# 中控制另一个应用程序？

> ID：12650257
> 
> 赞同：0
> 
> 时间：2012-09-29T05:40:50.337
> 
> 标签：c#, .net-4.0

我需要一个 C# 应用程序来单击其中一个按钮，例如图像中的应用程序，然后搜索另一个按钮。一旦找到该按钮，它也必须单击它。我需要控制的应用程序的图像：http: [//i.imgur.com/iZ1N6.jpg](http://i.imgur.com/iZ1N6.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:00:12.697

也许 [UI 自动化](http://msdn.microsoft.com/en-us/library/ms747327.aspx)是您所需要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:29:10.127

我建议以下操作顺序：

1.  手动检测相对于窗口左上角的矩形。
2.  使用 WinAPI 函数捕捉您的应用程序窗口，检测相对于屏幕原点的窗口左上角，并使用 MouseKeyboardLibrary、另一个类似库或仅使用 WinAPI 函数模拟鼠标或键盘按钮单击检测到的[矩形](http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library)。

![手动检测的矩形](../Images/9c1ea34e3bb4d031c531095ae12db5b9.png)

# windows - 使用 paste() 在 R 中构造 windows 路径

> ID：12650260
> 
> 赞同：12
> 
> 时间：2012-09-29T05:41:16.690
> 
> 标签：windows, r

我正在尝试采用两个字符向量：

```
directory <- "specdata"
id <- 1 
```

并从他们将“指向”的文件中读取数据：即：

```
data <- read.table(paste(directory,"\\",id,".csv", sep="") 
```

问题出在粘贴和“\”的结果中。我试图让它返回，`"specdata\1.csv"`但是它返回`"specdata\\1.csv"`的结果是不一样的。

无济于事，我也试过：

*   使用单斜杠`"\"`
*   使用单引号，例如`'\\'`
*   使用单引号，例如`'\'`
*   更改 sep =`'\'`
*   更改 sep =`'\\'`
*   更改 sep =`"\"`
*   更改 sep =`"\\"`
*   首先使用 c() 函数

代码：

```
fileNameAndPath <- c(directory,"\",id,".csv")
data <- read.table(fileNameAndPath) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-29T05:55:39.310

您应该`file.path`改用（它独立于您的平台）：

```
file.path(directory, paste(id, ".csv", sep="")) 
```

# git - Git说本地分支在远程分支之后，但事实并非如此

> ID：12650261
> 
> 赞同：86
> 
> 时间：2012-09-29T05:41:29.857
> 
> 标签：git, git-push

设想：

1.  我新建了一个分支

2.  破解它

3.  提交它

4.  推它

5.  破解它一些

6.  再次提交

7.  尝试再次推动

吉特回应：

> 更新被拒绝，因为您当前分支的尖端位于其远程分支的后面。等等

我是唯一一个在这个分支上进行黑客攻击的人——没有其他人接触过它。远程分支实际上*在*本地分支之后。我根本不应该拉。

（如果我拉动，Git 会报告两者之间的冲突，并迫使我将分支合并到自身中）

为什么（可能）会发生这种情况？我该如何诊断/修复它？

需要明确的是，我没有在任何地方分支，也*没有其他人*正在研究它：

```
Remote: Commit A -------- Commit B  

Local:  Commit A -------- Commit B -------- Commit C 
```

C 是 B 的直线延续，不涉及分支。但是git认为C是A的一个分支：

```
Remote: Commit A -------- Commit B  

                  ------- Commit C  
                /  
Local:  Commit A -------- Commit B 
```

它不是; 这是B的直接延续。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-09-29T09:03:31.993

你可能做了一些历史改写？您的本地分支与服务器上的分支不同。运行此命令以更好地了解发生了什么：

```
gitk HEAD @{u} 
```

我强烈建议您尝试了解此错误的来源。要修复它，只需运行：

```
git push -f 
```

**这`-f`使其成为“强制推送”并*覆盖*服务器上的分支。当你在团队中工作时，这是非常危险的。**但是，由于您是一个人，并确保您所在的州是正确的，这应该没问题。如果不是这种情况，您可能会丢失提交历史记录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-14T10:43:32.233

解决方案非常简单，对我有用。

尝试这个 ：

```
git pull --rebase <url> 
```

然后

```
git push -u origin master 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-28T19:25:31.153

当我尝试推送开发分支（我正在使用 git flow）时，这发生在我身上。有人将更新推送到大师。为了解决它，我做了：

```
git co master
git pull 
```

哪个获取了这些更改。然后，

```
git co develop
git pull 
```

这没有做任何事情。尽管出现错误消息，我认为开发分支已经推送。现在一切都是最新的，没有错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T02:30:05.600

要诊断它，请按照[这个答案](https://stackoverflow.com/a/12651399/1422630)。

但是要修复它，知道您是唯一更改它的人，请执行以下操作：
1 - 备份您的项目（我只做了 git，./src 文件夹中的文件）
2 - `git pull`
3 - 恢复您对许多“混乱”文件的备份（带合并指标）

我试过`git pull -s recursive -X ours`了，但没有按照我想要的方式工作，这可能是一个选择，但请先备份！！！

确保没有差异/更改（在 git gui 上）。这是我的情况，根本没有什么要合并的，但是github一直说我应该合并......

# ios - 音频队列：AudioQueueStart 返回 -50

> ID：12650263
> 
> 赞同：4
> 
> 时间：2012-09-29T05:41:41.907
> 
> 标签：ios, ipad, core-audio, audioqueue

我正在尝试在 GLES 应用程序（Unity3d）中编写麦克风功率计模块。它在 UIKit 应用程序中运行良好。但是当我集成到我的unity3d项目中时，AudioQueue无法启动属性。调用AudioQueueStart的结果代码总是-50，但是-50是什么意思呢？我在 iOS 开发人员库中找不到参考。

我已经搜索过这个问题，并且知道有人在 cocos2d 应用程序中遇到了同样的问题。也许这有一些相关性。

这是我的启动音频队列代码：

```
UInt32 ioDataSize = sizeof(sampleRate);
AudioSessionGetProperty(kAudioSessionProperty_CurrentHardwareSampleRate, &ioDataSize, &sampleRate); //returns noErr
format.mSampleRate = sampleRate;
format.mFormatID = kAudioFormatLinearPCM;
format.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
format.mFramesPerPacket = format.mChannelsPerFrame = 1;
format.mBitsPerChannel = 16;
format.mBytesPerPacket = format.mBytesPerFrame = 2;

AudioQueueNewInput(&format, listeningCallback, self, NULL, NULL, 0, &queue); //returns noErr

AudioQueueBufferRef buffers[3];
for (NSInteger i = 0; i < 3; ++i) { 
    AudioQueueAllocateBuffer(queue, 735, &buffers[i]); //returns noErr
    AudioQueueEnqueueBuffer(queue, buffers[i], 0, NULL); //returns noErr
}

levels = (AudioQueueLevelMeterState *)calloc(sizeof(AudioQueueLevelMeterState), format.mChannelsPerFrame);
UInt32 trueValue = true;
AudioQueueSetProperty(queue, kAudioQueueProperty_EnableLevelMetering, &trueValue, sizeof(UInt32)); //returns noErr

AudioQueueStart(queue, NULL); //returns -50 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-01T07:41:40.010

以下对我有用：

添加这个：

```
AVAudioSession * session = [AVAudioSession sharedInstance];

    if (!session) printf("ERROR INITIALIZING AUDIO SESSION! \n");
    else{

        [session setCategory:AVAudioSessionCategoryPlayAndRecord error:&nsError];

        if (nsError) printf("couldn't set audio category!");

        [session setActive:YES error:&nsError];
        if (nsError) printf("AudioSession setActive = YES failed");
    } 
```

前`AudioQueueStart(myQueue, NULL);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:27:05.577

您是否检查过 AudioSession 是否处于 AVAudioSessionCategoryRecord 或 AVAudioSessionCategoryPlayAndRecord 模式？

[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1)

# mysql - MySQL：如何更改具有外键约束的字段？

> ID：12650265
> 
> 赞同：2
> 
> 时间：2012-09-29T05:41:59.467
> 
> 标签：mysql, foreign-keys, foreign-key-relationship

我有两个由外键约束链接的表。我想更改一个 ID 字段，但由于外键约束，以下代码失败：

```
UPDATE A SET id = 1479 WHERE id = 2103;
UPDATE B SET Aid = 1479 WHERE Aid = 2103; 
```

我知道我可以设置`ON CASCADE`为自动执行此操作，但是如何根据具体情况进行设置呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T05:46:30.713

通过[禁用外键检查](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)并在事务中运行所有内容。

```
START TRANSACTION;
SET FOREIGN_KEY_CHECKS = 0;
UPDATE A SET id = 1479 WHERE id = 2103;
UPDATE B SET Aid = 1479 WHERE Aid = 2103;
SET FOREIGN_KEY_CHECKS = 1;
COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T05:49:18.253

采用

```
SET FOREIGN_KEY_CHECKS=0; 
```

在您的更新查询之前。

# java - 编写代码来记录用户事件并使用 Java 回放

> ID：12650268
> 
> 赞同：4
> 
> 时间：2012-09-29T05:42:40.933
> 
> 标签：java, automation

我想开发一个应用程序来监控鼠标事件，如点击、移动和键盘输入。该应用程序应在后台运行。通过使用一些特殊的组合键，应用程序将开始记录事件，然后我们必须播放相同的事件。

我是自动化的新手。是否可以使应用程序作为服务运行？

我们可以在 Java 中做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:24:37.780

绝对有可能拥有一个监视事件的应用程序。我使用了一个名为 keylogger 的应用程序，它可以记录不同的键盘和其他事件，并最终将日志保存为 File。您可以做的是阅读日志并过滤掉您需要的信息。另请注意，这些键盘记录程序可能会被您的防病毒软件检测为病毒，您需要小心处理。但与其他病毒不同，它不会妨碍您的文件，因为我已经成功使用了它。

问候，阿南德

# javascript - 如何在 Windows 7 上使用 NodeJS / PhantomJS / CasperJS

> ID：12650274
> 
> 赞同：1
> 
> 时间：2012-09-29T05:44:15.557
> 
> 标签：javascript, jquery, node.js, phantomjs, casperjs

我需要抓取具有 AJAX 和 SESSIONS 的网站表单（即时）。我做了很多研究，发现了几种可能的解决方案，其中之一是 Python::Mechanize。我不知道python和cURL `PHP`（据我了解）无法处理AJAX或提交表单。

我发现我认为可能的堆栈可以引导我走向优雅:)。问题是我根本不知道如何使用这些包。

1.  我下载并安装了 NODEjs，我可以从 cmd 调用它。（伟大的）

2.  我下载并安装了 PhantomJS（不知道如何设置它`PATH`以便它是动态的，所以我必须手动`cd`在 CMD 中`DIR`加载它）如何在 Windows 7 中设置它？不知道在哪里指向路径。

3.  下载的 CasperJS - 放入 DIR

因此，在 phantomjs 上，我能够运行一个在 CMD 提示符下回显“hello world”的测试文件。现在我在这里不知道如何进行。- 最终我需要它从我的网络服务器（即时）运行 - 所以它需要在我的网页中实现。到目前为止，我只想从 CMD 运行它并让它进入页面，提交表单，抓取结果并将其写入文件。

有人可以解释一下我如何做到这一点的工作流程吗？

CasperJS -> 显示了这个表单示例。我想用我的变量来实现，运行脚本并保存结果。

```
casper.start('http://some.tld/contact.form', function() {
    this.fill('form#contact-form', {
        'subject':    'I am watching you',
        'content':    'So be careful.',
        'civility':   'Mr',
        'name':       'Chuck Norris',
        'email':      'chuck@norris.com',
        'cc':         true,
        'attachment': '/Users/chuck/roundhousekick.doc'
    }, true);
});

casper.then(function() {
    this.evaluateOrDie(function() {
        return /message sent/.test(document.body.innerText);
    }, 'sending message failed');
});

casper.run(function() {
    this.echo('message sent').exit();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T04:49:05.660

安装 PhantomJS 后，请执行以下操作：

1.  在桌面上，右键单击我的电脑，然后单击属性。
2.  单击左栏中的高级系统设置链接。
3.  在系统属性窗口中单击环境变量按钮。
4.  找到 PATH 变量并单击编辑
5.  在变量值的末尾添加 PhantomJS 路径（不要忘记 ; 在它之前）

现在你可以在你的 CMD 中使用 phantomjs。例如：phantomjs c:\mywebsite\with\ajax\dopescript.js

完成这些步骤后，下载 CasperJS 并将其放在 PhantomJS 文件夹中

`Ex.: c:\phantomjs\casperjs`

为 CasperJS 的 PATH 变量执行前面的步骤（最后加上 \bin）

`Ex.: c:\phantomjs\casperjs\bin`

从 CMD 尝试 casperjs。

如果它不起作用，请转到 casperjs 文件夹中的 batchbin 目录和午餐 casperjs.bat

现在尝试从这个文件夹调用 CasperJs。（为我工作）

所以现在你应该有 PhantomJS + CasperJS。

关于保存结果：

将其放在`var fs = require('fs');`脚本的开头并调用需要保存的数据

`fs.write('result.html', myData);`在哪里。`myData`

以下是有关 FS 的更多信息： [PhantomJS 文件系统](http://phantomjs.org/api/fs/)

# iphone - 使用 Restkit 的 XML 解析器

> ID：12650275
> 
> 赞同：0
> 
> 时间：2012-09-29T05:44:17.597
> 
> 标签：iphone, ios, xcode4

```
- (void)viewDidLoad{

    [super viewDidLoad];
    RKClient *client = [[RKClient alloc] initWithBaseURLString:wwww.example.org];
    [RKClient setSharedClient:client];
    [[RKClient sharedClient] get:\components.xml delegate:self];
}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response{  
    NSLog(@"response %@",response.bodyAsString);
} 
```

我正在使用来自 restkit 的 Xml 解析。但响应显示为空。任何人都知道使用 restkit 的 xml 解析器，帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:15:14.140

这是您可以参考的链接

[http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/](http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/)
[https://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)

# opengl - 概念opengl：复杂图形是由三角形构成的吗？

> ID：12650276
> 
> 赞同：0
> 
> 时间：2012-09-29T05:44:38.030
> 
> 标签：opengl

我想制作一个具有漂亮图形的相当简单的游戏。

我已经阅读了几个创建 opengl 示例的教程。我了解核心对象是点和三角形。我也了解映射纹理和应用照明。我一定错过了一些概念性的东西。

让我们举个例子——一辆简单的汽车。我需要在 3D 中从各个角度查看汽车。这意味着我必须在数学上用 3D 构建汽车？我真的必须创建和存储数千个代表整个表面的三角形吗？然后，我将为这些三角形添加颜色/纹理？

如果我想通过公园动画导航 - 树木、路径、其他人......即使我只是为每种独特类型的对象建模一次，那可能需要数年时间？！

商业游戏开发商使用什么方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:53:18.197

有几种方法可以解决这个问题。第一种方法是自己设计所有对象。这是专业的游戏设计公司所做的，并且有整个部门都致力于此。您可以使用[Blender](http://www.blender.org/)（免费！）、[Maya](http://usa.autodesk.com/maya/)、[3DS Max](http://usa.autodesk.com/3ds-max/)、[Modo](http://www.luxology.com/modo/)或任意数量的 3D 建模程序来执行此操作。

第二种方法是对所有这些对象进行程序生成（老实说这更有趣）。程序生成是指您的程序动态生成所需的每个对象。这使您的磁盘空间使用量最小化，并完全消除了加载时间。通常，程序生成算法将在单独的线程中运行，以免损害帧速率。

实际上，您可能希望两者都做一点：程序生成植物和环境，但对角色和汽车进行建模。

[这](http://pcg.wikidot.com/)是程序生成算法的一个很好的资源。

干杯，内德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:38:04.220

> 这意味着我必须在数学上用 3D 构建汽车？我真的必须创建和存储数千个代表整个表面的三角形吗？然后，我将为这些三角形添加颜色/纹理？

确实如此。然而，没有人通过在文件中输入数字来对模型进行硬编码。人们使用 3D 建模器，如 3DS、SoftImage、Blender、Milkshape、Maya 等。这些建模器通常都根据三角形网格化原理进行操作，即它们将模型表示为三角形的网格。

> 如果我想通过公园动画导航 - 树木，路径，其他人......即使我只是为每种独特类型的对象建模一次，

动画通常仅作为单个网格的动态修改发生，或者在复合对象（如汽车）的情况下，对编排中的各个网格进行动态修改。

> 这可能需要数年？！

对于一个人：是的，确实如此。这就是为什么游戏工作室雇佣了大量的艺术家，他们在一起工作的同时，仍然需要几个月到几年的时间来完成大规模的制作游戏。

在你的普通游戏工作室中，很可能找到比程序员多 10 到 20 倍的艺术家。虽然程序员的工作很复杂，但它在整个游戏中无处不在。任何新功能或错误修复通常都会使整个游戏受益。然而，游戏中的大多数艺术作品都是在本地使用的，即仅在少数或单个地图中使用。一些艺术作品，如非玩家角色动画（步行周期、动作、攻击/防御动画等）可以重复使用，但即使是那些也倾向于为每个角色个性化以保持多样性。也可以重复使用常见的道具。但总而言之，为游戏做所有的美术是一项非常冗长乏味的任务。

# php - Jquery Validate Plugin，带有自定义错误消息的远程验证

> ID：12650279
> 
> 赞同：1
> 
> 时间：2012-09-29T05:45:01.257
> 
> 标签：php, jquery, jquery-validate

我有一个带有 SELECT 字段 (college_id) 的表单，我正在尝试对其进行验证。我正在使用 JQuery Validate Plugin 并尝试使用它的“远程”选项。

HTML：

```
<form id="registration-form" ... >
.
.
<select name="college_id" id="college_id" class="required" >
//Options generated using PHP code
</select>
.
.
</form> 
```

JAVASCRIPT：

```
$(document).ready(function(){
    //For triggering the validation onChange
    $('#college_id').change(function(){
        $("#college_id").removeData("previousValue");
        $("#registration-form").validate().element("#college_id");
    });

    $('#registration-form').validate({
        rules:{
            college_id:{
                remote: {
                    type: 'POST',
                    url: urls.base_url+'Representative/checkCollegeAJAX/',
                    dataType:"json",
                    data:{
                        college_id:function(){
                            return $('#college_id').val();
                        }
                    },
                    dataFilter: function(data) {
                        data=JSON.parse(data);
                        console.log(data.isError);
                        if(!data.isError) { //If no error
                            return true;
                        } else {
                            console.log("Error Message: "+data.errorMessage);
                            return "\"" + data.errorMessage + "\"";
                        }

                    }
                }
            }
        }
    });

}); 
```

正如您在上面看到的，我试图在 isError==True 时显示错误消息

我的 PHP 代码返回一个 JSON 编码的对象，例如：

```
{"isError":true,"errorMessage":"Sorry!"} 
```

如果出现错误或

```
{"isError":false,"errorMessage":""} 
```

在没有错误的情况下。（从 Fire Bug 中提取）

问题是，无论响应如何，我都会在 SELECT 字段旁边看到“修复此字段”。只有在出现错误的情况下，我才需要显示我的自定义消息（data.errorMessage）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T13:29:58.577

我刚才遇到了这个问题，解决方案是以 JSON 格式返回你想要显示为错误的字符串。

因此，如果一切正常，只需返回 true：

```
echo json_encode(true); 
```

在你的 php/whatever ajax 调用中。

相反，如果您必须显示错误，请将字符串放在答案中：

```
echo json_encode("hey, we got something wrong here.."); 
```

如果您需要本地化错误消息并且您无法通过控制器执行此操作，只需在调用远程方法时传递它：

```
data: {
    ajax: true,
    id: function() {
        return $( "#cid" ).val();
    },
    errormsg: "ERROR MSG WITH LOCALE"
}, 
```

我希望这对其他人有帮助:)

# java - 解析 XML 提要

> ID：12650281
> 
> 赞同：0
> 
> 时间：2012-09-29T05:45:12.117
> 
> 标签：java, solr, lucene, xml-parsing, nutch

我想解析网站的 RSS 提要并想要获取内容（例如文章）并希望将它们放入数据库中。后来我还想根据搜索关键字对它们进行索引。谁能告诉如何进行？什么工具最适合用于此？我搜索了 Apache lucene、solr 和 apache nutch。但是我仍然不清楚如何用java等编程语言来实现它。谁能提供有关实施的更多详细信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T05:53:06.500

首先，我要通读[Java API for XML Processing](http://docs.oracle.com/javase/tutorial/jaxp/index.html)。

接下来，我将熟悉一些网络 API……

*   [自定义网络](http://docs.oracle.com/javase/tutorial/networking/index.html)，特别是[使用 URL](http://docs.oracle.com/javase/tutorial/networking/urls/index.html)
*   [Apache HTTP 组件](http://hc.apache.org/httpclient-3.x/)（nb。这可能有点进步，但我发现它很有用）

我也会熟悉[xPath](http://www.w3schools.com/xpath/default.asp)和[xPath 的工作原理](http://docs.oracle.com/javase/tutorial/jaxp/xslt/xpath.html)，这对于查找您感兴趣的部分文档很有用。

接下来，我将成为[JDBC(TM) 数据库访问](http://docs.oracle.com/javase/tutorial/jdbc/index.html)

这应该只是涵盖了基础知识。

一旦您对技术有了基本的了解，您就需要考虑设计。我将它元素分离到它自己的项目中。

将数据下载、解析、排序和插入数据库作为一个项目处理。

在另一个中处理搜索和检索。

这将突出显示重叠区域并向您显示需要提供公共库的位置。

# ruby-on-rails - 使用 Ruby Mechanize 从亚马逊订购 - 绕过 Javascript 障碍

> ID：12650287
> 
> 赞同：1
> 
> 时间：2012-09-29T05:46:14.777
> 
> 标签：ruby-on-rails, ruby, mechanize

我正在尝试使用 Mechanize 创建一个刮板，使用我的会员链接从亚马逊下订单。目标是允许用户在我的网站上下订单，其中包含使用亚马逊产品 API 获取的产品，并允许他们从我的网站订购，而不会被重定向到亚马逊。不幸的是，亚马逊没有 API 来完成订购部分，所以我构建了一个爬虫，离我很近，但需要帮助才能通过最后一页！

我停留的页面是允许您选择信用卡然后只需单击继续完成订单的页面。我认为亚马逊使用某种 javascript 来动态加载某些元素。当我使用浏览器访问此页面时，我看到我添加的信用卡带有预先选择的单选按钮，我需要做的就是点击继续结帐。如果我使用 mechanize 到达那里，然后将 的内容复制`puts agent.page.body`到编辑器中并预览它，我注意到除了包含信用卡的元素以及预先选择了收音机的元素之外，一切都在那里。

这是完整的代码。您可以将其复制/粘贴到 ruby​​ 控制台中，然后将其复制到最后一页。如果在 Mechanize 方面更有经验的人可以帮助我通过此页面，我将非常感激！

（您需要填写自己的亚马逊登录凭据才能使用此功能。）

```
agent = Mechanize.new
agent.cookie_jar.clear! #clear cookies

#Page 1 (Confirm add to cart)
page1 = agent.get("http://www.amazon.com/gp/aws/cart/add.html?ASIN.1=B0002YIQEQ&Quantity.1=1")
form = page1.forms[1]
button = form.buttons.first
page2 = agent.submit(form,button)

    #Page 2 (view/update cart)
    agent.page.form('cartViewForm').checkboxes.first.check 
form2 = agent.page.form('cartViewForm')
form2.checkbox.check
checkoutForm = page2.form_with(:id => "gutterCartViewForm")
checkoutBtn = checkoutForm.buttons.last
page3 = agent.submit(checkoutForm, checkoutBtn)

    #page3 (Sign in)
form3 = page3.form('signIn')
form3.email = 'EMAIL HERE'
form3.password = 'PASSWORD HERE'
page4 = agent.submit(form3, form3.buttons.last)

    #page4 (Where do you want your items shipped?)
form4 = agent.page.form_with(:action => "/gp/buy/shipaddressselect/handlers/continue.html/ref=ox_shipaddress_add_new_addr")
form4.enterAddressFullName = 'NAME'
form4.enterAddressAddressLine1 = 'ADDRESS'
form4.enterAddressAddressLine2 = ''
form4.enterAddressCity = 'CITY'
form4.enterAddressStateOrRegion = 'ST' 
form4.enterAddressPostalCode = 'ZIP'
form4.enterAddressPhoneNumber = 'PHONE'
page5 = agent.submit(form4, form4.buttons.last)

    #page5 (Choose your shipping options)
    agent.page.form_with(:id => "shippingOptionFormId").checkboxes.last.check
    agent.page.form_with(:id => "shippingOptionFormId").submit

    #page 6 (gift wrapping form)
   agent.page.form_with(:id => "GiftPageContiueForm").radiobuttons_with(:class => "itemGiftWrapSelect").each do |t|
    t.check
  end
  agent.page.form_with(:id => "GiftPageContiueForm").submit

 #page7 (This is where I am stuck - continue-top is indeed the right button.
  agent.page.forms.each do |t|
    if t.button_with(:id => "continue-top")
      form = t
      button = t.button_with(:id => "continue-top")
    end
  end
  agent.submit(form,button) 
```

# android - 在哪里/如何获得适用于三星 Galaxy 播放器 (YP-G1) 的 Android SDK OEM USB 驱动程序

> ID：12650288
> 
> 赞同：8
> 
> 时间：2012-09-29T05:46:19.357
> 
> 标签：android, mobile, driver, galaxy

我一直在做一些 Android 开发，但是虚拟测试环境对我来说太慢了，而且经常根本不起作用。我有一个三星 Galaxy Player（型号 YP-G1），我在 Google 和[三星的驱动程序网站上](http://www.samsung.com/us/support/downloads)搜索了我的设备，但我找不到任何可以让我在 Galaxy Player 上测试我在 Eclipse 中开发的应用程序的驱动程序. 三星的网站只有一个驱动程序，这显然有助于将音乐与计算机同步。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-27T23:00:40.323

尽管这个问题有点过时，但我在寻找三星 Galaxy S4 的驱动程序时偶然发现了它。

三星开发驱动程序可以在这里下载（注意网址中的拼写错误，但在撰写本文时这是实际链接！）：http:
[//developer.samsung.com/android/tools-sdks/Samsung-Andorid-用于 Windows 的 USB 驱动程序](http://developer.samsung.com/android/tools-sdks/Samsung-Andorid-USB-Driver-for-Windows)

# assembly - 如何在 AT&T 汇编中正确定位变量？

> ID：12650291
> 
> 赞同：5
> 
> 时间：2012-09-29T05:46:35.403
> 
> 标签：assembly, ld, bootstrapping, att

我正在练习使用程序集（在 AT&T 语法和 gnu/gas 中）编写引导程序。小程序组装链接，然后复制到虚拟磁盘的第一个扇区。BIOS 会将其加载到`0000:7c00`中，问题就来了。将在运行期间`call hello`从 转换`call 0010`为`call 7c10`。但`movw $message, %as`不会搬迁。`ax`仍然，`0026`不是`7c26`。结果是我无法`Hello World`在屏幕上显示。`0000:0026`相反，屏幕上会显示一些随机数据。

如何在引导期间使其正确？我应该使用某些指令更改 asm 源代码吗？或者我应该更改我的链接脚本？

谢谢！

```
.text
.global     _start
.code16

_start:
movw    %cs, %ax
movw    %ax, %ds
movw    %ax, %es
call    hello
jmp     .

.org    0x10

hello:
movw    $message, %ax
movw    %ax, %bp
movw    $13, %cx
movw    $0x1301, %ax
movw    $0x000c, %bx
movb    $0, %dl
int     $0x10
ret

message:    
.ascii  "Hello, World!"

.org    0x01fe
.byte   0x55
.byte   0xaa 
```

我使用以下汇编和链接脚本

```
as -o boot.o boot.s  
    //generate object code

ld -Ttext 0x0 -e _start -s -o boot.out boot.o  
    //relocate .text to 0x0
    //entry is _start

objcopy -O binary -j .text boot.out boot
    //copy .text section to boot

vboxmanage convertfromraw boot boot.vdi --format VDI
    //create vdi for virtual box 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:13:25.247

我看到主要问题在于您编译代码的方式。

让您的代码工作的正确步骤应该是：

```
as boot.s -c -o boot.o
ld --oformat binary --Ttext 0x7C00 -o boot.bin boot.o 
```

请注意，正如其他人所说，我将`--Ttext 0x7C00`参数传递给`ld`，以强制它将您的代码重新定位到该地址。

作为附加建议，请尝试像这样构造您的代码：

```
.text
.global     _start
.code16

_start:
jmp stage1_start

...

stage1_start:

<your bootloader here> 
```

请注意，这与 BIOS 代码如何查看硬盘驱动器是一致的，因为在 2 个字节（第一个跳转指令的长度）之后，您应该放置磁盘描述表。

`as`此外，您可以使用类似这样的语法重构您的最后一条指令：

```
. = _start + 0x0200 - 2
.short 0x0AA55 
```

其中`.`变量是位置计数器。查看[此页面](http://sourceware.org/binutils/docs/ld/Location-Counter.html)以获取有关此计数器如何工作的更多信息（在`ld`, not的上下文中`as`）。

希望这可以帮助！

# android - 致命：[Errno 13] repo init android source 4.1 时权限被拒绝

> ID：12650292
> 
> 赞同：1
> 
> 时间：2012-09-29T05:47:08.473
> 
> 标签：android, init, permission-denied, repository

我正在尝试下载 android 源 Jellybean 4.1.1_r4。我得到的许可被拒绝如下：

```
Get https://gerrit.googlesource.com/git-repo
remote: Counting objects: 1780, done
remote: Finding sources: 100% (1780/1780)
remote: Getting sizes: 100% (247/247)
remote: Compressing objects: 100% (245/245)
remote: Total 1780 (delta 1079), reused 1656 (delta 1046)
Receiving objects: 100% (1780/1780), 463.03 KiB | 240 KiB/s, done.
Resolving deltas: 100% (1168/1168), done.
From https://gerrit.googlesource.com/git-repo
 * [new branch]      maint      -> origin/maint
 * [new branch]      master     -> origin/master
 * [new branch]      stable     -> origin/stable
 * [new tag]         v1.0       -> v1.0
 * [new tag]         v1.0.1     -> v1.0.1
 * [new tag]         v1.0.2     -> v1.0.2
 * [new tag]         v1.0.3     -> v1.0.3
 * [new tag]         v1.0.4     -> v1.0.4
 * [new tag]         v1.0.5     -> v1.0.5
 * [new tag]         v1.0.6     -> v1.0.6
 * [new tag]         v1.0.7     -> v1.0.7
 * [new tag]         v1.0.8     -> v1.0.8
 * [new tag]         v1.0.9     -> v1.0.9
 * [new tag]         v1.1       -> v1.1
 * [new tag]         v1.10.0    -> v1.10.0
 * [new tag]         v1.10.1    -> v1.10.1
 * [new tag]         v1.10.2    -> v1.10.2
 * [new tag]         v1.10.3    -> v1.10.3
 * [new tag]         v1.10.4    -> v1.10.4
 * [new tag]         v1.2       -> v1.2
 * [new tag]         v1.3       -> v1.3
 * [new tag]         v1.3.1     -> v1.3.1
 * [new tag]         v1.3.2     -> v1.3.2
 * [new tag]         v1.4       -> v1.4
 * [new tag]         v1.4.1     -> v1.4.1
 * [new tag]         v1.4.2     -> v1.4.2
 * [new tag]         v1.4.3     -> v1.4.3
 * [new tag]         v1.4.4     -> v1.4.4
 * [new tag]         v1.5       -> v1.5
 * [new tag]         v1.5.1     -> v1.5.1
 * [new tag]         v1.6       -> v1.6
 * [new tag]         v1.6.1     -> v1.6.1
 * [new tag]         v1.6.10    -> v1.6.10
 * [new tag]         v1.6.10.1  -> v1.6.10.1
 * [new tag]         v1.6.10.2  -> v1.6.10.2
 * [new tag]         v1.6.2     -> v1.6.2
 * [new tag]         v1.6.3     -> v1.6.3
 * [new tag]         v1.6.4     -> v1.6.4
 * [new tag]         v1.6.5     -> v1.6.5
 * [new tag]         v1.6.6     -> v1.6.6
 * [new tag]         v1.6.7     -> v1.6.7
 * [new tag]         v1.6.7.1   -> v1.6.7.1
 * [new tag]         v1.6.7.2   -> v1.6.7.2
 * [new tag]         v1.6.7.3   -> v1.6.7.3
 * [new tag]         v1.6.7.4   -> v1.6.7.4
 * [new tag]         v1.6.7.5   -> v1.6.7.5
 * [new tag]         v1.6.8     -> v1.6.8
 * [new tag]         v1.6.8.1   -> v1.6.8.1
 * [new tag]         v1.6.8.10  -> v1.6.8.10
 * [new tag]         v1.6.8.11  -> v1.6.8.11
 * [new tag]         v1.6.8.2   -> v1.6.8.2
 * [new tag]         v1.6.8.3   -> v1.6.8.3
 * [new tag]         v1.6.8.4   -> v1.6.8.4
 * [new tag]         v1.6.8.5   -> v1.6.8.5
 * [new tag]         v1.6.8.6   -> v1.6.8.6
 * [new tag]         v1.6.8.7   -> v1.6.8.7
 * [new tag]         v1.6.8.8   -> v1.6.8.8
 * [new tag]         v1.6.8.9   -> v1.6.8.9
 * [new tag]         v1.6.9     -> v1.6.9
 * [new tag]         v1.6.9.1   -> v1.6.9.1
 * [new tag]         v1.6.9.2   -> v1.6.9.2
 * [new tag]         v1.6.9.3   -> v1.6.9.3
 * [new tag]         v1.6.9.4   -> v1.6.9.4
 * [new tag]         v1.6.9.5   -> v1.6.9.5
 * [new tag]         v1.6.9.6   -> v1.6.9.6
 * [new tag]         v1.6.9.7   -> v1.6.9.7
 * [new tag]         v1.6.9.8   -> v1.6.9.8
 * [new tag]         v1.7       -> v1.7
 * [new tag]         v1.7.1     -> v1.7.1
 * [new tag]         v1.7.2     -> v1.7.2
 * [new tag]         v1.7.3     -> v1.7.3
 * [new tag]         v1.7.3.1   -> v1.7.3.1
 * [new tag]         v1.7.4     -> v1.7.4
 * [new tag]         v1.7.4.1   -> v1.7.4.1
 * [new tag]         v1.7.4.2   -> v1.7.4.2
 * [new tag]         v1.7.4.3   -> v1.7.4.3
 * [new tag]         v1.7.5     -> v1.7.5
 * [new tag]         v1.7.6     -> v1.7.6
 * [new tag]         v1.7.6.1   -> v1.7.6.1
 * [new tag]         v1.7.7     -> v1.7.7
 * [new tag]         v1.7.7.1   -> v1.7.7.1
 * [new tag]         v1.7.7.2   -> v1.7.7.2
 * [new tag]         v1.7.7.3   -> v1.7.7.3
 * [new tag]         v1.7.7.4   -> v1.7.7.4
 * [new tag]         v1.7.7.5   -> v1.7.7.5
 * [new tag]         v1.7.7.6   -> v1.7.7.6
 * [new tag]         v1.7.8     -> v1.7.8
 * [new tag]         v1.7.8.1   -> v1.7.8.1
 * [new tag]         v1.7.8.2   -> v1.7.8.2
 * [new tag]         v1.8.0     -> v1.8.0
 * [new tag]         v1.8.1     -> v1.8.1
 * [new tag]         v1.8.2     -> v1.8.2
 * [new tag]         v1.9.0     -> v1.9.0
 * [new tag]         v1.9.1     -> v1.9.1
 * [new tag]         v1.9.2     -> v1.9.2
 * [new tag]         v1.9.3     -> v1.9.3
 * [new tag]         v1.9.4     -> v1.9.4
 * [new tag]         v1.9.5     -> v1.9.5
 * [new tag]         v1.9.6     -> v1.9.6
fatal: unable to start /media/Stuff/Softwares/Android/jellybean4.1-sources/.repo/repo/main.py
fatal: [Errno 13] Permission denied 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T16:31:08.697

有两种可能性：-

1.  /media/Stuff/Softwares 不是 ext2/3/4 格式（可能是 NTFS、FAT32 等）
2.  /media/Stuff/Softwares 有 noexec 挂载选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T21:18:50.007

您需要从 CygWin 而不是从 Windows Git 下载源代码。为了能够做到这一点，请确保在 Cygwin 的 bin 目录中包含 curl，并在 Cygwin 包中安装 python。然后在 cygwin 终端中重复您之前使用过的步骤。

# ftp - 如何强制我的 Java 应用程序使用 Java JRE 1.6 而不是 1.7？

> ID：12650293
> 
> 赞同：0
> 
> 时间：2012-09-29T05:47:15.370
> 
> 标签：ftp, java

> **可能重复：**
> [如何在启动前检查 JRE 版本？](https://stackoverflow.com/questions/222187/how-to-check-jre-version-prior-to-launch)

许多人想知道如何强制他们的程序使用最低版本的 jre，但我希望我的程序只使用 java 6 而不是 java 7（也就是 jre 1.6 的最大值）运行。原因是我的程序需要使用 FTP，而 java 7 有可怕的 FTP 错误。

如果用户安装了 1.7，有没有办法让我的应用程序使用 1.6 轻松运行？

我看过的一些选项是：launch4j

我不太确定它会解决我的问题，除了可能将整个 jre 与我的程序捆绑在一起。我认为这不是最理想的解决方案。

有人可以帮助我指导我在理论上如何解决/处理这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T05:53:47.263

正如这个[有点相关的问题/答案](https://stackoverflow.com/questions/222187/how-to-check-jre-version-prior-to-launch)中所建议的，使用`System.getProperty("java.version")`来查看正在使用哪个版本的 Java 来运行应用程序。这样，您可以让应用程序提示用户他应该使用较旧的 JRE。

至于在没有基于路径的 JRE 检测的情况下运行应用程序，主要问题是您无法确定在用户系统的哪个位置安装了正确的 JRE。在 Windows 上有两种默认的可能性，在 *nix 上它可能在任何地方。

如果我是你，我会尝试找到一个自定义 FTP 库来解决你提到的错误，以获得新版本 Java 的最大安全性和优化优势，而不是强迫用户停留在过去。

# c# - c# Timer 停止混淆

> ID：12650296
> 
> 赞同：0
> 
> 时间：2012-09-29T05:47:26.547
> 
> 标签：c#, timer

我想通过单击按钮时更改文本颜色来将文本框文本设置为“闪烁”。

我可以让文本按我想要的方式闪烁，但我希望它在闪烁几下后停止。在计时器触发几次后，我无法弄清楚如何让它停止。

这是我的代码：

```
public Form1()
{
    InitializeComponent();

    Timer timer = new Timer();
    timer.Interval = 500;
    timer.Enabled = false;

    timer.Start();
    timer.Tick += new EventHandler(timer_Tick);

    if (timerint == 5)
    timer.Stop();
}

private void timer_Tick(object sender, EventArgs e)
{
    timerint += 1;

    if (textBoxInvFooter.ForeColor == SystemColors.GrayText)
        textBoxInvFooter.ForeColor = SystemColors.Highlight;
    else
        textBoxInvFooter.ForeColor = SystemColors.GrayText;
} 
```

我知道我的问题在于我如何使用“timerint”，但我不确定把它放在哪里，或者我应该使用什么解决方案......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T05:56:30.990

您只需将计时器检查放在 Tick 处理程序中。您可以使用处理程序的参数访问该`Timer`对象。`sender`

```
private void timer_Tick(object sender, EventArgs e)
{
    // ...

    timerint += 1;
    if (timerint == 5)
    {
        ((Timer)sender).Stop();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:37:07.100

这是我用来解决您的问题的完整代码。它正确地停止计时器，分离事件处理程序，并处置计时器。它在闪烁期间禁用按钮，并且在五次闪烁完成后恢复文本框的颜色。

最好的部分是它纯粹在一个 lambda 中定义，因此不需要类级别的变量。

这里是：

```
 button1.Click += (s, e) =>
        {
            button1.Enabled = false;
            var counter = 0;
            var timer = new Timer()
            {
                Interval = 500,
                Enabled = false
            };

            EventHandler handler = null;
            handler = (s2, e2) =>
            {
                if (++counter >= 5)
                {
                    timer.Stop();
                    timer.Tick -= handler;
                    timer.Dispose();
                    textBoxInvFooter.ForeColor = SystemColors.WindowText;
                    button1.Enabled = true;
                }
                else
                {
                    textBoxInvFooter.ForeColor =
                        textBoxInvFooter.ForeColor == SystemColors.GrayText
                            ? SystemColors.Highlight 
                            : SystemColors.GrayText;
                }
            };

            timer.Tick += handler;
            timer.Start();
        }; 
```

# asp.net-mvc - 链接 Razor DropDownLists 的项目

> ID：12650297
> 
> 赞同：0
> 
> 时间：2012-09-29T05:47:29.660
> 
> 标签：asp.net-mvc, razor

我有 3 个下拉列表；当我选择#1 中的项目时，我希望#2 中的项目根据#1 的值填充。当我在#2 中选择一个项目时，#3 中的项目应根据#2 中的选择进行填充。它们都位于名为`GetItemsForLeve1`. 我已经开始使用`onchange`下拉菜单。

```
<% using (Html.BeginForm("GetItemsForLeve1", "Index"))
    { %>             
       Main Group: <%:Html.DropDownList("Level1", (SelectList)ViewBag.Level1, "Select One", new { onchange = "$this.form.submit()" })%> 
       <%:Html.DropDownList("Level2", (SelectList)ViewBag.Level2, "-", new { onchange = "$this.form.submit()" })%> 
       <%:Html.DropDownList("Level3", (SelectList)ViewBag.Level3, "-", new { onchange = "$this.form.submit()" })%> 
         <input type="submit" value="Filter" />
    <%}%> 
```

1.  是否可以在不将页面发送回服务器的情况下填充 2 级和 3 级下拉列表？

2.  我如何知道在操作中单击了哪个下拉列表`GetItemsForLevel`？我对 MVC 完全陌生，所以我很感激以简单的方式告诉我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:48:11.907

据我所知，没有真正的组件可以为您执行此操作。但是您可以使用`Ajax.BeginForm`助手来构建它。

1.  第一个 ajax 表单应该包含第一个选择列表，并回传到返回部分视图的操作
2.  1\. 中的部分视图应该返回带有第二个选择列表的第二个 ajax 表单
3.  等等

所以**主 Razor 视图**应该包含如下内容：

```
@using (Ajax.BeginForm("SecondAjaxForm", new AjaxOptions() { UpdateTargetId = "secondFormDiv" })
{
    @Html.DropDownList("selectList1", Model.FirstSelectList, new { onchange = "this.form.submit()")
}

<!-- the second AJAX form + drop-down list will get populated here
<div id="secondFormDiv"></div> 
```

和**`SecondAjaxForm`行动**：

```
public ActionResult SecondAjaxForm(string selectList1)
{
    SelectList secondSelectList;
    // populate the second select list here
    return PartialView("SecondAjaxForm", secondSelectList);
} 
```

**局部视图`SecondAjaxForm`**应该和上面的第一种形式基本相同。

```
@model SelectList
@using (Ajax.BeginForm("ThirdAjaxForm", new AjaxOptions() { UpdateTargetId = "thirdFormDiv" })
{
    @Html.DropDownList("selectList2", Model, new { onchange = "this.form.submit()")
}

<!-- the third AJAX form + drop-down list (if any) will get populated here
<div id="thirdFormDiv"></div> 
```

# node.js - NodeJS - Socket.IO 设置：提供静态内容，无需握手（Rackspace 云服务器上的 Ubuntu）

> ID：12650299
> 
> 赞同：5
> 
> 时间：2012-09-29T05:47:45.960
> 
> 标签：node.js, socket.io, rackspace-cloud

我已经用 Ubuntu node.js 和 Socket.IO 在 Rackspace 上安装了

当我尝试一个简单的服务器应用程序并尝试使用客户端请求时，我只得到了“提供静态内容”而不是握手。在调试的浏览器中，我可以看到“Hello S ...”并在服务器端：

```
# node socket-server.js 
   info  - socket.io started
   debug - served static content /socket.io.js
   debug - served static content /socket.io.js 
```

我不确定从哪里开始寻找问题（相同的脚本适用于本地开发）

为什么 node.js 只提供静态内容而不握手？

iptables 允许 8866 端口：# iptables -L

```
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED 
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:ssh 
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:www 
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:8866 
DROP       all  --  anywhere             anywhere            

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:8866 
```

这是一个简单的服务器应用程序“socket-server.js”：

```
// Require HTTP module (to start server) and Socket.IO
var http = require('http'), io = require('socket.io');

// Start the server at port 8866
var server = http.createServer(function(req, res){

        // Send HTML headers and message
        res.writeHead(200,{ 'Content-Type': 'text/html' });
        res.end('<h1>Hello Socket Lover!</h1>');
});
server.listen(8866);

// Create a Socket.IO instance, passing it our server
var socket = io.listen(server);

// Add a connect listener
socket.on('connection', function(client){

        // Create periodical which ends a message to the client every 5 seconds
        var interval = setInterval(function() {
                client.send('This is a message from the server!  ' + new Date().getTime());
        },5000);

        // Success!  Now listen to messages to be received
        client.on('message',function(event){
                console.log('Received message from client!',event);
        });
        client.on('disconnect',function(){
                clearInterval(interval);
                console.log('Server has disconnected');
        });

}); 
```

这是一个简单的客户端（SERVERDOMAIN 替换为真实域）：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://SERVERDOMAIN:8866/socket.io/socket.io.js"></script>
<script>

    // Create SocketIO instance
    var socket = io.connect('SERVERDOMAIN:8866');
    // Add a connect listener
    socket.on('connect',function() {
        log('<span style="color:green;">Client has connected to the server!</span>');
    });
    // Add a connect listener
    socket.on('message',function(data) {
        log('Received a message from the server:  ' + data);
    });
    // Add a disconnect listener
    socket.on('disconnect',function() {
        log('<span style="color:red;">The client has disconnected!</span>');
    });

    // Sends a message to the server via sockets
    function sendMessageToServer(message) {
        socket.send(message);
        log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
    }

    // Outputs to console and list
    function log(message) {
        var li = document.createElement('li');
        li.innerHTML = message;
        document.getElementById('message-list').appendChild(li);
    }

</script>
</head>
<body>

<p>Messages will appear below (and in the console).</p><br />
<ul id="message-list"></ul>
<ul style="margin:20px 0 0 20px;">
    <li>Type <code>socket.disconnect()</code> to disconnect</li>
    <li>Type <code>socket.connect()</code> to reconnect</li>
    <li>Type <code>sendMessageToServer('Your Message')</code> to send a message to the server</li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T06:54:41.647

在您的客户端代码中试试这个

```
var socket = io.connect('http://SERVERDOMAIN:8866'); 
```

此问题主要与不正确的 url 有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T00:33:37.103

我正在使用几个 Android（手机和平板电脑）设备以及**wifi 连接**上的桌面浏览器测试我的 socket.io 应用程序。根据上面***beNerd 的回答，***我改变了我的

```
io.connect('http://localhost:3000'); 
```

至

```
io.connect('http://192.168.5.3:3000'); // ip address of machine where the node.js app is running. 
```

它奏效了。

希望答案对使用 Wifi 连接测试他们的 NodeJS 和 Socket.IO 应用程序的用户有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T12:21:33.700

我最终安装了全新的服务器，现在一切正常。

我使用了 Ubuntu 12.04 LTS (Precise Pangolin) 并使用 socket.io 安装 node.js

对于客户端，我使用带有 Flash 文件的 socket.io.js 的本地副本。

;-)

# web-services - 在服务器端使用代表业务异常的 HTTP 响应代码是否合适？

> ID：12650300
> 
> 赞同：0
> 
> 时间：2012-09-29T05:48:06.473
> 
> 标签：web-services, exception, http-headers, http-status-codes

背景是这样的：

1.  客户端网络浏览器向服务器发送请求；
2.  服务器程序在做实际工作之前会启动一些业务检查规则。

如果检查失败，一些提示应该反馈给客户端浏览器。

所以，这就是问题所在。我应该使用错误响应http代码来指示这一点，还是直接使用200，然后从响应正文中解析消息。

有时，这不是问题。但是，如果返回错误代码，某些客户端组件会提供一些实用方法。所以，这是一个艰难的决定：

1.  返回 200 和错误信息。自己解析并展示它们；
2.  返回一些类似500的代码，让客户端组件直接显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:51:00.193

我建议尽可能多地使用 http 状态码。这是一个标准，你为什么不应该使用它们？

以下是一些示例，恕我直言，http 状态代码的使用是有意义的：

*   有人想要一个不可用的数据集使用 404 未找到
*   安全资源需要身份验证使用 401
*   对当前用户不可用的资源应获得 403 禁止
*   一个你不能很好处理的错误，写出一个 500 状态
*   等等

还要寻找[REST](https://en.wikipedia.org/wiki/Representational_state_transfer) -API 的逻辑，在那里您可以看到优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:07:01.637

通常，您需要指出服务失败的原因。返回自定义错误还可能允许客户端应用程序以适当的方式响应。例如，如果输入验证检查失败，我想用户会很高兴有机会修复并重新提交请求。HTTP 错误不足以表明究竟出了什么问题。

# c# - 用一行过滤gridview数据

> ID：12650303
> 
> 赞同：0
> 
> 时间：2012-09-29T05:48:57.230
> 
> 标签：c#, asp.net, .net

我从网格视图中的三个表中获取记录。

这里两个表数据始终相同，但一个表数据显示不同的记录我想在网格视图的一行中显示第三个表数据，当第三个表数据获取记录时，需要使用 c# 用逗号分隔过滤它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:07:16.130

您可以将返回结果存储在列表中并在绑定到网格之前对其进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T05:56:11.633

您必须根据需要制作自定义数据表，并将数据表绑定到 gridview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T06:12:16.557

您需要在查询中使用联合来避免重复记录，而不是在绑定记录后进行。

您可能会从数据库中获取 50 条记录，但在删除重复项后，您可能只有 5 到 10 条记录，所以为什么要获取 50 条记录，为什么不能在查询时删除它们。

使用这样的东西：

```
select x, y, z from Table1
Union
select x, y, z from Table2    
Union
select x, y, z from Table3 
```

它总是会给你不同的记录。

# php - PHP没有给出我期望的整数值

> ID：12650321
> 
> 赞同：-2
> 
> 时间：2012-09-29T05:51:58.670
> 
> 标签：php

我有 php 代码，我想在其中检查值级别。

**我在解释价值水平**

```
999 or below is level 0
1999 or below & higher then 1000 = level 1
2999 or below & higher then 2000 = level 2
3999 or below & higher then 3000 = level 3   so on.... 
```

我无法弄清楚如何检查和执行此操作。我知道这一切都搞砸了，因为我使用的是圆形，但我想不出任何其他方式：`$level = round($v / 1000);`

```
<?php
$i = 0;
$level = 0;
$v = isset($_GET['v']) ? (int)$_GET['v'] : 100;
do {
    $i++;
    $bid  = round($v / 10);
        if ($v > 1000)
        {$bid = 100;}
    $level = round($v / 1000);
    echo "<tr><td>$" . number_format($v) . "</td><td>$" . number_format($bid) . "</td><td>" . $level . "</td></tr>";
    $v = $v + $bid;
} while ($i < 5);
?> 
```

**输出是：**

```
$348    $35 0
$383    $38 0
$421    $42 0
$463    $46 0
$509    $51 1
$560    $56 1
$616    $62 1
$678    $68 1
$746    $75 1
$821    $82 1 
```

**我想要的输出是：**

```
$746    $75 0
$821    $82 0
$903    $90 0
$993    $99 0
$1,092  $100    1
$1,192  $100    1
$1,292  $100    1
$1,392  $100    1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T06:02:22.570

您需要使用[floor()](http://www.php.net)函数而不是 round()。

# javascript - 脚本适用于 jquery 1.3.2，但不适用于 jquery 1.7.2

> ID：12650322
> 
> 赞同：0
> 
> 时间：2012-09-29T05:52:07.323
> 
> 标签：javascript, jquery

我正在尝试添加额外的输入字段，但是一旦我尝试使用 jquery 1.7，此代码就适用于 jquery 1.3。它不起作用

```
var newTr = $(document.createElement('tr'))
         .attr("id", 'line' + counter);

    newTr.after().html('<td><input type="text" name="name' + counter + 
          '" id="name' + counter + '" value="" style="width:100px;"></td><td><input type="text" name="phone' + counter + 
          '" id="phone' + counter + '" value="" style="width:100px;"></td>');

    newTr.appendTo("#dyTable"); 
```

我猜 newTr.after().html() 和 newTr.appendTo("#dyTable"); 有问题 请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T05:55:48.397

`document.createElement('tr')`不需要，您可以简单地使用`$('<tr></tr>')`来创建新元素。这应该工作，

`var newTr = $('<tr></tr>').attr("id", 'line' + counter);`

对于添加`<td>`内容，更改`newTr.after().html('...')`为`newTr.html('...')`. 我认为`after`不需要。

# java - 处理 CSV 文件中的逗号和引号

> ID：12650330
> 
> 赞同：0
> 
> 时间：2012-09-29T05:54:44.727
> 
> 标签：java, csv, xls

我已经在互联网上搜索了有关 csv 文档的逗号问题。但我的麻烦是处理不仅包含逗号而且还包含引号的值。就像`String value = "FName,\"FName2,FName3";` 我想在 csv 文档中显示字符串**FName,"FName2,FName3** 。虽然我尝试了几种方法，但都失败了。当字符串包含逗号时，我可以使用双引号将其括起来，如下面的代码。

```
outBuff.append("\\").append(cellData).append("\\").append(","); 
```

但是当字符串包含 "" 和 时，我该如何处理这个问题？

我只能使用最高级的java，不能使用第三方库。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T11:36:50.143

```
StringBuffer sbStudentData = new StringBuffer();    

sbStudentData.append(",\"").append(LastName).append(",\"").append(FirstName) 
```

它会像姓氏，名字一样正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:40:42.220

考虑使用操作系统专用的 CSV 解析器，比如来自[Apache Commons的解析器](http://commons.apache.org/csv/apidocs/org/apache/commons/csv/CSVParser.html)

它将为您处理大多数极端情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T06:48:16.790

尝试用两个双引号括起来你的双引号： `String value = "FName,\"\"\"FName2,FName3";`

# html - 表格全宽 div

> ID：12650336
> 
> 赞同：0
> 
> 时间：2012-09-29T05:56:14.763
> 
> 标签：html, css

我正在尝试解决一个问题，即页面具有固定宽度的左侧导航，右侧有一个主 div，占据了屏幕的其余部分。

右侧的主 div 是为了包含一个表格，我希望表格扩展以适应主要区域的整个宽度的宽度。

有没有办法在 CSS 中做到这一点？

我有类似这样的代码：

```
<div id="overallDiv">

<div id="lhn">
Left-hand nav
</div>
<div id="mainBody">
    <table>
        <tr><td>A1</td><td>A2</td><td>A3</td></tr>
        <tr><td>B1</td><td>B2</td><td>B3</td></tr>
        <tr><td>C1</td><td>C2</td><td>C3</td></tr>
        <tr><td>D1</td><td>D2</td><td>D3</td></tr>
    </table>
</div>

</div> 
```

我的 CSS 类似于：

```
#lhn
{
    display:inline;
    float:left;
    width: 100px;
}
#mainBody
{
    display:inline;
    float:left;
} 
```

如何让表格填满页面的剩余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:00:44.213

我会使用以下内容：

```
#overallDiv {width: 100%;}
#lhn {width: 100px; float: left;}
#mainBody{float: left;}
#mainBody table {width: 100%;} 
```

这会将您的 wrapper 设置为可用屏幕的 100%，使您的左侧导航为 100px，并且 #mainBody 为剩余内容的 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T06:27:54.563

此时最简单和最不“hackish”的方法是部署`display: table`和`display: table-cell`：

```
​#overallDiv {
    display: table;
    width: 100%;
}
#lhn,
#mainBody {
    display: table-cell;
}
#lhn {
    width: 200px;
    background: #ddd;
}
​#mainBody > table {
    width: 100%;
}​ 
```

[http://jsfiddle.net/wxnBQ/](http://jsfiddle.net/wxnBQ/)

用于`float`非文本布局是对其效果的长期“借用”；越早爬入“当年有用的想法”的坟墓，我们就会越好。

当然，“最好”的方法是进行[Flexbox](https://developer.mozilla.org/en-US/docs/CSS/Flexbox)实现（[W3C 提议的规范](http://dev.w3.org/csswg/css3-flexbox/)）。那一天还没有到来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T06:02:24.687

设置 display: table for #overall 和 display: table-cell 用于内部 div

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T06:07:10.227

```
#overallDiv {width: auto; float: left;}
#lhn {width: 100px; float: left;}
#mainBody{float: left; width: auto;}
#mainBody table {width: 100%;} 
```

# node.js - 如何使用 mongoose-acl node.js 创建 ACL

> ID：12650338
> 
> 赞同：0
> 
> 时间：2012-09-29T05:56:18.063
> 
> 标签：node.js, express, mongoose, acl

我发现这个库用于为 mongoose 创建 ACL（访问控制列表）： [https ://github.com/scttnlsn/mongoose-acl](https://github.com/scttnlsn/mongoose-acl)

它看起来像一个很好的模块，但我对如何将它用于我的目的有点困惑。

我有一个网站，任何人（无论是否登录）都可以访问个人资料页面，例如 example.com/users/chovy

但是，如果用户 'chovy' 登录到此页面，我想授予他们管理员权限以编辑帐户的详细信息。

如果用户不是“chovy”或未登录，他们只会看到“chovy”的只读个人资料页面。

有人可以给我一个具体的例子来说明我将如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:49:37.523

这听起来很常见，我认为您不需要 ACL。您将需要有会话，然后您可以根据当前登录的用户更改视图的外观。一个不完整的例子是这样的：

```
// Assumes:
// - You set req.session.user when user logs in
// - The url route has a :name so you can do req.param() to get the name of the page being viewed

db.users.getCurrentUser(req.session.user, gotLoggedInUser)
db.users.getUserByName({name: req.param('name')}, gotUser) 
```

然后将其传递给视图，当您执行以下操作时`res.render()`：

```
var is_viewing_own_page = currentUser._id.toString() === loggedInUser._id.toString() 
```

然后视图可以做这样的事情（假设是玉）：

```
- if (is_viewing_own_page)
  div You are looking at your own page
- else
  div You are viewing someone else's page 
```

# android - 使用 ffpmeg 将图像编码为视频

> ID：12650339
> 
> 赞同：3
> 
> 时间：2012-09-29T05:56:20.033
> 
> 标签：android, ffmpeg, h.264

我们正在开发 Android 3D 动画应用程序。

我们需要识别图像，然后使用 FFmpeg 将其保存并编码为视频（因为 Android API 不支持）。生成视频后，将音频附加到相​​同的视频。

我们在这方面面临两个问题。

首先是保存识别图像进行编码时的内存泄漏问题。模拟器的 CPU 过载。每次选择图像时是否调用FFpmeg？如何解决这个问题？

第二个（如果我们通过第一个）我们无法对所选图像进行编码，因为这会生成绿色视频。这可能是什么原因？

除了 FFmpeg 之外，是否有任何工具可以将视频从图像编码为 H264？图像版本（Rastar 或 Vector）是否会影响此视频编码？是否考虑Android OS版本？

对此的任何宝贵意见将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:59:56.853

我也在安卓手机上使用 ffmpeg 玩过这个想法，但我建议在功能更强大的服务器上这样做。在服务器上，您无需考虑智能手机的 CPU 负载。

通常，为了改进您的 ffmpeg 运行，您需要发布 ffmpeg 调用。ffmpeg 非常复杂，其中参数的顺序与效率直接相关。

我不知道您更喜欢哪种容器格式，但也许一个简单的 mjpeg 编解码器可以为您工作。AFIK 那里只有 jpeg 帧相互连接，这应该很简单，然后将视频编码为 h264/x264（ffmpeg 使用最后一个）。

两者的结合可能是生成一个 mjpeg 流，该流将在服务器端转换为可以下载到客户端的 h264 视频。但是，如果您不想浪费客户的流量，那实际上取决于视频的长度。

# c++ - c ++将文本文件中不同行/位置中的相同单词对齐到每行中的相同位置

> ID：12650342
> 
> 赞同：0
> 
> 时间：2012-09-29T05:57:20.333
> 
> 标签：c++, file, io, text-alignment

我想知道如何通过文本文件并在每行中的不同位置找到给定的单词（“foobar”），然后将单词重新对齐到新文本文件中的相同位置，如果这不让我知道感觉。

```
***in text file***
1 foobar baz
2  foobar baz
3   foobar baz

****out text file***
1     foobar baz
2     foobar baz
3     foobar baz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:11:02.857

io 操纵器 std::setw() 可用于在文本输出中创建定长列，而 std::setfill() 用于指定填充字符：

```
std::cout << std::setw(5) << std::setfill('0') << 5 << std::endl; 
```

将打印：

```
00005 
```

这可以很容易地用于创建一个小程序，它从一个文件中读取所有行并将它们写入另一个文件，同时对齐所有列（在下面的程序中 >> 用于读取一列，这意味着列在 in 文件中应该是空格分隔的，由一个或多个空格字符）：

```
#include <iostream>
#include <iomanip>
#include <vector>
#include <fstream>
#include <map>
#include <algorithm>

int main (int argc, char* arv[])
{
   using namespace std;

   std::vector<std::vector<std::string> > records;
   std::map<int, int> column_widths;

   std::ifstream in_file("infile.txt", std::ios::text);
   if (!in_file.is_open())
       return 1;

   std::ofstream out_file("outfile.txt", std::ios::text);
   if (!out_file.is_open())
       return 2;

   // read all the lines and columns into records
   std::string line;
   while (std::getline(in_file, line)) {
       std::istringstream is(line);
       std::vector<std::string> columns;
       std::string word;
       int column_index = 0;
       while (is >> word) {
           columns.push_back(word);
           column_widths[column_index] = std::max(column_width[column_index], word.length());
           ++column_index;
       }

       records.push_back(columns);
   }

   // now print all the records and columns with fix widths
   for (int line = 0; line < records.size(); ++line) {
       const std::vector<std::string>& cols = records[line]; 
       for (int column = 0; column < cols.size(); ++column) {
           out_file << std::setw(column_widths[column])
                    << std::setfill(' ')
                    << cols[column] << ' ';
       }
       out_file << "\n";
   }

   return 0;
} 
```

我没有编译该程序，但它应该可以工作:)。

# wpfdatagrid - 某些行在 DataGrid 中折叠，我在键盘导航中遇到问题

> ID：12650343
> 
> 赞同：4
> 
> 时间：2012-09-29T05:57:29.673
> 
> 标签：wpfdatagrid

我正在使用 DataGrid，运行时我可以看到折叠一些行。假设我的第 4 行的可见性是折叠的，并且我的重点是第 3 行，当我尝试在向下箭头键的帮助下移动到第 5 行时，它不起作用。同样，如果我专注于第 5 行并想使用向上箭头键移动到第 3 行，它也不起作用。现在，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:54:34.107

这实际上是 .Net 中的一个错误，这里有一个错误[报告](http://connect.microsoft.com/VisualStudio/feedback/details/526014/keyboard-navigation-doesnt-work-when-the-wpf-datagrid-has-collapsed-or-hidden-rows)。

一种解决方法是使用附加行为来处理向上和向下选择。以下示例要求将 DataGrid 的 IsSynchronizedWithCurrentItem 设置为 true。

笔记！确保将 while 条件更改为适当的方式来确定项目是否折叠。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Data;
using System.Windows.Media;

namespace DataGridGroupingTest
{
    class DataGridKeyboardNavigationAttachedBehavior
    {
        public static readonly DependencyProperty
                KeyboardKey
                    = DependencyProperty.RegisterAttached(
                        "IsKeyboardNavigationEnabled",
                        typeof(bool),
                        typeof(DataGridKeyboardNavigationAttachedBehavior),
                        new PropertyMetadata(
                            false,
                            OnIsKeyboardNavigationEnabledChanged));

        public static bool GetIsKeyboardNavigationEnabled(DependencyObject depObj)
        {
            return (bool)depObj.GetValue(KeyboardKey);
        }

        public static void SetIsKeyboardNavigationEnabled(DependencyObject depObj, bool value)
        {
            depObj.SetValue(KeyboardKey, value);
        }

        private static void OnIsKeyboardNavigationEnabledChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
        {
            DataGrid dataGrid = depObj as DataGrid;
            if (dataGrid != null)
            {
                dataGrid.PreviewKeyDown += dataGrid_PreviewKeyDown;
                dataGrid.IsSynchronizedWithCurrentItem = true;
            }
        }

        static void dataGrid_PreviewKeyDown(object sender, System.Windows.Input.KeyEventArgs e)
        {
            DataGrid dataGrid = sender as DataGrid;
            if (dataGrid != null && dataGrid.CurrentCell != null)
            {
                if (e.Key == System.Windows.Input.Key.Down || e.Key == System.Windows.Input.Key.Up)
                {
                    ICollectionView view = CollectionViewSource.GetDefaultView(dataGrid.Items);

                    int loopCount = 0;
                    do
                    {
                        if (e.Key == System.Windows.Input.Key.Down)
                        {
                            view.MoveCurrentToNext();
                            if (view.IsCurrentAfterLast)
                            {
                                view.MoveCurrentToFirst();
                                loopCount++;
                            }
                        }
                        if (e.Key == System.Windows.Input.Key.Up)
                        {
                            view.MoveCurrentToPrevious();
                            if (view.IsCurrentBeforeFirst)
                            {
                                view.MoveCurrentToLast();
                                loopCount++;
                            }
                        }
                    } while (((Person)view.CurrentItem).Boss != null && !((Person)view.CurrentItem).Boss.IsExpanded && loopCount < 2);

                    // We have to move the cell selection aswell.
                    dataGrid.CurrentCell = new DataGridCellInfo(view.CurrentItem, dataGrid.CurrentCell.Column);

                    e.Handled = true;
                    return;
                }
            }
        }
    }
} 
```

# php - 需要在 codeigniter 中动态分配 $config['base_url'] 吗？

> ID：12650346
> 
> 赞同：1
> 
> 时间：2012-09-29T05:57:56.307
> 
> 标签：php, codeigniter

我需要在每次 url 命中时`$config['base_url']`动态分配。`config.php`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:07:58.297

通常，我们使用 $config['base_url'] 来存储域名。为什么你需要在每次刷新时存储它？如果你想让它在不同的域上动态。试试下面的一个

```
 $config['base_url']=$_SERVER['SERVER_NAME']; 
```

# php - PhP 网络服务开发

> ID：12650353
> 
> 赞同：0
> 
> 时间：2012-09-29T05:59:42.837
> 
> 标签：php, web-services, nusoap

我正在使用 NuSOAP 库开发一个 PhP 网络服务，但遇到了一个错误。我无法理解错误。如果有人知道解决方案，请帮助。以下是我的代码。

```
------ server.php ------

<?php

// Pull in the NuSOAP code
require_once('lib/nusoap.php');
// Create the server instance
$server = new soap_server;

// Register the method to expose
$server->register('hello');

    // Define the method as a PHP function
    function hello($name) 
    {
        return 'Hello, ' . $name;   
    }

    // Use the request to (try to) invoke the service
    $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? 
           $HTTP_RAW_POST_DATA : '';

    $server->service($HTTP_RAW_POST_DATA);

?>

------ client.php ------

<?php

// Pull in the NuSOAP code
require_once('lib/nusoap.php');
// Create the client instance
$client = new nusoap_client('server.php');
// Check for an error
$err = $client->getError();

if ($err) 
{
   // Display the error
   echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
   // At this point, you know the call that follows will fail
}

// Call the SOAP method
$result = $client->call('hello', array('name' => 'Scott'));

// Check for a fault    
if ($client->fault) 
{
        echo '<h2>Fault</h2><pre>';
        print_r($result);
        echo '</pre>';
}
 else
 {

    // Check for errors
        $err = $client->getError();
        if ($err) 
    {
            // Display the error
            echo '<h2>Error</h2><pre>' . $err . '</pre>';
        }
     else 
     {
            // Display the result
            echo '<h2>Result</h2><pre>';
            print_r($result);
            echo '</pre>';
        }
}
?> 
```

当我运行客户端时，出现以下错误。

```
Error

no transport found, or selected transport is not yet supported! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:40:21.633

我认为您应该更准确地阅读 NuSoap 文档。我在您的代码中发现了一些错误：

1.  一个数组将被传递给您的方法，并且您已将字符串参数 $name 用于 hello 方法。

    ```
    $name['name']; //is correct! 
    ```

2.  客户端应该调用一些实例或 web url 而不是 HDD url(server.php)。

    ```
    new nusoap_client(SOME_IP_OR_HOSTNAME . '/server.php'); //is correct!

    require_once 'server.php';
    new nusoap_client($server); //is correct!

    new nusoap_client(WSDL_INSTANCE_OBJECT); //is correct! 

    new nusoap_client('server.php'); //is incorrect! 
    ```

更多信息请阅读 NuSoap 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:24:24.130

当您实例化 nusoap_client 时：

```
new nusoap_client('server.php'); 
```

您的构造函数参数`'server.php'`对我来说似乎无效。它应该是一个有效的端点：

[文档](http://www.oos-shop.de/doc/nusoap/html/classnusoap__client.html#a9b69fa44881ef612b83e263c0918179)

因此，无论您的“server.php”实际在哪里。也许如果它在运行 client.php 的同一台机器上，它可能是这样的：`http://127.0.0.1/app/server.php`

# windows - 创建开发人员许可证后，我可以更改用于 Visual Studio 的 Microsoft 帐户吗？

> ID：12650364
> 
> 赞同：2
> 
> 时间：2012-09-29T06:01:14.417
> 
> 标签：windows, visual-studio, windows-8, microsoft-metro, windows-runtime

我想为 Windows 8 创建 Metro 应用程序，我有 VS 2012，但我需要开发人员许可证。如果我使用虚假凭据，我以后能否在同一台计算机上使用不同的 Microsoft 帐户获得不同的开发人员许可证？

如果以后可以改，怎么改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:17:32.057

据我所知，您输入的开发者帐户可以独立于您将用于发布应用程序的真实帐户。
每次您要创建用于上传的应用程序包时，您都在输入您的凭据，以防您想在多个不同的帐户下开发，所以是的，使用不同的帐户“激活 Windows 8 开发”和发布应该没有问题你的应用程序。

# python - 在python中从csv文件存储和检索列表

> ID：12650368
> 
> 赞同：2
> 
> 时间：2012-09-29T06:01:40.987
> 
> 标签：python, list, csv

简单的问题：我可以将列表存储在 CSV 文件中吗？如果是这样，我该如何找回它？

这是我写入文件的文件内容，我现在正忙着检索它。

```
40;['5', '0'];['15', '0'] ; ['25', '0'] ; ['30', '0'] ; ['40', '0'] ; ['50', '0'].....   
50; ['0', '0'] ; ['10', '0'] ; ['15', '0'] ; ['25', '0'] ; ['30', '0'] ; ['40', '0'].....
60; ['0', '0'] ; ['10', '0'] ; ['15', '0'] ; ['20', '0'] ; ['25', '0'] ; ['30', '0'].....
70; ['0', '0'] ; ['5', '0'] ; ['10', '0'] ; ['15', '0'] ; ['20', '0'] ; ['30', '0']..... 
```

这是我尝试检索它的一些代码：

```
import csv
reader = csv.reader(open("NewTableInfo", "r"), delimiter=';')
for row in reader:
    print (row) 
```

这会产生一个列表，其中括号中的值是字符串类型。我希望它们成为列表（在另一个文件中，我将每一行设为字典项）。

```
['40', "['5', '0']", "['15', '0'] ", " ['25', '0'] ", " ['30', '0'] "...... 
```

有任何想法吗？是否可以按照我上面所做的方式编写 CSV 文件并使其可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T06:13:38.647

做你所说的是可能的：

```
import csv
import ast

with open("NewTableInfo", "r") as f:
    reader = csv.reader(f, delimiter=';')
    for row in reader:
        print [ast.literal_eval(x.strip()) for x in row] 
```

但是我建议`pickle`改用，这不是保存数据的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T06:08:12.923

一般来说，CSV 不能很好地处理列表。可以将数据取出，但您必须自己解析列表的字符串表示形式。一种替代方法是使用支持列表数据的格式，例如 JSON。

将您的列表从 CSV 中取出的快速而肮脏但**不安全**`eval`的方法是使用您返回的字符串。如果你有 string `"['5', '0']"`，那么 eval-ing 它会给你返回列表：

```
>>> eval("['5', '0']")
['5', '0'] 
```

但是，正如我所说，这是不安全的，所以你应该只在处理你自己创建的 CSV 文件时使用它，所以你知道它们只包含数字列表等。不要评估你无法控制的字符串；人们可以制作恶意字符串，在评估时删除硬盘上的文件或做其他邪恶的事情。

如果出于安全考虑无法使用 eval，则必须自己解析列表格式。这可能是一项相当繁重的任务。如果你需要这样做，你最好为你的数据选择不同的格式，比如 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:37:50.613

你也可以使用json。有csv的原因吗？

```
import json

# write
out = open("datafile.json", "w")
data = [['5', '0'],['15', '0'] ,['25', '0'] ,['30', '0'] ,['40', '0'], ['50', '0']]
json_out_data = json.dumps(data)
out.write(json_out_data)
out.close()

input = open("datafile.json", "r")
data = json.loads(input.read()) 
```

# mysql - 在 MySQL 中重命名表

> ID：12650370
> 
> 赞同：326
> 
> 时间：2012-09-29T06:01:54.817
> 
> 标签：mysql, database, table-rename

重命名表在 MySQL 中不起作用

```
RENAME TABLE group TO member; 
```

错误信息是

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds
        to your MySQL server version for the right syntax to use near 'group 
        RENAME TO member' at line 1 
```

该查询在我的其他表上运行良好，但不适用于 table `group`。

* * *

## 回答 #1

> 赞同：533
> 
> 时间：2012-09-29T06:06:14.017

`group`是 MySQL 中的一个关键字（属于[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)的一部分），您需要用反引号将其括起来以向 MySQL 显示您希望它被解释为表名：

```
RENAME TABLE `group` TO `member`; 
```

**添加**（见评论） - 这些不是单引号。

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2012-09-29T06:39:34.753

请试试

```
RENAME TABLE  `oldTableName` TO  `newTableName` 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2015-02-06T13:01:15.447

MySQL for[`RENAME TABLE`](https://dev.mysql.com/doc/refman/8.0/en/rename-table.html)语句的语法如下：

```
RENAME TABLE <old_table_name> TO <new_table_name> 
```

在您的查询中，您使用`group`了 which 是MySQL中的*关键字之一。*在创建表、字段名等时尽量避免使用 MySQL*关键字作为名称。*

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-06-13T09:47:02.620

```
ALTER TABLE old_table_name RENAME new_table_name; 
```

或者

```
RENAME TABLE old_table_name TO new_table_name; 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2017-04-02T11:04:11.930

表名更改

```
RENAME TABLE old_table_name TO new_table_name; 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-05-06T17:13:37.437

**重命名 MySQL 中的表：**

```
ALTER TABLE current_name RENAME new_name; 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2016-08-18T19:23:50.063

group - 是 MySQL 中的保留字，这就是您看到此类错误的原因。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds
        to your MySQL server version for the right syntax to use near 'group 
        RENAME TO member' at line 1 
```

您需要将表名包装成**反引号**：

```
RENAME TABLE `group` TO `member`; 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2015-08-03T08:18:23.470

```
ALTER TABLE `group` RENAME `member` 
```

group 是关键字，因此您必须包含在`group`

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2019-12-10T23:32:54.877

使用`Mysql 5.6.18`以下命令

`ALTER TABLE `old_table` RENAME TO `new_table``

此外，如果出现错误提示“....在重命名为 ...附近”，请尝试删除勾号```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2016-03-18T08:02:26.027

```
RENAME TABLE tb1 TO tb2; 
```

tb1 - 当前表名。tb2 - 您希望您的表被调用的名称。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2019-03-10T18:04:14.453

根据[mysql docs](https://dev.mysql.com/doc/refman/5.7/en/rename-table.html)：“重命名`TEMPORARY`表，`RENAME TABLE`不起作用。`ALTER TABLE`改用。”

所以这是最便携的方法：

```
ALTER TABLE `old_name` RENAME `new_name`; 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2016-05-13T10:40:49.970

试试这些

```
RENAME TABLE `group` TO `member`; 
```

**或者**

```
ALTER TABLE `group` RENAME `member`; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-12-11T03:34:27.333

运行**Alter**命令

1.单击顶部的**SQL选项卡。**

2.在文本框中输入以下命令：`ALTER TABLE exampletable RENAME TO new_table_name;`

3.单击开始按钮。

来源：[https ://my.bluehost.com/hosting/help/2158](https://my.bluehost.com/hosting/help/2158)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-11-03T05:15:52.493

您可以使用

```
RENAME TABLE `group` TO `member`; 
```

使用反引号 (`) 而不是单引号 (')。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-03-24T05:49:06.130

> 重命名表
> 语法 在 MySQL 中重命名表的语法是：

```
ALTER TABLE table_name
RENAME TO new_table_name; 
```

> 示例
> 让我们看一个示例，该示例显示如何使用 ALTER TABLE 语句重命名 MySQL 中的表。
> 或示例：

```
ALTER TABLE contacts
RENAME TO people; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-01-03T07:49:42.537

在没有给出数据库名称的情况下，在我的情况下无法重命名表，我按照以下命令重命名表。

```
RENAME TABLE current_db.tbl_name TO current_db.tbl_name; 
```

* * *

## 回答 #17

> 赞同：-6
> 
> 时间：2015-10-16T21:35:13.480

右键单击视图 > 新查询

并输入：EXEC sp_rename 'Table', 'NewName'

然后点击页面左上角的运行按钮。

# lucene - Lucene 是否支持在多个索引文档之间进行搜索？

> ID：12650379
> 
> 赞同：0
> 
> 时间：2012-09-29T06:03:15.587
> 
> 标签：lucene, hibernate-search

在数据库中：

我有两张桌子。每个表中有三列。Table_A (column_primaryKey_A,column_A1,column_A2) Table_B (column_primaryKey_B,column_B1,column_B2)

下面是我想使用 Lucene 执行的 SQL： **SELECT** * **FROM** Table_A,Table_B **WHERE** column_primaryKey_A = column_primaryKey_B **AND** column_A1 = XX **AND** column_B1 = XX

我想创建两个索引文档（<strong>Index_Table_A, **Index_Table_A**），**如何使用Lucene或Hibernate Search的机制来实现上面的东西？**.

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:13:48.377

我不确定你为什么需要索引或者为什么要首先使用 lucene，但我可以告诉你如何使用一个索引来实现它。（使用两个索引是可能的，但性能显着降低）

使用一个索引，索引任何文档，如下所示：

```
title = column_primaryKey_A
column_A1 = val...
column_A2 = val2...
column_B1 = val3...
column_B2 = val4... 
```

搜索时，您想对字段查询使用连词查询，如下所示

```
query = (column_A1:XX) AND (column_B1:XX) 
```

您可以[在此处](https://lucene.apache.org/core/3_6_0/queryparsersyntax.html)找到有关 lucene 查询语法的更多信息。

**编辑：**由两个搜索组成的另一个选项可能效果较差：您可以在第一列上进行第一次搜索，收集所有相应的标题（id），然后将它们添加到第二个查询（在第二列上）：

```
Query: (Column_B1:XX) AND ( id1 OR id2 OR ...) 
```

其中 Id 是从第一次搜索中收集的结果。

# sql - 将连接限制为一行

> ID：12650381
> 
> 赞同：6
> 
> 时间：2012-09-29T06:04:05.673
> 
> 标签：sql, postgresql, join, greatest-n-per-group, sql-limit

我有以下查询：

```
SELECT sum((select count(*) as itemCount) * "SalesOrderItems"."price") as amount, 'rma' as     
    "creditType", "Clients"."company" as "client", "Clients".id as "ClientId", "Rmas".* 
FROM "Rmas" JOIN "EsnsRmas" on("EsnsRmas"."RmaId" = "Rmas"."id") 
    JOIN "Esns" on ("Esns".id = "EsnsRmas"."EsnId") 
    JOIN "EsnsSalesOrderItems" on("EsnsSalesOrderItems"."EsnId" = "Esns"."id" ) 
    JOIN "SalesOrderItems" on("SalesOrderItems"."id" = "EsnsSalesOrderItems"."SalesOrderItemId") 
    JOIN "Clients" on("Clients"."id" = "Rmas"."ClientId" )
WHERE "Rmas"."credited"=false AND "Rmas"."verifyStatus" IS NOT null 
GROUP BY "Clients".id, "Rmas".id; 
```

问题是表`"EsnsSalesOrderItems"`可以`EsnId`在不同的条目中具有相同的内容。我想将查询限制为仅提取`"EsnsSalesOrderItems"`具有相同`"EsnId"`.

“最后一个”条目是指以下内容：

表中最后出现的那个`"EsnsSalesOrderItems"`。因此，例如，如果`"EsnsSalesOrderItems"`有两个条目分别带有`"EsnId" = 6`and`"createdAt" = '2012-06-19'`和 ，`'2012-07-19'`它应该只给我来自 的条目`'2012-07-19'`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T13:16:26.633

```
SELECT (count(*) * sum(s."price")) AS amount
     , 'rma'       AS "creditType"
     , c."company" AS "client"
     , c.id        AS "ClientId"
     , r.* 
FROM   "Rmas"            r
JOIN   "EsnsRmas"        er ON er."RmaId" = r."id"
JOIN   "Esns"            e  ON e.id = er."EsnId"
JOIN  (
   SELECT DISTINCT ON ("EsnId") *
   FROM   "EsnsSalesOrderItems"
   ORDER  BY "EsnId", "createdAt" DESC
   )                     es ON es."EsnId" = e."id"
JOIN   "SalesOrderItems" s  ON s."id" = es."SalesOrderItemId"
JOIN   "Clients"         c  ON c."id" = r."ClientId"
WHERE  r."credited" = FALSE
AND    r."verifyStatus" IS NOT NULL 
GROUP  BY c.id, r.id; 
```

您在问题中的查询在另一个聚合上具有非法聚合：

```
sum((select count(*) as itemCount) * "SalesOrderItems"."price") as amount 
```

简化并转换为合法语法：

```
(count(*) * sum(s."price")) AS amount 
```

但是你真的想乘以每组的计数吗？

`"EsnsSalesOrderItems"`我用 检索每组的单行**`DISTINCT ON`**。详细解释：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

我还添加了表别名和格式，以使查询更易于人眼解析。如果您[可以避免驼峰式大小写，则可以摆脱所有](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)使视图蒙上阴影的双引号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T08:21:51.807

就像是：

```
join (
  select "EsnId", 
         row_number() over (partition by "EsnId" order by "createdAt" desc) as rn
  from "EsnsSalesOrderItems"
) t ON t."EsnId" = "Esns"."id" and rn = 1 
```

`EsnId"`这将根据`"EsnsSalesOrderItems"`列选择最新的“ `creation_date`。由于您没有发布表的结构，因此我不得不“发明”一个列名。您可以使用任何允许您定义行顺序的列适合你。

但请记住，“最后一行”的概念仅在您指定订单或行时才有效。一个这样的表是没有顺序的，查询的结果也不是，***除非***你指定一个`order by`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-28T14:43:18.443

死灵法是因为答案已经过时了。
利用**PG 9.3**`LATERAL`中引入的关键字

 **离开 | 对 | 内部 JOIN **LATERAL**

我将用一个例子来解释：
假设你有一个表“联系人”。
现在联系人具有组织单位。
他们可以在一个时间点有一个 OU，但在 N 个时间点有 N 个 OU。

现在，如果您必须**在某个时间段**（不是报告日期，而是日期范围）内查询联系人和 OU，如果您只是进行左连接，则可以将记录数增加 N 倍。
因此，要显示 OU，您只需为每个联系人加入第一个 OU（其中首先是任意标准 - 例如，当取最后一个值时，这只是排序时第一个值的另一种说法按日期降序排列）。

在 SQL 服务器中，您将使用交叉应用（或者更确切地说是 OUTER APPLY，因为我们需要左连接），这将在它必须连接的每一行上调用一个表值函数。

```
SELECT * FROM T_Contacts 

--LEFT JOIN T_MAP_Contacts_Ref_OrganisationalUnit ON MAP_CTCOU_CT_UID = T_Contacts.CT_UID AND MAP_CTCOU_SoftDeleteStatus = 1 
--WHERE T_MAP_Contacts_Ref_OrganisationalUnit.MAP_CTCOU_UID IS NULL -- 989

-- CROSS APPLY -- = INNER JOIN 
OUTER APPLY    -- = LEFT JOIN 
(
    SELECT TOP 1 
         --MAP_CTCOU_UID    
         MAP_CTCOU_CT_UID   
        ,MAP_CTCOU_COU_UID  
        ,MAP_CTCOU_DateFrom 
        ,MAP_CTCOU_DateTo   
   FROM T_MAP_Contacts_Ref_OrganisationalUnit 
   WHERE MAP_CTCOU_SoftDeleteStatus = 1 
   AND MAP_CTCOU_CT_UID = T_Contacts.CT_UID 

    /*  
    AND 
    ( 
        (@in_DateFrom <= T_MAP_Contacts_Ref_OrganisationalUnit.MAP_KTKOE_DateTo) 
        AND 
        (@in_DateTo >= T_MAP_Contacts_Ref_OrganisationalUnit.MAP_KTKOE_DateFrom) 
    ) 
    */
   ORDER BY MAP_CTCOU_DateFrom 
) AS FirstOE 
```

在 PostgreSQL 中，**从 9.3 版开始，**您也可以这样做 - 只需使用`LATERAL`关键字即可：

```
SELECT * FROM T_Contacts 

--LEFT JOIN T_MAP_Contacts_Ref_OrganisationalUnit ON MAP_CTCOU_CT_UID = T_Contacts.CT_UID AND MAP_CTCOU_SoftDeleteStatus = 1 
--WHERE T_MAP_Contacts_Ref_OrganisationalUnit.MAP_CTCOU_UID IS NULL -- 989

LEFT JOIN LATERAL 
(
    SELECT 
         --MAP_CTCOU_UID    
         MAP_CTCOU_CT_UID   
        ,MAP_CTCOU_COU_UID  
        ,MAP_CTCOU_DateFrom 
        ,MAP_CTCOU_DateTo   
   FROM T_MAP_Contacts_Ref_OrganisationalUnit 
   WHERE MAP_CTCOU_SoftDeleteStatus = 1 
   AND MAP_CTCOU_CT_UID = T_Contacts.CT_UID 

    /*  
    AND 
    ( 
        (__in_DateFrom <= T_MAP_Contacts_Ref_OrganisationalUnit.MAP_KTKOE_DateTo) 
        AND 
        (__in_DateTo >= T_MAP_Contacts_Ref_OrganisationalUnit.MAP_KTKOE_DateFrom) 
    ) 
    */
   ORDER BY MAP_CTCOU_DateFrom 
   LIMIT 1 
) AS FirstOE 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-29T07:25:25.270

尝试在您的 ON 子句中使用子查询。一个抽象的例子：

```
SELECT 
    *
FROM table1
JOIN table2 ON table2.id = (
    SELECT id FROM table2 WHERE table2.table1_id = table1.id LIMIT 1
)
WHERE 
    ... 
```**

# c - 第一个和最后一个的赔率

> ID：12650382
> 
> 赞同：-3
> 
> 时间：2012-09-29T06:04:26.037
> 
> 标签：c, arrays, algorithm

我正在尝试解决一个问题，例如...在数组中，我们必须将所有奇数元素移到开头...偶数元素到结尾...我尝试过这种方式，但是偶数在这里失去了顺序...可以谁来帮帮我 ？？？？？？？我得到的输出是 ...1 3 5 7 9 4 8 2 6
期望线性时间解决方案...

```
 #include<stdio.h>
 void swap(int *p,int *q)
 {
 *p=*p^*q;
  *q=*p^*q;
  *p=*p^*q;
 }
  int main()
  {
  int arr[]={ 2, 1 ,4 ,3 ,6 ,5 ,8 ,7 ,9};
  int  odd=0;
  int even=0;
  int arr_size = sizeof(arr)/sizeof(arr[0]);
  while(even< arr_size){
     if(arr[even]&1)
        swap(&arr[odd++],&arr[even++]);
     else
        even++;
  }
 int i=0;
 for(i=0;i<arr_size ;i++)
 printf("%d  ",arr[i]);
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:37:24.773

您可以使用`qsort`带有特殊比较功能的调用：

```
#include <stdio.h>
#include <stdlib.h>

int cmp(const void * a, const void * b) {
    int aa = *((int*)a);
    int bb = *((int*)b);
    // If aa is odd and bb is even aa is smaller
    if(aa%2 == 1 && bb%2 == 0)
        return -1;
    // If bb is odd and aa is even bb is smaller
    if(aa%2 == 0 && bb%2 == 1)
        return 1;
    // If both even or odd respect current position. (If a is before b in arr a has lower address)
    if(a<b)
        return -1;
    return 1;
}
int main(void) {
    int arr[] = { 2, 1 ,4 ,3 ,6 ,5 ,8 ,7 ,9};    
    int len = sizeof(arr)/sizeof(arr[0]);
    int i;
    qsort(arr, len, sizeof(int), cmp);
    for(i=0; i<len; i++)
        printf("%d ", arr[i]);
    return 0;
} 
```

* * *

对于不使用辅助数组的解决方案（如*HussainAl-Mutawa*所做的那样），您可以使用一种[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)来获得就地解决方案，但它的运行时间是二次增长的，因此*HussainAl-Mutawa*的版本似乎是最佳的，如果运行时是首选:)。只是为了完整起见，我的实现：

```
int main(void) {
    int arr[]={ 2, 1 ,4 ,3 ,6 ,5 ,8 ,7 ,9};
    int len = sizeof(arr)/sizeof(arr[0]);
    int i,j;
    for(i=1; i<len; i++) {
        int cur=arr[i];
        if(cur%2 == 0)
            continue;
        j=i;
        while(j>0 && arr[j-1]%2 == 0) {
           arr[j]=arr[j-1];
           j--;
        }
        arr[j]=cur;
    }

    for(i=0; i<len; i++)
        printf("%d ", arr[i]);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T06:56:09.673

这个解决方案怎么样

```
#include<stdio.h>

  int main()
  {
  int i;
  int arr[]={ 2, 1 ,4 ,3 ,6 ,5 ,8 ,7 ,9};
  int arr_size = sizeof(arr)/sizeof(arr[0]);
  int sorted[arr_size];
  int sp = 0;
  for(i=0;i<arr_size;i++){
     if(arr[i]&1){
        sorted[sp++]=arr[i];
     }
  }

  for(i=0;i<arr_size;i++){
     if(!(arr[i]&1)){
        sorted[sp++]=arr[i];
     }
  }

  for(i=0;i< arr_size ;i++)
    printf("%d  ", sorted[i]);
 return 0;
} 
```

输出是

```
 1  3  5  7  9  2  4  6  8 
```

** 更新 **

虽然上面使用了更多空间并在列表上运行了两次，但以下内容只在列表上运行了一次，但仍然使用更多空间

```
 int main(){

  int i;
  int arr[]={ 2, 1 ,4 ,3 ,6 ,5 ,8 ,7 ,9};
  int arr_size = sizeof(arr)/sizeof(arr[0]);
  int sorted[arr_size];
  int even = 1+arr_size/2;
  int odd  = 0;

  for(i=0;i<arr_size;i++){
     if(arr[i]&1)
        sorted[odd++]=arr[i];
     else
        sorted[even++]=arr[i];
  }

  for(i=0;i< arr_size ;i++)
    printf("%d  ", sorted[i]);

 return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-29T06:21:34.017

如果交换不是比这更重要的，您可以简单地创建两个 for 循环，一个用于添加偶数，另一个用于赔率。像这样的东西： -

```
 j=0;
  for(i=2;i<a_size;i+2)
  {
     b[j++]=a[i];
  }
  for(i=1;i<a_size;i+2)
  {
     b[j++]=a[i];
  } 
```

并在最后打印一个。

# ruby-on-rails - 消息中发生 Net::SMTPAuthenticationError#create

> ID：12650383
> 
> 赞同：1
> 
> 时间：2012-09-29T06:05:03.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, google-apps

我使用 Google 从我的 Rails 应用程序发送电子邮件时收到错误消息，内容如下：

```
A Net::SMTPAuthenticationError occurred in messages#create
454 4.7.0 Cannot authenticate due to temporary system problem. Try again later. ch3sm7566201qab.9
/usr/ruby1.9.2/lib/ruby/1.9.1/net/smtp.rb:966:in `check_auth_response' 
```

这是我的`setup_mail.rb`：

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,             
  :domain               => 'oursite.com',
  :user_name            => 'support@oursite.com',
  :password             => 'password',
  :authentication       => 'plain',
  :enable_starttls_auto =>  true
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T18:46:11.240

我在 Python 中遇到了一些问题，只需在线登录 gmail 帐户即可修复它。

# c - 使用 C 从 Socket 解析 XML 数据

> ID：12650384
> 
> 赞同：1
> 
> 时间：2012-09-29T06:05:16.670
> 
> 标签：c, xml, linux, sockets

我有一个将 XML 数据发送到我的服务器程序的客户端程序。服务器需要解析 XML 数据。我在 Linux 上使用 C 语言。

是否有任何 API 可用于直接从套接字解析 XML？否则我怎么知道 XML 传输是否完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T06:19:01.913

正如我在上面试图解释的：当你使用“原始套接字”时，你一次最多只能读取一个缓冲区。您不一定会在一个套接字读取中读取整个文档；你甚至可能没有完整的线路。您需要在循环中一次将数据复制到缓冲区，直到获得所需的所有文本。这使解析复杂化:)

Expat 是一个面向流的解析器——这可能会有所帮助。

SAX 是一个“事件驱动”的解析器。您可以在 Expat 周围使用 SAX 包装器，也可以使用许多其他选择中的任何一种，包括 libXML 和 Xerces。

要点是 1）读取数据（从网络）和 2）解析数据是*两个独立的活动*。

对于学习套接字，我强烈推荐 Beej 最优秀的“网络编程指南”：

*   [http://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

对于学习外籍人士，这里有一个很好的教程：

*   [http://www.xml.com/pub/a/1999/09/expat/index.html](http://www.xml.com/pub/a/1999/09/expat/index.html)

'希望有帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T06:17:28.153

您不解析套接字上的数据。您[read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)或[recv(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/recv.2.html)一些可以在读取或接收后解析或处理的数据（这些例程会发出 EOF 信号，例如通过读取 0 字节）。

C 存在几个 XML 解析库，请参阅[此答案](https://stackoverflow.com/a/399705/841108)。

特别是，其中许多（expat、[libxml2](http://www.xmlsoft.org/)、...）能够处理提取的数据块。具体来说，您为它们提供在某些 XML 事件（或当某些 XML 元素已被完全解析时）调用的例程，您为它们提供块读取例程，您安装并开始解析，最终您的一些 XML 事件或元素注册例程将叫做。

# kannel - 错误：连接失败 - Kannel smsc 配置

> ID：12650389
> 
> 赞同：0
> 
> 时间：2012-09-29T06:06:19.170
> 
> 标签：kannel

我有 2 个 SMSC 连接，第一个工作正常，我可以发送和接收消息，但是第二个返回以下错误....不确定什么做错了...

```
2012-09-29 09:00:24 [9921] [7] ERROR: connect failed
2012-09-29 09:00:24 [9921] [7] ERROR: System error 111: Connection refused
2012-09-29 09:00:24 [9921] [7] ERROR: error connecting to server 10.*.*.* at port 5019
2012-09-29 09:00:24 [9921] [7] ERROR: SMPP[smsc_hope]: Couldn't connect to server.
2012-09-29 09:00:24 [9921] [7] ERROR: SMPP[smsc_hope]: Couldn't connect to SMS center (retrying in 10 seconds). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:23:50.130

由于“连接被拒绝”的原因，您的 kannel 似乎无法连接到 SMSC。你能从同一台机器上“telnet”到指定的IP地址和端口吗？我猜不行吗？

您或 SMSC 端可能存在一些防火墙配置错误，导致目标 IP 和端口无法访问。如果之间有 VPN 隧道，它是否启动并运行？您是否使用正确的 IP 地址和端口？

如果您没有明显的原因，您应该联系“SMSC_HOPE”的支持人员并向他们描述问题。

# javascript - 将日期字符串格式化为 highcharts

> ID：12650391
> 
> 赞同：1
> 
> 时间：2012-09-29T06:06:29.773
> 
> 标签：javascript, datetime, format, highcharts

我一直在尝试将最小和最大字符串日期插入到我的 highcharts 图中，如下所示：

```
 var formatted_startDate = startDate.replace(/-/g, ",");
    var formatted_endDate = endDate.replace(/-/g, ",");

    //Format now is "yyyy,mm,dd"
    options = {
       chart: {
           renderTo: 'container',
           type: 'bar'
       },
       xAxis: {
          type: "datetime",
        dateTimeLabelFormats: {
            day: '%m-%d'   
            },
        tickInterval: 24 * 3600 * 1000,
        min: Date.UTC(formatted_startDate),
        max: Date.UTC(formatted_endDate)

       }, 
```

显然上述方法不起作用，因为我正在传递一个字符串。我只是这样写它来说明我正在尝试做的事情，而不是发布无数失败尝试的代码。我尝试使用 JSON.parse 和 eval() 但语法有问题。

任何帮助，将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:02:05.583

最终只使用了 highcharts API 中的 setExtremes 方法

```
 var formatted_startDate = startDate.replace(/-/g, ",");
    var formatted_endDate = endDate.replace(/-/g, ",");
            //Format now is "2000,00,00"

    var startdatearray = formatted_startDate.split(",");
    var enddatearray = formatted_endDate.split(",");

    var sy = parseInt(startdatearray[0]);
    var sm = parseInt(startdatearray[1],10) - 1;
    var sd = parseInt(startdatearray[2]);
    var ey = parseInt(enddatearray[0]);
    var em = parseInt(enddatearray[1],10) - 1;
    var ed = parseInt(enddatearray[2]); 

    chart = new Highcharts.Chart(options);
        chart.xAxis[0].setExtremes(Date.UTC(sy,sm,sd), Date.UTC(ey, em, ed)); 
```

# css - 在@font-face 中使用笑脸 (☺) 仍然相关吗？

> ID：12650400
> 
> 赞同：8
> 
> 时间：2012-09-29T06:07:22.050
> 
> 标签：css, fonts, font-face, webfonts

这可能有点草率的结论，但是当我发现 FontSquirrel.com 没有使用[他们的 @font-face 生成器](http://www.fontsquirrel.com/fontface/generator)生成笑脸 (☺) 时，我的问题就出现了。

FontSquirrel 的生成器不是通常的防弹标准（[如 Paul Irish](http://paulirish.com/2010/font-face-gotchas/#smiley)关于笑脸的规定），而是仅生成以下内容：`@font-face`

```
@font-face {
font-family: 'sansationregular';
src: url('sansation_regular-webfont.eot');
src: url('sansation_regular-webfont.eot?#iefix') format('embedded-opentype'),
     url('sansation_regular-webfont.woff') format('woff'),
     url('sansation_regular-webfont.ttf') format('truetype'),
     url('sansation_regular-webfont.svg#sansationregular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

我意识到，通过 FontSquirrel 放弃笑脸意味着笑脸不再相关，这可能太仓促了，但考虑到 FontSquirrel 的`@font-face`生成器似乎是那里最受欢迎和使用最多的生成器，这让我想知道他们为什么不这样做包括笑脸了。特别是因为他们似乎之前已经包含了它......

以防万一有人不熟悉笑脸，这里有[一个很好的解释](https://stackoverflow.com/questions/3698319/css-font-face-what-does-src-local-mean)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T06:01:49.917

编辑 - 遇到更多可能感兴趣的信息：[https ://stackoverflow.com/a/4520467/1455709](https://stackoverflow.com/a/4520467/1455709)

Android 2.2 设备会受到`local()`使用的影响，您`@font-face`根本无法使用。

我可以确认在 Android 2.3.6（默认浏览器）上`local()`会破坏您的`@font-face`声明。

Android 4.0（默认浏览器）与`local()`.

不确定之间的一切。再说一次，我认为这取决于您的用户群，或者您想要使用多个样式表来确保您的字体*在任何地方都能*工作的努力。

* * *

好吧，他们只生成在所有浏览器上显示您的字体所需的代码。您是否愿意承担“风险”来决定用户是否在本地安装了该名称的字体。

取决于你的听众，我会说。

*   有人真的在他们的本地机器上安装字体了吗？这个网站上的很多人可能，设计师肯定会，但是普通大众呢？可能不是。

*   您使用的字体与另一种不同字体同名的可能性有多大？小的。

*   用户安装该特定其他字体的机会有多大？很小。

如果您想确保用户下载并使用您的特定字体，请使用它。

如果您想使用 Windows 字体（可能不允许）并希望它们在 Mac 上可见，那么您就不想使用笑脸，以免每个 Windows 用户下载他们已经拥有的字体（即实际上是一样的）。

如果您想使用名为“Verdana”的自定义字体，您肯定会想要使用笑脸。那个，或者做`font-family`独一无二的……我猜是带着笑脸……但这看起来很乱，所以使用 local 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T15:27:21.233

[使用fontsquirrel 的 WEBFONT GENERATOR](http://www.fontsquirrel.com/tools/webfont-generator)总是可以找到最新的“防弹”方法。

因此，自从写下您的问题以来，`.woff2`已经添加了支持。

任何希望澄清最新方法的人都应该执行以下操作。

上传一个[小字体文件](https://raw.githubusercontent.com/adobe-fonts/adobe-blank/master/AdobeBlank.otf)，这将生成一个 zip 文件，其中您的字体转换为所有格式，但更重要的是它还包含一个带有“防弹”方法的 CSS 文件。

目前看起来像这样。

```
@font-face {
    font-family: 'font-name';
    src: url('fontawesome-webfont-webfont.eot');
    src: url('fontawesome-webfont-webfont.eot?#iefix') format('embedded-opentype'),
         url('fontawesome-webfont-webfont.woff2') format('woff2'),
         url('fontawesome-webfont-webfont.woff') format('woff'),
         url('fontawesome-webfont-webfont.ttf') format('truetype'),
         url('fontawesome-webfont-webfont.svg#font-name') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

# mysql - 工作台是从脚本文件创建本地数据库所必需的

> ID：12650401
> 
> 赞同：0
> 
> 时间：2012-09-29T06:07:40.510
> 
> 标签：mysql, database, sqlyog

[我从http://dev.mysql.com/downloads/mirror.php?id=409022](http://dev.mysql.com/downloads/mirror.php?id=409022)这个链接下载了用于 win64 位机器的 Mysql 服务器 。然后我安装了服务器。完成安装后我找不到工作台。从脚本文件创建本地数据库是否需要工作台，或者我们可以使用 sqlYog 从脚本文件创建本地数据库。

告诉我哪个是最好的工作台或 SqlYog..？

如果工作台最好，那么告诉我如何为 mysql-5.5.27-winx64 服务器获取工作台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:31:25.103

Sqlyog 是创建数据库或从脚本文件导出的最佳选择。mysql work bench 不用于此目的，它基本上用于对任何现有数据库进行逆向工程并设计数据库。所以使用 SQl yog 从脚本文件创建本地数据库。

mysql工作台不会自带mysql，你可以从[这里](http://dev.mysql.com/downloads/workbench/)下载。它是一个单独的工具

如果您可以设置 LAMP 堆栈，则可以使用[phpmyadmin](http://www.phpmyadmin.net/)，这也是一个很好的工具。

# grails - 内部hasMany类中的grails可搜索插件搜索

> ID：12650402
> 
> 赞同：1
> 
> 时间：2012-09-29T06:07:44.097
> 
> 标签：grails, groovy, grails-searchable

您好，我正在[http://grails.org/Searchable+Plugin+-+Mapping+-+Class+Property+Mapping](http://grails.org/Searchable+Plugin+-+Mapping+-+Class+Property+Mapping)阅读 grails 可搜索插件的标准文档，其中描述了可搜索的引用和组件。

在页面上讨论的经典场景中，如果我有

```
class News {
    static searchable = true
    static hasMany = [comments: Comment]
    String text
} 
```

和

```
class Comment {
    static searchable = true
    String text
} 
```

如果我正在搜索，`News.search("a phrase", params)`我必须在此查询中进行哪些更改，以便将“短语”搜索到新闻和新闻评论中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:42:04.033

尝试配置`comments`为`component`：

```
class News {
  static searchable = true
  static hasMany = [comments: Comment]
  String text
  static searchable = {
    comments component: [prefix:'comment']
  }
} 
```

这允许您通过 搜索特定评论`News.search("componenttext:phrase", params)`，但 afaik`News.search("a phrase", params)`也会搜索评论。

顺便说一句：你已经发现卢克了吗？[http://code.google.com/p/luke/](http://code.google.com/p/luke/)这个工具会在你使用 lucene 索引时帮助你很多。例如，它向您展示了 lucene 如何看待您的 grails 域类。

# mysql - 在 SQL 语句中发出以获取 3 个值的组合的值

> ID：12650406
> 
> 赞同：2
> 
> 时间：2012-09-29T06:08:04.347
> 
> 标签：mysql, sql, jsp

Prod_Oth_Id ||| 产品代码 ||||| 产品详情 |||||||||| 产品价值 |

```
 1     | BR25MAON  | 4            | 9          |
    2     | BR25MAON  | 5            | 10         |
    3     | BR25MAON  | 6            | 11         |
    4     | BR25MABO  | 4            | 9          |
     5    | BR25MABO  | 5            | 10         |
     6    | BR25MABO  | 6            | 17         |
     7    | BR25GLON  | 4            | 9          |
        8 | BR25GLON  | 5            | 16         |
        9 | BR25GLON  | 6            | 11         |
       10 | BR25GLBO  | 4            | 9          |
       11 | BR25GLBO  | 5            | 16         |
       12 | BR25GLBO  | 6            | 17         | 
```

我有 3 个 prod_value 的组合，例如 9、10、11，我想检索上述组合的产品代码，即 BR25MAON

例如，如果我得到 9、16、17，那么我必须检索此组合的产品代码，即 BR25GLBO

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:34:46.953

您可以计算匹配和不匹配，如果有 3 个 Prod_Values 要匹配，则应该有 3 个匹配和 0 个不匹配；

```
# 9, 10, 11

SELECT DISTINCT a.Prod_Code FROM MyTable a GROUP BY Prod_Code
HAVING SUM(a.Prod_Value NOT IN (9,10,11)) = 0               # <-- No non matches
   AND SUM(a.Prod_Value     IN (9,10,11)) = 3;              # <-- 3 matches 
```

例如，如果您正在匹配`(1,2)`，则查询将更改为；

```
# 1, 2

SELECT DISTINCT a.Prod_Code FROM MyTable a GROUP BY Prod_Code
HAVING SUM(a.Prod_Value NOT IN (1,2)) = 0                   # <-- No non matches
   AND SUM(a.Prod_Value     IN (1,2)) = 2;                  # <-- 2 matches 
```

[SQLfiddle 演示](http://sqlfiddle.com/#!2/3242a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:18:26.020

如果你想获得不同产品价值的产品代码，那么只需使用这个：

```
Select Distinct Prod_Code From TableName Where Prod_Value IN (9,10,11) 
```

它只会返回 BR25GLBO

如果您需要其他东西，请详细说明您的要求。

# java - Java：如何在字符串列表中找到最可能的字符串？

> ID：12650409
> 
> 赞同：6
> 
> 时间：2012-09-29T06:08:28.463
> 
> 标签：java, string, soundex

我有一个 Java 字符串列表，其中包含一个拼写不同的人的名字（并非完全不同）。例如，John 可能拼写为 Jon、Jawn、Jaun 等。我应该如何检索此列表中最合适的字符串。如果有人能建议一种在这种情况下如何使用 Soundex 的方法，那将有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T06:42:33.033

有一个用于匹配近似字符串的 jar 文件。

通过链接并下载 frej.jar

[http://sourceforge.net/projects/frej/files/](http://sourceforge.net/projects/frej/files/)

这个jar文件中有一种方法

```
Fuzzy.equals("jon","john"); 
```

它将在这种类型的近似字符串中返回 true。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T06:17:58.547

您已经使用了[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)算法，有几种策略可以实现这一点。Blur 是基于 Levenshtein 词距离的近似字符串匹配的基于 Trie 的 Java 实现。

还有另一种策略来实现其称为boyer-moore 近似字符串匹配算法。

使用该算法和 Levenshtein 词距离解决这些问题的常用方法是将输入与可能的输出进行比较，然后选择与所需输出的距离最小的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-12T19:28:58.320

本文提供了关于近似字符串匹配的基于 Trie 的 Java 实现的详细解释和完整代码： [Fast and Easy Levenshtein distance using a Trie](http://stevehanov.ca/blog/index.php?id=114)。

# 搜索函数返回小于给定的所有单词的列表

# 与目标词的最大距离

def 搜索（字，最大成本）：

```
# build first row
currentRow = range( len(word) + 1 )

results = []

# recursively search each branch of the trie
for letter in trie.children:
    searchRecursive( trie.children[letter], letter, word, currentRow, 
        results, maxCost )

return results 
```

# 这个递归助手由上面的搜索功能使用。它假设

# previousRow 已经填好了。

def searchRecursive（节点，字母，单词，previousRow，结果，maxCost）：

```
columns = len( word ) + 1
currentRow = [ previousRow[0] + 1 ]

# Build one row for the letter, with a column for each letter in the target
# word, plus one for the empty string at column 0
for column in xrange( 1, columns ):

    insertCost = currentRow[column - 1] + 1
    deleteCost = previousRow[column] + 1

    if word[column - 1] != letter:
        replaceCost = previousRow[ column - 1 ] + 1
    else:                
        replaceCost = previousRow[ column - 1 ]

    currentRow.append( min( insertCost, deleteCost, replaceCost ) )

# if the last entry in the row indicates the optimal cost is less than the
# maximum cost, and there is a word in this trie node, then add it.
if currentRow[-1] <= maxCost and node.word != None:
    results.append( (node.word, currentRow[-1] ) )

# if any entries in the row are less than the maximum cost, then 
# recursively search each branch of the trie
if min( currentRow ) <= maxCost:
    for letter in node.children:
        searchRecursive( node.children[letter], letter, word, currentRow, 
            results, maxCost ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T06:35:03.050

如果您在索引文本时使用[语音过滤器工厂，](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PhoneticFilterFactory) [Solr](http://lucene.apache.org/solr/)可以做到这一点。

搜索是solr的专长。并搜索发音相似的单词。但是，如果您只想要这个，而不想要 solr 提供的其他功能，那么您可以使用[此处](http://lucene.apache.org/solr/versioncontrol.html)提供的源代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-27T15:47:08.287

有很多理论和方法来**估计**2 个字符串的匹配

给出一个直截了当的真/假结果似乎很奇怪，因为“jon”真的不等于“john”，它很接近但不匹配

实现了相当多的估计方法的一项伟大的学术工作被称为“SecondString.jar” -[站点链接](http://secondstring.sourceforge.net/)

大多数实现的方法都会给匹配打一些分数，这个分数取决于使用的方法

示例：让我们将“编辑距离”定义为 str1 中到达 str2 所需的字符更改数，在这种情况下，“jon”->“john”自然需要 1 个字符，对于这种方法，分数越低越好

# java - Servlet 链接 - 简单示例

> ID：12650410
> 
> 赞同：1
> 
> 时间：2012-09-29T06:08:29.710
> 
> 标签：java, servlets, requestdispatcher

我在尝试的一个简单的 servlet 链接示例中看到了一个奇怪的问题：

小服务程序 1：

```
public class gatewayservlet extends HttpServlet {

  public void doPost(HttpServletRequest request , 
    HttpServletResponse response)
    throws ServletException , IOException {
        doGet(request,response);
  }

  public void doGet(HttpServletRequest request , 
    HttpServletResponse response)
    throws ServletException , IOException {

    response.setContentType("text/plain");

    PrintWriter out = response.getWriter();

    name = request.getParameter("name");

    RequestDispatcher rd = getServletConfig().getServletContext().getRequestDispatcher("/justServlets/secondservlet");

    if(name!=null) {
      request.setAttribute("UserName",name);
      rd.forward(request , response);
      // Forward the value to another Secondservlet
    } else {
      response.sendError(response.SC_BAD_REQUEST, 
        "UserName Required");
    }

  }

} 
```

小服务程序 2：

```
public class secondservlet extends HttpServlet {

  public void doGet(HttpServletRequest request , 
    HttpServletResponse response)
    throws ServletException , IOException {

    response.setContentType("text/plain");

    PrintWriter out = response.getWriter();

    String UserName = (String)request.getAttribute("UserName");

    out.println("The UserName is "+ UserName);

  }

  public void doPost(HttpServletRequest request , 
    HttpServletResponse response)
    throws ServletException , IOException {
        doGet(request,response);
  }

} 
```

和调用形式：

```
<html>
<body>
<FORM ACTION="/justServlets/gateway" METHOD=POST>
<P>Please Fill the Registration Form</p><br>
Enter Your Name<input type="text" name="name"><br>
<input type="submit" value="send">
</FORM>
</body>
</html> 
```

'POST' 给出 405（不允许的方法）错误。但是，调用第一个 servlet 为 ..../justServlets/gateway?name=Socrates 有效。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:51:21.310

假设这`/justServlets`是您的 webapp 的上下文路径，转发的代码应该使用`/secondservlet`而不是`/justServlets/secondservlet`，因为正如[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRequestDispatcher%28java.lang.String%29)所说：

> 路径名必须以 / 开头，并被解释为**相对于当前上下文根**。

（强调我的）

实际上，您正在转发到`/justServlets/justServlets/secondservlet`，它可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:44:51.967

这通常发生在您要转发的 servlet 缺少与最初处理的方法相同的方法（在本例中为 POST）的处理程序时。确保 servlet2 确实处理 doPost 并且您确实正在转发到 servlet2。

# iphone - iPhone 应用程序 - 相机实现中的卡片角检测

> ID：12650415
> 
> 赞同：0
> 
> 时间：2012-09-29T06:10:16.557
> 
> 标签：iphone, ios, opencv, camera, detection

我正在尝试实现卡片扫描仪来扫描 iphone 应用程序中许可证图像的正面和背面。我想实现与 Lemon App ( [www.lemon.com](http://www.lemon.com/) ) 完全相同的逻辑，其中只要您将卡片放在 4 个角落内，相机就会自动捕捉图片并在后台进行一些处理。关于如何实现相同的任何想法？

任何开源库或 API 可用于快速实现这一点？

# iphone - 从库中获取图像并扫描二维码

> ID：12650417
> 
> 赞同：2
> 
> 时间：2012-09-29T06:10:38.337
> 
> 标签：iphone, qr-code, zbar-sdk

我正在使用 QR 码 sdk 扫描 QR 码，但问题是它在相机上而不是在模拟器上工作。我在网上尝试了很多，但没有找到任何完美的工作解决方案。任何人都可以为此指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:42:24.853

**创建阅读器。**

这就像创建一个新的 ZBarReaderController 一样简单：

> ZBarReaderController *reader = [ZBarReaderController new];

**设置一个委托来接收结果。**

委托应实现 ZBarReaderDelegate 协议，该协议继承自 UIImagePickerControllerDelegate：

> reader.readerDelegate = self;

**配置阅读器。**

您将需要适当地设置 sourceType。除了阅读器本身的属性之外，您还可以通过扫描仪属性配置解码器：

> if([ZBarReaderController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera]) reader.sourceType = UIImagePickerControllerSourceTypeCamera; [reader.scanner setSymbology: ZBAR_I25 config: ZBAR_CFG_ENABLE to: 0];

按照这些[步骤](http://zbar.sourceforge.net/iphone/sdkdoc/picker.html)，永远不要忘记接受正确的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:27:24.583

如果您在 ZBar 中遇到问题。

然后就可以使用 ZXindWidget 进行扫描了。

这是您可以参考的链接

[关联](http://yannickloriot.com/2011/04/how-to-install-zxing-in-xcode-4/comment-page-2/#comment-1063)

# jquery - 上传后未调整大小的Blueimp Jquery文件上传缩略图

> ID：12650421
> 
> 赞同：0
> 
> 时间：2012-09-29T06:11:17.133
> 
> 标签：jquery, asp.net-mvc, blueimp, jquery-file-upload

我正在尝试在我的 MVC4 项目中使用[Blueimp Jquery 文件上传。](http://blueimp.github.com/jQuery-File-Upload/)我已经实现了一切并且它正在工作。我使用了[MaxPavlov 的 MVC 示例](https://github.com/maxpavlov/jQuery-File-Upload.MVC3)。

上传工作 100%，我唯一的问题是上传后显示的缩略图没有正确调整大小。我可能只会错过我需要包含的脚本。

以下是按我在页面中包含它们的顺序排列的脚本：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/bootstrap")
@RenderSection("scripts", required: false)
<script src="~/Scripts/FileUpload/vendor/jquery.ui.widget.js" type="text/javascript"></script>

<script src="~/Scripts/FileUpload/tmpl.min.js"></script>
<script src="~/Scripts/FileUpload/load-image.min.js" type="text/javascript"></script>
<script src="~/Scripts/FileUpload/canvas-to-blob.min.js" type="text/javascript"></script>
<script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
<script src="~/Scripts/FileUpload/jquery.iframe-transport.js"></script>

<script src="~/Scripts/FileUpload/jquery.fileupload.js"></script>
<script src="~/Scripts/FileUpload/jquery.fileupload-fp.js" type="text/javascript"></script>
<script src="~/Scripts/FileUpload/jquery.fileupload-ui.js"></script>

<script src="~/Scripts/FileUpload/locale.js"></script> 
```

我还复制了 MVC 示例中的模板。

当我在运行应用程序时从我的计算机中选择图像时，缩略图的大小是正确的，然后我单击“上传”文件已上传，之后显示时，我的图像与磁盘上的图像大小相同. 我尝试`.preview`在 css 中设置类，这在 chrome/firefox 中有效，但在 IE 中无效。

# php - 我如何将 $_get 与 build_categories_options 函数一起使用

> ID：12650424
> 
> 赞同：-1
> 
> 时间：2012-09-29T06:12:10.237
> 
> 标签：php, mysql, function, get, categories

现在我已经创建类别并且创建帖子成功但是当我编辑我的帖子时我有问题如果编辑我的帖子我会丢失我的类别..我需要在表格中获取我的类别并且我可以更改它

```
<?php

$sql = "SELECT catid, catname, parentid FROM categories";
$res = mysql_query($sql);

// initialize $categories to make sure it is an array
$categories = array();
while ($row = mysql_fetch_assoc($res)) {
$parent = intval($row['parentid']);
$categories[$parent][] = $row;
    }
    ?>
    <table border="0" cellpadding="10" cellspacing="0">
    <tr>
    <td valign="top">

    <?php
    $category_string = "";
    function build_categories_options($parent, $categories, $level) {
        global $category_string;
        if (isset($categories[$parent]) && count($categories[$parent])) {
            $level .= " - ";
            foreach ($categories[$parent] as $category) {
                $opt_value = substr($level.$category['catname'],3);
                $category_string .= '<option value=""></option><option value="'.$category['catid'].'">'.$opt_value.'</option>';
                build_categories_options($category['catid'], $categories, $level);
            }
            $level = substr($level, -3);
        }
        return $category_string;
    }
    $category_options = build_categories_options(0, $categories, '');
    $category_options = '<select class="chosen" name="categories" id="categories">'.$category_options.'</select>';
    echo $category_options; 
    ?>
</td> 
```

我的问题位于第 25 行

```
$category_string .= '<option value=""></option><option value="'.$category['catid'].'">'.$opt_value.'</option>'; 
```

我需要首先获得我的类别并显示其余结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:41:01.840

对于每个类别，您将显示两个选项，一个空选项和一个带有类别信息的选项：

```
$category_string .= '<option value=""></option><option value="'.$category['catid'].'">'.$opt_value.'</option>'; 
```

这是在你的循环内。因此，每次循环迭代时，都会创建**两个选项。**一个空白的一个和一个与您的类别。我打赌你只**需要**在`<select>`. 我想这就是你想要的：

```
// notice we are initializing $category_string with an empty option here
$category_string = '<option value=""></option>';

function build_categories_options($parent, $categories, $level) {
    global $category_string;
    if (isset($categories[$parent]) && count($categories[$parent])) {
        $level .= " - ";
        foreach ($categories[$parent] as $category) {
            $opt_value = substr($level.$category['catname'],3);

            // removed extra empty category and put it in $category_string initialization
            $category_string .= '<option value="'.$category['catid'].'">'.$opt_value.'</option>';
            build_categories_options($category['catid'], $categories, $level);
        }
        $level = substr($level, -3);
    }
    return $category_string;
} 
```

此外，正如@MoeTsao 在评论中提到的那样，尽量避免使用[`mysql_*`](http://www.php.net/manual/en/function.mysql-query.php)函数，因为 PHP 不鼓励使用它们。相反，使用[`mysqli_*`](http://www.php.net/manual/en/mysqli.query.php)or [PDO](http://www.php.net/manual/en/pdo.query.php)。

# python - 在python中从服务器传递数据

> ID：12650429
> 
> 赞同：1
> 
> 时间：2012-09-29T06:12:52.300
> 
> 标签：python, sockets

我需要知道如何在这种情况下将数据传递给 valueList 一次，然后等待几秒钟，然后再次将数据传递给 valueList。我不希望数据被连续传递，而是我希望它被传递一次，然后几秒钟，然后再传递几秒钟。

```
screenw = 0
screenh = 0
while 1:
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == "eom" and valueList[0] == "start")):
        #print "continuing.."
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3]) 
```

# java - 为什么图像不显示在 JSP 页面上

> ID：12650434
> 
> 赞同：3
> 
> 时间：2012-09-29T06:13:10.370
> 
> 标签：java, image, jsp, servlets

我对以下情况有点迷茫：

1.  用户上传图片 - upload.jsp (multipart/form-data)
2.  servlet 完成所有脏活（保存图像、获取名称、保存名称、重定向到 display.jsp）
3.  在 display.jsp 上，应该显示刚刚上传的图像

不幸的是 display.jsp 页面是空的。当我在 Firefox 下查看源页面时，一切似乎都很好，提供了指向图像的有效链接。

```
<img src="/UploadTest/avatar/55_445194458350473498.png" border=0 width="48px" height="48px"/> 
```

但在媒体信息下，我可以看到一些奇怪的信息：

```
Location:   http://localhost:8084/UploadTest/avatar/55_445194458350473498.png
Type:       text/html
Size:       Unknown (not cached)
Dimensions: 0px x 0px (scaled to 0px x 16px) 
```

下面是用于上传、处理和显示图片的代码：

**上传.jsp**

```
<form action="Upload" method="post" enctype="multipart/form-data">
  <label for="file">File:</label>
  <input type="file" id="file" name="file">
  <input type="submit" value="submit">
</form> 
```

**上传.java**

（MultipartMap servlet 属于 BalusC，[http:](http://balusc.blogspot.com.au/2009/12/uploading-files-in-servlet-30.html) //balusc.blogspot.com.au/2009/12/uploading-files-in-servlet-30.html ）

```
package test;

import java.io.File;
import java.io.IOException;
import java.util.Arrays;

import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import test.MultipartMap;

@WebServlet(urlPatterns = { "/Users/Thomas/NetBeansProjects/UploadTest/web/Upload" })
@MultipartConfig(location = "/Users/Thomas/NetBeansProjects/UploadTest/web/avatar", maxFileSize = 10485760L) // 10MB.
public class UploadServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {  
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException
    {

    MultipartMap map = new MultipartMap(request, this);

    File file = map.getFile("file");

    String filename = file.getName();

    HttpSession session = request.getSession();
    session.setAttribute("filename", filename);

    request.getRequestDispatcher("/display.jsp").forward(request, response);
    }
} 
```

**显示.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
  </head>
  <body>
      <div>
          <img src="${pageContext.request.contextPath}/avatar/${filename}" border=0 width="48px" height="48px"/>
      <div>
  </body>
</html> 
```

如果我在 display.jsp 中将 ${filename} 替换为之前上传的特定图像的静态名称，则显示没有问题，所以我认为图像已正确处理，只是前端缺少某些东西？

顺便说一句：当调试器处于活动状态时，一切正常，但当关闭时问题又回来了。

干杯，

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:25:21.083

很好的解释。我解决了你的问题并创建了它的样本。我有和你一样的问题。解决方案是在 display.jsp 文件中放入以下行：

```
<%@page isELIgnored="false" %> 
```

我认为 EL 和 page 的问题无法正确评估。下面是代码：upload.jsp 和upload.java 和你的一样。

显示.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page isELIgnored="false" %>
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
  </head>
  <body>
      <div>
          <img src="${pageContext.request.contextPath}/images/${filename}" border=0 width="48px" height="48px" alt="Image Not found"/>
      <div>
  </body>
</html> 
```

希望这也对你有用

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T06:23:21.837

您可以在图片查看器中查看上传的图像吗？

文件大小是否正确且数据未损坏？

您的服务器是否在端口 8084 上运行？

我想知道为什么当它应该是 image/png 时你会输入 text/html。

# c# - 附加为基于服务的数据库时如何将数据保存到数据库中？

> ID：12650438
> 
> 赞同：0
> 
> 时间：2012-09-29T06:13:50.417
> 
> 标签：c#, sql-server, database

我将基于服务的数据库附加到我的 Windows 应用程序并使用以下代码保存数据，它工作正常，但是当我关闭应用程序并再次打开时，我保存的数据被自动清除。

如何永久保存数据...

```
string c = Application.StartupPath + "\\Stock.mdf";
SqlConnection con = new SqlConnection(@"AttachDbFilename='"+c+"';Integrated Security=True;Connect Timeout=30;User Instance=True");

con.Open();

SqlCommand cmd = new SqlCommand("Insert into Codedetails values('TF','" + txt_productcode.Text + "','" + txt_productname.Text + "','" + txt_brandcode.Text + "','" + txt_brandname.Text + "')", con);
cmd.ExecuteNonQuery();
con.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:16:35.843

首先，最好使用初始化目录而不是附加文件（常见做法）其次使用 using 来处理您的资源第三，最好在带有参数的存储过程中进行 sql 查询（数据库中的 sql 和 vs2010 中的 C# ;- )

```
string c = Application.StartupPath + "\\Stock.mdf";
string connectionString = @"AttachDbFilename='"+c+"';Integrated Security=True;Connect Timeout=30;User Instance=True";
using (SqlConnection connection = new SqlConnection(connectionString))
    {
        con.Open();
        using (SqlCommand command = new SqlCommand(Insert into Codedetails values('TF','@productcode','@productname','@brandcode','@brandname'), con))
            {       
        command.Parameters.Add(new SqlParameter("productcode", txt_productcode.Text));
        command.Parameters.Add(new SqlParameter("productname", txt_productcode.Text));
        command.Parameters.Add(new SqlParameter("brandcode", txt_brandcode.Text));
        command.Parameters.Add(new SqlParameter("brandname", txt_brandname.Text));
        command.ExecuteNonQuery();
        }
    } 
```

# c# - Asp.Net MVC4 显示复选框列表

> ID：12650441
> 
> 赞同：10
> 
> 时间：2012-09-29T06:15:02.767
> 
> 标签：c#, asp.net, asp.net-mvc

我进行了很多搜索，只花了 3 天时间来搜索和尝试不同的技术（在 stackoverflow 等上），但我没有找到在 asp.net mvc 中实现 checkboxlist 的解决方案。最后我将我的问题发布到stackoverflow；
所以，我的模型看起来像这样；

![我的模型的多对多关系（1个类别可能包含多个项目，一个项目可能属于多个类别）rel](../Images/35a4149375a6b76515d1cf86393994ff.png)

我的模型的多对多关系（1个类别可能包含许多项目，一个项目可能属于许多类别）
**我的控制器；**

```
 [HttpGet]
    [Authorize(Roles = "Admin")]
    public ActionResult ProjectAdd()
    {
        return View();
    } 
```

**我的观点;**

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Add New Project</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjectHeading)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjectHeading)
            @Html.ValidationMessageFor(model => model.ProjectHeading)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjecctUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjecctUrl)
            @Html.ValidationMessageFor(model => model.ProjecctUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjectLongDescription)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjectLongDescription)
            @Html.ValidationMessageFor(model => model.ProjectLongDescription)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.PromoFront)
        </div>
        @Html.EditorFor(model => model.PromoFront)
        @Html.ValidationMessageFor(model => model.PromoFront)

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjectThubmnail)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjectThubmnail)
            @Html.ValidationMessageFor(model => model.ProjectThubmnail)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjectImage)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjectImage)
            @Html.ValidationMessageFor(model => model.ProjectImage)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.CategoryId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CategoryId)
            @Html.ValidationMessageFor(model => model.CategoryId)
        </div>

        <p>
            <input type="submit" value="Create" class="submit" />
        </p> 
```

所以，我的问题是**如何在我的视图中显示类别的复选框列表？**
**如何从该复选框列表中获取选定的值？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T06:30:31.823

您需要有一个**包含所有类别列表**的对象，例如，您可以这样做：

```
[HttpGet]
[Authorize(Roles = "Admin")]
public ActionResult ProjectAdd()
{
    // Get all categories and pass it into the View
    ViewBag.Categories = db.ListAllCategories();

    return View();
} 
```

在您的视图顶部

```
@model Database.Project
@{
   // retrieve the list of Categories
   List<Database.Category> categories = ViewBag.Categories;
} 
```

然后替换这个

```
 <div class="editor-label">
        @Html.LabelFor(model => model.CategoryId)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.CategoryId)
        @Html.ValidationMessageFor(model => model.CategoryId)
    </div> 
```

为了这

```
 <div class="editor-label">
        <label for="categories">Categories</label>
    </div>
    <div class="editor-field">
        @foreach(var c in categories) {

        <label class="checkbox">
            <input type="checkbox" name="categories" value="@c.CategoryId"> @c.CategoryName
        </label>

        }
    </div> 
```

回到你的控制器

```
[HttpPost]
[Authorize(Roles = "Admin")]
public ActionResult ProjectAdd(Database.Project model, int[] categories)
{
    if(ModelState.IsValid) {

        // fill up categories
        db.InsertAndSaveProject(model, categories);

    }

    ...

    return redirectToView("ProjectAdd");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-27T01:02:40.697

上面@balexandre 建议的答案效果很好。但是，我为 CheckBoxList 使用了以下 HTML 扩展。

[1\. ASP.net MVC4中的CheckboxList](http://ben.onfabrik.com/posts/checkbox-lists-in-aspnet-mvc)
[2\. 源码：HTML Extension Helper方法（Github）](https://github.com/benfoster/Fabrik.Common/blob/master/src/Fabrik.Common.Web/HtmlHelperExtensions.cs)

使用这种辅助方法的主要优点是代码简洁且可读性更好。例如

```
@Html.CheckBoxListFor(model => model.SelectedItems, Model.AllItems) 
```

# android - 如何扩展音量控制

> ID：12650446
> 
> 赞同：1
> 
> 时间：2012-09-29T06:16:04.527
> 
> 标签：android, volume

我想扩展音量“控制”。

用我的新“线”扩展添加（也是一个音量滑块）；

我怎样才能做到这一点？

![在此处输入图像描述](../Images/80a01b7225ffb276a063f4856447a3ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:43:46.367

android.view 包中有一个名为 VolumnePanel 的类，它会膨胀 volume_adjust_item.xml 资源。您可以在 /sources/android-/android/view 中找到 VolumePanel.java，在 /platforms/android-/data/res/layout 中找到 volume_adjust_item.xml。

祝你好运。

# android - 打印机 Bixolon 未连接到三星 Galaxy Tab

> ID：12650452
> 
> 赞同：1
> 
> 时间：2012-09-29T06:16:51.223
> 
> 标签：android, printing, bluetooth, connection, bixolon-printer

我正在使用袖珍打印机[Bixolon SPP-R200](http://www.bixolon.com/_eng/download_center/downloadsub.asp?uid=104&p_uid=38)在 Android 中通过蓝牙进行打印。我已经在 HTC（Android 2.3.7）和华硕（Android 4.0.3）上测试了我的应用程序，它们在打印机上运行良好。

但我在连接三星 Galaxy 标签 P3100 和 P5100（使用 Android 4.0.3）时遇到问题。问题是当我使用方法时`connect()`它返回 401 错误意味着：`BXL_ERR_OPEN -> Port connection failure`并且 Android 配对窗口已打开。我再次输入密码，但问题仍然存在，打印机未连接。

我[在这个 SDK 中使用 jar 文件](http://www.4shared.com/zip/mv6jKQrm/bixolonSDK.html)。

有人知道任何解决方案吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:49:43.263

问题出在 SDK 版本上。我有[SDK 版本 1.3.1](http://www.4shared.com/zip/lsLnneKK/BIXOLON_Android_SDK_V131.html)，我向 Bixolon 技术支持 ( **techsupp@bixolon.de** ) 询问，他们向我发送了最新[版本 1.4.9](http://www.4shared.com/zip/SDy72B_E/BIXOLON_Android_SDK_V149.html)并解决了问题。

**更新：**

新版本[1.6.1](http://www.4shared.com/zip/Z6MCJ6Dzba/BIXOLON_Android_SDK_V161.html)

# asp.net - 当从子类引发事件时创建通用事件处理程序引发方法

> ID：12650453
> 
> 赞同：1
> 
> 时间：2012-09-29T06:16:58.310
> 
> 标签：asp.net, events, generics, event-handling

我的事件类中有一个通用的事件引发方法，可用于所有事件

```
 protected virtual void RaiseEvent<T>(EventHandler<T> eventToRaise, T eventArgs) where T : EventArgs
    {
        if (eventToRaise != null)
        {
            eventToRaise(this, eventArgs);
        }
    } 
```

但是当我尝试从子类调用此方法时，我收到一个错误，即事件只能在 += 或 -= 表达式的左侧使用。有什么办法可以使这项工作？

更新：一个想法是使用枚举。首先定义一个事件名称的枚举。然后添加一个字典，将每个枚举值映射到其对应的事件。最后在方法中获取事件并根据参数是什么来引发它。但我不确定字典应该如何？

```
 public enum Events {Insert , Update , Delete};

dictionary<Events,EventHandler<T>> EventsDic = new dictionary<Events,EventHandler<T>>;

EventsDic.Add(Events.Insert,this.Insert); 
```

这个对吗 ？

# r - Foreach 使用 %dopar% 抛出错误，但使用 %do% 成功执行

> ID：12650457
> 
> 赞同：0
> 
> 时间：2012-09-29T06:17:41.320
> 
> 标签：r, parallel-processing

我正在尝试使用`foreach`and将以下代码转换为并行`%dopar%`。

```
library(doSNOW)
library(foreach)
cl<- makeCluster(4, type = "SOCK")
registerDoSNOW(cl)

min_subid <- c()
max_subid <- c()
p_typ <- c()
p_nm <- c()
st_tm<-c()
end_tm <- c()
supp <- c()
chart_type <- c()

foreach(j =1:noOfPhases)    %dopar%
{
  start_time    <-phases[j, colnames(phases)=="StartTime"]
  end_time      <-phases[j, colnames(phases)=="StopTime"]
  phase_type    <-phases[j, colnames(phases)=="Phase_Type_Id"]
  phase_name    <-phases[j, colnames(phases)=="Phase_Name"]
  suppress      <-phases[j, colnames(phases)=="Suppression_Time"]
  chart_typ     <-phases[j, colnames(phases)=="chartType"]

  conft<-(masterData$Time.Subgroup>=start_time & masterData$Time.Subgroup<=end_time)

  masterData[which(conft), colnames(masterData)=="Phase_Type"]<-phase_type
  masterData[which(conft), colnames(masterData)=="Phase_Name"]<-phase_name

  min_subid <- rbind(min_subid, min(which(conft)))
  max_subid <- rbind(max_subid, max(which(conft)))
  p_typ     <- rbind( p_typ, masterData$Phase_Type[min(which(conft))])
  p_nm      <- rbind( p_nm, masterData$Phase_Name[min(which(conft))])
  st_tm     <- rbind( st_tm, as.character(start_time))
  end_tm    <- rbind( end_tm, as.character(end_time))
  supp      <- rbind(supp,as.character(suppress))
  chart_type <- rbind(chart_type,as.character(chart_typ))

  phase_info <- data.frame(Subgrp_No_Start=min_subid, Subgrp_No_End=max_subid, Phase_Type=p_typ, 
                           Phase_Name=p_nm, Start_Time=st_tm, Stop_Time=end_tm,
                                             Suppression_Time=supp,ChartType=chart_type) 
}

 phase_output<-merge(phase_info, phases, by.x=c("Start_Time",
   "Stop_Time","ChartType"), by.y=c("StartTime", "StopTime","chartType")) 
```

* * *

上面的代码在`%do%`包含而不是`%dopar%`. 任何人都可以帮助我理解为什么在并行运行（`%dopar%`）并在顺序（`%do%`）上成功运行时出现以下错误

```
Error in merge(phase_info, phases, by.x = c("Start_Time", "Stop_Time",  : 
  object 'phase_info' not found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T07:50:08.133

解决方案非常简单，但我首先解释当您执行代码以解释错误时发生的情况。

在您的`foreach`块中发生的情况是，`phase_info`为 的每个值创建一个数据框 ( )，`j`并将它们一起返回到列表中。但是，由于您的分配`phase_info <- data.frame(...)`位于内部`foreach`而不是外部，因此该列表不会存储在任何地方并被丢弃。造成混淆的原因是，在使用时，您在*主节点*`%do%`上按顺序创建所有数据帧，而在使用时，这些帧是在*工作节点*上并行创建的。如果您使用了因为在其工作区中不存在，则在主节点上执行以下命令会导致错误。还要注意，当像上面那样使用时，每次迭代*`%dopar%`*`merge``%dopar%``phase_info``%do%``foreach`覆盖之前的结果（*即*你只得到最后一次迭代的结果）。**

 **这个小改动修复了它：

```
phase_info <- foreach(...) %dopar% {
    ...

    data.frame(Subgrp_No_Start=min_subid, Subgrp_No_End=max_subid, Phase_Type=p_typ, 
                           Phase_Name=p_nm, Start_Time=st_tm, Stop_Time=end_tm,
                                             Suppression_Time=supp,ChartType=chart_type)
    # No need to give it a name as it will be returned and the name forgotten
}
phase_output <- merge(phase_info, ...) 
```

正如我上面提到的，`phase_info`现在将是一个列表，其中每个元素都是一个数据框。我现在只是在猜测，但您可能想按元素执行`merge`，如下所示：

```
phase_output <- lapply(phase_info, merge, phases, by.x=c("Start_Time",
     "Stop_Time","ChartType"), by.y=c("StartTime", "StopTime","chartType")) 
```**

# ios - 加载 xib 时无法识别的选择器

> ID：12650459
> 
> 赞同：0
> 
> 时间：2012-09-29T06:18:06.343
> 
> 标签：ios, ios4, uigesturerecognizer, ios6

> **可能重复：**
> [iOS4.3 模拟器中的 iOS5 稳定应用程序崩溃](https://stackoverflow.com/questions/9019420/ios5-stable-app-crashing-in-ios4-3-simulator)

我有一个带有 xib 的 UIViewController，带有一个 View 和一个 UISwipeGestureRecognizer。当我在 iOS 6 模拟器中运行时，一切都按预期工作。

当我在 iOS 4.3 模拟器中运行并尝试访问导致 xib 首次加载的 viewController.view 时，我收到以下错误消息：

```
-[UISwipeGestureRecognizer initWithCoder:]: unrecognized selector sent to instance 0x7385340 
```

切换回iOS6，加载没有问题。iOS 4.3，崩溃。

这是我在该 xib 中创建的手势识别器的 IBOutlet 定义：

```
@property (strong, nonatomic) IBOutlet UISwipeGestureRecognizer *gestureRecognizerSwipeClosed; 
```

![在此处输入图像描述](../Images/642592b028687632d2daaeb0cd1e4ec2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:34:04.593

这已经回答了：[这里](https://stackoverflow.com/questions/9019420/ios5-stable-app-crashing-in-ios4-3-simulator)。
当 UIGestureRecognizers 添加到 Interface Builder 时，我不知道确切的版本。但似乎 iOS 4.3 不支持它。
从 nib 加载的任何对象都使用`initWithCoder:`. 所以在 iOS 4.3 中没有这样的方法来初始化手势。你可以做的是以编程方式创建手势，这将在 iOS 4.3 中工作。

# android - 从服务android获取窗口显示

> ID：12650463
> 
> 赞同：7
> 
> 时间：2012-09-29T06:18:31.553
> 
> 标签：android, android-service, android-view, android-windowmanager

我正在尝试从服务中显示一个窗口，但不知道如何执行此操作

这是我的代码-

服务`onStart`方式

```
LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.main1, null);
    WindowManager manager = (WindowManager) getSystemService(WINDOW_SERVICE);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams();
    params.type = 2002;
    params.format = 1;
    params.flags = 40;
    params.height = WindowManager.LayoutParams.FILL_PARENT;
    params.width = WindowManager.LayoutParams.FILL_PARENT;
    manager.addView(view, params);

     /** just a timer *****/
    textView = (TextView) view.findViewById(R.id.textView1);
    final Timer t = new Timer("hello", true);
    t.schedule(new TimerTask() {

    @Override
    public void run() {
        textView.post(new Runnable() {

        public void run() {
            seconds++;
            if (seconds == 60) {
            seconds = 0;
            minute++;
            }
            if (minute == 60) {
            minute = 0;
            hour++;
            }
            textView.setText(""
                + (hour > 9 ? hour : ("0" + hour)) + " : "
                + (minute > 9 ? minute : ("0" + minute))
                + " : "
                + (seconds > 9 ? seconds : "0" + seconds));

        }
        });

    }
    }, 1000, 1000);

    view.findViewById(R.id.stop).setOnClickListener(
        new OnClickListener() {

        public void onClick(View v) {
            t.cancel();
        }
        }); 
```

但什么都没有出现。如何在服务窗口中显示我的视图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T06:58:19.663

Wooohoooo 得到它的工作诀窍只是使用系统窗口服务

```
 WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.FILL_PARENT, 150,
                WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                        | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
                PixelFormat.TRANSLUCENT);
        params.gravity = Gravity.CENTER; 
```

添加权限

```
 <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T07:46:19.217

密钥处理也可以在服务中实现！！一般来说，如果 WindowManager 用于显示服务中的视图，它大部分时间都不会占用任何关键事件！

但是您可以使用“dispatchKeyEvent”或任何其他键处理方法（onKeyUp、onKeyDown 等）创建一个接口，并将它们实现为服务。

快乐编码。

# php - 我在我的 php 应用程序中包含一个 phar 文件（goutte.phar）。当我尝试点击 url 时，我得到 Connection to the server was reset 错误

> ID：12650464
> 
> 赞同：0
> 
> 时间：2012-09-29T06:18:55.643
> 
> 标签：php, yii, phar, goutte

我需要更改任何特定设置`php.ini`以允许服务器包含文件吗？

```
require_once dirname(dirname(__FILE__)).'/unleashapi/protected/extensions/goutte.phar'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:21:44.050

您可以设置`php.ini` `auto_prepend_file`：

```
auto_prepend_file="/custom/path/unleashapi/protected/extensions/goutte.phar" 
```

确保 Apache 有权访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:21:06.423

如果您的服务器使用[suhosin](http://www.hardened-php.net/suhosin/)（通常是 Debian 和所有基于 Debian 的发行版），您应该将 : 添加`suhosin.executor.include.whitelist="phar"`到您的 php.ini

# c# - HTML 文本框将 int 数据字段的默认值显示为 0

> ID：12650466
> 
> 赞同：6
> 
> 时间：2012-09-29T06:19:08.420
> 
> 标签：c#, html, asp.net-mvc

我有一个包含 int 数据字段的文本框。页面加载时，默认显示 0。以下是显示文本框的代码：

```
<%:Html.TextBoxFor(model => model.Ssn, htmlAttributes: new { @class = "txtBox txtBoxMediumSmall" })%> 
```

其中 model.Ssn 是一个**int**。
为什么不是空白？应该怎么做才能使它空白？
如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T08:06:21.533

你可以这样做

```
public class MyModel
{
   //Nullable integer
   public int? Ssn {get; set;}  //this should be null by default

   public int SSN {get; set; } //this should be 0 by default

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T06:30:29.137

由于 bittech poinetd out int 是结构并且没有“空”值 - 0 是默认值，但完全有效的值。

如果您需要区分“无价值”与“默认值”，您可以尝试使用`int?`( )。`Nullable<int>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T00:52:57.560

我会这样做-

```
@Html.TextBoxFor(model => model.Ssn, new { @Value = (@Model.Ssn == 0) ? "" : @Model.Ssn.ToString()}) 
```

# c - sprintf 正在输出一些奇怪的数据

> ID：12650470
> 
> 赞同：2
> 
> 时间：2012-09-29T06:21:00.797
> 
> 标签：c, embedded, printf, microchip, c18

我正在从事一个嵌入式项目，该项目涉及将结构读/写到 EEPROM 中。我正在使用 sprintf 来轻松显示一些调试信息。

由于某种原因，此代码存在两个问题。首先; sprintf 正在打印一个非常奇怪的输出。当我打印 'addr++' 时，它将遵循一个没有意义的模式 '0, 1, 2, 3, 4, 32, ...'。

```
void ee_read(char * buf, unsigned int addr, unsigned int len) {
    unsigned int i;

    sprintf(bf1, "Starting EEPROM read of %u bytes.\r\n", len); // Debug output
    debugr(bf1);

    IdleI2C1();
    StartI2C1();
    WriteI2C1(EE_ADDR | EE_W);
    IdleI2C1();
    WriteI2C1((unsigned char)addr>>8); // Address to start reading data from
    IdleI2C1();
    WriteI2C1((unsigned char)addr&0xFF);
    IdleI2C1();
    RestartI2C1();
    WriteI2C1(EE_ADDR | EE_R);
    IdleI2C1();
    for (i=0; i<len; i++) {
        buf[i] = ReadI2C1(); // Read a byte from EEPROM

        sprintf(bf1, "Addr: %u Byte: %c\r\n", addr, buf[i]); // Display the read byte and the address
        debugr(bf1);

        addr++; // Increment address

        IdleI2C1();
        if (i == len-1) { // This makes sure the last byte gets 'nAcked'
            NotAckI2C1();
        } else {
            AckI2C1();
        }
    }
    StopI2C1();
} 
```

上面的输出在这里：[https](https://gist.github.com/3803316) ://gist.github.com/3803316 请注意，关于输出是用 %x 作为地址值（所以 addr 是十六进制）

您可能已经注意到输出的第二个问题是当 i > len 时它不会停止。它继续比我提供的输出更远，并且在微控制器的看门狗重新启动之前不会停止。

**编辑：** 调用函数

```
Location loc;
ee_read(&loc, 0, sizeof(Location)); 
```

声明：

```
struct location_struct {
    char lat[12]; // ddmm.mmmmmm
    char latd[2]; // n/s
    char lon[13]; // dddmm.mmmmmm
    char lond[2]; // e/w
    char utc[11]; // hhmmss.sss
    char fix[2]; // a/v
};

typedef struct location_struct Location;

char bf1[BUFFER_SIZE]; 
```

我不认为这是一个竞争条件。我禁用了使用 bf1 的中断。即使那样，如果发生这种情况，它也会破坏整个调试字符串，而且肯定不会如此可重复。

**编辑** addr 的值从零开始，可以在这里看到：[https ://gist.github.com/3803411](https://gist.github.com/3803411)

**编辑** 这应该做什么它将位置结构逐字节复制到 EEPROM 中，然后在需要时调用它。

**关闭** 所以我从来没有解决过这个问题。该项目从 EEPROM 移出，此后我更改了操作系统、编译器和 IDE。我不太可能复制这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T02:59:52.100

我会告诉你你的代码有*一个*问题，这一行：

```
(unsigned char)addr>>8 
```

没有做你似乎需要的事情。

它将值`addr`转换为`unsigned char`which（假设 8 位`char`和 16 位`int`或仅使用更宽的低 16 位`int`），将始终为您提供低 8 位。

如果你然后将它右移八位，你总是会得到零。

如果您的意图是获取地址的高八位，则需要使用：

```
(unsigned char)(addr>>8) 
```

以便*首先完成转移。*

# c++ - 使用 ifstream::operator>> 从 CSV 文件加载数组

> ID：12650482
> 
> 赞同：2
> 
> 时间：2012-09-29T06:24:03.237
> 
> 标签：c++, file-io, csv, c++11, ifstream

我知道有几种 C++ 方法可以从 CSV 中加载值，但我很好奇，如何通过最小的更改来适应这种不正确的方法以使其工作：

```
std::ifstream fileStream ("File.txt");    // File.txt reads "1,2,3"
short numbers[3];

for (short i = 0; i < 3; ++i)
    fileStream >> numbers[i]; 
```

有什么方法可以使用 ifstream::operator>> 来做到这一点，同时在概念上尽可能接近这个实现？修复此代码！:-)

谢谢！信不信由你，这对我正在进行的计算中微子物理项目非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T06:39:36.847

作为将逗号读入临时变量的快速修复，您可以从文件中获取数据。

```
std::ifstream fileStream ("File.txt"); 
short numbers[3];
char delim;

fileStream >> numbers[0];
for (int i = 1; i < 3; ++i){
    fileStream >> delim;
    fileStream >> numbers[i];
} 
```

# ios - 如何在 iOS SDK 5.1 上支持 Facebook SDK 3.1？

> ID：12650486
> 
> 赞同：-1
> 
> 时间：2012-09-29T06:24:53.223
> 
> 标签：ios, facebook-graph-api

Facebook SDK 3.1 的主要目的是带来与 iOS v6.0 的兼容性及其原生 Facebook 支持。

ios 5 中没有 AdSupport 和社交框架（我正在研究 xcode 4.3.2 iphone 5.1 模拟器），我们可以下载这些框架还是没有这些框架有其他方法可以运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:41:09.590

从[这个页面](https://developers.facebook.com/features/whats-new-ios-sdk-3.1/)：

> 跨 iOS 版本的无缝 Facebook 登录：让您的应用程序在所有 iOS 4.0+ 版本上无缝运行，并轻松与 iOS 6 中的本机登录支持集成。

在 Facebook SDK 3.1 入门中，当它说要将 Accounts、Social 和 AdSupport 框架添加到“与库链接二进制文件”时，不要忘记将这 3 个框架面板右侧的必需更改为可选。

这样您就可以支持从 iOS 4.* 到 iOS 6。

# regex - Perl 正则表达式匹配 @ 字符之后的所有内容

> ID：12650487
> 
> 赞同：1
> 
> 时间：2012-09-29T06:25:32.980
> 
> 标签：regex, perl

我有一堆包含`@`符号引用的标签的文本文件。例如，如果笔记包含 ，则将笔记标记为“家” `@home`。

我正在尝试找到一个 Perl 正则表达式，它将匹配`@`字符之后的所有内容，但不包括 @character。

到目前为止，我有这个`(@\w+)`成功匹配整个标签（例如，它匹配`@home`等`@work`），但我找不到修改它的方法，所以只有 @ 字符之后的字符被拾取。

我查看了这个[perl 正则表达式来匹配字符后面的所有单词，](https://stackoverflow.com/questions/11605271/perl-regex-to-match-all-words-following-a-character)但我似乎无法从中解决。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T06:42:28.853

正如@Quentin 所说，`@(\w+)`是最好的解决方案。

```
#!/usr/bin/perl

while (<>) {
    while (/@(\w+)/g) {
        print $1, "\n";
    }
} 
```

如果您确实想完全匹配标签，则可以尝试`(?<=@)\w+`。它匹配 之后的每个字符`@`，但被`@`排除在外。

```
#!/usr/bin/perl

while (<>) {
    while (/(?<=@)\w+/g) {
        print $&, "\n";
    }
} 
```

参考：[使用 Look-ahead 和 Look-behind](http://www.perlmonks.org/?node_id=518444)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T06:27:38.047

只需移动`@`它，使其位于捕获组之外：

```
@(\w+) 
```

# c# - 如何实现将另一个控件作为属性引用的混合/wpf 附加行为？

> ID：12650492
> 
> 赞同：1
> 
> 时间：2012-09-29T06:26:28.837
> 
> 标签：c#, wpf, xaml, expression-blend, attachedbehaviors

我正在尝试实现一种适用于对象但受第二个对象影响的行为。

例如，它将根据另一个框架元素的距离来改变框架元素的外观。

我对附加行为的危险了解足够多，我会这样定义我的班级：

```
 public class ChangeWithDistance : Behavior<FrameworkElement> 
```

在行为的某个地方，我需要一个指向另一个控件的名称（？）的依赖属性。

我应该使我的依赖属性的类是什么，以便我可以让这个行为指向另一个控件？

我会将 propdp 指定为代表另一个控件名称的字符串吗？

或者我应该使用另一个类来表示与控件关联的标签（你知道，那个 x:Name 业务..）

或者 propdp 是否应该指向这样的框架元素？

```
 public static readonly DependencyProperty OtherControl =     
          DependencyProperty.Register("OtherControl", typeof(FrameworkElement) 
```

还是我做一些绑定？

是否有最佳实践来指出一个行为或任何在另一个控件上具有依赖属性的东西？

有没有办法让它显示出来，以便使用混合的用户可以选择另一个控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:45:29.360

我很幸运能够像这样声明我的依赖属性：

```
 public static readonly DependencyProperty OtherObjectProperty =
        DependencyProperty.Register("OtherObject", typeof (FrameworkElement), typeof (MyBehavior), new UIPropertyMetadata()); 
```

然后在 XAML 中将它绑定到我感兴趣的另一个对象，如下所示：

```
 <Rectangle ....>
       <Interactivity:Interaction.Behaviors>
             <Controls:MyBehavior OtherObject="{Binding ElementName=TheOtherElementNameIWantToReference}" />
       </Interactivity:Interaction.Behaviors>
  </Rectangle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:40:17.807

这是一个很多问题。阅读附加属性：http: [//msdn.microsoft.com/en-us/library/ms749011.aspx](http://msdn.microsoft.com/en-us/library/ms749011.aspx)

简短的回答是您需要使用该`RegisterAttached`方法，而不是`Register`.

# gcc - 检查目标文件的后缀...配置：错误：无法计算目标文件的后缀：无法编译

> ID：12650493
> 
> 赞同：8
> 
> 时间：2012-09-29T06:26:37.923
> 
> 标签：gcc, toolchain

在构建 ARM 工具链时，出现以下错误

```
checking for suffix of object files... configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
make[1]: *** [configure-target-libgcc] Error 1
make[1]: Leaving directory `<path>/gcc-4.3.2-arm-elf'
make: *** [all] Error 2 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T22:17:02.010

你读了`http://gcc.gnu.org/wiki/FAQ#configure_suffix`吗？

你安装了GMP、MPFR和MPC吗？它们在您的图书馆搜索路径中吗？

请参阅[http://gcc.gnu.org/wiki/InstallingGCC](http://gcc.gnu.org/wiki/InstallingGCC)并确保您已遵循基本说明。 **到目前为止**，构建 GCC（包括作为交叉编译器）的最简单方法是遵循以下说明：

> *   或者，在解压 GCC 源存档后，只需运行`./contrib/download_prerequisites`GCC 源目录中的脚本。这将下载支持库并创建符号链接，使它们作为 GCC 构建过程的一部分自动构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:08:48.653

“*构建 GCC 并非易事，但如果您仔细按照说明进行操作，也不难。许多人在没有正确阅读安装文档的情况下急于尝试构建它，并犯了以下一个或多个常见错误：

1) 不要从 gcc src 目录运行 ./configure (不支持) => 你需要从 gcc 源目录之外运行 configure

2) 注意：如果 GCC 动态链接到必备库 (GMP/MPFR/MPC)，那么在构建 gcc 和使用已安装的编译器时，共享库必须位于动态链接器的路径 (LD_LIBRARY_PATH) 中。*"

简单示例（没有到 GMP/MPFR/MPC 的动态链接）：

```
tar xzf gcc-4.8.0.tar.gz
cd gcc-4.8.0
./contrib/download_prerequisites
cd ..
mkdir objdir
cd objdir
$PWD/../gcc-4.8.0/configure --prefix=/opt/gcc-4.8.0 
make
make install 
```

资料来源： [Advogato Doc](http://advogato.org/person/redi/diary/240.html) - [GNU Doc](http://gcc.gnu.org/wiki/InstallingGCC)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:33:11.367

导出 LD_LIBRARY_PATH=/path/for/libraries:$LD_LIBRARY_PATH

path/for/libraries 是 GMP MPFR 和 MPC 库所在的位置。

我在 ubuntu 12.04 上编译 GCC，这些 linraries 存在于路径 /usr/local/lib

# c++ - 如何从 Mongodb c++ 2.2 源代码编译 so 文件？

> ID：12650496
> 
> 赞同：0
> 
> 时间：2012-09-29T06:27:19.217
> 
> 标签：c++, mongodb

今天我尝试为 mongodb 2.2 升级我的驱动程序。但只能得到 libmongoclient.a 文件。下载地址是：http: [//downloads.mongodb.org/cxx-driver/mongodb-linux-x86_64-v2.2-latest.tgz](http://downloads.mongodb.org/cxx-driver/mongodb-linux-x86_64-v2.2-latest.tgz) 这是我的方式：

```
scons --prefix=/usr install 
```

# html - 在虚线上准确对齐表格单元格的问题

> ID：12650498
> 
> 赞同：0
> 
> 时间：2012-09-29T06:27:31.200
> 
> 标签：html, css, html-table

我用虚线分隔表格的两行，如下所示。

```
<table cellspacing="0">
    <tr>
        <td>Issue</td>                               
        <td>Date</td>
    </tr>  
    <td style="border-bottom: 1px dotted red;padding-top:2px;width:800px;"></td>
    <tr>
        <td>Theres is a issue with the code</td>
        <td>09-28-2012</td></tr>
</table> 
```

这是[提琴手版本](http://jsfiddle.net/dPY7D/)。我想将该日期在线对齐而不是最后。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:40:53.617

添加`colspan = "2"`到`td`有虚线的那个。[`colspan`](http://www.w3schools.com/tags/att_td_colspan.asp)并[`rowspan`](http://www.w3schools.com/tags/att_td_rowspan.asp)分别定义单元格跨越的列数或行数。

这是您演示的修改版本：[little link](http://jsfiddle.net/glee/aQcYm/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T06:38:55.100

```
<table cellspacing="0">
 <tr>
    <td>Issue</td>                               
    <td >Date</td>
 </tr>  
 <tr>
   <td class="td"></td>
   <td class="td"></td>
 <tr>    
 <tr>
    <td>Theres is a issue with the code</td>
    <td>09-28-2012</td>
 </tr>
</table>​ 
```

CSS：

```
.td{
   border-bottom: 1px dotted red;width:800px;padding-top:2px;
   } 
```

[演示](http://jsfiddle.net/afshinprofe/q3AaZ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T06:44:00.787

请试试这个：

```
 <table cellspacing="0">
        <tr>
            <td>Issue</td>                               
            <td>Date</td>
        </tr>  
        <tr style="border-bottom: 1px dotted red;padding-top:2px;width:800px;"><td></td><td ></td></tr>
        <tr>
            <td>Theres is a issue with the code</td>
            <td>09-28-2012</td></tr>
    </table> 
```

# c++ - OpenGL：用点和方向向量画线

> ID：12650500
> 
> 赞同：2
> 
> 时间：2012-09-29T06:27:41.863
> 
> 标签：c++, opengl, line

我见过 OpenGL 语句使用两个点画一条线。但是，我的要求是使用以下细节画一条线

*   线上的一点
*   方向向量

我使用 openGL 库在 c++ 中开发函数。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T06:37:19.843

答案取决于您所说的*方向向量*的语义。

在计算机图形上下文中，我通常将该术语表示为面向指定方向的*单位向量。*而在数学上下文中，您*可能*只是指减去两个点的坐标得到的*相对向量*。

[用P1和P2表示需要的两个点，V表示向量]。

在前一种情况下，您还需要指定向量的*长度*，因此您需要：

```
P2 = P1 + n * V 
```

而在后一种情况下，这只是微不足道的

```
P2 = P1 + V 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:39:41.070

只需将那条两点线设为一条很长的线，例如从线上的点到每个方向 10000：

```
void drawLinePointDirection(Point P, Vector D) {
    Point A = P + 10000*D;
    Point B = P - 10000*D
    drawLineTwoPoints(A, B);
} 
```

假设 D 是单位长度。

# salesforce - 整个 Salesforce 的字段使用情况

> ID：12650503
> 
> 赞同：0
> 
> 时间：2012-09-29T06:28:19.400
> 
> 标签：salesforce, apex-code

删除任何对象字段时，Salesforce 会阻止其在 Apex 代码、工作流等中使用，但如果在电子邮件模板中使用则不会发出警告。是否有任何应用程序可用于列出整个 salesforce 的字段使用情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:30:49.753

我不知道有这样的应用程序，但我所做的是让 Force.com IDE 项目在生产中的所有东西都方便使用（实际上我达到了 5,000 个限制，所以我有两个项目，一个带有报告，一个带有其他所有内容）。进行刷新，然后使用搜索工具（在我的例子中为 grepWin）查找引用的所有字段，包括电子邮件模板和报告。非常适合在删除之前识别字段使用情况，如您在此处询问的那样。也非常适合查找放错位置的电子邮件模板，您也可以将项目检查到源代码控制中以获取一些历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:45:13.883

我[这里](http://download.cnet.com/Salesforce-Enabler-for-Microsoft-Excel/3000-2652_4-75852364.html?tag=mncol;1)有现场利用率计算器等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T21:27:32.843

我使用 AppExchange 中的一个名为“Field Trip”的应用程序来计算字段使用情况。 [https://appexchange.salesforce.com/listingDetail?listingId=a0N30000003HSXEEA4](https://appexchange.salesforce.com/listingDetail?listingId=a0N30000003HSXEEA4)

# cakephp - cakephp ini_set 不工作

> ID：12650504
> 
> 赞同：0
> 
> 时间：2012-09-29T06:28:22.213
> 
> 标签：cakephp, file-upload, upload, cakephp-2.1, ini-set

我想在我的管理面板中上传大文件，但不是在每个地方和公共用户访问上传大文件，
我在我的 core.php ，引导程序，控制器中使用 ini_set ......但它对我不起作用，
我的 ini_set 是：

```
ini_set("memory_limit","300M");
ini_set('upload_max_filesize','200M');
ini_set('post_max_size', '20M');
ini_set('max_execution_time', '200');
ini_set('max_input_time','200'); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:03:48.970

您的问题与 CakePHP 无关。无法使用 ini_set() 更改像“upload_max_filesize”这样的值。您的问题已[在此处](https://stackoverflow.com/questions/1122418/changing-upload-max-filesize-on-php#1122443)得到解答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:38:06.530

你/cakephp 是否也在 .htaccess 文件中设置了 ini 值？可能会发生某种压倒一切的事情。

# android - 如何传递列表视图图像传递另一个活动

> ID：12650505
> 
> 赞同：2
> 
> 时间：2012-09-29T06:28:22.407
> 
> 标签：android, android-activity, android-image

我有这个代码的问题：

```
 public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = getLayoutInflater();          
        View row = inflater.inflate(R.layout.row, parent, false);

        TextView textview = (TextView) row.findViewById(R.id.tvTop);
        ImageView imageview = (ImageView) row.findViewById(R.id.list_image);

        textview.setText(data_topText[position]);
        imageview.setImageResource(data_image[position]);

        row.setOnClickListener(new OnClickListener() {

            public void onClick(View row) {
                    TextView textview = (TextView) row.findViewById(R.id.tvTop);
                    ImageView imageview = (ImageView) row.findViewById(R.id.list_image);

                    String product = textview.getText().toString();
                    int images = imageview.getId();

                    Intent i = new Intent(getApplicationContext(),
                            SecondScreenActivity.class);
                    i.putExtra("name", product);
                    i.putExtra("zurag", images);
                    startActivity(i); 
```

won的传递图像另一个活动。SecondScreenActivity.java：

```
 TextView txtName = (TextView) findViewById(R.id.txtName);
    ImageView images = (ImageView) findViewById(R.id.image);

    Intent intent = getIntent();        
    String name = intent.getStringExtra("name");
    int pic =intent.getIntExtra("zurag", 0);

    txtName.setText(name);
    images.setImageResource(pic);       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:58:33.783

你的第二个活动就是这样改变

```
 TextView txtName = (TextView) findViewById(R.id.txtName);
ImageView images = (ImageView) findViewById(R.id.image);

Intent intent = getIntent();        
String name = intent.getStringExtra("name");
int pic =getIntent().getExtras().getInt("zurag");

txtName.setText(name);
images.setBackgroundResource(pic); 
```

# javascript - SVG Javascript 和在进行旋转时管理平移矩阵

> ID：12650506
> 
> 赞同：0
> 
> 时间：2012-09-29T06:28:46.110
> 
> 标签：javascript, matrix, svg, transform

我有一系列在 inkscape（或类似的矢量图形应用程序）中创建的 SVG 文件。

当 SVG 中的元素在屏幕上移动时，编辑工具会对元素进行翻译（显然他们这样做是出于效率原因）。这些工具基于矩阵设置每个被拖动、调整大小等元素的转换。

问题是，如果我尝试从 javascript 中对 SVG 中的元素应用旋转，则旋转的应用会覆盖转换。这导致的不仅仅是旋转，因为矩阵被旋转替换了。

我假设我需要检索矩阵，使用我希望的旋转更新矩阵，然后重新应用矩阵。

有人可以解释一下在尝试将旋转增加几分之一度时如何做到这一点（由于执行动画而产生的派别）。

我在[这里](http://jsfiddle.net/metalskin/cuTY2/1/)的 JSFiddle 中创建了一个示例。虽然不清楚发生了什么，但我已经在本地测试了代码。通过萤火虫检查时，我可以看到变换属性被替换为旋转（r）。

顺便说一句，我一直在阅读 w3 网站，但我只找到[了这个](http://www.w3.org/TR/SVG/coords.html#TransformMatrixDefined)。虽然它深入讨论了矩阵，但它没有提供任何示例。我发现很难阅读，因为我上次学习矩阵是在 80 年代。但在我看来，我可能需要做一些矩阵乘法，并可能使用 cos 和 sin。有点希望我不这样做，因为我不确定在制作动画时使用这种方法对性能的影响。

顺便说一句，我已经查看了从 SVG 中去除转换的工具。然而，由于我希望使用的 SVG 文件是另一个项目的一部分，我宁愿避免这样做。它还会在未来产生问题，因为我希望让人们创建自己的 SVG 以与我正在编写的软件一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:56:44.280

使用 SVG DOM 附加翻译而不是覆盖它。

```
$('#control1').mousedown(function() {

    if (timer !== null) {
        clearInterval(timer);
        timer = null;
    }

    // change to stop if the current anim is running, and get the current angle
    timer = setInterval(function() {
        angle += 1;

        if (angle >= 360) {
            angle -= 360;
        }

        if (anim.transform.baseVal.numberOfItems < 2) {
          var transform = document.getElementById("arm1").createSVGTransform();
          transform.setRotate(angle, 100, 100);
          anim.transform.baseVal.appendItem(transform);
        } else {
          anim.transform.baseVal.getItem(1).setRotate(angle, 100, 100);
        }
    }, 1);

}); 
```

# html - 如何在没有分页符的情况下打印完整的 div

> ID：12650508
> 
> 赞同：1
> 
> 时间：2012-09-29T06:28:54.077
> 
> 标签：html, printing, cross-browser, page-break, css

> **可能重复：**
> [page-break-inside：避免 Firefox 和/或 IE 的等效项](https://stackoverflow.com/questions/3401229/page-break-insideavoid-equivalent-for-firefox-and-or-ie)

参考这个问题[CSS Printing: Avoiding cut-in-half DIVs between pages?](https://stackoverflow.com/questions/907680/css-printing-avoiding-cut-in-half-divs-between-pages)

```
page-break-inside: avoid; 
```

此属性在 Firefox 中不起作用。Firefox 的等价物是什么？

# android - 蓝牙传输在三星 Galaxy 上不起作用

> ID：12650511
> 
> 赞同：0
> 
> 时间：2012-09-29T06:29:16.177
> 
> 标签：android, bluetooth

我已经编写了在android中使用蓝牙传输文件的代码：

```
ContentValues values = new ContentValues();
values.put(BluetoothShare.URI, Uri.parse("file:///sdcard/jokes.txt").toString());
values.put(BluetoothShare.DESTINATION, "0C:71:5D:BA:0E:A8");
values.put(BluetoothShare.TOTAL_BYTES, length);
values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
Long ts = System.currentTimeMillis();
values.put(BluetoothShare.TIMESTAMP, ts);
getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

它在 HTC Desire(Android 4.0) 上运行良好，但在三星 Galaxy ace(Android 2.3.6) 上运行良好。我希望这段代码在每台设备上都能运行。

在 Micromax(Android 2.3.4) 中，我在最后一行收到如下错误，

```
Exception: java.lang.IllegalArgumentException: Unknown URL content://com.android.bluetooth.opp/btopp 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:44:41.530

尝试通过以下任一方式发送，

```
File file = new File ( Environment.getExternalStorageDirectory() + "/jokes.txt" );
ContentValues values = new ContentValues(); 
values.put( BluetoothShare.URI, Uri.fromFile( file ).toString() );
values.put( BluetoothShare.DESTINATION, "0C:71:5D:BA:0E:A8" );
values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
Long ts = System.currentTimeMillis();
values.put(BluetoothShare.TIMESTAMP, ts);
getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

# android - 在android中以两秒的间隔时间按顺序显示图像

> ID：12650516
> 
> 赞同：3
> 
> 时间：2012-09-29T06:30:26.847
> 
> 标签：android, image, imageview, sleep

我有三个图像。我需要以 2 秒的时间间隔一张一张地显示这些图像。如何实现这个概念？建议请..

感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:39:42.603

据我所知，您需要：

1）[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)类来显示图像 [这是一个很好的教程](http://www.mkyong.com/android/android-imageview-example/)

和

2) 休眠 2 秒间隔时间。

# vim - 使用 vim latex-suite 查看 pdf: !start Preview shell 返回 127

> ID：12650528
> 
> 赞同：6
> 
> 时间：2012-09-29T06:32:02.400
> 
> 标签：vim

我有 Mac OS X Lion、vim 7.3 和 latex-suite。使用最小的 .tex 文件，我可以使用 \ll 从 vim 中编译 pdf。但是我无法使用 \lv 查看 pdf。[常见问题解答](http://vim-latex.sourceforge.net/index.php?subject=faq&title=FAQ)建议我检查是否可以从 vim 内部打开我的 pdf 查看器

!开始预览

但是，当我这样做时，我会收到消息

壳返回 127。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T07:00:59.920

您可以使用`!open -a Preview`打开预览。

这是我`<leader>lv`为我工作的设置：

```
let g:tex_flavor='latex'
let g:Tex_TreatMacViewerAsUNIX = 1
let g:Tex_ExecuteUNIXViewerInForeground = 1
let g:Tex_ViewRule_ps = 'open -a Skim'
let g:Tex_ViewRule_pdf = 'open -a /Applications/Skim.app'
let g:Tex_ViewRule_dvi = 'open -a /Applications/texniscope.app' 
```

请注意，我在这里使用[Skim](http://skim-app.sourceforge.net)而不是 Preview 作为 PDF 查看器。你可以简单地说：

```
let g:Tex_ViewRule_ps = 'open -a Preview'
let g:Tex_ViewRule_pdf = 'open -a Preview' 
```

使用预览查看生成的 postscript 或 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-26T16:02:52.343

将以下代码放入此文件`~/.vim/ftplugin/tex.vim`中对我有用

```
let g:tex_flavor='latex'
let g:Tex_TreatMacViewerAsUNIX = 1
let g:Tex_ExecuteUNIXViewerInForeground = 1
let g:Tex_ViewRule_ps = 'open -a Skim'
let g:Tex_ViewRule_pdf = 'open -a /Applications/Skim.app'
let g:Tex_ViewRule_dvi = 'open -a /Applications/texniscope.app' 
```

# asp.net-mvc - 重定向到不同的控制器方法 - asp.net mvc

> ID：12650529
> 
> 赞同：0
> 
> 时间：2012-09-29T06:32:08.997
> 
> 标签：asp.net-mvc

我目前正在修改我的应用程序。我的控制器中有一个名为“Test”的方法，目前被称为我的许多页面。我现在在我的控制器中创建了一个名为“TestNew”的新方法，我希望我的一些页面被重定向到新方法。

如果您可以让我知道可以在一个地方完成的快速修复，那就太好了，这样可以通过设置一些条件，例如

```
if(viewName = "abc") 
```

然后重定向到“TestNew”，而不是在整个应用程序中进行更改。我试过在

```
public override void OnActionExecuting(ActionExecutingContext filterContext) 
```

但这永远不会被调用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:39:15.423

根据所有 ASP MVC 书籍和基础知识，这应该非常简单：

```
public ActionResult Test()
{
   return RedirectToAction("NewTest");
} 
```

希望这可以帮助

# solr - solr：如何在分词器之后提升查询词

> ID：12650530
> 
> 赞同：1
> 
> 时间：2012-09-29T06:32:25.660
> 
> 标签：solr, tokenize, term, solr-boost

如果查询词是“ABCD”，那么被分词后就是“A”“BC”“D”。我想提升词“BC”，所以查询词是这样的：

```
A BC^10 D" 和短语查询 "ABCD"
```

用户输入的所有查询词都将被自动处理，以便提升重要的查询词。

我想我可以自定义一个新的 Tokenizer 来做，但我不知道它是否可行，或者有没有其他更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:43:14.797

您可以使用[QueryElevationComponent](http://wiki.apache.org/solr/QueryElevationComponent)来做到这一点。如果您在 elevate.xml 文件中放入像 BC 这样的词，那么这些词将在查询时自动提升。当然，如果您已将组件添加到您的请求处理程序中。

编辑：

我认为您的意思是增加术语而不是术语的文档。我认为在您的情况下，如果您使用正则表达式和白名单查找特定术语并在发送到 solr 之前更改字符串以包含提升，它可能会起作用。

```
 [Fact]
    public void Boost()
    {
        var query = "ABCD";
        var importantTerms = new List<string>{ "BC"};
        importantTerms.ForEach(term => query = query.Replace(term, string.Format("+{0}^10+", term)));
        Assert.Equal("A+BC^10+D", query);
    } 
```

# winforms - datagrid 属性列表在 VB.net 中不可用

> ID：12650532
> 
> 赞同：0
> 
> 时间：2012-09-29T06:33:00.060
> 
> 标签：winforms, list, properties, datagridview, vb.net-2010

我有一个数据网格，我用来访问它的值，例如：

`userName = frm_main.datagrid1.Item(1, 0).Value.ToString`

然而这东西很好，但现在我刚刚创建了一个新表单，当我试图访问它不可用的这个`Item`属性时。`datagrid1`

有谁知道，有什么问题吗？

更准确地说，当我打字时，它会像天蓝色`frm_main`一样突出显示我。`class`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:39:56.223

如果您尝试从不同的表单访问 frm_main，它必须有一个 frm_main 实例才能使用。如果没有现有的 frm_main 实例供它使用，就该表单而言，frm_main 不存在。

我猜你是从frm_main 中的某个地方初始化第二个表单？如果是这样，当您初始化它时，请执行以下操作：

```
Form2 f = new Form2(this);
f.Show(); 
```

在 Form2 的代码中，输入：

```
private frm_main Main;
Public Form2(frm_main _Main) { Main = _Main; InitializeComponent(); } 
```

这为其提供了现有的 frm_main 实例，可以使用并访问其中的所有控件。您只需将其称为 Main，或您想在代码中为其提供的任何变量名称。

**编辑：* *我刚刚意识到这是针对VB.Net的，为此的VB代码是

```
Dim f As New Form2(Me)
f.Show() 
```

然后为 Form2 创建自己的构造函数

```
Dim Main As Form1
Public Sub New(ByRef _Main As Form1)
    Main = _Main
    InitializeComponent()
End Sub 
```

应该这样做！

# matlab - MATLAB 不会返回我的输出

> ID：12650533
> 
> 赞同：2
> 
> 时间：2012-09-29T06:33:28.590
> 
> 标签：matlab

我在 MATLAB 中编写了一个函数，但它不会返回我的输出。它以 ans=a # 的形式返回第一个输出，仅此而已。我认为`function[argout1,argout2,...argoutn=funcname(in1,in2,...inn)`以 format 格式返回所有输出`argout1= a #`，`argout2= a #` 依此类推。

我意识到我可以使用`disp()`或其他一些内置函数，但是当你有一个函数文件时，这一切有什么意义。该函数正在访问来自 excel 电子表格的输入，但我认为这不会产生影响。任何帮助将不胜感激。

代码如下。

```
function[y_int1, y_int2, Youngs_Modulus, Poissons_Ratio, Youngs_Modulus_Percent_diff, Poissons_Ratio_Percent_diff, RMS1, RMS2]= Lab3_EC(elong1,elong2,elat1,elat2,thick,width,load,N)

%average longitudinal strain
avgLongs=((elong1)+(elong2))/2;

%average lateral strain
avgLats=((elat1)+(elat2))/2;

%Find's the area of the sample

A=thick*width;

%Finds the applied stress
stress=load./A;

%declares a variable x1 for Long Strain
x1=avgLongs;

%declares a variable y1 for Applied Stress
y1=stress;

%Declares variables to compute slope1

x1bar=mean(x1);
y1bar=mean(y1);
sxy1=sum(x1.*y1);
sx1=sum(x1);
sy1=sum(y1);
sx1s=sum(x1.*x1);
sx11s=(sum(x1))^2;
slope1=(N*sxy1-sx1*sy1)/(N*sx1s-sx11s);
y_int1=y1bar-slope1*x1bar;

%x points
xp=linspace(min(x1),max(x1));

% y points
yp1=slope1*xp+y_int1;

%Declares variables to compute slope 2

%Since our second calculation of linear regression uses Average
%Longitudinal Stress we can re-use the variable x1 

y2=abs(avgLats);
y2bar=mean(y2);
sxy2=sum(x1.*y2);
sy2=sum(y2);
slope2=(N*sxy2-sx1*sy2)/(N*sx1s-sx11s);
y_int2=y2bar-slope2*x1bar;

%y points
yp2=slope2*xp+y_int2;

%preallocate space for error1 vector
Error1=zeros(N,1);

%compute error1
for i=1:N;
   Error1(i)= (stress(i)-y_int1-slope1*avgLongs(i))^2;
end
Error1=sum(Error1(5));   

%preallocate space for error2 vector

Error2=zeros(N,1);
for i=1:N;
    Error2(i)=(abs(avgLats(i))-y_int2-slope2*avgLongs(i))^2;
end
Error2=sum(Error2(5));

RMS1=sqrt(Error1/N);

RMS2=sqrt(Error2/N);

Lab_2_E=(stress(5)-stress(1))/(avgLongs(5)-avgLongs(1));
Lab_2_v=(abs(avgLats(5)-avgLats(1))/(avgLongs(5)-avgLongs(1)));
Youngs_Modulus=slope1;
Poissons_Ratio=slope2;
Youngs_Modulus_Percent_diff=((abs(Youngs_Modulus-Lab_2_E))/Lab_2_E)*100;
Poissons_Ratio_Percent_diff=((abs(Poissons_Ratio-Lab_2_v))/Lab_2_v)*100;

%Plot stress strain diagram and poisson's ratio
figure(1), plot(avgLongs,stress,'k',x1,y1,'o',xp,yp1,':g'),hold on,...
    xlabel('Long Strain(in/in)'),ylabel('Stress(psi)'),...
    title('Stress vs. Long Strain'), legend('Exp','data points','Calc',...
    'Location','SouthEast')
figure(2),plot(avgLongs,abs(avgLats),x1,y2,'+',xp,yp2,'-- m'),hold on,...
    xlabel('Long Strain(in/in)'),ylabel('Lat Strain(in/in)'),...
    title('Poisson''s Ratio'),legend('Exp','data points','Calc',...
    'Location','SouthEast') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:53:11.257

假设您有一个功能`fun`：

```
[o1, o2, o3, o4, o5] = fun(i1, i2, i3, i4); 
```

如果你执行

```
fun(in1, in2, in3) 
```

只有一个输出参数：`ans`默认输出参数。这将获得函数头中定义的第一个输出参数的值（即`o1`）。

如果你想要更多的输出，你必须指定它们：

```
[out1, out2, out3] = fun(in1, in2, in3); 
```

现在`out1`和将分别包含在函数中分配给和`out2`的值。`out3``o1``o2``o3`

您绝对应该通读[函数文档](http://www.mathworks.nl/help/matlab/ref/function.html)。

# jsf-2 - 复选框数据表素面不起作用

> ID：12650546
> 
> 赞同：2
> 
> 时间：2012-09-29T06:36:38.000
> 
> 标签：jsf-2, checkbox, datatable, primefaces

primefaces 库的复选框数据表对我不起作用，我尝试制作与 primefaces 展示相同的代码，但是当我检查一些行并单击查看按钮时 selectedCars[] 包含 0 行：这是我的 xhtml页 ：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>TODO supply a title</title>
    </h:head>
    <h:body>
        <h:form id="form"> 
            <p:dataTable id="multiCars" var="car" value="#{fortest.mediumCarsModel}" paginator="true" rows="10"  
                         selection="#{fortest.selectedCars}">  

                <f:facet name="header">  
                    Checkbox Based Selection  
                </f:facet>  

                <p:column selectionMode="multiple" style="width:18px" />  

                <p:column headerText="id">  
                    #{car.id}  
                </p:column>  

                <p:column headerText="date envoi">  
                    #{car.dateEnvoi}  
                </p:column>  

                <p:column headerText="decision" >  
                    #{car.decision}  
                </p:column>  

                <f:facet name="footer">  
                    <p:commandButton id="multiViewButton" value="View" icon="ui-icon-search"  
                                     update=":form:displayMulti" oncomplete="multiCarDialog.show()"/>  
                </f:facet>  
            </p:dataTable>  

            <p:dialog id="multiDialog" header="Car Detail" widgetVar="multiCarDialog"  
                      height="300" showEffect="fade" hideEffect="explode">  

                <p:dataList id="displayMulti"  
                            value="#{fortest.selectedCars}" var="selectedCar">  
                    id : #{selectedCar.id}, dateEnvoi #{selectedCar.dateEnvoi}  
                </p:dataList>  

            </p:dialog>  
        </h:form>
    </h:body>
</html> 
```

这是我的托管豆：

```
 @ManagedBean
@SessionScoped
public class fortest implements Serializable {

    private Commande[] selectedCars;
    private dortestDataModel mediumCarsModel; 
    utilisateursHelper uh;
    /**
     * Creates a new instance of fortest
     */
    public fortest() {
        uh = new utilisateursHelper();
        mediumCarsModel = new dortestDataModel(uh.getAllCommandes());

    }

    public void setSelectedCars(Commande[] selectedCars) {
        System.out.println("alors je suis donc la size : "+selectedCars.length);
        this.selectedCars = selectedCars;
    }

    public Commande[] getSelectedCars() {
        return selectedCars;
    }

    public dortestDataModel getMediumCarsModel() {
        return mediumCarsModel;
    }

} 
```

这是我的数据模型：

```
 public class dortestDataModel extends ListDataModel<Commande> implements SelectableDataModel<Commande> {    

    utilisateursHelper uh;

    public dortestDataModel() {  
    }  

    public dortestDataModel(List<Commande> data) {  
        super(data);  
        uh = new utilisateursHelper();
    }  

    @Override  
    public Commande getRowData(String rowKey) {  
        //In a real app, a more efficient way like a query by rowKey should be implemented to deal with huge data  

        List<Commande> cars = (List<Commande>) uh.getAllCommandes();  

        for(Commande car : cars) {  
            if(car.getId().equals(rowKey))  
                return car;  
        }  

        return null;  
    }  

    @Override  
    public Object getRowKey(Commande car) {  
        return car.getId();  
    }  
} 
```

你有什么想法吗，提前谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T08:34:15.570

您忘记像这样将 rowCheckListener 附加到您的数据表

```
 <p:ajax event="rowSelectCheckbox" listener="#{forTest.check}"   /> 
```

下面的代码对我有用。我可以在对话框中看到 id 和决定。

**XHTML**：我实现了**selectableDataModel**，我只是使用**了 datatable 的 rowKey 属性**，你也可以使用它

```
<h:form id="form"> 
    <p:dataTable id="multiCars" var="car" value="#{forTest.carList}" paginator="true" rows="10"  
                  rowKey ="#{car.id}" selection="#{forTest.selectedCars}" >  
      <p:ajax event="rowSelectCheckbox" listener="#{forTest.check}"   />  
        <f:facet name="header">  
            Checkbox Based Selection  
        </f:facet>  

        <p:column selectionMode="multiple" style="width:18px" />  

        <p:column headerText="id">  
            #{car.id}  
        </p:column>  

          <p:column headerText="decision" >  
            #{car.decision}  
        </p:column>  

        <f:facet name="footer">  
            <p:commandButton id="multiViewButton" value="View" icon="ui-icon-search"  
                             update=":form:displayMulti" oncomplete="multiCarDialog.show()"/>  
        </f:facet>  
    </p:dataTable>  

    <p:dialog id="multiDialog" header="Car Detail" widgetVar="multiCarDialog"  
              height="300" showEffect="fade" hideEffect="explode">  

        <p:dataList id="displayMulti"  
                    value="#{forTest.selectedCars}" var="selectedCar">  
            id : #{selectedCar.id}, dateEnvoi #{selectedCar.decision}  
        </p:dataList>  

    </p:dialog>  
</h:form> 
```

**托管豆**：

```
package managedbeans;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.jws.Oneway;

import org.primefaces.event.SelectEvent;

import beans.Car;

    @ManagedBean(name="forTest")
    @SessionScoped
    public class forTest implements Serializable {
         private List<Car> carList = new ArrayList<Car>();
         private Car selectedCars[];

        public Car[] getSelectedCars() {
            return selectedCars;
        }

        public void setSelectedCars(Car selectedCars[]) {
            this.selectedCars = selectedCars;
        }

        public List<Car> getCarList() {
            if(carList.size()==0) {
                setCarList();
            }
            return carList;
        }

        public void setCarList() {
            this.carList.add(new Car(1, "car1"));
            this.carList.add(new Car(2, "car2"));
            this.carList.add(new Car(3, "car3"));
        }
        public void check(SelectEvent event) {
            System.out.println("in check");
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:55:53.613

删除这个：

```
<p:dialog id="multiDialog" header="Car Detail" widgetVar="multiCarDialog"  
          height="300" showEffect="fade" hideEffect="explode">  

    <p:dataList id="displayMulti"  
                value="#{forTest.selectedCars}" var="selectedCar">  
        id : #{selectedCar.id}, dateEnvoi #{selectedCar.decision}  
    </p:dataList>  

</p:dialog> 
```

# android - 如何从列表视图中删除子项

> ID：12650552
> 
> 赞同：3
> 
> 时间：2012-09-29T06:37:38.203
> 
> 标签：android

我们已经创建了列表视图，但其中一行包含三个子项。子项包含 id、name、phone_no 我想使用 id 删除记录如何获取该 id（子项）。我告诉过你我可以找到行的位置，但我找不到 ID（子项）。

```
public void onCreateContextMenu(ContextMenu menu, View v,

            ContextMenuInfo menuInfo) {     

        super.onCreateContextMenu(menu, v, menuInfo);
        menu.add(0, v.getId(), 0, "Edit");          
        menu.add(0, v.getId(), 0, "Delete");
        menu.add(0, v.getId(),0,"Cancel");
    }

public boolean onContextItemSelected( MenuItem item){

                 super.onContextItemSelected(item);

         if(item.getTitle()=="Delete"){

                 AdapterContextMenuInfo info = (AdapterContextMenuInfo)        item.getMenuInfo();
               //find the position of row

       long id= getListView().getItemIdAtPosition(info.position);

              //please write the code here how to get subitem id   
         }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:48:49.707

尝试这个 ：

```
 int itemId = item.getItemId(); 
```

它将返回菜单项 ID

# apache - Web服务器的根目录

> ID：12650572
> 
> 赞同：1
> 
> 时间：2012-09-29T06:41:30.950
> 
> 标签：apache, webserver

Apache Web 服务器的根目录是什么？

我正在使用 Windows XP。我的 Apache 服务器安装在：

```
C:\Program Files\Apache Software Foundation\ 
```

我想托管一个服务器，它的手册说：

> *将所有文件和子目录从该目录移动到 Web 服务器的根目录*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-12T19:45:13.697

这取决于您如何配置服务器。“根目录”实际上称为**文档根目录**，它是 Apache HTTP 服务器将从中提供文件的目录。它可以使用[`DocumentRoot`](https://httpd.apache.org/docs/trunk/mod/core.html#documentroot)指令进行更改，您应该能够在配置文件中找到它（例如`/etc/apache2/apache2.conf`）。

从[文档](https://httpd.apache.org/docs/trunk/urlmapping.html#documentroot)中：

> 例如，如果`DocumentRoot`设置为`/var/www/html`然后请求`http://www.example.com/fish/guppies.html`将导致文件`/var/www/html/fish/guppies.html`被提供给请求的客户端。

# java - 我怎样才能使我的文本框的第一个字符不变或固定

> ID：12650573
> 
> 赞同：1
> 
> 时间：2012-09-29T06:41:45.390
> 
> 标签：java, gwt

我有一个用于获取金额的文本框，即 100 美元。

我的文本框已经有一个 $ 符号：

```
<g:TextBox ui:field="fee">$</g:TextBox> 
```

我想要的是用户永远不能在我的文本框中删除/编辑 $ 符号，并且只能在 $ 符号之后输入金额，

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:01:25.773

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:00:48.483

这应该使用事件工作

```
button.addKeyPressHandler(new KeyPressHandler() {
  public void onKeyPress(KeyPressEvent event) {
    TextBox b = (TextBox)event.getSource();
    if (!b.getValue().startsWith("$")) {
      b.setValue("$" + b.getValue());
    }
  }
}); 
```

尽管基于 css 的解决方案应该看起来和性能更好：

在输入框上放一个带有 $ 符号的领结。

```
Label l = new Label("$");
TextBox b = new TextBox();
l.getElement().addClassName("dollarlabel");
b.getElement().addClassName("dollarinput");
RootPanel.get().add(b);
RootPanel.get().add(l); 
```

和一些 CSS 样式

```
.dollarlabel {
  position: relative;
  float: left;
}
.dollarinput {
  margin-left: -10px;
  padding-left: 10px;
} 
```

# mysql - 根据mysql中其他表中的匹配值更新列

> ID：12650575
> 
> 赞同：7
> 
> 时间：2012-09-29T06:41:58.643
> 
> 标签：mysql, sql, join, sql-update, match

我有两个表日历和客户表。日历表有一个“客户”列，其中客户表“ID”作为值。但不幸的是，这个日历客户字段值被错误地填充了其他值。两个表都有这些公共字段 Date、SeatingID 和 BusID。如何根据这些常用字段更新日历表客户字段？

下面是两个表的结构。

客户表 ![在此处输入图像描述](../Images/2b6f93c499d876ae369d9954fac54c00.png)

日历表

![在此处输入图像描述](../Images/1f71a3d23eadcb89d61aa5dbb6c3e971.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T07:01:56.650

您可以像这样通过两个表来从第一个表中获取第二个表`UPDATE`的字段：`Customer``Calendar``Customer``JOIN`

```
UPDATE calendar c1
INNER JOIN Customer c2 ON c1.SeatingID = c2.SeatingID AND c1.BusID = c2.BusID
SET c1.Customer = c2.ID --or SET c1.Customer = c2.PassengerName or whatever you want. 
```

在`SET`子句中，您可以设置要更新的列，也可以`JOIN`根据我使用的任何谓词设置两个表`c1.SeatingID = c2.SeatingID AND c1.BusID = c2.BusID`，但您可以选择适合您需要的表。

## [这是一个 SQL Fiddle 演示](http://sqlfiddle.com/#!2/50681/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:49:17.533

试试这个代码：

```
UPDATE calendar cal, customer cust 
SET cal.Customer = cust.ID
where cal.SeatingID = cust.SeatingID 
and cal.BusID = cust.BusID
and cal.DATE = cust.DateOfTravel; 
```

## [SQL 小提琴](http://sqlfiddle.com/#!2/60757/2/0)演示

[这](http://www.electrictoolbox.com/article/mysql/cross-table-update/)是 abaout 更多信息的链接`update`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T09:28:34.930

```
update calendar ca left join customer c 
on c.DateofTravel=ca.Date and c.SeatingID=ca.SeatingID and c.BusID=ca.BusID 
set 
ca.Customer=c.ID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-09T15:19:01.163

使用此查询将帮助您从另一个表列更新表列：

```
UPDATE tableName1 AS tb1
INNER JOIN tableName2 AS tb2 
ON (tb1.columnName= tb2.columnName) 
SET tb1.updatedColumn = tb2.updatedColumnValue
WHERE ADD HERE CONDITION IF REQUIRED 
```

# wcf - 使用单个 SVC 的 WCF 服务版本控制

> ID：12650586
> 
> 赞同：0
> 
> 时间：2012-09-29T06:43:24.370
> 
> 标签：wcf, dependency-injection, versioning, autofac

由于某些特定要求，我必须将单个 svc 用于多个服务版本。我已经使用不同的命名空间为每个版本分离了接口契约。我只有一个类（部分）实现所有服务版本。

我的代码如下：

```
namespace Application.V1
{
[ServiceContract(Namespace = "http://google.com/ApplicationService/v1.0", Name = "IMathService")]
public interface IMathService
}

namespace Application.V2
{
[ServiceContract(Namespace = "http://google.com/ApplicationService/v2.0", Name = "IMathService")]
public interface IMathService
} 
```

应用程序/MathServiceV1.cs 文件：

```
public partial class MathService : V1.IMathService { } 
```

应用程序/MathServiceV2.cs 文件：

```
public partial class MathService : V2.IMathService { } 
```

应用程序/MathService.cs 文件：

```
public partial class MathService {} 
```

我在服务 web.config 中添加了以下内容：

```
 <service behaviorConfiguration="ServiceBehavior" name="Application.MathService">
    <endpoint address="V1" binding="wsHttpBinding" contract="Application.V1.IMathService" />
    <endpoint address="V2" binding="wsHttpBinding" contract="Application.V2.IMathService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service> 
```

我有一个`MathService.svc`包含以下内容的文件：

```
<%@ ServiceHost Service="Application.MathService, Application"
Factory="Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf"%> 
```

如果我使用地址生成代理，`http://localhost:8000/MathService.svc`则生成客户端端点，如下所示：

```
 <client>
        <endpoint address="http://localhost:8000/MathService.svc/V1"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IMathService"
            contract="MathService.IMathService" name="WSHttpBinding_IMathService">
        </endpoint>
        <endpoint address="http://localhost:8000/MathService.svc/V2"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IMathService1"
            contract="MathService.IMathService1" name="WSHttpBinding_IMathService1">
        </endpoint>
    </client> 
```

我担心的是客户端端点地址是生成的，`MathService.svc/V1`但我想查看`V1/MathService.svc`.

如果我使用地址浏览服务，`http://localhost:8000/MathService.svc/V1`我会收到`HTTP 400 Bad Request`错误消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:21:14.153

关于您的 400 bad request 错误 - 您可能没有启用 MEX，因此发出没有有效负载的请求对服务没有意义。

这是一个关于启用 MEX 的问题： [WCF 如何启用元数据？](https://stackoverflow.com/questions/2089304/wcf-how-to-enable-metadata) 启用 MEX - 或使用适当的服务使用者来调用您的服务。

关于您的寻址 - 您无法单独使用 WCF 做您想做的事情。因为您使用的是 IIS 托管的 WCF（我假设这是因为您使用的是 SVC 文件），所以您的 HTTP 请求必须被定向到您的 SVC 文件的位置，之后的任何内容（例如 /V1）都用于定位适当的端点。这就是它在 IIS 中的工作方式。将 /v1/ 放在文件名 (MathService.asmx) 之前会告诉 IIS 在尝试查找名为 MathService.asmx 的文件之前查找名为 /v1/ 的文件夹 - 显然它不会在那里找到任何东西！

但是，您可以在您的 Web.config 中安装 URL 重写器，以将您的首选 URI 重定向到上面提到的那个。这是一些关于在 asp.net 中重写 Url 的文档： [http ://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing](http://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing)

# asp.net-mvc - LINQ 查询无法正常工作

> ID：12650590
> 
> 赞同：0
> 
> 时间：2012-09-29T06:43:57.123
> 
> 标签：asp.net-mvc, dynamics-crm

我有 MVC 应用程序，我有两个实体。

实体线索继承自客户。

![在此处输入图像描述](../Images/1f15521cd443bfc3934cadf01852495f.png)

现在，在 Lead 控制器索引视图中，我编写了以下代码...

```
public ViewResult Index()

       {     

           var Leads = (from c in db.Customers.OfType<CRMEntities.Lead>()
                        where(c.IsActive == true) select c);

            return View(Leads.ToList());

        } 
```

我在索引视图中有下面的代码。

```
@model IEnumerable<CRMEntities.Lead>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
.
. 
```

记录存在于表中，它不返回任何记录。查询对吗？

完整查看代码

```
@model PagedList.IPagedList<CRMEntities.Lead>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            Status
        </th>
        <th>
            IsQualified
        </th>
        <th>
            Name
        </th>
        <th>
            Address
        </th>
        <th>
            OfficePhone1
        </th>
        <th>
            Website
        </th>
        <th>
            Email2
        </th>
        <th>
            Email1
        </th>
        <th>
            FaxNo
        </th>
        <th>
            Remark
        </th>
        <th>
            Rating
        </th>
        <th>
            BusinessType
        </th>
        <th>
            IsActive
        </th>

    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsQualified)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.OfficePhone1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Website)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email2)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FaxNo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Remark)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Rating)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BusinessType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsActive)
        </td>

        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:19:36.670

从可以看到的内容来看，查询看起来不错。

您显示的视图代码不会显示任何内容。在视图中写出@Model.Count() 以查看您有多少条记录。

如果您没有数据库分析器，我建议您购买一个。

# ruby-on-rails - Rails：应用程序显示表/模型名称而不是表中的数据

> ID：12650592
> 
> 赞同：1
> 
> 时间：2012-09-29T06:44:35.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我对 Rails 非常陌生，并且将我的第一个应用程序放在一起。请多多包涵！

我正在制作一个应用程序，让用户对他们正在玩的视频游戏进行评分。在该网站上，我创建了一个页面，用户可以在其中看到他/她过去评价过的所有游戏的列表。

我遇到了一些问题，我认为这很简单，但这让我发疯。

在控制器中我有：

```
def index
  @rate = Rate.where(:rater_id => current_user.id)

  @ratename = Game.where(:id => @rate.first.rateable_id)

  end 
```

在我看来，我有：

```
 <% @rates.order("created_at desc").each do |rates| %>

      You are playing <%= @ratename.name %></div>

  <% end %> 
```

我感到困惑的是，在浏览器中显示的是：“你正在玩游戏”

如何让它显示游戏名称而不仅仅是“游戏”？

更新：

费率模型：

```
class Rate < ActiveRecord::Base
  attr_accessible :rateable_id, :rater_id

  belongs_to :user
  belongs_to :game

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:29:20.787

```
@ratename = Game.where(:id => @rate.first.rateable_id) 
```

意味着您找到具有所有属性的游戏，而不仅仅是名称。

正确的方式：

在控制器中：

```
@rates = current_user.rates.order("created_at desc") #will work if you made correct associations (user has many rates) 
```

鉴于：

```
<% @rates each do |rate| %>   
  You are playing <%= rate.game.name %></div>
<% end %> 
```

如果您进行了正确的关联，rate.game.name 将起作用：游戏有很多速率，速率属于游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T06:54:08.167

尝试直接引用关联。

**控制器：**

```
def index
  @rates = current_user.rates.order("created_at desc")
end 
```

**看法：**

```
<% @rates.each do |rate| %>
  You are playing <%= rate.game.name %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T09:56:07.947

我的建议就是这样做

在索引中

```
def index
   @rates = current_user.rates.includes(:game).order("created_at desc")
end

in view

     <% @rates.each do |rate| %>

      You are playing <%= rate.game.name %></div>

  <% end %> 
```

这将解决您的问题，并且会提高您的服务器效率

# c - pthread_mutex_lock 导致死锁

> ID：12650595
> 
> 赞同：6
> 
> 时间：2012-09-29T06:44:42.940
> 
> 标签：c, locking, pthreads

我正在使用上面的代码使用 2 个线程来增加一个计数器，这些线程独立地获取 mut 锁和增量计数器。线程进入此函数后，我面临死锁。

```
 pthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;

 void *increment_counter(void *counter_addr)
{
    int max = MAX_COUNTER_VALUE;
    int iter;
    int counter;

    for(iter=0;iter< max ;iter++)
   // LOCK  
    pthread_mutex_lock(&mut);
    counter++;
    // UNLOCK 
    pthread_mutex_unlock(&mut);
    return NULL; 
} 
```

谁能告诉我我到底哪里错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T06:49:17.640

您正在尝试锁定互斥锁`max`时间，然后递增`counter`并释放一次。

尝试：

```
for(iter=0;iter< max ;iter++)
{
  // LOCK  
  pthread_mutex_lock(&mut);
  counter++;
  // UNLOCK 
  pthread_mutex_unlock(&mut);
}
return NULL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T06:51:47.073

这可能是你试图做的：

```
int max = MAX_COUNTER_VALUE;
int iter;
int counter;
pthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;

void *increment_counter(void *counter_addr)

{

  pthread_mutex_lock(&mut);    
  for(iter=0;iter< max ;iter++)  
       counter++;
  pthread_mutex_unlock(&mut);
  return NULL; 
} 
```

*   2 个或更多线程仅共享全局范围数据或位于 heap( `malloc`) 上的数据。
*   2 个或更多线程不共享堆栈上定义的变量，此数据对每个线程都是唯一的，无需锁定。

欢迎您阅读[答案](https://stackoverflow.com/questions/1665419/do-threads-share-the-heap) 中共享的内容和未共享的内容等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:25:24.923

作为原则，同一个线程不应多次锁定互斥体，这就是这里发生的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T21:16:53.107

锁初始化很重要。如果您没有将锁初始化为正确的值，您的代码就会中断。初始化锁的一种方法如下：

```
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER; 
```

您也可以使用以下代码动态地执行此任务：

```
int rc = pthread_mutex_init(&lock, NULL);
assert(rc == 0); // always check success! 
```

除了锁初始化之外，你应该检查它的返回码，`pthread_mutex_lock`看看它是否失败，如果它失败了，多线程可以进入临界区。为此，您可以使用与此类似的代码来检查返回代码`pthread_mutex_lock`：

```
// Use this to keep your code clean but check for failures
// Only use if exiting program is OK upon failure
void Pthread_mutex_lock(pthread_mutex_t *mutex) {
int rc = pthread_mutex_lock(mutex);
assert(rc == 0);
} 
```

# html - 贯穿 HTML 页面的水平线

> ID：12650597
> 
> 赞同：1
> 
> 时间：2012-09-29T06:44:53.237
> 
> 标签：html, css

我喜欢在整个 HTML 页面中放置一行。这该怎么做？

![在此处输入图像描述](../Images/f2a8353a2b1e61d5784e6fb3e4c7d8ad.png)

我试过：

```
hr {
    width: 100%;
} 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:48:49.723

`<hr />`标签始终是`100%`其父标签的宽度。

```
<br />​&lt;hr />​​​​​​​​​​​​​​​​​​​&lt;br />​​​​​ 
```

检查父母是否有一些`padding`你需要删除的东西。另一种选择是将`body`标签的`padding`和设置`margin`为`0`。

```
body {
 padding: 0;
 margin: 0;
} 
```

**完整代码：**

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body {
                padding: 0;
                margin: 0;
            } 
        </style>
    </head>

    <body>
        <br />
        <hr />
        <br />
    </body>
</html>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:00:50.570

检查这些演示...

[**http://jsfiddle.net/dqnKQ/1/**](http://jsfiddle.net/dqnKQ/1/) 和 **[http://jsfiddle.net/dqnKQ/2/](http://jsfiddle.net/dqnKQ/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-25T09:11:30.313

# 只需输入`<hr />`，效果很好

如果需要，您始终可以内联样式。例如：

```
<hr style="width:100%; height:6px; background-color: #cce1ec; border:none;" /> 
```

作为 HTML 标签，它也可以用作 CSS 中的选择器，例如：

```
hr{ width:100%; height:6px; background-color:#cce1ec; border:none;} 
```

# android - android RTP收发程序

> ID：12650599
> 
> 赞同：5
> 
> 时间：2012-09-29T06:45:35.683
> 
> 标签：android, audio, rtp

我是 android 编程新手，我需要有关 android RTP 编程的知识。问题

1.  如何在 android 设备上捕获麦克风音频数据？
2.  如何在**不使用 API**的情况下使用捕获的麦克风音频数据构造 RTP 数据包？
3.  如何将 RTP 数据包传输到其他安卓设备？
4.  如何在android中播放接收到的RTP数据包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:05:25.727

For transmitting and receiving RTP packets, I would suggest looking into the [jlibrtp library](http://sourceforge.net/projects/jlibrtp/ "jlibrtp library"). Basically you initialize it with 2 DatagramSockets (one for sending RTP data and one for receiving RTCP data), define a payload type, add a recipient, and send byte arrays. I beleive it handles the RTP timestamps by itself, but you have to make sure you're payload is already formatted by the RFC reccommendations.

[Here is an example of how you would set up an RTP session](http://jlibrtp.svn.sourceforge.net/viewvc/jlibrtp/jlibrtp/demo/org/jlibrtp/demo/UnicastExample.java?revision=249&view=markup "RTP session example")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:39:03.107

你的问题的答案..

1.使用Android Media Api `AudioRecord`，如`recording`语音数据和`AudioTrack`语音`playing`数据，均为.pcm格式。

2.通过这个[链接](http://developer.android.com/reference/android/net/rtp/package-summary.html)

3.你必须`sip`用于传输数据包。

4.通过这个[链接](http://lists.gnu.org/archive/html/linphone-developers/2012-01/msg00008.html)

# ember.js - Yeoman 和车把模板

> ID：12650601
> 
> 赞同：3
> 
> 时间：2012-09-29T06:45:52.533
> 
> 标签：ember.js, handlebars.js, yeoman

有人在使用 yeoman 和 ember 吗？

如果是这样，我如何让 yeoman 编译车把模板？

如果可能的话，我想使用 rake 管道。

有没有人想出一个解决方案来编译来自 yeoman 的车把模板？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T05:25:53.400

Dan Gebhardt 一直致力于让 Ember 车把编译与 yeoman 一起工作。你可以在这里看到他努力的成果：[https ://github.com/dgeb/grunt-ember-templates](https://github.com/dgeb/grunt-ember-templates)

# c++ - 如何访问矢量 > opencv中的轮廓像矩阵元素？

> ID：12650604
> 
> 赞同：3
> 
> 时间：2012-09-29T06:46:41.547
> 
> 标签：c++, opencv, matrix, contour

我的问题是我不知道如何访问`vector <vector <Point>>`轮廓（这是 OpenCV 上的二维矩阵）

我想做这个。如果 Mat 元素不包含在轮廓区域中，我想抑制该矩阵元素。为了做到这一点，我也需要知道轮廓元素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T08:09:32.383

第一个和第二个向量都需要一个 for 循环。像这样的东西：

```
vector< vector<Point> > contours;

for(int i= 0; i < contours.size(); i++)
{
    for(int j= 0; j < contours[i].size();j++) // run until j < contours[i].size();
    {
        cout << contours[i][j] << endl; //do whatever
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:20:50.903

如果我的情况如此紧急，我会更仔细地问我的问题。

如果我努力理解你的问题，你基本上想考虑像素级的轮廓。为此，您应该使用 drawContour 将轮廓绘制到空白矩阵中。然后比较两个矩阵或匹配该矩阵中的一个像素，以防您需要逐个像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T10:48:32.553

如果您需要所有点而不仅仅是边缘点，您可以使用`drawContours(....,thickness=CV_FILLED)`将此轮廓转储到虚拟垫上，然后您可以通过扫描虚拟垫来获得这些点。

# python-3.x - Python3：为什么打印消息时异常需要显式转换

> ID：12650612
> 
> 赞同：-1
> 
> 时间：2012-09-29T06:47:56.690
> 
> 标签：python-3.x

```
class MyException(Exception):
    def __str__(self):
        return self.args[0]

def DoWork():
    raise MyException("My hoverboard is full of eels")
    pass

if __name__ == '__main__':
    try:
        DoWork()
    except MyException as ex:
        print("This will get printed: " + str(ex)) #Line1
        print("This will not get printed and will raise exception: " + ex) #Line2 
```

为什么异常需要在第 1 行中进行显式转换。理想情况下，它应该如第 2 行所示工作。注意：我已经尝试过 -从 MyException 类中删除**str并添加****str**；他们都没有工作。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:59:26.220

您必须将其转换为字符串，因为`x + y`最终会调用`x.__add__(y)`，因此您调用的字符串何时`x`是`str.__add__`，它对两个字符串进行操作，而不是对字符串和异常进行操作。Python 的内置运算符和类型通常不会自动尝试将事物强制为正确的类型（例如 javascript），您必须明确。例如，这与必须使用`int()`in没有什么不同`x = 1 + int("12")`。

请注意，如果您不想使用`str()`，可以使用`%`格式：

```
print("This will also work: %s" % ex) 
```

# assembly - MIPS - 将日期和月份（例如 1 月 20 日）转换为一年中的第 20 天

> ID：12650620
> 
> 赞同：2
> 
> 时间：2012-09-29T06:48:34.277
> 
> 标签：assembly, mips

我有这个任务，我被困在代码之间。我被要求每年收集用户输入的日期和月份。例如，5 月 30 日并显示相当于“一年中的第 140 天。

这只是我不理解或不知道如何进行的程序的一部分。我一直在谷歌搜索这个答案，但没有运气。我听说我必须转换为 ASCII 但仍然不知道如何存储或识别 int + spring 并验证 1 月到 12 月的输入并确定 365 天内的等价物，假设 2 月是 28 日。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:04:31.577

**如何在 MIPS 中将“日和月”转换为一年中的天数。**

（本教程涵盖了字符串到 int 的转换。）

首先要了解的是输入是一个字符串，而不是被视为 int。和字符串。因此，我们需要将前两个字符转换为int。然后将其余部分视为字符串。我们需要一个函数来验证月份字符串，然后返回到它离开的地方，这样程序就可以从那个点继续执行。

转换为整数。字符串示例为：1 月 31 日

让我们为第一个和第二个字符分配一个变量，并将变量指向第一个和第二个字符。

我将分别使用 $t4 和 $t5 如下。

lbu $t4,0($a0) # 获取下一个字符 lbu $t5,1($a0) # 获取第二个字符

好的。现在我们已经指出了我们的变量，并且有一个 3 和 1 的变量。我要教你的是理解字符串在机器中是如何表示的，这样你就可以知道如何处理它们。

**机器中的数据** 表示 例如，1 月 31 日将用十六进制代码表示如下。本主题不会涵盖字符如何以二进制表示。查看此主题的另一个教程。

```
3  1  space J   a  n   u   a  r   y  00     characters
51 49       74   97  110  117  97  114  121  00 ASCII representation of strings 
```

请参阅 ASCII 码表

它以 0 开头，以 00 结尾，即为空。

整数 0 的十六进制代码是 48

整数 1 的十六进制代码是 49 整数 2 的十六进制代码是 50 整数 3 的十六进制代码是 51

这就是我们所需要的。

接下来要转换回整数，我们需要减去 48 个 ASCII 码 51 – 48 = 3 和 49 – 48 = 1

接下来是将第一个字符乘以 10 并将其添加到第二个字符结果中，这将为我们提供转换结果，它是一个 int。

3 * 10 + 1 = 31

你能看到它与用户插入的数字完全相同吗？但是当他/她在数字之后添加月份时它变成了一个字符串，我们不能使用 read_int 5。最常见的错误是将输入视为整数和字符串而不是字符串。

该方法的表示如下在 MIPS 中

```
 addi   $t4,-48       # minus first by 48 
mul    $t4,$t4,10    # multiply by 10
addi   $t5,-48       # minus second by 48
add    $t7, $t4, $t5     # sum the two into $t7 
```

现在你可以继续在你的程序中使用 $t7，显示结果或品牌等。它现在可以工作了，因为它现在是一个整数。

获取一年中某天的方法如上所示，看看它在程序中是如何工作的，它将在不到 3 周的时间内出现在我的网站 www.computersciencegigs.com 上。

剩下的就是为剩余月份添加标签，并将上个月的总和添加到倒数第二行。因为一月是 0，二月是 31，三月是 59 等等。

# ruby - Ruby 中的 Catmull-Rom 插值

> ID：12650625
> 
> 赞同：0
> 
> 时间：2012-09-29T06:49:01.987
> 
> 标签：ruby, catmull-rom-curve

我有一个点列表，我想在它们之间画一条平滑线。我正在使用 RVG 库进行绘图，所以如果我能从我的观点中得到一个 SVG 字符串，我会很高兴。搜了一圈，发现Catmull-Rom大概就是用的算法。

在 Kamelopard 和 Rubyvis 库中找到了一些实现，但从我的点列表中无法理解如何使用它们。

所以，问题是，我如何获取我的 (x,y) 点数组并从中获得 Catmull-Rom 插值 SVG 曲线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T18:03:58.490

Catmull-Rom 可能是一个不错的起点。我最近重新实现了 Kamelopard 版本，发现这很有帮助：[http ://www.cs.cmu.edu/~462/projects/assn2/assn2/catmullRom.pdf](http://www.cs.cmu.edu/~462/projects/assn2/assn2/catmullRom.pdf)

只要您了解矩阵乘法，它就相当简单。你最终会得到一个矩阵方程，你需要计算很多次，在你绘制的路径上的每个点一次。如果您有控制点 A、B、C 和 D，并且您想在 B 和 C 之间绘制曲线，请创建一个矩阵，其中 A、B、C 和 D 为行，并将其代入方程我链接到的论文的顶部。它将是列表中的最后一个矩阵。您需要知道的其他值是“u”，范围从 0 到 1，以及“T”，即样条的“张力”。您将多次评估方程，每次在其域中递增 u。您可以将张力设置为您想要的任何值，介于 0 和 1 之间，它会影响样条曲线的锐利程度。0.5 是一个常见的值。

例如，如果您尝试评估列表中前两个控制点或后两个控制点之间的曲线，您会发现制作矩阵时遇到问题，因为您需要在您正在评估的点。在这些情况下，只需根据需要复制第一个或最后一个控制点。

# .htaccess - 如何伪造网址？

> ID：12650636
> 
> 赞同：1
> 
> 时间：2012-09-29T06:51:23.893
> 
> 标签：.htaccess, http, mod-rewrite, url-rewriting

我有一个 url 作为`http://mydomain.com/levels/home?mode=48bb6e862e54f2a795ffc4e541caed4d`.

我需要制作上述网址的假网址。当我`http://mydomain.com/medium`在浏览器的地址栏中输入 url 时，请求需要进入 url `http://mydomain.com/levels/home?mode=48bb6e862e54f2a795ffc4e541caed4d`，但地址栏需要显示这个 url`http://mydomain.com/medium`本身。

我们如何使用 .htaccess 文件来做到这一点？

编辑：

我试过了

```
RewriteEngine On

RewriteRule ^medium.*$ /levels/home?mode=48bb6e862e54f2a795ffc4e541caed4d [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

但这将重定向到原始网址并在地址栏中`/levels/home?mode=48bb6e862e54f2a795ffc4e541caed4d`显示此网址而不是网址。`/medium`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:54:43.260

用这个

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule medium.php(.*)$ levels/home?mode=48bb6e862e54f2a795ffc4e541caed4d?$1 [L,QSA] 
```

# eclipse - 将 Eclipse 插件导出为 Mac 上的目录

> ID：12650641
> 
> 赞同：0
> 
> 时间：2012-09-29T06:52:09.687
> 
> 标签：eclipse, macos, plugins

我正在尝试将 Eclipse 插件导出为 Mac 上的目录。我执行导出为目录的正常过程，但我不使用选项下的选项打包为 jar。这适用于 Linux，但不适用于 Mac；我总是得到一个jar文件。发生这种情况有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:35:55.377

我仍然没有找到答案，但解决方法很简单；只需使用 jar 命令提取与 export-as-directory 内容相同的 jar 内容。

# android - 由 IllegalStateException 引起

> ID：12650652
> 
> 赞同：0
> 
> 时间：2012-09-29T06:53:44.947
> 
> 标签：android, json, illegalstateexception, runtimeexception

我正在做一个项目，我正在将数据从网络下载并保存到 sqlite 数据库。当我运行我的项目时，它显示 IllegalStateException（已经关闭）。

我的日志是：

```
 09-29 12:14:49.485: E/AndroidRuntime(4956): FATAL EXCEPTION: AsyncTask #2
09-29 12:14:49.485: E/AndroidRuntime(4956): java.lang.RuntimeException: An error occured while executing doInBackground()
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.os.AsyncTask$3.done(AsyncTask.java:266)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.lang.Thread.run(Thread.java:1020)
09-29 12:14:49.485: E/AndroidRuntime(4956): Caused by: java.lang.IllegalStateException: database /data/data/com.irlsolutions.ittrading/databases/ITTrading.sqlite (conn# 0) already closed
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2134)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1526)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1508)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at com.irlsolutions.ittradinglibrary.Query_new.getItemFromEndOfDay(Query_new.java:89)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at com.irlsolutions.ittrading.Symbol_Fetcher.getSymbolFromLocal(Symbol_Fetcher.java:70)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at com.irlsolutions.ittrading.Markets$Markets_Thread.doInBackground(Markets.java:190)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at com.irlsolutions.ittrading.Markets$Markets_Thread.doInBackground(Markets.java:1)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.os.AsyncTask$2.call(AsyncTask.java:252)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

doInBackGround() 是：

```
protected Void doInBackground(Void... arg0) {

    float flt_close1;
    float flt_close2;
    float variation;

    // TODO Auto-generated method stub

    xmlData = XML_Parser_Helper.parseXmlSax(Markets.this, "", R.raw.market_indices_america);        
    lst_codes = xmlData.getListOfItems();

    xmlData = XML_Parser_Helper.parseXmlSax(Markets.this, "", R.raw.market_indices_europe);
    lst_codes.addAll(xmlData.getListOfItems());

    xmlData = XML_Parser_Helper.parseXmlSax(Markets.this, "", R.raw.market_indices_asia);
    lst_codes.addAll(xmlData.getListOfItems());

    for(int i = 0; i < lst_codes.size(); i++){
    lst_symbols.add(
        symbolFetcher.getSymbolFromLocal(
            lst_codes.get(i).get("symbol_code").toString(), 
            lst_codes.get(i).get("market_code").toString(), 
            xmlData,
            "symbols",
            lst_codes.get(i).get("chain_code").toString()
        )
    );
    lst_symbols.get(i).put("company_name", lst_codes.get(i).get("company_name").toString());
    lst_symbols.get(i).put("symbol_code", lst_codes.get(i).get("symbol_code").toString());
    lst_symbols.get(i).put("market_code", lst_codes.get(i).get("market_code").toString());
    lst_symbols.get(i).put("chain_code", lst_codes.get(i).get("chain_code").toString());
    lst_symbols.get(i).put("flag", lst_codes.get(i).get("flag").toString());

    flt_close1 = (float)Double.parseDouble((lst_symbols.get(i).get("close_1").toString().equals(""))?"0.0":lst_symbols.get(i).get("close_1").toString());
    flt_close2 = (float)Double.parseDouble((lst_symbols.get(i).get("close_2").toString().equals(""))?"0.0":lst_symbols.get(i).get("close_2").toString());
    variation = Generic_Functions.getVariation(flt_close1, flt_close2);

    lst_symbols.get(i).put("variation", variation);

    if(symbolFetcher.isSymbolAddedToPortfolio(str_username, lst_codes.get(i).get("symbol_code").toString(), lst_codes.get(i).get("market_code").toString())){
        lst_symbols.get(i).put("added", true);
    }else{
        lst_symbols.get(i).put("added", false);
    }

    publishProgress(new Void[]{});
    }

    return null;
} 
```

我正在使用查询的函数：

```
 public HashMap<String,Object> getItemFromEndOfDay(String str_symbolCode,String str_marketCode){
        HashMap<String,Object> hm = new HashMap<String, Object>();          

        Cursor cursor = database.rawQuery("SELECT * FROM " + Init.TABLE_END_OF_DAY + " WHERE symbol_code='" + str_symbolCode + "' AND market_code='" + str_marketCode + "'", null);

        if(cursor.getCount() > 0){
            cursor.moveToFirst();
            hm.put("symbol_code", cursor.getString(cursor.getColumnIndex("symbol_code")));
            hm.put("market_code", cursor.getString(cursor.getColumnIndex("market_code")));
            hm.put("instrument_name", cursor.getString(cursor.getColumnIndex("instrument_name")));
            hm.put("company_name", cursor.getString(cursor.getColumnIndex("company_name")));
            hm.put("isin", cursor.getString(cursor.getColumnIndex("isin")));
            hm.put("interval", cursor.getString(cursor.getColumnIndex("interval")));
            hm.put("exchange", cursor.getString(cursor.getColumnIndex("exchange")));
            hm.put("ex_open", cursor.getString(cursor.getColumnIndex("ex_open")));
            hm.put("ex_close", cursor.getString(cursor.getColumnIndex("ex_close")));
            hm.put("currency", cursor.getString(cursor.getColumnIndex("currency")));
            hm.put("timezone", cursor.getString(cursor.getColumnIndex("timezone")));

            hm.put("date_1", cursor.getString(cursor.getColumnIndex("date_1")));
            hm.put("hour_1", cursor.getString(cursor.getColumnIndex("hour_1")));
            hm.put("open_interest_1", cursor.getString(cursor.getColumnIndex("open_interest_1")));
            hm.put("open_1", cursor.getString(cursor.getColumnIndex("open_1")));
            hm.put("high_1", cursor.getString(cursor.getColumnIndex("high_1")));
            hm.put("low_1", cursor.getString(cursor.getColumnIndex("low_1")));
            hm.put("close_1", cursor.getString(cursor.getColumnIndex("close_1")));
            hm.put("volume_1", cursor.getString(cursor.getColumnIndex("volume_1")));

            hm.put("date_2", cursor.getString(cursor.getColumnIndex("date_2")));
            hm.put("hour_2", cursor.getString(cursor.getColumnIndex("hour_2")));
            hm.put("open_interest_2", cursor.getString(cursor.getColumnIndex("open_interest_2")));
            hm.put("open_2", cursor.getString(cursor.getColumnIndex("open_2")));
            hm.put("high_2", cursor.getString(cursor.getColumnIndex("high_2")));
            hm.put("low_2", cursor.getString(cursor.getColumnIndex("low_2")));
            hm.put("close_2", cursor.getString(cursor.getColumnIndex("close_2")));
            hm.put("volume_2", cursor.getString(cursor.getColumnIndex("volume_2")));

            cursor.close();
            return hm;
        }else{
                hm.put("symbol_code", str_symbolCode);
            hm.put("market_code", str_marketCode);
            hm.put("instrument_name","");
            hm.put("company_name", "");
            hm.put("isin", "");
            hm.put("interval", "");
            hm.put("exchange", "");
            hm.put("ex_open", "");
            hm.put("ex_close", "");
            hm.put("currency", "");
            hm.put("timezone", "America/New_York");

            hm.put("date_1", "");
            hm.put("hour_1", "");
            hm.put("open_interest_1", "");
            hm.put("open_1", "");
            hm.put("high_1", "");
            hm.put("low_1", "");
            hm.put("close_1", "");
            hm.put("volume_1", "");

            hm.put("date_2", "-");
            hm.put("hour_2", "");
            hm.put("open_interest_2", "");
            hm.put("open_2", "");
            hm.put("high_2", "");
            hm.put("low_2", "");
            hm.put("close_2", "");
            hm.put("volume_2", "");

            cursor.close();
            return hm;
        }
//      cursor.close();
//      return hm;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:11:08.210

异常表明您在游标已关闭时调用 close 。异常中的行号会告诉你在哪里；我猜我会说它在 else 块中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:25:33.100

问题不是关闭它两次，问题是关闭后使用它。

如果您查看查询：

```
09-29 12:14:49.485: E/AndroidRuntime(4956): Caused by: java.lang.IllegalStateException: database /data/data/com.irlsolutions.ittrading/databases/ITTrading.sqlite (conn# 0) already closed
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2134)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1526)
09-29 12:14:49.485: E/AndroidRuntime(4956):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1508) 
```

你看它来自`rawquery`，一个你在开始时使用的函数`getItemFromEndOfDay`。所以如果我没记错的话，你会在调用函数的*开始*出现这个错误，因为那时数据库还没有打开。您可以通过检查您获得的代码的距离来轻松验证这一点。

确保您没有关闭任何东西，然后再次尝试使用该数据库。添加一些调试行以验证它确实是这一行，以及是否在此之前关闭了任何内容。

# ruby-on-rails - ruby 在 linux 中：永久“源 .rvm/scripts/rvm”？

> ID：12650661
> 
> 赞同：9
> 
> 时间：2012-09-29T06:55:18.243
> 
> 标签：ruby-on-rails, ubuntu, rvm

我是 Ruby on Rails 的新手，刚刚按照我在[此处](https://stackoverflow.com/questions/9439502/rvm-install-ruby-installation-error)找到的说明在 Ubuntu Linux 中进行了设置。具体来说，

> 正如 sm 所说，我卸载了所有内容，然后以普通用户身份打开另一个终端会话并运行：
> 
> bash -s stable <<(curl -s [https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) ) 然后我运行 source /home/my-desktop-username/.rvm/scripts/ rvm 作为普通用户 NOT ROOT
> 
> 然后我以普通用户的身份运行 rvm 要求。然后我复制需求并关闭会话，打开根会话并使用 sudo 安装需求
> 
> 然后我关闭会话并打开一个普通用户会话并运行 rvm install ruby​​-1.9.3-p125 如果您以 root 身份运行此命令，它会说 rvm 未安装并建议您使用 sudo apt-get 安装它安装 rvm 不要那样做！
> 
> 所以基本上我有两个问题，我遵循的教程并没有说我应该运行
> 
> source /home/my-desktop-username/.rvm/scripts/rvm 并没有说我不应该以 root 身份运行 rvm，sm 告诉我。谢谢大家，特别是sm

效果很好，但我必须记住

> 源 .rvm/scripts/rvm

每次我打开一个终端来使用 Ruby on Rails 时。

有没有办法永久告诉 Ubuntu 在 .rvm 中查找所有 Ruby 内容？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-29T06:56:58.600

您需要添加您的

```
 source .rvm/scripts/rvm 
```

进入你的`$HOME/.bashrc`档案；阅读[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/index.html)了解更多信息。

# zend-framework - 这个 Zend 表单验证器是什么意思

> ID：12650664
> 
> 赞同：1
> 
> 时间：2012-09-29T06:56:25.590
> 
> 标签：zend-framework, zend-form, zend-validate

您好，我刚刚浏览了一段代码，看到了一行 Zend 验证。我无法理解这意味着什么。

```
 $affiliateModel = new AffiliateUser();
   $metaData = $affiliateModel->info('metadata'); 
```

这是我的表单元素

```
 $first_name = new Zend_Form_Element_Text('first_name');
  $first_name->setRequired(true)
            ->addFilter('StringTrim')
            ->addValidator('StringLength', false, array(2, $metaData['first_name']['LENGTH']))
            ->setDecorators(array('ViewHelper', 'errors')); 
```

我知道每条线做什么，但这条线会做什么

```
->addValidator('StringLength', false, array(2, $metaData['first_name']['LENGTH'])) 
```

有没有机构会解释这`validator`会做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T07:03:36.393

`->addValidator('StringLength', false, array(2, $metaData['first_name']['LENGTH']));`

将添加一个验证器，该验证器仅在字符串的长度落在 [2, x] 中时才认为字符串有效，其中 x 是`$metaData[...][...]`值。（在内部，表单将创建和配置一个[`Zend_Validate_StringLength`](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.set.stringlength)实例。）

# c - C程序有趣的行为

> ID：12650668
> 
> 赞同：6
> 
> 时间：2012-09-29T06:57:06.993
> 
> 标签：c, for-loop

我偶然发现了一段代码，它在调试别人的程序时会产生一些有趣的结果。

我创建了一个小程序来说明这种行为：

```
#include <stdio.h>

int main()
{
        char* word = "foobar"; int i, iterator = 0;
        for (i = 0; i < 6; i++ && iterator++)
          printf("%c", word[iterator]);
        return 0;
} 
```

我知道这不是打印字符串的正确方法。这仅用于演示目的。

在这里，我显然希望输出是“foobar”，但实际上是“ffooba”。基本上它会读取第一个字符两次，就好像第一次`iterator++`执行没有任何反应一样。

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T07:00:08.693

事情`iterator++`实际上*不是*第一次执行。运算符返回变量的`++`当前值，*然后将其*递增，因此第一次通过时，`i++`将等于`0`。`&&`短路，所以`iterator++`不是第一次执行。

要解决此问题，您可以使用无条件评估两者的逗号运算符，而不是短路`&&`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T06:59:46.150

的结果`i++`是第一次迭代时的当前值`i`为零。由于短路，这意味着 `iterator++`在第一次迭代时不执行（仅当左侧为“真”时才执行右侧`&&`）*。*

要解决此问题，您可以使用逗号运算符（如已经建议的那样）使用`++i`它将`i`在增量之后返回值（尽管逗号运算符更明显，必须始终对两者进行评估）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T07:01:13.297

你真的应该学会使用像 eg 这样的调试器`gdb`，并使用警告和调试信息`gcc -Wall -g`（假设是 Linux 系统）进行编译。最近`gcc`的 with`-Wall`会警告您在操作之前*未使用计算的值*`&&`。

`for`循环的增量部分很奇怪。它是`i++ && iterator++`（但应该是`i++, iterator++`）。

When`i`为 0（在第一次迭代中），`i++`结果为 0，因此为 false，因此`iterator++`不执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-29T12:29:54.187

我正在阅读有关逻辑运算符的K＆R，让我引用书中的原话，这可以解释您的问题。“由 && 或 || 连接的表达式从左到右进行评估，一旦知道结果的真假，评估就会停止。” 对这些有很好的理解，输出不会令人困惑。

# c++ - QGridLayout 与 QHBoxLayout & QVBoxLayout

> ID：12650674
> 
> 赞同：2
> 
> 时间：2012-09-29T06:59:15.880
> 
> 标签：c++, qt, layout, gridview, widget

我最近回到了 Qt（在以前的项目中尝试过它并选择了反对它）并且到目前为止我真的很喜欢它的一切。我正在编写一个电视指南风格的应用程序，它将显示 3-7 天的任何地方的剧集指南数据 (EPG)，并且这些数据将从数据库源中输入。

现在我很难确定是否应该使用 QGridLayout 或 QHBoxLayouts 的组合（用于剧集数据）与左侧的单个 QVBoxLayout （用于频道名称/图标）。我对 QGridLayout 的主要担心是我会将它分成“30 分钟”的块，但是当程序在 3:45 开始时，我不确定它是否能正常工作。为了更好地了解我使用 GUI 的目的，可以查看此屏幕截图……</p>

[http://www.itvt.com/files/u3/AT&T-u-verse-tv-epg-2009.jpg](http://www.itvt.com/files/u3/AT&T-u-verse-tv-epg-2009.jpg)

顺便说一句，如果我只想显示其中的一部分（即凌晨 3:00 - 凌晨 4:30）并说 10 个频道，使用哪个选项更容易实现垂直/水平滚动？对于该行为，我是否需要将它们粘贴在不同的小部件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:48:42.837

使用 QGridLayout。

说明：

使用**QVBoxLayout 和 QHBoxLayout**，每行的列数不是固定的（或者如果您以其他方式使用这些布局，则相反），例如，您可以使用以下内容：

```
|----------------------|
|------|------|--------|
|----------|-----------| 
```

如果您将一个项目添加到一行，该行将重新布局而不会干扰其他行，因此列不再对齐。对于某些 GUI，它可能非常方便，但对于您想要的，我认为它不实用。

然后你有**QGridLayout**，*这是你的 GUI 的方式*：所有列都是对齐的。因此，您可以将网格划分为 15 分钟的列，然后将小部件跨越几列。例子：

```
0    15   30   45   60   75   90
|----|----|----|----|----|----| 6 x 15 min episodes
|---------|-------------------| 30 min + 1 hour episodes
|-----------------------------| 1h30 episode
|----|---------|---------|----| 2 x 15 min + 2 x 30 min episodes 
```

对齐是自动的。

*注意*：使用 QVBoxLayout 和 QHBoxLayout，前面的示例将是（没有特定代码）：

```
0    15   30   45   60   75   90
|----|----|----|----|----|----|
|--------------|--------------|
|-----------------------------|
|------|-------|-------|------| 
```

请注意一行中的所有单元格如何具有相同的大小。这可以更改，但需要您手动处理单元格大小...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T10:52:59.623

我推荐 QGridLayout，因为它比使用一堆 QBoxLayout 更容易对齐。使用 QGridLayout，你的`addWidget`和`addLayout`方法有一个可选的`columnSpan`，你可以很好地利用它。例如，您可以将每列设为 15 分钟，因此 45 分钟的节目将跨越 3 列。

您通常不会使用 QLayouts 实现滚动。我不推荐它。相反，您可以将 QGridLayout 的`rowMinimumHeight`and`rowMaximumHeight`设置为相同的值，这样您就可以确保每一行的高度相同，然后对列执行相同的操作。然后，您可以将布局（和封装小部件）放入 QAbstractScrollArea 并将滚动条的步长设置为行高和列高，这样当您滚动时，它会从通道到通道和时间段到时间段，而不是而不是连续滚动。

# extjs - 如何在 ExtJS4.1 模型中将时间戳转换为自定义日期格式？

> ID：12650675
> 
> 赞同：2
> 
> 时间：2012-09-29T06:59:17.483
> 
> 标签：extjs

我想在服务器返回数据后立即将时间戳转换为自定义日期格式。我尝试在 Ext.data.field 中使用“转换”：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-convert](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-convert)

但我不能让它正确。这是我的模型。

```
Ext.define('AM.model.Comment',{
    extend: 'Ext.data.Model',
    fields: [
        { name: 'createdTime', type: 'date', convert:function(v,record){record.parseDate(v,record);}}, // datetime
    ],

    proxy: {
        type: 'rest',
        url:'../comments',
        writer:{
            type:'json'
        },
        reader: {
            type: 'json'
        }
    },
    parseDate:function(v,record){
        console.log(v); //show 1347465600000 
        console.log(Ext.Date.format(new Date(v), 'Y-m-d')); //show 2012-09-13
        return Ext.Date.format(new Date(v), 'Y-m-d');
    }
}); 
```

加载后，我检查了firebug，发现“createdTime”字段是“未定义”。有人可以指出我的错误吗？谢谢！

我可以在不使用“转换”的情况下实现这一点，只需`Ext.Date.format(new Date(v), 'Y-m-d')`在其他组件中使用。但我认为在模型中这样做会更好。然后每个组件总是可以在查询时读取正确的日期格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T06:45:20.683

我找到了解决方案。我没有使用“转换”，而是覆盖了阅读器的 getData() 方法。

```
Ext.define('AM.model.Comment',{
    extend: 'Ext.data.Model',
    fields: [
        { name: 'createdTime', type: 'datetime'},
    ],

    proxy: {
        type: 'rest',
        url:'../comments',
        writer:{
            type:'json'
        },
        reader: {
            type: 'json',
            getData:function(data){
                for(i = 0; i < data.length; i++){
                    data[i].createdTime = Ext.Date.format(new Date(data[i].createdTime), "Y-m-d");
                }
                return data;
            }
        }
    }
}); 
```

如果有人有更好的解决方案，请告诉我。而且我仍然想知道为什么“转换”不起作用。如果有人知道原因，也请告诉我。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-20T16:42:37.480

没有一个商店的答案会考虑作者吗？通过实现行的 renderer() 可以轻松地将其显示为格式化日期......而读/写可能需要实现模型的功能。考虑到从 PHP 到 JavaScript 时间的转换因子是 1000，而可以省略该部分，而以毫秒为单位表示时间（示例中的 rawValue 可以是整数类型或日期类型）：

```
Ext.define('AM.model.Comment', {
   extend: 'Ext.data.Model',
   fields: [{
      name: 'createdTime',
      type: 'DATETIME',

      /* .convert() is triggered twice - on read and on write */
      convert: function(rawValue, model) {

        /* only convert, when rawValue appears to be an integer */
        if(parseInt(rawValue) > 0){
           return Ext.util.Format.date(new Date(parseInt(rawValue)*1000), 'Y-m-d');
        }

        /* it's a date already */
        else if(typeof(rawValue) == 'object'){
           return rawValue;
        }
      }
   }]
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-15T00:15:22.787

不确定您是否仍然关心，但您的 Convert 解决方案可以工作，但您只是错过了回报。这就是你所拥有的。

```
fields: [
    { name: 'createdTime', type: 'date', convert: function(v, record) {
        record.parseDate(v,record);
    }}, // datetime 
```

如果您查看它，您的转换中缺少回报，所以应该是这样

```
 { name: 'createdTime', type: 'date', convert: function(v,record) { 
        return record.parseDate(v,record);
    }}, // datetime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T07:39:03.893

您可以在模型中进行映射。我认为主要问题是您在“转换”功能中错过了“返回”字样。

如果它不起作用，请尝试在格式之前转换为javascript日期

```
Ext.define('AM.model.Comment',{
extend: 'Ext.data.Model',
fields: [
    { 
        name: 'createdTime', type: '**datetime**', convert:function(v,record){
         return Ext.Date.format(new Date(v), 'Y-m-d');
        }
    },  
],

proxy: {
    type: 'rest',
    url:'../comments',
    writer:{
        type:'json'
    },
    reader: {
        type: 'json'
    }
} 
```

});

# .net - 将 MS Access VBA 应用程序转换为 .NET Visual Studio 项目

> ID：12650684
> 
> 赞同：0
> 
> 时间：2012-09-29T07:01:09.993
> 
> 标签：.net, visual-studio, vba, ms-access, converter

我有一个带有几个复杂表单的 MS Access DB 应用程序。我想在 Visual Studio.Net 中重做这个 DB 应用程序，但不想从头开始重新创建表单。

有没有办法将此应用程序转换为 .NET Visual Studio 应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:37:35.440

阿德里安，你是缺乏形式再造的 SOL。您将不得不重新创建表单，但值得注意的是，您的大多数自定义方法都包含在 .Net 框架中。

它不像从 VB6 升级到 VB.net，因为 Access VBA 框架是 VB6+ 库的一种非常稀释的形式。

您将需要双显示器，以便您可以在一个显示器上进行 VS 设计，并使用加载了 Access DB 的另一台显示器作为参考点。

# sql-server - 在哪里可以找到 Microsoft.SqlServer.Dts.Pipeline

> ID：12650688
> 
> 赞同：2
> 
> 时间：2012-09-29T07:01:23.377
> 
> 标签：sql-server, visual-studio-2010, ssis

我正在打开一个 2005 SSIS 包和一个旧的 C# 项目。两者都在这个解决方案中。我缺少命名空间，并且找不到要添加回 C# 项目的引用文件夹的程序集

Microsoft.SqlServer.Dts.Pipeline

例如，不是我在 .NET 引用选项卡的引用列表中找到的。那么我到底是如何获得这些 SQL Server 程序集的呢？我必须安装 SQL Server 2008 sdk 吗？

丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:45:47.813

安装 SQL Server 2008R2 功能“客户端工具 SDK”后，您可以在以下位置找到它

```
C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.DTSPipelineWrap.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:21:04.060

现在是 2005 年，您需要

`C:\Program Files (x86)\Microsoft SQL Server\90\SDK\Assemblies\Microsoft.SqlServer.DTSPipelineWrap.dll`

或者

`C:\Program Files\Microsoft SQL Server\90\SDK\Assemblies\Microsoft.SqlServer.DTSPipelineWrap.dll`

如果当前机器上不可用，则需要获取 SQL Server 2005 安装介质。我不记得您需要选择哪些最低功能集才能确保安装这些 DLL。

# objective-c - 生成运行时 html 字符串不会呈现为 html

> ID：12650690
> 
> 赞同：0
> 
> 时间：2012-09-29T07:02:06.003
> 
> 标签：objective-c, xcode, nsmutablestring

我，返回一个带有 html 的 NSMutableString，现在的问题是当我保存它时，它在浏览器中呈现为字符串。知道可以做些什么吗？

```
<html>
<body>
Hello World
</body>
</html> 
```

它按原样呈现，浏览器未将其检测为 html 并仅显示 helloworld，而不是整个字符串按原样呈现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:07:01.693

你有`<html>`而不是`</html>`到底。

请问可以给代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:31:23.960

你能 NSLog 出可变刺痛吗？我假设它会像这样打印出来

```
&lt;html&gt;<br>
&lt;body&gt;<br>
Hello World<br>
&lt;/body&gt;<br>
&lt;/html&gt; 
```

在这种情况下，您必须确保帖子中的实体已被解析。

你可以通过使用懒惰的方式来做到这一点

```
 replaceOccurancesOfString:@"&lt;" withString:@"<" 
 replaceOccurancesOfString:@"&gt;" withString:@">" 
```

或者您可以以正确的方式进行操作并使用某些东西正确转换实体，在这种情况下，我建议 [https://code.google.com/p/google-toolbox-for-mac/downloads/list](https://code.google.com/p/google-toolbox-for-mac/downloads/list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:46:09.477

您可以呈现包含 HTML 标记的字符串，例如：

```
NSString *YOURSTRING = @"YOUR String as contains Html tags";
NSData *data = [YOURSTRING dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

[YOURWEBVIEW loadData:data  MIMEType:@"text/plain" textEncodingName:@"UTF-8" baseURL:nil]; 
```

# eclipse - 如何在 Eclipse Juno 中分配一个键？

> ID：12650691
> 
> 赞同：1
> 
> 时间：2012-09-29T07:02:21.817
> 
> 标签：eclipse, keyboard-shortcuts

我正在尝试为 Eclipse Juno SR1 中的“构建项目”分配键盘快捷键。似乎是一项简单的任务，但不幸的是它不起作用。

我尝试分配多个组合，但如果按下所选组合，则没有任何反应。如果我从菜单中选择该选项，它工作得很好。

我错过了什么或者这是一个错误？

![在此处输入图像描述](../Images/9e3c5b2b10fff29b80f9798d1a179495.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:24:31.497

你可能在 Juno 中遇到了一个错误。有一个补丁可用于解决该问题，但没有配置解决方法。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=383497](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383497)

# xml - 控制在 findcontrol 上获取 NULL 值

> ID：12650695
> 
> 赞同：0
> 
> 时间：2012-09-29T07:03:53.607
> 
> 标签：xml, reference, null, findcontrol

```
<telerik:RadGrid ID="rgdProductLine" AutoGenerateColumns="False" runat="server">
 <MasterTableView CommandItemDisplay="Top" EditMode="InPlace" Caption="Products">
           <CommandItemTemplate>                  
                     <telerik:RadToolBar ID="RadToolBar1" runat="server" Skin="Windows7">
                   <Items>
                     <telerik:RadToolBarButton Text="Add"  CommandName="InitInsert" ImageUrl="Images/add.png" NavigateUrl="#"></telerik:RadToolBarButton>                                                  
                     <telerik:RadToolBarButton Text="Delete" CommandName="DeleteSelected" ImageUrl="Images/cross.png" NavigateUrl="#">
                     </telerik:RadToolBarButton>
                   </Items>
                        </telerik:RadToolBar>
             </CommandItemTemplate>
  </MasterTableView>
</telerik:RadGrid> 
```

RadToolBar tb = rgdProductLine.MasterTableView.FindControl ("RadToolBar1") as RadToolBar;

在此函数调用中，'tb' 为 Null。也尝试使用 rgdProductLine.MasterTableView.GetItems(GridItemType.CommandItem); 为什么这样？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:33:18.983

请尝试以下代码片段。

```
 GridItem cmdItem = RadGrid1.MasterTableView.GetItems(GridItemType.CommandItem)[0];
    RadToolBar RadToolBar1 = cmdItem.FindControl("RadToolBar1") as RadToolBar;

    //OR

    GridCommandItem cmdItem = RadGrid1.MasterTableView.GetItems(GridItemType.CommandItem)[0] as GridCommandItem;
    RadToolBar RadToolBar1 = cmdItem.FindControl("RadToolBar1") as RadToolBar; 
```

注意：如果上述代码不适合您，请提供您尝试获取命令项的信息。

# android - Android 数据库实例类

> ID：12650696
> 
> 赞同：0
> 
> 时间：2012-09-29T07:04:08.790
> 
> 标签：android, database, sqlite

我需要一个关于如何在 android 和 Java 中实现某些东西的建议。我有一个有 50 多个活动的大项目，我使用两个不同的数据库类来查询 sqlite 语句并从我的系统和用户数据库中检索信息。这是我如何使用和初始化数据库的示例：

```
SystemDatabaseHelper dbHelper = new SystemDatabaseHelper(this, null, 1);
dbHelper.initialize(this); 
```

我在活动中这样做，最近几天我阅读了很多关于 android 中的内存泄漏以及有关提供`Context`给非活动类的全部信息以及这可能导致的泄漏。我的问题是，这是创建某个类并仅从主要活动初始化它而不是在所有其他活动中使用它而不一次又一次地初始化它的最佳方法。

任何建议是实现这一目标的最佳方式...我有一些想法，但想听听您的建议和最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:19:11.440

如果您仅在寻找单例时才尝试初始化数据库帮助程序类，对吗？这是一个如何制作的示例

```
public class ContactDBHelper extends SQLiteOpenHelper {

    private ContactDBHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);

    }

    private static ContactDBHelper mInstance;

    public static synchronized ContactDBHelper getInstance() {

        if (mInstance == null) {
            mInstance = new ContactDBHelper(Util.getApplicationContext(),
                    ContactDB.DB_NAME, null, ContactDB.DB_VERSION);
        }
        return mInstance;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(ContactDB.Contact.CREATE_STMT);
        db.execSQL(ContactDB.Contact.CREATE_PHONE_NUMBER_INDEX);
        db.execSQL(ContactDB.Contact.CREATE_REVERSE_PHONE_NUMBER_INDEX);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

    @Override
    protected Object clone() throws CloneNotSupportedException {

        throw new CloneNotSupportedException();
    }

} 
```

如果你`ContactDBHelper.getInstance();`第一次调用，它会初始化实例，之后任何应用程序组件或任何方法都会调用它，它不会初始化它会返回单例初始化实例。注意：对于 Util.getApplicationContext 它是一个静态帮助方法，它返回在主 Activity 中设置的应用程序上下文。

`WeakReference`对于内存泄漏，您可以使用或避免或保护您的应用程序免受它的影响`SoftRerference`

这是 Util 类

```
public class Util {

    private static WeakReference<Context> applicationContext;

    public static Context getApplicationContext() {
        return applicationContext.get();
    }

    public static void setApplicationContext(Context context) {
        applicationContext = new WeakReference<Context>(context);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:22:46.393

您可以扩展应用程序类并使用单个全局引用。这还具有不使用 Activity 上下文的优点。

```
public class NameOfApp extends Application {  

    public static SQLiteDatabase db;

    @Override
    public void onCreate() {

          super.onCreate();

          try{

               // this will create the database if required (e.g. new install or db deleted)
               db=new Database(this.getBaseContext()).getWritableDatabase();        

          } catch (Exception e) {

               // TODO add alert and quit
               Log.e(TAG,"Error creating DB:" + e.getMessage());
               Toast.makeText(getApplicationContext(), "Error creating DB:" + e.getMessage(), Toast.LENGTH_LONG).show();

        }

    } // onCreate

    @Override
    public void onTerminate(){
         Log.d(TAG, "Application.onTerminate() database closed");
         super.onTerminate();
         savePreferences();
         db.close();
    }

    public void closeDB(){
          db.close();
          Log.d(TAG,"Database closed on request");
    }

    protected SQLiteDatabase getwritableDatabase(){
        return db;
    }

} 
```

使用 MyAppName.getWritableDatabase()。

# c# - 请求锁屏访问在 mscorlib.dll 中引发异常挂起或引发异常

> ID：12650697
> 
> 赞同：4
> 
> 时间：2012-09-29T07:04:14.363
> 
> 标签：c#, windows-8, windows-runtime

我使用以下方法在 WinRT 中请求锁屏访问：

```
public async void RequestLockScreenAccess()
    {
        var status = BackgroundExecutionManager.GetAccessStatus();
        if (status == BackgroundAccessStatus.Unspecified || status == BackgroundAccessStatus.Denied)
            status = await BackgroundExecutionManager.RequestAccessAsync();
        switch (status)
        {
            case BackgroundAccessStatus.AllowedWithAlwaysOnRealTimeConnectivity:
                _mainInfo.NotifyUser = "This app is on the lock screen and has access to Always-On Real Time Connectivity.";
                break;
            case BackgroundAccessStatus.AllowedMayUseActiveRealTimeConnectivity:
                _mainInfo.NotifyUser = "This app is on the lock screen and has access to Active Real Time Connectivity.";
                break;
            case BackgroundAccessStatus.Denied:
                _mainInfo.NotifyUser = "This app is not on the lock screen.";
                break;
            case BackgroundAccessStatus.Unspecified:
                _mainInfo.NotifyUser = "The user has not yet taken any action. This is the default setting and the app is not on the lock screen.";
                break;
        }
    } 
```

这可以给我2个不同的错误。如果我在行前或行上放置断点

```
status = await BackgroundExecutionManager.RequestAccessAsync(); 
```

代码将执行，但抛出以下异常：

> mscorlib.dll 中出现“System.Exception”类型的未处理异常附加信息：找不到元素。（来自 HRESULT 的异常：0x8002802B (TYPE_E_ELEMENTNOTFOUND)）

正如我在另一篇文章中所读到的，这是其他人知道的错误，不了解 Microsoft。如果我不在此行之前放置断点，则执行将挂起。我在这里做错了什么？

似乎如果我卸载我的应用程序，它可能会工作，但在重新运行后它最终会再次失败。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T08:09:24.347

在访问锁屏访问时，我知道有两个错误。第一个，如果您在该行上有断点，那么执行将失败，因为您的应用程序没有在前台运行（您在 Visual Studio 中，而不是在您的应用程序中）并且锁屏对话框找不到您的应用程序的主窗口。

在 Simulator 中运行时会出现另一个问题 - GetAccessStatus 上的每次调用都会引发异常，因为在 Simulator 中基本上不允许此调用。

如果您想对此进行调试，请在 GetAccessStatus 调用之后放置断点并在本地计算机上对其进行测试，它应该可以正常工作。

更新，当在非 UI 线程上调用 RequestAccessAsync 方法时，我也遇到了这个异常。在 UI 线程上调用时，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T01:59:22.533

这应该可以帮助您：

```
async void MainPage_Loaded(object sender, RoutedEventArgs args)
{
    var allowed = await Windows.ApplicationModel.Background
        .BackgroundExecutionManager.RequestAccessAsync();
    System.Diagnostics.Debugger.Break();
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:25:59.220

您是否已验证您的包清单具有启用锁屏的应用程序所需的所有设置？

调用 GetAccessStatus 时不断抛出异常。检查清单文件后，我注意到“锁定屏幕通知”设置为空白。将其设置为“徽章”或“徽章和瓷砖测试”并选择徽章徽标解决了异常问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T11:35:18.640

我在捕捉模式下（也在模拟器和断点中）有同样的问题。

我的解决方法如下：

1.  在应用程序启动后立即在主页上调用 RequestAccessAsync，例如在 OnGotFocus 方法中。
2.  它应该只被调用一次，并且永远不会在快照模式下调用。
3.  不要尝试在模拟器中执行它。
4.  不要在此方法上设置断点。

    ```
    private bool _isAccessRequested;
    protected override void OnGotFocus(RoutedEventArgs e)
    {
        if (!_isAccessRequested)
        {
            _isAccessRequested = true;
            BackgroundExecutionManager.RequestAccessAsync();
        }
    } 
    ```

# vb.net - 如何在 VB.NET 中设置启动画面的 5 秒时间

> ID：12650699
> 
> 赞同：3
> 
> 时间：2012-09-29T07:04:39.910
> 
> 标签：vb.net

我已使用此代码设置我的 vb.net 项目启动屏幕的 5 秒时间。

```
Imports System.Collections.ObjectModel
Namespace My

    Partial Friend Class MyApplication
        Protected Overrides Function OnInitialize(ByVal commandLineArgs As ReadOnlyCollection(Of String)) As Boolean
            Me.MinimumSplashScreenDisplayTime = 5000
            Return MyBase.OnInitialize(commandLineArgs)
        End Function
    End Class

End Namespace 
```

这段代码可以正常工作，但由于我的项目没有时间加载，所以一旦加载了启动画面，第一个表单也被加载，它隐藏了启动画面。

我希望在初始屏幕关闭后加载第一个表单。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:07:58.333

您可以尝试将您的应用程序设置为使用“Sub Main”作为其启动对象，而不是任何一种形式。在“Sub Main”中，您可以在初始化时将初始屏幕显示为无模式表单，然后在准备好显示主表单时将其隐藏。就像是：

```
Sub Main

    Dim slash as new SpashScreenForm
    slash.Show()

    <do the initialization for several seconds>

    slash.Hide()

    Dim mainForm as new TheMainForm
    mainForm.ShowDialow()

 End Sub 
```

您可能需要进行一些 Application.DoEvents() 调用以刷新启动画面。

# javascript - Javascript + 运算符 vs - 运算符

> ID：12650700
> 
> 赞同：1
> 
> 时间：2012-09-29T07:05:24.333
> 
> 标签：javascript

我对这个[片段](http://jsfiddle.net/QXtqC/2/)感到困惑：

```
var n1 = 5-"4";
var n2 = 5+"4";

alert(n1);
alert(n2); 
```

​我知道n1是1。那是因为减号运算符会将字符串“4”转换为数字并将其从5中减去。但是为什么在+运算符的情况下我们会得到54呢？

有人可以向我解释 + 和 = 运算符之间的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T07:08:24.893

通过类型转换`+`，任何包含字符串的表达式都将产生一个字符串。因此`5`，在执行连接之前，所有操作数（在您的情况下）都将转换为字符串。

`-`另一方面，它只是一个算术操作数，因此`"4"`被转换为整数，并且按照您的预期执行计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T07:07:44.510

这是因为 in `n2`,`+`被视为连接，而不是加法。所以`5`转换为字符串`"5"`并`"4"`连接起来，给出“54”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T07:09:08.287

当 的任一侧有字符串时`+`，`+`将被视为字符串连接运算符，另一侧将转换为字符串然后进行连接。

并且要小心类似的东西`1+2+'3'`，结果是`'33'`而不是`'123'`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T07:07:32.333

`-`运算符只有一个含义 - 数字减法（或否定，在这种情况下，也转换为数字）。但是，在运算符的情况下`+`，有两种：数字加法**和**字符串连接。当 operator 的操作数之一`+`是字符串时，它会进行字符串连接而不是数字加法。

整个过程比这要复杂一些，并且涉及一种算法，例如，您可以[在此处](http://javascript.info/tutorial/object-conversion)了解更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T07:08:33.107

该`+`运算符也是一个字符串运算符。javascript 中的每个基本类型变量也可以用它的字符串表示来解释。您只是将 5 附加到 4 得到 54。

该`-`运算符不是字符串运算符，因此编译器尝试将“4”解释为数字，从而得到 1

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-29T07:10:09.540

Javascript 将 5 作为数字，将“4”作为字符串。javascript + 运算符用于连接两件事。如果要添加，请使用 parseInt。

```
var n1 = 5-"4";
var n2 = parseInt(5)+parseInt("4");

alert(n1);
alert(n2); 
```

# android - imageview 中的进度对话框，直到我从服务器加载图像

> ID：12650704
> 
> 赞同：4
> 
> 时间：2012-09-29T07:06:00.043
> 
> 标签：android, android-spinner

`Progress dialog`在`ImageView`我从 android 中的服务器加载图像之前，我该如何添加。图像下载完成后，显示图像。

```
try {
    cachedImage = imageLoader.loadImage(mTopicList.getTopicImage(j), 
        new ImageLoadedListener() {
            public void imageLoaded(Bitmap imageBitmap)
            {
                imageView.setImageBitmap(imageBitmap);
                imageView.invalidate();
            }
        });

} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T07:37:01.737

我遵循的方法来做到这一点。使用框架布局并在其中有一个`ImageView`和`ProgressBar`。我使用了通用图像加载器库，一旦图像被下载，它就会回调。最初显示`ProgressBar`和隐藏`ImageView`到不可见。下载图像后，将图像隐藏`ProgressBar`并显示在`ImageView`.

最初

```
imageView.setVisibility(View.INVISIBLE);
progressBar.setVisibility(View.VISIBLE); 
```

立即加载您的图像。加载后，调用它：

```
progressBar.setVisibility(View.INVISIBLE);
imageView.setVisibility(View.VISIBLE); 
```

希望这对大家有帮助！

# linux - linux shell中的特殊字符

> ID：12650708
> 
> 赞同：1
> 
> 时间：2012-09-29T07:07:15.633
> 
> 标签：linux, shell, passwords, passwd

我用一个命令（以root身份运行）更改了很多Linux机器：

```
密码<<EOF
!@#$!QAZ@WSX
!@#$!QAZ@WSX
EOF

```

当我注销并尝试再次登录时，它告诉我密码错误！！！！

我知道问题出在那些特殊字符上。有人可以帮我吗？当我发布该密码时，应用于系统的真正新密码是什么？我不想手动一一恢复那些机器......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T07:14:20.277

您必须通过在 grub 菜单或 lilo 中附加内核字符串来以单用户模式启动，`1`然后更改您的 root 密码。除非您拥有 /root/.ssh/authorised_keys 中列出的 ssh 密钥并且您的 sshd 允许 root 连接，否则没有其他方法可以修复它。

虽然试试这个：

`!@#QAZ@WSX`

# ruby - 如何同时查看多个分叉进程的输出

> ID：12650709
> 
> 赞同：1
> 
> 时间：2012-09-29T07:07:21.893
> 
> 标签：ruby, parallel-processing, fork, multiprocessing

我在 ruby​​ 中使用“fork”选项，如下所示：

```
pid1 = fork do
  pid1_output = `ruby scrape1.rb`
  puts "#{pid1_output}"
  puts ""
  exit
end

pid2 = fork do
  pid2_output = `ruby scrape2.rb`
  puts "#{pid2_output}"
  puts ""
  exit
end

pid3 = fork do
  pid3_output = `ruby scrape3.rb`
  puts "#{pid3_output}"
  puts ""
  exit
end

pid4 = fork do
  pid4_output = `ruby scrape4.rb`
  puts "#{pid4_output}"
  puts ""
  exit
end

Process.waitall 
```

这里的问题是，有时其中一个进程（例如`ruby scrape1.rb`：）可能会失败或最终返回大量无法在变量中捕获的文本......我如何仍然同时运行 4 个进程并在一个终端中查看它们的所有输出实时窗口？我知道输出的顺序可能会被混淆，但没关系..我基本上想将每个分叉进程的 STDOUT 和 STDERR 重新路由到主程序..这样我就可以看到我的每个人都在刮什么刮板并在它们发生时跟踪它们的进度和错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:44:50.700

```
fork do
  exec("ruby scrape1.rb")
end

fork do
  exec("ruby scrape2.rb")
end

fork do
  exec("ruby scrape3.rb")
end

fork do
  exec("ruby scrape4.rb")
end

Process.waitall 
```

# iphone - 调整图像目标 C

> ID：12650712
> 
> 赞同：0
> 
> 时间：2012-09-29T07:07:59.223
> 
> 标签：iphone, ios

我在 scrollView 中缩放图像，我想根据缩放调整图像大小，我知道我必须在**scrollViewDidEndZooming**方法中编写一些代码。

我正在关注[这个链接](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/comment-page-2/#comments)，但我认为这没有更新（我在实现调整图像大小类别时出错），所以请以正确的方式指导我，如何根据缩放比例调整图像大小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:54:37.900

```
#define DOC_WIDTH 505
#define DOC_HEIGHT 802

+(UIImage*)imageResizeWithBorderFromImage:(UIImage*)source
{

//******* Change size
    int tnw;
    int tnh;

    double x_ratio = DOC_WIDTH / source.size.width;
    double y_ratio = DOC_HEIGHT / source.size.height;
    if (source.size.width <= DOC_WIDTH && source.size.height <= DOC_HEIGHT){
        tnw=(int)source.size.width ;
        tnh=(int)source.size.height;
    }
    else if ((x_ratio * source.size.height) < DOC_HEIGHT) {
        tnh = (int)(ceil(x_ratio * source.size.height));
        tnw = (int)DOC_WIDTH ;
    }
    else {
        tnw = (int)(ceil(y_ratio * source.size.width));
        tnh = (int)DOC_HEIGHT;
    }
    CGSize size = CGSizeMake(tnw, tnh);

    //CGSize size = [source size];
    UIGraphicsBeginImageContext(size);
    CGRect rect = CGRectMake(0, 0, size.width, size.height);
    [source drawInRect:rect blendMode:kCGBlendModeNormal alpha:1.0];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context,(0/255.f),(162/255.f),(237/255.f), 1.0);
    CGContextStrokeRect(context, rect);
    UIImage *testImg =  UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return testImg;
} 
```

# android-animation - Android 2D 动画绘制：性能不佳

> ID：12650721
> 
> 赞同：4
> 
> 时间：2012-09-29T07:09:25.790
> 
> 标签：android-animation

我有一个绘制点网格的应用程序（比如说 5x5）。要求用户在该网格上画线。如果用户的手指触摸到网格中的一个点，则该点被着色以表明该点是绘制路径的一部分。此外，将在每两个触摸点之间画一条线。

问题 - 我的表现非常糟糕，这导致了一些事情：

1.  应用程序变得非常缓慢。
2.  运动事件的`event.getAction()`粒度不好。我的意思是`enter code here`，例如，它不是每 10 个像素记录一次运动，而是每 100 个像素记录一次运动。反过来，这将导致应用程序不重绘用户触摸过的一些点。
3.  有时运动坐标很简单：假设用户将手指从像素 100 移动到像素 500，读数可能会显示 100...200...150...140...300...400。由于某种原因，触摸位置在某些情况下会变得混乱。

查看有关应用程序如何“错过”用户触摸的点并且不绘制绿点的示例：

![显示两条线 - 一条缺少一个点。 两条线都是从上到下画的，先画左边的](../Images/2b8f5b5d8a8710d5484ce42f402f5366.png)

我尝试了几件事：

1.  添加 Thread.sleep(100); 在`else if(event.getAction() == MotionEvent.ACTION_MOVE)`里面`onTouchEvent(MotionEvent event)`，我读到这可能会让 CPU 有时间赶上所有这些触摸事件 - 并没有改变任何事情
2.  添加`this.destroyDrawingCache()`到最后`doDraw()`（我使用它而不是 onDraw，正如我使用的一个教程所建议的那样）。我认为这将清除所有似乎正在减慢系统速度的事件/绘图缓存 - 并没有改变任何事情。

我对 Android 动画相当陌生，所以我不知道如何继续：

1.  我知道我应该在`doDraw()`(my onDraw()) 和`onTouchEvent()`.
2.  我读了一些关于`invalidate()`但不确定如何以及何时使用它的东西。如果我理解正确，每次`doDraw()`调用我的视图都会重新绘制。例如，我的网格是静态的 - 我怎样才能避免重绘它？

++++++++++++++++++++++++++ 10 月 7 日更新 +++++++++++++++++++++++

我尝试使用`canvas.drawCircle(xPos, yPos, 8, mNodePaint);`而不是`canvas.drawBitmap(mBitmap, xPos, yPos, null);`. 我认为如果我不使用实际的位图，这可能会提高性能。事实上 - 它没有！我有点困惑，这么简单的应用程序怎么会给设备带来如此沉重的负担。我一定是以错误的方式做某事。

++++++++++++++++++++++++++ 10 月 12 日更新 +++++++++++++++++++++++

我考虑了@LadyWoodi 的建议——我已经从循环中删除了所有变量声明——无论如何这是一个不好的做法，我也摆脱了我使用的所有“System.Out”行，这样我就可以记录应用程序行为更好地理解为什么我的表现如此糟糕。我很遗憾地说，如果性能发生变化（我实际上并没有测量帧速率变化），那是可以忽略不计的。

还有其他想法吗？

++++++++++++++++++++++++++ 10 月 13 日更新 +++++++++++++++++++++++

1.  由于我有一个静态的点网格（请参阅 screenShot 中的空心黑/白点），在游戏过程中永远不会改变，我做了以下操作：

- 绘制一次网格。

- 使用 . 将绘图捕获为位图`Bitmap.createBitmap()`。

-`canvas.drawBitmap()`用于绘制静态点网格的位图。

- 当我的线程运行时，我检查是否绘制了点网格。如果它正在运行，我将不会重新创建静态点网格。我只会从我之前渲染的位图中渲染它。

令人惊讶的是，这并没有改变我的表现！每次重绘点网格对应用程序性能没有真正的视觉效果。

2.  我决定`canvas = mHolder.lockCanvas(new Rect(50, 50, 150, 150));`在我的绘图线程中使用。只是为了测试目的，看看我是否限制了每次渲染的区域，我可以获得更好的性能。这也没有帮助。

3.  然后我转向 Eclipse 中的 DDMS 工具来尝试分析应用程序。它想出的是，`canvas.drawPath(path, mPathPaint);`(Canvas.native_drawPath) 消耗了大约 88.5% 的 CPU 时间！！！

但为什么？？！我的路径绘制相当简单，mGraphics 包含一组路径，我所做的就是确定每条路径是否在游戏屏幕的边界内，然后我绘制一条路径：

```
//draw path user is creating with her finger on screen
        for (Path path : mGraphics)
        {           
            //get path values       
            mPm = new PathMeasure(path, true);

            mPm.getPosTan(0f, mStartCoordinates, null); 
            //System.out.println("aStartCoordinates X:" + aStartCoordinates[0] + " aStartCoordinates Y:" + aStartCoordinates[1]);
            mPm.getPosTan(mPm.getLength(), mEndCoordinates, null);
            //System.out.println("aEndCoordinates X:" + aEndCoordinates[0] + " aEndCoordinates Y:" + aEndCoordinates[1]);

            //coordinates are within game board boundaries
            if((mStartCoordinates[0] >= 1  && mStartCoordinates[1] >= 1) && (mEndCoordinates[0] >= 1 && mEndCoordinates[1] >= 1))
            {
                canvas.drawPath(path, mPathPaint);
            }                   
        } 
```

任何人都可以在我的示例中看到任何编程错误的代码行吗？

++++++++++++++++++++++++++ 10 月 14 日更新 +++++++++++++++++++++

我已经改变了我的`doDraw()`方法。基本上我所做的就是仅在某些内容发生更改时才绘制屏幕。在所有其他情况下，我只是存储屏幕的缓存位图并渲染它。请看一下：

```
 public void doDraw(Canvas canvas) 
{   
    synchronized (mViewThread.getSurefaceHolder()) 
    {           
        if(mGraphics.size() > mPathsCount)
        {
            mPathsCount = mGraphics.size(); 

            //draw path user is creating with her finger on screen
            for (Path path : mGraphics)
            {           
                //get path values       
                mPm = new PathMeasure(path, true);

                mPm.getPosTan(0f, mStartCoordinates, null); 
                //System.out.println("aStartCoordinates X:" + aStartCoordinates[0] + " aStartCoordinates Y:" + aStartCoordinates[1]);
                mPm.getPosTan(mPm.getLength(), mEndCoordinates, null);
                //System.out.println("aEndCoordinates X:" + aEndCoordinates[0] + " aEndCoordinates Y:" + aEndCoordinates[1]);

                //coordinates are within game board boundaries
                if((mStartCoordinates[0] >= 1  && mStartCoordinates[1] >= 1) && (mEndCoordinates[0] >= 1 && mEndCoordinates[1] >= 1))
                {
                    canvas.drawPath(path, mPathPaint);
                }                   
            }

            //nodes that the path goes through, are repainted green
            //these nodes are building the drawn pattern
            for (ArrayList<PathPoint> nodePattern : mNodesHitPatterns) 
            {
                for (PathPoint nodeHit : nodePattern) 
                {
                    canvas.drawBitmap(mDotOK, nodeHit.x - ((mDotOK.getWidth()/2) - (mNodeBitmap.getWidth()/2)), nodeHit.y - ((mDotOK.getHeight()/2) - (mNodeBitmap.getHeight()/2)), null);
                }                   
            }

            mGameField = Bitmap.createBitmap(mGridNodesCount * mNodeGap, mGridNodesCount * mNodeGap, Bitmap.Config.ARGB_8888);
        }
        else
        {
            canvas.drawBitmap(mGameField, 0f, 0f, null);
        } 
```

现在来看看结果——只要设备不必渲染任何路径并简单地从位图中绘制，事情就会变得非常快。但是当我必须使用`canvas.drawPath()`性能重新渲染屏幕的那一刻变得像吗啡上的乌龟一样迟钝......我拥有的路径越多（最多 6 条或更多，这没什么！）渲染速度越慢。这有多奇葩？？- 我的路径甚至不是真的弯曲 - 都是直线，偶尔会转弯。我的意思是这条线不是很“复杂”。

我在下面添加了更多代码 - 如果您有任何改进想法。

非常感谢，D.

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~

```
public class Panel extends SurfaceView implements SurfaceHolder.Callback {

Bitmap mNodeBitmap; 
int mNodeBitmapWidthCenter;
int mNodeBitmapHeightCenter;

Bitmap mDotOK;
ViewThread mViewThread;
ArrayList<PathPoint> mPathPoints;

private ArrayList<Path> mGraphics = new ArrayList<Path>(3);
private ArrayList<ArrayList<PathPoint>> mNodesHitPatterns = new ArrayList<ArrayList<PathPoint>>();

private Paint mPathPaint;

Path mPath = new Path();

//private ArrayList<Point> mNodeCoordinates = new ArrayList<Point>();
private int mGridNodesCount = 5;
private int mNodeGap = 100;
PathPoint mNodeCoordinates[][] = new PathPoint[mGridNodesCount][mGridNodesCount];

PathMeasure mPm;
float mStartCoordinates[] = {0f, 0f};
float mEndCoordinates[] = {0f, 0f};

PathPoint mPathPoint;

Boolean mNodesGridDrawn = false;

Bitmap mGameField = null;

public Boolean getNodesGridDrawn() {
    return mNodesGridDrawn;
}

public Panel(Context context) {
    super(context);     

    mNodeBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.dot);

    mNodeBitmapWidthCenter =  mNodeBitmap.getWidth()/2;
    mNodeBitmapHeightCenter =  mNodeBitmap.getHeight()/2;

    mDotOK = BitmapFactory.decodeResource(getResources(), R.drawable.dot_ok);

    getHolder().addCallback(this);
    mViewThread = new ViewThread(this);     

    mPathPaint = new Paint();
    mPathPaint.setAntiAlias(true);
    mPathPaint.setDither(true); //for better color
    mPathPaint.setColor(0xFFFFFF00);
    mPathPaint.setStyle(Paint.Style.STROKE);
    mPathPaint.setStrokeJoin(Paint.Join.ROUND);
    mPathPaint.setStrokeCap(Paint.Cap.ROUND);
    mPathPaint.setStrokeWidth(5);
}

public ArrayList<ArrayList<PathPoint>> getNodesHitPatterns()
{
    return this.mNodesHitPatterns;
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

}

public void surfaceCreated(SurfaceHolder holder) {

    //setPadding(100, 100, 0, 0);       

    if (!mViewThread.isAlive()) {
        mViewThread = new ViewThread(this);
        mViewThread.setRunning(true);
        mViewThread.start();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {

    if (mViewThread.isAlive()) {
        mViewThread.setRunning(false);
    }
}

//draw the basic nodes grid that the user will use to draw the lines on
//store as bitmap
public void drawNodesGrid(Canvas canvas)
{
    canvas.drawColor(Color.WHITE);

    for (int i = 0; i < mGridNodesCount; i++) 
    {
        for (int j = 0; j < mGridNodesCount; j++) 
        {
            int xPos = j * mNodeGap;
            int yPos = i * mNodeGap;

            try 
            {
                //TODO - changed
                mNodeCoordinates[i][j] = new PathPoint(xPos, yPos, null);
            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }   

            canvas.drawBitmap(mNodeBitmap, xPos, yPos, null);
        }
    }

    mNodesGridDrawn = true;

    mGameField = Bitmap.createBitmap(mGridNodesCount * mNodeGap, mGridNodesCount * mNodeGap, Bitmap.Config.ARGB_8888);
}

public void doDraw(Canvas canvas) 
{       
    canvas.drawBitmap(mGameField, 0f, 0f, null);

    synchronized (mViewThread.getSurefaceHolder()) 
    {
        //draw path user is creating with her finger on screen
        for (Path path : mGraphics)
        {           
            //get path values       
            mPm = new PathMeasure(path, true);

            mPm.getPosTan(0f, mStartCoordinates, null); 
            //System.out.println("aStartCoordinates X:" + aStartCoordinates[0] + " aStartCoordinates Y:" + aStartCoordinates[1]);
            mPm.getPosTan(mPm.getLength(), mEndCoordinates, null);
            //System.out.println("aEndCoordinates X:" + aEndCoordinates[0] + " aEndCoordinates Y:" + aEndCoordinates[1]);

            //coordinates are within game board boundaries
            if((mStartCoordinates[0] >= 1  && mStartCoordinates[1] >= 1) && (mEndCoordinates[0] >= 1 && mEndCoordinates[1] >= 1))
            {
                canvas.drawPath(path, mPathPaint);
            }                   
        }

        //nodes that the path goes through, are repainted green
        //these nodes are building the drawn pattern
        for (ArrayList<PathPoint> nodePattern : mNodesHitPatterns) 
        {
            for (PathPoint nodeHit : nodePattern) 
            {
                canvas.drawBitmap(mDotOK, nodeHit.x - ((mDotOK.getWidth()/2) - (mNodeBitmap.getWidth()/2)), nodeHit.y - ((mDotOK.getHeight()/2) - (mNodeBitmap.getHeight()/2)), null);
            }                   
        }

        this.destroyDrawingCache();
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    synchronized (mViewThread.getSurefaceHolder()) {

        if(event.getAction() == MotionEvent.ACTION_DOWN)
        {
            //System.out.println("Action downE x: " + event.getX() + " y: " + event.getY());

            for (int i = 0; i < mGridNodesCount; i++) 
            {                   
                for (int j = 0; j < mGridNodesCount; j++) 
                {
                    //TODO - changed
                    //PathPoint pathPoint = mNodeCoordinates[i][j];

                    mPathPoint = mNodeCoordinates[i][j];

                    if((Math.abs((int)event.getX() - mPathPoint.x) <= 35) && (Math.abs((int)event.getY() - mPathPoint.y) <= 35))
                    {
                        //mPath.moveTo(pathPoint.x + mBitmap.getWidth() / 2, pathPoint.y + mBitmap.getHeight() / 2);

                        //System.out.println("Action down x: " + pathPoint.x + " y: " + pathPoint.y);
                        ArrayList<PathPoint> newNodesPattern = new ArrayList<PathPoint>();
                        mNodesHitPatterns.add(newNodesPattern);
                        //mNodesHitPatterns.add(nh);
                        //pathPoint.setAction("down");
                        break;
                    }
                }
            }                   
        }
        else if(event.getAction() == MotionEvent.ACTION_MOVE)
        {                           
            final int historySize = event.getHistorySize();
            //System.out.println("historySize: " + historySize);
            //System.out.println("Action moveE x: " + event.getX() + " y: " + event.getY());

            coordinateFound:
                for (int i = 0; i < mGridNodesCount; i++) 
                {
                    for (int j = 0; j < mGridNodesCount; j++) 
                    {
                        //TODO - changed
                        //PathPoint pathPoint = mNodeCoordinates[i][j]; 
                        mPathPoint = mNodeCoordinates[i][j];

                        if((Math.abs((int)event.getX() - mPathPoint.x) <= 35) && (Math.abs((int)event.getY() - mPathPoint.y) <= 35))
                        {                               
                            int lastPatternIndex = mNodesHitPatterns.size()-1;                  
                            ArrayList<PathPoint> lastPattern = mNodesHitPatterns.get(lastPatternIndex);
                            int lastPatternLastNode = lastPattern.size()-1;                             

                            if(lastPatternLastNode != -1)
                            {
                                if(!mPathPoint.equals(lastPattern.get(lastPatternLastNode).x, lastPattern.get(lastPatternLastNode).y))
                                {
                                    lastPattern.add(mPathPoint);        
                                    //System.out.println("Action moveC [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                                }
                            }
                            else
                            {
                                lastPattern.add(mPathPoint);
                                //System.out.println("Action moveC [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                            }                                           

                            break coordinateFound;
                        }
                        else //no current match => try historical
                        {
                            if(historySize > 0)
                            {
                                for (int k = 0; k < historySize; k++)
                                {
                                    //System.out.println("Action moveH x: " + event.getHistoricalX(k) + " y: " + event.getHistoricalY(k));
                                    if((Math.abs((int)event.getHistoricalX(k) - mPathPoint.x) <= 35) && (Math.abs((int)event.getHistoricalY(k) - mPathPoint.y) <= 35))
                                    {                                                   
                                        int lastPatternIndex = mNodesHitPatterns.size()-1;                  
                                        ArrayList<PathPoint> lastPattern = mNodesHitPatterns.get(lastPatternIndex);
                                        int lastPatternLastNode = lastPattern.size()-1;                             

                                        if(lastPatternLastNode != -1)
                                        {
                                            if(!mPathPoint.equals(lastPattern.get(lastPatternLastNode).x, lastPattern.get(lastPatternLastNode).y))
                                            {
                                                lastPattern.add(mPathPoint);
                                                //System.out.println("Action moveH [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                                            }
                                        }
                                        else
                                        {
                                            lastPattern.add(mPathPoint);
                                            //System.out.println("Action moveH [add point] x: " + pathPoint.x + " y: " + pathPoint.y);
                                        }                                           

                                        break coordinateFound;
                                    }
                                }
                            }                               
                        }
                    }
                }       
        }
        else if(event.getAction() == MotionEvent.ACTION_UP)
        {
            //                          for (int i = 0; i < mGridSize; i++) {
            //          
            //                              for (int j = 0; j < mGridSize; j++) {
            //          
            //                                  PathPoint pathPoint = mNodeCoordinates[i][j];
            //          
            //                                  if((Math.abs((int)event.getX() - pathPoint.x) <= 35) && (Math.abs((int)event.getY() - pathPoint.y) <= 35))
            //                                  {
            //                                      //the location of the node                      
            //                                      //mPath.lineTo(pathPoint.x + mBitmap.getWidth() / 2, pathPoint.y + mBitmap.getHeight() / 2);
            //          
            //                                      //System.out.println("Action up x: " + pathPoint.x + " y: " + pathPoint.y);
            //          
            //                                      //mGraphics.add(mPath);
            //                                      //                          mNodesHit.add(pathPoint);
            //                                      //                          pathPoint.setAction("up");
            //                                      break;
            //                                  }                       
            //                              }
            //                          }               
        }

        //System.out.println(mNodesHitPatterns.toString());

        //create mPath
        for (ArrayList<PathPoint> nodePattern : mNodesHitPatterns) 
        {
            for (int i = 0; i < nodePattern.size(); i++) 
            {
                if(i == 0) //first node in pattern
                {
                    mPath.moveTo(nodePattern.get(i).x + mNodeBitmapWidthCenter, nodePattern.get(i).y + mNodeBitmapHeightCenter);
                }
                else
                {
                    mPath.lineTo(nodePattern.get(i).x + mNodeBitmapWidthCenter, nodePattern.get(i).y + mNodeBitmapWidthCenter);
                }

                //mGraphics.add(mPath);
            }                               
        }

        mGraphics.add(mPath);

        return true;
    }  
} 
```

}

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~

```
public class ViewThread extends Thread {
private Panel mPanel;
private SurfaceHolder mHolder;
private boolean mRun = false;

public ViewThread(Panel panel) {
    mPanel = panel;
    mHolder = mPanel.getHolder();
}

public void setRunning(boolean run) {
    mRun = run;
}

public SurfaceHolder getSurefaceHolder()
{       
    return mHolder;
}

@Override
public void run() 
{
    Canvas canvas = null;
    while (mRun) 
    {
        canvas = mHolder.lockCanvas();
        //canvas = mHolder.lockCanvas(new Rect(50, 50, 150, 150));
        if (canvas != null) 
        {                   
            if(!mPanel.getNodesGridDrawn())
            {
                mPanel.drawNodesGrid(canvas);
            }

            mPanel.doDraw(canvas);
            mHolder.unlockCanvasAndPost(canvas);                
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:10:12.677

这只是想法，但我会尝试将所有声明从循环中取出。我知道将它们本地化会很有用，但它通常非常耗时，因此可能会有所帮助。我的第二个想法已经在你的更新中得到了你的测试，所以现在我也很好奇它会如何发展；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:01:05.877

您正在使用 SurfaceView？首先，我建议您为您的游戏使用图形库...例如 AndEngine 非常易于使用，您将实现开发比使用 Java 画布更漂亮的游戏。性能也更好。

我找不到您的代码有任何问题，但是在 draw 方法中有很多处理，更重要的是在 onTouch 事件中。您应该避免在循环中使用除法或繁重的数学运算，并尝试在之前预先计算所有内容。

但我坚持；对于您正在做的事情，看看[这个](http://www.andengine.org/)，您将立即启动并运行它！

# javascript - chrome manifest 2 json的背景不起作用

> ID：12650724
> 
> 赞同：0
> 
> 时间：2012-09-29T07:10:06.793
> 
> 标签：javascript, json, google-chrome, manifest

我正在做一个 chrome 应用程序来显示 twitter 搜索小部件。我的应用程序适用于清单版本 1 并使用“backgroud_page”我可以很好地显示我的应用程序主 html 页面并且它运行良好，但清单版本 2 的新背景不适合我。

```
"description": "Live",
  "version": "1",
  "manifest_version": 1,
  "app": {
    "launch": {
      "local_path": "index.html"
    }
  },
  "background_page":"index.html",

  "icons": {
    "16": "icon16.png",
    "48": "icon48.png",
    "128": "icon128.png"
  } 
```

上面运行良好，但下面运行不正常

```
 "description": "Live",
  "version": "1",
  "manifest_version": 2,
  "app": {
    "launch": {
      "local_path": "index.html"
    }
  },
  "background": {
    "pages": "index.html"
  },
  "icons": {
    "16": "icon16.png",
    "48": "icon48.png",
    "128": "icon128.png"
  } 
```

使用清单 2，页面加载但未加载 java 脚本。但清单 1 工作正常。

你能帮我吗..如何使用清单2加载该javascript ...

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:18:03.627

在背景元素内部，它应该是“页面”，而不是“页面”。 [http://developer.chrome.com/extensions/background_pages.html](http://developer.chrome.com/extensions/background_pages.html)

# cakephp-2.2 - 在 cakephp2.2 中使用 auth 组件进行基本登录

> ID：12650726
> 
> 赞同：0
> 
> 时间：2012-09-29T07:10:15.860
> 
> 标签：cakephp-2.2

你能告诉如何使用 cake2.2 中的 auth 组件通过从数据库表进行身份验证来登录吗？因为我的 AppController.php 是：`

```
class AppController extends Controller {

    var $components = array('Auth', 'Session');
    var $helpers = array('Form');

}` 
```

我的 UsersController.php 是：

```
 class UsersController extends AppController {
    var $name = 'Users';
    var $components = array('Auth'); 

    function login() 
    {

    }
    function logout() 
    {
    $this->redirect($this->Auth->logout());
    }
  } 
```

我的观点是：view\user\login.ctp

```
 <?php
    echo $this->Session->flash('auth');
    echo $this->Form->create('User');
    echo $this->Form->input('username');
    echo $this->Form->input('password');
    echo $this->Form->end('Login');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:35:27.883

您可以设置 Auth 配置组件，看起来应该类似于

```
public $components = array(
    'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
            'plugin' => 'users'
        ),
        'authError' => 'Did you really think you are allowed to see that?',
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

登录功能，和 Ceeram 发布的有点像

```
<?php
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            return $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
        }
    }
} 
```

我所说的一切都在官方文档中，关于 Auth 的本教程得到了很好的解释[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:55:59.763

```
public function login() {
    if ($this->Auth->login()) {
        $this->redirect($this->Auth->redirect());
    }
} 
```

# jquery - 如何使用图像和文本实现自动完成搜索框

> ID：12650731
> 
> 赞同：2
> 
> 时间：2012-09-29T07:11:11.847
> 
> 标签：jquery, asp.net, ajax, jquery-ui, autocomplete

我想在我的网站中实现一个搜索框，其中包含自动完成文本和照片。

这是我当前的代码：

**HTML**：

```
<h4>search:<input type="text" id="name-list" /></h4> 
```

**JavaScript**：

```
$(function () {
    $("#name-list").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Home/Searchuser",
                type: "POST",
                dataType: "json",
                data: {
                    searchText: request.term,
                    maxResults: 10
                },
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.DisplayName + " R:" + item.Reputation,
                            value: item.DisplayName,
                            id: item.Id
                        }
                    }))
                }
            })
        },
        select: function (event, ui) {
            alert(ui.item ? ("You picked '" + ui.item.label + "' with an ID of " + ui.item.id) : "Nothing selected, input was " + this.value);
        }
    });
}); 
```

我正在使用 ASP.NET MVC2，并且我将 json 字符串（在查询本地数据库之后）与图像 url 和其他信息从控制器传递到视图。文本工作正常。

谁能帮我如何渲染图像并附加到列表项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:56:50.480

我对代码进行了这些更改，然后它运行良好。

**CSS**：

```
DIV.list_item_container {
    height: 90px;
    padding: 0px;
}
DIV.image {
    width:90px;
    height: 90px;
    float: left;
}
DIV.description {
    font-style: italic;
    font-size: 1.1em;
    color: gray;
    padding: 5px;
    margin: 5px;
}
#name-list {
    width: 300px;
} 
```

**JavaScript**：

```
$(document).ready(function () {
    $('#name-list').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Home/Searchuser",
                data: {
                    searchText: request.term,
                    maxResults: 10
                },
                dataType: "json",
                success: function (data) {

                    response($.map(data, function (item) {
                        return {
                            value: item.DisplayName,
                            avatar: item.PicLocation,
                            rep: item.Reputation,
                            selectedId: item.UserUniqueid
                        };
                    }))
                }
            })
        },
        select: function (event, ui) {

            alert(ui.item ? ("You picked '" + ui.item.label) : "Nothing selected, input was " + this.value);

            return false;
        }
    }).data("autocomplete")._renderItem = function (ul, item) {
        var inner_html = '<a><div class="list_item_container"><div class="image"><img src="' + item.avatar + '"></div><div class="label"><h3> Reputation:  ' + item.rep + '</h3></div><div class="description">' + item.label + '</div></div></a><hr/>';
        return $("<li></li>")
            .data("item.autocomplete", item)
            .append(inner_html)
            .appendTo(ul);
    };
}); 
```

# php - preg_replace 将用户输入字符串转换为链接模式

> ID：12650733
> 
> 赞同：0
> 
> 时间：2012-09-29T07:11:45.880
> 
> 标签：php, preg-replace

我想转换用户输入字符串

> “某事...... un// 重要的,,, 像这样的”

至

“像这样不重要的东西”

所以基本上用“-”删除所有重复出现的特殊字符。我用谷歌搜索并来到了这个

```
preg_replace('/[-]+/', '-', preg_replace('/[^a-zA-Z0-9_-]/s', '-', strtolower($string))); 
```

我很想知道这是否可以用一个 preg_replace() 来完成。

只是为了清除问题：用连字符（-）替换所有特殊字符和空格。如果更多的出现连续出现，用单个连字符替换它们

我的解决方案可以按我的意愿完美运行，但我希望在一次通话中做同样的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T07:19:49.193

昨天有一个类似的问题，但我手头没有。

在您当前的*第一个*模式中：

```
[^a-zA-Z0-9_-] 
```

您只寻找一个字符。如果您对一个或多个进行贪婪匹配，则正则表达式引擎将自动将其中的多个替换为一个：

```
[^a-zA-Z0-9_-]+
              ^- + = one or more 
```

然后您仍然存在`-`未捕获字符串内部存在的问题，因此您需要将它们从“not-in”字符类中取出：

```
[^a-zA-Z0-9_]+ 
```

然后应该这样做：

```
preg_replace('/[^a-zA-Z0-9_]+/s', '-', strtolower($string)); 
```

而且因为它只是小写，你也不需要寻找`A-Z`，只是另一个减少：

```
preg_replace('/[^a-z0-9_]+/s', '-', strtolower($string)); 
```

另请参阅*重复* 和/或*量词*，其中`+`是其中之一（请参阅[*重复^(文档；)*](http://php.net/manual/regexp.reference.repetition.php)重复[*使用 Star 和 Plus 正则^(表达式.info)*](http://www.regular-expressions.info/repeat.html) ） 。

此外，如果您查看[修饰符^(*Docs ，*)](http://php.net/manual/reference.pcre.pattern.modifiers.php)您会发现 s *(PCRE_DOTALL)*修饰符不是必需的：

```
$urlSlug = preg_replace('/[^a-z0-9_]+/', '-', strtolower($string)); 
```

希望这对您有所帮助并向您解释您正在使用的正则表达式以及您可以在哪里找到总是有用的更多文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:19:38.653

尝试这个：

```
preg_replace('/[^a-zA-Z0-9_-]+/s', '-', strtolower($string)); 
```

# html - 如何使表格能够使用 Twitter Bootstrap 进行排序？

> ID：12650735
> 
> 赞同：9
> 
> 时间：2012-09-29T07:11:46.070
> 
> 标签：html, css, twitter-bootstrap, tablesorter

我想知道如何让我的表格能够使用 Twitter Bootstrap 进行排序？有哪些事项需要考虑？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-05T13:10:41.703

有一个[库](https://github.com/drvic10k/bootstrap-sortable)提供了使用引导表进行排序的能力。

这是如何使用它的[快速演示。](http://jsfiddle.net/46H6W/13/)

**HTML：**

```
<table class="table table-bordered table-striped sortable">
   <thead>
      <tr>
      <th data-defaultsign="month" data-sortcolumn="1" data-sortkey="1-1">
       Date
      </th>
      </tr>
   </thead>
   <tbody>
     <tr>
        <td data-dateformat="D-M-YYYY">16.4.2004</td>
     </tr>
     <tr>
        <td data-dateformat="D-M-YYYY">6.7.2002</td>
     </tr>
     <tr>
        <td data-dateformat="D-M-YYYY">4.4.2004</td>
     </tr>
     <tr>
        <td data-dateformat="D-M-YYYY">6.6.2012</td>
     </tr>
   </tbody>
</table> 
```

**JS：**

```
(function () {
    var $table = $('table');
    $table.on('sorted', function () {
        console.log("Table was sorted.");
    });
}()); 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T06:57:04.783

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Table Sorting and Searching</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function() {
        $('#example').DataTable();
    } );
  </script>
</head>
<body>

<div class="container">
  <div class="row">
    <div class="col-md-12 col-xs-12 col-sm-12">
        <table id="example" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Position</th>
                    <th>Office</th>
                    <th>Age</th>
                    <th>Start date</th>
                    <th>Salary</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Tiger Nixon</td>
                    <td>System Architect</td>
                    <td>Edinburgh</td>
                    <td>61</td>
                    <td>2011/04/25</td>
                    <td>$320,800</td>
                </tr>
                <tr>
                    <td>Garrett Winters</td>
                    <td>Accountant</td>
                    <td>Tokyo</td>
                    <td>63</td>
                    <td>2011/07/25</td>
                    <td>$170,750</td>
                </tr>
                <tr>
                    <td>Ashton Cox</td>
                    <td>Junior Technical Author</td>
                    <td>San Francisco</td>
                    <td>66</td>
                    <td>2009/01/12</td>
                    <td>$86,000</td>
                </tr>
                <tr>
                    <td>Cedric Kelly</td>
                    <td>Senior Javascript Developer</td>
                    <td>Edinburgh</td>
                    <td>22</td>
                    <td>2012/03/29</td>
                    <td>$433,060</td>
                </tr>
                <tr>
                    <td>Airi Satou</td>
                    <td>Accountant</td>
                    <td>Tokyo</td>
                    <td>33</td>
                    <td>2008/11/28</td>
                    <td>$162,700</td>
                </tr>
                <tr>
                    <td>Brielle Williamson</td>
                    <td>Integration Specialist</td>
                    <td>New York</td>
                    <td>61</td>
                    <td>2012/12/02</td>
                    <td>$372,000</td>
                </tr>
                <tr>
                    <td>Herrod Chandler</td>
                    <td>Sales Assistant</td>
                    <td>San Francisco</td>
                    <td>59</td>
                    <td>2012/08/06</td>
                    <td>$137,500</td>
                </tr>
                <tr>
                    <td>Rhona Davidson</td>
                    <td>Integration Specialist</td>
                    <td>Tokyo</td>
                    <td>55</td>
                    <td>2010/10/14</td>
                    <td>$327,900</td>
                </tr>
                <tr>
                    <td>Colleen Hurst</td>
                    <td>Javascript Developer</td>
                    <td>San Francisco</td>
                    <td>39</td>
                    <td>2009/09/15</td>
                    <td>$205,500</td>
                </tr>
                <tr>
                    <td>Sonya Frost</td>
                    <td>Software Engineer</td>
                    <td>Edinburgh</td>
                    <td>23</td>
                    <td>2008/12/13</td>
                    <td>$103,600</td>
                </tr>
                <tr>
                    <td>Jena Gaines</td>
                    <td>Office Manager</td>
                    <td>London</td>
                    <td>30</td>
                    <td>2008/12/19</td>
                    <td>$90,560</td>
                </tr>
                <tr>
                    <td>Quinn Flynn</td>
                    <td>Support Lead</td>
                    <td>Edinburgh</td>
                    <td>22</td>
                    <td>2013/03/03</td>
                    <td>$342,000</td>
                </tr>
                <tr>
                    <td>Charde Marshall</td>
                    <td>Regional Director</td>
                    <td>San Francisco</td>
                    <td>36</td>
                    <td>2008/10/16</td>
                    <td>$470,600</td>
                </tr>
                <tr>
                    <td>Haley Kennedy</td>
                    <td>Senior Marketing Designer</td>
                    <td>London</td>
                    <td>43</td>
                    <td>2012/12/18</td>
                    <td>$313,500</td>
                </tr>
                <tr>
                    <td>Tatyana Fitzpatrick</td>
                    <td>Regional Director</td>
                    <td>London</td>
                    <td>19</td>
                    <td>2010/03/17</td>
                    <td>$385,750</td>
                </tr>
                <tr>
                    <td>Michael Silva</td>
                    <td>Marketing Designer</td>
                    <td>London</td>
                    <td>66</td>
                    <td>2012/11/27</td>
                    <td>$198,500</td>
                </tr>
                <tr>
                    <td>Paul Byrd</td>
                    <td>Chief Financial Officer (CFO)</td>
                    <td>New York</td>
                    <td>64</td>
                    <td>2010/06/09</td>
                    <td>$725,000</td>
                </tr>
                <tr>
                    <td>Gloria Little</td>
                    <td>Systems Administrator</td>
                    <td>New York</td>
                    <td>59</td>
                    <td>2009/04/10</td>
                    <td>$237,500</td>
                </tr>
                <tr>
                    <td>Bradley Greer</td>
                    <td>Software Engineer</td>
                    <td>London</td>
                    <td>41</td>
                    <td>2012/10/13</td>
                    <td>$132,000</td>
                </tr>
                <tr>
                    <td>Dai Rios</td>
                    <td>Personnel Lead</td>
                    <td>Edinburgh</td>
                    <td>35</td>
                    <td>2012/09/26</td>
                    <td>$217,500</td>
                </tr>
                <tr>
                    <td>Jenette Caldwell</td>
                    <td>Development Lead</td>
                    <td>New York</td>
                    <td>30</td>
                    <td>2011/09/03</td>
                    <td>$345,000</td>
                </tr>
                <tr>
                    <td>Yuri Berry</td>
                    <td>Chief Marketing Officer (CMO)</td>
                    <td>New York</td>
                    <td>40</td>
                    <td>2009/06/25</td>
                    <td>$675,000</td>
                </tr>
                <tr>
                    <td>Caesar Vance</td>
                    <td>Pre-Sales Support</td>
                    <td>New York</td>
                    <td>21</td>
                    <td>2011/12/12</td>
                    <td>$106,450</td>
                </tr>
                <tr>
                    <td>Doris Wilder</td>
                    <td>Sales Assistant</td>
                    <td>Sidney</td>
                    <td>23</td>
                    <td>2010/09/20</td>
                    <td>$85,600</td>
                </tr>
                <tr>
                    <td>Angelica Ramos</td>
                    <td>Chief Executive Officer (CEO)</td>
                    <td>London</td>
                    <td>47</td>
                    <td>2009/10/09</td>
                    <td>$1,200,000</td>
                </tr>
                <tr>
                    <td>Gavin Joyce</td>
                    <td>Developer</td>
                    <td>Edinburgh</td>
                    <td>42</td>
                    <td>2010/12/22</td>
                    <td>$92,575</td>
                </tr>
                <tr>
                    <td>Jennifer Chang</td>
                    <td>Regional Director</td>
                    <td>Singapore</td>
                    <td>28</td>
                    <td>2010/11/14</td>
                    <td>$357,650</td>
                </tr>
                <tr>
                    <td>Brenden Wagner</td>
                    <td>Software Engineer</td>
                    <td>San Francisco</td>
                    <td>28</td>
                    <td>2011/06/07</td>
                    <td>$206,850</td>
                </tr>
                <tr>
                    <td>Fiona Green</td>
                    <td>Chief Operating Officer (COO)</td>
                    <td>San Francisco</td>
                    <td>48</td>
                    <td>2010/03/11</td>
                    <td>$850,000</td>
                </tr>
                <tr>
                    <td>Shou Itou</td>
                    <td>Regional Marketing</td>
                    <td>Tokyo</td>
                    <td>20</td>
                    <td>2011/08/14</td>
                    <td>$163,000</td>
                </tr>
                <tr>
                    <td>Michelle House</td>
                    <td>Integration Specialist</td>
                    <td>Sidney</td>
                    <td>37</td>
                    <td>2011/06/02</td>
                    <td>$95,400</td>
                </tr>
                <tr>
                    <td>Suki Burks</td>
                    <td>Developer</td>
                    <td>London</td>
                    <td>53</td>
                    <td>2009/10/22</td>
                    <td>$114,500</td>
                </tr>
                <tr>
                    <td>Prescott Bartlett</td>
                    <td>Technical Author</td>
                    <td>London</td>
                    <td>27</td>
                    <td>2011/05/07</td>
                    <td>$145,000</td>
                </tr>
                <tr>
                    <td>Gavin Cortez</td>
                    <td>Team Leader</td>
                    <td>San Francisco</td>
                    <td>22</td>
                    <td>2008/10/26</td>
                    <td>$235,500</td>
                </tr>
                <tr>
                    <td>Martena Mccray</td>
                    <td>Post-Sales support</td>
                    <td>Edinburgh</td>
                    <td>46</td>
                    <td>2011/03/09</td>
                    <td>$324,050</td>
                </tr>
                <tr>
                    <td>Unity Butler</td>
                    <td>Marketing Designer</td>
                    <td>San Francisco</td>
                    <td>47</td>
                    <td>2009/12/09</td>
                    <td>$85,675</td>
                </tr>
                <tr>
                    <td>Howard Hatfield</td>
                    <td>Office Manager</td>
                    <td>San Francisco</td>
                    <td>51</td>
                    <td>2008/12/16</td>
                    <td>$164,500</td>
                </tr>
                <tr>
                    <td>Hope Fuentes</td>
                    <td>Secretary</td>
                    <td>San Francisco</td>
                    <td>41</td>
                    <td>2010/02/12</td>
                    <td>$109,850</td>
                </tr>
                <tr>
                    <td>Vivian Harrell</td>
                    <td>Financial Controller</td>
                    <td>San Francisco</td>
                    <td>62</td>
                    <td>2009/02/14</td>
                    <td>$452,500</td>
                </tr>
                <tr>
                    <td>Timothy Mooney</td>
                    <td>Office Manager</td>
                    <td>London</td>
                    <td>37</td>
                    <td>2008/12/11</td>
                    <td>$136,200</td>
                </tr>
                <tr>
                    <td>Jackson Bradshaw</td>
                    <td>Director</td>
                    <td>New York</td>
                    <td>65</td>
                    <td>2008/09/26</td>
                    <td>$645,750</td>
                </tr>
                <tr>
                    <td>Olivia Liang</td>
                    <td>Support Engineer</td>
                    <td>Singapore</td>
                    <td>64</td>
                    <td>2011/02/03</td>
                    <td>$234,500</td>
                </tr>
                <tr>
                    <td>Bruno Nash</td>
                    <td>Software Engineer</td>
                    <td>London</td>
                    <td>38</td>
                    <td>2011/05/03</td>
                    <td>$163,500</td>
                </tr>
                <tr>
                    <td>Sakura Yamamoto</td>
                    <td>Support Engineer</td>
                    <td>Tokyo</td>
                    <td>37</td>
                    <td>2009/08/19</td>
                    <td>$139,575</td>
                </tr>
                <tr>
                    <td>Thor Walton</td>
                    <td>Developer</td>
                    <td>New York</td>
                    <td>61</td>
                    <td>2013/08/11</td>
                    <td>$98,540</td>
                </tr>
                <tr>
                    <td>Finn Camacho</td>
                    <td>Support Engineer</td>
                    <td>San Francisco</td>
                    <td>47</td>
                    <td>2009/07/07</td>
                    <td>$87,500</td>
                </tr>
                <tr>
                    <td>Serge Baldwin</td>
                    <td>Data Coordinator</td>
                    <td>Singapore</td>
                    <td>64</td>
                    <td>2012/04/09</td>
                    <td>$138,575</td>
                </tr>
                <tr>
                    <td>Zenaida Frank</td>
                    <td>Software Engineer</td>
                    <td>New York</td>
                    <td>63</td>
                    <td>2010/01/04</td>
                    <td>$125,250</td>
                </tr>
                <tr>
                    <td>Zorita Serrano</td>
                    <td>Software Engineer</td>
                    <td>San Francisco</td>
                    <td>56</td>
                    <td>2012/06/01</td>
                    <td>$115,000</td>
                </tr>
                <tr>
                    <td>Jennifer Acosta</td>
                    <td>Junior Javascript Developer</td>
                    <td>Edinburgh</td>
                    <td>43</td>
                    <td>2013/02/01</td>
                    <td>$75,650</td>
                </tr>
                <tr>
                    <td>Cara Stevens</td>
                    <td>Sales Assistant</td>
                    <td>New York</td>
                    <td>46</td>
                    <td>2011/12/06</td>
                    <td>$145,600</td>
                </tr>
                <tr>
                    <td>Hermione Butler</td>
                    <td>Regional Director</td>
                    <td>London</td>
                    <td>47</td>
                    <td>2011/03/21</td>
                    <td>$356,250</td>
                </tr>
                <tr>
                    <td>Lael Greer</td>
                    <td>Systems Administrator</td>
                    <td>London</td>
                    <td>21</td>
                    <td>2009/02/27</td>
                    <td>$103,500</td>
                </tr>
                <tr>
                    <td>Jonas Alexander</td>
                    <td>Developer</td>
                    <td>San Francisco</td>
                    <td>30</td>
                    <td>2010/07/14</td>
                    <td>$86,500</td>
                </tr>
                <tr>
                    <td>Shad Decker</td>
                    <td>Regional Director</td>
                    <td>Edinburgh</td>
                    <td>51</td>
                    <td>2008/11/13</td>
                    <td>$183,000</td>
                </tr>
                <tr>
                    <td>Michael Bruce</td>
                    <td>Javascript Developer</td>
                    <td>Singapore</td>
                    <td>29</td>
                    <td>2011/06/27</td>
                    <td>$183,000</td>
                </tr>
                <tr>
                    <td>Donna Snider</td>
                    <td>Customer Support</td>
                    <td>New York</td>
                    <td>27</td>
                    <td>2011/01/25</td>
                    <td>$112,000</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th>Name</th>
                    <th>Position</th>
                    <th>Office</th>
                    <th>Age</th>
                    <th>Start date</th>
                    <th>Salary</th>
                </tr>
            </tfoot>
        </table>
    </div>
  </div>
</div>

</body>
</html> 
```

# c++ - Visual C++ 中的外部模板是否存在错误？

> ID：12650737
> 
> 赞同：6
> 
> 时间：2012-09-29T07:11:59.133
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

鉴于此代码：

```
//header.h
template <class T>
class Foo
{
public:
  Foo(T t) : t(t) {}
  T t;
};

//source1.cpp:
#include "header.h"
extern template class Foo<int>;
int main()
{
  Foo<int> f(42);
} 
```

据我了解，这个程序不应该链接，因为应该没有`class Foo<int>`任何地方的定义（`extern template`应该防止这种情况）。但是，对于 VC++ 11 (Visual Studio 2012)，这确实可以编译和链接。在 GCC 中，它不会：

```
source1.cpp:(.text+0x15): undefined reference to `Foo<int>::Foo(int)' 
```

但是，如果我与 source2.cpp 链接，它可以工作（正如我所期望的那样）：

```
#include "header.h"
template class Foo<int>; 
```

根据这篇博文，从 VC10 开始应该支持 extern 模板。 [http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)

附带说明一下，有没有办法在 Windows / Visual Studio 上列出目标文件中的名称？在 Linux 上，我会这样做：

```
$ nm source1.o
U _ZN3FooIiEC1Ei      <- "U" means that this symbol is undefined.
0000000000000000 T main 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T07:49:20.863

C++11 14.7.2/10 “显式实例化” 说：

> 除了内联函数和类模板特化，显式实例化声明具有抑制它们所引用实体的隐式实例化的效果。

你的类模板中的构造函数`Foo<T>`是内联的。如果您像这样构造标题，VS2012 将按照您期望的方式工作：

```
//header.h
template <class T>
class Foo
{
public:
  Foo(T t);
  T t;
};

template <class T>
Foo<T>::Foo(T t) : t(t) 
{
} 
```

这样构造函数就不是内联的。

我上面引用的标准中的段落确实包括以下注释：

> [注意：目的是作为显式实例化声明主题的内联函数在使用odr（3.2）时仍将被隐式实例化，以便可以考虑将主体内联，但没有外联副本的内联函数将在翻译单元中生成。——尾注]

查看内联 ctor 时创建的汇编代码，将 ctor 的外联副本放置在目标文件中（即使如果您编译带有优化的示例，甚至不会调用 ctor），因此 MSVC 不会似乎没有遵循标准的意图。但是，注释并不规范，因此我认为 MSVC 的行为是符合要求的。

* * *

关于从使用 MSVC 构建的目标文件中转储符号的附带问题，您可以使用该`dumpbin`实用程序：

使用非内联构造函数编译示例时：

```
dumpbin /symbols test.obj

...

008 00000000 UNDEF  notype ()    External     | ??0?$Foo@H@@QAE@H@Z (public: __thiscall Foo<int>::Foo<int>(int))
             ^^^^^
... 
```

使用 ctor 内联编译示例：

```
00A 00000000 SECT4  notype ()    External     | ??0?$Foo@H@@QAE@H@Z (public: __thiscall Foo<int>::Foo<int>(int))
             ^^^^^ 
```

# mysql - Perl + POO 和 Mysql 错误

> ID：12650738
> 
> 赞同：1
> 
> 时间：2012-09-29T07:12:05.193
> 
> 标签：mysql, perl

我刚学了便便，我开始玩 perl，实现了这一点，但我没有得到预期的输出，mysql 有问题吗？还是坏代码？另一件事，相同的查询在控制台和工作台上运行，这个模块添加 chmod +x module.pm

```
#!/usr/bin/perl
use warnings;
use strict; 
use DBI;
use DBD::mysql;
package MysqlTest;

sub new{
    my $class = shift;
    my $query={};
    bless($query, $class);
}
sub conexion{
    my $self=shift;
    my($database, $host, $user, $pwd)=@_;
    my $connect = DBI->connect("DBI:mysql:$database:$host", $user, $pwd) or die $DBI::errstr;;
    $self->{"host"}="$host";
    $self->{"database"}="$database";
    $self->{"user"}="$user";
    $self->{"pass"}="$pwd";
    my $mysqlopen = 1;
return;
}
sub consulta{
    my $self=shift;
    if (!$mysqlopen) { &conexion; }
    my $id = "SELECT * FROM save_bookmarks WHERE id='123'";
    $result = $connect->prepare($id);
    $result->execute();
    my @resultado = $result->fetchrow_array();
    print "@resultado\n";
    return;
}
sub datos{
    my $self=shift;
    print "::DATOS DE ACCESO::\n";
    while (($key, $value)=each(%$self)){
        print "$key => $value\n";
    }
}
1; 
```

该文件称为方法并创建了对象。添加到 chmod +x file.pl ，但我不知道，什么不起作用？

```
#!/usr/bin/perl

use MysqlTest;
use warnings;
use strict;

my $mysqltest = MysqlTest->new();
$mysqltest->conexion("bookmarks", "localhost", "root", "pass");
$mysqltest->consulta(); 
```

在控制台输出

```
DBI connect(':','',...) failed: Access denied for user 'delkav'@'localhost' (using password: NO) at MysqlTest.pm line 17.
Access denied for user 'delkav'@'localhost' (using password: NO) at MysqlTest.pm line 17. 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:00:27.650

OO 本身是正确的。

错误消息来自 MySQL，拒绝用户“delkav”的访问，但我要连接的用户是“root”。

无论如何，您的 DBI->connect() 行似乎是错误的。要遵循[DBD::mysql 文档](http://search.cpan.org/~capttofu/DBD-mysql-4.022/lib/DBD/mysql.pm#Class_Methods)，您必须更改您的行：

```
my $connect = DBI->connect("DBI:mysql:$database:$host", $user, $pwd) or die $DBI::errstr; 
```

至

```
my $connect = DBI->connect("DBI:mysql:database=$database;host=$hostname;", $user, $pwd) or die $DBI::errstr; 
```

# amazon-s3 - 指向索引目录时使s3不列出文件

> ID：12650742
> 
> 赞同：0
> 
> 时间：2012-09-29T07:12:59.077
> 
> 标签：amazon-s3, directory, amazon-cloudfront

我在 s3 中有一个名为`site.cdn`. 我还添加了一个 DNS 记录，因此我不会使用 cloudfront 或 s3 的整个大 url，`cdn.site.com`但是当我将此地址指向浏览器时，它会列出该存储桶中的所有文件...

如何确保 s3 在存储桶的索引目录上时不会显示任何文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:54:17.577

将存储桶设为私有，但将单个文件设置为公开。

# maps - Openstreetmaps + OpenLayers 图像到自定义地图

> ID：12650744
> 
> 赞同：0
> 
> 时间：2012-09-29T07:13:55.467
> 
> 标签：maps, openlayers, openstreetmap

我有一个我想做的项目的想法，但我不知道如何开始。我正在寻找使用简单的图像编辑器创建建筑物内部的地图。建筑物的内部将包含某些我想稍后参考的点。

例如，我希望能够使用诸如openstreetmap + Openlayers之类的东西，然后搜索房间A，并让openstreetmap句柄在地图上该点的位置。

我从本教程开始：http: [//macwright.org/2012/08/13/images-as-maps.html](http://macwright.org/2012/08/13/images-as-maps.html)

但是，我不确定我是否朝着正确的方向前进。有没有人有做过这样的事情的经验？我不确定我想到的堆栈是否是正确的方法。

提前致谢！

# jsf - Primefaces 的 panelMenu

> ID：12650745
> 
> 赞同：1
> 
> 时间：2012-09-29T07:14:04.987
> 
> 标签：jsf, primefaces

我有一个代码，其中包括

```
 <p:panelMenu></> 
```

只有primefaces3.4支持吗？我也使用 Primefaces 3.2 和 3.3.1 使用过它，但它产生了关于该特定标签的错误。使用 3.4 后，它会生成一个不同的错误，如“未解决的编译问题：无法解析导入 oracle 无法解析 OracleDataSource 类型”。但我的代码在包含该标记之前工作正常。真的是数据库相关问题还是 panelMenu 有问题？请帮忙。提前感谢。

# php - 不同国家的magento运输和计费？

> ID：12650749
> 
> 赞同：2
> 
> 时间：2012-09-29T07:14:57.307
> 
> 标签：php, magento, e-commerce

我想在 magento 的送货地址和账单地址中显示不同数量的国家？如果我有来自后端的国家/地区，它将显示在送货地址和账单地址下拉列表中，我不希望这样，我想要单独的数量送货地址和帐单地址字段中的国家/地区。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:20:24.687

据我所知，没有内置的设施可以做到这一点。您可能必须重载/重写`Mage_Checkout_Block_Onepage_Billing`或`Mage_Checkout_Block_Onepage_Shipping`更改`getCountries`. 这可能是唯一需要的步骤，尽管我怀疑您还必须在验证过程中超载一个步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:55:57.293

取自 - [http://www.magentocommerce.com/boards/viewthread/59566/](http://www.magentocommerce.com/boards/viewthread/59566/) --> 为我工作

```
in (path_to_magento)\app\design\frontend\default\my_skin_name)\template\checkout\onepage\shipping.phtml

around line 103, remove or comment out this line: 
<?php echo $this->getCountryHtmlSelect('shipping') ?>

and replace with: 
<select name="shipping[country_id]" id="shipping:country_id" class="validate-select"        title="Country" onchange="shipping.setSameAsBilling(false);"> 
<option value=""> </option> 
<option value="US" selected="selected">United States</option> 
</select> 
```

或者您自己明确想要显示的国家/地区。只要您拥有有效的 2 个字母的国家/地区缩写，Magento 就会自动为您处理州/省选择的其余部分。

# php - MS Word 文档文件生成索引

> ID：12650750
> 
> 赞同：6
> 
> 时间：2012-09-29T07:15:09.543
> 
> 标签：php, ms-word, phpword

我使用 phpword 生成 MS Word 文档，有什么方法可以帮助我在生成的文件末尾生成索引？

我认为可行的一种方法是读取生成的 MS Word 文件并找到每个单词的位置（例如 MS Word 文件中的页码），然后在单独的 MS Word 文件中重新生成索引。

有没有更好的方法？
所需文件的示例：

```
A 
Animal 51,98 
Apple 11,54,99 

B
Basket 55  
...
..
etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:15:32.647

老实说，shox，我不认为你在这里有很多好的选择。我对此进行了一些研究，因为这对我来说也很有趣，但是除了您那里有关如何使之成为可能的帖子之外，我在 phpword 文档或论坛中找不到任何东西。在它的背面，您可以*尝试*解压缩 docx 包（它是一个 zip 文件）并直接在其中操作 XML 文件。我不知道这将如何进行……假设正确，这与在 Word 中手动完成没有什么不同。我尝试使用一些填充文本，并手动为文档中一个术语的索引执行“标记全部”。我能找到以下内容：

添加为 ~/[Content_Types].xml 中的第一个子项：

```
<Override PartName="/customXml/itemProps1.xml" ContentType="application/vnd.openxmlformats-officedocument.customXmlProperties+xml" /> 
```

创建文件夹 ~/CustomXml -

在 ~/CustomXml 文件夹中，创建 item1.xml ：

```
<b:Sources SelectedStyle="\APA.XSL" StyleName="APA" xmlns:b="http://schemas.openxmlformats.org/officeDocument/2006/bibliography" xmlns="http://schemas.openxmlformats.org/officeDocument/2006/bibliography"></b:Sources> 
```

在 ~/CustomXml 文件夹中，创建 itemProps1.xml ：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ds:datastoreItem ds:itemID="{3DC430FE-7F6E-49D7-9EFC-E4F37E42ABA0}" xmlns:ds="http://schemas.openxmlformats.org/officeDocument/2006/customXml">
  <ds:schemaRefs>
     <ds:schemaRef ds:uri="http://schemas.openxmlformats.org/officeDocument/2006/bibliography"/>
  </ds:schemaRefs>
</ds:datastoreItem> 
```

创建文件夹 ~/CustomXml/_rels ：在 ~/CustomXml/_rels 文件夹中，创建 item1.xml.rels ：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
  <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps" Target="itemProps1.xml"/>
</Relationships> 
```

~/docProps 文件夹已更改，但它无关紧要，因为 word 在每次打开/关闭时都会重新生成/更新这些值，并且它们与文件的内容没有任何关系。

基本上，这会留下 ~/word 文件夹。因此， ~/word/styles.xml 更改为在末尾添加索引样式，如下所示：

```
<w:style w:type="paragraph" w:styleId="Index1">
  <w:name w:val="index 1"/>
  <w:basedOn w:val="Normal"/>
  <w:next w:val="Normal"/>
  <w:autoRedefine/>
  <w:uiPriority w:val="99"/>
  <w:semiHidden/>
  <w:unhideWhenUsed/>
  <w:rsid w:val="00C52B35"/>
  <w:pPr>
    <w:spacing w:after="0" w:line="240" w:lineRule="auto"/>
    <w:ind w:left="220" w:hanging="220"/>
  </w:pPr>
</w:style> 
```

~/word/settings.xml 中的 w:rsid 元素都发生了变化，老实说，这些元素分散在各处，我不确定它们是如何工作/计算的，或者它们是否太重要。

在 ~/word/_rels/document.xml.rels 中，添加了以下内容作为关系节点的子节点：

```
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml" Target="../customXml/item1.xml"/> 
```

最后，也许是最重要的，在 ~/word/document.xml 中，我的索引术语（“sit”）的每次出现都后跟以下元素：

```
<w:r w:rsidR="00C52B35">
  <w:fldChar w:fldCharType="begin"/>
</w:r>
<w:r w:rsidR="00C52B35">
  <w:instrText xml:space="preserve">XE "</w:instrText>
</w:r>
<w:r w:rsidR="00C52B35" w:rsidRPr="00C90937">
  <w:instrText>sit</w:instrText>
</w:r>
<w:r w:rsidR="00C52B35">
  <w:instrText xml:space="preserve">"</w:instrText>
</w:r>
<w:r w:rsidR="00C52B35">
  <w:fldChar w:fldCharType="end"/>
</w:r> 
```

最后还有一点我插入索引的地方：

```
<w:p w:rsidR="00C52B35" w:rsidRDefault="00C52B35" w:rsidP="00DE5AB4">
  <w:pPr>
    <w:rPr>
      <w:b/>
      <w:noProof/>
    </w:rPr>
    <w:sectPr w:rsidR="00C52B35" w:rsidSect="00C52B35">
      <w:pgSz w:w="12240" w:h="15840"/>
      <w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="720" w:footer="720" w:gutter="0"/>
      <w:cols w:space="720"/>
      <w:docGrid w:linePitch="360"/>
    </w:sectPr>
  </w:pPr>
  <w:r>
    <w:rPr>
      <w:b/>
    </w:rPr>
    <w:fldChar w:fldCharType="begin"/>
  </w:r>
  <w:r>
    <w:rPr>
      <w:b/>
    </w:rPr>
    <w:instrText xml:space="preserve">INDEX \c "2" \z "1033"</w:instrText>
  </w:r>
  <w:r>
    <w:rPr>
      <w:b/>
    </w:rPr>
    <w:fldChar w:fldCharType="separate"/>
  </w:r>
</w:p>
<w:p w:rsidR="00C52B35" w:rsidRDefault="00C52B35">
  <w:pPr>
    <w:rPr>
      <w:noProof/>
    </w:rPr>
  </w:pPr>
  <w:r>
    <w:rPr>
      <w:noProof/>
    </w:rPr>
    <w:lastRenderedPageBreak/>
    <w:br w:type="page"/>
  </w:r>
</w:p>
<w:p w:rsidR="00C52B35" w:rsidRDefault="00C52B35">
  <w:pPr>
    <w:pStyle w:val="Index1"/>
    <w:tabs>
      <w:tab w:val="right" w:leader="dot" w:pos="4310"/>
    </w:tabs>
    <w:rPr>
      <w:noProof/>
    </w:rPr>
  </w:pPr>
  <w:r>
    <w:rPr>
      <w:noProof/>
    </w:rPr>
    <w:lastRenderedPageBreak/>
    <w:t>sit, 1, 2</w:t>
  </w:r>
</w:p>
<w:p w:rsidR="00C52B35" w:rsidRDefault="00C52B35" w:rsidP="00DE5AB4">
  <w:pPr>
    <w:rPr>
      <w:b/>
      <w:noProof/>
    </w:rPr>
    <w:sectPr w:rsidR="00C52B35" w:rsidSect="00C52B35">
      <w:type w:val="continuous"/>
      <w:pgSz w:w="12240" w:h="15840"/>
      <w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="720" w:footer="720" w:gutter="0"/>
      <w:cols w:num="2" w:space="720"/>
      <w:docGrid w:linePitch="360"/>
    </w:sectPr>
  </w:pPr>
</w:p>
<w:p w:rsidR="00371DB1" w:rsidRPr="00371DB1" w:rsidRDefault="00C52B35" w:rsidP="00DE5AB4">
  <w:pPr>
    <w:rPr>
      <w:b/>
    </w:rPr>
  </w:pPr>
  <w:r>
    <w:rPr>
      <w:b/>
    </w:rPr>
    <w:lastRenderedPageBreak/>
    <w:fldChar w:fldCharType="end"/>
  </w:r>
</w:p> 
```

希望这会有所帮助。我知道这是一个复杂的解决方案，但这是我能找到的唯一可以帮助您并以自动化方式实际完成的方法。它[比官方的手动方式略胜一筹](http://office.microsoft.com/en-us/word-help/create-an-index-and-update-an-index-HP001226499.aspx)，并且应该保留您以这种方式执行的索引的功能。如果您认真执行此操作，我建议您使用[WinMerge](http://winmerge.org/)查看文件之间的差异（打开两个文件夹后，右键单击并使用 Compare Special > XML），祝您好运。如果它是一次性的，我只会硬着头皮手动完成。它可能更快并且头痛更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:40:25.737

我想你可以阅读文档的标题：阅读这篇文章，并不是你想要的，但也许通过修改可能是正确的方法：

[根据标题标签自动生成嵌套目录](https://stackoverflow.com/questions/4912275/automatically-generate-nested-table-of-contents-based-on-heading-tags)

# ipad - 如何在一个 UIVIEWCONTROLLER 中添加视频文件和 TextView？

> ID：12650752
> 
> 赞同：0
> 
> 时间：2012-09-29T07:15:11.163
> 
> 标签：ipad, ios5, mpmovieplayercontroller

我想在我的 iPad 应用程序中添加视频文件。

我已经使用 MPMoviePlayerController 为此它工作正常。

但我有一个问题，这个控制器正在覆盖 iPad 的孔窗口。

我希望我的 UIViewController 应该包含一个 textView、导航栏、一个正在运行的视频文件，

和四个 UIButton。我能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:38:38.357

您可以通过将该 MPMoviePlayer 添加为您的视图的子视图来完成此操作，这意味着您的视图上的 addSubview 具有固定框架。

像这样，

```
MPMoviePlayerController *player =
        [[MPMoviePlayerController alloc] initWithContentURL: myURL];
[player prepareToPlay];
[player.view setFrame: myView.bounds]; // myView is your parent view which hold your player 
[myView addSubview: player.view];

[player play]; 
```

有关更多参考，**请检查[此。](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)**

# c# - 如何在 Windows 重新启动或关闭时触发偶数或计划任务，并强制 Windows 等到某些操作完成

> ID：12650753
> 
> 赞同：1
> 
> 时间：2012-09-29T07:15:16.153
> 
> 标签：c#, vb.net

当用户重新启动或关闭他的计算机时，我需要在我用 C# 开发的 Windows 服务中执行一些操作，

所以我需要将一些文件传输到服务器（大约 5 个文件，每个文件是 60 MB），所以我需要我的服务 tp 强制窗口等到传输完成。

我突然想到一个想法，如何为 Windows 安排任务？所以对我来说最好的事情是在 c# 中做一些看起来像 windows 更新屏幕的东西，所以 windows 会等待复制这些文件吗？或者至少当 Windows 重新启动或关闭时我需要在我的 Windows 服务中触发一个偶数，并且 winodws 将等到文件传输完毕。

C# 或 VB.NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:29:40.123

要阻止关机，您可以使用 ShutdownBlockReasonCreate 之类的 api 函数，但这不是一个好习惯。对你来说最好的方法是改变你的工作流程，你可以做一个计划作业，每分钟在你的服务器中添加新记录，这样你的数据就会被保存......

# php - 如何使用现有的旧数据库运行 joomla 网站？

> ID：12650756
> 
> 赞同：0
> 
> 时间：2012-09-29T07:16:24.747
> 
> 标签：php, joomla

我已经完成了以前创建的 joomla 网站的数据库备份。但我不知道管理员用户名和密码。我已成功导入旧数据库并在 configuration.php 中编辑了必要的详细信息，例如用户、密码、数据库名称，但我仍然收到此错误：

数据库错误：无法连接到数据库：无法连接到 MySQL。

```
var $dbtype = 'mysql';
var $host = 'localhost';
var $user = 'root';
var $db = 'old_databasename';
var $dbprefix = 'jos_'; 
```

我想让这个joomla网站运行，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:14:59.630

如果您备份的数据库来自旧版本的 Joomla，例如 1.5，并且您尝试将其用于 Joomla 2.5 网站，那么它将无法工作，但我不确定它是否会导致您描述的错误在你的问题中。

我不确定您是否故意没有将密码变量添加到您的问题中，但请确保您已将其填写在 config.php

目前，您不需要管理员用户名和密码。您的首要任务是让网站正常工作。完成此操作后，安装您在以前站点上使用的任何 Joomla 版本的新副本，配置您的管理员详细信息，然后执行以下操作：

1.  打开 phpMyAdmin，转到`#__users`新站点的表。
2.  复制管理员帐户的所有详细信息。
3.  转到`#__users`旧站点的表，并覆盖所有详细信息。
4.  转到您创建的新站点的管理后端，并尝试使用您为新站点选择的用户名和密码登录。

然而，如前所述，您的首要任务是防止 MySQL 错误并让您的旧站点正常工作。

希望这可以帮助

# android - 以编程方式为 ViewSwitcher 设置动画

> ID：12650758
> 
> 赞同：3
> 
> 时间：2012-09-29T07:16:39.613
> 
> 标签：android, android-animation, viewswitcher

我在布局中设置动画是这样的：

```
<ViewSwitcher
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:inAnimation="@android:anim/slide_in_left"
    android:outAnimation="@android:anim/slide_out_right" > 
```

我怎样才能以编程方式做同样的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T07:23:17.283

请阅读`ViewSwitcher`该类的文档，它有两种设置输入/输出动画的方法：

```
// load the two animations  
Animation animIn = AnimationUtils.loadAnimation(context, android.R.anim.slide_in_left);
Animation animOut = AnimationUtils.loadAnimation(context, android.R.anim.slide_out_right);
// set them on the ViewSwitcher
vs.setInAnimation(animIn);
vs.setOutAnimation(animOut); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:23:43.013

```
viewswitcher.setInAnimation(AnimationUtils.loadAnimation(context, R.anim.fade_in));
viewswitcher.setOutAnimation(AnimationUtils.loadAnimation(context, R.anim.fade_out)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T08:28:47.563

您可以跳过加载动画的步骤，`AnimationUtils`而是直接传递动画资源：

```
switcher.setInAnimation(this, android.R.anim.slide_in_left);
switcher.setOutAnimation(this, android.R.anim.slide_out_right); 
```

# windows-8 - 在 Windows 8 中禁用操纵惯性

> ID：12650759
> 
> 赞同：1
> 
> 时间：2012-09-29T07:16:43.020
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winrt-xaml

Windows 8 操作事件默认应用惯性，[如本文所述](http://www.charlespetzold.com/blog/2012/02/Windows-8-Touch-Events-Interactions.html)，即操作增量事件在用户抬起手指后继续触发。

有谁知道如何“调整”或禁用这种惯性？我已经尝试过处理`ManipulationInertiaStarting`和设置`e.Handled=true`，但这并没有禁用惯性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T21:44:20.087

您可以使用[ManipulationMode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.manipulationmode)进行设置，例如。

```
dragOverlay.ManipulationMode =
    ManipulationModes.TranslateInertia |
    ManipulationModes.TranslateX |
    ManipulationModes.TranslateY; 
```

对比

```
dragOverlay.ManipulationMode =
    ManipulationModes.TranslateX |
    ManipulationModes.TranslateY; 
```

您还可以在操作事件中检查 e.IsInertial 并调用[e.Complete()](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.manipulationdeltaroutedeventargs.complete%28v=win.10%29.aspx)以停止当前操作而没有惯性。

# ios - 使用 didSelectRowAtIndexPath 从表中获取值

> ID：12650760
> 
> 赞同：1
> 
> 时间：2012-09-29T07:17:09.443
> 
> 标签：ios, uitableview

我正在尝试从表视图控制器获取值并将其发送到另一个表视图控制器。

我想通过`didSelectRowAtIndexPath`我用过的方法来实现

```
UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];  
NSString *num=cell.textLabel.text; 
```

这里的问题是单元格包含一个数字和一个字符串，但我只想要数字。
有没有办法只得到号码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:56:02.743

我几乎没有理由想到尝试将有关数据的信息存储在视图的标签或标签中是一个好主意。它使程序更难编写和更难理解。相反，使用提供数据的相同方法首先放入视图。这是一个例子：

```
- (void)tableView:(UITableView *)tv didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    id dataObject = [self dataForIndexPath:indexPath]; // assuming you called this in ..cellForRow... to provide the "vc" instance you mentioned in your comment
    int value = dataObject.number;
    //Now go do work with the value you extracted. 
} 
```

此方法`dataForIndexPath:`仅表示为获取`vc`您在评论中引用的实例作为用于填充表格单元格标签的数据源所做的工作。请注意，此方法根本不访问视图 - 它直接访问数据的原始源以获取您需要的内容。与其他解决方案不同，这也适用于任何类型的数据，而不仅仅是整数。

希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-30T09:57:10.213

与其尝试从文本标签中提取它，不如将单元格的标记值设置为 cellForRowAtIndexPath 方法中的数字，并在方法 didSelectRowAtIndexPath 中使用它。

cellForRowAtIndexPath

```
cell.tag = vc.Number; 
```

didSelectRowAtIndexPath

```
UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];  
NSUInteger num=cell.tag; 
```

# ios - 如何正确删除 AVPlayer/AVPlayerItem？

> ID：12650763
> 
> 赞同：0
> 
> 时间：2012-09-29T07:17:30.550
> 
> 标签：ios, avplayer

我收到警报消息“无法解码。此媒体所需的解码器正忙。” 尝试在应用程序中第五次播放视频文件时。搜索后我发现 [AVPlayerItem 失败并显示 AVStatusFailed 和错误代码 "Cannot Decode"](https://stackoverflow.com/questions/8608570/avplayeritem-fails-with-avstatusfailed-and-error-code-cannot-decode)，这表示在 iOS 中只能初始化 4 个播放器。但我一次只玩一名球员。我正在释放玩家对象并为另一场比赛重新创建，它在第五场比赛时显示警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:30:59.343

在 viewWillDisappear 中设置为 nil 您的播放器。或查找 AVQueuePlayer 类参考。

# java - 访问位于 src 文件夹之外的 jar 文件中的资源

> ID：12650766
> 
> 赞同：0
> 
> 时间：2012-09-29T07:18:30.963
> 
> 标签：java, jar, resources

我有一个项目结构，其中资源文件夹与 src 处于同一级别。resources 文件夹有一个子文件夹 config，其中有一个配置文件 conffile.ttl。从 Eclipse 运行程序时，我已将资源包含在类路径中。

从我的主类中读取 conffile.ttl 文件时，我使用

```
URL url =TestPropertyFilePath.class.getClassLoader().getSystemResource("conf/conffile.ttl");
    System.out.println(url.getPath()); 
```

效果很好。但是，当我将它捆绑在一个 jar 中并尝试使用

```
java -jar testprop.jar TestPropertyFilePath 
```

Java 找不到 conffile.ttl 文件。我想要关于如何从 jar 中访问 c​​onffile.ttl 的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:26:15.537

尝试这个：

```
 TestPropertyFilePath.class.getClassLoader().getSystemResource("conf.conffile"); 
```

# css - ::selection 中剩余的蓝色？

> ID：12650767
> 
> 赞同：8
> 
> 时间：2012-09-29T07:18:52.447
> 
> 标签：css, selection

CSS 元素选择器`::selection { }`应该用我们自己选择的文本和背景颜色替换默认的蓝色文本选择。

但是，情况似乎并非总是如此，因为我经常看到网站上还有剩余的蓝色。它并没有完全被我们选择的颜色所取代。

**======编辑======**

我想用我们自己的眼睛而不是通过屏幕截图更容易看到。

例如，请参阅此页面：[bleachindonesia.com/2012/05/27/bleach-day](http://bleachindonesia.com/2012/05/27/bleach-day)

在该页面上，如果您尝试全选 (Ctrl+A)，您会看到文本将被灰色阻止/选中。是的，因为页面 CSS 使用`::selection, ::-moz-selection { background:#59574b;color:#fdfcf5; }`.

但是，正如您在下面的屏幕截图中看到的那样，它在某些部分留下了一些默认的蓝色选择。

![注意这里灰色中的蓝色。](../Images/a185b2eea95e81512a0da00f7f913598.png)

[http://i.stack.imgur.com/A0aUJ.png](https://i.stack.imgur.com/A0aUJ.png)

注意色差，同时注意未选中的部分。网站上的某些部分使用默认的蓝色 ::selection 被选中，但同时也有一些其他部分未被选中。

* * *

同时，还有这个页面：[24ways.org/2005/swooshy-curly-quotes-without-images](http://24ways.org/2005/swooshy-curly-quotes-without-images)

再次尝试全选 (Ctrl+A) 页面。你可以看到所有的选择都是完美的栗色。没有默认的蓝色选择。只有部分没有被选中，但没有默认的蓝色选择。如下图所示：

![完美着色](../Images/e2fee47e5fc8facc93485e329e208fda.png)

[http://i.stack.imgur.com/4o6ll.png](https://i.stack.imgur.com/4o6ll.png)

页面CSS？`::selection { background-color: rgba(179, 45, 71, .75); color: #fff; }`. 与第一页的唯一区别是它使用 RGBA 而不是十六进制代码。我认为那里没有任何区别——它本质上是相同的代码。

现在是什么让我想知道。

为什么在第一页上默认的蓝色选择仍然存在，但在第二页上不存在？还有，如何让它像第二页一样完美？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T11:16:36.687

坦率地说，很难判断这是否是错误行为，尽管我推测它看起来非常像。`::selection`由于缺乏正确的定义（因此缺乏正确的实现和测试），所以我敢打赌，即使是浏览器供应商也很难找出问题所在。

值得一提的是，这条规则，来自第一个站点：

```
::selection, ::-moz-selection { background:#59574b;color:#fdfcf5; } 
```

似乎非常良性，除了它不正确地组合`::selection`并且`::-moz-selection`它永远不会在 Firefox 中工作，因为它无法识别`::selection`并[丢弃整个规则](https://stackoverflow.com/questions/5302172/firefox-moz-selection-selector-bug-is-there-a-workaround/5302221#5302221)。24ways.org 也没有在 Firefox 中正确显示选择颜色，不是因为组合选择器，而是因为首先没有`::-moz-selection`选择器。

至于为什么 Chrome 和 Safari 在第一个站点的某些区域会留下蓝色突出显示区域，我真的不知道。但是，我认为[Jared Farrish 提出了一个很好的观点](https://stackoverflow.com/posts/comments/17066040)：

> 这在 Chrome 中复制了这个问题（至少）：[jsfiddle.net/RfPgt](http://jsfiddle.net/RfPgt)它似乎是当一个元素嵌套在另一个本身具有可选元素的元素中时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T12:13:22.037

我找到了造成这种情况的原因。`<br>`如果你的文字中有这样的`<br>`内容，请尝试删除它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T07:33:18.223

我前段时间阅读了这个问题，以找到解决同一问题的方法，但我没有找到。现在，即使问题很老，我也想分享我找到的解决方案。

只需使用通用选择器：

```
*::selection { background:red; } 
```

# tmux - tmux 最大化/最小化窗格错误——“找不到会话：tmp”

> ID：12650768
> 
> 赞同：1
> 
> 时间：2012-09-29T07:18:58.413
> 
> 标签：tmux

**正在发生的事情的描述：**

*   最小化最大化窗格时，此消息出现在终端窗口的底部：`"Session not found: tmp"`
*   窗格似乎返回到与初始/上一个会话相同的位置
*   但是新的 tmp 窗口（在窗格第一次最大化时打开）无法关闭并出现在窗口列表中（在 tmux 底部的状态栏中）

我的预感是`kill-window -t tmp`（在下面的 .tmux.conf 代码中）是事情中断的地方。由于在 tmp 窗口中执行命令似乎会重命名窗口，`kill-window -t tmp`因此不起作用。

所以我的问题是：我**怎样才能改变 .tmux.conf 以防止这种情况发生？**

**重新创建错误的步骤：**

（注意：您需要修改 .tmux.conf 才能使这些命令正常工作）

*   启动 tmux 并使用至少两个窗格创建会话
*   使用最大化一个窗格`[prefix] + [up]`
*   在最大化窗格中执行 shell 命令 (*)
*   使用最小化窗格`[prefix] + [down]`

(*) 如果窗格在不执行 shell 中的命令的情况下最大化和最小化，则不会出现此问题。即，如果您正在窗格中编辑文件，则最大化该窗格，并且仅编辑/保存文件（不退出然后执行另一个命令），然后最小化-不会发生错误。

**显示发生了什么的 30 年代 youtube 剪辑：http:** [//youtu.be/WMdOeJdOYuU](http://youtu.be/WMdOeJdOYuU)

**可能导致错误的代码（来自 ~/.tmux.conf）：**

`unbind Up bind Up new-window -d -n tmp \; swap-pane -s tmp.0 \; select-window -t tmp unbind Down bind Down last-window \; swap-pane -s tmp.0 \; kill-window -t tmp`

**[编辑：这是解决方案]**

感谢有帮助的#tmux irc'er（谁有这个链接，我很乐意给谁）这个问题得到了解决。我还没有足够的信誉来回答这个问题，所以我在这里发布解决方案。

解决方案是添加`set-window-option -g allow-rename off`到 ~/.tmux.conf

这工作 b/c`tmp`不会被重命名，因此`kill-window -t tmp`可以正确执行。

（*感谢您的帮助并随时回答这个问题，所以我可以给你信用！*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:01:23.770

你想`allow-rename`设置为关闭，至少对于那个窗口：

```
set-window-option -g allow-rename off 
```

# javascript - JavaScript 中的按钮点击计数器

> ID：12650770
> 
> 赞同：1
> 
> 时间：2012-09-29T07:19:23.187
> 
> 标签：javascript, html

在这里，我找到了一个 JavaScript 按钮点击计数器，它计算了编号。单击按钮并将数字保存在称为网络存储的东西中，我不知道那是什么。

我确定的一件事是该脚本仅适用于一台计算机，这意味着如果我单击该按钮 10 次，那么如果任何其他访问者单击该按钮，它将不会向他显示我之前单击过的点击次数。

现在我需要的是，不知何故，无论是使用 javascript 还是 php，点击次数都应该保存在我服务器中的文本文件中，以后每当任何其他访问者访问 HTML 页面时，他也应该得到与文本文件。

这是`HTML`带有代码的页面。

```
<!DOCTYPE html>
<html>
<head>
<script>
function clickCounter()
{
if(typeof(Storage)!=="undefined")
  {
  if (localStorage.clickcount)
    {
    localStorage.clickcount=Number(localStorage.clickcount)+1;
    }
  else
    {
    localStorage.clickcount=1;
    }
  document.getElementById("result").innerHTML="You have clicked the button " + localStorage.clickcount + " time(s).";
  }
else
  {
  document.getElementById("result").innerHTML="Sorry, your browser does not support web storage...";
  }
}
</script>
</head>
<body>
<p><button onclick="clickCounter()" type="button">Click me!</button></p>
<div id="result"></div>
<p>Click the button to see the counter increase.</p>
<p>Close the browser tab (or window), and try again, and the counter will continue to count (is not reset).</p>
</body>
</html> 
```

以一种简单的方式，

HTML 页面上有一个按钮。

如果访问者 A 点击它 5 次并关闭页面。

之后，访问者 B 访问了他应该首先得到数字 5 的页面，然后当他点击时，它应该被自动计数并保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:14:22.777

这是一件简单的事情。这个答案来自 w3schools。这里使用了 AJAX 和 PHP。为了保存该值，我们使用了一个名为“vote_result.txt”的文本文件。

**索引.html**

```
<html>
    <head>
    <script type="text/javascript">
    function getVote(int)
    {
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("poll").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","poll_vote.php?vote="+int,true);
    xmlhttp.send();

    if(typeof(Storage)!=="undefined")
      {
      if (localStorage.clickcount)
        {
        localStorage.clickcount=Number(localStorage.clickcount)+1;
        }
      else
        {
        localStorage.clickcount=1;
        }
      document.getElementById("result").innerHTML="You have voted " + localStorage.clickcount + " times before this session";
      }
    else
      {
      document.getElementById("result").innerHTML="Sorry, your browser does not support web storage...";
      }
    }

    </script>

    </head>
    <body bgcolor=#5D003D>
    <div id="poll">

    <p>Click the button to see the counter increase.</p>
    <p>Close the browser tab (or window), and try again, and the counter will continue to count (is not reset).</p><form>
    <input type="Button" class="voteButton" name="vote" value="Vote" onclick="getVote(this.value)" />
    </form>
    </div>
    </body>
    </html> 
```

**poll_vote.php**

```
<?php
$vote = $_REQUEST['vote'];

//get content of textfile
$filename = "poll_result.txt";
$content = file($filename);

//put content in array
$array = explode("||", $content[0]);
$yes = $array[0];
$no = $array[1];

if ($vote == 0)
  {
  $yes = $yes + 1;
  }
if ($vote == 1)
  {
  $no = $no + 1;
  }

//insert votes to txt file
$insertvote = $yes;
$fp = fopen($filename,"w");
fputs($fp,$insertvote);
fclose($fp);
?>    
<table>
<tr>
<td><div id="votesMsg">Total Votes  :</div></td>
<td><div id="votesCounter">
<?php echo($yes); ?></div>
</td>
</tr>
</table>
<input type="Button" class="voteButton" name="vote" value="Vote again !!!" onclick="getVote(this.value)" /> 
```

然后在工作目录中，创建一个名为 poll_result.txt 的文件

就这样。现在在 localhost 中运行此页面..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:38:29.520

您应该在用户关闭页面之前将“点击”计数存储到您的数据库中，否则计数将清零。如果您在下次其他用户打开页面时将计数存储在数据库中，您可以从以前的计数。我希望你明白我在说什么。谢谢 sujathan。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T07:42:42.223

您对本地存储有误解。本地存储是一种将信息存储到客户端浏览器的方法，该方法对于您网站的每个访问者都是唯一的。它与用户之间共享的服务器数据库完全不同。在您的情况下，用户 B 无法知道用户 A 单击了多少次，除非您将用户 A 的信息存储到服务器数据库并稍后在用户 B 单击页面时查询它。

# javascript - 在 Google Apps 脚本中创建哈希数组

> ID：12650771
> 
> 赞同：4
> 
> 时间：2012-09-29T07:19:33.640
> 
> 标签：javascript, arrays, hash, google-apps-script, trello

这周我一直在尝试使用 Trello 和 Google Apps Script。我正在尝试创建一个哈希数组，然后我可以使用它来加载电子表格。Google 应用程序脚本不喜欢创建散列的典型 javascript 代码。我查看了文档，但他们没有像哈希这样的东西......他们说：

```
 var object = [];
 var object1 = {};
 object.push(object1); 
```

这不会起作用，因为我本质上是在尝试做类似的事情：

```
var hash={name: , label: };
var n= someNumber;
var l= someLabel
var hash.push(name: n, label: l); 
```

本质上，这就是我现在拥有的代码。但这是我的全部功能：

```
 function getData(){
  var list={};
  //get the list of delivered cards from Trello
  var listRequest = authorizeToTrello(); // get authorization
  var result = UrlFetchApp.fetch("https://trello.com/1/lists/4fea3a2c3a7038911ebff2d8/cards",
  listRequest);//fetch list
  var listOfCards = Utilities.jsonParse(result.getContentText());//Google app utility format json

  //outer loop to iterate through list of Cards
  for(var i=0; i < listOfCards.length; i++){
     var cardId = listOfCards[i].id; //get the id of a single card
     var l = listOfCards[i]["label"]; //get the label for the our structure

  //get a json object for a single card within the list of cards iteration 
  var cardRequest = authorizeToTrello();
  var getCard = UrlFetchApp.fetch("https://trello.com/1/cards/" + cardId + "/actions", cardRequest); 
  var singleCard = Utilities.jsonParse(getCard.getContentText());

 //inner loop to iterate the single cards JSON objects

  for(var j=0; j < singleCard.length; j++) {
    if(singleCard[j].data != undefined && singleCard[j].data.listAfter != undefined)
    {
      var str = singleCard[j]["data"]["listAfter"]['name'];
      if(str === "Delivered Q3 2012"){
          var n = singleCard[j]['memberCreator']['fullName'];
        }
     }
  }
    //push the data to list
    list.push(n,l);
  }

 return name, label; //return list for output
 } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-30T08:08:17.487

阅读这个问题，我了解到作者需要知道如何在 GAS中创建[关联数组。](http://en.wikipedia.org/wiki/Associative_array)如果它是正确的，那么这里有几个链接（[这里](http://www.mojavelinux.com/articles/javascript_hashes.html)和[这里](http://blog.xkoder.com/2008/07/10/javascript-associative-arrays-demystified/)），下面是一个示例代码。

```
function testMap() {
  var map = {};
  map["name1"] = "value1";
  map["name2"] = "value2";
  return map;
} 
```

如果作者真的需要

> 哈希数组

那么有几种方法取决于需要哪种哈希算法。

1.  使用[Utilities.computeDigest方法使用](https://developers.google.com/apps-script/class_utilities#computeDigest)[可用算法](https://developers.google.com/apps-script/class_digestalgorithm)之一计算字符串的哈希值。
2.  [如果Utilities.computeDigest](https://developers.google.com/apps-script/class_utilities#computeDigest)不支持所需的哈希计算算法，则可以编写自己的实现，就像为[BLAKE 函数](http://en.wikipedia.org/wiki/BLAKE_%28hash_function%29)[所做](http://www.scottlogic.co.uk/2012/02/blake-512-in-javascript/)的那样。

以下是如何使用 MD5 哈希创建*哈希数组的示例。*

```
function testHash() {
  var array = [];
  array.push(Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, "value1"));
  array.push(Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, "value2"));
  return array;
} 
```

PS作者代码的返回行`return name, label; //return list for output` 不正确——只`label`返回变量值。要将几个变量作为数组返回，需要编写`return [name, label];`. 或者可能是作者需要返回`list`变量而不是`name`和`label`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-10T22:26:49.770

我知道这是一个旧帖子/问题，但我想更新我的答案，因为原来的答案（第一个答案）具有误导性。我自己在寻找如何将关联数组返回到电子表格中的单元格，但是唉......“你不能”。Google 电子表格必须需要一个数字索引数组或对象。否则返回“#ERROR”。

以下是复制问题的步骤。

```
function testMap() {
  var map = {};
  map["name1"] = "value1";
  map["name2"] = "value2";
  return map

Formula in your cell: =testMap()
Value in your cell: Thinking... #ERROR 
```

解决方案（而是一种解决方法）

1：使用 for-each 类型循环将对象从关联数组转移到数字索引数组中。

```
var temp = new Array();
for (var i in map) {
    temp.push([i,map[i]])
    // optionally use activeSheet.getRange(X:X).setValue([i,map[i]])) function here.
   // set values will not work in cell functions. To use it via cell functions, rerun / trigger the functions using an on_edit event. 
} 
```

如果您使用类似数字索引数组的 temp，则可以将“temp”返回给调用单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-26T16:09:13.513

**摘要：出于`onEdit()`某种目的，使用缓存服务来定义关联数组数据。**

这是[一个共享的 Gsheet，](https://docs.google.com/spreadsheets/d/1WtgqxymVDq0lSMHDbUKEPwgAZ4G8-M198gMBPRJ7BrM/edit?usp=sharing)展示了这种奇怪的行为。我尝试了以下解决方案，以编程方式根据 Google 工作表中的数据定义关联数组。

```
var assocArr = {
  labels: {},
  init: function () {
    var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('sheetName');
    var values = sheet.getDataRange().getValues();
    for(var row in values) {
      assocArr.labels[values[row][0]] = values[row][1];
    };
    for(var key in assocArr.labels) {
      Logger.log("key: %s, value: %s",key, assocArr.labels[key]);
    };
    return(void(0));
  },
}; 
```

要执行此操作，请在事件处理程序中运行该`init()`方法。`onOpen()`

```
function onOpen() {
  assocArr.init();
  var key = 'test';
  SpreadsheetApp.getUi().alert( assocArr.labels[key] );
  Logger.log("onOpen: key: %s, value: %s",key, assocArr.labels[key]);
}; 
```

记录器消息确认`init()`从工作表加载数据。

现在，如果我尝试在其中引用这个 assocArr 对象，`onEdit()`它会返回`undefined`所有键值。

```
function onEdit(event) {
  var key = 'test';
  SpreadsheetApp.getUi().alert( assocArr.labels[key] );
  Logger.log("onEdit: key: %s, value: %s",key, assocArr.labels[key]);
}; 
```

我推断出于安全原因，Google 将简单触发器限制为不具有全局变量范围，就像他们取消了该属性`onEdit()`的效用一样。`event.user`

现在，如果我只是将键值对放入缓存中，它就可以工作！这是使用缓存服务的完整代码。

```
var cache = CacheService.getPrivateCache();

var assocArr = {
  init: function () {
    var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Account Labels');
    var values = sheet.getDataRange().getValues();
    for(var row in values) {
      cache.put(values[row][0], values[row][1], 3600);
    };
    return(void(0));
  },
};

function onOpen() {
  assocArr.init();
  var key = 'test';
  SpreadsheetApp.getUi().alert( cache.get(key) );
  Logger.log("onOpen: key: %s, value: %s",key, cache.get(key));
};

function onEdit(event) {
  var key = 'test';
  SpreadsheetApp.getUi().alert( cache.get(key) );
  Logger.log("onEdit: key: %s, value: %s",key, cache.get(key));
}; 
```

奇怪的是，`onEdit()`该`cache`变量在其范围内。

这里又是展示这种奇怪行为[的共享 Gsheet 。](https://docs.google.com/spreadsheets/d/1WtgqxymVDq0lSMHDbUKEPwgAZ4G8-M198gMBPRJ7BrM/edit?usp=sharing)

# rubygems - 无法为新的 Rails 安装安装 bcrypt-ruby

> ID：12650773
> 
> 赞同：3
> 
> 时间：2012-09-29T07:19:43.880
> 
> 标签：rubygems, gem, ruby-on-rails-3.2, bcrypt, bcrypt-ruby

我在安装新的 Rails 时遇到以下错误。我运行`bundle install`并安装了一堆 gem 后，尝试安装 bcrypt-ruby 时出现错误。我正在使用带有 OS X 10.8.2、最新 Ruby (v1.9.3-p194)、新 Rails (v3.2.8) 和标准 Gemfile 的全新 Mac。

> 安装 activerecord (3.2.8)
> 
> 安装活动资源 (3.2.8)
> 
> 使用本机扩展安装 bcrypt-ruby (3.0.1)
> 
> Gem::Installer::ExtensionBuildError: 错误: 无法构建 gem 原生扩展。
> 
> ```
>  /Users/me/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb  creating Makefile 
> ```
> 
> make 编译 bcrypt_ext.c make: /usr/bin/gcc-4.2: No such file or directory make: *** [bcrypt_ext.o] Error 1
> 
> Gem 文件将继续安装在 /Users/me/.rvm/gems/ruby-1.9.3-p194@mygemset/gems/bcrypt-ruby-3.0.1 以供检查。结果记录到 /Users/me/.rvm/gems/ruby-1.9.3-p194@mygemset/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.out 安装 bcrypt-ruby (3.0 .1)，并且 Bundler 无法继续。`gem install bcrypt-ruby -v '3.0.1'` 在捆绑之前确保成功。

***更新***：忘了提一下，这不仅是一台带有 Mac OS X 10.8.2 的全新 Mac，而且还包括昨天安装的全新 Xcode 和命令行工具。然后我安装了 RVM 和 brew。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T16:51:59.970

Seems odd on a brand new Mac, with new OS and new RVM installation that I would need to do this.. but what worked was simply linking gcc-4.2 to gcc:

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T16:29:40.520

对我来说，以下工作

```
gem uni bcrypt-ruby
gem i bcrypt-ruby --platform=ruby 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T08:40:53.827

自从安装了 Ruby 1.9.3 后，您升级到 Lion 了吗？如果是这样，它可能与错误的 gcc 相关联。

尝试卸载并重新安装 1.9.3，我建议使用 rvm

```
rvm uninstall 1.9.3
rvm install 1.9.3 
```

如果这不起作用，您可能不得不内爆 rvm

```
rvm implode
bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
source ~/.bash_profile
rvm install 1.9.3 
```

# php - 如何在 Windows 7 中使用取消链接？

> ID：12650777
> 
> 赞同：2
> 
> 时间：2012-09-29T07:20:47.953
> 
> 标签：php, windows-7

在我的 Win 7 机器上使用 unlink 时出现问题。这是我在 getFile.php 中的代码

```
$file_name = 'C:\xampp\htdocs\fw\tmp\my_file.php';
$myfile = fopen($file_name , 'a');
unlink(''.$file_name ); 
```

每次我执行代码时，我都会收到一条错误消息

**警告：unlink(C:\xampp\htdocs\fw\tmp\my_file.php) [function.unlink]: Permission denied in C:\xampp\htdocs\fw\libraries\getFile.php on line 79**

有人有解决方案吗？

之前谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T07:27:25.800

您无法删除已打开的文件

```
$file_name = 'C:\xampp\htdocs\fw\tmp\my_file.php';
$myfile = fopen($file_name , 'a');
..
fclose($myfiles);
..
unlink(''.$file_name ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:33:06.597

```
$file_name = 'C:\xampp\htdocs\fw\tmp\my_file.php';
$myfile = fopen($file_name , 'a');
unlink(''.$file_name ); 
```

您不能使用此删除文件

首先你需要关闭那个文件

使用

```
fclose($myfiles); 
```

并使用

```
$filename="myfile.php";  
unlink("../../../../"$filename); 
```

您不能使用`c:\xamp....`或删除`http:\\file\files.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T15:12:59.163

我正在使用 Windows 10 和 xampp，这适用于，

```
unlink(pathinfo(realpath($file_name), PATHINFO_DIRNAME).DIRECTORY_SEPARATOR . $file_name); 
```

# python - 当 Query 包含 ','(Comma) 或 = 或 () 时，搜索 API 返回 QueryError

> ID：12650779
> 
> 赞同：5
> 
> 时间：2012-09-29T07:21:12.817
> 
> 标签：python, google-app-engine, full-text-search

使用应用程序引擎的搜索 API，我尝试搜索包含`,`、`=`、`(`等的查询。它返回以下错误：

```
Failed to parse query "engines (Modular)"
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
  rv = self.router.dispatch(request, response)
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
  return route.handler_adapter(request, response)
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
  return handler.dispatch()
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
  return self.handle_exception(e, self.app.debug)
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
  return method(*args, **kwargs)
File "/base/data/home/apps/s~generatestock/12.362076640167792770/search.py", line 1641, in get
  result = find_search_document(search_item)
File "/base/data/home/apps/s~generatestock/12.362076640167792770/search.py", line 177, in find_search_document
  return search.Index(name=_INDEX_NAME).search(query)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/search/search.py", line 2715, in search
  query = Query(query_string=query)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/search/search.py", line 2286, in __init__
_CheckQuery(self._query_string)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/search/search.py", line 1964, in _CheckQuery
  raise QueryError('Failed to parse query "%s"' % query)

QueryError: Failed to parse query "Engines (Modular)" 
```

为什么？搜索 API 是否支持这些字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T13:48:33.807

要解析短语，请在短语周围使用引号：

```
query = '"Engines (Modular)"'
search.Index(name=_INDEX_NAME).search(query) 
```

您可以简单地在现有查询周围加上引号：

```
query = '"{0}"'.format(query)
search.Index(name=_INDEX_NAME).search(query) 
```

但是您可能必须*删除*查询中的现有引号才能使其正常工作。Google 的文档没有说明如何在搜索查询中包含引号。因此，完整的故障安全方法将是：

```
query = '"{0}"'.format(query.replace('"', ''))
search.Index(name=_INDEX_NAME).search(query) 
```

# python-2.7 - 为什么 youtube_upload 在 linux 上的 python 2.7 中给出 xml.etree.ElementTree.ParseError

> ID：12650780
> 
> 赞同：0
> 
> 时间：2012-09-29T07:21:14.343
> 
> 标签：python-2.7, youtube-api, gdata-api

我是 python 新手，在搜索时我发现我可以在 linux 的命令行中将视频上传到 youtube，而且我使用的是 centos 5.7

我首先安装了 python 2.7 并在执行过程中遇到了很多问题，但我在谷歌上搜索并找到答案

一个主要问题已经面临并解决了 httpsconnection，在安装了 open ssl 和 openssl-devel 之后，我可以使用这个命令来上传视频：

`>python youtube_upload.py --email="test.for.utube@gmail.com" --password="****" --title="test" --category="test" test.mp4`

并得到这个结果：

```
Login to Youtube API: email='test.for.utube@gmail.com', password='********' Traceback (most recent call last):

File "youtube_upload.py", line 449, in <module>

sys.exit(catch_exceptions(EXIT_CODES, main_upload, sys.argv[1:]))

File "youtube_upload.py", line 105, in catch_exceptions
fun(*args, **kwargs)

File "youtube_upload.py", line 381, in main_upload
captcha_response=options.captcha_response)

File "youtube_upload.py", line 183, in login
self.categories = self.get_categories()

File "youtube_upload.py", line 255, in get_categories
xml = ElementTree.XML(xmldata)

File "/usr/local/lib/python2.7/xml/etree/ElementTree.py", line 1301, in XML
parser.feed(text)

File "/usr/local/lib/python2.7/xml/etree/ElementTree.py", line 1643, in feed
self._raiseerror(v)

File "/usr/local/lib/python2.7/xml/etree/ElementTree.py", line 1507, in _raiseerror
raise err

xml.etree.ElementTree.ParseError: syntax error: line 1, column 49 
```

并没有在谷歌上找到任何解决方案。所以希望任何人都可以帮助我通过命令行成功完成youtube上传。

非常感谢。如果我能快速回复预计有解决方案的时间，那么我知道我应该等多久

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:30:41.050

我不知道是什么`youtube_upload.py`，但如果您正在寻找支持 YouTube 上传（并支持 OAuth 2 进行授权）的“规范”Python 命令行脚本，请尝试[http://code.google.com/p/googlecl/](http://code.google.com/p/googlecl/)

# android - 如何知道安卓手机何时移动？

> ID：12650785
> 
> 赞同：5
> 
> 时间：2012-09-29T07:22:11.803
> 
> 标签：android, android-sensors

好吧，这件事困扰了我好几天。我开发了一个应用程序来检查这个人是否正在移动以检查他的活动。我为此使用了加速度计，因为 gps 可能无法在场所内工作。问题是即使手机静止不动..加速度计值也会改变？我不知道为什么？这种情况很少发生。但这需要检查。我应该使用其他东西来获得线性加速度吗？请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:19:56.600

它可能是一个嘈杂的传感器，也可能是您无法注意到的导致更改事件的振动。您应该为您认为的移动设置一个阈值，并使用它来过滤进来的事件。

# voice - 导航语音输出

> ID：12650786
> 
> 赞同：-1
> 
> 时间：2012-09-29T07:22:14.187
> 
> 标签：voice, indoor-positioning-system

关于如何将语音输出合并到地图中以在智能手机上提供转弯方向的任何想法。我们正在使用 Mapkit 和 Cloudmade

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T14:16:47.017

好吧，这与室内或室外定位和导航几乎没有什么可分享的。这主要是使用文本到语音 (TTS) 系统将寻路/路由应用程序/服务器的文本输出转换为语音的问题。

例如，您可以使用[Open Source Routing Machine (OSRM)](http://project-osrm.org/)或[OpenTripPlanner](http://opentripplanner.com/)生成路线指示列表和 Android > 2.2 的文本到语音库，以将它们转换为语音。查看 TTS Android 文档：

[Android 中的 Text-To-Speech 简介](http://android-developers.blogspot.it/2009/09/introduction-to-text-to-speech-in.html)

[文字转语音](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)

当然，MapKit 和/或 CloudMade 可能有自己的路由系统（我不使用它们，我也不知道）。在这种情况下，您只需阅读他们的文档。

# eclipse-plugin - antlr3ide 生成没有包信息的解析器和词法分析器？

> ID：12650789
> 
> 赞同：1
> 
> 时间：2012-09-29T07:22:55.103
> 
> 标签：eclipse-plugin, antlr, antlrv3ide

antlr3ide 似乎生成没有 java 文件所在的包信息的解析器和词法分析器文件（例如**package tour.trees;**，这里的相对路径文件夹*tour/trees*包含相应的文件`ExprParser.java`和`ExprLexer.java`）。

[官方论坛](http://sourceforge.net/projects/antlrv3ide/forums/forum/768683)似乎有点不活跃，[文档](http://antlrv3ide.sourceforge.net/)给我的帮助不多：（

下面是一个示例语法文件`Expr.g`：

```
grammar Expr;

options {
  language = Java;
}

prog : stat+;

stat : expr NEWLINE
     | ID '=' expr NEWLINE
     | NEWLINE
     ;

expr: multiExpr (('+'|'-') multiExpr)*
    ;

multiExpr : atom('*' atom)*
    ;

atom : INT
     | ID
     | '(' expr ')'
     ;

ID : ('a'..'z'|'A'..'Z')+ ;
INT : '0'..'9'+;
NEWLINE : '\r'?'\n';
WS : (' '|'\t'|'\n'|'\r')+{skip();}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:42:04.900

包声明不是 antlrv3ide 生成的。这是由 ANTLR 完成的。要让 ANTLR 在包中生成源文件，请在语法文件中`tour.trees`添加`@header`包含包声明的块，如下所示：

```
grammar Expr;

options {
  language = Java;
}

// placed _after_ the `options`-block!    
@parser::header { package tour.trees; }
@lexer::header { package tour.trees; }

prog : stat+;

... 
```

# scala - 在 scala 中创建多个参与者

> ID：12650795
> 
> 赞同：1
> 
> 时间：2012-09-29T07:23:48.700
> 
> 标签：scala, model, actor

我是 scala 的新手，我正在尝试在 scala 中编写一个程序，该程序创建多个（例如 30 个）actor 并在它们之间传递消息。

以下是我到目前为止所管理的：

```
 import scala.actors.Actor
 import scala.util.Random

    class MyActor(val id:Int, val N:Int) extends Actor {
        def act() {
            println ("Starting actor: " + id)    

            /**
                 react{

                        case str : String =>
                              println("Received Msg: " + str)

                              val randNo : Int = Random.nextInt(N)
                              println("Actor " + id + " Picking a random actor: " + randNo) 

            // Here, I should forward the message received to the ALREADY created and started actors    
                             // val objActor = new MyActor(randNo : Int, N : Int)
                             // objActor.start
                             // objActor ! str
                        }
            */
        }
    }

    object Main {

    def main(args:Array[String]) {

        if(args.length == 0)
        {
            println("Usage scala Main <numNodes>")
            sys.exit()
        }

        val N : Int = (args(0)).toInt

        // Starting all actors

         for (i: Int <- 0 to N-1) {
                val a = new MyActor(i : Int, N : Int)
                println ("About to start actor " + a.id)
                a.start 
         //   a!"Broadcast this msg to all actors"
         } 
      }
    } 
```

该程序的目标是创建多个参与者并将字符串从一个参与者转发到另一个参与者。

上面的代码创建了“N”个作为命令行参数给出的演员。这些actors由对象Main创建和启动。Main 应仅向上述创建的参与者之一发送消息。从 Main 接收消息的 Actor 应该将相同的消息转发给另一个已经创建/启动的 Actor。

这可能吗？如果是这样，你能指导我正确的方向吗？

提前致谢，女士

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T07:43:23.507

首先，我建议查看 Akka 演员，很快将在 Scala 2.10 中取代 Scala 演员，希望在未来几个月内推出。

话虽如此，这绝对是可能的，工作流程会是这样的（至少在 Akka 中）：

1.  `ActorSystem`在您的`main`方法中创建一个。
2.  `Actor`在 via 方法中根据需要生成，`ActorSystem`这`actorOf`将返回一个`ActorRef`对象。
3.  选择其中一个`ActorRef`来发送消息。

在`Actor`实现中，以某种方式`Actor`了解其他人（可能通过构造函数），并弄清楚您希望如何在`String`整个系统中传播（在此说明中，我通常更喜欢使用 Scala 案例类作为消息）。

这种听起来像一个类似状态机的系统——我一直在玩的一个想法是把它`ActorSystem`当作一个图形实体，这意味着对于每个`Actor`实例，你传递它的邻居列表（也许是一`Vector[ActorRef]`）。

您还可以查看Akka 团队最近推出的新`Actor`s [DSL 。](http://letitcrash.com/post/32340419628/2-1-spotlight-shiny-new-actor-dsl)

要了解有关 Akka 的更多信息，我推荐以下资源：

1.  [Jonas Bonér 最近在 NY Scala 的演讲介绍了 Akka](http://vimeo.com/50400591)
2.  [Akka 在行动](http://www.manning.com/roestenburg/)(MEAP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:41:09.890

我找到了一种方法，通过使用一组演员在 scala 本身中解决上述问题。由于所有参与者都将执行相同的操作（即）转发消息，因此创建多个 MyActor 实例就足够了。非常感谢！

# javascript - javascript 兼容性

> ID：12650797
> 
> 赞同：1
> 
> 时间：2012-09-29T07:24:13.623
> 
> 标签：javascript, web, usability, user-experience

我记得几年前，当我们设计一个使用 JavaScript 的网站时，我们必须考虑那些没有启用 JavaScript 的用户，并且应该使该网站以一种没有 JavaScript 的方式应该可以正常工作，但现在网站大量使用 JavaScript！那么这个理论还应该遵循吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T07:51:06.813

我们应该遵循的理论是：强制用户升级/切换到支持 javascript（现代浏览器）的浏览器。

5-6 年前，这个概念有所不同，因为 IE6 让我们的生活变得太艰难，我们不得不让网站在没有 javascript 的情况下兼容。

Internet Explorer 太容易被 javascript 破解，所以人们开始出于安全目的禁用 javascript（不需要的无休止的弹出窗口，在我们不知情的情况下安装的不需要的木马）。

我并不是说没有 javascript 的网站就不能工作，但是今天的浏览器没有 javascript 关闭开关。

附带说明一下，如果您关闭 Javascript，98% 的网站将无法运行。那只是因为今天的程序员不知道我们在 IE 家族中的生活。

# html - 将图像固定在顶部，但在两侧具有自动边距

> ID：12650798
> 
> 赞同：0
> 
> 时间：2012-09-29T07:24:25.103
> 
> 标签：html, css

我有以下html：

```
<div class="fix-to-top">
    <div class="background-image"></div>
</div> 
```

我希望能够将图像的位置固定到页面顶部——这样无论用户滚动多远，它都始终位于页面顶部。另外，我希望图像**始终**保持在页面的中心，因此如果用户重新调整浏览器的大小，图像就会保持在中心。这是我尝试过的，但没有得到结果：

```
.fix-to-top {
    position: fixed;
    top: 0px;
    width: 2000px;
}
.fix-to-top .background-image {
    margin: 0 auto;
} 
```

但是，侧边距没有做“自动”。我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:27:46.257

```
img {
    position: fixed;
    right: 50%;
    width: 100px;
    height: 100px;
    margin-top: -50px;
    margin-right: -50px;
    background: orange;
    top: 50%;
}​ 
```

[http://jsfiddle.net/jXdxr/1/](http://jsfiddle.net/jXdxr/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T07:30:01.240

检查这个[小提琴](http://jsfiddle.net/dqnKQ/4/)

无需使用两个 div

您可以使用**[`background-attachment`](https://developer.mozilla.org/en-US/docs/CSS/background-attachment)**和**[`background-postion`](https://developer.mozilla.org/en-US/docs/CSS/background-position)**属性来实现它

# c# - 当我将查询与数据集一起使用时，水晶报告重复项目

> ID：12650799
> 
> 赞同：0
> 
> 时间：2012-09-29T07:24:53.163
> 
> 标签：c#, asp.net

我是水晶报告的新手。在将数据集的数据绑定到显示两次或三次的水晶报表时。

我正在使用 SQL 2005 和 VS 2008。

我在调试时也检查了 SQL 和数据集，但在数据集中我只有 5 条记录，但在我的水晶中它显示 10 条记录。

以下是我的代码：

```
ReportDocument doc = new ReportDocument();

sda = new SqlDataAdapter(" SELECT ac_mstr.AC_DESC, TRAN_HDR.DOC_DT, TRAN_DTLS.GL_CODE,    DBCR, AMT FROM dbo.TRAN_DTLS TRAN_DTLS INNER JOIN dbo.AC_MSTR ac_mstr ON (TRAN_DTLS.SUB_CODE=ac_mstr.SUB_CODE) AND (TRAN_DTLS.GL_CODE=ac_mstr.GL_CODE) INNER JOIN dbo.TRAN_HDR TRAN_HDR ON (TRAN_DTLS.TC=TRAN_HDR.TC) AND (TRAN_DTLS.DOC_NO=TRAN_HDR.DOC_NO) where tran_hdr.tc='CAS' and tran_hdr.doc_dt between '2012/01/01' and '2012/12/30'   ORDER BY TRAN_DTLS.GL_CODE", con);

        sda.Fill(ds);      
       doc.Load(Server.MapPath("~/Reports/Acc_sum.rpt"));

      doc.SetDataSource(ds.Tables[0]);
      CrystalReportViewer1.ReportSource = doc; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:49:08.537

Crystal Reports 可以用数据做意想不到的事情。开始调试的好地方（除了在编辑器中打开水晶报告并单击周围）是使用 SQL Server Profiler。可以在[http://www.databasejournal.com/features/mssql/article.php/3750161/Introduction-to-SQL-2005-Profiler-Part-1.htm](http://www.databasejournal.com/features/mssql/article.php/3750161/Introduction-to-SQL-2005-Profiler-Part-1.htm)找到更详细的教程。

需要注意的是，虽然 SQL Server 2005 Express 可以与 SQL Server Pro 文件管理器一起使用，但它并不与程序捆绑在一起。

为了您的方便，我附上了一组基本的说明：

-

1.  打开 SQL Server Profiler：
    *   从开始菜单：\All Programs\Microsoft SQL Server 2005\Performance Tools\SQL Server Profiler。
    *   从 SQL Server Management Studio：Tools\SQL Server Profiler
2.  按下工具栏最左侧的新跟踪按钮。

3.  连接到托管数据的 SQL 服务器。

4.  在 Trace Properties 屏幕上，按运行按钮。
    （它们是“事件选择”选项卡上的许多常用功能，但出于您的目的，默认设置应该没问题。）

5.  运行你的程序。

使用默认设置，您应该能够看到什么时候访问您的数据库，以及他们使用哪些查询来进行访问。这样您就可以查看您的查询是否正确或是否存在其他问题。

过去，我还（很少）看到水晶报告对数据执行本地连接，导致重复。当这种情况发生在我身上时，我不得不删除大部分报告，甚至创建一个新报告并在每个步骤中对其进行测试，以确定问题出在哪里。

如果您需要其他帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:35:55.017

错误来自您的查询：

```
 SELECT ac_mstr.AC_DESC, TRAN_HDR.DOC_DT, TRAN_DTLS.GL_CODE,    DBCR, AMT 
FROM dbo.TRAN_DTLS TRAN_DTLS INNER JOIN dbo.AC_MSTR ac_mstr
 ON (TRAN_DTLS.SUB_CODE=ac_mstr.SUB_CODE) AND (TRAN_DTLS.GL_CODE=ac_mstr.GL_CODE) 
INNER JOIN dbo.TRAN_HDR TRAN_HDR ON (TRAN_DTLS.TC=TRAN_HDR.TC) AND (TRAN_DTLS.DOC_NO=TRAN_HDR.DOC_NO) where tran_hdr.tc='CAS' and tran_hdr.doc_dt between '2012/01/01' and '2012/12/30'   ORDER BY TRAN_DTLS.GL_CODE 
```

这会使您的数据出现两次，因此请更改您的查询。

# mongodb - 在 MongoDB 中查询对象的字段数组值

> ID：12650800
> 
> 赞同：2
> 
> 时间：2012-09-29T07:24:54.967
> 
> 标签：mongodb, mongodb-.net-driver

如果我有这样的课程：

```
public class Car {
 public string Model { get; set; }
 public List<string> Types { get; set; }
} 
```

并做：

```
Car _car = new Car();
_car.Model = "1992";
List<string> _types = new List<string>() { "New", "Old" };
_car.Types = _types 
```

并将这些类型的对象保存在 MongoDB 中，我如何获得`type == "New"`C# MongoDB 中的所有汽车？我需要查询`Car.Type == "New"`我要访问的类并查看它的`"Types"`数组并在数组中找到匹配的对象并返回整个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:23:26.497

MongoDB 查询语言可以透明地访问数组。所以你可以这样做：

```
db.cars.find({Types:"New"}) 
```

它将返回在 Types 数组中有一个条目等于字符串“New”的所有文档。查看[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)以获取更多信息。

# php - PHP 等效于 JavaScript 的 parseInt 函数？

> ID：12650802
> 
> 赞同：25
> 
> 时间：2012-09-29T07:25:22.250
> 
> 标签：php, function, digit

> **可能重复：**
> [检查变量是否为自然数](https://stackoverflow.com/questions/6563367/check-if-a-variable-is-a-natural-number)

刚刚遇到我需要清理输入并使用 PHP 删除所有非数字字符的地方。想自己做一个函数，但只是首先想检查可能的内置函数，所以我不必花额​​外的时间重新发明轮子。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-29T08:00:57.417

在 PHP 中没有直接的等价物，`pareseInt()`因为 PHP 没有`NaN`数据类型。如果无法解析该值，`parseInt()`将产生。`NaN`

此外，`parseInt()`还有 radix 参数，PHP 选项都没有提供。

但是就是说，如果您只想将字符串转换为整数，那么有几种选择：

```
$int = (int)$string;

$int = intval($string);

$int = settype($string,'integer'); 
```

这三个都将以几乎相同的方式工作。可能存在一些与其他两种不同的边缘情况`intval()`，但一般来说，它们会将字符串转换为 int。在没有 的情况下，如果字符串是非数字且无法解析`NaN`，它们都会输出（零）。`0`但这对于大多数数据库卫生目的来说应该足够了。

如果你真的想要一个`NaN`on 错误，你会得到最接近的是`null`. 你可以使用`filter_var()`：

```
$value = filter_var(FALSE, FILTER_VALIDATE_INT, FILTER_NULL_ON_FAILURE); 
```

如果您只想检查字符串是否为数字，该`is_numeric()`函数可以执行以下操作：

```
$bool = is_numeric($string); 
```

但是，它对小数和科学记数法返回 true，因此对于大多数情况可能并不完美。`ctype_digit()`如果字符串仅由数字组成，则更好的选择是返回 true：

```
$bool = ctype_digit($string); 
```

如果这些都不适合，总是有正则表达式选项，使用`preg_match()`or `preg_replace()`，但对于这种情况，这些绝对是矫枉过正。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-29T07:29:32.560

您可以使用正则表达式如下

```
$int = (int) preg_replace('/\D/', '', $strNonNumeric); 
```

或者

```
$int = (int) preg_replace('/[^0-9]/', '', $strNonNumeric); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-29T07:27:18.093

您可以使用：

```
$string = "90"; //string
$myInt = (int) $string; //parse to int 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-29T07:31:32.963

我会推荐使用 FILTER_VALIDATE_INT 过滤器。

[关于 php.net 上的过滤器](http://php.net/manual/en/filter.filters.validate.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T07:29:41.217

您也可以使用 sscanf （就像在 C 中一样）

```
<?php

    $str = "10";

    sscanf($str, "%d", $intVal);
    $intVal *= 10;

    echo $intVal;
?> 
```

**输出：**

100

# osx-snow-leopard - 如何在 PostgreSQL 9.1 上安装 hstore 模块？

> ID：12650803
> 
> 赞同：0
> 
> 时间：2012-09-29T07:25:24.043
> 
> 标签：osx-snow-leopard, postgis, postgresql-9.1

[我已经看到这里](https://stackoverflow.com/questions/4776563/how-do-i-install-the-hstore-module-on-postgresql-9-0-macports-install)已经有一个关于 9.0 的问题，但它已经有一年多了。从那以后有什么改变吗？

我已经在 Snow Leopard 上安装了 9.1。我应该按照哪些步骤来安装 hstore？

（顺便说一下，我不熟悉 MacPorts）。

# eclipse - Eclipse 不是 build.xml 以外的语法高亮文件？

> ID：12650805
> 
> 赞同：10
> 
> 时间：2012-09-29T07:25:28.840
> 
> 标签：eclipse, syntax-highlighting

Eclipse 没有突出显示我的 web.xml 和 index.jsp 文件中的语法。事实上，它正确突出显示的唯一文件是它已识别为 ant 构建文件的 build.xml。

![在此处输入图像描述](../Images/698ecea20437c01279c864dab2eeb80d.png)

似乎只是忽略了这是一个 xml 文件而不是纯文本文件的事实。当我突出显示它时，它会显示消息“'xml' 这个词拼写不正确”？

如果我将 build.xml 的内容（语法突出显示工作正常）复制并粘贴到同一文件夹或另一个文件夹中的另一个文本文件中，那么它也将不起作用

我在 Windows 7 64 位上使用 Eclipse Juno

**编辑：**事实证明这是因为我正在使用文本编辑器打开 xml 文件。如果我在 Eclipse 中使用 Ant 编辑器打开它，那么它会突出显示

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T07:36:22.500

事实证明，这是因为我使用文本编辑器打开了 xml 文件。如果我在 Eclipse 中使用 Ant 编辑器打开它，那么它会突出显示

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-30T18:36:43.540

使用 XML 编辑器打开您的 XML 文件并[选择底部的源选项卡](https://stackoverflow.com/questions/4590119/how-do-i-view-xml-in-eclipse-with-simple-syntax-highlighting)。这应该向您显示启用了语法突出显示的 XML。[1](https://stackoverflow.com/questions/4590119/how-do-i-view-xml-in-eclipse-with-simple-syntax-highlighting)

我正在使用我创建的 xml 文件，并按照 Arvin 的建议在 Ant 编辑器中查看它们会产生错误。

# android - 对象的android旋转和额外的间距

> ID：12650809
> 
> 赞同：0
> 
> 时间：2012-09-29T07:26:23.883
> 
> 标签：android, rotation

我需要摆脱旋转后产生的所有额外间距吗？似乎元素保持其原始宽度而不是使用它的原始高度作为新宽度。

欢迎提出建议。

![在此处输入图像描述](../Images/1e853a652640ce93a8c28af86bf92a33.png)

```
 <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:rotation="90"
        android:text="Button" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:13:16.660

当您将任何动画应用于组件时。

它表明您已经移动了该组件。

但实际上那个**组件保留了它原来的位置**。

它不会从他原来的位置移动。

你可以说它的android限制。

但现在它在**API 级别 3.0中解决了**

你可以试试**3.0或更高版本。**

更多阅读[这个](http://developer.android.com/about/versions/android-3.0.html)

# android - 如何知道当前在 ViewPager 中选择了哪个片段？

> ID：12650810
> 
> 赞同：4
> 
> 时间：2012-09-29T07:26:37.430
> 
> 标签：android, android-fragments, android-viewpager

我使用加载了片段的 ViewPager，我想知道**当前**在 viewpager 中显示或选择了哪个片段。

每个片段的**onResume()**方法都会执行一些逻辑，因此当当前所选页面的相邻片段（左和右）也被实例化时，我会遇到问题。

**更新：**

片段在实际被选中时是否会收到任何**回调**？

**ViewPager 适配器代码：**

```
public class LeftPanelPagerAdapter extends FragmentStatePagerAdapter
 {
private List<Fragment> fragments;

public LeftPanelPagerAdapter(FragmentManager fm,List<Fragment> fragments) 
{
    super(fm);
    this.fragments = fragments;

}

@Override
public Fragment getItem(int position) 
{
    return this.fragments.get(position);
}

@Override
public int getCount() 
{

    return this.fragments.size();
}

@Override
public int getItemPosition(Object object) 
{
    return POSITION_NONE;
}
@Override 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T14:05:57.850

由于孔子发布的代码对我不起作用。我稍微修改了一下。

问题是您的 FragmentStatePagerAdapter 不应该实现 OnPageChangeListener，而是 Activity 本身。您应该为包含您的 LeftPanelPagerAdapter 的 mPager 设置一个侦听器。

```
public class ImageDetailActivity extends Activity implements OnPageChangeListener

@Override
public void onCreate(Bundle savedInstanceState)
{
    mPager = (ViewPager) findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    mPager.setOnPageChangeListener(this);
....
} 
```

br 迈克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-08T09:58:15.567

只需使用`ViewPager.getCurrentItem()`它，它就会将其位置返回给您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-11T14:40:43.453

```
FragmentPagerAdapter adapter = (FragmentPagerAdapter) mViewPager.getAdapter();
((IFieldServiceFragment) adapter.getItem(mViewPager.getCurrentItem()))
                .updateFragment(); 
```

您可以从 ViewPager 中获取当前项的索引，然后从 Adapter 中获取该项（Fragment）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-19T04:52:26.060

[您可以在适配器https://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem](https://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem)中`ViewPager.getCurrentItem()`
获取片段的当前位置（

要在 viewpager 更改片段时获取事件，您可以使用`ViewPager.OnPageChangeListener`

```
viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        @Override
        public void onPageSelected(int position) {

        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T08:17:29.640

```
public class LeftPanelPagerAdapter extends FragmentStatePagerAdapter implements OnPageChangeListener{
        .....
        .....
        ....

private int currentSelectedFragmentPosition = 0; 
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }

    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    public void onPageSelected(int arg0) {
        currentSelectedFragmentPosition = arg0;

    }

    public int getCurrentSelectedFragmentPosition() {
        return currentSelectedFragmentPosition;
    }

} 
```

您可以实现`OnPageChangeListener`并添加一个成员变量，该变量可用于跟踪当前选定的片段位置。

任何时候您想知道当前选择的片段是什么时，请执行此操作

```
myAdapter.getCurrentSelectedFragmentPosition(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-19T04:46:41.333

这是我在选择片段时获得回调的方式

覆盖 FragmentStatePagerAdapter 的方法 setPrimaryItem，每次选择新片段时都会调用该方法。Object 参数是你的 Fragment，所以剩下的就很简单了。

```
mViewPager = (ViewPager) findViewById( R.id.view_pager );
mViewPager.setAdapter( new FragmentStatePagerAdapter(manager) {
            @Override
            public void setPrimaryItem(ViewGroup container, int position, Object object) {
                if (object instanceof UpdateWhenSelected) {
                    ((UpdateWhenSelected) object).update();
                }
                super.setPrimaryItem(container, position, object);
            }
            @Override
            public Fragment getItem(int position) {
                        //your code here
                        return ***;
                    }
                } return getItem( position );
            }
            @Override
            public int getCount() { return ***; }
        }); 
```

并且，当然，为您的片段实现自定义接口

```
public class YourFragment extends Fragment implements UpdateWhenSelected  {

    ...
    public void update() {
        //code
    }
} 
```

# xcode - Xcode 嵌套框架：找不到项目头文件

> ID：12650818
> 
> 赞同：0
> 
> 时间：2012-09-29T07:28:02.387
> 
> 标签：xcode, objectiveflickr

我正在尝试构建一个使用[ObjectiveFlickr](https://github.com/lukhnos/objectiveflickr)的 Mac 应用程序，因此将其作为嵌套框架。我遵循了ObjectiveFlickr 页面上[的设置指南。](https://github.com/lukhnos/objectiveflickr#adding-objectiveflickr-to-your-mac-app-project)一切正常，直到我必须验证我的存档应用程序。

验证给了我['not single-bundle application' 错误](https://stackoverflow.com/questions/5206536/archiving-project-in-xcode-incorrectly-creates-multi-application-bundle)。对于嵌套框架，解决方案似乎是将“跳过安装”设置为“是”并将项目头文件从公共移动到投影。但是如果我这样做，框架就找不到它的内部头文件，而我的主应用程序可以找到 ObjectiveFlickr.h。（相关问题：我不应该将 ObjectiveFlickr.h 保留为公共头文件，因为我的主应用程序需要能够找到那个吗？）

我想解决方案在于为两个项目设置一些正确的搜索路径。我尝试按照[Xcode 4 和嵌套项目中提到的建议 - 找不到头文件](https://stackoverflow.com/questions/5413338/xcode-4-and-nested-projects-header-files-not-found)，但没有任何效果。

我正在使用 Xcode 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:51:33.867

我发现 ObjectiveFlickr 的库版本的头文件已经设置为项目而不是公共的，所以我选择使用库而不是框架版本，遵循本指南：[将 ObjectiveFlickr 添加到您的 iPhone 应用程序项目](https://github.com/lukhnos/objectiveflickr#adding-objectiveflickr-to-your-iphone-app-project)。即使我正在开发 Mac 应用程序而不是 iOS 应用程序，它也能正常工作。

# javascript - 试图通过画布工作获得 setTimeout

> ID：12650819
> 
> 赞同：1
> 
> 时间：2012-09-29T07:28:05.733
> 
> 标签：javascript, animation, canvas, settimeout

刚从画布和 javascript 开始，我无法理解为什么这个片段中的 setTimeout 不起作用。我最初认为它会触发每一帧，因为它包含在循环中。我也尝试在动画功能中移动它，但无济于事。

```
$(document).ready(function(){
var canvas = $('#myCanvas');
var context = canvas.get(0).getContext('2d');   

var Shape = function(x1,y1,x2,y2){
    this.x1 = x1
    this.y1 = y1
    this.x2 = x2
    this.y2 = y2
}

var shapes = new Array();

shapes.push(new Shape(0,0,50,50));
shapes.push(new Shape(50,50,50,50));
shapes.push(new Shape(0,100,50,50));
shapes.push(new Shape(50,150,50,50));
shapes.push(new Shape(0,200,50,50));

function animate(){
    for (i=0;i<shapes.length;i++){
        context.clearRect(0,0,500,500);
        context.fillRect(shapes[i].x1,shapes[i].y1,shapes[i].x2,shapes[i].y2);
        setTimeout(animate, 500);
    };
};
animate();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:44:32.920

你的`animate()`.

*   不要`setTimeout`循环执行。这将冻结您的浏览器。
*   for 循环中的代码绘制矩形并立即将其擦除。这就是为什么你看不到你的动画。

考虑像这样更改您的代码。

```
 var i = 0;
  function animate(){
      context.clearRect(0,0,500,500);
      context.fillRect(shapes[i].x1,shapes[i].y1,shapes[i].x2,shapes[i].y2);
      i++;
      if (i == shapes.length) i = 0;
      setTimeout(animate, 500);
  };
  animate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:49:26.687

setTimeout 在循环中创建问题，因为您正在专心地覆盖 timeOutId。你必须改变你的逻辑。将 setTimeout 置于循环之外。

# forms - 使用复选框自定义 URL

> ID：12650820
> 
> 赞同：0
> 
> 时间：2012-09-29T07:28:48.393
> 
> 标签：forms, url, search, checkbox

我正在制作[一个](http://jeremyblazedesign.com/rwthemefinder/)基本上搜索另一个网站的网站。我需要做的就是：

When the checkbox labelled 'Responsive' is checked, add the extension 'responsive+' to the end of this url: www.realmacsoftware.com/addons/search/rapidweaver?q=theme+ (resulting in www.realmacsoftware.com/addons/search /rapidweaver?q=主题+响应+)

如果可能的话，我宁愿不使用任何 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:32:48.930

您可以 POST 到 _self，然后标头将服务器端重定向到所需的 URL。

HTML 应为：

```
 <form method="post" action="">
        <input type=checkbox name="query[]" value="responsive"> Responsive<br/>
        <input type=checkbox name="query[]" value="dark"> Dark<br/>
    </form> 
```

还有一个php示例：

```
<?php // this should be in the beginning of the document
if( ! empty($_POST['query'])) {
    $query_string = implode('+', array_map('urlencode', $_POST['query']));
    header('Location: http://www.realmacsoftware.com/addons/search/rapidweaver?q=theme+'.$query_string);
}
?> 
```

# c - 了解 c 中的 _irol_ 函数

> ID：12650821
> 
> 赞同：-2
> 
> 时间：2012-09-29T07:29:02.957
> 
> 标签：c, keil

```
 prio = _irol_(prio, 2); 
```

这出现在我的一个代码中。你能解释一下那里的`_irol_`现在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:31:43.460

这是`integer rotate left prio by 2 bits`

# iphone - 我的表视图未显示数据

> ID：12650822
> 
> 赞同：0
> 
> 时间：2012-09-29T07:29:04.773
> 
> 标签：iphone

我在 ViewController 中使用 tableView 作为 IBOutlet。我已经实现了所有的委托方法和数据源方法。但是数据没有显示在那里......我在那里做错了什么......

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:31:39.297

您是否将代理和数据源从 IB 设置为文件所有者。请检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:47:56.980

嘿，您可以使用参考[链接](http://development-iphone-app.blogspot.in/2011/10/uitableview-example.html)作为 UITableView 示例并纠正您的错误。如果您无法做到这一点，请向我们展示代码。

所以我们可以帮助你。

# iphone - 无法从 SQLite 数据库 iOS6.0 中检索数据

> ID：12650823
> 
> 赞同：4
> 
> 时间：2012-09-29T07:29:04.197
> 
> 标签：iphone, objective-c, sqlite, ios6

当我运行 build ios5.0 或更低版本时，Sqlite 响应正确并检索数据，它工作正常，但是在 ios6.0 上运行时，我试图从 my.sqlite 数据库中获取数据，但它没有执行我的 if 案例。它总是在 else 条件下进入。我在做什么错事？我无法执行我的 if 案例，即`if(sqlite3_prepare_v2(database, sqlQuerry, -1, &querryStatement, NULL)==SQLITE_OK).`

供参考检查此代码。

```
NSLog(@"sqlite3_prepare_v2 = %d SQLITE_OK %d ",sqlite3_prepare_v2(sqlite, [strQuery UTF8String], -1, &compiledStatement, nil),SQLITE_OK);

    if(sqlite3_prepare_v2(sqlite, [strQuery UTF8String], -1, &compiledStatement, nil)==SQLITE_OK)
    {

        NSLog(@"sqlite3_step = %d SQLITE_ROW %d ",sqlite3_step(compiledStatement),SQLITE_ROW);
        while (sqlite3_step(compiledStatement)==SQLITE_ROW)
        {           if(sqlite3_column_text(compiledStatement, 2) != nil)
                modelObj.Name = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];

        }
    }
    else
    {

    } 
```

关于iOS6.0的日志打印

```
 sqlite3_prepare_v2 = 1 SQLITE_OK 0   
 sqlite3_step = 21 SQLITE_ROW 100 
```

在iOS5.0日志打印

```
sqlite3_prepare_v2 = 0 SQLITE_OK 0  
sqlite3_step = 100 SQLITE_ROW 100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:51:42.887

放在 else this 中，这样我们就可以看到导致的错误..

```
if(sqlite3_prepare_v2(sqlite, [strQuery UTF8String], -1, &compiledStatement, nil)==SQLITE_OK)
{

    NSLog(@"sqlite3_step = %d SQLITE_ROW %d ",sqlite3_step(compiledStatement),SQLITE_ROW);
    while (sqlite3_step(compiledStatement)==SQLITE_ROW)
    {           if(sqlite3_column_text(compiledStatement, 2) != nil)
        modelObj.Name = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];

    }
}
else{
    //error
    NSLog(@"Failed to open database. Error: %s",sqlite3_errmsg(database));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T09:46:40.667

尝试从您的设备（或模拟器）中删除您的应用程序，然后清理并构建

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:44:06.570

我不是 100% 确定，但关于这一点： **NULL**是一个**void ***，**nil**是一个**id**

因此，如果您可以更改此设置：

```
if(sqlite3_prepare_v2(sqlite, [strQuery UTF8String], -1, &compiledStatement, nil)==SQLITE_OK) 
```

这个：

```
if(sqlite3_prepare_v2(sqlite, [strQuery UTF8String], -1, &compiledStatement, NULL)==SQLITE_OK) 
```

我只是用NULL改变nil。同样不是 100% 确定，但我在您的代码中只看到了这一点。我总是使用 NULL :)

希望这有助于...

# html - 具有较高 z-index 的绝对定位 div 显示在其他 div 下

> ID：12650825
> 
> 赞同：0
> 
> 时间：2012-09-29T07:29:31.350
> 
> 标签：html, css, z-index, css-position

我的 HTML 代码在某些时候出现了我无法检测到的错误。这是我的[JSFiddle](http://jsfiddle.net/gteEg/1/)。

特别是，当我继续“显示更多”时，具有最高 z-index 的绝对定位 div 应该显示在所有内容的顶部。但是，您可能会看到第一个绝对定位的 div 显示在其他内容下。*正如类似问题*的答案中所提供的，`z-index`我已经为*.*`position`**`div`**

 **有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:28:28.340

感谢**[Ghost Answer](https://stackoverflow.com/users/968866/ghost-answer)**评论，我解决了这个问题。

在其他答案中，我读到应该将*增加的 z-index*值以及 a`position:relative`放在一个将在悬停时显示的 div 的所有容器中。也许它并不总是正确的。这是我所做的：

1.  我删除了所有 z-index 值和不必要的定位（我想后者没有意义）。
2.  我设置`z-index:auto`了要在悬停时显示的 div 的容器。

现在代码工作正常：这是更新的[JSFiddle](http://jsfiddle.net/gteEg/11/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:33:43.327

试试这个 CSS

```
 .offer-info-shops span
position:absolute;
z-index:1000; 
```

[JSFIDDLE](http://jsfiddle.net/gteEg/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:10:15.600

有趣的问题。

更改以下 z 索引：

```
.offer-content, .offer-content-info-shops{z-index:auto}
```

```
.detail-modal-window{z-index:1}
```

[http://jsfiddle.net/gteEg/12/](http://jsfiddle.net/gteEg/12/)

通过这样做，所有元素的 z 索引都会相互比较。

您遇到的问题是因为您将 z-index 分配给 offer-content 和 .offer-content-info-shops，因此您创建了一个堆栈上下文，这意味着 .offer-content-info 的子元素，例如 .detail -modal-window 的 z-index 与 .offer-content-info-shops 中的兄弟姐妹相比。

[https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index)**

# php - 获取命名空间行的语法错误意外 T_STRING

> ID：12650836
> 
> 赞同：11
> 
> 时间：2012-09-29T07:30:47.293
> 
> 标签：php, syntax-error

好吧，我一直在

> 解析错误：语法错误，第 2 行 /path/to/index.php 中的意外 T_STRING

谷歌搜索了我的屁股，但仍然一无所获，到目前为止 index.php 包含：

```
<?php
namespace Infire; # Line 2
... 
```

我正在使用 PHP 5.1

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T07:36:13.040

PHP 命名空间仅在**PHP 5.3+**版本中受支持

> 查看此[PHP 5.3.0 发布公告](http://php.net/releases/5_3_0.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:00:14.377

由于性能权衡、PHP 解析器的限制、与其他 PHP 功能的冲突以及不幸的设计决策，我发现 PHP 5.3 中引入的命名空间存在多种可用性问题。

# java - java：从一个方法返回多个值

> ID：12650837
> 
> 赞同：0
> 
> 时间：2012-09-29T07:30:55.147
> 
> 标签：java

> **可能重复：**
> [如何从 Java 方法返回多个对象？](https://stackoverflow.com/questions/457629/how-to-return-multiple-objects-from-a-java-method)

假设 N= a+b; 对于数字 N，我想生成所有可能的值 a 和 b。就像如果 N =7 a 和 b 是 (1+6),(2+5),(3+4)。

我已经在一个方法中编码了这个逻辑。

```
static void sumofNum(int N){

        for(int a=1; a<N; a++){
                //a+b=N
                int b = N-a;
                System.out.println(a+","+b);
                int next =a+1;
                if(next==b | a==b)
                    return;
        }   
    } 
```

我想从这个方法返回 (1,6),(2,5),(3,4)。接下来对于任何 N ，可以从此方法返回更多 (a,b) 组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T07:32:36.533

返回 a `List<String>`（假设`"(1,6)"`要存储为 a `String`）。使用 的一种实现`List`，例如`ArrayList`来构造列表：

```
static List<String> sumofNum(int N)
{
    List<String> result = new ArrayList<String>();

    for(int a=1; a<N; a++)
    {
        int b = N-a;
        result.add("(" + a + "," + b + ")");
        int next =a+1;
        if(next==b || a==b)
            return result;
    }   
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:44:32.667

如果要将它们作为整数返回，请定义一个包含两个整数的对象（或我在下面所做的滥用点）并返回这些对象的列表。如果您定义自己的对象，只需用它替换点即可。

```
static ArrayList<Point> sumofNum(int N){
    ArrayList<Point> result = new ArrayList<Point>();
    for(int a=1; a<N; a++){
            //a+b=N
            int b = N-a;
        System.out.println(a+","+b);
        int next =a+1;
        if(next==b | a==b)
           result.add(new Point(a,b));
        }   
    return result;
    } 
```

您可以通过以下方式从列表中获取结果：

```
results = sumofNum(7);
int a = results.get(0).x; //a = 1
int b = results.get(0).y; //b = 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T09:16:27.877

在面向对象（也是函数式）的编程风格中，您可以将结果传递给消费者，从而避免将结果存储在集合或列表中的开销。

例子：

```
static void sumofNum(int N){
  for (int a=1; a<N; a++){
    //a+b=N
    int b = N-a;
    consumer.consume(a,b);
    int next =a+1;
    if (next==b || a==b)
      return;
    }   
} 
```

[ 代码的进一步改进是可能的（例如，避免内部 if 和 return），... ]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T07:39:32.087

```
Consider the nos as (1,6),(2,5),(3,4) 
```

**-**现在返回一个`ArrayList<String>`包含`String`“1,6”、“2,5”、“3,4”形式的每个值。

**-**当您收到返回的`ArrayList`，然后使用`split()`方法`","`作为分隔符从“1,6”中取出 1 和 6 等等....

# javascript - 基于网络的屏幕录制

> ID：12650838
> 
> 赞同：1
> 
> 时间：2012-09-29T07:30:59.663
> 
> 标签：javascript, html, web-applications, browser, web

有没有办法通过浏览器访问客户端的系统屏幕？我正在实现一个电子学习网络应用程序我需要通过我的应用程序直接实现屏幕投射所以我想找到一种通过网络浏览器记录屏幕的方法，就像 Screenr 服务一样，我搜索但没有找到合适的 api，有只是一个与我的需求不完全匹配的 chrome extetntion 和 html2canvas，他们能够捕获浏览器选项卡！不是整个系统屏幕。我知道 Screenr 是通过 Java 来做的，但我正在寻找一种更好且无依赖的方法，你对我有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:02:06.563

好的，经过一些搜索和提问，我最终得到了这个答案：要实现这一点，最好的方法是使用获取用户屏幕的 java 小程序，当然它需要安装 java，这是一个缺点，但这是唯一的方法现在，我希望将来在 html 中实现一些 api，就像文件系统 api 或用于访问用户相机的 api 一样。

# c# - 为什么该实例的继承链中的析构函数按从最多派生到最少派生的顺序被调用？

> ID：12650841
> 
> 赞同：5
> 
> 时间：2012-09-29T07:31:14.683
> 
> 标签：c#

基于 C# 规范，10.13 析构函数

> “当一个实例被破坏时，该实例的继承链中的析构函数被调用，从最衍生到最小衍生。”

我的问题是：

为什么按从最多派生到最少派生的顺序调用析构函数？为什么不按从最少派生到最多派生或其他顺序的顺序调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T07:32:46.300

大概是因为派生类知道基类的成员，并且可能需要在析构函数中使用它们。如果首先调用基构造函数，则成员可能不可用，或者对象的状态可能已被基析构函数置于无效状态。

当然，基类不了解或无法访问其派生类的成员，因此可以通过首先调用派生更多的析构函数来避免该问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T07:44:18.377

因为对象是从最不派生到最派生的，所以它们必须从最派生到最不派生被拆除。

派生类知道基类，但基类不知道派生类。如果您要将对象从派生最少的类拆解到派生最多的类，则基类将删除派生类在此过程中可能需要的东西。

例如，考虑基类有一个对象列表：

```
public class MyBase {

  public List<SomeObject> list;

  public MyBase(){
    list = new List<SomeObject>();
    list.Add(new SomeObject());
    list.Add(new SomeObject());
    list.Add(new SomeObject());
  }

  ~MyBase() {
    foreach (SomeObject obj in list) {
      obj.Cleanup();
    }
    list.Clear();
  }

} 
```

派生类为列表中的每个项目添加一些内容：

```
public class MyDerived : MyBase {

  public MyDerived() {
    foreach (SomeObject obj in list) {
      obj.SomeProperty = new Handler();
    }
  }

  ~MyDerived(){
    foreach (SomeObject obj in list) {
      obj.SomeProperty.Cleanup();
    }
  }

} 
```

当对象被拆除时，派生类需要访问列表以清理它添加的内容。如果首先销毁基类，则派生类将无法访问列表中的对象。

（但请注意，这`IDisposable`通常是处理受控对象清理的更好选择。）

# android - 呼叫阻止应用程序android自定义号码

> ID：12650854
> 
> 赞同：3
> 
> 时间：2012-09-29T07:33:13.447
> 
> 标签：android

我想阻止某个电话号码给我打电话。我对所有内容进行了编码，当我将数字放入应用程序时它工作正常。但我不知道如何在安装应用程序后手动输入电话号码的自定义列表。我想更改任何数字并保存它。在`PhoneCallStateListener`我创建了一个新的类型类`Resource.java`，我在其中提取了数字。但它没有用。请帮忙。

这是我的代码：

```
public class PhoneCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        PhoneCallStateListener customPhoneListener = new PhoneCallStateListener(context);
        telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);            
    }        
}

public class PhoneCallStateListener extends PhoneStateListener {
    private Context context;

    public PhoneCallStateListener(Context context){
        this.context = context;
    }        

    @SuppressWarnings("unchecked")
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        switch (state) {
            case TelephonyManager.CALL_STATE_RINGING:
            AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
            //Turn ON the mute
            audioManager.setStreamMute(AudioManager.STREAM_RING, true);
            //i want to getnum from here
            Resource res=new Resource();
            String get=res.et.getText().toString();
            //end of getting num
            TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            try {
                Class clazz = Class.forName(telephonyManager.getClass().getName());
                Method method = clazz.getDeclaredMethod("getITelephony");
                method.setAccessible(true);
                ITelephony telephonyService = (ITelephony) method.invoke(telephonyManager);
                //Checking incoming call number
                if (incomingNumber.equalsIgnoreCase(get)) {
                    telephonyService.silenceRinger();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            //Turn OFF the mute
            audioManager.setStreamMute(AudioManager.STREAM_RING, false);
            break;
        }
        super.onCallStateChanged(state, incomingNumber);
    }
} 
```

资源.java 文件：

```
 public class Resource extends Activity {

    Button btsave,btcancel;
    EditText et;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.numbers);
        et=(EditText)findViewById(R.id.editNumber);
        btsave=(Button)findViewById(R.id.buttonSave);
        btcancel=(Button)findViewById(R.id.buttonCancel);
        edittext();

    }

    public void edittext() {
        // TODO Auto-generated method stub
        InputStreamReader is=new InputStreamReader(this.getResources().openRawResource(R.raw.numtext));
        BufferedReader buff=new BufferedReader(is);
        StringBuilder finaltext=new StringBuilder();
        String line = null;
        try{
            while((line= buff.readLine())!=null)
            {
                finaltext.append(line);
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        et.setText(finaltext);
    }
} 
```

# android - 收到 NFCdate 成功后如何添加警告音？

> ID：12650857
> 
> 赞同：0
> 
> 时间：2012-09-29T07:33:56.677
> 
> 标签：android, nfc

我在 NFC 上做了一个 android 项目，我想在收到 NFC 日期成功后添加警告音，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:02:43.007

Use SoundPool class. Place your audio files in /res/raw/ and first init loading them (for example in OnCreate Method) and then request to play selected audio file. here is code example:

```
private SoundPool soundPool;
private boolean tiltSoundsLoaded = false;
private int tiltSoundID;
private int tiltFailureSoundID;

public void initTiltSounds(Context context) {
    soundPool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);

       soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
    @Override
         public void onLoadComplete(SoundPool soundPool, int sampleId,
             int status) {
           tiltSoundsLoaded = true;
         }
       });
       tiltSoundID = soundPool.load(context, R.raw.swosh_sound_effect, 1);
       tiltFailureSoundID = soundPool.load(context, R.raw.fail_metallic, 1);
}

public void playTiltSound(AudioManager audioManager, boolean success) {
    try{
        int soundToPlay;
        if(success)
            soundToPlay = tiltSoundID;
        else
            soundToPlay = tiltFailureSoundID;

        float actualVolume = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
        if (tiltSoundsLoaded) 
            soundPool.play(soundToPlay, actualVolume, actualVolume, 1, 0, 1f);
        else 
            Log.e(LOG_TAG, "Tilt Sound not loaded");
    }catch(Exception e){
            Log.e(LOG_TAG, "Could not play tilt sound");
    }
} 
```

# ruby-on-rails-3 - 为什么当我在搜索查询中包含“of”字样时，Sunspot Solr 不带来结果？

> ID：12650859
> 
> 赞同：0
> 
> 时间：2012-09-29T07:34:00.277
> 
> 标签：ruby-on-rails-3, solr, sunspot, sunspot-rails

我正在尝试使用 sunspot/solr 进行简单查询，但当我的查询字符串包含单词“of”时，我似乎无法获取结果。

更具体：

当我查询“塞萨洛尼基大学”时，solr 没有返回任何命中，但当我查询“塞萨洛尼基大学”时，它会返回。

以下是日志：

```
Sep 29, 2012 10:24:56 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={fl=*+score&start=0&q=University+of+Thessaloniki&qf=status_code_text+pi_details_text+other_party_name_text+contact_details_text+other_pi_details_text+sending_or_receiving_text+start_at_str_text+materials_text&wt=ruby&fq=type:Mta&defType=dismax&rows=10000} hits=0 status=0 QTime=8 

Sep 29, 2012 10:25:09 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={fl=*+score&start=0&q=University+Thessaloniki&qf=status_code_text+pi_details_text+other_party_name_text+contact_details_text+other_pi_details_text+sending_or_receiving_text+start_at_str_text+materials_text&wt=ruby&fq=type:Mta&defType=dismax&rows=10000} hits=9 status=0 QTime=5 
```

当我直接在 sunspot/solr ( `http://localhost:8981/solr/admin/analysis.jsp?highlight=on`) 的管理界面上进行相同的查询时，它会突出显示匹配项。

你能帮我找出我的错误吗？

在此先感谢帕纳约蒂斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:18:29.363

您正在使用 dismax 查询解析器，它允许您配置[应该匹配的最小数量](http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29)。默认值为 100%，表示所有子句必须匹配。显然你的文件不包含这个词`of`。如果是这种情况，您只需要配置 minimum should match 参数，考虑到它的行为会根据您使用的 solr 版本略有变化。另一方面，如果你认为你有这个词`of`，我建议你检查一下你是如何索引你的文档的。您是否有可能在索引时间而不是在查询时间应用停用词过滤器？

# java - Jasper 报告 Font not found 异常

> ID：12650860
> 
> 赞同：2
> 
> 时间：2012-09-29T07:34:26.800
> 
> 标签：java, fonts, jasper-reports, ireport

当我在**windows 和 mac**上使用 jasper 报告时它工作正常，当我将我的应用程序部署到**linux 机器**并尝试生成它抛出的报告时

```
net.sf.jasperreports.engine.util.JRFontNotFoundException: Font 'Times New Roman' is not available to the JVM. See the Javadoc for more details. 
```

我知道我们可以通过在 linux 机器中安装缺少的字体来解决这个问题（http://stackoverflow.com/questions/3987804/jasper-stops-finding-one-font）。我的问题是，**我们可以将字体打包为 jar 并与 application 一起打包**。这该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T04:42:39.007

您需要 Jasper 的[字体扩展](http://jasperreports.sourceforge.net/sample.reference/fonts/index.html)来实现这一点。该[博客](http://javaskeleton.blogspot.sg/2010/12/embedding-fonts-into-pdf-generated-by.html)解释了实现这一点的步骤，并将其扩展到可用于 PDF 导出。

# c# - 实体框架不会更新实体的新添加属性

> ID：12650861
> 
> 赞同：1
> 
> 时间：2012-09-29T07:34:32.227
> 
> 标签：c#, sql-server-2008, entity-framework-4

我刚刚向我的一个实体添加了一些属性，现在我无法更新它们。

这是我的代码片段：

```
Artikal art = db.Artikli.First();            
art.Image = picbyte;
art.BarcodeType = "UAC";
art.Model = "RayBan";
art.StrProperty1 = "aaaa";
art.StrProperty2 = "bbbb";
art.StrProperty5 = "cccc";
db.SaveChanges(); 
```

`Image`,`Model`和`StrProperty5`是新添加的字段，而其余的都是“旧的”。

这是我通过探查器捕获的：

```
exec sp_executesql N'update [dbo].[Artikli]
set [StrProperty1] = @0, [StrProperty2] = @1, [BarcodeType] = @2
where ([IdArtikal] = @3)
',N'@0 nvarchar(256),@1 nvarchar(256),@2 nvarchar(16),@3 int',@0=N'aaaa',@1=N'bbbb',@2=N'UAC',@3=1 
```

所以 EF 甚至不会尝试更新那些“新”属性。

我刚刚添加了属性，Model First，Update Database from Model，就像我之前做过很多次一样。

可能出了什么问题？我该如何解决？

# http - 谷歌托管脚本，使用 http 还是 https？

> ID：12650864
> 
> 赞同：0
> 
> 时间：2012-09-29T07:35:26.353
> 
> 标签：http, google-maps-api-3, https, google-api, google-cdn

我正在使用 google 托管的 javascripts 库（jquery、jquery-ui 和其他 google jsapi），我注意到这些脚本可以通过 http 和 https 模式访问。现在，我想知道使用 http 的效果是什么或 https 架构来访问这些谷歌托管的脚本，而对于我的项目，它只是一个普通的网站，使用 http 作为默认架构，那么，我应该怎么做，http 或 https？两者之间有任何性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:50:45.333

https 确实会对性能产生负面影响，因为加密和安全协商并非易事。在绝大多数情况下，这种性能成本并不足以超过其收益。

请记住，SSL 还可以保护 Web 服务器的身份，而不仅仅是通道。

如果“中间人”欺骗了您的脚本位置的地址（例如），https 会阻止您在不知不觉中执行意外脚本。http 不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:05:24.900

看看这个：[HTTP vs HTTPS 性能](https://stackoverflow.com/questions/149274/http-vs-https-performance)

考虑到当今的硬件和互联网带宽，性能问题相当小。就我个人而言，我尝试对一个页面（或 iframe / 框架）使用的所有数据使用相同的协议，这意味着脚本、CSS、图像等。

通过 SSL 传输的数据不会被访问者的浏览器缓存，而是会在每次加载页面时下载。

如果页面包含敏感数据、个人数据或提供联系表格等交互，则建议使用 SSL/HTTPS。在这些情况下，购买和安装 SSL 证书是合理的。

例如，谷歌分析首先检查您的页面使用的协议，然后使用相同的协议下载其脚本。

# sql - CASE .. Oracle SQL 中的 WHEN 表达式

> ID：12650875
> 
> 赞同：86
> 
> 时间：2012-09-29T07:37:12.030
> 
> 标签：sql, oracle, oracle10g

我有 1 列的表并有以下数据

```
Status
a1
i
t
a2
a3 
```

我想在我的选择查询中显示以下结果

```
Status| STATUSTEXT
a1    | Active
i     | Inactive
t     | Terminated
a2    | Active
a3    | Active 
```

我能想到的一种方法是在选择查询中使用 Switch When 表达式

```
SELECT
status,
CASE status 
WHEN 'a1' THEN 'Active'
WHEN 'a2' THEN 'Active'
WHEN 'a3' THEN 'Active'
WHEN 'i' THEN 'Inactive'
WHEN 't' THEN 'Terminated'
END AS StatusText
FROM stage.tst 
```

有没有其他方法可以做到这一点，我不需要***为 Active Status 编写 When 表达式 3 次，***并且可以在一个表达式中检查整个活动状态？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-09-29T07:46:25.733

你可以使用一个`IN`子句

就像是

```
SELECT
  status,
  CASE
    WHEN STATUS IN('a1','a2','a3')
    THEN 'Active'
    WHEN STATUS = 'i'
    THEN 'Inactive'
    WHEN STATUS = 't'
    THEN 'Terminated'
  END AS STATUSTEXT
FROM
  STATUS 
```

看看这个演示

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!4/94578/2/0)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-29T07:43:05.663

当然...

```
select case substr(status,1,1) -- you're only interested in the first character.
            when 'a' then 'Active'
            when 'i' then 'Inactive'
            when 't' then 'Terminated'
       end as statustext
  from stage.tst 
```

然而，这个模式有一些令人担忧的事情。首先，如果您有一列具有某种含义，则在末尾附加一个数字不一定是最好的方法。此外，根据您拥有的状态数量，您可能需要考虑将此列转换为单独表的外键。

* * *

根据您的评论，您肯定希望将其转换为外键。例如

```
create table statuses ( -- Not a good table name :-)
    status varchar2(10)
  , description varchar2(10)
  , constraint pk_statuses primary key (status)
    )

create table tst (
    id number
  , status varchar2(10)
  , constraint pk_tst primary key (id)
  , constraint fk_tst foreign key (status) references statuses (status)
    ) 
```

然后您的查询变为

```
select a.status, b.description
  from tst a
  left outer join statuses b
    on a.status = b.status 
```

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/39f8e/2)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-29T07:42:27.427

您可以重写它以使用 a 的 ELSE 条件 [`CASE`](http://www.techonthenet.com/oracle/functions/case.php)：

```
SELECT status,
       CASE status
         WHEN 'i' THEN 'Inactive'
         WHEN 't' THEN 'Terminated'
         ELSE 'Active'
       END AS StatusText
FROM   stage.tst 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-06T09:45:42.627

**使用decode**会更容易。

```
SELECT
  status,
    decode ( status, 'a1','Active',
                     'a2','Active',
                     'a3','Active',
                     'i','Inactive',
                     't','Terminated',
                     'Default')STATUSTEXT
FROM STATUS 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-17T12:26:07.223

由于网络搜索`Oracle case`在该链接的顶部，我在此处添加了 case**语句**，但没有回答有关 case**表达式**的问题：

```
CASE
   WHEN grade = 'A' THEN dbms_output.put_line('Excellent');
   WHEN grade = 'B' THEN dbms_output.put_line('Very Good');
   WHEN grade = 'C' THEN dbms_output.put_line('Good');
   WHEN grade = 'D' THEN dbms_output.put_line('Fair');
   WHEN grade = 'F' THEN dbms_output.put_line('Poor');
   ELSE dbms_output.put_line('No such grade');
END CASE; 
```

或其他变体：

```
CASE grade
   WHEN 'A' THEN dbms_output.put_line('Excellent');
   WHEN 'B' THEN dbms_output.put_line('Very Good');
   WHEN 'C' THEN dbms_output.put_line('Good');
   WHEN 'D' THEN dbms_output.put_line('Fair');
   WHEN 'F' THEN dbms_output.put_line('Poor');
   ELSE dbms_output.put_line('No such grade');
END CASE; 
```

每个 Oracle 文档：[https ://docs.oracle.com/cd/B10501_01/appdev.920/a96624/04_struc.htm](https://docs.oracle.com/cd/B10501_01/appdev.920/a96624/04_struc.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-16T09:43:31.700

```
SELECT
  STATUS,
  CASE
    WHEN STATUS IN('a1','a2','a3') 
     THEN 'Active'
    WHEN STATUS = 'i' 
     THEN 'Inactive'
    WHEN STATUS = 't'
     THEN 'Terminated'  ELSE null
  END AS STATUSTEXT
FROM
  stage.tst; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-08T14:29:03.030

以下语法将起作用：

```
....
where x.p_NBR =to_number(substr(y.k_str,11,5))
and x.q_nbr = 
 (case 
 when instr(substr(y.m_str,11,9),'_') = 6   then  to_number(substr(y.m_str,11,5))
 when instr(substr(y.m_str,11,9),'_') = 0   then  to_number(substr(y.m_str,11,9))
  else 
       1
  end
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-29T07:52:46.007

您只能检查状态的第一个字符。为此，您使用 substring 函数。

substr（状态，1,1）

在你过去的情况下。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-18T11:38:05.993

```
DECODE(SUBSTR(STATUS,1,1),'a','Active','i','Inactive','t','Terminated','N/A') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-26T13:24:39.260

```
CASE TO_CHAR(META.RHCONTRATOSFOLHA.CONTRATO)
WHEN '91' AND TO_CHAR(META.RHCONTRATOSFOLHA.UNIDADE) = '0001' THEN '91RJ'
WHEN '91' AND TO_CHAR(META.RHCONTRATOSFOLHA.UNIDADE) = '0002' THEN '91SP'
END CONTRATO,

00905\. 00000 -  "missing keyword"
*Cause:    
*Action:
Erro na linha: 15 Coluna: 11 
```

# ssl - 购买证书的 Heroku SSL 端点似乎无法正常工作

> ID：12650890
> 
> 赞同：11
> 
> 时间：2012-09-29T07:40:29.270
> 
> 标签：ssl, heroku

我已经购买了 SSL 证书并将其安装到我的 Heroku 应用程序中。

但是，当我尝试通过 https 访问我的网站时，Chrome 会报告：

> 本网站的身份未经核实。• 服务器的证书与 URL 不匹配。

其他浏览器报告类似的消息。

检查 Chrome 中的证书信息显示我的站点仍在使用 Heroku 的证书，由 Digicert（而不是我自己的 CA）颁发。

关于我可能会错过什么的任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T10:07:31.197

该问题与错误设置的 DNS 记录有关。

根据文档（...），将证书上传到 Heroku 后，请执行以下操作：

> heroku 证书

这为您提供了启用 SSL 的域的正确端点。这是一个看起来像“tokyo-2121.herokussl.com”的域。

接下来，转到您的 DNS 服务提供商并更新/添加启用 SSL 的域的 CNAME 记录以指向“tokyo-2121.herokussl.com”。

# regex - 正则表达式查找以 ABC 开头且不以 XYZ 结尾的字符串

> ID：12650891
> 
> 赞同：1
> 
> 时间：2012-09-29T07:40:43.717
> 
> 标签：regex

请在这里帮助我

对于下面的示例，我如何编写正则表达式来查找以 ABC 开头而不以 XYZ 结尾的字符串

例子：

```
ABCfdsAFfadsXYZ ABCffasdffdaAAA FASfdaaffasaAFA 
```

其中，只有第二个应该匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T07:42:41.183

```
\bABC\w*\b(?<!XYZ) 
```

假设您的正则表达式引擎支持后向断言。

**解释：**

```
\b        # Start at a word boundary
ABC       # Match ABC
\w*       # Match any number of alphanumeric characters
\b        # End at a word boundary
(?<!XYZ)  # Assert that the previous three characters were not XYZ 
```

# shell - 在 Ubuntu 上安装 openswan 无人值守

> ID：12650900
> 
> 赞同：2
> 
> 时间：2012-09-29T07:42:15.820
> 
> 标签：shell, ubuntu, debian

我正在 Ubuntu 上编写 shell scirpt 来安装 openswan：

```
echo "openswan openswan/install_x509_certificate boolean false" | debconf 设置选择
apt-get 安装 openswan
```

它将提示此消息。我应该按“Enter”继续。

[http://www.flickr.com/photos/saiq-xh/8034933746/](http://www.flickr.com/photos/saiq-xh/8034933746/)

有没有办法使用脚本忽略信息？

# xamarin.ios - 为 iPhone 5 支持添加 Default-568h@2x.png 后缺少标题栏

> ID：12650901
> 
> 赞同：0
> 
> 时间：2012-09-29T07:42:24.337
> 
> 标签：xamarin.ios, ios6, iphone-5

我使用 MonoTouch/Universal/Master-Detail 类型的 Monotouch 6.0.2 创建了一个新的解决方案。我没有写任何一行代码。当我启动应用程序时，一切看起来都很棒。然后我添加一个 640x1136 像素的图像以支持名为 Default-568h@2x.png 的 iPhone 5 到解决方案（类型内容）。当我再次启动解决方案时（重建后），标题栏消失了，屏幕底部没有工具栏。无法进行导航。请看附图（左侧可以，右侧没有）。这里有什么问题？

谢谢，扬

![](../Images/44d57c7e5cc2ade8290b19eaa0439a90.png)

# c - 在“C”中使用数组打印数组值而不使用大括号

> ID：12650903
> 
> 赞同：-3
> 
> 时间：2012-09-29T07:42:30.220
> 
> 标签：c, arrays, printf

我有以下数组：

```
int array[]={0,1,2,3,4}; 
```

我需要`3`在不使用方括号的情况下打印数组列表中的元素。所以我不应该使用：

```
printf("%d",array[3]); 
```

如何在不使用方括号的情况下实现相同的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T07:43:49.153

`array[n]`相当于`*(array + n)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T07:43:44.010

你可以只使用`*(array + 3)`. 这在语法上不同于`array[3]`但在功能上相同。

该表达式`array + 3`为您提供数组中第四个元素的地址（索引号 3），并针对元素大小进行了适当的缩放。换句话说，它与使用 获取元素的地址相同`&(array[3])`。

然后`*`解引用提取该地址（正确类型）处的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:34:31.987

要打印第 n 个元素，我们知道`arr[n-1] == *(arr+n-1)`。使用 n-1 是因为 C 中的数组是 0 索引的。

# compass-sass - 使用 SASS 变量作为 CSS `content` 属性的值

> ID：12650912
> 
> 赞同：4
> 
> 时间：2012-09-29T07:43:47.660
> 
> 标签：compass-sass, susy-compass

你好！

这可能是由于我对 SASS/Compass 缺乏了解造成的。

我正在尝试使用以下 SASS 代码输出网格宽度：

```
$total-columns        : 4
$column-width         : 4em                 // each column is 4em wide
$gutter-width         : $column-width / 2   // 1em gutters between columns
$grid-padding         : $gutter-width / 2   // grid-padding equal to gutters

#page
  +container
  +susy-grid-background

  #block-block-3
    div.content
      p:first-of-type:after
        content: columns-width() 
```

块 3 中没有打印任何内容。:(

我也试过了`content: columns-width($total-columns)`，还是不行。如果我这样做`content: "foo"`了，“foo”会被打印出来。

我究竟做错了什么？我如何查看 susy 计算的网格宽度？另外，它可以打印在`compass watch`输出中吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T09:37:38.557

好的，解决方案是使用[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)：

```
content: "#{columns-width($total-columns)}" 
```

# android - NetworkOnMainThreadException 的快速修复

> ID：12650921
> 
> 赞同：9
> 
> 时间：2012-09-29T07:44:34.860
> 
> 标签：android, network-programming, networkonmainthread

我需要执行第三方开源程序，它会抛出 NetworkOnMainThreadException。根据 SDK 参考，这仅适用于针对 Honeycomb SDK 或更高版本的应用程序。允许针对早期 SDK 版本的应用程序在其主事件循环线程上进行联网。

在第一阶段，我只想运行程序，而不更改源。因此，我将 AndroidManifesr.xml 中的行从：

```
    安卓：targetSdkVersion="15"

```

至：

```
    安卓：targetSdkVersion="10"

```

但是，这并没有帮助，程序仍然会抛出 NetworkOnMainThreadException。我怎样才能使它工作？我正在尝试在 Android Emulation Google API（16 级）上执行该程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-29T07:46:17.180

您可以将其更改为：

```
android:targetSdkVersion="9" 
```

API 10 对应蜂窝，而 9 是姜饼。此行为仅在 API 10 及更高版本中可见。

但是，我建议不要这样做。相反，您应该将任何长时间运行的操作或可能长时间运行的操作移动到后台线程中，例如[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

您还可以尝试使用以下方法关闭严格模式：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T07:49:24.030

您正在 UI 线程上执行网络任务。执行网络操作的最佳方式是使用 AsyncTask 或简单地创建另一个线程。但是，如果您想要一种快速而肮脏的方法来摆脱错误；你也可以用这个

```
ThreadPolicy tp = ThreadPolicy.LAX;
StrictMode.setThreadPolicy(tp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T23:17:48.470

这些不是解决方案，你只是告诉监护人睡觉和窗台！android 决定不让您在主线程（UI 线程）中进行网络操作，因为这些操作可以使“停止”（ui 停止响应）。所以，正如我所读到的，他们告诉你不要射你的腿，你会找到方法！！！

解决方案：分离线程，或异步...

# java - 使用 SolrJ 客户端连接器 3.6 连接到 Solr 1.4

> ID：12650924
> 
> 赞同：0
> 
> 时间：2012-09-29T07:45:32.683
> 
> 标签：java, maven, solr, solrj, apache-httpcomponents

如何使用 SolrJ 3.6 连接器连接到配置了 Basic Auth 的 Solr 1.4 搜索服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T07:45:32.683

根据[使用 SolrJ 的说明](http://lucidworks.lucidimagination.com/display/solr/Using+SolrJ)：

获取相关依赖项，例如使用 maven：

```
 <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-solrj</artifactId>
        <version>3.6.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpcore</artifactId>
        <version>4.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpmime</artifactId>
        <version>4.1.2</version>
    </dependency> 
```

使用 SolrJ 3.6 和最新的 Apache Http Components http 客户端连接到 Solr 1.4 的示例应用程序以协商基本身份验证：

```
import java.io.IOException;
import java.util.Iterator;

import org.apache.http.HttpException;
import org.apache.http.HttpRequest;
import org.apache.http.HttpRequestInterceptor;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.auth.BasicScheme;
import org.apache.http.impl.client.AbstractHttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.HttpContext;
import org.apache.solr.client.solrj.SolrQuery;
import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.impl.HttpSolrServer;
import org.apache.solr.client.solrj.impl.XMLResponseParser;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.client.solrj.response.UpdateResponse;
import org.apache.solr.common.SolrDocument;
import org.apache.solr.common.SolrDocumentList;
import org.apache.solr.common.SolrInputDocument;

/**
 * Sample app
 *
 */
public class App 
{
    public static void main( String[] args ) throws SolrServerException, IOException
    {
        String url = "https://localhost:8080/solr/";
        String httpAuthUser = "solr_admin";
        String httpAuthPass= "somePassword";
            // Configure latests Apache Http Components http client
        HttpClient httpClient = new DefaultHttpClient();
        if (httpAuthUser != null && httpAuthPass != null) {
            AbstractHttpClient client = (AbstractHttpClient) httpClient;
            App a = new App();
            client.addRequestInterceptor(a.new PreEmptiveBasicAuthenticator(httpAuthUser, httpAuthPass));
          }
        // Configure XMLResponseParser as standard javabin parser does not work with 1.4
        SolrServer solr = new HttpSolrServer(url, httpClient, new XMLResponseParser());
        // Test adding some data 
        SolrInputDocument document = new SolrInputDocument();
        document.addField("id", "552199");
        document.addField("name", "Gouda cheese wheel");
        document.addField("price", "49.99");
        UpdateResponse uresponse = solr.add(document);
        System.out.println("UpdateResponse"+uresponse.getStatus());
        solr.commit();

        // Query for the data just added
        SolrQuery parameters = new SolrQuery();
        parameters.set("q", "*");
        QueryResponse response = solr.query(parameters);
        SolrDocumentList list = response.getResults();
        Iterator<SolrDocument> si = list.iterator();
        System.out.println("Solr document"+list.getNumFound());
        while(si.hasNext()){
            System.out.println("Solr document"+si.next().toString());
        }
    }

    protected class PreEmptiveBasicAuthenticator implements HttpRequestInterceptor {
          private final UsernamePasswordCredentials credentials;

          public PreEmptiveBasicAuthenticator(String user, String pass) {
            credentials = new UsernamePasswordCredentials(user, pass);
          }

          public void process(HttpRequest request, HttpContext context)
              throws HttpException, IOException {
            request.addHeader(BasicScheme.authenticate(credentials,"US-ASCII",false));
          }
        }
} 
```

# asp.net-mvc-3 - MVC 从数据库中检索二进制图像会下载图像，但我需要显示它

> ID：12650926
> 
> 赞同：0
> 
> 时间：2012-09-29T07:45:50.857
> 
> 标签：asp.net-mvc-3

大家好，我正在从数据库中检索图像，它存储为二进制字段这是我使用的代码

```
public FileContentResult GetImage(int? id)
{
    byte[] img=.......//get image from db
    string imgType = "image/jpeg";
    return File(img, imgType);
} 
```

但问题是代码下载了图像，我需要显示图像而不是下载它，

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:23:41.873

我错误地设置了内容类型 - 确保它是`image/jpeg`，`image/png`等等。

# matlab - Matlab 当前文件夹选项卡自动反映打开的文件

> ID：12650927
> 
> 赞同：0
> 
> 时间：2012-09-29T07:46:12.533
> 
> 标签：matlab

当我在编辑器中打开一个新的 .m 文件时，我希望当前文件夹选项卡自动更新。因此，当前文件夹选项卡将始终打开到编辑器中显示的文件的文件夹。这在 Matlab 中是否支持？我知道 Visual Studio 有这样的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:27:00.380

MATLAB 不这样做。不过，也许这对您来说已经足够接近了：如果您在编辑器中启用了文档栏（如果它是隐藏的，请转到桌面菜单-> 文档栏-> 栏位置-> 选择一个位置）。现在在编辑器中打开一个文件。如果您在文档栏中右键单击其元素，则可以选择将当前文件夹更改为文件的位置。所以不是自动的，但只需单击一下即可。

# perl - Perl - 有没有办法用一些文本框显示通知？

> ID：12650930
> 
> 赞同：2
> 
> 时间：2012-09-29T07:46:27.070
> 
> 标签：perl, libnotify

这是我的问题：我正在尝试使 Skype 与我的 gnome 桌面环境更具交互性。所以我想用 Perl 来做到这一点。有没有办法使用 libnotify 来显示一个文本框（我可以填写或输入的字段）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:01:06.083

Gnome 提供了**zenity**从脚本创建对话框：

```
zenity --entry --text "foo" --entry-text "bar" 
```

KDE 提供**kdialog**。较旧的 Gnome 提供了**gdialog**。还有**xdialog**。

# iphone - 如何整合 tumblr？

> ID：12650932
> 
> 赞同：2
> 
> 时间：2012-09-29T07:46:51.097
> 
> 标签：iphone, tumblr

我正在尝试将 tumblr 集成到我的 iphone 应用程序中。经历了许多文档和 git 项目，即使 tumblr 文档没有解释清楚，它们都没有帮助。请给我一些参考，以便我弄清楚，如何在 iphone 应用程序中集成 tumble

我经历了[这个 git 项目](https://github.com/felipesabino/ios-tumblr-sdk)，即使在提供正确的凭据后无法登录也可能是框架已过时，

我无法弄清楚如何将翻滚集成到 iphone 应用程序中。

请帮我。

# java - 如何对 MAP 的项目进行排序并删除一个？

> ID：12650939
> 
> 赞同：0
> 
> 时间：2012-09-29T07:49:16.270
> 
> 标签：java, object, map, hashmap

我正在使用以下代码将对象列表保留在 MAP 中，

```
 Map<String, List<Rows>> map = new HashMap<String, List<Rows>>()
 while( rs.next() ) {
      Rows row = new Rows();
      /*
       * code to initialize the values of row from the record
      */
     String category = rs.getString("Cat");
     if(!map.containsKey(category)){
         map.put(category, new ArrayList<Rows>());
     }
     map.get(category).add(row);
  } 
```

是否可以对每个类别的值进行排序？如何删除特定类别中的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:54:57.517

@Eme如果您想要按其键排序的地图，则称为[SortedMap](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)。

此外，如果您想从特定类别的列表中删除其中一项，您可以执行以下操作：

```
List<Row> list = map.get(category);
list.remove(index of element you want to remove);
map.put(category, list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:56:18.777

移除`remove()`map的item使用方法：

`map.remove(category)`

据我了解，每个类别的项目都存储在列表中，所以排序很简单：

`Collections.sort(map.get(category))`

您可以使用 custom 自定义排序`Comparator`。

编辑：

但是，如果您希望将*键*排序到您的地图中，您必须使用`SortedMap`，例如`TreeMap`，并且可能提供知道比较您的类别的比较器。否则键将按字母顺序排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T07:56:17.620

是否可以对类别中的值进行排序：使用[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)而不是列表来保持值在添加时排序。

要删除，您可以使用 map.get(category).remove(row); 或者创建一个继承自 map 并覆盖 remove(..) 的新类。您可以在此处放置代码以从附加到特定键的列表中删除，而不是从地图本身中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T07:59:50.963

使用列表将项目存储在您的类别中。还有一个 API 函数来排序列表。并使用 (map.remove(category) ).get(0) 获取您的类别列表中的第一项

# sql-server-2008 - 如何将存储过程中的值插入到 SQL Server 函数中的变量中

> ID：12650944
> 
> 赞同：1
> 
> 时间：2012-09-29T07:49:36.463
> 
> 标签：sql-server-2008, tsql, stored-procedures

我有一个返回值的存储过程（例如`GetData`：）

如何在另一个函数中声明一个变量来获取这个值？

像这样的东西

```
Create Function Test
Return Int
Begin
    Declare @data My_Data_Type
    Declare @count int
    SET @data = exec GetData
    Select @count = count(*)
    From @data

    Return @count
End 
```

请帮我 ！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T07:56:05.720

如果您的存储过程返回表然后执行

```
declare @data as table(col1 int, col2 varchar(50))

insert into @data exec GetData

Select @count = count(*) from @data 
```

如果要返回标量值，例如 int、varchar，请使用 OUTPUT 参数

```
CREATE PROC GetData
(
   @retVal int OUTPUT
)
AS
BEGIN
     SET @retVal = 123

     Return 0
END 
```

然后以这种方式检索它

```
 declare @data int
 EXEC GetData @data OUTPUT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T07:51:58.147

看看[使用带有输出参数的存储过程](http://msdn.microsoft.com/en-us/library/ms378108%28v=sql.105%29.aspx)

> 您可以调用的 SQL Server 存储过程是一个返回一个或多个 OUT 参数的存储过程，这些参数是存储过程用于将数据返回给调用应用程序的参数。

也[使用 OUTPUT 参数返回数据](http://msdn.microsoft.com/en-us/library/ms187004%28v=sql.105%29.aspx)

> 如果在过程定义中为参数指定 OUTPUT 关键字，则存储过程可以在存储过程退出时将参数的当前值返回给调用程序。要将参数的值保存在调用程序可以使用的变量中，调用程序在执行存储过程时必须使用 OUTPUT 关键字。

# eclipse-cdt - Juno SR1 无法再启动 CDT 项目

> ID：12650945
> 
> 赞同：1
> 
> 时间：2012-09-29T07:50:02.680
> 
> 标签：eclipse-cdt

我刚刚更新到 Juno SR1 和 CDT 版本：8.1.1。现在我不能再启动（运行或调试）任何 CDT 项目了。

我得到的错误：无法启动。选择无法启动，并且最近没有启动。

可以肯定的是，我刚刚添加了一个新的“Hello World C++”项目。编译正常，无法启动。

如果我在运行 - 运行配置下查看，我看不到任何对 CDT 项目有意义的选项。

![在此处输入图像描述](../Images/e0e7b7cbcf80b1f15a32ede04dd64d29.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:51:28.057

我在朱诺遇到了完全相同的问题。我通过从同一个 Eclipse 重新安装“C/C++ 开发工具”解决了这个问题：

帮助 -> 安装新软件 ...

介绍“使用： http: [//download.eclipse.org/tools/cdt/releases/juno](http://download.eclipse.org/tools/cdt/releases/juno) ”并选择 CDT 作为图像：

![安装新软件](../Images/a5cc5028b864e4708676d61c9fae65f6.png)

下载并重新启动后，我的“运行配置”现在可以选择“C/C++ 应用程序”：

![运行配置](../Images/3cabf842e55a712e003314bfdc98109e.png)

# javascript - Mozilla Firefox 中未定义的`innerText`

> ID：12650947
> 
> 赞同：2
> 
> 时间：2012-09-29T07:50:09.047
> 
> 标签：javascript, firefox, undefined

我正在[http://forkinthecode.net/budget/2012-2013.php建立一个网站](http://forkinthecode.net/budget/2012-2013.php)

我编写了一个脚本，在地址栏中打开一个带有 Google 搜索 url 的窗口，用于 MySQL 数据库中每个表上的 Portfolios、Programs、Agencies 和 Objectives。

该脚本适用于 Chrome、Safari、IE 和 Opera，但在我的机器上，当使用 Mozilla Firefox 时，该变量显示为“未定义”。

我浏览了网络并没有找到任何关于此的内容。

```
<script type="text/javascript">//<![CDATA[ 

function getPortNews() 
{   
    portfolio = document.getElementById('portfolio').innerText;
    static_url = ('http://google.com.au/search?q=');

    search_url = ( static_url + portfolio );
    window.open(search_url);

        }
        //]]></script> 
```

我是 JavaScript 新手，请注意，相关网站及其背后的数据库已完成约 75%。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T08:12:58.873

下载 jQuery 并使用：

```
text() or html() 
```

或者，如果您坚持使用 vanilla js，请使用 innerHTML。它得到了广泛的支持。但是，如果在结果中获取 html-tags 对您来说是个问题，您应该使用上面 Rob W 的解决方案，它只返回实际文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:29:59.390

标准中没有`innerText`属性，这就是咬你的东西。

# python - 在 Linux 中安装脚本

> ID：12650950
> 
> 赞同：0
> 
> 时间：2012-09-29T07:50:32.180
> 
> 标签：python, linux, fedora, paramiko

我一直在尝试在两台不同的 Linux 机器上安装 exscript，但没有取得多大成功。我尝试使用[此处](https://github.com/knipknap/exscript/wiki/Installation-Guide)的安装指南，确保我有 python-crypto、paramiko、Python setuptools 等。然后我在 exscript 上进行 make install，一切看起来都很正常。但是，我尝试打开 exscript 帮助页面并：

```
root@slave1 exscript# exscript --help
Traceback (most recent call last):
  File "/usr/local/bin/exscript", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 2603, in <module>
    working_set.require(__requires__)
  File "/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 666, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: Exscript==v2.1.365-g7b15387 
```

那个会发生。不知道我做错了什么。任何援助将不胜感激。提前致谢。

# sql - 使用游标处理存储过程中表中的每一行

> ID：12650953
> 
> 赞同：0
> 
> 时间：2012-09-29T07:50:43.537
> 
> 标签：sql, sql-server, cursor

我的场景有点不同。我在存储过程中所做的是

创建临时表并使用“光标”将行插入其中

```
Create Table #_tempRawFeed
    (
    Code            Int Identity,
    RawFeed         VarChar(Max)
    ) 
```

使用游标在临时表中插入数据

```
 Set @GetATM = Cursor Local Forward_Only Static For
    Select DeviceCode,ReceivedOn
    From RawStatusFeed
    Where C1BL=1 AND Processed=0
    Order By ReceivedOn Desc
Open @GetATM
Fetch Next
From @GetATM Into @ATM_ID,@Received_On
While @@FETCH_STATUS = 0
    Begin
        Set @Raw_Feed=@ATM_ID+' '+Convert(VarChar,@Received_On,121)+' '+'002333'+' '+@ATM_ID+' : Bills - Cassette Type 1 - LOW '
        Insert Into #_tempRawFeed(RawFeed) Values(@Raw_Feed)
        Fetch Next
        From @GetATM Into @ATM_ID,@Received_On
    End 
```

现在必须使用另一个光标处理临时表中的每一行

```
DECLARE @RawFeed    VarChar(Max)

DECLARE Push_Data CURSOR FORWARD_ONLY LOCAL STATIC
FOR SELECT RawFeed
FROM #_tempRawFeed

OPEN Push_Data
FETCH NEXT FROM Push_Data INTO @RawFeed

WHILE @@FETCH_STATUS = 0
BEGIN
    /* 
    What Should i write here to retrieve each row one at a time ??
    One Row should get stored in Variable..in next iteration previous value should get deleted.
    */
    FETCH NEXT FROM Push_Data INTO @RawFeed 
END
CLOSE Push_Data
DEALLOCATE Push_Data

Drop Table #_tempRawFeed 
```

**我应该在 BEGIN 中写什么来一次检索每一行？一行应该存储在变量中。在下一次迭代中，前一个值应该被删除。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:10:28.063

关于您的最后一个问题，如果您真正打算在最后一个游标中做的是将 RawFeed 列值连接到一个变量中，那么您根本不需要游标。您可以使用以下内容（改编自您的 SQL Fiddle 代码）：

```
CREATE TABLE #_tempRawFeed
(
   Code            Int IDENTITY
   RawFeed         VarChar(MAX)
)

INSERT INTO #_tempRawFeed(RawFeed) VALUES('SAGAR')
INSERT INTO #_tempRawFeed(RawFeed) VALUES('Nikhil')
INSERT INTO #_tempRawFeed(RawFeed) VALUES('Deepali')

DECLARE @RawFeed    VarChar(MAX)

SELECT @RawFeed = COALESCE(@RawFeed + ', ', '') + ISNULL(RawFeed, '') 
FROM #_tempRawFeed

SELECT @RawFeed

DROP TABLE #_tempRawFeed 
```

更多关于将不同的行值连接成单个字符串的信息：[Concatenate many rows into a single text string？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

我很确定您也可以避免使用第一个光标。请避免使用游标，因为这确实会损害性能。使用基于集合的操作可以获得相同的结果。

# c++ - 导出一个类是否应该有所作为？

> ID：12650956
> 
> 赞同：2
> 
> 时间：2012-09-29T07:50:47.780
> 
> 标签：c++, visual-studio, compiler-bug

```
class __declspec(dllexport) DI_1
{
    DI_1& operator = (DI_1 &){};
};

class DI_2
{
    DI_2& operator = (DI_2 &){};
};

int main()
{
    DI_1 a;
    DI_2 b;
    return 0;
} 
```

以下代码在编译时`VS 2010/2012`会出现以下错误：

> 错误 C4716：“DI_1::operator=”：必须返回一个值

而我期望它也会为`DI_2`类返回相同的错误。

这是一个编译器错误，没有将`DI_2`类标记为错误吗？

如果不是，有人可以解释原因吗？

编辑：我用 Solaris Compiler 确认，它对两个类都抛出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:33:51.657

从二进制模块导出类不应该有任何区别。在您的示例中，我也没有看到任何语义差异。

尽管如此，糟糕的错误报告在无可比拟的更少问题中，而不是错误的代码生成。每个合理的编译器开发者都会遵循这个规则。这就是解释。

ps 在模板实例化期间，仅生成那些被调用的方法。其他方法（以及其中的潜在语法错误）将被忽略。相反，对于 AFAIK 类，通常会生成所有方法。我不知道这种不对称的充分理由。也许 MS 编译器正在朝这个方向做一些事情。

# gwt - 如何在 GWT 中关闭窗口

> ID：12650959
> 
> 赞同：0
> 
> 时间：2012-09-29T07:51:28.077
> 
> 标签：gwt, uibinder, gwt2

我被要求在 GWT Composite 中放置一个“完成”按钮（尽管已经有关闭图标），它应该在单击时简单地关闭窗口。不幸的是，我找不到`.close()`实现它的方法。如何做呢？

![在此处输入图像描述](../Images/712b10946b5b222209d2de7265071d8d.png)

我有一个包含复合组件的 UserDialog 类，我将其命名为 UserComposite。UserDialog 扩展为 CustomDialogBox，CustomDialogBox 扩展为 DialogBox 类：

```
public class UserDialog extends CustomDialogBox {    
    private UserComposite c = new UserComposite();
    // more codes here
    private FlowPanel getFlowPanel() {
        if (p instanceof Panel && c instanceof Composite) {
            p.setSize(WIDTH, HEIGHT);
            p.add(c);
        }
        return p;
    } 
} 
```

然后这是我的 UserComposite

```
public class UserComposite extends Composite {
   // codes here
   @UiHandler("doneButton")
   void onDoneButtonClick(ClickEvent event) {
      this.removeFromParent();
   }
} 
```

我尝试了 removeFromParent() 但 UserComposite 仅从父级中删除，导致一个空的对话框。

![在此处输入图像描述](../Images/1d020dd1f55f82297d66199581f337fd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T08:03:14.857

@先生。Xymon，如果您指的是 PopupPanel 的实例或 PopupPanel 的任何子类的实例，则按窗口，您可以使用以下内容：

```
popupPanel.hide(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T16:50:12.597

您需要隐藏对话框，而不是复合。一种方法是将对话框的引用传递给 UserComposite 构造函数，然后使用该引用在对话框上调用 hide()。可能是这样的：

```
public class UserDialog extends CustomDialogBox {
    private UserComposite c = new UserComposite(this);
    ...
}

public class UserComposite extends Composite {
    private DialogBox parentDialog;

    public UserComposite(DialogBox parentDialog) {
        this.parentDialog = parentDialog;
    }

    @UiHandler("doneButton")
    void onDoneButtonClick(ClickEvent event) {
        parentDialog.hide();
    }
} 
```

# php - 捕获 set_time_limit() 达到 - PHP

> ID：12650961
> 
> 赞同：1
> 
> 时间：2012-09-29T07:52:06.133
> 
> 标签：php, time

> **可能重复：**
> [如何捕获致命错误：PHP 中超过了 30 秒的最大执行时间](https://stackoverflow.com/questions/6861033/how-to-catch-the-fatal-error-maximum-execution-time-of-30-seconds-exceeded-in-p)

我以前用过`set_time_limit(60);`很多次。但是，当超过这个值时，无论如何都会捕获它，目前它只是以同样的旧错误进行轰炸。

我想捕获它失败然后以我自己的方式处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T07:59:20.473

来自 php.net 中[set_time_limit的评论部分](http://in.php.net/manual/en/function.set-time-limit.php#92949)

```
<?php
set_time_limit(60);
ob_start();
function shutdown () {
  $out = ob_get_clean();echo $out; // echo output if required
  // do your processing code
}
register_shutdown_function('shutdown');

// your code
?> 
```

# ruby - 需要 bigdecimal loaderror ruby

> ID：12650964
> 
> 赞同：0
> 
> 时间：2012-09-29T07:53:06.873
> 
> 标签：ruby, linux, compiler-errors, irb

我有一个非常令人沮丧的问题。我的家用机器上有 ubuntu 12.04 和 ruby​​ 1.8.7，我刚刚完成了一个可以在家用机器上完美编译和运行的项目，但是当我将它移植到我的大学实验室时（它必须编译才能获得成绩，他们也在运行 ruby​​ 1.8.7）我收到以下错误：

```
`require': no such file to load -- bigdecimal (LoadError) 
```

我想要的`BigDecimal`类是我需要为我的项目的一些对数计算提供更大浮点精度的类。谁能帮我破译为什么这会是一个问题？我认为 BigDecimal 类包含在 1.8.7 的 ruby​​ 核心库中？我在这里错过了什么吗？编辑：正在编译的代码。

```
 `#this is the language model generator
    require "trainer"
    require "bigdecimal"

class Model
    attr_accessor :frequency_tables

def initialize(trainer, test_file)
@trainer = trainer
@frequency_tables = []
@frequency_tables[0] = trainer.corpus
@frequency_tables[1] = trainer.freq
@frequency_tables[2] = trainer.bifreq
@frequency_tables[3] = trainer.trifreq
@frequency_tables[4] = trainer.word_count()
@frequency_tables[5] = trainer.vocab_count()
end

def unigram_count(string)
string.upcase!
return @frequency_tables[1][string]
end
def bigram_count(string)
string.upcase!
return @frequency_tables[2][string]
end
def trigram_count(string)
string.upcase!
return @frequency_tables[3][string]
end

def round(float)
return ((float * 10000).round.to_f) / 10000 
end

def process_unigram(sentence)
probability = BigDecimal.new("1") 
sen_arr = sentence.split(" ")
sen_arr.each { |word|
#  binding.pry
  probability *= (BigDecimal.new(unigram_count(word).to_s()) / BigDecimal.new(@frequency_tables[4].to_s())) 
}
unless probability.eql? 0
    val= ((Math.log(probability)/Math.log(2))) 
    return retval = round(val)  
end
return "undefined" 
end

def process_bigram(sentence)
probability = BigDecimal.new("1")
sen_arr = sentence.split(" ")
for i in (0..(sen_arr.length-1))
  unless i == 0
  denom = BigDecimal.new(unigram_count(sen_arr[i-1]).to_s())/BigDecimal.new(@frequency_tables[4].to_s())
    unless denom.eql? 0
      probability *= (BigDecimal.new(bigram_count(sen_arr[i-1]+" "+sen_arr[i]).to_s()) / BigDecimal.new(@frequency_tables[4].to_s()))/denom  
     else
      probability = 0
     end
  else
  probability *= (BigDecimal.new(bigram_count("PHI "+sen_arr[i]).to_s()) / BigDecimal.new(@frequency_tables[4].to_s())) / (BigDecimal.new(unigram_count("PHI").to_s())/BigDecimal.new(@frequency_tables[4].to_s()))   
  end
end
unless probability.eql? 0
    val= ((Math.log(probability)/Math.log(2))) 
    retval = round(val) 
    return retval
end
return "undefined"
end

def process_trigram(sentence)
probability = BigDecimal.new("1")
sen_arr = sentence.split(" ")
for i in (0..(sen_arr.length-1))
  if i >= 2
  denom = (BigDecimal.new(bigram_count(sen_arr[i-2]+" "+sen_arr[i-1]).to_s()))
      unless denom.eql? 0
      probability *= (BigDecimal.new(trigram_count(sen_arr[i-2]+" "+sen_arr[i-1]+" "+sen_arr[i]).to_s()))/denom   
      else
    probability *= 0
      end
  elsif i == 1
  denom = (BigDecimal.new(bigram_count("PHI "+sen_arr[i-1]).to_s()))
      unless denom.eql? 0
      probability *= (BigDecimal.new(trigram_count("PHI "+sen_arr[i-1]+" "+sen_arr[i]).to_s()))/denom  
      else
      probability = 0
      end
  else
  probability *= (BigDecimal.new(trigram_count("PHI PHI "+sen_arr[i]).to_s())) / (BigDecimal.new(unigram_count("PHI").to_s()))   
  end
end
unless probability.eql? 0 
    val= ((Math.log(probability)/Math.log(2))) 
    retval = round(val) 
    return retval
end
return "undefined"
end

def process_smooth_bigram(sentence)
probability = BigDecimal.new("1")
sen_arr = sentence.split(" ")
for i in (0..(sen_arr.length-1))
  unless i == 0
  bigram_c = bigram_count(sen_arr[i-1]+" "+sen_arr[i])+1
  ugram_c = unigram_count(sen_arr[i-1])+@frequency_tables[5]
  probability *= (BigDecimal.new(bigram_c.to_s()))/(BigDecimal.new(ugram_c.to_s()))   
  else
  probability *= (BigDecimal.new((bigram_count("PHI "+sen_arr[i])+1).to_s())) / (BigDecimal.new((unigram_count("PHI")+@frequency_tables[5]).to_s()))   
  end
end
unless probability.eql? 0
    val= ((Math.log(probability)/Math.log(2))) 
    retval = round(val) 
    return retval
end
return "undefined"
end

def process_smooth_trigram(sentence)
probability = BigDecimal.new("1")
sen_arr = sentence.split(" ")
for i in (0..(sen_arr.length-1))
  if i >= 2
  denom = (BigDecimal.new((bigram_count(sen_arr[i-2]+" "+sen_arr[i-1])+@frequency_tables[5]).to_s()))
  probability *= (BigDecimal.new((trigram_count(sen_arr[i-2]+" "+sen_arr[i-1]+" "+sen_arr[i])+1).to_s()))/denom   
  elsif i == 1
  denom = (BigDecimal.new((bigram_count("PHI "+sen_arr[i-1])+@frequency_tables[5]).to_s()))
  probability *= (BigDecimal.new((trigram_count("PHI "+sen_arr[i-1]+" "+sen_arr[i])+1).to_s()))/denom  
  else
  probability *= (BigDecimal.new((trigram_count("PHI PHI "+sen_arr[i])+1).to_s())) / (BigDecimal.new((unigram_count("PHI")+@frequency_tables[5]).to_s()))   
  end
end
unless probability.eql? 0 
    val= ((Math.log(probability)/Math.log(2))) 
    retval = round(val) 
    return retval
end
return "undefined"
end
end` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:06:30.390

对我来说很好。可能是语法错误，添加一些代码，我会更新。

```
ruby-1.8.7-p334 :001 > require 'bigdecimal'
 => true 

ruby-1.8.7-p334 :002 >  BigDecimal("1.0e+25") - BigDecimal("9999999999999999900000000.0")
 => #<BigDecimal:10035f970,'0.1E9',9(45)> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:50:57.737

原来我使用的实验室的机器在我不知情的情况下安装了多个版本的 Ruby。我认为 IRB 正在使用来自其他版本的信息，因此我能够使用 bigdecimal 而无需仅通过 Ruby 命令使用它。使用已安装的其他版本的 Ruby 后，它运行良好。

# html - CSS以钻石形状为中心的网站问题

> ID：12650965
> 
> 赞同：5
> 
> 时间：2012-09-29T07:53:12.803
> 
> 标签：html, css, css-shapes

我有一个大胆的项目，想要一些建议。我想要一个使用 CSS Diamonds 的网站，我附上了一张图片，以便更好地了解我在做什么。以下是我到目前为止遇到的问题：

*   三角形完全对齐，直到添加一个子菜单，然后右三个向右移动（这在某一点起作用）。子菜单所在的 li 也会丢失其菱形
*   子菜单菱形上的文本未居中。
*   我不能有背景图片，然后是钻石，然后是标题。我尝试了不同的 z-index，但没有奏效。（要查看菜单标题，需要移除背景图片，菱形需要 -1 z-indexed）
*   因为我需要使用 spans 为侧边栏创建三角形文本环绕，所以我不能只将侧边栏 div 设置为菱形，所以我仍然需要在其下方添加菱形。
*   将正确的文本正文和侧边栏文本正文都包裹到菱形会很棒，但是我认为这是不可能的，因此我恢复为仅使用侧边栏包裹。

到目前为止，这是我的 HTML：我已经注释掉了子菜单和我的侧边栏菱形尝试。[http://jsfiddle.net/s4XXE/](http://jsfiddle.net/s4XXE/)

![网站设计](../Images/4d1fc20a1404138e5863b34aefae17c8.png) ![三角形](../Images/1cc967764a3e83d0bf368c74237eefdb.png)

```
 /* reset.css */
 html {
   margin: 0;
   padding: 0;
   border: 0;
 }
 body,
 div,
 span,
 object,
 iframe,
 h1,
 h2,
 h3,
 h4,
 h5,
 h6,
 p,
 blockquote,
 pre,
 a,
 abbr,
 acronym,
 address,
 code,
 del,
 dfn,
 em,
 img,
 q,
 dl,
 dt,
 dd,
 ol,
 ul,
 li,
 fieldset,
 form,
 label,
 legend,
 table,
 caption,
 tbody,
 tfoot,
 thead,
 tr,
 th,
 td,
 article,
 aside,
 dialog,
 figure,
 footer,
 header,
 hgroup,
 nav,
 section {
   margin: 0;
   padding: 0;
   border: 0;
   font-size: 100%;
   font: inherit;
   vertical-align: baseline;
 }
 article,
 aside,
 details,
 figcaption,
 figure,
 dialog,
 footer,
 header,
 hgroup,
 menu,
 nav,
 section {
   display: block;
 }
 body {
   line-height: 1.5;
   background: white;
 }
 table {
   border-collapse: separate;
   border-spacing: 0;
 }
 caption,
 th,
 td {
   text-align: left;
   font-weight: normal;
   float: none !important;
 }
 table,
 th,
 td {
   vertical-align: middle;
 }
 blockquote:before,
 blockquote:after,
 q:before,
 q:after {
   content: '';
 }
 blockquote,
 q {
   quotes: """";
 }
 a img {
   border: none;
 }
 :focus {
   outline: 0;
 }
 /* typography.css */
 html {
   font-size: 100.01%;
 }
 body {
   font-size: 75%;
   color: #222;
   background: #fff;
   font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
 }
 h1,
 h2,
 h3,
 h4,
 h5,
 h6 {
   font-weight: normal;
   color: #d10000;
 }
 h1 {
   font-size: 3em;
   line-height: 1;
   margin-bottom: 0.5em;
 }
 h2 {
   font-size: 2em;
   margin-bottom: 0.75em;
 }
 h3 {
   font-size: 1.5em;
   line-height: 1;
   margin-bottom: 1em;
 }
 h4 {
   font-size: 1.2em;
   line-height: 1.25;
   margin-bottom: 1.25em;
 }
 h5 {
   font-size: 1em;
   font-weight: bold;
   margin-bottom: 1.5em;
 }
 h6 {
   font-size: 1em;
   font-weight: bold;
 }
 h1 img,
 h2 img,
 h3 img,
 h4 img,
 h5 img,
 h6 img {
   margin: 0;
 }
 p {
   margin: 0 0 1.5em;
 }
 .left {
   float: left !important;
 }
 p .left {
   margin: 1.5em 1.5em 1.5em 0;
   padding: 0;
 }
 .right {
   float: right !important;
 }
 p .right {
   margin: 1.5em 0 1.5em 1.5em;
   padding: 0;
 }
 a:focus,
 a:hover {
   color: #09f;
 }
 a {
   color: #06c;
   text-decoration: underline;
 }
 blockquote {
   margin: 1.5em;
   color: #666;
   font-style: italic;
 }
 strong,
 dfn {
   font-weight: bold;
 }
 em,
 dfn {
   font-style: italic;
 }
 sup,
 sub {
   line-height: 0;
 }
 abbr,
 acronym {
   border-bottom: 1px dotted #666;
 }
 address {
   margin: 0 0 1.5em;
   font-style: italic;
 }
 del {
   color: #666;
 }
 pre {
   margin: 1.5em 0;
   white-space: pre;
 }
 pre,
 code,
 tt {
   font: 1em'andale mono', 'lucida console', monospace;
   line-height: 1.5;
 }
 li ul,
 li ol {
   margin: 0;
 }
 ul,
 ol {
   margin: 0 1.5em 1.5em 0;
   padding-left: 1.5em;
 }
 ul {
   list-style-type: disc;
 }
 ol {
   list-style-type: decimal;
 }
 dl {
   margin: 0 0 1.5em 0;
 }
 dl dt {
   font-weight: bold;
 }
 dd {
   margin-left: 1.5em;
 }
 table {
   margin-bottom: 1.4em;
   width: 100%;
 }
 th {
   font-weight: bold;
 }
 thead th {
   background: #c3d9ff;
 }
 th,
 td,
 caption {
   padding: 4px 10px 4px 5px;
 }
 tbody tr:nth-child(even) td,
 tbody tr.even td {
   background: #e5ecf9;
 }
 tfoot {
   font-style: italic;
 }
 caption {
   background: #eee;
 }
 .small {
   font-size: .8em;
   margin-bottom: 1.875em;
   line-height: 1.875em;
 }
 .large {
   font-size: 1.2em;
   line-height: 2.5em;
   margin-bottom: 1.25em;
 }
 .hide {
   display: none;
 }
 .quiet {
   color: #666;
 }
 .loud {
   color: #000;
 }
 .highlight {
   background: #ff0;
 }
 .added {
   background: #060;
   color: #fff;
 }
 .removed {
   background: #900;
   color: #fff;
 }
 .first {
   margin-left: 0;
   padding-left: 0;
 }
 .last {
   margin-right: 0;
   padding-right: 0;
 }
 .top {
   margin-top: 0;
   padding-top: 0;
 }
 .bottom {
   margin-bottom: 0;
   padding-bottom: 0;
 }
 /* Customization */
 body {
   background: #efefef;
   margin: 0px auto;
   width: 1320px;
 }
 #bodydiv {
   width: 100%;
   background-image: url('http://i.stack.imgur.com/QVfwy.png');
   background-repeat: repeat;
   overflow: hidden;
 }
 ul {
   list-style: none;
   position: relative;
   width: 100%;
   text-align: center;
   padding: 0px 0px 0px 28.6em;
   margin-bottom: 0px;
   display: block;
 }
 li {
   float: left;
   margin: 0em -1.45em;
   font-weight: bold;
   font-size: 2em;
 }
 ul li a {
   color: red;
   text-decoration: none;
 }
 ul li a:hover {
   color: #eee;
   text-decoration: none;
 }
 .triangle:after {
   content: '';
   position: relative;
   top: 105px;
   margin-left: -50%;
   border: 5em solid transparent;
   border-top-color: red;
   z-index: 1;
 }
 li:nth-child(1).triangle:after {
   border-top-color: blue;
 }
 li:nth-child(2).triangle:after {
   border-top-color: green;
 }
 li:nth-child(3).triangle:after {
   border-top-color: purple;
 }
 ul li ul {
   font-size: .5em;
 }
 ul li ul a {
   z-index: 1;
 }
 .diamond,
 .diamond:after {
   width: 0;
   height: 0;
   border: 4em solid transparent;
   content: '';
   z-index: 1;
 }
 .diamond {
   border-bottom-color: red;
   position: absolute;
   top: -1em;
 }
 .diamond:after {
   position: absolute;
   margin-left: -4em;
   top: 4em;
   border-top-color: red;
 }
 .diamond.big,
 .diamond.big:after {
   width: 0;
   height: 0;
   border: 9em solid transparent;
   content: '';
   z-index: 1;
 }
 .diamond.big {
   border-bottom-color: red;
   position: absolute;
 }
 .diamond.big:after {
   margin-left: -9em;
   top: 9em;
   border-top-color: red;
 }
 .diamond.huge,
 .diamond.huge:after {
   width: 0;
   height: 0;
   border: 500px solid transparent;
   content: '';
   z-index: 1;
 }
 .diamond.huge {
   top: -500px;
   border-bottom-color: red;
   position: absolute;
 }
 .diamond.huge:after {
   margin-left: -500px;
   top: 500px;
   border-top-color: red;
 }
 li:hover > ul li {
   display: none;
 }
 ul ul li {
   font-size: 1em;
   display: block;
   position: relative;
   left: 1em;
   margin-left: 1em;
   margin-top: 1em;
 }
 ul ul li:nth-child(1).diamond {
   border-bottom-color: orange;
   top: 4em;
   left: 6em;
 }
 ul ul li:nth-child(1).diamond:after {
   border-top-color: orange;
 }
 ul ul li:nth-child(2).diamond {
   border-bottom-color: aqua;
 }
 ul ul li:nth-child(2).diamond:after {
   border-top-color: aqua;
 }
 */
```

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title>Triangles</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=479;">
  <link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>
  <div id="bodydiv">
    <ul>
      <li class="current index triangle submenu"><a href="#">Home</a>
        <!--

<ul><li class="diamond"><a href="#" title="Sub Page 1">subpage 1</a></li><li class="diamond"><a href="#" title="Sub Page 2">subpage 2</a></li></ul>

-->
      </li>
      <li class="about triangle"><a href="#">Home</a>
      </li>
      <li class="contact triangle"><a href="#">Home</a>
      </li>
      <li class="other triangle"><a href="#">Home</a>
      </li>

    </ul>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <h1>
Heading for the page
</h1>
    <div style="width:60%; float:left;">
      <p style="font-size:1em; color:black;">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur at tellus ipsum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nunc et erat magna. Aenean volutpat ultrices quam nec vestibulum. Nullam
        quis ante vel tellus mattis laoreet. Duis vehicula est id lorem consequat pretium. Suspendisse potenti.
      </p>
      <p style="font-size:1em; color:black;">
        Donec ut nunc ante, vel elementum ante. Vivamus mattis ornare fermentum. Quisque vitae justo quam. Cras nunc odio, sodales a condimentum id, laoreet sed neque. Integer adipiscing placerat sollicitudin. Etiam posuere, lacus ut bibendum mattis, nibh urna
        ullamcorper nibh, vitae blandit massa nunc ac augue. Aliquam mollis aliquam magna eget rutrum. Suspendisse iaculis placerat dolor, at venenatis eros rutrum non. Phasellus pretium risus ac nisi sollicitudin sit amet adipiscing nisl malesuada. Cras
        nisi nunc, hendrerit at elementum in, auctor a ligula. Maecenas pharetra condimentum aliquam. Nulla et ultricies nisi. Donec vitae neque ac augue iaculis pretium nec sed ipsum. Sed gravida facilisis congue. Nullam lobortis interdum augue ac venenatis.
        Sed luctus turpis sed urna sollicitudin imperdiet.
      </p>
      <p style="font-size:1em; color:black;">
        Nam lectus lacus, ultricies non placerat in, consectetur lacinia urna. Duis orci eros, porta nec tempus vitae, sollicitudin ac massa. Nam porta dignissim bibendum. Aenean hendrerit lacinia nisi vel viverra. Maecenas eu mi orci, vel laoreet massa. Fusce
        rhoncus, tellus eu consectetur eleifend, lacus enim ultricies diam, ut rutrum mauris dolor nec nibh. Suspendisse tincidunt neque vitae ligula adipiscing consectetur quis et nisl. Fusce eu sem diam. Aenean iaculis laoreet lacus, a vulputate augue
        egestas ut. Donec fringilla nisi sit amet arcu convallis in egestas nisl imperdiet. Nam interdum dolor nec nibh auctor eget sollicitudin orci iaculis. Proin turpis sem, ultricies facilisis euismod in, mattis in justo. Morbi feugiat semper blandit.
        Quisque tincidunt semper sodales. Nullam suscipit tempor gravida.
      </p>
      <p style="font-size:1em; color:black;">
        Vivamus eu diam id libero rhoncus ultrices ut eu lectus. Praesent diam elit, luctus a lobortis ac, faucibus in nisl. Duis id est purus, a condimentum leo. Quisque gravida metus sed arcu placerat nec convallis quam blandit. Cras laoreet vulputate sem et
        consectetur. Curabitur felis erat, auctor vitae eleifend id, suscipit eget sapien. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porttitor ultricies tortor in tincidunt.
      </p>
      <p style="font-size:1em; color:black;">
        In hac habitasse platea dictumst. Sed erat leo, cursus vel pellentesque quis, pretium quis mi. Integer interdum neque non nisi luctus sollicitudin pellentesque nunc consectetur. Fusce auctor bibendum porta. Donec in est lacus, in luctus purus. Proin consectetur
        molestie urna, eu laoreet ligula pellentesque eget. Cras at magna sit amet lacus consectetur viverra. Mauris sed faucibus nisl.
      </p>

      <style>
        .lW {
          float: left;
          clear: left;
          height: 18px;
        }
        .rW {
          float: right;
          clear: right;
          height: 18px;
        }
      </style>

    </div>
    <div style="font-size:1em; color:black; width:40%; float:right;" class="sidebardiamond">

      <div class="diamond big" style="position:relative; left:301px; top:-150px;">What is ACM?</div>
      <div class="lW" style="width:78%;"></div>
      <div class="lW" style="width:74.6%;"></div>
      <div class="lW" style="width:71.2%;"></div>
      <div class="lW" style="width:67.8%;"></div>
      <div class="lW" style="width:64.4%;"></div>
      <div class="lW" style="width:61%;"></div>
      <div class="lW" style="width:57.6%;"></div>
      <div class="lW" style="width:54.2%;"></div>
      <div class="lW" style="width:50.8%;"></div>
      <div class="lW" style="width:47.4%;"></div>
      <div class="lW" style="width:44%;"></div>
      <div class="lW" style="width:40.6%;"></div>
      <div class="lW" style="width:44.4%;"></div>
      <div class="lW" style="width:47.8%;"></div>
      <div class="lW" style="width:51.2%;"></div>
      <div class="lW" style="width:54.6%;"></div>
      <div class="lW" style="width:58%;"></div>
      <div class="lW" style="width:61.4%;"></div>
      <div class="lW" style="width:64.8%;"></div>
      <div class="lW" style="width:68.2%;"></div>
      <div class="lW" style="width:71.6%;"></div>
      <div class="lW" style="width:75%;"></div>
      <div class="lW" style="width:78.4%;"></div>
      <div class="lW" style="width:81.8%;"></div>

      In hac habitasse platea dictumst. Sed erat leo, cursus vel pellentesque quis, pretium quis mi. Integer interdum neque non nisi luctus sollicitudin pellentesque nunc consectetur. Fusce auctor bibendum porta. Donec in est lacus, in luctus purus. Proin consectetur
      molestie urna, eu laoreet ligula pellentesque eget. Cras at magna sit amet lacus consectetur viverra. Mauris sed faucibus nisl.</div>
    <!--<div class="diamond huge" style="position:relative; left:5px; top:150px;"></div>
<br>-->

  </div>
</body>

</html>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:18:35.067

好消息！我已经解决了我的大部分问题。这是我更新的 jsfiddle： http: [//jsfiddle.net/s4XXE/1/](http://jsfiddle.net/s4XXE/1/)我将继续努力解决所有问题。任何帮助都会有所帮助。

*   修复：我使用子菜单类来更正由添加子菜单引起的偏移。
*   固定：标题现在确实出现了。我想我添加`display:relative;`到 CSS 以便它接受`z-index`
*   修复：将菜单上的三角形更改为之前而不是之后，因此三角形仍然显示在带有子菜单的菜单上。
*   BUG：当鼠标靠近菜单项时显示子菜单。当鼠标在三角形上时，它应该只显示子菜单。
*   BUG：在菜单项上，只有当鼠标悬停在文本上时，链接才“有效”。当它超出形状时让它“有效”会很好。
*   BUG：子菜单和侧边栏标题上的标题仍未居中。
*   BUG：更改“主页”标题会使一切变得混乱。（需要调整以适应变化的内容）

# asp.net - 任何可能的内存泄漏机会？

> ID：12650969
> 
> 赞同：0
> 
> 时间：2012-09-29T07:53:50.560
> 
> 标签：asp.net, vb.net

我收到此错误**System.OutOfMemoryException: 'System.OutOfMemoryException 类型的异常**被抛出。` 为什么？请帮助我。我收到此错误（仅当我在线托管网站时，而不是在本地机器上）。

```
Dim db As SqlDatabase = Connection.connection
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click

    'Dim lblNodeID As Label = CType(Master.FindControl("lblParentId"), Label)
    Using conn As DbConnection = db.CreateConnection()
        Dim cmdInsertGroup As SqlCommand = db.GetSqlStringCommand("Insert Into CategoryGroups Values ('" & BLL.getNewGroupIDfromCategoryGroups & "','" & lblParentId.Text.Trim & "','" & txtGroupName.Text.Trim & "')")

       Try
        If fuGroupAttributes.HasFile Then
            fuGroupAttributes.SaveAs(IO.Path.Combine(Server.MapPath("~/Admin/SpecificationExcels"), lblParentId.Text.Trim & IO.Path.GetExtension(fuGroupAttributes.FileName)))

            Dim path As String = Server.MapPath("~/Admin/SpecificationExcels/" & lblParentId.Text.Trim & IO.Path.GetExtension(fuGroupAttributes.FileName))
            Dim strmail As String = String.Empty
            Dim connectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & path & ";Extended Properties=Excel 12.0;"
            Dim objConn As New OleDbConnection(connectionString)
            objConn.Open()
            Dim strConString As String = "SELECT * FROM [Sheet1$]"
            'where date = CDate('" + DateTime.Today.ToShortDateString() + "')";
            Dim objCmdSelect As New OleDbCommand(strConString, objConn)
            ' Create new OleDbDataAdapter that is used to build a DataSet
            ' based on the preceding SQL SELECT statement.
            Dim objAdapter1 As New OleDbDataAdapter()
            ' Pass the Select command to the adapter.
            objAdapter1.SelectCommand = objCmdSelect
            ' Create new DataSet to hold information from the worksheet.
            Dim ds As New DataSet()
            ' Fill the DataSet with the information from the worksheet.
            objAdapter1.Fill(ds, "ExcelData")
            'My Exp
            Dim _newAttributeID As Integer = BLL.getNewAttributeIDfromGroupAttributes
            Dim _newGroupID As Integer
            conn.Open()
            Dim trans As DbTransaction = conn.BeginTransaction()
            If cbInsertInExistingGroup.Checked Then
                If gvExistingGroups.SelectedValue IsNot Nothing Then
                    _newGroupID = gvExistingGroups.SelectedRow.Cells(1).Text
                Else
                    pnlMessage.Visible = True
                    pnlMessage.BackColor = Drawing.Color.Red
                    lblMessage.ForeColor = Drawing.Color.White
                    lblMessage.Font.Bold = True
                    lblMessage.Text = "Select a Group"
                    Exit Sub
                End If
            Else
                _newGroupID = BLL.getNewGroupIDfromCategoryGroups
                db.ExecuteNonQuery(cmdInsertGroup, trans)

            End If

            For i = 0 To ds.Tables(0).Rows.Count - 1
                ds.Tables(0).Rows(i).Item(0) = _newAttributeID
                ds.Tables(0).Rows(i).Item(1) = _newGroupID
                _newAttributeID = _newAttributeID + 1
            Next
            ' Clean up objects.
            objConn.Close()
            'Dim db As SqlDatabase = Connection.connection
            Dim sqlBulk As New SqlBulkCopy(conn, SqlBulkCopyOptions.Default, trans)
            sqlBulk.DestinationTableName = "GroupAttributes"
            sqlBulk.WriteToServer(ds.Tables(0))

            trans.Commit() ' commit the transaction
            pnlMessage.Visible = True
            pnlMessage.BackColor = Drawing.Color.Green
            lblMessage.ForeColor = Drawing.Color.White
            lblMessage.Font.Bold = True
            lblMessage.Text = "Successfully Uploaded"
            'Response.Redirect("~/Admin/AddSpecifications.aspx?id=" & Request.QueryString(0))
        Else
            pnlMessage.Visible = True
            pnlMessage.BackColor = Drawing.Color.Red
            lblMessage.ForeColor = Drawing.Color.White
            lblMessage.Font.Bold = True
            lblMessage.Text = "Select an Excel File"
            'Response.Write("")
        End If
        Catch ex As Exception
        trans.Rollback() ' rollback the transaction
        pnlMessage.BackColor = Drawing.Color.Red
        lblMessage.ForeColor = Drawing.Color.White
        lblMessage.Font.Bold = True
        lblMessage.Text = "Some Error Occured"
        End Try
    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:04:51.737

您的代码有点复杂，但在此块中您**退出 Sub**而不关闭连接**objConn**

```
If cbInsertInExistingGroup.Checked Then
    If gvExistingGroups.SelectedValue IsNot Nothing Then
        _newGroupID = gvExistingGroups.SelectedRow.Cells(1).Text
    Else
        pnlMessage.Visible = True
        pnlMessage.BackColor = Drawing.Color.Red
        lblMessage.ForeColor = Drawing.Color.White
        lblMessage.Font.Bold = True
        lblMessage.Text = "Select a Group"
        Exit Sub
End If 
```

你真的应该尝试在更小的单元中重构这个巨大的代码块。通过这种方式，您可以使用 Using 语句正确处理 OleDbConnection、OleDbAdapter、OleDbCommand 等 Disposable 对象。

# ssl - SSL 客户端身份验证返回错误证书错误

> ID：12650970
> 
> 赞同：1
> 
> 时间：2012-09-29T07:53:57.633
> 
> 标签：ssl, openssl, client-server, debian-based

我试图连接到我用 CPP 编写的自定义编写的 ssl 服务器。它具有客户端身份验证功能。通过 Wireshark 观看时，它的抛出错误 Bad certificate。在服务器端，返回的错误是

```
14560:error:140890B2:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:no certificate returned:s3_srvr.c:2619: 
```

我使用以下代码强制请求客户端证书

```
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, NULL);
SSL_CTX_set_verify_depth(ctx, 1); 
```

我可以看到客户端在 Wireshark 中返回证书。

应该使用哪个函数来设置用于在服务器端验证客户端证书的公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:28:43.063

从错误消息来看，您的客户端似乎没有向服务器提供证书，并且您明确要求客户端需要提供一个证书（在服务器代码中）：

```
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, NULL); 
```

您*可能*需要的是告诉您的客户端代码使用证书（以及私钥）：

```
SSL_CTX_use_certificate_chain_file(ctx, pcszCertPath);
SSL_CTX_use_PrivateKey_file(ctx, pcszPrivKeyPath,SSL_FILETYPE_PEM); 
```

我希望这会有所帮助。还要确保您的服务器使用相同的证书链（它信任相同的 CA）。如果这是一个问题，请告诉我，我会帮助你做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T09:19:07.237

我遇到了类似的错误（只有行号不同）：

140671281543104：错误：140890B2：SSL 例程：SSL3_GET_CLIENT_CERTIFICATE：未返回证书：s3_srvr.c:3292：

[我使用https://help.ubuntu.com/community/OpenSSL](https://help.ubuntu.com/community/OpenSSL)中提到的过程生成了自签名证书。

折腾了一天的错误，我发现错误是因为自己生成的CA不在我使用的机器的信任链中。

要将 CA 添加到 RHEL-7 中的信任链中，可以遵循以下过程：

```
 To add a certificate in the simple PEM or DER file formats to the
        list of CAs trusted on the system:

        Copy it to the
                /etc/pki/ca-trust/source/anchors/
        subdirectory, and run the
                update-ca-trust
        command.

        If your certificate is in the extended BEGIN TRUSTED file format,
        then place it into the main source/ directory instead. 
```

我认为fedora也可以遵循上述程序。如果“update-ca-trust”命令不可用，探索“update-ca-certificates”等命令可能会很有用。希望这对某人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:04:34.190

使用wireshark，您会发现服务器是否曾经向客户端请求过证书。该命令将是“CertificateRequest”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T21:23:26.703

[SSLCACertificateFile 和 SSLCertificateChainFile 之间的区别](https://stackoverflow.com/questions/1899983/difference-between-sslcacertificatefile-and-sslcertificatechainfile)

SSLCertificateChainFile 通常是正确的选择，因为它的影响最小；它会导致列出的文件与证书一起发送到任何连接的客户端。

将所有根 CA 提供到以下文件中以解决问题 **SSLCACertificateFile**（以下简称“CACert”）执行 SSLCertificateChainFile 所做的所有事情（以下简称“Chain”），并且还允许使用有问题的证书来签署客户端证书。这种身份验证非常罕见（至少目前如此），如果您不使用它，恕我直言，没有理由通过使用 CACert 而不是 Chain 来增强其功能。另一方面，有人可能会争辩说附加功能没有任何害处，CACert 涵盖了所有情况。这两个论点都是有效的。

不用说，如果您询问证书供应商，他们将始终推动 CACert over Chain，因为它为他们提供了另一件事（客户证书），他们可能会向您出售。;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-26T09:50:53.560

使用以下行修改服务器代码：

## 服务器代码：

```
SSL_CTX_load_verify_locations(ctx,"client_certificate_ca.pem", NULL); 
```

*   这里的 client_certificate_ca.pem 是生成客户端证书的文件。使用以下命令使用“client_certificate_ca.pem”文件验证您的客户端证书。

验证 -CAfile client_certificate_ca.pem client_certificate.pem

## 客户端代码：

```
if (SSL_CTX_use_certificate_file(ctx, "client_certificate.pem", SSL_FILETYPE_PEM) <= 0) 
{
}
if (SSL_CTX_use_PrivateKey_file(ctx, "client_certificate.ky", SSL_FILETYPE_PEM) <= 0)
{
}
if (!SSL_CTX_check_private_key(ctx))
{  
} 
```

# php - 在 Chrome 中检测到 $_POST 变量，但在 Firefox 中未检测到

> ID：12650971
> 
> 赞同：2
> 
> 时间：2012-09-29T07:53:58.300
> 
> 标签：php, html, forms, post

我在一个表单中使用 2 个图像来整理数据库中的查询结果。表单使用 POST 方法提交。当我点击第一张图片时，查询结果必须按升序排序，当我点击第二张时，结果必须按降序排序。这是表单的代码：

```
 <form name="" action="" method="post">
   <input type="hidden" name="typep" value="price" />
   <input type="image"  name="sort"  value="asc"  src="images/asc-ar.png" />
   <input type="image"  name="sort"  value="desc" src="images/dsc-ar.png" />
 </form> 
```

现在这是用于检查`$_REQUEST['sort']`变量是否已设置以及是否需要排序的代码。

```
if ($_REQUEST['sort'] != "")
{
    $sort  = $_REQUEST['sort'];
    $typep = $_REQUEST['typep'];
   //query to be executed depending on values of $sort and $typep
} 
```

Firefox 确实检测到`$_REQUEST['typep']`变量，但没有检测到变量`$_REQUEST['sort']`。不过，这在 Chrome 中非常有效。当我在 Firefox 中测试该站点时，它没有检测到`$_REQUEST['sort']`变量，因此 if 条件评估为 false 并且搜索结果没有得到排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T07:57:36.240

显然，在 HTML5 标准开发的某个时刻，有人认为 的实际值`input type="image"`并不重要，他们决定不要求浏览器以任何方式提交它：[链接到规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#constructing-the-form-data-set)。

不幸的是，似乎不仅 Firefox 严格遵守规范。[对提交给 Firefox 开发人员的错误的评论](https://bugzilla.mozilla.org/show_bug.cgi?id=583211#c1)指出，在 Opera 和 Internet Explorer 中也观察到了这种行为。

因此，您可以通过检查随表单提交的`.x`/`.y`坐标来测试图像是否已被单击，但您无法确定两个图像中的哪一个已被单击，因为您无法在不同的浏览器和浏览器中可靠地接收到它的值仍然传递该值可能也将遵循规范并在将来的某个时候将其丢弃。您需要以不同的方式命名这两个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:07:21.830

实际上 Firefox 只会发送点击的坐标。如果你想使用`input type="image"`你可以使用：

```
<input type="submit" name="sort" value="desc"><img src="..." /></input> 
```

和

```
<input type="submit" name="sort" value="asc"><img src="..." /></input> 
```

或者您可以使用 css 来`input type="submit"`. `input type="image"`相当于为按钮提供背景图像，因此请改用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T09:43:39.380

如果您在表单中有多个具有相同名称的输入控件，它们将在 PHP 中显示为数组而不是单个值。

做什么

```
var_dump($_POST) 
```

或者

```
var_dump($_REQUEST) 
```

节目？

# java - Richfaces 树 selfdrop

> ID：12650972
> 
> 赞同：1
> 
> 时间：2012-09-29T07:54:09.160
> 
> 标签：java, javascript, jsf, richfaces

我有一棵树

```
<rich:tree acceptedTypes="menu">
   <rich:treeNode dragType="menu" acceptedTypes="menu,article">
       menu
   </rich:treeNode>
   <rich:treeNode dragType="article" acceptedTypes="none">
       aricle
   </rich:treeNode>
</rich:tree> 
```

我得到了一棵这样的树：

```
 + menu 1
   + article 1
 + menu 2
   + article 2 
```

我现在在这里遇到两个问题：

1.  如果我单击菜单 1 的速度太慢，则会启动拖放事件而不是选择事件。
2.  如果我尝试拖放 menu1，我不希望能够将 menu1 拖到 menu1。

现在我的问题是：

我可以更精确地操纵 dropabillity 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:30:03.997

最新的richfaces库有一个demo，可能demo实现会对你有所帮助。该演示的行为不像您提到的那样。 [http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=tree&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=tree&skin=blueSky)

由于您使用的是 3.3.3 版，因此以下链接可能会对您有所帮助 [http://livedemo.exadel.com/richfaces-demo/richfaces/tree.jsf?tab=dnd&cid=144111](http://livedemo.exadel.com/richfaces-demo/richfaces/tree.jsf?tab=dnd&cid=144111)

# php - 为什么这个正则表达式只捕获一个单词？

> ID：12650973
> 
> 赞同：0
> 
> 时间：2012-09-29T07:54:18.347
> 
> 标签：php, regex, unix, preg-replace

我正在尝试学习正则表达式。我知道基础知识，而且我在正则表达式方面并不糟糕，我只是不是专业人士 - 因此我有一个问题要问你们。如果你知道正则表达式，我敢打赌它会很简单。

我目前得到的是这样的：

```
/(\w+)\s-{1}\s(\w+)\.{1}(\w{3,4})/ 
```

我正在尝试为自己创建一个小脚本，通过格式化所有文件名来整理我的音乐收藏。我知道那里已经有其他东西了，但这对我来说是一次学习经历。我已经把所有的标题都搞砸了，用“Hell Aint a Bad Place To Be”代替“Hell Aint A Bad Place To Be”之类的东西。以我的智慧，我以某种方式结束了“Hell Aint a ad Place to be”（我正在寻找一个 A 后跟一个空格和一个大写字符）。显然，这是一场噩梦，必须手动完成。不用说我现在首先测试样品。

无论如何，上面的正则表达式是许多中的第一阶段。最终我想建立它，但现在我只需要让简单的部分工作。

最后我想转：

```
"arctic Monkeys- a fake tales of a san francisco" 
```

进入

```
"Arctic Monkeys - A Fake Tales of a San Francisco" 
```

我知道当你在'-'之后我需要后向断言来抓取，因为如果第一个单词是'a'，'of'等，我通常会小写，我需要大写它们（上面是我知道的这个用例的一个坏例子）。

修复现有正则表达式的任何方法都会很棒，并且关于在哪里查看我的备忘单以完成其余部分的**提示**会很棒（我不是在寻找一个成熟的答案，因为我需要学习做我自己，我就是想不通为什么 w+ 只得到一个字）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:06:04.420

\w 不包含空格。一个有效的正则表达式可能是：

```
/^(.+?)\s*-\s*(.+)$/ 
```

解释：

```
^     - must start at the beginning of the string
(.+?) - match any character, be ungreedy
\s*   - match any number whitespace that might exists (including none)
-     - match character
\s*   - any whitespace again
(.+)  - remaining characters
$     - end of string 
```

然后转码将在另一个替换正则表达式中发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T08:07:51.247

我对你在做什么有点困惑，但也许这会有所帮助。请记住，+ 是 1 个或更多字符，* 是 0 个或更多。因此，您可能想要执行 ([\s]*) 之类的操作来匹配空格。您无需在单个字符旁边指定 {1}。

所以也许是这样的：

```
([\w\s]+)([\s]*)-([\s]*)([\w\s]+)\.([\w]{3,4}) 
```

我没有测试过这段代码，但我想你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T08:51:31.743

我相信有一种更简单的方法可以解决这个问题：基于更简单的正则表达式将字符串拆分为单词，然后对这些单词进行任何处理。这将允许您以更简洁的方式对文本执行更复杂的转换。这是一个例子：

```
<?php

$song = "arctic Monkeys- a fake tales of a san francisco";

// Split on spaces or - (the - is still present
// because it's only a lookahead match)
$words = preg_split("/([\s]+|(?=-))/", $song);

/*
Output for print_r:
Array
(
    [0] => arctic
    [1] => Monkeys
    [2] => -
    [3] => a
    [4] => fake
    [5] => tales
    [6] => of
    [7] => a
    [8] => san
    [9] => francisco
)
*/
print_r($words);

$new_words = array();
foreach ($words as $k => $word) {
        $new_words[] = processWord($word, $k, $words);
}

// This will output:
// Arctic Monkeys - A Fake Tales of a San Francisco
echo implode(' ', $new_words);

// You can add as many processing rules you want in here - in a very clean way
function processWord($word, $idx, $words) {
        if ($words[$idx - 1] == '-') return ucfirst($word);
        return strlen($word) > 2 ? ucfirst($word) : $word;
} 
```

这是此代码运行的示例： http: [//codepad.org/t6pc8WpR](http://codepad.org/t6pc8WpR)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T08:04:47.593

对于第一部分，\w 不匹配单词，它匹配单词字符。它等价于 [A-Za-z0-9_]。

相反，尝试 ([A-Za-z0-9_ ]+) 作为你的第一位（在匹配方括号内有一个额外的空格并删除了 \s.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T08:52:13.470

这是我所拥有的：

```
<?php
/**
 * Formats a string into a title:
 * * Pads all dashes with spaces.
 * * Uppercase all words with 3 letters or more.
 * * Uppercase first word and first words after dashes.
 *
 * @param $str
 *
 * @return string
 */
function format_title($str) {
    //Remove all spaces before and after dashes.
    //(These will return in the final product)
    $str = preg_replace("/\s?-\s?/", "-", $str);

    //Explode by dash.
    $string_split_by_dash = explode("-", $str);
    //For each sentence (separated by dashes)
    foreach ($string_split_by_dash as &$sentence) {
        //Uppercase all words.
        $sentence = ucwords($sentence);
        //Explode into words (by space)
        $words = explode(" ", $sentence);
        //For each word
        foreach ($words as &$word) {
            //If its length is smaller than 3
            if (strlen($word) < 3) {
                //Lowercase it.
                $word = strtolower($word);
            }
        }
        //Implode back into a sentence.
        $sentence = implode(" ", $words);
        //Uppercase the first word, regardless of length.
        $sentence = ucfirst($sentence);
    }

    //Implode all sentances back by space-padded dash.
    $str = implode(" - ", $string_split_by_dash);

    return $str;
}

$str = "arctic Monkeys- a fake tales of a san francisco";
var_dump(format_title($str)); 
```

我认为它比正则表达式更具可读性（并且更可记录）。可能也更有效率，（没有检查）。

# jsf-2 - 如何改变文字的颜色

> ID：12650974
> 
> 赞同：1
> 
> 时间：2012-09-29T07:54:18.537
> 
> 标签：jsf-2, primefaces

在我的 jSF 2.0-PrimeFaces 应用程序中，我正在使用组件，我需要更改组件中文本的颜色。

样品可以在[这里找到](http://www.primefaces.org/showcase-labs/ui/watermark.jsf)

如何更改 JSF 2-PrimeFaces 组件的文本颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:50:16.467

来自 primefaces 文档：

`There’s only one css style class applying watermark which is ‘.ui-watermark’, you can override this class to bring in your own style. Note that this style class is not applied when watermark uses html5 placeholder if available.`

PrimeFaces 用户指南页面：433 Primefaces 使用 jquery 的水印。[在这里](http://code.google.com/p/jquery-watermark/)查看更多信息。

**试试这个：**

```
 input::-webkit-input-placeholder {
          color: red !important;
       } 
```

**注意**：以上仅适用于链接中提到的某些浏览器。我对其进行了测试`chrome`，`IE7`它正在运行，`Google Chrome`但无法运行`Internet Explorer`

# android - 充气自定义组件 Android 时出错

> ID：12650983
> 
> 赞同：3
> 
> 时间：2012-09-29T07:55:26.213
> 
> 标签：android, android-layout

尝试为我的自定义组件充气时出现错误。

它以前使用以 LinearLayout 开头的组件的 xml，但自从我将其更改为 com.example.football.on.uk.tv.CustomResultComponent 后它已停止工作。

我进行了此更改以遵循本教程评论中的建议：[http ://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/](http://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/)

目前我并没有试图动态地膨胀视图。我的 XML 第 24 行（第一个 TextView）出现错误。当我将此 TextView 的 XML 复制到另一个活动中时，此 TextView 似乎已正确定义并且可以正常工作。

**这是我的自定义组件的 xml 定义：**

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.football.on.uk.tv.CustomResultComponent
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/Black"
        android:paddingLeft="2dip"
        android:paddingRight="2dip"
        android:paddingTop="1dip" >

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <TextView
                android:id="@+id/tvHomeTeam"
                android:layout_width="140dip"
                android:layout_height="fill_parent"
                android:background="@color/White"
                android:gravity="right"
                android:text="HomeTeam" />

            <TextView
                android:id="@+id/tvVersus"
                android:layout_width="40dp"
                android:layout_height="fill_parent"
                android:background="@color/White"
                android:gravity="center"
                android:text="  -  " />

            <TextView
                android:id="@+id/tvAwayTeam"
                android:layout_width="140dip"
                android:layout_height="fill_parent"
                android:background="@color/White"
                android:text="Away Team" />
        </TableRow>
    </TableLayout>

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/Black"
        android:paddingBottom="1dip"
        android:paddingLeft="2dip"
        android:paddingRight="2dip" >

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <TextView
                android:id="@+id/tvDateTime"
                android:layout_width="130dip"
                android:layout_height="wrap_content"
                android:background="@color/White"
                android:gravity="center_horizontal"
                android:text=" 01/01/1950    12:45" />

            <TextView
                android:id="@+id/tvCompetition"
                android:layout_width="140dip"
                android:layout_height="wrap_content"
                android:background="@color/White"
                android:gravity="center_horizontal"
                android:text="Premier League" />

            <ImageView
                android:id="@+id/ivChannel"
                android:layout_width="50dp"
                android:layout_height="match_parent"
                android:background="@color/White"
                android:paddingBottom="4dip"
                android:paddingLeft="4dip"
                android:paddingRight="4dip"
                android:paddingTop="4dip"
                android:src="@drawable/logo_espn" />
        </TableRow>
    </TableLayout>
</LinearLayout>

</com.example.football.on.uk.tv.CustomResultComponent> 
```

**这是该组件的类：**

```
package com.example.football.on.uk.tv;

import android.app.Activity;

import com.example.football.on.uk.tv.R;

import android.content.Context;
import android.text.Layout;
import android.util.AttributeSet;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class CustomResultComponent extends LinearLayout{
private TextView tvHomeTeam;
private TextView tvVersus;
private TextView tvAwayTeam;
private TextView tvDateTime;
private TextView tvCompetition;
private ImageView ivChannel;

public CustomResultComponent(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected void onFinishInflate(){
    super.onFinishInflate();
        ((Activity)getContext()).getLayoutInflater().inflate(R.layout.custom_result_component, this);
    setupViewItems();
}

private void setupViewItems() {
    // TODO Auto-generated method stub
    tvHomeTeam = (TextView) findViewById(R.id.tvHomeTeam);
    tvVersus = (TextView) findViewById(R.id.tvVersus);
    tvAwayTeam = (TextView) findViewById(R.id.tvAwayTeam);
    tvDateTime = (TextView) findViewById(R.id.tvDateTime);
    tvCompetition = (TextView) findViewById(R.id.tvCompetition);
    ivChannel = (ImageView) findViewById(R.id.ivChannel);
}

public void setHomeTeam(String team){
    tvHomeTeam.setText("Tottenham");
}
} 
```

**这是我希望自定义组件出现的活动的 XML：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/LightBlue"
android:id="@+id/AboutLayout"
android:orientation="vertical">

<com.example.football.on.uk.tv.CustomResultComponent
    android:id="@+id/customResultComponent1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</com.example.football.on.uk.tv.CustomResultComponent>

</LinearLayout> 
```

**这是活动：**

```
package com.example.football.on.uk.tv;

import android.os.Bundle;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

import com.example.football.on.uk.tv.CustomResultComponent;

public class About extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_about);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_about, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

**最后这是我收到的错误消息：**

为很长的帖子道歉！我想提供尽可能多的信息。

```
09-29 07:53:45.612: E/AndroidRuntime(20547): FATAL EXCEPTION: main
09-29 07:53:45.612: E/AndroidRuntime(20547): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.football.on.uk.tv/com.example.football.on.uk.tv.About}: android.view.InflateException: Binary XML file line #24: Error inflating class <unknown>
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.os.Looper.loop(Looper.java:130)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at android.app.ActivityThread.main(ActivityThread.java:3687)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at java.lang.reflect.Method.invokeNative(Native Method)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at java.lang.reflect.Method.invoke(Method.java:507)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-29 07:53:45.612: E/AndroidRuntime(20547):    at dalvik.system.NativeStart.main(Native Method)
09-29 07:53:45.612: E/AndroidRuntime(20547): Caused by: android.view.InflateException: Binary XML file line #24: Error inflating class <unknown> 
```

# c# - 切换大小写或如果其他

> ID：12650985
> 
> 赞同：0
> 
> 时间：2012-09-29T07:55:47.177
> 
> 标签：c#, if-statement, windows-ce

我有这个 if..else 的长循环。任何人都可以帮助我知道“switch case”是否更适合这个或“if..else”？

```
if (meals == null)
{
    bfast.Hide();
    lunch_rb.Hide();
    dinner_rb.Hide();
}
else if (meals != null)
{
    if (breakfast != null && lunch == null && dinner == null)
    {
        lunch_rb.Hide();
        dinner_rb.Hide();
    }
    if (breakfast == null && lunch != null && dinner == null)
    {
        bfast.Hide();
        dinner_rb.Hide();
    }
    if (breakfast == null && lunch == null && dinner != null)
    {
        bfast.Hide();
        lunch_rb.Hide();
    }
    if (breakfast != null && lunch != null && dinner == null)
    {
        dinner_rb.Hide();
    }
    if (breakfast != null && lunch == null && dinner != null)
    {
        lunch_rb.Hide();
    }
    if (lunch != null && breakfast == null && dinner != null)
    {
        bfast.Hide();
    } 
```

我正在为 Windows CE 5.0 开发一个应用程序（如果有帮助的话）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T08:00:08.010

我认为在这种情况下更好的解决方案是：

```
if (breakfast == null)
  bfast.Hide();
if (lunch == null)
  lunch_rb.Hide();
if (dinner == null)
  dinner_rb.Hide(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T08:01:15.983

您可以尝试这样的事情，因为您对多个变量有条件，您需要制作表达式以将其传递给 switch，因此使用下面给出的 if 可能会使它变得简单。

```
if (breakfast == null)
      bfast.Hide();

if (lunch == null)
      lunch_rb.Hide();

if (dinner == null)
      dinner_rb.Hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T07:58:52.970

对于这种特殊情况 if-else 更好，因为您有复杂的条件，我相信这是 switch-case 无法做到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T08:02:21.013

对于这个问题，我认为`if...else`已经足够好了。`switch...case`无法应对如此复杂的情况。随意使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T08:10:12.780

Switch case 总是比 if...else if 更好，因为它需要更少的输入，并且您的代码将更容易阅读和理解。当我在考试中忘记 switch 的样式时，我自己只是使用“else if”！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T08:23:47.863

`if`和`switch`语句之间的性能水平没有太大区别。无论如何，您的代码是一团糟。考虑 Pigueiras 的回答。就像是

```
bfast.Hide();
lunch_rb.Hide();
dinner_rb.Hide();
if (meals != null) {
  if (breakfast != null)
    bfast.Show();
  if (lunch =! null)
    lunch_rb.Show();
  if (dinner =! null)
    dinner_rb.Show();
} 
```

# php - preg_replace 和大文本文件解析

> ID：12650989
> 
> 赞同：1
> 
> 时间：2012-09-29T07:56:09.643
> 
> 标签：php, regex, parsing, preg-replace

我有一个奇怪的问题`preg_replace`。它似乎对单个字符串表现正常，但是当我带来一个大文本文件（~1.5MB）时，它似乎什么也不做。

我正在尝试解析具有这种结构的键值的大型文本文件：

```
"KeyValues"
{
    "Key1" "Value1"
    // a comment
    "ComplexKey" 
    {
        "ComplexKey1" "ComplexValue1" // another comment
        "ComplexKey2" "ComplexValue2"
        "FurtherComplexity1" 
        {
            "ComplexKey3" "ComplexValue3"
            "ComplexKey4" "ComplexValue4"
        }
    }
} 
```

在进行任何解析之前，我正在尝试从文本文件中删除注释。 `preg_replace`似乎是一个安全的赌注。这是仅删除评论的代码：

```
<?php

$filecontent = file_get_contents('file.txt');
$filecontent = preg_replace('!//.*!s', '', $filecontent);

echo $filecontent;

?> 
```

现在我希望它在没有注释的情况下输出上面的示例，但它只返回与它开始时完全相同的字符串。奇怪的地方是我从文本文件中取出一行，例如这个：

```
 "ComplexKey1" "ComplexValue1" // another comment 
```

我可以`preg_replace`对该字符串运行调用，它会返回没有注释的字符串。我想可能是因为有一些换行符不匹配正则表达式，所以我在表达式中添加了 's' 修饰符；但是，这似乎并没有解决问题。无论出于何种原因，我的`preg_replace`电话都不会做任何事情（或者我的正则表达式已关闭）。

一个明显的解决方案是忽略解析中的注释，但我认为我在这里必须缺少一些东西，为什么这不起作用。如果可能的话，我真的很想在不更改解析器的情况下解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T07:58:33.453

```
$filecontent = preg_replace('!//.*$!m', '', $filecontent); 
```

`m`修饰符将输入文本的处理更改为逐行

> 默认情况下，PCRE 将主题字符串视为由单个“行”字符组成（即使它实际上包含多个换行符）。“行首”元字符 (^) 仅匹配字符串的开头，而“行尾”元字符 ($) 仅匹配字符串末尾或终止换行符之前（除非设置了 D 修饰符）。这与 Perl 相同。设置此修饰符时，“行首”和“行尾”构造分别匹配主题字符串中任何换行符之后或之前的任何换行符，以及开头和结尾处。这相当于 Perl 的 /m 修饰符。如果主题字符串中没有“\n”字符，或者模式中没有出现 ^ 或 $，则设置此修饰符无效。

[http://php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:24:36.770

这看起来像[JSON](http://en.wikipedia.org/wiki/JSON)

你能用吗

```
json_decode($mydata,true) 
```

把你的整个文本文件变成一个漂亮的多级 php 数组。

# character-encoding - 将汉字导入sqlite数据库

> ID：12650992
> 
> 赞同：2
> 
> 时间：2012-09-29T07:56:21.733
> 
> 标签：character-encoding, sqlite

如何将中文文本导入sqlite数据库？我使用谷歌翻译来生成我所有的 android 应用程序文本，然后保存在 open office calc csv 文件中。当我导入我最终得到的这些数据时，csv文件正确显示了所有中文字符？而不是汉字。我试过使用 Sqlite 数据库浏览器 2.0、sqlite adim 和 sqlite manager。我仍然无法导入完整的文本，因为我看到它们显示在 Google 翻译中。什么 sqlite 工具/实用程序和字符集组合实际上可以工作并导入所有中文字符而没有？出现？

# mysql - 在现有的 Mysql 数据库上安装 Bitnami Redmine 堆栈

> ID：12650996
> 
> 赞同：0
> 
> 时间：2012-09-29T07:57:25.580
> 
> 标签：mysql, redmine, bitnami

我正在使用 Ubuntu 服务器。我已经在使用 Mysql 服务器，我想将 Redmine 添加到它。问题是我不确定何时通过“Bitnami Redmine stack”再次安装Mysql服务器，如果我的旧数据库仍然可用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:47:22.677

如果您在安装 BitNami Redmine 堆栈时已经在端口 3306 中运行了 MySQL 数据库，则应该提示您输入捆绑在堆栈中的 MySQL 服务器的新端口。您的旧数据库应该仍然可用，但您的 BitNami 安装将使用它自己的 MySQL 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T11:56:54.193

如果您使用相同的端口需要停止它并使用**ctrlscript**启动 bitnami redmin 的 mysql 。

我已经在下面提到的链接中添加了 bitnami redmine 的安装文档以及与之相关的问题。

[安装 redmine 时启动 mysql 的相关问题](https://stackoverflow.com/questions/44791931/redmine3-3-0-1-bundle-install-server-500-error/44824252#44824252)