# StackOverflow 问答 15337000-15337999

# django - 如何为 /add/id/number 设计 url 模式

> ID：15337004
> 
> 赞同：0
> 
> 时间：2013-03-11T11:05:37.303
> 
> 标签：django

如何设计 url 模式：

http://127.0.0.1:8000/add/id/number

```
url(r'^add/$) 
```

number - 数字 1-5 (1,2,3,4,5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:10:07.343

你的意思是：

```
url(
   r'^add/(?P<id>\d+)/(?P<number>\d{1,5})/', 
   'add', 
   name="add"
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:09:51.317

像这样，如果您的视图接受一个`number`参数（并且数字是一位数）：

```
url(r'^add/id/(?P<number>[0-5])$) 
```

# .htaccess - 尝试在 .htaccess 中重写 URL 时，我的 wamp 服务器中出现 500 内部服务器错误

> ID：15337006
> 
> 赞同：1
> 
> 时间：2013-03-11T11:05:42.120
> 
> 标签：.htaccess, mod-rewrite, url-redirection

我正在尝试将笨重、丑陋的 url 重写为一个简洁的 url，它将“art.php?id=$1”转换为“art/1”，但我遇到了“500 内部服务器错误”我该怎么办？你能帮我pleeeease吗？

这是我使用的 .htaccess 代码：

```
 RewriteEngine On
    RewriteRule    ^art/([A-Za-z0-9-]+)/?$    art.php?id=$1  [NC,L] 
```

这是我遇到的错误：

> **内部服务器错误**
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:33:52.143

根据您所在的服务器，您可能需要设置重写的基础

```
RewriteEngine On
RewriteBase /art/
RewriteRule    ^([A-Za-z0-9-]+)/?$    art.php?id=$1  [NC,L] 
```

那应该可以正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:24:26.663

假设所有内容都在`gallery`文件夹中，该文件夹本身位于`www`根目录中。然后将此 .htaccess 文件也放入`gallery`文件夹中

```
RewriteEngine on

RewriteBase /gallery/

# prevent endless loop
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule .* - [L]

# serve real content
RewriteRule ^art/([A-Za-z0-9-]+)/?$ art.php?id=$1 [NC,L]

# make pretty URL
RewriteCond %{QUERY_STRING} id=(.+)
RewriteRule ^art.php$ art/%1? [R,NC,L] 
```

# excel - 每当更改单元格时，excel VBA都会自动运行宏

> ID：15337008
> 
> 赞同：24
> 
> 时间：2013-03-11T11:05:50.843
> 
> 标签：excel, vba

是否有一种简单的方法可以让 Excel 在更改单元格时自动执行宏？

有问题的单元格将在`Worksheet("BigBoard").Range("D2")`

我认为简单的谷歌查询被证明更复杂 - 每个样本都涉及相交（无论是什么）或颜色格式或任何其他看似无关的事物。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-11T11:10:02.830

是的，这可以通过使用工作表事件来实现：

在 Visual Basic 编辑器中，双击左上角树中的工作表名称，打开您感兴趣的工作表（即“BigBoard”）。将以下代码放入模块中：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Intersect(Target, Me.Range("D2")) Is Nothing Then Exit Sub
        Application.EnableEvents = False 'to prevent endless loop
        On Error Goto Finalize 'to re-enable the events      
        MsgBox "You changed THE CELL!"
    End If
Finalize:        
    Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-11T13:12:59.683

另一种选择是

```
Private Sub Worksheet_Change(ByVal Target As Range)
    IF Target.Address = "$D$2" Then
        MsgBox("Cell D2 Has Changed.")
    End If
End Sub 
```

我相信这比 使用的资源更少`Intersect`，如果您的工作表发生很大变化，这将很有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-24T17:15:51.627

为了找到一种方法，使 intersect 方法的目标单元格成为名称表数组，我偶然发现了一种简单的方法，可以在特定工作表上的任何单元格或一组单元格发生更改时运行某些东西。此代码也放置在工作表模块中：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Cells.Count > 0 Then
'mycode here
end if
end sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-10T09:01:43.580

为了发现特定列中某处的更改（此处为“W”，即“23”），我将 Peter Alberts 的回答修改为：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Target.Column = 23 Then Exit Sub
    Application.EnableEvents = False             'to prevent endless loop
    On Error GoTo Finalize                       'to re-enable the events
    MsgBox "You changed a cell in column W, row " & Target.Row
    MsgBox "You changed it to: " & Target.Value
Finalize:
    Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-28T14:18:06.447

我正在创建一个表单，其中用户输入另一个宏使用的电子邮件地址，以通过电子邮件将特定单元组发送到输入的地址。我将这个来自多个站点的简单代码和我对 VBA 的有限知识拼凑在一起。这只是监视一个单元格（在我的情况下为 K22）更新，然后终止该单元格中的任何超链接。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim KeyCells As Range

    ' The variable KeyCells contains the cells that will
    ' cause an alert when they are changed.
    Set KeyCells = Range("K22")

    If Not Application.Intersect(KeyCells, Range(Target.Address)) _
           Is Nothing Then

        Range("K22").Select
        Selection.Hyperlinks.Delete

    End If 
End Sub 
```

# iphone - 当我在设备应用程序中打开链接几秒钟后崩溃？

> ID：15337010
> 
> 赞同：2
> 
> 时间：2013-03-11T11:05:56.070
> 
> 标签：iphone, uiwebview

我正在使用一个`UIWebView`

```
[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]]];
[self.webView setBackgroundColor:[UIColor clearColor]];
[self.webView setDelegate:self];
[self.webView setOpaque:NO]; 
```

**我的应用程序在调用委托之前崩溃**

```
-(void)webViewDidFinishLoad:(UIWebView *)webView 
```

**我的错误**

接收内存警告

# jquery - 我的jQuery的点击事件没有触发

> ID：15337013
> 
> 赞同：0
> 
> 时间：2013-03-11T11:06:03.823
> 
> 标签：jquery, html, json

我将一个 xml 文件保存到一个 json 对象中，然后遍历标题以将其显示在容器中，然后我尝试单击标题，但没有任何反应。

```
$(document).ready(function() {
$.get("Titles.xml", function(data, status) {
    var jsonObj = $.xml2json(data);
    $("#videoListTmpl").tmpl(jsonObj).appendTo("#titlesContainer");
});

$(".videoItem").on('click', function() {
    console.log("this is the click");
}); 
```

html 文件。

```
<body>
<div id="container" style="margin-right: auto;margin-left: auto;width:960px;clear:both">
<div style="margin:0 auto;width:260px;float:left;height:400px;overflow:scroll" id="titlesContainer"></div>
<div style="margin:0 auto;width:670px;float:right;" id="titleContainer"></div>
</div>
<script id="videoListTmpl" type="text/x-jquery-tmpl">
    {{each Titles}}
        <div class="videoItem" style="cursor:pointer">
            ${titles}
        </div>
    {{/each}}
</script> 
```

关于为什么事件没有触发的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:08:03.713

试一下代表..

```
 $(document).on('click',".videoItem", function() {
    console.log("this is the click");
}); 
```

或将其委托给文档中存在的最接近的父元素...

```
$("#titlesContainer").on('click',".videoItem", function() {
     console.log("this is the click");
}); 
```

如果您想了解有关活动的更多信息，请通过[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)

# php - Mysql插入错误

> ID：15337014
> 
> 赞同：0
> 
> 时间：2013-03-11T11:06:10.313
> 
> 标签：php

我创建了一个注册表单，我正在使用 php 添加数据，但由于某种原因，它不允许我将数据添加到数据库中。你能看出这段代码有什么问题吗？

```
<?php
mysql_connect("localhost", "root", "password") or die("No Connection");;
mysql_select_db("music") or die("No Database");;

$username= mysql_real_escape_string($_REQUEST["username"]);
$password= mysql_real_escape_string($_REQUEST["password"]);
$email= mysql_real_escape_string($_REQUEST["email"]);
$hash = md5( rand(0,1000) );

mysql_query("INSERT INTO members (id, username, password, email, hash, active) VALUES('', '$username', '$password', '$email', '$hash', '')") or die("Can't Add");
if(mysql_affected_rows()>0){
echo "1";
}else{
echo "2";
}
?> 
```

我不断收到无法添加错误，表明 mysql_query 行存在简单问题

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:09:05.577

`Can't add`不是错误，只是您在最后添加的全部语句。

要查看您的*实际*问题，请更改`mysql_query`行尾的代码以包含从`mysql_error()`.

```
mysql_query("INSERT INTO members (username, password, email, hash, active) VALUES('$username', '$password', '$email', '$hash', '')")
    or die("Can't Add - " . mysql_error()); 
```

这将为您提供有关该错误的更多详细信息，如果您发布该错误，我可以更新我的答案并说明原因。

*请注意，我还删除了 的插入`id`，如果您的列是 ，则不需要`AUTO_INCREMENT`它，它应该是。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:08:23.877

如果 id 是您的主键，则用 null 重新平面 ''

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:10:49.553

制作`id`为`auto-incremented` `primary key`并将其从插入查询中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:13:25.310

任何列都可能存在唯一约束

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:20:35.097

要么有

```
mysql_query("INSERT INTO members (id, username, password, email, hash, active) 
             VALUES(null, '$username', '$password', '$email', '$hash', '')") or die("Can't Add");
                    ^^^^ 
```

## 或者

```
mysql_query("INSERT INTO members (username, password, email, hash, active) 
             VALUES( '$username', '$password', '$email', '$hash', '')") or die("Can't Add"); 
```

# php - 在 php explorer 中显示 git 版本

> ID：15337023
> 
> 赞同：1
> 
> 时间：2013-03-11T11:06:29.980
> 
> 标签：php, eclipse, git, version

我正在使用 Eclipse 4.3 Kepler 并且安装了 Egit。我想在我的 php explore 中显示当前项目版本，但现在我只能在 Git Repositories 视图中看到它们。

如何在项目名称旁边显示版本？我以前看过，但我做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:34:01.123

让 EGit “知道”您的项目是 Git 项目的一种方法是使用其导入项目向导将其导入。以下是步骤：

1.  从 Eclipse 包/项目资源管理器中删除现有项目（当然不要删除内容）
2.  转到`EGit repositories view`并在工作目录树中选择项目的目录
3.  右键单击项目文件夹并选择`import projects...`操作。
4.  选择您现有的项目并导入

现在，当项目在 Eclipse 中打开时，它将具有显示 repo、分支、状态等的 EGit 装饰。

# javascript - 如何在 Firefox for Android 中检测 Android 的版本号？

> ID：15337026
> 
> 赞同：5
> 
> 时间：2013-03-11T11:06:39.137
> 
> 标签：javascript, android, firefox, user-agent, detection

对于一个网站，如果用户使用的是 Android 4+ 设备，我们希望在 Play 商店中显示一个链接。我们测试的所有浏览器都在其用户代理字符串中发送了 Android 的版本号，除了一个：Firefox for Android。Firefox 只是发送这个：

```
Mozilla/5.0 (Android; Mobile; rv:19.0) Gecko/19.0 Firefox/19.0 
```

即使使用一些 JavaScript，我也找不到版本号的任何证据：

```
<script language="JavaScript">
  document.write(navigator.appVersion + "\n<br/>OS CPU: " + navigator.oscpu);
</script> 
```

返回：

```
5.0 (Android)
OS CPU: Linux arm7l 
```

我错过了其他一些方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T19:21:04.643

不幸的是，你不能。请参阅[错误 625238 - 将设备信息添加到用户代理](https://bugzilla.mozilla.org/show_bug.cgi?id=625238)和相关的[错误 807495 - 用户代理不包括手机设备型号](https://bugzilla.mozilla.org/show_bug.cgi?id=807495)。

一般来说，Mozilla 有不添加 User Agent（或 HTTP 标头）信息的政策，他们目前认为开发人员不需要知道正在运行的 Android 版本。

# extjs - 安装 Sencha Touch 2 框架

> ID：15337029
> 
> 赞同：2
> 
> 时间：2013-03-11T11:06:47.593
> 
> 标签：extjs, touch

我在让 Sencha Touch 工作时遇到问题。我正在使用 MacBook Pro，安装这个框架真的很糟糕。Sencha 似乎没有任何适合其产品最新版本的文档，而且我无法从他们的网站下载旧版本。所以我需要你的帮助！

我已经下载了 Sencha SDK、SDKTools 和他们的 Cmd 软件。SDK 的版本是 2.1.1，SDKTools 是 2.0.0，我不知道 cmd-software 的版本。然而，这三个软件都是 Senchas 网页上的最新软件。

我已将 SDK 放在 Web 服务器的根目录下，并且还将 SDKTools 安装在根目录下。

这是我目前使用的结构： webbserver 的根：- SDK - SDKTools

SDK 以我可以上网的方式工作，方法是使用我的浏览器进入“SDK”文件夹。在该页面上，我可以查看 Sencha 应用程序的示例。

当我通过终端进入 SDK 文件夹并输入“Sencha”时 - 我收到错误消息： **[WARN] 当前工作目录 (/Applications/MAMP/htdocs/SDK) 不是可识别的 Sencha SDK 或应用程序文件夹。以向后兼容模式运行。**

我用谷歌搜索并尝试了以下操作： 1\. 将 SDKTools 放在与 SDK 相同的文件夹中。2\. 创建一个名为.senchasdk 的系统文件，内容为“sdk”。3\. 创建一个名为.senchasdk 的系统文件，内容为“.”。

第一个选项自然不起作用（与以前的设置没有任何区别）。在 SDK 文件夹中键入 Sencha 时，第 2 和第 3 操作导致编译错误。下面的示例： **node.js:201 throw e; // process.nextTick 错误，或第一次滴答时的“错误”事件 ^ 错误：在 Function._resolveFilename (module.js:332:11) 处找不到模块 '/Applications/MAMP/htdocs/SDK/command/sencha.js'在 Function._load (module.js:279:25) 在 Array.0 (module.js:479:10) 在 EventEmitter._tickCallback (node.js:192:40)**

我也尝试从 SDKTools 文件夹中输入“Sencha”，但这也不起作用。我不知道这个问题来自什么，也找不到任何其他解决方案来解决这个问题。有人知道吗？或者对解决方案或部分解决方案有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:27:22.620

Sencha Touch 2.1 不再适用于 SDK 工具。Sencha Touch 2.1 附带的文档不是最新的。这是很好的文档：

[http://docs.sencha.com/touch/2-1/#!/guide/command](http://docs.sencha.com/touch/2-1/#!/guide/command)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:05:44.897

在他们的网站上，您可以下载 2.0 版本的 Sencha CMD 工具，它现在用来代替 SDKTools。但是，如果您使用 2.0 版本，您只会遇到麻烦，因为它已经过时了。目前最新版本为 3.1，只能从您的 support.sencha.com 帐户下载，未登录时无法从下载页面下载。

# json - 如何为对象指示特定的序列化器？

> ID：15337039
> 
> 赞同：0
> 
> 时间：2013-03-11T11:07:05.703
> 
> 标签：json, playframework-2.1

我有一个模型：

```
SomeModel
    public Long id;
    public String name;
    public Integer age;
    public String address;
    public Profile profile; 
```

在我的模板中，我想渲染这个模型的一个更简单的版本，只有 id 和 name。

如果我这样做`Json.toJson(SomeModel.find.findList());`，它将呈现`SomeModels`数据库中的列表，但具有完整的表单。

我写了一个只返回 id 和 name 的序列化器，但是我怎么知道`Json.toJson`要使用这个序列化器呢？

```
public class SimpleSomeModelSeralizer extends JsonSerializer<SomeModel> {
    @Override
    public void serialize(SomeModel someModel, JsonGenerator generator, SerializerProvider serializer) throws IOException,JsonProcessingException {
        if (someModel == null) return;

        generator.writeStartObject();

        generator.writeNumberField("id", someModel.getId());
        generator.writeStringField("name", someModel.getName());

        generator.writeEndObject();
    }

} 
```

我看过Play中的代码，当然，toJson是一个简单的版本，它不带一些序列化器作为参数，所以我想我必须写一个更长的代码，但我不知道是什么/如何去做吧。

Json.toJson 中的代码：

```
public static JsonNode toJson(final Object data) {
    try {
        return new ObjectMapper().valueToTree(data);
    } catch(Exception e) {
        throw new RuntimeException(e);
    }
} 
```

有可能做这样的事情吗？：

```
new ObjectMapper().useSerializer(SimpleSomeModelSeralizer.class).valueToTree(SomeModel.find.findList()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:39:11.747

好的，这就是我所做的。在 SomeModel 类上，我添加了一个将列表作为 JsonNode 返回的静态方法，我只需从模板中调用它：

```
public static JsonNode findItemsAsJson() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule someModelModule = new SimpleModule("SomeModel", new Version(1, 0, 0, null));
    someModelModule.addSerializer(SomeModel.class, new SimpleSomeModelSeralizer());
    mapper.registerModule(someModelModule);

    return mapper.valueToTree(SomeModel.find.findList());
} 
```

这种方法的缺点是您被绑定到硬编码的查询 ( `SomeModel.find.findList()`) 但您可以轻松地向该方法添加一个参数，即查询：

```
public static JsonNode findItemsAsJson(Query<SomeModel> query) {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule someModelModule = new SimpleModule("SomeModel", new Version(1, 0, 0, null));
    someModelModule.addSerializer(SomeModel.class, new SimpleSomeModelSeralizer());
    mapper.registerModule(someModelModule);

    return mapper.valueToTree(query.findList());
} 
```

你用它来称呼它：

```
SomeModel.findItemsAsJson(SomeModel.find.like("name", "B%").query()); 
```

希望它会有所帮助:)

# iphone - 在后台线程上使用套接字进行消息传递会产生错误

> ID：15337049
> 
> 赞同：1
> 
> 时间：2013-03-11T11:07:35.583
> 
> 标签：iphone, ios, objective-c, sockets, grand-central-dispatch

我正在尝试使用套接字和流向另一台设备发送消息，使用此处的代码：

[http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)

这工作正常，我可以从一个设备发送一条消息，让另一台设备接收它并毫无问题地阅读它。对于较大的消息，包括诸如 NSData 之类的内容，它会在发送消息时冻结我的 UI，因此我想在后台线程上运行它。我的代码看起来一样，除了实现了后台线程：

```
dispatch_queue_t queue = dispatch_queue_create("com.App.SendMessage", NULL);
    dispatch_async(queue, ^{

    NSMutableDictionary *mutable = [[NSMutableDictionary alloc] init];

    [mutable setObject:@"Test" forKey:@"TestKey"];

    [self.server sendMessage:mutable toService:service];

});

dispatch_release(queue); 
```

消息代码如下所示：

```
 NSData* rawPacket = [NSKeyedArchiver archivedDataWithRootObject:packet];

  // Write header: lengh of raw packet
  int packetLength = [rawPacket length];
  [outgoingDataBuffer appendBytes:&packetLength length:sizeof(int)];

  // Write body: encoded NSDictionary
  [outgoingDataBuffer appendData:rawPacket];

  // Try to write to stream
  [self writeOutgoingBufferToStream];

- (void)writeOutgoingBufferToStream {
  // Is connection open?
  if ( !readStreamOpen || !writeStreamOpen ) {
    // No, wait until everything is operational before pushing data through
    return;
  }

  // Do we have anything to write?
  if ( [outgoingDataBuffer length] == 0 ) {
    return;
  }

  // Can stream take any data in?
  if ( !CFWriteStreamCanAcceptBytes(writeStream) ) { 
    return;
  }

  // Write as much as we can
  CFIndex writtenBytes = CFWriteStreamWrite(writeStream, [outgoingDataBuffer bytes], [outgoingDataBuffer length]);

  if ( writtenBytes == -1 ) {
    // Error occurred. Close everything up.
    [self close];
    [delegate connectionTerminated:self];
    return;
  }

  NSRange range = {0, writtenBytes};
  [outgoingDataBuffer replaceBytesInRange:range withBytes:NULL length:0];
} 
```

它因错误而崩溃：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSConcreteMutableData replaceBytesInRange:withBytes:length:]: range {0, 1855} exceeds data length 0' 
```

有人知道为什么这可能会在后台线程上崩溃吗？

# javascript - 删除数组中的最后一个逗号

> ID：15337051
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:07:42.170
> 
> 标签：javascript, jquery, arrays

我可以使用 javascript/jquery 自动删除最后一个逗号吗？
代码是由上传表单生成的，不是硬编码的！

一些代码：

```
<script>
    var images = [
        'image1.jpg',
        'image2.jpg',
        'image3.jpg', // Remove this comma
    ];
</script> 
```

谢谢奥尼
_

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:21:01.953

嗯......你已经无缘无故地被烧到了天堂，但答案似乎是“你不需要担心那个逗号”。 `images.length`返回 3 并且 images.join(",") 生成一个不包含该尾随逗号的字符串。所以......即使看起来我最初对“这是错误的语法”的回答是错误的，但事实是逗号似乎对你没有害处（除非我忽略了某些东西）。所以......问题是，如果干扰者似乎对它完全不感兴趣，你为什么要关心它是否存在。

如果有一些旧的 Javascript 环境对这种语法不满意，那么你应该避免使用它。

如果此 javascript 是由其他进程动态生成的，那么您应该更改您的问题以指定发生这种情况的语言/环境，我相信我们会帮助您压缩尾随逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:35:03.647

您可以优化`if (image == NaN || image == null) {`逻辑并尝试此代码。

```
<script type="text/javascript" language="javascript">
        var images = [
        'image1.jpg',
        'image2.jpg',
        'image3.jpg',
    ];
        alert(images.length);
        var image = images[images.length - 1];
        if (image == NaN || image == null) { 

            images.pop();

        }
        alert(images.length);
    </script> 
```

仅删除`NaN`使用`if (image == null) {`

# ember.js - 如何从视图的 init() 方法中获取任何控制器实例？

> ID：15337065
> 
> 赞同：2
> 
> 时间：2013-03-11T11:08:53.070
> 
> 标签：ember.js

我正在从旧版本的 EmberJS 迁移我的项目。在某些地方，我曾经通过在任何视图的 init() 方法中使用以下内容来获取与视图无关的控制器实例：

```
var controller = App.get('router').get('firstController'); 
```

但是现在这会引发以下错误。

```
 Uncaught TypeError: Cannot call method 'get' of undefined 
```

这可能是因为它无法获取 Router 对象。现在如何获取与视图无关的控制器实例？或如何获取路由器对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:21:37.127

“需要”功能允许控制器访问其他控制器，这允许控制器的视图访问其他控制器。（Ember 中需求的一个很好的解释：http: [//darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/](http://darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/)）

如[1.0.0rc 中 View 的 init 函数中无法访问 Controller 中所述，视图](https://stackoverflow.com/questions/15272318/cannot-access-controller-in-init-function-of-view-in-1-0-0rc)的`controller`属性在调用时尚未设置`init()`，因此您需要`controller`在视图生命周期的稍后时间访问。例如，这可能是`willInsertElement()`or`didInsertElement()`钩子。

这是一个示例，演示使用需要从视图访问另一个控制器：

[http://jsbin.com/ixupad/186/edit](http://jsbin.com/ixupad/186/edit)

```
App = Ember.Application.create({});

App.ApplicationController = Ember.Controller.extend({
  doSomething: function(message) {
    console.log(message);
  }
});

App.IndexView = Ember.View.extend({
  templateName: 'index',
  init: function() {
    this._super();
    // doesn't work, controller is not set for this view yet see:
    // https://stackoverflow.com/questions/15272318/cannot-access-controller-in-init-function-of-view-in-1-0-0rc
    //this.get('controller.controllers.application').doSomething("from view init");
  },
  willInsertElement: function() {
    this.get('controller.controllers.application').doSomething("from view willInsertElement");
  },
  clickMe: function() {
    this.get('controller.controllers.application').doSomething("from clickMe"); 
  }
});

App.IndexController = Ember.Controller.extend({
  needs: ['application']
}); 
```

# css - CSS 3下拉菜单，子元素不正确

> ID：15337068
> 
> 赞同：0
> 
> 时间：2013-03-11T11:09:00.867
> 
> 标签：css, drop-down-menu, position

我有一个用 CSS 创建的下拉菜单。菜单位于[下拉菜单](http://7sisters.in/lab/dropdown/)中。问题是当我尝试访问子元素时，它们无法正常访问。我在父元素和子元素之间给出了一些边距，当鼠标光标指向该间隙时，下拉菜单会隐藏。有什么办法可以保持边距并且仍然可以看到子列表，就像在 jquery 中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:30:53.183

正如 Morpheus 建议的那样，在容器 div 上设置填充。要获得边距效果，请将背景样式移动到子 div。

# c++ - 如何用指针分配文件名？

> ID：15337070
> 
> 赞同：0
> 
> 时间：2013-03-11T11:09:08.343
> 
> 标签：c++, visual-studio-2010, opencv

我确实有一个用指针作为参数创建的函数。该参数将用于在最后保存图像。每次我想使用所需参数调用该函数时，我希望保存的图像文件具有指定的名称。我向你展示如何：

```
void SaveImage(IplImage *img)
{
...
cvSaveImage("C:/img.png", img);
...
} 
```

调用函数时：SaveImage(image1)，我想在我的 C:/ 上有一个名为 image.png 的图像

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:28:06.847

显然，你不能用唯一可行的答案来回答这个问题，因为你被否决了......

所以，我将改写我的答案：

您需要将两个变量传递给 SaveImage：

```
void SaveImage(const char *name, IplImage *img)
{
   ...
   cvSameImage(name, img);
} 
```

然后您的调用代码将必须生成正确的名称，例如：

```
SaveImage("c:\image.png", image);

SaveImage("c:\other.png", other); 
```

现在，当然，如果您真正想要的只是一个唯一名称，而不是反映代码中变量名称的名称，那么还有很多其他可能性，例如使用包含序列号的格式化字符串，随机数`tmpnam()`或其他类似方案。

# ios - iOS - 在 UITableViewCell 中显示菜单

> ID：15337071
> 
> 赞同：0
> 
> 时间：2013-03-11T11:09:10.040
> 
> 标签：ios, uitableview, uimenucontroller

在我的应用程序中，我必须在点击表格视图单元格时显示一个菜单控制器。它显示一个菜单。以及所有操作都已成功执行。好到现在。
我面临的一个小问题是，如果再次点击单元格（或其他单元格），我将无法隐藏菜单控制器。这是我正在使用的代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UIMenuController* menuController = [UIMenuController sharedMenuController];

    if ([menuController isMenuVisible])
    {
        [menuController setMenuVisible:NO animated:YES];
    }
    else
    {
        [self becomeFirstResponder];        
        self.selectedIndex = indexPath.row;
        [menuController setTargetRect:[tableView rectForRowAtIndexPath:indexPath] inView:tableView];

        [menuController setMenuItems:@[
            [[UIMenuItem alloc] initWithTitle:@"Play" action:@selector(playVideo:)],
            [[UIMenuItem alloc] initWithTitle:@"Edit" action:@selector(editVideo:)],
            [[UIMenuItem alloc] initWithTitle:@"Delete" action:@selector(deleteVideo:)],
            [[UIMenuItem alloc] initWithTitle:@"Share" action:@selector(shareVideo:)],
            [[UIMenuItem alloc] initWithTitle:@"Cancel" action:@selector(cancelMenu:)]
        ]];

        menuController.arrowDirection = UIMenuControllerArrowUp;
        [menuController setMenuVisible:YES animated:YES];
    }
} 
```

我不知道为什么再次点击表格视图单元格时它没有隐藏。有人可以指导我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:00:36.263

以我的经验，取消菜单控制器`[menuController setMenuVisible:NO animated:NO];`有帮助。我想如果您尝试在同一代码块中为菜单设置动画，您可能会遇到问题。

# wordpress - WordPress $post-> ID

> ID：15337079
> 
> 赞同：0
> 
> 时间：2013-03-11T11:09:29.867
> 
> 标签：wordpress, post

是否可以`ID`在循环中使用自定义？例如使用`$post->122334535`而不是`$post->ID.`

事情是。我有自定义帖子，附加到这些自定义帖子的是*图像*。*我需要在Wordpress 中*创建 bij *CakePHP*的另一个页面的图像。

 *这些页面有相同`ID`的，所以我这样尝试： `<?php get_post_meta($post->$info['id'], 'Thumbnail') ?>` 但没有响应。`ID`和`$info['id']`是相同的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:01:32.043

您不能使用 like`$post->122334535`代替`$post->ID`. 因为wordpress post query是通过写代码给出post ID的`$post->ID`。一起在 wordpress`Post`中`->ID`回显帖子的 ID。所以你可以使用`122334535`(即`post_id`) 而不是`Post->ID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:32:44.697

你搞错了。如果出于某种原因您想使用自己的 ID，则应将整个`$post->ID`ID 替换为您想要的 ID。

例如，如果你想使用 post ID `123`，你必须使用：

```
<?php
echo get_post_meta(123, 'Thumbnail'); 
?> 
```

请注意，我添加了一个，`echo`因为 using only`get_post_meta`不会打印任何内容，它只会返回一个值。*

# javascript - 使用 Javascript 将光标自动移动到下一个表单字段

> ID：15337084
> 
> 赞同：4
> 
> 时间：2013-03-11T11:09:45.813
> 
> 标签：javascript

是否可以在到达`Javascipt`字段时自动将用户从一个字段发送到下一个字段`maxlength`？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:12:55.157

是的。您需要：

*   监视[`onkeydown`](https://stackoverflow.com/questions/1648130/keycode-on-keydown-event)事件以防止字符“溢出”，
*   根据您自己的逻辑/结构查找表单中的下一个输入字段 - 发生这种情况时，
*   使用该[`focus`](https://stackoverflow.com/questions/9543967/setting-focus-to-a-textbox-when-a-function-is-called)方法将焦点设置在下一个字段上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:12:57.247

是的，有可能。假设您的文本框最大长度为 5。您需要创建一个函数 onkeyup 事件并计算文本框值的长度。在此函数中，如果长度等于或超过 5，那么您需要编写第二个文本框焦点函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:13:58.410

是的，您需要按`onkeyup`事件计算在字段中插入的字符数，如果数字等于 maxlength，则将`focus`下一个字段设置为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:17:36.783

您可以使用 jquery 使用这样的代码。在此代码中，当文本大于 20 个字符时，它将移动到 #second 字段

```
<input id="first"/>
<input id="second"/>
<script>
$(function() {
   $('#first').keypress(function() {
      var self = $(this);
      //wait until character is inserted
      setTimeout(function() {
         if (self.val().length > 20) {
            $('#second').focus();
         }
      }, 1);
   });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:18:56.533

```
$('#productkey1').keyup(function() {
     if(this.value.length >= $(this).attr('maxlength'))
     {
         $('#productkey2').next().focus();
     }
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T11:30:10.653

首先，您需要连接到`onfocus`事件以使输入知道您正在开始测量。然后你需要用`onkeyup`事件检查输入字符的长度。达到限制后，您可以调用`focus()`要将光标移动到的下一个 DOM 元素。您还需要使用该`onblur`事件来了解您已停止测量输入的长度。

例如，使用 jQuery；

```
<input id="inputA" type="text"/>
<input id="inputB" type="text"/>

<script>

var $input;

$('#inputA').focus(function() {
    $input = $(this);
});

$(window).keyup(function() {
    if($input && $input.val().length == 5) {
        $('#inputB').focus();
    }
});

$('#inputA').blur(function() {
    $input = null;
});

</script> 
```

# java - 有没有办法检索以动态方式创建的控件（线性布局）的信息？

> ID：15337094
> 
> 赞同：0
> 
> 时间：2013-03-11T11:10:05.470
> 
> 标签：java, android, android-layout

我正在开发一个允许用户填写表格的 android 项目。

下图描述了我对表单的不同布局。 ![这是我的表格](../Images/2c6e47fa2861bc6874e759460231d141.png)

黑色布局（LinearMain）是我的主要线性布局。绿色的（LinearForm）描述了表格的行。

> LinearMain.addView(LinearForm);

蓝色的 (LinearDescription) 包含要填写的表格行的描述。

> LinearForm.addView(LinearDescription);

灰色的线性布局描述了我的控件。控件可以是 EditText、按钮或 CheckBox。

> 例如 LinearForm.addView(LinearButton)

填写表格后，我想检索 EditText 中的文本，知道 CheckBox 是否被选中。我已经尝试使用 ArrayList（示例 ArrayList），但它不是很有帮助。

还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:23:10.190

因为您不确切知道要处理的视图，所以在这里使用实例来避免异常很重要

`ViewGroup`是一个扩展所有 ViewGroup 的抽象类，例如 LinearLayout 是一个 ViewGroup。

```
 if(ViewGroup.getChildAt(int) instanceof Checkbox){

//do sommethng here
}else if(ViewGroup.getChildAt(int) instanceof Button){

//do sommethng here
}else if(ViewGroup.getChildAt(int) instanceof TextView){

//do sommethng here
}else if(ViewGroup.getChildAt(int) instanceof EditText){

//do sommethng here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:15:14.257

`ViewGroup.getChildAt(int)`记录[在这里](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)

您可以创建一个 for 循环来遍历`LinearLayout`的子级，检查相应的子级是否存在`instanceof CheckBox`并获取值`((CheckBox) getChildAt(i)).isChecked()`

示例代码：

```
LinearLayout ll;

for ( int i = 0; i < ll.getChildCount(); i++ ) {
    View child = ll.getChildAt(i);
    if ( child instanceof CheckBox ) {
        boolean checked = ((CheckBox) child).isChecked();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:15:47.027

您可以将 id 设置为您的视图，不管它是什么视图：`LinearButton.setId();` 然后通过`using findViewById(R.id.chosenId).getText().toString();` for`EditText`或`findViewById(R.id.chosenId).isChecked();`for获取文本`CheckBox`。

另一种方法是将您的视图保存在视图的arrayList 中并使用此数组访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:30:04.583

您是否在其中创建了布局`xml`并设置了每个视图的 id？如果是，那么你只需要创建`EditText`using的对象，`findViewById(R.id.edittext)`然后使用`getText()`的方法`EditText`从`EditText`. 并且`CheckBox`您可以使用`findViewById(R.id.chosenId).isChecked()`.

# php - 在 Laravel 中使用 HTTP 缓存，静态文件路径生成

> ID：15337100
> 
> 赞同：1
> 
> 时间：2013-03-11T11:10:14.750
> 
> 标签：php, laravel, browser-cache, http-caching

我打算在我的下一个项目中使用 Laravel 框架。到目前为止，我陷入了组织项目中静态内容（图像、脚本等）的链接。例如，我有这个缓存选项（缓存所有静态文件，nginx）：

```
location ~* \.(jpg|jpeg|gif|css|png|js|ico|html)$ {
    expires max;
} 
```

如何创建指向文件 main.js 的链接？**如果文件被修改，如何告诉代理文件已过期？**

在我当前的项目中，我有版本控制系统，它使用文件修改时间来生成文件的唯一前缀。所以链接就像[http://site.com/22566223435/js/main.js](http://site.com/22566223435/js/main.js)下次文件更改时链接会自动更改。

Laravel 中实现此功能的最佳实践是什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:47:37.463

我会把它作为一个查询字符串来做，它很简单，足够准确，不需要任何复杂的层来实现。只需将文件的最后修改作为查询字符串放在其链接上。这将强制浏览器刷新文件。

```
<link rel="stylesheet" type="text/css" href="/css/style.min.css?v=<?= File::modified(path('public').'/css/style.min.css') ?>" /> 
```

为了简化这一点，您可以创建一个简单的类来生成文件链接并缓存最后的修改以提高性能。如果您使用 LESS 编译器上的自定义函数，它也可以实现。

现在，关于服务器缓存，如果您的应用程序有很多用户可以真正从中受益，那么您应该研究 CDN，它还可以处理全球分布，并且可以与该查询字符串系统完美配合。

**编辑：**

也可以使用 Apache 上的 RewriteRules 来解决这个问题（没有任何使用 nginx 的经验来帮助解决这个问题）。用于生成查询字符串的相同技术，您可以用来生成 URI 的前缀（或后缀）。

您可以尝试的另一件事是定义一个主要用于处理静态资产的子域，例如`assets.example.com`. 这个域可以完全由没有 Laravel 堆栈的网络服务器处理。但这在很大程度上取决于您的资产是如何在整个项目中开发、编译和使用的。

**我们的方法：**

在我们公司，我们将 CloudFront 和 S3 用于数据库实体资产。每个实体都有自己的 S3 目录，每个资产都通过唯一的文件名进行版本控制（由 md5 生成，这避免了重新上传资产的重复）。就像是：

```
/posts/876/060b90d67ac0c5e24da6de6ae547e3b1.jpg 
```

我们还在 CloudFront 上定义了 10 个子域，因此浏览器不会达到同一域的 6-8 个并发请求的限制：

```
cdn0.example.com
cdn1.example.com
cdn2.example.com
... and so on 
```

我们数据库中的每个条目都使用通过计算选择的专有子域`resource.id % 10`，这非常快，并且总是为每个实体返回相同的子域（帮助客户端和 CloudFront 缓存）。这是提供图像的最佳选择。

UI 图像存储在一个专有的子域中`assets.example.com`，并且到目前为止还没有版本化，因为我们不会对设计进行太多更改，如果我们这样做了，我们可能会将新资产放在一个`/v2/`或`/newthemename/`文件夹之类的东西中。这种方法对回滚甚至用户选择的主题有很大帮助。

CSS and JS are served by Apache from within Laravel `/public` directory. This is not the fastest way, but since we are focused on development right now, having automatic compiling of LESS and Closure is far more important. When we launch for end users, we will probably think of an automated deploy system which compiles assets, publishes them on S3/CloudFront with a timestamp prefix and caches their last timestamp for view rendering.

# c# - Gridview：索引超出范围

> ID：15337102
> 
> 赞同：0
> 
> 时间：2013-03-11T11:10:17.343
> 
> 标签：c#, asp.net, gridview

我在 3 个不同的页面中有 3 个 GridView 控件。它们以前工作得很好。突然我收到这个错误信息：

> 无效的回发或回调参数。使用启用事件验证`<pages enableeventvalidation="true" />`

所以我试图把`<@pages enableeventvalidation="false" />`页面。它仍然没有工作。我从页面中删除了这个命令。然后，当单击所有网格视图控件的网格视图中的按钮时，会显示另一条消息“索引超出范围”。

```
int id = Convert.ToInt32(myGridView.DataKeys[e.RowIndex].Value) 
```

看起来 gridview 找不到 datakey (`e.rowIndex`的值是 OK )，Datakeynames 已设置。

```
protected void gvItemCategory_RowDeleting(object sender, GridViewDeleteEventArgs e) {

    int categoryId = Convert.ToInt32(gvItemCategory.DataKeys[e.RowIndex].Value);

    CollectionCategory category = new CollectionCategory();
    category.CategoryId = categoryId; 
    category.Delete();
    ItemCateogryShowData();
} 
```

HTML：

```
<asp:GridView ID="gvItemCategory" runat="server" AutoGenerateColumns="False"
OnRowCancelingEdit="gvItemCategory_RowCancelingEdit"
    OnRowDeleting="gvItemCategory_RowDeleting" OnRowEditing="gvItemCategory_RowEditing"
    DataKeyNames="CategoryId" OnRowUpdating="gvItemCategory_RowUpdating">
    <Columns>
        <asp:TemplateField HeaderText="CateogoryName">
            <ItemTemplate>
                <asp:Label ID="lblItemCategoryName" runat="server"    Text='<%#Eval("CategoryName") %>'></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="tbItemCateogryName" runat="server" Text='<%#Eval("CategoryName") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowEditButton="True" ButtonType="Button" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:30:06.687

尝试在页面加载方法上绑定您的 Gridview `!ispostback`..

```
If(!isPostback)
{
 //your code here
} 
```

尝试这个

```
int categoryId = Convert.ToInt32(gvItemCategory.DataKeys[e.RowIndex].Value.Tostring()); 
```

**注意**：也使用`EnableeventValidation="false"`

# c++ - 从子类 c++ 调用基类方法

> ID：15337105
> 
> 赞同：1
> 
> 时间：2013-03-11T11:10:35.980
> 
> 标签：c++, inheritance

我有 4 个类 Product 和 MultiBuyProduct（它是 product 的子级），用于计算价格，还有一个购物车，您可以将其添加到 MultiBuyProduct 中的调用函数获取价格并将收据打印到控制台，以及 Amount 哪个是一个需要 2 个整数并对它们进行一些计算的类，例如加减法，然后返回一个格式化的价格。从我的 main.cpp 我打电话

```
 MultiBuyProduct p2("Wine", Amount(10,0), 2, 10);
 ShoppingCart SC;
 SC.add(&p2 ,2, true); 
```

下面显示购物车添加方法

```
void ShoppingCart::add(Product *p, int quantity, bool end)
{
    mProduct = p;
    //Sets member vairable value
    mQuantity = quantity;
    //Gets Name of product 'p'
    mProductName = mProduct->getName();
    //Gets price of product 'p'
    mAmount = mProduct->getPrice();
    //Gets total price of product 'p' based on quantity
    mAmountTotal = mProduct->getPrice(quantity);
    //Updates the GrandTotal
    mGrandTotal.add(mProduct->getPrice(0));
} 
```

下面显示了 MultiBuyProduct getPrice

```
Amount MultiBuyProduct::getPrice(int quantity)
{
    if(quantity >= mMinDiscountedQuantity)
    {
        mPrice.setFullPence(mPrice.getFullPence() * quantity);
        mPrice.setPounds(mPrice.getFullPence()/100);
        mPrice.setPence(mPrice.getFullPence()%100);

        int j = mPrice.getFullPence() / 100 * mDiscountedPercent;
        saving += j;
        int i = mPrice.getFullPence() - j;

        mPrice.setFullPence(i);
        mPrice.setPounds(i/100);
        mPrice.setPence(i%100);
        return Amount(mPrice.getFullPence()/100, mPrice.getFullPence()%100);
    }
    else
    {
        return Product::getPrice(quantity);
    }
} 
```

好的，所以基本上该功能正在工作，因为正确的总数被打印到控制台，显示 10% 已被打折，因为数量大于或等于 2。

但我的 else 声明已达到（在购物车添加方法中查找商品的单数价格时）

```
 mAmount = mProduct->getPrice(); 
```

但没有返回任何东西我认为它是因为产品由于某种原因不包含 MultiBuyProduct 具有的数据，我基本上需要使 Product 具有与 multiBuy 产品相同的数据，然后调用它的获取价格。（基本上就像在java中我会调用（否则super.getPrice（quantity）<<<但我知道你不能在c ++中这样做）

编辑：这是类结构

产品：

```
Product::Product(std::string name, Amount price):aName(name), mPrice(price)
{
} 
```

多买产品：

```
MultiBuyProduct::MultiBuyProduct(std::string aName, Amount price, int minDiscountedQuantity, int discountedPercent)
    : mMinDiscountedQuantity(minDiscountedQuantity), mDiscountedPercent(discountedPercent),
      mPrice(price), aName(aName)
{
      mProduct = Product(mName,mPrice);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:21:37.933

以下代码适用于 Visual Studio 2008

```
#include "stdafx.h"
#include <string>

using namespace std;
class Product
{
protected:
    std::string aName;
    double mPrice;
public:
Product::Product(std::string name, double price):aName(name), mPrice(price)
{
}

double getPrice(int quantity)
{
    return mPrice*quantity;
}
};

class MultiBuyProduct : Product
{
    int mMinDiscountedQuantity, mDiscountedPercent;

public:
MultiBuyProduct::MultiBuyProduct(std::string name, double price, int minDiscountedQuantity, int discountedPercent)
    : mMinDiscountedQuantity(minDiscountedQuantity), mDiscountedPercent(discountedPercent), Product(name, price)
{
}
double MultiBuyProduct::getPrice(int quantity=1)
{
    if(quantity >= mMinDiscountedQuantity)
    {
        return (mPrice*quantity) - (mPrice*mDiscountedPercent/100);
    }
    else
    {
        return Product::getPrice(quantity);
    }
}
};
int _tmain(int argc, _TCHAR* argv[])
{
    MultiBuyProduct p2("Wine", 10.0, 2, 10);
    MultiBuyProduct *mProduct = &p2;
    //Sets member vairable value
    int mQuantity = 2;
    //Gets Name of product 'p'
    //Gets price of product 'p'
    double price = mProduct->getPrice();
    //Gets total price of product 'p' based on quantity
    double mAmountTotal = mProduct->getPrice(mQuantity);
    //Updates the GrandTotal
    double mGrandTotal = mProduct->getPrice(0);
    return 0;
} 
```

# mongodb - 将 MongoDB 从 2.0.2 升级到 2.2 是否可以回滚？

> ID：15337107
> 
> 赞同：0
> 
> 时间：2013-03-11T11:10:42.610
> 
> 标签：mongodb

我想将 MongoDB 从 2.0.2 升级到最新版本，但我有点担心只使用当前数据文件运行 mongod。

如果出现问题，我可以停止 mongod 并运行旧设置（v. 2.0.2）吗？或者，换句话说，新的 mongod 是否对数据文件进行了任何更改，使它们无法在 mongod 2.0.2 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:24:59.540

如升级页面所述： http: [//docs.mongodb.org/manual/release-notes/2.2/](http://docs.mongodb.org/manual/release-notes/2.2/)

> MongoDB 2.0 数据文件与 2.2 系列二进制文件兼容，无需任何特殊迁移过程。

所以是的，不应该对文件进行任何更改。上次需要更改（实施了新版本的索引）时，升级页面确实提到了有关迁移过程的其他信息。

另请查看更改部分：[http](http://docs.mongodb.org/manual/release-notes/2.2/#changes) ://docs.mongodb.org/manual/release-notes/2.2/#changes似乎没有任何文件格式更改。发生了一些行为变化（[http://docs.mongodb.org/manual/release-notes/2.2/#behavioral-changes](http://docs.mongodb.org/manual/release-notes/2.2/#behavioral-changes)），但这只会影响您文件的未来工作（即更改名称限制）。

我敢打赌，将 2.2 二进制文件替换为 2.0 是安全的。

我最近从 1.9 升级，没有任何问题。

# c++ - 为什么每次我尝试更改对象时我的复制构造函数都会产生段错误

> ID：15337109
> 
> 赞同：0
> 
> 时间：2013-03-11T11:10:46.033
> 
> 标签：c++, list, segmentation-fault, containers, copy-constructor

```
/* Copy constructor */
List(const List<value_type>& list)
{
    // for (iterator it = list.begin(); it != list.end(); ++it); 
    //   this->push_back(*it);
    // The commented part above is what I want it to do.
    std::cout << "empty = " << this->empty(); // no seg fault;
    std::cout << "size = " << this->size(); // also causes a seg fault
    this->push_back("string") // causes a seg fault
} 
```

尝试运行此代码会使我的程序出现段错误。似乎每次我试图改变或改变（这个）它只是抛出一个段错误。

它还说（这个）不是空的（这似乎是唯一一个不抛出段错误的）

这是调用更多信息的方法的代码。希望这里有人可以让我对这里发生的事情有所了解。

```
void insert(iterator position, const value_type& in)
{
    // If inserting at the front, just change the head to a new Node
    if (position == this->head) 
        this->head = new Node<value_type>(in);
    else
    {
        Node<value_type>* node = this->head;
        // iterate to the position of "position".
        for (; node->next != position.node; node = node->next);
        node->next = new Node<value_type>(in);
    }
    // This is here to put back all the old data into it's correct position.
    // I was having way too much with keeping the integrity of the data
    // while inserting into the middle of the list, so I created this little hack.
    for (iterator it = position; it != this->end(); ++it)
    {
            Node<value_type> *node = this->head;
            for (; node->next != NULL; node = node->next);
            node->next = new Node<value_type>(it.node->data);
    }
}

// Insert at end
void push_back(value_type in)
{
    this->insert(this->end(), in);
}

unsigned size()
{
    if (this->empty()) return 0;
    unsigned i = 0;
    for (iterator it = this->begin(); it != this->end(); ++it, ++i);
    return i;
}

bool empty() const { return this->head == NULL; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:14:25.440

在我写完这篇文章后几乎立即就解决了这个问题。

我所要做的就是首先将 head 分配给 NULL

```
List(List<value_type>& list)
{
    this->head = NULL;

    for (iterator it = list.begin(); it != list.end(); ++it)
        this->push_back(*it);
} 
```

# c++ - 令牌之前的预期不合格 ID...'std::'

> ID：15337114
> 
> 赞同：1
> 
> 时间：2013-03-11T11:10:52.270
> 
> 标签：c++, eclipse, android-ndk, std

当我在 Android NDK 项目中编译 C++ 代码时，我得到：

```
 expected unqualified-id before '(' token    FPEnvironment_DUMMY.h   /PocoFoundation/jni/include/Poco    line 98 C/C++ Problem 
```

错误源于以下行：

```
 inline bool FPEnvironmentImpl::isInfiniteImpl(double value)
    {
        return std::isinf(value) != 0;
    } 
```

包括以下数据包：

```
 #include <cmath> 
```

当我删除 std:: 时，错误似乎消失了，为什么会发生这种情况？我有很多源文件来删除所有的类名std：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:46:05.707

所以我找到的解决方案是：

根据[此构建时，从错误指示的头文件中删除 std::](http://www.appinf.com/docs/poco/99300-AndroidPlatformNotes.html)

由于我们接下来将在 eclipse-Android 项目中包含我们在此处构建的静态库，因此新编译需要再次在标头中使用 std::，因此我们只需将它们恢复为原始样式 std::isinf 等。std 的使用:: 取决于您使用的标准库，gnu 或 stdl_port..

这个问题在[这里讨论](https://github.com/pocoproject/poco/issues/57)

# dart - 设计插件架构

> ID：15337121
> 
> 赞同：1
> 
> 时间：2013-03-11T11:11:18.667
> 
> 标签：dart, dart-isolates

愿有人给我们一个在 Dart 中设计插件架构核心的方法大纲。

在 Dart 中如何在运行的应用程序核心中添加、更新和删除插件？

Dart 的讨论组中已经给出了一些答案 - [https://groups.google.com/a/dartlang.org/forum/#!topic/misc/O3BA_9FXcp4](https://groups.google.com/a/dartlang.org/forum/#!topic/misc/O3BA_9FXcp4)。

我把线程移到这里，因为 stackoverflow 更适合这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:06:53.823

我最初的想法是每个插件都将在其自己的隔离内运行，这需要一个明确定义的协议，插件将遵守该协议才能与主应用程序隔离进行交互。理想情况下，协议的细节将隐藏在插件开发人员将使用的漂亮 API 后面。

# java - 如何在 RHEL 上的 Tomcat 7 上启用 SSL/HTTPS

> ID：15337123
> 
> 赞同：1
> 
> 时间：2013-03-11T11:11:23.037
> 
> 标签：java, linux, ssl-certificate, redhat, rhel

我有一个在 RHEL 服务器上运行的 Java 应用程序。我想在 RHEL 上的 tomcat 7 上启用 SSL。我正在关注[本教程](http://www.mkyong.com/tomcat/how-to-configure-tomcat-to-support-ssl-or-https/)。

我使用这个命令来创建一个自签名证书。

```
keytool -genkey -alias mkyong -keyalg RSA -keystore c:\mkyongkeystore 
```

但是在运行`https://localhost:8443/`时我什么也没有得到，我可以将 Tomcat 配置为支持 SSL 或 https。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:12:50.180

A) 通过执行以下命令创建一个密钥库文件来存储服务器的私钥和自签名证书：

keytool -genkey -alias tomcat -keyalg RSA -keystore /etc/tomcat6/keystore

B) 取消注释 /etc/tomcat6/server.xml 中的“SSL HTTP/1.1 连接器”条目并按照下面配置部分中的说明进行修改（这只是一个示例，编辑您自己的配置并取消注释并提供正确的密码）。

```
<!-- Define a SSL HTTP/1.1 Connector on port 8443
     This connector uses the JSSE configuration, when using APR, the
     connector should be using the OpenSSL style configuration
     described in the APR documentation -->

<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="want" SSLProtocol="TLS"
           keystoreFile="conf/keystore"
           truststoreFile="conf/keystore"
           keystorePass="XXXXXX"
           keystoreType="PKCS12"
           ciphers="SSL_RSA_WITH_3DES_EDE_CBC_SHA,
                TLS_RSA_WITH_AES_256_CBC_SHA,
                TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA,
                TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA,
                TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA,
                TLS_ECDH_RSA_WITH_AES_128_CBC_SHA,
                TLS_ECDH_RSA_WITH_AES_256_CBC_SHA,
                TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA,
                TLS_ECDH_anon_WITH_AES_128_CBC_SHA,
                TLS_ECDH_anon_WITH_AES_256_CBC_SHA"
           truststorePass="XXXXXXXXXXXXXXX" /> 
```

C) 如果您使用的是 selinux，您可能需要重新标记新创建的密钥库文件上下文。使用 RHEL SELinux 指导如何做到这一点。

# c# - 如何将 RGB 图像（位图）编码为 VP8 格式？

> ID：15337124
> 
> 赞同：2
> 
> 时间：2013-03-11T11:11:23.717
> 
> 标签：c#, encoding, webm, vp8

任何人都知道如何使用 C# 将 RGB 图像（24bppRgb）编码为 VP8 格式？基本上我将屏幕捕获为位图帧，我想在发送之前对它们进行编码以减小大小。

从我所见，只有 C++ 而不是 C# 的代码示例。
假设我要求[这个问题的 C# 替代方案](https://stackoverflow.com/questions/3029164/how-to-encode-series-of-images-into-vp8-using-webm-vp8-encoder-api-c-c)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:18:12.820

您可以移植代码（我敢肯定有点工作）或在 C++ 中构建一个执行实际转换的应用程序，然后通过 C# 中的命令行调用该应用程序，将结果存储在 txt 或一些日志文件中种类。

# visual-studio - Visual Studio 2012：如何处理多行代码替换

> ID：15337125
> 
> 赞同：10
> 
> 时间：2013-03-11T11:11:26.950
> 
> 标签：visual-studio, visual-studio-2012

我经常需要替换多个文档中的多行。在 Visual Studio 2012 中，似乎可以将多行代码仅放在一个简单的单行输入框中。

[![在 Visual Studio 2012（德语语言包）中搜索/替换框层](../Images/8b471524c39bd0e6996568083057e574.png)](https://i.stack.imgur.com/MtIRy.jpg)

在“嵌入式​​”搜索框中也只有一个单行输入字段： [![Visual Studio 2012（德语语言包）中的嵌入式搜索/替换框](../Images/fb928183ec21c320f537cb727d8ab68d.png)](https://i.stack.imgur.com/RHWQJ.jpg)

在插入通常很长的搜索词并尝试将换行符的正则表达式放入其中后，我必须在单行输入字段内水平移动，这根本不舒服。

是否有另一种方法可以使用查找/替换功能来替换 Visual Studio 2012 中的多行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-13T10:34:25.140

为了首先替换多行，您必须检查搜索窗口上的正则表达式选项。在以下示例中，它是搜索

```
 first
   second
   third 
```

并将其替换为

```
 fourth
  fifth
  sixth 
```

搜索文本：第一（[\s\n] *）第二（[\s\n]*）第三

替换文本：第四个$1fifth$2sixth

![查找替换示例](../Images/ab39c9a5dd81891468e17ca779e21f51.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T13:19:09.410

这对我来说非常有效：

[http://vlasovstudio.com/sync-block-edit/](http://vlasovstudio.com/sync-block-edit/)

# gwt - 在存储库中找不到 maven 依赖项

> ID：15337133
> 
> 赞同：2
> 
> 时间：2013-03-11T11:11:41.347
> 
> 标签：gwt, maven, extjs, dependencies, gxt

我正在尝试运行使用 gwt-dev 的项目。 当我在终端中创建依赖项时，说明位于：[http](http://neiliscoding.blogspot.ru/2012/05/how-to-setup-examples-for-use-in-gxt-3.html?showComment=1362999279386)`mvn install:install-file -DgroupId=com.google.gwt -DartifactId=gwt-dev -Dversion=2.5.0 -Dpackaging=jar -Dfile='/home/mikhail/Загрузки/libraries/gwt-2.5.0/gwt-dev.jar'` ://neiliscoding.blogspot.ru/2012/05/how-to-setup-examples-for-use-in-gxt-3.html?showComment=1362999279386： 并将依赖项添加到 pom.xml：

```
 <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-dev</artifactId>
      <version>2.5.0</version>
  </dependency> 
```

行家 说：

```
 [WARNING] You should not declare gwt-dev as a project dependency. This may introduce complex dependency conflicts
Downloading: http://repo1.maven.org/maven2/com/google/gwt/gwt-dev/2.5.0/gwt-dev-2.5.0-linux-libs.zip
[INFO] Unable to find resource 'com.google.gwt:gwt-dev:zip:linux-libs:2.5.0' in repository central (http://repo1.maven.org/maven2) 
```

否则，如果我将其删除，maven 会说：

```
[INFO] using GWT jars from project dependencies : 2.5.0
Downloading: http://repo1.maven.org/maven2/com/google/gwt/gwt-dev/2.5.0/gwt-dev-2.5.0-linux-libs.zip
[INFO] Unable to find resource 'com.google.gwt:gwt-dev:zip:linux-libs:2.5.0' in repository central (http://repo1.maven.org/maven2)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR 
```

所以我在这两种情况下都有构建错误。如何处理这种情况？请帮帮我。

我还没有解决这个问题，但我刚刚发现我使用了 1.2 版本的 maven 插件。我不确定这是主要问题，但无论如何我想处理它。所以，我已经根据你的第一个链接添加了这个插件，maven 会丢弃构建错误：`

```
[INFO] Scanning for projects...
[INFO] artifact org.apache.maven.plugins:maven-archetype-plugin: checking for updates from central
[INFO] artifact org.apache.maven.plugins:maven-archetype-plugin: checking for updates from central
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [org.apache.maven.plugins:maven-archetype-plugin:RELEASE:generate] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] Preparing archetype:generate
[INFO] No goals needed for project - skipping
[INFO] [archetype:generate {execution: default-cli}]
[INFO] Generating project in Batch mode
[INFO] Archetype repository missing. Using the one from [org.codehaus.mojo:gwt-maven-plugin:2.5.1-rc1] found in catalog remote
[WARNING] Property module is missing. Add -Dmodule=someValue
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Archetype org.codehaus.mojo:gwt-maven-plugin:2.5.1-rc1 is not configured
    Property module is missing.
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4 seconds
[INFO] Finished at: Tue Mar 12 15:18:50 MSK 2013
[INFO] Final Memory: 27M/428M 
```

` 顺便说一下，我使用 intellij IDEA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T14:14:32.070

GWT 很久以前就停止为 windows、linux 和 mac 维护单独的平台相关库了。GWT 1.7 是此类平台相关库中的最后一个。所以`"linux-libs"`你的错误没有意义。我猜你正在使用一个非常旧的 gwt-maven-plugin 。

1.  移动到最新[的 gwt-maven-plugin](http://mojo.codehaus.org/gwt-maven-plugin/)。
2.  用于`<scope>provided</scope>`gwt-dev 依赖以避免它被推入 WEB-INF/lib （无害但多余）
3.  使用全局/中央[存储库](http://repo1.maven.org/maven2)，而不是在本地安装用户存储库。
4.  [您还可以在此处](https://google-web-toolkit.googlecode.com/files/gwt-2.5.1.zip)开始使用 GWT 示例进行 maven 项目。

注意 - 您的查询可能与[NetBeans + GWT 2.2.0 + Maven 编译问题重复/相似](https://stackoverflow.com/questions/5356989/netbeans-gwt-2-2-0-maven-compile-problem)

## *编辑新的 GWT 版本*

**GWT 2.5.1**已经发布，还要注意**gwt-maven-plugin**是**2.5.0**（比 GWT 落后 1 步 :)

# objective-c - Apple iTunesConnect 是否只允许在 iTunes 中使用纵向屏幕截图的横向应用程序？

> ID：15337135
> 
> 赞同：0
> 
> 时间：2013-03-11T11:11:52.713
> 
> 标签：objective-c, iphone, xcode

我们已经创建了只有横向模式的 iPhone 游戏，但我们的设计师创建的屏幕截图是纵向模式。苹果 iTunes 连接是否允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:21:46.400

如果图片在图片和应用中共享相同的内容，您的应用不会被拒绝。图片的方向无关紧要，只要苹果一切正常。最坏的情况（我非常怀疑）他们会要求您上传新照片。

# javascript - 无法在模态中打开 ShareThis 的 Facebook“分享此”按钮

> ID：15337137
> 
> 赞同：7
> 
> 时间：2013-03-11T11:11:55.967
> 
> 标签：javascript, facebook, sharethis

我刚刚在我的网站上实现了 ShareThis 的 Facebook 分享按钮，我可以很好地分享，但是，我想在模式（弹出）中打开确认对话框，而不是每次都在新标签中打开。

我查看了 ShareThis 的文档，[这里](http://support.sharethis.com/customer/portal/articles/475019-open-widget-in-new-window-)指出我只需要`popup: 'true'`在初始化时传入参数，我已经完成了，但它没有任何效果，任何时候按下按钮都会在新选项卡中打开。

控制台中没有抛出任何错误，并且共享功能工作正常，我错过了什么吗？

这是我的代码：

```
<script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">
    //init
    stLight.options({popup:'true', publisher: "abcdef-1234-1234-1234-1234abcdef1234", doNotHash: false, doNotCopy: false, hashAddressBar: false});

    //create widget
    stWidget.addEntry({"service":"facebook", "element":document.getElementById('fb_share_button'), "url":"http://www.site.com/link/to/share/" , "title":"Title", "type":"hcount" });
</script>

<span st_url="<!-- url is assigned dynamically -->" class='st_facebook_hcount' displaytext='Facebook' id="fb_share_button"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T13:35:46.490

只是一个想法...您已将弹出窗口设置为“真”而不是“真”。带有单引号的 'true' 使其成为拼写为 'true' 的字符串，如果 ShareThis 正在检查变量类型，它可能无法将其识别为有效值。尝试删除“true”周围的引号。

顺便说一句，我在[gifMusic.com](http://gifmusic.com)上遇到了同样的问题。我也必须尝试一下弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:53:31.503

也许您有一些代码强制所有链接在新窗口中打开，尝试在 js fiddle 或测试页面中实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T10:44:31.517

要使用`popup: true`执行共享操作的用户（或任何其他显示窗口的 F​​acebook 插件），应该已经授权您的应用程序。

否则它将始终在新窗口中打开。

# c# - 在列表列表中编辑一个列表以及其他列表

> ID：15337138
> 
> 赞同：0
> 
> 时间：2013-03-11T11:11:58.557
> 
> 标签：c#, list

我得到一个 SQL 响应并将其记录到列表列表中，代表结果表。之后，我需要例如在第一个“列”（我的列表列表中的第一个列表）中的不同值。如何将所有其他列表与第一个列表联系起来，以便所有“行”保持一致并通过索引号以某种方式连接？列数（列表）是可变的。

这是我用来从 SQL 响应中获取数据的代码：

```
List<List<string>> response = new List<List<string>>();
int colNum = 0;

using (OracleCommand comm = new OracleCommand(query, con))
{
    using (OracleDataReader rdr = comm.ExecuteReader()) // execute the oracle sql and start reading it
    {
        while (rdr.Read())
        {
            if (response.Count == 0)
            {
                while (rdr.GetOracleValue(colNum) != null)
                {
                    response.Add(new List<string>());
                    colNum++;
                }
            }
                for (int c = 0; c < colNum; c++)
                {
                    if (rdr.GetOracleValue(c).ToString() == "Oracle.DataAccess.Types.OracleClob")
                    {
                        response[c].AddRange(report.getPropertiesByName(rdr.GetOracleValue(c), "Value", false, false).Select(p => p.ToString()));
                    }
                    else
                    {
                        response[c].Add(rdr.GetOracleValue(c).ToString());
                    }
            }
        }
        rdr.Close();
    }
}
return response; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:50:11.757

看看[`OracleDataAdapter`](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracledataadapter.aspx)。我不太确定这种语法是否正确，但它应该可以帮助您入门。

```
var response = new DataSet();

using (OracleCommand command = new OracleCommand(query, con))
{
    var dataAdapter = new OracleDataAdapter(command);
    dataAdapter.Fill(response); 
}

return response; 
```

# c# - 当 IsOneWay = true 时，HttpContext.Current.User 为空

> ID：15337139
> 
> 赞同：0
> 
> 时间：2013-03-11T11:12:00.473
> 
> 标签：c#, .net-4.0, forms-authentication, isoneway

我有 wcf 服务。有些是一种方式，有些不是。那些不是使用表单身份验证的一种方式，我得到 HttpContext.Current.User。那些是一种方式在 HttpContext.Current.User 中获得空值。

怎么修？

我正在使用 ASP.NET 兼容模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:18:13.390

通过[HttpContext.Current 在我的网络服务中为空](https://stackoverflow.com/a/8976797/266143)：

> [WCF 服务和 ASP.NET](http://msdn.microsoft.com/en-us/library/aa702682.aspx)
> 
> 在 AppDomain 中，由 HTTP 运行时实现的功能适用于 ASP.NET 内容，但不适用于 WCF。ASP.NET 应用程序平台的许多 HTTP 特定功能不适用于托管在包含 ASP.NET 内容的 AppDomain 内的 WCF 服务。这些功能的示例包括：
> 
> `HttpContext`:`Current`从 WCF 服务中访问时始终为空。改为使用`RequestContext`。
> 
> [...]
> 
> HttpContext：在 ASP.NET 兼容模式下运行的 WCF 服务可以访问 Current 及其关联状态。

# php - 简单的 $HTTP_POST_FILES 和 $_FILES 都不起作用 - PHP

> ID：15337142
> 
> 赞同：-2
> 
> 时间：2013-03-11T11:12:04.610
> 
> 标签：php

我已经多次上传文件，但不知道为什么这不起作用。在上传之前尝试做一个文件 desc 但 $HTTP_POST_FILES 和 $_FILES 似乎都不起作用。

```
 echo "Upload: " . $HTTP_POST_FILES["profilefilepic"]["name"] . "<br>";
  echo "Type: " . $HTTP_POST_FILES["profilefilepic"]["type"] . "<br>";
  echo "Size: " . ($HTTP_POST_FILES["profilefilepic"]["size"] / 1024) . " kB<br>";
  echo "Stored in: " . $HTTP_POST_FILES["profilefilepic"]["tmp_name"];

<form method="post" action="">
<input type="submit" name="changeorder" id="changeorder" value="Upload">
<input type="file" name="datafile" size="40" id="profilefilepic" name="profilefilepic">
<input type="hidden" name="profilefilepicname" id="profilefilepicname" value="">
</form> 
```

这里有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:13:20.470

添加`enctype`到您的表单

```
<form method="post" action="" enctype="multipart/form-data"> 
```

仅对输入文件类型使用一个`name`属性，例如：

```
<input type="file" name="profilefilepic" size="40" id="profilefilepic" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:17:01.713

您在输入中有 2 个“名称”属性，而您的表单中`file`缺少2 个“名称”属性。`enctype`

```
<form method="post" enctype="multipart/form-data">
<input type="file" id="profilefilepic" name="profilefilepic"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:20:55.000

两件丢失的东西

1.  `<input type="file" id="profilefilepic" name="profilefilepic">`
2.  `<form method="post" action="" enctype="multipart/form-data">`

谢谢

Sudhir 和 Proreborn

# abap - 变量的动态数据类型

> ID：15337144
> 
> 赞同：0
> 
> 时间：2013-03-11T11:12:08.760
> 
> 标签：abap

通常，我们将表字段声明为如下数据类型：

> 数据键类型 vbak-vbeln。

但是，我想在声明中动态地给出字段名称，如下所示：

> 数据键类型 vbak-**字段**名。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:44:04.963

如果您使用任何类型的字段符号，您可以很容易地做到这一点。

然后，它很简单：

```
DATA: lt_line type vbak.
Field-Symbols: <dat> type any.

Assign component (fieldname) of Structure lt_line to <dat>. 
```

如果您提供有关您正在尝试做的事情的更多信息，也许我可以提供更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:53:04.590

在我的情况下，表名和字段名都是未知的。所以这是我的最终解决方案。

```
DATA: T_REF TYPE REF TO DATA,
      TAB(20) TYPE c VALUE 'VBAP',
      TAB_COMP(20) TYPE c VALUE 'WERKS'.

FIELD-SYMBOLS: <T> TYPE ANY,
               <COMP> TYPE ANY.

CREATE DATA T_REF TYPE (TAB).
ASSIGN T_REF->* TO <T>.
ASSIGN COMPONENT TAB_COMP OF STRUCTURE <T> TO <COMP>.

SELECT WERKS FROM VBAP INTO <COMP> UP TO 5 ROWS.
    WRITE: / <COMP>.
ENDSELECT. 
```

# iphone - iPhone上的bigcommerce api

> ID：15337147
> 
> 赞同：0
> 
> 时间：2013-03-11T11:12:12.257
> 
> 标签：iphone

我在 iphone 中使用 bigcommerce api 从中获取数据，所以我在 xml 解析的帮助下执行此操作，但要获取它要求登录 bigcommerce 网站的订单列表，然后在有人帮助我的情况下解析数据那么我将非常感激，请通过xml解析告诉我我们如何发送登录凭据然后点击url来解析数据.....

谢谢你

我正在写这段代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
// Add the navigation controller's view to the window and display.
[self.window addSubview:navigationController.view];
[self.window makeKeyAndVisible];

// Override point for customization after application launch.
NSString *string=[NSString stringWithFormat:@"https://www.labradorhometraining.com/api/v2"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:string]];

//    NSString *dataString = [NSString stringWithFormat:@"{\"screenName\":\"%@\",\"password\":\"%@\",\"pushToken\":\"%@\",\"deviceType\":\"%@\"}", Screentxtf.text,passtxtf.text,  str, deviceType];

[request setRequestMethod:@"GET"];
[request appendPostData:[string dataUsingEncoding:NSUTF8StringEncoding]];
// Basic YWRtaW46cGFzc3dvcmQ=
 [request addRequestHeader:@"Content-Type" value:@"application/xml"];
[request addRequestHeader:@"Authorization: Basic ZGVtb2tleTpkZW1vdG9rZW4= " value:[NSString stringWithFormat:@"%@ %@",@"api", @"c275ab4076f87"]];
[request setUseSessionPersistence:NO];
[request setUseCookiePersistence:NO];
[request setCacheStoragePolicy:ASICacheForSessionDurationCacheStoragePolicy];
[request setDelegate:self];
[request startAsynchronous];
return YES;
} 
```

这是在根视图控制器中

```
-(void)gototselect{
NSString *string=[NSString stringWithFormat:@"https://www.labradorhometraining.com/api/v2/orders.xml"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:string]];

//    NSString *dataString = [NSString stringWithFormat:@"{\"screenName\":\"%@\",\"password\":\"%@\",\"pushToken\":\"%@\",\"deviceType\":\"%@\"}", Screentxtf.text,passtxtf.text,  str, deviceType];

[request setRequestMethod:@"PUT"];
//    [request appendPostData:[string dataUsingEncoding:NSUTF8StringEncoding]];
[request addRequestHeader:@"Authorization" value:[NSString stringWithFormat:@"%@ %@",@"api", @"c2714076f87"]];
[request allowCompressedResponse];
[request setUseSessionPersistence:NO];
[request setUseCookiePersistence:NO];
[request setCacheStoragePolicy:ASICacheForSessionDurationCacheStoragePolicy];
[request setDelegate:self];
[request startAsynchronous];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:29:17.703

我对 ASIHTTPRequest API 一无所知，而且我的职业生涯也从未使用过它。但是使用普通的objective-C，我分享了一些关于如何验证http请求的代码，

```
// Setup NSURLConnection
NSURL *URL = [NSURL URLWithString:url];
 NSURLRequest *request = [NSURLRequest requestWithURL:URL
                                     cachePolicy:NSURLRequestUseProtocolCachePolicy
                                 timeoutInterval:30.0];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start];
[connection release];

// NSURLConnection Delegates
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
if ([challenge previousFailureCount] == 0) {
    NSLog(@"received authentication challenge");
    NSURLCredential *newCredential = [NSURLCredential credentialWithUser:@"USER"
                                                                password:@"PASSWORD"
                                                             persistence:NSURLCredentialPersistenceForSession];
    NSLog(@"credential created");
    [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
    NSLog(@"responded to authentication challenge");    
}
else {
    NSLog(@"previous authentication failure");
}
}

 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response {
...
}

 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
...
}

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
...
 }

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
...
} 
```

[我从iOS 中的 NSURLConnection 和 Basic HTTP Authentication](https://stackoverflow.com/questions/1973325/nsurlconnection-and-basic-http-authentication)这个链接复制了上面的代码。另外，我想与您分享更多链接。请参阅苹果文档以获取 HTTP 请求[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html) 而这篇文章[http://www.cocoanetics.com/2010/12 /nsurlconnection-with-self-signed-certificates/](http://www.cocoanetics.com/2010/12/nsurlconnection-with-self-signed-certificates/) .. 你会得到很多关于这项工作的信息和策略。

# php - AJAX：检测连接关闭，PHP 继续

> ID：15337151
> 
> 赞同：3
> 
> 时间：2013-03-11T11:12:24.750
> 
> 标签：php, jquery, iis-7.5

**情况**：用户通过 AJAX 上传了许多照片，然后继续与网站交互，同时 PHP 脚本继续在后台运行并根据上传的照片生成各种缩略图。

站点配置：

1.  jQuery AJAX (v1.9.1)
2.  PHP 5.4.7，FastCGI 模式
3.  **IIS 7.5，带有 gzip**

我之前提到并尝试实施的帖子（但无济于事）：

*   [使用 PHP 提前关闭连接](https://stackoverflow.com/questions/7650602/closing-a-connection-early-with-php)
*   [PHP：输出完成后继续](https://stackoverflow.com/questions/11257542/php-continue-after-output-is-complete)
*   [发送 AJAX 结果但在 PHP 中继续处理](https://stackoverflow.com/questions/4511603/send-ajax-results-but-continue-processing-in-php)
*   [尽早关闭连接](https://stackoverflow.com/questions/138374/close-a-connection-early)
*   [使用 IIS 禁用单个 php 文件的 Gzip 压缩](https://stackoverflow.com/questions/6653940/disable-gzip-compression-for-single-php-file-with-iis)
*   [http://www.php.net/manual/en/features.connection-handling.php#71172](http://www.php.net/manual/en/features.connection-handling.php#71172)

根据之前的帖子，我已经尝试了大量的脚本选项，但是似乎没有一个告诉 AJAX 脚本让用户继续，而 PHP 继续处理......

示例 PHP 代码：

```
<?php
   // Save images to db, etc

   // Now tell AJAX to let the user continue, before generating thumbnails
   if(ini_get('zlib.output_compression')) { 
       ini_set('zlib.output_compression', 'Off'); // turn IIS gzip for this file
   }
   ob_end_clean();
   header("Connection: close");
   header("Content-Encoding: none"); //ensures gzip is not sent through
   ob_start();
      echo '123'; // 3 digit number will be sent back to AJAX
   $size = ob_get_length(); // should mean Content-Length = 3
   header("Content-Length: $size");
   ob_end_flush(); 
   flush(); 
   ob_end_clean();

   // Generate thumbnails, etc
?> 
```

示例 jQuery AJAX 代码：

```
$.ajax({
        type: 'POST',
        url: ajax_url,
        data: { foo: bar },
        beforeSend:function(){
            // 
        },
        success:function(data){
            alert(data); // Only seems to be firing once the thumbnails have been generated.
        }
    }); 
```

响应标头似乎还可以...

![Firebug 检测到的 POST 响应标头](../Images/8b989589e9760139f00c2d237709ebc0.png)

**问题**：如何让 AJAX 允许用户在从 PHP 脚本中间收到代码后继续，而 PHP 脚本继续生成缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:24:00.877

If you run request, it will always wait until PHP Script finish executing, or there will be a timeout. So you cannot stop AJAX in middle, and keep PHP running. If you want to upload files, and then create thumbnails, but have info that files are uploaded, do it in two steps:

1.  upload files with AJAX -> return success
2.  run another AJAX request on success to get uploaded images (or thumbs in fact).

Thanks to that, thumbs can be also rendered later, when they are first time requested (even without ajax). If you don't want requesting and waiting for thumbs, use cron job on server, which will create thumbs for awaiting images.

# c# - C# 最小化到托盘

> ID：15337152
> 
> 赞同：2
> 
> 时间：2013-03-11T11:12:34.413
> 
> 标签：c#, minimize, trayicon

我知道您会想“不再是这个问题”，因为我在搜索时发现了一百个结果。但是，当我按照此处页面上的描述输入代码时，它只会最小化到开始菜单的正上方。

这是我使用的代码（我添加了一个消息框来查看代码是否被触发，但消息框永远不会弹出）：

```
private void Form1_Resize(object sender, EventArgs e)
{
    MessageBox.Show("Works1");
    if (WindowState == FormWindowState.Minimized)
    {
        this.Hide();
    }
} 
```

因为我不知道它是否链接到`Form1`or `Form`，所以我都尝试过，但无济于事。

```
private void Form_Resize(object sender, EventArgs e)
{
    MessageBox.Show("Works");
    if (WindowState == FormWindowState.Minimized)
    {
        this.Hide();
    }
} 
```

现在，当您双击 时`Form`，它会将这一行放入`Form1.Designer.cs`：

```
this.Load += new System.EventHandler(this.Form1_Load); 
```

我需要一条类似的线来触发最小化事件吗？

如您所见，我完全迷路了:)

哦，它不会最小化到任务栏，因为我使用以下代码在运行时隐藏表单：

```
protected override void OnLoad(EventArgs e)
{
    Visible = false; // Hide form window.
    ShowInTaskbar = false; // Remove from taskbar.
    base.OnLoad(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:18:28.790

你需要活动

```
private void Form1_Resize(object sender, EventArgs e)
{

} 
```

[在 Windows 窗体设计器上创建事件处理程序](http://msdn.microsoft.com/en-us/library/aa984320%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:34:23.920

1.  将[`NotifyIcon`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.notifyicon.aspx)组件添加到您的表单。确保通过属性窗格设置图标，否则它将不可见。
2.  为表单的事件创建一个事件处理程序[`Control.SizeChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.sizechanged%28v=vs.80%29.aspx)。在该事件处理程序中放置以下代码：

示例代码：

```
private void MainForm_SizeChanged(object sender, EventArgs e)
{
    if (WindowState == FormWindowState.Minimized)
        ShowInTaskbar = false;
} 
```

然后为了使表单再次可见[`NotifyIcon.MouseDoubleClick`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.notifyicon.mousedoubleclick.aspx)事件处理程序，您可以放置​​以下代码：

```
private void trayIcon_MouseDoubleClick(object sender, MouseEventArgs e)
{
    WindowState = FormWindowState.Normal;
    ShowInTaskbar = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:44:40.213

您需要了解的基本内容是**事件**。当您的表单（或任何控件）发生某些事情时会触发事件。例如，当窗体调整大小、加载或单击时，会引发一个*事件*。您可以挂钩此事件以在事件发生时执行您自己的代码。

在您的情况下，您希望在调整表单大小的情况下执行代码以最小化表单。因此，您需要将您的方法与 resize 事件挂钩。您的方法的名称不相关，因此让我们使用更好的名称：

```
private void HideWhenMinimized(object sender, EventArgs e)
{
    MessageBox.Show("Works1");
    if (WindowState == FormWindowState.Minimized)
    {
        this.Hide();
    }
} 
```

`HideWhenMinimized`要将您的方法挂钩到`Resize`表单的事件中，您必须这样做：

```
this.Resize += new System.EventHandler(this.HideWhenMinimized); 
```

如果您在表单的构造函数或事件中添加该行代码`Load`，那么只要调整表单大小，您的代码就会被调用。

# android - 如何在自定义列表视图中设置 OnitemClick

> ID：15337153
> 
> 赞同：0
> 
> 时间：2013-03-11T11:12:34.657
> 
> 标签：android, android-listview, listadapter, onitemclicklistener

我使用扩展基本适配器的列表视图适配器创建了一个列表视图。

它工作正常。但是我需要将 onitemClick 侦听器添加到 listview，当我单击一个列表项时，它会与 listitem 一起转到另一个活动。我们该怎么做？

这是我在 listview 适配器中的代码

```
public class listviewAdapter extends BaseAdapter{
    String FIRST_COLUMN = Constant.FIRST_COLUMN;
    String SECOND_COLUMN = Constant.SECOND_COLUMN;
    String THIRD_COLUMN = Constant.THIRD_COLUMN;
    String FOURTH_COLUMN = Constant.FOURTH_COLUMN;
    public ArrayList<HashMap<String,String>> list;
    Activity activity;

    public listviewAdapter(Activity activity, ArrayList<HashMap<String,String>> list) {
    super();
    this.activity = activity;
    this.list = list;
    }

    @Override
    public int getCount() {
    // TODO Auto-generated method stub
    return list.size();
    }

    @Override
    public Object getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
    }

    @Override
    public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
    }

    private class ViewHolder {
       TextView txtFirst;
       TextView txtSecond;
       TextView txtThird;
       TextView txtFourth;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi=convertView;
    // TODO Auto-generated method stub
            ViewHolder holder;
            LayoutInflater inflater =  activity.getLayoutInflater();

            if (convertView == null)
            {
                convertView = inflater.inflate(R.layout.requestcard_columnsdetails, null);
                holder = new ViewHolder();

                holder.txtFirst = (TextView) convertView.findViewById(R.id.date);
                holder.txtSecond = (TextView) convertView.findViewById(R.id.from);
                holder.txtThird = (TextView) convertView.findViewById(R.id.to);
                holder.txtFourth = (TextView) convertView.findViewById(R.id.time);
                convertView.setTag(holder);
            }
            else
            {
                holder = (ViewHolder) convertView.getTag();
            }

            HashMap<String, String> map = list.get(position);
            holder.txtFirst.setText(map.get(FIRST_COLUMN));
            holder.txtSecond.setText(map.get(SECOND_COLUMN));
            holder.txtThird.setText(map.get(THIRD_COLUMN));
            holder.txtFourth.setText(map.get(FOURTH_COLUMN));

        return convertView;
    }
} 
```

我在主要活动中填充了列表项，使用

```
int a,b;
list = new ArrayList<HashMap<String,String>>();
for ( a=0; a<outputString.length;a++){
    HashMap<String,String> temp1 = new  HashMap<String,String>();
    temp1.put( FIRST_COLUMN,outputString[a][0]);
    temp1.put(SECOND_COLUMN, outputString[a][1]);
    temp1.put(THIRD_COLUMN, outputString[a][4]);
    temp1.put(FOURTH_COLUMN, outputString[a][5]);
    list.add(temp1);
}
listviewAdapter adapter = new listviewAdapter(this, list);
lview.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:16:34.537

在您的列表视图中创建您的 onItemClickListener，如下所示：

```
lview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView parent, View view,
                    int position, long id) {
     Intent intent = new intent(mainactivity.this, target.class);
     // maybe put some extra arguments to the intent 
     startActivity(intent);

            }
        }); 
```

要将您的额外数据放入下一个活动，请使用您的意图： [Intent doc](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:17:30.920

使用`setOnItemClickListener`：

```
lview.setOnItemClickListener(new OnItemClickListener() {

   public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

       Intent intent = new Intent(Activity.this, secondActivity.class);
    startActivity(intent);
   }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:20:20.353

试试这个：

```
list_view.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3)
        {

         Intent myIntent = new Intent(Current_Activity.this,Next_Activity.class);
         startActivity(myIntent);
}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T11:21:17.207

> 连同列表项

如果您想从 ListItem 中获取一些数据，只需`parent.getItemAtPosition(position)`在已经提到的侦听器中使用。这将返回一个对应`Object`的，您可以使用它执行进一步的操作

```
 HashMap<String, String> map = (HashMap<String, String>) parent.getItemAtPosition(position);
  String one = map.get("key");
  String two = map.get("key2");

  Intent next = new Intent(FirstActivity.this, NextActivity.class);
  next.putExtra("One", one);
  next.putExtra("Two", two);
  startActivity(next); 
```

在您的第二个活动中获取它：

```
 Bundle extras = getIntent().getExtras();
 String one = extras.getStringExtra("One");
 String two = extras.getStringExtra("Two"); 
```

# mysql - Mysql加入时间值范围（无确切关系）

> ID：15337155
> 
> 赞同：1
> 
> 时间：2013-03-11T11:12:36.300
> 
> 标签：mysql, performance, join, range

我正在评估一个研究项目的日志文件并将它们插入 MySQL 数据库。现在我有一个查询，我需要在没有完全匹配值的情况下连接来自其他表的数据。

“logdata”表包含我要分析的移动单元的数据，“basepositions”保存基站的 GPS 坐标。在“logdata”的两个数据字段中，记录了相应基站的发送方位置。存在的问题是：基站的位置会随着时间的推移略有变化（GPS 波动，只是一些度数），所以我必须使用 BETWEEN 操作来寻找正确的条目，如下面的查询所示。这并不完美，但基站只有100个左右，所以这里的成本是可以忍受的。

第二个连接也存在同样的问题。在那里我必须从另一个表中获取一个有效性标志。这里的问题是：两个日志大约每秒写入一次，但不同步。所以我必须再次使用 BETWEEN 和 1 秒的时间范围扫描相应的行。

由于行数的原因，第二次扫描让我的执行时间爆炸式增长。我认为扩散相关是这里的问题。

这两个表都有下面概述中给出的索引。

有没有办法加快查询速度？由于性能问题，我的数据库设置现在需要 30 小时才能完成，才能返回大约 20000 行。

我很感激任何帮助。

日志数据（约 300.000.000 个条目）：

```
+-----------+---------------------+------+-----+---------+----------------+
| Field     | Type                | Null | Key | Default | Extra          |
+-----------+---------------------+------+-----+---------+----------------+
| id        | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| unit      | tinytext            | YES  | MUL | NULL    |                |
| timestamp | bigint(20)          | YES  |     | NULL    |                |
| logid     | int(11)             | YES  |     | NULL    |                |
| d1        | bigint(20)          | YES  |     | NULL    |                |
| d2        | bigint(20)          | YES  |     | NULL    |                |
| d3        | bigint(20)          | YES  |     | NULL    |                |
| d4        | bigint(20)          | YES  |     | NULL    |                |
| d5        | bigint(20)          | YES  |     | NULL    |                |
| d6        | bigint(20)          | YES  |     | NULL    |                |
| d7        | bigint(20)          | YES  |     | NULL    |                |
| d8        | bigint(20)          | YES  |     | NULL    |                |
| d9        | bigint(20)          | YES  |     | NULL    |                |
| d10       | bigint(20)          | YES  |     | NULL    |                |
+-----------+---------------------+------+-----+---------+----------------+ 
```

基本位置（约 100 个条目）：

```
+----------------------------+--------------+------+-----+---------+-------+
| Field                      | Type         | Null | Key | Default | Extra |
+----------------------------+--------------+------+-----+---------+-------+
| ID                         | int(11)      | NO   | PRI | NULL    |       |
| GPSLONGITUDE               | varchar(50)  | YES  |     | NULL    |       |
| LOCATION                   | varchar(100) | YES  |     | NULL    |       |
| GPSLATITUDE                | varchar(50)  | YES  |     | NULL    |       |
| GPSALTITUDE                | varchar(50)  | YES  |     | NULL    |       |
| ISUNDERTEST                | tinyint(1)   | YES  |     | 0       |       |
+----------------------------+--------------+------+-----+---------+-------+ 
```

有效性（约 200.000.000 个条目）：

```
+-----------+---------------------+------+-----+---------+----------------+
| Field     | Type                | Null | Key | Default | Extra          |
+-----------+---------------------+------+-----+---------+----------------+
| id        | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| unit      | tinytext            | YES  | MUL | NULL    |                |
| timestamp | bigint(20)          | YES  |     | NULL    |                |
| logid     | int(11)             | YES  |     | NULL    |                |
| d1        | bigint(20)          | YES  |     | NULL    |                |
+-----------+---------------------+------+-----+---------+----------------+ 
```

到目前为止我的查询：

```
SELECT
    logdata.unit,
    logdata.timestamp,
    logdata.d1,
    logdata.d2,
    cast(logdata.d3/10000000 as decimal(15, 10)),
    cast(logdata.d4/10000000 as decimal(15, 10)),
    logdata.d5,
    logdata.d6,
    logdata.d7,
    logdata.d8,
    cast(logdata.d9/10000000 as decimal(15, 10)),
    cast(logdata.d10/10000000 as decimal(15, 10)),
    BASEID,
    validity.d1
FROM
    logdata
JOIN
    basepositions
ON
    cast(GPSLATITUDE / 10000000 as decimal(15,10)) BETWEEN cast(d3 / 10000000 as decimal(15,10)) - 0.0001 AND cast(d3 / 10000000 as decimal(15,10)) + 0.0001
    AND
    cast(GPSLONGITUDE / 10000000 as decimal(15,10)) BETWEEN cast(d4 / 10000000 as decimal(15,10)) - 0.0001 AND cast(d4 / 10000000 as decimal(15,10)) + 0.0001
JOIN
    validity
ON
    validity.unit = logdata.unit 
    AND
    validity.logid = 12345
    AND
    validity.timestamp BETWEEN logdata.timestamp - 500 AND logdata.timestamp + 499

WHERE
    logdata.unit = "IVS${IVS}"
    AND
    logdata.logid = 111222
    AND 
    BASEID = 012; 
```

指数：

```
+-------------------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table             | Non_unique | Key_name             | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-------------------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| logdata           |          0 | PRIMARY              |            1 | id          | A         |   301433830 |     NULL | NULL   |      | BTREE      |         |               |
| logdata           |          1 | unit_logid_timestamp |            1 | unit        | A         |          18 |        6 | NULL   | YES  | BTREE      |         |               |
| logdata           |          1 | unit_logid_timestamp |            2 | logid       | A         |          18 |     NULL | NULL   | YES  | BTREE      |         |               |
| logdata           |          1 | unit_logid_timestamp |            3 | timestamp   | A         |   301433830 |     NULL | NULL   | YES  | BTREE      |         |               |
+-------------------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

**编辑（评论字段很小）：** 我认为问题在于构建的连接。EXPLAIN EXTENDED 显示，查询优化器正在将所有三个表连接在一起，这意味着要查看 300.000.000 * 200.000.000 * 100 行。当我将带有“有效性”的连接重写为子查询时，mysql 只是连接“logdata”和“basepositions”。我认为数据类型更改可能是以后优化的一个因素，但首先我认为我必须通过优化查询计划来降低一些运行时类。我没有足够的经验知道我可以做些什么来进一步优化这个查询。对“有效性”时间戳的单个查询将立即返回。基站位置的单次查询也非常快。我不

**编辑2：**

这是您要求的 idex。我让他们使用“显示索引”

“有效性”的索引：

```
+-------------------------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table                   | Non_unique | Key_name             | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-------------------------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| validity                |          0 | PRIMARY              |            1 | id          | A         |   194863653 |     NULL | NULL   |      | BTREE      |         |               |
| validity                |          1 | unit_logid_timestamp |            1 | unit        | A         |          18 |        6 | NULL   | YES  | BTREE      |         |               |
| validity                |          1 | unit_logid_timestamp |            2 | logid       | A         |          18 |     NULL | NULL   | YES  | BTREE      |         |               |
| validity                |          1 | unit_logid_timestamp |            3 | timestamp   | A         |   194863653 |     NULL | NULL   | YES  | BTREE      |         |               |
+-------------------------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

“基本位置”的索引：

```
+----------------------+------------+---------------------------------------+--------------+----------------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table                | Non_unique | Key_name                              | Seq_in_index | Column_name                | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------------------+------------+---------------------------------------+--------------+----------------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| basepositions        |          0 | PRIMARY                               |            1 | ID                         | A         |         109 |     NULL | NULL   |      | BTREE      |         |               |
+----------------------+------------+---------------------------------------+--------------+----------------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

解释上面的查询：

```
id      select_type     table           type    possible_keys           key                     key_len     ref         rows        filtered    Extra
1       SIMPLE          basepositions   const   PRIMARY                 PRIMARY                 4           const       1           100.00  
1       SIMPLE          logdata         ref     unit_logid_timestamp    unit_logid_timestamp    14          const,const 4150932     100.00      Using where
1       SIMPLE          validity        ref     unit_logid_timestamp    unit_logid_timestamp    14          const,const 3294136     100.00      Using where 
```

解释（在为纬度/经度添加索引之后）：

```
id      select_type     table         type    possible_keys            key                     key_len  ref             rows    filtered    Extra
1       SIMPLE          basepositions const   PRIMARY,lat_lon,lat,lon  PRIMARY                 4        const           1       100.00
1       SIMPLE          logdata       ref     unit_logid_timestamp     unit_logid_timestamp    14       const,const     4150932 100.00      Using where
1       SIMPLE          validity      ref     unit_logid_timestamp     unit_logid_timestamp    14       const,const     3294136 100.00      Using where 
```

# javascript - 跨域 AJAX 调用？

> ID：15337156
> 
> 赞同：0
> 
> 时间：2013-03-11T11:12:38.477
> 
> 标签：javascript, cross-domain, jsonp

```
$.ajax({

      url: 'https://XXXXX.desktop.XXXX.com:9011/iws-merchant/XXXXX.htm',
      dataType: "jsonp",
      success: function (response) {
       str=response;

      },
      error: function( response ) {
          alert( "ERROR:  " + JSON.stringify );
       }
   }); 
```

它总是在错误块中。我正在对不同的 PORT（相同域）进行 AJAX 调用。

但是当我尝试在新标签中点击相同的 URL 时。我能够看到响应。

任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:24:11.143

you can use JSONP as Gaurav Agrawal suggested OR you can enable the Access-Control-Allow-Origin for the site who receives ajax request.

Ajax works like this: Same domain but different port = different domain

if you are using asp.net on your ajax target server you can enable access control adding this in web.config:

```
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
    </httpProtocol>
<system.webServer> 
```

and do yourself a favor and replace "*" with your site url!

in some situation you can need even those keys, just google every function before adding it!

```
<add name="Access-Control-Allow-Headers" value="*" />
<add name="Access-Control-Allow-Methods" value="*" />
<add name="Access-Control-Allow-Credentials" value="true" />
<add name="Access-Control-Expose-Headers" value="*"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:17:27.853

您不能使用 JSON 进行跨域 AJAX 调用。您需要使用 JSONP。因此，不要从控制器操作返回常规 JsonResult，而是编写一个自定义操作结果，它将 JSON 包装在作为参数传递的回调中：

```
public class JsonpResult : ActionResult
{
    private readonly object _obj;

    public JsonpResult(object obj)
    {
        _obj = obj;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var serializer = new JavaScriptSerializer();
        var callbackname = context.HttpContext.Request["callback"];
        var jsonp = string.Format("{0}({1})", callbackname, serializer.Serialize(_obj));
        var response = context.HttpContext.Response;
        response.ContentType = "application/json";
        response.Write(jsonp);
    }
} 
```

然后让您的控制器操作返回此自定义操作结果：

```
public ActionResult SomeAction()
{
    var result = new[]
    {
        new { Id = 1, Name = "item 1" },
        new { Id = 2, Name = "item 2" },
        new { Id = 3, Name = "item 3" },
    };
    return new JsonpResult(balances);
} 
```

现在您可以跨域使用此操作：

```
var url = "http://example.com/SomeController/SomeAction/";
$.getJSON(url + '?callback=?', function (data) {
    alert(data);
}); 
```

# oop - 找出哪些超类包含属性或方法实现

> ID：15337158
> 
> 赞同：4
> 
> 时间：2013-03-11T11:12:46.393
> 
> 标签：oop, matlab

如果我正确记录了一个方法或属性，我可以通过键入 找到它的定义位置`help class/method`，它会告诉我`Help for class/method is inherited from superclass otherclass`。通常，这意味着那里也有一个方法定义，但不一定（我可能实现了一个抽象方法而不重新记录它）。

在一般情况下，我如何找出哪些超类定义了特定的属性或方法？

我想知道，因为我正在重构我的代码。

注意：我正在使用`classdef`-files 并且我所有的类都是`handle`类，如果它是相关的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:40:50.337

使用该`?`字符，您可以找到有关您的班级的元数据：`lst = ?yourClass`

在`lst.PropertyList(1).DefiningClass`您将找到索引 1 上的属性的来源。

在`lst.MethodList(1).DefiningClass`您将找到索引 1 上的方法的来源。

# windows-7 - gcc 不兼容 64 位？

> ID：15337160
> 
> 赞同：1
> 
> 时间：2013-03-11T11:12:47.683
> 
> 标签：windows-7, cygwin, 64-bit

我安装了 cygwin 并将路径设置为 C:\cygwin\bin，但是当我在命令行中运行 gcc 时，它显示错误如下： ![在此处输入图像描述](../Images/5a7f28d97702f224d59ee0ab0c71497c.png)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:45:07.747

问题是 gcc.exe 是 gcc-3.exe 或 gcc-4.exe 的符号链接。Cygwin 理解符号链接（因此从 cygwin shell 调用 gcc 将起作用），但 windows cmd.exe 不能。

我刚刚将 gcc-4.exe 复制到 gcc.exe，现在一切都很好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T11:15:49.550

我看到 cygwin 有 64 位的安装程序。尝试验证是否不是 32 位。但是，从一些镜像站点重新安装它。

# ruby-on-rails - Railscarrierwave - 无法批量分配受保护的属性错误

> ID：15337169
> 
> 赞同：0
> 
> 时间：2013-03-11T11:13:10.473
> 
> 标签：ruby-on-rails

我正在尝试构建一个示例应用程序，用户可以在其中将两种不同类型的图像上传到名为 Article 的模型。一种图像是文章内容中使用的图像，另一种用作缩略图。这两种类型的图像都由名为 ArticleImage 和 ArticleThumb 的单独多态模型处理。

问题是，每当我尝试上传缩略图时，都会出现“**无法批量保护受保护的属性：:article_thumb** ”错误。其他类型的图像上传*不会*发生此错误。

**文章**

```
class Article < ActiveRecord::Base
  attr_accessible :title, :article_images_attributes, 
                  :article_thumbs_attributes

  has_many :comments, as: :commentable
  has_many :article_images, as: :attachable, dependent: :destroy
  has_many :article_thumbs, as: :attachable, dependent: :destroy

  accepts_nested_attributes_for :article_images, 
                                reject_if: :all_blank,
                                allow_destroy: true
  accepts_nested_attributes_for :article_thumbs, allow_destroy: true

  belongs_to :user

  validates :title, presence: true, length: {maximum: 60}
  validates :user_id, presence: true
  validates :article_images, presence: true
end 
```

**文章图片**

```
class ArticleImage < ActiveRecord::Base
  belongs_to :attachable, polymorphic: true
  attr_accessible :article_image

  mount_uploader :article_image, ArticleImageUploader
end 
```

**文章拇指**

```
class ArticleThumb < ActiveRecord::Base
  belongs_to :attachable, polymorphic: true
  attr_accessible :article_thumb

  mount_uploader :article_thumb, ArticleThumbUploader
end 
```

**新的.html.erb**

```
<%= simple_nested_form_for @article, html: {multipart: true}, 
    defaults: {required: false} do |f| %>

  <%= render 'shared/error_messages', object: @article %>

  <%= f.input :title %>

  <div class = "control-label">
    Image file upload
  </div>
  <%= f.simple_fields_for :article_images do |p| %>
    <%= p.file_field :article_image %>
    <%= p.link_to_remove 'Remove' %>
  <% end %>
  <%= f.link_to_add 'Add image', :article_images %>
  <span class="hint_end">Acceptable file formats: JPG, JPEG, GIF, PNG</span>

  <div class = "control-label">
    Thumbnail upload
  </div>
  <%= f.file_field :article_thumb %>
  <span class="hint">
    Automatically resized to 90x90 px.
  </span>
  <span class="hint">
    Default thumbnail is used if no thumbnail gets uploaded.
  </span>
  <span class="hint_end">
    Acceptable file formats: JPG, JPEG, GIF, PNG
  </span>

  <%= f.submit "Upload article" %>
<% end %> 
```

我觉得这个错误只需要一个非常简单的修复，但我似乎无法弄清楚。任何帮助，将不胜感激。

作为旁注，我想知道将所有不同的上传器安装在一个多态模型中是否有效，这样您就不必在每次要上传不同类型的图像/文件时创建不同的模型。如果您没有太多时间，您当然不需要费心回答这个问题，但欢迎就此事发表任何言论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:36:14.410

首先，你在`ArticleThumb`模型上有一个错字：你应该有`:article_thumb`属性，`attr_accessible`但你有`:atricle_image`。

另一件事是您不包装`<%= f.file_field :article_thumb %>`在一个`simple_fields_for`块中并且`article_thumb`表现得像文章的属性。

# javascript - 如何使页面上的 Javascript 可以使用 MSSQL 查询数据，而无需再次查询数据库？

> ID：15337173
> 
> 赞同：4
> 
> 时间：2013-03-11T11:13:23.373
> 
> 标签：javascript, sql-server, google-maps-api-3, coldfusion

对于我使用 Google Maps API 创建的页面，我需要查询多个标记位置以及有关每个标记的更多信息。我正在使用 ColdFusion 来查询数据库。

我已经绘制出该过程应该如何大致工作

```
 <cfquery datasource="mapInfo" name="markerQuery">
  Select * from locations
 </cfquery>

<cfset arr = ArrayNew(1)>
  <cfoutput query="markerQuery">
    <cfset marker = {#markerid# = 'new google.maps.LatLng(#markerQuery.lat#,#states.lng#)'}>
    <cfset arrayAppend(arr,marker)>
  </cfoutput>

<script type="text/javascript" charset="utf-8">
  var markers = <cfoutput>#serializeJson(arr)#</cfoutput>; 
 </script> 
```

**如何在 Javascript 中保留查询信息，以便在单击标记（或匹配按钮）时将其显示在文本框中？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:17:43.423

您应该做的是循环查询，将记录集中的数据直接输出到 Javascript 数组中。然后在你的 JS 中使用它来循环，创建标记和信息窗口。像这样的东西：

```
<script type="text/javascript">
    var arrMarkers = [];

    <cfoutput query="getData">
        arrMarkers.push({
            lat: #getData.lat#,
            lng: #getData.lng#,
            title: '#JSStringFormat(getData.title)#',
            description: '#JSStringFormat(getData.description)#'
        });
    </cfoutput>

    function initialize() { 
        var latlng, marker;

        var infowindow =  new google.maps.InfoWindow({
            content: ""
        });

        var map = new google.maps.Map(document.getElementById("map"), {
            zoom:               15,
            center:             new google.maps.LatLng(51.532315,-0.1544),
            mapTypeId:          google.maps.MapTypeId.ROADMAP
        });

        for (var i = 0; i < arrMarkers.length; i++) {
            latlng = new google.maps.LatLng(arrMarkers[i].lat, arrMarkers[i].lng);
            marker = new google.maps.Marker({
                position: latlng, 
                map: map, 
                title: arrMarkers[i].title
            });

            bindInfoWindow(marker, map, infowindow, arrMarkers[i].description);
        }
    }

    function bindInfoWindow(marker, map, infowindow, strDescription) {
        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(strDescription);
            infowindow.open(map, marker);
        });
    }
</script> 
```

# html - 如果我使用 FontAwesome 对 SEO 有影响吗？

> ID：15337175
> 
> 赞同：0
> 
> 时间：2013-03-11T11:13:25.587
> 
> 标签：html, css, seo, font-awesome

我这样编码

```
<h1><i class="icon-picture"></i> Pictures</h1> 
```

它显示带有字符串的图片图像`Pictures`

我只是想知道谷歌是否选择了关键字`Pictures`。
因为，`<i class="icon-picture"></i>`是预防。

如果我关心 SEO，应该怎么做

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:15:15.723

> 我只是想知道谷歌是否选择了关键词图片好吗。

是的，它确实。为什么不呢？文本在文档中清晰明了；此外，您甚至可能不使用 CSS 隐藏它，对吧（这也无关紧要）？

> 因为，`<i class="icon-picture"></i>`是预防。

不，谷歌可能会完全忽略这个标签。

> 我应该腾出空间吗？没关系？

搜索引擎不关心空格。保留空间，布局需要它（除非您想为所有图标添加边距，或者您向图标添加另一个 CSS 类以单独控制边距）。

# embedded-linux - PHY未连接！MAC：MII 初始化期间出错

> ID：15337176
> 
> 赞同：0
> 
> 时间：2013-03-11T11:13:31.677
> 
> 标签：embedded-linux, ethernet, u-boot, tftp, arm9

我正在尝试使用“TFTP”服务器和“U-boot”菜单将“rfsNV.gz”和“uImageNV”下载到 ARM 板上。我正在使用由[deramCatcher](http://www.dreamcatcher.asia/cw/)开发的板，Windows 7 上带有“tftp32.exe”的 tftp 服务器、超级终端、跨以太网电缆和 USB 串行电缆。我使用超级终端连接到开发板并最终进入 U-boot 菜单。我将服务器 ip 设置为 192.168.0.123，目标板 ip 设置为 192.168.0.1。然后我启动“tftp32.exe”来设置 TFTP 服务器并在超级终端上写入

```
tftp 20410000 rfsNV.gz 
```

但超级终端回应

```
 PHY not connected!!
    MAC: error during MII initialization
    TFTP from server 192.168.0.123; our IP address is 192.168.0.1
    Filename 'rfsNV.gz'.
    Load address: 0x20410000
    Loading: T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T T
    Retry count exceeded; starting again 
```

这是否意味着我没有正确设置以太网连接？我的本地连接显示 No network access like this [figure](http://i.stack.imgur.com/TRx0J.png)。但是板上的以太网连接 LED 指示电缆已连接。我对嵌入式 Linux 完全陌生，不知道为什么我不能下载板上的文件。谁能弄清楚出了什么问题？

U-boot启动时控制台显示

```
Low Level Init performed

boot 1.0 (Nov 25 2003 - 23:08:05)

Uncompressing image...

U-Boot 2008.10.ARM9(NV) (Aug  6 2009 - 23:52:44)

DRAM:  32 MB
Atmel: AT49BV163D (16Mbit)
Flash:  2 MB
DataFlash:AT45DB161
Nb pages:   4096
Page Size:    528
Size= 2162688 bytes
Logical address: 0xC0000000
Area 0: C0000000 to C0007FFF (RO) ARM9 Bootstrap
Area 1: C0008000 to C001FFFF
Area 2: C0020000 to C0027FFF (RO)
Area 3: C0028000 to C020FFFF
In:    serial
Out:   serial
Err:   serial
Hit any key to stop autoboot:  0
U-Boot> 
```

'mii info' 的输出是：

```
U-Boot> mii info
PHY 0x00: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x01: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x02: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x03: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x04: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x05: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x06: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x07: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x08: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x09: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x0A: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x0B: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x0C: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x0D: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x0E: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x0F: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x10: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x11: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x12: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x13: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x14: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x15: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x16: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x17: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x18: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x19: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x1A: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x1B: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x1C: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x1D: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x1E: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
PHY 0x1F: OUI = 0x0000, Model = 0x00, Rev = 0x00,  10baseT, HDX
U-Boot> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:17:29.063

来自 U-Boot 的唯一显着信息似乎是

```
 PHY not connected!! 
```

以太网 (EMAC) 外围设备恰好集成到您的 Atmel ARM9 SoC 中。
因此，知道 SoC 是 Atmel AT91RM9200，U-Boot 中的以太网驱动程序必须是`cpu/arm920t/at91rm9200/ether.c`，这是生成该警告消息的代码：

```
if (!PhyOps.IsPhyConnected (p_mac))
    printf ("PHY not connected!!\n\r"); 
```

以太网 PHY 外设通常位于 SoC 外部，并通过 MII 或 RMII 总线连接到 EMAC。
Atmel AT91RM9200 参考设计和评估板使用 Davicom DM9161 PHY。
U-Boot 中的 Davicom PHY 驱动程序之一是`cpu/arm920t/at91rm9200/dm9161.c`，并且包含

```
unsigned int dm9161_IsPhyConnected (AT91PS_EMAC p_mac)
{
    unsigned short Id1, Id2;

    at91rm9200_EmacEnableMDIO (p_mac);
    at91rm9200_EmacReadPhy (p_mac, DM9161_PHYID1, &Id1);
    at91rm9200_EmacReadPhy (p_mac, DM9161_PHYID2, &Id2);
    at91rm9200_EmacDisableMDIO (p_mac);

    if ((Id1 == (DM9161_PHYID1_OUI >> 6)) &&
        ((Id2 >> 10) == (DM9161_PHYID1_OUI & DM9161_LSB_MASK)))
        return TRUE;

    return FALSE;
} 
```

这段代码并不复杂。无论插入 RJ45 端口或以太网链路状况或 MAC 地址的值如何，此例程都应该成功。因此，此代码序列（产生 PHY 警告消息）的失败似乎表明：

a) 硬件出现故障或损坏。（您是否遵守了适当的防静电预防措施？）但是

> 但是板上的以太网连接 LED 指示电缆已连接。

似乎表明 PHY 并没有完全死掉。

b) 或者固件与硬件不匹配。您应该验证板号、修订号和序列号。获取电路板原理图和/或 BOM（材料清单），然后确认 PHY 的部件号匹配（即您的电路板设计可能不使用 DM9161，而是使用其他一些 PHY 芯片）。您应该为您的开发板获取 U-Boot 源代码。验证 U-Boot 是否针对实际安装在您的板上的 PHY 进行了配置。验证您正在执行的 U-Boot 二进制文件是否与手头的源代码版本相同。

`IsPhyConnected()`如果你真的很爱冒险，那么你可以“玩电脑”，使用 U-Boot 的内存读写或 mii 命令手动执行上述例程的操作。如果您是一名专业工程师，试图提出您的新电路板设计，那么这将是下一个可能的步骤。

```
U-Boot > mii
Usage:
mii - MII utility commands

U-Boot > help mii
mii device                     - list available devices
mii device <devname>           - set current device
mii info   <addr>              - display MII PHY info
mii read   <addr> <reg>        - read  MII PHY <addr> register <reg>
mii write  <addr> <reg> <data> - write MII PHY <addr> register <reg>
mii dump   <addr> <reg>        - pretty-print <addr> <reg> (0-5 only)
Addr and/or reg may be ranges, e.g. 0-31.
U-Boot > 
```

**更新**

根据 的输出`mii info`，您的电路板似乎已损坏或损坏，即 EMAC 未与 PHY 通信或未连接到 PHY。您可以尝试在强光下用放大镜检查电路板是否损坏。我会尝试将板换成另一个。

**更新二**

事实证明，`mii info`你的电路板的输出有点假，因为 U-Boot 中有一个错误。该`mii info`命令将使用以下代码扫描 MII 上 32 个可能地址中每个可能的 PHY：

```
int  at91rm9200_miiphy_read(char *devname, unsigned char addr,
        unsigned char reg, unsigned short * value)
{
    at91rm9200_EmacEnableMDIO (p_mac);
    at91rm9200_EmacReadPhy (p_mac, reg, value);
    at91rm9200_EmacDisableMDIO (p_mac);
    return 0;
} 
```

但是请注意，`addr`该例程中从未使用过参数（保存 PHY 地址）。结果是AT91RM9200板子的这个例程总是读取地址0的PHY，`mii info`命令没有报告对所有地址的准确扫描。

收集到的一项是 PHY 返回零，这说明`dm9161_IsPhyConnected()`了比较测试失败的原因。零应该减轻对已安装替代且无法识别的 PHY 的任何担忧。

从我的板上（地址 1 有一个 PHY）（在 U-​​Boot 中没有上述错误）：

```
U-Boot> mii info
PHY 0x01: OUI = 0x80017, Model = 0x09, Rev = 0x00, 100baseT, FDX
U-Boot> mii dev
MII devices: 'at91phy' 
Current device: 'at91phy'
U-Boot> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:23:40.870

听起来以太网接口尚未初始化。您的 U-Boot 版本中是否有任何命令可以启用以太网接口？是否配置了 U-Boot 环境变量 hwaddr（“printenv hwaddr”查看） - 这个环境变量是板子以太网接口的 MAC 地址。电路板是否有任何 LED 指示链路状态（这些通常位于插入以太网的插座旁边）。

# c++ - 将 unsigned char[10] 转换为 QBytearray；

> ID：15337180
> 
> 赞同：8
> 
> 时间：2013-03-11T11:13:54.090
> 
> 标签：c++, qt, converter, unsigned-char, qbytearray

我已经看到了很多关于这个的问题，但到目前为止，没有一个对我有用。

我已经尝试了 2 个最常见的答案，但我得到了同样的错误。

只是一个`unsigned char buf[10];`

这，

```
QByteArray databuf;
databuf = QByteArray::fromRawData(buf, 10); 
```

或这个，

```
QByteArray databuf;
databuf = QByteArray(buf, 10); 
```

给我同样的错误，

`error: invalid conversion from 'unsigned char*' to 'const char*' [-fpermissive]`

有什么建议吗？

谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T11:23:39.823

这只是签名问题，所以这应该有效：

```
databuf = QByteArray(reinterpret_cast<char*>(buf), 10); 
```

或者使用传统的 C 风格演员表：

```
databuf = QByteArray((char*)buf, 10); 
```

（[这是您应该使用的众多讨论之一。](https://stackoverflow.com/questions/527999/is-it-ok-to-use-c-style-cast-for-built-in-types)）

更简单的替代方法是`unsigned`从 的声明中删除`buf`，如果您出于其他原因不需要它。

请注意，如果您使用该`fromRawData`方法，它不会复制字节，因此最好确保`buf`不会过早超出范围。如果不确定，请不要使用它...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:18:34.893

正如它所说，传递给的参数`fromRawData`应该是 a `const char*`，而不是 a `unsigned char*`。你可以让你的数组是一个数组`const char`：

```
const char buf[10]; 
```

该数组可以转换为指向其第一个元素的指针，该元素将 a `const char*`，完全符合`fromRawData`预期。

# asp.net - 使用 css 自定义 web.sitemap 的默认菜单样式

> ID：15337182
> 
> 赞同：0
> 
> 时间：2013-03-11T11:14:05.603
> 
> 标签：asp.net, css

我`web.sitemap`用来显示 asp.net 应用程序的菜单，看起来不错，但默认情况下，主菜单项的子菜单将垂直显示，如下所示。 ![在此处输入图像描述](../Images/6a213f5037d53e59bab3d43b396d5e7b.png)

但我想将子菜单显示为**水平**。我正在尝试使用 css 进行更改。但它没有改变。div 的主要类是`mainmenu`. 要自定义这个，我使用如下 css。

```
.mainmenu ul li ul li{
position:relative;
float:left;
} 
```

但它不会向左走。我给了`display:inline`，即使它不起作用。我们不能自定义来自`web.sitemap`提供商的菜单还是我在这里做错了什么？这里是[JS Fiddle 链接](http://jsfiddle.net/y2GjA/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:44:49.997

您的 html 中有许多内联样式会覆盖您的 css 类和 id。我设法找到了一个快速修复`li`水平显示您的 level2 项目的方法，但这只是暂时的，因为我需要找出导致 level2`ul`不与菜单左侧对齐的原因。把它放在你的css文件中：

```
li.dynamic{
    display:table-cell;
} 
```

这是演示：http: [//jsfiddle.net/y2GjA/1/](http://jsfiddle.net/y2GjA/1/)

我会看看我能为更好的解决方案做些什么，因为这只是一个临时解决方案，不兼容 IE8 和更早版本。

**- 编辑 -**

将以下内容添加到您的 CSS 中：

```
li.static:nth-child(6):hover ul.level2{
    left:-481px!important;
}
li.dynamic {
    display:table-cell;
} 
```

这是演示：http: [//jsfiddle.net/uSmSD/](http://jsfiddle.net/uSmSD/)

# php - php odbc_data_source

> ID：15337183
> 
> 赞同：0
> 
> 时间：2013-03-11T11:14:07.317
> 
> 标签：php, odbc, datasource, manual

手册： [http ://www.php.net/manual/en/function.odbc-data-source.php](http://www.php.net/manual/en/function.odbc-data-source.php)

事实：

```
<?
$DSN = 'Driver={Microsoft Access Driver (*.mdb)};Dbq=test.mdb';

$cnx = odbc_connect( $DSN, '', '' );
if (!$cnx)
    Error_handler( "### Error in odbc_connect ###" , $cnx );

$result = odbc_data_source( $cnx, SQL_FETCH_FIRST );
if (!$result)
    echo "### Error in odbc_data_source ###\n";

while($result) {
    if (strtolower($DSN) == strtolower($result['server'])) {
        echo $result['description']."\n";
        break;
    } else $result = odbc_data_source( $cnx, SQL_FETCH_NEXT );
}
?> 
```

结果：

警告：odbc_data_source() [function.odbc-data-source]: SQL 错误：无法获取错误消息，SQLDataSources 中的 SQL 状态 HY000 在第 8 行的 \labs_blob2.php
### odbc_data_source 中的错误 ###

有解决办法吗？
它只是不起作用？
你知道一本好的手册吗？
感谢帮助。

# c - 宏观扩张的奇怪行为

> ID：15337185
> 
> 赞同：2
> 
> 时间：2013-03-11T11:14:09.360
> 
> 标签：c, macros, c-preprocessor

这是代码：

```
#include <stdio.h>
#include <stdio.h>
#define VAL1(a,b)    a*b
#define VAL2(a,b)    a/b
#define VAL3(a,b)    ++a%b
int main()
{
    int a = 1;
    int b = 2;
    int c = 3;
    int d = 3;
    int e = 5;

    int result = VAL2(a,d)/VAL1(e,b)+VAL3(c,d);  // result = 1
    //int result = a/d/e*b+++c%d;                // result = 0

    printf("%d\n", result);

    return 0;
} 
```

为什么两个语句的结果不一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T11:16:38.797

在一种情况下你有`+ ++`，在另一种情况下你有`++ +`。`+ ++`并且`++ +`是不同的*令牌*流。宏粘贴不会更改标记化，因为粘贴的是标记。

如果你将你的程序打入一个 C 预处理器，你会为那一行得到这个：

```
int result = a/d/e*b+ ++c%d; 
```

`+`请注意，预处理器必须插入一个空格，因为在标记和标记之间是强制性的`++`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:19:31.790

我尝试用 GCC 4.7 编译它，这两个表达式给出了相同的结果。

如果你想看看宏会如何扩展，你可以使用`cpp`C Preprossessor，它会在预处理器表达式执行后给你输出，这里的输出是

```
int main()
{
    int a = 1;
    int b = 2;
    int c = 3;
    int d = 3;
    int e = 5;

    int result = a/d/e*b+++c%d;  
    int result2 = a/d/e*b+++c%d;  

    printf("%d %d\n", result, result2);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T11:17:31.643

如果您真的认为有必要使用此类宏，则需要使用括号`()`来避免副作用：

```
#define VAL1(a,b)    ((a)*(b))
#define VAL2(a,b)    ((a)/(b))
#define VAL3(a,b)    ((++a)%(b)) 
```

# c# - .Extract 上的 DotNetZip BadReadException

> ID：15337186
> 
> 赞同：21
> 
> 时间：2013-03-11T11:14:18.703
> 
> 标签：c#, dotnetzip

我有一个奇怪的文件，当用 DotNetZip 压缩时会创建一个“不可解压缩”的存档。当我尝试用 7zip 解压缩它时，它失败了`CRC failed in 'AjaxControlToolkit.dll'. File is broken.`当我用 7zip 手动压缩它时，它解压缩得很好。

有没有人遇到过 DotNetZip 无法正确压缩简单二进制文件的情况？还是我错误地使用了 DotNetZip？

[https://dl.dropbox.com/u/65419748/AjaxControlToolkit.dll](https://dl.dropbox.com/u/65419748/AjaxControlToolkit.dll)

```
using System.IO;
using Ionic.Zip;

namespace ConsoleApplication1
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var source = new FileInfo(@"C:\ZipDemo\AjaxControlToolkit.dll");
            var target = new FileInfo(Path.ChangeExtension(source.FullName, "zip"));
            var folder = new DirectoryInfo(Path.ChangeExtension(source.FullName, null));

            if (target.Exists)
                target.Delete();

            if (folder.Exists)
                folder.Delete(true);

            using (var zip = new ZipFile(target.FullName))
            {
                zip.AddFile(source.FullName, string.Empty);
                zip.Save();
            }

            using (var zip = new ZipFile(target.FullName))
                zip.ExtractAll(folder.FullName);
        }
    }
} 
```

抛出：

```
Unhandled Exception: Ionic.Zip.BadReadException: bad read of entry AjaxControlToolkit.dll from compressed archive.
   at Ionic.Zip.ZipEntry._CheckRead(Int32 nbytes)
   at Ionic.Zip.ZipEntry.ExtractOne(Stream output)
   at Ionic.Zip.ZipEntry.InternalExtract(String baseDir, Stream outstream, String password)
   at Ionic.Zip.ZipFile._InternalExtractAll(String path, Boolean overrideExtractExistingProperty)
   at Ionic.Zip.ZipFile.ExtractAll(String path)
   at ConsoleApplication1.Program.Main(String[] args) in C:\ZipDemo\ConsoleApplication1\ConsoleApplication1\Program.cs:line 27 
```

编辑：

如果我添加一个额外的字节，它就可以正常工作，但这不是一个可接受的解决方案。没有`+ 1`.

```
var bytes = new byte[source.Length + 1];
File.ReadAllBytes(source.FullName).CopyTo(bytes, 0);
zip.AddEntry(source.Name, bytes); 
```

更新：

放弃并切换到 SharpZipLib，因为它不会因为简单的提取而崩溃，但肯定会很高兴知道 DotNetZip 出了什么问题，它有一个更好的 API。

更新2：

关于文件长度的一些东西使它爆炸，1179647 和 1179649 字节被正确压缩和解压缩。

```
var source = new FileInfo(@"C:\ZipDemo\foo.txt");
using (var writer = source.CreateText())
    writer.Write(new string('a', 1179648)); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-20T15:35:48.747

您的 dll 大小为 53*128k (6954496/131072 = 53)，DotNetZip 中有一个错误，您可以在此处阅读：[https](https://dotnetzip.codeplex.com/workitem/14087) ://dotnetzip.codeplex.com/workitem/14087 。只需在您的代码中使用：

```
zip.ParallelDeflateThreshold = -1; 
```

我对很多文件都有这个问题，现在它工作得很好；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-20T15:08:58.327

这是一个错误 - 您可以在`Zlib\ParallelDeflateOutputStream.cs`.

改变

```
} while (doAll && (_lastWritten != _latestCompressed)); 
```

到

```
} while (doAll && (_lastWritten != _lastFilled)); 
```

有关详细信息，请参阅[https://dotnetzip.codeplex.com/workitem/14087](https://dotnetzip.codeplex.com/workitem/14087)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:52:44.260

我试过这个 -

*   安装最新版本的 DotNetZip
*   运行你的代码。
*   得到 BadReadException

那么这个——

*   安装旧版本 (1.9) 的 DotNetZip。( `Install-Package DotNetZip -Version 1.9`)
*   运行你的代码
*   代码工作正常。

我想这可能是一个错误？

# php - 尝试使用 CURL 连接到 ASPX 站点？

> ID：15337197
> 
> 赞同：9
> 
> 时间：2013-03-11T11:15:09.513
> 
> 标签：php, curl, login, .aspxauth

我正在尝试登录此网址：

```
http://www.kalahari.com/marketplace/default.aspx 
```

正在提交的两个字段被标记为：

```
ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInEmail
ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPasswordTextNormal 
```

到目前为止我尝试使用的代码：

```
$username     = 'XXXXXXX';
$password     = 'XXXXXXX';

$loginUrl     = 'http://www.kalahari.com/marketplace/default.aspx';
$cookie  = 'cookies.txt';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $loginUrl );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );
curl_setopt($ch, CURLOPT_COOKIEJAR , $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_HEADER, FALSE );
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$ret = curl_exec($ch); //access login page

// Collecting all POST fields
$postfields = array();
$postfields['ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInEmail'] = $username;
$postfields['ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPasswordTextNormal'] = $password;

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
$ret = curl_exec($ch);//Get result after login page.

print $ret; 
```

然而，这只会让我回到原来的登录页面......甚至没有错误消息。

然后我看了看发布的内容，我看到了：

```
Request URL:http://www.kalahari.com/marketplace/default.aspx
Request Method:POST
Status Code:302 Found
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:2596
Content-Type:application/x-www-form-urlencoded
Cookie:VISITORID=9840A7E31683480CB19A66FB8AA73BFC; ASP.NET_SessionId=foous3ftij3os2vvr1wbm3mm; __utma=160092839.590473234.1362995010.1362995010.1362995010.1; __utmc=160092839; __utmz=160092839.1362995010.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); _SUPERFLY_nosample=1; shopperName=; signin=0; kalahariShopperId=922859656760417F99E83D5B1427115F; surfLang=ENG; prefLanguage=en-ZA; _chartbeat2=1yx62ww1m7xz1o84.1360134968807.1363000295875.00000000000001
Host:www.kalahari.com
Origin:http://www.kalahari.com
Referer:http://www.kalahari.com/marketplace/default.aspx
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Form Dataview sourceview URL encoded
__EVENTTARGET:
__EVENTARGUMENT:
__VIEWSTATE:/wEPDwULLTEzODYxODcwMTMPZBYCZg9kFgJmD2QWAgIBD2QWCAICD2QWBAIDDw8WAh4LTmF2aWdhdGVVcmwFNH4vcGlwZWxpbmUvc2lnbmluLmFzcHg/UmV0dXJuVVJMPS9zZWN1cmUvbWFya2V0cGxhY2VkZAIHDxYCHgdWaXNpYmxlaBYCAgEPDxYCHwFoZGQCBA9kFgICAQ9kFgICAQ8WAh8BaBYCAgEPZBYQAgEPDxYGHghDc3NDbGFzcwULYWN0aXZlX2xpbmseB0VuYWJsZWRnHgRfIVNCAgJkZAIDDw8WBh8CBQVsaW5rcx8DZx8EAgJkZAIFDw8WBh8CBQ1kaXNhYmxlX2xpbmtzHwNoHwQCAmRkAgcPDxYGHwIFDWRpc2FibGVfbGlua3MfA2gfBAICZGQCCQ8PFgYfAgUNZGlzYWJsZV9saW5rcx8DaB8EAgJkZAILDw8WBh8CBQ1kaXNhYmxlX2xpbmtzHwNoHwQCAmRkAg0PDxYGHwIFDWRpc2FibGVfbGlua3MfA2gfBAICZGQCDw8PFgYfAgUNZGlzYWJsZV9saW5rcx8DaB8EAgJkZAIFD2QWAgIBD2QWBgIJDxAPZBYCHgdvbkNsaWNrBYQBamF2YXNjcmlwdDpWYWxpZGF0ZUxvZ2luUmFkaW9CdG5ZZXMoY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRZZXMsY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRObyk7ZGRkAgsPEA9kFgIfBQWDAWphdmFzY3JpcHQ6VmFsaWRhdGVMb2dpblJhZGlvQnRuTm8oY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRZZXMsY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRObyk7ZGRkAhUPD2QWAh8FBdMBamF2YXNjcmlwdDpWYWxpZGF0ZUxvZ2luKCdjdGwwMF9jdGwwMF9jcGxoTWFpbl9jcGxoQ29udGVudF9sYmxSZXN1bHQnLGN0bDAwX2N0bDAwX2NwbGhNYWluX2NwbGhDb250ZW50X3R4dFBhc3N3b3JkLGN0bDAwX2N0bDAwX2NwbGhNYWluX2NwbGhDb250ZW50X3JkbFBhc3N3b3JkWWVzLGN0bDAwX2N0bDAwX2NwbGhNYWluX2NwbGhDb250ZW50X3JkbFBhc3N3b3JkTm8pO2QCBg9kFgICBQ8PFgIfAAUafi9waXBlbGluZS9vcmRlcl9saXN0LmFzcHhkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAwUvY3RsMDAkY3RsMDAkY3BsaE1haW4kY3BsaENvbnRlbnQkcmRsUGFzc3dvcmRZZXMFLmN0bDAwJGN0bDAwJGNwbGhNYWluJGNwbGhDb250ZW50JHJkbFBhc3N3b3JkTm8FLmN0bDAwJGN0bDAwJGNwbGhNYWluJGNwbGhDb250ZW50JHJkbFBhc3N3b3JkTm99/wuPOuNOonYg5XWvf3RGR1YVkw==
__EVENTVALIDATION:/wEWDQLsuI7QDgKnpLoxApD7nfEPAvLAqqUGAp35/akJAqGiqqYPAsXC5NUHAsHJ5OMCAovxoc8LArq0mqAKApm+rVoC9dLe0Q8C5IvEsAlYqPIdcrZvBZcvYav7ATMf4Nhbfg==
ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInEmail:XXXXXXXXX
ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPasswordTextNormal:Password
ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPassword:XXXXXXXXXXX
ctl00$ctl00$ucMarketPlaceSupportNavigation$btnSigninTop:Sign in
ctl00$ctl00$cplhMain$cplhContent$txtEmail:Email address
ctl00$ctl00$cplhMain$cplhContent$rdlPasswordYes:rdlPasswordYes
ctl00$ctl00$cplhMain$cplhContent$txtPasswordTextNormal:Password
ctl00$ctl00$cplhMain$cplhContent$txtPassword:
ctl00$ctl00$cplhMain$cplhContent$hdnEmailDefault:Email address
ctl00$ctl00$cplhMain$cplhContent$hdnPasswordDefault:Password
Response Headersview source
Cache-Control:private, no-cache="Set-Cookie"
Content-Length:146
Content-Type:text/html; charset=utf-8
Date:Mon, 11 Mar 2013 11:11:57 GMT
Etag:
Location:/marketplace/default.aspx
Server:Microsoft-IIS/6.0
Set-Cookie:.KALAHARINETAUTH=782A6F442823F8148FB113BA0BAF3A9A8DE253762A4ACFAA5E911E4721166F0EEC6A1891755133AADD28654CF0DAE3880CC2B84260F0B915C07897909CFB071495AF8EF05D1BD678DEE1933FCB08E5ECB1CF76462900681C7D4AE963C151E3079D95FBAD6466F0528787455A951D5EC0DA26F0E6CAA341E4C717D7F3BC01D182F488F47F; domain=.kalahari.com; path=/; HttpOnly
Set-Cookie:surfLang=ENG; domain=.kalahari.com; expires=Sat, 11-Mar-2023 11:11:57 GMT; path=/
Set-Cookie:prefLanguage=en-ZA; domain=www.kalahari.com; path=/
Set-Cookie:signin=1; domain=kalahari.com; path=/
Set-Cookie:tempshopperid=922859656760417F99E83D5B1427115F; domain=kalahari.com; path=/
Set-Cookie:kalahariShopperId=54B14971F72D426BA02DEF3A3D99DC93; domain=kalahari.com; expires=Sun, 17-Jan-2038 22:00:00 GMT; path=/
Set-Cookie:shopperName=XXXX; domain=kalahari.com; path=/
Set-Cookie:kalahariShopperEmail=XXX@XXXX.XXX; domain=kalahari.com; path=/
X-AspNet-Version:2.0.50727
X-Powered-By:ASP.NET 
```

看起来我应该提交的不仅仅是用户名和密码。我究竟必须发布什么以及如何发布诸如“视图状态”之类的不是固定值的内容？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T17:13:21.070

**介绍**

您的脚本无法正常工作的可能原因如下

*   失踪`__VIEWSTATE`
*   失踪`__EVENTVALIDATION`
*   无效的用户代理
*   使用`ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPasswordTextNormal`密码代替`ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPassword`
*   不完整的帖子字段
*   重复卷曲请求
*   登录过程中缺少苦力

**典型的服务器请求**

一个完整的长请求看起来像这样

```
POST http://www.kalahari.com/marketplace/default.aspx HTTP/1.1
Host: www.kalahari.com
Connection: keep-alive
Content-Length: 2584
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Origin: http://www.kalahari.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22
Content-Type: application/x-www-form-urlencoded
Referer: http://www.kalahari.com/marketplace/default.aspx
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ASP.NET_SessionId=t2dopenbp5zdfojmg1sd4m55; VISITORID=ECE2335BD47344E29A3D24E04FA31777; mpshopperid=A2E19BEB4D77484A89B9CD64BBB9C294; sign_up_track=sign_up; shopperName=; signin=0; kalahariShopperId=9D0B941AADCC48CA8ACB071C840A9CEB; __utma=46148088.1484253925.1363278451.1363278451.1363278451.1; __utmb=46148088.8.10.1363278451; __utmc=46148088; __utmz=46148088.1363278451.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); surfLang=ENG; prefLanguage=en-ZA; _chartbeat2=fn9a2z0breekvh98.1363278407516.1363278713879.00000000000001

__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwULLTEzODYxODcwMTMPZBYCZg9kFgJmD2QWAgIBD2QWCAICD2QWBAIDDw8WAh4LTmF2aWdhdGVVcmwFNH4vcGlwZWxpbmUvc2lnbmluLmFzcHg%2FUmV0dXJuVVJMPS9zZWN1cmUvbWFya2V0cGxhY2VkZAIHDxYCHgdWaXNpYmxlaBYCAgEPDxYCHwFoZGQCBA9kFgICAQ9kFgICAQ8WAh8BaBYCAgEPZBYQAgEPDxYGHghDc3NDbGFzcwULYWN0aXZlX2xpbmseB0VuYWJsZWRnHgRfIVNCAgJkZAIDDw8WBh8CBQVsaW5rcx8DZx8EAgJkZAIFDw8WBh8CBQ1kaXNhYmxlX2xpbmtzHwNoHwQCAmRkAgcPDxYGHwIFDWRpc2FibGVfbGlua3MfA2gfBAICZGQCCQ8PFgYfAgUNZGlzYWJsZV9saW5rcx8DaB8EAgJkZAILDw8WBh8CBQ1kaXNhYmxlX2xpbmtzHwNoHwQCAmRkAg0PDxYGHwIFDWRpc2FibGVfbGlua3MfA2gfBAICZGQCDw8PFgYfAgUNZGlzYWJsZV9saW5rcx8DaB8EAgJkZAIFD2QWAgIBD2QWBgIJDxAPZBYCHgdvbkNsaWNrBYQBamF2YXNjcmlwdDpWYWxpZGF0ZUxvZ2luUmFkaW9CdG5ZZXMoY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRZZXMsY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRObyk7ZGRkAgsPEA9kFgIfBQWDAWphdmFzY3JpcHQ6VmFsaWRhdGVMb2dpblJhZGlvQnRuTm8oY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRZZXMsY3RsMDBfY3RsMDBfY3BsaE1haW5fY3BsaENvbnRlbnRfcmRsUGFzc3dvcmRObyk7ZGRkAhUPD2QWAh8FBdMBamF2YXNjcmlwdDpWYWxpZGF0ZUxvZ2luKCdjdGwwMF9jdGwwMF9jcGxoTWFpbl9jcGxoQ29udGVudF9sYmxSZXN1bHQnLGN0bDAwX2N0bDAwX2NwbGhNYWluX2NwbGhDb250ZW50X3R4dFBhc3N3b3JkLGN0bDAwX2N0bDAwX2NwbGhNYWluX2NwbGhDb250ZW50X3JkbFBhc3N3b3JkWWVzLGN0bDAwX2N0bDAwX2NwbGhNYWluX2NwbGhDb250ZW50X3JkbFBhc3N3b3JkTm8pO2QCBg9kFgICBQ8PFgIfAAUafi9waXBlbGluZS9vcmRlcl9saXN0LmFzcHhkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAwUvY3RsMDAkY3RsMDAkY3BsaE1haW4kY3BsaENvbnRlbnQkcmRsUGFzc3dvcmRZZXMFLmN0bDAwJGN0bDAwJGNwbGhNYWluJGNwbGhDb250ZW50JHJkbFBhc3N3b3JkTm8FLmN0bDAwJGN0bDAwJGNwbGhNYWluJGNwbGhDb250ZW50JHJkbFBhc3N3b3JkTm99%2FwuPOuNOonYg5XWvf3RGR1YVkw%3D%3D&__EVENTVALIDATION=%2FwEWDQLsuI7QDgKnpLoxApD7nfEPAvLAqqUGAp35%2FakJAqGiqqYPAsXC5NUHAsHJ5OMCAovxoc8LArq0mqAKApm%2BrVoC9dLe0Q8C5IvEsAlYqPIdcrZvBZcvYav7ATMf4Nhbfg%3D%3D&ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24txtMPTopSignInEmail=XXXXXXXXXX%40rmqkr.net&ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24txtMPTopSignInPasswordTextNormal=Password&ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24txtMPTopSignInPassword=XXXXXXXXXX&ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24btnSigninTop=Sign+in&ctl00%24ctl00%24cplhMain%24cplhContent%24txtEmail=Email+address&ctl00%24ctl00%24cplhMain%24cplhContent%24rdlPasswordYes=rdlPasswordYes&ctl00%24ctl00%24cplhMain%24cplhContent%24txtPasswordTextNormal=Password&ctl00%24ctl00%24cplhMain%24cplhContent%24txtPassword=&ctl00%24ctl00%24cplhMain%24cplhContent%24hdnEmailDefault=Email+address&ctl00%24ctl00%24cplhMain%24cplhContent%24hdnPasswordDefault=Password 
```

**使用卷曲**

```
$url = "http://www.kalahari.com/marketplace/default.aspx";
$ckfile = tempnam("/tmp", "CURLCOOKIE");
$useragent = 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.3 Safari/533.2';

$username = "XXXXXXXXXX";
$password = "XXXXXXXXXX";

$f = fopen('log.txt', 'w'); // file to write request header for debug purpose

/**
    Get __VIEWSTATE & __EVENTVALIDATION
 */
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);

$html = curl_exec($ch);

curl_close($ch);

preg_match('~<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="(.*?)" />~', $html, $viewstate);
preg_match('~<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="(.*?)" />~', $html, $eventValidation);

$viewstate = $viewstate[1];
$eventValidation = $eventValidation[1];

/**
 Start Login process
 */
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
curl_setopt($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt($ch, CURLOPT_COOKIEFILE, $ckfile);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_STDERR, $f);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);

// Collecting all POST fields
$postfields = array();
$postfields['__EVENTTARGET'] = "";
$postfields['__EVENTARGUMENT'] = "";
$postfields['__VIEWSTATE'] = $viewstate;
$postfields['__EVENTVALIDATION'] = $eventValidation;
$postfields['ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInEmail'] = $username;
$postfields['ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPasswordTextNormal'] = "Password";
$postfields['ctl00$ctl00$ucMarketPlaceSupportNavigation$txtMPTopSignInPassword'] = $password;
$postfields['ctl00$ctl00$ucMarketPlaceSupportNavigation$btnSigninTop'] = 'Sign in';
$postfields['ctl00$ctl00$cplhMain$cplhContent$txtEmail'] = 'Email address';
$postfields['ctl00$ctl00$cplhMain$cplhContent$rdlPasswordYes'] = 'Password';
$postfields['ctl00$ctl00$cplhMain$cplhContent$txtPassword'] = '';
$postfields['ctl00$ctl00$cplhMain$cplhContent$hdnEmailDefault'] = 'Email address';
$postfields['ctl00$ctl00$cplhMain$cplhContent$hdnPasswordDefault'] = 'Password';

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
$ret = curl_exec($ch); // Get result after login page.

print $ret; 
```

经过测试并且工作正常...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:56:09.517

我想试一试，让你的代码正常工作，见下文。我在代码中有一些关于我在做什么的 var_dump 和注释。

```
<?php
$username     = 'test@example.com';
$password     = 'example';

$loginUrl     = 'http://www.kalahari.com/marketplace/default.aspx';

//on windows server you need full path or its not even used.
$cookie  = dirname(__FILE__) . '\cookies1.txt';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $loginUrl );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, TRUE );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );
curl_setopt($ch, CURLOPT_COOKIEJAR , $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_HEADER, FALSE );
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$ret = curl_exec($ch); //access login page

//check the contents of the cookie file. the sessionID, visitorID and kalaharishooperID should be the same with each refresh.
var_dump(implode('', file($cookie)));

//now get the viewstate from the value
//could be better with regex or anything, but this works.
$content = explode('value="', stristr($ret, 'id="__VIEWSTATE"'));
$viewstate = substr($content[1], 0, strpos($content[1], '"'));
var_dump($viewstate);

//now get the EVENTVALIDATION from the value
//could be better with regex or anything, but this works.
$content = explode('value="', stristr($ret, 'id="__EVENTVALIDATION"'));
$validation = substr($content[1], 0, strpos($content[1], '"'));
var_dump($validation);

//define post fields
    //i removed all fields that are not required for the post
$postfields = array(
    "__VIEWSTATE" => rawurlencode($viewstate),
    "__EVENTVALIDATION" => rawurlencode($validation),
    "ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24txtMPTopSignInEmail" => rawurlencode($username),
    "ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24txtMPTopSignInPasswordTextNormal" => "Password",
    "ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24txtMPTopSignInPassword" => rawurlencode($password),
    "ctl00%24ctl00%24ucMarketPlaceSupportNavigation%24btnSigninTop" => "Sign+in",
);
var_dump($postfields);

    //I created the string myself for the post, else I got an error because we already encoded the variable names.
$p = "";
foreach($postfields as $k=>$v) {
    $p .= $k.'='.$v.'&';
}

//do the new post
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $p);
$ret = curl_exec($ch);//Get result after login page.

    //this contains 'You have entered an invalid password' so it works as expected.
var_dump($ret);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:28:54.367

这很可能是 CRSF 代币。您将调用该页面，然后使用登录请求中返回的值。DropBox 使用类似的过程。如果您从[https://github.com/jakajancar/DropboxUploader/](https://github.com/jakajancar/DropboxUploader/)获取 Dropbox 上传器脚本，您可以看到它是如何做到的。

# java - Wicket 调用冗长的操作并通过 ajax 进行更新

> ID：15337198
> 
> 赞同：4
> 
> 时间：2013-03-11T11:15:09.663
> 
> 标签：java, web-applications, web, osgi, wicket

基于这个[SO question](https://stackoverflow.com/questions/5856698/wicket-concurrent-ajax-requests-limited-to-one)，我了解到 Wicket 将后续的 AJAX 请求排队。现在我的页面充满了几个 AJAX 请求，我想再添加一个会产生冗长操作的请求。

```
public void populateItem(final Item item) {
  final MyObject object = (MyObject) item.getModelObject();
  // ... a couple of fields
  Label statusLabel = new Label("status", new AbstractReadOnlyModel() {
    @Override
    public Object getObject() {
      return someService.doSomeLengthyOperation();
    }
  });
  statusLabel.add(new AjaxSelfUpdatingTimerBehavior(Duration.seconds(5)));
  item.add(statusLabel)
} 
```

一旦这个 Ajax 请求触发，它可能需要一分钟才能完成执行。这里的问题是我`someService.doSomeLengthyOperation()`将执行`n times the number of rows`，这意味着我将排队`n times two-minutes`。现在，正如我所提到的，Wicket 将后续的 AJAX 请求排队。

发生的事情是我`number-of-rows * minutes-it-take-to-finish-the-operation`需要加载页面或执行其他需要 AJAX 的操作，例如

```
new AjaxButton("ajax-button"){
  @Override
  protected void onSubmit(AjaxRequestTarget target, Form form) {
    //.. this won't be executed until all the statusLabels have finished invoking getObject()
  }
} 
```

我想避免创建一个暴露我的服务的 Web 服务并且不得不编写我自己的 AJAX 调用。我有哪些选择？（使用 Wicket 1.5 / Pax-Wicket）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:45:49.387

最简单的方法是让初始 Ajax 请求快速返回（没有任何结果）并将[AjaxSelfUpdatingTimerBehavior](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/ajax/AbstractAjaxTimerBehavior.html)添加到目标组件。如果有结果，则此行为将检查一个间隔（例如每 10 秒左右）。如果有结果，它应该更新组件并删除自己。

这样，您可以在单独的任务中执行操作，而不会阻塞您的 Ajax 调用。

详细说明一下，我创建了一个可运行的[快速入门](http://wicket-game.gwassist.de/uploads/LongNonBlockingAjaxCallsDemo.zip)，它发出 5 个 Ajax 调用，如您所描述的，每个调用运行 10 秒到 1 分钟之间的随机时间。同时，还有一个带有计数器的响应式 AjaxLink。

主要思想是将实际的 Ajax 调用与对慢速方法的调用分开。

```
add(new ListView<DataHolder>("list", list) {

    @Override
    protected void populateItem(ListItem<DataHolder> item) {
        DataHolder dh = item.getModelObject();
        item.add(new Label("itemNumber", new PropertyModel<Integer>(dh, "number")));
        Label result = new Label("itemResult", new PropertyModel<String>(dh, "result"));
        result.setOutputMarkupId(true);
        result.add(new AjaxSelfUpdatingTimerBehavior(Duration.seconds(2)));
        item.add(result);
        Thread thread = new Thread(new Processor(item.getModelObject()));
        thread.start();
    }
}); 
```

如您所见，标签模型不再直接调用`doSomeLengthyOperation()`。相反，会产生一个新的线程来完成繁重的工作。Processor 类仅实现 Runnable 接口并使用 run-method 来完成工作（在您的情况下，在演示中它只是等待一段时间）。

PropertyModel 的 getter 封装了这个特技并使其透明，同时始终快速返回以防止阻塞。

```
public String getResult() {
    String retValue;
    if (!processed) {
        retValue = String.format("Still busy after %d requests", counter++);
    } else {
        retValue = result;
    }
    return retValue;
} 
```

处理的成员只是一个标志，处理器用来指示它何时完成等待（ehr 工作）。

由于您可能会同时发出超过 5 个线程，我建议使用某种线程池，但这超出了这个小演示的范围。

* * *

免责声明：这不是生产代码。这只是为了演示。这对您的资源不利，也不会优雅地处理任何资源不足。当用户点击重新加载或发生其他任何事情时，它将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T12:45:36.000

我不完全确定 WicketStuff Async Task 是否可以帮助您，但请尝试一下：

[https://github.com/wicketstuff/core/wiki/Async-tasks](https://github.com/wicketstuff/core/wiki/Async-tasks)

这是 Async Tasks 项目中的简短演示：

```
public class DemoPage extends WebPage implements IRunnableFactory {

public DemoPage() {

    Form<?> form = new Form<Void>("form");
    AbstractTaskContainer taskContainer = DefaultTaskManager.getInstance()
        .makeContainer(1000L, TimeUnit.MINUTES);
    ProgressButton progressButton = new ProgressButton("button", form, 
        Model.of(taskContainer), this, Duration.milliseconds(500L));
    ProgressBar progressBar = new ProgressBar("bar", progressButton);

    add(form);
    form.add(progressButton);
    form.add(progressBar);
}

@Override
public Runnable getRunnable() {
    return new IProgressObservableRunnable() {
        // Runnable implementation.
    };
} 
```

# ios - 在信息窗口中单击 iphone

> ID：15337201
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:15:17.367
> 
> 标签：ios, google-maps, google-maps-sdk-ios

我想在 iphone 谷歌地图中点击信息窗口时显示一个小窗口。我希望当用户点击标记时，会出现信息窗口。在该信息窗口的水龙头上，应该会出现另一个窗口。在android中，有一个 OnInfoWindowClickListener 方法。我们在 iOS 中有什么这样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:33:07.643

在哪里添加地图，添加

```
 mapView_.delegate=self; 
```

然后用这个

```
-(void)mapView:(GMSMapView *)mapView
didTapInfoWindowOfMarker:(GMSMarker *)marker{

   //info window tapped

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:15:46.180

在 iOS 中，如果用户点击信息窗口，将调用委托方法。这是代表的文档。

```
/**
 * Called after a marker's info window has been tapped.
 */
- (void)mapView:(GMSMapView *)mapView
    didTapInfoWindowOfMarker:(id<GMSMarker>)marker; 
```

作为参数，您将收到 mapView 实例和信息窗口标记的对象。不要忘记包含 GMSMapViewDelegate。

# javascript - 克隆没有值的文本字段

> ID：15337207
> 
> 赞同：2
> 
> 时间：2013-03-11T11:15:34.133
> 
> 标签：javascript, jquery, dom

我正在使用 JavaScript 克隆带有输入字段的行。我的问题是我从数据库中获取值，现在它也在克隆值。

```
$(document).ready(function() {
    var clonedRow = $('.row3').clone().html();
    var appendRow = '<tr class = "row3">' + clonedRow + '</tr>';
    $('#btnAddMore').click(function() {
        $('.employmentHistoryForm tr:last').after(appendRow);
    });
}); 
```

有没有办法让它不克隆值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:18:25.857

尝试

```
var clonedRow = $('.row3').clone().html();
var appendRow = '<tr class = "row3">' + clonedRow + '</tr>';

$('#btnAddMore').click(function() {  
    $(appendRow).insertAfter('.employmentHistoryForm tr:last').find('input').val('')
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qr4Ft/2/)

# sql-server - 在 Maven 项目中包含 SqlServerDriver

> ID：15337210
> 
> 赞同：1
> 
> 时间：2013-03-11T11:15:43.233
> 
> 标签：sql-server, maven, repository, odbc-sql-server-driver

我有这个问题：我必须在我的 maven 项目中使用 sqlServerDriver 连接到 sql server db。问题是：我找不到任何为我提供工件的存储库：

```
 <groupId>com.microsoft.sqlserver</groupId>
    <artifactId>sqljdbc4</artifactId>
    <version>3.0</version> 
```

我已经阅读了一些关于在它自己的存储库中部署它的建议，但是我可以重新分发这个 Microsoft 工件吗？或者还有其他方法吗？就像将jar物理包含在项目中，然后指示maven将jar作为资源..（但我不知道这是否可能以及如何制作..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:39:31.103

*   第一个问题：“Microsoft JDBC 驱动程序可根据需要注册的单独再分发许可证自由再分发”，[如其网站所述](http://msdn.microsoft.com/en-gb/sqlserver/aa937724.aspx)。

*   第二个问题：

    *   该工件无法通过 Maven Central 获得，这意味着您需要将其部署到您自己的存储库（例如 Nexus、Artifactory 等）。

    *   或者，作为一种强烈不鼓励的丑陋黑客，您可以将库包含在项目目录中，并使用 scope 定义对它的依赖项`system`。`maven-assembly-plugin`您可以通过或将其打包到您的最终工件中`maven-shade-plugin`。（只是重申一下：这是非常不鼓励的）。

# sql - 数据透视表字符串在数据透视列下分组？

> ID：15337214
> 
> 赞同：10
> 
> 时间：2013-03-11T11:15:53.853
> 
> 标签：sql, sql-server, sql-server-2008, pivot, pivot-table

```
JOB        ENAME
--------  ----------
ANALYST    SCOTT
ANALYST    FORD
CLERK      SMITH
CLERK      ADAMS
CLERK      MILLER
CLERK      JAMES
MANAGER    JONES
MANAGER    CLARK
MANAGER    BLAKE
PRESIDENT  KING
SALESMAN   ALLEN
SALESMAN   MARTIN
SALESMAN   TURNER
SALESMAN   WARD 
```

我想格式化结果集，以便每个作业都有自己的列：

```
CLERKS  ANALYSTS  MGRS   PREZ  SALES
------  --------  -----  ----  ------
MILLER  FORD      CLARK  KING  TURNER
JAMES   SCOTT     BLAKE        MARTIN
ADAMS             JONES        WARD
SMITH 
```

我试过了

```
SELECT ANALYST, CLERK, MANAGER, PRESIDENT, SALESMAN from
(
  SELECT ename, job from emp
) as st
pivot
(
  SELECT ename
  FOR job in (ANALYST, CLERK, MANAGER, PRESIDENT, SALESMAN)
) as pivottable 
```

我收到这些错误

> *消息 156，级别 15，状态 1，第 7 行
> 关键字“SELECT”附近的语法不正确。
> 消息 156，级别 15，状态 1，第 8 行
> 关键字“in”附近的语法不正确。*

如何使用枢轴对枢轴列下的字符串进行分组？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T11:25:07.350

When you are using the [`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx) function, you are required to use an aggregate function. The syntax of a `PIVOT` is:

From [MSDN](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx):

```
SELECT <non-pivoted column>,
    [first pivoted column] AS <column name>,
    [second pivoted column] AS <column name>,
    [last pivoted column] AS <column name>
FROM
    (<SELECT query that produces the data>)
    AS <alias for the source query>
PIVOT
(
    <aggregation function>(<column being aggregated>)
FOR
[<column that contains the values that will become column headers>]
    IN ( [first pivoted column], [second pivoted column],
    ... [last pivoted column])
) AS <alias for the pivot table>
<optional ORDER BY clause>; 
```

With a string, you will need to use either the `MIN()` or `MAX()` aggregate function. The problem that you will run into is that these functions will return only one value for each column.

So in order to get the `PIVOT` to work, you will need to provide a distinct value that will keep the rows separate during the `GROUP BY`.

For your example, you can use `row_number()`:

```
SELECT ANALYST, CLERK, MANAGER, PRESIDENT, SALESMAN 
from
(
  SELECT ename, job,
    row_number() over(partition by job order by ename) rn
  from emp
) as st
pivot
(
  max(ename)
  FOR job in (ANALYST, CLERK, MANAGER, PRESIDENT, SALESMAN)
) as pivottable 
```

See [SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/143e4/2).

The `row_number()` creates a distinct value that is assigned to each row in the `job`, when you apply the aggregate function and the `GROUP BY` in the `PIVOT` you will still get separate rows.

# javascript - 如何从 youtube 获取第一帧作为照片？

> ID：15337215
> 
> 赞同：20
> 
> 时间：2013-03-11T11:16:02.977
> 
> 标签：javascript, image, youtube

如何将 Youtube 视频中的第一帧作为图像？

或者我也必须使用外部来帮助我完成这项任务？

谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-11T11:57:43.140

例如，如果视频链接是`http://www.youtube.com/watch?v=JJrNopvzCy8`

提取的值`v`并使用它来下载图像..

像：

`http://img.youtube.com/vi/JJrNopvzCy8/0.jpg`

我希望这能解决你的问题，

请注意 ?v=`xxxxxxxx`代码

注意：对于不同的帧，您可以将 Number 从 0.jpg 更改为 1.jpg 或更多以获取视频的下一帧，以防不需要视频的第一个起始帧！

图像将默认为视频大小的第一帧，因此请在 img 标签中指定图像大小，或者如果必须使用特定大小，则使用此[YouTube 开发。API](https://developers.google.com/youtube/v3/)

API 链接[缩略图部分中的特定部分](https://developers.google.com/youtube/v3/docs/thumbnails#methods)

或者我们可以尝试以下示例：

视频：`https://www.youtube.com/watch?v=JJrNopvzCy8`

1.  默认拇指：`http://i.ytimg.com/vi/JJrNopvzCy8/default.jpg`

2.  最大分辨率拇指：`http://i.ytimg.com/vi/JJrNopvzCy8/maxresdefault.jpg`

3.  总部拇指：`http://i.ytimg.com/vi/JJrNopvzCy8/hqdefault.jpg`

4.  MQ拇指：`http://i.ytimg.com/vi/JJrNopvzCy8/mqdefault.jpg`

5.  SD拇指：`http://i.ytimg.com/vi/JJrNopvzCy8/sddefault.jpg`

注意：某些尺寸会有所不同（或可能不可用，因为视频链接可用的分辨率如下）

**编辑：**对于第一帧使用这个：http: [//img.youtube.com/vi/JJrNopvzCy8/0.jpg](http://img.youtube.com/vi/JJrNopvzCy8/0.jpg)

# django - 如何不逃避模板中的验证消息？

> ID：15337216
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:16:03.040
> 
> 标签：django, validation

我的模型文件中有这段代码：

```
sn = models.CharField(max_length=20, unique=True,
                          error_messages={'unique': 'This SN has already been created. <br/> Please <a href="/?sn=xxx">search it</a> instead'}) 
```

我想实现两件事：

1.  将错误消息显示为 HTML 而不是文本。我试过了`mark_safe`，`safe`过滤没有运气 - 虽然 HTML 没有转义，但没有任何效果（消息用“”包裹）： ![在此处输入图像描述](../Images/594a8dd4986ad342eaa1249c566cae43.png)
    来源：
    ![在此处输入图像描述](../Images/a3f9e02e6b370a8888258b18a50a3de3.png)

2.  代替 URL 中的“xxx”，提供用户输入的值

我目前的解决方案是检查模板中的错误消息 - 如果它是我手动添加 URL 信息的唯一错误，但这感觉不对......
有没有人有一个干净的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:18:45.813

不转义验证消息：

```
from django.utils.html import mark_safe
sn = models.CharField(max_length=20, unique=True,
                      error_messages={'unique': mark_safe('This SN has already been created. <br/> Please <a href="/?sn=xxx">search it</a> instead')}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:46:40.617

在字段的 error_messages 属性中使用 HTML 不是一个好主意。

字段的 error_message 应该足够通用，可以显示在应用程序中可能发生此类错误的*任何地方。*您的消息特定于某种*创建项目*表单，因此处理错误的最佳位置是在验证该表单的相应字段期间。

您可以在验证期间动态创建错误通知，因此插入值而不是占位符“xxx”会更自然（只是不要忘记对该值进行 url 编码，否则您将遇到安全漏洞）。

# c# - 在c#中确定集合中的最后一行

> ID：15337217
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:16:13.790
> 
> 标签：c#, arrays, collections, foreach

快速提问：

我正在通过迭代一个集合并使用字符串生成器来构建一个 JSON 字符串（是的，可能有更聪明的方法可以做到这一点，但调试 linq 让我很头疼）。当我构建一个数组时，我必须在每个项目之后加上一个逗号。

目前，我通过在 foreach 中处理每一行之前增加一个 int 来做到这一点，如果 int 与集合中的行数匹配，我不添加逗号。

```
StringBuilder bob = new StringBuilder();
int i = 0;
foreach(Item m in Rows){
     i++;
     bob.Append(string.Format("{{ foo: '{0}', bar: '{1}' }}", m.foo, m.bar));
     bob.Append(i == Rows.Count() ? "" : ",")
} 
```

我想知道是否有一些更聪明的方法来确定当前对象是否是集合中的最后一个？

**更新：**

回答。我只能选择一个真的很遗憾，因为有很多好的答案。特别是 Matthew Watson 的回答可能与我最初寻找的最接近 - 一种直接询问集合是否是最后一项的方法。但是，在查看所有其他答案时，我认为 String.Join 更好，用 Linq 替换 foreach 再次更好。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:19:16.970

你可以用[`string.Join`](http://msdn.microsoft.com/en-us/library/0h8wc12c.aspx)这个。

它使用传入的分隔符连接传入的字符串数组，最后一个值省略它。

就像是：

```
var vals = string.Join(",", Rows.Select(
                              i => string.Format(
                                      "{{ foo: '{0}', bar: '{1}' }}", 
                                      i.foo, 
                                      i.bar))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:18:22.657

为什么不使用 a[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.length.aspx)连接逗号？编辑：由于您现在添加了代码，我看到您已经在使用`StringBuilder`，所以这有效：

```
StringBuilder bob = new StringBuilder();
foreach(Item m in Rows)
{
     bob.Append(string.Format("{{ foo: '{0}', bar: '{1}' }}", m.foo, m.bar));
}
if(bob.Length != 0) bob.Length -= 1; 
```

另一种方法是使用[`String.Join`](http://msdn.microsoft.com/en-us/library/system.string.join%28v=vs.110%29.aspx)：

```
string csv = string.Join(",", array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:28:24.027

已经有很多好的答案了，但我只想提一个有用的通用类，它可以帮助解决这个问题和许多相关问题。

[Jon Skeet 的 SmartEnumerable 类](http://msmvps.com/blogs/jon_skeet/archive/2007/07/27/smart-enumerations.aspx)允许您询问枚举器以查找其索引以及它是枚举中的第一项还是最后一项。（[这是一个实现](http://www.yoda.arachsys.com/csharp/miscutil/index.html)。）

使用 SmartEnumberable，代码将如下所示：

```
var result = new StringBuilder();

foreach (var item in data.AsSmartEnumerable())
{
    result.Append(item.Value);

    if (!item.IsLast)
    {
        result.Append(", ");
    }
} 
```

或者：

```
foreach (var item in data.AsSmartEnumerable())
{
    if (!item.IsFirst)
    {
        result.Append(", ");
    }

    result.Append(item.Value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:18:19.733

我通常跟踪第一项，并在循环的开头包含逗号。

```
bool first = true;
foreach (var item in items)
{
    if (first)
    {
        sb.Append(',');
        first = false;
    }

    sb.Append(item);
} 
```

请注意，上面可以转换为：

```
sb.Append(string.Join(",", items)); 
```

**编辑**由于您添加了代码，您可以将循环更改为单个语句：

```
String bob = string.Join(",", Rows.Select(r => string.Format("{{ foo: '{0}', bar: '{1}' }}", r.foo, r.bar))); 
```

看起来您正在尝试写出 JSON。有一些图书馆可能值得一看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:23:10.677

假设每行有一个项目你可以做

```
jsonString.ReplaceAll("\n",","); 
```

# xamarin - 如何使用 Xamarin Studio 将文件发送到 SD 卡

> ID：15337219
> 
> 赞同：2
> 
> 时间：2013-03-11T11:16:23.300
> 
> 标签：xamarin, xamarin-studio

我需要向 android 模拟器发送证书，但我找不到任何东西可以将文件上传到 IDE 中的 sd 卡。

如何将文件发送到 SD 卡？（所以我不必继续将它们上传到保管箱并在浏览器中打开）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:17:46.460

我发现在模拟器上将文件发送到 android 的 sd 卡的唯一方法是使用

android sdk\tools\monitor.bat

我花了一些时间才意识到您不应该将文件推送到 sdcard 而是要推送到 mnt/sdcard/

# jquery - 在单击的导航元素上设置类

> ID：15337226
> 
> 赞同：0
> 
> 时间：2013-03-11T11:16:57.260
> 
> 标签：jquery, asp.net-mvc

我正在使用 ASP.NET MVC 来构建页面。现在我遇到了问题。

以下代码取自我的导航列表

```
 <li class="current start">
            <a href="/home">
                <i class="icon-home"></i>
                <span class="title">Dashboard</span>
                <span class="current"></span>
            </a>
        </li>
        <li class="has-sub">
            <a href="javascript:;">
                <i class="icon-bookmark-empty"></i>
                <span class="title">Leads</span>
                <span class="arrow"></span>
                <span class=""></span>
            </a>
            <ul class="sub">
                <li><a href="/lead?status=1">Inkorg</a></li>
                <li><a href="/lead?status=2">Utskick</a></li>
                <li><a href="/lead?status=3">Akriverade</a></li>
            </ul>
        </li> 
```

如您所见，它可能是此导航列表的两个级别。我需要在点击的项目上设置当前类并在发布后记住它。在第二个示例中，我需要在 li 元素的子级别和顶层设置当前类。我可以使用 cookie 来记住这一点吗？或者解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:59:12.103

首先，我建议使用 MVC 路由来获取 URL，而不是在 HTML 中硬编码，即：

```
@Url.Action("Lead", new { status = 1 }) 
```

或者

```
@Url.RouteUrl("MyLeadRoute", new { status = 1 }) 
```

第二个版本允许您使用命名路由而不是 Action/Controller 组合。

然后，您通常会遵循以下模式：

```
@{ url = Url.Action("Lead", new { status = 1 }); }
<li@((Request.RawUrl == url) ? " class='current'" : "")><a href="@url">Some Link</a></li> 
```

注意：您需要`@{ string url; }`在代码中更早地定义。

冲洗并重复所有链接。

# java - SWT.jar 的 OleAutomation 类的方法 getProperty 为属性 ActiveSheet 返回 null

> ID：15337228
> 
> 赞同：1
> 
> 时间：2013-03-11T11:17:00.833
> 
> 标签：java, swt, ole

我正在使用 SWT.jar 创建一个 Excel 工作表并填充数据。我正在使用这些 java 代码行：

```
 int[] rgdispid = theOleAutomation.getIDsOfNames(new String[]{thePropName});
    Variant property = theOleAutomation.getProperty(rgdispid[0]); 
```

where`thePropName`是一个字符串，在这个问题场景中传递的值是“ActiveSheet”。对于其他有效值，它运行没有任何问题。

问题是在这种情况下返回的属性为 null，而抑制的异常是`Collections$UnmodifiableRandomAccessList`异常。

事情是它只发生在 Excel 2010 上。对于 Excel 2007，它运行平稳。

有人可以告诉我如何解决这个问题。

# vb.net - 如何在设置/安装项目中获取当前工作目录

> ID：15337230
> 
> 赞同：2
> 
> 时间：2013-03-11T11:17:03.290
> 
> 标签：vb.net, add-in, visual-sourcesafe

我正在 vb.net 中制作插件应用程序并为此进行设置，但我需要 instller.vb 类文件中的一些帮助

我想将 TestAddIn.addin 文件复制到客户端位置，并且这是与安装文件一起添加的，我如何在安装程序文件中执行将其复制到客户端计算机的代码？

目标路径：

```
Dim addinTargetPath As String = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments), "Visual Studio 2008\Addins") 
```

源码路径：

```
dim addinsourcePath As String =....................??????????? 
```

在给我当前工作目录的源路径中写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T20:30:12.893

这类似于[运行应用程序的问题可执行目录](https://stackoverflow.com/questions/2593458/executable-directory-where-application-is-running-from)；Justin Niessner 提供的答案是一个非常好的解决方案，将返回当前正在执行的应用程序的路径

返回的字符串格式为“Path:\Directory”，因此您必须修剪前 6 个字符才能将其用作程序中的路径字符串。这就是我在我的一个程序中使用它的方式

```
strPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().CodeBase)
i = strPath.Count
strPath = strPath.Substring(6, i - 6) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T11:25:05.150

To get the current working directory: [http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)

# awk - AWK中管道的使用

> ID：15337232
> 
> 赞同：7
> 
> 时间：2013-03-11T11:17:05.233
> 
> 标签：awk, pipe, getline

我想要的是获取当前行的反转字符串，我尝试在 AWK 中使用 rev 命令但无法获得当前结果。

```
$ cat myfile.txt
abcde

$ cat myfile.txt | awk '{cmd="echo "$0"|rev"; cmd | getline result;  print "result="$result; close(cmd);}'
abcde 
```

我想进入`edcba`输出。

我知道还有其他一些方法可以获取反向字符串，例如`$ cat myfile.txt | exec 'rev'`. 在这里使用 AWK 是因为还有一些其他的流程要做。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:32:27.907

system 函数允许用户执行操作系统命令，然后返回到 awk 程序。系统函数执行字符串命令给出的命令。它返回已执行命令返回的状态作为其值。

```
$ cat file
abcde

$ rev file
edcba

$ awk '{system("echo "$0"|rev")}' file
edcba

# Or using a 'here string'
$ awk '{system("rev<<<"$0)}' file
edcba

$ awk '{printf "Result: ";system("echo "$0"|rev")}' file
Result: edcba

# Or using a 'here string'
$ awk '{printf "Result: ";system("rev<<<"$0)}' file
Result: edcba 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-05T07:05:27.950

尝试这个：

`awk '{ cmd="rev"; print $0 | cmd; close(cmd) }' myfile.txt`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:51:45.127

从 awk调用`rev`命令效率非常低，因为它为处理的每一行创建一个子进程。我认为你应该`rev`在 awk 中定义一个函数：

```
$ cat myfile.txt | awk 'function rev(str) {
    nstr = ""
    for(i = 1; i <= length(str); i++) {
      nstr = substr(str,i,1) nstr
    }
    return nstr
  }
  {print rev($0)}'
edcba 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:37:34.110

唯一的问题是您的打印语句。利用

`print "result=" result;`

（不`$`开`result`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:15:31.013

为什么不

```
awk '{print "result =",$0}' <(rev file) 
```

或者如果您不使用`bash`/ `ksh93`：

```
rev file | awk '{print "result =",$0}' 
```

## ---

或者，如果您的 awk 支持空 FS 选项：

```
awk '{res=x; for(i=NF; i>=1; i--) res=res $i; print res}' FS= file 
```

# windows-7 - datanode 和 namenode 服务未启动

> ID：15337234
> 
> 赞同：3
> 
> 时间：2013-03-11T11:17:12.040
> 
> 标签：windows-7, hadoop, cygwin

**我正在使用带有 cygwin 的窗口 7**安装**hadoop 1.1.1**后，当我启动服务时出现问题***JAVA_HOME 路径未设置**等等.... 命令：bin/start-all.sh

![在此处输入图像描述](../Images/21bab14777201b1a0ccd968e780db1d2.png)

但是当我输入**bin/hadoop version**命令而不是返回正确的版本时，我也设置了 java 环境路径..

请建议我有什么问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T06:15:59.710

您应该在 ~/.bashrc 文件中设置 $JAVA_HOME。

# paypal-sandbox - 如何登录 Sandbox Paypal 帐户？

> ID：15337235
> 
> 赞同：17
> 
> 时间：2013-03-11T11:17:18.360
> 
> 标签：paypal-sandbox

Paypal 最近更改了他们在 developers.paypal 中的用户界面，因此，我找不到可以登录旧*SANDBOX*帐户的位置。

在新的 developer.paypal.com 中，在*Application*选项卡上，我选择了*沙盒*帐户，

在以下链接中，

[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)

我得到一个按钮“*使用贝宝登录*”。但是当我尝试登录时，它会显示一条消息“*无效的电子邮件*”，即使我的电子邮件和密码完全正确。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-10-23T15:50:45.960

转到[https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)，然后输入您通过[https://developer.paypal.com注册时自动创建的帐户](https://developer.paypal.com)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-11T18:01:20.730

新的开发者帐户要求您首先使用真实的 PayPal 帐户电子邮件地址和密码登录。登录后，您可以按照以下步骤恢复您的测试帐户。

*   登录[https://developer.paypal.com](https://developer.paypal.com)
*   单击应用程序
*   单击沙盒帐户
*   点击“导入数据”
*   输入旧开发者帐户的电子邮件地址和密码。

由于您有权访问旧版开发人员帐户，因此您还需要删除 cookie 和缓存。奇怪的是，如果您不这样做，登录帐户或访问测试帐户会出现一些问题。这也将解决无效的电子邮件错误。

如果您在此之后有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-13T18:22:37.810

您可以在这里登录paypal的沙盒环境[https://www.sandbox.paypal.com/us/home](https://www.sandbox.paypal.com/us/home)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T20:02:13.323

如果您从未拥有过旧帐户，则可以从开发者资料中访问它。

1.  访问 developer.paypal.com
2.  单击应用程序
3.  选择沙盒帐户
4.  在“帐户详细信息”下，您会看到“个人资料”选项卡
5.  电子邮件和密码是您的沙盒配置文件，您可能必须选择一个密码。

# db2 - DB2：如果不存在则添加列

> ID：15337236
> 
> 赞同：3
> 
> 时间：2013-03-11T11:17:20.107
> 
> 标签：db2

我有一个名为 backup 的模式和一个名为 test 的表。如果表中不存在名为 Test1 的表，我需要向表中添加一列。你能告诉我怎么做吗？

以下查询返回一个错误。

```
BEGIN ATOMIC
IF (NOT EXISTS(
SELECT 1 FROM SYSCAT.COLUMNS WHERE TABNAME ='TEST_TABLE' AND COLNAME = 'TEST2'))
THEN 
     ALTER TABLE TEST_TABLE ADD TEST2 varchar(255);
END IF;
END
GO 
```

我收到的错误是这样的：

```
[Error] Script lines: 1-8 --------------------------
 DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=ALTER TABLE TEST_TABLE ADD TEST;E = 'TEST2'))
THEN 
;<compound_return>, DRIVER=3.50.152
 Message: An unexpected token "ALTER TABLE TEST_TABLE ADD TEST" was found following "E = 'TEST2'))
THEN 
".  Expected tokens may include:  "<compound_return>".. SQLCODE=-104, SQLSTATE=42601, DRIVER=3.50.152
 Line: 5 
```

谢谢，-迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:00:46.780

您不能在过程中执行动态查询。使用立即执行。

```
CREATE PROCEDURE ASP.CHECKTEST
     DYNAMIC RESULT SETS 0
     MODIFIES SQL DATA
     LANGUAGE SQL
BEGIN
IF (NOT EXISTS(
SELECT 1 FROM SYSCAT.COLUMNS WHERE TABNAME ='TEST_TABLE' AND COLNAME = 'TEST2'))
THEN
    EXECUTE IMMEDIATE 'ALTER TABLE ASP.TEST_TABLE ADD COLUMN TEST2 varchar(255)';
END IF; 
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:25:42.027

您不能在 SP 中包含 DDL，因为--

如果例程正确解析，引擎必须存储一个包并在系统目录中填充无数表，包括例程和其他数据库对象之间的依赖关系。如果 SP 的主体包含对尚不存在或具有变量名称或将被更改或依赖于 SP 内部较早创建、删除或更改的对象的引用，则它根本无法做到这一点。

如果你把同样的东西放在 PREP & EXECUTE 里面，那么它就会变成一个动态语句，并在编译时被忽略。

# php - MySQL SPATIAL 扩展和 PHP

> ID：15337237
> 
> 赞同：2
> 
> 时间：2013-03-11T11:17:22.120
> 
> 标签：php, mysql, google-maps, spatial

我需要帮助..我如何使用 php 的空间数据..我将 shape(esri geo) 文件作为空间数据上传到 mysql。现在我找不到任何有用的信息来获取这些数据并回显它......你能告诉我任何网站或信息吗......

找到这个但什么都不懂

```
SET @g = GeomFromText('LineString($longitude1 $latitude1,$longitude2 $latitude2)')
$query="SELECT AsBinary(SHAPE2), color FROM $layer WHERE MBRIntersects(SHAPE2,@g)";
...
$result=mysql_unbuffered_query($query); 
```

[空间](http://early-medieval-gis.blogspot.com/2009/10/working-with-spatial-data-in-binary.html)

PS对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-03T17:33:43.223

如果你想深入分析数据，我建议不要使用 MySQL 空间扩展。最好选择 PostgreSQL。在 MySQL 中，缓冲区功能仅在版本 > 5.5 中可用，并且 MySQL 没有投影功能，并且 SRID 仅作为元数据存储。

# javascript - iPhone 上的视频标签 - 自动全屏

> ID：15337249
> 
> 赞同：0
> 
> 时间：2013-03-11T11:17:52.220
> 
> 标签：javascript, iphone, html, html5-video

当我在 iphons safari 上播放视频时，会自动进入全屏模式。你能用 JavaScript 事件检测到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:44:25.163

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView 
{
    [webView sizeToFit];

} 
```

# macos - NSArrayController+cocoa 绑定+核心数据：在应用启动时获取选中的行

> ID：15337251
> 
> 赞同：1
> 
> 时间：2013-03-11T11:18:06.973
> 
> 标签：macos, cocoa-bindings, nsarraycontroller

我正在使用可可绑定、NSArrayController 和核心数据。刚启动后，应用程序必须得到第一个项目，我在 applicationDidFinishLaunching 中尝试这个：

```
1\. Entity *ent = arrayManager.arrangedObjects[0];

2\. Entity *ent = arrayManager.selectedObjects[0]; 
```

---> 错误提示数组为空。为什么 ？

我不明白的另一件事是，当应用程序出现时，在 tableView 中有一个选定的行，但是当我记录这个时：

```
NSLog(@"selected row in applicationDidFinishLaunching = %li",self.TableViewController.tableView.selectedRow); 
```

`log: -1`--> 没有选择行！为什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:27:48.910

您必须在 ArrayController 上进行 fetch`applicationDidFinishLaunching:`才能在那里看到您的实体。在从 ArrayController 访问任何内容之前尝试这样做：

```
 - (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
     NSError *error;
     [arrayManager fetchWithRequest:nil merge:NO error:&error];
     Entity *ent = arrayManager.arrangedObjects[0];
 } 
```

# ios - 当 UITableViewCell 在屏幕上滚动时变得不可见时如何添加自定义代码？

> ID：15337256
> 
> 赞同：1
> 
> 时间：2013-03-11T11:18:19.840
> 
> 标签：ios, cocoa-touch, uitableview

[这个问题与这个](https://stackoverflow.com/questions/841042/detect-when-uitableviewcell-goes-off-the-screen)问题非常相似，但那里没有答案，我无法对那个问题发表评论或做任何事情，并且情况略有不同。

我有自定义 tableViewCell，其中包含一些自定义视图。这个自定义视图包含 UIImageView 和 UIActivityIndi​​catorView ，并且它还附加了自定义加载器类。当这个视图第一次出现时，它的图像被隐藏并且 activityIndi​​cator 正在动画，然后启动加载过程（图像正在从某个 URL 加载），当图像成功加载时，它会出现在我的自定义视图中。一切都很完美，但是当我快速滚动 tableView 时，我有很多后台 NSURLConnections 徒劳无功。我还创建了一些方法来取消我的后台连接，但是当我需要它时我无法调用它们 - 当 tableViewCell 离开屏幕时不会调用任何方法。我真的需要一些活动，这样我就可以取消我的后台连接。有没有办法做到这一点？我真的不

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:37:38.107

`prepareForReuse:`我的建议是在你的 UITableViewCell 的方法中取消你的网络请求。这很容易，也意味着如果单元格稍微滚动到屏幕外然后又重新打开，您将不会取消请求。（您也可以在`tableView:cellForRowAtIndexPath:`返回单元格以重复使用时执行此操作。）

您可能还想在快速滚动时首先避免启动这些负载；您可以停止加载`scrollViewWillBeginDragging:`并等待，例如， `scrollViewDidEndDragging:willDecelerate:`从表格视图回调，然后再开始对可见单元格的实际 URL 请求。

# javascript - 焦点在可编辑表中不起作用

> ID：15337259
> 
> 赞同：1
> 
> 时间：2013-03-11T11:18:25.003
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我想通过 Tab 键导航，但 focus() 不起作用。这是引导表。这是我的代码。检查最后两行。当我单击 n 个单元格并再次导航时。它正在工作。

表代码：

```
 <table class="table table-bordered" id="tab1">
        <thead class="mbhead">
           <tr class="mbrow">
              <th></th>
              <th>A</th>
              <th>B</th>
              <th>C</th>
              <th>D</th>
              <th>E</th>
              <th>F</th>
              <th>G</th>
              <th>H</th>
              <th>I</th>
              <th>J</th>
              </tr>
       </thead>
       <tbody>
        <tr>
         <td>1</td>
         <td>asd</td>
         <td></td>
         <td></td>
         <td></td>
         <td></td>
         <td></td>
         <td>ddd</td>
         <td></td>
         <td></td>
         <td></td>
      </tr>
       <tr>
        <td>2</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
     </body>
    </table> 
```

编辑代码：

```
 function init(){

       $("#tab1 tr td:not(:first-child)").on("click", function (e) {
           console.log(e);
             mytd=$(this);//mytd is defined here
            if(e.currentTarget.contentEditable != null){
                 $(e.currentTarget).attr("contentEditable",true);
             }
            else{
                  $(e.currentTarget).append("<input type='text'>");
             }
          }); 

          $(this).keydown(function (event) {

             if (event.keyCode == 9){                       // tab key for navigation
                       event.preventDefault();
                       $(mytd).next('td').html("abcd");//working
                       $(mytd).next('td').focus();//cursor is not moving
                       return false;
                }
            }      
          } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:24:58.313

In default, browser only make the elements focusable that are interactive, like buttons, links and input elements. To make other elements focusable you can use the `tabindex` attribute.

`tabindex` has a couple states:

*   `tabindex="-1"` makes an element focusable, but not through the tab-key
*   `tabindex="0"` makes an element focusable, and uses the default order when using the tab-key
*   `tabindex="1"` and higher numbers makes an element focusable, the tab-key follows the order of the `tabindex` numbers

So in your case, I would choose to add `tabindex="0"` to the elements that have `contenteditable` enabled

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:24:04.760

A `TD` element can't be focused.

# php - blob 读取 txt php

> ID：15337262
> 
> 赞同：0
> 
> 时间：2013-03-11T11:18:28.437
> 
> 标签：php, azure, blob

我的天蓝色 blob 存储中有一个 txt（纯文本）文件。现在我想把它拿出来处理数据。我能做的是下载带有直接路径的文件，它可以正常工作并返回我上传的文件。

使用普通`.txt`文件（不是在 blob 中，而是在网站上），它工作得很好，但是 blob 文件并没有给我我需要的东西。该代码显示了它如何处理非 blob 文件。

```
$file = $myData->ContentURI;
$fh = fopen($file, 'r');
$theData = fread($fh, filesize($file));
echo $theData;
fclose($fh); 
```

现在我想要相同（或相似）的代码来读取 blob txt。我确定该文件确实存在，因为我可以下载它。

* * *

**编辑：**

设法自己修复它，我用以下代码更改了上面提到的代码：

```
$file = $myData->ContentURI;
echo file_get_contents($file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:30:17.450

您可以尝试以下任一代码：

选项 1：读取流

```
<?php
$blobUrl = "your blob's URL";
$fh = fopen($blobUrl, 'r');
$data=''; 
$size=102400;
while(!feof($fh)) 
    $data.=fread($fh,$size); 
fclose($fh); 
echo $data;
?> 
```

选项 2：使用 file_get_contents 读取 URL

```
<?php
$blobUrl = "your blob's URL";
$theData = file_get_contents($blobUrl);
echo $theData;
?> 
```

~~请确保包含 blob 的 blob 容器没有“私有”ACL。它应该具有“Blob”或“Container”ACL。您可以在此处阅读有关 ACL 的更多信息：http://msdn.microsoft.com/en-us/library/windowsazure/dd179354.aspx。如果您希望将 blob 容器保持私有，则必须使用共享访问签名来创建临时 URL 以从 blob 容器中读取 blob。您可以在此处阅读有关共享访问签名的更多信息：http://msdn.microsoft.com/en-us/library/windowsazure/hh508996.aspx。~~

# javascript - 如何保护应用程序免受第 3 方 js 库中存在的 XSS 向量的影响？

> ID：15337268
> 
> 赞同：4
> 
> 时间：2013-03-11T11:19:00.963
> 
> 标签：javascript, security, libs

我在一个 android 移动应用程序中使用各种 3rd 方库，如 cordova.js、jquery、jquery mobile、mobilizer 等。通过不安全地使用 eval、settimeout、inner/outerhtml，这些库被发现具有各种 XSS 向量等等。

有什么方法可以覆盖/修复这些安全漏洞并在我的应用程序中安全地使用这些库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:03:57.557

这些漏洞应该报告给供应商，你应该使用他们的补丁。

利用[基于 DOM 的 XSS](https://www.owasp.org/index.php/DOM_Based_XSS)和 android 是可能的，但是攻击向量更加有限，因为通常攻击者无法使用简单的 GET 或 POST 请求来利用这些漏洞之一。

# java - 从 java 邮件发送支持 Outlook 的 HTML 邮件正文

> ID：15337269
> 
> 赞同：0
> 
> 时间：2013-03-11T11:19:08.820
> 
> 标签：java, html, email

我正在使用以下代码，它在浏览器中运行良好，但在 Outlook 中显示的格式不正确：

```
MimeMultipart mimeMultipart = new MimeMultipart();
MimeBodyPart bodyPart = new MimeBodyPart();

bodyPart.setText("<html><body><font size='3px' face='Times New Roman'>"
    + removeMultipleSpaces(msgbody) + "</font></body></html>");
mimeMultipart.addBodyPart(bodyPart);
bodyPart.setDescription("Text");
bodyPart.setHeader("Content-Type", "text/html; charset=utf-8" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-10T08:29:29.997

正如您在评论中提到的，您想要添加图像。为图像创建一个 MimeBodyPart，创建一个 cid，并在图像的 MimeBodyPart 上执行 setContentID：

```
import javax.mail.internet.*;

MimeMultipart content = new MimeMultipart("related");

MimeBodyPart mainPart = new MimeBodyPart();
mainPart.setText("<html><body><img src=\"cid:123456789@localhost\"></body></html>","UTF-8", "html");
content.addBodyPart(mainPart);

MimeBodyPart imagePart = new MimeBodyPart();

java.net.URL img1 = Example.class.getClassLoader().getResource("image.png");
imagePart.setDataHandler(new DataHandler(img1));
//or:
//imagePart.attachFile("resources/image.png");

imagePart.setContentID("<123456789@localhost>");   // to embed
imagePart.setDisposition(MimeBodyPart.INLINE);  // to embed
content.addBodyPart(imagePart); 
```

# android - 正确使用线程和计时器

> ID：15337272
> 
> 赞同：0
> 
> 时间：2013-03-11T11:19:14.223
> 
> 标签：android

我有三个功能——动画、声音、振动。所有这些单独工作都很好。我需要同时启动所有这 3 个功能并继续播放 3 秒钟然后停止。我希望每 15 秒后重复一次。实现这一点的正确方法是什么？我的振动码如下

```
public void vibration(){            
int dash = 1000;    
int medium_gap = 500;

long[] pattern = { 0,  // Start immediately
    dash, medium_gap,dash , medium_gap
};
// Only perform this pattern one time (-1 means "do not repeat")
v.vibrate(pattern, -1); 
```

}

动画代码：

```
linear = (LinearLayout) findViewById(R.id.lay);// this line is after setContentView in onCreate

public void anim(){    
    drawable.addFrame(new ColorDrawable(Color.RED), 1000);  
    drawable.addFrame(new ColorDrawable(Color.WHITE), 500);         
    drawable.setOneShot(false);     
    linear.setBackgroundDrawable(drawable);         
    drawable.start();     
 } 
```

使用 soundpool 的声音：

```
sp = new SoundPool(5, AudioManager.STREAM_NOTIFICATION, 0);
buzzer = sp.load(this, R.raw.buzzer, 0);
public void sound(){
    sp.play(buzzer, 1,1, 0, 0, 1); //start alert tone
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T17:41:51.700

您需要实现线程以在指定时间内一起运行。

```
Thread myTime = new Thread()
{
      void run(){
           sleep(3000) //sleep untill 3 sec than stop 
           //your code
      }
} 
```

# jmeter - 在 jmeter 中的整个测试计划中保持（设置 Cookie）JSESSIONID

> ID：15337278
> 
> 赞同：0
> 
> 时间：2013-03-11T11:19:35.643
> 
> 标签：jmeter, setcookie, jsessionid

我必须测试必须维护会话的网络服务器。为此，我需要在 jmeter 中维护会话 ID。它一直在为 ThreadGroup 工作，因为我为每个线程组使用 HTTP Cookie 管理器。
但我想在包含多个线程组的测试计划中使用相同的**JSESSIONID 。**无法做到这一点。我尝试在全局范围内使用 HTTP Cookie Manager 进行测试计划，但它没有用。

我正在使用 jmeter 2.5 版本。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T15:51:28.697

您可能想在当前的 2.9 版本中尝试这个，它似乎已经改进了很多。

# php - 如何将日期 11/03/2013（即 2013 年 3 月 11 日）转换为 php 中的 unix 时间戳？

> ID：15337281
> 
> 赞同：-3
> 
> 时间：2013-03-11T11:19:43.503
> 
> 标签：php, unix-timestamp

我想将上述格式的日期转换为等效的 Unix 时间戳。我搜索了很多，但找不到任何解决方案。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:25:44.497

又快又脏：

```
$pieces = explode("/", "11/03/2013");
echo strtotime($pieces[1]."/".$pieces[0]."/".$pieces[2]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:22:50.283

我认为你需要使用这个`strtotime($date);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:23:05.723

试试这个 strtotime('11/03/2013');

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T11:23:11.050

```
strtotime('Jun 26,12'); 
```

这将解决你所有的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T11:27:43.100

***如果分隔符是斜线 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。***

试试用这个...

```
strtotime( str_replace( '/', '-', '11/03/2013') ) ); 
```

**[你可以在这里](https://stackoverflow.com/q/12278943/1288198)**找到更多细节......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T11:36:46.340

如果你有一个非常特殊的格式，那么使用 DateTime

```
DateTime::createFromFormat('11-2013.03', 'd-Y.m')->getTimestamp() 
```

如果它是正常的日期格式，则使用 strtotime()

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T11:40:33.610

PHP >= 5.2

```
$date = DateTime::createFromFormat('d/m/Y', '11/03/2013');
echo $date->format('U'); 
```

PHP >= 5.3

```
$date = DateTime::createFromFormat('d/m/Y', '11/03/2013');
echo $date->getTimestamp(); 
```

# android - 如何在 Android 的 JavaCV 中将灰度 IplImage 转换为位图？

> ID：15337283
> 
> 赞同：1
> 
> 时间：2013-03-11T11:19:53.780
> 
> 标签：android, bitmap, javacv, grayscale

我正在开发一个 Android 应用程序，该应用程序`Bitmap`将从`ImageView`. 将其转换`Bitmap`为 JavaCV `IplImage`，然后转换为灰度，如下所示：

```
IplImage image = IplImage.create(width, height, IPL_DEPTH_8U, 4);
bitmap.copyPixelsToBuffer(image.getByteBuffer());
IplImage _3image = IplImage.create(width, height, IPL_DEPTH_8U, 3);
IplImage _1image = IplImage.create(width, height, IPL_DEPTH_8U, 1);
cvCvtColor(image, _3image, CV_BGRA2BGR);
cvCvtColor(_3image, _1image, CV_RGB2GRAY); 
```

但是`RuntimeException: Buffer not large enough for pixels`当我这样做时我得到了

```
Bitmap x = Bitmap.createBitmap(width, height, Config.ARGB_8888);            
x.copyPixelsFromBuffer(_1image.getByteBuffer()); 
```

任何帮助，将不胜感激。谢谢你。

# php - 如何从我的网站获取 Facebook 上分享的前 7 篇文章

> ID：15337288
> 
> 赞同：0
> 
> 时间：2013-03-11T11:20:17.793
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

首先：我的问题不像这个问题[如何从文章中获取 Facebook 的点赞、分享、评论计数](https://stackoverflow.com/questions/6137414/how-to-fetch-facebook-likes-share-comments-count-from-an-article) 或回答不佳的问题[如何使用 Graph API 或 FQL 获取 Facebook 上共享的前 10 篇文章的列表？](https://stackoverflow.com/questions/14316467/how-can-i-get-the-list-of-top-10-artciles-shared-on-facebook-using-graph-api-or)

例如：

```
mysite.com/viewArticle/1
mysite.com/viewArticle/2
mysite.com/viewArticle/3
...etc 
```

每个文章页面或 URL 都有自己的分享和喜欢 Facebook 按钮。我需要知道使用 FQL 或 Graph api 的任何方法，这些方法可以让我知道从 mysite.com/viewArticle/* 分享或喜欢的前 7 篇文章。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:21:40.113

不，这是不可能的，您必须在数据库中记录`likes`单个`each`文章并最终解决。

# c# - 在 Java 和 C# 中将 base64 编码字节转换为不同的字符串

> ID：15337289
> 
> 赞同：5
> 
> 时间：2013-03-11T11:20:18.403
> 
> 标签：c#, java, base64, encode

我有一些代码可以登录到第 3 方解决方案，这需要我对密码进行编码。他们为我提供了一个 Java 示例，但我还需要用 C#（和 PHP，稍后）开发它。

我在 C# Windows 应用程序和 Java Android 应用程序中有代码，并且具有相同的输出，它们似乎运行良好，直到我尝试将密码字节转换为 base 64 编码字符串。

这是Java代码：

```
enc = Base64.encodeBase64(ciphertext);
return enc.toString(); 
```

这是 C# 代码：

```
return System.Convert.ToBase64String(cipherBytes); 
```

我可以看到 Java 应用程序中的密文字节与 C# 应用程序中的相同，除了它们是有符号的，并且 Java 中的 base64 编码字节如果转换为 ASCII 值，将给出我在其中看到的字符串C# 应用程序，但 Java 中的 enc.ToString() 没有返回相同的字符串。

### 更多信息

爪哇

```
ciphertext = 66, 67, -69, 24, -48, -23, 84, -5
encodeded64 = 81, 107, 79, 55, 71, 78, 68, 112, 86, 80, 115, 61
to string = [B@41771ea8 
```

C＃

```
cipherBytes = 66, 67, 187, 24, 208, 233, 84, 251
result = QkO7GNDpVPs= 
```

非常感谢您的帮助。（这是我在这里的第一篇文章，所以如果我违反任何规则，请随时告诉我）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T11:21:58.010

您正在使用的 Java 代码正在调用`toString()`一个字节数组，它*总是*会为您提供一个形式为的字符串`[B@....`

你*可以*使用：

```
return new String(enc, "ASCII"); 
```

...但我建议更改为使用对字节数组进行编码的 API 会返回一个字符串作为开头。我喜欢这个[公共领域的实现](http://iharder.net/base64)。

```
return Base64.encodeBytes(cipherText); 
```

# authentication - 如何修复 Tomcat 警告：尝试对锁定的用户进行身份验证？

> ID：15337296
> 
> 赞同：27
> 
> 时间：2013-03-11T11:20:42.220
> 
> 标签：authentication, configuration, tomcat7, catalina

我将 Tomcat 7 与 Spring 和 JPA 应用程序、数据库 MySQL 一起使用。一切正常。但有时会出现 realm.LockOutRealm 身份验证问题。我还在我的应用程序中使用了连接池，例如：

**持久性.xml：**

```
<properties>
      <property name="hibernate.connection.username" value="---"/>
      <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
      <property name="hibernate.connection.password" value="----------"/>
      <property name="hibernate.connection.url" value="jdbc:mysql://----------?autoReconnect=true"/>
      <!--Connection Pooling c3p0 configuration-->
      <!--Minimum number of JDBC connections in the pool. Hibernate default: 1-->
      <property name="hibernate.c3p0.min_size" value="5"/>
      <!--Maximum number of JDBC connections in the pool. Hibernate default: 100-->
      <property name="hibernate.c3p0.max_size" value="20"/>
      <!--When an idle connection is removed from the pool (in second). Hibernate default: 0, never expire.-->
      <property name="hibernate.c3p0.timeout" value="300"/>
      <!--Number of prepared statements will be cached. Increase performance. Hibernate default: 0 , caching is disable.-->
      <property name="hibernate.c3p0.max_statements" value="50"/>
      <!--idle time in seconds before a connection is automatically validated. Hibernate default: 0-->
      <property name="hibernate.c3p0.idle_test_period" value="300"/>
</properties> 
```

**server.xml 中的领域看起来像：**

```
<!-- Use the LockOutRealm to prevent attempts to guess user passwords
           via a brute-force attack -->
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
               resourceName="UserDatabase"/>
      </Realm>

      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        --> 
```

我在网上搜索，但找不到解决方案。是否有任何人进行蛮力攻击，如果有的话，解决方案是什么。

登录错误`Catelina.out`是：

```
Mar 02, 2013 3:28:34 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "tomcat"
Mar 02, 2013 3:29:49 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "tomcat"
Mar 02, 2013 3:31:04 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "tomcat"
Mar 02, 2013 3:37:25 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "admin"
Mar 02, 2013 3:38:47 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "admin"
Mar 02, 2013 3:39:58 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "admin"
Mar 02, 2013 3:46:31 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "coyote"
Mar 02, 2013 3:52:49 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "manager"
Mar 02, 2013 3:59:03 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "administrator"
Mar 02, 2013 4:06:38 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:07:52 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:09:17 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:10:35 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:11:47 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:13:02 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:14:17 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"
Mar 02, 2013 4:15:34 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "root"

> Hibernate: select

---------------------------------- 
javax.persistence.PersistenceException: 
org.hibernate.exception.JDBCConnectionException: could not execute query

(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1118)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3321)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1940)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2275)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:116)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:674)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2220)
    ... 39 more
Caused by: java.net.SocketException: Broken pipe 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-11T12:19:36.067

上面的警告意味着您多次无法对用户 tomcat 进行身份验证。Tomcat怀疑是对用户tomcat的暴力攻击。

您在应用程序中使用什么身份验证？您在应用程序的 web.xml 中使用什么登录配置？

resourceName "UserDatabase" 的默认配置是文件 conf/tomcat-users.xml。您是否更改了资源名称“UserDatabase”的配置？

您可以在文件 server.xml 中找到资源 UserDatabase 的配置：

```
<Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" /> 
```

默认情况下，所有用户都被评论。为了能够使用 XML 文件中的用户，您应该取消注释。然后，您将能够使用用户 tomcat 登录：

```
<tomcat-users>
  <role rolename="tomcat"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
</tomcat-users> 
```

最好的祝福，

迈克尔

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-21T08:31:25.663

[（对于此页面的 16k 访问者：]

由于这是在 SO，我假设读者是**开发人员**。）

此错误表明您有一个脚本/用户尝试使用不正确的用户/密码登录。解决这个问题很简单，只需将正确的用户/密码对添加到文件中并**重新启动**服务器。`ApacheTomcat\conf\**tomcat-users.xml**`

 **还要确保您正确设置了**角色。**例如，如果您向 发送基本的 HTTP 身份验证请求`localhost:8080/manager`，您将需要该`manager-gui`角色：

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
  <role rolename="**manager-gui**"/>
  <user username="**foobar**" password="**foobar**" roles="tomcat,role1, **manager-gui** "/>
</tomcat-users> 
```**

# android - MediaMetadataRetriever 总是显示相同的元数据

> ID：15337299
> 
> 赞同：0
> 
> 时间：2013-03-11T11:20:55.407
> 
> 标签：android, metadata, android-mediaplayer

我在原始目录中有两个 MP3 文件。

当我按下按钮时，随机选择 2 个 mp3 文件之一并开始播放，显示歌曲的元信息（艺术家和标题）。但是当我再次按下按钮并且另一首歌曲开始播放时，元数据仍然是相同的（第一首歌曲的）。当歌曲改变时它不会改变。这是我的代码：

```
public class MainActivity extends Activity {

Button playList_Black;
TextView textView;
MediaPlayer mp;
ImageView cover;
Random r = new Random();

int [] playlist_Black    = {R.raw.music_a, R.raw.music_b};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    playList_Black    = (Button)findViewById(R.id.btn_black);
    textView = (TextView)findViewById(R.id.textView1);
    cover = (ImageView)findViewById(R.id.imageView1);
}

@SuppressLint("NewApi")
protected String loadMp3DataFile(int i, Context context) {

    String mp3_parameter;

    String uriPath = "android.resource://" + getPackageName() + "/raw/" + 
                      getResources().getResourceEntryName(i);
    Uri uri = Uri.parse(uriPath);

    // load data file
    MediaMetadataRetriever metaRetriever = new MediaMetadataRetriever();
    metaRetriever.setDataSource(context, uri);
    String artist =  metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST);
    Log.e("artist2: ", artist);
    String title  = metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE);
    byte[] songCover = metaRetriever.getEmbeddedPicture();

    if(songCover != null) {
        cover.setImageBitmap(BitmapFactory.decodeByteArray(songCover, 0, songCover.length));
    }
    else {
        cover.setImageResource(R.drawable.ic_launcher);
    }

    //return parameter
    mp3_parameter = (artist + "\n" + title);

    // close object
    metaRetriever.release();

    return mp3_parameter;
}

public void PlayMusic(int playlist) {

    if(mp != null) {
        if(mp.isPlaying()){
        mp.stop();
        mp.reset();
        mp = MediaPlayer.create(getApplicationContext(), playlist);
        try {
            mp.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mp.start();
        }
        else if(mp.isPlaying() == false) {
            mp = MediaPlayer.create(getApplicationContext(), playlist);
            mp.start();
        }
    }
    else {
    mp = MediaPlayer.create(getApplicationContext(), playlist);
    mp.start();
    }
}

public void PlaylistBlack(View v) {

    int i = playlist_Black[r.nextInt(playlist_Black.length)];
    textView.setText(loadMp3DataFile(i, getApplicationContext()));
    Log.e("Ausgabe: ", "" + i); 
    Log.e("Ausgabe: ", "" + getResources().getResourceEntryName(i));    
    PlayMusic(i);
} 
```

我究竟做错了什么？有什么解决办法和建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:13:47.893

代码是正确的，它在模拟器上运行良好。但是当我在智能手机上运行该项目时，我遇到了上面提到的问题。它只显示一首歌曲的相同元信息。任何解决方案，在智能手机上工作？

# visual-studio - 从 Visual Studio 查看和搜索你的库 doxygen

> ID：15337300
> 
> 赞同：3
> 
> 时间：2013-03-11T11:20:56.060
> 
> 标签：visual-studio, doxygen

我的问题很简单。我有一个项目使用了一些用[`doxygen`](http://www.doxygen.org).

是否有可能使用 Visual Studio（或在扩展的帮助下）通过单击或通过键盘快捷键查看与类或方法关联的文档，而无需离开 Visual Studio？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:16:34.560

我偶然发现了[Doxygen Browser Add-in for Visual Studio](http://doxygenbrowseraddin.codeplex.com/)，它看起来相当不错。与当前使用的大多数 Visual Studio 版本兼容。

除此之外，通过（显然很快）编写一个 Visual Studio 扩展可以获得更多的 DIY 解决方案，如此[处所述](http://innovativesolution.wordpress.com/2009/08/21/doxygen-intergration-in-visual-studio-environment/)。

# gwt - GWT HeaderPanel 中中间元素的高度

> ID：15337304
> 
> 赞同：2
> 
> 时间：2013-03-11T11:21:06.187
> 
> 标签：gwt

我正在使用 GWT `HeaderPanel`。作为中间元素，我使用`DockLayoutPanel`如下：

```
<g:DockLayoutPanel width="1200px" height="100%">
    <g:west size="220">
        <g:HTMLPanel styleName="{style.debug}">
            something <br />
            something <br />
        </g:HTMLPanel>
    </g:west>
</g:DockLayoutPanel> 
```

页面呈现良好，但如果浏览器窗口垂直缩小，中间面板会位于页脚的顶部，这当然不是您想要的标题面板。

我更喜欢有固定的页脚，这就是为什么我没有使用`DockLayoutPanel`. 我究竟做错了什么？谢谢！

编辑：好的，实际上，如果窗口垂直增长，中间面板仍然不会调整大小

EDIT2： HeaderPanel 直接在根面板中，如下所示：

```
<g:HeaderPanel>
    <my.shared:Header></my.shared:Header>
    <my.shared:Middle></my.shared:Middle>
    <my.shared:Footer></my.shared:Footer>
</g:HeaderPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:21:50.373

布局面板 101：`HeaderPanel`是一个`RequiresResize`面板，因此必须将其放入`ProvidesResize`面板中，例如`RootLayoutPanel`, （或作为`HeaderPanel`[1] 的中间面板）或指定明确的固定大小。

[1]`HeaderPanel`没有实施`ProvidesResize`，因为它只履行其中间面板的合同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-14T20:30:37.653

以下方法对我有用。它基于 Zack Linder 的建议 [Google Web Toolkit ›布局面板问题](https://groups.google.com/forum/#!topic/google-web-toolkit/Fx6uZyaQxDA)

(1) 将 HeaderLayoutPanel 附加到您的 RootLayoutPanel。headerLayoutPanel 是您创建的扩展 HeaderPanel 并实现 ProvidesResize() 的类。

```
import com.google.gwt.user.client.ui.HeaderPanel;
import com.google.gwt.user.client.ui.ProvidesResize;
import com.google.gwt.user.client.ui.SimpleLayoutPanel;
import com.google.gwt.user.client.ui.Widget;

public class HeaderLayoutPanel extends HeaderPanel implements ProvidesResize {
SimpleLayoutPanel contentPanel;

public HeaderLayoutPanel() {
    super();
    contentPanel=new SimpleLayoutPanel();
}

    @Override
    public void setContentWidget(Widget w) {
       contentPanel.setSize("100%","100%");
       contentPanel.setWidget(w);
       super.setContentWidget(contentPanel);
    }

    public void onResize() {
      int w=Window.getClientWidth();
      int h=Window.getClientHeight();
      super.setPixelSize(w, h);
    }
} 
```

(2)接下来，实例化一个HeaderLayoutPanel。页眉和页脚小部件被分配了一个固定的高度（例如菜单栏高度），并且它们的宽度会自动调整为面板的宽度。中心小部件应该是 ProvidesSize。我使用了一个布局面板。例如，

```
 public class AppViewer extends Composite implements MyApp.AppDisplay {

private HeaderLayoutPanel allContentsPanel;
MenuBar menuBarTop;
MenuBar menuBarBottom;
LayoutPanel dataPanel;

public AppViewer() {

    allContentsPanel = new HeaderLayoutPanel(); 
    menuBarTop = new MenuBar(false);
    menuBarBottom = new MenuBar(false);
    dataPanel = new LayoutPanel();

    menuBarTop.setHeight("30px");
    menuBarBottom.setHeight("20px");

    allContentsPanel.setHeaderWidget(menuBarTop);       
    allContentsPanel.setFooterWidget(menuBarBottom);                            
    allContentsPanel.setContentWidget(dataPanel);

    initWidget(allContentsPanel);
}

@Override
public void doOnResize() {
    allContentsPanel.onResize();
}   
  } 
```

(3) 中心小部件 (LayoutPanel) 将包含我在单独的 Composite 中定义的 DeckLayoutPanel（但您可以做任何您想做的事情）。例如，

```
 public class MyDataView extends Composite implements MyDataPresenter.DataDisplay {      
        private DockLayoutPanel pnlAllContents;
    private HorizontalPanel hpnlButtons;
    private HorizontalPanel hpnlToolbar;
    private VerticalPanel pnlContent;

    public MyView() {
    pnlAllContents=new DockLayoutPanel(Unit.PX);
    pnlAllContents.setSize("100%", "100%"); 
    initWidget(pnlAllContents);

    hpnlToolbar = new HorizontalPanel();
    hpnlToolbar.setWidth("100%");   
    pnlAllContents.addNorth(hpnlToolbar, 30);

    hpnlButtons = new HorizontalPanel();
    hpnlButtons.setWidth("100%");
    pnlAllContents.addSouth(hpnlButtons,20);

    pnlContent=new VerticalPanel(); 
    //center widget - takes up the remainder of the space
    pnlAllContents.add(pnlContent);

    ...
         }
} 
```

(4) 最后，所有内容都在 onModuleLoad() 类中绑定在一起：AppViewer 生成添加到 RootLayoutPanel 的显示，MyDataView 生成添加到容器的 display.asWidget()。例如，

```
public class MyApp implements EntryPoint,Presenter{

  private HasWidgets container=RootLayoutPanel.get();
  private static AppDisplay display;  
  private DataPresenter dataPresenter;

    public interface AppDisplay extends Display{
        @Override
        Widget asWidget();
        HasWidgets getContentContainer();
        void doOnResize();
        }

    @Override
    public void onModuleLoad() {
        display=new AppViewer();
        dataPresenter = new DataPresenter();
        display.getContentContainer().add(dataPresenter.getDisplay().asWidget());
        container.add(display.asWidget());
        bind();
        }

       @Override
       public void bind() {

    Window.addResizeHandler(new ResizeHandler() {
        @Override
        public void onResize(ResizeEvent event) {
            display.doOnResize();
        }
    });
        }

       @Override
       public com.midasmed.client.presenter.Display getDisplay() {
        return display;
       }
    } 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:45:51.780

`DockLayourPanel`好吧，我无法解决这个问题，但是对于未来的访问者：使用带有北、中和南组件的 a可以实现相同的（减去我无法解决的问题） 。

# java - 按包含三个值的对象对 ArrayList 进行排序

> ID：15337305
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:21:07.610
> 
> 标签：java, list, sorting, arraylist

我有一个 ArrayList 包含包含三个值的对象，现在我想按这些值对它们进行排序：

```
List<AvailablePeriod> periodList = new ArrayList<AvailablePeriod> 
```

一个 AvailablePeriod 对象包含：

```
DateTime start
DateTime end
int id 
```

我想让列表中的对象首先按开始排序，然后按结束和最后按 id 排序。

无法弄清楚排序..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:26:14.600

写一个比较器如下

```
 public class MyComparator implements Comparator<AvailablePeriod> {
    @Override
    public int compare(AvailablePeriod o1, AvailablePeriod o2) {
        int result = o1.getStart().compareTo(o2.getStart());
        if (result == 0) {
            result = o1.getEnd().compareTo(o2.getEnd());
        }
        if (result == 0) {
            result = Integer.valueOf(o1.getId()).compareTo(o2.getId());
        }
        return result;
    }
   } 
```

然后使用 Collection.sort 方法

```
List<AvailablePeriod> periodList = new ArrayList<AvailablePeriod>
Collections.sort(periodList , new MyComparator()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:45:41.403

```
xyz 类实现 Comparable {
    日期时间开始；
    日期时间结束；
    内部标识；

`@Override
public int compareTo(xyz o) {
    if (this.start.isBefore(o.start)) {
        return -1;

    } else if (o.start.isBefore(o.start)) {

        return -1;

    } else {
        if (this.end.isBefore(o.end)) {
            return -1;

        } else if (o.end.isBefore(this.end)) {

            return 1;

        } else {
            if (this.id > o.id) {
                return 1;

            } else if (this.id < o.id) {

                return -1;

            } else {
                return 0;
            }
        }

    }

}

}` 

你可以写这样的东西。然后使用 collections.sort(list)

```

# sql - SQL 日期格式问题

> ID：15337308
> 
> 赞同：1
> 
> 时间：2013-03-11T11:21:20.377
> 
> 标签：sql

我有以下查询，当我只是在 2012 年寻找数据时效果很好。现在我们在 2013 年，它变得有点混乱。我一直在尝试进行查询，它以如下所示的日期格式返回结果：2012 年 1 月，2012 年 2 月......然后还有 2013 年 1 月，2013 年 2 月。我将如何实现这一点？谢谢

```
SELECT 
    fp.name                                                  AS [Name],
    YEAR(fp.date)                                            AS [Year],
    SUM(CASE WHEN MONTH(fp.date) = '1'   THEN 1 ELSE 0 END)  AS [JAN],       
    SUM(CASE WHEN MONTH(fp.date) = '2'   THEN 1 ELSE 0 END)  AS [FEB],
    SUM(CASE WHEN MONTH(fp.date) = '3'   THEN 1 ELSE 0 END)  AS [MAR],
    SUM(CASE WHEN MONTH(fp.date) = '4'   THEN 1 ELSE 0 END)  AS [APR],
    SUM(CASE WHEN MONTH(fp.date) = '5'   THEN 1 ELSE 0 END)  AS [MAY],
    SUM(CASE WHEN MONTH(fp.date) = '6'   THEN 1 ELSE 0 END)  AS [JUN],
    SUM(CASE WHEN MONTH(fp.date) = '7'   THEN 1 ELSE 0 END)  AS [JUL],
    SUM(CASE WHEN MONTH(fp.date) = '8'   THEN 1 ELSE 0 END)  AS [AUG],
    SUM(CASE WHEN MONTH(fp.date) = '9'   THEN 1 ELSE 0 END)  AS [SEP],
    SUM(CASE WHEN MONTH(fp.date) = '10'  THEN 1 ELSE 0 END)  AS [OCT],
    SUM(CASE WHEN MONTH(fp.date) = '11'  THEN 1 ELSE 0 END)  AS [NOV],
    SUM(CASE WHEN MONTH(fp.date) = '12'  THEN 1 ELSE 0 END)  AS [DEC],
    COUNT(*)                                                 AS [Overall]

    FROM f_page_views fp

    WHERE fp.date > '2012-01-01 00:00:00.000'
    AND fp.date < '2013-12-31 00:00:00.000'

    GROUP BY 
    year(fp.date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:30:16.083

你可以使用类似的东西：

```
SELECT  fp.Name,
        [Jan 2012] = SUM(CASE WHEN fp.Date >= '20120101' AND fp.Date < '20120201' THEN 1 ELSE 0 END),
        [Feb 2012] = SUM(CASE WHEN fp.Date >= '20120201' AND fp.Date < '20120301' THEN 1 ELSE 0 END),
        [Mar 2012] = SUM(CASE WHEN fp.Date >= '20120301' AND fp.Date < '20120401' THEN 1 ELSE 0 END),
        [Apr 2012] = SUM(CASE WHEN fp.Date >= '20120401' AND fp.Date < '20120501' THEN 1 ELSE 0 END),
        [May 2012] = SUM(CASE WHEN fp.Date >= '20120501' AND fp.Date < '20120601' THEN 1 ELSE 0 END),
        [Jun 2012] = SUM(CASE WHEN fp.Date >= '20120601' AND fp.Date < '20120701' THEN 1 ELSE 0 END),
        [Jul 2012] = SUM(CASE WHEN fp.Date >= '20120701' AND fp.Date < '20120801' THEN 1 ELSE 0 END),
        [Aug 2012] = SUM(CASE WHEN fp.Date >= '20120801' AND fp.Date < '20120901' THEN 1 ELSE 0 END),
        [Sep 2012] = SUM(CASE WHEN fp.Date >= '20120901' AND fp.Date < '20121001' THEN 1 ELSE 0 END),
        [Oct 2012] = SUM(CASE WHEN fp.Date >= '20121001' AND fp.Date < '20121101' THEN 1 ELSE 0 END),
        [Nov 2012] = SUM(CASE WHEN fp.Date >= '20121101' AND fp.Date < '20121201' THEN 1 ELSE 0 END),
        [Dec 2012] = SUM(CASE WHEN fp.Date >= '20121201' AND fp.Date < '20130101' THEN 1 ELSE 0 END),
        [Jan 2013] = SUM(CASE WHEN fp.Date >= '20130101' AND fp.Date < '20130201' THEN 1 ELSE 0 END),
        [Feb 2013] = SUM(CASE WHEN fp.Date >= '20130201' AND fp.Date < '20130301' THEN 1 ELSE 0 END),
        [Mar 2013] = SUM(CASE WHEN fp.Date >= '20130301' AND fp.Date < '20130401' THEN 1 ELSE 0 END),
        [Apr 2013] = SUM(CASE WHEN fp.Date >= '20130401' AND fp.Date < '20130501' THEN 1 ELSE 0 END),
        [May 2013] = SUM(CASE WHEN fp.Date >= '20130501' AND fp.Date < '20130601' THEN 1 ELSE 0 END),
        [Jun 2013] = SUM(CASE WHEN fp.Date >= '20130601' AND fp.Date < '20130701' THEN 1 ELSE 0 END),
        [Jul 2013] = SUM(CASE WHEN fp.Date >= '20130701' AND fp.Date < '20130801' THEN 1 ELSE 0 END),
        [Aug 2013] = SUM(CASE WHEN fp.Date >= '20130801' AND fp.Date < '20130901' THEN 1 ELSE 0 END),
        [Sep 2013] = SUM(CASE WHEN fp.Date >= '20130901' AND fp.Date < '20131001' THEN 1 ELSE 0 END),
        [Oct 2013] = SUM(CASE WHEN fp.Date >= '20131001' AND fp.Date < '20131101' THEN 1 ELSE 0 END),
        [Nov 2013] = SUM(CASE WHEN fp.Date >= '20131101' AND fp.Date < '20131201' THEN 1 ELSE 0 END),
        [Dec 2013] = SUM(CASE WHEN fp.Date >= '20131201' AND fp.Date < '20140101' THEN 1 ELSE 0 END)
FROM    f_page_views fp
WHERE   fp.date > '2012-01-01 00:00:00.000'
AND     fp.date < '2013-12-31 00:00:00.000'
GROUP BY fp.Name; 
```

请注意，而不是使用`WHEN MONTH(fp.Date) = 1 AND YEAR(fp.Date) = 2012`I have used `WHEN fp.Date >= '20120101' AND fp.Date < '20120201'`，尽管这意味着后者会表现更好，特别是如果您有索引`fp.Date`

另一种方法是使用 PIVOT 函数：

```
WITH Data AS
(   SELECT  fp.Name,
            ViewMonth = DATEADD(MONTH, DATEDIFF(MONTH, 0, fp.Date), 0),
            Value = 1
    FROM    f_Page_Views
    WHERE   fp.date > '2012-01-01 00:00:00.000'
    AND     fp.date < '2013-12-31 00:00:00.000'
)
SELECT  *
FROM    Data
        PIVOT
        (   SUM(Value)
            FOR ViewMonth IN 
            (   [20120101], [20120201], [20120301], [20120401], [20120501], [20120601],
                [20120701], [20120801], [20120901], [20121001], [20121101], [20121201],
                [20130101], [20130201], [20130301], [20130401], [20130501], [20130601],
                [20130701], [20130801], [20130901], [20131001], [20131101], [20131201]
            ) pvt 
```

如果您需要基于提供的日期范围动态创建的列，则可以将动态 SQL 与上述任一方法一起使用：

```
DECLARE @SQL NVARCHAR(MAX) = '';
DECLARE @StartDate DATETIME = '20120101',
        @EndDate DATETIME = '20131231';

SELECT  @SQL = @SQL + ',' + QUOTENAME(LEFT(DATENAME(MONTH, StartDate), 3) + ' ' + DATENAME(YEAR, StartDate)) + ' = SUM(CASE WHEN fp.Date >= ''' + CONVERT(VARCHAR, StartDate, 112) + ''' AND fp.Date < ''' + CONVERT(VARCHAR, EndDate, 112) + ''' THEN 1 ELSE 0 END)'
FROM    (   SELECT  [StartDate] = DATEADD(MONTH, Number, @StartDate),
                    [EndDate] = DATEADD(MONTH, 1 + Number, @StartDate)
            FROM    Master..spt_values
            WHERE   Number BETWEEN 0 AND DATEDIFF(MONTH, @StartDate, @Enddate)
            AND     Type = 'P'
        ) d

SET @SQL = 'SELECT  fp.Name' + @SQL + ' FROM f_page_views fp WHERE fp.date > @Start AND fp.Date < @End GROUP BY fp.Name';

EXECUTE SP_EXECUTESQL @SQL, N'@Start DATETIME, @End DATETIME', @StartDate, @EndDate; 
```

或者

```
DECLARE @SQL NVARCHAR(MAX) = '';
DECLARE @StartDate DATETIME = '20120101',
        @EndDate DATETIME = '20131231';

SELECT  @SQL = @SQL + ',' + QUOTENAME(CONVERT(VARCHAR, DATEADD(MONTH, Number, @StartDate), 112))
FROM    Master..spt_values
WHERE   Number BETWEEN 0 AND DATEDIFF(MONTH, @StartDate, @Enddate)
AND     Type = 'P';

SET @SQL = 'WITH Data AS
            (   SELECT  fp.Name,
                        ViewMonth = DATEADD(MONTH, DATEDIFF(MONTH, 0, fp.Date), 0),
                        Value = 1
                FROM    f_Page_Views fp
                WHERE   fp.date > @Start
                AND     fp.date < @End
            )
            SELECT  *
            FROM    Data
                    PIVOT
                    (   SUM(Value)
                        FOR ViewMonth IN (' + STUFF(@SQL, 1, 1, '') + ')
                    ) pvt';

EXECUTE SP_EXECUTESQL @SQL, N'@Start DATETIME, @End DATETIME', @StartDate, @EndDate; 
```

# android - 在 openGl 和一些一般问题的帮助下 2D 游戏的可扩展性

> ID：15337309
> 
> 赞同：0
> 
> 时间：2013-03-11T11:21:20.430
> 
> 标签：android, canvas, opengl-es

我计划将我的 2D 角色扮演游戏原型重新设计为“真实产品”。在那种情况下，我考虑使用 openGl 而不是 Android Canvas。

我之所以考虑它是因为我希望游戏可以在具有不同屏幕分辨率的设备上运行。为此，我考虑使用来自 openGl 的 Cameraview 面对墙壁，我的 2D 游戏纹理正在移动。如果当前设备的分辨率对于整个游戏内容来说太小了，我想移动相机视图，以便角色始终位于中间，直到相机框到达“墙”的边缘。这是一个可能的解决方案，还是您宁愿选择不同的方式？

甚至可以像在画布上那样在openGl中绘制精灵吗？就像彼此之上的几层一样。起初，瓷砖比数字更简单，例如简单的正方形作为救生圈（第一个背景比它上面的红色生命）等等。

```
positionRect = new Rect(this.getPositionX(), this.getPositionY()
            - (this.spriteHeight - Config.BLOCKSIZE), this.getPositionX()
            + Config.BLOCKSIZE, this.getPositionY() + Config.BLOCKSIZE);
spritRect = new Rect(0, 0, Config.BLOCKSIZE, spriteHeight);
canvas.drawBitmap(this.picture, spritRect, positionRect, null); 
```

如果是这样，我如何开始获取第一个背景，也许是第一个点（一个 .png 图片）？我没有找到任何能让我正确启动的教程。我知道如何为 GLSurfaceView 等设置项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:09:50.473

您将需要进行一些调整，但这是可能的并且非常容易。由于您可以获得教程并启动一些简单的程序，因此我将给您一些指示：

首先，您应该研究预测。您可以在投影矩阵上使用“ `glFrustumf`”或“ ”。`glOrthof`第一个更多地用于 3D，所以使用 Ortho。此方法中的参数将代表屏幕的坐标系边框。如果您希望它们与大多数“视图”系统相同，请插入值：`top=0, left=0, right=view.width, right=view.height`.

现在您可以创建一个方形缓冲区而不是 rect，如

```
float[] buffer = 
{origin.x, origin.y, 
origin.x, origin.y+size.height,
origin.x+size.width, origin.y+size.height,
origin.x+size.width, origin.y,
}; 
```

和纹理坐标为

```
float[] textureCoordinates = 
    {.0, .0, 
    .0, 1,
    1, 1,
    1, .0,
    }; 
```

您还需要加载纹理（在一些初始化中，如果可能的话只加载一次）以使用谷歌或堆栈溢出，因为它取决于平台......

这几乎是您在 draw 方法中加入它所需的全部内容：

```
enableClientState(vertexArray)
enableClientState(texCoordArray)
enable(texture2d)

//for each object:
vertexPointer(buffer)
texCoordPointer(textureCoordinates) //unless all are same
bindTexture(theTextureRepresentingTheSpriteYouWant)
draw(triangleStrip, 4) 
```

至于在模型矩阵上移动使用翻译：

```
pushMatrix()
translatef(x, y, .0)
drawScene()
popMatrix() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:22:59.960

使用 opengl 时，您不受“窗口”尺寸的限制。您将为您的世界定义一个投影矩阵和视口，然后要更改“相机”，您只需使用投影矩阵和视口即可。如果我是你，我会在开始这个项目之前拿起一本关于 opengl 的书，这样你就知道 opengl 是如何工作的。

此外，如果您使用的是 java，那么您将需要使用 GLSurfaceView 类。这会为您处理所有线程和一切，因此您无需担心。

# html - 跨版本的 Firefox 输入样式

> ID：15337311
> 
> 赞同：0
> 
> 时间：2013-03-11T11:21:31.463
> 
> 标签：html, css, firefox

在 Firefox 19.0.2 中，`input`使用浏览器样式代理的标签具有以下布局：

![在此处输入图像描述](../Images/a0d90f41053412b3be73e5e76be73d01.png)

在 Firefox 18.0.1 中，同样`input`有这样的布局：

![在此处输入图像描述](../Images/e54376172b49d74459202fc6e19ec03f.png)

如您所见，padding、border-width 和 width 属性都发生了变化。

考虑到使用固定位置布局的网站数量，这是一个糟糕的设计决策吗？我假设在 FF19 中查看时会有大量网站崩溃。

这是新版本的常见问题吗？有没有办法处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:26:06.410

Firefox 只是一种浏览器，而 19 只是该浏览器的一个版本。将这些样式与其他浏览器的样式进行比较，您肯定会发现差异。

有浏览器重置库（任[您选择](http://www.cssreset.com/ "任你选")）来纠正这个问题 - 不仅仅是当单个浏览器在版本之间发生变化时，而且适用于 IE vs FF vs Chrome vs Safari vs ...

# google-maps - 平面图：如何为室内导航添加 wifi AP

> ID：15337315
> 
> 赞同：0
> 
> 时间：2013-03-11T11:21:40.033
> 
> 标签：google-maps, navigation

我想在我的建筑物（仓库）中使用谷歌地图进行导航。如何添加 wifi 接入点以获得更准确的导航？

我想通过 WIFI 帮助改进谷歌地图导航。

我正在使用 [http://maps.google.com/help/maps/floorplans/](http://maps.google.com/help/maps/floorplans/)

谢谢回复

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:38:16.040

您需要使用平面图帮助页面上的“请求帮助”链接（指向[https://maps.google.com/floorplans/uploadcontactme](https://maps.google.com/floorplans/uploadcontactme)的链接）联系 Google 室内地图团队。

他们可能会选择为您提供移动应用程序，用于在建筑物中行走、验证平面图和收集 wifi 位置。

但是，如果您的仓库不公开，他们可能会拒绝您，因为您的数据对公众的益处有限（查看他们的条款和条件）。但值得一试！到目前为止，团队对我的帮助很大（我代表一所大学）。

# libcurl - 登录 libcurl

> ID：15337319
> 
> 赞同：0
> 
> 时间：2013-03-11T11:21:44.043
> 
> 标签：libcurl

如何修改 libcurl 以便将所有错误描述收集在一个公共日志文件中？我正在尝试将 libcurl 移植到 android 并在 adb 上显示 curl 日志。有没有办法记录 libcurl 的所有活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:08:09.973

简单地使用[CURLOPT_DEBUGFUNCTION](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTDEBUGFUNCTION)怎么样？它就是为这样的目的而设计的……

# mysql - 用于 MySQL 的 Restful WebService

> ID：15337322
> 
> 赞同：1
> 
> 时间：2013-03-11T11:21:50.570
> 
> 标签：mysql, rest

我想知道是否有任何用于 mysql 的 restful api 也有社区。我发现了一个类似 mod-ndb 的东西，它似乎已经停止了很久，因为 wiki 链接断开了。

# mysql - 函数返回 PK 时在 MYSQL 上选择或加入

> ID：15337325
> 
> 赞同：0
> 
> 时间：2013-03-11T11:22:00.480
> 
> 标签：mysql, function, join, subquery, primary-key

我有返回 Id (PK) 的函数

当我做

```
select * from myTable WHERE PK = function(params) 
```

db 扫描 myTable 中的每一行

MySql 版本 5/6/10

我在这里看到了一些讨论[How to use a SQL Function with INNER JOIN in MySQL?](https://stackoverflow.com/questions/14811363/how-to-use-a-sql-function-with-inner-join-in-mysql) 但是如何在没有任何技巧和技巧的情况下解决问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:18:28.820

在`WHERE`子句中使用函数会使 MySql 忽略任何索引，这就是它进行全表扫描的原因。

[在这里](http://blog.cnizz.com/2008/08/08/using-functions-in-mysql-where-clauses-breaks-speed-gains-from-indexing/)和[这里](https://stackoverflow.com/questions/10929808/why-mysql-does-not-use-indexes-in-where-if-clause/10930414#10930414)查看其他人的帖子和解释

# opengl - openGL中的z坐标和查看器

> ID：15337326
> 
> 赞同：0
> 
> 时间：2013-03-11T11:22:03.063
> 
> 标签：opengl

我对从`glOrtho`方法生成的视图体积感到困惑，我知道最后两个参数是针对 Z 轴的，第一个代表观察者和近平面之间的距离，第二个代表观察者和远平面之间的距离。

我的问题是查看器（相机）恰好位于 Z 坐标中的位置？

在这个链接[程序](https://stackoverflow.com/questions/3430789/where-points-opengl-z-axis)中，一些代码使近平面为正，远平面为负，在这种情况下，我们可以说 Z- 在查看器后面，Z+ 在查看器前面吗？

如果是，请尝试将其中一个三角形的所有顶点的 Z 坐标设为负值，您会注意到它虽然在观察者后面，但它出现了，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:31:54.800

> 第一个表示观察者和近平面之间的距离，第二个表示观察者和远平面之间的距离

不，不是。正交投影定义了一个盒子。zNear 和 zFar 是框的*位置*，而不是与“查看者”的距离。

正交投影不像透视投影那样有“观察者”。它们有一个观察*方向*，而不是一个观察*位置*。并且视图的方向始终是使 zFar 最远而 zNear 最接近的方向。如果 zNear 大于 zFar，则观察方向为正 Z；否则为负 Z。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:32:47.247

其实你的问题有点混乱。我认为您可以尝试 glLookAt() 并使对象从不同的角度出现并查看差异。这是一个链接 [http://mycodelog.com/2010/05/28/glcamera/](http://mycodelog.com/2010/05/28/glcamera/)

# scala - akka 演员向邮箱的负责人发布消息

> ID：15337329
> 
> 赞同：3
> 
> 时间：2013-03-11T11:22:14.820
> 
> 标签：scala, akka, actor

生产者演员可以将消息发布给另一个演员以立即处理吗？即向消费者邮箱的头部而不是消费者邮箱的尾部发布消息？

我知道 akka 提供了一种配置我自己定义的邮箱类型的方法，但是如何控制是否需要将某些类型的消息发布在邮箱的头部而不是尾部。例如`TimerMessages`。我想要一个时间窗口实现的精确计时器控制。消息必须仅保留 1000 毫秒（例如），并且如果消息处理消耗时间并且邮箱中有许多待处理的消息，我不希望将计时器消息附加到同一个队列中。

我可以使用 a `PriorityMailBox`，但问题`PriorityMailBox`是即使它可以将更高优先级的消息（计时器消息）放在 MailBox 的头部，对于相同优先级的消息，不能保证 MailBox 中的消息顺序与 order 相同的到来。所以我也不能使用priorityMailBox。

有人可以告诉我如何实现这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:22:17.297

您可以使用自己的`PriorityMailBox`来处理消息的到达时间并将其用作附加优先级（对于具有相同“主要”优先级的消息）。

像这样的东西（未经测试）：

```
import akka.dispatch._
import com.typesafe.config.Config
import akka.actor.{ActorRef, PoisonPill, ActorSystem}
import java.util.Comparator
import java.util.concurrent.PriorityBlockingQueue

class MyTimedPriorityMailbox(settings: ActorSystem.Settings, config: Config)
  extends UnboundedTimedPriorityMailbox(
    TimedPriorityGenerator {
      case 'highpriority ⇒ 0

      case 'lowpriority  ⇒ 2

      case PoisonPill    ⇒ 3

      case otherwise     ⇒ 1
    })

case class TimedEnvelope(envelope: Envelope) {
  private val _timestamp = System.nanoTime()
  def timestamp = _timestamp
}

class UnboundedTimedPriorityMailbox( final val cmp: Comparator[TimedEnvelope], final val initialCapacity: Int) extends MailboxType {
  def this(cmp: Comparator[TimedEnvelope]) = this(cmp, 11)
  final override def create(owner: Option[ActorRef], system: Option[ActorSystem]): MessageQueue =
    new PriorityBlockingQueue[TimedEnvelope](initialCapacity, cmp) with TimedQueueBasedMessageQueue with TimedUnboundedMessageQueueSemantics {
      override def queue: java.util.Queue[TimedEnvelope] = this
    }
}

trait TimedQueueBasedMessageQueue extends MessageQueue {
  def queue: java.util.Queue[TimedEnvelope]
  def numberOfMessages = queue.size
  def hasMessages = !queue.isEmpty
  def cleanUp(owner: ActorRef, deadLetters: MessageQueue) {
    if (hasMessages) {
      var envelope = dequeue()
      while (envelope ne null) {
        deadLetters.enqueue(owner, envelope)
        envelope = dequeue()
      }
    }
  }
}

trait TimedUnboundedMessageQueueSemantics extends TimedQueueBasedMessageQueue {
  def enqueue(receiver: ActorRef, handle: Envelope) { queue add TimedEnvelope(handle) }
  def dequeue(): Envelope = Option(queue.poll()).map(_.envelope).getOrElse(null)
}

object TimedPriorityGenerator {
  def apply(priorityFunction: Any ⇒ Int): TimedPriorityGenerator = new TimedPriorityGenerator {
    def gen(message: Any): Int = priorityFunction(message)
  }
}

abstract class TimedPriorityGenerator extends java.util.Comparator[TimedEnvelope] {
  def gen(message: Any): Int

  final def compare(thisMessage: TimedEnvelope, thatMessage: TimedEnvelope): Int = {
    val result = gen(thisMessage.envelope.message) - gen(thatMessage.envelope.message)
    // Int.MaxValue / Int.MinValue check omitted
    if(result == 0) (thisMessage.timestamp - thatMessage.timestamp).toInt else result
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T15:48:13.380

上面的代码工作正常。

只有一个细节。避免使用 System.getTimeNano()。它在多核机器中存在问题，因为它是由 per-cpu 逻辑定义的

[这里是另一个帖子](https://stackoverflow.com/questions/510462/is-system-nanotime-completely-useless)

然后，我们在消息顺序中有一个奇怪的行为取决于哪个 cpu enque it。

我用经典的 System.currentTimeMillis() 改变它。它不太精确，但在我们的例子中，如果两条消息具有相同的优先级和相同的毫秒生成时间，则不要关心它们被处理的顺序。

感谢您的代码！

# sql - Oledbconnection执行commad查询错误vb.net

> ID：15337330
> 
> 赞同：0
> 
> 时间：2013-03-11T11:22:18.780
> 
> 标签：sql, vb.net, ms-access, ms-access-2010

我正在使用 VS2012 wpf 应用程序 vb.net MS Access 2010。我正在尝试通过执行查询`oledbconnection`，它返回一个错误，但是当我通过 MS Access 2010 执行相同的查询时，它返回表没有任何问题。怎么了？

**询问：**

```
SELECT Agents.[PF], Agents.[User_ID], Agents.[First_Name], Agents.[Second_Name], Agents.[Third_Name], Agents.[Family_Name], Agents.[Gender], Agents.[Contract_Type], Agents.Area, Teams.Team_Name, Agents.Hiring_Date, Resignation_Pool.Resignation_Date, Resignation_Pool.Effective_Date, Replace(IIf(Skills.Skill_Directory Is Null,'','Directory, ')+IIf(Skills.Skill_TRC Is Null,'','TRC, ')+IIf(Skills.Skill_Prepaid Is Null,'','Prepaid, ')+IIf(Skills.Skill_Postpaid Is Null,'','Postpaid, ')+IIf(Skills.Skill_KeyAccount Is Null,'','KeyAccount, ')+IIf(Skills.Skill_Blackberry Is Null,'','Blackberry, ')+IIf(Skills.Skill_Broadband Is Null,'','Broadband, ')+IIf(Skills.Skill_Concierge Is Null,'','Concierge, ')+IIf(Skills.Skill_ISP Is Null,'','ISP, ')+IIf(Skills.Skill_Mada Is Null,'','Mada, ')+IIf(Skills.Skill_CSCS Is Null,'','CSCS, ')+'$',', $','') AS Skills FROM ((Agents INNER JOIN Resignation_Pool ON Agents.PF = Resignation_Pool.PF) LEFT JOIN Teams ON Agents.Team =  Teams.ID) LEFT JOIN Skills ON Agents.PF = Skills.PF WHERE Agents.Contract_Status = 'Active' 
```

**错误：**

> 填充：SelectCommand.Connection 属性尚未初始化。

**代码：**

```
 Dim SQL10 As New OleDb.OleDbCommand("SELECT Agents.[PF], Agents.[User_ID], Agents.[First_Name], Agents.[Second_Name], Agents.[Third_Name], Agents.[Family_Name], Agents.[Gender], Agents.[Contract_Type], Agents.Area, Teams.Team_Name, Agents.Hiring_Date, Resignation_Pool.Resignation_Date, Resignation_Pool.Effective_Date, " & Sql & " FROM ((Agents INNER JOIN Resignation_Pool ON Agents.PF = Resignation_Pool.PF) LEFT JOIN Teams ON Agents.Team =  Teams.ID) LEFT JOIN Skills ON Agents.PF = Skills.PF WHERE Agents.Contract_Status = 'Active'")
            Dim DataAdapter10 As New OleDb.OleDbDataAdapter(SQL10)
            Dim DataTable10 As New DataTable()
            DataAdapter10.Fill(DataTable10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:57:06.220

错误消息表明您的 OleDbDataAdapter 没有与有效连接关联的 SelectCommand。因此，您应该尝试以这样的方式更改您的代码

```
 Using OleDbConnection connection = new OleDbConnection("your_connection_string")
      connection.Open
      Dim SQL10 As New OleDb.OleDbCommand("......", connection) ' add this to the OleDbCommand'
      Dim DataAdapter10 As New OleDb.OleDbDataAdapter(SQL10)
      Dim DataTable10 As New DataTable()
      DataAdapter10.Fill(DataTable10)
  End Using 
```

# html - 在块/块中建立边距/填充

> ID：15337335
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:22:43.423
> 
> 标签：html, css, sass

理想情况下，我想在 SCSS 中这样写：

```
$small: 1px;
$large: 10px;

.top-margin-1small { margin-top: $small; }
.top-margin-2small { margin-top: 2*$small; }
// ...
.top-margin-9small { margin-top: 9*$small; }

.top-margin-1large { margin-top: $large; }
.top-margin-2large { margin-top: 2*$large; }
// ...
.top-margin-9large { margin-top: 9*$large; } 
```

然后**BUILD UP BRICK BY BRICK**在我的 HTML 中喜欢的任何边距，如下所示：

```
<div class="top-margin-1large top-margin-3small">
  foo
</div> 
```

唯一的问题是，这不起作用，因为边距不能“堆积”在彼此的“顶部”上。较大的一个“获胜”或指定的最后一个边距“获胜”（我忘了，是哪个？）

我想做的事情有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:45:35.257

您可能必须执行以下操作：

```
.top-margin-1large-3small {margin-top: $large+3*$small} 
```

但是，您需要定义 81 条规则 (9 x 9)，命名规则为

```
.top-margin-{n}large-{m}small {margin-top: {n}*$large+{m}*$small 
```

您可以在 SAAS 中编写一个循环来自动生成这些。

# passwords - 为什么即使在我执行 stty -echo 之后密码也能在瞬间可见？

> ID：15337350
> 
> 赞同：0
> 
> 时间：2013-03-11T11:23:27.827
> 
> 标签：passwords, expect, password-protection

我尝试了一切，甚至删除了 stty echo 行，但是在用户输入密码后，密码在一瞬间可见。我认为这是一些超时问题，所以我正在尝试使用各种超时值，但都是徒劳的

```
set timeout 30
stty -echo
send_user -- "Password for $username :"
expect_user -re "(.*)\n"
set timeout .000000001
set timeout 30
send_user "\n"
set timeout 30
set password $expect_out(1,string)
send -- "$password\r" 
```

我该如何处理这个可能是什么原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:54:33.017

我试过你的代码，它对我来说很好。`Expect`你用的是哪个版本的？
顺便说一句，我通常这样写：

```
stty -echo
send_user "Password: "
expect_user -timeout 3600 -re "(.*)\n"
stty echo
send_user "\r\n"
set passwd "$expect_out(1,string)" 
```

# android - 进度条运行继续

> ID：15337351
> 
> 赞同：-2
> 
> 时间：2013-03-11T11:23:37.767
> 
> 标签：android

我写了一个`game play screen`带有进度条的。我只希望进度条运行 4 秒，但它不会停止。

我`MainActivity`用`gamelayout`. 在这个布局中，我想添加`progress bar`.

为什么进度条一直在运行？

```
public class MainActivity extends Activity {
private static final String TAG = null;
public int ROWS = 10;
public int COLS = 10;
public String a = "";
public String x = "";
public static int textSize;
public static int wordListTextSize;
public boolean gameFinish = false;
public Timer timer;
public Vector<Integer> coordinate_X1 = new Vector<Integer>();
public Vector<Integer> coordinate_Y1 = new Vector<Integer>();
public Vector<Integer> coordinate_X2 = new Vector<Integer>();
public Vector<Integer> coordinate_Y2 = new Vector<Integer>();
RelativeLayout winPopUp = null;
public int cellWidth = 0;
public int cellHeight = 0;
public TextView tv1;
public char[][] charArray;
public Vector<String> wordList;
public String[] tempWordList;
public RelativeLayout gameLayout;
//public RelativeLayout mainLayout;
public int colorCounter = 0;
public int noOfSelectedWords = 0;
public int totalNoOfWords = 0;

public int sec = 0;
public int hour = 0;
public int min = 0;
boolean gameStarted = false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gamescreen);

    // here is a relative layout , we get id of this layout and  add progress bar 
  //  to this reletive layout 

    final RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.main);
    mainLayout.post(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            getLayoutInflater().inflate(R.layout.loading, mainLayout);
            ProgressBar spinner = (ProgressBar) findViewById(R.id.progressBar1);
            spinner.getIndeterminateDrawable().setColorFilter(0xFFFF0000,
                    android.graphics.PorterDuff.Mode.MULTIPLY);
        new DrawGame().execute(MainActivity.this);
        }
    });//here is code of add progress bar how we stop progress bar which is running 
                  //continue

}

public void initPlay() {
    ROWS = ScreenConstants.ROWS;
    cellWidth = cellHeight = (((RelativeLayout) findViewById(R.id.gameLayoutBg))
            .getHeight() * 98 / 100) / ROWS;
    System.out.println("Height "
            + findViewById(R.id.gameLayoutBg).getHeight());
    cellHeight = cellHeight - cellHeight / ROWS;
    cellWidth = 200;
    COLS = ScreenConstants.SCREENWIDTH / cellWidth;
    COLS = 10;
    gamePlay();
}

public void gamePlay() {
    Game game = new Game();
    game.getGame(ROWS, COLS, this, ScreenConstants.MAX_LENGTH);
    gameLayout = (RelativeLayout) findViewById(R.id.gameLayoutBg);
    RelativeLayout.LayoutParams rlparams = new RelativeLayout.LayoutParams(
            280, 300);
    rlparams.topMargin = 30;
    tv1 = new TextView(this);
    // tv1.setLayoutParams(rlparams);
    tv1.setId(1);

    charArray = new char[ROWS][COLS];
    int index = 0;
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            charArray[i][j] = game.charArray[index];
            x = x + "  " + charArray[i][j];
            tv1.setText(x);
            tv1.setTextSize(20);
            // tv1.setText(""+charArray[i][j]);
            Log.d(TAG, "VALUE OF TEXT BOX " + tv1);
            gameLayout.removeAllViews();
            gameLayout.addView(tv1, rlparams);
            index++;
        }
    }

    wordList = game.wordList;
    TextView tv = (TextView) findViewById(R.id.wordListLayoutBg1);

    tempWordList = Utility.getStringArray(wordList);
    for (int i = 0; i < tempWordList.length; i++) {

        a = a + "   " + tempWordList[i];
    }
    tv.setText(a);
    tv.setTextColor(getResources().getColor(R.color.black));
    // }
    totalNoOfWords = wordList.size();
    noOfSelectedWords = 0;

}

  private class DrawGame extends AsyncTask<MainActivity, Void, Boolean> {

  @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

@Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        initPlay();
    }

@Override
    protected void onPostExecute(Boolean result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    //initPlay();

    }

@Override protected Boolean doInBackground(MainActivity... obj)
{

    //initPlay();
    try {
        publishProgress();
        Thread.sleep(3000);
    } catch (Exception e) {

    }

      return true;
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:32:36.560

用于在内部`onPreExecute`显示`ProgressBar` 和关闭它`onPostExecute`更改`AsyncTask`为：

```
 private class DrawGame extends AsyncTask<MainActivity, Void, Boolean> {
 ProgressBar spinner;
  @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        Show Progress Bar here...
          spinner = (ProgressBar)MainActivity.this. 
                                   findViewById(R.id.progressBar1);
        spinner.getIndeterminateDrawable().setColorFilter(0xFFFF0000,
                    android.graphics.PorterDuff.Mode.MULTIPLY);

          spinner.setVisibality(0); //<<< make  Visible here
        super.onPreExecute();
    }
 @Override
    protected void onPostExecute(Boolean result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
         spinner.setVisibility(8);  //<<< make in-Visible here
    //initPlay();

    }
//your code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:29:27.720

假设`R.id.progressBar1`是您要处理的进度条，当您准备好继续时，只需：

```
ProgressBar spinner = (ProgressBar) findViewById(R.id.progressBar1);
spenner.setVisibility(View.INVISIBLE); 
```

# php - 如何在 Propel 1.6 中按日期过滤日期时间列？

> ID：15337355
> 
> 赞同：3
> 
> 时间：2013-03-11T11:23:45.287
> 
> 标签：php, mysql, date, datetime, propel

我想过滤结果，如

```
$searchDate = "2013-03-01";

$query->usePublicationQuery()
            ->filterByPublishedAt($searchDate)
            ->endUse(); 
```

但是，问题是，此列中的值还包含时间，即它们实际上是时间戳（例如“2013-03-01 08:27:12”），我不允许在架构中更改它. 那么我怎么可能匹配忽略时间的纯日期呢？上述查询仅匹配时间为 2013-03-01 00:00:00 的条目。但我想要所有以 2013-03-01 作为日期的条目，无论时间如何。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T09:56:55.567

我已经想出了这个解决方案并且它有效：

```
->filterByPublishedAt(array("min" => $searchDate." 00:00:00", "max" => $searchDate." 23:59:59")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T10:41:55.827

对于那些使用 Criteria 实例并且不想/不能切换到编写查询的“新方式”的人：只需使用 Criteria::CUSTOM 而不是 Criteria::LIKE。

例如

```
$c = new Criteria();
$c->add(SomePeer::CREATED_AT, $date.'%', Criteria::LIKE); 
```

变成

```
$c = new Criteria();
$c->add(SomePeer::CREATED_AT, SomePeer::CREATED_AT.' LIKE "'.$date.'%"',Criteria::CUSTOM); 
```

这样，Propel 就不会尝试将其转换为 DateTime 对象。

# javascript - set element width or height using jquery

> ID：15337356
> 
> 赞同：0
> 
> 时间：2013-03-11T11:23:48.443
> 
> 标签：javascript, jquery, html

Lets say I want to assign element's width to itself. For example, I have a div with content and I want to assign `style="width:..."` it.
Then in jQuery I do:

```
elem.width(elem.width()); 
```

Which looks for me totally wrong since it looks like how can I set the width by getting it..

Is there any better way to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:39:54.357

尝试这个

```
document.getElementById('divName').style.width = '10px'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:44:31.620

如果您有多个具有相同类（但宽度不同）的元素，您可以这样做：

```
$('.yourClass').width( function(id, width) {
    return width;
}); 
```

有关说明，请参阅[文档](http://api.jquery.com/width/#width-functionindex--width)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:37:31.737

最好通过以下方式使用 JQuery 添加 CSS：

$(function() { $("#test").css({ width : '30px', height : '30px' }); });

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:38:04.170

如果你喜欢这种风格，你可以使用 jQuery 的[.css()](http://api.jquery.com/css/)方法：

```
$('.element').css('width', $('.element').width()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:32:11.817

你可以这样做

```
$(function() {
  $("#mainTable").width(100).height(200);
}); 
```

这有 2 个变化，它现在使用 .width() 和 .height()，以及在 document.ready 事件上运行代码。

如果没有 $(function() { }) 包装器（或 $(document).ready(function() { })，如果您愿意），您的元素可能还不存在，所以 $("#mainTable") 不会找不到任何东西......好吧，做一些事情。

# java - Java: Jtidy convertion from html text to xhtml text

> ID：15337357
> 
> 赞同：2
> 
> 时间：2013-03-11T11:23:51.903
> 
> 标签：java, html, xhtml, jtidy

I am using JTidy i want to give it a string as an input instead of a file. Is that possible? How i can do that?

This is my code:

```
 FileInputStream fis =null;  
    String htmlFileName = "report.html";  

   //from html to xhtml
   try   
    {  
        fis = new FileInputStream(htmlFileName);  
    }  
    catch (java.io.FileNotFoundException e)   
    {  
        System.out.println("File not found: " + htmlFileName);  
    }  
        Tidy tidy = new Tidy(); 
        tidy.setShowWarnings(false);
        tidy.setXmlTags(false);
        tidy.setInputEncoding("UTF-8");
        tidy.setOutputEncoding("UTF-8");
        tidy.setXHTML(true);// 
        tidy.setMakeClean(true);
        Document xmlDoc = tidy.parseDOM(fis, null);  
    try  
    {  
        tidy.pprint(xmlDoc,new FileOutputStream("report.xhtml"));  
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:27:21.980

将 替换为`FileInputStream`从 a 读取的流`String`，例如

```
try   
{
    fis = new ByteArrayInputStream(string.getBytes());
}  catch (java.io.IOException e) {  
    System.out.println("Error reading string");
    return;
} 
```

# android - Locale changed programmatically, but app show in System default locale on Android 2.3.3

> ID：15337358
> 
> 赞同：0
> 
> 时间：2013-03-11T11:23:58.773
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

My device system is in **English**.

In my **AndroidManifest.xml**, I defined my activity to check configuration changes:

```
<activity
   ...
   android:configChanges="locale" > 
```

In my **Activity**, I add the function :

```
@Override
public void onConfigurationChanged(Configuration newConfig) {

      super.onConfigurationChanged(newConfig);

       Locale.setDefault(newConfig.locale);

       Log.v("*Locale is*", newConfig.locale.toString());

       getBaseContext().getResources().updateConfiguration(newConfig, getBaseContext().getResources().getDisplayMetrics());

} 
```

In my **Activity** `onResume()`, I called the above function:

```
@Override
public void onResume() {
    super.onResume();

     // I explicitely force my app to display in Finnish
     Configuration newConfig = new Configuration();
     newConfig.locale = new Locale("fi");
     onConfigurationChanged(newConfig);
} 
```

(My Activity hosts fragments, Each screen view is a Fragment.)

With above code, I suppose my app will show in Finnish when launched. It works fine on **Android 4.1.1**.

**But** when I run my app on **Android 2.3.3** device, the following thing happens:

**Scenario 1:** Launch the app from desktop ==> the app is showing in Finnish, **No problem**

**Scenario 2:** Login to my app, ==> then close the app ==> then, launch the app again from desktop ==> the app is showing **in English!! Why???**

(the log message `Log.v("*Locale is*", newConfig.locale.toString());` shows me "**fi**" always!)

I verified that in Scenario 2, app **always show the system default Locale** when launch it again from desktop. Why?

I have no idea why in my Scenario 2, my app is showing in system locale English....any one could help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:38:11.150

您可以务实地更改语言环境，例如

```
public void setDefaultLocale(Context context, Locale locale) {
        Locale.setDefault(locale);
        Configuration appConfig = new Configuration();
        appConfig.locale = locale;
        context.getResources().updateConfiguration(appConfig,
                context.getResources().getDisplayMetrics());
        System.out.println("trad" + locale.getLanguage());
    } 
```

并像这样调用这个方法

```
setDefaultLocale(getBaseContext(), Locale.FRENCH);

setDefaultLocale(getBaseContext(), Locale.TRADITIONAL_CHINESE);

setDefaultLocale(getBaseContext(), Locale.ITALIAN); 
```

您可以选择要更改的语言并启动当前活动以反映更改。

Intent intent = new Intent(this, YourActivity.class); 开始活动（意图）；

嗨，约翰，我从我这边进行了测试以克服您的 Scenario-2，在务实地更改语言环境并转到主屏幕并再次启动我的应用程序后，它仍然是我更改后的语言，即意大利。

[我在此链接](http://www.mediafire.com/?f0xr9fl833bbvhg/%22Code%22)中发布了代码

请通过这个，让我知道它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:55:08.850

它看起来像 Android 2.x 中的一些错误

因为如果您更改语言环境而不是在某些地方，`onCreate()`但在`createMenu()`某些地方或内部`spinner.setOnItemSelectedListener()`，它会起作用。

这是一种解决方法，但在启动您的应用程序并更改其中的语言环境后尝试调用一些事件。

# url - 从 blogspot 切换到自定义域

> ID：15337359
> 
> 赞同：1
> 
> 时间：2013-03-11T11:23:59.780
> 
> 标签：url, dns, seo, blogs

我在 blogspot 上有一个带有 url say 的博客`myblog.blogspot.com`。现在它`30,000`在一个月内获得了页面浏览量。我想将博客网址更改为`myblog.com`.

但是，我担心我到目前为止获得的流量会因为新的 url 而变为零。谷歌页面排名和 alexa 排名将归零。

那么，我应该更改博客的域吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:19:20.450

也许这个链接会帮助你：[我如何使用自定义域](http://support.google.com/blogger/bin/static.py?hl=en&hlrm=de&ts=1233381&page=ts.cs) 它是一个简单的转发，所以你的排名不会为零。

> 您原来的 Blogspot 地址将自动转发到您的新域。这样，您网站的任何现有链接或书签仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:55:56.200

当您从 blogspot 的子域迁移到您自己的域时，您**必须**设置正确的重定向。重定向应该是永久（301）类型，而不是临时（302）类型）。永久链接应直接重定向到相应的永久链接：

*   `http://myblog.blogspot.com/`->`http://myblog.com/`
*   `http://myblog.blogspot.com/this-is-a-blog-post`->`http://myblog.com/this-is-a-blog-post`

您还应该确保更改所有内部链接，以确保它们不提及您的旧子域。如果您控制任何外部链接，则应更改它们。您甚至可以考虑要求一些网站管理员更改指向您博客的外部链接。

即使您正确执行了重定向，您也很有可能会在一段时间内失去 Google 流量。上一次尝试从子域迁移到完整域时（几年前），我在大约 8 个月的时间里失去了大约 75% 的 Google 推荐。8 个月后，Google 似乎再次信任我的新域名，我的流量又回来了。

[作为网站管理员工具的一部分，谷歌有一个地址更改工具](https://www.google.com/webmasters/tools/change-address)。它仅限于在“全域”上使用，并且不适用于您的情况，因为您是从子域开始的。谷歌有一个附带的[帮助文档，](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=83105)您可能仍然会发现它很有用。

# java - 将配置更改推送到服务器的实用方法

> ID：15337362
> 
> 赞同：2
> 
> 时间：2013-03-11T11:24:06.867
> 
> 标签：java, database, architecture

该系统包含一个管理控制台和一个工作服务器集群。应用程序状态存储在数据库中。从管理控制台用户可以添加新作业，监控正在运行的作业等。工作服务器从数据库中获取作业并处理它。

现在，一些配置也存储在数据库中。配置也会加载到每个工作服务器上，并且大部分都被缓存，因为配置不会经常更改。

管理员能够更改配置（从管理控制台）。更改存储在数据库中。将更改推送到工作服务器的最佳方式是什么？

到目前为止我的想法：

1.  在更新/删除/插入的配置表上添加触发器并更新某些辅助表中的时间戳。每个工作服务器在访问缓存之前都会检查此辅助表是否有更改。缺点：仍在访问数据库。

2.  从管理控制台向所有工作服务器发送请求，配置已更改并且必须在下次调用时从 db 读取。缺点：引入了管理员和服务器之间的 http 通信 - 迄今为止不存在的新层 - 并且它的可靠性值得怀疑。

有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:18:15.247

第一种方法似乎更像是一种快速破解。检查辅助表时间戳几乎违背了缓存的目的。

第二种选择似乎是好的选择。这可以作为他们任务队列中的一个简单任务来实现，以更新他们自己的配置缓存。

更改多个服务的配置的主要问题是它们的依赖关系。

如果父服务以与其子服务不兼容的配置开始运行，您可能会遇到崩溃或未定义的行为。为了避免这种情况，必须实施同步。

One way is let parent service to update it's configuration and then issue configuration update commands to child services. After all child services are updated, parent would resume processing. Advantage of this approach would be that a simple management console could instruct only parent services about the configuration changes.

Other way is let management console handle dependent services. It would send a command to parent services to pause execution, update config and wait for resume command. In a mean time it would update all child services and instruct parents to resume. This way service dependencies would be more flexible and their configuration would be decoupled from their implementation. This would require a more advanced administration tool.

# javascript - Javascript 日期转换为 VB.net DateTime

> ID：15337365
> 
> 赞同：1
> 
> 时间：2013-03-11T11:24:14.060
> 
> 标签：javascript, vb.net, datetime

我试图将作为字符串从一些 Javascript 代码传递的日期时间值转换为 VB.net 日期时间对象。

这就是我试图转换的

> 2012 年 9 月 27 日星期四 14:21:42 GMT+0100 (BST)

这是我到目前为止所拥有的，但转换这个日期字符串真的很困难

```
Public Function TryParseDate(dDate As String) As Date

    Dim enUK As New CultureInfo("en-GB")
    Dim Converted_Date As Nullable(Of Date) = Nothing
    Dim Temp_Date As Date
    Dim formats() As String = {"ddd MMM d yyyy HH:mm:ss GMTzzz (BST)", _
                               "ddd MMM d yyyy HH:mm:ss GMTzzz", _
                               "ddd MMM d yyyy HH:mm:ss UTCzzz"}

    ' Ensure no leading or trailing spaces exist
    dDate = dDate.Trim(" ")

    ' Attempt standard conversion and if successful, return the date
    If Date.TryParse(dDate, Temp_Date) Then
        Converted_Date = Temp_Date
    Else
        Converted_Date = Nothing
    End If

    ' Standard date parsing function has failed, try some other formats
    If IsNothing(Converted_Date) Then
        If Date.TryParseExact(dDate, formats, enUK, DateTimeStyles.None, Temp_Date) Then
            Converted_Date = Temp_Date
        Else
            Converted_Date = Nothing
        End If
    End If

    ' Conversion has failed
    Return Converted_Date

End Function 
```

TryParse 和 TryParseExact 函数都返回 false，表示转换失败。有谁知道发生了什么事？或者更好的是，有一些代码可以成功转换日期时间字符串。有谁知道为什么这不起作用和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:11:59.940

您使用了错误的格式字符串。这是 f# 中的示例，但您应该大致了解 :-)

```
open System
open System.Globalization

let main argv = 
    let date = "Thu Sep 27 2012 14:21:42 GMT+0100 (BST)"
    let dateparsed = DateTime.ParseExact(date, "ddd MMM dd yyyy HH:mm:ss 'GMT'zzzz '(BST)'", CultureInfo.InvariantCulture)
    printfn "%A" dateparsed
    0 
```

希望它会有所帮助

mz

# c++ - 在 Visual C++ 中编译时出错

> ID：15337370
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:24:40.363
> 
> 标签：c++, visual-studio, visual-c++

我编译了以下代码：

```
typedef unsigned char uint8;

template <uint8 N> inline uint8 g(uint8 x) { return x > N ? 1 : 0; }

template <size_t stride, size_t boxsize, class T, class F>
  inline void boxfilt(size_t width, size_t size, T * inout, const F & f) {

  }
  template <class T> inline T self(const T & x) { return x; }
  template <size_t stride, size_t boxsize, class T>
  inline void boxfilt(size_t width, size_t size, T * inout) {
    return boxfilt<stride, boxsize>(width, size, inout, self<T>);
  }

int main(int argc, char* argv[])
{
    uint8 *out = NULL;
    boxfilt<3,4>(10,29,out,g<4>);

    return 0;
} 
```

在 g++ 编译器中，它工作正常。当我尝试在 Visual Studio 2008 编译器中编译相同的代码时，它显示以下错误：

```
Error   1   error C2780: 'void boxfilt(size_t,size_t,T *)' : expects 3 arguments - 4 provided   g:\testfjx\test\test.cpp    
Error   2   error C2784: 'void boxfilt(size_t,size_t,T *,const F &)' : could not deduce template argument for 'overloaded function type' from 'overloaded function type'    g:\testfjx\test\test.cpp    
Error   3   error C2784: 'void boxfilt(size_t,size_t,T *,const F &)' : could not deduce template argument for 'T *' from 'uint8 *'  g:\testfjx\test\test.cpp 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:27:47.033

没关系，在 Visual C++ 2008 中也是如此。

如果 VC++2008 和 G++4.7.2 都接受代码而 VC++2005 不接受，那么可能 VC++2005 有 bug，可能它没有完全实现 C++ 规范。

# android - Get the ArrayList from TXT file

> ID：15337372
> 
> 赞同：0
> 
> 时间：2013-03-11T11:24:49.957
> 
> 标签：android, arraylist, widget

Everyone. Good morning.

This is a android widget. I'm using this code. I just wanted to get the `ArrayList` from a external file as .TXT (saved in `assets` Folder) instead of getting quotes' list from the java file. But there is something wrong in this code. It isn't reading the "`quote.txt`" file that is in "`assets` folder".

This is my code:

```
 public class UpdateWidgetService extends Service {
private static final String TAG = UpdateWidgetService.class.getSimpleName();

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    Log.d(TAG, "onStart started");

    // Create some random data
    Random random = new Random();

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

    int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    if (appWidgetIds.length > 0) {

        for (int widgetId : appWidgetIds) {
            List<String> qList = getListFromTxtFile("quote.txt");
            int nextInt = random.nextInt(qList.size());

            RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.widget);
            remoteViews.setTextViewText(R.id.widget_textview, qList.get(nextInt));
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();
    }
    super.onStart(intent, startId);
}

public List<String> getListFromTxtFile(String txtFileName){

//  File sdcard = Environment.getExternalStorageDirectory();
// Get the text file
// File file = new File(sdcard,txtFileName);

AssetManager am = this.getAssets();

List<String> qList = new ArrayList<String>();

//Read text from file

try {
    InputStream is = am.open("quote.txt");
          //BufferedReader br = new BufferedReader(new FileReader(file));
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    String line;

     // get data in text file line by line
    while ((line = br.readLine()) != null) {

       qList.add(line);
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here
}
return qList;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:38:19.720

我把这段代码放在哪里，Ics？在“尝试{”内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:29:26.127

尝试使用

```
 AssetFileDescriptor descriptor = getAssets().openFd("quote.txt");
   FileReader reader = new FileReader(descriptor.getFileDescriptor()); 
```

# javascript - 使用 AJAX JSON 调用时的内存泄漏

> ID：15337374
> 
> 赞同：4
> 
> 时间：2013-03-11T11:24:54.600
> 
> 标签：javascript, ajax, json, performance, memory-leaks

在我的 javascript 应用程序中，我在`AJAX`调用检索`JSON`对象时有很大的内存泄漏。代码真的很简单：

```
function getNewMessage()
{
    new_message = []; // this is global variable
    var input_for_ball = [];
    var sum;
    var i;

    var http = new XMLHttpRequest();
    http.open("GET", url + "/random_ball.json", false);
    http.onreadystatechange = function()
    {
        if(http.readyState === 4 && http.status === 200)
        {
            var responseTxt = http.responseText;
            input_for_ball = JSON.parse('[' + responseTxt + ']');
        }
    }
    http.send(null);

    new_message = input_for_ball;
} 
```

每 1 毫秒调用一次，如您所见，它是同步调用。此功能每 1 秒花费我 1MB。

当我使用而不是`AJAX`仅仅分配给变量时，例如：

```
 input_for_ball = JSON.parse('[0,0,0,0,0,0,0,0,0,0]'); 
```

那么它的一切都很完美。所以错误必须在我的`AJAX`调用实现中。这也发生在我使用`jQuery AJAX`呼叫时。

**2013 年 12 月 3 日更新**

如下`Tom van der Woerdt`所述，这确实是预期的行为。因此，正如`Matt B.`建议的那样，我重写了一些代码以使异步调用成为可能，并且帮助很大。现在我的应用程序内存消耗稳定且小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:35:12.613

我不认为这是 AJAX 调用，而是关闭会占用您的内存。您的 onreadystatechange 函数引用了 http 对象（因此对 this 的引用将与匿名函数一起保存）。

我认为您的代码与此链接中示例 1 中的模式相匹配[http://www.ibm.com/developerworks/web/library/wa-memleak/](http://www.ibm.com/developerworks/web/library/wa-memleak/)

如果您之前没有遇到过 javascript 中的闭包，那么它们非常值得继续阅读 - 理解它们解释了很多乍一看似乎没有意义的行为。

# jquery - JQuery doesn't accept JSON as valid

> ID：15337378
> 
> 赞同：2
> 
> 时间：2013-03-11T11:25:00.160
> 
> 标签：jquery, ajax, json

I have a problem that drives me crazy at the moment. Via JQuery I request a JSON document from the server, which is not accepted (the error is "unexpected character"). However my JSON document seems just fine, in Firebug i.e. the JSON data is correctly detected and parsed.

If I copy the response and try to validate it via jsonlint.com it always fails on the first character (`[`). If I change some characters and copy stuff around but leaving the result the same it then validates (try for example copying the contents of `[]` and then erase them and write them again, paste the content again and you have the same document but it now validates). Strange. So I thought it may be related to the encoding, but firefox clearly states that everything is UTF8 encoded.

Now I'm kind of clueless what do to and I hope you can help me in any way.

Here is the JSON reponse of my server:

```
[
    {
    "id": 67,
    "startdate": "01.01.1970 01:00:00",
    "hometeam": "EHC Muskrats",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 69,
    "startdate": "01.01.1970 01:00:00",
    "hometeam": "EC Mammuts",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 70,
    "startdate": "01.01.1970 01:00:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EC Mammuts"
} ,         {
    "id": 86,
    "startdate": "01.01.1970 01:00:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EC Mammuts"
} ,         {
    "id": 4,
    "startdate": "08.10.2012 21:00:00",
    "hometeam": "Wiener Teifl",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 18,
    "startdate": "28.10.2012 21:00:00",
    "hometeam": "EC Heizbären",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 19,
    "startdate": "04.11.2012 18:00:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "Innviertel Penguins"
} ,         {
    "id": 6,
    "startdate": "15.11.2012 21:00:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EC Heizbären"
} ,         {
    "id": 62,
    "startdate": "17.11.2012 19:30:00",
    "hometeam": "EC V.U. Totonka",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 12,
    "startdate": "22.11.2012 20:30:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EHC Muskrats"
} ,         {
    "id": 13,
    "startdate": "27.11.2012 19:30:00",
    "hometeam": "TÜV Cannibals",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 7,
    "startdate": "02.12.2012 17:00:00",
    "hometeam": "Fire Fighters jun.",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 63,
    "startdate": "03.12.2012 19:00:00",
    "hometeam": "",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 8,
    "startdate": "09.12.2012 17:00:00",
    "hometeam": "EHC Vienna Flames",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 14,
    "startdate": "17.12.2012 20:15:00",
    "hometeam": "EC Mammuts",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 15,
    "startdate": "07.01.2013 20:15:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EC Mammuts"
} ,         {
    "id": 9,
    "startdate": "10.01.2013 20:00:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EHC Chiefs"
} ,         {
    "id": 11,
    "startdate": "19.01.2013 21:00:00",
    "hometeam": "EC Attacki",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 16,
    "startdate": "24.01.2013 20:30:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "TÜV Cannibals"
} ,         {
    "id": 10,
    "startdate": "28.01.2013 19:30:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EC V.U. Totonka"
} ,         {
    "id": 17,
    "startdate": "30.01.2013 20:30:00",
    "hometeam": "EHC Muskrats",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 65,
    "startdate": "24.02.2013 21:00:00",
    "hometeam": "EC Heizbären",
    "awayteam": "EHC Vienna Wookies"
} ,         {
    "id": 66,
    "startdate": "28.02.2013 20:40:00",
    "hometeam": "EHC Vienna Wookies",
    "awayteam": "EHC Chiefs"
} ,         {
    "id": 64,
    "startdate": "08.03.2013 21:00:00",
    "hometeam": "EHC Vienna Flames",
    "awayteam": "EHC Vienna Wookies"
}     ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:31:36.313

在 ID 67 之前，你有`.`JSON。如果你删除它。它会有效。虽然这里没有出现。但是如果你在这里尝试，你会`. (dot)`在 id 67 之前 看到一个额外的内容。[检查 JSON。`. (dot)`ID 67 前删除](http://jsoneditoronline.org)

1.  在使用 Json 之前，请在服务器端正确解析它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T11:30:32.180

JSON 第一行的换行符有问题。如果您无法在服务器上修复它，请尝试在解析 javascript 中的 JSON 响应之前替换这些字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:08:17.810

感谢 Ravi 为我指明了正确的方向。JSON 中有一个不可见的字符破坏了 JQuery JSON 解析器。

服务器端的问题是我的所有文件中的 1(!) 编码为 UTF8 + BOM :-< 可能早就想到了。更改编码解决了它。

# jmeter - Can I configure four JMeter clients and gather data as one document?

> ID：15337384
> 
> 赞同：0
> 
> 时间：2013-03-11T11:25:15.867
> 
> 标签：jmeter, jmeter-plugins

I want to install the JMeter client on each desktop, and then gather data from where each JMeter client generate after it run test. Using these data, I want to make chart for TPS over threads and bytes throughput over threads.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:34:35.710

[您可以在此处](http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf)使用 jmeter 提供的分步指南。

# asp.net-mvc - Check if uploaded file is an image in C# ASP.NET MVC

> ID：15337388
> 
> 赞同：6
> 
> 时间：2013-03-11T11:25:36.677
> 
> 标签：asp.net-mvc, file-upload

I have my controller

```
[HttpPost]
public ActionResult ChangeAvatar(HttpPostedFileBase file)
{
    AvatarHelper.AvatarUpdate(file, User.Identity.Name);
    return RedirectToAction("Index", "Profile");
} 
```

And I already check if file is in jpeg/png format:

```
private static bool IsImage(string contentType)
{   
  return AllowedFormats.Any(format => contentType.EndsWith(format,   
             StringComparison.OrdinalIgnoreCase));
}

public static List<string> AllowedFormats
{
    get { return new List<string>() {".jpg", ".png", ".jpeg"}; }
} 
```

What I need - it ensure that uploaded file is real image file and not txt file with image extension.

I convert my uploaded file like this:

```
using (var image = System.Drawing.Image.FromStream(postedFile.InputStream))
{
          ///image stuff
} 
```

I am thinking about try/catch block on creating image from input stream but I wonder if there is good way to do it? Thanks)

P.S.

I wonder if there is another (more efficient way that try/catch block) way to check whether file is real image?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:29:34.800

您可以使用该[`RawFormat`](http://msdn.microsoft.com/en-us/library/system.drawing.image.rawformat.aspx)属性：

```
private static ImageFormat[] ValidFormats = new[] { ImageFormat.Jpeg, ImageFormat.Png };
public bool IsValid(Stream image)
{
    try
    {
        using (var img = Image.FromStream(file.InputStream))
        {
            return ValidFormats.Contains(img.RawFormat);
        }
    }
    catch
    {
        return false;
    }
} 
```

您也可以将此验证逻辑放入可重用的验证属性中，如我在[`this post`](https://stackoverflow.com/a/6388927/29407).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T16:39:43.943

我的解决方案作为扩展，实际检查 base64 字符串是否为图像：

```
public static bool IsImage(this string base64String)
    {
        byte[] imageBytes = Convert.FromBase64String(base64String);

        var stream = new MemoryStream(imageBytes, 0, imageBytes.Length);
        try
        {
            stream.Write(imageBytes, 0, imageBytes.Length);
            System.Drawing.Image image = System.Drawing.Image.FromStream(stream, true);
            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

用法：

```
if(!"base64string".IsImage())
     throw new Exception("Not an image"); 
```

# php - 谷歌可视化 API php ajax

> ID：15337391
> 
> 赞同：0
> 
> 时间：2013-03-11T11:25:46.850
> 
> 标签：php, javascript, mysql, google-visualization

我正在使用这个[Achieving Google Visualization chart reloads using ajax](https://stackoverflow.com/questions/6197207/achieving-google-visualization-chart-reloads-using-ajax) example 从 Mysql 数据库中动态检索数据，我得到“Uncaught SyntaxError: Unexpected token <”错误。这是我的 HTML 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("jquery", "1.6.1");
      google.load('visualization', '1', {packages: ['table']});
    </script>
    <script type="text/javascript">

    function drawVisualization(dataFromAjax) {
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'InvoiceNo');
        data.addColumn('string', 'B/L No');
        data.addColumn('date', 'Date');
        data.addColumn('string', 'Customer Name');
        data.addColumn('number', 'Amount');
        data.addRows(dataFromAjax);
        var table = new google.visualization.Table(document.getElementById('table'));

        table.draw(data);
   }

    function makeAjaxCall() {
      $.ajax({url:'test.php',
              data: {},
              success: function(responseData) {

                         var arrayForGviz = eval("(" + responseData + ")");
                         drawVisualization(responseData);
                       }
        });
    }
    </script>
  </head>
  <body>
    <input type="button" onclick="makeAjaxCall();return false;" value="Click to get data"></input>
    <div id="table"></div>
  </body>
</html> 
```

这是我的 PHP 文件 test.php

```

    $con = mysql_connect("localhost","userName","password");

    如果 (!$con)

    {

    die('无法连接：' . mysql_error());

    }

    mysql_select_db("DB_NAME", $con);

    $result = mysql_query("调用 cargosys.rpt_salesByDate('2013/03/05','2013/03/10')");
    $输出 = 数组（）；
    而($row = mysql_fetch_array($result)) {
        // 创建一个临时数组来保存数据
        $temp = 数组（）；

        // 添加数据
        $temp[] = $row['inv_no'];
        $temp[] = ''' 。$row['bl_no'] 。''';
        $temp[] = ''' 。$row['inv_date'] 。''';
        $temp[] = ''' 。$row['cust_name'] 。''';
        $temp[] = $row['数量'];

        // 将临时数组内爆成逗号分隔的列表并添加到输出数组
        $输出[] = '[' 。内爆（'，'，$ temp）。']';
    }

    // 将输出内爆到逗号换行符分隔的列表中并回显
    回声内爆（“，\ n”，$输出）；
    //回显 json_encode($output);
    mysql_close($con);

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:58:31.723

在成功函数内部执行：

```
console.log(responseData); 
```

然后将 responseData 复制并粘贴到 jsonlint.com 的 JSON 验证器中

我猜这是一个 JSON 语法错误，验证器会向您指出。

# html - -webkit 媒体查询 HTML5 验证

> ID：15337393
> 
> 赞同：0
> 
> 时间：2013-03-11T11:25:55.820
> 
> 标签：html, media-queries, w3c, w3c-validation

以下代码无法使用 W3C HTML5 检查器进行验证，因为媒体查询 -webkit.... 以符号而不是字母开头，这是一种替代解决方案，因此我的代码将通过验证，尽管我相信这是有效的 HTML 媒体查询。

`media="screen and (-webkit-device-pixel-ratio: 1.5)"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:49:09.010

> 这是有效的 HTML 媒体查询

它不是。您正在使用`-webkit`前缀（表示实验性供应商实现而不是标准）。

您可以使用它，也可以是有效的。

（也可能有一种方法可以通过向验证器注入 JavaScript 来将其隐藏起来，但这会增加复杂性并增加破坏的可能性。验证是一种工具，而不是竞争）。

# java - PointerByReference 不返回值

> ID：15337395
> 
> 赞同：3
> 
> 时间：2013-03-11T11:26:03.867
> 
> 标签：java, c++, jna

我正在尝试通过 JNA 从 Java 调用 C++ 函数。我想传入一个字符串，然后返回一个字符串。这是通过使用 in 参数和 out 参数来完成的。我用out`PointerByReference`来表示`char**`参数。对 C++ 的调用有效，但`PointerByReference`调用后为 null。

我的代码基于 [PointerByReference](https://github.com/twall/jna/blob/master/www/ByRefArguments.md)文档。任何想法我做错了什么？

我在 C++ 中添加了 print 语句，以确保它没有将指针设置为 null，而且绝对不是。所以我对 JNA 的一些使用一定是错误的。但是什么？

**C++ 代码**

```
void processRequest(char* input, char** output, int* outputLength)
{

    // Variable output size from processInput

    std::string sOutput = processInput(input);

    char* results = new char[sOutput.length() + 1];

    strncpy(results, sOutput.c_str(), sOutput.length());

    results[sOutput.length()] = '\0';

    output = &results;

    outputLength = new int(strlen(results) + 1);

} 
```

**Java 代码**

像这样被java调用：

```
public class RunRequestT1 {
    private static final Logger log = LoggerFactory.getLogger(MyLibWrapperImpl.class);

    static boolean envVarsSetupDone = false;

    static interface MyLib extends Library {

        MyLib INSTANCE = (MyLib) Native.loadLibrary("N:\\sys1\\sys1_dist\\MyLib\\MyLib9.8.Q.P3.G15.T\\bin\\MyLib.dll", MyLib.class);

        public void processRequest(String request, PointerByReference bufp, IntByReference lenp);

        public void clearMemoryPtr(PointerByReference bufp, IntByReference lenp);
    }

    public static void main(String[] args) throws IOException {

        System.out.println("sys1: Reading request");
        String request = FileUtils.readFileToString(new File("C:\\dev\\prj\\single-request.xml"), "UTF-8");

        System.out.println("sys1: Pricing request");
        String response = processRequest(request);

        System.out.println(response);

    }

    public static String processRequest(String request) {

        System.out.println("sys1: prepare args");
        // code based on https://github.com/twall/jna/blob/master/www/ByRefArguments.md
        PointerByReference bufp = new PointerByReference();
        IntByReference lenp = new IntByReference();

        System.out.println("sys1: making call");
        MyLib.INSTANCE.processRequest(request, bufp, lenp);

        System.out.println("reading response");
        System.out.println("bufp: " + bufp.getValue());
        System.out.println("lenp: " + lenp.getValue());
        Pointer p = bufp.getValue();
        byte[] buffer = p.getByteArray(0, lenp.getValue());
        String response = Native.toString(buffer);
        //String response = p.getString(0);

        // de-allocate memory buffer
        System.out.println("cleaning memory");
        MyLib.INSTANCE.clearMemoryPtr(bufp, lenp);
        return response;
    }
} 
```

**标准输出**

当我调用它时，我得到这样的结果：

```
sys1: Reading request
sys1: Pricing request
sys1: prepare args
sys1: making call
reading response
bufp: null
lenp: 0
Exception in thread "main" java.lang.NullPointerException
    at com.calyon.gcm.MyLibwrapper.main.RunRequestT1.priceRequest()
    at com.calyon.gcm.MyLibwrapper.main.RunRequestT1.main() 
```

我试图将其保持在最低限度，实际上并没有发生太多事情。

我已经使用 JNA 版本 3.4 和 3.5 进行了测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:57:53.993

而不是为您的长度“返回”分配一个新指针，您需要写入现有指针，例如

```
*outputLength = strlen(results) + 1; 
```

您还需要写入给定的缓冲区指针，而不仅仅是为本地 arg 分配一个新值：

```
*output = results; 
```

# java - 我的java代码没有编译？请帮忙？

> ID：15337402
> 
> 赞同：-2
> 
> 时间：2013-03-11T11:26:25.633
> 
> 标签：java

我下面的代码似乎没有编译，我似乎得到了 9 个不同的错误，请任何人都可以看看我的代码并发布可以使其正确运行的修改？谢谢

```
class MineFinderModel {
    public static int MINE_SQUARE = 10;
    public static int EMPTY_SQUARE = 0;

    int num_of_cols;
    int num_of_rows;
    int[][]
        the_minefield;

    public MineFinderModel(int n_cols, int n_rows) {
        num_of_rows = n_rows;
        num_of_cols = n_cols;
        the_minefield = new int[num_of_cols][num_of_rows];
    }

    public boolean addMine(int thisCol, int thisRow) {
        if (thisCol >= n_cols || thisRow >= n_rows)
            return false;
        if (the_minefield[thisCol][thisRow] == MINE_SQUARE)
            return false;
        the_minefield[thisCol][thisRow] = MINE_SQUARE;
        return true;
    }
    public int getValue(int thisCol, int thisRow) {
        if (thisCol >= n_cols || thisRow >= n_rows)
            return false;
        return the_minefield[thisCol][thisRow];
    }
    public void addMinesToCorners() {
        the_minefield[0][0] = MINE_SQUARE;
        the_minefield[0][n_rows - 1] = MINE_SQUARE;
        the_minefield[n_cols - 1][0] = MINE_SQUARE;
        the_minefield[n_cols - 1][n_rows - 1] = MINE_SQUARE;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:28:01.123

几件事情要看：
1。你还没有正确定义`n_cols`和`n_rows`变量。我猜你想使用`num_of_cols`and`num_of_rows`而不是`n_rows`and `n_cols`。
2.`getValue`函数假设返回int。
3\. 你没有 Eclipse 或任何其他 IDE 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:30:13.383

请使用下面的编辑代码。

您的错误是构造函数中定义的参数被用作错误的类级别变量。变量的范围不正确。

同样在方法中： getValue 您希望它返回 int ，然后在方法的第二行中返回 false ，这是布尔值，因此是编译问题。

我已将其更改为返回 0 相同。（检查逻辑是否不受干扰。）

我也编译了。

```
class MineFinderModel {
    public static int MINE_SQUARE = 10;
    public static int EMPTY_SQUARE = 0;

    int num_of_cols;
    int num_of_rows;
    int[][] the_minefield;

    public MineFinderModel(int n_cols, int n_rows) {
        num_of_rows = n_rows;
        num_of_cols = n_cols;
        the_minefield = new int[num_of_cols][num_of_rows];
    }

    public boolean addMine(int thisCol, int thisRow) {
        if (thisCol >= num_of_cols || thisRow >= num_of_rows)
            return false;
        if (the_minefield[thisCol][thisRow] == MINE_SQUARE)
            return false;
        the_minefield[thisCol][thisRow] = MINE_SQUARE;
        return true;
    }

    public int getValue(int thisCol, int thisRow) {
        if (thisCol >= num_of_cols || thisRow >= num_of_rows)
            return 0;
        return the_minefield[thisCol][thisRow];
    }

    public void addMinesToCorners() {
        the_minefield[0][0] = MINE_SQUARE;
        the_minefield[0][num_of_rows - 1] = MINE_SQUARE;
        the_minefield[num_of_cols - 1][0] = MINE_SQUARE;
        the_minefield[num_of_cols - 1][num_of_rows - 1] = MINE_SQUARE;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:30:52.723

不要在您的,方法中使用`n_cols`and ，而是使用, 。因为并且在您的其他方法中无法访问。`n_rows``addMine``getValue``addMinesToCorners``num_of_rows``num_of_cols``n_rows``n_rows`

另一件事是，在您的以下方法中，您必须返回`int`而不是`boolean`

```
public int getValue(int thisCol, int thisRow) {
    if (thisCol >= num_of_cols || thisRow >= num_of_rows)
        return false; //you should return int here
    return the_minefield[thisCol][thisRow];
} 
```

# c++ - bool 数组的最小尺寸实现

> ID：15337405
> 
> 赞同：6
> 
> 时间：2013-03-11T11:26:40.873
> 
> 标签：c++, bit-manipulation

我需要一个布尔数组的最小尺寸实现。数组的大小在编译时是已知的。

我检查了`std::bitset`和`boost::array`，但它们都产生了对于小型阵列来说非常重要的开销。例如，如果数组大小为**8**，则容器应该只使用**1 字节**的内存（假设常见的 CPU 架构）。

这存在还是我需要自己推出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:04:56.753

您可以自己制作，但不能从头开始。`bitset`实现应该有几行看起来像`typedef unsigned long _WordT;`（SGI）或`typedef _Uint32t _Ty;`（MSVS）。您可以小心地替换类型和命名空间，并以这种方式制作自己的容器。我将类型更改为 char 并`sizeof`返回 1（vs2010 在[pastebin](http://pastebin.com/BYVgMYyH)上的概念验证）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:02:20.707

这是一个简单的例子。请注意，它只做它需要做的事情，所以你不能像`std::bitset`.

```
#include <climits>
#include <iostream>
#include <cassert>

template<int S> struct boolset {
    static int const SIZE = ((S / CHAR_BIT) + (0 != (S % CHAR_BIT)));
    unsigned char m_bits[SIZE];
public:
    boolset() : m_bits() { for(int i = 0; i < SIZE; ++i) m_bits[i] = 0; }

    bool get(int i) const {
        assert(i < S);
        return (m_bits[i / CHAR_BIT] & (1 << (i % CHAR_BIT)));
    }

    void set(int i, bool v) {
        assert(i < S);
        if(v) { m_bits[i / CHAR_BIT] |= (1 << (i % CHAR_BIT)); }
        else { m_bits[i / CHAR_BIT] &= ~(1 << (i % CHAR_BIT)); }
    }

    void print(std::ostream & s) const {
        for(int i = 0; i < S; ++i) {
            s << get(i);
        }
    }
};

int main(int argc, char ** argv) {
    std::cout << sizeof(boolset<1>) << std::endl;
    std::cout << sizeof(boolset<8>) << std::endl;
    std::cout << sizeof(boolset<9>) << std::endl;
    std::cout << sizeof(boolset<16>) << std::endl;
    std::cout << sizeof(boolset<17>) << std::endl;
    std::cout << sizeof(boolset<32>) << std::endl;
    std::cout << sizeof(boolset<33>) << std::endl;
    std::cout << sizeof(boolset<64>) << std::endl;
    std::cout << sizeof(boolset<129>) << std::endl;
    std::cout << std::endl;
    boolset<31> bs;
    bs.set(0, true);
    bs.set(28, true);
    bs.set(2, true);
    std::cout << bs.get(28) << std::endl;
    bs.print(std::cout); std::cout << std::endl;
    bs.set(2, false);
    bs.print(std::cout); std::cout << std::endl;
} 
```

在[ideone](http://ideone.com/WH1W22)上输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:40:18.313

```
template <int N>
class BitSet {
    enum { BPC = 8 }; // Bits per char, #ifdef as needed
    char m_bits[ (N + (BPC-1)) / BPC ];
public:
void SetBit( int i ) { m_bits[ i / BPC ] |= 1 << (i % BPC); }
void ClearBit( int i ) { m_bits[ i / BPC ] &= ~(1 << (i % BPC)); }
int GetBit( int i ) { return (m_bits[ i / BPC ] >> (i % BPC)) & 1; }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T11:36:16.917

也许如果你做了这样的事情：

```
#include<vector>
#include <iostream>
template<int N>
struct array
{
   char bits : N;

   int getNthbit(int bitnr)
   {
      // important to make sure bitnr is not larger than the size of the type of `bits` in number of `CHAR_BITS` 
      return bits & (1 << bitnr);
   }
};

//Specialize for N > 8

int main()
{
   std::cout << sizeof(array<8>);
} 
```

如果您查看[Live Example](http://liveworkspace.org/code/1rtG1r$10)，您会看到`N == 8`它何时返回`1`for `sizeof(array<8>)`。

当您输入 32 时，它会返回 4。

您唯一需要做的就是将模板专门化，`N > 8`以便类型更改以适应位数。

我不是模板天才，也许有人愿意写一个例子？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-03T11:06:00.347

[**免责声明**：我从 OPs 问题中提取了这个答案。[答案不应包含在问题本身](https://meta.stackexchange.com/a/309555/316262)中。]

* * *

### [Gabriel Schreiber](https://stackoverflow.com/users/427532/gabriel-schreiber)提供的答案：

这是我基于[Tom Knapen 的帖子的](https://stackoverflow.com/a/15338098/4298200)最终实现。我为构造函数添加了一个默认值，并在索引越界的情况下添加了抛出。非常感谢汤姆和其他所有人。

```
#include <stdexcept>
#include <climits>

/// Minimum size container for bool-arrays
/**
 * TODO: may want to add to_uint32_t accessor and the like
 * for sufficently small arrays
 */
template<int SIZE>
class bitarray
{
public:
    bitarray(bool initial_value = false);

    bool get(int index) const;
    void set(int index, bool value);

private:
    static const int ARRAY_SIZE = (SIZE + CHAR_BIT - 1) / 8;
    unsigned char mBits[ARRAY_SIZE];
};

// ----------------------------------------------------
//      Definitions
// ----------------------------------------------------

template<int SIZE>
inline bitarray<SIZE>::bitarray(bool initial_value)
{
    for(int i = 0; i < ARRAY_SIZE; ++i)
        mBits[i] = initial_value ? -1 : 0;
}

template<int SIZE>
inline bool bitarray<SIZE>::get(int index) const
{
    if (index >= SIZE)
        throw std::out_of_range("index out of range");
    return (mBits[index / CHAR_BIT] & (1 << (index % CHAR_BIT)));
}

template<int SIZE>
inline void bitarray<SIZE>::set(int index, bool value)
{
    if (index >= SIZE)
        throw std::out_of_range("index out of range");
    if (value)
        mBits[index / CHAR_BIT] |= (1 << (index % CHAR_BIT));
    else
        mBits[index / CHAR_BIT] &= ~(1 << (index % CHAR_BIT));
} 
```

# hadoop - Hive 使用的默认 JOIN 类型？

> ID：15337408
> 
> 赞同：1
> 
> 时间：2013-03-11T11:26:51.687
> 
> 标签：hadoop, hive, bigdata, apache-pig

Hive 使用的默认 JOIN 类型是什么？我知道 Pig 默认执行 Hash-join。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:02:25.050

Hive 默认支持 equi 连接。

您可以根据表的大小和排序顺序使用 Map-side Join 或 Merge Join 来优化您的连接。

查看这篇文章了解更多详情： [Hadoop's Map-side join implements Hash join?](https://stackoverflow.com/questions/2823303/hadoops-map-side-join-implements-hash-join)

更多详情：[https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+Joins](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Joins)

# java - 更新属性文件中的属性值而不删除其他值

> ID：15337409
> 
> 赞同：52
> 
> 时间：2013-03-11T11:26:56.203
> 
> 标签：java, properties

内容`First.properties`：

```
name=elango
country=india
phone=12345 
```

我想`country`从更改`india`为`america`。这是我的代码：

```
import java.io.*;
public class UpdateProperty 
{
    public static void main(String args[]) throws Exception 
    {   
        FileOutputStream out = new FileOutputStream("First.properties");
        FileInputStream in = new FileInputStream("First.properties");
        Properties props = new Properties();
        props.load(in);
        in.close();
        props.setProperty("country", "america");
        props.store(out, null);
        out.close();
    } 
} 
```

输出内容`First.properties`：

```
country=america 
```

其他属性被删除。我想更新一个特定的属性值，而不删除其他属性。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-11T11:31:36.030

关闭输入流后打开输出流并存储属性。

```
FileInputStream in = new FileInputStream("First.properties");
Properties props = new Properties();
props.load(in);
in.close();

FileOutputStream out = new FileOutputStream("First.properties");
props.setProperty("country", "america");
props.store(out, null);
out.close(); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-09-04T20:44:07.500

您可以使用[Apache Commons 配置](https://commons.apache.org/proper/commons-configuration/)库。最好的部分是，它甚至不会弄乱属性文件并保持完整（[甚至是注释](https://stackoverflow.com/questions/565932/a-better-class-to-update-property-files/565996#565996)）。

[Javadoc](https://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration2/PropertiesConfiguration.html)

```
PropertiesConfiguration conf = new PropertiesConfiguration("propFile.properties");
conf.setProperty("key", "value");
conf.save(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-11T11:39:45.097

```
Properties prop = new Properties();
prop.load(...); // FileInputStream 
prop.setProperty("key", "value");
prop.store(...); // FileOutputStream 
```

# php - 无法覆盖 Magento 1.7 CartController 的 indexAction()

> ID：15337410
> 
> 赞同：0
> 
> 时间：2013-03-11T11:26:57.427
> 
> 标签：php, xml, magento, controller, overriding

我正在尝试覆盖 Mage_Checkout_CartController 的默认 indexAction()。我在我的应用程序/本地创建了以下文件：
MyNamespace/cartStockCheck/controllers/CartController.php MyNamespace/cartStockCheck/etc/config.xml

并且在 app/etc/modules 中：MyNamespace_CartStockCheck.xml

看来 Magento 确实选择了我的扩展程序，因为我可以看到它在高级部分的管理后端中列出，但除此之外，当我打开购物车时没有任何反应。

编辑：没有其他插件覆盖 CartController。我还修复了 indexAction 中的错误调用。仍然看不到我的文字在购物车中回显

EDIT2：在下面检查我的答案。有用！

CartController.php 的内容是：

```
<?php   
  require_once 'Mage/Checkout/controllers/CartController.php';

  class MyNamespace_CartStockCheck_CartController extends Mage_Checkout_CartController
  {
    public function addAction()
    {
        echo 'test addAction';
        parent::addAction();
    }

    public function indexAction()
    {
        echo 'test indexAction';
        parent::addAction();
    }
  }
?> 
```

config.xml 的内容：

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyNamespace_CartStockCheck>
            <version>0.1.0</version>
        </MyNamespace_CartStockCheck>
    </modules>

    <frontend>
        <routers>
            <checkout>
                <args>
                    <modules>
                        <MyNamespace_CartStockCheck before="Mage_Checkout">MyNamespace_CartStockCheck</MyNamespace_CartStockCheck>
                    </modules>
                </args>
            </checkout>
        </routers>
    </frontend>
</config> 
```

MyNamespace_CartStockCheck.xml 的内容：

```
<?xml version="1.0"?>

<config>
    <modules>
        <MyNamespace_CartStockCheck>
            <active>true</active>
            <codepool>local</codepool>
        </MyNamespace_CartStockCheck>
    </modules>
</config> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:48:06.563

我不相信这个。我的代码不起作用的全部原因是：

```
<codepool>local</codepool> 
```

代替

```
<codePool>local</codePool> 
```

在 MyNamespace_CartStockCheck.xml

实际上，我从一些没有大写“P”的教程中复制了代码，直到我开始检查其他扩展并注意到它，我才知道它可能是这样的。我想我会很容易记住这一点的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:18:01.060

您需要更正 indexAction

```
 public function indexAction()
      {
         echo 'test indexAction';
         parent::indexAction();
      } 
```

你应该调用 **parent::indexAction();** 不是 **父级::addAction();**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:21:02.783

您需要检查的两个原因。1\. 你确定你已经清除了你的缓存。

1.  确保编译器模式未打开。当编译器模式打开时，文件是从 inc src 文件夹中获取的，而不是从其他地方获取的。

如果这两件事都到位并且您仍然发现您的控制器操作函数没有被调用，那么您需要检查是否完成了某些覆盖或某些事件/观察者已经劫持了您的代码。

# android - 使力量在不同的决议上工作相同

> ID：15337411
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:26:59.017
> 
> 标签：android, box2d, andengine, game-physics

我在框 2d 中面临多分辨率问题。

首先我需要使物体具有多分辨率，我通过按比例因子缩放顶点来解决它。

现在我需要使所有不同分辨率设备的作用力相同，有什么办法吗？

我想让这行代码在所有设备上都一样

```
obj.getBody().applyForce( new Vector2(0, -220), obj.getBody().getWorldCenter()); 
```

这里 220 是我应该通过这个公式使它成为多分辨率的因素

```
public float getY(float value) {
    y = (value / 540) * 100;
    return (y / 100) * CAMERA_HEIGHT;
} 
```

这里 540 是基本分辨率。我调用 getY(220) 使其具有多分辨率。

当我在分辨率 540*960 上使用此代码时，它工作正常，但是当我更改设备说分辨率 720*1280 时，游戏的运行速度非常慢。有人可以帮我解决这个问题吗？我试图解释我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T21:36:58.653

您可以通过将相机设置为设备像素数以外的值来缩放图形。

Andengine 将为扩展做所有其他事情。

您需要从设备获得的只是 x 与 y 像素的比率。

在此链接的示例中，我只设置了一个变量，并且所有内容都按比例缩放。[http://pastebin.com/WWGFvTVS](http://pastebin.com/WWGFvTVS)

因此，您只需决定要处理的初始比例，然后做 Box2D 的工作，而不必担心比例。您只需缩放正在查看场景的相机。

我说的和其他人一样，只是你似乎没有理解他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:51:30.507

不要缩放物理。缩放图形。您应该在每个分辨率之间共享物理坐标系，以使您的模拟在不同设备上相同。

# excel - Application.ontime 不工作？

> ID：15337417
> 
> 赞同：0
> 
> 时间：2013-03-11T11:27:44.690
> 
> 标签：excel, vba

我正在使用这行 Application.Ontime：

```
Application.OnTime Now + TimeValue("00:00:05"), "'RefreshWorkbook'" 
```

重新调用我的子声明使用：

```
Public Sub RefreshWorkbook() 
```

5秒后，但它不起作用。有什么我做错了吗？子程序在“thisworkbook”模块中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:33:59.710

使用 Now + TimeValue(time) 安排在特定时间量（从现在开始计算）过去时运行的东西。使用 TimeValue(time) 安排某事在特定时间运行。

# c++ - getline() 没有填充整个字符串数组

> ID：15337423
> 
> 赞同：1
> 
> 时间：2013-03-11T11:28:12.400
> 
> 标签：c++, visual-c++

我编写了这段代码来从控制台输入读取 N 行并将其放入字符串数组中，但它正在读取 N-1 行有什么建议吗？

```
#include<iostream>
#include<stdio.h>
#include<string>
using namespace std;

int main()
{
int test;
cin>>test;
string *cases=new string[test];
for(int i=0;i<test;i++)
{
    getline(cin,cases[i],'\n');
}

for(int i=0;i<test;i++)
{
    cout<<cases[i]<<endl;
}

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:48:34.987

假设您的输入是这样的：

```
2\n
line 0\n
line 1\n 
```

然后在 之后`cin>>test`，顶部有一个空行：

```
\n
line 0\n
line 1\n 
```

使用`>>`只读取它感兴趣的位（即`int`），然后在流中留下任何其他内容（在这种情况下，只是`\n`想一想，可能会有各种各样的东西在线上）。 `getline`读取所有内容，然后**从流**`\n` **中删除`\n`**。所以在第一个之后`getline`，剩下的输入是：

```
line 0\n
line 1\n 
```

并`cases[0]`包含`""`（即一个空字符串）。

然后在下一个之后`getline`：

```
remaining input:
line 1\n 
```

和

```
cases[0]: ""
cases[1]: "line 0" 
```

然后循环停止，因为它已经读取了 2 行。这就是问题所在。修复它是另一回事。我更喜欢避免混合`>>`和`getline`. 但是你可以做一些事情来清除`\n`流中的拖尾。

编辑：您也可以好好阅读[std::vector](http://en.cppreference.com/w/cpp/container/vector)（该文档可能有点技术性 - 搜索教程）以及[`using namespace std;`](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

我整理了一种修复它的方法。注意[`stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)仅是 c++11。如果您没有可用的，您可以尝试使用[`stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)with`>>`或[`atoi`](http://en.cppreference.com/w/cpp/string/byte/atoi).

```
#include <iostream>
#include <vector>
#include <string>
int main()
{
    int inLines = 0;
    //std::cin >> inLines;
    std::string countLine;
    std::getline(std::cin, countLine);
    try
    {
        inLines = std::stoi(countLine);
    }
    catch (...)
    {
        std::cout << "First line must be an integer\n";
        return 1;
    }
    std::vector<std::string> lines(inLines);

    for (int i = 0; i < inLines; ++i)
    {
        std::getline(std::cin, lines[i]);
    }

    for ( auto & s : lines )
    {
        std::cout << s << '\n';
    }
    return 0;
} 
```

# ios - iCloud 中基于 SQLite 的核心数据中的有序关系

> ID：15337424
> 
> 赞同：0
> 
> 时间：2013-03-11T11:28:18.127
> 
> 标签：ios, core-data, icloud

我有一个 iOS 6.1 应用程序，它使用具有一些有序关系的[核心数据模型。](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)它的下一个版本应该支持 iCloud。但是，iCloud 不允许在基于 SQLite 的 Core Data 模型中使用[有序关系](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/index.html)。

Apple 对如何在这种情况下重构模型有任何建议，或者您是否获得了这方面的实践经验？我在 A 类和 B 类之间存在一对多的关系，例如 A1 到 B1、B2 和 A2 到 B2、B3，因此仅向 B 中添加索引属性无济于事。我可能必须引入一个与 A 和 B 一对一关系的新类 C（例如 C1 到 A1 和 B1），但如果可能的话，我想避免这种情况。

顺便说一句，如果我将原始核心数据模型与 iCloud 一起使用，我会遇到以下类型的多个错误消息，我认为这是由于存在有序关系：

> 错误：这个进程调用了一个 NSArray-takeing 方法，例如 initWithArray:，并传入了一个 NSSet 对象。目前正在解决此问题，但很快就会让您感到悲伤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:05:46.650

我添加到名为 order 的对象属性。

我有一些与 FotoContent 对象具有“toMany”关系的对象。FotoContent 具有名为“url”的属性和属性“order”。在我的项目中，我需要让它们按 url 名称排序。所以让我们做这样的事情：

// 如果没有“复制”方法，您将收到错误消息

```
NSMutableArray *fotosToOrder = [[[object fotos]  copy]mutableArrayValueForKey:@"url"];  
//sort new array by url attribute
[fotosToOrder sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        NSComparisonResult res = [(NSString*) obj1 caseInsensitiveCompare:(NSString *) obj2];
        return res;
    }];

//go through all sorted urls and add Order value to Fotos objects
int order = 0;
for (NSString *sortedFotoURL in fotosToOrder){
    for (FotoContent *unsortedFoto in object.fotos){
       if ([sortedFotoURL isEqualToString:unsortedFoto.url]){
            unsortedFoto.order = order;
            order++;
            break;
        }
     }
} 
```

# ruby - 如何在客户端计算机上将 Ruby 1.8.7 升级到 1.9

> ID：15337425
> 
> 赞同：3
> 
> 时间：2013-03-11T11:28:23.290
> 
> 标签：ruby, macos, upgrade, ruby-1.9

当然，我知道如何安装 RVM 并以这种方式维护多个版本，而且由于我是一名开发人员，所以我对自己的 mac 有所有要求（比如 xcode 等）。在我自己的机器上一切正常。

但是我应该如何将我漂亮的脚本分发给其他只安装了默认 1.8.7 版本的 mac 用户？

我希望他们升级到 1.9，但我不能指望他们运行 shell 脚本、rvm（及其所有外部要求）等能够运行我的 30 行短脚本？

是否有可用的快捷方式/工具，以便我可以让他们升级到 Ruby 1.9？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:32:58.043

您可以将脚本打包成一个独立的可执行文件，而不是强迫您的用户升级 Ruby - 请参阅[关于将 Ruby 脚本打包到 Mac OS X 应用程序中的 SO 问题](https://stackoverflow.com/questions/2484432/package-ruby-to-a-standalone-mac-os-x-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:33:14.267

有几个选项可用于自动设置开发环境。

*   Thoughtbot 的[**笔记本电脑**](https://github.com/thoughtbot/laptop)：*笔记本电脑是一个 shell 脚本，可以将你的 Mac OS X 笔记本电脑变成一个很棒的开发机器。*

*   Github 的[**boxen**](http://boxen.github.com/)：*将您的开发环境中的痛苦自动化。Boxen 会安装您的依赖项，以便您可以专注于完成工作。*

*   Pivotal Lab 的[工作站](https://github.com/pivotal/pivotal_workstation)：*OSX 工作站的食谱食谱。*

Thoughtbot 的笔记本电脑专注于获得一套精心挑选的标准工具以在您的 Mac 上工作（您可以在脚本中查看哪些工具）。

Boxen 似乎更适合尝试构建自己的可复制自定义开发环境的团队。

# windows - cmd 上的哪个命令与 Linux 上的“makefiles”命令的工作方式相同？

> ID：15337426
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:28:23.507
> 
> 标签：windows, makefile, command, cmd, prompt

我是 C 编程的新手，我一直想知道 cmd 上的哪些命令与 Linux 上的 makefile 一样。你看，我们学校用的电脑操作系统是Linux和Mac，我的笔记本电脑是Windows 8，所以我使用的文本编辑器只有Notepad++。几周后我开始编码，我快要疯了，因为我有东西要交，我不知道要使用什么命令。另外，我的计算机上没有安装 Visual Studio 或任何东西。这对你们来说可能只是一个简单的问题，所以有人帮助我吗？

所以基本`HelloWorld.c`：

```
#include <stdio.h>
int main ()
{
printf("HelloWorld\n");
return 0;
} 
```

编译：gcc HelloWorld.c -o HelloWorld -Wall 运行：HelloWorld

@Beta这就是我在Windows上的做法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:24:21.720

听起来你需要一些工具来完成你的代码。

选项 1：
你说你没有 Visual Studio，这是否意味着你想要它？

Microsoft 免费提供 Visual Studio Express，我有一个 2010 版本，当我需要在那里复制某些内容时使用它，但也列出了一个[2012版本。](http://www.microsoft.com/visualstudio/eng#products/visual-studio-express-products)

* * *

选项 2：
您说您有 Windows，但他们在您的学校使用 Linux？那么您听说过[Oracle 的 VirtualBox](https://www.virtualbox.org/)吗？这是一个非常简单的应用程序，可让您在 Windows 机器中运行 Linux 机器，而且它是免费的！转到 Oracle 的站点并下载 VirtualBox，然后转到您最喜欢的 Linux 发行版的站点并下载它的 .iso 映像（例如，如果您觉得 Minty 可以在这里获取一个 iso）

然后您可以按照说明在虚拟机中设置和“安装”iso，瞧！你家里有 Linux。Gcc/Make 和你习惯的一切。

* * *

选项 3：

如果您只想制作 GCC 和此类工具，您可以从[MinGW](http://mingw.org/)站点获取它们。`gcc`您可以在 Windows 环境变量中进行设置，这样您就可以`make`从命令提示符处调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:19:12.873

到现在为止还挺好。现在尝试`make -v`，确定是否安装了 Make，如果安装了，是哪个版本。

**编辑：**

好吧，让我们尝试一个非常简单的makefile：

```
all:
    @echo hello 
```

这只是一个名为`makefile`. 第二行开头的空格是制表符，*而不是*空格。（我稍后会解释“@”。）一旦你写了这个文件，试试`make`. 应该说`hello`。

# c# - 在具有返回值的单独线程上运行任务

> ID：15337430
> 
> 赞同：0
> 
> 时间：2013-03-11T11:28:30.777
> 
> 标签：c#, wpf, task-parallel-library

我正在开发一个应该运行新任务的应用程序，制作一些东西并返回一个对象列表......

产生新任务时，我需要在我的 UI 线程中模拟一个在 for 循环中更改的进度条......并且在任务完成后，我必须更新我的视图（通过更新我的 ViewModel 属性的值，因为我正在使用MVVM 模式）。

问题是当任务启动时，GUI 冻结并且进度条没有更新！我认为任务是在一个单独的线程上在后台运行的（因为它们是池化的）。那为什么我的GUI被阻止了？

这是我的代码片段：

```
Task<List<Items>> myTask = Task.Factory.StartNew(() => queryHandler.GetItemssStatistics(items, sec, buyer, seller, From, To));

//Here is the simulation of ProgressBar changing that i need to be done when task is started
                    for (int i = 0; i < 100; i++)
                    {
Thread.Sleep(100);
                        StatusValue = i+1;
                    }
//Here is the section i need to do once the task finishes its execution to update my VM
//Wait for the task to finish its execution and retreive results:
                    List<Items> _tempResults = myTask.Result;
                    foreach (Items d in _tempResults)
                    {
                        ResultsList.Add(d);
                    }

                    if (ResultsList.Count == 0)
                    {
                        MessageBox.Show("Sorry, No items matched the defined research criteria!", "Warning",
                                        MessageBoxButton.OK,
                                        MessageBoxImage.Warning, MessageBoxResult.OK, MessageBoxOptions.ServiceNotification);
                    }
                    else
                    {
                        //Show items:
                        ResultsAvailable = Visibility.Visible;

                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:56:09.790

您的代码存在一些问题：

*   您在`Thread.Sleep`UI 线程上使用
*   您在`Task<T>.Result`UI 线程上再次调用 - 在任务完成之前它会阻塞。

你可以做几件事：

*   用于`ProgressBar.IsIndeterminate = true`显示选取框样式的进度条，而不是伪造进度更新**或**使用 a`DispatcherTimer`来更新进度条。
*   使用任务延续来执行任务完成后需要发生的任何代码。或者，如果您使用的是 .NET 4.5，则可以使用该语言的新**[async/await](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)**功能。

使用异步/等待：

```
async Task GetItems()
{
    List<Items> tempResults = await Task.Run(() => queryHandler.GetItemssStatistics(...));
    // the following will be executed on the UI thread automatically
    // after the task is done, keeping the UI responsive
    foreach (Items d in _tempResults)
    {
        ResultsList.Add(d);
    }
} 
```

要使用延续：

```
Task.Factory.StartNew(() => queryHandler.GetItemssStatistics(...))
    .ContinueWith(task => ProcessResults(task.Result), TaskScheduler.FromCurrentSynchronizationContext()); 
```

该`FromCurrentSynchronizationContext`方法创建一个任务调度程序，用于`SynchronizationContext`将调用编组回 UI 线程。

显然使用 await/async 更容易，如果可用，应该是您的首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:34:19.210

您仍在阻止 UI 工作，因为您正在调用`Thread.Sleep`它。如果您希望进度条更新，请运行另一个线程，或尝试将进度条的增加集成到您的任务中。
查看您的代码，最好在您的任务中更新进度条！
您正在让用户等待 10000 毫秒，如果您的任务之前完成，用户必须等待...
访问任务中进度条的调度程序，当一个项目已经完成并喜欢

```
//process item
if(progressBar.Dispatcher.CheckAccess()){
progressBar.Value += 1; //maybe calculate the number of items you are processing
}
else {
//send a delegate to the dispatcher
MyDelegate myDel = new MyDelegate(delegate() {
   progressBar.Value += 1;
});    
progressBar.Dispatcher.Invoke(myDel);
} 
```

代表的签名可能是这样的：

公共无效 MyDelegate();

# ssis - SSIS 变量与参数 (SSIS Denali)

> ID：15337431
> 
> 赞同：26
> 
> 时间：2013-03-11T11:28:43.943
> 
> 标签：ssis

1.  SSIS Denali 中的变量和参数有什么区别？
2.  如果有任何区别，那么哪些变量不能做而参数可以做什么？或相反亦然。
3.  什么时候应该使用 SSIS 参数和变量？

我尝试在谷歌上搜索，但我没有得到一些信息。

感谢期待！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-29T10:05:12.820

我认为一点背景知识将有助于理解参数概念。在这里，我将在与变量进行比较的情况下对其进行解释。要完全掌握参数概念，您可能还需要查找新的项目部署模型、环境、构建配置。

## 变量的使用

对于 2012 年之前的 SSIS，如果我们需要在执行之前将任何外部值传递给包（就像我们一直都在做的那样），我通常使用配置文件（或其他几种方式）。假设我们有一个文件服务器，它将用于访问共享文件，我将使用变量来存储服务器名称，并将此变量公开给配置文件。如果实际的文件服务器发生了变化（开发环境到测试环境等），我们只需要更改配置文件中该变量的值，SSIS 包保持不变。

一切看起来都很好，但有几件事我总是问自己为什么并且无法弄清楚为什么：

1.  100% 的时候，当我向配置文件公开变量时，我只是公开了“值”属性。为什么 SSIS 允许公开所有其他变量属性？

2.  为什么 SSIS 没有“私有”变量？“私有”是指当我选择要配置的变量时，“私有”变量并没有显示在选择列表中。SSIS 包可能有几十个变量，对于内部价值持有者，公开它们有什么意义？为什么我必须一直滚动才能找到我需要公开的唯一一个？

## 新项目部署模型

SSIS 2012 引入了一个新的部署模型，项目部署模型。简而言之，此模型将 SSIS 项目作为一个单元部署到 SQL Server SSIS 目录中，并且**此模型中不提供包配置**（它在称为包部署模型的旧模型中可用，使用 SSIS 2012 您可以选择哪个使用，2012默认为新型号）。

如果我们想将一些值传递到 SSIS 包中，我们必须通过**参数**传递它们，并使用 SSMS 中的 SSIS 目录来配置参数**的值（只有值，我们不能配置其他任何东西**）。参数和连接管理器在可以配置的 SSIS 目录中自动公开，以前通过配置文件可用的其他任何东西都不能在项目部署模型中配置（世界要干净得多）。在 SSIS 包中，就构建表达式而言，参数的使用方式与变量的使用方式相同。**但是，不能在 SSIS 包中修改参数**，这很有意义。（为什么我们需要更改从外部传入的值？如果必须，将值传递给变量，然后在那里进行更改..）

## 总结

参数仅在项目部署模型中可用，并且它提供了在此模型中将值从外部传递到 SSIS 包的唯一机制。如果我们将 SSIS 包视为一个 OO 类，则可以将参数视为公共属性，外部可以访问它并为其赋值（类本身可以/将使用它，但不能修改它）。变量可以被认为是私有变量，在内部使用，外部世界不需要知道任何关于它的信息。

对于旧的 Package Deployment 模型，没有 Parameter，世界保持不变。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-19T20:49:37.093

仅供参考，简而言之，变量的值可以在运行时更改，但参数不能。参数可以帮助您进行项目部署，您可以在 SSISDB 目录中设置它，而变量不能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-17T20:36:49.937

它的工作原理如下：假设您有一个名为 ServerName 的项目参数：

假设您将 SSIS 包部署到两个集成目录环境中，一个是为生产服务器配置的，另一个是为测试服务器配置的：

> 然后您的 ServerName“参数”将在 prod 中设置为 prod 服务器地址，并在测试环境中设置为包含测试服务器地址。如果 ssis 包中的任何变量需要运行时值（例如，该变量用于在运行时分别为 prod 或 test 服务器设置连接），那么该变量将使用上面的参数来查找要连接的正确服务器。

因此，在特定环境的场景中通常需要参数。

根据您在 Visual Studio 中配置解决方案的方式，有两种类型的参数：项目参数或包参数。项目中的所有包都可以访问项目参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-21T11:04:56.423

变量和参数与java中的类似，我们以参数的形式将一些值传递/传递给某些方法/任务，并且我们在该特定任务中使用它们，我们无法更改这些值，因为它们同样是该方法的外部事物在 SSIS 中，项目参数用于在包中动态设置某些变量或连接。其中变量仅限于包级别的内部。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-25T05:43:37.983

变量和参数之间有很多区别，下面很少提到：

*   `Variables`values 可以在运行时更改，但`parameters`value 不能更改。
*   `Variables`只能在包中使用，我们不能将它用于解决方案中的其他包，但我们可以将参数用于多个包（包存在于 中`Solution Explorer`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T09:37:59.677

参数使用从包外部发送数据，如用户名、密码或连接字符串等。变量在包内部使用。这意味着您可以在其中一个 SSIS 包中定义一个变量并在包级别使用它。

# c - 如何使用openssl以编程方式从自签名证书颁发证书？

> ID：15337432
> 
> 赞同：1
> 
> 时间：2013-03-11T11:28:49.453
> 
> 标签：c, openssl, certificate, x509

我设法创建了一个自签名证书，但现在我希望能够使用这个自签名证书颁发其他证书。如何使用 openssl 库在 C 中完成此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-09T10:38:01.963

首先创建一个证书请求和一个私钥：

```
X509_REQ *req;
EVP_PKEY *pk;
RSA *rsa;
X509_NAME *name=NULL;

if ((pk=EVP_PKEY_new()) == NULL)
  return false;

if ((req=X509_REQ_new()) == NULL)
  return false;

rsa=RSA_generate_key(SSL_KEY_BITS,RSA_F4,NULL,NULL);
if (!EVP_PKEY_assign_RSA(pk,rsa))
  return false;
rsa=NULL;

X509_REQ_set_pubkey(req,pk);
name=X509_REQ_get_subject_name(req);

X509_NAME_add_entry_by_txt(name,"C",MBSTRING_ASC, "AT", -1, -1, 0);
X509_NAME_add_entry_by_txt(name,"CN", MBSTRING_ASC, "CommonName", -1, -1, 0);

if (!X509_REQ_sign(req,pk,EVP_sha1()))
  return false;
return true; 
```

使用 ca 私钥签署请求，参数：X509* cacert, EVP_PKEY* ca_key

```
#define SSL_KEY_DAYS 366*20
EVP_PKEY *pkey;
x509 *x=NULL; // temporary certificate
X509* ssl_cert=NULL;
X509_CINF *ci;
X509_STORE *ctx;

// Public Key Check
pkey=X509_REQ_get_pubkey(req);
if(pkey == NULL)
  return false;
if (X509_REQ_verify(req,pkey) < 0)
  return false;
EVP_PKEY_free(pkey);

ctx = X509_STORE_new();
X509_STORE_set_default_paths(ctx);
X509_set_version(x,2);

x=X509_new();
if (x == NULL)
  return false;
ci=x->cert_info;

ASN1_INTEGER_set(X509_get_serialNumber(x),SSL_SERIAL);

if (!X509_set_issuer_name(x,req->req_info->subject))
  return false;
if (!X509_set_subject_name(x,req->req_info->subject))
  return false;

X509_gmtime_adj(X509_get_notBefore(x),0);
X509_gmtime_adj(X509_get_notAfter(x),(long)60*60*24*SSL_KEY_DAYS);

pkey = X509_REQ_get_pubkey(req);
X509_set_pubkey(x,pkey);

EVP_PKEY *upkey;
X509_STORE_CTX xsc;
upkey = X509_get_pubkey(cacert);
EVP_PKEY_copy_parameters(upkey,pkey);
EVP_PKEY_free(upkey);

if(!X509_STORE_CTX_init(&xsc,ctx,x,NULL))
  return false;

if (!X509_set_issuer_name(x,X509_get_subject_name(cacert)))
  return false;

if(!X509_sign(x,ca_key,EVP_sha1()))
  return false;

ssl_cert = X509_dup(x);

EVP_PKEY_free(pkey);
X509_STORE_CTX_cleanup(&xsc);
X509_STORE_free(ctx);
X509_free(x);
return true; 
```

# asp.net-web-api - 如何使用 HttpClient.PostAsJsonAsync 方法将多个参数传递给 WebAPI 操作？

> ID：15337433
> 
> 赞同：0
> 
> 时间：2013-03-11T11:28:49.717
> 
> 标签：asp.net-web-api, dotnet-httpclient

我有一个 Web API 操作如下：

```
[HttpPost]
public List<FavoriteDTO> GetFavoritesPaged(long userId, PagingInfo pagingInfo)
{
  var result = _userService.GetFavoritesPaged(fav => fav.UserId == userId, pagingInfo);
  var favDTOs = ConvertToDTOs(result.Source);
  return favDTOs;
} 
```

我需要使用 HttpClient 调用它，我正在尝试如下：

分页信息需要传递给 get 方法。

```
var pagingInfo = new PagingInfo()
{
    PageIndex = 1,
    PageSize = 10,
    OrderBy = "URL",
    OrderDirection = OrderDirection.Desc
}; 
```

其中 OrderDirection 是一个枚举：

```
public enum OrderDirection
  {
    Asc,
    Desc
  }

var detailURI = "Favorites/GetFavoritesPaged?userId="+34;

HttpClient client = new HttpClient()
client.BaseAddress="mywebApiAddress";
var response = client.PostAsJsonAsync(detailURI, pagingInfo).Result;
response.EnsureSuccessCode();
var result = JsonConvert.DeserializeObject(response.Content.ReadAsStringAsync().Result,
                                      tyepof(FavoritesDTO)); 
```

但是，它不起作用。它说内部服务器错误，我在这里缺少什么；枚举是导致问题还是其他原因？我有其他 WebAPI 工作得很好；它们都没有一个以上这样的参数。

这是我的 routConfig：

```
public static void Register(HttpConfiguration config)
    {
      config.Routes.MapHttpRoute(
          name: "DefaultApi",
          routeTemplate: "api/{controller}/{id}",
          defaults: new { id = RouteParameter.Optional }
      );
    } 
```

使用多个参数调用WebAPI是正确的方法还是有更好的方法，请建议？

**EDIT-1：** 改变了这个：

```
 var detailURI = "Favorites/GetFavoritesPaged?userId?"+34; 
```

至：

```
var detailURI = "Favorites/GetFavoritesPaged?userId="+34; 
```

只是一个错字:)

**编辑-2：**

使用 EDIT-1 请求转到以下 WebAPI 方法（这是错误的）：

```
 [HttpPost]
    public FavoriteDTO AddToFavorites(FavoriteDTO favoriteDTO)
    {
      ------code to add to db------
    } 
```

但是，当我将 routeConfig 编辑为以下内容时：

```
public static void Register(HttpConfiguration config)
{
  config.Routes.MapHttpRoute(
      name: "DefaultApi",
      routeTemplate: "api/{controller}/{action}/{id}",
      defaults: new { id = RouteParameter.Optional }
  );
} 
```

然后我开始收到以下异常：

```
ReasonPhrase: Not Found
Request: {Method: POST, RequestUri: 'http://localhost:60208/api/Favorite/GetPagedFavorites?user=1', Version: 1.1, Content: System.Net.Http.ObjectContent`1[[System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], Headers:{  Content-Type: application/json; charset=utf-8  Content-Length: 44}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T16:27:55.697

您可以尝试将 ActionName 属性放在控制器方法上。然后将 ActionName 附加到您的查询字符串。

/ActionName?param=value

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:39:10.743

你的网址是错误的。试试这样：

```
var detailURI = "Favorites/GetFavoritesPaged?userId=34"; 
```

或使用`{id}`路线：

```
var detailURI = "Favorites/GetFavoritesPaged/34"; 
```

但是你必须修改你的参数名称：

```
public List<FavoriteDTO> GetFavoritesPaged(long id, PagingInfo pagingInfo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T12:17:54.190

另一种方法是发布一个匿名类型，并让控制器接受一个动态的。

```
var response = client.PostAsJsonAsync(new { detailURI, pagingInfo }).Result;

[HttpPost]
public List<FavoriteDTO> GetFavoritesPaged([FromBody]dynamic model)
{
    PagingInfo pagingInfo = (PagingInfo)model.pagingInfo;
    long userid = (long)model.userId;

    ...

} 
```

# c - GSM模块与计算机之间的串行通信

> ID：15337434
> 
> 赞同：1
> 
> 时间：2013-03-11T11:28:51.297
> 
> 标签：c, visual-studio-2010, serial-port, gsm

我正在开发一个具有 GSM 模块的项目，它还与计算机进行串行通信。

我在 Visual Studio 2010 上用 C 语言编写了一个代码来串行传输和接收数据。

代码如下： -

```
#include "stdafx.h"
#include <windows.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h> 
#include <commdlg.h>
int nread,nwrite;

int main()
{

COMMTIMEOUTS timeouts;
COMMCONFIG dcbSerialParams;
char *words, *buffRead, *buffWrite;
DWORD dwBytesWritten,dwBytesRead;

HANDLE hSerial= CreateFile(L"COM1", GENERIC_READ | GENERIC_WRITE,
                       0,0,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0);
if ( hSerial == INVALID_HANDLE_VALUE) 
{ 
if (GetLastError() == ERROR_FILE_NOT_FOUND)
{
printf(" serial port does not exist \n");
} 
printf(" some other error occured. Inform user.\n");
}

//DCB    dcbSerialParams ;
//GetCommState( hSerial, &dcbSerialParams.dcb);
if (!GetCommState(hSerial, &dcbSerialParams.dcb)) 
{
printf("error getting state \n");
}

dcbSerialParams.dcb.DCBlength = sizeof(dcbSerialParams.dcb);

dcbSerialParams.dcb.BaudRate = CBR_9600;
dcbSerialParams.dcb.ByteSize = 8;
dcbSerialParams.dcb.StopBits = ONESTOPBIT;
dcbSerialParams.dcb.Parity = NOPARITY;

dcbSerialParams.dcb.fBinary = TRUE;
dcbSerialParams.dcb.fDtrControl = DTR_CONTROL_DISABLE;
dcbSerialParams.dcb.fRtsControl = RTS_CONTROL_DISABLE;
dcbSerialParams.dcb.fOutxCtsFlow = FALSE;
dcbSerialParams.dcb.fOutxDsrFlow = FALSE;
dcbSerialParams.dcb.fDsrSensitivity= FALSE;
dcbSerialParams.dcb.fAbortOnError = TRUE;

if (!SetCommState(hSerial, &dcbSerialParams.dcb)) 
{
printf(" error setting serial port state \n");
}

GetCommTimeouts(hSerial,&timeouts);
//COMMTIMEOUTS timeouts = {0};

timeouts.ReadIntervalTimeout = 1000;
timeouts.ReadTotalTimeoutConstant = 1000;
timeouts.ReadTotalTimeoutMultiplier = 1000;
timeouts.WriteTotalTimeoutConstant = 1000;
timeouts.WriteTotalTimeoutMultiplier= 1000;

if(!SetCommTimeouts(hSerial, &timeouts)) 
{
printf("error setting port state \n");
}
while(1)
{
//****************Write Operation*********************//
char data_tx[]="at\r";
words=&data_tx[0];
nwrite = strlen(words);
buffWrite = words;
dwBytesWritten = 0;

if (!WriteFile(hSerial, buffWrite, nwrite, &dwBytesWritten, NULL)) 
{ 
printf("error writing to output buffer \n");
}
printf("Data written to write buffer is\n %s \n",buffWrite);

//***************Read Operation******************//
dwBytesRead = 0;
nread = strlen(words);
buffRead = new char[nread +1];
memset(buffRead, 0, nread+1);   // ensure that string will be null-terminated

if (!ReadFile(hSerial, buffRead, nread, &dwBytesRead, NULL)) 
{
printf("error reading from input buffer \n");
}
printf("Data read from read buffer is \n %s \n ",buffRead);
Sleep(10000);
}
CloseHandle(hSerial);

} 
```

当命令**“at\r”**从计算机传输到 GSM 模块时，它接收到它应该通过发送**OK**来响应它。

现在我只得到**O**。如果我再次发送**"at\r"**我会得到**K**。

我已经在超级终端上验证了它的 GSM 模块工作正常。如果我发送**“at”并输入它，它会以****OK**响应。

此外，我已经在其他程序上验证了我的 C 代码，它工作正常。

我想知道为什么它不能与 GSM 模块一起正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-01T21:45:25.630

您需要在读取结果之前调用 sleep 。250 毫秒绰绰有余

# sql - 视图定义未在 SQL Server 中更新

> ID：15337441
> 
> 赞同：3
> 
> 时间：2013-03-11T11:29:12.960
> 
> 标签：sql, view, sql-server-2012

我有一个相当复杂的视图，使用 SQL Server Migration Assistant for Oracle 生成，但有一些逻辑错误和一些语法错误。

但是，当我更新它的 SQL 语句时（*右键单击 -> 设计*，然后更新文本区域中的 sql），当我*右键单击 -> Script view as -> Create/Alter to*时会显示新的 SQL ，但是当我*右键单击 -> design*打开视图设计时，它不显示更新的 SQL 语句。

由于原始视图定义有语法错误，我收到错误： `SQL text cannot be represented in the grid pane and diagram pane.`

我曾尝试重新启动 SQL 实例，也尝试使用`sp_refreshview <ViewName>`，但没有成功。

我在 Windows Server 2008 R2（64 位）上使用 SQL Server 2012 Enterprise（64 位）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T12:06:02.073

视觉设计者无法可视化可在视图中使用的每个构造。语法错误也会导致此错误。

如果您收到此错误，您唯一的选择是不使用可视化设计器，而是手动编辑 SQL。

您可以使用

```
Right-Click -> Script View As -> ALTER to -> New Query Editor Window 
```

纠正错误并成功运行`ALTER VIEW`后，您***就***可以使用设计器了。

# java - 在java中打印带有空字符的字符串

> ID：15337442
> 
> 赞同：6
> 
> 时间：2013-03-11T11:29:14.227
> 
> 标签：java, string, character-encoding, binary-data

我有包含空字符的字符串，即`\0`。如何在java中打印整个字符串？

```
String s = new String("abc\u0000def");
System.out.println(s.length());

System.out.println(s); 
```

Eclipse控制台上的输出：

```
7
abc 
```

长度是完整字符串的长度，但是如何打印整个字符串？

**更新：**我正在使用

*Eclipse Helios 服务版本 2*

*Java 1.6*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:43:35.650

将转换`String`为`char`数组是一种替代方法。这对我有用：

```
System.out.println(s.toCharArray()); 
```

哪个输出`abcdef`到控制台（eclipse）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:14:45.550

如果 Eclipse 不配合，我建议在打印之前用空格替换空字符：

```
System.out.println(s.replace('\u0000', ' ')); 
```

如果你需要在很多地方这样做，这里有一个从 System.out 本身过滤它们的技巧：

```
import java.io.*;

...

System.setOut(new PrintStream(new FilterOutputStream(
        new FileOutputStream(FileDescriptor.out)) {
    public void write(int b) throws IOException {
        if (b == '\u0000') b = ' ';
        super.write(b);
    }
})); 
```

然后您可以正常调用 System.out 方法，所有数据都通过过滤器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:34:51.577

使用 Java 5 或更高版本的代码的正确输出是

```
public class TestMain
{
    public static void main(String args[])
    {
        String s = new String("abc\u0000def");
        System.out.println(s.length());
        System.out.println(s);
    }
} 
```

> 7
> abc 定义

# java - Java Bean 的使用

> ID：15337447
> 
> 赞同：1
> 
> 时间：2013-03-11T11:29:27.157
> 
> 标签：java, swing, jsp, javabeans, pojo

我是java新手，所以我问这个虽然这里的事情可能很明显。Java Beans 的实际用途是什么。它们被定义为可重用的软件组件，但只有我能找到的示例将它们用作 Jsp 和 Swing 编程中的 POJO。定义将执行一些复杂计算的bean是否有效，用户将bean“属性”设置为该计算的参数？他们可以通过它们的属性公开其他不是 bean 的类型，原始类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:04:28.687

实际上，JavaBean 是遵循“属性”访问方法（getter 和 setter）命名约定的常规 Java 类。我想你理解正确。

这是更详细的答案：[什么是Java Bean](https://stackoverflow.com/questions/3295496/what-is-a-java-bean-exactly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:28:56.553

通常 Beans 只保存信息。一些基本的计算可以像这样：

```
private int age=17;
public int getAge(){return age;};
public boolean isOver18(){return getAge() > 18;};
public boolean isNotOver18(){return getAge() < 19;};
public boolean isSurfable(){
    int minAge = beachService.findBeachBean().getMinimumAge();
    int maxAge = beachService.findBeachBean().getMinimumAge();
    boolean hasPhysicalProblems = humanService.findAnatomyBean().hasLegs();
    if(!isSurfboard()){
        hasPhysicalProblems = true;
    }
    return isOver18() && getAge() < maxAge && getAge() >= minAge && hasPhysicalProblems;
} 
```

（顺便说一句。由于模拟和继承，在 isOver18() 中使用 getAge() 很重要）

看看，如果你停止一个网络服务器并且你有一个用户登录。session-passivation 将很容易地将 loginbean 保存到服务器的 HDD 以获取特定的 sessionid (8AHE765F7655F765)，并在服务器重新启动并且会话尝试从 HDD 重新激活此 loginbean 后重新激活 Bean。因此，bean 应该始终特定于 State 或 Action。

# android - 通过私人地址访问网站

> ID：15337451
> 
> 赞同：1
> 
> 时间：2013-03-11T11:29:35.753
> 
> 标签：android, netbeans, ip, wifi, private

我创建了 java web 应用程序并将其部署在 glassfish 服务器上。我正在使用 android 手机热点运行我的网站服务器。任何其他客户端机器都无法访问它，因为它为我提供了一个私人地址，例如。192.168.43.5 PS：完整的 URL 是这样的：192.168.43.5:44372/网站名称 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:41:31.937

[在Jelastic](http://www.jelastic.com)等免费网站托管网站上部署您的 Web 应用程序， 并使用他们提供的 url。

# jquery - 如何在jquery mobile中获取日期框关闭事件

> ID：15337452
> 
> 赞同：0
> 
> 时间：2013-03-11T11:29:38.093
> 
> 标签：jquery, ios, html, jquery-mobile, cordova

嗨，我正在为 iOS 应用程序使用 JqueryMobile-1.3.0 和 Cordova-2.1.0。我正在使用 jqm datebox 进行日期选择。一切正常，但我想捕获日期框的关闭事件，因为我想在日期框已关闭。如何执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:37:51.563

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/ktbcP/](http://jsfiddle.net/Gajotres/ktbcP/)

这是您需要的代码：

```
$(document).on('pagebeforeshow', '#index', function(){       
  $('#mydate').on('datebox', function(e, p) {
    if ( p.method === 'close' ) {
        alert('DO SOMETHING');
    }
  });
}); 
```

其他回调和事件可以在这里找到：http: [//dev.jtsage.com/jQM-DateBox2/demos/api/events.html](http://dev.jtsage.com/jQM-DateBox2/demos/api/events.html)

# actionscript-3 - air sdk 3.5 上的 com.hurlant.util.hex 语法错误

> ID：15337453
> 
> 赞同：1
> 
> 时间：2013-03-11T11:29:42.040
> 
> 标签：actionscript-3, flash, mobile, air

我有一个使用旧版本的 flex sdk 编写和编译的应用程序。现在我必须移植这个应用程序以在移动设备上运行，所以我将 sdk 更改为 air sdk 3.5。我正在使用 hurlant 库进行加密/解密。bu 在 Hex 类上有一行会引发错误。

```
 if (hex.length&1==1) hex="0"+hex; 
```

我不知道 (hex.length&1==1) 是什么意思。那么我应该如何更改线路或者是否有任何其他解决方案可以解决该问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T21:12:25.843

我也看到过这个错误，它发生在您使用 Flash Builder 4.7 的新 ASC2.0 编译器编译时。

我变成 `if (hex.length&1==1) hex="0"+hex;` 了

```
 if ((hex.length&1)==1) hex="0"+hex; 
```

并修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:24:11.480

`if(hex.length&1==1)`表示检查 hex.length 是否为奇数（1,3,5,7...）。

参考如下：

```
var str:String = "111";

if(str.length&1==1)
{
   str = "0" + str;

   trace(str);
} 
```

你的语法没问题。我确定。显示什么样的错误？

我有一个`Hex.as`. 但没有发生任何语法错误。在 Flash Builder 4.6 中，Flash CS6 AIR3.5。

```
package com.hurlant.util
{
    import flash.utils.ByteArray;

    public class Hex
    {
        /**
         * Support straight hex, or colon-laced hex.
         * (that means 23:03:0e:f0, but *NOT* 23:3:e:f0)
         * Whitespace characters are ignored.
         */
        public static function toArray(hex:String):ByteArray {
            hex = hex.replace(/\s|:/gm,'');
            var a:ByteArray = new ByteArray;
            if (hex.length&1==1) hex="0"+hex;
            for (var i:uint=0;i<hex.length;i+=2) {
                a[i/2] = parseInt(hex.substr(i,2),16);
            }
            return a;
        }

        public static function fromArray(array:ByteArray, colons:Boolean=false):String {
            var s:String = "";
            for (var i:uint=0;i<array.length;i++) {
                s+=("0"+array[i].toString(16)).substr(-2,2);
                if (colons) {
                    if (i<array.length-1) s+=":";
                }
            }
            return s;
        }

        /**
         * 
         * @param hex
         * @return a UTF-8 string decoded from hex
         * 
         */
        public static function toString(hex:String):String {
            var a:ByteArray = toArray(hex);
            return a.readUTFBytes(a.length);
        }

        /**
         * 
         * @param str
         * @return a hex string encoded from the UTF-8 string str
         * 
         */
        public static function fromString(str:String, colons:Boolean=false):String {
            var a:ByteArray = new ByteArray;
            a.writeUTFBytes(str);
            return fromArray(a, colons);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:47:31.887

您将需要弹性和空气！
对我来说看起来像是一个错字..

`if (hex.length==1) hex="0"+hex;`

取决于 if 语句应该查找的内容

**编辑**我的坏
我不知道那个运算符，我会用模数来做的！
我向你高超的技能低头。

# json - ASP.NET Web API 总是返回 401 未经授权的错误

> ID：15337455
> 
> 赞同：0
> 
> 时间：2013-03-11T11:29:55.653
> 
> 标签：json, asp.net-web-api

我在 asp.net web api 上使用自定义授权。我按照以下链接 [http://www.codeproject.com/Tips/376810/ASP-NET-WEB-API-Custom-Authorize-and-Exception-Han](http://www.codeproject.com/Tips/376810/ASP-NET-WEB-API-Custom-Authorize-and-Exception-Han) I像这样在我的控制器中使用属性名称

[我的自定义属性]

公共类用户控制器：apicontroller {

}

但它总是显示 401 未经授权的异常，尽管身份验证状态被授权。我已经完全按照它在创建自定义授权属性的链接中。

**我的自定义授权类**

```
 public class tokenAuthorize : AuthorizeAttribute
{
    DBEntity _objScrumDBEntities = new DBEntity ();
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        base.OnAuthorization(actionContext);
        if (actionContext.Request.Headers.GetValues("authenticationToken") != null)
        {
            // get value from header
            string authenticationTokenValue = Convert.ToString(actionContext.Request.Headers.GetValues("authenticationToken").FirstOrDefault());
            ObjectParameter m_tokenParam = new ObjectParameter("status", typeof(string));
            _objScrumDBEntities.validateToken(authenticationTokenValue, m_tokenParam);
           string status = Convert.IsDBNull(m_tokenParam.Value) ? null : (string)m_tokenParam.Value;
            if (status == "false")
            {
                HttpContext.Current.Response.AddHeader("authenticationToken", authenticationTokenValue);
                HttpContext.Current.Response.AddHeader("AuthenticationStatus", "NotAuthorized");
                // actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Forbidden);
                 return;
            }

            else
            {
                HttpContext.Current.Response.AddHeader("authenticationToken", authenticationTokenValue);
                HttpContext.Current.Response.AddHeader("AuthenticationStatus", "Authorized");                
                return;

            }
            //return;
        }
        //actionContext.Response =  actionContext.Request.CreateResponse(HttpStatusCode.ExpectationFailed);
        //else
        // actionContext.Response.ReasonPhrase = "Please provide valid inputs";
    }
} 
```

和我的控制器

```
[tokenAuthorize] 
public class myController : ApiController
{

    public IEnumerable<organization> Get()
    {
        return _objOrgRepository.GetAll();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:35:23.050

当您拥有自定义 AuthorizeAttribute 和自定义 RoleProvider 时，似乎 System.Web.Security.Roles.GetRolesForUser(Username) 不会自动连接。

因此，在您的自定义 AuthorizeAttribute 中，您需要从数据源中检索角色列表，然后将它们与作为参数传递给 AuthorizeAttribute 的角色进行比较。试试下面的代码

```
public class myController : ApiController

{

     [RequestKeyAuthorizeAttribute(Roles="Admin,Bob,Administrator,Clue")]
     public HttpResponseMessage Get()
     {
         return Request.CreateResponse(HttpStatusCode.OK, "RequestKeyAuthorizeTestController");
  } 
```

# magento - 在另一个模板中调用块

> ID：15337456
> 
> 赞同：2
> 
> 时间：2013-03-11T11:29:56.303
> 
> 标签：magento, module, block, magento-1.7

我只是创建一个模块名称引用。现在我想将引用块放置到另一个模块模板文件名success.phtml。可以做到吗？

refer.xml（在推荐模块中）

```
 <?xml version="1.0"?>
    <layout version="0.1.0">

            <checkout_onepage_success>
<reference name="checkout.success">
                    <block type="referral/referral" name="referralCallLink"><action method="referralCallLink"></action></block>
                </reference>
            </checkout_onepage_success>
            <!--block type="referral/referral" name="referralAddSession"><action method="referralAddSession"></action></block-->

    </layout> 
```

成功.phtml

```
<?php if($hasBoughtMCash): ?>
<div> Your 
<?php echo implode(', ',$hasBoughtMCash); ?>
 purchase is successful.
</div>
<?php endif; ?>
<h2>Share in Facebook and Earn for Free MCash!</h2>
<?php echo $this->getChildHtml(); ?> 
```

推荐人.php（块）

```
public function referralCallLink() //success page
    {
    ...

    $collection7 = Mage::getModel('referral/referrallink')->getCollection();
    $collection7->addFieldToFilter('customer_id', array('eq' => $cust_id));
    $collection7->addFieldToFilter('grouped', array('eq' => $grouped));

        foreach($collection7 as $data3)
        {
         $product = $data3->getData('product');
         $link = $data3->getData('link');
         $imageurl = $data3->getData('url');            
        //facebook
         $title=urlencode('Shop, Save and Get Rewarded at MRuncit.com');
         $url=urlencode($link);
         $summary=urlencode('I just bought  '.$product.' from MRuncit.com and earned some MReward Points!');
         $image=urlencode($imageurl);

        ?>
        <p>
        <a href="http://www.facebook.com/sharer.php?s=100&amp;p[title]=<?php echo $title;?>&amp;p[summary]=<?php echo $summary;?>&amp;p[url]=<?php echo $url; ?>&amp;p[images][0]=<?php echo $image;?>','sharer','toolbar=0,status=0,width=548,height=325');" target="_blank">
        <img src="<?php echo $imageurl;?>" width="30">
        I just bought  <?php echo $product; ?> from MRuncit.com and earned some MReward Points!
        </a>
        </p>
        <?php

        }
    } 
```

结果 ![在此处输入图像描述](../Images/bdda78c093868aa71d4b3e0ed9aa3378.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:38:30.727

您应该在布局 XML 中将该块创建为成功块的子代：

```
<layout_handle_of_the_success_page>
    <reference name="name_of_the_success_block_in_layout">
        <block type="your/referral_block" />
    </reference>
</layout_handle_of_the_success_page> 
```

然后您可以在success.phtml中插入以下行：

```
<?php echo $this->getChildHtml('referral'); ?> 
```

您必须将示例 XML 中的一些名称替换为您自己的名称：

*   `layout_handle_of_the_success_page`- 您将在相应模块的布局 XML 中找到它。它的格式应该是`module_controller_action` **--> checkout_onepage_success**
*   `name_of_the_success_block_in_layout`- 同样从布局 XML 中，查找带有 success.phtml 模板及其`name`属性的块**--> checkout.success**
*   `your/referral_block`- 这是您要在表单中插入的块的类别名`module/class` **--> 推荐/推荐**

# regex - 有没有办法否定正则表达式？

> ID：15337458
> 
> 赞同：15
> 
> 时间：2013-03-11T11:30:02.010
> 
> 标签：regex, algorithm, regular-language

给定一个描述正则语言的正则表达式*R*（没有花哨的反向引用）。有没有一种算法方法来构造一个正则表达式*R**来描述除*R*描述的所有单词的语言吗？[正如维基百科](http://en.wikipedia.org/wiki/Regular_language)所说，这应该是可能的：

> 正则语言在各种运算下是封闭的，也就是说，如果语言*K*和*L*是正则的，那么以下运算的结果也是：[…] 补码*¬L*

例如，给定字母表*{a,b,c} ，语言**(abc*)+*的逆是*(a|(ac|b|c).*)？*

* * *

正如 DPenner 在评论中已经指出的那样，正则表达式的逆可以比原始表达式大得多。这使得反转正则表达式不适合实现用于搜索目的的否定部分表达式语法。是否有一种算法可以保留正则表达式匹配的*O(n*m)*运行时特性（其中*n*是正则表达式的大小，*m*是输入的长度）并允许否定子表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:36:35.577

不幸的是，nhahdtdh 在评论中给出的答案是我们所能做的（到目前为止）。给定的正则表达式是否生成所有字符串是 PSPACE 完整的。由于 NP 中的所有问题都是 PSPACE 完全的，因此对普遍性问题的有效解决方案将意味着 P=NP。

如果你的问题有一个有效的解决方案，你能解决普遍性问题吗？你当然会。

1.  使用您的高效算法为否定生成正则表达式；
2.  确定生成的正则表达式是否生成空集。

请注意，“给定一个正则表达式，它是否会生成空集”这个问题相当简单：

1.  正则表达式`{}`生成空集。
2.  `(r + s)`生成空集当且仅当且仅`r`生成`s`空集。
3.  `(rs)`生成空集当且仅当`r`或`s`生成空集。
4.  没有其他东西会生成空集。

基本上，很容易判断正则表达式是否生成空集：只需开始评估正则表达式即可。

（请注意，虽然上述过程在输出长度方面是有效的，但在输入长度方面可能效率不高，如果输出长度比输入长度快多项式。但是，如果是这种情况，无论如何，我们都会得到相同的结果，即您的算法并不是真正有效的，因为从给定的输入生成指数级更长的输出需要指数级的许多步骤）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:42:44.210

维基百科说：[*......如果至少存在一个匹配特定集合的正则表达式，那么存在无限数量的此类表达式*](http://en.wikipedia.org/wiki/Regular_expression#Basic_concepts)。我们可以从这个陈述中推断出，除了 R 所描述的那些之外，还有无数个描述所有词的语言的表达式。

同样，（正如@nhahtdh 试图解释的那样）解决这个问题的最简单算法是将评估范围扩展到正则表达式语言本身的上下文之外。即：使用原始正则表达式**匹配要排除的字符串**（表示要使用的有限子集）**，然后将任何匹配失败视为实际匹配**（在无限的其他可能性中）。因此，如果匹配结果是否定的，则您的候选字符串是有效解决方案的子集。

# c++ - 将所有权从 std::shared_ptr 转移到 std::unique_ptr

> ID：15337461
> 
> 赞同：17
> 
> 时间：2013-03-11T11:30:06.030
> 
> 标签：c++, shared-ptr, smart-pointers, unique-ptr

我有一个类`A`，它有一个类型的字段`std::unique_ptr`：

```
class A
{
public:
   std::unique_ptr pointer;
// class body
}; 
```

在代码的某个地方，我使用了几个`std::shared_ptr`指向同一个对象的 s。现在我想要实现的是`std::unique_ptr`在我的类中将所有权转移到 this 上，这样如果所有`shared_ptr`的 s 都将被销毁，那么只要 this 还活着，我的对象就会`unique_ptr`一直活着。

我的问题是 - 是否可以将所有权从`std::shared_ptr`转移到`std::unique_ptr`，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T12:08:34.313

从逻辑上讲，这种情况对我来说没有意义。

假设有一段时间可以转移所有权，但*只有在*确定只有**一个** `shared_ptr`活着的时候才能这样做；如果是这种情况，那么您仍然可以使用`shared_ptr`as member of`A`并**假装**它是`unique_ptr`.

然后你评论说：

> 没错，我可以`shared_ptr`在 A 类中创建。我想我又误解了一个概念。我想以这种方式表现它：如果`unique_ptr`死了，对象本身也死了，即使`shared_ptr`s 仍然指向它，但这很愚蠢，因为他们不知道对象本身已被销毁，因此它们不会是`nullptr`s。

在这种情况下，您正在查看错误的智能指针。您可能需要的是[`std::weak_ptr`](http://en.cppreference.com/w/cpp/memory/weak_ptr). 如果是这样，那么请确保您使用一个[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)和所有其他作为`std::weak_ptr`.

# java - 用于编写和运行 hadoop 作业的 IDE？

> ID：15337464
> 
> 赞同：8
> 
> 时间：2013-03-11T11:30:11.040
> 
> 标签：java, hadoop, ide

我最近开始学习 Java 中 Hadoop map-reduce 编程的基础知识。到目前为止，我发现的唯一方法是使用 vi 或 emacs 在文件中编写代码，这看起来很糟糕、原始且非常痛苦。

是否有任何用于编写、编译和运行 Hadoop 程序的 IDE？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:01:10.903

使用[Eclipse](http://www.eclipse.org/)。Cloudera 有一个很棒的截屏视频[，](http://blog.cloudera.com/blog/2009/04/configuring-eclipse-for-hadoop-development-a-screencast/)用于配置 eclipse 以进行 hadoop 开发。使用 eclipse 在本地调试 hadoop 作业也很酷（虽然不是微不足道的）。要了解更多信息，请参见[此处](http://amnigos.com/post/44631353593/how-to-guide-hadoop-mapreduce-debugging-in-lo)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-29T00:58:06.900

您还应该查看 IntelliJ IDEA，因为 Apache Hadoop wiki 页面上有关于如何使用它设置开发环境的说明。

参考：

[http://www.jetbrains.com/idea/](http://www.jetbrains.com/idea/)

[http://wiki.apache.org/hadoop/HadoopUnderIDEA](http://wiki.apache.org/hadoop/HadoopUnderIDEA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:24:53.767

[这](http://www.thecloudavenue.com/2012/10/debugging-hadoop-mapreduce-program-in.html)是在 Eclipse/Linux 上调试/开发 Hadoop 作业的博客。另外，检查[Karmasphere Studio](http://karmasphere.com/karmasphere-studio-resources)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-31T14:52:20.810

是的，可以在 Eclipse 中运行 MapReduce 作业。在集群上和在 Eclipse 中运行 MapReduce 程序有很多不同。下面是值得注意的几点：

*   在 Eclipse 中，它以一种称为 LocalJobRunner 的特殊模式运行，即所有 Hadoop 守护进程都在单个 JVM 中运行。
*   在 Eclipse 中，所有路径都是指本地文件路径，而不是 HDFS 路径。

# android - 应用于圆形时，颜色缓冲区无法正常工作

> ID：15337468
> 
> 赞同：0
> 
> 时间：2013-03-11T11:30:18.170
> 
> 标签：android, opengl-es

当我应用颜色缓冲区并在实心圆上混合时，前 20 度的颜色无法正确显示，我得到了某种颜色的色带，但这不是它应该的样子，也许我的代码做错了?

```
public class Circle {
boolean circleChecked;
 private int points=361;
    private float vertices[]={0.0f,0.0f,0.0f};
    private float[] fogcolor = {0.2f,0.4f,0.7f,0.9f};
    private FloatBuffer vertBuff, textureBuffer;
    private FloatBuffer colorBuffer;   // Buffer for color-array (NEW)
    float texData[] = null;
    private float[] colors = { // Colors for the vertices (NEW)
              0.7f,0.7f,0.7f,0.5f,
              0.7f,0.7f,0.7f,0.5f,
              0.7f,0.7f,0.7f,0.5f
           };

    float theta = 0;
    int[] textures = new int[1];
    int R=1;
    float textCoordArray[] = 
        {
            -R, 
            (float) (R * (Math.sqrt(2) + 1)),
             -R, 
             -R,
            (float) (R * (Math.sqrt(2) + 1)), 
            -R
        };
    public Circle(float size, float positionX, float positionY){

        vertices = new float[(points)*3];
        for(int i=0;i<3;i+=3){
            vertices[i]=positionX * size;
            vertices[i+1]=positionY *size;
            vertices[i+2]=0.51f;
        }
        for(int i=3;i<(points)*3;i+=3)
        {       

                vertices[i]=((float) ( Math.cos(theta))/3+positionX) * size;
                vertices[i+1]=((float) (Math.sin(theta))/3+positionY) *size;
                vertices[i+2]=0.5f;
                theta += Math.PI / 90;

        }
        ByteBuffer bBuff=ByteBuffer.allocateDirect(vertices.length*4);    
          bBuff.order(ByteOrder.nativeOrder());
          vertBuff=bBuff.asFloatBuffer();
          vertBuff.put(vertices);
          vertBuff.position(0);

          // Setup color-array buffer. Colors in float. A float has 4 bytes (NEW)
          ByteBuffer cbb = ByteBuffer.allocateDirect(colors.length * 4);
          cbb.order(ByteOrder.nativeOrder()); // Use native byte order (NEW)
          colorBuffer = cbb.asFloatBuffer();  // Convert byte buffer to float (NEW)
          colorBuffer.put(colors);            // Copy data into buffer (NEW)
          colorBuffer.position(0);            // Rewind (NEW)

        ByteBuffer bBuff2=ByteBuffer.allocateDirect(textCoordArray.length * 4 *       360);
        bBuff2.order(ByteOrder.nativeOrder());
        textureBuffer=bBuff2.asFloatBuffer();
        textureBuffer.put(textCoordArray);
        textureBuffer.position(0);
    }

    public void draw(GL10 gl){ 
    //gl.glDisable(GL10.GL_LIGHTING);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    //gl.glColor4f(0.8f, 0.8f, 0.8f, 1);

    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);
    gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer); 
   // if(circleChecked){
    //  gl.glColor4f(0.2f, 0.4f, 0.8f, 1);
    //}
    //gl.glEnable(GL10.GL_TEXTURE_2D);   
    gl.glEnable(GL10.GL_BLEND);
    gl.glPushMatrix(); 
    gl.glFogf(GL10.GL_FOG_MODE, GL10.GL_LINEAR);
    gl.glFogf(GL10.GL_FOG_START, 3.0f);
    gl.glFogf(GL10.GL_FOG_END, 5.0f);
    float fogColor[] = {1f, 0.0f, 0.5f, 1.0f};
    gl.glFogfv(GL10.GL_FOG_COLOR, fogColor, 0);
    gl.glFogf(GL10.GL_FOG_DENSITY, 0.9f);
    gl.glEnable(GL10.GL_FOG);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    //gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]); //4
    //gl.glTexCoordPointer(2, GL10.GL_FLOAT,0, textureBuffer); //5
       // gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, points/2);
      gl.glDisableClientState(GL10.GL_COLOR_ARRAY);   // Disable color-array (NEW)
      gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);   
    gl.glPopMatrix();
    //gl.glDisable(GL10.GL_FOG);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:27:56.483

问题出在您的颜色数组中。glDrawArrays`gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, points/2);`将从您启用其客户端状态“gl.glEnableClientState(GL10.GL_COLOR_ARRAY)”的每个缓冲区中获取值。这些值的数量等于最后一个参数，在您的情况下`points/2`，但您的颜色缓冲区只有 3 个值。结果是只有第一个三角形有正确的颜色映射，其余的都是垃圾，结果是不可预测的。

尽管这对您的情况来说似乎效率低下，但您需要在设置顶点坐标的“for”循环中重复这些颜色参数，并且缓冲区的长度应与“vertBuffer”相同。长度是指值的数量，而不是字节数，在您的情况下，1 个颜色值由 4 个浮点值组成，1 个位置值由 3 个浮点值组成。

# c# - 调试由于 StackOverflow 异常而失败的单元测试

> ID：15337469
> 
> 赞同：16
> 
> 时间：2013-03-11T11:30:21.993
> 
> 标签：c#, .net, unit-testing, stack-overflow

每当由于`StackOverflowException`单元测试过程立即退出而导致单元测试失败 - 找出发生了什么（我知道）的唯一方法是调试通过按照此处找到的步骤获得的单元测试过程的故障转储

*   [收集用户模式转储](http://msdn.microsoft.com/en-us/library/bb787181%28VS.85%29.aspx)

`StackOverflowException`获取抛出时正在运行的单元测试的名称的最简单方法是什么？即使在调试单元测试时，我也很难找到当前单元测试的名称，因为它位于堆栈的底部，并且 Visual Studio 不会在调试窗口中显示整个堆栈，因为它太大了。

有没有办法在不收集和调试故障转储的情况下找出哪个单元测试失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:41:42.073

正如在[另一个问题](https://stackoverflow.com/questions/1599219/c-sharp-catch-a-stack-overflow-exception)中提到的，除非您自己抛出它，否则您无法真正捕获堆栈溢出异常。

因此，作为您的问题的解决方法（不是真正的解决方案），您可以在代码中插入方法调用以检测堆栈溢出，然后手动抛出异常并稍后捕获它。

```
[TestClass]
public class TestStackOverflowDetection
{
    [TestMethod]
    public void TestDetectStackOverflow()
    {
        try
        {
            InfiniteRecursion();
        }
        catch (StackOverflowException e)
        {
            Debug.WriteLine(e);
        }
    }

    private static int InfiniteRecursion(int i = 0)
    {
        // Insert the following call in all methods that
        // we suspect could be part of an infinite recursion 
        CheckForStackOverflow(); 

        // Force an infinite recursion
        var j = InfiniteRecursion(i) + 1;
        return j;
    }

    private static void CheckForStackOverflow()
    {
        var stack = new System.Diagnostics.StackTrace(true);
        if (stack.FrameCount > 1000) // Set stack limit to 1,000 calls
        {
            // Output last 10 frames in the stack
            foreach (var f in stack.GetFrames().Reverse().Take(30).Reverse())
                Debug.Write("\tat " + f);

            // Throw a stack overflow exception
            throw new StackOverflowException();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:29:06.177

看看`RuntimeHelpers.EnsureSufficientExecutionStack`方法（[http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimehelpers.ensuresufficientexecutionstack.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimehelpers.ensuresufficientexecutionstack.aspx)）。您可能希望在递归方法中调用它以`InsufficientExecutionStackException`提前获取。

# .net - 实体框架 3.5 上的 SaveChanges 正在保存未更改的实体（在数据库中复制它们）

> ID：15337475
> 
> 赞同：1
> 
> 时间：2013-03-11T11:30:32.787
> 
> 标签：.net, entity-framework, savechanges

我也在使用 .net 3.5 和 Entity Framework 3.5（无法升级到最新版本）。

当我使用 EF 在数据库中保存新实体时，即使状态为“未更改”且 ID > 0，所有实体引用也会重复。

下面是一小段代码：

```
public long Insert(CarDTO carDTO)
    {
        Car car = Mapper.Map<CarDTO, Car>(carDTO);
        using (var context = new Entities())
        {   
            car.Wheel =
                context
                .Wheels
                .FirstOrDefault(item => item.ID == carDTO.Wheel.ID);

            context.AddToCar(car);
            context.SaveChanges();
        }
    } 
```

如您所见，我只创建了一个 Car 类型的新实体，但是在执行 SaveChanges 时，它还在引用的实体 Wheel 的数据库上创建了一个新副本。

有人可以帮我理解为什么会这样吗？正如我所说，实体 Wheel 的状态为 Unchanged 并且具有 EntityID，因此它不应该在数据库上更新或复制，因为它是一个新实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:26:09.510

找到了解决问题的方法！

出于某种原因，映射不应映射引用实体。因此，避免引用实体的数据库复制的解决方案应该忽略此引用的映射，如下例所示：

```
public long Insert(CarDTO carDTO)
{
    Map map = Mapper.CreateMap<CarDTO, Car>();
    map.ForMember(dto => dto.Wheel, entity => entity.Ignore());
    Car car = Mapper.Map<CarDTO, Car>(carDTO);
    using (var context = new Entities())
    {   
        car.Wheel =
            context
            .Wheels
            .FirstOrDefault(item => item.ID == carDTO.Wheel.ID);

        context.AddToCar(car);
        context.SaveChanges();
    }
} 
```

请记住，您不能在其他地方创建映射（在调用此方法之前），否则它将使用先前声明的配置并且没有忽略语句。

我使用的映射器是这个：[https ://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

# ajax - easyXDM PUT 将数据放在查询字符串中

> ID：15337476
> 
> 赞同：2
> 
> 时间：2013-03-11T11:30:48.560
> 
> 标签：ajax, cross-domain, put, easyxdm

嗨，我在尝试使用 easyXDM 发出 PUT 请求时遇到了一个非常奇怪的问题。

```
that.xhr.request({
                        url: url,
                        method: "PUT",
                        data: [{"foo":"test"}],
                        headers: { "Content-Type": "application/json;" }
                    }, function (response, xhr) {
                        options.success(jQuery.parseJSON(response.data));

                    },function(err) {
                        alert(err);
                    }); 
```

这不会生成请求正文消息，而是将数据视为查询字符串参数。对此有什么可以做的吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:48:17.543

我刚刚遇到了同样的问题并通过以下方式解决了它：

如果您在远程站点上使用 easyXDM 附带的默认 index.html，则会有一行显示

```
var isPOST = (config.method == "POST"); 
```

将此行替换为

```
var isPOST = (config.method == "POST") || (config.method == "PUT"); 
```

并且数据应该作为表单数据而不是查询字符串参数发送。

# math - 关于 dx > 1 的离散数值导数

> ID：15337480
> 
> 赞同：0
> 
> 时间：2013-03-11T11:30:53.177
> 
> 标签：math, opencv, image-processing, numerical-methods

如何为 ad/d(n*x) 运算符生成模板？

我正在编写一个需要计算图像中线导数的程序。如果我们想计算关于 d/dx 的最简单的导数近似，我们可以运行以下操作：

```
diff[x] = -1.0 * image[x] + image[x+1] 
```

如果我想要更精确地计算导数，我可以增加模板的大小，并可能重新计算为：

```
diff[x] = -3./2 * image[x] + 2*image[x+1] - 1./2 * image[x+2] 
```

我一直在使用有限差分法来获得这些系数。

现在假设我想对 d/d(3*x) 求导，我可以像这样简单地拉伸原始模板：

```
diff[x] = -1.0 * image[x] + image[x+3] 
```

但是，这里我没有使用来自 image[x+1] 和 image[x+2] 的信息，因此可以大大改进导数近似。如何生成将使用此信息并因此更准确的模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:49:25.143

根据我对您的问题的理解，我建议以所需的分辨率（例如除以 3）生成二次采样图像，然后应用您原来的导数计算方法。二次采样过程应该通过首先在图像上应用低通滤波器（例如使用框或高斯模糊）来进行适当的抗锯齿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:06:49.533

两个建议：

*   首先，一般来说，使用中心计算。因此，高阶一阶导数是`0.5*(image[x+1]-image[x-1])`

*   其次，使用链式公式推导出“相对于 3x”。以最简单的形式，形式上，`df/dy = df/dx*dx/dy`这意味着`dImage/d(3x) = dImage/dx*(1/3)` 简而言之，只是除以 3。

# regex - Perl将字符串插入特定位置的url

> ID：15337481
> 
> 赞同：1
> 
> 时间：2013-03-11T11:30:59.450
> 
> 标签：regex, string, perl, url, insert

**我有以下代码：**

```
#!/usr/bin/perl

use strict;
use warnings;
#use diagnostics;

use URI qw( );

my @insert_words = qw(HELLO GOODBYE);  

while (<DATA>) {
   chomp;
   my $url = URI->new($_);
   my $query = $url->query;

foreach (@insert_words) {
  # Use package vars to communicate with /(?{})/ blocks.
  local our $insert_word = $_;

  local our @queries;
  if (defined $query) {
      $query =~ m{
          ^(.*[/=])([^/=&]*)((?:[/=&].*)?)\z
          (?{
              if (length $2) {
            push @queries, "$1$insert_word$2$3";
                  push @queries, "$1$insert_word$3";
                  push @queries, "$1$2$insert_word$3";
              }
          })
          (?!)
      }x;
  }

      if (@queries) {
          for (@queries) {
              $url->query($_);
              print $url, "\n";
          }
      }
      else {
          print $url, "\n";
      }
  }
}

__DATA__
http://www.example.com/index.php?route=9&other=7 
```

**上面的代码可以正常工作并产生以下输出：**

```
http://www.example.com/index.php?route=9&other=HELLO7
http://www.example.com/index.php?route=9&other=HELLO
http://www.example.com/index.php?route=9&other=7HELLO
http://www.example.com/index.php?route=HELLO9&other=7
http://www.example.com/index.php?route=HELLO&other=7
http://www.example.com/index.php?route=9HELLO&other=7
http://www.example.com/index.php?route=9&other=GOODBYE7
http://www.example.com/index.php?route=9&other=GOODBYE
http://www.example.com/index.php?route=9&other=7GOODBYE
http://www.example.com/index.php?route=GOODBYE9&other=7
http://www.example.com/index.php?route=GOODBYE&other=7
http://www.example.com/index.php?route=9GOODBYE&other=7 
```

如您所见，它将数组中的单词插入到 url 的特定位置。

**我现在遇到的问题：**

我现在想添加功能来执行`HELLO`and `GOODBYE`（或 中的任何内容`@insert_words`）的所有可能组合，例如，它还应该将以下 url 添加到我已经得到的输出中：

```
http://www.example.com/index.php?route=HELLO&other=GOODBYE
http://www.example.com/index.php?route=HELLO&other=HELLO
http://www.example.com/index.php?route=GOODBYE&other=HELLO
http://www.example.com/index.php?route=GOODBYE&other=GOODBYE 
```

但我不知道如何以最好的方式解决这个问题？

非常感谢您对此的帮助，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:45:08.743

*请*不要使用这样花哨的正则表达式——它们是 Perl 的一个实验性特性，而且远非易于理解。

如果我理解您，那么您需要递归地执行此操作。

我认为您希望 URL 的所有变体与每个查询参数保持原样，或者在`@insert_words`.

这似乎可以满足您的要求。它用于[`URI::QueryParam`](https://metacpan.org/module/URI%3a%3aQueryParam)正确拆分 URL 的查询部分，而不是使用讨厌的正则表达式。它确实产生了比您在问题中显示的更多的组合，但我看不出有其他方式可以解释您的要求。

可能的变化数量为 49。每个参数都可以有其原始值，或者在两个值之前、之后或替换为任何一个值。每个参数有七个可能的值，因此两个参数有 7² 或 49 个不同的变化。

```
use strict;
use warnings;

use URI;
use URI::QueryParam;

my @insert_words = qw/ HELLO GOODBYE /;

my @urls;

sub mod_param {
    my ($url, $paridx, @insertions) = @_;

    my @params = $url->query_param;
    return if $paridx > $#params;

    my $key = $params[$paridx];
    my $oldval = $url->query_param($key);

    my @variations = ($oldval);
    push @variations, ($oldval.$_, $_.$oldval, $_) for @insertions;

    for my $val (@variations) {
        $url->query_param($key, $val);
        if ($paridx == $#params) {
          push @urls, "$url";
        }
        else {
          mod_param($url, $paridx + 1, @insertions);
        }
    }
    $url->query_param($key, $oldval);
}

while (<DATA>) {
    chomp;
    my $url = URI->new($_);
    @urls = ();
    mod_param($url, 0, @insert_words);
    print $_, "\n" for @urls;
}

__DATA__
http://www.example.com/index.php?route=9&other=7 
```

**输出**

```
http://www.example.com/index.php?route=9&other=7
http://www.example.com/index.php?route=9&other=7HELLO
http://www.example.com/index.php?route=9&other=HELLO7
http://www.example.com/index.php?route=9&other=HELLO
http://www.example.com/index.php?route=9&other=7GOODBYE
http://www.example.com/index.php?route=9&other=GOODBYE7
http://www.example.com/index.php?route=9&other=GOODBYE
http://www.example.com/index.php?route=9HELLO&other=7
http://www.example.com/index.php?route=9HELLO&other=7HELLO
http://www.example.com/index.php?route=9HELLO&other=HELLO7
http://www.example.com/index.php?route=9HELLO&other=HELLO
http://www.example.com/index.php?route=9HELLO&other=7GOODBYE
http://www.example.com/index.php?route=9HELLO&other=GOODBYE7
http://www.example.com/index.php?route=9HELLO&other=GOODBYE
http://www.example.com/index.php?route=HELLO9&other=7
http://www.example.com/index.php?route=HELLO9&other=7HELLO
http://www.example.com/index.php?route=HELLO9&other=HELLO7
http://www.example.com/index.php?route=HELLO9&other=HELLO
http://www.example.com/index.php?route=HELLO9&other=7GOODBYE
http://www.example.com/index.php?route=HELLO9&other=GOODBYE7
http://www.example.com/index.php?route=HELLO9&other=GOODBYE
http://www.example.com/index.php?route=HELLO&other=7
http://www.example.com/index.php?route=HELLO&other=7HELLO
http://www.example.com/index.php?route=HELLO&other=HELLO7
http://www.example.com/index.php?route=HELLO&other=HELLO
http://www.example.com/index.php?route=HELLO&other=7GOODBYE
http://www.example.com/index.php?route=HELLO&other=GOODBYE7
http://www.example.com/index.php?route=HELLO&other=GOODBYE
http://www.example.com/index.php?route=9GOODBYE&other=7
http://www.example.com/index.php?route=9GOODBYE&other=7HELLO
http://www.example.com/index.php?route=9GOODBYE&other=HELLO7
http://www.example.com/index.php?route=9GOODBYE&other=HELLO
http://www.example.com/index.php?route=9GOODBYE&other=7GOODBYE
http://www.example.com/index.php?route=9GOODBYE&other=GOODBYE7
http://www.example.com/index.php?route=9GOODBYE&other=GOODBYE
http://www.example.com/index.php?route=GOODBYE9&other=7
http://www.example.com/index.php?route=GOODBYE9&other=7HELLO
http://www.example.com/index.php?route=GOODBYE9&other=HELLO7
http://www.example.com/index.php?route=GOODBYE9&other=HELLO
http://www.example.com/index.php?route=GOODBYE9&other=7GOODBYE
http://www.example.com/index.php?route=GOODBYE9&other=GOODBYE7
http://www.example.com/index.php?route=GOODBYE9&other=GOODBYE
http://www.example.com/index.php?route=GOODBYE&other=7
http://www.example.com/index.php?route=GOODBYE&other=7HELLO
http://www.example.com/index.php?route=GOODBYE&other=HELLO7
http://www.example.com/index.php?route=GOODBYE&other=HELLO
http://www.example.com/index.php?route=GOODBYE&other=7GOODBYE
http://www.example.com/index.php?route=GOODBYE&other=GOODBYE7
http://www.example.com/index.php?route=GOODBYE&other=GOODBYE 
```

# extjs4.1 - 使用 rowexpander 插件的 Extjs 4.1.3 嵌套网格不起作用

> ID：15337484
> 
> 赞同：3
> 
> 时间：2013-03-11T11:31:21.270
> 
> 标签：extjs4.1

我正在尝试使用 sencha 中的示例并配置 rowexpander。当网格渲染时，扩展器已经为每一行打开并且里面没有任何东西。当我点击它的图标时，会生成以下错误： Uncaught TypeError: Cannot call method 'addCls' of null 有没有其他人遇到过这个问题？有人可以发布一个 hpw 的示例来使用 rowexpander。

```
 plugins : [{
            ptype : 'rowexpander',
            rowBodyTpl : ['<div id="NestedGridRow-{rowId}"></div>'],
            pluginId : 'rowexpanderplugin',
            selectRowOnExpand : true,

            // this gives each row a unique identifier based on record's "acct_no"
            rowBodyTpl : ['<div id="NestedGrid-{name}" ></div>'],

            // stick a grid into the rowexpander div whenever it is toggled open
            toggleRow : function(rowIdx) {
                var rowNode = this.view.getNode(rowIdx), row = Ext.get(rowNode), nextBd = Ext.get(row).down(this.rowBodyTrSelector), hiddenCls = this.rowBodyHiddenCls, record = this.view.getRecord(rowNode), grid = this.getCmp(), name= record.get('name'), targetId = 'NestedGrid-' + name;

                if (row.hasCls(this.rowCollapsedCls)) {
                    row.removeCls(this.rowCollapsedCls);
                    this.recordsExpanded[record.internalId] = true;
                    this.view.fireEvent('expandbody', rowNode, record, nextBd.dom);

                    if (rowNode.grid) {
                        nextBd.removeCls(hiddenCls);
                        rowNode.grid.doComponentLayout();
                        rowNode.grid.view.refresh();
                    } else {

                        // this is the store for the inner grid
                        Ext.create('innsergridstore', {

                            autoLoad : {
                                callback : function() {

                                    // create the inner grid and render it to the row
                                    nextBd.removeCls(hiddenCls);
                                    var grid = Ext.create('NestedGrid', {// <-- this is my "inner" grid view
                                        renderTo : targetId,
                                        store : this,
                                        row : row
                                    });

                                    rowNode.grid = grid;

                                    grid.suspendEvents();
                                }
                            }
                        });
                    }

                } else {
                    row.addCls(this.rowCollapsedCls);
                    nextBd.addCls(this.rowBodyHiddenCls);
                    this.recordsExpanded[record.internalId] = false;
                    this.view.fireEvent('collapsebody', rowNode, record, nextBd.dom);
                }
            }
        }] 
```

# c# - 在这种情况下，我应该在运行时编译 C# 吗？

> ID：15337486
> 
> 赞同：3
> 
> 时间：2013-03-11T11:31:31.353
> 
> 标签：c#, .net, algorithm, dynamic

我们有一个 MS SQL 2005 数据库。数据从 Excel 表格上传到此数据库。这些 Excel 表格来自不同的供应商，其中大多数从不维护预定义的结构，因此我们可以创建单独的插入/更新模块。到目前为止，我已经创建了一个模块，它接受预定义格式的 Excel 工作表并从中上传数据。对于每个供应商，都必须手动以预定义的方式对其进行格式化，这需要很长时间并且是一项艰巨的工作。

现在我们删除了手动格式并将所有数据库列放在一个列中，并将包含所有 Excel 列的下拉列表放在另一列中。用户映射所需的列并更新数据库。

但是大多数时候这个简单的映射是不够的，因为大多数时候我们必须根据一些逻辑来拆分/组合值。为了使其更加用户友好，并且由于我的大多数用户自己都是 C# 程序员，我决定删除下拉菜单并使用用户可以直接输入逻辑的文本框。例如：

```
dbcol1 = excel[col1].ToString().Replace("-"," ")
    +(int.Parse( excel[col6].ToString())*.1).ToString(); 
```

在搜索这个时，我遇到了*动态编译 C# 代码*。由于我以前从未这样做过，而且我不确定这种方法是否有效，我需要知道我是否朝着正确的方向前进。或者有没有更有效和更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:03:38.093

编写脚本？如果您想即时编译和运行代码，C# 脚本非常方便；

如果您可以将字符串格式化为正确的 C#，它将让您编译和运行它。

[http://www.csscript.net/](http://www.csscript.net/)

例如：

```
dynamic script = CSScript.Evaluator
                         .LoadMethod(@"void SayHello(string greeting)
                                       {
                                           Console.WriteLine(greeting);
                                       }");
script.SayHello("Hello World!"); 
```

可能不适合生产，但您至少可以为您的想法制作原型

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T11:54:31.807

通常，您将使用动态[`Reflection.Emit`](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)生成 .NET 程序集并执行该程序集。但是，它只接受中间语言指令，而不接受 C#。每次你想执行一段代码时创建一个全新的程序集根本没有效率。

* * *

**Roslyn**是微软在*编译器即服务*方面的尝试。这是为 C# 和 VB.Net 重新编写的编译器，应用程序可以调用它来编译代码，并提供有关正在编译的代码的信息。

Anders Hejlsberg（我相信）展示了一个使用 Roslyn 编译器来实现 C# 脚本接口的示例：键入一些 C# 并即时执行。虽然 Roslyn 仍在开发中，但您可能想通过尝试[Roslyn CTP](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)来查看它是否能满足您的需求。

[*C# as a Scripting Language in Your .NET Applications Using Roslyn*](http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications)是一篇 CodeProject 文章，其中涉及到一些细节。

* * *

最后，如果你不能（还）或者不想使用 Roslyn，或者如果它不能提供你想要的执行速度，那么我认为你最好的选择（就性能而言）是解析和解释脚本自己编码。然而，这是容易出错的艰苦工作。

# ruby - 使用 chef 列出 AWS 快照

> ID：15337490
> 
> 赞同：1
> 
> 时间：2013-03-11T11:31:41.617
> 
> 标签：ruby, amazon-web-services, chef-infra, snapshot

我正在寻找一种解决方案来列出 Chef 中的所有 AWS 快照并选择最新的。所有快照都定义为这样 servername_service_date ，我想通过日期列出它们，然后让服务器按日期选择最新的一个。因此它将从该快照创建卷。我将使用 AWS 配方，但它们没有该功能。所以我想有一些提示如何使它发生，当然不是完整的代码（如果有人还没有它）。我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T23:18:43.837

[由于 Chef 只​​是 Ruby 代码，因此您可以使用AWS Ruby gem](http://aws.amazon.com/sdkforruby/)轻松编写一个简单的库。例如：

```
AWS.ec2.snapshots #=> #<SnapshotCollection> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T15:37:16.793

您将需要 ruby​​ aws SDK 您需要确定您将使用的 ruby​​ SDK 的部分（提示其 ec2：[https](https://docs.aws.amazon.com/sdkforruby/api/Aws/EC2.html) ://docs.aws.amazon.com/sdkforruby/api/Aws/EC2.html ）

您将需要实例化一个连接器

```
ec2 = Aws::EC2::Client.new(region: 'us-east-1') 
```

然后你会做你的操作的细节..只是小心添加随机的东西到厨师以这种方式工作！

利用 AWS 说明书（已包含 AWS 开发工具包），您可以搭载该功能以使用您自己的功能进行扩展。

我的建议：只需创建一些获取此数据并填充您的厨师查找的东西（您的快照列表）（可能只是在环境中填充 json 或具有您的快照列表的东西）（一些外部 k/v 存储，如 consul 到存储调查结果等）

# c - 在C中将整数显示为十六进制

> ID：15337491
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:31:43.107
> 
> 标签：c, casting, integer, printf, hex

我在 C 类中有这部分代码：

```
int i;
    for (i=0;i<val;i++)
        mdl_print ("%u ", rec->payload[i]);
    mdl_print ("\n"); 
```

变量 rec->payload 是 uint8_t 类型。我会以十六进制表示法打印它。

我能怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:33:17.637

快捷方便：

```
print("%x", (int)(rec->payload[i])); 
```

要以 0x05 格式显示，请使用：

```
print("0x%02x", ...) 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:33:36.717

如果 mdl_print() 像标准 C 函数 printf() 一样工作，请尝试以下操作：

```
printf( "%02x", (int) rec->payload[i] ); 
```

以十六进制编写的基本 printf 格式化代码是 %x。“02”表示用“0”填充数字，直到它有两个字符宽，这就是您通常打印 int8 的方式。

许多自定义输出函数都以这种方式遵循 printf 的格式，因为 C 程序员非常熟悉它。您可以在其手册页上阅读有关 printf 的更多信息：http: [//linux.die.net/man/3/printf](http://linux.die.net/man/3/printf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:34:04.510

使用“%x”，所以：

mdl_print ("%x", rec->payload[i]);

这会给你一个十六进制数，它是“必要的长度”。如果您想要一个固定长度，请使用“%02x”作为用零填充的两位数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T12:15:27.287

请注意，在 printf 中提供 a `uint8_t`or `int`where an`unsigned int`是未定义的行为，如 n1570.pdf 的第 7.21.6.1p9 节所述：“如果任何参数不是相应转换规范的正确类型，则行为未定义。” 根据 7.21.6.1p8，`%x`告诉 printf 期待一个`unsigned int`. 确保您明确地将您的`uint8_t`转换为`(unsigned int)`，或使用在`PRIx8`中找到的宏`<stdint.h>`。

```
#include <assert.h>
#include <stdint.h>
#include <stdio.h>

int main(void) {
    uint8_t foo = 42;
    /* These two printfs are equivalent: */
    printf("Hex for %02u: %02x\n", (unsigned int) foo, (unsigned int) foo);
    printf("Hex for %02" PRIu8 ": %02" PRIx8 "\n", foo, foo);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T11:49:00.140

首先你的标题是错误的......`Casting integer to hex in C`铸造意味着类型改变，十六进制是一个数字系统而不是一个类型。您“以十六进制显示整数”而不是“强制转换”。如果您不理解其中的区别，请要求澄清。

就显示而言，这取决于您希望结果的样子。我通常使用的一种捷径是：

```
mdl_print("%#x ", rec->payload[i]); 
```

将值显示为：

```
0xA6 
```

这种语法的警告是它不适用于 0，你不会得到`0x0`. `0`所以另一种选择是：

```
mdl_print("0x%x ", rec->payload[i]); 
```

这会将值显示为`0xA6`或`0x0`或任何可能的值。当然，如果你不想要这个`0x`部分，你总是可以这样做：

```
mdl_print("%x ", rec->payload[i]); 
```

带有无符号 8 位数字的最大值（十六进制）是`0xFF`这样的，如果您希望它们都显示相同的“宽度”，您也可以使用大小说明符：

```
mdl_print("%02x ", rec->payload[i]); // or mdl_print("0x%02x, rec->payload[i]); 
                                     // or whatever you picked 
```

# java - 打印 Java 热点 JIT 汇编代码

> ID：15337492
> 
> 赞同：5
> 
> 时间：2013-03-11T11:31:44.963
> 
> 标签：java, assembly, jit, disassembly, jvm-hotspot

我用 Java 写了一个非常愚蠢的测试类：

```
public class Vector3 {
   public double x,y,z ;

   public Vector3(double x, double y, double z) {
       this.x=x ; this.y=y ; this.z=z ;
   }

   public Vector3 subst(Vector3 v) {
      return new Vector3(x-v.x,y-v.y,z-v.z) ;
   }
} 
```

然后我想看看 Java Hotspot JIT（Client VM build 23.7-b01）生成的代码。[我使用了“-XX:+PrintAssembly”选项和来自http://classparser.blogspot.dk/2010/03/hsdis-i386dll.html](http://classparser.blogspot.dk/2010/03/hsdis-i386dll.html)的 hsdis-i386.dll

这是生成代码的有趣部分（我跳过了新对象的初始化。编辑：subst 方法的代码）。显然，ebx 是“this”指针，edx 是指向参数的指针。

```
lds    edi,(bad)
sti    
adc    BYTE PTR [ebx+8],al  ;*getfield x
mov    edx,DWORD PTR [esp+56]
lds    edi,(bad)          ; implicit exception: dispatches to 0x02611f2d
sti    
adc    BYTE PTR [edx+8],cl  ;*getfield x
lds    edi,(bad)
sti    
adc    BYTE PTR [ebx+16],dl  ;*getfield y
lds    edi,(bad)
sti    
adc    BYTE PTR [edx+16],bl  ;*getfield y
lds    edi,(bad)
sti    
adc    BYTE PTR [ebx+24],ah  ;*getfield z
lds    edi,(bad)
sti    
adc    BYTE PTR [edx+24],ch  ;*getfield z
lds    edi,(bad)
sti    
pop    esp
rol    ebp,0xfb
adc    DWORD PTR [eax+8],eax  ;*putfield x
lds    ebp,(bad)
jmp    0x02611f66
rol    ebp,cl
sti    
adc    DWORD PTR [eax+16],edx  ;*putfield y
lds    ebx,(bad)
fistp  DWORD PTR [ebp-59]
sti    
adc    DWORD PTR [eax+24],esp  ;*putfield z 
```

老实说，我对 x86 汇编不是很熟悉，但是这些代码对你有意义吗？像“adc BYTE PTR [edx+8],cl”这样的奇怪指令在做什么？我会期待一些 FPU 指令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:12:38.937

又是我。我使用最新的 binutils 2.23 构建了 hsdis-i386.dll。[由于http://dropzone.nfshost.com/hsdis.htm](http://dropzone.nfshost.com/hsdis.htm)中的说明，这比我预期的要容易 （至少对于 x86 版本。64 位版本编译但立即停止 JVM，没有任何错误消息）

输出现在看起来好多了：

```
vmovsd xmm0,QWORD PTR [ebx+0x8]  ;*getfield x
mov    edx,DWORD PTR [esp+0x40]
vmovsd xmm1,QWORD PTR [edx+0x8]  ;*getfield x
vmovsd xmm2,QWORD PTR [ebx+0x10] ;*getfield y
vmovsd xmm3,QWORD PTR [edx+0x10] ;*getfield y
vmovsd xmm4,QWORD PTR [ebx+0x18] ;*getfield z
vmovsd xmm5,QWORD PTR [edx+0x18] ;*getfield z
vsubsd xmm0,xmm0,xmm1
vmovsd QWORD PTR [eax+0x8],xmm0  ;*putfield x
vsubsd xmm2,xmm2,xmm3
vmovsd QWORD PTR [eax+0x10],xmm2 ;*putfield y
vsubsd xmm4,xmm4,xmm5
vmovsd QWORD PTR [eax+0x18],xmm4 ;*putfield z 
```

# java - 调用者应该在调用构造函数之前检查参数的有效性吗？

> ID：15337494
> 
> 赞同：6
> 
> 时间：2013-03-11T11:31:53.113
> 
> 标签：java, oop, coding-style

我最近阅读了很多关于 TDD 和干净代码的内容，所以我开始研究一个简单的项目来使用它们，我遇到了一些我真的不确定最好的方法是什么。

我有一个将 Java`File`对象作为参数的类，期望这个`File`对象必须是一个目录并且必须以某个前缀开头。我的第一次通过涉及`File`在调用构造函数之前对对象进行检查，即检查它是否是一个目录并检查名称是否有效。但我不喜欢调用者指定什么使它有效，特别是有效前缀是什么，我认为这个逻辑应该放在类本身中。

我可以在构造函数中进行此检查并在它无效时抛出异常，但鉴于问题的性质，如果我正在迭代一个`File`s 列表，那么完全可以预期其中一些不会是“有效的” ' （即它们将是文件而不是目录）所以抛出一个`Exception`真的有保证吗？

```
public MyObject(File directory) {
    if (!directory.isDirectory()) {
        throw new IllegalArgumentException("Must be a directory");
    }
    if (!directory.getName().startsWith("Prefix")) {
        throw new IllegalArgumentException("Must start with Prefix");
    }
    ....
} 
```

我考虑过可能添加一个工厂方法来创建对象，如果`File`无效则返回 null 。

```
public static MyObject createMyObject(File directory) {
    if (!directory.isDirectory() || !directory.getName().startsWith("Prefix")) {
        return null;
    }
    return new MyObject(directory);
} 
```

或者，我考虑在调用构造函数之前为调用者验证文件的类添加一个静态方法。

```
public static boolean isValid(File directory) {
    return directory.isDirectory() && directory.getName().startsWith("Prefix");
}

if (MyObject.isValid(directory)) {
    MyObject object = new MyObject(directory);
} 
```

那么就干净的代码和所有 OOP 原则（例如单一职责、耦合等）而言，这将是首选的方式？

**更新：**

阅读了一些已经发布的答案后，我开始考虑另一种可能性，这种可能性仅适用于我目前的情况，而不是像我的问题所涉及的那样普遍适用。

作为我的调用代码的一部分，我有一个来自文件系统的路径，并且我列出了该目录中的所有文件，然后我将每个文件传递给 MyObject 构造函数，无论它是否有效。我可以将 a 传递`FileFilter`给`listFiles`确保 listFiles 仅返回有效目录的方法。`FileFilter`可以在 MyObject 中声明：

```
public static FileFilter getFilter() {
    return new FileFilter() {
        public boolean accept(File path) {
            return path.isDirectory() && path.getName().startsWith("Prefix");
        }
    };
} 
```

如果我的构造函数抛出异常，那么这确实是一种异常情况，因为期望它只传递有效目录。这样做意味着我可以消除对构造函数/工厂检查异常的需要，因为任何异常都表明某处存在错误，而不是预期的行为。但它仍然留下了是否将其放入构造函数或工厂方法的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:38:21.657

```
public static MyObject createMyObject(File directory) throws IllegalArgumentException{
    if (!directory.isDirectory() || !directory.getName().startsWith("Prefix")) {
        return throw new IllegalArgumentException("invalid parameters")";
    }
    return new MyObject(directory);
} 
```

这是您建议的两个选项的混合选项之一。使用工厂方法并验证工厂方法擅长的前提条件。所以 IMO 这可能是一个不错的选择。

> **为什么不选择选项 2：**`nulls`因为当您可以抛出异常以警告用户某些先决条件未满足时， 返回是一个不好的选择。

**更新：** 此策略保证只会创建处于有效状态的对象。此外，如果你想模拟你的实例，`MyObject`你可以让它实现一些使用运行时多态性的接口并传递模拟对象。希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:47:35.753

我认为验证代码所属的位置完全取决于“MyObject”类所代表的内容。

如果 MyObject 执行某些操作如果它有一个文件而不是一个目录就会失败，那么我会说它应该在其构造函数中包含验证代码 - 这使得类自包含，并允许可能重用该类之后。

如果 MyObject 只是文件/目录的容器，并且其中没有特定于目录的代码，则将验证代码放在*确实*需要目录而不是文件的类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:53:17.883

当给定的参数没有完成由`static boolean isValid()`验证方法补充的契约时，我更喜欢提供一个构造函数的组合，该构造函数验证并抛出异常。

在循环中使用验证方法提供了一种构造有效对象的良好、可读的方式，而构造函数确保通过在需要时抛出异常来处理未验证的使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:43:47.957

这取决于...

从编码的角度来看，最简单和最干净的方法是爆炸（未验证）构造函数。如果有合理的期望调用者会并且应该只传递目录，那么就去吧。

如果有合理的期望调用者可以传入非目录，那么您有两种选择：

1.  如果调用者可以处理这种情况，让构造函数抛出一个*检查*异常
2.  如果调用者无法处理异常，则如果调用者调用方法，您可以让您的类“什么也不做”——如果传递给构造函数的文件不是目录，则基本上忽略所有“做”某事的请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T15:22:01.707

这称为[按合同设计，](https://stackoverflow.com/questions/1075719/a-good-design-by-contract-library-for-java)并且有一些库可以帮助您检查传入的参数。

# android - 未调用预期活动

> ID：15337497
> 
> 赞同：0
> 
> 时间：2013-03-11T11:32:01.020
> 
> 标签：android, android-activity

这是我要调用的活动的代码。包 se.anyro.nfc_reader；

```
import java.nio.charset.Charset;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.Locale;

import se.anyro.nfc_reader.record.ParsedNdefRecord;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.Intent;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.nfc.Tag;
import android.nfc.tech.MifareClassic;
import android.nfc.tech.MifareUltralight;
import android.os.Bundle;
import android.os.Parcelable;
import android.view.LayoutInflater;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

import com.example.mposclient.MainActivity;

/**
 * An {@link Activity} which handles a broadcast of a new tag that the device just         discovered.
 */
public class TagViewer extends Activity {

private static final SimpleDateFormat TIME_FORMAT = new SimpleDateFormat();
private LinearLayout mTagContent;

private NfcAdapter mAdapter;
private PendingIntent mPendingIntent;
private NdefMessage mNdefPushMessage;

private AlertDialog mDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.tag_viewer);
mTagContent = (LinearLayout) findViewById(R.id.list);
resolveIntent(getIntent());

mDialog = new AlertDialog.Builder(this).setNeutralButton("Ok", null).create();

mAdapter = NfcAdapter.getDefaultAdapter(this);
if (mAdapter == null) {
showMessage(R.string.error, R.string.no_nfc);
}

mPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
mNdefPushMessage = new NdefMessage(new NdefRecord[] { newTextRecord(
            "Message from NFC Reader :-)", Locale.ENGLISH, true) });
}

private void showMessage(int title, int message) {
mDialog.setTitle(title);
mDialog.setMessage(getText(message));
mDialog.show();
}

private NdefRecord newTextRecord(String text, Locale locale, boolean encodeInUtf8) {
byte[] langBytes = locale.getLanguage().getBytes(Charset.forName("US-ASCII"));

Charset utfEncoding = encodeInUtf8 ? Charset.forName("UTF-8") : Charset.forName("UTF-16");
byte[] textBytes = text.getBytes(utfEncoding);

int utfBit = encodeInUtf8 ? 0 : (1 << 7);
char status = (char) (utfBit + langBytes.length);

byte[] data = new byte[1 + langBytes.length + textBytes.length];
data[0] = (byte) status;
System.arraycopy(langBytes, 0, data, 1, langBytes.length);
System.arraycopy(textBytes, 0, data, 1 + langBytes.length, textBytes.length);

return new NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_TEXT, new byte[0], data);
}

@Override
protected void onResume() {
super.onResume();
if (mAdapter != null) {
if (!mAdapter.isEnabled()) {
showMessage(R.string.error, R.string.nfc_disabled);
}
mAdapter.enableForegroundDispatch(this, mPendingIntent, null, null);
mAdapter.enableForegroundNdefPush(this, mNdefPushMessage);
}
}

@Override
protected void onPause() {
super.onPause();
if (mAdapter != null) {
mAdapter.disableForegroundDispatch(this);
mAdapter.disableForegroundNdefPush(this);
}
}

private void resolveIntent(Intent intent) {
String action = intent.getAction();
if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)
            || NfcAdapter.ACTION_TECH_DISCOVERED.equals(action)
            || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {
Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
NdefMessage[] msgs;
if (rawMsgs != null) {
msgs = new NdefMessage[rawMsgs.length];
for (int i = 0; i < rawMsgs.length; i++) {
msgs[i] = (NdefMessage) rawMsgs[i];
}
} else {
// Unknown tag type
byte[] empty = new byte[0];
byte[] id = intent.getByteArrayExtra(NfcAdapter.EXTRA_ID);
Parcelable tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
byte[] payload = dumpTagData(tag).getBytes();

NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, id, payload);
NdefMessage msg = new NdefMessage(new NdefRecord[] { record });
msgs = new NdefMessage[] { msg };             
}
// Setup the views
buildTagViews(msgs);
}
}

private String dumpTagData(Parcelable p) {
StringBuilder sb = new StringBuilder();
Tag tag = (Tag) p;
byte[] id = tag.getId();
sb.append("Tag ID (hex): ").append(getHex(id)).append("\n");
sb.append("Tag ID (dec): ").append(getDec(id)).append("\n");

String prefix = "android.nfc.tech.";
sb.append("Technologies: ");
for (String tech : tag.getTechList()) {
sb.append(tech.substring(prefix.length()));
sb.append(", ");
}
sb.delete(sb.length() - 2, sb.length());
for (String tech : tag.getTechList()) {
if (tech.equals(MifareClassic.class.getName())) {
sb.append('\n');
MifareClassic mifareTag = MifareClassic.get(tag);
String type = "Unknown";
switch (mifareTag.getType()) {
case MifareClassic.TYPE_CLASSIC:
type = "Classic";
break;
case MifareClassic.TYPE_PLUS:
type = "Plus";
break;
case MifareClassic.TYPE_PRO:
type = "Pro";
break;
}
sb.append("Mifare Classic type: ");
sb.append(type);
sb.append('\n');

sb.append("Mifare size: ");
sb.append(mifareTag.getSize() + " bytes");
sb.append('\n');

sb.append("Mifare sectors: ");
sb.append(mifareTag.getSectorCount());
sb.append('\n');

sb.append("Mifare blocks: ");
sb.append(mifareTag.getBlockCount());
}
if (tech.equals(MifareUltralight.class.getName())) {
sb.append('\n');
MifareUltralight mifareUlTag = MifareUltralight.get(tag);
String type = "Unknown";
switch (mifareUlTag.getType()) {
case MifareUltralight.TYPE_ULTRALIGHT:
type = "Ultralight";
break;
case MifareUltralight.TYPE_ULTRALIGHT_C:
type = "Ultralight C";
break;
}
sb.append("Mifare Ultralight type: ");
sb.append(type);
}
}  
return sb.toString();
}

private String getHex(byte[] bytes) {
StringBuilder sb = new StringBuilder();
for (int i = bytes.length - 1; i >= 0; --i) {
int b = bytes[i] & 0xff;
if (b < 0x10)
sb.append('0');
sb.append(Integer.toHexString(b));
if (i > 0) {
sb.append(" ");
}
}
return sb.toString();
}

private long getDec(byte[] bytes) {
long result = 0;
long factor = 1;
for (int i = 0; i < bytes.length; ++i) {
long value = bytes[i] & 0xffl;
result += value * factor;
factor *= 256l;
}
return result;
}

void buildTagViews(NdefMessage[] msgs) {
if (msgs == null || msgs.length == 0) {
return;
}
LayoutInflater inflater = LayoutInflater.from(this);
LinearLayout content = mTagContent;

// Parse the first message in the list
// Build views for all of the sub records
Date now = new Date();
List<ParsedNdefRecord> records = NdefMessageParser.parse(msgs[0]);

final int size = records.size();
for (int i = 0; i < size; i++) {
TextView timeView = new TextView(this);
timeView.setText(TIME_FORMAT.format(now));
content.addView(timeView, 0);
ParsedNdefRecord record = records.get(i);
// line which displays the text 
content.addView(record.getView(this, inflater, content, i), 1 + i);
content.addView(inflater.inflate(R.layout.tag_divider, content, false), 2 + i);
byte[] payload = msgs[0].getRecords()[0].getPayload();
String data = new String(payload);
Toast.makeText(getApplicationContext(), data,
Toast.LENGTH_SHORT).show();

String[] words = data.split(" ");  
Intent callMain=new Intent(TagViewer.this,MainActivity.class);
callMain.putExtra("expid", words[0]);
callMain.putExtra("exname", words[1]);
callMain.putExtra("exprice", words[2]);
startActivity(callMain);
}
}

@Override
public void onNewIntent(Intent intent) {
setIntent(intent);
resolveIntent(intent);
}
} 
```

这是清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.accountmanager"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.NFC" />

    <uses-feature android:name="android.hardware.nfc" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="se.anyro.nfc_reader.TagViewer"
            android:alwaysRetainTaskState="true"
            android:label="@string/app_name"
            android:launchMode="singleInstance"
            android:screenOrientation="nosensor" >
            <intent-filter>
                <action android:name="android.nfc.action.TAG_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.MainActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.example.accountmanager.Register"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mposclient.ProductList"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.AccountDetails"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.ClientActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.ClientTabsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.Credentials"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mposclient.DBHelper"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mposclient.ListActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mposclient.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mposclient.ParseData"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.Options"
            android:label="@string/title_activity_options" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.SwipeCard"
            android:label="@string/title_activity_swipe_card" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.Transaction"
            android:label="@string/title_activity_transaction" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.DatabaseHelper"
            android:label="@string/title_activity_database_helper" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.TransList"
            android:label="@string/title_activity_trans_list" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.accountmanager.MainActivity2"
            android:label="@string/title_activity_main_activity2" >
        </activity>
    </application>

</manifest> 
```

这里的问题是我想启动活动 TagViewer 但是当应用程序运行时，正在调用其他一些活动并且它没有响应我无法点击它的按钮等。请检查代码中是否有任何错误，因为日志没有显示任何错误只是没有打开正确的活动

这就是 logcat 显示的内容。

```
Installing AccountManager.apk...
Success!
Project dependency found, installing: nfc-reader
Uploading nfc-reader.apk onto device 
Installing nfc-reader.apk...
Success!
Starting activity se.anyro.nfc_reader.TagViewer on device 4df7e2387663cf87
ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=  [android.intent.category.LAUNCHER]    cmp=com.example.accountmanager/se.anyro.nfc_reader.TagViewer } 
```

# c# - 使用 SPLIT 后如何更改 RichTextBox 上特定字符串的字体颜色

> ID：15337499
> 
> 赞同：1
> 
> 时间：2013-03-11T11:32:15.393
> 
> 标签：c#, visual-studio-2010

你好大师/程序员。
我正在尝试使用Split（），使用它后，我想检查RTB上的输入是否==我的观点，然后更改RTB上的字体颜色。像这个例子。

RTB 上的输入：`Chelsea is my favorite football club. I like playing football`
我的观点：`football.`

然后我拆分输入，然后检查 arr 每个索引的拆分结果。
最后，找到前：`arr[4] and [9] = football`

那么，如何在 RTB 屏幕上更改字体颜色，例如
“切尔西是我的最爱**`football`**。我喜欢打球**`football`**。”？

这是我的代码示例：

```
 ArrayList arrInput = new ArrayList();
 //if the input Chelsea is my favorite football club. I like playing football
 string allInput = rtbInput.Text; 

 string[] splitString = allInput.Split(new char[] { ' ', '\t', ',', '.'});

 foreach (string s in splitString)
 {
     if (s.Trim() != "")
     {      
          int selectionStart = s.ToLower().IndexOf("football");

          if (selectionStart != -1)
          {
              rtbInput.SelectionStart = selectionStart;
              rtbInput.SelectionLength = ("football").Length;
              rtbInput.SelectionColor = Color.Red;
          }
 }
 //What Next?? Im confused. We know that football on arrInput[4].ToString() and [9]
 //How to change font color on RTB screen when the input == football 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:47:07.377

您需要选择`football`并设置`SelectionColor`属性

```
foreach (string s in splitString)
{
    string trimmedS = s.Trim();

    if (trimmedS != "")
    {
        int selectionStart = -1;
        if (trimmedS.ToLower == "football") // Find the string you want to color
            selectionStart = allInput.Count;

        allInput.Add(s);

        if (selectionStart != -1)
        {
            rtbInput.SelectionStart = selectionStart; // Select that string on your RTB
            rtbInput.SelectionLength = trimmedS.Length;
            rtbInput.SelectionColor = myCustomColor; // Set your color here
        }
    }
} 
```

**编辑：**
替代

```
// create your allInput first

int selectionStart = allInput.ToLower().IndexOf("football");
if (selectionStart != -1)
{
    rtbInput.SelectionStart = selectionStart;
    rtbInput.SelectionLength = ("football").Length;
    rtbInput.SelectionColor = myCustomColor;
} 
```

我推荐第二个答案，因为我不确定颜色是否会保留，因为我们继续构建`RichTextBox.Text`

**Edit2：**
另一种选择

```
// create your allInput first

Regex regex = new Regex("football", RegexOptions.IgnoreCase); // using System.Text.RegularExpressions;

foreach (Match match in regex.Matches(allInput))
{
    rtbInput.SelectionStart = match.Index;
    rtbInput.SelectionLength = match.Length;
    rtbInput.SelectionColor = myCustomColor;
} 
```

# android - 电话簿设置（即仅联系人过滤器）android代码示例

> ID：15337500
> 
> 赞同：5
> 
> 时间：2013-03-11T11:32:15.513
> 
> 标签：android

我想要的是从我的应用程序中隐藏电话簿中没有电话号码的所有联系人。就像电话簿一样，当您转到电话簿 - > 设置时，有一个复选框指出“仅与电话号码联系”我想实现此功能在我的应用程序中

我需要一种方法（代码）将用户导航到电话簿->设置（活动）（系统应用程序）

从我的应用程序活动。

或更糟糕的情况是通过数据库隐藏所有没有电话号码的联系人。这样电话簿就可以过滤掉。

目前我发现

```
Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(intent, 123); 
```

上面的代码打开电话簿，但我想打开电话簿 - >设置页面。

**总之，我想从我的应用程序中制作电话簿内容“带有电话号码的联系人”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:36:58.527

> 我需要一种方法（代码）将用户导航到电话簿->设置（活动）（系统应用程序）

有数百甚至数千部 Android 手机。他们的“电话簿”应用程序不一定相同。这些“电话簿”应用程序都不一定具有您所寻求的功能——有些可能，有些则没有。而且，最有可能的是，没有一个记录和支持的`Intent`结构可以访问应用程序内的屏幕来控制他们可能拥有或不拥有的设置。

> 我想要的是从我的应用程序中隐藏电话簿中没有电话号码的所有联系人

然后您将不需要使用“电话簿”应用程序，而是通过`READ_CONTACTS`权限和`ContactsContract` `ContentProvider`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:36:35.910

```
Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(intent, PICK_CONTACT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T03:35:41.753

Well, I have sucessfully developed a Contacts application for Android as my major project. I believe this is quite simple. Here is code how I did it.

```
Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,
                                           null,
                                           ContactsContract.Contacts.HAS_PHONE_NUMBER + " = 1", 
                                           null, 
                                           ContactsContract.Contacts.DISPLAY_NAME+" COLLATE LOCALIZED ASC");

            mAdapter = new MyAdapter(this,
                       R.layout.single_cell,
                       c, 
                       new String[]{ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME},
                       new int[]{R.id.disp_name},
                       CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

            listview.setAdapter(mAdapter); 
```

And, in MyAdapter, I have extended SimpleCursorAdapter and over rided bindView() to take advantage of efficiency of SimpleCursorAdapter. However, you need a permission to read contacts. In your android-manifest file. Please mention,

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

Hope, it helps.

# php - 只显示一次匹配的mysql表结果？

> ID：15337504
> 
> 赞同：-2
> 
> 时间：2013-03-11T11:32:36.947
> 
> 标签：php, mysql

嗨，我正在寻找一种只显示一组匹配的 mysql 结果的方法。谁能告诉我该怎么做？

这是我想要实现的一个例子：

```
id  |  profile_id  | viewed_profile_id | date_viewed
1          4                7              00:00:00
2          5                6              00:00:00
1          4                7              00:00:00 
```

因此，如果profile_id 和viewed_profile_id 匹配，那么只为那些匹配的列显示一个结果，而不是它在数据库中出现的两倍或三倍或多少次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:34:34.557

使用`DISTINCT`关键字：

```
SELECT DISTINCT id, profile_id, viewed_profile_id, date_viewed
FROM myTable 
```

这将为所选列的每个唯一组合仅显示一行。

* * *

或者，*大量*阅读您的问题（因为您只想匹配`profile_id`和`viewed_profile_id`），如果您想显示每个查看者的最新查看日期，您可以使用`GROUP BY`并选择`MAX`查看日期。我还假设 date_viewed 中有数据并且它是可排序的：

```
SELECT profile_id, viewed_profile_id, MAX(date_viewed)
FROM myTable
GROUP BY profile_id, viewed_profile_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:37:01.813

DISTINCT 有助于消除重复。如果查询返回包含重复行的结果，您可以删除重复项以生成每行都是唯一的结果集。为此，请在 SELECT 之后和输出列列表之前包含关键字 DISTINCT

[http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:51:48.603

```
SELECT DISTINCT(` profile_id`),`viewed_profile_id`,`id`,`date_viewed` FROM `tableName` GROUP BY `viewed_profile_id` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T11:36:10.647

尝试这个：

```
$query = "SELECT * FROM TABLENAME WHERE profile_id = '$PROFILEIDVALUE' AND viewed_profile_id = '$VIEWEDIDVALUE' LIMIT 0, 1" 
```

根据您要使用的 ORDER 可以使用 ORDER BY id DESC/ASC

我希望这会有用

# java - JTextArea 不断将主面板滚动到顶部

> ID：15337506
> 
> 赞同：2
> 
> 时间：2013-03-11T11:32:40.790
> 
> 标签：java, swing, jtextarea

我已经定义了一个 JTextArea 如下：

```
JTextArea textArea = new JTextArea();
textArea.setText("Some text");
textArea.setEditable(true);
textArea.setLineWrap(true);
textArea.setWrapStyleWord(true);

JScrollPane scrollPane = new JScrollPane(textArea);
scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
scrollPane.getVerticalScrollBar().setAutoscrolls(false); 
```

现在，该组件是已添加到主 JPanel 的多个组件之一，其定义如下：

```
JPanel panel = new JPanel();
panel.setName("Some name");

JScrollPane scrollPane = new JScrollPane();
scrollPane.setName("Some name");
scrollPane.getViewport().add(panel);
scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
scrollPane.getVerticalScrollBar().setAutoscrolls(false); 
```

现在 JTextArea 组件出现在主面板底部附近，并且部分隐藏，因此您必须向下滚动才能看到所有内容。但是我遇到的问题是，当我单击它时，主面板会再次自动滚动回顶部，再次隐藏我的大部分 JTextArea 组件。因此，在单击它之后，用户必须再次向下滚动才能输入内容。

但我无法弄清楚它为什么这样做。使用 JTextArea 有问题吗？如果我使用 JTextField 则不会出现问题。

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T15:18:45.257

我认为，替换`scrollPane.getViewport().add(panel)`为`scrollPane.getViewport().setView(panel)`将解决问题。

# php - 断言存在不可见的 div

> ID：15337512
> 
> 赞同：0
> 
> 时间：2013-03-11T11:32:52.377
> 
> 标签：php, phpunit

我从 TDD 开始，现在我想测试一个不可见的 div 是否存在。div如下：

```
<div style="display: none;" class="humane notice"><p>Datos actualizados con exito.</p></div> 
```

我尝试使用此代码：

> ...
> 
> ```
> $crawler = $client->click($crawler->selectLink('Eliminar')->link());
> 
> // Miramos si redirige
> $this->assertTrue($client->getResponse()->isRedirect('/admin/residente/'),"No redirige a Residente(index)(Eliminar)");
> $crawler = $client->followRedirect();
> 
> /*
> * Miramos si existen las notificaciones
> */
> $this->assertEquals(1, $crawler->filter('.humane')->count() > 0,"(Notifikazioak) Notifikaziorik ez dago." ); 
> ```

第一个断言触发了一个删除函数，女巫正常工作，它返回到索引页面，我可以在其中看到我的通知，这个不可见的代码（humane.js）所以我的测试结果应该是真的，而不是假的。

任何帮助或线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:33:24.937

您在 PHPUnit_Extensions_SeleniumTestCase 类中有 assertElementPresent() 和 assertVisible() 方法。

您可以在源代码的注释中找到可用断言的完整列表： [PHPUnit_Extensions_SeleniumTestCase](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/SeleniumTestCase.php)

# html - 浮动 div 从上到下对齐

> ID：15337516
> 
> 赞同：4
> 
> 时间：2013-03-11T11:33:04.623
> 
> 标签：html, css, alignment

我有一个文章标签，在从 wordpress 生成文章的 php 代码中。它们的高度并不相同，这取决于内容。它们按浮动组织成两列。

如果第一行中的一篇文章与同一行中的另一篇文章高度不同，则第二行对齐到较大 div 的底部。现在我想在没有任何间距的情况下对齐它们。

这是一些CSS：

```
#container {
width: 1000px;
margin: 0px auto;
}

article {
position: relative;
width: 435px;
margin: 10px 10px;
background-color: rgba(0, 0, 0, 0.5);
padding: 20px;
float: left;
} 
```

编辑 jsFiddle（现在有内容来演示问题）：http: [//jsfiddle.net/4PMj5/6/](http://jsfiddle.net/4PMj5/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:45:28.700

你可以在你的 CSS 中使用`even`和使用`odd`伪选择。

```
article:nth-child(even) {
    position: relative;
    width: 435px;
    margin: 10px 10px;
    background-color: rgba(0, 0, 0, 0.5);
    padding: 20px;
    float: right;
}
article:nth-child(odd) {
    position: relative;
    width: 435px;
    margin: 10px 10px;
    background-color: rgba(0, 0, 0, 0.5);
    padding: 20px;
    float: left;
} 
```

结果将是：[这个更新的 fiddle](http://jsfiddle.net/4PMj5/5/)。

# iphone - 无法从 iPhone 获取联系人

> ID：15337518
> 
> 赞同：0
> 
> 时间：2013-03-11T11:33:16.610
> 
> 标签：iphone, ios, abaddressbook

我试图获取保存在联系人中的所有电子邮件，我可以在 ipod 中获取 eemail，但是当我在 iphone 上测试时，它显示数组为空。但是我的 iphone 中有联系人

为什么会这样？

```
 -(IBAction)contactfriends:(id)sender
  {
   ABAddressBookRef _addressBookRef = ABAddressBookCreate();
   NSArray* allPeople = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(_addressBookRef);

   NSMutableDictionary  *contactsInformation = [[NSMutableDictionary alloc] initWithCapacity:[allPeople count]];
   NSMutableArray *propertyList = [[NSMutableArray alloc] init];

    NSLog(@"property lsit %@",propertyList);   // I am getting this null
    NSLog(@"all people %@",allPeople);        // I am getting this null

   for (id record in allPeople)
   {
     CFTypeRef emailProp = ABRecordCopyValue((__bridge ABRecordRef)record, kABPersonEmailProperty);
    NSString *email = [((__bridge NSArray *)ABMultiValueCopyArrayOfAllValues(emailProp)) objectAtIndex:0 ];
    if (!email) {
        email = @"";
    }
     [propertyList addObject:email];

}

NSLog(@"property lsit %@",propertyList);      // I am getting this null 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:57:26.123

试试这个：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    NSArray *people = (NSArray*)ABAddressBookCopyArrayOfAllPeople(addressBook);
    for(id person in people){
            ABMultiValueRef multiemail = ABRecordCopyValue(person, kABPersonEmailProperty);
            for (CFIndex j=0; j < ABMultiValueGetCount(multiemail); j++) {
                    NSString* email = (NSString*)ABMultiValueCopyValueAtIndex(multiemail, j);
                    [arrAllEmail addObject:email];
                    NSLog(@"%@",email);
                    [email release];
            }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:57:04.217

如果您使用的是 iOS6，那么您需要检查以编程方式访问帐户的权限。

您可以像这样检查代码中的权限

```
// Request authorization to Address Book
  ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

  if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
      // First time access has been granted, add the contact
       // add your contacts or get emails
    });
  }
  else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
    // The user has previously given access, add the contact
    // add your contacts or get emails
  }
  else {
    // The user has previously denied access
     UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Error" message:@"permission denied " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[alert show];
  } 
```

# c# - C# DateTime 解析国际文化

> ID：15337520
> 
> 赞同：2
> 
> 时间：2013-03-11T11:33:20.893
> 
> 标签：c#, parsing, date, internationalization, cultureinfo

我正在尝试解析各种日期格式，天数、时间和年份组件是一致的，但星期几和月份取决于设备。这些是来自 iPad 的一些示例结果

```
Isn Mac 11 16:25:58 2013

Ahd Mac 10 18:34:41 2013

Sab Mac 09 18:44:34 2013

Jum Mac 08 16:57:33 2013

Fri Mar 8 16:49:46 2013

Thu Mar 7 12:34:47 2013

Sat Jan 19 12:21:58 2013 
```

英文的解析很好，但马来西亚（马来）的从来没有

我正在使用它来调试它：

```
 var allCultures = CultureInfo.GetCultures(CultureTypes.AllCultures);

        foreach (var culture in allCultures)
        {
            if (DateTime.TryParseExact("Isn Mac 11 16:25:58 2013", "ddd MMM d HH:mm:ss yyyy", culture, DateTimeStyles.None, out result))
                return;
        } 
```

理想情况下，它将以这种格式处理所有可能的语言，我不必编写特定于语言的代码

我尝试使用以下文化代码手动解析马来西亚日期：ms ms-BN ms-MY

有任何想法吗？

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:45:37.110

这可能是`CultureInfo`马拉西亚文化数据中的一个错误 -`AbbreviatedDayNames`数组如下所示：

```
Ahad 
Isnin 
Sel 
Rabu 
Khamis 
Jumaat 
Sabtu 
```

你不会这样`Isn`不存在的 - 它是`Isnin`。

为了比较，请看`DayNames`：

```
Ahad 
Isnin 
Selasa 
Rabu 
Khamis 
Jumaat 
Sabtu 
```

我从中挑选了这些：

```
System.Globalization.CultureInfo.GetCultureInfo("ms-MY").DateTimeFormat 
```

* * *

作为一种解决方案，看看您是否可以使用全天名称 -在您的示例中使用`Isnin`而不是返回正确的对象。`Isn``DateTime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:48:22.553

我用马来西亚文化测试了你的约会时间。显然，您的字符串的日期名称不正确：

```
var dt = new DateTime(2013,03,11,16,25,58);
var currCult = CultureInfo.CreateSpecificCulture("ms-MY");
var str = dt.ToString("ddd MMM d HH:mm:ss yyy", currCult);
// ---> "Isnin Mac 11 16:25:58 2013" 
```

恕我直言`Isn`！= `Isnin`，

# php - 无法将查询中的 int 值相加

> ID：15337526
> 
> 赞同：0
> 
> 时间：2013-03-11T11:33:38.043
> 
> 标签：php, mysql

嘿伙计们，我有一个 mysql 查询，它从数据库表中读取一些记录。$key->r4、$key->sr13 和 $key->huawei 字段完美显示，但我无法得到三者的总和。这是我的代码：

```
$total_r4=0;$total_sr13=0;$total_huawei=0;
    foreach($view_data->result() as $key){
        $total_r4       += $key->r4;
        $total_sr13     += $key->sr13;
        $total_huawei   += $key->huawei;
        echo "<tr>";
        echo "<td>$key->date";
        echo "<td>$key->time";
        echo "<td>$key->r4";
        echo "<td>$key->sr13";
        echo "<td>$key->huawei";
        echo "<td>".$key->r4 + $key->sr13 + $key->huawei;

    } 
```

问题实际上是在最后一行没有对 3 个变量求和！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:37:47.617

尝试：

```
...
$total_r4       += $key->r4;
$total_sr13     += $key->sr13;
$total_huawei   += $key->huawei;
$tdTotal = ($key->r4 + $key->sr13 + $key->huawei);
.....
echo "<td>".$tdTotal."</td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:38:32.490

如[Operator Precedence](http://php.net/manual/en/language.operators.precedence.php)中所述，`.`字符串连接运算符和`+`算术加法运算符具有相同的优先级。因为它们是左结合的，所以它们是从左到右计算的；因此，您当前的表达式被评估为：

```
echo (("<td>".$key->r4) + $key->sr13) + $key->huawei; 
```

要强制使用替代评估顺序，请使用显式括号：

```
echo "<td>". ($key->r4 + $key->sr13 + $key->huawei); 
```

否则不要使用字符串连接，而是优先使用多个参数来`echo`声明：

```
echo "<td>", $key->r4 + $key->sr13 + $key->huawei; 
```

请注意，第二种方法更有效，因为 PHP 不需要在内存中构建连接的字符串。通过在不需要变量扩展的情况下使用单引号文字，还可以避免对双引号字符串文字进行不必要的解析：

```
echo '<td>', $key->r4 + $key->sr13 + $key->huawei; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:38:40.707

使用 PHP 进行求和，但不要忘记使用[`inval`](http://php.net/manual/fr/function.intval.php)或转换数据[`floatval`](http://php.net/manual/fr/function.floatval.php)

```
echo "<td>".(intval($key->r4) + intval($key->sr13) + intval($key->huawei))."</td>; 
```

**并且不要忘记关闭`TD`with`</td>`标记**

# objective-c - 继承和目标-c

> ID：15337529
> 
> 赞同：-4
> 
> 时间：2013-03-11T11:33:54.997
> 
> 标签：objective-c, inheritance

这是我的 h 文件：

```
#import <Foundation/Foundation.h>

@interface Base : NSObject

@end 
```

这是我的 m 文件：

```
#import "Base.h"
@interface Base()
@property (nonatomic) int number;
@end

@implementation Base

-(void) setNumber: (int) p_number
{
    self.number = p_number;
}

@end 
```

这就是我想要完成的 h 文件：

```
#import <Foundation/Foundation.h>
#import "Base.h"

@interface Derived : Base

@end 
```

并在 m 文件中执行此操作

```
#import "Derived.h"

@implementation Derived

- (void) foo
{
    self.number= 7;
}

@end 
```

这当然会导致错误，请使用允许我在**不将定义放入 h 文件中的情况下调用基本属性的代码进行回答**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:39:40.720

要求人们只用代码回答不是一个好主意。为什么不要求解释什么是错误的，以便您将来自己修复此错误*和*大量类似错误？

这里的问题是您没有在基本标头中声明您的属性。如果您不想这样做，可以在子类的实现文件中将其声明为基类的扩展：

**派生的.m**

```
#import "Derived.h"

@interface Base () 
@property (nonatomic) int number;
@end

@implementation Derived

- (void) foo
{
    self.number= 7;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:30:06.130

您可以使用 Apple 使用的相同方法`UIGestureRecognizerSubclass.h`

例如创建

```
// BaseSubclass.h

@interface Base (ForSubclassEyesOnly)

@property (nonatomic, assign) NSInteger number;

@end 
```

您需要使用以下命令使编译器静音

```
@implementation Base (ForSubclassEyesOnly)

@dynamic number;

@end 
```

现在任何想要使用这些属性/调用方法的类都只包含这个头。

例如

```
#import "Derived.h"
#import "BaseSubclass.h"

@implementation Derived

- (void) foo
{
  self.number = 7;
}

@end 
```

# c++ - 使用使用私有字段的基类方法

> ID：15337530
> 
> 赞同：0
> 
> 时间：2013-03-11T11:33:57.437
> 
> 标签：c++, oop, class, inheritance, subclass

我有一个类，它有几个`public`方法使用一个`private`字段，他们都改变了，并在他们的计算中使用这个字段。

我需要这个类的子类，新方法很少，新方法不会使用这个字段。我希望基类中的这些方法的行为与它们相同，但是对于它们使用私有字段有点困惑。

子类中可以访问私有字段吗？我是否还应该在我的子类中声明一个具有相同类型和名称的字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:35:17.317

派生类无法访问私有成员数据。如果要访问此数据，请将其更改为受保护。用于更改私有成员的基类的公共成员函数仍可用于派生类，但不允许**直接访问基类私有数据。**派生类可以使用基类的所有公共和受保护字段（假设您使用公共继承）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:45:59.883

大多数海报似乎误解了你的问题。

是的，您可以使用这些公共方法。这就是私有成员的全部意义——它们可以被同一类的**任何成员访问，无论它们是公共的、受保护的还是私有的**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:36:29.770

`Private`派生类永远无法访问字段。如果您将访问私有字段的方法声明为`public`，则派生类可以使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:46:33.930

在派生类成员中，您不能访问私有字段。但是，由于它们的存在而继承的基类成员`public`当然仍然可以访问它。如果使用继承，则基成员函数将通过派生类可见，但如果使用继承`public`，则仅对派生类可见。并且很少使用继承，但如果您使用关键字，则默认使用。`protected``private``protected``private``class`

为了进一步说明，如果您确实想要访问该字段，您应该在具有访问权限的基类中定义`protected`访问器。这将允许您控制对私有字段的访问。

但是，您应该问自己，多态性是否是这里的正确解决方案？派生类是否通过了`is-a`测试？是基类的析构函数`virtual`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T12:43:59.710

您可以在驱动类中使用公共函数（使用私有字段）。您不应该声明具有相同类型的字段！但是您不能直接从驱动类中的基类访问私有字段。为此使用基类中的公共函数（例如 setter 和 getter 函数）

样本：

```
//***********************************
//Base Class
//***********************************
class Base
{
public:
    Base();
    ~Base();

    void increment();
    void decrement();

    void get();

private:
    int id_;
};

Base::Base()
    : id_(0)
{
}

Base::~Base()
{
}

void Base::increment()
{
    ++id_;
}

void Base::decrement()
{
    --id_;
}

int Base::get()
{
    return id_;
}

void Base::set(id)
{
    id_ = id;
}

//***********************************
// Drived Class
//***********************************
class Drived() : public Base
{
public:
    Drived();
    ~Drived();

    void plus(int a);
    void minus(int b);
};

Drived::Drived()
    : Base()
{
}

Drived::~Drived()
{
}

void Drived::plus(int a)
{
    int i = get();
    set(i + a);             // <- OK
}

void Drived::minus(int b)
{
    id_ -= b;               // <- Not allowd; id is private
} 
```

# c++ - 布尔控制 ENUM 的内容 - C++

> ID：15337532
> 
> 赞同：0
> 
> 时间：2013-03-11T11:34:04.157
> 
> 标签：c++, enums, boolean

我有一个用于方法参数的 ENUM。这个 ENUM 是一个类的私有成员，比如说

```
class Method 
```

对于这种方法，我有两种变体。参数列表几乎相同。对于该方法的第二个变体，3 个参数将附加到第一个变体的参数列表中。

我想用一个布尔值来做，第二个变体设置为 true。是否有可能有这样的东西：

```
enum EcolId {
    P1,
    P2,
    P3,

    if(m_bool)
    {
         P4,
         P5
    }
} 
```

如果没有，我该怎么办？

我别无选择，只能在这里使用 ENUM。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:42:02.937

不，你不能那样做。

你可以这样做：

```
 enum EcolId {
     P1,
     P2,
     P3,

 #ifdef SOMETHING
     P4,
     P5
 #endif 
 } 
```

或者，您可以使用模板。像这样的东西：

```
enum EcolId1
{
    P1,
    P2,
    P3,
};

enum EcolId2
{
    P1,
    P2,
    P3,
    P4,
    P5,
};

template<typename T>
class Method
{
     T enumvar;
     ... 
}

...
Method<EcolId1>  limited;
Method<EcolId2>  more; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:39:26.993

取决于变体的动机。

为什么不使用两个`enum`s？

作为替代方案，您可以在使用非处理值时在第一个变体中生成错误。

让我有点恼火的是，你谈到了*扩展*的参数*列表*。我希望您的意思是要扩展*的一个参数的值列表。*

# highcharts - Highcharts - “即时”计算平均间隔

> ID：15337538
> 
> 赞同：0
> 
> 时间：2013-03-11T11:34:15.873
> 
> 标签：highcharts

我使用 Highcharts，我有一个包含 60 个数据值的数组（每天一个）。

我想计算 7 天（一周）间隔的平均值并只打印这个平均值：

Highcharts 提供了“即时”执行此操作的可能性，或者我必须单独计算并添加计算的（平均值）值？

在我的情况下，最好的办法是在默认缩放时设置平均值，并且当用户放大数据时，数据会在正确的日期值发生变化（没有平均值）。

# perl - 如何使用 WWW::Mechanize::Firefox 选择没有类或 ID 的特定 HTML 元素？

> ID：15337542
> 
> 赞同：2
> 
> 时间：2013-03-11T11:34:32.343
> 
> 标签：perl, web-scraping, www-mechanize, www-mechanize-firefox

我正在尝试遍历页面上的链接，但我只想遍历特定的链接。问题是`<a>`锚点中的链接根本没有 CSS id 或类。

例如。

```
<a title="View More Information on FOO" href="tranlist.phtml?scode=FOO&sname=&refpg=1&snapcode=&ssector=1123&scheme=default" name="tranlist"> 
```

唯一独特的是，`name`但它似乎不能用 CSS 选择器指定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:40:08.583

从[模块文档](http://search.cpan.org/perldoc?WWW%3A%3AMechanize%3A%3AFirefox)：

`$mech->find_link(name => "something")`

`name_contains`并且`name_regex`也可用。

[编辑：`find_link_dom`返回 Firefox 特定的`MozRepl::RemoteObject::Instance`对象，而不是`WWW::Mechanize::Link`由`find_link`. 针对更一般的情况进行了修改。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:00:10.143

在[*CSS 规范*](http://www.w3.org/TR/CSS2/selector.html)中，类似的 CSS 选择器`a.normal`与 相同`a[class~=normal]`，您可以通过这种方式匹配任何属性。所以你需要

```
$mech->selector('a[name=tranlist]') 
```

# html - 仅在 iPad 上的表格单元格之间的白色边框非常细

> ID：15337554
> 
> 赞同：11
> 
> 时间：2013-03-11T11:35:22.063
> 
> 标签：html, css, ipad, html-table, border-layout

这只发生在 iPad 视网膜和非视网膜 iOS 5 和 6 上。

即使我尝试在桌子上没有边框，也会出现一个薄的白色边框。

您可以在 中查看该问题的示例`http://codepen.io/anon/pen/Kcexq`。

需要 iPad 或模拟器才能查看 pb。

仔细看绿色标签有一个白色边框：

![仔细看绿色标签有一个白色边框](../Images/edc5494992ba010f9d24ebcae094c79e.png)

 `对于记录，显示为表格单元格也会发生同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:55:02.867

出现的细边框似乎是由`display:table-row`and/or`display:table-cell`属性引起的。

*注意：它实际上不是白色边框，它是一种`rgba:(0,0,0,alpha)`; 如果您更改表格后面的背景颜色，您会看到。*

通过将`td`样式更改为`display:inline-block;`，或`tr`样式更改为`display:block;`，它摆脱了单元格的左右边框，但底部边框仍然存在。

事实上，`border-color`用 a覆盖`rgba(0,0,0,0);`任何东西（table、tr、td...）不会改变任何东西，也不会`border-collapse:collapse;`（正如 Morpheus 建议的那样）。计算的样式不显示任何计算的边框，但仍然在这里......

**注意：iOS 似乎也根据用户的缩放比例计算边框（在真实 iPad 上测试）。**

这是 Safari iOS 的默认表格样式：

```
table {
    display: table;
    border-collapse: separate;
    border-spacing: 2px;
    border-color: gray;
}

tbody {
    display: table-row-group;
    vertical-align: middle;
    border-color: inherit;
}

tr {
    display: table-row;
    vertical-align: inherit;
    border-color: inherit;
}

td, th {
    display: table-cell;
    vertical-align: inherit;
} 
```

我仍在寻找可以添加该 alpha 边框的隐藏 CSS，如果我发现任何内容，我会更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T17:28:11.823

这个问题与浏览器故意渲染具有干净的 1 像素边框的表格单元格有关，并且该行为通常在背景颜色下变得可见。解决方案是将有问题的区域包裹/嵌套在自己的表格中，并设置表格的背景颜色，而不是单元格的背景颜色。

[这里的讨论对这个https://www.campaignmonitor.com/blog/email-marketing/2011/10/iphone-fail-the-trouble-with-table-borders-and-html-email/](https://www.campaignmonitor.com/blog/email-marketing/2011/10/iphone-fail-the-trouble-with-table-borders-and-html-email/)非常有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T14:13:40.880

这是因为背景。您应该剪切 1px 宽度和固定高度的图像并将其作为背景。

```
td
   {
     background: url('your_url/green_bg.png') repeat-x;
   } 
````

# c - c to mips source 和 dest 指针

> ID：15337555
> 
> 赞同：0
> 
> 时间：2013-03-11T11:35:31.560
> 
> 标签：c, mips

```
#include <stdio.h>

int source[] = {3, 1, 4, 1, 5, 9, 0};
int dest[10];

int main ( ) {
    int k;
    for (k=0; source[k]!=0; k++) {
    dest[k] = source[k];
    }
    printf ("%d values copied\n", k);
    return 0;
} 
```

这是c代码

非常简单，它只是将数组的值复制到 dest 数组，除非它是 0

现在，问题出在 mips 代码上

```
 .file   1 "arrcopy.c"
    .globl  source
    .data
    .align  2
source:
    .word   3
    .word   1
    .word   4
    .word   1
    .word   5
    .word   9
    .word   0
    .rdata
    .align  2
$LC0:
    .ascii  "%d values copied\n\000"
    .text
    .align  2
    .globl  main
    .ent    main
main:
    .frame  $sp,24,$31      # vars= 0, regs= 1/0, args= 16, extra= 0
    .mask   0x80000000,-8
    .fmask  0x00000000,0
    subu    $sp,$sp,24
    sw  $31,16($sp)
    jal __main
    la  $9,source
    lw  $2,0($9)
    move    $8,$0
    beq $2,$0,$L8
    move    $7,$0
    la  $10,dest
$L6:
    addu    $8,$8,1
    sll $3,$8,2
    addu    $5,$7,$9
    addu    $2,$3,$9
    addu    $6,$7,$10
    lw  $4,0($2)
    move    $7,$3
    lw  $3,0($5)
    #nop
    sw  $3,0($6)
    bne $4,$0,$L6
$L8:
    la  $4,$LC0
    move    $5,$8
    jal printf
    lw  $31,16($sp)
    move    $2,$0
    addu    $sp,$sp,24
    j   $31
    .end    main

    .comm   dest,40 
```

我什至无法分辨源指针和目标指针是什么

甚至不确定循环何时开始

我想它从 $L6 开始

它使用什么指令来加载源指针和目标指针的地址？

就像你们能找到循环一样，你能给我一个关于每条线在做什么的想法吗？

它看起来与手工完全不同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:05:42.363

我添加了一些注释来解释反汇编：

```
 la  $9,source     # The source pointer
  lw  $2,0($9)      # Load source[0]
  move    $8,$0     # "next_k"
  beq $2,$0,$L8     # skip the loop if source[0]==0
  move    $7,$0     # k
  la  $10,dest      # destination pointer
$L6:
  addu    $8,$8,1   # Increase the next_k counter
  sll $3,$8,2       # scale to a word offset (multiply by 4)
  addu    $5,$7,$9  # $5 = &source[k]
  addu    $2,$3,$9  # $2 = &source[next_k]
  addu    $6,$7,$10 # $6 = &dest[k]
  lw  $4,0($2)      # $4 = source[next_k]
  move    $7,$3     # k = next_k (i.e. k++)
  lw  $3,0($5)      # $3 = source[k]
  #nop
  sw  $3,0($6)      # dest[k] = source[k]
  bne $4,$0,$L6     # Loop until source[next_k]==0
$L8: 
```

# spring - Spring OSGI 中的捆绑停用

> ID：15337557
> 
> 赞同：0
> 
> 时间：2013-03-11T11:35:44.200
> 
> 标签：spring, spring-mvc, osgi, osgi-bundle

在 spring 动态模块中，当服务提供者捆绑包被停用时，依赖捆绑包会发生什么。他们也会被停用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:02:23.907

服务提供者和消费者之间不应该有直接的依赖关系，因为服务接口应该在实现者外部声明。

当服务被停用时，Spring 注入服务的使用者（它是一个代理）将简单地尝试访问该服务，如果代理在超时期限内找不到合适的服务实现（我相信它默认为 5 分钟），最终会失败）。这将与 OSGi 的动态特性相一致，其中服务引用意味着能够在运行时添加和删除。在这种动态环境中的应用程序必须意识到这一点并进行适当的编码以处理服务可能并不总是可用的事实。

# javascript - 连锁功能未知次数

> ID：15337560
> 
> 赞同：1
> 
> 时间：2013-03-11T11:35:53.797
> 
> 标签：javascript, jquery

我正在通过未知数量的步骤为元素的顶部/左侧 css 值设置动画。我正在使用以下代码来存储动画每个步骤所需的 css 值：

```
paths = [{ left:-300 }, { top:-161 }, { left:-402 }]; 
```

然后我可以通过以下方式运行动画：

```
$element.animate(paths[0]).animate(paths[1]).animate(paths[2]); 
```

以便每个动画在前一个动画完成时开始：这很好用。但是，如果我想将步数从 3（左上左）增加到 6，该怎么办？还是50？如何链接功能未知次数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:48:36.980

```
$element.animate(paths.shift(), function next() {
    $(this).animate(paths.shift(), paths.length && next);
}); 
```

[http://jsfiddle.net/Xsz8w/2/](http://jsfiddle.net/Xsz8w/2/)

`paths.length && next`需要防止无限回调调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:43:20.183

相反，有一个递归函数，它会调用自身，直到路径数组的最后一个元素。

```
var paths = [{ left:-300 }, { top:-161 }, { left:-402 }];

(function animateNext(i){

  $element.animate(paths[i],function(){

    //on animation complete, check if the next path exists
    if(paths[++i]){

      // if so, let's animate using the next path
      animateNext(i);
    }
  });

//start from index 0
}(0)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:48:16.453

```
var paths = [{ left: -300 }, { top: -161 }, { left: -402 }];

(function animateElement(index) {
    if (paths[index] == null) return;
    $element.animate(paths[index], function () {
        animateElement(index++);
    });
})(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:39:29.970

您可以循环每个项目并使用该`success`函数调用下一个项目。

您还可以潜在地将 an 添加`interval`到您的 JSON 中并串联使用`animate`and `delay`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T11:39:15.587

我对 jQuery 没有任何经验，所以我假设您需要输出`animate(a)`来调用下一个。

```
var e = $element;
for (var i = 0; i < paths.length; i++) {
    e = e.animate(paths[i]);
} 
```

# ios - iOS UITableView 单元格

> ID：15337566
> 
> 赞同：0
> 
> 时间：2013-03-11T11:36:25.490
> 
> 标签：ios, tableview

```
ApplicationViewController *a=[mesApplications objectAtIndex:3]; 
```

mesApplications 它是一个包含 ApplicationViewController 对象的数组，并希望我的`UIViewConroller`单元格显示每个 ApplicationViewController 包含的一些属性，当我使用它时：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // Configuration des cellules
    ApplicationViewController *cellValue = [mesApplications objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue.name;
    NSLog(@"%@",cellValue);
    return cell;
} 
```

日志是空的，我不知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:43:49.843

以下是基于您的描述的简短实现。它似乎表现正确。我希望你能找到缺少的东西。

问候

ViewController.nib 由一个 UITableView 组成，其中包括一个 UIButton（调用 addApplications）

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ApplicationViewController : UIViewController

@property   NSString*   name;

@end

@interface ViewController : UITableViewController

@property   ( nonatomic, retain )   NSArray*                mesApplications;

- ( IBAction ) addApplications: ( id ) sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@implementation ApplicationViewController

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.mesApplications.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell*    cell            =   [ tableView dequeueReusableCellWithIdentifier: @"MyTableViewCell" ];

    if ( !cell )
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyTableViewCell"];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    ApplicationViewController*  pApp    =   [ self.mesApplications objectAtIndex: indexPath.row ];
    [ cell.detailTextLabel setText: pApp.name ];
    NSLog(@"%@", pApp);
    return cell;
}

- ( IBAction ) addApplications: ( id ) sender
{
    ApplicationViewController*  pApp1   =   [ ApplicationViewController new ];
    pApp1.name  =   @"app1";

    ApplicationViewController*  pApp2   =   [ ApplicationViewController new ];
    pApp2.name  =   @"app2";

    ApplicationViewController*  pApp3   =   [ ApplicationViewController new ];
    pApp3.name  =   @"app3";

    self.mesApplications =  [ NSArray arrayWithObjects: pApp1, pApp2, pApp3, nil];

    [self.tableView reloadData];
}

@end 
```

和控制台转储

```
2013-03-11 13:38:17.132 kokio[10353:907] <ApplicationViewController: 0x1c535190>
2013-03-11 13:38:17.139 kokio[10353:907] <ApplicationViewController: 0x1c535260>
2013-03-11 13:38:17.142 kokio[10353:907] <ApplicationViewController: 0x1c535390> 
```

# sql-server - 找不到可安装的 ISAM sql server OPENDATASOURCE 函数

> ID：15337579
> 
> 赞同：1
> 
> 时间：2013-03-11T11:37:32.967
> 
> 标签：sql-server, ms-access

我正在使用以下代码从 sql server 8 链接到访问数据库：

```
SELECT * FROM OPENDATASOURCE ('Microsoft.Jet.OLEDB.4.0','Data Source = D:\Kargozini\arazz\Arazdb.Mdb;Jet OLEDBatabase Password = "MYPASSWORD"' )...TLeavePersonel 
```

当我运行查询时，我收到此错误：找不到可安装的 ISAM 我搜索了很多，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:12:19.000

连接字符串看起来格式不正确。也许类似的东西`SELECT * FROM OPENDATASOURCE ('Microsoft.Jet.OLEDB.4.0','Data Source=D:\Kargozini\arazz\Arazdb.Mdb; Jet OLEDB:Database Password=MYPASSWORD;')`会起作用（你的缺少冒号和'D'。

在[此处](http://www.connectionstrings.com/access#microsoft-jet-ole-db-4-0)查看更多正确 Access 连接字符串的示例。此外，该页面提到

> 一些关于密码长度超过 14 个字符的问题的报告。还有一些字符可能会引起麻烦。如果您遇到问题，请尝试将密码更改为带有正常字符的短密码。

因此，根据您的密码是什么，这可能是一个问题。

# asp.net-mvc-3 - 在我的自定义函数中通过 ajax 调用使用参数调用 Action 方法

> ID：15337580
> 
> 赞同：0
> 
> 时间：2013-03-11T11:37:34.310
> 
> 标签：asp.net-mvc-3, jquery

我想通过ajax调用在我的自定义函数中调用带有参数的动作方法。但这不会调用我的动作方法。那么我怎样才能以这种方式调用我的动作方法。这是代码：

```
<script>
function myFunction(e,ids)
{
    var qty = e.value;
    if (qty == null) {
        alert("current null : " + qty + " : id - " + ids);
    }
     $.ajax({
     type: "POST",
     url:'/MyController/MyActionMethod/Parameter1/Parameter2',
     success: {
          alert("success")
     }

    });

}
</script> 
```

我的操作方法是这样的：

`[HttpPost]
public ActionResult MyActionMethod(int parameter1,int parameter2){}`

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:41:57.667

试试这个，要开始`'/MyController/MyActionMethod/Parameter1/Parameter2'`工作，您需要设置自定义路线。

```
var Parameter1 = '';
var Parameter2 = '';
$.ajax({
    type: "POST",
    url:'/MyController/MyActionMethod?parameter1=' + Parameter1 + '&parameter2=' + Parameter2,
    success: {
        alert("success")
    }
}); 
```

另一种方法是包含一个`data`参数：

```
var Parameter1 = '';
var Parameter2 = '';
$.ajax({
    type: "POST",
    url:'/MyController/MyActionMethod',
    data: {
        parameter1: Parameter1,
        parameter2: Parameter2
    },
    success: {
        alert("success")
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:59:42.617

为此，您需要有自定义路线

```
routes.MapRoute(
            "RouteName", // Route name
            "{controller}/{action}/{param1}/{param2}",  // URL with parameters
   new { controller = "Home", action = "Index", param1 = "", param2 = "" } // Parameter defaults
        ); 
```

现在尝试使用您的 ajax 请求

```
 $.ajax({
             type: 'POST',
             url:'/MyController/MyActionMethod/Parameter1/Parameter2',
             success: {
                  alert("success")
             }

        }); 
```

# php - 从数组 PHP 中获取信息

> ID：15337581
> 
> 赞同：2
> 
> 时间：2013-03-11T11:37:35.533
> 
> 标签：php, regex, arrays

我在 Joomla 数据库中有一些信息需要循环访问并提取某些信息。

我可以成功地循环浏览文章，但我无法从 [image] 中获取信息。如果可能的话，我只需要提取“image_intro”：“image/banner_box.jpg”就可以了“banner_box.jpg”。

到目前为止，我的代码循环通过数据库。

```
foreach ($result as $item) {
                    //makes array
                    $newsitems[] = array(
                        'title' => $item->title,
                        'text'  => $item->introtext,
                        'image' => $item->images

                    );                  
                } 
```

我的输出打印出来了。

```
Array
(
    [0] => Array
        (
            [title] => Service 2
            [text] => <p>Lorem ipsum dolor sit amet, conseteetur sadipscing elitr, sed diam monumy eirmod..<a href="http://www.google.co.uk">View more</a></p>
            [image] => {"image_intro":"images\/banner_box2.jpg","float_intro":"","image_intro_alt":"","image_intro_caption":"","image_fulltext":"","float_fulltext":"","image_fulltext_alt":"","image_fulltext_caption":""}
        )

    [1] => Array
        (
            [title] => Service 1 
            [text] => <p>Lorem ipsum dolor sit amet, conseteetur sadipscing elitr, sed diam monumy eirmod..<a href="http://www.google.co.uk">View more</a></p>
            [image] => {"image_intro":"images\/banner_box1.jpg","float_intro":"","image_intro_alt":"","image_intro_caption":"","image_fulltext":"","float_fulltext":"","image_fulltext_alt":"","image_fulltext_caption":""}
        )

) 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:40:52.390

$item->images 是json格式，所以需要解码

```
foreach ($result as $item) {
    $imgData = json_decode($item->images, true);

    // create array
    $newsitems[] = array(
        'title' => $item->title,
        'text'  => $item->introtext,
        'image' => $imgData['image_intro']
    );                  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:40:22.840

该数据以`json`格式编码。您需要使用[json_decode()](http://php.net/manual/en/function.json-decode.php)对其进行解码。您的代码将如下所示（在您的循环内）：

`$images_data = json_decode($item->images);`

然后，您可以像这样访问对象的属性：`$images_data->images_intro`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T11:40:34.883

尝试使用[json_decode()](http://php.net/manual/en/function.json-decode.php)，例如：

```
$decoded = json_decode($newsitems[0]['image'], true); //make it array for later access 
```

# iphone - iphone 5 底部显示空白

> ID：15337591
> 
> 赞同：-6
> 
> 时间：2013-03-11T11:38:06.517
> 
> 标签：iphone, ios

我的应用程序在 iphone 4 中运行良好，但在 iphone 5 中显示底部屏幕为空。我认为这是因为 iphone 5 有更大的屏幕，那么解决方案是什么，如何管理额外的空间。请指导以上。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:49:06.323

使用此代码将对您有所帮助，在这里我们必须创建两个`xib`文件来使用此代码，例如（viewcontroller.xib 和 viewcontroller_5.xib），当您在`iphone4`调用`iphone4`屏幕中使用应用程序时，其他调用`iphone5`屏幕。

谢谢。

```
if([[UIScreen mainScreen] bounds].size.height == 568){
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_5" bundle:nil] autorelease];

   NSLog(@"iphone5");
}else
{
  self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    NSLog(@"iphone4");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:45:31.920

如果您使用的是 iOS 6 或更高版本，那么您可以为 iphone 5 创建一个单独的 xib，称为**Retina 4 Full screen**。您需要在您的`ViewController`尺码中检查这一点。还要检查这两个 xib 的 . 这意味着在 iphone 5 或更低版本中运行您的任何一个 xib 都使用这些条件，无论是`AppDelegate`在您需要显示另一个`ViewController`.

```
CGSize result = [[UIScreen mainScreen] bounds].size;
if(result.height == 480)
{
}
else if(result.height == 568)
{
} 
```

上面的代码会检查你的 iphone 屏幕的大小并进行相应的调整。希望这已经解决了您的问题:)。

PS：- 不要忘记添加您的 iphone 5 启动画面，即**Default-568h@2x.png**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T11:42:11.077

请参阅以下链接，它将解决您的所有疑问，1）[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

2) [iOS 6 应用程序 - 如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size)

3) [iOS 6 - 区分 iPhone 5 和其他设备？](https://stackoverflow.com/questions/12398798/ios-6-distinguishing-between-iphone-5-and-other-devices)

4)[如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T12:56:32.807

根据我的说法，处理此类问题并避免检查设备高度所需的几个条件的最佳方法是使用视图的相对框架或您添加到视图中的任何 UI 元素，例如：如果您正在添加您想要的一些 UI 元素应该位于视图底部或标签栏上方，那么您应该相对于视图的高度或相对于标签栏（如果存在）取 y 原点。对于将图像作为全视图背景的这种情况，您可以将图像设置为视图的背景颜色。

self.view.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed: @"要添加的图像"]];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:43:43.323

试试这个任何控制器，

![在此处输入图像描述](../Images/d809661796597c8939fdc31e97bbe461.png)

因此，它会根据高度自动调整窗口大小。

对于retina(iPhone-5) 显示器，您必须在您的xcode 项目中导入“Default-568h@2x.png”文件。

希望它会帮助您理解。
谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T11:43:59.543

添加与 iPhone 5 以下设备相同的初始屏幕图像，但图像大小`960 * 1136`和名称为`Default-568h@2x.png`ie，如果 Default.png 当前是初始屏幕。这将为您的应用程序提供 iPhone 5 屏幕支持。

# javascript - 如果弹出窗口打开，则防止页面滚动

> ID：15337594
> 
> 赞同：4
> 
> 时间：2013-03-11T11:38:15.240
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jquery 移动弹出窗口。这是页面内部。有一张图片可以打开这个弹出窗口。现在如何防止整个页面仅在弹出窗口打开时滚动并在弹出窗口关闭时允许滚动？

```
 <a href="#settingsPopUp" data-rel="popup" data-position-to="window" data-inline="true" data-icon="gear"><img src="settings1.jpg" alt="Settings"></a>

    <br>
    <div data-role="popup" id="settingsPopUp" data-theme="a" class="ui-corner-all">
        <div style="padding:10px 20px;">
            <h3>Location Details</h3>               
        </div>          
    </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-02T14:49:28.033

我混合**了 Lefois**的解决方案和**Simona Adriani**的解决方案。它适用于浏览器和手机 WebView (PhoneGap + jquerymobile)。

```
$(document).on('popupafteropen', '[data-role="popup"]', function(event, ui) {
    $('body').css('overflow', 'hidden').on('touchmove', function(e) {
         e.preventDefault();
    });
}).on('popupafterclose', '[data-role="popup"]', function(event, ui) {
    $('body').css('overflow', 'auto').off('touchmove');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-04T12:23:11.297

对我来说，这种方法不起作用，它适用于浏览器，但不适用于 Phone Gap 应用程序。所以我以这种方式解决它：

```
$('#Popup-id').on({
   popupbeforeposition: function(){
      $('body').on('touchmove', false);
   },
   popupafterclose: function(){
      $('body').off('touchmove'); 
  }
}); 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T11:39:44.603

当模式框打开时，分配`overflow-y: hidden;`给您不想滚动的元素怎么样？（通常会是`<body>`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-17T18:04:54.203

我无法评论以前的答案，但有一点错误。以下代码对我有用：

```
$( "#mypopup" ).popup({
  afteropen: function( e) {
   $('body').css('overflow','hidden');
  },
  afterclose: function(e) {
   $('body').css('overflow','auto');
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:43:22.163

有两种方法：

1.  `Either "overflow:hidden" the body`
2.  `Or give a "position:fixed" to the popup so this will scroll in the viewport.`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T12:08:15.877

您可以为弹出小部件使用事件

```
$( "#settingsPopUp" ).popup({
  afteropen: function( event, ui ) {
   $('body').css({
       overflow:'hidden'
   });
  },
  afterclose: function( event, ui ) {
   $('body').css({
       overflow:'auto'
   });
  }
}); 
```

我认为这是一个动态的解决方案，它将解决您的问题。

# asp.net-mvc-4 - 如何使用带有复合主键的 ASP.NET MVC4 / EF5 脚手架？

> ID：15337601
> 
> 赞同：2
> 
> 时间：2013-03-11T11:38:38.897
> 
> 标签：asp.net-mvc-4, visual-studio-2012, entity-framework-5, composite-primary-key, ef-database-first

我使用 Visual Studio 2012 (Web Express) 并且我正在创建一个简单的 ASP.NET MVC 应用程序，（使用 Database-First 方法）按照[hector espinosa 的这个很好的指南](http://hectorea.com/blog/building-a-mvc-4-app-with-database-first-and-entity-framework-5-1/)。我的问题是，对于使用复合主键的表，脚手架系统无法正常工作。

我的表如下：

```
CREATE TABLE [dbo].[Unit](
    [UnitOid] [int] NOT NULL,
    /*other stuff*/
    [ReplicationId] [int] NOT NULL,
 CONSTRAINT [PK_Unit] PRIMARY KEY CLUSTERED 
(
    [UnitOid] ASC,
    [ReplicationId] ASC
) 
```

脚手架生成控制器和视图，但只要我单击编辑或详细信息链接，唯一使用的标识符就是第一个 ( `UnitOid`) 值。

控制器中的示例操作：

```
public ActionResult Details(int id = 0)
{
    Unit unit = db.Units.Find(id); // throws an ArgumentException
    if (unit == null)
    {
        return HttpNotFound();
    }
    return View(unit);
} 
```

异常消息非常清楚：

> “传递的主键值的数量必须与实体上定义的主键值的数量相匹配”

**MVC4 / EF5 / VisualStudio 2012 的脚手架系统真的不能开箱即用吗？**

*[注意：这个问题与这个](https://stackoverflow.com/q/9929991/79485)问题非常相似。但是，我正在重新询问工具的当前版本。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:47:40.017

由于您有一个复合键，因此您需要提供**这两个**值。请注意，[Find](http://msdn.microsoft.com/en-us/library/gg696418%28v=VS.103%29.aspx)采用 param 属性，因此您只需执行`db.Units.Find(id, id2)`. 如果您只有密钥的一部分，您将需要查询数据库并期望多个结果，因为数据库中可能有许多实体，您提供的密钥部分是相同的。

# ember.js - Ember.js - 操作未接收参数

> ID：15337602
> 
> 赞同：1
> 
> 时间：2013-03-11T11:38:39.630
> 
> 标签：ember.js

我的 Ember 应用程序中有以下内容：

模板：

```
...

<tr id="court-tpl">
    <td class="name">
        <input class="court-name" type="text" size="3" maxlength="3">
    </td>   
    <td class="placement">
        <select class="court-placement">
            <option selected="selected" value="0">Exterior</option>
            <option value="1">Indoor</option>
        </select>
    </td>
    <td class="material">
        <select class="court-material">
            <option value="0">Muro</option>
            <option selected="selected" value="1">Cristal</option>
        </select>
    </td>
    <td class="single">
        <select class="court-single">
            <option value="0" selected="selected">No</option>
            <option value="1">Sí</option>
        </select>
    </td>
    <td>
        <button {{action "deleteCourtRow" target="view" on="click"}} class="btn btn-small"><i class="icon-remove"></i> Eliminar</button>
    </td>
</tr>

... 
```

对应视图：

```
var ClubCourtsView = Ember.View.extend({
    ...

    deleteCourtRow: function(event) {
        console.log(event);
    }

    ...
}); 
```

单击按钮时，控制台输出为`undefined`. 我正在尝试获取 event.target 以删除`<tr>`包含内联表单的元素。

知道发生了什么吗？

**编辑**

控制器：

```
 var ClubCourtsController = Ember.Controller.extend({
    needs: ['currentClub'],
    content: null,
    addingCourts: false,

    userCanAddCourts: function() {
        if (this.get('addingCourts') || this.get('hasCustomCourts'))
            return true;

        return false;
    }.observes('addingCourts', 'hasCustomCourts'),

    hasCustomCourts: function() {
        if (this.content.get('customCourts').get('length') > 0)
            return true;

        return false;
    }.property('customCourts'),

    saveCourts: function(data) {
        // Scope reference
        var that = this;

        // Create a record for each row
        $.each(data, function(i) {
                var elId = data[0].elId;

                var r = App.CustomCourt.createRecord();
                r.set('name', data[0].name);
                r.set('single', data[0].single);
                r.set('crystal', data[0].crystal);
                r.set('indoor', data[0].indoor);
                r.set('club', that.content);

                // Remove this row form when model is saved, 
                // as the table is watching for new courts automatically
                r.one('didCreate', function() {
                    $('#' + elId).fadeOut('fast');
                });
        });

        // Send new courts to back-end and update clubmeta: enable custom courts
        this.content.get('clubmeta').set('customCourtsEnabled', true);
        this.store.commit();
    },

    deleteCourt: function(court) {
        court.deleteRecord();
        court.get('transaction').commit();
    }

});

module.exports = ClubCourtsController; 
```

问题是该表有两种行：一种显示现有记录（法院），另一种显示创建一个表单。有一个按钮可以动态添加更多行，因为一个俱乐部可以有多个球场。

现有行上的删除按钮`CustomCourt`从数据库中删除记录，这是在控制器的`deleteCourt()`.

**表单行上的删除按钮，这是问题所在，应该只删除视图中的 HTML 元素，这就是我使用视图函数的原因`deleteCourtRow()`。这些行的模型仅在按下保存按钮时创建（参见循环中的`saveCourts()`）。**

![截屏](../Images/6e825dc72551588fe238b64e88032b4b.png)

[http://i.stack.imgur.com/nMj4l.png](https://i.stack.imgur.com/nMj4l.png)

无论如何，请随意推荐另一种方法，因为我是使用 Ember 的新手。

# http - httpRequest 中的 Cookie

> ID：15337611
> 
> 赞同：0
> 
> 时间：2013-03-11T11:39:16.743
> 
> 标签：http, browser, httpwebrequest

我想知道是否所有 cookie 都在请求中传输？

这是一个场景：

1.  访问 www.helloworld.com。创建了一个名为“cookie1”的 cookie
2.  访问 www.alibaba.com。

当我访问 www.alibaba.com 时，“cookie1”会与请求一起出现吗？

问候，萨尔曼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:41:42.123

不，cookie 受域限制（也可以受路径限制）。来自 helloworld.com 的 Cookie 不应该对 alibaba.com 可见。

阅读更多关于维基百科：[http ://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)

特别是：“cookie 域和路径定义了 cookie 的范围——它们告诉浏览器 cookie 应该只针对给定的域和路径发送回服务器。如果未指定，它们默认为“

# java - 本地日期仅获取周日期Java

> ID：15337620
> 
> 赞同：2
> 
> 时间：2013-03-11T11:39:36.430
> 
> 标签：java, date, jodatime

我正在寻找一种仅从本地日期（JODA TIME）API 获取星期日期的方法？我正在尝试以这种格式编写代码..

```
LocalDate today = new LocalDate();
LocalDate getDate = new LocalDate(sqlDate);// i will recieve sqldate from sql table

//if the getdate and number of days to remind is equals to today 
//and if it is between monday to friday ,send an email. 
//ReminderDays is an integer
if(getDate+ReminderDays == today)
SendMail(); 
```

如果可能，请提供代码？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:02:57.120

您可以执行以下操作

1）将天数添加到getDate以获取newDate

2）将其与今天的日期进行比较

3) 如果为真，那么您可以使用 `getDayOfWeek()`@joe 指定的方法，然后检查它是否在 1 和 5 之间，并调用发送邮件方法。

伪代码：

```
LocalDate getDate = new LocalDate(sqlDate);
LocalDate newDate =getDate.plusDays(int days) ;
if(compare newDate & todays date)
//if true then do
if(1<=newDate.getDayOfWeek()<=5)
//call send mail 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:47:16.533

有一个名为 getDayOfWeek() 的方法将返回如下值

```
 public static final int MONDAY = 1;
    public static final int TUESDAY = 2;
    public static final int WEDNESDAY = 3;
    public static final int THURSDAY = 4;
    public static final int FRIDAY = 5;
    public static final int SATURDAY = 6;
    public static final int SUNDAY = 7; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T11:35:03.640

如果您更喜欢使用常量而不是整数值。

Joda 使用来自 DateTimeConstants 的值。这些是 ISO8601 常量，

源代码在这里：

[http://joda-time.sourceforge.net/apidocs/src-html/org/joda/time/DateTimeConstants.html#line.70](http://joda-time.sourceforge.net/apidocs/src-html/org/joda/time/DateTimeConstants.html#line.70)

用法可能类似于：

```
// Joda uses MONDAY=1 to SUNDAY=7
if (startDate.getDayOfWeek() < DateTimeConstants.SATURDAY) {
    doMyWeekdayThang();
} 
```

# c++ - 如何在 Qt5 右上角的 QMenuBar 中设置按钮？

> ID：15337631
> 
> 赞同：4
> 
> 时间：2013-03-11T11:40:01.590
> 
> 标签：c++, qt, qt5, qmenubar

我需要在 QMenuBar 的右侧添加两个按钮（在左侧的常用菜单项中）并不时更改它的图标。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:59:08.417

> 我需要在 QMenuBar 右侧添加两个按钮（在左侧常用菜单项中）

这个问题可能有关于如何将按钮添加到菜单栏右侧的答案： [Stacking QPushButtons on the other side of a QMenuBar](https://stackoverflow.com/questions/14645596/stacking-qpushbuttons-on-the-other-side-of-a-qmenubar)。

> 并一次又一次地改变它的图标

您可以使用[QTimer](http://qt-project.org/doc/qt-4.8/qtimer.html)定期触发插槽。在插槽内，使用[QPushBtton::setIcon()](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#icon-prop)更改图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:48:46.720

您可以使用“布局方向”：

```
QMainWindow mainW;
mainW.show();
QMenuBar* menu = new QMenuBar();
menu->addAction( "action 1" );
menu->addAction( "action 2" );
mainW.setMenuBar( menu );
menu->setLayoutDirection( Qt::RightToLeft); // Display menu bar to the right 
```

# html - 每个表格单元格的 CSS 覆盖编辑图标

> ID：15337632
> 
> 赞同：0
> 
> 时间：2013-03-11T11:40:03.560
> 
> 标签：html, css, html-table, overlay

我希望有人能帮帮忙; 我有一张桌子：

```
<tr style="">
  <td width="330" style="vertical-align:top; " class="updater_modus"><span><i class="icon-pencil"></i></span><img src="http://qmail.wm13.de/data/www.douglas.com/95/img/main-image-1-t4_330.jpg" alt=""></td>
  <td width="290" style="padding-top: 20px;padding-left: 20px;padding-right: 20px;padding-bottom: 20px;background-color: #ccace6;vertical-align:top; " class="updater_modus">
     <span><i class="icon-pencil"></i></span><p><span style="color: #ffffff;">Hier ein Text!</span></p>
     <p><span style="color: #ffffff;">&nbsp;</span></p>
     <p><span style="color: #ffffff;">...</span></p>
     <p><span style="color: #ffffff;">&nbsp;</span></p>
     <p><span style="color: #ffffff;">...</span></p>
   </td>
</tr> 
```

每个`td`都有一个图标。我希望图标位于每个图标的左上角。现在每个`td`图标上都有一个额外的空间..我希望你知道我的意思..

我使用`updater_modus`错误的类我没有为它找到正确的 CSS ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:46:21.030

制作表格单元格`position: relative`和图标`position: absolute; top: 0; left: 0`；

# javascript - 正则表达式验证问题

> ID：15337635
> 
> 赞同：1
> 
> 时间：2013-03-11T11:40:10.407
> 
> 标签：javascript, jquery

我有一个表格：

```
<form onsubmit="return validate(this);" accept-charset="UTF-8" action="/abc_forms" class="niceform" id="new_abc_form" method="post" name="form""><div style="margin:0;padding:0;display:inline">
   <div class="specify_your_own" id='TextBoxesGroup'>
        <label>Specify your own</label>
        <input id="abc_form_git_repos_name" maxlength="32" name="abc_form[git_repos_name]" size="32" type="text" />
        <select name="gitcategory[name]" id="git_category_name">
          <option value="">Select Category</option>
          <option value="a">a</option>
          <option value="b">b</option>
          <option value="c">c</option>
          <option value="d">d</option>
          <option value="e">e</option>
        </select>
        <div id="TextBoxDiv">
            </div>
        <input type='button' value='Add More' id='addButton' style="margin-left: 200px; width: 70px;">
        <input type='button' value='Remove' id='removeButton' style="width: 70px;">
      </div>
      <div class="specify_your_own">
        <div style="margin-left:200px;" id="text"></div>
      </div>
      <br/>
      <br/>
      <div class="svn_field">
        <label class="form_bold">SVN Repository:</label>
        <div class="specify_your_own" id='TextBoxesGroupSecond'>
          <label>Specify your own</label>
          <input id="abc_form_svn_repos_name" maxlength="32" name="abc_form[svn_repos_name]" size="32" type="text" />
          <select name="svncategory[name]" id="git_category_name">
            <option value="">Select Category</option>
            <option value="a">a</option>
            <option value="b">b</option>
            <option value="c">c</option>
            <option value="d">d</option>
            <option value="e">e</option>
          </select>
          <div id="TextBoxDivSecond">
            </div>
            <input type='button' value='Add More' id='addButtonSecond' style="margin-left: 200px; width: 70px;">
            <input type='button' value='Remove' id='removeButtonSecond' style="width: 70px;">
        </div>
        <div class="specify_your_own">
          <div style="margin-left:200px;" id="text2"></div>
        </div>
  </fieldset>
  <div class="instance_submit">
    <input name="commit" type="submit" value="Submit" />
  </div>
</form> 
```

对于添加更多按钮，我有一个 jquery 函数，它使用 select 标签添加更多文本框，如下所示：

```
<script type="text/javascript">
  $(document).ready(function(){
     var counter = 1;
     $("#addButton").click(function () {
  if(counter>6){
            alert("Not allowed to add more then 7 repositories");
            return false;
  }   
  var newTextBoxDiv = $(document.createElement('div'))
       .attr("id", 'TextBoxDiv' + counter);
    newTextBoxDiv.html("<label>Specify your own</label>"+"<input type='text' name='abc_form[git_repos_name_"+counter+"]' size='32' maxlength='32' value='' id='abc_form_git_repos_name_"+counter+"' >" + '<select id="git_category_name_'+counter+'" name="gitcategory[name_'+counter+']"><option value="">Select Category</option><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option><option value="f">f</option></select>' + '<br/>');
    newTextBoxDiv.appendTo("#TextBoxesGroup");
      counter++;
     });
      $("#removeButton").click(function () {
  if(counter==1){
          alert("No more to remove");
          return false;
       }   
  counter--;
         $("#TextBoxDiv" + counter).remove();
     });
  });
</script> 
```

此功能添加更多按钮并接受用户输入并限制用户输入超过 6 个。

现在终于，我有一个看起来像这样的javascript：

```
<script type="text/javascript">
var ck_git = /^(?!\d+$)[a-zA-Z0-9_,]*$/;
function validate(form){
  var git1 = form.abc_form_git_repos_name_1.value;
  var git2 = form.abc_form_git_repos_name_2.value;
  var git3 = form.abc_form_git_repos_name_3.value;
  var git4 = form.abc_form_git_repos_name_4.value;
  var git5 = form.abc_form_git_repos_name_5.value;
  var git6 = form.abc_form_git_repos_name_6.value;
  var svn1 = form.abc_form_svn_repos_name_1.value;
  var svn2 = form.abc_form_svn_repos_name_2.value;
  var svn3 = form.abc_form_svn_repos_name_3.value;
  var svn4 = form.abc_form_svn_repos_name_4.value;
  var svn5 = form.abc_form_svn_repos_name_5.value;
  var svn6 = form.abc_form_svn_repos_name_6.value; 
  var errors = [];
  if (!ck_git.test(git1)) {
    errors[errors.length] = "Git add more No.1 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(git2)) {
    errors[errors.length] = "Git add more No.2 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(git3)) {
    errors[errors.length] = "Git add more No.3 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(git4)) {
    errors[errors.length] = "Git add more No.4 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(git5)) {
    errors[errors.length] = "Git add more No.5 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(git6)) {
    errors[errors.length] = "Git add more No.6 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(svn1)) {
    errors[errors.length] = "Svn add more No.1 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(svn2)) {
    errors[errors.length] = "Svn add more No.2 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(svn3)) {
    errors[errors.length] = "Svn add more No.3 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(svn4)) {
    errors[errors.length] = "Svn add more No.4 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(svn5)) {
    errors[errors.length] = "Svn add more No.5 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (!ck_git.test(svn6)) {
    errors[errors.length] = "Svn add more No.6 Not Valid - Only letters (A-Z or a-z) and Numbers are allowed. Special characters and space not allowed";
    }
    if (errors.length > 0) {
    reportErrors(errors);
    return false;
  }
  return true;
  }
  function reportErrors(errors){
  var msg = "Please Enter Valide Data:\n";
  for (var i = 0; i<errors.length; i++) {
    var numError = i + 1;
    msg += "\n" + numError + ". " + errors[i];
  }
  alert(msg);
}
</script> 
```

此 JavaScript 函数验证正则表达式并在验证失败时返回错误总和。

**问题：**只有当用户点击添加更多 6 次生成它正在寻找的所有 id 时，这才有效。如果用户单击添加更多一次并且验证失败，则仍会提交表单。我是 ROR 开发人员，不知道如何解决此问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:48:10.090

如果他们没有添加所有元素，则如下所示：

```
var git3 = form.abc_form_git_repos_name_3.value; 
```

会失败，因为`form.abc_form_git_repos_name_3`会`undefined`。尝试访问 的`value`属性`undefined`会引发 JavaScript 错误，并且您的验证不会完成（在这种情况下浏览器将继续提交表单）。

您需要做的是在尝试访问它们的属性之前确保这些元素存在：

```
if(form.abc_form_git_repos_name_3)
    var git3 = form.abc_form_git_repos_name_3.value; 
```

传递`undefined`给`test`函数将返回`false`，因此您还需要`git3`在调用正则表达式之前检查是否设置了 , 等：

```
if(git3 && !ck_git.test(git3)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:52:05.633

您可以将一些特定的类添加到动态添加的输入字段中，例如“ **some_class** ”，并且由于您使用的是 jQuery，因此您可以使用[jQuery.each()](http://api.jquery.com/jQuery.each/)，例如：

```
var ck_git = /^(?!\d+$)[a-zA-Z0-9_,]*$/;
function validate(form){
   var errors = [];
  $("input.some_class").each(function(idx, value) {
      if( !ck_git.test(value) ) {
          errors[] = "Git add more No." + idx + ".....";
      }
  });
  if (errors.length > 0) {
    reportErrors(errors);
    return false;
  }
  return true;
) 
```

# django - 无法分配“u'1'”：“Vote.design”必须是“Design”实例

> ID：15337636
> 
> 赞同：2
> 
> 时间：2013-03-11T11:40:14.527
> 
> 标签：django

楷模：

```
class Vote(models.Model):
    user = models.ForeignKey(User)
    design = models.ForeignKey(Design)
    vote = models.DecimalField(max_digits=2,decimal_places=1, choices=RATE_CHOICES) 
```

意见：

```
def add_vote(request, id, vote):
    user = request.user
    Vote.objects.create(user=user, design = id, vote = vote)
    return HttpResponseRedirect('/') 
```

网址：

```
url(r'^vote/(?P<id>\d+)/(?P<vote>\d{1,5})/', 'app.views.add_vote'), 
```

例如，如果我尝试：

**127.0.0.1:8000/投票/1/3**

我有这个错误：

> /vote/1/3/ 处的 ValueError
> 
> 无法分配“u'1'”：“Vote.design”必须是“Design”实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:43:11.323

`Vote.design`必须是`Design`实例，而不是数字：

```
from django.http import Http404

def add_vote(request, id, vote):
    user = request.user
    try:
        design = Design.objects.get(pk=id)
    except Design.DoesNotExist:
        raise Http404

    Vote.objects.create(user=user, design=design, vote=vote)
    return HttpResponseRedirect('/') 
```

或使用快捷方式：

```
from django.shortcuts import get_object_or_404

def add_vote(request, id, vote):
    user = request.user
    design = get_object_or_404(Design, pk=id)
    Vote.objects.create(user=user, design=design, vote=vote)
    return HttpResponseRedirect('/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:42:46.447

更改`design`为`design_id`，它将修复您的错误

```
def add_vote(request, id, vote):
    user = request.user
    Vote.objects.create(user=user, design_id = id, vote = vote)
    return HttpResponseRedirect('/') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:42:53.630

您需要检索`Design`模型的实例并将其`design`属性分配`Vote`给：

```
def add_vote(request, id, vote):
    user = request.user
    design = Design.objects.get(id=id)
    Vote.objects.create(user=user, design=design, vote=vote)
    return HttpResponseRedirect('/') 
```

# google-app-engine - 在 NDB 中，键的 id 是二进制安全的吗？

> ID：15337638
> 
> 赞同：0
> 
> 时间：2013-03-11T11:40:16.257
> 
> 标签：google-app-engine, app-engine-ndb

在 NDB 中，键的 id 是 binarysafe 吗？

我想使用一些二进制字符串作为 id ^_^（例如比特币交易的 txid.decode('hex')）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:51:12.307

键可以使用数字 id 或字符串名称。

在您的情况下，您可以将二进制字符串转换为十六进制并将其存储为字符串作为名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:42:39.487

它可能是也可能不是（它不是设计成的）利用 uuid 库可能会更好

```
import uuid

client_id = str(uuid.uuid4()).replace("-",'') 
```

# jquery - JQuery 获取 JSON.parse：意外字符

> ID：15337652
> 
> 赞同：0
> 
> 时间：2013-03-11T11:40:57.070
> 
> 标签：jquery, json, asp.net-mvc-3

您好我收到以下错误：

200

SyntaxError: JSON.parse: 意外字符

我在 firebug 中检查了我的 JSON，它显示以下内容：

```
jquery-1.8.3.js (line 2)
POST http://localhost:1579/Comets/Progress/4c691777-2a9f-42ca-8421-d076ab4d0450/1

200 OK    
JSON     
Sort by key     
MsgId          "4c691777-2a9f-42ca-8421-d076ab4d0450"    
Status         2    
CurrentServer  "10.10.143.4" 
```

这对我来说似乎没问题，所以我不确定我哪里出错了，为什么我会出错

我的代码如下：

查询：

```
$(document).ready(function Progress() {
                            var msgId = $('textarea.msgId').val();
                            var status = $('textarea.status').val();
                            $.ajax({
                                type: 'POST',
                                url: "/Comets/Progress/" + msgId + "/" + status,
                                success: function (data) {
                                    //update status
                                    alert("does this work");

                                },
                                error: function (xhr, ajaxOptions, thrownError) {
                                    alert(xhr.status);
                                    alert(thrownError);
                                }
                            });
                        }); 
```

控制器：

```
 [JsonpFakeFilter]
        [AcceptVerbs(HttpVerbs.Post)]
        public JsonResult Progress(string msgId, int status, String callback)
        {

            //todo need to put recursive function on here (status)

            //check the ip - has it changed
            string strHostName = System.Net.Dns.GetHostName();
            var ipHostInfo = Dns.Resolve(Dns.GetHostName());
            var ipAddress = ipHostInfo.AddressList[0];
            var currentServer = ipAddress.ToString();

            var cometJson = new CometJson
                                {
                                    MsgId = msgId,
                                    Status = status,
                                    CurrentServer = currentServer
                                };

            //check what the status is if it is less than 4 we want to add one
            if (status <= 4)
            {
                status = status + 1;
                cometJson = new CometJson
                {
                    MsgId = msgId,
                    Status = status,
                    CurrentServer = currentServer
                };
                return Json(cometJson);
            }

            return Json(cometJson);
        } 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:06:08.077

您的服务器返回无效的 JSON：

```
callback_dc99fd712fff48d6a56e0d9db5465ac3({"MsgId":"b91949f4-a30e-4f3f-b6e8-f83f‌​c40ada89","Status":2,"CurrentServer":"10.10.143.4"}) 
```

这不是 JSON。这是[JSONP](http://en.wikipedia.org/wiki/JSONP)，用于跨域 AJAX 调用。在这种情况下，您没有进行跨域 AJAX 调用，因此您应该删除`callback_dc99fd712fff48d6a56e0d9db5465ac3`包装器并返回有效的 JSON：

```
{"MsgId":"b91949f4-a30e-4f3f-b6e8-f83f‌​c40ada89","Status":2,"CurrentServer":"10.10.143.4"} 
```

我猜`[JsonpFakeFilter]`你用这个回调来装饰你的控制器动作的属性负责包装 JSON 结果。

所以摆脱它并确保您的服务器返回有效的 JSON：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Progress(string msgId, int status)
{
    ...
} 
```

# java - 从 txt 文件中拆分数组并附加 \n。在 TextArea 中单行显示每个条目

> ID：15337658
> 
> 赞同：0
> 
> 时间：2013-03-11T11:41:23.203
> 
> 标签：java, arrays, jtextarea

我想打开一个 .txt 文件，用字符 ` 拆分内容，然后显示这个数组的内容，每个条目在一行中向用户显示。

我已经用 android 实现了类似的效果，所以我下面的代码基于此：

```
try {
        // open the file
        File myFile = new File(f + "mx.txt");
        FileInputStream fIn = new FileInputStream(myFile);
        BufferedReader myReader = new BufferedReader(new InputStreamReader(
                fIn));
        String aDataRow = "";
        String aBuffer = "";
        while ((aDataRow = myReader.readLine()) != null) {
            aBuffer += aDataRow + "\n";
        }

        // String loadeddata = aBuffer;
        String[] splitdata = aBuffer.split("`"); // recover the file and
                                                    // split it based on `

        myReader.close();

        System.out.println(Arrays.toString(splitdata));
        txtDataWillBe.setText(Arrays.toString(splitdata));

    } catch (Exception ez) {
        System.out.println("error in array building");
    } 
```

数组加载正常，但在文本区域中显示为单行。

我的问题是，如何拆分数组并添加“\n”，或者是否有另一种方法来显示数组每行一个条目？

另外，如果需要，我可以防止文本区域扩展到打开的窗口之外并显示垂直滚动条吗？

谢谢你的帮助。安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:47:23.267

您可以循环使用`String[] splitdata`并组合每个`String`使用`System.getProperty("line.separator");`

```
String lines = "";
for(String line : splitdata){
lines = lines + line + System.getProperty("line.separator");
} 
```

# sql - 从同一天给定的 DateTimeOffset 创建 DateTimeOffset 00:01 / 23:59

> ID：15337661
> 
> 赞同：1
> 
> 时间：2013-03-11T11:41:30.283
> 
> 标签：sql, sql-server, datetimeoffset

警告 - 前面的 TSQL 新手问题：

例如，我有一个`DateTimeOffset`for，`2013-03-11 11:04:26.0000000 +00:00`我需要为同一天创建两个新日期，一个在 00:01，另一个在 23:59。

到目前为止，我已经尝试了各种方法`DATETIMEOFFSETFROMPARTS`，`DATEPART`但似乎有点尴尬 - 是否有一个简单的解决方案来*缩短*小时/分钟/等。只是用一天用两个必需的时间代替时间？

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:56:05.510

知道了...

```
select @pkgDate = CONVERT (date, @pkgDate)

select DATEADD (minute, 1, @pkgDate)
select DATEADD(hour, 23, DATEADD (minute, 59, @pkgDate)) 
```

..更好/更简洁的方法仍然值得赞赏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:37:28.090

你也可以试试这个选项

```
DECLARE @date datetimeoffset = '2013-03-11 11:04:26.0000000 +00:00'
SELECT DATEADD(day, DATEDIFF(day, 0 , @date), '00:01'), 
       DATEADD(day, DATEDIFF(day, 0 , @date), '23:59') 

--Results:2013-03-11 00:01:00.000   2013-03-11 23:59:00.000 
```

# python - 如何使菜单对 openerp 7 中特定组下的用户不可见？

> ID：15337664
> 
> 赞同：1
> 
> 时间：2013-03-11T11:41:37.783
> 
> 标签：python, xml, openerp

我想让属于特定组的用户不可见菜单。例如，我为“admin_limited”组下的用户创建了一个新的设置菜单。这些用户不应获得默认设置菜单，现在设置菜单的视图由管理员的“访问权限”或“设置”组管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:09:19.510

您必须在要授予查看特定菜单权限的菜单上应用组，该组确定对不同资源的访问权限，如果用户属于多个组将能够访问。您可以在菜单上应用组，例如：

```
 <menuitem id="xxx" action="xxx" parent="xxx" groups="base.group_no_one"/> 
```

# javascript - 有没有办法让闭包编译器警告传递的变量（强类型）并使用 jquery？

> ID：15337665
> 
> 赞同：0
> 
> 时间：2013-03-11T11:41:40.620
> 
> 标签：javascript, google-closure-compiler, strong-typing

我有一个简单的例子：

```
var obj = {
  /**
  * @param {number} inp 
  * @returns {number} returning number plus one
  */
  func: function(inp) {
    return inp++;
  },
  c: 'hello',
  q: null
};

obj.func($(document)); // passing invalid parameter 
```

我希望看到有关传递参数不是数字的警告，但获得该参数的唯一方法是至少设置为详细。

如果我使用它会起作用：

```
obj.func(" "); // passing invalid parameter 
```

并省略 --externs jquery-1.9.1.js 命令参数。一旦我将它与 jquery 结合并将warning_level 设置为详细（我想查看有关无效转换/参数/...的警告），我就会被 jquery 文件中的 5500 个警告淹没。

问题是我不关心 jquery 警告，但必须将其包含在 --externs 中，否则我只会收到一个错误：

```
variable $ is undeclared 
```

现在我想知道；人们如何使用它？我想强烈键入我的 javascript，但使用外部库我要么没有收到任何警告，要么收到有关缺少 3rd 方库的警告或警告。

已经研究了几个小时，真的希望有比谷歌提供的更好的文档，因为到目前为止还没有太多用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:54:10.390

在大多数情况下，库的原始源代码并不能构成一个好的外部文件。在 jQuery 的情况下，您需要使用[Closure-compiler 项目 contrib 文件夹](https://code.google.com/p/closure-compiler/source/browse/#git/contrib/externs)中的官方外部文件。

目前还没有一个 jQuery 1.9 extern 文件，但我会尽快发布一个。除非您使用 1.9 中引入的 api 签名，否则[1.8 外部文件](https://closure-compiler.googlecode.com/git/contrib/externs/jquery-1.8.js)就足够了。

# android - Android应用的地图界面

> ID：15337666
> 
> 赞同：1
> 
> 时间：2013-03-11T11:41:41.593
> 
> 标签：android, android-mapview

目前，我正在为 Android 设备开发一个应用程序，其中包括室内跟踪和路由。

一方面，这个应用的管理员会上传一张地图的图像，所以用户的位置会被投影在这张地图上。另一方面，用户将能够放大/缩小地图、导航地图、获取信息和其他类似的操作，这些都可以在 Google 地图服务上使用。

我一直在阅读 Android API 文档，并且遇到了 MapView。尽管 MapView 是一个完整且强大的库，但它对我没有帮助，因为它使用了 Google 地图服务。

我的问题是除了 MapView 之外，是否存在另一个（类似的）API 来查看和管理地图。

感谢您的时间。

# c# - 将按钮链接到 Gridview

> ID：15337670
> 
> 赞同：0
> 
> 时间：2013-03-11T11:41:51.317
> 
> 标签：c#, asp.net, .net, gridview

我有以下 GridView，我的源代码如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ShopData.ascx.cs" Inherits="usercontrols.UsercontrolsShopData" %>
<asp:LinkButton ID="LinkButton1" runat="server" OnClick="LinkButton1_Click">Export to csv</asp:LinkButton>
<br /> <br />
<asp:GridView ID="gridviewShopData" runat="server" DataSourceID="SqlDataSource1" CellPadding="4" BackColor="White" BorderColor="#CC9966" BorderStyle="None" BorderWidth="1px">
    <FooterStyle BackColor="#FFFFCC" ForeColor="#330099" />
    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="#FFFFCC" />
    <PagerStyle BackColor="#FFFFCC" ForeColor="#330099" HorizontalAlign="Center" />
    <RowStyle BackColor="White" ForeColor="#330099" />
    <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="#663399" />
    <SortedAscendingCellStyle BackColor="#FEFCEB" />
    <SortedAscendingHeaderStyle BackColor="#AF0101" />
    <SortedDescendingCellStyle BackColor="#F6F0C0" />
    <SortedDescendingHeaderStyle BackColor="#7E0000" />

</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" SelectCommand="SELECT firstName as 'First Name',lastName as 'Last Name',employeeNumber as 'Employee Number',productID as 'Product Number' FROM ShopOrder where shopID=@pageid">
    <SelectParameters><asp:QueryStringParameter Name="pageid" QueryStringField="id"/></SelectParameters>

</asp:SqlDataSource> 
```

我想让第一列值链接到链接到 url 的按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:27:40.743

在您的网格视图中，设置 AutoGenerateColumn="False"。接下来，打开 Gridview 的属性并将列转换为模板字段。在项目模板中，添加超链接控件。从这里您可以随意更改超链接控件。要访问列中的数据，您可以使用 eval（例如 Text='<%# Eval("ColumnName", "Run") %>'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:02:32.767

这可以使用 TemplateField 来完成。请在下面示例代码。

```
<asp:TemplateField HeaderText="Your Header Here">
<ItemTemplate>
<asp:HyperLink runat="server" Text="<%# Bind(Text) %>" NavigateUrl='<%# "Your Link Here" %>' Target="_blank"></asp:HyperLink>
</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:00:26.470

将模板字段作为网格视图中的第一列，并在该模板字段中放置链接按钮。

单击链接按钮->链接按钮任务->编辑数据绑定->文本=<%Eval("Your ColumnName")%

# .net - 如何使标签控件用省略号截断长字符串？

> ID：15337675
> 
> 赞同：10
> 
> 时间：2013-03-11T11:42:02.513
> 
> 标签：.net, winforms, label

我有一个带有更改文本的标签，我希望它是固定长度的单行。每当文本长于标签长度时，我希望它在末尾显示适合“...”的任何内容。例如：

```
Some Very Long Text 
```

看起来像：

```
Some Very Lon... 
```

有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T11:47:41.003

选项之一是将[Label.AutoEllipsis](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autoellipsis.aspx)设置为 true。

> 将 AutoEllipsis 设置为 true 以在用户使用鼠标经过控件时显示超出标签宽度的文本。如果 AutoSize 为 true，则标签将增大以适合文本，并且不会出现省略号。

所以，你需要设置`AutoSize`为false。省略号的外观取决于标签的固定宽度。AFAIK，您需要手动处理文本更改以使其取决于文本长度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T12:44:42.773

我的解决方案：

```
 myLabel.text = Trim(someText, myLabel.Font, myLabel.MaximumSize.Width);

public static string Trim(string text, System.Drawing.Font font, int maxSizeInPixels)
{
    var trimmedText = text;
    var graphics = (new System.Windows.Forms.Label()).CreateGraphics();
    var currentSize = Convert.ToInt32(graphics.MeasureString(trimmedText, font).Width);
    var ratio = Convert.ToDouble(maxSizeInPixels) / currentSize;
    while (ratio < 1.0)
    {
        trimmedText = String.Concat(
           trimmedText.Substring(0, Convert.ToInt32(trimmedText.Length * ratio) - 3), 
           "...");
        currentSize = Convert.ToInt32(graphics.MeasureString(trimmedText, font).Width);
        ratio = Convert.ToDouble(maxSizeInPixels) / currentSize;
    }
    return trimmedText;
} 
```

# mysql - 休眠：不成功的改变表

> ID：15337679
> 
> 赞同：0
> 
> 时间：2013-03-11T11:42:09.437
> 
> 标签：mysql, hibernate, nhibernate-mapping

我正在使用 Hibernate 4，我想快速测试`@OrderColumn`注释，但尝试这样做时出现以下错误：

```
INFO [main] (SchemaExport.java:343) - HHH000227: Running hbm2ddl schema export
DEBUG [main] (SchemaExport.java:353) - Import file not found: /import.sql
DEBUG [main] (SqlStatementLogger.java:104) - 
    alter table Order 
        drop 
        foreign key FK48E972E19D16493
Hibernate: 
    alter table Order 
        drop 
        foreign key FK48E972E19D16493
ERROR [main] (SchemaExport.java:425) - HHH000389: Unsuccessful: alter table Order drop foreign key FK48E972E19D16493
ERROR [main] (SchemaExport.java:426) - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Order 
        drop 
        foreign key FK48E972E19D16493' at line 1
DEBUG [main] (SqlStatementLogger.java:104) - 
    drop table if exists Customer
Hibernate: 
    drop table if exists Customer
DEBUG [main] (SqlStatementLogger.java:104) - 
    drop table if exists Order
Hibernate: 
    drop table if exists Order
ERROR [main] (SchemaExport.java:425) - HHH000389: Unsuccessful: drop table if exists Order
ERROR [main] (SchemaExport.java:426) - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Order' at line 1
DEBUG [main] (SqlStatementLogger.java:104) - 
    create table Customer (
        id integer not null auto_increment,
        primary key (id)
    )
Hibernate: 
    create table Customer (
        id integer not null auto_increment,
        primary key (id)
    )
DEBUG [main] (SqlStatementLogger.java:104) - 
    create table Order (
        id integer not null auto_increment,
        number varchar(255),
        customer_id integer,
        orders_index integer,
        primary key (id)
    )
Hibernate: 
    create table Order (
        id integer not null auto_increment,
        number varchar(255),
        customer_id integer,
        orders_index integer,
        primary key (id)
    )
ERROR [main] (SchemaExport.java:425) - HHH000389: Unsuccessful: create table Order (id integer not null auto_increment, number varchar(255), customer_id integer, orders_index integer, primary key (id))
ERROR [main] (SchemaExport.java:426) - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Order (
        id integer not null auto_increment,
        number varchar(255),' at line 1
DEBUG [main] (SqlStatementLogger.java:104) - 
    alter table Order 
        add index FK48E972E19D16493 (customer_id), 
        add constraint FK48E972E19D16493 
        foreign key (customer_id) 
        references Customer (id)
Hibernate: 
    alter table Order 
        add index FK48E972E19D16493 (customer_id), 
        add constraint FK48E972E19D16493 
        foreign key (customer_id) 
        references Customer (id)
ERROR [main] (SchemaExport.java:425) - HHH000389: Unsuccessful: alter table Order add index FK48E972E19D16493 (customer_id), add constraint FK48E972E19D16493 foreign key (customer_id) references Customer (id)
ERROR [main] (SchemaExport.java:426) - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Order 
        add index FK48E972E19D16493 (customer_id), 
        add constrain' at line 1
 INFO [main] (SchemaExport.java:405) - HHH000230: Schema export complete 
```

**以下是正在使用的代码：**

**客户.java**

```
@Entity
public class Customer {
       private Integer id;
       private List<Order> orders;

       @Id @GeneratedValue 
       public Integer getId() { return id; }
       public void setId(Integer id) { this.id = id; }

       @OneToMany(mappedBy="customer")
       @OrderColumn(name="orders_index")
       public List<Order> getOrders() { return orders; }
       public void setOrders(List<Order> orders) { this.orders = orders; }

       public void addOrder(Order order) {
           this.orders.add(order);
           order.setCustomer(this);
       }
} 
```

**订单.java**

```
@Entity
public class Order {
       private Integer id;
       private String number;
       private Customer customer;

       public Order() {}   
       public Order(String number) { this.number = number; }

    @Id @GeneratedValue 
       public Integer getId() { return id; }
       public void setId(Integer id) { this.id = id; }

       public String getNumber() { return number; }
       public void setNumber(String number) { this.number = number; }

       @ManyToOne
       @JoinColumn(name="customer_id")
       public Customer getCustomer() { return customer; }
       public void setCustomer(Customer customer) { this.customer = customer; }
} 
```

**测试客户端.java**

```
public class Client {
    public static void main(String[] args) {        
        SessionFactory sessionFactory =  new AnnotationConfiguration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        Transaction txn = session.beginTransaction();

        //inserting data into tables

        Customer leo = new Customer();
        List<Order> orders = new ArrayList<Order>();
        Order book = new Order("1-sia-2nd-edi");
        Order mobile = new Order("2-son-wal");
        Order ipod = new Order("3-ipo-app");
        orders.add(book);orders.add(mobile);orders.add(ipod);
        leo.setOrders(orders);

        session.save(leo);

        //retrieving data from tables

        txn.commit();
        session.close();            
    }
} 
```

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory>
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">pass</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/testdb</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

  <property name="hibernate.hbm2ddl.auto">create</property>
  <property name="hibernate.show_sql">true</property>
  <property name="hibernate.format_sql">true</property>
  <property name="hibernate.use_sql_comments">true</property>

  <mapping class="com.transbinary.entity.Customer"/>
  <mapping class="com.transbinary.entity.Order"/>  
 </session-factory>
</hibernate-configuration> 
```

有人可以帮我理解为什么会出现这个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:45:24.077

order 是 mysql.so 中的一个关键字。所以请使用不同的名称。我认为这可能是问题所在。如果您更改表名，它将起作用。我测试了它。

# javascript - 如何证明我的 JavaScript 文件在特定 JS 或 ECMA 版本的范围内？

> ID：15337684
> 
> 赞同：15
> 
> 时间：2013-03-11T11:42:15.117
> 
> 标签：javascript, version

假设您将获得一堆 .js 文件，现在您的工作是将它们分类为如下组：

*   至少需要 JavaScript 1.85
*   至少需要 E4X (ECMAScript 4 EX)
*   至少需要 ECMAScript 5

或类似的东西。

我对任何解决方案都感兴趣，尤其是那些使用 JavaScript 或 PHP 的解决方案。这用于创建自动化规范，但这无关紧要 - 这是一个很好的任务，应该很容易解决 - 但是，我不知道如何，这对我来说并不容易。所以，如果这对你来说很容易，请分享任何提示。

我希望这样的东西 - [http://kangax.github.com/es5-compat-table/#](http://kangax.github.com/es5-compat-table/#) - 只是不适用于浏览器，而是要针对不同的 JavaScript 实现检查给定文件。

我的猜测是，每个版本都必须有一些可以测试的细节。但是，我只能找到有关“此浏览器支持什么版本”的内容。

* * *

PS：不要从字面上理解*“现在是你的工作”*，我用它来演示任务，而不是暗示我希望为我完成工作；在解决这个问题的过程中，如果能得到一些帮助或指导就好了。

* * *

编辑：我采取了简单的方法，要求 ECMAScript 5 至少得到当前 FireFox 的支持，以便我的项目能够按预期和预期工作。

但是，我仍然对任何解决方案尝试感兴趣，或者至少对“可能（使用 XY）”或“不可能，因为......”的明确答案感兴趣；XY 可以只是一些关键字，例如 FrameworkXY 或 DesignPatternXY 或其他任何内容，当然也可以是更详细的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:59:54.403

本质上，您正在寻找某些 javascript 文件的最低要求。我会说这在运行时是不可能的。JavaScript 是一种动态语言。因此，您没有编译时错误。结果，直到您在某个封闭范围内，您才能知道某些东西不起作用，即使那样它也会产生误导。您的依赖项实际上可以解决许多兼容性问题。

## 例子：

*   JS 文件 A 使用了一些 ES5 特性
*   JS 文件 B 为缺乏 ES5 的浏览器提供了一个 shim，或者至少以某种方式模仿了它。
*   JS 文件 A 和 B 总是一起加载，但单独 A 看起来不起作用。

## 示例 2：

*   Object.create 是您要测试的内容
*   一些名叫 Crockford 的人将 create 添加到 Object.prototype
*   Object.create 现在可以在不太兼容的浏览器中工作，并且没有任何问题。

## 解决方案1：

1.  构建或查找依赖关系图。您肯定已经有一个依赖映射，或者显式地或者您可以通过迭代 HTML 文件来生成它。
2.  在功能减少的环境中运行所有相关的代码路径（例如：ES5，然后是 E4X，然后是 JS 1.x，等等）。
3.  一旦 JS 文件包因某些代码路径失败，您就会知道它们的最低要求。
4.  也许您可以遍历对象中的公共函数并使用依赖注入来填充构造函数和方法。不过这听起来真的很难。

## 解决方案2：

1.  使用**webdriver**在各种环境中访问您的页面。
2.  映射`window.onerror`到一个函数，该函数告诉您当前页面是否在执行某些操作时损坏。
3.  出错时，您将知道当前页面上的捆绑包存在问题，因此请保存该数据。

这两种解决方案都假定您始终编写完美的 JS，永远不会出错，这是您应该努力的，但不现实。这有可能; 但是，为您提供一些基本的“冒烟测试”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T23:50:32.030

这不可能以确切的方式进行，而且对于此类问题，这也不是看待事物的好方法。

### 为什么它不可能

Javascript 没有静态类型。但是属性是由原型链决定的。这意味着对于任何一段代码，在确定函数调用将调用哪个函数之前，您都必须推断出对象的类型并检查原型链。

例如，您必须能够判断`$(x).bind()`o`$(x).map`不是在调用 ecmascript5`map`或`bind`函数，而是调用 jQuery 函数。这意味着您确实必须解析整个代码并推断类型。如果您没有完整的代码库，这是不可能的。如果您有一个接受对象的函数并调用了 bind，您将不知道这是否应该是，`Function.prototype.bind`或者`jQuery.bind`因为直到运行时才决定。事实上，它可能（尽管不是良好的编码实践）两者兼而有之，并且运行的内容取决于函数的输入，甚至取决于用户输入。因此，您可能可以对此进行猜测，但不能完全做到。

让这一切变得更加不可能的是，eval 函数与获取用户输入或 ajax 数据的能力相结合，这意味着您甚至不知道某些对象是什么类型或可能是什么类型，甚至抛开 eval 可能尝试运行的问题符合任何规范的代码。

这是一段您无法解析的代码示例

```
var userInput = $("#input").val();

var objectThatCouldBeAnything = eval(userInput);

object.map(function(x){
   return !!x; 
}); 
```

无法判断此代码​​是在 eval 中解析 jQuery 对象并运行，`jQuery.map`还是生成数组并运行`Array.prototype.map`。这就是像 javascript 这样的动态类型语言的优点和缺点。它提供了极大的灵活性，但限制了您在运行时之前对代码的了解。

### 为什么它不是一个好策略

ECMAScript 规范是一个标准，但在实践中它们从未完美或一致地实施。不同的环境实现标准的不同部分。拥有一段“ECMAScript5”代码并不能保证任何特定的浏览器都能完美地实现其所有属性。您确实必须逐个属性地确定这一点。

你最好做的是找到代码使用的函数或属性的列表。然后，您可以将其与特定环境支持的属性进行比较。

由于上述原因，这仍然是一个难以解决的问题，但它至少是一个有用的问题。即使使用松散的近似值，您也可以获得价值（假设`bind`实际上是 ecmascript5，除非它在`$()`包装上。那不会是完美的，但仍然可能有用）。

试图找出一个已实施的标准对于帮助您决定是否在特定环境中使用它是不切实际的。最好知道它使用了哪些函数或属性，以便您可以将其与环境进行比较，并在必要时添加 polyfill。

# jquery - 将请求标头添加到 jquery ajax 调用会引发 101 异常

> ID：15337686
> 
> 赞同：1
> 
> 时间：2013-03-11T11:42:21.930
> 
> 标签：jquery, ajax, wcf, rest, header

嗨，我在下面尽可能地简化了我的代码。我想要实现的是调用一个宁静的 wcf 服务。但是，当我添加设置请求标头方法时，我在 Firefox 和 chrome 中都得到了异常，但它在 IE 中工作，它成功地命中了服务方法。

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

    <script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-md5.js"></script>
    <script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>
<script type="text/javascript">

    function WriteResponse(string) {        
        $("#divResult").val(string);
    }

    function setHeader(xhr) {
        var secretkey = "1234dgt";
        var hashedUrl = CryptoJS.HmacMD5($('#txtUrl').val(), secretkey);
        var hashedUrlBase64 = hashedUrl.toString(CryptoJS.enc.Base64);
        xhr.setRequestHeader('Authorization', hashedUrlBase64, "1234dgt");
    }

    $(document).ready(function () {
        $("#btnCall").click(function () {

            jQuery.support.cors = true;
            $.ajax({               
                url: $('#txtUrl').val(),
                type: 'GET',
                async: false,
                dataType: 'json',
                success: function (data) {
                    WriteResponse(data);
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                },
                beforeSend: setHeader
            });
        });
    });

</script> 
```

任何帮助将非常感激。
谢谢

```
// Here is the c# code used to call the same service:
public static string GetUserBookmarks(string uri)
    {
        HttpWebRequest request = WebRequest.Create(uri) as HttpWebRequest;
        string encodedUri = EncodeText(_key, uri, UTF8Encoding.UTF8);
        request.Headers[HttpRequestHeader.Authorization] = encodedUri;
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        Stream bookmarksStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(bookmarksStream);
        string str = reader.ReadToEnd();
        reader.Close();
        bookmarksStream.Close();
        return str;
    }

    public static string EncodeText(string key, string text, Encoding encoding)
    {
        HMACMD5 hmacMD5 = new HMACMD5(encoding.GetBytes(key));
        byte[] textBytes = encoding.GetBytes(text);
        byte[] encodedTextBytes =
            hmacMD5.ComputeHash(textBytes);
        string encodedText =
            Convert.ToBase64String(encodedTextBytes);
        return encodedText;
    }

// Here is the wcf service method and its interface\contract

[ServiceContract]
public interface IRestSerivce
{
    [WebGet(UriTemplate = "users/{username}")]
    [OperationContract]
    List<string> GetUserBookmarks(string username);

}

public List<string> GetUserBookmarks(string username)
    {
        WebOperationContext context = WebOperationContext.Current;
        OutgoingWebResponseContext outgoingResponseContext =
            context.OutgoingResponse;

        bool isUserAuthenticated = IsUserAuthenticated(username);
        if (isUserAuthenticated == false)
        {
            outgoingResponseContext.StatusCode = HttpStatusCode.Unauthorized;
            return null;
        }

        outgoingResponseContext.StatusCode = HttpStatusCode.OK;

        List<string> bookmarks = new List<string>();
        bookmarks.Add("User has been authenticated Successfully");

        return bookmarks;
    } 
```

这是我收到的错误，这是产生此错误的 ajax 错误函数中的警报，但是 firbug 控制台窗口中没有错误。

[对象对象]错误[异常...“失败”nsresult：“0x80004005（NS_ERROR_FAILURE）”位置：“JS框架:: [http](http://code.jquery.com/jquery-1.9.1.min.js) ://code.jquery.com/jquery-1.9.1.min.js ::.发送 :: 第 5 行“数据：无]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:09:15.953

我终于发现了我的代码的问题，这是由于服务器端不允许授权标头。所以为了解决这个问题，我需要在我的 wcf 项目的 global.asac.cs 类中添加一些代码。下面的代码还启用了跨域调用。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {

        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore();

        EnableCrossDmainAjaxCall();
    }

    private void EnableCrossDmainAjaxCall()
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin",
                      "*");

        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods",
                          "GET, POST");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers",
                          "Content-Type, Accept, Authorization");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age",
                          "1728000");
            HttpContext.Current.Response.End();
        }
    } 
```

感谢尼古拉斯的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:54:41.813

你能看看[这个stackoverflow问题](https://stackoverflow.com/questions/3229823/jquery-getjson-how-to-pass-request-headers)吗，我认为它展示了你想要实现的目标。

我认为您将一个参数传递给 setRequestHeader 太多。

# java - 用绘制图形方法绘制形状？

> ID：15337689
> 
> 赞同：1
> 
> 时间：2013-03-11T11:42:29.283
> 
> 标签：java, swing

我正在尝试根据形状绘制图形，该形状获取点的几何形状并在选择此几何形状“承载”的行后更改其颜色问题是每次选择行时都会出现此错误这是日志文件：谢谢提前

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at com.vividsolutions.jump.workbench.ui.renderer.java2D.Java2DConverter.toShape(Java2DConverter.java:313)
at com.vividsolutions.jump.workbench.ui.plugin.specific.SearchPropertiesPlugin$2.valueChanged(SearchPropertiesPlugin.java:144)
at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:167)
at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:147)
at javax.swing.DefaultListSelectionModel.fireValueChanged(DefaultListSelectionModel.java:194)
at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:388)
at javax.swing.DefaultListSelectionModel.changeSelection(DefaultListSelectionModel.java:398)
at javax.swing.DefaultListSelectionModel.setSelectionInterval(DefaultListSelectionModel.java:442)
at javax.swing.JTable.changeSelectionModel(JTable.java:2352)
at javax.swing.JTable.changeSelection(JTable.java:2421)
at javax.swing.plaf.basic.BasicTableUI$Handler.adjustSelection(BasicTableUI.java:1085)
at javax.swing.plaf.basic.BasicTableUI$Handler.mousePressed(BasicTableUI.java:1008)
at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:263)
at java.awt.Component.processMouseEvent(Component.java:6294)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
at java.awt.Component.processEvent(Component.java:6062)
at java.awt.Container.processEvent(Container.java:2039)
at java.awt.Component.dispatchEventImpl(Component.java:4660)
at java.awt.Container.dispatchEventImpl(Container.java:2097)
at java.awt.Component.dispatchEvent(Component.java:4488)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4233)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166)
at java.awt.Container.dispatchEventImpl(Container.java:2083)
at java.awt.Window.dispatchEventImpl(Window.java:2489)
at java.awt.Component.dispatchEvent(Component.java:4488)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:668)
at java.awt.EventQueue.access$400(EventQueue.java:81)
at java.awt.EventQueue$2.run(EventQueue.java:627)
at java.awt.EventQueue$2.run(EventQueue.java:625)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$3.run(EventQueue.java:641)
at java.awt.EventQueue$3.run(EventQueue.java:639)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:638)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

这是此错误所涉及的代码行，它发生在包含bornes（Name，X，Y）的bornesTable的侦听器中

```
 searchProperties.getBornesTable().getSelectionModel().addListSelectionListener(new ListSelectionListener(){

    @Override
    public void valueChanged(ListSelectionEvent e) {

        try {

            if (search()!= null){
        // here's the line 144 in toShape() method      
            final Shape shape = context.getLayerViewPanel().getViewport().getJava2DConverter().toShape(selectedBornes());
            Color color = Color.yellow;
            Stroke stroke =new BasicStroke(5, BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND);
            final Graphics2D graphics = (Graphics2D) context.getLayerViewPanel().getGraphics();
            graphics.setColor(color);
            //graphics.setXORMode(Color.white);
            graphics.setStroke(stroke);
            graphics.fill(shape);

            }
            else
                  JOptionPane.showMessageDialog(null, "vous n'avez pas selectionner une bornes " );

        } catch (NoninvertibleTransformException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }

   }); 
```

这是方法： selectedBornes()

```
 public Geometry selectedBornes() {

    if (getSelectedRowIndex()> 0)
    {
     Geometry geometry;
     geometry = searchBorne().get(getSelectedRowIndex()).getGeometry();
     return geometry;
    }
    return null;

} 
```

和方法 serchBornes() 没有问题，但我会发布它

```
 private List<BasicFeature> searchBorne() {

    final List<BasicFeature> basicFeatureBornes = new ArrayList<BasicFeature>();

     for(BasicFeature basicFeature : BornesList) {

                if ( searchProperties.getNumTextField().getText().equals(basicFeature.getString("num")) &&
                        searchProperties.getComplementComboBox().getSelectedItem().equals(basicFeature.getString("complement")))
                    basicFeatureBornes.add(basicFeature);

                    }
     return basicFeatureBornes;

} 
```

和 getSelectedRowIndex() 方法也没有问题，但我会发布它

```
 public int getSelectedRowIndex() {

    int row = 0;
     for(int i = 0; i < searchBorne().size() ; i++ ) {

          row = searchProperties.getBornesTable().getSelectedRow();

     }

    return row;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:29:42.793

```
final Shape shape = context.getLayerViewPanel().getViewport().getJava2DConverter().toShape(selectedBornes()); 
```

在这里，您直接将`selectedBornes()`值传递给`toShape`方法，但您没有检查该值是否为空，如果没有选择 RowIndex，`selectedBornes()`您将得到结果，因此将代码更改为`NullPointerException`

```
Goemetry newGometry=selectedBornes();
if (newGometry !=null){
final Shape shape = context.getLayerViewPanel().getViewport().getJava2DConverter().toShape(newGometry);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:03:14.177

```
public Geometry selectedBornes() {
    if (getSelectedRowIndex()> 0)
    {
     Geometry geometry;
     geometry = searchBorne().get(getSelectedRowIndex()).getGeometry();
     return geometry;
    } 
```

如果选择的索引为 0（对于第一个元素）会发生什么？它返回 null 并且方法崩溃。如果未选择任何内容，请添加检查以处理案例。

# java - SWT TreeViewer Drag n Drop：SWTException Widget 被释放

> ID：15337693
> 
> 赞同：0
> 
> 时间：2013-03-11T11:42:41.967
> 
> 标签：java, exception, drag-and-drop, swt

我有一个 CTabFolder，其中包含一些一次性选项卡，每个选项卡都包含一个 TreeViewer。我希望每个查看器都有一个 DragSupport。所以很自然地我使用了这个方法`TreeViewer#addDragSupport`。一切都按预期工作，除了当我关闭 shell 并且 SWT 尝试处理所有小部件时。

发生的异常是：

```
org.eclipse.swt.SWTException: Widget is disposed
at org.eclipse.swt.SWT.error(Unknown Source)
at org.eclipse.swt.SWT.error(Unknown Source)
at org.eclipse.swt.SWT.error(Unknown Source)
at org.eclipse.swt.widgets.Widget.error(Unknown Source)
at org.eclipse.swt.widgets.Widget.checkWidget(Unknown Source)
at org.eclipse.swt.widgets.Widget.removeListener(Unknown Source)
at org.eclipse.swt.dnd.DragSource.onDispose(Unknown Source)
at org.eclipse.swt.dnd.DragSource.access$1(Unknown Source)
at org.eclipse.swt.dnd.DragSource$2.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Widget.dispose(Unknown Source)
at org.eclipse.swt.dnd.DragSource$1.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Widget.dispose(Unknown Source)
at org.eclipse.jface.viewers.ContentViewer.handleDispose(ContentViewer.java:172)
at org.eclipse.jface.viewers.StructuredViewer.handleDispose(StructuredViewer.java:2328)
at org.eclipse.jface.viewers.ContentViewer$2.widgetDisposed(ContentViewer.java:214)
at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Widget.dispose(Unknown Source)
at org.eclipse.jface.viewers.ContentViewer.handleDispose(ContentViewer.java:172)
at org.eclipse.jface.viewers.StructuredViewer.handleDispose(StructuredViewer.java:2328)
at org.eclipse.jface.viewers.ContentViewer$2.widgetDisposed(ContentViewer.java:214)
at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Widget.dispose(Unknown Source)
at org.eclipse.jface.viewers.ContentViewer.handleDispose(ContentViewer.java:172)
at org.eclipse.jface.viewers.StructuredViewer.handleDispose(StructuredViewer.java:2328)
at org.eclipse.jface.viewers.ContentViewer$2.widgetDisposed(ContentViewer.java:214)
at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Widget.dispose(Unknown Source)
at org.eclipse.jface.viewers.ContentViewer.handleDispose(ContentViewer.java:172)
at org.eclipse.jface.viewers.StructuredViewer.handleDispose(StructuredViewer.java:2328)
at org.eclipse.jface.viewers.ContentViewer$2.widgetDisposed(ContentViewer.java:214)
at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Composite.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Canvas.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Decorations.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Shell.releaseChildren(Unknown Source)
at org.eclipse.swt.widgets.Widget.release(Unknown Source)
at org.eclipse.swt.widgets.Widget.dispose(Unknown Source)
at org.eclipse.swt.widgets.Decorations.dispose(Unknown Source)
at org.eclipse.swt.widgets.Shell.dispose(Unknown Source)
at org.eclipse.jface.window.Window.close(Window.java:335)
at org.eclipse.jface.window.ApplicationWindow.close(ApplicationWindow.java:307)
at org.eclipse.jface.window.Window.handleShellCloseEvent(Window.java:741)
at org.eclipse.jface.window.Window$3.shellClosed(Window.java:687)
at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
at org.eclipse.swt.widgets.Decorations.closeWidget(Unknown Source)
at org.eclipse.swt.widgets.Decorations.WM_CLOSE(Unknown Source)
at org.eclipse.swt.widgets.Control.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Canvas.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Decorations.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Shell.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Display.windowProc(Unknown Source)
at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
at org.eclipse.swt.internal.win32.OS.DefWindowProc(Unknown Source)
at org.eclipse.swt.widgets.Shell.callWindowProc(Unknown Source)
at org.eclipse.swt.widgets.Control.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Canvas.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Decorations.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Shell.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Display.windowProc(Unknown Source)
at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
at org.eclipse.swt.internal.win32.OS.DefWindowProc(Unknown Source)
at org.eclipse.swt.widgets.Shell.callWindowProc(Unknown Source)
at org.eclipse.swt.widgets.Control.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Canvas.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Decorations.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Shell.windowProc(Unknown Source)
at org.eclipse.swt.widgets.Display.windowProc(Unknown Source)
at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
at org.eclipse.swt.internal.win32.OS.DispatchMessage(Unknown Source)
at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
at org.eclipse.jface.window.Window.open(Window.java:801) 
```

这似乎有点广泛。似乎 SWT 在处理后试图从树中删除 DragListener。我真的不明白这怎么可能。

我不认为我在实现 Source/Target 和 Transfer 类型时犯了错误，因为拖放就像一个魅力。

将拖动支持添加到包含在一次性小部件中的 TreeViewer 时，是否可能需要考虑任何陷阱？

如果您需要代码示例，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:26:31.117

应该不是问题。您有 2 个选择：编写一段代码，给出该错误，或​​者只是在文件夹上添加一个 dispose 侦听器事件并删除那里的拖动支持。

# clojure - 如何打破 Clojure 中的列表？

> ID：15337699
> 
> 赞同：1
> 
> 时间：2013-03-11T11:42:53.710
> 
> 标签：clojure

我正在做[这个](http://www.4clojure.com/problem/135)练习。

这是我的解决方案：

```
(defn infixcal [left op right & expr]
  (let [r (op left right)]
    (if (nil? expr)
      r
    (infixcal r expr)))) 
```

当我通过表达式`38 + 48 - 2 / 2`时，我得到 ArityException，因为`expr`它被收集在一个列表中`'(- 2 / 2)`。

问题是如何将其分解为几个参数并将其传递给函数 infixcal 的下一个调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:45:50.823

我相信您希望该功能适用​​：[http ://clojuredocs.org/clojure_core/clojure.core/apply](http://clojuredocs.org/clojure_core/clojure.core/apply)

这个函数将另一个函数 f 作为它的第一个参数，将一个列表 l 作为它的第二个参数。然后将函数 f 应用于参数列表（并从 apply 返回返回值）。

# php - Google Map Api 请求停止工作

> ID：15337700
> 
> 赞同：1
> 
> 时间：2013-03-11T11:42:54.133
> 
> 标签：php, google-maps, csv

我有一个使用以下网址返回某个位置的经度/纬度的网站。

[http://maps.google.co.uk/maps/geo?q=ph128uj&output=csv](http://maps.google.co.uk/maps/geo?q=ph128uj&output=csv)

它使用信息的第 2 部分和第 3 部分（经度/纬度）来比较位置。今天早上突然一切都停止了工作。一切都返回 0 经度和 0 纬度。

有没有人也有这个问题，是否有新的网址或我们需要使用的东西。我试过谷歌搜索并查看堆栈溢出的“类似问题”，但一切都告诉我使用它（或 json 版本），但每次尝试都会返回 610status 代码并且没有经度/纬度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:06:06.097

[您正在使用自 2010 年 3 月 8 日起弃用的 Geocoding API V2。正如您在Google Maps Developers Documentation Page](https://developers.google.com/maps/documentation/geocoding/v2/)顶部看到的那样，它应该可以工作到 2013 年 3 月 8 日（上周五）。

> 注意：Google Maps Geocoding API 第 2 版已于 2010 年 3 月 8 日正式弃用。V2 API 将继续工作到 2013 年 3 月 8 日。我们鼓励您将代码迁移到新的 Geocoding API。有关如何迁移到 v3 API 的信息，请参阅升级指南。

您必须迁移到新 API：[https ://developers.google.com/maps/documentation/business/guide](https://developers.google.com/maps/documentation/business/guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:52:58.830

610 是 GoogleMapsError：错误 610：G_GEO_BAD_KEY，这意味着您的 API 密钥有问题。需要在请求中发送一个 api 密钥。

最好是使用官方的谷歌地理编码 API：[https ://developers.google.com/maps/documentation/geocoding/?hl=nl](https://developers.google.com/maps/documentation/geocoding/?hl=nl)

# c# - 在 IIS 7 中以编程方式创建的虚拟目录中运行 ASP.NET 应用程序时出错

> ID：15337701
> 
> 赞同：0
> 
> 时间：2013-03-11T11:42:58.587
> 
> 标签：c#, asp.net, .net, iis-7

我使用以下代码配置将虚拟目录添加到 IIS 7 服务器的默认网站。

```
 ServerManager iisManager = new ServerManager();
            iisManager.Sites["Default Web Site"].Applications.Add("/myVirtualDirectory", @"C:\Users\zee\Documents\Jumbo\CI\TestSite");
            iisManager.Sites["Default Web Site"].Start();
            iisManager.CommitChanges(); 
```

虚拟目录创建成功，但运行时出现问题。当 ASP 站点驻留在

> "C:\Users\zee\Documents\Jumbo\CI\TestSite"

是使用 .NET 3.5 构建的，我收到以下错误...

![在此处输入图像描述](../Images/3dc92d67b48d981f155478de8520f76d.png)

但是当我使用 .NET 2.0 构建此站点时，不会弹出此错误，并且站点运行没有问题。

此外，当我手动配置此虚拟目录并在 .NET 3.5 上运行站点构建时，它仍然可以正常运行。

我检查了我的 web.config 文件，但没有这样的重复文件。

所以我假设只有当我以编程方式配置虚拟目录时才会出现问题。

这可能是什么原因？

# wix - DoAction 自定义操作的错误处理

> ID：15337702
> 
> 赞同：1
> 
> 时间：2013-03-11T11:42:59.677
> 
> 标签：wix

我正在尝试使用来自 DoAction CustomAction 的错误对话框。我知道我不能使用`MsiProcessMessage`，目前我正在使用 a`MessageBox`但我知道不推荐这样做。谁能告诉我如何使用 DoAction CustomAction 中的错误表？

我想要做的是检查一个数字是否大于 10,000 以及是否抛出错误：

```
 WcaGetIntProperty(L"DIAGNOSTICCHANNELS",&szDiagnosticChannels);
    if (szDiagnosticChannels > 10000) MessageBox(NULL, szError, szTitle, MB_OK|MB_ICONEXCLAMATION); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:00:55.223

非常令人沮丧的是，Windows 安装程序不支持 DoAction 中的 MsiProcessMessage()。幸运的是，WiX 工具集中的 wcautil.lib 有一些辅助方法，可以使其不太难复制。它看起来很像这样：

```
int nDiagnosticChannels = 0;
PMSIHANDLE hErrorTable;
PMSIHANDLE hErrorMessage;
LPWSTR sczError = NULL;
LPWSTR sczErrorFormatted = NULL;

hr = WcaGetIntProperty(L"DIAGNOSTICCHANNELS",&nDiagnosticChannels);
ExitOnFailure(hr, "Failed to read DIAGNOSTICCHANNELS property.");

if (nDiagnosticChannels > 10000)
{
    // "12345" is your custom error number.
    hr = WcaOpenExecuteView("SELECT `Message` FROM `Error` WHERE `Error`=12345", &hErrorTable); 
    ExitOnFailure(hr, "Failed to query error table.");

    hr = WcaFetchSingleRecord(hErrorTable, hErrorMessage);
    ExitOnFailure(hr, "Failed to get message from error table.");

    hr = WcaGetRecordString(hErrorMessage, 1, &sczError);
    ExitOnFailure(hr, "Failed to get error message");

    hr = WcaGetFormattedString(sczError, &sczErrorFormatted);
    ExitOnFailure(hr, "Failed to format error message");

    ::MessageBox(NULL, sczErrorFormatted, szTitle, MB_OK|MB_ICONEXCLAMATION);
}

LExit:
    ReleaseStr(sczError);
    ReleaseStr(sczErrorFormatted);
    return hr; 
```

如果那里有更多的辅助函数来减少一些函数调用，那就太好了，但它会起作用。

# ruby - 加载一个 Ruby 测试用例而不运行它

> ID：15337705
> 
> 赞同：1
> 
> 时间：2013-03-11T11:43:09.537
> 
> 标签：ruby, unit-testing, testunit

我正在尝试编写一个自定义工具，使用我的自定义运行 ruby​​ 单元测试。

我需要它做的是从给定文件（通过 require 或其他）加载某个 TestCase，然后在进行一些计算和初始化后运行它。

问题是，当我需要“测试/单元”和测试用例时，它会立即运行。

我能用这个做什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:59:06.217

将文件内容作为常规文本文件读取并在`eval`初始化/计算您所说的内容后对其内容进行处理怎么样？它可能不足以满足您的需求，并且可能需要手动设置和执行测试框架。

像那样（我放了heredoc而不是阅读文件）。基本上内容只是一个包含测试用例代码的字符串。

```
content = <<TEST_CASE
  class YourTestCase

    def hello
      puts 'Hello from eval'
    end

  end
  YourTestCase.new.hello
TEST_CASE

eval content 
```

`eval`注意：如果有其他方法，我宁愿不使用。`eval`在使用任何语言手动从字符串中获取代码时，应该格外小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:55:06.443

由于您正在运行 1.9 并且 1.9 中的 test/unit 只是 MiniTest 的包装器，因此以下方法应该有效：

*   实现你自己的自定义 Runner
*   将 MiniTest 的运行器设置为您的自定义运行器

类似的东西（来自[EndOfLine Custom Test Runner](http://endofline.wordpress.com/2008/02/11/a-custom-testrunner-to-scratch-an-itch/)的无耻插件，调整为 Ruby 1.9）：

fastfailrunner.rb：

```
require 'test/unit'

class FastFailRunner19 < MiniTest::Unit
  def _run args = []
    puts "fast fail runner" 
  end
end

~ 
```

example_test.rb：

```
require 'test/unit'

class ExampleTest < Test::Unit::TestCase
  def test_assert_equal
    assert_equal 1, 1
  end

  def test_lies
    assert false
  end

  def test_exceptions
    raise Exception, 'Beware the Jubjub bird, and shun the frumious Bandersnatch!'
  end

  def test_truth
    assert true
  end
end 
```

运行.rb：

```
require_relative 'fast_fail_runner'
require_relative 'example_test'

MiniTest::Unit.runner= FastFailRunner19.new 
```

如果你运行这个

```
 ruby run.rb 
```

将使用自定义的 FastFailRunner19，它什么都不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:28:12.210

您可以收集要延迟其执行的测试用例并将它们存储在一个数组中。之后，您将创建一个块执行代码。例如：

```
test_files = ['test/unit/first_test.rb'] #=> Testcases you want to run

test_block = Proc.new {spec_files.each {|f|load f} }  #=> block storing the actual execution of those tests. 
```

一旦您准备好调用这些测试用例，您只需执行`test_block.call`.

概括地说，当考虑推迟或延迟代码执行时，`closures`这是一个非常优雅和灵活的选择。

# xcode - 我可以对对象的属性使用 [NSArray containsObject:] 函数吗？

> ID：15337709
> 
> 赞同：1
> 
> 时间：2013-03-11T11:43:16.537
> 
> 标签：xcode, performance, comparison, nsarray

**背景资料：**

我编写了一个包含 2 个画廊的 iOS 应用程序：一个本地画廊和一个服务器画廊。当用户更新服务器图库并将其合并到他的本地图库时，应用程序应该只下载新图像。

`ImageEntity`为了最大限度地减少内存消耗，我保存图像并用具有以下属性的类的实例填充数组： ***fileName***、***filePath***和***votingStatus***。

我尝试使用以下逻辑来检查图像是否已经存在：

```
for (ImageEntity *imageEntity in self.serverImagesArray) {
  if (![self.localImagesArray containsObject:imageEntity]){
    [self.localImagesArray  addObject:imageEntity];
  }
} 
```

**但是因为每个实体都是一个单独的对象，所以它总是会被添加。**但是，每个实体都有一个唯一的***文件名***。

* * *

**问题：** 我能否以某种方式扩展该`[NSArray containsObject:]`函数以检查数组中的一个对象是否具有等于“someValue”的属性？（当我将 Cocoa-Bindings 与 ArrayController 结合使用时，我可以分配数组元素的属性——我想访问与此类似的属性）。

* * *

*我知道我可以使用将本地数组的每个实体与服务器数组上的每个元素进行比较*。**不过，我必须进行 O(n^2) 比较**，并且图库可能包含数百张图像。

**额外的问题：**我是否已经在没有意识到的情况下这样做了？有没有人有关于苹果实现这个功能的细节？是否有一些花哨的实现，或者他们只是在比较每个元素的数组上迭代？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:49:48.920

我这样做的方式是`valueForKey:`与`containsObject:`. 因此，在您的情况下，您应该收集数组的所有文件名，然后检查数组是否包含您需要的特定文件名：

```
NSArray * fileNames = [fileEntityObjects valueForKey:@"fileName"];
BOOL contains = [fileNames containsObject:@"someFilename.jpg"]; 
```

`fileName`如果是`fileEntityObjects`数组中每个对象的属性，这将起作用。

**更新**

是的，您也可以这样做`NSPredicate`：

```
NSPredicate * predicate = [NSPredicate predicateWithFormat:@"SELF.fileName = %@", "someFileName.jpg"];
NSArray * filteredArray = [fileEntityObjects filteredArrayUsingPredicate:predicate]; 
```

请注意，您将得到一个具有该文件名的对象数组，而不是布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:44:52.020

由于这个问题被标记为“性能”，我添加了另一个答案：

为了避免 n^2 比较，我们必须找到一种更快的方法来检测已经存在的图像。为此，我们使用一个可以非常快速地执行查找的集合：

```
NSMutableSet *localFileNames = [NSMutableSet set];
for (ImageEntity *imageEntity in self.localImagesArray)
    [localFileNames addObject:imageEntity.fileName]; 
```

然后我们像以前一样遍历服务器图像。前一个`containsObject:`被快速集查找取代：

```
for (ImageEntity *imageEntity in self.serverImagesArray) {
    if ([localFileNames member:imageEntity.fileName] == nil)
        [self.localImagesArray addObject:imageEntity];
} 
```

# html - 我的用户旧缓存文件会不会正确呈现我的新设计？

> ID：15337724
> 
> 赞同：1
> 
> 时间：2013-03-11T11:44:12.247
> 
> 标签：html, css, caching, browser

我说它是我的用户浏览器可能是错误的，但我在更新我的在线商店时有一个问题。

我最近重新设计了我目前正在完成的主页商店。

可通过[http://www.hot-water-cylinders.com/找到](http://www.hot-water-cylinders.com/)

基本上，我意识到通过一台已经访问过该网站并将其存储在缓存中的计算机，一切都不合适了，将图像文件链接到旧文件使用的文档中并基本上清除我的浏览器数据是唯一的方法固定布局，

我的问题是，我的回访者也必须处理这个问题，比如必须清除他们的缓存，是否有办法防止这种情况发生？

谢谢，

基伦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:46:47.107

这就是 HTTP 缓存的工作方式。

避免这种情况的最佳方法是使资源 URL:s 唯一。如果您手动执行所有这些操作，请尝试将新资源放入版本化文件夹（/2.0/css、/2.0/img 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-11T01:22:53.360

起初，是的，但浏览器缓存通常至少只有一天。如果您想阻止任何缓存，您需要在样式请求中添加一个版本，如下所示

```
 <link rel="stylesheet" href="path/to/my/css/mystyle.css?v=1"> 
```

该`v`参数与您的 css 版本相关，当您上传新样式版本时，您需要更改版本。

# c++ - OpenCV imencode pgm 没有编码正确的格式

> ID：15337725
> 
> 赞同：0
> 
> 时间：2013-03-11T11:44:22.927
> 
> 标签：c++, ios, opencv, image-formats

我正在尝试对 Mat CV_32FC1 图像进行编码以使用 base64 通过 Internet 发送，该过程有效，但 OpenCV 以错误的格式编码。例子：

```
vector<unsigned char> buffer;
vector<int> compression_params;
compression_params.push_back(CV_IMWRITE_PXM_BINARY);
compression_params.push_back(0);
cv::imencode(".pgm", desc, buffer, compression_params);
printf("%s", &buffer[0]); 
```

这会生成以下输出：

```
P2
64 15
255
0   0   0   0   1   0   0   0   0   1   0   0   0   0   0   0   1   0   0   0   0   0     0   0   0   0   
etc.. 
```

根据压缩参数和第一个参数（P2），它不应该被编码为二进制格式，它应该是 ASCII。[（来源）](http://en.wikipedia.org/wiki/Portable_graymap)

这本身不是问题，但是当我更改为时`compression_params.push_back(0)`，`compression_params.push_back(1)`我得到了这个输出（没有图像数据）：

```
P5
64 15
255 
```

我在 iOS 上使用 OpenCV 2.4.4，我该如何解决这个问题，或者如何在不丢失数据的情况下以好的方式发送 Mat？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T09:27:45.790

不知道您是否解决了问题，但我发现了问题，即使您使用的是我不熟悉的 iOS 版本，它也可能适用于您的情况：

[如何在 OpenCV 中捕获图像并以 pgm 格式保存？](https://stackoverflow.com/questions/3115529/how-do-i-capture-images-in-opencv-and-saving-in-pgm-format/23802333#23802333)

# sql - 通过在 SQL 中的多个列中选择最大值来选择列

> ID：15337728
> 
> 赞同：4
> 
> 时间：2013-03-11T11:44:25.513
> 
> 标签：sql, postgresql

想象一下下面的示例表：

```
time      name     value1 value2
12:00     Hans     2      4
12:30     Hans     2      4
13:00     Hans     3      5
14:00     Peter    4      4
15:00     Peter    4      4 
```

我想按最大时间戳和名称过滤。

意思是我想得到

```
13:00     Hans     3      5
15:00     Peter    4      4 
```

使用`select max(time),name,value1,value2 from table group by name` 不起作用。它告诉我在 value1 和 value2 上使用聚合函数或分组。

如果我按名称、value1 和 value2 进行分组，那么我会得到以下结果，但由于两行 Hans 的 value1 和 value2 不同：

```
12:30     Hans     2      4
13:00     Hans     3      5
15:00     Peter    4      4 
```

解决办法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:48:12.533

您可以使用子查询来获取`max(time)`for each `name`，然后将其连接回您的表以获得最终结果：

```
select t1.time,
  t1.name,
  t1.value1,
  t1.value2
from yourtable t1
inner join
(
  select max(time) MaxTime, name
  from yourtable
  group by name
) t2
  on t1.time = t2.maxtime
  and t1.name = t2.name 
```

根据您使用的数据库，如果您可以应用像`row_number()`or之类的窗口函数`rank()`，那么您的查询将类似于以下内容：

```
select time, name, value1, value2
from
(
  select time, name, value1, value2,
    rank() over(partition by name order by time desc) rn
  from yourtable
) src
where rn = 1 
```

请参阅带有两个查询[的演示的 SQL Fiddle](http://www.sqlfiddle.com/#!1/c06e8/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:30:01.563

有了`distinct on`它就很简单了。[SQL小提琴](http://www.sqlfiddle.com/#!1/25a69/2)

```
select distinct on (name)
    "time", name, value1, value2
from t
order by t.name, t."time" desc 
```

# python - Python - 从一行中的 URL 解析特定值

> ID：15337731
> 
> 赞同：3
> 
> 时间：2013-03-11T11:44:30.913
> 
> 标签：python, regex, parsing

我已经设法让我的脚本根据行中的内容打印出一行文本：

```
if "cvename" in line:       
    CVE = list_of_line[4:5]     
    print "The CVE number is ", ' '.join(CVE)       
    print " "
    CVEfile.write("CVE-" + str(CVE) + '\n') 
```

打印出来：

```
['http://cve.mitre.org/cgi-bin/cvename.cgi?name=1999-0016][Xref'] 
```

但我想要的只是值'1999-0016'

我假设可以使用正则表达式来执行此操作，但我没有太多使用它们的经验。我注意到的是，我要提取的值总是以年份开头，因为它是 CVE 编号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:52:10.890

在使用正则表达式之前，请始终尝试使用更具体的方法。你需要解析一个网址吗？使用`urlparse`.

```
import urlparse

u = 'http://cve.mitre.org/cgi-bin/cvename.cgi?name=1999-0016'

q = urlparse.urlparse(u).query
values = urlparse.parse_qs(q).get('name')
if values is not None:
    print values[0]
    # prints '1999-0016' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:47:20.973

在这种情况下，您可以使用正则表达式，是的：

```
re.compile(r'name=(\d{4}-\d{4})') 
```

`name=`将匹配以两个 4 位数字开头的任何文本。分组允许您提取该数字：

```
>>> import re
>>> cve_param = re.compile(r'name=(\d{4}-\d{4})')
>>> cve_param.search('http://cve.mitre.org/cgi-bin/cvename.cgi?name=1999-0016][Xref').group(1)
'1999-0016' 
```

我确实注意到*通常*CVE 编号以文本为前缀`CVE-`；匹配两种形式的正则表达式是：

```
re.compile(r'name=(?:CVE-)?(\d{4}-\d{4})') 
```

使用正则表达式可以让您从全文中挑选出这样的 URL。另一方面，如果您使用的是适当的 HTML 解析器，我建议您改为解析组成部分的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:51:58.307

您需要进一步修复解析算法，但只获取值部分：

```
>>> from urllib2 import urlparse
>>> urlparse.parse_qs(urlparse.urlparse(s).query)['name'][0]
'1999-0016][Xref' 
```

修复此位`CVE = list_of_line[4:5]`后，上述内容将为您提供预期的结果。

# excel - “Private Sub Worksheet_Change(ByVal Target As Range)” - 需要帮助回复：范围

> ID：15337734
> 
> 赞同：1
> 
> 时间：2013-03-11T11:44:34.187
> 
> 标签：excel, vba

`Private Sub Worksheet_Change(ByVal Target As Range)`

我希望“借用”这段代码，但不确定为范围值放置什么。为什么我希望将它用于一个充满 vlookup 的工作簿的数据页面。

在此页面上，A 到 M 填充了数据并且偶尔会更新，N 到 AB 具有添加两个数据单元格或合并其中的信息的公式。RangeSource 和 Range Destination 似乎是我可能需要调整的地方-帮助？

先感谢您！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T12:26:06.363

我想您是在问如何定义更改时应触发此宏的单元格范围？如果是这样，请使用：

```
If Not Intersect(Target, Range("A:M")) Is Nothing Then
    'Your Code Here
End If 
```

这将检查更改的单元格（目标）是否在定义的范围内（A 列到 M 列），如果是，则运行您的代码。

# android - 安卓多系统安装

> ID：15337736
> 
> 赞同：0
> 
> 时间：2013-03-11T11:44:41.237
> 
> 标签：android, sdk

我和我的团队正计划开发一个应用程序。我已经下载并安装了 eclipse juno、sdk 和所需的插件/更新。我花了很多时间来完成所有这些（下载速度 - 45 到 60kbps）。

同样的操作也需要在其他（我的团队）系统中执行。我可以只复制 C 盘（sdk 和工作区）中的所有文件并将其粘贴到其他 C 盘以节省时间吗？你认为它会起作用吗？如果您的回答是否定的，他们还有其他方法吗？

操作系统：win7 64位，有些有32位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:14:00.690

您可以在任何机器上使用相同的 sdk，也可以在另一台机器上使用相同的 eclipse，但您需要相同的机器（如果您的 eclipse 是 64 位，它不会在 32 位机器上工作）。所以你需要为 32 位操作系统下载 32 位 eclipse，为 64 位操作系统下载 64 位 eclipse。如果您已经下载了 android 插件的 zip 文件，那么您可以对任何 Eclipse 使用相同的插件。

如有任何疑问，请点击[此](http://developer.android.com/sdk/installing/installing-adt.html)链接

# ios - 如何使用 OpenURL 集成 Pinterest？

> ID：15337744
> 
> 赞同：0
> 
> 时间：2013-03-11T11:45:08.487
> 
> 标签：ios, social-networking, pinterest

我曾尝试使用 ios OpenURL 方案调用 pinterest 应用程序，但**canOpenURL**方法总是返回 false。我需要帮助才能让它工作，因为我没有找到谷歌的任何解决方案。我不想使用 UIWebView 让它工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:37:44.803

这是一个[链接](http://www.varshylmobile.com/pinterest-framework-for-ios)，可以将图片固定到 pinterest。这是一个运行良好的框架。但是您不能从某人的 pin board 中重新定位某些内容。如果您搜索 SO，您还应该找到其他一些答案。人们试图克服目前没有 API 的事实。希望这能给你一个快速的开始。

# jquery - 在提交 jquery 时添加适当的错误消息

> ID：15337745
> 
> 赞同：0
> 
> 时间：2013-03-11T11:45:12.013
> 
> 标签：jquery, forms, error-handling, appendto

我有一个表单，在提交时我需要使用 jQuery 在客户端添加一条错误消息。

表单 HTML（由其他人）是 -

```
<div class="data">
<h3>Datos de acceso</h3>
<p class="email-login">
    <label for="email-login">Su correo electrónico</label>
    <input id="email-login" name="email-login" type="text" value="Su correo electrónico">
</p>
<p class="password-login">
    <label for="password-login">Elija una contraseña</label>
    <input id="password-login" name="password-login" type="text" value="Elija una contraseña">
</p>
<h3>Datos personales</h3>
<p>
    <label for="name">Nombre y apellidos</label>
    <input id="name" name="name" type="text" value="Nombre y apellidos">
</p>
<div class="data1">
    <p class="gender">
        <span class="female">
            <label for="gender-female">Mujer</label>
            <input id="gender-female" name="gender-female" type="radio" value="Mujer">
        </span>
        <span class="male">
            <label for="gender-male">Hombre</label>
            <input id="gender-male" name="gender-male" type="radio" value="Hombre">
        </span>
    </p>
    <p class="age select">
        <select>
            <option value="" selected="selected">Edad</option>
        </select>
    </p>
</div>
<div class="data2">
    <p class="country select">
        <select></select>
    </p>
    <p class="postal">
        <label for="postalcode">post code</label>
        <input id="postalcode" name="postalcode" type="text" value="post code">
    </p>
</div>
<div class="terms">
    <input type="checkbox" name="terms" value="Acepto las condiciones">
    <p class="checkbox"></p>
    <p>words<a href="#">?</a></p>
</div>
<p class="submit">
    <input class="button" type="submit" value="Conectar">
</p> 
```

我目前有这个 jQuery（它不工作）

```
$(document).ready(function() {
    $('input').each(function() {
        var $this = $(this);
        if(!$this.val()) $this.addClass('error');
    });
}); 
```

客户端现在需要为每个表单元素提供不同的错误消息。因此，将姓名、性别、邮政编码等错误附加到表单中。那可能吗？我在我的 jQuery 中做错了什么导致它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:49:03.240

一个好的起点是将 jQuery 的[提交方法](http://api.jquery.com/submit/)应用于您当前的 jquery 逻辑。他们还在同一个 API 页面上提供了一个输入验证示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:50:10.977

```
$(document).ready(function() {
   var count=0;
    $('input').each(function() {
       count++;
      var myvar =error+count;
        var $this = $(this);
        if(!$this.val()) $this.addClass(myvar );
    });
}); 
```

并为这些错误消息编写不同的分类

或以其他方式使用 eroor 消息构建数组，**其名称为类名，** 如 var

```
 myarray =new arrau();
  myarray .push(eroorthatwahtuwantname);

$(document).ready(function() {

    $('input').each(function() {

        var $this = $(this);
             var req=this.name();
        if(!$this.val()) $this.addClass(getNmae(req,myarray ) );
    });

function getNmae (str, strArray) {
    for (var j=0; j<strArray.length; j++) {
        if (strArray[j].match(str)) return j;
    }
    return -1;
} 
```

# mysql - Mysql - 获取每个家庭的最新历史记录

> ID：15337749
> 
> 赞同：0
> 
> 时间：2013-03-11T11:45:29.007
> 
> 标签：mysql

我需要为数据库中的每个家庭获取最新的历史项目（来自某个类别 - 1422）。我看到了几个例子，并来到了这个查询：

```
SELECT *, MAX(created_at) 
FROM family_histories
WHERE family_history_cat_id = 1422
GROUP BY family_id 
```

好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:47:37.353

您也可以使用 INNER JOIN 获取每个组的 MAX id

```
SELECT
  fh.*
FROM family_histories
  INNER JOIN (SELECT
        family_history_cat_id,
        MAX(created_at)
          FROM family_histories
          GROUP BY family_id) AS l
    ON l.family_history_cat_id = fh.family_history_cat_id
WHERE fh.family_history_cat_id = 1422 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:48:08.093

尝试

```
SELECT *
FROM family_histories
WHERE family_history_cat_id = 1422
GROUP BY family_id
ORDER BY created_at DESC
LIMIT 1 
```

# java - 锚在 IE7 中无法通过重定向（spring-mvc，jsp）工作

> ID：15337756
> 
> 赞同：0
> 
> 时间：2013-03-11T11:45:38.420
> 
> 标签：java, jsp, spring-mvc, internet-explorer-7, anchor

因此，对于我正在做的这个项目，我有一个通过可点击按钮生成内容的页面。该按钮将表单发布到我的控制器，并且控制器作用于已单击的按钮。为了显示更改的内容，将发生重定向（在会话中形成），其中包含一个锚点。然后，一小段 javascript 将转到链接中的锚点（例如 website/add/picture#123）。这在除了 Internet Explorer 7 之外的几乎所有浏览器中都可以正常工作。我发现这与文件类型的输入字段有关。因为如果我删除输入字段，那么即使 IE7 也会很好地滚动到锚点。

有谁知道为什么会发生这种行为？

如果不清楚，请告诉我，我会提供更多详细信息..

非常感谢，戴维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:30:44.217

所以..我没有设法解决输入类型=文件错误..我想这只是一个 IE7 错误。我做了一个工作，将输入字段放在弹出窗口上。很多开销，但现在工作得很好

# jbehave - 如何运行一个 jbehave 场景是多个浏览器

> ID：15337757
> 
> 赞同：1
> 
> 时间：2013-03-11T11:45:39.060
> 
> 标签：jbehave

如何在 parrell 中使用多个浏览器运行 jbehave 场景？我将浏览器名称作为运行时参数从竹子中传递，并将其添加到我的代码中的 SauceWebDriverProvider 中。我想用多个浏览器并行执行这个场景。请帮助我找到解决方案。谢谢

我有这样的场景：

场景：+登录：用户登录到我的应用程序

鉴于我使用有效密码登录 myappliation 然后确保用户能够登录 myapplication

示例：|用户名|密码| |李|密码|

# c# - 在数据库的 mvc 4 视图中显示有限的数据

> ID：15337762
> 
> 赞同：0
> 
> 时间：2013-03-11T11:45:54.800
> 
> 标签：c#, asp.net-mvc-4, jquery-pagination

我正在开发一个在线图书购物网站，在这个网站中，我在从数据库动态生成的视图上显示图书及其描述。但我想每页显示 10 本书，并在页面底部显示一个链接以转到下一页以查看接下来的 10 本书。在这里，我附上了我的代码，它从数据库中获取所有数据并在一个页面中一次显示所有书籍。我如何在此实现分页功能..

```
@{
    ViewBag.Title = "Contact";
}
@model IEnumerable<BusinessObject.Images>

<link href="../../css/style.css" rel="stylesheet" type="text/css" />
<div id="content">
<!-- Products -->
            <div class="products">
                <h3>Featured Products</h3>
                <ul>
@foreach (var item in Model)
{

                    <li>
                        <div class="product">
                        @Html.ActionLink(item.ImageName, "Details","Home", new { id = item.ImageId }, null) 

                                <span class="holder">
                                    <img src="@item.ImagePath" alt="">
                                    <span class="@item.ImageName" >@item.ImageName</span>
                                    <span class="author">by John Smith</span>
                                    <span class="description">Maecenas vehicula ante eu enim pharetra<br />scelerisque dignissim <br />sollicitudin nisi</span>
                                </span>
                            </a>
                            <a href="#" class="buy-btn">BUY NOW <span class="price"><span class="low">$</span>22<span class="high">00</span></span></a>
                        </div>
                    </li>}
                    </ul>
            </div>
            <div class="cl">&nbsp;</div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:49:44.350

您只能从数据库本身请求所需数量的记录 - 分页

检查链接

[http://www.mssqltips.com/sqlservertip/1699/sql-server-stored-procedures-to-page-large-tables-or-queries/](http://www.mssqltips.com/sqlservertip/1699/sql-server-stored-procedures-to-page-large-tables-or-queries/)

# javascript - 带有日期时间选择器的 KendoGrid 过滤器无法正常工作？

> ID：15337764
> 
> 赞同：1
> 
> 时间：2013-03-11T11:46:02.570
> 
> 标签：javascript, visual-studio-2010, kendo-ui

这里的问题是根据日期时间选择器过滤网格数据（服务数据）。我无法提供服务，所以我在这里使用硬编码数据，但我的要求是根据日期和时间过滤服务数据。这是 jsbin [http://jsbin.com/exakic/41/edit](http://jsbin.com/exakic/41/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:27:02.097

您将`parse`函数放在`grid`定义中，而不是放在`datasource`. 您还需要提供与收到的格式相匹配的格式（“yyyy-MM-dd HH:mm:ss”）。试试这个：

```
dataSource: {
    data  : [
        { FirstName: "Joe", LastName: "Smith", dob: "2013-02-18 19:54:13"},
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-18 20:55:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-18 21:56:15" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-18 22:57:16" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-19 20:55:20" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-24 20:56:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-26 20:57:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-02-28 20:42:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-03-22 11:55:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-03-27 20:55:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-04-18 20:55:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-04-23 20:55:14" },
        { FirstName: "Jane", LastName: "Smith", dob: "2013-04-24 20:55:14" }
    ],
    schema: {
        data: function (data) {
            $.each(data, function (i, val) {
                val.dob = kendo.parseDate(val.dob, "yyyy-MM-dd HH:mm:ss");
            });
            return data;
        }
    } 
```

我还会做一些额外的改变：

*   在您的文件中包含`format`定义`DateTimePickers`以匹配以下文件中的格式`Grid`：

代码：

```
$("#datetimepicker").kendoDateTimePicker({
    showSecond: true,
    dateFormat: "dd-MM-yy",
    timeFormat: "HH:mm:ss",
    format    : "dd-MM-yy HH:mm:ss"
});

$("#datetimepicker1").kendoDateTimePicker({
    showSecond: true,
    dateFormat: "dd-MM-yy",
    timeFormat: "HH:mm:ss",
    format    : "dd-MM-yy HH:mm:ss"
}); 
```

*   `blur`逐个更改事件`change`以使其仅在输入字段的值实际更改时才被触发。

代码：

```
$("#datetimepicker, #datetimepicker1").on("change", function () {
    var mindate = $('#datetimepicker').data("kendoDateTimePicker").value();
    var maxdate = $('#datetimepicker1').data("kendoDateTimePicker").value();
    var condition = {
        logic  : "and",
        filters: [
        ]
    };
    if (mindate !== null) {
        condition.filters.push({ field: "dob", operator: "ge", value: mindate });
    }
    if (maxdate !== null) {
        condition.filters.push({ field: "dob", operator: "le", value: maxdate });
    }
    result.dataSource.filter(condition);
}); 
```

# iphone - iPhone：XMPP Jabber 客户端错误

> ID：15337768
> 
> 赞同：2
> 
> 时间：2013-03-11T11:46:21.677
> 
> 标签：iphone, ios, xcode, xmpp, chat

我想使用 XMPP 开发聊天应用程序。我使用以下网址进行了研究：[building-a-jabber-client-for-ios](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)

完成后我成功整合。但是此应用程序因以下屏幕截图而崩溃。请帮助我。

[屏幕截图](http://i.stack.imgur.com/Bn4bd.png)

# javascript - 阻止链接执行它的 href 路径

> ID：15337771
> 
> 赞同：0
> 
> 时间：2013-03-11T11:46:23.783
> 
> 标签：javascript, jquery

嗨，我试图阻止链接执行它的默认操作，但我似乎没有运气。这是我的代码：

```
 $("a.delete").on("click", function (e) {
    var container = $("#lightbox-background");
    var lightbox = $("#lightbox");

    lightbox.init("Are you sure you want to delete this book?")
    e.preventDefault();       
});
var lightbox = {
    init : function(actionString){
        $("<div id='lightbox-background'></div>").appendTo("body");
        $("<div id='lightbox'></div>").appendTo("body");
        $("<p></p>").appendTo("#lightbox");
        $("<a href='#' id='ok'>OK</a>").appendTo("#lightbox");
        $("<a href='#' id='cancel'>Cancel</a>").appendTo("#lightbox");
    }
} 
```

我希望如果我使用 e.preventDefault 它会阻止链接转到它的 href 路径，但它不起作用。我做错了什么吗？

**编辑：**我刚刚注意到，如果我从单击事件处理程序中删除对灯箱对象的调用，则 e.preventDefault() 有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:00:49.907

您的问题出在这一行：

```
var lightbox = $("#lightbox"); 
```

在 onclick 回调函数中隐藏变量名称与单击回调外部定义的全局灯箱对象的名称相同。上面提到的局部变量只是覆盖该函数范围内的全局变量。基本上，您正在调用`init`：`$("#lightbox")`

```
$("#lightbox").init("....") 
```

不知道你在做什么，但尝试像这样更新你的代码：

```
$("a.delete").on("click", function (e) {
    var container = $("#lightbox-background");
    var lightboxElement = $("#lightbox");

    lightbox.init("Are you sure you want to delete this book?")
    e.preventDefault();       
}); 
```

此外，调用

```
var container = $("#lightbox-background");
var lightboxElement = $("#lightbox"); 
```

第一次，您将获得一组空元素，因为此时未执行 init 方法，并且尚未创建您要查找的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:48:43.380

试试看是否有效

```
$("a.delete").on("click", function (e) {
    var container = $("#lightbox-background");
    var lightbox = $("#lightbox");

    lightbox.init("Are you sure you want to delete this book?")
    e.preventDefault();   
    return false;    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:50:30.003

您是否在声明的变量之上尝试过它：

```
$("a.delete").on("click", function (e) {
   e.preventDefault();        
   var container = $("#lightbox-background");
   var lightbox = $("#lightbox");

   lightbox.init("Are you sure you want to delete this book?")
}); 
```

刚刚注意到您`';'`在这里错过了关闭：

```
var lightbox = {
  init : function(actionString){
     $("<div id='lightbox-background'></div>").appendTo("body");
     $("<div id='lightbox'></div>").appendTo("body");
     $("<p></p>").appendTo("#lightbox");
     $("<a href='#' id='ok'>OK</a>").appendTo("#lightbox");
     $("<a href='#' id='cancel'>Cancel</a>").appendTo("#lightbox");
  }
}; //<----this one 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:02:23.663

如下链接示例：

```
<a href="google.com"> google </a> 
```

将 javascript 与 jQuery 一起使用

```
$("a").click(function(e){e.preventDefault(); return false;}); 
```

这不会重定向页面上的任何链接:)

或者在特定情况下它会像

```
$("a.delete").click(function(e){e.preventDefault(); return false;}); 
```

注意：添加`e.preventDefault();`以防止事件触发。

# mysql - SQL - 计算两行之间的差异并放入另一列

> ID：15337772
> 
> 赞同：1
> 
> 时间：2013-03-11T11:46:31.083
> 
> 标签：mysql, sql

我有一个 MySQL 表，其中包含一个日期、一个来源、一些例如 facebook 粉丝和第三列，其中应该包含对前一天的更改。

该表如下所示：

```
Date        |  Source  | fans | new fans
2013-02-02  | Facebook | 100  | -
2013-02-02  | Twitter  | 60   | -
2013-02-03  | Facebook | 120  | -
2013-02-03  | Twitter  | 62   | -
2013-02-04  | Twitter  | 65   | -
2013-02-04  | Facebook | 130  | -
2013-02-05  | Facebook | 145  | -
2013-02-05  | Twitter  | 70   | - 
```

和

sql查询应该把它变成这样：

```
Date        |  Source  | fans | new fans
2013-02-02  | Facebook | 100  | - 
2013-02-02  | Twitter  | 60   | - 
2013-02-03  | Facebook | 120  | 20
2013-02-03  | Twitter  | 62   | 2 
2013-02-04  | Twitter  | 65   | 3 
2013-02-04  | Facebook | 130  | 10
2013-02-05  | Facebook | 145  | 15
2013-02-05  | Twitter  | 70   | 5 
```

如何计算来源两天之间的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:59:26.093

您可以使用`UPDATE JOIN`; `a`并且`b`是计算两者之间差异的两行，并且`c`被 LEFT 加入以确保`a`and之间没有行`b`。

```
UPDATE TableA AS a
JOIN TableA b 
  ON a.`Source` = b.`Source` AND a.`Date` > b.`Date`
LEFT JOIN TableA c
  ON a.`Source` = c.`Source` AND a.`Date` > c.`Date` AND c.`Date` > b.`Date`
SET a.`new fans` = a.`fans` - b.`fans`
WHERE c.`Date` IS NULL 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/11a69/2)

请注意，这将*更新您的表中的数据*，并且您应该在运行 Internet 上随机人员的 SQL 更新之前始终备份 :)

# javascript - 在 javascript 中使用正则表达式增量数字

> ID：15337774
> 
> 赞同：0
> 
> 时间：2013-03-11T11:46:32.367
> 
> 标签：javascript

我试图通过它们的 id 隐藏元素：

```
document.getElementById('Table1').style.display = 'none'; 
```

但是有很多 div 像 Table1，Table2，Table3 ......

那么在这种情况下如何使用正则表达式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:49:32.343

将类设置为所有这些元素。它是为这种情况而发明的。

*HTML：*

```
<div id="Table1" class="myTables"></div>
<div id="Table2" class="myTables"></div>
<div id="Table3" class="myTables"></div> 
```

*JavaScript：*

```
var elements = document.getElementsByClassName("myTables");
for (var i = 0, len = elements.length; i < len; i++) {
    elements[i].style.display = "none";
} 
```

* * *

**更新：**如果设置类不适用于您的情况，您始终可以使用带有以选择器开头的属性的`querySelectorAll`现代*方法*：

```
var elements = document.querySelectorAll("div[id^='Table']");
for (var i = 0, len = elements.length; i < len; i++) {
    elements[i].style.display = "none";
} 
```

**演示：http:** [//jsfiddle.net/L2de8/](http://jsfiddle.net/L2de8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:59:03.113

正则表达式在此示例中不起作用。

要么在所有元素上使用通用类名，要么，如果您无法更改 HTML，您可以使用[Selectors API](http://www.w3.org/TR/2013/REC-selectors-api-20130221/)来选择您需要隐藏的元素。

采用

```
var allElemsWithIdStartingFromTable =  document.querySelectorAll('[id^="Table"]'); 
```

选择 ID 以“Table”开头的所有元素，因此它是 Table1、Table2，还有 TableOfProducts，请记住这一点。

然后你需要遍历它并检查 id 属性是否匹配`/^Table\d+$/`正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:47:51.393

例如..如果您将 myTables 作为 div 的类名 ..将其用于 lenght ..

```
var elements = document.getElementsByClassName("myTables");//to know the length only..
        for(var i=0;i<elements.length;i++)
        {
        document.getElementById('Table'+i).style.display = 'none';
        } 
```

使用循环概念..这是一个例子..

# vb.net - 无法使用 oracledataadpter 填充数据集

> ID：15337775
> 
> 赞同：3
> 
> 时间：2013-03-11T11:46:32.690
> 
> 标签：vb.net, oracle, ado.net

我面临一个非常奇怪的问题，我正在使用以下代码，但 有时**ds没有填充****ds**中有数据但并非总是如此，我已经更改了**连接池**并重新启动了**iis**，但完全没有运气，我我无法找到问题所在，请帮帮我。我在**TOAD**中运行相同的查询及其给出的结果，如果有任何不一致的事情，我也提交了事务。

```
 Dim command As New OracleCommand
        Dim ds As New DataSet
        Try
            Using connection As New OracleConnection
(ConfigurationManager.ConnectionStrings("CA").ConnectionString.ToString())
                connection.Open()
                command.Connection = connection
                command.CommandText = "SELECT w.portfolio, w.appl_group,
tm.trng_title, p.tt_program_title," & _
                                     " p.created_date,
p.tt_target_completion_date, p.tt_prog_status," & _
                                     " w.emp_id, w.first_name || ' ' ||
w.last_name, ('Y') training_done_flag," & _
                                     "         t.actual_completion_date,
p.created_by, w.people_manager, " & _
                                     "        w.project_manager, w.flag" &
_
                                    " FROM tt_training_done_records t," & _
                                     "    wsr_employee w, " & _
                                     "   tt_training_master  tm, " & _
                                    "  tt_newprogram p" & _
                                    " WHERE(w.emp_id = t.employee_id)" & _
                                    " AND t.training_info_id = tm.trng_id"
& _
                                    " AND p.tt_program_id(+) =
t.program_id" & _
                                    " AND tm.trng_id IN ( 'TT_009' ) " & _
                                    " AND t.actual_completion_date BETWEEN
TO_DATE('11-Mar-2009')  AND TO_DATE('11-Mar-2013') " & _
                                    " "

                Dim adpt As New OracleDataAdapter(command)
                adpt.AcceptChangesDuringFill = False
                adpt.Fill(ds)
                connection.Close()
            End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:12:03.460

不要依赖将字符串转换为日期的默认行为。使用日期文字或提供格式字符串参数。这引入了对您的 .NET 代码不应依赖的 NLS 环境设置的依赖。

代替`TO_DATE('11-Mar-2013')`

尝试`date '2013-03-11'`或`TO_DATE('11-Mar-2013'), 'DD-Mon-YYYY')`

# r - 在 R 中用 LOESS 拟合一条线

> ID：15337777
> 
> 赞同：23
> 
> 时间：2013-03-11T09:39:50.873
> 
> 标签：r, loess

我有一个数据集，里面有一些点，想在上面画一条线。我用这个`loess`功能试了一下。不幸的是，我得到了非常奇怪的结果。见下图。我希望一条线更多地通过点和整个情节。我怎样才能做到这一点？ ![阴谋](../Images/3747c4b6002e8ced1f62c5c3d34864a7.png)

如何重现它：

[从https://www.dropbox.com/s/ud32tbptyvjsnp4/data.R?dl=1](https://www.dropbox.com/s/ud32tbptyvjsnp4/data.R?dl=1)下载数据集（只有 2 kb）并使用以下代码：

```
load(url('https://www.dropbox.com/s/ud32tbptyvjsnp4/data.R?dl=1'))
lw1 = loess(y ~ x,data=data)
plot(y ~ x, data=data,pch=19,cex=0.1)
lines(data$y,lw1$fitted,col="blue",lwd=3) 
```

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-11T10:00:37.493

您已经绘制了拟合值反对`y`而不是反对`x`。此外，您需要在绘制线之前对 x 值进行排序。试试这个：

```
lw1 <- loess(y ~ x,data=data)
plot(y ~ x, data=data,pch=19,cex=0.1)
j <- order(data$x)
lines(data$x[j],lw1$fitted[j],col="red",lwd=3) 
```

![在此处输入图像描述](../Images/f1188706dee6b434b33e447c6a62321f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-26T20:04:17.903

不幸的是，数据不再可用，但是如何拟合非参数线（局部加权散点图平滑或如果需要，也可以只是 LOESS）的更简单方法是使用以下代码：

```
scatter.smooth(y ~ x, span = 2/3, degree = 2) 
```

请注意，您可以使用参数`span`并`degree`获得任意平滑度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-07T20:58:58.347

可能为时已晚，但您可以选择 ggplot（和 dplyr）。首先，如果您只想在点上绘制一条黄土线，您可以尝试：

```
library(ggplot2)
load(url("https://www.dropbox.com/s/ud32tbptyvjsnp4/data.R?dl=1"))
ggplot(data, aes(x, y)) + 
geom_point() +
geom_smooth(method = "loess", se = FALSE) 
```

![<code>ggplot::geom_smooth()</code> 的黄土线](../Images/e19401c11f20c7b55b2e5c04315a71c0.png)

其他方式是通过`predict()`函数使用黄土拟合。例如，我使用 dplyr 函数将预测添加到名为的新列`"loess"`：

```
 library(dplyr)
  data %>%
  mutate(loess = predict(loess(y ~ x, data = data))) %>%
  ggplot(aes(x, y)) +
  geom_point(color = "grey50") +
  geom_line(aes(y = loess)) 
```

![<code>predict()</code> 和 <code>geom_line()</code> 的黄土线](../Images/65d37fe4008feb1c0fcfd076805a9ce9.png)

**更新**：添加了代码行以加载提供的示例数据 更新2 ：更正函数名称与@phi**注释**`geom_smoot()`

# java - 在 Android 中创建新类的实例

> ID：15337780
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:46:43.913
> 
> 标签：java, android, xml, android-intent

我是 Android 编程新手，但对 Java 有一点经验。但是，我正在创建一个 Android 应用程序，当用户单击一个按钮时，我希望实例化一个不同的类......这是我的`MainActivity.java`

```
private void setButtonClickListener() {
    Button budgetPeriodButton = (Button)findViewById(R.id.budgetPeriodButton);
    Button incomingsButton = (Button)findViewById(R.id.incomingsButton);
    Button outgoingsButton = (Button)findViewById(R.id.outgoingsButton);
    Button resultsButton = (Button)findViewById(R.id.resultsButton);
    budgetPeriodButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            BudgetPeriod bp = new BudgetPeriod();
            bp.changeUI();
          } 
```

这是 BudgetPeriod 类

```
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.ImageView;

public class BudgetPeriod extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_budget);
        super.onCreate(savedInstanceState);
        changeUI();
    }

    public void changeUI() {
        ImageView imageView = (ImageView) findViewById(R.id.budget_icon);
        Drawable newBudgetImage;
        newBudgetImage = getResources().getDrawable(R.drawable.budget_period);
        imageView.setImageDrawable(newBudgetImage);
    }
} 
```

如果用户单击该按钮，则模拟器上的错误消息会显示“不幸的是，此应用程序必须关闭”

关于我做错了什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:48:46.640

首先，**你不能**像这样创建一个Activity的实例，并调用它的方法。就像简单的 Java 类。因为Android Activity 有自己的调用方法的生命周期。

您必须使用 Button 中的 Intent启动 Activity **BudgetPeriod**`onClick()`。

改变你的方法，比如，

```
budgetPeriodButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
          Intent intent = new Intent(v.getContext(), BudgetPeriod.class);
          startActivity(intent)
} 
```

**并在AndroidManifest.xml**文件 中注册以下**BudgetPeriod** Activity 。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:48:54.207

像这样开始活动。

```
budgetPeriodButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
       Intent intent = new Intent(v.getContext(), BudgetPeriod.class);
       startActivity(intent);
    }
}); 
```

并确保您在 AndroidManifest.xml 中声明了活动

```
<activity name=".BudgetPeriod" android:name="Budget" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:57:07.347

android 中的活动不会通过创建这样的实例开始：

您需要使用 Intents 来启动如下活动

```
budgetPeriodButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
          Intent intent = new Intent(v.getContext(), BudgetPeriod.class);
          startActivity(intent);

   } 
```

并且您需要在 manifest.xml 文件中注册该活动，例如：

```
 <activity
        android:name=".BudgetPeriod"
    /> 
```

您可以通过以下链接明确意图： [http :](http://www.vogella.com/articles/AndroidIntent/article.html) [//www.vogella.com/articles/AndroidIntent/article.html http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)**

# c# - 匹配 HTML id 的正则表达式

> ID：15337783
> 
> 赞同：0
> 
> 时间：2013-03-11T11:46:54.413
> 
> 标签：c#, javascript, html, regex

嗨，我需要一些帮助来验证 html id，但以下内容不是 100% 正确的

这就是我所拥有的 `[A-Za-z][-A-Za-z0-9_:.]*`

我可能的 html id 的示例

```
test-1

t3__-6 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:48:32.313

试试这个会起作用。它将验证 ID/NAME 令牌。

```
 ^[A-Za-z][A-Za-z0-9_:\.-]* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T11:49:36.780

如果您说的是 HTML5 id，那么要求是

> 该值在元素的主子树中的所有 ID 中必须是唯一的，并且必须包含至少一个字符。该值不得包含任何空格字符。

这给出了这个正则表达式：

```
^[\S]+$ 
```

如果您说的是 HTML4（不明白为什么但很好），那么我猜它是重复的。请参阅[允许的 HTML 4.01 id 值正则表达式](https://stackoverflow.com/questions/14664860/allowed-html-4-01-id-values-regex)

# php - 在 md5 上使用 crc32 对 memcached 键进行哈希处理

> ID：15337790
> 
> 赞同：1
> 
> 时间：2013-03-11T11:47:11.883
> 
> 标签：php, hash, memcached, md5, crc32

我们目前使用 MD5 对要在 memcached 中查找的键进行哈希处理。

一个基本的例子是：

```
$sql = "SELECT * FROM articles WHERE id = 1";
$key = md5($sql);

if (!$results = $memcache->get($key)) {
    $results = $db->query($sql);
    $memcache->set($key, $results);
} 
```

密钥大小都是 32 字节，因为它使用 MD5 对密钥进行哈希处理。

我们正在考虑使用 crc32 来散列密钥以节省内存，例如：

```
$key = hash('crc32', $sql); 
```

这会生成一个只有 8 个字节的密钥。

这是将 MD5 替换为密钥哈希的足够好的解决方案吗？与键的潜在碰撞是否增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:09:29.150

阅读[http://bretm.home.comcast.net/~bretm/hash/8.html（TL；DR：“CRC32](http://bretm.home.comcast.net/~bretm/hash/8.html)从未用于哈希表。确实没有充分的理由将其用于此目的，并且我建议您避免这样做”）。

您是否有那么多独特的查询需要切换到 MD5 之外的其他查询？如果是这样，请考虑除 CRC32 之外更合适的东西，例如[MurmurHash](https://code.google.com/p/smhasher/)或[CityHash](https://code.google.com/p/cityhash/)。

# drupal - 在 drupal 节点中插入文本文件内容

> ID：15337792
> 
> 赞同：1
> 
> 时间：2013-03-11T11:47:13.140
> 
> 标签：drupal

我怎么能做这样的事情：

```
drupal node content 1
[[[include /files/part2.txt]]]
drupal node content 3 
```

并获取扩展文件 part1.txt 内容的节点。

*为什么我需要这个：*

我经常有一些 GIT 存储库，必须在我的网站上提供。最好的办法是从内部描述该存储库......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:08:58.353

您可以将 PHP 过滤器与以下代码一起使用：

`<?php echo file_get_contents("/path/to/file"); ?>"`

# extjs - 在 Sencha Touch 中处理不同分辨率触控设备的图像

> ID：15337795
> 
> 赞同：4
> 
> 时间：2013-03-11T11:47:16.800
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-architect

我打算将 Sencha Touch 2.x 用于我的网站移动（轻量级）视图。

我是 Sencha 开发的新手。我非常了解 HTML 5。在继续开发之前，我想知道几件事。

1.  Sencha 如何管理图像。因为我计划使用不同分辨率的触摸设备（即 iphone4s、iphone 5、iPad、Android 和 Blackberry 10）。我知道 HTML 5 中使用的媒体查询。我们是否需要为每种分辨率传递不同的图像，或者 sencha 将比较每种分辨率的图像。（仅供参考......我也遇到了[如何在 sencha touch 中添加不同屏幕分辨率的图像？](https://stackoverflow.com/questions/14209030/how-to-add-images-for-different-screen-resolutions-in-sencha-touch)建议 HTML5 媒体查询。这是唯一的方法吗？还请参阅在 Sencha Touch 中为不同的[移动设备分辨率创建启动画面](https://stackoverflow.com/questions/8008313/creating-a-splash-screen-in-sencha-touch-for-different-mobile-devices-resolution)用于启动画面）

2.  是否支持视网膜显示？（即 iOS 中的 @2x）。如果不是我们如何管理视网膜显示图像。

提前感谢您的任何宝贵建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:53:41.513

1) 为简单起见，我个人使用每个整体平台（Android、iPhone、Blackberry）的最高分辨率/尺寸。手机将相应地缩放图像。它只是让事情变得更简单；在我看来，不这样做的唯一原因是，如果您拥有真正巨大的总图像大小并且优化是 >10mb 之间的差异。任何时候手机必须缩放任何图像，显然都会对性能造成很小的影响，但最终对我来说根本不明显。

2) Sencha 支持视网膜显示。只要您使用足够高分辨率的图像，它就会正确缩放。当然，请确保包括视网膜显示[闪屏](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)和[应用程序图标](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:25:35.867

不要忘记 Sencha.io ......它可以为设备自动调整图像大小，提供更小的版本，因此下载速度更快。在这里阅读：

[http://www.sencha.com/products/io/](http://www.sencha.com/products/io/)

并在此处查看示例：

[http://extdesenv.com/tutorials/how-to-create-a-mobile-flickr-app-with-sencha-touch-2/](http://extdesenv.com/tutorials/how-to-create-a-mobile-flickr-app-with-sencha-touch-2/)

:-)

# performance - 配置 Linux I2C 速度

> ID：15337799
> 
> 赞同：2
> 
> 时间：2013-03-11T11:47:22.647
> 
> 标签：performance, linux-kernel, i2c

我在 Snowball 板上使用 I2C，默认以 400KHz 运行，并希望将其降低到 100KHz。

我使用中定​​义的api并配置如下

```
m_fd = open(m_filename.c_str(), O_RDWR);

if (ioctl(m_fd, I2C_SLAVE_FORCE, m_addr) < 0) 
{
    throw I2cError(DeviceConfigFail);
} 
```

有谁知道我将如何将速度更改为标准模式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:06:28.667

您可以在驱动程序的“struct i2c_gpio_platform_data”中更改 I2C SCL 频率。

```
 static struct i2c_gpio_platform_data xyz_i2c_gpio_data = {
    .sda_pin = GPIO_XYZ_SDA,
    .scl_pin = GPIO_XYZ_SCL,
    .udelay = 5, //@udelay: signal toggle delay. SCL frequency is (500 / udelay) kHz
    ....
}; 
```

更改“udelay”会更改“xyz”i2c 设备的时钟频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:24:44.107

您应该更改`I2C Frequency`相应外围设备的驱动程序源文件（即：`Slave device`您通过I2C与之通信。示例：`EEPROM`/`Camera`等）

您可能会发现该驱动程序源代码中定义了一些宏...例如：

```
#define EEPROM_I2C_FREQ 400000 //400KHz 
```

将其更改为：

```
#define EEPROM_I2C_FREQ 100000 //100KHz 
```

只有对应的驱动程序才会改变 I2C 频率/速度。

# c# - 为了最小化测试范围内的单元，我是否应该在单元测试时始终使用 Mocks

> ID：15337805
> 
> 赞同：3
> 
> 时间：2013-03-11T11:47:39.647
> 
> 标签：c#, unit-testing, mocking, moq, xunit

考虑以下测试，它确认当一个对象被添加到`HttpContentConatiner`类时，它生成的 MD5 存储在内容容器中，与外部序列化和散列正文内容的结果相匹配（这就是它的使用方式）。

```
[Fact]
public void When_body_added_correctly_MD5_matches_an_external_hash_of_the_same_content()
{
    var contentStub = new object();
    var serializer = new NewtonSoftJsonSerializer();
    var hasher = new Hmac256Hasher();
    var contentContainer = new HttpContentContainer(serializer, hasher);

    contentContainer.AddBody(contentStub);

    Assert.Equal(hasher.Hash(serializer.Serialize(contentStub), "Key"),
                             contentContainer.ContentMD5.Value);

} 
```

在这个测试中，我对序列化器和哈希器都使用了一个实际的实现，而不是模拟这两个对象。现在这意味着测试取决于哈希器和序列化器是否正常工作，因为它们的实现现在已被拉入测试范围，我担心这可能会使我的测试变得脆弱。

**我的问题**
鉴于上面的例子，我应该为了可维护性的目的模拟序列化器和散列器，还是可以依赖这样的外部服务？

**基于答案的新代码：**

```
[Fact]
public void When_a_valid_body_is_added_ContentMD5_Value_is_populated()
{
    var serializerMock = new Mock<ISerializer>();
    serializerMock.Setup(serializer => serializer.Serialize(It.IsAny<object>()))
                  .Returns("serializedContent");

    var hasherMock = new Mock<IHasher>();
    hasherMock.Setup(hasher => hasher.Hash(It.IsAny<string>(), It.IsAny<string()))
              .Returns("MD5");

    var contentContainer = 
        new HttpContentContainer(serializerMock.Object, hasherMock.Object);

    contentContainer.AddBody(new object());

    Assert.NotEmpty(contentContainer.ContentMD5.Value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:58:48.130

我更喜欢模拟 Hasher 和 Serializer。

原因 -可以假设这些依赖关系的方法`Hash`和方法都执行预期的功能，这可能是 Mock 的预期。`Serialize`然后，测试失败将确定地表明被测对象的失败。

# ios - 如何创建具有可查询数组属性的核心数据条目？

> ID：15337808
> 
> 赞同：0
> 
> 时间：2013-03-11T11:47:41.430
> 
> 标签：ios, core-data

我有两个实体`Issue`和`User`，我用它来表示来自服务器的数据。问题和用户之间存在多对多关系，当我从服务器获取问题时，该对象具有一组用户 ID。

稍后，当我从服务器获取用户时，我希望能够找到我存储的具有匹配 ID 的问题。

我一直计划使用可转换的属性来存储每个问题的用户 ID。但是，我读过可转换属性是不可查询的。真的吗？如果是这样，我如何创建一个可查询的数组属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:03:37.963

您不能查询存储为实体的可转换属性的数组中的条目是正确的。

一种可能的解决方案是将用户 ID 列表作为逗号分隔的字符串属性存储在`Issue`实体中，然后按照此处所述搜索匹配的 ID： [Form NSPredicate from string that contains id's](https://stackoverflow.com/questions/14932595/form-nspredicate-from-string-that-contains-ids)。

一个不同的解决方案是在阅读和创建问题时，在第一遍中创建从`Issue`到已经的关系。`User`当您从服务器收到带有用户 ID 列表的问题时，您将查找或创建`User`对象并设置关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:40:04.343

既然您正在使用具有多对多关系的两个实体，为什么不使用核心数据来实现关系呢？即实体中的`usersSet`（比如说）将是一个，而in也将是一个。如果是这种情况，您可以通过以下方式实现谓词以轻松获得所需的内容：`Issue``NSSet``issuesSet``User``NSSet`

`Issue`（下面的代码假设 to 之间的一对多关系`User`是`usersSet`。）

```
User *userObjFromServer = <your user object from server>... 
NSString *userId = userObjFromServer.userId; //Whichever way you are doing this
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY usersSet.userId like %@",userId]; 
```

您正在谈论的可查询数组将是关系（仅，它是一个`NSSet`）。

# java - 在 Javascript 中转换 Java 公历

> ID：15337809
> 
> 赞同：0
> 
> 时间：2013-03-11T11:47:44.800
> 
> 标签：java, javascript, datetime, calendar, gregorian-calendar

我有一个 JSP 页面，里面有一个 java 变量，名字是`${entry.date}`，这个变量的类型是`Gregorian Calendar`，它放在一个循环中，最后生成一个错误日志表。现在我的问题是，是否有可能在我当前的页面中，通过使用`javascript`，我获取变量并转换为`Solar Calendar`对象并将其再次放置在我的 html 中？

**的输出`${entry.date}`是：**

```
java.util.GregorianCalendar[time=1361788629000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="GMT+03:30",offset=12600000,dstSavings=0,useDaylight=false,transitions=0,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2013,MONTH=1,WEEK_OF_YEAR=9,WEEK_OF_MONTH=5,DAY_OF_MONTH=25,DAY_OF_YEAR=56,DAY_OF_WEEK=2,DAY_OF_WEEK_IN_MONTH=4,AM_PM=1,HOUR=2,HOUR_OF_DAY=14,MINUTE=7,SECOND=9,MILLISECOND=0,ZONE_OFFSET=12600000,DST_OFFSET=0] 
```

**HTML块是：**

```
<c:forEach var="entry" items="${errorLog}">
<tr>
    <td align="center" nowrap="nowrap">
        <mytag:format dateTime="${entry.date}"/>
    </td>
</tr>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:04:57.703

无需在 Javascript 中执行此操作。只需将标准 JSTL`formatDate`标记与`Calendar`'`getTime()`访问器一起使用：

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
...
<c:forEach var="entry" items="${errorLog}">
<tr>
    <td align="center" nowrap="nowrap">
        <fmt:formatDate value="${entry.date.time}" pattern="yyyy-MM-dd hh:mm:ss a" />
    </td>
</tr>
</c:forEach> 
```

您可以`pattern`根据自己的需要进行调整。

**编辑：**实现您想要的最优雅的方式是在自定义标签中实现转换/格式化，但另一种方式是：

```
<c:set var="calendar" value="${entry.date}" />
<c:set var="convertedCalendar" value='<%=SomeHelperClass.convertCalendar((Calendar)pageContext.findAttribute("calendar")) %>' /> 
```

哪里`SomeHelperClass.convertCalendar()`是一些静态实用程序方法来转换你的`Calendar`.

# c# - MVC 4 / Entity Framework 5 / Code First - 在视图中持久化集合（对象列表） - 几个问题

> ID：15337816
> 
> 赞同：4
> 
> 时间：2013-03-11T11:47:56.213
> 
> 标签：c#, razor, asp.net-mvc-4, html-helper, asp.net-mvc-futures

我的项目有几个模型，其中一些与其他模型具有 1:many 关系。一个用户有一个个人资料页面，它被分成几个部分视图——每个视图分组/代表给定模型的特定属性。

例如，如果我想在局部视图中显示给定模型的 10 个属性中的 5 个，并且想要保留未向我正在使用的用户显示的属性，`Html.HiddenFor`就像这样

```
@Html.HiddenFor(x => x.IsInGroup) 
```

这适用于上面的单条目属性。在 5 个隐藏的成员属性中，其中之一可能是列表。我了解无法使用`HiddenFor`. 我遇到了 Mvc Futures 包和`Html.Serialize`辅助扩展，但我不完全确定如何使用它，也找不到很多好的信息。

*   一旦将模型传递给视图，与之相关的所有内容（属性、集合）都可供我们访问，例如`Model.Username`. 例如，如果我们不使用`HiddenFor`with `Username`，这是否意味着它将被重置为默认值或 null？收藏品也一样吗？
*   是否使用`HiddenFor`唯一/最佳方式来保留未向用户显示的模型属性？
*   是否使用`Html.Serialize`唯一的方法来持久化未向用户显示的模型集合？其他选择？
*   有人可以提供/链接到一个简单的例子，说明如何在类似于我所描述的情况下持久化一个集合？
*   如果我要使用`Html.Serialize`，是否需要对整个模型进行序列化，或者我可以只对集合进行序列化吗？

反馈表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:12:46.963

您不需要通过从模型中创建所有字段（隐藏或不隐藏）来“保留”模型中的任何数据。在控制器中，当更新数据库中的记录时，您只会更新您需要的内容，其余的不会受到影响。

假设这是您的产品模型

```
class Product { 
    public int ID {get; set;}
    public string Name {get; set;} 
    public string Description {get; set;}
    public decimal Price {get; set;}
    public virtual ICollection<Category> Categories { get; set; }
} 
```

如果您只想在视图中编辑名称和描述，那么您只能放置这些字段，并跳过其余部分（ID 将在隐藏字段中）。提交表单后，在您的控制器中，您将通过传入的 ID 引用产品记录，然后您可以将名称和描述更新为您从表单收到的内容。类别和价格不会受到影响。

更直接的方法是使用特定于视图的 ViewModel 而没有不可编辑的属性。我发现这篇文章提供了更多详细信息：

[没有一堆隐藏字段的成功模型编辑](https://stackoverflow.com/questions/10935803/successful-model-editing-without-a-bunch-of-hidden-fields)

在一个较小的项目中，您没有使用任何类型的库（AutoMapper、InjectValues、...），但是您可以在需要将 ViewModel 中的值复制到 DB 中的实际记录中的地方自己进行操作。

# visual-studio-2010 - 如何确定 VS 2010 用于构建解决方案的确切命令行？

> ID：15337817
> 
> 赞同：2
> 
> 时间：2013-03-11T11:47:59.417
> 
> 标签：visual-studio-2010, visual-studio, msbuild

通常，我们使用 Visual Studio 在发布模式下构建解决方案，并在构建后将一些文件复制到不同的位置。

是否有可能知道 Visual Studio 正在使用的确切命令行是什么？我想使用相同的命令行并从批处理文件中运行它，以确保我的解决方案的构建方式与在 Visual Studio 中的构建方式相同。

**注意：**我知道如何从批处理文件构建解决方案。只是我想知道我当前的 Visual Studio 2010 配置是用来构建解决方案的。

# linux - linux 和 gcc 中的 16 位 wchar_t 支持

> ID：15337818
> 
> 赞同：1
> 
> 时间：2013-03-11T11:48:05.340
> 
> 标签：linux, gcc, wchar-t

我正在开发一个符合`-fshort-wchar`标志的跨平台项目，因此`wchar_t`类型为 2 字节。在 Windows 上这很好，但在 Linux 上意味着没有 libc 函数，如`printf`or `fprintf`。

一段时间以来，我一直在寻找一个好的解决方案，坦率地说，我有点绝望。

除了完全避免使用 libc 函数之外，有没有人有一个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:51:35.280

这`#ifdef`可能会有所帮助（虽然我还没有测试过）：

```
typedef __u16 wchar_t16; 
```

# ruby-on-rails - Heroku - 如何删除表并再次运行迁移？

> ID：15337821
> 
> 赞同：4
> 
> 时间：2013-03-11T11:48:09.950
> 
> 标签：ruby-on-rails, heroku, migration

我刚刚发现 Heroku 应用程序中的一张表与我的本地主机上的表具有不同的结构。

最好的方法是我需要再次运行创建新表的迁移，但是最好的方法是什么？

只是简单地手动删除 Heroku 终端中的表，然后更改迁移日期并再次运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:49:01.520

您可以像这样重做一个迁移文件：

```
heroku run rake db:migrate:redo VERSION=20130311054546 
```

其中 20130311054546 是迁移的时间戳。

做不同的数据库修改，比如`drop table`等等，我通常使用 [David Dollar 的 heroku SQL 控制台](https://github.com/ddollar/heroku-sql-console)

# php - 使用 Phalcon\Mvc\Model::columnMap() 时，我应该在 phalcon 中声明模型类属性吗？

> ID：15337828
> 
> 赞同：0
> 
> 时间：2013-03-11T11:48:19.387
> 
> 标签：php, model, phalcon

通常我们需要在模型类中定义公共属性，代表表列。正如在文档和定义此类公共属性的开发论坛中所说的那样，可以提高性能。

但是如果我们使用这里描述的列映射：http: [//docs.phalconphp.com/en/latest/reference/models.html#independent-column-mapping](http://docs.phalconphp.com/en/latest/reference/models.html#independent-column-mapping)

我们应该宣布公共财产吗？如果是，应该定义哪些属性？来自数据库的列名或它们在应用程序中的映射名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:19:18.920

在类上定义属性是一种很好的做法，因为它减少了整体内存消耗（这只适用于 PHP >= 5.4.x）。因此，您必须尽可能为所有类定义属性，而不仅仅是模型。

这是对为什么它会降低性能的高级解释：[https ://gist.github.com/nikic/5015323](https://gist.github.com/nikic/5015323)

# c# - 在 Windows 8 Metro 中发送 html 格式的电子邮件

> ID：15337831
> 
> 赞同：0
> 
> 时间：2013-03-11T11:48:28.997
> 
> 标签：c#, html, email, microsoft-metro

我正在编写一个数据非常密集的 Metro 应用程序，我需要在其中发送 html 格式的电子邮件。在谷歌搜索后，我发现了这段代码。

```
var mailto = new Uri("mailto:?to=recipient@example.com&subject=The subject of an email&body=Hello from a Windows 8 Metro app.");
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

这对我很有用，但有一个例外。我正在通过 html 字符串生成这封电子邮件的正文，所以我的班级中有这样的代码。

```
string htmlString=""
DALClient client = new DALClient();
htmlString += "<html><body>";
htmlString += "<table>";
List<People> people = client.getPeopleWithReservations();
foreach(People ppl in people)
{
    htmlString+="<tr>"
    htmlString +="<td>" + ppl.PersonName + "</td>";
    htmlString +="</tr>";
}
htmlString +="</table>";
htmlString +="</body><html>"; 
```

现在，当我运行此代码时，电子邮件客户端会打开。但是，结果显示为纯文本。有没有办法让我在格式化的 html 中显示它，这样 html 标签等就不会显示？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:47:31.523

将 HTML 传递给 mailto 是不可能的。您可以使用共享来代替，您可以将 HTML 代码传递给默认的 Windows Store Mail App（不幸的是，不能传递给默认的桌面邮件应用程序）。

这是页面上的示例：

```
public sealed partial class MainPage : Page
{
   private string eMailSubject;
   private string eMailHtmlText;

   ...

   private void OnDataRequested(DataTransferManager sender, DataRequestedEventArgs args)
   {
      // Check if an email is there for sharing
      if (String.IsNullOrEmpty(this.eMailHtmlText) == false)
      {
         // Pass the current subject
         args.Request.Data.Properties.Title = this.eMailSubject;   

         // Pass the current email text
         args.Request.Data.SetHtmlFormat(
            HtmlFormatHelper.CreateHtmlFormat(this.eMailHtmlText));

         // Delete the current subject and text to avoid multiple sharing
         this.eMailSubject = null;
         this.eMailHtmlText = null;
      }
      else
      {
         // Pass a text that reports nothing currently exists for sharing
         args.Request.FailWithDisplayText("Currently there is no email for sharing");
      }
   }

   ...

   // "Send" an email
   this.eMailSubject = "Test";
   this.eMailHtmlText = "Hey,<br/><br/> " +
      "This is just a <b>test</b>.";
   DataTransferManager.ShowShareUI(); 
```

另一种方法是使用 SMTP，但据我所知，Windows Store Apps 还没有 SMTP 实现。

# ruby-on-rails - 如何在 Ruby 中更简洁地表达这段代码

> ID：15337842
> 
> 赞同：2
> 
> 时间：2013-03-11T11:49:05.483
> 
> 标签：ruby-on-rails, ruby, loops

在每个循环中，如果它是循环的开头，或者索引是五的倍数，我想输出一个 HTML 元素。

```
- images.each do |image, index|
  - if index == 1 || index == 5 || index == 10 || index == 15 # this is not scalable!
    .row-fluid
  .span2
    div.image-wrapper
      = image_tag image.url 
```

有没有更好的方法在 Ruby 中表达这一点？

我想在一个 div 中最多输出 5`span2`个`row-fluid`div。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T11:50:17.773

认识[模运算符](http://en.wikipedia.org/wiki/Modulo_operation)

```
if index % 5 == 0 
```

> 基本上，我想确保在行流体 div 中最多只输出 5 个 span2 div。

嗯，这完全是另一个故事

```
- images.each_slice(5) do |slice|
  .row-fluid
  - slice.each do |image|
    .span2
      div.image-wrapper
        = image_tag image.url 
```

关于[Enumerable#each_slice](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)的文档。

# java - 如何在不使用选择器的情况下实现阻塞 DatagramChannel 的超时处理

> ID：15337845
> 
> 赞同：8
> 
> 时间：2013-03-11T11:49:12.460
> 
> 标签：java, udp, nio, datagram

我有一种感觉，我在这里遗漏了一些非常明显的东西。

我的系统的整体结构让我想使用没有选择器的阻塞 DatagramChannel，以保持简单。我试图通过在套接字上设置超时来实现超时处理，但这似乎没有效果。

这个伪代码暗示了我想要实现的目标。

```
DatagramChannel 通道 = DatagramChannel.open();
channel.socket().bind(一些地址);
通道.socket().setSoTimeout(3000);
channel.send(outBuffer, peerAddress);

通道.receive(inBuffer);

```

另一方面，我有一个 UDP 服务器，它提供五个快速响应，然后，出于测试目的，在提供第六个响应之前延迟大约五秒钟。

延迟不会触发 SocketTimeoutException。这是为什么？调用 channel.receive 时似乎没有考虑到套接字上设置的超时。

问候，弗雷德里克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-14T21:08:00.820

显然，无法超时的问题不是 DatagramChannel 的错误，而是：

> 不是错误。SocketChannel（和 DatagramChannel）中的读取方法不支持超时。如果您需要超时功能，请使用相关 Socket（或 DatagramSocket）对象的读取方法。

[关联。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4614802)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T12:41:56.890

这就是我所做的：

# 创建一个`Interrupter`类

```
static private class Interrupter implements Runnable
{
    private final Thread th1;
    private volatile int wait=-1;
    private Interrupter(Thread ith1)
    {
        th1=ith1;
    }
    public void run()
    {
        while(true)
        {
            try{
                if( wait<0 ){ th1.join(); break; }
                else{ Thread.sleep(wait); th1.interrupt(); wait=-1; }
            } catch(Exception e){}
        }
    }
} 
```

# 设置`Interrupter`

```
Interrupter ir1=new Interrupter(Thread.currentThread());
Thread th1=new Thread(ir1);
th1.start();
// We need this so that later the wait variable
// can be passed in successfully
while( th1.getState()!=Thread.State.WAITING ); 
```

# 使用`Interrupter`

```
try{
    ir1.wait=waitTimeout;
    th1.interrupt();
    // Receive on the socket
    dc2.receive(bb2);
} catch(ClosedByInterruptException e){
    // (Timed out)
    Thread.interrupted();
    dc2.close();
    // Handle timeout here
    // ...
    // We need this so that later the wait variable
    // can be passed in successfully
    while( th1.getState()!=Thread.State.WAITING );
}
// Received packet
ir1.wait=-1;
th1.interrupt();
// We need this so that later the wait variable
// can be passed in successfully
while( th1.getState()!=Thread.State.WAITING );
Thread.interrupted(); 
```

# cluster-analysis - SOM 的适当邻域大小

> ID：15337850
> 
> 赞同：1
> 
> 时间：2013-03-11T11:49:29.293
> 
> 标签：cluster-analysis, som

我正在做一个程序，可以使用 Kohonen 自组织地图对数字数据进行聚类，并且我正在尝试使其尽可能通用。那么，**我如何知道与数据集中的项目数（输出节点数）成比例的邻域的适当初始大小？**

建议也将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T22:26:48.077

您可以根据需要细化邻域函数。

如果您在每个最佳匹配单元 (BMU) 周围定义一个圆圈，则可以选择此半径与低维空间中的网格大小（可能是 2d）成比例。然后你可以使半径保持不变或根据一定的标准缩小，直到你最后一次迭代。

另一种选择是使邻域固定，如在一定数量的周围节点到 BMU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:09:04.787

如果你想让它“尽可能通用”，可能只有一种可能性：**随机**。但我建议让它“尽可能不那么通用”，然后你可以使用参数......

# android - 在微调器视图android中设置背景图像

> ID：15337856
> 
> 赞同：0
> 
> 时间：2013-03-11T11:49:38.210
> 
> 标签：android, view, background, android-spinner

我想在我的微调器上设置背景图像。问题是，当我将图像应用于微调器时，微调器的高度会根据图像大小进行拉伸（这当然是我不想要的）。我希望该图像应该适合微调器视图（正如我们可以在 imagebutton 视图中轻松完成的那样）以下示例是我的尝试之一。

```
 <Spinner
            android:id="@+id/spinner1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/btnmusic"
            android:scaleType="fitCenter" /> 
```

我还使用所有可用选项更改了 scaletype，但它不起作用。

我可以在 xml 中修复它还是需要以编程方式进行修复？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T12:05:33.417

1.  您可以将 android:layout_width 和 android:layout_height 属性设置为特定大小（以 dp 为单位更好）。

2.  在 [android sdk 文件夹]\android-sdks\platforms\android-#\data\res\drawable 中查看微调器图像的实际大小并调整您的大小。

3.  另请参阅微调器[自定义选择器](http://www.gersic.com/blog.php?id=57)

# youtube-api - 使用 Youtube API 仅查询未观看的视频以进行订阅

> ID：15337862
> 
> 赞同：15
> 
> 时间：2013-03-11T11:49:58.553
> 
> 标签：youtube-api

*（一年半前我在 Google Groups 论坛上问过这个问题，当时 Jeffrey Posnick 说这是不可能的，我正在再次尝试，希望随着时间的推移和 v3 API 的出现，这现在是可能的）*

我刚刚开始修改 API，想知道是否有一种方法可以只查询特定订阅的 *未观看的 *视频。例如，如果您访问[http://www.youtube.com/my_subscriptions](http://www.youtube.com/my_subscriptions)并查看新视频，它会将显示的视频限制为仅显示您订阅中尚未观看的视频。API可以做到这一点吗？

显然，与帐户相关的已观看/未观看状态存储在 Google 服务器上，这可通过 API 获得吗？

如果没有，有没有这方面的计划？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:28:20.320

我还没有尝试过，但是使用[YouTube 分析 API](https://developers.google.com/youtube/analytics/)而不是 YouTube 数据 API，您可能能够得到您想要的：请求指标 = 视图和维度 = 视频的报告，并按视图升序排序.

例如：

```
https://www.googleapis.com/youtube/analytics/v1/reports
  ?metrics=views
  &dimensions=video
  &sort=views
  &ids={your channel id} 
```

我会担心这种方法的一件事是，如果您自己观看视频，作为上传/健全性检查过程的一部分，观看次数将不为零。另请注意，在观看视频与通过分析 api 报告该视图之间存在相当大的延迟 - 可能是 24 到 36 小时之间的任何时间。

# c# - 在此示例中何时调用 ReadCallBack？

> ID：15337864
> 
> 赞同：1
> 
> 时间：2013-03-11T11:50:05.137
> 
> 标签：c#, asynchronous

我在理解.net 中的异步套接字通信模型时有点噩梦。有人可以告诉我 ReadCallBack 方法何时被调用（我正在使用异步服务器侦听端口）（如果需要，下面的 MS 链接可获取完整代码）

```
//handler is my server socket handler
handler.BeginReceive( state.buffer, 0, StateObject.BufferSize,
 0,new AsyncCallback(ReadCallback), state); 
```

即当它*完成*接收数据或当它*检测到*一些数据正在进入时。换句话说，当 ReadCallBack 确实被调用时，它如何知道数据不再到达？如果数据不断到达，ReadCallBack 会一直被调用吗？我的意思是它不像我的客户正在发送类似“\n”分隔符的东西，那么我如何在 readcallback 方法中检查一行中发送的内容？我的客户端实际上每 10 秒发送一次 ping（iAmAlive ping），除了第一次连接时的单个“hello_My name is”消息。

谢谢

这是我试图了解[Microsoft Async Server 套接字示例的示例](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:18:08.830

如果您告诉回调，回调就知道不再有数据到达。您可以使用状态对象来做到这一点。如果您检查您在`ReadCallback()`方法中链接的示例，则检查状态对象的 sb 属性（即接收到的字符串）。如果它包含`"<EOF>"`它，则通过`EndInvoke`在幕后调用来结束回调。只要 sb 不包含`"<EOF>"`回调就继续尝试读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:21:40.493

您正在调用的方法定义为：

```
[HostProtectionAttribute(SecurityAction.LinkDemand, ExternalThreading = true)]
public IAsyncResult BeginReceive(
    byte[] buffer,
    int offset,
    int size,
    SocketFlags socketFlags,
    AsyncCallback callback,
    Object state
) 
```

您传递的 AsyncCallback(ReadCallback) 参数是一个指向方法的委托*指针*，发送方应在完成接收操作后调用该方法。

```
callback
Type: System.AsyncCallback
An AsyncCallback delegate that references the method to invoke when the operation is complete. 
```

我认为套接字通信是单个通道中的一系列消息。

Readcallback 在特定消息数据的末尾“知道”它，因为正在调用该回调方法。即它被称为给定消息的所有数据的后传输。

如果您询问接收到的数据，并且它还包含根据您设计的协议的所有消息标记的结尾，即 EOF，那么您还应该关闭连接。

您还可以在状态对象中放置额外的上下文（并使用强制转换来键入它），您可以检查 // 在您的回调方法中引用。

因此，客户“知道”的内容归结为您的设计。这是使用原始套接字的好处之一。你设计了协议，你可以让它变得像你喜欢的那样简单或复杂。如果其他人确定了协议，那么您将获得相关文档或以其他方式询问他们。

在您的协议示例中，“EOF”表示文件/传输结束。如果您希望它是“香蕉”，那么它也可以很容易地成为“香蕉”，然后您会在消息中查找“香蕉”，如果找到它，您会关闭频道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:56:18.163

正如[MSDN](http://msdn.microsoft.com/en-us/library/3sah14d0.aspx)上所述，只要异步方法结束，就会调用这个特定的回调。
如果您不确定，您应该阅读文档（当然，如果可用，但 MSDN 提供了很多信息）。

# php - 从表中获取多行并将其写入excel

> ID：15337865
> 
> 赞同：0
> 
> 时间：2013-03-11T11:50:06.843
> 
> 标签：php, mysql, phpexcel

我正在使用 phpexcel 从 mysql db 中的表中获取数据并将其写入 excel 表中。假设我的查询正在获取 3 行，其中包含以下字段的某些条件：用户名、电子邮件、位置。Excel 工作表应如下所示：

```
UserName    Email       Location
ABC         abc@.com     NY
PQR         pqr@.com     CO
XYZ         xyz@.com     CA 
```

如果查询根据条件获取 n 行，则需要将行动态添加到 Excel 工作表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:00:35.720

```
$objPHPExcel = PHPExcel_IOFactory::load("Multiple_rows.xls"); 
$objPHPExcel->setActiveSheetIndex(0); 

$i = 1; 
while($row = mysql_fetch_array($resultqry)) { 
    $cell1 = 'A'.$i; 
    $cell2 = 'B'.$i; 
    $objPHPExcel->getActiveSheet()->setCellValue($cell1, $row['User_name']); 
    $objPHPExcel->getActiveSheet()->setCellValue($cell2, $row['emailaddr']); 
    $i++;
} 
```

# javascript - 生产中需要 Requirejs 库？

> ID：15337867
> 
> 赞同：2
> 
> 时间：2013-03-11T11:50:07.347
> 
> 标签：javascript, requirejs

我们正在使用很多库，我正在寻找看起来很棒的 require.js。您可以管理依赖项并将代码划分为模块化结构。

我无法理解这在生产中是如何工作的？在生产中，您将所有 js 缩小并合并到一个文件中。加载所有东西的js文件只有一个，那么requirejs有什么用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:53:00.653

因为生产不是软件开发的唯一步骤。就像它一直在软件开发中一样，最好将代码模块化以提高可读性和维护和开发。

一个简单的比较是与其他语言的比较。如果是 Java，您现在不会希望所有类都在一个文件中，对吗？您总是将每个类分解为单独的文件。但最终，它们被编译用于生产。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T11:54:20.623

*requireJS*附带[`r.js adapter for Node and Rhino`](https://github.com/jrburke/r.js)，它几乎可以静态地解析和注入依赖项，并创建/输出您的生产文件。

阅读更多：[http ://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:55:35.770

实际上在生产中人们有很多 js 文件，而不仅仅是一个。例如，查看 stackoverflow.com 页面的 head 部分。

# iphone - 自定义字体问题

> ID：15337869
> 
> 赞同：1
> 
> 时间：2013-03-11T11:50:12.553
> 
> 标签：iphone, ios, ipad, fonts, uifont

我在 info.plist 中将“kaligraf_latin.ttf”添加到“应用程序提供的字体”中

然后我使用`UIFont *font = [UIFont fontWithName:@"kaligraf_latin" size:17]`and font = nil

我试过 kaligraf_latin.otf。结果是一样的。

然后我尝试了另一种字体 MyriadPro-BoldCond.otf，字体变为 != nil。

这是否意味着问题出在字体 kaligraf_latin.ttf 上？

这是 info.plist 的打印屏幕 ![在此处输入图像描述](../Images/4f6a7c7f87e1d55a3ff6c472747ba666.png)

可能问题出在字体名称上。因为在 fontWithName 我应该使用字体名称，而不是字体文件名。如何从字体文件中获取字体名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:10:56.823

使用以下两种方法，您可以检查是否安装了自定义字体或子字体

```
[UIFont familyNames];
[UIFont fontNamesForFamilyName:<font family name>]; 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:38:20.593

使用它来列出所有可用的字体（包括您添加的字体）和字体名称：

```
NSArray *familyNames = [[NSArray alloc] initWithArray:[UIFont familyNames]];
NSArray *fontNames;
NSInteger indFamily, indFont;
for (indFamily=0; indFamily<[familyNames count]; ++indFamily)
{
    NSLog(@"Family name: %@", [familyNames objectAtIndex:indFamily]);
    fontNames = [[NSArray alloc] initWithArray:
                 [UIFont fontNamesForFamilyName:
                  [familyNames objectAtIndex:indFamily]]];
    for (indFont=0; indFont<[fontNames count]; ++indFont)
    {
        NSLog(@"    Font name: %@", [fontNames objectAtIndex:indFont]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:41:24.537

问题出在字体名称它是 Kaligraf Latin，而不是 kaligraf_latin 我使用这个网站[http://www.font2web.com/获得了字体名称](http://www.font2web.com/)

# tfsbuild - TFS 2012 构建 - 项目特定的输出文件夹

> ID：15337871
> 
> 赞同：3
> 
> 时间：2013-03-11T11:50:18.397
> 
> 标签：tfsbuild

我有一个包含大约 30 个 C# 项目的 Visual Studio 2012 解决方案。我在 Visual Studio 中设置输出路径，以将我的所有插件放在我的二进制目录的子目录中。

如何使用 TFS 2012 Buid 将插件放入 ..\Binary\Plugins\ 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:41:06.903

您可以为插件创建一个新的解决方案并构建它。

TFS 2012 现在带有新的构建配置选项，可将所有解决方案设置为在自己的目录中输出。

*   编辑您的构建配置
*   单击`Process`选项卡
*   扩张`Advanced`
*   设置`Solution Specific Build Outputs`=`true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T21:10:55.370

我认为这会解决它，但多么荒谬......

[http://lajak.wordpress.com/2011/05/07/customize-binaries-folder-in-tfs-team-build/](http://lajak.wordpress.com/2011/05/07/customize-binaries-folder-in-tfs-team-build/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T17:17:12.320

我现在创建了一个移动任务，通过调用 System.IO.File.Move 方法将构建后的插件移动到插件目录。这不是一个很好的解决方案，但它有效。

# three.js - Three.js 中的纹理困难

> ID：15337874
> 
> 赞同：2
> 
> 时间：2013-03-11T11:50:31.893
> 
> 标签：three.js, textures, collada

我的模型上的纹理仍然遇到一些困难。首先我尝试使用 three.js r50 的 collada 模型，现在我尝试使用 three.js r56 的 .obj 模型，但我的纹理上仍然出现一些黑线，就像纹理的外观一样。有人可以帮助我了解发生了什么吗？这是我的两个例子：

[http://victorribeiro.com/modelo3Dobj/](http://victorribeiro.com/modelo3Dobj/) (three.js r56 - model .obj)

[http://victorribeiro.com/modelo3D/（three.js](http://victorribeiro.com/modelo3D/) r50 - 模型 collada）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:55:45.543

我只看到您在以掠射角查看脸部时所指的黑线。

为我解决的问题是`texture.aniostropy`在加载程序回调函数中设置如下：

```
var map = object.children[0].material.map;
map.anisotropy = renderer.getMaxAnisotropy(); 
```

当然，这是特定于机器的。

否则，我认为您的模型没有任何问题。

三.js r.56

# iphone - UITableViewCell 自定义 selectedBackgroundView 问题

> ID：15337876
> 
> 赞同：6
> 
> 时间：2013-03-11T11:50:46.963
> 
> 标签：iphone, ios, objective-c, uitableview, uiimageview

所以我在我的`UITableViewCell`.

我的单元格`contentView`基本上是一个`UIView`(frame = 0,0,80,70)，具有黑色背景和`UIImageView`一个子视图。

图像视图的`contentMode = UIViewContentModeScaleAspectFit;`

这看起来像这样：

![未选中的单元格](../Images/47f53a101f490aed09b2e5f15632a8f1.png)

现在我像这样设置 selectedBackgroundView ：

```
 //set the custom selected color
    UIView *bgColorView                 = [[UIView alloc] init];
    bgColorView.backgroundColor         = MY_TINT_COLOR;
    CGColorRef darkColor                = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha: 0.25].CGColor;
    CGColorRef lightColor               = [self.view.backgroundColor colorWithAlphaComponent:0.0].CGColor;
    //setting some gradients here
    //should not be relevant for the question
    [cell setSelectedBackgroundView:bgColorView]; 
```

这会导致这样的结果：

![在此处输入图像描述](../Images/886634ef604192aa4202410c718a67f2.png)

我现在的问题是为什么`selectedBackgroundView`隐藏黑色部分`contentView`？

我已经尝试`bgColorView`使用从 开始的框架初始化 my `x = 80`，但这并没有改变任何东西。

我也试图明确地将 的 设置`backgroundColor`为`imageView`黑色，结果相同。

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T12:17:54.103

下图给出了细胞结构的概念。选定的背景视图将隐藏内容视图

![在此处输入图像描述](../Images/aa107a75de8359e6fa5b5bd6f9cb38ce.png)

因此，您可以尝试将单元格的背景颜色设置为黑色。您的自定义单元格看起来像这样

```
 self.backgroundColor = [UIColor blackColor]; // Gives black background for you

    // Set selected background view
    UIView *backgroundView = [[UIView alloc]initWithFrame:self.bounds];
    backgroundView.layer.borderColor = [[UIColor colorWithRed:0.529 green:0.808 blue:0.922 alpha:1]CGColor];
    backgroundView.layer.borderWidth = 10.0f;
    self.selectedBackgroundView = backgroundView;
    [backgroundView release];

    // Set the content view
    CGRect frame  = CGRectMake(self.bounds.origin.x+5, self.bounds.origin.y+5, self.bounds.size.width-10, self.bounds.size.height-10);
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
    self.imageView = imageView;
    [imageView release];
    self.imageView.contentMode = UIViewContentModeScaleAspectFill ;
    self.imageView.clipsToBounds = YES;
    [self.contentView addSubview:self.imageView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:06:50.840

也许你可以尝试覆盖

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated 
```

和

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated 
```

UITableViewCell 类以获得所需的行为。

# android - 检查正确的互联网是否可用

> ID：15337879
> 
> 赞同：0
> 
> 时间：2013-03-11T11:50:52.537
> 
> 标签：android, android-networking

我正面临在我的 Android 应用程序中重新分级互联网的情况。我正在我的应用程序中检查互联网可用性。但我也想要正确检查连接性。现在，如果我的互联网已连接但没有信号。

```
ConnectivityManager connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
if(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == NetworkInfo.State.CONNECTED || connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == NetworkInfo.State.CONNECTED ){
    //do what ever
}
else{
    Toast.makeText(getApplicationContext(), "Please activate the internet", Toast.LENGTH_SHORT).show();
} 
```

如果信号丢失它不显示`internet is not available`。所以我想要一些关于如何每次检查信号的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:55:13.897

尝试这个，

```
 public final boolean isInternetON(Context context) {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netinfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netinfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isAvailable())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isAvailable())
                haveConnectedMobile = true;

    }
    return haveConnectedWifi || haveConnectedMobile;

} 
```

# php - 在 javascript 中处理 PHP 为 AJAX 调用返回的数据

> ID：15337881
> 
> 赞同：0
> 
> 时间：2013-03-11T11:51:03.393
> 
> 标签：php, javascript, jquery, ajax

我的 PHP 脚本

```
<?php
//connect to server
//selecting the database
$temparr=array();
$count=0
$result = mysql_query("some query");
while($row = mysql_fetch_assoc($result))
{
   $temparr["$count"]= $row["value"] ;
   $count+=1;
}
echo json_encode($temparr);
mysql_close($conn); 
?> 
```

我的javascript文件中的AJAX函数调用如下

```
function someFunction(){

  xmlhttp = new XMLHttpRequest();
  xmlhttp.open("GET", "mymethodpath", true);

  xmlhttp.onreadystatechange = function () {
     if (xmlhttp.readyState == 4 && xmlhttp.status == 200) { 
        alert(xmlhttp.responseText);
        //this gives me a popup of the encoded data returned by the php script
        // the format i see in the popup window is ["1","2"]
        var temp=$.parseJSON(xmlhttp.responseText);

        alert(temp.count);
        //however this produces an undefined value

     }

  xmlhttp.send();
} 
```

那么我如何解析返回的字符串并显示正确的计数（这里计数应该是 2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:56:23.147

我假设您想要返回数组中的元素数。但是，`count`它不是正确的 JavaScript 属性。改为使用`temp.length`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:02:05.137

这是正确的方法：

```
var obj = jQuery.parseJSON('["1","2"]');
alert(obj.length); 
```

“.count”需要替换为“.length”。在这里试试：http: [//jsfiddle.net/4rrYz/](http://jsfiddle.net/4rrYz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:03:44.723

使用 jQuery，您可以简化您的 ajax 调用顺便说一句：

```
function someFunction(){
    $.ajax({
        url: "mymethodpath",
        type: 'get',
        dataType: 'json',
        success: function(jsonObj) {
            alert(jsonObj.length);
        }
    });
} 
```

您也可以使用`$.getJSON()`，但我自己喜欢使用基本功能（getJSON 也会在幕后使用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:58:22.973

在浏览器窗口中调用您的 php 脚本，您将看到没有名为“count”的 JSON 对象。您的数组将由标记为 0、1、2、... 的元素组成

如果您尝试显示 temp[0]，您应该会看到您的第一个值。

# python - 在 Cython 中迭代字节/unicode 字符串的最佳方法

> ID：15337882
> 
> 赞同：5
> 
> 时间：2013-03-11T11:51:06.557
> 
> 标签：python, c, string, unicode, cython

[我刚从 Cython 开始，结果也很难用谷歌搜索 Cython 特定的东西，所以提前抱歉。]

我正在用 Cython 重新实现一个 Python 函数。它在 Python 中几乎是这样的：

```
def func(s, numbers=None):
    if numbers:
         some_dict = numbers
    else:
         some_dict = default
    return sum(some_dict[c] for c in s) 
```

它在 Python 2 和 3 上运行良好。但如果我尝试输入`s`and `c`，它会在至少一个 Python 版本上中断。我试过了：

```
def func(char *s, numbers=None):
    if numbers:
         some_dict = numbers
    else:
         some_dict = default
    cdef char c
    cdef double m = 0.0
    for c in s:
        m += some_dict[<bytes>c]
    return m 
```

老实说，这是我唯一要做的事情，它在 Python 2 上提供了不错的加速，但在 Python 3 上中断了。阅读了[这段](http://docs.cython.org/src/tutorial/strings.html#iteration)Cython 文档后，我认为以下内容适用于 Python 3：

```
def func(unicode s, numbers=None):
    if numbers:
         some_dict = numbers
    else:
         some_dict = default
    cdef double m = 0.0
    for c in s:
        m += some_dict[c]
    return m 
```

但它实际上引发了 a`KeyError`并且似乎`c`仍然是 a `char`（缺少的关键是`80`if`s`以 a 开头`'P'`）但是当我`print(type(c))`说`<class 'str'>`.

请注意，原始的无类型代码在两个版本下都可以工作，但比 Python 2 上的工作类型版本慢大约两倍。

那么如何让它在 Python 3 上运行，然后如何让它同时在两个 Python 版本上运行呢？我可以/应该在类型/版本检查中包装类型声明吗？或者我是否应该编写两个函数并有条件地将其中一个分配给一个公开可用的名称？

PS 如果重要的话，我可以只允许字符串中的 ASCII 字符，但我怀疑它确实如此，因为 Cython 似乎更倾向于显式编码/解码。

* * *

编辑：我也尝试过显式编码和迭代一个字节串，这是有道理的，但是下面的代码：

```
def func(s, numbers=None):
    if numbers:
         some_dict = numbers
    else:
         some_dict = default
    cdef double m = 0.0
    cdef bytes bs = s.encode('ascii')
    cdef char c
    for c in bs:
        m += some_dict[(<bytes>c).decode('ascii')]
    return m 
```

比我在 Python 2 上的第一次尝试慢 3 倍（接近纯 Python 函数的速度），在 Python 3 上几乎慢 2 倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:51:58.450

foo.h

```
// #include <unistd.h>;  // for ssize_t
double foo(char * str, ssize_t str_len, double weights[256]){
    double output = 0.0;
    int i;
    for(i = 0; i < str_len; ++i){
        output += weights[str[i]];
    }
    return output;
} 
```

* * *

```
from cpython.string cimport PyString_GET_SIZE, PyString_Check, PyString_AS_STRING

cdef extern from "foo.h":
    double foo(char * str, ssize_t str_len, double weights[256])   

cdef class Numbers:
    cdef double nums[256]

    def __cinit__(self, py_numbers):
        for x in range(256):
            self.nums[i] = py_numbers[i]

def py_foo(my_str, Numbers nums_inst):
    cdef:
        double res
    # check here my_str is BYTEstring
    if not PyString_Check(my_str):
        raise TypeError("bytestring expected got %s instead" % type(my_str))
    res = foo(PyString_AS_STRING(my_str), PyString_GET_SIZE(my_str), nums_inst.nums)
    return res 
```

（未经测试）

# automapper - Automapper - 忽略 IEnumerable 的所有项目

> ID：15337883
> 
> 赞同：12
> 
> 时间：2013-03-11T11:51:17.887
> 
> 标签：automapper

是否有 Automapper 忽略某种类型的所有属性？我们试图通过验证 Automapper 映射来提高代码的质量，但是必须`.Ignore()`为所有`IEnumerable<SelectListItem>`总是手动创建的东西添加一个会产生摩擦并减慢开发速度。

有任何想法吗？

创建映射后可能的想法：

```
 var existingMaps = Mapper.GetAllTypeMaps();
    foreach (var property in existingMaps)
    {
        foreach (var propertyInfo in property.DestinationType.GetProperties())
        {
            if (propertyInfo.PropertyType == typeof(List<SelectListItem>) || propertyInfo.PropertyType == typeof(IEnumerable<SelectListItem>))
            {
                property.FindOrCreatePropertyMapFor(new PropertyAccessor(propertyInfo)).Ignore();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T13:03:39.390

**Automapper 当前不支持基于类型的属性忽略。**

目前有三种方法可以忽略属性：

*   `Ignore()`创建映射时使用选项

    ```
    Mapper.CreateMap<Source, Dest>()
        .ForMember(d => d.IgnoreMe, opt => opt.Ignore()); 
    ```

    这是您要避免的。

*   `IEnumerable<SelectListItem>`用_`IgnoreMapAttribute`

*   如果您的`IEnumerable<SelectListItem>`属性名称遵循一些命名约定。例如，它们都以单词开头，`"Select"`您可以使用该`AddGlobalIgnore`方法全局忽略它们：

    ```
    Mapper.Initialize(c => c.AddGlobalIgnore("Select")); 
    ```

    但是有了这个，你只能匹配以开头。

但是，您可以为第一个选项创建一个方便的扩展方法，它会在您调用时自动忽略给定类型的属性`CreateMap`：

```
public static class MappingExpressionExtensions
{
    public static IMappingExpression<TSource, TDest> 
        IgnorePropertiesOfType<TSource, TDest>(
        this IMappingExpression<TSource, TDest> mappingExpression,
        Type typeToIgnore
        )
    {
        var destInfo = new TypeInfo(typeof(TDest));
        foreach (var destProperty in destInfo.GetPublicWriteAccessors()
            .OfType<PropertyInfo>()
            .Where(p => p.PropertyType == typeToIgnore))
        {
            mappingExpression = mappingExpression
                .ForMember(destProperty.Name, opt => opt.Ignore());
        }

        return mappingExpression;
    }
} 
```

您可以通过以下方式使用它：

```
Mapper.CreateMap<Source, Dest>()
    .IgnorePropertiesOfType(typeof(IEnumerable<SelectListItem>)); 
```

所以它仍然不是一个全局解决方案，但您不必列出需要忽略哪些属性，它适用于同一类型的多个属性。

**如果你不怕弄脏你的手：**

目前有一个非常 hacky 的解决方案，它深入到 Automapper 的内部。我不知道这个 API 的公开程度如何，所以这个解决方案可能会阻碍这个功能：

您可以订阅`ConfigurationStore`'s`TypeMapCreated`事件

```
((ConfigurationStore)Mapper.Configuration).TypeMapCreated += OnTypeMapCreated; 
```

并直接在创建的`TypeMap`实例上添加基于类型的忽略：

```
private void OnTypeMapCreated(object sender, TypeMapCreatedEventArgs e)
{
    foreach (var propertyInfo in e.TypeMap.DestinationType.GetProperties())
    {
        if (propertyInfo.PropertyType == typeof (IEnumerable<SelectListItem>))
        {
            e.TypeMap.FindOrCreatePropertyMapFor(
                new PropertyAccessor(propertyInfo)).Ignore();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T03:54:59.573

如果你现在遇到这个，似乎还有另一种方法。

```
Mapper.Initialize(cfg =>
{
    cfg.ShouldMapProperty = pi => pi.PropertyType != typeof(ICommand);
}); 
```

我没有调查这个是什么时候引入的。这似乎会阻止或允许您过滤它。看到这个：[AutoMapper 配置](http://automapper.readthedocs.io/en/latest/Configuration.html#global-property-field-filtering)

# java - jsf中的SelectBooleanCheckbox

> ID：15337884
> 
> 赞同：5
> 
> 时间：2013-03-11T11:51:26.413
> 
> 标签：java, jsf

嗨，我是 JSF 的新手，遇到了这样的问题。在我的页面上，我有新闻列表，每个新闻都有复选框（我们可以选中此复选框，然后删除选中的新闻）。这工作正常。但是删除后，我返回我的页面并按 F5，然后我的应用程序认为已选中已删除复选框下方的复选框并将其删除。例如我有这个： ![在此处输入图像描述](../Images/88a61f35f0d52f13b1745e7452f38f98.png)

**按删除按钮并拥有这个：** ![在此处输入图像描述](../Images/4376280d1f5e6be4a4d5c33aa1bd53e8.png) **而不是按 f5，我看到了这个：** ![在此处输入图像描述](../Images/4dda356be86d9ddf548855a520a78b15.png)

所以我的删除方法如下所示：

```
Map<Integer, Boolean> allCheckboxes = newsForm.getCheckboxes();
Set<Integer> checkboxes = newsForm.getCheckboxes().keySet();
Set<Integer> checkedCheckboxes = new HashSet<>();
for(Integer id : checkboxes){
    boolean value = allCheckboxes.get(id);
    if(value){
        checkedCheckboxes.add(id);
    }
}
if (checkedCheckboxes.size() != 0) {
    newsDao.deleteNewsById(checkedCheckboxes.toArray());
} else {
    Integer[] delete = { newsForm.getNews().getId() };
    newsDao.deleteNewsById(delete);
}
newsForm.setNewsList(newsDao.getNewsList());
return list() + REDIERCT; 
```

在我的页面上，我使用 selectBooleanCheckbox：

```
<h:selectBooleanCheckbox id="checkbox" 
                            value="#{newsForm.checkboxes[news.id]}" /> 
```

所以我不明白为什么当我按 f5 时，我`Map<Integer, Boolean> allCheckboxes`的某些元素的值为 true。每次删除后我都会重新创建`Map<Integer, Boolean> allCheckboxes`

**更新** news.xhtml

```
<h:form id="main-form" onsubmit="return getSelectedCheckBoxes()">
                <h:commandLink styleClass="news-link" action="#{controller.list}"
                    value="#{messages['body.news']}" />
                &gt;&gt;
                <h:outputText value="#{messages['body.news.titles.list']}" />
                <br />
                <ui:repeat id="repeat" var="news" value="#{newsForm.newsList}">
                    <div id="news-table">
                        <div id="news-list-title">
                            <h:outputText value="#{messages['body.news.title']}" />
                            <h:outputText style="margin-left:10px;" value="#{news.newsTitle}" />
                        </div>
                        <div id="news-list-date">
                            <h:outputText value="#{news.newsDate}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </div>
                        <div id="news-list-brief">
                            <h:outputText value="#{news.brief}" />
                        </div>
                    </div>
                    <div id="links-style-area">
                        <h:commandLink action="#{controller.view(news.id)}"
                            value="#{messages['body.label.view']}" />
                        <h:commandLink action="#{controller.edit(news.id)}"
                            value="#{messages['body.label.edit']}" />
                        <h:selectBooleanCheckbox id="checkbox" 
                            value="#{newsForm.checkboxes[news.id]}" />
                    </div>
                </ui:repeat>
                <p id="button-style"> 
                    <h:commandButton styleClass="button" action="#{controller.delete}"
                        onclick="clicked = 'deleteList'"
                        value="#{messages['body.button.delete']}"
                        rendered="#{not(empty newsForm.newsList)}" />
                </p>

                <h:outputText id="checkbox-error"
                    value="#{messages['error.error.delete.list']}"
                    styleClass="errorMessage" />
            </h:form> 
```

NewsForm bean：

```
@ManagedBean(name="newsForm")
@SessionScoped
public class NewsBean implements Serializable{
    private static final long serialVersionUID = 1L;
    private News news;
    private List<News> newsList;
    private Map<Integer, Boolean> checkboxes = new HashMap<>();

    public NewsBean(){}

    public News getNews() {
        return news;
    }
    public void setNews(News news) {
        this.news = news;
    }

    public List<News> getNewsList() {
        return newsList;
    }
    public void setNewsList(List<News> newsList) {
        this.newsList = newsList;
    }

    public Map<Integer, Boolean> getCheckboxes() {
        return checkboxes;
    }

    public void setCheckboxes(Map<Integer, Boolean> checkboxes) {
        this.checkboxes = checkboxes;
    }
} 
```

控制器豆：

```
@ManagedBean(name="controller")
@SessionScoped
public class ControllerBean implements Serializable{

    private static final long serialVersionUID = 1L;
    private static final String PREVIOUS_PAGE = "previousPage";
    private static final String LIST = "news";
    private static final String EDIT = "edit";
    private static final String VIEW = "view";
    private static final String REDIERCT = "?faces-redirect=true";

    @ManagedProperty(value="#{jpaDao}")
    private INewsDao newsDao;
    @ManagedProperty(value="#{newsForm}")
    private NewsBean newsForm;

    public ControllerBean() {
    }

    @PostConstruct
    public void init() {
        try {
            list();
        } catch (NewsManagerException e) {
        }
    }

    public String list() throws NewsManagerException {
        newsForm.setNews(new News());
        newsForm.setCheckboxes(new HashMap<Integer, Boolean>());
        newsForm.setNewsList(newsDao.getNewsList());
        setAttribute(PREVIOUS_PAGE, LIST);
        return LIST;
    }

    public String add() {
        News news = new News();
        news.setNewsDate(new Date());
        newsForm.setNews(news);
        return EDIT;
    }

    private void setAttribute(String name, String value) {
        Map<String, Object> sessionMap = FacesContext.getCurrentInstance()
                .getExternalContext().getSessionMap();
        sessionMap.put(name, value);
    }

    private String getAttribute(String name) {
        Map<String, Object> sessionMap = FacesContext.getCurrentInstance()
                .getExternalContext().getSessionMap();
        return (String) sessionMap.get(name);
    }

    public String save() throws NewsManagerException {
        int id = newsForm.getNews().getId();
        setAttribute(PREVIOUS_PAGE, VIEW);
        if (id == 0) {
            newsDao.createNews(newsForm.getNews());
            return VIEW;
        }
        newsDao.editNews(newsForm.getNews());
        return VIEW;
    }

    public String edit(int id) throws NewsManagerException {
        News news = newsDao.getNewsById(id);
        newsForm.setNews(news);
        return EDIT;
    }

    public String view(int id) throws NewsManagerException {
        setAttribute(PREVIOUS_PAGE, VIEW);
        newsForm.setNews(newsDao.getNewsById(id));
        return VIEW;
    }

    public String cancel() throws NewsManagerException {
        String page = getAttribute(PREVIOUS_PAGE);
        News news = newsForm.getNews();
        if (news.getId() != 0) {
            int id = news.getId();
            news = newsDao.getNewsById(id);
            newsForm.setNews(news);
        }
        return page;
    }

    public String delete() throws NewsManagerException, IOException {
        setAttribute(PREVIOUS_PAGE, LIST);
        Map<Integer, Boolean> allCheckboxes = newsForm.getCheckboxes();
        Set<Integer> checkboxes = newsForm.getCheckboxes().keySet();
        Set<Integer> checkedCheckboxes = new HashSet<>();
        for(Integer id : checkboxes){
            boolean value = allCheckboxes.get(id);
            if(value){
                checkedCheckboxes.add(id);
            }
        }
        if (checkedCheckboxes.size() != 0) {
            newsDao.deleteNewsById(checkedCheckboxes.toArray());
        } else {
            Integer[] delete = { newsForm.getNews().getId() };
            newsDao.deleteNewsById(delete);
        }
        newsForm.setNewsList(newsDao.getNewsList());
        return list() + REDIERCT;
    }

    public INewsDao getNewsDao() {
        return newsDao;
    }

    public void setNewsDao(INewsDao newsDao) {
        this.newsDao = newsDao;
    }

    public NewsBean getNewsForm() {
        return newsForm;
    }

    public void setNewsForm(NewsBean newsForm) {
        this.newsForm = newsForm;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:19:32.713

您的具体问题是因为复选框值本质上是请求/视图范围的，但是您的托管 bean 是会话范围的，并且您在删除后没有清除选中的复选框值。

您需要将视图范围的数据放在视图范围而不是会话范围中。

```
@ManagedBean
@ViewScoped 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# asp.net-mvc - Mvc 4 CodeFirst 模型构建器外键

> ID：15337886
> 
> 赞同：1
> 
> 时间：2013-03-11T11:51:28.540
> 
> 标签：asp.net-mvc, entity-framework, collections, code-first

我现在尝试在 MVC 4 中编写这一部分，但我只是无法正确使用语法。我的实体中有一个用户类，每个用户都有消息。在我的消息中，将通过发送者或接收者链接到用户。所以这将有来回访问方法。这样我就可以提取消息并首先通过代码访问发送者和接收者是谁，或者访问他们通过用户发送或接收的消息。

我从他的脚本中删除了模型构建器信息，然后我又恢复了，如果您需要我发布任何其他信息，请告诉我。

```
public class User
    {
            [Key]
            public Guid UserId { get; set; }

            public String Username { get; set; }
            public String Email { get; set; }
            public String Password { get; set; }
            public DateTime? BirthDate { get; set; }
            public String SecurityAnswer { get; set; }
            public String SecurityQuestion { get; set; }

            public ICollection<Message> PrivateMessages { get; set; }
            public ICollection<Message> SentMessages { get; set; }

    }

public class Message
    {
        [Key]
        public long Id { get; set; }

        public User Reciever { get; set; }
        public User Sender { get; set; }

        public string Title { get; set; }
        public string Message { get; set; }
        public DateTime PostDate { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:01:29.933

我认为您正在寻找的是“InverseProperty”数据注释。看看这个 SO 问题： [Navigation Property without Declaring Foreign Key](https://stackoverflow.com/questions/5691780/navigation-property-without-declaring-foreign-key)

# java - 调用不同名称的 Java 方法

> ID：15337891
> 
> 赞同：0
> 
> 时间：2013-03-11T11:51:43.537
> 
> 标签：java, methods

我有一组记录，我想将其变量分配给 UI 中的一组标签。问题是我必须为要显示的每条记录编写重复的代码，例如：

```
label.setName1("")
label.setDate1("")

label.setName2("")
label.setDate2("") 
```

有没有办法增加方法中的数字，即通过循环或其他方式在集合中记录的位置，这样我就不必在我的类中有重复的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:56:26.423

您可以使用反射来做到这一点。您可以查看[此处](https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string)或[此处](https://stackoverflow.com/questions/3050967/java-dynamic-function-calling?lq=1)了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:57:12.327

是的，使用java反射。您可以获取具有某些名称的类的方法，然后使它们为您工作。

```
MyClass.getMethods() 
```

将返回您班级的所有方法。还有继承的方法。如果你只想要在你的类中声明的方法，你可以使用`getDeclaredMethods()`（阅读[这个](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethods%28%29)）

[这些将返回一个带有 Type Method](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html)的对象数组。之后，您可以为您的对象调用它们。

但我认为改变你的类结构并保留名称、标签和其他东西的数组而不是每个属性的单个属性会更好。

# jsf - p:message 不在 p:dialog 中显示

> ID：15337894
> 
> 赞同：4
> 
> 时间：2013-03-11T11:51:50.180
> 
> 标签：jsf, user-interface, jsf-2, primefaces

在 p:dialog`addCommodityDlg`我有一些文本字段。我正在尝试显示这些字段的验证消息。但没有达到。

代码：

```
 <p:dialog id="addCommodityDlg" widgetVar="createCommodity"
                   width="625" height="400" modal="true" header="Add Items">  

          <h:panelGrid columns="3">
             <h:outputLabel value="ID" />
             <h:inputText value="#{deliveryOderController.selectedCommodity.commodityId}" 
                          id="commodityIdTF" required="true"  />
             <p:message for="commodityIdTF"/>

             <h:outputLabel value="Name"/>
             <h:inputText value="#{deliveryOderController.selectedCommodity.commodityName}"
                          id="commodityNameTF"/>                                                                                   
             <p:message for="commodityNameTF"/>
          </h:panelGrid>

          <p:commandLink  styleClass="saveButtonLnk"  
                          actionListener="#{deliveryOderController.saveItems}" 
                          update=":createDOForm:transportUnitPnl">                    
         </p:commandLink>
  </p:dialog> 
```

如何在 p:dialog 中显示验证消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:13:33.277

给这些`p:message`组件一个 id 并将它们放在你的更新中`p:commandLink`：

```
<p:dialog id="addCommodityDlg" widgetVar="createCommodity"
                   width="625" height="400" modal="true" header="Add Items">  
             ...
             <p:message id="commodityIdTFMessage" for="commodityIdTF"/>
             ...
             <p:message for="commodityNameTF" id="commodityNameTFMessage" />
          </h:panelGrid>
          <p:commandLink  styleClass="saveButtonLnk"  
                          actionListener="#{deliveryOderController.saveItems}" 
                          update=":createDOForm:transportUnitPnl commodityIdTFMessage commodityNameTFMessage">                    
         </p:commandLink>
</p:dialog> 
```

# entity-framework - 我们可以创建列表吗 在运行时？

> ID：15337896
> 
> 赞同：2
> 
> 时间：2013-03-11T11:52:00.643
> 
> 标签：entity-framework, list, generics, asp.net-mvc-4, mvcjqgrid

是的，我想创建一个`List<T>`并且我的 T 是用户定义的数据类型，即 POCO 类，例如 UserProfile。
**为什么**：我正在使用[MvcJqGrid](https://github.com/robinvanderknaap/MvcJqGrid "MvcJqGrid")，我想编写一个通用代码来创建 Json 数据，所以在运行时我知道我需要从哪个类（表）中获取数据。

我的代码

```
public ActionResult TestGrid() 
{
    string spname = Request.Params["storedprocedurename"]; //spname = UserProfile 
    // i get this from the post data of MvcJqGrid i.e. user when create a jqgrid, in 
    // a view defines the table/spname from where data gets loaded in grid.
    MyEntities _context = new MYEntities();            
    List<UserProfile> userProfiles = _context.UserProfiles.ToList<UserProfile>();
    // here some code to create a json data and return 
} 
```

所以这个 UserProfile 我在这里硬编码，如果我在 Request.params 中得到 RoleMaster(eg) 那么我该如何实现呢。

**配置详情**
entityFramework Version=5.0.0.0 数据库优先方法
mvc 4
MvcJqGrid 1.0.9
.net FrameWork 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:06:26.590

如果 spName 是一个字符串，您可以通过以下方式获取类型：

```
Type genericType = Type.GetType(string.Format("YourNamespace.{0}", spName)); 
```

然后`userProfiles`下面将是`List<UserProfile>`使用代码的类型：

```
var method = _context.GetType().GetMember("Set")
                .Cast<MethodInfo>()
                .Where(x => x.IsGenericMethodDefinition)
                .FirstOrDefault();

var genericMethod = method.MakeGenericMethod(genericType);
dynamic invokeSet = genericMethod.Invoke(_context, null);

// this list will contain your List<UserProfile>
var userProfiles = Enumerable.ToList(invokeSet); 
```

欲了解更多信息：

1.  [反射、Linq 和 DbSet](https://stackoverflow.com/questions/6253017/reflection-linq-dbset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:01:37.173

这将做到：

```
public ActionResult Index()
{
    string spname = Request.Params["storedprocedurename"];
    Type t = typeof(MYEntities)
        .Assembly
        .GetType(string.Format("<namespace>.{0}", spname);
    dynamic instance = Activator.CreateInstance(t);
    return View(ListData(instance));
}

private List<T> ListData<T>(T instance)
    where T : class
{
    MYEntities context = new MYEntities();
    return context.Set<T>().ToList();
} 
```

# c# - 将编辑后的数据按行保存

> ID：15337903
> 
> 赞同：7
> 
> 时间：2013-03-11T11:52:31.070
> 
> 标签：c#, winforms, datagridview

我在`datagridview`. 我可以将记录正确地保存`datagridview`到 sql 中的数据库中。

现在，我想修改和更改一些记录并将这些更改保存在数据库中。我怎样才能做到这一点？我正在使用`datasource`附加到具有`datatable`.

```
private void Form1_Load(object sender, EventArgs e)
{
    this.cPDM0020TableAdapter.Fill(this.cpdm_dataset.CPDM0020);
}

private void btnSave_Click(object sender, EventArgs e)
{
    string code = dataGridView1[0, dataGridView1.CurrentCell.RowIndex].Value.ToString().ToUpper();
    string currency_Name = dataGridView1[1, dataGridView1.CurrentCell.RowIndex].Value.ToString().ToUpper();
    string boolBase = dataGridView1[2, dataGridView1.CurrentCell.RowIndex].Value.ToString();
    string local_per_Base = dataGridView1[3, dataGridView1.CurrentCell.RowIndex].Value.ToString();
    string base_per_Local = dataGridView1[4, dataGridView1.CurrentCell.RowIndex].Value.ToString();
    string insert_sql = "INSERT INTO centraldb.dbo.CPDM0020(Code,Currency_Name,Base,Local_per_Base,Base_per_Local)VAL‌​UES('" + 
        code + "','" + 
        currency_Name + "','" + 
        boolBase + "','" + 
        local_per_Base + "','" + 
        base_per_Local + "')";

    if (this.ExecuteSql(insert_sql))
    {
        MessageBox.Show("Record Inserted Successfully.");
    }
    else
    {
        MessageBox.Show("Insert Failed");
    }
}

public bool ExecuteSql(string command)
{

    SqlCommand sqlCommand = new SqlCommand(command, connection);
    connection.Open();
    sqlCommand.ExecuteNonQuery();
    this.cPDM0020TableAdapter.Fill(this.cpdm_dataset.CPDM0020);
    dataGridView1.DataSource = cpdm_dataset.CPDM0020;
    sqlCommand.Dispose();
    connection.Close();
    return true;
} 
```

我可以轻松地将新条目保存在数据库中`datagridview`，但我无法编辑已经存在的记录。编辑后单击保存按钮，它会再次显示以前的值。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:52:44.347

您的数据库不受您的应用程序控制；当数据发生变化时，它不会将某些事件发送回您的应用程序。您必须主动重新查询数据库以进行更改。

使用 DataGridView 的更典型的方法是首先将更改应用到数据的本地副本，然后使用 DataAdapter 将更改推送回数据库。这样可以避免在进行更改时刷新整个本地数据集。请参阅使用 DataAdapters (ADO.NET) 更新数据源。

基本顺序是：

1.  连接数据源，使用 DataAdapter.Fill() 填充数据表
2.  定义一个 UpdateCommand 或 InsertCommand，定义如何将本地 DataTable 中的数据推送到数据库
3.  在本地 DataTable 中添加一行
4.  调用 DataAdapter.Update() 将更新推送到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:43:56.420

只需使用 Select 命令首先检查表中是否存在记录

"Select * from centraldb.dbo.CPDM0020 where Code = '" + Code + "'";

你可以使用这个功能：

```
 public bool IsExistRecord(string Query)
    {
        try
        {
            DataTable DT = new DataTable();
            SqlCommand CMD = new SqlCommand(Query, Connection);
            SqlDataAdapter DA = new SqlDataAdapter(CMD);
            DA.Fill(DT);

            if (DT.Rows.Count > 0)
                return true;
            else
                return false;

        }
        catch (Exception ex)
        {
           return false;
        }
    } 
```

如果记录存在执行更新查询如果不存在执行插入查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:19:15.607

由于您使用的是[`dataSet`](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)，因此您可以在[`tableApdater`](http://msdn.microsoft.com/en-us/library/bz9tthwx%28v=vs.80%29.aspx). 这是关于 的文章[`Creating a Data Access Layer`](http://msdn.microsoft.com/en-us/library/aa581776.aspx)，因为您`winforms`可以在项目中应用该文章。

我希望这张图片能给你一个提示`save`，，，，`update`。`edit``delete`

![在此处输入图像描述](../Images/64cb2d4e5311671a1625dfe49ea51a32.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:55:43.493

尝试使用以下代码>

```
try
{
    var row = gvTransactions.CurrentRow;
    int ID= int.parse(row.Cells[0].Value.ToString());
    string abc=row.Cells[0].Value.ToString();
}
catch(exception ex)
{
} 
```

获取这样的值。

> 注意：不要在 catch 块中写任何东西

然后根据您的需要触发插入/更新查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:36:53.240

制作更新按钮：

```
private void btnUpdate_Click(object sender, EventArgs e) {
    string code = dataGridView1[0, dataGridView1.CurrentCell.RowIndex].Value.ToString().ToUpper();
    string currency_Name = dataGridView1[1, dataGridView1.CurrentCell.RowIndex].Value.ToString().ToUpper();
    string boolBase = dataGridView1[2, dataGridView1.CurrentCell.RowIndex].Value.ToString();
    string local_per_Base = dataGridView1[3, dataGridView1.CurrentCell.RowIndex].Value.ToString();
    string base_per_Local = dataGridView1[4, dataGridView1.CurrentCell.RowIndex].Value.ToString();
    string select_qry = "Select * from centraldb.dbo.CPDM0020 Where Code = '" + Code + "'";
   if(IsExistRecord(select_qry))
    {
    string update_qry = Update centraldb.dbo.CPDM0020 set Code,Currency_Name='" + currency_Name + "',Base='" + boolBase + "',Local_per_Base,Base_per_Local='" + base_per_Local + "' where code='" + code +"'";
    if (this.ExecuteSql(update_qry)) {
        MessageBox.Show("Record Updated Successfully.");
    } else {

        MessageBox.Show("Update Failed");
    }
    }
}
    //code taken from  Mohammad abumazen 
 public bool IsExistRecord(string Query)
 {
        DataTable DT = new DataTable();
        SqlCommand CMD = new SqlCommand(Query, Connection);
        SqlDataAdapter DA = new SqlDataAdapter(CMD);
        DA.Fill(DT);

        if (DT.Rows.Count > 0)
            return true;
        else
            return false;

    } 
```

# php - Memcache PHP问题：同一个键有2个不同的值

> ID：15337904
> 
> 赞同：1
> 
> 时间：2013-03-11T11:52:32.910
> 
> 标签：php, memcached

我对 memcache 有一个问题。

memcache 设置在 2 台服务器上。从代码中，在几个地方，variable_1 可以设置。

问题是有时它设置在 server1 variable_1 = x 和 server2 => variable_1 = y 上。它是从代码的不同部分设置的，使用相同的功能，可以很好地映射服务器（相同的服务器列表）

谢谢

# android - 在android中播放下一个或上一个视频

> ID：15337905
> 
> 赞同：1
> 
> 时间：2013-03-11T11:52:36.070
> 
> 标签：android

单击下一个和上一个按钮如何播放下一个或上一个视频？如何实现功能？我正在显示来自 mediastore 的视频的网格视图。我可以启动它们，但我想在单击下一个或上一个按钮时播放下一个或上一个视频。我可以单击按钮，我也得到了打印。但是我没有得到如何实现该功能。谁能帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:57:02.693

您可以通过它们的 id 或名称或参数中的某些内容来保存视频。并在 onClick 开始时将这些参数传递给播放器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:16:31.297

创建视频网址列表。在按下下一个获取下一个位置的 url 并加载视频并反转上一个。

# php - Facebook cron 任务

> ID：15337906
> 
> 赞同：0
> 
> 时间：2013-03-11T11:52:37.817
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试做一个简单的 Cron 工作，在 FB 墙上发布新闻。

我面临的问题是 - 需要用户登录。尝试了几种方法但无法通过登录表单（尝试 cURL 但没有成功）。

如果用户登录是手动完成的，他可以发布一条消息，但是我需要一份工作。当我搜索时，我找不到任何人说他们设法从 PHP 发布到 FB 墙上。

所以问题是：是否可以执行 cURL 登录/发布到 FB 墙。如果答案是肯定的，那么很高兴获得一些必须如何完成的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:16:14.310

您需要使用[此处](https://developers.facebook.com/docs/howtos/login/extending-tokens/)记录的**扩展访问令牌**。您可以调用如下端点来检索有效期为 60 天的扩展访问令牌。但它仍然需要您在到期后刷新它。`/oauth`

```
oauth/access_token?  
grant_type=fb_exchange_token&           
client_id=<YOUR_APP_ID>&
client_secret=<YOUR_APP_SECRET>&
fb_exchange_token=<PRESENT_SHORT_LIVED_ACCESS_TOKEN> 
```

**更新：-**
您需要首先获得一个**短期访问令牌**，在从应用程序列表中选择您的应用程序后，您可以从[Graph Explorer为您的帐户获取该令牌。](https://developers.facebook.com/tools/explorer)如果您想要其他通用用户的短期访问令牌，那么您需要为用户提供一种登录方式，以便您可以获得所需的值。
然后您需要检索**扩展访问令牌**并将其保存在安全的地方。
然后，对于每个下一步操作，您可以将此访问令牌作为访问令牌的值传递给您的脚本以代表用户发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T10:32:29.837

您可以使用离线访问权限来执行此操作。

```
 $loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'=> 'email,publish_stream,user_hometown,user_location,user_photos,friends_photos,
              user_photo_video_tags,friends_photo_video_tags,user_videos,video_upload,friends_videos,offline_access,manage_pages',
            'redirect_uri'  => 'your redirect url'
        )
); 

 $user            =   null;
 $user       = $facebook->getUser();
 if (!$user) {       
    echo '<script> top.location.href="'. $loginUrl .'"; </script>';
 } else {
    $access_token = $facebook->getAccessToken();
  } 
```

/* 通过用户 ID 将此访问令牌存储到数据库中，您可以使用此访问令牌字母在他们的墙上发布 */

延长现有短寿命用户 access_tokens 的有效期 ... 目前长寿命用户 access_token 的有效期为 60 天，而短寿命用户 access_tokens 目前的有效期为 1 到 2 小时。欲了解更多信息，请访问 [https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# blackberry - BBM SDK - 依赖检查器 - 打包代理和应用程序

> ID：15337907
> 
> 赞同：2
> 
> 时间：2013-03-11T11:52:41.057
> 
> 标签：blackberry, appworld

我开发了实现 Dependency Checker 功能的应用程序。现在我有两个应用程序，一个是我的代理应用程序，它检查 BBM 版本，另一个是我的真实应用程序，应该在 BBM 版本检查后加载。我测试了安装到手机上的应用程序。

谁能帮助我如何将这些文件打包成一个并上传到 BlackBerry World。

提前致谢！！！

# c# - HttpPost 和 HttpGet

> ID：15337910
> 
> 赞同：1
> 
> 时间：2013-03-11T11:52:53.283
> 
> 标签：c#, http-post, http-get

我的 HttpPost 需要一些帮助。我不知道在 HttpPost 上写什么才能在我的视图中使用我的工作代码

我写了一个代码来生成密码：

```
 private static string PasswordGenerator(int passwordLength, bool strongPassword)
{
    int seed = Random.Next(1, int.MaxValue);
    //const string allowedChars = "ABCDEFGHJKLMNOPQRSTUVWXYZ0123456789";
    const string allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789";
    const string specialCharacters = @"!#$%&'()*+,-./:;<=>?@[\]_";

    var chars = new char[passwordLength];
    var rd = new Random(seed);

    for (var i = 0 ; i < passwordLength; i++)
    {
        // If we are to use special characters
        if (strongPassword && i % Random.Next(3, passwordLength) == 0 )
        {
            chars[i] = specialCharacters[rd.Next(0 , specialCharacters.Length)];
        }
        else
        {
            chars[i] = allowedChars[rd.Next(0 , allowedChars.Length)];
        }
    }

    return new string(chars);
} 
```

现在我也有一个看法：

```
@{
    ViewBag.Title = "Index";
}

  @using (Html.BeginForm("Index", "PasswordGenerator", FormMethod.Post))
      {
<table class="passwordViewTable">

    <tr>
        <td>Password Length:</td>
        <td class="rechterKolom">  <input type="text" value="8" id="length_field"> (4 - 64 chars)</td>
    </tr>

    <tr>
        <td>Include Letters:</td>
        <td><input type="checkbox" id="checkbox_letters"  checked> ( e.g. abcdef) <br /></td>
    </tr>
    <tr>
        <td>Quantity:</td>
        <td>
            <select id="dropdown_quantity" class="styled">
               <option value="1">1</option>
               <option value="2">2</option>
            </select> <br />
       </td>
    </tr>

    <tr>
        <td><button type="submit" id="btn_submit">Submit</button> </td>
    </tr>
</table>
      } 
```

现在我不知道在 httpPost 函数上写什么来让代码在视图上工作

```
 [HttpGet]
        public ActionResult Generate()
        {
            return View("Index");
        }

        [HttpPost]
        public ActionResult PasswordGenerator() 
        {
           ??
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:03:31.047

正如 KD 建议的那样，我会为所有表单元素添加名称属性。

```
<input type="text" name="length" value="8" id="length_field">
<input type="checkbox" id="includeLetters"  checked> 
```

ETC...

但我会让模型绑定器通过指定参数类型为我们提供强类型值。

```
[HttpPost]
public ActionResult PasswordGenerator(int length, bool includeLetters, etc...) 
{

} 
```

如果参数的数量超出了您的承受能力，只需创建一个具有 [与您的表单字段匹配的属性的对象。IE：

```
public class PasswordGeneratorArguments {
    public int Length {get;set}
    public bool IncludeLetters {get;set}
    etc...
} 
```

并将其用作论据

```
[HttpPost]
public ActionResult PasswordGenerator(PasswordGeneratorArguments model) 
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:56:08.273

您所有的 html 输入都应该有“名称”属性分配给那些.. 例如

```
 <tr>
        <td>Password Length:</td>
        <td class="rechterKolom">  
           <input type="text" name="length_field" value="8" id="length_field"> (4 - 64 chars)
        </td>
    </tr> 
```

这是您必须在帖子中编写的代码

```
[HttpPost]
  public ActionResult PasswordGenerator(FormCollection collection) 
 {
       //access your fields here like this 
       var length = collection["length_field"];
       // do the operation you need here
 } 
```

基本上你应该在 mvc 中使用强类型视图，这样你就可以在你的 POST 操作中获得填充的模型，但是由于你没有添加任何类型特定的视图，你可以通过 Form 集合访问发布的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:56:39.607

你哪里有？？您需要输入：`<nameofclass>.PasswordGenerator(...)`“...”应该是您的`PasswordGenerator()`方法所需的参数，并且`<nameofclass>`应该是您的静态方法所在的类的名称。

例如，您的代码可能看起来有点像这样，在您的视图中有更多的连接：

```
 [HttpGet]
    public ActionResult Generate()
    {
        return View("Index");
    }

    [HttpPost]
    public ActionResult PasswordGenerator(PasswordModel model) 
    {
       <nameofclass>.PasswordGenerator(model.Password.Length, model.StrongPassword);
    } 
```

# data-distribution-service - 如何在 idl 中为 DDS 建模

> ID：15337914
> 
> 赞同：2
> 
> 时间：2013-03-11T11:53:00.553
> 
> 标签：data-distribution-service

我是 DDS 和 IDL 的新手，我希望有人可以就如何在 IDL 中建模以下内容提供一些建议。

这是基于 OO 角度的模型，它只是作为一个简单的示例： ![在此处输入图像描述](../Images/95323ee7b00ce7f051005dbff6bd7387.png)

这是我在 IDL 中的初始数据模型 - 是否正确完成？如何在 IDL 中“建模”继承和依赖关系？网上的很多例子都很简单——我发现的那些太简单了......

```
module test{
struct carpool{
    long id; //@key
    string name;
    sequence<car> cars;
};

struct car{
    long id; //@key
    string color;
};
////the following inherits from car
struct sedan{
    string extra_equipment;
};

struct station_car{
    integer number_of_doors;
};
}; 
```

这只是一个虚构的继承*示例*，并不是最好的;o）

这是正确的还是有更好的建模方法 - 任何人都可以提供一个好的“HOWTO”链接，用于使用 IDL for DDS？注意：我正在使用 RTI Connext DDS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:39:31.663

IDL 中有两个方面值得关注。

首先是继承机制，传统上 DDS 不支持这种机制，但现在借助[可扩展和动态主题类型](http://www.omg.org/spec/DDS-XTypes/)规范。下面的片段显示了如何使用它。但是，您是否真的需要这种继承机制取决于您将如何使用数据。您是否打算订阅基类`car`，还是只订阅派生类？在第一种情况下，您将需要真正的继承。在第二种情况下，您可以通过将汽车基础结构嵌入到所有派生汽车中来对继承进行建模。

`carpool`然后还有你的和`car`类之间的一对多关系的问题。使用序列通常不是最好的方法。假设您将单个汽车添加到您的`carpool`中，那么整个`carpool`结构及其所有汽车都需要重新发布。这可能是您想要的，但通常最好在类上使用“外键”`car`来引用`carpool`它所属的类。这很像常规数据库设计的工作方式。`carpoolId`使用这种方法，应用程序负责通过属性将它们与汽车相关联来重建完整的拼车。then 的更新`carpool`通过`car`结构发生。这确实需要`car`了解`carpool`它属于虽然。

可能的示例片段：

```
module test {

  struct carpool {
    long   id; //@key
    string name;
  };

  struct car {
    long   id; //@key
    long   carpoolId; // refers to carpool this car belongs to
    string color;
  };

  struct sedan : car {
    string extra_equipment;
  };

  struct station_car : car {
    integer number_of_doors;
  };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:25:28.440

新的 DDS 可扩展类型规范引入了对 IDL 中结构继承的支持。如果您使用 RTI Connext DDS 5.0.0 或更高版本，您已经可以利用此功能。

语法是：

```
struct car {
    long id; //@key
    string color;
};

struct sedan : car {
    string extra_equipment;
};

struct station_car : car {
    integer number_of_doors;
}; 
```

等等……

杰拉尔多

# azure - 将 Azure 虚拟机添加到现有可用性集

> ID：15337916
> 
> 赞同：5
> 
> 时间：2013-03-11T11:53:05.793
> 
> 标签：azure

我想在 Azure 中创建两个不应相互连接的虚拟机。我创建了第一台虚拟机，并在其创建过程中创建了一个可用性集。

现在，当我创建第二个虚拟机时，我没有在可用性集的下拉列表中获得作为第一个虚拟机的一部分创建的可用性集。

但是，如果我尝试连接第二个虚拟机作为第一个虚拟机的一部分，那么我可以看到作为第一个虚拟机的一部分创建的可用性集。

虚拟机是否必须相互连接才能将它们添加到同一个可用性集中？这是仅来自 azure 门户的限制，并且有使用 powershell 的解决方法吗？

更新：

如果我们连接两个虚拟机，那么我们可以获得可用性集的好处。但是，同时两个虚拟机都成为同一云服务的一部分，因此由不支持粘性会话的 azure 进行负载平衡。

我的场景是我有相同的前端，需要支持粘性会话。因此，我不想将它们相互连接。但是，我想获得可用性集文章中提到的可用性集的[好处](http://www.windowsazure.com/en-us/manage/windows/common-tasks/manage-vm-availability/)。

那么我可以为两个未相互连接的相同虚拟机设置可用性集吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:43:40.307

术语“可用性集”意味着您希望将一个或多个 VM 置于一个服务组中，以便在停机事件期间最大限度地提高可用性。所以你在 Azure 门户上看到的是正确的行为，但是你可能对可用性集有一些误解。[您可以在此处](http://www.windowsazure.com/en-us/manage/windows/common-tasks/manage-vm-availability/)阅读有关“可用性集”的更多信息。

因此，当您尝试连接第二个虚拟机作为第一个虚拟机的一部分时，您确实会看到可用性集，因为这样您希望您的虚拟机使用第一个虚拟机的设置并将另一个虚拟机添加到同一组以最大化可用性。这第二个 VM 成为第一个 VM 的一部分。

当您创建一个独立的虚拟机（调用是第二个或第三个或任何）时，您实际上是在创建一个全新的虚拟机，它将独立于您可能拥有或没有的任何其他虚拟机运行，这就是为什么您看不到“可用性集”您可以基于此新 VM 创建一个新的“可用性集”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T07:13:56.760

# 使用 Powershell 设置可用性集

```
Get-AzureVM -ServiceName "savilltech101" -Name "WebSrv3" | Set-AzureAvailabilitySet -AvailabilitySetName "IIS" | Update-AzureVM 
```

# python - 覆盖 clean()，数据不可访问

> ID：15337918
> 
> 赞同：1
> 
> 时间：2013-03-11T11:53:08.823
> 
> 标签：python, django, django-forms

我想扩展现有表单，以便在提交时发送电子邮件：

```
class BaseForm(forms.Form):

    field = forms.CharField()

    def clean(self):
        "do stuff"
        return self.cleaned_data

class MyForm(BaseForm):

    def clean_field(self):
        "do some validation"
        return self.cleaned_data['field']

class MyEmailingForm(MyForm):
    def clean(self):
        super(MyEmailingForm, self).clean()
        send_mail('Form data',
          self.cleaned_data['field'],
          'Form <noreply@myform.co.uk>',
          ["formdata@myform.co.uk"],
          fail_silently=True) 
```

问题是`self.cleaned_data['field']`无法从超类访问，我得到一个`KeyError`. 我需要做什么？

## 编辑

我想我把事情过于简单化了。代码已经更新，我认为问题可能是双重子类化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:14:52.873

我相信只将 self.cleaned_data 返回到基类应该有效。

```
class MyForm(forms.Form):
    field = forms.CharField()

    def clean(self):
        "do stuff"
        return self.cleaned_data

    class MyEmailingForm(MyForm):
        def clean(self):
            super(MyEmailingForm, self).clean()
            send_mail('Form data',
              self.cleaned_data['field'],
              'Form <noreply@myform.co.uk>',
              ["formdata@myform.co.uk"],
              fail_silently=True)
              return self.cleaned_data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:56:34.613

您需要`self.cleaned_data`从基类和子类方法中返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:09:35.093

实际上，`self.cleaned_data['field']`您在 base 中设置的字段不包含在`cleaned_data`.

尝试

```
class MyForm(forms.Form):
    field = forms.CharField()

    def clean(self):
        cd = self.cleaned_data
        "do stuff with cd"
        return cd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:00:20.320

您必须先使用该`is_valid()`方法。

[https://docs.djangoproject.com/en/dev/topics/forms/](https://docs.djangoproject.com/en/dev/topics/forms/)

# sharepoint - 什么 jQuery 脚本可用于添加颜色通知框？

> ID：15337919
> 
> 赞同：1
> 
> 时间：2013-03-11T11:53:17.683
> 
> 标签：sharepoint, colors, notifications, enterprise-library, document

我正在尝试在 SharePoint 文档库中实现一个警报按钮，该按钮将在上传数据时在文件夹旁边提供一个颜色框。什么 jQuery 脚本最适合这个应用程序？

# iphone - IOS 6 上的谷歌地图

> ID：15337924
> 
> 赞同：-1
> 
> 时间：2013-03-11T11:53:27.493
> 
> 标签：iphone, google-maps, ios6

我有一个使用地图的应用程序。在`iOS 5`和下面，它使用了，但在显示中`Google Maps`运行的相同应用程序。但是，Apple Maps 有一些不准确之处。是否可以在我的应用程序上使用，如果可以，如何使用？`iOS 6``Apple Maps``Google Maps``iOS 6`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:00:41.723

Google 在[https://developers.google.com/maps/documentation/ios/上提供了官方 SDK](https://developers.google.com/maps/documentation/ios/)

# javascript - 绝对路径的Javascript智能感知在VS 2012中不起作用

> ID：15337927
> 
> 赞同：2
> 
> 时间：2013-03-11T11:53:39.343
> 
> 标签：javascript, jquery, visual-studio-2012, intellisense

我正在尝试为 jQuery 设置智能感知。我在另一个项目中有 jquery 文件，该文件未包含在当前解决方案中。在我的 mygrid.js 文件中，我定义：

```
///<reference path="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.js" /> 
```

我看到 VS 请求[http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2-vsdoc.js](http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2-vsdoc.js) 但智能感知不起作用。我试过：

```
///<reference path="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2-vsdoc.js" /> 
```

也没有结果。如果我在 mygrid.js 附近复制 jquery-1.8.2-vsdoc.js，我会得到它的工作，将其包含到项目中并添加

```
///<reference path="/jquery-1.8.2-vsdoc.js" /> 
```

但我不喜欢这样的做法。它迫使我将垃圾内容复制到每个项目中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:22:08.627

据我所知，不可能引用远程 javascript 文件。实际上，根据[http://msdn.microsoft.com/en-us/library/vstudio/bb385682.aspx ，引用指令中的所有绝对路径都被忽略](http://msdn.microsoft.com/en-us/library/vstudio/bb385682.aspx)

如果您经常使用这些库，您可以将它们保存在本地计算机上的中央位置，这样您只需下载一次，然后将它们添加到全局 javascript 智能感知范围，如[http 的“更智能的 JavaScript 参考”部分中所述： //www.hanselman.com/blog/FeaturesNOONENOTICEDInVisualStudio11ExpressBetaForWeb.aspx](http://www.hanselman.com/blog/FeaturesNOONENOTICEDInVisualStudio11ExpressBetaForWeb.aspx)。总结一下，转到工具 | 选项 | 文本编辑器 | 语言 | JavaScript | 参考，或者您只需按 Ctrl-Q 即可调出搜索功能，然后键入“参考”并单击“文本编辑器 -> JavaScript -> IntelliSense -> 参考”选项。单击“...”按钮并浏览到要添加的文件，选择它然后添加它。

# android - 在 Widget.xml 文件中的 ImageView 中读取 android:src

> ID：15337930
> 
> 赞同：0
> 
> 时间：2013-03-11T11:53:43.517
> 
> 标签：android, image, widget

我有一个在两个图像之间切换的小部件，每次用户点击它时，小部件都会发生变化所以我为这个小部件定义了一个布局，如下所示

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/parrotstate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:clickable="true"
        android:src="@drawable/widget_awake" />

</RelativeLayout> 
```

在 AppWidgetProvide`class`中，我需要读取属性 android:src 以了解设置了哪个图像。通常我`findViewById`在 Activity 类中使​​用，但这里是 AppWidgetProvide`class`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:04:47.463

可能这个问题是重复的，试试这个帖子：[如何在 appwidgetprovider 中找到视图 ID？](https://stackoverflow.com/questions/4666687/how-to-find-view-id-in-appwidgetprovider)

使用构造函数，您可以获得 Remoteview：

```
RemoteViews(String packageName, int layoutId)
//Create a new RemoteViews object that will display the views contained in the specified layout file. 
```

应用返回视图

```
apply(Context context, ViewGroup parent)
//Inflates the view hierarchy represented by this object and applies all of the actions. 
```

链接：http: [//developer.android.com/reference/android/widget/RemoteViews.html](http://developer.android.com/reference/android/widget/RemoteViews.html)

# c# - microsoft xml 文件中缺少根元素

> ID：15337931
> 
> 赞同：0
> 
> 时间：2013-03-11T11:53:47.800
> 
> 标签：c#, file, xml-serialization

我尝试打开`xml`这样创建的文件：

```
 public List<MyClass> OpenFile(string path)
        {
            try
            {
                XmlSerializer deserializer = new XmlSerializer(typeof(List<MyClass>));
                TextReader textReader = new StreamReader(path);
                List<MyClass> _newList = (List<MyClass>)deserializer.Deserialize(textReader);
                textReader.Close();
                retrun _newList ;
            }
            catch (Exception e)
            {
                return null;
            }
        } 
```

我得到错误：`Root element is missing.`

我看到几个地方出现错误，因为该行：`<? Xml version = "1.0"?>`缺少。

我不明白为什么它对我不起作用，我使用 microsoft xml 创建了文件（过去它对我有用，我在我的类中添加了一个 int 变量，然后一切都出错了）：

```
 public void SaveFile(string path,List<MyClass> list)
    {
        try
        {
            XmlSerializer serializer = new XmlSerializer(typeof(List<MyClass>));
            TextWriter textWriter = new StreamWriter(path);
            serializer.Serialize(textWriter,list);
            textWriter.Close();
        }
        catch (Exception e)
        {

        }

    } 
```

有什么问题？

**对于每个问自己的人，是的，我在文件中有这一行！**

# c - 如何在我的 C 源代码中包含命令“wget”？

> ID：15337932
> 
> 赞同：1
> 
> 时间：2013-03-11T11:53:49.230
> 
> 标签：c, web-crawler, wget

我需要运行一个爬取网站的程序，并且我已经有了一个算法和部分代码。问题是，我不知道如何插入`wget`到我的源代码中。`wget`我们的学生助理暗示应该在(之前使用某种关键字或函数`system`，我认为或其他东西，但我不太确定)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:07:28.027

何时**不**使用`system`：

1.）当您想将程序分发到不同的环境时，您通过系统调用的程序不可用

2.）在安全相关的环境中，您必须确保您调用的程序确实是您想要的程序

3.) 当你想做的事情可以用 10-20 行 C 代码轻松完成时

4.) 在性能关键型应用中

所以，你应该`system`几乎从不使用。

相反，要完成同样的事情，您可以使用 libcurl，正如 David 建议的那样（他的答案似乎已经消失了......），或者进行一些套接字编程（毕竟是 C）。

在现实世界的场景中，我可能只是默认使用不同的语言编写爬虫。Web 请求和复杂的字符串处理不一定是 C 的强项，而且绝对不是很方便使用:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:56:30.217

您可以使用[system()](http://www.cplusplus.com/reference/cstdlib/system/)命令。

在您的情况下（可能）：

```
system("/bin/wget"); 
```

但是如果你真的想`wget`用参数调用，那么你应该使用[execl()](http://linux.die.net/man/3/execl)。

```
execl("/bin/wget", "http://anyadress.com/file"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:22:01.833

每当您想从 C 程序运行 shell 命令时，您都可以使用`system("shell command")`. 在您的情况下

```
system("wget"); 
```

注意 - wget 是一个可执行文件，其位置已添加到路径变量中，因此无需显式指定路径。

- 例子 -

```
#include <stdio.h>

#define BUFFLEN 2500

int main()
{

char web_address[BUFFLEN] = "www.google.com"; 
system("wget 'web_address' "); 
return 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:57:51.070

该`system`命令用于执行 shell 命令。[人系统](http://www.manpagez.com/man/3/system/)

# entity-framework - 实体框架将一个数据表的内容添加到同一数据库中的另一个数据表

> ID：15337936
> 
> 赞同：1
> 
> 时间：2013-03-11T11:54:12.987
> 
> 标签：entity-framework, data-binding, entity

如何使用实体框架将一个数据表的记录添加到另一个数据表？使用数据集如下：

```
 private void sourceTabletransfer()
    {
        foreach (DataRow sourceTableRow in myDataSet.Tables["sourceTable"].Rows)
        {

            DataRow destinationTablerow = myDataSet.Tables["destinationTable"].NewRow();

            destinationTablerow["date"] = sourceTableRow["date"];
            destinationTablerow["varchar1"] = sourceTableRow["varchar1"];
            destinationTablerow["int1"] = sourceTableRow["int1"];
            myDataSet.Tables["destinationTable"].Rows.Add(destinationTablerow);
        }
        this.destinationTableBindingSource.EndEdit();
        this.destinationTableTableAdapter.Update(myDataSet);
    } 
```

如何使用实体框架执行上述操作？提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:58:28.747

假设您有两个表及其对应的 PoCo 类。将它们命名为 ParentEntity 和 ChildEntity。

```
foreach(var parentEntity in lstParentEntities)
{
ChildEntity  child=new ChildEntity();
child.prop1=parentEntity.Prop1;
child.prop2=parentEntity.Prop2;
child.prop3=parentEntity.Prop3;
context.AddObject(child);
}
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:16:03.377

另一种选择 - 使用名为 Source 和 Destination 的 POCO 类；

```
context.Destination.Prop1 = Source.Prop1
context.SaveChanges(); 
```

另外-（如果我可以访问它，我会将其添加为评论:)）您需要使用 context.SaveChanges()，而不是 context.Save()

# python - 并行对两个大型 numpy 数组进行矢量化迭代

> ID：15337939
> 
> 赞同：0
> 
> 时间：2013-03-11T11:54:20.980
> 
> 标签：python, numpy, vectorization

`numpy.core.memmap.memmap`我有两个名为`data`and的大型数组`new_data`，其中包含 > 700 万个 float32 项。

我需要在我目前正在这样做的同一个循环中对它们进行迭代。

```
for i in range(0,len(data)):
  if new_data[i] == 0: continue
  combo = ( data[i], new_data[i] )
  if not combo in new_values_map: new_values_map[combo] = available_values.pop()
  data[i] = new_values_map[combo] 
```

然而，这是不合理的慢，所以我认为使用 numpy 的矢量化函数是要走的路。

是否可以使用索引进行矢量化 - 以便矢量化数组可以将其项目与另一个数组中的相应项目进行比较？

我想过压缩这两个数组，但我想这会导致准备工作不合理的开销？

还有其他方法可以优化此操作吗？

对于上下文：目标是有效地合并两个数组，以便两个数组之间对应值的每个唯一组合由结果数组中的不同值表示，除了 new_data 数组中的零被忽略。数组代表 3D 位图图像。

编辑：`available_values`是一组尚未使用的值，`data`并且在对该循环的调用中持续存在。`new_values_map`另一方面，在每次使用此循环之前将其重置为空字典。

EDIT2：数据数组只包含整数，即：它被初始化为零，然后每次使用这个循环时都会使用不同`new_data`的值填充更多的值，`available_values`这些值最初是一个整数范围。`new_data`理论上可以是任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:09:47.250

在回答您有关矢量化的问题时，答案可能是肯定的，尽管您需要澄清`available_values`包含什么以及如何使用它，因为这是矢量化的核心。

您的解决方案可能看起来像这样......

```
indices = new_data != 0

data[indices] = available_values 
```

在这种情况下，如果`available_values`可以将其视为一组值，其中我们将第一个值分配给`data`其中 new_data 不为 0 的第一个值，只要`available_values`是一个 numpy 数组，它应该可以工作。

假设取值 0-255，那么您可以为 new_data 和 data 中的每对可能的值构造一个`new_data`具有唯一条目的数组，如下所示：`data``available_values`

```
available_data = numpy.array(xrange(0, 255*255)).reshape((255, 255))
indices = new_data != 0
data[indices] = available_data[data[indices], new_data[indices]] 
```

显然，`available_data`可以是您想要的任何映射。上面的内容应该非常快`available_data`（特别是如果你只构建`available_data`一次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:04:06.340

似乎替换前两行循环以产生：

```
for i in numpy.where(new_data != 0)[0]:
  combo = ( data[i], new_data[i] )
  if not combo in new_values_map: new_values_map[combo] = available_values.pop()
  data[i] = new_values_map[combo] 
```

有想要的效果。

因此，循环中的大部分时间都花在遇到`new_data`. 真的不明白为什么这么多空迭代如此昂贵，也许有一天我会......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:18:10.360

Python 为您提供了处理大型数据数组的强大工具：[生成器](http://wiki.python.org/moin/Generators)和[迭代器](http://docs.python.org/2/library/stdtypes.html#iterator-types)

基本上，它们将允许访问您的数据，因为它们是常规列表，而不是一次将它们提取到内存中，而是逐个访问。

如果一次访问两个大数组，您可以

```
for item_a, item_b in izip(data, new_data):
   #... do you stuff here 
```

[izip](http://docs.python.org/2/library/itertools.html#itertools.izip)创建了一个迭代器，它一次迭代数组的元素，但它会根据需要选择片段，而不是一次全部。

# jquery - 计算表单中 div 标签的数量

> ID：15337942
> 
> 赞同：1
> 
> 时间：2013-03-11T11:54:31.377
> 
> 标签：jquery, html

是否可以使用 jQuery 计算特定表单中 div 标签的数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:56:17.810

当然是的。

```
// using context
var myform = $('form');

var divs = $('div', myform).length;

// getting directly
var divs = $('form div').length;

// through find
var divs = $('form').find('div').length; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T11:56:31.890

试试这样

```
var totalDivCount= $('#formid div').length;

var totalDivCountThroughFind= $('form').find('div').length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:57:29.097

你可以试试`.size()`方法

```
$("#formID div").size() 
```

# java - 绘制平滑曲线

> ID：15337945
> 
> 赞同：2
> 
> 时间：2013-03-11T11:54:36.887
> 
> 标签：java, android

我想创建更平滑的曲线，而不仅仅是线条角度。这是我现在画的图：

![在此处输入图像描述](../Images/176bf6e49d4ac563f045950c676b1707.png)

这是我的代码：

```
case FREEHAND:
    float[] pts;
    float[] ptk;
    ptk = new float[2];
    imageMatrix.invert(inv);            
    if (mCurrentShape == null) {                
        mCurrentShape = new Line();
        pts = new float[2];
        ((Line) mCurrentShape).setBegin(mDownPoint);
        pts[0] = (float)((Line) mCurrentShape).getBegin().getX();
        pts[1] = (float)((Line) mCurrentShape).getBegin().getY();
        inv.mapPoints(pts);
        ((Line) mCurrentShape).getPath().moveTo(pts[0], pts[1]);
    }
    ptk[0] = (float)currentPoint.getX();
    ptk[1] = (float)currentPoint.getY();
    inv.mapPoints(ptk);
    ((Line) mCurrentShape).getPath().lineTo(ptk[0], ptk[1]);
    break; 
```

手绘代码：

```
package aa.bb.cc;
import java.util.ArrayList;
import android.graphics.Path;

public class FreeHand extends Shape{
    private ArrayList<Path>_graphics;

    public FreeHand(){
        super();
        _graphics = new ArrayList<Path>();
    }

    public ArrayList<Path> getGraphicsPath(){
        return _graphics;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-01-02T23:14:40.120

我有一个代码使用二次贝塞尔线来平滑点。事实证明效果很好。它也非常有效。使用以下类构建您的平滑路径。每次你有一个新点时，用`addPoint(x, y)`来添加它。完成后，您可以调用`constructPath()`以获取平滑路径。与评论中的解决方案相比，例如“corner.squareup.com/2012/07/smoother-signatures.html”，我的解决方案避免了原始路径非常尖角处的伪影。

```
public class BezierCurveConstructor {
Path path;

PointF previousPoint;
int pointCounter = 0;

public BezierCurveConstructor() {
    reset();
}

/**
 * reset the path
 */
public void reset() {
    path = new Path();
    pointCounter = 0;
}

public void addPoint(float x, float y) {

    pointCounter ++;
    if (pointCounter == 1) {
        path.moveTo(x, y);
        previousPoint = new PointF(x, y);
        return;
    }

    PointF mid = new PointF((x + previousPoint.x) / 2.0f, (y + previousPoint.y) / 2.0f);

    if (pointCounter < 3) {
        path.lineTo(mid.x, mid.y);
    } else {
        path.quadTo(previousPoint.x, previousPoint.y, mid.x, mid.y);
    }
    previousPoint = new PointF(x, y);
}

/**
 * construct path by points
 *
 * @return
 */
public Path constructPath() {
    return path;
} 
```

}

这条路径包含一个二次贝塞尔曲线列表，这些曲线穿过前一个点的所有中间点和您的触摸点的下一个点。请注意，此路径具有恒定的二阶导数，但一阶导数在粘合点处匹配。我们可以通过以下推导来说明为什么会这样：

`Denote the list of points as p_0, p_1, ... p_n, (these can be points in R^n) let c_i = (pi+p_{i_1})/2 as the middle point of pi and p_{i-1}. We can model the quadratic Bezier line as following, here t is a number between 0 and 1: G_i(t)=(1-t)^2c_i +2(1-t)tp_i + t^2 c_{i+1} Consider the derivative against t: G_i'(t) = -2(1-t)c_i + 2(1-t-t)p_i + 2t c_{i+1}, and G_i''(t) = 2c_i -4p_i + 2c_{i+1} = 2p_{i-1} + 2 p_{i+1} Thus the second derivatives are constants. To show that the first derivatives match at each c_i, we can plug in t=0, and t=1. G_i'(0) = 2p_i-2c_i = p_i - p_{i-1} G_{i-1}'(1) = -2p_{i-1}+2c_i = p_i - p_{i-1} = G_i'(0)`

顺便说一句，您可以查看 wiki 以获得贝塞尔曲线的清晰定义[https://en.wikipedia.org/wiki/B%C3%A9zier_curve](https://en.wikipedia.org/wiki/B%C3%A9zier_curve)

查看此链接以获取原始代码： [https ://github.com/lyang36/codeNotes/blob/master/BezierCurveConstructor.java](https://github.com/lyang36/codeNotes/blob/master/BezierCurveConstructor.java)

# windows-phone-8 - 如何在 windows phone 8 中访问 Longlistselector 子对象

> ID：15337946
> 
> 赞同：1
> 
> 时间：2013-03-11T11:54:37.553
> 
> 标签：windows-phone-8, longlistselector

我如何才能访问 longlistselector 项目。

我的 XAML 是：

```
<Grid x:Name="ContentPanel" Grid.Row="1" HorizontalAlignment="Left" Height="Auto" Margin="30,20,0,0" Grid.RowSpan="2" VerticalAlignment="Top" Width="420">
  <phone:LongListSelector Name="longList" HorizontalAlignment="Left" Height="Auto" Margin="0" VerticalAlignment="Top" Width="420">
    <phone:LongListSelector.ItemTemplate>
      <DataTemplate>
        <Grid Background="Transparent">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="210" />
            <ColumnDefinition Width="210" />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="160" />
          </Grid.RowDefinitions>
          <Image Name="first" Width="210" Margin="0" Source="{Binding ImageName}" Grid.Column="1" VerticalAlignment="Top" HorizontalAlignment="Left" />
          <Image Name="second" Width="210" Margin="0" Source="{Binding ImageName}" Grid.Column="2" VerticalAlignment="Top" HorizontalAlignment="Right" />
        </Grid>
      </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
  </phone:LongListSelector>
</Grid> 
```

我想**首先**和**第二次访问图像对象**

我需要从包含**ImageName**字符串作为变量（保存 jpg 图像的路径）的类列表中连续分配这两个图像对象的源，然后将下两个图像对象分配到下一行，依此类推..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T06:13:15.717

将新文件夹添加到解决方案并将文件夹重命名为“模型”

然后添加一个名为“ImageSourceClass”的新类

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TestApp.Model
{
    public class ImageSourceClass
    {
        public string ImageUrl { get; set; }

        public ImageSourceClass(string imageUrl)
        {
            this.ImageUrl = imageUrl;
        }
    }

    public class ImageData : ObservableCollection<ImageSourceClass>
    {
        public ImageData()
        {
            Add(new ImageSourceClass("/Assets/Images/Fruits.jpg"));
            Add(new ImageSourceClass("/Assets/Images/Beignets.jpg"));
            Add(new ImageSourceClass("/Assets/Images/Dessert.jpg"));
            Add(new ImageSourceClass("/Assets/Images/Pretzel.jpg"));
            Add(new ImageSourceClass("/Assets/Images/Shrimp.jpg"));
            Add(new ImageSourceClass("/Assets/Images/SteakSandwich.jpg"));
        }
    }
} 
```

主页.xaml

将以下命名空间添加到 MainPage.xaml

注意：[根据您的解决方案名称命名空间可能会有所不同]

xmlns:MyModel="clr-namespace:TestApp.Model"

```
<Grid x:Name="LayoutRoot" Background="Transparent" >
<Grid.Resources>
      <MyModel:ImageData x:Key="imageDatasource"></MyModel:ImageData>
</Grid.Resources>
 <phone:LongListSelector x:Name="lstRestoItems" ItemsSource="{StaticResource imageDatasource}" LayoutMode="List">
     <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding ImageUrl}" Height="100" Width="100"         HorizontalAlignment="Left"></Image>
        </DataTemplate>
     </phone:LongListSelector.ItemTemplate>
 </phone:LongListSelector>

</Grid> 
```

我们完成了，现在只需清理并重新构建您的应用程序并按 f5

# iphone - UIImagePNGRepresentation 增加输出文件大小而不是减小大小

> ID：15337947
> 
> 赞同：3
> 
> 时间：2013-03-11T11:54:39.730
> 
> 标签：iphone, ios, png, jpeg

如果我们使用 UIImagePNGRepresentation 转换 JPEG 文件，那么新的文件大小会更大。如果我们使用 UIImagePNGRepresentation 转换 PNG 文件，那么新文件的大小会更小。

为什么在这里将 JPEG 转换为 PNG 成本更高？

谢谢吉腾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:05:57.110

要减小图像大小，您可以使用以下代码

```
CGFloat compression = 222.0f;
CGFloat maxCompression = 202.1f;
int maxFileSize = 160*165; //fill your size need

NSData *imageDat = UIImageJPEGRepresentation(image.image, compression);

while ([imageDat length] > maxFileSize && compression > maxCompression)
{
compression -= 0.1222;
imageDat = UIImageJPEGRepresentation(decodedimage.image, compression);
}
NSLog(@"image compressed success");

[image setImage:[UIImage imageWithData:imageDat]];//image is my UIImageview 
```

跳这个有帮助！

# linux - 将文件复制到 vagrant 远程环境

> ID：15337950
> 
> 赞同：0
> 
> 时间：2013-03-11T11:54:42.147
> 
> 标签：linux, shell, remote-access, vagrant, sshfs

我正在通过[vagrant](http://www.vagrantup.com/)开发环境在远程代码库上工作，我使用[sshfs](http://fuse.sourceforge.net/sshfs.html)在我的本地主机上安装远程点，如下所示：

```
sshfs hostname:vagrant_remotemountpoint mountpoint 
```

要先将文件复制到 vagrant，`vagrant_remotemountpoint`我打开`mountpoint`via nautilus，然后将文件粘贴到其中。现在我喜欢使用 shell 命令来完成这个过程。

有人做过这样的努力吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:58:17.797

你试过`cp somefile mountpoint`壳吗？使用 sshfs，`mountpoint`应该看起来像系统上的普通目录。

# c++ - 将整数连接到字符串

> ID：15337954
> 
> 赞同：4
> 
> 时间：2013-03-11T11:55:09.700
> 
> 标签：c++

我正在尝试在 Visual Studio 2008 中保存一系列图像，所有图像都带有“图像”前缀。唯一的区别因素应该是它们的数量。例如，如果我要保存 10 张图像，那么情况应该是

```
i=1;
while(i<10)
{
cvSaveImage("G:/OpenCV/Results/Imagei.jpg",img2);
i++
//"i" is gonna be different every time
} 
```

所以我需要将整数与字符串连接起来......期待答案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:07:43.290

c++ 方式（c++11 之前）将是：

```
#include <sstream>
...
ostringstream convert;
convert << "G:/OpenCV/Results/Image" << i << ".jpg";
cvSaveImage(convert.str().c_str(), img2);
i++; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:43:45.283

使用 C++11：

```
#include <string>

string filename = "G:/OpenCV/Results/Image" + to_string(i) + ".jpg";
cvSaveImage(filename.c_str(), img2); 
```

*编辑*

构建字符串的一种通用且可能更有效的方法是使用`stringstream`：

```
ostringstream ss;

ss << "G:/OpenCV/Results/Image" << i << ".jpg";

string filename = ss.str();
cvSaveImage(filename.c_str(), img2); 
```

这也适用于 C++11 之前的编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:23:23.723

首先，如果您从`i = 10`and do开始`while( i < 10 )`，那么您的代码将只保存 9 个项目。现在回答你的问题，

```
for( i = 1; i < 11; i++ )
{
  std::stringstream imagenum;
  imagenum << "G:/OpenCV/Results/Image" << i << ".jpg" ;
  cvSaveImage(imagenum.str().c_str(), img2) ;
} 
```

检查[example_link](http://codepad.org/6u1zggRv)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T22:22:38.883

opencv 带有 cv::format() [这可能只是一个 sprintf 包装器，但非常方便，恕我直言]

因此，您的示例可能如下所示：

```
cv::imwrite( cv::format( "G:/OpenCV/Results/Image%d.jpg", i ), img ); 
```

或者，如果您坚持使用过时的 1.0 api，则：

```
cvSaveImage( cv::format( "G:/OpenCV/Results/Image%d.jpg", i ).c_str(), img ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T12:14:17.690

```
string imgname="./Image_";
char cbuff[20];
sprintf (cbuff, "%03d", i);
imgname.append(cbuff);
imgname.append(".jpg"); 
```

输出：

```
./Image_001.jpg
./Image_002.jpg
./Image_010.jpg etc. 
```

# .net - DomainService 在执行 linq 之前是否加载所有实体？

> ID：15337956
> 
> 赞同：3
> 
> 时间：2013-03-11T11:55:19.233
> 
> 标签：.net, vb.net, wcf, linq, silverlight

我的 Silverlight 应用程序使用 RIA Webservices 与`DomainService`使用实体框架模型的交互。

在服务中，我有一些简单的东西，例如：

```
Public Function GetCompanyByID(companyID As Integer) As Company
    Return ObjectContext.Companies.FirstOrDefault(Function(c) c.ID = companyID)
End Function 
```

我的问题是所有的公司都是先从数据库中加载，然后用LINQ查询并发送给客户端吗？

我之所以问，是因为数据库可能会增长，并且可能会引入公司实体内某些导航属性的急切加载。因此，首先加载所有公司可能需要很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:13:43.137

RIA ObjectContext 操作 IQueryable。您可以从您的方法域服务方法返回 IQueryable，以允许通过表达式树序列化将客户端“linq 到客户端模型实体”转换为服务器端“linq 到实体/db”（默认为惰性）。您可以通过[关闭 '](http://madsdevblog.blogspot.ru/2011/02/eager-loading-ef4-entities-with-ria.html) LazyLoadingEnabled' 来启用即时加载。

另请参阅[RIA (DbContext) 中的 Code-First](http://varunpuranik.wordpress.com/2011/06/29/wcf-ria-services-support-for-ef-4-1-and-ef-code-first/) -**这是您可以完全支持/控制您选择的 ORM 的方式**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:15:22.593

这是C#版本

```
 var exp1=this.ObjectContext.snv_patient;
        var expression = exp1.FirstOrDefault((item) => item.Id == patientID); 
```

当你写

```
 (exp1 as System.Data.Objects.ObjectQuery).ToTraceString() 
```

**它返回一个查询表上所有数据**的 sql

 **但是第二个表达式不能转换为 ObjectQuery，所以它似乎是应用每个元素的谓词。好像不太好。

让我们剖析一下吧！当我分析此操作时，我看到正在执行的查询是

```
 "SELECT`Extent1`.`Id`, `Extent1`.`CitizenNo`,..some othre fields.
    FROM `snv_patient` AS `Extent1`
     WHERE `Extent1`.`Id` = 3 LIMIT 1" 
```

ID是我的查询（3）中的耐心ID。所以这个扩展方法首先转向SQL然后执行。所以它是安全的。首先转向SQL。然后枚举它。

您也可以使用 Where 扩展名。我总是喜欢 Where(p=p.patientID==3).FirstOrDefault()**

# c# - 为两个视图共享 ViewModel

> ID：15337957
> 
> 赞同：1
> 
> 时间：2013-03-11T11:55:26.277
> 
> 标签：c#, mvvm

我想为两个视图共享一个 ViewModel。在我创建的 App.xaml.cs

```
public static MyViewMode ViewModel { get; set; } 
```

第一视角：

```
App.ViewModel = new MyViewModel();
this.DataContext = App.ViewModel; 
```

第二种观点：

```
this.DataContext = App.ViewModel; 
```

当我想共享 ViewModel 时，这是个好方法吗？非常感谢。

# macos - 如何防止 Mac OS 应用程序被破解？

> ID：15337963
> 
> 赞同：-2
> 
> 时间：2013-03-11T11:56:01.463
> 
> 标签：macos, cracking

我为 OS X 开发了一个小应用程序，并在 Mac App Store 中提供了它。几周后，我在 rapidscene.me 上找到了我的应用程序的破解版。对我来说，Apple 的代码签名似乎不足以防止破解。有没有其他技术可以让饼干的生活变得更艰难？也许二进制校验和？我怎样才能轻松实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:59:09.243

与往常一样，我的回答是“制作更好的内容”，而不是试图通过无休止的猫捉老鼠游戏来与之抗衡。

几个原因：

*   即使是最大的玩家，如果致力于创建复制保护计划的大公司总是失败，那么你成功的机会就很小
*   如果你犯了一个错误，你会咬唯一喂你的手。换句话说，复制保护故障不会打扰破解者，但会打扰您的付费客户。
*   专注于使您的应用程序更好并为您的客户提供更好的服务将使您获得比任何版权保护方案更多的付费客户。

我所说的制作更好的内容的意思是专注于做你擅长的事情。或者正如 MineCraft 的创建者 Notch 所说：

> 浪费金钱试图阻止海盗或让他们感到内疚并不是 Notch 所青睐的方法。相反，他更喜欢提供纯在线服务，这些服务将为游戏体验增添一些内容，包括关卡保存、集中皮肤、朋友列表和多人游戏的安全姓名验证。他希望这些微妙的功能添加可以帮助诱使海盗成为客户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:04:30.057

Apple（或任何人）的代码签名验证真实性，它不能防止破解。可以轻松绕过真实性检查。如果您在 SO 上寻找防止破解的方法，您通常会找到关于花时间丰富应用程序而不是防止软件破解的答案。只要代码在用户的计算机上运行，​​他们就可以修改它的执行方式。

# php - phalcon 模型中的列映射对性能有多大影响？

> ID：15337967
> 
> 赞同：0
> 
> 时间：2013-03-11T11:56:09.110
> 
> 标签：php, model, phalcon

列映射 Phalcon\Mvc\Model 列映射会影响性能吗？我正在处理应用程序，这将处于高负载状态，我对此感到担心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:14:30.517

列重命名增加了最小的开销，但在性能方面并不可观。通常，瓶颈是连接/访问/读取/写入数据库而不是数据操作。

# sql-server-2008 - 使用案例陈述产生佣金

> ID：15337968
> 
> 赞同：0
> 
> 时间：2013-03-11T11:56:09.233
> 
> 标签：sql-server-2008, stored-procedures, crystal-reports

我有一个带有 ClearPrincipalLOC 字段的表。我需要根据 ClearPrincipalLOC 值产生佣金。

如果 ClearPrincipalLOC < 25000.99 那么佣金 = 125

如果 CLearPrincipalLOC < 50000.99 那么佣金 = 150

如果 ClearPrincipalLOC < 75000.99 那么佣金 = 175

等等。

最后，我需要使用水晶报告显示报告，其中所有佣金和 ClearPrincipalLOC 均按 AccountNo 分组。

我在数据库中没有任何佣金列。只有 ClearPrincipalLOC 和 AccountNo。柱子

我显示报告的存储过程如下：

select AccountNo, SUM(ClearPrincipalLOC) as PrincipalAmount, SUM(commission) as Commission from WU_mainTable Group by AccountNo

请帮助我使用 case 语句或 if then 语句获取佣金值，以便我可以汇总按 Accountno 分组的整个佣金并显示在水晶报告上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:01:06.560

```
// {@Commmission}
Select {table.ClearPrincipalLOC}
Case Is < 25000.99: 125
Case Is < 50000.99: 150
Case Is < 75000.99: 175
Default: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:40:26.473

`CASE`我不会将其作为一个语句来执行，而是使用一个表来执行：

```
declare @CommissionRanges table (
    LowBound decimal(18,2) not null,
    HighBound decimal(18,2) not null,
    CommissionRate decimal(18,2) not null
)
insert into @CommissionRanges (LowBound,HighBound,CommissionRate) values
(0,25000.99,125),
(25001,50000.99,150),
(50001,75000.99,175)

select AccountNo, SUM(ClearPrincipalLOC)as PrincipalAmount, SUM(cr.CommissionRate) as Commission
from WU_mainTable mt
    inner join
    @CommissionRanges cr
        on
            mt.ClearPrincipalLOC between cr.LowBound and cr.HighBound
group by AccountNo 
```

（未经测试，因为我没有你的表格和数据）

另外，我的界限可能有点错误——但感觉很奇怪，`ClearPrincipalLOC`25000.98 中的 a 得到一个佣金率，而 25000.99 中的一个得到不同的佣金率——但你应该能够轻松地调整上面的值。

您是否选择使用临时表/表变量（如上）或将其设为永久表当然取决于您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:20:42.663

账户号 ClearPrincipalLOC 佣金

APK1234567 5000000

APK1234567 25000.65

APK1234568 60231.52

现在我需要在 ClearPrincipalLOC 的基础上生成佣金

然后像这样显示

AccountNo ClearPrincipalLOC 佣金

APK1234567 500000 150

APK1234567 25000.65 125

APK1234568 60231.52 175

然后所有数据将按 AccountNo 分组显示

# functional-programming - 我应该如何仅使用不可变的东西对 OCaml 中的 1000 亿个项目进行排序？

> ID：15337973
> 
> 赞同：1
> 
> 时间：2013-03-11T11:56:19.653
> 
> 标签：functional-programming, ocaml

好的，假设我们有`100 billion`需要排序的项目。

我们的内存足以容纳这些项目。

我们还可以使用 List.sort（合并排序）对它们进行排序吗？

我的担忧有两个部分：

1.  在这种情况下，需要的额外空间是否会`mergesort`成为问题？
2.  由于我们使用不可变的数据结构，在排序过程中我们必须重复为`100 billion`项目创建新的列表，这会成为一个缺点吗？在性能方面？

对于排序`100 billion`项目，我应该`array`在这种情况下使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:51:18.487

标准的[合并排序实现](https://github.com/ocaml/ocaml/blob/trunk/stdlib/list.ml#L227)很聪明，不会重新分配太多内存（一开始的分成两半不会分配新内存）。给定一个输入的`n`conses 列表，它将在最坏的情况下分配`n * log(n)`列表 conses（具有基本相同的最佳情况）。鉴于元素本身的值将在输入、中间和输出列表之间共享，因此您将仅通过列表 cons 分配 3 个单词，这意味着该排序将`3 * n * log(n)`总共分配内存中的单词（对于`n = 100 billion`, `3 * log(n)`is `110`，这是相当一个巨大的常数因子）。

另一方面，垃圾收集可以收集一些内存：最坏情况下的内存使用是总的*活动*内存，而不是总分配的内存。事实上，在`log(n)`递归子调用层中构建的中间列表可以在返回任何结果之前收集（它们以与最终`merge`分配新单元格相同的速率死亡），因此该算法`n`在最坏的情况下保留额外的活动 cons 单元格，这仅表示`3*n`字或`24*n`字节。对于`n = 100 billion`，这意味着 2.4 TB 的额外内存，与您最初存储输入列表的脊椎所需的内存一样多。

最后，如果您不保留对输入列表本身的引用，则可以在排序后立即收集它的前半部分，从而为您提供`n/2`最坏情况的界限而不是`n`. 并且您可以在对前半部分进行排序时收集前半部分的前半部分，从而为您提供`n/4`最坏情况的界限，而不是`n/2`. 以这种推理达到极限，我相信通过足够的 GC 工作，您实际上可以完全对列表进行排序 - 为 stop© 第一代 GC 模一些恒定大小的内存池，其大小将影响*时间*性能算法。

# internet-explorer - 背景大小的 IE 解决问题，重复图像？

> ID：15337974
> 
> 赞同：2
> 
> 时间：2013-03-11T11:56:21.197
> 
> 标签：internet-explorer, duplicates, css

我一直在努力让我的网站针对 IE8 和更早版本进行优化，并且我一直在 css 中使用大量背景大小来调整在 IE 中弄乱了大小的图像......

我得到了[IE（过滤器）](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)解决方法，但是我的问题是，现在图像在彼此之上出现两次，-（在解决方法之前和之后）。我的CSS如下：

```
#kompetancer table tr td #os_icon {
background: url(images/os_icon.png) no-repeat;
display: block;
width: 90px;
height: 90px;
position: absolute;
background-size: contain;
-webkit-background-size:contain;
-moz-background-size:contain;
-o-background-size:contain;
-ms-background-size:contain;
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/wp-content/themes/theme-name/images/os_icon.png', sizingMethod='scale');
-ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/wp-content/themes/theme-name/images/os_icon.png', sizingMethod='scale');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T10:35:16.627

您应该为 IE8 使用 JS polyfill，例如[**background-size-polyfill**](https://github.com/louisremi/background-size-polyfill) :-)

# c# - 如何配置 ASP.Net 网站以访问 Active Directory

> ID：15337975
> 
> 赞同：1
> 
> 时间：2013-03-11T11:56:22.130
> 
> 标签：c#, asp.net, iis, active-directory, iis-7.5

我正在尝试创建一个 Intranet 网站，该网站可以根据他们的 Active Directory 用户名查找用户的电子邮件地址。

我的 web.config 中有以下内容：

```
<authentication mode="Windows"/>
<identity impersonate="true"/> 
```

我可以通过以下方式获取用户用户名：

```
Environment.UserName 
```

在 localhost 上运行，以下代码允许我查询 AD 并获取电子邮件：

```
public string GetADUser(string userName)
{            
    DirectoryEntry entry = new DirectoryEntry();

    // get a DirectorySearcher object
    DirectorySearcher search = new DirectorySearcher(entry);

    // specify the search filter
    search.Filter = "(&(objectClass=user)(anr=" + userName + "))";

    // specify which property values to return in the search  
    search.PropertiesToLoad.Add("mail");    // smtp mail address

    // perform the search
    SearchResult result = search.FindOne();

    string email = string.Empty;

    if (result != null)
    {
        if (result.Properties["mail"].Count == 1)
        {
            email = result.Properties["mail"][0].ToString();
        }
        else
        {
            email = "no email";
        }
    }
    else
    {
        email = "not found";
    }

    return email;
} 
```

太好了，此代码默认使用我的凭据进行身份验证，并允许我传入用户名并查找用户的电子邮件地址。

但是，当我将此测试代码上传到服务器时，如果我从本地主机以外的任何地方浏览到该站点，代码就会停止工作。

```
[COMException (0x80072020): An operations error occurred.] 
```

谷歌搜索表明我有权限问题。

为了解决这个问题，我尝试将应用程序池标识设置为我的凭据，但这仍然不允许代码搜索 AD。

网站身份验证在 IIS 中配置如下（启用的项目标记为 <<）：

```
Anonymous Authentication:Disabled
ASP.NET Impersonation:Enabled  <<
Basic Authentication:Disabled
Digest Authentication:Disabled
Forms Authentication:Disabled
Windows Authentication:Enabled  << 
```

甚至有可能做我想做的事吗？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:03:18.923

好的，我发现了问题。

在这种情况下，`ASP.NET Impersonation:Enabled`IIS 和我的 Web.Config 与我配置的应用程序池标识冲突。（我认为）。

一旦我将应用程序池身份设置为使用经过身份验证以查询 AD 的适当帐户运行，禁用模拟并离开，`Windows Authentication:Enabled`我就能够让网站查询 AD，而无需在我的代码中传递任何凭据。

# c# - 在 DataContractSerializer 上添加 KnownTypeAttribute？

> ID：15337982
> 
> 赞同：0
> 
> 时间：2013-03-11T11:56:37.243
> 
> 标签：c#, .net, serialization

我在 WebForms 中，我尝试将对象序列化为 XML 代码。好吧，使用：

```
using (FileStream writer = new FileStream("c:/temp/file.xml", FileMode.Create, FileAccess.Write))
{
    DataContractSerializer ser = new DataContractSerializer(videoContainer.GetType());
    ser.WriteObject(writer, videoContainer);
} 
```

我收到此错误：*预计不会输入数据合同名称为“YouTubeEntry:* *[http://schemas.datacontract.org/2004/07/Google.GData.YouTube](http://schemas.datacontract.org/2004/07/Google.GData.YouTube)* *”的“Google.GData.YouTube.YouTubeEntry” 。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。*

所以我尝试了这个：

```
IEnumerable<string> lista = new List<string>();
lista.ToList().Add("YouTubeEntry:http://schemas.datacontract.org/2004/07/Google.GData.YouTube");

using (FileStream writer = new FileStream("c:/temp/file.xml", FileMode.Create, FileAccess.Write))
{
    DataContractSerializer ser = new DataContractSerializer(videoContainer.GetType(), lista);
    ser.WriteObject(writer, videoContainer);
} 
```

传递 KnownTypeAttribute 列表，但似乎无法获取列表？:O 不知道该怎么办...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:01:43.583

您必须提供类型列表而不是字符串列表

```
var lista = new List<Type>();
lista.Add(typeof(Google.GData.YouTube.YouTubeEntry));

using (FileStream writer = new FileStream("c:/temp/file.xml", FileMode.Create, FileAccess.Write))
{
    DataContractSerializer ser = new DataContractSerializer(videoContainer.GetType(), lista);
    ser.WriteObject(writer, videoContainer);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:02:58.110

您应该将 Type 对象的集合传递给构造函数。不是字符串。

```
DataContractSerializer ser = new DataContractSerializer(videoContainer.GetType(), new List<Type> {typeof(YouTubeEntry)}); 
```

# java - 将应用程序部署到 Glassfish 时出现“IOR 必须至少有一个 IIOP 配置文件”错误

> ID：15337985
> 
> 赞同：0
> 
> 时间：2013-03-11T11:56:49.543
> 
> 标签：java, glassfish, glassfish-3

我正在开发一个应用程序，它使用消息驱动 bean 接收消息并将数据持久保存到数据库中。尝试在 glassfish 上部署它时，我收到以下错误：

```
java.lang.RuntimeException: IIOP Protocol Manager initialization failed.  Possible cause is that ORB is not available in this container
        at com.sun.ejb.containers.BaseContainer.initializeProtocolManager(BaseContainer.java:827)
        at com.sun.ejb.containers.BaseContainer.<init>(BaseContainer.java:508)
        at com.sun.ejb.containers.MessageBeanContainer.<init>(MessageBeanContainer.java:142)
        at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:121)
        at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
        at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:305)
        at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:108)
        at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
        at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214)
        at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:207)
        at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
        at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
        at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
        at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
        at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:148)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: Orb initialization erorr
        at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:180)
        at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getProtocolManager(GlassFishORBHelper.java:219)
        at com.sun.ejb.containers.BaseContainer.initializeProtocolManager(BaseContainer.java:824)
        ... 60 more
Caused by: java.lang.RuntimeException: org.omg.CORBA.BAD_OPERATION: FINE: IOP01210086: Could not bind initial GIS to name service  vmcid: OMG  minor code: 86  completed: No
        at org.glassfish.enterprise.iiop.impl.GlassFishORBManager.initORB(GlassFishORBManager.java:622)
        at org.glassfish.enterprise.iiop.impl.GlassFishORBManager.getORB(GlassFishORBManager.java:263)
        at org.glassfish.enterprise.iiop.impl.GlassFishORBFactoryImpl.createORB(GlassFishORBFactoryImpl.java:93)
        at org.glassfish.enterprise.iiop.api.GlassFishORBHelper.getORB(GlassFishORBHelper.java:152)
        ... 62 more
Caused by: org.omg.CORBA.BAD_OPERATION: FINE: IOP01210086: Could not bind initial GIS to name service  vmcid: OMG  minor code: 86  completed: No
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
        at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
        at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
        at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
        at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
        at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
        at $Proxy216.bindNameException(Unknown Source)
        at com.sun.corba.ee.impl.folb.InitialGroupInfoService.bindName(InitialGroupInfoService.java:215)
        at com.sun.corba.ee.impl.folb.InitialGroupInfoService.<init>(InitialGroupInfoService.java:177)
        at org.glassfish.enterprise.iiop.impl.GlassFishORBManager.initORB(GlassFishORBManager.java:611)
        ... 65 more
Caused by: org.omg.CORBA.INV_OBJREF: WARNING: IOP00511001: IOR must have at least one IIOP profile  vmcid: OMG  minor code: 1001  completed: No
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
        at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
        at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
        at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
        at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
        at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
        at $Proxy227.iorMustHaveIiopProfile(Unknown Source)
        at com.sun.corba.ee.impl.ior.IORImpl.getProfile(IORImpl.java:366)
        at com.sun.corba.ee.impl.transport.CorbaContactInfoListImpl.setLocalSubcontract(CorbaContactInfoListImpl.java:444)
        at com.sun.corba.ee.impl.transport.CorbaContactInfoListImpl.setEffectiveTargetIOR(CorbaContactInfoListImpl.java:277)
        at com.sun.corba.ee.impl.transport.CorbaContactInfoListImpl.setTargetIOR(CorbaContactInfoListImpl.java:219)
        at com.sun.corba.ee.impl.transport.CorbaContactInfoListImpl.<init>(CorbaContactInfoListImpl.java:183)
        at com.sun.corba.ee.spi.transport.TransportDefault$1.create(TransportDefault.java:70)
        at com.sun.corba.ee.impl.orbutil.ORBUtility.makeClientDelegate(ORBUtility.java:803)
        at com.sun.corba.ee.impl.orbutil.ORBUtility.makeObjectReference(ORBUtility.java:812)
        at com.sun.corba.ee.impl.ior.ObjectReferenceProducerBase.make_object(ObjectReferenceProducerBase.java:78)
        at com.sun.corba.ee.spi.oa.ObjectAdapterBase.makeObject(ObjectAdapterBase.java:126)
        at com.sun.corba.ee.impl.oa.poa.POAImpl.create_reference_with_id(POAImpl.java:1559)
        at com.sun.corba.ee.impl.folb.InitialGroupInfoService.bindName(InitialGroupInfoService.java:203)
        ... 67 more 
```

我环顾四周，意识到这可能是 CORBA 问题，但我没有使用 CORBA，消息是通过 ActiveMQ 发送的，我使用 ojdbc 作为数据库。

对不起，长日志和简短描述。如果您需要更多信息，请告诉我。无论如何，欢迎所有的答案和建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T10:42:08.030

尝试在 glassfish 4 中部署应用程序时，我遇到了同样的问题，“IIOP 协议管理器初始化失败。可能的原因是 ORB 在此容器中不可用”。就我而言，原因是我更改了一个线程池我的 http-listeners 。我想使用“线程池”而不是“http-thread-pool”（因为它有更多线程）。我一改回来，它就又开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T07:02:01.270

我现在遇到了这个问题。经过一段时间尝试了解问题并重新启动 glassfish 后，我重新启动了服务器，问题现在消失了。

# jquery - 哪个 Modernizr 功能负责浏览器检测？

> ID：15337994
> 
> 赞同：0
> 
> 时间：2013-03-11T11:57:20.697
> 
> 标签：jquery, modernizr

抱歉，这是我第一次使用 Modernizr。

我有一个需要重写的遗留代码`(If its NOT ie or its IE > 6)`

```
if(!$.browser.msie || ($.browser.msie&&$.browser.version>6)){
} 
```

1）经过一些研究，我可以将其用于条件的第二部分。但是，我如何检查它是否不是 ie？

```
if ($('body').is('.gt-ie6 *')) {
  // IE10, 9, 8, 7, ...
} 
```

2）查看[http://modernizr.com/download/](http://modernizr.com/download/) 我必须勾选什么才能将上述检查包含在库中？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:30:46.497

我不确定我是否正确理解了您的问题，但如果测试是：

if (not IE) 或 if (IE > 6) 这样做

那为什么不转呢？如果您上面的代码是正确的，那么可能类似于

```
if ($('body').not('.ie6 *')) {
// everything except ie6
do this
} 
```

# jquery - jquery插件如何维护对象的状态

> ID：15337999
> 
> 赞同：6
> 
> 时间：2013-03-11T11:57:42.763
> 
> 标签：jquery, jquery-plugins

我正在尝试创建一个简单的插件，并且遇到了如何管理插件状态的问题。

```
(function ($) {
// Static things for plugin goes here
var uiHtml = "<div class='gaw-box'>" +
      "</div>";

var methods = {

    init: function (options) {

        return this.each(function () {
            // Create UI
            $(this).html(uiHtml);

            if (options) {

                var defaults = {
                    name:"N/A"
                };

                var opt = $.extend(defaults, options);
                  $(this).find(".gaw-name").html(opt.name);
            }

            // Visual Events attach
            var uiobj = $(this).find(".gaw-box");
            $(uiobj).mouseenter(function () {
                if (!this.isSelected) {
                    $(this).css('border', '1px solid red');
                }
            });

            $(uiobj).mouseleave(function () {
                if (!this.isSelected) {
                    $(this).css('border', '1px solid black');
                }
            });

            $(uiobj).click(function () {
                this.isSelected = !this.isSelected;
                if (this.isSelected) {
                    $(this).css('border', '3px solid red');
                }
                else {
                    $(this).css('border', '1px solid black');
                }

            });

            });

    },
    getIsSelected: function (options) {

        return this.isSelected; // ALWAYS FALSE
    },
    destroy: function () { }
};

$.fn.gateaway = function (method) {
    var plugin = this;

    plugin.isSelected = false;

    if (methods[method])
    {
        return methods[method].apply(plugin, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method) {
        return methods.init.apply(plugin, arguments);
    } else {
        $.error('Method ' + method + ' does not exist on jQuery.pluginName');
    }
};
})(jQuery); 
```

我想要实现的是保存插件（对象）的状态，如果它被选中的话。我正在调用我的插件

```
$("#gate").gateaway('getIsSelected') 
```

结果总是错误的......我知道问题出在“这个”范围内，这是我第一次在客户端上开发的问题，第二次我今天需要完成它:-)，所以如果是可以指出我在哪里或如何组织插件以能够保存每个插件的状态，它将拯救我:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-02T17:02:26.303

官方的 jQuery 建议是使用[jQuery UI Widget Factory](https://learn.jquery.com/plugins/stateful-plugins-with-widget-factory/)，因为它为您提供了许多用于存储状态（以及其他东西）的好选择，但使用 data 函数在 jQuery 元素上存储状态并不难，如下所示：

```
$.fn.myplugin = function (options) {

    var create = function (el, options) {
        // Find existing state if we're running this again on same element
        var state = el.data("myplugin") || {};

        makeActualPlugin(el, state);

        state.something = "Store me for later";
        el.data("myplugin", state);
        return el;
    };

    this.each(function () {
        create($(this), options);
    });
}; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T12:07:43.810

查看有关在插件中存储状态的官方 jQuery 文档：http: [//docs.jquery.com/Plugins/Authoring#Data](http://docs.jquery.com/Plugins/Authoring#Data)