# StackOverflow 问答 12912000-12912999

# php - 使用 ZipArchive 提取文件的编码错误

> ID：12912005
> 
> 赞同：2
> 
> 时间：2012-10-16T09:55:29.693
> 
> 标签：php, ziparchive

我得到了几个外部 ZIP 文件，其中包含许多带有 UTF-8 字符的文件。所以现在当我提取文件时，文件名中有很多错误。

我尝试了一些网上的解决方案，例如：

```
$zipAmountOfFiles = $zip->numFiles;
for($i = 0; $i < $zipAmountOfFiles; $i++)
{
    $filename = $zip->getNameIndex($i);
    $zip->addFile(str_replace($umlaute, $umschreibungUmlaute, $filename));
    $zip->deleteIndex($i);
} 
```

我也尝试使用 renameIndex。

```
for($i = 0; $i < $zip->numFiles; $i++)
{
    $oldFilename = $zip->getNameIndex($i);
    $newFilename = str_replace($umlaute, $umschreibungUmlaute, $oldFilename);
    $zip->renameIndex($i, $newFilename);
} 
```

对文件没有任何作用。

# c# - Selenium RemoteWebDriver 内存问题

> ID：12912011
> 
> 赞同：1
> 
> 时间：2012-10-16T09:55:47.337
> 
> 标签：c#, .net, unit-testing, selenium, webdriver

我正在运行 Selenium 独立服务器，版本 2.25.0

我在 c# 中运行一个程序，通过以下方式执行驱动程序：

```
DesiredCapabilities capabilities = DesiredCapabilities.HtmlUnit();
capabilities.IsJavaScriptEnabled = false;
IWebDriver driver = new RemoteWebDriver(new Uri("http://127.0.0.1:4444/wd/hub"), capabilities); 
```

然后我通过收集一些信息`driver.FindElement(By.)`。

一切正常。

在我执行完所有

我通过以下方式退出了驱动程序：

```
driver.Quit(); 
```

测试工作正常。但是当我在执行时查看任务管理器时，我可以看到“java.exe”（硒服务器）抢占内存然后没有释放它。

我怎么解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:08:00.613

嗯....与我的代码相比：

```
public class BaseSeleniumTest extends SeleneseTestBase {
    static WebDriver driver;

    @BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

          DesiredCapabilities capability = DesiredCapabilities.firefox();

        driver = new RemoteWebDriver(new URL("http://192.168.4.52:4444/wd/hub"), capability);

        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
        driver.manage().window().setSize(new Dimension(1920, 1080));
    }
    @Before
    public void homePageRefresh() throws IOException {
        driver.get("login.base.url");
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();
    }

.....
} 
```

我没有这样的记忆问题。抓取的内存被释放。您能否提供声明和初始化（创建实例）*驱动程序*的方式 ？

![在此处输入图像描述](../Images/39bda4c7f265f684d70ecac7d03dcd46.png)

再调查一下： **HtmlUnit 似乎正在泄漏内存；这是怎么回事？** 确保*(a) 您使用的是最新版本的 HtmlUnit*，并且(b) 您*在使用完 WebClient 实例后**正在调用`WebClient.closeAllWindows()`*。

取自[这里](http://htmlunit.sourceforge.net/faq.html#MemoryLeak)

# eclipse - eclipse juno SVN：语言

> ID：12912013
> 
> 赞同：1
> 
> 时间：2012-10-16T09:55:59.413
> 
> 标签：eclipse, svn, eclipse-juno

我刚刚在带有市场的新 eclipse juno 中安装了 SVN。一切都很顺利，除了所有选项都是法语（我的窗口和系统可能是法语配置的，也许这就是原因）。

如何更改 SVN 的安装语言？我需要重新安装吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T07:58:37.603

另一种方法是直接卸载本地化插件进行颠覆：

要遵循的步骤：帮助 > 关于 Eclipse > 安装详细信息

选择 Subversive Localization 并卸载它（然后您需要重新启动 Eclipse）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:21:11.983

我遇到了同样的问题，我通过在 Eclipse 快捷方式中添加“-nl en_us”解决了这个问题（还有其他方法可以更改语言以获取更多信息，请参阅[http://svn.haxx.se/subusers/archive-2006-01/ 0180.shtml](http://svn.haxx.se/subusers/archive-2006-01/0180.shtml) )

希望这可以帮助

# grails - Grails：如何将 URL 映射到自定义插件中的控制器？

> ID：12912019
> 
> 赞同：0
> 
> 时间：2012-10-16T09:56:20.267
> 
> 标签：grails, plugins, tags, include

我在一个名为的**插件**`TextController`中有一个控制器，该控制器名为`index`

**然后我在调用应用程序**中有一个视图`test-plugin.gsp`，使用以下包含标记调用：

```
<g:include controller="text" /> 
```

这很好用。问题是插件的控制器实际上需要通过类似包的名称来标识，例如：`com.foxbomb.fxportal3.components.text`，我需要这样引用它。所以我想我们尝试为插件创建一个 URL 映射，例如：

```
 "/components/com.foxbomb.fxportal3.components.text/" {
        controller = "text"
        action = "index"
    } 
```

我也不知道如何在调用应用程序中创建一个包含来尝试调用该 URL，例如（我知道您没有获得 URL 属性）：

```
<g:include url="/components/com.foxbomb.fxportal3.components.text"/> 
```

换句话说，我想通过它的***映射***来包含一个控制器/动作，而不是它的控制器/动作***名称***。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:22:43.333

`<g:include>`不允许`url`属性，这让我感到惊讶，但是查看[标签](https://github.com/grails/grails-core/blob/2.1.x/grails-plugin-gsp/src/main/groovy/org/codehaus/groovy/grails/plugins/web/taglib/RenderTagLib.groovy#L55)[的来源`<g:include>`](https://github.com/grails/grails-core/blob/2.1.x/grails-plugin-gsp/src/main/groovy/org/codehaus/groovy/grails/plugins/web/taglib/RenderTagLib.groovy#L55)应该可以很容易地在您自己的标签库中实现它（未经测试）：

```
import org.codehaus.groovy.grails.web.util.WebUtils

class IncludeTagLib {
  def grailsUrlMappingsHolder

  def includeUri = { attrs, body ->
    def mapping = grailsUrlMappingsHolder.match(attrs.uri)
    out << WebUtils.includeForUrlMappingInfo(request, response, mapping,
               attrs.model ?: [:])?.content
  }
} 
```

你会`<g:includeUri uri="/components/com.foxbomb.fxportal3.components.text"/>`在你的普惠制中说。

# android - Android 如何在端口 502 上读取 TCP 客户端的响应

> ID：12912034
> 
> 赞同：0
> 
> 时间：2012-10-16T09:56:58.620
> 
> 标签：android, tcpclient, simulator

我正在开发一个应用程序来向端口 502 发送请求，并希望从同一端口读取响应。

这是我到目前为止尝试过的

```
public class Autoamtion extends Activity {

    Socket echoSocket = null;
    PrintWriter out = null;
    BufferedReader in = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
        Log.v("on create", "on create");
        final ToggleButton fanOn = (ToggleButton) findViewById(R.id.toggleButton1);
        fanOn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (fanOn.isChecked()) {
                    Toast.makeText(Autoamtion.this, "Fan is On",
                            Toast.LENGTH_SHORT).show();
                    Log.v("on create", "on create");
                    try {
                        echoSocket = new Socket("192.168.1.19", 502);
                        out = new PrintWriter(echoSocket.getOutputStream(),
                                true);
                        in = new BufferedReader(new InputStreamReader(
                                echoSocket.getInputStream()));
                    } catch (UnknownHostException e) {
                        System.err.println("Don't know about host: taranis.");
                        System.exit(1);
                    } catch (IOException e) {
                        System.err.println("Couldn't get I/O for "
                                + "the connection to:192.168.1.19");
                        System.exit(1);
                    }

                    BufferedReader stdIn = new BufferedReader(
                            new InputStreamReader(System.in));
                    String userInput;

                    try {
                        while ((userInput = stdIn.readLine()) != null) {
                            out.println(userInput);
                            System.out.println("echo: " + in.readLine());
                        }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    out.close();
                    try {
                        in.close();

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    try {
                        stdIn.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    try {
                        echoSocket.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } else
                    Toast.makeText(Autoamtion.this, "Fan is Off",
                            Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

我刚刚安装了一个打开端口 502 的[模拟器](http://www.plcsimulator.org/downloads/SimSetup.msi?attredirects=0)。我确认了在运行此[模拟器](http://www.plcsimulator.org/downloads/SimSetup.msi?attredirects=0)后打开的端口。
我刚刚建立了与 502 端口的连接。我没有从那里得到任何回应。

请指导我完成此操作，以便我可以使其正常工作。任何建议和帮助将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:33:37.710

您还应该发布 stackTrace 以检查失败的原因。

至少有一件事在您的信息中不一致，您在文本`port 503`和代码中引用您正在使用`echoSocket = new Socket("192.168.1.19", 502);`连接到 port `502`。

# lucene - index.cache.field.max_size 无法限制弹性搜索中的字段数据缓存

> ID：12912036
> 
> 赞同：3
> 
> 时间：2012-10-16T09:57:09.367
> 
> 标签：lucene, full-text-search, elasticsearch, faceted-search

我试图通过`index.cache.field.max_size: NUMBER`在`config/elasticsearch.yml`文件中设置来限制字段缓存（常驻）。我有大约 100 万条记录，对 7 个字段（所有字段都包含大量文本数据）执行分面操作，以构建“词云”。

```
curl -X POST 'http://localhost:9200/monitoring/mention_reports/_search?&pretty=true' -d '
{
  "size":"0",

  "query": {
    "filtered":{
      "query":{
        "text": {
          "positive_keyword": {
            "query": "quora"
          }
        }
      },
      "filter":{

                    . . .

      }
    }
  },

  "facets": {
    "tagcloud": {
      "terms": {
        "fields":["field1","field2","field3","field4","field5","field6","field7"],
        "size":"300"
      }
    }
  }
}
' 
```

无论为 index.cache.field.max_size 指定什么值（1000 或 100000），堆内存（分配的 15gb）都会一直被吃掉。我究竟做错了什么？还有没有更好的方法来构建词云，而不是对如此大量的文本数据进行分面？

映射：

```
 curl -XPOST http://localhost:9200/monitoring/ -d '
{
  "settings":{
    "index":{
      "number_of_shards":5,
      "number_of_replicas":1
    },
    "analysis":{
      "filter":{
        "myCustomShingle":{
          "type":"shingle",
          "max_shingle_size":3,
          "output_unigrams":true
        },
        "myCustomStop":{
          "type":"stop",
          "stopwords":["a","about","abov ... ]
        }
      },
      "analyzer":{
        "myAnalyzer":{
          "type":"custom",
          "tokenizer":"standard",
          "filter":[
            "lowercase",
            "myCustomShingle",
            "stop",
            "myCustomStop"
          ]
        }
      }
    }
  },
  "mappings":{
    "mention_reports":{
      "_source":{
        "enabled":true
      },
      "_all":{
        "enabled":false
      },
      "index.query.default_field":"post_message",
      "properties":{
      "id":{
        "type":"string",
        "index":"not_analyzed",
        "include_in_all" : "false",
        "null_value" : "null"
      },
      "creation_time":{
        "type":"date"
      },
      "field1":{
        "type":"string",
        "analyzer":"standard",
        "include_in_all":"false",
        "null_value":0
      },
      "field2":{
        "type":"string",
        "index":"not_analyzed",
        "include_in_all":"false",
        "null_value":"null"
      },

            . . .

        "field7":{
          "type":"string",
          "analyzer":"myAnalyzer",
          "term_vector":"with_positions_offsets",
          "null_value" : "null"
        }                                           

      }
    }
  }
}
' 
```

# apache - ActiveMQ 支持将 ebXML 作为消息代理

> ID：12912040
> 
> 赞同：2
> 
> 时间：2012-10-16T09:57:40.320
> 
> 标签：apache, activemq, ebxml

目前我正在研究可以为 ebXML 提供支持的开源消息代理技术，我想使用 Apache ActiveMQ。

我将着眼于支持 Oasis ebXML AS4 规范。

我的问题是，作为 JMS 代理的 Apache ActiveMQ 是否为 ebXML，特别是 ebXML 3 AS4 提供足够的支持？是否有更适合 ebXML 的替代开源消息代理技术？

最后，是否有一个 .NET 接口库通过 ActiveMQ 支持 ebXML？

提前致谢，

马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:48:39.053

“支持”是什么意思？

Apache ActiveMQ 是一个消息传递组件。它并不真正关心消息中的内容，而是应该将其视为传输通道。

Apache Camel 与 ActiveMQ 捆绑在一起确实支持 XML（解析、转换），但不明确支持 ebXML。

通常，对这些行业标准 EDI 格式的明确支持很少在开源中间件中实现。可能有一些旧的 Java 库开源（[ebXml OpenSource java implementation](https://stackoverflow.com/questions/1644237/ebxml-opensource-java-implementation?rq=1)），但不幸的是，没有什么非常活跃。

# javascript - 在 div 中从右到左自动滚动文本

> ID：12912043
> 
> 赞同：0
> 
> 时间：2012-10-16T09:57:47.200
> 
> 标签：javascript, jquery, css, html

嘿，我想让文本在我拥有的 div 中从右到左滚动。我希望这能自动并持续不断地发生。

现在，当我第一次开始使用 HTML 时，该标签用于执行此操作，我浏览了一些网站，似乎该标签似乎仍在使用。我的问题是，如果这是实现这种影响的最佳方式，还是有更好的方式来做到这一点？例如，javascript、Jquery 和/或 css 甚至可能是 HTML5 中的东西？

这显示了我在看什么 - [http://www.gftuk.com/](http://www.gftuk.com/)

请注意，当用户将鼠标悬停在文本上时，滚动会停止。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:02:36.000

```
<marquee>hello world</marquee> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:27:38.293

就个人而言，我认为实现这一目标的最佳方法是使用 jquery。有一些插件可以很好地完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T14:28:57.300

如果您想自动使用“滚动”文本（DOM 的结构并不复杂）。

```
<marquee>This text will scroll from right to left</marquee> 
```

但是你会看到“选框”滚动不平滑。所以你可以使用 simpleScroll 插件

```
http://logicbox.net/jquery/simplyscroll/ 
```

（我在您的链接代码中看到它：[http](http://www.gftuk.com/) : //www.gftuk.com/。下次，当您想要具有相同效果时，请打开开发工具或萤火虫并查看任何页面的源代码）希望它帮助你

# iphone - 完全混淆在哪里更改openCV中的代码

> ID：12912044
> 
> 赞同：2
> 
> 时间：2012-10-16T09:57:51.117
> 
> 标签：iphone, objective-c, ios

在以下链接中，它给出的结果如下图所示

[https://github.com/BloodAxe/opencv-ios-template-project/downloads](https://github.com/BloodAxe/opencv-ios-template-project/downloads)

[http://aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

我将代码更改为

```
COLOR_RGB2GRAY to COLOR_BGR2BGRA it give me a error says "OpenCV Error: Unsupported format or combination of formats () in cvCanny"
             (or)
CGColorSpaceCreateDeviceGray to CGColorSpaceCreateDeviceRGB 
```

我完全混淆了在哪里更改代码...我需要输出为“带黑色线条的白色”而不是“带灰色线条的黑色”请指导我 ![在此处输入图像描述](../Images/3a6604831f8ad5b074cd44d72c75a205.png) 提前非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:14:15.730

在 OpenCVClientViewController.mm 中包含这个方法（从[https://stackoverflow.com/a/6672628/](https://stackoverflow.com/a/6672628/)复制）然后图像将被转换如下所示：

```
-(void)inverColors
{
    NSLog(@"inverColors called ");

    // get width and height as integers, since we'll be using them as
    // array subscripts, etc, and this'll save a whole lot of casting
    CGSize size = self.imageView.image.size;
    int width = size.width;
    int height = size.height;

    // Create a suitable RGB+alpha bitmap context in BGRA colour space
    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *memoryPool = (unsigned char *)calloc(width*height*4, 1);
    CGContextRef context = CGBitmapContextCreate(memoryPool, width, height, 8, width * 4, colourSpace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast);
    CGColorSpaceRelease(colourSpace);

    // draw the current image to the newly created context
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), [self.imageView.image CGImage]);

    // run through every pixel, a scan line at a time...
    for(int y = 0; y < height; y++)
    {
        // get a pointer to the start of this scan line
        unsigned char *linePointer = &memoryPool[y * width * 4];

        // step through the pixels one by one...
        for(int x = 0; x < width; x++)
        {
            // get RGB values. We're dealing with premultiplied alpha
            // here, so we need to divide by the alpha channel (if it
            // isn't zero, of course) to get uninflected RGB. We
            // multiply by 255 to keep precision while still using
            // integers
            int r, g, b; 
            if(linePointer[3])
            {
                r = linePointer[0] * 255 / linePointer[3];
                g = linePointer[1] * 255 / linePointer[3];
                b = linePointer[2] * 255 / linePointer[3];
            }
            else
                r = g = b = 0;

            // perform the colour inversion
            r = 255 - r;
            g = 255 - g;
            b = 255 - b;

            // multiply by alpha again, divide by 255 to undo the
            // scaling before, store the new values and advance
            // the pointer we're reading pixel data from
            linePointer[0] = r * linePointer[3] / 255;
            linePointer[1] = g * linePointer[3] / 255;
            linePointer[2] = b * linePointer[3] / 255;
            linePointer += 4;
        }
    }

    // get a CG image from the context, wrap that into a
    // UIImage
    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage *returnImage = [UIImage imageWithCGImage:cgImage];

    // clean up
    CGImageRelease(cgImage);
    CGContextRelease(context);
    free(memoryPool);

    // and return
    self.imageView.image= returnImage;
}

// Called when the user changes either of the threshold sliders
- (IBAction)sliderChanged:(id)sender
{
    self.highLabel.text = [NSString stringWithFormat:@"%.0f", self.highSlider.value];
    self.lowLabel.text = [NSString stringWithFormat:@"%.0f", self.lowSlider.value];

    [self processFrame];
} 
```

![请检查图像](../Images/9b1cb022adbd206d61df4556b98e6dc9.png)

# c++ - 常量正确性和硬件写入

> ID：12912045
> 
> 赞同：5
> 
> 时间：2012-10-16T09:57:52.130
> 
> 标签：c++, const-correctness

假设我有以下成员函数：

```
void CFoo::regWrite( int addr, int data )
{
  reg_write( addr, data ); // driver call to e.g. write a firmware register
} 
```

显然，调用此函数不会修改调用它的对象的内部状态。但是，它会更改此`Foo`实例所*代表*的任何内容的状态。

在这样的情况下，应该`Foo::regWrite(int addr, int data)`是一个 const 函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:25:13.727

您必须确定类的“逻辑上的 const”的含义是什么`CFoo`，这取决于该类的用途。

如果`CFoo`被解释为*引用某些数据*，那么能够通过 的`const`实例修改该数据可能是有意义的`CFoo`，在这种情况下，您的成员函数将是`const`. 例如，考虑引用某些数据的其他类型 - 您可以修改 a`char *const`或 a的引用`const std::unique_ptr<char>`。

如果`CFoo`被解释为*拥有一些数据*`const`，那么禁止通过`CFoo`. 例如，考虑容器，其中元素在逻辑上是“对象状态的一部分”，即使它们在物理上不是对象的一部分。所以`vector::operator[]`有一个返回 a`const T&`而不是 a的 const 重载`T&`，`insert`成员函数是非常量的，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:25:29.590

如果您在类中有指向其他对象的指针，则会出现类似的问题：您的 const 方法然后可以调用其他对象的非 const 方法，从而修改它。

如果您将硬件视为您的类引用的其他对象，那么修改固件设置将是完全有效的（因为仅更改了“引用”对象）。如果您希望您的类“代表”硬件（或其中的一部分），我宁愿建议不要将该方法标记为`const`.

所以我认为这主要取决于你如何设计你的课程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:13:17.363

由程序员来定义“const”对类的含义。使用说明符`mutable`，您甚至可以拥有一个`const`在成员中更改值的对象。当涉及到硬件时，可能会将配置视为 const 正确性的目标：只要配置不改变，对象就可以被认为是常量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:15:08.843

有两种看待这一点的方法——优化角度，以及这个声明的逻辑。哪个更重要由您决定。

### 优化

**编辑**：我做了一些不正确的假设。似乎编译器实际上并不能自由地进行下面的优化，并且只会通过分析方法的*主体*来确保没有修改发生（即使这样也只是在简单的情况下）。

> 拥有这`const`将允许编译器进行更多优化。它知道`regWrite`不会更改对象中的任何字段，因此如果将它们存储在寄存器中，它可以保留它们，并进行类似的优化，依赖于对象*字段*不被更改。
> 
> 当您进行这样的定义时，这确实是编译器唯一依赖的东西，因此拥有它`const`是可以的，并且理论上可以提供更好的性能。

### 合乎逻辑

`const`拥有一种其全部目的是破坏性改变的方法感觉不直观。程序员通常的直觉是，只要我只调用 const 方法，其他`const`方法的结果就不会改变。如果你违反了这个不成文的合同，预计人们会感到惊讶——即使编译器可以接受。

我不确定这是否会在这里被违反——这将取决于这个类中的其他代码。但是，如果没有其他重要的考虑因素（性能等），`const`（对我来说）主要是界面上的一个标记，上面写着“调用它不会改变这个对象的状态”，对于“状态”的广义定义。

然而，这是一个模糊的领域，你认为什么是状态变化取决于你。如果你认为你的固件对象代表一个到内部的*链接*，那么写一个寄存器不会改变这个*链接*的任何内容并且是 const 的。如果您认为它代表底层寄存器的状态，那么写入寄存器就是状态的变化。

# html - 如何使用 HTML IMG 标签保持纵横比

> ID：12912048
> 
> 赞同：175
> 
> 时间：2012-10-16T09:57:55.443
> 
> 标签：html, css

我正在使用 HTML 的 img 标签在我们的应用程序中显示照片。我已将其高度和宽度属性都设置为 64。我需要将任何图像分辨率（例如 256x256、1024x768、500x400、205x246 等）显示为 64x64。但是通过将 img 标签的 height 和 width 属性设置为 64，它不会保持纵横比，因此图像看起来会失真。

供您参考，我的确切代码是：

```
<img src="Runtime Path to photo" border="1" height="64" width="64"> 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-10-16T10:06:26.773

不要设置高度和宽度。使用其中一种，将保持正确的纵横比。

```
.widthSet {
    max-width: 64px;
}

.heightSet {
    max-height: 64px;
}
```

```
<img src="http://placehold.it/200x250" />

<img src="http://placehold.it/200x250" width="64" />

<img src="http://placehold.it/200x250" height="64" />

<img src="http://placehold.it/200x250" class="widthSet" />

<img src="http://placehold.it/200x250" class="heightSet" />
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2015-02-22T11:17:13.220

这是示例之一

```
div{
   width: 200px;
   height:200px;
   border:solid
 }

img{
    width: 100%;
    height: 100%;
    object-fit: contain;
    }
```

```
<div>
  <img src="https://upload.wikimedia.org/wikipedia/meta/0/08/Wikipedia-logo-v2_1x.png">
</div>
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2013-07-29T01:08:57.533

将图像的`width`和设置为，但同时限制和：`height``auto``max-width``max-height`

```
img {
    max-width:64px;
    max-height:64px;
    width:auto;
    height:auto;
} 
```

[小提琴](http://jsfiddle.net/xaesA/3/)

如果您想在 64x64px“帧”中显示任意大小的图像，您可以使用 inline-block 包装器并为它们定位，就像[在这个 fiddle](http://jsfiddle.net/xaesA/2/)中一样。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2013-07-29T00:42:19.867

```
<img src="Runtime Path to photo"
     style="border: 1px solid #000; max-width:64px; max-height:64px;"> 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2020-01-04T08:53:09.677

`object-fit: contain`在 html 元素的 css 中使用`img`。

前任：

```
img {
    ...
    object-fit: contain
    ...
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-11-29T18:21:48.870

列出的所有方法都没有将图像缩放到适合盒子的最大尺寸，同时保持所需的纵横比。

这不能用 IMG 标记来完成（至少在没有一点 JavaScript 的情况下不能），但可以按如下方式完成：

```
 <div style="background:center no-repeat url(...);background-size:contain;width:...;height:..."></div> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-10-16T10:04:30.363

将图像包装在`div`尺寸为 64x64 的图像中并设置`width: inherit`为图像：

```
<div style="width: 64px; height: 64px;">
    <img src="Runtime path" style="width: inherit" />
</div> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-03-13T21:10:33.090

有一个新的 CSS 属性`aspect-ratio`。它为盒子设置了一个首选的纵横比，它将用于计算自动尺寸和其他一些布局功能。

```
img {
  width: 100%;
  aspect-ratio: 16/9;
} 
```

它在所有传播良好的浏览器中都受支持。
MDN 链接：[https](https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio)
://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio 并且[https://web.dev/aspect-ratio/](https://web.dev/aspect-ratio/)包含使用该属性的好例子

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-22T19:40:54.827

尝试这个：

```
<img src="Runtime Path to photo" border="1" height="64" width="64" object-fit="cover"> 
```

添加 object-fit="cover" 将强制图像占用空间而不会丢失纵横比。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-16T10:10:49.673

为什么不使用单独的 CSS 文件来维护要显示的图像的高度和宽度？这样，您就可以提供必要的宽度和高度。

例如：

```
 image {
       width: 64px;
       height: 64px;
       } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2022-02-18T18:34:27.387

您需要一个 div 来包装您的图像以获得一致的纵横比。

您可以使用 padding-bottom 技巧来强制 div 遵守纵横比和绝对定位的图像来填充空间。

图像也会响应，占用所有可用的水平空间。

```
.img-frame{
  width: 100%;
  padding-bottom: 100%;
  background: gray;
  overflow: hidden;
  position: relative;
}

.img-frame-4by3{
  padding-bottom: 75%;
}

.img-frame-16by9{
  padding-bottom: 56.25%;
}

.img-frame-5by1{
  padding-bottom: 20%;
}

.img-frame img{
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
```

```
<div style="max-width:100px; margin: 1rem auto;">

  <p>4:3</p>
  <div class="img-frame img-frame-4by3">
    <img src="http://placekitten.com/g/400/400" />
  </div>

  <br />

  <p>16:9</p>
  <div class="img-frame img-frame-16by9">
    <img src="http://placekitten.com/g/400/400" />
  </div>

  <br />

  <p>5:1</p>
  <div class="img-frame img-frame-5by1">
    <img src="http://placekitten.com/g/400/400" />
  </div>

</div>
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-03T00:52:11.560

我的网站显示了许多照片（具有各种宽高比），单击其中一张以模式打开它。为了让它适合模态而不裁剪、滚动或扭曲，我在我的 img 标签上使用了以下类

```
.img {
  max-height: 100%;
  max-width: 100%;
  object-fit: scale-down;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-04T05:39:55.137

在他发布的大多数情况下，张贴者显示的尺寸受高度限制 >>>（256x256、1024x768、500x400、205x246 等）但适合 64 像素的最大高度像素尺寸，这是大多数风景“照片”的典型特征。所以我的猜测是他想要一个高度始终为 64 像素的图像。为此，请执行以下操作：

```
<img id="photo1" style="height:64px;width:auto;" src="photo.jpg" height="64" /> 
```

该解决方案保证图像的高度全部为最大 64 像素，并允许根据每个图像的纵横比扩展或缩小宽度。在 img`height`属性中将 height 设置为 64 会在图像下载时在浏览器的 Rendertree 布局中保留一个空间，因此内容不会转移等待图像下载。此外，新的 HTML5 标准并不总是支持宽度和高度属性。它们只是尺寸“提示”，而不是图像的最终尺寸。如果您在样式表中重置或更改图像的高度和宽度，则图像属性中的实际值将重置为您的 CSS 值或图像的原生默认尺寸。将 CSS 设置`height`为“64px”和`width`到“自动”强制宽度以原生图像宽度（不是图像属性宽度）开始，然后使用 CSS 样式计算新的纵横比作为高度。这会给你一个新的宽度。所以height和width“img”属性在这里真的不需要，只是强制浏览器进行额外的计算。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-21T15:10:04.360

使用CSS：

```
.img {
    display:table-cell;
    max-width:...px;
    max-height:...px;
    width:100%;
} 
```

# android - 在 SQLite 中删除数据库时遇到困难

> ID：12912049
> 
> 赞同：0
> 
> 时间：2012-10-16T09:57:58.847
> 
> 标签：android, sqlite

我在我的应用程序中使用 SQLite 数据库。我想删除/删除数据库，但无法这样做。我检查了数据库的位置，它存在于 /data/data/org.secure.sms/databases 但是什么时候我试图删除它，它没有成功。请帮助我。这是代码：

```
public static void DeleteDatabase(Context context)
{
    try
    {

    String filePath = context.getFilesDir()+ File.separator + "contactsManager";
    String filePath1 = context.getFilesDir()+ File.separator + "database";
    String filePath2 = context.getFilesDir()+ File.separator + "databases";

    context.deleteDatabase(filePath);
    context.deleteDatabase(filePath1);
    context.deleteDatabase(filePath2);

    File file = new File(filePath);
    File file1 = new File( filePath1 );

context.deleteFile(file.getName());
context.deleteFile(file1.getName());
    }
    catch(Exception e)
    {
        Toast.makeText(context,"Exception in DeleteDatabase",Toast.LENGTH_SHORT).show();
    }

} 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:03:23.763

我使用它来删除我的数据库，该数据库来自扩展 SQLiteOpenHelper 的自定义类。

```
private final static String DATABASE_NAME = "pain.db";

private static final String DB_PATH = "/data/data/YOUR.PACKAGE.NAME/databases/" + DATABASE_NAME;

@Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {

        Log.d("DATABASE UPDATED", "DATABASE UPDATED");

        try {
            File file = new File(DB_PATH);
            file.delete();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:01:44.640

对于删除数据库，这是代码：

```
context.deleteDatabase(DATABASE_NAME); 
```

在您的代码中，您提供了完整的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:16:28.203

你错过了`file Extension`！！试试下面：

```
String filePath = context.getFilesDir()+ File.separator + "yourDataBaseName.db"; 
```

# batch-file - Xcopy 变量声明

> ID：12912051
> 
> 赞同：0
> 
> 时间：2012-10-16T09:58:02.453
> 
> 标签：batch-file

这个 cmd 命令给了我我想要的文件。

> `dir /b /a-d "\\teams1.sharepoint.xx.com\teams\Contractcenter_Volume Direct Contracts\Shared Documents\"|findstr /b "CONTRACT" >"C:\AIRCR_CHANGE1_PATSY\aaafiles.tmp"`

现在我如何将此文件名输入 xcopy 以放入一个不错的批处理文件？

xcopy "源文件路径" "目标文件路径"

我是否需要打开文件，读取文件名并存储为变量，然后执行 xocpy "variable for source" "Destination File path"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:57:09.733

***重写的答案 - 原来是错误的***

我根本不需要临时文件，也不需要 FINDSTR。您应该能够直接使用 XCOPY：

```
xcopy "\teams1.sharepoint.xx.com\teams\Contractcenter_Volume Direct Contracts\Shared Documents\contract*" "destinationFolder" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:13:21.297

您可以使用该`FOR`命令读取文件并将内容存储在变量中，然后将其用作源路径或目标路径。

例如

```
FOR /F %%I in (C:\AIRCR_CHANGE1_PATSY\aaafiles.tmp) DO xcopy %%I destinationPath 
```

请注意，上面的命令将解析临时文件的每一行，并将第一个令牌返回到`%%I`. 标记的默认分隔符是空白字符（空格或制表符）。如果源/目标文件的路径可能包含空格，则必须指定不同的分隔符，例如

```
FOR /F "delims=;" %%I in (C:\AIRCR_CHANGE1_PATSY\aaafiles.tmp) DO xcopy %%I destinationPath 
```

该`FOR`命令的帮助应该可以帮助您调整命令以满足您的确切需求。

# java - 将元素添加到最后一个数组位置

> ID：12912053
> 
> 赞同：0
> 
> 时间：2012-10-16T09:58:04.710
> 
> 标签：java, arrays, processing

我试图在 Java 中的最后一个位置向数组添加一个元素，但我无法......或者更确切地说，我不知道如何去做。这是目前的代码：

```
String[] values = split(line, ",");
  int[][] coordinates = new int[2][values/2];
  for(int i = 0; i < values.length; i++) {
    if(i % 2 == 0) { //THIS IS EVEN VALUES AND 0
      coordinates[0][coordinates[0].length] = values[i];
    } else { //THIS IS ODD VALUE
      coordinates[1][coordinates[1].length] = values[i];
    }
  } 
```

编辑版本：

```
String[] values = split(line, ",");
  int[][] coordinates = new int[2][values/2];
  int x_pos = 0;
  int y_post = 0;
  for(int i = 0; i < values.length; i++) {
    if(i % 2 == 0) { //THIS IS EVEN VALUES AND 0
      coordinates[0][x_pos] = values[i];
      x_pos++;
    } else { //THIS IS ODD VALUE
      coordinates[1][y_pos] = values[i];
      y_pos++;
    }
  } 
```

*正在从 CSV 文件中读取*值。*我认为我的代码是错误的，因为它会尝试在这两种情况下始终以坐标 [] 的最大数组大小添加值。*

 *我将如何在最后设置的位置添加它们？

谢谢！

/e：编辑后的版本是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:04:13.560

您的原始代码有两个问题：

*   它错误地处理了数组，Java 数组中的 las 元素位于 position `length-1`，这将导致`ArrayOutOfBoundsException`
*   即使您通过减去 1 来纠正它，您也总是只覆盖最后一个元素，因为`length`Java 数组的 与它包含多少元素无关，而是它被初始化包含多少元素。

代替：

```
coordinates[0][coordinates[0].length] = values[i]; 
```

你可以使用：

```
coordinates[0][(int)Math.round(i/2.0)] = values[i]; 
```

（当然，与 相同`coordinates[1]...`）

**编辑** 这当然是丑陋的：

```
(int)Math.round(i/2.0) 
```

但我使用的解决方案远不那么容易理解：

```
i>>1 
```

这是一个右移运算符，正是这里需要的那种东西，并且比其他所有方法都快......

**结论：**这将在现场场景中使用：

利用

```
coordinates[0][i>>1] = values[i]; 
```

**EDIT2** 每天都在学习新事物……

这一样好，可能会慢一点。

```
coordinates[0][i/2] = values[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:05:29.060

如果你知道你肯定会有偶数的`values`你可以做

```
for(int i = 0; i < values.length / 2; i++) {
  coordinates[0][i] = values[2*i];
  coordinates[1][i] = values[2*i + 1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:21:45.680

为什么不：

```
String[] values = split(line, ",");
int[][] coordinates = new int[2][values/2];
for(int i = 0; i < values.length; i+=2) {
      coordinates[0][i/2] = values[i];
      coordinates[1][i/2] = values[i+1];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:00:22.310

您必须将最后一个位置存储在某处。`.length`给你数组的大小。

数组中的位置将始终是 的一半`i`（因为您将一半元素放在一个数组中，另一半放在另一个数组中）。

```
String[] values = split(line, ",");
int[][] coordinates = new int[2][values/2];

for(int i = 0; i < values.length; i++) {
  if(i % 2 == 0) { //THIS IS EVEN VALUES AND 0
    coordinates[0][ i / 2] = values[i];
  } else { //THIS IS ODD VALUE
    coordinates[1][ i / 2 + 1 ] = values[i];
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T10:03:33.810

java 的数组索引是从“0”到“数组长度 - 1”。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

> 数组中的每一项都称为一个元素，每个元素都通过其数字索引访问。如上图所示，编号从 0 开始。例如，第 9 个元素将在索引 8 处访问。*

# java - 在同一条消息中从嵌入式代理接收消息的最佳方式是什么？（ActiveMQ）

> ID：12912054
> 
> 赞同：0
> 
> 时间：2012-10-16T09:58:04.517
> 
> 标签：java, activemq

目前在我的应用程序中运行了一个嵌入式代理，我想在不同线程中使用同一应用程序中的队列。它在我使用时有效，但我发现当代理和消费者在同一个应用程序中时`TCP Transport`我无法使用。`VM Transport`（如果我为消费者创建另一个流程，它会起作用）在我的情况下有更好的方法吗？

使用 Spring 进行代理配置

```
<amq:broker  id="myBroker" brokerName="myBroker">       
    <amq:transportConnectors>    
        <amq:transportConnector uri="tcp://localhost:7777" />
        <amq:transportConnector uri="vm://myBroker" />
    </amq:transportConnectors>
</amq:broker> 
```

消费者

```
public class TestConsumer {
    private static String brokerURL = "tcp://localhost:7777";
    private static transient ConnectionFactory factory;
    private transient Connection connection;
    private transient Session session;

    public TestConsumer() throws JMSException {
        factory = new ActiveMQConnectionFactory(brokerURL);
        connection = factory.createConnection();
        connection.start();
        session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    }

    public void close() throws JMSException {
        if (connection != null) {
            connection.close();
        }
    }               
    public Session getSession() {
        return session;
    }

} 
```

听众

```
public class Listener implements MessageListener {

    public void onMessage(Message message) {
        try {
            //do something here
            System.out.println(message);
        } catch (Exception e) {
            e.printStackTrace();
        }           
    }

} 
```

在主要

```
TestConsumer consumer = new TestConsumer();
Destination destination = consumer.getSession().createQueue("TESTQUEUE");
MessageConsumer messageConsumer = consumer.getSession().createConsumer(destination);
messageConsumer.setMessageListener(new Listener()); 
```

当 brokerURL 为“tcp:localhost:7777”或“vm://myBroker”但 Broker 和 Consumer 处于不同进程时，它可以工作。当两者在同一个应用程序中时，我无法使用 VM Transport。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:07:52.327

尝试使用 VM trnasport。如果我对您的理解正确，您的应用程序会自行发送和接收消息。在这种情况下，VM 传输是最佳选择：它甚至不会退出您的 JVM，而是使用直接 API 调用来传输消息。

有关详细信息，请参阅本文。 [http://activemq.apache.org/configuring-transports.html](http://activemq.apache.org/configuring-transports.html)

# c++ - 链接到系统 C 库 msvcrt.dll

> ID：12912056
> 
> 赞同：4
> 
> 时间：2012-10-16T09:58:11.443
> 
> 标签：c++, c, windows, msvcrt

在 Windows 中，有一个默认的 C 库 msvcrt.dll。

是否可以编写仅使用 msvcrt.dll 中的函数的简单 C 程序？这将减轻安装最近的 VC 运行时的需要。

我认为一种可能的方法是显式指定 /NODEFAULTLIB，并使用 dll 导入过程来导入 msvcrt.dll 函数。

有人有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-05T18:56:26.547

您不想使用 msvcrt.dll。

*   它非常古老，因此不符合现代 C 运行时库规范。
*   它的存在主要是为了向后兼容以及供某些具有特殊要求的[系统组件使用。](https://msdn.microsoft.com/en-us/library/abx4dbyh(v=vs.100).aspx#Anchor_2)
*   如果发现安全问题，您不能指望它会被广泛修补。
*   无法保证使用现代编译器生成的二进制文件将与 msvcrt.dll 中的 ABI 兼容。
*   现代 C 和 C++ 编译器对其运行时库在优化、设置和拆卸方面有深入的了解和期望，因此您不应该混合和匹配它们。

使用编译器附带的运行时库。如果您不想担心重新分发它，您可以静态链接到它，或者您可以阅读有关在您的应用程序中重新分发它的正确方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T16:17:26.583

您可以使用 MinGW-w64 GCC，它链接到`msvcrt.dll`您所说的原因。

[你可以在这里](http://mingw-w64.sourceforge.net/download.php#mingw-builds)找到下载。`-static-libgcc -static-libstdc++`如果您不想重新分发任何 DLL，您可以链接您的程序。

话虽如此，您只需将`msvcr*.dll`文件与可执行文件一起发送即可，无需安装任何东西。

# wpf - 为什么 ICollectionView 没有刷新？

> ID：12912057
> 
> 赞同：3
> 
> 时间：2012-10-16T09:58:11.490
> 
> 标签：wpf, data-binding, icollectionview

我不知道为什么我的 ICollectionView 没有刷新。谁能解释我做错了什么？

我制作了这样的视图模型：

```
class ViewModel : INotifyPropertyChanged
{
    private ObservableCollection<Entity> m_entities = new ObservableCollection<Entity>();
    public ICollectionView EntitiesView { get; private set; }
    public ICollectionView HighCountView { get; private set; }

    public ViewModel()
    {
        m_entities.Add(new Entity() { Id = 1, Name = "Erik", Description = "The first" });
        m_entities.Add(new Entity() { Id = 2, Name = "Olle", Description = "The second" });
        m_entities.Add(new Entity() { Id = 3, Name = "Kim", Description = "The last" });

        EntitiesView = CollectionViewSource.GetDefaultView(m_entities);
        EntitiesView.CurrentChanged += new EventHandler(EntitiesView_CurrentChanged);

        HighCountView = new CollectionView(m_entities);
        using (HighCountView.DeferRefresh())
        {
            HighCountView.Filter = e => ((Entity)e).Count > 3;
        }

    }

    private void EntitiesView_CurrentChanged(object sender, EventArgs e)
    {
        Entity current = EntitiesView.CurrentItem as Entity;
        if(current!=null)
        {
            current.Count++;
            HighCountView.Refresh();            // Do I need this line?
            OnPropertyChanged("HighCountView"); // or this?
        }
    } 
```

...在我的窗口中，我将其用作数据上下文，如下所示：

```
public partial class MainWindow : Window
{
    private ViewModel vm = new ViewModel();
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        this.DataContext = vm;
    }
} 
```

...我正在像这样在 XAML 代码中进行绑定：

```
 <ListBox Grid.Column="0" x:Name="listView1" DisplayMemberPath="Name" ItemsSource="{Binding EntitiesView}" IsSynchronizedWithCurrentItem="True" />
    <ListView Grid.Column="1" x:Name="listView2" DisplayMemberPath="Name" ItemsSource="{Binding HighCountView}" IsSynchronizedWithCurrentItem="True" /> 
```

问题是所有三个实体始终显示在 listView2 中，尽管我设置了过滤器属性。为什么？

**编辑**

为了使示例完整，这里是实体类。

```
class Entity : INotifyPropertyChanged
{
    private int m_id;
    public int Id
    {
        bla bla.....
    }

    private string m_name;
    public string Name
    {
        bla bla.....
    }

    private string m_description;
    public string Description
    {
        bla bla.....
    }

    private int m_count;
    public int Count
    {
        get { return m_count; }
        set
        {
            if (value != m_count)
            {
                m_count = value;
                OnPropertyChanged("Count");
            }
        }
    }

    public void Update()
    {
        Description = "Updated: " + (++Count).ToString() + " times.";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:28:13.957

最后我发现了问题所在。

如果我换行：

```
 HighCountView = new CollectionView(m_entities); 
```

对此

```
 HighCountView = new ListCollectionView(m_entities); 
```

然后它按预期工作。

我也可以删除这条线

```
 OnPropertyChanged("HighCountView"); // or this? 
```

我希望这可以帮助别人！

# android - Eclipse - “ArcGIS Runtime SDK for Android”和“ArcGIS for Android Apps”有什么区别？

> ID：12912059
> 
> 赞同：1
> 
> 时间：2012-10-16T09:58:15.857
> 
> 标签：android, eclipse, sdk, arcgis

我对 Eclipse 完全陌生。我计划创建一个 ArcGIS Android 应用程序，但目前我正在逐步学习它。我有一个问题，“ArcGIS Runtime SDK for Android”和“ArcGIS for Android Apps”之间有区别吗？&如果有区别，请告诉它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:18:41.323

ArcGIS 是一个用于处理地图和地理信息的综合系统。( [http://resources.arcgis.com/en/home/](http://resources.arcgis.com/en/home/) )

ArcGis for Android App 是一款可帮助您搜索、浏览和查看地图的 Android 应用程序。你可以在你的安卓设备上安装这个应用程序。它有助于查询地图图层和数据。该地图具有测量区域、距离和喜欢的特征的功能。

ArcGIS Runtime SDK for Android 是用于开发应用程序（ArcGIS app for android）的 SDK。您可以使用此 SDK（ArcGIS 运行时 SDK）来构建提供 GIS 制图和分析功能的应用程序。

# android - 在列表视图上滑动项目，垂直边距很小

> ID：12912061
> 
> 赞同：1
> 
> 时间：2012-10-16T09:58:22.060
> 
> 标签：android, android-listview

所以`ListView`我附上了一个：

```
mList.setOnTouchListener(gestureListener); 
```

这个手势监听器所做的基本上是测量 deltaX（水平滑动）并检测它是否高于某个值，然后它就知道发生了滑动。

然后我有：

```
mList.setOnItemClickListener(new AdapterView.OnItemClickListener() { ... } 
```

如果发生了滑动，则检查手势对象，如果是，则为滑动，否则为单击。

这一切都很好。

**我的问题是：**

当我用拇指滑动元素时，有时我会使列表垂直滚动一点。检测到水平滑动，但问题是`OnItemClickListener`不会触发，这就是我会在项目上启动一些操作的地方，这取决于它是否是滑动。

所以问题是listview的垂直滚动机制使得onItemClicked事件不会触发。

![在此处输入图像描述](../Images/1f86a7a2c805a1754e463ec7b04cc5c9.png)

左边的列表工作正常，没有出现垂直滚动。在右侧的列表中，我将项目滑动到底部，但也略微滑动到底部（仍在该项目的范围内），以便列表移动一点。而且`OnItemClicked`不会开火。

如何为垂直滚动添加一个小边距，以便出现滚动但仍然触发 onItemClicked？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:19:43.480

我一直在寻找滑动列表视图的实现，现在在 12 月版的 Gmail 中，每个项目都有滑动效果，它的实现回答了我的问题

在这里能找到它 ：

[https://gist.github.com/2980593](https://gist.github.com/2980593)

# java - 带有前缀的JPA多个嵌入式字段？

> ID：12912063
> 
> 赞同：32
> 
> 时间：2012-10-16T09:58:30.057
> 
> 标签：java, jpa, annotations

使用 JPA 注释，我想像这样重用相同的嵌入式对象：

```
@Entity
public class User {
    @Embedded
    public Address homeAddress;

    @Embedded
    public Address workAddress;
}

@Embeddable
public class Address {
    public String code;
    public String city;
    ...
} 
```

我可以用@AttributeOverrides、@AttributeOverride 和@Column 指定SQL 列名，但它是详细的。是否可以只为 homeAddress 和 workAddress 指定添加到每一列的前缀？

谢谢，

泽维尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T10:15:19.807

如果您想使用多个相同`Embedded`的类。你必须`@AttributeOverrides` 为所有列做。尝试如下；

参考[JPA AttributeOverrides](http://www.java2s.com/Code/Java/JPA/CatalogJPA.htm)

```
@Embeddable
public class Address {
    private String state;
    @Column(name = "zip_code")
    private String zip;
}

@Entity(name = "Employee")
public class Employee implements Serializable {
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "state", column = @Column(name = "province_1")),                       
        @AttributeOverride(name = "zip", column = @Column(name = "postal_code_2"))
    })
    private Address address_1;  

    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "state", column = @Column(name = "province_2")),                       
        @AttributeOverride(name = "zip", column = @Column(name = "postal_code_2"))
    })
    private Address address_2;  

} 
```

我的建议是，如果`Embedded`您的`Entity`. 尝试使用`@CollectionTable`.

```
@CollectionTable(name = "EMPLOYEE_ADDRESS", joinColumns = @JoinColumn(name = "ADDRESS_ID"))
private List<Address> addressList; 
```

参考[JPA 集合表](http://www.objectdb.com/api/java/jpa/CollectionTable)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-10T03:39:54.717

添加这对我有用（虽然我使用休眠作为 JPA 提供程序）

```
<property name="hibernate.implicit_naming_strategy" value="org.hibernate.boot.model.naming.ImplicitNamingStrategyComponentPathImpl" /> 
```

# httprequest - jmeter 挂断并且不会返回

> ID：12912067
> 
> 赞同：4
> 
> 时间：2012-10-16T09:58:45.873
> 
> 标签：httprequest, jmeter, load-testing, performance-testing

我正在运行 340 个并发用户来使用 jmeter 在服务器上进行负载测试。

但在大多数情况下，jmeter 挂断并且不会返回，即使我尝试关闭连接它也只是挂断。最终我不得不关闭应用程序。

知道如何检查持有请求的内容以及如何检查 jmeter 发送的请求并找到瓶颈。

在关闭线程时收到以下消息

```
Shutting down thread please be patient message 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:13:48.327

在过去的几年里，我已经多次遇到这种情况。在我的每种情况下（可能不在您的情况下），问题出在我发送流量的负载平衡 (F5) 上。基本上，一个名为 OneConnect 的属性将连接保持在时间等待状态，并且从不终止连接。

运行像 wireshark 这样的打包工具，看看请求发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:50:02.563

尝试分布式测试，340 个并发用户并不是什么大问题，但如果这样可以减轻您的痛苦，您仍然可以尝试。另请查看以下链接：

[http://jmeter.apache.org/usermanual/best-practices.html#lean_mean](http://jmeter.apache.org/usermanual/best-practices.html#lean_mean)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T21:59:24.477

首先检查您的脚本是否适合一个用户。确保使用断言。

然后按照 jmeter 最佳实践运行您的测试：

*   没有gui

*   没有昂贵的听众

然后，您应该能够在 csv 输出中看到最长的请求并能够解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T02:14:43.463

我之前在笔记本电脑（Core 2 Duo 1.5Ghz）上运行 JMeter 时也遇到过这个问题，它总是在处理过程中挂断。我试图在另一台比我的笔记本电脑更强大的电脑上运行，它现在可以顺利运行。因此，如果您的 pc 或笔记本电脑具有更好的规格，JMeter 将有效运行。

注意：建议在非 gui 模式下运行 JMeter。在 Linux 框中运行 JMeter 的示例：

```
$ ./jmeter -t test.jmx -n -l /Users/home/test.jtl 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-28T06:08:41.697

我有

> 一个或多个测试线程不会退出

因为防火墙阻止了一些请求。所以我不得不为所有被阻止的请求跳过防火墙超时......然后它返回了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-28T17:35:31.223

您收到此错误可能是因为 JVM 无法运行这么多线程。如果你看看你的终端，你会看到你得到的异常：

> 未捕获的异常 java.lang.OutOfMemoryError：无法创建新的本机线程。有关详细信息，请参阅日志文件。

您可以通过进行[远程测试](http://jmeter.apache.org/usermanual/remote-test.html)并运行多个集群而不是一个来解决此问题。

# php - 在magento中以编程方式登录用户无法正常工作？

> ID：12912071
> 
> 赞同：1
> 
> 时间：2012-10-16T09:58:54.967
> 
> 标签：php

我正在使用的代码如下

```
public function loginUser($email, $password){
   $session = Mage::getSingleton('customer/session');

    try {
        $log = $session->login($email, $password);
        return $log;
     } 

    catch (Exception $ex) {
        return false;
    }
 } 
```

它返回 1 但未登录浏览器，当我刷新页面时它不会设置为登录用户

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:49:02.303

我认为您需要额外致电`Mage_Customer_Model_Session::setCustomerAsLoggedIn()`

```
public function loginUser( $email, $password )
{
    /** @var $session Mage_Customer_Model_Session */
    $session = Mage::getSingleton( 'customer/session' );

    try
    {
        $session->login( $email, $password );
        $session->setCustomerAsLoggedIn( $session->getCustomer() );
        return true;
    }
    catch( Exception $e )
    {
        return false;
    }
} 
```

# angularjs - 使用 $routeProvider 时的无限重定向

> ID：12912074
> 
> 赞同：4
> 
> 时间：2012-10-16T09:59:04.493
> 
> 标签：angularjs

我在尝试设置角度路由时遇到了一些问题。我有一个手动引导的应用程序（我需要这个功能，因为我已经在整个网站上都有 html5 导航，并且希望 angular 只能在某些页面上工作 - 它工作正常）。但是当我运行我的代码时，我遇到了一些问题：

*   如果`.otherwise`提供，我会无限循环调用我的控制器并在 Chrome 中因 Range 错误而死
*   而且我总是将 url 重定向从哈希版本到非哈希，即使我打电话`$locationProvider.html5Mode(false);`

猜测问题可能是由于我已经在使用 history.js 和事件处理程序来处理 statechange 事件，但现在我没有任何线索。需要你的帮助才能得到一些答案。

谢谢你的时间。

和代码。

**HTML**

```
<script>
    if (typeof angular === 'undefined')
    {
        Modernizr.load({
            load: [
                '/static/css/angular.css',
                '/static/js/libs/angular/angular.min.js',
                '/static/js/files/angular/app.js',
                '/static/js/files/angular/controllers.js',
                '/static/js/files/angular/filters.js',
                '/static/js/files/angular/services.js',
                '/static/js/libs/angular/angular-resource.min.js',
            ],
            complete: function () {
                angular.bootstrap(document.getElementById('manager'), ['manager']);
            }
        });
    } else {
        angular.element(document).ready(function() {
            angular.bootstrap(document.getElementById('manager'), ['manager']);
        });
    }
</script> 
```

**应用程序.js**

```
/* App Module */

var FM = angular.module('manager', ['managerFilters'])
    .config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
        $routeProvider
            .when('/home', { controller: FilesListCtrl, templateUrl: '/static/partials/1.html' })
            .otherwise({ redirectTo: '/home' });
        }]); 
```

**控制器.js**

```
function FilesListCtrl($scope, $filter, $routeParams) {
    app.log('FilesListCtrl')
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:28:31.717

@blesh @Flek 谢谢。

It was history.js to blame. When you try to use angular routing with it you'll have no option to set `$locationProvider.html5Mode` to `false`. And other bugs occur like infinite redirection with default route provided.

# php - 如何处理收到的邮件？

> ID：12912075
> 
> 赞同：2
> 
> 时间：2012-10-16T09:59:05.233
> 
> 标签：php, email, handle, exim

我们正在开发客户支持系统。因此，我们需要在收到每封邮件后对其进行处理。如何配置 Exim？收到邮件时。它必须被处理（在 php 中）。例如，它必须插入 DB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:01:35.583

您需要配置 exim 以将邮件传送到 php 脚本。

这是有关如何实现此目的的教程：[http ://www.activecampaign.com/support/tt/kb/article/help-desk/version-25x-26x/setting-up-supporttrio/setting-up-your-服务器到转发电子邮件到管道脚本](http://www.activecampaign.com/support/tt/kb/article/help-desk/version-25x-26x/setting-up-supporttrio/setting-up-your-server-to-forward-email-to-the-pipe-script)

您将邮件“传送”到的 php 脚本将通过 接收电子邮件内容`stdin`，这使您能够将其插入到数据库中。

# solr - 在 SOLR 中设置构面

> ID：12912085
> 
> 赞同：1
> 
> 时间：2012-10-16T09:59:30.503
> 
> 标签：solr, lucene, schema

我正在使用 solr，我想在我的数据上设置两种不同类型的方面。第一个是日期，所以我想要这样：

发布时间：今天 3 天 7 天 所有时间

距离： 5 英里 10 英里 30 英里 100 英里

我应该如何设置刻面？看起来我需要编辑我的 solr.xml 或我的 schema.xml，但这一切都非常混乱，帮助文档让我大吃一惊。

之前做过这件事的人可以给我一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:28:57.517

`facet.query`：可以多次指定此参数，以指示应将多个查询用作单独的方面约束。所以你可以做`distance:[* TO 5]`，`distance:[5 TO 10]`你会得到个人计数。

然后是哪个可能`facet.date`更`facet.range`适合您。

# eclipse - 没有涵盖生命周期配置？

> ID：12912087
> 
> 赞同：-1
> 
> 时间：2012-10-16T09:59:31.537
> 
> 标签：eclipse, m2eclipse, sonarqube

生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (execution: default-compile, phase: compile)forced

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:17:25.400

查看 M2E 的相应 wiki 页面，其中包含对此消息的非常详细的解释：

[http://wiki.eclipse.org/M2E_plugin_execution_not_covered](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)

# jquery - 如何通过css在鼠标上显示图像

> ID：12912089
> 
> 赞同：0
> 
> 时间：2012-10-16T09:59:31.483
> 
> 标签：jquery, css

我的图像很少，它们是动态来自数据库的。

当用户将鼠标悬停在图像上时，名称应显示在图像下方。

如何使用 CSS 或 jquery 做到这一点？

检查下图，这就是它应该的样子。

![在此处输入图像描述](../Images/68f995f1f04bac981e8e86b38b35640b.png)

我的代码是

```
<div class="blue_strip_icon" style="padding-right: 15px;">
    <a href="<%= pag.page.id %>" class="icon_link">
    <img src="<%= @icon %>" title="<%= pag.page.page_title %>" />
    </a>
</div> 
```

CSS是

```
.blue_strip_icon{
    float: right;
    height: 50px;
    padding-top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:09:28.880

更新**演示：http:** [//jsfiddle.net/n66Tf/1/](http://jsfiddle.net/n66Tf/1/)

* * *

您可以使用 CSS`:after`伪元素创建自定义工具提示元素。

检查这个**演示：http:** [//jsfiddle.net/n66Tf/](http://jsfiddle.net/n66Tf/)

**HTML：**

```
<!-- render the tooltip text from the server itself -->
<a href="http://google.com" tooltip="Hello World">Hello</a> 
```

**CSS：**

```
a {
    position: relative;
    overflow: visible;   
}
a:hover:after {
    content: attr(tooltip); /* use the tooltip attribute instead of hardcoding */
    color: blue;
    top: 22px;
    position: absolute;
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:05:56.747

我将使用像[jQuery 工具提示](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)这样的插件，然后将工具提示显示为图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:09:46.600

`~`您可以像这样使用兄弟选择器：http: [//jsfiddle.net/Zp2Bv/](http://jsfiddle.net/Zp2Bv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:08:39.957

本教程可以帮助您： http: [//net.tutsplus.com/tutorials/javascript-ajax/build-a-better-tooltip-with-jquery-awesomeness/](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-better-tooltip-with-jquery-awesomeness/)

# java - 日期解析异常 Java

> ID：12912090
> 
> 赞同：0
> 
> 时间：2012-10-16T09:59:32.637
> 
> 标签：java, date, simpledateformat

将 12 小时日期时间格式转换为 24 小时日期时间格式时，我无法解析日期。代码是

```
 List_CallDateTime=rs.getString(5);
    System.out.print(List_CallDateTime);
    String str=List_CallDateTime;
    SimpleDateFormat callreadFormat=new SimpleDateFormat("MM/dd/yyyy hh:mm aa",Locale.US);
    SimpleDateFormat callwirteformat=new SimpleDateFormat("MMM dd yyyy HH:mm",Locale.US);
    Date calldate=null;
    calldate=callreadFormat.parse(str);
    String callcreatedate=callwirteformat.format(calldate);
    System.out.println("asdsad"+callcreatedate); 
```

我得到的例外是

```
StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.text.ParseException: Unparseable date: "04/25/2012  9:00AM" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:03:18.560

您可以使用以下方式轻松格式化`smalldatetime`字段，

```
 SimpleDateFormat writeFormat=new SimpleDateFormat("MMM dd yyyy HH:mm"
                                                          ,Locale.US);
 String strDate=writeFormat.format(rs.getTimestamp(5)); 
```

# java - 开发 JAX-WS Web 服务时在生成的 XSD 中获取复杂类型的空序列

> ID：12912093
> 
> 赞同：1
> 
> 时间：2012-10-16T09:59:38.540
> 
> 标签：java, web-services, netbeans, xsd, wsdl

在编写 Web 服务时，我似乎遇到了 Java 和 NetBeans 的问题。我已经搜索了几天没有运气，找到与我相同问题的人零回复。

我创建了一个返回复杂类型 (LoginReply) 的 Web 服务，该复杂类型包含另一个复杂类型 (AppInfo) 的数组

但是，当我由此生成 WSDL 时，XSD 中的复杂类型定义为空白，手动添加信息仍然会使 Web 服务返回 null，即使数据已成功传递给 Web 服务。

```
<xs:complexType name="appInfo">
<xs:sequence/>
</xs:complexType> 
```

登录回复：http: //pastebin.com/Umx6ayvi 应用信息：[http](http://pastebin.com/Umx6ayvi) : [//pastebin.com/566WnZ4H](http://pastebin.com/566WnZ4H)

如果有人能指出我做错了什么，或者如果这是 NetBeans 的一个错误，我是 Java 新手，所以我不能排除我只是不理解某些东西，但我接近拉我的头发在这里。

编辑：

刚刚注意到，当我通过 NetBeans 部署到 tomcat 时，出现以下错误：

```
WARNING: duplicate class definition bug occured? Please report this :    uk/co/example/ComplexTypes/LoginReply$JaxbAccessorM_getApplications_setApplications_[Luk_co_example_ComplexTypes_AppInfo;

java.lang.ClassFormatError: Illegal class name "uk/co/example/ComplexTypes/LoginReply$JaxbAccessorM_getApplications_setApplications_[Luk_co_example_ComplexTypes_AppInfo;" in class file uk/co/example/ComplexTypes/LoginReply$JaxbAccessorM_getApplications_setApplications_[Luk_co_example_ComplexTypes_AppInfo; 
```

注意 co_uk_example 之前的随机 L。我的研究表明这是一个应该修复的旧错误，并且一年多来没有其他人报告过这个问题，不知道从哪里开始。

另一个编辑：

刚刚在服务上添加了一个新的 web 方法，它只是获取 appInfo 列表并将其返回给客户端。这仍然以同样的方式失败，NetBeans 拒绝在 AppInfo 中生成序列。我确定我错过了声明课程的内容，但我已经检查了无数次以确保我没有遗漏任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:32:35.590

警告给你很好的提示：“警告：出现重复的类定义错误”

*   您的 ws 实现类直接使用直接使用 AppInfo 的 LoginReply 类（+您也可能在您的 ws 实现中直接使用此类）=> jaxb 找到它
*   @XMLSeeAlso(...) 告诉 jaxb “链接”引用的类

=> 同一类的两个定义（不确定是设计使然还是 jaxb 无法更优雅地处理这种情况的错误）

要解决这个问题，只需从 LoginReply 类中删除 @XmlSeeAlso 就可以了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:51:45.483

这个问题归结为一个非常简单的错误。AppInfo 类使用了非标准的 getter 和 setter。

```
public void SetAppID(int AppID)
{
    this.AppID = AppID;
} 
```

这是不正确的（注意集合上的大写字母），它应该是：

```
public void setAppID(int AppID)
{
    this.AppID = AppID;
} 
```

使用大写字母不是 JavaBeans 的标准，因此 JAX-WS 不知道如何为此类生成 WSDL。也感谢以下链接中的 shyam 回答问题

[如何在 JAX-WS Web 服务中返回自定义复杂类型？](https://stackoverflow.com/questions/12955313/netbeans-jax-ws-return-custom-complex-type-n/12955488#12955488)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:10:52.543

我认为您不能在 http 协议中通过网络（编程端口类型）发送“复杂类型”，但是数组可能会隐式转换为分隔字符串集，请检查文档以进行数据传输。

# ruby-on-rails - Sitemap_generator 在未知 URL 生成站点地图

> ID：12912097
> 
> 赞同：1
> 
> 时间：2012-10-16T09:59:51.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, sitemap

我正在使用[sitemap_generator](https://github.com/kjvarga/sitemap_generator "站点地图生成器") gem 为我的站点生成站点地图。

在本地生成站点地图可以正常工作，我可以在`http://localhost:3000/sitemap1.xml.gz`.

部署到 Heroku 并运行后

```
heroku run rake sitemap:refresh --app myapp-prod 
```

我明白了：

```
In /app/public/
+ sitemap1.xml.gz                                        254 links /    4.74 KB
+ sitemap_index.xml.gz                                  1 sitemaps /  231 Bytes
Sitemap stats: 254 links / 1 sitemaps / 0m06s 
```

到目前为止一切顺利 - 但是，当尝试访问我的站点地图时`https://myapp.com/sitemap1.xml.gz`，我收到 404 错误。我尝试了以下方法来解决这个问题，但都没有奏效：

1.  调用`git add`两个本地生成的 xml 文件，将它们推送到 Heroku，然后调用`heroku run rake sitemap:refresh --app myapp-prod`以使用我的生产 URL 更新本地生成的 URL。但是文件没有被刷新，它与本地生成的文件完全相同，即使返回与上面相同的消息。
2.  将站点地图生成为自定义路径，例如 public/shared/。但是访问时错误仍然存​​在`https://myapp.com/shared/sitemap1.xml.gz`。
3.  所有可能的和不可能的 URL 组合，例如`https://myapp.com/public/sitemap1.xml.gz`（当然，这永远不会起作用，但想不遗余力）

关于什么可能导致这种行为以及站点地图可能存储在哪里的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:26:28.333

经过进一步的研究，我终于弄清楚了问题所在。

由于 Heroku 使用只读文件系统，因此无法将站点地图生成到`public`目录中。这里有更详细的解释：

[https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)

最终对我有用的解决方案是将站点地图生成到我的 Amazon S3 存储中，如此[处](https://github.com/kjvarga/sitemap_generator/wiki/Generate-Sitemaps-on-read-only-filesystems-like-Heroku)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T11:52:57.680

您对将站点地图上传到 Google Web Master 工具做了什么，因为默认情况下它希望站点地图位于[http://www.yoursite.com/](http://www.yoursite.com/) .....

我的站点地图托管在 Amazon S3 中，它在我的 robots.txt 文件中被引用，但我需要告诉 Google Web Master Tools 在哪里可以找到它。

有什么建议吗？

# android - 如何在surfaceview android上绘制图像

> ID：12912102
> 
> 赞同：8
> 
> 时间：2012-10-16T10:00:06.667
> 
> 标签：android, image, surfaceview

我想在surfaceview上添加图像并使其可点击。我可以通过xml使用布局来做到这一点。但我不能从代码动态地做到这一点。我什至无法使用 lockcanvas 在画布上绘制图像，因为我将 SurfaceHolder 类型设置为 SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS。所以我必须做些什么才能在我的应用程序的 SurfaceView 上绘制图像。请指导我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T10:04:37.577

类似的东西

```
public class MSurface extends SurfaceView implements SurfaceHolder.Callback {

    public MSurface(Context context) {
        super(context);
        getHolder().addCallback(this);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Bitmap icon = BitmapFactory.decodeResource(getResources(),R.drawable.icon);
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(icon, 10, 10, new Paint());        
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // TODO Auto-generated method stub
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        Canvas canvas = null;
        try {
            canvas = holder.lockCanvas(null);
            synchronized (holder) {
                onDraw(canvas);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (canvas != null) {
                holder.unlockCanvasAndPost(canvas);
            }
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }
} 
```

# c# - 为什么这个 system.threading.timer 控件不在指定时间触发？

> ID：12912104
> 
> 赞同：0
> 
> 时间：2012-10-16T10:00:17.737
> 
> 标签：c#, multithreading, c#-4.0, timer, threadpool

好的，我有这个`timer`控件，当我启动程序时它运行良好，但是当我最大化或最小化表单时，计时器控件停止工作。什么都不更新？这是代码

```
public MainForm()
        {
            InitializeComponent();
            var tm =
                new System.Threading.Timer(state => statusDateTimeLabel.Text = DateTime.Now.ToLocalTime().ToString(CultureInfo.InvariantCulture), null, TimeSpan.FromMilliseconds(0),
                TimeSpan.FromMilliseconds(1000));                
        } 
```

有时，标签甚至不更新，有时它会更新。但主要问题是，当我最大化表单时，再次恢复它时，它会停止更新时间。谁能解释我做错了什么？

如果不清楚，我在状态栏中有这个标签控件，我想在该标签中显示当前日期时间。

认为这可能是因为这个线程可能正忙于做其他事情，我什至尝试了这个

```
public MainForm()
    {
        InitializeComponent();
        ThreadPool.QueueUserWorkItem(delegate(object state)
                                         {
                                             new System.Threading.Timer(
                                                 stateObj =>
                                                 statusDateTimeLabel.Text =
                                                 DateTime.Now.ToLocalTime().ToString(CultureInfo.InvariantCulture),
                                                 null, TimeSpan.FromMilliseconds(0),
                                                 TimeSpan.FromMilliseconds(1000));
                                         });
    } 
```

但是这又和上面一样，有时它会更新，有时它不会，让我感到困惑的是，当我最大化表单甚至调整它的大小时，它会停止更新？任何人都可以帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:07:24.010

更新文本的回调未在 UI 线程上执行。尝试以下操作：

```
var context = SynchronizationContext.Current;
var tm = new System.Threading.Timer(state => 
{
  context.Send(delegate() { statusDateTimeLabel.Text = DateTime.Now.ToLocalTime().ToString(CultureInfo.InvariantCulture); });
}, null, TimeSpan.FromMilliseconds(0), TimeSpan.FromMilliseconds(1000)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:08:49.473

您没有保持对它的引用，因此在某个时间点，它将被垃圾收集。见[`Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)：

> 只要您使用**Timer**，就必须保留对它的引用。与任何托管对象一样，当没有对**Timer的引用时，它会受到垃圾回收的影响。****Timer**仍然处于活动状态的事实并不能阻止它被收集。

并做：

```
Timer tm; //Moved to a field

public MainForm()
        {
            InitializeComponent();
            tm =
                new System.Threading.Timer(state => statusDateTimeLabel.Text = DateTime.Now.ToLocalTime().ToString(CultureInfo.InvariantCulture), null, TimeSpan.FromMilliseconds(0),
                TimeSpan.FromMilliseconds(1000));                
        } 
```

* * *

（虽然，正如其他人指出的那样，如果您在计时器回调中所做的工作是与 UI 交互，那么您可能选择了错误的组件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:12:23.147

如果您使用的是 Windows 窗体，则应使用 System.Windows.Forms.Timer 而不是 System.Threading.Timer，如下所示：http: [//msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

# jquery - 将新数据合并到jQuery中的现有数组中

> ID：12912108
> 
> 赞同：1
> 
> 时间：2012-10-16T10:00:29.793
> 
> 标签：jquery, arrays

我有这个数组，它是从存储在数据库中的一些数据创建的：

```
var chdata = [
  {title: "title one",link: "link one",thumb: "image url one",pcaid: "0001"},
  {title: "title two",link: "link two",thumb: "image url two",pcaid: "0002"},
  {title: "title three",link: "link three",thumb: "image url three",pcaid: "0003"},
  {title: "title four",link: "link four",thumb: "image url four",pcaid: "0004"}
]; 
```

然后我从以这种格式到达的地理编码服务中提取一些位置数据：

```
var pcdata = [
  {Distance: "12.2",Latitude: "50.1",Longitude: "0.1",YourID:"0003"},
  {Distance: "80.7",Latitude: "50.4",Longitude: "0.5",YourID:"0001"},
  {Distance: "95.3",Latitude: "50.9",Longitude: "0.7",YourID:"0004"},
  {Distance: "135.1",Latitude: "51.3",Longitude: "0.9",YourID:"0002"},
] 
```

chdata 中的 'pcaid' 和 pcdata 中的 'YourID' 是关联这两个数组的外键，如果您原谅 DBA 类比的话。

我需要通过 chdata 数组“每个（）”，显示其中的数据，以及 pcdata 中相关项目的距离。例如在伪代码中：

```
<a href="link one">
  <img src="image url one" /><br />title one (80.7 miles away)
</a> 
```

此数据需要按距离顺序排列。我的问题是：

1.  我如何关联/相交`chdata`并`pcdata`基于 和 之间的`pcaid`匹配`YourID`。
2.  完成此操作后，我计划使用 array.sort 将其设置为距离顺序。你预见到这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:31:52.347

**对于#1：** 这里最好的设置是让你`pcdata`的数据格式为键值。我会这样称呼的`pchash`。然后你可以使用这个（相对）简单的语法：

```
for(var i = 0; i < chdata.length; ++i)
{
    var ch   = chdata[i];
    var dist = pchash[ch.pcaid].distance;
    // Other stuff...
} 
```

要将当前`pcdata`转换为`pchash`，您可以使用以下内容：

```
pchash = {};
for(var i = 0; i < pcdata.length; ++i)
{
    pchash[pcdata[i]['YourID']] = pcdata[i];
} 
```

或者，更好的是，如果您控制服务器，`pcdata`则以该格式发送开始。

**对于 #2：** JavaScript 数组具有内置的[排序](http://www.w3schools.com/jsref/jsref_sort.asp)功能，您可以传入一个比较器进行自定义排序。在您的情况下，请尝试：

```
whatever.sort(function(a, b) {
    return a.Distance - b.Distance;
}); 
```

如果这给了你想要的相反，只需`a.Distance`减去`b.Distance`。

希望有帮助！

**PS：** 另一个答案建议使用嵌套循环强制执行此操作。如果您有大量数据，我不推荐它：它需要`chdata.length * pcdata.length`迭代，而这只需要`chdata.length + pcdata.length`迭代（或者只是`chdata.length`，如果您从服务器获取键值格式）。但在小型数据集上，差异不会很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:24:09.343

您可以使用以下方法合并对象[`extend`](http://api.jquery.com/jQuery.extend/)：

```
$.each(chdata, function(i, x) {
  $.each(pcdata, function(j, y) {
    if(x.pcaid === y.YourID) {

      // at this point you have a match, so you could 
      // either extend the object (like below) 
      $.extend(x, y);

      // just access the properties of each object directly, eg:
      alert(x.title + ' is ' + y.Distance + ' miles away');

    }
  });
}); 
```

所以循环`chdata`，然后循环`pcdata`，找到`pcaid`匹配的位置`YourID`，然后合并对象（`chdata`将包含来自的相应数据`pcdata`），或者直接访问它们的属性。

[这是一个小提琴](http://jsfiddle.net/y3n3t/)

# ruby-on-rails - 捆绑安装会在许多 gem 上出现错误

> ID：12912111
> 
> 赞同：0
> 
> 时间：2012-10-16T10:00:50.273
> 
> 标签：ruby-on-rails, ruby, configuration, gem

当我尝试在我的 VPS上的[catarse项目上运行](https://github.com/danielweinmann/catarse)**捆绑安装**时，该项目所需的许多 gem 返回错误并且我无法安装（我正在使用：ruby 1.9.2p320）。

例如返回错误的宝石是：

*   薄的
*   事件机
*   线缓存19

错误总是以以下内容开头：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

并以：

```
Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.2-p320@catarse/gems/linecache19-0.5.12 for inspection.
 Results logged to /usr/local/rvm/gems/ruby-1.9.2-p320@catarse/gems/linecache19-0.5.12/ext/trace_nums/gem_make.out
 An error occurred while installing linecache19 (0.5.12), and Bundler cannot continue.
 Make sure that `gem install linecache19 -v '0.5.12'` succeeds before bundling. 
```

你能帮忙弄清楚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:06:43.603

有些 gem 需要在本地构建，而不是简单地下载。这意味着 gem 中的一些代码不是用 ruby​​ 编写的（通常是 C）。非 ruby​​ 代码需要在本地编译和构建才能运行。在这些情况下，您将需要一个能够编译和构建非 ruby​​ 代码的环境。

这里有一篇关于原生宝石的好帖子：http: [//patshaughnessy.net/2011/10/31/dont-be-terrified-of-building-native-extensions](http://patshaughnessy.net/2011/10/31/dont-be-terrified-of-building-native-extensions)。

在这种情况下，通常需要跟踪哪些库需要在本地安装才能构建 gem。

我知道 linecache19 存在一些问题，并且有一些问题可以解决这些问题，例如：[Installing linecache19 for Ruby 1.9.2 via rvm](https://stackoverflow.com/questions/6650567/installing-linecache19-for-ruby-1-9-2-via-rvm)。

# java - 新值和先前值在 for 循环中被覆盖的数据

> ID：12912114
> 
> 赞同：0
> 
> 时间：2012-10-16T10:01:06.537
> 
> 标签：java, loops

我想比较来自循环的前一个值和新值，并根据数据增加一些行。为此，我正在执行如下操作，但数据被覆盖，因为我在 for 循环内部进行操作。我该如何执行此操作。

```
 for (RecordData recordData : recordDataList) {      
        prevRespondentId = recordData.getRespondentId();
        if (recordData.getRespondentId() != prevRespondentId) {
             rowDataNumber++;
        }
        prevRespondentId = recordData.getRespondentId();
    } 
```

我有像 1,2,3 这样的数据作为受访者 ID，我需要根据该增量数据查看新的和上一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:04:45.917

这会解决你的问题吗？

```
 prevRespondentId = recordDataList.get(0).getRespondentId(); //Initialize to first or default value probably -1?

    for (RecordData recordData : recordDataList) {
                if (recordData.getRespondentId() != prevRespondentId) {
                rowDataNumber++;
            }
            prevRespondentId = recordData.getRespondentId();
        } 
```

基本上，您甚至在检查 prevRespondentId 之前就已覆盖它，这导致了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:04:47.503

很难理解你试图做什么，但可能是这样的：

```
for (RecordData recordData : recordDataList) {
        if (recordData.getRespondentId() != prevRespondentId) {
            rowDataNumber++;
        }
        prevRespondentId = recordData.getRespondentId();
} 
```

在完成 if 检查之前，基本上不要覆盖 preRespondentId。这将确保它始终是之前的受访者 ID。你当然需要初始化它。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:05:05.640

```
 ..some type.. prevRespondentId = -1;
 for (RecordData recordData : recordDataList) {
     if (recordData.getRespondentId() != prevRespondentId) {
         rowDataNumber++;
     }
     prevRespondentId = recordData.getRespondentId();
 } 
```

# php - 如何使用ajax调用检查在php文件中单击了哪个按钮

> ID：12912115
> 
> 赞同：0
> 
> 时间：2012-10-16T10:01:07.097
> 
> 标签：php, javascript, ajax

我有一个表单`post.php`，用户在其中输入数据，输入`receivepost.php`的数据通过 Ajax 发布传输。我想在以下方面实现`receivepost.php`：

```
if (button save is pressed) {
    save to database
} else if (button retrieve is pressed) {
    retrieve from database
} 
```

我尝试在上使用`isset($_POST['submit'])`，`reveivepost.php`但它没有检测到按下的按钮。Ajax 帖子正在运行，所有数据都可以在`receivepost page`. 我有另一个解决方案是创建 2 个不同的 PHP 文件并根据按下的按钮运行它们，但我认为有更好的解决方案。

这是我的ajax调用：

```
$("document").ready(function () {

  $("#submit").click(function () {

        var xmlhttp;

        // test browsers
        if(window.XMLHttpRequest) {

          xmlhttp = new XMLHttpRequest();

        }else {
          xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        // get the values of textboxes
        var desc_text = $("#desc").val();
        var speed_text = $("#speed").val();
        var tarea_text = $("#tarea").val();

        // variable to hold value of textboxes
        var content = "desc=" + desc_text + "&speed=" + speed_text + "&tarea=" + tarea_text;

        // open the request
        xmlhttp.open("POST", "receivepost.php", true);

        // set header
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

        // check xmlhttp state and status and display text in div
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

           document.getElementById('para').innerHTML = xmlhttp.responseText;
          }

        }
        // send the content of the textboxes
        xmlhttp.send(content);

      });
   }); 
```

这是我的`post.php`表格：

```
<form id="myform">

    <label for="description">Description:</label>
    <input type="text" id="desc" name="desc" /><br/>

    <label for="speed">Speed: </label>
    <input type="text" id="speed" name="speed" /><br/>

    <textarea id="tarea" cols="10" rows="10" name="tarea"></textarea><br/>

    <input type="button" id="submit" name = "submit" value="Save">
    <input type="button" id="retrieve" name="retrieve"  value="Retrieve">

</form>
<div id="para"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:17:21.480

尝试在内容中添加一个名为 button-pressed 的额外参数，您稍后可以在 receivepost.php 中使用它，如下所示：

```
if($_POST['button-pressed']=="save"){  
    //savetodb code  
}
else if($_POST['button-pressed']=="retrieve"){  
    //retreivefromdb code  
} 
```

也许您有两个 JavaScript 函数，每个按钮上都有一个：

```
$("#submit").click(function () {
    var content = "button-pressed=save" + "&desc=" + desc_text + "&speed=" + speed_text + "&tarea=" + tarea_text;

$("#retrieve").click(function () {
    var content = "button-pressed=retrieve" + "&desc=" + desc_text + "&speed=" + speed_text + "&tarea=" + tarea_text; 
```

希望这可以帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:30:00.273

```
<input type="button" id="submit" name ="submit" value="save" onClick="fnc(this.id)">
<input type="button" id="retrieve" name="retrieve"  value="retrieve" onClick="fnc(this.id)">
<script type="text/javascript">
    function fnc(myid) {

    var val=document.getElementById(myid).value;
    alert(val);
    }
</script> 
```

# msbuild - 带有替换现有文件选项的 Msbuild

> ID：12912123
> 
> 赞同：3
> 
> 时间：2012-10-16T10:01:18.070
> 
> 标签：msbuild, cruisecontrol.net

我正在使用 MsBuild 构建和发布我的项目（连同 CruiseControl.Net）。我已经设置了所有内容并且效果很好，但问题是它覆盖了已部署文件夹中的所有现有文件（并且该文件夹包含用户数据，我可以在构建/发布后执行 xcopy，但用户数据是一些演出和这在每个自动构建上都会有太多的磁盘活动）。

所以我想做的是使用“仅替换现有文件”选项，而不是从文件夹中删除所有内容。我在发布时在 Visual Studio 2010 中获得了此选项，您可以“替换退出文件”或“首先删除所有文件”，如何使用 msbuild 命令参数执行此操作。

```
 <msbuild>
    <executable>C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
    <workingDirectory>C:\CCnet\dmisr-web_workingdir\MAKANI</workingDirectory>
    <projectFile>MAKANI.sln</projectFile >
    <buildArgs>/noconsolelogger /v:quiet /p:Configuration=Staging /p:DeployOnBuild=true /p:DeployTarget=PipelinePreDeployCopyAllFilesToOneFolder /p:_PackageTempDir="c:\dMisr\Web - Deployed" /p:AutoParameterizationWebConfigConnectionStrings=false</buildArgs>
    <targets>ReBuild</targets >
    <timeout>600</timeout >
 </msbuild> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T14:37:44.973

`/p:SkipExtraFilesOnServer=true`使用这些构建参数时仍在为我删除其他文件 `/p:DeployOnBuild=true;DeployTarget=PipelinePreDeployCopyAllFilesToOneFolder;_PackageTempDir=\\Network\Share\code /p:AutoParameterizationWebConfigConnectionStrings=false /p:SkipExtraFilesOnServer=true`

我似乎没有能力发表评论。因此，在答案部分提供我的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:20:24.090

这个答案可能会有所帮助

[如何防止 MSDeploy 在我的项目中删除额外的文件夹？](https://stackoverflow.com/questions/3321264/how-do-i-keep-msdeploy-from-deleting-extra-folders-in-my-project)

看起来您可能只需要为 msbuild 提供一个额外的属性。

SkipExtraFilesOnServer=True

# php - 将 PHP 字符串传递给 JavaScript：未终止的字符串文字

> ID：12912124
> 
> 赞同：4
> 
> 时间：2012-10-16T10:01:23.707
> 
> 标签：php, javascript, ajax

我将 PHP var 分配给我的 javascript var 并通过 ajax-jQuery 发送到 PHP 文件，但我的 php 变量包含我已替换为的换行符`<br>`

```
e.g.            $values1 = 'abc<br>pqr<br>xyz';  $values2 = 'xyz<br>lmn';
javascript -    var data = 'val1=<?php echo $values; ?>&val2=<?php echo $values2; ?>'; 
```

然后 ajax 脚本将数据发布到 PHP 文件

但是当我在控制台上打印这些数据时，它给了我错误- SyntaxError: unterminated string literal。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:05:21.217

你的 JS 代码：

```
var data = 'val1=<?php echo $values1; ?>&val2=<?php echo $values2; ?>'; 
```

`$values1`如果您的一个或多个 PHP 变量或`$values2`其中包含单引号，则会给出 Javascript 语法错误`'`。

通过将所有单引号替换为其他内容，确保您的 PHP 变量中不包含单引号，否则使用双引号`"`创建 JS var，如下所示：

```
var data = "val1=<?php echo $values1; ?>&val2=<?php echo $values2; ?>"; 
```

提供的 PHP 变量不包含双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:05:11.240

首先，您有一个错字，这可能会导致错误：

```
// --------------------------------v
var data = 'val1=<?php echo $values1; ?>&val2=<?php echo $values2; ?>'; 
```

然后，我建议您使用对象作为`data`Ajax 请求的参数：

```
var data = {
    val1: '<?php echo $values1; ?>',
    val2: '<?php echo $values2; ?>'
}; 
```

此外，最好`'`在`$values1`和`$values2`变量中转义单引号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:07:26.120

尝试使用`<br />`而不是`<br>`. 这里只是猜测，没有测试。

# javascript - 阴影贴图出现在错误的地方

> ID：12912126
> 
> 赞同：0
> 
> 时间：2012-10-16T10:01:30.607
> 
> 标签：javascript, webgl, three.js

我正在尝试使用 three.js 中的内置阴影贴图插件。在最初的困难之后，我有或多或少可以接受的图像，最后一个故障。那个是阴影出现在一些（全部？）表面上，正常为 0,0,1。下面是同一型号的图片。

三.js ![三.js](../Images/178dcd1309c25db0aa49de90a11427ff.png)

Preview.app (Mac)

![预览.app](../Images/2310756cc9ea67f69d8c33ff9c0bab22.png)

以及用于设置阴影的代码：

```
 var shadowLight = new THREE.DirectionalLight(0xFFFFFF);
    shadowLight.position.x = cx + dmax/2;
    shadowLight.position.y = cy - dmax/2;
    shadowLight.position.z = dmax*1.5;
    shadowLight.lookAt(new THREE.Vector3(cx, cy, 0));
    shadowLight.target.position.set(cx, cy, 0);
    shadowLight.castShadow = true;
    shadowLight.onlyShadow = true;
    shadowLight.shadowCameraNear    =  dmax;
    shadowLight.shadowCameraFar     =  dmax*2;
    shadowLight.shadowCameraLeft    = -dmax/2;
    shadowLight.shadowCameraRight   =  dmax/2;
    shadowLight.shadowCameraBottom  = -dmax/2;
    shadowLight.shadowCameraTop     =  dmax/2;
    shadowLight.shadowBias          =  0.005;
    shadowLight.shadowDarkness      =  0.3;
    shadowLight.shadowMapWidth      =  2048;
    shadowLight.shadowMapHeight     =  2048;
    // shadowLight.shadowCameraVisible = true;
    scene.add(shadowLight); 
```

更新：这里有一个活生生的例子：http: [//jsbin.com/okobum/1/edit](http://jsbin.com/okobum/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:11:10.063

你的代码看起来不错。您只需要使用`shadowLight.shadowBias`参数即可。这总是有点棘手。（请注意，偏差参数可以为负。）

编辑：收紧你的阴影相机近平面和远平面。这将有助于减少阴影粉刺和彼得潘。例如，您的实时链接 set `shadowLight.shadowCameraNear = 3*dmax;`。这对我有用。

如果还没有，您也可以尝试增加桌面的深度。

你可以试试设置`renderer.shadowMapCullFrontFaces = false`。这将剔除背面而不是正面。

# java - Android：何时使用 finish() 结束课程？

> ID：12912130
> 
> 赞同：6
> 
> 时间：2012-10-16T10:01:40.863
> 
> 标签：java, android, class, activity-finish

我经常看到以 结尾的类的例子`finish()`，但绝对不是总是这样。我的问题是你应该什么时候结束课程`finish()`？它到底做了什么，用后退按钮结束课程和用 结束课程有什么区别`finish()`？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T10:03:27.143

`finish()`可以调用来杀死（销毁）一个 Activity 实例。如果您不需要关闭 Activity 手册，这在很多情况下都是如此，则无需调用此方法。

但是，如果您需要在活动中某处显示“关闭”的按钮，那么您应该使用此方法。但总的来说，Android 中的后退按钮行为会处理这样的事情。

后退按钮实际上并没有完成您的活动，而是立即`finish()`调用该`onDestory()`方法，而后退按钮则没有。

当按下后退按钮时， `onStop()`方法被调用，但是`onDestory()`方法调用可能会被系统延迟，这样系统就可以恢复 Activity，这比完全重启更便宜（在资源上）。

生命周期：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

完成（）：http: [//developer.android.com/reference/android/app/Activity.html#finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:05:50.117

当您需要在特定点立即结束时，您可以使用方法完成`Activity`课程。如果您按下后退按钮，您将经历[生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)( ，然后自动。`finish()``Activity``onPause()``onStop()``onDestroy())`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T10:05:58.410

使用完成的一个原因是当您开始活动时

```
void android.app.Activity.startActivityForResult(Intent intent, int requestCode) 
```

在这种情况下，您不会返回使用另一个 startActivity 启动它的 Activity，但使用完成

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:09:37.223

> 公共无效完成（）
> 
> 当您的活动完成并应该关闭时调用它。ActivityResult 被传播回通过 onActivityResult() 启动你的人。

`finish()`在您完成了与活动相关的操作后，调用它来杀死您的活动实例。之后，您将无法使用该活动。所以简单地打电话`finish()`，它会杀死你的活动。

如果您按下后退按钮，它将`finish()`自动调用以终止活动。它将经历活动生命[周期](http://developer.android.com/reference/android/app/Activity.html)（最后`onPause()`）`onStop()``onDestroy()`

调用finish() 的一个原因是，如果您不调用它，当您浏览活动时，所有活动都将被添加到后台堆栈中。所以当你回去的时候，你必须通过这些活动回来。因此，例如，当您单击后退按钮时，它只会终止活动并将其从后台堆栈中删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T10:14:46.300

后退按钮将您带到堆栈中的最后一个活动，同时`finish()`销毁当前活动。您可以调用`finish()`您不希望用户返回的活动。示例：登录活动

# android - Android：使用语言环境解析月份

> ID：12912134
> 
> 赞同：0
> 
> 时间：2012-10-16T10:01:49.427
> 
> 标签：android, locale, monthcalendar

大家好：有什么方法可以解析一个月 - 我的应用程序将同时使用荷兰语和英语，例如 10 月可能是十月或十月 - 并根据它设置一年中的相应月份？（例如 10 月 10 日）。

服务器总是回复一个字符串（这是荷兰语中的月份名称），但我需要解析它，因为应用程序也将使用英语）。

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:16:06.723

使用可识别区域设置的 DateFormat 符号。不要尝试硬编码月份名称。

```
DateFormatSymbols(Locale.DUTCH).getMonths()[Calendar.OCTOBER]; // returns Oktober 
```

或者

```
Calendar.getDisplayNames(MONTH, ALL_STYLES, Locale.DUTCH); // returns a map which you can use to match strings 
```

如果您从其他地方获取月份名称字符串，则可以将其转换为月份编号：

```
DateTime instance = format.withLocale(Locale.DUTCH).parseDateTime("Oktober");  
int monthNum = instance.getMonthOfYear(); 
```

# php - 计算一个键在查询字符串中出现的次数

> ID：12912135
> 
> 赞同：0
> 
> 时间：2012-10-16T10:01:59.103
> 
> 标签：php, count, query-string

假设我有一个这样的查询字符串：

```
?s=1&s=1&s=1 
```

我如何计算键“s”出现的次数（无论值如何）？我试过了

```
count($_GET['s']) 
```

但它总是返回 1。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:06:32.313

`s=`要计算查询字符串中出现的次数，您可以执行以下操作：

```
$query_string = $_SERVER['QUERY_STRING'];
$occurs = substr_count($query_string, 's=');
echo $occurs; 
```

不过，最好遵循@hsz 的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:03:35.483

结果`count($_GET['s'])`是正确的，因为`?s=1&s=1&s=1`您用最后一个值覆盖`s`参数。如果要传递数组，请使用：

```
?s[]=1&s[]=1&s[]=1 
```

然后将按预期`count`返回。`3`

# ios - 如何从 HTML 应用程序为 IOS 设备创建唯一标识符

> ID：12912136
> 
> 赞同：1
> 
> 时间：2012-10-16T10:02:04.633
> 
> 标签：ios, mobile-safari, uuid

我们正在构建一个涉及金钱的基于 Web 的系统，我们希望避免欺诈，实施一个能够**识别发送请求的 IOS 设备的**系统。

这种安全性的原因是因为我们为从移动设备执行操作提供资金，并且我们只希望用户获得一次资金，如果我们无法识别设备，用户可以多次执行操作。

这个*唯一标识符*可以使用任何 HTML、JS、服务器端技术，但不能使用任何本机 IOS 调用，因为该应用程序是基于 Web 的，并且它在正常的 Safari 实例中运行。

*唯一标识符*不需要是官方*UUID*。

该系统不需要防弹，只需比普通 cookie 更难作弊。

系统应该在单独的会话中工作，比如用户一周后回来。

欢迎使用基于启发式的系统，也欢迎 LocalStorage 与 Cookie 的任意组合，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:06:08.417

您可以在 Web 应用程序中识别唯一用户/设备的唯一方法是使用 cookie 和/或跟踪用户的 IP 地址。

当然，设备的 IP 地址会随着所有者的移动而改变，cookie 可以被清除/禁用或在设定的时间后过期。

让网站访问设备唯一标识符（例如 UDID）将是巨大的安全风险/隐私侵犯。如果您要找到这样的方法，我会说您在 iOS 中发现了一个严重的安全漏洞。

如果您只对在怀疑帐户被盗时触发即电子邮件警报感兴趣，您可以使用基于设备类型（用户代理字符串）和[地理 IP 查找](http://www.geoiptool.com)的启发式方法来检测用户是否突然更改了设备类型和大陆，并要求用户确认确实如此。我相信这就是谷歌和 Facebook 所做的。

# mysql - Select from MySQL table

> ID：12912139
> 
> 赞同：-2
> 
> 时间：2012-10-16T10:02:07.103
> 
> 标签：mysql, sql

I have a table and I'm trying to retrieve any row which has a number in it

For example this:

```
+----------+--------------+
| Name     | age          | 
+----------+--------------+
| name1    |      21      | 
| name2    |      22      | 
| name3    |      21      |
+----------+--------------+ 
```

I tried this:

```
SELECT * FROM table WHERE 'age' = 21; 
```

the message I get from the is

```
Empty set, 1 warning (0.00 sec) 
```

I'm not to sure what I'm doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:03:48.587

The issue is `'age'`. You don't need to use quotes near `age`.

```
SELECT * from Table1 where age = 21; 
```

[See this SQLFiddle.](http://sqlfiddle.com/#!2/a0d3f/4)

Instead of quotes you can use [Backtick](http://en.wikipedia.org/wiki/Grave_accent) (`).
Also, Don't use [Reserved Words](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html) as you use in table name.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:05:31.907

Don't add quotes to your column name use like this

```
SELECT * FROM table WHERE age = 21; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T10:05:53.697

Instead of using 'age' simply use **age** it works

Use this:

```
SELECT * FROM table WHERE age = 21; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:08:05.853

Try this

```
select * from person where age = 20; 
```

SQL fiddle: [http://sqlfiddle.com/#!2/0d3c32/24](http://sqlfiddle.com/#!2/0d3c32/24)

# javascript - 动态更改的填充不适用于带有表单的 DIV

> ID：12912140
> 
> 赞同：0
> 
> 时间：2012-10-16T10:02:10.847
> 
> 标签：javascript, html

我正在尝试更改包含子表单的 DIV 标记的填充。下面是HTML

```
 <div id="a">
   <form id="b" style="background-color:Red;height:300px">
      <input type="text" />
   </form>
 </div>​ 
```

下面是CSS

```
 document.onclick = function(){
    document.getElementById('a').style.padding = "1% 1% 1% 1%"    
 }; 
```

请检查<a href="http://jsfiddle.net/74W​​bB/2/" rel="nofollow">this fiddle 中的行为。它无法正常工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:05:15.993

用其他名称重命名表单 ID，然后尝试，您的表单和 div 都具有相同的名称。

我已经分叉了你的小提琴 jsfiddle.net/FAYvE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:13:31.763

据我所知，我认为您正在寻找更像下面的分叉小提琴的东西

[http://jsfiddle.net/7QLAy/](http://jsfiddle.net/7QLAy/)

蓝色背景的效果是

[http://jsfiddle.net/StkgZ/](http://jsfiddle.net/StkgZ/)

# lucene - Lucene 拼写检查器 3.6 字符集

> ID：12912142
> 
> 赞同：1
> 
> 时间：2012-10-16T10:02:16.417
> 
> 标签：lucene, spell-checking

我需要帮助设置 lucene 拼写检查器的字符集（版本 3.6，包括核心 lucene 和拼写检查器）。我的字典（“D:\dictionary.txt”）有英语和俄语单词。我的代码适用于英文文本。例如，它返回我正确的单词“你好”的拼写。但它不适用于俄语。例如，当我拼错一些俄语单词时，编译器会引发异常（线程“main”java.lang.ArrayIndexOutOfBoundsException：0 中的异常）它找不到任何俄语单词的建议。

这是我的代码：

```
 RAMDirectory spellCheckerDir = new RAMDirectory();
        SpellChecker spellChecker = new SpellChecker(spellCheckerDir);
        StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, analyzer);
        InputStreamReader isr = new InputStreamReader(new FileInputStream(new File("D:\\dictionary.txt")), "UTF-8");
        PlainTextDictionary dictionary = new PlainTextDictionary(isr);
        spellChecker.indexDictionary(dictionary, config, true);
        suggestions = spellChecker.suggestSimilar("hwllo", 1); // word 'hello' is misspeled like 'hwllo' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T21:38:02.290

根据您的代码，我可以提供的最佳选择（它很有用，10x）。我刚刚分别加载了两个字典，也应该在组合文件中工作。

```
 RAMDirectory spellCheckerDir = new RAMDirectory();
    SpellChecker spellChecker = new SpellChecker(spellCheckerDir);
    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_44);
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_44, analyzer);
    InputStreamReader isr = new InputStreamReader(new FileInputStream(new File("d:/dictionaries/English/words.english")), "UTF-8");
    PlainTextDictionary dictionary = new PlainTextDictionary(isr);
    spellChecker.indexDictionary(dictionary, config, true);
    isr = new InputStreamReader(new FileInputStream(new File("d:/dictionaries/Swedish/words.swedish")), "UTF-8");
    PlainTextDictionary swdictionary = new PlainTextDictionary(isr);
    spellChecker.indexDictionary(swdictionary, config, true);
    String wordForSuggestions = "hwllo";
    int suggestionsNumber = 5;

    String[] suggestions = spellChecker.suggestSimilar("hwllo", suggestionsNumber); // word 'hello' is misspeled like 'hwllo' 
```

# php - .repsonseText 返回空字符串

> ID：12912144
> 
> 赞同：-2
> 
> 时间：2012-10-16T10:02:16.760
> 
> 标签：php, google-chrome, responsetext

我在 Chrome 中收到以下错误：

**XMLHttpRequest 无法加载“http://localhost/getuser.php?q=1&sid=0.03709745453670621”。Access-Control-Allow-Origin 不允许 Origin null。**

当我单击链接“ *http://localhost/getuser.php?q=1&sid=0.03709745453670621* ”时。它显示了正确的数据，但我不明白为什么我不断收到此错误，我无法弄清楚如何 --allow-file-access-from-files。

当我在 Firefox 中运行它时，我没有收到任何错误，但也没有显示数据。在 Javascript 代码中，**alert(xmlHttp.responseText)**没有显示任何内容，这是因为 responseText 包含空字符串。为什么它不包含数组数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:39:55.670

由于同源政策，问题出现了。添加**header('Access-Control-Allow-Origin: *')** ; 在我的 php 文件之上帮助解决了这个问题。

# jquery - jquery复选框单击

> ID：12912147
> 
> 赞同：0
> 
> 时间：2012-10-16T10:02:24.747
> 
> 标签：jquery

有一张桌子

```
<table>
  <tr class="c1"><td><input type="checkbox" name="tableRow[]"></td>......</tr>
  <tr class="c2"><td><input type="checkbox" name="tableRow[]"></td>......</tr>
  <tr class="c1"><td><input type="checkbox" name="tableRow[]"></td>......</tr>
...
</table> 
```

然后js是：

```
$('input:checkbox[name*=tableRow]').click(function(event) {

    var el = $(this);
    if (el.attr('checked')) {
        el.parents('tr').css("background-color", '#ffcccc');
    }
    else {
        el.parents('tr').css("background-color", 'inherit');
    }
    event.stopPropagation();
});

$('input:checkbox[name*=tableRow]').parents('tr').click(function() {
    var el = $(this).find('> td:eq(0) > :checkbox');
    el.click();
});​ 
```

复选框以两种方式选中和取消选中，但是当我单击“tr”时，它看起来像事件在检查集之前运行。

需要：在两个ckecks中然后设置css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:05:36.020

改成这样：

```
$('input:checkbox[name*=tableRow]').change(function(event) { ... }); 
```

而不是`el.attr('checked')`使用`el.is(':checked')`;

请参阅此演示[http://jsfiddle.net/S9L7C/](http://jsfiddle.net/S9L7C/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:33:53.387

这是一个工作示例： [jsFiddle](http://jsfiddle.net/7Zwh3/1/)

请注意，您应该使用带有“for”属性的标签标签，以获得对 W3C 更友好的代码。

```
 $('input:checkbox[name*=tableRow]').click(function (event) {

            var el = $(this);
             test(el);    
     }); 

    $('input:checkbox[name*=tableRow]').parents('tr').click(function () {
        var el = $(this).find(':checkbox');
        el.attr('checked', !el.attr('checked'));
        test(el);
    });

function test(el){
       if (el.is(':checked')) {
                el.parents('tr').css("background-color", '#ffcccc');
            }
            else {
                el.parents('tr').css("background-color", 'inherit');
            }
            event.stopPropagation();

} 
```

# xcode4 - Xcode 4.5.1 - C 编程 - 可执行文件不生成输出文件

> ID：12912160
> 
> 赞同：1
> 
> 时间：2012-10-16T10:03:18.860
> 
> 标签：xcode4

我在 OSX 10.8.2 上使用 Xcode 4.5.1 (4G1004)。我编写了一个简单的 C 程序，它从 .txt 文件中读取分数并将其中一些存储在一个新的 .txt 文件中。发生的情况是，如果我在 Xcode（command-b）中构建程序，然后直接转到它创建的可执行文件的位置并在终端中运行它，程序运行但不输出新的 .txt 文件。但是，如果不是以上述方式构建 (command-b) 并运行程序，而是通过单击工具栏左上角的箭头通过 Xcode 运行它，则随后会创建新的 .txt。

为什么会出现这种情况？我尝试使用 Sublime Text 2 构建该程序，然后手动运行可执行文件，并且该方法也可以通过创建输出 .txt 文件正常工作。

*编辑 - 忘记附上代码！

```
//func decs
void getScores();
void printScores(int);

int main()
{
getScores();
getchar();
return 0;
}//main

void getScores()
{
FILE* spscoresIn;
FILE* spscoresOut;
spscoresIn = fopen("scores_in.txt", "r");
spscoresOut = fopen("scores_out.txt", "w");
int score;
int count = 0;

while ((fscanf(spscoresIn, "%d", &score)) == 1) //writes only scores higher than 90 to the new file
    if (score > 90)
    {
        fprintf(spscoresOut, "%d\n", score);
        count++;
    }

printScores(count);
return;
}//getScores

void printScores(int count)
{
printf("%d scores were higher than 90:\t", count);
printf("Press Enter to exit");
    return;
}//printScores 
```

# c# - DataGridTextColumn - 最多显示三行文本

> ID：12912162
> 
> 赞同：1
> 
> 时间：2012-10-16T10:03:22.473
> 
> 标签：c#, wpf

我有一个 DataGridTextColumn ElementStyle 如下：

```
 <DataGridTextColumn.ElementStyle>
            <Style TargetType="{x:Type TextBlock}">
                <Style.Setters>
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush>
                                <GradientStop Color="Black" Offset="0" />
                                <GradientStop Color="White" Offset="2" />
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Foreground" Value="White" />
                    <Setter Property="TextWrapping" Value="Wrap" />
                </Style.Setters>
            </Style>
        </DataGridTextColumn.ElementStyle> 
```

我需要此列中的一个单元格以多行显示文本，但行数不应超过 3。`TextBlock`没有`MaxLines`属性，因此我无法直接指定它。更重要的`TextBlock`是没有模板属性，所以我不能少用边框，只读`TextBox`。我可以在这里做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:20:55.440

好吧，我认为实现这一目标的最简单方法是使用 TemplateColumn。这是一个快速示例： Second Column 是 TextColumn ，您不能做太多事情，第一列是 TemplateColumn ，其 TextBox 将是无边界和只读的， MaxLines 设置为 3 ：

```
<DataGrid>
    <DataGrid.Columns>

        <DataGridTemplateColumn Header="Template Column" Width="30" >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox IsReadOnly="True" BorderThickness="0" Text="{Binding Mode=OneWay}" MaxLines="3" TextWrapping="Wrap" Foreground="White">
                        <TextBox.Background>
                            <LinearGradientBrush>
                                <GradientStop Color="Black" Offset="0" />
                                <GradientStop Color="White" Offset="2" />
                            </LinearGradientBrush>
                        </TextBox.Background>
                    </TextBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTextColumn Header="Text Column" Binding="{Binding}" Width="30" >
            <DataGridTextColumn.ElementStyle>
                <Style TargetType="{x:Type TextBlock}">
                    <Style.Setters>
                        <Setter Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush>
                                    <GradientStop Color="Black" Offset="0" />
                                    <GradientStop Color="White" Offset="2" />
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="TextWrapping" Value="Wrap" />
                    </Style.Setters>
                </Style>
            </DataGridTextColumn.ElementStyle>
        </DataGridTextColumn>
    </DataGrid.Columns>

    <sys:String>coucouuuuuuuuuuuuu</sys:String>

</DataGrid> 
```

# c# - 如何获取外部 appSettings 文件名？

> ID：12912164
> 
> 赞同：0
> 
> 时间：2012-10-16T10:03:22.973
> 
> 标签：c#, .net-4.0, web-config, asp.net-4.0

我有 web.config 中的 ASP.NET 服务器应用程序：

```
<appSettings file="config\another.config"> 
```

因此每个开发人员的设置都不同，并分别存储在 svn 中。有没有办法以编程方式获取文件名（我不想为此解析 web.config 原始文本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:02:02.060

这应该可以解决问题：

```
Configuration config = WebConfigurationManager.OpenWebConfiguration("~");
AppSettingsSection appSettingSection = (AppSettingsSection)config.GetSection("appSettings");
String externalFilename = appSettingSection.File; 
```

为此，您需要参考 System.Web.Configuration。

# php - PHP，preg_replace 中的嵌套模板

> ID：12912165
> 
> 赞同：4
> 
> 时间：2012-10-16T10:03:25.667
> 
> 标签：php, regex, preg-replace

```
preg_replace("/\[b\](.*)\[\/b\]/Usi", "<strong>$1</strong>", "Some text here... [b][b]Hello, [b]PHP![/b][/b][/b] ... [b]and here[/b]"); 
```

返回

```
Some text here... <strong>[b]Hello, [b]PHP!</strong>[/b][/b] ... <strong>and here</strong> 
```

但我需要替换所有 [b]...[/b] 标签。为什么在我的情况下不会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:09:56.553

是的，如果元素是嵌套的，则需要多通道方法。这可以通过以下两种方式之一来完成；从内到外或从外到内匹配。以下是两个经过测试的脚本，带有完整注释的正则表达式，它们说明了每种技术：

## 1、由内而外更换：

```
<?php // test.php Rev:20121016_0900
$re = '% # Match innermost [b]...[/b] structure.
    \[b\]              # Literal start tag.
    (                  # $1: Element contents.
      # Use Friedls "Unrolling-the-Loop" technique:
      #   Begin: {normal* (special normal*)*} construct.
      [^[]*            # {normal*} Zero or more non-"[".
      (?:              # Begin {(special normal*)*}.
        \[             # {special} Tag open literal char,
        (?!/?b\])      # but only if NOT [b] or [/b].
        [^[]*          # More {normal*}.
      )*               # Finish {(special normal*)*}.
    )                  # $1: Element contents.
    \[/b\]             # Literal end tag.
    %x';
printf("Replace matching tags from the inside out:\n");
$text = file_get_contents('testdata.txt');
$i=0; // Keep track of iteration number.
printf("i[%d]=%s", $i++, $text);
while(preg_match($re, $text)){
    $text = preg_replace($re, '<strong>$1</strong>', $text);
    printf("i[%d]=%s", $i++, $text);
}
?> 
```

## 输出：

```
'''
Replace matching tags from the inside out:
i[0]=Some text here... [b][b]Hello, [b]PHP![/b][/b][/b] ... [b]and here[/b]
i[1]=Some text here... [b][b]Hello, <strong>PHP!</strong>[/b][/b] ... <strong>and here</strong>
i[2]=Some text here... [b]<strong>Hello, <strong>PHP!</strong></strong>[/b] ... <strong>and here</strong>
i[3]=Some text here... <strong><strong>Hello, <strong>PHP!</strong></strong></strong> ... <strong>and here</strong>
''' 
```

## 2\. 从外向内更换：

```
<?php // test.php Rev:20121016_0901
$re = '% # Match outermost [b]...[/b] structure.
    \[b\]              # Literal start tag.
    (                  # $1: Element contents.
      (?:              # Zero or more contents alternatives.
        [^[]*          # Either non-[b]...[/b] stuff...
        (?:            # Begin {(special normal*)*}.
          \[           # {special} Tag open literal char,
          (?!/?b\])    # but only if NOT [b] or [/b].
          [^[]*        # More {normal*}.
        )*             # Finish {(special normal*)*}.
      | (?R)           # Or a nested [b]...[/b] structure.
      )*               # Zero or more contents alternatives.
    )                  # $1: Element contents.
    \[/b\]             # Literal end tag.
    %x';
printf("Replace matching tags from the outside in:\n");
$text = file_get_contents('testdata.txt');
$i=0; // Keep track of iteration number.
printf("i[%d]=%s", $i++, $text);
while(preg_match($re, $text)){
    $text = preg_replace($re, '<strong>$1</strong>', $text);
    printf("i[%d]=%s", $i++, $text);
}
?> 
```

## 输出：

```
'''
Replace matching tags from the outside in:
i[0]=Some text here... [b][b]Hello, [b]PHP![/b][/b][/b] ... [b]and here[/b]
i[1]=Some text here... <strong>[b]Hello, [b]PHP![/b][/b]</strong> ... <strong>and here</strong>
i[2]=Some text here... <strong><strong>Hello, [b]PHP![/b]</strong></strong> ... <strong>and here</strong>
i[3]=Some text here... <strong><strong>Hello, <strong>PHP!</strong></strong></strong> ... <strong>and here</strong>
''' 
```

注意`(?R)`第二种方法中使用的递归表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:40:10.190

它不起作用的原因：你抓住了第一个 [b]，然后移动到下一个 [/b]，并保持两者之间的任何内容不变。即，您更改了外部 [b] 标记，但不更改嵌套在内部的标记。

您对@meza 的评论建议您要成对替换伪标签，或者保持它们不变。最好的方法是使用多次传递，像这样

```
$markup = "Some text here... [b][b]Hello, [b]PHP![/b][/b][/b] ... [b]and here[/b]";
$count = 0;
do {
    $markup = preg_replace("/\[b\](.*?)\[\/b\]/usi", "<strong>$1</strong>", $markup, -1, $count );
} while ( $count > 0 );

print $markup; 
```

我什至不确定您是否可以在单行正则表达式中做到这一点，但即使可以，它也会相当复杂，因此难以维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:13:47.830

为什么在这种特殊情况下使用正则表达式？你可以用一个简单的字符串将每个 [b] 替换为 strong 并将每个 [/b] 替换为 /strong。

# jquery - 每个里面的jquery tmpl

> ID：12912171
> 
> 赞同：3
> 
> 时间：2012-10-16T10:03:36.883
> 
> 标签：jquery, jquery-templates

我有一组通过 {{each}} 语句迭代的模板。代码就像

```
 <script id="inTmpl" type="text/x-jquery-tmpl">
         ${sub.title}
    </script>
    <script id="outTmpl" type="text/x-jquery-tmpl">
         <div>
         {{each(i, sub) parent}}
              ${sub.title}
              {{tmpl "#inTmpl"}}
         {{/each}}
         </div>
    </script>
    <script type="text/javascript">
          $(function() {
               $("#outTmpl").tmpl({
                    "parent": [
                        {"title": "a"},
                        {"title": "b"}
                    ]
               }).appendTo("body");
          });
    </script> 
```

然后我收到错误：“未捕获的 ReferenceError：未定义子”。为什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T14:58:16.937

您需要将新模板传递给我相信的子对象。

所以渲染第二个模板的行应该是这样的

```
 {{tmpl(sub) "#inTmpl"}} 
```

这是我得到信息的地方。我自己还没有尝试过。

[http://skilldrick.co.uk/tmpl/#slide14](http://skilldrick.co.uk/tmpl/#slide14)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T20:23:25.760

您可以在此处找到存档文档：http://web.archive.org/web/20120921050105/http: [//api.jquery.com/template-tag-tmpl/](http://web.archive.org/web/20120921050105/http://api.jquery.com/template-tag-tmpl/)

这是一个工作版本：

```
<script id="inTmpl" type="text/x-jquery-tmpl">
  ${title}
</script>

<script id="outTmpl" type="text/x-jquery-tmpl">
  <div>
    {{each(i, sub) parent}}
      ${sub.title}
      {{tmpl(sub) "#inTmpl"}}
    {{/each}}
  </div>
</script>

<script type="text/javascript">
$(function() {
  $("#outTmpl").tmpl({
    "parent": [
      {"title": "a"},
      {"title": "b"}
    ]
  }).appendTo("body");
});
</script> 
```

# mysql - django 加载固定装置在 unicode 数据上失败

> ID：12912177
> 
> 赞同：5
> 
> 时间：2012-10-16T10:03:49.760
> 
> 标签：mysql, django, unicode, django-fixtures

我通过转储数据保存了一堆夹具，这里是一个例子：

```
[
  {
    "pk": 1,
    "model": "core.question",
    "fields": {
      "text": "\u041a\u0430\u043a\u0438\u0445 \u0436\u0438\u0432\u043e\u0442\u043d\u044b\u0445 \u0432\u044b \u0434\u0435\u0440\u0436\u0438\u0442\u0435 \u0434\u043e\u043c\u0430",
      "is_free_text": false
    }
  },
  {
    "pk": 2,
    "model": "core.question",
    "fields": {
      "text": "\u0415\u0434\u0438\u0442\u0435 \u043b\u0438 \u0432\u044b \u043c\u044f\u0441\u043e?",
      "is_free_text": false
    }
  },
  {
    "pk": 3,
    "model": "core.question",
    "fields": {
      "text": "\u041a\u0430\u043a\u043e\u0439 \u0435\u043d\u043e\u0442 \u0436\u0438\u0432\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0434\u043e\u043c\u0430",
      "is_free_text": false
    }
  }
] 
```

当我做

> manage.py 加载数据 core_question.json

，出现以下错误：

> 警告：不正确的字符串值：第 1 行的列 'first_name' 的 '\xD0\x94\xD0\xB8\xD0\xB0...'

我虽然它可能是数据库的东西，但它似乎都是 unicode：

```
character_set_client,utf8
character_set_connection,utf8
character_set_database,utf8
character_set_filesystem,binary
character_set_results,utf8
character_set_server,utf8
character_set_system,utf8
character_sets_dir,/usr/share/mysql/charsets/ 
```

以及架构排序规则：

> CATALOG_NAME,SCHEMA_NAME,DEFAULT_CHARACTER_SET_NAME,DEFAULT_COLLATION_NAME,SQL_PATH NULL,reviewer,utf8,utf8_general_ci,NULL

还有什么我想念的吗？

# windows - 有没有办法获得对以独占访问权限打开的文件的读取访问权限，即 FILE_SHARE_NONE

> ID：12912178
> 
> 赞同：2
> 
> 时间：2012-10-16T10:03:50.210
> 
> 标签：windows

如果不采取肮脏和讨厌的方式，我相信这在用户模式下是不允许的，即使使用 SE_BACKUP_NAME。

我认为肮脏和讨厌的事情：

1.  找出哪个进程拥有句柄并编写代码以在该进程中运行并关闭句柄。
2.  读取/解析 MFT/FAT 表
3.  使用内核驱动程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:25:38.000

是的，有一种方法，尽管它可能不适合您的需求；它不脏也不讨厌，但它很重，也就是说，它的代码并不简单，如果你只是想读取一个文件，它会产生不成比例的系统负载。

但是，如果您需要这样做，这是我所知道的唯一合理且安全的解决方案：请参阅 MSDN 文档 on the [Volume Shadow Copy Service](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968832%28v=vs.85%29.aspx)。

现在大多数备份软件都使用 VSS。

# android - 最简单的是/否对话框片段

> ID：12912181
> 
> 赞同：40
> 
> 时间：2012-10-16T10:04:16.337
> 
> 标签：android, dialog, android-fragments, android-alertdialog

我想做一个`dialog fragment`问“你确定吗？” 回复“是/否”。

我查看[了文档](http://developer.android.com/guide/topics/ui/dialogs.html#ShowingADialog)，它真的很冗长，到处都是，解释了如何制作高级对话框，但没有完整的代码来制作一个简单的“hello world”类型的对话框。大多数教程使用已弃用的对话框系统。[官方博客](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)似乎是不必要的复杂和难以理解。

那么，创建和显示一个非常基本的警报对话框的最简单方法是什么？如果它使用支持库，则可以加分。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-16T10:24:17.953

DialogFragment 实际上只是一个包装对话框的片段。通过在 DialogFragment 的 onCreateDialog() 方法中创建和返回对话框，您可以将任何类型的对话框放入其中。

下面是一个示例 DialogFragment：

```
class MyDialogFragment extends DialogFragment{
    Context mContext;
    public MyDialogFragment() {
        mContext = getActivity();
    }
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(mContext);
        alertDialogBuilder.setTitle("Really?");
        alertDialogBuilder.setMessage("Are you sure?");
        //null should be your on click listener
        alertDialogBuilder.setPositiveButton("OK", null);
        alertDialogBuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });

        return alertDialogBuilder.create();
    }
} 
```

要创建对话调用：

```
new MyDialogFragment().show(getFragmentManager(), "MyDialog"); 
```

并从某处关闭对话框：

```
((MyDialogFragment)getFragmentManager().findFragmentByTag("MyDialog")).getDialog().dismiss(); 
```

所有这些代码都将与支持库完美配合，只需更改导入以使用支持库类。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T10:14:39.670

> 那么，创建和显示一个非常基本的警报对话框的最简单方法是什么？如果它使用支持库，则可以加分。

只需创建一个`DialogFragment`（SDK 或支持库）并覆盖其`onCreateDialog`方法以返回一个`AlertDialog`并在其上设置所需的文本和按钮：

```
public static class SimpleDialog extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
                .setMessage("Are you sure?")
                .setPositiveButton("Ok", null)
                .setNegativeButton("No way", null)
                .create();
    }

} 
```

要在用户使用其中一个按钮时执行某些操作，您必须提供 a 的实例`DialogInterface.OnClickListener`而不是`null`我的代码中的引用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-26T00:04:17.443

对于那些使用 Kotlin 和[Anko](https://blog.jetbrains.com/kotlin/2015/05/advanced-features-of-anko/)编码的人，您现在可以用 4 行代码进行对话：

```
alert("Order", "Do you want to order this item?") {
    positiveButton("Yes") { processAnOrder() }
    negativeButton("No") { }
}.show() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-25T16:32:52.277

**因为 Activity / Fragment 生命周期** **@athor & @lugsprog 方法可能会失败，** 更优雅的方法是**从方法 onAttach 获取活动上下文并将其存储为弱引用**（&尽量避免 DialogFragment 中的非默认构造函数！，传递任何对话框使用参数的参数），如下所示：

```
public class NotReadyDialogFragment extends DialogFragment {

    public static String DIALOG_ARGUMENTS = "not_ready_dialog_fragment_arguments";

    private WeakReference<Context> _contextRef;

    public NotReadyDialogFragment() {
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        /** example pulling of arguments */
        Bundle bundle = getArguments();
        if (bundle!=null) {
            bundle.get(DIALOG_ARGUMENTS);
        }

        //
        // Caution !!!
        // check we can use contex - by call to isAttached 
        // or by checking stored weak reference value itself is not null 
        // or stored in context -> example allowCreateDialog() 
        // - then for example you could throw illegal state exception or return null 
        //
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(_contextRef.get());
        alertDialogBuilder.setMessage("...");
        alertDialogBuilder.setNegativeButton("Przerwij", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        return alertDialogBuilder.create();
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        _contextRef = new WeakReference<Context>(activity);
    }

     boolean allowCreateDialog() {
         return _contextRef !== null 
                && _contextRef.get() != null;
     } 
```

**编辑：** &如果你想关闭对话框，那么：

1.  试着得到它
2.  检查它是否存在
3.  检查它是否显示
4.  解雇

像这样的东西：

```
 NotReadyDialogFragment dialog = ((NotReadyDialogFragment) getActivity().getFragmentManager().findFragmentByTag("MyDialogTag"));
    if (dialog != null) {
        Dialog df = dialog.getDialog();
        if (df != null && df.isShowing()) {
            df.dismiss();
        }
    } 
```

**EDIT2：**如果您想将对话框设置为不可取消，您应该像这样更改 onCreatweDialog 返回语句：

```
 /** convert builder to dialog */
    AlertDialog alert = alertDialogBuilder.create();
    /** disable cancel outside touch */
    alert.setCanceledOnTouchOutside(false);
    /** disable cancel on press back button */
    setCancelable(false);

    return alert; 
```

# mysql - 计算一行中重复的列值

> ID：12912183
> 
> 赞同：0
> 
> 时间：2012-10-16T10:04:18.180
> 
> 标签：mysql, sql, infinidb

我有一个非规范化表，我必须计算其他列中相同值的数量。我正在使用 InfiniDB Mysql 存储引擎。

这是我的表：

```
col1 | col2 | col3
------------------
A    | B    | B
A    | B    | C
A    | A    | A 
```

这就是我所期望的：

```
col1Values | col2Values | col3Values
------------------------------------
    1      |     2      |      2     -- Because B is in Col2 and Col3
    1      |     1      |      1     
    3      |     3      |      3 
```

有没有类似的东西

```
-- function count_values(needle, haystack1, ...haystackN)
select count_values(col1, col1, col2, col3) as col1values -- col1 is needle
    , count_values(col2, col1, col2, col3) as col2values -- col2 is needle
    , count_values(col3, col1, col2, col3) as col3values -- col3 is needle
from table 
```

还是我错过了一些可以解决问题的简单方法？:-)

提前致谢

罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:27:51.743

```
 select 
        CASE WHEN col1 = col2 and col1=col3 THEN '3' 
             WHEN col1 = col2 or col1=col3 THEN '2' 
             WHEN col1 != col2 and col1!=col3 THEN '1' 
        ELSE '0' END AS col1_values, 

        CASE WHEN col2 = col1 and col2=col3 THEN '3' 
             WHEN col2 = col1 or col2=col3 THEN '2' 
             WHEN col2 != col1 and col2!=col3 THEN '1' 
        ELSE '0' END AS col2_values,

       CASE WHEN col3 = col1 and col3=col2 THEN '3' 
            WHEN col3 = col1 or col3=col2 THEN '2' 
            WHEN col3 != col1 and col3!=col2 THEN '1' 
       ELSE '0' END AS col3_values

FROM table_name 
```

[小提琴演示](http://sqlfiddle.com/#!2/ddaa05/20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:16:01.650

假设表有一个键，你可以：

1.  取消透视表。

2.  将未透视的数据集连接回原始数据集。

3.  对于原始列中的每一列，计数与未透视列的匹配项。

以下是上述实现的方法：

```
SELECT
  COUNT(t.col1 = s.col OR NULL) AS col1Values,
  COUNT(t.col2 = s.col OR NULL) AS col2Values,
  COUNT(t.col3 = s.col OR NULL) AS col3Values
FROM atable t
  INNER JOIN (
    SELECT
      t.id,
      CASE colind
        WHEN 1 THEN t.col1
        WHEN 2 THEN t.col2
        WHEN 3 THEN t.col3
      END AS col
    FROM atable t
    CROSS JOIN (SELECT 1 AS colind UNION ALL SELECT 2 UNION ALL SELECT 3) x
  ) s ON t.id = s.id
GROUP BY t.id
; 
```

子查询使用交叉连接来取消透视表。该`id`列是关键列。[此答案](https://stackoverflow.com/questions/5011239/why-do-i-need-or-null-in-mysql-when-counting-rows-with-a-condition/5011311#5011311 "Why do I need “OR NULL” in MySQL when counting rows with a condition")`OR NULL`中解释了该位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:31:12.463

我找到了一个不同的，非常简单的解决方案:-)

```
select if(col1=col1,1,0) + if(col2=col1,1,0) + if(col3=col1,1,0) as col1values -- col1 is needle
from table 
```

# javascript - facebook登录页面噩梦

> ID：12912184
> 
> 赞同：1
> 
> 时间：2012-10-16T10:04:20.617
> 
> 标签：javascript, facebook, html, asp-classic

嗨，伙计们，这是一个很大的问题和一个远大的目标，但是这里有，

我有一个经典的 ASP 网站，我想将注册过程集成到 facebook，但我不知道如何做到这一点。我已经搜索了几天并找到了各种信息，但我似乎仍然无法理解应该相当简单的过程。

我已经设法使用 facebook 部分进行注册，这会将 facebook 用户 ID 和 access_token 写入 SQL 数据库，但我不知道如何更改我的登录页面，以便我的网站知道用户已成功通过身份验证。

这是目前验证我的用户的代码。

```
<% 
Const adCmdText = 1   
'On Error Resume Next
SQSecureDSN="Provider=SQLNCLI10;Server=;Database=; Trusted_Connection=yes;"
Redirpath=""
Set SQLog = Server.CreateObject("ADODB.Connection")
SQLog.open SQSecureDSN

tmpUsername=replace(Request.Form("username"),"'","")
tmpUsername=replace(tmpusername,"""","")
tmpPW=replace(Request.Form("password"),"'","")
tmpPW=replace(tmpPW,"""","")

if tmpPW & "X" <> "X" Then
    strSQL = "SELECT * FROM users WHERE username=? AND password=? AND enabled ='TRUE';"
    Dim cmd1
    Set cmd1 = Server.CreateObject("ADODB.Command")    
    cmd1.ActiveConnection = SQLog
    cmd1.CommandText = strSQL
    cmd1.CommandType = adCmdText
    cmd1.Parameters(0) = tmpusername
    cmd1.Parameters(1) = tmpPW
    Set rstLogin = cmd1.Execute()
    If  rstLogin.EOF Then
      ResponseMessage="<tr><td colspan=2><b><h1 style=color:red;>Login failed!</h1><br>     <p>Have you activated your account?.. If not please <a href='submitreg.asp'>Click Here</a>    </p></td></tr><tr><td><br></td></tr><tr><td colspan=2><p>If you have forgotten your password please <a href='mailto:xxxxx.com'>Click Here</a></p></td></tr><tr><td><br></td></tr>"
    else
      lognSQL= "SELECT [ID], client, admin ,username FROM users where username='" &     tmpusername & "' AND password='" & tmpPW & "' AND enabled ='TRUE';"
      Set logn = SQLog.execute(lognSQL)
      if not logn.eof then 
        lookupun = logn("username")
        lookupid = logn("ID")
        lookupad = logn("admin")
        lookupcl = logn("client")
      end if
      Session("usern") = tmpUsername
      Session("AuthID") = lookupid
      Session("admin") = lookupad
      Session("clientID") = lookupcl
      LogSQL= "UPDATE TSession SET clientID='" & lookupcl &"', userid='" & lookupid & "' where [Key]='" & Request("SessKey") & "';" 
      SQLog.execute(LogSQL)
      RedirPath=request("redirect")
    end if
    SQLog.Close()
    set SQLog = nothing
    set SQConn = nothing
    If Redirpath<>"" Then response.Redirect(Redirpath)
end if
%>
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=UTF-8">
<meta name="viewport" content="user-scalable=no, width=device-width" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta charset="utf-8">
 <link rel="stylesheet" type="text/css" 
      href="css/iphone.css" media="only screen and (max-width: 480px)" />
 <link rel="stylesheet" type="text/css" 
      href="css/page.css" media="screen and (min-width: 481px)" />
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
<script>
setTimeout(function () {
  window.scrollTo(0, 1);
}, 1000);
</script>
<title>xxxxxxxx.com</title>
</head>
<body id='header'>
<%
Function Is_Mobile()
  Set Regex = New RegExp
  With Regex
    .Pattern = "(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|windows ce|pda|mobile|mini|palm)"
    .IgnoreCase = True
    .Global = True
  End With
  Match = Regex.test(Request.ServerVariables("HTTP_USER_AGENT"))
  If Match then
    Is_Mobile = True
  Else
    Is_Mobile = False
  End If
Dim user_agent
user_agent = Request.ServerVariables("HTTP_USER_AGENT")

    If InStr(1, user_agent, "ipad", 1) Then
        Is_ipad = true
    Is_Mobile = False
    Else
    Is_ipad = False
    End If
 End Function

If Is_Mobile= True Then
%>
<img align="center" class="mainlogo" id="mainlogo" src="logo_banner.jpg"/>
<%
Else
%>
<!--#include file="css/twitter.html"-->
<!--#include file="css/facebook.html"-->
<!--#include file="css/tophead.html"-->
<%
End If%>
<%
if Session("clientID") = "" then
%>
    <!--#include file="css/navibar.html"-->
    <%
Else
%>
    <!--#include file="css/clientnavibar.html"-->
    <%
End if
%>
      <p> <%=LeftPane%></p>
      <p>&nbsp;</p>
    </aside>
  <!-- end .sidebar1 --></div>
   <article class="content" id="content">
    <section>
      <br><p><h1>Please sign in or register to continue...</h1></p><br>
      <p><form action="authenticate.asp" method=post>
<table border=0 align="center">
<%=ResponseMessage%>
<tr><td><b>
Username: </b></td><td><input name="username" size=16 width=20>
</td></tr><tr><td><b>
Password: </b></td><td><input type="password" name="Password" size=16 width=20>
</td></tr><tr><td></td><td>
<input type="hidden" name="redirect" value="<%=request("redirect")%>">
<input type="hidden" name="SessKey" value="<%=request("SessKey")%>">
<INPUT TYPE="submit" class="buttons" value="Login">
</td></tr></table>
<br>
<p><a href="register.asp">Not registered?.. Click Here</a></p>
<br><br>
    </section>
  <!-- end .content --></article>
  <aside>
    <p><strong></strong></p>
  </aside>
  <!--#include file="css/footer.html"-->
  <!-- end .container --></div>
</body>
</html> 
```

我已经在 facebook 上注册了一个应用程序，并且这一切都正确配置。

# iphone - 如何在 Xcode 4.5 中使用 .a 的内置较低版本

> ID：12912189
> 
> 赞同：1
> 
> 时间：2012-10-16T10:04:41.433
> 
> 标签：iphone, ios, xcode, .a

我可以在 Xcode 4.5 中使用用 Xcode 4.3.3 构建的 .a 吗？当我用模拟器构建时，它构建得很好，当我为设备构建时，它显示了许多参考错误。我怀疑的是我使用的 .a 是旧的。我对吗。有什么办法可以解决这个问题，而不是用 Xcode 4.5 构建所有 .a。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:55:48.550

我认为这是使用构建支持 armv6 的库的问题，该库已在 Xcode 4.5 中删除

最好的长期解决方案是要求创建这些库的开发人员重新构建以支持最新的 Xcode，但同时您可以尝试按照[这些说明进行操作](http://blog.chpwn.com/post/31824877081)

# oracle - 创建索引而不指定表空间

> ID：12912192
> 
> 赞同：1
> 
> 时间：2012-10-16T10:04:47.240
> 
> 标签：oracle, indexing, oracle11g, tablespace

我想问一个问题。如果我在创建过程中没有指定表空间就创建了索引会发生什么。例如 ：

```
CREATE INDEX indx_cd on distributors(dist_cd) 
```

索引是在哪个表空间中创建的？即使我这样说，索引是否仍然可以正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:21:04.723

索引将在模式的默认表空间中创建。

作为系统用户，您可以确定是什么表空间：

```
select username,default_tablespace from dba_users 
```

# asp.net - 从区域文件夹中的用户控制视图调用 AJAX 中的控制器方法

> ID：12912193
> 
> 赞同：1
> 
> 时间：2012-10-16T10:04:55.467
> 
> 标签：asp.net, asp.net-mvc, jquery, asp.net-mvc-2, asp.net-ajax

我有一个 asp.net 项目，其中包含 asp.net mvc 2 代码的 Area 文件夹。当我创建该区域时，它创建了一个“视图”和一个“控制器”文件夹。

我的视图是局部视图，所以是 .ascx。从这个角度来看，我想在 Ajax 中调用一个控制器方法。

这是我的观点代码：

```
<script type="text/javascript">
  $("#<%=btnSearch.ClientID %>").click(function() {
    var text = $("#<%=tbSearchBox.ClientID %>").val;
    $.ajax({
        type: "GET",
        url: '/Areas/Settings/User/SearchUser',
        success: function(msg) {
            alert("toto");
        }
    });
  });
</script> 
```

Areas 是区域的文件夹名称，Settings 是包含 Controller 和 View 文件夹的文件夹名称，User 是文件夹 Controller (UserController) 的控制器，SearchUser 是我要调用的方法。

此刻，这个方法只有：

```
/// <summary>
/// Évènement déclenché lors de la recherche d'un utilisateur.
/// </summary>
/// <param name="text">Le texte à chercher.</param>
/// <returns>OK</returns>
public string SearchUser(string text)
{
    return "OK";
} 
```

我上铬：

```
GET http://localhost/Areas/Settings/User/SearchUser 404 (Not Found) 
```

我能怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:33:43.410

您可以尝试通过 Url.Action(..) 方法替换硬编码的 url：

```
..
url: '<%= Url.Action(..) %>',
.. 
```

# sql - 我们如何使用具有不同分区功能的相同分区模式？

> ID：12912196
> 
> 赞同：1
> 
> 时间：2012-10-16T10:05:07.293
> 
> 标签：sql, partitioning

我正在学习表分区。当我读到[这个页面](http://msdn.microsoft.com/en-us/library/ms191174.aspx)时，它说

> 该`TransactionHistoryArchive`表必须具有与该表**相同的设计模式**`TransactionHistory`。还必须有一个空分区才能接收新数据。在这种情况下，`TransactionHistoryArchive`是一个仅由两个分区组成的分区表。

通过下图，我们可以看到`TransactionHistory`有 12 个分区，但`TransactionHistoryArchive`只有 2 个分区。

[插图 http://i.msdn.microsoft.com/dynimg/IC38652.gif](http://i.msdn.microsoft.com/dynimg/IC38652.gif)

怎么可能？请帮助我理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:28:25.690

只要两个单独的分区具有相同的架构和相同的边界值，您就可以切换它们。它们不需要具有相同的分区方案或功能。

这是因为 SQL Server 确保磁盘上这些分区的二进制数据是兼容的。这就是分区的魔力，也是您可以将任意数量的数据作为仅元数据的快速操作来移动的原因。

# kobold2d - 如何在 Kobold2D 中选择性地吞下触摸？

> ID：12912207
> 
> 赞同：0
> 
> 时间：2012-10-16T10:05:37.830
> 
> 标签：kobold2d

在我的顶层中，我有一个“后退按钮”精灵，它应该接收触摸。通常所有其他触摸都应该传递到较低层，但如果这个后退按钮接收到轻击手势，那么它应该吞下触摸。

目前，对“后退”按钮的任何触摸也会作为对下方图层的触摸而被接收。

**顶层：**

```
-(id) init {
    if ((self = [super init])) {
        [self scheduleUpdate];
        // Initialize KKInput
        KKInput* input = [KKInput sharedInput];
        input.gestureTapEnabled = input.gesturesAvailable;
        ...
    }
    return self;
}

...

-(void) update:(ccTime)delta
{
    KKInput* input = [KKInput sharedInput];
    if (input.gestureTapRecognizedThisFrame) {
        CCLOG(@"Top layer tap recognized");
        if ([self.backButton containsPoint:input.gestureTapLocation]) {
            CCLOG(@"Top layer Back Button tap recognized");
        }
    }
} 
```

**下层**

```
-(id) init {
    if ((self = [super init])) {
        [self scheduleUpdate];
        // Initialize KKInput
        KKInput* input = [KKInput sharedInput];
        input.gestureTapEnabled = input.gesturesAvailable;
        ...
    }
    return self;
}

...

-(void) update:(ccTime)delta
{
    KKInput* input = [KKInput sharedInput];
    if (input.gestureTapRecognizedThisFrame) {
        CCLOG(@"Lower layer tap recognized");
    }
} 
```

如果我点击后退按钮以外的其他地方，输出就是我想要的：

```
2012-10-16 10:58:03.747 MyApp[13838:707] Top layer tap recognized
2012-10-16 10:58:03.749 MyApp[13838:707] Lower layer tap recognized 
```

但是如果我点击后退按钮，点击不会被按钮吞下：

```
2012-10-16 10:49:23.426 MyApp[13838:707] Top layer tap recognized
2012-10-16 10:49:23.429 MyApp[13838:707] Top layer Back Button tap recognized
2012-10-16 10:49:23.434 MyApp[13838:707] Lower layer tap recognized 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:45:31.717

要清除手势状态，您可以将其关闭并重新打开。如果您在处理第一个轻按手势的位置添加它，这应该可以解决问题：

```
input.gestureTapEnabled = NO;
input.gestureTapEnabled = YES; 
```

# javascript - 基于 JavaScript 的跨平台移动应用程序分析

> ID：12912208
> 
> 赞同：2
> 
> 时间：2012-10-16T10:05:38.493
> 
> 标签：javascript, cordova, google-analytics, analytics, flurry

> **可能重复：**
> [如何在没有插件的情况下将 Google Analytics 与 Phonegap 一起使用？](https://stackoverflow.com/questions/11026916/how-to-use-google-analytics-with-phonegap-without-a-plugin)

我想使用**Phonegap 之**类的东西来为 Android、iOS 和 Blackberry 编写应用程序，并生成免费的分析数据，例如会话长度和按下按钮的频率。如果可能的话，我希望能够在 JavaScript 中完成所有这些操作，但我找不到任何允许这样做的分析提供程序。

我能看到的唯一选择是使用支持所有这些操作系统的 Flurry。这将需要每个平台的一些本机代码以及从 JavaScript 调用此代码的方法。如果可能的话，我宁愿避免编写本机代码。

我尝试使用 Google Analytics 的网络版本（例如，将 JavaScript 片段添加到我的应用程序代码中），但这会产生日志记录错误

`http://www.google-analytics.com/u/ga_debug.js: Line 18 : Local file. Aborting hit.`

我认为这意味着 Google Analytics 仅适用于实际网页。黑莓也无法使用 Google Analytics for apps。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:28:25.697

您可以将您的应用程序与 Flurry HTML 5 SDK 集成。通过这种方式，您可以使用 JavaScript 编写 HTML 5 应用程序。完成后，您可以将其移植到本机平台。请注意，Flurry HTML 5 SDK 目前处于测试阶段，一旦您在 Flurry 上注册即可启用。（全面披露：我在 Flurry 的支持团队工作）

# jquery - 将 jQuery 加载的数据传递给 Google Charts API

> ID：12912209
> 
> 赞同：0
> 
> 时间：2012-10-16T10:05:42.627
> 
> 标签：jquery, google-visualization

我使用以下脚本从表单加载数据。

```
$(document).ready(function() {
    $('#submit').click(function(e) {
        e.preventDefault();

        var str = $("form").serialize();

        $.ajax({
            type : 'GET',
            url : 'json.php',
            dataType : 'html',
            data: str,
            success: function(data) {
                var data1 = data
                $('#chart_div').text(data1) 
            }
        });

        return false;
    });
}); 
```

该`json.php`文件以谷歌图表所需的 json 格式打印数据，即：

```
{cols: [{id: '0', label: 'time', type: 'string'},{id: '0', label: 'Albania', type: 'number'}],rows:[{c:[{v: '1971'},{v: 2188650},]},{v: 3204284},]}]} 
```

此脚本将数据打印到表单页面上的 chart_div。但是如何将返回的数据传递给谷歌图表，如下所示：

```
var data = new google.visualization.DataTable(data); 
```

我试图将整个谷歌图表脚本放在成功函数中，但这只会使页面永远加载而不会产生任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:11:50.983

因为您必须设置`dataType`as`json`才能将数据返回为 json 格式

```
$.ajax({
    type : 'GET',
    url : 'json.php',
    dataType : 'json',
    data: str,
    success: function(data){
    // data return the data in json format
    }
}); 
```

[从链接ajax](http://stage.api.jquery.com/jQuery.ajax/)检查以下内容

# java - JSVC 作为守护程序启动 - 启用 JMX？

> ID：12912211
> 
> 赞同：0
> 
> 时间：2012-10-16T10:05:49.280
> 
> 标签：java, jmx, jsvc

我正在使用 JSVC 将我的 java 程序作为一个应该 24/7 运行的守护进程来启动。

但是，我曾经启用 JMX 来监视我的应用程序，直到我决定将其转换为守护程序。

我的 init.d 脚本是这样的

```
#!/bin/sh

# Setup variables
EXEC=/usr/bin/jsvc
JAVA_HOME=/usr/lib/jvm/java-6-openjdk
CLASS_PATH="/usr/share/java/commons-daemon.jar":"/fullpath/Myserver.jar"
CLASS=myserver.Main
USER=myserver
PID=/var/run/myserver.pid
LOG_OUT=/var/log/myserver/client.out
LOG_ERR=/var/log/myserver/client.err

do_exec()
{
    $EXEC -home "$JAVA_HOME"  -cp $CLASS_PATH -user $USER -outfile $LOG_OUT -errfile $LOG_ERR -pidfile $PID $1 $CLASS -Xmx30M -Djava.rmi.server.hostname=123.234.12.34 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.password.file=/fullpath/jmxremote.password -Dcom.sun.management.jmxremote.access.file=/fullpath/jmxremote.access -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1234
}

case "$1" in
    start)
        do_exec
            ;;
    stop)
        do_exec "-stop"
            ;;
    restart)
        if [ -f "$PID" ]; then
            do_exec "-stop"
            do_exec
        else
            echo "service not running, will do nothing"
            exit 1
        fi
            ;;
    *)
            echo "usage: daemon {start|stop|restart}" >&2
            exit 3
            ;;
esac 
```

-D 选项似乎没有生效，因为 JMX 不使用端口 1234（或我指定的任何其他端口）。

应用程序运行得很好，但 JMX 不行。我不知道从哪里开始搜索，你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:16:46.473

我需要更换：

```
$EXEC -home "$JAVA_HOME"  -cp $CLASS_PATH -user $USER -outfile $LOG_OUT -errfile $LOG_ERR -pidfile $PID $1 $CLASS -Xmx30M -Djava.rmi.server.hostname=123.234.12.34 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.password.file=/fullpath/jmxremote.password -Dcom.sun.management.jmxremote.access.file=/fullpath/jmxremote.access -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1234 
```

和：

```
$EXEC -home "$JAVA_HOME"  -cp $CLASS_PATH -user $USER -outfile $LOG_OUT -errfile $LOG_ERR -pidfile $PID -Xmx30M -Djava.rmi.server.hostname=123.234.12.34 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.password.file=/fullpath/jmxremote.password -Dcom.sun.management.jmxremote.access.file=/fullpath/jmxremote.access -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1234 $1 $CLASS 
```

所以，不要把额外的论点放在后面`$CLASS`

# xml - Pygtk - 如何从 Treeview 获取数据？

> ID：12912216
> 
> 赞同：1
> 
> 时间：2012-10-16T10:05:53.263
> 
> 标签：xml, pygtk, gtktreeview

获取Treeview数据的方法是什么？

我有一些行，我想将数据保存在 XML 文件中，但我不知道如何保存行数据以传递给 XML 函数创建者。

非常感谢！

* * *

感谢您的回复！这里有一些代码：

```
def create_xml(self, path, model):
    from lxml import etree
    print len(model) #that's work
        self.model = self.treeview.get_model()

    if(len(model) > 0):
        root = etree.Element("lista_tareas")
        iter = self.model.get_iter_first()

        contatore = 1
        while iter:
            #from here doesn't work, 
            # 'gtk.ListStore' object has no attribute 'COL_DESCRIZIONE'
            descrizione_c = self.model.get_value(iter, self.model.COL_DESCRIZIONE) 
            data_limite_c = model.get_value(iter, COL_DATA_LIMITE)
            priorita_c =  model.get_value(iter, COL_PRIORITA)
            realizzato_c = model.get_value(iter, COL_REALIZZATO)
            root.append(etree.Element("tarea", _id = contatore, realizzato = realizzato_c, data_limite = data_limite_c, priorita = priorita_c))
            root.appendSubElement(tarea, "description")
            tarea.text = descrizione_c

            iter = model.iter_next(iter)
        outFile = open('homemade.xml', 'w')
        doc.write(outFile) 
```

这是调用函数的按钮：

```
self.save_button.connect("clicked", self.create_xml, self.model_add) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:21:07.093

A）您可以轻松访问保存`treeview`with数据的模型，`treeview.get_model()`并且可以轻松迭代返回的对象。由于您不提供任何代码，因此很难说出您究竟需要如何做。在任何情况下。stackoverflow 上应该有*很多*关于如何使用树视图和树模型的示例。

B）然后你需要制作一个 xml 结构并将其保存起来，供你使用`etree`（其中包括，但我发现它很容易使用）[http://docs.python.org/library/xml.etree.elementtree。 html#](http://docs.python.org/library/xml.etree.elementtree.html#)

# ios - ios OpenGL ES / GLKit - UIView 作为超级视图和 GLKView 作为子视图

> ID：12912228
> 
> 赞同：1
> 
> 时间：2012-10-16T10:06:38.380
> 
> 标签：ios, opengl-es, opengl-es-2.0

您好 OpenGL ES 专家，

你有没有在 UIView 上添加过 GLKView？

我在这里尝试的是使用来自 ios 6 的标准 OpenGl ES 模板。我正在使用 GLKViewController，因为一切都已设置好。然后我试图将 GLKViewController.view 作为子视图添加到另一个 UIViewController 中的视图中 - 但问题是在 GLKViewController 上没有调用 update()，因此没有动画。第一帧虽然被渲染。

你对如何做到这一点有任何想法 - 或者我需要在同一个 GLKViewController 中设置 UIView 和 GLKView 吗？

提前致谢。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    UIViewController* topViewController = [[TopViewController alloc] init];

    UIImageView* uiImageView = [[UIImageView alloc] initWithFrame:self.window.frame];
    NSString *imgFrontFilepath = [[NSBundle mainBundle] pathForResource:@"front" ofType:@"png"];
    UIImage* frontImg = [[UIImage alloc] initWithContentsOfFile:imgFrontFilepath];
    [uiImageView setImage:frontImg];
    [topViewController setView:uiImageView];

    GLKViewController* glkViewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    // glkViewController.paused = NO;

    [[topViewController view] addSubview:[glkViewController view]];

    self.viewController = topViewController; //[[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = topViewController; //self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:45:34.797

如果根视图不是 GLKView，我认为您不应该使用 GLKViewController。您可能想丢弃 GLKViewController 并只使用 GLKView ——您不想为了这样的事情而嵌套 viewControllers。因此，您只需将 TopViewController 作为常规 UIViewController 子类，在 TopViewController 的设置代码中的某处，您将初始化所有 OpenGL 内容并添加 GLKView 作为 topViewController.view 的子视图。

此外，您**绝对**不想在 application:didFinishLauncingWithOptions 中做所有这些事情！看起来它应该在 TopViewController 的 viewDidLoad 方法中。您真的希望尽可能地远离 App Delegate，并且之间的所有事情都`[[TopViewController alloc] init]`应该`self.viewController = topViewController;`发生在 TopViewController 子类中。

# objective-c - 为什么我在 NSString veriable 上收到“程序接收信号：”EXC_BAD_ACCESS”

> ID：12912232
> 
> 赞同：0
> 
> 时间：2012-10-16T10:06:49.770
> 
> 标签：objective-c, if-statement, exc-bad-access

我最近刚开始学习Objective C，当我运行下一个程序时，我收到错误“程序接收信号：”EXC_BAD_ACCESS“对于代码行

```
 if([*userChoice isEqualToString:@"yes"]) 
```

完整的代码是：

```
void initGame (void);
void restartGame(void);
void toGoOn(char *playerChoice);

int guess=-1;
int from=-1;
int to=-1;
bool playStatus=true;
bool gameStatus=true;
int answer=-1;
NSString *userChoice[10];

//if true the game is on

int main (int argc, const char * argv[])
{

    @autoreleasepool {

        GuessManager *game=GUESS;  
        NSLog(@"Hello, lets play");
        NSLog(@"Please provide a positive range in which you would like to play");
      do{
          initGame();
          [game setnumberToGuess:from :to];
        do {                       
            printf("Make you guess:");
            scanf("%d", &guess);
            [game setUserGuess:guess];
            [game checkUserGuess];
            if([game getDidIgetIt])
            {
                playStatus=false;               
            } 
            else
            {
                playStatus=true;
            }

        } while (playStatus);
         restartGame();
      }while(gameStatus);  
        printf("Thanks For Playing PanGogi Games! GoodBye");
    }
    return 0;
}

void initGame (void)
{
    printf("from:");
    scanf("%d",&from);
    printf("to:");
    scanf("%d",&to);    
}

void restartGame(void)
{
    printf("Would you like to continue?(yes/no)");
    scanf("%s",&userChoice); 
    //scanf("%d",&answer); 

   // if(answer==1)
    if([*userChoice isEqualToString:@"yes"])
    {
        gameStatus=true;
    }
    else
    {
        gameStatus=false;
    }
} 
```

我知道它与 NSString 变量 userChoice 以及它在 if 中的使用方式有关，但我找不到的是我做错了什么。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:14:05.960

您的代码中有 3 个错误

1）我认为你对 NSString 和 C 风格的字符数组感到困惑......你只需要使用单个 NSString 对象来保存多字符数据..

```
NSString *userChoice; 
```

2）由于要使用scanf输入数据，所以需要一个C风格的字符数组。scanf 不适用于 NSString 类型。

```
char tempArray[10];
int count = scanf("%s",&tempArray);
userChoice  = [NSString stringWithBytes:tempArray length:count encoding: NSUTF8StringEncoding]; 
```

3) 现在你可以直接使用 NSString 了。不需要像语法这样的指针

```
if( [userChoice isEqualToString: @"yes"]){
   .....
   .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:17:53.597

您使用`NSString`的好像是`char`. 它不是。它是一个代表字符串的类。

该`scanf`函数是一个 C 函数，需要一个 char 数组，而不是`NSString`.

```
char str[80];
scanf("%s", &str); 
```

您可以使用这样的数组初始化`NSString`对象：`char`

```
NSString *userChoice = [NSString stringWithCString:str encoding:NSASCIIEncoding]; 
```

并像这样比较：

```
if ([userChoice isEqualToString:@"yes"]) {
   ...
} else {
   ...
} 
```

# django - AssertionError：不支持负索引

> ID：12912233
> 
> 赞同：2
> 
> 时间：2012-10-16T10:06:57.783
> 
> 标签：django, django-templates

当我打开点击 cms-pages 时，显示错误..

```
File "/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/core/handlers/base.py", line 111, in get_response
response = callback(request, *callback_args, **callback_kwargs)

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/contrib/admin/options.py", line 307, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/utils/decorators.py", line 93, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/views/decorators/cache.py", line 79, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/contrib/admin/sites.py", line 197, in inner
    return view(request, *args, **kwargs)

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/django_cms-2.2-py2.6.egg/cms/admin/pageadmin.py", line 657, in changelist_view
    cl.set_items(request)

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/django_cms-2.2-py2.6.egg/cms/admin/change_list.py", line 198, in set_items
    children[-1].last = False

  File "/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/db/models/query.py", line 157, in __getitem__
    "Negative indexing is not supported."

AssertionError: Negative indexing is not supported. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-23T15:09:47.080

这主要发生在您在空列表上尝试一些与索引相关的操作时。例如。

```
` somelist=[]

` last_element = somelist[len(last_element)-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:15:58.913

看起来您在 django-cms 中遇到了[这个问题。](https://github.com/divio/django-cms/issues/1099)现在已修复，因此您可以升级到最新版本，或手动应用补丁。

您可能需要同时将 django-mptt 升级到 0.5.2。

# python - 为什么python中CRC16的这种计算有区别？

> ID：12912234
> 
> 赞同：1
> 
> 时间：2012-10-16T10:07:01.290
> 
> 标签：python, crc, crc16

我会说这段代码会提供三次相同的输出，但它不会：

```
import crcmod

#create CRC16 calculator
crc16 = crcmod.predefined.mkCrcFun('crc-16')

#wait for user input
#hstr = raw_input("enter hex commands, space separated: ")
hstr = '81 12 C0 00 01 05'
hex_series = hstr.replace(' ', '\\x')
hex_series_caps = hstr.capitalize().replace(' ', '\\x') #why is there difference?

print hex(crc16(hex_series))  # gives 0xd795 incorrect! + how can there be a 9???
print hex(crc16(hex_series_caps))  # gives 0x37b4 incorrect!
print hex(crc16('\x81\x12\xC0\x00\x01\x05')) # gives 0x815b correct! 
```

请解释！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:17:17.050

让我们打开一个 Python 提示符...

```
>>> hstr
'81 12 C0 00 01 05'
>>> hex_series
'81\\x12\\xC0\\x00\\x01\\x05'
>>> hex_series_caps
'81\\x12\\xc0\\x00\\x01\\x05' 
```

如您所见，没有一个字符串是您想要的字符串。替换空格`"\\x"`只是在字符串中插入一堆反斜杠和`x`字符，它不会进行任何转义。

像这样的转义序列`'\x63'`将变为`'c'`，但**前提**是您在源代码中以这种方式编写它。在字符串操作、读取字符串或几乎其他任何事情之后**都不会**发生转义序列。例如，

```
>>> '\x63'
'c'
>>> '\\' + 'x63'
'\\x63' 
```

试试这个：

```
import base64
data = base64.b16decode(hstr.replace(' ', ''))
print hex(crc16(data)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:14:39.420

一旦你将它放入 python 控制台并查看数据，问题就会暴露出来：

```
>>> good = '\x81\x12\xC0\x00\x01\x05'
>>> hstr = '81 12 C0 00 01 05'
>>> hex_series = hstr.replace(' ', '\\x')
>>> hex_series_caps = hstr.capitalize().replace(' ', '\\x')
>>> good
'\x81\x12\xc0\x00\x01\x05'
>>> hex_series
'81\\x12\\xC0\\x00\\x01\\x05'
>>> hex_series_caps
'81\\x12\\xc0\\x00\\x01\\x05' 
```

主要问题是您将 \x 符号放入其中，而在第一个好的字符串中它被翻译 - \xbla 具有特殊含义，当您输入字符串时会被翻译，在字符串中带有斜杠后跟 x 只是一个斜线后跟 x。（第二个问题是，即使这有效，因为你替换了空间，第一个不会被转换）。

python 在底部的 \\xc0 中使用 \\ 说的是“这是一个普通的斜线”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:17:46.683

乔所说的是正确的 - 所以我不会重复它。要正确转换输入字符串，您可以使用以下命令：

```
blah = ''.join(chr(int(c, 16)) for c in hstr.split())
# '\x81\x12\xc0\x00\x01\x05' 
```

**编辑：**虽然使用`base64.b16decode()`如 Dietrich Epp 所示更优雅恕我直言

# javascript - 停止标签切换输入复选框

> ID：12912236
> 
> 赞同：20
> 
> 时间：2012-10-16T10:07:07.250
> 
> 标签：javascript, jquery, html

我有以下html代码。单击标签时，它会切换复选框。

```
<td><label for="startClientFromWebEnabled">Client Launch From Web:</label></td>
<td><input type="checkbox" id="startClientFromWebEnabled" name="startClientFromWebEnabled" data-bind="checked: StartClientFromWebEnabled, enable: IsEditable" onchange="startClientFromWebToggleRequiredAttribute()" /></td> 
```

我怎样才能防止这种情况？如果我删除`for="startClientFromWebEnabled"`，它会停止切换，但我需要这个，因为我有一些逻辑可以从触发事件的元素中获取 id ...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-16T10:19:33.340

**最好的解决方案**是让标签切换复选框，因为这是直观和预期的行为。

**第二个最佳**解决方案是确保您的复选框没有嵌套在标签内并且标签没有`for`属性。如果您有一些依赖于它的逻辑，您可以将数据属性放在元素上并在您的逻辑中使用它们。

```
<input type="checkbox" data-myid="1" />
<label data-myid="1">foo</label>
```

**最后一招**

`click`您可以使用 jQuery阻止事件的默认行为：

```
$('label[for="startClientFromWebEnabled"]').click(function(e) { 
    e.preventDefault();
});​ 
```

请参阅此[jsFiddle](http://jsfiddle.net/wNMVu/)以获取示例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-16T21:11:55.303

也有 CSS 解决方案：

```
label {
   pointer-events: none;
   cursor: default;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:19:30.020

如果您使用的是 JQuery，`id`请在标签上添加一个，然后将其添加到您的脚本中：

```
$("#lbl").click(function(){
   return false; 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-02T19:30:52.697

如果需要，只需防止标签或标签任何部分的默认设置。

```
document.querySelector('.prevent-default').addEventListener('click', (e)=>{
   e.preventDefault();
}, false);
```

```
 <input type="checkbox" id="1" />
    <label class="prevent-default" for="1">foo</label>
```

或者

```
document.querySelector('.prevent-default').addEventListener('click', (e)=>{
   e.preventDefault();
}, false);
```

```
 <input type="checkbox" id="1" />
    <label for="1">foo some part <span class="prevent-default">not</span> clickable</label>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T10:28:21.777

“我有一些从元素中获取 id 的逻辑”

`for`如果您将 ID 存储在其他位置，则可以删除- 属性。例如在`data-*`-attribute 中：

```
<label data-input-id="startClientFromWebEnabled"> 
```

另一方面，有时很难根据用户的样式和能力来指向并单击复选框。使用 - 属性有充分的理由`for`。

# crash - 启动 WindowsPhone 7 模拟器会导致正在运行的 VMWare（服务器）实例崩溃

> ID：12912251
> 
> 赞同：0
> 
> 时间：2012-10-16T10:08:12.220
> 
> 标签：crash, vmware-server, windows-phone-7-emulator

我有一台直接在硬件上运行 Windows 7 Professional SP1 的机器。我将这台机器用于所有开发的东西。由于这包括 Web 开发以及 WP7 开发，我在 VMWareServer2 中运行了一些虚拟 linux 主机，用于我的 Web 开发。

一旦我启动 WindowsPhone 模拟器（本机，不在任何 VMWare 客户端实例中），所有 VMWare 机器都会停止工作，并且在我的 Windows 7 机器重新启动后仍然无法启动。

看来，WindowsPhone 模拟器（它本身就是一个虚拟机）的启动会使 VMWareServer 崩溃，并且即使在 WindowsPhone 模拟器关闭后仍将其锁定。

如何防止 WindowsPhone 模拟器使 VMWareServer 崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:00:29.187

看看这篇博文，他似乎和你有同样的问题，并找到了一个解决方法......虽然不是一个想法，但他不得不在 VMWareServer 中禁用硬件辅助仿真。

VMWare 自己只是说要卸载竞争对手的模拟器......好像这是一个选项

[http://pcbl.de/2011/06/13/round-1-fight-windows-phone-7-emulator-x-vmware/](http://pcbl.de/2011/06/13/round-1-fight-windows-phone-7-emulator-x-vmware/)

# python - 如何设置 BaseBTreeFolder 对象的名称？

> ID：12912256
> 
> 赞同：1
> 
> 时间：2012-10-16T10:08:33.603
> 
> 标签：python, plone

我创建了这个继承自`plone.app.folder.base.BaseBTreeFolder`. 创建后，Plone 设置一个长名称，其中包含对象名称和创建日期。如何将名称更改为与标题相同的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:42:27.287

您需要使用工厂工具注册您的类型。

当这样注册的内容最初在沙箱中创建时，您就可以第一次填写编辑表单。提交编辑表单后，该项目将被真实创建，并根据标题获得一个 ID。

要注册，请在对象的“工厂类型”选项卡上手动启用您的类型`portal_factory`（在 ZMI 中），或者在您的 GenericSetup 配置文件中使用名为`factorytool.xml`包含以下内容的文件注册您的类型：

```
<?xml version="1.0"?>
<object name="portal_factory">
 <factorytypes>
  <type portal_type="YourTypeName" />
 <factorytypes>
</object> 
```

您还需要确保您的类型将重命名标志设置为 True；在你的类定义中添加：

```
_at_rename_after_creation = True 
```

# mysql - 在一对多关系表中获取最新数据

> ID：12912259
> 
> 赞同：0
> 
> 时间：2012-10-16T10:08:39.677
> 
> 标签：mysql

我想从表 a、b、c 中获取数据，但按表响应的最新数据排序

表案例具有以下结构（简化）：

```
casework_id | problem   | user_id          
------------+-----------+-------
1           | Problem1  | 1  
2           | Problem2  | 2
3           | Problem3  | 1
4           | Problem4  | 3 
```

表用户具有以下结构（简化）：

```
user_id | name         
--------+-----------------
1       | peter  
2       | Sam  
3       | Tom  
4       | Steve 
```

表响应具有以下结构（简化）：

```
response_id | response   | casework_id | created           
------------+-----------+--------------+-------
1           | responce1  |  1      | 2012-10-14 11:28:31
2           | responce2  |  1      | 2012-9-10 11:28:31 
3           | responce3  |  1      | 2012-9-2 11:28:31
4           | responce4  |  3      | 2012-8-3 11:28:31
4           | responce5  |  3      | 2012-8-2 11:28:31 
```

我正在查看查询以按最新响应获取数据顺序并按 casework_id 分组

```
I. e. required out put is 

casework_id | problem   | name  | responce  | created        
------------+-----------+-------+-----------+---------
1           | Problem1  | peter | responce1 | 2012-10-14 11:28:31
2           | Problem2  | Sam   | Null      | Null
3           | Problem3  | peter | responce4 | 2012-8-3 11:28:31 
4           | Problem4  | Tom   | Null      | Null 
```

如果你们中的一个好心人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:19:50.053

您可以使用以下内容：

```
select c.casework_id,
  c.problem,
  u.name,
  r2.response,
  r1.created
from casework c
left join user u
  on c.user_id = u.user_id
left join
(
  select max(created) created, casework_id
  from response r
  group by casework_id
) r1
  on c.casework_id = r1.casework_id
left join response r2
  on r1.created = r2.created
  and r1.casework_id = r2.casework_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/95692/10)

如果您想同时包含创建案例的用户和响应者，那么您将需要加入`user`表格两次：

```
select c.casework_id,
  c.problem,
  u1.name CreatedByName,
  r2.response,
  r1.created,
  u2.name ReponseName
from casework c
left join user u1
  on c.user_id = u1.user_id
left join
(
  select max(created) created, casework_id
  from response r
  group by casework_id
) r1
  on c.casework_id = r1.casework_id
left join response r2
  on r1.created = r2.created
  and r1.casework_id = r2.casework_id
left join user u2
  on r2.user_id = u2.user_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/26ad9/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:18:20.740

我没有测试过，但它可能会给你一个想法

```
select c.casework_id, c.problem, 
(select name from user u where u.user_id = c.user_id ), 
(select r.reponse from response r where r.casework_id = c.casework_id ORDER BY r.created DESC LIMIT 1),
(select r.created from response r where r.casework_id = c.casework_id ORDER BY r.created DESC LIMIT 1),
from casework c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:19:01.713

```
SELECT responce.casework_id, problem, name, responce, created 
FROM responce
JOIN
   (SELECT casework_id, problem, name 
    FROM casework JOIN user 
    ON casework.userid=user.userid) AS A
ON responce.casework_id=A.casework_id
ORDER BY responce, responce.casework_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:19:51.297

尝试这个

```
select c.caseword_id, c.problem, u.name,  response.response, responce.created from  asework c inner join user u on u.user_id = c.user_id left outer join select casework_id from response having max(created) group by casework_id) responsedata on responsedata.casework_id = c.casework_id 
```

# android - Android：Maven 最终存档名称

> ID：12912261
> 
> 赞同：4
> 
> 时间：2012-10-16T10:08:46.687
> 
> 标签：android, maven, jenkins, android-build, maven-install-plugin

在 maven`mvn clean install`运行结束时，创建的工件由 maven-install-plugin 自动安装在存储库中：

```
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ project ---
[INFO] Installing C:\Users\mannaz\workspace\project\target\project-0.1.1-test.apk to C:\Users\mannaz\.m2\repository\at\mannaz\android\project\0.1.1\project-0.1.1.apk
[INFO] Installing C:\Users\mannaz\workspace\project\pom.xml to C:\Users\mannaz\.m2\repository\at\mannaz\android\project\0.1.1\project-0.1.1.pom
[INFO] Installing C:\Users\mannaz\workspace\project\target\project-0.1.1-test.jar to C:\Users\mannaz\.m2\repository\at\mannaz\android\project\0.1.1\project-0.1.1.jar 
```

不幸的是，最终的 apk 文件名在此过程中被重命名（`project-0.1.1-test.apk`>> `project-0.1.1.apk`）。

最初，apk 文件的名称是通过设置的

```
<finalName>${project.artifactId}-${project.version}-${webservice.target}</finalName> 
```

如何在构建存档中指定 apk 文件的最终名称而不覆盖`<version/>`属性本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:04:20.637

## 原因：

运行`mvn clean install -X`原因 Maven在[构建生命周期](http://maven.apache.org/ref/3.0.4/maven-core/lifecycles.html#default_Lifecycle)`default-install`结束时执行目标，它使用默认的 groupId:artifactId:packaging:version 安装生成的 apk（我在此示例中用作最终名称）：`abc-123`

```
[INFO] --- maven-install-plugin:2.1:install (default-install) @ myapp ---
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-install-plugin:2.1:install from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-install-plugin:2.1, parent: sun.misc.Launcher$AppClassLoader@11b86e7]
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-install-plugin:2.1:install' with basic configurator -->
[DEBUG]   (f) artifact = com.mycompany:myapp:apk:1.2.2-SNAPSHOT
[DEBUG]   (f) attachedArtifacts = [com.mycompany:myapp:jar:1.2.2-SNAPSHOT]
[DEBUG]   ... ...
[DEBUG] -- end configuration --
[INFO] Installing C:\workspace\myapp\target\abc-123.apk to c:\maven\repository\com\mycompany\myapp\1.2.2-SNAPSHOT\myapp-1.2.2-SNAPSHOT.apk
[INFO] ... ... 
```

## 解决方案：

此默认工件安装是 AFAIK 既不可避免也不可修改，并且在默认安装目标执行期间`<finalName>`不会对目标文件名（使用固定模式）产生任何影响。`artifactId-version-classifier.packaging`解决方案是在构建生命周期中附加额外的工件，取决于您的需求（如果您只需要在后面添加一些后缀），最简单的方法是在 android-maven-plugin 配置`myapp-1.2.2-SNAPSHOT`中定义一个[分类器：](http://maven-android-plugin-m2site.googlecode.com/svn/apk-mojo.html#classifier)

```
<plugin>
  <groupId>com.jayway.maven.plugins.android.generation2</groupId>
  <artifactId>android-maven-plugin</artifactId>
  <extensions>true</extensions>
  <configuration>
    <classifier>test</classifier>
    ... ...
  </configuration>
</plugin> 
```

这将导致 myapp-1.2.2-SNAPSHOT.apk 和 myapp-1.2.2-SNAPSHOT-test.apk 都安装到 maven 存储库中：

```
[INFO] --- maven-install-plugin:2.1:install (default-install) @ myapp ---
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-install-plugin:2.1:install from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-install-plugin:2.1, parent: sun.misc.Launcher$AppClassLoader@11b86e7]
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-install-plugin:2.1:install' with basic configurator -->
[DEBUG]   (f) artifact = com.mycompany:myapp:apk:1.2.2-SNAPSHOT
[DEBUG]   (f) attachedArtifacts = [com.mycompany:myapp:jar:1.2.2-SNAPSHOT, com.mycompany:myapp:apk:test:1.2.2-SNAPSHOT]
[DEBUG]   ... ...
[DEBUG] -- end configuration --
[INFO] Installing C:\workspace\myapp\target\abc-123.jar to c:\maven\repository\com\mycompany\myapp\1.2.2-SNAPSHOT\myapp-1.2.2-SNAPSHOT.apk
[INFO] ... ...
[INFO] Installing C:\workspace\myapp\target\abc-123.apk to c:\maven\repository\com\mycompany\myapp\1.2.2-SNAPSHOT\myapp-1.2.2-SNAPSHOT-test.apk 
```

# php - 5 分钟前在 php 中

> ID：12912266
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:09:05.073
> 
> 标签：php, date

我在数据库中存储了一个日期为“ **15-10-2012** ”，当日期不超过一天时显示在前端。我需要显示 2 分钟年龄，5 小时前等。

我怎样才能做到这一点？提前致谢。

**输入**

```
15-10-2012 
```

**输出**

```
"2 days ago" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:27:40.480

见这篇文章[http://www.ozzu.com/programming-forum/mysql-selecting-timestamp-from-database-now-minute-t82112.html](http://www.ozzu.com/programming-forum/mysql-selecting-timestamp-from-database-now-minute-t82112.html)

并看看 MYSQL 的 INTERVAL [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

我认为这会帮助你： `WHERE UNIX_TIMESTAMP(your_date) > (NOW() - INTERVAL 5 MINUTE)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:31:39.000

（假设日-月-年）

2 分钟前：

回显日期（'jnY'，strtotime（'15-10-2012'） - 120）；

或者：

回显日期（'jnY'，strtotime（'15-10-2012 -2 分钟'））；

实际上，您的开始日期应该是一个时间戳，直到第二个。如果只存储日/月/年，那么您需要假设每个日期从 00:01 开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:10:56.667

首先从日期计算一个unix时间戳，然后从当前时间中减去并以分钟/小时/天为单位转换差异。

```
list($day,$month,$year) = explode('-', $date);
$time = mktime(0,0,0,$month,$day,$year);
$now = time();
$difference = $now - $time;
$minutes = intval($difference / 60);

$hours = intval($minutes / 60 ); 

if ($hours > 24) {
   $days = intval($hours / 24);
} 
```

# asp.net-mvc-3 - 计算 ajax 日历扩展器中的天数

> ID：12912267
> 
> 赞同：0
> 
> 时间：2012-10-16T10:09:05.940
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我想通过文本框上的 AJAX 日历扩展器计算 asp.net 中的天数。但我没有得到我想要的正确输出。我找不到输出中出现的错误。代码是

```
 string a = TextBox1.Text;
    string b = TextBox2.Text;
    DateTime t1 = Convert.ToDateTime(a);
    DateTime t2 = Convert.ToDateTime(b);
    TimeSpan days = t2 - t1;
    int zile = Convert.ToInt32(Math.Ceiling(365-(days.TotalDays)));
    TextBox3.Text = zile.ToString(); 
```

我没有得到正确的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:17:39.420

如我所见，您正在计算文件隐藏代码中的天数差异。您可以像下面这样轻松计算它。

```
TimeSpan diff = Convert.ToDateTime(TextBox2.Text).Subtract(Convert.ToDateTime(TextBox1.Text));
int noOfDays = diff.Days + 1; 
```

# php - PHP Sendmail 表单不返回任何结果

> ID：12912272
> 
> 赞同：1
> 
> 时间：2012-10-16T10:09:25.770
> 
> 标签：php, html, sendmail

我对 php 非常陌生，大约有 2 天的经验。我的难题是这样的：

我的html是：

```
<div class="form">
  <form action="php/sendmail.php" method="post" id="contactwidget">
      <div class="inp_r"><input type="text" name="wname" id="wname" value="Name" size="22" tabindex="11" alt="Name" /></div>
    </div>
    <div class="inp_r"><input type="text" name="wemail" id="wemail" value="Email" size="22" tabindex="12" alt="Email" /></div>
   </div>
<table>
  <tr>
    <td class="text_m"><textarea name="wmessage" id="wmessage" cols="28" rows="6" tabindex="13" title="Quick Message">Quick Message</textarea></td>
    <td class="text_r"></td>
  </tr>
</table>
<div class="loading"></div>
<div><input type="hidden" name="wcontactemail" id="wcontactemail" value="info@joshuas.com" /></div>
                                    <div><input type="hidden" name="wcontacturl" id="wcontacturl" value="php/sendmail.php" /></div>
                                    <div><a href="#" id="wformsend" class="button" tabindex="14"><span>Send</span></a></div>
                                </form>
                            </div>

My php is this:
<?php
  $email = $_POST['Email'] ;
  $name = $_POST['Name'] ;  
  $message = $_POST['wmessage'] ;

  $headers .= 'From: ' . $from . "\r\n";  

  mail( "info@gmail.com", "Message from Joshua",
    $message, "From: $email" );
?> 
```

返回的只是一封带有“来自约书亚的消息”的电子邮件

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:14:55.487

如果你想测试输出使用这个： http: [//papercut.codeplex.com/](http://papercut.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:12:43.523

您必须在 php 脚本中重定向页面。

```
header( "location=wherever.php" ); 
```

# mysql - 从zend删除mysql中多个表的记录

> ID：12912276
> 
> 赞同：0
> 
> 时间：2012-10-16T10:09:39.240
> 
> 标签：mysql, zend-framework

如何使用 Zend 框架从 mysql 中的多个表中删除记录

```
$this->_db->delete($this->_candidate_education,'candidate_id='.$id) 
```

目前我正在使用此查询来删除单个表中的记录

我需要使用单个删除查询从多个表中删除记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:23:10.167

[http://framework.zend.com/manual/1.12/en/zend.db.statement.html](http://framework.zend.com/manual/1.12/en/zend.db.statement.html)

```
$stmt = $db->query(
                'delete FROM bugs,test WHERE reported_by = ? AND bug_status = ?',
                array('goofy', 'FIXED')
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:42:50.453

您可以使用 ON DELETE CASCADE 选项在表上定义外键约束。然后从父表中删除记录会从子表中删除记录。

希望这有帮助：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

**或者**，您可以按照以下语法创建查询。

```
DELETE 
    FROM tbl_name[.*] [, tbl_name[.*]] ...
    USING table_references
    [WHERE where_condition] 
```

我更喜欢第一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:53:57.527

像这样的东西：

```
$db->quoteInto("type=?", $requestType) . $db->quoteInto("AND id =?", $requestID); 
```

# c# - 更改excel文件中的单元格值并使用c#将更改复制到新列

> ID：12912277
> 
> 赞同：1
> 
> 时间：2012-10-16T10:09:40.817
> 
> 标签：c#, excel

我需要减少列中的单元格值，例如“250-1824-02”到“250-1824”，并使用 c# 将新值更新为同一个 Excel 表中的新列。请帮忙

我已将编码生成到以下级别：

```
Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;
            xlApp = new Excel.Application();
            xlApp.Visible = false;
            xlWorkBook = xlApp.Workbooks.Open(textBox1.Text, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:14:26.557

```
Excel.Application xlApp;
    Excel.Workbook xlWorkBook;
    Excel.Worksheet xlWorkSheet;
    object misValue = System.Reflection.Missing.Value;
    xlApp = new Excel.Application();
    xlWorkBook = xlApp.Workbooks.Open(ExcelFile, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);
    xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

Microsoft.Office.Interop.Excel.Range range = xlWorkSheet.Cells.SpecialCells(
                Microsoft.Office.Interop.Excel.XlCellType.xlCellTypeLastCell, Type.Missing);

        string value = string.Empty;
        for (int Loop = 1; Loop <= range.Row; Loop++)
        {
            value = Convert.ToString(xlWorkSheet.Range["A" + Loop, "A" + Loop].get_Value(misValue));
            xlWorkSheet.Range["B" + Loop, "B" + Loop].set_Value(misValue, value.Remove(8, 3));
        } 
```

# sql - 识别所涵盖期间的开始和结束 - oracle 10g sql

> ID：12912279
> 
> 赞同：0
> 
> 时间：2012-10-16T10:09:49.253
> 
> 标签：sql, oracle, list, date, oracle10g

我的数据如下所示：

```
 ID      FROM        TO          START_CODE      END_CODE    TYPE
        A       01/01/2012  02/02/2012  P               E           1
        A       12/03/2011  01/01/2012  P               X           1
        A       01/01/2011  12/03/2011  S               X           2

        A       01/01/2010  02/02/2010  P               E           2
        A       12/03/2010  01/01/2010  P               X           4
        A       01/01/2009  12/03/2009  S               X           1 
```

基本上，这是针对一位客户的信息。end_code 'e' 表示护理期的结束， start_code 's' 表示护理期的开始。“p”的开始代码表示日期是一个延续，“x”的结束代码也是如此。我希望能够返回的是如下所示的数据：

```
 ID      START       END             Types
        A       01/01/2011  02/02/2012      2,1,1
        A       01/01/2009  02/02/2010      1,4,2 
```

第一个表的查询看起来与此类似（仅示例），但是，我有兴趣返回多个客户端，而不仅仅是“A”。

```
 SELECT
        A.ID,
        A.FROM,
        A.TO,
        A.START_CODE,
        A.END_CODE,
                       A.Type

        WHERE
        A.ID = 'A' 
```

我过去曾使用 xmlagg 来实现类似的事情（即在一个单元格中列出信息），但它实际上是为每个客户端识别单独的开始和结束日期，然后返回我正在努力处理的类型序列。作为参考，我的oracle版本是10g，10.2.0.5.0。

感谢您的宝贵时间，感谢您提供任何指示或帮助。

编辑后包含以下 ABCade 的建议：

```
 SELECT
        t3.MOV_PER_GRO_ID,
        t3.f,
        t3.MOV_END_DATE,
        t3.types,
        LENGTH(REGEXP_REPLACE(t3.types,'[^,]')) as "Count"
        FROM(

        SELECT 
        sys_connect_by_path(t2.MOV_2000_PLACEMENT_TYPE,',') types,
        connect_by_root(t2.MOV_START_DATE) f, 
        t2.MOV_START_DATE,        
        t2.MOV_END_DATE,        
        connect_by_isleaf is_leaf, 
        t2.MOV_PER_GRO_ID 
        FROM (SELECT t.*,
        lag(t.MOV_START_DATE) over (ORDER BY t.MOV_PER_GRO_ID, t.MOV_START_DATE) nfrom
        FROM O_MOVEMENTS t
        WHERE t.MOV_PER_GRO_ID IN ('A','B'))t2 
        START 
        WITH 
        t2.MOV_2000_START_REASON = 'S'
        CONNECT BY   
        PRIOR t2.MOV_START_DATE = t2.nfrom
        AND PRIOR t2.MOV_PER_GRO_ID =  t2.MOV_PER_GRO_ID 
        AND t2.MOV_2000_START_REASON IN ('P'))t3
        where t3.is_leaf=1 
```

基于 ABCade 的解决方案进行了更新。经过一些调整（再次感谢 ABCade），它似乎正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:30:35.397

尝试：

```
SELECT  t3."ID", t3.f "start", t3."TO" "end", t3.types
FROM (
SELECT sys_connect_by_path(t2."TYPE",',') types,
       connect_by_root(t2."FROM") f,
       t2."FROM",
       t2."TO",
       connect_by_isleaf is_leaf ,
t2."ID"
FROM (
  SELECT t.*, lag(t."FROM") over (ORDER BY t."FROM") nfrom
    FROM table1 t
   WHERE t."ID" = 'A'
  ) t2
START WITH t2."START_CODE" = 'S'
CONNECT BY   PRIOR t2."FROM" = t2.nfrom  AND t2."START_CODE" = 'P') t3
WHERE is_leaf=1 
```

[这](http://www.sqlfiddle.com/#!4/6c2ed/4)是一个小提琴
[这](http://www.sqlfiddle.com/#!4/4e686/1)是另一个小提琴（在看到您的评论和更新后）

# iphone - 如果表格视图是从字典中加载的，如何实现搜索栏？

> ID：12912282
> 
> 赞同：0
> 
> 时间：2012-10-16T10:10:12.067
> 
> 标签：iphone, ios, ipad

我有一个表格视图并像这样向其中添加项目。

```
 NSDictionary *memberInfo = [self.currentChannel infoForMemberWithID:memberID];

    memberinfo=memberInfo;

  cell.textLabel.text = [NSString stringWithFormat:@"%@",[memberinfo objectForKey:@"name"]];
  cell.detailTextLabel.text = [NSString stringWithFormat:@"%@",[memberinfo objectForKey:@"status"]];

    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor];  

  return cell; 
```

`它工作正常。现在我想在上面添加一个搜索栏。我需要根据匹配的字符串加载表格视图。但我正在加载这样的表格视图。我知道如何在数组中搜索。我是使用

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText.i want to load the table view according to the match of the searchstring ,Can anybody know this? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:33:48.037

您可以在 SearchBar 委托中使用 NSPredicate 来过滤您的主数组（成员或您命名的任何内容）并将结果捕获到另一个全局声明的数组中。现在用这个过滤的数组重新加载你的表。

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    [_mArrFilteredList removeAllObjects]; //global array which will contain filtered results
    NSString* searchStr = [NSString stringWithFormat:@"*%@*",_srbActivity.text];

    NSPredicate* predicate = [NSPredicate predicateWithFormat:@"%K == %@",@"name", searchStr];  //will filter according to "name" key in your dictionary.
    [_mArrFilteredList addObjectsFromArray:[_mArrList filteredArrayUsingPredicate:predicate]]; //_mArrList is your main array which has all the dictionaries.
    [yourTableView reloadData];
} 
```

现在在您的 tableview 数据源方法中，使用过滤数组 (_mArrFilteredList) 填充表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:06:22.677

对于任何搜索实现，我们都需要两个列表，一个是原始的，另一个是过滤的。我们通常会使用过滤列表来填充表格。

在您的情况下，您可以将字典作为原始列表。对于过滤列表，您可以`NSArray`根据要求拥有一个值或键。

在搜索功能中过滤数组列表，重新加载表格。从`cellForRow`数组键中获取对象或从数组值中获取键 - 稍后该键的对象。

# java - 当str有韩文字符时java jlabel setText（str）错误

> ID：12912283
> 
> 赞同：4
> 
> 时间：2012-10-16T10:10:12.730
> 
> 标签：java, swing, utf-8, internationalization, jlabel

我正在开发应该支持英语、俄语和韩语的 Java 应用程序。

所以我为每种语言准备了 unicode 的属性文件。然后我使用 bundle 中的 _ 函数获取一些字符串值，将其设置为

*   JLabel
*   文本区域

```
InputStream stream = LocaleManager.class.getClassLoader().getResourceAsStream(path);
ResourceBundle bundle = new PropertyResourceBundle(new InputStreamReader(stream, "UTF-8"));

public static String _(String key) {
    return bundle.getString(key);
} 
```

对于英语和俄语来说，它完美无缺。对于韩语 JTextArea 正确显示韩语字符，但 JLabel 不正确。它显示正方形，在 Eclipse 控制台中显示 ??，但是俄罗斯字符可以在 Eclipse 控制台中正确显示。

所以 JLabel 似乎有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:57:21.773

由于@mKorbel 很容易发现问题出在 JLabel 字体上。

在应用程序启动时，从 Locale.getDefault() 中识别语言或要求用户选择。然后根据选择的语言生成选择 .properties 文件的路径。

在我输入的韩语文件中（我使用 Eclipse AnyEdit 插件） Swimming=\u0412\u043e\u0434\u043d\u043e\u0435 Running=\u0411\u044b\u0441\u0442\u0440\u043e\u0435

```
InputStream stream = LocaleManager.class.getClassLoader().getResourceAsStream(path);
ResourceBundle bundle = new PropertyResourceBundle(new InputStreamReader(stream, "UTF-8"));

//get internationalized version for "Swimming"
String str = _("Swimming");

//create and configure JLabel
JLabel label = new JLabel();
label.setVisible(true);
label.setBackground(Color.yellow);
label.setOpaque(true);

//this line was the issue
label.setFont(new Font("Verdana", Font.PLAIN, 14));

//setting text which results in squares
label.setText(str); 
```

# c - 在输出屏幕中打开图像文件

> ID：12912284
> 
> 赞同：0
> 
> 时间：2012-10-16T10:10:18.410
> 
> 标签：c, image, winapi, turbo-c

我想使用 C 创建一个照片查看器类型的软件。但我一直在思考如何在 Windows 操作系统的 C 输出屏幕中加载图像文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:17:58.703

忘记 Turbo C。由于以下原因，它不会工作：

1.  Windows 不再很好地支持 DOS 应用程序。从 Windows Vista 开始，支持大大减少，并且在 64 位版本的 Windows 上，从 Vista DOS 应用程序开始根本无法运行。唯一的选择是在某种虚拟机中运行 DOS 应用程序。[DosBox](http://dosbox.org/)可以提供一些帮助，但它远非完美。
2.  DOS 应用程序不能很好地支持长名称和非 ASCII 名称。
3.  DOS 应用程序在它们可以分配和访问的内存量方面受到限制，现在相当典型的 JPEG 图像可能大于几兆字节。使用 Turbo C 生成的 16 位应用程序通常被限制在几百 KB。

如果您想要一个 Windows 应用程序，请学习直接（通过 GDI 或 DirectX）或通过[SDL](http://www.libsdl.org/)等库间接使用 Windows API 进行编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:14:43.223

1、考虑使用最新的 IDE，例如 Dev-C++、MSVC Express、Eclipse CDT 或其他任何东西，而不是 Turbo C

2、看看ak GDI+

3、按照本[教程](http://www.codeproject.com/Articles/5065/Thumbnails-viewer-and-image-processing-using-GDI-a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:05:02.023

您可以考虑使用[SDL](http://www.libsdl.org/)在 C 中显示图像。它主要用于游戏开发，但可以轻松显示图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:47:40.343

我认为 openCV 库可能对你有用。它还具有如此强大的功能，可能对您将来想要改进项目时有用。

例如，打开图像就像 ;

```
IplImage *img = 0;
img = cvLoadImage( "filename.jpg", CV_LOAD_IMAGE_COLOR );
cvNamedWindow( "image", CV_WINDOW_AUTOSIZE );
cvShowImage( "image", img ); 
```

# ruby-on-rails-3 - 在“remote_ip”列上为“string”类型插入二进制数据？

> ID：12912285
> 
> 赞同：4
> 
> 时间：2012-10-16T10:10:22.313
> 
> 标签：ruby-on-rails-3, sqlite

`Binary data inserted for`字符串的含义是`type on column ...`什么？

在 SQLite 表中登录远程 IP 地址时，调试控制台中有一条消息：

```
Started GET "/test?name=abcde" for 127.0.0.1 at 2012-10-16 18:02:01 +0800
Processing by TestController#index as HTML
  Parameters: {"name"=>"abcde"}
   (0.1ms)  begin transaction
Binary data inserted for `string` type on column `query`
Binary data inserted for `string` type on column `remote_ip`
  SQL (0.6ms)  INSERT INTO "requests" ("controller", "query", "remote_ip") VALUES (?, ?, ?)  [["controller", "test"], ["query", "name=abcde"], ["remote_ip", "127.0.0.1"]]
   (2.5ms)  commit transaction 
```

该表定义为：

```
class CreateRequests < ActiveRecord::Migration
  def change
    create_table :requests do |t|
      t.string   :controller, :limit => 128
      t.string   :remote_ip,  :limit => 128
      t.string   :query,      :limit => 2048
    end
  end
end 
```

配置：

```
OS X Lion
ruby 1.9.3p194 
Rails 3.2.8
sqlite3 (1.3.6)
sqlite3-ruby (1.3.2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:08:23.847

It means that your Ruby strings are tagged with some non-default encoding:
(see [https://github.com/luislavena/sqlite3-ruby/issues/45](https://github.com/luislavena/sqlite3-ruby/issues/45))

# android - 在 android 中没有活动的谷歌帐户的推送通知

> ID：12912286
> 
> 赞同：0
> 
> 时间：2012-10-16T10:10:33.463
> 
> 标签：android

我们有一个场景，我们不希望用户注册到 google 帐户以在 android 平台中发送通知。但是根据 stackmob 文档，我们发现我们需要注册 With google 以发送通知。那么请指导我们如何在没有 GCM 的情况下发送通知？

谢谢和问候， Sai Sravan.P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:15:20.827

每个拥有运行 2.2 及更高版本设备的 Android 用户都必须有一个 google 帐户（该设备具有 google play 应用程序）。

我不确定你为什么害怕这种情况......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:16:45.857

我猜对于 GCM，您需要一个 Google 帐户，以便您可以使用 xmpp 代替 GCM，并且每个 android 设备用户都必须有一个 Google 帐户。

# java - IntelliJ IDEA 生成 serialVersionUID

> ID：12912287
> 
> 赞同：314
> 
> 时间：2012-10-16T10:10:38.283
> 
> 标签：java, serialization, intellij-idea

如何在 IntelliJ IDEA 中生成这个值？

我转到*设置*->*错误*->*序列化问题*-> 没有'serialVersionUID' 的可序列化类，但它仍然没有向我显示警告。我的类 PKladrBuilding 父级实现*接口 Serializable*。

部分代码：

```
public class PKladrBuilding extends PRQObject

public abstract class PRQObject extends PObject

public abstract class PObject implements Serializable 
```

* * *

## 回答 #1

> 赞同：615
> 
> 时间：2012-10-16T10:17:06.227

我不确定您是否有旧版本的 IntelliJ IDEA，但如果我转到菜单*文件*→*设置...* →*检查*→*序列化问题*→ 未启用“serialVersionUID”的可序列化类，您提供的类会给我警告。

![在此处输入图像描述](../Images/a9808ff5e73785366269c7d4b8eded9f.png)

如果我尝试第一堂课，我会看到：

![在此处输入图像描述](../Images/81874357edf75650033c622a3dca6bea.png)

`{ }`顺便说一句：在我添加到每个类的末尾以修复编译错误之前，它没有向我显示警告。

* * *

## 回答 #2

> 赞同：179
> 
> 时间：2013-08-20T17:29:28.040

安装 Olivier Descout 的**[GenerateSerialVersionUID](https://plugins.jetbrains.com/idea/plugin/185-generateserialversionuid)**插件。

转到：菜单*文件*→*设置*→*插件*→*浏览存储库*→`GenerateSerialVersionUID`

安装插件并重新启动。

*现在您可以从菜单Code* → *Generate* → serialVersionUID` 或快捷方式生成id 。

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2017-03-15T05:29:11.273

没有任何插件：您只需要在 IntelliJ 中启用突出显示：

`IntelliJ Preferences -> Editor -> Inspections -> Java -> Serialization issues -> Serializable class without 'serialVersionUID'`- 设置标志并单击`'OK'`。

现在，如果你的类实现`Serializable`了，你会看到高亮，并且`alt+Enter`类名上会建议生成`private static final long serialVersionUID`。

PS：取自[这里](https://stackoverflow.com/questions/24573643/how-to-generate-serial-version-uid-in-intellij/36007392#36007392)

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2017-07-16T04:53:39.743

在序列化上花了一些时间后，我发现，我们不应该生成`serialVersionUID`一些随机值，我们应该给它一个有意义的值。

[这是对此的详细评论。](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206957655/comments/206678425)我在这里处理评论。

> 实际上，您不应该“生成”串行版本的 UID。这是一个愚蠢的“功能”，源于对 Java 如何使用该 ID 的普遍误解。您应该为这些 ID 提供有意义的、可读的值，例如从 1L 开始，并在每次您认为该类的新版本应该使所有以前的版本（可能以前序列化）过时时递增它们。所有生成此类 ID 的实用程序基本上都执行 JVM 在未定义 ID 时所做的事情：它们根据类文件的内容生成值，因此会产生不可读的无意义长整数。如果您希望类的每个版本都不同（在 JVM 眼中），那么您甚至不应该指定 serialVersionUID 值，因为 JVM 会即时生成一个，并且您班级的每个版本的价值都是独一无二的。明确定义该值的目的是告诉序列化机制将具有相同 SVUID 的类的不同版本视为相同，例如，不要拒绝旧的序列化版本。因此，如果您定义 ID 并且从不更改它（我假设这就是您所做的，因为您依赖于自动生成，并且您可能永远不会重新生成您的 ID），您将确保所有 - 甚至完全不同的 - 版本您的类将被序列化机制视为相同。那是你要的吗？如果不是，并且如果您确实想控制如何识别您的对象，您应该使用您自己可以理解的简单值，并且当您确定类已发生重大变化时可以轻松更新。

希望这可以帮助。祝你好运。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-03-18T10:01:06.527

为了产生价值使用

```
private static final long serialVersionUID = $randomLong$L;
$END$ 
```

并为 randomLong 模板变量提供以下值：groovyScript("new Random().nextLong().abs()")

[https://pharsfalvi.wordpress.com/2015/03/18/adding-serialversionuid-in-idea/](https://pharsfalvi.wordpress.com/2015/03/18/adding-serialversionuid-in-idea/)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-09-18T11:59:42.967

此外，您可以添加可以完成工作的实时模板。

要做到这一点，请按`Ctrl+Alt+S`->`"Live Templates"`部分 -> `other`（或您希望的 w/e）

然后创建一个新的，定义如下：

```
private static final long serialVersionUID = 1L;
$END$ 
```

然后选择`definition`范围并将其另存为`'serial'`

现在您可以输入`serial``TAB`班级正文。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2020-05-06T17:46:07.860

最简单的现代方法：`Alt`+ `Enter`on

```
private static final long serialVersionUID = ; 
```

IntelliJ 将在`=`. 将光标放在它上面并点击`alt`+ `Enter`（在 Mac 上是 +）`Option`。`Enter`你会得到一个弹出窗口，上面写着“Randomly Change serialVersionUID Initializer”。只需按 Enter 键，它就会用随机长度填充该空间。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-06-14T07:55:48.427

生成 serialVersionUID 的另一种方法是`>Analyze >Run Inspection by Name`从上下文菜单（或键盘快捷键，默认为`ctrl`+ `alt`+ `shift`+ `i`）中使用，然后键入“Serializable class without 'serialVersionUID'”（或简单地键入“serialVersionUID”和前面的类型功能会为您找到它。

[![想法>分析>按名称运行检查](../Images/80d6c1222e9c2423ba527a117165641a.png)](https://i.stack.imgur.com/mRT0u.png) 然后，您将获得一个上下文菜单，您可以在其中选择在何处运行检查（例如，全部来自特定模块、整个项目、一个文件……）

使用这种方法，您甚至不必将一般检查规则设置为任何内容。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-18T01:45:27.420

有版本`v2018.2.1`

去

> 首选项 > 编辑器 > 检查 > Java > 序列化问题 > 切换“没有'serialVersionUID'的可序列化类”。

类声明旁边应出现警告。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-27T12:19:39.790

如果要为一堆文件添加缺少的serialVersionUID，IntelliJ IDEA 可能无法很好地工作。我想出了一些简单的脚本来轻松实现这个目标：

```
base_dir=$(pwd)
src_dir=$base_dir/src/main/java
ic_api_cp=$base_dir/target/classes

while read f
do
    clazz=${f//\//.}
    clazz=${clazz/%.java/}
    seruidstr=$(serialver -classpath $ic_api_cp $clazz | cut -d ':' -f 2 | sed -e 's/^\s\+//')
    perl -ni.bak -e "print $_; printf qq{%s\n}, q{    private $seruidstr} if /public class/" $src_dir/$f
done 
```

您保存此脚本，例如`add_serialVersionUID.sh`在您的`~/bin`文件夹中。然后在 Maven 或 Gradle 项目的根目录中运行它，例如：

```
add_serialVersionUID.sh < myJavaToAmend.lst 
```

此 .lst 包含 Java 文件列表以添加以下格式的 serialVersionUID：

```
com/abc/ic/api/model/domain/item/BizOrderTransDO.java
com/abc/ic/api/model/domain/item/CardPassFeature.java
com/abc/ic/api/model/domain/item/CategoryFeature.java
com/abc/ic/api/model/domain/item/GoodsFeature.java
com/abc/ic/api/model/domain/item/ItemFeature.java
com/abc/ic/api/model/domain/item/ItemPicUrls.java
com/abc/ic/api/model/domain/item/ItemSkuDO.java
com/abc/ic/api/model/domain/serve/ServeCategoryFeature.java
com/abc/ic/api/model/domain/serve/ServeFeature.java
com/abc/ic/api/model/param/depot/DepotItemDTO.java
com/abc/ic/api/model/param/depot/DepotItemQueryDTO.java
com/abc/ic/api/model/param/depot/InDepotDTO.java
com/abc/ic/api/model/param/depot/OutDepotDTO.java 
```

此脚本使用 JDK serialVer 工具。当您想要修改大量没有设置 serialVersionUID 的类同时保持与旧类的兼容性时，它是理想的选择。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-02-08T13:01:07.153

将名为“ser”的实时模板添加到另一个组，将其设置为“Applicable in Java: declaration”，并取消选中“Shorten FQ names”。给它一个模板文本：

```
$serial$ 
```

现在编辑变量并将串行设置为：

```
groovyScript("(System.env.JDK_HOME+'/bin/serialver -classpath '+com.intellij.openapi.fileEditor.FileDocumentManager.instance.getFile(_editor.document).path.replaceAll('/java/.*','').replaceAll('/src/','/build/classes/')+' '+_1).execute().text.replaceAll('.*: *','')",qualifiedClassName()) 
```

它采用标准的 Gradle 项目布局。对于 Maven，将 /build/ 更改为 /target/。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-27T04:10:25.383

我正在使用 Android Studio 2.1，通过单击类名称并将鼠标悬停在其上一秒钟，我获得灯泡的一致性更好。

# c# - 调度/队列服务的最佳实践？

> ID：12912289
> 
> 赞同：1
> 
> 时间：2012-10-16T10:10:43.987
> 
> 标签：c#, .net, multithreading, queue

我目前正在做一个项目，这个项目基本上是一个网站，它作为它的主要功能，运行一个很长的计算任务（这个任务由1-10个子任务组成）-（大约需要30-40秒才能完成平均而言）并向用户返回结果，因为它的代码在站点本身中使用了多线程（我不太喜欢这个想法），因此该站点在单击按钮后继续运行，而这个线程在后台继续计算。

理想情况下，我希望将此计算移至单独的服务中，以停止与在 Web 应用程序中运行线程相关的问题。我的想法是它应该是一个单独的服务，每 X 秒运行一次，以查看数据库中是否存在任何作业，如果有，运行它们，但我在编写重复出现的 Windows 服务方面经验不足，想知道是否有人对此事有任何想法，这是执行此类任务的正确方法吗，是否有人有做类似事情的经验，有人可以推荐我应该继续进行的任何特定方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:46:06.587

我正在做一个类似的项目。我正在考虑像您一样创建一项服务，但我没有看到我的案例的好处。我必须进行一些长时间的计算，并将其放入缓存中。我不知道这是否是最佳实践，但我所做的是在 global.asax 上创建一个计时器，执行我的计算并将其放入缓存中。当请求到来时，我给出最后一个缓存的值。

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T11:01:50.310

在这种情况下，我总是更喜欢创建一个接受来自客户端的请求的 tcp 侦听器。如果我使用 .net，我的首选是带有 tcp 或命名管道绑定的 wcf 服务。然后当我收到请求时，我启动一个线程来处理请求。当长时间运行的进程最终结束时，我向客户端返回一个回调，该回调是在对调度程序的第一个请求中指定的 url。恕我直言，这是最好的方法。

但是，您可能希望在 NServiceBus、RhinoBus 等经过验证的框架上构建您的应用程序。您也可以在它们上实现相同的业务。

# asp.net-mvc-3 - 如何禁用“错误值'abc'对IntegerProperty无效”

> ID：12912294
> 
> 赞同：2
> 
> 时间：2012-10-16T10:11:20.113
> 
> 标签：asp.net-mvc-3, validation, setting

我希望有人可以帮助我禁用当我在整数字段中发布字符串值时 MVC 3 运行的默认验证。目前，在执行我们的验证器之前，应用程序会在 ModelState 中添加错误“值 'abc' 对 IntergerProperty 无效”。

我们不使用客户端验证，并且在 Global.asax 中加载了我们自己的验证器。我们只想使用这些验证器来检查输入，并希望禁用此检查。

是否可以禁用此行为？

先谢谢了，

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:49:01.447

我认为您的问题的最佳解决方案是实现自定义模型绑定器以覆盖默认行为，如果您真的希望/需要能够在数字字段中使用 alpha 字符。

# regex - Perl：匹配制表符分隔文件中的确切单词

> ID：12912297
> 
> 赞同：2
> 
> 时间：2012-10-16T10:11:36.193
> 
> 标签：regex, perl, csv

我有一个制表符分隔的文件（包含 2 列），格式如下：

```
ABA-1 (tab)           CDF@
ABA-1 (tab)           EFG
ZYA (tab)             ABA-1 this
EFG that this (tab)   ZYA 
```

我只想匹配 /EFG/ 而不是 /EFG 匹配 this/. 同样，我只想匹配 /ABA-1/ 而不是 /ABA-1 this/。

以下模式不起作用：

```
$line=~ /^(\w*\-?\w*\@?)\t*(\w*\-?\w*\@?)$/ 
```

我曾尝试使用单词边界 (\b)，但它也不起作用。

关于如何解决这个问题的任何想法？任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:41:32.490

您的正则表达式不起作用有几个原因。首先，您的选项卡不能是可选的，否则该行将无法正确拆分。其次，您的模式中没有任何内容可以解释您想要匹配的部分*之后*`that this`的可能字符，即没有任何内容 match 。

您可以通过在每次捕获后添加来解决第一个问题`.*?`（或者，对于第二次捕获，只需删除尾随`$`锚点）。`\t*`只需更改为 即可解决第二个问题`\t`。

此修改适用于您的示例数据

```
$line =~ /^(\w*\-?\w*\@?).*?\t(\w*\-?\w*\@?).*?$/ 
```

但它不是很漂亮！

看起来您只想在制表符或行首之后直接包含所有非空格字符

该程序将该想法编码为正则表达式

```
use strict;
use warnings;

my @data = (
  "ABA-1\tCDF@",
  "ABA-1\tEFG", 
  "ZYA\tABA-1 this",
  "EFG that this\tZYA",
);

for (@data) {
  my @fields = /(?:^|\t)(\S+)/g;
  print "@fields\n";
} 
```

**输出**

```
ABA-1 CDF@
ABA-1 EFG
ZYA ABA-1
EFG ZYA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:21:12.447

```
$line=~ /^(\w+)[^\t]*\t(\w+).*$/ 
```

这将仅捕获 . 之前和之后的第一个单词`tab`。

**更新**： - 如果你想`any non-space`在第一个空格之前匹配字符，那么你可以试试这个模式： -

```
my $line = "ABA-1\tCDF@";
my $line1 = "ZYA \t  ABA-1 this";

if ($line=~ /^([^\s]+)[^\t]*\t\s*([^\s]+).*$/) {    
    print "$1 $2";
}

if ($line=~ /^([^\s]+)[^\t]*\t\s*([^\s]+).*$/) {    
    print "$1 $2";
} 
```

**输出**： -

```
ABA-1 CDF@
ZYA ABA-1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:16:18.390

这将匹配由一行中的单个制表符分隔的两个单词（不包含空格）：

```
$line=~ /^(\w+)\t(\w+)$/ 
```

更新：这将排除任何具有“ABA this”之类的行。但是，也许您只想从“ABA this”中捕获 ABA。这将为您做到这一点：

```
$line=~ /^([A-Z]+)[^\t]*\t([A-Z]+)/ 
```

**更新：**这是新要求的新模式。它匹配每列中的第一个非空白部分。

```
$line=~ /^([^\s]+).*\t\s*([^\s]+)/ 
```

# java - Postgres：连接被拒绝

> ID：12912298
> 
> 赞同：0
> 
> 时间：2012-10-16T10:11:41.640
> 
> 标签：java, postgresql, jdbc, pgadmin

我正在使用 Postgres 9.1.5。JDBC 在第一个实例上运行良好，但是当我再次尝试时它开始拒绝连接。例如，我使用 JDBC 登录到我的 Web 应用程序，工作正常。但是后来，我尝试使用连接来获取其他一些数据，它引发了一个异常：连接被拒绝。我确信我的代码没有任何问题，因为上次运行良好的登录 JDBC 也会引发异常：连接被拒绝。

在我重新启动 postgres windows 服务后它再次工作。然后，登录 JDBC，获取一些数据，然后连接被拒绝。我试过重新安装。我的笔记本电脑有问题吗？

此外，PGAdmin 也遇到了同样的问题。它会运行一些查询，然后开始显示错误消息：Postgres 服务已停止。有什么我可以做的吗？请指教。另外，如果需要任何额外的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:55:27.467

这种行为基本上有两个原因：

1) 您的 postgresql 仅绑定在 127.0.0.1 地址上，您想从其他计算机询问他。在这种情况下，您必须检查 postgresql.conf 文件并检查行开头`listen_addresses`。必须有'*'。或者你可以使用防火墙并且你已经保护了对端口 5432 的访问，这是默认的 Postgresql 端口。

2) 您在文件 pg_hba.conf 中设置了错误的权限。请检查这个文件，它显然有一些注释示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:20:25.050

很难猜测，看起来它可以正常启动，但稍后会遇到问题。在这些情况下，您的第一站应该始终是日志文件。快速检查可能是`max_connections`在配置文件（[此处](http://www.postgresql.org/docs/9.1/interactive/runtime-config-connection.html#RUNTIME-CONFIG-CONNECTION-SETTINGS)的文档）中进行验证，它可能预设为一个低得离谱的值。如果在 pgAdminIII 中单击服务器节点，您也可以在“统计”选项卡下看到所有打开的连接，这可能是某个进程占用了所有可用连接的问题。

另一种确定发生情况的方法是交互式启动 postgres 服务器（即，让它在您启动它的窗口中输出所有消息），如[官方文档中所述](http://www.postgresql.org/docs/9.1/interactive/server-start.html#CLIENT-CONNECTION-PROBLEMS)。

此外，如果您的服务器在 Linux 上运行，ps 可以帮助您，postgres 连接由单独的进程管理，即它们单独出现在 ps 中：

```
ps ax | grep postgres:
....
20528 ?        Ss     0:00 postgres: username dbname clienraddress(48679) idle 
```

# javascript - 使用 FB JS SDK 将操作发布到 facebook 页面的墙上

> ID：12912301
> 
> 赞同：1
> 
> 时间：2012-10-16T10:11:52.183
> 
> 标签：javascript, facebook

我使用纯 FB JavaScript SDK - 大多数东西都是用**FB.login**和**FB.api**完成的。假设我有一个用户授予我“ **publish_actions** ”和“ **manage_pages** ”权限。同一用户已决定他宁愿希望应用程序将操作发布到他的页面墙上，而不是他的私人档案。我也有那个页面的ID。

是否可以使用此设置将操作发布到页面的墙上？使用 FB.api()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:45:37.753

> 是否可以将操作发布到页面的墙上

不可以。Open Graph 操作应该由“真实”的人执行，而不是页面。

从那时起，它们将发布在承担它们的用户的个人资料上。

# ruby-on-rails - Rails：找不到没有 ID 错误的图像

> ID：12912302
> 
> 赞同：1
> 
> 时间：2012-10-16T10:12:00.300
> 
> 标签：ruby-on-rails

我有两个模型，项目和图像。在图像模型 belongs_to :item 下，项目模型有:many :images。

图像模型具有 item_id 属性。

在项目查看器下，我试图显示与每个项目关联的图像。因此，例如，我想将 item_id 1000 的图像显示到 ID 为 1000 的 Item 上。

我得到一个找不到带有 ID 错误的图像。

查看器如下所示：

```
<h1>Listing items - temporary testing page</h1>

<table>
  <tr>
    <th>Brand</th>
    <th>Item title</th>
    <th>Description</th>
    <th>Image link</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @items.each do |item| %>
  <tr>
    <td><%= item.brand %></td>
    <td><%= item.item_title %></td>
    <td><%= item.description %></td>
    <td><%= item.image_id %></td>
    <td><%= image_tag @findimages.small_img %></td>
    <td><%= link_to 'Show', item %></td>
    <td><%= link_to 'Edit', edit_item_path(item) %></td>
    <td><%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' }     %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Item', new_item_path %> 
```

像这样的项目控制器：

```
class ItemsController < ApplicationController
  # GET /items
  # GET /items.json
  def index
    @items = Item.all(params[:id])
    @findimages = Image.find(params[:item_id])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @items }
    end
  end
.
.
. 
```

对菜鸟的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:45:20.467

所以似乎没有带有 params[:item_id] 的图像

1.  使用 @findimages = Image.find(params[:item_id]) 如果 params[:item_id]
2.  在 image.rb 中使用 validates_presence_of :item_id
3.  Item.all(params[:id]) -
    Item.all 的错误 Item.find(params[:id])
4.  您正在使用 :item_id - 没错。接下来你应该在 item.rb 中使用 has_one :image 和在 image.rb 中使用 belongs_to :item。所以你的代码看起来像：

    ```
    def index  
      @items = Item.all 
    ```

并且在视野中

```
<td><%= image_tag item.image.small_img %></td> 
```

UPD：进入 rails 控制台并通过以下方式确保所有图像都有 item_id：

```
Image.where(:item_id => nil) 
```

UPD2：不要将 pgadmin 与 rails 一起使用，rails - 最好的数据库管理工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:21:46.430

改变

```
@findimages = Image.find(params[:item_id]) 
```

到

```
@findimages = Image.find_by_id(params[:item_id]) 
```

参考[`find`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001788)它指出`If no record can be found for all of the listed ids, then RecordNotFound will be raised.`

当没有找到给定 id 的记录时`find_by_id`它将返回哪里`nil`

# javascript - 如何阅读网页中未出现在页面源中的内容

> ID：12912305
> 
> 赞同：1
> 
> 时间：2012-10-16T10:12:10.110
> 
> 标签：javascript, html, css, parsing, webpage

我想用python阅读这个网页

[http://www.hm.com/us/subdepartment/LADIES?Nr=4294962278#Nr=4294962278&size=100](http://www.hm.com/us/subdepartment/LADIES?Nr=4294962278#Nr=4294962278&size=100)

在网页源代码中只有 24 个产品 url (http://www.hm.com/us/product.*)

在网页本身（不是来源）中，我看到超过 24 种产品。

我如何才能阅读所有产品而不仅仅是前 24 个？

它可能与css和url中的参数有关，但我对此知之甚少，如果有人能提供帮助，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:27:21.217

其余的由 javascript 加载，这是客户端，这就是为什么当您查看源代码时除了原始的 24 之外什么都没有，如果您禁用 javascript 然后查看页面，您只会看到第 1 个。

除非有 Python 的 JS 渲染器，否则你可能会不走运？

或者调用与 javascript 相同的页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:40:58.597

您可以使用 Python 的 Selenium WebDriver 绑定并让 WebDriver 访问相关页面，这将使您能够以编程方式访问页面。这是对带有 Python和[文档的](http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html)[WebDriver](http://python.dzone.com/articles/python-getting-started)的一个很好的介绍。

# php - 内爆后如何从字符串中选择每个元素

> ID：12912307
> 
> 赞同：0
> 
> 时间：2012-10-16T10:12:14.303
> 
> 标签：php, arrays, implode

我有一个数组，我将它内爆成一个字符串。现在我如何从该字符串中选择每个元素？

```
$shop['cat2'] = $cat2;
$allstring= implode(",", $cat2)
foreach ($allstring as $each_string_value){
} 
```

这不起作用，因为我收到错误“foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:30:47.403

请使用以下代码`foreach`后，我们无法使用您想要提取数据的每个字符串从字符串中提取数据：`implode`

```
$shop['cat2'] = $cat2;
$allstring= implode(",", $cat2);
$newaray=expolde(',', $allstring);

foreach($newaray as $values) {
    echo $values;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:15:37.180

`foreach`需要一个数组，但您传入的是一个字符串。`$cat2`如果你需要它作为一个数组，你为什么要把它内爆呢？只需使用您的`foreach`，但`$cat2`直接通过：

```
foreach( $cat2 as $each_string_value )
{
    /* … */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:14:31.423

`foreach`只需在循环内使用初始数组：

```
$shop['cat2'] = $cat2;
$allstring = implode(",", $cat2);

foreach ($cat2 as $each_string_value)
{
    // Do your loop stuff here...
} 
```

# c++ - 如何从 C++ 库中正确加载配置文件

> ID：12912309
> 
> 赞同：1
> 
> 时间：2012-10-16T10:12:23.787
> 
> 标签：c++, resources, cmake, shared-libraries

我正在为图像分析任务编写一个小型库，我需要根据存储在文件中的信息初始化一些对象。这些文件随库一起提供。但是，在我的代码中，我不知道引用这些外部配置文件的正确方法。显然我不能参考配置文件的完整路径。但是相对路径似乎也不是一个选项，因为我不确定这个路径是否应该相对于共享库的位置，或者与共享库链接的可执行文件的位置，或者再次是工作目录可执行文件从中启动。目前，我的代码如下所示：

```
void
myImageAnalysisFunctionExportedInASharedLibrary(cv::Mat &input, cv::Mat &output) 
{

   const std::string configurationFile = "resources/analyserConfig.txt";
   Analyser a;
   a.setConfiguration(configurationFile);
   a.analyse(input, output);

} 
```

我正在使用 OpenCV 在 Linux/Windows 环境下使用 C++ 进行编码。我更想要一个不需要参考 Boost 或 Qt 的便携式解决方案。我使用 CMake 作为项目构建环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:00:02.360

关于目录路径，在 Windows 下，从 %APPDATA% 文件夹中放置并读取您的配置文件......最好在那里创建您自己的子文件夹。对于 Linux，使用 $HOME... 再次在那里创建一个子文件夹，最好在它前面加上句点以使其隐藏。这两者都允许应用程序级别的权限，而应用程序安装位置的相对路径不再允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:59:15.833

[使用此链接](http://sidvind.com/wiki/CMake/Configuration_files)中解释的 CMake 配置文件找到了解决方案。

我创建了一个模板配置文件`config.hpp.in`

```
#ifndef CONFIG_HPP
#define CONFIG_HPP

#cmakedefine CLASSIFIER_LOCATION @CLASSIFIER_LOCATION@

#endif 
```

然后我设置文件位置并在我的 CMakeLists.txt 中调用 configure_file：

```
set(CLASSIFIER_LOCATION \"${CMAKE_CURRENT_SOURCE_DIR}/resources/toto.txt\")
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/config.hpp.in ${CMAKE_CURRENT_SOURCE_DIR}/config.hpp) 
```

这创建了一个 config.hpp，其中资源文件位置的完整路径已由 cmake 写出。我只需要在需要的地方包含 config.hpp。示例`config.hpp`Linux

```
#ifndef CONFIG_HPP
#define CONFIG_HPP
#define CLASSIFIER_LOCATION "/home/vieux/workspace/IllustrationDetection/src/dll/resources/toto.txt"

#endif 
```

# c++ - 对 ctor 和 dctor 简单代码的未定义引用

> ID：12912311
> 
> 赞同：2
> 
> 时间：2012-10-16T10:12:27.970
> 
> 标签：c++, gcc, linker, ld

这段简单的代码真的让我很难受，所以任何人都可以向我解释一下可能出了什么问题吗？我有一个简单的 cpp 文件，它使用头文件中包含的类。

库文件

```
namespace tnamespace {    
class base{                                        
    virtual ~base() {};                            
};                                                 
class test/*: public base*/ {                                                                     
    public:                                                                                       

    test();                                                                                       
    test();                                                                                      
};                                                                                                
} 
```

库.cxx

```
#include "lib.h"

namespace tnamespace{                                                                                             
    test::test() {};
    test::~test() {}
} 
```

启动.cpp

```
#include <iostream>
#include <lib.h>

int main() {
    tnamespace::test d;
    return 0;
} 
```

我使用 gcc 版本 4.1.2 20080704 并编译项目

```
g++ start.cpp -I./ext_lib -Wall 
```

得到以下链接器错误

/tmp/ccK2v6GD.o：在函数“主”中：

start.cpp:(.text+0x7a): 未定义对 `tnamespace::test::test()' 的引用

start.cpp:(.text+0x88): 未定义对 `tnamespace::test::~test()' 的引用

collect2: ld 返回 1 个退出状态

我设法找到了解决方案。我忘了编译我的库。正确的 g++ 命令

g++ start.cpp ext_lib/lib.cxx -I./ext_lib -Wall

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:14:32.447

您没有 compile `lib.cxx`，因此不会导出符号。

```
g++ start.cpp lib.cxx -I./ext_lib -Wall 
```

# matlab - 单位平方的几何文件 - MATLAB

> ID：12912314
> 
> 赞同：0
> 
> 时间：2012-10-16T10:12:32.700
> 
> 标签：matlab

我正在尝试在单位正方形上的常规网格上求解 PDE。我找到了常规网格生成器`poimesh`，它似乎可以完成这项工作，但我看不到如何为单位正方形创建几何文件。所以我的问题是：

> 如何在 Matlab 中为单位正方形创建几何文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:56:17.140

要创建单位正方形几何，您可以执行以下操作

```
g='squareg'; % The unit square
[p,e,t]=poimesh(g, nx, ny); 
```

我意识到这并不容易找到。看看例子，例如，[here](http://www.mathworks.se/help/pde/examples/poisson-s-equation-on-rectangular-domain-using-a-fast-poisson-solver.html)

# java - 使用 Java 从 MongoDB 获取随机文档/记录

> ID：12912317
> 
> 赞同：1
> 
> 时间：2012-10-16T10:12:37.673
> 
> 标签：java, mongodb, random

下面我有一些 Java 代码来从集合中获取所有记录/文档

```
 DBCollection collection = database.getCollection("collection");

    BasicDBObject select = new BasicDBObject();
    select.put("title", 1);
    select.put("name", 1);

    String random = JSON.serialize(collection.find(select)); 
```

现在我想从集合中随机获取 10 个文档。

我该怎么做？这可能吗？

我发现了很多其他人的问题，但不是真正的解决方案。我收藏了大约 1500 份文档。速度不是很重要。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:14:28.257

这是给您的提示：**使用随机数嵌入每个文档**（例如，从 0..1 间隔）并**使用范围查询来提取随机文档**。

例如，假设我们有 collection `test`。

在 shell 中，您可以使用随机数嵌入此集合中的每个文档（使用服务器端脚本）：

```
db.eval(
   function(){
      db.test.find().forEach(
         function(obj){
            obj.rnd = Math.random();
            db.test.save(obj);
         })}) 
```

并提取随机文档（这个查询可以简单地翻译成在 java 中使用）：

```
db.test.findOne({"rnd" : {"$gte" : Math.random()}}) 
```

因此，如果您从代码生成文档：在持久化之前，只需**将具有随机值的字段添加到您的文档**中。否则，如果您只能访问集合 -**使用服务器端 js 将每个文档嵌入随机值字段**。

使用简单的循环，您可以根据需要提取任意数量的随机文档，但是当然，您必须处理同一文档多次提取的情况（或者如果没有文档匹配查询）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:07:12.707

我相信您要实现的目标称为*[Systematic Sampling](http://en.wikipedia.org/wiki/Systematic_sampling)*。

这是实现它的一种方法：

```
//...
List<DBObject> result = new ArrayList<DBObject>();
DBCollection collection = database.getCollection("collection");
long count = collection.getCount();
int limit = 10; //or whatever you want

if (count <= limit) {
  DBCursor cursor = collection.find(select);
  while (cursor.hasNext()) {
    result.add(cursor.next());
  }

} else {
  long skip = Math.round((double) count / limit);

  DBCursor cursor = collection.find(select);

  while (result.size() < limit) {
    int offset = (int) ((skip * result.size() + (int) ((Math.random() * skip) % count)) % count);
    System.out.println(offset);
    DBObject next = cursor.skip(offset).next();
    result.add(next);

    cursor = collection.find(select);
  }

} 
```

基本上，如果它们的数量小于所需的限制，它会收集所有文档。如果不是，它会计算等于 N（总计数）/n（您的限制）的跳过。然后计算一个随机偏移量，它总是在 0 和跳过之间，但是考虑了迭代。

例如，如果您有 100 个文档并且想要 10 个随机样本，您将为以下每个存储桶获得一个随机样本：1-10、11-20、21-30、31-40、41-50、51-60 , 61-70, 71-80, 81-90, 91-100。

# serialization - 为什么单点触控中模拟器和 iPad 设备的序列化行为不同？

> ID：12912318
> 
> 赞同：2
> 
> 时间：2012-10-16T10:12:38.937
> 
> 标签：serialization, xamarin.ios

为什么单点触控中模拟器和 iPad 设备的序列化行为不同？我已经声明序列化行为是 UTF-8，但是当将序列化数据从 ipad 设备发送到 WCF 服务时，我跟踪消息，它变为 ascii，为什么？（在模拟器中使用 UTF-8 没问题）

模拟器/中文跟踪：< ?xml version="1.0" encoding="utf-8"? > ...

在 iPad 设备/中文中跟踪：< ?xml version="1.0" encoding="us-ascii"? > ...

顺便说一句，我使用静态方法手动序列化数据：XmlSerialize。

```
 public static string XmlSerialize<T>(T obj)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            XmlSerializer serializer = new XmlSerializer(typeof(T));
            serializer.Serialize(ms, obj);
            ms.Seek(0, SeekOrigin.Begin);
            using (StreamReader reader = new StreamReader(ms, Encoding.UTF8))
            {
                return reader.ReadToEnd();
            }
        }
    }

    public static T XmlDeserialize<T>(string xmlOfObject) where T : class
    {
        using (MemoryStream ms = new MemoryStream())
        {
            using (StreamWriter sr = new StreamWriter(ms, Encoding.UTF8))
            {
                sr.Write(xmlOfObject);
                sr.Flush();
                ms.Seek(0, SeekOrigin.Begin);
                XmlSerializer serializer = new XmlSerializer(typeof(T));
                return serializer.Deserialize(ms) as T;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:02:43.560

您还需要设置`XmlSerializer`使用 utf-8：

```
var serializer = new XmlSerializer(typeof(MyClass));

using (var writer = new StreamWriter("file.path"))
{
  using (var xmlWriter = XmlWriter.Create(writer, new XmlWriterSettings { Indent = false, Encoding = Encoding.UTF8 }))
  {
    serializer.Serialize(xmlWriter, myObject);
  }
} 
```

否则它将使用默认编码，无论发生什么。

# ruby-on-rails - 如何将代码包含到 js.erb 视图中？在轨道 3

> ID：12912320
> 
> 赞同：2
> 
> 时间：2012-10-16T10:12:38.517
> 
> 标签：ruby-on-rails

我有一个使用不显眼的 ajax 的网站。

简而言之，流程是：

*   远程链接
*   由控制器管理的请求
*   js.erb 视图将响应发送回浏览器

我希望我的所有 js.erb 视图都执行类似的“维护活动”，例如在需要时插入 flash 消息、更新 url 等。

我怎样才能使这个干燥？理想情况下，我每次都会使用部分代码来执行，但我找不到如何做到这一点。

我的 js.erb 文件：

```
$("#challenge_actions").html("<%= escape_javascript(render partial: "challenges/best_practice_button")%>");
$("#flash_messages").html("<div id='flash_notice'><%= escape_javascript(flash[:notice])%></div>"); 
```

如何提取带有 flash_messages 的行并将其自动包含在我的所有 js.erb 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:29:21.110

您可以使用 js 布局，就像 html 布局一样。

**布局/custom.js.erb**

```
alert("<%=j flash[:notice] %>");
<%= yield %> 
```

**控制器/your_controller.rb**

```
def your_action

  flash[:notice] = "hello world"
  @hello = "hello world"

  respond_to do |format|
    format.js { render layout: "custom" }
  end
end 
```

**your_action.js.erb**

```
alert("<%= j @hello %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:19:57.157

您也可以在 erb 中使用部分模板，假设您想用 id "container" 替换 div 的内容，然后假设您使用的是 jquery，您可以这样做

```
$('#container').html('<%= escape_javascript(render(:partial => 'mypartial'))%>') 
```

# c# - Excel到SQL的上传操作？

> ID：12912321
> 
> 赞同：0
> 
> 时间：2012-10-16T10:12:40.113
> 
> 标签：c#, sql, excel

我可以使用`c#`.

我的 excel 表和数据表只有 3 列，如`name`, `address`, `phone number`.
我可以使用相同的 Excel 表上传 5 次以上。完成此操作后，我将打开我的 SQL 数据库，它显示 3 个字段不断重复添加同一个表。

我的问题是..

1.  如何避免在同一个表中添加相同的数据。
2.  如何检查插入数据是否已存在于表中？
3.  仅更新表中的特定字段，当我上传 excel 表时，任何一个字段都会发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:22:26.390

Excel 正在这样做。

如果您通过 vba 函数上传数据，它将在 [添加、删除、过滤] 行后刷新。有同样的问题。制作一个 CSV 文件并使用 SQL Coursor 逐行添加数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:51:42.987

首先将数据上传到 temptable ，然后使用

下面的插入语句

插入实际表（Col1、Col2、Col3）

选择 Col1、Col2、Col3

FROM TempTable INNER JOIN ActualTable

ON ActualTable.Col1 = TempTable.Col1

WHERE '如有必要，请提供您的条件'

# asp.net - 如何在中继器内的占位符的 itemtemplate 列中检索下拉列表

> ID：12912324
> 
> 赞同：0
> 
> 时间：2012-10-16T10:12:43.413
> 
> 标签：asp.net

我有一个Repeater 控件，我有一个Placeholder 控件，并且我已经动态地将一个下拉列表添加到placeholder 的itemtemplate 列中。

在Repeater项数据绑定中---

```
 DropDownList ddl = new DropDownList();
                ddl.Attributes.Add("ID", "optionselect");
                ddl.Style.Add("width", "auto");
                ddl.Items.Add(new ListItem("", ""));
                ddl.Items.Add(new ListItem("Add to store", "store"));
                ddl.Items.Add(new ListItem("add to cart", "cart")); 
```

//我要检索下拉列表选择的值

```
 var options = new List<OptionsData>();
            for (int i = 0; i < rptOptions.Items.Count; i++)
            {
        //var ddllist = (DropDownList)rptOptions.Items[i].FindControl("optionselect"); 
```

我在上面的行中没有将对象引用设置为对象的实例.. 请帮助....

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:15:21.847

尝试替换此行：

```
ddl.Attributes.Add("ID", "optionselect"); 
```

和

```
ddl.ID = "optionselect"; 
```

服务器端控件的属性`ID`无论如何都不会连接到该控件的客户端属性集合。

# rspec - 如何在 rspec 1.3.2 中执行控制器规范

> ID：12912331
> 
> 赞同：1
> 
> 时间：2012-10-16T10:13:09.473
> 
> 标签：rspec, ruby-on-rails-2, rspec1

我有一个旧的 rails 应用程序，它在 rails 2.3 中，我想升级到 rails 3。但是在我这样做之前，我想添加一些 rspec 测试。由于它是 rails 2.3，我相信我必须使用 rspec 1.3，这就是我遇到麻烦的地方。

我有一个简单的控制器：

```
class MySimpleController < ApplicationController
   def index
      ...
   end
end 
```

我正在尝试在 spec/controllers/my_simple_controller_spec.rb 下编写成功规范：

```
require 'spec_helper'
describe MySimpleController do
   controller_name 'my_simple' #do i need this?
    it "should get index" do
       get "index"
       response.should be_sucess
    end
end 
```

我得到错误

```
ActionController::RoutingError in 'MySimpleController should get index'
Need controller and action! 
```

我认为我正在描述相同的类名这一事实会起作用。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:43:36.567

我觉得你可以试试这个

```
 describe "GET 'index'" do
    it "returns http success" do
      get :index
      response.should be_success
    end
  end 
```

也不需要写控制器名称和动作。

# php - 在php中对对象数组进行排序

> ID：12912333
> 
> 赞同：0
> 
> 时间：2012-10-16T10:13:23.180
> 
> 标签：php

嗨，我想对一个对象数组进行排序，它是数组的形式，其中包含对象，每个对象都有键、值，我想根据值对对象进行排序，问题是值包含其中有空格的数字之间，有些也是空数字，所以我无法使用 usort 对其进行排序，任何帮助将不胜感激。

这是一个代码片段

```
array(4) {
  [0]=>
  object(stdClass)#308 (2) {
    ["key"]=>
    string(2) "AF"
    ["value"]=>
    string(3) "093"
  }
  [1]=>
  object(stdClass)#306 (2) {
    ["key"]=>
    string(2) "AL"
    ["value"]=>
    string(3) "355"
  }
  [2]=>
  object(stdClass)#304 (2) {
    ["key"]=>
    string(2) "DZ"
    ["value"]=>
    string(3) "213"
  }
  [3]=>
  object(stdClass)#302 (2) {
    ["key"]=>
    string(2) "AS"
    ["value"]=>
    string(5) "1 684"
  } 
```

}

我希望根据值对结果进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:18:29.837

尝试以下操作（我假设您想忽略数字中的空格）：

```
uasort($yourArray, function($a, $b)
    {
        $a->value = str_replace(' ', '', $a->value);
        $b->value = str_replace(' ', '', $b->value);
        return (int)$a->value - (int)$b->value;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:18:06.680

您可以使用

```
usort($list, function ($a, $b) {
    $a = filter_var($a->value,FILTER_SANITIZE_NUMBER_INT);
    $b = filter_var($b->value,FILTER_SANITIZE_NUMBER_INT);
    return ($a == $b) ? 0 : (($a < $b) ? -1 : 1);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:21:06.027

当然你也可以使用 usort，你只需要在比较之前对 usort 比较函数中的值进行预处理。我假设您要删除空格，将空数字视为零，并忽略前导零。假设您的自定义比较函数可能看起来像这样：

```
function my_sort($obja, $objb)
{
   $a = (int)(str_replace(" ", "", $obja->value));
   $b = (int)(str_replace(" ", "", $objb->value));
   if ($a == $b) return 0;
   return ($a > $b) ? -1 : 1;
} 
```

# c# - 具有灵活水平菜单的杂志网站数据库设计

> ID：12912342
> 
> 赞同：8
> 
> 时间：2012-10-16T10:13:48.533
> 
> 标签：c#, asp.net, sql-server, database-design, aspmenu-control

我需要设计一个基于 CMS 的网站，使用 asp.net 网络表单 (c#) 和 MS SQL Server 作为杂志网站的后端数据库，该网站每周都会发行。

样本数据

```
MagazinePages Table
PageID  PageName    LangID  PagePositionNo  PageURL     PageInheritance //PageID 
1           Home        1         10        Default.aspx    0
2           About Us    1         20        Page.aspx       0
3           PageOne     1         10        Page.aspx       2
4           PageTwo     1         20        Page.aspx       2
5           Media           1         30        Page.aspx       0
6           Video       1         10        Videos.aspx     5
8           News        1         40        News.aspx        0
9           Archive     1         50        #               0
10          Publication 1         60        Page.aspx       0
11          SpanishHome 2         10        Default.aspx        0
12          SpanisAboutUs 2       20        Page.aspx   0
------------------------------------------------------------------------------
Magazine
MagazineID  MagazineIssueCode   LangID  MagazineTitle   MagazineLiveIssue(CurrentIssue)
1       1           1   Mag Title       0
2       2           1   Mag Title       1
3       1           2   SpanisgMag Title    0
4       2           2   Mag Title       1
------------------------------------------------------------------------------

News Table
NewsID  NewsTitle   NewsCatID   MagazineID  Language    
1   News one    100     1       1
2   News two    100     1       1
3   news three  200     1       1
4   News four   300     1       1
5   News Five   100     2       1
6   News Six    300     2       1
7   News seven  200     2       2
------------------------------------------------------------------------------ 
```

上述方法的问题是，只有当所有记录都在**MagazinePages**基于上述示例的情况下，我才能创建子菜单我可以为“关于我们”和多媒体创建子菜单我如何设计我的数据库，以便我可以从不同的表中提取数据例如按类别分类的**新闻**（政治、文化......）和**杂志**表中的问题（第 101 期、第 102 期、第 103 期......）

我打算为此使用 ASP 菜单控件，这可能不是很灵活，因为我将有超过 100 期杂志如何或哪个多列菜单可以与 asp.net 一起使用

我的数据库可能有很多流程，我会很感激这方面的帮助，以便我可以将这个数据库用于这个 CMS 系统。如果对此有任何疑问，请随时提出问题。

**补充**：如果我需要从`MagazinePages`表中提取所有菜单名称，这很容易，但我被要求有一个菜单结构，如示例所示。问题是我可以为`AboutUs`& `Multimedia`from `MagazinePages`Table 生成菜单，但我没有任何页面，如 Politics，Economic，... Issue 101, 102, 103.. 在此表中，因为该信息存储在不同的表中，如`News Category`新闻表和`Magazine`表中的问题。我宁愿改变我的表格设计并使其灵活地从单独的表格中读取菜单信息，但我不确定如何

此架构中未显示新闻表。

我所做的是我为 CMS 页面创建了 ps_Pages 表，例如 Home、Aboutus、Contact、MediaCentre .....

我将与杂志相关的页面（实际上是具有不同类别或标签的文章，如文化、政治、体育、人物......）存储在`art_Article`表格中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:41:12.680

为什么不使用单个页面来处理内容？

打电话`Page.aspx?Issue=4&Page=4`

然后在您的代码中，您知道这是第 4 个问题并且他们想要第 4 页，然后您可以在 Page.aspx（.vb 或 .cs）中有代码，它会翻译然后决定布局。

所以例如

```
Page.aspx?Issue=4&Style=Article&Content=5 
```

所以在代码中你可以去，好吧，问题 4 获取问题 4 的数据库条目，好吧，他们想要问题 4 中的内容 ID 5，然后放入文章的样式。

这意味着您不必在数据库类型中添加额外的页面，您只需根据需要添加内容，生成 URL 以访问内容的项目只需要显示所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T23:15:08.563

我认为您需要重新评估您的数据库架构。例如，我会有一个名为“ParentMenuItems”的表

此表将包括所有顶级菜单项（主页、关于我们、问题等），并包含子菜单的文本。然后你需要有一个与你的父菜单项有关系的 ChildMenu 表。

```
ParentMenuItems:
==============================================================
ID       | LinkText      | LangID     | Other Properties
==============================================================
1        | Home.aspx     | 1          | blah blah blah
2        | AboutUs.aspx  | 2          | blah blah blah 
```

然后，您可以有另一个名为“ChildMenuItems”的表，如下所示：

```
ChildMenuItems:
===============================================================
ID   | LinkText       | LangID |  ParentID  | Other Properties...
===============================================================
1    | PageOne.aspx   | 1      | 2          | blah blah blah
2    | PageTwo.aspx   | 2      | 2          | blah blah blah 
```

代码可以这样工作：

```
SELECT * FROM ParentMenuItems - //SQL to get Items 
```

然后，编写一些 foreach 代码来枚举 SQL 结果

```
foreach(var ParentMenuItem in ParentMenuItems)
{ 
    //Get ParentMenuItem ID, run SQL select on child menu items, Example:
    //SELECT * from ChildMenuItems where ParentID = ID.FROM.PARENT.RESULT
    // Now you have all the child menu items, foreach those and add to repeater control
} 
```

我希望这有帮助。如果您有任何问题，请告诉我。

提示：Entity Framework 将对此进行非常轻松的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T04:53:23.313

为菜单创建一个表

```
CREATE TABLE [dbo].[tblMenuMaster](
[MenuID] [int] IDENTITY(1,1) NOT NULL,
[MenuName] [varchar](100) NULL,
[DisplayOrder] [int] NULL,
PRIMARY KEY CLUSTERED 
(
[MenuID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

为子菜单创建另一个表

```
CREATE TABLE [dbo].[tblSubMenuMaster](
[SubMenuID] [int] IDENTITY(1,1) NOT NULL,
[MenuID] [int] NULL,
[SubMenuName] [varchar](100) NULL,
[MainMenuDisplayOrder] [int] NULL,
[DisplayOrder] [int] NULL,
[SubMenuUrl] [varchar](500) NULL,
[VisibleInMenu] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
[SubMenuID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

现在转到母版页.. HTML 代码是：

```
 <div class="menubar">
        <%--<ul class="tabs">--%>
        <asp:Literal ID="ltMenus" runat="server"></asp:Literal>
        <%--</ul>--%>
    </div> 
```

代码背后的代码是：

```
private void GenerateMenus()
{
    clsMenu obj = new clsMenu();
    System.Data.DataSet ds = new System.Data.DataSet();
    String PageName = "";
    PageName = Path.GetFileName(Page.AppRelativeVirtualPath);
    ds = obj.GetMenusByRole(GetRoleId(), PageName);

    StringBuilder sb = new StringBuilder("<ul class='tabs'>");

    foreach (System.Data.DataRow row in ds.Tables[0].Rows)
    {
        sb.Append(String.Format("<li class='{0}'><a rel='{1}' href='{1}' > {2} </a> ", Convert.ToString(row["css"]), ResolveUrl(Convert.ToString(row["PagePath"])), Convert.ToString(row["MenuName"])));
        //sb.Append(String.Format("<li '><a rel='{0}' href='{0}' > {1} </a> ", ResolveUrl(Convert.ToString(row["PagePath"])), Convert.ToString(row["MenuName"])));

        System.Data.DataTable t = CCMMUtility.GetFilterDataforIntColumn("MenuID", Convert.ToString(row["MenuID"]), ds.Tables[1]);
        if (t.Rows.Count > 0)
        {
            sb.Append("<ul>");

            for (int i = 0; i < t.Rows.Count; i++)
            {
                sb.Append(String.Format("<li><a href='{0}' class='dir' style='cursor: pointer;'>{1}</a></li>", ResolveUrl(Convert.ToString(t.Rows[i]["PagePath"])), Convert.ToString(t.Rows[i]["PageAliasName"])));
            }

            sb.Append("</ul>");
        }
        sb.Append("</li>");
    }

    sb.Append("</ul>");

    ltMenus.Text = sb.ToString();

} 
```

它需要存储过程来根据角色 ID 调用菜单的动态，如下所示

```
CREATE PROCEDURE [dbo].[proc_GetMenusByRole]
(
@RoleId int,  
@PageName varchar(100)
)
AS
SET NOCOUNT ON;
SELECT mm.MenuID, mm.MenuName,dbo.Extract_CssNameForMenuByMenuIDAndPageName(mm.MenuID, @PageName) as css
,dbo.proc_Extract_MenuPageByRoleIDAndMenuID(@RoleId, mm.MenuID)
as PagePath , mm.DisplayOrder   FROM tblMenuMaster mm WHERE mm.MenuID IN (SELECT s.MenuID from tblSiteRolePermissions p INNER JOIN
tblSitePages s ON p.fkSitePageId = s.pkSitePageId
WHERE (p.fkRoleId = @RoleId and p.ViewOnly=1))   
Union All   
select 0 as menuid ,'Change Password' as MenuName,  
case @pagename   
when 'ChangePassword.aspx' then 'active'  
else ''  
end  as css,'~/User/ChangePassword.aspx' as PagePath, 10000 as Displayorder  
ORDER BY DisplayOrder     
SELECT s.MenuID, s.pkSitePageId, s.PageAliasName, s.SitePageName,s.pagepath from tblSiteRolePermissions p 
INNER JOIN tblSitePages s ON p.fkSitePageId = s.pkSitePageId  WHERE (p.fkRoleId =@RoleId and p.ViewOnly=1) ORDER BY s.pkSitePageId 
```

//新的sp从这里开始

```
CREATE function [dbo].[Extract_CssNameForMenuByMenuIDAndPageName](@MenuID int, 
PageName varchar(100))
returns nvarchar(50)
as begin      
declare @result nvarchar(50) 
set @result = ''    
IF EXISTS (SELECT pkSitePageId FROM tblsitepages WHERE (MenuID = @MenuID) AND (UPPER(SitePageName) = @PageName)) 
 BEGIN    
  SET @result = 'active'    
 END    
return @result    
end 
```

// 另一个使用的 sp 是

```
CREATE function [dbo].[proc_Extract_MenuPageByRoleIDAndMenuID]
(@RoleId int, @MenuID int)
returns nvarchar(500) 
as begin          
declare @result nvarchar(500)
SELECT top 1 @result = s.pagepath FROM tblSitePages AS s INNER JOIN tblSiteRolePermissions AS p ON s.pkSitePageId = p.fkSitePageId
WHERE (p.fkRoleId = @RoleId) AND (s.MenuID = @MenuID)  and p.ViewOnly=1
ORDER BY s.pkSitePageId 
return  @result
end 
```

它只是一种方法，您可以根据您的要求对其进行修改............

**proc_Extract_MenuPageByRoleIDAndMenuID** sp 用于获取页面名称及其路径，

**Extract_CssNameForMenuByMenuIDAndPageName** sp 用于将**活动**类设置为第一个**li**表示第一个菜单。跳这会帮助你.....它的工作代码..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T02:49:41.567

我不确定我是否理解您的需求，但我假设您想为整个系统创建一个菜单，而不是为每本杂志创建一个菜单，对吧？

如果是这样，我认为您正在寻找错误的问题：问题不是数据库模式，而是您的菜单应该由 N 个没有预定义标准的不同表自动填充的概念。

我会创建一个菜单表 - 并使杂志页面和菜单成为两个不同的表：如果您正在创建一个类似 CMS 的系统，您可能会有一个页面，我可以在其中编辑类别、问题和 - 为什么不 - 菜单条目，完全分开从任何其他表。

另外，我会创建一个“标签”系统，我的所有新闻和问题都可以被“标记”，而不是放在一个专有类别中。有可能同时谈论政治和文化的新闻。然后，您将使用 content.aspx?tag=politics，而不是将用户引导到许多不同的 pages.aspx。创建标签时，我可以选择将此标签添加到菜单表的“新闻”、“问题”等下。类别和问题也是如此。

如果它不符合您的需求，您可以尝试这些选项 - 但除菜单条目的特定表之外的所有其他解决方案都会在我的大脑中引发“警告，检测到未来问题”：

1 - 创建一个菜单表，一个存储过程，它通过遵循特定规则填充此表，然后触发诸如“类别”之类的表，该表将截断并调用存储过程，每次内容更改时都重写菜单（对我来说听起来像是一个快速修复)

2 - 向杂志页面添加“submenu_table”、“submenu_field”、“submenu_condition”等，并使用动态 sql 选择数据（类似`Set @SQL='Select '+ submenu_field + ' from '+ submenu_table + ' where ' + submenu_condition; Exec(@SQL)`）（另一个快速修复，繁重且可能很慢的查询）

（编辑：） 3 - 在 sql 2008 及更高版本中还有 hierachyId 字段（[http://blogs.msdn.com/b/manisblog/archive/2007/08/17/sql-server-2008-hierarchyid.aspx]）[1](http://blogs.msdn.com/b/manisblog/archive/2007/08/17/sql-server-2008-hierarchyid.aspx)

# ruby-on-rails - cancan 无法识别读取操作并拒绝消息

> ID：12912343
> 
> 赞同：0
> 
> 时间：2012-10-16T10:13:53.790
> 
> 标签：ruby-on-rails, cancan

我有路线.rb：

```
resource :account, :only => [:show, :update] 
```

在我的能力.rb中，我有

```
can :read, Account, :id => user.account_id 
```

我在 AccountsController 中定义了 def update 和 def show 函数

当我对 /account 执行 GET 请求时，此配置给了我 403，访问被拒绝错误。但是，如果我将ability.rb 更改为

```
can :manage, Account, :id => user.account_id 
```

它工作正常。为什么我的 :show 函数没有映射到 :read 的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:48:07.720

好吧，我知道问题出在哪里了。所以交易是我打电话给康康的授权！对我的代码进行一些限制，我正在传递类似的东西

```
authorize!("show", @class_obj) 
```

但实际上 CanCan 需要一个符号，所以正确的调用应该是

```
authorize!(:show, @class_obj) 
```

可以这样实现：

```
authorize!("show".intern, @class_obj) 
```

# java - Java教程，这个程序包含一个错误，但我找不到它

> ID：12912345
> 
> 赞同：0
> 
> 时间：2012-10-16T10:14:02.180
> 
> 标签：java

该程序符合但无法成功运行，我无法找到错误。

```
public class Q1 {
    public static void main(String[] args) {
        StringBuffer[]stringBuffers = new StringBuffer[10];

        for(int i =0; i< stringBuffers.length;i++){
            stringBuffers[i].append("StringBuffer at index " + i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:15:00.900

你没有初始化你的`stringbuffers`.

你应该有类似的东西

```
for(int i =0; i< stringBuffers.length;i++){
   stringBuffers[i] = new StringBuffer(); 
```

或者

```
for(int i =0; i< stringBuffers.length;i++){
   stringBuffers[i] = new StringBuffer("StringBuffer at index " + i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:18:08.400

您需要初始化 StringBuffer：

```
public class Q1 {
public static void main(String[] args) {
    StringBuffer[]stringBuffers = new StringBuffer[10];

    for(int i =0; i< stringBuffers.length;i++){
        stringBuffers[i]= new StringBuffer();
        stringBuffers[i].append("StringBuffer at index " + i);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T14:43:11.923

在声明中：

```
StringBuffer[]stringBuffers = new StringBuffer[10]; 
```

您刚刚创建了一个包含 10 个元素的数组。但是您没有在其中放入任何元素。此数组中的每个元素仍然是空的，并且默认情况下包含`null`.

所以当你打电话

```
stringBuffers[i].append("StringBuffer at index " + i); 
```

这里 `stringBuffers[i]`仍未初始化并*指向`null`.*

所以它给`java.lang.NullPointerException.`

如其他答案所述，如果您这样做：

```
for(int i =0; i< stringBuffers.length;i++){
   stringBuffers[i] = new StringBuffer(); 
```

*这将使用对 StringBuffer 对象的引用*初始化 stringBuffer 数组的每个元素。所以stringBuffer[i] 现在不为空。

* * *

顺便说一句，您应该使用 StringBuilder。StringBuffer 和 StringBuilder 都提供可变字符串。仅当您的应用程序在多线程环境中运行时才使用 StringBuffer，因为它会引入性能开销

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:17:34.240

您需要`StringBuffer`使用所需的字符串初始化数组中的对象：-

```
for(int i =0; i< stringBuffers.length;i++){
    stringBuffers[i] = new StringBuffer("StringBuffer at index " + i);

} 
```

# c# - VS 2010 Crystal Report 应用程序仅返回第一个生成的报表的数据

> ID：12912348
> 
> 赞同：0
> 
> 时间：2012-10-16T10:14:12.127
> 
> 标签：c#, crystal-reports

我面前有一个我刚开始研究的 Crystal Reports 项目。它最初是在 Visual Studio 2005 中完成的，现在正在转换为 Visual Studio 2010。2005 年使用了合并模块，据我了解，2010 年的方法有点不同。

经过一番摆弄后，我得到了它的编译和安装程序来打包应用程序。一切似乎都运行良好，但后来我注意到我只在报告中填充了我生成的第一个报告的数据。之后他们都空了。我必须重新启动应用程序才能再次获取报告中的数据。该应用程序使用来自 Code Project 的[Crystal Reports Helper 类](http://www.codeproject.com/Articles/15024/Crystal-Reports-helper-class)，该类处理数据绑定等。

任何人都使用过这个类或知道它是否可能是 Crystal Reports 本身中的某些东西导致了这个问题？该应用程序正在使用*Crystal Report Viewer*控件。

# linux - sed - 批量“键=值”替代

> ID：12912357
> 
> 赞同：0
> 
> 时间：2012-10-16T10:14:38.267
> 
> 标签：linux, bash, sed, substitution

我正在开发一个函数来执行多个`key=value`替换`sed`：

```
batch_sub () {
    local file="${@: -1}" # Last argument is file to be changed.
    [[ -w "${file}" ]] || { echo "Invalid file: ${file}" ; return 1 ; }
    for arg in "${@}" ; do
        [[ $arg =~ (.*)=(.*) ]] || continue
        # 'trim_str' will trim leading & trailing spaces.
        local key=$(trim_str "${BASH_REMATCH[1]}")
        local value=${BASH_REMATCH[2]}
        sed -i 's@'"\(${key}"' *=\).*@\1'"${value}"'@' "${file}"
    done
} 
```

这个函数接受如下参数：

```
batch_sub "a = x" "b = y" "c = z" "a.b.d.e=udp://b:8080" "/tmp/file" 
```

并且工作正常。但我想要的是让它接受这样的论点：

```
batch_sub "a = x b = y c = z a.b.d.e=udp://b:8080" "/tmp/file" 
```

此外，如果`sed`在这个函数中只调用一次就好了：

```
sed -i -e 's/$key=/\1$value/'
       -e 's/$key1=/\1$value1/'
       '/tmp/file' 
```

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:58:51.080

> > 如果 sed 在这个函数中只被调用一次就好了

您可以一次调用 sed 进行多次替换。例如

sed -i 's/a/b/;s/p/q/'

因此，从所有参数中，生成一个包含所有替换的字符串，然后一劳永逸地调用 sed。

> > 但我想要的是让它接受像这样的参数
> > batch_sub "a = xb = yc = z abde=udp://b:8080" "/tmp/file"

为什么？
“a = xb = yc = z abde=udp://b:8080” 在我看来是模棱两可的。
至少尝试为对设置某种分隔符，例如
"a = x; b = y; c = z; abde=udp://b:8080"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:49:09.880

这可能很疯狂。但是使用您设置的要求可能是这样的:)

```
#!/bin/bash

declare -r self=${0##*\/}

# Left and right trim
trim_str()
{
    local tmp="${1##[[:space:]]}"
    printf "%s" "${tmp%%[[:space:]]}"
}

# Replace \ with \\, / with \/, & with \&
sed_esc_repl()
{
    local tmp="${1//\\/\\\\}"
    tmp="${tmp//\//\\/}"
    tmp="${tmp//&/\&}"
    printf "%s" "$tmp"
}

# Additional escape on search pattern
# escape *.][|
sed_esc_key()
{
    local tmp=$(sed_esc_repl "$1")
    tmp="${tmp//./\.}"
    tmp="${tmp//\*/\*}"
    tmp="${tmp//|/\|}"
    tmp="${tmp//[/\[}"
    tmp="${tmp//]/\]}"
    printf "%s" "$tmp"
}

batch_sub()
{
    local file=""
    local -a argv
    local key=
    local val=
    local sedstr=""
    local old_ifs=$IFS

    if (( $# < 2 )); then
        printf "Usage: $self \"replacement pairs\" <file>\n"
        return 1
    elif (( $# > 2 )); then
        file="${@: -1}"
        argv=( "${@:1:$(($#-1))}" ) # Everything but last arg
    else
        file="$2"
        argv=( "$1" )
    fi

    [[ -w "${file}" ]] || { printf "Invalid file: %s\n" "${file}"; return 1; }

    # Set IFS  to match space and equal sign.
    IFS='='' '
    for arg in ${argv[@]}; do
        if [[ "$key" != "" ]]; then
            sedstr+="s/\("$(sed_esc_key "$key")"\) *=.*/\1="$(sed_esc_repl "$arg")"/g;"
            key=
        else
            key="$arg"
        fi
    done
    IFS="$old_ifs"

    printf "sed string:\"%s\"\n\n" "${sedstr%%;}"

    sed -i "${sedstr%%;}" "$file"
}

# Create example / test file:
printf "\
x[a-zA-Z].*? = mixture1
x[a-zA-Z].*p? = mixture2
x = foo
b*x = fafa
a\\\\1c = moo
a.b$.d.e=zim zala bim
" > tst

batch_sub "$@"

exit $? 
```

通过即运行：

> ./keysw "x[a-zA-Z].*p? = xb*x = ya\1c = \z\n\1 ab$.de=udp&://b:\8080" tst && cat tst

或者

```
./keysw "x[a-zA-Z].*p? = x" \
        "b*x = y" \
        "a\1c = \z\n\1" \
        "a.b$.d.e=udp&://b:\8080" \
        tst && cat tst 
```

给予；

文件：

```
x[a-zA-Z].*? = mixture1
x[a-zA-Z].*p? = mixture2
x = foo
b*x = fafa
a\1c = moo
a.b$.d.e=zim zala bim 
```

结果：

```
x[a-zA-Z].*? = mixture1
x[a-zA-Z].*p?=x
x = foo
b*x=y
a\1c=\z\n\1
a.b$.d.e=udp&://b:\8080 
```

# powershell - 在不使用自定义 AMI 的情况下自定义 EC2 Windows 实例

> ID：12912362
> 
> 赞同：3
> 
> 时间：2012-10-16T10:14:42.713
> 
> 标签：powershell, amazon-ec2, amazon-web-services, amazon-cloudformation

我们目前正在使用“负载平衡模板”部署时基于 AWS Toolkit for Visual Studio 创建的模板设置 CloudFormation 堆栈。我们需要创建一个脚本来稍微定制 EC2 实例。更具体地说，我们想要： 1\. 将两个证书安装到证书存储中。2\. 配置 IIS 以使用其中一种证书。3\. 在 IIS 上启用 TLS 1.2。

我们需要在 IIS 上而不是负载均衡器上安装这些证书，因为我们需要支持客户端证书身份验证。

我们希望在不必创建自定义 AMI 的情况下实现这一点，因为我们希望能够在新版本到来时轻松更新 AMI。我们正在使用以下内容：ami-f6803f9f（这是模板使用的默认值）。

因此，我们希望将这些自定义作为 CloudFormation 模板的一部分。我尝试使用模板的“AWS::CloudFormation::Init”部分创建一个简单的文件（只是为了确保脚本有效）。但是，当我启动堆栈时，文件永远不会被创建。应该创建文件的模板部分如下所示：

```
 "Metadata" : {
    "AWS::CloudFormation::Init" : {
      "config" : {
      "files" : {
        "C:/ClientCA.pfx" : {
          "content" : { "Fn::Join" : ["", [
            "test1\n",
            "test2\n"
            ]]}
        }
      }
    }
  }
} 
```

因此，我的问题是： 1\. 为什么没有创建文件？是因为模板有问题还是这个 AMI 不支持这些类型的初始化脚本？2\. 我们计划使用“AWS::CloudFormation::Init”从 S3 下载证书，并使用我们添加到 UserData 的 PowerShell 脚本安装它们。这是一个好方法还是我们应该采取不同的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:38:56.110

我刚刚使用当前的 Windows Server 2012 AMI 测试了您的代码段，它运行良好。因此，我最好的猜测是它`ami-f6803f9f`已经是一个自定义 AMI（至少我在任何官方的地方都找不到它）并且缺乏[使用 AWS CloudFormation 部署应用程序](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/deploying.applications.html)所需的编排（这是 Unix/Linux 的一般解释，请参阅[引导 AWS CloudFormation Windows](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-windows-stacks-bootstrapping.html)面向 Windows 的简短示例的[堆栈）：](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-windows-stacks-bootstrapping.html)

> AWS CloudFormation 包括一组基于 cloud-init 的帮助应用程序（**cfn-init**、cfn-signal、**cfn-get-metadata**和 cfn-hup）。这些帮助应用程序不仅提供类似于 cloud-init 的功能，还允许您在实例和应用程序启动并运行后更新元数据。[...] *[强调我的]*

强调的应用程序是那些负责读取模板中定义的元数据并对其进行操作的应用程序，即`C:/ClientCA.pfx`在您的示例中创建。这些帮助应用程序现在包含在所有当前由[Amazon EBS 支持的 Windows Server 2012 RTM AMI](https://aws.amazon.com/search?searchQuery=%22Windows%20Server%202012%22&searchPath=amis&x=0&y=0)中，但通常不包含在由[Amazon EBS 支持的 Windows Server 2008 R2 AMI](https://aws.amazon.com/search?searchQuery=%22Amazon%20EBS-Backed%20Windows%20Server%202008%20R2%22&searchPath=amis&x=0&y=0)中，除了专用的应用程序，如[Amazon EBS 支持的 Windows Server 2008 R2英语 64 位 - CloudFormation 基础](https://aws.amazon.com/amis/microsoft-windows-server-2008-r2-base-cloudformation)。

显然，您也可以在自定义 AMI 上安装这些[CloudFormation 帮助程序脚本](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-helper-scripts-reference.html)并从那里继续，但如果您没有任何具体理由这样做，我强烈建议您从当前的[Amazon EBS 支持的 Windows Server 2012 RTM AMI](https://aws.amazon.com/search?searchQuery=%22Windows%20Server%202012%22&searchPath=amis&x=0&y=0)开始，它提供了这些和一些其他同样需要的开箱即用的管理生产力组件（例如[Windows PowerShell 3.0](http://technet.microsoft.com/en-us/library/hh857339.aspx)和用于 Winodws PowerShell 的新[AWS 工具](http://aws.amazon.com/powershell/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T05:20:38.190

老问题 - 但我提示未创建文件的原因是 cloudformation 脚本未执行 cfn-init。

关键部分是确保您已更新用户数据脚本......

```
 "UserData" : { "Fn::Base64" : { "Fn::Join" : ["", [
                "<script>\n",
                    "powershell.exe add-windowsfeature web-webserver -includeallsubfeature -logpath $env:temp\\webserver_addrole.log \n",
                    "powershell.exe add-windowsfeature web-mgmt-tools -includeallsubfeature -logpath $env:temp\\mgmttools_addrole.log \n",
                    "cfn-init.exe -v -s ", {"Ref" : "AWS::StackId"}, " -r WebServerLaunchConfiguration --region ", {"Ref" : "AWS::Region"}, "\n",
                "</script>\n",
                "<powershell>\n",
                    "new-website -name", {"Ref" : "Name"}, " -port 80 -physicalpath c:\\inetpub\\", {"Ref" : "Name"}, " -ApplicationPool \".NET v4.5\" -force \n",
                    "remove-website -name \"Default Web Site\" \n",
                    "start-website -name ", {"Ref" : "Name"}, " \n",
                "</powershell>" 
```

上面的脚本添加了 Web 服务器功能、管理工具，然后启动了 cfn-init。cfn-init 负责解析元数据。

在我的 Kloud 博客上有[更多关于在 AWS 上引导 IIS的详细信息。](http://blog.kloud.com.au/2013/08/05/bootstrapping-on-aws/ "AWS 引导 IIS")

# sql - 从字符串转换日期和/或时间时转换失败

> ID：12912363
> 
> 赞同：2
> 
> 时间：2012-10-16T10:14:45.493
> 
> 标签：sql, sql-server, sql-server-2008

为什么这个说法会成功？

```
 SELECT CAST('08:50' as time) 
```

但是这个失败了？`tmrec`是一个 nvarchar(6) 列并且包含相同的值`'08:50'`。自从过去 1 小时以来，这让我发疯了。

```
 SELECT   TOP 1 CAST(tmrec as time) 
    FROM     Instr 
    WHERE    igrp = 'JD' 
    ORDER BY ino , smallin 
```

[此屏幕截图](http://postimage.org/image/f5wtcbr91/)显示了第一个查询的结果。它包含 08:50。然而第二个查询抛出错误。

**编辑：**

即使这样也不能保证转换仅应用于获取的记录：

```
 SELECT CAST( tmrec as time)
    FROM
         (
            SELECT TOP 1 tmrec
            FROM   [ccwise-courts].[dbo].[INSTR]
            WHERE  igrp = 'JD' 
            ORDER BY ino , smallin
         ) v 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:17:15.453

通常，要查找不良数据，可以使用如下查询：

```
SELECT TOP(100) '-->' + REPLACE(tmrec, ' ', '*') + '<--bad'
FROM Instr
WHERE ISDATE(tmrec) = 0 
```

如果您**仍然**无法弄清楚，您可以列出所涉及字符的特定 ASCII 代码（这里我每个问题最多 6 个）：

```
SELECT TOP(100) '-->' + REPLACE(tmrec, ' ', '*') + '<--bad',
  Char1 = ascii(substring(tmrec,1,1)),
  Char2 = ascii(substring(tmrec,2,1)),
  Char3 = ascii(substring(tmrec,3,1)),
  Char4 = ascii(substring(tmrec,4,1)),
  Char5 = ascii(substring(tmrec,5,1)),
  Char6 = ascii(substring(tmrec,6,1))
FROM Instr
WHERE ISDATE(tmrec) = 0 
```

在应用 WHERE 过滤器之前，有这个[Connect 项](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)在 SELECT 子句上处理 SQL Server 处理 CAST。为了克服这个问题，正如 bug 报告中所指出的，您可以使用 CASE 语句：

```
CAST(CASE WHEN ISDATE(tmrec)=1 THEN tmrec END as time) 
```

# linux - Linux Kernel 中是否有用于在内核空间中的两个字符设备之间直接复制数据的模块？

> ID：12912365
> 
> 赞同：3
> 
> 时间：2012-10-16T10:14:53.733
> 
> 标签：linux, module, serial-port, kernel, multiplexing

我们需要将数据从一个（USB）串行设备多路复用到多个独立的串行设备。
我发现的是模块[fanout](http://linuxgazette.net/122/smith.html)，它解决了我的问题的多路复用部分。

现在我正在寻找一种简单的、可能随时可用的方法，将数据从串行 USB 设备直接复制到内核空间中的**扇出设备。**
当然，我可以简单地`cat x > y`在用户空间中进行，但在内核空间中执行此操作可能更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:18:39.447

您可以使用使用**socketpair**创建的[匿名 Unix Domain Socket](http://en.wikipedia.org/wiki/Unix_domain_socket)。满足您的所有条件（并且速度很快）。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:17:29.800

如果你有一个管道，试试[`splice_pipe_to_pipe`](http://lxr.linux.no/linux+v3.6.2/fs/splice.c#L1802)或`link_pipe`。

（顺便说一句，新的[`tee`系统调用](http://lwn.net/Articles/118750/)可以替换扇出模块。它已经内置了！）**

# php - JPlayer 媒体文件访问

> ID：12912368
> 
> 赞同：1
> 
> 时间：2012-10-16T10:15:00.310
> 
> 标签：php, jplayer

我正在开发音乐门户网站，音乐家可以上传他的音乐。音乐下载通过付款流程。我正在使用 JPlayer 播放音乐。

在`jplayer`任何人都可以通过查看源代码和直接下载文件来查看音乐文件的路径。

如何防止文件直接访问。我尝试通过`.htaccess`但无法播放音乐。

为什么它不起作用

```
RewriteEngine on 

RewriteCond %{HTTP_REFERER} !^http://(www\.)?abc.com/trakvanapp/ [NC] 

RewriteCond %{HTTP_REFERER} !^http://(www\.)?abc.com/trakvanapp/.*$ [NC] 

RewriteRule \.(mp3)$ - [F] 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:44:37.953

该文件需要可公开访问才能在 jPlayer（或任何其他 HTML5 音频播放器）中播放。重写规则不会有多大好处，因为这样文件仍然可以从重写的 url 访问（或者如果不是，它不会与 jplayer 一起工作）。

我能想出的最佳解决方案是隐藏脚本中的文件名 - 技术含量非常低，但它将阻止 99.9% 的用户发现直接 url。很多人好奇地查看源代码并寻找链接，但如果它比这更复杂，大多数人都不会打扰。

所以对于[http://example.com/randomdirectoryname123/123random/mysong.mp3](http://example.com/randomdirectoryname123/123random/mysong.mp3)的文件，我使用：

```
var p1="http://";
var p3="randomdirectoryname123";
var p2="example";
var p4="123random";
var thefile="mysong";
var thelink = p1  + p2 + ".com/" + p3 + "/" + p4 + "/" + thefile + ".mp3";

...

$(this).jPlayer("setMedia", {
            mp3:thelink
        }); 
```

显然，这不是传递文件的实际安全方法——只是更好地向 Joe Blow 隐藏其位置。

# php - 提交表格问题

> ID：12912369
> 
> 赞同：1
> 
> 时间：2012-10-16T10:15:01.580
> 
> 标签：php, javascript

有这样的表格：

```
 <form name="myform" action="All.php" method="get">
 <input type='text' id='tx' name='tx' value=''>
 <td height="8" align="right" valign="middle"><a href="javascript: submitform('All')">All Cities</a> | <a href="javascript: submitform('Newyork')">Newyork</a> | <a href="javascript: submitform('Police')">Police</a></td></form>

<script type="text/javascript">
function submitform(val)
{
$("#tx").val(val);
document.myform.submit();
}
</script> 
```

在 All.php 中：

```
 <form method="get" action="index1.php" id="frm1">
 <select id="category" onchange="showSelected1();" style="width:150px">
 <option></option>
 <option value="1" <?php if($_GET["categoryText"] == "Marriages") echo "selected"; ?> >Marriages</option>
 <option value="2" <?php if($_GET["categoryText"] == "Birthdays") echo "selected"; ?> >Birthdays</option></select>
 <input type="hidden" id="categoryText" name="categoryText" value='<?= $_GET['categoryText']; ?>'/>

<select id="city" onchange="showSelected();" style="width:150px">
<option><?= $_GET['tx']; ?></option>
<option></option>
<option value="1" <?php if($_GET["cityText"] == "Newyork") echo "selected"; ?> >Newyork</option>
<option value="2" <?php if($_GET["cityText"] == "Police") echo "selected"; ?> >Police</option></select>
<input type="hidden" id="cityText" name="cityText" value='<?= $_GET['cityText']; ?>'/>
<input type="button" value="Submit" onclick="formSubmit()"/></form>
<script language="JavaScript" type="text/javascript">
<!--
function showSelected()
{
var selObj = document.getElementById('city');
var cityTextObj = document.getElementById('cityText');

var selIndex = selObj.selectedIndex;
cityTextObj.value = selObj.options[selIndex].text;
}
//-->
</script>
<script language="JavaScript" type="text/javascript">
<!--
function showSelected1()
{
var selObj = document.getElementById('category');
var categoryTextObj = document.getElementById('categoryText');

var selIndex = selObj.selectedIndex;
categoryTextObj.value = selObj.options[selIndex].text;

}
//-->
</script> 
```

意思是，从第一页内容填写到 All.php 中的表单本身。如果有人在未更改选择城市的情况下单击提交按钮，则在 All.php 中，它不会显示并且不会将城市值带到 index1.php。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:27:49.947

您在下面的代码中写入了错误的变量名

```
<script type="text/javascript">
function submitform(val)
{
$("#hx").val(val);
document.myform.submit();
}
</script> 
```

你已经使用了 hx insted of tx，所以你的代码可能是这样的

```
<script type="text/javascript">
function submitform(val)
{
$("#tx").val(val);
document.myform.submit();
}
</script> 
```

更改此设置并再次尝试您的代码。

我在你的代码中看到了许多其他问题，学习如何使用单引号 (') 和双引号 (")。你已经写了这个

```
value='<?= $_GET['categoryText']; ?>'  which is wrong. 
```

正确的方法是`value='<?php $_GET["categoryText"]; ?>'`

根据此更新您的代码并再次运行它，如果有任何问题，请返回此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:17:20.833

你可以试试

```
document.getElementById("myform").submit(); 
```

# jquery - JQuery Masonry - 宽度变量

> ID：12912372
> 
> 赞同：3
> 
> 时间：2012-10-16T10:15:09.017
> 
> 标签：jquery, jquery-masonry

我正在使用砖石（jquery），一切都很好，但我正在做一个“停用”砖石的选项，我使用这个：

```
 function box(box_width) {
        if(box_width == 1) {
          $('#contenedor').masonry('option', { columnWidth: function() { return 550; }});
          $('#contenedor').masonry('reload');   
        }
        else {
          var gutter = 55;
          var min_width = 250;
          $('#contenedor').masonry('option', { 
            columnWidth: function( containerWidth ) {
              var num_of_boxes = (containerWidth/min_width | 0);
              var box_width = (((containerWidth - (num_of_boxes-1)*gutter)/num_of_boxes) | 0) ;
              if (containerWidth < min_width) {
                box_width = containerWidth;
              }
              $('.imagen').width(box_width);
              return box_width;
            }
          });

          $('#contenedor').masonry('reload');   
        }
      } 
```

我有 2 个按钮可以将 1 或 2 发送到功能框（），问题是当尝试发送“1”时，如果语句没有正确加载，砌体只做 1 列（OK）但图像有相同else 语句的宽度，我需要将图像做得更大

我能怎么做 ？

pd：对不起我的英语，我来自西班牙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:19:26.493

检查您是否将整数或字符串传递给函数。你真的应该确保传递的值也是一个整数。

```
function box(box_width_str) {
        var box_width = parseInt(box_width_str);
        if(box_width == 1) {
          $('#contenedor').masonry('option', { columnWidth: function() { return 550; }});
          $('#contenedor').masonry('reload');   
        }
        else {
          var gutter = 55;
          var min_width = 250;
          $('#contenedor').masonry('option', { 
            columnWidth: function( containerWidth ) {
              var num_of_boxes = (containerWidth/min_width | 0);
              var box_width = (((containerWidth - (num_of_boxes-1)*gutter)/num_of_boxes) | 0) ;
              if (containerWidth < min_width) {
                box_width = containerWidth;
              }
              $('.imagen').width(box_width);
              return box_width;
            }
          });

          $('#contenedor').masonry('reload');   
        }
      } 
```

试试那个代码，希望它有效

# iphone - 如何在 UIViewController 中更新 uitableview

> ID：12912381
> 
> 赞同：0
> 
> 时间：2012-10-16T10:15:21.800
> 
> 标签：iphone, ios5, xcode4

我已经`UItableView`进入`UIViewController`并连接到`UItableVIew`它的数据库从数据库加载数据，`sqlite3`但是当我将新内容添加到数据库直到我重新启动应用程序时，它不显示新内容。我试过下面的代码

```
- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    [self.LengthTableFrom reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:22:58.220

我认为当您将数据添加或编辑到数据库时。

而在 tableView 存在的 viewController 中

在`viewDidLoad`您从数据库中获取数据并保存到数组中。中重新加载列表`viewWillAppear`。第一次它工作正常，当您向数据库添加新内容后，您的 tableView 数组将没有新内容。

对于测试，您可以从`viewWillAppear`视图控制器中的数据库中获取数据，以检查它是否正常工作。

您必须实时将新内容添加到数据库获取 ref id，并将具有 ref id 的新内容添加到 tableView 的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:29:56.933

这只是意味着您没有 `[self.LengthTableFrom reloadData]`正确调用该方法。您应该将此代码 `[self.LengthTableFrom reloadData]`放在获取数据库内容的代码下方。

我希望它能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:08:25.677

当您在那之后添加新内容时再次获取所有数据并在获取所有数据后添加此行

```
[self.LengthTableFrom reloadData] 
```

我希望它能正常工作..

:)

# vb.net - 将未处理的异常记录到日志文件

> ID：12912385
> 
> 赞同：5
> 
> 时间：2012-10-16T10:15:39.240
> 
> 标签：vb.net, winforms, exception, logging, exception-handling

如何将未处理的异常记录到 WinForms 应用程序的日志文件中，以便轻松确定异常的来源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:30:24.990

首先，您需要捕获未处理的异常。将此代码的 VB.Net 版本添加到您的主程序中：

```
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
Application.ThreadException += ApplicationThreadException;
AppDomain.CurrentDomain.UnhandledException += UnhandledExceptionHandler; 
```

然后添加事件处理程序：

```
static void UnhandledExceptionHandler(object sender, UnhandledExceptionEventArgs e)
{
    Exception ex = e.ExceptionObject as Exception;
    if (ex != null)
    {
       Console.WriteLine("Unhandled exception: {0}", e.Exception);      
    }
}

static void ApplicationThreadException(object sender, ThreadExceptionEventArgs e)
{
    Console.WriteLine("Unhandled application exception: {0}", e.Exception);
} 
```

然后您可以使用您选择的日志方法记录错误..（对不起 C# 代码！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:00:21.307

在您的`Sub Main`或启动表单的构造函数中，添加以下代码：

```
AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf UnhandledExceptionHandler 
```

然后，将以下方法添加到您的`Sub Main`中，或将其作为共享方法添加到任何其他类/表单中：

```
Public Sub UnhandledExceptionHandler(ByVal sender As Object, ByVal e As UnhandledExceptionEventArgs)
    If TypeOf e.ExceptionObject Is Exception Then
        Dim ex As Exception = CType(e.ExceptionObject, Exception)
        ' Log the exception
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:38:29.163

如果您想记录某些内容，请使用 Nlog - 它会将日志消息写入文件、电子邮件等。链接： http: [//nlog-project.org/](http://nlog-project.org/)

文档： [https ://github.com/nlog/nlog/wiki/Tutorial](https://github.com/nlog/nlog/wiki/Tutorial)

然后你可以简单地这样做：

```
Private Logger As NLog.Logger = NLog.LogManager.GetCurrentClassLogger
try
'do stuff
catch
logger.fatal("Messagedescription")
end try 
```

这会自动将您的消息写入 nlog.config 文件中指定的文件。要查看日志，您可以使用我喜欢的任何编辑器或 logExpert。

# javafx-2 - JavaFX 2.0 中的复制/克隆节点

> ID：12912386
> 
> 赞同：7
> 
> 时间：2012-10-16T10:15:40.400
> 
> 标签：javafx-2

我不想加载 FXML 文件两次。可以克隆/复制节点或组吗？在 JavaFX 1.1 中有一个名为 Duplicater 的实用程序类——Java FX 2.x 中有一个挂件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:31:37.550

具有讽刺意味的`Duplicater`是复制 FXD 格式的节点。并且 FXD 被 FXML 取代。

所以重用 FXML文件*是*.`Duplicater`

# c++ - 替换一堆 std::vector 条目

> ID：12912387
> 
> 赞同：1
> 
> 时间：2012-10-16T10:15:40.237
> 
> 标签：c++, stdvector

我有一个 std::vector。我像这样分配这个向量

```
vec.assign(20000, 0); 
```

现在我有一个额外的数组，我想将它插入到向量中。但不仅仅是插入，更多替换向量中的元素。

```
uint8_t a[] = {1,2,3,4,5,6,7,8}; 
```

将该数组移动到位置 x - x+8 上的向量中，而不分配新内存。

我尝试和工作的当然是

```
vec.insert(start, a, a+8); 
```

但是在那里我分配了新的内存并且向量的大小发生了变化，这是不应该发生的。是的，我可以删除太多的条目，但仍然存在问题，我分配了更多的内存。是否有可能只用向量的内容替换数组？像这样：

```
vec.replace(start, a, a+8); 
```

我想避免更换每个元素，因为我担心这可能需要太长时间。

你怎么看？有没有办法做到这一点？你以前也遇到过这个问题吗？你怎么修好它的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:17:04.017

简单的

```
#include <algorithm>

std::copy(a, a + 8, vec.begin()); 
```

`a`从upto复制元素`a + 8`并替换从 开始的元素`vec.begin()`。

我认为你担心效率是错误的。上面的解决方案确实替换了每个元素，并且可能不会比您自己编写替换代码更有效。如果上面的代码有任何优势，那就是*清晰*，这是一个被忽视的优势。

# java - 在没有显式取消密钥的情况下获取 java.nio.channels.CancelledKeyException

> ID：12912388
> 
> 赞同：1
> 
> 时间：2012-10-16T10:15:41.377
> 
> 标签：java, nio, socketchannel

我一直被`java.nio.channels.CancelledKeyException`抛出：

```
at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:55)
at sun.nio.ch.SelectionKeyImpl.interestOps(SelectionKeyImpl.java:64) 
```

但是，我`java.nio.channels.SelectionKey.cancel()`在任何时候都没有明确地调用。

一条重要的信息是，这发生在我在 EC2 上运行的测试环境中，并且在多台机器之间进行通信，我突然终止了作为通信目标的机器中的进程。但是，我无法将这个异常出现时间与任何启动的进程终止相关联。如果底层套接字断开连接或存在网络连接问题，会发生这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:25:34.360

当底层通道关闭时，密钥会自动取消。您应该在迭代时检查有效键`selectedKeys`，并且如果您的事件处理程序可以关闭通道，至少在读取处理程序的情况下应该如此，您应该在调用之前检查键的有效性`interestOps(),` `isWritable(),`等。

# ruby-on-rails - 在 Rails 中传递没有模型关联的变量

> ID：12912389
> 
> 赞同：0
> 
> 时间：2012-10-16T10:15:42.187
> 
> 标签：ruby-on-rails

我有一个变量，我想用 Rails 中的表单传递。

该变量不方便，因为它不是模型的一部分。我真的不想在数据库中创建一个列，这样我就可以传递变量。

当我尝试使用无害的东西传递变量时：

```
<input type="hidden" id="blah" value=<%= "#{@blah}" %> /> 
```

隐藏字段在源代码中正确出现，但不会与 params 散列一起传递。当我使用诸如 rails 之类的东西对其进行正确编码时，`id="review_blah"`假定它是审查模型的一部分，并且因为它不是模型的一部分而生气。

不是有什么办法吗？？在这些情况下，有什么方法可以轻松传递变量，而无需重建模型？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:26:12.490

在模型中

```
attr_accessible :blah 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:08:09.307

您需要`attribute_accessor`为虚拟属性定义一个，并且需要将其添加到`attr_accessible`列表中，以便可以在表单中使用它。像这样：

```
attr_accessor :blah 
```

这使得`blah`和`blah=`方法可用，您可以使用它们来处理传入的数据。

```
def blah=(data)
  #do sth. with the submited data here
end 
```

在这种情况下，您可以访问在“blah”字段中输入的数据作为局部变量“data”。

然后你需要使它成为常规形式的一部分：

```
<%= f.hidden_field :blah, :value => <Your value here> %> 
```

因此，您需要做的最后一件事是将字段添加到`attr_accessible`列表中。

```
attr_accessible :blah,.... 
```

Otherwise the request would fail because of mass assignment protection.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:37:46.223

虽然它非常难看，但您可以执行以下操作

```
<input name='x' type="hidden" id="blah" value=<%= "#{@blah}" %> /> 
```

在你的控制器中

```
@model.save
  Model.update_all({:my_attribute => params['x']}, {:id => @model.id}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:39:22.523

您需要设置我认为的输入参数的名称。否则它不会包含在 Rails 参数哈希中。

```
<input type="hidden" id="blah" value=<%= "#{@blah}" %> name="blah"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T10:56:26.910

```
class ModelName
  attr_accessor :blah
end

@model = ModelName.new
@model.blah = "blah blah"
@model.blah  #will return "blah blah" 
```

您不需要在表中有列。[在这里](https://stackoverflow.com/questions/3180713/virtual-attributes-in-rails-model)检查 这样你就可以拥有

```
=form_for @model do |f|
  =f.hidden_field :blah 
```

这将传递散列`blah`中的对象。`params`

# c# - 我可以在 SQL Server Management Studio 中执行我的存储过程，但 webservice 不能

> ID：12912401
> 
> 赞同：0
> 
> 时间：2012-10-16T10:16:13.473
> 
> 标签：c#, .net, sql-server, web-services, stored-procedures

我有一个执行表格存储过程的 web 服务方法。这`sp`需要 1 分钟才能完全执行。我远程调用该网络服务方法并获得结果。

在正常情况下，一切都很好，我成功地得到了结果。

但是当服务器很忙时，webservice 无法执行`sp`（我在 SQL Profiler 中对其进行了测试，但探查器没有任何结果），但我可以`sp`在 SQL Server Management Studio 中手动执行。

当我重新启动 SQL Server 时，问题就解决了，webservice 可以执行了`sp`。

为什么在繁忙的情况下 web 服务无法执行`sp`，但我可以在 SQL Server Management Studio 中执行？

这种情况如何解释？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:20:47.930

执行`sp_who`并查看发生了什么；我的猜测是它被阻止了——也许你的“隔离级别”在 SSMS 和网络服务之间是不同的。

同样，很可能是`SET`SSMS 和 Web 服务之间的连接选项不同，这可能导致行为发生某些变化 - 例如，计算存储索引值***非常***容易受到`SET`选项的影响：如果调用者的选项不是t 与创建列时设置的选项兼容，然后可以强制对它们进行表扫描，重新计算它们，而不是使用预先索引的值。这也适用于提升的 xml 值。

最后一个考虑是参数嗅探；如果生成的缓存`yourproc 'abc'`具有非常不同的统计信息`yourproc 'def'`，那么它可能会运行非常糟糕的查询计划。`optimize for / unknown`提示可以帮助解决这个问题。

# .net - Excel 下载不在服务器/站点中工作，但在本地系统中工作

> ID：12912402
> 
> 赞同：1
> 
> 时间：2012-10-16T10:16:15.210
> 
> 标签：.net, excel

我们有一个站点，我们可以选择下载 excel 报告，最近我们已经迁移（使用 VS 2010），`.net 2.0`并且`4.0`托管服务器也发生了变化。服务器与以前的服务器相同，即 2003 年并安装了 MS Excel。相同的代码在我的本地系统（XP，VS-2010）中运行良好。当我单击按钮下载 excel 时，出现以下错误。

> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

我按照这里的说明[http://forums.asp.net/p/1303594/3359738.aspx#3359738](http://forums.asp.net/p/1303594/3359738.aspx#3359738)。之后它工作正常。但同样的错误再次发生。我们`Interope.Excel`在项目中使用了 dll。

如果您知道，请告诉我解决方案。谢谢。

# html - 使图像适应容器大小保持纵横比

> ID：12912407
> 
> 赞同：0
> 
> 时间：2012-10-16T10:16:42.377
> 
> 标签：html, css, image

我找不到在[此页面](http://www.lolaartgallery.com/manufacturer.php?id_manufacturer=39)上将缩略图显示为适合相同尺寸（高度：122 像素和宽度：178 像素）的框而不改变它们各自的纵横比的方法。我不知道缩略图的原始尺寸。`divs`如您所见，我有几个嵌套的，其中一个`.picture1`具有这些尺寸，但图像不适合这个 div。你能帮助我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:01:15.583

这真的是个问题吗。检查您的页面后，它非常简单，如果您添加以下类，则图像适合容器内

> ```
>  .work-view img {
>       max-height: 100px;
>       padding: 5px 5px 2px;
>       max-width: 150px;} 
> ```

![在此处输入图像描述](../Images/59e0033efbd211603c5f1770a6783db8.png)

# regex - 需要用文字替换动态图片标签

> ID：12912416
> 
> 赞同：0
> 
> 时间：2012-10-16T10:16:58.900
> 
> 标签：regex, replace

我需要用文本替换下面的 url（包括 img 标签）。我对正则表达式不是很好......正如你可以看到它的日期动态，它以两种不同的方式结束：使用**alt=";)">**有时使用**class="wp-smiley" />**

```
<img src="http://thailandsbloggare.se/wp-content/uploads/2012/10/icon_wink.gif" alt=";)"> 
```

有时在最后加上 class="wp-smiley"

```
<img src="http://thailandsbloggare.se/wp-content/uploads/2012/09/icon_wink.gif" alt=";)" class="wp-smiley" /> 
```

因此，每当发布此图像时，我都希望将完整的字符串替换为文本“;)”

我已经设法为所有内容编写正则表达式，直到**alt=";)">**有时使用**class="wp-smiley" />**但后来我被卡住了，这里需要一些 OR 功能。

```
<img src="http://thailandsbloggare.se/wp-content/uploads/20\d\d/\d+/icon_wink\.gif 
```

以下回复后更新信息

```
<img src="http://thailandsbloggare.se/wp-content/uploads/20[0-9]{2}/[01][0-9]/icon_wink.gif" alt=";\)" *(|class="wp-smiley")?> 
```

和

两者都无法返回包含**class="wp-smiley" /> 的**字符串

它是一个使用 PHP 在 Wordpress 中构建的网站，我正在使用[http://urbangiraffe.com/plugins/search-regex/](http://urbangiraffe.com/plugins/search-regex/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:48:54.977

通常，在正则表达式中，您可以创建替代的子正则表达式：

```
(match this|or this) 
```

在你的情况下

```
(alt=";\)"|class="wp-smiley") 
```

如果 alt=";)" 始终存在，请执行以下操作：

```
alt=";\)" *(|class="wp-smiley") 
```

当然，我们不知道您使用的是哪种编辑器或编程语言，实际的正则表达式实现可能与上述示例不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:28:12.057

尝试以下模式搜索：

```
<img src="http://thailandsbloggare.se/wp-content/uploads/20[0-9]{2}/[01][0-9]/icon_wink.gif" alt=";\)"(\sclass="wp-smiley")?> 
```

请参考您正在使用的正则表达式引擎支持的语法。但是，对于大多数引擎，上述模式应该可以工作。请注意用于日期范围的字符类，您应该适当地更改它。

# wordpress - WordPress foreach 循环 - 顺序分类

> ID：12912417
> 
> 赞同：0
> 
> 时间：2012-10-16T10:17:01.303
> 
> 标签：wordpress, wordpress-theming

我有标准的 WordPress 分类法（类别）有没有办法在`foreach`循环中订购它们？例如通过`name & desc`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:56:50.983

我会使用标准的 get_categories 函数，如下所示：

```
$args = array(
    'orderby' => 'name',
    'order' => 'DESC',
    'hide_empty' => 1,
    'hierarchical' => 1,
    'taxonomy' => 'category'
);

$categories = get_categories($args);

foreach ($categories as $category) {
    $option = '<option value="/category/archives/'.$category->category_nicename.'">';
    $option .= $category->cat_name;
    $option .= ' ('.$category->category_count.')';
    $option .= '</option>';
    echo $option;
} 
```

你可以在这里阅读更多关于它的其他参数： [http ://codex.wordpress.org/Function_Reference/get_categories](http://codex.wordpress.org/Function_Reference/get_categories)

# iphone - 释放对象有必要吗？

> ID：12912425
> 
> 赞同：1
> 
> 时间：2012-10-16T10:17:18.463
> 
> 标签：iphone, objective-c, ios, ipad, xcode4

我被困在内存管理的中间。请帮我解决我的问题。

```
NSMutableArray *array = [[NSMutableArray alloc]init];
Object *obj = [[Object alloc]init];  
[array addObject: obj];  
[obj release]; 
```

是否有必要`obj`在上面的代码中发布？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:19:18.273

您的问题的答案是：是的，如果您不使用[ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。如果你正在编写一个新的应用程序，你应该认真考虑使用 ARC。

*Objective-C 中的容器对象总是平衡它们的保留/释放计数。*换句话说，您应该始终像没有添加对象一样管理内存，并确保您自己的代码平衡其保留计数。请注意，这是一个约定，并未强制执行，但您始终可以相信内置类会遵循此约定。此外，您可以执行静态分析（XCode 中的 Cmd+Shift+B）来检测这些问题。它会在您上面的代码中指出这一点。

上述情况下的正确代码是：

```
NSMutableArray *array = [[NSMutableArray alloc]init];
Object *obj = [[[Object alloc]init]autorelease];
[array addObject: obj]; 
```

或者

```
NSMutableArray *array = [[NSMutableArray alloc]init];
Object *obj = [[Object alloc]init];
[array addObject: obj];
[obj release]; 
```

因为`NSMutableArray`（及其表亲）将保留该对象，只要它在集合中。

# windows - 卸载时的自定义设置以删除文件/文件夹

> ID：12912428
> 
> 赞同：2
> 
> 时间：2012-10-16T10:17:24.937
> 
> 标签：windows, installation, advanced-installer

为我的基于 java 的应用程序使用[高级安装](http://www.advancedinstaller.com/download.html)程序，它运行良好。当用户从系统卸载应用程序时，我想**删除一个文件夹和一个文件**。现在我的问题是

1）如何从给定位置删除文件，例如我`abc`在桌面上有一个文件，如果它存在，我希望它应该被删除，而用户将卸载应用程序（文件将位于相同的路径和所有相同的名称） ?

2）如何在用户卸载应用程序时从系统中删除文件夹？

3）如果（2即文件夹删除）是可能的，我可以通过编程更改文件夹的位置（我想在卸载时删除）吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:09:45.430

假设您使用的是最新版本的 Advanced Installer。

1）您可以转到文件和文件夹页面，然后从工具栏的[“文件操作”](http://www.advancedinstaller.com/user-guide/file-operations.html)下添加文件删除，您可以将其配置为在安装或卸载期间运行

2) 右键单击​​所需文件夹并转到[“操作”选项卡](http://www.advancedinstaller.com/user-guide/folder-removal-dialog.html)，您将在其中找到所需的选项

3) 是的，您可以通过编程方式指定路径，但您需要从安装过程的一开始就使用基于属性的文件夹来执行此操作。因此，基本上您[创建基于属性的文件夹](http://www.advancedinstaller.com/user-guide/qa-custom-folder.html)并从操作选项卡为其配置选项。

# php - 如何改进此代码以使用 PHP 组合/压缩 CSS

> ID：12912429
> 
> 赞同：-4
> 
> 时间：2012-10-16T10:17:28.610
> 
> 标签：php, css

这是使用 PHP 压缩多个 CSS 的流行片段。

```
 <?php
      header('Content-type: text/css');
      ob_start("compress");
      function compress($buffer) {
        /* remove comments */
        $buffer = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $buffer);
        /* remove tabs, spaces, newlines, etc. */
        $buffer = str_replace(array("
    ", "\r", "\n", "\t", '  ', '    ', '    '), '', $buffer);
        return $buffer;
      }

      /* your css files */
      include('master.css');
      include('typography.css');
      include('grid.css');
      include('print.css');
      include('handheld.css');

      ob_end_flush();
?> 
```

查看代码，我可以看到它只会压缩文件，但不会合并它们。我如何调整它以合并文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:21:23.287

你试过代码吗？我很确定它也结合了它。它执行以下操作：它设置一个回调函数来替换注释、制表符空格和换行符。然后，它包含多个 CSS 文件（它们都经过相同的回调）。

最后，输出被刷新到浏览器。这意味着*所有这些文件的所有*CSS 都将被发送到浏览器，这意味着它也将它们组合在一起。

# ruby-on-rails-3 - Rails CSS 加载，但未应用样式

> ID：12912433
> 
> 赞同：4
> 
> 时间：2012-10-16T10:17:48.173
> 
> 标签：ruby-on-rails-3, sass

我正在关注这本书[http://pragprog.com/book/rails4/agile-web-development-with-rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)并且我的 scss 文件无法正常工作。

css文件是这个：

```
.store {
  h1 {
    margin: 0;
    padding-bottom: 0.5em;
    font:  150% sans-serif;
    color: #226;
    border-bottom: 3px dotted #77d;
  }

  /* An entry in the store catalog */
  .entry {
    overflow: auto;
    margin-top: 1em;
    border-bottom: 1px dotted #77d;
    min-height: 100px;

    img {
      width: 80px;
      margin-right: 5px;
      margin-bottom: 5px;
      position: absolute;
    }

    h3 {
      font-size: 120%;
      font-family: sans-serif;
      margin-left: 100px;
      margin-top: 0;
      margin-bottom: 2px;
      color: #227;
    }

    p, div.price_line {
      margin-left: 100px;
      margin-top: 0.5em; 
      margin-bottom: 0.8em; 
    }

    .price {
      color: #44a;
      font-weight: bold;
      margin-right: 3em;
    }
  }
} 
```

和html文件如下：

```
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>

<h1>Your Pragmatic Catalog</h1>

<% @products.each do |product| %>
  <div class="entry">
    <%= image_tag(product.image_url) %> 
    <h3><%= product.title %></h3>
    <p><%= sanitize(product.description) %></p>
    <div class="price_line">
      <span class="price"><%= product.price %></span>
    </div>
  </div>
<% end %> 
```

CSS 加载正确，但未应用。但是，如果添加一个带有“store”类的周围 div，它就可以工作。这本书没有提到这种情况，我相信它应该“自动”应用这种风格，对吧？

谢谢。

*********编辑****** ** *** ********

 **我发现了问题。对于可能遇到相同问题的人，请检查文件：

应用程序/资产/视图/布局/application.html.erb

**body**标签应该有以下代码：

```
<body class="<%= controller.controller_name %>"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:31:18.777

太好了，您找到了解决方案。但我试图解释幕后发生的事情。

您使用 css**的方式不是一般约定**。该设施附带一些额外的宝石。检查此链接**[https://stackoverflow.com/a/4564922/1160106](https://stackoverflow.com/a/4564922/1160106)**。使用这些宝石，您可以设计您的 css 更加[**DRY**](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的方式。

* * *

## 一般公约

如果要将样式应用于以下`h1`元素

```
# Here "store" class is the parent element of "h1"
<div class="store">
     <h1> some text </h1>
</div> 
```

将需要以下css方式

```
#Here also "store" is written before "h1"
.store h1 
{ 
   #some designs
} 
```

* * *

## 你的情况发生了什么？

可能您正在维护控制器明智的 css 文件。并假设你有一个`stores_controller`. 这就是为什么你的类`stores_controller`被封装在`.store {}`块中的原因。像

```
.store {
    h3 {font-size: 120%;}
} 
```

因此很明显，您的`h3`元素需要具有`store`类的父元素。`class="<%= controller.controller_name %>"`你是通过添加`body`标签来实现的。毫无疑问，该`<body>`标签是所有后续节点的父节点。现在，当您击球`stores_controller`时`class="store"`，您的风格正在发挥作用。

这种方法非常[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)且值得推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:43:58.820

根据您的代码，所有样式都在`.store { }`块之间，因此只要您将 div 与“store”类包围起来，它就不会反映出来

例如

```
.store {
  h3 {
      font-size: 120%;
      font-family: sans-serif;
      margin-left: 100px;
    }
} 
```

和

```
.store h3 {
      font-size: 120%;
      font-family: sans-serif;
      margin-left: 100px;
      margin-top: 0;
      margin-bottom: 2px;
      color: #227;
    } 
```**

# jquery - 分页到分页

> ID：12912434
> 
> 赞同：1
> 
> 时间：2012-10-16T10:17:51.313
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我正在尝试构建一个非典型的循环导航。

通常它会像这样建立...

```
<a href="#">1</a>
<a href="#">2</a>
<a href="#">3</a>
<a href="#">4</a>
<a href="#">5</a>
<a href="#">6</a>
<a href="#">7</a> 
```

我想做的是将每 2 个元素包装在另一个 div 中，如下所示：

```
<div class="wrap">
   <a href="#">1</a>
   <a href="#">2</a>
</div>
<div class="wrap">
   <a href="#">3</a>
   <a href="#">4</a>
</div>
<div class="wrap">
   <a href="#">5</a>
   <a href="#">6</a>
</div>
<div class="wrap">
   <a href="#">7</a>
</div> 
```

我知道，我应该使用

```
pagerAnchorBuilder 
```

但不知道把事情包起来。任何人都知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T08:10:07.893

您可以使用简单的循环来做到这一点，并且[`slice()`](http://api.jquery.com/slice/)：

```
var $anchors = $('a');
for (var i=0; i < $anchors.length; i+=2) {
  $anchors.slice(i, i+2).wrapAll('<div class="wrap" />');
} 
```

这会给你：

```
<div class="wrap">
   <a href="#">1</a>
   <a href="#">2</a>
</div>
<div class="wrap">
   <a href="#">3</a>
   <a href="#">4</a>
</div>
<div class="wrap">
   <a href="#">5</a>
   <a href="#">6</a>
</div>
<div class="wrap">
   <a href="#">7</a>
</div> 
```

### [这是一个小提琴](http://jsfiddle.net/uzVKv/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-06-02T06:20:57.010

/*------------------------------------------------ --------------------- * 此站点的分页。 *-------------------------------------------------- -------------------* /

功能 geigerakademie_posts_paginate($args = false) {

```
 $type = 'posts';
        $options = array();
        $previouspage = '&laquo;';
        $nextpage = '&raquo;';
        $before = '<div class="paging clearfix">';
        $after = '</div>';
        $range = 3;
        $title = '';
        $anchor = 1;
        $gap = 1;

        $r = wp_parse_args($args, $options);
        extract($r, EXTR_SKIP);

        if (!isset($page) && !isset($pages)) {
            global $wp_query;

            if ($type === 'posts') {
                $page = get_query_var('paged');
                $posts_per_page = intval(get_query_var('posts_per_page'));
                $pages = intval(ceil($wp_query->found_posts / $posts_per_page));
            }
            else {
                $page = get_query_var('cpage');
                $comments_per_page = get_option('comments_per_page');
                $pages = get_comment_pages_count();
            }
            $page = !empty($page) ? intval($page) : 1;
        }

        $prevlink = ($type === 'posts')
            ? esc_url(get_pagenum_link($page - 1))
            : get_comments_pagenum_link($page - 1);
        $nextlink = ($type === 'posts')
            ? esc_url(get_pagenum_link($page + 1))
            : get_comments_pagenum_link($page + 1);

        $output = stripslashes($before);
        if ($pages > 1) {

            $ellipsis = "<a class='gap'>...</a>";

            if ($page > 1 && !empty($previouspage)) {
                $output .= sprintf('<a class="page-prev" href="%s"><span> </span></a>', $prevlink);
            }

            $min_links = $range * 2 + 1;
            $block_min = min($page - $range, $pages - $min_links);
            $block_high = max($page + $range, $min_links);
            $left_gap = (($block_min - $anchor - $gap) > 0) ? true : false;
            $right_gap = (($block_high + $anchor + $gap) < $pages) ? true : false;

            if ($left_gap && !$right_gap) {
                $output .= sprintf('%s%s%s',
                    geigerakademie_posts_paginate_loop(1, $anchor),
                    $ellipsis,
                    geigerakademie_posts_paginate_loop($block_min, $pages, $page)
                );
            }
            else if ($left_gap && $right_gap) {
                $output .= sprintf('%s%s%s%s%s',
                    geigerakademie_posts_paginate_loop(1, $anchor),
                    $ellipsis,
                    geigerakademie_posts_paginate_loop($block_min, $block_high, $page),
                    $ellipsis,
                    geigerakademie_posts_paginate_loop(($pages - $anchor + 1), $pages)
                );
            }
            else if ($right_gap && !$left_gap) {
                $output .= sprintf('%s%s%s',
                    geigerakademie_posts_paginate_loop(1, $block_high, $page),
                    $ellipsis,
                    geigerakademie_posts_paginate_loop(($pages - $anchor + 1), $pages)
                );
            }
            else {
                $output .= geigerakademie_posts_paginate_loop(1, $pages, $page);
            }

            if ($page < $pages && !empty($nextpage)) {
                $output .= sprintf('<a class="page-next" href="%s"><span> </span></a>', $nextlink);

            }
            $output .= "</ol>";
        }
        $output .= stripslashes($after);

        if ($pages > 1 || $empty) {
            echo $output;
        }
    } 
```

功能 geigerakademie_posts_paginate_loop($start, $max, $page = 0) {

```
 $type = 'posts';

        $output = "";
        for ($i = $start; $i <= $max; $i++) {
            $p = ($type === 'posts') ? esc_url(get_pagenum_link($i)) : get_comments_pagenum_link($i);
            $output .= ($page == intval($i))
                ? "<a class='page current' href='javascript:void(0)'>$i</a></span>"
                : "<a href='$p' title='$i' class='page'>$i</a>";
        }
        return $output;
    } 
```

# c++ - 指针数组的动态初始化

> ID：12912440
> 
> 赞同：0
> 
> 时间：2012-10-16T10:18:00.903
> 
> 标签：c++, arrays, pointers, new-operator, double-pointer

```
class MyClass
{
    int **a;
    int *b[];

    MyClass()
    {
        a = new int*[10];
        b = new int*[10];
    }
}; 
```

在上面的代码中，我在构造函数的第二行（b = new int*[10]）得到一个编译错误。`int**' to`它说错误： int * [0u]'分配中的类型不兼容

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:21:52.323

您不能分配给数组；您可以初始化它或分配给它的成员。无论如何，您的`b`成员都是无效的，因为拥有大小为 0 的数组是非法的；该语法`T b[]`只能在立即提供聚合初始值设定项以允许编译器推断数组长度的情况下使用。

# c++ - hashmap 通用修改

> ID：12912443
> 
> 赞同：0
> 
> 时间：2012-10-16T10:18:05.390
> 
> 标签：c++

好的，所以我写了一个 c++ websocket 服务器花了一段时间，但我认为我为中级程序员做得很好，但有一个问题，我的朋友建议我使用命名空间 __gnu_cxx 中的 hash_map；这一切都很好，我不想知道的不是我需要在其中一个用户字段中更改用户名，它是否会通过这样做来更新

_userslist[id].name = "BlaBla Bla";

还是我需要用副本替换整个字段但名称已更改。

我会尝试的，但是当我把服务器关闭时，我所有的成员都会呻吟和呻吟，所以我想在这里问:)

谢谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:26:30.730

假设在这种情况下不是 const ，很可能`_userslist[id]`会返回 a 。如果是一个公共成员，它有一个接受一个（或可以转换成的东西），那么它将起作用。`WinUser&``_userslist``name``WinUser``operator=``const char *``const char *`

# php - 来自简码的 WP_Query 和 posts_per_page 仅返回一篇文章（WordPress）

> ID：12912450
> 
> 赞同：2
> 
> 时间：2012-10-16T10:18:08.280
> 
> 标签：php, wordpress, loops, shortcode

我在我的functions.php 中创建了一个短代码，旨在返回带有“highlight”标签的3 篇最新博客文章（标题、缩略图、阅读更多链接）。我的简码中的 PHP 成功识别了 tag 参数，但它只返回一篇文章。

如您所见，我使用“posts_per_page”参数来定义我想要返回的帖子数。目前，当我输入 1、2 或 3 时，它会按日期顺序简单地返回第 1、第 2 或第 3 个帖子 - 而不是 3 个最新帖子。我没有成功尝试过“numberposts”和“showposts”（反复试验！）。

谁能告诉我我在这里缺少什么？这是在我的 functions.php 文件中：

```
function highlight_posts() {
    $args = array('tag' => 'highlight' , 'posts_per_page' => 4);
    $the_query = new WP_Query( $args );
        while ( $the_query->have_posts() ) : $the_query->the_post();
            $return_string = '<div class="blog-post-highlight"><div class="blog-post-img"><a href="'.get_permalink().'">'.get_the_post_thumbnail($page->ID, array( 300, 168 )).'</a></div><div class="blog-post-content"><h3><a href="'.get_permalink().'">'.get_the_title().'</a></h3><p class="read-more"><a href="'.get_permalink().'">Read More...</a></p></div><div class="clear"></div></div>';
        endwhile;
    wp_reset_postdata();
    return $return_string;
}

add_shortcode( 'highlightposts', 'highlight_posts' ); 
```

这通过插入 [highlightposts] 部署在 WYSIWYG 编辑器中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:50:24.730

试试这个：

```
function highlight_posts() {
    $args = array('tag' => 'highlight' , 'posts_per_page' => 4);
    $return_string ="";
    $the_query = new WP_Query( $args );
        while ( $the_query->have_posts() ) : $the_query->the_post();
            $return_string .= '<div class="blog-post-highlight"><div class="blog-post-img"><a href="'.get_permalink().'">'.get_the_post_thumbnail($page->ID, array( 300, 168 )).'</a></div><div class="blog-post-content"><h3><a href="'.get_permalink().'">'.get_the_title().'</a></h3><p class="read-more"><a href="'.get_permalink().'">Read More...</a></p></div><div class="clear"></div></div>';
        endwhile;
    wp_reset_postdata();
    return $return_string;
}

add_shortcode( 'highlightposts', 'highlight_posts' ); 
```

您正在为 $return_string 提供新值，而不是添加新值。检查是不是这样

# javascript - 从浏览器打印 svg 文档

> ID：12912453
> 
> 赞同：1
> 
> 时间：2012-10-16T10:18:19.710
> 
> 标签：javascript, printing, svg

我一直在尝试从浏览器的应用程序中打印一些 svg 文件。但是在打印输出后，内容显示在纸张的左上部分，占据页面的四分之一。谁能建议我一种使内容适合论文的方法。它非常紧迫。最早的解决方案将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:23:06.013

从浏览器打印对于常规网页来说也很糟糕，但是您可以对某些网站采取类似的方法：包括一些“查看打印”按钮，该按钮会打开一个新页面，该页面以适合打印的布局显示您的文档。您可以使用此按钮直接打开您的 SVG（不嵌入在页面中），画布大小为 A4 或 Letter 尺寸/纵横比（或略小以考虑典型的边距设置）。

# javascript - Phonegap读取html文件

> ID：12912456
> 
> 赞同：2
> 
> 时间：2012-10-16T10:18:25.957
> 
> 标签：javascript, android, jquery, html, cordova

我正在尝试在我的应用程序中获得良好的页面转换。使用 HTML 和 JavaScript。我尝试了 data-transition 属性，但速度很慢。

我想出的解决方案是读取 html 文件并将它们粘贴到 index.html 并使用 css3 动画进行页面转换。

我也用ajax试过这个：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    $.ajax({
        url: 'test.html',
        success: function(data) {
            console.log('success');
            console.log(data);
        },
        error: function() {
            console.log('error');
        }
    });
} 
```

日志：

```
success
[object Document] 
```

如何成功读取 www 文件夹中的 html 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:44:54.947

我找到了答案：

```
 $('#page1').load('test.html'); 
```

使用此代码，我将 test.html 加载到 id="page1" 的 div 中，该 div 位于主体内部。

我如何进行页面转换：

在此示例中，我从 login.html 导航到 test.html 并返回。两个 html 文件都加载到 index.html 中

索引.html：

```
 <!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="mycss.css" />
    <script src="phonegap.js"></script>
    <script src="jquery-1.8.2.js"></script>
    <script>
    document.addEventListener("deviceready", onDeviceReady, false);
    var pages = new Array();
    var currentpage;
    var otherpage;

    function onDeviceReady() {
        console.log('deviceReady');
        currentpage = $('#page1');
        otherpage = $('#page2');
        pushPage('login.html');
        document.addEventListener("backbutton", popPage, false);
    }

    function popPage(){
        if(pages.length == 1){
            console.log('exit app end of stack');
            navigator.app.exitApp();
        } else{
            console.log('pop page');
            //swap page vars
            var temp = currentpage;
            currentpage = otherpage;
            otherpage = temp;

            currentpage.load(pages[pages.length - 2]);

            currentpage.removeClass();
            otherpage.removeClass();

            currentpage.addClass("pagePopIn");
            otherpage.addClass("pagePopOut");

            pages.pop();
        }
    }

    function pushPage(url){
        pages.push(url);

        //swap page vars
        var temp = currentpage;
        currentpage = otherpage;
        otherpage = temp;

        currentpage.load(url, function(response, status, xhr){
            currentpage.removeClass();
            otherpage.removeClass();

            currentpage.addClass("pagePushIn");
            otherpage.addClass("pagePushOut");
        });
    }

    </script>
</head>

<body id="body">
    <div id="page1">
    </div>
    <div id="page2">
    </div>

</body>
</html> 
```

登录.html：

```
<h1>Log in</h1>
<input type="text" />
<input type="password"/>
<button type="button" onclick="pushPage('register.html');">Register</button>
<button type="button" onclick="pushPage('test.html');">Log in</button> 
```

测试.html：

```
<button type="button" onclick="popPage();">Terug</button>
<h1>Test</h1>
This is a test!</br>
This is a test!</br> 
```

mycss.css：

```
body{
    padding: 0px;
    margin: 0px;
    background-color: white;
    width: 100%;
    height: 100%;
}

button{
    background-color: #004A91;
    color: #E2007A;
    padding: 15px;
    font-weight: bold;
    font-family: "camingodos-web", "verdana", sans-serif;
    border-style:none;
    min-height: 45px;
}

button:active{
    background-color: red;
}

h1{
    margin: 10px;
    padding: 8px;
    color: #E2007A;
    font-weight: bold;
    font-family: "camingodos-web", "verdana", sans-serif;
}

.pagePopIn{
    padding: 0px;
    margin: 0px;
    position:absolute;
    width:100%;
    -webkit-animation:pagePopInTransition 0.8s;
    animation:pagePopInTransition 0.8s;
}

.pagePopOut{
    padding: 0px;
    margin: 0px;
    position:absolute;
    visibility: hidden;
    width:100%;
    -webkit-animation:pagePopOutTransition 0.8s;
    animation:pagePopOutTransition 0.8s;
}

@keyframes pagePopInTransition{
    0%   {left:-100%; width:100%; visibility: visible;}
    100% {left:0px; width:100%;}
}

@-webkit-keyframes pagePopInTransition /* Safari and Chrome */
{
    0%   {left:-100%; width:100%; visibility: visible;}
    100% {left:0px; width:100%;}
}

@keyframes pagePopOutTransition{
    0%   {left:0px; width:100%; visibility: visible; opacity: 1;}
    100% {left:100%; width:100%; visibility: hidden; opacity: 0.5;}
}

@-webkit-keyframes pagePopOutTransition /* Safari and Chrome */
{
    0%   {left:0px; width:100%; visibility: visible; opacity: 1;}
    100% {left:100%; width:100%; visibility: hidden; opacity: 0.5;}
}

.pagePushIn{
    padding: 0px;
    margin: 0px;
    position:absolute;
    width:100%;
    -webkit-animation:pagePushInTransition 0.6s;
    animation:pagePushInTransition 0.6s;
}

.pagePushOut{
    padding: 0px;
    margin: 0px;
    position:absolute;
    visibility: hidden;
    width:100%;
    -webkit-animation:pagePushOutTransition 0.6s;
    animation:pagePushOutTransition 0.6s;
}

@keyframes pagePushInTransition{
    0%   {left:100%; width:100%; visibility: visible;}
    100% {left:0px; width:100%;}
}

@-webkit-keyframes pagePushInTransition /* Safari and Chrome */
{
    0%   {left:100%; width:100%; visibility: visible;}
    100% {left:0px; width:100%;}
}

@keyframes pagePushOutTransition{
    0%   {left:0px; width:100%; visibility: visible; opacity: 1;}
    100% {left:-100%; width:100%; visibility: hidden; opacity: 0.5;}
}

@-webkit-keyframes pagePushOutTransition /* Safari and Chrome */
{
    0%   {left:0px; width:100%; visibility: visible; opacity: 1;}
    100% {left:-100%; width:100%; visibility: hidden; opacity: 0.5;}
} 
```

# jquery - jquery mobile问题在整个项目中保留javascript数据

> ID：12912457
> 
> 赞同：0
> 
> 时间：2012-10-16T10:18:26.547
> 
> 标签：jquery, jquery-mobile

使用 jquerymobile，有没有办法在文件中保留相同的 js 文件（不保留值）？

我在我的索引页面上设置一个值，后来我从下一页检索数据，现在它给出的值为空，我知道我的值在每次页面加载时都会重置。但是有什么方法可以避免并在所有页面中保持值？

在使用 jquerymobile 之前，我使用 html5 使用离线存储

任何好主意，赞赏..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:02:06.850

您可以尝试将您的值保存在`localStorage`(HTML5) 或`cookie`(HTML) 中。

## 本地存储：

要将您的值存储在 中`localStorage`，请使用：

```
localStorage.setItem("my_value", my_value); 
```

要检索它，请使用：

```
var my_value = localStorage.getItem("my_value"); 
```

* * *

## 曲奇饼：

要将您的值存储在 a 中`cookie`，您可以使用：

```
setCookie("my_value", my_value, 300); 
```

`setCookie`以下函数在哪里：

```
// Function for storing to cookie
function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 
```

要检索您的值，您可以使用：

```
var my_value = getCookie("my_value"); 
```

其中`getCookie`定义如下：

```
// Function for retrieveing value from a cookie
function getCookie(c_name)
{
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name)
        {
            return unescape(y);
        }
    }
} 
```

# ios - 调用dismissModalViewControllerAnimated:completion:时显示正确的UIView

> ID：12912460
> 
> 赞同：0
> 
> 时间：2012-10-16T10:18:28.953
> 
> 标签：ios, uiview, uiviewcontroller, modalviewcontroller

让我解释。我有多个`UIViewControllers`. 在我的 3 上`MainPageController`，我有 3 个 UIView。让我们这样枚举：第一个 UIView 被调用`LoginView`，第二个被调用`HomeView`，另一个被调用`RegView`。现在`HomeView`，有多个按钮会通向其他`UIViewControllers`. 例如，一个按钮将导致`StoreController`. 现在，如果我在里面`StoreController`并且想回到`MainPageController`，我只需调用：

`[self dismissModalViewControllerAnimated:YES completion:nil]`

这将把我送回`HomeView`.

那很好。但是，在 内部`StoreController`，有一些按钮可以将我定向到`LoginView`或`RegView`，无论哪个按钮被点击。问题是当方法时`[self dismissModalViewControllerAnimated:YES completion:nil]`，它只会带我回到`HomeView`，无论我按下哪个按钮。

`dismissModalViewControllerAnimated`那么一旦被调用，我将如何显示正确的 UIView呢？

**编辑：**

这就是我显示 UIViews 的方式：

```
-(void)viewDidLoad
{
  //Initialize the views here...
}

-(void)showViewByTag:(NSInteger)tag
{
   if (tag == 1)
   {
     [self.view addSubview:loginView];
   }
   else if (tag == 2)
   {
     [self.view addSubview:homeView];
   }
   else
   {
     [self.view addSubview:regView];
   }
} 
```

现在我`showViewByTag:`在代码中的某处调用该方法来显示视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:42:36.803

您可以尝试执行以下操作：在调用之前`[self dismissModalViewControllerAnimated:YES completion:nil]`（并因此返回您的主视图），更改当前显示在您的视图中`MainPageController`：

```
[(MainPageController*)self.presentingViewController showViewByTag:desiredViewTag];
[self dismissModalViewControllerAnimated:YES...]; 
```

如果您担心演员阵容，并且您预见到`self.presentingViewController`在某些情况下可能不是 MainPageController 类型，那么您可以明确检查其类型：

```
if ([self.presentingViewController isKindOf:[MainPageController class]])
    [(MainPageController*)self.presentingViewController showViewByTag:desiredViewTag];
[self dismissModalViewControllerAnimated:YES...]; 
```

要编译，必须将 MainPageController.h 导入您的模态控制器类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:35:31.337

dismissModalViewController 将始终带回呈现它的 viewController，并且只能是一个，因此理想的方法是告诉 navigationController 使用您想要的 viewController 进行初始化。

例如，在 regButton 上单击呈现的 modalview

```
RegViewController *regViewController = [[RegViewController alloc]initWithNibNam:@"RegViewController" bundle:nil];

[self.navigationController initWithRootViewController:regViewController]; 
```

# sql - sql - 如何通过一个语句从 3 个表中提取所有信息？

> ID：12912461
> 
> 赞同：0
> 
> 时间：2012-10-16T10:18:34.973
> 
> 标签：sql

我有 3 张桌子。

**第一：**

商店( `StoreID`, `Name`)

**第二个：**

Store_Items( `StoreID`, `ItemID`)

**第三个：**

项目( `ItemID`, `Name`, `Price`)

我怎样才能写一个语句，得到`all StoreID`和`all names`和`all items for each StoreID`？

我应该使用加入还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:23:43.680

```
select *
from Store as S
    left outer join Store_Items as SI on SI.StoreID = S.StoreID
    left outer join Items as I on I.ItemID = SI.ItemID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:22:01.453

```
 select s.storeid, s.name, si.itemid, i.name, i.price
     from store s
left join store_item si on si.storeid = s.storeid
left join item i on i.itemid = store.itemid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:23:07.623

是的，您应该大致这样加入表格

```
SELECT * FROM `firstone`
LEFT OUTER JOIN `secondone`
ON firstone.StoreId = secondone.StoreID
LEFT OUTER JOIN `thirdone`
ON secondone.ItemID = thirdone.ItemID 
```

# django - django - 带有 django-chosen 的 django-taggit 表单

> ID：12912465
> 
> 赞同：1
> 
> 时间：2012-10-16T10:18:56.090
> 
> 标签：django, django-models, widget, django-forms, django-taggit

我想使用 django-taggit。我使用 Bootstrap 生成表单。我将如下小部件用于我的表单字段。问题现在链接到几个项目，我也想将它们链接到几个标签。

表格.py：

```
class QuestionForm(ModelForm):

create = False
no_results = _("No results matched")

class Meta:
    model = Question
    fields = ("content", "status", "items")
    widgets = {
        "content": Textarea(attrs={
            "class": "span4",
            "placeholder": _("Ask something specific."),
            "rows": 1}),
        "status": ChosenSelect(),
        "items": ChosenSelectMultiple(
            attrs={"class": "span4", "rows": 1},
            overlay=_("Pick a product."),
        ),
    } 
```

鉴于我也想对标签使用 ChosenSelectMultiple，如何将标签集成到我的表单小部件中？（我需要将问题链接到几个项目和几个标签）

模型.py：

```
class Question(Content):
content = models.CharField(max_length=200, verbose_name=_("content"))
tags = TaggableManager()

class Content(models.Model):
items = models.ManyToManyField(Item, verbose_name=_("products")) 
```

我以为我可以在我的小部件中使用 TagField 和 ChosenSelectMultiple 来处理它，但我不知道该怎么做。

# android - 为什么设备无法连接到模拟器？

> ID：12912470
> 
> 赞同：1
> 
> 时间：2012-10-16T10:19:13.070
> 
> 标签：android, android-emulator, device, galaxy

我有两个设备

**`1\. Samsung Galaxy Ace GT-S5830`**

**`2\. Samsung Galaxy Ace GT-S5830i`**

如果我将**第一个**设备连接到模拟器，那么它会连接并作为调试器正常工作。

但是，如果我将**第二**台设备连接到同一台计算机的模拟器，那么它不会连接到模拟器。

**在第一**台设备的通知上，即**Galaxy Ace GT-S5830**看起来像这样：

![在此处输入图像描述](../Images/d5fffa670e0551140884384f842f5b85.png)

在**第二个设备**上，即**Galaxy Ace GT-S5830i**上，缺少 USB 调试连接通知。

![在此处输入图像描述](../Images/82b2470da2c9a2811f982c7f1275b295.png)

```
I have marked Setting ---> Application ---> Development ---> USB Debugging as Checked. Then to why I am getting this issue. 
```

如果有人知道这一点，请告诉我以解决此问题。我想使用三星**Galaxy Ace GT-S5830i**作为调试设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:24:29.207

无需 root 设备，从 SDK 管理器安装谷歌通用 USB 驱动程序。

# html - 在html中挥动旗帜

> ID：12912474
> 
> 赞同：0
> 
> 时间：2012-10-16T10:19:24.867
> 
> 标签：html, css, animation, html5-canvas

在我的工作中，我的任务是制作现场挥舞旗帜的动画。我想到了画布，但我的雇主宁愿只使用 CSS3 和动画、3d 变换、关键帧。

我认为要制作这种动画我需要有 3D 网格或有很多 htmls 标签什么的，我认为在代码和动画中看起来很恶心会看起来很可怕。

我阅读了有关 Shader 的信息，但它仅受 Chrome 支持。

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:17:48.080

根据复杂程度，我建议使用简单的动画 GIF。应该为工作选择正确的工具，而不是事先选择的工具（需要告诉你的雇主）。

# mysql - 在尝试更改表时，我得到“#1064 - 你的 SQL 语法有错误”

> ID：12912475
> 
> 赞同：-2
> 
> 时间：2012-10-16T10:19:24.537
> 
> 标签：mysql

我想写一个查询返回多个表的搜索结果。我正在阅读本[教程](http://www.petefreitag.com/item/477.cfm)

在 phpmyadmin 我写

```
ALTER TABLE files ADD FULLTEXT(title, desc); 
```

它还给了我

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc)' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:22:58.520

如果`desc`是列名，那么你应该尝试在它周围加上反引号，因为它是MySQL中的[保留字：](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

```
ALTER TABLE files ADD FULLTEXT(title, `desc`); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:22:34.380

实际语法是这样的

```
ALTER TABLE table_name ADD column_name datatype 
```

看到这个：[http ://www.w3schools.com/sql/sql_alter.asp](http://www.w3schools.com/sql/sql_alter.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:23:20.873

试试这个：

```
ALTER TABLE files 
ADD FULLTEXT INDEX inx1
(title, desc); 
```

# php - 如何将表格属性应用于所有结果

> ID：12912477
> 
> 赞同：0
> 
> 时间：2012-10-16T10:19:27.623
> 
> 标签：php, css

我在下面粘贴我的代码............我的问题是在其他部分标签属性没有应用，所以字段宽度正在缩小。我们应该如何使标签属性也适用于其他部分。

注意：格式应该相同。

```
<?php 
    $network_name="";
    foreach($channel_summary as $c) {
        $channel_str = "";
        if($network_name!=$c['a']) { 
            $channel_str .= $c['a'].'~'.str_replace('/','surero',$c['b']).'~'.$c['c'].'~'.str_replace(' ','surero',$c['d']).'~'.date('d-M-Y', strtotime( $c['e'])).'~'.date('d-M-Y', strtotime( $c['f'])).'~'.$c['g'].'~'.$c['h'].'~'.str_replace('@','surero',$c['i']).'~'.str_replace(' ','surero',$c['j']).'~'.$c['k'];
?>
<br /><p>Network Name: <?php echo $c['a'];
    $network_name=$c['a'];?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  Network Contact: <?php echo $c['i'] ?> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <!--<input type="Submit" class= "submit" value="Network RO" onclick="javascript:NetworkROPDF(<?php echo $order_id ?>,'<?php echo $network_name;?>')" target="_blank" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
    <input type="Submit" class= "submit" value="Network RO PDF" onclick="javascript:NetworkRO(<?php echo $order_id ?>,'<?php echo $network_name;?>')" target="_blank" /></p>
<table><tr>
    <th>A</th>
    <th>B</th>
    <th>C</th>
    <th>D</th>
    <th>E</th>
    <th>F</th>
    <th> G</th>
    <th> H </th>
    <th>&nbsp;</th>
</tr>
<tr>
    <td><?php echo $c['b']."/".$c['a'] ?></td>
    <td><?php echo $c['c'] ?></td>
    <td><?php echo $c['d'] ?></td>
    <td><?php print date('d-M-Y', strtotime( $c['e']))  ?></td>
    <td><?php print date('d-M-Y', strtotime( $c['f']))     ?></td>
    <td><?php echo $c['g']  ?></td>
    <td><?php echo $c['h']?></td>
    <td><?php echo $c['g']* $c['h']?>
    <td><a href=javascript:add_price(<?php echo $order_id ?>,'<?php echo $channel_str;?>')>Add Price</a> </td>
</tr>
</table><?php } else
    {
        $channel_str .= $c['a'].'~'.str_replace('/','surero',$c['b']).'~'.$c['c'].'~'.str_replace(' ','surero',$c['d']).'~'.date('d-M-Y', strtotime( $c['e'])).'~'.date('d-M-Y', strtotime( $c['f'])).'~'.$c['g'].'~'.$c['h'].'~'.str_replace('@','surero',$c['i']).'~'.str_replace(' ','surero',$c['j']).'~'.$c['k'];
?><table>
<tr>
    <td><?php echo $c['b']."/".$c['a'] ?></td>
    <td><?php echo $c['c'] ?></td>
    <td><?php echo $c['d'] ?></td>
    <td><?php print date('d-M-Y', strtotime( $c['e']))  ?></td>
    <td><?php print date('d-M-Y', strtotime( $c['f']))     ?></td>
    <td><?php echo $c['g']  ?></td>
    <td><?php echo $c['h']?></td>
    <td><?php echo $c['g']* $c['h']?>
    <td><a href=javascript:add_price(<?php echo $order_id ?>,'<?php echo $channel_str;?>')>Add Price</a> </td>
</tr></table>
<?php }}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:42:34.027

问题是因为您在其他部分使用不同的表。试试这个代码

```
<?php
 $network_name = "";
?>
<table>
<?php
foreach ($channel_summary as $c) {
    $channel_str = "";
    if ($network_name != $c['a']) {

        $channel_str .= $c['a'] . '~' . str_replace('/', 'surero', $c['b']) . '~' . $c['c'] . '~' . str_replace(' ', 'surero', $c['d']) . '~' . date('d-M-Y', strtotime($c['e'])) . '~' . date('d-M-Y', strtotime($c['f'])) . '~' . $c['g'] . '~' . $c['h'] . '~' . str_replace('@', 'surero', $c['i']) . '~' . str_replace(' ', 'surero', $c['j']) . '~' . $c['k'];
        ?>
        <tr>
            <td colspan="3">Network Name: <?php echo $c['a']; $network_name = $c['a']; ?></td>
            <td colspan="3">Network Contact: <?php echo $c['i'] ?></td>            
            <td colspan="3"><input type="Submit" class= "submit" value="Network RO PDF" onclick="javascript:NetworkRO(<?php echo $order_id ?>,'<?php echo $network_name; ?>')" target="_blank" /></td>
        </tr>
        <tr>
            <th>A</th>
            <th>B</th>
            <th>C</th>
            <th>D</th>
            <th>E</th>
            <th>F</th>
            <th>G</th>
            <th>H</th>
            <th>&nbsp;</th>
        </tr>
        <tr>

            <td><?php echo $c['b'] . "/" . $c['a'] ?></td>
            <td><?php echo $c['c'] ?></td>
            <td><?php echo $c['d'] ?></td>                          
            <td><?php print date('d-M-Y', strtotime($c['e'])) ?></td>
            <td><?php print date('d-M-Y', strtotime($c['f'])) ?></td>
            <td><?php echo $c['g'] ?></td>
            <td><?php echo $c['h'] ?></td>
            <td><?php echo $c['g'] * $c['h'] ?>
            <td><a href=javascript:add_price(<?php echo $order_id ?>,'<?php echo $channel_str; ?>')>Add Price</a> </td>
        </tr>

        <?php
    } else {
        $channel_str .= $c['a'] . '~' . str_replace('/', 'surero', $c['b']) . '~' . $c['c'] . '~' . str_replace(' ', 'surero', $c['d']) . '~' . date('d-M-Y', strtotime($c['e'])) . '~' . date('d-M-Y', strtotime($c['f'])) . '~' . $c['g'] . '~' . $c['h'] . '~' . str_replace('@', 'surero', $c['i']) . '~' . str_replace(' ', 'surero', $c['j']) . '~' . $c['k'];
        ?>
            <tr>
                <td><?php echo $c['b'] . "/" . $c['a'] ?></td>
                <td><?php echo $c['c'] ?></td>
                <td><?php echo $c['d'] ?></td>                          
                <td><?php print date('d-M-Y', strtotime($c['e'])) ?></td>
                <td><?php print date('d-M-Y', strtotime($c['f'])) ?></td>
                <td><?php echo $c['g'] ?></td>
                <td><?php echo $c['h'] ?></td>
                <td><?php echo $c['g'] * $c['h'] ?>
                <td><a href=javascript:add_price(<?php echo $order_id ?>,'<?php echo $channel_str; ?>')>Add Price</a> </td>
            </tr>
        <?php
    }
}
?>
</table> 
```

# algorithm - 如何用 [1, N] 整数制作非连续序列？

> ID：12912481
> 
> 赞同：0
> 
> 时间：2012-10-16T10:19:34.950
> 
> 标签：algorithm, sequence

`a_1, a_2, ..., a_n`我必须制作一个满足的非连续整数序列

`{a_1, a_2, ..., a_n} ∈ [1, n]`

`|a_i - a_(i-1)| > 1`

怎么做？感谢您的提示或帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:27:53.787

当元素少于4个时，这是不可能的。

当有 4 个或更多元素时，我们可以这样构造序列：

如果 n 是偶数：

```
[n-1, n-3, ... , 1, n, n-2, ..., 2] 
```

如果 n 是奇数：

```
[n, n-2, ..., 1, n-1, n-3, ..., 2] 
```

现在 n 等于或大于 4，|1-n| = |n-1| >= 3, |1-(n-1)| = |1-n+1| = |n| >= 4，序列满足约束。

# php - 使用 php 中的任务计划调度任务

> ID：12912486
> 
> 赞同：0
> 
> 时间：2012-10-16T10:19:53.240
> 
> 标签：php, windows, codeigniter, scheduled-tasks

我想安排一个 php 函数在用户输入的预定时间执行。我的网站也托管在 Windows 机器上，所以我正在寻找基于 Windows 的解决方案。我做了一个看起来像这样的函数：

```
function sendemail()
{
    $cmd = 'schtasks /create /sc ONCE /tn emailtask /tr http://example.com/index.php/emailnotifications/sendemail';
    exec ($cmd);
} 
```

在上面的代码中，emailnotifications 是我的控制器，而 sendemail 是我编写代码的函数。有谁知道使用php代码在Windows任务计划中创建计划任务的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:23:10.193

我曾经有过这样的要求（意思是服务器是windows），我使用[了cronw](http://cronw.sourceforge.net/)，效果很好。我建议对您的策略进行的唯一更改是每分钟调用一次脚本并将您的所有日程安排在数据库表中。每次执行 sendemail 函数时，它都会检查此时是否有任何电子邮件被安排发送出去，它会发送它们并将它们标记为已处理。这种方法具有很强的可扩展性，因此如果您有数百万人安排电子邮件，那么您最终不会创建数百万个预定任务。

# javascript - node.js 从客户端执行服务器端功能

> ID：12912489
> 
> 赞同：1
> 
> 时间：2012-10-16T10:20:04.277
> 
> 标签：javascript, node.js, client-side, server-side

我在服务器端有 server.js 文件，在客户端有 index.html。我需要通过 index.html 上的按钮或其他东西从服务器端调用一个函数，并在 index.html 上获取该函数已执行的反馈。

将来我还想将变量从客户端传递到服务器端。

我对 node.js 比较陌生。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:40:10.313

Node.js 与任何其他服务器端技术没有什么不同：它不是客户端。

如果你想在服务器上执行一些东西，你有两种方法：

*   提交表格。这将重新加载页面，您可以选择在同一页面上重定向。
*   从客户端运行 ajax 请求以执行服务器端的操作。

第三种方式（感谢 socket.io）是为您的目的使用 websockets。但是，如果您不知道它是什么，我不建议您使用它们。学习 HTTP，然后学习 websockets。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:35:19.250

这是一个很好的问题。我已经使用 Socket.io ( [http://socket.io/](http://socket.io/) ) 完成了这项工作——这是一个很好的库，允许将数据从客户端 (index.html) 发送到服务器，并允许服务器将数据发送到客户。查看 socket.io 网站上的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:48:17.317

好吧，为了简单起见，你的函数应该通过一些 URL “公开”。您可以使用[http://expressjs.com/](http://expressjs.com/)框架来加速服务器端应用程序的创建。一旦你有了它并且你的函数在假设中可用`http://localhost/myFunction?myParameter=myValue`，你可以使用 jQuery 调用`$.json()`从你的客户端应用程序调用该函数，即你的`index.html`.

# windows-phone-7 - 用于终止应用程序的 Windows Phone 后退按钮

> ID：12912496
> 
> 赞同：1
> 
> 时间：2012-10-16T10:20:30.393
> 
> 标签：windows-phone-7, back-button

我有一个带有一些选项的主页。其中之一是导航到有两个箭头的第 1 页。一个导航到 page2、page3，另一个箭头 page3、page2、page1 像循环一样。还有一个导航到主页的箭头。

我想问一下，当用户按下后退按钮时，是否有办法从用户当前所在的任何页面终止应用程序，而不是浏览所有页面。

编辑

如果我想要当我按下后退以始终导航到主页时，我必须做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:32:00.013

`onbackkeypress`清除要退出应用程序的函数内的后退堆栈。它会正常退出应用程序。

**[更新]**

1) 清除回栈后。用于`NavigationService.Navigate(new Uri("MainPage.xaml",UriKind.Relative));`遍历主页面并`e.Cancel = true`在下一条语句中执行。

2) 或者清除后台堆栈到主页。并且自动后按会将您带到主页。在主页内完全清除函数内部的后退堆栈，`OnNavigatedTo`以便第一项始终是您的主页，用户可以轻松退出。

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        while (NavigationService.CanGoBack)
            NavigationService.RemoveBackEntry();
        e.Cancel = true;
        return;
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:48:14.943

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        while (NavigationService.CanGoBack)
            NavigationService.RemoveBackEntry();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:23:38.647

在终止应用程序的 OnBackKeyPress 中引发异常。

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    throw an exception();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:40:25.867

希望这会奏效。如果它的 XNA

```
 if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T10:48:08.410

你也可以这样做，

查看

```
e.NavigationMode == System.Windows.Navigation.NavigationMode.Back 
```

在`OnNavigatedTo`事件中（您需要覆盖每一页）并调用

```
NavigationService.GoBack(); 
```

没有直接退出应用程序的方法.. 见[这里](http://blogs.msdn.com/b/ptorr/archive/2010/08/01/exiting-a-windows-phone-application.aspx)

# php - 如果所有特定的 PHP 数组元素都为空，则不显示表格列

> ID：12912498
> 
> 赞同：0
> 
> 时间：2012-10-16T10:20:38.433
> 
> 标签：php, arrays, multidimensional-array

我有以下一组客户数据：

```
Array
(
    [0] => Array
        (
            [client_id] => 3680
            [firstname] => Brian
            [surname] => May
            [company] => 
        )

    [1] => Array
        (
            [client_id] => 3688
            [firstname] => Freddie
            [surname] => Mercury
            [company] => 
        )

    [2] => Array
        (
            [client_id] => 3694
            [firstname] => Roger
            [surname] => Taylor
            [company] => 
        )
) 
```

我想在表格中显示它，但是如果任何元素在所有情况下都为空（例如本例中的“公司”），我不想在表格中显示该列。

谁能建议在不首先遍历整个数组的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:18:16.863

在这种情况下你不能避免循环，所以我能想到的最好的方法是：

```
<?php

$test = array
            (
        array
        (
            client_id => 3680,
            firstname => 'Brian',
            surname => 'May',
            company => null
        ),

        array
        (
            client_id => 3688,
            firstname => 'FreddieFreddie',
            surname => 'Mercury',
            company => null
        ),

        array
        (
            client_id => 3694,
            firstname => 'Roger',
            surname => 'Taylor',
            company => null
        )
);

$empty_columns = false;
foreach ($test as $item) {
    $keys = array_keys($item, null, true);

    if (count($keys) == 0)
    {
        $empty_columns = null;
        break;
    }

    if ($empty_columns===false)
        $empty_columns = $keys;

    $empty_columns= array_intersect($empty_columns, $keys); 
}
print_r($empty_columns);        
?> 
```

$empty_columns 将返回一个数组，其中所有值为 NULL 的列；在这个例子中：

```
Array
(
    [0] => company
) 
```

只需在打印列之前检查此数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:52:16.613

您可以使用

```
$array = array(
        array('client_id' => 3680,'firstname' => 'Brian','surname' => 'May','company' => NULL),
        array('client_id' => 3688,'firstname' => 'Freddie','surname' => 'Mercury','company' => ''),
        array('client_id' => 3694,'firstname' => 'Roger','surname' => 'Taylor','company' => 'Hello World'));

print("<table>");
foreach ( $array as $list ) {
    print("<tr>");
    $col = array();
    foreach ( $list as $value ) {
        empty($value) or $col[] = $value;
    }

    if (count($col) != count($list)) {
        $ele = array_pop($col);
        foreach ( $col as $td ) {
            printf("<td>%s</td>", $td);
        }
        printf("<td colspan=\"2\">%s</td>", $ele);
    } else {
        foreach ( $col as $td ) {
            printf("<td>%s</td>", $td);
        }
    }
    print("</tr>");
}
print("</table>"); 
```

输出

```
<table>
   <tr>
      <td>3680</td>
      <td>Brian</td>
      <td colspan="2">May</td>
   </tr>
   <tr>
      <td>3688</td>
      <td>Freddie</td>
      <td colspan="2">Mercury</td>
   </tr>
   <tr>
      <td>3694</td>
      <td>Roger</td>
      <td>Taylor</td>
      <td>Hello World</td>
   </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:40:56.300

$array >> 你的数组

```
foreach($array as $arr){

    if( !empty($arr['client_id']) &&  !empty($arr['firstname']) && !empty($arr['surname']) &   !empty($arr['company']) ){

        //show that column

    }else{

        //Don't show

    }

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T10:42:36.600

检查所有空值的代码

```
$company=1;
foreach($yoyrary as $ary)
{
  if($ary[company]==null)
  {
   $company++
  }
} 
```

现在代码显示表

```
 <table>
    <th>client_id</th>
<th>firstname</th>
<th>surname</th>
<?php if($company!=count($yourary)){?><th>company</th><?php }?>
    foreach($yoyrary as $ary)
    {
     <td>client_id data</td>
<td>firstname data</td>
<td>surname data</td>
<?php if($company!=count($yourary)){?><td>company data</td><?php }?>
    }?>
    </table> 
```

# asp.net - 更新编译代码而不是替换为 Visual Studio 2012

> ID：12912499
> 
> 赞同：1
> 
> 时间：2012-10-16T10:20:40.720
> 
> 标签：asp.net, visual-studio-2012

自从使用 Visual Studio 2008 以来，我就遇到了这个问题。

我最近升级到 Visual Studio 2012，但我还没有找到这个解决方案：
有没有办法更新编译的代码文件而不是替换整个站点？

每当我发布我的代码时，VS2012 总是说“......将删除所有现有文件”。

有没有办法简单地“更新现有代码”而不是整个格式？多人使用这个内部网站，我在编辑时不能有任何停机时间。

# php - PhP 中 proc_open 的替代函数？

> ID：12912501
> 
> 赞同：2
> 
> 时间：2012-10-16T10:20:47.783
> 
> 标签：php, wkhtmltopdf

我有一个问题，我在我们的共享主机环境中使用了一个 PHP 类，该类调用 wkhtmltopdf 来生成 PDF 文件，由于服务器攻击主机禁用了 proc_open 和 shell_Exec 以及如果被攻击者使用可能导致问题的所有函数。在主机禁用这些功能之前，一切正常。在我使用的 PHP 类中，由于禁用了 proc_open 函数，下面的方法不再起作用。我可以使用任何替代方法代替下面的方法来返回确切的结果吗？任何帮助高度赞赏。

```
private static function _pipeExec($cmd,$input=''){
                        $proc=proc_open($cmd,array(0=>array('pipe','r'),1=>array('pipe','w'),2=>array('pipe','w')),$pipes);
                        fwrite($pipes[0],$input);
                        fclose($pipes[0]);
                        $stdout=stream_get_contents($pipes[1]);
                        fclose($pipes[1]);
                        $stderr=stream_get_contents($pipes[2]);
                        fclose($pipes[2]);
                        $rtn=proc_close($proc);
                        return array(
                                        'stdout'=>$stdout,
                                        'stderr'=>$stderr,
                                        'return'=>$rtn
                                );
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:21:58.413

该`disable_functions`设置只能自行更改`php.ini`，这意味着它是服务器范围的并且适用于共享主机上的所有站点。

以下是您的选择：

1.  您可以要求您当前的托管服务提供商将您的网站移动到专用机器（或 VPS）。

2.  去别的地方，找一个没有这些限制的供应商；这需要一些时间，但可能是值得的。

3.  DIY。除非您知道自己在做什么，否则不建议设置服务器，但如果您这样做，那么任何平台托管服务提供商都会这样做；如今，您可以在亚马逊上以每月 5 美元左右的价格运行一个小型专用网站。

最后一个选项还为您购买了“外包”PDF 生成的选项，以便您的站点的其余部分仍然在您当前的主机上运行。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-16T10:59:07.257

尝试使用反引号（``）：

```
echo `wkhtmltopdf.exe test.html test.pdf`; 
```

反引号运算符的使用与 shell_exec() 相同。

# php - 狮身人面像搜索过滤器按类别

> ID：12912504
> 
> 赞同：0
> 
> 时间：2012-10-16T10:21:01.563
> 
> 标签：php, mysql, search, sphinx

我有一个不同类别的项目列表。一个项目可能属于多个类别，所以我有 3 个表：项目/类别/连接

我需要过滤/计算搜索结果：

*   类别1（100 项）

*   类别 2（90 项）

*   类别 3（80 项）

*   等等

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:13:10.860

我最近做了这个

[http://www.nearby.org.uk/sphinx/search-example6-withcomments.phps](http://www.nearby.org.uk/sphinx/search-example6-withcomments.phps)

这是一个记录在案的示例，几乎可以满足您的要求。

# extjs - Sencha Touch & Sencha Architect：嵌套模型

> ID：12912508
> 
> 赞同：0
> 
> 时间：2012-10-16T10:21:09.520
> 
> 标签：extjs, sencha-touch-2, sencha-architect

使用 Sencha Architect，我在 Sencha Touch 2 中面临以下问题：我可以定义模型，从 JSONp 代理读取它们，没问题，但是如何定义一个模型，它本身包含另一个模型的数组？

数据加载正常，但“子”模型数组只是一个普通的 JS 对象，例如，我不能使用任何 getter。没有与 Ext Model 定义的链接...

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:52:51.467

首先，确保使用[关联](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.association.Association)定义模型之间的关系。在需要的地方定义关联的 getter 和 setter。然后，使用引用您的顶级模型的商店加载数据。加载后调用 store 上关联数据的 getter。

# oauth-2.0 - 如何在 Google Apps 域中模拟 GoogleCredential？

> ID：12912509
> 
> 赞同：0
> 
> 时间：2012-10-16T10:21:11.367
> 
> 标签：oauth-2.0, google-drive-api, google-apps

我正在制作一个应用程序，允许管理员管理谷歌应用程序域中用户的文件。由于不推荐使用 docList api，因此我使用了 Drive api。

***以管理员身份登录时，如何以其他用户身份创建云端硬盘服务？***

有些人建议使用 OAuth 消费者密钥。

但我不知道如何使用 oauth-2.0 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:20:14.720

您可能想查看这篇文章：[Google Drive 服务帐户返回 403 usageLimits](https://stackoverflow.com/questions/12503437/google-drive-service-account-returns-403-usagelimits/12526286#12526286)

我使用 OAuth2 和服务帐户来完成几乎相同的工作。请记住，您需要使用 API 控制台来设置您的环境，并确保将服务帐户添加到具有适当范围的 Google Apps 域以允许访问。

# jquery - 用jquery检测任何选定的下拉值？

> ID：12912513
> 
> 赞同：3
> 
> 时间：2012-10-16T10:21:18.723
> 
> 标签：jquery

我有一个函数可以通过 keyup 检测所有输入值的变化：

查询：

```
// detect all inputs

$('.inputChange').each(function() {
   // Save current value of element
   $(this).data('oldVal', $(this).val())

   // Look for changes in the value
   $(this).bind("propertychange keyup input paste", function(event){
      // If value has changed...
      if ($(this).data('oldVal') != $(this).val()) {
       // Updated stored value
       $(this).data('oldVal', $(this).val())
        currentVal = $(this).val()
       // Do action
       inputElement = $(this).attr('data-element')
       inputProperty = $(this).attr('data-property')
       inputUnit = $(this).attr('data-unit')
        updateAllCSS(inputElement, inputProperty, currentVal + inputUnit)
     }
   });
 }); 
```

HTML：

```
 <input class="inputChange" data-element=".homeTemplate #colaAlpha h1" data-property="font-size" data-unit="px">px 
```

我现在需要做另一件事，从这个 HTML 中获取选定的下拉值：

```
 <select class="selectChange" data-element=".homeTemplate #colaAlpha" data-property="height" data-unit="px">
         <option value="8">8px</option>
         <option value="12">12px</option>
         <option value="21">21px</option>
     </select>px 
```

我想知道我应该怎么做呢？是否有可能会起作用的 propertychange 事件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T10:28:48.340

看看[http://api.jquery.com/change/](http://api.jquery.com/change/)：

```
$(".selectChange").change(function (){
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:01:32.387

与上述复杂的输入检测代码不同，这里是适用于我页面上的任何选择的选择代码——它使用选定的值和数据标签：

```
$('.selectChange').change(function() {
    updateAllCSS($(this).attr('data-element'), $(this).attr('data-property'), $(this).val() + $(this).attr('data-unit'))
}); 
```

# vtiger - 在 vtiger crm 中，我们如何在潜在客户模块中显示和隐藏“转换潜在客户”链接

> ID：12912515
> 
> 赞同：1
> 
> 时间：2012-10-16T10:21:27.350
> 
> 标签：vtiger

在 vtiger crm 中，我们如何在潜在客户模块中显示和隐藏“转换潜在客户”链接，当我们选择选项列表值时，然后显示和隐藏“转换潜在客户”链接。你能用代码解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T12:58:54.823

您无需编写代码即可。您可以在用户的​​个人资料中禁用它。转到配置文件 > 潜在客户 > 禁用该用户的转换潜在客户..

在你想删除按钮去 Leads/DetailView.php

# apache - 如何使用 mod_pagespeed 重写 HTML 以从我的 CDN 提供图像？

> ID：12912522
> 
> 赞同：3
> 
> 时间：2012-10-16T10:21:48.903
> 
> 标签：apache, mod-pagespeed

我只是想重写包含以下内容的页面：

```
<img src="http://www.example.com/foo/bar/hello.jpg" /> 
```

要这样：

```
<img src="http://cdn.example.com/foo/bar/hello.jpg" /> 
```

我觉得这应该相当简单，但我花了三个小时阅读文档并尝试这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:46:34.383

1.  确保启用[域重写](https://developers.google.com/speed/docs/mod_pagespeed/filter-domain-rewrite)
2.  然后配置您的[重写配置以使用您的 CDN](https://developers.google.com/speed/docs/mod_pagespeed/domains#mapping_rewrite)

这应该可以解决问题。

# java - 无法在 NB7+ 中调试使用 NB6.9.1 创建的项目（具有使用 JNI 的 JAR 依赖项）

> ID：12912527
> 
> 赞同：0
> 
> 时间：2012-10-16T10:22:13.107
> 
> 标签：java, netbeans, java-native-interface, migration, netbeans-7

我刚刚尝试将我们的工作 Java 项目从**Netbeans 6.9.1**迁移到**Netbeans 7.2**，我遇到了一个问题，因为我们的项目依赖项之一是*使用 JNI 的外部 JAR*。

我创建了我们项目目录的副本，并打开了最初使用旧版本 IDE 创建的 NB 项目的副本。一切都很顺利。我可以在 Netbeans 之外构建项目并运行已编译的可执行 JAR-s，而不会出现任何问题。

但是，当我尝试调试项目时，由于上述 JNI 依赖 JAR，应用程序无法正确初始化。就像 JAR 找不到与之关联的 DLL 一样（`java.lang.UnsatisfiedLinkError`结果给了我）。6.9.1 不会发生这种情况！

为什么会发生这种情况？我需要`java.library.path`在NB7+中明确设置吗？

没有对项目进行任何更改（不是我们做的），并且在两个版本的 IDE 中都使用了相同的 JDK。我怀疑较新的版本会默默地对项目设置进行更改，并在此过程中破坏某些东西。有人经历过类似的事情吗？

***编辑1：***

尝试摆弄`project.properties`，设置`-Djava.library.path`VM arg，不同的JDK / JRE，......都无济于事。这让我发疯了。显然我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:13:35.200

我弄清楚出了什么问题。`ext.jar`这只有在我以 Netbeans 项目的形式获得外部 JAR 的源代码（从现在开始）之后才变得明显，因此我可以对其进行调试。

`ext.jar`可能会根据某些条件加载几个 DLL 之一。它通过使用构造一个到适当 DLL 的文件路径`SomeClass.class.getProtectionDomain().getCodeSource().getLocation().getFile()`，然后`System.load(path)`用它的值调用。此路径在两个版本的 Netbeans 之间是不同的。`ext.jar`实际上正被另一个 JAR（也是一个 Netbeans 项目）使用，而该 JAR 又被应用程序的主要可执行 JAR（也是一个项目）使用。

```
Main JAR (Netbeans project)
 ˪ Common JAR (Netbeans project)
     ˪ External JAR with JNI (ext.jar) 
```

我们项目设置中的所有外部库都放置在与所有项目所在级别相同的目录中。这使多个项目能够使用一组通用的库。项目使用相对路径来引用库。

```
CommonLibraries
MainJARProjdir
CommonJARProjdir
RandomProjdir1
…
RandomProjdirN 
```

何时`Main`构建，`Common`必须在它之前构建（`Common`是一个项目依赖`Main`）。在构建过程中`Common`（默认情况下）所有依赖 JAR 都被复制到`${common.proj.dir}/dist/lib`. 复制过程当然不知道它应该将 DLL 与`ext.jar`.

然而，问题的根源在于**6.9.1**和**7+**中对依赖项的**不同处理**。如果我指定为两者的依赖项并且（这是所做的，即使不直接使用其中的任何代码）6.9.1 将使用调试时，它旁边总是有所有必需的 DLL，而 7 + 将始终使用，它缺少 DLL。****`ext.jar``Main``Common``Main``../CommonLibraries/ext.jar``${common.proj.dir}/dist/lib/ext.jar`****

 ****在认识到问题是什么之后，解决方案就变得微不足道了。我添加了一个`-post-clean`目标 to `build.xml`of ，它只是在每次清理后将`Common`所需的 DLL 复制`../CommonLibraries/`到 to 。`${common.proj.dir}/dist/lib/`有效。这应该以任何一种方式完成——为了完整起见。

在两个版本的 IDE 中对依赖项进行不同处理的原因似乎是一个`Project Properties/Build/Packaging`名为***Copy Dependent Libraries***的新复选框。勾选它`Common`也可以。请注意，默认情况下启用此复选框（即使对于库项目）。****

# javascript - Foursquare Button : Uncaught SyntaxError: Unexpected identifier due to quote invenue.html

> ID：12912531
> 
> 赞同：1
> 
> 时间：2012-10-16T10:22:28.093
> 
> 标签：javascript, button, share, foursquare

我正在尝试向我的网站添加 Foursquare 按钮，但遇到了问题。我已经设置了地址中的每个字段，当我尝试按下共享按钮时，我得到的是： Uncaught SyntaxError: Unexpected identifier 问题来自 Foursquare 的venue.html。这是行：http: [//i.stack.imgur.com/gUj18.png](http://i.stack.imgur.com/gUj18.png)

很明显，“d'azur”这句话打破了一切，但我在这个页面上无能为力，这是一个 4 平方米的页面。有人遇到过吗？或者也许有任何想法来解决它？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:30:10.827

感谢您的报告。这是一个错误，我们已经对此进行了修复，您应该很快就会看到。

# mysql - SQL：如何在不覆盖结果的情况下对表的同一列进行多次连接？

> ID：12912537
> 
> 赞同：5
> 
> 时间：2012-10-16T10:22:55.207
> 
> 标签：mysql, sql, join

我有一张篮球比赛桌和一张这样的篮球队桌：

```
MATCHES:
ID   |   HOME_TEAM_ID  |  AWAY_TEAM_ID | SCORE_HOME | SCORE_AWAY
----------------------------------------------------------------
1    |       20        |       21      |     80     |    110
2    |       12        |       10      |     96     |     90

TEAMS:
ID   |   NAME
-------------------------
20   |   BULLS
21   |   KNICKS 
```

给定一个比赛 ID，我想同时检索比分和球队名称。如何进行 JOIN 以从 team 表中检索两个团队名称？

我试过了：

```
SELECT *
FROM matches AS m
JOIN teams AS t1 ON t.id = m.home_team_id
JOIN teams AS t2 ON ti.id = m.away_team_id
WHERE m.id = 1 
```

...但是这里第二个 JOIN 语句的结果似乎覆盖了第一个语句的结果，所以我只得到一个名字：

```
[id] => 1
[score_home] => 80
[score_away] => 110
[name] => KNICKS 
```

我也试过：

```
SELECT *
FROM matches AS m
JOIN teams AS t ON (t.id = m.home_team_id OR t.id = m.away_team_id)
WHERE m.id = 1 
```

...返回两个结果：

```
[id] => 1
[score_home] => 80
[score_away] => 110
[name] => BULLS 
```

和

```
[id] => 1
[score_home] => 80
[score_away] => 110
[name] => KNICKS 
```

我想做一个返回类似这样的查询

```
[id] => 1
[score_home] => 80
[score_away] => 110
[name_home_team] => BULLS
[name_home_team] => KNICKS 
```

那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T10:31:01.893

```
SELECT
    Matches.ID,
    Matches.Score_Home,
    Matches.Score_Away,
    HomeTeam.Name Home_Team_Name,
    AwayTeam.Name Away_Team_Name
FROM
    Matches
    INNER JOIN Teams HomeTeam ON Matches.Home_Team_ID = HomeTeam.ID
    INNER JOIN Teams AwayTeam ON Matches.Away_Team_ID = AwayTeam.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:34:54.977

你只需要用别名命名列名

```
SELECT m.ID,
       m.SCORE_HOME,
       m.SCORE_AWAY,
       t1.NAME as name_home_team,
       t2.NAME as name_home_team
FROM MATCHES AS m
JOIN teams AS t1 ON t1.id = m.home_team_id
JOIN teams AS t2 ON t2.id = m.away_team_id
WHERE m.id = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:29:37.527

```
 select  m.ID,
           (select NAME from TEAM where id=m.HOME_TEAM_ID) HOME_TEAM_NAME,
           m.SCORE_HOME,
           (select NAME from TEAM where id=m.AWAY_TEAM_ID) AWAY_TEAM_NAME,    
           m.SCORE_AWAY 
    from 
    MATCHES m
    where m.ID=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:31:32.970

未经测试，应该可以工作：

```
select x.id, x.score_home, x.score_away, y.name as home_team, z.name as away_team
from matches x,
  (select name from teams where id = x.home_team_id)y,
  (select name from teams where id = x.away_team_id)z
where x.id = 1; 
```

# java - 如何知道方法是 N 还是 N^2

> ID：12912543
> 
> 赞同：1
> 
> 时间：2012-10-16T10:23:02.430
> 
> 标签：java, performance, methods

我经常看到你们谈论 N 方法和 N^2 方法，如果我错了，请纠正我，表明方法有多快。我的问题是：你们怎么知道哪些方法是 N，哪些是 N^2？还有：除了 N 和 N^2 之外，还有其他方法的速度指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:32:02.033

这谈论了算法的复杂性（是的，这是它有多快的指标）

简而言之，它告诉输入大小为“N”的方法需要多少“操作”（操作是一个非常模糊和抽象的术语）。

例如，如果您的输入是一个列表类型的对象，并且您必须遍历列表中的所有项目，则复杂度为“N”。（通常表示为 O(N) ）。

如果您的输入是一个列表类型的对象，并且您只需要查看第一个（或最后一个），并且列表向您保证这样查看该项目是 O(1)；您的方法将是 O(1) - 独立于输入大小。

如果您的输入是一个列表，并且您需要将每个项目与其他每个项目进行比较，那么复杂性将是 O(N²) 或 O(N*log(n))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:33:55.570

> 如果我错了，请纠正我，指出一种方法有多快。

它说明了算法将如何在理想机器上扩展。它故意忽略所涉及的因素，这可能意味着 O(1) 可能比 O(N) 慢，而 O(N) 可能比 O(N^2) 慢。例如 Arrays.sort() 将对小型集合（Java 7 中的长度 < 47）使用插入排序 O(N^2)，而不是快速排序 O(N ln N)

一般来说，使用低阶算法是一个更安全的选择，因为它们不太可能在极端情况下崩溃，而您可能没有机会彻底测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:34:15.230

猜测程序的大 O 复杂性的方法是基于干运行代码的经验（在你的脑海中运行它）。有些情况很明显，但最有趣的情况并非如此：例如，在 O(n) 循环中调用已知为 O(n) 的库方法会导致 O(n ² ) 总复杂度；在 O(n) 循环中写入 a`TreeMap`会导致总计 O(nlogn)，依此类推。

# c++ - 在 C++ 上使用谷歌协议缓冲区进行广播

> ID：12912544
> 
> 赞同：1
> 
> 时间：2012-10-16T10:23:04.700
> 
> 标签：c++, protocol-buffers

我有许多计算机在处理相同的问题，我需要每台计算机能够将解决方案广播给其他计算机。

这是否可以通过 Google 协议缓冲区获得此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:33:11.853

Protocol Buffers 是一种序列化数据的机制，没有任何网络传输组件。您可以使用它来准备要广播的消息，但不会帮助您进行实际的广播。为此，您可能想看看[ZeroMQ](http://www.zeromq.org/)或原始 UDP。

# javascript - 自定义对话框以在浏览器选项卡关闭时获得确认

> ID：12912545
> 
> 赞同：1
> 
> 时间：2012-10-16T10:23:04.137
> 
> 标签：javascript, jquery

> **可能重复：**
> [关闭窗口时如何询问确认？](https://stackoverflow.com/questions/2132760/how-to-ask-confirmation-when-closing-a-window)

我想在浏览器选项卡关闭时显示确认框和自定义消息。用户可以单击“确定”以实际关闭选项卡，单击“取消”以留在页面上。

以下是我的代码。有人能告诉我如何让它工作吗？

```
 window.onbeforeunload = function (e) {
    e = e || window.event;

    // For IE and Firefox prior to version 4
    if (e) {
        e.returnValue = 'ARE you sure?';
    }

    // For Safari
    return 'ARE you sure?';
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:26:32.297

那就试试这个

```
window.onbeforeunload = function (e) {
    e = e || window.event;

    // For IE and Firefox prior to version 4
    if (e) {
        e.returnValue = 'Sure?';
    }

    // For Safari
    return 'Sure?';
}; 
```

# qt - QT Creator：如何仅编译更改

> ID：12912550
> 
> 赞同：9
> 
> 时间：2012-10-16T10:23:14.677
> 
> 标签：qt, build, qt-creator

不知道我的 QT Creator 选项或项目选项中可能发生了什么变化，但由于某种原因，执行构建 (Ctrl-B) 或启动调试会话 (F5) 现在会触发我的项目的完全重建，这需要几分钟时间。我希望它像以前一样只构建更改的文件（和依赖项）。我做错什么了？我使用了“始终在部署前构建”和“始终在运行前部署”设置，但更改这些设置只是在根本不构建或完全重建之间切换。我如何（重新）激活“差异化”构建？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:41:42.913

如果您不想重建项目，可以`qmake`从 qt-creator 菜单运行并开始`build`。如果你有一台好电脑，你可以写到`make` `-j`选项，你的重建时间减少大约 3-4 倍。

# java - 我们什么时候在 JUnit 中使用“理论”？

> ID：12912553
> 
> 赞同：3
> 
> 时间：2012-10-16T10:23:18.723
> 
> 标签：java, junit

在 JUnit 中，一些测试与 @RunWith(Theories.class) 注释一起使用，我不知道我们何时以及为什么使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:27:10.793

当您希望您的测试专注于输入和输出之间的广义关系时，您应该使用它们。请参阅：[https](https://blogs.oracle.com/jacobc/entry/junit_theories) ://blogs.oracle.com/jacobc/entry/junit_theories 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T21:40:20.607

我认为捕获多种类型的输入是一回事。高层次的想法是，您想测试您的方法是否适用于所有可能的输入。

例如，假设我有一个复杂的业务流程，需要 5 个不同的输入，假设每个输入有 10 种可能的状态，所以我们最终得到 10*10*10*10*10 = 100,000 种可能的输入状态，这意味着我们需要事先知道这 100,000 个输出值是什么。

但是，您可能意识到您实际上不需要枚举所有 100,000 个状态。可能有一个您感兴趣的子集。让我们理论化例如：

“管理员没有权限限制”。如果我想断言这是真的，我的测试最终看起来像下面的伪代码。

```
@Test
public void AdminsHaveNoPermissionRestriction(User user, BusinessProcess bp, Input a, Input b ...) {
   Assume.assumeThat("User is an admin", user.hasRole(admin);

   // .. rest of test which uses bp, a, b etc...
) 
```

好消息是我们跳过了不感兴趣的对象（非管理员），因为它不符合假设。

# c++ - 正确使用makefile

> ID：12912555
> 
> 赞同：2
> 
> 时间：2012-10-16T10:23:27.507
> 
> 标签：c++, compilation, makefile

所以，我试图理解makefile。目前我有一个带有一些模块的项目，它们或多或少是不依赖于彼此的。

我的目录树是这样的：

```
root/
- Source/ <-- referenced as $(INPUTPATH)
- Build/ <-- referenced as $(BUILDPATH)
- Release/ <-- referenced as $(OUTPUTPATH)
- Makefile 
```

我想在 Source/ 上拥有源代码 ( *.cpp/* .h)，在 Build/ 上拥有对象，在 Release/* 上拥有可执行文件。

所以，我的想法是有几个不同的目标，并像这样使用它们：

```
all: maps auxiliars methods
    @echo "linking...";\
    $(CC) $(CFLAGS) $(OBJS) $(CLIBS) -o ${OUTPUTPATH}/MainProgram

dependency1: $(INPUTPATH)/foo.cpp
    @echo "compiling ArbPrecision...";\
    cd ${BUILDPATH};\
    $(CC) $(CFLAGS) $(CINCLUDE) -c ../$?

dependency2: dependency1 $(INPUTPATH)/bar.cpp
    @echo "compiling saddleConstructor...";\
    cd ${BUILDPATH};\
    $(CC) $(CFLAGS) $(CINCLUDE) -c ../$(INPUTPATH)/bar.cpp

maps: dependency2 $(INPUTPATH)/*Map.cpp
    @echo "compiling maps...";\
    cd ${BUILDPATH};\
    $(CC) $(CFLAGS) $(CINCLUDE) -c ../$(INPUTPATH)/*Map.cpp
... (auxiliars and methods) 
```

$CINCLUDE 和 CFLAGS 只是编译器的东西，比如头文件和外部库。

一切工作几乎完美：在每个目标上，它都要求其他目标的依赖关系，以及源上的 *cpp。如果它不存在，它会调用目标并编译 *cpp。可执行文件的创建没有错误。

但是，如果我两次调用“make”，第一次和第二次编译所需的时间是相同的，即使我没有对源代码进行任何更改。因此，显然，我没有正确放置依赖项。

谁能指出我执行此编译的正确方向？我做错了什么，我不明白它是什么。

谢谢，豪尔赫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:39:44.977

Make 期望对*文件*进行操作。对于每个规则，它会检查由该规则 (1) 命名的目标*文件*是否存在以及 (2) 是否是最新的（即，在其任何依赖项之后修改）。如果文件不是最新的，则执行规则以使其保持最新。

因此，由于当前编写了 makefile，当您运行时`make`，Make 会执行以下操作：

*   `all`是第一条规则，所以如果你不指定任何参数，make 会处理这`all`条规则。
*   不存在名为的文件`all`，因此`all`需要执行规则。
*   `all`取决于`dependency1`规则。不存在名为的文件`dependency1`，因此`dependency1`需要执行规则。
*   `dependency1`取决于`dependency2`规则。不存在名为的文件`dependency2`，因此`dependency2`需要执行规则。

相反，您想要的是类似于以下内容：

```
OBJS := foo.o bar.o Map.o

all: $(OUTPUTPATH)/MainProgram

$(OUTPUTPATH)/MainProgram: $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) $(CLIBS) -o $(OUTPUTPATH)/MainProgram

%.o: %.cpp
    $(CC) $(CFLAGS) $(CINCLUDE) $< -c $@

.PHONY: all 
```

请注意以下事项：

*   由于 Make 对文件进行操作，规则的目标和依赖项尽可能按文件名列出。
*   不是单独列出 .cpp 文件，而是使用[模式规则](http://www.gnu.org/software/make/manual/make.html#Pattern-Rules)来构建每个 .o 文件。在模式规则中，变量`$<`和`$@` [自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)分别用于指定第一个先决条件（文件）和目标（文件）。
*   Make 默认会回显它的命令，所以你不需要`echo`自己。
*   对于 GNU Make，`all`被列为[虚假目标](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)，以防止 Make 寻找名为`all`.

# android - 为每个活动放置一个页脚

> ID：12912559
> 
> 赞同：0
> 
> 时间：2012-10-16T10:23:31.163
> 
> 标签：android

我试图通过使用包含将 TextView 放置在每个活动的底部......我的代码在下面......我不知道为什么，但它仍然在顶部......虽然它适用于 TextView。

```
<?xml version="1.0" encoding="utf-8"?> 
   <RelativeLayout xmlns:android="schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:background="#E0E0E0"
    android:orientation="vertical" />

    <include
        android:layout_alignParentBottom="true"
        android:id="@+id/footer"
        layout="@layout/footer" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:layout_alignParentBottom="true"
        android:text="Hello"
        android:textColor="#000000"
        android:textSize="15dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:27:00.097

¿ 也许您使用的是 LinearLayout 而不是 RelativeLayout？后者没有 android:orientation 属性。我们看不到父 XML 节点，所以只是猜测

此外，您需要将包含放在底部，将 TextView 放在其上方

```
<TextView
...
android:layout_above="@id/footer" /> 
```

现在你正在重叠两个视图

另一个建议是使用 FragmentActivity 和 Fragment 来处理页脚，但这超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:30:31.657

在与父布局相同的 xml 代码中使用 RelativeLayout。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:48:28.190

好吧，我得到了解决方案……我不得不在另一个子相对布局中添加包含……这就是我所做的……

```
enter code here 
```

相对布局 android:layout_width="fill_parent" android:layout_height="wrap_content" >

```
 <include
        android:id="@+id/footer"
        android:layout_alignParentBottom="true"
        layout="@layout/footer" />
</RelativeLayout> 
```

但是...对于文本视图，它直接工作而无需使用另一个子布局...那么为什么您需要为包含执行此操作.....????:|

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:54:59.470

我检查了你的代码。它工作正常，如第 1 篇文章中所述。请注意，当您使用`layout`标记时，Eclipse 的**图形布局**将不会绘制您包含的子 xml 布局（在您的情况下`footer.xml`）。同时，如果您在实际设备或模拟器上运行相同的代码，您将获得所需的页脚。

注意：您可能希望`android:layout_alignParentBottom="true"`从`textView1`当前`textView1`和`footer`布局重叠中删除。

# android - android中错误处理的正确方法

> ID：12912564
> 
> 赞同：0
> 
> 时间：2012-10-16T10:23:43.413
> 
> 标签：android, exception, exception-handling, error-handling

我有通过 RestClient 连接到服务器的应用程序。我想在那里实施正确的错误处理方法，特别是如果用户失去互联网连接，则使用 ConnectException 和 HttpHostConnectException。我在 RestClient 中实现了 AsyncTask 类，其中包含所有 PUT、GET、POST、DELETE 方法并在那里处理结果。如果用户在上面得到异常匹配，我想抛出我自己的异常，例如 NoInternetConnection。并处理我自己的异常，重新加载当前 Activity 并显示消息“No Internet”消息。我试图在 RestClient 中处理 HttpHostConnectException 并抛出我的 NoInternetConnection 并在我的 Activity 中捕获它，但我得到了

```
 Unreachable catch block for NoInternetException. This exception is never thrown from the try statement body 
```

这意味着我应该从 Activity 的 try 语句中抛出我的异常。我尝试使用错误的静态变量，如果此变量在 RestClient 中为真，则从 Activity 中抛出异常。但我认为这不是最好的方法。另一个想法是处理 RestClient 类中的所有错误，但它不是 Activity，我应该使用 Handler 或类似的方法来确定当前的 Activity 并显示我的 Toast 消息丢失互联网。请告诉我什么是最好的方法。我的 RestClient 类：

```
 public class RestClient
   {
     class AsyncExecute extends AsyncTask<RequestMethod, InputStream, Object> 
    {
          protected InputStream doInBackground(RequestMethod... param) {
              HttpUriRequest request;
                HttpResponse httpResponse;
                DefaultHttpClient client = getNewHttpClient();
                InputStream instream = null;
                RestClient.this.AddHeader(CoreProtocolPNames.USER_AGENT, "Android-AEApp,ID=2435743");
                RestClient.this.AddHeader(ClientPNames.COOKIE_POLICY,  CookiePolicy.RFC_2109);
                RestClient.this.AddHeader("User-Agent",  "Android-AEApp,ID=2435743");
                RestClient.this.AddHeader("Accept",  "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"); 
                if (CookieStorage.getInstance().getArrayList().isEmpty())
                    CookieStorage.getInstance().getArrayList().add("PHPSESSID=lc89a2uu0rj6t2p219gc2cq4i2");
                RestClient.this.AddHeader("Cookie",  CookieStorage.getInstance().getArrayList().get(0).toString()); 
                switch(param[0]) {
                    case GET:
                    {
                        //add parameters
                        String combinedParams = "";
                        if(!params.isEmpty()){
                            combinedParams += "?";
                            for(NameValuePair p : params)
                            {
                                String paramString = null;
                                try {
                                    paramString = p.getName() + "=" + URLEncoder.encode(p.getValue(),"UTF-8");
                                } catch (UnsupportedEncodingException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                                if(combinedParams.length() > 1)
                                {
                                    combinedParams  +=  "&" + paramString;
                                }
                                else
                                {
                                    combinedParams += paramString;
                                }
                            }
                        }

                         request = new HttpGet(url + combinedParams);

                        //add headers
                        for(NameValuePair h : headers)
                        {
                            request.addHeader(h.getName(), h.getValue());
                        }

                       // executeRequest(request, url);
                        break;
                    }
                    case POST:
                    {
                        request = new HttpPost(url);

                        //add headers
                        for(NameValuePair h : headers)
                        {
                            request.addHeader(h.getName(), h.getValue());
                        }

                        if(!params.isEmpty()){
                            try {
                                ((HttpEntityEnclosingRequestBase) request).setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
                            } catch (UnsupportedEncodingException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }           
                        break;
                    }
                    case PUT:
                    {
                        request = new HttpPut(url);

                        //add headers
                        for(NameValuePair h : headers)
                        {
                            request.addHeader(h.getName(), h.getValue());
                        }

                        if(!params.isEmpty()){
                            try {
                                ((HttpEntityEnclosingRequestBase) request).setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
                            } catch (UnsupportedEncodingException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }

                        break;
                    }
                    case DELETE:
                    {
                        request = new HttpDelete(url);

                        //add headers
                        for(NameValuePair h : headers)
                        {
                            request.addHeader(h.getName(), h.getValue());
                        }

                        if(!params.isEmpty()){
                            try {
                                ((HttpEntityEnclosingRequestBase) request).setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
                            } catch (UnsupportedEncodingException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }

                        //executeRequest(request, url);
                        break;
                    }
                    default:
                        request = null;
                }

                try {
                    httpResponse = client.execute(request);
                    if (httpResponse.getLastHeader("Set-Cookie")!=null)
                    {
                        CookieStorage.getInstance().getArrayList().remove(0);
                        CookieStorage.getInstance().getArrayList().add(httpResponse.getLastHeader("Set-Cookie").getValue());
                    }
                    responseCode = httpResponse.getStatusLine().getStatusCode();
                    message = httpResponse.getStatusLine().getReasonPhrase();
                    Header[] headers = httpResponse.getAllHeaders();
                    for(Header head : headers)
                    {
                        Log.i("RestClient headers", head.toString());
                    }
                    Log.i("RestClient response status code", Integer.toString(responseCode));
                    if (responseCode == 401)
                    {

                        Intent i = new Intent(context,
                                LoginActivity.class);
                        i.putExtra("relogin", true);
                        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        context.startActivity(i);

                    }

                    HttpEntity entity = httpResponse.getEntity();
                    if (entity != null) {

                        instream = entity.getContent();

                    }

                } catch (ClientProtocolException e)  {

                    client.getConnectionManager().shutdown();
                    e.printStackTrace();
                } 

                catch (IOException e) {
                    client.getConnectionManager().shutdown();
                    publishProgress();
                    e.printStackTrace();
                }

                return instream;

          }
          protected void onProgressUpdate(Void... progress) {
              Toast.makeText(context, "You've lost internet connection. You should try later.",Toast.LENGTH_LONG)
               .show();
            }

            protected void onPostExecute(Object  result) {

                 if(result instanceof Exception) {
                        try {
                            throw new NoInternetException();
                        } catch (NoInternetException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                    else{

                        super.onPostExecute((InputStream) result);
                        }
                    }

            }
    public InputStream Execute(RequestMethod method) throws Exception
    {   
        AsyncExecute mt = new AsyncExecute();
        mt.execute(method);
        InputStream stream  = (InputStream) mt.get();
        return stream;
     }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:22:23.580

我认为，如果您有错误（或报告成功，您应该从 RestClient 执行此操作 - 正如您所说，您将需要一种使用标准处理程序技术来处理 UI 线程的方法。

使用静态单例通常被认为是一种反模式，并且可能是个坏主意。

# html - 可点击的 DIV 或 A 标签？

> ID：12912566
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:23:58.813
> 
> 标签：html, clickable

我的主页上有一个标有以下代码的框：

```
<div class="panel radius">
    <h3>Lorem ipsum dolor</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit curabitur elit libero, porta condimentum lobortis laoreet, faucibus eget.</p>
</div> 
```

我想让整个框可点击。将DIV更改为A标签或使用jQuery使DIV可点击会更好吗？只是在寻找最好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:28:29.527

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".panel radius").click(function(){
            window.location = URL; 
        });
    });
</script> 
```

**[演示](http://jsfiddle.net/qUyp2/84/)**

# svn - SVN外部文件没有提交正常吗？

> ID：12912573
> 
> 赞同：6
> 
> 时间：2012-10-16T10:24:09.737
> 
> 标签：svn, tortoisesvn, svn-externals

我对 Subversion 还很陌生，最近学习了如何使用`svn:externals`. 现在，当我提交主干文件夹并创建一个标签来拍摄项目的快照时，定义为外部的文件/文件夹将不会添加到标签文件夹中。

例如，我有这个文件夹结构

> Z:\repos\repoA
> 
> Z:\repos\repoB
> 
> Z:\项目\workB

我已设置`svn:externals`为`Z:\Projects\workB`使`file:///Z:/repos/repoA/trunk/lib trunk/lib`.lib`repoA`文件夹自动添加到当前工作目录中`Z:\Projects\workB\trunk`。实际上，当我执行时`SVN Update`，会在主干文件夹下创建 lib 文件夹。

在编辑了一些文件并执行`SVN Commit...`之后`Z:\Projects\workB\trunk`，我`TortoiseSVN -> Branch/Tag`从上下文菜单中进行了选择。在该`To Path`字段中，键入`tags/1.0.1`并按 OK。1.0.1 标签已成功创建。

在我执行后`SVN Update`，`Z:\Projects\workB\tags`出现了一个名为 1.0.1 的文件夹，但没有外部文件。

这是正常的吗？我预计导入的文件也会在那里，因为它们位于工作目录的主干文件夹中。

* * *

我在 Assembla 创建了两个公共存储库，供任何人测试。

*   [https://www.assembla.com/code/subversion-trouble-shooting/subversion/nodes](https://www.assembla.com/code/subversion-trouble-shooting/subversion/nodes)
*   [https://www.assembla.com/code/subversion-troubleshoot-b/subversion/nodes](https://www.assembla.com/code/subversion-troubleshoot-b/subversion/nodes)

`lib`第二个存储库具有外部定义，它从第一个存储库中拉下文件夹。当我从第二个存储库创建当前主干文件的标签时，它不会将外部文件添加到标签文件夹中。此外，当我签出标签文件夹时，它不会将外部文件添加到本地工作副本中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:00:07.647

当您设置 externals 属性时，它不会将文件从外部存储库复制到您的工作存储库。相反，它只是创建一个关于将来从哪里获取这些文件的“注释”。

因此，当您创建标签时，svn 不会费心复制外部链接的实际文件。相反，它只是复制“注释”。如果您要检出您的`tags/1.0.1`目录（或者如果它已经在本地检出，则进行更新），那么您会注意到即使这些文件在工作存储库中不存在，它也会正确拉下相关的外部文件。

## 编辑：

啊，我终于看到问题了。您将外部设置在根目录而不是主干目录中。

查看 svn 的最佳方式是它只是一个文件系统，主干、标签和分支的整个想法只是概念性的想法，每个目录与下一个目录没有什么不同。

因此，当您将主干复制到标签目录时，外部属性不会被转移，因为它们不是主干目录的一部分（他们只说将外部项目放在主干中）。要解决您应该从根目录中删除外部属性并将它们添加到主干。下次创建标签时，应传输外部属性。

以下命令：

```
svn propget svn:externals file:///Z:/Projects/workB/trunk 
```

应该输出：

```
file:///Z:/repos/repoA/trunk/lib lib 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:13:54.407

你的期望是正确的。svn 副本必须创建源对象的 100% 副本，即 - 外部定义（和内容）必须出现在标签中

1.  查看`svn ls -v -R file:///Z:/repos/repoB/tags/1.0.1`
2.  为了更容易检查和排除故障，我建议转移到公开可用的 repo-set - 进行测试，您可以使用两个或更多 SVN-repos 在 Assembla 自由空间上创建

**与问题说明无关：**按照惯例，标签用作*代码冻结点*（以后从任何时候您都可以获得完全相同的代码），但这意味着您还必须将所有外部对象锁定到创建标签的状态。repos/repoA/trunk/lib 是 HEAD 修订版，随着时间的推移而变化，标签 1.0.1 的相应修订版（链接标签 rev - lib rev）将丢失。阅读有关 PEG 修订的信息

**编辑**

在主干中测试了带有扩展名的 Assembla 存储库。测试失败：

```
>svn co https://subversion.assembla.com/svn/subversion-troubleshoot-b/trunk .
A    core_mod.txt
Checked out revision 4 
```

只是，我还必须检查 /lib 文件夹

**编辑2**

对于 subversion-troubleshoot-b repo：修复应用于定义，创建正确编写的标签 ( [1.0.1](https://subversion.assembla.com/svn/subversion-troubleshoot-b/tags/1.0.1) )，外部绑定到 PEG-revision

查看中继和标签结帐之间的差异

```
z:\>svn co https://subversion.assembla.com/svn/subversion-troubleshoot-b/
...

Fetching external item into 'subversion-troubleshoot-b\trunk\lib':
A    subversion-troubleshoot-b\trunk\lib\lib01.txt
Checked out external at revision 4.

Fetching external item into 'subversion-troubleshoot-b\tags\1.0.1\lib':
A    subversion-troubleshoot-b\tags\1.0.1\lib\lib01.txt
Checked out external at revision 2.

Checked out revision 7. 
```

如果您稍后在链接的 repo 中更改 lib-trunk 将获得文件夹的最新内容，1.0.1-将始终使用 subversion-troubleshoot 中的 lib 修订版 2

# android - Concat数据库表1字段在一行中有多个记录字符串

> ID：12912580
> 
> 赞同：1
> 
> 时间：2012-10-16T10:24:26.837
> 
> 标签：android, sql, sqlite, cursor

我有一个表格和记录，例如：

```
EmployeeName
------------
Ram
Laxman
Bharat
Shatrugn 
```

我想在一个查询中输出连接一行中的所有值：

我想要这样的结果：

```
Ram,Laxman,bharat,shatrugn 
```

在单行中用 ,(comma) 连接字符串.. 但我不知道如何使用光标在 android 中连接...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:28:29.260

在 SQLite 中，您可以使用[`GROUP_CONCAT()`](http://www.sqlite.org/lang_aggfunc.html)：

```
select Group_Concat(EmployeeName)
from table1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/2b1d3/1)

如果您有多个要返回的字段，则可以`GROUP BY`在查询中使用 a，类似于：

```
select id, Group_Concat(EmployeeName)
from table1
group by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/29a51/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:40:04.150

```
 String values;
       if (cursor.moveToFirst()) {
                do {

               values=values + cursor.getString(0)+",";

                } while (cursor.moveToNext()); 
```

删除最后一个逗号

```
if (values.length() > 0)
 {
    values= values.substring(0,values.length() - 1);    
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:43:45.837

这是我使用的代码...希望对您有所帮助。

```
 private SQLiteDatabase myDataBase;
 Cursor cursor;
 String S="";
 String myPath2 = yourDBpath + yourDBNAME;
 try{
 myDataBase = SQLiteDatabase.openDatabase(myPath2, null,SQLiteDatabase.OPEN_READWRITE);
 String sql="your query";
 cursor=myDataBase.rawQuery(sql, null);
if(cursor != null)
{
   while(cursor.moveToNext())
   {
    S=S.append(cursor.getString(0));
    }
}
  } 
}catch(Exception e){

        }finally{
        myDataBase.close();
        } 
```

最终结果将在 String S 中。

# php - 要在表格单元格中显示的数组数据，其中 col 和 row 在数组中给出

> ID：12912582
> 
> 赞同：0
> 
> 时间：2012-10-16T10:24:36.130
> 
> 标签：php, html, arrays, html-table

我有一个数组

```
Array ( 
    Array ( 
        [id] => 1 ,
        [schedule_id] => 4 ,
        [subject] => Subject 1 ,
        [classroom] => 1 ,
        [time] => 08:00:00 ,
        [col] => 1 ,
        [row] => 1 
    ), 
    Array ( 
        [id] => 2 ,
        [schedule_id] => 4 ,
        [subject] => Subject 2 ,
        [classroom] => 1 ,
        [time] => 08:00:00 ,
        [col] => 2 ,
        [row] => 1 
    ), 
    Array ( 
        [id] => 3 ,
        [schedule_id] => 4 ,
        [subject] => Subject 3 ,
        [classroom] => 2 ,
        [time] => 09:00:00 ,
        [col] => 1 ,
        [row] => 2 
    ), 
    Array ( 
        [id] => 4 ,
        [schedule_id] => 4 ,
        [subject] => Subject 4 ,
        [classroom] => 2 ,
        [time] => 09:00:00 ,
        [col] => 2 ,
        [row] => 2 
    ) 
) 
```

我想根据 col 和 row 值以表格格式显示它

```
col 1 & row 1           col 2 $ row 1   
1st array data          2nd array data
Subject, room, time     Subject, room, time
1,  1,  08:00           2,  1,  08:00

col 1 $ row 2           col 2 $ row 2   
3rd array data          4th array data
Subject, room, time     Subject, room, time
3,  2,  09:00           4,  2,  08:00 
```

我是数组的新手，需要您支持才能对这张表进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:37:16.353

```
if(count($array)>0){ // check if array has elements in it  
 echo "<table>";  
 // print table header  
 echo "<thead><tr>";  
 foreach($array[0] as $key=>$value){  
    echo "<th>$key</th>";  
 }  
 echo "</tr></thead>";

 // print rows  
 echo "<tbody>";
 foreach($array as $index=>$row){ 
  echo '<tr>';
  foreach($row as $key=>$value){  
   echo "<td>$value</td>";  
  }   
  echo "</tr>";  
 }  
 echo "</tbody></table>";  
} 
```

对于排序，您可以尝试 jquery 插件 - 数据表

自定义排序：

```
foreach($array as $index=>$arr){
 for($i=$index; $i< count($array); $i++){
  if(strtotime($array[$index]['time']) > strtotime($array[$i]['time'])){ // acsending order
   $temp = $array[$index];
   $array[$index] = $array[$i];
   $array[$i] = $temp;
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:37:22.530

尝试这个

```
<table>
<tr>
   <th>id</th>
   <th>schedule_id</th>
   <th>subject</th>
   <th>classroom</th>
   <th>time</th>
   <th>col</th>
   <th>row</th>
</tr>
foreach($myarray as $row)
{
    echo("<tr>");
       echo("<td>".$row['id']."</td>");
       echo("<td>".$row['schedule_id']."</td>");
       echo("<td>".$row['subject']."</td>");
       echo("<td>".$row['classroom']."</td>");
       echo("<td>".$row['time']."</td>");
       echo("<td>".$row['col']."</td>");
       echo("<td>".$row['row']."</td>");
    echo("</tr>");
}
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:37:08.040

这是我为显示结果所做的工作

```
<table id="TimeTable">
      <thead>
      <th style="width:20px; padding-right:10px;">No.</th>
      <th style="width:160px; padding-right:10px;">Monday</th>
      <th style="width:160px; padding-right:10px;">Tuesday</th>
      <th style="width:160px; padding-right:10px;">Wednesday</th>
      <th style="width:160px; padding-right:10px;">Thursday</th>
      <th style="width:160px; padding-right:10px;">Friday</th>
      </thead>
      <tbody>
        <?php for($r=1; $r<=8; $r++) {  ?>
            <tr>

            <td style="text-align: center; padding-right: 10px; padding-right: 10px;"><strong><?php echo $r; ?>.</strong></td>

            <?php for($c=1; $c<=5; $c++) { ?>

                <td><?php 
                    foreach ($rows as $row):
                        if(($row->row == $r) && ($row->col == $c)) {
                            echo $row->subject." <br />Classroom: ".$row->classroom." <br />Time: ".$row->time; 
                        } 
                    endforeach;
                ?></td>

                     <?php  } //col for loop ?>

            </tr>

        <?php    
                } // row for loop 
          ?>
        </tbody>
    </table> 
```

# internet-explorer - Twitter bootstrap：跨浏览器圆角和渐变？

> ID：12912587
> 
> 赞同：2
> 
> 时间：2012-10-16T10:24:45.880
> 
> 标签：internet-explorer, twitter-bootstrap, cross-browser, css

有什么方法可以将 Twitter Bootstrap 跨浏览器支持添加到圆角和 css 渐变（阅读：愚蠢的 IE 7+ 支持）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:26:43.087

我会使用 CSSPIE - [http://css3pie.com/](http://css3pie.com/)

这是一个 .htc 文件，可让您执行此操作。

在您使用边框半径（例如）的任何 CSS 选择器中，您将 .htc 作为行为包括在内：

```
.rounded {
    border: 1px solid #999;
    -webkit-border-radius: 10px;
       -moz-border-radius: 10px;
            border-radius: 10px;
    behavior: url(path/to/PIE.htc);
} 
```

**注意：**确保您的路径是相对于根而**不是**CSS 文件的。.htc 文件必须以这种方式运行，原因只有 Microsoft 知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T10:27:59.980

您可以为 IE7 创建自己的条件样式表，您需要将图像用于渐变和圆角。

但最好的方法是让客户（或任何人）相信他们应该接受他们的网站在 IE7 上没有圆角或渐变。设计师应该意识到浏览器的限制，并在提交给客户的简报中迎合这些限制。

# c# - c# 类实现来保存只读相关数据（数据表更好的选择）

> ID：12912591
> 
> 赞同：0
> 
> 时间：2012-10-16T10:25:19.737
> 
> 标签：c#, datatable, implementation, relationship

我们有一个**静态的只读**信息表，需要定期查阅。问题是**这些数据是相关的**，我们需要能够**使用任何其他相关属性作为索引来获取任何属性**......

在一种或两种情况下，其中一个属性可能会在行之间重复，但这种情况很少发生......（参见示例中的 ORDR 值）

例子：

```
formtypex | objectcode | table | description
  149          23         OQUT     Quotation
  139          17         ORDR     Order
  140          18         ORDR     Especial Order 
```

期望的用途是这样的：

```
//having one property recover another property the easiest and fastest way possible
string exampleformtypex="149";

string objectcodex=relations.FromFormtypex(exampleformtypex).ObjectCode;

//or a shorter way:
string objectcodex=relations.Find(exampleformtypex, FindMode.FormTypex).ObjectCode;

//or
string objectcodex=relations.Find(exampleformtypex, FindMode.FormTypex, ResultMode.ObjectCode);

//or better
string objectcodex=relations[FindMode.FormTypex, exampleformtypex].ObjectCode;

//or if you can illustrate me with a better aproach
... 
```

为了实现这一点，类/es定义和方法将如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:24:00.533

鉴于数据集很小，最好的办法是创建一个类（或结构）来保存所有值并将其全部加载到内存中

```
public class Relations
{
  public int formtypex;
  public int objectcode;
  public string table;
  public string description;

} 
```

然后，您可以将其放入 List 并使用 linq 进行查询。它是如此之小，以至于遍历列表不会特别昂贵。

如果您希望它非常简单，则可以将函数包装在静态 LookupRelations 类中。

# javascript - 选中复选框时更改 tr 颜色

> ID：12912593
> 
> 赞同：0
> 
> 时间：2012-10-16T10:25:27.347
> 
> 标签：javascript, knockout.js

我创建了如下表：

```
<table data-bind="with: choosenDateGoal">                       
   <tbody data-bind="foreach: tblGoals">
      <!-- ko if: status -->
         <tr class="success">
          <td>
            <input type="checkbox" onclick="this.disabled = 'disabled';" data-bind="checked: status, disable: status, click: $root.UpdateStatus" />
           </td>
          <td>
           <span style="width: 80%" data-bind="text: goals" />
           </td>
           <td>
           <input type="text" style="width: 80%" data-bind="value: notes , event: { blur: $root.UpdateNote}" />
           </td>
           </tr>
          <!-- /ko -->

           </tbody>
    </table> 
```

我在每一行都有一个复选框，当我点击它时，它应该改变行颜色。但不工作。这是我改变颜色的脚本：

```
self.UpdateColor = function ChangeBackgroundColor() {
    debugger;
    if ($("input[type='checkbox']:checked")) {
        $(this).parent().addClass('success'); ;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:33:22.873

使用 knockout 的 css 绑定 - 请参阅[http://knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html) 尝试下面的绑定，您不会调用 ChangeBackgroundColor 函数

```
 <tr data-bind="css: {success: status()}"> 
```

Zaik 的答案会起作用，但如果你用淘汰赛的方式来做，你不需要添加任何 JavaScript 事件代码。这是淘汰赛的真正好处之一。

# php - eBay 喜欢的数据库结构

> ID：12912596
> 
> 赞同：0
> 
> 时间：2012-10-16T10:25:33.820
> 
> 标签：php, mysql, database, cakephp

我正在尝试像结构数据库一样了解 eBay。

鉴于每种类型的产品都有不同的列，我必须先获取 products 表，然后是 products descriptions 表，它是一个元表，其中包含 key 和 value 列，product_id 作为 Products 表的外键

我还有 Specifications 表，它是与 Subsubcategory 表的 hasAndBelongsToMany 关系（它具有与 Subcategory 的 belongsTo 关系，然后是 belongsTo 类别关系）所以我有 Specifications Subsubcategory 的联接表，然后还有 Specifications_Category 表属于 Specifications 表。

现在。我希望我的用户在想要创建产品销售页面或可以选择创建自定义产品时选择具有所有产品规格的产品，然后根据预定义的列将这些特定详细信息输入到产品详细信息元表中从该子类别的规范中读取。

给你举个例子：

我现在正在使用 Cakephp 的脚手架功能添加规范，并且我有一个表单，其名称为 - 1TB，规范类别 - 硬盘容量（属于）和子类别 - 即。笔记本电脑、台式机 (hasAndBelongsTo)

这是构造这样的东西的正确方法吗？

# javascript - 该项目存在于数组中，但它表示该数组的长度为 0？

> ID：12912598
> 
> 赞同：4
> 
> 时间：2012-10-16T10:25:52.250
> 
> 标签：javascript

我可以将一个项目添加到一个数组中，并且我可以访问该项目，但`length`报告`0`. 为什么？

```
var arr = [];
arr[4294967300] = "My item";
console.log(arr[4294967300], arr.length); // Outputs "My item", 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:27:24.007

那是因为索引太大以至于它变成了一个属性，因此长度为0。

根据[ECMAScript 文档](http://bclary.com/2004/11/07/#a-15.4)，特定值 p 只能是数组索引，当且仅当：

```
(p >>> 0 === p) && (p >>> 0 !== Math.pow(2, 32) - 1) 
```

`>>> 0`相当于哪里`ToUint32()`。在你的情况下：

```
4294967300 >>> 0 // 4 
```

根据定义，`length`属性总是比最大​​有效索引的数值大一；负指数会给你同样的行为，例如

```
arr[-1] = 'hello world';
arr.length; // 0
arr['-1']; // 'hello world' 
```

如果您的数字介于有效（并用作索引）和“无效”（它变成属性）之间，最好将所有索引转换为字符串并一直使用属性（开始用`{}`而不是`Array`）。

# c++ - 通过套接字发送大数据

> ID：12912599
> 
> 赞同：3
> 
> 时间：2012-10-16T10:25:53.933
> 
> 标签：c++, linux, sockets, networking, tcp

我正在通过套接字发送大数据（嗯...... 1Mb），但我不知道为什么发送操作会阻塞程序并且永远不会结束。小型发送完美运行，我找不到问题出在哪里。任何人都可以帮助我吗？

提前感谢您提供的任何帮助。

```
int liResult = 1;
int liConnection = 0;
int liSenderOption = 1;
struct addrinfo laiSenderAddrInfo;
struct addrinfo *laiResultSenderAddrInfo;

memset(&laiSenderAddrInfo,0,sizeof(laiSenderAddrInfo));
laiSenderAddrInfo.ai_socktype = SOCK_STREAM;
laiSenderAddrInfo.ai_flags = AI_PASSIVE;

liResult = getaddrinfo(_sIp.c_str(), _sPort.c_str(), &laiSenderAddrInfo, &laiResultSenderAddrInfo);

if (liResult > -1)
{
    liConnection = socket(laiResultSenderAddrInfo->ai_family, SOCK_STREAM, laiResultSenderAddrInfo->ai_protocol);
    liResult = liConnection;

    if (liConnection > -1)
    {
        setsockopt(liConnection, SOL_SOCKET, SO_REUSEADDR, &liSenderOption, sizeof(liSenderOption));
        liResult = connect(liConnection, laiResultSenderAddrInfo->ai_addr, laiResultSenderAddrInfo->ai_addrlen);
    }
}

size_t lBufferSize = psText->length();
long lBytesSent = 1;
unsigned long lSummedBytesSent = 0;

while (lSummedBytesSent < lBufferSize and lBytesSent > 0)
{
    lBytesSent = send(liConnection, psText->c_str() + lSummedBytesSent, lBufferSize - lSummedBytesSent, MSG_NOSIGNAL);

    if (lBytesSent > 0)
    {
        lSummedBytesSent += lBytesSent;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:39:10.403

调用阻塞，`send()`直到所有数据都已发送或缓冲。如果套接字另一端的程序没有读取，因此没有数据流，那么你端的写缓冲区将填满并`send()`阻塞。很有可能，当您尝试发送较少量的数据时，它适合缓冲区。

另请参阅[此答案。](https://stackoverflow.com/questions/7865069/how-to-find-the-socket-buffer-size-of-linux)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:54:50.387

检查缓冲区大小，您可以按照此答案进行操作

[如何找到linux的套接字缓冲区大小](https://stackoverflow.com/questions/7865069/how-to-find-the-socket-buffer-size-of-linux)

就我而言，这些值为

```
Minimum = 4096 bytes ~ 4KB
Default = 16384 bytes ~ 16 KB
Maximum = 4022272 bytes ~ 3.835 MB 
```

您可以调整值`net.core.rmem_max`和`net.core.wmem_max`in`/etc/sysctl.conf`以增加套接字缓冲区大小并重新加载`sysctl -p`.

来源：[http ://www.runningunix.com/2008/02/increasing-socket-buffer-size-in-linux/](http://www.runningunix.com/2008/02/increasing-socket-buffer-size-in-linux/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:35:04.817

对于 TCP，内核有一个固定大小的缓冲区，用于存储未发送的数据。此缓冲区的大小是 TCP 会话的当前窗口大小。一旦此缓冲区已满，任何新发送都将失败。这是一种 TCP 流控制机制，可防止您尝试发送数据的速度快于接收方消耗数据的速度，同时为丢失的数据提供自动重新发送。默认窗口可以小至 64K，但对于高延迟高带宽网络可以增大。

您可能需要做的是将数据分解成更小的发送块，然后确保在发送缓冲区已满时有一个流出机制。

# android - Android MotionEvent 触摸位置的奇怪跳跃

> ID：12912600
> 
> 赞同：1
> 
> 时间：2012-10-16T10:26:03.693
> 
> 标签：android, input, touch, touch-event, motionevent

我使用类似于以下的代码在 Android 上实现了一个简单的可滚动画廊类型视图：

```
private int mPos; // The current scroll position.
private int mLastMostionPos; // Previous touch position.

@Override
public boolean onTouchEvent(MotionEvent ev)
{
    final int action = ev.getAction();

    Log.d(TAG, "Mouse mLastMotionPos: " + mLastMotionPos + " ev.getX(): " + ev.getX() + " mPos: " + mPos + " ev.getPointerId(0): " + ev.getPointerId(0)
            + " ev.getEventTime(): " + ev.getEventTime());

    switch (action & MotionEvent.ACTION_MASK)
    {
    case MotionEvent.ACTION_DOWN:
        // Remember where the motion event started
        mLastMotionPos = (int)ev.getX();
        break;
    case MotionEvent.ACTION_MOVE:
        final int pos = (int)ev.getX(activePointerIndex);
        // Scroll to follow the motion event
        int delta = mLastMotionPos - pos;
        mLastMotionPos = pos;

        mPos += delta;
        if (mPos < mMinPos)
            mPos = mMinPos;
        if (mPos > mMaxPos)
            mPos = mMaxPos;
        break; 
```

它有效，但我注意到有时它会突然“跳跃”一点。只有当您滚动到一端时，它才会真正引人注目。如果您已经一直向右滚动，并且您的手指总是向右移动，则*有时*该事物会向左跳一帧。

我在上面添加了日志记录行并获得了这个输出（为便于阅读而编辑）：

```
50.913: Mouse mLastMotionPos: 304 ev.getX(): 379.0 mPos: 0 ev.getPointerId(0): 0 ev.getEventTime(): 111690077
50.928: Mouse mLastMotionPos: 379 ev.getX(): 369.0 mPos: 0 ev.getPointerId(0): 0 ev.getEventTime(): 111690093
50.943: Mouse mLastMotionPos: 369 ev.getX(): 384.0 mPos: 10 ev.getPointerId(0): 0 ev.getEventTime(): 111690109
50.958: Mouse mLastMotionPos: 384 ev.getX(): 391.0 mPos: 0 ev.getPointerId(0): 0 ev.getEventTime(): 111690125
50.983: Mouse mLastMotionPos: 391 ev.getX(): 399.0 mPos: 0 ev.getPointerId(0): 0 ev.getEventTime(): 111690141
51.023: Mouse mLastMotionPos: 399 ev.getX(): 399.0 mPos: 0 ev.getPointerId(0): 0 ev.getEventTime(): 111690186 
```

请注意，它会跳跃 10 个像素！我发誓我只是将手指向右拖动，并且非常慎重。起初我认为 Android 可能会乱序传递事件或其他什么，但事件时间是单调的。

知道为什么会这样吗？我想这可能是三星的错（我有 Galaxy S2）。它*确实*有[一个延迟驱动程序强加的触摸阈值](http://www.youtube.com/watch?v=sRXcBcpSD1w)，因此编写输入驱动程序的人显然不知道他们在做什么。尽管如此，10 像素似乎是一个很大的飞跃。有时它甚至更大！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-16T16:32:31.247

稍晚一点，但也许它对其他人有用，如果您只对延迟感兴趣而不对实际的 MotionEvent 位置感兴趣，您可以使用 getRawX() 和 getRawY() 方法。我遇到了完全相同的问题，我改变了获取坐标的方式，瞧！它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:22:41.340

我不知道这背后的确切逻辑，但我遇到了同样的问题

这个问题**与“硬件”无关**，因为我已经在**3 种不同的设备**上进行了测试（一个是索尼，另外两个是三星的），但它在任何地方都给出了相同的结果..即使在模拟器上它的行为也一样......

在“垂直滑动”的情况下，我正面临着它。虽然我滑动了几个像素，但它给出了 150 像素（或更大）的巨大差异。

我几乎厌倦了这种奇怪的跳跃

但是当我在我的“Demoapplication”中复制相同的代码以便使用它时，它在那里就像一个魅力。

**解决方案 ：-**

我刚刚从我的 XML 布局中替换`ScrollView`（这是我用于滑动的父布局，也可能是问题背后的唯一原因），然后一切都被排序了......

我希望`ScrollView`也是你案件的罪魁祸首。

顺便说一句，我使用它作为[参考](https://stackoverflow.com/a/8806468/1206052)来在我的代码中实现滑动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T05:37:13.330

我遇到了类似的问题。对我来说，事实证明我正在从我的事件处理程序中保存一个 MotionEvent 并稍后重新发布它。这很糟糕，因为 MotionEvents 被强制垃圾收集。如果要制作副本，则需要像这样制作副本：

```
val copy = MotionEvent.obtain(event) 
```

如果您确实制作了这样的副本，请不要忘记在完成后自己回收它：

```
copy.recycle() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T11:05:09.037

可能与硬件有关？您是否尝试过更强大的设备？

# html - 做一个 的身高和别人不相上下

> ID：12912604
> 
> 赞同：3
> 
> 时间：2012-10-16T10:26:22.260
> 
> 标签：html, css

我想创建一个包含 2 `div`s 的标题。左边`div`的高度需要和右边的高度相同，但右边的高度可以根据其内容进行缩放。

left`div`的内容需要垂直对齐到中间。

我试过这样的事情：

```
<header>
    <div id="test1">
        <div>LOGO</div>
    </div>
    <div id="test2">
        <h1>texttexttexttexttexttexttexttexttexttexttexttexttexttexttexttext</h1>
    </div>
</header> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:31:13.297

您可以使用溢出、填充和边距来伪造它。它完全跨浏览器兼容，不需要任何 JavaScript 或任何东西。只是 CSS。例如：

```
.header {
    overflow: hidden;     
}

.test {
    background: red;
    padding-bottom: 2000px;
    margin-bottom: -2000px;
    float: left;
    width: 100px;
    margin-right: 20px;
}​ 
```

**[演示](http://jsfiddle.net/spacebeers/M8msM/11/)**

也总是有仿色（使用背景图像），但这是一种不需要图像的更好方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T10:39:02.373

采用`display: table-cell;`

[**工作演示**](http://jsfiddle.net/QTth7/2/)

编辑：

如果您想要[**jQuery 解决方案**](http://jsfiddle.net/f3k95/)，它适用于所有浏览器

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T10:47:07.487

如果你不介意一点 javascript：

```
$(document).ready(function() {

  setHeight($('#test1'), $('#test2'));

  // When the window is resized the height might
  // change depending on content. So to be safe
  // we rerun the function
  $(window).on(resize, function() {
      setHeight($('#test1'), $('#test2'));        
  });

});

// sets height of element 1 to equal the height of element 2
function setHeight(elem1, elem2) {
  var height = elem2.height()
  elem1.css('height', height); 
} 
```

**[演示](http://jsfiddle.net/LyeKj/)**

# iphone - UIWebView，启用触摸保存图像，就像在移动 Safari 中一样

> ID：12912617
> 
> 赞同：1
> 
> 时间：2012-10-16T10:26:43.227
> 
> 标签：iphone, ios, image, uiwebview

当用户在我的应用程序的 UIWebView 中触摸图像时，我想启用保存图像和复制。是否有一个属性可以实现这一点，或者我需要编写一些特殊的方法来实现这一点？

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:58:01.480

```
UIImage * downloadImage = [[UIImage alloc] initWithContentsOfFile:path];
    UIImageWriteToSavedPhotosAlbum(downloadImage,nil, nil, nil);
    [downloadImage release];

    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Saved" message:@"Wallpaper saved to your Gallery." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];

    [alert show];
    [alert release];

Add this whole code to your long press method, it will save your image in gallery. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:49:55.613

您可以从创建 UILongPressGestureRecognizer 实例并将其附加到按钮开始。

```
 UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];
 [self.button addGestureRecognizer:longPress];
 [longPress release]; 
```

然后实现处理手势的方法

```
 - (void)longPress:(UILongPressGestureRecognizer*)gesture {
if ( gesture.state == UIGestureRecognizerStateEnded ) {
     NSLog(@"Long Press");

 //do something
   }
 } 
```

# java - JNI 本机代码上的内存泄漏

> ID：12912619
> 
> 赞同：0
> 
> 时间：2012-10-16T10:26:53.600
> 
> 标签：java, c, memory-leaks, java-native-interface

我有一段 JNI 本机代码。当我们调用这个native方法+运行其他请求时，jvm会崩溃。

很可能，这段 JNI 本机方法（c 代码）中存在内存泄漏。

任何机构都可以帮助检测以下代码中的内存泄漏？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "fns_data.h"
#include "fns_client.h"
#include "sockRW.h"
#include "/usr/local/include/jni.h"
#include "JNIiSearchLib.h"
#include "com_eds_wise_util_JNIiSearchLib.h"

JNIEXPORT jstring JNICALL
Java_com_eds_wise_util_JNIiSearchLib_jniFNSSearchClient (
    JNIEnv *env, jobject obj, jstring jip_addr, jint jport_number,
    jstring jfield, jstring jquery_str, jint jhitnum)
{
    HitIds           *hit_list   = NULL;
    hitListPktStruct *hitPkt     = NULL;
    int               hit_number = 0;
    int               i          = 0;
    int               fnsErrno   = 0;
    char             *result_str = NULL;
    jstring          rslt_str   = NULL;
    const char          *cip_addr   = NULL;
    const char          *cquery_str = NULL;
    char              errbuf[1024];

    cip_addr   = (*env)->GetStringUTFChars(env, jip_addr, 0);
    if (cip_addr == NULL) {
        return ((* env)->NewStringUTF (env, "Error: Cannot get IP address."));
    }

    cquery_str = (*env)->GetStringUTFChars(env, jquery_str, 0);
    if (cquery_str == NULL) {
        (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);
        //(*env)->DeleteLocalRef(env, cip_addr);
        return ((* env)->NewStringUTF (env, "Error: Cannot get query string."));
    }
    printf ("[Java_JNILib_jniFNSSearchClient] ipaddress[%s] portnumber[%d]"
            " querystr[%s]\n\n", cip_addr, jport_number, cquery_str);

    /* Search and get back the handler & total hits
     */
    hit_list = fns_search_client0 ((char *)cip_addr, jport_number,
                                   "PN", (char *)cquery_str, &hit_number);
    fnsErrno = fns_error_message();
    if (fnsErrno) {
        printf ("Error %d during fns_search_client0()\n", fnsErrno);
        sprintf (errbuf, "Error: fns_search_client0() returns %d.", fnsErrno);

        rslt_str = (* env)->NewStringUTF (env, errbuf);

        (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);
        (*env)->ReleaseStringUTFChars (env, jquery_str, cquery_str);
        //(*env)->DeleteLocalRef(env, cip_addr);
        //(*env)->DeleteLocalRef(env, cquery_str);

        fflush(stdout);
        return (rslt_str);
    }

    /* Display total hits
     */
    printf ("Total hits = %d\n", hit_number);

    /* Use the handler as parameter to retrieve the actual result
     */
    if (hit_number > 0) {
        fns_display_ids0 ((char *)cip_addr, jport_number, hit_list,
                          0, hit_number - 1, &hitPkt);
        fnsErrno = fns_error_message();
        if (fnsErrno) {
            printf ("Error %d during fns_display_ids0()\n", fnsErrno);
            sprintf (errbuf, "Error: fns_display_ids0() returns %d.", fnsErrno);
            rslt_str = (* env)->NewStringUTF (env, errbuf);

            if (hit_list) {
                FREE_STRING (hit_list);
            }
            (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);
            (*env)->ReleaseStringUTFChars (env, jquery_str, cquery_str);
            //(*env)->DeleteLocalRef(env, cip_addr);
            //(*env)->DeleteLocalRef(env, cquery_str);

            fflush(stdout);
            return (rslt_str);
        }
    }

    /* Enumerate every item in the result list and display them.
     * The results are returned as a string to Java in the following manner:
     *
     * "[hitresult1|hitresult2|hitresult3|..|hitresultN]\0"
     *
     *     where hitresultN = 94-byte record
     *
     * [+string94+|+string94]+stringTerminator 
     */
    printf ("malloc[%d]\n", (hit_number * 95) + 3);

    result_str = malloc (((hit_number * 95)+3) * sizeof(char));
    if (result_str == NULL) {
        printf ("Out of memory, unable to malloc\n");
        rslt_str = (* env)->NewStringUTF (env, "Error: Out of memory, unable to malloc");

        if (hit_list) {
            FREE_STRING (hit_list);
        }
        if (hitPkt) {
            FREE_HITLIST_STRUCT (hitPkt);
        }
        (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);
        (*env)->ReleaseStringUTFChars (env, jquery_str, cquery_str);
        //(*env)->DeleteLocalRef(env, cip_addr);
        //(*env)->DeleteLocalRef(env, cquery_str);

        fflush(stdout);
        return (rslt_str);
    }

    sprintf (result_str, "[");
    for (i = 0; i < hit_number; i++) {
        strcat (result_str, hitPkt->docNameList[i]);
        if (i != (hit_number - 1)) {
            strcat (result_str, "|");
        }
    }
    strcat (result_str, "]");

    printf ("\n\nFNS search result:[From Library]\n");
    printf ("%s\n\n",result_str);

    /* free the handler
     */
    if (hit_list) {
        FREE_STRING (hit_list);
    }

    /* free the result lists
     */
    if (hitPkt) {
        FREE_HITLIST_STRUCT (hitPkt);
    }

    /* prepare stuff for Java
     */
    rslt_str = (* env)->NewStringUTF (env, result_str);

    /* free our memory
     */
    if (result_str) {
        free (result_str);
    }
    (*env)->ReleaseStringUTFChars (env, jip_addr, cip_addr);
    (*env)->ReleaseStringUTFChars (env, jquery_str, cquery_str);
    //(*env)->DeleteLocalRef(env, cip_addr);
    //(*env)->DeleteLocalRef(env, cquery_str);

    fflush(stdout);
    return (rslt_str);
} 
```

# php - 在 Symfony2 中向分页器（KNP Paginator）添加自定义查询？

> ID：12912622
> 
> 赞同：1
> 
> 时间：2012-10-16T10:27:01.537
> 
> 标签：php, symfony, pagination

我有以下查询，如何在**Symfony2中编写这些查询**

```
SELECT Inventory_Stock.id, Inventory_Stock.quantity, SUM(InventoryUsage.quantity)
       ,Inventory_Stock.quantity - SUM(InventoryUsage.quantity) AS Stock 

FROM Inventory_Stock LEFT JOIN InventoryUsage ON Inventory_Stock.id = InventoryUsage.InventoryStock_id 

WHERE Inventory_Stock.id = 26 OR
      Inventory_Stock.id = 27

GROUP BY Inventory_Stock.id 
ORDER BY Stock DESC 
```

我需要以 symfony 的方式实现上述查询

```
 private function getList($query = null)
{
    $em = $this->getDoctrine()->getEntityManager();

    if(!$query)
    {
        $query = $em->createQueryBuilder()
            ->select('i')
            ->from('ItxBundle:InventoryStock', 'i')
            ->innerJoin('i.Product','p')
            ->getQuery();

    }
    $adapter = $this->get('knp_paginator.adapter');
    $adapter->setQuery($query);
    $adapter->setDistinct(TRUE);

    $paginator = new Paginator($adapter);
    $paginator->setCurrentPageNumber($this->get('request')->query->get('page', 1));
    $paginator->setItemCountPerPage($this->container->parameters['items_per_page']);
    $paginator->setPageRange($this->container->parameters['page_range']);
    return $paginator;
} 
```

并且在视图中

```
{% if entity.quantity - entity.Usage < 0 %}
    0
{% else %}
    {{ entity.quantity - entity.Usage | number_format(0) }}
{% endif %} 
```

我在这里使用三个表，关系如下

InventoryStock 1 - n InventoryUsage InventoryStock 1 - 1 产品

需要显示可用库存（InventoryStock.Quanitity - sum(InventoryUsage.quanitity)）

还需要实现基于 Stock 的排序

如果有人可以帮助我，那就太好了，因为这已经把我的头发拉了几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:50:30.107

我建议为此使用[WhiteOctoberPagerfantaBundle](https://github.com/whiteoctober/WhiteOctoberPagerfantaBundle)捆绑包。它允许您像往常一样创建自己的 Query 对象，然后将其传递给相关的 Pagerfanta 适配器。看起来好像您正在使用 Doctrine，例如...

```
 // at the top of the file:
    use Pagerfanta\Pagerfanta, 
        Pagerfanta\Adapter\DoctrineORMAdapter;

    // Build your query...
    /** @var $query \Doctrine\ORM\Query */
    //$query = ... 

    $currentPage = $this->getRequest()->get('page', 1);

    $pagerfanta = new Pagerfanta(new DoctrineORMAdapter($query));
    $pagerfanta
        ->setMaxPerPage($maxItems) // you'll need to specify this value
        ->setCurrentPage($currentPage)
    ;
    $results = $pagerfanta->getCurrentPageResults(); 
```

# sage - 圣人中的图表

> ID：12912628
> 
> 赞同：0
> 
> 时间：2012-10-16T10:27:24.160
> 
> 标签：sage, finite-group-theory

我想在圣人中定义新图。令 G 为有限群。该图的顶点是子群并且两个顶点是相邻的当且仅当两个子群之和为 G。

我无法在 sage 中定义此图。有什么建议吗？我有差距，但我不知道我可以在圣人中改变什么？

```
Summands := function(G) 

local n, i, sgl, l, A, B, D; 
```

获取所有子组的列表

```
sgl := List(LatticeSubgroups(G)!.conjugacyClassesSubgroups, Representative); 
```

n 是 |G| 的除数数

```
n := Size(DivisorsInt(Size(G)));

D := [];

if IsOddInt(n) then l := QuoInt(n + 1, 2);
           else l := QuoInt(n, 2);
fi;

for i in [1..l] do
  for A in Filtered(sgl, function(g) return Size(g) = DivisorsInt(Size(G))[i]; end) do
    for B in Filtered(sgl, function(g) return Size(g) = DivisorsInt(Size(G))[n+1-i]; end) do
        Add(D, [A, B]);
    od;
  od;
od;

return D;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:49:54.040

Here are Sage equivalents to some of these commands. Incidentally, we use GAP for the group calculations!

```
sage: D = DihedralGroup(5)
sage: D.subgroups()
[Permutation Group with generators [()], Permutation Group with generators [(2,5)(3,4)], Permutation Group with generators [(1,2)(3,5)], Permutation Group with generators [(1,3)(4,5)], Permutation Group with generators [(1,4)(2,3)], Permutation Group with generators [(1,5)(2,4)], Permutation Group with generators [(1,2,3,4,5)], Permutation Group with generators [(1,5,4,3,2), (1,5)(2,4)]]
sage: divisors(D.cardinality())
[1, 2, 5, 10] 
```

To make graphs in Sage, you can pass dictionaries of lists or other things; see

```
sage: Graph? 
```

for more information on that.

Edit - left in to make comments comprehensible:

By the way, it looks like you are trying to make a list of pairs of subgroups `A` and `B` such that `|A||B|=ord(G)`. Is that necessarily the same as groups whose sum (whatever you mean by that - direct sum?) is the original group? I'm thinking for instance of even a group of order four; summing any two subgroups of order two may not be isomorphic to the original group - for instance, if the two subgroups are the same one if you mean some sort of ambient sum (does this even make sense?), or if you use direct sum but the group is the cyclic group of order 4, not the Klein four group.

# c# - 需要替换字符串中锚标签的href

> ID：12912632
> 
> 赞同：1
> 
> 时间：2012-10-16T10:27:30.890
> 
> 标签：c#, regex

```
string content=" 
        <br /><br /><a href="need to replace this url">Cooking School</a><br /><br /><a href="http://www.sdlm.com">Feed your senses</a><br /><br /><a href="http://www.sdl.com">Take your cooking skills to the next level. Find a cooking school near you!</a><br /><br /><a href="http:google.com"><img src="http://www.sdlm1.com/autd3umrl_u_t.jpg" /></a>
     " 
```

我需要用不同的 url 替换所有锚标签 href 值我使用了以下函数但它出现错误

```
 public List<string> GetLinksFromHtml(string content)
        {
            string regex = @"<(?<Tag_Name>(a)|img)\b[^>]*?\b(?<URL_Type>(?(1)href|src))\s*=\s*(?:""(?<URL>(?:\\""|[^""])*)""|'(?<URL>(?:\\'|[^'])*)'))";
            var matches = Regex.Matches(content, regex, RegexOptions.IgnoreCase | RegexOptions.Singleline);
            var links = new List<string>();

            foreach (Match item in matches)
            {
                string link = item.Groups[1].Value;
                links.Add(link);
            }

            return links;
        } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T10:34:12.890

尝试使用正则表达式解析 html 不是一个好主意。看到[这个帖子](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。使用真正的 html 解析器，例如[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(content);
foreach (var a in doc.DocumentNode.Descendants("a"))
{
    a.Attributes["href"].Value = "http://a.com?url=" + HttpUtility.UrlEncode(a.Attributes["href"].Value);
}

var newContent = doc.DocumentNode.OuterHtml; 
```

# android - 如何在播放一个视频时在后台缓冲一个视频？

> ID：12912635
> 
> 赞同：2
> 
> 时间：2012-10-16T10:27:36.267
> 
> 标签：android, video, media-player

我有一个活动，我有两个视频 URL。所以，一旦活动开始，我设置了一个进度对话框，它会旋转直到第一个视频准备好。所以一旦第一个视频开始，我想在后台缓冲第二个视频（第一个视频仍在前台播放）。现在我正在显示一个进度对话框，直到视频准备好。所以一旦第一个视频完成，我想立即开始第二个。所以用户觉得它是一个视频。

任何帮助将不胜感激....

提前致谢....

# javafx-2 - 如何从舞台组件中仅删除“最小化”按钮以及如何自定义 JavaFX 中的组件？

> ID：12912638
> 
> 赞同：2
> 
> 时间：2012-10-16T10:27:39.720
> 
> 标签：javafx-2

如何从舞台组件中仅删除“最小化”按钮以及如何在 JavaFX 中自定义它们？我正在使用 Netbeans 7.1.2 并创建了一个简单的 JavaFX 应用程序。我有一个名为primaryStage 的舞台对象。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:21:36.567

不幸的是，JavaFX 2.2 还没有提供 API 来操作系统窗口按钮。

尽管您可以通过删除系统控件来实现这一点

```
 primaryStage.initStyle(StageStyle.UNDECORATED) 
```

并提供您自己的最大化、关闭等。

您可以在名为 Ensemble 的标准示例中找到一个示例，该示例遵循所描述的方法： [http ://www.oracle.com/technetwork/java/javafx/samples/index.html](http://www.oracle.com/technetwork/java/javafx/samples/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T07:45:41.113

你可以这样做

```
 public void start(Stage primaryStage) throws Exception {
    FXMLLoader loader = new FXMLLoader(getClass().getResource("sample.fxml"));
    Parent root = (Parent) loader.load();        
    primaryStage.setResizable(false);

    primaryStage.initStyle(StageStyle.DECORATED);
    primaryStage.setTitle("Hello World");
    primaryStage.setScene(new Scene(root));
    primaryStage.show();
} 
```

关键是 setResizable(false)

# java - Wicket 6.1 AjaxEventBehavior - 如何设置延迟？

> ID：12912639
> 
> 赞同：7
> 
> 时间：2012-10-16T10:27:46.047
> 
> 标签：java, ajax, wicket

```
AjaxEventBehavior behavior = new AjaxEventBehavior("keyup"){

    @Override
    protected void onEvent(AjaxRequestTarget target) {

        System.out.println("Hello world!");
    }
};

form.add(behavior); 
```

在以前版本的 Wicket 中，我可以这样做：

```
behavior.setThrottleDelay(Duration.ONE_SECOND); 
```

但从 6.1 版开始，这个机会就被抹杀了。网络上到处都是以前版本的教程，它们都包含 .setThrottleDelay() 方法。

基本上，目标是在该人停止输入表单时调用该行为。目前，每次当密钥启动时，它都会立即调用该行为，这基本上会向服务器端发送垃圾邮件。这就是为什么我想推迟。背景：我目前正在尝试对数据库进行查询并获取与表单输入类似的数据。所有这一切都发生在这个人打字的时候。但是为了将服务器端/SQL 保持在“轰炸范围”之外，需要延迟。

我也对替代品持开放态度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T05:29:55.933

对于 6.0.0 版本，节流阀的设置已与 AjaxRequestAttributes 中的所有其他 Ajax 设置统一，该版本是主要版本，不是直接替换。

[https://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax](https://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax)包含一个包含所有设置的表格，在底部提到了节流设置。

要使用它：

```
AjaxEventBehavior behavior = new AjaxEventBehavior("keyup") {

    @Override
    protected void onEvent(AjaxRequestTarget target) {
        System.out.println("Hello world!");
    }
    @Override
    protected void updateAjaxAttributes(AjaxRequestAttributes attributes)
        super.updateAjaxAttributes(attributes);
        attributes.setThrottlingSettings(
            new ThrottlingSettings(id, Duration.ONE_SECOND, true)
        );
    }
}; 
```

最后一个构造函数参数是您所需要的。检查它的javadoc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:45:17.597

查看消息来源，您似乎可以`AjaxRequestAttributes`通过该方式获得该信息`getAttributes()`并对其进行调用`setThrottlingSettings()`。

奇怪的是wiki中没有提到api更改。6.1 的公告称其为替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:45:35.510

看来[drop 行为](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/AjaxChannel.html)是你所追求的：

> 丢弃 - 只处理最后一个 Ajax 请求，所有之前调度的请求都被丢弃

您可以指定一个放置行为，该行为仅适用于 Ajax 通道，方法是使用 自定义[`AjaxRequestAttributes`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/attributes/AjaxRequestAttributes.html)行为，如[wiki](https://cwiki.apache.org/WICKET/wicket-ajax.html#WicketAjax-AjaxRequestAttributes)中所指出的：[`AjaxChannel.DROP`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/AjaxChannel.html)[`updateAjaxAttributes`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/AjaxEventBehavior.html#updateAjaxAttributes%28org.apache.wicket.ajax.attributes.AjaxRequestAttributes%29)

```
AjaxEventBehavior behavior = new AjaxEventBehavior("keyup"){

    @Override
    protected void onEvent(AjaxRequestTarget target) {
        System.out.println("Hello world!");
    }
    @Override
    protected void updateAjaxAttributes(AjaxRequestAttributes attributes)
        super.updateAjaxAttributes(attributes);
        attributes.setChannel(new AjaxChannel("myChannel", AjaxChannel.Type.DROP));
    }
};

form.add(behavior); 
```

正如@bert 还建议的那样，您也[`setThrottlingSettings`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/attributes/AjaxRequestAttributes.html#setThrottlingSettings%28org.apache.wicket.ajax.attributes.ThrottlingSettings%29)可以将`AjaxRequestAttributes`.

可能这两种行为的组合更适合您似乎需要的东西。

# recaptcha - reCaptcha 和 Silverstripe

> ID：12912643
> 
> 赞同：1
> 
> 时间：2012-10-16T10:27:53.910
> 
> 标签：recaptcha, silverstripe

我对 Silverstripe 实施了 Recaptcha，它似乎有效。唯一的问题是公式和验证码位于页面的最后，如果您输入错误的代码，页面会重新加载并跳回顶部，这样用户就不会看到公式和验证码了。

输入错误的验证码后如何使窗口不滚动到顶部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:41:11.823

由于 HTTP 规范不允许包含锚标记的服务器端重定向，因此您需要使用 JavaScript 来完成此操作。由于该字段在标准 SilverStripe 表单呈现中使用验证消息突出显示，因此您可以使用它来确定再次加载提交的表单后该字段的状态。

```
jQuery(document).ready(function() {
    var captchaEl = jQuery('#MyCaptcha');
    if(captchaEl.find('.message.required').length) {
        window.scrollTo(0, captchaEl.scrollTop());
    }
}); 
```

# ffmpeg - 使用 FFMPEG 更改 H264 配置文件

> ID：12912645
> 
> 赞同：0
> 
> 时间：2012-10-16T10:28:08.933
> 
> 标签：ffmpeg, streaming, video-streaming, h.264, http-live-streaming

我有以下详细信息的 H264 流

```
video stream type     :                 AVC  
resolution            :             640x368  
profile:level         :            High:4.0  
aspect ratio          :          40x23(1:1)  
chroma format         :               4:2:0  
interlaced            :                  no  
frames count          :                  15  
duration              :        00:00:02.800  
frame size max        :              80 088  
           avg        :              14 538  
       avg/max (I)    :     28 361 / 80 088  
       avg/max (P)    :       2 444 / 3 196  
       avg/max (B)    :               0 / 0  
           min        :               1 880  

framerate declared    :               5.000  
          real        :               5.000  

bitrate type          :                 VBR  
bitrate declared      :           1 259 968  

bit allocation max    :           1 126 640  
               avg    :             581 520  
               min    :             124 000 
```

是否可以使用 FFMPEG 或其他工具转换为基线配置文件，或者有办法自己做吗？

基本想法是将此视频流式传输到 android 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:41:22.740

ffmpeg -i input_file.avi -vcodec libx264 -vprofile baseline -preset slow -b:v 500k -maxrate 500k -bufsize 1000k -vf scale=-1:480 -threads 0 -acodec libvo_aacenc -b:a 128k output_file.mp4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:37:36.583

Handbrake 是一个出色的工具，具有命令行实用程序（基本上使用 FFMpeg），并[在此处](https://trac.handbrake.fr/wiki/BuiltInPresets)列出了所有当前配置文件的命令。

考虑到您想要 Baseline 配置文件，iPhone/iPod touch 应该为您做：

> ./HandBrakeCLI -i DVD -o ~/Movies/movie.mp4 -e x264 -q 20.0 -a 1 -E faac -B 128 -6 dpl2 -R Auto -D 0.0 -f mp4 -X 480 -m -x cabac =0:ref=2:me=umh:bframes=0:weightp=0:subme=6:8x8dct=0:trellis=0

# c# - 从调用的类访问类型转换器

> ID：12912648
> 
> 赞同：1
> 
> 时间：2012-10-16T10:28:22.723
> 
> 标签：c#, invoke, typeconverter

我有一个包含一定数量的自定义 TypeConverter 的应用程序。在 XML 解析的上下文中使用时，它们工作得很好。

另一方面，我正在使用以下（到目前为止有效）调用类构造函数（基于一些先前定义的 XML 标记）：

```
Type MyClass = TypeDelegator.GetType( FullClassName );               // Get the class type
if( MyClass != null ) {                                              // If we find a matching type
    ConstructorInfo[] CtorInfos = MyClass.GetConstructors();         // Get constructor infos
    if( CtorInfos != null ) {                                        // If we could find a ctor
        if( CtorInfos.Length == 1 ) {                                // We expect 1 Ctor with args
            CtorInfos[0].Invoke( new object[] { CtorArg1, CtorArg2 } ); 
        }
    }
} 
```

现在我试图从调用的构造函数中重用 TypeConverter。但这似乎不起作用。我一直在使用常规的 GetConverter 方法：

```
MyType myVar = (MyType)TypeDescriptor.GetConverter( typeof( MyType ) ).ConvertFrom( "1;2;3;4" ); 
```

类型类类似于以下内容：

```
public class MyType {
    private int PrivateField;
    public MyType() { }
    public MyType( String Arg1, Char Arg2 ) { }
    public int Prop1 { get { return ( 4 ); } }
    public int Prop2 { 
        get { return ( PrivateField ); }
        set { PrivateField = value; } 
    }
} 
```

深入研究这个问题，TypeDescriptor.GetConverter 似乎没有找到自定义类型转换器（它们是同一程序集的一部分）。

```
var debugVar = TypeDescriptor.GetConverter( typeof( MyType ) ); 
```

始终返回 TypeConverter，而不是预期的“TypeConverterMyType”。这让我认为“TypeConverterMyType”可能由于调用而无法访问。

**[更新]**
似乎 TypeDescriptor.GetConverter 适用于枚举类型，但不适用于基于类的类型。我想我正在通过拼图的一个重要部分......：？

所以问题
是：1-实际上是否可以从调用的方法访问自定义类型转换器？
2-有没有更好/更智能的方法来处理这个问题？
3- 我正在使用 .Net 3.5，如果我升级到 4.0 或 4.5，我应该期待同样的行为吗？

# orm - 使用 Doctrine2 在没有定义关系的不同实体之间连接导致意外结果

> ID：12912657
> 
> 赞同：0
> 
> 时间：2012-10-16T10:28:43.863
> 
> 标签：orm, doctrine-orm, zend-framework2

我有两个实体，具有“逻辑”1:1 关系，但是没有配置（它们不知道它们彼此相关）。

我不能只配置这种关系，因为根据这种情况有很多旧代码（请参阅下面的进一步说明）。

现在，我正在尝试使用`SELECT`带有`LEFT JOIN`子句的简单查询手动解决此关系：

```
SELECT E1 as my_cool_entity_1, E2 as my_cool_entity_2
FROM Namespace\Of\Entity1 E1
LEFT JOIN Namespace\Of\Entity2 E2
WITH E2.someColumn = E1.someOtherColumn 
```

在我的例子中，只有一行匹配`E1`和一行匹配 join on `E2`。不知何故，我之前以这种方式使用过 Doctrine，但我不记得在哪里以及如何使用。预期的结果是这样的数组：

```
[0 => [
    "my_cool_entity_1" => (Instance of E1),
    "my_cool_entity_2" => (Instance of E2)
]] 
```

相反，该数组如下所示：

```
[0 => [
        "my_cool_entity_1" => (Instance of E1)
    ], 
 1 => [
        "my_cool_entity_2" => (Instance of E2)
]] 
```

怎么可能让 Doctrine 像我期望的那样为阵列补水？提前致谢！

注意：我写道我无法定义这两个实体之间的关系。那是因为，如果定义了关系，Doctrine 要求您在保存 E1 时分配 to 的实例——**然而**，在我的旧代码中，我只分配相关的**ID**。因此，Doctrine 将完全忽略并导致约束错误。`E2``E1`**`E2`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:17:15.223

如果没有关系学说的定义，就无法知道它是 oneToOne 关系，因此结果将始终是一个集合。您需要编写自己的 hydrator 来实现这一点。**

# android - 卸载应用程序时未删除联系人的自定义字段？

> ID：12912660
> 
> 赞同：1
> 
> 时间：2012-10-16T10:28:59.800
> 
> 标签：android, metadata, uninstallation, android-contacts

在 Android 上，您可以将自己的一些元数据附加到联系人，如下[所示](https://stackoverflow.com/questions/3009839/contact-custom-fields)。

它可以工作，但似乎如果用户卸载了该应用程序，它仍然存在，您可以在下次运行该应用程序时获取此数据（当然是在重新安装之后）。

我的问题是：

1.  怎么会这样？

2.  它不应该被视为垃圾并被删除吗？它让我想起了 Windows 操作系统的注册表理念，应用程序即使在卸载后也会留下痕迹。

3.  其他应用程序是否能够访问/修改这些数据？

4.  无论如何，这些额外数据的目的是什么？

5.  你知道其他做同样事情的应用程序吗？

6.  mimeType 是否必须采用“vnd.android.cursor.item/YOUR_APP”格式？如果“YOUR_APP”已经被占用，会发生什么？

# sql - 在sql中替换If-else的最佳方法

> ID：12912669
> 
> 赞同：1
> 
> 时间：2012-10-16T10:29:41.167
> 
> 标签：sql, sql-server, stored-procedures

我的网站中有一个搜索选项，有 4 个搜索条件，不必输入所有这些条件进行搜索。我想在我的数据层更具体地说是我的存储过程中实现这个逻辑。一种这样的方法是

```
if ( all four are empty)
select command
else if ( 3 are empty
select command
and so on... 
```

有没有其他方法可以用更好的逻辑替换这些 IF 语句。简而言之，我希望仅根据用户提供的值进行搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:32:21.207

如果您使用的是 SQL Server 2008 或更高版本，除了特定服务包和修补程序级别的极少数未修补安装之外，此模式将为您提供最佳性能。

```
select ...
  from ...
 where (@criteria1 is null or column1 = @criteria1)
   and (@criteria2 is null or column2 = @criteria2)
       option (recompile) 
```

此类动态标准查询编写的最佳参考是 Erland Sommarskog 的[此处](http://www.sommarskog.se/dyn-search.html)。

如果您可以通过从前端动态生成查询来仅显示所需的过滤器，那么对于 SQL Server 2005，您将获得比此模式更好的结果，尽管如果动态 SQL 不可行，它仍然是最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:34:53.123

您可以使用案例逻辑：

```
SELECT 
   CASE 
      WHEN  all four are empty THEN expression
      WHEN 3 are empty THEN expression 
   END 
FROM ... 
```

在此处查看详细信息：http: [//msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:32:58.643

创建基本查询并基于 4 个输入值动态附加在 where 子句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:37:12.330

您可能正在寻找如下内容

```
Create sp datasearch
(
@param1 datatype=null,
@param2 datatype=null,
@param3 datatype=null,
@param4 datatype=null
)
as

select * from table where 
col1=isnull(@param1 ,col1) and 
col2=isnull(@param2 ,col2) and 
col3=isnull(@param3 ,col3) and 
col4=isnull(@param4 ,col4) and 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T10:42:52.663

以我的经验，这种搜索还需要一个排名——匹配 4 个条件的记录比匹配一个条件的记录更重要。

我现在无法访问数据库，所以下面的语法可能有点损坏，但原则上：

```
select ID, column1, column2, column3, column4, count(*) as rank
from 
(select ID, column1, column2, column3, column4
from searchtable
where column1 = @criteria1
union
select ID, column1, column2, column3, column4
from searchtable
where column2 = @criteria2
union
select ID, column1, column2, column3, column4
from searchtable
where column3 = @criteria3
union
select ID, column1, column2, column3, column4
from searchtable
where column4 = @criteria4)
group by select ID, column1, column2, column3, column4
order by rank desc 
```

# javascript - 如何使用javascript在输入框中格式化价格值？

> ID：12912671
> 
> 赞同：0
> 
> 时间：2012-10-16T10:29:43.690
> 
> 标签：javascript, regex, numbers

> **可能重复：**
> [如何在 JavaScript 中将数字格式化为货币？](https://stackoverflow.com/questions/149055/how-can-i-format-numbers-as-money-in-javascript)

我在一个网站上工作，它有一个价格输入字段。我需要将价格值格式化如下。

```
if a user enter "1000000" it should replace with "1,000,000" is it possible? 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:32:27.710

您需要这样的自定义功能：

```
function addCommas(nStr)
{
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:33:54.030

您可以执行以下操作：

```
function numberWithCommas(n) {
    var parts=n.toString().split(".");
    return parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",") + (parts[1] ? "." + parts[1] : "");
} 
```

**演示：http:** [//jsfiddle.net/e9AeK/](http://jsfiddle.net/e9AeK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:36:25.417

对**Taiki**的代码稍作修改。因为如果用户输入**1000000**它将产生**1,000,000**。但如果用户使用**Backspace**键删除“0”，它将不起作用。

```
function addPriceFormat()
{
    var numb='';
    nStr = document.getElementById('txt').value;
    my = nStr.split(',');
    var Len = my.length;
    for (var i=0; i<Len;i++){numb = numb+my[i];}
    x = numb.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;

    while (rgx.test(x1)) 
    {
       x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    formated = x1 + x2;
    document.getElementById('txt').value = formated;
} 
```

# android - 如何减小android默认键盘大小？

> ID：12912672
> 
> 赞同：2
> 
> 时间：2012-10-16T10:29:46.613
> 
> 标签：android

当我把我的设备变成横向模式时，键盘超过了屏幕的一半。有什么方法可以减小 android 键盘大小或减小其字符大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:34:32.237

这是不可能的。你唯一能做的就是创建自己的键盘。

# android - 在 Eclipse for Android 中使用 Emma 时出错

> ID：12912681
> 
> 赞同：1
> 
> 时间：2012-10-16T10:30:08.977
> 
> 标签：android, eclipse, junit, runtime-error, emma

我正在尝试在 Eclipse 中使用 Emma 来检测 Android。使用的版本如下：

```
Eclipse: 3.7.2
Android: 4.0.3 (ICS)
Emma: 2.1.4 (taken from the eclemma.org) 
```

将emma zip文件解压到eclipse的dropins目录下并重启。重新启动后，我可以看到覆盖图标。然后我尝试通过右键单击单元测试方法-> Coverage as -> JUnit test 来启动我现有的单元测试用例（使用JUnit3）这不起作用（因为测试用例应该作为Android JUnit测试运行），所以我将 android.jar 添加到类路径并再次运行测试。但是抛出了一个 RuntimeException

```
java.lang.RuntimeException: Stub!
at junit.framework.Assert.<init>(Assert.java:4)
at junit.framework.TestCase.<init>(TestCase.java:7)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader$1.<init>(JUnit3TestLoader.java:173)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.warning(JUnit3TestLoader.java:173)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.createTest(JUnit3TestLoader.java:90)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.getTest(JUnit3TestLoader.java:95)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.loadTests(JUnit3TestLoader.java:59)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有没有人能够让 emma 在 Android 的 Eclipse 中运行？我能够在 Eclipse 之外获得 emma 工作（从命令行）

# c# - 如何获取程序的 CPU 利用率、内存利用率和从特定点到另一个点的经过时间？

> ID：12912682
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:30:13.363
> 
> 标签：c#, memory, cpu-usage

例如，我在 C# 中有这段特定的代码：

```
int x;
for(int i=0; i>100; i++)
{
   x=x*i;
} 
```

我将如何仅获得该进程的 CPU 利用率、内存利用率和经过的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:35:45.783

您将需要一个分析器。Visual Studio 入门在这里：http: [//msdn.microsoft.com/en-us/library/ms182372.aspx](http://msdn.microsoft.com/en-us/library/ms182372.aspx)

请注意，对于不同版本的 Visual Studio，本文有不同的版本。

另一个产品可以在[http://www.jetbrains.com/profiler/?gclid=CIzJ-YyrhbMCFc2R3godRkEAOQ找到](http://www.jetbrains.com/profiler/?gclid=CIzJ-YyrhbMCFc2R3godRkEAOQ)

对于 Mono 平台，您可能需要查看内置分析器：[http ://www.mono-project.com/Profiler](http://www.mono-project.com/Profiler)

# python - 使用 django-social-auth (omab) 自动刷新访问令牌

> ID：12912685
> 
> 赞同：4
> 
> 时间：2012-10-16T10:30:25.513
> 
> 标签：python, django, oauth-2.0, google-drive-api, django-socialauth

我目前正在使用 django-social-auth 来管理 google-oauth2 的 oauth2 注册，以访问 Google Drive。我添加了对我的 extra_arguments 的离线访问。因此谷歌返回一个刷新令牌并由 django-social-auth 存储。问题是 django-social-auth 从不使用此刷新令牌来更新访问令牌。因此访问令牌在一小时后过期，我不能用它来执行离线请求。我想保持 access_token 24/7 有效，这样我就可以让我的数据库与每个用户的 Google Drive 同步。

```
GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS = {'access_type':'offline'}
GOOGLE_OAUTH_EXTRA_SCOPE = ['https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.profile']

SOCIAL_AUTH_USER_MODEL = 'accounts.GoogleDriveUser'
SOCIAL_AUTH_EXTRA_DATA = True
SOCIAL_AUTH_SESSION_EXPIRATION = False 
```

有没有办法强制 django-social auth 每次使用 refresh_token 过期时更新 access_token。我很想看到一个如何解决这个问题的例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T02:24:43.100

看起来 UserSocialAuth 对象[现在有一个 .refresh_token() 方法](https://github.com/omab/django-social-auth/issues/492)，它允许您使用 .tokens 并获取更新的令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:19:39.903

目前没有办法直接在 django-social-auth 中实现（我已经提出了跟踪它的票[https://github.com/omab/django-social-auth/issues/492](https://github.com/omab/django-social-auth/issues/492)），同时[这个片段](https://gist.github.com/3906451)会做工作，它只需要改进一点以满足您的需求。

# plugins - Intellij IDEA 11 和 Virgo 3.5

> ID：12912686
> 
> 赞同：1
> 
> 时间：2012-10-16T10:30:27.683
> 
> 标签：plugins, intellij-idea, osgi, integration, eclipse-virgo

我们的项目已经从 Virgo 2 切换到 Virgo 3.5，令我深感沮丧的是，IDEA 的“dmServer”插件版本 0.9.5 似乎不支持这个版本。

因此，我正在寻找一些遇到相同问题的工程师，以听取任何指示和可能的解决方法。我们预期 IDEA\Virgo 集成的主要价值显然是调试代码的能力。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:36:36.413

YouTrack 中有一个[针对此问题的未解决问题，请投票以跟踪进度。](http://youtrack.jetbrains.com/issue/IDEA-87505)

# javascript - window.open 不打开窗口

> ID：12912690
> 
> 赞同：2
> 
> 时间：2012-10-16T10:30:37.573
> 
> 标签：javascript, html, window.open

我正在尝试在弹出窗口中打开一个页面，而不是在新选项卡中打开一个页面 - 但无论我尝试使用哪种浏览器，它都会在新选项卡中打开，而不是在弹出窗口中打开。

```
<input type="button" value="new win" onclick="window.open('http://yahoo.com', 'width=500, height=400')"  /> 
```

有什么理由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:33:51.130

第二个参数必须是窗口名称：

```
<input type="button" value="new win" 
    onclick="window.open('http://yahoo.com', 'mywindow', 'width=500, height=400')"  /> 
```

在 Chrome 和 Firefox 中运行良好：

[http://jsfiddle.net/DvMy5/2/](http://jsfiddle.net/DvMy5/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:34:14.480

第二个参数应该是名称..类似于`windowname`

```
<input type="button" value="new win" 
onclick="window.open('http://yahoo.com','windowname', 'width=500, height=400')"  /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T10:35:03.093

[JSFiddle](http://jsfiddle.net/Jams/L7QME/)

```
onclick="window.open('http://yahoo.com', 'MyYahoo', 'width=500, height=400, toolbar=no, menubar=no')"  /> 
```

`window.open`方法如下。

```
window.open(URL,name,specs,replace) 
```

这是一个很好的阅读[Window open()方法](http://www.w3schools.com/jsref/met_win_open.asp)

> 名称 可选。指定目标属性或窗口的名称。支持以下值：

```
_blank - URL is loaded into a new window. This is default
_parent - URL is loaded into the parent frame
_self - URL replaces the current page
_top - URL replaces any framesets that may be loaded
name - The name of the window 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:34:14.697

这不是由各种浏览器控制的吗？使用 target="_blank" 在 Chrome 的新标签页中打开，我猜这也适用于 Firefox、Opera、Safari 和 IE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-30T23:21:43.623

问题是 window.open 的第三个参数。当您传递第三个参数时，浏览器将打开一个提供窗口名称的新窗口（第二个参数尚未打开）。 将打开窗口，但会打开一个选项卡。`window.open("[http://localhost:5000](http://localhost:5000)", "newWindow", "resizable")``window.open("[http://localhost:5000](http://localhost:5000)", "newWindow")`

# ios - adjustsFontSizeToFitWidth 时 UILabel 的裁剪

> ID：12912693
> 
> 赞同：25
> 
> 时间：2012-10-16T10:30:57.843
> 
> 标签：ios, uilabel, clipping

当我将文本添加到`adjustsFontSizeToFitWidth`设置为`YES`文本的标签时，文本不再垂直居中，并最终将文本剪辑到标签框架的底部。对于大量文本，它最终会从标签底部消失。

![视图背景为蓝色，标签背景为白色](../Images/570c49b03259fee2d6078734f9781431.png)

如果您添加较少的文本，会发生这种情况：

![在此处输入图像描述](../Images/9feb896b5b2a3648d6f2875b262e1387.png)

正如我所期望的那样剪裁了（即字体大小没有减小，文本在标签中垂直居中并剪裁在顶部和底部。

![在此处输入图像描述](../Images/c7dd1716ce9b1a5978c590ebe422c471.png)

这是重现的代码：

```
- (void)loadView {
    [super loadView];

    self.view.backgroundColor = [UIColor blueColor];
    testLabel = [[UILabel alloc] init];
    testLabel.font = [UIFont boldSystemFontOfSize:172];
    testLabel.textColor = [UIColor blackColor];
    testLabel.adjustsFontSizeToFitWidth = YES;
    testLabel.numberOfLines = 1;
    testLabel.frame = CGRectMake(50, 50, 300, 100);
    testLabel.text = @"123";

    [self.view addSubview:testLabel];
} 
```

这应该发生吗？以及如何让我的标签垂直居中而不考虑标签中的字符数。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-16T10:34:17.333

添加

```
testLabel.baselineAdjustment = UIBaselineAdjustmentAlignCenters; 
```

到您的代码以垂直居中字体比例的文本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-21T14:19:36.913

还想补充一点，adjustsFontSizeToFitWidth 不适用于属性文本，所以如果可以的话，将属性添加到标签而不是属性文本。这对我有用。

# javascript - JavaScript 和 Document.Writeln() 方法

> ID：12912696
> 
> 赞同：2
> 
> 时间：2012-10-16T10:31:11.593
> 
> 标签：javascript, html

我是 JavaScript 的新手，现在我正在自己做一些练习。其中一种做法是从文本框中获取值，然后将其写在警报窗口上，或者使用`Document.writeln()`. 但是，我注意到一些奇怪的问题。当我尝试运行这个 javascript：

```
<!DOCTYPE html>

<html>
    <head>
        <meta charset = "utf-8">
        <title>HTML Practice</title>
        <script type="text/javascript" >
            function testing(){

                window.alert("testing");
                document.writeln("test");
                document.writeln("test");
                document.writeln("test");
                document.writeln("test");
                window.alert(document.getElementById('test0').value);
                window.alert(document.getElementById('test2').value);
            }
        </script>
    </head>

    <body>
        <table>
            <tr>
                <td><label>TextBox</label></td>
                <td><input type="text" id="test0" value="12" /></td>
            </tr>
            <tr>
                <td><label>Another TextBox</label></td>
                <td><input type="text" id="test2" value="3" /></td>
            </tr>
            <tr>
                <td><input type="button" id="button" value="Click here!" onclick="testing()" /></td>
                <td>Click this button to read the text in textbox</td>
            </tr>
        </table>
    </body>
</html> 
```

出现警报窗口，但不出现最后两个警报窗口。奇怪的是，当我像这样将javascript上的两条底线移到顶部时

```
window.alert(document.getElementById('test0').value); //this code is now on top
window.alert(document.getElementById('test2').value);    
window.alert("testing");
document.writeln("test");
document.writeln("test");
document.writeln("test");
document.writeln("test"); 
```

出现这两个警报窗口。还有另一个问题。我尝试了一些变化来跟踪这个问题：

```
document.writeln(document.getElementById('test0').value);
document.writeln(document.getElementById('test2').value);    
window.alert("testing");
document.writeln("test");
document.writeln("test");
document.writeln("test");
document.writeln("test"); 
```

`test0`并且`test2`是我的两个文本框的 ID。当 和 的值`test0`分别`test2`为 12 和 3 时，不会出现警报窗口，这就是 HTML 页面上显示的内容：

```
12 
```

但是当我像这样将这两条顶线放在底部时：

```
window.alert("testing");
document.writeln("test");
document.writeln("test");
document.writeln("test");
document.writeln("test");
document.writeln(document.getElementById('test0').value);
document.writeln(document.getElementById('test2').value); //Now on the bottom 
```

使用上面相同的文本框值，会出现警报窗口，这就是 HTML 页面上显示的内容

```
test test test test 
```

我期望的是输出应该是这样的：

```
test
test
test
test
12
3 
```

现在我很好奇，为什么当我只改变线的位置时，输出却有很大的不同？我的使用有什么问题`Document.Writeln()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:42:47.240

只要你在你的文件中写下

```
document.writeline("test"); 
```

您**删除**所有现有的 HTML，包括**框**`<input>`。如果它们不存在，`document.getelementById("test0");`将返回`null`。

使用 Firebug 很容易找到，只需`document.writeln("test")`在控制台中编写，您就会看到所有元素都消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:01:59.003

js函数测试的第一行

```
document.writeln(document.getElementById('test2').value); 
```

写入输入字段 test2 ie-12 的值并清除所有其他 html 元素，因此`Uncaught TypeError: Cannot read property 'value' of null`当您尝试访问 dom 中不存在的元素的属性时会引发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T17:08:17.387

document.writeln() 是浪费时间，因为它不会做程序员通常打算做的事情。只需使用 write() 来呈现
标签。

# java - 知道一个对象是否是Java中其他对象的子类

> ID：12912698
> 
> 赞同：0
> 
> 时间：2012-10-16T10:31:15.913
> 
> 标签：java

我正在覆盖由字符串标识的 Object 的 equals(Object o) 方法：

```
class User {
@Override
public boolean equals(Object o) {       
    return o != null && o.hashCode() == this.hashCode();
}

@Override
public int hashCode() {
    return id.hashCode();
}
} 
```

但我还想在方法中返回 true 之前检查是否`o`是的子类`this`或反之亦然`equals()`

对于我可以使用的第一种情况，`if (o instance of User)`但如何以另一种方式进行检查？

谢谢

编辑：由于我没有正确解释它，我将解释完整的问题：

我有课

```
public abstract class UniqueIdentifiedObject<E> {
    private E id;

    protected UniqueIdentifiedObject(E id) {
        super();
        this.id = id;
    }

    public E getId() {
        return id;
    }

    @Override
    public boolean equals(Object o) {
        return o != null && o.hashCode() == this.hashCode();
    }

    @Override
    public int hashCode() {
        return id.hashCode();
    }

} 
```

并且想法是当它由一个元素唯一标识时用一个对象继承这个类：例如，如果我的应用程序的用户由一个整数标识，我将使用：

```
class User extends UniqueIdentifiedObject<Integer> 
```

和电影

```
class Movie extends UniqueIdentifiedObject<Integer> 
```

UniqueIdentifiedObject 实现的问题在于，如果调用`equals()`id = 1 的电影和 id = 1 的用户，它将返回 true。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:36:28.997

```
this.getClass().isAssignableFrom(o.getClass()); 
```

[Class.isAssignableFrom](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)

从javadoc：

> 确定此 Class 对象表示的类或接口是否与指定的 Class 参数表示的类或接口相同，或者是其超类或超接口。如果是，则返回 true；否则返回false。如果此 Class 对象表示原始类型，则如果指定的 Class 参数正是此 Class 对象，则此方法返回 true；否则返回false。

所以上面检查返回的`this`类是返回的类的超类 be `o`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:42:36.530

首先：您的代码在大多数情况下都可以工作，但是根据相等性计算 equals() 是一种很好的做法，以避免误报。

您可以使用“Class.isAssignableFrom”检查动态类型，例如

```
 this.getClass().isAssignableFrom(other.getClass()) 
```

会告诉你， other 是同一个类还是“this”的任何子类。（因为这必须是其他的超类）

不过，我认为这里没有必要这样做

您可以确保“this”是 User 的子类，并且如果您可以确保 other 属于同一类型，那么它应该可以开箱即用。

所以在你的情况下，该方法可能看起来像

```
class User {
@Override
public boolean equals(Object o) {
   if (o==null) {
      return false;
   }
   if (o instanceof User) {
     return (o.id==null && id==null ) || (o.id.equals(id));
   }
}
@Override
public int hashCode() {
    return id.hashCode();
}
} 
```

# excel - 如何匹配2张纸中的数据并根据匹配复制数据？

> ID：12912700
> 
> 赞同：1
> 
> 时间：2012-10-16T10:31:18.493
> 
> 标签：excel, vbscript, copy, match

这是我的困境：

我有 2 张 excel 表。

```
- One is a target sheet with already existing information
- One is a source sheet 
```

我需要将源表列 C 中使用的单元格与目标表列 A 使用的单元格匹配，并将每行 3 个单元格从源复制到目标（到相邻行）。

因此，假设我在源表 C 列中的一个单元格中有“TESTUSER 测试”，并且在目标表列 A 的某个单元格中的某处有相同的名称。从源表中名称所在的行，我需要复制将 A、B、C 列单元格（仅来自该行）数据到目标表的名称在 A 列中的行，到 C、D、E 列。需要对源表列 C 中的每个名称执行相同的操作。

我已经设法使用“For each”方法从两张表中获取所需的值，但我不知道如何匹配数据并基于此进行复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:49:59.823

使用 Excel 公式会更容易吗？假设您的源工作表名为“Sheet1”，请将此公式粘贴到目标工作表的 C 列中：

```
=IF(ISERROR(MATCH("TESTUSER test",Sheet1!C:C, 0)), "No Match", INDIRECT(ADDRESS(MATCH("TESTUSER test",Sheet1!C:C, 0), 1,,, "Sheet1"))) 
```

这为您提供了 Sheet1 A 列中的值（请参见公式中某处的“1”）。然后将其复制到目标工作表的 D 列中：

```
=IF(ISERROR(MATCH("TESTUSER test",Sheet1!C:C, 0)), "No Match", INDIRECT(ADDRESS(MATCH("TESTUSER test",Sheet1!C:C, 0), 2,,, "Sheet1"))) 
```

并将其放入 E 列：

```
=IF(ISERROR(MATCH("TESTUSER test",Sheet1!C:C, 0)), "No Match", INDIRECT(ADDRESS(MATCH("TESTUSER test",Sheet1!C:C, 0), 3,,, "Sheet1"))) 
```

公式中的唯一区别是“1”、“2”和“3”，对应于 A、B 和 C 列（在本例中为 Sheet1）。

（答案与这个问题的答案惊人地相似： [Excel: Check if Cell value exists in Column, and then get the value of the NEXT Cell](https://stackoverflow.com/questions/12915215/excel-check-if-cell-value-exists-in-column-and-then-get-the-value-of-the-next)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:19:04.770

“正确”的方式可能涉及 ADO/SQL，但由于您有工作`For Each`循环，您可以使用字典将索引/行号存储在名称键下的 Src 中，如果在该字典中找到名称，则更新 Tgt。在代码中：

```
 Const cnSKI = 2  ' Src Key Index
  Const cnTKI = 0  ' Tgt Key Index
  Const cnTUO = 2  ' Tgt Update Offset
  Const cnFTC = 2  ' Fields To Copy

  Dim aoaSrc : aoaSrc = Array( _
      Array("a", "b", "A1", "NotInTgt") _
    , Array("c", "d", "a1", "UpdInTgt") _
  )
  Dim aoaTgt : aoaTgt = Array( _
      Array("B1", "NotInSrc", "x", "x", "xx") _
    , Array("a1", "UpdInTgt", "?", "?", "??") _
  )
  Dim dicSrc : Set dicSrc = CreateObject("Scripting.Dictionary")
  Dim i
  For i = 0 To UBound(aoaSrc)
      dicSrc(aoaSrc(i)(cnSKI)) = i
  Next
  dumpAOA "Src", aoaSrc
  dumpDic "Src dic", dicSrc
  dumpAOA "Tgt", aoaTgt
  For i = 0 To UBound(aoaTgt)
      If dicSrc.Exists(aoaTgt(i)(cnTKI)) Then
         Dim r : r = dicSrc(aoaTgt(i)(cnTKI))
         Dim c
         For c = 0 To cnFTC
             aoaTgt(i)(c + cnTUO) = aoaSrc(r)(c)
         Next
      End If
  Next
  dumpAOA "Tgt (updated)", aoaTgt

Sub dumpAOA(sTitle, aoaX)
  WScript.Echo "----", sTitle
  Dim a
  For Each a In aoaX
      WScript.Echo "", Join(a)
  Next
End Sub

Sub dumpDic(sTitle, dicX)
  WScript.Echo "----", sTitle
  Dim k
  For Each k In dicX.Keys
      WScript.Echo "", k, dicX(k)
  Next
End Sub 
```

输出：

```
---- Src
 a b A1 NotInTgt
 c d a1 UpdInTgt
---- Src dic
 A1 0
 a1 1
---- Tgt
 B1 NotInSrc x x xx
 a1 UpdInTgt ? ? ??
---- Tgt (updated)
 B1 NotInSrc x x xx
 a1 UpdInTgt c d a1 
```

# c# - 使用c#将文件从一个目录复制到另一个目录

> ID：12912702
> 
> 赞同：-3
> 
> 时间：2012-10-16T10:31:21.233
> 
> 标签：c#

我有这样的目录路径 \servername\DirectoryName\*.csv 并且有多个类似名称模式的 csv 文件，现在我想在 c# 中将其从一个目录复制到另一个目录。谁能帮我解决这个问题。*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:34:35.130

```
var sourceDir = @"c:\sourcedir";
var destDir = @"c:\targetdir";
var pattern = "*.csv";

foreach (var file in new DirectoryInfo(sourceDir).GetFiles(pattern))
{
   file.CopyTo(Path.Combine(destDir, file.Name));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:33:31.550

使用 Files.Copy() 方法。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx)的msdn 。*

# ios - 将对象添加到 JSONKit 创建的字典？

> ID：12912703
> 
> 赞同：1
> 
> 时间：2012-10-16T10:31:28.547
> 
> 标签：ios, parsing, nsdictionary, nsmutabledictionary, jsonkit

在我的项目中，我必须加载一些 json 文件。我用 JSONKit 解析它们，并在每次解析后使用

```
NSMutableDictionary *json = [myJSON objectFromJSONString]; 
```

我将它们添加到一个数组中，例如：

```
[self.themeArray addObject:json]; 
```

到目前为止，这工作正常。现在我需要在视图之间传递字典。到目前为止也有效，但我需要向字典 object-> json 添加更多对象。即使我将 json 声明为 NSMutableDictionary 它也不允许我添加对象，因为 JSONKit 解析器似乎创建了非可变字典。

我正在考虑创建一个并排包含 json 字典和我的附加数据的对象，这样我就不必更改 json 字典。我什至可以将其更改为 NSDictionary，因为无需更改它。但这对我来说似乎并不优雅。

您知道如何在不更改 JSONKit 库的情况下解决此问题吗？

提前致谢！

**编辑**

我刚刚尝试将我的代码更改为

```
NSMutableDictionary *json = [[myJSON objectFromJSONString] mutableCopy]; 
```

像这样的东西

```
[[self.theme objectForKey:@"theme"]  setObject:sender forKey:@"sender"];
[[self.theme objectForKey:@"theme"]  setValue:sender forKey:@"sender"]; 
```

Xcode 抛出异常：

*** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“*** -[JKDictionary setObject:forKey:]: mutating method sent to immutable object”

我认为这是由于上级词典中仍然存在嵌套词典。然后我将不得不通过我的 json 对象进行交互以将所有字典复制到可变字典，对吗？

也许最好按照 Guillaume 的建议切换到 NSJSONSerialization。

**编辑**

我刚尝试过这样的事情

```
[self.theme  setValue:sender forKey:@"sender"]; 
```

它现在有效！正如我所认为的那样。只有 json 对象被复制到可变对象。对你来说可能很明显，对我来说不是。

谢谢大家的帮助！

**编辑**

最后，在我无法将字典数据深处的所有对象更改为可变对象后，我再次更改了代码。我扔掉了 JSONKit，现在使用 NSJSONDeserialization 作为推荐，这里有 NSJSONReadingMutableContainers 选项。我的代码现在看起来像这样，所有容器（数组和字典）在内部也是可变的。这让我高兴！;-)

```
NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:myJSON options:NSJSONReadingMutableContainers error:&jsonParsingError]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:37:27.707

您始终可以通过复制对象的非可变副本来创建对象的可变版本。

```
NSMutableDictionary* json = [[myJSON objectFromJSONString] mutableCopy]; 
```

这不是最佳的，但是从性能的角度来看，复制较小的字典通常并不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:40:04.727

> 即使我将 json 声明为 NSMutableDictionary，它也不允许我添加对象，因为 JSONKit 解析器似乎创建了非可变字典。

声明变量的类型没有任何意义。您可以声明`json`为`NSNumber`，但这不会使其成为`NSNumber`.

您需要制作字典的可变副本（使用`mutableCopy`）才能获得`NSMutableDictionary`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:42:21.427

我有你的三个想法。

1.  创建真实的数据模型对象并将它们存储在您的数组中。使用 JSON 字典来初始化您的对象。
2.  将 NSMutableDictionary 对象存储在您的数组中。将 JSON 字典传递`+[NSMutableDictionary dictionaryWithDictionary:]`给以初始化 NSMutableDictionary。其他人建议调用`-[NSDictionary mutableCopy]`JSON 字典来做同样的事情。
3.  创建一个基于 NSDictionary 的类别来存储附加数据。

笔记：

通常，创建类来表示您的数据被认为是最佳选择，但它也是最多的前期工作。基本上，当您尝试继续维护字典时，您需要更多的前期工作与更多的维护工作。

存储可变字典正是您所要求的，但是找到将 JSON 字典添加到数组中的所有位置并用新调用替换它们可能需要做很多工作。

为 NSDictionary 创建一个类别意味着您不需要更改任何当前代码，但它需要维护人员了解您如何增强 NSDictionary。此外，它将有助于将您的更改与原始解析的 JSON 分开。您可以使用关联对象来存储数据。

# javascript - 更改定义方式时的原型奇怪结果

> ID：12912709
> 
> 赞同：1
> 
> 时间：2012-10-16T10:31:45.977
> 
> 标签：javascript, prototype

在尝试测试原型功能时，我得到了这个奇怪的结果：这是我的第一个测试：

```
<script>
function Hello() {
}
var a = new Hello();

Hello.prototype.name = "Fred";
alert(a.name);
</script> 
```

而且，这是第二个：

```
<script>
function Hello() {
}
var a = new Hello();

Hello.prototype = {
        name : "Fred",
}
alert(a.name);
</script> 
```

我不明白为什么第一个会返回带有“Fred”的警报，而第二个是“未定义”，尽管它们的意思是一样的？你能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:34:19.193

当您在 JavaScript 中定义一个函数时，解释器会`prototype`在该函数上提供一个特殊属性，该属性指向一个对象，以防您将该函数用作构造函数。当`[[Prototype]]`您使用构造函数创建新对象时，内部属性指向该对象。

当你`prototype`用一个新的属性替换属性时，你就是在替换那个引用，如果你在*实例化*一个对象之后这样做，你会发现这个`prototype`对象看起来是*陈旧*的（那个对象指向的`[[Prototype]]`是指向的原始对象`prototype`）。

### 解决方案

仅直接在属性上分配新属性`prototype`。

```
var constructor = function() { };
constructor.prototype.someMethod = function() { }; 
```

使用*扩展*类型函数用新对象扩展现有`prototype`属性（在本例中，我使用了 Underscore 的[`extend()`](http://underscorejs.org/#extend)函数）。

```
var constructor = function() { };
_.extend(constructor.prototype, { someMethod: function() { } }); 
```

确保在构造函数之后，分配`prototype`属性是程序中的下一步（通常不推荐）。

```
var constructor = function() { };
constructor.prototype = { someMethod: function() { } }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:34:19.393

你的订单搞砸了。在使用运算符*之前*，您需要将对象分配给原型`new`：

```
function Hello() {
}

Hello.prototype = {
        name : "Fred",
}

var a = new Hello();
alert(a.name);​ 
```

[**演示。**](http://jsfiddle.net/karim79/9E9jn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:34:05.170

这两个代码片段实际上并不相等。

在第一个脚本中您只覆盖`Hello.prototype.name`，而在第二个脚本中您覆盖`Hello.prototype`.

# cakephp - CakePHP - 深度模型绑定与使用

> ID：12912715
> 
> 赞同：1
> 
> 时间：2012-10-16T10:32:15.047
> 
> 标签：cakephp, model, controller, cakephp-2.0

我最近读了一篇旧文章，这是建议的

> **避免使用 $uses 数组**
> 你有两个完全不相关的模型，但你需要来自另一个控制器中的一个的信息。第一个想法是将它们添加到 $uses 数组中。嘿，这很容易，可以完成工作。好吧，长话短说，这是不好的做法。考虑一下您的模型绑定，并确保模型确实彼此不相关。有时您的 User 模型绝对与 CommentRating 无关，但您绝对需要在您的用户控制器中使用它。好吧，只是偶然地出现了 User->Post->Comment->CommentRating。这是一个深度绑定，起初可能并不明显，但通过使用这样的模型链，您可以轻松避免使用 $uses 数组，而实际上没有必要。

为了可读性/可维护性，我倾向于将 CommentRating 放在 uses 数组中，然后直接调用 $this->CommentRating。

**使用 $uses 数组真的是不好的做法，如果是，为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:07:46.277

这句话把一个长故事剪得太短了。为什么这是一个不好的做法？他甚至没有给出一个理由。我不会太在意它。

我不是专家，但在某些情况下，代码中的可读性和常识肯定比一分钟的性能提升或任何其他避免 $uses 可能提供的东西更重要。我将继续使用 $uses 而不是像 User->Post->Comment->Rating 这样的模糊模型链

编辑：正如@tigrang 添加的那样，在 Cake 2 中延迟加载模型，无论如何都没有真正的性能优势！

# wcf - 我是否需要发送带有 WSDL 的 XSD 文件以进行实施

> ID：12912719
> 
> 赞同：2
> 
> 时间：2012-10-16T10:32:28.217
> 
> 标签：wcf, xsd

我正在.net 中开发 WCF 服务，并希望将 wsdl 文件提供给可以使用我们服务的客户。我成功生成了包含 xsd 导入语句的 wsdl

```
<xsd:import schemaLocation="https://URL/Service-v1.svc?xsd=xsd1" namespace="Service-v1" /> 
<xsd:import schemaLocation="https://URL/PricingService-v1.svc?xsd=xsd3"  /> 
```

ETC

**但我想知道的是，只需将 wsdl 发送给客户就足够了，还是我还需要向他们发送 XSD 文件。**

如何为每个类生成单独的 XSD 文件，例如 class1.xsd、class2.xsd、class3.xsd

这是我的项目结构 **DataModel** Class1.cs Class2.cs Class3.cs Response.cs **Contract** IService1 与以下合同 Response GetQuote1(Class1 class1Request); 响应 GetQuote2(Class2 class2Request); 响应 GetQuote2(Class2 class2Request);

**服务** 服务1：Iservice1

```
 public Response GetQuote1(Class1 class1Request)
  {
          return response;
  }

  public Response GetQuote2(Class2 class2Request)
  {
          return response;
  }

  public Response GetQuote3(Class3 class3Request)
  {
          return response;
  } 
```

我在互联网上搜索，但无法决定最佳选择，因为我们无法控制将要实施 WCF 服务的另一端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:53:42.850

我不了解 .net，但我在消费和向 3rd 方提供 Web 服务方面都有经验。

WSDL 基本上是可以在远程服务器上调用的函数以及如何连接的列表。每个函数都将具有用于请求和响应的 XML 格式。可以将这些模式嵌入 WSDL 本身。如果是这种情况，那么您只需发送这一个文件。在我看来，您自动生成的 WSDL 在单独的文件中具有请求和响应参数的模式。如果是这种情况，那么他们将需要 WSDL 和 XSD。

如果您只提供 WSDL，那么他们将知道如何打包 SOAP 请求，但他们不会知道正文中的 XML 格式。有点像知道某人的电话号码但不知道他们说的语言，没有多大用处！如果我是客户，我宁愿只拥有 XSD，而不仅仅是 WSDL。定义好输入和输出后，我就可以开始编码了。然后，一旦我可以访问完整的 WSDL 和 XSD，我就可以生成一个存根来调用适当的服务并连接我已经编写的代码。当然，如果 XSD 和 WSDL 都准备好了，那么请一定要给我发很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T17:08:15.253

如果您将 .NET 与 WCF 一起使用，则服务描述页面通常会包含一个链接，例如：

```
http://localhost:12345/Foo.svc?singleWsdl 
```

如果您从浏览器中右键单击并保存该文件，则它是一个包罗万象的 WSDL + 模式，用于每个调用，其中包含使用者对服务所需的所有信息。

# django - 常规过滤器的多对多关系中的自定义管理器

> ID：12912723
> 
> 赞同：0
> 
> 时间：2012-10-16T10:32:51.267
> 
> 标签：django, django-orm, django-managers

```
class Proposal(models.Model):
    author = models.ForeignKey(Person, related_name="author")

    def get_tags(self):
        return Tag.objects.filter(tagged_proposals=self.id) 

class Tag(models.Model):
    tagged_proposals = models.ManyToManyField(Proposal)
    name = models.CharField(primary_key=True, max_length=60) 
```

我需要在某个模板上列出提案的标签，这样我就可以编写`{% for tag in proposal.get_tags %}`它并且它工作得很好。

现在我阅读了有关经理的信息，将我转换为经理似乎是一个不错的举措`get_tags`。我尝试了以下但它没有输出任何东西。我究竟做错了什么？首先把它变成经理有意义吗？

```
class ProposalsTagsManager(models.Manager):
    def get_query_set(self):
                proposal_id = how-do-i-get-the-proposal-id???
        return Tag.objects.filter(tagged_proposals=proposal_id) 
```

用法：`{% for tag in p.tags.all %}`输出：无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:26:56.533

您不需要为此使用自定义功能。

当使用 ManyToManyField 引用表时，您将获得一个名为 MODEL_set 的方法来获取该模型的查询集。

因此，在您的情况下，您可以像这样引用所有标签：

```
proposal = Proposal.objects.get(pk=1)
tags = proposal.tag_set.all() # You can also use filter here 
```

# bash - 在循环中将列粘贴到现有文件

> ID：12912727
> 
> 赞同：6
> 
> 时间：2012-10-16T10:33:04.763
> 
> 标签：bash, shell, unix, paste

我在 bash 循环中使用 paste 命令将新列添加到 CSV 文件。我想重用 CSV 文件。目前我正在使用一个临时文件来完成此操作：

```
while [ $i -le $max ]
    do
        # create text from grib2
        wgrib2 -d 1.$(($i+1)) -no_header myGribFile.grb2 -text tmptxt.txt

        #paste to temporary file
        paste -d, existingfile.csv tmptxt.txt > tmpcsv.csv  

        #overwrite old csv with new csv
        mv tmpcsv.csv existingfile.csv

        ((i++))
    done 
```

添加一些列后，副本变得越来越慢，因为文件变得越来越大（每个`tmptxt.txt`都有大约 2 MB，增加到大约 100 MB）。

A`tmptxt.txt`是一个普通的 txt 文件，每行有一列和一个值：

```
1
2
3
.
. 
```

`existingfile.csv`那么将是

```
1,1,x
2,2,y
3,3,z
.,.,.
.,.,. 
```

有没有办法使用粘贴命令将列添加到现有文件？或者还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T16:29:21.500

将操作拆分为 2 是否可行？一步生成*所有*中间文件；另一个用于生成*所有*最终输出文件。这个想法是为了避免一遍又一遍地重新读取和重写最终文件。

对脚本的更改将是这样的：

```
while [ $i -le $max ]
do
    n=$(printf "%05d" $i)    # to preserve lexical order if $max > 9
    # create text from grib2
    wgrib2 -d 1.$(($i+1)) -no_header myGribFile.grb2 -text tmptxt$n.txt
    ((i++))
done

#make final file
paste -d, existingfile.csv tmptxt[0-9]*.txt > tmpcsv.csv  

#overwrite old csv with new csv
mv tmpcsv.csv existingfile.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:56:29.067

假设程序输出的行数是恒定的并且等于行数`existingfile.csv`（应该是这种情况，因为您正在使用`paste`）

免责声明：我不确定这是否会加快速度（取决于 io 重定向是否`>>`只写入一次文件）。无论如何试一试，让我知道。

所以基本思想是

1.  循环完成后一次性追加输出（注意更改：wgrib 现在打印到`-`which is `stdout`）

2.  使用 awk 将每一`linenum`行（`linenum`即行数`existingfile.csv`）移动到第一`linenum`行的末尾

    保存到`tempcsv.csv`（因为我找不到保存在同一个文件中的方法）

3.  重命名为/覆盖`existingfile.csv`

.

```
while [ $i -le $max ]; do
  # create text from grib2
  wgrib2 -d 1.$(($i+1)) -no_header myGribFile.grb2 -text -

  ((i++))
done >> existingfile.csv

awk -v linenum=4 '
  { array[FNR%linenum]=array[FNR%linenum]","$0 } 
  END { for(i=1;i<linenum;i++) print array[i%linenum] }
' existingfile.csv > tempcsv.csv

mv tempcsv.csv existingfile.csv 
```

如果这是我想象的（内部）工作方式，那么您应该有 2 次写入`existingfile.csv`而不是`$max`写入次数。所以希望这会加快速度。

# php - require_once 加载一个文件，但不加载另一个。没有显示错误

> ID：12912731
> 
> 赞同：2
> 
> 时间：2012-10-16T10:33:18.203
> 
> 标签：php, require-once

我的设置如下：

```
/index.php  
/php/init.php  
/php/config.php  
/php/functions.php 
```

index.php 做的第一件事是：

```
<?php include 'php/init.php'; ?> 
```

init.php 然后像这样继续：

```
<?php  
define('DEBUG',true);   
if(DEBUG){          
error_reporting(E_ALL);  
ini_set('display_errors', '1');  
}  
require_once 'config.php';  
require_once 'functions.php';   
?> 
```

加载页面时，我从functions.php 收到一堆错误，抱怨缺少应该在config.php 中设置的变量。事实证明，config.php 中的所有内容都被忽略，就好像 require_once 语句不存在一样。`var_dump( get_included_files());`证实了这一点。

它不显示任何错误，如果我简单地将 require_once 行替换为 config.php 的内容，它就可以正常工作。当 config.php 和 functions.php 都只包含一个 echo 命令时，也会发生同样的事情。所以文件的内容应该不是问题。关于如何确定错误在哪里以及为什么它会包含一个文件而不包含另一个文件，我有点不知道。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:38:59.623

这是代码吗

```
_<_?php  
define('DEBUG',true);   
if(DEBUG){          
error_reporting(E_ALL);  
ini_set('display_errors', '1');  
}  
require_once 'config.php';  
require_once 'functions.php';   
?> 
```

属于 index.php

如果是这种情况，您的配置和函数路径不正确。

利用

```
require_once 'php/config.php';  
require_once 'php/functions.php'; 
```

代替

```
require_once 'config.php';  
require_once 'functions.php'; 
```

我想这会解决你的问题。

# jquery - jQuery 的 .change() 可能不会触发

> ID：12912732
> 
> 赞同：0
> 
> 时间：2012-10-16T10:33:20.800
> 
> 标签：jquery, asp.net, onchange

当用户更改文本框的值时，我试图将值插入数据库。我已经在没有 jQuery 的情况下自行检查了后端代码 (C#)，并确认它正在工作，这让我相信问题在于 jQuery`.change()`事件没有被触发。

我见过许多相同的问题，尽管没有一个解决方案似乎相关。我怎样才能得到这个工作？

jQuery：

```
<script type="text/javascript">
    $(function () {
        $('.qty').change(function () {
            $.post('/InlineEditing.cshtml', { qty: $(this).val(), id: $(this).attr('id') },
                function (data) {
                    alert(data.trim());
                });
        });
    });
</script> 
```

HTML：

```
<input type="text" class="qty" id="1" value="0" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:41:54.917

如果您想可靠地处理文本更改，请改用 zurb 的**textchanged**事件。这适用于击键、粘贴操作、剪切操作等。

[http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

检查这个**演示：http:** [//jsfiddle.net/JnCXG/](http://jsfiddle.net/JnCXG/)

**代码：**

```
$('#foo').bind('textchange', function (event, previousText) {   
    console.log('Text changed');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:39:08.317

我认为这个问题有几个方面：

*   如果您想在每次按键时更新服务器状态，您可以改为收听`keypress`事件。
*   另请注意，您可能应该将 HTTP 命令指向接受 POST 命令的 URL，而不是指向呈现的 HTML。
*   `alert`非常不足以调试脚本中发生的事情。考虑使用像 Firebug 这样的 JavaScript 调试器来找出真正发送到服务器的内容。

例如，请参阅此小提琴： http: [//jsfiddle.net/dfH7y/3/](http://jsfiddle.net/dfH7y/3/)（您需要打开 JavaScript 控制台才能查看`console.log`输出）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:42:48.940

`Keyup`您可以在或事件上编写函数`onblur`而不是更改。更改事件适用于选择框。

# php - 如何在php中使用复杂类型的soap webservice

> ID：12912734
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:33:25.947
> 
> 标签：php, soap, wsdl

我正在尝试在 php 中使用具有身份验证的复杂类型的 Web 服务。任何人都可以向我展示示例 php 代码。我已阅读完整的 php.net 文档，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:24:23.640

I used a SOAP extension to consume the webservice and appended the authentication to a url, used "crxml" to parse it as the response contained a namespace it was very hard parsing it using xpath.

```
$login = 'username';
$password = 'password';
// establish connection and pass the credentials
$client = new SoapClient(
     'https://' . urlencode($login) . ':' . urlencode($password) . '@url?wsdl',
     array(
         'login' => $login,
         'password' => $password,
         'trace' => TRUE
     )
 ); 
```

# haskell - RankNTypes：是什么导致了这个错误？

> ID：12912739
> 
> 赞同：9
> 
> 时间：2012-10-16T10:33:42.477
> 
> 标签：haskell, types, ghc

我一直在探索 Rank2Types 和 RankNTypes 以尝试熟悉它们。但我无法弄清楚为什么以下不起作用。

```
g :: (forall a. forall b. a -> b) -> x -> y -> (u,v)
g p x y = (p x, p y) 
```

这个定义被编译器接受，但是当我尝试使用它时它失败了：

```
ghci> g id 1 2

<interactive>:35:3:
    Couldn't match type `a' with `b'
      `a' is a rigid type variable bound by
          a type expected by the context: a -> b at <interactive>:35:1
      `b' is a rigid type variable bound by
          a type expected by the context: a -> b at <interactive>:35:1
    Expected type: a -> b
      Actual type: a -> a
    In the first argument of `g', namely `id'
    In the expression: g id 1 2 
```

我很难理解为什么`a->a`预期的类型不可接受`a->b`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T10:45:08.050

对于所有类型`a`，类型`b`的函数`forall a. forall b. a -> b`必须能够获取类型的值`a`并产生类型的值`b`。因此，例如，它必须可以放入 a`Int`并取出 a `String`。

如果你输入一个- 你只能得到你输入`String`的相同类型。所以不是类型。事实上，没有类型类约束就不可能有该类型的全部功能。`id``Int``id``forall a. forall b. a -> b`

* * *

事实证明，你可以使用 ConstraintKinds 做一些接近（ish）你想要做的事情，但它既不漂亮，也不漂亮：

这个想法是用约束参数化，这些约束指定、 和 需要满足哪些条件，以及`g`和`x`之间的关系和需要是什么关系。由于我们在所有情况下都不需要所有这些约束，因此我们还引入了两个虚拟类型类（一个用于对单个参数的约束，一个用于“关系约束”），以便我们可以将它们用作不需要约束的约束（如果我们自己不指定约束，GHC 将无法推断约束）。`y``u``v``x``u``y``v`

一些示例约束使这一点更清楚：

*   如果我们`id`作为函数传入，`x`必须等于`u`且`y`必须等于`v`。`x`,`y`或`u`单独没有限制`v`。
*   如果我们传入`show`, `x`and`y`必须是 and 的实例并且`Show`必须等于. 和或和之间的关系没有限制。`u``v``String``x``u``y``v`
*   如果我们传入`read . show`, `x`and`y`需要是 和 的实例并且`Show`需要是. 再次对它们之间的关系没有限制。`u``v``Read`
*   如果我们有一个类型类`Convert a b where convert :: a -> b`并且我们传入`convert`，那么我们需要`Convert x u`并且`Convert y v`没有对单个参数的约束。

所以这里是实现这个的代码：

```
{-# LANGUAGE Rank2Types, ConstraintKinds, FlexibleInstances, MultiParamTypeClasses #-}

class Dummy a
instance Dummy a

class Dummy2 a b
instance Dummy2 a b

g :: forall c. forall d. forall e. forall x. forall y. forall u. forall v.
     (c x, c y, d u, d v, e x u, e y v) =>
     (forall a. forall b. (c a, d b, e a b) => a -> b) -> x -> y -> (u,v)
g p x y = (p x, p y) 
```

以下是如何使用它：

`show . read`用于在不同类型的数字之间进行转换：

```
> (g :: (Show x, Show y, Read u, Read v, Dummy2 x u, Dummy2 y v) => (forall a. forall b. (Show a, Read b, Dummy2 a b) => a -> b) -> x -> y -> (u,v)) (read . show) 1 2 :: (Double, Int)
(1.0,2) 
```

使用`id`：

```
> (g :: (Dummy x, Dummy y, x~u, y~v) => (forall a. forall b. (Dummy a, Dummy b, a~b) => a -> b) -> x -> y -> (u,v)) id 1 2.0
(1,2.0) 
```

使用`show`：

```
> (g :: (Show x, Show y, String~u, String~v, Dummy2 x u, Dummy2 x y) => (forall a. forall b. (Show a, String~b, Dummy2 a b) => a -> b) -> x -> y -> (u,v)) show 1 2.0
("1","2.0") 
```

如您所见，这非常冗长且难以阅读，因为您`g`每次使用它时都需要指定一个签名。没有这个，我认为不可能让 GHC 正确推断约束（或者至少我不知道如何）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T10:50:14.053

当您查看一个函数`forall a. forall b. a -> b`时，这意味着它接受任何类型的值并且可以返回任何类型的值。假设是这样一个函数，那么您可以向任何函数或任何函数`f`提供 say ，因为 f 的返回类型仍然是多态的，而另一方面，一旦您给返回类型一个值是固定的（它将与输入值），因此错误。 `f 1``f "hello"``id`

# javascript - insertAfter 点击元素

> ID：12912741
> 
> 赞同：0
> 
> 时间：2012-10-16T10:33:45.293
> 
> 标签：javascript, jquery

我有以下标记；

```
<div class="model-timeline">
        <p>Text</p>
        <div class="timeline">
            <div class="span-blank-5"></div>
            <div class="time-span-1"></div>
            <div class="time-span-2"></div>
            <div class="time-span-2"></div>
        </div>
    </div>
<div class="model-timeline">
        <p>Text</p>
        <div class="timeline">
            <div class="span-blank-5"></div>
            <div class="time-span-1"></div>
            <div class="time-span-2"></div>
            <div class="time-span-2"></div>
        </div>
    </div> 
```

和脚本；

```
 $('[class*="time-span"]').on('click', function () {
    $('.model-detail-panel').insertAfter('.timeline').slideDown('fast', function () {
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 500);
    });
}); 
```

单击其中一个时间跨度类后，我需要插入一个新的 div 'model-detail-panel'。

这个新的 div 应该出现在时间线类之后，并且只出现在被点击的时间线类的父 div 内。

我拥有的代码是插入 div，但它在每个时间线类之后添加它，这不是我需要的行为。

如何修改我的代码以仅针对元素的单击父级，从而插入 div 一次？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:35:15.617

利用

```
 $('.model-detail-panel').insertAfter($(this).parent()) ... 
```

这将在单击元素的父级之后插入您的面板。

# java - java模式匹配对空格不敏感

> ID：12912742
> 
> 赞同：0
> 
> 时间：2012-10-16T10:33:45.543
> 
> 标签：java, regex

我有：

```
Pattern pat = Pattern.compile("(\\d+) (\\d+) (1$)");
Matcher mat = pat.matcher(line); 
```

匹配：

```
1 2 1 
```

但不适用于：

```
1     2     1 
```

我怎样才能实现，模式匹配根据数字之间的空格是不敏感的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:36:01.253

用于`\s`一个空格并添加一个`+`表示一个或多个空格。

```
"(\\d+)\\s+(\\d+)\\s+(1$)" 
```

如果您想要零个或多个空格，则必须使用 a`*`而不是`+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:36:22.250

与空格一起使用`quantifier (+)`，以匹配`one or more`空格：-

```
Pattern.compile("(\\d+)\\s+(\\d+)\\s+(1$)"); 
```

同样还有其他`quantifiers`： -

*   `*`匹配`0 or more`
*   `?`匹配`0 or 1`

# android - 为内存问题选择最大位图大小

> ID：12912760
> 
> 赞同：4
> 
> 时间：2012-10-16T10:34:19.363
> 
> 标签：android, memory, bitmap, heap-memory

在我的应用程序中，我将加载和显示来自服务器的各种图像，并且每个图像的大小没有限制。我已经与许多人在这里抱怨的 Android 中位图内存使用的各种问题进行了斗争，而且我已经做了很多工作，当我完成旧位图时，它们会被释放和回收. 我现在的问题是单个巨大图像本身超出内存分配的可能性。我已经研究了缩小图像大小以节省内存并了解所有工作原理的各种选项 - 我的问题是我想尽可能地保持图像质量，所以我希望位图使用尽可能多的内存它可以不杀死一切。

所以，我的问题是，鉴于内存容量不同的设备种类繁多，有没有办法在运行时确定合适的最大大小，以平衡内存分配和图像质量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:53:45.737

我发现自己也有类似的问题。经过一些研究和测试，我想出了一些方法来帮助我解决这个问题。这些是使用 C# 使用 Mono for Android 实现的，但我想它们应该与 Java 几乎相同：

```
/// <summary>
///Calculates the memory bytes used by the given Bitmap.
/// </summary>
public static long GetBitmapSize(Android.Graphics.Bitmap bmp)
{
  return GetBitmapSize(bmp.Width, bmp.Height, bmp.GetConfig());
}

/// <summary>
///Calculates the memory bytes used by a Bitmap with the given specification.
/// </summary>
public static long GetBitmapSize(long bmpwidth, long bmpheight, Android.Graphics.Bitmap.Config config)
{
  int BytesxPixel = (config == Android.Graphics.Bitmap.Config.Rgb565) ? 2 : 4;

  return bmpwidth * bmpheight * BytesxPixel;
}

/// <summary>
///Calculates the memory available in Android's VM.
/// </summary>
public static long FreeMemory()
{
  return Java.Lang.Runtime.GetRuntime().MaxMemory() - Android.OS.Debug.NativeHeapAllocatedSize;
}

/// <summary>
///Checks if Android's VM has enough memory for a Bitmap with the given specification.
/// </summary>
public static bool CheckBitmapFitsInMemory(long bmpwidth, long bmpheight, Android.Graphics.Bitmap.Config config)
{
  return (GetBitmapSize(bmpwidth, bmpheight, config) < FreeMemory());
} 
```

该代码被证明非常可靠，可以防止内存不足异常。下面的代码片段是在名为*Utils*的命名空间中使用这些方法的示例。此代码计算 3 个位图所需的内存，其中两个是第一个的 3 倍。

```
/// <summary>
/// Checks if there's enough memory in the VM for managing required bitmaps.
/// </summary>
private bool NotEnoughMemory()
{
  long bytes1 = Utils.GetBitmapSize(this.Width, this.Height, BitmapConfig);
  long bytes2 = Utils.GetBitmapSize(this.Width * 3, this.Height * 3, BitmapConfig);

  return ((bytes1 + bytes2 + bytes2) >= Utils.FreeMemory());
} 
```

# java - 通过 exec 或 shell_exec 执行 java 会出错

> ID：12912767
> 
> 赞同：3
> 
> 时间：2012-10-16T10:34:36.743
> 
> 标签：java, php, linux, exec, java-7

我已经`jdk1.7.0_07`安装在服务器（linux）上。文件的文件权限`~/bin`是可执行的（755）。但是，当我尝试执行时，

```
$output = exec("/usr/java/jdk1.7.0_07/bin/java -version 2>&1");
echo $output; 
```

它给出了权限被拒绝错误，我试过这个，

```
$output = exec("java -version 2>&1");
echo $output; 
```

这给出了未找到命令的错误。在检查我的环境变量时。我已成功添加`JAVA_HOME = /usr/java/jdk1.7.0_07`并为`PATH = /usr/java/jdk1.7.0_07/bin`

### 但，

当我运行上面提到的 PHP 脚本时，它不断给我那些权限被拒绝或命令未找到错误。任何个人经验或线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:00:55.863

如果你的操作系统是 CentOS，它可能来自 SELinux。

```
root@ls:~# /usr/sbin/getenforce 
Enforcing
root@ls:~# /usr/sbin/setenforce Permissive
root@ls:~# /usr/sbin/getenforce 
Permissive 
```

[https://superuser.com/questions/455935/php-script-cant-run-bash-script-sh-permission-denied](https://superuser.com/questions/455935/php-script-cant-run-bash-script-sh-permission-denied)中的更多详细信息

它为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:23:17.857

如果您从命令行运行这些命令，您可能会使用自己的用户权限执行它们。但是，当您通过 Web 应用程序中的 PHP 脚本执行这些相同的命令时，它们将使用 Apache 用户（通常是 www-data）权限执行。这意味着您不能依赖命令行输出来调试权限错误，除非您可以以运行 PHP 脚本的完全相同的用户身份登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:19:03.860

看来您有两个明显的问题：

如果在您提供 Java 可执行文件的完整路径时出现权限被拒绝错误，那么您的权限可能不正确。最常见的原因是，在路径的某个地方，Apache 用户（通常是 www-data）没有读取权限。例如，如果 www-data 没有 jdk1.7.0_07 目录的读取权限，则它无法看到（或打开）它的子目录 bin。

关于路径，除非正确设置权限，否则它将不起作用。但是，您在哪里设置了环境 PATH？它在用户个人资料中吗？

# filter - 我们可以为 Symfony 插件提供插件级别的 filters.yml 吗？

> ID：12912769
> 
> 赞同：1
> 
> 时间：2012-10-16T10:34:41.620
> 
> 标签：filter, symfony-1.4, symfony-plugins

我正在开发一个 Symfony 插件来限制用户访问另一个插件的操作。我想把它作为一个 symfony 过滤器来实现。

我可以通过拥有一个插件级别`filters.yml`而没有一个 main来添加自定义过滤器吗`filters.yml`？这个插件级别的要求是因为我想阻止用户编辑主要的 filters.yml 和使用系统。

**PS：**我创建的这个插件是加密的，我不想加密主应用程序。

# android - 如何删除android中url之间的空格？

> ID：12912770
> 
> 赞同：0
> 
> 时间：2012-10-16T10:34:51.110
> 
> 标签：android

如何删除 & 前后的空白

[http://chemist.com:8080/eShop/search_results.jsp?IDNUMBER=BB55-7344](http://chemist.com:8080/eShop/search_results.jsp?IDNUMBER=BB55-7344) & Source=BuildingBlocks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:15:30.200

尝试 ：

```
urlString = urlString.replaceAll(" ", "%20"); 
```

此代码替换所有空白。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T10:37:25.003

```
String newUrl = oldUrl.replaceAll(" ", ""); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T10:45:41.877

尝试：

```
String newURI = oldURI.replaceAll("\\s+", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:58:06.267

```
if(result.contains(" and "){ 
      resultnew = result.replace(" and ","&amp").toString(); 
} 
```

您实际上并不需要“if”检查，尽管它更快（除非结果***总是***包含“和”），因为如果“和”未找到，replace() 将返回输入字符串。你也不需要 toString() 因为 replace() 返回一个字符串。

# java - 如何使用 OSGi 片段贡献具有相同文件名的平台相关本机代码？

> ID：12912772
> 
> 赞同：6
> 
> 时间：2012-10-16T10:34:52.357
> 
> 标签：java, osgi, native-code, osgi-fragment

我正在使用[JNotify](http://jnotify.sourceforge.net/)项目来监听文件系统事件。这取决于每个 OS:processor 体系结构的一个本机库。例如，有一个用于 Windows x86 的库，一个用于 x86-64 的库等。

## 单片捆绑

最初，我有一个包含 JNotify Java 类和本机代码的包。本机代码在 Bundle-NativeCode 中声明如下：

（为了更好的可读性，我已将它们格式化为 bnd 样式......显然，实际的 MANIFEST.MF 文件格式正确）。

```
Bundle-NativeCode: jnotify_64bit.dll;osname=Win32;osname="Windows NT (unknown)";osname = WindowsXP;osname = Windows2000;osname = Windows2003;osname = WindowsVista;osname = Windows7;osname = WindowsServer2008;osname= Windows8;osname = WindowsServer2012;processor = x86-64,\
 jnotify.dll;osname=Win32;osname="Windows NT (unknown)";osname = WindowsXP;osname = Windows2000;osname = Windows2003;osname = WindowsVista;osname = Windows7;osname = WindowsServer2008;osname = Windows8;osname = WindowsServer2012;processor = x86,\
 libjnotify.so;osname = Linux;processor = x86,\
 libjnotify64.so;osname = Linux;processor = x86-64,\
 libjnotify.dylib;osname = Mac OSX;processor = x86;processor = x86-64,\
 * 
```

这运作良好。

## 移动到片段

我认为如果我将库移动到单独的片段包中会“很好”，这样我就可以为我感兴趣的架构贡献片段。以 Linux 为例，我将它们分成两个包：

**Linux 32 位**

```
Include-Resource: lib/libjnotify.so
Bundle-NativeCode: libjnotify.so;osname = Linux;processor = x86,\
    *
Fragment-Host: net.contentobjects.jnotify
Bundle-Version: 0.94.0 
```

**Linux 64 位**

```
Include-Resource: lib/libjnotify.so
Bundle-NativeCode: libjnotify.so;osname = Linux;processor = x86-64,\
    *
Fragment-Host: net.contentobjects.jnotify
Bundle-Version: 0.94.0 
```

请注意，这些捆绑包是从不同的来源构建的。尽管 libjnotify.so 文件名相同，但它们是不同 Eclipse 项目中的不同文件。它们必须相同才能与 JNotify 一起使用。

**请注意，相同的文件名被贡献给主机包。**在这种情况下，文件名为 libjnotify.so。

*如果我在我的 64 位机器上运行这些，并且在 32 位之前*加载 64 位包，它就可以工作。

但是，如果首先加载 32 位包，我会得到：

```
Couldn't initialise JNotify: java.lang.UnsatisfiedLinkError: /blah/generated/fw/bundle46/version0.0/net.contentobjects.jnotify.linux.x86-0.94.0.jar-lib/0/libjnotify.so: /blah/generated/fw/bundle46/version0.0/net.contentobjects.jnotify.linux.x86-0.94.0.jar-lib/0/libjnotify.so: wrong ELF class: ELFCLASS32 (Possible cause: architecture word width mismatch) (JnotifyFileSystemObserver.java:53, thread platformExecutor) 
```

显然正在加载 32 位库。**但为什么？**我的 Bundle-NativeCode 定义主机必须是 32 位 Linux 机器才能使用 32 位包的版本。我想如果那个子句不匹配，图书馆会被忽略吗？

## 我试过的东西

*   删除可选通配符...这仅意味着捆绑包无法解析

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:09:18.047

由于您的片段占用相同的资源命名空间，因此只能访问一个 .so 文件。您可以只部署一个片段，或者您可以尝试将它们放在不同的目录中：

```
 Fragment 32-bit:
 Include-Resource: x32/libjnotify.so=lib/libjnotify.so

 Fragment 64-bit:
 Include-Resource: x64/libjnotify.so=lib/libjnotify.so 
```

我还认为您需要将 Bundle-NativeCode 标头放在主机包中并引用正确的目录，因为我认为此标头未合并到主机中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:06:48.117

检查您正在运行的 Eclipse/OSGi 容器的版本。我怀疑您发现您正在启动的容器已将操作系统设置为 32 位系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T14:10:27.960

If you don't mind being restricted to *Equinox* you can use one-fragment-per-platform solution with `Eclipse-PlatformFilter`. In this case, only one fragment with native code can be resolved and installed at any time thus avoiding namespace conflict.

# asp.net - 在 asp.net Web 应用程序中运行 praat 脚本

> ID：12912773
> 
> 赞同：0
> 
> 时间：2012-10-16T10:34:53.230
> 
> 标签：asp.net, praat

我正在开发一个 ASP.net Web 应用程序，我希望它与 Praat 脚本配合使用。例如，我在 Web 应用程序中有 2 个参数（字符串文本，字符串文件名），我想将这两个参数提供给脚本，它只是将“文本”的内容写入名为“文件名”的文件中。我怎么能管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:01:10.390

我不确定我是否完全理解这个问题，但如果你问如何运行一个`praat`脚本，从命令行将字符串写入文件（我猜这可能就足够了），有这样的脚本

```
# Contents of script.praat
form Output to file...
  sentence String Your awesome string with spaces
  word Filename /path/to/file
endform

# These are the same variable names as in the form
# but with a lowercase initial
string$ > 'filename$' 
```

应该这样做。然后，您可以从命令行运行此命令（如果您是从 asp.net 执行的，可能是[这样](https://stackoverflow.com/questions/3395179/running-shell-commands-in-asp-net)的？）作为

```
praat script.praat "some other string with spaces" new_filename.txt 
```

# java - 在 Jax-rs Web 服务中注入 HttpResponse 时出现空指针异常

> ID：12912780
> 
> 赞同：0
> 
> 时间：2012-10-16T10:35:12.180
> 
> 标签：java, web-services, jax-rs, httpresponse, resteasy

我正在使用 JBoss Resteasy 2.3.1 开发 JAX-RS Web 服务，并尝试遵循 [set-response-headers-not-using-filter-resteasy][1] 中提供的解决方案，但就我而言，这没用。

服务器代码：

```
@WebService(targetNamespace = "http://com.server/loginws", name = "LoginWS")
@SOAPBinding(style = SOAPBinding.Style.DOCUMENT, use = SOAPBinding.Use.LITERAL)
@Path("/rpcLoginWS")
public class LoginWSImplRest {
@Context 
    protected org.jboss.resteasy.spi.HttpResponse response;

    @WebMethod(operationName = "login", action = "urn:login")
    @WebResult(name = "return")
    @GET
    @Path("/login/{userName}/{password}")
    @Produces(MediaType.APPLICATION_JSON)
    public boolean login(String username, String password) 
    {
        String clientID = UUID.randomUUID().toString();
        if(response == null) {
            System.out.println("response is null @o@.");
        }
        else {
            try {
                System.out.println("response is not null ^_^.");
                synchronized (this) {
                    System.out.println("response status: " + response.getStatus());
                    if(response.getOutputHeaders() == null) {
                        System.out.println("responsegetOutputHeaders() is null 0_0.");
                    }
                    else {
                        System.out.println("responsegetOutputHeaders() is not null ^_^.");
                        // Null Pointer Exception occurs here.
                        response.getOutputHeaders().putSingle("clientID", clientID);
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }               
        }
    }
} 
```

任何想法都将受到高度赞赏。

**编辑：**堆栈跟踪（将问题修复为@PT114提供的解决方案后）：

```
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at com.server.loginws.LoginWSImplRest.login(LoginWSImplRest.java:93)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at java.lang.reflect.Method.invoke(Method.java:597)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502)
18:23:00,447 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContain
erDispatcher.java:208)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatch
er.java:55)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatch
er.java:50)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.jav
a:329)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at com.server.loginws.DoServletFilter.doFilter(DoServletFilter.java:32)
18:23:00,463 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.jav
a:280)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociation
Valve.java:153)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java
:671)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1)    at java.lang.Thread.run(Thread.java:662)
18:23:00,478 ERROR [stderr] (http--127.0.0.1-8180-1) org.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException
18:23:00,494 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatc
her.java:340)
18:23:00,494 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:21
4)
18:23:00,494 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.
java:190)
18:23:00,494 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540)
18:23:00,494 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContain
erDispatcher.java:208)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatch
er.java:55)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatch
er.java:50)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.jav
a:329)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at com.server.loginws.DoServletFilter.doFilter(DoServletFilter.java:32)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.jav
a:280)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
18:23:00,509 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociation
Valve.java:153)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java
:671)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at java.lang.Thread.run(Thread.java:662)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1) Caused by: java.lang.NullPointerException
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at com.server.loginws.LoginWSImplRest.login(LoginWSImplRest.java:101)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at java.lang.reflect.Method.invoke(Method.java:597)
18:23:00,525 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155)
18:23:00,541 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257)
18:23:00,541 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222)
18:23:00,541 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211)
18:23:00,541 ERROR [stderr] (http--127.0.0.1-8180-1)    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525)
18:23:00,541 ERROR [stderr] (http--127.0.0.1-8180-1)    ... 22 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:05:45.130

```
 if(response != null) {
        System.out.println("response is null @o@.");
    } 
```

这不是错误的方式吗？

```
 if(response == null) {
        System.out.println("response is null @o@.");
    } 
    else {
        stuff ...
    } 
```

# sql-server - 在一个表中查找不在另一个表中的记录

> ID：12912782
> 
> 赞同：0
> 
> 时间：2012-10-16T10:35:21.447
> 
> 标签：sql-server

我有两张桌子。一个有 102845 条记录，另一个有 98496 条记录。我需要找到出现在较大表中但不在较小表（4349）中的记录。这些是我创建数字的方式：

--98496

```
drop table #test2
select a.*, B.Delq_Sep12, b.Bal_Sep12, b.Queue_Sep12 
into #test2
from #test4 b
join pcd a on  (a.ACCOUNT_NUMBER = B.account_number) 
```

--102845

```
drop table #test1
select a.*, B.Delq_Sep12, b.Bal_Sep12, b.Queue_Sep12,
into #test1
from #test4 b 
left join pcd a on  (a.ACCOUNT_NUMBER = B.account_number) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:41:32.310

```
select * from #test1
except
select * from #test2 
```

当然，这里假设#test2 中的所有记录都在#test1 中

如果要检查反向，只需反向查询。

```
select * from #test2
except
select * from #test1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:25:48.103

显然，您的第一个查询仅从两个表中获取匹配的行。第二个获取所有行，`b`同时从匹配的地方提取数据`a`，如果没有匹配，则`a`用 NULL 填充列。

现在，两个结果集之间的差异实际上是`b`. 要获取这些行，您可以将第二个查询与 NULL 检查一起使用，如下所示：

```
select a.*, B.Delq_Sep12, b.Bal_Sep12, b.Queue_Sep12,
from #test4 b 
left join pcd a on  (a.ACCOUNT_NUMBER = B.account_number)
**where a.ACCOUNT_NUMBER is null** 
```

即不需要`#test1`or `#test2`，直接查询不匹配的行即可。

# ms-access - 连接到 Access2000 时出现多步 OLE DB 错误

> ID：12912788
> 
> 赞同：0
> 
> 时间：2012-10-16T10:35:40.797
> 
> 标签：ms-access, iis-7, asp-classic, database-connection, connection-string

我有一个经典的 ASP 应用程序。它连接到 Access 2000 数据库。

提供者：*Microsoft.Jet.OLEDB.4.0*
操作系统：*Windows Server 2008 with IIS7*
在IIS7中，已经安装了ASP模块。

使用的连接字符串是：

```
public_path = "C:\database\"
RealPath = public_path & "dbname.mdb"
ConnStr = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & RealPath  & "; Jet OLEDB:Database Password=" & Password 
```

如果`*.mdb`文件是只读的，那么我可以打开连接并读取数据，但在插入或更新时会出错。

如果`*.mdb`文件是 Read&Write，那么`conn.open()`我会收到以下错误：

> -2147217887 多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。

我已阅读[此支持页面](http://support.microsoft.com/kb/269495)并验证系统注册表中存在密钥 *OLEDB_SERVICES*。

我究竟做错了什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:26:21.653

问题是用户的许可。组“USERS”必须在主网站文件夹上有“拒绝写入”。“USERS”组必须对数据库文件夹和文件进行“完全控制”。

# assembly - 与 AT&T 汇编语法混淆

> ID：12912789
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:35:45.477
> 
> 标签：assembly, syntax, x86

这两条指令是否执行相同的操作：

```
mov $0x80000000, %esp
mov $0x80000000, (%esp)
mov $0x80000000, 0(%esp) 
```

另外，该指令的作用是：

```
mov (%eax), %eax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:43:33.793

第一个：`esp`= 0x80000000

`esp`第 2 和第 3：地址 from = 0x80000000的 4 字节内存。

最后：`eax`= 4 字节的内存，地址来自`eax`.

顺便说一句，`l`后缀可能丢失了。我通常将这些指令视为`movl`，表示移动一个*长*值（= 4 个字节）。

查找 (g)as 或 AT&T 汇编语法教程。你不是第一个问这种问题的人。

# twitter-bootstrap - 将页面拉伸到始终为 100% 高度？

> ID：12912793
> 
> 赞同：1
> 
> 时间：2012-10-16T10:35:48.483
> 
> 标签：twitter-bootstrap, css

我正在 Twitter Bootstrap 中创建一个网页（如果重要的话），我希望该页面为 100%；高度，所以页面底部或顶部不会有**任何**空白空间，现在看起来像这样：

![在此处输入图像描述](../Images/b60c482d63b4b509fc6658abc1bff523.png)

我希望它看起来像这样：

![在此处输入图像描述](../Images/a19a828da18017666ecc15007782c081.png)

虽然长页面在容器中不应该有任何额外的空白，但它仍然是 100% 的高度，如下所示：

![在此处输入图像描述](../Images/40e1a0526aa5d80fd0d93c28f0ec2980.png)

但我怎么能做到这一点？由于布局是流动的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:45:17.180

试试这个

```
<html>
    <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">
    <body>
      <div id="fill">
        <div id="content"></div>
      </div>
    </body>
</html> 
```

你的 CSS 会像

```
#content{
    width: 100%;
    height: 100%;
    min-height: 100%;
    background: black;
    display: block;
}

html, body {
    height: 100%;
}

#fill { 
    min-height: 100%;
    height: 100%;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:51:45.520

我会使用 display: table 和 display: table-row。对于不支持 display: table 的旧浏览器，您可以使用 Modernizr 和 jQuery 后备。这是一个小提琴：

[http://jsfiddle.net/85FHe/11/](http://jsfiddle.net/85FHe/11/)

有关 CSS 表格显示支持的更多信息，请访问[http://caniuse.com/css-table](http://caniuse.com/css-table)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T21:00:43.580

这需要jquery，但似乎可以很好地获得整个页面，无论屏幕尺寸如何，至少对我有用。

```
 var height = $(window).height();
    var cssheight = String(height)
    $('#tabs-1').css('height', cssheight); 
```

# wsdl - 带有 php 的 WSDL 肥皂返回对象和数组的混合？

> ID：12912795
> 
> 赞同：0
> 
> 时间：2012-10-16T10:35:56.243
> 
> 标签：wsdl, webservice-client

如果我使用 php 的内置 soap 类来创建 $client 和 __call 函数，我会遇到 WSDL 服务的一些问题。

输出是对象和数组的混合，例如

```
[AvailableRatePlans] => stdClass Object
                        (
                            [RatePlanAvail] => Array
                                (
                                    [0] => stdClass Object 
```

当我使用“旧”nusoap.php 时，我只是得到了数组。

我做错了什么？任何提示，建议？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:29:01.287

PHP 会将响应转换为 stdClass 的对象，它没有任何问题。这只是处理响应 XML 的方式。

您没有做错任何事情，但它只是 SOAP 扩展方式来处理 ComplexType webservice，具体取决于 WSDL 结构。

为方便起见，您可以简单地使用数组进行转换，它应该与使用 nusoap lib 时的旧方法一样好。

```
$Response = (array)$Response; 
```

stdClass 对象将被转换为关联数组，没有任何问题。

# java - PHP加解密方法转换成java

> ID：12912799
> 
> 赞同：0
> 
> 时间：2012-10-16T10:36:18.187
> 
> 标签：java, aes, encryption

我尝试将加密和解密函数转换为在 Java 中用于以下 PHP。但收到非法密钥大小错误。建议我在 java 中进行 256 位 AES 解密。

PHP 代码

```
<?php
    function encrypt ($data,$salt) {
        $hash = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($salt), $data, MCRYPT_MODE_CBC, md5(md5($salt))));
        return $hash;
    }
    function decrypt ($encdata,$salt) {
        $string = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($salt), base64_decode($encdata), MCRYPT_MODE_CBC, md5(md5($salt)));
        return $string;
    }
?> 
```

转换后的 Java 代码：

```
//The below code found in http://www.logikdev.com/2010/11/01/encrypt-with-php-decrypt-with-java/
    public static String md5(String input) throws NoSuchAlgorithmException {
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] messageDigest = md.digest(input.getBytes());
        BigInteger number = new BigInteger(1, messageDigest);
        return number.toString(16);
    }

    public String decrypt(String encryptedData) {
        String decryptedData = null;
        try {
            SecretKeySpec skeySpec = new SecretKeySpec(md5("5A17K3Y").getBytes(), "AES");           
            String initialVectorString=md5(md5("5A17K3Y"));
            IvParameterSpec initialVector = new IvParameterSpec(initialVectorString.getBytes());
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding","SunJCE");            
            cipher.init(Cipher.DECRYPT_MODE, skeySpec, initialVector);          
            encryptedData=encryptedData.replace('-','+').replace('_','/').replace(',','=');
            byte[] encryptedByteArray = (new org.apache.commons.codec.binary.Base64()).decode((encryptedData.getBytes()));          
            byte[] decryptedByteArray = cipher.doFinal(encryptedByteArray);
            decryptedData = new String(decryptedByteArray, "UTF8");
        } catch (Exception e) {         
            System.out.println("Error. Problem decrypting the data: " + e);
        }
    } 
```

> 解密数据时出现问题：java.security.InvalidKeyException：非法密钥大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:44:45.990

当您没有安装无限强度管辖文件时，您会收到非法密钥大小错误。这些文件允许 Java 使用更强的密钥长度（例如 256 位 AES）。

转至[Oracle 下载站点](http://www.oracle.com/technetwork/java/javase/downloads/index.html)并寻找与您的 Java 版本匹配的文件。如果您所在国家/地区这样做是合法的，请安装这些文件并享受更强大的加密。

（*旁注：你研究过这个吗？第一个 upteem 结果会回答你的问题*）。

# jquery - 最佳实践：如何使用 ASP.NET 配置 jQuery UI

> ID：12912803
> 
> 赞同：2
> 
> 时间：2012-10-16T10:36:26.587
> 
> 标签：jquery, asp.net, jquery-ui, configuration, webforms

从 ASP.NET 配置 jQuery UI（或任何其他 HTML/JavaScript 小部件）的最佳方法是什么？

目前，我将 jQuery UI 控件包装在 ASP.NET UserControls 中，并添加了属性来配置 UI 小部件。

使用内联 ASP 语法进行配置`<%=SomePropertyName %>`。例如，DatePicker 控件：

```
$("#yourDatePicker").datepicker({
     changeMonth: <%=ChangeMonthAllowed%>, 
     changeYear: <%=ChangeYearAllowed%>
}); 
```

在此示例中，`ChangeMonthAllowed`然后`ChangeYearAllowed`将是 ASP.NET UserControl 上的布尔属性。

另一种选择是使用以下方法添加 JS `Page.ClientScript.RegisterClientScriptBlock`：构建 datepicker 设置对象并将其插入页面。

然而，我不喜欢这两种方式：

*   第一种方法将 ASP.NET 代码添加到 ascx 文件（或 aspx 或 JS 文件）
*   第二种方式将 JavaScript 添加到 ASP.NET 代码隐藏

我的问题：有没有一种更简洁的方式来实现具有代码隐藏属性的 JS/HTML 小部件配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:12:00.803

您可以将 JavaScript 直接注入到 head 标签中，如下所示：

VB.NET

```
 Dim script As New StringBuilder
    'Build script         
    Dim scriptTags As New Literal
    scriptTags.Text = script.ToString()
    Page.Header.Controls.Add(scriptTags) 
```

C＃

```
 StringBuilder script = New StringBuilder();
    //Build script
    Literal scriptTags = new Literal();
    scriptTags.Text = script.ToString();
    Page.Header.Controls.Add(scriptTags); 
```

如果您不希望 JavaScript 在代码隐藏中构建，您可以创建一个新的 txt 或 js 文件，其中包含如下所示的合并字段。构建脚本时，您可以简单地读取文件并将所有合并字段替换为所需的变量。

```
 $("#yourDatePicker").datepicker({
         changeMonth: %%ChangeMonthAllowed%%, 
         changeYear: %%ChangeYearAllowed%%
    }); 
```

当我有页面引用不在同一文件夹中的母版页时，我喜欢使用此方法注入我的 JavaScript 文件引用。这保证了我的 JavaScript 文件总是被正确引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T15:31:09.370

我现在应该做什么：

**我需要 JavaScript 中的静态 .NET 数据**

我创建了一个 T4 模板，它在构建时输出一个静态 JS 文件，并将它包含在我的 JS 包中。

**我需要 ASPX 中的动态 .NET 数据**

在 aspx 中有一些 JavaScript 将动态 .NET 数据注入到静态 JS 文件中。

一个简单的例子：

```
MyProject.datePickers.Add({
    domSelector: "#yourDatePicker",
    properties: {
       changeMonth: <%=ChangeMonthAllowed%>, 
       changeYear: <%=ChangeYearAllowed%>
    }
}); 
```

这样，所有“动态 .NET”配置都被注入到静态（即可测试和可重用）JavaScript 文件中。

# sharepoint - 如何在 Sharepoint 2010 中过滤未评级的项目

> ID：12912805
> 
> 赞同：3
> 
> 时间：2012-10-16T10:36:30.683
> 
> 标签：sharepoint, listview, sharepoint-2010, filtering, rating

我在 Sharepoint 2010 中有一个列表，其中启用了评级并且工作正常。当我将鼠标悬停在评分星上时，它会为我提供我已经投票或未投票的天气信息以及我的评分。因此，我假设 Sharepoint 将用户信息与评分数据一起存储。

我想创建一个列表视图，其中仅包含当前用户尚未评分的那些项目。多亏了这一点，他将能够确保他对列表中的每个项目都进行了投票，而不必突出显示长列表中的每个条目。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:23:01.900

个人评分信息存储在社交数据库中，不与列表项一起存储。列表项仅包含平均评分值和评分数。您可以创建自定义 Web 部件并通过类模型显示当前用户的评分信息。

使用以下代码：

```
using Microsoft.Office.Server.SocialData;    
using Microsoft.Office.Server.UserProfiles;

SPSite oSite = SPContext.Current.Site;
SPServiceContext context = SPServiceContext.GetContext(oSite);
UserProfileManager profileManager = new UserProfileManager(context);
UserProfile profile = profileManager.GetUserProfile(user.LoginName.ToString());
SocialRatingManager socialRatingManager = new SocialRatingManager(context);
socialRatingManager.GetRatings(profile) 
```

# c++ - 复制数组？

> ID：12912807
> 
> 赞同：2
> 
> 时间：2012-10-16T10:36:41.280
> 
> 标签：c++, arrays

> **可能重复：**
> [如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

我在将数组复制到数组时遇到问题。我有一种感觉，这可能是因为使用了指针，但如果我错了，请纠正我。

我的功能如下：

```
bool sodoku::rowTest(sodoku *arr[9][9])
{
  int row = 0;
  while(row < 9)
  {
    for(int j = 0; j < 9; j++)
    {
      for(int k = 0; k < 9; k++)
      {
        if(arr[row][j]->number  == arr[row][j]->possibleNumbers[k])
        {
          for(int i = 0; i < 9; i++)
          {
            arr[row][i]->possibleNumbers[k] = 0;
          }
        }
          for(int g = 0; g < 7; g++)
          {
           int t = 8;
           arr[row][g]->possibleNumbers[k] = arr[row][t]->possibleNumbers[k]; 
          }
          cout << "arr row j num : " << arr[row][j]->possibleNumbers[k] << "row: " << row << " column: " << j << endl;
      }
    }
  row++;
  }
  if(row == 9)
    return true;
  }
return true;
} 
```

我的小麻烦就在这里：

```
 for(int g = 0; g < 7; g++)
          {
           arr[row][g]->possibleNumbers[k] = arr[row][8]->possibleNumbers[k]; 
          } 
```

由于某种原因，当我计算每个元素时，不会发生复制。谁能帮助我知道为什么会发生这种情况？我只希望从 arr[row][1]->possibleNumbers[k] 到 arr[row][7]->possibleNumbers[k] 的每个数组都具有与 arr[row][8]->possibleNumbers[k] 相同的值]。如果有帮助，PossibleNumbers 的范围是 0 到 9。

如果有人可以提供帮助，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:46:18.513

数组变量不会被复制，但您可以使用 std::copy。

此外，按值传递数组会导致数组衰减，这意味着实际的*左*值`T(&)[N]`作为`T*`. 为防止这种情况，请改为通过引用传递。

这是一个为您执行此操作的通用辅助函数：

```
#include <algorithm>

template <typename T, int N>
void copy(T(&dest)[N], T(&src)[N])
{
    std::copy(dest, dest+N, src);
} 
```

现在你可以说

```
char dest[5];
char src [5];
copy(dest, src); // provided same element type and size 
```

另请注意，成员数组***被***复制

```
struct SudokuRow
{
    unsigned char cells[9];
};

SudokuRow a, b;
a = b; // copies just fine 
```

# windows-phone-7 - 避免单击按钮时出现白色闪烁

> ID：12912810
> 
> 赞同：0
> 
> 时间：2012-10-16T10:36:53.620
> 
> 标签：windows-phone-7

> **可能重复：**
> [Windows Phone 7 (WP7) 单击时更改按钮的背景颜色](https://stackoverflow.com/questions/3476963/windows-phone-7-wp7-change-a-buttons-background-color-on-click)
> [在 Silverlight 中按下时删除按钮突出显示](https://stackoverflow.com/questions/9483278/remove-button-highlight-on-press-in-silverlight)

我想避免单击按钮时出现的白色闪光

```
<Button BorderBrush="{StaticResource TransparentBrush}"  Content="" Name="PLAYBUTTON" Height="127" HorizontalAlignment="Left" Margin="138,113,0,0" Click="PLAYBUTTON_Click" VerticalAlignment="Top" Width="138" >
                        <Button.Background>
                            <ImageBrush ImageSource="/Mobile;component/Images/playbutton.png" />
                        </Button.Background>
                    </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:39:53.453

在您的内部使用它`App.xaml`并根据您的要求更改标记的值。

```
 <Application.Resources>
    <Style TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>  //change value here
        <Setter Property="BorderBrush" Value="White"/> //change value here
        <Setter Property="Foreground" Value="White"/>  //change value here
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Padding" Value="10,3,10,5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Black"/>  //change value here
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>  //change value here
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>  //change value here
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}">
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
  </Application.Resources> 
```

# objective-c - 将登录参数从 iOS 传输到 Web 服务

> ID：12912812
> 
> 赞同：0
> 
> 时间：2012-10-16T10:37:03.403
> 
> 标签：objective-c, hash, phpass

我目前有一个 Web 服务，其后端数据库在 PHP 5.3 下使用[phpass](http://www.openwall.com/phpass/)`CRYPT_BLOWFISH`存储用户密码——所以它使用. 我已经从该服务器公开了一个 API，我想通过该 API 和 iPhone 应用程序对用户进行身份验证。服务器使用 SSL，但我想在传输密码之前对密码进行哈希处理。

如何从 Objective-c 创建一个与 phpass 兼容的哈希？

# spring - Spring JavaMailSenderImpl 抛出 TypeMismatchException

> ID：12912814
> 
> 赞同：1
> 
> 时间：2012-10-16T10:37:09.003
> 
> 标签：spring, jakarta-mail

我在我的应用程序中使用 JavaMailSenderImpl 使用 Spring 框架配置了 JavaMail。实际上，我尝试从数据库加载邮件属性并在 spring config.xml 文件中进行了一些更改。但我有错误

> “bean 初始化失败；嵌套异常是 org.springframework.beans.TypeMismatchException：无法将类型 [com.core.springexamples.UCMSMailImpl] 的属性值转换为属性“mailSender”所需的类型 [org.springframework.mail.MailSender] ; 嵌套异常是 java.lang.IllegalArgumentException：无法将类型 [com.core.springexamples.UCMSMailImpl] 的值转换为属性“mailSender”所需的类型 [org.springframework.mail.MailSender]：找不到匹配的编辑器或转换策略”

在我的应用程序中实现了任何更改，这些都在下面提到。

第1步：

```
<bean id="javaMailImpl" class="org.springframework.mail.javamail.JavaMailSenderImpl"></bean> 
```

第2步：-

```
<bean id="mailSender" class="com.core.springexamples.UCMSMailImpl" scope="prototype" init-method="configuredProperties">
    <property name="javaMailImpl" ref="javaMailImpl"></property>
</bean> 
```

**com.core.springexamples.UCMSMailImpl** :-

```
public class UCMSMailImpl {
    private JavaMailSenderImpl javaMailImpl;
    private ConfigDAO configDAO;

    public  void configuredProperties(){
        System.out.println("UCMSMailImpl::configuredProperties");
        Properties props=new Properties();
    String[] mildata=configDAO.getMailingPropData();
        props.put("mail.smtp.auth", mildata[0]);
        props.put("mail.smtp.starttls.enable", mildata[2]);
        props.put("mail.smtp.host", mildata[3]);
        props.put("mail.smtp.port", mildata[4]);
        props.put("mail.smtp.host", mildata[5]);
        props.put("username", mildata[6]);
        props.put("password",mildata[7]);
        getJavaMailImpl().setJavaMailProperties(props);

    }
    public JavaMailSenderImpl getJavaMailImpl() {
        return javaMailImpl;
    }
    public void setJavaMailImpl(JavaMailSenderImpl javaMailImpl) {
        this.javaMailImpl = javaMailImpl;
    }
    public void setConfigDAO(ConfigDAO configDAO){
    this.configDAO=configDAO;
    }
    public ConfigDAO getConfigDAO(){
    return configDAO;
    } 
```

第 3 步：-我正在尝试使用 UCMSMailImpl java 类从 MailSender.send 发送邮件。我引用了 UCMSMailImpl bean。

```
<bean id="sendMail" class="com.core.springexamples.JavaMailing">
    <property name="mailSender" ref="mailSender"></property>

</bean>

public class JavaMailing {
    private MailSender mailSender;

    public void sendMail(String from,String to,String text,String subject){
        SimpleMailMessage message = new SimpleMailMessage();
                message.setFrom(from);
        message.setTo(to);
        message.setSubject(subject);
        message.setText(text);
        mailSender.send(message);   

    }

    /**
     * @return the mailSender
     */
    public MailSender getMailSender() {
        return mailSender;
    }

    /**
     * @param mailSender the mailSender to set
     */
    public void setMailSender(MailSender mailSender) {
        this.mailSender = mailSender;
    } 
```

第 4 步：- 我尝试测试 sendMail bean

```
ApplicationContext context =new ClassPathXmlApplicationContext("applicationContext-mail.xml");
    JavaMailing m=(JavaMailing)context.getBean("sendMail");
   m.sendMail("john.ch@gmail.com", "john.c@gmail.com", "TEST MAIL", "TEST MAIL"); 
```

但我得到的例外是 **TypeMismatchException: Failed to convert type of property value of type [com.core.springexamples.UCMSMailImpl] to required type [org.springframework.mail.MailSender] for property**

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:09:19.540

如果类没有实现接口，则不能将类分配给接口。`UCMSMailImpl`不执行`MailSender`。保持其余部分不变，并像这样更改您的 UCMSMailImpl：

```
public class UCMSMailImpl implements MailSender {

    private JavaMailSenderImpl javaMailImpl;
    private ConfigDAO configDAO;

    // do your property initialization
    // ...

    // implement interface methods

    void send(SimpleMailMessage simpleMessage) throws MailException {
        this.javaMailImpl.send(simpleMessage);
    }

    void send(SimpleMailMessage[] simpleMessages) throws MailException {
        this.javaMailImpl.send(simpleMEssages);
    } 
```

}

如果您无法更改 UCMSMailImpl，请扩展它：

```
public class MyUCMSMailImpl extends UCMSMailImpl implements MailSender {

    void send(SimpleMailMessage simpleMessage) throws MailException {
        this.getgetJavaMailImpl().send(simpleMessage);
    }

    void send(SimpleMailMessage[] simpleMessages) throws MailException {
        this.getgetJavaMailImpl().send(simpleMEssages);
    }

} 
```

并更改您的配置：

```
<bean id="mailSender" class="your.package.MyUCMSMailImpl" scope="prototype" init-method="configuredProperties">
    <property name="javaMailImpl" ref="javaMailImpl"></property>
</bean> 
```

# html - HTML5画布图像向左旋转向右旋转

> ID：12912818
> 
> 赞同：2
> 
> 时间：2012-10-16T10:37:19.953
> 
> 标签：html, html5-canvas

我已将图像绘制到画布中。

现在我正在尝试的是，如果用户单击向左旋转按钮总画布应该向左旋转（即图像旋转到 90 度）并且如果向右旋转画布应该向右旋转。

这就是我尝试旋转的方法。请建议我实现这一目标的代码

```
var canvasId = document.getElementById("preview");
var cntxt = canvasId.getContext("2d");
cntxt.translate($("#preview").width()-1, $("#preview").height()-1);
cntxt.rotate(convertToRadians(90));
cntxt.drawImage(canvasId, 0, 0, $("#preview").width(), $("#preview").height());

function convertToRadians(degree) {
    return degree*(Math.PI/180);
} 
```

工作解决方案：

```
// Getting the canvas
var canvasId = document.getElementById(id);
var ctx = canvasId.getContext("2d");

// Store the current transformation matrix
ctx.save();

ctx.setTransform(1,0,0,1,0,0);

// Getting the canvas width and height
var w = $("#preview").width();
var h = $("#preview").height();

ctx.clearRect(0, 0, w, h);

// Restore the transform
ctx.restore();

// TranslateX should be canvaswidth/2 and translateY should be canvasheight/2
var translateX = w/2;
var translateY = h/2;

// translating the context
ctx.translate(translateX,translateY);

// As we need to rotate the image to 90 degrees
// Where r can be 1 to 36 for 10 to 360 degree rotation
var r = 9;
ctx.rotate(r*10*Math.PI/180);
ctx.translate(-translateX,-translateY);

// Drawing canvas
ctx.drawImage(ImageObject, 0, 0, w, h); 
```

还有一个疑问，我们不能旋转整个画布以保持图像的正确纵横比

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:34:36.433

这是简单的代码，

```
var canvasId = document.getElementById("preview");
var ctx = canvasId.getContext("2d");
ctx.setTransform(1,0,0,1,0,0);
ctx.clearRect(0, 0, $("#preview").width(), $("#preview").height());
var translateX = ($("#preview").width())/2;
var translateY = ($("#preview").height())/2;
ctx.translate(translateX,translateY);
var r = 9;
ctx.rotate(r*10*Math.PI/180);
ctx.translate(-translateX,-translateY);
ctx.drawImage(imgsrc, 0, 0, $("#preview").width(), $("#preview").height()); 
```

其中 r 可以是 1 到 36，旋转 10 到 360 度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:17:17.590

正如我在网上验证的那样，它比我们在上述过程中所做的要简单得多。

所以这是我在我的博客[HTML5 画布图像旋转中发布的链接](http://phptechworld.blogspot.in/2012/10/html5-canvas-image-rotation.html)

# c - 如何使用 sprintf 在字符串中包含十六进制值

> ID：12912820
> 
> 赞同：5
> 
> 时间：2012-10-16T10:37:21.953
> 
> 标签：c, hex, printf

我想在 c 中包含 i 十六进制格式的值。

```
for(i=0;i<10;i++)
   sprintf(s1"DTLK\x%x\xFF\xFF\xFF\xFF\xFF\xFF",i); 
```

但上面的代码输出错误：\x used with no following hex digits

请任何人建议我一个正确的方法....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:44:14.613

假设您不想真正拥有`\x00`.. `\x0A`，而是相应的字节，您需要

```
sprintf(s1, "DTLK%c\xFF\xFF\xFF\xFF\xFF\xFF",i); 
```

而插入`\x%x`将处于错误的抽象级别......

如果，OTOH，您真的想从字面上使用十六进制字符而不是具有命名 hey 字符的字节作为它们的表示形式，那么其他答案可能会更有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:40:01.477

您需要转义前面的斜线`\x`：

```
sprintf(s1"DTLK\\x%x\xFF\xFF\xFF\xFF\xFF\xFF",i);
//              ^------- Here 
```

根据您想要实现的输出，您可能还需要转义剩余的斜线。

目前，该代码段生成一个包含六个字符的序列，其中包含 code `0xFF`。如果这是您想要的，那么您的代码片段就完成了。如果您想查看一系列`\xFF`文字，即看起来像`\x5\xFF\xFF\xFF\xFF\xFF\xFF`when的字符串`i == 5`，您需要转义字符串中的所有斜杠：

```
sprintf(s1"DTLK\\x%x\\xFF\\xFF\\xFF\\xFF\\xFF\\xFF",i);
//              ^    ^    ^    ^    ^    ^    ^ 
```

最后，如果您希望将值格式化为两位数的十六进制代码，即使该值小于 16，请使用`%02x`格式代码来告诉`sprintf`您需要前导零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:40:36.830

`\x`需要一个十六进制值，如`\xC9`.

如果要包含`\x`在输出中，则需要使用以下命令进行`\`转义`\\`：

```
sprintf(s1"DTLK\\x%x\xFF\xFF\xFF\xFF\xFF\xFF",i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:46:17.600

```
sprintf(s1"DTLK\\x%x\xFF\xFF\xFF\xFF\xFF\xFF",i);
//              ^------- Here 
```

根据您想要实现的输出，您可能还需要转义剩余的斜线。

目前，该代码段生成一个包含六个字符的序列，其中包含 code `0xFF`。如果这是您想要的，那么您的代码片段就完成了。如果您想查看一系列`\xFF`文字，即看起来像`\x5\xFF\xFF\xFF\xFF\xFF\xFF`when的字符串`i == 5`，您需要转义字符串中的所有斜杠：

```
sprintf(s1"DTLK\\x%x\\xFF\\xFF\\xFF\\xFF\\xFF\\xFF",i);

//              ^    ^    ^    ^    ^    ^    ^ 
```

最后，如果您希望将值格式化为两位十六进制代码，即使该值小于 16，请使用`%02x`格式代码来告诉`sprintf`您需要前导零。

# c++ - 将变体 SAFEARRAY 转换为 STL 容器的通用函数

> ID：12912823
> 
> 赞同：5
> 
> 时间：2012-10-16T10:37:26.300
> 
> 标签：c++, containers, atl, variant

我有一些函数用于将 2D 变体 SAFEARRAY 转换为各种 STL 容器，有点像这样（仅供说明）

```
template<typename T>
std::set<T> SetFromSafeArray(VARIANT srcArray)
{
    CComSafeArray<T> srcComArray(srcArray.parray);
    std::set<T> destContainer;

    for (ULONG i=0;i<srcComArray.GetCount();++i)
        destContainer.insert(srcComArray.GetAt(i));

    return destContainer;
} 
```

我觉得这不是一种非常 C++ 的方式，这意味着我转换到的每个 STL 容器都有一个单独的函数。

我的想法是为 CComSafeArrays 编写一个包装器和自定义迭代器，这样我就可以做......

```
std::copy(srcComArray.begin(), srcComArray.end(), destContainer.begin()); 
```

但是以前从未编写过迭代器并且是​​新手，我真的不知道这是否容易。

自定义 CComSafeArray 迭代器是我最好的标准 c++ 选项吗（在这种情况下，我确信我可以找到编写迭代器的好教程）？还是有其他方法可以解决它？

升压不是一种选择。

TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:48:06.087

> 我的想法是为 CComSafeArrays 编写一个包装器和自定义迭代器

这是创建迭代器的好主意，但您不需要包装器`CComSafeArray<T>`，只需要迭代器。

> 所以我可以做...

```
std::copy(srcComArray.begin(), srcComArray.end(), destContainer.begin()); 
```

但是，您可以这样做：

```
SomeContainer<T> destContainer(begin(srcComArray), end(srcComArray)); 
```

因为几乎每个 STL 容器都有范围内的构造函数（一对迭代器）。

假设您已经编写了迭代器`CComSafeArray<T>`- 函数开始/结束将如下所示：

```
template <typename T>
CComSafeArrayIterator<T> begin(CComSafeArray<T>& container)
{
    return CComSafeArrayIterator<T>(container, 0);
}
template <typename T>
CComSafeArrayIterator<T> end(CComSafeArray<T>& container)
{
    return CComSafeArrayIterator<T>(container, container.getSize());
} 
```

注意 begin() 是零位置，end() 是 getSize() 位置。

编写迭代器不是火箭科学。只是几个功能。最重要的是知道你需要迭代什么。在您的情况下：容器引用（指针）和当前位置。迭代只是移动位置。访问是通过容器和位置。比较是通过比较位置。

```
template <typename T>
class CComSafeArrayIterator {
public:
   CComSafeArrayIterator(CComSafeArray<T>& container, ULONG position) 
   : container(&container), 
   position(position) 
   {}

   // prefix ++it
   CComSafeArrayIterator& operator ++() { ++position; return *this; }
   // postfix it++
   CComSafeArrayIterator operator ++(int) { 
       CComSafeArrayIterator prev = *this; 
       ++position; 
       return prev; 
   }
   // access by ->: it-> !! ony if getAt return reference not value 
   const T* operator -> () const {
      return &(container->getAt(position));
   }
   // access by *: *it
   const T& operator * () const {
      return container->getAt(position);
   }
   // comparing
   friend bool operator == (const CComSafeArrayIterator<T>& l, 
                            const CComSafeArrayIterator<T>& r)
   {
      return l.position == r.position;
   }
   friend bool operator != (const CComSafeArrayIterator<T>& l, 
                            const CComSafeArrayIterator<T>& r)
   {
      return l.position != r.position;
   }

private:
   // this is what you need
   CComSafeArray<T>* container;
   ULONG position;
}; 
```

# android - 如何在文本视图中设置按钮设置文本 onclick 数据

> ID：12912829
> 
> 赞同：0
> 
> 时间：2012-10-16T10:37:45.363
> 
> 标签：android, android-layout, android-button

这是一个简单的问题..但我没有得到输出。描述：在我的活动中，我有 3 个按钮 A、B、C。在同一活动中，我也有 1 个 textview{textViewPatientType}。当我单击按钮（A）时，它必须将 textview（textViewPatientType）中的文本设置为 A。当我单击按钮（B）时，它必须将 textview（textViewPatientType）中的文本设置为 B。

我的活动以这种方式显示

```
 -------------------------------------------------
     buton1-->onclick A|     textview(A)
     buton2            |
     buton3            |
     ------------------------------------------------- 
```

我尝试以这种方式进行操作，但它起到了敬酒的作用..当 onclick (A) 出现并消失时.. 所以请帮助我.. 提前谢谢你。

这是我的代码。

```
 button1 = (Button) findViewById(R.id.button1);
      button2 = (Button) findViewById(R.id.button2);
      button3 = (Button) findViewById(R.id.button3);
    textViewPatientType = (TextView) findViewById(R.id.textViewPatientType);

    buttonInPatient.setOnClickListener(new OnClickListener() {          

        @Override
        public void onClick(View view) {

            try {   
                **textViewPatientType.setText("InPatient");**
  ServiceManager.callPatientService(WorkListView.this, "IP", user, pd);

            } catch (Exception e) {
                e.printStackTrace();
            }
            Toast.makeText(WorkListView.this, getResources().getString(R.string.inPatient), Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:09:05.553

replace your on click code with below code

```
public void onClick(View view) {

        try {   
            textViewPatientType.setText("InPatient");
  ServiceManager.callPatientService(WorkListView.this, "IP", user, pd);

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:42:34.417

试试这个代码

```
Button button1 = (Button) findViewById(R.id.button1);
TextView textViewPatientType = (TextView) findViewById(R.id.textViewPatientType);
button1.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
        textViewPatientType.settext("MyText");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:44:57.270

你可以得到按钮的文本

```
ServiceManager.callPatientService(WorkListView.this, "IP", user, pd); 
```

尝试评论这一行，看看文本是否保持不变，可能你正在重新设置它，否则这看起来没问题

# php - 如何设置选择框或下拉列表框的值作为上一个列表框值设置

> ID：12912830
> 
> 赞同：0
> 
> 时间：2012-10-16T10:37:48.530
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [使用 jquery 根据第一个选择列表选项更改第二个选择列表](https://stackoverflow.com/questions/10570904/use-jquery-to-change-second-select-list-based-on-first-select-list-option)

我的代码中有两个选择元素。一个用于州 (#us_state)，第二个用于城市 (#city_name)。当我选择“州”时，第二个选择元素必须仅包含处于选定州的城市。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:49:40.963

一种可能的解决方案：

```
var data = {
    "State 1": ["City 1", "City 2"],
    "State 2": ["City 3", "City 4"],
    "State 3": ["City 5", "City 6", "City 7"]
};

var $states = $("#us_state").on("change", function() {
    var $cities = $.map(data[this.value], function(city) {
        return $("<option />").text(city);
    });
    $("#city_name").empty().append($cities);
});

for (var state in data) {
    $("<option />").text(state).appendTo($states);
}​ 
```

**演示：http:** [//jsfiddle.net/8hbcP/](http://jsfiddle.net/8hbcP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:41:43.333

使用 jquery`append`附加选项值（还记得使用清除迭代循环之外的选项

`$('#city_name').html("");`

```
$('#city_name').append('<option value="'+city+'">'+city+'</option>'); 
```

# .net - .NET 平台上是否有生产就绪的类 Lisp 语言？

> ID：12912831
> 
> 赞同：2
> 
> 时间：2012-10-16T10:37:51.917
> 
> 标签：.net, clojure, lisp

我正在寻找 Java 的 Clojure 的 .NET 模拟。我知道 Clojure 有一个 .NET 端口，但看起来它要赶上 Java 版本还有很长的路要走。

我目前正在使用 F#，但有时感觉它的效率比正确的 List/Scheme 低 10 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:42:32.497

维基百科的[CLI 语言](http://en.wikipedia.org/wiki/List_of_CLI_languages)列表页面仅列出了用于 CLI 的[Lisps](http://en.wikipedia.org/wiki/IronScheme)中的 IronScheme。我不知道它的生产准备情况。我想，你没有太多选择。

# c# - 套接字连接的字符编码问题

> ID：12912833
> 
> 赞同：1
> 
> 时间：2012-10-16T10:38:00.233
> 
> 标签：c#, sockets, character-encoding, tcpclient

我正在向 Socket 和连接发送数据并检索一些数据。我正在检索的数据（这是一个 XML 文档）包含像 ä,ü,ö,... 这样的变音符号，但这些没有正确编码，我只得到 ? 或 )))@ 符号而不是变音符号。

我如何检索数据有什么不正确的吗？数据以 ISO-8859-1 编码发回。

我的代码：

```
public bool GetData()
    {
        try
        {
            TcpClient tcpClient = new TcpClient("THEIP", 5004);

            NetworkStream ns = tcpClient.GetStream();

            if (ns.CanWrite)
            {
                string text = this.xmlRequest;
                byte[] sendBytes = Encoding.ASCII.GetBytes(text);

                string sendData = Encoding.ASCII.GetString(sendBytes);

                ns.Write(sendBytes, 0, sendBytes.Length);
            }

            System.Threading.Thread.Sleep(2000);

            int i = 0;

            if (ns.CanRead)
            {
                do
                {

                    byte[] recvBytes = new byte[tcpClient.ReceiveBufferSize];

                    i = i + ns.Read(recvBytes, 0, tcpClient.ReceiveBufferSize);

                    string returnData = Encoding.ASCII.GetString(recvBytes);

                    returnData = returnData.Substring(0, i);

                    this.xmlResponse = returnData;

                } while (ns.DataAvailable);
            }

            // got full data...
            bool status = this.ProcessXMLData();
            ns.Close();

            if (status)
            {
                return true;
            }
            else
            {
                return false;
            }

        }
        catch (SocketException se)
        {
            this.errorFlag = true;
            this.errorMessage = se.Message;
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:47:17.330

如果您确定正在使用的编码是 ISO-8859-1，那么不要`Encoding.ASCII`使用`Encoding.GetEncoding("ISO-8859-1")`

# c# - 编写xml，每行最多两个标签

> ID：12912834
> 
> 赞同：8
> 
> 时间：2012-10-16T10:38:05.113
> 
> 标签：c#, .net, xml, linq-to-xml

我正在从.NET 的 XElement 中保存 xml。我一直在使用 ToString 方法，但格式看起来不像我想要的（下面的示例）。我希望每行最多两个标签。我怎样才能做到这一点？

* * *

储蓄`XElement.Parse("<a><b><c>one</c><c>two</c></b><b>three<c>four</c><c>five</c></b></a>").ToString()`给了我

```
<a>
  <b>
    <c>one</c>
    <c>two</c>
  </b>
  <b>three<c>four</c><c>five</c></b>
</a> 
```

但为了便于阅读，我宁愿将“三”、“四”和“五”放在不同的行上：

```
<a>
  <b>
    <c>one</c>
    <c>two</c>
  </b>
  <b>three
    <c>four</c>
    <c>five</c>
  </b>
</a> 
```

* * *

编辑：是的，我知道这在语法上有所不同，并且“不符合 xml 的精神”，但我很务实。最近我看到了只有 3 行的兆字节大小的 xml 文件——这些对于文本编辑器、源代码控制和差异工具来说都是具有挑战性的。需要做点什么！我已经测试过更改上述格式与我们的应用程序兼容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T19:53:37.447

如果您确实想要该输出，则需要手动完成，并根据需要在节点周围添加空格。

XML 文档中几乎所有的空格都很重要，即使我们只认为它是缩进。当我们要求序列化程序为我们缩进文档时，它正在对可以提取的内容进行更改，因此它们会尽可能地保守。要素

```
<tag>foo</tag> 
```

和

```
<tag>
    foo
</tag> 
```

有不同的内容，如果序列化程序将前者更改为后者，它会改变您在请求`<tag>`.

通常的经验法则是，如果元素之间存在任何现有的非空白，则不会应用缩进。在这种情况下，`three`如果序列化程序应用了您想要的缩进，您的标签之间的标签将被修改，因此不会自动为您执行此操作。

* * *

如果您可以控制 XML 格式，则不建议像这样混合元素和文本子项，其中`<b>`既有文本 ( `three`) 也有元素 ( `<c>`) 子项，因为它会导致您所看到的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T19:15:27.267

由于赤裸裸的“三”，格式无法按照您想要的方式工作。它不在自己的标签中是有原因的吗？它应该是“b”的属性吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T17:12:43.053

向同事解释原因 - 我们将更改文件格式。我建议你尝试做同样的事情。几乎不可能做我想做的事，因为大多数 xml 工具都认为空格很重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T11:02:08.403

XML 是一种用于计算机的信息交换格式。空格是无关紧要的（实际上取决于位置和模式），因此，使用其中一个或另一个将是任意的。

您可以使用`XmlTextWriter`with[`XElement.Save`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.save.aspx)并查看是否可以使用[XmlWriter.Settings 属性根据自己的喜好调整它](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.settings.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T21:47:38.470

我之前不得不做类似的事情（对于客户请求）。我最终所做的只是编写一个自定义 .ToString() 方法，该方法仅用于在浏览器中显示 XML（呃，我知道）或用于下载内容的 xml 文件。因为代码不必在计算上高效，所以只需检查每个标签的子标签并安排“悬挂”文本。

最终我们能够说服用户文本应该是一个属性。

# ios6 - Wikitude Phonegap iOS 插件

> ID：12912836
> 
> 赞同：1
> 
> 时间：2012-10-16T10:38:15.020
> 
> 标签：ios6, phonegap-plugins, cordova-2.0.0, wikitude

我已经按照这里的建议配置了 Wikitude iOS 插件 -

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/AugmentedReality-Wikitude/Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/AugmentedReality-Wikitude/Plugin)

但是，在编译过程中，它向我显示构建错误 - 在 WTWikitiudePlugin.m 文件中找不到 WTArchitechview.h。

我目前拥有 iOS 6 设备并使用 Cordova 2.0.0。我在 wikiitude 文档中找到了一份指南 -

[http://forum.wikitude.com/documentation?p_p_id=2_WAR_knowledgebaseportlet&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-2&p_p_col_count=1&_2_WAR_knowledgebaseportlet_mvcPath=%2Fdisplay%2Fview_article.jsp&_2_WAR_knowledgebaseportlet_resourceKey=1](http://forum.wikitude.com/documentation?p_p_id=2_WAR_knowledgebaseportlet&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-2&p_p_col_count=1&_2_WAR_knowledgebaseportlet_mvcPath=%2Fdisplay%2Fview_article.jsp&_2_WAR_knowledgebaseportlet_resourcePrimKey=128189)

它说我必须删除 armv7s 架构并且必须做一些修改文件。我无法理解修改部分。我的意思是我必须修改哪个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:54:22.700

我认为你有两个问题。

首先，您必须从该网站下载 Wikitude SDK，然后将 SDK 中的文件添加到您的 phonegap Xcode 项目中（按照第一个链接中描述的步骤进行操作）。如果您这样做并且仍然有编译时错误，请确保您的 Xcode 项目中的用户标头搜索路径设置正确，或者您将 Wikitude SDK 文件复制到示例项目中已设置的文件夹中。您还可以删除 Xcode 项目中现有的 Wikiitude SDK 文件夹，然后将已下载的文件夹拖入其中。

第二个链接描述了在 Xcode 4.5 中使用 Wikitude SDK 构建项目需要更改的内容。您需要在 Xcode 项目设置中更改此设置。您必须这样做，因为 Wikitude SDK 需要一些目前不适用于 armv7s 架构的库。

# jqchart - 更改 jqchart 的 categoryAxis 上的文本方向

> ID：12912837
> 
> 赞同：1
> 
> 时间：2012-10-16T10:38:19.677
> 
> 标签：jqchart

我有一个 jqxchart，其中一切都完美无缺。唯一的问题是图表的 categoryAxis 上的文本。文本以水平方向出现，并与图表的其他文本重叠。任何人都可以帮我更改 categoryAxis 上显示的文本的方向吗？这是我正在使用的代码

```
function BindServerErrorChart() {
    // prepare chart data
    var sampleData = [
                { Server: 'Server1', Error: 6 },
                { Server: 'Server2', Error: 50 },
                { Server: 'Server3', Error: 31 },
                { Server: 'Server4', Error: 78 },
                { Server: 'Server5', Error: 19 },
                { Server: 'Server6', Error: 60.90 }
                ];

    // prepare jqxChart settings
    var settings = {
        title: "Errors By server",
        description: "",
        showLegend: true,
        enableAnimations: false,
        padding: { left: 20, top: 5, right: 20, bottom: 5 },
        titlePadding: { left: 90, top: 0, right: 0, bottom: 10 },
        source: sampleData,
        categoryAxis:
                    {
                        dataField: 'Server',
                        showGridLines: false,
                        flip: false
                    },
        colorScheme: 'scheme01',
        seriesGroups:
                    [
                        {
                            type: 'column',
                            orientation: 'horizontal',
                            columnsGapPercent: 100,
                            toolTipFormatSettings: { thousandsSeparator: ',' },
                            valueAxis:
                            {
                                flip: true,
                                unitInterval: 10,
                                displayValueAxis: true,
                                description: '',
                                formatFunction: function (value) {
                                    return parseInt(value);
                                }
                            },
                            series: [
                                    { dataField: 'Error', displayText: 'Servers' }
                                ]
                        }
                    ]
    };
    // setup the chart
                    $('#ServerErrorChart').jqxChart(settings);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:26:17.857

在 categoryAxis 设置中设置 textRotationAngle: 90

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:53:39.170

我刚刚得到了解决方案。我编辑如下。

```
categoryAxis:
{
dataField: 'Server',
showGridLines: false,
flip: true,
textRotationAngle: 90
}, 
```

# java - 代号一中的Textscreen，如何读取文本文件？

> ID：12912838
> 
> 赞同：3
> 
> 时间：2012-10-16T10:38:20.153
> 
> 标签：java, codenameone

我想在我的 Codename One 应用程序中添加一个帮助屏幕。由于文本与其他字符串一样长，我想将它放在一个单独的文件中并将其添加到应用程序包中。

我该怎么做呢？我应该把文本文件放在哪里，我怎样才能轻松地将它读入一个字符串？

（我已经知道如何将字符串放入表单内的文本区域）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:27:37.163

在代号 One Designer 中，转到数据部分并添加一个文件。

您可以在此处添加文本并使用`myResFile.getData("name");`.

您还可以将文件存储在 src 目录中并使用`Display.getInstance().getResourceAsStream("/filename.txt");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:22:19.793

我更喜欢将文本文件放在文件系统而不是资源编辑器中，因为我可以使用 IDE 编辑文本。getResourceAsStream 方法是解决方案的第一部分。第二部分是一次性加载文本。J2ME 不支持此功能，您需要自己阅读、处理缓冲区等。幸运的是，代号 one 中有一个实用方法。所以我的工作方法现在看起来像这样：

```
 final String HelpTextFile = "/helptext.txt";
    ...
    InputStream in = Display.getInstance().getResourceAsStream(
            Form.class, HelpTextFile);
    if (in != null){
        try {
            text = com.codename1.io.Util.readToString(in);
            in.close();
        } catch (IOException ex) {
            System.out.println(ex);
            text = "Read Error";
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T09:16:50.473

以下代码对我有用。

```
//Gets a file system storage instance
FileSystemStorage inst = FileSystemStorage.getInstance();
//Gets CN1 home`
final String homePath = inst.getAppHomePath();
final char sep = inst.getFileSystemSeparator();
// Getting input stream of the file
InputStream is = inst.openInputStream(homePath + sep + "MyText.txt");
// CN1 Util class, readInputStream() returns byte array
byte[] b = Util.readInputStream(is);
String myString = new String(b); 
```

# php - 一个链接将打开一个单独的页面和特定的 iframe

> ID：12912839
> 
> 赞同：0
> 
> 时间：2012-10-16T10:38:20.847
> 
> 标签：php, javascript, iframe, hyperlink, href

我这里有个情况。我有一个主页和一个子页面。子页面确实有一个 iframe 容器，当您的当前页面是“subpage.htm”时，有两个页面 test1.htm 和 test2.htm 被加载到该 iframe 中。

但是，我想要的是能够单击我的主页上的链接，它会打开子页面并自动加载预定义的页面，比如说 test1.htm 到 iframe 中。

我获得了将页面加载到 iframe 中的功能，尽管通过使用 JavaScript 和一些代码，这是可能的。不幸的是，我想不出办法来做到这一点。

```
function link {
url = '../subpage.htm';
document.target = url;
loadintoiframe(myiframe,test1.htm);
} 
```

我得到了函数 loadintoiframe，它需要 iframe 的名称和要加载的页面。当我在主页上调用函数 link() 作为 href 链接时，它确实加载了子页面，但没有正确加载 iframe。

也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:41:28.343

为什么不直接放

```
<a href="test1.htm" target="iframeID">Link</a> 
```

并且完全避免使用 JavaScript？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:20:32.490

所以这不起作用。我尝试使用一个基本上只执行 href 的 JavaScript 方法，然后调用将我的特殊页面加载到 href 站点上的 iframe 的方法。

那没有用，所以其他人知道我如何可以href不同的.htm站点并同时告诉该站点将某个页面加载到iframe中？

最好的问候，亚历克斯

# c++ - 当只需要一个成员特化时如何避免重复整个类模板

> ID：12912842
> 
> 赞同：6
> 
> 时间：2012-10-16T10:38:37.330
> 
> 标签：c++, templates, specialization

假设你有：

```
template<class T>
class A {
  template<class T1> 
  void foo(const T1& t1) {}

  //
  // Lots of other definitions (all templated)
  // 
}; 
```

而你想专攻`foo(const T1&)`但只为专攻`A<bool>`。像这样：

```
template<>
class A<bool> {
  template<class T1> 
  void foo(const T1& t1) {
    // Code for specialized A<boo>::foo
  }

  //
  // Repeating the former definitions, how to avoid this ??
  // 
}; 
```

但要让它工作，我必须复制类模板中定义的所有代码`class A`并将其再次包含在`class A<bool>`.

我试图只定义成员专业化：

```
template<>
void A<bool>::template<class T1> foo(const T1&) {} 
```

这也不起作用：

```
template <class T1> void A<bool>::foo(const T1&) {} 
```

但是编译器不喜欢它。处理这种代码重复的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T10:51:01.837

句法？看到[这个答案](https://stackoverflow.com/questions/4833349/c-how-to-implement-templated-member-function-outside-a-templated-class)。尝试：

```
template<>
template<typename T1>
void A<bool>::foo(const T1&){} 
```

您当然不需要复制整个类模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:45:11.993

您可以提供一个函数和一个类模板，然后定义几个 typedef：

```
template<class T, class TArg> 
class A 
{   
    void foo(const TArg& arg) {}

    // Lots of other definitions (all templated)
};

typedef A<MyType, MyType> NormalClass;
typedef A<MyType, bool>   BoolClass; 
```

# cocoa-touch - UIKit 在 iOS 6 上的 segue 期间消息释放对象

> ID：12912846
> 
> 赞同：0
> 
> 时间：2012-10-16T10:38:54.910
> 
> 标签：cocoa-touch, ios6

在升级 xcode 并使用 iOS 6 SDK 编译我的应用程序后，我在应用程序中遇到了很多崩溃。从我能够追踪的情况来看，UIKit 消息在模态 segue 期间释放了视图控制器，而不是新创建的。这是它的外观：

我有一个显示导航控制器的选项卡栏控制器。导航控制器呈现的另一个视图控制器显示了一个模态视图控制器。

TabbarController --> NavigationController --> ViewController (presenting) -- | 显示使用模态segue | --> ViewController（展示）

导致崩溃的步骤：

1.  在上面显示的层次结构中访问视图控制器（呈现）。它不是根视图cntrl，而是更高。
2.  触发模式视图控制器的 segue。
3.  从选项卡栏中选择一个选项卡（无论哪个）并返回到同一个视图控制器（呈现）。选择一个选项卡会调用导航控制器上的 popToRoot。
4.  再次触发视图控制器的模态序列（已展示）
5.  崩溃：僵尸对象 - 视图控制器（呈现） - 收到消息

为什么？当调用 popToRoot 并且正在清理视图控制器（呈现）时，看起来就像在以前的 iOS 上一样，模态视图也被破坏了。因此，当它再次被访问时，它被重新创建并呈现。在 iOS 6 上，Allocations Instrumentation 显示模态视图与视图控制器（呈现）一起被破坏。但是当它由于某种原因被访问时，UIKit 创建了一个新的 modav 视图控制器，然后向不再存在的旧视图控制器发送消息。没有意义。

让我想知道的另一件事是，在 iOS 5 上，Allocations Instrumentation 工具永远不会向我显示保留计数 = 0 的视图控制器（已显示），但 iOS 6 会显示（之后将其设为 -1）。

我知道这可能是一个很难帮助我解决的问题，但也许有人已经在解决 iOS 6 和此类问题的问题了？

从 Allocations Instrumentation 工具中，我可以看出 iOS 6 上 segue 的实现发生了很多变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:07:58.283

我最终实现了自定义 segues 来呈现这些模态视图。在这里似乎是一个很好的主意。也许不应该在标签栏视图中显示模态视图？

# php - Yii 验证特定字段

> ID：12912853
> 
> 赞同：2
> 
> 时间：2012-10-16T10:39:11.323
> 
> 标签：php, yii

问题防御

我有一个名为“user.php”的模型我有一些验证规则如下重置表格我想检查该用户是否已注册，如果已注册用户将发送密码重置链接

我不知道如何验证这个电子邮件字段，任何帮助都非常重要，因为我是 YII 的新手

用户.php

```
 class Users extends CActiveRecord
{
public $cpassword;
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }
public function tableName()
    {
        return 'users';
    }
public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('email, password, user_type , cpassword','required'),
            array('email', 'length', 'max'=>200),
                        array('email', 'unique'),
                        array('email', 'email'),
            array('password', 'length', 'max'=>300),
                        array('cpassword', 'length', 'max'=>300),
            array('user_type', 'length', 'max'=>5),
                        array('cpassword', 'compare', 'compareAttribute' => 'password'),

            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id, email, password, user_type ', 'safe', 'on'=>'search'),
        );
    }
public function relations()
    {

return array(
        );
    }
public function attributeLabels()
    {
        return array(
            'id' => 'ID',
            'email' => 'Email',
            'password' => 'Password',
            'user_type' => 'User Type',
                        'cpassword' => 'Confirm Password'
        );
    }
public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        $criteria->compare('email',$this->email,true);
        $criteria->compare('password',$this->password,true);
        $criteria->compare('user_type',$this->user_type,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
        public function beforesave()
        {
            $this->password=md5($this->password);
            return true;
        }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:06:07.860

您可以通过以下方式检查提交：

```
$user = User::model()->find("email = '".trim($model->email)."'");
if (!empty($user)){
     // users exists
} else {
    // user does not exist
} 
```

如果您真的想使用该模型，您可以设置一个规则，其中电子邮件必须是唯一的，如下所示：

```
array('email', 'unique', 'message' => 'Email already in use'), 
```

然后，您可以检查模型是否在提交时验证，特别是电子邮件字段。如果它不验证电子邮件地址是否存在

最后，您可以像这样验证单个模型属性：

```
if($model->validate(array('attribute_name')) 
     // valid
} 
```

这是执行完整操作的一种方法（不是最好的方法，但最容易理解！）

```
public function actionResetpassword(){
        $model = new User;
        if(isset($_POST['User'])){
            $model->attributes = $_POST['User']; // this is the form as completed by the user
            $user = User::model()->find("email = '".trim($model->email)."'");
            if (!empty($user)){
                // send user their new email
                $this->render("passwordreset"); // user exists, render confirmtion page
            } else {
                // user does not exist, render form and pass $error_message variable with messasge 
                $this->render("resetpassword",array(
                    "model"         =>  $model,
                    "error_message" =>  "No such user found!",
                ));
            }
    } else {
        // this will be rendered if the user has not submitted the form yet
        $this->render("resetpassword",array(
            "model" =>  $model,
        ));
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T07:35:23.820

```
public function rules() {

    $action = Yii::app()->controller->action->id;
    if($action == 'login'){
        return array(array('username,password', 'required'), array('password', 'length', 'min'=>6, 'max'=>12), array('rememberMe', 'boolean'), array('password', 'authenticate'), array('id, jsid, email, username, password, status', 'safe', 'on'=>'search'));
    }else{
        return array( array('oldpassword,password1,password2', 'required'), array('password1,password2, oldpassword', 'length', 'min'=>6, 'max'=>12),array('password1', 'compare', 'compareAttribute'=>'password2'), array('id, jsid, email, username, password, status', 'safe', 'on'=>'search'),);    
    }
} 
```

# android - Titanium - Android - 使用滚动视图

> ID：12912854
> 
> 赞同：1
> 
> 时间：2012-10-16T10:39:19.393
> 
> 标签：android, titanium

我正在尝试使用 Titanium Appcelerator 准备在 Android 和 iOS 上运行的移动应用程序
在其中一个视图中，我将向服务器发送请求，获取响应，在解析它之后，我将创建一个带有内部视图的滚动视图和相应地填充数据。该应用程序在 iPhone 上运行良好。但在 Android 中，它无法正常工作。除非并且直到我将控件添加到 Windows，否则它们不会显示在 Android 中。
我想知道我是否必须设置任何东西才能在android中正常工作。
以下代码用于将子视图添加到滚动视图：

```
var xPos = 0;
for (var i = 0; i < cityCodes.length; i++) 
{
    xPos = i*320;
    var cityImg = require('screens/views').cityDataView(xPos, cityClicked,
        cityCodes.item(i).text,
        cityNames.item(i).text,
        cityExportQuantities.item(i).text,
        exportPercentages.item(i).text,
        populationCount.item(i).text,
        popultionPercentages.item(i).text,
        rates.item(i).text
    );
    scrlView.add(cityImg);
} 
```

我正在创建滚动视图，如下所示：

```
scrlView = Titanium.UI.createScrollView({
    contentWidth:'auto', 
    contentHeight:'auto', 
    top:'40%', 
    height:'155dp',
    showVerticalScrollIndicator:true, 
    showHorizontalScrollIndicator:false 
}); 
```

我正在创建城市数据视图，如下所示：

```
cityDataView: function(xPos, showCityDetails,  cityCode, cityName, exportQuantity, exportPercent, popCount, popPercent, rate)
{
    var tempLabel = function(topPos,txt){
        // Ti.API.log(topPos);
        var custLabel = Ti.UI.createLabel({         
            color:'#000',
        text:txt,
        right:'55%',
        top:topPos,
        font:{
                fontSize:14,
                fontFamily:'GE SS Text Light'
        },
        textAlign:Titanium.UI.TEXT_ALIGNMENT_RIGHT,
        width:'auto'
        });
        return custLabel;
    };
    var cityImg = Ti.UI.createImageView({
        left:xPos,
    height : '155dp',
    width : '100%',
    image : '/images/citydetails.png'
    });
    cityImg.addEventListener('singletap', function(){
        Ti.API.log(cityCode);
     showCityDetails(cityCode);
    });
    var cityNameLbl = Ti.UI.createLabel({
    color:'#ffffff',
    text:cityName,
    height:'15dp',
    top:'6%',
    font:{
            fontSize:14,
            fontFamily:'GE SS Text Light'
    },
    textAlign:Titanium.UI.TEXT_ALIGNMENT_RIGHT,
    width:'auto'
    });
    cityImg.add(cityNameLbl);
    var exportQtyLbl = tempLabel('19%',exportQuantity);
    cityImg.add(exportQtyLbl);

    var overallProd = tempLabel('35%',exportPercent);
    cityImg.add(overallProd);

    var populationCount = tempLabel('53%',popCount);
    cityImg.add(populationCount);

    var populationPercent = tempLabel('69%',popPercent);
    cityImg.add(populationPercent);

    var rateText = tempLabel('85%',rate);
    cityImg.add(rateText);

    // var totalExportText = tempLabel('95%',totalExport);
    // cityImg.add(totalExportText);

    return cityImg; 
} 
```

# asp.net-mvc - 如何在 Ajax.BeginForm 中放置数据属性？

> ID：12912857
> 
> 赞同：5
> 
> 时间：2012-10-16T10:39:29.017
> 
> 标签：asp.net-mvc, knockout.js

因为在我看来我使用的是 Knockout，所以我已经相应地设置了我的表单标签；

```
<form class="employeeListEditor" data-bind="submit: save"> 
```

但是，当我单击提交按钮时，我想做部分页面刷新。那么如何在 Ajax.BeginForm 中设置 data-bind 属性呢？

这种语法不起作用；

```
<% using (Ajax.BeginForm("GetCalendar", new AjaxOptions { UpdateTargetId = "siteRows" }, new { data-bind="submit: save", class="employeeListEditor" }))
{%> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-16T10:42:48.770

您需要`_`在属性名称中使用 unserscore ( )，并且`Ajax.BeginForm`帮助程序（实际上所有 HTML 帮助程序在给定的 htmlAttributes 对象参数中将 unserscore 替换为破折号）将自动将其替换为破折号 ( `-`)

```
new { data_bind="submit: save", @class="employeeListEditor" } 
```

你需要使用一个接受 htmlAttributes 这样[的](http://msdn.microsoft.com/en-us/library/dd492974(v=vs.100).aspx)`Ajax.BeginForm` [重载](http://msdn.microsoft.com/en-us/library/dd492974(v=vs.100).aspx)：

```
<% using (Ajax.BeginForm(
          "GetCalendar", // actionName
          null, // routeValues
          new AjaxOptions { UpdateTargetId = "siteRows" }, // ajaxOptions
          new { data_bind="submit: save", @class="employeeListEditor" } // htmlAttributes
         ))
{%> 
```

# vbscript - VBScript：显示瑞典语字符 (äåö)

> ID：12912859
> 
> 赞同：0
> 
> 时间：2012-10-16T10:39:39.093
> 
> 标签：vbscript

以下 VBScript 读取 txt 文件并打印其内容。但是，它不显示诸如 äåö 之类的字符。有人可以帮助我知道如何阅读吗？

```
Set objFS = CreateObject("Scripting.FileSystemObject") 
inputDir = "c:\input\" 
inpFile = ""
inpFileCount = 0

Set objFolder = objFS.GetFolder(inputDir) 
For Each objFile in objFolder.Files 
    If LCase(objFS.GetExtensionName(objFile.name)) = "txt" Then 
        inpFile = objFile.Path 
        inpFileCount = inpFileCount + 1
    End If 
Next

If inpFileCount > 1 Then
    WScript.Quit(1)
End If

Set objFile = objFS.OpenTextFile(inpFile)
Do Until objFile.AtEndOfStream
    strLine = objFile.ReadLine
    If strLine <> Empty Then 
        WScript.Echo strLine
    End If
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:13:07.070

我设法通过将文件复制到目的地来解决它。虽然它不好，但它对我有用。

```
If objFS.FileExists(inpFile) Then 
    destinationFile = "D:\Test\refkoder.txt"
    objFS.CopyFile inpFile, destinationFile, True 
End If 
```

# php - addAttributeToSort() 在 magento 产品集合中不起作用？

> ID：12912867
> 
> 赞同：1
> 
> 时间：2012-10-16T10:40:06.517
> 
> 标签：php, magento

我在 magento 的产品表中添加了自定义字段。我想使用该自定义字段进行排序，但不会。不知道是什么问题。。

```
 $_cproduct = Mage::getmodel('catalog/product');
    $_productCollection = $_cproduct->getCollection();
    $_productCollection->addAttributeToSelect('name')->addAttributeToSelect('expired')->addAttributeToSelect('dealcategory')->addAttributeToSelect('dealcity')->addAttributeToSelect('deal_position')->addAttributeToSelect('special_to_date')->addAttributeToSelect('title')->setStore(Mage::app()->getStore()->getId())->addStoreFilter(Mage::app()->getStore()->getId())->addAttributeToSort('entity_id', 'DESC')->addAttributeToSort('dealcategory', 'DESC');
    $_productCollection->addAttributeToFilter('status', 1)->addAttributeToFilter('expired', 0);

$_productCollection->addAttributeToFilter('dealcategory', array('in' => array(129, 135, 136, 137, 141, 156, 205)));

    $now = Mage::getModel('core/date')->timestamp(time());
    $dateStart = date('Y-m-d' . ' 00:00:00', $now);    

    $_productCollection->addFieldToFilter('special_to_date', array('from' => $dateStart));
    $dealcity = Mage::app()->getRequest()->getParam('dealcity', false);
    $_productCollection->addAttributeToSort('deal_position', 'ASC');

    echo "<pre>";
    print_r($_productCollection->getData());
    echo "</pre>"; 
```

但是每次我得到像下面这样的异常订单时，我都想根据“ `deal_position`”排序

```
Array
(
    [0] => Array
        (
            [entity_id] => 2568
            [entity_type_id] => 10
            [attribute_set_id] => 9
            [type_id] => virtual
            [sku] => comedybar7/2/12
            [created_at] => 2012-07-02 18:36:22
            [updated_at] => 2012-10-16 09:52:41
            [has_options] => 0
            [required_options] => 0
            [dealcategory_value] => Side travel deal
            [status] => 1
            [expired] => 0
            [dealcategory] => 135
            [special_to_date] => 2012-10-25 00:00:00
            [deal_position] => 4
        )

    [1] => Array
        (
            [entity_id] => 2566
            [entity_type_id] => 10
            [attribute_set_id] => 9
            [type_id] => virtual
            [sku] => livingwellfinal
            [created_at] => 2012-06-28 14:48:34
            [updated_at] => 2012-10-16 09:51:58
            [has_options] => 0
            [required_options] => 0
            [dealcategory_value] => Side Deal
            [status] => 1
            [expired] => 0
            [dealcategory] => 129
            [special_to_date] => 2012-11-30 00:00:00
            [deal_position] => 1
        )

    [2] => Array
        (
            [entity_id] => 2565
            [entity_type_id] => 10
            [attribute_set_id] => 9
            [type_id] => simple
            [sku] => laser-toenail-10-toes
            [created_at] => 2012-06-27 21:10:19
            [updated_at] => 2012-10-16 09:52:23
            [has_options] => 0
            [required_options] => 0
            [dealcategory_value] => Side Deal
            [status] => 1
            [expired] => 0
            [dealcategory] => 129
            [special_to_date] => 2012-11-30 00:00:00
            [deal_position] => 3
        )

    [3] => Array
        (
            [entity_id] => 2564
            [entity_type_id] => 10
            [attribute_set_id] => 9
            [type_id] => simple
            [sku] => laser-toenail-5-toes
            [created_at] => 2012-06-27 21:10:19
            [updated_at] => 2012-10-16 09:52:10
            [has_options] => 0
            [required_options] => 0
            [dealcategory_value] => Side Deal
            [status] => 1
            [expired] => 0
            [dealcategory] => 129
            [special_to_date] => 2012-12-31 00:00:00
            [deal_position] => 2
        )

) 
```

我使用`addOrder()`它也返回相同的输出。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:09:27.593

您似乎迷失在自己的代码中。您已添加**3 个**！在您的代码中排序：

```
line3: ...->addAttributeToSort('entity_id', 'DESC')->addAttributeToSort('dealcategory', 'DESC');
line10: $_productCollection->addAttributeToSort('deal_position', 'ASC'); 
```

确保你只有你需要的排序。另外，不要`addAttributeToSelect`多次使用，只使用一次，而是将数组作为参数传递：

```
$_productCollection->addAttributeToSelect(array('name', 'expired', ...)); 
```

# windows - PHP Kohana 3.2.2 多部分表单 $_POST 未在 MAC 上设置但适用于 Win

> ID：12912868
> 
> 赞同：2
> 
> 时间：2012-10-16T10:40:08.950
> 
> 标签：windows, macos, post, multipartform-data, kohana-3.2

我刚刚遇到了一个奇怪的问题。我最近在 Windows 7 平台上使用 Kohana 3.2.2 + jquery + html + WAMP 开发了一个中型网站。一切似乎都运行良好，直到有人尝试从 Mac 平台访问该页面。似乎在以多部分形式发送一些带有文件的数据时，未设置全局变量 $_POST ，即使在 Web 浏览器中调试数据时我能够看到 DATA IS SET ：| 控制器无法通过任何 $_POST 或 request->post() 访问它。我重复一遍，当用户从 Windows 平台访问页面时一切正常（在少数独立客户端上测试），但在从 Mac 平台访问时（在少数独立客户端上测试）无法正常工作。它正在杀死我......
我试图做的事情的例子：
**在视图中：**
用户将数据放入输入（文本和文件类型）。数据通过 enctype = multipart/form-data 的表单发送到控制器的操作
**在控制器中：**
$post = request->post();
if($post['sometextinput'] != '') 抛出未知索引 'sometextinput' 的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:40:29.407

这非常奇怪。我每天都使用 Kohana（我在 Mac 上开发），从来没有遇到过这样的问题。你能发布你的控制器和视图吗？我将把它插入一个虚拟项目，看看我是否可以复制这个问题。如果可以的话，我会尽我所能让它工作。

编辑：

这可能是一个奇怪的配置问题吗？

只是为了我自己的澄清。

您提交的表单包含输入字段和一个或多个文件上传。
在 Windows 机器上查看它时，您可以看到数据设置在 $_POST 或 $request->post() 中。
在 OSX 上，控制器无法通过 $_POST 或 $request->post(); 看到它。

在你的 before 方法中确保你有“parent::before();”。如果您已经在调用 parent::before() 尝试将其作为您的 before() 方法中的第一条语句。如果这不起作用，请尝试将其添加为最后一条语句。这是在黑暗中拍摄，但值得一试。

如果您没有 before() 方法，则添加一个并调用 parent::before();。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:23:43.417

我不确定您是否只是急于输入上面的示例，但实际上应该是：

```
#$post = request->post(); //wouldn't recommend doing this
if($this->request->post('sometextinput') != '') throws exception of unknown index 'sometextinput'. 
```

# jndi - 从 JBoss 4.2 连接到 JBoss 7.1

> ID：12912872
> 
> 赞同：3
> 
> 时间：2012-10-16T10:40:25.720
> 
> 标签：jndi, jboss7.x, jboss-4.2.x

我们想使用 JBoss 7.1 和 JPA、Java EE 6 等现代技术创建一个全新的服务。
唉，我们有一个运行在 JBoss 4.2.2 上的遗留系统，它绝对**不能**移植到 JBoss 7 . 旧系统将不得不访问新系统，即通过 RMI 调用方法。

不幸的是，这不可能开箱即用：

*   JBoss 7 不再支持通常在 JBoss 4 中用于 JNDI 查找的旧 JNP 协议。（见[https://docs.jboss.org/author/display/AS71/JNDI+Reference](https://docs.jboss.org/author/display/AS71/JNDI+Reference)）
*   我们不能只将新协议所需的新 JAR 添加到 default/lib，因为这会导致版本冲突（例如日志记录）并且根本不起作用。

我看到了两种可能的解决方案，它们既复杂又容易出错：

1.  我们向 JBoss 4 添加了一个新的部署，它包含所有必要的库来访问 JBoss 7，并尝试在 jboss-app.xml 中使用 JBoss 的类加载器魔法来使其工作。

2.  我们将 jnpserver.jar 中的旧 JNP 服务器改装为新的 JBoss 7 模块。

在这两种情况下，我们都必须通过转发所有请求的 JNP 将 Bridge/Adapter 对象绑定到 JNDI 上下文。

有没有人在弥合 JBoss 4 到 JBoss 7 之间的差距（实际上是一个蛇坑）或更好的主意方面有经验？

提前致谢。

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T14:02:40.457

让您的生活更轻松并在它们之间使用 Web 服务，因为这也将避免类加载器/序列化地狱

# c# - 如何使用 LINQ 计算最长的连胜？

> ID：12912873
> 
> 赞同：5
> 
> 时间：2012-10-16T10:40:25.667
> 
> 标签：c#, linq

目前，这只是我很好奇的事情，我没有任何正在处理的代码，但我想知道如何实现这一点......

例如，我有一个应用程序可以跟踪世界上所有足球队的结果。我想要做的是确定任何给定球队最长的“连胜”纪录。

我想我很可能会有这样的某种数据表：

*   MatchDate 日期时间
*   TeamA 字符串
*   TeamB 字符串
*   TeamAGoals int
*   TeamBGoals int

因此，例如，我想做的是找到最长的连胜纪录，`TeamA = "My Team"`显然这意味着`TeamAGoals`必须大于`TeamBGoals`.

正如我所说，这只是举例。对于这样的事情，不同的数据库设计可能会更好。但根本问题是如何计算最长的连续/运行匹配结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-11T08:13:12.493

这是一个老问题，但我只需要自己解决同样的问题，并且认为人们可能会对 Rawling 的 LongestStreak 扩展方法的完全 LINQ 实现感兴趣。这使用带有种子和结果选择器的聚合来遍历列表。

```
 public static int LongestStreak<TSource>(
        this IEnumerable<TSource> source,
        Func<TSource, bool> predicate)
    {
        return source.Aggregate(
            new {Longest = 0, Current = 0},
            (agg, element) => predicate(element) ? 
                new {Longest = Math.Max(agg.Longest, agg.Current + 1), Current = agg.Current + 1} : 
                new {agg.Longest, Current = 0},
            agg => agg.Longest);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:11:01.480

没有开箱即用的 LINQ 方法来计算条纹，因此您需要自定义 LINQy 方法，例如

```
public static int LongestStreak<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, bool> predicate)
{
    int longestStreak = 0;
    int currentStreak = 0;
    foreach (TSource s in source)
    {
        if (predicate(s))
            currentStreak++;
        else
        {
            if (currentStreak > longestStreak) longestStreak = currentStreak;
            currentStreak = 0;
        }
    }
    if (currentStreak > longestStreak) longestStreak = currentStreak;
    return longestStreak;
} 
```

然后，要使用它，首先将每个“比赛结果”变成一对“团队结果”。

```
var teamResults = matches.SelectMany(m => new[] {
        new {
            MatchDate = m.MatchDate,
            Team = m.TeamA,
            Won = m.TeamAGoals > m.TeamBGoals },
        new {
            MatchDate = m.MatchDate,
            Team = m.TeamB,
            Won = m.TeamBGoals > m.TeamAGoals }
    }); 
```

按团队对这些进行分组。

```
var groupedResults = teamResults.GroupBy(r => r.Team); 
```

然后计算条纹。

```
var streaks = groupedResults.Select(g => new
    {
        Team = g.Key,
        StreakLength = g
            // unnecessary if the matches were ordered originally
            .OrderBy(r => r.MatchDate)
            .LongestStreak(r => r.Won)
    }); 
```

如果您只想要最长的连胜，请使用[MoreLinq's`MaxBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs) ; 如果您想要全部订购，您可以使用`OrderByDescending(s => s.StreakLength)`.

或者，如果您想一次性完成此操作，并且假设`matches`已订购，请使用以下类

```
class StreakAggregator<TKey>
{
    public Dictionary<TKey, int> Best = new Dictionary<TKey, int>();
    public Dictionary<TKey, int> Current = new Dictionary<TKey, int>();

    public StreakAggregator<TKey> UpdateWith(TKey key, bool success)
    {
        int c = 0;
        Current.TryGetValue(key, out c);
        if (success)
        {
            Current[key] = c + 1;
        }
        else
        {
            int b = 0;
            Best.TryGetValue(key, out b);
            if (c > b)
            {
                Best[key] = c;
            }
            Current[key] = 0;
        }
        return this;
    }

    public StreakAggregator<TKey> Finalise()
    {
        foreach (TKey k in Current.Keys.ToArray())
        {
            UpdateWith(k, false);
        }
        return this;
    }
} 
```

然后你可以做

```
var streaks = teamResults.Aggregate(
    new StreakAggregator<string>(),
    (a, r) => a.UpdateWith(r.Team, r.Won),
    (a)    => a.Finalise().Best.Select(kvp => 
        new { Team = kvp.Key, StreakLength = kvp.Value })); 
```

和`OrderBy`或任何像以前一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T12:11:47.883

您可以通过单个查询获得团队的所有结果：

```
var results = from m in Matches
            let homeMatch = m.TeamA == teamName
            let awayMatch = m.TeamB == teamName
            let hasWon = (homeMatch && m.TeamAGoals > m.TeamBGoals) || 
                         (awayMatch && m.TeamBGoals > m.TeamAGoals)
            where homeMatch || awayMatch
            orderby m.MatchDate
            select hasWon; 
```

然后只需简单计算最长条纹：

```
int longestStreak = 0;
int currentStreak = 0;

foreach (var hasWon in results)
{
    if (hasWon)
    {
        currentStreak++;
        if (currentStreak > longestStreak)
            longestStreak = currentStreak;

        continue;
    }

    currentStreak = 0;
} 
```

您可以按原样使用它、提取到方法或[创建 IEnumerable 扩展](https://stackoverflow.com/a/3844632/470005)来计算结果中的最长序列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T12:25:52.843

你可以利用`string.Split`. 像这样的东西：

```
int longestStreak = 
    string.Concat(results.Select(r => (r.ours > r.theirs) ? "1" : "0"))
          .Split(new[] { '0' })
          .Max(s => s.Length); 
```

或者，更好的是，创建一个`Split`扩展方法`IEnumerable<T>`以避免需要通过字符串，如下所示：

```
public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> items, Predicate<T> p)
{
    while (true)
    {
        items = items.SkipWhile(i => !p(i));
        var trueItems = items.TakeWhile (i => p(i)).ToList();
        if (trueItems.Count > 0)
        {
            yield return trueItems;
            items = items.Skip(trueItems.Count);
        }
        else
        {
            break;
        }
    }   
} 
```

然后你可以简单地这样做：

```
int longestStreak = results.Split(r => r.ours > r.theirs).Max(g => g.Count()); 
```

# iphone - 使用 Blender 导出 .h 文件（IOS）

> ID：12912874
> 
> 赞同：1
> 
> 时间：2012-10-16T10:40:28.693
> 
> 标签：iphone, ios

[我从https://github.com/jlamarche/iOS-OpenGLES-Stuff](https://github.com/jlamarche/iOS-OpenGLES-Stuff)下载了一个文件，但我无法导出 .h 文件。因为最新的搅拌机版本是 2.6.4，python 脚本最新版本是 2.6.2。我该怎么办？

# ruby-on-rails-3.2 - 如何在 Rails 中执行此查询以从一个表中搜索两列并从另一表中搜索一列

> ID：12912880
> 
> 赞同：0
> 
> 时间：2012-10-16T10:40:39.590
> 
> 标签：ruby-on-rails-3.2, where-clause

我有以下关联：

类资源 < ActiveRecord::Base belongs_to :author

```
 def self.search(search)
     where('title ILIKE ? OR description ILIKE ?', "%#{search}%","%#{search}%")
 end 
```

我需要搜索作者姓名，如下所示：

```
 where('title ILIKE ? OR description ILIKE ? OR author_name ILIKE ?', "%#{search}%","%#{search}%","%#{search}%" ) 
```

结尾

这显然不起作用，因为我在 Resource 表中有 author_id 而不是作者姓名字段。

我是一个菜鸟，所以任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:18:19.403

您可以使用 joins 方法来连接 authors 表。请参见下面的示例：

```
def self.search(search)
 joins(:author).where('title ILIKE ? OR description ILIKE ? OR authors.name ILIKE ?', "%#{search}%","%#{search}%","%#{search}%")
end 
```

# javascript - Javascript/jQuery 循环

> ID：12912882
> 
> 赞同：0
> 
> 时间：2012-10-16T10:40:52.950
> 
> 标签：javascript, jquery

我有一些 jQuery 可以在一些文本中进行动画处理，然后将其动画化。动画的参数是通过 PHP 传递的。我需要动画循环但只有在动画完成后才能完成，但不能完全解决。

```
<?php if ($text1_1 != "") { ?>

  setTimeout(one_1,0);                              // From 0 to duration
  setTimeout(one_2,<?php echo $duration * 2 ?>);    
  // From duration x2 to duration x3

<?php } ?> 

<?php if ($text2_1 != "") { ?> 

 setTimeout(two_1,<?php echo $duration * 3 ?>);     // From duration x3 to duration x4
 setTimeout(two_2,<?php echo $duration * 5 ?>);     // From duration x5 to duration x6

<?php } ?> 

<?php if ($text1_1 != "") { ?> 

  function one_1() {
      $('.text-1_1').animate({ <?php echo $animate1_1 ?>: '<?php echo $text1_1_end ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_2').animate({ <?php echo $animate1_2 ?>: '<?php echo $text1_2_end ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_3').animate({ <?php echo $animate1_3 ?>: '<?php echo $text1_3_end ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_4').animate({ <?php echo $animate1_4 ?>: '<?php echo $text1_4_end ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_5').animate({ <?php echo $animate1_5 ?>: '<?php echo $text1_5_end ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
  }

  function one_2() {
      $('.text-1_1').animate({ <?php echo $animate1_1 ?>: '<?php echo $text1_1_start ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_2').animate({ <?php echo $animate1_2 ?>: '<?php echo $text1_2_start ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_3').animate({ <?php echo $animate1_3 ?>: '<?php echo $text1_3_start ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_4').animate({ <?php echo $animate1_4 ?>: '<?php echo $text1_4_start ?>' }, <?php echo $duration ?>, 'easeInOutCubic');
      $('.text-1_5').animate({ <?php echo $animate1_5 ?>: '<?php echo $text1_5_start ?>' }, <?php echo $duration ?>, 'easeInOutCubic');    
  }

<?php } ?> 
```

在完成动画后，如何让函数 one_1() 和函数 one_2() 循环。还有可能会有更多类似的功能。

如果这有点模糊，非常抱歉！解释它有点麻烦。

感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:48:59.297

您可以使用此处描述的动画完成回调：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

```
$(element).animate( { animation params }, duration, function(){
    // this is the animation finish callback
}); 
```

我的建议是使用递归函数，把动画放在里面，动画完成后递归调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:24:07.100

你可以使用这样的东西作为模板。如果每个组中的持续时间不相同，则需要设置更多的逻辑，并且您可能最好将所有动画数据作为数组提供，而不是回显到每个动画

```
function one_1() {  

    /* use complete callback of  one animation to call next function*/
    $('.text-1_5').animate({ /* anim*/}, /*duration*/, /* easing*/, function(){
       /* this animation is complete, call next function */
        two_1();                                                                                 
    });

    /* other animations for this group*/

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:45:25.943

也许解决方案是替换`setTimeout`为

```
setInterval(two_1,<?php echo $duration; ?>);
setInterval(two_2,<?php echo $duration; ?>); 
```

现在需要做`$duration * 3`，因为您的动画将同时开始

# python - 在 Linux Angstrom 上使用 Python 显示图像

> ID：12912883
> 
> 赞同：1
> 
> 时间：2012-10-16T10:40:53.520
> 
> 标签：python, image, angstrom-linux

我有一个 Python 脚本，可以在禁用 GUI 的 BeagleBoard 上全屏显示图像。该脚本在板启动时启动。为此，我使用 PyGame，它工作得非常好。除非出于某种原因，图像质量会按比例缩小。因为图像存储在 HQ 中，所以我假设 PyGame 会重新采样图像。我无法找到可以更改的位置，因此我决定替换 PyGame，“仅”显示图像似乎也有点过分。

我有下面的代码来显示图像。根据文档，默认图像查看器将显示图像。（应该是 XV）。但是，一旦我运行下面的代码，其中图像是文件路径，我就会得到“sh：xv：not found”。

```
from PIL import Image
im = Image.open(image)
im.show() 
```

所以我尝试安装 XV 包，但找不到如何为 Angstrom 安装它。

我的问题可能是“如何使用 Python 全屏显示图像？” （答案应该是上面的代码）。或者问题是“我怎样才能在 Angstrom 上安装 XV？” （opkg install 的包名是什么）

我确实搜索过，但没有找到有效的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:50:32.647

`Image.show()`在 PIL 中，更多的是用于调试而不是实际的生产用途。调用是硬编码的`xv <temp-image-file-pil-creates>`。您可以解决这个问题（创建一个名为的符号链接`xv`，该链接将调用其他图像查看器），但这仍然是一种相当糟糕的方法。

我对 BeagleBoard 了解不多，无法告诉您全屏显示图像的最佳/规范方式，但如果您使用 PyGame 到了一半，也许您可​​以发布您的代码，社区可以帮助您解决质量问题。

如果图像被缩小以适应屏幕，您可能会考虑使用[transform.smoothscale](http://www.pygame.org/docs/ref/transform.html#pygame.transform.smoothscale)手动缩放图像（以避免丢失质量）。

# c# - 使用 Windows 凭据从 ADFS 获取 SAML 令牌

> ID：12912884
> 
> 赞同：3
> 
> 时间：2012-10-16T10:40:53.253
> 
> 标签：c#, windows-8, sap, saml

我正在用 c# 创建一个 Windows 8 客户端应用程序。这个应用程序将使用 SAP 的 odata 服务。对于身份验证，我需要 ADFS 颁发的 SAML 令牌。有什么方法可以使用 Windows 凭据从 ADFS 获取 SAML 令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:56:57.553

您可以使用以下代码获取 SAML 令牌。

```
var factory = new WSTrustChannelFactory(new Microsoft.IdentityModel.Protocols.WSTrust.Bindings.UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential), adfsEndpoint);

factory.Credentials.UserName.UserName = "username";
factory.Credentials.UserName.Password = "********";
factory.Credentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
factory.TrustVersion = TrustVersion.WSTrust13;
WSTrustChannel channel = null;
try
{
    var rst = new RequestSecurityToken
    {
        RequestType = WSTrust13Constants.RequestTypes.Issue,
        AppliesTo = new EndpointAddress("https://yourserviceendpoint.com/"),
        KeyType = KeyTypes.Bearer,
    };
    channel = (WSTrustChannel)factory.CreateChannel();
    return channel.Issue(rst);
}
catch (Exception e)
{
    return null;
} 
```

# java - jsp portlet 选项卡共享同一个 bean

> ID：12912888
> 
> 赞同：2
> 
> 时间：2012-10-16T10:40:58.490
> 
> 标签：java, spring, jsp, tabs, portlet

我需要在以这种方式定义的两个选项卡中共享同一个 bean：

```
<fmt:message var="tabNames" key="message.tab.alta" />

<c:set var="tabValues" value="valtab01,valtab02" />

<portlet:renderURL var="URL01" >
        <portlet:param name="action" value="${ServletContextKeys.SC_INSERT}" />
    <portlet:param name="${ServletContextKeys.SC_TAB_INSERT}" value="valtab01" />
</portlet:renderURL>

<portlet:renderURL var="URL02" >
     <portlet:param name="action" value="${ServletContextKeys.SC_ADD_LIST}" />
     <portlet:param name="${ServletContextKeys.SC_TAB_INSERT}" value="valtab02" />
</portlet:renderURL>

<liferay-ui:tabs 
     names="${tabNames}"
     tabsValues="${tabEscrituraValues}"
     param="${ServletContextKeys.SC_TAB_INSERT}"
     url0="${URL01}"
     url1="${URL02}"
     value="${insert_tabs}"
  /> 
```

所以我只需要在代表 2 个选项卡的 2 个 jsp 中定义一个 bean：

```
 <form:form id="formInsert" action="action01" method="post" modelAttribute="myBean" enctype="multipart/form-data"> 
```

但我不知道如何让 2 个 jsp 共享同一个 bean。我需要在一个选项卡中填充 bean 的一些数据，并在另一个选项卡上填充一个列表（在同一个 bean 中）。填写完所有数据后，从第一个选项卡提交，我需要控制器中的整个 bean（第一个选项卡中的数据和第二个选项卡中的列表）我对 portlet、spring 和所有这些东西，所以任何帮助都会很棒！

这可能吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:38:34.567

If you want to remember in some way the properties of `modelAttribute` which are not on current tab, you may do this in several ways:

*   Persist the `modelAttribute` in session using the `@SessionAttributes` annotation. This is probably the easiest way and it quite literally does what you wanted – makes the JSPs "share" the same bean – but I highly disencourage doing this as a REST advocate, as session is quite an overkill here (not that it's even possible to build RESTful applications with portlets currently).
*   Hold the values from the first tab in second tab's form in hidden inputs.
*   Hold the values from the first tab in cookies and meld them with second tab's `modelAttribute` upon submission request

The latter two are quite similar I think but for general purposes the hidden inputs would probably be easier to implement (they may require little to no controller code, e.g. for proper validation).

# c# - SelectedIndexChanges 在 TextChanged 事件之前触发

> ID：12912889
> 
> 赞同：2
> 
> 时间：2012-10-16T10:41:02.430
> 
> 标签：c#, asp.net, .net, event-handling

`TextBox`我有一个网格，其中包含多个带有 ASP控件的列/行。除此之外，在网格上方我有一个包含年份的单选按钮列表。

用户可以在列表中输入数字`TextBoxes`，然后单击`RadioButton`列表中的项目以保存信息，然后切换年份或单击更新按钮以仅保存信息并继续查看数据。

如果我单击“保存”按钮，则 textchanged 事件处理程序会触发并且我知道网格上的哪些行发生了更改，然后我更新我的数据库，然后再次获取数据以显示给用户。

但是，如果我单击单选按钮列表切换年份，则`SelectedIndexChanged`事件会触发但`TextChanged`事件处理程序不会运行，因为保存和获取数据首先运行，重新绑定网格和事件处理程序。

在我看来，这与事件在 .net 中的运行方式有关，有谁知道单击单选按钮列表时如何让 textchanged 事件处理程序首先运行？

我正在使用 VS2005、.Net 2.5、ASP.Net、C#

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:34:16.977

你的问题不清楚。无论如何，我可以理解您对事件处理程序以及它们的调用方式有疑问。

我想知道调用 textchanged 事件和 SelectedIndexChanged 需要什么。即使它们不被称为您的数据也会被完美保存。

# mysql - 具有性能问题的简单 MySQL 查询

> ID：12912890
> 
> 赞同：2
> 
> 时间：2012-10-16T10:41:06.063
> 
> 标签：mysql, performance

我有以下简单的 MySQL 查询：

```
SELECT SQL_NO_CACHE mainID
FROM tableName 
WHERE otherID3=19
AND dateStartCol >= '2012-08-01' 
AND dateStartCol <= '2012-08-31'; 
```

当我运行它时，需要 0.29 秒才能带回 36074 个结果。当我增加我的日期周期以带回更多结果（65703）时，它运行在 0.56。当我在同一台服务器上但在不同的表（有些表更大）上运行其他类似的 SQL 查询时，结果会在大约 0.01 秒内返回。

虽然 0.29 并不慢 - 这是复杂查询的基本部分，而且这个时间意味着它不可扩展。

有关表定义和索引，请参见下文。

我知道这不是服务器负载，因为我在使用很少的开发服务器上遇到了同样的问题。

```
+---------------------------+--------------+------+-----+---------+----------------+
| Field                     | Type         | Null | Key | Default | Extra          |
+---------------------------+--------------+------+-----+---------+----------------+
| mainID                    | int(11)      | NO   | PRI | NULL    | auto_increment |
| otherID1                  | int(11)      | NO   | MUL | NULL    |                |
| otherID2                  | int(11)      | NO   | MUL | NULL    |                |
| otherID3                  | int(11)      | NO   | MUL | NULL    |                |
| keyword                   | varchar(200) | NO   | MUL | NULL    |                |
| dateStartCol              | date         | NO   | MUL | NULL    |                |
| timeStartCol              | time         | NO   | MUL | NULL    |                |
| dateEndCol                | date         | NO   | MUL | NULL    |                |
| timeEndCol                | time         | NO   | MUL | NULL    |                |
| statusCode                | int(1)       | NO   | MUL | NULL    |                |
| uRL                       | text         | NO   |     | NULL    |                |
| hostname                  | varchar(200) | YES  | MUL | NULL    |                |
| IPAddress                 | varchar(25)  | YES  |     | NULL    |                |
| cookieVal                 | varchar(100) | NO   |     | NULL    |                |
| keywordVal                | varchar(60)  | NO   |     | NULL    |                |
| dateTimeCol               | datetime     | NO   | MUL | NULL    |                |
+---------------------------+--------------+------+-----+---------+----------------+

+--------------------+------------+-------------------------------+--------------+---------------------------+-----------+-------------+----------+--------+------+------------+---------+
| Table              | Non_unique | Key_name                      | Seq_in_index | Column_name               | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------------------+------------+-------------------------------+--------------+---------------------------+-----------+-------------+----------+--------+------+------------+---------+
| tableName          |          0 | PRIMARY                       |            1 | mainID                    | A         |      661990 |     NULL | NULL   |      | BTREE      |         |
| tableName          |          1 | idx_otherID1                  |            1 | otherID1                   | A         |      330995 |     NULL | NULL   |      | BTREE      |         |
| tableName          |          1 | idx_otherID2                  |            1 | otherID2                   | A         |          25 |     NULL | NULL   |      | BTREE      |         |
| tableName          |          1 | idx_otherID3                  |            1 | otherID3                   | A         |          48 |     NULL | NULL   |      | BTREE      |         |
| tableName          |          1 | idx_dateStartCol              |            1 | dateStartCol               | A         |         187 |     NULL | NULL   |      | BTREE      |         |
| tableName          |          1 | idx_timeStartCol              |            1 | timeStartCol               | A         |       73554 |     NULL | NULL   |      | BTREE      |         |
|tableName          |          1 | idx_dateEndCol                 |            1 | dateEndCol                 | A         |         188 |     NULL | NULL   |      | BTREE      |         |
|tableName          |          1 | idx_timeEndCol                 |            1 | timeEndCol                 | A         |       73554 |     NULL | NULL   |      | BTREE      |         |
| tableName          |          1 | idx_keyword                   |            1 | keyword                    | A         |       82748 |     NULL | NULL   |      | BTREE      |         |
| tableName           |          1 | idx_hostname                 |            1 | hostname                   | A         |        2955 |     NULL | NULL   | YES  | BTREE      |         |
| tableName           |          1 | idx_dateTimeCol              |            1 | dateTimeCol                | A         |      220663 |     NULL | NULL   |      | BTREE      |         |
| tableName           |          1 | idx_statusCode               |            1 | statusCode                 | A         |           2 |     NULL | NULL   |      | BTREE      |         |
+--------------------+------------+-------------------------------+--------------+---------------------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

解释输出：

```
+----+-------------+-----------+-------+----------------------------------+-------------------+---------+------+-------+----------+-------------+
| id | select_type | table     | type  | possible_keys                    | key               | key_len | ref  | rows  | filtered | Extra       |
+----+-------------+-----------+-------+----------------------------------+-------------------+---------+------+-------+----------+-------------+
|  1 | SIMPLE      | tableName | range | idx_otherID3,idx_dateStartCol | idx_dateStartCol | 3       | NULL | 66875 |    75.00 | Using where |
+----+-------------+-----------+-------+----------------------------------+-------------------+---------+------+-------+----------+-------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:07:39.993

如果这确实是您的查询（而不是相同的简化版本），那么这应该可以达到最佳结果：

```
 CREATE INDEX table_ndx on tableName( otherID3, dateStartCol, mainID); 
```

第一个索引条目意味着第一个匹配`WHERE`非常快；这同样适用于`dateStartCol`。第三个字段非常小，不会显着降低索引速度，但允许在索引中立即找到您需要的数据，而根本不需要表访问。

重要的是键在*同一个*索引中。在`EXPLAIN`您发布的帖子中，每个键都在自己的索引中，因此即使 MySQL 选择最佳索引，性能也不会最佳。我会尝试使用更少的索引，因为它们也有成本（无耻的插件：[索引实际上会降低 SELECT 性能吗？](https://stackoverflow.com/questions/11361510/can-indices-actually-decrease-select-performance/11361670#11361670)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:51:48.450

如果这是一个经常性或重要的查询，则创建一个多列索引：

```
CREATE INDEX index_name ON tableName (otherID3, dateStartCol) 
```

删除未使用的索引，因为它们会使表更改更加昂贵。

顺便说一句，您不需要两个单独的日期和时间列。然后你可以在一个`datetime`或`timestamp`类型中组合。少一列和少一索引。

`explain`输出显示它选择了`dateStartCol`索引，因此您可以尝试我上面建议的相反方法：

```
CREATE INDEX index_name ON tableName (dateStartCol, otherID3) 
```

请注意，查询的 dateStartCol 条件仍将获得 75% 的行，因此在使用该单个索引时没有太大改进（如果有的话）。

有多独特`otherID3`？如果重复的次数不多，`otherID3`您可以[提示](http://dev.mysql.com/doc/refman/5.5/en/index-hints.html)引擎使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:01:16.177

首先尝试添加正确的密钥。似乎 dateStartCol 比 otherID3 更具选择性

```
ALTER TABLE tableName ADD KEY idx_dates(dateStartCol, dateStartCol) 
```

其次 - 请确保通过将 LIMIT 子句添加到 SELECT 来仅选择所需的行。这将提高查询。试试这样：

SELECT SQL_NO_CACHE mainID FROM tableName WHERE otherID3=19 AND dateStartCol >= '2012-08-01' AND dateStartCol <= '2012-08-31' LIMIT 10;

还请确保您的 MySQL 已正确调整。您可能需要检查 key_buffer_size 和 innodb_buffer_pool_size，如[http://astellar.com/2011/12/why-is-stock-mysql-slow/中所述](http://astellar.com/2011/12/why-is-stock-mysql-slow/)

# c# - 保存 XDocument 而不将其存储在内存中

> ID：12912895
> 
> 赞同：2
> 
> 时间：2012-10-16T10:41:15.567
> 
> 标签：c#, xml, linq-to-xml

我有一个处理`XML`文件的类。它可以工作，但问题是，一切都在`RAM`. 我需要做一些事情（比如使用`XmlWriter`类）以`HDD`在创建新`XML`文件时保存它（数据非常大，这就是原因）。

如何以最好的方式做到这一点？我希望没有必要更改`XDocument`为`XmlDocument`：/

**例如**- 我有类似`XML`下面的结构，我想添加一个节点，将其保存到文件中，处理元素，然后创建一个新节点，保存它......等等。

```
<root>
   <element no='1' />
   <element no='2' />
   <element no='3' />
   <element no='4' />
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:49:48.640

我自己还没有这样做，但[这篇文章](http://james.newtonking.com/archive/2007/12/11/linq-to-xml-over-large-documents.aspx)应该会有所帮助，是的，您可以继续使用 XDocument。

来自文章：

> 第二个改进是 LINQ to XML 将文档方法与 XmlReader 方法结合起来的能力。使用静态方法 XNode.ReadFrom，它接受一个 XmlReader 并将返回一个读取器当前位置的 XNode 对象，我们可以一个一个地创建 XNode 元素，并根据需要处理它们。您仍然没有将整个文档加载到内存中，但是您可以轻松使用文档。

在文章中，作者谈论的是从文档中**读取**，而您谈论的是**写作**。但是，我认为这里的关键是***[XNode 类](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.aspx)***，它也有一个**WriteTo**方法（huzzah！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:47:02.607

您可以通过 XmlWriter 保存 XDocument：

```
using (var xw = XmlWriter.Create(...)) 
{
    var xDoc = new XDocument(...);
    xDoc.Save(xw);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T10:47:06.413

您可以只使用*Save*方法，请参阅[msdn](http://msdn.microsoft.com/en-us/library/bb345830.aspx)

# android - Eclipse 按钮 ，如 Step in、Step out、resume 等。不起作用

> ID：12912896
> 
> 赞同：27
> 
> 时间：2012-10-16T10:41:18.887
> 
> 标签：android, eclipse

我正在调试我的代码，但调试工具不可点击（即步入、退出、恢复等）。我可能不小心更改了设置，但我不知道在哪里重置它。

我是使用 Eclipse 和 android 的新手，请帮助我

![调试按钮](../Images/95904dc770012b460aa7b513f887792d.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-17T06:22:16.937

在“调试”透视图中，有一个“调试”视图显示正在调试的应用程序的线程： ![Debug 透视图中的 Eclipse Debug 视图](../Images/11af53596e7e4e73366aa8b029ed3ab7.png)

右上角有一个小菜单，带有“显示调试工具栏”选项。选择那个，等等：

![Debug 透视图中的 Eclipse Debug 视图，其中 Debug Toolbar 可见](../Images/e1fc068323e49384bdbf39a598eff26c.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-09T14:35:39.690

有时它有助于清理 Eclipse 工作区——只需使用 -clean 启动 Eclipse，调试按钮就会再次工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:47:30.293

窗口 -> 打开透视图 -> 调试。你去吧。

当您在调试模式下运行项目时，它通常会自行打开。您可以通过单击 F11 或单击导航栏中运行（播放）按钮左侧的错误/昆虫图标来执行此操作，您提供了屏幕截图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T00:47:10.127

如果任何监视表达式的计算时间过长，则在计算过程中，那些提到的按钮将显示为灰色。在这种情况下，删除所有监视表达式会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-04T12:44:48.847

您可能会看到断点符号是双线而不是点。

点击：

> 运行 > 跳过所有断点

在此之后，您将看到断点图标恢复正常并且您的问题已解决。

# ruby-on-rails - 查看代码更改时使缓存条目无效的好方法？

> ID：12912910
> 
> 赞同：2
> 
> 时间：2012-10-16T10:42:08.900
> 
> 标签：ruby-on-rails, caching

我正在使用 Rails 3.2 并在更改一段视图代码时寻找可靠的使缓存条目无效的方法。在[本文中](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)，我看到 37signals 为缓存键添加了版本字符串的前缀，该版本字符串在每次视图代码更改时都会更改。

例如，如果我更改`All my...`为`My...`

```
<%= cache ["v1", project] do %>
  <p>All my todo lists:</p>
  [...]
<% end %> 
```

我会确保缓存条目通过更改`v1`为无效`v2`

```
<%= cache ["v2", project] do %>
  <p>My todo lists:</p>
  [...]
<% end %> 
```

有没有更可靠的方法来实现这一目标？我担心`vX`在更改从缓存块内部调用的部分或帮助代码时，我们会忘记更新这些字符串前缀。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T11:18:15.307

您可以使用[cache_digest](https://github.com/rails/cache_digests)。它完全符合您的需要：在视图更改时自动使缓存片段无效。这样您就不需要手动跟踪每个视图版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T02:43:12.773

您实际上不需要手动执行此操作。我不确定是哪个版本的 Rails 引入了这一点，但是当您使用`cache`视图助手时，它包含您正在呈现的视图的摘要，因此如果视图发生更改，它将使缓存无效。您可以查看[有关片段缓存的 Rails 文档以](https://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)获取更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T11:24:26.720

```
<%= cahe ['todo', project] do %>
.
. 
```

在控制器中，更新后

```
def update
.
.
if @project.update_attributes(params[:project)
  expire_fragment ['todo', @project] 
  render 'something' 
```

在我的系统中，我可以在日志中看到
Write fragment views/show/reports/46-20121016112032 (3.0ms) on report show
next response
Read fragment views/show/reports/46-20121016112032 (0.2ms)
end on report#update
Expire片段视图/显示/报告/46-20121016064919 (1.2ms)

# c# - 另存为使用 EPPlus？

> ID：12912912
> 
> 赞同：22
> 
> 时间：2012-10-16T10:42:22.617
> 
> 标签：c#, epplus

有谁知道如何使用 package.Saveas 功能？

```
package.SaveAs(tempFolderPathAlt + saveas + ".xlsx"); 
```

目前，这以红色下划线显示以下错误：

> 'OfficeOpenXml.ExcelPackage.SaveAs(System.IO.Stream)' 的最佳重载方法匹配有一些无效参数

目前我正在以下列方式保存文件。

```
FileStream aFile = new FileStream(tempFolderPathAlt + saveas + ".xls",    FileMode.Create);
byte[] byData = package.GetAsByteArray();
aFile.Seek(0, SeekOrigin.Begin);
aFile.Write(byData, 0, byData.Length);
aFile.Close(); 
```

但是这样包保持打开状态，我无法使用它使用过的文件。

另存为将正确关闭包，但它不接受我的文件路径。

* * *

**编辑**

我试过这个：

```
using (FileStream aFile = new FileStream(tempFolderPathAlt + saveas + ".xlsx", FileMode.Create))
{
    byte[] byData = package.GetAsByteArray();
    aFile.Seek(0, SeekOrigin.Begin);
    package.SaveAs(aFile);
    //aFile.Write(byData, 0, byData.Length);
    aFile.Close();
} 
```

但是得到以下错误？

包对象已关闭和处置，因此无法对此对象或在此包的一部分上打开的任何流执行操作。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-14T09:47:50.033

**在您调用任何函数** `GetAsByteArray`, `Save`, `SaveAs`. 这就是你收到消息的原因

> *包对象已关闭和处置，因此无法对此对象或在此包的一部分上打开的任何流执行操作。*

解决方案是在保存后调用`Load`函数继续处理 excel 文件。或者，如果您只想同时获得 ByteArray 和 FileOutput，我敢肯定它们都是相同的。

将文件保存到磁盘后，您可以读取数据：

```
string path = @"C:\test1.xlsx";
Stream stream = File.Create(path);
package.SaveAs(stream);
stream.Close();

byte[] data = File.ReadAllBytes(path); 
```

或者您可以在获取 ByteArray 后将数据保存到磁盘：

```
byte[] data = package.GetAsByteArray();

string path = @"C:\test1.xlsx";
File.WriteAllBytes(path, data); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-15T06:21:51.973

我来寻找这个问题的答案，但现有的答案对我来说并不清楚。这是我使用 EPPlus 所做的，并且`System.Windows.Forms`：

```
ExcelPackage xlPackage = new ExcelPackage(xlsTmpFileName)

// Populate the Excel spreadsheet here.

SaveFileDialog sfd = new SaveFileDialog();
using (FileStream fs = new FileStream(sfd.FileName, FileMode.Create))
{
    xlPackage.SaveAs(fs);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-26T07:16:35.713

我不知道从哪个版本开始，但 EPPlus 的`SaveAs`方法接受`FileInfo`. 所以你可以做这样的事情：

```
using (var app = new ExcelPackage(new FileInfo(inputPath)))
{
    //process
    app.SaveAs(new FileInfo(outputPath));
} 
```

与`Save`方法`SaveAs`方法不同，如果文件名已经存在，方法也会**覆盖文件。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:50:41.773

`SaveAs`将接受您的`aFile`流。

您可以通过查看函数签名自己找出这些内容：`SaveAs(System.IO.Stream)`. 它需要一个`Stream`. 传递 a`string`不可能编译，所以你必须以某种方式弥补一个有用的`Stream`（你做了）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-10T15:35:57.057

摆脱多余的`package.GetAsByteArray`电话，你应该解决它。

我刚跑：

```
using (FileStream aFile = new FileStream(@"C:\Temp\asdf.xlsx", FileMode.Create))
{
    aFile.Seek(0, SeekOrigin.Begin);
    package.SaveAs(aFile);
    aFile.Close();
}

// See here - I can still work with the spread sheet.
var worksheet = package.Workbook.Worksheets.Single(); 
```

# mobile - 移动设备上 Twitter Bootstrap 导航菜单栏上的平滑动画

> ID：12912913
> 
> 赞同：1
> 
> 时间：2012-10-16T10:42:23.510
> 
> 标签：mobile, twitter-bootstrap

我怎样才能使导航菜单折叠和展开流畅的动画而不是混蛋？请在小分辨率上查看 www.mobilewebbestpractices.com/index.html，看看我想要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:09:05.460

它缓慢的原因是系统无法足够快地绘制帧以使其成为流畅的动画。

我发现这个问题的解决方案是完全停止使用动画。

您可以尝试类似于以下的代码...

```
$(function() {
  $('.btn.btn-navbar').live('click', function() {
    $('.nav-collapse').toggle();
  });
}); 
```

# mysql - MySQL 查询优化 - 加入？

> ID：12912914
> 
> 赞同：1
> 
> 时间：2012-10-16T10:42:30.713
> 
> 标签：mysql, sql, join, query-optimization

适合所有 MySQL 专家的 :-)

我有以下查询：

```
SELECT o.*, p.name, p.amount, p.quantity 
FROM orders o, products p 
WHERE o.id = p.order_id AND o.total != '0.00' AND DATE(o.timestamp) BETWEEN '2012-01-01' AND '2012-01-31' 
ORDER BY o.timestamp ASC 
```

*   订单表 = 80,900 行
*   产品表 = 125,389 行
*   o.id 和 p.order_id 被索引

查询大约需要 6 秒才能完成 - 这太长了。我正在寻找一种优化它的方法，可能使用临时表或不同类型的连接。恐怕我对这两个概念的理解非常有限。

谁能建议我优化此查询的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:43:56.440

我不是 MySQL 专家（更多 SQL Server），我认为你最好在 o.timestamp 上有索引，你需要像这样重写你的查询

```
o.timestamp >= '2012-01-01' and o.timestamp <= '2012-01-31' + INTERVAL 1 DAY 
```

逻辑是 - 如果您比较列和常量上的某些表达式，索引将不起作用。您需要比较列和常量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T10:51:21.317

1.  使用[解释](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)指示如何优化查询。我建议从 Total 和 TimeStamp 的索引开始

2.  您可能会发现删除该`date`功能可以提高性能。

3.  您应该使用现代语法。

例如。

```
SELECT o.*, p.name, p.amount, p.quantity  
FROM orders o
     inner join products p  
     on o.id = p.order_id 
WHERE o.total != '0.00' 
AND o.timestamp BETWEEN '2012-01-01' AND '2012-01-31 23:59'  
ORDER BY o.timestamp ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:22:28.133

首先，我会使用不同风格的语法。 `ANSI-92`已经有 20 年的时间了，许多 RDBMS 实际上建议不要使用您使用过的表示法。在这种情况下，这不会有什么不同，但出于多种原因，这确实是一个非常好的做法*（我会让你自己调查并做出决定）*。

***最终答案和示例语法：***

```
SELECT
  o.*, p.name, p.amount, p.quantity  
FROM
  orders
INNER JOIN
  products
    ON orders.id = products.order_id 
WHERE
      orders.timestamp >= '2012-01-01'
  AND orders.timestamp <  '2012-02-01'
  AND orders.total     != '0.00' 
ORDER BY
  orders.timestamp ASC 
```

由于`orders`表格是您进行初始过滤的表格，因此这是开始进行优化的好地方。

与`DATE(o.timestamp) BETWEEN x AND y`您一起成功获得一月份的所有日期和时间。但这需要对表中的***每一行***`DATE()`调用该函数*（类似于 RBAR 的含义）*。RDBMS 无法*看穿*功能，*只知道*如何避免浪费时间。相反，我们需要通过重新安排数学来进行优化，从而不需要我们正在过滤的字段上的函数。*`orders`*

 ***```
 orders.timestamp >= '2012-01-01'
AND orders.timestamp <  '2012-02-01' 
```

此版本允许优化器*知道*您想要一个彼此连续的日期块。这称为范围搜索。它可以使用索引非常快速地找到适合该范围的第一条记录和最后一条记录，然后挑选出其中的每条记录。这避免了检查所有不适合的记录，甚至避免检查范围中间的所有记录；只需要寻找边界。

假设所有记录都按日期排序，并且优化器可以看到这一点。为此，您需要一个索引。考虑到这一点，您似乎可以使用两个基本的覆盖索引：
- `(id, timestamp)`
-`(timestamp, id)`

第一个是我看到人们使用最多的东西。但这迫使优化器分别`timestamp`为每个进行范围搜索`id`。而且由于每个`id`可能都有不同的`timestamp`价值，因此您一无所获。

第二个索引是我推荐的。

现在，优化器可以非常快地完成查询的这一部分……

```
SELECT
  o.*
FROM
  orders
WHERE
      orders.timestamp >= '2012-01-01'
  AND orders.timestamp <  '2012-02-01'
ORDER BY
  orders.timestamp ASC 
```

碰巧的是，甚至`ORDER BY`已经使用建议的索引进行了优化。它已经按照您希望输出数据的顺序。加入后无需重新排序所有内容。

然后，为了满足`total != '0.00'`要求，仍然检查范围内的每一行。但是您已经将范围缩小到如此之多，以至于这可能会很好。 *（我不会深入探讨，但您可能会发现在 MySQL 中使用索引来优化它**和**范围搜索是不可能的`timestamp`。）*

然后，你有你的加入。这是由您已经拥有的索引优化的`(products.order_id)`。对于上面的片段挑选出的每条记录，优化器可以进行索引搜索并非常快速地识别匹配的记录。

这一切都假定，在绝大多数情况下，每个订单行都有一个或多个产品行。例如，如果只有极少数订单有任何产品行，那么首先挑选出感兴趣的产品行可能会更快；本质上是查看以相反顺序发生的连接。

优化器实际上会为您做出决定，但知道它正在这样做很方便，然后提供您估计对它最有用的索引。

您可以检查解释计划以查看是否正在使用索引。如果没有，您的帮助尝试将被忽略。可能是因为数据的统计表明不同的加入顺序更好。如果是这样，您可以提供索引来帮助该连接顺序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:49:44.353

**选择 *：**

如果表的架构发生变化，选择所有带有 * 通配符的列将导致查询的含义和行为发生变化，并可能导致查询检索到过多的数据。

**!= 运算符是非标准的：**

改为使用 <> 运算符来测试不等式。

**不使用 AS 关键字的别名：** 在列或表别名中显式使用 AS 关键字，例如“tbl AS alias”，比隐式别名（例如“tbl alias”）更具可读性。***

# internet-explorer - IE 8 一小时后无法显示页面

> ID：12912923
> 
> 赞同：1
> 
> 时间：2012-10-16T10:42:40.527
> 
> 标签：internet-explorer, struts2

我使用 Internet Explorer 8 来测试我的 struts 2 应用程序与 IE7 视图。当某项操作花费超过一小时时，浏览器会显示一条消息或错误：“Internet Explorer 无法显示该网页”。如果操作不到一小时，一切都会好起来的。Mozilla-Firefox 没有出现这个问题。

任何想法为什么 IE 这样做，拜托？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:52:23.227

从这篇[文章](http://support.microsoft.com/kb/181050)

> Internet Explorer 对服务器返回数据施加了超时限制。默认情况下，超时限制如下：
> 
> [...]
> 
> Internet Explorer 7 和**8：60 分钟**
> 
> 当服务器遇到问题时，Internet Explorer 不会无休止地等待服务器返回数据。

# android - 如果我的适配器为空，如何在 Listview 中显示 emptyview？

> ID：12912924
> 
> 赞同：0
> 
> 时间：2012-10-16T10:42:40.973
> 
> 标签：android, android-listview, android-asynctask, android-adapter

我想在我的列表视图中显示一个按钮，以防我没有数据可以通过自定义数组适配器填充列表。如果我有数据并且我的列表视图被数据项填充，那么一切正常，但是如果我没有数据项显示列表视图应该显示 ID 为“@android:id/empty”的 LinearLayout，但它从未显示出来，我的应用程序在这个阶段崩溃了。在我的*FavoriteStudents.java*类文件中，我定义了一个 AsyncTask 。在*doInBackground*方法中我检查如果我的手机内存中存在最喜欢的文件来为列表视图创建适配器，如果没有，则停止 AsyncTask 并仅使用一个按钮显示列表视图。从 doInBackground 方法返回后，它崩溃并显示此错误：

```
10-16 16:06:37.568: E/WindowManager(274): Activity com.example.hellogridview.FavoriteStudets has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44bfea80 that was originally added here
10-16 16:06:37.568: E/WindowManager(274): android.view.WindowLeaked: Activity com.example.hellogridview.FavoriteStudents has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44bfea80 that was originally added here
10-16 16:06:37.568: E/WindowManager(274):   at android.view.ViewRoot.<init>(ViewRoot.java:227)
10-16 16:06:37.568: E/WindowManager(274):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
10-16 16:06:37.568: E/WindowManager(274):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
10-16 16:06:37.568: E/WindowManager(274):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.Dialog.show(Dialog.java:239)
10-16 16:06:37.568: E/WindowManager(274):   at com.example.hellogridview.FavoriteStudents$readingFavFileTask.onPreExecute(FavoriteStudents.java:50)
10-16 16:06:37.568: E/WindowManager(274):   at android.os.AsyncTask.execute(AsyncTask.java:391)
10-16 16:06:37.568: E/WindowManager(274):   at com.example.hellogridview.FavoriteStudents.onCreate(FavoriteStudents.java:34)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.ActivityThread.access$2200(ActivityThread.java:119)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
10-16 16:06:37.568: E/WindowManager(274):   at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 16:06:37.568: E/WindowManager(274):   at android.os.Looper.loop(Looper.java:123)
10-16 16:06:37.568: E/WindowManager(274):   at android.app.ActivityThread.main(ActivityThread.java:4363)
10-16 16:06:37.568: E/WindowManager(274):   at java.lang.reflect.Method.invokeNative(Native Method)
10-16 16:06:37.568: E/WindowManager(274):   at java.lang.reflect.Method.invoke(Method.java:521)
10-16 16:06:37.568: E/WindowManager(274):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-16 16:06:37.568: E/WindowManager(274):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-16 16:06:37.568: E/WindowManager(274):   at dalvik.system.NativeStart.main(Native Method) 
```

**我的xml文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/studentsList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/student_list_selector" >
    </ListView>

    <!-- empty view -->

    <LinearLayout
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/addStudents"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add Students" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

**我的学生适配器**

```
public class StudentsAdapter extends ArrayAdapter<Students> {

    private Context context;
    ImageDownloaderNew imageDownloader;
    ArrayList<Students> students;
    Songs studentsTemp = null;
    int targetWidth = 70;
    int targetHeight = 110;

    public StudentsAdapter (Context context, int textViewResourceId,
            ArrayList<Students> students) {
        super(context, textViewResourceId, songs);
        // TODO Auto-generated constructor stub
        this.context = context;
        this.students= students;
        imageDownloader = new ImageDownloaderNew();
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub

        return students.size();
    }

    @Override
    public Students getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    static class ViewHolder {
        protected TextView studentTitle;
        protected RatingBar studentRating;
        protected TextView studentViews;
        protected ImageView studentImage;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        //My getView code goes here.I have not pasted here
        return convertView;

    }

} 
```

**现在FavoriteStudents.java 类文件**

```
public class FavoriteStudents extends SherlockActivity {

    ListView list;
    StudentsAdapter adapter;
    ArrayList<Students> studentsListArray = new ArrayList<Students>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.students_list);

        new readingFavFileTask().execute(UtilityFuctions.FAV_STUDENTS_FILE_NAME);
    }

    private class readingFavFileTask extends AsyncTask<String, Void, String> {

        ProgressDialog m_dialog = new ProgressDialog(FavoriteStudents.this);

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            // initialize the dialog
            m_dialog.setTitle("Loading...");
            m_dialog.setMessage("Please wait while loading...");
            m_dialog.setIndeterminate(true);
            m_dialog.setCancelable(true);
            m_dialog.show();

        }

        @Override
        protected String doInBackground(String... params) {

            if (!UtilityFuctions.isFileExists(getApplicationContext(),
                    params[0])) {
                // favorite file does not exists
                finish();
                return "fileDoesNotExists";
            }else{
            StudentsListArray = UtilityFuctions.readFavJSONFile(
                    getApplicationContext(), params[0]);
            if (isCancelled())
                finish();
            return null;}
        }

        @Override
        protected void onPostExecute(String result) {
            list = (ListView) findViewById(R.id.studentsList);
            if (result.equals("fileDoesNotExists")) {
                adapter = new StudentsAdapter(FavoriteStudents.this, 1,
                        studentsListArray);
                list.setAdapter(adapter);
                            LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            View myView = inflater.inflate(R.layout.empty_view, null);
                            list.setEmptyView(myView);
                            m_dialog.dismiss();

            } else {
                // Creating a StudentsAdapter and setting it on listview

                adapter = new StudentsAdapter(FavoriteStudents.this, 1,
                        studentsListArray);
                list.setAdapter(adapter);
                m_dialog.dismiss();

                // Click event for single list row
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                                      //onItemClick code goes here

                    }
                });
            }
        }
    }

} 
```

EDIT: @Rolf Smith answer is correct.But The main problem is I am calling finish() in my doInBackground() method which is killing my activity and not showing me the emptyView.So i just remove finish() and everything working perfectly. Thanks EveryOne

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:48:24.287

The empty view (using the android empty id) only works when you use a ListActivity or ListFragment, in this case you have to do the logic your self using the `setEmptyView()` method.

[ListView.setEmptyView()](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView%28android.view.View%29)

and the crash you got is probably because the dialog you have shown is not dismissed when your activity closes. So for example in the onPause method call the dismiss method from the dialog you have shown.

Rolf

**Edit see comments:**

The empty view will be shown with View.GONE and View.VISIBLE this means that you don't need to add it your self etc.

Take a look at this code: And take a good look at the onCreate method.

```
import android.widget.ListView;

public class FavoriteStudents extends SherlockActivity {

    ListView list;
    StudentsAdapter adapter;
    ArrayList<Students> studentsListArray = new ArrayList<Students>();
    private ListView list;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.students_list);
        list = (ListView) findViewById(R.id.studentsList);

        View empty = findViewById(R.id.empty_view);
        list.setEmptyView(empty);

        new readingFavFileTask().execute(UtilityFuctions.FAV_STUDENTS_FILE_NAME);
    }

    private class readingFavFileTask extends AsyncTask<String, Void, String> {

        ProgressDialog m_dialog = new ProgressDialog(FavoriteStudents.this);

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            // initialize the dialog
            m_dialog.setTitle("Loading...");
            m_dialog.setMessage("Please wait while loading...");
            m_dialog.setIndeterminate(true);
            m_dialog.setCancelable(true);
            m_dialog.show();

        }

        @Override
        protected String doInBackground(String... params) {

            if (!UtilityFuctions.isFileExists(getApplicationContext(),
                    params[0])) {
                // favorite file does not exists
                finish();
                return "fileDoesNotExists";
            }else{
            StudentsListArray = UtilityFuctions.readFavJSONFile(
                    getApplicationContext(), params[0]);
            if (isCancelled())
                finish();
            return null;}
        }

        @Override
        protected void onPostExecute(String result) {
            if (result.equals("fileDoesNotExists")) {
                adapter = new StudentsAdapter(FavoriteStudents.this, 1, studentsListArray);
                list.setAdapter(adapter);
                m_dialog.dismiss();

            } else {
                // Creating a StudentsAdapter and setting it on listview

                adapter = new StudentsAdapter(FavoriteStudents.this, 1,
                        studentsListArray);
                list.setAdapter(adapter);
                m_dialog.dismiss();

                // Click event for single list row
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                                      //onItemClick code goes here

                    }
                });
            }
        }
    }

} 
```

# silverlight - 如何在 Silverlight MVVM 中从 View 获取文本框值到 ViewModel？

> ID：12912932
> 
> 赞同：0
> 
> 时间：2012-10-16T10:42:56.820
> 
> 标签：silverlight, mvvm

目前我正在使用 silverlight5 和 MVVM。在 SL5 中，我需要执行以下操作。我在 xaml（设计页面）中有 3 个文本框和 1 个按钮控件以及我的数据网格。

这是设计视图（Xaml）：

```
<UserControl.DataContext>
        <VC:EmployeeListViewModel />
    </UserControl.DataContext>
        <Grid x:Name="LayoutRoot">
        <my:DataGrid x:Name="McDataGrid" ItemsSource="{Binding Employees,UpdateSourceTrigger=PropertyChanged}" Margin="130,151,0,0" Height="137" VerticalAlignment="Top" RowBackground="#AA5D9324" AutoGenerateColumns="True" HorizontalAlignment="Left" Width="193">
        </my:DataGrid>
        <Button Content="Show Message" Width="100" Height="25" Margin="256,75,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <si:CallDataMethod Method="AddEmployeeCommand"/>
                    <si:ShowMessageBox Caption="Thank you"
                                       Message="Thanks for trying the Example"
                                       MessageBoxButton="OK"/>
                    <si:SetProperty TargetName="LayoutRoot" 
            PropertyName="Background" Value="PaleGoldenrod"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button>
     <TextBlock FontWeight="Bold" Height="26" HorizontalAlignment="Left" Margin="47,12,0,0" Name="textBlock1" Text="First Name:" VerticalAlignment="Top" Width="77" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=Employee.Fname}" />
        <TextBlock FontWeight="Bold" Height="25" HorizontalAlignment="Left" Margin="35,44,0,0" Name="textBlock2" Text="Second Name:" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,44,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" />
        <TextBlock FontWeight="Bold" Height="23" HorizontalAlignment="Left" Margin="45,75,0,0" Name="textBlock3" Text="Department:" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,75,0,0" Name="textBox3" VerticalAlignment="Top" Width="120" />
        <!-- Add reference to Microsoft.Expression.Interactions.dll, System.Windows.Interactivity.dll -->
            <!-- Use mvvmxmlns snippet to add i and ei namespace prefixes -->
       </ComboBox> 
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="64,122,0,0" Name="textBlock4" Text="Choose:" VerticalAlignment="Top" FontWeight="Bold" />
</Grid>
</UserControl> 
```

在同一个项目中，我创建了一个名为“ViewModel”的文件夹：在同一个文件夹中，我添加了一个名为：EmployeeListViewModel.cs 的类文件

我的问题是这个。如何将文本框值传递给 viewmodel[EmployeeListViewModel] 并将其插入 Datagrid。

EmployeeListViewModel.cs：

```
public class EmployeeListViewModel:INotifyPropertyChanged 
    {
        public ObservableCollection<Employee> Employees { get; private set; }

        public EmployeeListViewModel()
        {
            Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData ();
        }

        private Employee _SelectedEmployee;
        public Employee SelectedEmployee
        {
            get
            {
                return _SelectedEmployee;
            }
            set
            {
                _SelectedEmployee = value;
                RaisePropertyChanged("SelectedEmployee");
            }
        }

        private Employee _Names;
        public Employee Names
        {
            get
            {
                return _Names;
            }
            set
            {
                _Names = value;
                RaisePropertyChanged("Names");
            }
        }

        public void HandleShowMessage()
        {
           // MessageBox.Show("Hello " + Names + ",Welcome to EventTrigger for MVVM.");

        }
        public RelayCommand _AddEmployeeCommand;
        /// <summary>
        /// Returns a command that show the customer.
        /// </summary>
        public ICommand AddEmployeeCommand
        {
            get
            {
                if (_AddEmployeeCommand == null)
                {
                    _AddEmployeeCommand = new RelayCommand(
                        param => this.AddEmployee(),
                        param => this.CanAddEmployee
                        );
                }
                return _AddEmployeeCommand;
            }
        }

        public bool CanAddEmployee
        {
            get
            {
                 return true;
            }
        }

        public void AddEmployee()
        {
            //Employee newEmployee = new Employee("New1);
            Employee newEmployee = new Employee() **{};**
           --> **Here i have to pass the value.. How is it possible..?**
            Employees.Add(newEmployee);
            SelectedEmployee = newEmployee;
        }

        #region INotifyPropertyChanged
        // [field: NonSerialized]
        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:55:37.283

您必须使用`TwoWay`绑定模式。例如，`Text="{Binding Path=Employee.Fname,Mode=TwoWay}"`。您可以在 MSDN 上阅读有关[Binding.Mode 的](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:32:13.923

不是 100% 确定你是怎么做的？通常我会将网格绑定到所选员工，然后将文本框的值绑定到所选员工的属性。当您更改行时，这些将更新以反映网格中当前选定行的值。因此，您添加了一个新的空白员工，并且在将它们输入到文本框中之前，它将具有空白值。当然，您需要进行一些验证，以确保不会添加大量空白行。

如果我对您想要如何做的理解是正确的，那么文本框中的值与所选行无关，而只是用于添加具有这些值的新员工？为了实现这一点，我建议将文本框绑定到 Viewmodel 上的字符串值。目前，您将它们绑定到似乎实际上并不存在的东西。相反，我会将它们绑定到视图模型上的它们自己的属性，因此：

```
private string _employeeFirstName; 
    public string EmployeeFirstName 
    { 
        get 
        { 
            return _employeeFirstName; 
        } 
        set 
        { 
            _employeeFirstName= value; 
            RaisePropertyChanged("EmployeeFirstName"); 
        } 
    } 
```

然后在 xaml 中绑定到该属性 - 使用 Mode=TwoWay 以便视图模型也接收任何更新

```
<TextBox Height="23" HorizontalAlignment="Left" Margin="130,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=EmployeeFirstName, Mode=TwoWay}" /> 
```

然后在创建新员工时：

```
 public void AddEmployee()    
    {     
        Employee newEmployee = new Employee() {FName = this.EmployeeFirstName};    

        Employees.Add(newEmployee);    
        SelectedEmployee = newEmployee;    
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:57:04.163

我在视图模型中分别创建了三个名为 Fname、Sname、Dept 的属性。

```
private string _fname;
        public string Fname
        {
            get
            {
                return _fname;
            }
            set
            {
                _fname = value;
                RaisePropertyChanged("Fname");
            }
        } 
```

功能如下..

```
public void AddEmployee()    
    {     
        Employee newEmployee = new Employee() {Fname=this.Fname;Sname=this.Sname;Dept=this.Dept};    

        Employees.Add(newEmployee);    
        SelectedEmployee = newEmployee;    
    } 
```

它运作良好..

设计代码是：

```
<TextBlock FontWeight="Bold" Height="26" HorizontalAlignment="Left" Margin="47,12,0,0" Name="textBlock1" Text="First Name:" VerticalAlignment="Top" Width="77" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=Fname,Mode=TwoWay}" />
        <TextBlock FontWeight="Bold" Height="25" HorizontalAlignment="Left" Margin="35,44,0,0" Name="textBlock2" Text="Second Name:" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,44,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" Text="{Binding Path=Sname,Mode=TwoWay}"/>
        <TextBlock FontWeight="Bold" Height="23" HorizontalAlignment="Left" Margin="45,75,0,0" Name="textBlock3" Text="Department:" VerticalAlignment="Top" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="130,75,0,0" Name="textBox3" VerticalAlignment="Top" Width="120"  Text="{Binding Path=Dept,Mode=TwoWay}"/>

<Button Content="Show Message" Width="100" Height="25" Margin="256,75,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <si:CallDataMethod Method="AddEmployee"/>
                    <si:ShowMessageBox Caption="Thank you"
                                       Message="Thanks for trying the Example"
                                       MessageBoxButton="OK"/>
                    <si:SetProperty TargetName="LayoutRoot" 
            PropertyName="Background" Value="PaleGoldenrod"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </Button> 
```

希望对我们有用。。

# android - Android中的加速度计/ GPS

> ID：12912933
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:43:02.823
> 
> 标签：android, gps, accelerometer

我是android的新手，我有一个问题。我上网了很多，以了解如何计算爬楼梯的数量。现在我遇到了加速度计和一些要求我们输入某些值的应用程序，例如胎面、提升等。

GPS是另一种选择。但据我所知，GPS 在室内不起作用。

我只是想知道除此之外还有其他方法可以找到爬楼梯的数量。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:09:35.407

您将需要使用加速度计。没有其他方法可以做到这一点。

查看[如何在 android 中使用加速度计计算步数以](https://stackoverflow.com/questions/6125862/how-to-count-step-using-accelerometer-in-android)获得可能的答案。为避免询问胎面深度和步高，如果您明白我的意思，您可以假设每步一步 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:14:09.323

我会尝试专门为此任务开发计步器算法，请参阅参考一般计步器算法在[Android 加速度计精度（惯性导航）](https://stackoverflow.com/a/7835988/341970)，在室内定位下。

开发计步器需要*大量的实验和调整*，总有办法欺骗你的应用程序。

# php - 阻止除 AJAX 请求外直接访问 PHP 文件？

> ID：12912935
> 
> 赞同：3
> 
> 时间：2012-10-16T10:43:11.633
> 
> 标签：php, ajax

我希望有一个使用 AJAX 访问 PHP 文件的网页`./ajax/file.ajax.php`

麻烦的是，我不希望人们能够在浏览器中输入地址来直接访问该 PHP 文件。

有没有办法让只有 AJAX 请求才能访问该文件？

我可以在 PHP 文件中检查以实现此目的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:44:52.230

如果您使用 jQuery 制作 XHR，它将设置一个自定义 header `X-Requested-With`。您可以检查并确定如何提供您的回复。

```
$isXhr = isset($_SERVER["HTTP_X_REQUESTED_WITH"])
         AND strotlower($_SERVER["HTTP_X_REQUESTED_WITH"]) == "xmlhttprequest"; 
```

然而，这对于欺骗来说是微不足道的。过去，我使用它来决定是渲染整个页面（如果未设置）还是页面片段（如果设置，则注入当前页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:59:47.263

如果您不使用`jQuery`或不感兴趣/您不能使用自定义标头（与`alex`提供的内容一起使用），您可以`POST`使用您的 Ajax 请求简单一些数据，并在该特定文件中检查该数据是否已发送或不。如果您通过`GET`它发送将在地址栏上可见，这就是我建议的原因`POST`。

```
<?php

if (empty($_POST['valid_ajax']))
    header('Location: /');

?> 
```

它并不可靠，因为您可以通过提供手工数据来欺骗它，但是如果您的问题不是那么严重，那总比没有好。

# jquery - Twitter 提要停止工作？

> ID：12912936
> 
> 赞同：1
> 
> 时间：2012-10-16T10:43:13.407
> 
> 标签：jquery, twitter

我在我的网站上使用此代码已经有一段时间了，现在它停止工作了？

我知道这与现在更新的 API 版本有关，但需要知道修复此脚本需要什么？

代码最初来自： [http ://www.queness.com/code-snippet/6495/get-the-latest-twitter-tweet-with-jquery](http://www.queness.com/code-snippet/6495/get-the-latest-twitter-tweet-with-jquery)

```
$(function() {

// set your twitter id
var user = 'quenesswebblog';

// using jquery built in get json method with twitter api, return only one result
$.getJSON('http://twitter.com/statuses/user_timeline.json?screen_name=' + user + '&count=1&callback=?', function(data)      {

    // result returned
    var tweet = data[0].text;

    // process links and reply
    tweet = tweet.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig, function(url) {
        return '<a href="'+url+'">'+url+'</a>';
    }).replace(/B@([_a-z0-9]+)/ig, function(reply) {
        return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
    });

    // output the result
    $("#tweet").html(tweet);
}); 

}); 
```

谢谢，

TJ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:26:18.063

来自 Twitter 总部的坏消息是 url 现在返回[http://twitter.com/statuses/user_timeline.json?screen_name=xxx](http://twitter.com/statuses/user_timeline.json?screen_name=xxx)现在只返回“抱歉，该页面不存在”，从 2012 年 10 月 12 日开始。

您将需要使用[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=xxx&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=xxx&count=2)并修改您的剩余代码，但我相信这将在 2013 年 3 月和您将需要使用 oAuth 进行验证。

高温高压

# php - 安装 phpspec

> ID：12912937
> 
> 赞同：3
> 
> 时间：2012-10-16T10:43:18.067
> 
> 标签：php, phpspec

我确定我错过了一些明显的东西。但我在安装和使用 phpspec 时遇到问题。首先我不知道我应该使用 phpspec 还是 phpspec2。

我尝试过这样安装：- PEAR（不起作用）- git hub（克隆并且可以下载）- composer（似乎我只能安装依赖项）

如果有人知道“傻瓜指南的phpspec”，我将不胜感激。

还是使用 PHPUnit 更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:46:00.680

你有没有看过[http://phpspec.net](http://phpspec.net)？它描述了如何安装 phpspec。PEAR 未列为 phpspec2 的安装方法，并且 pear 通道目前已关闭 phpspec 1.x，因为我们，维护者，不确定是否有现有的用户群证明维护它是合理的。

所以现在，如果你想使用 1.x 或 2alpha，你必须用 composer 安装它。

PEAR 频道关闭了一个多星期，我收到了 3 个请求，包括你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T11:30:57.700

如果您使用 composer 安装 phpspec，它当然只是一个依赖项，因为首先您要测试您的实际应用程序，其次您使用 composer 安装的所有内容都是对您的应用程序的依赖项。

Phpspec 傻瓜指南：[http ://www.phpspec.net/docs/introduction.html#getting-started](http://www.phpspec.net/docs/introduction.html#getting-started)

# c# - 如果我在 C# 中重载了添加和删除，为什么我不能引发或调用事件

> ID：12912941
> 
> 赞同：3
> 
> 时间：2012-10-16T10:43:40.147
> 
> 标签：c#, .net, event-handling

从 Josh Smith 文章中复制[RelayCommand](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)的代码时，我复制了以下代码

```
public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
} 
```

然后在阅读[了关于 SO 的这个答案](https://stackoverflow.com/a/6635754/293712)之后，我还在我的课堂上复制了来自 Prism 的 DelegateCommand 类的代码。

```
protected void NotifyCanExecuteChanged()
{
    if (CanExecuteChanged != null)
    {
        CanExecuteChanged(this, EventArgs.Empty);
    }
} 
```

但是他在 NotifyCanExecuteChanged 方法中给了我一个错误

> 事件 'CanExecuteChanged' 只能出现在 += 或 -= 的左侧

如果我从事件中删除添加和删除重载，则不会出现此错误。有人可以帮我理解这背后的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:54:59.367

使用类似字段的事件（这是没有`add`/的简单表单的名称`remove`，然后当您执行`if(CanExecuteChanged != null)`or时`CanExecuteChanged(this, ...)`，`CanExecuteChanged`是指**支持字段**，这是类型的委托字段`EventHandler`。您可以调用委托字段。但是，在您的示例中并非如此，因为没有明显的东西可以调用。当然没有本地字段，并且转发的事件（ ）*本质*`CommandManaged.RequerySuggested`上并不公开任何“调用”功能。

 *基本上，要使其工作，您需要访问调用机制。最常见的是，我希望采取以下形式：

```
CommandManager.OnRequerySuggested(); 
```

但是*如果*有一个方法可以调用这个事件（并且不需要），它可以被称为*任何东西*。

（这`On*`是“引发此事件”API 的常见模式，如果它是多态的，则加倍）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:54:00.623

似乎您的类继承自声明事件的类。事件只能在基类中直接引发，不能在继承类中引发。

如果要在继承类中引发它，请在基类中编写以下方法并从继承类中调用它：

```
protected void RaiseMyEvent()
{
if (MyEvent != null)
{
MuEvent(this, args)
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:51:48.077

我认为您想要[CommandManager.InvalidateRequerySuggested](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx)。它强制`RequerySuggested`引发事件。*

# javascript - jQuery 记忆游戏：if $('.opened').length; ==数字运行功能。

> ID：12912949
> 
> 赞同：1
> 
> 时间：2012-10-16T10:44:25.800
> 
> 标签：javascript, jquery

`a.heart`所以我正在尝试更改`td.opened`== 24 的时间。我不确定发生了什么问题，因为什么也没发生。

HTML：

```
<body>
<header>
<div id="headerTitle"><a href="index.html">&lt;html<span class="heart">&hearts;</span>ve&gt;</a>
            </div>
            <div id="help">
                <h2>?</h2>
                <div id="helpInfo">
                    <p>How many tiles are there? Let's see [calculating] 25...</p>
                </div>
            </div>
        </header>
    <div id="reward">
        <div id="rewardContainer">
            <div id="rewardBG" class="heart">&hearts;
            </div>
            <p>OMG, this must be luv<br><a href="index.html" class="exit">x</a></p>
        </div>
    </div>  
    <div id="pageWrap">
            <div id="mainContent">
            <!-- DON'T BE A CHEATER !-->
                <table id="memory">
                    <tr>
                        <td class="pair1"><a>&Psi;</a></td>
                        <td class="pair2"><a>&para;</a></td>
                        <td class="pair3"><a>&Xi;</a></td>
                        <td class="pair1"><a>&Psi;</a></td>
                        <td class="pair4"><a >&otimes;</a></td>
                    </tr>
                    <tr>
                        <td class="pair5"><a>&spades;</a></td>
                        <td class="pair6"><a >&Phi;</a></td>
                        <td class="pair7"><a>&sect;</a></td>
                        <td class="pair8"><a>&clubs;</a></td>
                        <td class="pair4"><a>&otimes;</a></td>
                    </tr>
                    <tr>
                        <td class="pair9"><a>&Omega;</a></td>
                        <td class="pair2"><a>&para;</a></td>
                        <td id="goal">
                <a href="#reward" class="heart">&hearts;</a>
                        </td>
                        <td class="pair10"><a>&copy;</a></td>
                        <td class="pair9"><a>&Omega;</a></td>
                    </tr>
                    <tr>
                        <td class="pair11"><a>&there4;</a></td>
                        <td class="pair8"><a>&clubs;</a></td>
                        <td class="pair12"><a>&dagger;</a></td>
                        <td class="pair6"><a>&Phi;</a></td>
                        <td class="pair11"><a>&there4;</a></td>
                    </tr>
                    <tr>
                        <td><a class="pair12">&dagger;</a></td>
                        <td><a class="pair5">&spades;</a></td>
                        <td><a class="pair10">&copy;</a></td>
                        <td><a class="pair3">&Xi;</a></td>
                        <td><a class="pair7">&sect;</a></td>
                    </tr>
                </table>
            <!-- DON'T BE A CHEATER !-->
            </div>
    </div> <!-- END Page Wrap -->
    <footer>
        <div class="heartCollection">
            <p>collect us if u need luv:<p>
            <ul>
                <li><a id="collection1">&hearts;</a></li>
                <li><a id="collection2">&hearts;</a></li>
                <li><a id="collection3">&hearts;</a></li>
                <li><a id="collection4">&hearts;</a></li>
                <li><a id="collection5">&hearts;</a></li>
                <li><a id="collection6">&hearts;</a></li>
            </ul>
        </div>
        <div class="credits">with love from Popm0uth ©2012</div>
    </footer>

</body>
</html> 
```

Javascript：

```
var thisCard = $(this).text();
var activeCard = $('.active').text();
var openedCards = $('.opened').length;

$(document).ready(function() {

$('a.heart').css('color', '#CCCCCC');
$('a.heart').off('click');

function reset(){
    $('td').removeClass('opened');
    $('a').removeClass('visible');
    $('td').removeClass('active');
};
    $('td').click(openCard);

    function openCard(){
        $(this).addClass('opened');
        $(this).find('a').addClass('visible');
        if ($(".active")[0]){ 
                if  ($(this).text() != $('.active').text()) {
                    setTimeout(function(){
                        reset();
                    }, 1000); 
                }       
                else {
                $('.active').removeClass('active');
                }
        }
        else {
            $(this).addClass("active");
        }
        if (openedCards == 24){
            $(".active").removeClass("active");
            $("a.heart").css('color', '#ff63ff');
            $("a.heart").off('click');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:45:34.310

那是因为`$('.opened').length`在您的代码中只计算一次。当您更改元素的类时，集合不会实时更新。当然，openCards 的数量不能自行改变。

代替

```
if (openedCards == 24){ 
```

经过

```
if ($('.opened').length == 24){ 
```

每次都计算它。

# crystal-reports - Crystal Reports 2008 中的单个条形图需要多个页面

> ID：12912954
> 
> 赞同：7
> 
> 时间：2012-10-16T10:44:43.463
> 
> 标签：crystal-reports, crystal-reports-2008

我正在创建一个条形图，其中的值是 AVE_ZSCORE 字段的最大值，并将其设置为 PARTICIPANT_CODE 字段的“更改时”。在任何给定的情况下，此图表中最多可以有 250 条记录，因此我需要将图表拆分为多个页面。然而，这个记录数是动态的，可以在 150 到 250 条记录之间。

我已经在这个线程[http://www.tek-tips.com/viewthread.cfm?qid=1257385](http://www.tek-tips.com/viewthread.cfm?qid=1257385)中尝试了解决方案，并且我已经按照我的理解尽可能地遵循了说明（请记住，我很新水晶报表）。我创建了一个公式，将其插入到详细信息部分，然后将其隐藏，然后在该公式上插入一个组，并将图表插入组页脚部分。我目前使用的公式（我称之为“图表”）在 4 条记录上进行测试是：

同时阅读记录；numbervar cnt := cnt + 1; 如果 cnt 在 1 到 2 中则为 1 否则如果 cnt 在 3 到 4 中则为 2

我的问题是，它的输出导致以下 3 个图表，而不是 2 个图表，每个图表包含 2 条记录：

1.  一组输出为 0.00，在一个图中包含所有 4 条记录（B2、BB、KK、MM）
2.  1.00 的组输出，其中只有一条记录 (BB)

3.  2.00 的组输出，它也只有一条记录，与上一张图 (BB) 的记录相同

如果我将公式更改为如下所示：

同时阅读记录；numbervar cnt := cnt + 1; 如果 cnt 在 1 到 4 然后 1

然后输出变为

1.  一组输出为 0.00，在一个图中包含所有 4 条记录（B2、BB、KK、MM）
2.  一组输出 1.00，有一条记录 (BB)

所以首先，我不明白我正在使用的公式或它是如何工作的，其次我不知道如何让它工作，这样我就可以轻松地指定每个图表的列数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T13:37:14.657

不幸的是，如果不完全了解您的报告布局，就很难说些什么。一些截图会很容易。由于尚未具体说明，我希望您的报告中只有一个（提到的）组。

为了实现您的目标，您应该根据不同的组值多次渲染图表。这就是组的详细信息部分的呈现方式。不是页脚或页眉。由于无法将图表添加到详细信息部分，因此应创建额外的虚拟组。所以结果将有2组：

*   外部组 ( *#1* ) 将基于您的公式字段并且没有页眉/页脚
*   内部组 ( *#2* ) 将用于在页眉或页脚中显示图表

*第 2 组*可以基于与*第 1 组*相同的公式（或任何其他公式/字段，没关系）。

* * *

顺便说一句，而不是像在您的代码中那样手动计算计数

```
 WhileReadingRecords; numbervar cnt := cnt + 1; 
```

您可以使用*Running total fields* ，在您想要控制的任何字段上使用汇总*计数类型。*此类字段非常可定制，因此您会喜欢它们。

# android - 是否可以在 ActionBar 上使用 TransitionDrawable？

> ID：12912956
> 
> 赞同：3
> 
> 时间：2012-10-16T10:44:46.110
> 
> 标签：android, android-actionbar, android-animation, transitiondrawable

我正在尝试使用 TransitionDrawable 在操作栏上做一些彩色动画。

我正在尝试的代码非常简单，在 onCreate 期间，我将可绘制的过渡作为操作栏背景：

```
Drawable d = getResources().getDrawable(R.drawable.actionbar);
actionbarDrawable = new TransitionDrawable(new Drawable[] { d, d });
getActionBar().setBackgroundDrawable(actionbarDrawable); 
```

然后在事件中，我替换了 TransitionDrawable 的第二个可绘制对象并要求对其进行动画处理。

```
 actionbarDrawable.setDrawableByLayerId(1, d);
    actionbarDrawable.startTransition(666); 
```

我已经在我的活动的 RelativeLayout 上尝试了相同的代码，它似乎工作正常，任何想法为什么 ActionBar 不想合作以及如何使其工作？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-17T18:08:07.190

试试看：

在值/字符串中：

```
<color name="blue">#FF4682B4</color>
<color name="red">#FFC30F0F</color> 
```

在你的课堂上：

```
ColorDrawable blue = new ColorDrawable(getResources().getColor(R.color.blue));
ColorDrawable red = new ColorDrawable(getResources().getColor(R.color.red));
ColorDrawable[] color = {blue, red}; 
TransitionDrawable trans = new TransitionDrawable(color);
actionBar.setBackgroundDrawable(trans);
trans.startTransition(500); 
```

# javascript - Rails - jQuery/AJAX 不刷新部分

> ID：12912963
> 
> 赞同：1
> 
> 时间：2012-10-16T10:45:02.950
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, partial

我有一个显示部分事件的时间线视图 - 因此您可以直接在时间线视图上 CRUD 事件。我现在要做的是拥有它，以便当您单击事件旁边的“删除”时，删除部分刷新，以便用户可以看到该事件已被删除。我似乎无法让它工作 - 当用户单击删除时，事件确实被删除，但部分不会刷新。您必须刷新页面才能获得更新的部分。

另外，请有人告诉我如何请求“我的时间线” div 的更新内容，以便删除的事件也不会出现在那里？谢谢！

时间线/节目：

```
<div id="my-timeline"></div>
<div id="delete_events">
    <%= render :partial => "delete_events", :locals => { :events => current_user.events }%>     
</div> 
```

时间线/_delete_events.html.erb：

```
<%= button_to 'Delete', event, confirm: "Are you sure?", method: :delete, :remote => true %> 
```

事件/删除.js.erb：

```
$('#delete_events').html('<%= escape_javascript( render :partial => "/timelines/delete_events", :locals => { :events => current_user.events } ) %>'); 
```

事件控制器：

```
def destroy
    @event = Event.find(params[:id])
    @event.destroy

    respond_to do |format|
      format.html { redirect_to current_user.timeline, notice: 'Event was successfully removed.' }
      format.json { head :no_content }
      format.js
    end
  end 
```

用于生成时间线的 javascript（仅暂时位于此处！）到 my-timeline div 中：

```
<script>
            $(document).ready(function() {
                createStoryJS({
                    type:       'timeline',
                    width:      '820',
                    height:     '600',
                    source:     '/users/<%= current_user.id %>/events.json?callback',
                    embed_id:   'my-timeline',
                    font:       'Euphoria-Droid',
                    debug:      true,
                    gmap_key:   'foo',
                    maptype:    'HYBRID'
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:51:59.897

我认为你应该从

```
 events/delete.js.erb

    to

 events/destroy.js.erb 
```

并通过在 destroy.js.erb 中写入 alert("ok") 检查控件来这里

希望它有效

# ios - 无法构建或编译 phonegap 2.1

> ID：12912967
> 
> 赞同：0
> 
> 时间：2012-10-16T10:45:12.887
> 
> 标签：ios, xcode, cordova

系统信息 。Xcode：4.3.3 OSX：10.7.4

我已经下载了 phonegap 2.1（incubator-cordova-ios）。我已经使用文档中提到的命令行代码成功创建了项目。

```
$ ./path/to/cordova-ios/bin/create /path/to/my_new_cordova_project com.example.cordova_project_name CordovaProjectName 
```

我使用下面的代码来构建我的项目。$ /path/to/my_new_cordova_project/cordova/debug

当我尝试调试时，出现以下错误

> /Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m:252:14：错误：使用未声明的标识符 'ABAddressBookCreateWithOptions' [3] if (&ABAddressBookCreateWithOptions != NULL) { ^ /Users/virtusa3/pgt/myproject1 /CordovaLib/Classes/CDVContacts.m:253:24：警告：函数 'ABAddressBookCreateWithOptions' 的隐式声明在 C99 [-Wimplicit-function-declaration,3] addrBook = ABAddressBookCreateWithOptions(NULL, NULL) 中无效；^ /Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m:253:22:{253:24-253:66}：警告：分配给“ABAddressBookRef”的整数到指针转换不兼容（又名“const void * ') 来自 'int' [3] addrBook = ABAddressBookCreateWithOptions(NULL, NULL);*') 需要桥接演员表 [4] CDVContact* xferContact = [[CDVContact alloc] initFromABRecord:(ABRecordRef)[foundRecords objectAtIndex:k]]; ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ /Users/virtusa3/pgt/ myproject1/CordovaLib/Classes/CDVContacts.m:326:97：注意：使用 __bridge 直接转换（所有权不变）[4] CDVContact* xferContact = [[CDVContact alloc] initFromABRecord:(ABRecordRef)[foundRecords objectAtIndex:k] ]; ^_*桥修复它：“/Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m”：{326：97-326：97}：“* _bridge”/Users/virtusa3/pgt/myproject1/CordovaLib/Classes/ CDVContacts.m:326:97：注意：使用 __bridge_retained 使 ARC 对象可用作 +1 'ABRecordRef'（又名 'const void *'）[4] CDVContact*xferContact = [[CDVContact alloc] initFromABRecord:(ABRecordRef)[foundRecords objectAtIndex:k]]; ^ __bridge_retained 修复："/Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m":{326:97-326:97}:"__bridge_retained" /Users/virtusa3/pgt/myproject1/CordovaLib/Classes /CDVContacts.m:338:92:{338:92-338:135}{338:105-338:135}：错误：将 Objective-C 指针类型“id”转换为 C 指针类型“ABRecordRef”（又名“ const void *') 需要桥接演员表 [4] CDVContact*testContact = [[CDVContact alloc] initFromABRecord:(ABRecordRef)[foundRecords objectAtIndex:j]]; ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ /Users/virtusa3/pgt/ myproject1/CordovaLib/Classes/CDVContacts.m:338:93：注意：使用 __bridge 直接转换（所有权不变）[4] CDVContact* testContact = [[CDVContact alloc] initFromABRecord:(ABRecordRef)[foundRecords objectAtIndex:j] ]; ^ _*桥修复它：“/Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m”：{338：93-338：93}：“*_bridge " /Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m:338:93：注意：使用 __bridge_retained 使 ARC 对象可用作 +1 'ABRecordRef'（又名 'const void *'）[4] CDV联系*testContact = [[CDVContact alloc] initFromABRecord:(ABRecordRef)[foundRecords objectAtIndex:j]]; ^ __bridge_retained 修复："/Users/virtusa3/pgt/myproject1/CordovaLib/Classes/CDVContacts.m":{338:93-338:93}:"__bridge_retained" /Users/virtusa3/pgt/myproject1/CordovaLib/Classes /CDVContacts.m:560:21:{560:23-560:67}：警告：从 'int' [3] addressBook = ABAddressBookCreateWithOptions(空，&错误）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:34:41.073

似乎与使用旧版本 Xcode 在 Snow Leopard 上构建的其他人报告的此问题有关： [运行 ./cordova/debug/cordova/emulate 会导致错误”](https://issues.apache.org/jira/browse/CB-1597)

似乎有修复它的计划，但更新到 Mountain Lion 和 Xcode 4.51 将修复它。它对我有用。

# p2p - 请解释 Google talk 作为 p2p 应用程序的工作

> ID：12912971
> 
> 赞同：1
> 
> 时间：2012-10-16T10:45:16.870
> 
> 标签：p2p, google-talk

我正在浏览一些文章，发现聊天客户端主要是p2p。如果 Google Talk 是一个 p2p 客户端，那么它如何将我们的聊天记录保存在 Gmail 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:47:30.203

简单的答案是，音频从一个浏览器流式传输到另一个浏览器，中间没有使用 Jingle 协议的任何服务器。

因此，文本聊天和音频聊天等内容是点对点的，而所有其他功能均由 Google 服务器提供。

他自己聊天使用 Jabber (XMPP)，但对话日志会自动保存到用户 Gmail 帐户中的聊天区域。这意味着聊天涉及三方（您的计算机、您的伙伴计算机和 Google 的 Gmail 服务器集群）

# asp.net-mvc-3 - 我可以提前发布 MVC3 会话吗

> ID：12912974
> 
> 赞同：2
> 
> 时间：2012-10-16T10:45:26.830
> 
> 标签：asp.net-mvc-3, session

目前，MVC3 在用户的 Session 上同步请求。这意味着每次为任何特定的经过身份验证的客户端提供一个请求。有没有一种方法可以从 MVC3 控制器内部更早地释放会话锁？在我的代码中有些地方我已经完成了会话，我很高兴收到另一个请求。

我在某些时候对会话内容感兴趣，因此无会话控制器不起作用。

我想手动释放会话上的锁定以允许处理下一个请求。这可以在不重写大部分 MVC3 会话机制的情况下完成吗？

# c++ - 内联汇编 GCD 不起作用

> ID：12912976
> 
> 赞同：3
> 
> 时间：2012-10-16T10:45:32.360
> 
> 标签：c++, visual-c++, assembly, x86, inline-assembly

我一直在编写一个简单的 c++ 程序，它使用 Assembly 获取 2 个数字的 GCD 并将它们作为我观看的教程中使用的示例输出。我明白它在做什么，但我不明白为什么它不起作用。编辑：应该在运行时添加它，它根本不输出任何东西。

```
#include <iostream>
using namespace std;

int gcd(int a, int b)
{
int result;
_asm
{
    push ebp
    mov ebp, esp
    mov eax, a
    mov ebx, b
looptop:
    cmp eax, 0
    je goback
    cmp eax, ebx
    jge modulo
    xchg eax, ebx
modulo:
    idiv ebx
    mov eax, edx
    jmp looptop
goback:
    mov eax, ebx
    mov esp, ebp
    pop ebp

    mov result, edx
}

return result;
}

int main()
{
cout << gcd(46,90) << endl;
    return 0;
} 
```

我在 32 位 Windows 系统上运行它，任何帮助将不胜感激。编译时出现4个错误：

```
warning C4731: 'gcd' : frame pointer register 'ebp' modified by inline assembly code
warning C4731: 'gcd' : frame pointer register 'ebp' modified by inline assembly code
warning C4731: 'main' : frame pointer register 'ebp' modified by inline assembly code
warning C4731: 'main' : frame pointer register 'ebp' modified by inline assembly code 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:49:39.997

编译器将在函数的开头和结尾为您插入这些或等效指令：

```
push ebp
mov ebp, esp
...
mov esp, ebp
pop ebp 
```

如果您手动添加它们，您将无法通过 访问函数的参数`ebp`，这就是编译器发出警告的原因。

删除这 4 条指令。

另外，开始使用调试器。今天。

# jquery-mobile - 为什么在链接对话框中使用带有 data-native-menu="false" 的选择框会生成导致关闭当前对话框的 url 哈希？

> ID：12912978
> 
> 赞同：0
> 
> 时间：2012-10-16T10:45:33.780
> 
> 标签：jquery-mobile, drop-down-menu, jquery-ui-dialog

我使用链式对话框来收集一些输入数据。每个对话框都有一个选择框、一个下一步按钮和一个弹出菜单，使用户能够跳回到链中当前对话框之前的每个对话框。

在起始页上，一个按钮会打开第一个对话框。当您从选择框中选择一个条目并通过单击下一步按钮转到下一个对话框时，一切正常。通过选择弹出菜单中的条目跳回第一个对话框也可以正常工作。但是在再次单击下一步按钮返回第二个对话框后，在其选择框中选择一个条目会导致关闭对话框并再次显示起始页。

这是为什么？我认为这与哈希中的 ui-state=dialog-URL-adds 有关（[问题 949](https://github.com/jquery/jquery-mobile/issues/949)），[问题 1030](https://github.com/jquery/jquery-mobile/issues/1030)）

我在选择框中使用 data-native-menu="false"。当我使用默认的 data-native-menu="true" 时，一切正常。

JQ V1.8.2
JQM V1.2.0
在FF、Safari中测试

我还在[JQM githup 页面上启动了一个问题单](https://github.com/jquery/jquery-mobile/issues/5177)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:57:16.060

提到的票带来了解决方案。此行为将在下一个版本中修复。[在这里](http://jsbin.com/uzaret/350/edit)您可以测试我的问题，[在这里](http://jsbin.com/uzaret/349/edit)您可以尝试带来下一个版本的解决方案。

顺便说一句：与此同时，您可以使用这段代码来使当前版本工作：

```
$.mobile.pushStateEnabled = false; 
```

# javascript - DOM中添加特定节点的监听器

> ID：12912982
> 
> 赞同：0
> 
> 时间：2012-10-16T10:45:41.887
> 
> 标签：javascript, html, dom

当在 DOM 中添加特定节点时，有什么方法可以通知我？

我有一个适用于所有输入文本字段的功能。当 DOM 被加载时，我使用 getElementByTagName() ，然后使用仅文本的类型属性进行过滤，并将该函数应用于所有这些属性。

但问题是，当有人添加新节点时，必须通知我将该功能应用于新添加的字段。

我想要类似 jQuery live() 函数的东西，但是在 javascript 中。

是否有任何特定的侦听器可以在添加输入标签时收听并得到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:48:04.603

您可以`DOMNodeInserted`为此使用突变事件。

**文档：** [https ://developer.mozilla.org/en-US/docs/DOM/Mutation_events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T11:08:52.473

DOMInserted [Mutation Event](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events)目前已被弃用，因为它的性能问题。因此，请使用 Mutation Observer。我使用 Mutation Observer 在我的一个项目中处理了 DOM 添加、删除、插入、属性和数据更改的 DOM 更改侦听器，效果很好！为了您的进一步实施，这些链接将帮助您：

1.  [http://gabrieleromanato.name/jquery-detecting-new-elements-with-the-mutationobserver-object/](http://gabrieleromanato.name/jquery-detecting-new-elements-with-the-mutationobserver-object/)
2.  [https://github.com/kapetan/jquery-observe](https://github.com/kapetan/jquery-observe)
3.  [是否有 JavaScript/jQuery DOM 更改监听器？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener/11546242#11546242)

# ruby - 为什么 Ruby 模块继承不像类继承那样工作？

> ID：12912983
> 
> 赞同：5
> 
> 时间：2012-10-16T10:45:47.893
> 
> 标签：ruby

假设我有一个`Flight`使用类和实例方法调用的模块。我可以使用 , 或两者将其方法放入一个类`include`中`extend`：

```
class Bat < Mammal
  # Add Flight's class methods to Bat.
  extend Flight

  # Add Flight's instance methods to Bat.
  include Flight
  ...
end 
```

`include`将添加`Flight`到`Bat.ancestors`，但`extend`不会。

我的问题是，**为什么模块与类不同**？当我子类化时`Mammal`，我**总是**同时获得类和实例方法。但是，当我混入一个模块时，我**不能同时**获得类和实例方法（除非我使用`self.included`钩子或类似[ActiveSupport::Concern](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)的东西）。

这种差异背后是否存在语言设计问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T11:49:17.900

两者`Module#include`和`Object#extend`都用于将a的**实例方法**`Module`添加到`Object`. 给定模块：

```
module Flight
    def can_fly?
        true
    end
end 
```

`Module#include`用于将模块的实例方法添加（或*混合*）到类或模块的实例方法中：

```
class Bat < Mammal
    include Flight
end

a = Bat.new()
a.can_fly?        # true 
```

它实际上会影响`Object#is_a?`方法，因此：

```
a.is_a? Flight     # true 
```

`Module#include`是一个*私有方法*，所以它只能在定义一个类或另一个模块时用*函数表示法调用：*

```
class Bat < Mammal
    self.include Flight     # NoMethodError: private method called
end 
```

`Object#extend`将模块的实例方法作为**单例方法**添加到调用它的对象中，因此您可以这样做：

```
b = Mammal.new()
b.extend Flight
b.can_fly?           # true
b.is_a? Flight       # true

c = Mammal.new()
c.can_fly?           # NoMethodError: undefined method 
```

并且只会`b`有来自的实例方法`Flight`；其他`Mammal`物体不会。

在类定义中调用时`Object#extend`，方法会添加到您正在定义的类的特征类中。这是在类定义中使用这两种方法时的重要区别，因为这些方法是作为**类方法**添加的：

```
class Bat < Mammal
    extend Flight
end

Bat.can_fly?     # true

d = Bat.new
d.can_fly?       # NoMethodError: undefined method 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:40:43.933

“当我子类化时`Mammal`，我总是同时获得类和实例方法”

这是因为`Bat`作为对象的类也继承了`Mammal`单例类的实例方法。

![继承图](../Images/c1561c047dc702417fce0d2aedec3cff.png)

将模块包含到类中会改变方法查找链。所以实际上这个类并没有继承任何实例方法。

使用模块扩展类与扩展任何对象相同。该类简单地获取模块的实例方法作为类实例方法（即类对象本身的方法）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T11:43:14.297

我想解决你问题的一部分：

> `include`将添加`Flight`到`Bat.ancestors`，但`extend`不会。

*extend*与*include*不同，因此它显然做了不同的事情……您可以认为*extend*等于类元类上的*include 。*

看看下面的例子：

```
module M
end

class A
  include M
end

# then you will see M within A's ancestors as you know
A.ancestors # => [A, M, Object...]

class B
  # the following is roughly the same as extend M:
  class <<self
    include M
  end
end

# then you will see M within B's metaclass' ancestors
MetaclassOfB = class <<B; self; end
MetaclassOfB.ancestors # => [M, Class, Module...] 
```

因此，由于*extend*就像元类上的*包含*，您会看到扩展模块出现在元类的祖先链中......

# java - 为什么我不能将文件从 Windows 中的 CD 拖放到 Eclipse / SWT Drop Target

> ID：12912984
> 
> 赞同：6
> 
> 时间：2012-10-16T10:45:49.860
> 
> 标签：java, windows, eclipse, drag-and-drop, swt

在我的 Eclipse RCP 应用程序中，我有一个 TreeViewer，它是文件的放置目标，它在大多数情况下都能正常工作，但是当我尝试将存储在 CD ROM 上的文件从 Windows 资源管理器拖动到节点时，指示允许放置的图标不会't change and drop什么都不做。

由于人们似乎对我的问题感到困惑，这里有一个更详细的解释：

执行下面的代码（由 Baz 提供）时，我可以将文件拖放到文本框中，当我从机器上的大多数位置拖动文件时，窗口显示如下 ->

![工作阻力](../Images/6c703e2c0639fa483ad27701dd34c550.png)

光标表示我可以放下，当我释放鼠标时，该`drop(DropTargetEvent event)`方法被调用。

现在，当我做同样的事情，但从资源管理器中获取一个位于我的光驱 DVD 上的文件时，它看起来像这样：

![在此处输入图像描述](../Images/65081a36bd867ff03ab25747f04b172f.png)

表示不允许放置，并且当我释放鼠标时，`drop(DropTargetEvent event)`不会调用该方法。

还值得注意的是，我可以将相同的 DVD 文件放入 Eclipse 导航器中的文件夹中，这表明这不是特定于机器的问题，Eclipse 树中必须有一些不同的东西允许它，但我可以'没看到。

```
package widgets;

import java.util.Arrays;

import org.eclipse.swt.SWT;
import org.eclipse.swt.dnd.DND;
import org.eclipse.swt.dnd.DropTarget;
import org.eclipse.swt.dnd.DropTargetAdapter;
import org.eclipse.swt.dnd.DropTargetEvent;
import org.eclipse.swt.dnd.FileTransfer;
import org.eclipse.swt.dnd.Transfer;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Text;
import org.eclipse.ui.part.PluginTransfer;

public class SourceTest {
    public static void main(String[] args) {
        final Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1,false));

        final Text text = new Text(shell, SWT.BORDER);
        text.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, true));

        DropTarget dt = new DropTarget(text, DND.DROP_COPY | DND.DROP_MOVE | DND.DROP_LINK);
        dt.setTransfer(new Transfer[] { FileTransfer.getInstance(), PluginTransfer.getInstance() });
        dt.addDropListener(new DropTargetAdapter() {
            public void drop(DropTargetEvent event) {
                String fileList[] = null;
                FileTransfer ft = FileTransfer.getInstance();
                if (ft.isSupportedType(event.currentDataType)) {
                    fileList = (String[]) event.data;
                }
                System.out.println(Arrays.toString(fileList));
            }
        });

        shell.setSize(300, 100);
        shell.open();

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T13:19:39.510

当来自 CDROM 设备时，似乎并非所有可能的 DND 操作都受支持。因此，您需要在 上实现更多方法`DropTargetAdapter`，以便在进行中修改 Drop 操作，以缩小实际执行的操作范围，以便操作系统不会阻止 drop。

我举了你的例子，只是对`DropTargetAdapter`

```
 @Override
    public void dropAccept( DropTargetEvent event )
    {
        Object object = FileTransfer.getInstance().nativeToJava( event.currentDataType );
        if( object instanceof String[] )
        {
            String[] strs = (String[]) object;
            System.out.println("dropAccept " + strs[0]);
            event.detail = DND.DROP_COPY;
        }
        event.detail = DND.DROP_COPY;
    }
    @Override
    public void dragEnter( DropTargetEvent event )
    {
        event.detail = DND.DROP_COPY;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:36:06.933

我认为更新您的问题澄清了问题所在。

您的放置目标用作`DND_MOVE`标志。由于我们无法删除 DVD 等只读媒体中的文件，

发送者（在本例中为 OS 的外壳）将拒绝 DND 通信，无论接收者的决定是否是。

您的屏幕截图显示**移动**DND 反馈而不是**复制**。

`dropAccept()`给您最后一次修改通信请求的机会，请谨慎使用，因为每个传输类型可以存在多个放置目标侦听器。为了支持这种情况，TreeViewer 的 DND API 与 SWT 的 API 略有不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:35:59.273

DND 并不像您认为的那样工作。

考虑**从网上下载一些文件**。当您**验证下载**时，**没有实际的文件内容**，但您拥有 Web 资源的**唯一 URL**。

同样，当您验证 drop 操作时，您无法知道实际数据，因为在您接受 drop 操作之前**没有建立连接。**在验证阶段你唯一能知道的就是**传输类型**。

所以你只能根据内容类型来验证drop，而不是“Actual Content”

典型的验证码是：

```
public boolean validateDrop(...){
    return FileTransfer.getInstance().isSupportedType(transferData);
} 
```

接受“TransferData”后，传输将从连接中检索实际数据。

所以请记住，“TransferData”与实际数据不同。

以数组的`FileTransfer`形式检索文件，`String`其中包含每个文件的绝对路径，而不是 Java`File`对象。

PS：剪贴板的工作方式相同。

# git - 分支之间的 git 视觉差异

> ID：12912985
> 
> 赞同：211
> 
> 时间：2012-10-16T10:45:53.323
> 
> 标签：git, diff

这个答案非常适合查看签入 git 的两个文件之间的视觉差异： [How do I view 'git diff' output with a visual diff program?](https://stackoverflow.com/questions/255202/how-do-i-view-git-diff-output-with-a-visual-diff-program/949242#949242)

但是，我希望看到两个分支之间的视觉差异。到目前为止，我最好的选择似乎是：

```
git diff --name-status master dev 
```

这不是很丰富，也不是很直观。

那里有更好的吗？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-10-16T10:50:30.163

[`git diff`](https://www.kernel.org/pub/software/scm/git/docs/git-diff.html)与[范围](https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#_commit_ranges)一起使用。

```
git diff branch1..branch2 
```

这将比较每个分支的提示。

如果你真的想要一些 GUI 软件，你可以试试支持 Mac OS X 和 Windows 的[SourceTree 。](https://www.sourcetreeapp.com/)

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2013-05-28T11:29:06.243

要查看两个分支之间所有差异的视觉差异，我喜欢合并两个分支 - 不提交合并 - 然后使用`git gui`或 git Extensions 来获得差异的概述。

无需提交即可合并的 Git 命令行：

```
git checkout 分支A
git merge --no-commit --no-ff branchB

```

* * *

然后完成后，您可以撤消合并

```
git 合并 --abort

```

*（h / t到@jcugat的评论）*

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2013-12-05T08:24:05.227

如果您使用的是 Intellij Idea IDE，您可以只使用分支中的比较选项。

![在此处输入图像描述](../Images/370fb7814d52642675dc51ae9c3611f0.png)

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2014-04-10T19:58:47.553

您也可以使用 gitk 轻松完成此操作。

```
> gitk branch1 branch2 
```

首先单击 branch1 的尖端。现在右键单击 branch2 的尖端并选择 Diff this->selected。

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2015-01-26T17:39:47.750

对于那些在 Windows 上使用 TortoiseGit 的人，您可以通过这个相当晦涩的功能获得一些直观的比较：

1.  导航到要比较的文件夹
2.  按住`shift`并右键单击它
3.  转到 TortoiseGit -> 浏览参考
4.  用于`ctrl`选择两个分支进行比较
5.  右键单击您的选择，然后单击“比较选定的参考”

资料来源：[http ://wikgren.fi/compare-diff-branches-in-tortoise-git-or-how-to-preview-changes-before-doing-a-merge/](http://wikgren.fi/compare-diff-branches-in-tortoise-git-or-how-to-preview-changes-before-doing-a-merge/)

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2014-09-27T01:01:54.113

如果您使用的是 OSX 或 Windows 7+，[Atlassian SourceTree](http://www.sourcetreeapp.com/)可以很好地解决这个问题。这是免费的。

您可以在并排差异设置中看到分阶段的更改，并且您可以轻松地将本地与远程和任何其他两个分支进行比较。选择多个文件时，差异如下显示：

![在此处输入图像描述](../Images/ea375895c8bdc271aefbc522ccb8c10a.png)

假设您已经检查了一个功能分支并且您想查看与“master”的差异，请右键单击“master”分支并选择“Diff against current”

不幸的是，它似乎不会[很快](https://answers.atlassian.com/questions/149631/sourcetree-for-linux)在 *nix 发行版上可用。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2014-03-14T02:30:26.357

尝试“difftool”（假设您设置了 diff 工具） - 请参阅[https://www.kernel.org/pub/software/scm/git/docs/git-difftool.html](https://www.kernel.org/pub/software/scm/git/docs/git-difftool.html)

我发现**名称状态**对摘要很有用，但**difftool**将迭代更改（并且该`-d`选项为您提供目录视图），例如

```
$ git difftool their-branch my-branch

Viewing: 'file1.txt'
Launch 'bc3' [Y/n]:
... 
```

或者正如@rsilva4 提到的`-d`并默认为您当前的分支，它只是 - 例如与 master 比较：

```
$  git difftool -d master.. 
```

...是的 - 有很多变化 - [https://www.kernel.org/pub/software/scm/git/docs/git-reset.html](https://www.kernel.org/pub/software/scm/git/docs/git-reset.html)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-09-24T17:38:03.730

在[GitExtensions 中](https://github.com/gitextensions/gitextensions)，您可以通过按下选择修订网格中的两个分支`Ctrl`。然后您可以看到这些分支之间不同的文件。当您选择一个文件时，您会看到它的差异。

取自[这里](https://github.com/gitextensions/gitextensions/issues/1596)

或者您可以右键单击任何修订并选择比较 > 比较分支...

[![右键菜单](../Images/004cf117cda2b1e4802269c2a7266600.png)](https://i.stack.imgur.com/5yj1o.png)

然后您可以选择要比较的分支：

[![选择分支](../Images/fd0ea9509df7a3248ed885f1671a98aa.png)](https://i.stack.imgur.com/ONcMz.png)

最后，您会看到一个 Diff 窗口，其中列出了两个分支之间不同的文件，并且对于每个文件，它都会显示一个 diff 视图。

[![差异视图](../Images/7dffd3f85d67c1f8297eafb8adad6650.png)](https://i.stack.imgur.com/SQhtx.png)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2014-01-14T03:10:25.293

如果您使用的是 github，则可以使用该网站：

github.com/url/to/your/repo/compare/SHA_of_tip_of_one_branch...SHA_of_tip_of_another_branch

这将向您展示两者的比较。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2012-11-08T16:25:23.893

更新

Mac：我现在使用 SourceTree。彻底推荐。我特别喜欢你可以上演/取消上演帅哥的方式。

Linux：我在以下方面取得了成功：

*   聪明的
*   吉特克拉肯
*   `meld`

例如`smartgit`在 Ubuntu 上安装：

*   `.deb`从[https://www.syntevo.com/smartgit/download/](https://www.syntevo.com/smartgit/download/)下载
*   使用 sudo dpkg -i /path/to/deb` 安装

* * *

这可以完成工作：

git-diffall 带有一个 GUI diff 工具，比如 meld。请参阅此处的第 5 点：

[http://rubyglazed.com/post/15772234418/git-ify-your-command-line](http://web.archive.org/web/20141011234748/http://rubyglazed.com/post/15772234418/git-ify-your-command-line)

这里有一篇关于 git 和融合的好文章：http: [//nathanhoad.net/how-to-meld-for-git-diffs-in-ubuntu-hardy](http://nathanhoad.net/how-to-meld-for-git-diffs-in-ubuntu-hardy)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-08-22T06:56:09.803

如果您使用 Eclipse，您可以直观地将工作区中的当前分支与另一个标记/分支进行比较：

![Eclipse 工作区比较](../Images/6ce59825900789456395380a8e791e9f.png)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-09-17T14:59:51.477

您也可以使用 Perforce 的免费 P4Merge 来执行此操作：

[http://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools](http://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools)

[![在此处输入图像描述](../Images/26117d3daab95f22be47ff45df0c84b4.png)](https://i.stack.imgur.com/MzFvx.png)

可以在[此处](https://gist.github.com/samsalisbury/5436108)和[此处找到有关将其与 Git 集成的详细信息](https://gist.github.com/tony4d/3454372)

但上述链接的快速总结是：

*   将以下位放入您的 ~/.gitconfig 中，然后您就可以`$ git mergetool`使用`$ git difftool`p4merge
*   请注意，`$ git diff`仍将仅使用默认的内联差异查看器 :)（使用 git 版本 1.8.2 测试）

## .gitconfig 的更改

```
[merge]
  keepBackup = false
    tool = p4merge
[mergetool "p4merge"]
    cmd = /Applications/p4merge.app/Contents/Resources/launchp4merge "\"$PWD/$BASE\"" "\"$PWD/$REMOTE\"" "\"$PWD/$LOCAL\"" "\"$PWD/$MERGED\""
    keepTemporaries = false
    trustExitCode = false
    keepBackup = false
[diff]
    tool = p4merge
[difftool "p4merge"]
    cmd = /Applications/p4merge.app/Contents/Resources/launchp4merge "\"$REMOTE\"" "\"$LOCAL\"" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-04-19T13:28:48.070

# 看一下`git show-branch`

您可以使用核心 git 功能做很多事情。最好指定您希望在视觉差异中包含的内容。大多数答案都集中在提交的逐行差异上，您的示例侧重于给定提交中受影响的文件的名称。

一种似乎没有解决的视觉问题是如何查看分支包含的提交（无论是共同的还是唯一的）。

对于这个视觉效果，我非常喜欢`git show-branch`; 它打破了一个组织良好的提交表，每个分支返回到共同的祖先。- 要在具有多个分歧的分支的 repo 上尝试它，只需键入`git show-branch`并检查输出 - 有关示例的文章，请参阅[比较 Git 分支之间的提交](https://robots.thoughtbot.com/compare-commits-between-git-branches)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-03-07T15:10:40.513

如果您使用出色的 WebStorm 编辑器，您可以与您喜欢的任何分支进行比较：

[![Webstorm git 比较](../Images/5e1e4214f7217204614eb23bb42b76b3.png)](https://i.stack.imgur.com/S7Y8x.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-14T08:50:53.283

以下是如何在 Visual Studio 中查看整个提交之间的视觉差异，而不是单个文件（在 VS 2017 中测试）。不幸的是，它仅适用于一个分支中的提交：在“团队资源管理器”中，选择“分支”视图，右键单击存储库，然后选择“查看历史记录”，如下图所示。

[![在此处输入图像描述](../Images/2b9918a86714cb0cf31ee95a33cb814d.png)](https://i.stack.imgur.com/cX1jX.png)

然后当前分支的历史出现在主区域。（在当前分支上以较早提交结束的分支由标签标记。）现在使用 Ctrl-Left 选择几个提交，然后右键单击并从弹出菜单中选择“比较提交...”。

有关比较 Microsoft 世界中的分支的更多信息，请参阅这个 stackoverflow 问题：[使用 Visual Studio 的 git 分支之间的差异](https://stackoverflow.com/questions/37052450/differences-between-git-branches-using-visual-studio)。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-16T14:40:48.990

您还可以使用 vscode 使用扩展 CodeLense 比较分支，这已经在这个 SO 中得到回答：[如何比较 Visual Studio 代码上的不同分支](https://stackoverflow.com/q/42112526/2781524)

# python - 如何使用 mod_wsgi 配置 Apache2 以启用每个虚拟主机的 error_log 文件？

> ID：12912987
> 
> 赞同：0
> 
> 时间：2012-10-16T10:45:57.940
> 
> 标签：python, apache2, mod-wsgi, web.py

我有多个使用 web.py 框架用 Python 编写的站点。我想为每个站点生成单独的访问日志和错误日志文件，我已在 Apache2 上启用。

如何做到这一点？请帮助我...任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:25:25.347

你需要写这样的东西

```
<VirtualHost *>
....
LogLevel debug
ErrorLog /var/log/apache/mysite/error__log.txt
CustomLog /var/log/apache/mysite/custom_log.txt combined
....
</VirtualHost> 
```

指定的路径必须存在

我认为链接会很有用

[阿帕奇设置](http://httpd.apache.org/docs/1.3/logs.html#virtualhosts)

[wsgi](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Apache_Error_Log_Files)

# java - Quartz 从 00h35 和 06h15 停止计划的重复作业

> ID：12912990
> 
> 赞同：1
> 
> 时间：2012-10-16T10:46:10.277
> 
> 标签：java, quartz-scheduler

我有一个每天在 15 分钟内运行的作业，但现在的要求是我们必须`00h35 and 06h15`不时停止这项作业。

我们正在使用`Quartz scheduler`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:59:48.467

我不使用石英调度程序，但我在[这里](http://quartz-scheduler.org/files/documentation/Quartz-2.1.x-Documentation.pdf)找到了文档并快速浏览了它。第 23 页有一个示例“构建一个现在将触发的触发器，然后每五分钟重复一次，直到 22:00 小时”，这听起来与您想要做的事情相似（从 06h15 开始，在 00h35 结束）

如果这不是您要查找的内容，请在您的问题中添加一些细节，特别是您已经尝试过的内容。

# javascript - 灯箱效果：图像切成两半并下降/滑入

> ID：12912992
> 
> 赞同：1
> 
> 时间：2012-10-16T10:46:23.100
> 
> 标签：javascript, jquery, lightbox

我想在灯箱画廊（最好是 FancyBox）中产生效果：单击缩略图时，灯箱会打开，然后显示：

1.  图像需要被切成两半，一部分从顶部掉落或滑入，另一半从底部滑入。
2.  一点弹跳效果也会很棒，尤其是对于需要放下/滑入的下一个和上一个按钮。

你懂我的意思吗？这在Javascript中可能吗？（如果可能，不要使用 Flash。）

我还没有在网上找到具体的教程，也不知道要搜索哪个确切的术语。

# php - 带有裁剪和调整大小的图像上传器

> ID：12912993
> 
> 赞同：0
> 
> 时间：2012-10-16T10:46:26.883
> 
> 标签：php, javascript, jquery, file-upload

好吧..我一直在寻找具有裁剪和调整大小功能的图像上传..

发现很多。但我可以找到一个我可以选择必须宽度的地方..

因此，如果我的 MUST-BE 宽度设置为 250 像素。

然后裁剪应该允许最小宽度，这应该是设置的必须是宽度。裁剪时应该可以大于 MUST-BE 宽度，但是在裁剪后，它应该将宽度调整为设置的 MUST-BE 宽度。

希望我说得通。

我发现了这个：[http](http://www.nwhite.net/2009/02/25/lassocrop-preview/) : //www.nwhite.net/2009/02/25/lassocrop-preview/ 大部分魔法。

我只是不知道如何在选择正确的裁剪尺寸后让 PHP 执行这些操作？以及如何使上传功能与此一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:18:08.233

试试这个 [http://tympanus.net/codrops/2009/10/17/jquery-image-cropper-with-uploader/](http://tympanus.net/codrops/2009/10/17/jquery-image-cropper-with-uploader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:56:29.043

这是一个同时处理 javascript 和 PHP 方面的教程：[http ://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop-v11/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop-v11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:59:55.870

在这里我们可以得到 x,y,h 和 w。然后您可以将这些值分配给四个不同的隐藏输入字段，例如：

```
 <input type="hidden" name="x1" value="" id="x1" />
        <input type="hidden" name="y1" value="" id="y1" />
        <input type="hidden" name="x2" value="" id="x2" />
        <input type="hidden" name="y2" value="" id="y2" />
        <input type="hidden" name="w" value="" id="w" />
        <input type="hidden" name="h" value="" id="h" /> 
```

像这样并使用表单操作，您可以在操作页面获取所有值\

```
$x1 = $_POST["x1"];
$y1 = $_POST["y1"];
$x2 = $_POST["x2"];
$y2 = $_POST["y2"];
$w  = $_POST["w"];
$h  = $_POST["h"]; 
```

使用一些 php 图像函数，我们可以裁剪图像

imagecreatetruecolor();

imagecopyresampled();

imagegif() 或 imagejpeg() 或 imagepng ()

我想这些已经可以知道这些基本的php函数以及如何使用了 谢谢

# google-app-engine - java.net.UnknownHostException：appengine.google.com

> ID：12912998
> 
> 赞同：7
> 
> 时间：2012-10-16T10:46:44.370
> 
> 标签：google-app-engine

得到这个错误。知道如何摆脱它吗？

昨天它工作正常，但今天我得到了这些错误。[我看到了这个链接](http://code.google.com/p/googleappengine/issues/detail?id=3131)的一个已知问题。但是我还没有找到任何解决方案..

```
 Oct 16, 2012 4:01:59 PM com.google.appengine.tools.info.RemoteVersionFactory getVersion

INFO: Unable to access https://appengine.google.com/api/updatecheck?runtime=java&release=1.7.1&timestamp=1345058163&api_versions=['1.0']
java.net.UnknownHostException: appengine.google.com
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:559)
    at com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:141)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:395)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
    at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:272)
    at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:329)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at java.net.URL.openStream(URL.java:1010)
    at com.google.appengine.tools.info.RemoteVersionFactory.getVersion(RemoteVersionFactory.java:76)
    at com.google.appengine.tools.info.UpdateCheck.checkForUpdates(UpdateCheck.java:99)
    at com.google.appengine.tools.info.UpdateCheck.doNagScreen(UpdateCheck.java:174)
    at com.google.appengine.tools.info.UpdateCheck.maybePrintNagScreen(UpdateCheck.java:142)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:289)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:249)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:225)
Oct 16, 2012 4:01:59 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Oct 16, 2012 4:02:00 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed D:\WorkSpace\GAE\GST\war\WEB-INF/appengine-web.xml
Oct 16, 2012 4:02:00 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed D:\WorkSpace\GAE\GST\war\WEB-INF/web.xml
Oct 16, 2012 4:02:02 PM com.google.appengine.tools.development.DevAppServerImpl start 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-09-17T15:51:20.133

如果您在应用引擎应用程序中使用 Java 8，则需要包括

```
<url-stream-handler> urlfetch </ url-stream-handler> 
```

在`appengine-web.xml`.

[appengine-web.xml 参考](https://cloud.google.com/appengine/docs/standard/java/config/appref#url-stream-handler)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:31:06.527

我假设当您尝试将 Eclipse 项目作为 Web 应用程序运行时，您在 Eclipse IDE 中看到了这一点。

GAE 插件只是检查是否有更新的 AppEngine SDK 可供下载。如果有一个比您当前使用的更新的，那么它会让您知道。该错误是因为在那种情况下，可能存在网络错误并且无法连接。就运行您的应用程序而言，它是无害的。

但是，如果您的应用程序依赖于访问某些外部网络服务，那么如果网络问题在您的开发环境中仍然存在，它们也可能会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:34:54.390

让它工作..：cmd->转到您的主目录>mkdir .appcfg_no_nag 这将停止检查更新，并且您的Web应用程序将至少在本地运行..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-02T17:01:26.530

此错误与 Internet 连接有关。我换了其他连接，它可以工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-09T20:33:36.160

您应该添加**appengine-web.xml**：

```
<url-stream-handler> urlfetch </ url-stream-handler> 
```

并且也开始使用**java.net.URLConnection**，例如 Apache HttpClient 是行不通的。

[https://cloud.google.com/appengine/docs/standard/java/issue-requests#java_8_runtime_vs_java_7_behavior](https://cloud.google.com/appengine/docs/standard/java/issue-requests#java_8_runtime_vs_java_7_behavior)

# json - 使用 Linq 从 Json 响应中获取最后一个数组

> ID：12912999
> 
> 赞同：1
> 
> 时间：2012-10-16T10:46:52.513
> 
> 标签：json, linq

我有一个 Json 响应，其中包含多个数组，我需要从中获取最后一个数组。我想选择 ExpenseDescriptions 并将其返回给使用 Linq 的 ajax 调用。ExpenseDescription 始终是返回的最后一个数组。我的回复结构如下：

```
{
"Data": {
    "Items": [
        {
            "Result": {
                "Id": "Some Data"
            }
        },
        {
            "Result": {
                "Id": "Some More Data"
            }
        },
        {
            "Result": {
                "ExpenseDescriptions": [
                    {
                        "Code": "TRH8",
                        "Description": "Some Description",
                        "UnitCost": 0,
                        "MaxThreshold": 0,
                        "MinThreshold": 0
                    },
                    {
                        "Code": "VVFT3",
                        "Description": "Some Description",
                        "UnitCost": 0,
                        "MaxThreshold": 0,
                        "MinThreshold": 0
                    }
                ]
            }
        }
    ]
}
} 
```

我可以使用 linq 做一些基本的条款，但无法弄清楚或找到让我做上述事情的方法。对于使用 Linq 执行此操作的任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:03:07.217

这是使用 Newtonsoft.Json.Linq 的解决方案：

```
using System;
using System.Linq;
using System.Text;
using Newtonsoft.Json.Linq;

namespace test
{
    class Program
    {
        static void Main(string[] args)
        {
            string json = @"{'Data': {
    'Items': [
        {
            'Result': {
                'Id': 'Some Data'
            }
        },
        {
            'Result': {
                'Id': 'Some More Data'
            }
        },
        {
            'Result': {
                'ExpenseDescriptions': [
                    {
                        'Code': 'TRH8',
                        'Description': 'Some Description',
                        'UnitCost': 0,
                        'MaxThreshold': 0,
                        'MinThreshold': 0
                    },
                    {
                        'Code': 'VVFT3',
                        'Description': 'Some Description',
                        'UnitCost': 0,
                        'MaxThreshold': 0,
                        'MinThreshold': 0
                    }
                ]
            }
        }
    ]
}
}";
            JObject jsonobject = JObject.Parse(json);

            var last_array = jsonobject.Descendants().Last(x => x.Type == JTokenType.Array);

            foreach (var e in last_array)
            {
                Console.WriteLine(e.ToString());
            }
        }
    }
} 
```

输出：

```
{
  "Code": "TRH8",
  "Description": "Some Description",
  "UnitCost": 0,
  "MaxThreshold": 0,
  "MinThreshold": 0
}
{
  "Code": "VVFT3",
  "Description": "Some Description",
  "UnitCost": 0,
  "MaxThreshold": 0,
  "MinThreshold": 0
} 
```