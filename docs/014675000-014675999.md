# StackOverflow 问答 14675000-14675999

# php - php逻辑问题：上传文件并更改名称

> ID：14675001
> 
> 赞同：0
> 
> 时间：2013-02-03T17:14:03.113
> 
> 标签：php, image, upload

我是 php 新手并试图弄清楚如何执行以下过程：使用下面的代码上传用户提交的图像，我想根据用户会话数据更改文件的名称，如果新命名的文件已经存在，然后将其替换为当前上传。

在以下片段的来源处，我认为这个过程应该发生。但是，我不想检查文件是否存在，而是只接受文件，将其重命名为 ($_GET['session_name'] . "-avatar" . $extension) ，如果该文件已存在于上传中文件夹，然后将其替换为当前上传的图像。最后，文件的扩展名不应成为确定文件存在的因素，这样无论文件类型如何，每个用户都只会存在一个文件。

```
// edit following to rename file, and if exists already, replace with current
if (file_exists("uploads/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "uploads/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "uploads/" . $_FILES["file"]["name"];
  } 
```

下面的完整代码（[来源](http://www.w3schools.com/php/php_file_upload.asp)）：

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:20:01.427

只是改变

```
move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]); 
```

至

```
move_uploaded_file($_FILES['file']['tmp_name'], 'upload/'.$UserSessionData); 
```

将文件重命名为您的用户会话数据。对 .做同样的事情`if(file_exists("uploads/" . $_FILES["file"]["name"])) [...]`。

顺便说一句：您应该在 php 中使用单引号 (')，因为双引号 (") 由 php 解析，因此比单引号慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:21:34.107

要在不查看扩展名的情况下检查文件是否存在，您有两个简单的解决方案：

*   为每个用户创建一个目录并将文件放入其中，以便您可以迭代或计算用户文件。
*   使用数据库

# python - python matplotlib更改图像的默认轴

> ID：14675002
> 
> 赞同：1
> 
> 时间：2013-02-03T17:14:06.587
> 
> 标签：python, image, matplotlib, axis

我处于一个有趣的境地。我有带有轴的图表图像

[![IMG](../Images/4efeab14da202378f4d23973de9a9247.png)](https://web.archive.org/web/20190825172625/http://i49.tinypic.com/35iacrk.jpg)

因此，当我尝试使用以下代码绘制此图时：

```
plt.figure("Ti Zr")
ax = plt.subplot(111)
im = plt.imshow(np.flipud(plt.imread('Ti_ZrB.png')), 
    origin='lower', 
    extent=[0, 800, 1000, 32700])
plt.xticks([10,15, 43, 95, 215,542,800])
plt.yticks([1000, 1860, 2670, 8600, 16600,32700])

plt.axis('normal')
plt.show() 
```

在上传图片之前，我只剪掉了 Corel 上的轴号。最后我得到了这个

[![IMG](../Images/d94429312fda1d0b2e1b012665194427.png)](https://i.stack.imgur.com/YTuBq.png)

如您所见，轴已移位，并且它们不在自己的位置。通常我使用这种方式来绘制图表并且在我没有任何问题之前。但现在我没有任何想法。先感谢您。我会很感激一些帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:27:18.100

您可以在 matplotlib 中使用鼠标单击事件来轻松确定刻度的坐标，而不是猜测它。

```
import numpy as np
import matplotlib.pyplot as plt

def tell_click_coordinates(event):
    print "X: %.0f, Y: %.0f" % (event.xdata, event.ydata)

fig = plt.figure("Ti Zr")
fig.canvas.mpl_connect("button_press_event", tell_click_coordinates)

ax = plt.subplot(111)
im = plt.imshow(np.flipud(plt.imread('14675002_in.png')), 
    origin='lower', 
    extent=[0, 800, 1000, 32700])
plt.xticks([10,15, 43, 95, 215,542,800])
plt.yticks([1000, 1860, 2670, 8600, 16600,32700])

plt.axis('normal')
plt.show() 
```

单击一个后一个勾号将为您提供：

```
X: 6, Y: 1576
X: 6, Y: 6902
X: 10, Y: 13037
X: 8, Y: 20415
X: 11, Y: 26383
X: 76, Y: 2177
X: 260, Y: 1846
X: 494, Y: 1846
X: 594, Y: 1680
X: 715, Y: 1928 
```

然后，您可以使用以下值调整绘图：

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure("Ti Zr")

ax = plt.subplot(111)
im = plt.imshow(np.flipud(plt.imread('14675002_in.png')), 
    origin='lower', 
    extent=[0, 800, 1000, 32700])
plt.xticks([76,260,494,594,715,800],[10,15, 43, 95, 215,542,800])
plt.yticks([1576,6902, 13037, 20415, 26383, 32700],[1000, 1860, 2670, 8600, 16600,32700])

plt.axis('normal')
plt.show() 
```

你得到

![结果](../Images/4f5250ef5f2521399f94182dd0d46b90.png)

# umbraco - 如何在 Umbraco 自定义部分中实现移动和排序

> ID：14675003
> 
> 赞同：2
> 
> 时间：2013-02-03T17:14:09.583
> 
> 标签：umbraco, custom-component

我创建了两个自定义部分，它们从外部（非 umbraco）表中填充它们的树。我创建了 ITaskReturnUrl 的实现来处理节点的创建和删除——这很好用。如何使其与菜单操作一起使用：排序和移动？

我已将适当的操作添加到节点的菜单中，但是当我单击该操作时出现此错误：

```
No node exists with id '1'

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: No node exists with id '1'

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ArgumentException: No node exists with id '1']
   umbraco.cms.businesslogic.CMSNode.setupNode() +239
   umbraco.cms.businesslogic.CMSNode..ctor(Int32 Id) +36
   umbraco.dialogs.moveOrCopy.Page_Load(Object sender, EventArgs e) +1241
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +51
   System.Web.UI.Control.OnLoad(EventArgs e) +92
   umbraco.BasePages.BasePage.OnLoad(EventArgs e) +14
   System.Web.UI.Control.LoadRecursive() +54
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +772 
```

*   弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:14:19.620

我决定用 jquery-ui 实​​现我自己的排序页面。

为了到达新页面，我创建了一个实现 IAction 接口的新类（[完整版](http://pastebin.com/sy3QpqMH)）：

```
public string JsFunctionName
{
   get
   {
      return "OpenSortWindow();";
   }
}

public string JsSource
{
   get { return "function OpenSortWindow(){ var node = UmbClientMgr.mainTree().getActionNode();UmbClientMgr.openModalWindow('/Umbraco/Dialogs/RaceNodeSort.aspx?id='+ node.nodeId, 'Sort items', true, 350, 380); }"; }
} 
```

javascript 使用我的 aspx 端打开一个新对话框，允许用户对元素进行排序。请注意，我使用 UmbClientMgr.mainTree().getActionNode() 来获取当前节点并读取我插入到页面 URL 中的 nodeId 属性以将其传递给页面。

然后通过以下方式将此 Action-class 插入到上下文菜单中：

```
courseNode.Menu.Add(new RaceSortAction()); 
```

# python - Rally pyral sdk 错误，查询包含两个以上的术语。（解析表达式时出错——应为“）”，但看到的是“AND”。）

> ID：14675004
> 
> 赞同：2
> 
> 时间：2013-02-03T17:14:15.800
> 
> 标签：python, rally

我正在使用 pyral，[Rally python SDK](http://developer.help.rallydev.com/python-toolkit-rally-rest-api)，我用一个元组格式化我的查询字符串，但似乎任何时候我有两个以上的术语它都会失败。这是我的测试代码：

```
import pyral

rally = pyral.Rally('rally1.rallydev.com', 'user@example.com', 'password')

user = rally.getUserInfo(name='User Name').pop(0)
wksp = rally.getWorkspace()
proj = rally.getProject()

print user.FirstName, user.LastName
print wksp.Name
print proj.Name

queryStrings = (
('State != "Closed"', 'Owner = ' + user.ref),
('State != "Fixed"', 'Owner = ' + user.ref),
('State != "Closed"', 'State != "Fixed"'),
('State != "Closed"', 'State != "Fixed"', 'Owner = ' + user.ref),
('State != Closed', 'State != Fixed', 'State != Submitted'),
('State != Fixed', 'ScheduleState != Tested'),
('State != Fixed', 'Owner = ' + user.ref, 'ScheduleState != Tested'),
)

for query in queryStrings:
    print "++++++++++++++++++++++++++++++++++++++++++"
    print "Query:",query
    defects = rally.get("Defect", True, query=query)
    print "Number of results:",defects.resultCount
    print "Errors:", defects.errors
    print 
```

这是结果输出

```
User Name
A Workspace
Web Project
++++++++++++++++++++++++++++++++++++++++++
Query: ('State != "Closed"', u'Owner = user/1234567890')
QUERYJUNK: ((State != "Closed") AND (Owner = user/1234567890))
Number of results: 25
Errors: []

++++++++++++++++++++++++++++++++++++++++++
Query: ('State != "Fixed"', u'Owner = user/1234567890')
QUERYJUNK: ((State != "Fixed") AND (Owner = user/1234567890))
Number of results: 89
Errors: []

++++++++++++++++++++++++++++++++++++++++++
Query: ('State != "Closed"', 'State != "Fixed"')
QUERYJUNK: ((State != "Closed") AND (State != "Fixed"))
Number of results: 149
Errors: []

++++++++++++++++++++++++++++++++++++++++++
Query: ('State != "Closed"', 'State != "Fixed"', u'Owner = user/1234567890')
QUERYJUNK: ((State != "Closed") AND (State != "Fixed") AND (Owner = user/1234567890))
Number of results: 0
Errors: [u'Could not parse: Error parsing expression -- expected ")" but saw "AND"       instead.']

++++++++++++++++++++++++++++++++++++++++++
Query: ('State != Closed', 'State != Fixed', 'State != Submitted')
QUERYJUNK: ((State != Closed) AND (State != Fixed) AND (State != Submitted))
Number of results: 0
Errors: [u'Could not parse: Error parsing expression -- expected ")" but saw "AND" instead.']

++++++++++++++++++++++++++++++++++++++++++
Query: ('State != Fixed', 'ScheduleState != Tested')
QUERYJUNK: ((State != Fixed) AND (ScheduleState != Tested))
Number of results: 247
Errors: []

++++++++++++++++++++++++++++++++++++++++++
Query: ('State != Fixed', u'Owner = user/1234567890', 'ScheduleState != Tested')
QUERYJUNK: ((State != Fixed) AND (Owner = user/1234567890) AND (ScheduleState !=     Tested))
Number of results: 0
Errors: [u'Could not parse: Error parsing expression -- expected ")" but saw "AND" instead.'] 
```

QUERYJUNK 是 Rally SDK 本身构建的查询字符串的输出，然后将其发送到拉力赛服务。

**编辑：**

由于根据 Kyle 的回答，这是 SDK 本身的一个错误，因此我在脚本中创建了一个解决方法，直到可以修复 SDK。

```
def buildQueryString(querySequence):
if type(query) in [types.ListType, types.TupleType]:
    seq = ["(%s)" % (s,) for s in querySequence]
    qs = "%s" % seq.pop(0)
    for qt in seq:
        qs = "(%s AND %s)" % (qs, qt)
    print "QS:",qs
    return qs

return querySequence 
```

然后我将生成的这个字符串传递给 API，现在一切似乎都正常了。看起来 API 还支持查询参数的字典，但由于它没有记录，而且我不需要它，我没有为这种情况创建解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:57:04.500

这似乎是 pyral 生成具有超过 2 个子句的查询字符串的错误。

目前：

```
((State != Closed) AND (State != Fixed) AND (State != Submitted)) 
```

应该：

```
(((State != Closed) AND (State != Fixed)) AND (State != Submitted)) 
```

我们将尽快修复此问题并在 github 上开源，以便社区可以更好地解决此类问题。

# python - 数组的每个可能的大小为“k”的子集的最大元素的总和

> ID：14675006
> 
> 赞同：3
> 
> 时间：2013-02-03T17:14:36.523
> 
> 标签：python, algorithm, subset

我有一个非常大的列表，包含大约 10,000 个元素，每个元素都是一个 50 亿大的整数。我想从最大大小为 10,000 个元素的数组的每个可能的大小“k”子集（由用户给出）中找到最大元素的总和。我想到的唯一解决方案是生成每个子集（使用 itertools）并找到它的最大元素。但这将花费大量时间！解决这个问题的pythonic方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T18:34:09.903

不要用python，先用数学。`S`这是一个组合问题：如果您有一个包含*n 个*数字（*n*大）的数组，并生成所有可能的大小为*k*的子集，您想要计算子集的最大元素的总和。

假设这些数字都是不同的（尽管如果它们不同也可以），您可以准确计算每个数字在子集中出现的频率，然后从那里继续，而无需实际构建子集。你应该把它交给`math.stackexchange.com`他们，他们很快就会把你整理出来。就是这样，但没有漂亮的数学符号：

按升序对数组进行排序，让`S_1`成为最小的（第一个）数字， `S_2`下一个最小的数字，依此类推。（注：从 1 开始索引）。

1.  `S_n`，最大元素，显然是它所属的任何子集的最大元素，并且确实存在`(n-1 choose k-1)`这样的子集。

2.  在不包含 S_n 的子集中，有`(n-2 choose k-1)` 包含 的子集，`S_{n-1}`其中它是最大的元素。

3.  继续这个直到你找到最小`S_k`的`k-th`数（从最小的数），这将是恰好一个子集的最大值：`(k-1 choose k-1) = 1`。较小的数字 ( `S_1`to `S_{k-1}`) 永远不会是最大的：每组`k`元素都将包含更大的东西。

4.  总结以上内容`(n-k+1 terms)`，你的答案就是：

    ```
    S_n*(n-1 choose k-1) + S_{n-1}*(n-2 choose k-1) + ... + S_k*(k-1 choose k-1) 
    ```

    把项从小到大写，这只是总和

    ```
    Sum(i=k..n) S_i * (i-1 choose k-1) 
    ```

如果我们在 math.stackexchange 上，你会得到正确的数学符号，但你明白了。

# libgdx - 如何在 libgdx 中绘制平滑的文本？

> ID：14675007
> 
> 赞同：34
> 
> 时间：2013-02-03T17:14:36.227
> 
> 标签：libgdx

我尝试在**libgdx**上的 android 游戏中绘制简单的文本，但它看起来很清晰。如何使文本在不同分辨率下看起来平滑？我的代码：

```
private BitmapFont font;

font = new BitmapFont();

font.scale((ppuX*0.02f));

font.draw(spb, "Score:", width/2-ppuX*2f, height-0.5f*ppuY); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-08-05T16:00:39.073

```
font.getRegion().getTexture().setFilter(TextureFilter.Linear, TextureFilter.Linear); 
```

这将获取在 BitmapFont 中使用的纹理并将其过滤更改为双线性，从而允许更高的图像质量，同时以稍微慢一些（差异通常不明显）GPU 渲染为代价进行放大和缩小。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-28T22:37:34.917

一种解决方案是使用 libgdx 的 FreeType 扩展，如此处[所述](http://www.badlogicgames.com/wordpress/?p=2300)。这允许您从 .ttf 字体动态生成位图字体。通常，一旦您知道目标分辨率，您就会在启动时执行此操作。

这是一个例子：

```
int viewportHeight;
BitmapFont titleFont;
BitmapFont textFont;

private void createFonts() {
    FileHandle fontFile = Gdx.files.internal("data/Roboto-Bold.ttf");
    FreeTypeFontGenerator generator = new FreeTypeFontGenerator(fontFile);
    FreeTypeFontParameter parameter = new FreeTypeFontParameter();
    parameter.size = 12;
    textFont = generator.generateFont(parameter);
    parameter.size = 24;
    titleFont = generator.generateFont(parameter);
    generator.dispose();
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-11-10T14:52:23.923

您绝对应该快速了解自定义字体着色器和/或 DistanceField-Fonts。它们易于理解并且同样易于实现：

[https://github.com/libgdx/libgdx/wiki/Distance-field-fonts](https://github.com/libgdx/libgdx/wiki/Distance-field-fonts)

DistanceFieldFonts 保持平滑，即使您放大它们：

![在此处输入图像描述](../Images/6d0b7bab7fd29fddcf6eae6025a0c914.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-08-07T13:11:27.903

*   使用 libgdx 网站提供的 hiero 创建一个 .fnt 文件。
*   设置字体大小为150；它将创建一个 .fnt 文件和一个 .png 文件。
*   将这两个文件复制到您的资产文件夹中。
*   现在声明字体：

    ```
    BitmapFont font; 
    ```

*   现在在创建方法中：

    ```
    font = new BitmapFont(Gdx.files.internal("data/100.fnt"), false); // 100 is the font name you can give your font any name 
    ```

*   在渲染中：

    ```
    font.setscale(.2f);

    font.draw(batch, "whatever you want to write", x,y); 
    ```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-18T10:58:25.197

通常，您不会得到清晰的文本，因为您正在为特定分辨率设计游戏，并且当您移动到不同的设备时，Libgdx 会缩放所有内容以匹配新分辨率。即使使用线性过滤缩放对文本也很不利，因为圆角很容易扭曲。在一个完美的世界中，您将在运行时根据您可用的像素数动态创建内容，并且不会使用单个自动缩放。

这是我正在使用的方法：为小屏幕（480 x 320）构建所有内容，当您以更大的分辨率打开它时，我会加载更大尺寸的 BitmapFont 并将其应用和反向缩放到 Libgdx 稍后将自动做。

这是一个让事情更清楚的例子：

```
 public static float SCALE;
    public static final int VIRTUAL_WIDTH = 320;
    public static final int VIRTUAL_HEIGHT = 480;

    public void loadFont(){

     // how much bigger is the real device screen, compared to the defined viewport
     Screen.SCALE = 1.0f * Gdx.graphics.getWidth() / Screen.VIRTUAL_WIDTH ;

     // prevents unwanted downscale on devices with resolution SMALLER than 320x480
     if (Screen.SCALE<1)
        Screen.SCALE = 1;

     FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal("data/Roboto-Regular.ttf"));

     // 12 is the size i want to give for the font on all devices
     // bigger font textures = better results
     labelFont = generator.generateFont((int) (12 * SCALE));

     // aplly the inverse scale of what Libgdx will do at runtime
     labelFont.setScale((float) (1.0 / SCALE));
     // the resulting font scale is: 1.0 / SCALE * SCALE = 1

     //Apply Linear filtering; best choice to keep everything looking sharp
     labelFont.getRegion().getTexture().setFilter(TextureFilter.Linear, TextureFilter.Linear);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-06T17:57:56.210

位图字体是纹理，如果您想让较小的纹理在将它们调整为较大尺寸时看起来更平滑，您需要确保使用正确的纹理过滤器。

[这篇博客文章处理了这些问题](http://www.badlogicgames.com/wordpress/?p=1403)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-09T23:27:50.737

更新后很多东西都被弃用了，这对我有用：

```
public void regenerateFonts(OrthographicCamera cam, Game game) {
    int size = 18;

    if (cam != null && game != null) {
        // camera and game are provided, recalculate sizes
        float ratioX = cam.viewportWidth / game.getW();
        float ratioY = cam.viewportHeight / game.getH();
        System.out.println("Ratio: [" + ratioX + ":" + ratioY + "]");

        size *= ratioY;
    }

    // font parameters for this size
    FreeTypeFontParameter params = new FreeTypeFontParameter();
    params.flip = true; // if your cam is flipped
    params.characters = LETTERS; // your String containing all letters you need
    params.size = size;
    params.magFilter = TextureFilter.Linear; // used for resizing quality
    params.minFilter = TextureFilter.Linear; // also

    // Lato Light generator
    FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal("fonts/Lato-Light.ttf"));

    // make the font
    fontLatoLight = generator.generateFont(params);
    generator.dispose(); // dispose to avoid memory leaks
} 
```

当你想在屏幕上渲染它时：

```
// text rendering
fontLatoLight.setColor(Color.WHITE); // set color here (has other overloads too)
fontLatoLight.draw(batch, "Hello World!", xCoord, yCoord); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-15T18:36:42.027

**我使用 Libgdx 实现平滑文本的解决方案**

我使用 BitmapFont，并使用 Hiero 工具示例 Arial 16、Arial 32、Arial 64 生成 3 种不同大小的相同字体

我将它们放在我的资产文件中，并根据屏幕大小仅使用（加载）其中一个

```
if(Gdx.graphics.getWidth() < (480*3)/2)
        {
            textGametFont = BitmapFont(Gdx.files.internal(nameFont+16+".fnt"),
                    Gdx.files.internal(nameFont+16+".png"), false);
        }else
        {
            if(Gdx.graphics.getWidth() < (3*920)/2)
            {

                textGametFont = new BitmapFont(Gdx.files.internal(nameFont+32+".fnt"),
                        Gdx.files.internal(nameFont+32+".png"), false);
            }else
            {
                textGametFont = new BitmapFont(Gdx.files.internal(nameFont+64+".fnt"),
                        Gdx.files.internal(nameFont+64+".png"), false);
            }
        } 
```

然后我使用这行代码来提高上下缩放的*结果质量*

```
textGametFont.getRegion().getTexture().setFilter(TextureFilter.Linear, TextureFilter.Linear); 
```

缩放图像

为了处理所有设备分辨率类型的字体大小，我使用这两个函数

```
public static float xTrans(float x)
{
    return x*Gdx.graphics.width/(YourModel.SCREEN_WIDTH);
}

public static float yTrans(float y)
{
    return y*Gdx.graphics.height/YourModel.SCREEN_Height;
} 
```

我使用的模型屏幕分辨率是

屏幕宽度 = 480

屏幕高度 = 320

将比例设置为字体

```
textGametFont.setScale((xtrans(yourScale)+ ytrans(yourScale))/2f); 
```

最后画出你的文字

```
textGametFont.draw(batch, "WINNER !!", xTrans(250), yTrans(236)); 
```

希望这是清楚和有帮助的！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-23T10:03:14.943

```
private BitmapFont font;

font = new BitmapFont();

font.scale((ppuX*0.02f));

font.draw(spb, "Score:", width/2-ppuX*2f, height-0.5f*ppuY);

    Check out [this](http://www.badlogicgames.com/wordpress/?p=2300) blog post. 
```

？？？这只是解释了如何使用我所说的在当前版本中已弃用的 .scale() 方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-12T16:42:43.447

在**scene2d**中，如果要对所有标签应用抗锯齿，请将其放在第一个屏幕的构造函数上：

```
skin.getFont("default-font").getRegion().getTexture().setFilter(Texture.TextureFilter.Linear, Texture.TextureFilter.Linear); 
```

这是我游戏中的第一个屏幕：

```
...
public class MainMenuScreen implements Screen {    
    public MainMenuScreen() {
        ...
        skin.getFont("default-font").getRegion().getTexture().setFilter(Texture.TextureFilter.Linear, Texture.TextureFilter.Linear);
    }
} 
```

字体名称在**ui.json**文件中，检查*BitmapFont*和*Label$LabelStyle*部分：

```
"com.badlogic.gdx.graphics.g2d.BitmapFont": {
    "default-font": {
      "file": "default.fnt"
    }
  },
"com.badlogic.gdx.scenes.scene2d.ui.Label$LabelStyle": {
    "default": {
      "font": "default-font",
      "fontColor": "white",
    }
  }, 
```

# android - android将位图放在中间

> ID：14675008
> 
> 赞同：1
> 
> 时间：2013-02-03T17:14:40.070
> 
> 标签：android, bitmap, drawbitmap

我正在设计一个**绘图应用程序**，用户可以在其中从图库中导入图像，然后按比例放大或缩小以适应屏幕宽度或高度。以便用户可以使用以下代码**在导入的图片上绘图。**

我在扩展`View`，命名`DrawView`。与`DrawView`screenwidth相同，但它的高度小于screenheight，因为它上面有一些按钮，将DrawView放在功能按钮下方的Screen底部，所以我声明`DrawViewHeight`.

有关变量的维度和结果的示例，请参见下文。

## 问题：

位图可以正确加载和缩放以适应`DrawView`.

但是，它位于`DrawView`. 我想把它放在屏幕中间，所以我添加了以下代码，但仍然失败。

```
bitmapCanvas.drawBitmap(bitmap, x_adjustment, y_adjustment, null); 
```

如何进一步修改**导入的图像**（在导入时解码并复制为位图）**放置在 的中心`DrawView`**，在加载的缩放位图图像的上方和下方以及左侧和右侧有空白区域（例如白色）？

**注意：**图像周围的空间不得由用户绘制。

## 代码：

**声明：**

```
private Bitmap bitmap; // drawing area for display or saving
private Canvas bitmapCanvas; // used to draw on bitmap 
```

**OnSizeChanged：**

```
 public void onSizeChanged(int w, int h, int oldW, int oldH)
   {
      super.onSizeChanged(w, h, oldW, oldH);
      DrawViewWidth = w;       
      DrawViewHeight = h;

      bitmap = Bitmap.createBitmap(getWidth(), DrawViewHeight, Bitmap.Config.ARGB_8888);
      bitmapCanvas = new Canvas(bitmap);
      bitmap.eraseColor(Color.WHITE); // erase the BitMap with white            
   } 
```

**绘制：**

```
 @Override
   protected void onDraw(Canvas canvas)  // called each time this View is drawn 
   {
      canvas.drawBitmap(bitmap, 0, 0, paintScreen);       
   } 
```

**加载图片：**

```
 public void load_pic(final String picturePath) 
   {   

// get screen dimension first
WindowManager wm = (WindowManager) context_new.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay();
final int screenWidth = display.getWidth();
final int screenHeight = display.getHeight(); 

//get importing bitmap dimension
Options op = new Options();
op.inJustDecodeBounds = true;
Bitmap pic_to_be_imported = BitmapFactory.decodeFile(picturePath, op);
final int x_pic = op.outWidth;
final int y_pic = op.outHeight;

// scaling     
final int IMAGE_MAX_SIZE= (int) Math.max(DrawViewWidth, DrawViewHeight);

int scale = 1;
if (op.outHeight > IMAGE_MAX_SIZE || op.outWidth > IMAGE_MAX_SIZE) {
scale = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE /  (double) Math.max(op.outHeight, op.outWidth)) / Math.log(0.5)));  }

final BitmapFactory.Options o2 = new BitmapFactory.Options();
o2.inSampleSize = scale;

// Start loading image to the DrawView

if ((x_pic > DrawViewWidth) || (y_pic > DrawViewHeight))
{

AlertDialog.Builder onBackBuilder = new AlertDialog.Builder(context_new);

onBackBuilder.setPositiveButton(R.string.buttontext_create_load_pic_stretch, new DialogInterface.OnClickListener() 
    {
        //skipped
    }

onBackBuilder.setNegativeButton(R.string.buttontext_create_load_pic_keep_scale, new DialogInterface.OnClickListener() 
{
    public void onClick(DialogInterface dialog, int id) 
    {                       

    float xratio = (float) x_pic / (float) screenWidth;
    float yratio = (float) y_pic / (float) DrawViewHeight;
    int adjusted_x = 0;
    int adjusted_y = 0;

    if (xratio >= yratio) {adjusted_x = screenWidth; adjusted_y = (int) (y_pic / xratio);}
    if (xratio < yratio) {adjusted_y = DrawViewHeight; adjusted_x = (int) (x_pic / yratio);}                      

    bitmap = (BitmapFactory.decodeFile(picturePath, o2));
    bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
    bitmap = Bitmap.createScaledBitmap(bitmap, adjusted_x, adjusted_y, true);                     

    int x_adjustment = (screenWidth - adjusted_x) /2;
    int y_adjustment = (DrawViewHeight -adjusted_y) /2;

    bitmapCanvas.drawBitmap(bitmap, x_adjustment, y_adjustment, null);

    // How to modify to put to center of DrawView????                 

    invalidate();
    }             
});

AlertDialog alert = onBackBuilder.create();
alert.show();          
} 
```

## 变量的维度和结果示例：

```
Screen         : 480W * 800H
DrawView       : 480W * 590H
Original image : 3264W * 2448H
Scaled image   : adjusted_x=480 (meet screenwidth), adjusted_y=360
x_adjustment   : 0
y-adjustment   : 115 
```

## 布局.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<com.pearmak.drawing.DrawView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/drawView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_gravity="center_vertical|center_horizontal|center"
            android:background="@drawable/drawview_border" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-25T10:52:11.147

```
 // You can try this :         

            int width = containerBitmap.getWidth();
            int height = containerBitmap.getHeight();
            float centerX = (width  - centeredBitmap.getWidth()) * 0.5f;
            float centerY = (height- centeredBitmap.getHeight()) * 0.5f;
            mCanvas.drawBitmap(centeredBitmap, centerX, centerY, paint); 
```

> 您可以使用它在另一个位图的中心绘制位图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:12:51.957

在您`onDraw()`指定`(0,0)`的`bitmap`(x,y) 中，它将在您的左上角绘制它，`DrawView`因此一旦调用您的`x_adjustment, y_adjustment`效果就会丢失。`onDraw`

你应该在里面而不是里面做你的`bitmap`位置调整代码`onDraw``onClick`

```
@Override
protected void onDraw(Canvas canvas)  // called each time this View is drawn 
{
  canvas.drawBitmap(bitmap, x_adjustment, y_adjustment, null);       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:32:21.560

正如 iTech 所指出的，要在 DrawView 的中心绘制位图，您需要在 onDraw 方法内的正确位置绘制它。

创建两个附加字段：

```
int x_adjust, y_adjust; 
```

在您的 onClick 中（加载位图时），计算正确的中心，并将 x_adjust 和 y_adjust 设置为相关值。然后确保在 onDraw 方法中使用这些值（而不是 0,0）。

```
@Override
protected void onDraw(Canvas canvas)
{
    canvas.drawBitmap(bitmap, x_adjust, y_adjust, null);       
} 
```

注意：确保在 onSizeChanged 方法中也重新计算 x_adjust 和 y_adjust。否则旋转设备后位图将不再居中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T17:17:10.043

您的`LayoutParameters`imageview 或 imageview 的父视图需要在屏幕内指定居中

另外，发布您的 XML 布局（如果有），以及在代码中将位图作为图像视图的一部分的位置

# php - PHP 时间执行和在浏览器中显示内容准备好了吗？

> ID：14675012
> 
> 赞同：-1
> 
> 时间：2013-02-03T17:15:01.483
> 
> 标签：php, time

首先，脚本有时需要执行，并在 30 秒后停止。说执行时间最长约为 30 秒（我知道我们可以在 httpconf 中更改此参数）但我不知道最长执行时间可能是 1 小时或更长时间。

所以我想知道php中是否没有时间限制执行？

第二个问题：当它准备好并继续执行时，如何在浏览器中显示内容，因为我总是等待脚本结束才能看到浏览器中显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:18:54.393

下次您发布问题时，请确保对其进行更好的研究。这两个问题在 stackoverflow 和互联网上都有很好的记录。

现在你的答案......让它运行直到完成，不管它需要多少时间：

[http://www.php.net/manual/en/function.set-time-limit.php](http://www.php.net/manual/en/function.set-time-limit.php)

```
set_time_limit(0); 
```

要在生成内容后立即显示内容：

[http://www.php.net/manual/en/function.flush.php](http://www.php.net/manual/en/function.flush.php)

```
ob_flush();
flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:17:55.840

1.  应该从控制台运行可能运行这么长时间的脚本。浏览器超时也可能会干扰通过浏览器运行它。

2.  如果您使用控制台脚本，您可以将输出路由到数据库并从那里查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:23:35.487

1.  你有`php.ini`这个代码。我不确定您是否可以从`php.ini`.

    ```
    ; Maximum execution time of each script, in seconds
    ; http://php.net/max-execution-time
    ; Note: This directive is hardcoded to 0 for the CLI SAPI
    max_execution_time = 30 
    ```

2.  你不能在 php.ini 中做到这一点。脚本一直运行，直到完成执行（正常或错误）。

# asp.net-mvc-3 - MVC3 RenderPartial 和 ViewBag

> ID：14675015
> 
> 赞同：3
> 
> 时间：2013-02-03T17:15:27.530
> 
> 标签：asp.net-mvc-3, razor, viewbag

我会尽量保持简短：

在视图中

```
@Html.RenderPartial("myview", Model.SubModel, 
     new ViewDataDictionary()
     {
          { "thing", Model.Thing }
     }) 
```

在 myview 中，我们看到“thing”是可用的，即这会在 myview 视图中产生 Model.Thing 的值：

```
@ViewBag.thing 
```

伟大的！简单的

但是我需要对事物做一些事情（顺便说一下，事物不能成为 SubModel 的一部分），即在我的视图引擎或理想情况下在控制器中访问它，例如：

```
public ActionResult myview(SubModelType vm)
{
    var thing = ViewBag.thing; // oh dear this doesnt exist.. but is there when the view is rendered 
```

所以我的问题是，如果 ViewBag 在生成的 myview 中可用，它必须以某种方式在 httpcontext 中传递，或者在 controllercontext 的某个地方传递？有谁知道为什么它在控制器中不可用但在视图中以及我如何能够访问它？

## 编辑

对不起，我在这里错过了一个关键点！当“myview”被发送回控制器时，调用一个名为 myview 的操作，我希望在其中呈现给 myview 的 ViewBag 可用。但当然不是，它已在“myview”中使用，仅此而已。因此，如果我想在 myview 操作中使用它，我需要将其存储在该视图的 ViewBag 中，或者设置 viewmodel 的一些值，以便可以将其返回到操作中。

那有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:02:57.180

> 对不起，我在这里错过了一个关键点！当“myview”被发送回控制器时，调用一个名为 myview 的操作，我希望在其中呈现给 myview 的 ViewBag 可用。

哦不，你不可能期待这样的事情。这不是 ASP.NET MVC 的工作方式。当您向控制器操作发送 HTTP 请求时，默认模型绑定器将拦截此请求并查看请求中发布的值并将它们绑定到您的操作参数：

```
[HttpPost]
public ActionResult myview(SubModelType vm, ThingViewModel thing)
{
    ...
} 
```

这显然假设这些*事物*值是原始请求的一部分。因此，例如，如果您提交一个表单，您应该在该表单中包含模型绑定器可以使用的相应字段。

可以这样想：可以从任何客户端调用 ASP.NET MVC 控制器操作。例如来自 iPhone 应用程序。正如你所知，iOS 中没有这样的概念`ViewBag`。所有这一切都会发生，默认模型绑定器将查看已发布的值并尝试对您的操作作为参数的视图模型进行水合。

另一方面，如果您无法将这些*事物*值作为请求的一部分（通过在表单中​​包含相应的输入字段），您只能从隐藏字段中发送此*薄*的 ID，然后在您的控制器操作中使用此 ID 进行查询您的底层数据存储，用于从您首次呈现此表单时最初检索的同一位置检索*事物*。

有些人可能还建议您将*事物*存储在 Session 中，然后在 POST 操作中从 Session 中读取值。我不是那些人。这是一种替代方法。

# java - java - 如何从java中较大的子字符串中提取多个子字符串？

> ID：14675017
> 
> 赞同：0
> 
> 时间：2013-02-03T17:15:46.643
> 
> 标签：java, jsoup

[我需要一些帮助来从链接（ http://www.informatik.uni-trier.de/~ley/pers/hd/k/Kumar:G=_Praveen.htm](http://www.informatik.uni-trier.de/~ley/pers/hd/k/Kumar:G=_Praveen.htm)）中提取表中的子字符串。

我只需要提取作者的姓名并将其存储到二维数组中。例如：

> ```
> a[0][0]= G. Praveen kumar
> a[0][1]= Anirban Sakar.
> a[1][0]= G. Praveen Kumar,
> a[1][1]= Arjun Kumar Murmu,
> a[1][2]= Biswas Parajuli ,
> a[1][3]= Prasenjit Choudhury 
> ```

以此类推下一行（直到表格末尾）...我尝试过的代码如下..

我需要提取作者的姓名（子字符串）并存储在二维数组中，因为名称用逗号分隔，并且：后跟文章的名称。我不希望将文章的名称存储在二维数组，但只有人的名字，而表的结尾。

任何帮助，将不胜感激。提前致谢。

```
package codetrial;
import java.io.*;
import java.lang.String.*;
import org.jsoup.*;
import org.jsoup.nodes.*;
import java.io.BufferedWriter.*;
import java.io.FileWriter.*;
import java.io.IOException.*;
import java.util.*;
import org.apache.commons.lang.StringUtils;

public class Main {
    public static void main(String[] args) {
        try{
            String a;
            final String url="http://www.informatik.unitrier.de/~ley/pers/hd/k/Kumar:G=_Praveen.html";              
            Document doc = Jsoup.connect(url).get();
            for(Element element : doc.select("table div.data") ) {
                a = element.text();
                String[] names = a.split(", "); // comma and space
                String name_one = StringUtils.substringBetween(url, " ", ",");
                String name_two = StringUtils.substringBetween(url, ",", ":");
                System.out.println("person1 = " + name_one);
                System.out.println("person2 = " +name_two);
                for(String name : names) {
                    System.out.println(name);        
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:52:24.713

您可以使用[Jsoup](http://jsoup.org/cookbook/input/load-document-from-url)库来执行此操作。看我的例子：

```
import java.util.ArrayList;
import java.util.List;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class SourceCodeProgram {

    public static void main(String[] args) throws Exception {
        System.out.println(PageParser.readAuthors("http://www.informatik.uni-trier.de/~ley/pers/hd/k/Kumar:G=_Praveen.htm"));
    }
}

class PageParser {
    public static List<List<String>> readAuthors(String url) throws Exception {
        Document document = Jsoup.connect(url).get();
        Elements elements = document.getElementsByClass("data");
        List<List<String>> result = new ArrayList<List<String>>();
        List<String> authors = new ArrayList<String>();
        for (Element element : elements) {
            for (Element child : element.children()) {
                if ("title".equals(child.className())) {
                    result.add(authors);
                    authors = new ArrayList<String>();
                    break;
                }
                authors.add(child.html());
            }
        }
        return result;
    }
} 
```

输出：

```
[[G. Praveen Kumar, Anirban Sarkar], [G. Praveen Kumar, Arjun Kumar Murmu, Biswas Parajuli, Prasenjit Choudhury], [G. Praveen Kumar, Anirban Sarkar, Narayan C. Debnath]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:17:27.427

在 for 循环中使用以下代码

```
 String htmlString = element.text();
           a = htmlString.replaceAll("\\<.*?>","");
            String names = a.split(":")[0].split(",");
            for(String name : names) {
                System.out.println(name);        
            } 
```

# r - 一列仅省略na值的数据框

> ID：14675018
> 
> 赞同：-1
> 
> 时间：2013-02-03T17:15:48.750
> 
> 标签：r, na

我有一个数据框“accdata”。

```
 dim(accdata)
[1] 6496  188 
```

其中一个变量——“VAL”是我感兴趣的。我必须计算 VAL 等于 24 的实例数。

我尝试了一些返回错误消息的函数。经过一些研究，我似乎需要先从 VAL 中删除 NA 值。

我会尝试类似的方法，`nonaaccdaa <- na.omit(accdata)`除了这会删除任何变量中的 NA 实例，而不仅仅是 VAL。

我尝试过`nonaval <- na.omit(accdata[accdata$VAL])`，但是当我使用 nrow 检查行数时，结果为空。我原本期望的值在 1 到 6,496 之间。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:28:01.280

这应该可以解决问题：

```
sum(accdata$VAL == 24, na.rm=TRUE) 
```

# php - 在一个语句中插入 IGNORE INTO 和 UPDATE

> ID：14675023
> 
> 赞同：3
> 
> 时间：2013-02-03T17:16:05.333
> 
> 标签：php, sql, pdo

我正在运行一个脚本，为我的用户提供下载服务。我想在每个字节级别上监控他们的流量，并且我保存了他们在`$bytes`. 我想将它记录到我的数据库中，并且我正在使用以下功能：

```
register_shutdown_function(function() {
    global $bytes;

    /* Save the traffic to the database */
    $db = new PDO('mysql:host=localhost;dbname=test', 'root', '');
    $st = $db->prepare('INSERT IGNORE INTO `stats`
                        SET `date` = CURDATE(), `bytes` = :bytes');
    $st->bindParam(':bytes', $bytes);
    $st->execute();
    $st = null;
    $db = null;
}); 
```

此查询似乎工作一次，当下载完成时，表中有一条新记录，其中包含以下数据：

```
 date      |    bytes
------------------------
2013-02-03   |   2799469 
```

但是，在其他所有下载中，该`bytes`字段都不会改变。没有新记录，也没有更改表中已有的记录。很明显问题出在哪里，查询尝试插入一条记录，但如果它已经存在，那么它就会中止。我需要这样的更新声明：

```
UPDATE `stats`
SET `bytes` = `bytes` + :bytes
WHERE `date` = CURDATE() 
```

但我想在一个查询中完成整个操作。如果记录不存在，将创建记录的查询，如果存在，则更新现有记录。

可以这样做还是我必须在每次下载时运行两个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:23:18.637

你可能想调查一下`ON DUPLICATE KEY UPDATE`。你可以在[这里](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)阅读。

您的查询看起来像这样。

```
$st = $db->prepare("INSERT INTO `STATS`
VALUES('CURDATE()', :bytes)
ON DUPLICATE KEY UPDATE `BYTES` = `BYTES` + :bytes"); 
```

您还应该避免使用`INSERT IGNORE INTO`，因为在重复行的情况下，不会产生错误，而只会产生警告。

# jquery - jQuery 动画 em

> ID：14675028
> 
> 赞同：0
> 
> 时间：2013-02-03T17:16:47.543
> 
> 标签：jquery

我遇到了一件奇怪的事情，我制作了这段代码，它在单击图标时扩展了页脚，然后当再次单击它时，它会回到起点，即 12em，但是当我再次单击图标时，它会将高度设置为 12px。如果我删除 .animate 并使用 .css 没有问题 你们可以看看我做错了什么

```
$('.mail').click(function() {
    if ($(this).hasClass('closed')) {
        var height = $(window).height() - $('header').outerHeight();
        $(this).removeClass('closed').addClass('open').children('i').attr('data-icon', 'h');
        //$(this).addClass('open').removeClass('closed').children('i').addClass('icon-remove-sign').removeClass('icon-envelope-alt');
        $('footer').animate({
            height: height
        },500);
        $('#contact').delay(400).fadeIn(300);
    } 
    else if($(this).hasClass('open')) {
        $(this).removeClass('open').addClass('closed').children('i').attr('data-icon', 'd');

        $('#contact').fadeOut(300);
        $('footer').animate({
            height: '12em',
        },500);

    }              

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:21:11.920

您的 var 名称有冲突：

```
var height = $(window).height() - $('header').outerHeight();
      ^--- Change this to be hght for example 
```

然后像这样使用它：

```
$('footer').animate({
            height: hght
...
... 
```

或者，您也可以这样做：

```
$('footer').animate({
            'height': height 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:31:28.383

除非您期望`.mail`除法有两个以上`class states`，否则您不需要使用`else if`. 你可以，但你可以这样做来简化代码：

```
$(function() {
$('.mail').click(function() {
    if ($(this).hasClass('closed')) {
        var hght = $(window).height() - $('header').outerHeight();
        $(this).removeClass('closed').addClass('open').children('i').attr('data-icon', 'h');
        $('footer').animate({
            height: hght
        },500);
        $('#contact').delay(400).fadeIn(300);
        return;
        } 
   $(this).removeClass('open').addClass('closed').children('i').attr('data-icon', 'd');
   $('#contact').fadeOut(300);
   $('footer').animate({
        height: '12em',
     },500);
    });
}); 
```

或`else`改用

# mysql - 如果 Count(*) 为零，则返回 NULL

> ID：14675029
> 
> 赞同：3
> 
> 时间：2013-02-03T17:16:48.093
> 
> 标签：mysql

我有以下mysql查询：

```
SELECT count(student_name) AS total_student,school_name FROM `student` 
LEFT JOIN school_info ON school_info.school_id=student.school_id
WHERE student.status='0' 
```

它返回：

```
total_student   school_name
  0               NULL 
```

我想要实现的是，如果 total_student = 0 则不显示任何值或 NULL

```
total_student   school_name 
```

你能告诉我怎么做吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T17:21:47.103

首先，您在`GROUP BY`查询底部缺少一个子句来分组`school_name`：

```
SELECT count(student_name) AS total_student, school_name
FROM student
    LEFT JOIN school_info ON school_info.school_id = student.school_id
WHERE student.status = '0'
GROUP BY school_name 
```

然后，如果您只想不显示 total_student = 0 的行，那么您可以使用 MySQL HAVING 子句：

```
SELECT count(student_name) AS total_student, school_name
FROM student
    LEFT JOIN school_info ON school_info.school_id = student.school_id
WHERE student.status = '0'
GROUP BY school_name
HAVING count(student_name) > 0 
```

或者，您可以更改`LEFT JOIN`为`INNER JOIN`在这种情况下完成相同的事情。

最后，如果您想将 0 替换为 null 但仍有行，则可以更新 select 语句以获取总计：

```
SELECT IF(COUNT(student_name) = 0, NULL, COUNT(student_name)) AS total_student, school_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:26:25.100

添加 HAVING 子句以过滤掉 0 行：

```
SELECT count(student_name) AS total_student,school_name FROM `student` 
LEFT JOIN school_info ON school_info.school_id=student.school_id
WHERE student.status='0'
HAVING total_student > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:25:48.627

请尝试使用 CASE 语法：[http ://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)

# java - 在java中合并文件

> ID：14675032
> 
> 赞同：-2
> 
> 时间：2013-02-03T17:16:54.393
> 
> 标签：java, arrays, file, merge, append

> **可能重复：**
> [在java中合并文件](https://stackoverflow.com/questions/14673063/merging-file-in-java)

我有一组文件，我想将它们合并到一个文件中。我用过这个，但这不起作用

```
public static void joinf(File f1, File f2){

    try{

        InputStream in = new FileInputStream(f1);

        OutputStream out = new FileOutputStream(f2,true);

        byte[] buf = new byte[8192];
        int len;
        while ((len = in.read(buf)) > 0){
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
        System.out.println("File copied.");
    }
    catch(FileNotFoundException ex){
        System.out.println(ex.getMessage() + " in the specified directory.");
        System.exit(0);
    }
    catch(IOException e){
        System.out.println(e.getMessage());            
    }
}

public void pro(File a,File[]b){
    for(int i=0;i<b.length;i++){

        joinf(a,b[i]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:50:32.027

利用：

```
 joinf(b[i],a); 
```

代替

```
 joinf(a,b[i]); 
```

# qtp - QTP 中的自动参数化步骤

> ID：14675037
> 
> 赞同：1
> 
> 时间：2013-02-03T17:17:36.420
> 
> 标签：qtp

使用测试参数自动参数化步骤有什么用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:02:05.237

选择此选项后，QTP 会将步骤的**常量值替换为****操作参数**。

### 选项已禁用

Browser("Google").Page("Google").WebEdit("q").Set **"hello world"**

### 启用选项

Browser("Google").Page("Google").WebEdit("q").Set **Parameter("q_Text")** 'q_Text 默认为“hello world”

注意：***文件 -> 设置 -> 参数***显示所有自动创建的参数，例如“q_Text”，您可以在按 F5 回放测试时提供不同的值。

# ruby - 使用葡萄 API 将数据插入 PostgreSQL 的多个表？

> ID：14675038
> 
> 赞同：0
> 
> 时间：2013-02-03T17:17:50.870
> 
> 标签：ruby, json, postgresql, grape-api

这是我的葡萄 API Ruby 代码，它将发布到它的 JSON 数据插入到单个表中：

```
 class Posts < Grape::API

  version 'v1', :using => :path
  format :json

  resource 'posts' do
    get "/" do
      Post.all
    end

    get "/:id" do 
      Post.find(params['id'])
    end

    post "/create" do
      Post.create(params['post'])
    end
  end

end 
```

如何使用葡萄 API 将数据插入到多个表中？我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:01:25.550

不确定我是否正确理解了您的问题。

要创建多个帖子，您可以：

*   多次调用您的 API

*   需要写类似批量导入的东西

对于第一个选项，您的问题出在客户端，因为您需要使用 Curl 发出例如 10 个请求。

对于后者，你们都需要在客户端开发一个集合格式（例如 JSON [ {..}, {..}, .. ]，然后在你的 API 中处理集合格式。

# c - 用于简单 GUI 的编程语言或库？

> ID：14675040
> 
> 赞同：1
> 
> 时间：2013-02-03T17:18:02.060
> 
> 标签：c, linux, user-interface

用 GUI 制作程序的编程语言是什么。我知道有一种方法可以在 Windows 中使用 C 来制作 GUI，但我想用 Linux 编程并使我的程序也与其他操作系统兼容。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T17:19:19.760

如果您只想制作一个 GUI，为什么不直接使用 HTML？

或者，如果您真的希望它成为一个更原生的应用程序，可以考虑使用 Java。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T17:24:21.490

> 我知道有一种方法可以在 Windows 中用 C 制作 gui，但我想用 Linux 编程

[谁告诉你不能在 Linux 上用 C 语言编写 GUI 应用程序...](http://www.gtk.org/)

此外，为了快速创建 GUI，还有[wxPython。](http://www.wxpython.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T17:47:21.943

您不能使用标准 C 库创建 GUI。不过，您可以使用外部库制作一个。

使用[OpenCV](http://opencv.org/)可以制作 GUI，并且该项目背后有一个大型社区。你可以在他们的网站上找到很多代码示例和教程。此外，您可以将 OpenCV 用于许多其他与[计算机视觉](https://en.wikipedia.org/wiki/Computer_vision)相关的事情。

您还可以使用[GTK+](http://www.gtk.org/)为您的程序编写 GUI。它非常简单，并且易于初学者使用。不过它更侧重于图形，如果您想要外部库所需的其他功能，您可能无法使用 GTK+。

# jakarta-ee - 在 WebSphere Application Server 7.0 中更新 Web 应用程序时，env-entry 值会丢失

> ID：14675041
> 
> 赞同：1
> 
> 时间：2013-02-03T17:18:01.383
> 
> 标签：jakarta-ee, websphere, web.xml, java-ee-5

我有一个部署到 WebSphere Application Server 7.0 的 Web 应用程序 (*.war)。在部署描述符 (web.xml) 中，我使用`<env-entry>`-Tag 定义了几个环境条目。我可以使用管理控制台配置这些环境条目（更改/设置它们的值）。但是，当我将我的 Web 应用程序更新到新版本时（首先，我在应用程序列表中选中我的应用程序条目旁边的框，然后从提供的操作中选择“更新”）我配置的值已经得到lost 分别被部署描述符中定义的值覆盖。

这种行为是否正确并与 Java EE 规范同步？如果是，有没有办法防止这种情况？我有大约 10 个环境条目，每次安装都不同，每次更新到 Web 应用程序的新版本时重新配置它们是很痛苦的。

在 Apache Tomcat 6.0 中，我习惯于在 context.xml 中覆盖来自 web.xml 的环境条目。如果我使用新版本重新部署我的应用程序，该文件不会被覆盖。因此，我不必在每次部署新版本时重新配置我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:49:23.233

我记得在直接部署 WAR 文件时看到过类似的问题。相反，您应该构建一个包含 WAR 的 EAR，然后部署该 EAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T13:42:50.537

web.xml 文件中定义的值将始终覆盖您使用管理控制台或脚本修改的值。解决方案是：

1.  从 web.xml 文件中删除值。第一次部署应用程序时，您需要设置这些值。但之后更新应用程序时，所有值都不会被覆盖。

2.  将值保留在 web.xml 中并通过脚本部署（而不是通过管理控制台）。在使用 -MapEnvEntryForWebMod 选项部署应用程序时，您可以在此处设置这些值。

# filepicker.io - 存储桶下的 Filepicker s3 自定义文件夹

> ID：14675049
> 
> 赞同：0
> 
> 时间：2013-02-03T17:19:01.927
> 
> 标签：filepicker.io

我们正在尝试使用 Filepicker.io 将用户提交的照片上传到 S3。但看起来文件选择器不允许上传到一个存储桶中的自定义文件夹。

我们拥有的是以下结构。

Bucket_Name/类别/用户名/file.jpg

用户名由我们网站上的每个用户填写。

为什么不允许这样做？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:17:50.040

您需要`path`在 filepicker.store() 调用（[https://developers.filepicker.io/docs/web/#store](https://developers.filepicker.io/docs/web/#store)）中使用参数：

```
filepicker.store(input, {path: 'category/username/file.jpg'},
    function(new_fpfile){
        console.log(JSON.stringify(new_fpfile));
    }
); 
```

# html - 为什么我的按钮没有完全对齐？

> ID：14675051
> 
> 赞同：0
> 
> 时间：2013-02-03T17:19:08.947
> 
> 标签：html, css, image

我在这里发布了一个按钮：

[http://buttontest.raptorshop.com/](http://buttontest.raptorshop.com/)

但由于某种原因，它并没有完全排成一行。什么会导致这种情况？

我尝试更改行高、填充等。

这是我的CSS代码：

```
a.gbutton {
    background: transparent url('buttonside.png') no-repeat scroll top right;
    color: #444;
    display: block;
    float: left;
    font: normal 12px arial, sans-serif;
    height: 82px;
    margin-right: 6px;
    padding-right: 46px; /* sliding doors padding */
    text-decoration: none;
}

a.gbutton span {
    background: transparent url('buttonmain.png') no-repeat;
    display: block;
    line-height: 68px;
    padding: 5px 0 5px 18px;
} 
```

我正在根据我在网上找到的教程进行修改，完美的 CSS 放置对我来说一直是一个困难的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:39:05.277

推拉门技术之所以有效，是因为扩展一个矩形不会改变它的外观。但是扩展一个椭圆会，所以你的代码不会像你期望的那样工作。

这是我能得到的最好的：

```
a.gbutton {
    background: transparent url('buttonside.png') no-repeat scroll right top;
    color: #444;
    display: block;
    float: left;
    font: normal 12px arial, sans-serif;
    height: 82px;
    margin-right: 10px;
    padding-right: 51px;
    text-decoration: none;
}

a.gbutton span {
    background: transparent url('buttonmain.png') no-repeat left top;
    background-size: 100% auto;
    display: block;
    line-height: 68px;
    padding: 5px 0 5px 18px;
    height: 100%;
    width: 100%;
} 
```

**更新**

只需使用单个图像并指定 CSS：

```
background-size: 100% auto; 
```

# django - 将函数转换为装饰器 django

> ID：14675055
> 
> 赞同：1
> 
> 时间：2013-02-03T17:19:26.630
> 
> 标签：django, django-views

我想做这个：

```
@friendship_required 
```

或者

```
@friendship_required(request) 
```

谁能帮我把这个简单的功能变成一个装饰器我想我会经常使用它并且觉得把它变成一个装饰器会更好，或者如果在我的设置文件中我可以如何设置`return`语句？`hasattr`谢谢

```
def friendship_checker(request):
    if hasattr(request.user,'friend'):
        pass
    else:
        return HttpResponseRedirect('/access-denied') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:28:38.533

```
from functools import wraps

def friendship_checker(f):
    @wraps(f)
    def wrapped(request, *args, **kwargs):
        if hasattr(request.user, 'friend'):
            return f(request, *args, **kwargs)
        else:
            return HttpResponseRedirect('/access-denied')

    return wrapped 
```

所以，装饰一个视图：

```
@friendship_checker
def my_view(request):
    ... 
```

# java - 将 Java 7 与官方 Google Appengine Maven 插件一起使用

> ID：14675058
> 
> 赞同：3
> 
> 时间：2013-02-03T17:19:56.180
> 
> 标签：java, google-app-engine, maven, maven-plugin, java-7

> *我在使用 Google Appengine 的[官方 Maven 插件](https://developers.google.com/appengine/docs/java/tools/maven)和 Java 7 时遇到问题。*

# 配置

我的项目配置`pom.xml`很简单：

在属性部分我配置：

```
<gae.version>1.7.4</gae.version> 
```

后来我使用插件：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>2.3.2</version>
  <configuration>
    <source>1.7</source>
    <target>1.7</target>
  </configuration>
</plugin>
<plugin>
  <groupId>com.google.appengine</groupId>
  <artifactId>appengine-maven-plugin</artifactId>
  <version>${gae.version}</version>
</plugin> 
```

# 错误信息

每当我运行时，`mvn appengine:update`我都会收到以下错误：

> 无法更新应用程序：应用程序包含 Java 7 类，但尚未设置 --use_java7 标志。

# 我试图解决它

当然，我试图解决这个问题。跑步

```
mvn appengine:update --use_java7 
```

或者

```
mvn appengine:update -D--use_java7 
```

没有帮助，因为该标志不用于 Maven 插件，而是用于`appcfg`脚本。

*如何将标志传递给脚本，以便我可以使用 Java 7（或者我还能做些什么）？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T20:57:06.053

App Engine Java 7 支持目前适用于 Trusted Tester，尚未公开，您可以在[此处](https://docs.google.com/a/google.com/forms/viewform?id=13UvQiEjr7ob-QXMSFch5LByQN8vHa70Rl98g8ipCf9c)申请 Trusted Tester 。

幸运的是，最新的官方 maven 插件确实实现了这个功能，请参阅[AbstractAppCfgMojo.java](http://code.google.com/p/appengine-maven-plugin/source/browse/src/main/java/com/google/appengine/AbstractAppCfgMojo.java#134)：

```
... ...

/**
 * Use the App Engine Java 7 runtime for this app.
 *
 * @parameter
 */
protected boolean useJava7;

... ...

if (useJava7) {
  arguments.add("--use_java7");
}

... ... 
```

您可以在 pom.xml 中使用以下插件配置来启用 Java7 支持：

```
</build>
  <plugins>
    ... ...
    <plugin>
      <groupId>com.google.appengine</groupId>
      <artifactId>appengine-maven-plugin</artifactId>
      <version>${gae.version}</version>
      <configuration>
        <useJava7>true</useJava7>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

# c# - 您如何将 MVC 的 IDependencyResolver 用于控制器以外的事物？

> ID：14675059
> 
> 赞同：0
> 
> 时间：2013-02-03T17:20:01.597
> 
> 标签：c#, asp.net-mvc-4, ninject

我创建了一个`NinjectDependencyResolver`非常适合将依赖项注入控制器的类。我知道您可以链接依赖项，但我的问题是我在控制器中实例化一个类，然后实例化另一个类。第三类需要注入其他依赖项，例如：

```
public class MyController : Controller {
    MyObject obj;
    public MyController(IMyFirstDependency dependency) {
        obj = new MyObject(dependency);
    }
}

class MyObject {
    MyOtherObject otherObj;
    public MyObject(IMyFirstDependency dependency) {
        otherObj = new MyOtherObject(??????);
    }
}

class MyOtherObject {
    public MyOtherObject(IMySecondDependency dependencyTwo)
    {
        // do something with dependencyTwo
    }
} 
```

注入dependencyTwo的最佳方法是什么？我是否需要将它包含在构造函数中`MyObject`以便我可以使用链接功能，还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:28:22.913

您可以`MyObject`采取其他依赖项：

```
class MyObject {
    MyOtherObject otherObj;
    public MyObject(IMyFirstDependency dependency, IMySecondDependency dependencyTwo) {
        otherObj = new MyOtherObject(dependencyTwo);
    }
} 
```

现在你只需要在内核中注册这个依赖：

```
kernel.Bind<IMySecondDependency>().To<MyConcreteSecondDependency >(); 
```

但通常你不应该需要这 2 个包装对象并在它们的构造函数 (`MyObject`和`MyOtherObject`) 中进行一些手动实例化。您可以直接使用控制器中的接口。我真的没有看到这些物体的任何意义。如果它们应该充当聚合您的存储库的某些服务类，那很好，只需围绕它们定义一个抽象并让您的控制器直接采用此服务类：

```
public class MyController : Controller {

    private readonly IMyService myService;
    public MyController(IMyService myService) {
        this.myService = myService;
    }

    public ActionResult Index() {
        // you could use your service layer here with this.myService
    }

} 
```

# wpf - 多个视图模型共享同一个视图

> ID：14675063
> 
> 赞同：1
> 
> 时间：2013-02-03T17:20:15.693
> 
> 标签：wpf, xaml, mvvm, binding, viewmodel

我正在开发一个应该具有很多图形功能的应用程序，我正在使用 wpf 构建一个应用层。我想在 mvvm 结构中构建应用层。

我正在构建一个负责图形处理的大型 wpf 控件。因为我开始构建一个负责控制的单一视图模型，这个视图模型变得很大，由于大量使用命令、绑定和行为，包含图形控件的 xaml 也变得很大。

我想将视图模型拆分为几个视图模型，负责图形控件的各个方面。如何将 xaml 拆分为每个视图模型的视图，每个视图模型负责同一控件的自己的绑定、行为、触发器等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:45:52.460

根据您的 ViewModels 实现，有几种方法可以做到这一点。

我想到的第一个想法是，您可以将不同的 DataContext 赋予不同的控件，因此您可以执行以下操作（伪 XAML）：

```
<Window>
    <Grid DataContext="ViewModel1">
        <!-- xaml for that view model 1 -->
    </Grid>
    <Grid DataContext="ViewModel2">
        <!-- xaml for that view model 2 -->
    </Grid>
    <Grid DataContext="ViewModel3">
        <!-- xaml for that view model 3 -->
    </Grid>
</Window> 
```

# iphone - SOAP 请求响应给出了不想要的结果

> ID：14675065
> 
> 赞同：0
> 
> 时间：2013-02-03T17:20:20.107
> 
> 标签：iphone, ios, objective-c, ios-simulator

我正在尝试从 SOAP 请求中获取响应。响应是一个 xml 数据。当我尝试将数据转换为字符串时，它显示 <、> 符号为“>”和“<”与“;” 最后。然后xml解析器无法解析它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:33:23.527

查看[HTML 的这个 NSString 类别。](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)

它向 NSString 添加了几个您可能会发现有用的函数，例如：

```
- (NSString *)stringByDecodingHTMLEntities; 
```

在将字符串提供给 XML 解析器之前，您可以在字符串上运行此函数并解码 HTML 实体。

# ruby-on-rails - Rails 无法调用未定义的方法“charAt”

> ID：14675066
> 
> 赞同：8
> 
> 时间：2013-02-03T17:20:34.083
> 
> 标签：ruby-on-rails, twitter-bootstrap

我有一个 Rails 应用程序收到以下错误：

```
Less::ParseError in Home#index

Showing /Users/burtondav/sites/requestsys/app/views/layouts/application.html.erb where line #20 raised:

Cannot call method 'charAt' of undefined
  (in /Users/burtondav/sites/requestsys/app/assets/stylesheets/bootstrap_and_overrides.css.less)
Extracted source (around line #20):

17:       }
18:   </style>
19: 
20:   <%= stylesheet_link_tag "application", :media => "all" %> 
```

我正在使用的一些 GEMS：

```
gem 'rails', '3.2.11'
gem 'twitter-bootstrap-rails'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'less-rails'
  gem 'commonjs'
  gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'

end 
```

Bootstrap 使用的 LESS 似乎有问题。

我已经阅读了其他几个类似的问题。所以，我将 Ruby 升级到 1.9.3p374。但是，这并没有解决问题。

有任何想法吗？

谢谢！

更新

这是 bootstrap_and_overrides.css.less

```
@import "twitter/bootstrap/bootstrap";
@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings");
@iconWhiteSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings-white"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:40:07.250

我已经临时解决了这个问题。mixins.less 有一个语法更改，似乎只有 LESS.js 支持

举个例子：

2.3 后版本：

```
.offsetX (@index) when (@index > 0) {
  .offset@{index} { .offset(@index); }
  .offset@{index}:first-child { .offsetFirstChild(@index); }
  .offsetX(@index - 1);
} 
```

2.3 之前的版本

```
.offsetX (@index) when (@index > 0) {
  (~'.offset@{index}') { .offset(@index); }
  (~'.offset@{index}:first-child') { .offsetFirstChild(@index); }
  .offsetX(@index - 1);
} 
```

将 (~"") 添加到它被删除的所有位置后（您必须查看 2.3 的差异和之前的版本才能看到它被删除的位置，我的所有资产再次编译没有错误并且仍然使用 LESS。

顺便说一句，这种变化仅在 mixins.less 中，总共只有 5 或 6 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:31:49.567

遇到了同样的失败。通过将 twitter-bootstrap-rails 回滚到版本来修复它`2.1.4`（在撰写本文时，最新的是`2.2.4`）

```
# Gemfile
...

group :assets do
  ...

  gem "therubyracer"
  gem "less-rails"
end

gem "twitter-bootstrap-rails", '2.1.4' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T19:48:04.420

在评论中与您联系后。似乎答案在于使用 twitter-bootstrap-rails 或 less-rails 打开一个 github 问题来描述您的问题。您还可以关注原始问题：[https ://github.com/seyhunak/twitter-bootstrap-rails/issues/72](https://github.com/seyhunak/twitter-bootstrap-rails/issues/72)

否则，我们会为您提供两种解决方案：

1.  使用 SASS 版本：[https ://github.com/jlong​​/sass-twitter-bootstrap](https://github.com/jlong/sass-twitter-bootstrap)
2.  使用他们网站上可用的原生 css 版本：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:37:24.957

我以一种迂回的方式解决了这个问题，所以 YMMV。在我的情况下，这个错误是由于将 twitter-bootstrap-rails 从 2.1.6 更新到 2.2.5 引起的，没有对任何文件进行任何编辑。所以试图在开发中重现这一点，我注意到请求半身人图标的 404：

```
ActionController::RoutingError (No route matches [GET] "/assets/twitter/bootstrap/glyphicons-halflings"): 
```

由于我使用的是 font-awesome，我只是从我的 CSS 中删除了对这些精灵的所有引用：

```
# bootstrap_and_override.less
//@iconSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings");
//@iconWhiteSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings-white");
// Glyphicons
//@import "twitter/bootstrap/sprites.less"; 
```

这反过来导致了这个错误：

```
variable @fontAwesomeEotPath_iefix is undefined 
```

这是一个常见的升级问题，并通过添加以下行[来解决：](https://stackoverflow.com/questions/13708303/variable-fontawesomeeotpath-iefix-is-undefined)

```
@fontAwesomeEotPath_iefix: asset-path("fontawesome-webfont.eot#iefix"); 
```

之后，一切都恢复正常。

# html - CSS浮动侧边栏和两列可变长度的帖子

> ID：14675074
> 
> 赞同：0
> 
> 时间：2013-02-03T17:21:22.077
> 
> 标签：html, css, css-float

我想在左边浮动一个侧边栏，在右边浮动一个幻灯片（可能是一个 div、li 等），下面有两列博客文章（左图[，](https://i.imgur.com/WFgtSbr.png)其中数字代表标记的顺序对于帖子出现在源中）。有时幻灯片不会出现，帖子需要向上移动以取代它的位置（右图[在这里](https://i.imgur.com/WFgtSbr.png)）。

我尝试过类似的事情：

```
div#sidebar {
float:left;
width:240px;
}

div#right_column {
margin-left: 260px;
}

div#right_column div#slideshow {
width:640px;
height:360px;
}

div#right_column ol#posts li.post.odd {
float:left;
clear:left;
}

div#right_column ol#posts li.post.even {
margin-left:320px;
}

<div id="container">
<div id="header"></div>

<div id="sidebar"></div>

<div id="right_column">
    <div id="slideshow"></div>

    <ol id="posts">
        <li class="post odd"></li>
        <li class="post even"></li>
        <li class="post odd"></li>
        <li class="post even"></li>
        <li class="post odd"></li>
    </ol>
</div>

<div id="footer"></div>
</div> 
```

但随后帖子清除了侧边栏（将它们向下移动到侧边栏下方，而不是在它旁边。

我还尝试做类似的事情：

```
div#sidebar {
float:left;
width:240px;
}

div#slideshow {
width:640px;
height:360px;
margin-left:260px;
}

ol#posts li.post.odd {
margin-left:260px;
}

ol#posts li.post.even {
float:right;
}

<div id="container">
<div id="header"></div>

<div id="sidebar"></div>

<div id="slideshow"></div>

<ol id="posts">
    <li class="post odd"></li>
    <li class="post even"></li>
    <li class="post odd"></li>
    <li class="post even"></li>
    <li class="post odd"></li>
</ol>

<div id="footer"></div>
</div> 
```

但随后右栏中的第一个帖子被推到左栏中的第一个帖子下方。

[这个问题](https://stackoverflow.com/questions/5234749/css-floating-divs-at-variable-heights/5234858#5234858)与我想要的非常相似，但他们试图浮动三列可变高度的帖子，而我只需要两列。我认为必须有一个纯 CSS 解决方案，因为我非常接近。

感谢您提供的任何帮助:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:34:46.983

你的代码很适合幻灯片。您的问题来自`ol`您的帖子仅使用 1 的事实。

您在右栏中的帖子**被推**到下方，因为它*在您在***左栏**中的第一个帖子之后（并且浮动右侧会将您的第二个帖子与您的第一个帖子放在同一级别，前提*是*您将它​​放在 HTML 代码*之前*）。您可以尝试将“奇数”`li`放在左侧浮动中。

但这会导致一些奇怪的行为，因为您的帖子有不同的高度。例子：

![在此处输入图像描述](../Images/626955cef377f1a1a39bd28347b5c8e2.png)

这里最好的解决方案是使用**两**列：

*   一个用于“奇怪”的帖子
*   一个用于“偶数”职位

您的布局类似于一个[Pinterest](http://pinterest.com/ "Pinterest")：可变高度和多列。他们通过使用绝对位置来实现这一点，但很难维护，所以我会选择两列。

# postgresql - PostgreSQL 查询显然没有使用多列索引

> ID：14675075
> 
> 赞同：0
> 
> 时间：2013-02-03T17:21:25.037
> 
> 标签：postgresql, query-optimization

运行 Heroku “Crane” PostgreSQL 实例（版本 9.1.6）

我有一张销售点表；货币金额以当地货币计算。我有一个货币换算表，其中包含任何给定日期的每种货币和欧元之间的换算系数。我想总结给定书籍（产品）的销售额、退货、赠品和收入（以美元计）。所以我加入了货币兑换表，一次将当地货币兑换成欧元，然后再次将欧元兑换成美元（请记住，汇率根据销售的结算日期而有所不同）。因此，每个要考虑的销售点都将两次加入货币兑换；实验告诉我，这是主要的减速因素。

所以我正在尝试优化以下查询：

```
SELECT
    sum(paid_sales - paid_returns) as paid_units,
    sum(royalty_amt*(uu_cc.rate / sp_cc.rate)) as royalty_amt, 
    sum(free_sales - free_returns) as free_units,
    sum(lent_units) as lent_units 
  FROM "sales_points" 
  join currency_conversions sp_cc
    on sp_cc.date = sales_points.settlement_date
   and sp_cc.currency = sales_points.currency 
  join currency_conversions uu_cc
    on uu_cc.date = sales_points.settlement_date
   and uu_cc.currency = 'USD' 
  WHERE "sales_points"."book_id" = 234
  LIMIT 1 
```

我创建了以下索引：

```
CREATE INDEX index_currency_conversions_on_date_and_currency
  ON currency_conversions
  USING btree (date, currency COLLATE pg_catalog."default"); 
```

然而 EXPLAIN（在运行 ANALYZE 之后）告诉我它正在对货币转换表进行顺序扫描。如果它很重要，`date`则为“日期”`currency`类型并且为“char var(255)”类型。

这是查询计划：

```
Limit  (cost=7285.04..7285.04 rows=1 width=39) (actual time=103.166..103.167 rows=1 loops=1)
  Buffers: shared hit=916
  ->  Aggregate  (cost=7285.04..7285.04 rows=1 width=39) (actual time=103.163..103.163 rows=1 loops=1)
        Buffers: shared hit=916
        ->  Hash Join  (cost=584.15..7256.29 rows=6388 width=39) (actual time=60.513..92.084 rows=5840 loops=1)
              Hash Cond: (sp_cc.date = uu_cc.date)
              Buffers: shared hit=916
              ->  Hash Join  (cost=351.63..6985.45 rows=6388 width=39) (actual time=52.454..72.418 rows=5840 loops=1)
                    Hash Cond: ((sales_points.settlement_date = sp_cc.date) AND ((sales_points.currency)::text = (sp_cc.currency)::text))
                    Buffers: shared hit=763
                    ->  Bitmap Heap Scan on sales_points  (cost=54.09..6630.06 rows=6446 width=30) (actual time=0.912..7.020 rows=5840 loops=1)
                          Recheck Cond: (book_id = 234)
                          Buffers: shared hit=610
                          ->  Bitmap Index Scan on index_sales_points_on_book_id  (cost=0.00..53.77 rows=6446 width=0) (actual time=0.809..0.809 rows=6521 loops=1)
                                Index Cond: (book_id = 234)
                                Buffers: shared hit=22
                    ->  Hash  (cost=214.95..214.95 rows=20649 width=16) (actual time=51.502..51.502 rows=20649 loops=1)
                          Buckets: 4096  Batches: 1  Memory Usage: 968kB
                          Buffers: shared hit=153
                          ->  Seq Scan on currency_conversions sp_cc  (cost=0.00..214.95 rows=20649 width=16) (actual time=0.007..21.153 rows=20649 loops=1)
                                Buffers: shared hit=153
              ->  Hash  (cost=225.27..225.27 rows=2071 width=12) (actual time=8.040..8.040 rows=2071 loops=1)
                    Buckets: 1024  Batches: 1  Memory Usage: 89kB
                    Buffers: shared hit=153
                    ->  Seq Scan on currency_conversions uu_cc  (cost=0.00..225.27 rows=2071 width=12) (actual time=0.021..5.963 rows=2071 loops=1)
                          Filter: ((currency)::text = 'USD'::text)
                          Buffers: shared hit=153
Total runtime: 103.306 ms 
```

有谁知道为什么它不使用我的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:11:29.773

多列索引在这里有些错误。您可能希望两列上有两个单独的索引，因为这为规划器提供了更大的灵活性。

您当前的索引不能与您的查询一起使用，因为它需要从表中查询日期（btree 首先是日期，其次是货币）。如果列按其他顺序排列，它可能有用，但不能在日期更具选择性的情况下使用。

您最好的选择是为这两个字段设置单独的索引。通过这种方式，规划器可以选择预期哪个索引对手头的查询更具选择性，而不必采用或保留对给定查询可能具有可疑价值的索引。

另请注意，PostgreSQL 可以跨多个索引进行位图索引扫描，允许它在必要时同时使用两个索引。

# c# - 覆盖属性

> ID：14675078
> 
> 赞同：1
> 
> 时间：2013-02-03T17:21:40.173
> 
> 标签：c#

我正在尝试覆盖程序中的属性。这基本上是我想要做的：

```
class A { public int test = 7; }

class B : A { public int test = 8; }

class Program
{
    static void Main(string[] args)
    {
        A test1 = new A();
        A test2 = new B();

       Console.WriteLine(test1.test);
       Console.WriteLine(test2.test);

    }
} 
```

当我希望它在第二种情况下显示 8 时，这两种情况下都显示 7....

我已经尝试过 virtual 和 override 以及 new (public new int test = 8;) 但它似乎不起作用

是的，我知道我应该使用 private 和 getter。我只是想知道这是否可能？

**编辑：**我不是本地 C# 程序员，如果我混淆了这些术语（例如字段和属性），请原谅我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:24:31.480

> 我正在尝试覆盖程序中的属性。

```
class A { public int test = 7; } 
```

问题是它`int test`不是一个*属性*，它是一个公共*字段*。字段不能被覆盖。

这是一个覆盖属性的示例：

```
class A {
    public virtual int test {
        get {return 7;}
    }
}

class B : A {
    public override int test {
        get {return 8;}
    }
} 
```

这是[ideone 上此代码的演示](http://ideone.com/KFMDsJ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:26:37.157

`test`是一个字段，而不是一个属性。您必须将其更改为属性并添加`virtual`修饰符以允许在子类中覆盖它。然后，您必须使用`override`关键字覆盖类中返回的值`B`：

```
class A
{
    public virtual int test
    {
        get { return 7; }
    }
}

class B : A 
{
    public override int test
    {
        get { return 8; }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T17:25:46.207

改变这个

```
A test2 = new B(); 
```

有了这个

```
B test2 = new B(); 
```

如果将 test2 创建为 A，则调用 A 方法

# python - 文本冒险中匹配用户选择的问题。

> ID：14675080
> 
> 赞同：1
> 
> 时间：2013-02-03T17:21:54.950
> 
> 标签：python, python-2.7, text-based, adventure

我目前正在用 python 进行简单的文本冒险。基本上我希望randint选择1或2然后分配给right_wire，然后raw_input成为wire_choice，然后匹配2以提供所需的结果。我相信你们无论如何都能弄清楚我想在这里做什么。我离这里很近还是真的很远？谢谢！

```
 right_wire = randint(1, 2)

    wrong_wire = 0

    if right_wire == 1:
        wrong_wire = 2
    elif right_wire == 2:
        wrong_wire = 1
    else:
        print "ERROR"

    while True:
        print "Which wire do you pull?"
        print
        print "1\. The red one."
        print "2\. The blue one."
        print
        wire_choice = raw_input('*>>*')

        if wire_choice == 1 and right_wire == 1:
            print "**BOMB DEFUSED**"
            return 'engineering2'
        elif wire_choice == 2 and right_wire == 2:
            print "**BOMB DEFUSED**"
            return 'engineering2'
        elif wire_choice == 1 and right_wire == 2:
            print "**FAILED**"
            return 'death'
        elif wire_choice == 2 and right_wire ==1:
            print "**FAILED**"
            return 'death'
        else:
            print no_understand 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T17:28:48.693

为什么不只是：

```
while True:
    print "Which wire do you pull?"
    print
    print "1\. The red one."
    print "2\. The blue one."
    print
    raw_input('*>>*')
    if randint(0, 1):
        print "**BOMB DEFUSED**"
        return 'engineering2'
    else:
        print "**FAILED**"
        return 'death' 
```

/!\ raw_input 返回一个字符串，并且您将返回值与一个整数进行比较，它永远不会匹配：

```
$ python
Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 1 == "1"
False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T17:30:30.153

Python 是一种“强类型”语言。它不会自动将文本（字符串）转换为数字（整数）。它也不会将数字`randint(0, 1)`转换为布尔值。但是您可以告诉它进行转换，例如`str(right_write)`或`int(wire_choice)`。

将数字转换为布尔值有点不同。[Python 对象有一个方法`nonzero`，Python 在需要时隐式调用](https://stackoverflow.com/questions/1087135/boolean-value-of-objects-in-python)该方法，以确定该对象是被认为是假的还是真的。布尔值是 的子类`int`，因此它们具有整数值。您仍然可以选择显式转换为`bool(randint(0, 1))`或使用类似`randint(0, 1) == 0`.

我没有确切解释如何编写您的解决方案，因为我确信您可以从那里获取它，并且您可以自行选择您喜欢如何表达您的代码。

PS我想链接到有关非布尔对象的布尔值的特殊情况的更多信息。特别是，Python 特别允许我们[测试非布尔值的真值](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)。我们被建议这样做，或者至少，[谷歌指南建议测试非布尔值的真值](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=True/False_evaluations#True/False_evaluations)。

# php - 解析通过 javascript 填充内容的页面

> ID：14675081
> 
> 赞同：1
> 
> 时间：2013-02-03T17:22:02.533
> 
> 标签：php, javascript, xpath, xhtml

我正在尝试解析一个通过 javascript 更新内部内容的页面。当我通过 Firebug 查看 html 时，它如下所示：

```
<div id="productinfo">
<h2>
<span id="productname">Computer</span>
</h2>
<span id="servieidLabel" style=""> Service ID: </span>
<span id="snLabel" style="display: none"> Serial Number: </span>
<span id="servidno">12345ABCD</span> 
```

但是，当我右键单击该页面并查看源代码时，下面是 html 的结构：

```
<div id="productinfo">
<h2><span id="productname"></span></h2>
<span id="serviceidLabel" style="display: none"> 
Service ID:  
</span> 
<span id="snLabel" style="display: none">
Serial Number: 
</span> 
<span id="servidno"></span><br>

javascript:
warrantyPage.warrantycheck.displayProductInfo('Computer', true,'12345ABCD', false, ''); 
```

我正在尝试解析并获取类似**Service ID: 12345ABCD**的输出。请帮助我如何去做。我试过下面的代码没有任何结果，因为显然服务 ID 号不是 html 的一部分，而是由 javascript 插入的

```
$servid = $xpath->query("//span[@id='servidno']");
foreach ($servid as $entry) {
echo "Service Id No:" ,$entry->nodeValue."<br />";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:37:46.480

如果javascript填充函数总是具有相同的参数顺序，您可以尝试解析它：

```
$text = "warrantyPage.warrantycheck.displayProductInfo('Computer', true,'12345ABCD', false, '');";

preg_match_all('/\'[^\']+\'/', $text, $result);

print_r($result); 
```

结果将是一个数组：

```
Array
(
    [0] => Array
        (
            [0] => 'Computer'
            [1] => '12345ABCD'
        )
) 
```

**另一种没有正则表达式的方法：**

```
 $text = "warrantyPage.warrantycheck.displayProductInfo('Computer', true,'12345ABCD', false, '');";

    $tail = substr($text, strpos($text, "displayProductInfo(") + 19 , -1);

    $head = strstr($tail, ")", true);

    $args = explode(',', $head); 
```

$args 将成为一个数组：

```
Array
(
    [0] => 'Computer'
    [1] =>  true
    [2] => '12345ABCD'
    [3] =>  false
    [4] =>  ''
) 
```

# java - ejb 获取当前执行的bean

> ID：14675083
> 
> 赞同：1
> 
> 时间：2013-02-03T17:22:26.820
> 
> 标签：java, jakarta-ee, ejb, jboss5.x, ejb-2.x

我有几个无状态 bean 和一些由该 bean 调用的服务类。我不能直接将 bean 实例传递给该服务类。

有什么方法可以获取当前正在执行的 bean 实例？我只是想知道是否有任何现有的机制，所以我不需要编写拦截器和相关逻辑来将 bean 实例保存在某个地方。

更加具体：

```
public class MyBean implements MyBeanInterface, CommonBeanInterface {
     public void businessMethod() {
         SomeService service = ... // service is somehow obtained
         service.doWork();
     }
}

public class SomeServiceImpl implements SomeService {
     public void doWork() {
          CommonBeanInterface currentBean = getCurrentBean(); // its implementation I need
     }
} 
```

因此，在服务类中，我需要获取调用此服务的 bean 实例。

任何信息都有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:26:33.267

我认为没有 API 可以识别调用该服务的 bean。请注意，如果服务与 bean 在同一个容器中（即不涉及远程调用），它们将在同一个线程上执行。所以你可以使用 ThreadLocal 来传递一些信息。

# android - Android：向 HandlerThread 发布消息会使 UI 线程无响应或给出 IllegalStateException

> ID：14675087
> 
> 赞同：2
> 
> 时间：2013-02-03T17:23:24.503
> 
> 标签：android, multithreading

我正在尝试`HandlerThread`在 android 中使用，结果要么是 UI 线程不再响应，要么是一个奇怪的`IllegalStateException`. 我想给你一个关于我的问题的最小例子。

我有一个`DataManager`在创建时实例化工作线程的类：

```
public class DataManager
{
    private final HandlerThread loaderThread = new HandlerThread( "Worker" );
    private final Producer loader; 
```

在这个类里面我有我的`Handler`定义：

```
 private static class Producer extends Handler
    {
        public Producer( Looper looper )
        {
            super( looper );
        }

        @Override
        public void handleMessage( Message msg )
        {
            msg.recycle();
        }
    } 
```

my 的构造函数`DataManager`运行工作线程并将处理程序与线程的 looper 相关联：

```
 public DataManager()
    {
        loaderThread.start();
        this.loader = new Producer( loaderThread.getLooper() );
    } 
```

在`DataManager`被销毁之前，它会停止线程并等待它完成。实际上，我相信这部分与我的问题无关，因为我的`DataManager`实例肯定一直都存在：

```
 @Override
    protected void finalize() throws Throwable
    {
        loaderThread.quit();
        loaderThread.join();

        super.finalize();
    } 
```

最后，我有`doSomething`一个方法，它只是向工作线程发布一条消息：

```
 public void doSomething()
    {
        Message msg = Message.obtain();
        loader.sendMessage( msg );
    } 
```

现在我正在`DataManager`从 UI 线程上的自定义视图内部实例化。当视图即将使用它来绘制自身时，`onDraw`它会调用. 进一步的行为取决于当前是否在后台运行：`doSomething``DataManager``AsyncTask`

*   如果它正在运行，那么此时 UI 线程将变得无响应。
*   否则，我会`IllegalStateException`从 UI 线程的子例程中抛出`Looper.loop`, 说：

    > IllegalStateException：指定的消息队列同步屏障令牌尚未发布或已被删除。

谷歌绝对没有为这条消息提供任何结果。几个小时以来，我一直在阅读文档并寻找类似的问题，但仍然不知道我可能做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T17:43:57.057

知道了。显然，关于回收消息的情况是[这样](http://www.mail-archive.com/android-developers@googlegroups.com/msg67953.html)的：

> 如果您将其发送给处理程序，处理程序/循环器将为您回收它。

因此，**不得**在 内回收消息`handleMessage`。

# routes - Laravel 4.0 嵌套控制器

> ID：14675094
> 
> 赞同：0
> 
> 时间：2013-02-03T17:23:58.970
> 
> 标签：routes, laravel, controllers, laravel-4

我尝试根据以下结构获取 Laravel 4 中的嵌套控制器：

*   应用程序
    *   控制器
        *   根据
            *   基本控制器.php
        *   网站
            *   网站控制器.php

我想让网站路由与扩展 BaseController 的 WebsiteController 相关联。

我尝试了以下事情

**对于 route.php** ( *app/route.php* )

```
Route::resource('website', 'Controllers\Website\WebsiteController'); 
```

**对于 BaseController.php** ( *app/controllers/base/BaseController.php* )

```
use Illuminate\Routing\Controllers\Controller;
class BaseController extends Controller {

    protected function setupLayout(){
        if ( ! is_null($this->layout)){
            $this->layout = View::make($this->layout);
        }
    }
} 
```

**对于 WebsiteController.php** ( *app/controllers/website/WebsiteController.php* )

```
use Controllers\Base\BaseController;
class WebsiteController extends BaseController {
    public function index(){
        return 'index';
    }
} 
```

不幸的是，当我访问[http://mywebsite.com/website](http://mywebsite.com/website)时，它​​根本不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:38:26.040

如果没有错误转储，我们无法确定，但您可以尝试以下方法：

1) 运行 composer 的 dump-autoload，让自动加载器知道新的类：

```
$ php composer.phar dump-autoload 
```

2）我不相信你需要使用`use Controllers\Base\BaseController`指令，因为模型目录是默认自动加载的。由于您没有以不同的方式命名您的控制器，因此`use`不需要该指令。上面的“转储自动加载”应该可以解决问题

3）转储自动加载后，更改

```
Route::resource('website', 'Controllers\Website\WebsiteController'); 
```

对此：

```
Route::resource('website', 'WebsiteController'); 
```

除非您为新控制器定义不同的命名空间，否则不需要使用特定的类（例如“Controllers\Website\WebsiteController”）

# gwt - 根据外形更改入口点类

> ID：14675098
> 
> 赞同：2
> 
> 时间：2013-02-03T17:24:30.627
> 
> 标签：gwt, mobile

如果用户从移动网络浏览器或桌面网络浏览器访问，我希望在我的 GWT 应用程序中加载不同的用户界面。我想知道如何编辑我的 Application.gwt.xml 文件更改基于外形加载的入口点类。我认为这可能是这些方面的东西，但我只是在破解，所以我想知道是否有人有任何想法？

```
<entry-point class="webapp.client.WebAppEntryPoint">
<when-property-is name="formfactor" value="desktop"/>
</entry-point>

<entry-point class="webapp.client.MobileAppEntryPoint">
<when-property-is name="formfactor" value="mobile"/>
</entry-point> 
```

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T19:12:11.290

它几乎和您描述的一样简单——也就是说，一旦您确定了`formfactor`属性以及如何为其选择值。

事实证明，当您创建一个入口点并在您的模块中声明它时，编译器会使用它`GWT.create`来实际创建它的一个实例。这使它受制于模块中声明的重新绑定规则。因此，如果两者都`WebAppEntryPoint`继承`MobileAppEntryPoint`自某个公共超类，则可以在模块中声明该入口点，并对您为触发它们被选中而制定的规则略有不同：

```
<entry-point class="webapp.client.AbstractAppEntryPoint" />
<replace-with class="webapp.client.WebAppEntryPoint">
  <when-type-is class="webapp.client.AbstractAppEntryPoint" />
  <when-property-is name="formfactor" value="desktop"/>
</entry-point>

<replace-with class="webapp.client.MobileAppEntryPoint">
  <when-type-is class="webapp.client.AbstractAppEntryPoint" />
  <when-property-is name="formfactor" value="mobile"/>
</entry-point> 
```

这些规则规定：“当 GWT 尝试启动应用程序时，使用`AbstractEntryPoint`(which implements `EntryPoint`) 来执行此操作。当有人调用`GWT.create(AbstractEntryPoint)`and `formfactor`is`desktop`时，给他们一个`WebAppEntryPoint`实例。当有人调用`GWT.create(AbstractEntryPoint)`and `formfactor`is`mobil`时，给他们一个`MobileAppEntryPoint`实例。

* * *

这就留下了困难的部分——你如何构建`formfactor`属性，定义可能的值，并让应用程序在启动时选择正确的值？

为了帮助回答这个问题，让我们看看 GWT 中已经存在的两个标准属性 -`locale`和`user.agent`. 用户代理检测在 com.google.gwt.useragent.UserAgent 模块中进行管理 - 定义了属性，列出了选择属性的方法，并将一些有用的“确保此接线工作”位添加到应用程序中。可能的语言环境从 com.google.gwt.i18n.I18N 开始，但旨在在您自己的应用程序中进行扩展。这里还有很多额外的东西，定义如何选择应该激活的语言环境。我们想要从 user.agent 中窃取预定义可能的格式因子的想法，并且想要从语言环境代码中读取正确格式因子的想法。

首先，定义属性。

```
 <define-property name="formfactor" values="desktop, mobile" /> 
```

在这个例子中，我们只允许这两个可能的值——实际上，您可能想要桌面（即大和鼠标/键盘）、平板电脑（大和触摸）、手机（小和触摸）或其他一些变化.

接下来，决定如何读取正确的属性值。有两种基本方法可以做到这一点 - 通过编写在模块文件中的简单 javascript 片段，以及通过编写一个基于某些配置设置生成 JavaScript 的类。我将首先使用最简单的一个，然后让您了解如何在 javascript 中实际检测此细节（如果您可以进一步澄清您拥有/需要/期望的内容，请更新问题或评论）：

```
<!-- borrowing/adapting from 
http://code.google.com/p/google-web-toolkit/wiki/ConditionalProperties -->
<property-provider name="formfactor"><![CDATA[
  {
    var ua = window.navigator.userAgent.toLowerCase();
    if (ua.indexOf('android') != -1) { return 'mobile'; }
    if (ua.indexOf('iphone') != -1) { return 'mobile'; }
    return 'desktop';
   }
]]></property-provider> 
```

同样，这进入模块，并定义了一些简单的 JavaScript 来选择值`formfactor`- 如果用户代理包含字符串 'android' 或 'iphone'，则激活该 `mobile`值，否则激活`desktop`。此代码将放置在您的`.nocache.js`文件中，并用于选择正确的排列（使用正确的入口点，如上所述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:43:55.670

除了 Colin 的详细回答之外，您还可以查看 GWT 的 mobilewebapp 标准示例 - [http://code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples%2Fmobilewebapp](http://code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples%2Fmobilewebapp)

示例 FormFactor.gwt.xml - [http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/src/main/java/com/google/gwt/sample/ mobilewebapp/FormFactor.gwt.xml](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/src/main/java/com/google/gwt/sample/mobilewebapp/FormFactor.gwt.xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T19:06:24.200

您可以使用`replace with`

```
 <replace-with class="webapp.client.MobileAppEntryPoint">
    <when-type-is class="webapp.client.WebAppEntryPoint" />
    <any>
      <when-property-is name="formfactor" value="mobile"/>
    </any>
  </replace-with> 
```

注意：我没有尝试使用入口点类..但是对于某些`Widget`类来说工作正常

有关详细信息，请参阅 [Gwt 不同的绑定](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:50:23.397

解决了：

好的，谢谢所有回复的人。我使用了一些每个人的答案来解决问题！首先，我关注了 SSR 并查看了示例 FormFactor.gwt.xml 文件。我将它复制到我的项目中并在我的 App.gwt.xml 文件中引用它。然后我跟随 Colins 并将以下代码添加到我的 App.gwt.xml 文件中，以便根据外形加载不同的 EntryPoint：

```
<entry-point class="webapp.client.AbstractEntryPoint" />

<replace-with class="webapp.client.WebAppEntryPoint">
<when-type-is class="webapp.client.AbstractEntryPoint" />
<when-property-is name="formfactor" value="desktop"/>
</replace-with>

<replace-with class="webapp.client.MobileAppEntryPoint">
<when-type-is class="webapp.client.AbstractEntryPoint" />
<when-property-is name="formfactor" value="mobile"/>
</replace-with> 
```

# jquery - jQuery自动完成类别，选择和焦点不起作用并且列表格式不正确

> ID：14675104
> 
> 赞同：1
> 
> 时间：2013-02-03T17:25:28.437
> 
> 标签：jquery, json, jquery-ui, autocomplete, jquery-ui-autocomplete

我有一个时间......有时间弄清楚为什么我的带有类别和格式化结果的**jQuery 自动完成功能**不起作用。我已经解决了一堆关于 SO 的类似问题，并尝试了我能找到的每一个建议，但似乎没有任何效果。

虽然显示正确，但它没有将列表项附加到顶部 ul。它加一个，然后每个后续结果都附加到同一个列表项。这意味着焦点和选择方法不能按预期工作。

**我试过了：**

*   `_renderItemData(ul, item)`对比`_renderItem(ul, item)`
*   有和没有`.data("item.autocomplete", item)`in`renderItem()`
*   附加`.data("item.autocomplete", {})`到`ul.append`renderMenu 方法中
*   更改类别列表项中使用的类。

任何帮助，将不胜感激。谢谢！

这是完整的代码和[小提琴](http://jsfiddle.net/4dJev/2/)：

```
$(function () {
  function format(item) {
    var cell = '';

    $.each(item.value, function(index, value) {
      cell += "<a class='ui-autocomplete-thumbnail-link' href='" + value.url + "'>";

      cell += "<img class='ui-autocomplete-thumbnail-image' src='" + value.images.small + "' />";

      cell += value.presentation + "</a>";
    });

    return cell;
  }

  $.widget( "custom.categorycomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
      var self = this, current_category = '';

      $.each(items, function(index, item) {
        if (item.label !== current_category) {
          current_category = item.label;
          ul.append($("<li class='ui-category'>" + current_category + "</li>").data("item.autocomplete", {}));
        }

        self._renderItem(ul, item);
      });
    }
  });

var    jsondata = [
    {
        "value": [
            {
                "id": 1,
                "name": "category1-name1",
                "presentation": "category1-presentation1",
                "url": "example.com/category1-url1",
                "images": {
                    "small": "http://sipi.usc.edu/database/preview/misc/4.1.07.png"
                }
            },
            {
                "id": 2,
                "name": "category1-name2",
                "presentation": "category1-presentation2",
                "url": "example.com/category1-url2",
                "images": {
                    "small": "http://sipi.usc.edu/database/preview/misc/4.1.08.png"
                }
            }
        ],
        "label": "category1"
    },
    {
        "value": [
            {
                "id": 3,
                "name": "category2-name1",
                "presentation": "category2-presentation1",
                "url": "example.com/category2-url1",
                "images": {
                    "small": "http://sipi.usc.edu/database/preview/misc/4.1.01.png"
                }
            },
            {
                "id": 4,
                "name": "category2-name2",
                "presentation": "category2-presentation2",
                "url": "example.com/category2-url2",
                "images": {
                    "small": "http://sipi.usc.edu/database/preview/misc/4.1.03.png"
                }
            }
        ],
        "label": "category2"
    }
];

  $('#s1').categorycomplete({
    source: jsondata,
    select: function (event, ui) {
      window.location.href = ui.item.value[0].url.replace(window.location.host, '');

      return false;
    }
  })
  .data( "categorycomplete" )._renderItem = function( ul, item ) {
    return $( "<li>" )
    .data("item.autocomplete", item)
    .append(format(item))
    .appendTo(ul);
  };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:32:32.890

你可能想要这样的东西，注意重组的 JSON：

```
$(function () {
  function format(item) {
    var cell = '';   
      cell += "<a data-url='"+item.url+"' class='ui-autocomplete-thumbnail-link' '>";
      cell += "<img class='ui-autocomplete-thumbnail-image' src='" + item.images.small + "' />";
      cell += item.name + "</a>";  

    return cell;
  }

  $.widget( "custom.categorycomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
      var self = this, current_category = '';

      $.each(items, function(index, item) {
        if (item.label !== current_category) {
          current_category = item.label;
          ul.append($("<li class='ui-category'>" + current_category + "</li>").data("item.autocomplete", {}));
        }

        self._renderItem(ul, item);
      });
    }
  });

var jsondata = [
{
    "label": "category1-presentation1",
    "value": "category1-presentation1",
    "id": 1,
    "name": "category1-name1",
    "url": "example.com/category1-url1",
    "images": {
        "small": "http://sipi.usc.edu/database/preview/misc/4.1.07.png"
    }
},
{
    "value": "category1-presentation2",
    "label": "category1-presentation2",
    "id": 2,
    "name": "category1-name2",
    "url": "example.com/category1-url2",
    "images": {
        "small": "http://sipi.usc.edu/database/preview/misc/4.1.08.png"
    }
},
{
    "value": "category2-presentation1",
    "label": "category2-presentation1",
    "id": 3,
    "name": "category2-name1",
    "url": "example.com/category2-url1",
    "images": {
        "small": "http://sipi.usc.edu/database/preview/misc/4.1.01.png"
    }
}, 
{
    "value": "category2-presentation2",
    "label": "category2-presentation2",
    "id": 4,
    "name": "category2-name2",
    "url": "example.com/category2-url2",
    "images": {
        "small": "http://sipi.usc.edu/database/preview/misc/4.1.03.png"
    }
}
];

  $('#s1').categorycomplete({
    source: jsondata,
    select: function (event, ui) {

        $(this).val('')
        alert('Url is:'+ ui.item.url.replace(window.location.host, ''))

      return false;
    }
  })
  .data( "categorycomplete" )._renderItem = function( ul, item ) {
    return $( "<li>" )
    .data("item.autocomplete", item)
    .append(format(item))
    .appendTo(ul);
  };
}); 
```

演示：http: [//jsfiddle.net/xQEsK/](http://jsfiddle.net/xQEsK/)

# grails - Spring security core plugin：根据其角色为用户提供不同的主页

> ID：14675106
> 
> 赞同：0
> 
> 时间：2013-02-03T17:25:35.567
> 
> 标签：grails, spring-security

我在我的 Grails 应用程序中集成了 Spring 安全核心插件。

```
grails.plugins.springsecurity.successHandler.defaultTargetUrl = "/user/home" 
```

这是我在成功登录后设置默认主页所做的。但我想根据用户角色有不同的主页

目前我有 2 个用户角色 1)"ROLE_ADMIN" 2)"ROLE_USER"

我将如何实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T20:07:10.183

一种快速的方法是在控制器操作中执行逻辑。例如，`home`动作可以根据角色呈现不同的视图，例如：

```
import grails.plugin.springsecurity.annotation.Secured

class UserController {
   def home() {
      String view
      if (SpringSecurityUtils.ifAllGranted('ROLE_ADMIN')) {
         view = 'admin'
      }
      else if (SpringSecurityUtils.ifAllGranted('ROLE_USER')) {
         view = 'user'
      }
      else {
         // ???
      }

      render view: view, model: [...]
   }
} 
```

如果你想在不同的控制器之间分配逻辑，你可以根据角色重定向：

```
import org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils

class UserController {
   def home() {
      if (SpringSecurityUtils.ifAllGranted('ROLE_ADMIN')) {
         redirect controller: '...', action: '...'
         return
      }
      if (SpringSecurityUtils.ifAllGranted('ROLE_USER')) {
         redirect controller: '...', action: '...'
         return
      }
      // ???
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T13:53:01.877

您也可以配置身份验证成功处理程序，它将根据角色将用户重定向到特定控制器。

```
class CustomAuthenticationSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {
    LinkGenerator linkGenerator
    private static final ADMIN_ROLE = 'ROLE_Admin'

    @Override
    protected String determineTargetUrl(HttpServletRequest request, HttpServletResponse response) {
        if(SpringSecurityUtils.ifAllGranted(ADMIN_ROLE)) {
            return linkGenerator.link(controller: 'admin', action: "index")
        }

        return super.determineTargetUrl(request, response);
    }

} 
```

请参阅[Spring Security Core：根据角色将用户重定向到不同的屏幕](http://nimavat.me/blog/springsecuritycore-redirect-user-to-different-screen-based-on-role)

# c# - 为插件 DLL 声明每用户（漫游用户）配置设置？

> ID：14675107
> 
> 赞同：0
> 
> 时间：2013-02-03T17:25:37.430
> 
> 标签：c#, windows, plugins, configuration, app-config

如何为从另一个应用程序加载的特定插件 .DLL 设置每个（漫游）用户配置设置的支持？

我有一个 .DLL 作为加载项/插件从另一个应用程序加载，并且希望独立于加载它的主应用程序，基于机器、.dll（=executable）、漫游用户保留特定于此的配置设置或用户个人资料。

我找到了`System.Configuration.ExeConfigurationFileMap`看起来可能提供我需要的类，但我不知道如何为我的（**插件**）应用程序设置正确的路径。

我到目前为止的代码是：

```
public class MyConfigurationSettings : ConfigurationSection
{
    public static MyConfigurationSettings GetSection (ConfigurationUserLevel ConfigLevel) 
    {
        string configFile = Assembly.GetAssembly(typeof(MyConfigurationSettings)).Location + ".config";
        ExeConfigurationFileMap configFileMap = new ExeConfigurationFileMap();
        configFileMap.ExeConfigFilename = configFile;
        configFileMap.LocalUserConfigFilename = <localUserConfigFile>; // ??? What filename to place here and how to get it based on the current environment ???
        configFileMap.RoamingUserConfigFilename = <roamingUserConfigFile>; // ???;

        System.Configuration.Configuration Config = ConfigurationManager.OpenMappedExeConfiguration(configFileMap, ConfigLevel);
        // ...
    }
} 
```

谁能指出我正确的方向？可用的文档和搜索结果太混乱或不足以让我正确理解这一点。抱歉，如果这似乎是一个愚蠢的问题，但我的 C# (.NET) 技能在 4 年多没有使用它来赚取日常面包后会生锈。

我也相信这主要不是关于配置设置管理的问题，而是如何获取安装特定应用程序实例配置的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T19:29:06.337

您将其设置`RoamingUserConfigFilename = RoamingName.config`并放在漫游配置文件下：

```
%AppData%\[AppName]\[Vendor]\[CodedPath]\[Version]\RoamingName.config 
```

您还设置`LocalUserConfigFilename = LocalName.config`并将其放在本地配置文件下：

```
%LocalAppData%\[AppName]\[Vendor]\[CodedPath]\[Version]\LocalName.config 
```

现在打电话

```
ConfigurationManager.OpenMappedExeConfiguration(
    exeMap,
    ConfigurationUserLevel.PerUserRoamingAndLocal); 
```

配置将按以下顺序读取：

[![](../Images/7bd14d41242f32f35644a947ca56716c.png)](https://i.stack.imgur.com/ty1ll.jpg)

来源[MSDN 博客](https://blogs.msdn.microsoft.com/pedram/2007/08/03/xml-configuration-for-net-applications/)。

对于样本搜索`User.config`下`c:\Users\[User]\AppData`。另见[CP文章](https://www.codeproject.com/Articles/19675/Cracking-the-Mysteries-of-NET-2-0-Configuration)。

**代码示例：**

```
public static MyConfigurationSettings GetSection (ConfigurationUserLevel ConfigLevel) 
{
    try
    {
        string appDataPath = System.Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
        string localDataPath = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);
        System.Configuration.ExeConfigurationFileMap exeMap = new ExeConfigurationFileMap();
        exeMap.ExeConfigFilename = System.IO.Path.Combine(appDataPath, @"MyCompany\MyPlugin\Default.config");
        exeMap.RoamingUserConfigFilename = System.IO.Path.Combine(appDataPath, @"MyCompany\MyPlugin\Roaming.config");
        exeMap.LocalUserConfigFilename = System.IO.Path.Combine(localDataPath, @"MyCompany\MyPlugin\Local.config");

        System.Configuration.Configuration Config = ConfigurationManager.OpenMappedExeConfiguration(exeMap,ConfigLevel);

        return (MyConfigurationSettings)Config.GetSection("MyConfigurationSettings");

    }
    catch (Exception ex) {
        // ...
    }
    return null; // or throw an appropriate exception
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-03T17:45:45.000

通常从您放入的特殊文件夹中加载配置并将其放入漫游（即非本地）位置之一。操作系统根据漫游规范处理其余部分。

ConfigSections 的使用完全无关紧要，除非有非常非常特殊的需要为此使用配置文件。在过去 10 年中我看到的任何 .NET 项目中，该文件从未用于用户特定设置。

# .net - SortedSet / SortedList 具有更好的 LINQ 性能？

> ID：14675108
> 
> 赞同：7
> 
> 时间：2013-02-03T17:25:42.887
> 
> 标签：.net, linq, linq-to-objects, sortedlist, sortedset

假设我们有一个排序集合，例如带有许多 (10M+) 元素的[SortedSet](http://msdn.microsoft.com/en-us/library/dd412070.aspx)或[SortedList 。](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)正在发生大量查询，因此性能很重要。从运行时比较来看，我的印象是 LINQ to Objects 没有利用排序，因此没有利用潜在的性能提升。

第一个示例 - 计算范围内的元素：

```
 var mySortedSet1 = new SortedSet<int>();
        // populate ...
        int rangeCount = (from n in mySortedSet1
                          where ((n >= 1000000000) && (n <= 2000000000))
                          select n).Count(); 
```

不完全确定 LINQ to Objects 在内部做了什么，最坏的情况是检查每一个 O(n) 的元素。通过利用对 O(log n) 中的下限和上限进行二分搜索的排序，可以更快地完成。

第二个示例 - SelectMany 在集合列表中：

```
 var myListOfSortedSets = new List<SortedSet<int>>();
        // populate...

        var q = myListOfSortedSets.SelectMany(s => s).OrderBy(s => s);
        foreach (var n in q)
        {
            Console.WriteLine(n);
        } 
```

如果 LINQ to ~~SQL~~对象要利用排序，它可以在 O(n) 中有效地将所有排序集压缩合并到一个大的排序列表中。结果上的 .OrderBy 然后可以被忽略，因为列表已经排序。

相反，SelectMany 将所有已排序的集合连接到一个大的（现在未排序的）列表中，这将需要另一个 O(n log n) 排序。这可以通过删除 .OrderBy 并观察元素写入控制台的顺序来轻松验证。

我的问题是：**是否已经有另一种更有效的 LINQ to SortedSet/SortedList 实现？**

[i4o](http://i4o.codeplex.com)看起来很有趣，但似乎需要二级索引集合来提高对原始集合的查询性能。我只是希望通过利用排序来更快地对排序集合进行查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T18:32:04.107

LINQ 的问题在于它无法知道排序集的排序方式与查询期望的方式完全相同。由于可以使用`IComparer`//创建任何有序集合`IComparable`，`Comparison<T>`因此不知道这`> 500000`实际上是否有意义。也许您在比较器上有一个自定义方法，首先按奇数/偶数排序，然后按数字排序。在这种情况下，订单将完全混乱，并且在所有情况下都需要 O(n)。

所以为了安全起见，LINQ 需要遍历集合中的所有元素，即使它以某种方式排序。默认`.Where`实现不包含对有序集合的优化。

可以创建一个优化版本，在迭代时牢记现有的顺序，但是很难做到并使其在所有情况下都能正常工作。

您可以创建一个`Between`方法，该方法使用 的`GetViewBetween`方法`SortedSet`返回一个新的预购集合。或者会`.Where`像通常对任何非预排序集一样添加标准。

如果 IQueryable 可以使用 Linq-to-SQL 和实体框架，并且实际上会将您的 Linq 查询转换为 SQL，并让服务器处理索引、排序、过滤等。

# java - 如何使用用户输入和计算输入初始化类实例？

> ID：14675112
> 
> 赞同：-1
> 
> 时间：2013-02-03T17:25:55.647
> 
> 标签：java, class, initialization

我无法弄清楚如何使用用户输入的数据和程序计算的数据来初始化类的实例。

我要求用户提供一些东西，一个名字和一些数字。然后应该调用一个类来存储这些数字并输出各种结果。所以我必须对用户输入的信息进行一些计算，然后将所有这些传递给我的班级，以便我可以输出用户给我的信息以及我在班级中的计算。

我该怎么做呢？

编辑：对不起，忘记细节了。我正在使用 Java，我不确定我可以列出哪些简短的代码示例。让我试试这些。第一个是我的类的构造函数..

```
 public Employee(String empName, double hourlyRate, double regHours, 
                    double grossPay, double regPay, double netPay, 
                    double taxes, double otHours, double otPay, 
                    double totHours)
    { 
```

这是我尝试调用类的实例....

```
Employee myEmployee = new Employee(empName, hourlyRate, regHours, grossPay, 
                                   regPay, netPay, taxes, otHours, otPay, 
                                   totHours); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:36:40.113

它只是 OOP。在类中定义一些变量来存储您传递的值以及您的计算。

为您想要获取的内容定义 getter 方法。

# java - 许多线程处于 IN_NATIVE 状态

> ID：14675113
> 
> 赞同：0
> 
> 时间：2013-02-03T17:26:00.837
> 
> 标签：java, tomcat, ldap

我们在 tomcat 节点中看到了一些奇怪的问题。我拿了线程转储来查看线程状态。大多数线程都处于 IN_NATIVE 状态。有人能告诉我它是什么，是什么原因造成的吗？这是线程的堆栈跟踪。

```
Thread 677: (state = IN_NATIVE)
 - java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) @bci=0 (Compiled frame; information may be imprecise)
 - java.net.SocketInputStream.read(byte[], int, int) @bci=84, line=129 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.InputRecord.readFully(java.io.InputStream, byte[], int, int) @bci=21, line=293 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.InputRecord.read(java.io.InputStream, java.io.OutputStream) @bci=32, line=331 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(com.sun.net.ssl.internal.ssl.InputRecord, boolean) @bci=44, line=789 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(com.sun.net.ssl.internal.ssl.InputRecord) @bci=15, line=746 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.AppInputStream.read(byte[], int, int) @bci=30, line=75 (Compiled frame)
 - java.io.BufferedInputStream.fill() @bci=175, line=218 (Compiled frame)
 - java.io.BufferedInputStream.read1(byte[], int, int) @bci=44, line=258 (Compiled frame)
 - java.io.BufferedInputStream.read(byte[], int, int) @bci=49, line=317 (Compiled frame)
 - com.sun.jndi.ldap.Connection.run() @bci=30, line=808 (Compiled frame)
 - java.lang.Thread.run() @bci=11, line=619 (Interpreted frame)

Thread 675: (state = IN_NATIVE)
 - java.net.SocketInputStream.socketRead0(java.io.FileDescriptor, byte[], int, int, int) @bci=0 (Compiled frame; information may be imprecise)
 - java.net.SocketInputStream.read(byte[], int, int) @bci=84, line=129 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.InputRecord.readFully(java.io.InputStream, byte[], int, int) @bci=21, line=293 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.InputRecord.read(java.io.InputStream, java.io.OutputStream) @bci=32, line=331 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(com.sun.net.ssl.internal.ssl.InputRecord, boolean) @bci=44, line=789 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(com.sun.net.ssl.internal.ssl.InputRecord) @bci=15, line=746 (Compiled frame)
 - com.sun.net.ssl.internal.ssl.AppInputStream.read(byte[], int, int) @bci=30, line=75 (Compiled frame)
 - java.io.BufferedInputStream.fill() @bci=175, line=218 (Compiled frame)
 - java.io.BufferedInputStream.read1(byte[], int, int) @bci=44, line=258 (Compiled frame)
 - java.io.BufferedInputStream.read(byte[], int, int) @bci=49, line=317 (Compiled frame)
 - com.sun.jndi.ldap.Connection.run() @bci=30, line=808 (Compiled frame)
 - java.lang.Thread.run() @bci=11, line=619 (Interpreted frame) 
```

**完整的 Threaddump 是 @** [https://docs.google.com/document/d/16YnK85jrlxvu_PpQrTQxtIWjWmAlt8AF1ddAOzvisCM/edit?usp=sharing](https://docs.google.com/document/d/16YnK85jrlxvu_PpQrTQxtIWjWmAlt8AF1ddAOzvisCM/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:28:19.243

Java 的编写有点像 C++ 的包装语言。一些库仍然使用 c++ 并使用 java 关键字 native。

这基本上意味着他们调用了现在在 c/c++ 代码中执行的本机方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T23:05:47.473

线程被阻止通过 SSL 从 LDAP 服务器进行读取。查看堆栈跟踪。

# java - 从外部 jar 访问类

> ID：14675116
> 
> 赞同：0
> 
> 时间：2013-02-03T17:26:10.590
> 
> 标签：java

我已经搜索了几个小时，但我没有找到解决方案，这是我最后的手段

我有一个通过序列化创建数据文件的程序，文件创建成功，我可以使用相同的程序/包读取数据（反序列化）。

我遇到的问题是必须从另一个程序中读取数据文件，并且我创建了相同的类，但我无法从另一个程序中读取文件（找不到类错误）

```
//Class
public static class
{
   File inst_path = ....
} 
```

所以我创建了一个外部类，以便我可以从同一个类创建数据文件并使用同一个类进行读取。类保存为 jar 文件

如何将两个程序链接到同一个类（外部文件）

**编辑**

目前我正在以这些方式访问我的本地

```
records.classes myclass = new records.classes()
myclass.inst_path = new File... 
```

所以我正在寻找一些看起来像......

```
externaljar.jar.classes myclass = new ... 
```

我知道这行不通，但我需要类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:49:17.013

您只需要将 jar 放在两个程序的类路径中。然后，您可以像使用任何其他类一样使用该类：通过导入它并使用其名称：

```
java -cp jarWithCommonSerializedClass.jar;jarWithTheProgramClasses.jar the.program.MainClass 
```

注意：这是针对 Windows 的。在 *nix 下，`:`必须使用，而不是`;`.

请参阅[http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)。

此外，请尊重 Java 命名约定。Java 类以大写字母开头。变量从不包含下划线并且是驼峰式的。

# php - PHP PDO 函数破坏 PHP 代码

> ID：14675117
> 
> 赞同：-2
> 
> 时间：2013-02-03T17:26:17.973
> 
> 标签：php, mysql, function, pdo

以下功能不起作用。我不明白为什么。

```
function access_apply($email,$pwd,$forname,$surname,$postcode,$telephone,$mobile){
    global $cnx;
    $pwd = bcrypt_hash($pwd);
    $q = $cnx->prepare("INSERT INTO `users` (email, pwd, forename, surname, postcode, telephone, mobile) VALUES (:email, :pwd, :forename, :surname, :postcode, :telephone, :mobile)");
    $q->execute(array(':email' => $email, ':pwd' => $pwd, ':forename' => $forename, ':surname' => $surname, ':postcode' => $postcode, ':telephone' => $telephone, ':mobile' => $mobile));
} 
```

一旦它被调用，代码就会中断，并且不会执行任何进一步的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:29:55.160

1.  您需要打开错误报告。
    您遇到“非对象成员”错误但看不到它。
2.  您需要打开 PDO 的异常以查看为什么会出现上述错误。

因此，在脚本顶部添加以下代码：

```
error_reporting(E_ALL);
ini_set('display_errors',1); 
```

连接后：

```
$cnx->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

查看 ajax 请求使用 Firebug（网络选项卡，响应部分）会发生什么

**或者——好多了！-**

启用错误日志并查看 Web 服务器错误日志中的所有错误。
为此，请更改以前的设置并添加其他设置

```
ini_set('display_errors',0);
ini_set('log_errors',1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:29:30.513

看起来它可能是函数参数中的拼写错误。一个是 $forname，您在数组中分配 $forename。所以它可能是一个未定义的变量，或者正在发生的参数计数不匹配。

# c# - 使用 AzureReader2 插件的 Azure ImageResizer 未调整大小

> ID：14675118
> 
> 赞同：3
> 
> 时间：2013-02-03T17:26:21.670
> 
> 标签：c#, asp.net-mvc, azure, asp.net-mvc-4, imageresizer

**编辑**

我让它工作，但我必须添加 RemoteReader 插件。当我从我的项目中删除 AzureReader2 插件时，它仍然可以正常工作，但是 AzureReader2 插件对我有什么好处？

**原始问题**

我已经完成了[此处](http://imageresizing.net/plugins/azurereader2)概述的所有内容（包括评论），但似乎无法弄清楚为什么我不能使用此 imageresizer 插件即时调整图像大小。

这是我在元素下的 web.config 条目的样子：

```
<add name="AzureReader2" prefix="~/img/" connectionString="DefaultEndpointsProtocol=https;AccountName=[Account];AccountKey=[key]" endpoint="http://<account>.blob.core.windows.net/" /> 
```

我已经将我的容器设置为“img”。

当我访问此 URL 进行测试时： `https://<account>.blob.core.windows.net/img/image.jpg?width=50`图像显示但只是其常规大小。我也尝试在本地和现场 AWS 上运行它，但仍然没有调整大小:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T18:58:21.333

[ImageResizer](http://imageresizing.net/)库允许提供图像的修改版本（调整大小、裁剪、旋转、带水印等）。[AzureReader2](http://imageresizing.net/plugins/azurereader2)`https://<account>.blob.core.windows.net`是一个插件，它允许从 Azure Blob ( ) 而非磁盘中获取未修改的图像。

因此，应该用于获取图像修改版本的 URL 是安装了 ImageResizer 库的应用程序 URL，而不是 Azure Blob URL（在您的示例中`https://<account>.blob.core.windows.net/img/image.jpg?width=50`）。

**编辑**

[AzureReader2](http://imageresizing.net/plugins/azurereader2)插件允许您从 Azure Blob 读取图像，就像它们保存在磁盘中一样。如果您的应用程序以所有图像都来自 Azure Blob 的方式构建，则可以有两个**独立**的团队：一个管理您的图像（以及 CSS 等其他媒体），一个管理您的代码。使用这种方法 AzureReader2 插件将非常方便。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T19:30:22.943

经过几个小时的玩耍，我终于明白了它是如何工作的。我没有意识到前缀是您在实际 URL 的末尾添加的，而不是 BLOB 存储 URL。我结束了

```
http://<account>.azurewebsites.net/img/img/image.jpg?width=50 
```

这代替了我最初的想法：

```
https://<account>.blob.core.windows.net/img/image.jpg?width=50 
```

对于正在查看此内容的任何人，前缀是实际站点的 URL 上的内容，而不是 BLOB 商店！

# git - Git 新主分支

> ID：14675120
> 
> 赞同：0
> 
> 时间：2013-02-03T17:26:30.530
> 
> 标签：git, rebase

我有几个旧分支已合并到主分支。我想重新开始，即我想删除除master分支之外的所有以前的分支。

主分支将是新的基础分支，具有未来开发的最新更改。我怎样才能做到这一点。

在此更改之后，如果有人签出该项目，他们将获得一个具有所有功能的工作主分支。

任何有关命令示例的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:40:31.260

`git branch -d`您可以使用or删除本地分支`git branch -D`（如果您要删除的分支尚未完全合并）。

要删除遥控器上的分支，您可以使用`git push REMOTE --delete BRANCH`（或者`git push REMOTE :BRANCH`如果您的 git 版本较旧，则使用语法）。确保在那里替换您的实际遥控器名称 - 默认遥控器称为`origin`，但您可能有多个遥控器等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:42:36.190

'git branch -d' 将删除分支。如果分支未合并并且您想强制删除它，而不是'-d'使用'-D'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:51:42.057

如果您想保留原件，可能会比您需要的多一点`master`，但如果您真的从头开始，您可以使用

```
git checkout --orphan new_master
git rm -r --cached .
git clean .
git commit --allow-empty -m 'initial commit'
git tag -a init -m 'repository start' 
```

`git clean .`可能需要运行两次；清理`.gitignore`文件会发现被忽略的文件。

这样做是创建一个新的基础分支，其中包含一个空提交以重新开始，并标记第一个提交以便于参考。

然后使用`git rebase -I --onto init --root <whatever you want to move over>`start 将您要保存的提交带到这个新分支。

当您从旧分支中获得所需`git branch -D <branch_name>`的一切时，删除分支引用。如果您需要删除标签`git tag -d <tag_name>`。

重新创建从原始分支中删除后要保留的任何新分支名称和标签。

一旦本地存储库看起来像您想要的那样，使用`git push origin <local branch>:<remote_branch> --force`. 旧的远程分支可以用`git push origin :<remote_branch> --force`.

此时，构成旧分支的提交将被取消引用，并且不应出现在 a 中`git log --all --oneline --graph`，并且您的新“历史记录”应该看起来像您想要的那样。

# cocoa-touch - 从弹出窗口中的表格加载图像视图中的图像

> ID：14675123
> 
> 赞同：0
> 
> 时间：2013-02-03T17:26:46.790
> 
> 标签：cocoa-touch

我有一个带有图像视图的视图控制器。

我有一个带有表格视图的弹出框，它锚定到此视图控制器中的条形按钮。

我希望能够通过使用弹出窗口中的表格将图像加载到图像视图中。

弹出框和主视图控制器都有单独的视图控制器类。

我已经从 segue 启动了弹出窗口。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:36:59.723

我假设您的 segue 将您从 imageViewController 带到弹出的 tableViewController。

然后您可以将您的 imageViewController 设置为 tableViewController 的委托，以便您可以从 tableViewController 以解耦的方式调用它的方法。

*MyTableViewController.h*

在您的 tableViewController 头文件中声明一个协议，它将期望它的委托遵循。将其放在您的 @interface 部分上方：

```
 @protocol MyTableViewControllerDelegate <NSObject>
    - (void) dismissPopoverAndLoadImage:(NSString*)imageName;
    @end 
```

还要声明一个属性来保存对它的委托的引用：

```
 @property (nonatomic, weak) id <MyTableViewControllerDelegate> delegate; 
```

该协议声明了您的 tableView 期望能够在其委托上调用的方法签名。它允许它发回一些数据，并让自己被解雇。委托（在本例中为您的 imageViewController）必须实现此方法。

*MyTableViewController.m*

选择表格单元格时，在委托时调用该方法：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
       UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
       NSString* imageName = cell.textLabel.text;
       [self.delegate dismissPopoverAndLoadImage:imageName];
    } 
```

*MyImageViewController.h*

包括 MyTableViewController.h 并将委托协议添加到`@interface`.

```
#include "TableViewController.h

@interface MyImageViewController: UIViewController <MyTableViewControllerDelegate> 
```

声明一个属性来保存对您的 UIPopOverController 的引用，以便您可以向它发送关闭消息：

```
@property (nonatomic, weak) UIPopoverController* seguePopoverController; 
```

（这些步骤可以移动到您的 .m 文件的类别扩展名以便更好地封装）。

*MyImageViewController.m*

`MyImageViewController`您将在的方法中设置委托属性`prepareForSegue`，该方法在调用 segue 时被调用。您还将在此处设置对 popoverController 的引用。

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"popoverTable"]) {
        self.seguePopoverController = [(UIStoryboardPopoverSegue*)segue popoverController];
        [segue.destinationViewController setDelegate:self];
        }
    }
} 
```

最后，实现 tableViewController 的委托方法：

```
- (void) dismissPopoverAndLoadImage:(NSString*)imageName
{
    self.imageView.image = [UIImage imageNamed:imageName];
    [self.seguePopoverController dismissPopoverAnimated:YES];
} 
```

* * *

*更新*
除了 popOverController 本身是一个稍微不寻常的实体（没有视图的控制器，直接从 NSObject 继承）这一事实之外，这大部分是标准的委托模式。您可以通过使用一些间接和运行时检查来简化它`didSelectRowAtIndexPath`：

```
 if ([[self delegate] respondsToSelector:@selector(dismissPopoverAndLoadImage:)])
       [[self delegate] performSelector:@selector(dismissPopoverAndLoadImage:)
                             withObject:imageName]; 
```

在这种情况下，您不需要定义协议或协议`<adhere>`，也不需要`#import MyTableViewController`. 但是，如果您没有正确实现该方法，编译器不会给您任何帮助。从我之前的错误中可以看出，这可能是不明智的。

# nose - 使用nose.main 运行doctest 插件

> ID：14675124
> 
> 赞同：2
> 
> 时间：2013-02-03T17:26:52.320
> 
> 标签：nose, python-nose

我想`Doctest`从 Python 中运行 Nose 内置插件，特别是没有命令行选项或环境变量。

人们期望以下工作：

```
import nose, os
from nose.plugins.builtin import Doctest
# or from nose.plugins.doctests import Doctest

plugins = [Doctest(),]

nose.main(addplugins=plugins)
# or nose.main(plugins=plugins) 
```

但是，上面似乎没有按预期加载 Doctest 插件。

想法和意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:41:15.107

这是我所做的：

```
import nose

argv = sys.argv[:]
argv.insert(1, "--with-doctest")

nose.main(argv=argv) 
```

它不像我想要的那样干净，但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:44:59.023

基于 Brian 的解决方案，为了从交互式会话中启动所有内容，还可以执行以下操作：

```
import nose
nose.run(argv=['', '--with-doctest'])  # first empty item is ignored by nose.run 
```

但是您的解决方案更适合直接从命令行启动的脚本，可能带有其他选项。

# java - 如何从 CDI bean 调用 Java 对象

> ID：14675127
> 
> 赞同：2
> 
> 时间：2013-02-03T17:26:57.497
> 
> 标签：java, jsf, jsf-2, cdi

我有一个带有 Java 对象的 CDI bean，我用它来显示来自数据库的配置文件数据：

***父 Bean***

```
@Named("DCProfileTabGeneralController")
@ViewScoped
public class DCProfileTabGeneral implements Serializable
{

    public DCObj dc;

    public class DCObj
    {

        private int componentStatsId;                 // COMPONENTSTATSID   NUMBER(38,0)
        ........
        // Default Constructor
        public DCObj(){};

        public DCObj(int componentStatsId....)
        {

            this.componentStatsId = componentStatsId;
            .......

        }

        public int getComponentStatsId()
        {
            return componentStatsId;
        }

        public void setComponentStatsId(int componentStatsId)
        {
            this.componentStatsId = componentStatsId;
        }
        ....
    }

    // Getters ------------------------------------------------------------------------------------
    public DCObj getdcData()
    {
        return dc;
    }

    @PostConstruct
    public void initData() throws SQLException
    {
        initDBData();
    }

    // Generate data Object from Oracle
    public void initDBData() throws SQLException
    {
                dc = new DCObj(result.getInt("COMPONENTSTATSID"),
                .........
    }
} 
```

***验证器***

```
@Named("ValidatorDatacenterController")
@ViewScoped
public class ValidatorDatacenter implements Validator, Serializable
{

    public ValidatorDatacenter()
    {
    }

    @Inject
    private DCProfileTabGeneral profileTabGeneral;

    // Validate Datacenter Name
    public void validateDatacenterName(FacesContext context, UIComponent component, Object value) throws ValidatorException, SQLException
    {
        int componentStatsId = -1;

        if (profileTabGeneral != null)
        {
            DCObj dcData = profileTabGeneral.dc;
            if (dcData != null)
            {
                componentStatsId = dcData.getComponentStatsId();
            }
        }

        if (componentStatsId == -1)
        {
            return;
        }

        String l;
        String s;

        if (value != null && !(s = value.toString().trim()).isEmpty())
        {

            if (s.length() > 18)
            {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  Value is too long! (18 digits max)", null));
            }

            if (ds == null)
            {
                throw new SQLException("Can't get data source");
            }

            Connection conn = null;
            PreparedStatement ps = null;
            ResultSet rs;
            int resComponentStatsId = -1;
            try
            {
                conn = ds.getConnection();
                // if componentsstatsid <> edited componentstatsid in jsf -> throw validator exception
                ps = conn.prepareStatement("SELECT componentstatsid from COMPONENTSTATS where NAME = ?");
                ps.setString(1, s);
                rs = ps.executeQuery();

                while (rs.next())
                {
                    resComponentStatsId = rs.getInt(1);
                }

                if (resComponentStatsId != -1 && resComponentStatsId != componentStatsId)
                {
                    throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                            "  '" + s + "' is already in use!", null));
                }

            }
            catch (SQLException x)
            {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  SQL error!", null));
            }
            finally
            {
                if (ps != null)
                {
                    ps.close();
                }
                if (conn != null)
                {
                    conn.close();
                }
            }
        }
        else
        {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                  "  This field cannot be empty!", null));
        }

    } 
```

}

我有一个自定义验证器，可以将配置文件页面中的输入值检查到数据库中。我测试了使用@Inject 从父页面获取Java 对象并将Ojject 传递给验证器。事实证明，每次使用 @Inject 时都会得到空的 Java 对象。

我还测试了使用 CDI 获取 Int。它可以工作，但是当我再次测试以再次获取 Java 对象时，我得到了空对象。

你能告诉我从 CDI bean 调用 Java 对象的正确方法是什么吗？为什么我不能从 CDI bean 获取 Java 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T21:59:10.233

如果我没记错的话，CDI 注入将无法与验证器一起使用。使用来自 Myfaces CODI 的高级，因为来自 deltaspike 的 JSF 模块尚未准备好。[https://cwiki.apache.org/EXTCDI/jsf-usage.html](https://cwiki.apache.org/EXTCDI/jsf-usage.html)

或者去 deltaspike 并使用 BeanProvider 来获取您的实例。

```
BeanProvider.getContextualReference(DCProfileTabGeneral .class, false); 
```

# iphone - iAd 加载失败时不隐藏？

> ID：14675132
> 
> 赞同：0
> 
> 时间：2013-02-03T17:27:07.740
> 
> 标签：iphone, ios, objective-c, iad

这似乎是有史以来最愚蠢的问题，但是在浏览了所有 Apple 的文档和无用的在线教程之后，我仍然无法弄清楚如何正确地实现`iAds`到我的应用程序中。因此，我的应用程序从表格视图控制器开始，并且`iAd`在导航栏下方和表格上方有一个对象。

现在，在我的代码中：（我还添加了 iAd 框架）

```
#import <UIKit/UIKit.h>
#import <iAd/iAd.h>

@interface MasterTableViewController : UITableViewController <ADBannerViewDelegate>
{
    IBOutlet ADBannerView *iAd;
}
@property(nonatomic, readonly, getter=isBannerLoaded) BOOL bannerLoaded;
@end 
```

然后在 .m 文件中

```
#import "MasterTableViewController.h"

@interface MasterTableViewController ()
@end

@implementation MasterTableViewController
@synthesize bannerLoaded;

- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    if (!willLeave)
    {
        // nothing in this case thanks to ARC 
    }
    return YES;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    iAd.hidden = NO;
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{   
    iAd.hidden = YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    for (int i = 0; i > 0; i++)
    {
        if (bannerLoaded)
        {
            iAd.hidden = NO;
        }
        else
        {
            iAd.hidden = YES;
        }
    }
} 
```

现在，问题是，当我在没有互联网连接的情况下测试应用程序时，`iAd`它不会加载（显然）但它也不会隐藏。所以，在屏幕的顶部，我留下了一个大的白色矩形。否则，当连接可用时，广告可以正常工作。有没有人有任何想法？另外 - 我刚刚添加了无限循环，看看它们是否有所作为，这些完全是故意的，哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:18:34.613

我假设您已经通过情节提要添加了 ADBannerView，因为我看不到您初始化横幅位置的位置。

1.  在情节提要中，将初始位置设置在屏幕外。
2.  在“bannerViewDidLoadAd”中，将横幅动画化到视图中。
3.  在“bannerView: didFailToReceiveAdWithError:”中，将横幅动画化到视野之外。

这里有一个很好的例子[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iAd_Guide/WorkingwithBannerViews/WorkingwithBannerViews.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iAd_Guide/WorkingwithBannerViews/WorkingwithBannerViews.html)

希望这可以帮助。我刚刚实现了这个，但目前无法访问我的代码。

它确实在模拟器中带来了一些错误，但在设备上运行良好。

我已经在 iOS6 上对此进行了测试，即使显示 iAd 然后用户失去连接也可以正常工作（因此看起来像“bannerView：didFailToReceiveAdWithError：”正在为我调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:13:13.797

您有一个`bannerLoaded`用于保存广告状态的属性，这很好。

首先，在您的`viewDidLoad`方法中，无法加载 iAd，因此您必须相应地设置您的属性：`self.bannerLoaded = NO;`

然后，当您收到/未能收到您的广告时，您需要更新此属性。

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (!self.bannerLoaded) {
        iAd.hidden = NO;
        self.bannerLoaded = YES;
    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{   
    if (self.bannerLoaded) {
        iAd.hidden = YES;
        self.bannerLoaded = NO;
    }
} 
```

# java - dev_appserver - 如何获取错误日志

> ID：14675134
> 
> 赞同：0
> 
> 时间：2013-02-03T17:27:13.640
> 
> 标签：java, google-app-engine, logging, dev-appserver

我使用 netbeans 开发一个 gae java 应用程序。

当我尝试调试时

```
dev_appserver.cmd -p 8962 D:\Documents\NetBeansProjects\Reader\build\web 
```

我`Error 500 null`上了`http://localhost:8962`。

我认为我的程序有问题，我想获取错误日志，但`dev_appserver`只显示 INFO 日志，如何获取错误日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:55:20.520

在 Google App Engine 启动器中，单击“日志”。

# haxe - 是否可以从另一个 nmml 加载一个 nmml 的内容？

> ID：14675138
> 
> 赞同：0
> 
> 时间：2013-02-03T17:27:19.593
> 
> 标签：haxe, nme

是否可以有一个包含多个子项的主 project.nmml 文件覆盖某些配置？

IE

```
project.nmml
project_ouya.nmml 
```

并调用`nme test "project_ouya.nmml" android`。

或者这种情况有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:19:44.620

在**project_ouya.nmml**中，添加`<include name="project.nmml" />`.

# python - AttributeError：“模块”对象没有属性“TreeTagger”

> ID：14675140
> 
> 赞同：0
> 
> 时间：2013-02-03T17:27:40.203
> 
> 标签：python, attributeerror

我正在尝试将**Python**包装器用于`TreeTagger`词性标注器。我用于导入和调用包装器的代码是：

```
import TreeTaggerWrapper
tagger = TreeTaggerWrapper.TreeTagger(TAGLANG='en',TAGDIR='D:/Programme/TreeTagger')
tags = tagger.TagText("This is a very short text to tag.")
print tags 
```

错误是：`'AttributeError: 'module' object has no attribute 'TreeTagger''`

**init** .py 存在于 TreeTaggerWrapper 目录中并且是空的。

我将如何系统地解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:52:37.263

试试这个包装：

[http://cental.fltr.ucl.ac.be/team/~panchenko/def/treetaggerwrapper.py](http://cental.fltr.ucl.ac.be/team/~panchenko/def/treetaggerwrapper.py)

文件中有文档。

**更新**

将文件复制`treetaggerwrapper.py`到`python/Lib`.

尝试这个：

```
import treetaggerwrapper
tagger = treetaggerwrapper.TreeTagger(TAGLANG='en',TAGDIR='D:/Programme/TreeTagger')
tags = tagger.TagText("This is a very short text to tag.")
print tags 
```

**更新 2**

如果你有`Lib/site-packages/TreeTaggerWrapper/treetaggerwrapper.py`，那么你应该这样做：

```
from TreeTaggerWrapper import treetaggerwrapper
tagger = treetaggerwrapper.TreeTagger(TAGLANG='en',TAGDIR='D:/Programme/TreeTagger')
tags = tagger.TagText("This is a very short text to tag.")
print tags 
```

# java - 如何响应在 vaadin 中单击表格行

> ID：14675146
> 
> 赞同：9
> 
> 时间：2013-02-03T17:28:28.907
> 
> 标签：java, vaadin

我有以下代码：

```
public Button getBtnSubmit(com.vaadin.ui.Button.ClickListener l) {
    if (null != l) {
        btnSubmit.addListener(l);
    }
    return btnSubmit;
}

public Table getTableCompany(HeaderClickListener hl) {
    if (null != hl) {
        tableCompany.addListener(hl);
    }
    return tableCompany;
} 
```

**我想添加一个`listener`当我在表中选择一个（不同的）行时触发的。**
这样我就可以用表数据刷新一些其他控件，我应该使用哪个监听器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-21T17:13:52.817

`addListener`现在已弃用。请改用以下内容。

```
table.addItemClickListener(new ItemClickEvent.ItemClickListener() {
    @Override
    public void itemClick(ItemClickEvent itemClickEvent) {
        System.out.println(itemClickEvent.getItemId().toString());
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T12:48:51.897

我会去`ItemClickListener`：

```
 table.addListener(new ItemClickEvent.ItemClickListener() {

            @Override
            public void itemClick(ItemClickEvent event) {
               //implement your logic here
            }
        }); 
```

编辑：对于 Vaadin 7+，使用`addItemClickListener`方法而不是`addListener`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T08:15:52.990

如果您使用 ValueChangeListener 不要忘记设置

```
 table.setImmediate(true); 
```

这意味着浏览器将立即报告选择的更改。如果你不设置这个，你的监听器不会被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T12:41:52.780

你想添加一个[ValueChangeListener](https://vaadin.com/api/7.0.0/com/vaadin/ui/AbstractField.html#addValueChangeListener%28com.vaadin.data.Property.ValueChangeListener%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-01T14:55:32.463

阅读[https://vaadin.com/book/-/page/components.table.html](https://vaadin.com/book/-/page/components.table.html)，第 5.15.1 节“选择表中的项目”。您想[添加一个 Property.ValueChangeListener](https://vaadin.com/api/7.0.0/com/vaadin/ui/AbstractField.html#addValueChangeListener%28com.vaadin.data.Property.ValueChangeListener%29)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-12T14:06:11.717

其中许多答案既正确又不正确。

**如果您需要获取响应单击的选定项目，请注册一个 ValueChangeListener**。调用 getValue() 以从*ItemClickListener*检索选择可能是 MultiSelect 列表中的一项。例如，项目集不会包含/排除触发回调的项目。但是，您将不会引用单击的项目。

如果你只是想**响应一个 item 的点击**，而不需要考虑当前的选择状态，**注册一个 ItemClickListener**代替。这样，您将知道实际单击了哪个项目。

# php - 为什么 TRANSACTION / COMMIT 使用 PHP/MySQL (InnoDB) 能大幅提升性能？

> ID：14675147
> 
> 赞同：37
> 
> 时间：2013-02-03T17:28:36.353
> 
> 标签：php, mysql, csv, transactions, innodb

我一直在导入大型 CSV 数据文件；通常少于 100,000 条记录。我正在使用 PHP 和 MySQL（InnoDB 表）。我需要在 MySQL 之前使用 PHP 来转换一些字段并进行一些文本处理`INSERT`（下面的代码的一部分`process_note_data()`）。MySQL`LOAD DATA`是不可行的，所以请不要推荐它。

我最近尝试通过使用 MySQL 事务`START TRANSACTION`和来提高这个过程的速度`COMMIT`。性能提升令人惊讶。处理时间减少了 20 倍。因此，20 分钟的处理只需要大约 1 分钟。

问题。

1.) 有谁明白为什么会有这样的性能提升（20 分钟到 1 分钟）？

2.) 我应该关心 100,000 条记录的交易量有多大吗？

3.) 我应该关心事务中的大量插入和/或更新吗？

```
/*
 * Customer Notes Data:
 * Rows are either a meeting, call or note!
 */
$row = 1;
$data = array();
$fields = array();
$line = '';

$db->query('SET autocommit=0;');
$db->query('START TRANSACTION;');

if (($handle = fopen("modules/".$currentModule."/Data/customernote.csv", "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 4096, ',', '"')) !== FALSE && $row < 999000) {
    //Row 1 - CSV header row with field names
    if ($row == 1) {
      $csv_fields = $data;
    } elseif ($row > 1) {
      $fields = $this->process_note_data($data, $csv_fields, $row);
    }
    $row++;
  } // end while
  fclose($handle);
}

$db->query('COMMIT;');
$db->query('SET autocommit=1;'); 
```

注意：文本/字段处理在调用中完成`$this->process_note_data()`，然后调用另一个具有`INSERT`语句代码的帮助程序类。我没有足够的空间来包含所有代码。`$db->query()`是 MySQL 查询的典型数据库对象。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-03T17:47:55.160

1.  请检查此链接：

    [https://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-transaction-management.html](https://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-transaction-management.html)

    > 如果该事务对数据库进行了修改，则 InnoDB 必须在每次事务提交时将日志刷新到磁盘。当每次更改后都有提交时（与默认的自动提交设置一样），存储设备的 I/O 吞吐量会限制每秒潜在操作的数量。

2.  大事务可能会影响提交期间的性能（检查上面）

3.  仅在回滚的情况下，但是可以使用某些设置进行优化（检查链接）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-01-29T12:33:10.310

我自己在 .Net 中的小测试（4 个字段记录）：

> 插入 1 条记录，无事务：**60**毫秒
> 
> 插入 1 条记录，使用事务：**158**毫秒
> 
> 使用事务插入 200 条记录，每条记录后提交：**17778** 毫秒
> 
> 不使用事务插入 200 条记录：**4940**毫秒
> 
> 使用事务插入 200 条记录，仅在最后一条记录后提交：**4552**毫秒
> 
> 使用事务插入 1000 条记录，仅在最后一条记录后提交：**21795**毫秒

客户在丹麦，服务器在比利时（Google cloud f1-micro）。

我的意思是把它放在评论中，但格式不好......所以这是我提前道歉;-)

# perl - 用 Test::More 写“skip() unless ok()”可以吗？

> ID：14675150
> 
> 赞同：2
> 
> 时间：2013-02-03T17:28:49.487
> 
> 标签：perl, tap, test-more

我浏览了[文档](https://metacpan.org/module/Test%3a%3aMore)，但找不到我的查询的明确答案。

在我的许多测试中，**`SKIP`**块的执行取决于先前测试的成功。

所以，例如，这是我写的：

```
ok( @results > $threshold , 'Threshold met' );

SKIP: {
        skip 'due to insufficient results', 3
          unless @results > $threshold;
        # ...
} 
```

如果我的测试发生变化，我不想更改两个位置，所以我想要一个 DRY-er 等效项：

```
SKIP: {
        skip 'due to insufficient results', 3
          unless ok( @results > $threshold , 'Threshold met' );
        # ...
} 
```

我最初的测试表明这两个片段是等效的。

但是，文档中的某些内容引起了我的注意：

> 每个`SKIP`块必须有标签`SKIP`，否则`Test::More`不能发挥它的魔力。

我在这里担心的是魔法可能会溢出到`ok()`现在，因为它在块内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:33:47.853

是的。为什么不呢？

# c# - 使用备用命名空间的 WPF 命令绑定

> ID：14675152
> 
> 赞同：1
> 
> 时间：2013-02-03T17:29:00.000
> 
> 标签：c#, wpf, xaml, command

全部，

我已经定义了以下

```
xmlns:default="clr-namespace:dotDiff2013" 
xmlns:commands="clr-namespace:dotDiff2013.Commands"
<Window.CommandBindings>
        <CommandBinding Command="commands:ComparerCommands.NewComparison"
                        Executed="NewComparison"/>
</Window.CommandBindings> 
```

`dotDiff2013.Commands`我在命名空间中的哪个位置

```
namespace dotDiff2013.Commands 
{             
    public class ComparerCommands
    {
        static ComparerCommands()
        {
            InputGestureCollection inputs = new InputGestureCollection();
            inputs.Add(new KeyGesture(Key.N, ModifierKeys.Control, "Ctrl+N"));
            newComparison = new RoutedUICommand(
                "New Document Comparison", "NewComparison", typeof(ComparerCommands), inputs);
        }

        private static RoutedUICommand newComparison;
        public static RoutedUICommand NewComparison
        {
            get { return newComparison; }
        }
    }
} 
```

但我收到以下错误

* * *

![错误](../Images/bbdae938c0e937f0d7a3c85a5f1504eb.png)

* * *

**我究竟做错了什么？**

我是 WPF 的新手，这个错误令人困惑，因为我已经做了正确的事情。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:04:03.047

使用 {x:Static commands:ComparerCommands.NewComparison} 语法

# java - 正则表达式java模式不验证？

> ID：14675155
> 
> 赞同：2
> 
> 时间：2013-02-03T17:29:16.040
> 
> 标签：java, regex

正则表达式 ,`"String regex = "[0-9a-z]+@[0-9a-z]+.+[0-9a-z]";"`用于测试电子邮件验证。基本上，我试图做到这一点，以便电子邮件仅在电子邮件以字母数字字符字符串开头，然后是 1 @ 符号，然后是另一个字母数字字符字符串，然后是 1 .，最后是字母数字字符的字符串。失败的是，当我在最后一个 . 之后输入没有字母数字字符串的电子邮件时，该程序仍将与正则表达式字符串匹配。我该如何做到，以便在 . 之后必须有另一个字母数字字符串？整个代码是：

```
import java.util.Scanner;
import java.util.regex.*;

public class Regex
{   
    public static void main (String[]args){

        Scanner input = new Scanner(System.in);
        System.out.println("Please enter your Email");
        String mail = input.nextLine();

        String regex = "[0-9a-z]+@[0-9a-z]+.+[0-9a-z]";

        Pattern p = Pattern.compile(regex);
        Matcher m = p.matcher(mail);

        if(m.find()) {
            System.out.println("VALID");
        } else {
            System.out.println("INVALD");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:30:43.073

表达式中未*转义* `.`的字符代表*任何*字符。您需要使用`\\.`, 或`[.]`来匹配文字点。

```
String regex = "[0-9a-z]+@[0-9a-z]+[.]+[0-9a-z]"; 
```

点后面的`+`意思是“一个或多个先前表达式的出现”。上面，“先验表达式”是一个点。要匹配电子邮件域地址中的多个段，您需要添加括号：

```
String regex = "[0-9a-z]+@([0-9a-z]+[.])+[0-9a-z]+"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:04:32.940

一个稍微好一点的正则表达式将包括行开始*^*和行结束*$*锚。

否则，它只需要匹配字符串中有效电子邮件的单个实例，它就会通过。此外，您可以通过添加 {2,4} 将其限制为 2 到 4 个字符，而不是用加号表示 1 或更多。如果没有这些，就像

> myemail@gmail.com@thisIsOdd.helloworld.anythingelse

将错误地有效。

`String regex = "^[0-9a-z]+@([0-9a-z]+[.])+[0-9a-z]{2,4}$";`

# sharepoint-2010 - 在 Office 365 Sharepoint 面向公众的网站上格式化 Web 部件表

> ID：14675157
> 
> 赞同：1
> 
> 时间：2013-02-03T17:29:29.253
> 
> 标签：sharepoint-2010, office365

我在 Sharepoint 中创建了一个自定义列表，然后将其作为应用程序部件插入到面向公众的网页中。列表数据显示但未格式化。我希望将其格式化为类似于使用 CSS3 格式化 HTML 页面中显示的“表格”的方式。

我有机会玩弄 CSS。我插入了这段代码：

```
table {
border:3px solid #00ff00;
}

th {
border:2px solid #ff0000;
font-size:18px;
color:#0000ff;
}

td {
border:1x double #0000ff;
} 
```

如果您访问[https://gcarterit-public.sharepoint.com/whn-report](https://gcarterit-public.sharepoint.com/whn-report)，您将看到结果。

注意：1.表格单元格（td）没有按预期显示边框

1.  th 中的文本没有按预期改变（大小和颜色）

2.  似乎无法格式化表格单元格中的文本

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:52:55.197

将 !important 添加到声明中，以便它们覆盖默认值。更正 td 中的“px”：

```
td { border:1px double #0000ff !important; } 
```

# assembly - :constant 在 ARM 中是什么意思，在 VLDn 的地址寄存器中具体是什么意思？

> ID：14675161
> 
> 赞同：1
> 
> 时间：2013-02-03T17:29:45.630
> 
> 标签：assembly, arm, neon

我正在学习霓虹灯，发现一行代码如下：

```
DATA            .req r0  
vld1.16         {d16, d17, d18, d19}, [DATA, :128]! 
```

我找不到有关 :128 含义的任何信息。在 RealView Compilation Tools® 3.1 版汇编程序指南中，未定义 vldn 的地址寄存器中的立即值，即使 :128 表示 #128。:128 和 #128 有什么区别？:128 在本指令中的确切含义是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:35:38.323

根据[ARM 体系结构参考手册](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CD4QFjAB&url=http%3A%2F%2Finfocenter.arm.com%2Fhelp%2Ftopic%2Fcom.arm.doc.subset.architecture.reference%2F&ei=-58OUdHjHKnBiwKkjYHoBA&usg=AFQjCNHPDMXGQsHlDWpoabdb-FP0GnS89A&sig2=E4_gZC-e6w5DD8LjZI9jlQ&bvm=bv.41867550,d.cGE)，该指令的汇编语法是：

```
VLD1<c><q>.<size> <list>, [<Rn>{@<align>}]! 
```

因此，从这种情况来看，这看起来像是您的`:128`手段`@128`。

> **`<align>`**对齐。它可以是以下之一：
> 
> ...
> 
> **`128`**16 字节对齐，仅在**`<list>`**包含两个或四个寄存器时可用。

# scala - 如何在一行中获取 Option 的值？

> ID：14675162
> 
> 赞同：0
> 
> 时间：2013-02-03T17:29:46.087
> 
> 标签：scala

基本上我想这样做：

```
val germanTranslation = translations.find(t => t.lang.equals("de")).get.value 
```

但可能是没有这样的翻译 -> find 会返回 None，get 调用会抛出异常。

所以看起来使用getOrElse是合适的。但不知道它会如何工作。就像是：

```
val englishTranslation = translations.find(t => t.lang.equals("en")).getOrElse("") 
```

这个有两个问题 -`getOrElse("")`试图返回翻译或字符串，这是不正确的，而且，我需要的是翻译的值（字符串） - 而不是翻译对象。

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T19:53:30.083

没有新的答案，但因为这里还没有提到：

从 2.10 开始，组合`Option#map . Option#getOrElse`可以替换为`Option#fold`：

```
val englishTranslation =
  translations.find(t => t.lang.equals("en")).fold("")(_.value) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T17:34:29.397

您可以使用`Option.map`将您的翻译选项映射到字符串选项，然后`getOrElse`在结果上使用`Option[String]`：

```
val englishTranslation = translations
    .find(t => t.lang.equals("en"))
    .map(_.value)
    .getOrElse("") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T17:34:07.643

您可以使用 map 操作在您的选项中获得价值：

```
translations.find(t => t.lang.equals("en"))
            .map(_.value) // will get translation value if there is Some, 
                          // return None otherwise
            .getOrElse("") 
```

# php - 从数组中的 php 对象中检索数据

> ID：14675163
> 
> 赞同：0
> 
> 时间：2013-02-03T17:29:46.460
> 
> 标签：php

我有一个包含在数组中的对象

```
array(1) { 
["main"]=> object(Profile)#151 (20) 
{ 
["field_first_name"]=> array(1) { ["und"]=> array(1) { [0]=> array(3) { ["value"]=> string(6) "Fred" ["format"]=> NULL ["safe_value"]=> string(6) "Fred" } } } 
} 

} 
```

我正在尝试从此数组中获取值“Fred”。我以为我能做到

```
$first_name= $profile['main']->['field_first_name']['und'][0]['value']; 
```

但它没有用。它实际上给了我一个错误

解析错误：语法错误，意外 '['，需要 T_STRING 或 T_VARIABLE 或 '{' 或 '$'

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:35:35.840

field_first_name 是 $profile['main'] 的一个属性，它是一个对象。

```
$profile['main']->field_first_name; 
```

您在示例中添加的代码将是这样的。

```
$first_name= $profile['main']->field_first_name['und'][0]['value']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:36:15.100

这应该可以修复您的错误并返回预期值：

```
$first_name = $profile['main']->field_first_name['und'][0]['value']; 
```

# android - Gmail 之类的两个活动过渡

> ID：14675165
> 
> 赞同：2
> 
> 时间：2013-02-03T17:29:56.210
> 
> 标签：android, android-transitions

我有两个活动，活动**A**和活动**B**。

**当用户从A**导航到**B**时，我需要设置一些转换，以便与 gmail 中的完全一样。

我试过了：（在活动**A**中）

```
startActivity(activityBIntent);
ActivityA.this.overridePendingTransition(android.R.anim.slide_out_right, 0); 
```

但我无法实现与 Gmail 中相同的动画。

# coding-style - Visual Studio 插件扩展/收缩嵌套（if / elseif / for / while / case 等）代码？

> ID：14675168
> 
> 赞同：1
> 
> 时间：2013-02-03T13:47:11.277
> 
> 标签：coding-style, visual-studio, plugins

有时，我有一个`if()`部分（以及几个`else if()`部分），每个“部分”中有一个中等或大块的代码（我认为这在 {} 中称为“主体”）。

我希望能够收缩/折叠或扩展这些部分。也许存在 Visual Studio 2010 的插件？在有人说“改为调用外部方法”之前，我会说：

*   这需要不必要的时间来写出方法头
*   使代码更冗长
*   没有其他地方会调用同样的代码。我倾向于为将被多次调用的情况留下单独的方法。
*   它不是“就地”，并且会跳转到文档的不同部分，使其（例如）更难与“附近”代码相关联。

一种可能性是`#region`，但会遭受时间/空间损失，不幸的是，当您稍后重新打开项目时，VS 不会保存该区域是收缩还是扩展。

如果我可以使用这种收缩`if`“部分”的技术对代码有一个“更高级别”的视图，我的 C# 程序会看起来更整洁。那么肯定有人编写过这样的插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:37:38.243

事实证明，VS2010 中的 C++[显然可以默认处理这个问题](https://stackoverflow.com/a/5972633/848344)，但 C# 不能。尽管如此，Stackoverflow[还是](https://stackoverflow.com/questions/285422/visual-studio-c-sharp-statement-collapsing)提供了这个运行良好的插件解决方案。它也记录了重新打开项目后的收缩/扩展：

[http://visualstudiogallery.msdn.microsoft.com/4d7e74d7-3d71-4ee5-9ac8-04b76e411ea8](http://visualstudiogallery.msdn.microsoft.com/4d7e74d7-3d71-4ee5-9ac8-04b76e411ea8)

（可以[在这里找到](http://visualstudiogallery.msdn.microsoft.com/db114790-9561-4f11-93c0-3e24e7c1152e?SRC=VSIDE)一个不太受欢迎的替代插件）

# javascript - For Var In Loop - 我可以从中省略一个变量吗？

> ID：14675172
> 
> 赞同：0
> 
> 时间：2013-02-03T17:30:49.403
> 
> 标签：javascript

我有以下代码：

```
function Vanguard(name,grade,skill,power,shield,critical, type, nation, clan, race, imageURL){
    this.name = name;
    this.grade = grade;
    this.skill = skill;
    this.power = power;
    this.shield = shield;
    this.critical = critical;
    this.type = type;
    this.nation = nation;
    this.clan = clan;
    this.race = race;
    this.imageURL = imageURL;
};

var database = {};
database['asura kaiser'] = new Vanguard("Asura Kaiser", 3, "Twin Drive!!", 11000, 0, 1, "Normal Unit", "Star Gate", "Nova Grappler", "Battleroid", "http://images4.wikia.nocookie.net/__cb20120428001646/cardfight/images/thumb/a/a6/VGE_BT01-008EN.jpg/300px-VGE_BT01-008EN.jpg");
database['king of knights, alfred'] = new Vanguard("King of Knights, Alfred", 3, "Twin Drive!!", 10000, 0, 1, "Normal Unit", "United Sanctuary", "Royal Paladin", "Human", "http://images2.wikia.nocookie.net/__cb20121009013434/cardfight/images/thumb/9/95/BT01-001EN_RRR.jpg/300px-BT01-001EN_RRR.jpg");
database['dragonic overlord'] = new Vanguard("Dragonic Overlord", 3, "Twin Drive!!", 11000, 0, 1, "Normal Unit", "Dragon Sanctuary", "Kagerou", "Dragon", "");
database['ceo amaterasu'] = new Vanguard("CEO Amaterasu", 3, "Twin Drive", 10000, 0, 1, "Normal Unit", "United Sanctuary", "Oracle Think Tank", "Human", "");
database['alfred - early'] = new Vanguard("Alfred - Early", 3, "Twin Drive!!", 10000, 0, 1, "Normal Unit", "United Sanctuary", "Royal Paladin", "Human", "");

function printVanguard(p, name){
      for (var p in database[name]){
         document.getElementById('output').innerHTML +=('<b>' + p.charAt(0).toUpperCase() + p.slice(1) + '</b>: ' + database[name][p] + '<br />');
      }
}; 
```

在我的 printVanguard 函数中，有没有办法可以在循环中使用 for var 但打印除变量 imageURL 之外的所有内容？现在代码可以工作，但我希望对其进行修改，以便 Vanguard 对象中的 imageURL 变量不会打印出来。

（这不是我的完整代码，只有相关的。如果您需要我的完整代码，请告诉我。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:35:28.573

实际上它不是一个变量，而是一个属性。您可以通过添加一个简单的条件来防止输出它：

```
 for (var p in database[name])
       if (p !== "imageURL")
           document.getElementById('output').innerHTML +=('<b>' + p.charAt(0).toUpperCase() + p.slice(1) + '</b>: ' + database[name][p] + '<br />'); 
```

如果您正在向您`Vanguard`的 s 添加原型方法，您也可以考虑使用[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)to 省略继承的属性。但是，为了在生产中使用此代码，您希望不会仅枚举整个对象，而是显式选择属性或使用仅包含数据的嵌套对象。

或者，您可以通过使其不可枚举来跳过带有循环的属性。但是，[这](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)是 ES 5 的特性，在旧版浏览器中无法使用：

```
this.imageURL = imageURL;
Object.defineProperty(this, "imageURL", {enumerable: false}); 
```

# mysql - SQL 查询根据第二个查询的结果标记行

> ID：14675173
> 
> 赞同：1
> 
> 时间：2013-02-03T17:30:49.657
> 
> 标签：mysql, sql

我有一个包含数字范围的 MySQL 数据库。它具有以下结构：

range_id，开始，结束

所有列都是 INT(10)。此外，还有一个名为 range_poly 的 Polygon 字段用于索引。

我想标记所有“外部”范围：不包含在数据库中另一个范围内的所有范围。例如：

```
range_id  |  start |  end
    1     |    1   | 2
    2     |    4   | 5
    3     |    1   | 10 
```

在这种情况下，第三条记录是“外部范围”，因为它不包含在另一个范围内，但第一条和第二条记录不是因为它们完全包含在记录 3 中。为了实现这一点，我添加了一个名为 is_outer 的列是一个简单的 INT(1)，用于指示范围是否包含在另一个范围内。我正在使用以下 php 脚本：

```
$result = mysql_query(mysql_real_escape_string("SELECT range_id, start FROM table;"), $db);

while($row = mysql_fetch_array($result))
{
    $result2 = mysql_query(mysql_real_escape_string("SELECT range_id FROM table WHERE MBRCONTAINS( range_poly, POINTFROMWKB( POINT( ". $row['start'] ." , 0 ) ) ) ORDER BY (`end` - `start`) DESC LIMIT 1;"), $db); 
    $row2 = mysql_fetch_array($result2);
    mysql_query(mysql_real_escape_string("UPDATE table SET is_outer = 1 WHERE range_id = ". $row2['range_id'] . ";"), $db);
} 
```

这很好用，但我不禁觉得应该有一种更简单的方法来实现这一点。我似乎无法用一种纯粹的基于 SET 的查询来解决这个问题。或者，我可以使用 CURSOR 对此进行编码，但我想知道与 PHP 版本相比，性能是否会好得多。我的数据库有大约 370 万条记录，这解释了为什么性能非常重要。

我尝试使用子查询，但子查询中不允许使用 LIMIT。或者，我正在考虑自己加入表格，但我无法围绕正确的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:08:41.857

如果我正确理解您的问题，您想返回所有父母（外部范围）。

如果是这样，请尝试以下操作：

```
SELECT 
  t1.range_id
FROM YourTable t1
   LEFT JOIN YourTable t2 ON 
    t1.start >= t2.start AND t1.end <= t2.end AND t1.range_id <> t2.range_id
WHERE t2.range_id IS NULL 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/f1082/1)。

如果您有重复的数据 (7, 33,36) 和 (8, 33,36)，并且希望两者都返回，则可以将其添加到 WHERE 子句中：

```
OR (t1.start = t2.start AND t1.end = t2.end) 
```

祝你好运。

# javascript - Javascript 使用闭包和 arguments.callee 检查函数是否存在

> ID：14675175
> 
> 赞同：-1
> 
> 时间：2013-02-03T17:31:02.807
> 
> 标签：javascript, recursion, closures

我使用了一个很好的技巧来检查是否存在带有函数的异步加载的 javascript 文件`myFunction`。诀窍是`closure`使用`arguments.callee`：

```
(function() {
  if(typeof myFunction === "undefined") {
    console.log("not loaded");
    setTimeout(arguments.callee, 100);
  } else {
    console.log("loaded");
  }
})(); 
```

这是最好的方法吗？使用浏览器兼容性有什么问题`arguments.callee`吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:38:46.550

首先，您不应该轮询函数的存在。如果可能，您应该监视加载脚本时触发的事件。请参阅[本文](http://www.ejeliot.com/blog/109)了解如何监控动态加载脚本的加载，您可以通过 Google 轻松找到其他示例。

如果脚本是通过`<script>`标签加载的并且它不是异步或延迟的，那么它将同步加载，以便之后的任何代码都可以安全地访问该脚本。

* * *

虽然最好使用加载脚本时触发的实际事件（这确实是您应该弄清楚如何做的事情），但您可以`arguments.callee`像这样放弃您的技术：

```
(function() {
  function check() {
    if(typeof myFunction === "undefined") {
      console.log("not loaded");
      setTimeout(check, 100);
    } else {
      console.log("loaded");
    }
  }
  check();
})(); 
```

停止使用的一个很好的理由`arguments.callee`是它在 ECMA5 严格模式下不存在。

* * *

如果您想提供一些有关如何加载包含此函数的脚本的上下文，那么我们可能会为您提供一些选项，以便更好地了解它何时加载，因为轮询它肯定不是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:54:47.157

arguments.callee() 在严格模式下是不允许的，并且似乎已被弃用。根据 Mozilla 开发者网络，它还阻止了大量可能的优化。

另一种方法是为您的函数表达式命名并在 setTimeout 中使用该名称。该名称仅在函数内可见。

```
(function pollingFunction() {
  if(typeof myFunction === "undefined") {
    console.log("not loaded");
    setTimeout(pollingFunction, 100);
  } else {
    console.log("loaded");
  }
})(); 
```

# android - 自动将url站点重定向到android中的移动站点？

> ID：14675177
> 
> 赞同：0
> 
> 时间：2013-02-03T17:31:10.327
> 
> 标签：android, rss, saxparser, rss-reader

我已经编写了解析 Rss 的代码，但是我在自动重定向到移动网站时遇到问题 例如：我的 URL 是[http://danviet.vn/rss/24/thoi-su.rss](http://danviet.vn/rss/24/thoi-su.rss)，但是当我解析这个 URL 时，我收到错误：找不到文件：http: [//m.danviet.vn/rss/24/thoi-su.rss](http://m.danviet.vn/rss/24/thoi-su.rss)

我的解析代码：

```
try {
    URL url = new URL(link);
    System.out.println(url.getHost());
    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser parser = factory.newSAXParser();
    XMLReader reader = parser.getXMLReader();
    RSSHandler handler = new RSSHandler();
    reader.setContentHandler(handler);
    InputSource source = new InputSource(url.openStream());
    reader.parse(source);
    return handler.getItemList();
} catch (MalformedURLException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:35:15.630

你应该设置一个特定的用户代理来防止移动重定向（或者只是防止你的 RSS 提要，服务器端的这种重定向）。

选中此[Set the User-Agent Property for a SAX Parser](http://www.bytemycode.com/snippets/snippet/703/1/)。

# php - 发送 xmlhttprequest 的空 responseText

> ID：14675180
> 
> 赞同：0
> 
> 时间：2013-02-03T17:31:24.833
> 
> 标签：php, javascript, xml, ajax, xmlhttprequest

当我发送请求时，警报为空白。文件上传正常，只是没有响应文本。我在这里做错了吗？

```
var request = new XMLHttpRequest();

request.open('POST','upload.php');
request.setRequestHeader('Cache-Control','no-cache');
request.send(data);
alert(request.responseText); 
```

并上传.php

```
if(!empty($_FILES['file'])){
foreach  ($_FILES['file']['name'] as $key => $name) {
if($_FILES['file']['error'][$key] == 0 && move_uploaded_file($_FILES['file']['tmp_name'][$key],"video/$name"))
    {
       $x = "1";
    }
        else
    {
      $x = "2";
    }
  }
}
   if ($x == "1"){echo "success";}
   if ($x == "2"){echo "failed";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:48:57.123

您已经处理了`$x`其值为 1 和 2 的输出。如果`$x`根本没有设置怎么办？

# asp.net-mvc - 以表格形式上传图像并在 MVC 4 上显示

> ID：14675185
> 
> 赞同：7
> 
> 时间：2013-02-03T17:31:48.743
> 
> 标签：asp.net-mvc

存储用户上传的图像然后在我的网站上显示的最佳方法是什么？

1.  将其作为二进制文件存储在数据库中。那么我应该如何用`img`来展示它呢？
    我想我应该以某种方式将它写入一个目录，然后将它的地址作为`img`的`src`属性传递。
2.  我可以将它存储在 Web 服务器的某个位置，将图像的地址存储在数据库中。那么我应该简单地在 `src` 属性中指定数据库中的地址。
3.  其他方法？！

在我看来，第二种方式更方便。
还有一个问题！
在这两种情况下，如何以 html 形式上传这些图像？`@Html`dosent 有类似的东西`@Html.FileFor(...)`，我如何`<input type='file'/>`在我的操作中获取数据？
我很感激任何建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-03T17:37:53.843

> 在我看来，第二种方式更方便。

是的，在我看来也是如此。

> 在这两种情况下，如何以 html 形式上传这些图像？

相当容易。与往常一样，在 ASP.NET MVC 应用程序中，您从设计视图模型开始：

```
public class MyViewModel
{
    [Required]
    public HttpPostedFileBase File { get; set; }
} 
```

那么您可以拥有一个具有 2 个操作的控制器（一个呈现视图，另一个处理文件上传）：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // the user didn't upload any file =>
            // render the same view again in order to display the error message
            return View(model);
        }

        // at this stage the model is valid => 
        // you could handle the file upload here

        // let's generate a filename to store the file on the server
        var fileName = Guid.NewGuid().ToString() + Path.GetFileName(file.FileName);
        var path = Path.Combine(Server.MapPath("~/App_Data"), fileName);
        // store the uploaded file on the file system
        file.SaveAs(path);

        // TODO: now you could store the path in your database

        // and finally return some ActionResult
        // to inform the user that the upload process was successful
        return Content("Thanks for uploading. Your file has been successfully stored on our server");
    }
} 
```

最后，您将拥有一个相应的强类型视图，该视图将包含表单以上传文件：

```
@model MyViewModel
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        @Html.LabelFor(x => x.File)
        @Html.TextBoxFor(x => x.File, new { type = "file" })
        @Html.ValidationMessageFor(x => x.File)
    </div>
    <button type="sybmit">Upload</button>
} 
```

另外，我建议您阅读[`Phil Haack's blog post`](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)说明 ASP.NET MVC 中文件上传的工作原理。

# java - 我应该如何声明字符串？

> ID：14675186
> 
> 赞同：-6
> 
> 时间：2013-02-03T17:32:01.193
> 
> 标签：java

> **可能重复：**
> [关于 Java 字符串池的问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)

Java中声明字符串的两种方式有什么区别？

```
String se1 = "java";
String se2 = "java";
System.out.println(se1 == se2); // output true

String str1 = new String("OKAY");
String str2 = new String("OKAY");
System.out.println(str1 == str2); // output false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:34:09.687

`==`在对象上通过引用进行比较。由于称为内部化的功能，第一对字符串被认为是相等的。要比较字符串的内容相等性，请使用

```
s1.compareTo(s2) == 0 
```

或者

```
s1.equals(s2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T17:34:23.483

字符串常量只有一个实例，例如`"ohai"`，所以`==`会起作用。

新`String`对象就是新对象，它可以从另一个字符串的值创建。

字符串几乎总是应该与 进行比较`.equals`，例如

```
str1.equals(str2); 
```

这比较字符串*值*，而不是引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T17:35:11.283

在第一种情况下，您已将**se1**和**se2**声明为**String literals**。因此，您可以使用**==**运算符来比较两个**Strings**。

但在后来的情况下， **str1**和**str2**是**String 对象**，因此通过 == 运算符进行比较失败。要比较两个对象，您应该使用**equals**方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T17:36:01.043

`==`比较对象（包括字符串）时不应使用。通常`==`比较*引用*，所以它只返回`true`相同的对象。您应该改用`equals()`方法：`str1.equals(str2)`

它有时在第一种情况下对您有用，因为 java 缓存字符串常量，因此`"java"`在这两种情况下都由相同的 String 实例表示。

# jquery-ui - 使用带角度的选择菜单插件

> ID：14675192
> 
> 赞同：0
> 
> 时间：2013-02-03T17:32:59.267
> 
> 标签：jquery-ui, angularjs, angularjs-directive

我正在使用带有角度的选择菜单插件。它比磨机插件的运行有点棘手，将其包装为指令并不会因为嵌套标签而安静地切断它，但我让它工作了，看看我的 plunk [here](http://plnkr.co/edit/6u0OqFe0BaKDWa5TiyV6)。

一路上我遇到了一个奇怪的问题。如果您将 2 个选择并排放置，整个事情就会分崩离析。您可以自己查看 - 在我发布的木板中，只需从周围的 div 中取出第一个选择。

我不确定这是选择菜单问题还是什么和什么之间的一般不兼容。知道发生了什么吗？

有关 selectmenu 指令的更多说明，请查看[此处](http://hill30.blogspot.com/2013/02/jquery-angular-way-selectmenu.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:27:12.470

我不知道当您将两个选择直接放在彼此旁边时，究竟是什么导致事情分崩离析，但是将它们包装在跨度中似乎可以解决问题。这让我相信在进行选择菜单样式的 javascript 中有一个错误。

这是一个示例，来自您的 plunker： [http ://plnkr.co/edit/B5Tj9rwXaiRdLN9mwrsi?p=preview](http://plnkr.co/edit/B5Tj9rwXaiRdLN9mwrsi?p=preview)

# ruby-on-rails - 设计异步，rails升级后抛出错误

> ID：14675196
> 
> 赞同：4
> 
> 时间：2013-02-03T17:33:16.373
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

升级到 Rails 3.1.10 后，使用 Device 版本 2.2.3，Device Async 抛出以下错误，

```
/usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/devise-async-0.6.0/lib/devise/async.rb:42:in `<top (required)>': undefined method `add_module' for Devise:Module (NoMethodError)
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.10/lib/active_support/dependencies.rb:240:in `require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.10/lib/active_support/dependencies.rb:240:in `block in require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.10/lib/active_support/dependencies.rb:223:in `block in load_dependency'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.10/lib/active_support/dependencies.rb:640:in `new_constants_in'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.10/lib/active_support/dependencies.rb:223:in `load_dependency'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.1.10/lib/active_support/dependencies.rb:240:in `require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/devise-async-0.6.0/lib/devise-async.rb:1:in `<top (required)>'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
from /devel/off/ruby/rails/aodb/config/application.rb:7:in `<top (required)>'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.10/lib/rails/commands.rb:52:in `require'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.10/lib/rails/commands.rb:52:in `block in <top (required)>'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.10/lib/rails/commands.rb:49:in `tap'
from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.10/lib/rails/commands.rb:49:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T17:47:08.827

将“gem devise-async”移到“gem devise”下方可以解决此问题。

# objective-c - Objective-C 类扩展

> ID：14675201
> 
> 赞同：35
> 
> 时间：2013-02-03T17:33:36.923
> 
> 标签：objective-c, class-extensions

作为一个相当新的 Objective-c 程序员（有 4 年的 Java 经验），我似乎很难理解何时使用类扩展。据我了解（如果我错了，请纠正我），类别和扩展之间的主要区别在于，扩展希望您在主实现中实现方法，而对于一个类别，它可以在另一个实现中. 人们似乎也主要将扩展用于私有方法。

这是我的第一个问题。使用类扩展声明私有方法和根本不声明它有什么区别（在这两种情况下似乎都在运行中编译）？（示例 1 与 2）

示例 1

```
@interface Class()
-(void) bar;
@end

@implementation Class
-(void) foo {
    [self bar];
}

-(void) bar {
    NSLog(@"bar");
}
@end 
```

示例 2

```
@implementation Class
-(void) foo {
    [self bar];
}

-(void) bar {
    NSLog(@"bar");
}
@end 
```

第二个问题：在扩展中声明 ivars 和在实现中直接声明有什么区别？（例 3 对 4）

示例 3

```
@interface Class() {
    NSArray *mySortedArray;
}
@end

@implementation Class
@end 
```

示例 4

```
@implementation Class
NSArray *mySortedArray;
@end 
```

我有一个关于编码约定的最后一个问题：我什么时候应该在变量名前加上下划线 (_)？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-03T17:52:13.170

**类扩展中的方法**

过去从来没有这样的情况，您不需要声明您的私有方法。直到最近，您还需要在某个地方声明私有方法，而大多数人选择了类扩展来这样做。从 Xcode 4.4（我相信）开始，编译器足够聪明，可以确定在该实现中哪些方法是私有的，无需在其他地方声明它们。

**类扩展中的变量**

至于示例 3 和示例 4，请小心。在类扩展中，变量是该类的实例变量（示例 3）。示例 4 声明了一个全局变量（因为它遵循 C 中的全局变量语义）。对于您的私有实例变量，请坚持使用示例 3。

**编码约定**

至于编码约定，由开发人员/团队决定是否使用下划线。我们的团队使用`m_`私有实例变量。Apple 在他们的[文档中建议](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html#//apple_ref/doc/uid/20001284-1001757)使用下划线（这是合成属性的基础实例变量的命名样式）。重要的是，**在整个代码中保持一致。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-03T17:46:14.163

> 类别和扩展之间的主要区别在于，扩展希望您在主实现中实现方法，而对于一个类别，它可以在另一个实现中。人们似乎也主要将扩展用于私有方法。

正确的。

> 使用类扩展声明私有方法和根本不声明它有什么区别（在这两种情况下似乎都在运行中编译）？

也许只是关于未声明选择器的编译器警告。（当然它运行良好 - 该方法已实现并且确实存在。）还要注意，编译器需要声明（已知的正确函数签名）才能发出符合 ABI 的正确二进制代码。它对未声明的方法（即它们返回`id`并接受可变参数）所做的假设可能不正确 - 通过不兼容类型的指针调用函数是未定义的行为。

> 在扩展中声明 ivars 和在实现中直接声明有什么区别？

在第 4 个示例中，它是一个全局 C 变量，它**不是**您的类的实例变量。

> 什么时候应该在变量名前加下划线 (_)？

只要你想，只要坚持不懈地去做。总是或从不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T17:48:41.163

问题1，例2：Class中实现的方法foo和bar对Class的实例是可见的。如果 foo 和 bar 没有在单独的头文件中声明并且实现文件不可用，则另一个类将不知道 foo 和 bar 的存在。foo 和 bar 是私有方法；Class 的实例仍将响应 foo 和 bar 消息。此外，如果另一个类尝试向 foo 和 bar 发送消息，Xcode 将标记警告，因为 Xcode 无法验证（没有头文件中的声明） foo 和 bar 存在。相比之下，示例 1 的 bar 声明允许任何其他类将消息 bar 发送到 Class 的实例。如果@interface Class 位于另一个类#import 的头文件中，Xcode 也不会为任何消息标记错误。

在问题 2 中，示例 4：mySortedArray 是在 Class 中以局部范围声明的局部不可变数组。示例 3 中的 mySortedArray 是 NSArray 类型的实例变量，其他创建 Class 实例的类可以访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-14T17:16:30.763

希望[subclass-category-and-extensions](http://just-works.blogspot.in/2013/11/subclass-category-and-extensions-in.html)可能对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T18:58:17.880

关于类扩展和类别的优秀解释，

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)

# php - 出现未知数组元素？

> ID：14675203
> 
> 赞同：2
> 
> 时间：2013-02-03T17:33:41.167
> 
> 标签：php, arrays

我正在编写一个代码，突然我发现出现了一些奇怪的值。

```
 function purify($output){
    $temp = 0;
    $max_index = count($output);
    for($i=0;$i < $max_index; $i++){
        if(strlen($output[$i]) == 3){
                $str = str_split($output[$i]);
                arsort($str);
                $str = implode($str);
                $output[$temp] = $str;
                $temp++;
        }
        else unset($output[$i]);
    }
    return array_unique($output);
} 
```

当我传递一个由这些元素组成的数组时：

```
11 115 165 138 999 885 999 456 135 726 642 425 426 
```

我得到这个输出：

```
array(11) { [1]=> string(3) "651" [2]=> string(3) "831" [3]=> string(3) "999" [4]=> string(3) "885" [6]=> string(3) "654" [7]=> string(3) "531" [8]=> string(3) "762" [9]=> string(3) "642" [10]=> string(3) "542" [12]=> string(3) "426" [0]=> string(3) "511" } 
```

第 12 个元素 ([12]=> string(3) "426")`$temp`仅达到 11 时是如何到达那里的？我无法理解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:39:14.443

`$output`在迭代数组时更改数组不是一个好习惯。

考虑创建一个名为的新数组`$result`并更改此行：

```
 $output[$temp] = $str; 
```

至：

```
 $result[$temp] = $str; 
```

`$output`这样，直到循环结束时您才会触摸。

在我看来，您看到的索引很奇怪，因为您的更改会`$output`影响下一次迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:41:14.927

由于您正在覆盖参数*输出*数组，因此最初在数组中的元素保持在原处（除非它们的长度为！= 3）。

也许你可以试试

```
function purify($output){
    $result = array();
    $max_index = count($output);
    for($i=0;$i < $max_index; $i++){
        if(strlen($output[$i]) == 3){
                $str = str_split($output[$i]);
                arsort($str);
                $result[] = implode($str);
        }
    }
    return array_unique($result);
} 
```

顺便说一句，你真的要使用`arsort`而不是`rsort`吗？`rsort`有意义，因为您使用的是索引数组（而不是关联数组）。

```
 rsort($str); 
```

# macos - 什么是“跟踪/BPT 陷阱：5”？

> ID：14675206
> 
> 赞同：19
> 
> 时间：2013-02-03T17:34:01.137
> 
> 标签：macos, crash, error-code

当 Mac OS X 应用程序突然退出时，*Trace/BPT 陷阱：5*是什么意思？

在网上搜索我只发现很多应用程序都像这样退出（ruby，postgres），但只找到特定于应用程序的解决方案。但我想了解那是什么以及它是如何引起的。

我还发现这似乎只是 Mac OS X 上的一个问题（没有发现任何关于 Linux 或 Windows 发生这种情况的提及）。我相信它与线程有关，但我不确定那个。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-03T18:20:26.093

它与无法找到/加载`dylib`特定于 OSX 的 . 正如您发现的那样，它找不到哪一个是特定于应用程序的。

# php - 无法将图片发布到 Facebook

> ID：14675209
> 
> 赞同：1
> 
> 时间：2013-02-03T17:34:19.500
> 
> 标签：php, facebook

我正在开发一个 Facebook 应用程序，它会在图像中给出结果。

我使用 PHP gd 库对其进行编码，它是动态的。

当您访问该页面时 - “ [http://example.com/result.php?name=your](http://example.com/result.php?name=your) name”，它会输出一个图像文件，其中包含您在 URL 上给出的名称。我的问题是将这张图片发布到 Facebook 用户的照片流中。用户可以看到输出，但是当我尝试发布它时，它会显示

> 致命错误：未捕获的 CurlException：26：无法在 /home/vhosts/powerofname.orgfree.com/base_facebook.php 中打开文件“ [http://mysite.orgfree.com/result.php?name=bestapp](http://mysite.orgfree.com/result.php?name=bestapp) ” 977

这是我以前发布的代码

```
$facebook->setFileUploadSupport(true);
$ret_obj = $facebook->api('/me/photos', 'POST', array(
    'source' => '@'.'http://mysite.orgfree.com/result.php?name='.$name,
    'message' => 'Blah blah'
)); 
```

如果有人能发现我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:20:50.413

如果您为图像提供 HTTP URL（而不是实际上传），那么您必须使用参数`url`而不是`source`：

```
$ret_obj = $facebook->api('/me/photos', 'POST', array(
    'url' => 'http://mysite.orgfree.com/result.php?name='.$name,
    'message' => 'Blah blah'
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:16:42.927

您必须在文件系统上提供图像路径，而不是在网络上。因此，您必须下载图像，将其保存到文件，提供该文件的路径，上传并从磁盘中删除图像。

```
$tmpfile = tempnam(__DIR__,'fbu');
file_put_contents($tmpfile, 'http://powerofname.orgfree.com/result.php?name='.$name);
$ret_obj = $facebook->api('/me/photos', 'POST', array(
    'source' => '@'.$tmpfile,
    'message' => 'Blah blah'
));
unlink($tmpfile); 
```

# javascript - AngularJS：在回调函数中设置 $scope 属性

> ID：14675217
> 
> 赞同：0
> 
> 时间：2013-02-03T17:35:19.123
> 
> 标签：javascript, angularjs, directive

我正在尝试使用 AngularUI 指令日历并在我自己的指令中的回调函数中设置它的源（所以基本上我将指令包装到指令中）。

所以在 html 中使用我的指令是：

```
<calendar><calendar> 
```

我有这个模板形成我的包装指令（calendar.html）：

```
<div class="row-fluid" >
 <div data-ui-calendar="{height: 450,editable: false}" class="span8 calendar" data-ng-model="events"></div>
</div> 
```

并声明了这个指令：

```
.directive('calendar', ['calendarFct', function(calendarFct) {
    return {
        restrict: 'E',
        templateUrl: 'partials/directives/calendar.html',
        link: function(scope, element, attrs) {
             var mainScope = scope;
             // load data from server
             calendarFct.getEvents(function(data) {
                 mainScope.events = data; // DOESN'T WORK
              });

             mainScope.events = data; // this would work, but I don't have "data" here
         }
     }; 
```

所以问题是我试图在回调函数中设置 scope.events 但它在浏览器中没有显示任何内容（但回调函数中的代码被执行）。如果我在回调之外尝试它，它会工作，但我必须先从服务器加载数据......如何让它工作？我认为这个技巧`mainScope`会起作用，甚至可以直接起作用，`scope.events`但不会。谢谢

**AngularUI 的完整日历看起来有些问题。我尝试将指令模板更改为简单的输入框，并在回调函数中更改了与 ng-model 绑定的值，它工作正常**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:45:11.003

我不喜欢回答自己的问题，但这让我很紧张，而且解决方案也不是很“明显”。我曾经有 AngularUI v.0.3.0。所以我更新到 0.3.2 并且问题消失了：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:37:56.420

尝试做

```
scope.$apply(function(){
  mainScope.events = data;
}); 
```

# iphone - 一旦应用程序准备好，如何将数据库文件导出到 iphone？

> ID：14675222
> 
> 赞同：0
> 
> 时间：2013-02-03T17:35:50.413
> 
> 标签：iphone, database, file, sqlite, directory

我的 IOS5，Iphone 应用程序使用一个数据库，我用应用程序外部的数据填充该数据库。

该应用程序仅打开数据库文件并读取数据，不插入或更新。

应用程序在模拟器中运行良好，但是当我将它发布到 iphone 时它​​崩溃了 - 我相信这是因为没有复制数据库文件。

当前文件已打开

/Users/stenio123/Library/Application Support/iPhone Simulator/6.0/Applications/4B3205EB-D98B-4D65-B22A-57E5E6A93F3C/MyAppName.app/MyDatabase.data

II 通过使用获取代码中的位置路径

```
NSArray *documentDirectories = 
NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                        NSUserDomainMask, YES);     
NSString *documentDirectory = [documentDirectories objectAtIndex:0];
documentDirectory stringByAppendingPathComponent:@"MyDatabase.data"] 
```

哪个适用于模拟器。

但是我应该改变什么才能让它在真正的 iPhone 上运行？

我尝试将 MyDatabase.data 文件拖放到 XCode，确保我检查了“复制项目”和“添加到目标”。然后我将上面的代码更改为以下变体

```
NSString *documentDirectory = @"/MyDatabaseFolder/";

NSString *documentDirectory = @"./MyDatabaseFolder/";

NSString *documentDirectory = @"MyDatabaseFolder/"; 
```

但是没有一个有效，即使在模拟器中也是如此。您能否提一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:40:37.413

尝试通过将数据库文件拖到 Xcode 中的项目中来将其添加到应用程序的包中，而不是仅仅将其添加到文档目录中。从那里，您可以随意使用它，并且应该将其复制到设备中。例如：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"MyDatabase" ofType:@"data"];  
NSData *data = [NSData dataWithContentsOfFile:filePath];  
if (data) {

    // do something with the database data

} 
```

# jpa - JPA Criteria API：如何表达字面真和字面假？

> ID：14675229
> 
> 赞同：41
> 
> 时间：2013-02-03T17:36:24.517
> 
> 标签：jpa, criteria-api

如何在 JPA 的 Criteria API 中表达文字`true`和文字？`false`

我正在寻找类似`Predicate alwaysTrue = CriterialBuilder.DefaultLiterals.TRUE`（类似于`java.lang.Boolean.TRUE`）的东西。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-03T17:43:46.167

要获得始终为**真的** `Predicate`实例，请使用[`criteriaBuilder.and()`](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#and(javax.persistence.criteria.Predicate...)).
要获取始终为**假** `Predicate`的实例，请使用[`criteriaBuilder.or()`](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#or(javax.persistence.criteria.Predicate...)).

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-05-28T15:56:37.220

[CriteriaBuilder#conjunction()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#conjunction())返回一个 TRUE 谓词。

[CriteriaBuilder#disjunction()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#disjunction())返回一个 FALSE 谓词。

```
/**
 * Create a conjunction (with zero conjuncts).
 * A conjunction with zero conjuncts is true.
 *
 * @return and predicate
 */
Predicate conjunction();

/**
 * Create a disjunction (with zero disjuncts).
 * A disjunction with zero disjuncts is false.
 *
 * @return or predicate
 */
Predicate disjunction(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-04-27T17:03:12.543

尽管其他答案解决了问题，但我认为它们没有显示代码的意图，这应该是“一个始终正确的谓词”。

我个人认为下面的方法更清楚，虽然有点长。

**永远真实**

```
criteriaBuilder.isTrue(criteriaBuilder.literal(true)); 
```

**总是假的**

```
criteriaBuilder.isFalse(criteriaBuilder.literal(true)); 
```

# python - python django urls.py from app import views as myviews

> ID：14675232
> 
> 赞同：1
> 
> 时间：2013-02-03T17:36:55.730
> 
> 标签：python, django, import, django-urls

可能我不正确理解 Python 导入。

我发现的大多数示例 urls.py 文件都没有视图的导入语句。特别是结合 contrib 包，如 Rosetta 或 scribbler。

网址.py

```
from django.conf.urls import patterns, include, url
from forum import urls as forum_urls

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', 'home.views.home', name='home'),
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^rosetta/', include('rosetta.urls')),
    url(r'^forum/', include(forum_urls)),
) 
```

为什么我不能在没有包含语句的情况下也包含 forum.urls？

在进行实验时，我发现了一些有趣的东西。当我使用 ./manage.py shell 启动 ipython 时，然后导入论坛；我可以输入 forum.[tab] 来获得制表符补全，而 ipython 给我模型补全，但不是视图。我的

```
__init__.py 
```

文件是空的，我有一个简单的 models.py，因为我有一个简单的 views.py。

那么，这两个mudule为什么表现不同呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:23:25.673

在 Rosetta 和 scribbler 的情况下，它们被添加到 settings.py 文件的 INSTALLED_APPS 部分，所以这可能就是它们被导入的方式。

# d3.js - 绑定到父级的数据何时可供其子级使用？

> ID：14675237
> 
> 赞同：1
> 
> 时间：2013-02-03T17:37:25.950
> 
> 标签：d3.js

在某些情况下，我能够将我的数据绑定到父元素（例如`<svg>`容器），然后附加子`<path>`元素，然后`d`用数据更新它们的属性。其他时候，我似乎无法做到这一点。

例如，在我的代码中，我有

```
var svg = d3.select(this).selectAll("svg").data([allSeries]); 
```

其中`allSeries`是我的三个时间序列数据的 3 元素数组。然后我为每个元素添加一个`path`。

```
var gEnter = svg.enter().append("svg").append("g");
for (var i = allSeries.length - 1; i >= 0; i--) {
  gEnter.append("path").attr("class", "line").style("opacity", 0);
}; 
```

后来，当需要添加/更新数据时，我尝试了这个

```
g.selectAll(".line")
   .attr("d", function(d) { return line(d.values); }) 
```

但它没有用。但是，这确实有效

```
g.selectAll(".line")
   .data(allSeries)
   .attr("d", function(d) { return line(d.values); }) 
```

那么我怎样才能让我的`.line`元素从中读取数据`svg`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:53:35.550

嵌套组需要将其数据源声明为标识函数才能访问父组的子元素：

```
g.selectAll(".line")
   .data(function(d) {return d;})
   .attr("d", function(d) { return line(d.values); }) 
```

这在 selection.data() 函数的文档中有更好的解释：[https ://github.com/mbostock/d3/wiki/Selections#wiki-data](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

> 例如，您可以将二维数组绑定到初始选择，然后将包含的内部数组绑定到每个子选择。在这种情况下，values 函数是标识函数：它为每组子元素调用，传递绑定到父元素的数据，并返回这个数据数组。

# ruby-on-rails - 定期更新的 rails faye 服务器

> ID：14675241
> 
> 赞同：0
> 
> 时间：2013-02-03T17:37:54.283
> 
> 标签：ruby-on-rails, ruby, publish-subscribe

需要想出最好的方法来做到这一点。

我使用 Thin 为 Rails 应用程序部署 faye、webrick

我有一个拍卖网站，它使用有关最新出价的信息更新订阅的频道，所有这些都是通过 Faye 和 Rails 完成的。

我需要确保用户使用计数器/计时器看到拍卖结束时间的倒计时。

如果我在客户端使用 JS 每秒轮询剩余时间，我可能会在服务器上每秒收到 1000 个请求

我也可以使用 JS 仅在客户端倒计时，然后每隔 5 秒定期同步浏览器，以确保它们与服务器同步。

或者另一种选择可能是使用 faye 将倒计时发布给每个连接的用户到浏览器

我有点担心流量，并希望确保用户看到拍卖倒计时的正确时间

从逻辑上讲，我认为客户端 JS 和定期推送以同步它会工作得最好。

其他人如何做到这一点？最好的方法是什么？我错过了哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:48:31.847

[最好的方法可能是使用此railscast](http://railscasts.com/episodes/260-messaging-with-faye)中描述的Faye 。

使用 JS 轮询更改可能不适合您，因为您有很多用户。此外，即将推出的 Rails 4 将允许您从控制器流式传输服务器发送的事件，但这还有些实验性。[这](http://tenderlovemaking.com/2012/07/30/is-it-live.html)是该功能的说明。

如果您只想发布剩余时间，那么 JS 轮询不经常进行以保持同步是一种选择，但很快它就会在您添加新功能和用户时成为服务器负载问题。

# javascript - 骨干网.js非法调用

> ID：14675253
> 
> 赞同：0
> 
> 时间：2013-02-03T17:39:06.607
> 
> 标签：javascript, backbone.js, local-storage

[http://jsfiddle.net/herrturtur/ExWFH/](http://jsfiddle.net/herrturtur/ExWFH/)

试试这个：

1.  点击加号按钮，
2.  双击新创建的名称字段，
3.  为字段填写一些内容
4.  按 Enter。

时代字段（从和直到）正确显示，但没有保存（重新加载以查看效果）并且名称字段根本没有更新。

我`this.model.save()`在第 153 行对 NameView 的关闭函数（由 Enter-keypress 触发）中的属性进行 set() 处理后调用。

```
close: function(e){ 
    this.$el.removeClass('editing');
    this.model.set({
        value: this.$('.name-value').val(), 
        from: this.model.from, // this is saved in the 
        until: this.model.until
    });

    this.model.save();

    if(this.eraView.$el.attr('editing')){
        this.eraView.close();
    }
    this.render();
}, 
```

有人可以告诉我我做错了什么吗？

最重要的是，我得到一个 TypeError: Illegal Invocation in Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:45:29.527

您遇到的问题是调用该`close`函数时。

在您的`close`函数中，您正在调用自身，因此它看起来像是一个冗余循环。

[JS斌](http://jsbin.com/efedun/1/edit)

在您的 上`karass.EraView`，您还会在不必要的函数中触发相同的函数。我建议将其重命名为与操作意图相对应的不同函数。

```
this.trigger('close'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:01:35.400

由于以下原因，您会收到该错误： `this.eraView.on('close', close);`

它应该是： `this.eraView.on('close', this.close, this);`

接下来，当你这样做时：

```
this.model.set({
            value: this.$('.name-value').val(), 
            from: this.model.from, 
            until: this.model.until
        }); 
```

`this.model.from`并且`this.model.until`是未定义的，而且您之前已经设置了这些属性。该模型已经拥有它们。如果你想访问它们，你需要做`this.model.get('from')`而不是`this.model.from`. 但是从模型中获取值并再次设置它是不必要的。你可以只`set`值，因为其他 2 已经在那里。

另一个问题类似。渲染 NameView 时，您正在执行以下操作：

`this.$el.html(this.template({value: this.model.value}));`

和以前一样，你需要做`this.model.get('value')`。

您应该尝试在 Chrome 中设置一些断点并逐步执行代码。很容易通过它，看看出了什么问题:)

更新[了 jsFiddle](http://jsfiddle.net/phoenecke/ExWFH/6/)。

# php - 负数时改变线条颜色

> ID：14675254
> 
> 赞同：1
> 
> 时间：2013-02-03T17:39:14.057
> 
> 标签：php, pchart

我想使用 Pchart 制作温度线图。
我需要的是正温度是红色，负温度是蓝色。
关于如何实现这种效果的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:24:31.597

在 pChart 示例中，请参阅页面 [Examples > Area Chart > drawAreaChart.threshold]。 ![带有阈值着色的 drawAreaChart 的 pGraph 文档示例的屏幕截图](../Images/0b36bf59875450d3cbb4412703465d7f.png) 如果区域的某些部分（在区域图中）在您配置的阈值之内，这确实会使它们着色。

该示例中的代码片段：

```
/* Draw the area chart */
$Threshold = "";
$Threshold[] = array("Min"=>0,"Max"=>5,"R"=>187,"G"=>220,"B"=>0,"Alpha"=>100);
$Threshold[] = array("Min"=>5,"Max"=>10,"R"=>240,"G"=>132,"B"=>20,"Alpha"=>100);
$Threshold[] = array("Min"=>10,"Max"=>20,"R"=>240,"G"=>91,"B"=>20,"Alpha"=>100);
$myPicture->setShadow(TRUE,array("X"=>1,"Y"=>1,"R"=>0,"G"=>0,"B"=>0,"Alpha"=>20));
$myPicture->drawAreaChart(array("Threshold"=>$Threshold)); 
```

这种高于/低于阈值的着色在面积图中是可能的。我怀疑这适用于折线图，但值得一试..

它也可以用水平线表示阈值，同样来自这个例子：

```
/* Write the thresholds */
$myPicture->drawThreshold(5,array("WriteCaption"=>TRUE,"Caption"=>"Warn Zone","Alpha"=>70,"Ticks"=>2,"R"=>0,"G"=>0,"B"=>255));
$myPicture->drawThreshold(10,array("WriteCaption"=>TRUE,"Caption"=>"Error Zone","Alpha"=>70,"Ticks"=>2,"R"=>0,"G"=>0,"B"=>255)); 
```

顺便说一下，线（非区域）图支持此阈值虚线。

# c# - 防止物品掉到自己身上

> ID：14675256
> 
> 赞同：0
> 
> 时间：2013-02-03T17:39:31.927
> 
> 标签：c#, winforms, drag-and-drop

好的，所以我在这里第一次尝试拖放功能。我已经处理了鼠标按下并从我的源代码管理中调用了 DoDragDrop。

我想要实现的是将帐户从一个 MDI 孩子复制/移动到另一个。在我的上下文中，回到源代码控制是没有任何意义的。

我正在查看拖动输入，您可以在其中提供有关当前效果的信息。

我想要如下所示的东西：

```
If(eventData.Source != accountList)
{
    eventData.Effect = DragDropEffects.Copy;
} 
```

但是，我似乎找不到任何方法来确定数据的源控制。我唯一能想到的就是拥有一个自定义类并将其传递到数据中，并在其中嵌入源代码控制，还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:45:56.740

这是在 WPF 中吗？如果是，那么您可以使用`OriginalSource`传递给您的方法的事件的属性，因为它应该映射到您在调用 DoDragDrop 方法时传递的源。

如果您使用的是 Windows 窗体，则在开始操作时无法传递自己的源，因此最好的办法是附加`IDataObject`您创建的自定义数据并根据该数据确定源。

在我看来，拖放用例是疯狂的，请确保您还涵盖从外部应用程序开始拖动的情况，因为您将收到相同的 DragEnter 和所有其他方法，就像您在应用程序中启动它一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T14:59:13.027

在对 DoDragDrop 的调用中，将对象添加为额外格式：

```
 var dragSource = this;
 var data = "Hello";

 var dataObj = new DataObject(data);
 dataObj.SetData("DragSource", dragSource);
 DragDrop.DoDragDrop(dragSource, dataObj, DragDropEffects.Copy); 
```

现在在 OnDrag 处理程序中很容易获得拖动源：

```
protected override void OnDrop(DragEventArgs e)
{
  var data = e.Data.GetData(DataFormats.Text);
  var dragSource = e.Data.GetData("DragSource");
  ...
} 
```

# objective-c - 以编程方式绑定 NSTableViewColumn

> ID：14675259
> 
> 赞同：3
> 
> 时间：2013-02-03T17:40:01.680
> 
> 标签：objective-c, cocoa, binding, nstableview

如何以编程方式将 NSTableViewColumn 绑定到 NSArray.arrangedObjects 键？我知道如何在 IB 中做到这一点，但无法找到它是如何以编程方式完成的。代码在运行时添加新列，这些新列需要绑定到我的arraycontroller。我不能在 IB 中做到这一点，因为它们在 IB 中尚不存在。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T18:19:22.850

FWIW：我假设您在`NSTableView`这里使用基于 View 的 s。

为此，您需要为`NSTableView`. 在该委托中，您需要实现`-tableView:viewForTableColumn:row:`. 在那里，您可以通过询问 TableView 来获取表格单元格视图。一旦你有了它，你必须找出你想要绑定的控件，然后绑定它们。一切就绪后，返回表格单元格视图。这是一个简单的例子：

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSView* retVal = [tableView makeViewWithIdentifier:[tableColumn identifier] owner:[tableView delegate]];

    // Note: You probably don't want to be snarfing out controls this way -- a better
    // way might be to have a custom NSTableCellView subclass with the controls plugged
    // into IBOutlets on it, but that's left as an exercise for the reader.
    NSTextField* textField = [[retVal subviews] objectAtIndex: 0];

    [textField bind: NSValueBinding toObject: retVal withKeyPath: @"objectValue.name" options: nil];

    return retVal;
} 
```

# xslt-1.0 - 如何比较 xslt 1.1 中的先前节点值？

> ID：14675261
> 
> 赞同：-1
> 
> 时间：2013-02-03T17:40:10.903
> 
> 标签：xslt-1.0

```
<pre><getPolicystatus>
<agentno>001</agentno>
<policynumber>1</policynumber><req><req1>age</req1><status>success</status></req><req><req1>test</req1><status>failure</status></req><req><req1>health</req1><status>success</status></req></policyresult>
<policyresult><agentno>001</agentno>
<policynumber>1</policynumber><req><req1>age</req1><status>success</status></req><req><req1>test</req1><status>failure</status></req><req><req1>health</req1><status>success</status></req></policyresult>
<policyresult><agentno>002</agentno>
<policynumber>1</policynumber><req><req1>age</req1><status>success</status></req><req><req1>test</req1><status>failure</status></req><req><req1>health</req1><status>success</status></req></policyresult></getPolicystatus>
</pre> 
```

我有一个类似于上面的 XML。我需要根据代理编号显示如下输出。如果代理编号重复，我们需要跳过该编号。

```
001

1agesuccesstestfailurehealthsuccess
1agesuccesstestfailurehealthsuccess

002

1agesuccesstestfailurehealthsuccess 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:52:16.440

假设 (a) 在示例 XML 的第一行末尾缺少 policyresult 的开始标记，并且 (b) 您的意思是您希望在 XSLT 1.0 中处理其 agentno 的每个 policyresult 元素child 与其前一个兄弟的 agentno 孩子不同，那么最简单的方法是为 policyresult 编写两个模板。

一个将处理应该显示元素的情况：

```
<xsl:template match="policyresult">
  <!--* contents left as exercise for the reader ... *-->
</xsl:template> 
```

另一个将处理应该抑制元素的情况：

```
<xsl:template match="policyresult
  [agentno = ../preceding-sibling::policyresult[1]/agentno]"/> 
```

另一方面，如果 (b') policyresult 应该被抑制，如果它的 agentno 匹配*任何*前面的代理编号，而不仅仅是前一个 policyresult 元素中的那个，那么`[1]`在第二个匹配模式中抑制 。

[*附录*]

这两个模板，连同您编写的其他模板，将一起进入您正在编写的 XSL 样式表中，因此您将拥有或多或少类似于以下内容的内容：

```
 <xsl:output method="text"/>

  <xsl:template match="policyresult">
    <xsl:text>&#xA;&#xA;</xsl:text>
    <xsl:value-of select="agentno"/>
    <xsl:text>&#xA;&#xA;&#xA;</xsl:text>
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="policyresult
  [agentno = preceding-sibling::policyresult[1]/agentno]">
    <xsl:message>Suppressing duplicate policyresult ...</xsl:message>
  </xsl:template>

  <xsl:template match="agentno"/>
  <xsl:template match="text()[not(normalize-space())]"/>

</xsl:stylesheet> 
```

如果您刚刚开始使用 XSLT，我强烈建议您获得一个很好的教程介绍并完成它。XSLT 与其他编程语言有很大的不同，只是虚张声势不太可能带来令人满意的结果。

# javascript - 仅在重新加载后随机化的随机数组，仅限 javascript

> ID：14675267
> 
> 赞同：0
> 
> 时间：2013-02-03T17:40:41.990
> 
> 标签：javascript

我创建了一个包含 6 个类的字符串数组。该函数由一个按钮调用，每次单击都会创建一个新类。问题是当我单击按钮时，我会得到一个随机类，但如果我再次按下按钮。显示的是同一个类，而不是随机类。如果我重新加载页面，则会生成一个随机类，但正如我所说，当我再次单击时会生成相同的类。

这是我的随机数组。

```
 var Array=["dice dice-side-one",
    "dice dice-side-two",
    "dice dice-side-three",
    "dice dice-side-four",
    "dice dice-side-five",
    "dice dice-side-six",
    "dice dice-side-six"];
    var rand = Array[Math.floor(Math.random() * Array.length)];

    function addDiceEvent() {
        dicesides_func(rand);

    }
} 
```

如果问题出在某处，我会粘贴完整的功能。

```
 function AddEvent(){
        var AddEvent = "add";
        var addClassArr= document.getElementsByClassName(AddEvent);
        for(var i=0; i<addClassArr.length; i++){
            var addClass = addClassArr[i];
            addClass.addEventListener("click", addDiceEvent, true);
        }
        var Array=["dice dice-side-one",
        "dice dice-side-two",
        "dice dice-side-three",
        "dice dice-side-four",
        "dice dice-side-five",
        "dice dice-side-six",
        "dice dice-side-six"];
        var rand = Array[Math.floor(Math.random() * Array.length)];

        function addDiceEvent() {
            dicesides_func(rand);

        }
    }
    AddEvent(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:43:23.407

每次调用函数时只做随机的事情，而不是在它之外：

```
function addDiceEvent() {
    var rand = Array[Math.floor(Math.random() * Array.length)];
    dicesides_func(rand);
} 
```

# multithreading - 尽管加入了循环，但仍有未加入的线程

> ID：14675268
> 
> 赞同：0
> 
> 时间：2013-02-03T17:41:04.223
> 
> 标签：multithreading, perl, join

我在我的`Perl`脚本中使用了多个线程，并在最后通过这段代码加入它们：

```
my @running = threads->list(threads::running);  
while ($#running > -1) {
   foreach (@thrs) {
      $_->join() if $_->is_joinable();
   }
   @running = threads->list(threads::running);
} 
```

但在 50% 时我收到错误消息`Perl exited with active threads`。有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:47:39.040

当没有更多*正在运行的*线程时停止循环，但只有在没有*任何类型的*线程时才应该停止循环。换句话说，您不检查是否有可连接的线程。解决方案：

```
while (threads->list()) {
   $_->join() for threads->list(threads::joinable);
} 
```

当然，这使用 100% 的 CPU。避免这种情况的简单方法是使用：

```
$_->join() for threads->list(); 
```

# bash - 从分隔列文件中提取非分隔列

> ID：14675273
> 
> 赞同：0
> 
> 时间：2013-02-03T17:41:16.783
> 
> 标签：bash, awk, grep

具有列之间没有分隔符的文件：

```
cat file_no_del 
 aba14092999140932436
 aba1111478991111484975
 aba1111973668111975690 
```

如何从原始文件中提取这些行（列之间有分隔符）？并将其保存在带有分隔列的新文件中？

```
cat original_file
 aba1   40929991    40932436
 aba1   100496122   100501188
 aba1   101708714   101709305
 aba1   111478991   111484975
 aba1   111973668   111975690

cat wanted_output
 aba1   40929991    40932436
 aba1   111478991   111484975
 aba1   111973668   111975690 
```

我在想有可能这样做：

```
for i in $(sort orginal_file); do awk '{print $1$2$3}' $i | grep -w - file_no_del 
```

但是我在使用 awk 时遇到了问题，不知道在 greping 之后我应该如何回到循环中以分隔形式。
希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:49:06.377

如果`file_no_del`足够小，只需执行以下操作：

```
awk 'NR==FNR{ a[$0]++ } NR!=FNR && a[$1 $2 $3]' file_no_del original_file 
```

# grails - Chrome 开发工具将 Grails 应用程序中动态生成的文件的下载状态显示为已取消

> ID：14675274
> 
> 赞同：2
> 
> 时间：2013-02-03T17:41:40.183
> 
> 标签：grails, download, extjs4.1, google-chrome-devtools

我需要从请求中发送的一些参数生成 Excel 文件。一切似乎都运行良好，但如果我打开 Chrome 的开发工具，它会将下载标记为红色，并且状态列显示“（已取消）”。我仍然可以很好地打开下载的文件。

我还使用 net-internals 来记录更多信息，但我不确定我在寻找什么。

最终的日志消息显示：

```
[st=52] DOWNLOAD_ITEM_COMPLETING
                       --> bytes_so_far = "6656"
                       --> final_hash = "BLAHBLAHBLAH....."
[st=80]    DOWNLOAD_FILE_DETACHED
[st=80]    DOWNLOAD_FILE_CLOSED
[st=93]    DOWNLOAD_ITEM_FINISHED
                       --> auto_opened = "no"
[st=94] -DOWNLOAD_ITEM_ACTIVE 
```

生成文件的 Grails / apache poi 代码相当简单：

```
def downloadFile() {
    def cellData = params.data

    response.setContentType("application/vnd.ms-excel")
    response.setHeader('Content-Disposition', 'attachment;filename=myfile.xls')
    response.setStatus(HttpServletResponse.SC_OK)

    Workbook wb = new HSSFWorkbook()
    Sheet sheet = wb.createSheet("My Sheet")
    Row row = sheet.createRow(0)
    row.createCell(0).setCellValue(cellData)

    ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
    wb.write(outByteStream);
    byte [] outArray = outByteStream.toByteArray();

    response.setContentLength(outArray.length);
    response.outputStream << outArray
} 
```

最后，在我们的 Javascript 应用程序（我们使用 ExtJS 4）中，我尝试了多种下载文件的方法：

1.  将隐藏表单附加到文档（使用 action = "downloadFile" 控制器方法）并调用 form.submit()
2.  将隐藏的 iframe 附加到文档（使用 src = "downloadFile" 控制器方法）
3.  将 Ajax.request 与 isUpload: true 和 form: hiddenFormElement 一起使用

这三个都成功下载了文件，但 Chrome 仍然显示状态已取消。

我在 Chrome 控制台中注意到了这个警告：

```
Resource interpreted as Document but transferred with MIME type application/vnd.ms-excel 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:46:15.953

添加这一行

```
render(text: outArray, contentType: "text/xls", encoding: "UTF-8") 
```

在这之后

```
response.outputStream << outArray 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:09:54.720

Adman 抱歉忘了刷新，下面的代码在我的 chrome 上运行

```
def xls() {
def cellData = params.data

response.setContentType("application/vnd.ms-excel")
response.setHeader('Content-Disposition', 'attachment;filename=myfile.xls')
response.setStatus(HttpServletResponse.SC_OK)

Workbook wb = new HSSFWorkbook()
Sheet sheet = wb.createSheet("My Sheet")
Row row = sheet.createRow(0)
row.createCell(0).setCellValue(cellData)

ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
wb.write(outByteStream);
byte [] outArray = outByteStream.toByteArray();

response.setContentLength(outArray.length);
response.outputStream << outArray
response.outputStream.flush
render(text: outArray, contentType: "application/vnd.ms-excel", encoding: "UTF-8") 
```

}

# java - 使用字符串中的标记格式化 xml 文本

> ID：14675275
> 
> 赞同：0
> 
> 时间：2013-02-03T17:41:42.080
> 
> 标签：java, android, xml, format

我正在尝试获取一些例如会更改的代码

“^^文字^^”

变成这样

“**文字**”

所以我需要它来删除 ^^ 标记并在“text”字符串上添加一个 Spannable Text 使其变为粗体。现在我有这个代码。

```
public void format()
{
    TextView textView = (TextView) findViewById(R.id.test);

    CharSequence text = null;

    if(textView != null)
    {
         text = textView.getText();
    }

    String token = "^^";

    if(text != null)
    {
        int length = text.length();
        int start = text.toString().indexOf(token) + length;
        int end = text.toString().indexOf(token, start);

        if (start > -1 && end > -1)
        {
            SpannableStringBuilder ssb = new SpannableStringBuilder(text);

            ssb.setSpan(new ForegroundColorSpan(0x000000), start, end, 0);
            ssb.delete(end, end + length);
            ssb.delete(start - length, start);

            text = ssb;
            System.out.println("format");
        }

        System.out.println("works");
    }

    textView.setText(text);
    System.out.println("running");
} 
```

这段代码在 onCreate 中被调用，看起来像这样。

```
@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    format();

    setContentView(R.layout.activity_tutorial_basic_file_test);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
    {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

这是我正在使用的 XML 布局文件。

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:text="@string/empty" />

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="2dp"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp"
    android:layout_marginTop="2dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/test"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/test_text"
            android:textColor="#FFFFFF" />
    </LinearLayout>
</ScrollView> 
```

最后是我在资源文件中使用的字符串。

```
<string name="test_text">Test string ^^ for ^^ formatter code</string> 
```

我做错了什么或者我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:39:08.073

你在这里有几个问题：

1.  在您设置内容布局之前`onCreate`调用。*首先设置布局，然后对*其中声明的视图进行操作，即：`format()`

     *```
    // First!
    setContentView(R.layout.activity_tutorial_basic_file_test);
    // Second!
    format(); 
    ```* 
**   在格式中，您错误地定义`length`为`text`. 查看代码，它绝对应该是长度`token`：

    ```
    // token length, not text length!
    int length = token.length(); 
    ```

    *   请记住，将颜色值作为`int`值通常意味着您应该明确设置 alpha 值。如果你不将 alpha 设置为`0`（即透明）。您在 中使用`0x000000`(transparent black) `ForegroundColorSpan`，但更常见的是设置`0xff000000`(opaque black)。如果是这种情况，请将行更改为：

    ```
    ssb.setSpan(new ForegroundColorSpan(0xff000000), start, end, 0); 
    ```

    *   您应该*直接*`TextView`将内容设置为. 这是因为自动看到它是 a并应用您想要的格式。而将其设置为的字符串表示形式根本不应用格式。所以你应该更换这一行：`SpannableStringBuilder` *`TextView``Spannable``SpannableStringBuilder`*

     *```
    text = ssb; 
    ```

    和：

    ```
    textView.setText(sbb); 
    ```

    并删除后者：

    ```
    textView.setText(text); 
    ```** 

 **最终代码如下：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_format_test);
    format();
    // Your custom code was here, deleted for readability
}

public void format() {
    TextView textView = (TextView)findViewById(R.id.test);

    CharSequence text = null;

    if (textView != null) {
        text = textView.getText();
    }

    String token = "^^";

    if (text != null) {
        int length = token.length();
        int start = text.toString().indexOf(token) + length;
        int end = text.toString().indexOf(token, start + length);

        if (start > -1 && end > -1) {
            SpannableStringBuilder ssb = new SpannableStringBuilder(text);
            ssb.setSpan(new ForegroundColorSpan(0xff000000), start, end, 0);
            ssb.delete(end, end + length);
            ssb.delete(start - length, start);

            textView.setText(ssb);
            System.out.println("format");
        }

        System.out.println("works");
    }

    System.out.println("running");
} 
```**

# opencv - OpenCV：'BruteForceMatcher'：未声明的标识符

> ID：14675279
> 
> 赞同：4
> 
> 时间：2013-02-03T17:42:34.033
> 
> 标签：opencv

我正在使用 OpenCV 2.4.3，我正在尝试调用 BruteForceMatcher，但我收到了这个错误：

```
1>------ Build started: Project: pixelTracking, Configuration: Debug Win32 ------
1>Compiling...
1>main.cpp
1>d:\myproject\opencv\belajar\pixeltracking\pixeltracking\main.cpp(58) : error C2065: 'BruteForceMatcher' : undeclared identifier
1>d:\myproject\opencv\belajar\pixeltracking\pixeltracking\main.cpp(58) : error C2275: 'cv::L2<T>' : illegal use of this type as an expression
1>        with 
1>        [
1>            T=float
1>        ]
1>d:\myproject\opencv\belajar\pixeltracking\pixeltracking\main.cpp(58) : error C2065: 'matcher' : undeclared identifier
1>d:\myproject\opencv\belajar\pixeltracking\pixeltracking\main.cpp(61) : error C2065: 'matcher' : undeclared identifier
1>d:\myproject\opencv\belajar\pixeltracking\pixeltracking\main.cpp(61) : error C2228: left of '.match' must have class/struct/union
1>       type is ''unknown-type''
1>Build log was saved at "file://d:\myproject\OPENCV\belajar\pixelTracking\pixelTracking\Debug\BuildLog.htm"
1>pixelTracking - 5 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我的代码：

```
#include <iostream>
#include <vector>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include <opencv2/features2d/features2d.hpp>

int main()
{
        // Read input images
        cv::Mat image1= cv::imread("../gambar1.jpg",0);
        cv::Mat image2= cv::imread("../gambar2.jpg",0);
        if (!image1.data || !image2.data)
                return 0;

    // Display the images
        cv::namedWindow("Right Image");
        cv::imshow("Right Image",image1);
        cv::namedWindow("Left Image");
        cv::imshow("Left Image",image2);

        // vector of keypoints
        std::vector<cv::KeyPoint> keypoints1;
        std::vector<cv::KeyPoint> keypoints2;

        // Construction of the SURF feature detector
        cv::SurfFeatureDetector surf(3000);

        // Detection of the SURF features
        surf.detect(image1,keypoints1);
        surf.detect(image2,keypoints2);

        std::cout << "Number of SURF points (1): " << keypoints1.size() << std::endl;
        std::cout << "Number of SURF points (2): " << keypoints2.size() << std::endl;

        // Draw the kepoints
        cv::Mat imageKP;
        cv::drawKeypoints(image1,keypoints1,imageKP,cv::Scalar(255,255,255),cv::DrawMatchesFlags::DRAW_RICH_KEYPOINTS);
        cv::namedWindow("Right SURF Features");
        cv::imshow("Right SURF Features",imageKP);
        cv::drawKeypoints(image2,keypoints2,imageKP,cv::Scalar(255,255,255),cv::DrawMatchesFlags::DRAW_RICH_KEYPOINTS);
        cv::namedWindow("Left SURF Features");
        cv::imshow("Left SURF Features",imageKP);

        // Construction of the SURF descriptor extractor
        cv::SurfDescriptorExtractor surfDesc;

        // Extraction of the SURF descriptors
        cv::Mat descriptors1, descriptors2;
        surfDesc.compute(image1,keypoints1,descriptors1);
        surfDesc.compute(image2,keypoints2,descriptors2);

        std::cout << "descriptor matrix size: " << descriptors1.rows << " by " << descriptors1.cols << std::endl;

        // Construction of the matcher
        BruteForceMatcher<cv::L2<float>> matcher;
        // Match the two image descriptors
        std::vector<cv::DMatch> matches;
        matcher.match(descriptors1,descriptors2, matches);

        std::cout << "Number of matched points: " << matches.size() << std::endl;

        std::nth_element(matches.begin(),    // initial position
                             matches.begin()+24, // position of the sorted element
                                         matches.end());     // end position
        // remove all elements after the 25th
        matches.erase(matches.begin()+25, matches.end());

        cv::Mat imageMatches;
        cv::drawMatches(image1,keypoints1,  // 1st image and its keypoints
                            image2,keypoints2,  // 2nd image and its keypoints
                                        matches,                        // the matches
                                        imageMatches,           // the image produced
                                        cv::Scalar(255,255,255)); // color of the lines
        cv::namedWindow("Matches");
        cv::imshow("Matches",imageMatches);

        cv::waitKey();
        return 0;

        int size=7;
        cv::Mat imaf1;
        image1.convertTo(imaf1,CV_32F);

        cv::Mat imaf2;
        image2.convertTo(imaf2,CV_32F);

        cv::waitKey();
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T10:13:29.023

在 opencv 2.4`BruteForceMatcher`中不再那样调用了。您可以包含 legacy.hpp 以使用以前的 openCV 版本。 `BruteForceMatcher`就是现在`BFMatcher`

请参阅[文档](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-24T17:45:52.590

```
#include <opencv2/legacy/legacy.hpp> 
```

使用这条线。它会像以前一样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T13:51:47.247

您可以添加一行代码：

```
#include<opencv2/legacy/legacy.hpp> 
```

享受你的opencv。

# ruby - Ruby、Tk 和 Ocra - 启动速度非常慢

> ID：14675282
> 
> 赞同：2
> 
> 时间：2013-02-03T17:42:50.143
> 
> 标签：ruby, startup, tk, ocra

对于 Windows 用户，我想将我的 Ruby 应用程序部署为 .exe 文件。该应用程序使用 Tk 作为 GUI 部分。

因为我根本无法成功使用 ruby​​script2exe，所以我选择了 ocra。Ocra 工作正常并构建了一个合理大小的 .exe。但是，应用程序可能需要 10 秒才能启动。尽管它确实是一个非常简单的工具。

有什么方法可以提高启动时间吗？我的猜测是主要问题是在每次启动时解压缩 tk-libs ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T16:31:20.570

我对 Tk 也有同样的问题，并且在将 Ocra 与 InnoSetup 一起使用时它不起作用。

我切换到 Gtk，现在使用 Ocra + InnoSetup，GUI 会在 1-2 秒内出现，而不是 10-20 秒。

原因是带有 InnoSetup 的 Ocra 不必将文件解压缩到临时目录中，从而使其在安装后加载速度更快。Gtk 似乎与 Ocra 更兼容，而且无论如何它的加载速度似乎都比 Tk 快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T14:46:38.657

尝试使用 --no-lzma 选项构建可执行文件。生成的文件将启动得更快（但仍然很慢）。

# jquery - mouseleave 两个元素以隐藏另一个 div

> ID：14675283
> 
> 赞同：0
> 
> 时间：2013-02-03T17:42:49.510
> 
> 标签：jquery

我需要我的子菜单 div 只有在 li 项目和子菜单本身都没有悬停时才会消失。

CSS 解决方案在这里不起作用，因为我需要使用第一个子悬停并且子菜单 div 不是子元素。

我已经搜索了论坛，但是当子菜单不是 li 项目的子菜单时，找不到解决方案。

HTML：

```
<ul id="top-menu"> 
<li>item 1</li>
<li>item 2</li>
<li>item3</li>
</ul>

<!-- somewhere else in DOM (not directly after or child of menu) -->

<div id="#menu1_expansion">
sub menu1 content
</div> 
```

jQuery：

```
 $(document).ready(function () {
    $('#top-menu li:nth-child(1)').hover(
    function()
    { 
        $('#menu1_expansion').stop();

        if ($('#menu1_expansion:hidden'))
        { 
            $('#menu1_expansion').show();
        }

    }
);
$('#menu1_expansion').mouseleave( function(){ $('#menu1_expansion').hide(); });
}); 
```

CSS：

```
#menu1_expansion {display:none; position:absolute;} 
```

目前，这使子菜单出现在 li 项目悬停时，并且子菜单在 mouseleave 时消失，但是当它和 li 项目都是 mouseleave 时，我需要隐藏子菜单 - 任何人都可以建议如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:03:33.160

如果您想显示一次 #menu1_expansion 并使其保持可见：尝试 mouseover() 而不是 hover。

悬停功能仅在您将对象悬停时触发，当您不指向元素时不会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:51:51.570

好的，我找到了一种让它工作的方法，如果它可以帮助其他人，代码如下：

```
 $(document).ready(function () {
var count = 0;
$('#top-menu li:nth-child(1), #menu_expansion').mouseenter(function(){
    count++;
    $('#menu_expansion').show();
}).mouseleave(function(){
    count--;
    if (count == 0) { 
        $('#menu_expansion').hide();
    }
});

}); 
```

# matlab - 更改绘图透明度

> ID：14675284
> 
> 赞同：2
> 
> 时间：2013-02-03T17:43:00.423
> 
> 标签：matlab, plot, transparency

如果我们有两个图像对象`imageObj1`，`imageObj2`并且我们将它们绘制在一个轴上，如下所示：

```
figure;
hAxes = axes();
imageHandle1 = imshow(imageObj1);
hold(hAxes,'on');
imageHandle2 = imshow(imageObj2); 
```

然后我可以通过更改`AlphaData`属性来更改轴上两个绘制图像中的任何一个的透明度，如下所示：

```
set( imageHandle2, 'AlphaData', 0.6 ); %// Change transparency to 0.6 
```

所有这些以前的代码和方法都是用于图像的，但我需要一些方法来改变绘图而不是图像的透明度。

**问题：** 如果我有一个名为的情节句柄`pHandle`，我如何编辑这个句柄的情节的透明度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T21:23:14.133

线系列对象不支持透明度 (alpha) 值。

阅读[本文](http://www.mathworks.fr/support/solutions/en/data/1-2STXLP/index.html?product=ML&solution=1-2STXLP)以获取有关解决方法的提示。

希望能帮助到你！

# ios - 使用 Blocks 翻转 UIImageView

> ID：14675285
> 
> 赞同：1
> 
> 时间：2013-02-03T17:43:04.427
> 
> 标签：ios, animation, objective-c-blocks

我正在尝试使用块动画翻转 UIImageView。许多网站（以及此处的答案）都建议这样做：

```
flipTile.image = frontImage;

[UIView transitionWithView: flipTile
                  duration: 2.5f
                   options: UIViewAnimationOptionTransitionFlipFromLeft
                animations:^(void) {
                    flipTile.image = backImage;
                }
                completion:^(BOOL finished) {
                }
 ]; 
```

不幸的是，这并没有给我预期的结果。我在动画的前半部分完全没有得到任何东西，然后 backImage 翻转到动画的后半部分出现。就像 frontImage 被隐藏或透明一样 - 它不是。

过渡中的某些事情正在把事情搞砸。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T03:02:23.117

这是解决方案，如果其他人将来遇到这个问题：

简而言之，动画块在 my 的当前状态`UIImageView`和我在该`animations`部分中设置的状态之间翻转。然而，在调用动画块之前设置图像`flipTile`，iOS 渲染引擎没有机会`UIImageView`在动画开始之前更新我的图像。`UIImageView`因此，我看到了从( `nil`) 的当前状态到新状态 ( )的动画`backImage`。

为了解决这个问题，我需要在一瞬间将控制权返回给 iOS，以允许渲染引擎完成它的工作，然后执行动画。

我是这样做的：

```
- (void)giveHint {
    /*
        other work here
    */

    flipTile.image = currentTileImage;

    [self performSelector:@selector(flipTile) withObject:nil afterDelay: 0.1];
}

- (void)flipTile {
    [UIView transitionWithView: flipTile
                      duration: 0.5
                       options: UIViewAnimationOptionTransitionFlipFromLeft
                    animations:^{
                        flipTile.image = newTileImage;
                    }
                    completion:^(BOOL finished) {
                        /*
                            clean up
                        */
                    }
     ];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:46:02.593

这正是`transitionWithView`设计的目的。

`frontImage`您描述的行为是存在的症状`nil`（或者，正如您所指出的，尚未初始化）。如果尚未使用有效图像初始化它并且您执行动画，则动画的前半部分没有任何内容，您只能看到动画的后半部分。

如果`frontImage`不应该是`nil`，我会检查（使用`NSAssert`or `NSLog`）。如果`frontImage`可以`nil`，那么，如果`nil`将初始图像设置为单独的空白图像，则可以从中为完整翻转设置动画。

# php - 如何使用积极的前瞻来替换字符串中除了一个 http(s):// 之外的所有内容？

> ID：14675289
> 
> 赞同：1
> 
> 时间：2013-02-03T17:43:23.903
> 
> 标签：php, regex

如何使用积极的前瞻来替换字符串中除了一个 http(s):// 之外的所有内容？

我的用户输入有时在字符串中包含多个 http:// 或 https://，例如`http://http://wwww.site.com/`，我需要删除所有实例，但只有一个。我已经读过关于在正则表达式模式中使用积极的前瞻，但似乎无法使其工作。

我尝试了以下方法：

```
preg_replace( 'https?://(?=.*https?://)', '', $url ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:56:33.470

```
$url = preg_replace("#(https?://)+#", "$1", $url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T17:47:12.163

这可以工作：

```
<?php

$text = 'http://https://http://http://https://abc.com';
$text = preg_replace('#(https?://)+https?://#iU', '', $text);
echo $text; 
```

# php - woocommerce 自定义 ajax 顶级购物车

> ID：14675292
> 
> 赞同：6
> 
> 时间：2013-02-03T17:43:33.593
> 
> 标签：php, ajax, wordpress, woocommerce

您好我正在尝试让 woocommerce 中的顶级购物车自动更新数量和价格。

通过使用它作为模板，我已经让它在某种程度上起作用：

[http://www.amberweinberg.com/developing-custom-woocommerce-themes/](http://www.amberweinberg.com/developing-custom-woocommerce-themes/)

问题是我需要它来使用 ajax 来改变 2 个元素而不仅仅是一个，

这是我在主题 fuctions.php 文件中使用的 html

```
 <div class="cartWrapper"> 
                <a href="#" title="Checkout">
                    <div id="cartsummary"><p>
                        <span class="cart-bubble cart-contents"><a class="cart-bubble cart-contents"><?php echo sprintf(_n('%d', '%d', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?></a>
                <?php if($woocommerce->cart->get_cart_url() != ''){ $cart=$woocommerce->cart->get_cart_url();}
                else {$cart = home_url().'/cart/';};
                ?></span> 
                    </div> 
                </a>
                <div id="carttotal">
                    <div id="cartprice">
                    <p>
                        <a class="cart-total"><?php echo $woocommerce->cart->get_cart_total() ?></a>
                    </p>
                    </div> 
                    <a class="button" href="#" title="Checkout" type="button">View Basket</a>
                </div>
            </div> 
```

以及无需刷新即可自动更新购物车的代码：

```
 // Ensure cart contents update when products are added to the cart via AJAX (place the following in functions.php)
add_filter('add_to_cart_fragments', 'woocommerce_header_add_to_cart_fragment');

function woocommerce_header_add_to_cart_fragment( $fragments ) {
    global $woocommerce;
    ob_start();
    ?>
    <a class="cart-bubble cart-contents"><?php echo sprintf(_n('%d', '%d', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?></a>
    <a class="cart-total"><?php echo $woocommerce->cart->get_cart_total() ?></a>
    <?php

    $fragments['a.cart-contents a.cart-total'] = ob_get_clean();

    return $fragments;

} 
```

问题是，虽然这有效，但它会生成一长串购物车总数和购物车中的物品，我必须使用 css 样式 oveflow:hidden 在相关元素上隐藏这些列表。大概这是因为我错误地编码了ajax元素，有人能指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-18T14:18:03.347

尝试这个：

**函数.php**

```
add_filter('add_to_cart_fragments', 'woocommerce_header_add_to_cart_fragment');

function woocommerce_header_add_to_cart_fragment( $fragments ) 
{
    global $woocommerce;
    ob_start(); ?>

    <a class="cart-contents" href="<?php echo $woocommerce->cart->get_cart_url(); ?>" title="<?php _e('View your shopping cart', 'woothemes'); ?>"><?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?> <?php echo $woocommerce->cart->get_cart_total(); ?></a>

    <?php
    $fragments['a.cart-contents'] = ob_get_clean();
    return $fragments;
} 
```

**购物车代码：**

```
<div class="header_cart">
    <h5><a href="<?php echo $woocommerce->cart->get_cart_url(); ?>" title="<?php _e('View your shopping cart', 'woothemes'); ?>"><?php _e('Shopping Cart', 'home-shopper'); ?></a></h5>
    <div class="cart_contents">
        <a class="cart-contents" href="<?php echo $woocommerce->cart->get_cart_url(); ?>" title="<?php _e('View your shopping cart', 'woothemes'); ?>"><?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?> <?php echo $woocommerce->cart->get_cart_total(); ?></a>
    </div>
</div> 
```

# c - memset 没有设置 num 字节？

> ID：14675293
> 
> 赞同：0
> 
> 时间：2013-02-03T17:43:34.303
> 
> 标签：c, gdb, memset

在下面的简单程序中，命令指向堆上的 400 个字节。然后我将“./search '”复制到命令中，*buffer 指向“'”（单引号）之后的下一个字节。启动缓冲区指向的内存，我使用 memset 将 300 个字节设置为值 0x41（ASCII 'A'），然后附加结束单引号。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <strings.h>

int main(int argc, char *argv[]) {
    char *command = (char *)malloc(400);
    bzero(command, 400);

    strcpy(command, "./search \'");
    char *buffer = command + strlen(command);

    memset(buffer, 0x41, 300);
    strcat(command, "\'");

    system(command);
    free(command);
} 
```

但是当我在 gdb 中查看 *command 和 *buffer 时，这就是我所看到的。

```
char * command 0x601010 "./search '", 'A' <repeats 186 times>...
char * buffer  0x60101e 'A' <repeats 200 times>... 
```

首先，我希望它说重复 299 次，其次我希望命令和缓冲区重复具有相似的值。有人可以告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:01:23.220

来自[GDB 手册，第 10.8 节打印设置](http://sourceware.org/gdb/current/onlinedocs/gdb/Print-Settings.html#Print-Settings)：

> 设置打印元素元素数
> 
> 设置一个数组 gdb 将打印多少元素的限制。如果 gdb 正在打印一个大数组，它会在打印完 set print elements 命令设置的元素数量后停止打印。此限制也适用于字符串的显示。当 gdb 启动时，此限制设置为 200。将元素数量设置为零意味着打印不受限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:59:31.763

检查您的假设：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <strings.h>

int main(int argc, char *argv[]) {
    char *command = (char *)malloc(400);
    bzero(command, 400);

    strcpy(command, "./search \'");
    char *buffer = command + strlen(command);

    memset(buffer, 0x41, 300);
    strcat(command, "\'");
    int last = -1;
    int n = 0;
    for (int i = 0; i < 400; i++) {
        if (n && command[i] != last) {
            printf("%d %d x %02x '%c'\n", i - n, n, last, last);
            n = 1;
        } else {
            n++;
        }
        last = command[i];
    }
    printf("%d %d x %d '%c'\n", 400 - n, n, last, last);
    return 0;
} 
```

产生这个输出：

```
0 1 x 2e '.'
1 1 x 2f '/'
2 1 x 73 's'
3 1 x 65 'e'
4 1 x 61 'a'
5 1 x 72 'r'
6 1 x 63 'c'
7 1 x 68 'h'
8 1 x 20 ' '
9 1 x 27 '''
10 300 x 41 'A'
310 1 x 27 '''
311 89 x 0 '' 
```

这看起来是正确的，并且与问题中的诊断不符。所以要么 gdb 坏了，要么你正在查看它们被释放后的字节。

# javascript - 淘汰绑定对象

> ID：14675297
> 
> 赞同：0
> 
> 时间：2013-02-03T17:44:03.037
> 
> 标签：javascript, knockout.js

我花了一些时间试图弄清楚为什么绑定在 html 部分中的“（单击时不工作的绑定）”没有成功的情况下无法工作。我有一个简单的玩家列表；单击其中一个时，我应该在底部页面中看到绑定名称发生变化：1）与 vm.selectedPlayerName 绑定的玩家名称正确显示 2）与 vm.selectedPlayer.name() 绑定的玩家名称仅在以下位置正确显示即使控制台日志显示 selectedPlayer 对象发生了适当的更改，页面加载时间也不会出现在 click 事件上。我想让 2) 工作以避免重新定义视图模型中的属性。我究竟做错了什么？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.0.min.js"></script>
<script type='text/javascript' src='http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js'></script>
<script>
    $(document).ready(function () {
        var my = {}; //my namespace
    // Player
    my.Player = function () {
        this.name = ko.observable("");
    };

    // The ViewModel
    my.vm = function () {
        var
        players = ko.observableArray([]),
        selectedPlayer = ko.observable(),
        selectedPlayerName = ko.observable(""),

        goToDetails = function (aPlayer) {
            my.vm.selectedPlayer = aPlayer;
            my.vm.selectedPlayerName(my.vm.selectedPlayer.name());
            console.log("goToDetails: ", my.vm.selectedPlayerName());
        },

        loadPlayers = function () {
            my.vm.players.push(new my.Player().name("Player1"));
            my.vm.players.push(new my.Player().name("Player2"));
            my.vm.players.push(new my.Player().name("Player3"));
            my.vm.selectedPlayer = my.vm.players()[0];
            my.vm.selectedPlayerName(my.vm.selectedPlayer.name());
        };

        return {
            // Data
            players: players,
            selectedPlayer: selectedPlayer,
            selectedPlayerName: selectedPlayerName,
            // Other
            loadPlayers: loadPlayers,
            goToDetails: goToDetails,
        };
    }();

    my.vm.loadPlayers();
    ko.applyBindings(my.vm);
    });
</script>
<title></title>
</head>
<body>
<table>
    <thead>
        <tr>
            <th>Name</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: players">
        <tr>
            <td data-bind="text: name, click: $root.goToDetails"></td>
        </tr>
    </tbody>
</table>
<p>
    Selected player (working binding on click): <span data-bind='text:  $root.selectedPlayerName'></span>
    <br />
    Selected player (not working binding on click): <span data-bind='text:  selectedPlayer.name()'></span>
</p>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:53:38.933

问题是您没有为 SelectedPlayer observable 分配一些东西：

```
 goToDetails = function (aPlayer) {
       my.vm.selectedPlayer = aPlayer;
       ...
  }, 
```

应该：

```
 goToDetails = function (aPlayer) {
       my.vm.selectedPlayer(aPlayer);
       ....
  }, 
```

请记住，一个可观察对象在技术上是一个函数。当您通过赋值运算符对其进行分配时，您将其作为一个函数覆盖，以将其替换为一个对象，该对象仅在淘汰模型中的页面加载时得到处理。

# app-store-connect - 更改 iOS 应用名称“审核中”

> ID：14675300
> 
> 赞同：0
> 
> 时间：2013-02-03T17:44:25.283
> 
> 标签：app-store-connect, appstore-approval

当应用程序处于“审核中”状态时，是否可以更改应用程序的名称，就像它在 iTunes Connect 中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:59:13.223

无法完成...您必须在小更新中重新提交。

# c# - 在 ISAPI 过滤器上调用 LoadLibraryEx 失败

> ID：14675301
> 
> 赞同：4
> 
> 时间：2013-02-03T17:44:29.293
> 
> 标签：c#, php, asp.net, iis-7.5, isapi

我正在开发一个 PHP/C# Soap 服务项目，但我在 IIS 中运行它时遇到了问题，尽管它之前还在工作。

当我尝试访问 ASMX 文件或 WSDL 文件时，我收到 IIS 错误：

> HTTP 错误 500.0 - 内部服务器错误在 ISAPI 过滤器“C:\php\php5isapi.dll”上调用 LoadLibraryEx 失败

php5isapi.dll 位于错误中指定的位置，它被添加到 IIS 内的 isapi 过滤器中。我知道 PHP 可以正常工作，因为标准 .php 文件可以正常工作，但我不明白为什么 ASMX/WSDL 文件会访问 php5isapi dll，因为它不是 PHP。soap 服务位于 C# ASMX Web 服务中。

这只是我在应用程序池中启用 32 位应用程序的原因。这必须是真实的，因为当它不是时它会引发一个 ASP 异常，说明 DLL 的格式不正确。

我知道实际的服务运行良好，因为它在 Mono 下的 linux 上运行良好，所以 IIS 有问题，但我看不出是什么。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:22:42.347

这看起来是同一个问题，不是吗？ [https://bugs.php.net/bug.php?id=39163](https://bugs.php.net/bug.php?id=39163)

“Gmail dot com 上的 FreakTrap”提出了以下解决方案：

> sneakers05 对应用程序池的 32 位设置的修改也纠正了我在使用 php5isapi.dll 时遇到的问题。
> 
> 对于我们这些在尝试手动安装后遇到“在 ISAPI 过滤器“C:\PHP\php5isapi.dll”上调用 LoadLibraryEx 失败”错误的人：

1) 从启用 ISAPI 过滤器和扩展的全新 IIS 安装开始。

2) 在主要设置下 [在 IIS 管理器层次结构视图的最顶部，在应用程序池上方]，按此顺序添加以下内容：

*   php5isapi.dll 的 ISAPI 过滤器
*   php5isapi.dll 的 ISAPI 和 CGI​​ 限制条目
*   php5isapi.dll 的处理程序映射

3) 转到应用程序池部分。

4) 右键单击​​默认应用程序池并选择高级设置。

5) 将第二个选项 [Enable 32-Bit...] 设置为 True。

> 此外，重要的是您的“默认网站”没有来自顶级配置的任何独特设置。这导致我的 ISS 表现出一些非常奇怪的行为，这就是为什么我建议您首先删除默认网站并创建一个新网站。

只是建议一个链接，但看到没有太多活动，所以我觉得它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:28:16.890

此错误的常见原因是：

1.  缺少 DLL
2.  位版本不匹配

如果 DLL 位于正确的位置，则 DLL 的位版本很可能与应用程序池的位版本不匹配（例如，您尝试在 64 位中加载 32 位版本的过滤器）应用程序池）。

如果您选择对抗这种行为，解决方案是在 32 位应用程序池中使用 32 位应用程序和过滤器；同样适用于 64 位。配置您的网站并根据需要移动您的 ASPX 和 PHP 代码。请记住，php5isapi.dll 几年前就被淘汰了。

推荐的解决方案是安装最新的 32 位非线程安全 PHP 以及 FastCGI 模块。无论“启用 32 位应用程序”设置如何，您的 PHP 应用程序都可以正常工作。您可以使用：

1.  [PHP MSI 安装程序](http://windows.php.net/download/)来安装 PHP
2.  [用于 IIS 的 PHP 管理器](http://phpmanager.codeplex.com/)来管理安装（它还可以帮助您从 ZIP 档案中安装 PHP）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:06:40.750

我曾经遇到过类似的问题，即 IIS 找不到 php5isapi.dll。

事实证明，问题在于我使用“浏览”按钮指定了 dll 的路径。这导致了一个缩写路径（其中有一个〜）。

我实际上是手动输入了路径（而不是使用浏览按钮），突然 IIS 可以找到 dll。（并且路径没有缩写）。

# javascript - 使 javascript 运行 onclick 而不是 pageload

> ID：14675302
> 
> 赞同：-3
> 
> 时间：2013-02-03T17:44:33.997
> 
> 标签：javascript

我有以下在页面加载时运行的脚本：

```
<script language="JavaScript"> 
     j=parseInt(Math.random()*ranobjList.length);
     j=(isNaN(j))?0:j;
     document.write(unescape(ranobjList[j]));
</script> 
```

如何在单击按钮而不是加载时执行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:47:21.070

把它放在一个函数中，并在元素上的 onclick 事件上调用它

```
function myEvent() {
    j=parseInt(Math.random()*ranobjList.length);
    j=(isNaN(j))?0:j;
    document.write(unescape(ranobjList[j]));
} 
```

然后在你的 html

```
<input type='button' value='Click Me' onclick='myEvent();' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:49:59.740

您拥有的代码示例实际上并未在页面加载时运行。它按照 DOM 解释的方式运行。

但这是您要求的解决方案。

HTML 按钮必须位于脚本标记之上。所以你会想要这样的东西：

```
<input type="button" value="Click me for action" id="actionButton" />

<script type="text/javascript">
    document.getElementById("actionButton").addEventListener("click", function() {
        j=parseInt(Math.random()*ranobjList.length);
        j=(isNaN(j))?0:j;
        document.write(unescape(ranobjList[j]));
    }, false);
</script> 
```

# node.js - Node.js + Passport：done() 方法中的第三个参数“信息”会发生什么？

> ID：14675303
> 
> 赞同：6
> 
> 时间：2013-02-03T17:44:35.003
> 
> 标签：node.js, passport.js

我发现该`done()`方法（或者`success()`，正如我的调试器所告诉的那样）还有第三个参数，称为`info`. 谁能告诉我传递给它的值会发生什么？

**编辑**

`done()`我指的方法是我们必须在策略回调中调用的方法。例如

```
var passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy;

passport.use(new LocalStrategy(
  function(username, password, done) {
    User.findOne({ username: username }, function (err, user) {
      if (err) { return done(err); }
      if (!user) {
        return done(null, false, { message: 'Incorrect username.' });
      }
      if (!user.validPassword(password)) {
        return done(null, false, { message: 'Incorrect password.' });
      }
      return done(null, user);
    });
  }
)); 
```

片段来自[这里](http://passportjs.org/guide/configure/)。可以看出，在某些情况下， a`message`作为第三个参数传入对象中`done()`。我们如何`message`在路由方法中访问它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T02:54:06.217

您应该能够访问作为第三个参数传递的信息`req.authInfo`。

您可以将[此处](https://github.com/jaredhanson/passport/blob/6280d1f2dadab92fa3bd1095a3f1ee2c80fc698c/lib/authenticator.js#L361)的处理视为`info`，它被分配给`authInfo`并用于闪存消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T06:17:29.120

`info`是一个可选参数，可以包含其他用户信息，例如角色、用户配置文件或授权，这些信息可能已在验证功能期间确定。这有助于第三方身份验证策略，因为一旦用户成功通过身份验证，就可以传递有关经过身份验证的用户的这些详细信息。否则，您可能不得不稍后再查找它们，这是低效的。

正如[loganfsmyth](https://stackoverflow.com/users/785065/loganfsmyth)指出的那样，`info`设置为`req.authInfo`以便中间件或路由以后可以访问它。

[此外，您可以通过注册 transformAuthInfo](https://github.com/jaredhanson/passport/blob/master/lib/passport/index.js#L330)来进一步转换 info 对象，如下所示：

```
passport.transformAuthInfo(function(info, done) {
  Client.findById(info.clientID, function (err, client) {
    info.client = client;
    done(err, info);
  });
}); 
```

对于 LocalStrategy，您可以[在经过验证的函数](https://github.com/jaredhanson/passport-local/blob/master/lib/passport-local/strategy.js#L80)中看到信息被传递给失败和成功操作。

因此，另外，您可以指定 a`type`和 a`message`属性，这些将用于显示给用户的闪存状态信息消息。（`type`用户通过身份验证时默认为“成功”，否则为“错误”）。

Flash 消息通过 request.flash() 函数在 Express 2.x 中工作。这已在 Express 3.x 中删除 -如果您需要此功能，建议使用[connect-flash中间件。](https://github.com/jaredhanson/connect-flash)

# sql - 如何在 SQL Server 2005 中获取（前一个）行

> ID：14675304
> 
> 赞同：1
> 
> 时间：2013-02-03T17:44:35.247
> 
> 标签：sql, sql-server, database, sql-server-2005

我有一张表（文章），它有 10 条记录，我想得到最后四条记录（第 6、第 7、第 8、第 9 条）而没有第 10 条。查询也可能适用于超过 10 条记录，以获取最后四行而不是绝对最后一行。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T17:49:44.253

在 SQL 中，表本质上是无序的。因此，让我假设您有一个指定排序的列——一个 id 列、一个日期时间或类似的东西。

以下是您想要的：

```
select top 4 *
from (select top 5 *
      from Article a
      order by id desc
     ) a
order by id asc 
```

如果由于某种原因您没有 id，您可以使用以下查询来把握机会：

```
select a.*
from (select a.*, row_number() over (order by (select NULL)) as seqnum,
             count(*) over () as totcnt
      from Article a
     ) a
where seqnum between totcnt - 5 and totcnt - 1 
```

我想强调的是，这并不能保证有效。根据我的经验，我已经看到 seqnum 的定义按顺序为行分配序号。但这不能保证工作，并且可能无法在多线程环境中工作。但是，您可能会很幸运（特别是如果您的行适合一个数据页）。

顺便说一句，您可以对真实列使用相同的想法：

```
select a.*
from (select a.*, row_number() over (order by id) as seqnum,
             count(*) over () as totcnt
      from Article a
     ) a
where seqnum between totcnt - 5 and totcnt - 1 
```

# ruby-on-rails - 我如何测试 w/rspec 请求规范

> ID：14675308
> 
> 赞同：0
> 
> 时间：2013-02-03T17:45:05.080
> 
> 标签：ruby-on-rails, rspec, tdd

我正在尝试编写一个 rspec 功能/请求来测试这样一个事实，即在填写表格以在“VIN”模型中创建记录后，用户被重定向到刚刚创建的记录的 edit_path。这是我目前的测试：

```
 describe "Add VIN" do
    it "can be added on the VIN listing page" do

        sign_in_as_a_valid_user
        vin = FactoryGirl.create(:vin)

        current_path.should == vins_path
        page.should have_field("vin_text_box")
        fill_in "vin_text_box", :with => "hello"
        click_button "generate_vin"
        current_path.should == edit_vin_path(v.id))   <---- #problem
    end
end 
```

明显的问题是我的工厂创建的 vin 与重定向到的 vin 无关。

所以问题是，我如何在请求规范中测试这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:52:16.677

`Vin`您可以从数据库中获取最近创建的。

```
# ...
click_button "generate_vin"

v = Vin.order("id desc").first
current_path.should eq(edit_vin_path(v.id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:40:18.023

这是 RelishApp 的示例：[https ://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec](https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)

```
require "spec_helper"

describe "Widget management" do

it "creates a Widget and redirects to the Widget's page" do
    get "/widgets/new"
    expect(response).to render_template(:new)

    post "/widgets", :widget => {:name => "My Widget"}

    expect(response).to redirect_to(assigns(:widget))
    follow_redirect!

    expect(response).to render_template(:show)
    expect(response.body).to include("Widget was successfully created.")
  end

end 
```

看看他们是怎么做的？将 :show 更改为 :edit 并测试页面的完整性，而不是您的控制器是否选择了正确的 @vin。您将通过向 FactoryGirl 传递其属性之一的特定值来获得它。

# java - 在 Android 中创建并连接到 SQLite DB

> ID：14675310
> 
> 赞同：0
> 
> 时间：2013-02-03T17:45:21.250
> 
> 标签：java, android, database, sqlite

我正在尝试为我的 android 应用程序创建一个 SQLite Db，我尝试了很多在线教程，但没有一个对我有用！我在下面发布了我的代码：

```
public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "usersManager";

    // Contacts table name
    private static final String TABLE_CONTACTS = "users";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT," + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
    }

import java.util.List;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DatabaseHandler db = new DatabaseHandler(this); 
```

我在我的代码中看不到错误，但是当我签入位置时应该创建 db 什么都没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:55:35.777

除了避免长单行连接字符串：

```
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = 
            "CREATE TABLE " + TABLE_CONTACTS + 
            "(" + 
                KEY_ID   + " INTEGER PRIMARY KEY," + 
                KEY_NAME + " TEXT" + //--last value has no comma--
            ")";

    db.execSQL(CREATE_CONTACTS_TABLE);
} 
```

调用`getWritableDataBase()`打开数据库，如果它不存在，它将被创建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T23:10:02.390

尝试这个

```
public class DataBase extends SQLiteOpenHelper{

    static String createBDSQL = "CREATE TABLE Notas (id integer primary key autoincrement, title TEXT)";

    public DataBase(Context context, String name, CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(createBDSQL);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS Notas");
            db.execSQL(createBDSQL);
    }
} 
```

在 MainActivity.java

```
DataBase notasdb = new DataBase(this, "DBSample.db", null, 1);
SQLiteDatabase db = notasdb.getWritableDatabase(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T17:49:11.477

SQLiteOpenHelper 是惰性的。除非必要，否则它不会执行任何操作。因此，只有当您尝试访问其中的数据（或插入新数据）时，才会创建您的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T16:42:35.030

在你的主要活动中

```
SQLiteDatabase sql;
sql=db.getWritableDatabase(); (where db is DB Handler) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T17:50:37.573

在创建要执行的查询时必须小心。特别是使用空格和逗号。

更改此行

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "(" + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT," + ")";
        db.execSQL(CREATE_CONTACTS_TABLE); 
```

白衣：

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + " (" + KEY_ID + " INTEGER PRIMARY KEY, " + KEY_NAME + " TEXT)";
        db.execSQL(CREATE_CONTACTS_TABLE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-03T18:03:51.850

你真的没有创建数据库，你只创建了 SQLiteOpenHelper 的实例，但要创建或打开数据库，你必须使用 getWritableDatabase() 或 getReadableDatabase() 方法。

SQLiteDatabase db = new DataBaseHandler(this).getWritableDatabase();

# jquery - 带有自动折叠而不是 OnClick 的 Jquery 选项卡 UI

> ID：14675311
> 
> 赞同：2
> 
> 时间：2013-02-03T17:45:23.163
> 
> 标签：jquery

我需要你的 jquery 帮助。

这是一个在中间包含一个 jquery UI 选项卡部分的表。表格行当前显示/隐藏带有“onclick”的 UI 选项卡。

我需要解决的帮助是让表格行在页面加载*后*自动隐藏“隐藏”选项卡部分，然后用户可以通过单击正常展开选项卡。有人可以快速轻松地解决这个问题吗？

请观看我的屏幕截图进行演示：[http ://screencast.com/t/AAxUitL9O7](http://screencast.com/t/AAxUitL9O7)

看看我的 HTML/Jquery 小提琴：http: [//fiddle.jshell.net/rk7y4/11/](http://fiddle.jshell.net/rk7y4/11/)

这是当前的实现：

```
 function CollaspeAll() {
        if ($(".ChildRow")[0]) {
            $('tr.ChildRow').children('td').each(function () {

                $(this).children('div').each(function () {
                    if ($(this).css('display') == 'block') {
                        $(this).css("display", "none");
                    }
                });
            });
        }

        $('img').each(function () {
            if ($(this).attr('src') == 'http://imageshack.us/scaled/landing/834/minusl.png') {
                $(this).attr('src', 'http://img338.imageshack.us/img338/6042/plusk.png');
            }
        });
    }
    function ExpandCollapse(TESTID) {
        $('#tabs' + TESTID).tabs();
        if ($('#div' + TESTID)) {

            // Is already ChildGrid shown. If not shown
            if (!isDisplayed($('#div' + TESTID))) {
                if ($('#hid' + TESTID).val() == '0') {
                    $('#div' + TESTID).css("display", "block");
                    $('#img' + TESTID).attr('src', 'http://imageshack.us/scaled/landing/834/minusl.png');
                    $('#hid' + TESTID).val("1");
                }
                else {
                    $('#div' + TESTID).css("display", "block");
                    $('#img' + TESTID).attr('src', 'http://imageshack.us/scaled/landing/834/minusl.png');
                }
            }
            else { // Already Child Grid Shown
                $('#div' + TESTID).css("display", "none");
                $('#img' + TESTID).attr('src', 'http://img338.imageshack.us/img338/6042/plusk.png');
            }
        }
    }
    function isDisplayed(object) {
        // if the object is visible return true
        if ($(object).css('display') == 'block') {
            return true;
        }
        // if the object is not visible return false
        return false;
    };

    $(".hand").hover(function () {
        $(this).addClass("blue");
    }, function () {
        $(this).removeClass("blue");
    }); 
```

# java - 用 Java 中的 Commons Compress 解压后如何删除 ZIP 存档？

> ID：14675317
> 
> 赞同：0
> 
> 时间：2013-02-03T17:46:10.230
> 
> 标签：java, apache-commons-compress

我编写了一个解压缩 ZIP 存档的程序，然后递归地解压缩或提取其中找到的存档。ZIP 中的档案可能是 tar 或 ZIP 档案，我可以很好地提取它们。

在一些新目录中提取内部档案后，我想删除它们。这适用于 tar 档案，但由于某种原因，它不适用于 ZIP 档案。我已经关闭了所有流，如果删除失败，我会使用 deleteOnExit 作为故障保险，但这也不起作用。

```
 try (ArchiveInputStream ais =
         asFactory.createArchiveInputStream(
           new BufferedInputStream(
             new FileInputStream(archive)))) {

        System.out.println("Extracting!");
        ArchiveEntry ae;
        while ((ae = ais.getNextEntry()) != null) {
            if (ae.isDirectory()) {
                File dir = new File(archive.getParentFile(), ae.getName());
                dir.mkdirs();
                continue;
            }

            File f = new File(archive.getParentFile(), ae.getName());
            File parent = f.getParentFile();
            parent.mkdirs();
            try (OutputStream os = new FileOutputStream(f)) {
                IOUtils.copy(ais, os);
                os.close();
            } catch (IOException innerIoe) {
                ...
            }
        }

        ais.close();
        if (!archive.delete()) {
            System.out.printf("Could not remove archive %s%n",
                               archive.getName());
            archive.deleteOnExit();
        }
    } catch (IOException ioe) {
        ...
    } 
```

应该没有打开的流，除非关闭 ArchiveInputStream 实际上并没有关闭流。但这同样适用于 tar 档案。

我在某处读到有人可以设法删除 ZIP 档案，调用父文件上的 listFiles() 并找到 ZIP 档案并删除它，但这听起来像是一个奇怪的复杂过程。必须有一些更简单的方法。

编辑：

该问题特定于 Windows。在 Linux（SliTaz 4 和 Red Hat Enterprise 5）上，这可以正常工作。这告诉我 Windows 以某种方式锁定了 ZIP 档案，这似乎有点奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-14T05:36:44.097

不幸的是，属于您刚刚关闭的流的文件无法在 Windows 上删除是很常见的。有时您需要稍等片刻，有时甚至还不够，您需要一个垃圾回收周期。

例如，这导致了 Ant 的`FileUtils#tryHardToDelete` [https://github.com/apache/ant/blob/master/src/main/org/apache/tools/ant/util/FileUtils.java#L1569](https://github.com/apache/ant/blob/master/src/main/org/apache/tools/ant/util/FileUtils.java#L1569) - 有时甚至是已知的让文件悬空，在这种情况下`File#deleteOnExec`是你最好的选择。

# android - android spinner如何设置无选择值

> ID：14675320
> 
> 赞同：0
> 
> 时间：2013-02-03T17:46:23.737
> 
> 标签：android, android-spinner

我有一个从服务器获取数据的微调器，我想设置第一个选择值，如“设置城市”。我像这样填充微调器：

```
s_city = (Spinner) findViewById(R.id.s_city);
        ArrayAdapter<String> cityAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, Data.cities);
        cityAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s_city.setAdapter(cityAdapter); 
```

我希望第一个选择是`set city`，我知道我可以在第一个 ot 中附加它，`Data.cities`但我问是否有来自 android 的标准方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:00:49.883

在列表的开头添加一个额外的项目“Set City”，然后执行以下操作：

```
SpinnerAdapter adapter = new ArrayAdapter<String>(getActivity(),
            R.layout.list_item, list) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);
            if (position == 0) {
                ((TextView) v.findViewById(android.R.id.text1)).setText("");
                ((TextView) v.findViewById(android.R.id.text1)).setHint("Set City");
            }
            return v;
        }
    }; 
```

也不要忘记在处理 onItemSelected 时特别处理位置 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:18:18.713

我只是添加“设置城市”作为第一个微调器元素。[ArrayAdapter http://developer.android.com/reference/android/widget/ArrayAdapter.html#insert(T](http://developer.android.com/reference/android/widget/ArrayAdapter.html#insert(T) , int)中有一个插入方法。您可以将“设置城市”添加为第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T05:21:11.763

你可以这样设置
Spinner.setSelection(Adapter.NO_SELECTION, false);

看到这个

*[如何在测试中选择微调器的第一项](https://stackoverflow.com/questions/9553496/how-to-select-first-item-of-a-spinner-in-a-test)*

# c++ - 向链表添加元素的区别

> ID：14675321
> 
> 赞同：0
> 
> 时间：2013-02-03T17:46:35.457
> 
> 标签：c++, pointers, linked-list

这就是我将元素添加到链表头部的方式

```
 //typedef void* VoidPtr
 //typedef node* NodePtr
 struct Node
   {
       NodePtr next
       VoidPtr data
   };

void LinkedList::Addelement(VoidPtr horoscope)
{
    if(head == NULL)
  {

    head = new Node;
    head->data = horoscope;
     head->next = NULL;

  }

NodePtr temp = new Node;

temp -> data = horoscope;
temp -> next = head;

head = temp;
} 
```

这就是我将元素添加到链表尾部的方式

```
void LinkedList::addelementfromback(VoidPtr horoscope)
{
   NodePtr temp=head;

   if(head == NULL)
   {

    head = new Node;
    head->data = horoscope;
    head->next = NULL;

   }

   while( temp->next != NULL)
   {
      temp=temp->next

   }

   NodePtr element=New Node;
   element->data=horoscope;
   element->next=NULL;

    temp->next=element;

} 
```

我不明白为什么我们使用 temp=element 来添加到链表的头部，但是为了添加到链表的尾部，我们使用 temp->next=element。我不明白为什么我们不能使用 while temp=next 将元素添加到链表的尾部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:49:25.537

的末尾`addelementfromback`是`temp`指向列表中最后一个元素的指针。如果你说`temp = element`，这不会改变列表，因为你只是给本地指针一个新值。

`temp->next`但是，是`next`存储在对象内部的变量`temp`指向（即列表中的最后一个元素），您需要更改此值以指向新元素。

因为`Addelement`,`temp`是一个指向新元素的指针，你将指针赋给指向`head`同一个元素的指针，并将`next`这个指向元素内部的变量更改为指向原来的头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:57:55.120

在您的`Addelement`方法中，您需要一个`else`子句，因为如果列表为空 ( `head == NULL`)，您只需将 指向`head`新节点。没有别的，列表中没有其他节点。

此外，考虑使用**模板**，而不是使用*void 指针*。模板非常适合数据类型发生变化的数据结构和算法，而不是结构或算法，例如堆栈和链表。

 **我建议您考虑将节点指针与数据项分离为两个单独的结构。这将帮助您在单链表和双链表之间使用通用代码。当您不想使用模板时，这也是一个很大的帮助。

```
struct Node_Link
{
    Node_Link * next;
};

struct Node_Integer
: public Node_Link
{
    int data;
};

struct Node_Double
: public Node_Link
{
   double data;
};

struct Node_String
: public Node_Link
{
    std::string data;
}; 
```**

# javascript - Bower 不安装组件

> ID：14675324
> 
> 赞同：1
> 
> 时间：2013-02-03T17:46:54.597
> 
> 标签：javascript, bower

我一直在使用`bower`本地来管理我正在从事的项目的 JavaScript 依赖项。通常，一切正常。

但是，今天，我尝试使用以前项目中的一些代码来启动一个新项目。即，使用以前的`component.json`和`.bowerrc`文件：

```
// .bowerrc
{
  "directory": "src/static/js/lib"
}

//component.json
{
  "name": "backbone-project",
  "version": "0.0.0",
  "dependencies": {
    "backbone": "~0.9.10",
    "underscore": "~1.4.3",
    "jasmine": "~1.3.1",
    "jasmine-jstd-adapter": "~1.1.2",
  }
} 
```

但是，当我尝试运行时`bower install`，我只会收到一个通用错误：

```
± % bower install
bower error 
```

我已经运行`mkdir -p src/static/js/lib`以确保文件夹存在，这适用于我所做的其他项目。

为什么 bower 没有安装依赖项？如何获取有关此错误的更多信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:18:57.153

你`component.json`的无效。注意悬空的逗号`"jasmine-jstd-adapter": "~1.1.2",`，它在 JSON 中是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T17:07:33.957

如果版本号为空白，也会发生这种静默死亡。

请参阅这些相关问题：[在 bower.json 中使用无效版本值静默失败](https://github.com/bower/bower/issues/439)，并且[bower install 不会生成组件目录](https://github.com/bower/bower/issues/414)。

# javascript - 切换窗口时未调度 Safari 扩展“激活”事件

> ID：14675329
> 
> 赞同：0
> 
> 时间：2013-02-03T17:47:19.590
> 
> 标签：javascript, safari-extension

该[文档](https://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html#//apple_ref/doc/uid/TP40009977-CH17-SW5)指出“Safari 5.1 会在激活时向窗口或选项卡发送一个“激活”事件”。我在全局页面中使用以下代码来捕获此事件：

```
function onWindowOrTabSwitched(event) {
     alert("onWindowOrTabSwitched");
}

safari.application.addEventListener("activate", onWindowOrTabSwitched, true); 
```

当我从一个选项卡切换到另一个选项卡时会显示警报，但在 Safari 窗口之间切换时，大多数情况下没有任何反应。是我做错了什么还是Safari（6.0.2）没有在窗口之间切换时调度这个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:44:01.767

好的，真正的问题似乎是，当我创建一个新的 Safari 窗口时，我在“激活”事件期间从全局页面发送到注入脚本的消息确实到达了，但在任何其他情况下都没有。“safari.application.activeBrowserWindow.activeTab.page”似乎在创建新窗口的激活事件期间被填充，但在加载 topsites:// 页面后立即被清除。我在注入的脚本中实现了检查，以查看它是否被注入到 http(s) 页面或解决此问题。

因此，activate 事件在每次应该触发时都会触发，只有在刚刚打开新窗口并且这是我的问题的情况下才可能向 Topsite 发送消息。

# http - OPTION 请求应该使用什么 HTTP 响应代码？

> ID：14675330
> 
> 赞同：8
> 
> 时间：2013-02-03T17:47:19.903
> 
> 标签：http, http-response-codes, http-options-method

我注意到[Mozilla HTTP 响应代码文档](https://developer.mozilla.org/en-US/docs/HTTP/HTTP_response_codes)指出

> PUT、DELETE 和 OPTIONS 方法永远不会导致 200 OK 响应。

但是，它并不清楚实际应该使用什么响应。我最好的猜测是 204：

> 204：没有内容
> 
> 此请求没有要发送的内容，但标头可能很有用。用户代理可以用新的更新其缓存的该资源的标头。

谁能评论这是否是用于响应 OPTIONS 请求的正确代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-23T20:16:46.210

我使用`204 No Content`是因为`OPTIONS`响应没有任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T20:40:08.720

好吧，在那种情况下，Mozilla 文档显然是错误的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-07T10:26:32.400

HTTP 1.1 的（更新的，顺便说一句）RFC 明确指出`200 OK`对于所有 3 种方法都是可接受的响应，请参阅[RFC 7231](http://www.rfc-editor.org/rfc/rfc7231.txt)的第 6.3.1 节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T18:19:22.310

RFC2616 清楚地提到了 200 响应和 200 响应的要求：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

# c# - S-表达式解析

> ID：14675335
> 
> 赞同：4
> 
> 时间：2013-02-03T17:47:34.537
> 
> 标签：c#, clojure, s-expression

我今天早些时候遇到了[这个问题：](https://stackoverflow.com/questions/14673902/is-there-a-c-sharp-utility-for-matching-patterns-in-syntactic-parse-trees)

> ***示例输入：***我遇到了 Joe 和 Jill，然后我们去购物
> ***示例输出：*** [TOP [S [S [NP [PRP I]] [VP [VBD ran] [PP [IN into] [NP [NNP Joe] [CC和] [NNP Jill]]]]] [CC and] [S [ADVP [RB then]] [NP [PRP we]] [VP [VBD going] [NP [NN shopping]]]]]]
> 
> ![在此处输入图像描述](../Images/8ea4fcc5d6ad33023a6862baf6331c01.png)

我正要建议简单地将预期输出（因为它看起来像一个 s 表达式）解析为一个对象（在我们的例子中是一个树），然后使用简单的 LINQ 方法来处理它。然而，令我惊讶的是，我找不到 C# s-expression 解析器。

我唯一能想到的是使用 Clojure 来解析它，因为它编译为 clr，但我不确定它是否是一个好的解决方案。

顺便说一句，我不介意输出 type 的答案`dynamic`。我在这里找到的唯一答案是反序列化为特定模式。

总结一下我的问题： **我需要在 C# 中反序列化 s 表达式**（序列化对于这个问题的未来读者来说会很好）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T18:24:22.823

看起来您需要以下形式的数据结构：

```
public class SNode
{
    public String Name { get; set; }

    private readonly List<SNode> _Nodes = new List<SNode>();
    public ICollection<SNode> Nodes { get { return _Nodes; } }
} 
```

表单的序列化程序

```
public String Serialize(SNode root)
{
    var sb = new StringBuilder();
    Serialize(root, sb);
    return sb.ToString();
}

private void Serialize(SNode node, StringBuilder sb)
{
    sb.Append('(');

    sb.Append(node.Name);

    foreach (var item in node.Nodes)
        Serialize(item, sb);

    sb.Append(" )");
} 
```

以及以下形式的反序列化器：

```
public SNode Deserialize(String st)
{
    if (String.IsNullOrWhiteSpace(st))
        return null;

    var node = new SNode();

    var nodesPos = String.IndexOf('(');
    var endPos = String.LastIndexOf(')');

    var childrenString = st.SubString(nodesPos, endPos - nodesPos);

    node.Name = st.SubString(1, (nodesPos >= 0 ? nodePos : endPos)).TrimEnd();

    var childStrings = new List<string>();

    int brackets = 0;
    int startPos = nodesPos;
    for (int pos = nodesPos; pos++; pos < endPos)
    {
        if (st[pos] == '(')
            brackets++;
        else if (st[pos] == ')')
        {
            brackets--;

            if (brackets == 0)
            {
                childStrings.Add(st.SubString(startPos, pos - startPos + 1));
                startPos = pos + 1;
            }
        }
    }

    foreach (var child in childStrings)
    {
        var childNode = Deserialize(this, child);
        if (childNode != null)
            node.Nodes.Add(childNode);
    }

    return node;
} 
```

但是，如果还没有测试甚至编译过这段代码，这或多或少是它可以工作的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:57:39.010

我编写了一个开源的 S-Expression 解析器，可以作为[S-Expression.NET 使用](https://github.com/databigbang/SExpression.NET)。由于它使用 OMeta# 来生成解析器，因此您可以快速使用它来添加新功能。

# java - 如何检查 JTextField 中输入的值并将输入的字符串转换为字符数组？

> ID：14675337
> 
> 赞同：0
> 
> 时间：2013-02-03T17:47:47.483
> 
> 标签：java, swing

我想比较输入数字的每个数字。我正在尝试制作一个 DFA 程序，而我的 DFA 接受没有从 0 到 1 的任何连续符号的字符串。

这是我在课堂上遇到问题的部分......我只是想以某种方式解析和比较每个字符/整数......

```
class check implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
        JTextField inp= (JTextField) event.getSource();
        char[] text=inp.toCharArray();
        char[] result=new char[text.length];
        int ctr=0;

        while (ctr<result.length)
        {
            if(passy[ctr]==passy[ctr+1])
            {
            }

            else
            {
                JOptionPane.showMessageDialog(null, "The String is NOT ACCEPTED!");
            }

            ctr++;
        }
    }
} 
```

我在这部分有一个错误：

```
char[] text=inp.toCharArray(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:54:58.250

该方法`toCharArray`未定义`JTextField`。您需要先从组件中获取文本。代替

```
char[] text = inp.toCharArray(); 
```

和

```
char[] text = inp.getText().toCharArray(); 
```

# algorithm - 为什么 BFS 用 2 种颜色标记节点，而 DFS 用 3 种颜色标记节点？

> ID：14675339
> 
> 赞同：2
> 
> 时间：2013-02-03T17:48:13.367
> 
> 标签：algorithm, graph, depth-first-search, breadth-first-search

它突然出现在我的脑海中。

为什么我们在 BFS 图遍历中只使用 2 种颜色

DFS 需要 3 个吗？

例如：来自维基百科：

BFS：

```
procedure BFS(G,v):
2      create a queue Q
3      enqueue v onto Q
4      mark v
5      while Q is not empty:
6          t ← Q.dequeue()
7          if t is what we are looking for:
8              return t
9          for all edges e in G.adjacentEdges(t) do
12             u ← G.adjacentVertex(t,e)
13             if u is not marked:
14                  **mark u**
15                  enqueue u onto Q
16     return none 
```

文件系统：

```
 procedure DFS(G,v):
2      label v **as explored**
3      for all edges e in G.adjacentEdges(v) do
4          if edge e is unexplored then
5              w ← G.adjacentVertex(v,e)
6              if vertex w is unexplored then
7                  label e as a **discovery edge**
8                  recursively call DFS(G,w)
9              else
10                 label e as a **back edge** 
```

为什么 DFS 2 种颜色不够用？为什么 BFS 会减少 3 种颜色？

这是另一个 BFS（这次是 3 种颜色）：

![在此处输入图像描述](../Images/493168be6b504f008257832faa277201.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T19:57:12.847

这两种算法都有不同数量的颜色，因为它们用于表示根本不同类型的信息。

在 BFS 和 DFS 中，节点都需要标记为未探索节点或已探索节点。至少需要两种颜色来表示此信息。

在您上面列出的 DFS 实现中，该实现还使用颜色将边缘分类为“发现边缘”（形成算法产生的深度优先搜索树的边缘）或“后边缘”（从更深的边缘移动的边缘） DFS 树的一部分到 DFS 树的较浅部分）。这些颜色用于为边缘着色，而不是节点。因此，边缘需要三种颜色 - 未探索边缘、“发现”边缘和后边缘。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-26T23:00:42.490

在 BFS 的应用中，我们也需要 3 种颜色的节点。一个简单的例子是使用 BFS*只*打印一次无向图的*每个*顶点和边。我们不能只用两种颜色来做到这一点。要了解为什么会这样，让我们​​考虑一下位于我们当前正在探索的边的另一端的顶点的状态（用于迭代）。另一端的顶点可以是 (a) 已经处理 (b) 尚未发现 (c) 已经坐在队列中，等待处理。如果是（a），我们之前已经看到了当前边，所以我们不需要再次打印它。对于（b）和（c），我们是第一次看到它，我们需要打印它。好的，足够好了。所以，我们决定只使用一个标志，*`visited``true``false`对于 (b) 和 (c)，我们可以决定何时打印边缘，何时不打印。但是，因此，我们刚刚确定我们需要为队列中的顶点保留`visited`标志，即案例 (c)。`false`因此，我们将无法在推入队列时对其进行标记。只有当我们探索了与它相连的所有边时，我们才能标记它。结果，当在迭代中遇到情况（c）时，我们将无法判断另一端的顶点是否已经在队列中（除非我们明确搜索队列）。我们最终会再次将其推入队列并最终得到错误的答案。*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-26T04:44:13.320

如果我们用简单的话来解释这一点，在 BFS 中，一旦我们访问了一个节点，它就意味着它的所有邻居也都被访问了，我们不需要再次访问那个顶点。但是在 DFS 中，有一个称为 Backtracking 的操作，这意味着我们可能需要再次访问一个已经访问过的节点，并且它的所有邻居都不会一次被访问，因此使用第三种颜色灰色表示“是的！它已被访问过”并且您不需要打印它，但是该节点的邻居仍然没有被访问”*

# android - 检测android中的镜像方向变化

> ID：14675340
> 
> 赞同：5
> 
> 时间：2013-02-03T17:48:21.020
> 
> 标签：android, screen-orientation

通常将设备旋转 90 度，（纵向到横向或反向）会导致配置更改，Activity 被销毁并重新创建等，因此它可以只保存`Display.getRotation()`启动时的值并使用它。

但是，当直接从 0 到 180（纵向到纵向）或 90 到 270（横向到横向）旋转设备时，没有进行任何配置更改，设备只是重新映射屏幕。这是有道理的，因为布局的纵横比没有改变，也不需要改变。但这使得 Activity 无法检测到此类更改何时发生，即何时发生`Surface.ROTATION_90`等`Surface.ROTATION_270`。

除了轮询`Display.getRotation()`，有没有更好的方法来检测这种变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T19:04:05.877

您可以使用辅助类[OrientationEventListener](http://developer.android.com/reference/android/view/OrientationEventListener.html)。

像这样的东西：

```
public void onOrientationChanged(int orientation) {
   if (orientation == ORIENTATION_UNKNOWN) return;

   int rotation = activity.getWindowManager().getDefaultDisplay()
         .getRotation();
   int degrees = 0;
   switch (rotation) {
     case Surface.ROTATION_0: ....
     case Surface.ROTATION_90: ....
     case Surface.ROTATION_180: .....
     case Surface.ROTATION_270: .....
   }

} 
```

# components - C++ builder - 枚举 TPanel 上的组件

> ID：14675347
> 
> 赞同：0
> 
> 时间：2013-02-03T17:48:49.730
> 
> 标签：components, c++builder, enumerate

枚举Form组件非常简单

```
 for (int i=0;i<ComponentCount;i++)
         {
            ShowMessage(Components[i]->Name);
            //.....
         } 
```

但如果我只想枚举位于面板上的组件，同样的事情也不起作用。

```
 for (int i=0;i<Panel1->ComponentCount;i++)
         {
            ShowMessage(Panel1->Components[i]->Name);
            //.....
         } 
```

因为

```
 Panel1->ComponentCount; 
```

在 Panel 上有多个组件时，它只是零。那么，如何枚举 Panel 的子组件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:59:00.473

`ComponentCount`和`Components[]`属性访问组件的拥有组件列表-**通过**`Owner`将该组件传递给其构造函数来将该组件设置为它们的组件。在设计时创建的所有组件都将父级`TForm`（或`TFrame`或`TDataModule`）设置为它们的`Owner`. 您的第一个循环是遍历 TForm 拥有的组件，这就是它起作用的原因。您的 TPanel 不拥有任何组件，这就是第二个循环失败的原因。

您正在寻找的是`ControlCount`and`Controls[]`属性。他们改为访问可视控件的**子**控件列表 - 将父控件设置为`Parent`用于可视化表示的控件。只有`TWinControl`- 派生控件（如`TPanel`）可以有子控件：

```
for (int i = 0; i < Panel1->ControlCount; ++i)
{
    ShowMessage(Panel1->Controls[i]->Name);
    //.....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T08:04:41.153

枚举窗体、面板、组框等的所有控件**和**子控件（该控件的子控件）：

```
void ExtractAll_Structure(TWinControl *container, int &indent)
{
   // Enumarate its children
   for (int i = 0; i < container->ControlCount; i++)
      {
      // extract the control at index i
      TComponent *child2 = container->Controls[i];

      if (child2->InheritsFrom (__classid(TComponent)) )  // this check if optional
         {
         Memo->Lines->Add(child2->Name);

         // Is this a container for other controls
         TWinControl *winctrl = dynamic_cast<TWinControl *>(child2);
         if (winctrl)
            {
            indent++;
            ExtractAll_Structure(winctrl, indent);
            indent--;
            }
         }
      }
} 
```

另请参阅： [BCB：如何迭代表单上的控件？](https://stackoverflow.com/questions/2391325/bcb-how-to-iterate-over-controls-on-a-form/52734942#52734942)

# facebook-graph-api - fql 多查询来计算朋友的照片

> ID：14675349
> 
> 赞同：0
> 
> 时间：2013-02-03T17:48:56.467
> 
> 标签：facebook-graph-api, facebook-fql

有没有办法通过多查询我可以得到朋友的公开照片的计数？

一个是获取朋友列表，另一个是对 /friendid/?fields=photos? 我只想检查他们是否为我的应用提供了至少一张公开照片。

这样，它将返回朋友列表的 json 数组和包含他们照片计数的相应数据集。

如果没有简单的方法可以做到这一点，有什么建议可以通过多个查询来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:17:41.700

下面的 FQL 查询可以解决问题

```
 SELECT aid, owner, name, photo_count FROM album WHERE aid IN (SELECT aid FROM album WHERE owner
 IN (SELECT uid2 FROM friend WHERE uid1=me())) AND photo_count > 0 
```

它将产生朋友的用户 ID、相册名称和特定相册中的照片数量。

但是由于 FQL 查询的默认 LIMIT 值，结果将不准确。[要了解更多信息，请查看我关于FQL 结果中默认限制值影响的](https://stackoverflow.com/questions/14097438/get-friends-most-liked-photos-from-facebook-using-fql/14132797#14132797/)回答

# c - c中的递归二进制搜索

> ID：14675353
> 
> 赞同：1
> 
> 时间：2013-02-03T17:48:59.730
> 
> 标签：c, binary-search

当我运行它时，当数字不是一个时，它总是显示*Number Not Found*，即它对于数字 1 运行正确。

我想知道这有什么问题，因为根据我的说法，它可以正确运行我的所有测试用例。

```
int search(int *a,int start,int end,int num)
{
  int mid;
  mid=(start+end)/2;
  if(start==end)
  {
    if(num==a[start])
      printf("Number Found");
    else
      printf("Number Not Found");
  }
  else
  {
    if(num>a[mid])
      search(&a[mid+1],mid+1,end,num);
    else
      search(&a[start],start,mid,num);
  }
}

int main()
{
  int arr[10]={1,2,3,4,5,6,7,8,9,10};
  search(arr,0,9,10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:54:26.337

您不应该将不同的指针传递给数组；相反，您已经在更改您感兴趣的间隔的结束索引。

# javascript - Jquery加载选择一个特定的类

> ID：14675354
> 
> 赞同：9
> 
> 时间：2013-02-03T17:49:02.147
> 
> 标签：javascript, jquery, html, jquery-load

所以我像这样使用Jquery的加载功能，

```
$('#id').load("http://www.thisiswhyimbroke.com"); 
```

我知道您可以在 url 之后添加 id 选择器，但是我要查找的内容不包含在 id 中，有没有办法可以选择特定的类名？

更进一步，如果我可以选择第一个 li 项目，然后选择其中包含名称项目的类，这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T17:49:41.273

您可以提供任何选择器，例如

```
$('#id').load("http://www.thisiswhyimbroke.com li:first .someclass"); 
```

从[文档](http://api.jquery.com/load/)中：

> 加载页面片段
> 
> .load() 方法与 $.get() 不同，它允许我们指定要插入的远程文档的一部分。这是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格之后的部分是确定要加载的内容的 jQuery 选择器。

# ios - UIButton 随机显示图形或标题

> ID：14675357
> 
> 赞同：0
> 
> 时间：2013-02-03T17:49:14.953
> 
> 标签：ios, random, uibutton, assets

我`UIButton`的两个都疯了，不知何故……在运行应用程序的一个会话期间，每次我打开包含视图控制器时，这两个按钮都会随机显示 png 文件或故事板中设置的标题字符串。请参阅随附的屏幕截图。

![在此处输入图像描述](../Images/5c2d3a3b9f044fc858769c1ead1a4f2a.png) ![在此处输入图像描述](../Images/d69de15b9fbac80833f532670a813294.png) ![在此处输入图像描述](../Images/ae36fa8e04665f990769b1523695267e.png)

这里有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:48:51.330

尝试清理您的项目 Cmd+Shift+K 然后重建。

# java - 在 Java（扫描仪）中验证用户输入？

> ID：14675359
> 
> 赞同：0
> 
> 时间：2013-02-03T17:49:22.237
> 
> 标签：java

我正在尝试获取一个使用 Scanner 方法的程序，以检查无效输入，例如数字和特殊字符（即！@ £ $ % ^），如果输入它们，只需打印出错误。我尝试使用 match() 方法修复它，但它仍然会打印出我输入的所有内容！（即使有特殊字符和数字）

```
private static void input(String s) 
{
   Scanner userInput = new Scanner(System.in);
   String words;
   System.out.println("Enter your words: ");
   words = userInput.nextLine();

if (words.matches("[^a-zA-Z0-9 ]")) 
{ 
    System.out.println("Error, no number input or special character input please: ");
}

else 
    {
        System.out.println(words);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:51:25.290

您应该在正则表达式的前后添加一个 .* 。就像是：

```
if (words.matches(".*[^a-zA-Z0-9 ].*")) 
```

这个想法是你应该允许任何前面或后面的字符到你想要省略的字符。

# php - 持久 URL 参数

> ID：14675361
> 
> 赞同：2
> 
> 时间：2013-02-03T17:49:23.563
> 
> 标签：php

当您单击时，有没有办法在整个站点中保留 url 参数？我正在开发一个演示站点，该站点在第一页上设置 url 参数以确定以下页面上显示的内容。我会使用会话变量，但内部用户可能会在彼此之间共享链接，然后会话将不存在。我试过谷歌搜索，但所有返回的都是与 Cake 等 php 框架相关的文章。有没有办法在不使用框架的情况下实现这一点？

流程示例：

*   选择页面 > 用户选择用例并按提交查看演示站点
*   内页 > 检测 URL 参数并根据用例显示数据。
*   当用户点击演示站点时，参数会持续存在，因此它会显示相关数据。
*   当用户返回选择页面时，他们可以选择一个新的用例并重复上述操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:00:18.940

您可以简单地在选择中添加一个 url 参数，并确保它始终可以在所有内部链接中找到。我假设你不想这样做，因为它有太多的变化。

一些替代的想法：

**想法 1：**

将初始选择保存在会话内或 cookie 内。还为所有页面添加一个可选的 url 参数，该参数也包含选择。为避免更改所有内部链接，请检查服务器端是否提供了选择 url 参数。如果不是，请立即重定向到相同的 url，只需添加 url 参数（根据会话/cookie）。这样 url 参数将始终出现，而无需更改所有内部链接，并且用户仍然可以共享链接。

为了实现，假设我们的会话变量是`$_SESSION['sel']`并且我们的可选 URL 参数是`psel`。假设站点中的所有页面都是通过 php 提供的。以下 php 行应该出现在所有页面的顶部（可以放在单独的 php 文件中并包含在每个页面中）：

```
if (!isset($_REQUEST['psel']))
{
  header('Location: '.$_SERVER['REQUEST_URI'].'&psel='.$_SESSION['sel']);
  exit;
} 
```

这是伪代码，我在我的 iPad 上，如果它有点短而且不完美，请原谅。此行的作用是检查 URL 参数是否已定义，如果未定义，则重定向（到同一页面）并根据我们的会话变量定义它。这样即使我们有一个不包含 URL 参数的内部链接，这个重定向也会添加它。请求 uri 中有一个小错误`?`，我会让你修复它。

此代码不会更改所有内部链接，它所做的只是以下内容：当访问内部链接并且省略 URL 参数（通常会）时，此代码将停止页面在没有参数的情况下显示并重定向到与参数相同的页面。

另一个重要的代码是更改我们的会话变量，以防 URL 参数被定义。这可以通过将这个 else 块添加到上面的代码中来完成：

```
else $_SESSION['sel'] = $_REQUEST['psel']; 
```

这样，当 URL 被 2 个用户共享时，它将始终包含`psel`URL 参数，并且当新用户第一次访问它时，它将相应地设置他的会话变量。

**想法 2：**

为每个选择创建一个“假”目录。例如，假设您的网站是[http://example.com/index.php](http://example.com/index.php)，那么您将拥有[http://example.com/sel1/index.php](http://example.com/sel1/index.php)和[http://example.com/sel2/index。 .php](http://example.com/sel2/index.php) _ 这些目录不是真实的，使用 .htaccess 重写（甚至 FS 中的符号链接）实际上将指向原始文件。除了，现在你在路径中有这个神奇的参数。这很有用，因为路径将在所有相对链接中保持不变，这意味着您不必更改所有内部链接。如果需要访问当前选择，可以通过解析当前url的路径轻松获取。

我认为这个想法更好一点，因为它无需重定向即可实现相同的目标。用符号链接来解释是最容易的，但请记住，这也可以用 .htaccess 重写规则来完成。Linux 中的符号链接是链接到另一个路径的路径。如果我运行以下控制台命令（通常在我的服务器上使用 SSH）：

```
ln -s . sel1
ln -s . sel2 
```

它将在内部创建 2 个目录。（本地目录），命名为 sel1 和 sel2，但它们只是指向原始当前目录的链接。如果这个当前目​​录是我的 web 服务器文档根目录，那么效果就是访问：

```
http://example.com/sel1/index.php 
```

将实际访问：

```
http://example.com/index.php 
```

请注意，这不是目录的副本。如果我对 index.php 或本地目录中的任何其他文件进行更改，这些更改也将反映在`/sel1`和`/sel2`

这有什么帮助？如果我想显示选择 2，我将使用 URL，而不是访问我的常规站点`http://example.com/sel2/index.php`。由于符号链接，此 URL 的行为将与我的原始网站完全相同`http://example.com/index.php`。

现在假设我想检查 php 是否显示选择 2，我可以简单地检查变量`$_SERVER['REQUEST_URI']`并查看它是否包含路径`/sel2`。

此路径将在所有内部 URL 之间保持持久性，因为它们通常是相对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T22:05:08.330

您所描述的是 cookie，但它们不会出现在 URL 中。

对于您的用例，最好的解决方案是 URL 和相对链接中的路径前缀，正如 talkol 在他的第二个想法中所描述的那样。只要您保持链接相对，它就不需要在服务器端进行任何额外的工作。

您拥有的第二个选项是使用输出缓冲 URL 重写器（请参阅[output_add_rewrite_var](http://www.php.net/manual/en/function.output-add-rewrite-var.php)），解析应用程序生成的输出并替换链接。但这是一种有点愚蠢的方法。当您有大型应用程序并且不想修改它时，这将是合理的。

所有其他方法都是关于使用您的特殊函数或框架中的函数在 PHP 中生成链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:56:23.170

我认为您最好的解决方案是将他们的初始选择存储在一个`$_SESSION`变量中，然后将该变量简单地附加到整个站点结构的 URL 中，例如：

```
$url = (isset($_SESSION['use_case'])) ? $_SESSION['use_case'] : 'default';
echo 'my-page.php?use_case='.urlencode($url); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T18:04:35.573

如果这只是一个基于案例的问题，您可以在 $_SESSION 上设置案例，并为每个案例简单地使用一个开关。

[http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

[http://www.php.net/manual/en/control-structures.switch.php](http://www.php.net/manual/en/control-structures.switch.php)

# java - 我的世界错误

> ID：14675367
> 
> 赞同：-1
> 
> 时间：2013-02-03T17:50:12.493
> 
> 标签：java, minecraft

我不知道问题是什么，我可以启动 Minecraft，但它会将我重定向到错误窗口。这是源代码：

```
package net.minecraft.src;

import java.util.Random;

public class mod_PixelatedExtension extends BaseMod {

    public static final Item EmeraldSword = new ItemSword(10000,
            EnumToolMaterial.MOD_EMERALD).setItemName("Emerald Sword");
    public static final Item EmeraldPickaxe = new ItemPickaxe(10001,
            EnumToolMaterial.MOD_EMERALD).setItemName("Emerald Pickaxe");
    public static final Item EmeraldAxe = new ItemAxe(10002,
            EnumToolMaterial.MOD_EMERALD).setItemName("Emerald Axe");
    public static final Item EmeraldShovel = new ItemSpade(10003,
            EnumToolMaterial.MOD_EMERALD).setItemName("Emerald Shovel");
    public static final Item EmeraldHoe = new ItemHoe(10004,
            EnumToolMaterial.MOD_EMERALD).setItemName("Emerald Hoe");

    public static final Item AmethystGem = new Item(10005).setItemName(
            "Amethyst Gem").setCreativeTab(CreativeTabs.tabMaterials);
    public static final Block AmethystOre = new BlockAmethyst(151, 0)
            .setHardness(6F).setResistance(7.0F).setBlockName("Amethyst Ore");

    public static final Block RubyOre = new BlockRuby(151, 0).setHardness(6F)
            .setResistance(7.0F).setBlockName("Ruby Ore");
    public static final Item RubyGem = new Item(10006).setItemName("Ruby Gem")
            .setCreativeTab(CreativeTabs.tabMaterials);

    public void generateSurface(World world, Random random, int chunkX,
            int chunkZ) {
        Random randomGenerator = random;

        for (int i = 0; i < 10; i++) {
            // Ore Generator för Amethyst (BlockAmethyst.java)
            int randPosX = chunkX + randomGenerator.nextInt(20);
            int randPosY = random.nextInt(20);
            int randPosZ = chunkZ + randomGenerator.nextInt(20);

            (new WorldGenMinable(AmethystOre.blockID, 4)).generate(world,
                    random, randPosX, randPosY, randPosZ);

        }

    }

    public void load() {

        // Emerald

        // Emerald svärdet
        EmeraldSword.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/EmeraldSword.png");
        ModLoader.addName(EmeraldSword, "Emerald Sword");
        ModLoader.addRecipe(new ItemStack(EmeraldSword, 1), new Object[] {
                " * ", " * ", " X ", 'X', Item.blazeRod, '*', Item.emerald });

        // Emerald Picka
        EmeraldPickaxe.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/EmeraldPick.png");
        ModLoader.addName(EmeraldPickaxe, "Emerald Pickaxe");
        ModLoader.addRecipe(new ItemStack(EmeraldPickaxe, 1), new Object[] {
                "***", " X ", " X ", 'X', Item.blazeRod, '*', Item.emerald });

        // Emerald Axe
        EmeraldAxe.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/EmeraldAxe.png");
        ModLoader.addName(EmeraldAxe, "Emerald Axe");
        ModLoader.addRecipe(new ItemStack(EmeraldAxe, 1), new Object[] { "** ",
                "*X ", " X ", 'X', Item.blazeRod, '*', Item.emerald });

        // Emerald Shovel
        EmeraldShovel.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/EmeraldShovel.png");
        ModLoader.addName(EmeraldShovel, "Emerald Shovel");
        ModLoader.addRecipe(new ItemStack(EmeraldShovel, 1), new Object[] {
                " * ", " X ", " X ", 'X', Item.blazeRod, '*', Item.emerald });

        // Emerald Hoe
        EmeraldHoe.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/EmeraldHoe.png");
        ModLoader.addName(EmeraldHoe, "Emerald Hoe");
        ModLoader.addRecipe(new ItemStack(EmeraldHoe, 1), new Object[] { "** ",
                " X ", " X ", 'X', Item.blazeRod, '*', Item.emerald });

        // Amethyst Gem

        AmethystGem.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/Amethyst.png");
        ModLoader.addName(AmethystGem, "Amethyst Gem");

        // Amethyst Ore
        ModLoader.registerBlock(AmethystOre);
        AmethystOre.blockIndexInTexture = ModLoader.addOverride("/terrain.png",
                "/items/AmethystOre.png");
        ModLoader.addName(AmethystOre, "Amethyst Ore");

        // Amethyst Ore ---> Amethyst Gem
        ModLoader.addSmelting(AmethystOre.blockID, new ItemStack(
                mod_PixelatedExtension.AmethystGem, 1), 1.0F);

        // Ruby Ore
        ModLoader.registerBlock(RubyOre);
        RubyOre.blockIndexInTexture = ModLoader.addOverride("/terrain.png",
                "/items/RubyOre.png");
        ModLoader.addName(RubyOre, "Ruby Ore");

        // Ruby Gem
        RubyGem.iconIndex = ModLoader.addOverride("/gui/items.png",
                "/items/RubyGem.png");
        ModLoader.addName(RubyGem, "Ruby Gem");

        // Ruby Ore ---> Ruby Gem
        ModLoader.addSmelting(AmethystOre.blockID, new ItemStack(
                mod_PixelatedExtension.RubyGem, 1), 1.0F);

    }

    public String getVersion() {
        return "3.14159265";
    }
} 
```

以下行显示在控制台 (Eclipse) 中：

```
27 achievements
210 recipes
Setting user: Player731, -
Client asked for parameter: server
LWJGL Version: 2.4.2
ModLoader 1.4.7 Initializing...
Failed to load mod from "mod_PixelatedExtension.class"
Someone is closing me! 
```

我不知道如何再给你提示，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:02:28.083

缺少 mod_PixelatedExtension.class 中的某些扩展名，这可能是因为您有一个未包含在“mod_PixelatedExtension.class”中的新行或错误地写入了某个项目的名称。开始检查您从以前的稳定版本中修改的内容。

# android - Gson 序列化 HashMap >

> ID：14675374
> 
> 赞同：7
> 
> 时间：2013-02-03T17:50:51.847
> 
> 标签：android, serialization, deserialization, gson

我有一个地图，其中一个键的值是一个对象列表。能够通过序列化键，`builder.enableComplexMapKeySerialization();`但值没有按预期序列化，因为它们在反序列化时返回字符串而不是对象。

下面是序列化的输出

> [{"id":31001,"name":Teacher"]}, //这是关键
> 
> [{"id":33033,"name":"student1"}, {"id":34001,"name":"student2"}]], //这是值列表

我使用了相关的 TypeToken ，`TypeToken<HashMap<Teacher, List<Student>>>`但列表值仍然在反序列化时返回字符串而不是对象。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-03T21:35:54.227

JSON 由名称/值对组成（其中值端可以是事物列表）。其中的名称部分是一个字符串（参见：http: [//json.org](http://json.org)）

您要做的是使用对象作为名称；你不能直接这样做。JSON 对象不能是名称/值对的名称。

如果您阅读[enableComplexMapKeySerialization 的文档，](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html#enableComplexMapKeySerialization())它会解释生成的 JSON 将是什么。

它生成的 JSON（作为 JSON 数组的 Map）将完美地反序列化回您的地图。以下是一个完整的工作示例 (Java 7)。

请注意，一旦我从 JSON 反序列化回 Java，我将遍历映射以获取密钥。这是因为如果没有`equals()`并被`hashCode()`覆盖，`Teacher`就无法创建新实例`Teacher`并将其作为键工作（仅比较参考值）。

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.reflect.TypeToken;
import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class App 
{
    public static void main( String[] args )
    {
        HashMap<Teacher, List<Student>> map = new HashMap<>();
        Teacher t = new Teacher("12345", "Teacher");
        Teacher t2 = new Teacher("23456", "Teacher2");
        ArrayList<Student> list = new ArrayList<>();
        for (int i = 0; i < 3; i++) {
            list.add(new Student(String.valueOf(i), "Student" + String.valueOf(i)));
        }

        map.put(t, list);
        map.put(t2, list);

        GsonBuilder builder = new GsonBuilder();

        Gson gson =
            builder.enableComplexMapKeySerialization().setPrettyPrinting().create();
        Type type = new TypeToken<HashMap<Teacher,List<Student>>>(){}.getType();
        String json = gson.toJson(map, type);
        System.out.println(json);

        System.out.println("\nAfter deserialization:");
        HashMap<Teacher, List<Student>> map2 = gson.fromJson(json, type);

        for (Teacher t3 : map2.keySet()) {
            System.out.println(t3.name);
            for (Student s2 : map2.get(t3)) {
                System.out.println("\t" + s2.name);
            }
        }
    }
}

class Teacher {
    public String id;
    public String name;

    public Teacher(String id, String name) {
        this.id = id;
        this.name = name;
    }
}

class Student {
    public String id;
    public String name;

    public Student(String id, String name) {
        this.id = id;
        this.name = name;
    }

} 
```

输出：

```
[
  [
    {
      "id": "12345",
      "name": "Teacher"
    },
    [
      {
        "id": "0",
        "name": "Student0"
      },
      {
        "id": "1",
        "name": "Student1"
      },
      {
        "id": "2",
        "name": "Student2"
      }
    ]
  ],
  [
    {
      "id": "23456",
      "name": "Teacher2"
    },
    [
      {
        "id": "0",
        "name": "Student0"
      },
      {
        "id": "1",
        "name": "Student1"
      },
      {
        "id": "2",
        "name": "Student2"
      }
    ]
  ]
]

After deserialization:
Teacher2
    Student0
    Student1
    Student2
Teacher
    Student0
    Student1
    Student2 
```

如果你在你的类中实现`equals()`和，你就可以使用一个新的实例来从地图中检索东西：`hashCode()``Teacher``Teacher`

```
class Teacher {

    public String id;
    public String name;

    public Teacher(String id, String name) {
        this.id = id;
        this.name = name;
    }

    @Override
    public int hashCode()
    {
        int hash = 3;
        hash = 37 * hash + Objects.hashCode(this.id);
        hash = 37 * hash + Objects.hashCode(this.name);
        return hash;
    }

    @Override
    public boolean equals(Object obj)
    {
        if (obj == null)
        {
            return false;
        }
        if (getClass() != obj.getClass())
        {
            return false;
        }
        final Teacher other = (Teacher) obj;
        if (!Objects.equals(this.id, other.id))
        {
            return false;
        }
        if (!Objects.equals(this.name, other.name))
        {
            return false;
        }
        return true;
    }

} 
```

一旦你有了它，你可以这样做：

```
...
HashMap<Teacher, List<Student>> map2 = gson.fromJson(json, type);
Teacher t = new Teacher("23456", "Teacher2");
List<Student> list = map2.get(t);
... 
```

# javascript - 为什么通过页面刷新而不是直接添加到areatext的文本

> ID：14675377
> 
> 赞同：0
> 
> 时间：2013-02-03T17:51:08.873
> 
> 标签：javascript, jquery, html, nicedit

我很[高兴](http://nicedit.com/)成为`areatext`编辑。

```
 <select id="greetings" name="greetings">
      <option value="" selected>Select one </option>
      <option value="1" onClick="addGreeting('text1'); return false;">text1</option>
      <option value="2" onClick="addGreeting('text2'); return false;">text2</option>
      <option value="3" onClick="addGreeting('text3'); return false;">text3</option>
    </select>
<textarea name="message" id="message" cols="50" rows="8" ></textarea> 
```

因此，当用户选择选项时，它将自动插入到 textarea。

这里是javascript代码

```
 bkLib.onDomLoaded(nicEditors.allTextAreas);

   function addGreeting(text) {
text = ' ' + text + ' ';
if (document.sc_form.message.createTextRange && document.sc_form.message.caretPos) {
    var caretPos = document.sc_form.message.caretPos;
    caretPos.text = caretPos.text.charAt(caretPos.text.length - 1) == ' ' ? text + ' ' : text;
    document.sc_form.message.focus();
} else {
document.sc_form.message.value  += text;
document.sc_form.message.focus();
}
  } 
```

**没有 niceeditor 的 **OBS一切正常，选择的选项将直接插入。****但**不是只有在我刷新页面时才插入。**

 **我希望在不刷新的情况下插入文本。

如果有人对脚本的顺序感兴趣，这是我的顺序

```
<script src="submit.js" language="JavaScript" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css" rel="stylesheet" type="text/css"/>
 <script type="text/javascript" src="include/nicEdit-latest.js"></script> 
```

还有什么让我知道，我将其插入，感谢您花时间处理我的代码。

**编辑：**

这是我的[**DEMO JSFIDDLE**](http://jsfiddle.net/38uLe/3/) //这不适用于编辑器插件。

这个[**DEMO JSFIDDLE**](http://jsfiddle.net/J4Rkt/320/) // 这在没有插件的情况下工作

- 我认为问题在于`bkLib.onDomLoaded`为什么可能在页面加载（刷新）之后插入文本，关于如何替换它的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:18:48.410

nicedit没有问题

nicedit 因为 100% 的所见即所得在实例化时修改 dom，隐藏您的 textarea 或任何要编辑的 html 元素

*   你要么学习nicedit API，要么创建一个自定义按钮/下拉菜单来附加你的文本

*   要么在更改事件（）时销毁实例`.removeInstance()`，将文本附加到可编辑然后重新实例化编辑器

干净的解决方案是第一个，懒惰的解决方案是第二个**

# php - SQL 和负浮点数

> ID：14675381
> 
> 赞同：1
> 
> 时间：2013-02-03T17:51:31.687
> 
> 标签：php, sql, postgresql

考虑这个相当简单的 SQL 查询：

```
"SELECT * FROM transactions 
WHERE amount BETWEEN $cost_amount AND 0
AND acc_int IN ('Contant', '647-0191181-84')
AND dos_costs_id IS NULL
AND date + interval '30 days' >= to_date('$cost_date', 'YYYY-MM-DD')
ORDER BY (amount <> to_number('$cost_amount','99999999D99')), date DESC" 
```

两年来，我一直使用这个确切的查询来显示我们传入交易的帐户上所有可能的交易。所有这些“金额”都是正浮动。

现在我正在重复使用传出交易的查询，所以金额总是负数。只要金额是整数，它就可以工作，但是一旦值是浮点数，它就会停止。因此，值前的“-”和金额末尾的“带有两个尾随数字的逗号”的组合会返回语法错误，fe：

```
Query failed: ERROR: syntax error at or near "," LINE 2: WHERE amount BETWEEN -327,13 AND 0 
```

我尝试在金额周围添加引号，但这没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T18:00:08.127

尝试使用点而不是逗号:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:01:30.577

您需要使用`to_number`将###,## 转换为###.##。SQL 不接受逗号作为数字。试试这样的东西，它适用于逗号和句点：

```
SELECT * 
FROM YourTable
WHERE amount BETWEEN to_number('-327,13', '99G999') AND 0 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!1/66995/9)。

祝你好运。

# c - 作业帮助 - 创建一个函数来分配结构并填写字段

> ID：14675384
> 
> 赞同：0
> 
> 时间：2013-02-03T17:51:44.110
> 
> 标签：c, struct

我在编写一个创建结构并使用作为参数传入的数据填充字段的函数时遇到问题。我对 C 很陌生，所以这对我来说非常具有挑战性。

我创建了一个名为“Employee”的结构，其中包含姓名、出生年份和开始年份。

```
typedef struct {
    char* name;
    int birthyear;
    int startyear;
}   Employee; 
```

对于我创建的函数，我不断收到关于取消引用指向不完整类型的指针的错误。此外，我收到一个错误，因为 sizeof 对不完整类型的 struct Employee 应用无效。

```
Employee* make_employee(char *name, int birthyear, int startyear) {
    struct Employee* newemployee = (struct Employee*)malloc(sizeof(struct Employee));
    newemployee->name = name;
    newemployee->birthyear = birthyear;
    newemployee->startyear = startyear;
    return newemployee;
} 
```

我确定我只是犯了非常简单的错误，但非常感谢您的帮助和解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:54:26.013

你唯一的问题是这一行：

```
struct Employee* newemployee = (struct Employee*)malloc(sizeof(struct Employee)); 
```

在您的情况下，`struct`关键字是错误的。由于您定义和`typedef`编辑结构的方式，没有这样的类型`struct Employee`- 只有简单的 typedef`Employee`是有效的。只需删除所有三个`struct`，你应该没问题：

```
Employee *newemployee = malloc(sizeof(Employee)); 
```

为了清楚起见，我删除了不必要的演员表。

或者，您可以更改结构定义以包含结构名称，而不仅仅是创建一个匿名结构并`typdef`对其进行 ing：

```
typedef struct Employee {
    char *name;
    int birthyear;
    int startyearl
} Employee; 
```

# php - 管理员页面的页面保护无法正常工作

> ID：14675386
> 
> 赞同：1
> 
> 时间：2013-02-03T17:52:04.057
> 
> 标签：php, admin, webpage, protection

> 我用不同的代码发布了一个类似的帖子，但现在做了一点改动，并没有得到我希望的答案（答案对我没有多大帮助）。我希望这没问题，如果不是，请告诉我。:)

我一直在尝试为管理员页面进行页面保护，但无法使其正常工作。如果我不是 PHP 编码的新手，我相信这不会是一个问题，呵呵。

当类型为 '0' 的普通用户尝试访问管理员页面**index_admin.php**时，用户将被重定向到普通用户页面**index.php**。如果用户的类型为“1”，则用户/管理员将留在页面上。

这是我一直试图开始工作的代码。（该文件在**index_admin.php**中是必需的，它被称为**index_admin_check.php**）。

**index_admin_check.php**：

```
<?php
    session_start();
?>

<?php
    $vert = "localhost";
    $brukarnamn = "root";
    $passord = "";
    $db_namn = "nettsidebunad";
    $tbl_namn = "kunde_register";

    // Connection to the MySQL database.
    mysql_connect("$vert", "$brukarnamn", "$passord") or die ("Kan dessverre ikkje koble til databasen.");
    mysql_select_db("$db_namn") or die ("Kan ikkje finna den ynkjande databasen.");
?>

<?php
if (isset($_SESSION['mittbrukarnamn'])) {

    $sql1 = "SELECT `type` FROM $tbl_namn";
    $rad1 = mysql_query($sql1);
    $type1 = mysql_fetch_row($rad1);

    if ($type1 == 0) {
        echo "You do not have access to this page.";
        //header("location: index.php");
    } else {
        echo "You have access to this page.";

    }
}
?> 
```

**部分文本为挪威语。**

> *$vert* = $host（英文）
> 
> *$brukarnamn* = $usernamn（英文）
> 
> *$passord* = $password（英文）
> 
> $db_ *namn* = $db_name（英文）
> 
> $tbl_ *namn* = $tbl_name（英文）
> 
> $_SESSION[ *'mittbrukarnamn'* ] = $_SESSION['myusername']（英文）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:03:53.147

今天我似乎回答了很多，我[在 github 上有一个管理面板](https://github.com/HirotoKun/admin-panel/blob/master/admin/private.php#L20)，似乎回答了很多关于 php 登录的常见问题。在您的情况下，您只需`type`从数据库中获取并使用它。请注意，您必须`WHERE`在 SQL 中提供该语句，否则您将没有该用户的信息。你会*在这张桌子上找到它的每一块*。

下面使用[准备好的查询](http://php.net/manual/en/mysqli.prepare.php)。[`mysql_*`函数已**弃用**](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)（不再支持；请参阅[此 SO 问题](https://stackoverflow.com/questions/12859942)）

```
function get_user_array() {
    /* Does all of the heavy lifting for getting user stats. */
    $db = new db(); // where db() is an abstraction class that implements mysqli and adds login details.
    if (isset($_SESSION["id"])) {
        $sid = $_SESSION["id"];
        if ($query = $db->prepare("SELECT id, name, status FROM `users` WHERE id=?")) {
                $query->bind_param("i", $sid); // i = integer
                $query->execute();
                $query->bind_result($id, $name, $status);
                $query->fetch();
                $query->close();
                $db->close();
                return array("name" => $name, "status" => $status, "id" => $id);
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

我的建议也是使用用户 ID，并从数据库中查找所有内容。这样，如果他们的用户名发生变化，整个网站不会在他们的页面加载时崩溃。

* * *

实际的比较是：

```
$user = get_user_array();
if (@$user["type"] != 'admin') { // @ error-handling will make it NULL anyway.
    header("Location: index.php"); // note: this must be sent BEFORE any output!
} 
```

以及检查普通用户是否登录的快速比较（`if logged_in()`例如）：

```
$user = get_user_array();
if (!@$user["id"]) { // continue only if logged in
    // not logged in handle
} 
```

* * *

注意：`db()`是这个类吗（如果你调用父级，从长远来看，重写 mysqli 公共函数以缩短代码是很棒的）：

```
class db extends mysqli {
    public function __construct($a = DB_HOST,
                                $b = DB_USER,
                                $c = DB_PASS,
                                $d = DB_NAME,
                                $persistent = true) {
        if ($persistent) {
            parent::__construct("p:" . $a, $b, $c, $d);
        } else {
            parent::__construct($a, $b, $c, $d);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:58:14.873

您的 SQL 查询正在选择所有行，因为您没有`WHERE`子句。因此，当您调用 时`mysql_fetch_row`，它仅获取第一行。

您需要检查当前登录用户的类型

```
$sql1 = "SELECT `type` FROM $tbl_namn WHERE <user_name> = '$_SESSION[mittbrukarnamn]'"; 
```

另一个建议是不要使用 MYSQL，而是使用 MYSQLi 或 PDO 进行数据库操作，因为 PHP 不再维护 MYSQL，并且将在 PHP 5.5.0 中完全弃用。一些 MYSQL 函数已经被弃用了。

编辑：您的代码中还有另一个问题。`mysql_fetch_row`返回一个数组，因此您需要从数组中检索值。

```
if($type1['type'] == 0) 
```

代替

```
if($type1 == 0) 
```

# c - 未定义对 memdup 的引用

> ID：14675394
> 
> 赞同：0
> 
> 时间：2013-02-03T17:52:52.313
> 
> 标签：c, libraries

我在一个目录中有 5 个文件。我正在尝试使用编译我的程序`gcc -o mini2.c -pthread -utils`，但出现以下错误：

```
/tmp/cc2W2ocr.o: In function `fifo_put':
mini2.c:(.text+0x59): undefined reference to `memdup'
collect2: ld returned 1 exit status 
```

**有什么想法可以让编译器可以看到 memdup 函数吗？**我在目录中的文件是：

*   迷你2.c

    ```
     // Mini Assignment 1
            // Author: Georges Krinker
            // Student #: 260369844
            // Course: ECSE 427 (OS)

            #include <stdio.h>
            #include <stdlib.h>

            extern char etext, edata,end;
            int not_init;
            int init =10;
            int dat =20;

            int main(void){

                char *stack = (char*)alloca(10000);
                int pid;
                char *dynamic_var = (char*)malloc(4000);
                int c =0;
                FILE *file;
                char l[8000];
                int len=8000;
                char s [1200];

                // To find where the stack is we use the start of the last declared local variable s.
                // This is because of the LIFO nature of the stack
                // For a more accurate look at proc/pid/smaps and see the stack range (Readme.html)

                printf("The stack starts approx. at %p\n", &s[1200]);

                printf("The stack ends at %p\n\n", stack-10000);

                // The most reliable way to obtain the Memory mapping segment is to read
                // the proc/pid/maps file. (see Readme.html)

                printf("The entire memory mapping segment spans:\n");

                sprintf(s, "/proc/%d/maps", pid=getpid());

                file = fopen(s, "r");
                if (file) {
                    //skip first 4 lines of the maps file
                    fgets(l, len, file);
                    fgets(l, len, file);
                    fgets(l, len, file);
                    fgets(l, len, file);
                    fgets(l, len, file);
                    while (c <= 9) {
                       fgets(l, len, file);
                       fputs ( l, stdout ); /*print the memeory mapping segments */
                    c++;
                   }
                }
                 fclose(file);

                // Use the start of the dyn. allocated variable for the start of the heap.
                // There is a 8 byte offset that I noticed when comparing my obtained
                // address with the process's smap file which is why I subtract 8\. (See Readme.html)

                printf("\n\nThe Heap segment starts at %p\n", dynamic_var-8);

                // Add the size of that variable to the start address to get the end of the heap

                printf("The heap ends at %p\n\n", dynamic_var+100-8);

                // Use the symbol edata to find the start of BSS

                printf("The BSS segment starts after %10p \n\n", &edata);

                // The end of text and start of data is the location of
                // the single initialized global variable init.

                printf("The data segment starts at %10p\n\n", &init);

                //Use the address of main for the start of text.
                // For a more accurate number, do objdump -x <filename> and
                // look for .text in the <filename> section (see Readme.html)

                printf("The start of text is approximately at %p\n\n", main);

                printf("For more info, check the comments of this source code and the Readme.html\n\n");

                return 0;

            } 
    ```

*   实用程序.c

    ```
     /* source: utils.c */
        /* Copyright Gerhard Rieger 2001-2009 */
        /* Published under the GNU General Public License V.2, see file COPYING */

        /* useful additions to C library */

        #include "config.h"

        #include "sysincludes.h"

        #include "compat.h" /* socklen_t */
        #include "mytypes.h"
        #include "sycls.h"
        #include "utils.h"

        #if !HAVE_MEMRCHR
        /* GNU extension, available since glibc 2.1.91 */
        void *memrchr(const void *s, int c, size_t n) {
           const unsigned char *t = ((unsigned char *)s)+n;
           while (--t >= (unsigned char *)s) {
              if (*t == c)  break;
           }
           if (t < (unsigned char *)s)
              return NULL;
           return (void *)t;
        }
        #endif /* !HAVE_MEMRCHR */

        void *memdup(const void *src, size_t n) {
           void *dest;

           if ((dest = Malloc(n)) == NULL) {
              return NULL;
           }

           memcpy(dest, src, n);
           return dest;
        }

        /* search the keyword-table for a match of the leading part of name. */
        /* returns the pointer to the matching field of the keyword or NULL if no
           keyword was found. */
        const struct wordent *keyw(const struct wordent *keywds, const char *name, unsigned int nkeys) {
           unsigned int lower, upper, mid;
           int r;

           lower = 0;
           upper = nkeys;

           while (upper - lower > 1)
           {
              mid = (upper + lower) >> 1;
              if (!(r = strcasecmp(keywds[mid].name, name)))
              {
             return &keywds[mid];
              }
              if (r < 0)
             lower = mid;
              else
             upper = mid;
           }
           if (nkeys > 0 && !(strcasecmp(keywds[lower].name, name)))
           {
              return &keywds[lower];
           }
           return NULL;
        }

        /* Linux: setenv(), AIX: putenv() */
        #if !HAVE_SETENV
        int setenv(const char *name, const char *value, int overwrite) {
           int result;
           char *env;
           if (!overwrite) {
              if (getenv(name))  return 0;  /* already exists */
           }
           if ((env = Malloc(strlen(name)+strlen(value)+2)) == NULL) {
              return -1;
           }
           sprintf(env, "%s=%s", name, value);
           if ((result = putenv(env)) != 0) {   /* AIX docu says "... nonzero ..." */
              free(env);
              result = -1;
           }
           /* linux "man putenv" says: ...this string becomes part of the environment*/
           return result;
        }
        #endif /* !HAVE_SETENV */

        /* sanitize an "untrusted" character. output buffer must provide at least 5
           characters space.
           Does not append null. returns length out output (currently: max 4) */
        static size_t sanitize_char(char c, char *o, int style) {
           int hn;  /* high nibble */
           int ln;  /* low nibble */
           int n;   /* written chars */
           if (isprint(c)) {
              *o = c;
              return 1;
           }
           *o++ = '\\';
           n = 2;
           switch (c) {
           case '\0': *o++ = '0';  break;
           case '\a': *o++ = 'a';  break;
           case '\b': *o++ = 'b';  break;
           case '\t': *o++ = 't';  break;
           case '\n': *o++ = 'n';  break;
           case '\v': *o++ = 'v';  break;
           case '\f': *o++ = 'f';  break;
           case '\r': *o++ = 'r';  break;
           case '\'': *o++ = '\''; break;
           case '\"': *o++ = '"';  break;
           case '\\': *o++ = '\\'; break;
           default:
              *o++ = 'x';
              hn = (c>>4)&0x0f;
              ln = c&0x0f;
              *o++ = (hn>=10 ? (('A'-1)+(hn-10)) : ('0'+hn));
              *o++ = (ln>=10 ? (('A'-1)+(ln-10)) : ('0'+ln));
              n = 4;
           }
           return n;
        }

        /* sanitize "untrusted" text, replacing special control characters with the C
           string version ("\x"), and replacing unprintable chars with ".".
           text can grow to four times of input, so keep output buffer long enough!
           returns a pointer to the first untouched byte of the output buffer.
        */
        char *sanitize_string(const char *data, /* input data */
                   size_t bytes,    /* length of input data, >=0 */
                   char *coded, /* output buffer, must be long enough */
                   int style
                   ) {
           int c;

           while (bytes > 0) {
              c = *(unsigned char *)data++;
              coded += sanitize_char(c, coded, style);
              --bytes;
           }
           return coded;
        }

        /* copies a substring out of a given buff
           returns scratch, \0 terminated; scratch must provide len+1 bytes
        */
        char *xiosubstr(char *scratch, const char *str, size_t from, size_t len) {
           char *scratch0 = scratch;
           str += from;
           while (len--) {
              *scratch++ = *str++;
           }
           *scratch = '\0';
           return scratch0;
        } 
    ```

*   实用程序.h

    ```
     /* source: utils.h */
            /* Copyright Gerhard Rieger 2001-2008 */
            /* Published under the GNU General Public License V.2, see file COPYING                   */

            #ifndef __utils_h_included
            #define __utils_h_included 1

            /* a generic name table entry */
            struct wordent {
               const char *name;
               void *desc;
            } ;

            #if !HAVE_MEMRCHR
            extern void *memrchr(const void *s, int c, size_t n);
            #endif
            extern void *memdup(const void *src, size_t n);
            #if !HAVE_SETENV
            extern int setenv(const char *name, const char *value, int overwrite);
            #endif /* !HAVE_SETENV */

            extern const struct wordent *keyw(const struct wordent *keywds, const char *name, unsigned int nkeys);

            #define XIOSAN_ZERO_MASK                  0x000f
            #define XIOSAN_ZERO_DEFAULT               0x0000
            #define XIOSAN_ZERO_DOT                   0x0001
            #define XIOSAN_ZERO_BACKSLASH_OCT_3       0x0002
            #define XIOSAN_ZERO_BACKSLASH_OCT_4       0x0003
            #define XIOSAN_ZERO_BACKSLASHX_HEX_UP     0x0004
            #define XIOSAN_ZERO_BACKSLASHX_HEX_LOW    0x0005
            #define XIOSAN_ZERO_PERCENT_HEX_UP        0x0006
            #define XIOSAN_ZERO_PERCENT_HEX_LOW       0x0007
            #define XIOSAN_CONTROL_MASK               0x00f0
            #define XIOSAN_CONTROL_DEFAULT            0x0000
            #define XIOSAN_CONTROL_DOT                0x0010
            #define XIOSAN_CONTROL_BACKSLASH_OCT_3    0x0020
            #define XIOSAN_CONTROL_BACKSLASH_OCT_4    0x0030
            #define XIOSAN_CONTROL_BACKSLASHX_HEX_UP  0x0040
            #define XIOSAN_CONTROL_BACKSLASHX_HEX_LOW 0x0050
            #define XIOSAN_CONTROL_PERCENT_HEX_UP     0x0060
            #define XIOSAN_CONTROL_PERCENT_HEX_LOW    0x0070
            #define XIOSAN_UNPRINT_MASK               0x0f00
            #define XIOSAN_UNPRINT_DEFAULT            0x0000
            #define XIOSAN_UNPRINT_DOT                0x0100
            #define XIOSAN_UNPRINT_BACKSLASH_OCT_3    0x0200
            #define XIOSAN_UNPRINT_BACKSLASH_OCT_4    0x0300
            #define XIOSAN_UNPRINT_BACKSLASHX_HEX_UP  0x0400
            #define XIOSAN_UNPRINT_BACKSLASHX_HEX_LOW 0x0500
            #define XIOSAN_UNPRINT_PERCENT_HEX_UP     0x0600
            #define XIOSAN_UNPRINT_PERCENT_HEX_LOW    0x0700
            #define XIOSAN_DEFAULT_MASK               0xf000
            #define XIOSAN_DEFAULT_BACKSLASH_DOT      0x1000
            #define XIOSAN_DEFAULT_BACKSLASH_OCT_3    0x2000
            #define XIOSAN_DEFAULT_BACKSLASH_OCT_4    0x3000
            #define XIOSAN_DEFAULT_BACKSLASHX_HEX_UP  0x4000
            #define XIOSAN_DEFAULT_BACKSLASHX_HEX_LOW 0x5000
            #define XIOSAN_DEFAULT_PERCENT_HEX_UP     0x6000
            #define XIOSAN_DEFAULT_PERCENT_HEX_LOW    0x7000

            extern
            char *sanitize_string(const char *data, /* input data */
                       size_t bytes,    /* length of input data, >=0 */
                       char *coded, /* output buffer, must be long enough */
                       int style);
            extern
            char *xiosubstr(char *scratch, const char *str, size_t from, size_t len);

            #endif /* !defined(__utils_h_included) */ 
    ```

*   fifo.c

    ```
     /*
             * fifo.c
             *
             * A simple FIFO implementation.
             *
             * Copyright (C) 2010, Marek Polacek <xpolac06@stud.fit.vutbr.cz>
             */

            #include <stdio.h>
            #include <stdlib.h>
            #include <string.h>
            #include "fifo.h"
            #include "utils.h"

            void fifo_put(fifo_t *fifo, char *data, size_t size)
            {   
                struct item *i;
                i = malloc(sizeof(*i));
                if (!i) {
                    perror("malloc");
                    exit(EXIT_FAILURE);
                }

                if (size) {
                    data = memdup(data, size);
                    if (!data) {
                        fputs("fatal: out of memory\n", stderr);
                        free(i);
                        exit(EXIT_FAILURE);
                    }
                }

                i->next = NULL;
                i->buf = data;

                if (!fifo->tail) {
                    fifo->head = i;
                    fifo->tail = i;
                } else {
                    fifo->tail->next = i;
                    fifo->tail = i;
                }
            }

            char *fifo_get(fifo_t *fifo)
            {
                struct item *i;
                char *data;

                assert(fifo != NULL);
                if (fifo_empty(fifo))
                    return NULL;

                i = fifo->head;
                data = i->buf;

                fifo->head = i->next;
                if (!fifo->head)
                    fifo->tail = NULL;
                free(i);

                return data;
            }

            void fifo_free(fifo_t *fifo)
            {
                assert(fifo != NULL);
                while (fifo->head)
                    (void) fifo_get(fifo);
                free(fifo);
            }

            fifo_t *fifo_init(void)
            {
                fifo_t *fifo;
                fifo = malloc(sizeof(*fifo));
                if (!fifo) {
                    perror("malloc");
                    exit(EXIT_FAILURE);
                }

                fifo->head = NULL;
                fifo->tail = NULL;
                return fifo;
            } 
    ```

*   fifo.h

    ```
     /*
             * fifo.h
             *
             * A simple FIFO implementation.
             *
             * Copyright (C) 2010, Marek Polacek <xpolac06@stud.fit.vutbr.cz>
             */

            #ifndef FIFO_H
            #define FIFO_H

            #include <assert.h>

            struct item {
                char *buf;
                struct item *next;
            }; 

            struct fifo {
                struct item *head;
                struct item *tail;
            };

            typedef struct fifo fifo_t;

            extern fifo_t *fifo_init(void);
            extern void fifo_free(fifo_t *);
            extern char *fifo_get(fifo_t *);
            extern void fifo_put(fifo_t *, char *, size_t);

            static inline int fifo_empty(fifo_t *fifo)
            {
                return (fifo->head == NULL);
            }

            static inline char *fifo_peek(fifo_t *fifo)
            {
                assert(fifo != NULL);
                if (!fifo_empty(fifo))
                    return fifo->head->buf;
                else
                    return NULL;
            }

            #endif  /* FIFO_H */ 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:56:45.717

编译器的当前调用根本没有意义（将输出写入 C 文件？什么是`-util`？）。[阅读有关 C 编译的内容](http://www.tenouk.com/ModuleW.html)。您需要将所有目标文件链接在一起，所以像

```
gcc -o myprog myprog.c util.c 
```

就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:58:10.163

您的 gcc 命令行不太正确。尝试类似：

`gcc *.c -o mini2`

或者您可以先单独编译它们，然后链接在一起：

`gcc -c fifo.c gcc -c utils.c gcc -c mini2.c gcc -o mini2 mini2.o fifo.o utils.o`

您可能想阅读有关使用 gcc 和 ld 进行编译和链接的信息。

# java - “找不到符号”错误，需要帮助

> ID：14675395
> 
> 赞同：-4
> 
> 时间：2013-02-03T17:53:03.723
> 
> 标签：java, methods, constructor

我在尝试编译这个 java 程序时遇到了一些“找不到符号”的错误，我对出了什么问题感到困惑。这是代码示例...

```
public Employee(String empName, double hourlyRate, double regHours, double grossPay, double regPay, double netPay, double taxes, double otHours, double otPay, double totHours) {
        setEmpName(empName);
        setHourlyRate(hourlyRate);
        setRegHours(regHours);
        setGrossPay(grossPay);
        setRegPay(regPay);
        setNetPay(netPay);
        setTaxes(taxes);
        setOtHours(otHours);
        setOtPay(otPay);
        setTotHours(totHours);
    }

    //Set access methods
    public void setEmpName( String newEmpName ) {
        empName = newEmpName;

public String getEmpName() {
        return empName;
    } 
```

我在 set 和 get 方法上都遇到了错误，但无法弄清楚我做错了什么。

编辑：这是编译器为每一行显示的内容......在两个 empName 语句上都有一个指向小写“e”的小箭头。

错误：找不到符号 empName = newEmpName;

错误：找不到符号返回 empName；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:58:50.990

您似乎忘记声明您的班级成员：

```
public class Employee {
    private String empName;
    private double hourlyRate;
    // ... etc...

} 
```

# actionscript-3 - Red5 服务器仅记录来自 AIR 的 RTMP 视频源的前几秒

> ID：14675398
> 
> 赞同：3
> 
> 时间：2013-02-03T17:53:16.743
> 
> 标签：actionscript-3, air, video-capture, red5, rtmp

我正在使用已安装的 oflaDemo 测试新安装的 Red5 服务器。我想发布要录制到文件中的实时视频源。这似乎工作正常，除了只有一小部分视频源被记录的事实。似乎只有大约 30 秒的视频的第一帧可以播放，并且只有几秒的视频可以录制更长（约 10 分钟）的视频。

什么可能导致开箱即用的 Red5 只能录制几秒钟的视频？

------------ 这是一个代码片段 ---------------------- -------------------------------------------------- --------

```
nc = new NetConnection();
nc.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
nc.connect("rtmp://myurl");
nc.client = this;

ns_out = new NetStream( nc );
ns_out.attachCamera( cam )

protected function onNetStatus(event:NetStatusEvent):void
    { 
        switch(event.info.code)
        {

            case "NetConnection.Connect.Success":
                ns_out.publish(_filename, "record"); 

            break;

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:46:28.303

在我看来，这是最新版本的 Red5 中的一个错误。我对录音机应用程序有同样的问题。虽然我曾经在旧版本的 Red5 中录制没有问题的流。

# matlab - Matlab Integral 传入一个常量变量。

> ID：14675406
> 
> 赞同：2
> 
> 时间：2013-02-03T17:54:01.757
> 
> 标签：matlab, integration

我有以下代码，试图将函数 f 与变量 t 集成，但需要接受参数 cfb（必须事先计算）。如何通过 int() 函数传入 cfb？

`f = @(t) (cfb.*t)`

... `cfb = %Something`

`d = integral(f, 0, upperLimit)`

如何更改此代码以便 f 可以将 t （来自积分）和 cfb 作为参数？我试着改变它 so`f=@(t,cfb)`和`integral(f(cfb)...`，但这只是导致 f 没有接受足够的参数的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:21:03.457

您使用匿名函数的想法很好。`cfb` **在此之前**定义。

```
cfb = %Something
f = @(t) (cfb.*t)
d = integral(f, 0, upperLimit) 
```

# asp.net - 如何在 iframe 标记内的 HTML 页面中调用 .Aspx 页面

> ID：14675407
> 
> 赞同：1
> 
> 时间：2013-02-03T17:54:16.513
> 
> 标签：asp.net, html, .net, c#-4.0

我有一个 html 页面，我想在该 html 页面中添加一个 aspx 页面，我该怎么做。我使用了标签，但它给出了错误。请告诉我我能做什么。

我的 home.html 包含以下内容

```
<html>
<head>
</head>
 <body>
<iframe id="ff" width="546px" height="500px" frameborder="0" scroll="no" src="Default.aspx"></iframe>
</body>
</html> 
```

并且 default.aspx 包含一个源代码

```
<%@ Page Title="Home Page" Language="C#" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="AgrawalPakcers._Default" %>

<HTML>

<HEAD>
 <LINK REL="stylesheet" HREF="style1.css" TYPE="text/css" MEDIA="screen">
</head>
<body>
    <form id="FORM2" runat="server">
  <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" ALIGN="CENTER" 
WIDTH="240">
  <TR>
    <TD VALIGN="TOP" ALIGN="LEFT">
    <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" ALIGN="CENTER" CLASS="tab2">
      <TR>
        <TD><B CLASS="c1">Shifting Type :</B><BR>
        <IMG SRC="gifs/zero.gif" WIDTH="80" HEIGHT="1"></TD>
        <TD><SELECT NAME="Services" STYLE="width:140px;font-size:11px; color:#333;height:20px;border:1px solid #F0D8A1;">
        <OPTION VALUE="NA">----- Select Services -----</OPTION>
        <OPTION VALUE="LOCAL">LOCAL</OPTION>
        <OPTION VALUE="DOMESTIC">DOMESTIC</OPTION>
        <OPTION VALUE="INTERNATIONAL">INTERNATIONAL</OPTION></SELECT></TD>
      </TR>
      <TR>
        <TD><B CLASS="c1">Name :</B></TD>
        <TD><INPUT NAME="S_name" SIZE="12" MAXLENGTH="40" VALUE="" STYLE="border:1px solid #F0D8A1; width:136px;" ONFOCUS="javascript:RegValue(this);" ONBLUR="javascript:RegValue1(this);" CLASS="txtfa"></TD>
      </TR>
    <TR>
        <TD><B CLASS="c1">Contact No. :</B></TD>
        <TD>
        <TABLE CELLPADDING="0" CELLSPACING="0" BORDER="0">
          <TBODY>
          <TR>
            <TD><INPUT TYPE="TEXT" NAME="S_mcode" ID="S_mcode" SIZE="5" READONLY="READONLY" STYLE="width:30px;height:15px;" CLASS="txtfn" VALUE=""></TD>
            <TD><IMG SRC="gifs/zero.gif" WIDTH="2" HEIGHT="1"></TD>
            <TD><INPUT NAME="S_mobile" ID="S_mobile" TYPE="text" ONFOCUS="javascript:CellValue(this);" ONBLUR="javascript:CellValue1(this);" SIZE="15" VALUE="Mobile / Cell Phone Number" CLASS="txtfa" STYLE="width:103px;height:15px;"></TD>
          </TR></TBODY>
        </TABLE></TD>
      </TR>
      <TR>
        <TD><B CLASS="c1">E-Mail ID :</B></TD>
        <TD><INPUT NAME="S_email" MAXLENGTH="48" SIZE="12" VALUE="" STYLE="border:1px solid #F0D8A1;width:136px;" ONFOCUS="javascript:EmailValue(this);" ONBLUR="javascript:EmailValue1(this);" CLASS="txtfa"></TD>
      </TR>
      <TR>
        <TD><B CLASS="c1">From :</B></TD>
        <TD><INPUT TYPE="TEXT" NAME="from" SIZE="12" MAXLENGTH="60" VALUE="" STYLE="border:1px solid #F0D8A1;width:136px;" CLASS="txtfa" ONFOCUS="javascript:FromValue(this);" ONBLUR="javascript:FromValue1(this);"></TD>
      </TR>
  <TR>
            <TD COLSPAN="3">
            <CENTER><INPUT TYPE="SUBMIT" VALUE="Submit"></CENTER></TD>
          </TR>

    </body>
    </html> 
```

当我浏览 home.html 时，我收到以下错误。

此页面包含以下错误：第 1 行第 2 列错误：StartTag: invlid element name

下面是第一个错误之前的页面渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:48:41.567

我已经复制并粘贴了你的 html，它工作正常，问题是你错过了表格和表格的结束标记。你应该关闭你的表格和表格标签，然后我认为它会起作用。

您是否将 home.html 和 Default.aspx 文件保存在同一目录中，如果没有，请将其保存在同一位置。

# c++ - 了解二进制转换

> ID：14675408
> 
> 赞同：0
> 
> 时间：2013-02-03T17:54:22.507
> 
> 标签：c++, binary, binaryfiles

我正在编写一个资源文件，我想从各种常见文件（例如 .JPG、.BMP ）中插入一堆数据，并且我希望它是二进制文件。我将编写一些代码来稍后按索引组织检索这些数据，这就是我到目前为止得到的：

```
float randomValue = 23.14f;

ofstream fileWriter;
fileWriter.open("myFile.dat", ios::binary);
fileWriter.write((char*)&randomValue, sizeof(randomValue));
fileWriter.close();
//With this my .dat file, when opened in notepad has "B!¹A" in it

float retrieveValue = 0.0f;

ifstream fileReader;
fileReader.open("myFile.dat", ios::binary);
fileReader.read((char*)&retrieveValue, sizeof(retrieveValue));
fileReader.close();

cout << retrieveValue << endl; //This gives me exactly the 23.14 I wanted, perfect! 
```

虽然这很好用，但我想了解那里到底发生了什么。我正在将*randomValue*的地址转换为 char*，并将此地址中的值写入文件？

我也很好奇，因为我需要为数组执行此操作，但我不能这样做：

```
int* myArray = new int[10];
//fill myArray values with random stuff

fileWriter.open("myFile.dat", ios::binary);
fileWriter.write((char*)&myArray, sizeof(myArray));
fileWriter.close(); 
```

据我了解，这只会在文件中写入第一个地址的值，而不是所有数组。因此，为了测试，我试图简单地将变量转换为 char* ，然后将其写入文件，然后转换回变量以查看是否正确检索了值，所以我同意：

```
int* intArray = new int[10];
for(int i = 0; i < 10; i++)
{
    cout << &intArray[i]; //the address of each number in my array
    cout << intArray[i]; //it's value
    cout << reinterpret_cast<char*>(&intArray[i]); //the char* value of each one     
} 
```

但出于某种我不知道的原因，当我运行此代码时，我的计算机“发出哔哔声”。在数组期间，我还将这些保存到 char* 并尝试转换回 int，但我没有得到预期的结果，我得到了一些非常长的值。就像是：

```
float randomValue = 23.14f;

char* charValue = reinterpret_cast<char*>(&randomValue);
//charValue contains "B!¹A" plus a bunch of other (un-initiallized values?) characters, so I'm guessing the value is correct

//Now I'm here 
```

我想将 charValue 转换回 randomValue，我该怎么做？

**编辑**：下面的答案中有有价值的信息，但它们不能解决我的（原始）问题。我正在测试这些类型的转换，因为我正在编写一个代码，我将选择一堆资源文件，如 BMP、JPG、MP3，并将它们保存在一个按某些标准组织的 .DAT 文件中，我还没有完全想通了。

稍后，我将使用这个资源文件来读取这些内容并将其加载到我正在编码的程序（游戏）中。

我仍在考虑的标准，但我想知道是否有可能做这样的事情：

```
//In my ResourceFile.DAT
[4 bytes = objectID][3 bytes = objectType (WAV, MP3, JPG, BMP, etc)][4 bytes = objectLength][objectLength bytes = actual objectData]
//repeating this until end of file 
```

然后在读取资源文件的代码中，我想做这样的事情（未经测试）：

```
ifstream fileReader;
fileReader.open("myFile.DAT", ios::binary);
//file check stuff
while(!fileReader.eof())
{
    //Here I'll load
    int objectID = 0;
    fileReader((char*)&objectID, 4); //read 4 bytes to fill objectID

    char objectType[3];
    fileReader(&objectType, 3); //read the type so I know which parser use

    int objectLength = 0;
    fileReader((char*)&objectLength, 4); //get the length of the object data

    char* objectData = new char[objectLength];
    fileReader(objectData, objectLength); //fill objectData with the data

    //Here I'll use a parser to fill classes depending on the type etc, and move on to the next obj
} 
```

目前我的代码正在处理原始文件（BMP、WAV 等）并将它们填充到类中，我想知道如何将这些文件中的数据保存到二进制数据文件中。例如，我管理 BMP 数据的类有：

```
class FileBMP
{
    public:
        int imageWidth;
        int imageHeight;
        int* imageData;
} 
```

当我加载它时，我调用：

```
void FileBMP::Load(int iwidth, int iheight)
{
    int imageTotalSize = iwidth * iheight * 4;
    imageData = new int[imageTotalSize]; //This will give me 4 times the amount of pixels in the image

    int cPixel = 0;
    while(cPixel < imageTotalSize)
    {
        imageData[cPixel] = 0;     //R value
        imageData[cPixel + 1] = 0; //G value
        imageData[cPixel + 2] = 0; //B value
        imageData[cPixel + 3] = 0; //A value
        cPixel += 4;
    }
} 
```

所以我有这个单维数组，其中包含每个像素 [RGBA] 格式的值，稍后我将使用它在屏幕上绘图。我希望能够以我上面提到的二进制数据格式保存这个数组，然后读取它并填充这个数组。

我认为这样的代码要求太多了，所以我想了解将这些值保存到二进制文件中然后读回以填充它需要知道什么。

对不起，很长的帖子！

**edit2：**我通过第一次编辑解决了我的问题......感谢您提供宝贵的信息，我也知道我想要什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:18:27.897

发生的事情是您将数据的内部表示复制到文件中，然后将其复制回内存中，只要执行写入的程序是使用相同版本的编译器编译的，使用相同的选项. 否则，它可能会或可能不会起作用，这取决于您无法控制的任何数量的事情。

我不清楚您要做什么，但是像 .jpg 和 .bmp 这样的格式通常会指定他们希望不同类型具有的格式，并且您必须尊重该格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:41:46.810

通过使用 & 运算符，您将获得指向变量内容的指针（将其视为内存地址）。

```
float a = 123.45f;
float* p = &a; // now p points to a, i.e. has the memory address to a's contents.
char* c = (char*)&a; // c points to the same memory location, but the code says to treat the contents as char instead of float. 
```

当您为 write() 提供 (char*)&randomValue 时，您只需告诉“获取具有 char 数据的内存地址并从那里写入 sizeof(randomValue) 字符”。您不是在写地址值本身，而是来自该内存位置的内容（“原始二进制数据”）。

```
cout << reinterpret_cast<char*>(&intArray[i]); //the char* value of each one 
```

在这里，您应该提供 char* 类型的数据，以空字符（零）结尾。但是，您改为提供浮点值的原始字节。您的程序可能会在此处崩溃，因为 cout 将输入字符，直到找到终止符 char ——它可能不会很快找到它。

```
float randomValue = 23.14f;
char* charValue = reinterpret_cast<char*>(&randomValue);

float back = *(float*)charValue; 
```

编辑：要保存二进制数据，您只需提供数据并 write() 即可。不要将 << 运算符重载与 ofstream/cout 一起使用。例如：

```
 int values[3] = { 5, 6, 7 };
struct AnyData
{
   float a;
   int b;
} data;

cout.write((char*)&values, sizeof(int) * 3); // the other two values follow the first one, you can write them all at once.
cout.write((char*)&data, sizeof(data)); // you can also save structs that do not have pointers. 
```

如果您要编写结构，请查看*#pragma pack*编译器指令。编译器会将（使用填充）变量对齐到特定大小（int），这意味着以下结构实际上可能需要 8 个字节：

```
#pragma pack (push, 1)
struct CouldBeLongerThanYouThink
{
  char a;
  char b;
};
#pragma pack (pop) 
```

另外，不要自己写指针值（如果结构中有指针成员），因为一旦从文件读回，内存地址将不会指向任何有意义的数据。始终写入数据本身，而不是指针值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:37:50.180

目前还不清楚你真正想要做什么，所以我不能推荐一种解决你真正问题的方法。但是，如果运行该程序实际上会在您的程序中引起哔声或任何其他奇怪的行为，我不会感到惊讶。

```
int* intArray = new int[10];
for(int i = 0; i < 10; i++)
{
    cout << reinterpret_cast<char*>(&intArray[i]);
} 
```

上面返回的内存`new`是未初始化的，但你试图*打印*它，就好像它是一个空终止的字符串。未初始化的内存可能有铃铛字符（*打印*到终端时会发出哔哔声）或任何其他值，包括它可能没有空终止，并且流中的插入运算符将溢出缓冲区，直到找到空或者您的程序在访问无效内存时崩溃。

您的代码中还有其他不正确的假设，例如，假设`int *p = new int[10];`表达式`sizeof(p)`将是架构中指针的大小，而不是整数大小的 10 倍。

# c++ - C++ 中的快速多线程随机序列

> ID：14675411
> 
> 赞同：3
> 
> 时间：2013-02-03T17:54:32.720
> 
> 标签：c++, multithreading, random

我需要在多线程循环中使用随机数，但在每个循环中都需要相同的值，而与哪个线程正在评估该循环无关。

没有多线程我可以做到：

```
seed(1)
for (unsigned int i=0; i<100; i++){
     rand()
} 
```

在循环中，每次调用 rand() 时，它都会返回一个新的伪随机值。现在我想创建相同的多线程列表。

主要原因是我需要与循环顺序无关的相同伪随机数序列（所以更像是基于循环内的“i”）。

注意：我经历了许多“随机”和“多线程”主题，但只找到了如何确保数字始终是随机的解决方案，而不是相反。

**编辑：**

结果应该就好像基于种子创建了一个随机列表。并且应该在索引为“i”的循环中使用该随机列表来获取伪随机值。因此，在循环中，相同的随机数将基于种子位于索引“i”处。（然而，在整个循环中不应该有一个相同的随机数。但是每个程序运行的顺序应该是相同的。与线程数或哪个线程正在评估循环的一部分无关。）

创建该列表（非多线程）并在多线程循环中使用该初始化列表并不是很有效。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:56:51.423

使用具有单独可管理状态的任何非 STDC 随机数生成器。我推荐这个： http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T17:56:58.667

您需要一个基于计数器的随机生成器，而不是同余随机生成器。一个很好的文档解释了它们是如何工作的：

[http://www.thesalmons.org/john/random123/papers/random123sc11.pdf](http://www.thesalmons.org/john/random123/papers/random123sc11.pdf)

# java - 使用哪个 Maven 原型？

> ID：14675419
> 
> 赞同：3
> 
> 时间：2013-02-03T17:55:55.160
> 
> 标签：java, spring, hibernate, maven

我正在开发一个使用**Spring、Hibernate、RMI**框架的分布式应用程序。我正在使用**Eclipse**和**m2eclipse**插件进行开发。

我正在创建**新的 Maven 项目**，但是在浏览可用的**原型**目录时，我对使用哪个原型感到困惑。我的问题是

*   我有什么选择？
*   哪一个是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:16:50.093

我喜欢使用 maven-archetype-webapp 之一。它很简单，不会有任何你不想要的东西。我已经尝试使用已经包含 Spring 的原型，但不可避免地有些东西没有按照我想要的方式设置，而且自己添加 spring 比修改预先存在的 Spring 设置更容易。

我也认为最好自己添加休眠依赖项。

但是，对于添加这些依赖项，本[教程](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)非常有帮助。请务必查看 GitHub 项目并查看它！

# jquery - jQuery - 从提交按钮操作值

> ID：14675420
> 
> 赞同：1
> 
> 时间：2013-02-03T17:56:04.467
> 
> 标签：jquery, forms, function, submit

我有一个带有几个提交按钮的表单。我正在尝试使用 jQuery，以便它可以在“提交”函数上取值并操作它们。

我不擅长jQuery ..所以现在我只来这个...

```
<form id="buttons">
    <input type="submit" id="light1" value="OFF" />
    <input type="submit" id="light2" value="ON" />
    <input type="submit" id="light3" value="ON" />
    <input type="submit" id="light4" value="OFF" />
</form>

<script>
$('#buttons').submit(function() {
 $.get("data.php", { light1: "ON"} );
  return false;
});
</script> 
```

所以问题是我怎么能代替这个

```
 $.get("data.php", { light1: "ON"} ); 
```

提交时如何获取按钮的**ID**和**值**？所以它可能像

```
 $.get("data.php", { *ID OF A BUTTON*: "*VALUE OF BUTTON*"} ); 
```

...并操作它？

**谢谢！**

PS按钮的值是用php和jQuery刷新的，所以不用担心这部分；]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:00:02.097

我认为最简单的解决方案是在按钮元素上捕获事件，而不是在`form`.

```
$('#buttons').on('click', 'input[type="submit"]', function(e) {
     e.preventDefault(); // for safety's sake
     var data = {};
     data[this.id] = this.value;
     $.get("data.php", data);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T18:01:33.717

```
$('#buttons input[type="submit"]').on('click', function(e) {
   e.preventDefault();
   var data = {};
   data[this.id] = this.value;
   $.get("data.php", data );
}); 
```

# ruby-on-rails - Rails/gem/bundle 错误，rails new 和 rake db:create 上的错误

> ID：14675424
> 
> 赞同：0
> 
> 时间：2013-02-03T17:56:30.643
> 
> 标签：ruby-on-rails, ruby, rake, bundle

我决定尝试在我的新笔记本电脑上运行 ruby​​ on rails，因为我已经尝试让它在不太可靠的硬件上运行多次，但出现不同程度的错误。

我通过 RVM 和 Rails 3 安装了 ruby​​ 1.9.2 p320。这是输出`rails new blog`：

```
...
         run  bundle install
/home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- openssl (LoadError)
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/https.rb:92:in `<top (required)>'
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:447:in `ssl'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:216:in `connection_for'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:149:in `fetch'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:177:in `fetch_dependency_remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:135:in `fetch_remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:73:in `specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:234:in `block in remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `each'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:165:in `fetch_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:70:in `specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:191:in `block (2 levels) in index'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:188:in `each'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:188:in `block in index'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/index.rb:9:in `build'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:184:in `index'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:178:in `resolve'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:108:in `resolve_remotely!'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/installer.rb:81:in `run'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/installer.rb:14:in `install'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/cli.rb:230:in `install'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/task.rb:27:in `run'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor.rb:275:in `dispatch'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/base.rb:408:in `start'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/bin/bundle:14:in `block in <main>'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/bin/bundle:14:in `<main>'
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
```

和`rake db:create`：

```
Could not find gem 'jquery-rails (>= 0) ruby' in the gems available on this machine.
Run `bundle install` to install missing gems. 
```

最后，从捆绑安装：

```
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- openssl (LoadError)
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/https.rb:92:in `<top (required)>'
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:447:in `ssl'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:216:in `connection_for'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:149:in `fetch'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:177:in `fetch_dependency_remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:135:in `fetch_remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:73:in `specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:234:in `block in remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `each'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `remote_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:165:in `fetch_specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/source.rb:70:in `specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:191:in `block (2 levels) in index'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:188:in `each'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:188:in `block in index'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/index.rb:9:in `build'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:184:in `index'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:178:in `resolve'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/definition.rb:108:in `resolve_remotely!'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/installer.rb:81:in `run'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/installer.rb:14:in `install'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/cli.rb:230:in `install'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/task.rb:27:in `run'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor.rb:275:in `dispatch'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/base.rb:408:in `start'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/bin/bundle:14:in `block in <top (required)>'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/bin/bundle:14:in `<top (required)>'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/bin/bundle:23:in `load'
        from /home/gossfunkel/.rvm/gems/ruby-1.9.2-p320@global/bin/bundle:23:in `<main>' 
```

我显然对 Rails 不是很有经验，所以我不知道发生了什么。这不是我第一次无法以任何方式运行它。

编辑：这是我的 Gemfile，它只是一个默认值：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:19:18.550

看起来 openSSL（至少是开发库）没有安装。

`rvm pkg install openssl`

`rvm pkg install iconv`

`rvm remove 1.9.2`

`rvm install 1.9.2 -C --with-openssl-dir=$HOME/.rvm/usr,--with-iconv-dir=$HOME/.rvm/usr`

或者，您可以`sudo apt-get install libssl-dev` 重新安装 rvm。

有关更多信息，请参阅：[https](https://rvm.io/packages/openssl/) ://rvm.io/packages/openssl/ & [Rails 3 - 没有要加载的文件 - openssl](https://stackoverflow.com/questions/3464098/rails-3-no-such-file-to-load-openssl)

# linux - bash 中的“批处理”文件

> ID：14675425
> 
> 赞同：0
> 
> 时间：2013-02-03T17:56:31.207
> 
> 标签：linux, bash, shell, ffmpeg, file-extension

我想为一些 bash 命令（convert.sh）制作一个“批处理”文件。我认为最好描述一下情况。我有 $#!^ 吨我想转换成 mp3 的 mp4 视频。`ffmpeg -i /root/name\ of\ video.mp4 /name\ of\ video.mp3`为每个视频转换它们会花费我不合理的时间。更不用说所有文件名都很长而且很复杂，所以有可能出现拼写错误。所以我想知道如何制作一个shell脚本（用于bash），它将获取每个带有扩展名的文件并将其一一`.mp4`转换为具有相同名称的文件。`.mp3`就像它转换一个然后当它完成它移动到下一个。我使用的是轻量级版本的 linux，所以任何第 3 部分软件都可能无法正常工作，所以我需要使用 ffmpeg ...

非常感谢您提供的任何帮助

PS：我似乎无法让网站上的格式化语法正常工作，所以如果 somone 可以为我格式化，也许可以发布一个关于它如何工作的手册的链接，将不胜感激 =)

PPS：我知道应该向超级用户询问有关使用 ffmpeg 命令的问题，但是因为我对特定命令没有太多疑问，而且这更多地与编写 bash 文件有关，我认为这是正确的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:01:23.330

`bash`for 循环应该立即为您完成：

```
SRC_DIR=/root
DST_DIR=/somewhereelse
for FILE in ${SRC_DIR}/*.mp4
do
    ffmpeg -i "${FILE}" "${DST_DIR}/$(basename \"${FILE}\" .mp4).mp3"
done 
```

抱歉 - 我不知道`ffmpeg`命令行选项，所以我只是复制了您帖子中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:06:56.250

1）使用查找：

```
find . -name \*.mp4 | xargs ./my_recode_script.sh 
```

2) my_recode_script.sh - 请参阅[此问题](https://stackoverflow.com/questions/2664740/extract-file-basename-without-path-and-extension-in-bash) ，以便您可以轻松更改输出文件名的扩展名

剩下的就是琐碎的脚本工作：

```
ffmpeg -i $name $new_name # in my_recode_script.sh after changing extension 
```

这对于一次性脚本来说已经足够了，如果你想要一些可重用的东西，用另一个脚本来包装它，它接收到 dir 的路径，从中重新编码和调用其他部分的扩展:)

# ravendb - RavenDB 持久化关系链

> ID：14675430
> 
> 赞同：0
> 
> 时间：2013-02-03T17:56:45.760
> 
> 标签：ravendb

我正在开发一个协作文档编辑工具，它将使用 RavenDB 进行持久化。在我的域中，我有一个看起来像这样的文档类。

```
 public class Document
{      
    public string Id { get; private set; }
    public string Name { get; set; }
    public IRevision CurrentRevision {get; private set; }
    public string Contents {get { return CurrentRevision.GenerateEditedContent(); }}
} 
```

如您所见，该文档有一个 CurrentRevision 属性，该属性指向一个如下所示的 IRevision 对象。

```
public interface IRevision
{
    IRevision PreviousRevisionAppliedTo { get; }
    IRevision NextRevisionApplied { get; set; }
    Guid Id { get; }

    string GenerateEditedContent();
} 
```

所以基本的想法是，文档的内容是通过检查当前修订版来动态生成的，而当前修订版又检查它的父修订版，依此类推。

开箱即用，RavenDB 似乎没有按照我需要的方式处理持久化这个对象引用链。我一直试图通过调用 Session.Store(document) 来保持它，并希望相关修订列表也能被存储。我已经研究了 RavenDB 框架的一些部分，比如自定义序列化程序，但我无法找到一条清晰的路径来让我可以根据需要对数据进行反序列化和重新序列化。有什么好办法来处理这种情况。

# java - 如何用Java制作自己的解释器？

> ID：14675435
> 
> 赞同：0
> 
> 时间：2013-02-03T17:57:00.693
> 
> 标签：java, interpreter

我正在编写在不同站点（如垃圾邮件发送者）上发送消息的 Java 应用程序。当然，这应该包含每个站点的配置。在不同的站点中发送消息的不同逻辑等等......我想为小程序等站点编写配置，并用Java解释它。

如何用Java编写一些伪语言的解释器？或者也许有一些脚本语言可以很容易地被 Java 解释？（也许是 Python？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:01:06.133

您当然不需要从头开始编写...一些选项：

*   [Rhino](https://developer.mozilla.org/en-US/docs/Rhino)是一个免费的开源 JavaScript 解释器，内置于 Java。
*   [JRuby](http://jruby.org/)用Java 解释Ruby 语言。

这应该适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:36:06.473

看看[Java 脚本 API](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/)：

> Java ^(TM) Scripting API 是一个独立于脚本语言的框架，用于从 Java 代码中使用脚本引擎。使用 Java Scripting API，可以用 Java 语言编写可定制/可扩展的应用程序，并将定制脚本语言的选择留给最终用户。Java 应用程序开发人员在开发过程中无需选择扩展语言。

这样，您可以使用统一的 API 将您的应用程序与许多不同的脚本语言集成。

# java - 使用 soot+paddle 进行大型程序分析

> ID：14675438
> 
> 赞同：0
> 
> 时间：2013-02-03T17:57:49.680
> 
> 标签：java, soot

我正在尝试使用 Soot 的桨框架对具有 20KLOC-50KLOC 的 Java 代码的 Android 应用程序进行上下文敏感的“指向”分析。我已修改 soot 以具有多个入口点，因为应用程序没有 main 方法。当我运行分析时，它会引发以下异常

```
Exception in thread "main" java.lang.RuntimeException: Value 65543 was too large in      domain soot.jimple.paddle.bdddomains.MethodDomain!
at jedd.internal.Domain.setBits(Domain.java:62)
at jedd.internal.Jedd.literal(Jedd.java:158) 
```

我在 paddle 源代码中的 SigDomain.jedd 文件中增加了 SigDomain(14) 中的值 14，这导致分析运行时间更长，但最终仍然失败，给出了相同的异常。（我还将 jvm 的堆栈大小和堆大小增加到 1 GB 和 4 GB）。如果我将此值 SigDomain(14) 设置得太大，例如 ~20000，则桨分析甚至不会开始。

我有以下桨叶选项：

```
 opt.put("verbose","true");
    opt.put("bdd","true");
    opt.put("backend","javabdd");
    opt.put("context","kcfa");
    opt.put("k","2");
    opt.put("propagator","auto");
    opt.put("conf","ofcg");
    opt.put("order","32");
    opt.put("q","auto");
    opt.put("set-impl","double");
    opt.put("double-set-old","hybrid");
    opt.put("double-set-new","hybrid");
    opt.put("pre-jimplify","false");

    PaddleTransformer pt = new PaddleTransformer();
    PaddleOptions paddle_opt = new PaddleOptions(opt);
    pt.setup(paddle_opt);
    pt.solve(paddle_opt);
    soot.jimple.paddle.Results.v().makeStandardSootResults(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:58:53.473

作为 Soot 的维护者之一，我建议您通常会在 Soot 邮件列表上获得更快的帮助，因为并非所有人都可能在关注 StackOverflow。Ondrej Lhotak 或许能帮上忙……

上下文相关的分析通常非常昂贵。可能的解决方案是（1）进行需求驱动的上下文相关分析（Soot 也支持；检查命令行选项），（2）构建您自己的手工指针抽象，或（3）排除一些运行时来自分析的库（这将是不合理的）。希望有帮助...

# objective-c - 使用 CATransform3D

> ID：14675440
> 
> 赞同：1
> 
> 时间：2013-02-03T17:58:12.927
> 
> 标签：objective-c, uitableview, catransform3d, catransform3drotate

我正在尝试在 tableview 上进行旋转以倾斜桌子（以产生类似于星球大战开幕式爬行的 3d 文本爬行效果）。

环顾四周后发现这个问题[objective-с CALayer UIView real rotation](https://stackoverflow.com/questions/8271416/objective-calayer-uiview-real-rotation/8271626#8271626)

并且接受的答案似乎做了我想要的，但是当我将代码应用到我的 TableView 时，它什么也不做，表格像往常一样出现。

这是我正在复制的代码：

```
float distance = 50;

CATransform3D basicTrans = CATransform3DIdentity;
basicTrans.m34 = 1.0 / -distance;
_tableView.layer.transform = CATransform3DRotate(basicTrans, M_PI_4, 1.0f, 0.0f, 0.0f); 
```

在创建我的字符串数组（填充 tableView）后，我将它放在我的 viewDidLoad 方法中

我目前在 Controller 中只有三个其他方法：

didReceiveMemoryWarning（项目创建时自动添加）

tableView: numberOfRowsInSelection (用于设置表格视图) tableView: cellForRowAtIndexPath (用于设置表格视图和设置单元格文本形成数组)

我的理解是 tableview 有一个 CALayer，并且 CATransform3D 操纵它以在 3d 空间中表示视图。如果我的理解是正确的，那么我不明白为什么列表会正常显示在屏幕上？我很欣赏我还没有给出我想要的效果的数字，但它们至少应该影响 tableView 在屏幕上的外观。

我还导入了 QuartzCore 等并将其添加到链接框架中

* * *

解决方案是在检查单元格是否为空后，在 - (UITableViewCell *)tableView: cellForRowAtIndexPath: 方法中使用标记为 OLD 答案的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:33:34.187

由于下面建议的方法不起作用，我要尝试的另一件事是将转换应用于`UITableView`的子视图。实际上，`UITableView`is a `UIScrollView`，所以它只是构成表格视图真实内容的子视图的容器。我会尝试这样的事情：

```
for (UIView* subview in tableView.subviews) {
  subview.layer.transform = ...;
} 
```

我从未检查过表视图子视图层次结构，所以我不能说这是否可行，或者您应该将转换应用于仅一个子视图，但我希望这可以引导您朝着正确的方向前进。

旧答案：

您可以尝试设置表格视图的图层`sublayerTransform`而不是“转换”：

> 您通常使用此属性向嵌入图层添加透视和其他查看效果。您可以通过将子层变换设置为所需的投影矩阵来添加透视。此属性的默认值是身份转换。

（[来源](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)）。

我的建议是基于 a`UITableView`在子视图方面具有相当复杂的结构的假设，因此仅转换视图的层可能没有效果。不过，我还没有尝试过，所以我不能保证它会起作用。

# ruby-on-rails - Rails 模型中的多层排序

> ID：14675444
> 
> 赞同：1
> 
> 时间：2013-02-03T17:58:50.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-models

我无法弄清楚如何在我的模型中使用范围方法编写多层排序，该方法可以对模型的属性及其相关子模型的属性进行排序？

更具体地说，我有以下模型，每个模型都是前一个模型的相关子代（为简洁起见，我排除了其他模型方法和声明）：

```
class Course < ActiveRecord::Base 
  has_many :questions
  # would like to write multi-layer sort here 
end 

class Question < ActiveRecord::Base 
  belongs_to :course, :counter_cache => true
  has_many: :answers

end 

class Answer < ActiveRecord::Base 
  belongs_to :question, :counter_cache => true
end 
```

我想首先按`questions_count`（通过我的`counter_cache`）对课程进行排序，**然后**按`answer_count`，最后按`created_at`，并且想知道如何将所有内容串联到一个单一的范围方法中以放入我的`Course`模型中。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:41:04.263

如此处所示（使用连接模型创建范围）：[问题：activerecord (rails3)，使用包含链接范围](https://stackoverflow.com/questions/3393013/problem-activerecord-rails3-chaining-scopes-with-includes)

在这里（使用多列排序）：[Ruby on Rails：如何使用 ActiveRecord 对两列进行排序？](https://stackoverflow.com/questions/3587776/ruby-on-rails-how-do-i-sort-with-two-columns-using-activerecord)

最后在这里（按关联模型排序）：[Rails 3\. 按关联模型排序](https://stackoverflow.com/questions/10336089/rails-3-sort-by-associated-model)

您可以这样实现：

```
scope :complex_sorting, lambda {
    joins(:questions)
    .order('questions_count DESC, question.answers_count DESC, created_at DESC')
} 
```

# dart - indexed_db on.success.add() 已弃用 - 新语法

> ID：14675448
> 
> 赞同：0
> 
> 时间：2013-02-03T17:59:27.587
> 
> 标签：dart

旧的“on.success.add()”的新等效语法是什么？

我认为它是 onSuccess.first.then()，但是这给了我似乎只是选择的第一条（例如）记录。例如，也有类似的情况。html 元素“on.click.add()”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:39:38.300

onSuccess 是一个流。如果您想接收多个元素，只需“监听”它们：onSuccess.listen。

# java - 设置 UI 内容只添加最后一行

> ID：14675450
> 
> 赞同：0
> 
> 时间：2013-02-03T17:59:31.423
> 
> 标签：java, user-interface

基本上我在这里所做的是将文本文件的内容导入用户输入字段（其中有 7 个。我运行一个循环来遍历它们以获取命令 [i]。代码在控制台中运行良好，但它不适用于 GUI，因为它只输入每个字段的最后一行。你知道问题是什么吗？这是 UI：

[http://imageshack.us/f/692/21778853.jpg](http://imageshack.us/f/692/21778853.jpg)

如您所见，它可以很好地打印到控制台中，但是当我通过单击 GUI 上的导入来导入数据时，它只会放置 txt 文件的最后一个命令

我的代码是：

```
 final JTextField Command[];//Create one dimensional array 
    Command = new JTextField[8];//Declare Command as a JTextField 
    for (int i = 1; i < 8; i++)//Run the loop through each selection 
    { 
        Command[i] = new JTextField(i);//Read through each text field
    }
    //Add user input fields including their absolute position on the panel
    Command[1].setText("Please enter the commands...");//Starting text
    Command[1].setBounds(121, 13, 236, 25);//Set the position of the text field
    getContentPane().add(Command[1]);//Add this text field to the content
            Command[2].setBounds(121, 47, 236, 25);/fsdfsdf
    getContentPane().add(Command[2]);

    Command[3].setBounds(121, 83, 236, 25);/fasdfasd
    getContentPane().add(Command[3]);

    Command[4].setBounds(121, 119, 236, 25);/fsfasdasdf
    getContentPane().add(Command[4]);

    Command[5].setBounds(121, 155, 236, 25);
    getContentPane().add(Command[5]);

    Command[6].setBounds(121, 191, 236, 25);
    getContentPane().add(Command[6]);

    Command[7].setBounds(121, 227, 236, 25);
    getContentPane().add(Command[7]);  

            //IMPORT FILE   
    JMenuItem Import = new JMenuItem("Import");
    File.add(Import);
    Import.addActionListener(new ActionListener() {//Call up ActionListener function
        public void actionPerformed(ActionEvent arg0) {//Event handler
            try {
                //use buffering, reading one line at a time
                //FileReader always assumes default encoding is OK!
                BufferedReader input = new BufferedReader(new FileReader("W:\\EclipsePortable\\Data\\workspace2\\" +
                                        "RobotController\\src\\RobotController\\Import commands.txt"));
                try {
                    String line = null; //not declared within while loop
                    while (( line = input.readLine()) != null) {
                        System.out.println(line);//Print the lines
                        for(int i = 1; i < 8; i++) {
                        Command[i].setText(line);
                    }
                }}
                finally {
                    input.close();
                }
            }
            catch (IOException ex){
                ex.printStackTrace();
            }
    }});` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:04:01.830

因此，在您的文件导入代码中，您正在执行此操作...

```
for(int i = 1; i < 8; i++) {
    Command[i].setText(line); 
```

它将当前文本行应用于所有字段（所有字段的同一行文本），这意味着当您完成读取文件时，您只得到文件的最后一行。

相反，我会保留对字段索引的引用并在读取的每一行中递增

**添加示例**

```
 String line = null; //not declared within while loop
                int fieldIndex = 0;
                while (( line = input.readLine()) != null) {
                    System.out.println(line);//Print 
                    Command[fieldIndex].setText(line);
                    fieldIndex++
                    if (fieldIndex > 7) {
                        break;
                    } 
```

# javascript - Javascript OnClick 事件

> ID：14675451
> 
> 赞同：1
> 
> 时间：2013-02-03T17:59:32.407
> 
> 标签：javascript, public-html

这是我正在构建的简单货币转换器的一些代码。脚本运行良好，`calculate()`但`clear()`代码拒绝工作，而且看起来一样？？

```
<a href="#" OnCLick="calculate();">US - CDN</a>
<a href="#" OnCLick="clear();">Clear</a>

<script type="text/javascript">
    function clear() {
            document.getElementById('us-cdn1').innerHTML = '';
    }
</script>
<script type="text/javascript">
    function calculate() {
        var amount = parseFloat(document.getElementById("amount").value);
        var result = document.getElementById("amount");
            result.value = (amount).toFixed(2);
        var result = document.getElementById("amount1");
            result.value = (amount * .9861932938856016).toFixed(2); 
            document.getElementById('us-cdn').innerHTML = 'US';
            document.getElementById('us-cdn1').innerHTML = 'CDN';
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:02:05.240

`clear()`是一个公共函数。将其更改为：

```
<a href="#" onclick="clearField();">Clear</a>

<script type="text/javascript">
function clearField() {
        document.getElementById('us-cdn1').innerHTML = '';
}
</script> 
```

# php - 使用 php 正则表达式查找包含单词的整行

> ID：14675452
> 
> 赞同：3
> 
> 时间：2013-02-03T17:59:42.043
> 
> 标签：php, regex, line, preg-match-all

我想在文本中搜索单词“会话”。但我想检索出现这个词的整行。到目前为止，我已经想出了这个。

```
$pattern="[^\\n]*session[^\\n]*";
preg_match_all($pattern,$content, $matches, PREG_OFFSET_CAPTURE); 
```

但我收到一个错误“未知修饰符'*'”。任何想法如何制作这样的正则表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T18:01:12.840

您的正则表达式缺少分隔符，因此您的错误：

```
$pattern = "/[^\\n]*session[^\\n]*/";
// or, with single quotes, you don't need to escape \n
$pattern = '/[^\n]*session[^\n]*/'; 
```

如果我正确地解释了您的意图，那么您将尝试匹配零个或多个*而不是*换行符，然后是“会话”，然后是零个或多个*而不是*换行符。

一个更简单（可能更正确）的模式是这样的：

```
$pattern = '/^.*\bsession\b.*$/m'; 
```

也就是说，从行首 ( `^`) 匹配 0 个或多个任意字符 ( `.*`)、单词边界 ( `\b`)、单词“会话”、另一个单词边界、另一系列字符和行尾 ( `$`)，匹配多行（`m`修饰符）。

您已经重新发明了锚 (`^`和`$`)，`[^\n]`这有点不明显，但错过了单词边界，这可能是不希望的，因为您正在匹配[任何*包含*单词 "session" 的单词](http://www.scrabblefinder.com/contains/session/)。也就是说，你的会匹配包含“sessions”或“possessions”或“obsessions”或“abcsessionxyz”的行，而我的不会；如果不希望这样做，您可以删除`\b`' 的让步`/^.*session.*$/m`，我们的模式将或多或少等效。

这是一个概念验证，找到包含单词的整个中间行：

```
<?php

$lines ="This is a test
of skipping the word obsessions but
finding the word session in a
bunch of lines of text";

$pattern = "/^.*\bsession\b.*$/m";

$matches = array();
preg_match($pattern, $lines, $matches);

var_dump($matches); 
```

输出：

```
array(1) {
  [0]=>
  string(29) "finding the word session in a"
} 
```

您的模式会找到“跳过单词强迫症但是”这一行。

# perl - Perl/Tk 未在 OS X Mountain Lion 上通过 CPAN 构建

> ID：14675457
> 
> 赞同：0
> 
> 时间：2013-02-03T18:00:43.620
> 
> 标签：perl, cpan, tk

我无法在 OS X Mountain Lion 上通过 CPAN 安装 Perl/Tk。它在谷歌没有帮助的文件中出错：

```
/Users/villadelfia/perl5/perlbrew/perls/perl-5.17.8/bin/perl5.17.8 /Users/villadelfia/perl5/perlbrew/perls/perl-5.17.8/lib/5.17.8/ExtUtils/xsubpp  -typemap /Users/villadelfia/perl5/perlbrew/perls/perl-5.17.8/lib/5.17.8/ExtUtils/typemap -typemap /Users/villadelfia/Downloads/Tk-804.030/Tk/typemap  IO.xs > IO.xsc && mv IO.xsc IO.c
Warning: Found a 'CODE' section which seems to be using 'RETVAL' but no 'OUTPUT' section. in IO.xs, line 235
cc -c  -I.. -I/usr/X11R6/include -I/usr/local/include/freetype2 -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -O3   -DVERSION=\"804.03\" -DXS_VERSION=\"804.03\"  "-I/Users/villadelfia/perl5/perlbrew/perls/perl-5.17.8/lib/5.17.8/darwin-2level/CORE"   -Wall -Wno-implicit-int -Wno-comment -Wno-unused -D__USE_FIXED_PROTOTYPES__ IO.c
IO.xs:210:10: error: invalid argument type 'void' to unary expression
     if (!SvUPGRADE(buf, SVt_PV))
         ^~~~~~~~~~~~~~~~~~~~~~~
1 error generated.
make[1]: *** [IO.o] Error 1
make: *** [subdirs] Error 2 
```

如您所见，我也运行 perlbrew。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:51:54.590

从 5.17.7 发行说明：

> SvUPGRADE() 不再是一个表达式。最初，这个宏（及其底层函数 sv_upgrade()）被记录为布尔值，尽管实际上它们总是在错误时发牢骚并且从不返回 false。2005 年更新了文档以指定一个 void 返回值，但为了向后兼容，SvUPGRADE() 始终返回 1。这现在已被删除，并且 SvUPGRADE() 现在是一个没有返回值的语句。
> 
> 所以这现在是一个语法错误：
> 
> ```
> if (!SvUPGRADE(sv)) { croak(...); } 
> ```
> 
> 如果您有这样的代码，只需将其替换为
> 
> ```
> SvUPGRADE(sv); 
> ```
> 
> 或者为了避免使用较旧的 perls 的编译器警告，可能
> 
> ```
> (void)SvUPGRADE(sv); 
> ```

它已经被[报道](https://rt.cpan.org/Public/Bug/Display.html?id=82677)了。

# asp.net - 样式元素中的淘汰赛绑定

> ID：14675461
> 
> 赞同：1
> 
> 时间：2013-02-03T18:01:11.863
> 
> 标签：asp.net, asp.net-mvc-4, knockout.js

这是我第一个使用 .net mvc 测试 knockout.js 的项目。到目前为止，看起来很酷。

我有这样的看法：

```
<div class="container">
<div data-bind="foreach: viewModel.items">
    <div class="well well-small">
        <div class="row">
            <div class="span9">
                <h3><span data-bind="text: Name"></span><small>&nbsp;Registered by <span data-bind="text: RegisteredBy"></span>at <span data-bind="text: Registered"></span></small></h3>
                <p><span data-bind="text: Description"></span></p>
            </div>
        </div>
        <div class="row">
            <div class="span6">
                <div class="progress">
                    <div class="bar" data-bind="style: {width: progress }"></div>
                </div>
            </div>
            <div class="span3">
                <span data-bind="text: progress"></span>% done <a class="btn btn-mini" href="#"><i class="icon-plus"></i>add 10%</a>
            </div>
        </div>
    </div>
</div> 
```

然后我这样做：

```
<script>
$(document).ready(function () {
    var initialData = @(Html.Raw(Json.Encode(Model)))
    viewModel = { items: ko.observable(initialData) };

    ko.applyBindings(viewModel);

}); 
```

所有这些都有效，除了我尝试像这样绑定 data-bind="style: {width: progress }"

我很肯定进度字段正在工作，因为我在下面的范围内得到了值。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:10:45.407

您需要指定一个单位。类似于`{width: progress() + 'px'}`或创建一个计算的 observable，它与单位一起返回它。

# image - 使用 Mathematica 为 3D 表面着色

> ID：14675463
> 
> 赞同：0
> 
> 时间：2013-02-03T18:01:18.357
> 
> 标签：image, colors, wolfram-mathematica

我有3D点云。使用带有 ListPlot3D 函数的 Mathematica 很容易绘制它们。上色对我来说有点困难。我想得到这样的结果：

```
SphericalPlot3D[
 1 + Sin[-5 \[Phi]] Sin[-5 \[Theta]]/10, {\[Theta], 
  0, \[Pi]}, {\[Phi], 0, 2 \[Pi]}, 
 ColorFunction -> (ColorData["Rainbow"][#6] &), Mesh -> None, 
 PlotPoints -> 30, Boxed -> False, Axes -> False] 
```

因此，该颜色将显示距中心的径向距离。有可能做到吗？我也有非常接近球形的数据云，更准确地说是带有凸起的球形帽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:55:16.417

你可以做 ：

```
nPoints = 10^3;
SeedRandom[7];
data = CoordinateTransformData["Spherical" -> "Cartesian", "Mapping", #] & /@ 
  Transpose[{1 + RandomReal[{-0.15, 0.15}, nPoints], RandomReal[{0, Pi}, nPoints], RandomReal[{-Pi, Pi}, nPoints]}];

ListSurfacePlot3D[data, 
 ColorFunction -> (ColorData["Rainbow"][EuclideanDistance[{0, 0, 0},{#1, #2, #3}]] &), 
 ColorFunctionScaling -> False, Mesh -> None, Boxed -> False, Axes -> False] 
```

![阴谋](../Images/cf2f012cad4d4662066811865190c462.png)

# cuda - 在 cuda 中，如何将整数发送到常量内存？

> ID：14675470
> 
> 赞同：0
> 
> 时间：2013-02-03T18:01:59.223
> 
> 标签：cuda

> **类似的帖子（但不完全相同）**
> [CUDA - 将 CPU 变量传输到 GPU __constant__ 变量](https://stackoverflow.com/questions/6056934/cuda-transfering-cpu-variables-to-gpu-constant-variables)

在 CUDA 中，我使用下面的代码将整数复制到常量内存，但它显示了一个不同的数字！为什么？

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <stdio.h>
#include "cuPrintf.cu"

__constant__ int num;
__global__ void kernel(int *a,int *k){
cuPrintf("\nnum=%d\n",num);
}
void main(){
 int x;
 printf("Please enter the number you want to find it on array:");
 scanf("&%d",&x);
 cudaMemcpyToSymbol( &num, &x,sizeof(int)*1, 0, cudaMemcpyHostToDevice);

 int wait;
 scanf("&%d",&wait);
} 
```

# jquery - JQueryMobile - 过渡前动态加载页面

> ID：14675473
> 
> 赞同：1
> 
> 时间：2013-02-03T18:02:13.367
> 
> 标签：jquery, ajax, dom, jquery-mobile, transitions

我目前正在尝试使用 jquerymobile + phonegap 应用程序。我的问题集中在 jquerymobile 框架上。

我想切换到一个动态加载的页面（通过 jsonp），并且我想在转换中看到加载的内容。目前它正在进行过渡，然后显示内容。（因为我正在使用 pagebeforeshow 事件将数据添加到 dom。）

在触发 changePage 事件之前，我通过 jsonp 加载了内容。所以我的数据已经在那里了。现在我需要在执行转换之前将该数据放入 dom 中。我试图在jqm的changePage函数中找到合适的位置来触发一个事件，并在过渡之前触发它。但是内容没有显示在过渡中。

这就是我加载列表的方式（效果很好）

```
function getList() {
    $.mobile.loading( 'show');
    var req = $.ajax({
    url : serviceURL + 'canteenParser2.php?type=getAllCanteens&callback=?',
    dataType : "jsonp",
    async : false,
    cache: false,
    timeout : 10000
});

req.success(function(data) {
    globalAjaxData = data;
    $.mobile.changePage('mensa.html',{showLoadMsg: false,
                         transition: 'slidefade'}
    );

});

req.error(function() {
    alert('Oh noes!');
});
} 
```

这就是我显示数据的方式：

```
function showList()
{
mensaList = globalAjaxData;
$.each(mensaList, function(index, mensa) {
    $('#mensaList').append('<li><a href="mensadetails.html?id=' + mensa.id + '" data-transition="slidefade">' +
                '' + mensa.name +  '</a></li>');
    });
$('#mensaList').listview('refresh');

} 
```

我目前正在调用 showList() 方法：

```
$('#mensaListPage').live('pageshow',function(event){
    showList();
}); 
```

正如我提到的，我尝试了例如 pageload 事件和 pagebeforeshow 事件。有没有人建议如何实现所需的行为？

问候莫里茨

**更新**

我发现我需要在 ajax 加载调用之后、转换之前调用 showList Methode：

```
$$('#mensaListPage').live('pagebeforeshow',function(event){
showList();
}); 
```

这适用于幻灯片过渡，但不适用于幻灯片淡入淡出过渡。（但幻灯片过渡最终在我的移动应用程序中闪烁。因此，我使用了幻灯片淡入淡出。）

希望有机会解决其中一个问题。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:55:02.653

`jsonp`请求不支持同步操作，

在第二页中加载您的数据。它将运行良好。

# php - 通过 CodeIgniter 中的函数传递 weber API 信息？

> ID：14675474
> 
> 赞同：2
> 
> 时间：2013-02-03T18:02:19.357
> 
> 标签：php, api, codeigniter, aweber

所以，我正在尝试连接到 codeigniter 中的 Aweber API。我有一个函数可以检索帐户的所有相关数据，但我仍然必须使用 API 将这三行放在每个函数的开头

```
list ($consumerKey, $consumerSecret, $accessKey, $accessSecret, $account_id) = $this->get_aweber_info();

$aweber = new AWeberAPI($consumerKey, $consumerSecret);
$account = $aweber->getAccount($accessKey, $accessSecret); 
```

有没有可能让它更短？我只想说

```
get_aweber_connection(); 
```

我尝试了几种不同的方法，但都没有奏效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:20:12.353

您始终可以创建一个助手并从您想要的任何地方调用它，但我建议创建一个库来处理所有 Aweber api 调用并将初始化其构造函数上的所有内容。

这样，您只需加载库，然后与 Aweber 交互，您就可以在一个类中进行所有 Aweber 调用。

# c# - 什么是事件处理程序检查不为空？

> ID：14675475
> 
> 赞同：0
> 
> 时间：2013-02-03T18:02:24.553
> 
> 标签：c#, events, delegates, event-handling, observer-pattern

在所有问题答案的代码中：

*   [带有委托的 C# 观察者/可观察的超级简单示例](https://stackoverflow.com/questions/1249517/super-simple-example-of-c-sharp-observer-observable-with-delegates)

有一个`EventHandler handler`不为空的检查

```
EventHandler handler = this.somethingHappened;  
if (handler != null)  
{  
   handler(this, EventArgs.Empty);  
} 
```

订阅：

```
 observable.SomethingHappened += observer.HandleEvent; 
```

以及互联网上的文章、教程、示例等。
虽然我无法掌握这个处理程序何时以及如何碰巧为空。

我已经阅读了类似问题的答案：

*   [在事件处理程序中使用 null 检查](https://stackoverflow.com/a/672666/2031316)

但我仍然无法理解这种例子和插图是`handler`如何发生的`null`。

谁能解释一下这段代码中的处理程序是如何发生的`null`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:05:29.493

很简单，如果尚未将委托分配给特定的事件处理程序，它将为 null，并且尝试调用它会导致 NullReferenceException。

在调用它之前进行空检查可防止发生此 NullReferenceException。

# javascript - 如何合并手风琴和 div 滑块？

> ID：14675477
> 
> 赞同：1
> 
> 时间：2013-02-03T18:02:27.187
> 
> 标签：javascript, jquery, slider, gallery, accordion

我正在尝试构建一个手风琴滑块和一个`div`滑块，但有很多问题。例如，我需要一个带有箭头的常规幻灯片放映来左右滑动多列，以及通过鼠标单击展开其中一列的能力。以下是我设计的视觉示例：

[示例 #1](http://joncookdesign.com/cd1.jpg)

[示例 #2](http://joncookdesign.com/cd2.jpg)

我试图修改 Kwicks 水平手风琴滑块脚本。

任何关于构建它的帮助都会很棒，或者如果你知道一个预制的脚本可以做我正在寻找的东西，请按我的方式发送。

谢谢，

乔恩

# c - 重新声明没有链接的变量

> ID：14675479
> 
> 赞同：1
> 
> 时间：2013-02-03T18:02:34.440
> 
> 标签：c

我在这里有我正在尝试的示例代码。

```
char test[256], test1[256];

char *combine =("Hello '%s', '%s'",test,test2); 
```

如何将我的测试 test1 的值解析为我的 char *combine？我收到重新声明我的 test 和 test1 没有链接的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:03:49.753

查看[sprintf](http://www.cplusplus.com/reference/cstdio/sprintf/)。它将允许您组合两个字符串。

所以，像：

```
char combine[LARGE_ENOUGH_NUMBER_HERE]
sprintf(combine, "Hello %s %s", test1, test2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:13:12.040

该声明：

```
char *combine = ("Hello '%s', '%s'", test, test2); 
```

一点也不像C。如果要写入格式化字符串，则应使用`sprintf`family （来自标准 header `<stdio.h>`）。您可以在整个 Web 上查看文档。如果您使用 C99，最好使用`snprintf`，这样更安全。

```
// C99

#include <stdio.h>

char combine[1024]; /* Should be long enough to hold the string. */
snprintf (combine, sizeof combine, "Hello '%s', '%s'", test, test2); 
```

# xamarin.ios - 如何将大量资源文件添加到 monotouch 项目中？

> ID：14675480
> 
> 赞同：0
> 
> 时间：2013-02-03T18:02:45.207
> 
> 标签：xamarin.ios, include, project, xamarin

我在一个目录中有很多 png 图像。如果更新，我已将其作为内容/复制添加到项目中。我可以毫无问题地从应用程序加载它们。

但是，该项目需要大量时间来编译。如果我对代码做一点改动，项目就会重新编译。这需要很多时间。

我尝试添加另一个项目，将文件添加到新项目中，但是我无法从应用程序访问文件。

有什么解决办法吗？

当然，当我将应用程序调试到 iPad 中时，上传+安装需要很多时间。这些文件永远不会改变，所以......有什么方法可以一次复制所有内容吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:11:55.597

我刚刚发现了一个技巧。当您从 MonoDevelop 环境上传和安装时，monotouch 似乎不会删除目录，所以：

1.  添加您的文件夹和所有文件并将它们标记为内容
2.  为 iPhone/iPad 构建您的项目并从 MonoDevelop 运行它
3.  从您的项目中删除您的数据文件夹
4.  清洁溶液
5.  在您的代码中进行您需要的任何更改，您的数据会重新存储在设备中！！！

这一切都改变了！！！在此之前，当我需要对我的代码进行小幅更改时，我需要等待大约 15 分钟才能构建和上传。现在只有1分钟！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:50:47.933

1.  将图像放在单独的类库中
2.  将所有文件标记为嵌入式资源
3.  为每个资源添加一个逻辑名称（在您的项目文件中）

```
<EmbeddedResource Include="Images\Folder\Filename.ext">
    <LogicalName>LogicalNameForImage</LogicalName>
</EmbeddedResource> 
```

4\. 加载资源为

```
UIImage.FromResource(yourAssembly, "LogicalNameForImage"); 
```

嵌入式资源按需加载，而不是在程序集加载时加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:15:19.537

在 MonoDevelop 的未来版本中（我的补丁没有及时发布到即将发布的 4.0 版本），这将不再是问题。

目前在 MonoDevelop 3.x 中发生的情况是，在构建项目时，它只会将已更改的图像复制到应用程序包中，*但是*，在构建之后，MonoDevelop 会调用与 Xcode 一起安装的脚本，该脚本会`iphone-optimize`扫描整个应用程序目录并用于`pngcrush`粉碎所有图像（它还将所有 plist 文件转换为二进制 plist）。*如果您有很多图像，这*就是导致构建时间如此缓慢的步骤。

就在 4.0 分支关闭以进行 QAing 之后，我编写了一个补丁来避免调用`iphone-optimize`脚本的需要。相反，MonoDevelop 将做的是它只会直接调用*已*`pngcrush`更改的图像，将正确的应用程序目录位置作为输出参数传递给，这样我们就可以避免额外的文件复制。*`pngcrush`*

 *根据我自己的测试，这*极大*地缩短了具有大量图像文件的项目的构建时间。

同时，您*可以*做的是备份`iphone-optimize`脚本（应该位于下面的某个位置`/Applications/Xcode.app`），然后修改它以不破坏图像文件。然后，一旦你完成了这些，去预粉碎你项目中的所有 png 文件。

（注意：当带有我的补丁的 MonoDevelop 最终发布时，它还可以选择为已经预先粉碎图像的开发人员禁用调用 pngcrush）。*

# c - C - 将结构内的指针重新分配给结构外的指针

> ID：14675481
> 
> 赞同：0
> 
> 时间：2013-02-03T18:02:45.980
> 
> 标签：c, arrays, pointers, struct

我有两个指针，每个指针指向一个不同的数组。其中一个指针位于结构内部，如下所示：

```
typedef struct
{
    int     N;    /* Number of Elements in array */
    double *c;    /* Pointer to an array         */
    /* Other members....  */
} CS; 
```

该结构由以下方式初始化：

```
CS->N = n; /* n is an integer of an initially unknown size */
CS->c = (double *)malloc(n * sizeof(double)); 
```

结构中的指针`CS->C`, 包含我不再关心的数据。

我的另一个指针定义如下：

```
double *alpha;
alpha = (double *)malloc(CS->N * sizeof(double)); 
```

我需要用 替换 的`CS->C`内容`alpha`。我知道我可以做一些天真的事情，比如：

```
for (i=0;i<CS->N;i++) /* i is an integer */
    CS->c[i] = alpha[i]; 
```

我也可以使用 memcpy，如下所示：

```
memcpy(CS->c,alpha,CS->N * sizeof(double)); 
```

我的理解是，这两种方法都会将位于`alpha`的内存中的内容复制到`CS->C`. `CS->C`这是一个非常昂贵的操作，简单地更改to的分配会更有意义`alpha`。

我怎样才能做到这一点？

我试图通过 like 重新分配指针`CS->C = &alpha`，但这给了我以下警告“来自不兼容的指针类型的分配”。

注意：这是在完全符合标准的情况下使用 ANSI C89，即编译器选项为：`-Wall -pedantic -ansi`

**编辑 1**
通过执行以下操作 释放`CS->c`并分配它`alpha`：

```
free(CS->c);
CS->c = alpha; 
```

不起作用。它会导致每个条目都`CS->c`等于`0.0`并导致我的程序段错误。

**编辑 2**
我想我意识到为什么我第一次编辑中建议的方法不起作用。`alpha`是一个临时指针，在函数内部创建和初始化，因此一旦该函数退出，所占用的内存将被`alpha`“释放”。由于`CS->c`指向该内存，它也被释放。在这个发现之后，我想我会重新编写我的代码，这样`alpha`和`CS-c`最初被交换，这样当它们再次切换时，最终顺序将是正确的。谢谢大家的宝贵意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:09:47.597

只需复制指针

```
CS->C = alpha; 
```

Alpha 是指向 double 的指针，CS->C 也是，类型匹配，您只需更改指针。

/!\ 别忘了释放旧的 CS->C ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:07:28.457

释放旧指针并直接分配新指针。（不是新指针的地址）

> 结构中的指针`CS->c`, 包含我不再关心的数据。
> 
> 我的另一个指针定义如下：

```
double *alpha;
alpha = malloc(CS->N * sizeof(double)); 
```

...

```
free (CS->c);
CS->c = alpha ; alpha=NULL; 
```

# c# - 静态和动态如何创造奇点？

> ID：14675482
> 
> 赞同：0
> 
> 时间：2013-02-03T18:02:55.877
> 
> 标签：c#, computer-science

在[C# 编程语言中，](https://rads.stackoverflow.com/amzn/click/com/0321741765) Chris Sells 指出：

> 我开始怀疑以下字符串既有效又有意义的任何语言：

```
class Foo
{
    public static dynamic DoFoo()
    {
        //...
    }
} 
```

> 当然这意味着 DoFoo 方法是一种类型方法（与实例方法相反）并且返回值的类型在运行时之前是未知的，但是很难不将 DoFoo 同时读取为静态和动态的，并且担心出现奇点。

我相信克里斯的意思是......“我们不想产生一种暗示方法属于一种类型并且类型可以是任何东西的语言”......但我找不到任何证据证明这一点或这种设计的影响。

我发现了[技术奇点](http://en.wikipedia.org/wiki/Technological_singularity)，但这似乎无关。在这种情况下，克里斯所说的“奇点”是什么意思？为什么奇点很麻烦？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:26:52.320

我认为在这种情况下，克里斯假设了静态一词的另一种含义，这意味着它与动态截然相反。

这种矛盾的方法签名可能会鼓励黑洞或其他意想不到的物理现象的出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T18:26:32.680

我的猜测是，“静态”和“动态”这两个相反的概念的组合在那里听起来令人困惑，甚至有点滑稽。尽管这两个概念都涉及不同的事物，实际上可以结合起来，但在计算机科学中，静态和动态通常是对立的。

我当时认为这应该是一个笑话，通过允许一种语言结合相反的概念，你创建了一种拥有任何东西（因为它拥有一个矛盾）的语言，他称之为“奇点”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T18:38:12.220

我认为作者在这里只是厚颜无耻。

他似乎在暗指[引力奇点](http://en.wikipedia.org/wiki/Gravitational_singularity)，或者换句话说，看到一种既是一物又是对立物的方法可能会让人担心使用它会导致地球被吞噬成黑洞.

# java - java编程错误

> ID：14675484
> 
> 赞同：1
> 
> 时间：2013-02-03T18:02:57.327
> 
> 标签：java

> **可能重复：**
> [不支持的主要 .minor 版本 51.0](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)

我做了一个简单的java程序

```
class MyProg{    
  public static void main(String args[]){    
  System.out.println("Hello World");      }
} 
```

但是当我尝试运行它时会发生这种情况

```
wil@wil-ThinkPad-T42:~/Dropbox/java$ javac -g MyProg.java
wil@wil-ThinkPad-T42:~/Dropbox/java$ java MyProg
Exception in thread "main" java.lang.UnsupportedClassVersionError: MyProg : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: MyProg. Program will exit. 
```

程序有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:06:41.563

您的 Java 工具链似乎是错误的。该程序对我来说看起来不错。我认为这有帮助：

[http://notroswell.com/technical-articles/java-version-mismatch/](http://notroswell.com/technical-articles/java-version-mismatch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:05:40.657

您正在使用比用于编译该类的编译器更旧的 Java 虚拟机执行您的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:09:30.980

`java.lang.UnsupportedClassVersionError`发生的原因是编译时 JDK 较高，而运行时 JDK 较低。

显示的版本号描述了类文件兼容的 JRE 版本。

```
J2SE 7 = 51,
J2SE 6.0 = 50,
J2SE 5.0 = 49,
JDK 1.4 = 48,
JDK 1.3 = 47,
JDK 1.2 = 46,
JDK 1.1 = 45 
```

# c# - 序列化对象的 ArrayList

> ID：14675485
> 
> 赞同：0
> 
> 时间：2013-02-03T18:03:05.587
> 
> 标签：c#, xml, object, serialization, arraylist

我有一个存储自定义对象的 ArrayList。我想将该 ArrayList 序列化为字符串，以便可以将其保存在应用程序设置中。

这个问题看起来可以解决它，但在java中。而且我对 XML 并不聪明，所以有人可以帮忙吗？ [序列化 Date 对象类型的 ArrayList](https://stackoverflow.com/questions/11615206/serialize-an-arraylist-of-date-object-type)

我有我的 ArrayList 设置：

```
...
MyObject tempObj = new MyObject("something",1,"something");
MyCollection.Add(tempObj);
... 
```

我最初有这个。它输出字符串，但对象不存在：

```
 private string SerializeArrayList(ArrayList obj)
    {
            System.Xml.XmlDocument doc = new XmlDocument();
            Type[] extraTypes = new Type[1];
            extraTypes[0] = typeof(MyObject);
            System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(ArrayList), extraTypes);
            System.IO.MemoryStream stream = new System.IO.MemoryStream();
            try
            {
                serializer.Serialize(stream, obj);
                stream.Position = 0;
                doc.Load(stream);
                return doc.InnerXml;
            }
            catch { throw; }
            finally
            {
                stream.Close();
                stream.Dispose();
            }
} 
```

编辑：代码请求

```
 public class MyObject
    {
        private string eN;      
        private Boolean bE;          
        private int min;         
        private Boolean bot;       
        private string onE;         

        public MyObject(string na, Boolean b)
        {
          ...
        }

        public MyObject()
        {
        }

        public string GetSomething()
        {
            ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T22:43:10.250

我测试了你的代码，它似乎工作正常，只要你有`[Serializable]`你的对象。

此外，如果您尝试对字段进行序列化，则必须将它们设为公共属性。

我的测试：

```
 ArrayList array = new ArrayList();
    Rules tempObj = new Rules { onE = "Value", min = 45, eN = "Value" };
    array.Add(tempObj);
    string result = SerializeArrayList(array);

    private string SerializeArrayList(ArrayList obj)
    {
        XmlDocument doc = new XmlDocument();
        XmlSerializer serializer = new XmlSerializer(typeof(ArrayList), new Type[]{typeof(Rules)});
        using (MemoryStream stream = new System.IO.MemoryStream())
        {
            try
            {
                serializer.Serialize(stream, obj);
                stream.Position = 0;
                doc.Load(stream);
                return doc.InnerXml;
            }
            catch (Exception ex)
            {
            }
        }
        return string.Empty;
    } 
```

目的：

```
[Serializable]
[XmlType(TypeName = "Rules")]
public class Rules
{
    // Make fields propertys so they will be serialized
    public string eN { get; set; }      //Name
    public Boolean bE { get; set; }     //Whether blocked entirely
    public int min { get; set; }        //Minutes they are allowed if blocked
    public Boolean bot { get; set; }    //Create notification if allowance exceed
    public string onE { get; set; }     //Nothing or CLOSE Process

    public Rules(string na, Boolean b)
    {

    }

    public Rules()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T20:54:58.987

我遇到了类似的问题，有一个很棒的程序，叫做 SharpSerializer，可以通过 Nuget 获得。它将很容易地处理您的 ArrayList，只需键入代码：

```
 SharpSerializer mySerializer = new SharpSerializer();
 mySerializer.Serialize(ArrayList, "filetosaveto.xml"); 
```

这是网站的链接，它是免费的，所以不用担心支付任何费用：

[http://www.sharpserializer.com/en/index.html](http://www.sharpserializer.com/en/index.html)

# android - Android XML标签的完整定义的位置？

> ID：14675491
> 
> 赞同：1
> 
> 时间：2013-02-03T18:03:52.600
> 
> 标签：android

我知道这是一个古老的问题，并且已经有一些非常令人印象深刻的答案，就像[这个](https://stackoverflow.com/questions/3441396/defining-custom-attrs)一样。

所以最接近的答案是源代码中的[attrs.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/attrs.xml)或 SDK 参考中的[android.R.styleable](https://developer.android.com/reference/android/R.styleable.html)类。但是我发现它仍然不完整，例如`<RadioButton>`标签。似乎所有的属性`RadioButton`都是从它的祖先那里继承来的，所以它自己的标签的定义完全被忽略了，或者它可能是在别处定义的。

关于它的定义位置和所有标签定义的完整位置有什么想法吗？

谢谢

# python - Itertools 在 python 中创建 Ts 和 Hs 的组合作为字符串

> ID：14675497
> 
> 赞同：1
> 
> 时间：2013-02-03T18:04:24.157
> 
> 标签：python, combinations, itertools

我正在尝试使用 itertools 创建三个抛硬币的所有可能组合的对，例如 ['HHH', 'TTT'], ['HHH', 'THH'] .. [TTT', 'HTH' **]** , .. 等。我想将这些对作为单独的字符串访问，到目前为止我有这个；这似乎不是很理想？

```
from itertools import *

combs = []

combs.extend([list(x) for x in combinations(product('HT', repeat = 3), 2)])

for l in combs:
    (one, two) = l
    print ''.join(one), ''.join(two) 
```

==编辑==

不确定是否可以编辑原始问题 - 但这里是..

删除重复项的最佳方法是什么，例如对（THT，THT）和反向对 - 反向重复，例如（HHH，TTT）和（TTT，HHH）？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:20:39.193

生成所有 3 次投掷，然后从该列表中生成所有对。

```
import itertools

toss3 = map(''.join, itertools.product('HT', repeat=3))
toss3_pairs = list(itertools.product(toss3, repeat=2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:13:51.740

```
>>> combs.extend([''.join(y) for x in combinations(product('HT', repeat = 3), 2) for y in x])
>>> combs
['HHH', 'HHT', 'HHH', 'HTH', 'HHH', 'HTT', 'HHH', 'THH', 'HHH', 'THT', 'HHH', 'TTH', 'HHH', 'TTT', 'HHT', 'HTH', 'HHT', 'HTT', 'HHT', 'THH', 'HHT', 'THT', 'HHT', 'TTH', 'HHT', 'TTT', 'HTH', 'HTT', 'HTH', 'THH', 'HTH', 'THT', 'HTH', 'TTH', 'HTH', 'TTT', 'HTT', 'THH', 'HTT', 'THT', 'HTT', 'TTH', 'HTT', 'TTT', 'THH', 'THT', 'THH', 'TTH', 'THH', 'TTT', 'THT', 'TTH', 'THT', 'TTT', 'TTH', 'TTT'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-24T16:35:23.347

试试这个代码：

```
#没有迭代工具

默认投掷（N）：
    L = ['']
    对于范围内的 i（0，N）：
        L=[l+'H' for l in L]+[l+'T' for l in L]
    返回 L

打印投掷(4)

```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-03T18:13:58.550

尝试这个：

```
import itertools

combs = []

combs.extend([y for y in itertools.combinations([''.join(x) for x in itertools.product('HT', repeat = 3)], 2)])

print combs 
```

输出：

```
[('HHH', 'HHT'), ('HHH', 'HTH'), ('HHH', 'HTT'), ('HHH', 'THH'), ('HHH', 'THT'), ('HHH', 'TTH'), ('HHH', 'TTT'), ('HHT', 'HTH'), ('HHT', 'HTT'), ('HHT', 'THH'), ('HHT', 'THT'), ('HHT', 'TTH'), ('HHT', 'TTT'), ('HTH', 'HTT'), ('HTH', 'THH'), ('HTH', 'THT'), ('HTH', 'TTH'), ('HTH', 'TTT'), ('HTT', 'THH'), ('HTT', 'THT'), ('HTT', 'TTH'), ('HTT', 'TTT'), ('THH', 'THT'), ('THH', 'TTH'), ('THH', 'TTT'), ('THT', 'TTH'), ('THT', 'TTT'), ('TTH', 'TTT')]
>>> 
```

# symfony - Symfony2 , 学说自定义查询

> ID：14675501
> 
> 赞同：-1
> 
> 时间：2013-02-03T18:04:42.940
> 
> 标签：symfony, doctrine

> **可能重复：**
> [Symfony2 和 Doctrine：创建自定义 SQL 查询](https://stackoverflow.com/questions/12862389/symfony2-doctrine-create-custom-sql-query)

我在我的 symfony2 项目中尝试过：

```
$em = $this->getDoctrine()->getEntityManager();
$query = $em->createQuery(
        'SELECT v.voiture,o.offre,m.marque
         FROM FrontOfficeBundle:Voiture v
         INNER JOIN FrontOfficeBundle:OffreSpecial o on o.voiture_id = v.id
         INNER JOIN FrontOfficeBundle:Marque m on m.id = v.marque_id'
    );
$result = $query->getResult(); 
```

并得到那个错误：

```
[Syntax Error] line 0, col 122: Error: Expected Doctrine\ORM\Query\Lexer::T_WITH, got 'on' 
```

甚至 SQL 查询都是正确的！请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:16:08.460

您不需要`ON`为您的`INNER JOIN`. Doctrine Query Language 已经知道您的关联映射，因为您`FrontOfficeBundle:Voiture`在查询中指定了类。

```
$em = $this->getDoctrine()->getEntityManager();
$query = $em->createQuery(
        'SELECT v.voiture,o.offre,m.marque
         FROM FrontOfficeBundle:Voiture v
         INNER JOIN v.offreSpecial o 
         INNER JOIN v.marque m'
    );
$result = $query->getResult(); 
```

# javascript - 理解 javascript 中的回调和闭包

> ID：14675503
> 
> 赞同：0
> 
> 时间：2013-02-03T18:04:51.940
> 
> 标签：javascript, node.js, callback, closures

我是一名 JavaScript 初学者，刚刚读完“JavaScript 的优秀部分”。现在，我试图理解和揭开 JavaScript 中的闭包和回调的神秘面纱。下面是一段代码，我假设它应该产生从 1 到 10 的数字。但是代码无法编译（我正在使用节点 btw）。

```
var someAsyncFn = function() {};
for (var i = 0; i < 10; i++) {
    (function(j) {
        someAsycFn(function() {
            console.log(j);
        });
    })(i);
} 
```

这是错误日志：

```
 someAsycFn(function() {
        ^
ReferenceError: someAsycFn is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:07:21.190

你犯了一个拼写错误：

```
var someAsyncFn = function() {};
someAsycFn(function() { 
```

您对该函数的调用省略了该字母`n`。

* * *

它根本不起作用的原因是这不是真正的代码。这是一个例子。`someAsyncfn`不是真正的功能。它什么也不做。`var someAsyncFn = function() {};`创建一个什么都不做的函数。它是一个占位符，用于描述如果有一个真正的异步函数会发生什么。

像这样的东西会在 Web 浏览器中显示效果（您需要在 node.js 中使用不同的异步函数；我使用 jQuery 来保持代码干净）。

```
var someAsyncFn = function(successfn) {
    $.get(document.location, successfn); // make an AJAX request to the current URL, for demonstration purposes
                                         // successfn will be called when the request succeeds
};
for (var i = 0; i < 10; i++) {
    (function(j) {
        someAsyncFn(function() {
            console.log(j);
        });
    })(i);
} 
```

这是因为（a）`console.log`现在实际调用了包含的函数，并且（b）因为它是在`$.get`请求完成时异步调用的。

关键在于代码是异步运行的，这意味着您不会`0`按`9`顺序执行；您将按照请求完成的顺序获得它们。对我来说，这是：

```
2
3
1
0
4
5
6
7
8
9 
```

你可能会得到不同的结果。

# android - ActionBarSherlock 的问题 - 在 Android 2.3.7 上安装失败

> ID：14675504
> 
> 赞同：0
> 
> 时间：2013-02-03T18:04:58.040
> 
> 标签：android, actionbarsherlock

我在我的一个项目中使用 ActionBarSherlock 时遇到问题。我的应用程序在将其推送到我的 Nexus 4 时安装良好，但当我尝试将其安装到我的 HTC Desire（带有 Android 2.3.7 的 CM7 - API 级别 10）时，我收到以下错误。

```
[2013-02-03 18:47:44 - MyApp] Project dependency found, installing: Actionbar
[2013-02-03 18:47:44 - Actionbar] Uploading Actionbar.apk onto device 'HT042PL03910'
[2013-02-03 18:47:44 - Actionbar] Installing Actionbar.apk...
[2013-02-03 18:47:47 - Actionbar] Installation error: INSTALL_FAILED_OLDER_SDK
[2013-02-03 18:47:47 - Actionbar] Please check logcat output for more details.
[2013-02-03 18:47:47 - MyApp] Launch canceled! 
```

我使用 Sherlock 4.2.0 作为库项目并添加了 android-support-v4 的 R11。Sherlock 本身是这样配置的：

```
Manifest:
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16"/>

Project-Properties:

android.library=true
# Project target.
target=android-14 
```

我的应用程序使用以下设置：

```
Manifest:
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16" />

Project-Properties:

target=Google Inc.:Google APIs:16
android.library.reference.1=../ActionbarSherlock 
```

我浏览了整个 logcat 输出，但找不到任何有用的东西。有没有其他人经历过这个并且可以帮助我？

========= 编辑 ================

我的应用程序清单（mindSdk 更改为 8）：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.hsrm.medieninf.mobcomp.klingelapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <permission
        android:name="de.hsrm.medieninf.mobcomp.klingelapp.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="de.hsrm.medieninf.mobcomp.klingelapp.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock.Light" >

        <uses-library android:name="com.google.android.maps" />

        (...Activities and Services here ...)

    </application>

</manifest> 
```

来自具有 Google API 级别 10 的新 Emulator AVD 的完整 Logcat：

```
02-03 21:09:59.647: I/PackageManager(77): Removing non-system package:de.hsrm.medieninf.mobcomp.klingelapp
02-03 21:09:59.647: I/ActivityManager(77): Force stopping package de.hsrm.medieninf.mobcomp.klingelapp uid=10038
02-03 21:09:59.877: D/dalvikvm(77): GC_CONCURRENT freed 1369K, 49% free 5484K/10631K, external 3226K/4029K, paused 4ms+12ms
02-03 21:09:59.977: D/PackageManager(77): Scanning package de.hsrm.medieninf.mobcomp.klingelapp
02-03 21:09:59.977: I/PackageManager(77): Package de.hsrm.medieninf.mobcomp.klingelapp codePath changed from /data/app/de.hsrm.medieninf.mobcomp.klingelapp-1.apk to /data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk; Retaining data and using new
02-03 21:09:59.977: I/PackageManager(77): Unpacking native libraries for /data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk
02-03 21:10:00.047: D/installd(35): DexInv: --- BEGIN '/data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk' ---
02-03 21:10:04.096: D/dalvikvm(598): DexOpt: load 250ms, verify+opt 957ms
02-03 21:10:04.306: D/installd(35): DexInv: --- END '/data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk' (success) ---
02-03 21:10:04.306: W/PackageManager(77): Code path for pkg : de.hsrm.medieninf.mobcomp.klingelapp changing from /data/app/de.hsrm.medieninf.mobcomp.klingelapp-1.apk to /data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk
02-03 21:10:04.306: W/PackageManager(77): Resource path for pkg : de.hsrm.medieninf.mobcomp.klingelapp changing from /data/app/de.hsrm.medieninf.mobcomp.klingelapp-1.apk to /data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk
02-03 21:10:04.306: D/PackageManager(77):   Services: de.hsrm.medieninf.mobcomp.klingelapp.GCMIntentService de.hsrm.medieninf.mobcomp.klingelapp.services.LocationService de.hsrm.medieninf.mobcomp.klingelapp.services.SyncService de.hsrm.medieninf.mobcomp.klingelapp.services.AppService de.hsrm.medieninf.mobcomp.klingelapp.services.AuthService
02-03 21:10:04.306: D/PackageManager(77):   Receivers: com.google.android.gcm.GCMBroadcastReceiver
02-03 21:10:04.306: D/PackageManager(77):   Activities: de.hsrm.medieninf.mobcomp.klingelapp.ui.LoginActivity de.hsrm.medieninf.mobcomp.klingelapp.ui.MessageEditor de.hsrm.medieninf.mobcomp.klingelapp.ui.StartActivity de.hsrm.medieninf.mobcomp.klingelapp.ui.ContactsActivity de.hsrm.medieninf.mobcomp.klingelapp.ui.KlingelSettings de.hsrm.medieninf.mobcomp.klingelapp.ui.NewStartActivity de.hsrm.medieninf.mobcomp.klingelapp.ui.MessagesActivity de.hsrm.medieninf.mobcomp.klingelapp.ui.MessageDetails de.hsrm.medieninf.mobcomp.klingelapp.ui.RegisterActivity de.hsrm.medieninf.mobcomp.klingelapp.ui.FriendRequestActivity
02-03 21:10:04.306: D/PackageManager(77):   Permissions: de.hsrm.medieninf.mobcomp.klingelapp.permission.C2D_MESSAGE
02-03 21:10:04.326: I/ActivityManager(77): Force stopping package de.hsrm.medieninf.mobcomp.klingelapp uid=10038
02-03 21:10:04.436: I/installd(35): move /data/dalvik-cache/data@app@de.hsrm.medieninf.mobcomp.klingelapp-2.apk@classes.dex -> /data/dalvik-cache/data@app@de.hsrm.medieninf.mobcomp.klingelapp-2.apk@classes.dex
02-03 21:10:04.436: D/PackageManager(77): New package installed in /data/app/de.hsrm.medieninf.mobcomp.klingelapp-2.apk
02-03 21:10:04.446: W/PackageManager(77): Unknown permission android.permission.ADD_SYSTEM_SERVICE in package com.android.phone
02-03 21:10:04.446: W/PackageManager(77): Not granting permission android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS to package com.android.browser (protectionLevel=2 flags=0x9be45)
02-03 21:10:04.457: W/PackageManager(77): Unknown permission com.google.android.gm.permission.WRITE_GMAIL in package com.android.settings
02-03 21:10:04.457: W/PackageManager(77): Unknown permission com.google.android.gm.permission.READ_GMAIL in package com.android.settings
02-03 21:10:04.466: W/PackageManager(77): Unknown permission android.permission.READ_OWNER_DATA in package com.android.email
02-03 21:10:04.476: W/PackageManager(77): Unknown permission com.android.providers.im.permission.READ_ONLY in package com.google.android.apps.maps
02-03 21:10:04.476: W/PackageManager(77): Not granting permission android.permission.DEVICE_POWER to package com.android.deskclock (protectionLevel=2 flags=0x8be45)
02-03 21:10:04.606: I/ActivityManager(77): Force stopping package de.hsrm.medieninf.mobcomp.klingelapp uid=10038
02-03 21:10:04.706: D/dalvikvm(260): GC_EXPLICIT freed 1K, 49% free 3020K/5831K, external 4756K/5631K, paused 67ms
02-03 21:10:04.746: D/dalvikvm(226): GC_EXPLICIT freed 94K, 51% free 2964K/5959K, external 1625K/2137K, paused 75ms
02-03 21:10:04.806: W/RecognitionManagerService(77): no available voice recognition services found
02-03 21:10:04.856: D/GTalkService(287): handlePackageInstalled: re-initialize providers
02-03 21:10:04.856: D/GTalkService(287): [RawStanzaProvidersMgr] ##### searchProvidersFromIntent
02-03 21:10:04.856: D/GTalkService(287): [RawStanzaProvidersMgr] no intent receivers found
02-03 21:10:05.136: I/Launcher(260): setLoadOnResume
02-03 21:10:05.226: D/dalvikvm(77): GC_EXPLICIT freed 1202K, 54% free 4962K/10631K, external 3226K/4029K, paused 75ms
02-03 21:10:05.256: I/installd(35): unlink /data/dalvik-cache/data@app@de.hsrm.medieninf.mobcomp.klingelapp-1.apk@classes.dex
02-03 21:10:05.296: D/AndroidRuntime(589): Shutting down VM
02-03 21:10:05.306: D/dalvikvm(589): GC_CONCURRENT freed 101K, 72% free 295K/1024K, external 0K/0K, paused 0ms+1ms
02-03 21:10:05.306: D/jdwp(589): Got wake-up signal, bailing out of select
02-03 21:10:05.306: D/dalvikvm(589): Debugger has detached; object registry had 1 entries
02-03 21:10:05.326: I/dalvikvm(589): JNI: AttachCurrentThread (from ???.???)
02-03 21:10:05.326: I/AndroidRuntime(589): NOTE: attach of thread 'Binder Thread #3' failed
02-03 21:10:06.686: D/AndroidRuntime(604): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
02-03 21:10:06.686: D/AndroidRuntime(604): CheckJNI is ON
02-03 21:10:07.106: D/AndroidRuntime(604): Calling main entry com.android.commands.pm.Pm
02-03 21:10:07.196: D/dalvikvm(442): GC_EXPLICIT freed 10K, 51% free 2727K/5511K, external 1625K/2137K, paused 43ms
02-03 21:10:07.206: W/ActivityManager(77): No content provider found for: 
02-03 21:10:07.306: W/ActivityManager(77): No content provider found for: 
02-03 21:10:07.316: D/PackageParser(77): Scanning package: /data/app/vmdl-63285559.tmp
02-03 21:10:07.326: W/PackageParser(77): /data/app/vmdl-63285559.tmp (at Binary XML file line #8): Requires newer sdk version #16 (current version is #10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:01:47.180

因此，我没有寻找错误的地方，而是检查了没有 sherlock 的工作修订版。然后，我将 sherlock 添加为库，并对我昨天所做的活动进行了相同的更改。但是现在，安装工作正常。

# javascript - 如何访问复制到变量的 div 的子项

> ID：14675505
> 
> 赞同：4
> 
> 时间：2013-02-03T18:04:58.867
> 
> 标签：javascript, jquery

在我的网页上，我有一个“编辑器”类的 DIV，我将其复制到一个变量中。

```
editorTemplate = $('.editor'); 
```

DIV 看起来像这样（简化）：

```
<div class="editor">
  <div>
    Title: <span class="title" id="title">  the title goes here  </span><br />
    <select class="recording_list" id="recording_list">
      <option value="1">Pos 1</option>
      <option value="2">Pos 2</option>
      ...
    </select>
</div>  <!-- class=editor --> 
```

稍后我想通过将其添加到页面来从该 div 创建一个系列：

```
$(editArea).append(editorTemplate); 
```

到现在为止还挺好。

但我想在将编辑器模板粘贴到页面之前更改一些属性——比如字段的 ID、一些文本和选项框的选定元素。

我可以更改编辑模板的 ID

```
$(myEdit).attr("id", "edit" + nEditors); 
```

但我不知道如何访问模板的内部元素，例如“标题”字段的 ID 和文本。

模板粘贴到页面后，我可以说

```
$('#title').attr("id", "title" + nEditors);
$('#title').html("the new text");
... 
```

在我将模板粘贴到页面之前是否可以进行这些更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:13:03.360

您可以使用[JQuery.children()](http://api.jquery.com/children/)方法。

```
var editorTemplate = $('.editor');
editorTemplate.children('<selectors to uniquely identify the child object>').<method to update the content accordingly> 
```

那么我们可以做这样的事情......

```
count=1;
editorTemplate.children('span#title').html('<Update HTML here>').attr('id','title_'+count); 
```

* * *

**更新：**

我刚刚注意到您的元素位于多个级别，因此使用[.find()](http://api.jquery.com/find/)将是理想的，因为它也可以遍历多个级别以选择后代元素（孙子等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T18:26:09.343

您没有将元素复制到变量中。

```
editorTemplate = $('.editor'); 
```

上面创建了一个带有一组指向 DOM 元素的指针的 jQuery 包装器。包装器允许您执行针对 DOM 元素的 jQuery 方法。

如果您这样做`editorTemplate.find("#title").attr("id", "newId")`，它会更改`id`您当前在 DOM 中指向的元素的属性，而不是新副本。

当您计划稍后执行此操作时：

```
$(editArea).append(editorTemplate); 
```

上述内容不会附加 DOM 元素的新副本，而是将`moving`您通过包装器指向的元素从它们在 DOM 中的原始位置指向正在引用`editorTemplate`的 DOM 中的新位置。`editArea`

如果您打算在其中复制某些元素`editorTemplate`以稍后附加它们，您将使用 jQuery `clone()`，类似于以下内容：

```
// use clone(true, true) to also clone any attached events
var editorTemplate = $('.editor').clone();

// Using .find you can change attribute in your new copy/clone
editorTemplate.find("#title").attr("id", "title" + nEditors).html("the new text");

// append your new copy/clone
$(editArea).append(editorTemplate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T18:08:05.243

您可以使用 find 方法来访问您的元素：

```
var editorTemplate = $('.editor');

$(editorTemplate).find('#title').attr('id', 'title' + nEditors).html('the new text'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T18:10:23.090

```
editorTemplate.clone()
              .attr({})
              .find("select").attr({id:"whatever"}).end()
              .find("span").....end()
              .appendTo($(editarea)) 
```

我希望你明白

# ios - 在委托类中获取当前值

> ID：14675514
> 
> 赞同：0
> 
> 时间：2013-02-03T18:06:18.850
> 
> 标签：ios, objective-c

我做了一个委托，所以在委托的类中，这是一个 UIPopover，有一个方法接收我的 PreguntasViewController 的对象。如果我打印变量，则什么都没有。为什么会这样？谢谢。

```
// -- PreguntasViewController

- (void)getRespuestasDelegate {
    [delegate getRespuestas:self];
}

//Delegated class

- (void)viewDidLoad
{
    [super viewDidLoad];

    PreguntasViewController *preguntasViewCotroller = [[PreguntasViewController alloc] init];
    preguntasViewCotroller.delegate = self;
    [preguntasViewCotroller getRespuestasDelegate];

}

- (void)getRespuestas:(PreguntasViewController *)preguntasViewController{
    for(NSString *respuesta in preguntasViewController.preguntasArray) {
        NSLog(@"%@", respuesta);
    }
    NSLog(@"%d", [preguntasViewController.preguntasArray count]);
    NSLog(@"%@", preguntasViewController.ayudapreguntas);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:12:23.483

从您的示例中我看起来就像您正在分配 PreguntasViewController 的一个实例，然后立即调用它的 getRespuestasDelegate 方法。我没有看到 preguntasArray 被填充的任何地方。它是作为 PreguntasViewController 的 init 方法的一部分填充的吗？如果没有，我不希望数组中有任何东西。

# graph-theory - 双向图中的中国邮递员电路算法

> ID：14675522
> 
> 赞同：0
> 
> 时间：2013-02-03T18:06:48.337
> 
> 标签：graph-theory, discrete-mathematics, network-flow, chinese-postman

我正在寻找一种在双向图中找到中国邮递员电路的算法。这里的双向图不是对称有向图，而是 Edmonds & Johnson 在 1970 年引入的图。

根据 Harold N Gabow 在 983 年发表的一篇论文，我发现很少有解决类似问题的论文，但没有正式的算法；他们刚刚提到这个问题可以减少/与完美的 b 匹配、双向网络流......等等有关，到目前为止我还无法理解。

如果有人知道这个概念和算法，请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:21:01.477

大多数寻找中国邮递员线路的算法都将问题转移到寻找汉密尔顿线路上。如果这是不可能的，则扩展图形以便可以找到汉密尔顿电路。

在无向图中，当所有节点都具有偶数度时，可能会出现汉密尔顿回路。如果不是这种情况，则必须将奇数度的节点再扩展一条边。这会导致配对问题。

我希望这将有助于您解决双向图问题。如果您准确地提出问题，也许我可以进一步帮助您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T21:29:41.193

您可以查看这篇论文以找到解决[中国邮递员问题](https://www.csie.ntu.edu.tw/~b91006/SPAEcpp.pdf)的方法。

# java - 在注释处理器中使用 StandardLocation 类

> ID：14675525
> 
> 赞同：3
> 
> 时间：2013-02-03T18:06:58.257
> 
> 标签：java, annotation-processing, getresource

我正在使用 NETBeans IDE 开发注释处理器。我已经编写了注释处理器，然后将其转换为 JAR，然后将此 JAR 作为引用库添加到我正在使用注释的另一个 java 应用程序中。

现在我的问题是在注释处理器内部，如果我想访问源文件（被注释的文件）然后我尝试使用下面的代码获取 FileObject

```
FileObject source = processingEnv.getFiler().getResource(StandardLocation.SOURCE_PATH,"","demo/MainCopy.java"); 
```

但它返回null。这里的 demo 是带有注释类 MainCopy.java 的包。当我阅读 StandardLocation 类的文档时，它说必须支持它才能工作，有人可以帮我解决这个问题或指导我如何获取 FileObject。

谢谢

# php - $_GET 变量上的未定义索引，它的设置但仍然不起作用？

> ID：14675529
> 
> 赞同：2
> 
> 时间：2013-02-03T18:07:31.063
> 
> 标签：php, pdo, prepared-statement

我从这里重定向

```
<a href="update_post.php?updid=<?php echo $_SESSION['id']; ?>">Update</a> 
```

和显示错误的代码是

```
<?php include('../includes/connections.php'); ?>
<?php
try{
if(isset($_POST['submit'])){
$title = $_POST['title'];
$post = $_POST['post'];
$dates = $_POST['date'];
$sql = 'UPDATE `blog`.`contents` SET `titles` = :title, `posts` = :post, `dates` = :date    WHERE `contents`.`id` = :idendity';
$result = $pdo->prepare($sql);
$result->bindValue(':title',$title);
$result->bindValue(':post',$post);
$result->bindValue(':date',$dates);
$result->bindValue(':idendity',$_GET['updid']);
$result->execute();
$count = $result->rowCount();
    if($count == 1){
        header('location: index.php');
    }else{
        echo 'Problem Occoured';
    }
}
}
catch(PDOException $e){
echo "Problem: " .$e->getMessage();
}
?> 
```

显示的错误：-注意：未定义的索引：第 13 行 C:\xampp\htdocs\myblog\admin\update_post.php 中的 updid 发生问题

```
<form action="update_post.php" method="post">
    Title:<br/>
    <input style="height:40px;" size="110" type="text" name="title" /><br />
    Post:<br />
    <textarea rows="30" cols="85"  name="post" ></textarea><br />
    Date:<br />
    <input type="text" name="date" /><br/ >
    <input type="submit" name="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:15:04.847

> 是的，通过表单提交，这就是我检查是否提交 isset 的原因。

您应该`$_SESSION['id']`在表单的隐藏字段中包含：

```
<input type="hidden" name="updid" value="<?php echo $_SESSION['id']; ?>" /> 
```

...并更改：

```
$result->bindValue(':idendity',$_GET['updid']); 
```

... 进入：

```
$result->bindValue(':idendity',$_POST['updid']); 
```

**编辑**

首先，你上面的问题有错误。如评论中所述，如果您单击链接，则不可能`isset($_POST['submit'])`返回。`true`

`$_POST``post`当您通过提交该部分中的表单访问页面时，将具有值`method`。

至于`$_GET`，其值取自 URL 的查询字符串：

```
http://yourpage.php?foo=bar&bar=foo 
```

`bar`是的价值`$_GET['foo']`

`foo`是的价值`$_GET['bar']`

I've searched for basic $_POST/$_GET explanation but unable to find one :-D

# php - 除了 HTML 隐藏了我的 js 导航栏

> ID：14675530
> 
> 赞同：1
> 
> 时间：2013-02-03T18:07:52.547
> 
> 标签：php, javascript, html

我在我自己的个人网站上[工作](http://billcaffery.dnsd.me)。如果您将鼠标悬停在任何导航栏元素上，您会注意到有一些闪烁，并且并非所有元素都可见。您可以通过 验证这一点`F12`。在我看来，`<aside>`标签“隐藏”了我正在寻找的信息。

有人可以告诉我如何将导航栏带到某物的前面。我不太确定这里发生了什么。

**`index.php`**：

```
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>Grown Kidd Creations</title>
        <link rel="stylesheet" href="css/main.css">
        <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
            });
        </script>
    </head>
    <body>
        <header>
            <img alt="Picture of me and Cian" src="img/caindaddysleepin.jpeg" title="Cian and Daddy">
            <?include_once 'nav/nav.php';?>
        </header>
        <aside class="left"><p>No idea what to put here. how about you fill out the form and tell me?</p></aside>

        <aside class="right">
            Recent News/Updates:<br/>
            <span class="undercon">This will be updated soon with links and maybe a blog.</span>
            <ul>
                <li>Cian</li>
                <li>Work</li>
                <li>Family</li>
            </ul>
        </aside>
        <footer>
            Send me some love at <a href="mailto:billythakidd04@gmail.com">BillyThaKidd04@gmail.com</a><br/>
            Or find me at:<br/>
            <div class="g-plus" data-href="https://plus.google.com/109325835178774768962?prsrc=3" data-theme="dark" rel="author"></div>
            <a href="https://twitter.com/ThaKidd04" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @ThaKidd04</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </footer>
    </body>
</html> 
```

**`nav.php`**

```
<?//navigation bar?>
<script>
    var el = document.getElementsByTagName("body")[0];
    el.className = "";
</script>
<noscript>
<!--[if IE]>
    <link rel="stylesheet" href="nav/css/ie.css">
<![endif]-->
</noscript>
<link rel="stylesheet" href="nav/css/nav.css">
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <nav id="topNav" class="no-js">
        <ul>
            <li><a href="index.php" title="Home">Home</a></li>
            <li><a href="#" title="Projects">Projects</a>
                <ul>
                    <li><a href="" title="Personal Projects">Personal Projects</a></li>
                    <li><a href="" title="Work Projects">Work Projects</a></li>
                    <li class="last"><a href="pages/sitepage.php" target="new" title="About this site">This Site</a></li>
                </ul>
            </li>
            <li><a href="contactme.php" title="Contact Me">Contact Me</a>
                <ul>
                    <li><a href="http://www.facebook.com/BillyThaKidd" target="new" title="FaceBook">FaceBook</a></li>
                    <li><a href="" target="new" title="Google Plus">Google +</a></li>
                    <li><a href="" target="new" title="LinkedIn">LinkedIn</a></li>
                    <li class="last"><a href="" title="Email Me">Email Me</a></li>
                </ul>
            </li>
            <li><a href="/pages/viewblog.php" title="About Me">About Me</a>
                <ul>
                    <li><a href="/pages/viewblog.php">Blog</a></li>
                    <li><a href="" title="Resume">Resume</a></li>
                    <li class="last"><a target="new" href="https://github.com/billythakidd04" title="GitHub">GitHub</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <script src="nav/js/modernizr.custom.69568.js"></script>
    <script>
        (function($)
        {
            //cache nav
            var nav = $("#topNav");

            //add indicators and hovers to submenu parents
            nav.find("li").each(function()
            {
                if ($(this).find("ul").length > 0)
                {
                    $("<span>").text("").appendTo($(this).children(":first"));

                    //show subnav on hover
                    $(this).mouseenter(function()
                    {
                        $(this).find("ul").stop(true, true).slideDown();
                    });

                    //hide submenus on exit
                    $(this).mouseleave(function()
                    {
                        $(this).find("ul").stop(true, true).slideUp();
                    });
                }
            });
        })(jQuery);
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:12:03.543

你应该发布你的`css`，因为似乎整个问题是相关的——或者至少可以通过[`z-index`](https://developer.mozilla.org/en-US/docs/CSS/z-index)调整来解决：

> z-index CSS 属性指定元素及其后代的 z 顺序。当元素重叠时，z-order 确定哪个元素覆盖另一个元素。z-index 较大的元素通常会覆盖 z-index 较小的元素。

# symfony - Symfony2 - 上传后调整图像大小

> ID：14675531
> 
> 赞同：2
> 
> 时间：2013-02-03T18:07:58.960
> 
> 标签：symfony

我想在上传文件后生成缩略图。对于图像处理，我使用 Avalanche123 的 ImagineBundle。

我尝试在实体中使用代码：

```
 $avalancheService = $this->get('imagine.cache.path.resolver');
        $avalancheService->getBrowserPath($this->getUploadRootDir().'/'.$path.'/'.$extn[0].'.jpg', 'avatar'); 
```

但这无济于事。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T08:36:21.803

在这条线上，您尝试获得服务：`$this->get('imagine.cache.path.resolver')`.

但是您遵循的代码示例应该在控制器中执行。`get()`实体中没有方法，控制器从`Controller`所有控制器都应该扩展的类继承它。所以调用`$this->get()`一个实体是没有意义的。

这是设计使然。Symfony 中的实体应该是哑的，只代表它们拥有的数据。

正确的做法是要么在你​​的控制器中调整大小，要么创建一个服务，注入`imagine.cache.path.resolver`它并从你的控制器中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T16:31:21.143

在 twig 中使用 dump(var) 检查变量。也许 $extn[0] 没有正确的文件或没有设置。尝试输出完整的 getBrowserPath 字符串以确保它是准确的。

# image - 在 html5 中绘制到图像/纹理

> ID：14675535
> 
> 赞同：2
> 
> 时间：2013-02-03T18:08:20.543
> 
> 标签：image, html, canvas, textures

**情况**：我正在创建一个每个玩家都有蛇的游戏。

**问题**：在特殊情况下，玩家的蛇可能有上千条弧线。我在每个刻度上重新绘制画布（我尝试获得 60fps）。现在，因为要绘制的弧太多，它变得非常慢。

**我的想法**：将每个玩家的蛇绘制到图像/纹理上，并且只为画布上的每个玩家重绘整个图像。

**我的问题**：这可能吗？如果是，我必须搜索什么？我在游戏开发方面没有那么丰富的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:22:45.633

我建议研究一下`context.createPattern`方法。您可以动态创建新的画布并在其上绘制复杂的图像。完成一次绘图后，您可以调用`context.createPattern(dynamicCanvas, 'no-repeat')`并保留对该模式的引用。然后，无论何时您想绘制那条蛇，将您的上下文转换到适当的位置，并将 设置`context.fillStyle`为您的模式并填充一个适合您的模式的矩形。这是一些通用代码：

```
// Only do this once per unique snake, not per frame
var patternCanvas = document.createElement("canvas");
// Set the size to be the minimum size to draw your snake on
patternCanvas.width = 100;
patternCanvas.height = 100;
// code that draws snake onto patternCanvas here
// ...

// Create the pattern
var pattern = patternCanvas.getContext("2d").createPattern(patternCanvas, "no-repeat");

// Using your real canvas that's drawing every frame
var realContext = realCanvas.getContext("2d");
realContext.save();
realContext.translate(50, 80); // x, y coordinates of where you want to draw your snake
realContext.fillStyle = pattern;
realContext.fillRect(0, 0, 100, 100); // The last two parameters are your width and height of your snake pattern
realContext.restore(); 
```

请注意，它`createPattern`可以获取整个画布对象，并且您永远不需要将 附加`patternCanvas`到 DOM 对象，因此它就像一个后台缓冲区。

绘制图案时，请尝试将它们全部绘制在同一个`save`/`restore`中。继续翻译和填充矩形。每个`save`/`restore`和对 的修改`context`都会减慢您的速度，因此您要确保尽可能多地批处理调用。

Canvas 绘制缓慢的原因可能有很多，因此我建议遵循[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)中提到的一些想法。

# java - java.lang.IndexOutOfBoundsException：索引：264

> ID：14675537
> 
> 赞同：0
> 
> 时间：2013-02-03T18:08:41.390
> 
> 标签：java, multidimensional-array, arraylist

错误：

```
java.lang.IndexOutOfBoundsException: Index: 264, Size: 0
    at java.util.ArrayList.rangeCheckForAdd(Unknown Source)
    at java.util.ArrayList.add(Unknown Source) 
```

我的代码：

```
import java.util.ArrayList
...
private static ArrayList<String[]> Arr = new ArrayList<String[]>();
...
Arr.add(264, new String[] {"title","description","icon"});
Arr.add(268, new String[] {"title2","description2","icon2"});
Arr.add(1222, new String[] {"title3","description3","icon3"}); 
```

我需要用自己的键添加另一个字符串数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:11:09.500

除非列表至少已经那么大，否则您无法添加特定索引。

这一行：

```
Arr.add(264, new String[] {"title","description","icon"}); 
```

仅当列表已经至少有 264 个元素时才有效（正如[javadoc 明确指出](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)的那样，如果您决定阅读它）。

# android - 如何将 GCM 推送通知消息存储到 sqlite 数据库中？

> ID：14675539
> 
> 赞同：1
> 
> 时间：2013-02-03T18:08:44.600
> 
> 标签：android, sqlite, google-cloud-messaging

我正在研究**GCM**。一切都很好，我已经成功实施了 GCM，它正在工作。但我需要将消息保存到数据库表中。但是当我实现下面的数据库操作代码时，GCM 和数据库一样停止工作。日志上也没有显示错误。

```
 @Override
        protected void onMessage(Context context, Intent intent) {
            String message = getString(R.string.gcm_message);
            message = (String) intent.getExtras().getCharSequence("hello");
            displayMessage(context, message);
                /* database manipulation */
                String dbName = new String("GCM");
        SQLiteDatabase db = openOrCreateDatabase(dbName, MODE_PRIVATE, null);
        String tableName = new String("newsTable");
                db.execSQL("INSERT INTO " + tableName + "(message) VALUES(" + message + ");");                       
                db.close();
                /* database manipulation ends */
            generateNotification(context, message);
        } 
```

同样，当我删除数据库代码片段时，GCM 运行良好。我确保数据库和表已经存在。我的数据库操作代码错了吗？如果是的话，这样做的实际方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:40:04.383

试试这个方法。。

创建新的**DatabaseHelper 类**，该类将创建消息并将其插入**sqlite 数据库**

```
public class DatabaseHelper extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "GCM";
private static final String TABLE_NAME = "newsTable";

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    db.execSQL("CREATE TABLE " + TABLE_NAME
            + "(ID INTEGER PRIMARY KEY AUTOINCREMENT, MESSAGE STRING)");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(db);
}

public void insertMsg(String msg) {

    SQLiteDatabase db = getWritableDatabase();

    ContentValues cv = new ContentValues();

    cv.put("MESSAGE", msg);

    db.insert(TABLE_NAME, null, cv);

    db.close();

  }
 } 
```

**GCM 服务**

```
 @Override
    protected void onMessage(Context context, Intent intent) {
        String message = getString(R.string.gcm_message);
        message = (String) intent.getExtras().getCharSequence("hello");
        displayMessage(context, message);

        DatabaseHelper db = new DatabaseHelper(context);
        db.insertMsg(message);
        generateNotification(context, message);
    } 
```

始终使代码干净，使其看起来很容易..

快乐编码:)

# tuckey-urlrewrite-filter - URLrewriteFilter 塔基重定向

> ID：14675540
> 
> 赞同：1
> 
> 时间：2013-02-03T18:08:45.163
> 
> 标签：tuckey-urlrewrite-filter

我正在尝试使用`UrlRewriteFilter`重定向。由于我们一直在移动服务器和基础设施以开发我们的内部云解决方案，因此我们计划大量使用这些解决方案。

我的问题是我有一个类似的网址

> https://google.com/web-app/servlet? **请求参数和值**

我需要将所有`URL`具有特定参数值的 s 重定向到不同的服务器。

所以一个像这样的网址：

> https://google.com/administrator/servlet/ej.processOrder?sec=100&geo=appointment&cus=dubai

如果参数包含`cus=dubai`，我需要将其重定向到

> [https://hotmail.com/servlet/ej.processOrder?sec=100&geo=appointment&cus=dubai](https://hotmail.com/servlet/ej.processOrder?sec=100&geo=appointment&cus=dubai)

我尝试了以下方法，但似乎不起作用

```
<urlrewrite use-query-string="true">
    <rule match-type="wildcard">
        <name>Redirect requests to cases</name>
        <description></description>
        <from>/administrator/servlet/**?**</from>
        <to type="redirect" last="true">http://hotmail.com:8080/servlet/$1?&amp;cus=dubai&amp;$2&amp;$3&amp</to>
    </rule> 
</urlrewrite> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T21:01:26.483

条件应为“类型”而不是“名称”，如：

```
<condition type="query-string" operator="equal">*cus=dubai*</condition> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:29:07.217

您将需要使用`query-string`并确保它符合特定条件。

从我所看到的你会想要这样的东西：

```
<condition name="query-string" operator="equal">*cus=dubai*</condition> 
```

每个不同的参数都需要一个规则。一条完整的规则如下所示：

```
<urlrewrite use-query-string="true">

    <rule match-type="wildcard">
        <name>Cus = dubai</name>
        <from>/administrator/servlet/*</from>
        <condition name="query-string" operator="equal">*cus=dubai*</condition>
        <to type="redirect" last="true">https://hotmail.com/servlet/ej.processOrder?sec=100&geo=appointment&cus=dubai</to>
    </rule> 

    <!-- other rules go here -->

</urlrewrite> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T18:08:07.260

[好问题，对于我认为经常发生的情况，我认为手册](http://tuckey.org/urlrewrite/manual/4.0/index.html)中没有很好地记录它。

以下对我有用 -

```
<rule>
<condition type="query-string">foo=123&amp;bar=456</condition>
<from>/index.jsp</from>
<to type="permanent-redirect" last="true">https://somehwere-else.com/blah/blah/</to>
</rule> 
```

所以这应该适合你 -

```
<rule>
<name>Redirect requests to cases</name>
<condition type="query-string">sec=100&amp;geo=appointment&amp;cus=dubai</condition>
<from>/administrator/servlet</from>
<to type="permanent-redirect" last="true">http://hotmail.com:8080/servlet/sec=100&amp;geo=appointment&amp;cus=dubai</to>
</rule> 
```

# c# - 将空值和其他值从 sql 数据库检索到文本框

> ID：14675542
> 
> 赞同：1
> 
> 时间：2013-02-03T18:08:58.407
> 
> 标签：c#, visual-studio-2010, sql-server-2008

我在从 Visual Studio 的 SQL 数据库中检索值时遇到问题。我在 GUEST 表中有列（GuestName、GuestPassportNo、GuestCountry、RoomID、HotelPackageID），其中 HotelPackageID 包含 NULL 值，而其余的则带有值。当 HotelPackageID 为 NULL 时，我总是被抛出 else 语句（未找到记录）。请问有人有解决办法吗？这是我的代码：

 **```
SqlConnection myConnect = new SqlConnection(strConnectionString);

string strCommandText = "SELECT Guest.GuestPassportNo, 
                                Guest.GuestName,   
                                Guest.GuestCountry, 
                                Guest.RoomID, 
                                Room.RoomDescription, 
                                Room.RoomPrice, 
                                HotelPackages.PackageName, 
                                HotelPackages.PackagePrice ";

strCommandText += " FROM Guest, Room, HotelPackages";

strCommandText +=" WHERE Guest.RoomID=Room.RoomID 
                   AND Guest.GuestPassportNo=@guestpno 
                   AND HotelPackages.PackageID=Guest.HotelPackageID 
                   AND Guest.GuestCountry=@guestcountry;

SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
cmd.Parameters.AddWithValue("@guestpno", txtPassportNo.Text);
cmd.Parameters.AddWithValue("@guestcountry", txtGuestCountry.Text);

try
{
myConnect.Open();
SqlDataReader reader = cmd.ExecuteReader();

if(reader.Read())
{
txtGuestName.Text = reader["GuestName"].ToString();
txtRoomDescription.Text = reader["RoomDescription"].ToString();
txtRoomPrice.Text = reader["RoomPrice"].ToString();
txtHotelPackage.Text = reader["PackageName"].ToString();
txtPackagePrice.Text = reader["PackagePrice"].ToString();
MessageBox.Show("Guest Record Found!");
}

else
{
Messagebox.Show("No record Found");
}

reader.Close();
}

catch(Exception ex)
{
MessageBox.Show(ex.message);
}

finally
{
myConnect.Close();
} 
```*  ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:13:45.047

您需要更改您的查询：

```
strCommandText +=" WHERE Guest.RoomID=Room.RoomID AND Guest.GuestPassportNo=@guestpno AND HotelPackages.PackageID=Guest.HotelPackageID AND Guest.GuestCountry=@guestcountry; 
```

应该：

```
strCommandText +=" WHERE Guest.RoomID=Room.RoomID AND Guest.GuestPassportNo=@guestpno AND (HotelPackages.PackageID=Guest.HotelPackageID OR GUEST.HotelPackageID IS NULL) AND Guest.GuestCountry=@guestcountry; 
```**

# android - ImageView 构造函数用法

> ID：14675543
> 
> 赞同：4
> 
> 时间：2013-02-03T18:08:58.537
> 
> 标签：android, imageview

有几个构造函数可用于定义 ImageView。例如

```
1) public ImageView (Context context)
2) public ImageView (Context context, AttributeSet attrs)
3) public ImageView (Context context, AttributeSet attrs, int defStyle)** 
```

我对使用第二种和第三种构造函数感到困惑。基本上我不知道用什么来代替**AttributeSet。** 请提供一个编码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:22:08.683

这些构造函数在`View`文档中定义。以下是来自的参数说明[`View(Context, AttributeSet, int)`](http://developer.android.com/reference/android/view/View.html#View%28android.content.Context,%20android.util.AttributeSet,%20int%29)：

> **参数**
> 
> *   *context*    视图运行的上下文，通过它可以访问当前的主题、资源等。
> *   *attrs*        使视图膨胀的 XML 标记的属性。
> *   *defStyle*    应用于此视图的默认样式。如果为 0，则不会应用任何样式（超出主题中包含的样式）。这可能是一个属性资源，其值将从当前主题中检索，也可能是一个显式样式资源。

值得注意的是，如果你没有要传递的属性，你*可以*传递`null`代替 an 。`AttributeSet`

在编码方面`AttributeSet`，这是我用于自定义`TextView`类的一些代码：

```
public EKTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // ...
    if (attrs != null) {
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.LocalTextView);
        determineAttrs(context, a);
    }

    // ...
}
private void determineAttrs(Context c, TypedArray a) {
    String font = a.getString(R.styleable.fontName);
    if (font != null)
        mTypeface = Typeface.createFromAsset(c.getAssets(), "fonts/" + font);

    mCaps = a.getBoolean(R.styleable.allCaps, false);
} 
```

正如你所看到的，一旦你`TypedArray`从属性中得到一个，你就可以使用[它的各种方法](http://developer.android.com/reference/android/content/res/TypedArray.html)来收集每个属性。您可能要查看的其他代码是[or 的`View(Context, AttributeSet, int)`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/view/View.java#View.%3Cinit%3E%28android.content.Context%2Candroid.util.AttributeSet%2Cint%29)代码[`Resources.obtainStyledAttributes(AttributeSet, int[], int, int)`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/content/res/Resources.java#Resources.Theme.obtainStyledAttributes%28android.util.AttributeSet%2Cint%5B%5D%2Cint%2Cint%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:35:02.603

创建imageView的方式，ImageView with Context

```
ImageView image= new ImageView(context); 
```

在这里，当您要设置高度、宽度重力等值时，您需要设置

```
image.set****(); 
```

根据您需要使用的属性数量，不使用 setXXX() 方法。

2.使用属性集，您可以在单独的 xml 文件中的 res/values 文件夹中定义一组属性，如高度、宽度等，将 xml 文件传递​​给 getXml()

```
XmlPullParser parser = resources.getXml(yourxmlfilewithattribues);
 AttributeSet attributes = Xml.asAttributeSet(parser);
ImageView image=new ImageView(context,attributes); 
```

在这里，您还可以在 xml 中定义自定义属性。您可以使用 AttributeSet 类示例提供的方法来访问

```
getAttributeFloatValue(int index, float defaultValue) 
```

//返回'index'处属性的浮点值

# asp.net-mvc-3 - AWS Elastic Beanstalk：未收到数据：无法加载网页

> ID：14675545
> 
> 赞同：0
> 
> 时间：2013-02-03T18:09:05.053
> 
> 标签：asp.net-mvc-3, amazon-web-services, amazon-rds, amazon-elastic-beanstalk, cidr

我刚刚通过 Elastic Beanstalk 使用 SQL Server 部署了一个 .NET 应用程序。

似乎我新部署的应用程序无法连接到我的数据库。我刚刚关注了这个视频：[http](http://www.youtube.com/watch?v=z-N0z5K_WFI) ://www.youtube.com/watch?v= z-N0z5K_WFI（除了我在部署过程中遇到的问题，我不得不取消增量部署）

我能够使用 SQL 管理工作室连接到数据库。我还尝试在连接到亚马逊 RDS 数据库时在本地运行该应用程序并取得了成功。部署后，检查站点并尝试登录/注册，我收到此错误：

No data received 无法加载网页，因为服务器未发送数据。以下是一些建议： 稍后重新加载此网页。错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据。

我现在唯一想到的是我的 EC2 或应用程序无法连接到数据库。

这是 CIDR 问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:09:55.237

需要考虑的几件事 -

1.  您的 RDS 数据库实例的端口是否被阻塞？
2.  部署应用程序时，您应该在向导中看到一个页面，询问您是否希望将已部署 Elastic Beanstalk 实例的 EC2 安全组添加到数据库实例的 RDS 安全组中。您还需要勾选相关的 RDS 安全组。

还有一个来自去年 AWS re:Invent 会议的更新视频，展示了将基于 SQL Server 的应用程序部署到 RDS/Elastic Beanstalk - [http://youtu.be/5N352oeYmqE](http://youtu.be/5N352oeYmqE)

希望这可以帮助。

# db4o - 如何在 DB4O 中设置自定义 id 字段

> ID：14675546
> 
> 赞同：0
> 
> 时间：2013-02-03T18:09:08.783
> 
> 标签：db4o

我已多次阅读文档和示例，但不知道如何执行此操作。，

我正在尝试连接 DB4O 以使用我自己的自定义 ID 字段。根据文档，您可以定义自己的 ID，但据我所知，它们不会替换 Db4o 的内部 ID，因为它实际上不会使用这些 ID 来识别对象。

基本上所有示例都是告诉 Db4o 生成某种唯一 id 并将其编入索引，我看不到任何关于如何告诉它这是您应该使用的 ID 的地方。

是否可以在我们的模型上使用我们自己的 ID 替换用于跟踪关系的内部 ID？

*我们需要有自己的 ID，因为我们的系统严重依赖 REST。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:28:45.850

对此没有直接支持。您需要创建自己的机制。

*   最简单的方法：在 .NET 上使用 Guid。或者在 Java 中使用 UUID。在 Java[中：添加 UUID 支持](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/advanced_topics/type_handling/uuid_support.htm?SearchType=Stem&Highlight=UUIDs%7CUUID%7Cuuids%7Cuuid)：`configuration.common().add(new UuidSupport());`
*   使用回调创建[新的 id](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/platform_specific_issues/disconnected_objects/example_id_generator.htm)。在 TCP 客户端/服务器中不起作用。

另请参阅此[页面](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/platform_specific_issues/disconnected_objects/comparison_of_ids.htm)。

旁注：您构建了一个 REST 应用程序。它需要处理多少个请求？db4o 在内部本质上是单线程的。它只能处理非常有限的负载。

# javascript - 需要 Jquery 加载 ID？

> ID：14675549
> 
> 赞同：1
> 
> 时间：2013-02-03T18:09:15.557
> 
> 标签：javascript, jquery, html

所以我要做的是创建一个新的表格单元格，然后我想将这个网站的图像内容放入该表格单元格中，但是表格单元格没有 ID，我需要加载

```
$("#id").load("http://www.thisiswhyimbroke.com li:first img"); 
```

或者我可以做这样的事情，因为我不能给每个人单独的 ID。

```
var tdPic = document.createElement("td");
tdPic.innerHTML = load("http://www.thisiswhyimbroke.com li:first img"); 
```

# web-config - Sitecore：有效的项目名称

> ID：14675551
> 
> 赞同：2
> 
> 时间：2013-02-03T18:09:24.247
> 
> 标签：web-config, sitecore, names

如何扩展项目名称中的有效字符列表以包括æøåÆØÅ？

默认情况下，有效字符似乎由 web.config 中的此规则定义：

```
 <setting name="ItemNameValidation" value="^[\w\*\$][\w\s\-\$]*(\(\d{1,}\)){0,1}$" /> 
```

将正则表达式更改为：

```
<setting name="ItemNameValidation" value="^[\wæøåÆØÅ\*\$][\wæøåÆØÅ\s\-\$]*(\(\d{1,}\)){0,1}$" /> 
```

理论上应该允许角色，但这只会“杀死”网站核心。

编辑：允许点的正则表达式可以像这样完美地工作：

```
<setting name="ItemNameValidation" value="^[\w\*\$][\w\.\s\-\$]*(\(\d{1,}\)){0,1}$" /> 
```

所以我可以改变它的某些方面，只是不能改变 æøå 字符？！？！？

注意：
- 在创建和保存新内容项时，出于某种原因，可以从“页面编辑器”中在项目名称中使用æøå，但不能从“内容编辑器”中执行相同操作！
- 我们使用的是 SC v6.6.0（修订版 120918）。

**错误的原因是没有将文件保存为 UTF-8**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-14T11:46:10.177

确保您的配置文件保存为“UTF-8”

有点晚了，但作为答案添加:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:16:38.147

错误的原因是没有将文件保存为 UTF-8

# unit-testing - MVN 找不到测试

> ID：14675554
> 
> 赞同：1
> 
> 时间：2013-02-03T18:09:37.890
> 
> 标签：unit-testing, maven

运行时`mvn clean install`，一旦我们到达测试部分，我看到

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0 
```

我的surefire插件配置如下：

```
 <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <testFailureIgnore>false</testFailureIgnore>
                <includes>
                    <include>**/*Test*.java</include>
                </includes>
            </configuration>
        </plugin> 
```

测试文件名遵循这种格式。例如`A.java`有`ATest.java`它的测试

从中`mvn clean install`运行的目录结构是标准的

```
├── src
│   ├── main
│   │   ├── java
│   │   │   └── ***
│   └── test
│       └── java
│           └── *** 
```

个别测试用`@Test`和注释

```
import org.junit.Test; 
```

更多测试名称遵循以下约定

```
public void testSomething() throws Exception 
```

本着完整的精神，下面是我的pom

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
         xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <groupId>a.b.c</groupId>
    <artifactId>My_Project</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <repositories>
        <repository>
            <id>JBOSS_NEXUS</id>
            <url>http://repository.jboss.org/nexus/content/groups/public</url>
        </repository>
    </repositories>
    <build>
        <finalName>My_Project</finalName>
        <plugins>
            <plugin>
                <groupId>com.google.appengine</groupId>
                <artifactId>appengine-maven-plugin</artifactId>
                <version>1.7.4</version>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <extensions>false</extensions>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <vesion></vesion>
                <configuration>
                    <testFailureIgnore>false</testFailureIgnore>
                    <includes>
                        <include>**/*Test*.java</include>
                    </includes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <formats>
                        <format>xml</format>
                        <format>html</format>
                    </formats>
                    <check/>
                </configuration>
                <executions>
                    <execution>
                        <phase>clean</phase>
                        <goals>
                            <goal>cobertura</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    <reporting>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5.1</version>
            </plugin>
        </plugins>
    </reporting>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            ...
        </dependency>
    </dependencies>
</project> 
```

请问我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:39:19.133

如果信息如此分散，就很难提供帮助。您可能不能或不想透露更多信息，因此我们必须处理我们所看到的。

与我通常的代码的 一个区别`<scope>`是`test`

```
 <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency> 
```

此外，每个测试方法都需要用 注释`@Test`，而不是类。这可能是您的意思，但是这里的语言有点模棱两可。

由于您使用的是测试的默认设置、位置和命名，因此您可以完全删除该`maven-surefire-plugin`部分。

您可能需要告诉 maven 您要使用 Java 1.6：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin> 
```

# java - 二维数组如何在 MPJ 中作为对象传递

> ID：14675556
> 
> 赞同：0
> 
> 时间：2013-02-03T18:09:42.603
> 
> 标签：java, mpi, mpj-express

我正在尝试将二维数组作为 MPJ 库中的对象传递，但在这一行出现错误

```
Object sendobject = new Object[1];
sendobject[0] = (Object)g.adjMatrix;  
//Graph g = new Graph();
// adjmatrix is public member of class Graph having detail of 
// connecting nodes to each other 
```

我目前遵循[这个博客](http://mpjexpress.blogspot.com/search?updated-min=2009-01-01T00:00:00-08:00&updated-max=2010-01-01T00:00:00-08:00&max-results=6)的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:21:44.437

我不确定，为什么要创建一个包含一个元素的数组，但是：

```
Object sendobject = new Object[1]; 
```

不起作用。要么你想要一个数组：

```
Object[] sendobject = new Object[1]; 
```

或者你只想要一个`Object`

```
Object sendobject = (Object)g.adjMatrix; 
```

# c# - 在 Sql Server 2005 中确定时间后列如何更改其值

> ID：14675559
> 
> 赞同：0
> 
> 时间：2013-02-03T18:09:50.283
> 
> 标签：c#, sql, sql-server, database, sql-server-2005

我有一个包含列（id、title、contents、publishingDateTime、status）的表（tblMessage）。publishingDateTime 列是消息发布的日期。我想在到达其发布日期时间时自动将列（状态）的值从（待发布 - 或 - 从假变为真）更改。

在 Sql Server 2005 中怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:13:59.000

可能最简单的方法是根本不更改值。相反，使用计算列，其逻辑如下：

```
status as (case when publishingDateTime > getdate() then 'Published' else 'Pending' end) 
```

这在`create table`声明中并[在此处](http://msdn.microsoft.com/en-us/library/ms174979%28v=sql.90%29.aspx)进行了解释。

您还可以通过创建视图并通过视图对表进行所有访问来执行类似的操作（无论如何这通常是个好主意）。

例如，我的 create table 语句如下所示：

```
create table xxx (
    -- all your columns go here
    status as (case when publishingDateTime > getdate() then 'Published' else 'Pending' end)
) 
```

对于视图，您可以执行以下操作：

```
create view vw_SMS as
    select sms.*, 
           (case when publishingDateTime > getdate() then 'Published' else 'Pending'
            end) as status
    from SMS 
```

实际上最好不要`*`在视图中使用，而是列出所有列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:14:38.737

好吧，通常你的应用程序应该这样做恕我直言，

但是如果你只是想让 sql server 像这样

```
UPDATE tblMessage
SET status = 0
WHERE publishingDateTime <= GETDATE() 
```

然后创建一个在预定时间内运行它的代理作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:15:48.653

您可以创建一个 Transact-SQL 作业，该作业将执行一个存储过程，该存储过程将根据发布日期更新您的状态列。

请参阅此处的文档：

*   [创造就业机会](http://msdn.microsoft.com/en-us/library/ms186273%28v=sql.90%29.aspx)
*   [Transact-SQL 作业](http://msdn.microsoft.com/en-us/library/ms187910%28v=sql.90%29.aspx)

# ruby - 如何在 Makefile 中使用 rvm？

> ID：14675563
> 
> 赞同：2
> 
> 时间：2013-02-03T18:10:25.353
> 
> 标签：ruby, rvm, nvm

从事这个项目：[https ://github.com/cucumber/bool](https://github.com/cucumber/bool)

有一个 makefile 来构造各种项目，我想使用 RVM 能够在 ruby​​ 目录中切换 ruby​​ 目录中的东西，但是，当我给出 makefile 命令来切换 rubies 时，我得到了一个讨厌的错误

```
RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example. 
```

当然，如果我`rvm use 1.9.3`在命令行上发出它就可以正常工作，所以这是其他问题的症状，但我不确定是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:44:17.573

当您从 cron（或 Makefile，我希望）调用 RVM 时，设置正确的环境很重要。Scout 团队有一篇很棒的博客文章解释了这一点：

[http://blog.scoutapp.com/articles/2010/09/07/rvm-and-cron-in-production](http://blog.scoutapp.com/articles/2010/09/07/rvm-and-cron-in-production)

重要的部分是确保您拥有完整的登录 shell，以便您可以访问 RVM。

```
/bin/bash -l -c 'the_command_inside_makefile" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:36:31.100

这似乎对[RVM 包装脚本](http://deepakprasanna.blogspot.com/2011/06/rvm-wrappers.html)很有用，它可以让您生成一个 shell 脚本，该脚本将给定的 RVM ruby​​ 实例加载到该环境中，而无需使用正常的交互式 RVM 设置。

例如：

```
rvm wrapper 1.9.3@bool ruby bool 
```

... 将创建一个名为“bool”的包装脚本，并选择给定的 Ruby。

# java - 在方法中生成随机数

> ID：14675568
> 
> 赞同：1
> 
> 时间：2013-02-03T18:11:04.487
> 
> 标签：java, random, dice

我做了代码，将一个介于 1 和 100 之间的随机数作为任务 A），然后我如何理解如果超过 50 的第一个值生成介于 1 和 50 之间的第二个随机数（我认为）任务 B）

请任何人解释一下任务 C 和 D 是什么，完全不明白怎么做..(((请帮助建议或解释任务 C 和 D。

谢谢....

任务：

编写一个生成随机数的程序：

a) +编写一个返回1到100范围内的随机整数的方法。

b) 然后添加另一个方法，该方法接受一个指定最高数字的参数——即，如果您传递 50，它会返回一个介于 1 和 50 之间的随机数。测试您的随机方法并确保它有效。

c) 编写另一个方法，以便向它传递两个值——你想要从中获得最大值的范围的顶部和底部——即，如果你传递它 10 和 20，它会返回一个介于 10 和 20 之间的随机数。

d）然后编写另一个方法，以便如果重复调用它不会返回两个相同的数字？因此，一旦生成并返回了一个随机数，该方法就不会再次返回该数字。为此，您必须存储生成的每个数字。

```
import java.util.Random;

public class ranGen {

    public Integer random (Integer integer){
        Random rand = new Random();;
        int min=0, max=100;
        int randomNum = rand.nextInt(max - min + 1) + min;

        System.out.println(randomNum);
        return randomNum;
        }

    public void random50 (Integer integer){

        Random rand = new Random();;
        int min=0, max=50;
        int randomNum = rand.nextInt(max - min +1) + min;

        System.out.println(randomNum);
        }

    public static void main(String[] args) {
        ranGen process = new ranGen();

        if(process.random(null) > 50){
            process.random50(null);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:31:57.313

C：

```
public Integer randomC(Integer min, Integer max) {
    //int min = 0, max = 0;
    ...
} 
```

d:

```
public class ranGen {
    ArrayList<Integer> nums;
    ...

    public Integer randomD() {
        ...
        randomNum = rand.nextInt(max - min + 1) + min;
        while(nums.Exists(randomNum)) {
            randomNum = rand.nextInt(max - min + 1) + min;
        }
        nums.Add(randomNum);
        return randomNum;
    }
} 
```

注意：此处显示的 arraylist 和方法仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:34:46.610

看来，作业的目标是让您了解方法参数是什么。第一步是编写一个方法，它返回一个 1 到 100 范围内的随机整数。所以这个方法没有任何参数。它的签名应该是

```
public int generateRandomNumberBetween0And100() 
```

第二步是编写一个方法，该方法接受一个指定顶部编号的参数。因此，它的签名应该是：

```
public int generateRandomNumberBetween0And(int topValue) 
```

第三步是编写一个以两个值作为参数的方法：底部值和顶部值。因此，它的签名应该是：

```
public int generateRandomNumberBetween(int bottomValue, int topValue) 
```

最后一步有点棘手。它要求您记住方法已经生成的值，并避免再次生成它们。没有参数。它的签名应该是

```
public int generateUniqueRandomNumber() 
```

其实现基本上应该做到以下几点：

```
1\. generate random number
2\. if random number is in the set of already generated numbers, go to 1
3\. store the generated number in the set of already generated numbers
4\. return the generated number. 
```

当然，已经生成的数字集在开始时是空的。

请注意，您应该使用`int`而不是`Integer`. 没有理由接受 null 作为参数，并且方法永远不应该返回 null。所以`int`应该首选原始类型。

另请注意，这些方法不应*打印*生成的数字，而是打印`return`它。所以他们应该有`int`作为他们的返回类型，而不是`void`.

按照惯例，类以大写字母开头，并且不要缩写单词。所以你的班级应该命名为`RandomGenerator`.

# php - 带有 php 和 mysql 的 2 级子菜单的菜单

> ID：14675571
> 
> 赞同：1
> 
> 时间：2013-02-03T18:11:11.150
> 
> 标签：php

我想要制作带有 2 级子菜单的菜单。最终，HTML 应该像下面的代码：

```
<ul>
   <li><a href="#">elektronikos prekes</a>
       <ul>
           <li><a href="#">dar kaskas </a>
               <ul>
                   <li><a href="#">ka ka 2</a></li>
               </ul>
           </li>
           <li><a href="#">tranzistoriai </a>
               <ul>
                   <li><a href="#">sub 1</a></li>
                   <li><a href="#">tikri 1</a></li>
               </ul>
           </li>
      </ul>
 </li>
 <li><a href="#">kompiuteriai</a>
     <ul>
         <li><a href="#">nesiojami 8</a></li>
     </ul>
 </li>
</ul> 
```

这是我的代码：

```
$queryreg=mysql_query("select distinct a.meniu as meniu , b.sub as sub,  c.sub2 as sub2,a.meniu_id as m_id, b.sub_id as s_id,
c.sub2_id as s_id2, count(distinct p.id) as pre 
from meniu a
LEFT OUTER JOIN sub AS b ON ( a.meniu_id = b.meniu_id and b.rodyti='1' )
LEFT OUTER JOIN preke AS p ON ( b.sub = p.sub and a.meniu=p.meniu)
LEFT OUTER JOIN sub2 AS c ON ( b.sub_id = c.sub_id AND c.rodyti='1')
LEFT OUTER JOIN preke AS pr ON ( pr.sub2 = c.sub2 and pr.sub=b.sub and pr.meniu=a.meniu)
where a.rodyti='1' and a.meniu='elektronikos prekes' or a.meniu='kompiuteriai'
group by a.meniu, a.meniu_id, b.sub, b.sub_id, c.sub2, c.sub_id");
$AnkstesnisSub='';
$ankstesnisMeniu='';
$output = $ankstesnisMeniu.$AnkstesnisSub = '';
echo'<ul>';
while ($row = mysql_fetch_assoc ($queryreg))
{
    if ($row['meniu'] != $ankstesnisMeniu )
    {
        if (!empty ($ankstesnisMeniu) )
        {
            $output .= " </ul></li></ul></li>";
        }
        $output .= '<li><a href="#">' . $row['meniu'] . "</a><ul>";
        $ankstesnisMeniu = $row['meniu'];
    }
    if ( $row['sub'] != $AnkstesnisSub)
    {
        if (!empty ($AnkstesnisSub))
        {
            $output .= "</ul></li>";
        }
        if($row['sub2']==NULL){$prekiu_kiekis = $row['pre'];}
        elseif($row['sub2']!=NULL){$prekiu_kiekis ='';}
        $output .= '<li><a href="#">' . $row['sub'] . " $prekiu_kiekis</a><ul>";
        $AnkstesnisSub = $row['sub'];
        $prevID2 = $row['s_id'];
    }
    if($row['sub2']!=NULL){$prekiu_kiekis = $row['pre'];}
    elseif($row['sub2']==NULL){$prekiu_kiekis ='';}
    $output .= '<li><a href="#">' . $row['sub2'] ." $prekiu_kiekis</a></li>";
    $prevID3=$row['sub2'];
}
$output = '' . $output . "</ul></li></ul></li>";        
echo"$output";
echo'</ul>'; 
```

但我得到：

```
 <ul>
     <li><a href="#">elektronikos prekes</a>
         <ul>
             <li><a href="#">dar kaskas</a>
                  <ul>
                      <li><a href="#">ka ka 2</a></li>
                  </ul>
             </li>
             <li><a href="#">tranzistoriai</a>
                  <ul>
                      <li><a href="#">sub 1</a></li>
                      <li><a href="#">tikri 1</a></li>
                  </ul>
             </li>
        </ul>
   </li>
   <li><a href="#">kompiuteriai</a>
       <ul></ul>
   </li>
   <li><a href="#">nesiojami 8</a>
       <ul>
           <li><a href="#"></a></li>
       </ul>
   </li>
 </ul>
 </li></ul> 
```

第一个菜单项一切正常，但第二个错误。也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:27:01.717

我认为这是非常复杂的代码，为什么不将其分开为 2 个表呢？

> top_menu => link_id、href、link_text、count_sub
> 
> sub_menu => link_id, parent_id, href, link_text, count_sub

获取菜单的代码：

```
$query = mysql_query("SELECT * FROM top_menu");
while ( $row = mysql_fetch_assoc($queryreg) ) 
     {
        echo '<li>' . $row['href'] . '</li>';
        if( $row['subcount'] != 0 ) {
            { make query for the sub_menu and do more while... and in the while you can add more }
        }
     } 
```

等等..我认为它更干净。

# performance - 使用 Range 提高性能

> ID：14675572
> 
> 赞同：1
> 
> 时间：2013-02-03T18:11:15.383
> 
> 标签：performance, excel, vba

我是 VBA 的新手，我现在正在从事一个速度绝对是一切的项目。因此，当我编写代码时，我注意到工作表中的许多单元格都命名为范围，并且在函数中明确引用，如下所示：

```
function a() 

    if range("x") > range("y") then

    end if

    ... (just imagine a lot of named ranges)

end function 
```

我的问题是，我是否应该修改这些函数，以便将这些命名范围中的值作为参数传入，如下所示：

```
'i can pass in the correct cells when i call the function
function a(x as int, y as int) 

    if x > y then

    end if

    ...

end function 
```

这会加快速度吗？这些函数几乎不断地被调用（除非进程被故意置于睡眠状态）以与 RTD 服务器通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:45:12.570

VBA 在与工作表建立“连接”方面比在处理自己的变量方面要慢得多。如果您的函数多次引用同一个单元格（或范围），那么在 VBA 与它们交互之前将它们加载到内存中将是有利的。例如，如果`range("x")>range("y")`是函数中唯一被引用`x`或`y`引用的时间，则无关紧要。如果你有`if range("x")>range("a")`等等`if range("x")>range("b")`，那么你最好开始你的功能

```
varX=range("x")
varY=range("y") 
```

然后使用 VBA 变量。

似乎通过参数化函数，如您的第二个示例所示，可以完成我的建议。这可能是也可能不是，因为 Excel 可能只是将这些变量视为对工作表的引用，而不是值（我不确定）。为了安全起见，您应该在函数的开头专门定义新变量，然后只在函数的其余部分引用这些变量。

总结上面的文字墙，您的目标应该是尽量减少 VBA“连接”到工作表的次数。

# d3.js - .transition() 打破了我的差异图表

> ID：14675575
> 
> 赞同：1
> 
> 时间：2013-02-03T18:11:43.730
> 
> 标签：d3.js, transition

出于某种原因，添加过渡会破坏我的两个剪辑路径。这完美地工作：

```
// Append path first
var svg = d3.select(this).selectAll("svg").data([data]);
var gEnter = svg.enter().append("svg").append("g");
gEnter.append("clipPath").attr("class", "above").attr("id", "clip-above").append("path");
gEnter.append("clipPath").attr("class", "below").attr("id", "clip-below").append("path");

// Later, attach data
var g = svg.select("g")
g.select("#clip-above path").attr("d", area.y0(0));
g.select("#clip-below path").attr("d", area.y0(height)); 
```

但是如果我添加一个过渡，整个区域就会被着色`area-below`：

```
// Later, attach data
var g = svg.select("g")
g.select("#clip-above path").transition().duration(500).attr("d", area.y0(0));
g.select("#clip-below path").transition().duration(500).attr("d", area.y0(height)); 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:47:35.393

这是`d3.v2`. 始终确保更新！

# c# - “无法访问已处置的对象”

> ID：14675582
> 
> 赞同：7
> 
> 时间：2013-02-03T18:12:45.263
> 
> 标签：c#, linq-to-sql

我在访问从 linq 到 sql 的关联对象时遇到问题。我有一个类文章和用户。每个文章都有一个卖家（即用户），每个用户都有许多文章。我通过协会解决了这个问题。

这就是我的 linq to sql 类的样子： ![linq 到 sql 类](../Images/53246c8402bcf2fb64ac86254bdafea8.png)

这是协会：

![协会](../Images/18de978ef5bba8a068b964f4342175d8.png)

这是 Article.Seller 背后的代码：

```
[global::System.Data.Linq.Mapping.AssociationAttribute(Name="User_Article", Storage="_Seller", ThisKey="SellerID", OtherKey="ID", IsForeignKey=true)]
public User Seller
{
    get
    {
        return this._Seller.Entity;
    }
    set
    {
                   ...
    }
} 
```

现在，当我想获取文章的卖家时，我收到以下错误：

> 无法访问已处置的对象。对象名称：“Dispose 后访问的 DataContext。”。

错误发生在卖家的获取中。

任何想法如何处理这个？

编辑：这是使用 DataContext 的代码：

```
public static List<Article> Read()
{
    using (uDataContext dbx = new uDataContext())
    {
        return dbx.Article.ToList();
    }
} 
```

该列表的使用如下：

```
List<Article> articles = ArticleDALC.Read();

foreach (Article article in articles)
{
    // Exception appears here!
    User seller = article.Seller;
    ....
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T19:19:28.410

找到的解决方案：

`DeferredLoadingEnabled`使用 DataContext 时只需将属性设置为 false：

```
public static List<Article> Read()
{
    using (uDataContext dbx = new uDataContext())
    {
        dbx.DeferredLoadingEnabled = false;
        return dbx.Article.ToList();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T18:14:38.927

不要处置您的 DataContext。

所有 LINQ 对象都与一个 DataContext 相关联。您可能正在访问`using`创建 DataContext 的块之外的对象。

# mongodb - 使用 ; 在 MongoDB 中分隔查询

> ID：14675593
> 
> 赞同：0
> 
> 时间：2013-02-03T18:14:08.677
> 
> 标签：mongodb, atomic, database

快速提问。

我有许多更新命令要在我的 MongoDB 数据库上运行。这些发生在用户完成许多任务并希望将所有更新推送到服务器之后。我将更新几个集合中的几个文档。

如果我想确保这些更新是原子的，并且来自其他用户的其他同时查询或命令不会干扰，我可以将我的查询分开`;`吗？

简化示例：

```
db.cities.find({"asciiname":"Zamin Sukhteh"});db.cities.find({"asciiname":"Konab-e Vasat"}) 
```

以上会导致两个单独的原子查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:35:33.997

虽然您不能使用分隔符来分隔 shell 中的命令以引入原子性，但您可以使用 db.eval。

如果您只使用 shell（您在评论中说过），则可以使用[db.eval](http://docs.mongodb.org/manual/reference/method/db.eval/#db.eval)函数在执行一段 JavaScript 代码时执行数据库范围的锁定。这不是您通常想要做的事情（因为它默认阻止所有写入和读取），但在您在上面描述的情况下（再次，评论），听起来它符合您的需求。

```
db.eval( function() {
    var one = db.cities.find({"asciiname":"Zamin Sukhteh"});
    var two = db.cities.find({"asciiname":"Konab-e Vasat"});
    // other work ...
}); 
```

更新（解决评论）：

如果您想在 MongoDB 中进行高效的原子（类似）更新，有几个选项：

1.  将所有内容放在一个文档中。这在 MongoDB 中保证是原子的。但是，这通常不适用于复杂的文档模型（或大型文档）。
2.  如果文档存在依赖关系，请考虑放置依赖文档的新“版本”，然后，只有在这些都设置好之后，才将链接这些文档的最终文档放入数据库中。如果没有最终的“链接”，旧文档不应该看到新版本。根据数据的使用方式，您可能会非常快速地删除旧版本（如果需要，也可以定期删除）。
3.  接受偶尔会出现不匹配并检测它们（然后重新运行查询以获取新数据）。当您遍历文档结构时，您也许可以使用时间戳或版本来识别这些情况。
4.  将数据缓存在其他地方作为常见查询的完整结构
5.  确定 MongoDB 不适合您的要求。

# mysql - MySQL - 为每 X 行选择 1

> ID：14675595
> 
> 赞同：0
> 
> 时间：2013-02-03T18:14:31.910
> 
> 标签：mysql, database, where

我有一个包含一些字段的数据库，包括`id`和`store_id`。`id`是 AI 和`store_id`0 到 7 之间的整数。

我的目标是为每 2 行选择例如 1，所以我会得到行 id=0, id=2, id=4 .. 等等。我可以这样做：

```
SELECT * FROM `table` WHERE MOD(id,2)=0 
```

但我的问题是`store_id`因为我想为每 x 行获得 1`WHERE store_id=y`

你能帮我解决这个问题吗？如果您需要任何其他详细信息，请随时询问，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:25:41.760

首先 ：

```
SELECT * FROM table WHERE MOD(id, 2) = 0 AND store_id = y 
```

似乎是一个想法，但是让所有“store_id = y”都具有奇数 id 呢？

那么，如何运行一个子查询来应用过滤器，向结果添加一个计数器，然后过滤计数器：

```
set @counter = 0;
SELECT id, store_id FROM
(
    SELECT id, store_id,
    @counter := @counter + 1 as counter
    FROM foo WHERE store_id = 2
) AS sub
WHERE MOD(counter, 2) = 0 
```

# java - 赋值语句不起作用

> ID：14675596
> 
> 赞同：0
> 
> 时间：2013-02-03T18:14:32.293
> 
> 标签：java, collections, shuffle

```
List<Integer> list = Collections.shuffle(list); 
```

这个任务没用。它给出了“不兼容的类型”，即使它显然是 a`List`并且`.shuffle()`需要 a `List`。那么为什么这个东西不起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:15:16.857

检查[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)。`Collections.shuffle`有一个`void`返回类型。创建你的`List` *第一个*，然后随机播放。例如：

```
List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);
Collections.shuffle(list);
System.out.println("Shuffled List: " + list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:18:52.680

其实有两个问题：

1.  **在初始化/声明变量之前，您无法访问变量**，即使代码`List list = new ArrayList(list);`也不起作用，因为赋值的右操作数在左操作数之前被解析。
2.  正如@Reimeus 所提到的，**`Collections.shuffle()`有一个`void`返回类型**，因此你不能将它（“结果”）分配给一个变量。该方法`shuffle()`更改了作为输入给出的相同列表（对于函数式程序员可能不直观）。

# html - CSS 上的动态网格

> ID：14675599
> 
> 赞同：0
> 
> 时间：2013-02-03T18:14:39.910
> 
> 标签：html, css

```
<div class="leftx">left one</div> 
<div class="rightx">right one<br><br><br></div> 
<div class="leftx">left two</div> 
<div class="rightx">right two</div> 

 .leftx{ 
float:left;
width:50%;
}

.rightx{
float:left; 
width:50%;
} 
```

嗨，上面的代码输出如下图所示，我需要的是，即使右侧或左侧有`<br>`，另一侧也不应该受到影响。

例如**左一**和**左二**之间不应该有空格。应该是动态的。谢谢

**例子 ：** ![例子](../Images/7093a35ccd045d4e4820247f69530cd4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:25:06.607

您可以使用 css clear 使您的代码变为

```
.leftx {
float:left;    
clear: left;
width:50%;
}

.rightx {
float:right;
clear: right;
width:50%;
} 
```

可以在这里看到：http: [//jsfiddle.net/YphGr/](http://jsfiddle.net/YphGr/)

# android - 在Android框架中添加代码的好目录/位置是什么

> ID：14675600
> 
> 赞同：0
> 
> 时间：2013-02-03T18:14:43.030
> 
> 标签：android, android-source, android-framework

我有两个疑问需要提示或帮助。

基本上我正在尝试将一些库源添加到框架中，以便可以从应用程序调用这些 api，也可以从我的库中调用 JNI 文件。

我尝试在其中添加我的库 `framework/base/core/java/android/bluetooth/"library folders"`，因为这个库与蓝牙相关，所以我想在这里添加它。现在我在某处读到应该在`base/core/`文件夹中添加新库。

任何人都请建议添加文件的好位置（Java和aidl）。

另一个问题是如何将文件夹中`jni`可用的`external/`文件与我的库链接。我正在尝试几天，但没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:00:31.463

如果您制作自己使用的图像并且您尝试添加的 api 与蓝牙相关，那么 `framework/base/core/java/android/bluetooth/`是放置代码的好地方。

`framework/base/core/java/`- 是您放置 java 代码
`framework/base/core/java/android/*`的文件夹 - 此文件夹中的代码将作为 API 添加（如果您未指定 @hide 标签）
`framework/base/core/java/com/*`- 代码将不会作为 API 添加。

至于第二个问题，请尝试查看[“Remixing Android”](http://marakana.com/s/post/1044/remixing_android)帖子。我希望它会帮助你。如果没有，您可以进一步说明您的问题，以便 SO 社区有机会帮助您。

# r - 在 R 中比较和可视化两个样本的密度

> ID：14675601
> 
> 赞同：0
> 
> 时间：2013-02-03T18:10:25.643
> 
> 标签：r, pdf

我必须比较 R 中两个样本的密度函数。令人惊讶的是，无论我使用什么函数 plot()、lines() 或 ggplot，两个样本中的一个要么不出现，要么两个区域不同且不能等于一个. 我希望两个区域在同一图表上相等，以便轻松确定样本的 pdf 大于另一个的 pdf 的横坐标值集。我该如何解决？非常感谢您的帮助。

1/ 使用 ggplot，脚本是：

```
require ("ggplot2")
p2<-density(tabgroupcl2$B, n=1000)
p1<-density(tabgroupcl1$B, n=1000)
dat <- data.frame(dens = c(p1$x, p2$x)
                   , lines = rep(c("cl1", "cl2")), each=1000)
ggplot(dat,aes(x = dens, fill = lines)) + geom_density(alpha = 0.5) 
```

2/ 其中密度（tabgroupcl2$B）：

```
Call:
        density.default(x = tabgroupcl2$B)

Data: tabgroupcl2$B (348 obs.); Bandwidth 'bw' = 0.001689

       x                y           
 Min.   :-91.95   Min.   :  0.0000  
 1st Qu.:-34.07   1st Qu.:  0.0000  
 Median : 23.80   Median :  0.0000  
 Mean   : 23.80   Mean   :  0.4613  
 3rd Qu.: 81.68   3rd Qu.:  0.0000  
 Max.   :139.56   Max.   :179.2431 
```

3/ 其中密度（tabgroupcl1$B）：

```
Call:
        density.default(x = tabgroupcl1$B)

Data: tabgroupcl1$B (9 obs.);   Bandwidth 'bw' = 0.2738

       x                y            
 Min.   :-2.607   Min.   :0.0000000  
 1st Qu.: 1.495   1st Qu.:0.0000000  
 Median : 5.598   Median :0.0001349  
 Mean   : 5.598   Mean   :0.0608673  
 3rd Qu.: 9.700   3rd Qu.:0.0548682  
 Max.   :13.802   Max.   :0.7583033 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:45:11.787

看起来您正在使用 ggplot() 函数中密度对象的 x 值，就好像它们是原始数据一样。我不明白你为什么要这样做，但如果是这样，你还需要使用 y 值 - 而且你根本不需要 ggplot 中的密度统计数据。或者，让密度统计数据完成工作并使用您的原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:56:31.743

彼得埃利斯的回答完全正确。这是一个“基础”示例，说明如何估计和绘制同一轴上两个不同样本的密度：

```
x <- rnorm(1000, mean=3, sd=2)
y <- rnorm(500, mean=3.5, sd=3)

dx <- density(x)
dy <- density(y)

plot.new()
plot.window(xlim=range(c(dx$x, dy$x)), ylim=range(c(dx$y, dy$y)))
with(dx, lines(x, y))
with(dy, lines(x, y, lty=2))
axis(1)
axis(2)
legend(topright, lty=1:2, c('x', 'y'))
mtext(side=1, line=2, 'Observed values')
mtext(side=2, line=2, 'Estimated probability mass')
title('Smoothed Density Estimates for 2-sample experiment') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:15:51.820

![在此处输入图像描述](../Images/9cc51d9463d7feea6a10a5c628830a34.png)这就是我在一个图中覆盖两个数据集列的方式：

在这里，我在每个数据框中创建一个新列（samediff），并在列中重复文本以识别它。 `same_auditor$samediff <- "same" diff_auditor$samediff <- "diff"`

组合绘图的数据集。 `samescore <- same_auditor$Audit_Score diffscore <- diff_auditor$Audit_Score sameDiffcombined <- rbind(diff_auditor,same_auditor)`

`ggplot(sameDiffcombined, aes(Audit_Score, fill = samediff)) + geom_density(alpha = 0.5)`

# c# - 在 WCF IDispatchOperationSelector 中查找合同和操作

> ID：14675602
> 
> 赞同：1
> 
> 时间：2013-02-03T18:14:51.183
> 
> 标签：c#, wcf, authentication, idispatchmessageinspector

我已经定义了一个实现 IDispatchOperationSelector 的自定义 OperationSelector，以便我可以在执行该方法之前拦截来自客户端的消息。我这样做是为了检查消息中包含的公钥/私钥值，并在需要时抛出授权错误，而无需在我的服务中放置任何身份验证逻辑。

到目前为止，这一切都很好，但我想为每个服务操作指定一个 [AuthenticationType] 属性，我可以检查这个 OperationSelector。有没有我可以参考，或者在OperationSelector中找到对应的合同和操作？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:21:55.217

我建议将两者混合`MessageInspector`应用于整个合约，然后创建一个`OperationBehavior`将在底层注册操作名称的`MessageInspector`.

类似于此处显示的内容：http: [//social.msdn.microsoft.com/Forums/en-US/wcf/thread/bcd94cf9-2881-4081-a05b-771a6e6f9c06/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/bcd94cf9-2881-4081-a05b-771a6e6f9c06/)（Carlos Figueira 的回答）

这样，您的消息检查器最终会得到一个包含该属性的所有已注册操作的列表，并且检查器可以识别哪些需要验证，哪些不需要。

# vb.net - 进度条上传到 FTP

> ID：14675603
> 
> 赞同：0
> 
> 时间：2013-02-03T18:14:53.183
> 
> 标签：vb.net

我想将文件上传到我的 FTP 服务器，凭据的值是 userlabel passlabel 和 servlabel，这些都是凭据的相应标签。 Passlabel 和 userlabel 实际上是混合的。 pass 是用户，而 userlabel 是密码。我想实现一个prgressbar，但我不知道该怎么做有人请帮忙

到目前为止，这是我的代码。

```
Private Sub BW_DoWork(ByVal sender As System.Object, 
                      ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BW.DoWork

    Dim clsRequest As System.Net.FtpWebRequest = _
            DirectCast(System.Net.WebRequest.Create(ServLabel.Text & 
                                                    TextBox1.Text), 
                                                    System.Net.FtpWebRequest)

    clsRequest.Credentials = New System.Net.NetworkCredential(PassLabel.Text, UserLabel.Text)
    clsRequest.Method = System.Net.WebRequestMethods.Ftp.UploadFile

    ' read in file...
    Dim bFile() As Byte = System.IO.File.ReadAllBytes(txtFile.Text)

    ' upload file...
    Dim clsStream As System.IO.Stream = _
        clsRequest.GetRequestStream()

    clsStream.Write(bFile, 0, bFile.Length)
    clsStream.Close()
    clsStream.Dispose()

    BW.ReportProgress(clsStream.Position.ToString)

    MsgBox("File Is Now In Database", MsgBoxStyle.OkOnly, "Upload Complete")

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:24:15.040

您可以只将数组的一部分传递`bFile`给`clsStream.Write()`方法并重复它，直到所有部分都写入流。

```
PartsCount = 100

PartsLength = bFile.Length \ PartsCount     
If PartLength * PartsCount = bFile.Length Then PartsCount -= 1

For i as Integer = 0 to PartsCount
   If i <> PartsCount Then
      clsStream.Write(bFile, i * PartsLength, PartLength)
   Else
      clsStream.Write(bFile, i * PartsLength, bFile.Length - (i * PartsLength))
   End If 

   clsStream.Flush()

   'calculate the progess here
Next

clsStream.Close() 
```

# css - 文字不会环绕图像

> ID：14675604
> 
> 赞同：1
> 
> 时间：2013-02-03T18:14:57.690
> 
> 标签：css, image, word-wrap

我试图将我的文字包裹在图像周围，但由于某种原因它不是。

[![图像显示它的样子](../Images/4fc7920243377b66b41355d74d217419.png)](https://i.stack.imgur.com/PJhiH.jpg) .

***CSS：***

```
.historyimage {
   float: right;
   margin-top: 260px;
   padding: 10px;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:20:17.527

如果您在谈论*历史记录*块的第一段，则该空间由`margin-top`您的图像占用。所以第一段不能使用那个空间。

如果您只希望第二段*环绕***图像**，请在 HTML 代码中输入：

*   你的第一段
*   你的形象
*   你的第二段

并删除它`margin-top`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:20:37.857

试试[这个](http://www.adobe.com/devnet/html5/articles/css3-regions.html)......也许你需要什么......

**更新**

试试这个...

```
.historyimage {
    float: right;
    top: 260px;
    padding: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T19:08:56.537

```
<div id="container" style="width: 200px;">
    <div id="paragraph1">paragraph 1 text</div>
    <div id="image" style="float: right; width: 50px;">testing testing testing</div> <!-- you would put your image here. float this to the right, no margin -->
    <div id="paragraph2">paragraph 2 text paragraph 2 text paragraph 2 text paragraph 2 text paragraph 2 text paragraph 2 text </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T19:42:18.423

如果您想将图片置于文本底部，最简单的方法是将 img 代码插入您希望显示图像的位置。

您可以查看[http://jsfiddle.net/qh4br/1/](http://jsfiddle.net/qh4br/1/)以获取有关图像位置的更多信息。

stakoverflow使用不当见谅，这是我的第一篇文章... 代码的好版本在jsfidle页面...

```
<div class="right-side">
 Nullam consectetur, elit sit amet interdum lobortis, urna sapien eleifend arcu, at imperdiet est lacus a neque.
 <img src="http://image1.masterfile.com/em_w/00/60/67/700-00606730w.jpg" width="50" />
Nam blandit mi tortor. Nullam pellentesque facilisis leo in aliquet. Nullam consectetur orci eu ligula laoreet molestie. Nam quis augue enim, ut euismod enim. Integer sit amet consectetur felis. Nam turpis lorem, dictum vel semper ac, rhoncus in metus. 
</div> 
```

# lambda-calculus - 如何解释 lambda 演算表达式？

> ID：14675606
> 
> 赞同：1
> 
> 时间：2013-02-03T18:15:08.037
> 
> 标签：lambda-calculus

假设我得到了表达式（我将 l 称为 lambda）：

lx.f1 f2 x

其中 f1 和 f2 是函数，x 假设为某个数字。

你如何解释这个表达？lx.(f1 f2) x 和 lx.f1 (f2 x) 一样吗？

例如，lx.(not eq0) x 和 lx.not (eq0 x) 的结果会有什么不同？（eq0 是一个函数，如果 parm 等于 0 并且 not 是众所周知的 not 函数，则返回 true ）

更正式地说 T=lx.ly.x ,F=lx.ly.y ,not = lx.xFT 和 eq0 = lx.x(ly.F)T

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:46:36.720

`f1 f2 x`是一样的`(f1 f2) x`。函数应用是左关联的。

> ln.(f1 f2) x 是否与 ln.f1 (f2 x) 相同？

一点都不。`(f1 f2) x`调用`f1`with`f2`作为其参数，然后调用结果函数`x`作为其参数。`f1 (f2 x)`调用`f2`with`x`作为它的参数，然后调用`f1`它的结果`f2 x`作为它的参数。

> ln.(not eq0) x 和 ln.not (eq0 x)？

如果我们谈论的是类型化的 lambda 演算并`not`期望布尔值作为参数，则前者只会导致类型错误（因为`eq0`是函数而不是布尔值）。如果我们谈论的是无类型的 lambda 演算，`true`并且`false`表示为函数，它取决于如何`not`定义以及如何表示`true`和`false`表示。

如果`true`和`false`是 Church 布尔值，即`true`是一个返回其第一个参数`false`的双参数函数，并且是一个返回其第二个参数的双参数函数，则`not`等价于该`flip`函数，即它接受一个双参数函数并返回一个二-argument 函数，其参数已被反转。所以`(not eq0) x`将返回一个函数，当应用于其他两个参数`y`和`z`时，将评估为`((eq0 y) x) z`。所以如果`y`为 0，则返回`x`，否则返回`z`。

# .htaccess - htaccess 重定向匹配 url 到祖父目录

> ID：14675609
> 
> 赞同：1
> 
> 时间：2013-02-03T18:15:32.183
> 
> 标签：.htaccess, mod-rewrite, http-status-code-301

搜索引擎会定期访问我的网站以查找它随机生成的不存在的页面。我想在我的 htaccess 文件中使用 301 规则来结束这种愚蠢。

最常见的地址是 site.tld/blog/welcome-back/ **x** /xx/ 其中 x 是一个随机数，但有时我会在 site.tld/blog/welcome-back/ **xx** /xx/ 或文本而不是数字上得到点击.

我想将所有这些点击重定向到真实的现有页面 /blog/welcome-back/

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:38:40.760

这应该做你需要的：

```
RewriteEngine On
RewriteRule ^blog/welcome-back/.+$ http://site.tld/blog/welcome-back/ [R=301,L] 
```

# d3.js - 相同的 d3.js 抛出 Invalid Charecter 错误

> ID：14675611
> 
> 赞同：1
> 
> 时间：2013-02-03T18:15:55.013
> 
> 标签：d3.js

我刚刚下载了 d3.js 并包含在 cubism 示例中。当我尝试通过 IIS 加载卷轴示例时，相同的 d3.js 给出了无效的字符错误。

以下是它引发错误的错误。[我同意这条线有一些特殊的人物，但它是在立体派](http://square.github.com/cubism/)例子中处理的，但为什么不在showreel 中[呢](http://bl.ocks.org/1256572)？

```
var sinφ0 = Math.sin(φ0), n = (sinφ0 + Math.sin(φ1)) / 2, C = 1 + sinφ0 * (2 * n - sinφ0), ρ0 = Math.sqrt(C) / n; 
```

我正在尝试通过 IIS 加载。这个 showreel 示例的任何工作代码？

有没有办法让这些图表垂直而不是水平？

而不是加载本地文件如果我直接从给定的网址加载

那么下面这 3 个 URL 返回 404 错误，这 3 个文件的任何代码？

```
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.csv.js?2.3.0"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?2.3.0"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.time.js?2.3.0"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T08:58:22.470

您不再需要单独的 d3.csv.js、d3.layout.js 和 d3.time.js。只需从 d3js.org 站点下载 d3.v2.js 或最新的 d3.v3.js 并删除以上三行，因为它们是对不再存在的位置的调用。

尝试在浏览器中打开[http://mbostock.github.com/d3/d3.time.js?2.3.0](http://mbostock.github.com/d3/d3.time.js?2.3.0)会返回 404 错误

但是，如果您尝试[http://mbostock.github.io/d3/d3.v2.js?2.3.0](http://mbostock.github.io/d3/d3.v2.js?2.3.0)它会返回文件（就像它应该的那样）

# php - 页面加载延迟后使用javascript淡入php内的div？

> ID：14675613
> 
> 赞同：0
> 
> 时间：2013-02-03T18:15:59.437
> 
> 标签：php, javascript

嗨，有谁知道您是否可以控制一个包含在 php 中的 div，如下所示？

我想尝试找到一种在页面加载时延迟 3 秒后使用 javascript 淡入 div 的方法？

谁能告诉我这样做的方法？

我会想象它是这样的：

```
<script>

jQuery(document).ready(function($){ 
$('.dashboard_intro').hide().delay(2000).fadeIn(2000); 
$('.dashboard_intro_arrow').hide().delay(2000).fadeIn(2000); 
$('.dashboard_intro_text').hide().delay(2000).fadeIn(2000);  
$('.exit_intro').hide().delay(2000).fadeIn(2000);  

});

</SCRIPT>

<?php

$dashboard_intro = dashboard_intro();
while ($intro = mysql_fetch_array($dashboard_intro)) 
if ($intro['dashboard_intro'] == '0')  {
    echo "<div class=\"dashboard_intro_arrow\"></div><div class=\"dashboard_intro\"></div><div class=\"dashboard_intro_text\"><strong>Welcome to Your Dashboard</strong><br/><br/>These are your tools: Check Messages, Reviews & more.</div><div class=\"exit_intro\"></div>";
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:46:19.897

PHP 在服务器上运行，不会影响 jQuery 稍后在浏览器中所做的事情。呈现的 HTML 是什么样的？像您的示例代码这样的东西应该就可以了。究竟是什么问题？这是一个简单的演示：

[http://jsfiddle.net/tXhwH/1](http://jsfiddle.net/tXhwH/1)

```
<script>
$(function() {
  $('.dashboard_intro_text').delay(3000).fadeIn(2000); 
});
</script> 
```

# php - 使用 MySQLi 进行简单查询

> ID：14675615
> 
> 赞同：2
> 
> 时间：2013-02-03T18:16:34.197
> 
> 标签：php, mysqli

如果我有数据库表，`users(name,job)` `(john,Poster)`并且我`MySQLi`使用此代码进行查询，那将有效。

```
$job = "Poster";

$statement = $con->prepare("SELECT * FROM users WHERE `job` =  ?");
$statement->bind_param("s",$job);
$statement->execute();
$statement->bind_result($name,$job);

while ($statement->fetch()){
echo $name;
} 
```

如果我做了`$job = "NOTHING";`并且没有结果怎么办，那么我怎么能显示错误，例如`echo "No reuslts found";`！`$job`如果没有找到上面的代码，它不会显示任何内容。~ 谢谢

**编辑** 这个也没有用:(

```
$job = "NOTHING"; // should not found and should gives error

if ($statement = $con->prepare("SELECT * FROM users WHERE `job` =  ?")){
$statement->bind_param("s",$job);
$statement->execute();
$statement->bind_result($name,$job);

while ($statement->fetch()){
echo $name;
}

}else{
echo "No results found dude";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:16:11.047

不要使用 mysqli。它不适用于准备好的语句。
请改用 PDO。

使用 PDO，您的代码会更短、更合理、更有效。

```
$statement = $con->prepare("SELECT * FROM users WHERE `job` =  ?");
$statement->execute(array($job));
if ($row = $statement->fetch()){
    echo $row['name'];
} else {
    echo "No results found dude";
} 
```

您需要先创建一个连接。像这样的东西

```
$dsn  = 'mysql:dbname=test;host=127.0.0.1';
$user = 'dbuser';
$pass = 'dbpass';
$con  = new PDO($dsn, $user, $pass); 
```

[您可以在手册页](http://www.php.net/manual/en/pdo.construct.php)上查看详细信息

作为进一步的步骤，您可以移动到一些帮助程序库，这将使您的代码更短：

```
$name = $db->getOne("SELECT name FROM users WHERE job=?s",$job);
if ($name) {
    echo $name;
} else {
    echo "No results found dude";
} 
```

但最好先熟悉原始 API 函数。

# c++ - MySQL C++ 连接器在多线程环境中的使用

> ID：14675617
> 
> 赞同：6
> 
> 时间：2013-02-03T18:17:08.653
> 
> 标签：c++, mysql, boost

这是针对我[提出](https://stackoverflow.com/questions/14152209/mysql-connector-c-hangs-on-read)的有关 MySQL C++ 连接器的问题以及我在多线程环境中使用它所面临的问题。

我有一个产生 100 个线程的应用程序。是的，我生成了 100 个，因为它们中的大多数会忙于 I/O 或其他任务，而不是数据库更新。

1.  我有一个全局`sql::Driver * driver`变量，对整个应用程序可见。我`driver = get_driver_instance();`在申请一开始就打电话。

2.  我有一个指针数组`sql::Connection`connArray ，它又是全局的，在产生任何线程之前，我打开第 i 个线程的第 i 个连接（使用`driver`），然后调用`con->setSchema`. 我将此连接存储在 connArray 数组的第 i 个位置。

现在，这大致是我在应用程序中执行的操作（粗略代码）：

```
bool InsertFunction(int threadId)
{
    driver->threadInit(); //Driver is global
    if((connArray[threadId] == NULL) || (connArray[threadId] == NULL && connArray[threadId]->isClosed())
    {
        //Re-Create the connection and store in the connArray
    }
    else
    {
         Create Prepared Statement for Insert
         Set Values
         Execute Update
    }
    driver->threadEnd();
}

bool UpdateFunction(int threadId)
{
    driver->threadInit(); //Driver is global
    if((connArray[threadId] == NULL) || (connArray[threadId] == NULL && connArray[threadId]->isClosed())
    {
        //Re-Create the connection and store in the connArray
    }
    else
    {
         Create Prepared Statement for Update
         Set Values
         Execute Update
    }
    driver->threadEnd();
}

/* Global Region */
sql::Driver * driver;
sql::Connection * connArray[100];

int main()
{
    Array of connections created
    Threads created (I use boost library)
    Post a Job to Boost Thread, RunTask(threadId)
    return 0;
}

RunTask(int threadId)
{
    InsertFunction(threadId);
    pid_t pid = fork();
    if(pid == 0)
       /* Child does some processing */
    else
        /* Parent Waits */
    UpdateFunction(threadId);
} 
```

在执行此代码时，当我在四核 Ubuntu 服务器上运行我的应用程序时，我会间歇性地收到以下异常：

```
Lost connection to MySQL server during query Error Code: 2013 SQL State: HY000 
```

此外，有时（再次间歇性地！），从其中一个执行更新`InsertFunction`或`UpdateFunction`挂起。我已经捕获了以下回溯：

```
(gdb) bt
#0  0x00007fbd55affd2d in read () from /lib/x86_64-linux-gnu/libpthread.so.0
#1  0x00007fbd54398412 in vio_read_buff () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#2  0x00007fbd5438a51f in ?? () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#3  0x00007fbd5438b0b8 in my_net_read () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#4  0x00007fbd543846ba in cli_safe_read () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#5  0x00007fbd543857e8 in ?? () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#6  0x00007fbd54381194 in ?? () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#7  0x00007fbd54381a07 in cli_stmt_execute () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#8  0x00007fbd54382aed in mysql_stmt_execute () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
#9  0x00007fbd55dddb40 in sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_execute (this=0x860670,
    stmt=0x7fbd140236c0)
    at /mysql/mysql-src/mysql-connector-c++-1.1.1/driver/nativeapi/libmysql_static_proxy.cpp:475
#10 0x00007fbd55ddfa61 in sql::mysql::NativeAPI::MySQL_NativeStatementWrapper::execute (
    this=0x7fbd1403b0a0)
    at /mysql/mysql-src/mysql-connector-c++-1.1.1/driver/nativeapi/mysql_native_statement_wrapper.cpp:131
#11 0x00007fbd55dbf30d in sql::mysql::MySQL_Prepared_Statement::do_query (this=0x7fbd140233f0)
    at /mysql/mysql-src/mysql-connector-c++-1.1.1/driver/mysql_prepared_statement.cpp:423
#12 0x00007fbd55dbf9be in sql::mysql::MySQL_Prepared_Statement::executeUpdate (this=0x7fbd140233f0)
    at mysql/mysql-src/mysql-connector-c++-1.1.1/driver/mysql_prepared_statement.cpp:531
---Type <return> to continue, or q <return> to quit---
#13 0x0000000000440d96 in SomeNameSpace::SomeClass::InsertFunction (     this=0x7fbd14026930, threadId=11)
    at h/SomeClass.h:295 
```

有人可以指出我可能出错的地方，或者 MySQL 的 C++ 连接器库有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-06T03:00:56.430

如果您使用相同的连接句柄，则需要使用锁来保护对它的访问，因为低级别的 MySQL 连接 API 不是线程安全的。如果您需要并行发送查询，请考虑为每个线程创建单独的 MySQL 连接句柄。

# java - JUnit 测试失败，但结果是预期的？

> ID：14675618
> 
> 赞同：0
> 
> 时间：2013-02-03T18:17:18.583
> 
> 标签：java, junit

我们的老师给了我们一个任务，让我们结合他自己的junit测试课编写一个非常简单的程序。我已经做到了，但我不太明白我是否得到了正确的结果，或者整个事情是否都坏了。

这是我们正在测试的课程（我写的那个）：

```
package person;

public class Person {
    private String name;
    private char sex;

    public Person(String name, char sex) {
        if(name == null || name.equals(""))
            throw new IllegalArgumentException();
        if(sex != 'M' || sex != 'F')
            throw new IllegalArgumentException();

        this.name = name;
        this.sex = sex;
    }

    public void setName(String name) {
        if(name == null || name.equals(""))
            throw new IllegalArgumentException();
        this.name = name;
    }

    public void setSex(char sex) {
        if(sex != 'M' || sex != 'F')
            throw new IllegalArgumentException();
        this.sex = sex;
    }

    public String getName() {
        return name;
    }

    public char getSex() {
        return sex;
    }
} 
```

这是 JUnit 测试类：

```
package parameterchecking;

import person.Person;
import org.junit.Test;
import static org.junit.Assert.*;

/**
 *
 * @author andersb
 */
public class PersonTest2 {

  @Test
  public void constructor() {
    try {
      new Person(null, 'F');
      fail("Should throw exception");
    } catch (IllegalArgumentException ex) { /* expected */ }

    try {
      new Person("", 'F');
      fail("Should throw exception");
    } catch (IllegalArgumentException ex) { /* expected */ }

    try {
      new Person("Anders", 'W');
      fail("Should throw exception");
    } catch (IllegalArgumentException ex) { /* expected */ }
  }

  @Test
  public void setSex() {
    final Person person = new Person("SomeName", 'M');
    try {
      person.setSex('L');
            fail("Should throw exception");
    } catch (IllegalArgumentException ex) { /* expected */ }

    person.setSex('F');
    assertSame('F', person.getSex());
  }

  @Test
  public void setName() {
    final Person person = new Person("Anders", 'M');
    try {
      person.setName(null);
            fail("Should throw exception");
    } catch (IllegalArgumentException ex) { /* expected */ }

    try {
      person.setName("");
            fail("Should throw exception");
    } catch (IllegalArgumentException ex) { /* expected */ }

    person.setName("Henrik");
    assertEquals("Henrik", person.getName());
  }

} 
```

现在，构造函数测试通过了，但 setName 和 setSex 没有。他们抛出错误“java.lang.IllegalArgumentException”。我不明白他们为什么不能通过考试。

JUnit 暗示问题是在每个测试开始时创建的“有效”对象（最终 Person 人），并说问题是我抛出了一个非法参数异常，这真的不应该发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T18:21:44.917

```
if(sex != 'M' || sex != 'F') 
```

应该

```
if(sex != 'M' && sex != 'F') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:54:30.537

Person类有一个小问题

```
 if(sex != 'M' || sex != 'F') 
```

到

```
 if(sex != 'M' && sex != 'F') 
```

# actionscript-3 - 使用 Flex mxml 文件继承 - 附上屏幕截图

> ID：14675619
> 
> 赞同：0
> 
> 时间：2013-02-03T18:17:31.970
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6, flex-mobile

在 Flex 移动应用程序中，我有 5 个[View](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/View.html)，通过 5 个不同的社交网络（包括 Google+ 和 Facebook）处理 OAuth 登录。`View`正在通过如下所示的菜单选择 s ：

![在此处输入图像描述](../Images/7a85b222c876e02b693e2d4816bea9ba.png)

文件名是 FB.mxml、GG.mxml、MR.mxml、OK.mxml、VK.mxml，它们的源代码看起来**非常**相似：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        viewActivate="loadInfo(event)"
        viewDeactivate="closeSWV(event)"
        title="Facebook.com">
....
            private function closeSWV(event:Event=null):void {
                _busy.visible = _busy.includeInLayout = false;
                _reload.visible = _reload.includeInLayout = true;

                stage.removeEventListener(Event.RESIZE, resizeSWV);
                if (! _swv)
                    return;
                _swv.removeEventListener(Event.COMPLETE, extractAccessToken);
                _swv.removeEventListener(LocationChangeEvent.LOCATION_CHANGE, extractAccessToken);
                _swv.removeEventListener(IOErrorEvent.IO_ERROR, closeSWV);
                _swv.removeEventListener(ErrorEvent.ERROR, closeSWV);
                _swv.dispose();
                _swv = null;
            }           

            private function resizeSWV(event:Event=null):void {
                if (! _swv)
                    return;
                // align to the right-bottom corner
                _swv.viewPort = new Rectangle(stage.stageWidth - Preferans.SCALE * width, 
                    stage.stageHeight - Preferans.SCALE * height, 
                    Preferans.SCALE * width, 
                    Preferans.SCALE * height);
            }
....
        <s:VGroup>
            <s:Label id="_first"  fontWeight="bold" text="Your name:" />
            <s:Label id="_gender" fontWeight="bold" text="Gender:" />
            <s:Label id="_city"   fontWeight="bold" text="City:" />
        </s:VGroup>

    <s:Button id="_play"
              label="Play" 
              click="startGame(event)"
              includeInLayout="false"
              visible="false" />
</s:View> 
```

**我的问题是：**上面列出的 5 个 mxml 文件有许多相似的方法和变量以及 UI 元素，而只有少数不同的方法和变量。

我已经多次尝试为它们引入一个“基类”并且总是放弃，因为它对于 mxml 文件（与纯 AS3 类相比）并不简单。

有没有人有一个想法，如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:30:22.660

您可以定义一个抽象类来扩展您希望在列表的每一行中使用的 UI 组件。在您的情况下，它将扩展`View`.

```
package your.package{
    public class SocialAccountView extends View{

        // in this class you can add the generic methods
        // that you want the view to have

    }
} 
```

之后，在`mxml`文件中，您可以使用您创建的类作为主要类型，而不是`View`

```
<your.package:SocialAccountView
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    viewActivate="loadInfo(event)"
    viewDeactivate="closeSWV(event)"
    title="Facebook.com">

</your.package:SocialAccountView> 
```

这样您就知道列表中的所有项目都是该类型的，并且具有父类的方法。您甚至可以覆盖每个视图中的方法。

关于 UI 组件，您可以使用它们的最大抽象级别（我知道）是构建一个额外的组件并在所有视图中使用它。就像是...

标签.mxml

```
 <s:VGroup>
        <s:Label id="_first"  fontWeight="bold" text="Your name:" />
        <s:Label id="_gender" fontWeight="bold" text="Gender:" />
        <s:Label id="_city"   fontWeight="bold" text="City:" />
    </s:VGroup> 
```

然后在每个组件中使用它

```
<your.package:Labels 
              id="labelsComponent"/> 
```

希望这可以帮助。

# visual-studio-2012 - 如何使 Visual Studio 窗口在其处于活动状态时突出显示？

> ID：14675621
> 
> 赞同：8
> 
> 时间：2013-02-03T18:17:53.337
> 
> 标签：visual-studio-2012

我很难看到我的 Visual Studio 2012 窗口处于活动状态。有什么方法可以让 Visual Studio 2012 窗口表现得像一个标准窗口。

Visual Studio 2012 行为（我无法区分）：

积极的： ![Visual Studio 2012 活动窗口](../Images/4259b7dc37953600eebf5fc8f4ceeca1.png)

非活动： ![Visual Studio 2012 非活动窗口](../Images/10ad8527b0d63314f14bd93af49a07c3.png)

标准窗口行为（活动时更容易看到）：

积极的： ![标准窗口活动](../Images/dc71fbc85aaf6aaeb4f4e8712a708afc.png)

非活动：

![标准窗口不活动](../Images/8a5c02d880489c5f31431c4ab83b0044.png)

如果可能的话，我想避免使用操作系统的高对比度设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T07:36:20.383

正如@mandaleeka 建议的那样，我最终使用了 Visual Studio 2012 Color Theme Editor 扩展。

但在我的情况下，一个更好的突出显示选项是更改“主窗口->标题”->“活动”->“背景”颜色。

这是我的结果主题：

![窗口栏在 VS 2012 窗口顶部清晰可见](../Images/e1d691e94a277d540712b538e530abd5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T18:38:58.453

一种解决方法是安装[Visual Studio 2012 颜色主题编辑器扩展](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)并修改内置主题之一以更改非活动窗口边框颜色。

安装扩展程序后，转到工具 -> 自定义颜色。选择一个主题来复制颜色，给它一个名字，然后点击“创建”。在颜色编辑器中，向下滚动到“主窗口”部分，然后在“非活动”下将边框更改为突出的内容。

这是一个例子：

![例子](../Images/a9af1c6a854895f0e9bdd1c8cb0e803b.png)

# php - php foreach 循环填充国家/地区列表保管箱

> ID：14675623
> 
> 赞同：0
> 
> 时间：2013-02-03T18:18:00.907
> 
> 标签：php, select, foreach

这里有什么问题？

```
require("countrylist.php"); //array 
echo "Your country:<br /><select name=\"country\">";
foreach($countryList as $key => $value)
{ 
echo "<option value=" . $key . ">";
echo $value . "</option>";
} 
echo "</select>"; 
```

在安装了 php 5.4 但不能在线工作（5.2）的本地 xampp 服务器上工作，我不明白。我得到一个空的保管箱。

数组：

```
$countryList = array (
'AD' => 'Andorra',
'AE' => 'United Arab Emirates',
'AF' => 'Afghanistan' .... 
```

等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:37:02.770

确保 CountryList.php 具有正确的

> < ?php

文件顶部的标签，以便解析器知道它是 PHP。（注意 < 和 ? 之间不应有空格，但 Stack Overflow 可防止注释中嵌入 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:32:54.190

仅为此页面在您的实时服务器上打开错误报告，或者如果找不到包含文件，则为自己创建一条条件消息。

```
if(! require("countrylist.php") ){

echo 'Oops, cannot find the file in ' . ini_get("include_path");

}else{

var_dump($countryList);

} 
```

# python - 使用 python 2.7 导入 numpy

> ID：14675624
> 
> 赞同：1
> 
> 时间：2013-02-03T18:18:00.963
> 
> 标签：python, macos, numpy

`python 2.7`我在我的 mac 和`numpy-1.6.2`for上安装了额外的`python 2.7`，但是每当我想导入时`numpy`，它会`numpy`从我的 Mac 上的预安装`python`版本导入，版本是`1.6.1`，谁能告诉我如何将导入方向更改为`numpy-1.6.2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:59:51.223

您必须确保刚刚安装并尝试导入的库位于您的`PYTHONPATH`. 此外，做这样的事情并不是最理想的——考虑使用[virtualenv](http://pypi.python.org/pypi/virtualenv)并在每个项目的基础上安装你的库，以避免这样的问题，并在管理它们时获得更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:00:05.433

[检查 numpy 包的路径](https://stackoverflow.com/questions/12888679/numpy-wont-upgrade-from-1-5-1-to-1-6-2-on-os-x-10-7)：

```
import numpy
print numpy.__path__ 
```

然后用下载的 numpy 版本 1.6.2 替换整个内容，如果结果路径中的东西看起来类似于 numpy 1.6.2 下载。

否则只需删除那些东西（在路径中）或卸载它并通过其他方式将其删除，然后使用：

```
pip install numpy 
```

# javascript - iframe 滚动位置

> ID：14675625
> 
> 赞同：0
> 
> 时间：2013-02-03T18:18:02.027
> 
> 标签：javascript, facebook, iframe, facebook-like

我有一个带有来自facebook的like按钮的iframe，它有点小我想从左边滚动iframe 15px；

这是我的代码：

```
<iframe id='likebutton' frameBorder='0' allowTransparency='true' src='http://www.facebook.com/widgets/like.php?href="www.facebook.com/makestream"&amp;layout=standard&amp;show_faces=true&amp;width=53&amp;action=like&amp;colorscheme=light&amp;height=80' style='position:absolute;width:26px;height:23px;overflow:hidden;border:0;'></iframe> 
```

有没有办法用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:05:54.413

这是在 iframe 中滚动的代码：

```
document.getElementById('likebutton'); 
myIframe.onload = function () { 
myIframe.contentWindow.scrollTo(xcoord,ycoord); 
} 
```

现场示例：http: [//jsbin.com/ipujo/1/edit](http://jsbin.com/ipujo/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:42:12.100

使用 javascript，您可以使用如下代码更改 CSS：

```
document.getElementById("likebutton").style.marginLeft="15px"; 
```

或使用 jQuery：

```
$("#likebutton").css("margin-left","15px"); 
```

# php - 检查电子邮件与指定域匹配或拒绝

> ID：14675627
> 
> 赞同：0
> 
> 时间：2013-02-03T18:18:05.220
> 
> 标签：php, javascript, email, whitelist

目前我的电子邮件接受所有电子邮件域。我想定义列表中允许哪些列表（solent.ac.uk、herts.ac.uk）而不是公共列表，例如@gmail.com 等。无论哪种方式现在最简单，我都会尝试替代就目前而言，这只是暂时的。

```
<form method="post" action="<?php url_for('register'); ?>">

  <!--Email-->
  <p class="email field">
    <input tabindex="1" id="email" type="text" name="email" value="<?php if(isset($_POST['email'])) echo $_POST['email']; ?>" placeholder="email@example.com" autofocus />
    <a href="<?php url_for('login'); ?>" tabindex="2" class="action button register" title="Click to log-in with your existing account.">Login</a>
  </p> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:27:08.940

PHP 中的简化版本

```
if ('POST' === $_SERVER['REQUEST_METHOD']) {
    $whitelist = array('solent.ac.uk', 'herts.ac.uk');
    $email     = $_POST['email'];
    list(, $domain) = array_pad(explode('@', $email, 2), 2, '');
    if (in_array($domain, $whitelist)) {
      // you're good
    }
    else {
      // not so good
    }

    // more data validation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:36:04.470

在`<form>`您可以将电子邮件分成两部分；用户名和域。用户名是典型的文本输入，域部分是一个选择下拉框。

一个简化的例子如下：

```
<input type="text" name="email_username" />@
<select name="email_domain">
  <option value="domain1.com">@domain1.com</option>
  <option value="domain2.com">@domain2.com</option>
  <option value="domain3.com">@domain3.com</option>
  <option value="domain4.com">@domain4.com</option>
</select> 
```

# javascript - jquery mobile：动态创建网格类型按钮

> ID：14675629
> 
> 赞同：2
> 
> 时间：2013-02-03T18:18:11.873
> 
> 标签：javascript, jquery, css, html, jquery-mobile

我想创建一个 jquery 移动网格，由具有“onclick”或“href”功能的按钮组成。按钮的数量应在运行时动态创建。例如，这段代码应该像图书馆索引一样工作。单击图书馆按钮时，应在按钮网格中显示“书名”，单击书名按钮时，应显示另一个按钮网格，其中包含将要创建的书中的“章节编号”在选择书籍时动态。我用于创建网格的静态 html 代码是，

```
<div class="ui-grid-d" id="book_chooser">
        <div class="ui-block-a"><button class="ui-bar ui-bar-a" style="height:30px">Book A</button></div>
        <div class="ui-block-b"><button class="ui-bar ui-bar-a" style="height:30px">Book B</button></div>
        <div class="ui-block-c"><button class="ui-bar ui-bar-a" style="height:30px">Book C</button></div> 
        <div class="ui-block-d"><button class="ui-bar ui-bar-a" style="height:30px">Book D</button></div>
        <div class="ui-block-e"><button class="ui-bar ui-bar-a" style="height:30px">Book E</button></div>
        <div class="ui-block-a"><button class="ui-bar ui-bar-a" style="height:30px">Book A</button></div>
        <div class="ui-block-b"><button class="ui-bar ui-bar-a" style="height:30px">Book B</button></div>
        <div class="ui-block-c"><button class="ui-bar ui-bar-a" style="height:30px">Book C</button></div> 
        <div class="ui-block-d"><button class="ui-bar ui-bar-a" style="height:30px">Book D</button></div>
        <div class="ui-block-e"><button class="ui-bar ui-bar-a" style="height:30px">Book E</button></div>
        <div class="ui-block-a"><button class="ui-bar ui-bar-a" style="height:30px">Book A</button></div>
        <div class="ui-block-b"><button class="ui-bar ui-bar-a" style="height:30px">Book B</button></div>
        <div class="ui-block-c"><button class="ui-bar ui-bar-a" style="height:30px">Book C</button></div> 
        <div class="ui-block-d"><button class="ui-bar ui-bar-a" style="height:30px">Book D</button></div>
        <div class="ui-block-e"><button class="ui-bar ui-bar-a" style="height:30px">Book E</button></div> 
```

需要根据书籍数量在运行时动态创建此按钮网格。

我正在使用带有 phonegap 插件的 jquery、javascript 和 html5。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:52:55.030

您需要附加元素，然后为每个元素调用 trigger('create')，例如：

```
function redrawGrid(num){

    $('#book_chooser').html(''); //clean grid
    for (var i = 0, class_div = "a"; i < num; i++) {

        var d = '<div class="ui-block-'+class_div+'"> \
                    <div class="ui-bar ui-bar-e" style="height:70px"> \
                        <small>dia '+ (i+1) +'</small> \
                        <button type="submit" data-theme="a" data-icon="plus">Book</button> \
                    </div> \
                </div>';

        $('#book_chooser').append(d).trigger('create'); 

        switch(class_div){ //change class of ui-block
            case 'a' : class_div= "b"; break;
            case 'b' : class_div= "a";break;
        }
    };
} 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:23:40.517

非常简单：

首先通过以下方式创建一个按钮 HTML JQuery 元素：

```
var button = $("<button>My Button</button>"); 
```

接下来，将按钮注入页面中您希望它位于的任何位置：

```
$("#my_button_div").append(button); 
```

最后在按钮上运行 button() JQuery Mobile 命令：

```
button.button(); 
```

现在，您的页面中应该有一个功能性和 JQM 样式的按钮。

# php - 将php中的嵌套集转换为没有深度参数的嵌套数组

> ID：14675630
> 
> 赞同：3
> 
> 时间：2013-02-03T18:18:18.747
> 
> 标签：php, recursion, nested-sets

给定一个数组：

```
$arrData = array(
 0 => array (
   'uid'   => 1,
   'name'  => 'label',
   'open'  => 0,
   'close' => 9
 ),
 1 => array (
   'uid'   => 2,
   'name'  => 'label',
   'open'  => 1,
   'close' => 2
 ),
 2 => array (
   'uid'   => 3,
   'name'  => 'label',
   'open'  => 3,
   'close' => 8
 ),
 3 => array (
   'uid'   => 4,
   'name'  => 'label',
   'open'  => 4,
   'close' => 5
 ),
 4 => array (
   'uid'   => 5,
   'name'  => 'label',
   'open'  => 6,
   'close' => 7
 )
); 
```

代表这个结构：

```
<label>     [0,9]
 <label />  [1,2]
 <label>    [3,8]
  <label /> [4,5]
  <label /> [6,7]
 </label>
</label> 
```

我试图得到一个导致这种格式的数组：

```
$arrNesting = array(
 0=>array(
   'item'    => array('uid'=>1, 'name'=>'label', 'open'=>0, 'close'=>9),
   'children' => array(
     0=>array(
       'item'     => array('uid'=>2, 'name'=>'label', 'open'=>1, 'close'=>2),
       'children' => array()
     ),
     1=>array(
       'item'     => array('uid'=>3, 'name'=>'label', 'open'=>3, 'close'=>8),
       'children' => array(
         0=>array(
           'item'     => array('uid'=>2, 'name'=>'label', 'open'=>4, 'close'=>5),
           'children' => array()
         ),
         1=>array(
           'item'     => array('uid'=>3, 'name'=>'label', 'open'=>6, 'close'=>7),
           'children' => array()
         )
       )
     )
   )
 )
); 
```

通过这样的函数调用：

```
// $arrData: Source Data with keys for denoting the left and right node values
// 'open': the key for the left node's value
// 'close': the key for the right node's value
$arrNested = format::nestedSetToArray( $arrData, 'open', 'close' ); 
```

到目前为止，我已经尝试过这种格式，假设 $arrData 值**将始终按左值升序排列**。uid 值“发生”也是按顺序排列的，但不依赖于这样：

```
public static function nestedSetToArray( $arrData = array(), $openKey='open', $closeKey='close') {
// Hold the current Hierarchy
$arrSets = array();

// Last parent Index, starting from 0
$intIndex = 0;

// Last Opened and Closed Node Values, and maximum node value in this set
$intLastOpened = 0;
$intLastClosed = null;
$intMaxNodeNum = null;

// loop through $arrData
foreach( $arrData as $intKey=>$arrValues) {
  if( !isset( $arrSets[ $intIndex ] )) {
      // Create a parent if one is not set - should happen the first time through
      $arrSets[ $intIndex ] = array ('item'=>$arrValues,'children'=>array());
      $intLastOpened = $arrValues[ $openKey ];
      $intLastClosed = null; // not sure how to set this for checking 2nd IF below
      $intMaxNodeNum = $arrValues[ $closeKey ];
  } else {
      // The current item in $arrData must be a sibling or child of the last one or sibling of an ancestor
      if( $arrValues[ $openKey ] == $intLastOpened + 1) {
         // This is 1 greater then an opening node, so it's a child of it
      } else if( /* condition for sibling */ ) {
         // This is 1 greater than the intLastClosed value - so it's a sibling
      } else if( /* condition for sibling of ancestor */ ) {
         // This starts with a value greater than the parent's closing value...hmm
      }
  }
} 
```

}

任何进一步采取这一措施的指针将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T19:26:13.757

这应该有效

```
$stack = array();
$arraySet = array();

foreach( $arrData as $intKey=>$arrValues) {
    $stackSize = count($stack); //how many opened tags?
    while($stackSize > 0 && $stack[$stackSize-1]['close'] < $arrValues['open']) {
            array_pop($stack); //close sibling and his childrens
            $stackSize--;
        }

    $link =& $arraySet;
    for($i=0;$i<$stackSize;$i++) {
        $link =& $link[$stack[$i]['index']]["children"]; //navigate to the proper children array
    }
    $tmp = array_push($link,  array ('item'=>$arrValues,'children'=>array()));
    array_push($stack, array('index' => $tmp-1, 'close' => $arrValues['close']));

}

return $arraySet; 
```

我跳过参数化的打开和关闭标签，但您可以简单地添加它。

**编辑**

这里发生了什么：

首先`$stack`是空的，所以我们跳过`while()`。然后我们将引用分配给`$arraySet`，`$link`因为`$stack`是空的，所以我们将引用的第一个元素推`$link`送到`$arraySet`。array_push() `return 1 because this is the new length of`$arraySet `Next we add an element to the`$stack `whit values`('index' => 0, 'close' => 10)`

下一个元素：现在`$stack`有 1 个元素，但`$stack[0]['close']`大于`$arrValues['open']`for 元素，所以我们跳过 while。我们再次设置对 to 的引用，`$arraySet`但`$link`现在有 on 元素，`$stack`所以我们将`$link[$stack[0]['index']]["children"]`引用分配给 $link 所以现在`$link`指向`$arraySet[0]["children"]`. 现在我们将元素推送到这个子数组。`$tmp`给我们这个孩子数组的大小，我们将适当的元素推入堆栈。

下一个元素：它看起来与第二个元素完全相同，但一开始我们从堆栈中弹出一个元素。所以在堆栈上的这个迭代之后是两个元素

```
('index' => 0, 'close' => 10)
('index' => 0, 'close' => 8) 
```

下一个元素：堆栈上有两个元素，但都具有更大的`close`属性，`$arrValues['open']` 因此我们跳过 while 循环。然后在导航部分：

*   `$link`指向`$arraySet`
*   然后到`$arraySet[0]["children"]`
*   然后到`$arraySet[0]["children"][0]["children"]`

我们将元素推送到这个数组。等等...

# python - 最小/最大与 orm 关系

> ID：14675634
> 
> 赞同：1
> 
> 时间：2013-02-03T18:18:51.507
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

我正在尝试从外键中找到集合的最小值/最大值。我知道你可以`session.query`使用`func.min`and `func.max`，但是有没有办法让我使用标准的 ORM 关系的东西？

例如对于博客，如果我想在给定以下架构的情况下找到给定帖子的最大“评论数”，是否可以执行类似的操作`Post.query.get(0).number_comments.max()`？

```
class Post(base):
  id = Column(Integer, primary_key=True)
  number_comments = relationship("NumberComment")

class NumberComment(base):
  id = Column(Integer, primary_key=True)
  num = Column(Integer, nullable=False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:05:25.023

在使用原始 SQL 的情况下，您需要在查询中加入这些表：

```
# This class lacks a foreign key in your example.
class NumberComment(base):
    # ...
    post_id = Column(Integer, ForeignKey(Post.id), nullable=False)
    # ...

session.query(func.max(NumberComment.num)).join(Post).\
    filter(Post.id == 1).scalar() 
```

没有其他方法可以做到这一点，至少不像你想要的那样。之所以这样调用 SQLAlchemy 而不是 ORMSorcery 是有原因的；-)

我的建议是在尝试提出查询时考虑 SQL，这将对您有很大帮助。

# php - JavaScript document.write(encoded html tag)，按原样打印

> ID：14675637
> 
> 赞同：0
> 
> 时间：2013-02-03T18:18:53.180
> 
> 标签：php, javascript, html, xml

我正在使用 javascript 从 XML 生成 HTML 页面（从 XML 文件生成表），我有某种 XML 结构等。我编写 HTML 代码如下

```
document.write("<span>" + name + "</span>"); 
```

我得到我的变量如下

```
name = x[i].getElementsByTagName("NAME")[0].childNodes[0].nodeValue; 
```

所以变量**名**包含我的 XML 文件结构中的任何节点**NAME**包含简单的 XML 来演示：

```
<FILE>
<NAME>file 1.2.3</NAME>
<SIZE>1Kb</SIZE>
</FILE> 
```

用户正在编辑 XML 文件，因此用户可以插入他/她想要的任何内容，因此如果用户输入：`<script>alert(1);</script>`在 NAME 节点中，JavaScript 将打印出常规 HTML，浏览器将调用“alert(1)”。这就是我不想发生的事情。

所有编辑都使用“我的”前端完成，并通过 php 函数 htmlspecialchars(); 所以实际上用户将保存到 NAME 节点中的是“编码”HTML

```
&lt;script&gt;alert(3);&lt;/script&gt; 
```

即使这还不够，当 XML 与编码的 HTML 标签一起保存时，javascript 会将它们打印为普通标签。

换句话说：我怎样才能在页面上使用 JS (document.write) 跟随文本：**`<?php $=1; ?>`**或**`<htmltag>whatever is here </htmltag>`**不破坏我的真实 HTML。

有什么解决办法吗？

例如，这不像我期望的那样工作：

```
document.write("<span class=\"edit\">&lt;script&gt;alert(3);&lt;/script&gt;</span>"); 
```

**解决方案**

在网上找到了这个功能

```
function htmlspecialchars(str) {
 if (typeof(str) == "string") {
  str = str.replace(/&/g, "&amp;"); /* must do &amp; first */
  str = str.replace(/"/g, "&quot;");
  str = str.replace(/'/g, "&#039;");
  str = str.replace(/</g, "&lt;");
  str = str.replace(/>/g, "&gt;");
 }
return str;
} 
```

它完成了工作，但我真的不明白为什么。

在 XML 文件中，它已经“编码”或以可以安全呈现的形式（发送到 document.write 函数）。我只是再次执行“htmlspecialchars”，效果很好。

```
document.write("<span>" + htmlspecialchars(name) + "</span>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:24:25.160

您是否尝试使用“单引号”？：

```
document.write('<span class="edit">' + name + '</span>'); 
```

如果你想创建动态元素，并且如果你想再次在 javascript 中使用这些元素，你应该使用 DOM 函数（createElement、createTextNode、createAttribute）：

[http://reference.sitepoint.com/javascript/Document/createElement](http://reference.sitepoint.com/javascript/Document/createElement)

# php - 网页：使用部分 URL 作为输入

> ID：14675638
> 
> 赞同：1
> 
> 时间：2013-02-03T18:18:58.187
> 
> 标签：php, .htaccess, redirect, web

[http://www.dayscore.net](http://www.dayscore.net)页面生成一个用户特定的密钥，该密钥附加到 URL 中，然后可以用作简单的身份验证方法。

遗憾的是，我无法找到它是如何工作的，以及是否可以在我的网络空间上构建类似的东西。我读过 .htaccess 重定向，但主要是关于简单地将页面从 A 重定向到 B。

我想要做的是以下内容：

*   用户调用 URL`http://www.mywebsite.com/foobar`
*   它在内部重定向到`http://www.mywebsite.com/index.php`
*   根据这个输入`index.php`，可以发现用户调用`foobar`并做某事
*   重定向只是内部的，用户仍然可以`http://www.mywebsite.com/foobar`在他的地址栏中看到

这可以与实施的机制 DayScore 相提并论吗？
怎么可能实现这样的网页（.htaccess？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:41:11.623

您可以在根目录中的一个 .htaccess 文件中尝试此操作：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  /([^/]+)/?$  [NC]
RewriteRule .*   index.php?key=%1  [L] 
```

静默地图

`http://www.mywebsite.com/val`

到

`http://www.mywebsite.com/index.php?key=val`

Where`key`是任何固定键名，并且`val`是传入 URL 中的变量值。

`/val`必须是传入 URL 中的最后一个字符串，规则才能起作用。

这`key`是脚本`$_GET['key']`在 index.php 中得到的内容。

# loadrunner - LR v11.5 - 录制期间应用程序未打开

> ID：14675639
> 
> 赞同：0
> 
> 时间：2013-02-03T18:19:17.583
> 
> 标签：loadrunner

当我在浏览器中手动输入应用程序的 URL 时，应用程序正在毫无问题地打开。

但是当我尝试使用 LR 11.5 捕获/记录脚本时，浏览器被 LR 调用，但是应用程序没有在浏览器中打开。

我在浏览器中收到“Internet Explorer 无法显示网页”消息。

以下是其他细节：

```
OS:  Window 2008 R2 Server
Browser : IE 8
Vugen Version:  11.5
Protocol :  Web(HTTP/HTML)
Application:  Web application is developed using Web2.0 technologies like Javascript, JQuery, Ajax...etc. 
```

任何人都可以阐明它...？

请帮忙...！

-斯里尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:30:43.747

根据发行说明： *** 64 位应用程序的录制已添加到对 64 位操作系统的现有支持中。当 '<em>32' 后缀未显示在其进程的 Windows 任务管理器中时，通常可以识别 64 位应用程序。回放是 32 位的。**

我刚刚尝试使用 vugen*32 录制网络应用程序，并且能够使用 IE 和 IE 64bit 进行录制。我使用的是 Windows 2008 R2 Standard SP1 64 位操作系统。

请查看是否可以使用支持的 FF 版本进行录制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:26:00.310

[http://en.wikipedia.org/wiki/Windows_Server_2008_R2](http://en.wikipedia.org/wiki/Windows_Server_2008_R2)

Windows 2008 R2 是 64 位操作系统。VUGEN 是一个 32 位应用程序。请参阅有关在 64 位环境中录制应用程序的发行说明。

# javascript - 链式函数如何访问 Google Apps 脚本中的表单数据？

> ID：14675641
> 
> 赞同：0
> 
> 时间：2013-02-03T18:19:19.137
> 
> 标签：javascript, google-apps-script

这个问题是“[在 GAS 中是否提供'链接'功能？](https://stackoverflow.com/questions/10821521/is-chaining-functions-available-in-gas) ”的扩展。

我需要做类似的事情......复制/粘贴回答上一个问题的代码示例：

```
var app = null;
function firstHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  //do your thing
  //now, instead "return app;" you return the second handler
  return secondHandler(e);
}

function secondHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  //do your job
  return app;
} 
```

其中 firstHandler() 是按钮的单击处理程序。这个例子和我需要做的不同之处在于，在我的例子中，secondHandler() 需要从表单中提取一条信息。具体来说，我需要从列表框中获取选定的值。

通常，我让 secondHandler() 提取该信息的方式是将包含列表框的父对象传递给函数，然后有这样的一行：

```
var value = eventInfo.parameter.listBoxName; 
```

但是，我无法将列表框所在的网格传递到 secondHandler() 中。这是我尝试过的：

```
var app = null;
function firstHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  //do your thing
  //get the object now, pass it into the chained function
  var myGrid = app.getElementById("gridId");
  return secondHandler(myGrid);
}

function secondHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  var value = e.parameter.listBoxName.toString();
  //do your job
  return app;
} 
```

但这并没有奏效。我还尝试将 secondHandler() 修改为完全无参数，这样我就可以绕过必须将网格传递到 firstHandler() 中的 secondHandler()：

```
var app = null;
function firstHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  //do your thing
  return secondHandler(e);
}

function secondHandler(e) {
  if( app == null )
    app = UiApp.getActiveApplication();
  var value = app.getElementById('listBoxId').value;
  //do your job
  return app;
} 
```

这也不起作用......“app.getElementById('listBoxId').value”似乎没有返回任何东西。我不知道为什么不:(

关于我如何做到这一点的任何想法？任何人都知道为什么我的 app.getElementById 解决方法没有按预期运行？任何和所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:32:17.177

尝试这个。

```
function firstHandler(e) {
  var app = UiApp.getActiveApplication();
  //do your thing
  return secondHandler(e);
}

function secondHandler(e) {
  var app = UiApp.getActiveApplication();
  var value = e.parameter.listBoxName;
  //do your job
  return app;
} 
```

确保在创建处理程序时使用它。

```
app.createServerHandler("firstHandler").addCallbackElement(gridContainingListBox); 
```

如果您从页面中检索值，则**必须**在添加正确的回调元素时使用`e.parameter`正确设置的值。如果您要修改 UI 中的元素，那么您当然可以使用`app.getElementById(...).whateverFunction()`，但请注意您不能调用`getValue()`等。

# html - 旋转导航网站

> ID：14675645
> 
> 赞同：1
> 
> 时间：2013-02-03T18:19:33.097
> 
> 标签：html, css

我有一个设计，其中主导航旋转 90 度，子菜单正常水平对齐。

```
 <div id="nav">
                    <ul>
                    <li><a href="#">Woonaccessoires</a></li>
                    <li><a href="#">Lampenkappen</a></li>   
                    <li><a href="#">Sieraden</a></li>
                    <li><a href="#">Geuren</a></li>
                    <li><a href="#">Tassen</a></li>
                    <li><a href="#">Aanbiedingen</a></li>
                    <li><a href="#">Bedrijven</a></li>
                    <li><a href="#">Contact</a></li>                
                </ul>
                </div> 
```

CSS部分是：

```
 #nav {
    width: 60%;
    float: left;
    margin: 0 0 3em 0;
    padding: 0;
    background-color: #f2f2f2;
    border-bottom: 1px solid #ccc; 
    border-top: 1px solid #ccc; 
}
#nav li {
    float: left;
    list-style-type:none; 
    /* Safari */
    -webkit-transform: rotate(-90deg);
    /* Firefox */
    -moz-transform: rotate(-90deg);
    /* IE */
    -ms-transform: rotate(-90deg);
    /* Opera */
    -o-transform: rotate(-90deg);
    /* Internet Explorer */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3)
 }
 #nav li a {
    display: block;
    padding: 8px 2px;
    text-decoration: none;
    font-weight: bold;
    color: #069;
 }
 #nav li a:hover {
    color: #c00;
    background-color: #fff; } 
```

您现在看到的是，并非 li 标签之间的所有空格都不相等。如何解决这个问题？我尝试使用边距和填充。

我必须为每个 li 标签创建单独的类吗？

希望有人可以提供帮助。

问候，

罗兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:50:30.347

HTML（去掉列表，因为它没用）

```
<div id="nav">
<a href="#">Woonaccessoires</a>
<a href="#">Lampenkappen</a>
<a href="#">Sieraden</a>
<a href="#">Geuren</a>
<a href="#">Tassen</a>
<a href="#">Aanbiedingen</a>
<a href="#">Bedrijven</a>
<a href="#">Contact</a>
</div> 
```

CSS：

```
#nav {
    float:left;
    background-color: #f2f2f2;
    border-bottom: 1px solid #ccc;
    border-top: 1px solid #ccc;
    line-height:0;
    width:100%;
}

#nav a {
    /* Safari */
    -webkit-transform: rotate(-90deg);
    /* Firefox */
    -moz-transform: rotate(-90deg);
    /* IE */
    -ms-transform: rotate(-90deg);
    /* Opera */
    -o-transform: rotate(-90deg);
    /* Internet Explorer */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3)
    float: left;
    width:5px;
    margin-top:120px;
    padding: 10px 10px;
    text-decoration: none;
    font-weight: bold;
    color: #069;
}

#nav a:hover {
    color: #c00;
    background-color: #fff;
} 
```

如果您想改变它的外观，请尝试调整宽度和边距值`#nav a`

示例：http: [//jsfiddle.net/howderek/WD9PL/embedded/result/](http://jsfiddle.net/howderek/WD9PL/embedded/result/)

# haskell - 是否可以在 haskell 中实现通用的就地快速排序？

> ID：14675646
> 
> 赞同：1
> 
> 时间：2013-02-03T18:19:44.300
> 
> 标签：haskell, quicksort

问题中的术语*general*（与 special 相反*）*意味着该函数可以对项目进行排序，只要它们属于 的实例类型`Ord`。

考虑一下最著名的 haskell 广告之一

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
    where
        lesser  = filter (< p) xs
        greater = filter (>= p) xs 
```

上面的实现不是就地的。
我试图写一个就地版本。就地进行快速排序很容易。通常，我们只需要一个可变数组，我选择了`Foreign.Marshal.Array`.
我的实现是就地的并且运行得很好，但我对它的类型签名不满意

```
(Ord a, Storable a) => [a] -> IO [a] 
```

更准确地说，类型约束`Storable a`让我很恼火。

显然，如果我们要对项目进行排序，`Ord`则需要约束，而`Storable`没有必要。
相比之下，经典快速排序或`sort`in的类型签名`Data.List`是`Ord a => [a] -> [a]`. 约束是`Ord`.

我没有找到摆脱额外约束的方法。

我搜索了 Stackoverflow，发现了一些关于在 Haskell 中就地快速排序的问题，例如
[，你如何在 Haskell 中进行就地快速排序](https://stackoverflow.com/questions/5268156/how-do-you-do-an-in-place-quicksort-in-haskell)
[为什么极简主义，例如 Haskell 快速排序不是“真正的”快速排序？](https://stackoverflow.com/questions/7717691/why-is-the-minimalist-example-haskell-quicksort-not-a-true-quicksort)

不幸的是，他们的主要关注点就位。那里给出的所有就地快速排序示例也有额外的类型约束。
例如，[`iqsort`klapaucius 给出的](https://stackoverflow.com/a/7833043/779412) 具有类型签名

```
iqsort :: (Vector v a, Ord a) => v a -> v a 
```

有谁知道如何使用类型签名实现就地快速排序 haskell 函数`Ord a => [a] -> [a]`？
我知道如何进行就地快速排序，但我不知道如何使其*通用*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T19:18:36.077

`iqsort`实际上对我来说看起来很一般。如果您查看 Data.Vector.Generic 黑线鳕，您实际上可以将该接口用于*任何* `a`！不同之处在于给定的函数*更*通用，因为它允许您选择一个未*装箱*的向量，这当然只适用于*一些* `a`.

这是链接：[http ://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector-Generic.html](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector-Generic.html)

因此，如果您选择要装箱的 V，矢量约束就会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T20:04:18.057

是的，有可能。（尽管在 Haskell 中，您只想在*真正*需要最佳性能的情况下使用这种命令式算法。）

我知道两种这样的算法：

*   从*向量算法*[排序](http://hackage.haskell.org/packages/archive/vector-algorithms/0.3.2/doc/html/Data-Vector-Algorithms-Intro.html#v%3asort)。
*   [来自marray-sort 的](https://github.com/ppetr/marray-sort)[qsort](https://github.com/ppetr/marray-sort/blob/master/src/Data/Array/MArray/Sort/Introsort.hs)（或 introsort），我还没有发布到 Hackage。（如果需要，请告诉我。）它适用于[可变数组](http://www.haskell.org/haskellwiki/Arrays#Mutable_IO_arrays_.28module_Data.Array.IO.29)。

（[Introsort](https://en.wikipedia.org/wiki/Introsort)基本上是精炼的快速排序，具有 *O(n log n)*最坏情况复杂度。）

我不确定`MVector`，但对于`MArray`s，你不必担心额外的约束`MArray a e m`。他们在那里使类型*更通用*，而不是更少。像这样的签名

```
qsort :: (MArray a e m, Ord e) => a Int e -> m () 
```

允许对不同的数组表示使用相同的算法。对于某些数据类型，您可以拥有该类型的专用数组，它们比通用数组更快、更紧凑。例如，如果要对 8 位整数进行排序，则有一个专门`MArray IOUArray Int8 IO`用于未[装箱数组](http://www.haskell.org/haskellwiki/Arrays#Unboxed_arrays)的实例。`qsort`仅使用多态性的这种数组的专门化是

```
qsort :: IOUArray Int Int8 -> IO () 
```

但是您也有`MArray IOArray e IO`可以任意工作的实例`e`。通过使用`qsort`with `IOArray`，您可以获得没有限制的专业化`e`：

```
qsort :: (Ord e) => IOArray Int e -> IO () 
```

此外，如果您使用[`STArray`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-ST.html)s 和[`ST`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad-ST.html)monad，您可以使用相同的函数对数组进行就地排序，稍后将结果作为纯值获取，而无需`IO`.

# php - 如果用户选择“全部”，如何从所有选项中检索数据

> ID：14675647
> 
> 赞同：0
> 
> 时间：2013-02-03T18:19:45.137
> 
> 标签：php, mysql, mysqli

下面有一个 mysqli/php 代码，它将根据从`question`下拉菜单中选择的选项显示结果：

```
$selectedquestionqry = "
SELECT
QuestionNo
FROM
Question
WHERE
(QuestionId = ?)
";

global $mysqli;
$selectedquestionstmt=$mysqli->prepare($selectedquestionqry);
// You only need to call bind_param once
$selectedquestionstmt->bind_param("i",$_POST["question"]);
// get result and assign variables (prefix with db)
$selectedquestionstmt->execute(); 
$selectedquestionstmt->bind_result($selQuestionNo);
$selectedquestionstmt->store_result();
$selquestionnum = $selectedquestionstmt->num_rows();   

 while ($selectedquestionstmt->fetch()) {

if($_POST["question"] === '0') {
    echo "<p>All Questions - Total:(" . $selquestionnum . ")</p>" . PHP_EOL;
}else if($_POST["question"] !== '0') {
echo "<p><strong>Questions: </strong>" . $selQuestionNo . "</p>" . PHP_EOL;
}
} 
```

下拉式菜单：

```
 <select name="student" id="studentsDrop">
    <option value="0">All</option>
    <option value="23">Jay Hart</option>
    <option value="32">Bubba Wright</option>
    </select> 
```

我的问题是，我怎样才能得到它，以便如果用户选择了“0”，那么它将能够从`question`下拉菜单中显示的数据库中选择所有问题？

我问这个的原因是因为在我的 echo`else if($_POST["question"] !== '0') { echo "<p><strong>Questions: </strong>" . $selQuestionNo . "</p>" . PHP_EOL; }`中，当我选择该`All`选项时，什么都没有回显，这让我认为它没有因此显示回声。如果我从下拉菜单中选择一个问题，它能够输出它的回声。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:25:35.123

你只需要修改你的查询：

```
if($_POST["question"] === '0') {
    $selectedquestionqry = "SELECT QuestionNo FROM Question";
} else {
    $selectedquestionqry = "SELECT QuestionNo FROM Question WHERE (QuestionId = ?)";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:23:06.070

您需要更改查询以删除`WHERE`基于发布值的条件 `'0'`。此后您不必更改任何代码，因为您已经在循环，但您应该在循环之外显示 Total。

# symfony - Symfony2，Doctrine，更新 OneToMany 条目

> ID：14675654
> 
> 赞同：0
> 
> 时间：2013-02-03T18:20:43.083
> 
> 标签：symfony, doctrine, one-to-many

我有功能

```
private function updateCharacters($oApiKeyInfo) // argument is base entity
{
    $aXmlCharacter = $this->fXml->getXmlRowset($this->oXml, 'row');
    // insert new
    foreach ($aXmlCharacter as $oXmlCharacter)
    {
        $loopData = $this->fXml->getXmlAttributesAsArray($oXmlCharacter);

        $oApiKeyInfoCharacters = new apiKeyInfoCharacters();

        $oApiKeyInfoCharacters
                ->setKeyID($this->keyID)
                ->setCharacterID($loopData['characterID'])
                ->setCharacterName($loopData['characterName'])
                ->setCorporationID($loopData['corporationID'])
                ->setCorporationName($loopData['corporationName'])
                ->set_apiKeyInfo_byKeyID($oApiKeyInfo);

        $this->em->persist($oApiKeyInfoCharacters);
    }

// $this->em->flush() is in main (public) function
} 
```

但是，它会创建重复项......我希望在 db 中只有 $aXmlCharacter （数组）中的条目，其他条目必须被删除

现在上面的代码只是添加新条目，但我需要删除以前的

有人可以帮忙处理吗？并请展示工作示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:49:39.013

重复条目我看不到任何唯一性的定义。
如文档所示，删除 Object vom 数据库很简单。

```
$product = $em->getRepository('YourBundle::apiKeyInfoCharacters')->find($id);
$em->remove($product);
$em->flush(); 
```

但是为什么要删除现有的而不是更新呢？

# android - 如何将样式应用于 Android 应用程序中的所有按钮？

> ID：14675657
> 
> 赞同：3
> 
> 时间：2013-02-03T18:20:52.373
> 
> 标签：android, button, styles

[这](https://stackoverflow.com/a/2410938/1742204) 不起作用，因为没有`buttonStyle`项目名称。它只有`button`.

我的例子：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="AppTheme" parent="@android:style/Theme.Black">
        <item name="android:button">@style/ThemeButton</item>
    </style>

    <style name="ThemeButton" parent="@android:style/Widget.Button">
        <item name="android:background">@drawable/button</item>
    </style>

</resources> 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-29T08:43:23.530

当为不同的 API 级别使用不同的主题时，我会覆盖每个主题的按钮样式。考虑以下示例。

API 14+ 的应用程序主题是派生自`android:Theme.Holo.Light.DarkActionBar`.

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <!-- API 14 theme customizations can go here. -->
</style> 
```

`android:Theme.Holo.Light.DarkActionBar`没有自己的`buttonStyle`，但它的父母`Theme.Holo.Light`有。按钮样式如下：

```
<item name="buttonStyle">@style/Widget.Holo.Light.Button</item> 
```

但是您的应用程序的 API 21 主题源自`android:Theme.Material.Light.DarkActionBar`

```
<style name="AppBaseTheme" parent="android:Theme.Material.Light.DarkActionBar">
    <!-- API 21 theme customizations can go here. -->
</style> 
```

的按钮样式`android:Theme.Material.Light`如下：

```
<item name="buttonStyle">@style/Widget.Material.Light.Button</item> 
```

`Widget.Button`是`Widget.Holo.Light.Button`和`Widget.Material.Light.Button`我上面提到的祖父。因此，如果您从`Widget.Button`应用程序中派生，您将失去 Google 工程师为`Widget.Material.Light.Button`和`Widget.Holo.Light.Button`.

我记录了一些例子来证明这一点。

**安卓按钮样式。所有 API 级别的 Widget.Button。**

所有 API 级别的老式按钮 [http://youtu.be/hKWUFgvw-Gs](http://youtu.be/hKWUFgvw-Gs)

*文件夹值*中的 styles.xml如下所示：

```
<style name="AppBaseTheme" parent="android:Theme.Light">
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">

    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:buttonStyle">@style/Button</item>
</style>

<style name="Button" parent="@android:style/Widget.Button"></style> 
```

**每个按钮样式都源自其主题的按钮样式。**

该按钮具有材质动画[http://youtu.be/8Wp1TWjjha0](http://youtu.be/8Wp1TWjjha0)

*文件夹values-v21*中的 styles.xml如下所示：

```
<resources>

    <style name="AppBaseTheme" parent="android:Theme.Material.Light.DarkActionBar">
        <!-- API 14 theme customizations can go here. -->
    </style>

    <style name="BaseButton" parent="@android:style/Widget.Material.Light.Button"></style>

</resources> 
```

*文件夹values-v14*中的 styles.xml如下所示：

```
<resources>
    <style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    </style>

    <style name="BaseButton" parent="@android:style/Widget.Holo.Light.Button"></style>

</resources> 
```

*文件夹值*中的 styles.xml如下所示：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="AppBaseTheme" parent="android:Theme.Light"></style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <item name="android:buttonStyle">@style/Button</item>
    </style>

    <style name="Button" parent="@style/BaseButton">
        <item name="android:text">Lorem Ipsum</item>
    </style>

</resources> 
```

[适用于 Android 5.0 的材料设计（API 级别 21）](https://developer.android.com/design/material/index.html)

[如何在 Android 4.4.4 上录制屏幕](http://www.cnet.com/how-to/how-to-record-your-screen-on-android-4-4-kitkat/)

[视频比特率](http://help.encoding.com/knowledge-base/article/understanding-bitrates-in-video-files/)

# scala - 如何覆盖 SettingKey 以计算 sbt 中的另一个 SettingKey？

> ID：14675660
> 
> 赞同：4
> 
> 时间：2013-02-03T18:20:57.387
> 
> 标签：scala, sbt

我只想`b`在计算 SettingKey 时覆盖 SettingKey 的值`a1`。

```
import sbt._
import sbt.Keys._

object Build extends Build {
  val a1Key = SettingKey[String]("a1", "")
  val a2Key = SettingKey[String]("a2", "")
  val bKey  = SettingKey[String]("b", "")

  lazy val rootProject = Project("P", file(".")).settings(
   bKey := "XXX",
   a1Key <<= bKey((x) => ">>>"+x+"<<<"),
   a2Key <<= bKey((x) => ">>>"+x+"<<<")
  ) .settings(
   bKey in a1Key := "YYY"   //providing custom value in setting scope
  ) 
} 
```

目前的结果是

```
> a1
[info] >>>XXX<<<
> a2
[info] >>>XXX<<<
> b
[info] XXX 
```

...但我的目标是看到`YYY`的价值`a1`：

```
> a1
[info] >>>YYY<<<
> a2
[info] >>>XXX<<<
> b
[info] XXX 
```

比上面更好的实际示例是，当您只想在`runtime`配置中向构建添加一些资源时，以及在打包应用程序时添加一些其他资源。例如，在开发模式和生产期间构建由服务器提供的 GWT 应用程序公共资源是不同的。`resource-directories`例如，自定义设置`run`和`package`任务会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:01:03.403

您首先需要设置`a1Key`并`a2Key`允许`bKey`覆盖：

```
lazy val rootProject = Project("P", file(".")).settings(
  bKey := "Fnord",
  a1Key <<= (bKey in a1Key)(x => ">>>" + x + "<<<"),
  a2Key <<= (bKey in a2Key)(x => ">>>" + x + "<<<")
).settings(
  bKey in a1Key := "Meep"
) 
```

这样，计算`a1Key`将使用更具体的值`Meep`，而在计算`a2Key`时，sbt 将“寻找”的定义，`bKey in a2Key`然后，因为它没有“找到”它，所以回退到更一般的`bKey`（在默认范围内），即被定义并因此被使用。

**编辑：**不幸的是，这意味着，除非提供`a1Key`和`a2Key`设置的定义的人还明确提供所需的扩展点（以设置范围依赖项的形式），否则您不能覆盖依赖项。至少我是这么理解的。

# javascript - 我的购物车添加了重复的金额

> ID：14675664
> 
> 赞同：-1
> 
> 时间：2013-02-03T18:21:15.530
> 
> 标签：javascript, html, css

我的商店有问题（必须是 javascript）。我转到此页面并在其中一项上选择添加到购物车：[http://www.proxyplayer.co.uk/NewSite/?page_id=4](http://www.proxyplayer.co.uk/NewSite/?page_id=4) 它作为 1 项添加到右侧边栏的购物车中。然后我单击查看购物车，但一旦出现结帐页面，它就会突然变成 2 件商品

我尝试通过萤火虫查看，发现有一个空白的背景图像： url() 导致双重提交。有什么想法可以解决这个问题吗？

```
/* Background */
    #show-space,
    #inner-page-show-space {
        background-color: #ff9f12;
        background-image: url();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:09:48.227

只需将其添加到您的 javascript 中`onload`：

```
document.getElementById("inner-page-show-space").style.backgroundImage = "url('a dummy image url')"; 
```

这将覆盖 CSS 中的定义。

# php - 无法使用 Zend Framework 2 创建静态页面

> ID：14675667
> 
> 赞同：1
> 
> 时间：2013-02-03T18:21:29.380
> 
> 标签：php, zend-framework2

我正在尝试使用 Zend Framework 2 创建一个网站，但我有一个简单的问题让我发疯。

我想用静态内容制作一个简单的 about-us.html 页面，因为除了显示 html 之外不需要做任何其他事情。

无需创建控制器/模型等...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T18:36:32.137

也许您首先要质疑为什么要使用 ZF。如果您只想创建一个静态互联网页面，请不要使用 PHP 框架！

如果您没有很好地提出您的问题，而您实际上只是在现有的 ZF 应用程序中添加一个静态页面，为什么不直接使用现有的`IndexController`，添加一个空操作并将您的静态内容添加到相应的 中`.phtml`？

或者，您可以查看[PhlySimplePage](https://github.com/weierophinney/PhlySimplePage)，这是一个 ZF2 模块，用于将简单的静态页面添加到 ZF 应用程序。它由采埃孚的首席开发人员 Matthew Weier O'Phinney 编写。

正如自述文件所说，这个模块消除了创建控制器和动作的需要。所以你需要做的就是创建一个路由和一个视图脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T09:14:54.207

您必须创建控制器和视图文件。假设有一个带有链接的关于我们的菜单

```
<a href="<?php $this->url('aboutus'array('action'=>'aboutus'));?>">
    About Us
</a> 
```

只需转到 aboutus 查看文件并编写静态 html 代码。

谢谢阿洛克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T06:08:47.903

我知道这个问题可能很老，但我也遇到了麻烦。

这是我为我的应用程序创建通用路由器所做的工作，因此我可以根据需要添加任意数量的操作，然后在我的视图中创建为 phtml 文件

在 module.config.php 上

```
'application' => array(
            'type'    => 'Segment',
            'options' => array(
                'route'    => '/[:action][/]',
                'constraints' => array(
                    'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ), 
```

所以基本上它所做的是获取您在应用程序中可能具有的任何操作并用作页面......就像任何其他控制器一样

而不是[http://yoursite.com/application/test](http://yoursite.com/application/test) 你现在可以做[http://yoursite.com/test](http://yoursite.com/test)

如果您在 indexController 文件中设置了 testAction。

希望我帮助了未来寻找这些信息的人。

# javascript - 无法通过变量访问对象？

> ID：14675674
> 
> 赞同：0
> 
> 时间：2013-02-03T18:21:51.053
> 
> 标签：javascript, jquery

我有一个定义如下的javascript对象：

```
var tabs = {
    'nav_tweet_search':'tweet-panel',
    'nav_shopping_cart':'cart-panel',
    'nav_stats':'stats-panel'
}; 
```

我试图使用另一个函数中的变量访问一些值。但是，我得到了`undefined`。我创建了一些控制台日志..

```
console.log("panel: "+panel);
console.log("tabs: "+tabs);
console.log("tabs.panel: "+tabs.panel); 
```

哪个输出，

```
panel: nav_tweet_search 
tabs: [object Object] 
tabs.panel: undefined 
```

为什么我无法使用变量访问 obj 的任何原因？如果我执行“tabs.nav_tweet_search”，它会起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:23:13.253

用这个：

```
console.log("tabs[panel]: " + tabs[panel]); 
```

当您执行`tabs.panel`此操作时，浏览器将查找名为“panel”的属性，但仅定义了“nav_tweet_search”、“nav_shopping_cart”和“nav_stats”。

使用括号时，变量的值将用作获取对象属性的键。如果你使用`tabs.panel`它相当于`tabs["panel"]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:23:14.313

你似乎想要

```
tabs[panel] 
```

这给出了名称为 的`panel`属性`tabs`。

# windows-7 - Windows GPU 视图

> ID：14675676
> 
> 赞同：2
> 
> 时间：2013-02-03T18:22:10.477
> 
> 标签：windows-7

我正在处理的一个应用程序中的 FPS 较低。我发现GPUView可以用来调试图形性能问题。我已经为用例收集了 Merged.etl 文件。这显示了我的应用程序的 FPS 图表。我试图了解此图表与 GPU 硬件队列和 CPU 上下文队列之间的相互关系。基本上我想知道这个FPS图表是如何得出的？如果有任何事件可以跟踪此信息，我正在考虑添加此事件的实时跟踪，以便在运行应用程序时将 FPS 显示为小部件，类似于[http://blogs.msdn.com/b /jgoldb/archive/2008/09/26/etw-event-tracing-in-wpf.aspx](http://blogs.msdn.com/b/jgoldb/archive/2008/09/26/etw-event-tracing-in-wpf.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T18:30:07.997

为 DX1X 寻找 D3D9-Present 和 DX-Flip。跨越相当长的时间，比如 1 秒。按 Ctrl+E，将显示事件查看器，从中选择 D3D9-Present 或 DX-Flip 事件。事件查看器中的左窗格将为您提供这些事件的数量，并且您已经拥有缩放到的时间跨度。我认为将事件数除以时间会给你该持续时间的平均 fps。gpu 视图是如何做到的，可能是平均运行时间或瞬时值 (1/ deltaT)，其中 deltaT 可能是两个事件之间的时间。你能试试这个小数学并为读者发布一些结果吗:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:41:14.183

FPS 图表源自事件“D3D9 - Present”（可能是 d3d10/11 的其他类似名称）“D3D9 - Present”事件在 D3D 运行时调用用户模式图形驱动程序的界面[Present时产生](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569176%28v=vs.85%29.aspx)

GPUview中的FPS聊天只考虑调用Present的计数器，但是对于某些应用程序，例如windows媒体播放器，它会在DWM中为一帧调用Present两次以进行免费撕裂，第一次呈现上半部，第二次呈现底下的一半。在这种情况下，GPUview 中的 FPS 实际上是真实 FPS 的两倍。要获得真实的FPS，还需要查看“DX-blt”事件，如果“DX-Blt”事件中有“Present Blt”信息，则表明“DX-blt”是“Present”，然后查看此事件中的 Source Rect 和 Dest Rect 信息来确定 Present 是用于完整帧还是部分帧。

# sql - 与 SQL 相比，这个公式有什么作用

> ID：14675677
> 
> 赞同：1
> 
> 时间：2013-02-03T18:22:11.660
> 
> 标签：sql, math

A – ( B ∩ A )

我想知道这组数学在查看时可以转化为什么，并将其与 SQL（运算符）进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T19:43:05.923

如果`A`和`B`是相同“类型”的表（相同的列数和对应列上的兼容数据类型），则可以将其转换为 SQL，如下所示：

```
A EXCEPT (A INTERSECT B) 
```

这当然等同于（在集合代数和关系代数中）：

```
A EXCEPT B 
```

* * *

如果`A`和`B`是**不同**“类型”的表，那么集合操作在它们之间**没有意义**。（连接是不同的东西，它们不应该与联合、差异或交叉点混淆，无论“解释”它们的链接有多受欢迎。）

Union、Difference 和 Intersections 也可以用多种方式表示（使用`(LEFT) JOIN`, `(NOT) IN`,`(NOT) EXISTS`组合，除了显式的`UNION`,`EXCEPT`和`INTERSECT`运算符）这一事实并没有改变这一点。

* * *

语法与上面不完全相同。可以使用任何一种（在 Postgres 和 SQL-Server 中工作。如果替换为 ，它也可以在 Oracle`EXCEPT`中工作`MINUS`）：

```
 SELECT *
  FROM a

EXCEPT 

  ( SELECT * 
    FROM a
  INTERSECT
    SELECT *
    FROM b
  ) ; 
```

或者这个（适用于 Postgres 8.4 及更高版本：**[SQL-Fiddle test](http://sqlfiddle.com/#!11/6cd8c/10)**）

```
SELECT *
FROM
  ( TABLE a
  EXCEPT 
    ( TABLE a INTERSECT TABLE b ) 
  ) t  ; 
```

甚至这个（*看马，不`SELECT`！*）：

```
 TABLE a
EXCEPT 
  ( TABLE a  INTERSECT  TABLE b ) ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T21:01:22.957

只是在 SQL 方面给出另一种选择：

```
SELECT id FROM A
MINUS
SELECT id FROM B 
```

**升级版：**

请注意，`MINUS`从最终结果集中删除重复项并且仅存在于 Oracle 中。

SQL 标准使用其他供应商支持的 EXCEPT：

```
SELECT id FROM A
EXCEPT
SELECT id FROM B 
```

在标准中，它具有`DISTINCT`应该删除欺骗的选项。我想您将不得不检查特定供应商的文档，以查看是否会删除重复项。例如 SQL Server 的实现与Oracle`EXCEPT`中的相同`MINUS`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T18:27:33.187

这计算了 A 和 B 的集合差，并且在 mats 中也等价于`A - B`。所以你在这里感兴趣的是 A 中不在 B 中的元素。

您可以查看[这篇博文](http://nimal.info/blog/2007/intersection-and-set-difference-in-mysql-a-workaround-for-except/)，了解如何在 mysql 中完成设置差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T18:37:45.727

那将是 SET A MINUS (SET A INNER JOIN SET B)。您正在获取 A 和 B (INNER JOIN) 中出现的记录，然后从 SET A (MINUS) 中删除这些记录

集合论术语中的相交等同于 SQL 术语中的 INNER JOIN。

编辑：至于你关于与 NOT IN 相同的问题，不是真的。NOT IN 是用于列值的运算符（“选择”）。MINUS、JOIN 等是集合运算符，用于在行集之间执行操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T19:29:19.627

`A – ( B ∩ A )`等价于`A LEFT OUTER JOIN B WHERE TableB.id IS null`

![在此处输入图像描述](../Images/76bb90e086c987ae68e8f85e15ed4722.png)

[参考链接在这里](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

另一种选择是使用

```
SELECT * FROM A 
WHERE 
  NOT EXISTS (SELECT * FROM B WHERE A.Id = B.id) 
```

# c - fread() 因某种未知原因而失败

> ID：14675679
> 
> 赞同：0
> 
> 时间：2013-02-03T18:22:28.990
> 
> 标签：c, file-io, fread

编辑：当我更改工作目录时它可以工作，因此文件是在不同的目录中创建的。我之前使用的目录唯一奇怪的是它是一个与 VirtualBox 一起使用的共享目录。这一直是 VirtualBox 的错误吗？我最好开始使用单独的目录。

我有一个非常奇怪的问题。在我的程序的某个地方，我有这个代码。我已经对其进行了修改以打印出一些信息来证明问题：

```
uint8_t section[9];
long pos = ftell(rd);
fseek(rd, 0, SEEK_END);
printf("%li\n",ftell(rd));
fseek(rd, pos, SEEK_SET);
printf("%li\n",ftell(rd));
clearerr(rd);
int i = fread(section, 1, 9, rd);
if (i != 9){
    printf("%i - %i - %i\n",i,feof(rd),ferror(rd)); 
```

输出是这样的：

```
23
14
0 - 0 - 1 
```

所以此时文件的长度为 23，光标为 14。我想要 9 个字节，但 fread 给出零并出现错误。我在 Linux Mint 而不是 OSX 上遇到了这个问题。其他人在debian上似乎没有这个问题。我不知道是什么导致了这个问题。有没有办法进一步诊断错误的原因？ferror() 给出零信息。

该文件以“wb+”模式打开。

编辑：

我在 valgrind 中发现了这个晦涩的错误：

```
==22141== Syscall param write(buf) points to uninitialised byte(s)
==22141==    at 0x5B68900: __write_nocancel (syscall-template.S:82)
==22141==    by 0x5AFB882: _IO_file_write@@GLIBC_2.2.5 (fileops.c:1289)
==22141==    by 0x5AFB749: new_do_write (fileops.c:543)
==22141==    by 0x5AFCEB4: _IO_do_write@@GLIBC_2.2.5 (fileops.c:516)
==22141==    by 0x5AFDD3E: _IO_switch_to_get_mode (genops.c:189)
==22141==    by 0x5AFBA96: _IO_file_seekoff@@GLIBC_2.2.5 (fileops.c:999)
==22141==    by 0x5AF4F25: rewind (rewind.c:37)
==22141==    by 0x567D149: CBFileAppend (CBFileEC.c:69)
==22141==    by 0x5473AFA: CBDatabaseCreateDeletionIndex (CBDatabase.c:270)
==22141==    by 0x5473195: CBInitDatabase (CBDatabase.c:112)
==22141==    by 0x54721A1: CBNewAddressStorage (CBAddressStorage.c:37)
==22141==    by 0x401F67: main (testCBAddressManager.c:226)
==22141==  Address 0x402a009 is not stack'd, malloc'd or (recently) free'd
==22141==  Uninitialised value was created by a stack allocation
==22141==    at 0x546F750: ??? (in /media/sf_BitEagle_Projects/cbitcoin/bin/libcbitcoin-storage.2.0.so) 
```

不知道在哪里？？？很明显，所以我没有进一步调试这个的运气。这很奇怪，因为它在 rewind() 中抱怨。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:03:42.807

根据文档，“wb+”会破坏现有文件的内容：http: [//en.cppreference.com/w/c/io/fopen](http://en.cppreference.com/w/c/io/fopen)。当您尝试使用“rb+”时，您必须首先重新创建文件，否则您会遇到与使用“wb+”打开该文件时相同的问题。

**编辑：**这是您的完整示例代码的样子吗？

```
int main()
{
  typedef unsigned char uint8_t;

  FILE * rd = fopen("foo.tmp", "wb+");
  uint8_t section[9] = {0};
  long pos = 0;

  fprintf(rd, "01234567890123456789012");

  fseek(rd, 14, SEEK_SET);
  pos = ftell(rd);
  fseek(rd, 0, SEEK_END);
  printf("%li\n",ftell(rd));
  fseek(rd, pos, SEEK_SET);
  printf("%li\n",ftell(rd));
  clearerr(rd);
  int i = fread(section, 1, 9, rd);
  if (i != 9){
    printf("%i - %i - %i\n",i,feof(rd),ferror(rd));
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:43:15.453

您可能不会相信这一点，但这确实是 VirtualBox 和共享目录的问题。构建过程在普通目录上运行良好。感谢所有试图提供帮助的人。我以前没有使用过 strace，但我会记住这一点！最后我确实得到了 strace-plus 的工作，这可能有一天会证明是有用的。

# android - android无需用户干预即可连接wifi

> ID：14675681
> 
> 赞同：0
> 
> 时间：2013-02-03T18:22:38.230
> 
> 标签：android, wifi, connect

对于 android 应用程序，我们需要知道是否可以在没有密码且无需任何用户干预的情况下连接到未知的 wifi 应用程序。我们想向我们的服务器发送小数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:52:40.990

如您所愿，这是不可能的，但您可以通过其他方式将数据发送到服务器。

无需用户干预即可在服务器上发送数据。

你可以使用`BroadcastReceiver`它。当设备有互联网连接时，然后将其发送到服务器。

在[这里](https://stackoverflow.com/questions/10350449/how-to-check-the-internet-connection-periodically-in-whole-application/10350511#10350511)`BroadcastReceiver`检查

首先将数据写入手机的内部或外部存储器（在文件中）。

其次，当检测到连接时，将文本文件发送到服务器。

# c# - .NET 4.5 中的表单身份验证

> ID：14675691
> 
> 赞同：-1
> 
> 时间：2013-02-03T18:23:14.627
> 
> 标签：c#, asp.net, asp.net-4.5

我通常将表单身份验证用于登录表单

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
   if(FormsAuthentication.Authenticate(Login1.UserName, Login1.Password))
     {
        FormsAuthentication.RedirectFromLoginPage(Login1.UserName, Login1.RememberMeSet);
     }
} 
```

和`web.config`有

```
<authentication mode="Forms">
  <forms defaultUrl="Page.aspx">
     <credentials passwordFormat="Clear">
        <user name="Enter here" password="Enter here" />
     </credentials>
  </forms>

</authentication>
<authorization>
  <deny users="?" />
</authorization> 
```

但是，这不适用于 .NET 4.5。有什么更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:44:12.357

```
public void Login_OnClick(object sender, EventArgs args)
{
    if (Membership.ValidateUser(UsernameTextbox.Text, PasswordTextbox.Text))
    {
        FormsAuthentication.RedirectFromLoginPage(UsernameTextbox.Text,     NotPublicCheckBox.Checked);
    }
    else
    {
        Msg.Text = "Login failed. Please check your user name and password and try again.";
    }
} 
```

# objective-c - 将 NSTableView 中的复选框设置为“YES”

> ID：14675692
> 
> 赞同：0
> 
> 时间：2013-02-03T18:23:21.987
> 
> 标签：objective-c, cocoa, nsdictionary, nstableview

我有一个`NSTableView`带有复选框的列和一个`NSArrayController`.

`NSTableView`绑定到以显示其`NSArrayController`内容。复选框列绑定到`imgArrayController.arrangedObjects.check1`. 程序启动时数组为空。我以这种方式在循环中使用 arrayController 添加值：

```
 [imgArrayController addObject:[NSDictionary dictionaryWithObjectsAndKeys:
        [NSImage imageNamed: [NSString stringWithFormat:@"%@" ,fileName]], @"image", 
        [NSString stringWithFormat:@"%@" ,fileName], @"filename", 
        @"YES", @"check1", 
        nil]]; 
```

添加了正确的行数，但是当它尝试将复选框设置为 YES 时出现错误。这是我得到的错误：

```
2013-02-03 19:11:46.357 Stockuploader[561:303] Error setting value for key path check1 of object {
} (from bound object <NSTableColumn: 0x100152280>   identifier: check1): [<__NSDictionaryI 0x10010c190> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key check1. 
```

有人可以帮我理解我做错了什么吗？这些行出现在表格内，但它们都是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T18:37:07.810

尝试使用`NSMutableDictionary`而不是`NSDictionary`. 也尝试使用`[NSNumber numberWithBool: YES]`代替`@"YES"`（这是一个字符串，而不是布尔值）。

编辑：

在基于单元格的情况下，`NSTableView`您需要将*列*（而不是单元格本身）绑定到 arrayController，其 Controller Key 为 mappedObjects，Model Key Path 为`check1`.

在基于视图的情况下，`NSTableView`您需要将*复选框控件*绑定到表格单元格视图，其模型键路径为`objectValue.check1`.

# java - 如何使用 onclicklistener 进行网格视图

> ID：14675695
> 
> 赞同：8
> 
> 时间：2013-02-03T18:23:48.283
> 
> 标签：java, android, xml

我使用 gridview 来显示数字，所以如果我点击任何数字，下一个活动应该开始。我尝试了这段代码，但应用程序崩溃了

```
 private GridView gridView = null;

      gridView.setOnClickListener(new OnClickListener()

    {
              public void onClick(View v5) 

        {
            setContentView(R.layout.Abc);
            Intent myIntent = new 

 Intent(getApplicationContext(),Abc.class);
            startActivity(myIntent);

        }
    }); 
```

这是gridview的xml代码

```
 <GridView
    android:id="@+id/month_gridView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/calendar_days"
    android:layout_marginLeft="7dp"
    android:layout_marginRight="8dp"
    android:background="@color/grid_background"
    android:fadingEdge="none"
    android:gravity="top|left"
    android:horizontalSpacing="2dp"
    android:listSelector="@android:color/transparent"
    android:numColumns="7"
    android:padding="1dp"
    android:stretchMode="columnWidth"
    android:verticalSpacing="2dp">
</GridView> 
```

logcat 文件日志

```
 02-04 00:10:50.603: D/AndroidRuntime(341): Shutting down VM
    02-04 00:10:50.603: W/dalvikvm(341): threadid=1: thread exiting with uncaughtexception(group=0x40015560)
    02-04 00:10:50.635: E/AndroidRuntime(341): FATAL EXCEPTION: main
    02-04 00:10:50.635: E/AndroidRuntime(341): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.indianic.demo.calendark/com.indianic.demo.calendark.CalendarActivity}: java.lang.RuntimeException: Don't call setOnClickListener for an AdapterView. You probably want setOnItemClickListener instead
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at java.lang.reflect.Method.invokeNative(Native Method)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at java.lang.reflect.Method.invoke(Method.java:507)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at dalvik.system.NativeStart.main(Native Method)
    02-04 00:10:50.635: E/AndroidRuntime(341): Caused by: java.lang.RuntimeException: Don't call setOnClickListener for an AdapterView. You probably want setOnItemClickListener instead
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.widget.AdapterView.setOnClickListener(AdapterView.java:750)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at com.indianic.demo.calendark.CalendarActivity.onCreate(CalendarActivity.java:126)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    02-04 00:10:50.635: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    02-04 00:10:50.635: E/AndroidRuntime(341):  ... 11 more
    02-04 00:10:53.203: I/Process(341): Sending signal. PID: 341 SIG: 9 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-03T18:28:22.060

GridView 就像一个 ListView

你应该使用这样的东西

```
gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            // DO something

        }
    }); 
```

代码并不完美

参考见[http://developer.android.com/reference/android/widget/GridView.html](http://developer.android.com/reference/android/widget/GridView.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T18:27:29.103

您应该使用 onItemClickListener 而不是 onClickListener。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T07:34:45.597

gridView.onClickListener() 将作为视图作为网格的侦听器。gridView.setOnItemClickListener() 将是网格中项目的侦听器。它将位置作为参数，指示您正在单击的项目。parent 参数将指示 gridView 本身。您可以使用它来确定项目的尺寸。就像是

```
view.setMinHeight(parent.getHeight()/n); 
```

# excel - 从多个位置开始时间到特定时间结束

> ID：14675696
> 
> 赞同：0
> 
> 时间：2013-02-03T18:23:51.927
> 
> 标签：excel, date, time, subtraction

我正在尝试创建一个 Excell 页面，该页面确定从多个位置、从不同时间距离到单个点的开始时间。

假设我有 15 个来自不同位置的起点，试图到达一个目的地。我正在尝试将到达时间设置为终点，并通过使用它所花费的目标时间来工作。例如，我想协调多个单位在晚上 11 点集合。我知道第一个单元需要5h30m，第二个需要2h 45m才能同时到达同一点。我将不得不计算 11pm -5h30m = 5:30pm March srart 的第一单元，以及 11pm-2h45m = 8:15pm 的单元 2。

我已经尝试使用 [h]:mm 军事脚本进行减法，并将时间减法到目的地。结果就是两者之间的差异。即 23:00 - 13:00 = 10:00 。但是如果目的地时间是 08:30 - 1300 我得到的只是#######。其中第一次是收敛时间，第二次是行军时间。

如果共同收敛时间没有导致行军时间在 00:01 之前，我就能让它工作。这就是症结所在，我无法让它在午夜之前开始工作。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:37:23.953

使用日期和时间，而不仅仅是时间。您可能还会遇到夏令时尖峰的“问题”，因此最好始终在 gmt 中工作，并从/转换为夏令时（用户时间）以进行输入和显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T21:08:47.497

如果您只想使用时间，请尝试使用`MOD`功能，例如 A2 = 23:00 和 B2 = 2:45 您可以使用

`=MOD(A2-B2,1)`

那会给你20:15

......但它也适用于 A2 = 08:30 和 B2 = 13:00....同样的公式会给你 19:30

# hibernate - RequestFactory 处理双jsr303验证

> ID：14675700
> 
> 赞同：0
> 
> 时间：2013-02-03T18:24:22.220
> 
> 标签：hibernate, gwt, bean-validation, requestfactory

我将 gwt 与 RequestFactory 一起使用，我想使用 JSR303 验证，但问题是当我使用 requestFactory 调用方法时，例如 add(object o) 它调用每个字段的验证 2 次，例如，当我调用 save 方法时对于具有使用自定义 notnull 注释注释的字段的对象：

```
currentContext.add(toPersist).fire(new Receiver<Void>() {
        @Override
        public void onSuccess(Void response) {
        }
    }); 
```

我自定义的 notnull 注释显示了要验证的值

```
public class NotEmptyValidator implements
    ConstraintValidator<NotEmpty, Object>{

@Override
public void initialize(NotEmpty constraintAnnotation) {

}

@Override
public boolean isValid(Object value, ConstraintValidatorContext context) {
    System.out.println("the value "+value);
    return  (value==null || value.toString().trim().equals("")) ? false:true;
} 
```

}

我在同一字段的控制台上收到：

当我尝试添加新实体时：[INFO] 值测试 [INFO] 值测试

当我尝试修改现有实体时：[INFO] 值测试 [INFO] 值 null

我的问题是为什么验证被调用 2 次，为什么当我尝试修改时第二次值为 null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:45:58.070

是否有可能第一次在客户端，第二次在服务器端？

如果是，出于安全原因，这将是正确的。

客户端验证是为了防止客户端输入错误，服务器端验证是为了保护您的系统免受恶意攻击。

# image - p:galleria 不显示任何图像

> ID：14675703
> 
> 赞同：1
> 
> 时间：2013-02-03T18:24:27.697
> 
> 标签：image, jsf, primefaces, galleria

我正在使用 primefaces p:galleria 来显示一些图像，但是它根本没有显示任何东西，

```
 <p:galleria value="#{galleriaBean.images}" 
                            var="image" 
                            effect="slide" 
                            effectSpeed="1000"
                            panelWidth="500" 
                            panelHeight="313" 
                            showCaption="false">  

                    <p:graphicImage value="/resources/Tutorial/#{image}" 
                                    alt="Image Description for #{image}" 
                                    title="#{image}"/>  
                </p:galleria> 
```

GalleriaBean.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package richard.fileupload;

import java.util.ArrayList;  
import java.util.List;  
import javax.annotation.PostConstruct; 
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
/**
 *
 * @author Richard
 */

@ManagedBean(name="galleriaBean")
//@RequestScoped
@ViewScoped

public class GalleriaBean {  

    public static List<String> images;  

    @PostConstruct  
    public void init() {  
        System.out.println("init called");
        images = new ArrayList<String>();  

        for(int i=1;i<=25;i++) {  
            images.add("/resources/Tutorial"+i+".jpg");
        }  
    }  

    public List<String> getImages() {  
        return images;  
    }

} 
```

图像存储在 /resources/Tutorial

我究竟做错了什么 ？我查看了 primefaces 示例，我的看起来相似，但运行时没有显示任何内容:(

我现在得到这个巨大的错误：

```
INFO: init called

    WARNING: Setting non-serializable attribute value into ViewMap: (key: galleriaBean, value class: richard.fileupload.GalleriaBean)
    SEVERE: Error Rendering Vi

ew[/GUI/tutorial.xhtml]
    java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
        at org.apache.catalina.connector.Request.doGetSession(Request.java:2886)
        at org.apache.catalina.connector.Request.getSession(Request.java:2583)
        at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:920)
        at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155)
        at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175)
        at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
        at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
        at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
        at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
        at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)

    INFO: Exception when handling error trying to reset the response.
    java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
        at org.apache.catalina.connector.Request.doGetSession(Request.java:2886)
        at org.apache.catalina.connector.Request.getSession(Request.java:2583)
        at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:920)
        at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155)
        at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175)
        at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
        at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
        at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
        at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
        at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)

    WARNING: JSF1087: Unable to generate Facelets error page as the response has already been committed.
    SEVERE: javax.faces.FacesException: PWC3999: Cannot create a session after the response has been committed
    javax.faces.FacesException: PWC3999: Cannot create a session after the response has been committed
        at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:142)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
        at org.apache.catalina.connector.Request.doGetSession(Request.java:2886)
        at org.apache.catalina.connector.Request.getSession(Request.java:2583)
        at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:920)
        at com.sun.faces.context.ExternalContextImpl.getSession(ExternalContextImpl.java:155)
        at com.sun.faces.renderkit.ServerSideStateHelper.writeState(ServerSideStateHelper.java:175)
        at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
        at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
        at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
        at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
        at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        ... 31 more 
```

但初始化被称为：D

编辑：现在把它降低到 1 个错误：

```
WARNING: Setting non-serializable attribute value into ViewMap: (key: galleriaBean, value class: richard.fileupload.GalleriaBean) 
```

当前代码：现在没有错误，但也没有显示任何内容

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package richard.fileupload;

import java.io.Serializable;
import java.util.ArrayList;  
import java.util.List;  
import javax.annotation.PostConstruct; 
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
/**
 *
 * @author Richard
 */

@ManagedBean(name="galleriaBean")
//@RequestScoped
@ViewScoped

public class GalleriaBean implements Serializable {  

    public static List<String> images;  

    @PostConstruct  
    public void init() {  
        FacesContext.getCurrentInstance().getExternalContext().getSession(true);
        System.out.println("init called"); //testing to see if it called, currently causing a lot of errors
        images = new ArrayList<String>();  

        for(int i=1;i<=3;i++) {  
             System.out.println("loop called"); //testing to see if it called, currently causing a lot of errors
            images.add("/resources/Tutorial/"+ i +".jpeg");
        }  
    }  

    public List<String> getImages() {  
        System.out.println("getImages called"); //testing to see if it called, currently causing a lot of errors
        return images;  
    }

} 
```

控制台：

```
INFO: init called
INFO: loop called
INFO: loop called
INFO: loop called
INFO: getImages called 
```

所有都被调用，但仍然没有显示

编辑 ：

感谢您的帮助，我已经按照您的建议更改了文件位置并检查了 chrome 中的控制台，您是对的，我收到 404 not found 错误，但是即使更改到您的位置后我也得到了这个，

我的文件目录是

```
WebContent
 |-- META-INF
 |-- WEB-INF
 |-- GUI
 |    `-- tutorial.xhtml (page calling the images)
 |-- resources
 |    `-- Tutorial
 |         |-- Tutorial1.jpg
 |         |-- Tutorial2.jpg
 |         |-- Tutorial3.jpg
 |         :   :
 | 
```

但是使用 chromes 控制台，我可以看到它正在尝试在其中找到图像，`/fileuploadWithPreview//GUI/Tutorial/Tutorial`但它们存储在`resources/tutorial/`

新问题是我如何让它调用 xhtml 文件所在的 GUI 文件夹之外的资源文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T20:26:04.963

图片 URL 至少很奇怪。

这里，

```
for(int i=1;i<=25;i++) {  
    images.add("/resources/Tutorial"+i+".jpg");
} 
```

您正在指定完整的 webcontent-relative URL。

和这里，

```
<p:graphicImage value="/resources/Tutorial/#{image}" ... /> 
```

您假设图像 URL 是相对于`/resources/Tutorial`.

因此，您的图片网址最终会像

```
/resources/Tutorial/resources/Tutorial1.jpg 
```

两次`/resources`？这似乎不对。如果您在 webbrowser 的开发人员工具集中注意 HTTP 流量（在 Chrome/IE9/Firebug 中按 F12），那么您应该注意到浏览器在所有这些图像上都收到 404 Page Not Found 错误。此外，如果您注意`src`生成的 HTML`<img>`元素，您应该注意到有些地方不对劲。

假设您在文件夹中有`Tutorial[n].jpg`图像，`/resources/Tutorial`

```
WebContent
 |-- META-INF
 |-- WEB-INF
 |-- resources
 |    `-- Tutorial
 |         |-- Tutorial1.jpg
 |         |-- Tutorial2.jpg
 |         |-- Tutorial3.jpg
 |         :   :
 |
 `-- page.xhtml 
```

那么您应该按如下方式准备图像文件名：

```
for(int i=1;i<=25;i++) {  
    images.add("Tutorial"+i+".jpg");
} 
```

并按如下方式引用它们（注意：`name`，不是`value`！）

```
<p:graphicImage name="Tutorial/#{image}" ... /> 
```

* * *

至于 PWC3999 例外，这是一个完全不同的问题。如何解决，看一下[添加 <h:form> 导致 java.lang.IllegalStateException: Cannot create a session after the response has beencommited](https://stackoverflow.com/questions/8072311/illegalstateexception-cannot-create-a-session-after-the-response-has-been-commi/8072445#8072445)。换句话说，只需升级 Mojarra。

至于不可序列化的属性警告，只要让提到的类实现`Serializable`。

# android - ICS 4.0.3 上的 USB 主机模式 - 我错过了什么？

> ID：14675704
> 
> 赞同：3
> 
> 时间：2013-02-03T18:24:34.850
> 
> 标签：android, usb, usb-otg

我有一个运行 ICS 4.0.3 和内核 3.0.8 的 Android 平板电脑，它有 2 个 USB 主机端口，两个端口都可以与 USB 记忆棒、键盘、鼠标和 3G 加密狗等设备一起使用，所以我知道硬件正在运行。我想将平板电脑与 USB 主机模式应用程序一起使用，但它无法识别我正在插入的设备。在对 stackoverflow 和其他地方进行了一些挖掘之后，我发现目录`android.hardware.usb.host.xml`中缺少该文件，`/system/etc/permissions`所以我使用了 adb把它放在那里并重新启动，但似乎 USB 主机模式仍然无法正常工作。我正在使用 Play 商店中的“USB 设备信息”，它在 Linux 端报告我的设备，而不是在 Android 端报告我的设备。

我还没有尝试过，但是这个答案 - [Android USB host and hidden devices](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices/11992683#11992683) - 说我也需要`android.hardware.usb.host`在`handheld_core_hardware.xml`or`tablet_core_hardware.xml`文件中（也在`/system/etc/permissions`目录中），但其他帖子建议我只需要这个来获取正确的应用程序列表在 Play 商店中，哪个是正确的？

我担心我错过了其他东西 - 那么我可以寻找什么来确保该设备具有 USB 主机功能？是否可以在没有 USB 主机支持的情况下构建 4.0.3，如果可以，会缺少什么？

或者，主机模式可能仅适用于 OTG 端口，而不适用于仅主机端口。

任何有关进一步调查途径的建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:44:36.697

我决定重新检查一切。android.hardware.usb.host.xml 文件肯定在/system/etc/permissions 目录下，并且有相应的文件权限，但是当我查看内容时发现它包含页面的HTML 描述在[http://code.google.com/p/ics-nexus-s-4g/source/browse/trunk/system/etc/permissions/android.hardware.usb.host.xml](http://code.google.com/p/ics-nexus-s-4g/source/browse/trunk/system/etc/permissions/android.hardware.usb.host.xml)而不是可以从那里下载。看起来我的“从这个链接安装文件”的指令太字面意思了！将正确的内容放入文件中使其成为一种享受。宽慰！！

# java - 无需订阅费的 Google App Engine 模拟

> ID：14675705
> 
> 赞同：0
> 
> 时间：2013-02-03T18:24:39.703
> 
> 标签：java, cloud-hosting

引入经常性费用后，GAE 对我来说已经失去了意义。有没有没有订阅费的类似物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:16:42.333

你需要更加详细; 您在寻找什么功能？

也就是说，GAE 似乎有免费版本。您在计费包中使用什么功能？

[https://cloud.google.com/pricing/](https://cloud.google.com/pricing/)

# ios - UImage 未显示 iphone 4/5 版本

> ID：14675707
> 
> 赞同：0
> 
> 时间：2013-02-03T18:24:54.060
> 
> 标签：ios, objective-c, ios4

所以我有以下图像：

splash1.png (IPHONE 3) splash1@2x.png (IPHONE 4) splash1-568h@2x.png (IPHONE 5)

我想在 iphone 3、4、5 中显示相应的图像。

我试着做

```
UIImage * img = [UIImage imageNamed: @"splash1.png"];
self.splashimg.image = img;
[self.splashimg setFrame: CGRectMake(0, 0, img.size.width, img.size.height)]; 
```

self.splashimg 是一个为图像 img 提供鞋底的图像视图。

但这仍然显示 iphone 3 图像并且没有获得 iphone 4 或 5 图像。

我能做些什么？

当我在 iphone 5 中查看应用程序时，我看到的是启动图像，但它是 iphone 3 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:36:27.347

UIKit 中没有提供通用`-568h@2x`设备修饰符：它仅适用于`Default.png`.

因此，这就解释了为什么您的应用程序没有使用 iPhone 5 特定版本的图像。

无论如何，它应该能够使用`@2x`您的文件版本，所以我建议检查它`splash1@2x.png`是否存在并且它没有损坏或格式错误等。

您可以在此处找到扩展`UIImage`（通过类别）以支持使用`-586@2x`设备修饰符：[https](https://gist.github.com/3711077) ://gist.github.com/3711077 。

# ruby-on-rails - 如何让两个服务共享一个设计认证系统？

> ID：14675712
> 
> 赞同：1
> 
> 时间：2013-02-03T18:25:21.473
> 
> 标签：ruby-on-rails, web-services, authentication, devise

我有一个 Rails 应用程序，它使用 Devise 对用户进行身份验证。它运作良好。

而我的下一个任务是建立一个实时聊天室。Rails 不适合它，所以我想在 EventMachine 上实现它。

但是如何将工作设备认证系统集成到聊天室中呢？例如，在 Rails 中，我可以通过简单的方式获取当前用户：

```
current_user 
```

如何在另一个单独的服务（在我的情况下为 EM 聊天室）中实现它？当然，聊天室的后端可以访问 Rails 的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:27:42.867

为什么说“Rails 不适合它”？尽量将这一切集中在一个屋檐下。正如@Bob 提到的，有一些工具可以做到这一点。

[http://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)还有 [http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)

还有其他的可以很好地与 Rails 集成。不然之前有人问过EventMachine&Rails集成的问题：EventMachine&Rails[如何集成？](https://stackoverflow.com/questions/3570392/how-do-eventmachine-rails-integrate)

# amazon-s3 - 在 Amazon S3 中为小型大小写文件创建大小写重定向

> ID：14675713
> 
> 赞同：2
> 
> 时间：2013-02-03T18:25:30.663
> 
> 标签：amazon-s3, amazon, batch-rename

情况如下：

我在 Amazon S3 上有一个静态网站主机。其中的所有文件都是小写字母，例如：`file.html`

我正在寻找一个**脚本/程序/工具**来查找 S3 站点中的所有小写字母文件并创建几个大小写的 301 重定向。

例如，创建两个文件`File.html`并`FILE.html`使用新的 301 重定向功能将大写字母的请求重定向到小写字母的真实文件。

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:22:43.747

我已经编写了一个脚本，可以执行您想要的操作。它并不是很全面，但应该可以解决问题。我已经把它放在了 GitHub 的[https://github.com/mikewirth/s3-caseredirect](https://github.com/mikewirth/s3-caseredirect)上。

用法： `python makeredirects.py access_code secret bucketname key_for_your_file`

我尝试了一个使用重定向规则功能的版本，但没有成功，因为有大约 20 条规则的限制。因此，此脚本将创建大量空键。

* * *

为了完整起见，因为它太小了，这是脚本：

```
#!/usr/bin/env python

"""
This script takes a file on S3 and creates a redirect from every possible
permutation of case to the original file.

Author: Michael Wirth (https://github.com/mikewirth/s3-caseredirect/)
"""

import sys
import os.path
import argparse

try:
    import boto.s3.connection

except:
    print "boto library (http://code.google.com/p/boto/) for aws needs to be installed"
    sys.exit(1)

filenames = None

def make_case_insensitive(bucket, access, secret, key):
    """ Get filename permutations """
    global filenames
    filenames = []
    filename = os.path.basename(key)
    path = os.path.dirname(key)

    filename_permutations(filename)

    connection = boto.s3.connection.S3Connection(access, secret, True)
    b = connection.get_bucket(bucket)

    for fname in filenames:
        if fname == filename:
            continue

        k = b.new_key(os.path.join(path, fname))
        k.set_redirect(key)

def filename_permutations(filename, pos=0):
    if len(filename) == pos:
        filenames.append(filename)
    else:
        upper = filename[:pos] + filename[pos:pos+1].upper() + filename[pos+1:]
        lower = filename[:pos] + filename[pos:pos+1].lower() + filename[pos+1:]

        if upper != lower:
            filename_permutations(upper, pos+1)
            filename_permutations(lower, pos+1)
        else:
            filename_permutations(filename, pos+1)

def main():
    """ CLI """
    parser = argparse.ArgumentParser()

    parser.add_argument("access", help="AWS credentials: access code")
    parser.add_argument("secret", help="AWS credentials: secret")
    parser.add_argument("bucket", help="Name of Amazon S3 bucket")
    parser.add_argument("key", help="Name of the key to make available case-insensitively. (Starts with a slash.)")

    args = parser.parse_args()

    make_case_insensitive(args.bucket, args.access, args.secret, args.key)

if __name__ == "__main__":
    main() 
```

# java - 用于 KET 测试项目的摇摆导航

> ID：14675717
> 
> 赞同：0
> 
> 时间：2013-02-03T18:25:44.843
> 
> 标签：java, swing, testing, navigation

我正在为这个 KET 测试项目收集东西。但真正困扰我的一件事是这个页面导航我无法弄清楚如何让它正常工作。我正在尝试使用**CardsLayout**。但它不能正常工作。我需要帮助如何设置这些窗格。

在底部我需要制作问题编号，首先我想我只会制作 5 个。当按下数字时，它会导航到由该数字标记的页面。下一页和后退按钮导航 +- 一页，结果按钮转到总结测试的最后一页。

![在此处输入图像描述](../Images/97bf82b7573ef0abb54fe35730bb0eb2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:24:48.470

看看下面给出的代码。这是一个非常基本的设置和处理程序`CardLayout`，非常符合您正在寻找的要求。我希望它能帮助您更好地了解`CardLayout`.

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;

public class CardLayoutDemo extends JFrame implements ActionListener
{
    JButton next;
    JButton prev;
    JButton[] buttons ;
    JPanel[]  cards;
    JPanel    centerPanel;//Going to add all cards
    JPanel lowerPanel;
    int currentButton = 0;
    public void prepareAndShowGUI() 
    {
        next      = new JButton("Next>>");
        prev      = new JButton("<<Previous");
        buttons   = new JButton[10];
        String[]  cardsName = {"ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN"};
        cards     = new JPanel[10];
        centerPanel= new JPanel();
        lowerPanel = new JPanel();
        centerPanel.setLayout(new CardLayout());
        for (int i = 0; i < buttons.length ; i++ )
        {
            buttons[i] = new JButton(cardsName[i]);
            buttons[i].addActionListener(this);
            buttons[i].setActionCommand("CARDS"+i);
            lowerPanel.add(buttons[i]);
            cards[i] = new JPanel();
            cards[i].setLayout(new BorderLayout());
            cards[i].setBorder(BorderFactory.createTitledBorder("Card "+(i+1)));
            cards[i].add(new JLabel(cardsName[i], SwingUtilities.CENTER));
            centerPanel.add(cards[i], cardsName[i]);
        }
        getContentPane().add(centerPanel);
        getContentPane().add(lowerPanel,BorderLayout.SOUTH);
        getContentPane().add(next,BorderLayout.EAST);
        getContentPane().add(prev,BorderLayout.WEST);
        next.addActionListener(this);
        prev.addActionListener(this);
        prev.setEnabled(false);
        if (buttons.length == 1)
        {
            next.setEnabled(false);
        }
        setSize(700,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    public void actionPerformed(ActionEvent evt) 
    {
        JButton clickedButton = (JButton)evt.getSource();
        String command  = clickedButton.getActionCommand();
        if (command.startsWith("CARDS"))
        {
            CardLayout cl = (CardLayout)(centerPanel.getLayout());
            cl.show(centerPanel, clickedButton.getText());
            currentButton = Integer.parseInt(command.substring("CARDS".length()));
            if (currentButton == 0)
            {
                prev.setEnabled(false);
                if (buttons.length > 1)
                {
                    next.setEnabled(true);
                }
            }
            else if (currentButton == buttons.length - 1)
            {
                next.setEnabled(false);
                if (buttons.length > 1)
                {
                    prev.setEnabled(true);
                }
            }
            else
            {
                if (buttons.length > 1)
                {
                    next.setEnabled(true);
                    prev.setEnabled(true);
                }
            }
        }
        else
        {
            if ("Next>>".equals(clickedButton.getText()))
            {
                buttons[++currentButton].doClick();
                if (currentButton == buttons.length - 1)
                {
                    next.setEnabled(false);
                    prev.requestFocus();
                }
                prev.setEnabled(true);
            }
            else if ("<<Previous".equals(clickedButton.getText()))
            {
                buttons[--currentButton].doClick();
                if (currentButton == 0)
                {
                    prev.setEnabled(false);
                    next.requestFocus();
                }
                next.setEnabled(true);
            }
        }

    }     
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable() 
        {
            public void run() 
            {
                CardLayoutDemo cld = new CardLayoutDemo();
                cld.prepareAndShowGUI();
            }
        });
    }
} 
```

> 要了解有关如何使用 CardLayout 的更多信息，请观看[**此**](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)官方教程。

# c# - SequenceEqual 的 IEqualityComparer

> ID：14675720
> 
> 赞同：24
> 
> 时间：2013-02-03T18:25:56.283
> 
> 标签：c#, .net, linq, iequalitycomparer

在 C# 中，是否有`IEqualityComparer<IEnumerable>`使用该`SequenceEqual`方法确定相等性的方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-03T18:27:24.013

.NET Framework 中没有这样的比较器，但您可以创建一个：

```
public class IEnumerableComparer<T> : IEqualityComparer<IEnumerable<T>>
{
    public bool Equals(IEnumerable<T> x, IEnumerable<T> y)
    {
        return Object.ReferenceEquals(x, y) || (x != null && y != null && x.SequenceEqual(y));
    }

    public int GetHashCode(IEnumerable<T> obj)
    {
        // Will not throw an OverflowException
        unchecked
        {
            return obj.Where(e => e != null).Select(e => e.GetHashCode()).Aggregate(17, (a, b) => 23 * a + b);
        }
    }
} 
```

在上面的代码中，我遍历了`GetHashCode`. 我不知道这是否是最明智的解决方案，但这是在内部完成的[`HashSetEqualityComparer`](http://referencesource.microsoft.com/#System.Core/System/Collections/Generic/HashSetEqualityComparer.cs)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-01T18:02:25.747

根据[Cédric Bignon 的回答](https://stackoverflow.com/a/14675741)创建了一个 NuGet 包：

组装包： [https ://www.nuget.org/packages/OBeautifulCode.Collection/](https://www.nuget.org/packages/OBeautifulCode.Collection/)

仅代码文件包：[https ://www.nuget.org/packages/OBeautifulCode.Collection.Recipes.EnumerableEqualityComparer/](https://www.nuget.org/packages/OBeautifulCode.Collection.Recipes.EnumerableEqualityComparer/)

```
var myEqualityComparer = new EnumerableEqualityComparer<string>(); 
```

# asp.net-mvc - User.Identity.Name 与 WebSecurity.CurrentUserName 之间的 MVC 4 区别

> ID：14675725
> 
> 赞同：1
> 
> 时间：2013-02-03T18:26:25.910
> 
> 标签：asp.net-mvc

`User.Identity.Name`在 ASP.NET MVC 4 中，和有什么区别 `WebSecurity.CurrentUserName`？我可以互换使用它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T18:28:27.507

由反射器提供：

```
public static class WebSecurity
{
    ...

    public static string CurrentUserName
    {
        get
        {
            return Context.User.Identity.Name;
        }
    }

    ...
} 
```

那么让我们来回答你的问题：

> `User.Identity.Name`和有什么区别`WebSecurity.CurrentUserName`？

没有任何。

> 我可以互换使用它们吗？

是的。

# python - 迭代函数参数并在python中保留排序顺序

> ID：14675729
> 
> 赞同：2
> 
> 时间：2013-02-03T18:26:34.047
> 
> 标签：python, function, arguments, locals, ordereddictionary

我需要在 python 中调用存储过程。包装函数接受 n 个参数。根据参数列表，我需要引用或取消引用参数。我还需要发送一个空参数。

如何遍历函数参数并构建 SQL 字符串？

例如。存储的过程调用看起来像这样 - SP_TEST('chrA',intB,chrC)

```
def execSp(a,b,c,d):
    <iterate through params and build param list>
    #If the parameter c is null the SQL should be built as below
    SQL="exec SP_TEST('a',b,Null)"; 
```

我尝试使用 locals() 但是它返回一个无序列表

我是 python 新手，所以任何线索都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:29:35.823

您可以使用以下`*args`构造：

```
In [1]: def execSp(*args): print args

In [2]: execSp('abc', 1, 'xyz')
('abc', 1, 'xyz') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:29:43.530

你可以这样做：

```
def execSp(*args):
    if len(args) != 4:
        raise SomeException()
    a,b,c,d = args
    <you can now iterate over args and use a,b,c,d as required> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:30:07.567

```
>>> def f(*args):
...   for a in args:
...     print a
... 
>>> f(1, 2, 3, 4)
1
2
3
4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T18:34:09.837

您需要构建自己的查询吗？通常，您将依靠 DB api 为您引用您的论点。这将避免您遭受 SQL 注入的困扰。

```
cursor.execute('exec SP_TEST(?, ?, ?)', a, b, c) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T19:07:54.290

以下正是您想要的。它首先将列表 AV 初始化为所有 NULL，然后迭代提供的参数数量，并适当地替换它们以形成您想要的查询字符串。该`SQL =`字符串仅将引号添加到第一个参数。我是否正确理解您要做什么？

```
def execSp(*args):
  AV = []
  SQL = "exec SP_TEST(";
  for ii in range(0,4) :
    AV.append("NULL");
  ii = 0;

  for a in args:
    AV[ii] = str(a);
    ii+=1;

  SQL = SQL + "\'" + AV[0] + "\'," + AV[1] + "," + AV[2] + "," + AV[3] + ")";
  print SQL

execSp("hello", 1, 2, 3);
execSp("hi", 2, 3); 
```

当我运行这个时，我得到

```
exec SP_TEST('hello',1,2,3)
exec SP_TEST('hi',2,3,NULL) 
```

# python - 对于使用公共模块的脚本，我应该在哪里放置辅助函数？

> ID：14675732
> 
> 赞同：3
> 
> 时间：2013-02-03T18:26:40.707
> 
> 标签：python

我一直在开发一组 Python 脚本，为了简单起见，我使用专门为这些脚本编写的解析器来操作一组输入文件。该项目的设计通常如下所示：

```
/project/project/__init__.py
/project/project/parser.py
/project/project/helperfunctions.py
/project/preferences.ini
/project/script1.py
/project/script2.py 
```

每个脚本都调用某些函数`helperfunctions.py`来执行诸如读取首选项文件之类的任务——否则这些代码必须为每个脚本复制。解析器根本不使用辅助函数。

但现在我决定让项目面向解析器本身，同时仍将脚本放在一边。所以现在项目看起来像这样：

```
/project/scripts/preferences.ini
/project/scripts/script1.py
/project/scripts/script2.py
/project/parser.py
/project/setup.py 
```

我认为这是一个更简洁的设计，但问题是我不确定将这些辅助函数放在哪里了。我提出的想法是：

*   与解析器一起`setup.py`安装`helperfunctions.py`。我反对这一点，因为辅助函数只是提供与解析器无关的便利方法。
*   将辅助函数作为“隐藏”类合并到解析器中。出于与上述相同的原因，我反对这一点。
*   将辅助功能放入`/project/scripts/`，避开安装。我不喜欢这个想法，因为这表明`helperfunctions.py`它本身就是一个脚本。

解决这个问题的最 Pythonic 方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:06:01.147

一种选择是将辅助函数放入 中`__init__.py`，因此您可以稍后从 parse 模块中调用它们？

我不知道你的函数有多复杂......它们只是函数还是辅助类？

思考的方式是从用户的角度（解析器和那些辅助函数）。您（或任何人）将如何调用这些函数？

# python - 在 Django 中显示位于数据库中的图像

> ID：14675738
> 
> 赞同：9
> 
> 时间：2013-02-03T18:27:11.953
> 
> 标签：python, html, database, django, image

我只想通过网页上的 html 图像标签显示我通过管理模块上传的图像。该图像位于 /home/user/work/djcode/media/chicks/blondie.jpg。

这是我的models.py的相关部分

```
class Image(models.Model):
    model_name = models.CharField(max_length=50)
    model_pic = models.ImageField(upload_to='chicks/')
def __unicode__(self):
    return self.model_name 
```

这是我的views.py的相关部分

```
def main(request):
    i = get_object_or_404(Image, pk=1)
    return render_to_response('polls/main.html', {'image': i}, context_instance=RequestContext(request)) 
```

我正在使用的 html 标签很简单

```
<img src="{{ MEDIA_ROOT }}/{{ image.model_pic.url }}"> 
```

从 settings.py，我的媒体根目录是 MEDIA_ROOT = '/home/user/work/djcode/media'

请注意，变量 {{ image.model_pic.url }} 通过 html 模板显示“chicks/blondie.jpg”，所以我认为我的图像对象确实很好地发送到了模板。

任何人都可以帮我解决这个问题吗？那真的很有帮助。

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T18:43:07.590

您在模板中的图像字段上使用 url 函数并不完全正确 -`{{ image.model_pic.url }}`应该可以解决问题。你只需要放下`{{ MEDIA_URL }}`一点。

你的 html 应该是 -

```
<img src="{{ image.model_pic.url }}"> 
```

查看有关[在模型中使用文件](https://docs.djangoproject.com/en/2.2/topics/files/#using-files-in-models)的文档。

如果您仍然遇到问题，则可能是[提供静态文件的问题。](https://docs.djangoproject.com/en/2.2/howto/static-files/)在 django 中提供静态文件取决于您是在生产中还是仅使用`python manage.py runserver`命令。

要在开发过程中提供媒体文件（使用 python manage.py runserver），请确保您的 settings.py 中的 MEDIA_URL 和 MEDIA_ROOT 正确，然后您可以将以下内容附加到您的 url conf -

```
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = patterns('',
    # ... the rest of your URLconf goes here ...
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

查看[文档](http://docs.djangoproject.com/en/2.2/howto/static-files/)以获取有关如何在生产中提供文件的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:34:42.647

您需要使用`{{MEDIA_URL}}`or `{{STATIC_URL}}`，选择取决于您如何管理服务器上的文件。如果你用`{{STATIC_URL}}`这个是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-31T22:30:05.117

尝试执行以下操作：

```
from django.conf import settings
from django.conf.urls.static import static
from . import views

urlpatterns = [
            .....
] + static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT) 
```

# php - php 日期时间倒计时

> ID：14675739
> 
> 赞同：1
> 
> 时间：2013-02-03T18:27:16.157
> 
> 标签：php, datetime

所以我有一个关于 php 中的 DateTime 的问题。

```
$datetime1 = new DateTime('2013-02-01 10:40:00');
$datetime2 = new DateTime('2013-02-03 19:13:00');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%d day %h hours %i minutes'); 
```

echo 输出的是：2 天 8 小时 33 分钟。好的，我知道第一个变量和第二个变量之间的差异等于输出。但是有什么方法可以使输出倒计时。

例如：

```
$datetime1 = new DateTime('2013-01-01 00:00:00');
$datetime2 = new DateTime('2013-01-01 13:30:00'); 
```

我想输出的是：13:30:00，2分钟后就是13:28:00。

有什么办法可以用 diff 函数来做到这一点。

感谢帮助

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:29:55.037

这仅在以下情况下有效：

*   现在的时代之一
*   页面刷新或您使用 ajax。PHP 在服务器端执行。

因此，您基本上已经有了代码，只需稍作调整：

```
$datetime1 = new DateTime();
$datetime2 = new DateTime('2013-02-03 19:13:00');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%d day %h hours %i minutes'); 
```

# parallel-processing - 多线程同步原语

> ID：14675745
> 
> 赞同：0
> 
> 时间：2013-02-03T18:27:43.223
> 
> 标签：parallel-processing, thread-safety, critical-section

我有以下情况：

我有多个工作线程正在运行，它们都经过一段代码，并且允许它们同时进行。现在没有关键部分围绕这段代码，因为这些线程不需要它。

我有一个主线程，有时也想进入那段代码，但是当它进入时，其他工作线程都不应该使用那段代码。

天真的解决方案：用关键部分包围代码部分。但这会扼杀工作线程之间的大量并行性，这对我来说很重要。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:33:45.043

使用 RW 锁。RW 锁允许多个读取器和一个写入器。您的工作人员会在临界区开始时调用*read-lock*，而主线程会*write-lock*。

根据定义，当调用*read-lock*时，调用进程将等待任何写入线程完成。调用*write-lock*时，调用进程将等待任何读取或写入线程完成。

使用 POSIX 线程的示例：

```
pthread_rwlock_t lock;
/* worker threads */
void *do_work(void *args) {
    for (int i = 0; i < 100; ++i) {
        pthread_rwlock_rdlock(&lock);
        // do some work...
        pthread_rwlock_unlock(&lock);
        sleep(1);
    }
    pthread_exit(0);
}

/* main thread */
int main(void) {
    pthread_t workers[4];
    pthread_rwlock_init(&lock);
    int i;

    // spawn workers...
    for (i = 0; i < 4; ++i) {
        pthread_create(workers[i]; NULL, do_worker, NULL);
    }
    for (i = 0; i < 100, ++i) {
        pthread_rwlock_wrlock(&lock);
        // do some work...
        pthread_rwlock_unlock(&lock);
        sleep(1);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T20:40:37.693

据我了解，您的工作线程是异步启动的。所以当主线程想要运行这段代码时，你必须确保没有工作线程在执行它。因此，您必须在主线程进入该代码段之前停止所有工作线程，然后允许它们再次进入该代码段。
这可以完成 - 使用 Grand Central Dispatch - 如果您的工作线程将被分配给一个调度组，请参阅[https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference。 .html](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) _
然后主线程可以将消息发送`dispatch_group_wait`到这个调度组，等待所有工作线程离开这个代码段，执行它，然后重新排队工作线程。

# sockets - netlink 连接器插座

> ID：14675748
> 
> 赞同：3
> 
> 时间：2013-02-03T18:27:56.117
> 
> 标签：sockets, unix, network-programming, netlink

我以前从事过网络编程工作。但这是我第一次涉足 netlink 套接字。

我选择研究“连接器”类型的 netlink 套接字。与任何内核组件一样，它也有一个用户对应项。linux 内核有一个名为[ucon.c](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/Documentation/connector/ucon.c)的示例程序，可用于基于上述连接器 netlink 套接字构建用户空间程序。

所以在这里我想指出我想确认我理解的程序部分以及我不遵循逻辑的程序部分。说够了。开始了。无论我误入歧途，请纠正我。

据我了解，netlink 套接字是一种 IPC 方法，用于连接*同一*台机器上的进程，因此进程 ID 用作标识符。由于 netlink 消息可以*理想地*多播，netlink 套接字需要的另一个标识符是*消息组*。连接到同一*消息组*的所有组件实际上都是相关的。因此，在 IPv4 的情况下，我们使用*sockaddr_in*代替*sockaddr*，这里我们使用包含上述标识符的*sockaddr_nl 。*

现在，由于我们不打算使用内核的 TCP/IP 堆栈，所以在 netlink 消息的情况下，netlink*数据包*可以被认为是*原始*的（如果我错了，请在这里纠正我）。因此，netlink 数据包经过的唯一封装是定义为[nlmsghdr的](http://lxr.free-electrons.com/source/include/linux/netlink.h?v=2.6.34#L39)*netlink 消息头*。

现在进入我们的程序 ucon，首先使用*连接器*协议`main()`创建一个 NETLINK 系列套接字。然后它用相关信息填充前面提到的 netlink socketaddress 结构。为了在这里做一点实验，我在 connector.h 文件中添加了一个条目。现在我的第一个问题来了。

 *连接器消息具有在 connector.h 中定义的特定类型。现在这个连接器消息结构完全是 netlink*内部的东西，对吧？*就 netlink 而言，这只是有效载荷。正确的？

继续前进，在 netlink 消息头结构中*nl-group*字段究竟是什么意思？定义实际上并不包含此名称的元素。那么我们是否使用覆盖技术来填充 netlink 消息头的某些字段？如果是这样，对应的具体内容是什么？我似乎无法在任何地方找到它。

因此，在将套接字地址绑定到套接字之后，它会发送 10,000 个*基于连接器的*唯一数据，就 netlink 而言，这些数据是纯有效负载。但就这些*消息*而言，奇怪的是，它们似乎都具有相同的序列号。

继续前进，我们发现自己在*netlink_send*子例程中通过我们上面绑定的套接字发送这些数据包。此子例程使用各种 netlink 帮助宏来操作要发送的数据。正如我们上面所说，该`main()`函数发送了 10,000 条数据，每条数据长度为零，不需要确认，因为 ack 字段为 0（如果我在这里错了，请纠正我）。因此，每个“数据包”只不过是一个*连接器消息头*，其中没有任何内容。正确的？

现在令人惊讶的是 netlink_Send 函数使用与 main() 相同的序列号，因为它是一个全局变量。但是，在 main() 中的后增量之后，它现在是“1”。所以基本上我们的*netlink 谈话*是从序列号“1”开始的。可以吗？

查看 linux/netlink.h 中定义的一些辅助宏，我将尝试总结我对在该程序中直接或间接使用的宏的理解。

```
#define NLMSG_LENGTH(len) ((len)+NLMSG_ALIGN(NLMSG_HDRLEN)) 
```

所以这个宏会先对齐netlink消息头长度，然后加上*payload*长度。对于我们的例子，netlink 有效负载是一个连接器标头，没有任何自己的*有效负载。*在我们的例子中，这个 micro 是这样使用的

```
nlh->nlmsg_len = NLMSG_LENGTH(size - sizeof(*nlh)); 
```

在这里，我不明白的是netlink消息的实际有效负载。在上述情况下，它是连接器消息头的大小（因为连接器消息本身不包含其自身的有效负载）减去指针（指向 netlink 消息的第一个字节，因此指向 netlink 消息头）。这个指针（像任何其他指针变量一样）等于机器字大小，在我的例子中是 4 个字节。为什么我们要从连接器消息头中减去它？

之后，我们通过这个 netlink 套接字发送消息，就像任何其他 IPv4 套接字一样。关于上述问题，希望能听到各位大侠的来信。在实际问题之前包括一些句子会有所帮助，因为我的帖子相当长。但我希望它对人们有用的不仅仅是我自己。

问候。*

# c++ - 处理多个 QNetworkRequests 的正确方法

> ID：14675749
> 
> 赞同：1
> 
> 时间：2013-02-03T18:28:02.190
> 
> 标签：c++, qt, qnetworkaccessmanager

我从列表中抓取 url，然后将每个发送到 QNetworkRequest 并接收 HTML 回处理。然而，我有成千上万的请求需要处理。所以我的应用程序一直挂起，直到我阻止它一次产生所有这些请求。

这是处理大量请求的方式吗？我尝试使用 URL 的 Qqueue，然后我将其链接到每个 QNetworkReply 响应后触发的 SLOT。

创建工作列表并添加到队列

```
QQueue<QString> jobs;
for (int i = 1; i <= totalPages; i++){
    QString pageUrl = url + "&page=" + QString::number(i);
    jobs.enqueue(pageUrl);
}

qDebug() << "Total Jobs : " << jobs.count() << endl;
for (int i = 0; i < 5; i++){
    processQueue();
} 
```

然后在 getHtml 函数中

```
QNetworkAccessManager *manager = new QNetworkAccessManager(this);
    QNetworkRequest *getHtmlRequest = new QNetworkRequest(pageUrl);
    getHtmlRequest = new QNetworkRequest(url);
    getHtmlRequest->setRawHeader( "User-Agent", "Mozilla/5.0 (X11; U; Linux i686 (x86_64); "
                               "en-US; rv:1.9.0.1) Gecko/2008070206 Firefox/3.0.1" );
    getHtmlRequest->setRawHeader( "charset", "utf-8" );
    getHtmlRequest->setRawHeader( "Connection", "keep-alive" );
    connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(replyGetPageHtmlFinished(QNetworkReply*)));
    connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(processQueue()));
    manager->get(*getHtmlRequest); 
```

触发

```
void checkNewArrivalWorker::processQueue(){
if (jobs.isEmpty()){
    qDebug() << "Jobs Completed" << endl;
    emit finished();
} else {
    QString pageUrl = jobs.dequeue();
    QString pageNumber = pageUrl.mid(pageUrl.indexOf("page=") + 5);
    getHtml(pageUrl, pageNumber);
}
} 
```

# c# - 实体集名称随机更改

> ID：14675761
> 
> 赞同：0
> 
> 时间：2013-02-03T18:29:48.800
> 
> 标签：c#, entity-framework

我有一个本地和开发环境，彼此非常相似（除了操作系统差异）。他们都运行使用实体框架的同一个项目。我经常使用 LINQpad 来查询两种环境中的数据——但在需要的地方我可以访问 SQL 等。

所以，这一切都是从一个非常奇怪的事件开始的。在我的业务逻辑层中，我调用以获取列表，`Contacts`然后将该列表编组为自定义类型。自定义类型调用`Initial`基于每个联系人姓名的索引。

作为参考，这是执行编组的代码：-

```
private static IEnumerable<AlphabetisedContact> _getGroupedContacts(int clientid)
        {
            return _getLiteContacts(clientid).GroupBy(c => c.Name[0]).Select(
                    g => new AlphabetisedContact { Initial = g.Key, Contacts = g.ToList() }).OrderBy(g => g.Initial);
        } 
```

所以，这一切似乎都很好。除了，它永远不会返回任何`Contact`带有第一个首字母的`a`. 我决定尝试调试它并使用 LINQpad 发现了一个奇怪的地方。这是否与我的代码不返回`a`我不知道的联系人有关（？？），但这是我发现的奇怪之处：-

本地机器：- ![在此处输入图像描述](../Images/8a86475f6076a66b7fd101c6a6888f35.png)

开发机器：- ![在此处输入图像描述](../Images/e09c31c3d0712f6a8f885e8dfdab4b8c.png)

对于不那么敏锐的人来说，EF 返回的实体集名称似乎有所不同。使用开发机器时，它们会在单词之间带有下划线——这不是 EDMX 的设置方式。例如，在本地是**Name ，在 dev 上是****Contact_name**。同样，这可能与我无法获得联系的原因**完全无关。**`a`我在开发盒上没有收到错误，联系人被返回等等等等，但我无法获得`a`联系人。

任何人都可以就如何解决这个问题提供一些帮助/建议/指导吗？现在已经变成了“以木换树”的案例……

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:09:22.640

事实证明，这对我来说是一场灾难性的嘘声。请参阅此 SO 上的答案：

[为什么这个 LINQ 不返回特定的首字母？](https://stackoverflow.com/questions/14675814/why-wont-this-linq-return-a-particular-initial#comment20528102_14675814)

感谢所有花时间偷看的人——至少是对答案的尝试。

;)

# jquery - 向输入字段添加文本，而不是用 ListView + jQuery Mobile 替换它

> ID：14675765
> 
> 赞同：2
> 
> 时间：2013-02-03T18:30:13.630
> 
> 标签：jquery, listview, mobile, filter

我要完成的工作：

单击一个按钮会添加一个词来过滤 jQuery Mobile ListView。

HTML：

```
<ul data-role="listview" data-theme="a" data-divider-theme="c">
                <li data-role="list-divider" data-inset="true">
                    <div data-role="controlgroup"  data-type="horizontal" data-mini="true" id="filterButton">
                        <a href="#" data-role="button" data-inline="true">Iedereen</a>
                        <a href="#" data-role="button" data-inline="true">LinkedIn</a>
                        <a href="#" data-role="button" data-inline="true">Facebook</a>
                        <a data-role="button" style="width: 4px;"></a>
                        <a href="#" data-role="button" data-inline="true" class="filterAdd">Design</a>
                        <a href="#" data-role="button" data-inline="true">Development</a>
                    </div>
                </li>
            </ul>
            <ul data-role="listview" data-filter="true" data-theme="d" data-divider-theme="d" data-filter-placeholder="Search Connections...">
                <li data-theme="b"><a href="index.html">
                    <img src="http://a0.twimg.com/profile_images/1353509401/DSC_3465_bigger.jpg" class="ui-li-thumb zapp-corner zapp-margin-5 zapp-inner-shadow" />
                    <h3>Stephen Weber</h3>
                    <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                    <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                    <p class="ui-li-aside"><strong>LinkedIn</strong></p>
                </a></li> 
```

JavaScript

```
$(document).ready(function () {
                    $("#filterButton").delegate("a", "click", function () {
                        $("div.ui-input-search").find("input").val($(this).text());
                        $("div.ui-input-search").find("input").keyup();
                    });
}); 
```

此时它会替换输入字段内的整个值，而不是将其添加到现有值中。

[http://jsfiddle.net/J4HZp/6/](http://jsfiddle.net/J4HZp/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:32:52.803

```
$("#filterButton").delegate("a", "click", function () {
     var txt = $(this).text();
     $("div.ui-input-search").find("input").val(function(i, currentValue) {
        return currentValue + txt;
     }).trigger('keyup');
}); 
```

# java - Java改变JPanel的形状

> ID：14675766
> 
> 赞同：0
> 
> 时间：2013-02-03T18:30:14.147
> 
> 标签：java, swing, jpanel, shape, java-2d

我正在尝试做一些我认为相当容易但找不到直接答案的事情。基本上我想将 JPanel 的默认形状更改为圆形（或矩形以外的任何其他形状）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:44:54.333

您将需要提供自己的自定义绘画程序。

您将遇到的另一个问题是让布局管理器使用它，但您可以提供自己的插图以在面板中提供一个可以安全使用的区域

您还需要使组件透明，以允许组件的圆圈位置之外的区域是透明的。

查看

*   [定制绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [`JCompnent#getInsets`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#getInsets())

您*可能*`Graphics`还需要操作上下文的剪切矩形。这是棘手和危险的，如果你能避免它，我会的。

**更新了示例**

![在此处输入图像描述](../Images/2831354f335d62ffae37e25c57003e3b.png)

```
public class CirclePaneTest {

    public static void main(String[] args) {
        new CirclePaneTest();
    }

    public CirclePaneTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setBackground(Color.RED);
            setLayout(new GridBagLayout());
            CirclePane circlePane = new CirclePane();
            JLabel label = new JLabel("This is a test");
            label.setHorizontalAlignment(JLabel.CENTER);
            label.setVerticalAlignment(JLabel.CENTER);
            // This is a test to show the usable bounds
            label.setBorder(new LineBorder(Color.RED));
            circlePane.setLayout(new BorderLayout());
            circlePane.add(label);
            add(circlePane);
        }

    }

    public class CirclePane extends JPanel {

        public CirclePane() {
            setOpaque(false);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected int getRadius() {
            // Determines the radius based on the smaller of the width
            // or height, so we stay symmetrical
            return Math.min(getWidth(), getHeight());
        }

        @Override
        public Insets getInsets() {
            int radius = getRadius();
            int xOffset = (getWidth() - radius) / 2;
            int yOffset = (getHeight() - radius) / 2;
            // These are magic numbers, you might like to calculate
            // your own values based on your needs
            Insets insets = new Insets(
                    radius / 6,
                    radius / 6,
                    radius / 6,
                    radius / 6);
            return insets;
        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            int radius = getRadius();
            int xOffset = (getWidth() - radius) / 2;
            int yOffset = (getHeight() - radius) / 2;

            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setColor(getBackground());
            g2d.fillOval(xOffset, yOffset, radius, radius);
            g2d.setColor(Color.GRAY);
            g2d.drawOval(xOffset, yOffset, radius, radius);
//            This is test code to test the insets/usable area bounds...
//            Insets insets = getInsets();
//            g2d.drawRect(xOffset + insets.left, 
//                    yOffset + insets.top,
//                    (xOffset + radius) - (insets.right + insets.left), 
//                    (yOffset + radius) - (insets.bottom + insets.top));
            g2d.dispose();

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:32:59.910

阅读这篇文章：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shape_windows.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)

它详细展示了如何创建椭圆形透明窗口。从代码[参见**如何实现异形窗口**部分]：

半透明：

```
 TranslucentWindowDemo tw = new TranslucentWindowDemo();

    // Set the window to 55% opaque (45% translucent).
    tw.setOpacity(0.55f); 
```

椭圆形：

```
Oval:addComponentListener(new ComponentAdapter() {
        // Give the window an elliptical shape.
        // If the window is resized, the shape is recalculated here.
        @Override
        public void componentResized(ComponentEvent e) {
            setShape(new Ellipse2D.Double(0,0,getWidth(),getHeight()));
        }
    });

    setUndecorated(true);
    setSize(300,200); 
```

演示：

```
public ShapedWindowDemo() {
    super("ShapedWindow");
    setLayout(new GridBagLayout());

    // It is best practice to set the window's shape in
    // the componentResized method.  Then, if the window
    // changes size, the shape will be correctly recalculated.
    addComponentListener(new ComponentAdapter() {
        // Give the window an elliptical shape.
        // If the window is resized, the shape is recalculated here.
        @Override
        public void componentResized(ComponentEvent e) {
            setShape(new Ellipse2D.Double(0,0,getWidth(),getHeight()));
        }
    });

    setUndecorated(true);
    setSize(300,200);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    add(new JButton("I am a Button"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T21:35:02.747

如果您只想布局为圆形，则可以使用圆形布局：

```
class CircleLayout implements LayoutManager
{  
   public void addLayoutComponent(String name,
      Component comp)
   {}

   public void removeLayoutComponent(Component comp)
   {}

   public void setSizes(Container parent)
   {  
      if (sizesSet) return;
      int n = parent.getComponentCount();

      preferredWidth = 0;
      preferredHeight = 0;
      minWidth = 0;
      minHeight = 0;
      maxComponentWidth = 0;
      maxComponentHeight = 0;

      // compute the maximum component widths and heights
      // and set the preferred size to the sum of 
      // the component sizes. 
      for (int i = 0; i < n; i++)
      {  
         Component c = parent.getComponent(i);
         if (c.isVisible()) 
         {
            Dimension d = c.getPreferredSize();
            maxComponentWidth = Math.max(maxComponentWidth,
               d.width);
            maxComponentHeight = Math.max(maxComponentHeight,
               d.height);
            preferredWidth += d.width;
            preferredHeight += d.height;
         }
      }
      minWidth = preferredWidth / 2;
      minHeight = preferredHeight / 2;
      sizesSet = true;
   }

   public Dimension preferredLayoutSize(Container parent)
   {  
      setSizes(parent);
      Insets insets = parent.getInsets();
      int width = preferredWidth + insets.left
         + insets.right;
      int height = preferredHeight + insets.top
         + insets.bottom;
      return new Dimension(width, height);
   }

   public Dimension minimumLayoutSize(Container parent)
   {  
      setSizes(parent);
      Insets insets = parent.getInsets();
      int width = minWidth + insets.left + insets.right;
      int height = minHeight + insets.top + insets.bottom;
      return new Dimension(width, height);
   }

   public void layoutContainer(Container parent)
   {  
      setSizes(parent);

      // compute center of the circle

      Insets insets = parent.getInsets();
      int containerWidth = parent.getSize().width
         - insets.left - insets.right;
      int containerHeight = parent.getSize().height
         - insets.top - insets.bottom;

      int xcenter = insets.left + containerWidth / 2;
      int ycenter = insets.top + containerHeight / 2;

      // compute radius of the circle

      int xradius = (containerWidth - maxComponentWidth) / 2;
      int yradius = (containerHeight - maxComponentHeight) / 2;
      int radius = Math.min(xradius, yradius);

      // lay out components along the circle

      int n = parent.getComponentCount();
      for (int i = 0; i < n; i++)
      {  
         Component c = parent.getComponent(i);
         if (c.isVisible())
         {  
            double angle = 2 * Math.PI * i / n;

            // center point of component
            int x = xcenter + (int)(Math.cos(angle) * radius);
            int y = ycenter + (int)(Math.sin(angle) * radius);

            // move component so that its center is (x, y)
            // and its size is its preferred size
            Dimension d = c.getPreferredSize();
            c.setBounds(x - d.width / 2, y - d.height / 2,
               d.width, d.height);
         }
      }
   }

   private int minWidth = 0;
   private int minHeight = 0;
   private int preferredWidth = 0;
   private int preferredHeight = 0;
   private boolean sizesSet = false;
   private int maxComponentWidth = 0;
   private int maxComponentHeight = 0;
} 
```

你可以像这样使用它：

```
class CircleLayoutFrame extends JFrame
{  
   public CircleLayoutFrame()
   {  
      setTitle("CircleLayoutTest");

      Container contentPane = getContentPane();
      contentPane.setLayout(new CircleLayout());
      contentPane.add(new JButton("Yellow"));
      contentPane.add(new JButton("Blue"));
      contentPane.add(new JButton("Red"));
      contentPane.add(new JButton("Green"));
      contentPane.add(new JButton("Orange"));
      contentPane.add(new JButton("Fuchsia"));
      contentPane.add(new JButton("Indigo"));
   }
} 
```

# php - 对象的排序数组

> ID：14675771
> 
> 赞同：0
> 
> 时间：2013-02-03T18:30:41.720
> 
> 标签：php, arrays, sorting

有没有办法维护一个排序的对象数组？

例如，如果我有一个具有属性 ID、日期、名称和这些对象的集合的对象：

```
$col = array();

public function addNewObject($id, $date, $name)
{
    $col[] = new Object($id, $date, $name); 
    //but instead of appending, it should place it by Name desc
} 
```

如果我调用 getObjects 之类的东西，它将按名称 desc 返回集合中的项目。

我认为以排序顺序取回对象有一些答案，但为了提高效率，我认为最好在插入时排序，因为在我的情况下，“排序依据”变量永远不会改变。

**更新：** 所以根据评论，每次添加东西时我都应该使用整个数组，但这似乎有点占用内存......

由于数组总是按排序顺序开始，我可以通过遍历数组来识别我想要插入的位置（这会有效吗，有更好的方法吗？）。一旦我发现如何将新对象“插入”到数组中？

我不认为数组会很大，但我想以最有效的方式实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:38:42.153

如果您在添加后不热衷于使用数组（尽管我会推荐它；实际上这不会是性能问题，并且它可以保持代码的可读性。

但是，如果您绝对不想这样做，那么您可以如您所说，遍历数组并找出插入的位置：

```
$col = array();

public function addNewObject($id, $date, $name){
    //Find the index to insert at
    $index = 0;
    foreach($col as $i => $item){
        if($item->name > $name){
           //This item is after the item we want to insert. 
           //Use the previous index and stop traversing
           break;
        }
        $index = $i;
    }
    $col = array_splice($col, $index, 0,  new Object($id, $date, $name));
} 
```

感谢https://stackoverflow.com/a/3797526/505722 `array_splice`，用于在任意位置[插入](https://stackoverflow.com/a/3797526/505722)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:30:09.750

这是一个函数的一个很好的例子，它根据你想要排序的任何键对数组进行排序

[http://www.php.net/manual/en/function.sort.php#99419](http://www.php.net/manual/en/function.sort.php#99419)

在您的示例中，您应该像这样运行它：

```
 array_sort($col, 'Name', SORT_DESC)); 
```

请记住，每次向数组添加新项目时，每次都会对整个数组进行排序

# sql-server-2008 - Microsoft.SqlServer.Types 的几何 UDT 的 SQL Server 2012 版本是否向后兼容 SQL Server 2008？

> ID：14675774
> 
> 赞同：12
> 
> 时间：2013-02-03T18:30:50.217
> 
> 标签：sql-server-2008, sql-server-2012, spatial, backwards-compatibility, sqlgeometry

如果我在本地安装了 SQL Server 2008 和 SQL Server 2012，我会自己尝试一下；但是我只安装了较新的版本，并希望保持这种状态。

*   SQL Server 2008 附带一个程序集`Microsoft.SqlServer.Types.dll`，主要版本 10。
*   SQL Server 2012 附带一个程序集`Microsoft.SqlServer.Types.dll`，主要版本 11。

除其他外，两个程序集都公开了一个[`SqlGeometryBuilder`type](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlgeometrybuilder.aspx)。两个程序集版本之间的一个显着区别是 2012 类型有一个额外的重载方法`AddCircularArc`，而 2008 类型没有。

由于[并行引用两个程序集并不是一件容易的事（也许是个坏主意）](http://kentb.blogspot.com/2008/11/visual-studio-referencing-same-assembly.html)，我想知道我是否可以只使用 2012 版本——即使是针对 SQL Server 2008 实例，只要我不使用`AddCircularArc`.

如果他们尝试过，任何人都可以分享他们的经验吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-18T20:16:17.160

默认情况下，SqlClient 使用 Microsoft.SqlServer.Types 程序集的 10.0 版（即使您在项目中引用了较新的版本）。当同时加载该程序集的两个不同版本时，您可能会看到奇怪的运行时异常，例如“System.InvalidCastException：无法将“Microsoft.SqlServer.Types.SqlGeometry”类型的对象转换为“Microsoft.SqlServer.Types.SqlGeometry”类型’。”……

以下文章介绍了您必须将较新的 Microsoft.SqlServer.Types 程序集与 SqlClient 一起使用的一些可能性： [SQL Server 2012 中数据库引擎功能的重大更改](http://technet.microsoft.com/en-us/library/ms143179.aspx)

选项包括：

*   调用 GetSqlBytes 方法，而不是 Get 方法（例如 SqlGeometry.Deserialize(reader.GetSqlBytes(0))）
*   在应用程序配置中使用程序集重定向
*   为“类型系统版本”属性指定值“SQL Server 2012”以强制 SqlClient 加载程序集的 11.0 版本

我个人喜欢“类型系统版本”连接字符串关键字。请参阅此处的 MSDN 文章： [SqlConnection.ConnectionString 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)并搜索“类型系统版本”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T09:43:45.707

# liferay - 如何在 liferay 中以编程方式创建“空”期刊文章

> ID：14675776
> 
> 赞同：4
> 
> 时间：2013-02-03T18:31:01.883
> 
> 标签：liferay, webcontent

使用 Liferay 6.1 CE，是否有一种简单的方法可以根据已知的 structureId 创建“空”期刊文章？

以下代码：

```
ja = JournalArticleLocalServiceUtil.addArticle(
    themeDisplay.getUserId(),
    themeDisplay.getScopeGroupId(), 
    0, 0, //classNameId, classPK, 
    "test-article", //articleId, 
    false, //autoArticleId, 
    JournalArticleConstants.VERSION_DEFAULT, 
    titleMap,
    null, //descriptionMap,
    content, 
    "general", // type, 
    BamboostConstants.SINGLE_CONTENT_STRUCTURE_ID,
    null, // templateId, 
    StringPool.BLANK, //layoutUuid,
    1, 1, 1970, 0, 0, // displayDateMonth, displayDateDay, displayDateYear, 
                      // displayDateHour, displayDateMinute, 
    0, 0, 0, 0, 0, true, // expirationDateMonth, expirationDateDay, 
                         // expirationDateYear, expirationDateHour, 
                         //expirationDateMinute, neverExpire, 
    0, 0, 0, 0, 0, true, // reviewDateMonth, reviewDateDay, reviewDateYear, 
                        //reviewDateHour, reviewDateMinute, neverReview, 
    true, // indexable, 
    false, StringPool.BLANK, null, // smallImage, smallImageURL, smallImageFile, 
    null, StringPool.BLANK, // images, articleURL, 
    serviceContext
    ); 
```

如果`content`是给定结构的有效 xml，则有效，但如果内容为空或空白，则无效。

是否有一种方法可以返回给定结构的“最小”xml，但找不到它。

最好的问候， 阿兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T14:45:17.620

我不知道有什么方法可以做到这一点，但是这个 xml 就足够了

```
<?xml version="1.0"?>

<root available-locales="en_US" default-locale="en_US">
    <static-content language-id="en_US"><![CDATA[ ]]></static-content>
</root> 
```

# php - 篝火codeigniter链接模型方法

> ID：14675780
> 
> 赞同：2
> 
> 时间：2013-02-03T18:31:39.213
> 
> 标签：php, codeigniter

我只是篝火/ ci的新手。我正在尝试通过链接 bf/ci 模型方法来重新创建以下 sql 语句：

```
 SELECT  prod_cat.cat_id, 
                prod_cat.prod_id, 
                prod.enabled, 
                prod.name,
                prod.prod_id,   
        FROM prod_cat, prod 
        WHERE prod.is_enabled = 1 
        AND prod_cat.cat_id =15 
        AND prod_cat.prod_id = prod.prod_id 
        ORDER BY prod.name DESC 
```

我有一个 bf / ci prod_model 和一个 prod_cat_model。

我知道我可以执行以下操作来获取与 cat_id 15 匹配的所有产品，例如：

```
 $this->load->model('cat/prod_cat_model');  
 $records = $this->prod_cat_model->find_all_by('cat_id' => $cid); 
```

同样，我计划使用产品表上的 find_all_by 来限制活动/启用的记录，如下所示：

```
 $this->prod_model->find_all_by('enabled', 1); 
```

首先，作为测试，我正在考虑通过将数组传递给 prod_model 来尝试组合这两个代码片段，如下所示：

```
 public function productsincategory($cid)
  {
    $this->load->model('cat/prod_cat_model');   
    $criteria = array(
    'enabled' => 1,
    'prod_id' => $this->prod_cat_model->find_all_by('cat_id', $cid)
    );
    $records = $this->prod_model->find_all_by($criteria) ;
  } 
```

我收到一条错误消息：

> 'where 子句'中的未知列'Array'
> 
> SELECT * FROM ( `prod`) WHERE `enabled`= 1 AND `prod_id`= 数组

这是有道理的......但我不知道如何解决它，所以它就像“select * from prod where enabled = 1 and prod_id in (prod ids from prod_cat table) 我也试过使用“where_in( )”，但篝火似乎无法识别。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:00:30.157

我在我的产品模型中创建了自己的 where_in() 方法，如下所示：

```
public function where_in($field=NULL, $value=NULL)
{
    if (!empty($field))
    {
        if (is_string($field))
        {
            $this->db->where_in($field, $value);
        }
        else if (is_array($field))
        {
            $this->db->where($field);
        }
    }

    return $this;

}//end where() 
```

所以在我的控制器中，我做了这样的事情：

```
 public function productsincategory($cid)
  {
    $this->load->model('cat/prod_cat_model');  
    $this->prod_cat_model->where('cat_id', $cid);
    $records = $this->prod_cat_model->find_all();

 $prod_ids = array();

foreach($records as $record)
{
    array_push($prod_ids, $record->product_id);
}

    $this->prod_model->where_in('prod_id', $prod_ids) ; //call our own where_in method
$records = $this->prod_model->find_all();
  } 
```

# special-characters - 方格中的特殊字符（文本块）

> ID：14675788
> 
> 赞同：1
> 
> 时间：2013-02-03T18:32:05.457
> 
> 标签：special-characters, squarespace

我希望在 squarespace 6 中使用特殊字符，使用带有文本块的模板....**怎么样**？

我试过了

```
&#8594; 
```

包括→，但没有奏效。我在网站上看到纯文本代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:21:27.537

我与 squarespace 支持人员进行了交谈，他们告诉我这是不可能的。最好的方法是文学复制并将其粘贴到文本块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T07:34:00.530

你可以在代码块中使用这个 ascii 字符，使用

```
<p>&#8594;</p> 
```

→

在代码块中，它应该解决问题[http://help.squarespace.com/guides/about-the-code-block](http://help.squarespace.com/guides/about-the-code-block)

# android - Android - 在模拟器上获取用户的当前位置

> ID：14675789
> 
> 赞同：0
> 
> 时间：2013-02-03T18:32:12.030
> 
> 标签：android, google-maps, android-emulator, emulation

是否可以在 Android 模拟器上显示我们当前的位置？如果是怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:41:21.573

您需要在模拟器的情况下设置纬度和经度，因为模拟器没有 gps 检测硬件来获取当前位置。

```
telnet localhost 5554
geo fix <longitude value> <latitude value> For ex: geo fix 68.54546 37.5117579 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:35:04.347

您可以使用 DDMS 在模拟器上伪造 GPS 位置数据，此处解释：http: [//developer.android.com/tools/debugging/ddms.html#ops-location](http://developer.android.com/tools/debugging/ddms.html#ops-location)和此处：http: [//developer.android.com/guide /topics/location/strategies.html#MockData](http://developer.android.com/guide/topics/location/strategies.html#MockData)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T18:43:46.220

您可以通过其外壳与仿真器实例进行交互。

1.  启动模拟器。
2.  从终端运行`telnet localhost 5554`，您现在处于仿真器外壳中。
3.  键入`help`，它将显示可用的命令，如假电话、短信、电池等。
4.  要了解有关命令类型的更多信息`help <command name>`。
5.  键入`help geo`，它将打印可用的位置命令。
6.  试试 `geo fix 1 1`。
7.  尝试更多其他纬度和经度值。

# c# - 即使使用简单的 OnLoadScript，ABCPdf 也会给出“无法呈现 HTML。无法应用 JScript”

> ID：14675794
> 
> 赞同：0
> 
> 时间：2013-02-03T18:32:38.700
> 
> 标签：c#, javascript, abcpdf

当使用 ABCPdf 将页面呈现为 PDF 时，我正在尝试进行一些简单的 DOM 操作。我按照他们在这里记录的内容：[http ://www.websupergoo.com/helppdf9net/source/5-abcpdf/xhtmloptions/2-properties/usescript.htm](http://www.websupergoo.com/helppdf9net/source/5-abcpdf/xhtmloptions/2-properties/usescript.htm)

但是当我尝试如下简单的事情时：

```
var doc = new Doc();
doc.HtmlOptions.UseScript = true;
doc.HtmlOptions.UseNoCache = true;
doc.HtmlOptions.PageCachePurge();
doc.HtmlOptions.OnLoadScript = @"var reportElms = document.getElementsByClassName(""report"");";
doc.Page = doc.AddPage();
doc.AddImageUrl(Url.Action("TestPdf", "Pdf", new { }, "http")); 
```

我得到了例外：

```
Unable to render HTML. Unable to apply JScript.
COM error 80020101.

Script 'var reportElms = document.getElementsByClassName("report");'. 
```

关于我做错了什么有什么想法吗？

~~**甚至内置功能都不起作用**~~

我什至使用以下脚本遇到了同样的异常：

```
doc.HtmlOptions.OnLoadScript = @"
    window.ABCpdf_RenderWait(); 
    window.ABCpdf_RenderComplete();"; 
```

 ~~顺便说一句，我使用的是第 8 版，因为这是我们拥有的许可证。

**编辑：**

我错过了`.external`和`ABCpdf_RenderWait()`电话`ABCpdf_RenderComplete()`。如果您正确引用它们，它会起作用（想象一下）：

```
doc.HtmlOptions.OnLoadScript = @"
    window.external.ABCpdf_RenderWait(); 
    window.external.ABCpdf_RenderComplete();"; 
```

尽管正如我在回答中提到的那样，IE 也需要跳过很多安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:44:02.773

所以我实际上并没有让 IE 引擎按照我想要的方式执行 JavaScript，但我能够找到使用 Gecko 引擎的解决方案。最初的 NuGet 安装不包括 Gecko DLL，所以我只是下载了独立安装并手动添加了 DLL。

之后，一切都按预期工作。

我相信IE引擎没有工作，因为它需要大量的安全配置，因为FAQs花了很多时间讨论安全调试：[http ://www.websupergoo.com/support.htm#6.7](http://www.websupergoo.com/support.htm#6.7)~~

# mysql - MySQL 三表连接

> ID：14675795
> 
> 赞同：0
> 
> 时间：2013-02-03T18:32:40.467
> 
> 标签：mysql, join, multiple-tables

我有三个表，分别称为`Clinic`、`Doctor`和`Clinic_has_Doctor`。假设这两个表`Clinic`并`Doctor`具有字段`id`，`name`如下所示：

```
Clinic 
+----+------------------------+
| id | name                   |
+----+------------------------+

Doctor
+----+------------------------+
| id | name                   |
+----+------------------------+ 
```

并且`Clinic_has_Doctor`是一个包含诊所和医生之间映射的简单表：

```
Clinic_has_Doctor
+-----------+-----------------+
| Clinic_id | Doctor_id       |
+-----------+-----------------+ 
```

`Clinic`预计是和`Doctor`ID的外键。我需要得到诊所的名单和他们旁边的医生。所以我会有一张像这样的桌子：

```
+-----------+--------------+------------+--------------+
| Clinic_id | Clinic_name  | Doctor_id  | Doctor_name  |
+-----------+--------------+------------+--------------+ 
```

我没有做太多的`JOIN`SQL 命令，所以我无法摆脱这个。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:39:01.497

您将希望`JOIN`使用您的表`Clinic_has_Doctor`连接`Clinic`到`Doctor`表：

```
select c.id ClinicId,
  c.name ClinicName,
  d.id DoctorId,
  d.name Doctor_name
from clinic c
inner join Clinic_has_Doctor cd
  on c.id = cd.clinic_id
inner join doctor d
  on cd.Doctor_id = d.id 
```

如果您在学习`JOIN`语法方面需要帮助，那么这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

我`INNER JOIN`在查询中使用了一个，它将返回所有`Clinics`与他们相关联的医生。

如果您想返回一个`Clinics`即使没有相关医生的列表，那么您将使用`LEFT JOIN`：

```
select c.id ClinicId,
  c.name ClinicName,
  d.id DoctorId,
  d.name Doctor_name
from clinic c
left join Clinic_has_Doctor cd
  on c.id = cd.clinic_id
left join doctor d
  on cd.Doctor_id = d.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T18:39:46.013

应该是这样的：

```
select clinic_has_doctor.clinic_id
     , clinic.clinic_name
     , clinic_has_doctor.doctor_id
     , doctor.doctor_name
from   clinic_has_Doctor 
join   clinic 
on     clinic.id=clinic_has_Doctor.clinic_id
join   doctor
on     doctor.id=clinic_has_Doctor.doctor_id 
```

# vtiger - vTiger 从自定义工作流创建活动会议

> ID：14675799
> 
> 赞同：0
> 
> 时间：2013-02-03T18:33:10.100
> 
> 标签：vtiger

在 vtiger 开源中，一旦满足某些条件，客户希望在日历上创建会议邀请。vtiger 中是否有任何公开的方法/api，我们可以将事件参数传递给它并创建事件？如何从代码创建会议事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:52:26.830

是的，一旦满足条件，您就可以创建一个活动。将他的论点设置为你想要的，然后做一个`Activity->save()`

其他选项是直接在数据库上创建事件（您可以通过 PHP 代码的查询来完成）

# python - 用于查找反向平均值的 Python 代码（查找给出某个平均值的可能值集）

> ID：14675800
> 
> 赞同：0
> 
> 时间：2013-02-03T18:33:11.247
> 
> 标签：python, average

背景：我正在使用 Python 3，但如果人们用其他编程语言提供答案，我仍然可以使用它。任何有关函数或有效算法或编程技巧的建议都会有所帮助。

问题：我有一个涉及四 (4) 个整数的集合及其平均值的问题。

给出的信息： 1\. 集合中的整数个数 (4) 2\. 整数的平均值

所需信息： 1\. 可能导致给定平均值的值列表

注意：集合中的整数数量很少，因此生成列表的有效方法不应该那么难，但到目前为止我被卡住了。我一直从数字的总和（平均 * 4）开始，但还没有找到正确的迭代方法。

编辑：所有整数都是非负数。出于我的目的，它们也不大于 8 位数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:01:25.917

使用总和 N，而不是平均值。

```
def all_possibilities(N, k=4):
    if k == 1:
        yield (N,)
        return
    for i in xrange(N+1):
        for p in all_possibilities(N-i, k-1):
            yield (i,) + p

print list(all_possibilities(5)) 
```

产生：

```
[(0, 0, 0, 5), (0, 0, 1, 4), (0, 0, 2, 3), (0, 0, 3, 2), (0, 0, 4, 1),
 (0, 0, 5, 0), (0, 1, 0, 4), (0, 1, 1, 3), (0, 1, 2, 2), (0, 1, 3, 1),
 (0, 1, 4, 0), (0, 2, 0, 3), (0, 2, 1, 2), (0, 2, 2, 1), (0, 2, 3, 0),
 (0, 3, 0, 2), (0, 3, 1, 1), (0, 3, 2, 0), (0, 4, 0, 1), (0, 4, 1, 0),
 (0, 5, 0, 0), (1, 0, 0, 4), (1, 0, 1, 3), (1, 0, 2, 2), (1, 0, 3, 1),
 (1, 0, 4, 0), (1, 1, 0, 3), (1, 1, 1, 2), (1, 1, 2, 1), (1, 1, 3, 0),
 (1, 2, 0, 2), (1, 2, 1, 1), (1, 2, 2, 0), (1, 3, 0, 1), (1, 3, 1, 0),
 (1, 4, 0, 0), (2, 0, 0, 3), (2, 0, 1, 2), (2, 0, 2, 1), (2, 0, 3, 0),
 (2, 1, 0, 2), (2, 1, 1, 1), (2, 1, 2, 0), (2, 2, 0, 1), (2, 2, 1, 0),
 (2, 3, 0, 0), (3, 0, 0, 2), (3, 0, 1, 1), (3, 0, 2, 0), (3, 1, 0, 1),
 (3, 1, 1, 0), (3, 2, 0, 0), (4, 0, 0, 1), (4, 0, 1, 0), (4, 1, 0, 0),
 (5, 0, 0, 0)] 
```

一般来说，会有choose(N+k-1, k-1)个解。

一个较短的解决方案`itertools.combinations`是：

```
import itertools

def all_possibilities(N, k=4):
    for c in itertools.combinations(range(N + k - 1), k - 1):
        yield tuple(x - y - 1 for x, y in zip(c + (N + k - 1,), (-1,) + c)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:10:04.020

假设您真的在寻找一*组*（唯一的）非负整数，您可以将整数命名为`a, b, c, d`，`a > b > c > d`并注意它们的总和为`average * 4`。然后你可以找到像这样的生成器函数的组合：

```
def get_4set_with_average(average):
    target_float = average * 4.0
    target = int(target_float)
    if target_float != target or target < 6:
        raise ValueError('No combinations possible')
    for a in xrange(target):
        for b in xrange(a):
            for c in xrange(b):
                for d in xrange(c):
                    if a + b + c + d == target:
                        yield([a, b, c, d])

print list(get_4set_with_average(4)) 
```

通过考虑四个整数之间的关系，可以通过各种方式提高效率......

```
given that...
    a > b > c > d >= 0 and a + b + c + d = target 
it must be that...
    3 <= a <= target - 3,
    2 <= b <= target - a - 1,
    (target - a - b) / 2 < c <= target - a - b 
```

这给了我们：

```
def get_4set_with_average(average):
    target_float = average * 4.0
    target = int(target_float)
    if target_float != target or target < 6:
        raise ValueError('No combinations possible')
    for a in xrange(3, target - 2):
        for b in xrange(1, min(a, target - a)):
            for c in xrange(int((target - a - b) / 2) + 1, 
                            min(b, target - a - b + 1)): 
                yield([a, b, c, target - a - b - c]) 
```

（我已经对此进行了一些测试，但没有彻底 - 你需要检查它。）

毫无疑问，有更有效的算法，但可能的组合数量之多使得它难以运行大值。（即使平均 = 20 在我的机器上也需要很长时间。）

# flash - adobe flash actionscript 2.0 中的影片剪辑后的下一帧

> ID：14675801
> 
> 赞同：0
> 
> 时间：2013-02-03T18:33:13.803
> 
> 标签：flash, actionscript-2, frame, movieclip, flash-cs6

我正忙于**Adob​​e Flash Actionsricpt 2.0**中的一个项目。而且我在一帧上有这个导入的视频，但是如果我不放入`stop();`该帧的脚本，则视频将无法播放，但如果我这样做，它将不会进入下一帧。

电影播放完毕后，是否有代码使帧转到下一个？我努力了

```
on(close){ 
```

gotoAndPlay(61) }

所有那些有`on(...)`但他们似乎什么也没做的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:43:12.930

我认为您需要添加代码来识别您的影片剪辑是否已到达最后一帧。您需要找出视频文件中有多少帧，然后告诉 Flash 在达到最后一帧后执行某些操作。

```
if (_root.EXAMPLE_mc._currentframe == 1521)) {
    _root.gotoAndPlay("EXAMPLE FRAME NUMBER OR LABEL");
} 
```

这假定您的影片剪辑是 1521 帧长。检查视频编辑器以确保并替换该号码。

或者，您可以在 FL CS3 及更高版本中找到影片剪辑的结尾，然后可以在那里设置一个提示点。然后，您可以像引用框架标签一样引用它。[Dave Stiller 的博客上](http://www.quip.net/blog/2007/flash/how-to-use-flash-video-cue-points "AS2 提示点")有一个很好的教程。

# c++ - C++ - 具有结构共享/不变性的类似地图的数据结构

> ID：14675802
> 
> 赞同：7
> 
> 时间：2013-02-03T18:33:31.387
> 
> 标签：c++, data-structures

函数式编程语言通常处理不可变的数据结构，但通过结构共享保持高效。例如，您在一些信息地图上工作，如果您插入一个元素，您将不会修改现有地图，而是创建一个新的更新版本。为了避免大量复制和内存使用，地图将在两个实例之间共享（尽可能好）未更改的数据。

如果有一些模板库为 C++ 提供类似数据结构的映射，我会很感兴趣。我搜索了一下，除了 LLVM 中的内部类之外什么也没找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:53:50.657

A Copy On Write b+tree 听起来像您要找的东西。它基本上每次被修改时都会创建一个自己的新快照，但它在版本之间共享未修改的叶节点。我见过的大多数实现都倾向于只添加到数据库日志文件中。CouchDB 有一篇非常好的文章。然而，就地图数据结构而言，它们“相对容易”实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:33:51.840

您可以使用普通地图，但用时间戳或“地图版本号”标记每个元素。如果您也想删除元素，请使用两个标记。如果您可能重新插入已删除的元素，那么您需要一个值列表和每个元素的标记对。

例如，您搜索键“foo”，您发现它在版本 0 到 3（包括）中具有值 5，然后它被“删除”，然后在版本 9 到当前中它具有值 -8 .

不过，这会占用大量内存和时间。

# charts - 如何在 Visual Basic.NET 中使用鼠标围绕其轴旋转 3D 图表

> ID：14675804
> 
> 赞同：0
> 
> 时间：2013-02-03T18:33:35.860
> 
> 标签：charts, rotation

我想通过将鼠标移到它上（左键向下）来围绕其轴旋转 Visual Studio 2010 图表。我在 WPF 中找到了很多示例，但在 WinForms 中没有。

我正在用 Visual Basic 编码。

有人可以指导我看一个教程或示例代码，它们将为我指明正确的方向。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T19:32:45.120

试试这个：

```
 private Point mousePoint;

    private void chart1_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Left)
        {
            if (mousePoint.IsEmpty)
                mousePoint = e.Location;
            else
            {

                int newy = chart1.ChartAreas[0].Area3DStyle.Rotation + (e.Location.X - mousePoint.X);
                if (newy < -180)
                    newy = -180;
                if (newy > 180)
                    newy = 180;

                chart1.ChartAreas[0].Area3DStyle.Rotation = newy;

                newy = chart1.ChartAreas[0].Area3DStyle.Inclination + (e.Location.Y - mousePoint.Y);
                if (newy < -90)
                    newy = -90;
                if (newy > 90)
                    newy = 90;

                chart1.ChartAreas[0].Area3DStyle.Inclination = newy;

                mousePoint = e.Location;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T12:10:56.527

谢谢你的代码。

这是在 VB.NET 中：

```
Private Sub chart_drag(sender As Object, e As MouseEventArgs) Handles embChartTitrations_A_B.MouseMove
        Dim intY As Integer

        If e.Button = Windows.Forms.MouseButtons.Left Then
            If pointStart = Nothing Then
                pointStart = e.Location
            Else

                intY = embChartTitrations_A_B.ChartAreas(0).Area3DStyle.Rotation - Math.Round((e.Location.X - pointStart.X) / 5)
                If intY < -180 Then intY = -180
                If intY > 180 Then intY = 180

                embChartTitrations_A_B.ChartAreas(0).Area3DStyle.Rotation = intY

                intY = embChartTitrations_A_B.ChartAreas(0).Area3DStyle.Inclination + Math.Round((e.Location.Y - pointStart.Y) / 5)
                If intY < -90 Then intY = -90
                If intY > 90 Then intY = 90

                embChartTitrations_A_B.ChartAreas(0).Area3DStyle.Inclination = intY

                pointStart = e.Location
            End If

        End If
    End Sub 
```

（我将鼠标移动除以 5，因为我觉得它可以更精确地旋转图表）

谢谢

克里斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T19:32:35.017

对 Ken 的 C# 示例的小修正和优化（否则还不错，我投票 +1）：

```
private Point _mousePos;
private void chart_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button != MouseButtons.Left) return;
    if (!_mousePos.IsEmpty)
    {
        var style = chart.ChartAreas[0].Area3DStyle;
        style.Rotation = Math.Min(180, Math.Max(-180,
            style.Rotation - (e.Location.X - _mousePos.X)));
        style.Inclination = Math.Min(90, Math.Max(-90,
            style.Inclination + (e.Location.Y - _mousePos.Y)));
    }
    _mousePos = e.Location;
} 
```

# java - 防止 Circles 联合的死锁

> ID：14675809
> 
> 赞同：1
> 
> 时间：2013-02-03T18:33:57.183
> 
> 标签：java, multithreading, synchronization

我有一个 CircleImpl 类，它实现了一个只能存在于 XY 正侧的圆（radius>=0，x>=radius 和 y>=radius。）

我在 CircleImpl 中有一个函数：

```
//this function changes the current circle (this) to make it contain the circle other.
public synchronized void union(Circle other) throws Exception { 
 if (!checkInv(other.getX(),other.getY(),other.getRadius())) 
     throw new Exception("Illegal circle: " + other); 
  synchronized (other) { 
     setRadius(calculateUnionRadius(_x,_y,_radius,other.getX(),other.getY(),other.getRadius())); 
  } 
} 
```

现在可能存在死锁的问题：

```
Circle c1,c2; 
… 
T1: c1.union(c2); 
T2: c2.union(c1); 
```

c1 锁定自己（this），在锁定“other”（c2）之前，c2 获得 CPU 时间并锁定自己（c2）并尝试锁定“other”（c1）并进入阻塞模式。

什么可能的简单解决方案不包括资源排序（System.identityHashCode）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:37:12.537

简单（但不是真正有效）的解决方案是在共享对象上同步`union`操作，例如在`Circle.class`. 缺点是它只允许`union`在任何给定时间执行 1 个线程。就像是：

```
public void union(Circle other) throws Exception { 
    synchronized (Circle.class) {
       if (!checkInv(other.getX(),other.getY(),other.getRadius())) {
           throw new Exception("Illegal circle: " + other); 
       }
       setRadius(calculateUnionRadius(_x,_y,_radius,other.getX(),other.getY(),other.getRadius())); 
    } 
} 
```

# android - 在 Eclipse 中使用 DDMS 删除应用程序

> ID：14675813
> 
> 赞同：3
> 
> 时间：2013-02-03T18:34:24.400
> 
> 标签：android, eclipse-adt, uninstallation

我在 Eclipse 中找不到使用 ADT 插件删除（卸载）正在运行的应用程序的选项。我期望在 DDMS 中有另一个选项，就像它必须`Stop Process`自动执行`adb unistall com.foo.myapp` 如果我弄错了并且选项已经存在，请指出我。如果它不可用，我认为它会成为 ADT 工具的一个很好的补充

PS请不要急于快速回答 - 我希望有一个有一些优点的

# linq - 为什么这个 LINQ 不返回特定的首字母？

> ID：14675814
> 
> 赞同：0
> 
> 时间：2013-02-03T18:34:27.560
> 
> 标签：linq

我有以下 LINQ：-

```
private static IEnumerable<AlphabetisedContact> _getGroupedContacts(int clientid)
{
  return _getLiteContacts(clientid).GroupBy(c => c.Name[0]).Select(
  g => new AlphabetisedContact { Initial = g.Key, Contacts = g.ToList() }).OrderBy(g => g.Initial);  } 
```

哪个返回除了任何带有字母的联系人之外的所有联系人`a`？我错过了什么吗？

**编辑**目前它返回如下内容： -

```
 [{
        "$id": "1",
        "Initial": "B",
        "Contacts": [{
            "$id": "2",
            "ContactId": 12,
            "Name": "Bryan Chiney",
            "PrimaryContact": {
                "$id": "3",
                "Type": "Email",
                "Value": "bazrith@hotmail.com"
            },
            "Avatar": "/images/avatars/default.jpg",
            "UserId": null
        }, {
            "$id": "4",
            "ContactId": 22,
            "Name": "Bryan Billbags",
            "PrimaryContact": {
                "$id": "5",
                "Type": "Email",
                "Value": "bryan@atomic.com"
            },
            "Avatar": "/images/avatars/contacts/randomiser/1.jpg",
            "UserId": 15
        },
... 
```

我希望第一个`Initial`块包含我的`A`联系人数量......`Bryn McWinkawonk`例如，如果我添加一个具有该名称的新联系人，他会出现，但`Alice Alikemen`不会......？

**编辑** `_getLiteContacts()`调用使用传递的参数访问数据库：-

```
private static IEnumerable<LiteContact> _getLiteContacts(int clientid)
        {
            return _getContacts(clientid).Select(c => new LiteContact()
                    { ContactId = c.ContactId, ContactType = Enum.GetName(typeof (ContactTypeObject.Type), c.Type), Name = c.Name, PrimaryContact = _marshallFirstContactDetail(c.ContactId), 
                        Avatar = c.Avatar, UserId = c.UserId }).ToList();
        } 
```

`_getContacts()`:-

```
private static IEnumerable<Contact> _getContacts(int clientid)
        {
            using (var ctx = new atomicEntities())
            {
                var contacts = from c in ctx.Contacts
                               where c.ClientId == clientid
                               select c;
                return contacts.ToList();
            }
        } 
```

`_marshallFirstContactDetail()`:-

```
private static Model.Contact.ContactDetail _marshallFirstContactDetail(int contact)
        {
            return _marshallContactDetails(contact).FirstOrDefault();
        } 
```

`_marshallContactDetails()`:-

```
private static IEnumerable<Model.Contact.ContactDetail> _marshallContactDetails(int contact)
        {
            using (var ctx = new atomicEntities())
            {
                var o = from d in ctx.ContactDetails
                        join cd in ctx.ContactDetailTypes on d.ContactDetailTypeId equals cd.ContactDetailTypeId
                        where d.ContactId == contact
                        select new Model.Contact.ContactDetail {Type = cd.Description, Value = d.Description};
                return o.ToList();
            } 
        } 
```

**示例数据**

```
contact_id  client_id   contact_name    contact_type
8   22  Cain Allan  2
9   23  Bazrith Banners 2
10  22  Spencer Grep    1
12  22  Bryan Chiney    1
13  22  Dave Carter 4
15  22  Steve Tite  8
16  22  Henry Laythorpe 8
17  22  Chris Barker    8
18  22  Simon Cox   2
19  22  Russell Jacobs  1
20  22  John Wyndham    2
21  22  Isabel March    5
22  22  Bryan Billbags  2
23  22  Stu Plum    2
24  22  Pete Sorensen   7
25  22  Tom Francis 1
26  22  Rich McCormick  1
27  22  Tim Cain    4
28  22  Alex Ray-Harvey 1
29  22  Ryan Bennett    1
30  22  Alice Griswald  3
31  22  Archibald Smyth 3
32  22  Benjamin Franklin   5 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:07:12.597

好的。首先，向任何花时间看这个问题的人致歉。原来问题出在上层发生了一些分页。`GetGroupedContacts`在(=> )的结果上运行了一段 LINQ，`_getGroupedContacts()`如下所示：-

`GetGroupedContacts().Take(1000).Skip(1)`

这自然，总是跳过第一个结果。

完成**扳手**dooburt 签字！

# java - Java中的基本计算器

> ID：14675815
> 
> 赞同：7
> 
> 时间：2013-02-03T18:34:29.067
> 
> 标签：java, calculator

我正在尝试创建一个基本`calculator`的`Java`. 我对编程很陌生，所以我正在努力适应它。

```
import java.util.Scanner;
import javax.swing.JOptionPane;

public class javaCalculator 
{

    public static void main(String[] args) 
    {
        int num1;
        int num2;
        String operation;

        Scanner input = new Scanner(System.in);

        System.out.println("please enter the first number");
        num1 = input.nextInt();

        System.out.println("please enter the second number");
        num2 = input.nextInt();

        Scanner op = new Scanner(System.in);

        System.out.println("Please enter operation");
        operation = op.next();

        if (operation == "+");
        {
            System.out.println("your answer is" + (num1 + num2));
        }
        if  (operation == "-");
        {
            System.out.println("your answer is" + (num1 - num2));
        }

        if (operation == "/");
        {
            System.out.println("your answer is" + (num1 / num2));
        }
        if (operation == "*")
        {
            System.out.println("your answer is" + (num1 * num2));
        }

    }
} 
```

这是我的代码。它提示输入数字和操作，但同时显示答案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T18:37:04.767

从您的语句中删除分号`if`，否则后面的代码将是*独立的*并且将始终执行：

```
if (operation == "+");
                     ^ 
```

也用于`.equals`for `Strings`，`==`比较`Object`参考：

```
 if (operation.equals("+")) { 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-20T08:13:32.333

```
Here is simple code for calculator so you can consider this
import java.util.*;
import java.util.Scanner;
public class Hello {
    public static void main(String[] args)
    {
        System.out.println("Enter first and second number:");
        Scanner inp= new Scanner(System.in);
        int num1,num2;
        num1 = inp.nextInt();
        num2 = inp.nextInt();
        int ans;
        System.out.println("Enter your selection: 1 for Addition, 2 for substraction 3 for Multiplication and 4 for division:");
        int choose;
        choose = inp.nextInt();
        switch (choose){
        case 1:
            System.out.println(add( num1,num2));
            break;
        case 2:
            System.out.println(sub( num1,num2));
            break;      
        case 3:
            System.out.println(mult( num1,num2));
            break;
        case 4:
            System.out.println(div( num1,num2));
            break;
            default:
                System.out.println("Illigal Operation");

        }

    }
    public static int add(int x, int y)
    {
        int result = x + y;
        return result;
    }
    public static int sub(int x, int y)
    {
        int result = x-y;
        return result;
    }
    public static int mult(int x, int y)
    {
        int result = x*y;
        return result;
    }
    public static int div(int x, int y)
    {
        int result = x/y;
        return result;
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T18:39:12.543

比较字符串与`equals(..)`不与`==`

```
if (operation.equals("+")
{
    System.out.println("your answer is" + (num1 + num2));
}
if (operation.equals("-"))
{
    System.out.println("your answer is" + (num1 - num2));
}
if (operation.equals("/"))
{
    System.out.println("your answer is" + (num1 / num2));
}
if (operation .equals( "*"))
{
    System.out.println("your answer is" + (num1 * num2));
} 
```

并且`;`条件之后是一个空语句，因此条件根本没有效果。

如果您使用 java 7，您还可以将 if 语句替换为`switch`.
在 java <7 中，您可以测试是否`operation`长度为 1，然后为`char`[ `switch (operation.charAt(0))`]进行切换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T20:10:47.893

```
import java.util.Scanner;
public class AdditionGame {

public static void main(String[] args) {
    // TODO Auto-generated method stub

    int num1;
    int num2;
    String operation;

    Scanner input = new Scanner(System.in);

    System.out.println("Please Enter The First Number");
    num1 = input.nextInt();

    System.out.println("Please Enter The Second Number");
    num2 = input.nextInt();

    Scanner op = new Scanner (System.in);

    System.out.println("Please Enter The Operation");
    operation = op.next();

    if (operation.equals("+"))
    {
        System.out.println("Your Answer is "+(num1 + num2));
    }
    else if (operation.equals("-"))
    {
        System.out.println("Your Answer is "+(num1 - num2));
    }       
    else if (operation.equals("*"))
    {
        System.out.println("Your Answer is "+(num1 * num2));
    }   
    else if (operation.equals("/"))
    {
        System.out.println("Your Answer is "+(num1 / num2));
    }
} 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-10T15:48:58.817

**用于制作简单计算器的 Java 程序示例：**

```
import java.util.Scanner;

public class Calculator
{
public static void main(String args[])
{
    float a, b, res;
    char select, ch;
    Scanner scan = new Scanner(System.in);

    do
    {
        System.out.print("(1) Addition\n");
        System.out.print("(2) Subtraction\n");
        System.out.print("(3) Multiplication\n");
        System.out.print("(4) Division\n");
        System.out.print("(5) Exit\n\n");
        System.out.print("Enter Your Choice : ");
        choice = scan.next().charAt(0);

        switch(select)
        {
            case '1' : System.out.print("Enter Two Number : ");
                a = scan.nextFloat();
                b = scan.nextFloat();
                res = a + b;
                System.out.print("Result = " + res);
                break;
            case '2' : System.out.print("Enter Two Number : ");
                a = scan.nextFloat();
                b = scan.nextFloat();
                res = a - b;
                System.out.print("Result = " + res);
                break;
            case '3' : System.out.print("Enter Two Number : ");
                a = scan.nextFloat();
                b = scan.nextFloat();
                res = a * b;
                System.out.print("Result = " + res);
                break;
            case '4' : System.out.print("Enter Two Number : ");
                a = scan.nextFloat();
                b = scan.nextFloat();
                res = a / b;
                System.out.print("Result = " + res);
                break;
            case '5' : System.exit(0);
                break;
            default : System.out.print("Wrong Choice!!!");
        }
    }while(choice != 5);       
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-03T18:37:56.613

如果这消除了错误，也许它更好地使用 `case`而不是不知道，但我认为它更清洁..`if``switch (operation){case +: System.out.println("your answer is" + (num1 + num2));break;case -: System.out.println("your answer is" - (num1 - num2));break; ...`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T13:30:22.880

导入 java.util.Scanner；导入 javax.swing.JOptionPane；

公共类 javaCalculator {

```
public static void main(String[] args) 
{
    int num1;
    int num2;
    String operation;

    Scanner input = new Scanner(System.in);

    System.out.println("please enter the first number");
    num1 = input.nextInt();

    System.out.println("please enter the second number");
    num2 = input.nextInt();

    Scanner op = new Scanner(System.in);

    System.out.println("Please enter operation");
    operation = op.next();

    if (operation.equals("+"))
    {
        System.out.println("your answer is" + (num1 + num2));
    }
   else if  (operation.equals("-"))
    {
        System.out.println("your answer is" + (num1 - num2));
    }

  else if (operation.equals("/"))
    {
        System.out.println("your answer is" + (num1 / num2));
    }
   else if (operation.equals("*"))
    {
        System.out.println("your answer is" + (num1 * num2));
    }
   else 
    {
       System.out.println("Wrong selection");
    }

} 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-04T00:48:34.203

```
import java.util.Scanner;
public class JavaApplication1 {

    public static void main(String[] args) {

         int x,
         int y;

         Scanner input=new Scanner(System.in);
         System.out.println("Enter Number 1");
         x=input.nextInt();
         System.out.println("Enter Number 2");
         y=input.nextInt();

         System.out.println("Please enter operation + - / or *");
         Scanner op=new Scanner(System.in);
         String operation = op.next();

         if (operation.equals("+")){
             System.out.println("Your Answer: " + (x+y));
         }
         if (operation.equals("-")){
             System.out.println("Your Answer: "+ (x-y));
         }
         if (operation.equals("/")){
             System.out.println("Your Answer: "+ (x/y));
         }
         if (operation.equals("*")){
            System.out.println("Your Answer: "+ (x*y));
         }
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-09T09:14:05.993

我们可以简单地使用 **in.next().charAt(0);** **通过将operation**初始化 为**char**来将**+ - * /**操作指定为字符。

 ****导入 java.util.*；公共类计算器{

```
public static void main(String[] args) {

Scanner in = new Scanner(System.in);

char operation;
int num1;
int num2;

 System.out.println("Enter First Number");

num1 = in.nextInt();

System.out.println("Enter Operation");

operation = in.next().charAt(0);

System.out.println("Enter Second Number");

num2 = in.nextInt();

if (operation == '+')//make sure single quotes
{
    System.out.println("your answer is " + (num1 + num2));
}
if (operation == '-')
{
    System.out.println("your answer is " + (num1 - num2));
}
if (operation == '/')
{
    System.out.println("your answer is " + (num1 / num2));
}
if (operation == '*')
{
    System.out.println("your answer is " + (num1 * num2));
}

} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-08T12:25:02.140

```
public class SwitchExample {

    public static void main(String[] args) throws Exception {
        System.out.println(":::::::::::::::::::::Start:::::::::::::::::::");
        System.out.println("\n\n");

        System.out.println("1\. Addition");
        System.out.println("2\. Multiplication");
        System.out.println("3\. Substraction");
        System.out.println("4\. Division");
        System.out.println("0\. Exit");
        System.out.println("\n");

        System.out.println("Enter Your Choice :::::::  ");
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String str = br.readLine();

        int usrChoice = Integer.parseInt(str);

        switch (usrChoice) {
            case 1:
                doAddition();
                break;
            case 2:
                doMultiplication();
                break;
            case 3:
                doSubstraction();
                break;
            case 4:
                doDivision();
                break;

            case 0:
                System.out.println("Thank you.....");
                break;

            default:
                System.out.println("Invalid Value");
        }

        System.out.println(":::::::::::::::::::::End:::::::::::::::::::");
}

public static void doAddition() throws Exception {
    System.out.println("******* Enter in Addition Process ********");

    String strNo1, strNo2;

    System.out.println("Enter Number 1 For Addition : ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    strNo1 = br.readLine();

    System.out.println("Enter Number 2 For Addition : ");
    BufferedReader br1 = new BufferedReader(new InputStreamReader(System.in));
    strNo2 = br1.readLine();

    int no1 = Integer.parseInt(strNo1);
    int no2 = Integer.parseInt(strNo2);

    int result = no1 + no2;

    System.out.println("Addition of " + no1 + " and " + no2 + " is ::::::: " + result);
}

public static void doSubstraction() throws Exception {
    System.out.println("******* Enter in Substraction Process ********");

    String strNo1, strNo2;

    System.out.println("Enter Number 1 For Substraction : ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    strNo1 = br.readLine();

    System.out.println("Enter Number 2 For Substraction : ");
    BufferedReader br1 = new BufferedReader(new InputStreamReader(System.in));
    strNo2 = br1.readLine();

    int no1 = Integer.parseInt(strNo1);
    int no2 = Integer.parseInt(strNo2);

    int result = no1 - no2;

    System.out.println("Substraction of " + no1 + " and " + no2 + " is ::::::: " + result);
}

public static void doMultiplication() throws Exception {
    System.out.println("******* Enter in Multiplication Process ********");

    String strNo1, strNo2;

    System.out.println("Enter Number 1 For Multiplication : ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    strNo1 = br.readLine();

    System.out.println("Enter Number 2 For Multiplication : ");
    BufferedReader br1 = new BufferedReader(new InputStreamReader(System.in));
    strNo2 = br1.readLine();

    int no1 = Integer.parseInt(strNo1);
    int no2 = Integer.parseInt(strNo2);

    int result = no1 * no2;

    System.out.println("Multiplication of " + no1 + " and " + no2 + " is ::::::: " + result);
}

public static void doDivision() throws Exception {
    System.out.println("******* Enter in Dividion Process ********");

    String strNo1, strNo2;

    System.out.println("Enter Number 1 For Dividion : ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    strNo1 = br.readLine();

    System.out.println("Enter Number 2 For Dividion : ");
    BufferedReader br1 = new BufferedReader(new InputStreamReader(System.in));
    strNo2 = br1.readLine();

    int no1 = Integer.parseInt(strNo1);
    int no2 = Integer.parseInt(strNo2);

    float result = no1 / no2;

    System.out.println("Division of " + no1 + " and " + no2 + " is ::::::: " + result);
} 
```

}****

# c++ - 为什么 Netbeans 不能识别 `cbegin()`、`cend()`、`unordered_set` 以及其他 C++ 功能？

> ID：14675818
> 
> 赞同：4
> 
> 时间：2013-02-03T18:34:40.973
> 
> 标签：c++, netbeans, c++11

我的 C++ 应用程序在 Netbeans 中按预期编译和运行。但是，代码帮助不识别诸如`cbegin()`, `cend()`,之类的术语`unordered_set`，如红色下划线所示：

![在此处输入图像描述](../Images/8ac5b724bab0960830ee0572803e1375.png)

但是，代码帮助确实可以识别`end()`。无济于事，我尝试转到项目-> 属性-> 代码帮助-> C++ 标准-> C++11。我还应该更新或配置什么以让 Netbeans 代码帮助识别这些术语？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T19:16:51.663

确保您使用 Netbeans 版本 >= 7.2，因为此版本中引入了 C++11 支持（[请参阅“C/C++”](http://netbeans.org/community/releases/72/)）。

如果您已经在 NB 中将 C++ 标准设置为 C++11，则可以*重新解析*您的项目：

1.  选择您的 C++ 项目 --> 右键单击
2.  **`Code Assistance`**->**`Reparse Project`**

* * *

**编辑：**

**我在NetBeans 7.3 RC1**下使用以下代码测试了这些方法（使用**GCC 4.7.2**）：

```
#include <iostream>
#include <list>

int main ()
{
  std::list<int> mylist = {5,10,15,20};

  std::cout << "mylist contains:";

  for (auto it = mylist.cbegin(); it != mylist.cend(); ++it)
    std::cout << ' ' << *it;

  std::cout << '\n';

  return 0;
} 
```

将 C++ 标准设置为默认值会失败，但使用 C++11 ( **`Project Properties -> Build -> C++ Compiler -> C++ Standard = C++11`**) 可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T19:33:52.883

当我开始使用 NetBeans 和 C++11 时，我牢记了几点

*   确保它是最新的（NetBeans 7.2.1）
*   不要使用 Cygwin 来包含 GCC 库来编译您的程序。请改用 MinGW 安装程序。使用 MinGW 安装程序时，还要确保从 Internet 上“下载最新的软件包”。
*   安装后，请确保环境路径变量设置正确。
*   打开 NetBeans 并转到**Tools-> Options**。单击 C/C++ 选项卡并确保将 MinGW 用作默认编译器。
*   右键单击您的项目并选择**Properties**。选择 **C++ Compiler**选项并确保您已在 Additional options 空间中写入**-std=c++11**

# javascript - 使用变量在 javaScript 中设置样式

> ID：14675820
> 
> 赞同：0
> 
> 时间：2013-02-03T18:34:43.163
> 
> 标签：javascript, css

```
function Scale(){
    X = innerWidth / 1024;
    Y = innerHeight / 768;

    Z = document.getElementById("IFM");
    Z.style.transform = "scale(X, Y)";
} 
```

我对这段代码有疑问。我不能按比例使用变量！
这个问题我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:39:07.433

JavaScript 没有内联字符串变量。您所能做的就是连接字符串：

```
Z.style.transform = "scale("+X+", "+Y+")"; 
```

数字将隐式转换为字符串。

您也可以使用一些自定义[`sprintf`的](https://stackoverflow.com/q/610406/1048572)格式或替换方法，但通常连接`+`更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:39:50.640

*您可以使用concats* / *plus*构建字符串，也可以使用`String.prototype.replace`.

```
Z.style.transform = "scale(" + X + "," + Y + ")"; 
```

或者有一个像这样的帮手

```
String.prototype.sFormat = function _simpleFormat( map ) {
    var myString    = this.toString(),
        args        = map instanceof Array ? map : Array.prototype.slice.call( arguments );

    while( ~myString.indexOf( '%r' ) ) {
        myString = myString.replace( '%r', args.shift() );
    }

    return myString;
}; 
```

..然后像

```
Z.style.transform = "scale(%r, %r)".sFormat(X,Y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:40:18.167

将该行更改为：

```
Z.style.transform = "scale(" + X +", "+ Y + ")"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T18:41:03.687

试试这种方式 "scale(" +X+ "," +Y+ ")";

# jar - 未找到 Nimbus 外观 jar 文件

> ID：14675824
> 
> 赞同：0
> 
> 时间：2013-02-03T18:34:50.200
> 
> 标签：jar

我已经用谷歌搜索了两个小时，但找不到 nimbus 外观和感觉 jar。我正在使用 jdk6 版本，需要将此库添加到我的项目中..请提供有用的链接以下载 nimbus jar 文件

问候克里希纳雷迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:02:56.480

好了，二进制文件和 maven 依赖项：

[http://mvnrepository.com/artifact/net.java.dev.nimbus/nimbus](http://mvnrepository.com/artifact/net.java.dev.nimbus/nimbus)，还有：

[http://mvnrepository.com/search.html?query=nimbus](http://mvnrepository.com/search.html?query=nimbus)

# java - 用手指算一圈绕圈数 Android

> ID：14675825
> 
> 赞同：2
> 
> 时间：2013-02-03T18:35:01.310
> 
> 标签：java, android, android-cursor

需要统计一圈的完整转圈数，以使用户在屏幕的有限区域内通过手指在屏幕上进行操作。一时间。设置时间，移动箭头。例如秒针转两圈就是两分钟。我不知道如何超越 360 度的值。下面，我的代码确定了矢量的角度：

```
public boolean onTouchEvent(MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            clockfacesec.getLocationOnScreen(secminxy);
            this.centerX = secminxy[0] + clockfacesec.getWidth()/2;
            this.centerY = secminxy[1] + clockfacesec.getHeight()/2;
            this.X = event.getRawX()- this.centerX;
            this.Y = event.getRawY() - this.centerY;
            setTimerface(this.X, this.Y);       
        }
        return gestures.onTouchEvent(event);
    }

    public void onMove(float dx, float dy) {
        this.X = this.X + dx;
        this.Y = this.Y + dy;
        setTimerface(this.X, this.Y);
    }

    private void setTimerface(float x, float y){    
        double r = Math.sqrt(x*x + y*y); 
        this.radsecmax = clockfacesec.getWidth()/2;
        this.radsecmin = (float) ((clockfacesec.getWidth()/2)*0.756);
            if(r > radsecmin && r < radsecmax){                                     
                int secseconds = tTime % 60;
                tTime = tTime - secseconds;
                double fi = Math.atan2(y, x) * 180 / Math.PI;
                if(fi < 0){
                    if (fi < -90) secView = (int)fi/6 + 75;
                    else secView = (int)fi/6 + 15;
                }else{
                    secView = (int)fi/6 + 15;
                }
                if (secView == 60) secView = 0;
                tTime = tTime + secView;
                settTime(tTime);
            }
    } 
}
private class GestureListener implements GestureDetector.OnGestureListener{
    Faceclock view;
    public GestureListener(Faceclock view) {
        this.view = view;
    }
    public boolean onDown(MotionEvent arg0) {
        return true;
    }
    public boolean onFling(MotionEvent arg0, MotionEvent arg1, float velocityX, float velocityY) {
        return true;
    }
    public void onLongPress(MotionEvent arg0) {}
    public boolean onScroll(MotionEvent e, MotionEvent arg1, float distanceX, float distanceY) {
        view.onMove(-distanceX, -distanceY);
        return true;
    }
    public void onShowPress(MotionEvent arg0) {}
    public boolean onSingleTapUp(MotionEvent arg0) {
        return false;
    }
} 
```

# php - PHP 持久脚本和最大执行时间

> ID：14675828
> 
> 赞同：2
> 
> 时间：2013-02-03T18:35:08.823
> 
> 标签：php, sync, time-complexity

我需要管理经典数据库和大量 xls 文件之间的服务器同步。

如果它们是同步的，我将在 DB 上执行所有操作并且没有问题。

定期将其中一些文件添加到服务器，我需要同步它们。它们可能很少，但很长，有几十万行。

如果我发现了新的，我会启动一个同步程序。同步过程被证明可以持续很短，不会超过 PHP 在 30 秒后触发**1 个文件的**最大执行时间。但是当我有更多文件时，它可能会超过它。

我**无法**覆盖 PHP 时间限制。

现在我有一个事务，如果最后一个文件同步失败，则回滚。并且必须重新加载页面，直到我看到*同步失败/成功*消息。这行得通，但它根本不是很好。

选择：

1.  使用 register_shutdown_function 打印页面的其余部分（可能？）并告诉重新加载
2.  在时间限制附近使用自定义脚本相同的东西
3.  有什么方法可以在后台完成同步？也许通过 ajax 注意到它到页面？

什么是更合适的选择？有第三种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:47:40.543

有一个很好的技巧可以绕过时间限制，但如果做得不好，**它可能会滞后于您的服务器。**基于这个脚本，我编写了纯 PHP CRON 替代方案。
您所做的是，您使 HTTP 客户端断开连接，但您保持脚本运行。这是最重要的——然后，脚本可以调用自己而不会卡在 istelf 上。
为此，发送 http 标头 Content-Length 很重要。

```
<?php
ignore_user_abort (true);    //Tells PHP to ignore connection state
ob_start();
echo "Loop started\n";
$size = ob_get_length();
header("Content-Length: $size"); //Send exact output size to make sure client disconnects
header("Connection: close");     //Tells client to disconnect
ob_end_flush();
ob_flush();
flush();     //Clean all buffers
if(session_id()!="")
  session_write_close(); //Close the session so that the user can use other scripts on the site
/*Here, the script runs even if client is connected*/
?> 
```

现在，有一个**非常危险**的递归部分。您应该创建一个文件，告诉脚本它已经在运行以避免多个线程。像这样：

```
if(file_exists("secure_key"))
  exit;
else
  file_put_contents("secure_key",time()); 
```

因为你说你正在同步一些数据，你可能需要一个文件（或 MySql 表）来存储有关同步过程的信息。这将可以通知用户请求进度，也许使用 AJAX，就像你想要的那样。这将使整个应用程序看起来非常专业 :)
你可能知道，但如果它是 FOR 或 WHILE 循环，在其中你正在同步，那么将开始时间保存在常量中也很棒，这样你就可以退出并毫无问题地保存：

```
define("STARTTIME",time());  //Right now
define("MAXTIME",ini_get('max_execution_time')); //Max execution time
define("SAFE_EXIT_TIME", 4);  //4 seconds to save & quit

/*preparation*/
while(time()-(STARTTIME-SAFE_EXIT_TIME)<MAXTIME) {
    /*Synchronize*/
}
unlink("secure_key");         //delete the antistuck file
get_headers(/*scriopt url*/); //call itself
exit;                         //quit 
```

# html - 如何下载文件夹中A列中的所有链接？

> ID：14675830
> 
> 赞同：3
> 
> 时间：2013-02-03T18:35:22.293
> 
> 标签：html, vba, excel, excel-2010

> **可能重复：**
> [从 url 获取图片，然后重命名图片](https://stackoverflow.com/questions/10383614/get-pictures-from-a-url-and-then-rename-the-picture)

我有超过 30 多个文件链接需要下载。有没有办法做到这一点？

我想在 excel 中做，因为要获得这 30 多个链接，我必须做一些我在 excel 中做的清理工作。

我每天都需要这样做。如果有办法在excel中做会很棒。

例如，如果 A2 是图像，则将此图像下载到文件夹中

```
https://www.google.com/images/srpr/logo3w.png 
```

如果有办法将 logo3w.png 重命名为 B2 中的任何内容，那就更棒了，所以我不必重命名文件。

下面的脚本，我在网上找到的，它可以工作，但我需要帮助重命名它。
在 A2 列中：向下我有所有链接
在 B2 列中：向下我有带扩展名的文件名

常量 TargetFolder = "C:\Temp\"

```
Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" _
(ByVal pCaller As Long, _
ByVal szURL As String, _
ByVal szFileName As String, _
ByVal dwReserved As Long, _
ByVal lpfnCB As Long) As Long

Sub Test()
For Each Hyperlink In ActiveSheet.Hyperlinks
    For N = Len(Hyperlink.Address) To 1 Step -1
        If Mid(Hyperlink.Address, N, 1) <> "/" Then
            LocalFileName = Mid(Hyperlink.Address, N, 1) & LocalFileName
        Else
            Exit For
        End If
    Next N
    Call HTTPDownloadFile(Hyperlink.Address, TargetFolder & LocalFileName)
Next Hyperlink
End Sub

Sub HTTPDownloadFile(ByVal URL As String, ByVal LocalFileName As String)
Dim Res As Long
On Error Resume Next
Kill LocalFileName
On Error GoTo 0
Res = URLDownloadToFile(0&, URL, LocalFileName, 0&, 0&)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:07:24.670

我很确定您可以稍微修改以下代码以满足您的需求：

```
Sub DownloadCSV()

Dim myURL As String
myURL = "http://pic.dhe.ibm.com/infocenter/tivihelp/v41r1/topic/com.ibm.ismsaas.doc/reference/LicenseImportSample.csv"

Dim WinHTTPReq As Object
Set WinHTTPReq = CreateObject("Microsoft.XMLHTTP")
Call WinHTTPReq.Open("GET", myURL, False)
WinHTTPReq.send

If WinHTTPReq.Status = 200 Then
    Set oStream = CreateObject("ADODB.Stream")
    oStream.Open
    oStream.Type = 1
    oStream.Write WinHTTPReq.responseBody
    oStream.SaveToFile ("D:\DOCUMENTS\timelog.csv")
    oStream.Close
End If

End Sub 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:50:41.823

这应该适合你。它将下载并使用 B 列中的文件名重命名。我只是用一行替换了第二个 for 循环。Hyperlink.range.row 给出超链接所在的行号。所以 cells(hyperlink.range.row,2) 计算结果为 cells(1,2)、cells(2,2) 等等（如果数据在 A1、A2、A3 中）。假设您在 B 列中有扩展名（ex - xyz.png）的文件名，这应该可以工作。

```
Const TargetFolder = "C:\Temp\"
Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" _
(ByVal pCaller As Long, _
ByVal szURL As String, _
ByVal szFileName As String, _
ByVal dwReserved As Long, _
ByVal lpfnCB As Long) As Long

Sub Test()
   For Each Hyperlink In ActiveSheet.Hyperlinks
       LocalFileName=ActiveSheet.cells(hyperlink.Range.Row,2).value
       Call HTTPDownloadFile(Hyperlink.Address, TargetFolder & LocalFileName)
   Next Hyperlink
End Sub

Sub HTTPDownloadFile(ByVal URL As String, ByVal LocalFileName As String)
   Dim Res As Long
   On Error Resume Next
   Kill LocalFileName
   On Error GoTo 0
   Res = URLDownloadToFile(0&, URL, LocalFileName, 0&, 0&)
End Sub 
```

让我知道这是否有帮助。

# .net - Autofac：发布/订阅扩展

> ID：14675832
> 
> 赞同：2
> 
> 时间：2013-02-03T18:35:37.723
> 
> 标签：.net, autofac, publish-subscribe, messagebroker

Autofac 是否支持易于使用的消息代理来执行多对多发布/订阅事件消息传递？

编辑：

```
public class Service1
{
    [Publish("message://an-event")]
    public event Event<EventParams> AnEvent;

    public void DoSomething()
    {
        // do something
        // [...]

        // publish message
        if (AnEvent != null)
            AnEvent(this, new EventParams(something))
    }
}

public class Service2
{
    [Subscribe("message://an-event")]
    public OnAnEvent(object sender, EventParams eventParams)
    {
        Console.WriteLine("Hello World from Service2")
    }
}

public class Service3
{
    [Subscribe("message://an-event")]
    public OnAnEvent(object sender, EventParams eventParams)
    {
        Console.WriteLine("Hello World from Service3")
    }
} 
```

Ninjects 消息代理扩展最酷的地方在于它的简单性。您只需为发布某些内容的事件和订阅此事件的方法添加注释。容器自动处理连接。您只需要绑定服务。

autofac 有类似的东西吗？如果没有，用autofac做这样的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:24:37.263

**Autofac 目前不提供任何特定消息代理支持的开箱即用。**Autofac 是一个 IoC 容器，而不是消息代理，如果要添加任何内容，它将是支持外部系统的扩展，就像[Ninject 的 bbeventbroker 的](https://github.com/ninject/ninject.extensions.bbveventbroker)工作方式一样——可能有助于连接事件处理，但不能正确管理实际的代理。（就像 Autofac 不做自己的 MVC 或 WCF 实现一样——只是与现有系统交互的助手。）

您可以使用诸如[Autofac 的生命周期事件](https://code.google.com/p/autofac/wiki/LifetimeEvents)和/或[自定义注册源](https://code.google.com/p/autofac/wiki/RegistrationSources)之类的东西将自己的集成与[bbvcommon Event Broker](http://code.google.com/p/bbvcommon/wiki/EventBroker)或[NServiceBus](http://nservicebus.com/)之类的系统集成，但具体需要如何完成以及看起来如何取决于使用哪个系统你正在整合。您可以查看其他集成组件的来源以获得想法和模式。

如果您确实得到了一些工作，您可能会考虑将其作为 Autofac.Extras 项目包含在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T19:50:39.850

猜测您想要类似[https://github.com/ninject/ninject.extensions.weakeventmessagebroker](https://github.com/ninject/ninject.extensions.weakeventmessagebroker)的东西，答案肯定是“是”。事实上，我不明白为什么要将消息代理实现绑定到 IoC 容器。它们是完全独立的组件，具有完全独立的任务。您可以选择任何消息代理实现并将其注册到任何 IoC 容器。

您甚至可以选择 ninject.extensions.weakeventmessagebroker 并将其注册到 Autofac，如下所示：

```
builder.RegisterType<EventReflectionStrategy>().As<IPlanningStrategy>();
builder.RegisterType<EventBindingStrategy>().As<IActivationStrategy>();
builder.RegisterType<WeakEventMessageBroker>().As<IWeakEventMessageBroker>()
       .SingleInstance(); 
```

然后将`IWeakEventMessageBroker`其作为依赖项添加到类型以使用它。不过我自己没试过。

也许它没有那么多即用型，但它仍然很容易。

**更新**

我已经编辑了代码示例以将代理变成一个单例，它应该是按预期工作所必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T13:40:50.993

消息代理架构本身并不依赖于您正在使用的容器。查看[这篇文章](http://devtalk.net/dotnet/event-brokers/)，了解一些 .NET 消息代理的示例，包括基于 Rx 的。

# c# - ShellTile.Create 与 FlipTileData 引发 InvalidOperationException？

> ID：14675833
> 
> 赞同：0
> 
> 时间：2013-02-03T18:35:45.397
> 
> 标签：c#, windows-phone-8, live-tile

我正在尝试在 Windows Phone 8 中使用 FlipTileData 创建一个磁贴。我使用以下代码：

```
 const string mainPage = "/MainPage.xaml";

        ...

        Uri mp = new Uri(mainPage + "?" + "tileid=" + tileId, UriKind.Relative);
        FlipTileData tileData = new FlipTileData();
        tileData.Title = tileTitle;
        tileData.BackgroundImage = new Uri("isostore:" + isourl);
        tileData.SmallBackgroundImage = new Uri("isostore:" + isourl);
        tileData.WideBackgroundImage = new Uri("isostore:" + isourl);
        ShellTile.Create(mp, tileData); 
```

这会在 ShellTile.Create 方法中引发 InvalidOperationException。没有其他磁贴具有相同的导航 URI。我在这里做错了什么？

此代码使用 StandardTileData 类可以正常工作，不包括 SmallBackgroundImage 和 WideBackgroundImage 属性。

如果重要的话，完整的代码是：

```
 const string mainPage = "/MainPage.xaml";

    ...

    private void createbutton_Click(object sender, RoutedEventArgs e)
    {
        string tileId = new Random().Next().ToString();
        Uri mp = new Uri(mainPage + "?" + "tileid=" + tileId, UriKind.Relative);
        WriteableBitmap wbmp = new WriteableBitmap(tileGrid, null);

        string isourl = "/Shared/ShellContent/" + tileId + ".jpg";
        IsolatedStorageFileStream isfs = IsolatedStorageFile.GetUserStoreForApplication().CreateFile(isourl);
        wbmp.SaveJpeg(isfs, 173, 173, 0, 100);
        isfs.Close();

        FlipTileData tileData = new FlipTileData();
        tileData.Title = tileTitle;
        tileData.BackgroundImage = new Uri("isostore:" + isourl);
        tileData.SmallBackgroundImage = new Uri("isostore:" + isourl);
        tileData.WideBackgroundImage = new Uri("isostore:" + isourl);
        ShellTile.Create(mp, tileData);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:18:13.757

如果使用新的磁贴模板，您需要使用`ShellTile.Create()`包含第三个参数的重载。

这应该可以解决问题：

```
ShellTile.Create(mp, tileData, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:23:17.003

您是否在 Closing 处理程序中调用此代码？

> 在 Windows Phone 8 中，使用 Closing 处理程序中的 Create(Uri, ShellTileData) 方法创建 Tile 将引发 InvalidOperationException。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx)

编辑：我猜不是，因为你说它与 StandardTileData 一起工作......

# java - 用空格分割字符串

> ID：14675841
> 
> 赞同：1
> 
> 时间：2013-02-03T18:36:38.557
> 
> 标签：java, file-read

因此，我从 .txt 文件中提取一行并将其转换为字符串。我想用|分割字符串，但我在它之前和之后也有空格，这与代码混淆了，这是我到目前为止所拥有的：

```
File file = new File(fileLocation);
Scanner sc = new Scanner(file);
String line;
String[] words;
while(sc.hasNext()){
    line = sc.next();
    words = line.split("\\|");
    this.german.add(words[0]);
    this.english.add(words[1]);
} 
```

示例行类似于：in blue|in blau

我也想保留这些空间。

.txt 文件将是：

腐烂|红色

蓝色|蓝色

格伦|绿色

盖尔布|黄色

它将添加 | 左侧的所有项目 德语列表，以及英语列表右侧的所有列表。

啊，想通了，sc.next() 是下一个字符串，而不是下一行，我用 sc.nextLine() 替换了它，一切正常，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:38:37.310

称呼

```
line.replaceAll(" ", ""); 
```

预先; 这将摆脱**所有**的空间。如果您只想删除拆分字符串中的前导和尾随空格，请使用

```
words[i].trim() 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T18:40:21.933

使用以下模式：

`words = line.split("\\s+\\|\\s+");`

# linux - tr 命令不能直接输出？

> ID：14675849
> 
> 赞同：5
> 
> 时间：2013-02-03T18:37:20.460
> 
> 标签：linux, sed, tr

我有一个文件 file.txt 女巫有这些条目

> 纽约
> 
> 洛杉矶
> 
> 顺丰

我运行了命令 tr '\n' ',' < file.txt 并成功删除了所有换行符。

我需要在同一个 file.txt 文件中的所有这些输出，所以我像这样重定向输出

> tr '\n' ',' <文件.txt> 文件.txt,

但它没有在 file.txt 中放置任何内容，结果文件为空，谁能向我解释为什么**tr**的输出由于重定向而丢失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T18:45:38.227

因为它首先打开输出文件，删除文件中的内容，然后对 tr 命令没有任何感觉并返回到空文件

```
tr '\n' ',' < file.txt > file2.txt 
```

将工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:46:14.090

既然您已经用 标记了您的问题`sed`，我建议使用 sed oneliner，sed 也可以使用选项“-i”“就地”更改您的文件

```
sed -i ':a $!N; s/\n/,/; ta' file 
```

或使用 awk

```
awk '{x=x""sprintf($0",")}END{gsub(/,$/,"",x);print x}' file 
```

不像 sed，awk 没有“就地”更改选项，您必须：

```
awk '...' file > /tmp/mytmp && mv /tmp/mytmp file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T02:36:14.727

如果你只是想用`,`你替换换行符可以我们这个

`awk 'ORS=","' temp.txt > file.txt`

# iphone - 具有单个约束的自动布局约束错误

> ID：14675852
> 
> 赞同：3
> 
> 时间：2013-02-03T18:37:36.247
> 
> 标签：iphone, xcode, ios6, autolayout, nslayoutconstraint

我有一堆标签和按钮的场景。当您点击一个按钮时，视图会从底部向上滑动，其中包含控件，可以说是一种键盘。它“看起来”是这样的：

```
 -----------------------------
|                             |
|  [Button 1] [  Slider 1  ]  |
|                             |
|  [Button 2] [  Slider 2  ]  |
|                             |
 ----------------------------- 
```

这个“键盘”是在视图加载和动画完成将其高度从 0 切换到其固有内容大小时在最开始时创建的。这个场景只支持横向模式，当设备旋转 180 度时，我花了很长时间才将“键盘”保持在视图上。

我看到的问题会出现以下两种情况之一：

1.  设备旋转 180 度。
2.  调用“键盘”。

这个问题如下：

```
Unable to simultaneously satisfy constraints...
.
.
.
.
(
    "<NSLayoutConstraint:0x718c6c0 UIButton:0x717e0d0.centerY == UISlider:0x717d9d0.centerY>",
    "<NSLayoutConstraint:0x7190a00 UIButton:0x717e0d0.centerY == UISlider:0x717d9d0.centerY>"
) 
```

错误日志给了我两次这个错误，每组按钮滑块一次。

我认为奇怪的是冲突的约束完全相同。我以为我犯了一些复制粘贴错误并两次添加了相同的约束，但事实并非如此。

我猜这与旋转时调用 updateViewConstraints 以及我执行动画时有关，但我不明白为什么只有这些约束受到影响，因为在这个“键盘”视图中还有一些约束。

总而言之，这个自动布局比苹果声称的要困难得多。在我看来，当然。

有任何想法吗？

编辑：约束全部设置在代码中，主要使用视觉语言格式。我相信，“键盘”内控件的约束被添加到“键盘”视图中，这是正常的做法。

只是为了尝试一下，我更改了有问题的约束，而不是将它们添加到“键盘”子视图中，而是将它们添加到 self.view（“键盘”超级视图）中。突然之间，不再显示错误。

尽管如此，我真的很想就此事进行一些讨论，因为我仍然不知道出了什么问题，而且我只是碰巧碰巧了。我真的很想理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T15:18:08.190

冲突约束完全相同的事实实际上是错误。使用自动布局，您不能有两次约束。这将产生您在上面看到的错误。

当然，您已经添加了两次约束。您可以从内存地址中看到这一点。您有两个不同的`NSLayoutConstraint`实例，`0x718c6c0`并且`0x7190a00`. 但是，每个引用的实例都是相同的。那就是`centerY`您的`UIButton`实例的垂直中心`0x717e0d0`应该在`UISlider` `0x717d9d0`.

可能您的`updateConstraints`方法已被调用，而您在再次添加之前没有检查约束是否已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T18:06:12.350

我不知道这是否对您有帮助，但我只是使用[本教程](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)在我的应用程序中设置按钮和标签的约束

# visual-studio-2010 - ora-06413 连接未在 Visual Studio 2010（服务器资源管理器）中打开

> ID：14675853
> 
> 赞同：1
> 
> 时间：2013-02-03T18:37:42.690
> 
> 标签：visual-studio-2010, oracle

我一直在尝试通过服务器资源管理器工具在 Visual Studio 2010 (x64) 中打开与我的 Oracle 数据库 (x86) 的连接。

我收到此错误：

> ora-06413 连接未打开

奇怪的是，我可以从我的 C# 代码而不是使用服务器资源管理器工具连接到数据库。会是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T16:58:18.543

尝试将 Visual Studio 目录从 to 更改为`C:\Program Files (x86)`不`C:\VS`带“（”或“）”的任何其他内容。

# iphone - 从不同的视图控制器调用时 UIView 动画不会触发？

> ID：14675860
> 
> 赞同：0
> 
> 时间：2013-02-03T18:38:00.490
> 
> 标签：iphone, ios, objective-c, animation, uiviewanimation

我使用这个从另一个视图控制器调用一个方法：

```
 InitialViewController *secondController = [[InitialViewController alloc] init];
   [secondController forecast]; 
```

下面是 InitialViewController 中的方法：

```
-(void)forecast{
    [UIView beginAnimations:@"Forecast" context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:1.0f];
    self.customPager.frame = CGRectMake(0,5, 320, 510);
    self.view1.frame = CGRectMake(-320,5, 320, 510);
    radarView.frame = CGRectMake(0,560, 320, 510);
    [UIView commitAnimations];
    NSLog(@"Method Passed");
} 
```

在我的控制台中，我得到了 NSLog“方法通过”，但 UIView 动画根本没有发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:41:03.843

在我看来，您没有以任何方式显示与`secondController`. 即，在做之后：

```
InitialViewController *secondController = [[InitialViewController alloc] init]; 
```

我希望你做这样的事情：

```
[self.view addSubview:secondController.view]; 
```

这将`loadView/viewDidLoad`在您调用之前触发`forecast`。此外，我会让 UI 有机会在动画之前显示您的视图；因此，我会这样称呼`forecast`：

```
[self performSelector:@selector(forecast) withObject:nil afterDelay:0.0]; 
```

或从`viewDidAppear`.

编辑：

根据您的评论，您`InitialViewController`的已显示在屏幕上。在这种情况下，您应该做的是获取对它的引用并将`forecast`消息发送给它。

您现在正在做的是实例化一个新的`InitialViewController`（然后将`forecast`消息发送给它）与已显示的无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:40:32.927

即使您实例化`secondController`，它的视图也永远不会显示在屏幕上，甚至不会加载，因此您应用到它的任何动画都没有效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T23:25:14.053

如果您的第二个控制器已经在屏幕上，那么您的 alloc init 正在创建另一个控制器，而不是已经存在的控制器（日志有效，因为您正在创建 InitialViewController 的实例，因此它的代码将运行，但另一个实例的视图是一个你在屏幕上看到的）。您需要获得对屏幕上的引用。我不能说你应该怎么做，而不知道你是如何把你的 2 个控制器放在屏幕上的。

# facebook - 当涉及 spring security facebook 时，使用虚拟数据引导 grails 应用程序

> ID：14675861
> 
> 赞同：1
> 
> 时间：2013-02-03T18:38:00.970
> 
> 标签：facebook, grails, spring-security, grails-2.0

我创建了一个 grails 应用程序，该应用程序使用 spring security 允许用户通过 facebook 进行身份验证，并且我可以成功地将 facebook 用户名打印到其中一个视图上，到目前为止我没有任何问题。

我的问题在于尝试使用给定 facebook 用户的一些示例数据来引导我的应用程序，因此我不必在每次应用程序启动时都输入它。

这就是我试图引导我自己的 facebook 帐户的方式，我有以下内容`Bootstrap.groovy`：

```
def adminRole = new AppRole(authority: 'ROLE_ADMIN').save(flush: true)
def userRole = new AppRole(authority: 'ROLE_USER').save(flush: true)

def testUser = new AppUser(username: 'facebook_563645402', enabled: true,
                    password: 'my-hashed-pw-here',
            surveys: [jamies])
            testUser.save(flush: true)

AppUserAppRole.create testUser, adminRole, true 
```

作为记录，我`hasMany`在 AppUser 上添加了上述调查字段。

当我启动应用程序并尝试连接时，我收到以下错误：

```
URI
/web/j_spring_security_facebook_check
Class
grails.validation.ValidationException
Message
Validation Error(s) occurred during save(): - Field error in object 'web.AppUser' on field 'username': rejected value [facebook_563645402]; codes [web.AppUser.username.unique.error.web.AppUser.username,web.AppUser.username.unique.error.username,web.AppUser.username.unique.error.java.lang.String,web.AppUser.username.unique.error,appUser.username.unique.error.web.AppUser.username,appUser.username.unique.error.username,appUser.username.unique.error.java.lang.String,appUser.username.unique.error,web.AppUser.username.unique.web.AppUser.username,web.AppUser.username.unique.username,web.AppUser.username.unique.java.lang.String,web.AppUser.username.unique,appUser.username.unique.web.AppUser.username,appUser.username.unique.username,appUser.username.unique.java.lang.String,appUser.username.unique,unique.web.AppUser.username,unique.username,unique.java.lang.String,unique]; arguments [username,class web.AppUser,facebook_563645402]; default message [Property [{0}] of class [{1}] with value [{2}] must be unique] 
```

这似乎抱怨用户名不是唯一的。

如果通过尝试引导某些数据破坏了对 facebook 用户名的唯一约束，**我怎么可能为用户预先定义任何数据**？

快速谷歌搜索提出了一些建议（[link1](http://mrhaki.blogspot.co.uk/2009/03/create-userroles-for-spring-security.html)，[Grails spring security bootstrap](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/23%20Tutorials.html#23.1%20Using%20Controller%20Annotations%20to%20Secure%20URLs)，但到目前为止他们没有帮助，有什么想法吗？

**编辑**：深入研究 grails 报告的错误，我可以看到上述错误的根源位于`DefaultFacebookAuthDao`第 135 行，其中提到了以下内容：

```
AppUserDomainClazz.withTransaction {
                    appUser.save(flush: true, failOnError: true)
                } 
```

因此，通过身份验证，spring security 尝试保存用户域对象......

**编辑 2**：

这是我的`Bootstrap.groovy`

```
def testUser = new AppUser(username: 'facebook_563645402', enabled: true,
                        password: 'my-hashed-pw', surveys: [new Survey(1)])
                testUser.save()

                def fbUser = new FacebookUser(uid: 563645402)
                fbUser.save(flush: true) 
```

两者都是通过 spring security facebook quickstart 生成的`FacebookUser`，`AppUser`唯一的变化是添加`static hasMany = [surveys: Survey]`到 AppUser。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:58:48.793

看起来数据已经被预定义了，否则就不会有唯一的约束违规。只需检查数据是否存在并仅在需要时创建它：

```
def adminRole = AppRole.findOrSaveByAuthority('ROLE_ADMIN')
def userRole = AppRole.findOrSaveByAuthority('ROLE_USER')

String username = 'facebook_563645402'

if (!AppUser.findByUsername(username)) {
   def testUser = new AppUser(username: username, enabled: true,
                              password: 'my-hashed-pw-here')
   testUser.addToSurveys(jamies)
   testUser.save()

   AppUserAppRole.create testUser, adminRole, true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:32:08.480

Spring Security Facebook 尝试使用相同的用户名 ( `facebook_563645402`) 创建一个新用户。因为它找不到它`uid`。

正如我从您的代码中看到的那样，您只需创建一个用户，并填充`username`，但它不是 facebook 用户，并且`uid`字段未填充。因此，插件找不到任何 facebook 用户并尝试创建一个新用户，默认使用“facebook_563645402”用户名。

有两种方法：或者更改在 Bootstrap 中创建的用户的用户名（如果它不是 Facebook 用户），或者也创建一个 Facebook 用户（将用于身份验证）。

# scala - 使用异常将多个值插入表中

> ID：14675862
> 
> 赞同：4
> 
> 时间：2013-02-03T18:38:07.113
> 
> 标签：scala, playframework-2.0, anorm

我想从 Anorm 中的 SQL 查询中将多个值插入到表中。在以下代码段中，有没有办法将用户名列表绑定为值，而不仅仅是一个用户名？

```
SQL("insert into users (username) " +
      "values ({username})").on(
      'username -> username,
    ).executeUpdate() 
```

作为替代方案，我可以从我的输入中创建一个连接的字符串，但这很容易受到 SQL 注入的影响并且不是很干净。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-16T06:54:18.517

使用 Anorm 一次插入多个值的一种可能方法：

```
var fields: List[String] = Nil
var values: List[(String,ParameterValue[_])] = Nil

for ((username,i) <- usernames.zipWithIndex) {
  fields ::= "({username%s})".format(i)
  values ::= ("username" + i, username)
}

SQL("INSERT INTO users (username) VALUES %s".format(fields.mkString(",")))
  .on(values: _*)
  .executeUpdate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:37:55.930

您想对所有值重复插入命令吗？

如何将它包装在 foreach 中：

```
usernames.foreach(username =>
  SQL("insert into users (username) " +
    "values ({username})").on(
    'username -> username,
  ).executeUpdate()) 
```

或者类似的东西。

Anorm 是一个相对简单的库——在此处查看代码： [https ://github.com/playframework/Play20/tree/master/framework/src/anorm/src/main/scala/anorm](https://github.com/playframework/Play20/tree/master/framework/src/anorm/src/main/scala/anorm)

# git - Git 标签信息 - 我在哪个分支？

> ID：14675864
> 
> 赞同：3
> 
> 时间：2013-02-03T18:38:08.673
> 
> 标签：git, github, git-tag

Git 标记命令提供有关该存储库上所有标记的信息。例如，当我`git tag`在我的存储库上运行时，它显示

```
tag1.0
tag1.1
tag1.2 
```

假设我的存储库有两个分支。我怎么知道`tag1.0`标签与哪个分支相关？

是的，我知道如果我这样做了`git show tag1.0`，我可以根据之前的更改来判断这是第一个分支还是第二个分支。但是，我想知道是否存在更直接的方法。如果存在，我需要使用什么命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:42:47.140

你可以做：

```
git branch --contains tag1.0 
```

# ios - Core-Plot：如何使自定义图像绘图符号居中

> ID：14675866
> 
> 赞同：5
> 
> 时间：2013-02-03T18:38:12.450
> 
> 标签：ios, objective-c, image, plot, core-plot

我正在使用自定义图像符号，如[在 Scattering Graph 上显示图像作为 Core plot iOS 中的绘图符号中](https://stackoverflow.com/questions/11362277/showing-images-on-scattering-graph-as-plot-symbols-in-core-plot-ios)所述。另请参阅[CPTBarPlot (Core-Plot) 上](https://stackoverflow.com/questions/13475573/positioning-label-on-cbtbarplot-core-plot/14675747)的定位标签，了解`CPTPlot`.

但是，我没有看到`CPTScatterPlot.labelOffset`我需要的行为。正值增加图像底部和点之间的距离，而负值增加图像顶部和点之间的距离。我需要将图像集中在该点上。见截图：

*   正 labelOffset 值：![http://i.stack.imgur.com/O1uSe.png](../Images/6926d70b43d6f023f3d05815227ebf76.png)
*   负 labelOffset 值：![http://i.stack.imgur.com/E9fkL.png](../Images/663a50ab4c4d6a1a45855e5be4b65c9a.png)

我的解决方案很老套，需要我用我`CustomImageForScatterPlot`的`drawInContext`方法修改图像框架。关于如何按照我想要的方式工作的任何想法`labelOffset`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T00:28:19.397

这种行为对于数据标签是正确的。您想使用绘图符号。

```
-(CPTPlotSymbol *)symbolForScatterPlot:(CPTScatterPlot *)plot
                           recordIndex:(NSUInteger)index
{
    CPTPlotSymbol *symbol = nil;

    if ( /* use symbol for this index? */ ) {
        symbol = [CPTPlotSymbol ellipsePlotSymbol];
        symbol.fill = [CPTFill fillWithImage:/* symbol image */];
        symbol.size = CGSizeMake(width, height);
    }

    return symbol;
} 
```

如果您希望每个点都有一个符号，请设置`plotSymbol`属性而不是实现此数据源方法。

# java - 适合 JBox2D 的绘图库

> ID：14675867
> 
> 赞同：0
> 
> 时间：2013-02-03T18:38:23.697
> 
> 标签：java, swing, drawing, lwjgl, jbox2d

我正在编写一个 JBox2D 应用程序。到目前为止，我使用 Graphics2D 和 Swing 库在屏幕上绘制 JBox2D 对象。但现在它变得越来越困难，因为我想附加图像和旋转对象。如果你也使用 JBox2D，你能推荐一个好的绘图库吗？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:20:43.597

有一个非常流行的带有 Box2D 集成的 Java 游戏库，称为[LibGDX](http://code.google.com/p/libgdx/)。LibGDX 允许您使用相同的代码库为桌面、Android 和浏览器进行开发。他们的 wiki 文章[A Simple Game](http://code.google.com/p/libgdx/wiki/SimpleApp)是在 Eclipse 中设置项目并在屏幕上绘制简单内容的良好起点。[您可以在此 wiki 页面](http://code.google.com/p/libgdx/wiki/PhysicsBox2D)上了解他们的 Box2D 集成。

# android - Android最快的列表行绘图布局

> ID：14675868
> 
> 赞同：2
> 
> 时间：2013-02-03T18:38:27.630
> 
> 标签：android, xml, listview, optimization, layout

我正在创建一个想要平滑滚动的列表视图。

我目前正在设计我的 XML 文件中的行，并且想知道选择哪个布局视图。我想要一个类似于这样的行布局：

![在此处输入图像描述](../Images/ba8397449b35015bc4bcab1e1e948bb3.png)

`ImageView`我的左边会有一个，然后是两排`TextView`' 在彼此的顶部。（不需要那张照片上的*球体*）

那么最有效的（在绘图方面）使用的布局是什么？我正在考虑的选项是`TableLayout`，`RelativeLayout`和`LinearLayout`（水平）。

* * *

**额外信息：** 我的列表适配器已经非常高效，并使用视图模式以及文本的预计算`TextView`和其他优化来获得最大的效率。这个问题专门关于列表行的*布局，但感谢您的帮助！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:47:39.237

我建议您使用 a`RelativeLayout`这样您就可以选择放置每个组件的位置。基本上，在左侧是图像视图，然后是 2 个文本视图，一个在另一个之上。（可选）右侧的图像。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="100dip"
    android:padding="3dip" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/icon" />

    <TextView
        android:id="@+id/first_txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/image"
        android:layout_toRightOf="@+id/image"
        android:textSize="30dp"
        android:textColor="#ffffff"
        android:text="Medium Text" />

    <TextView
        android:id="@+id/second_txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/first_txt"
        android:layout_below="@+id/first_txt"
        android:textSize="20dp"
        android:textColor="#0481ab"
        android:text="Small Text"/>

    <ImageView
        android:id="@+id/right_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/icon" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:00:41.033

您可以尝试：

1.  使用 a`Spannable`将所有文本显示为一个中的标记`TextView`。
2.  右边的图像（？）可以设置为`CompoundDrawable`上述的权利`TextView`。
3.  `android:drawingCacheQuality="low"`如果您在背景中没有花哨的渐变，请设置。
4.  `getView()`如果您确实覆盖了它，请不要在 Adapter 中做一些繁重的事情。

# django - 如何为新的第三方 Django 库编写单元测试

> ID：14675872
> 
> 赞同：3
> 
> 时间：2013-02-03T18:38:52.073
> 
> 标签：django, unit-testing, mocking, django-apps

我正在制作一个 Django 应用程序库，旨在为我正在开发的游戏应用程序中的其他应用程序模型提供通用排行榜。我的库的客户应该扩展我正在创建的抽象基类并覆盖方法以提供代码以实际聚合对象。

我想保持这个图表应用程序自包含和松散耦合，以便我可以轻松地将它分离并开源它，所以我正在尝试编写不依赖于外部应用程序中任何模型的单元测试，甚至尽管该应用程序的全部目的本质上是从外部应用程序中的模型中聚合数据。我可以在应用程序自己的 dummy 模型中创建一个虚拟模型`models.py`，但这会导致为每个使用该库的项目创建一个未使用的表，这似乎并不理想。有没有理想的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:16:34.790

到目前为止，我可以看到两个选项。

选项 1：创建非托管模型类，并在测试中手动创建和销毁数据库表。

选项 2（我选择的）：在我的`tests`模块中声明测试模型。按照[此处](http://blog.roseman.org.uk/2010/04/13/temporary-models-django/)`syncdb`的建议并在测试方法中触发`setUp`以创建表。适合测试，如下所示：

```
from django.core.management import call_command
from django.db import models
from django.test import TestCase

class TestModel(models.Model):
    data = models.FloatField()

    class Meta:
        app_label = 'myapp'

class LibraryTests(TestCase):
    def setUp(self):
        super(LibraryTests, self).setUp()
        models.register_models('myapp', TestModel)
        call_command('syncdb') 
```

# linux - 与用户进程/线程相比，真的没有办法控制工作队列处理的优先级吗？

> ID：14675873
> 
> 赞同：1
> 
> 时间：2013-02-03T18:38:54.073
> 
> 标签：linux, queue, driver, device, i2c

我一直在阅读各种参考资料，这些参考资料讨论了在 linux 驱动程序中使用下半部分工作队列进行延迟处理。据我所知，内核工作队列完成的任何工作似乎都像普通用户进程/线程一样被调度，内核工作队列相关进程和用户进程之间唯一真正的区别是工作队列可以移动数据在用户端缓冲区和内核缓冲区之间。如果知道我对这些引用的解释是否正确，或者是否有机制可以让我对工作队列处理的优先级保持一定程度的控制，我将不胜感激。更具体地说，我想知道我是否可以保证工作队列进程的优先级高于任何用户进程，至少在工作队列进程不休眠时。我' 我在处理挂在 400 kHz（即慢速）I2C 总线上的芯片的读/写的上下文中提出了这个问题。我们在 ARM9 处理器上运行 linux 2.6.10。- 谢谢！

# macos - VM macosx 初始化时出错

> ID：14675875
> 
> 赞同：1
> 
> 时间：2013-02-03T18:38:58.813
> 
> 标签：macos, java-7

我已经看到了这个标题的一些问题。我已经检查过了，如果它有适合我的解决方案，但没有。

我有一个 java 1.6 在 .bash_profile 中安装了 1.7 我有一个导出 JAVA_HOME 指向 1.6。我已经删除并且我已经删除了所有与 Java / sdk 相关的东西，我想我也从 osx 中删除了一些我不应该的东西:)

我已经安装了 1.7.0_13 的 64 位版本，现在它不在 PATH 中的 bin 文件夹中，所以如果我导航到那里并双击 Java，它将有以下输出：

```
/Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/bin/java ; exit;
Error occurred during initialization of VM
java.lang.NullPointerException
    at java.util.Hashtable.put(Hashtable.java:542)
    at java.lang.System.initProperties(Native Method)
    at java.lang.System.initializeSystemClass(System.java:1115)

logout 
```

太好了，什么没有找到？如何解决？我现在无法启动任何基于 java 的程序。

OSX 版本 10.8.2

![在此处输入图像描述](../Images/be1f6f7ed9ff79d7970f7154991f5f5c.png)

如果我按下它，那个按钮没有效果！

PS Appengine 需要 1.7 才能让我从 Eclipse 登录，1.6 还不够，否则会出现带有无效请求的错误消息。

根据评论更新：

```
otool -L /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/bin/java
/Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/bin/java:
    /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa (compatibility version 1.0.0, current version 17.0.0)
    /System/Library/Frameworks/Security.framework/Versions/A/Security (compatibility version 1.0.0, current version 55110.0.0)
    /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices (compatibility version 1.0.0, current version 41.0.0)
    /usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
    /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.19.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:16:16.837

放回`/System/Library/Frameworks/`您已删除的条目:)

# javascript - 隐藏表单字段，直到填写之前的字段？

> ID：14675884
> 
> 赞同：0
> 
> 时间：2013-02-03T18:39:29.703
> 
> 标签：javascript, html, forms, css

我有一个拆分的注册表单。我正在寻找一种方法，最好使用 css3，它允许我隐藏表单字段，直到有效完成特定字段。

例如：我请求“组名”。当 Group Name 字段填写有效的组名时，即存在于数据库或 xml 文件中的组名（这部分需要 js，并且下拉菜单不是选项），然后会出现第二个字段：“Group Password”。

我正在使用html5和css3。如果绝对必要，我愿意使用 javascript。谢谢。

* * *

我想我可以使用这样的东西：

`document.getElementById("groupname").disabled = true`

但我不确定如何触发它。也许使用 html5 验证可以作为触发器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T02:43:19.433

乍一看，以下内容似乎有效：

```
:invalid ~ .test {
    display: none;
}

<form>
    <input type="text" required/> <!-- Displayed -->
    <fieldset class="test">
        <input type="text"/>  <!-- Hidden until top input is filled -->
    </fieldset>        
</form> 
```

应该能够处理简单的情况。然后可以使用`setCustomValidity`在您的验证中调用电汇来增强这一点。

# stata - 与一个变量和许多其他变量的相关性

> ID：14675888
> 
> 赞同：0
> 
> 时间：2013-02-03T18:39:45.530
> 
> 标签：stata

在 Stata 中，有没有一种快速的方法来显示变量和一堆假人之间的相关性。在我的数据中，我有一个自变量，`goals_scored`在一个游戏中，还有一堆假人`stadium`。如何在一张表中显示`goals_scored`和之间的相关性`i.stadium`，而无需获得体育场之间的相关性，我并不关心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:56:46.153

这是一种方法：

```
#delimit;    

quietly tab stadium, gen(D); // create dummies

foreach var of varlist D* {;    
  quietly corr goals_scored `var';
  di as text "`: variable label `var'':   " as result r(rho);
};

drop D*; // get rid of dummies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:59:04.557

`cpcorr`从SSC（安装`ssc inst cpcorr`）支持最小的相关表，即只有一组和另一组之间的相关性，没有其他。但它是一个旧程序（2001 年），不直接支持因子变量。指标变量（又称虚拟变量）必须首先存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T23:55:51.607

如果您将所有体育场变量存储在本地，您可能会遍历它们以提取相关性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T01:02:44.440

1\. 如果所有体育场变量在数据集中彼此相邻放置：

```
foreach s of varlist stadium1-stadium150 {
    // do whatever
} 
```

2a。如果体育场变量不相邻，请使用`order`到达那里。

2b。如果变量名称遵循某种模式，则可能有另一种解决方法。

3\. 我不会为此使用相关性。根据目标的分布，我会考虑其他事情。

# ios - 重新加载集合视图

> ID：14675893
> 
> 赞同：1
> 
> 时间：2013-02-03T18:40:04.397
> 
> 标签：ios, objective-c, nsmutablearray, uicollectionview, custom-cell

我正在用 Objective C 编写一个应用程序。我在集合视图中有自定义单元格。最初，它从 SQLite Db 加载数据并将其显示在每个自定义单元格内的 Collection 视图中。它在集合视图上显示单元格。

一旦我重新加载集合视图，集合视图将保持黑色。

代码：

```
-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 3;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return [self readRowCount:@"SELECT COUNT(label) FROM colour;"];
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%d", [arrColour count]);
    CustomViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ItemCell" forIndexPath:indexPath];

  //  if (cell == nil) {
    //    cell = [[CustomViewCell alloc]init];
    //}

    cell.label.text = [NSString stringWithFormat:@"%@",[ [arrColour objectAtIndex:indexPath.item ]label] ];

    CellData *redObj = [arrColour objectAtIndex:indexPath.row];
    CellData *greenObj = [arrColour objectAtIndex:indexPath.row];
    CellData *blueObj = [arrColour objectAtIndex:indexPath.row];

    float redF = [[redObj red] floatValue];
    float greenF = [[greenObj green] floatValue];
    float blueF = [[blueObj blue] floatValue];
    //NSLog(@"Colours: %f-%f-%f", redF, greenF, blueF);
    cell.backgroundColor = [UIColor colorWithRed:redF/255.0f green:greenF/255.0f blue:blueF/255.0f alpha:1];

    return cell;
} 
```

我重新加载数据的地方 - 按钮：

```
- (IBAction)btnAdd:(id)sender {
   NSString *myRed = [NSString stringWithFormat: @"%1.4f", slideR.value];
   NSString *myGreen = [NSString stringWithFormat: @"%1.4f", slideG.value];
   NSString *myBlue = [NSString stringWithFormat: @"%1.4f", slideB.value];
    if(txtField != nil){

        [colMain reloadData];
    } 
```

这种情况下的 arrColour（可变数组）包含相同数量的元素。什么集合视图没有重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:08:13.140

您是否有充分的理由直接使用 Sqlite 而不是使用 Core Data，它很好地抽象了大部分低级持久性复杂性？

无论如何，如果您必须这样做，您可以按照以下方法使用当前方法：

1.  将您的 Sqlite 数据加载到模型中，例如`NSArray*`属性或实例变量。初始化并填充数组`-viewDidLoad`（或以后）。
2.  更改您的`datasource`实现以使用该数组，例如`return [self.colors]`在`numberOfItemsInSection` `datasource`方法中。
3.  添加或替换模型项时更改（或替换）模型数组。然后调用`-reloadData`集合视图。

其他一些提示： - 您确定要在集合视图中有 3 个部分（“组”项）吗？如果您实际上没有，请`-numberOfSectionsInCollectionView`完全删除您的实现。- 当你这样做时，你会得到相同的对象三次`arrColors[indexPath.item`。这肯定不是你的本意？考虑`UIColor`用作数组的元素，或将颜色值包装在自定义`NSObject`子类中。

希望这能给你一些关于如何开始的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T01:11:50.617

事实上，我需要做的是为我的自定义对象“强”创建属性。那就是我将 RGB 颜色的值存储在自定义对象中。

# javascript - 通过JS彻底清空一个页面而不重定向到about:blank？

> ID：14675896
> 
> 赞同：0
> 
> 时间：2013-02-03T18:40:20.183
> 
> 标签：javascript, html, dom, greasemonkey, userscripts

对于用户脚本，我需要清除一个页面，包括其所有样式、内容、事件和计时器。是否可以在不重定向到的情况下做到这一点`about:blank`？

我试过`document.body.remove(); document.head.remove();`了，但定时器没有被禁用。

如何正确清除 HTML 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:52:17.623

要删除计时器，您可以请求一个空的 setTimeout，然后尝试减少其 id 并为每个 id 调用 clearTimeout。你可以对 setInterval 做同样的事情。

*编辑：正如bikeshedder 所说，超时ID 的类型未在MDN 中定义。它可以是从随机数到 UUID 的任何东西。MSDN 将其定义为 Integer，但并未说 ID 需要随着时间变大。很有可能重用已停止超时/间隔的 ID。依靠它是不可移植的，将来可能会中断。

但同时，上述方法是您清除所有计时器的唯一可能方法。至少它仍然适用于AFAIK。

如果可以的话，我个人建议保留所有 setTimeout 和 setInterval 的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T21:56:02.450

绝对确定只需将浏览器重定向到不同的 URL：

```
window.location = "empty.html"; 
```

我宁愿不使用`about:blank`它，因为它可能并非在所有浏览器中都可用，并且由于同源策略，您失去了对 iframe 或窗口内容的控制。此外`about:blank`可能并非在所有浏览器中都可用。

* * *

无需将浏览器重定向到不同页面的唯一可靠方法是使用显式跟踪。您的代码需要使用特殊功能来启动/停止计时器、注册事件等。这很乏味，我认为这不是很实用，因为您需要破解您正在使用的所有库。

Monkeypatching 的内置功能`window`也是一个很大的禁忌，因为某些浏览器可能不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:15:16.213

您可以重定向到`"data:text/html,"`. 这允许您指定要在 URL 中呈现的 HTML 文档。

IE9 is the first version of Internet Explorer to support the Data URL for iframes and windows.
Reference: [Data URI scheme#Web browser support](http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support) on Wikipedia.

# c++ - 函数的未命名参数可以有默认值吗？

> ID：14675908
> 
> 赞同：14
> 
> 时间：2013-02-03T18:41:13.553
> 
> 标签：c++, function, c++11, default-parameters, function-signature

以下代码在 C++ 中合法吗？

```
void f(void* = 0)
{}

int main()
{
    f();
} 
```

C++ 标准的哪一页表明这种用法是合法的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-03T18:46:34.433

是的，这是完全合法的。在 N3485 **8.3.6 Default Arguments** /4 中有一个明显的例子：

> [示例：声明
> 
> ```
> void point(int = 3, int = 4); 
> ```
> 
> 声明一个可以用零个、一个或两个 int 类型的参数调用的函数。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-03T18:51:09.787

**是的，这是合法的。**

没有标准的措辞来专门允许这种功能组合；也没有任何*禁止*它的方法。

默认参数语法适用于*参数声明*中的函数参数：

> `[C++11: 8.3.6/1]:` **如果在*参数声明*中指定了*初始化子句*，则此*初始化子句*用作默认参数。****默认参数将在缺少尾随参数的调用中使用。**

 **...和参数*声明*中的函数参数可能是未命名的：

> `[C++11: 8.3.5/11]:` *[..]可以***选择**提供标识符作为参数名称。*[..]*

在 8.3.6/4 下甚至还有一个这种用法的例子（虽然例子不是规范文本，所以这不能用来具体证明任何事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T18:58:10.193

是的，这是合法的。
第 8.3.5/1 节中为函数参数给出的语法产生式允许参数声明不带标识符，但带有赋值表达式（作为初始化器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T16:17:57.753

它不仅合法，而且根据您的编码风格，它实际上可能非常有用。

默认参数仅在函数声明中有意义。

命名参数仅在函数定义中有意义。

**fh:**

```
void f(void*=nullptr); 
```

**fcc**

```
void f(void* x)
{
...
} 
```**

# image - 在 Markdown 中更改图像大小

> ID：14675913
> 
> 赞同：1378
> 
> 时间：2013-02-03T18:42:06.110
> 
> 标签：image, markdown

我刚开始使用 Markdown。我喜欢它，但有一件事困扰着我：如何使用 Markdown 更改图像的大小？

该文档仅对图像提供以下建议：

```
![drawing](drawing.jpg) 
```

如果可能的话，我希望图片也可以居中。我要的是一般的 Markdown，而不仅仅是 GitHub 是如何做到的。

* * *

## 回答 #1

> 赞同：1436
> 
> 时间：2013-02-07T09:26:18.263

您可以在 Markdown 中使用一些 HTML：

```
<img src="drawing.jpg" alt="drawing" width="200"/> 
```

或通过`style`属性（**GitHub 不支持**）

```
<img src="drawing.jpg" alt="drawing" style="width:200px;"/> 
```

*[或者您可以使用Markdown 和图像对齐](https://stackoverflow.com/questions/255170/markdown-and-image-alignment#answer-5054055)*的答案中所述的自定义 CSS 文件

```
![drawing](drawing.jpg) 
```

另一个文件中的 CSS：

```
img[alt=drawing] { width: 200px; } 
```

* * *

## 回答 #2

> 赞同：730
> 
> 时间：2014-01-20T19:33:32.373

对于某些 Markdown 实现（包括[Mou](http://25.io/mou/)和[Marked 2](http://marked2app.com/)（仅限 macOS）），您可以`=WIDTHxHEIGHT`在图形文件的 URL 之后附加以调整图像大小。不要忘记前面的空格`=`。

```
![](./pic/pic1_50.png =100x20) 
```

您可以跳过 HEIGHT

```
![](./pic/pic1s.png =250x) 
```

和宽度

```
![](./pic/pic1s.png =x250) 
```

* * *

## 回答 #3

> 赞同：439
> 
> 时间：2014-02-23T17:52:54.617

此处接受的答案不适用于我迄今为止使用的应用程序中可用的任何 Markdown 编辑器，例如 Ghost、Stackedit.io 甚至在 StackOverflow 编辑器中。我[在 StackEdit.io 问题跟踪器中](https://github.com/benweet/stackedit/issues/164)找到了解决方法。

解决办法是直接使用HTML语法，效果很好：

```
<img src="http://....jpg" width="200" height="200" /> 
```

* * *

## 回答 #4

> 赞同：186
> 
> 时间：2015-11-06T12:18:18.617

只需使用：

```
<img src="Assets/icon.png" width="200"> 
```

代替：

```
![](Assets/icon.png) 
```

* * *

## 回答 #5

> 赞同：95
> 
> 时间：2016-12-15T16:40:15.803

如果你正在为 PanDoc 编写 MarkDown，你可以这样做：

```
![drawing](drawing.jpg){ width=50% } 
```

这将添加`style="width: 50%;"`到 HTML`<img>`标记或LaTeX 中`[width=0.5\textwidth]`。`\includegraphics`

来源： http: [//pandoc.org/MANUAL.html#extension-link_attributes](http://pandoc.org/MANUAL.html#extension-link_attributes)

* * *

## 回答 #6

> 赞同：83
> 
> 时间：2020-01-31T13:23:10.357

结合两个答案，我得出了一个解决方案，可能看起来不那么漂亮，
但它有效！

它会创建一个具有特定大小的缩略图，单击该缩略图可以将您带到最大分辨率的图像。

```
[<img src="image.png" width="250"/>](image.png) 
```

这是一个例子！我在 Visual Code 和 Github 上对其进行了测试。 [![示例降价](../Images/f21931bda876be87ed8c10079168f9c3.png)](https://i.stack.imgur.com/T3zhy.png)

感谢您的反馈，我们知道这也适用于：

*   GitLab
*   Jupyter 笔记本

* * *

## 回答 #7

> 赞同：76
> 
> 时间：2015-06-22T07:05:35.967

也许这最近发生了变化，但[Kramdown 文档](http://kramdown.gettalong.org/syntax.html#links-and-images)显示了一个简单的解决方案。

从文档

```
Here is an inline ![smiley](smiley.png){:height="36px" width="36px"}.

And here is a referenced ![smile]

[smile]: smile.png
{: height="36px" width="36px"} 
```

在 github 上与 Jekyll 和 Kramdown 一起工作。

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2019-10-05T17:32:12.827

替换`![title](image-url.type)`为`<img src="https://image-url.type" width="200" height="200">`

* * *

## 回答 #9

> 赞同：27
> 
> 时间：2014-10-28T12:36:10.270

人们可能会利用可以在几乎所有 Markdown 实现/渲染中设置的**`alt`属性**以及基于属性值**的 CSS 选择器。**优点是可以轻松定义一整套不同的图片大小（以及更多属性）。

**降价：**

```
![minipic](mypic.jpg) 
```

**CSS：**

```
img[alt="minipic"] { 
  max-width:  20px; 
  display: block;
} 
```

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2013-02-04T08:51:32.670

如果你[使用 kramdown](http://kramdown.rubyforge.org/syntax.html#block-ials)，你可以这样做：

```
{:.foo}
![drawing](drawing.jpg) 
```

然后将其添加到[您的自定义 CSS](http://mouapp.com)中：

```
.foo {
  text-align: center;
  width: 100px;
} 
```

* * *

## 回答 #11

> 赞同：19
> 
> 时间：2015-12-31T16:32:43.800

基于 Tiemes 的回答，如果您使用的是[CSS 3](https://en.wikipedia.org/wiki/Cascading_Style_Sheets#CSS_3)，则可以使用[子字符串选择器](http://www.css3.info/preview/attribute-selectors/)：

此选择器将匹配任何带有以“-fullwidth”结尾的 alt 标签的图像：

```
img[alt$="-fullwidth"]{
  width:  100%;
  display: block;
} 
```

然后，您仍然可以将 alt 标签用于描述图像的[预期目的。](http://www.w3.org/QA/Tips/altAttribute)

上述的 Markdown 可能类似于：

```
![Picture of the Beach -fullwidth](beach.jpg) 
```

我一直在 Ghost markdown 中使用它，并且运行良好。

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2020-04-23T21:12:25.140

如果您在*Gihub Flavored Markdown中使用*[参考样式](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#images)图像：

 *```
Here is an image of tree: 
![alt text][tree]{height=400px width=500px}

[//]: # (Image References)
[tree]: ./images/tree.png "This is a tree" 
```

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2019-05-09T04:45:06.163

对于那些对解决方案感兴趣`rmarkdown`的人`knitr`。有一些方法可以在`.rmd`不使用的情况下调整文件中的图像大小`html`：

您可以简单地通过添加来指定图像的宽度`{width=123px}`。不要在括号之间引入空格：

```
![image description]('your-image.png'){width=250px} 
```

另一种选择是使用`knitr::include_graphics`：

```
```{r, fig.cap="image description", out.width = '50%'}
knitr::include_graphics('your-image.png')
``` 
```

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2020-04-04T18:16:04.987

这个对我有用，它不在一条线上，但我希望它对你有用。

```
<div>
<img src="attachment:image.png" width="500" height="300"/>
</div> 
```

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2017-05-19T03:45:59.980

我来到这里寻找答案。这里有一些很棒的建议。并且黄金信息指出markdown完全支持HTMl！

一个好的干净的解决方案总是使用纯 html 语法。带标签。

但是我试图仍然坚持使用 markdown 语法，所以我尝试将它包装在一个标签周围，并在 div 标签内添加我想要的图像的任何属性。它有效！

```
<div style="width:50%">![Chilling](https://www.w3schools.com/w3images/fjords.jpg)</div> 
```

所以这种方式支持外部图像！

只是想我会把它放在那里，因为它不在任何答案中。:)

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2013-11-16T22:18:37.953

您也可以将它与 kramdown 一起使用：

```
markdown
![drawing](drawing.jpg)   
{:.some-css-class style="width: 200px"} 
```

或者

```
markdown
![drawing](drawing.jpg)   
{:.some-css-class width="200"} 
```

这样，您可以直接将任意属性添加到最后一个 html 元素。要添加类，有一个快捷方式**.class.secondclass**。

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2014-09-07T23:16:53.080

我编写了简单的标签解析器脚本，以便在[Jekyll](https://en.wikipedia.org/wiki/Jekyll_%28software%29)中使用自定义大小的 img 标签。

[https://gist.github.com/nurinamu/4ccf7197a1bdfb0d7079](https://gist.github.com/nurinamu/4ccf7197a1bdfb0d7079)

```
{% img /path/to/img.png 100x200 %} 
```

您可以将文件添加到文件`_plugins`夹中。

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2015-11-09T14:54:53.393

我知道这个答案有点具体，但它可能会帮助其他有需要的人。

[由于使用Imgur 服务](https://imgur.com "Imgur：互联网上最棒的图片")上传的照片很多，您可以使用[此处详述的 API](https://api.imgur.com/models/image#thumbs "Imgur API - 图片缩略图")来更改照片的大小。

在 GitHub 问题评论中上传照片时，它会通过 Imgur 添加，因此如果照片很大，这将有很大帮助。

基本上，您可以将[http://i.imgur.com/12345m.jpg](https://i.imgur.com/12345m.jpg)代替[http://i.imgur.com/12345.jpg](https://i.imgur.com/12345.jpg)用于中等大小的图像。

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2019-12-06T16:05:49.207

对于所有寻找在**R markdown/ bookdown**中工作的解决方案的人来说，这些以前的解决方案行不通或需要稍作调整：

### 在职的

*   追加`{ width=50% }`或`{ width=50% height=50% }`

    *   `![foo](foo.png){ width=50% }`
    *   `![foo](foo.png){ width=50% height=50% }`

    *   **重要提示：**宽度和高度之间没有逗号 - 即`{ width=50%, height=30% }` ***不起作用***！

*   附加`{ height="36px" width="36px" }`

    *   `![foo](foo.png){ height="36px" width="36px" }`
    *   **注意：** `{:height="36px" width="36px"}`来自@sayth 的冒号似乎不适用于 R markdown

### 不工作：

*   附加`=WIDTHxHEIGHT`
    *   在图形文件的 URL 之后调整图像大小（来自@prosseek）
    *   既不`=WIDTHxHEIGHT` `![foo](foo.png =100x20)`也不`=WIDTH`只`![foo](foo.png =250x)`工作

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2021-06-16T00:11:57.633

如果每个 md 文件中有一个图像，控制图像大小的一种方便方法是：

添加css样式如下：

```
## Who Invented JSON?
`Douglas Crockford`

Douglas Crockford originally specified the JSON format in the early 2000s.
![Douglas Crockford](img/Douglas_Crockford.jpg)

<style type="text/css">
    img {
        width: 250px;
    }
</style> 
```

输出如下：[![在此处输入图像描述][1]][1]

如果每个 md 页面中有更多图像，那么控制每个图像或每个自定义标签的便捷方法是在 css 中定义每个元素。对于 img 标签的这种情况，我们可以：

```
 ```
//in css or within style tags:
    img[alt="Result1"] {
    width: 100px;
    }

    img[alt="Result2"] {
    width: 200px;
    }
    img[alt="Result3"] {
    width: 400px;
    }

// try in md one of the methods shown below to insert image in your document:
```

```
 <br/>
<img src="https://i.stack.imgur.com/xUb54.png" alt="Result1"> <br/>
<img src="https://i.stack.imgur.com/xUb54.png" alt="Result2"> <br/>
<img src="https://i.stack.imgur.com/xUb54.png" alt="Result3"> <br/>

<br/>

in md:<br/>
![Result1](img/res-img-1.png) <br/>

![Result2](img/res-img-2.png) <br/>

![Result3](img/res-img-3.png) 
```

  [1]: https://i.stack.imgur.com/xUb54.png 
```

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2016-09-05T13:53:05.997

对于 R-Markdown，上述解决方案都不适合我，所以我转向常规的[LaTeX](http://en.wikipedia.org/wiki/LaTeX)语法，它工作得很好。

```
\begin{figure}
 \includegraphics[width=300pt, height = 125 pt]{drawing.jpg}
\end{figure} 
```

然后，您可以使用例如`\begin{center}`语句使图像居中。

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2016-02-08T05:10:30.527

使用[Flask](http://en.wikipedia.org/wiki/Flask_%28web_framework%29)时（我将它与平面页面一起使用）......我发现在对 markdown 的调用中的扩展中显式启用（由于某种原因不是默认情况下）'attr_list' 可以解决问题 - 然后可以使用属性（对于访问 CSS 也非常有用 - 例如 class="my class" ...）。

FLATPAGES_HTML_RENDERER = prerender_jinja

和功能：

```
def prerender_jinja(text):
    prerendered_body = render_template_string(Markup(text))
    pygmented_body   = markdown.markdown(prerendered_body, extensions=['codehilite', 'fenced_code', 'tables', 'attr_list'])
    return pygmented_body 
```

然后在 Markdown 中：

```
![image](https://octodex.github.com/images/yaktocat.png "This is a tooltip"){: width=200px} 
```

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2017-02-06T07:16:11.230

# 有添加类和css样式的方法

`![pic][logo]{.classname}`

## 然后在下面写下链接和css

```
[logo]: (picurl)

<style type="text/css">
    .classname{
        width: 200px;
    }
</style> 
```

[参考这里](https://stackoverflow.com/questions/255170/markdown-and-image-alignment)

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2019-08-06T21:58:48.897

# 在 Jupyter Notebook 中调整 Markdown 图像附件的大小

*我正在使用`jupyter_core-4.4.0`& jupyter 笔记本。*

### 如果您通过将图像插入到降价中来附加图像，如下所示：

```
![Screen%20Shot%202019-08-06%20at%201.48.10%20PM.png](attachment:Screen%20Shot%202019-08-06%20at%201.48.10%20PM.png) 
```

### 这些`attachment`链接**不起作用**：

```
<img src="attachment:Screen%20Shot%202019-08-06%20at%201.48.10%20PM.png" width="500"/> 
```

### **这样做**。这**确实**有效。

只需添加 div 括号。

```
<div>
<img src="attachment:Screen%20Shot%202019-08-06%20at%201.48.10%20PM.png" width="500"/>
</div> 
```

希望这可以帮助！

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2019-08-14T09:31:11.120

备查：

[Joplin](https://joplinapp.org)的Markdown 实现允许通过以下方式控制导入图像的大小：

`<img src=":/7653a812439451eb1803236687a70ca" width="450"/>`

[此处](https://discourse.joplinapp.org/t/resize-images/708)请求此功能，并且正如[Laurent所](https://github.com/laurent22)[承诺](https://discourse.joplinapp.org/t/resize-images/708/5)的那样，此功能已实现。

我花了一段时间才弄清楚乔普林的具体答案。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2021-06-07T17:13:22.070

对于在 Google Colaboratory 上使用 Markdown 的用户，无需将图像上传到会话存储文件夹或链接到 Google Drive。如果图像有 URL，并且可以包含在 Jupyter notebook 中，则其大小更改如下：

```
<img src="https://image.png" width="500" height="500" /> 
```

[![在此处输入图像描述](../Images/66a37b75bd88bcabe76d78f755a606d6.png)](https://i.stack.imgur.com/6aZkC.png)

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2018-02-08T14:13:04.203

在大多数 Markdown 渲染器中将呈现向源 URL 添加的相对尺寸。

我们在[Corilla](http://www.corilla.com)中实现了这一点，因为我认为该模式是一种遵循现有工作流程的预期，而不会促使用户依赖基本 HTML 的模式。如果您最喜欢的工具不遵循类似的模式，那么值得提出功能请求。

**语法示例：**

`![a-kitten.jpg](//corilla.com/a-kitten-2xU3C2.jpg =200x200)`

**小猫的例子：**

[![小猫](../Images/39c905a2ffb14f789877fe7a5cfed2de.png)](https://i.stack.imgur.com/VVQET.jpg)

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2021-07-27T15:39:55.757

通过简单的向后兼容 MD：

```
![<alt>](<imguri>#<w>x<h> "<title>") 
```

其中 w, h 定义了要适应的边界框，例如在 Flutter 包中[https://pub.dev/packages/flutter_markdown](https://pub.dev/packages/flutter_markdown)

代码：[https ://github.com/flutter/packages/blob/9e8f5227ac14026c419f481ed1dfcb7b53961475/packages/flutter_markdown/lib/src/builder.dart#L473](https://github.com/flutter/packages/blob/9e8f5227ac14026c419f481ed1dfcb7b53961475/packages/flutter_markdown/lib/src/builder.dart#L473)

重新考虑破坏兼容性的 html 变通方法，因为人们可能会使用本机/非 html 组件/应用程序来显示降价。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2019-02-07T14:47:32.250

如果您无法选择更改初始降价，则此 hack 可能会起作用：

```
newHtml = oldHtml.replace(/<img/g, '<img height="100"'); 
```

我使用它能够在通过电子邮件发送图像之前调整图像大小（因为 Outlook 忽略任何图像 css 样式）

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2019-07-22T11:38:58.480

[IntelliJ IDEA](https://www.jetbrains.com/idea/)用户请参考[Markdown Navigator](https://plugins.jetbrains.com/plugin/7896-markdown-navigator)插件。

预览呈现图像、徽章、HTML 等。

[![Android Studio Markdown 预览](../Images/72ee76b13affb8710dbfc9965774c24e.png)](https://i.stack.imgur.com/VUyU6.png)

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2021-02-01T06:46:50.963

如果我们只使用像这样的普通 HTML 图像标签，它就可以工作，如果您使用引导程序进行样式设置。我在用 Jekyll 制作的网站中使用它。

```
<img class="img-fluid" src="./img/face.jpg" alt="img-verification"> 
```

如果我们按照这个例子添加引导类，它就可以正常工作。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2021-02-20T13:36:49.397

上面所说的纯粹**<img ... width="50%">确实适用于我的 Github** **Readme.md**文档。

但是我真正的问题是，**图像位于表格单元格内**，只是压缩了旁边单元格中的文本。所以另一种方法是在 Markdown 表中设置列宽，但是对于我的早晨来说，这些解决方案似乎并没有足够的*降价。*

最后我通过简单地用尽可能多的**“＆nbsp;”强制旁边的文本单元格解决了这两个问题** 根据我的需要。

我希望这有帮助。再见，谢谢大家。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2021-09-23T08:32:06.833

这将起作用

```
<style>
img{width: 50%;}
#foo {color: red;}
</style>

<p id="foo">foo</p>

<p style="color: blue">bar</p> 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2020-02-24T13:27:16.500

Tieme 的回答最适合大多数情况。

就我而言，我正在使用 pandoc 将降价转换为乳胶。HTML 标记在这里不起作用。

我的解决方案是重新实现`\includegraphics`

```
\let\maxincludegraphics\includegraphics
\renewcommand{\includegraphics}[1]{\maxincludegraphics[max width=\textwidth]{#1}} 
```

这类似于在转换为 HTML 后使用 CSS。*

# java - 如何将一个组件放在其他组件之上？

> ID：14675914
> 
> 赞同：3
> 
> 时间：2013-02-03T18:42:14.940
> 
> 标签：java, swing, jscrollpane, jlayeredpane, jviewport

我有一个`JScrollPanel`包括一个大面板，它本身包括 3 个内面板。我想将一个面板（例如）放在一个特殊的地方，以便始终可以看到，我的意思是用户可以滚动到任何想要的地方，但该面板始终位于其他组件的顶部并且不会移动。我试图通过`JLayeredPane`但我做不到。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T21:01:43.877

[这里](https://stackoverflow.com/a/9629892/230513)有一个[`JLayeredPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)例子，但是，在[这里](https://stackoverflow.com/a/13437388/230513)看到，可能会感兴趣。它不包含在常规[画廊](http://download.oracle.com/javase/tutorial/uiswing/layout/visual.html)中。`OverlayLayout`

![叠加布局](../Images/e9e7ba447ad9f5f638ef2bd54c14fb2a.png)

还要考虑这个在[滚动](https://stackoverflow.com/a/10097538/230513)窗格的`JViewport`.

![视口](../Images/1af61d342d507a58d88b69f433a712be.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T20:19:37.870

你可以使用

*   [玻璃板](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane)_
*   [JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

将内容覆盖在屏幕上的其他组件之上

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T19:04:48.803

难道你不能把你不想移动的内容放在一个单独的不是滚动面板的 JPanel 中吗？如果您不希望它滚动，我看不出有任何理由将它包含在滚动面板中。

所以有一个不滚动的大面板（称之为 bigPanel 或其他东西）。然后在 bigPanel 中设置您不想滚动的面板。然后也将滚动面板也放入 bigPanel 中。

也许我错过了一些东西，但这不能解决你的问题吗？

# node.js - 如何使用socket io连接？

> ID：14675916
> 
> 赞同：1
> 
> 时间：2013-02-03T18:42:29.510
> 
> 标签：node.js, socket.io

```
var io = require('socket.io');
var socket = io.connect('http://localhost'); 
```

投掷`TypeError: Object #<Object> has no method 'connect'`

我究竟做错了什么？

编辑：更多信息：使用 node.js。安装了socket.io`npm install socket.io`

用来`node test.js`运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:22:41.123

var socket = io.connect('你的主机');

这是在 index.html 文件中的 js 标记中声明的 javascript 代码的一部分。意味着这是在客户端机器上运行的代码。

仔细查看[http://socket.io/#how-to-use](http://socket.io/#how-to-use)

# c++ - XGrabKeyboard 仅在程序运行时阻止键盘

> ID：14675920
> 
> 赞同：2
> 
> 时间：2013-02-03T18:42:50.833
> 
> 标签：c++, linux, qt, x11

我正在编写一个代码来获取按下的键并阻止键盘输入。示例：如果按下 Super_L 或 Super_R 键，阻止它们打开应用程序菜单。该代码在程序打开时工作，但当程序关闭时，密钥被发送到系统。示例：如果用户在程序运行时按下 Super_L 键没有任何反应，但当程序关闭时，Ubuntu 应用程序菜单会自动打开。我该如何解决这个问题？

```
void hook()
{
    Display *dpy = XOpenDisplay(0);
    XEvent ev;

    if(!dpy)
    {
        qDebug() << "Error";
        return;
    }

    XGrabKeyboard(dpy, DefaultRootWindow(dpy), false, GrabModeAsync, GrabModeAsync, CurrentTime);

    forever
    {
        XNextEvent(dpy, &ev);
        switch (ev.type)
        {
        case KeyPress:
            qDebug() << "KeyPress" << XKeysymToString(XKeycodeToKeysym(dpy, ev.xkey.keycode, 0));
            break;
        case KeyRelease:
            qDebug() << "KeyRelease" << XKeysymToString(XKeycodeToKeysym(dpy, ev.xkey.keycode, 0));
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:53:44.513

来自`man XGetKeyboard`：

> 如果活动键盘抓取的事件窗口变得不可见，X 服务器会自动执行 UngrabKeyboard 请求。

这是设计使然。否则，键盘可能会被已失效的应用程序无限期地抓住，而用户不会对此感到满意。当然，窗口仍然是可见的（它是根窗口）但是显示连接是关闭的，所以基本原理是一样的。

如果您的应用程序即使在关闭后仍需要保持抓取...那么，您将不得不留在后台而不实际退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T19:30:41.400

Quoth[手册](http://tronche.com/gui/x/xlib/display/close-operation.html)：

> 当 X 服务器与客户端的连接被显式调用`XCloseDisplay()`或退出的进程关闭时，X 服务器执行以下自动操作：
> 
> *   它不承认客户拥有的所有选择（请参阅 参考资料 `XSetSelectionOwner()`）。
> *   如果客户端主动抓住了指针或键盘，它会执行`XUngrabPointer()`和。`XUngrabKeyboard()`
> *   `XUngrabServer()`如果客户端已经抓住了服务器，它会执行。
> *   它释放客户端所做的所有被动抓取。

客户请求并授予客户抓取。在抓取期间，所有相关事件都将传递给抓取客户端。没有客户，没有抢。

我看不出这里有什么要解决的。如果您希望某项功能正常工作，请确保实现它的应用程序正在运行。

# mysql - 将对象/数组的值转换为javascript中的字符串

> ID：14675922
> 
> 赞同：0
> 
> 时间：2013-02-03T18:43:14.503
> 
> 标签：mysql, string, node.js, object

我正在尝试在网站上进行登录服务，但无法从 mysql 访问数据。目前我只为相关用户输入密码，将其与用户输入进行比较。但是，据我所知，密码作为长度为 1 的数组返回（results.length 给出的输出为 1）。当我尝试输出值时，我得到 [ { pword: 'ghfg' } ]。我尝试使用 toString() 方法将其转换为字符串，但是当我输出值时它返回 [object Object]。

我已经使用了循环 `for (var key in results) { var value = results[key] }`

当我输出值时，我得到 { pword: ghfg }。

这很好，但是当我输出它表示对象的类型时，我面临着试图将其转换为字符串并获取值的相同问题：[object Object]。

谁能告诉我我错过了什么？我假设这是我没有想到的简单事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:46:36.063

`toString`很少给出有用的响应，尤其是对于对象。您需要将其转换为人类可读的格式。显而易见的选择是 JSON，它与 Javascript 对象共享其语法。

要得到这个，使用[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify). 这在所有现代浏览器中都可用，但如果您认为旧浏览器可能会被使用，您可能需要将其修补到旧浏览器中。

话虽如此，我正在努力弄清楚您的代码实际上是什么样的，除了您发布的那一行。可能有更好的方法可以做到这一点，但如果没有更多的上下文，我无法判断/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:50:13.990

尝试这个：

```
for(var key in results) {
  var value = results[key].pword;
} 
```

# c# - 无论如何将带有反射的代码“注入”到静态类中？

> ID：14675923
> 
> 赞同：3
> 
> 时间：2013-02-03T18:43:24.830
> 
> 标签：c#, .net, reflection, custom-attributes

我试图使缓存代理类的创建尽可能简单。我已经使用简单的 API 进行了一些不同的实验，但这并不容易。

现在，我正在查看属性和反射，看看它是否可以“神奇地”解决。例如，给定这个类：

```
public static MyCache
{
  [Cache("foobar")]
  public static string Foobar { get; set; }
} 
```

并让它以某种方式生产出相当于

```
public static MyCache
{
  [Cache("foobar")]
  public static string Foobar
  {
    get
    {
      return (string)Cacher.Get("foobar");
    }
    set
    {
      Cacher.Set("foobar", value, new CacheOptions()); //or whatever
    }
  }
} 
```

虽然两个版本对调用者来说都应该看起来“正常”，所以这是有效的：

```
MyCache.Foobar="meh";
Assert.IsEqual("meh", MyCache.Foobar); 
```

我有什么可以通过反思来完成的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:45:14.207

> 我有什么可以通过反思来完成的事情吗？

不，没有什么可以实现的，特别是如果属性不是虚拟的。如果属性是虚拟的，您可以使用[Castle.DynamicProxy 之](http://www.castleproject.org/projects/dynamicproxy/)类的框架来进行面向方面的编程。流行的模拟框架，如 Rhino Mocks 和 NSubstitute 使用它来生成运行时代理对象。当然，这只适用于虚拟会员。在示例中，您已显示您有一个无法编织的静态属性。

您可以使用后编译处理工具[`PostSharp`](http://www.sharpcrafters.com/)来实现这一点。它们通过修改生成的 IL 来工作。

# visual-studio-2010 - 在 Visual Studio 2010 中创建文件时是否可以自动设置“复制到输出目录”？

> ID：14675924
> 
> 赞同：9
> 
> 时间：2013-02-03T18:43:28.980
> 
> 标签：visual-studio-2010, properties, automation, visual-studio-sdk

我最近开始使用 LuaInterface 来让 Lua 脚本在我的 C# 程序中工作。为了在 Visual Studio 中轻松创建 Lua 脚本，我安装了一个 Lua 语法高亮插件并创建了一个项目模板，以便我可以通过右键单击项目文件并选择“新建项目-> Lua 脚本”来创建新脚本。这工作得很好。

为了让程序找到脚本，需要将它们放在构建位置的同一目录（或子目录）中。这正是我想要它们的地方，但为了做到这一点，我必须为我创建的每个新文件更改“复制到输出目录”设置。

有没有办法改变这个选项的默认设置？现在它默认为“不复制”。我只能找到[另一个问题](https://stackoverflow.com/questions/1849907/changing-the-default-copy-to-output-directory-setting-for-text-files)，问基本相同的事情，但那里提供的唯一答案建议构建后事件将具有相同扩展名的所有文件复制到定义的位置。我真的不想这样做，因为目标目标可能会更改或可能会添加更多目标（并且需要额外的事件？）并且我希望能够在每个文件的基础上更改该设置。

这只是一个方便的问题，因为我可以为每个文件手动更改该选项，但是已经能够自动化其余的过程，我希望我也可以自动化最后一个细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T19:02:22.860

您应该能够添加[`IWizard`](http://msdn.microsoft.com/en-us/library/vstudio/ms185301.aspx)对模板的引用，这将在您单击`ok`“文件”->“添加”窗口时运行。您需要[将程序集和类型添加](http://msdn.microsoft.com/en-US/library/ms171411%28v=vs.110%29.aspx)到 vstemplate 文件中。

实施[`RunFinished`](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.visualstudio.templatewizard.iwizard.runfinished.aspx)或可能实施该[`ProjectItemFinishedGenerating`](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.visualstudio.templatewizard.iwizard.projectitemfinishedgenerating.aspx)方法。然后，您可以使用`EnvDTE`Visual Studio 公开的对象，使用标准的 Visual Studio 可扩展性模型来操作解决方案中的任何项目。

[以下代码片段](https://t4toolbox.svn.codeplex.com/svn/Source/DteProcessor.cs)（来自开源 T4 Toolbox）显示了如何设置此属性。

```
 /// <summary>
    /// Sets the known properties for the <see cref="ProjectItem"/> to be added to solution.
    /// </summary>
    /// <param name="projectItem">
    /// A <see cref="ProjectItem"/> that represents the generated item in the solution.
    /// </param>        
    /// <param name="output">
    /// An <see cref="OutputFile"/> that holds metadata about the <see cref="ProjectItem"/> to be added to the solution.
    /// </param>
    private static void SetProjectItemProperties(ProjectItem projectItem, OutputFile output)
    {
        // Set "Build Action" property
        if (!string.IsNullOrEmpty(output.BuildAction))
        {
            ICollection<string> buildActions = GetAvailableBuildActions(projectItem);               
            if (!buildActions.Contains(output.BuildAction))
            {
                throw new TransformationException(
                    string.Format(CultureInfo.CurrentCulture, "Build Action {0} is not supported for {1}", output.BuildAction, projectItem.Name));
            }

            SetPropertyValue(projectItem, "ItemType", output.BuildAction);
        }

        // Set "Copy to Output Directory" property
        if (output.CopyToOutputDirectory != default(CopyToOutputDirectory))
        {
            SetPropertyValue(projectItem, "CopyToOutputDirectory", (int)output.CopyToOutputDirectory);
        }

        // Set "Custom Tool" property
        if (!string.IsNullOrEmpty(output.CustomTool))
        {
            SetPropertyValue(projectItem, "CustomTool", output.CustomTool);
        }

        // Set "Custom Tool Namespace" property
        if (!string.IsNullOrEmpty(output.CustomToolNamespace))
        {
            SetPropertyValue(projectItem, "CustomToolNamespace", output.CustomToolNamespace);
        }    
    } 
```

# jsp - 重新加载网页再次调用代码

> ID：14675925
> 
> 赞同：0
> 
> 时间：2013-02-03T18:43:37.577
> 
> 标签：jsp, jakarta-ee

我正在使用 JSP 和 servlet 开发一个 Web 应用程序。

在我的 JSP 中，我有几种形式，例如以下

```
<form method="post" action="quotation">
<input type="submit" name="addStep" value="Add a Step" class="noLabel" />
</form> 
```

我正在使用表单的“名称”属性在我的 servlet 的 doPost 方法中知道我应该调用哪个代码。

问题如下：

*   我在我的网络服务器中加载我的 jsp
*   我单击表单上的“添加步骤”按钮 => 应用了正确的代码
*   如果我通过在地址栏上按“enter”重新加载网页，则会再次应用相同的代码，因为我猜想在 Http 请求上没有重置 addStep 属性

您知道如何重置请求属性（此处为 addStep）以防止这种行为发生吗？

这是 doPost 方法：

```
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    request.setAttribute(DATABASE_ATT, databaseData);
    this.getServletContext().getRequestDispatcher(VIEW)
            .forward(request, response);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:46:46.320

发布后，重定向（使用`HttpServletResponse.sendRedirect()`）到显示表单的页面，这样刷新只会重新加载包含表单的页面，而不是重新提交表单。

请参阅[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# list - 如何在 j2me 中从一页导航到另一页

> ID：14675928
> 
> 赞同：1
> 
> 时间：2013-02-03T18:43:52.393
> 
> 标签：list, java-me, uinavigationcontroller

我是 J2ME 的新手。我试图在选择 ListItem 时从一个 MIDlet 页面导航到另一个页面。但我收到以下错误消息。

```
Installing suite from: file:///C:/Users/mohit/Documents/NetBeansProjects/MobileApp1/dist/nbrun8756732879038612272/MobileApp1.jad
6370272 - ERROR - AMS - 2 - Installation failed:com.sun.midp.midletsuite.MIDletSuiteLockedException
com.sun.midp.midletsuite.MIDletSuiteLockedException
at com.sun.midp.midletsuite.MIDletSuiteImpl.lockMIDletSuite(), bci=0
at com.sun.midp.midletsuite.MIDletSuiteStorage.getMIDletSuite(), bci=12
at com.sun.midp.installer.Installer.checkPreviousVersion(), bci=60
at com.sun.midp.installer.Installer.installStep2(), bci=10
at com.sun.midp.installer.Installer.performInstall(), bci=132
at com.sun.midp.installer.Installer.resumeInstallation(), bci=7
at com.sun.midp.installer.MidpInstaller$StartAction.run(), bci=10
at com.sun.j2me.security.AccessController.doPrivileged(), bci=12
at com.sun.midp.installer.MidpInstaller$InstallThread.run(), bci=9
at java.lang.Thread.run(Thread.java:721)

TRACE: <at java.lang.NullPointerException:   0>, Exception caught in Display class
java.lang.NullPointerException:   0
 - mobileapp1.VisualMIDlet.commandAction(VisualMIDlet.java:180)
at javax.microedition.lcdui.Display$ChameleonTunnel.callScreenListener(), bci=39
at com.sun.midp.chameleon.layers.SoftButtonLayer.processCommand(), bci=62
at com.sun.midp.chameleon.layers.SoftButtonLayer.soft2(), bci=119
at com.sun.midp.chameleon.layers.SoftButtonLayer.keyInput(), bci=102
at com.sun.midp.chameleon.CWindow.keyInput(), bci=30
at javax.microedition.lcdui.Display$DisplayEventConsumerImpl.handleKeyEvent(), bci=43
at com.sun.midp.lcdui.DisplayEventListener.process(), bci=252
at com.sun.midp.events.EventQueue.run(), bci=130
at java.lang.Thread.run(Thread.java:721) 
```

我不知道如何处理这个。任何人都可以帮助我吗？

```
//VisualMIDlet.java
package mobileapp1;

import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import org.netbeans.microedition.lcdui.LoginScreen;

public class VisualMIDlet extends MIDlet implements CommandListener {

private boolean midletPaused = false;

private java.util.Hashtable __previousDisplayables = new java.util.Hashtable();
private LoginScreen loginScreen;
private Form FallSem_Home;
private ChoiceGroup choiceGroup;
private List stud_homelist;
private Form WinterSem_Home;
private Command exit_StudList;
private Command exitCommand1;
private Command exitCommand2;
private Command backCommand;
private Command ok_StudList;
private Command okCommand;

private List menu = null;
private Display display;
Fall_Sem fall_sem;
public VisualMIDlet() {
    //fall_sem = new Fall_Sem();
}

private void switchToPreviousDisplayable() {
    Displayable __currentDisplayable = getDisplay().getCurrent();
    if (__currentDisplayable != null) {
        Displayable __nextDisplayable = (Displayable) __previousDisplayables.get(__currentDisplayable);
        if (__nextDisplayable != null) {
            switchDisplayable(null, __nextDisplayable);
        }
    }
}

private void initialize() {
    // write pre-initialize user code here

    // write post-initialize user code here
}

public void startMIDlet() {
    // write pre-action user code here
    switchDisplayable(null, getLoginScreen());
    // write post-action user code here
}

public void resumeMIDlet() {
    // write pre-action user code here

    // write post-action user code here
}

public void switchDisplayable(Alert alert, Displayable nextDisplayable) {
    // write pre-switch user code here
    Display display = getDisplay();
    Displayable __currentDisplayable = display.getCurrent();
    if (__currentDisplayable != null && nextDisplayable != null) {
        __previousDisplayables.put(nextDisplayable, __currentDisplayable);
    }
    if (alert == null) {
        display.setCurrent(nextDisplayable);
    } else {
        display.setCurrent(alert, nextDisplayable);
    }
    // write post-switch user code here
}

public void commandAction(Command command, Displayable displayable) {
    // write pre-action user code here
    if (displayable == FallSem_Home) {
        if (command == backCommand) {
            // write pre-action user code here

            // write post-action user code here
        } else if (command == exit_StudList) {
            // write pre-action user code here
            //notifyDestroyed();

            // write post-action user code here
        } else if (command == okCommand) {
            // write pre-action user code here

            // write post-action user code here
        }
    } else if (displayable == WinterSem_Home) {
        if (command == backCommand) {
            // write pre-action user code here
            switchToPreviousDisplayable();
            // write post-action user code here
        } else if (command == exitCommand2) {
            // write pre-action user code here

            // write post-action user code here
        }
    } else if (displayable == loginScreen) {
        if (command == LoginScreen.LOGIN_COMMAND) {
            // write pre-action user code here
            if(loginScreen.getUsername().equals("mohit") && loginScreen.getPassword().equals("abhi")){
                switchDisplayable(null, getStud_homelist());
            // write post-action user code here
            }
        }
    } else if (displayable == stud_homelist) {
        if (command == List.SELECT_COMMAND) {
            // write pre-action user code here
            stud_homelistAction();
            // write post-action user code here
        } else if (command == exit_StudList) {
            // write pre-action user code here
            exitMIDlet();
            // write post-action user code here
        } **else if (command == ok_StudList) {
            // write pre-action user code here
            List options = (List) display.getCurrent();
            switch(options.getSelectedIndex()){
                case 0:

                    displayable = fall_sem.getForm();
                    switchDisplayable(null, displayable);
                    //display.setCurrent(fall_sem.getForm());
            }

            // write post-action user code here
        }**
    }
    // write post-action user code here
}

public LoginScreen getLoginScreen() {
    if (loginScreen == null) {
        // write pre-init user code here
        loginScreen = new LoginScreen(getDisplay());
        loginScreen.setLabelTexts("Username", "Password");
        loginScreen.setTitle("loginScreen");
        loginScreen.addCommand(LoginScreen.LOGIN_COMMAND);
        loginScreen.setCommandListener(this);
        loginScreen.setFullScreenMode(true);
        loginScreen.setBGColor(-3355444);
        loginScreen.setFGColor(0);
        loginScreen.setPassword("");
        loginScreen.setUsername("");
        loginScreen.setUseLoginButton(true);
        loginScreen.setLoginButtonText("Login");
        // write post-init user code here
    }
    return loginScreen;
}

public Form getFallSem_Home() {
    if (FallSem_Home == null) {
        // write pre-init user code here
        FallSem_Home = new Form("form", new Item[]{getChoiceGroup()});
        FallSem_Home.addCommand(getExit_StudList());
        FallSem_Home.addCommand(getBackCommand());
        FallSem_Home.addCommand(getOkCommand());
        FallSem_Home.setCommandListener(this);
        // write post-init user code here
    }
    return FallSem_Home;
}

public Command getExit_StudList() {
    if (exit_StudList == null) {
        // write pre-init user code here
        exit_StudList = new Command("Exit", Command.EXIT, 0);
        // write post-init user code here
    }
    return exit_StudList;
}

public ChoiceGroup getChoiceGroup() {
    if (choiceGroup == null) {
        // write pre-init user code here
        choiceGroup = new ChoiceGroup("choices", Choice.EXCLUSIVE);
        choiceGroup.append("Time Table", null);
        choiceGroup.append("Exam Schedule", null);
        choiceGroup.append("Marks", null);
        choiceGroup.setFitPolicy(Choice.TEXT_WRAP_DEFAULT);
        choiceGroup.setSelectedFlags(new boolean[]{false, false, false});
        // write post-init user code here
    }
    return choiceGroup;
}

public List getStud_homelist() {
    if (stud_homelist == null) {
        // write pre-init user code here
        stud_homelist = new List("list", Choice.IMPLICIT);
        stud_homelist.append("Fall Sem 2012-13", null);
        stud_homelist.append("Winter Sem 2012-13", null);
        stud_homelist.append("Add / Drop", null);
        stud_homelist.addCommand(getExit_StudList());
        stud_homelist.addCommand(getOk_StudList());
        stud_homelist.setCommandListener(this);
        stud_homelist.setSelectedFlags(new boolean[]{false, false, false});
        // write post-init user code here
    }
    return stud_homelist;
}

public void stud_homelistAction() {
    // enter pre-action user code here
    String __selectedString = getStud_homelist().getString(getStud_homelist().getSelectedIndex());
    if (__selectedString != null) {
        if (__selectedString.equals("Fall Sem 2012-13")) {
            // write pre-action user code here

            // write post-action user code here
        } else if (__selectedString.equals("Winter Sem 2012-13")) {
            // write pre-action user code here

            // write post-action user code here
        } else if (__selectedString.equals("Add / Drop")) {
            // write pre-action user code here

            // write post-action user code here
        }
    }
    // enter post-action user code here
}

public Form getWinterSem_Home() {
    if (WinterSem_Home == null) {
        // write pre-init user code here
        WinterSem_Home = new Form("form");
        WinterSem_Home.addCommand(getBackCommand());
        WinterSem_Home.addCommand(getExitCommand2());
        WinterSem_Home.setCommandListener(this);
        // write post-init user code here
    }
    return WinterSem_Home;
}

public Command getExitCommand1() {
    if (exitCommand1 == null) {
        // write pre-init user code here
        exitCommand1 = new Command("Exit", Command.EXIT, 0);
        // write post-init user code here
    }
    return exitCommand1;
}

public Command getBackCommand() {
    if (backCommand == null) {
        // write pre-init user code here
        backCommand = new Command("Back", Command.BACK, 0);
        // write post-init user code here
    }
    return backCommand;
}

public Command getExitCommand2() {
    if (exitCommand2 == null) {
        // write pre-init user code here
        exitCommand2 = new Command("Exit", Command.EXIT, 0);
        // write post-init user code here
    }
    return exitCommand2;
}

public Command getOkCommand() {
    if (okCommand == null) {
        // write pre-init user code here
        okCommand = new Command("Ok", Command.OK, 0);
        // write post-init user code here
    }
    return okCommand;
}

public Command getOk_StudList() {
    if (ok_StudList == null) {
        // write pre-init user code here
        ok_StudList = new Command("Ok", Command.OK, 0);
        // write post-init user code here
    }
    return ok_StudList;
}

public Display getDisplay() {
    return Display.getDisplay(this);
}

public void exitMIDlet() {
    switchDisplayable(null, null);
    destroyApp(true);
    notifyDestroyed();
}

public void startApp() {
    if (midletPaused) {
        resumeMIDlet();
    } else {
        initialize();
        startMIDlet();
    }
    midletPaused = false;
}

public void pauseApp() {
    midletPaused = true;
}

public void destroyApp(boolean unconditional) {
            notifyDestroyed();

}
}

 //Fall_Sem.java
package mobileapp1;

import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import org.netbeans.microedition.lcdui.LoginScreen;
import org.netbeans.microedition.lcdui.SimpleTableModel;
import org.netbeans.microedition.lcdui.TableItem;

public class Fall_Sem extends MIDlet implements CommandListener {

private boolean midletPaused = false;
private Display display;

private Form form;
private ChoiceGroup choiceGroup;
private Form form1;
private TableItem tableItem;
private Command backCommand;
private Command okCommand;
private Command exitCommand;
private Command exitCommand1;
private Command backCommand1;
private SimpleTableModel simpleTableModel;
public Fall_Sem() {
    System.out.println("Fall Sem");
}

private void initialize() {                                         
    // write pre-initialize user code here

    // write post-initialize user code here
}                            
public void startMIDlet() {                                      
    // write pre-action user code here
    switchDisplayable(null, getForm());                                        
    // write post-action user code here
}                             
public void resumeMIDlet() {                                       
    // write pre-action user code here

    // write post-action user code here
}                              
public void switchDisplayable(Alert alert, Displayable nextDisplayable) {                                            
    // write pre-switch user code here
    Display display = getDisplay();                                               
    if (alert == null) {
        display.setCurrent(nextDisplayable);
    } else {
        display.setCurrent(alert, nextDisplayable);
    }                                             
    // write post-switch user code here
}                                   
public Form getForm() {
    if (form == null) {                                 
        // write pre-init user code here
        form = new Form("form", new Item[] getChoiceGroup()});                                    
        form.addCommand(getBackCommand());
        form.addCommand(getOkCommand());
        form.addCommand(getExitCommand());
        form.setCommandListener(this);                                  
        // write post-init user code here
    }                         
    return form;
}
public ChoiceGroup getChoiceGroup() {
    if (choiceGroup == null) {                                 
        // write pre-init user code here
        choiceGroup = new ChoiceGroup("Choices", Choice.EXCLUSIVE);                                    
        choiceGroup.append("Time Table", null);
        choiceGroup.append("Exam Schedule", null);
        choiceGroup.append("Marks", null);
        choiceGroup.setSelectedFlags(new boolean[]{false, false, false});                                  
        // write post-init user code here
    }                         
    return choiceGroup;
}
public void commandAction(Command command, Displayable displayable) {                                               
    // write pre-action user code here
    if (displayable == form) {                                           
        if (command == backCommand) {                                         
            // write pre-action user code here

            // write post-action user code here
        } else if (command == exitCommand) {                                          
            // write pre-action user code here
            exitMIDlet();                                           
            // write post-action user code here
        } else if (command == okCommand) {                                          
            // write pre-action user code here
            switchDisplayable(null, getForm1());                                           
            // write post-action user code here
        }                                           
    } else if (displayable == form1) {
        if (command == backCommand1) {                                         
            // write pre-action user code here

            // write post-action user code here
        } else if (command == exitCommand1) {                                          
            // write pre-action user code here
            exitMIDlet();                                            
            // write post-action user code here
        }                                                   
    }                                                 
    // write post-action user code here
}                                             
public Form getForm1() {
    if (form1 == null) {                                 
        // write pre-init user code here
        form1 = new Form("form1", new Item[]{getTableItem()});                                    
        form1.addCommand(getBackCommand1());
        form1.addCommand(getExitCommand1());
        form1.setCommandListener(this);                                  
        // write post-init user code here
    }                         
    return form1;
}
public TableItem getTableItem() {
    if (tableItem == null) {                                 
        // write pre-init user code here
        tableItem = new TableItem(getDisplay(), "tableItem");                                   
        // write post-init user code here

    }                         
    return tableItem;
}
public Command getBackCommand() {
    if (backCommand == null) {                                 
        // write pre-init user code here
        backCommand = new Command("Back", Command.BACK, 0);                                   
        // write post-init user code here
    }                         
    return backCommand;
}
public Command getOkCommand() {
    if (okCommand == null) {                                 
        // write pre-init user code here
        okCommand = new Command("Ok", Command.OK, 0);                                   
        // write post-init user code here
    }                         
    return okCommand;
}
public Command getExitCommand() {
    if (exitCommand == null) {                                 
        // write pre-init user code here
        exitCommand = new Command("Exit", Command.EXIT, 0);                                   
        // write post-init user code here
    }                         
    return exitCommand;
}
public Command getBackCommand1() {
    if (backCommand1 == null) {                                 
        // write pre-init user code here
        backCommand1 = new Command("Back", Command.BACK, 0);                                   
        // write post-init user code here
    }                         
    return backCommand1;
}
public Command getExitCommand1() {
    if (exitCommand1 == null) {                                 
        // write pre-init user code here
        exitCommand1 = new Command("Exit", Command.EXIT, 0);                                   
        // write post-init user code here
    }                         
    return exitCommand1;
}
public SimpleTableModel getSimpleTableModel() {
    if (simpleTableModel == null) {                                 
        // write pre-init user code here
        simpleTableModel = new SimpleTableModel(null, null);                                   
        // write post-init user code here
    }                         
    return simpleTableModel;
}
public Display getDisplay() {
    return Display.getDisplay(this);
}

public void exitMIDlet() {
    switchDisplayable(null, null);
    destroyApp(true);
    notifyDestroyed();
}

public void startApp() {
    if (midletPaused) {
        resumeMIDlet();
    } else {
        initialize();
        startMIDlet();
    }
    midletPaused = false;
}

public void pauseApp() {
    midletPaused = true;
}

public void destroyApp(boolean unconditional) {
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:09:36.647

我在这里的其他答案中写了一个关于如何进行基于列表选择的导航的示例： [Get event click list item in J2ME](https://stackoverflow.com/questions/14612842/get-event-click-list-item-in-j2me/14682463#14682463)

# maven - 如何将richfaces添加到maven项目

> ID：14675930
> 
> 赞同：1
> 
> 时间：2013-02-03T18:44:22.213
> 
> 标签：maven, jsf-2, richfaces, glassfish-3

我正在尝试在我的应用程序中使用弹出组件。我使用 JSF，Glassfish。这是我的**pom.xml**：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>pl.karta</groupId>
    <artifactId>epacjent</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>epacjent</name>

    <properties>       
        <org.richfaces.bom.version>4.2.2.Final</org.richfaces.bom.version>
        <gae.version>1.4.2</gae.version>
    </properties>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.richfaces</groupId>
                <artifactId>richfaces-bom</artifactId>
                <version>${org.richfaces.bom.version}</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <dependencies>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>eclipselink</artifactId>
            <version>2.3.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>javax.persistence</artifactId>
            <version>2.0.3</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>org.eclipse.persistence.jpa.modelgen.processor</artifactId>
            <version>2.3.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url>
            <id>eclipselink</id>
            <layout>default</layout>
            <name>Repository for library Library[eclipselink]</name>
        </repository>
    </repositories>
</project> 
```

和**web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.SKIN</param-name>
        <param-value>blueSky</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.CONTROL_SKINNING</param-name>
        <param-value>enable</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
... 
```

我有这个警告：

```
WARNING: JSF1091: No mime type could be found for file ajax.reslib.  To resolve this, add a mime-type mapping to the applications web.xml.
WARNING: JSF1091: No mime type could be found for file base-component.reslib.  To resolve this, add a mime-type mapping to the applications web.xml.
WARNING: JSF1091: No mime type could be found for file popupPanel.ecss.  To resolve this, add a mime-type mapping to the applications web.xml. 
```

我对所有这些东西真的很陌生，有人能告诉我我的配置应该是什么样子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T22:07:32.880

首先，您的问题是**您根本没有添加依赖**项。您只添加了 BOM，但您需要添加其他依赖项，如[使用 Richfaces 和 Maven](https://community.jboss.org/wiki/HowToAddRichFaces4xToMavenBasedProject)的教程所述。添加 BOM 时，您只是声明要使用的库版本，而不是附加依赖项本身。

```
<dependency>
    <groupId>org.richfaces.ui</groupId>
    <artifactId>richfaces-components-ui</artifactId>
</dependency>
<dependency>
    <groupId>org.richfaces.core</groupId>
    <artifactId>richfaces-core-impl</artifactId>
</dependency> 
```

稍后，您只需在文件中指定**Faces Servlet**`web.xml`即可让**RichFaces**工作。也看看[这个条目](http://www.mastertheboss.com/richfaces/richfaces-4-quick-tutorial)。

# java - frame.repaint() 无法正常工作

> ID：14675934
> 
> 赞同：1
> 
> 时间：2013-02-03T18:45:05.823
> 
> 标签：java, swing

我正在尝试制作一个 Java 应用程序，该应用程序在单击按钮时会在特定时间段内在面板中显示随机颜色。

但我的问题是，单击按钮后，框架的颜色仅更改一次，并且按钮的标题也不会更改为“U Clicked me”。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

class MyDrawPanel extends JPanel {

    @Override
    public void paintComponent(Graphics g) {
        // g.fillRect(0, 0, this.getWidth(), this.getHeight())
        int red = (int) (Math.random() * 255);
        int green = (int) (Math.random() * 255);
        int blue = (int) (Math.random() * 255);
        Color randomizecolor = new Color(red, green, blue);
        g.setColor(randomizecolor);
        g.fillRect(0, 0, this.getWidth(), this.getHeight());
    }
}

public class CustomWidget implements ActionListener {

    JButton button;
    JFrame frame;

    public void Gui() {
        frame = new JFrame();
        MyDrawPanel pan = new MyDrawPanel();
        button = new JButton("-- Click Me to Change Me --");
        frame.add(BorderLayout.SOUTH, button);
        frame.add(BorderLayout.CENTER, pan);
        button.addActionListener(this);
        frame.setSize(500, 500);
        frame.setTitle("Random Color GUI");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public void asd() {
        button.setText("U clicked Me");
        for (int i = 0; i < 150; i++) {
            frame.repaint();
            try {
                Thread.sleep(10);
            } catch (Exception x) {
            }
        }
        button.setText("Again Click me");
    }

    public static void main(String[] args) {
        CustomWidget obj = new CustomWidget();
        obj.Gui();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        this.asd();
        // this.button.setText("-- Click Me to Change Me --");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:47:12.280

不要调用`Thread.sleep(...)`Swing 事件线程，因为所有这些都会使整个 GUI 进入睡眠状态，包括它的绘画能力。而是使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。检查教程的链接。顺便说一句，10 毫秒非常短，对于时间片或人们来说可能太短了。另外，我会在 Swing Timer 的 ActionListener 中而不是在`paintComponent(...)`方法本身中随机化并创建新的颜色。

编辑：
请注意，Swing 使用单个线程，即事件调度线程或 EDT，来更新所有图形并执行所有用户交互。如果您通过调用`Thread.sleep(...)`或调用该线程上的一段长时间运行的代码使该线程进入睡眠状态，那么整个 Swing 应用程序将进入睡眠状态，并且在睡眠结束之前不会发生任何用户交互或 Swing 绘图。解决方案的关键是在后台线程上执行所有长时间运行的任务。Swing Timer 将为您执行此操作，本教程将向您展示如何操作。

编辑2：
在半伪代码中：

```
 button.setText(BTN_CLICKED_TEXT);
  // TIMER_DELAY is some constant int
  Timer myTimer = new Timer(TIMER_DELAY, new ActionListener() {
     private int count = 0;

     @Override
     public void actionPerformed(ActionEvent timerActionEvt) {
        if the count variable is >= some maximum count
          // stop the timer by calling stop on it
          // I'll show you this one since it is a bit complex
          ((Timer)timerActionEvt.getSource()).stop();
          // set the button text to its original state
          // return from this method

        else 
          // randomize pan's color and repaint it
          count++; // increment the counter variable
     }
  });

  myTimer.start(); 
```

请注意，必须在 Gui 类中声明 pan 变量，而不是在其构造函数中声明，以便 Timer 能够访问它。

# uml - 如何在企业架构师模板编辑器上进行交叉引用？

> ID：14675940
> 
> 赞同：0
> 
> 时间：2013-02-03T18:45:36.277
> 
> 标签：uml, use-case, enterprise-architect

我正在做一些关于企业架构师的用例规范。当我在 Word 2010 上编写这些文档时，我使用交叉引用（超链接）来显示文档另一侧的业务规则，而无需让读者向下滚动文档。我真的很想知道企业架构师是否有这些功能或类似的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:59:16.537

在模板编辑器中，您可以通过右键单击模板并选择插入->超链接来插入超链接。但这是针对 URL 的。

在您的图表中，您可以创建引用其他对象的超链接元素。但这些在 RTF/PDF 输出中无效。

但是，如果您在元素的注释中创建超链接，这些将在 PDF 报告中起作用。

[用户指南](http://www.sparxsystems.com/enterprise_architect_user_guide/9.3/reporting/documentingprojects.html)或[EA 论坛](http://www.sparxsystems.com/cgi-bin/yabb/YaBB.cgi)可能会提供进一步的帮助。

如果您问这样的问题，请描述您使用的版本、您的操作系统以及您已经尝试过什么来解决您的问题。

# visual-studio-lightswitch - LightSwitch - 具有多个一对多到同一个子实体的列表详细信息屏幕

> ID：14675942
> 
> 赞同：1
> 
> 时间：2013-02-03T18:45:42.953
> 
> 标签：visual-studio-lightswitch

我在同一个子实体上有多个一对多关系：

假设我有一个 Product 实体和一个 Brand 实体，每个实体都与一个媒体实体具有 1:N 关系（用于参考图像视频等），这使得表格 Media 在 Product & Brand 上有两个 FK 列，如果第一个被设置，另一个应该为 null 这些实体通过 Odata 公开。

在 LS 中，当我为品牌实体创建 listDetail 屏幕时，一切正常，我可以添加媒体网格以查看与我的品牌相关的媒体。

但我不能添加媒体，按钮是灰色的。

当我尝试使用自己的 Modalwindows（基于 Yann Durand 的代码）覆盖媒体网格上的“添加”按钮时，出现错误：“未授权在此集合上添加新元素”是否意味着 VisualCollection 媒体是只读的？

我怀疑这可能与媒体表上有几个 FK 的事实有关。

我的设计有缺陷还是 LS 无法开箱即用？

感谢您的帮助

阿克塞尔

# matomo - 如何在外部潜在客户表单上设置跟踪像素

> ID：14675948
> 
> 赞同：1
> 
> 时间：2013-02-03T18:46:05.837
> 
> 标签：matomo

我目前在我的一个网站上使用 Piwik 和 Clicky。现在，我跟踪输入邮政编码并点击我的传出广告链接之一的访问者。但是，我将实施一个外部弹出潜在客户表单来收集广告数据（姓名、地址、邮政编码、年龄、电子邮件等）。我知道我可以使用 Piwik 或 Clicky 跟踪谁访问了邮政编码表单，但我不知道如何为潜在客户表单设置跟踪像素。

我能找到的唯一一个我认为可用于 piwik 的文档将我指向此[页面](http://piwik.org/docs/tracking-api/#toc-two-tracking-methods-image-tracking-or-using-the-api.) 我的猜测是我需要合并 Advanced Image Tracker。我没有找到任何可以用于 Clicky 的东西。

可以在[此处找到潜在客户表单的示例](https://www.healthplansamerica.org/insurance/cheaphealthinsr/index.php?Referrer=JS&Subreferrer=CHI&zip=77449&Go.x=0&Go.y=0)

有人会善意地指出我正确的方向吗？

我希望有一种方法可以使用这两种软件来完成这项工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:53:40.593

正常的 Piwik 跟踪像素应该可以工作，如下所示

`<img src="http://localhost/piwik/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />`

您还可以通过添加自定义变量等来获得创意。此处的详细信息：http: [//piwik.org/docs/tracking-api/reference/#toc-tracking-api-endpoint](http://piwik.org/docs/tracking-api/reference/#toc-tracking-api-endpoint)

# vb.net - 自定义配置处理程序异常

> ID：14675955
> 
> 赞同：0
> 
> 时间：2013-02-03T18:46:37.073
> 
> 标签：vb.net, web-config

我正在尝试使用以下网页上的信息在 web.config 中创建自定义配置部分：http: [//msdn.microsoft.com/en-gb/library/ms228056.aspx](http://msdn.microsoft.com/en-gb/library/ms228056.aspx)

这是代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Try
            Dim config As Hashtable = DirectCast(System.Configuration.ConfigurationManager.GetSection("myCustomGroup/myCustomSection"), Hashtable)
        Catch ex As Exception

        End Try
    End Sub 
```

这是web.config：

```
<configuration>
    <!-- Other configuration settings, like <system.web> -->
        <configSections>
            <sectionGroup name="myCustomGroup">
                <section name="myCustomSection" type="MyConfigSectionHandler.MyHandler, MyCustomConfigurationHandler"/>
            </sectionGroup>
            <!-- Other <section> and <sectionGroup> elements. -->
        </configSections>

      <!-- Configuration section settings area. -->
      <myCustomGroup>
        <myCustomSection myAttrib1="Clowns">
          <myChildSection
              myChildAttrib1="Zippy"
              myChildAttrib2="Michael Zawondy "/>
        </myCustomSection>
      </myCustomGroup>
</configuration> 
```

MyHandler.vb 可以在网页上找到，这里就不贴代码了。我面临一个例外：`{"An error occurred creating the configuration section handler for myCustomGroup/myCustomSection: Could not load type 'MyConfigSectionHandler.MyHandler' from assembly 'MyCustomConfigurationHandler'. (C:\Users\Ian\Desktop\WebSite3\web.config line 13)"}`

网上也有类似的问题（例如这里：[http](http://csd.codeplex.com/discussions/234031) ://csd.codeplex.com/discussions/234031 ），回答者建议在 Section Group Type 元素中没有指定程序集名称，但在我的情况下是这样。为什么我看到这个异常？MyCustomConfigurationHandler.dll 位于网站的 bin 文件夹中。

# java - 数组不起作用阅读不能解释太多太解释

> ID：14675958
> 
> 赞同：-3
> 
> 时间：2013-02-03T18:46:47.110
> 
> 标签：java, netbeans, stack-trace

编写了一个程序来验证一排相邻的座位数量。座位要么已预订，要么可用，用 0 或 1 表示。该程序在大多数情况下都有效。如果一排有所需数量的座位可用，它将输出一条消息说它。问题是当所需的座位数量不可用或超过 6 个时。我该如何解决这个问题？

```
package javaapplication2;
import java.util.*;

public class JavaApplication2 {

    public static void main(String[] args) {
       Scanner input = new Scanner(System.in);
       System.out.println("Enter the amount of people in your group, up to 6");
       int num = input.nextInt();

       int highest = num - 1;

         String available = "";
         String booking = " ";       

       int[] RowA = {0,0,1,0,0,0,1,0,0,1};

        for (int i = 0; i < RowA.length; i++) {
             if (RowA[i] == 0) {
                 available = available + (i + 1);

             }

             if (available.length() > booking.length()) {
                 booking = available;

             }else if (RowA[i] == 1) {
                 available = "";

             }
         }

         char low = booking.charAt(0);
         char high = booking.charAt(highest);

        if (num <= booking.length()) {
            System.out.println("There are seats from " + low + " - " + high + ".");
            System.out.println(booking);
        }
        else {
            System.out.println("Sorry, the desired seat amount is not available. The maximum amount on Row is " + booking.length());

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:56:41.670

首先 - 将堆栈跟踪添加到您的问题中。
第二 - 阅读堆栈跟踪：它为您提供有关您的代码有什么问题的线索。
第三 - 调试器是你最好的朋友 :)

实际的例外是：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 5
    at java.lang.String.charAt(String.java:686)
    at JavaApplication2.main(JavaApplication2.java:35) 
```

第 35 行：`char high = booking.charAt(highest);`

所以问题是即使`booking`字符串比你需要的小，你也试图计算高。你应该移动计算`high`和`low`内部`if`语句。这样你就可以确定它`booking`不比你需要的短：

```
if (num <= booking.length()) {
    char low = booking.charAt(0);
    char high = booking.charAt(highest);
    System.out.println("There are seats from " + low + " - " + high + ".");
    System.out.println(booking);
} else {
    System.out.println("Sorry, the desired seat amount is not available. The maximum amount on Row is " + booking.length());
} 
```

# java - Spring MVC - 动态错误处理页面

> ID：14675964
> 
> 赞同：3
> 
> 时间：2013-02-03T18:47:34.913
> 
> 标签：java, spring, spring-mvc, error-handling

有没有办法处理所有可能的错误代码，同时仍将代码传递给我的 .jsp？在这里，我有一个错误页面传递 404，它被添加到模型中。不是为每个可能的错误代码添加错误页面，有没有更好的方法可以捕获错误并将代码传递给控制器​​/jsp文件？

控制器

```
@RequestMapping(value="/error/{code}", method=RequestMethod.GET)
    public String error(@PathVariable("code") String code, Model model)
    {
        model.addAttribute("code", code);
        return "error";
    } 
```

web.xml

```
<error-page>
    <error-code>404</error-code>
    <location>/error/404</location>
</error-page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:13:15.907

您可以在 Spring 中注册一个通用异常解析器来捕获所有异常并转换为您的`error.jsp`.

使用由您的业务逻辑抛出的专用 RuntimeException，它有一个`code`成员：

```
public class MyException extends RuntimeException {
    private final Integer errorCode;

    public MyException(String message, Throwable cause, int errorCode) {
        super(message, cause);
        this.errorCode = errorCode;
    }
} 
```

`code`或者在异常消息中使用现有的 RuntimeException 实例。

提取`code`和/或消息并相应地设置 HttpServletResponse 状态和 ModelAndView。

例如：

```
import org.springframework.stereotype.Component;
import org.springframework.web.servlet.DispatcherServlet;
import org.springframework.web.servlet.HandlerExceptionResolver;
import org.springframework.web.servlet.ModelAndView;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Component(DispatcherServlet.HANDLER_EXCEPTION_RESOLVER_BEAN_NAME)
public class GenericHandlerExceptionResolver implements HandlerExceptionResolver {

    @Override
    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception e) {
        ModelAndView mav = new ModelAndView("error");

        if (e instanceof MyException) {
            MyException myException = (MyException) e;
            String code = myException.getCode();

            // could set the HTTP Status code
            response.setStatus(HttpServletResponse.XXX);

            // and add to the model
            mav.addObject("code", code);
        } // catch other Exception types and convert into your error page if required

        return mav;
    }
} 
```

# sql-server - 无需备份即可恢复数据库

> ID：14675969
> 
> 赞同：0
> 
> 时间：2013-02-03T18:47:58.780
> 
> 标签：sql-server, database-backups, database-restore

我想知道是否有办法在某个日期恢复数据库的状态。不幸的是，我没有备份。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T19:01:24.333

如果没有任何类型的备份，您将无能为力 - 因为先前的状态已被检查点清除（即使在完全恢复中，[它也像简单的恢复一样，直到您费心进行备份](http://www.sqlskills.com/blogs/paul/new-script-is-that-database-really-in-the-full-recovery-mode/)）。这种情况正是备份的用途。如果您在没有降落伞的情况下跳下飞机，请不要费心寻找开伞绳......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T21:51:34.713

正如 Aaron 上面所说，您可以在这里做的事情很少。

为什么需要将数据库恢复到以前的状态？如果您删除了一些数据并想要撤消事务，如果您的数据库处于完全恢复模式，您可能可以恢复一些数据。

如果是这种情况，您可以尝试使用[SQL Log Rescue](http://www.red-gate.com/products/dba/sql-log-rescue/)或[ApexSQL Log读取事务日志](http://www.apexsql.com/sql_tools_log.aspx)

# android - 如何在 htmlcleaner 或 jSoup 中的标签中提取文本

> ID：14675972
> 
> 赞同：1
> 
> 时间：2013-02-03T18:48:28.710
> 
> 标签：android, htmlcleaner

我是 Android 开发的新手，无法理解 HtmlCleaner 或 jSoup 基础知识。

我有一个页面，例如

```
<html><body>
....(large code here)....
<b>Hello World! </b> 
....(large code here)....
</body> </html> 
```

如何提取`<b>..</b>`标签中的单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T21:23:45.097

如果您尝试使用 Jsoup，这应该很容易

```
Document doc = Jsoup.connect("http://www.w3schools.com/tags/tag_b.asp").get();
Element firstBoldElement = doc.select("b").first();
System.out.println("Bold Text is : "+firstBoldElement.text()); 
```

您必须在上面的代码中添加适当的异常处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T21:27:19.077

使用 jSoup。请原谅任何错误，我是凭记忆写的。

```
Document doc = Jsoup.parse(pageString);
Elements eles = doc.getElementsByTag("b");
for(int i = 0; i < eles.size(); i++)
{
    System.out.println(eles.get(i).text());
} 
```

# database - Spring MVC (Spring roo) Hibernate 固定装置

> ID：14675973
> 
> 赞同：0
> 
> 时间：2013-02-03T18:48:34.623
> 
> 标签：database, spring, hibernate, model-view-controller, fixtures

我想知道在 spring mvc + hibernate 应用程序中添加固定装置以用于开发目的的最佳方法是什么。基本上，这个想法是当应用程序在“开发”环境中加载时，一组固定装置应该预先填充数据库。有几个考虑因素是我不想使用 DbUnit 或加载硬编码的 sql，而是想使用实体管理器在应用程序内部生成固定装置，以便在需要时使用某些服务来生成信息（让假设我想创建一些用户固定装置，id 喜欢能够使用 salt 服务等来生成密码等等）。理想情况下，我希望能够为每种域类型将不同类中的固定装置分开。到目前为止，我还没有找到任何有帮助的东西？我很感激任何帮助，请记住，我是一个完整的 Spring 新手，来自 PHP 背景，所以请详细说明应该去哪里：S。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:04:46.190

这是为了开发吧？不只是用于单元或集成测试？如果是这样，我想我会创建一个带有 main 的 Java 类，然后将您的数据创建代码放在那里。您还可以使该类与数据填充 bean 自动连接。然后让所有数据填充器实现相同的接口。确保你的主要方法是这样注释的：

```
@ContextConfiguration( "classpath:/META-INF/spring/applicationContext.xml") 
```

这实际上将为您的静态主要方法加载弹簧配置。

然后，您可以在每次擦除数据库后让构建运行它，或者在需要填充数据时手动调用它。

如果这只是用于单元测试，那么我会在您的测试源路径中创建一个数据填充器，然后从您的测试 #setUp 方法中调用它。

考虑以下：

```
public interface Populator {
   void run();
}

@Repository
public class UserPopulator {
   @PersistenceContext
   private EntityManager em;

   @Transactional
   public void run() {
      create some users
      em.persist( users );
   }
}

@Repository
public class ThingPopulator {
   @PersistenceContext
   private EntityManager em;

   @Transactional
   public void run() {
      create some thing
      em.persist( thing );
   }
}

@Configurable
@ContextConfiguration( "classpath:/META-INF/spring/applicationContext.xml")
public class DataPopulator {
   @Autowired
   private List<Populator> populators;

   public void run() {
      for ( Populator populator : populators ) {
         populator.run();
      }
   }

   public static void main(String[] args) {
      new DataPopulator().run();
   }
} 
```

然后你可以运行这个类进行开发。如果您有一个仅针对用户的单元测试，您还可以执行以下操作：

```
public class UserTest {
   @Before
   public void setUp() {
      new UserPopulator().run();
   }

   // tests
} 
```

或类似的东西。

# gcc - GCC atomic builtins 和 volatile

> ID：14675975
> 
> 赞同：4
> 
> 时间：2013-02-03T18:48:56.063
> 
> 标签：gcc, thread-safety, volatile, atomicreference

我在多线程程序中使用了一些全局结构，一些成员被多个线程同时修改，而另一些则不是。

我没有定义任何 volatile 成员，但无论何时我将此成员用于读写目的，我都会使用原子内置函数，例如 __sync_fetch_and_add。

问题是，我应该定义这个成员还是整个 struct volatile？

我认为编译器必须访问内存而不是任何寄存器，因为这个内置函数（锁定前缀），我是否应该担心其他不会导致竞争条件的成员。

我检查了我的编译器（gcc 4.6.2）的汇编输出，看来我的假设是正确的。

这是测试代码。

```
int sum = 0;

for (i=0; i<2000000000; i++) {
    sum += i;
} 
```

汇编输出（-O2 -S -masm=intel）

```
L2:
    add edx, eax
    inc eax
    cmp eax, 2000000000
    jne L2 
```

所以编译器永远不会访问内存（eax = i，edx = sum）

这是第二个测试代码。

```
volatile int sum = 0;

for (i=0; i<2000000000; i++) {
    sum += i;
} 
```

汇编输出

```
L2:
    mov edx, DWORD PTR [esp+28]
    add edx, eax
    mov DWORD PTR [esp+28], edx
    inc eax
    cmp eax, 2000000000
    jne L2 
```

编译器每次都按预期访问内存求和。

最终代码，我的方式。

```
int sum = 0;

for (i=0; i<2000000000; i++) {
    __sync_fetch_and_add(&sum , i);
} 
```

程序集输出。

```
L2:
    lock add    DWORD PTR [esp+28], eax
    inc eax
    cmp eax, 2000000000
    jne L2 
```

甚至没有像以前（edx）那样的临时寄存器，编译器每次都访问内存。

因此，我不定义 volatile 任何由多个线程修改或一次仅由一个线程修改的成员。我安全吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T20:10:26.943

是的，你很安全。文档没有说它们应该是易变的，所以它们不应该。

`__sync`* 函数适当地充当内存屏障，因此是`volatile`多余的。而且它无论如何都不允许使用除`__sync`* 函数之外的任何其他东西（只有`__sync`* 函数生成`lock`前缀）。

注意：`__sync`* 函数在 gcc 4.7 中被弃用，支持 C++11 风格的`__atomic`* 类型，但 gcc 4.6 还没有这些。

# gcc - make 给出“命令在第一个目标之前开始”

> ID：14675976
> 
> 赞同：0
> 
> 时间：2013-02-03T18:49:13.780
> 
> 标签：gcc, makefile

我正在尝试使用这个 makefile，并按照给出的方式输入它，但如下所示，它在第 2 行引发了“缺少分隔符”错误。

```
/usr/bin/gcc -pipe -Wall -O3 -fomit-frame-pointer -march=native  pidigits.c -o pidigits.gcc_run -lgmp
rm pidigits.c 
```

我查看了该错误并在“rm”运算符之前添加了一个选项卡，但随后它给出了“命令在第一个目标之前开始”错误。我尝试在每行之前添加制表符，以及在 -pipe 和 rm 之前添加制表符，但没有任何效果。有什么建议么？我确定我只是遗漏了一些明显的东西......这是我第一次尝试编写makefile。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:34:33.150

如果我没看错，你希望你的 makefile 看起来像：

```
foo_rule:
\t/usr/bin/gcc -pipe -Wall -O3 -fomit-frame-pointer -march=native  pidigits.c -o pidigits.gcc_run -lgmp; \
rm pidigits.c 
```

其中 \t 是一个制表符。

# java - 在 Java 中从 XML 中获取属性值

> ID：14675978
> 
> 赞同：0
> 
> 时间：2013-02-03T18:49:21.400
> 
> 标签：java, android, xml-parsing

我正在尝试将以下站点中的一些数据解析到我正在创建的 Android 应用程序

[TFL 管数据](http://cloud.tfl.gov.uk/TrackerNet/LineStatus/IncidentsOnly)

此提要中的数据不断更新，可以包含从无到 15/16 项的任何内容。每个项目的基本格式如下：

```
<ArrayOfLineStatus> - BEGINNING OF XML DOCUMENT    
    <LineStatus ID="10" StatusDetails="No service this weekend due to planned engineering work.">
        <BranchDisruptions/>
        <Line ID="7" Name="Circle"/>
        <Status ID="CS" CssClass="DisruptedService" Description="Planned Closure" IsActive="true">
            <StatusType ID="1" Description="Line"/>
        </Status>
    </LineStatus>
<ArrayOfLineStatus> - END OF XML DOCUMENT 
```

我需要遍历整个并提取 Line 中的“Name”属性和“Status”中的“Description”属性的值。所以在上面我会拉“圈子”和“计划关闭”。到目前为止，我所做的课程如下：

**主班**

```
 public class TubeStatusXMLParsing  extends Activity {

        static final String baseURL = "http://cloud.tfl.gov.uk/TrackerNet    
                                          /LineStatus/IncidentsOnly";
       /** Called when the activity is first created. */
       @Override
       public void onCreate(Bundle icicle) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().detectAll().penaltyLog().build(); 
            StrictMode.setThreadPolicy(policy);
            super.onCreate(icicle);
            setContentView(R.layout.tube_status);
            getStatus();        
            }

       public void getStatus() {
        // TODO Auto-generated method stub
        try{
            URL website = new URL(baseURL);
            //getting xmlreader to parse data
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            HandlingXMLStuff doingWork = new HandlingXMLStuff();
            xr.setContentHandler(doingWork);
            xr.parse(new InputSource(website.openStream()));
            String listofStatuses = doingWork.getInformation();
            circleStatus.setText(listofStatuses);
        }catch (Exception e){
            circleStatus.setText("error");
        }
    }
} 
```

**处理 XML**

```
import java.util.ArrayList;
import java.util.List;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.sax.Element;
import android.sax.RootElement;

public class HandlingXMLStuff extends DefaultHandler {

    private ArrayList<String>statuses = null;
    String status;
    String lineName;

    public String getInformation(){
        return statuses.get(0);
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        if(qName.equalsIgnoreCase("ArrayOfLineStatus")){
            statuses = new ArrayList<String>();
        }else if(qName.equalsIgnoreCase("Status")){
            status = attributes.getValue("Status");
            statuses.add(status);
            }

        } 
```

对此的任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:11:10.740

您使用 Attributes 对象走在正确的轨道上，但您必须使用元素内属性的索引位置。

因此，您需要在 attributes.getName() 方法上使用 for 循环遍历元素的属性，直到 attributes.getName(i).equals("Name")。确定索引后，只需使用属性 attributes.getValue(i)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:09:40.957

很难理解你需要什么，但你得到的属性是错误的。我认为它应该像这样

```
else if (qName.equalsIgnoreCase("Status")) {
    object = new Status();
    object.id = attributes.getValue("ID");
    object.cssClass = attributes.getValue("CssClass");
    object.isActive = attributes.getValue("IsActive");
    object.description = attributes.getValue("Description");
}
else if (qName.equalsIgnoreCase("StatusType")) {
    object.typeId = attributes.getValue("ID");
    //etc, and maybe the StatusType should be a nested class of Status and stored in array field
} 
```

在你的 endElement

```
if (qName.equalsIgnoreCase("Status")) {
    statuses.add(object);
} 
```

我懒得写整个东西，我写它只是为了展示如何获取属性。另外，我更喜欢使用[android.sax](http://developer.android.com/reference/android/sax/package-summary.html)而不是直接创建 DefaultHandler。

# nginx - 在一个 vps 上为多个网站配置 nginx

> ID：14675981
> 
> 赞同：0
> 
> 时间：2013-02-03T18:49:38.880
> 
> 标签：nginx

我今天读了很多关于这个的文章，但我不明白我做错了什么。我正在尝试使用一个带有 nginx 的 vps 将两个网站（site1.com、site2.com）放在一起。

这是我的 nginx.conf

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

conf.d 目录是空的，并且在启用站点的目录中有我的配置：

```
server {
        listen   80 default;
        root /home/site1/www;

        access_log  /home/site1/logs/nginx.access.log;

        server_name site1.com;

        location / {
                index index.php index.html index.htm;
                try_files $uri $uri/ /index.php?$args;
        }

        location ~ \.php$ {
                fastcgi_pass   127.0.0.1:9000;
                fastcgi_index  index.php;
                fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
                include        fastcgi_params;
        }
} 
```

和

```
server {
        listen   80;
        root /home/site2/www;

        access_log  /home/site2/logs/nginx.access.log;

        server_name site2.com;

        location / {
                index index.php index.html index.htm;
                try_files $uri $uri/ /index.php?$args;
        }

        location ~ \.php$ {
                fastcgi_pass   127.0.0.1:9000;
                fastcgi_index  index.php;
                fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
                include        fastcgi_params;
        }
} 
```

当然 /home/site1/www 和 /home/site2/www 都包含网站文件。

现在，如果我尝试打开 site1.com，这很有趣：

我得到：无法打开 site1.com:81 错误

我究竟做错了什么？为什么这个 81 端口会添加到 URL 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T09:43:16.893

我想只需 在site1.com的服务器中将*listen 80*更改为 *listen 81*

# datomic - Datomic mem 或 free 中的分区不起作用？

> ID：14675982
> 
> 赞同：0
> 
> 时间：2013-02-03T18:49:57.967
> 
> 标签：datomic

我正在尝试在 Datomic（免费或内存）中创建一个分区，但是，当查询时，新分区没有出现，并且在尝试使用它时出现异常。这种行为是自由模式或内存模式固有的吗？

```
(defn create-mdb []
  (def uri "datomic:mem://localhost:4334//billing")
  (d/create-database uri)
  (def conn (d/connect uri))
  (def mdb (db conn))
)

(defn create-partition []
  (d/transact conn [
    {:db/id (d/tempid :db.part/db)
     :db/ident :billing
     :db.install/_partition :db.part/db}
]))

(defn partitions []
  (d/q '[:find ?ident 
     :where 
     [:db.part/db :db.install/partition ?p]
     [?p :db/ident ?ident]
   ] mdb))

=> (create-mdb)
#'ww.billing/mdb
=> (create-partition)
#<promise$settable_future$reify__4637@714cf72c: {:db-before datomic.db.Db@193e901b, :db-after datomic.db.Db@eeb64b5b, :tx-data #<ArrayList [datomic.db.Datum@a15d2d7d, datomic.db.Datum@9f207ac0, datomic.db.Datum@7e4]>, :tempids {-9223367638809264704 62}}>
=> (partitions)
#<HashSet [[:db.part/db]]> 
```

请问有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:14:44.070

在查询中，您引用了一个旧的数据库值，在您调用**create-partition**之前。因此，您看不到对数据库所做的更改。

事实上，您正被 Datomic 最有用和最显着的功能之一所困扰：“时间旅行”的能力。

如果您想查看数据库中的最新数据，您应该在查询之前获取一个新的数据库值，例如。而不是函数**分区中的****mdb**，你应该写**(db conn)**。

 ****顺便说一句，一般来说，如果您经常在函数内部使用**def** ，那么您就是在为自己找问题，因为**def**用于声明，而不是一般赋值。****

# php - 当它实际上是一个php时，如何从我的服务器发送一个JS文件？

> ID：14675987
> 
> 赞同：2
> 
> 时间：2013-02-03T18:50:16.210
> 
> 标签：php, javascript

我需要我的服务器来发送 JS 文件，但我需要它实际上是 PHP 生成的文件。
我正在使用 Apache 和 PHP。

所以这个函数名为

```
doSomething(){
}; 
```

可

```
doSomething(){
         <?php
               if(registeredUser()){
                    echo "Doing something!";
               }
         ?> 
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:52:35.443

1.  给文件一个 php 扩展名，但像普通 JavaScript 一样加载它

    `<script type="text/javascript" src="/javascript.php"></script>`

2.  在 PHP 文件中发送正确的内容类型：

    `header("content-type: text/javascript");`

这允许您的服务器使用 PHP 创建 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T18:52:45.137

你不需要做任何魔术。浏览器不关心是什么创建了 Javascript，只要 Javascript 是有效的！

也就是说，您应该发送正确的`Content-type`标头：

```
header('Content-type: text/javascript'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:54:02.497

您可以通过简单地使用 PHP 文件作为脚本的`src`属性来做到这一点：

```
<script src="myfile.php"></script> 
```

但是，从资源的角度来看，运行另一个 PHP 脚本并不理想。另一个 PHP 进程被触发，你必须处理缓存等。

考虑您的 JS 文件中是否不能包含静态代码，并在您的主文件中设置您正在检查的条件，无论如何您都在其中运行 PHP。

在 JavaScript 文件 (myfile.js) 中：

```
function doSomething()
   { if (logged_in) do_something() } 
```

在主文件中`<head>`，执行：

```
<script>
<?php if (registeredUser()): ?>
 logged_in = true;
<?endif; ?>
<script> 
```

然后像往常一样包含静态 JS 文件。

# ruby - 命令行获取gem的路径

> ID：14675988
> 
> 赞同：1
> 
> 时间：2013-02-03T18:50:26.933
> 
> 标签：ruby, rubygems, gem

我发现[**了这个问题**](https://stackoverflow.com/questions/5226707/how-to-find-the-path-a-ruby-gem-is-installed-at-i-e-gem-lib-path-c-f-gem-bin)，但他特别说**没有**命令行。好吧，我确实想要命令行。我知道我可以跑

```
$ gem which jekyll
/usr/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll.rb 
```

但是我更喜欢类似的东西

```
$ foo jekyll
/usr/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0 
```

`foo`神秘命令在哪里。如果需要，我可以解析`gem which`，但更喜欢更优雅的东西。注意，`bundle`是不可能的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T18:53:27.557

如果您使用的是 Bundler，`bundle show <gem name>`请执行您所追求的。我将研究非捆绑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:09:05.520

由于`gem`只是一个 ruby​​ 脚本包装器，`Gem::GemRunner`并且您想要获得默认命令集中未实现的功能，我建议您创建自己的[Gem::Command](http://rubygems.rubyforge.org/rubygems-update/Gem/Command.html)。

这真的很简单，而且您可以根据需要实现任意数量的附加功能。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T11:24:50.520

获取库文件的位置很有用：

```
$ gem which "gemname" 
```

# c# - 如何以编程方式评论 infopath 中的某些输入？

> ID：14675991
> 
> 赞同：0
> 
> 时间：2013-02-03T18:50:43.840
> 
> 标签：c#, infopath, comments

有没有人有任何经验/或可以评论以编程方式写入信息路径表单？

我有一个需要编写并定期更新 InfoPath 表单的要求。我没有找到任何描述如何像 Word COM 一样以编程方式修改 infoPath 文件的资源。

我更喜欢使用 InfoPath 2007/2010。感谢您提供的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:00:35.963

InfoPath XSN 本质上只是一个[CAB 文件](http://en.wikipedia.org/wiki/Cabinet_%28file_format%29)。因此，为了以编程方式修改 InfoPath 表单，您可以将其提取（[CABLIB](http://www.codeproject.com/Articles/15397/Cabinet-File-CAB-Compression-and-Extraction)是一个不错的 CAB 压缩库），修改提取的文件，然后将其重新组装成 CAB。

但是，修改表单的可行性取决于您打算进行何种修改。

# java - 如何使用 eclipse 传递 unicode VM 参数？

> ID：14675995
> 
> 赞同：4
> 
> 时间：2013-02-03T18:51:10.833
> 
> 标签：java, eclipse, unicode

如果我从 Eclipse IDE 启动进程，我将无法读取作为 VM 参数传递的 unicode 字符串。

例如：

```
ArrayList<String> commands = new ArrayList<>();
commands.add("java");
commands.add("-classpath");
commands.add("bin");
commands.add("-Dprop=ÁÉÍÓÚ");
commands.add("test.ReadProp");
ProcessBuilder pb = new ProcessBuilder(commands);
Process process = pb.start();
BufferedReader in;
String line;
in = new BufferedReader(new InputStreamReader(process.getInputStream()));
while ((line = in.readLine()) != null)
    System.out.println(line); 
```

使用*test.ReadProp*

```
String prop = System.getProperty("prop");
System.out.println("prop: " + prop); 
```

结果是

```
prop: ?????????? 
```

唯一的解决方案似乎以`LANG`这种方式强制环境变量

```
pb.environment().put("LANG", "it_IT.UTF-8"); 
```

有更好的解决方案吗？更便携？

## 20:30更新

另一个解决方案似乎是将环境添加`LANG=it_IT.UTF-8`到启动 Eclipse 进程的 BASH 脚本中。但这不是我可以在每台计算机上控制的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:53:02.710

传递`-Dfile.encoding=UTF8`给 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T05:47:43.160

我在 Windows 10 中使用 Eclipse 版本：2019-09 R (4.13.0)，它对我有用的是：

> 控制面板->区域设置->管理选项卡->更改系统区域设置...

并设置我想使用的特定语言（在我的例子中，它是希腊语）

激活 Beta 功能搞砸了，所以我的设置是关闭的

# java - JTabbedPane 组件占据整个窗口

> ID：14675997
> 
> 赞同：2
> 
> 时间：2013-02-03T18:51:26.570
> 
> 标签：java, swing, jtabbedpane

我是 Java 和整个摇摆开发的新手。我正在处理一个带有三个选项卡的窗口，并将每个组件添加到这些选项卡中。我首先在第三个选项卡中添加了一个文本字段，但它占据了整个选项卡。我确定如果我添加其他组件它会腾出空间，但没有办法让它最初不会占用整个选项卡式窗格？

```
package literature.windows;
import java.awt.*;
import javax.swing.*;

public class MainWindow extends JFrame {

JPanel storiesPanel = new JPanel();
JPanel plotPanel = new JPanel();
JPanel charactersPanel = new JPanel();

JTextField addCharacterTextField = new JTextField("Enter Character's Name", 25);

public MainWindow() {

    setSize(800, 600);

    JTabbedPane tabs = new JTabbedPane();
    tabs.addTab("Stories", storiesPanel);
    tabs.addTab("Plot", plotPanel);
    tabs.addTab("Characters", charactersPanel);
    add(tabs);

    tabs.setTabComponentAt(2, addCharacterTextField);

    setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:55:20.647

您当前正在为该选项卡设置整个选项卡组件。相反，您需要将 添加`JTextField`到该选项卡的容器/面板中。代替

```
tabs.setTabComponentAt(2, addCharacterTextField); 
```

和

```
charactersPanel.add(addCharacterTextField); 
```