# StackOverflow 问答 13745000-13745999

# java - Why would compiler fail on duplicate class if they belong to different packages?

> ID：13745003
> 
> 赞同：0
> 
> 时间：2012-12-06T13:51:21.667
> 
> 标签：java, maven, m2e

I got this inherited project using Maven/m2e as the build automation tool. All nice & cool except that this project, checked out of SVN as is, is broken... meaning it fails to build, with several duplicate class errors:

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.1:compile (default-compile) on project myproj: Compilation failure: Compilation failure:
[ERROR] \Users\Daniel\workspace\myproj\target\generated-sources\cxf\org\package1\services\ClassA.java:[36,7] duplicate class: org.package1.services.ClassA 
```

Now, it's true that `ClassA` exists in the build environment 3 times:

```
c:/Users/Daniel/workspace/myproj/src/main/java/org/package1/services/ClassA.java
c:/Users/Daniel/workspace/myproj/src/main/java/org/package1/www/services/ClassA.java
c:/Users/Daniel/workspace/myproj/target/generated-sources/cxf/org/package1/services/ClassA.java 
```

But they belong to different packages:

*   package org.package1.services;
*   package org.package1.www.services;

So, why would the compiler complain about a duplicate class?

(Or is it Maven that's complaining?)

I am not familiar with the design considerations of the original author, so any idea how to resolve these duplicates would be much appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:55:54.537

你有*三个*类，在*两个*包中。因此，其中两个类*在*同一个包中。这两个文件：

```
.../myproj/src/main/java/org/package1/services/ClassA.java
.../myproj/target/generated-sources/cxf/org/package1/services/ClassA.java 
```

...都是有贡献`org.package1.services.ClassA`的（这是编译器抱怨的完全限定的类名，请注意）。根据您提供的信息，尚不清楚您*应该*使用哪一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T14:00:58.183

类在不同包中具有相同的**简单**名称这一事实并不重要；一个类由它的全名来考虑，全名也包含包名。在 Java 中，您实际上可以在同一个 JVM 中拥有两个具有相同**全**名的类，只要它们由两个不同的类加载器加载（这不是您的情况）。

现在您有两个具有相同名称的类，`org.package1.services.ClassA`一个是您编写的，一个是生成的；如果您同时需要它们并且不希望它们重命名，则需要为其中一个使用不同的类加载器（有点复杂，因此如果重命名生成的类会很简单）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:56:38.353

不是`ClassA`哪个被复制，而是`org.package1.services.ClassA`哪个被复制。

您需要更改它`package eorg.package1.services;`不会出现在其他文件的开头。

# html - Adding a for-statement to the content_tag() method in Ruby?

> ID：13745006
> 
> 赞同：1
> 
> 时间：2012-12-06T13:51:32.570
> 
> 标签：html, ruby-on-rails, ruby, html-table, content-tag

This is what I want to build in Ruby on Rails:

```
<tr>
<td>attribute0</td>
<input name="1" type="radio" value="1" />
<input name="1" type="radio" value="2" />
<input name="1" type="radio" value="3" />
<input name="1" type="radio" value="4" />
<input name="1" type="radio" value="5" />
<td>attribute1</td>
</tr> 
```

the number of the radio buttons should be variable. I'm using the content_tag method to generate the HTML-tags:

```
@template.content_tag(:tr, @template.content_tag(:td, ... )) 
```

Is it possible to add statement like

```
for i in 1..5 do
    @template.tag(:input, :type => 'radio', :value => i, :name => options[:name])
end 
```

as a parameter for content_tag?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:23:05.140

你可以传入一个块或使用一个助手。这是辅助方法的示例

```
def inputs(amount, name)
  [1..amount].inject('') do |html, num| 
    html + tag(:input, type: 'radio', value: num, name: name)
  end
end 
```

编辑：块的例子

文档：[http ://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)

```
content_tag :ul do
  5.times.map{ content_tag :li, 'element' }.reduce(&:+)
end

# same as

elements = 5.times.map{ content_tag :li, 'element' }.reduce(&:+)
content_tag :ul, elements 
```

# jquery - In jquery how to read file.txt from the same drive & split the data into string array?

> ID：13745007
> 
> 赞同：0
> 
> 时间：2012-12-06T13:51:32.527
> 
> 标签：jquery, jquery-ui

I have a file new.txt and a html file new.html.

In new.txt there are set of data separated by new line.

In new.html which is in the same drive i want to read the from the text file & then write to a `<div id='x'> </div>`. Is it possible without any server programming & just use jquery to do it.

I tried `$.get()` and `load()` but was not able to get anywhere with the code. It displayed the file contents once i used the `load()` but was not able to manipulate data. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:03:12.343

如果您使用的是 HTML 5 ，则可以使用[文件 API来完成。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

始终检查浏览器支持！

# ios - Running leaks on iOS app throws "Cannot allocate mmap" error

> ID：13745009
> 
> 赞同：4
> 
> 时间：2012-12-06T13:51:36.190
> 
> 标签：ios, ios5, memory-leaks

I have created an iOS app and need to check the leaks in the app programmatically. (Hence not using instruments directly)

For the above I use the leaks command as follows:

MallocStackLogging=1 leaks -nocontext

At one point of time this was working properly without issues. But recently I have started getting errors and the leaks commands gives different number of leaks each time.

Has anyone faced a similar issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:28:30.717

您可以使用 vm_statics 对象以编程方式查找当前内存统计信息。通过这些链接找到 vm_statistics 的实现：

1)

> [http://gamesfromwithin.com/whered-that-memory-go](http://gamesfromwithin.com/whered-that-memory-go)

2)

> [http://landonf.bikemonkey.org/code/iphone/Determining_Available_Memory.20081203.html](http://landonf.bikemonkey.org/code/iphone/Determining_Available_Memory.20081203.html)

# android - Android ListView section header

> ID：13745010
> 
> 赞同：3
> 
> 时间：2012-12-06T13:51:37.423
> 
> 标签：android

Are there any built-in ways for creating Android `ListView` section headers? If not what is the easiest way for doing so, using XML markup as far as possible?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:52:51.640

不，您可以自己实现或使用第三方库。我建议您使用这个，以防您希望它们位于列表的顶部：

[https://github.com/emilsjolander/StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:46:21.927

[您可以使用addHeaderView (View v)](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)添加多个标题。然后您的视图由[HeaderViewListAdapter处理](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html)

# r - 获取通过 foreach 计算的值的平均值

> ID：13745013
> 
> 赞同：2
> 
> 时间：2012-12-06T13:51:39.530
> 
> 标签：r, foreach

假设你有一堆计算，你想使用[`foreach`](http://cran.r-project.org/web/packages/foreach/index.html). 也许您想在现在或将来并行化它们。每个计算都返回一个数字。获得以这种方式计算的所有数字的平均值的最佳习语是什么？

我想到了两个解决方案，我会将它们作为可能的答案发布，以便您可以单独对它们进行投票和评论，甚至可以对其进行编辑以改进它们。但我想可能有更好的方法，所以欢迎补充答案。我的答案将包括您可以用来展示您自己的技术的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:56:18.850

一种解决方案将结果累积成一个总和，并最终将该总和除以迭代次数。

```
> foreach(i = icount(300), .combine = '+', .inorder = FALSE,
+         .final = function(x) x/300) %do% { i*7 %% 11 }
[1] 1053.5 
```

好处：

*   只需要单个数字总和的内存，这应该是性能提升
*   也适用于嵌套`foreach`调用

缺点：

*   迭代次数必须在 的参数列表中重复`foreach`。在这个例子中，数字是一个常数，所以这很容易，并且使用单个变量甚至单个向量的长度应该不会更难。但是在迭代跨越多个向量或未知大小的迭代器的情况下，事情可能会变得更加困难，并且由于不一致的修改导致的错误可能会被忽视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:51:39.530

一种解决方案将结果累积在一个向量中，并最终在该向量`mean`上执行函数。

```
> foreach(i = icount(300), .combine = c, .inorder = FALSE, .multicombine = TRUE,
+         .final = mean) %do% { i*7 %% 11 }
[1] 1053.5 
```

好处：

*   也适用于嵌套`foreach`调用
*   也可与聚合函数一起`mean`使用
*   不需要任何关于迭代中值的数量的知识

缺点：

*   首先将所有结果收集到一个向量中，这可能会消耗不必要的内存，尤其是在执行大量非常小的作业时。

# multithreading - 是否应该在单独的线程中通知观察者？

> ID：13745020
> 
> 赞同：9
> 
> 时间：2012-12-06T13:51:46.500
> 
> 标签：multithreading, observer-pattern

我知道这听起来很重，但我正在尝试解决一个假设的情况。想象一下，你有*N*个对象的 N 个观察者。每个人都对对象状态感兴趣。当应用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)时，*可观察*`notify()|update()`对象倾向于通过调用观察者方法来遍历其观察者列表。

*现在想象一个特定的观察者对可观察*对象的状态有很多工作要做。例如，这会减慢最后一次通知的速度。

因此，为了避免减慢对所有观察者的通知速度，我们可以做的一件事是在单独的线程中通知观察者。为了让它工作，我想每个观察者都需要一个线程。这是我们为了避免因繁重的工作而导致通知速度变慢而承受的痛苦开销。如果使用线程方法，比减慢速度更糟糕的是无限循环导致的死线程。阅读经验丰富的程序员对于这一点将是很棒的。

*   在设计问题上有多年经验的人是怎么想的？
*   这是一个没有实质性解决方案的问题吗？
*   这真的是个坏主意吗？为什么？

## 例子

这是一个模糊的示例，以演示并希望澄清我什至没有测试过的基本思想：

```
class Observable(object):
    def __init__(self):
        self.queues = {}

    def addObserver(self, observer):
        if not observer in self.queues:
            self.queues[observer] = Queue()
            ot = ObserverThread(observer, self.queues[observer])
            ot.start()

    def removeObserver(self, observer):
        if observer in self.queues:
            self.queues[observer].put('die')
            del self.queues[observer]

    def notifyObservers(self, state):
        for queue in self.queues.values():
            queue.put(state)

class ObserverThread(Thread):
    def __init__(self, observer, queue):
        self.observer = observer
        self.queue = queue

    def run(self):
        running = True
        while running:
            state = self.queue.get()
            if state == 'die':
                running = False
            else:
                self.observer.stateChanged(state) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T14:05:12.273

你在正确的轨道上。

每个观察者拥有自己的输入队列和自己的消息处理线程是很常见的（或者更好的是：队列拥有线程，观察者拥有队列）。请参阅[活动对象模式](http://en.wikipedia.org/wiki/Active_object)。

不过也有一些陷阱：

*   如果您有 100 或 1000 的观察者，您可能需要使用[线程池模式](http://en.wikipedia.org/wiki/Thread_pool_pattern)
*   请注意，您将失去对事件处理顺序的控制（哪个观察者首先处理事件）。这可能不是问题，或者可能会打开一个包含非常难以检测的错误的潘多拉盒子。这取决于您的具体应用。
*   您可能必须处理观察者在通知者之前被删除的情况。这可能有点难以正确处理。
*   您需要实现消息而不是调用函数。消息生成可能需要更多资源，因为您可能需要分配内存、复制对象等。您甚至可能希望通过为常见消息类型实现消息池来进行优化（您也可以选择实现包装此类池的消息工厂）。
*   为了进一步优化，您可能希望生成一条消息并将其发送给所有观察者（而不是生成同一消息的多个副本）。您可能需要为您的消息使用一些[引用计数](http://en.wikipedia.org/wiki/Reference_counting)机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T03:27:43.553

让每个观察者自己决定它的反应是否是重量级的，如果是，则启动一个线程，或者向线程池提交一个任务。在单独的线程中发出通知并不是一个好的解决方案：在释放可观察对象的同时，它限制了单线程通知的处理器能力。如果您不信任您的观察者，则创建一个线程池，并为每个通知创建一个任务并将其提交到池中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:01:33.390

在我看来，当一个 Observable 的 Observer 数量**很大**时，它们会进行繁重的处理，那么最好的办法就是`notify()`在 Observer 中有一个方法。

用途`notify()`：只是为了在to中设置`dirty`标志。因此，只要 Observer 线程发现它合适，它就会**查询**Observable 以获取所需的更新。`Observer``true`

 **这不需要在`Observable`侧面进行繁重的处理**并将负载**转移到`Observer`侧面。

现在这取决于`Observers`他们何时必须观察。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-19T13:33:25.307

@Pathai 的答案在很多情况下都是有效的。

一是您正在观察数据库中的变化。在许多方面，您无法仅从快照中重建最终状态，尤其是当您的状态作为复杂查询从数据库中获取时，并且快照是对数据库的更新。

要实现它，我建议使用 Event 对象：

```
class Observer:
    def __init__(self):
        self.event = threading.Event()

# in observer:
while self.event.wait():
    # do something
    self.event.clear()

# in observable:
observer.event.set() 
```**

# javascript - JavaScript 装饰器模式

> ID：13745021
> 
> 赞同：2
> 
> 时间：2012-12-06T13:51:51.063
> 
> 标签：javascript, design-patterns, decorator

我正在尝试让装饰器模式正常工作

[http://www.joezimjs.com/javascript/javascript-design-patterns-decorator/](http://www.joezimjs.com/javascript/javascript-design-patterns-decorator/)

我可能错过了一些观点，但这种模式并没有像我预期的那样工作。

如果我添加两个装饰器并将它们添加到一个类中，则函数不会像我想的那样通过。只能调用最后一个装饰器的函数或调用基本的装饰器。链子坏了。我该如何解决？

我添加了一个小提琴：

[http://jsfiddle.net/hbyLW/25/](http://jsfiddle.net/hbyLW/25/)

更新：更正版本

[http://jsfiddle.net/hbyLW/29/](http://jsfiddle.net/hbyLW/29/)

和源代码：

```
// A basic device class
var device = function(options) {
    this.brightness = options.brightness;
    this.Id = options.Id;
    this.motion = options.motion;
};

// Adding some functions to the class
device.prototype = {

    getID: function() {
        console.log("This ID:" + this.device.Id);
        return this.Id;
    },
    getBrightness: function() {
        console.log("This Brightness: " + this.brightness);
        return this.brightness;
    },
    getMotion: function() {
        console.log("This Motion: " + this.motion);
        return this.motion;
    }
};

// A device Decorator 
var deviceDecorator = function(device) {
    this.device = device;
};

// Adding pass through functions to the Decorator
deviceDecorator.prototype = {
    getId: function() {
        console.log("Old Id");
        return this.device.getId;
    },
    getBrightness: function() {
        console.log("Old Brightness");
        return this.device.getBrightness;
    },
    getMotion: function() {
        console.log("Old Motion");
        return this.device.getMotion;
    }
};

// A Decorator that adds some functionality to the getBrightness function
var brightnessDecorator = function(device) {
    deviceDecorator.call(this, device);
};

brightnessDecorator.prototype = new deviceDecorator();

brightnessDecorator.prototype.getBrightness = function() {
    this.device.getBrightness();
    console.log("Changed Brightness");
};

var motionDecorator = function(device) {
    deviceDecorator.call(this, device);
};

// A Decorator that adds some functionality to the getMotion function
motionDecorator.prototype = new deviceDecorator();

motionDecorator.prototype.getMotion = function() {
    this.device.getMotion();
    console.log("changed Motion");
};

// Some options for a device
var options = {
    Id: "Identifier",
    brightness: true,
    motion: false
};

// Create a new device
var Lamp = new device(options);
// Add the decorators to the device
Lamp = new brightnessDecorator(Lamp);
Lamp = new motionDecorator(Lamp);

// Executing the functions
Lamp.getId();
Lamp.getMotion();
Lamp.getBrightness();
console.log(Lamp);? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:57:24.453

您的第一个装饰器返回`device.getID`（函数本身）而不是调用它并返回它返回的值。

```
deviceDecorator.prototype = {
  getID: function() {
    console.log("Old Id");
    return this.device.getID(); // <= call function instead of returning it
  },
  ...
} 
```

此外，请确保您的大小写是一致的。

# svn - 将源文件重新附加到现有的 SVN

> ID：13745023
> 
> 赞同：6
> 
> 时间：2012-12-06T13:51:58.467
> 
> 标签：svn, tortoisesvn

由于硬盘驱动器故障，我最近不得不重新安装 Windows。幸运的是，我将所有源文件都放在了另一个磁盘上。

在我之前的安装中，我使用的是 Tortoise SVN，我刚刚在我的新机器上重新安装了它（几个月后）。

如何将我当前的源文件重新链接到 SVN 存储库？

我担心如果我点击了错误的东西，它会用服务器上的内容更新我的本地副本。

谢谢里奇。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T16:39:42.333

您首先需要创建一个*工作目录*，而这样做的唯一方法是进行检出并从服务器获取文件。

但是，当您说*source files*时，您的意思是*working directory*，无论如何您可能很幸运。您的*源文件*是否包含该`.svn`目录？如果是这样，你有一个工作目录，在你的新机器上恢复你的工作目录应该可以正常工作。只需确保您使用的 TortoiseSVN 版本与旧系统上的相同：特别是如果一个是 1.7 之前的版本，另一个是 1.7 之后的版本。这是因为工作副本布局从 1.6.x 版更改为 1.7.x 版。查看`.svn`您的 Subversion 工作目录的每个目录中是否有该目录，或者仅在根目录中。如果它仅在根目录中，请使用 TortoiseSVN 1.7 或更高版本。如果它在所有目录中，请使用 TortoiseSVN 版本 1.6.x。

如果您没有这些`.svn`目录（并且它们可能被隐藏），那么您就没有工作目录。您必须进行结帐，然后手动移动不同的文件。查看[Beyond Compare](http://www.scootersoftware.com)以帮助您完成此任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:28:37.340

因为您的源位于存储库的工作副本（副本）中（您有 .svn 子目录），它继续存在，只需安装 TSVN，您也可以继续使用存储库（版本兼容性警告仍然适用，但您会在不良情况下获得通知和指示）

您不必担心本地更改 -`Update`您的 WC 本地更改将与传入的更改合并（自动或手动）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T07:46:42.613

您可以执行以下步骤：

1.  右键单击本地工作项目资源管理器中的任意位置。
2.  选择“SVN 升级工作副本”

按照步骤升级，您的 svn 链接将再次处于活动状态。

它对我有用。

# macos - 使 NSTableCellView 可编辑

> ID：13745025
> 
> 赞同：5
> 
> 时间：2012-12-06T13:52:06.283
> 
> 标签：macos, cocoa, nstableview

我创建了一个**基于视图** `NSTableView`的单列。此列填充了`NSTableCellView`Interface Builder 的标准（我选择了带有图像和文本字段的版本）。

现在我想让列中的**文本**字段**可编辑**。

我的第一次尝试是修改`NSTextField`from Interface builder 并将其行为设置为`Editable`. 它确实有效，当我选择一行并按下该字段时，`enter key`该字段变为可编辑并且我可以更改其值。`NSTableViewDataSource`我想我可以通过一些方法 来拦截这个变化，`tableView:setObjectValue:forTableColumn:row:`但是这个方法永远不会被调用来响应文本字段编辑操作。

在基于视图的 NSTableView 系统中处理可编辑字段的正确方法是什么？我想这`NSTableViewDataSource`与它有关，但我不知道如何调用它的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:36:48.547

创建 NSTableCellView 的子类。（适当的 .h 和 .m 文件）使类响应 NSTextFieldDelegate 协议。实现 control:textShouldEndEditing: 方法。使这个子类成为标签控件的代表。

这是一些示例代码。

类别列表单元.h

```
@interface CategoryListCell : NSTableCellView
@end 
```

类别列表单元.m

```
@interface CategoryListCell()<NSTextFieldDelegate>
@property (weak) IBOutlet NSTextField *categoryLabel;
@property (assign) BOOL editing;
@property (copy) NSString* category;
@end

@implementation CategoryListCell
- (BOOL)control:(NSControl*)control textShouldBeginEditing:(NSText *)fieldEditor {
   self.editing = YES;
   return YES;
}

- (BOOL)control:(NSControl *)control textShouldEndEditing:(NSText *)fieldEditor; {
   if (self.editing) {
        self.editing = NO;
        [self mergeFromSource:self.category toDestination:self.categoryLabel.stringValue];
   }
   return YES;
}

- (void)mergeFromSource:(NSString*)source toDestination:(NSString*) destination {
 // your work here
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:07:57.220

听起来您需要对单元格`NSView`中的内容进行子类化`NSTableView`，并使子类化视图成为文本字段的代表。然后，您的视图将通过`NSTextField`委托方法获得文本更改通知：

```
- (void)textDidChange:(NSNotification *)notification; 
```

# regex - 正则表达式匹配时间

> ID：13745027
> 
> 赞同：0
> 
> 时间：2012-12-06T13:52:21.437
> 
> 标签：regex

我希望我的用户能够输入时间表单。如果需要更多信息，用户用它来表示完成一项任务需要多少时间，如果填满，它将保存在数据库中。

这是我所拥有的：

```
/^$|^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/ 
```

它匹配空表格或 01:30 和 01:30:00 格式化时间。我真的不需要几秒钟，因为每项任务至少需要一分钟，但我尝试删除它，它只是使我的代码崩溃并删除了对空字符串的支持。我真的完全不懂正则表达式。

我想要的是它*也*匹配简单的分钟和简单的小时，例如 3:30、3:00、5。这可能吗？它将极大地改善用户体验并减少打字浪费。但我想保持零可选，以防某些用户觉得输入它很自然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:21:05.373

我认为以下模式可以满足您的要求：

```
p="((([01]?\d)|(2[0-4])):)?([0-5]\d)?(:[0-5]\d)?" 
```

第一部分：

```
(([01]?\d)|(2[0-3])):)? 
```

是一个可选组，处理格式为 00-24 的时间。

第二部分：

```
([0-5]\d)? 
```

是一个可选组，如果您的表达式中存在小时或秒，则处理分钟。该组还处理仅包含分钟或仅小时的表达式。

第三部分：

```
(:[0-5]\d)? 
```

是处理秒的可选组。

以下示例显示了工作模式：

```
In [180]: re.match(p,'14:25:30').string
Out[180]: '14:25:30'

In [182]: re.match(p,'2:34:05').string
Out[182]: '2:34:05'

In [184]: re.match(p,'02:34').string
Out[184]: '02:34'

In [186]: re.match(p,'59:59').string
Out[186]: '59:59'

In [188]: re.match(p,'59').string
Out[188]: '59'

In [189]: re.match(p,'').string
Out[189]: '' 
```

由于每个组都是可选的，因此模式也匹配空字符串。我已经用 Python 对其进行了测试，但我认为它也可以与其他语言一起使用，只需进行最小的更改。

# iphone - 从启动器图标中删除 LocalNotification 徽章编号

> ID：13745029
> 
> 赞同：0
> 
> 时间：2012-12-06T13:52:24.340
> 
> 标签：iphone, objective-c, xcode, ipad, cocoa-touch

我正在尝试在应用程序中添加一个功能，每当我做笔记时，它会`UILocalNotification`在几天后调用（硬编码）。现在，`launcher Icons`我可以看到带有标记“1”的红色徽章。如何移除此徽章？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:59:36.473

`[UIApplication sharedApplication].applicationIconBadgeNumber = 0;`

在处理用户与本地通知交互的任何代码中添加该行。如果您希望在本地通知触发时清除徽章，则不能（因为将通知的`applicationIconBadgeNumber`属性设置为`0`仅意味着“不要更改现有的徽章”。）

# android - 是什么导致我的 c++ JNI 崩溃？

> ID：13745031
> 
> 赞同：2
> 
> 时间：2012-12-06T13:52:29.253
> 
> 标签：android, c++, android-ndk, java-native-interface, cocos2d-x

我正在尝试在我的 c++ 类中实现 facebook 登录。从 java 我正在尝试获取用户的 facebook 信息。一切都正确地从 Java 传递到 C++。

**但是，当这段代码未注释**时，我的应用程序因信号 11 而崩溃（根据此处其他类似答案的内存问题）

```
 JNIEXPORT void JNICALL Java_com_humit_android_HumIt_javaCallJNI(JNIEnv* env, jobject obj,
                                        jstring javaString1, jstring javaString2, jstring javaString3)
{
    //Get the native string from javaString
     const char *nativeString1 = env->GetStringUTFChars(javaString1, 0);
     const char *nativeString2 = env->GetStringUTFChars(javaString2, 0);
     const char *nativeString3 = env->GetStringUTFChars(javaString3, 0); 
```

> // 下面 2 行给出错误...如果有注释，没问题...！

```
 LoginScreen * loginScreen = new LoginScreen();
    loginScreen->facebookProfileInfoFetch("hi", "hii", "hii");

    env->ReleaseStringUTFChars(javaString1, nativeString1);
    env->ReleaseStringUTFChars(javaString2, nativeString2);
    env->ReleaseStringUTFChars(javaString3, nativeString3);

} 
```

facebookProfileInfoFetch 是：

```
void LoginScreen::facebookProfileInfoFetch(const char * value1, const char * value2, const char * value3) {
LOGD(" ----------------- facebookProfileInfoFetch ------------- %s ------------ ", value1);
LOGD(" ----------------- facebookProfileInfoFetch ------------- %s ------------ ", value2);
LOGD(" ----------------- facebookProfileInfoFetch ------------- %s ------------ ", value3);

facebookUserName = value1;
facebookUserId = value2;
facebookUserGender = value3;

this->loginHumServer();

} 
```

调用 loginHumServer() 时崩溃：

loginhumserver() 是：

```
void LoginScreen::loginHumServer()
{
LOGD(" ----------------- loginHumServer ------------------------- ");
facebookDataRetrievedCount++;

if(facebookDataRetrievedCount<2)
    return;

CCHttpRequest* request = new CCHttpRequest();
LOGD(" ----------------- constructing url ------------------------- ");
std::string url="http://humsrer.co.in/user/sign_in?";
url=url+"name"+"="+facebookNoSpaceUserName+"&";
url=url+"facebook_thumbnail"+"="+facebookUserPictureUrl+"&";
url=url+"facebook_id"+"="+facebookUserId+"&";
url=url+"gender"+"="+facebookUserGender+"&";
url=url+"ios_push_id"+"="+"12346";

CCLog("UUUUUUUUUUUUUUUUUUU %s ",url.c_str());
request->setUrl(url.c_str());
request->setRequestType(CCHttpRequest::kHttpGet);
request->setResponseCallback(this, callfuncND_selector(LoginScreen::onHttpRequestCompleted));
// optional fields
request->setTag("GET test2");
LOGD(" ----------------- loginHumServer getInstance ------------------------- ");
CCHttpClient::getInstance()->send(request);

// don't forget to release it, pair to new
request->release();
LOGD(" ----------------- loginHumServer request->release ------------------------- ");
loginLabel->setString("Loging to hum server..");
} 
```

这是应用程序崩溃时我得到的 logcat 错误：

```
 12-06 13:49:45.380: INFO/DEBUG(5637): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
12-06 13:49:45.380: INFO/DEBUG(5637):  r0 deadbaad  r1 01ddc9e8  r2 40000000  r3 00000000
12-06 13:49:45.380: INFO/DEBUG(5637):  r4 00000000  r5 00000027  r6 00000000  r7 57797f3c
12-06 13:49:45.380: INFO/DEBUG(5637):  r8 5c6d9c10  r9 57797f34  10 00000008  fp 5c6d9c24
12-06 13:49:45.380: INFO/DEBUG(5637):  ip ffffffff  sp 5c6d9a90  lr 400ff649  pc 400fb9d8  cpsr 60000030
12-06 13:49:45.380: INFO/DEBUG(5637):  d0  4448000044480000  d1  0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d2  449a0000449a0000  d3  000004d0c41a0000
12-06 13:49:45.380: INFO/DEBUG(5637):  d4  3f8000004b7fffff  d5  449a000044480000
12-06 13:49:45.380: INFO/DEBUG(5637):  d6  4499e0004447c000  d7  0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d8  0000000000000000  d9  0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d10 0000000000000000  d11 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d12 0000000000000000  d13 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d14 0000000000000000  d15 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d16 5000000000000000  d17 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d18 0000000000000000  d19 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d20 0000000000000000  d21 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d22 0000000000000000  d23 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d24 0000000000000000  d25 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d26 0000000000000000  d27 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d28 0000000000000000  d29 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  d30 0000000000000000  d31 0000000000000000
12-06 13:49:45.380: INFO/DEBUG(5637):  scr 60000010
12-06 13:49:45.650: INFO/DEBUG(5637):          #00  pc 000179d8  /system/lib/libc.so
12-06 13:49:45.650: INFO/DEBUG(5637):          #01  pc 0001ef44  /system/lib/libc.so (__assert2)
12-06 13:49:45.650: INFO/DEBUG(5637):          #02  pc 000fb552  /data/data/com.humit/lib/libgame.so (_ZN11LoginScreen22onHttpRequestCompletedEPN7cocos2d6CCNodeEPv)
12-06 13:49:45.655: INFO/DEBUG(5637):          #03  pc 001c3e32  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d9extension12CCHttpClient25dispatchResponseCallbacksEf)
12-06 13:49:45.655: INFO/DEBUG(5637):          #04  pc 000ff9aa  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d7CCTimer6updateEf)
12-06 13:49:45.655: INFO/DEBUG(5637):          #05  pc 001053d6  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d11CCScheduler6updateEf)
12-06 13:49:45.655: INFO/DEBUG(5637):          #06  pc 0012f7f8  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d10CCDirector9drawSceneEv)
12-06 13:49:45.660: INFO/DEBUG(5637):          #07  pc 00130df8  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d21CCDisplayLinkDirector8mainLoopEv)
12-06 13:49:45.660: INFO/DEBUG(5637):          #08  pc 0016c66c  /data/data/com.humit/lib/libgame.so (Java_org_cocos2dx_lib_Cocos2dxRenderer_nativeRender)
12-06 13:49:45.660: INFO/DEBUG(5637):          #09  pc 0001ed70  /system/lib/libdvm.so (dvmPlatformInvoke)
12-06 13:49:45.660: INFO/DEBUG(5637):          #10  pc 0005902c  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread) 
```

我无法调试它崩溃的原因。请帮忙。

**编辑** 我添加了 onHttpRequestCompleted 方法：

```
void LoginScreen::onHttpRequestCompleted(CCNode *sender, void *data)
{
    LOGD(" ----------------- LoginScreen onHttpRequestCompleted ------------------------- ");
    CCLOG("request completed");

    CCHttpResponse *response = (CCHttpResponse*)data;

    if (!response)
    {
        LOGD(" ----------------- LoginScreen onHttpRequestCompleted return ------------------------- ");
        return;
    }

    // You can get original request type from: response->request->reqType
    if (0 != strlen(response->getHttpRequest()->getTag()))
    {
        CCLog("%s completed", response->getHttpRequest()->getTag());
    }

    int statusCode = response->getResponseCode();
    char statusString[64] = {};
    sprintf(statusString, "HTTP Status Code: %d, tag = %s", statusCode, response->getHttpRequest()->getTag());
    //m_labelStatusCode->setString(statusString);
    CCLog("response code: %d", statusCode);

    if (!response->isSucceed())
    {
        CCLog(" %s response failed", response->getResponseData());
        CCLog("error buffer: %s", response->getErrorBuffer());
        LOGD(" ----------------- LoginScreen onHttpRequestCompleted response failed ------------------------- ");
        return;
    }

     //dump data
    std::vector<char> *buffer = response->getResponseData();

    char * charbuffer = new char[buffer->size()];

    printf("Http Test, dump data: ");

    unsigned int size=0;
    for (unsigned int i = 0; i < buffer->size(); i++)
    {
        charbuffer[i] = (*buffer)[i];
        size=i+1;
    }

    charbuffer[size] = 0;

    char *errorPos = 0;
    char *errorDesc = 0;
    int errorLine = 0;
    block_allocator allocator(1 << 10); // 1 KB per block

    json_value *root = json_parse(charbuffer, &errorPos, &errorDesc, &errorLine, &allocator);

    root = root->first_child;

    assert(root->type ==JSON_STRING );

    assert(std::string(root->name) == "user_id" );

    loginLabel->setString("Loading active games..");
    GameManager::create(root->json_value::string_value,facebookUserId.c_str(),facebookUserName.c_str());

//  GameManager::create("b37e329c-37ac-11e2-abf1-1231381a9805");

    delete[] charbuffer;

    this->next();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:55:25.500

assert() 正在触发。您在一个非常具体的地址失败：

```
INFO/DEBUG(5637): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad 
```

`0xdeadbaad`由仿生 abort() 函数使用。（不是每个人都喜欢这个 - 请参阅[http://code.google.com/p/android/issues/detail?id=16672](http://code.google.com/p/android/issues/detail?id=16672)。）

堆栈跟踪会告诉您失败的地方：

```
INFO/DEBUG(5637):          #00  pc 000179d8  /system/lib/libc.so
INFO/DEBUG(5637):          #01  pc 0001ef44  /system/lib/libc.so (__assert2)
INFO/DEBUG(5637):          #02  pc 000fb552  /data/data/com.humit/lib/libgame.so (_ZN11LoginScreen22onHttpRequestCompletedEPN7cocos2d6CCNodeEPv)
INFO/DEBUG(5637):          #03  pc 001c3e32  /data/data/com.humit/lib/libgame.so (_ZN7cocos2d9extension12CCHttpClient25dispatchResponseCallbacksEf) 
```

注意`__assert2`，在仿生的 <assert.h> 中定义。

它是从 调用的`LoginScreen::onHttpRequestCompleted(cocos2d::CCNode*, void*)`。您可以使用带有库中符号的地址转行工具将其转换为特定的行号，但理想情况下，失败的断言本身将出现在本机崩溃上方的 logcat 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:13:28.270

您在某处有一个指向无效位置的指针。这就是导致分段错误的原因。似乎崩溃始于`LoginScreen::onHttpRequestCompleted`. 你能把那个贴出来吗？

# symfony - 如何在 Symfony2 + Twig 中使用资产渲染（未优化的）图像标签

> ID：13745033
> 
> 赞同：4
> 
> 时间：2012-12-06T13:52:33.460
> 
> 标签：symfony, twig, assetic

有没有比 Symfony2 + Assetic + Twig 生成**图片**网址更短的方法：

```
{% image '@ACMEBundle/Resources/public/img/longer.png' %}
  <img src="{{ asset_url }}" />
{% endimage %} 
```

理想情况下，类似：

```
<img src="{{ bundle_resource_url('@ACMEBundle/Resources/public/img/shorter.png') }}" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T19:52:12.090

如果您的资产在您的 web 目录中，请改用它：

```
<img src="{{ asset('bundles/acme/img/shorter.jpg') }}" /> 
```

您可以通过运行以下命令让 Assetic 为您安装资产：

```
app/console assets:install path/to/web 
```

你的网络根在哪里`path/to/web`。

# vmware - VMWare 基础设施 Web 访问，vmware 服务器之间的超链接

> ID：13745034
> 
> 赞同：2
> 
> 时间：2012-12-06T13:52:35.193
> 
> 标签：vmware, infrastructure

我们正在使用多个 vmware 服务器，每个服务器托管多个 vmware 映像/实例。每个部门都使用自己的 vmware 服务器。vmware 实例始终通过控制台选项卡面板中的“VMWare 基础架构 Web 访问”网页进行访问。vmware 服务器是普通的 windows 服务器（没什么花哨的）。

现在事实证明，其中一些 vmware 映像对多个部门都很有用。当然，我们考虑复制这些镜像，将它们分发到所有 vmware 服务器，多次托管同一个镜像。

但实际上我们更愿意只托管每个实例的 1 个副本。但我们仍然希望从 1 个网页访问所有图像。将它们合并到 1 台服务器当然是不可能的（性能方面）。

所以，这让我想知道，也许有一种方法可以在 vmware Web 访问门户中创建指向实际托管在不同服务器上的 vmware 实例的超链接。它们看起来都在同一台服务器上，但实际上它们是分布式的。

这样的事情是否存在，应该如何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T11:34:55.860

同时，我为我的问题找到了一个合理的解决方案。可以使用多个参数从命令行调用 vmware-vmrc.exe。例如，使用以下参数，它将立即打开 vmware 会话，而无需指定任何凭据。

```
vmware-vmrc.exe -X -h hostname:8333 -u "username" -p "password" "[standard] ... .vmx" 
```

重要提示：“[标准] ... .vmx”值不仅仅是一个文件名。

*   要知道这个值，你需要访问你的 vmware 的网页（例如 https://hostname:8333/ui/）。
*   接下来单击“配置 VM”按钮，这将打开一个带有配置设置的选项卡面板。
*   在那里您会找到一个名为“虚拟机配置文件”的设置。它通常以字符串“[标准]”开头。

接下来，编写一个小批处理文件真的很容易，它允许我从菜单中选择所需的 vmware。

# linux - 将 VisualStudio (2008) 项目移植到 Linux

> ID：13745036
> 
> 赞同：0
> 
> 时间：2012-12-06T13:52:48.590
> 
> 标签：linux, makefile, porting

我正在尝试将一个广泛的 Visual Studio (2008) 项目移植到 Linux 系统。

有人知道它是否存在一种轻松将文件*“转换”*为.`.vcproj``makefile`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-13T12:19:06.397

You can use Winemaker, which is part of WINE: something all major distributions already include.

On Fedora, which use yum, you can, as root, run yum install /usr/bin/winemaker to install it. This will probably also work on other yum based operating system, but you may have to provide another path, if winemaker is packaged to install in /usr/bin (which I doubt will be the case).

Once you have converted the project, consider using Autotools instead -- it's, in my experience, by far the simplest build tool available and is very easy to learn and use. Just don't be scared to poor documentation you will often find lying around. The only files you have to edit are configure.ac and Makefile.am files.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:37:31.243

也许这可以帮助你，但你需要处理原始代码中的输出

做到这一点

[http://code.google.com/p/make-it-so/](http://code.google.com/p/make-it-so/)

或 sln2mak

[http://www.codeproject.com/Articles/28908/Tool-for-Converting-VC-2005-Project-to-Linux-Makef](http://www.codeproject.com/Articles/28908/Tool-for-Converting-VC-2005-Project-to-Linux-Makef)

我希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:41:25.377

最简单的方法就是学习如何编写自己的 Makefile。这很简单。

但除此之外，您可以尝试[http://www.codeproject.com/Articles/28908/Tool-for-Converting-VC-2005-Project-to-Linux-Makef](http://www.codeproject.com/Articles/28908/Tool-for-Converting-VC-2005-Project-to-Linux-Makef)

# ssis - 7-Zip 在 SSIS 2012 中引发错误

> ID：13745038
> 
> 赞同：1
> 
> 时间：2012-12-06T13:52:51.870
> 
> 标签：ssis, 7zip

我有以下问题：

我在我的 SSIS 2012 包中使用 7-Zip。

所以我创建了执行流程任务并放在那里：

**WorkingDirectory**：（`C:\Program Files\7-Zip\`它是正确的，仔细检查了它）

**可执行文件**：`7z.exe`

**论据**：`e "C:\Data\B1\Arch.7z" -so > "C:\Data\B1\Arch.7z.dat"`

这意味着我想将所有解压缩的数据放入文件（stdout）Arch.7z.dat。

当我运行包时出现以下错误： **不能为此命令使用绝对路径名** 这个错误是由 7-Zip 引发的。

但是当我从命令行运行相同的命令时，它可以正常工作：

`C:\Program Files\7-Zip>7z.exe e "C:\Data\B1\Arch.7z" -so > "C:\Data\B1\Arch.7z.dat"`

那里有什么问题？

谢谢米克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:35:26.513

-o 开关指定输出文件夹，除了在 -so 开关中指定路径外，还必须使用它。在 -so 重定向中仅指定 -o 开关而没有完整路径，或者在没有 -o 开关的情况下仅指定重定向中的完整路径将无法按预期工作或根本无法工作。

它应该如下所示：

```
C:\Program Files\7-Zip>7z.exe e -oC:\Data\B1 C:\Data\B1\Arch.7z -so > C:\Data\B1\Arch.7z.dat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:04:24.290

尝试如下。

```
Executable  C:\Program Files\7-Zip\7z.exe
Arguments   e “C:\Data\B1\Arch.7z”
Working directory   <Path of your source file> 
```

看看下面的例子。

[在 SSIS 中使用 7 Zip 解压缩的示例](http://gowdhamand.wordpress.com/2012/06/26/extracting-zip-files-using-ssis/)

希望这可以帮助！

# java - 向 MongoDB 插入许多文档并没有全部插入

> ID：13745039
> 
> 赞同：1
> 
> 时间：2012-12-06T13:53:03.120
> 
> 标签：java, mongodb, mongo-java-driver

我想向 MongoDB 添加 1,000,000 个文档。我运行这个虚拟代码，

```
Mongo mongo = null;
mongo = new Mongo("localhost", 27017);

DB db = mongo.getDB("MyTestDB");

System.out.println("Connection was established....");

DBCollection col = db.getCollection("ThirdCollection");

for (int i = 0; i < 100000; i++) {
    BasicDBObject doc = new BasicDBObject("name", "MongoDB "+i)
            .append("type", "database")
            .append("count", 1)
            .append("info",
                    new BasicDBObject("x", 203).append("y", 102));

    col.insert(doc);
} 
```

我看到它只插入了 99,637 个文档。

我是 MongoDB 的新手，可能是优化问题还是其他问题？

谢谢

# javascript - 计算数组的长度并使用 JS/jQuery 创建相同数量的 HTML 元素

> ID：13745051
> 
> 赞同：0
> 
> 时间：2012-12-06T13:53:21.900
> 
> 标签：javascript, jquery

是否可以查询数组的长度，然后使用 JS/jQuery 在客户端创建相同数量的新 HTML 元素？

我对数组的代码是：

```
var psC1 = [
'item1',
'item2',
'item3'
];

alert(psC1.length); 
```

这将提醒数组中有 3 个项目。我现在想在页面上创建三个 iframe，并将数组索引到每个元素的 src 属性中。

我用来使用数组插入 iframe 的 src 的代码是：

```
 $('.test-iframe').each(function() {
    $(this).attr('src', psC1[$(this).index()]); 
   }); 
```

我正在努力计算数组后，使用 JS/jQuery 创建三个 iframe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:55:16.900

要使用 jQuery 创建一个`iframe`，请使用该[`$`](http://api.jquery.com/jQuery/#jQuery2)函数（或`jQuery`在无冲突模式下）：

```
$("<iframe>").appendTo(document.body); 
```

当然，您不必附加到正文，您可以将 iframe 放在您需要的任何地方。

在你的情况下，也许是这样的：

```
$.each(psC1, function(index, value) {
    $("<iframe>").attr("src", value).appendTo(document.body);
}); 
```

[`$.each`](http://api.jquery.com/jQuery.each)循环遍历数组条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:56:47.810

```
for (var x = 0; x < psC1.length; x++) {
   $("<iframe>", {'src': x}).appendTo("body");
} 
```

`$("<iframe>")`语法创建元素 。`.appendTo`将其添加到 DOM。请注意，这只会创建源为“0”、“1”和“2”的 iframe，因此您可能需要`'/some/path/?page=' + x`类似`src`.

请注意，您也可以使用`$.each`而不是普通`for`循环，但它更昂贵，而且在我看来，没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:59:11.157

您可以使用循环来创建 HTML

```
var iframeHTML = "";
for (int i = 0; i < count; i++)
{
    iframeHTML += "<iframe class='test-iframe'></iframe>";
} 
```

然后将 HTMLString 附加到您想要的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:02:07.587

您可以使用以下方法使这个更清洁`jQuery.map`：

```
$('body').append($(psC1).map(function (i, src) {
    return $('<iframe>').attr('src', src);
}).get()); 
```

# regex - 如何从一行中剪切/获取所有 RE 模式

> ID：13745054
> 
> 赞同：1
> 
> 时间：2012-12-06T13:53:25.490
> 
> 标签：regex, grep, cut

如何获取所有实例，以及仅包含在单行或字符串中的正则表达式的实例？

例如，假设网页的输出（全部为单行）是：

```
<Table border=1 cellpadding=2><TR><TH><font size=2>LAN IP BLOCK</font></TH><TH><font size=2>CUST_NAME</font></TH> <TH><font size=2>ID
</TH></TR><TR><TD><font size=2>10.4.4.0 / 29</font></TD><TD><font size=2>Customer data</font></TD><TD><font size=2></font></TD></T
TD><font size=2>10.1.1.0 / 27</font></TD><TD><font size=2>Customer</font></TD><TD><font size=2></font></TD></TR></Table><p> 
```

我想获取 IP CIDR 数据的每个实例。我知道我必须使用一个 IP 地址 RE（我相信我可以弄清楚/找到它），但是我如何获取每个实例并简单地删除所有其他文本？我想使用 grep/sed 等在命令行上执行此操作，但认为我需要使用 python。我知道我可以使用 Perl，但我必须安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:56:53.250

`grep`选项`-o`和`-E`您正在寻找的内容：

```
grep -oE "pattern1|pattern2|pattern3|pattern4|...|patternN" input_file 
```

来自`man grep`：

```
 -o, --only-matching
      Print only the matched (non-empty) parts of a matching line,
      with each such part on a separate output line.

 -E, --extended-regexp
      Interpret PATTERN as an extended regular expression
      (-E is specified by POSIX.) 
```

# java - 如何在开发人员之间共享 eclipse Java/XML 代码样式设置？

> ID：13745056
> 
> 赞同：4
> 
> 时间：2012-12-06T13:53:40.513
> 
> 标签：java, eclipse, coding-style, code-standards

在有许多开发人员的项目中，如果他们的所有 IDE 都配置了相同的代码样式设置，这将很有用，这样当其他人更改您的代码时，您就不会因为格式更改检查到版本控制中而出现伪差异。您可以尝试说服所有人导入项目标准格式设置，但他们可能会忘记在创建新工作区时执行此操作，并且忘记在需要更改时对其进行调整，因此随着时间的推移会丢失。

那么，是否有一种简单的方法可以使事情自动化，让每个人都拥有相同的设置，并在需要更新时自动更改他的设置——而不需要他们自己采取任何行动？

如果将这些设置配置为 project local ，则其中许多设置都存储在其中`.settings/org.eclipse.jdt.ui.prefs`，因此可以将此文件签入到版本控制中，但在 .settings 中省略其他文件。不幸的是，格式化程序设置包含在 big bucket`.settings/org.eclipse.jdt.core.prefs`中，因此您必须做更复杂的事情来更新这些设置。所以我想知道是否有更简单/其他的选择。

**澄清**：根据我的经验，许多开发人员忽略了调整 eclipse 中各种代码样式设置的请求，因为他们认为这些设置不重要。所以我想让他们至少可以非常容易地使用项目标准设置，代码风格的适配充其量应该在没有他们合作的情况下完全工作——尤其是在编码风格的更新上。我正在寻找工具来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T13:27:11.177

在我以前的公司，我们会创建一个“默认”或“模板”工作区，根据个人喜好（如键设置、视图位置等）**和**公司规则（格式化程序、编译器警告、检查样式、强制插件等）。

每次我需要一个新的工作区时，我都会复制这个模板工作区。

由于从头开始使用新的工作空间是如此痛苦，人们自然而然地习惯了使用模板，而不是创建一个完整的新工作空间。所以人们忘记它从来没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:50:01.923

警告：在代码风格方面过于严格并不是一个好主意。许多程序员都有自己的风格。所以要小心你的愿望。

Eclipse 中最简单的方法是创建一个空的工作区，并最初通过简单地将其复制到开发人员的机器上来使用它。您甚至可以复制带有所有插件的 Eclipse。这具有必须手动创建更改的缺点。这也是最严格的选择。

另一种方法是导出/导入所有设置。这需要更多的工作，但限制较少。您需要分发以下设置：格式化程序、清理、模板。此外，您仍然必须设置最大值。常规设置中的线条大小。

让人们遵守代码实践的最佳方式是创建一份关于最低要求的文档。确保记录您的决定并让人们参与。然后检查人们是否遵守它；如果你让它溜走，程序员*就会*走自己的路。管理层（不幸的是）在这里可以发挥作用。

强制执行代码样式的最佳方式是创建 CheckStyle 配置并将其作为只读文件保存在磁盘上。然后，您可以将其用作 CheckStyle 插件的外部样式表。确保 Eclipse 格式化程序和清理设置匹配。

可以在自动构建环境中使用相同的 CheckStyle 配置来生成警告和错误。在审查期间应讨论这些警告和错误。确保你有漏洞，如果需要，规则应该被打破。

*管理开发者“和放牧猫没什么两样”*

# dll - VBScript中DLL的使用函数

> ID：13745059
> 
> 赞同：2
> 
> 时间：2012-12-06T13:53:54.633
> 
> 标签：dll, vbscript

我想在我的 VBScript 中使用我的 Encryption.dll 的函数。

如果我尝试注册 dll，`regsvr32 /i Encryption.dll`我会收到加载 dll 的错误，但他无法注册文件，因为没有 DllRegistryServer-Entrypoint。

所以我在论坛上阅读时尝试了另一种方式：

```
Set yourClass = CreateObject("Encryption.Hashing") 
```

我收到一个 ActiveX 错误。

关于我能做什么的更多想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-17T12:28:50.697

听起来可能是 DLL 编译不正确？你有来源吗？如果没有，试试 Telerik 的 JustDecompile 之类的，看看它是否可以反编译。这不是所有类型的测试，但如果它是一个 .NET dll，你应该能够反编译它。如果它是本机 DLL，则应该有错误。

在不知道这一点的情况下，您可能会遇到问题有几个原因。尝试创建一个导出您需要的函数的包装器；在 VS 中测试它，然后构建它并尝试再次安装它。哦，还有一件事。Native Libs 有一个 .lib 文件，如果它是为了调用目的而链接到的，它通常随 DLL 一起提供。该 .lib 及其相应的头文件将是您编写包装器所需的。干杯。

# php - jQuery序列化和json？

> ID：13745062
> 
> 赞同：-4
> 
> 时间：2012-12-06T13:53:57.507
> 
> 标签：php, javascript, jquery, json

我已经很久没有使用 jquery 和 ajax 请求了。所以，我想我可以拿起它并重新开始编码一些东西。但是，我完全不记得了。一直在尝试阅读，我理解其中的点点滴滴，但我无法将其融合在一起。

我得到的是一个简单的文本输入，我可以在其中输入文本。我想要的是将此文本作为 md5 哈希接收（使用 php 完成并使用 json 等对其进行编码），但我的 javascript 会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:00:11.890

像这样的东西：

```
$.ajax({
    url: '/yourEncryptionPage.php',
    data { text: $("#textInput").val() },
    success: function(encryptedText) {
        // do something with the encrypted text here...
    }
}): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:01:08.957

你到底卡在哪里了？

使用 Ajax 将您的文本发送到您的 php 脚本。在那里做你的事情并用 json_encode 函数回显它。在你的ajax的成功函数中你可以处理它。

# javascript - 如何使函数在javascript中只运行一次

> ID：13745064
> 
> 赞同：0
> 
> 时间：2012-12-06T13:54:00.230
> 
> 标签：javascript, events

如何使该功能每个按钮只运行一次？
如果点击“点击我”只工作一次，其他按钮也一样为了不放太多代码，我举了一个例子..：http:
[//jsbin.com/apexod/1/watch](http://jsbin.com/apexod/1/watch)

```
<html>
<head>
<title></title>
</head>
<body>
<input type="button" value="click me" onclick="hello()"><br>
<input type="button" value="click me1" onclick="hello()"><br>
<input type="button" value="click me2" onclick="hello()">
<script>
   function hello(){
       alert("hello");
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:58:04.503

更改您的`onclick`处理程序，以便该函数可以引用单击的元素。

```
<input type="button" value="click me" onclick="hello.call(this)"><br>
<input type="button" value="click me1" onclick="hello.call(this)"><br>
<input type="button" value="click me2" onclick="hello.call(this)"> 
```

然后更改函数以删除处理程序。

```
function hello(){
    alert("hello");
    this.onclick = null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:58:08.463

您可以删除 onclick

```
<html>
<head>
    <title></title>
</head>
<body>
    <input type="button" value="click" onclick="hello(this)"><br>
    <input type="button" value="click1" onclick="hello(this)"><br>
    <input type="button" value="click2" onclick="hello(this)">
<script>
       function hello(btn){ 
           alert("hello");
           btn.onclick = function(){};
    }
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T13:59:39.073

如果您在脚本中添加事件侦听器，则更易于管理（将行为与表示分开也是一种很好的做法）：

演示：http: [//jsfiddle.net/4N4ur/](http://jsfiddle.net/4N4ur/)

```
<input type="button" value="click">
<input type="button" value="click1">
<input type="button" value="click2">​

<script>
var inputs = document.getElementsByTagName('input');
for(var i=0; i<inputs.length; i++) {
    inputs[i].onclick = function() {
        hello();
        this.onclick = null; // reset the handler
    }
}
function hello() {
    alert('hello';
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T14:05:27.290

> 单击按钮调用下面的函数，按钮 id 或名称作为参数

```
 <script>
       function hello(caller){
          if (caller == 'button1' && $("#button1clicked").val() != '1')
          {
         // Your code to execute for the function
         alert("hello");
       // set value for button1clicked
       $("#button1clicked").val("1");
       }else {
       // do nothing
       }

     }
     </script> 
```

为没有按钮添加上述条件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-21T18:44:29.003

虽然上面的场景和答案都是针对点击处理程序的，但原始问题的答案`how to make a function that only runs once`通常是使用包装函数完成的，类似于 UnderscoreJS`.once`方法：

```
function once(fn) {
  var called = false;
  return function() {
    if (!called) {
      called = true;
      fn.apply(this, arguments);
    }
  }
} 
```

上面的实现只允许原始函数被调用一次，它会传递后面调用的上下文和参数。然后将其用作：

```
var oneTimeFn = once(function() {
  console.log('I was called.');
});

oneTimeFn();
//-> I was called.

oneTimeFn();
//-> undefined 
```

# mongodb - 运行 mongo --repair 后数据库为 empy

> ID：13745066
> 
> 赞同：2
> 
> 时间：2012-12-06T13:54:10.030
> 
> 标签：mongodb, database, nosql

在我的开发人员机器上，我重新安装了 ubuntu，只是将文件从旧安装复制到 /data/db。

在 mongo --repair 看似正常（没有错误消息等）之后，我没有看到我希望看到的数据库。

如何修复我的数据库？

这里是日志文件的第一部分：

```
Thu Dec  6 17:55:21 [initandlisten] MongoDB starting : pid=2123 port=27017 dbpath=/data/db/ 64-bit host=sog
Thu Dec  6 17:55:21 [initandlisten] db version v2.2.2, pdfile version 4.5
Thu Dec  6 17:55:21 [initandlisten] git version: d1b43b61a5308c4ad0679d34b262c5af9d664267
Thu Dec  6 17:55:21 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Thu Dec  6 17:55:21 [initandlisten] options: { repair: true }
Thu Dec  6 17:55:21 [initandlisten] Unable to check for journal files due to: boost::filesystem::basic_directory_iterator constructor: No such file or directory: "/data/db/journal"
Thu Dec  6 17:55:21 [initandlisten] ****
Thu Dec  6 17:55:21 [initandlisten] ****
Thu Dec  6 17:55:21 [initandlisten] need to upgrade database fan-fiction with pdfile version 4.5, new version: 4.5
Thu Dec  6 17:55:21 [initandlisten]      starting upgrade
Thu Dec  6 17:55:21 [initandlisten]  fan-fiction repairDatabase fan-fiction
Thu Dec  6 17:55:21 [FileAllocator] allocating new datafile /data/db/_tmp_repairDatabase_1/fan-fiction.ns, filling with zeroes...
Thu Dec  6 17:55:21 [FileAllocator] creating directory /data/db/_tmp_repairDatabase_1/_tmp
Thu Dec  6 17:55:21 [FileAllocator] done allocating datafile /data/db/_tmp_repairDatabase_1/fan-fiction.ns, size: 16MB,  took 0.001 secs
Thu Dec  6 17:55:21 [FileAllocator] allocating new datafile /data/db/_tmp_repairDatabase_1/fan-fiction.0, filling with zeroes... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:49:05.047

好的，我已经复制了根目录下的文件并忘记了它们。现在一切都像魅力一样运作。

# android - 从 Activity 动画 ImageView

> ID：13745071
> 
> 赞同：0
> 
> 时间：2012-12-06T13:54:32.337
> 
> 标签：android, android-fragments, android-animation, android-imageview

无法通过 onItemClickListener ListView 的方法为 ImageView 设置动画。ListView 位于片段内。有人可以建议我该怎么做吗？

```
public class MainFragment extends Fragment {

View view;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sis){
    View view = inflater.inflate(R.layout.fragment_layout, container, false);
    ListView lv = (ListView)view.findViewById(R.id.listf);
    this.view= view;

lv.setOnItemClickListener(new OnItemClickListener(){
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id){

          ImageView i = (ImageView)view.findViewById(R.id.imgv);
          AnimationSet as = new AnimationSet(true);
          Animation animation1 = AnimationUtils.loadAnimation(this, R.anim.anim1);              
          Animation animation2 = AnimationUtils.loadAnimation(this, R.anim.anim2);
          as.addAnimation(animation1);
          as.addAnimation(animation2);
          i.setImageResource(R.drawable.logocpic1);
          i.startAnimation(as);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:52:11.053

```
I think you have to try this following code it works for me.... 
```

动画 animation1 = AnimationUtils.loadAnimation(getapplicationContext(), R.anim.anim1);

代替

动画 animation1 = AnimationUtils.loadAnimation(this, R.anim.anim1);

可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:20:20.110

好的，您遇到错误是因为您在非 UI 线程中执行 UI 操作。你可以使用下面的代码，

```
public class MainFragment extends Fragment {
View view;
ImageView i;
.
.
.
.

lv.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
.
.
.   

   getActivity().runOnUiThread(new Runnable() {
      public void run() {
         i = (ImageView)getActivity().findViewById(R.id.imgv);
      }
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T09:37:00.550

请改成喜欢

```
Animation animation1 = AnimationUtils.loadAnimation(MainFragment.this, R.anim.anim1); 
```

# php - 会话网络应用程序

> ID：13745077
> 
> 赞同：0
> 
> 时间：2012-12-06T13:54:59.483
> 
> 标签：php, javascript, gwt, web

如何将 Web 应用程序设置为具有无限会话，以便用户在一段时间后不会注销，即使 Web 应用程序保持打开多年？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:14:50.137

无法`SESSION`在服务器端设置无限，因为会话信息会不断删除并相应地创建新会话

通过使用该函数`session_set_cookie_params`，我们可以以秒为单位设置会话 cookie 的生命周期。

参考这个： http: [//php.net/manual/en/function.session-set-cookie-params.php](http://php.net/manual/en/function.session-set-cookie-params.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:11:20.557

我认为你应该使用 COOKIE 而不是 SESSION，因为 SESSION 只会持续到浏览器关闭

或者您可能会考虑 HTML 5 的 localStorage

# python - 如何将函数拟合到 3D numpy 数组？

> ID：13745078
> 
> 赞同：1
> 
> 时间：2012-12-06T13:55:10.433
> 
> 标签：python, function, numpy, scipy, field

我目前正在从事一个涉及计算电场和 3D 空间中的梯度的项目。这需要对拉普拉斯方程进行数值求解，我已经编写了一个类来执行此操作（如下），它有效，但这里仅用于背景；

```
################################################################################
#  class:  ThreeDRectLaplaceSolver                                             #
#                                                                              #
#  A class to solve the Laplace equation given the potential on the boundaries.#                                                         
################################################################################
class ThreeDCuboidLaplaceSolver:

#############################################################################
# Store the init variables as class varibales, calculate the grid spacing to#
# solve Laplace's equation on and create arrays to store the iterations and #
# results in.                                                               #   
############################################################################
def __init__(self, xmin, xmax, ymin, ymax, zmin, zmax, gridstep):

    self.xmin, self.xmax = xmin, xmax
    self.ymin, self.ymax = ymin, ymax
    self.zmin, self.zmax = zmin, zmax

    self.xpoints  = int((xmax-xmin)/gridstep) + 1
    self.ypoints  = int((ymax-ymin)/gridstep) + 1
    self.zpoints  = int((zmax-zmin)/gridstep) + 1

    self.dx = (xmax-xmin)/self.xpoints
    self.dy = (ymax-ymin)/self.ypoints
    self.dz = (zmax-zmin)/self.zpoints

    self.v     = np.zeros((self.xpoints, self.ypoints, self.zpoints))
    self.old_v = self.v.copy()

    self.timeStep = 0

############################################################################
# Set constant values along the boundaries                                 #
#                                                                          #
# Top(bottom) is +ive(-ive) end of z-axis                                  #
# Right(left) is +ive(-ive) end of y-axis                                  #
# Front(back) is +ive(-ive) end of x-axis                                  #
############################################################################   
def setBC(self, frontBC, backBC, rightBC, leftBC, topBC, bottomBC):

    self.v[-1, :, :] = frontBC
    self.v[0 , :, :] = backBC
    self.v[: ,-1, :] = rightBC
    self.v[: , 0, :] = leftBC
    self.v[: , :,-1] = topBC
    self.v[: , :, 0] = bottomBC

    self.old_v = self.v.copy()

def solve_slow(self, PercentageTolerance = 5):

    PercentageError = PercentageTolerance + 1

    while PercentageError > PercentageTolerance:

        self.Iterate()
        PercentageError = self.Get_LargestPercentageError()
        print "Completed iteration number %s \n Percentage Error is %s\n" % (str(self.timeStep), str(PercentageError))

    return self.v

def solve_quick(self, Tolerance = 2):

    AbsError = Tolerance + 1

    while AbsError > Tolerance:

        self.Iterate()
        AbsError = self.Get_LargestAbsError()
        print "Completed iteration number %s \nAbsolute Error is %s\n" % (str(self.timeStep), str(AbsError))

    return self.v 

def Get_LargestAbsError(self):

    return np.sqrt((self.v - self.old_v)**2).max()

def Get_LargestPercentageError(self):

    AbsDiff = (np.sqrt((self.v - self.old_v)**2)).flatten()

    v = self.v.flatten()

    vLength = len(v)

    Errors = []

    i=0
    while i < vLength:

        if v[i]==0 and AbsDiff[i]==0:
            Errors.append(0)

        elif v[i]==0 and AbsDiff[i]!=0:
            Errors.append(np.infty)

        else:    
            Errors.append(AbsDiff[i]/v[i])

        i+=1

    return max(Errors)*100

# Perform one round of iteration (ie the value at each point is iterated by one timestep)    
def Iterate(self):

    self.old_v = self.v.copy()

    print self.Get_vAt(0,5,0)

    self.v[1:-1,1:-1,1:-1] = (1/26)*(self.v[0:-2, 2:, 2:  ] + self.v[0:-2, 1:-1, 2:  ] + self.v[0:-2, 0:-2, 2:  ] +\
                                     self.v[1:-1, 2:, 2:  ] + self.v[1:-1, 1:-1, 2:  ] + self.v[1:-1, 0:-2, 2:  ] +\
                                     self.v[2:  , 2:, 2:  ] + self.v[2:  , 1:-1, 2:  ] + self.v[2:  , 0:-2, 2:  ] +\

                                     self.v[0:-2, 2:, 1:-1] + self.v[0:-2, 1:-1, 1:-1] + self.v[0:-2, 0:-2, 1:-1] +\
                                     self.v[1:-1, 2:, 1:-1] +                            self.v[1:-1, 0:-2, 1:-1] +\
                                     self.v[2:  , 2:, 1:-1] + self.v[2:  , 1:-1, 1:-1] + self.v[2:  , 0:-2, 1:-1] +\

                                     self.v[0:-2, 2:, 0:-2] + self.v[0:-2, 1:-1, 0:-2] + self.v[0:-2, 0:-2, 0:-2] +\
                                     self.v[1:-1, 2:, 0:-2] + self.v[1:-1, 1:-1, 0:-2] + self.v[1:-1, 0:-2, 0:-2] +\
                                     self.v[2:  , 2:, 0:-2] + self.v[2:  , 1:-1, 0:-2] + self.v[2:  , 0:-2, 0:-2])

    self.timeStep += 1

# Iterate through a certain number of time steps    
def IterateSteps(self, timeSteps):

    i = 0
    while i < timeSteps:

        self.Iterate()

        i+=1

# Get the value of v at a point (entered as coordinates, NOT indices)        
def Get_vAt(self, xPoint, yPoint, zPoint):

    # Find the indices nearest to the coordinates entered

    diff = [np.sqrt((x-xPoint)**2) for x in np.linspace(self.xmin,self.xmax,self.xpoints)]
    xIndex = diff.index(min(diff))

    diff = [np.sqrt((y-yPoint)**2) for y in np.linspace(self.ymin,self.ymax,self.ypoints)]
    yIndex = diff.index(min(diff))

    diff = [np.sqrt((z-zPoint)**2) for z in np.linspace(self.zmin,self.zmax,self.zpoints)]
    zIndex = diff.index(min(diff))

    # retun the value from of v at this point
    return self.v[xIndex, yIndex, zIndex] 
```

所以当我运行以下

```
 solver = ThreeDCuboidLaplaceSolver(0, 20, 0, 10, 0, 20, 1)

TwoDsolver = TwoDRectLaplaceSolver(0,20,0,10,1)
TwoDsolver.setBC(1000,0,0,0)

v_0 = np.zeros((21,11))
v_0[4:6,4:6] = 1000
v_0[14:15, 9:10] = 2000

solver.setBC(0,0,0,0,0,v_0)
v = solver.solve_quick(0.00001) 
```

我得到一个 3D numpy 数组，其中包含网格上每个点的电位 (V) 值。然而，为了用这个做更多有用的事情，我希望能够用一个连续函数来近似这个值数组，这样我就可以计算不在我的网格上的点的场及其梯度。

A）这可能吗？B) 你会怎么做？我见过基本的 scipy 拟合函数，但没有任何东西可以以这种方式处理 3D 数据（或者确实适合 2D 数组的类似函数）。

以前有人尝试过这样做可能是一个很长的机会，但任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:50:50.000

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html)使用样条线插值数据，您可以使用顺序参数选​​择样条线的度数，默认为 3。

如果您熟悉样条插值，它会使用低次多项式“修补”数据点。快速阅读维基百科[http://en.wikipedia.org/wiki/Spline_interpolation](http://en.wikipedia.org/wiki/Spline_interpolation)或[http://math.tut.fi/~piche/numa2/lecture16.pdf](http://math.tut.fi/~piche/numa2/lecture16.pdf)

多项式的阶数以计算时间为代价减少了误差，如果您的数据不是那么不规则，您可以继续尝试使用较低阶数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:00:09.717

另一种选择可能是查看有限元方法 (FEM) 库。使用适当的元素，插值梯度通常比基于有限差分的方法更准确。例如[Fenics](http://fenicsproject.org)有一个不错的 python 界面。在本[教程](http://fenicsproject.org/documentation/tutorial/fundamentals.html#the-poisson-equation)中，介绍了泊松方程的更一般的情况，它可以很容易地适应拉普拉斯方程。

# c# - 搜索数百个 HTML 文件

> ID：13745081
> 
> 赞同：1
> 
> 时间：2012-12-06T13:55:25.653
> 
> 标签：c#, html, search, full-text-search

我不知道如何开始解决这个问题，所以任何建议都会有所帮助。

我的客户端有许多静态 HTML 页面，它们运行在数百个文件中。这些不时更新，并在网站上被覆盖。我们通过一个简单的左侧浏览器在网站上列出这些页面，该浏览器模仿了将这些文件提供给我们的文件夹结构。

我们现在希望能够搜索这些文件并显示匹配结果。通过如此大量的文件进行暴力搜索将非常耗时。匹配相关词（例如复数、拼写错误等）也是可取的。按受欢迎程度显示结果将是一个有用的功能。我不知道如何开始。例如，我们是否应该在每次更新后预处理 html 文件？.NET 中有哪些推荐的索引库？网站上的一些小程序都是使用 C# 完成的。

谢谢女士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:15:13.633

[Lucene.net](https://github.com/apache/lucene.net)可能很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:14:52.697

我首先编写一个简单的程序将所有这些文件内容传输到数据库。然后，您可以正确实施您的搜索，而不必每次都读取所有文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:08:15.737

我不确定它是否在您的预算之内，但正如 user1161318 指出的那样，Google 可以为您完成。

试试谷歌网站搜索 - [http://www.google.co.uk/enterprise/search/products_gss.html](http://www.google.co.uk/enterprise/search/products_gss.html)

# php - 在 symfony 中使用教义插入 \double 值

> ID：13745089
> 
> 赞同：2
> 
> 时间：2012-12-06T13:55:35.817
> 
> 标签：php, symfony, doctrine

我有一个名为 Plato 的类，它扩展了 Producto 女巫包含 de atribute precio。设置器在这里定义：

```
public function setPrecio(\double $precio)
{
   $this->precio = $precio;

   return $this;
} 
```

我试图通过以下方式向数据库添加一个新元素：

```
$plato = new Plato; 
$em = $this->getEntityManager();
 // I have tryed this three ways to insert
$plato->SetPrecio(doubleval($precio));  
$plato->SetPrecio((double) 2);
$plato->SetPrecio(2.0);

$em->flush(); 
```

它给了我以下错误消息：

> 可捕获的致命错误：传递给 Servinow\EntitiesBundle\Entity\Producto::setPrecio() 的参数 1 必须是 double 的实例，double 给定，在 /Users/luis/git/servinowServer-luis/src/Servinow/EntitiesBundle/Entity 中调用/PlatoRepository.php 在第 41 行并在 /Users/luis/git/servinowServer-luis/src/Servinow/EntitiesBundle/Entity/Producto.php 第 169 行中定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:11:03.177

以这种方式修改`setPrecio()`功能

```
public function setPrecio($precio)
{
   $this->precio = $precio;

   return $this;
} 
```

你可以使用类似的东西

```
gettype($precio)[...];
if(is_numeric($precio))[...]; 
```

对于类型控制，在将其设置为之前`$this`

请记住

> 类型提示只能是对象和数组（自 PHP 5.1 起）类型。不支持使用 int 和 string 进行的传统类型提示。

# c++ - 从原始字节创建 bmp 文件的可移植函数？

> ID：13745093
> 
> 赞同：2
> 
> 时间：2012-12-06T13:55:51.420
> 
> 标签：c++, unix, bitmap

我有一个原始字节数组，我想用这些字节制作一个 bmp 文件。也就是说，我必须填写位图头结构和其他内容，然后写下字节，这样我就有了一个格式正确的 bmp 文件。

由于我只需要进行一些快速检查，我想知道是否有一种可移植的方法来执行此操作 - 获取原始字节并将它们保存为 bmp 文件。任何 Windows 版本都不会像我在 Unix 上写的那样。

或者，我可以将这些字节保存为任何其他图像格式 - 我只需要快速查看生成的图片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:21:59.737

这是我用于 .bmp 灰度图像的代码

要保存为彩色位图，只需确保不使用调色板（对于 24 位）

```
void SaveBitmapToFile( BYTE* pBitmapBits, LONG lWidth, LONG lHeight,WORD wBitsPerPixel, LPCTSTR lpszFileName )
{
    RGBQUAD palette[256];
    for(int i = 0; i < 256; ++i)
    {
        palette[i].rgbBlue = (byte)i;
        palette[i].rgbGreen = (byte)i;
        palette[i].rgbRed = (byte)i;
    }

    BITMAPINFOHEADER bmpInfoHeader = {0};
    // Set the size
    bmpInfoHeader.biSize = sizeof(BITMAPINFOHEADER);
    // Bit count
    bmpInfoHeader.biBitCount = wBitsPerPixel;
    // Use all colors
    bmpInfoHeader.biClrImportant = 0;
    // Use as many colors according to bits per pixel
    bmpInfoHeader.biClrUsed = 0;
    // Store as un Compressed
    bmpInfoHeader.biCompression = BI_RGB;
    // Set the height in pixels
    bmpInfoHeader.biHeight = lHeight;
    // Width of the Image in pixels
    bmpInfoHeader.biWidth = lWidth;
    // Default number of planes
    bmpInfoHeader.biPlanes = 1;
    // Calculate the image size in bytes
    bmpInfoHeader.biSizeImage = lWidth* lHeight * (wBitsPerPixel/8);

    BITMAPFILEHEADER bfh = {0};
    // This value should be values of BM letters i.e 0x4D42
    // 0x4D = M 0×42 = B storing in reverse order to match with endian

    bfh.bfType = 'B'+('M' << 8);
    // <<8 used to shift ‘M’ to end

    // Offset to the RGBQUAD
    bfh.bfOffBits = sizeof(BITMAPINFOHEADER) + sizeof(BITMAPFILEHEADER) + sizeof(RGBQUAD) * 256;
    // Total size of image including size of headers
    bfh.bfSize = bfh.bfOffBits + bmpInfoHeader.biSizeImage;
    // Create the file in disk to write
    HANDLE hFile = CreateFile( lpszFileName,GENERIC_WRITE, 0,NULL,
        CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL,NULL);

    if( !hFile ) // return if error opening file
    {
        return;
    }

    DWORD dwWritten = 0;
    // Write the File header
    WriteFile( hFile, &bfh, sizeof(bfh), &dwWritten , NULL );
    // Write the bitmap info header
    WriteFile( hFile, &bmpInfoHeader, sizeof(bmpInfoHeader), &dwWritten, NULL );
    // Write the palette
    WriteFile( hFile, &palette[0], sizeof(RGBQUAD) * 256, &dwWritten, NULL );
    // Write the RGB Data
    if(lWidth%4 == 0)
    {
        WriteFile( hFile, pBitmapBits, bmpInfoHeader.biSizeImage, &dwWritten, NULL );
    }
    else
    {
        char* empty = new char[ 4 - lWidth % 4];
        for(int i = 0; i < lHeight; ++i)
        {
            WriteFile( hFile, &pBitmapBits[i * lWidth], lWidth, &dwWritten, NULL );
            WriteFile( hFile, empty,  4 - lWidth % 4, &dwWritten, NULL );
        }
    }
    // Close the file handle
    CloseHandle( hFile );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:06:34.407

您可以使用[SOIL](http://lonesock.net/soil.html)，它是轻量级的、可移植的，虽然针对 OpenGL，但它可以加载图像（也可以保存图像）并返回原始数据。

这是一些使用示例（来自 SOIL 站点）

```
 /* load an image as a heightmap, forcing greyscale (so channels should be 1) */
   int width, height, channels;
   unsigned char *ht_map = SOIL_load_image
   (
    "terrain.tga",
    &width, &height, &channels,
    SOIL_LOAD_L
   ); 
```

以下是 SOIL 必须提供的可读格式：

```
Readable Image Formats:
BMP - non-1bpp, non-RLE (from stb_image documentation)
PNG - non-interlaced (from stb_image documentation)
JPG - JPEG baseline (from stb_image documentation)
TGA - greyscale or RGB or RGBA or indexed, uncompressed or RLE
DDS - DXT1/2/3/4/5, uncompressed, cubemaps (can't read 3D DDS files yet)
PSD - (from stb_image documentation)
HDR - converted to LDR, unless loaded with *HDR* functions (RGBE or RGBdivA or RGBdivA2) 
```

编辑：如果您愿意，您也可以使用[stb_image](http://nothings.org/stb_image.c)（它也是跨平台和可移植的），它在单个文件中包含所有文档等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T14:19:43.687

以下将为您提供来自字节数组的[.ppm图像。](http://en.wikipedia.org/wiki/Netpbm_format)指定每像素 3 字节的`"P6"`二进制格式，但也支持纯文本和各种形式的灰度。你应该使用它的原因是它很简单，而且大多数 *nix 系统都有一堆 ppmto*-工具：ppmtobmp、ppmtojpeg、...、ppmtopng... 你可以命名它。

```
typedef struct {
    int width;
    int height;
    uint8_t *data;
    size_t size;
} ppm_image;

size_t ppm_save(ppm_image *img, FILE *outfile) {
    size_t n = 0;
    n += fprintf(outfile, "P6\n# THIS IS A COMMENT\n%d %d\n%d\n", 
                 img->width, img->height, 0xFF);
    n += fwrite(img->data, 1, img->width * img->height * 3, outfile);
    return n;
} 
```

还有 ppmtocad……谁能猜到？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-17T12:36:49.043

试试[EasyBMP](http://easybmp.sourceforge.net/)，它是开源的跨平台 C++ 库，用它创建 BMP 文件很有趣：

```
BMP AnImage;
// Set size to 640 × 480
AnImage.SetSize(640,480);
// Set its color depth to 32-bits
AnImage.SetBitDepth(32);

// Set one of the pixels
AnImage(14,18)->Red = 255;
AnImage(14,18)->Green = 255;
AnImage(14,18)->Blue = 255;
AnImage(14,18)->Alpha = 0;

AnImage.WriteToFile("Output.bmp"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T14:15:03.343

[Boost GIL](http://www.boost.org/doc/libs/1_52_0/libs/gil/doc/index.html)支持对 JPG、TIFF 和 PNG 的读/写。

由于高度基于模板，您可以使图像格式适应库。这对你来说可能有点过头了。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-06T16:20:33.233

只需查看 WinGDI 的 typedef`BITMAPFILEHEADER`和`BITMAPINFOHEADER`来自 WinGDI 的 typedef，这些字段很简单。确保您有 16 位 int 用于 WORD 和 32 位 int 用于 DWORD。如果您正在做 RGBRGBRGB... 填写标题并写出数据非常容易...

# jquery - jQuery Validate：容器和 HTML 验证

> ID：13745098
> 
> 赞同：-1
> 
> 时间：2012-12-06T13:56:02.803
> 
> 标签：jquery, jquery-validate, wrapper

我正在使用带有容器功能的 jQuery 验证：所有错误都显示在页面顶部的 ul>li 结构中。

它运行良好，但生成的代码不是有效的 HTML。这是最初的 HTML：

```
<div id="error-container">
    <ul/>
</div> 
```

还有我的javascript代码：

```
<script type="text/javascript">
<!--
$(document).ready(function() {
    var container = $("#error-container ul");
    $(".validate").validate({
        ignoreTitle: true,
        errorLabelContainer: container,
        wrapper: "li",
        meta: "validate",
    });
});
//-->
</script> 
```

问题是标签无效。我尝试重载 jQuery validate 的一些方法，以便在显示错误时自动添加这个 ul 包装器，但是它很难阅读，以至于我失败了。

你有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:40:33.160

将您的标记更改为此 -

```
<div id="error-container">
    <ul></ul>
</div> 
```

# regex - postfix pcre Regex 匹配和替换子字符串

> ID：13745104
> 
> 赞同：1
> 
> 时间：2012-12-06T13:56:29.553
> 
> 标签：regex, postfix-mta

我正在使用 Postfix MTA 并从损坏的 MTA 中获取重要邮件（我无法修复，因为它不受我的控制），它以以下格式发送：

```
RCPT TO: <+49 (681) 12345678> 
```

我需要的是：

```
RCPT TO: 4968112345678 
```

所以我正在寻找一个正则表达式，它首先检查字符串是否以“RCPT TO：”开头，如果这是真的，它需要删除它之后的所有特殊字符，这样只有 [a-zA-Z0-9] 是左。

Postfix 为此类正则表达式提供了一个示例：

```
# Work around clients that send RCPT TO:<'user@domain'>.
# WARNING: do not lose the parameters that follow the address.
#/^RCPT\s+TO:\s*<'([^[:space:]]+)'>(.*)/     RCPT TO:<$1>$2 
```

但几个小时后，我无法适应我的需要。

在此先感谢，马可

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:35:43.630

似乎不可能在一般情况下剥离非字母数字字符的任何组合。但是对于示例中给出的地址，这个正则表达式就足够了：

```
/^[^a-z0-9]*([a-z0-9]+)[^a-z0-9]*([a-z0-9]+)[^a-z0-9]*([a-z0-9]+)$/     $1$2$3 
```

您可以通过 postmap 命令测试正则表达式映射：

```
$ postmap -q "+49 (681) 12345678" pcre:/path/to/regexp_map
4968112345678 
```

要使用这个正则表达式映射添加到后缀配置

```
canonical_maps = prce:$config_directory/regexp_map 
```

阅读有关 canonical_maps 的[ADDRESS_REWRITING_README 。](http://www.postfix.org/ADDRESS_REWRITING_README.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:49:29.037

尝试：`/[^RCPT\sTO\:\s]([a-zA-Z0-9]+)/`过滤掉所有导致`49 681 12345678`. [[1]](http://www.rubular.com/r/Uapn2m52yk)。

另一种更好的方法是将所有不需要的字符*列入黑名单*也是一种选择，但听起来并不理想。 `/([^<+\)\(>]+)/`结果`RCPT TO: 49 681 12345678`。[[2]](http://www.rubular.com/r/015iyaNG3T)

或者也许最好的选择是捕获任何单词字符（字母、数字、下划线）`/(\w+|:)/`导致`RCPT TO: 49 681 12345678`. [[3]](http://www.rubular.com/r/mmJZBNbH99)

所有这些都是用 rubular 测试的，我不知道 Postfix MTA。但我希望这会有所帮助。

永久链接：

1.  [http://www.rubular.com/r/Uapn2m52yk](http://www.rubular.com/r/Uapn2m52yk)
2.  [http://www.rubular.com/r/015iyaNG3T](http://www.rubular.com/r/015iyaNG3T)
3.  [http://www.rubular.com/r/mmJZBNbH99](http://www.rubular.com/r/mmJZBNbH99)

# jquery - 有没有办法使用 jQuery 使绝对定位的 div 可拖动到更宽的宽度？

> ID：13745107
> 
> 赞同：0
> 
> 时间：2012-12-06T13:56:35.403
> 
> 标签：jquery, css, html, drag

[在这里](http://jsfiddle.net/EEtVU/)，我有一个`div`在单击时动画以扩展其宽度的示例。无论如何我可以通过拖动而不是点击来实现这一点？

我真正想要的是一个可拖动的项目，如果用户将其拖动到 100 像素宽度之外的 75 像素，它会自动完成拖动动画，就像在 iOS 的通知栏中一样。

当前的jQuery：

```
$('.handle').toggle(
    function() { $('.bar').animate({right: 0, opacity: 1.0}, { duration: 0, queue: false }); }, 
    function() { $('.bar').animate({right: -165, opacity: 0.6}, { duration: 0, queue: false }); }
);

$('.handle').toggle(
    function() { $('.handle').animate({right: 200, opacity: 1.0}, { duration: 0, queue: false }); }, 
    function() { $('.handle').animate({right: 35, opacity: 0.6}, { duration: 0, queue: false }); }
);​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:38:55.637

您将需要 JQueryUI 或其他一些类似的插件来完成此操作。有了它，您可以使用 $('.handle').draggable(); 使您的栏可拖动。

如果您不想使用您可能对此感兴趣的任何其他插件：

[没有 jquery-ui 的可拖动 div](https://stackoverflow.com/questions/8569095/draggable-div-without-jquery-ui)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:24:50.573

好吧，您的 jsfiddle 示例对我来说有点模糊，要么是您的目标，但我知道您想要这样的东西，对吗？这件事有点棘手，它实际上取决于您的 UI，也可能会根据您的代码变得相当错误。

[http://jsfiddle.net/3Tn2F/](http://jsfiddle.net/3Tn2F/)

```
var bar = $(".bar");
bar.draggable({
    start:function(){
    }
}).mouseup(function(){
    $(this).animate({left:300, opacity: 0.6}, { duration: 1000, queue: false });
});
$(".handle").droppable({
    over: function( event, ui ) {
        bar.trigger( 'mouseup' );

    }
}); 
```

上面的代码基于我提供的 jsfiddle 示例，但可以根据您的情况进行定制。

BR

# xml - XSLT：仅输出当前节点的文本并规范化空格

> ID：13745109
> 
> 赞同：3
> 
> 时间：2012-12-06T13:56:41.620
> 
> 标签：xml, xslt

我有一个具有以下结构的 xml 文档。我正在编写一个转换，我想从节点 B 输出文本，但忽略元素 C 和文本节点“标题”。本质上，我想提取文本“文本在此处”并将其输出到一个新元素中，所有空格都已标准化。有人可以帮忙吗？以下是我迄今为止尝试过的。

```
Input Doc
<A>
  <B>
    <C>title</C>
     text goes here
  </B>
</A>

Required output doc
<d>text goes here</d>

Solution A:
<xsl:template match="B">
  <d>       
    <xsl:copy-of select="./text()"/>                
  </d>
</xsl:template> 
```

问题：元素之间的空白被保留，所以我得到这样的东西：

```
<d>

  Text goes here

</d> 
```

我还尝试`<xsl:value-of select="./text()"/>`在解决方案 A 的模板中使用 value-of 语句 ()，但这根本没有返回任何文本。声明有问题吗？

我应该提到我已经使用以下内容覆盖了默认的文本处理模板：`<xsl:template match="text()" />`

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T14:30:32.910

返回“nothing”的原因`<xsl:value-of select="./text()"/>`是`./text()`它将返回一个由当前节点的所有直接子文本节点组成的节点*集。*`value-of`a 节点集是其*第一*项的字符串值，在这种情况下，它是开始标签`<B>`和开始标签之间的纯空格文本节点`<C>`。这同样适用于下一个最明显的`normalize-space(text())`，因为它再次将节点集转换为字符串（第一个节点值），然后规范化该字符串中的空间。相反，您需要单独规范化每个子文本节点：

```
<d>
  <xsl:for-each select="text()">
    <xsl:value-of select="normalize-space(.)"/>
  </xsl:for-each>
</d> 
```

不过要注意的一件事是，如果您有类似的输入

```
<A>
  <B>
    <C>title</C>
     text goes here
    <C>subtitle</C>
     more text here
  </B>
</A> 
```

然后你会得到输出

```
<d>text goes heremore text here</d> 
```

字幕两侧的位之间没有空格。如果这是一个问题，您可以使用类似的技巧

```
<d>
  <xsl:for-each select="text()[normalize-space(.)]">
    <xsl:if test="position() &gt; 1"><xsl:text> </xsl:text></xsl:if>
    <xsl:value-of select="normalize-space(.)"/>
  </xsl:for-each>
</d> 
```

仅遍历那些包含非空白字符的文本节点子节点，并在除第一个之外的所有子节点之前添加一个空格。

```
<d>text goes here more text here</d> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:12:12.953

我得到的最接近的是[选择`child`轴](http://www.w3.org/TR/xpath/#axes)：`//B/child::text()`。

轴将仅返回作为当前上下文节点的直接子节点的`child`文本节点，因此它不会匹配该`title`节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:21:55.217

试试这个代码！

`<copy-of>`我没有使用模板覆盖！

1.  我把B换成D..

2.  我`<C>`从输出中掉线。这解决了一半的问题，因此`<C>`节点的文本不会出现在输出中。

3.  我将 normalize-space 函数应用于所有文本节点..所以额外的空白将被擦除:)

这是代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" indent="yes"/>
      <xsl:template match="B">
        <d>
          <xsl:apply-templates select="node()"/>
        </d>
      </xsl:template>

      <xsl:template match="C"/>

      <xsl:template match="text()">
        <xsl:value-of select="normalize-space(.)"/>
      </xsl:template>
    </xsl:stylesheet> 
```

# css - Firefox中div的圆角不起作用

> ID：13745113
> 
> 赞同：0
> 
> 时间：2012-12-06T13:56:48.910
> 
> 标签：css, firefox, html, rounded-corners

我想在 Firefox 中为我的 div 添加圆角。我试过了：

```
 -moz-border-radius: 20px; 
```

它不工作。

请问，有没有人有任何替代解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:01:30.903

较新版本的 Firefox 支持简单

```
border-radius: 20px; 
```

你试过吗？否则我需要看更多你的css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:09:30.570

将以下所有三个放入您的CSS

```
-moz-border-radius: 20px; 
-webkit-border-radius: 20px; 
border-radius: 20px; 
```

一些旧版本使用 -moz 和 -webkit ，但最近的浏览器版本采用 CSS3 样式。

来源：[http ://www.the-art-of-web.com/css/border-radius/](http://www.the-art-of-web.com/css/border-radius/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:25:15.683

正如@vidiya 提到的

始终确保涵盖所有基础：

```
-moz-border-radius: 20px; 
-webkit-border-radius: 20px; 
border-radius: 20px; 
```

我建议您查看一下`LESS`，`SASS`以便您可以使用 mixins（CSS 中的函数）

```
 //From LESS
.rounded (@round:"4px") {
    -moz-border-radius: @round; 
    -webkit-border-radius: @round; 
    border-radius: @round; 
} 
```

# ios6 - 地图视图打开 iOS 时动画缩放到位置/地图地标

> ID：13745115
> 
> 赞同：4
> 
> 时间：2012-12-06T13:56:49.657
> 
> 标签：ios6, mkmapview, zooming, mkcoordinateregion

我在其他应用程序（例如 ios 6 星巴克）上看到它，当我的地图视图打开时，我希望它显示整个英国/不列颠群岛的区域，然后我希望它放大到我指定的位置区域点我有.

更新代码：

```
- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view.
[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude = 54.5;
region.center.longitude = -3.5;
region.span.longitudeDelta = 10.0f;
region.span.latitudeDelta = 10.0f;
[mapView setRegion:region animated:NO];

[self performSelector:@selector(zoomInToMyLocation)
           withObject:nil
           afterDelay:2]; //will zoom in after 1.5 seconds
}

-(void)zoomInToMyLocation
{
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude = 51.502729 ;
region.center.longitude = -0.071948;
region.span.longitudeDelta = 0.19f;
region.span.latitudeDelta = 0.19f;
[mapView setRegion:region animated:YES];

[mapView setDelegate:self];

[self performSelector:@selector(selectAnnotation)
           withObject:nil
           afterDelay:0.5]; //will zoom in after 0.5 seconds

}

-(void)selectAnnotation
{

DisplayMap *ann = [[DisplayMap alloc] init];
ann.title = @"Design Museum";
ann.subtitle = @"Camberwell, London";
ann.coordinate = region.center;
[mapView addAnnotation:ann];

} 
```

不知道它是否正确，因为错误是这一行

```
ann.coordinate = region.center; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T15:29:15.947

如果你想从显示一个区域开始然后放大，你必须发出两个或更多的`setRegion`调用，因为`setRegion`它本身并不能让你控制*起始*区域或动画的速度。

在`viewDidLoad`中，设置初始区域，`span`以便整个英国可见（尝试使用 delta`10.0`代替`0.15`）。您也可以设置`animated`为`NO`初始区域。

然后在 结束之前`viewDidLoad`，安排在几秒钟后执行放大：

```
- (void)viewDidLoad
{
    ...

    [self performSelector:@selector(zoomInToMyLocation) 
               withObject:nil 
               afterDelay:5]; //will zoom in after 5 seconds
} 
```

该`zoomInToMyLocation`方法可能如下所示：

```
-(void)zoomInToMyLocation
{
    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
    region.center.latitude = 51.502729 ;
    region.center.longitude = -0.071948;
    region.span.longitudeDelta = 0.15f;
    region.span.latitudeDelta = 0.15f;
    [mapView setRegion:region animated:YES];
} 
```

使用时您可能需要注意的一件事`performSelector`是，如果在计划运行调用之前关闭或取消分配视图，则取消挂起的调用。例如，如果用户在加载视图两秒后关闭视图。三秒钟后，调度的方法可能仍会被调用，但由于视图消失而会崩溃。为避免这种情况，请在适当的`viewWillDisappear:`地方或适当的地方取消任何待处理的执行：

```
[NSObject cancelPreviousPerformRequestsWithTarget:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T06:48:33.447

```
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude = Your Latitude ;
region.center.longitude = Your Longitude;
region.span.longitudeDelta =  0.01f;
region.span.latitudeDelta =  0.01f;
[map setRegion:region animated:YES];
[map addAnnotation:ann]; 
```

# sdk - 我可以在没有 DirectX 11 卡的情况下使用 DirectX 11 SDK 吗？

> ID：13745118
> 
> 赞同：1
> 
> 时间：2012-12-06T13:56:54.167
> 
> 标签：sdk, directx

如果我使用 DX11 SDK 编写 DirectX 11 应用程序，但我没有 DirectX 卡，我可以运行该应用程序吗？

我找不到实际使用 DX11 SDK 的要求。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:41:09.353

是的你可以。您要查找的内容称为[Direct3D 功能级别](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876%28v=vs.85%29.aspx)。使用此范例，您可以编写具有图形卡支持的功能的应用程序。在创建 D3D 设备之前，您可以查询卡片并找到支持的功能级别，然后在设备创建中使用该级别。

当然，您不能在硬件上使用 DirectX 11 提供的新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:44:26.633

[本教程网站](http://www.directxtutorial.com/Lesson.aspx?lessonid=11-4-2)指出，在设置设备和交换链时，即使您没有 DX11 显卡，也可以使用 D3D_DRIVER_TYPE_REFERENCE 的 D3D_DRIVER_TYPE 来探索 DX11 功能。

如需进一步阅读，请单击该链接并向下滚动一半，直到看到 D3D11CreateDeviceAndSwapChain()。

# html - 阻止 Google GMail 将数字转换为锚定电话

> ID：13745119
> 
> 赞同：0
> 
> 时间：2012-12-06T13:56:55.140
> 
> 标签：html, css, gmail, anchor

我注意到我从我的应用程序发送到 GMail 邮箱的电子邮件将快递跟踪号转换为`<a href="tel:289173892173">`谷歌自动。

我的标记，在它到达谷歌之前，是：

```
<span style="font-weight: bold;">6367878366</span> 
```

但是，Google 必须对 span 的内容进行某种数字长度检测，并自动将其更改为锚点。

有没有办法在 GMail 中防止这种情况发生？

邮箱：

![href_tel](../Images/03cea081706c98bff84697561f27396b.png)

外表：

![在此处输入图像描述](../Images/f59dd1f0baf7210b781c579279cdf828.png)

# sql-server - SQL Server 管理 - 索引属性键盘快捷键？

> ID：13745121
> 
> 赞同：1
> 
> 时间：2012-12-06T13:57:07.193
> 
> 标签：sql-server, keyboard, ssms

在 SQL Server Management Studio (SSMS) 中进行开发时，我经常想从*对象资源管理器*中检查特定表上的多个索引的属性：

![SSMS 截图](../Images/fd45832695a6005cf682356f03d5ce53.png)

*拉起索引属性以查看索引中包含的列，可以在Object Explorer*中双击索引名称，或者使用*[Menu Key](http://en.wikipedia.org/wiki/Menu_key)*然后使用*Up*选择*Properties*，然后*按 Enter*。

我检查了[SQL Server Management Studio 键盘快捷键](http://msdn.microsoft.com/en-us/library/ms174205.aspx)列表，但没有找到我问题的答案。

是否有可用于拉出索引属性的一键快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:04:09.727

我刚刚尝试找到在 SSMS 中注册的任何与对象资源管理器中的索引有关的上下文菜单，但不幸的是，它看起来像是 100% 动态构建的。所以不可能指定快捷方式。通常，您可以为任何命令分配快捷方式，即在 SSMS 中注册为菜单命令。但这里没有运气。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:05:04.520

不，我不相信。通常，如果有人想要以这种速度访问有关索引的信息，他们只需`sp_helpindex`在 T-SQL 中发出命令或查询`sys.indexes`他们想要的信息。

# twitter-bootstrap - Bootstrap 导航栏中的 Angular UI Select2

> ID：13745124
> 
> 赞同：0
> 
> 时间：2012-12-06T13:57:15.187
> 
> 标签：twitter-bootstrap, angularjs, jquery-select2, angular-ui

Bootstrap 导航栏中 Angular-UI 的 Select2 出现错误

```
TypeError: Object [[object HTMLInputElement]] has no method 'is' 
```

请参考[http://plnkr.co/edit/yCG5M9](http://plnkr.co/edit/yCG5M9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:26:20.420

你需要在 AngularJS 之前加载 jQuery

只需将顺序更改为

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script> 
```

**编辑**（blesh）：这是因为如果 angular 在加载时看不到 JQuery，则`tElm`传递给该函数的（角度元素）参数`compile`是 jqLit​​e 对象。如果 Angular 看到 JQuery 已*首先*加载，则`tElm`它将是一个完整的 JQuery 对象，并且`is()`将可用。

# arduino - Arduino - 检测外部电源

> ID：13745125
> 
> 赞同：1
> 
> 时间：2012-12-06T13:57:19.010
> 
> 标签：arduino, battery

我有一个连接到电机和伺服器的外部电源（6v），在我的 arduino 板上我有几个由板载 5v 供电的 LED。外部电源连接到一个开关，这样我就可以打开电机和伺服（以节省电池）。我的主板只是闪烁不同的 LED。我想要发生的是，当我的外部电源打开时，LED 停止闪烁并且执行移动伺服和电机的代码。结果我有一个布尔值叫做`intro`. 为真时执行 LED 代码，为假时执行电机和伺服代码。我遇到的唯一问题是Arduino如何知道外部电源是否打开，以便布尔值可以设置为false？arduino 有没有办法检测外部电源是否打开（例如检查电机/伺服的引脚？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T03:03:26.187

一般的想法是将外部电源连接到 I/O 引脚，以便您可以读取其状态。您还需要在 I/O 引脚上进行下拉，以便在未连接电源时它不会浮动并给出随机值。

不要将 6V 直接连接到 Arduino I/O 引脚，它会远远高于 Vcc，引脚上的钳位二极管会激活。一个像 10K 这样的串联电阻来降低钳位电流可能没问题，但仍然不是最佳设计实践。我建议使用 3V3 齐纳二极管钳位，例如本页所示：

[http://www.kevinmfodor.com/home/My-Blog/microcontrollerinputprotectiontechniques](http://www.kevinmfodor.com/home/My-Blog/microcontrollerinputprotectiontechniques)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:18:48.067

检查 IO 引脚上的最大输入电压，但您应该能够将外部电源连接到引脚并驱动中断。

然后可以使用中断来决定电源是打开（上升沿）还是关闭（下降沿）。

# vb.net - 计时器显示值 - VB

> ID：13745129
> 
> 赞同：0
> 
> 时间：2012-12-06T13:57:28.270
> 
> 标签：vb.net

我无法弄清楚如何在 VB 中停止后简单地显示计时器的值。

我尝试过类似的东西，`MsgBox(Val(Timer2))`但显然不是那么简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:24:42.577

也许秒表类对你有用：

```
 Dim sw As New Stopwatch
    sw.Start()
    'do something, for example:
    Threading.Thread.Sleep(1000)
    sw.Stop()
    MessageBox.Show(sw.ElapsedMilliseconds) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:18:41.187

我想你想要的是这个

```
Dim StartTime = DateTime.Now()

'Do race stuff

Dim EndTime = DateTime.Now()

Dim ElapsedSeconds = EndTime.Subtract(StartTime).TotalSeconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:20:53.437

计时器不这样做。但是您可以使用各种日期/时间函数来做同样的事情。

```
Dim startTime As DateTime
Dim elapsed As DateTime
' ...
Timer2.Start()
startTime = Now

' after race finishes, then:
elapsed = Now - startTime 
```

这给了你一个[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)对象。

或者

```
Dim startTime As Integer = Environment.TickCount
' ...
Dim elapsed As Integer = Environment.TickCount - startTime 
```

这为您提供了以毫秒为单位的总时间。

# vb.net - vb.net 将数据从一种形式传输到另一种形式

> ID：13745130
> 
> 赞同：0
> 
> 时间：2012-12-06T13:57:28.620
> 
> 标签：vb.net, get, data-transfer

我如何从一种形式获取数据到另一种形式。

例子：

在表单 1 中，当用户在 inputbox("") 中输入内容时，将数据发送到表单 2/并在其中显示。

```
Sub form1()
  InputBox("Enter something " & Num, "Read Names")
  form2.show
end sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:18:18.170

有很多方法可以做到这一点，例如创建一个 form2 的实例，并在显示它之前设置它的一个控件的属性。如果 form2 有一个名为 Label1 的标签控件：

```
 Dim userName As String = InputBox("Whats your name?")

    Dim infoForm As New Form2
    infoForm.Label1.Text = userName
    infoForm.ShowDialog() 
```

根据您的评论，您可以像设置标签一样将字符串添加到列表框中：

```
 Dim userName As String = InputBox("Whats your name?")

    Dim infoForm As New Form2
    infoForm.lstItinerary.Items.Add(usersName)
    infoForm.ShowDialog() 
```

# wpf - 为什么这个标签在绑定时看起来与静态值不同？

> ID：13745131
> 
> 赞同：1
> 
> 时间：2012-12-06T13:57:36.907
> 
> 标签：wpf, xaml, mvvm

我在边框上有一个标签。如果我对带有此标记的标签内容使用静态值：

```
 <Border Background="#FFEEEEEE"
          Grid.Column="4"
          Grid.Row="3"
          Margin="2 0">
    <Label Content="0"
           Name="ui_quantityFooter"
           HorizontalAlignment="Center"
           FontSize="20" />
  </Border> 
```

它看起来像这样：

![正确对齐的标签](../Images/3868cf4a2fe83c9de71e668d374028f0.png)

但是，如果我使用此标记绑定到 ViewModel 中的整数值：

```
 <Border Background="#FFEEEEEE"
          Grid.Column="4"
          Grid.Row="3"
          Margin="2 0">
    <Label Content="{Binding ExpectedQuantity}"
           Name="ui_quantityFooter"
           HorizontalAlignment="Center"
           FontSize="20" />
  </Border> 
```

它看起来像这样： ![错误对齐的标签](../Images/4b87ec0458f417947fc344ff5aacea23.png)

为什么他们没有相同的外观？

**编辑**：ExpectedQuantity 定义为：

```
public int ExpectedQuantity {
  get { return _expectedQuantity; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:18:45.500

将数据类型设置为字符串会导致问题消失，因此当其数据类型为 int 时，样式肯定会影响标签的内容。

# server-push - 无法在 cometd 频道中发布

> ID：13745135
> 
> 赞同：0
> 
> 时间：2012-12-06T13:57:53.990
> 
> 标签：server-push, cometd

当我尝试在频道中发布字符串时出现此错误：

```
java.lang.AbstractMethodError: org.cometd.client.BayeuxClient$BayeuxClientChannel.publish(Ljava/lang/Object;)V 
```

这是试图发布的代码：

```
public class EnviadorMensagem implements Runnable {

private String nomeCanal;
private Mensagem mensagem;
private ClientSession cliente;
private boolean pausado = true;
private boolean cancelado = false;

@Override
public void run() {
    while (pausado) {
        pausar();
    }
    if (!cancelado) {
        converterEEnviar();
    }
}

private void pausar() {
    synchronized (this) {
        try {
            this.wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

private void converterEEnviar() {
    ConversorMensagem conversor = new ConversorMensagem();
    ClientSessionChannel canal = cliente.getChannel(nomeCanal);
    canal.publish(conversor.converter(mensagem)); //<- the error happens here!!
}

public void ativar() {
    synchronized (this) {
        pausado = false;
        this.notifyAll();
    }
}

public void cancelar() {
    synchronized (this) {
        cancelado = true;
    }
    ativar();
}

public void setNomeCanal(String nomeCanal) {
    this.nomeCanal = nomeCanal;
}

public void setMensagem(Mensagem mensagem) {
    this.mensagem = mensagem;
}

public void setCliente(ClientSession cliente) {
    this.cliente = cliente;
}
} 
```

如您所见，该类在单独的线程中运行。这是我的 pom.xml 的一部分：

```
<dependencies>
    <dependency>
        <groupId>org.cometd.java</groupId>
        <artifactId>cometd-java-client</artifactId>
        <version>2.5.1</version>
    </dependency>
    <dependency>
        <groupId>org.cometd.java</groupId>
        <artifactId>bayeux-api</artifactId>
        <version>2.5.1</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-client</artifactId>
        <version>8.1.7.v20120910</version>
    </dependency>
</dependencies> 
```

有人知道怎么解决吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:27:15.340

当您针对某个版本的库编译代码时，您会得到`AbstractMethodError`，但在运行时您正在使用另一个，没有该方法，或者具有不同的签名。

仔细检查您的类路径和您正在使用的[CometD](http://cometd.org)库版本。

# android - 推送通知 iOS 和 Android 客户端到客户端原生代码

> ID：13745136
> 
> 赞同：4
> 
> 时间：2012-12-06T13:57:55.177
> 
> 标签：android, ios, notifications, push-notification, push

所以我正在计划一个适用于 iOS 和 Android 的应用程序。这两个应用程序都将使用本机代码，因此 iOS 6 上的 Objective-C 和带有 Android SDK 4.0 (API 14) 的 Java。

该应用程序将连接到一个共享的 MySQL 数据库 (C/JDBC)。

它应该能够在两个方向上从两个平台发送和接收推送通知。通知将不包含任何有效负载数据，它们仅用于通知数据库中有新数据，以及描述新数据类型的字符串（如“事件 X 有更新可用”）。接收方应根据数据库中的新条目更新其数据。

我正在寻找使用 Google GCM 和 Apple APNS 推送服务来实现该功能的非付费服务/服务器软件/内置功能。

在研究时，我已经找到了一些可能的解决方案（PushWoosh、pushd、PushSharp、PubNub、OpenPush），但它们都不符合我的要求（基于单声道、付费、使用套接字......）。

你知道这样的解决方案吗？我也愿意接受其他建议。

问候，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:57:00.983

这是很有可能的。这是一个很深的话题，对于一个堆栈帖子来说太深了。

这是[iOS](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)的教程，这里是[android GCM的谷歌文档](http://developer.android.com/google/gcm/gs.html)

这些绝对是您想要使用的工具！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:25:28.333

一开始我想指出我还没有开发任何带有推送通知的 Android 应用程序。但是对于我的 iOS 应用程序，我在服务器 API 中声明了一个 php 函数，并且当 MySQL 数据库中的相关用户发生更改时，我调用该函数并***触发***APNS。它使用 Apple 提供的服务器证书和用户凭据与相关用户（如 SMS 系统）进行交互。我认为可以自定义该功能以使用 Google 的证书（如果有的话，我不知道 Google 如何处理 Push通知）..

# php - 查询成功时链接到页面

> ID：13745137
> 
> 赞同：1
> 
> 时间：2012-12-06T13:57:59.030
> 
> 标签：php, mysql

```
$nieuweklant  = "INSERT INTO klanten (voornaam,achternaam,tussenvoegsel,email,telefoonnummer,woonplaats,nieuwsbrief) 
VALUES ('$voornaam','$achternaam','$tussenvoegsel','$email','$telefoonnummer','$woonplaats','$nieuwsbrief')";
mysql_query($nieuweklant) or die(mysql_error()); 
```

当上面的查询成功时，我想链接到一个页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:00:46.190

尝试这个

```
<?php
$result = mysql_query('SELECT * WHERE 1=1');
if (!$result) {
    die('Invalid query: ' . mysql_error());
}
else
header('Location: http://www.example.com/');

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:17:16.423

使用 javascript

```
<?php

$query = mysql_query("Your Query Here");
if($query){

?>
<script>
window.location = "index.php" ;
</script>

<?php
}
? 
```

>

# nservicebus - 重命名 NServiceBus.Host.exe

> ID：13745144
> 
> 赞同：0
> 
> 时间：2012-12-06T13:58:18.807
> 
> 标签：nservicebus

[这很可能是一个愚蠢的问题，但除了NServiceBus Yahoo Groups](http://tech.groups.yahoo.com/group/nservicebus/message/16218)之外，我找不到任何关于此的文档或任何人真正问过这个问题的地方。我想重命名我的 NServiceBus.Host.exe，即使在我安装服务时它们在服务组中有不同的名称，但在任务管理中所有服务都是 NServiceBus.Host.exe。我已经尝试重命名 exe，但是这当然有部署问题，它根本不会按照我发布的 url 运行，遇到端点配置错误。

我查看了配置选项，但没有看到任何看起来像这样的选项，如果有人知道这样做的好方法，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:59:19.867

这听起来不是一个好主意。那条路注定布满坑洼。

为了在任务管理器中区分进程，有一个非常简单的解决方案。

转到查看-> 选择列，然后添加“命令行”，它只是从底部向上的几个。

这将向您显示特定 NServiceBus.Host.exe 实例的完整路径以及命令行参数，这些参数可以为您提供有价值的信息，例如所使用的[配置文件](http://docs.particular.net/nservicebus/hosting/nservicebus-host/profiles)。

# php - PHP中的回显页面标题

> ID：13745149
> 
> 赞同：0
> 
> 时间：2012-12-06T13:58:23.640
> 
> 标签：php, html, tags, title

下面的脚本很好地回显了数组及其各个元素，但是当数组元素用于通过在开始的 head 标记之后运行脚本来设置页面标题时，我仍然得到“无标题文档”作为页面标题。

此外，如果我尝试单独回显 $title 并将标题标签 <> 放在 php 标签之前和之后，则标题被设置为文档类型定义。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

如果尚未设置，似乎 echo 设置了之前所需的相关 HTML 标记。什么工作？

```
<?php
include 'contentStream.php' ;
$upc = $_GET['upc'];
if (isset($upc))
{
global $upc ;
$query = "SELECT * FROM tracks WHERE album_upc='$upc'";
connect();
$db = mysql_select_db("XXXXX");
$results = mysql_query($query, $connection) ;
$result = mysql_fetch_assoc($results);
$title = $result['title']." by ".$result['author'] ;
echo "<title>".$title."</title>";
unset($results);
unset($query);
mysql_close($connection) ;
}
else
{
    echo "<title> MYsUPERsITe </title> " ;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:02:59.590

这是在`<head>`元素内执行的吗？如果不是，则需要。

我不确定 contentstream.php 是什么，但看起来您可能在页面中的错误位置运行它。

还可以尝试将 $title 更改为 $myTitle 以查看 $title 是否已设置在其他位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:18:45.867

您的问题似乎是您在页面的非 PHP 部分已生成`<title>`标签*后尝试更改标签的内容。*这种方法在 PHP 这样的服务器端环境中不起作用。

一种解决方案是使用 PHP 生成整个 HTML 页面，将其存储在一个变量中，并在`echo()`完成后将其输出。

在您的页面顶部，我将运行并解析数据库查询并构建一个`$html`字符串以供稍后回显。像上面这样的多个`echo()`语句可能会变得丑陋，并且可能会给您带来标题问题，如果您后来最终将 cookie 或会话变量添加到您的站点：

```
<?php
    include ("my_cool_lib.php");
    $html = "<!DOCTYPE html>";
    $html .= "<html><head>";
    $db = connect_to_db();
    $resultset = run_a_query($db);
    $title = get_title($resultset);
    $html .= "<title>$title</title>";
    $html .= "</head><body>";
    $html .= "<h1>Results</h1>";
    // loop through $resultset 
    // $html .= track info
    // end loop
    $html .= "</body></html>";
    echo $html;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:03:07.227

您需要设置当前缺少的相关 HTML 标记。

`<html> <head> <title>Your title</title> </head> <body> body stuff </body> </html>`

# vb.net - 使用 vb.net 将文件夹名称循环到变量

> ID：13745155
> 
> 赞同：0
> 
> 时间：2012-12-06T13:58:45.903
> 
> 标签：vb.net, loops, directory, var

我的周末是循环，但是我需要一个用于今天的目的。有人知道我如何将父目录中的所有文件夹名称循环到变量吗？

我需要使用 vb.net 来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:08:39.073

```
 Dim folders As String() = IO.Directory.GetDirectories("c:\your\starting\directory\")
   For Each folder As String In folders
        'do something
   Next 
```

# javascript - javascript表单匹配字段

> ID：13745156
> 
> 赞同：1
> 
> 时间：2012-12-06T13:58:46.920
> 
> 标签：javascript, html, forms, validation

我不是 JavaScript 编码员，但从这个链接复制了一些 js 并尝试在我的表单中使用，但没有成功。可能是基本设置，例如`onclick`这是不对的。只是猜测，因为我必须自己添加。我也在使用 Tectite 的 formmail，它正在验证表单。该网站是 Tectite.com。任何帮助表示赞赏！

这是代码：

```
// Checking to make sure email field is on the form
function validatecompare() {
    if (typeof f.email2 != "undefined") {
        if ((f.email2.value != f.email1.value) && (f.sameAsShip.checked)) {
            customAlert("email2", bnadd_msg_005);
            if ((typeof TeaLeaf != "undefined") && (typeof TeaLeaf.Client != "undefined") && (typeof TeaLeaf.Client.tlAddEvent != "undefined")) {
                var nVO = {
                    ErrorMessage: bnadd_msg_018
                }
                TeaLeaf.Event.tlAddCustomEvent(subtype, nVO);
            }
            return false;
        }
        //Validate that email address has @ and .
        if (f.email2 && (f.email2.value != f.email1.value) && (!editEmail(f.email2.value, 'Email Address'))) {
            return false;
        }
        if (addrType == atBill) {

            if (f.email2.value != f.email1.value) {
                customAlert("email2", bnadd_msg_005);
                if ((typeof TeaLeaf != "undefined") && (typeof TeaLeaf.Client != "undefined") && (typeof TeaLeaf.Client.tlAddEvent != "undefined")) {
                    var nVO = {
                        ErrorMessage: bnadd_msg_005
                    }
                    TeaLeaf.Event.tlAddCustomEvent(subtype, nVO);
                }
                return false;
            } else {
                if (f.email2 && (f.email2.value != f.email1.value) && (!editEmail(f.email1.value, 'Email Address'))) {
                    return false;
                } else return true;
            }
        }
    }
    break;
} 
```

这是我的表格：

```
<form action="/formmail/formmail.php" onsubmit="return validatecompare()" method="post" enctype="multipart/form-data"  name="ContactForm" id="ContactForm">
    <input type="hidden" name="env_report" value="REMOTE_HOST,REMOTE_ADDR,HTTP_USER_AGENT,AUTH_TYPE,REMOTE_USER" />

    <!-- STEP 2: Put your email address in the 'recipients' value.
                 Note that you also have to allow this email address in the
                 $TARGET_EMAIL setting within formmail.php!
    -->
    <input type="hidden" name="recipients" value="sales_*_comtechnorthamerica.com" />

    <!-- STEP 3: Specify required fields in the 'required' value - or leave unchanged.
            NOTE: DO NOT put your email address and name here.
            "Your email address" and "Your name" are error messages for your users to see,
            not placeholders for you to replace.
    -->
    <input type="hidden" name="required" value="FullName:-Your name,Title:-Your title,Company:-Your company,Website:-Your website,Address:-Your address,Telephone:-Your telephone,email1:-Your email address,email2:-Your Confirm email address" />

    <!-- STEP 4: Put your subject line in the 'subject' value. -->
    <input type="hidden" name="subject" value="Comtech Contact Form Submission Testing" />

    <!-- ALL DONE! Visit our site for HOW TO guides and more complex features. -->

    <!-- this derives (creates) "email" and "realname" special fields from the input fields -->
    <input type="hidden" name="derive_fields" value="email=email,realname=FullName" />

    <!-- this excludes the "email" and "realname" special fields from the body of the email you receive -->
    <!-- <input type="hidden" name="mail_options" value="Exclude=email;realname" /> -->
    <input type="hidden" name="good_url" value="http://www.comtechnorthamerica.com/thankYou.php" />
         <table width="380" border="0" cellspacing="0" cellpadding="6">
            <tr>
              <td valign="top" class="layoutFormBox"><h1>Information Request Form</h1>
                <table width="360" border="0" align="center" cellpadding="4" cellspacing="0">
                  <tr>
                    <td><div align="right">
                        <input type="checkbox" name="Send_product_literature" id="Send_product_literature" value="Yes" />
                    </div></td>
                    <td><div align="left"> Send product literature</div></td>
                  </tr>
                  <tr>
                    <td><div align="right">
                        <input type="checkbox" name="Have_a_salesperson_contact_me" id="Have_a_salesperson_contact_me" value="Yes" />
                    </div></td>
                    <td><div align="left"> Have a salesperson contact me</div></td>
                  </tr>
                </table>                
                <br />
                <table width="360" border="0" align="center" cellpadding="6" cellspacing="0">
                  <tr>
                    <td width="335" valign="top">&nbsp;</td>
                    <td valign="top"><div class="required" align="left">* denotes required field</div></td>
                  </tr>
                  <tr>
                    <td width="70" valign="top"><div align="right">Name:<span class="required">*</span></div></td>
                    <td width="335" valign="top"><div align="left">
                        <input type="text" name="FullName" id="FullName" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Title:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                        <input type="text" name="Title" id="Title" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Company:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                        <input type="text" name="Company" id="Company" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Website:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                      <input type="text" name="Website" id="Website" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Address:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                      <textarea name="Address" rows="4" id="Address"></textarea>
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Telephone:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                      <input type="text" name="Telephone" id="Telephone" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Cell Phone:</div></td>
                    <td valign="top"><div align="left">
                      <input type="text" name="Cell" id="Cell" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Fax:</div></td>
                    <td valign="top"><div align="left">
                      <input type="text" name="Fax" id="Fax" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Email:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                      <input type="text" name="email1" id="email1" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Confirm Email:<span class="required">*</span></div></td>
                    <td valign="top"><div align="left">
                      <input type="text" name="email2" id="email2" />
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Primary Interest:</div></td>
                    <td valign="top"><div align="left">
                      <select name="Primary_Interest" id="Primary_Interest">
                        <option>In-line spring coiling, testing, spring detangling systems</option>
                        <option>Laser marking systems</option>
                        <option>Feeder bowl technology</option>
                        <option>Drum technology for spring &amp; parts handling / feeding</option>
                          </select>
                    </div></td>
                  </tr>
                  <tr>
                    <td valign="top"><div align="right">Comments:</div></td>
                    <td valign="top"><div align="left">
                      <textarea name="Comments" rows="6" id="Comments"></textarea>
                    </div></td>
                  </tr>
                  <tr>
                    <td colspan="2" valign="top"><div align="left">How did you hear about Comtech?</div></td>
                    </tr>
                  <tr>
                    <td valign="top"><div align="right"></div></td>
                    <td valign="top"><div align="left">
                      <select name="How_did_you_hear_about_Comtech" id="How_did_you_hear_about_Comtech">
                        <option>Google Search</option>
                        <option>Direct Mailing</option>
                        <option>Thomas Register</option>
                        <option>Trade Magazine</option>
                        <option>Tradeshow</option>
                        <option>Comtech Literature</option>
                        <option>Sales Representative</option>
                        <option>Customer Referral</option>
                        <option selected="selected">Please Select</option>
                      </select>
                      </div></td>
                  </tr>
                  <tr>
                    <td height="37" valign="top">&nbsp;</td>
                    <td valign="top"><input type="submit" onclick="validatecompare()" value="Submit" /></td>
                  </tr>
                </table>
                </form> 
```

# ruby-on-rails - CarrierWave/Mongoid：将文件从一条记录复制到另一条记录

> ID：13745161
> 
> 赞同：2
> 
> 时间：2012-12-06T13:59:02.800
> 
> 标签：ruby-on-rails, mongodb, carrierwave, gridfs

我们有以下型号：

*   模板
*   文档

两者都安装了 CarrierWave Uploader，我可以将文件附加到记录中。这些文件存储在 MongoDB 的 GridFS 中。这很好用。

然后，用户应该能够`Document`使用`Template`. 这意味着`Template`应将附加到的文件复制到新创建的`Document`对象。

我使用以下代码复制文件：

```
template = Template.find(tmpl_id)
new_document = Document.new
new_document.source = template.source.file 
```

`source`是安装载波上传器的属性。这个示例确实有效。但仅适用于不大于一个 GridFS 块的文件。较大的文件不会被复制。这意味着目标文件的大小保持为 0 字节，尽管我没有收到错误消息。

CarrierWave 包含在我们的 Gemfile 中，如下所示：

```
gem "carrierwave-mongoid", '0.3.0.alpha', git: "git://github.com/jnicklas/carrierwave-mongoid.git", branch: "mongoid-3.0" 
```

（现实世界要复杂一些。我在这里简化了一些事情来专注于这个问题。）

有没有人有一些关于如何使用 CarrierWave 和 GridFS 将文件从一个记录/模型复制到另一个记录/模型的示例或最佳实践？

# c# - LINQ 验证大纲编号（1.1、1.2 等）

> ID：13745163
> 
> 赞同：3
> 
> 时间：2012-12-06T13:59:05.433
> 
> 标签：c#, linq

我目前正在使用正常循环来检查数字列表是否有序。

我目前正在学习 LINQ，我想知道如何在 LINQ 中实现以检查数字序列的顺序是否正确。

例如，我有这个序列号列表：

```
1.0
1.1
1.2
1.4
2.0 
```

程序需要将第 1.4 行标记为错误，因为缺少 1.3。

如何使用 LINQ 实现这一目标？

感谢你的帮助。:)

这就像目录：

1.1 后跟 1.3 无效，1 后跟 2 有效。1.4 后跟 2 有效。

这是我正在使用的代码，我认为它仍然有很多失误：

```
using (System.IO.StreamReader reader = new System.IO.StreamReader("D:\\test.txt"))
{
    double prevNumber = 0;

    while (reader.Peek() >= 0)
    {
        double curNumber = double.Parse(reader.ReadLine());
        double x = Math.Round(curNumber - prevNumber, 1);

        if (x == 0.1)
        {
            prevNumber = curNumber;
        }

        else
        {
            int prev = (int)Math.Floor(prevNumber);
            int cur = (int)Math.Floor(curNumber);

            if ((cur - prev) == 1)
            {
                prevNumber = curNumber;
            }
            else
            {
                //error found
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:50:56.087

此方法采用文件名并返回不正确版本的行号数组。对于您的示例，它返回`{ 4 }`.

它只处理 form 的数字`x.y`，因为这似乎是您希望它处理的所有内容。

```
static int[] IncorrectLines(string filename)
{
    // Parse the file into an array of ints, 10* each version number.
    var ints =  File.ReadLines(filename)
        .Select(s => (int)(10 * decimal.Parse(s))).ToArray();
    // Pair each number up with the previous one.
    var pairs = ints
        .Zip(ints.Skip(1), (p, c) => new { Current = c, Previous = p });
    // Include the line numbers
    var withLineNos = pairs
        .Select((pair, index) => new { Pair = pair, LineNo = index + 2 });
    // Only keep incorrect lines
    var incorrect = withLineNos.Where(o => ! (         // not one of either:
            o.Pair.Current - 1 == o.Pair.Previous ||   // simple increment
            (o.Pair.Current % 10 == 0 &&               // major increment
             (o.Pair.Current / 10) - 1 == o.Pair.Previous / 10)
        ));
    return incorrect.Select(o => o.LineNo).ToArray();
} 
```

诚实地？我认为你最好用一个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:28:45.343

所以，如果我理解正确，你想遍历一个排序的双精度列表（精度为小数点后一位）并确定是否——如果整数存在小数位——它们的差异不大于 0.1 .

我们假设您的列表已排序：

```
List<double> contents = new List<double>() {1.0, 1.1, 1.2, 1.4, 2.0}; 
```

您可以在该列表中调用 IsValid：

```
bool IsValid(List<double> contents) {
  //Get the distinct whole numbers
  var wholeNumbers = contents.Select(t => Math.Floor(t)).Distinct();
  foreach (var num in wholeNumbers) {

    //Get the "subcontents" for this whole number (chapter)
    var subContents = contents.Where(t => Math.Floor(t) == num).ToList();
    for (int i = 0; i < subContents.Count() - 1; i++) {

      //If the subcontents are different by something other than 0.1, it's invalid
      if (subContents.Count() > 1 && Math.Round(subContents[i + 1] - subContents[i], 1) != 0.1) {
        return false;
      }
    }
  }
  return true;
} 
```

（请注意，如果子类别是 1.14、1.24、1.34 等，它仍然认为是有效的。）

# c# - 刷新 DomainSource.DomainContext

> ID：13745167
> 
> 赞同：0
> 
> 时间：2012-12-06T13:59:16.063
> 
> 标签：c#, wpf, silverlight, wcf-ria-services

我正在开发一个使用 RIA 服务和实体框架构建的 silverlight 应用程序。

在将数据保存到数据库后单击保存按钮，我从域源获取属性并且必须对它们进行一些操作。

我的代码如下

```
var ctx = (RadiographyContext)this.DomainSource.DomainContext;
   foreach (var e in ctx.Energies)
            {
              // some calculations here
            } 
```

但是域上下文没有更新的值。它在页面加载时加载了值。如何刷新 Domainsource ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:01:16.970

您需要重新加载域上下文。 [域数据源中的 silverlight 4 RIA 更新项仅在刷新后更新](https://stackoverflow.com/questions/3899721/silverlight-4-ria-update-item-in-domaindatasource-only-updates-after-refresh)

查看您为[LoadBehavior提供的选项](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.client.loadbehavior%28v=vs.91%29.aspx)

> MergeIntoCurrent：来自新读取的实例的值被合并到缓存的实例中，用于未修改的属性值。此合并中不会丢失任何更改。
> 
> KeepCurrent：缓存的实例不改变，新读取的实例被丢弃。
> 
> RefreshCurrent：缓存实例的所有成员都被新读取的实例的当前值覆盖，无论它们是否已被修改。此外，实体的原始状态也设置为新读取的实例。

# java - 从文件中获取一个重复的字段，而不需要加载整个文件

> ID：13745168
> 
> 赞同：4
> 
> 时间：2012-12-06T13:59:15.733
> 
> 标签：java, c++, python, .net, protocol-buffers

假设我有一个这样的 .proto 结构（简化）

```
Message DataItem {
  required string name = 1;
  required int32 value = 2;
}

Message DataItemStream {
  repeated DataItem items = 1;
} 
```

服务器将生成`DataItemStream`并将其写入磁盘。我们加载这个文件，一切都很顺利，没有问题。

这对我们来说效果很好，但我们的客户群已经增长，生成文件流的软件的使用也在增长。

问题出现了，因为重复`items`字段可以有成千上万个项目，但我们只对其中的一个子集感兴趣。我们已经挖了一点，只看到了遵循谷歌流式[建议](https://developers.google.com/protocol-buffers/docs/techniques)的解决方案（向我们存储[的 s](https://stackoverflow.com/a/5587024/496405)[添加大小](https://stackoverflow.com/a/9150005/496405) [前缀`DataItem`](https://stackoverflow.com/a/5587024/496405)，然后单独解析每条消息或[使用](https://stackoverflow.com/a/5588303/496405) [`CodedInputStream`/`CodedOutputStream`](https://stackoverflow.com/a/2341658/496405)或编码二进制线格式（base64）和用换行符分隔，那么我们就可以很容易地得到我们感兴趣的子集。

这些中的任何一个都对我们有用，但需要对生产代码进行一些更改以更改文件的保存方式（基于服务器的代码已经很长时间没有更改并且被他们的管理层认为几乎无法触及（在他们看来，不要'如果没有损坏就不要修复它）...）

我们已经为以不同方式流式传输消息的服务器重新创建了模块，但收到了来自那些维护人员关于推送我们的更改的抨击。对我们来说，根据需要更改代码要容易得多（政治上），因为我们可以完全控制其开发周期。

有没有办法仍然使用这个原始的消息流，但只选择要加载的消息子集是智能的？（如果这很重要，我们真的不在乎我们必须使用哪种语言，我们有 c++、python、java 和 .NET 方面的经验（按经验顺序））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:40:21.580

我会将此视为数据库问题：您有一个文件表示具有单个记录 (DataItems) 的表 (DataItemStream)。您似乎想从表中选择连续的 DataItems 范围。这意味着 DataItemStream 中 DataItem 的顺序很重要，实际上它编码了一个隐藏的主键 - DataItemStream 中 DataItem 的“数组”索引也就是行号。

在大多数数据库中，在数组数据结构中，每一行（或数组项）占用的空间相同，因此访问第 n 项很容易。但是，放在 DataItemStream 中的 DataItems 是可变长度的，所以这种简单的方法是行不通的。

使用数据库隐喻，另一种有效查找记录的方法是使用索引——本质上是另一个表，但要小得多，其中包含指向主要数据结构的指针。索引通常构造为（PK，指针）元组的表。在这种情况下，您可以拥有一个索引文件，它本质上是一个 int32 的内存映射数组。索引中的每个值都指向数据文件中该 DataItem 记录开始的字节偏移量。

例如，如果数据文件有 1m 条记录，那么您的索引将为 4MB（1m 条记录 * len(int32) = 1m * 4 字节）。如果您需要扫描数据文件中的记录 777777 到 888888，您：

1.  读取索引以获取 DataItemStream 中感兴趣的字节范围。请注意，查找操作确实非常快：
    1.  打开索引文件
    2.  寻找（例如在 Java RandomAccessFile.seek() 中，在 Python fileObject.seek() 中）起始索引 int32 (777777*4) 并读取它。这是起始字节偏移量
    3.  寻找结束索引 int32 (888888*4) 并读取它。这是结束字节偏移
    4.  关闭索引文件
2.  读取索引指定的DataItemStream文件的字节范围：
    1.  打开 DataItemStream 文件
    2.  在文件中寻找起始字节偏移量
    3.  读取流直到结束字节偏移（记得减1）
    4.  关闭 DataItemStream 文件

2\. about 的一种稍微不同的方法可能是首先为指定的字节范围创建一个新文件。该文件现在*只*包含那些感兴趣的记录。

索引文件是如何创建的？

**编辑：PB 格式的描述**：实际索引文件的构建可以通过简单地传递数据文件来生成。所有字段都以字节开头，[消息类型](https://developers.google.com/protocol-buffers/docs/encoding#embedded)后跟段。以“特殊”方式编码，使用每个字节的 MSB 作为延续信号，如此[处](https://developers.google.com/protocol-buffers/docs/encoding#varints)所述。这意味着可以避免几乎所有数据格式的复杂性，因此索引器可以非常简单。

您可以将索引文件视为缓存 - 如果存在，您的代码库可以使用最新的索引，或者如果缺少它，则自动创建它。

这种方法允许索引感知的代码有效地进行，并且不会更改任何遗留程序的数据格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:48:44.693

鉴于您在评论中对我的问题的回答：文件的格式是什么？您可以在搜索到任意位置后同步到项目的开头吗？

面对类似的情况（超过 1 GB 的日志文件，在特定时间间隔内查找日志条目），我们最终对文件进行了二进制搜索。这有点棘手，而且代码不是真正可移植的，但基本思想是确定文件的长度（`stat`在 Unix 下使用，或在 Windows 下使用它的等价物），然后打开文件（在 Windows 下以二进制模式） ; 寻找到中间，向前扫描下一条记录的开始，然后与我们正在寻找的内容进行比较，依此类推，通过我们是在我们想要的位置后面还是前面来确定下一个寻找位置。*如果*您可以在从任意位置（这又取决于文件的格式）开始时找到记录的开头，则此方法有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:30:40.147

如果您的主要瓶颈是 RAM 而不是磁盘访问速度，为什么不插入一个代理/过滤器，逐条读取整个文件消息（我的意思是`DataItem`消息），但只保留和转发您感兴趣的部分？听起来它可以缓冲您感兴趣的整个部分，而不会冒溢出的风险。

如果您能弄清楚如何检测消息中流的开始，您还可以改进代理以查找缓冲区文件，但这是一种性能改进，不会影响代理与其余部分的接口管道，或最大内存占用。

您的问题是，由于`DataItem`消息嵌入在 a 中`DataItemStream`，因此 google API 会强制您一次性加载整个消息`DataItemStream`。为了避免这种情况，您可以编写一些丑陋的代码来跳过`DataItemStream`信封并公开序列，`DataItem`就好像它们没有嵌入一样。这将取决于 PB 序列化的内部结构，但由于您的客户非常重视稳定性，您可以指望它不会很快改变。如果它确实发生了变化，那么是时候推送您喜欢的消息布局并切换到您已经开发的解决方案了。

如果实际的消息格式没有比您显示的复杂得多（例如，没有太多的可选字段或多级嵌入消息），那么导航文件布局应该很简单`CodedInputStream`（无需更改当前文件布局）。阅读第一个`DataItem` *应该*只是从 and 开始`skipRawBytes()`，`skipField()`然后阅读每条消息`readMessage()`。

但我知道谷歌 API 的设计目的不是从单个流中读取消息序列，所以这可能太简单了。如果是这样，您应该仍然能够找到第一个字段 1 的偏移量`DataItem`，使用 读取它`readString()`，根据需要前进到字段 2 的开头，使用 读取它`readInt32()`等等。然后您的代理可以丢弃该消息或重新组合它并将其传递给其余代码。

我想你已经想到了这些方面的东西，所以这种方法可能出于某种原因不可行或不可取？或者也许它太丑了，你宁愿处理改变文件布局的政治成本......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T23:34:01.943

恐怕，您必须自己进行外部 PB-stream 解码。一旦你找到了你的物品的开始（希望没有包装），你就可以对单个物品使用 PB。然后你就可以处理无穷无尽的流了。当然你必须做一些认真的测试，但我会试一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T04:34:12.080

如果您确定使用正确规范化的模式运行的真正数据库引擎无法完成这项工作（我自己测试一下，数据库引擎人员一直在考虑如何解决这样的难题） ，然后试试这个：

批量处理足够多的记录，以使集合的最小字段的数据至少占据相当多的扇区。将这些记录中字段的数据写入以分隔从 4KB 边界开始的连续块，在每组的前面都有一个标题，说明在哪里可以找到块边界。然后只读取您想要的字段的块。

如果您确实需要性能，但仍然有一些棘手的问题，请将这些块放在不同磁盘上的单独文件中。在您跳过非常大的数据块之前，跳过这些内容的速度与阅读这些内容一样慢。

编辑：我看到您不想更改磁盘格式，但是由于您试图避免读取不需要的数据，因此实际上别无选择。

# networking - youtube 是否在视频传输中使用前向纠错 (FEC)？

> ID：13745171
> 
> 赞同：1
> 
> 时间：2012-12-06T13:59:26.223
> 
> 标签：networking

我注意到 youtube 的视频流通常通过 TCP/HTTP 到达。但是，有人告诉我youtube的服务器在视频传输中使用了FEC。对我来说似乎相当复杂 - 因为 TCP 是可靠的（即无损），所以不需要 FEC？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T05:16:21.197

YouTube 使用 HTTP/TCP 将视频缓冲到其主站点上的 Flash 播放器中。视频存储在 Google 视频的内​​容分发网络上。它没有尽可能快地流式传输到您的计算机。但是，对于 3g 手机，m.youtube.com 使用 RTSP 流式传输视频。因此，YouTube 使用这两种传输方法。

要考虑的另一件事是，YouTube 之所以受欢迎，是因为“它可以正常工作”。路由器并不总是很好地支持 RTSP，这会阻止它在桌面上使用。另外值得注意的是，m.youtube.com 不会流式传输与 youtube.com 相同的视频文件。

如果您进行一些wireshark 捕获，您应该能够捕获协议和视频流。

是的，目前视频流本身没有 FEC，但在 Chrome 上，他们已经开始在其骨干网中包含一些请求（参见 Quic 协议）。

# jquery - 无限滚动数据预加载

> ID：13745172
> 
> 赞同：1
> 
> 时间：2012-12-06T13:59:29.247
> 
> 标签：jquery, infinite-scroll

我在页面上实现了无限滚动，效果很好，当页面滚动到底部时，数据已加载，但我想做某种数据预加载以防止用户每次到达底部时等待的页面。我真的需要一个建议，因为我真的不知道该怎么做（我看到的一个很好的例子是在 Pinterest 上，他们在滚动到达页面底部之前预加载数据）。多谢你们

*我的代码片段*

```
$(window).scroll(function(){

    var $scrlTop = $(window).scrollTop();
    var $docHght = $(document).height();
    var $wndwHght = $(window).height();

    if  ($scrlTop == $docHght - $wndwHght){                    

        loadMore();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:06:22.167

与其`loadMore()`在滚动到达最底部时调用，不如在此之前一段时间？

```
if ($scrlTop >= $docHght - $wndwHght * 2) {
   loadMore();
} 
```

# notepad++ - Notepad++，看看保存的运行命令做了什么

> ID：13745175
> 
> 赞同：21
> 
> 时间：2012-12-06T13:59:35.330
> 
> 标签：notepad++

我知道如何使用“运行->运行”或 F5 自动运行命令。我也知道如何使用快捷方式保存命令。我的问题是，鉴于我已经保存了一个带有快捷方式的命令，并且它现在出现在我的“运行”菜单中，并且我忘记了我在其中作为运行命令输入的内容，我该如何检查它是？如果我使用“运行->修改快捷方式/删除命令...”，似乎我只能更改快捷方式，但无法首先检查命令是什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-07T07:58:05.907

所有快捷方式都保存在一个名为的文件`shortcuts.xml`中，您可以在其中看到它们的作用。

根据您的 Windows 版本，此文件可能位于不同的位置。

*   `C:\Users\[username]\AppData\Roaming\Notepad++\shortcuts.xml`

*   `C:\Documents and Settings\[username]\Application Data\Notepad++\shortcuts.xml`

使用环境变量：

```
%appdata%\Notepad++\shortcuts.xml 
```

# jquery - 链式选择 - 放置脚本的位置

> ID：13745185
> 
> 赞同：0
> 
> 时间：2012-12-06T14:00:01.840
> 
> 标签：jquery

这个问题更多的是关于我的 jquery ajax 脚本的正确位置。

我有 4 个下拉菜单。第一个处于活动状态，其他 3 个处于非活动状态。因此，首先，我有以下内容：

`<head>`我的标签中的 jQuery ：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
    $(document).ready(function(){
        $('#sel1').change(function() {
           var m = $(this).attr("value");
                $.ajax({
                    type: "POST",
                    url: "ajax.php",
                    dataType: "html",
                    data: "a=getSel2&m="+m+"",
                    success: function(txt){
                        $("#div_sel2").html( txt );
                    }
                });
            return false;
        });
    });
</script> 
```

page1.php：

```
Selection 1:
<select id="sel1">
    <option value="1">1</option>
    <option value="2">2</option>
</select>

Selection 2:
<div id="div_sel2"></div>

Selection 3:
<div id="div_sel3"></div>

Selection 4:
<div id="div_sel4"></div> 
```

HTML 和 jQuery 位于`page1.php`. select onchange 触发 AJAX 请求`ajax.php`和 function `getSel2`。结果填充 div `div_sel2`。

这是我不确定的地方。的结果`getSel2`是另一个类似于 的下拉菜单`sel1`。显然，只有它的选项和`id="sel2"`. 我需要让这个选择也触发另一个 AJAX 请求，`getSel3`然后填充`div_sel3`。但是如果我把这个 AJAX 代码放在里面`page1.php`，它就不起作用。如果我将该代码放在我的`getSel2`结果中，它也不起作用。

执行包含 AJAX 调用的页面的正确方法是什么，然后需要在填充 div 后触发额外的 AJAX 调用？

**解决方案：** 我使用了这个插件： http: [//www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

# c# - 非阻塞数据结构，多读，单写

> ID：13745186
> 
> 赞同：1
> 
> 时间：2012-12-06T14:00:02.707
> 
> 标签：c#, task-parallel-library, nonblocking

我有一个非常具体的场景：

1.  几个（多核而非多核）TPL 任务（长时间运行，很可能是线程）希望以并行/重叠的方式读取数据集合（例如 IDictionary）
2.  一个 Writer 线程想要定期更新整个集合
3.  最大限度地减少读者的延迟是第一目标，即使这意味着选择一个稍微陈旧的集合（即集合更新正在进行中）
4.  读者**必须**获得完整的收藏，部分更新的收藏无效

最初的想法是避免 (4) 每次发生更新时都会创建一个新集合，并且一旦创建，编写器线程就可以简单地更改提供给读者的集合引用。隐含的假设是这将是一个原子操作，具有旧引用的读者将不受影响，新读者可以访问新的完整集合。

当我尝试它时，我得到了一个部分更新的集合，所以我需要知道这种方法是否*可以*工作，然后再继续进行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T12:53:12.847

自发布以来已经有一段时间了，但 IIRC 我正在使用旧集合作为构造函数参数创建一个新集合 - 即浅拷贝。

对元素进行适当的复制并用它们实例化新容器给了我需要的数据项的解耦，以确保没有“撕裂”。

# .net - 如何使用 .net 互操作连接 AX 表？

> ID：13745187
> 
> 赞同：1
> 
> 时间：2012-12-06T14:00:09.110
> 
> 标签：.net, axapta, x++, proxy-classes, dynamics-ax-2012

我正在尝试使用 .net 与 X++ 和代理类的互操作在 Visual Studio 中为 AX 2012 创建一个实用程序，我在我的项目中添加了必要的表，我可以单独访问表并可以通过 .next() 方法循环它们，但是我想加入这些表，以便获得我想要的结果（我想显示一个带有项目 ID、名称别名、颜色、大小信息的网格）。

`InventTable`为此，我无法弄清楚如何加入`InventDim and`InventDimCombination`。你们能告诉我如何加入 AOT 表，而不必在 Visual Studio 中使用传统的 .net 业务连接器方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:08:24.477

升级到 AX 2012 R2。然后使用[LINQ](http://kamalblogs.wordpress.com/2012/10/25/programming-improvements-with-dynamics-ax-2012-r2/)。一个[代码示例](http://msdn.microsoft.com/en-us/library/jj677293.aspx)。

**更新：**

如果不可能，则在 AX 中或从 .Net 以编程方式创建 AX 查询。然后使用查询获取 AX 记录。一个[工作示例](http://community.dynamics.com/product/ax/axtechnical/b/daxmusings/archive/2011/05/05/ax-2012-amp-net-coding-business-logic-in-c.aspx)。

或使用[AX 2012 AIF 查询 AIF Web 服务](http://ax2012aifintegration.blogspot.dk/2012/05/microsoft-dynamics-ax-2012-application_14.html)。

# javascript - jQuery 可排序和可放置列表

> ID：13745191
> 
> 赞同：6
> 
> 时间：2012-12-06T14:00:16.253
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable, droppable

所以我正在寻找一种让我在同一个元素上同时使用可排序和可放置的方法。假设我有一个包含 5 个元素的列表，这些都是可排序的。我想要做的是当一个元素被放在另一个元素之上时，它将附加到该元素并退出列表，例如：

```
<ul>
    <li>List Item</li>
    <li>List Item</li>
    <li>List Item</li>
    <li>List Item</li>
    <li>List Item</li>
</ul> 
```

元素已被删除

```
<ul>
    <li>List Item</li>
    <li>List Item</li>
    <li>List Item</li>
    <li>List Item 
        <ul>
              <li>List Item Dropped</li>
        </ul>
    </li>

</ul> 
```

如果您有关于如何执行此操作的答案或指南，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:52:28.320

HTML：

```
<ul id="theUL">
    <li class="item">List Item</li>
    <li class="item">List Item</li>
    <li class="item">List Item</li>
    <li class="item">List Item</li>
    <li class="item">List Item</li>
</ul> 
```

这是`sortable`您的 UL 的代码。您需要配置`change`事件。当 sort 事件发生时发生 change 事件，否则表示 drop 事件发生。

```
$("#theUL").sortable({
    revert: true,
    items: "li",
    change: function( event, ui ) {ui.helper.addClass("change");},
    beforeStop: function( event, ui ) {ui.helper.removeClass("change");}
}); 
```

在可丢弃代码中，检查是否发生更改，如果没有，则表示已丢弃。

```
$(".item" ).droppable({
    accept: function(el) {
        return el.hasClass('item');
    },
    drop: function (event, ui) {
        item=ui.draggable;
        if(!item.hasClass('change')){
            //dropped!
        }
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T20:26:50.017

考虑到您可以在不使用 Droppable 的情况下执行此操作。可以用`connectWith`. 它只需要在那里添加第二个列表。

```
$(function() {
  $(".sort").sortable({
    connectWith: ".sort",
    handle: "span.ui-icon",
    placeholder: "ui-state-highlight"
  });
  $("#sortable").disableSelection();
});
```

```
.top,
.child {
  list-style-type: none;
  margin: 0;
  padding: 0;
  width: 60%;
}

.child {
  padding-bottom: 0.5em;
}

.top li {
  margin: 0 3px 3px 3px;
  padding: 0.4em;
}

.top li span {
  margin: 3px;
  cursor: grab;
}
```

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<ul class="sort top">
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 1
    <ul class="sort child">
      <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 1.1</li>
    </ul>
  </li>
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 2
    <ul class="sort child"></ul>
  </li>
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 3
    <ul class="sort child"></ul>
  </li>
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 4
    <ul class="sort child"></ul>
  </li>
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 5
    <ul class="sort child"></ul>
  </li>
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 6
    <ul class="sort child"></ul>
  </li>
  <li class="item ui-state-default"><span class="ui-icon ui-icon-grip-dotted-vertical"></span>Item 7
    <ul class="sort child"></ul>
  </li>
</ul>
```

如果需要，您可以创建一个函数，在初始化时为您附加所有这些。

```
$(function() {
  function makeChildLists(target, class){
    $("li", target).each(function(i, el){
      $("<ul>", {
        class: "child " + class
      }).appendTo(el)
    });
  }

  makeChildLists($(".top"), "sort");

  $(".sort").sortable({
    connectWith: ".sort",
    handle: "span.ui-icon",
    placeholder: "ui-state-highlight"
  });
  $("#sortable").disableSelection();
}); 
```

# batch-file - Windows 批处理文件 + 控制台 exe

> ID：13745195
> 
> 赞同：3
> 
> 时间：2012-12-06T14:00:26.253
> 
> 标签：batch-file, console, exe

我一直在尝试创建一个将文本传递给控制台应用程序的批处理文件。在这种情况下，它是一个将大型 .dat 文件修剪为指定的开始/停止时间和日期的 exe。它需要文件名、开始、停止和 ay(es) 响应来开始剪切。下面的脚本有效，但在提交最终的“y”响应后，.exe 终止，甚至没有尝试开始剪切。

谁能看到可能出了什么问题？尝试过 ping 延迟、暂停、/等待 - 效果相同。

```
@echo Off

Set program=c:\rtdm_cutter.exe

(
echo 20121126_191613_09224_RTDM.BIN 
echo 2012/11/25 15:00:00
echo 2012/11/25 15:15:00
echo y
) |start /realtime /B /wait %program% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T20:23:09.397

我会以不同的方式编写脚本，类似于：

```
@echo off  
:: script.bat  
SET programx=c:\rtdm_cutter.exe
IF "%1"=="" ( SET one=20121126_191613_09224_RTDM.BIN ) ELSE ( SET one=%1 )
IF "%1"=="" ( SET two=2012/11/25 15:00:00 ) ELSE ( SET one=%2 )
IF "%1"=="" ( SET thr=2012/11/25 15:15:00 ) ELSE ( SET one=%3 )
IF "%1"=="" ( SET answer=Y ) ELSE ( SET answer=%4 )
IF "%4"=="" ECHO %answer% | start /realtime /B /wait %programx% %one% %two% %thr%
IF "%4"=="" GOTO :END    
ECHO %answer% | cmd.exe /C %programx% %1 %2 %3    
:END
pause 
```

然后，这样称呼它（例如）：

```
CALL .\script.bat blah.BIN "2012/11/25 15:00:00" "" "Y" 
```

不保证此代码会起作用。我猜。但希望你能明白。

# c# - 使用 MEF 的多线程 EF

> ID：13745204
> 
> 赞同：2
> 
> 时间：2012-12-06T14:01:07.320
> 
> 标签：c#, multithreading, entity-framework, task-parallel-library, mef

我正在编写某种并行执行各种任务的调度程序。我使用 MEF 作为 IoC 容器。因为我*知道*共享 ObjectContext 的静态实例不是一个好主意，所以我决定每个线程都有一个实例。我是这样实现的：

```
[Export(typeof(IDatabaseFactory))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class DatabaseFactory : IDatabaseFactory
{
    [Import]
    public IServiceResolver ServiceResolver { get; set; }

    [ThreadStatic]
    private static IEntityModel _dataContext;

    public IEntityModel Get()
    {
        if (_dataContext == null)
        {
            Debug.WriteLine("*************************");
            Debug.WriteLine(string.Format("Created Context Instance on Thread {0}", Thread.CurrentThread.ManagedThreadId));
            Debug.WriteLine("*************************");
        }

        return _dataContext ?? (_dataContext = ServiceResolver.GetService<IEntityModel>());
    }

    public void Dispose()
    {
        Debug.WriteLine("^^^^^^^^Disposing Context^^^^^^^^");

        if (_dataContext != null)
        {
            _dataContext.Dispose();
            _dataContext = null;
        }
    }
} 
```

注意 _dataContext 字段上的 ThreadStatic 属性；此代码失败，输出如下：

```
*************************
Created Context Instance on Thread 9
*************************
-- Running Main Thread on thread 9
-- Scheduling servicetask of type ActiveDirectorySynchronisationServiceTask on thread 14
-- Scheduling servicetask of type LogCleanerServiceTask on thread 15
-- Scheduling servicetask of type TranscriptParseServiceTask on thread 17
-- Scheduling servicetask of type MailServiceTask on thread 16
*************************
*************************
Created Context Instance on Thread 15
*************************
Created Context Instance on Thread 17
*************************
Created Context Instance on Thread 16
*************************
************************* 
```

带有以下错误消息：

```
{"The transaction operation cannot be performed because there are pending requests working on this transaction."} 
```

请注意，实际错误并不总是相同的（有时“底层提供程序在打开时失败”等），这让我相信这是一个多线程问题。但我没看到问题？

ObjectContext 的实例之间是否共享连接？我正在使用 EF4.0，SQL Server Express 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:02:50.813

您需要 MARS（多个活动结果集）， http: [//msdn.microsoft.com/en-us/library/h32h3abf (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/h32h3abf(v=vs.80).aspx)

EF 在可能的情况下尝试共享与 SQL 的连接，这需要在连接字符串级别启用上述功能。只有当您同时拥有多个活动上下文（多线程应用程序或关闭不佳的上下文）时，您才会真正看到此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:31:36.117

我找到了解决这个问题的方法。我`[PartCreationPolicy(CreationPolicy.NonShared)]`在 ObjectContext 类定义中添加了一个。可能通过未显式定义此属性而使用了共享引用。

# java - 休眠：在合并（）期间避免持久化字段

> ID：13745208
> 
> 赞同：0
> 
> 时间：2012-12-06T14:01:27.700
> 
> 标签：java, hibernate, blob, dozer

我有一个 web 应用程序，用户可以在其中上传文件（通过`multipart/form-data`），并将它们与元数据一起存储在带有 Hibernate（`@Entity class Document`）的数据库中。

目标表有一个 BLOB 列`content`，其中保存了文件的内容。然后允许上传文件的用户在基于 GWT 的 UI 中修改一些元数据（例如原始文件名）。为此，我使用[Dozer](http://dozer.sourceforge.net)将`Document`实例转换为一个`ClientDocument`实例，该实例没有该`content`字段并且可以为 GWT 序列化。一旦修改后的`ClientDocument`实例从浏览器到达，我将其转换回`Document`并执行：

```
ClientDocument document = ...;
Document entity = dozerBeanMapper.map(document, Document.class);
Session session = sessionFactory.getCurrentSession();
session.merge(entity); 
```

此时`entity`'`content`列被清除，因为 Dozer 显然没有填写相应的 BLOB 数据。

有什么办法可以避免在 BLOB`content`期间更新这个特定的 BLOB 列`merge()`？我已经看到[Not committing an hibernate entity field to the DB](https://stackoverflow.com/questions/9858526/not-committing-an-hibernate-entity-field-to-the-db)，但该`@Transient`解决方案对我不起作用，因为我需要获取`content`BLOB 以在后端进行其他操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:14:20.460

您可以告诉 Hibernate 根本不要更新该字段

```
<property name="fieldName" insert="true" update="false"/> 
```

使用注释它将是这样的：

```
@Column(insertable = true, updatable = false) 
```

请注意，该字段是可插入的，这意味着它将被插入，但下次您要更新实体时，它不会被更新。

# iphone - 放大/缩小时 MKAnnotationView 错误更改了图钉图像

> ID：13745211
> 
> 赞同：2
> 
> 时间：2012-12-06T14:01:35.180
> 
> 标签：iphone, objective-c, ios, mkmapview, mkannotationview

我使用了注释图并为图钉使用了不止一张图像，但是每当我放大或缩小时，它会将所有图钉更改为一张图像。

我从 Web 服务获取位置并识别它们，我使用字符串 ( `CustAttr`) 作为“T”或“P”。

问题是来自网络服务的最后一次调用使`CustAttr = T`当我放大或缩小时，它会调用 mapView`viewForAnnotation`方法并将它们全部绘制出来，`T`并且所有`P`引脚都已更改。

这是该方法的代码：

```
-(MKAnnotationView*) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
{

if ([annotation isKindOfClass:[MKUserLocation class]]) {
    return nil;

}
static NSString* AnnotationIndentifer = @"AnnotationIdentifier";

if ([custAttr isEqualToString:@"T"]) // ATMs
{
    MKAnnotationView* pinView;
    pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIndentifer];

    MapAnnotation* mapAnnotation = annotation;
    pinView.canShowCallout = YES;

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
    pinView.rightCalloutAccessoryView = rightButton;

    if (mapAnnotation.isClosest) {
        pinView.image = [UIImage imageNamed:@"Closest_ATM.png"];

    }
    if (mapAnnotation.isOffline) {
        pinView.image = [UIImage imageNamed:@"Offline_ATM.png"];
    }
    pinView.annotation = annotation;
    return pinView;        

}else if ([custAttr isEqualToString:@"P"]) // POIs
{
    MKAnnotationView* pinView;
    pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIndentifer];

    pinView.canShowCallout = YES;
    pinView.image = [UIImage imageNamed:@"Location_POI.png"];
    pinView.annotation = annotation;
    return pinView;
}

return nil;
} 
```

我该如何解决这个问题？有没有一种方法可以阻止它在放大/缩小时调用此方法，或者是否有另一种方法让它像在同一图像中一样再次绘制它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:16:36.697

`custAttr`变量（您在委托方法之外设置）并不总是与`annotation`调用委托方法的变量同步`viewForAnnotation`。

如果地图需要在缩放或平移后再次显示注解视图，则委托方法不一定在之后立即调用，`addAnnotation`或者`addAnnotations`可以为每个注解多次调用。

当它再次被同一个注解调用时，`custAttr`变量不再匹配。

您需要向`custAttr`您的类添加一个属性（我建议使用不同的名称）`MapAnnotation`并在创建注释时（在调用之前`addAnnotation`）设置它。

例如：

```
MapAnnotation *ann = [[MapAnnotation alloc] init];
ann.coordinate = ...
ann.title = ...
ann.subtitle = ...
ann.custAttr = custAttr; // <-- copy to the annotation object itself
[mapView addAnnotation:ann]; 
```

然后，在 中，从参数中`viewForAnnotation`读取`custAttr`属性（在将其转换为 之后），而不是引用外部声明的。*`annotation`*`MapAnnotation *``custAttr`

您可能希望为`custAttr`属性使用不同的名称`MapAnnotation`以避免混淆。

# haskell - Cabal IPPrint 包无法构建

> ID：13745212
> 
> 赞同：0
> 
> 时间：2012-12-06T14:01:39.837
> 
> 标签：haskell, ghc, ghci

我试图让[这个彩色的 ghci 提示](http://www.reddit.com/r/haskell/comments/144biy/pretty_output_in_ghci_howto_in_comments/)工作。我收到以下错误，我怀疑这是由于 cabal 没有更新正确的包。有人有什么想法吗？

```
; cabal install IPPrint 
[...]
System/Unix/Chroot.hs:23:49:
    Module `System.Process' does not export `showCommandForUser'
cabal: Error: some packages failed to install:
Extra-1.42 depends on Unixutils-1.52 which failed to install.
Unixutils-1.52 failed during the building phase. The exception was:
ExitFailure 1
ipprint-0.4.1 depends on Unixutils-1.52 which failed to install. 
```

提示应如下所示：

![haskell ghci 颜色提示](../Images/a3f3d2d017c316d3b85bb425f18acd6b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:20:08.690

[`showCommandForUser`](http://hackage.haskell.org/packages/archive/process/1.1.0.1/doc/html/System-Process.html#v%3ashowCommandForUser)已在 1.1 版本的[`process`](http://hackage.haskell.org/package/process)软件包中添加。您需要 ghc-7.2 或更高版本才能拥有它（进程是引导包之一，除非您非常了解自己在做什么，否则不建议安装 GHC 附带的版本以外的版本；重新安装引导包可能会导致其中的损坏已安装的软件包）。

如果您有较旧的 GHC，无论如何升级 GHC 是个好主意。

# c# - 我可以在 Linq 生成的传入新对象中使用 get/set 方法吗？

> ID：13745215
> 
> 赞同：0
> 
> 时间：2012-12-06T14:01:57.540
> 
> 标签：c#, linq, class

这是我的课，例如：

```
public class Point
{
    public string Min { get; set; }
    public string Max { get; set; }

    public Point()
    {

    }
} 
```

我正在通过 linq to xml 构建动态对象：

```
var list = xDoc.Descendants("item").Select(item => new
{
    NewPoint = new Point()
}); 
```

现在，我想为每个`NewPoint`值`item.Min`和`item.Max`.

例如`NewPoint.Min = item.Min`and `NewPoint.Max = item.Max`，没有在方法中创建具有 2 个参数的 Class 构造函数。

是否可以？希望问题很清楚...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:04:10.580

您可以使用对象初始化器：

```
Point = new Point() { Min = n["min"], Max = n["max"] } 
```

（或者无论如何你得到你的价值观`n`）

或者，您可以将整个代码块放入您的`Select`：

```
.Select(n => {
    var point = new Point();
    point.Min = n["min"];
    point.Max = n["max"];
    return new { Point = point };
}); 
```

* * *

另请注意：除非您还选择其他东西，否则您不需要

```
n => new { Point = new Point() } 
```

您可以只使用`n => new Point()`并以 a`IEnumerable<Point>`而不是`IEnumerable<AnonymousClassContainingPoint>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:04:32.443

```
var list = xDoc.Descendants("item").Select(n => new
{
    Point = new Point()
    {
       Min = n.Min,
       Max = n.Max,
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:10:33.393

如果您只想要一个带有`Point`s 的列表，我会简化 linq：

```
var list = xDoc.Descendants("item").Select(item => 
    new Point { Min = item.Min, Max = item.Max }); 
```

# android - Android上的OpenGL线段光栅化

> ID：13745222
> 
> 赞同：2
> 
> 时间：2012-12-06T14:02:16.537
> 
> 标签：android, opengl-es, android-ndk, tegra

设*p [a]*为 (0.5, *y* ) 处的点，*p [b]*为 (5.5, *y* ) 处的点。如果我们画一条从*p [a]*到*p [b]**的线段，我们会在x*轴上得到一个 5 像素的线段。问题是这些像素到底在哪里？

根据[OpenGL ES 2.0 规范 3.4.1](http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf)：

> 当*p [a]*和*p [b]*位于片段中心时，片段的这种表征通过一个修改简化为 Bresenham 算法：在此描述中产生的线是“半开的”，这意味着最终片段（对应于*p [b]*）未绘制。

*如果我们从p [a]*到*p [b]*画一段，我们得到像素 1 到 5（*x*坐标）。*p [a]*位于第一个像素的中心，*p [b]*位于第 6 个像素的中心。如果我们从*p [b]*到*p [a]*我们得到 2 到 6。这就是我在 iPhone 4s 上得到的结果。但在 Android（Nexus 7~~和 emulator~~）上，结果始终是 1 到 5（方向无关紧要）。绘图代码完全相同（使用NDK）。

所以问题是哪种行为是正确的？我应该使用什么解决方法在两个系统上获得相同的结果？

**编辑**

在 Mac OS 上，如果您运行以下代码（使用简单的`NSOpenGLView`子类）：

```
glClearColor(0, 0, 0, 1);
glClear(GL_COLOR_BUFFER_BIT);
glColor3f(1.0f, 0.85f, 0.35f);
float pa = 0.5;
float pb = 5.5;
float y =  5.5;
glOrtho(-50, 50, -50, 50, -1, 1);
glBegin(GL_LINES);
{
    //pa to pb - lower line
    glVertex3f(pa, y, 0.0);
    glVertex3f(pb, y, 0.0);
    ++y;
    //pb to pa - upper line
    glVertex3f(pb, y, 0.0);
    glVertex3f(pa, y, 0.0);
}
glEnd();
glFlush(); 
```

你得到这个结果： ![在此处输入图像描述](../Images/de54a3e250681cfa5a7a8bc8849aa999.png)

![截屏](../Images/f7b7c47b0b733afc7a6e3376ceaba3c4.png)

所以这是预期的结果。似乎 Nexus 7 对规范有不同的解释，或者我可能需要启用一些特殊设置。

**编辑2：**

我的模拟器不适合屏幕，它正在重新调整屏幕输出，它产生了一种假象，即模拟器与设备有同样的问题。通过 DDMS 截屏后，很明显模拟器产生了预期的结果：![模拟器](../Images/836f2b054ab87211dd1f15efc11deb98.png)

但设备正在产生以下结果：![关系_7](../Images/68a76a740461865594c5113164abe0b1.png)

要重现此问题，请将 gl_code.cpp 文件的内容替换为[以下代码](http://pastebin.com/5wpbRupJ)并运行*hello-gl2* ndk 示例项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:39:12.267

Quoth 您链接到的规范：

> 由于菱形退出规则的初始和最终条件可能难以实现，因此允许使用其他线段光栅化算法，但须遵守以下规则：
> 
> 1.  该算法生成的片段的坐标在 x 或 y 窗口坐标中与菱形退出规则生成的相应片段的偏差不得超过一个单位。

因此，不幸的是，这似乎是一种法律偏差。

对于解决方法，如果它们可能在两个光栅化器上产生相同的结果，我自己会尝试使用 0.25 或 0.75 而不是 0.5 等坐标。

或者在开始时对单行进行栅格化，然后查看您的栅格器使用的是哪个规则，然后再调整所有坐标。

# c# - 获取 SQL 列名和值

> ID：13745226
> 
> 赞同：0
> 
> 时间：2012-12-06T14:02:28.630
> 
> 标签：c#, sql, parsing

我想问如何在不执行语句的情况下从 SQL 查询中提取列名及其各自的值。

例如：

```
select * from table where fieldname = 'fieldvalue' 
```

我想从查询中提取“FieldName”和“FieldValue”。

```
Insert into table (field,field2,field3) 
values ('fieldvalue','field2avlue','field3'svalue') 
```

我想从查询中提取“field”、“field2”和“fieldvalue”、“field2avlue”、“field3'svalue”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:26:11.450

根据您对史蒂夫的回答，您是在谈论自己解析它吗？如果您有任何可以通过查看表元数据（如上面的“select *”中的“*”）来解决的问题，那么您不能仅基于代码来执行此操作。您也必须拥有表元数据。如果您真的在谈论做您在此处所说的事情，那么您就是在谈论重新创建 DBMS 本身的一个主要组件。就像史蒂夫说的那样——这是一项艰巨的任务。

如果您不尝试编写自己的 SQL 解析器，并且您确实可以访问应用程序中的数据库，那么这实际上非常容易。出现这也不是一个不合理的问题 - 可能存在真正的应用程序，您需要结果集元数据而不运行一些可能具有巨大执行时间的查询或其他类似限制。

要获取元数据而不需要任何显着的执行时间，在相关表上放置任何锁等，请在您的 where 子句中放置一个谓词，该谓词由保证失败的文字值组成。所有现代 DBMS 都足够聪明，可以对其进行优化以不返回任何行，但大多数用于检索结果的 API 仍然捕获结果集元数据。您将执行查询，但查询将运行得很快，不会锁定任何内容，并为您提供结果元数据。

例子：

```
select 
    <lots of stuff>
from
    <complicated subquery>
where 
    <there are a ton of predicates>
    AND 0=1 
```

最后一行是什么保证没有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:33:47.180

我正在使用@Sandra Walters 的建议，即：解决该问题的理想方法是在字段值包含在 SQL 查询中之前清理它们，您将需要表的元数据在 SQL 查询已经完成后正确执行此操作已建成。

# silverlight - 转换器不显示颜色

> ID：13745227
> 
> 赞同：0
> 
> 时间：2012-12-06T14:02:28.513
> 
> 标签：silverlight, windows-phone-8, ivalueconverter

嘿伙计们，我有这个转换器：

```
 public class BudgetIndicatorConverter :IValueConverter
{

    public object Convert(object value, System.Type targetType,
                   object parameter, CultureInfo culture)
    {
        string Indicator = (string)value;
        Brush _brush = new SolidColorBrush();

        if (Indicator == "Green")
        {
            _brush = new SolidColorBrush(Colors.Green);
        }
        else if (Indicator == "Red")
        {
            _brush = new SolidColorBrush(Colors.Red);
        }

        return _brush;
    }

    public object ConvertBack(object value, System.Type targetType,
                  object parameter, CultureInfo culture)
    {
        return null;
    }

} 
```

这是我在 Xaml 中的绑定：

```
 <TextBlock TextWrapping="Wrap" Margin="260,120,0,70" FontSize="{StaticResource PhoneFontSizeNormal}"  Foreground="{Binding Data[0].BudgetIndicator, Converter={StaticResource budgetcolor}}" FontFamily="{StaticResource PhoneFontFamilyBold}" Text="{Binding Data[0].TOTAL, Converter={StaticResource convertcurrency}}" TextAlignment="Right"/> 
```

现在当我运行这个文本块现在什么都不显示？我想知道我是否可以在同一个控件上绑定 2 个属性。就像您在文本属性中看到的那样，我将货币与转换器绑定并且它起作用了。

可能是我对“预算指标”的绑定无法发送正确的值吗？

我想要做的是，一旦显示货币，它应该将总数显示为绿色或红色，意味着在预算中还是超出预算？

任何提示或链接将不胜感激

使用视觉工作室 2012/c#/silverlight 5/windows phone8

如果需要更多的东西来完成答案，请告诉我！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:08:54.533

> 我想知道我是否可以在同一个控件上绑定 2 个属性

你可以。

> 可能是我对“预算指标”的绑定无法发送正确的值吗？

这是最可能的原因。

> 任何提示或链接将不胜感激

在方法中放置一个断点`BudgetIndicatorConverter.Convert`，以确保它被调用。然后，逐步执行代码以了解发生了什么。此外，检查输出窗口以查看是否有任何与绑定相关的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:11:52.643

完全支持绑定多个属性。

这是您应该尝试的：

*   打开附加了调试器的应用，在 Visual Studio 的输出窗口中查看是否有绑定错误
*   在转换器中放置一个断点并检查收到的值

# couchdb - 用于 facebook 见解的 CouchDB 文档设计

> ID：13745239
> 
> 赞同：3
> 
> 时间：2012-12-06T14:03:17.827
> 
> 标签：couchdb, facebook-insights

我开始在 CouchDB 上工作，从 Facebook Insights 和其他来源收集分析信息。我不确定文档的正确设计，并希望更有经验的 CouchDB 用户看到它，并在我即将犯任何大错误时警告我。

```
{
"_id": "0b69a33807d4cb63680dbebc16000af5",
"_rev": "1-7c9916592c377e32cf83acf746a8647c",
//array of metrics, one element per facebook page, around 10 pages per document**
"metrics": [        
    {
        "sourceId": "210627525692699", //facebook page ID
        "source": "facebook",
        "values": {
           "page_likes": 53
           //many more other metrics, around 100
       }
   },
   {
       "sourceId": "354413697924499", // //facebook page ID
       "source": "facebook",
       "values": {
           "page_wall_posts_source_unique": {other: 0, composer: 1},
           "page_likes": 12
           //many more other metrics, around 100
       }
   }
],
"timestamp": [
   2012,
   10,
   15,
   10,
   0,
   0
],
"customerId": "71ff942f-9283-4916-ab84-4927bce09117"
} 
```

预期文件数量：每小时+10 000，每天+240 000。

对文件的预期要求：

*   给定时间段内每个客户、每个 sourceId、每个指标的值总和
*   更复杂指标的专用视图

问题：

*   为了获得一些复杂指标的分析（如 page_wall_posts_source_unique），我们需要构建专门的视图，可能其中有很多，我应该预期视图更新时间会出现问题吗？
*   使用数组作为时间戳是正确的决定，还是使用 long 更好？
*   我应该使用一个设计文档还是将每个视图都放入一个新文档中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:41:58.207

我认为您最好不要将 CouchDb 用于此目的。在我看来，您最大的目标之一是在您的数据中进行一些聚合——这并不是 CouchDb 设计的主要目标。

实际上，CouchDb 有一个非常纯粹的聚合部分（我从它的实际经验中发现，我在 3 个项目中实现它）。因为你可以像傻瓜文本搜索部分一样添加Lucene，它会扩展它的查询功能，但无论如何它会比你可能需要的少。CouchDb 非常适合 Wikipedia 可能的项目，因为每次更新文档时，它都会使用新版本创建文档，并且您仍然拥有旧版本。这就是主要功能并查看您的项目，我看不出您想使用它。

此外，CouchDb 不适用于数百万个小文档。它更喜欢使用平均数量的中等大小的文档进行操作。但是数以百万计的小文档对于 CouchDb 视图系统来说并不是完美的东西。

所以我建议你选择你的主要目标并看看其他 NoSQL 解决方案，因为在 NoSQL 世界中，没有一个解决方案可以满足所有目标，相反，当你使用时，所选目标有自己的解决方案，不像 SQL 那样一个适用于所有事物。乍一看，我认为 MongoDB 应该符合您的目标。

但是，无论如何，回答你的问题：1）认为是的，但这取决于有多少文档将重新计算 2）我更喜欢使用 Long 值，因为当你有单个值时你可以查询它，如果你有数组不同的值，你会有问题。并且还使用像时间戳这样的长整数，这是一种常见的做法。3）没什么大不了的。你可以做任何你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:28:06.640

谢谢你们的回复。

Ph0en1x，我部分同意你的观点，CouchDB 不是一个显而易见的选择，但我对其他选择更不确定，到目前为止会坚持使用 CouchDB。

无论如何，这是我从多个来源收集的答案：

1）显然，这取决于文件的数量。但是对于小文件，概率会增加。

2）两种方法都可以，时间戳更通用一点。

3) 一个文档中的视图越多，它们被重新索引的可能性就越高。因此，我试图尽可能减少一个文档中的视图数量。

# objective-c - 将 std::map 转换为 Objective-C NSMutableArray 元素

> ID：13745240
> 
> 赞同：1
> 
> 时间：2012-12-06T14:03:19.047
> 
> 标签：objective-c, xcode, cocoa

我想将 std::map 的值转换为 NSMutableArray 元素。
我的 CPP 代码使用接口函数将 std::map（带有一个 int 和 std::string）传递给一个 Objective-C 函数。

但我无法将此 std::map 转换为 NSMutableArray。

```
CPP Code:
------------------------------------------------------------------    
typedef std::map<int, std::string> TemList;
temList temList;
temList[10]="an element";
temList[23]="another element";
temList[545]="last";

passing this map to an objective-c code using interface function. 

Objective-c Code
------------------------------------------------------------------  
- (void) testListUpdate:(const TemList&) pList
{
    NSMutableArray *mArray = [NSMutableArray alloc]init];

    for (TemList::const_iterator ii = pList.begin(); ii != pList.end(); ++ii)
    {
        ListItem item = [[ListItem alloc] init]

        // PROBLEM **** I am Not able to convert this ******
        item.name = ii->second.c_str();
        item.mId = (int) ii->first;

        [mArray addObject:item];

        //printf("OBJC Value[%s]: Key[%d]\n", ii->second.c_str(), ii->first);
    }
}

// Interface function implementation 
void interfaceListUpdate(void *self, const TemList& pList)
{
    printf("ObjectiveC Interface Function size[%d]\n", pList.size());
    [(id) self testListUpdate:pList];
}

// Using this struct as Array item
@interface ListItem : NSObject
{
    NSString *name;
    int mId;
}

@end 
```

我也想`mArray`用于显示表格视图行。
我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:55:23.933

只需使用

```
NSString *string = [NSString stringWithCString:cppString.c_str() 
                                      encoding:NSUTF8StringEncoding]; 
```

或任何`NSStringEncoding`适用于您的特定内容的东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:41:35.173

您必须将 std::string 转换为 NSString。不知道要使用的确切 std::string 方法，但您应该执行以下操作：

```
[[NSString alloc] initWithCharacters:ii->second.c_str() length:ii->second.length()] 
```

# c# - 数组中相等元素的最大序列

> ID：13745241
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:22.553
> 
> 标签：c#, arrays, equals

我的家庭作业是：编写一个程序，找出数组中相等元素的最大序列。示例：{2, 1, 1, 2, 3, 3, 2, 2, 2, 1} = {2, 2, 2}。我想出了这个：

```
Console.WriteLine("Enter array lenght");
            int arrLenght = int.Parse(Console.ReadLine());
            int[] arr = new int[arrLenght];
            Console.WriteLine("Enter array elements");
            for (int i = 0; i < arr.Length; i++)
            {
                arr[i] = int.Parse(Console.ReadLine());
            }
            for (int i = 0; i < arr.Length; i++)
            {
                if (arr[i] == arr[i + 1] && arr[i] == arr[i + 2])
                {
                    Console.WriteLine("Maximal sequence of numbers is: {0},{1},{2}",arr[i],arr[i+1],arr[i+2]);
                    break;
                }

            } 
```

这仅在序列正好是 3 个数字长时才有效。我必须搜索数组并找到最大的序列，但我不知道如何编码。如果这个问题很愚蠢，我很抱歉，但我是新手，我在其他任何地方都找不到解决方案。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:29:45.267

如果您正在寻找优雅，请使用 Linq

```
var seq = new int[] {2, 1, 1, 2, 3, 3, 2, 2, 2, 1};

int[] max = seq.Select((n, i) => new { Value = n, Index = i})
    .OrderBy(s => s.Value)
    .Select((o, i) => new { Value = o.Value, Diff = i - o.Index } )
    .GroupBy(s => new { s.Value, s.Diff})
    .OrderByDescending(g => g.Count())
    .First()
    .Select(f => f.Value)
    .ToArray(); 
```

这就是为什么我♥Linq

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:07:05.830

使用 Linq：

```
int count = seq.Count();
int[] maxSeq = seq
    .Select((i, index) => new{ 
        Item = i, index,
        PrevEqual = index == 0 || seq.ElementAt(index - 1) == i,
        NextEqual = index == count - 1 || seq.ElementAt(index + 1) == i,
    })
    .Where(x => x.PrevEqual || x.NextEqual)
    .GroupBy(x => x.Item)
    .OrderByDescending(g => g.Count())
    .First().Select(x => x.Item).ToArray(); 
```

**解释**。

*   选择一个匿名类型，其`bool`属性指示它是否与前一个值相同
*   因为我们只对那些感兴趣，所以限制查询`Where`
*   `GroupBy`具有相等值的元素
*   然后按每组的计数排序（降序）
*   选择第一组的值（最大）
*   从值创建一个新数组

[**演示**](http://ideone.com/3AIemX)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T15:47:45.960

```
 // create two list holding ints. One for the temporary value and one for the longest sequence
    List<int> longestSequence = new List<int>();
    List<int> temp = new List<int>();
    // create count to count how many elements are holding the same value
    // and counter to assign this value when max is reached
    int count = 0;
    int counter = 0;

    // with for loop compare every element with the elements that follow it
    for (int i = 0; i < arr.Length - 1; i++)
    {
        int nextElement = i+1;    // element that follows
        count = 0;                // ignore for now see the end of the for loop
        temp.Clear();             // ignore for now see the end of the for loop
        temp.Add(arr[i]);         // add the compared element in to the temp list
        // while the value is the same as following element add this to the temporary list
        // and add count (count++)
        while (arr[i] == arr[nextElement])
        {
            temp.Add(arr[nextElement]);
            nextElement++;
            count++;
        }
        // after that see if the count is bigger than counter (maximum amount of elements so far)
        // it is set to 0 at the beginning
        if (count > counter)
        {
            longestSequence.Clear();
            // if it is bigger assign count value to counter
            counter = count;
            // and copy the temporary list to the longestSequence list
            for (int k = 0; k < temp.Count; k++)
            {
                longestSequence.Add(temp[k]);
            }
        } 
    // at the beggining of the for loop the count will be set to 0 again
    // and the temporary list will be cleared
    }
    Console.WriteLine();
    // print the longestSequence list
    foreach (int element in longestSequence)
    {
        Console.Write(element + " ");
    }
    Console.WriteLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:13:23.750

在没有完全回答您的问题的情况下，我建议您看一下 LINQ，因为肯定有一些简单的方法可以解决这个问题。您可以从查看`Group`、和扩展方法开始`Count`，这些方法可以为您提供答案。`OrderBy``Select`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T14:23:15.390

试试这个方法：

```
int MaximimalSequence<T>(IList<T> list, out T value)
{
    T aux = default(T);
    value = default(T);
    int max = 0, hist = 0;
    bool first = true;

    foreach (var i in list)
    {
        if (!first && aux.Equals(i))
        {
            max++;
        }
        else
        {
            first = false;
            max = 1;
        }

        if (hist < max)
        {
            hist = max;
            value = i;
        }

        aux = i;
    }

    return hist;
} 
```

调用它：

```
int value;
var maximumSequence = MaximimalSequence<int>(new List<int> { 2, 1, 1, 2, 3, 3, 2, 2, 2, 1 }, out i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T14:20:28.697

由于这是一项家庭作业，因此可能需要建立一个算法

```
 int[] arr = new int[30];//your array
        Random rand = new Random(100);
        int maxCount = 0, curCount, value = 0;          

        for (int i = 0; i < arr.Length; i++)
            arr[i] = rand.Next(15);//fill the aray with random values               

        arr = arr.OrderBy(a => a).ToArray();

        for (int i = 0; i < arr.Length; i++)
        {
            curCount = 1;//found new value. and now count == 1
            for (int j = i+1/*search from next array element*/; 
                     j < arr.Length-1/*to the end*/; 
                     j++)
                    {
                        if (arr[i] == arr[j])
                            curCount++;//counts the count
                        else
                            break;//met new value
                    }
                    if (curCount > maxCount)//we've found new sequence 
                {
                    maxCount = curCount;//new sequence length
                    value = arr[i];//sequence values
                    i += maxCount;//we don't need to watch the sequence again

                }
        } 
```

我现在没有 VS 来检查这个，所以我希望它有效 =) 无论如何有一个想法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T14:46:39.503

这是一个可以通过序列的单次迭​​代来解决的问题。重要的是要确保算法在所有情况下都有效，包括最大序列位于序列末尾时。

```
 private static IEnumerable<int> GetMaxSequence(IList<int> seq)
    {
        if (seq == null || seq.Count == 0)
        {
            return new List<int>();
        }

        int value = seq[0];

        int currentSequenceStartIndex = 0;
        int currentSequenceLength = 1;

        int maxSequenceStartIndex = 0;
        int maxSequenceLength = 0;

        for (int i = 1; i < seq.Count; i++)
        {
            if (seq[i] == value)
            {
                currentSequenceLength++;
                continue;
            }

            if (currentSequenceLength > maxSequenceLength)
            {
                maxSequenceLength = currentSequenceLength;
                maxSequenceStartIndex = currentSequenceStartIndex;
            }

            currentSequenceStartIndex = i;
            currentSequenceLength = 1;
            value = seq[i];
        }

        if (currentSequenceLength > maxSequenceLength)
        {
            maxSequenceLength = currentSequenceLength;
            maxSequenceStartIndex = currentSequenceStartIndex;
        }

        return seq.Skip(maxSequenceStartIndex).Take(maxSequenceLength);
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-18T15:53:13.663

```
 static int num;
    static void Main(string[] args)
    {
        int[] array;
        Console.Write("enter the size of array : ");
        int input = int.Parse(Console.ReadLine());

        int[] temp;
        temp = new int[10];

        int a = 0;
        int count = 0;

        array = new int[input];

        for (int i = 0; i < input; i++)
        {
            Console.Write("enter value ( " + i + ", " + input+") :");
            array[i] = int.Parse(Console.ReadLine());
        }

        for (int i = 0; i < 20; i++)
        {
            for (int j = 0; j < array.Length; j++)
            {
                if (i == array[j])//compare i with array
                {
                    count++;
                    if (a < count)//if greator found
                    {

                        a = count;
                        num = i;
                    }
                }
                else
                {
                    count = 0;
                }
            }   
        }
        Console.WriteLine(num +" repeated " + a +" times");
        Console.ReadKey();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-28T13:53:22.800

```
static void Main(string[] args)
  {
    int[] array1 = { 1, 1, 1, 2, 3, 2, 2, 2, 2, 1 };
    int start = 0;
    int length  = 0;
    int bestStart = 0;
    int bestLength = int.MinValue;
    for (int i = 0; i < array1.Length - 1; i++)
        {
            if ((i == 0) || (array1[i] != array1[i - 1]))
            {
                start = i;   
            }
            if(array1[start] == array1[start + 1])
            {
                length++;
                if (length > bestLength)
                {
                    bestLength = length;
                    bestStart = start;
                }         
            }
            else
            {
                length = 0;
            }
        }
       Console.Write("The best sequence is :");
       for (int i = bestStart; i < bestLength + bestStart; i++)
        {
            Console.Write(" " + array1[i]);             
        }
 }
 /* 
     This will give : The best sequence is : 2 2 2 2 
*/ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-18T16:09:22.727

//程序员：Hamza Jany //P - Lang = C#

```
 static int num;
    static void Main(string[] args)
    {
        int[] array;
        Console.Write("enter the size of array : ");
        int input = int.Parse(Console.ReadLine());

        int[] temp;
        temp = new int[10];

        int a = 0;
        int count = 0;

        array = new int[input];

        for (int i = 0; i < input; i++)
        {
            Console.Write("enter value ( " + i + ", " + input+") :");
            array[i] = int.Parse(Console.ReadLine());
        }

        for (int i = 0; i < int.MaxValue; i++)
        {
            for (int j = 0; j < array.Length; j++)
            {
                if (i == array[j])//compare i with array
                {
                    count++;
                    if (a < count)//if greator found
                    {

                        a = count;
                        num = i;
                    }
                }
                else
                {
                    count = 0;
                }
            }   
        }
        Console.WriteLine(num +" repeated " + a +" times");
        Console.ReadKey();
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-19T06:50:35.787

以下是我在 C# 中对问题的解决方案。我尝试尽可能少地编写代码，以使其更具可读性和可理解性。

```
public static void Main(string[] args)
    {
        int[] intList = new int[] { 1, 1, 2, 2, 3, 3, 3, 4, 4, 5 };

        foreach (var item in intList) {
            Console.Write(item + " ");
        }

        #region Calculating sequence and printing details
        int length = 1, start = 0, finalIndx = 0,
        bigSeqNum = 0, finalLen = 0;

        for (int i = 1; i < intList.Length; i++) {
            if (intList[i] == intList[start]) {
                length++;
                if (length > finalLen) {
                    finalLen = length;
                    finalIndx = start;
                    bigSeqNum = intList[start];
                }
            } else {
                start = i;
                length = 1;
            }
        }
        Console.WriteLine("\nBig Seq. Num: " + bigSeqNum);
        Console.WriteLine("Start index: " + finalIndx);
        Console.WriteLine("Length: " + finalLen);
        Console.WriteLine();
        #endregion
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-08-15T07:41:13.263

```
static void Main(string[] args)
        {

            Console.WriteLine("enter length of the array");
            int n = int.Parse(Console.ReadLine());
            int[] myarray = new int[n];
            for (int i = 0; i < n ; i++)
            {
                Console.WriteLine("enter value of array" + " " + i);
                myarray[i]=int.Parse(Console.ReadLine());
            }
            int length = 1;
            int start = 0;
            int bestlength=0;
            int beststart=0;
            for (int i = 1; i < n; i++)
            {
                if (myarray[i - 1] == myarray[i])
                {
                    length++;
                    continue;
                }
                if (bestlength<length)
                {
                    bestlength = length;
                    beststart = start;
                }
                length = 1;
                start = i;
            }
            Console.WriteLine("the best sequence is");

            for (int j = beststart; j < bestlength + beststart; j++)
            {

                Console.Write(myarray[j] + ",");

            }

        }
    }
} 
```

# java - 使用 Java + Cron 阅读电子邮件

> ID：13745242
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:28.777
> 
> 标签：java, email, cron

我可以很容易地通过 Java 发送电子邮件。我真正想做的是让 Java 程序检查新邮件的电子邮件帐户，阅读邮件的内容并做出相应的反应。我不知道从哪里开始，也不知道谷歌要做什么，所以我真的没有什么要补充的——有人对图书馆或其他方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:06:42.780

我建议从 POP3 或 IMAP 类型库开始访问该帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:05:18.443

谷歌关于[石英触发器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html#scheduling-quartz)，[Apache Commons Net](http://commons.apache.org/net/)。我还记得我们使用[Chillcat](http://www.chilkatsoft.com/java-email.asp)库来实现这些目的，但它不是免费的。

# c# - 如何通过引用的字段/属性访问属性

> ID：13745243
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:28.943
> 
> 标签：c#, reflection

我想知道是否有可能创建一个方法来通过反射更新属性/字段，只需传入要设置的属性/字段的名称，即

`IFTDGN.Set( "S009", "E1001", "B" );`

where`S009`是`IFTDGN`类中包含的字段，`E1001`是通过字段访问的字段/属性`S009`，最后`B`是我要放入`E1001`属性/字段的值。

我有这段代码（以便于重现）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace EDIDemo
{
    using System.Reflection;

    class Program
    {
        static void Main( string[] args )
        {
            IFTDGN iftdgn = new IFTDGN();
            iftdgn.S009.E1001.Set( "A" );
            iftdgn.S009.E1002.Set( "CC" );

            iftdgn.Set( "S009", "E1001", "B" );

            Console.WriteLine( iftdgn.CreateMessage() );
            Console.ReadKey();
        }
    }

    /// <summary>
    ///  Represents an International Forwarding and Transport Dangerous Goods Notification message 
    /// </summary>
    class IFTDGN : EDIMessage
    {
        public S009 S009 = new S009();

        public IFTDGN()
            : base()
        {
            base.RegisterMessage( this.GetType().Name );
        }

        public override string CreateMessage()
        {
            StringBuilder sb = new StringBuilder();

            sb.AppendLine( "S009" );
            sb.AppendFormat( "\t{0} {1}\n", "E1001", S009.E1001.Code.Tag );
            sb.AppendFormat( "\t{0} {1}\n", "E1002", S009.E1002.Code.Tag );

            return sb.ToString();
        }

        public override void Set( string segment, string element, string code )
        {
            // *** THIS IS THE BIT I AM HAVING TROUBLE WITH **
            var fi_seg = this.GetType().GetFields().FirstOrDefault( p => p.Name == segment );
            var pi_elem = fi_seg.GetType().GetProperties().FirstOrDefault( p => p.Name == element );
        }

    }

    class S009
    {
        protected IDictionary<String, EDIDataElement> Elements = new Dictionary<String, EDIDataElement>()
        {
            { "E1001", new E1001() },
            { "E1002", new E1002() }
        };

        public E1001 E1001 { get { return (E1001)Elements[ "E1001" ]; } }
        public E1002 E1002 { get { return (E1002)Elements[ "E1002" ]; } }
    }

    abstract class EDIMessage
    {
        protected String MessageID;

        protected EDIMessage()
        { }

        protected void RegisterMessage( String messageID )
        {
            this.MessageID = messageID;
        }

        public virtual void Set( String segment, String element, String code )
        {
            throw new NotImplementedException();
        }

        public abstract String CreateMessage();

    }

    abstract class EDIDataElement
    {
        public Code Code { get; private set; }

        public virtual bool Mandatory
        {
            get
            {
                return false;
            }
        }

        protected IList<Code> Codes = new List<Code>();
        protected String ElementID;

        public virtual void Set( String code )
        {
            if ( !Codes.Any( c => c.Tag == code ) )
                throw new Exception( "Code '" + code + "' not found for element '" + ElementID + "'" );

            this.Code = Codes.FirstOrDefault( c => c.Tag == code );
        }

        protected void RegisterElement( String elementID )
        {
            this.ElementID = elementID;
        }

    }

    class E1001 : EDIDataElement
    {
        public E1001()
            : base()
        {
            base.Codes.Add( new Code( "A", "Code A" ) );
            base.Codes.Add( new Code( "B", "Code B" ) );
            base.Codes.Add( new Code( "C", "Code C" ) );
            base.Codes.Add( new Code( "D", "Code D" ) );
            base.Codes.Add( new Code( "E", "Code E" ) );

            base.RegisterElement( this.GetType().Name );
        }

        public override void Set( String code )
        {
            base.Set( code );
        }

        public override bool Mandatory
        {
            get
            {
                return true;
            }
        }

    }

    class E1002 : EDIDataElement
    {
        public E1002()
            : base()
        {
            base.Codes.Add( new Code( "AA", "Code AA" ) );
            base.Codes.Add( new Code( "BB", "Code BB" ) );
            base.Codes.Add( new Code( "CC", "Code CC" ) );
            base.Codes.Add( new Code( "DD", "Code DD" ) );
            base.Codes.Add( new Code( "EE", "Code EE" ) );

            base.RegisterElement( this.GetType().Name );

        }

        public override void Set( String code )
        {
            base.Set( code );
        }

        public override bool Mandatory
        {
            get
            {
                return true;
            }
        }

    }

    class Code
    {
        public string Tag { get; protected set; }
        public string Name { get; protected set; }

        public Code( string tag, string name )
        {
            Tag = tag;
            Name = name;
        }
    }

} 
```

基本上，我希望`pi_elem`变量包含引用的属性/字段的`PropertyInfo`or `FieldInfo`，`E1001`但它总是返回`null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:26:17.707

我猜

```
 var pi_elem = fi_seg.GetType().GetProperties().FirstOrDefault( p => p.Name == element ); 
```

可能 ：

```
 var pi_elem = fi_seg.FieldType.GetProperties().FirstOrDefault( p => p.Name == element ); 
```

# maven-3 - maven 原型属性替换

> ID：13745247
> 
> 赞同：5
> 
> 时间：2012-12-06T14:03:41.983
> 
> 标签：maven-3, maven-archetype

任何人都知道是否可以`requredProperty`在 archetype-metadata.xml 中将默认值替换为另一个？

所以，我尝试做这样的事情：

```
<requiredProperty key="name"/>
<requiredProperty key="groupId">
   <defaultValue>com.mycompamy.${name}</defaultValue>
</requiredProperty> 
```

但是当我开始在交互模式下从工件生成项目时，maven`groupId`首先问我关于属性的问题。但不像`name`我预期的那样。

是否有可能改变这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-25T11:10:05.437

您的问题是由`required property`加载顺序引起的。Maven 按字母顺序加载每个自定义`required property`。你可能无法改变它。但是有两种方法可以解决您的问题：

1.  像这样重命名你的变量：

    `"0_name"`

    `"1_groupId"`

    现在它会首先询问你的名字。

2.  使用完整的 Maven 命令，仅传递名称参数

    `mvn archetype:generate -DarchetypeGroupId=?? -DarchetypeArtifactId=?? -DgroupId=?? -DartifactId=?? -Dversion=?? -Dpackage=?? -Dname=??`

    替换`??`为有效参数

希望它会帮助你。

编辑：现在我看到一个`asked time`. 相当离题，但也许它会帮助别人

# iphone - 如何连续获得两次相同的数组值

> ID：13745248
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:44.013
> 
> 标签：iphone, objective-c, ios, arrays

我有代码，当我按下按钮时，会导致标签发生变化。我曾尝试编写代码以使标签不会连续两次获得相同的值，但它不起作用，因为有时我仍然会连续两次获得相同的值。

什么是正确的解决方案？

这是代码：

```
- (IBAction)buttonPressed:(id)sender {
    if (sender == self.button) {
        // Change the randomLabel by right answer
        NSString *path = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"plist"];
        words = [[NSMutableArray alloc] initWithContentsOfFile:path];
        NSString *generateRandomLabel = [NSString stringWithFormat:@"%@", [words objectAtIndex:arc4random_uniform([words count] - 1)]];

        if ([randomLabel.text isEqualToString:generateRandomLabel]) {
            while ([randomLabel.text isEqualToString:generateRandomLabel]) {
                generateRandomLabel = [NSString stringWithFormat:@"%@", [words objectAtIndex:arc4random_uniform([words count] - 1)]];
            }
        } else if (![randomLabel.text isEqualToString:generateRandomLabel]) {
            [self.randomLabel setText:generateRandomLabel];
            [randomLabel.text isEqualToString:generateRandomLabel];
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:28:01.843

问题是随机函数正在生成一个随机值，但没有什么能阻止它生成相同的值 n 次。数组或集合无关紧要

你需要一个非重复的随机算法：

1）你应该保持数组加载一次，而不是每次都重新加载

2）然后将数组随机播放一次。（请参阅[什么是洗牌 NSMutableArray 的最佳方法？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)）

3）然后按一下按钮，使用数组中的 0 对象，将其删除并在最后读取

模拟代码：假设词文件 > 1，至少有 2 个不同的词

```
- init {
    self = [super init];
    words = [self loadWordsFromFile];
    [words shuffle];
}

- onButtonPress {
    id word = nil;
    do { 
        [words objectAtIndex:0];
        [words removeObjectAtIndex:0];
        [words addObject:word];
    while([word isEqualToString:[words objectAtIndex:0])
    label.text = word;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:42:45.337

您可以通过让随机数生成器从数组的所有成员（除了最后一个成员）中选择来非常简单地做到这一点，然后将您选择的那个与数组中的最后一项交换：

```
- (IBAction)buttonPressed:(id)sender {
    if (! words) {
        NSString *path = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"plist"];
        words = [[NSMutableArray alloc] initWithContentsOfFile:path];
    }
    NSInteger index = arc4random_uniform(words.count - 2);
    randomLabel.text = words[index];
    [words exchangeObjectAtIndex:index withObjectAtIndex:words.count-1];
} 
```

# ibm-sbt - 无法设置托管 bean 属性

> ID：13745250
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:53.880
> 
> 标签：ibm-sbt

当我尝试为我的托管 bean 设置 tokenstore 属性时，我会收到一个错误 ![在此处输入图像描述](../Images/dc50aa9b84c96c17bf794b22f6269968.png)

在我的 faces-config.xml 中，我放置了我的 tokenstore 托管 Bean，并在我的 Endpoint 托管 bean 中引用了这个托管 bean。我按照第 20 页的 SDK 安装指南中的示例进行操作。 ![在此处输入图像描述](../Images/9e887a3dc560cc91d414fae3f67965b9.png)

我做错了什么？或者 SDK 安装指南不是最新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T10:03:11.950

尝试：

```
<value>#{memoryStore}</value> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:11:18.180

是否也定义了一个名为 memoryStore 的 bean？例如这里是智能云商店..

```
<managed-bean>
    <managed-bean-name>SmartcloudStore</managed-bean-name>
    <managed-bean-class>com.ibm.sbt.security.authentication.oauth.consumer.store.MemoryTokenStore</managed-bean-class>

    <managed-bean-scope>application</managed-bean-scope>
</managed-bean> 
```

# java - Android警报未触发

> ID：13745251
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:56.610
> 
> 标签：java, android, alarmmanager

我正在尝试使用 android 触发警报，但它不起作用。我的代码没有给出 Toast 或“ALARMOFF”消息。我有这个广播接收器：

```
public class AlarmReceiver extends BroadcastReceiver {

    public static void addAlarm(Context context){
        Log.i("infodb","ADDEDALARM");
        AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context,AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context,0,intent,0);
        am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 5000, pendingIntent);
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
        wl.acquire();
        Toast.makeText(context, "Alarm !!", Toast.LENGTH_SHORT).show(); // For example
        Log.i("infodb","ALARMOFF");
        wl.release();
    }

} 
```

在清单中我`<receiver android:name=".AlarmReceiver" />`有`<uses-permission android:name="android.permission.WAKE_LOCK" />`

在 ListView 中打开开关时会触发警报。代码在扩展的 SimpleCursorAdapter 类的 bindView 方法中：

```
@Override
    public void bindView(View v, Context context, Cursor c) {

        String name = c.getString(c.getColumnIndex("name"));
        final long time = c.getLong(c.getColumnIndex("time"));

        TextView time_text = (TextView) v.findViewById(R.id.time);
        if (time_text != null) {
            time_text.setText(date_format.format(new Date(time)));
        }

        TextView name_text = (TextView) v.findViewById(R.id.name);
        if (name_text != null) {
            name_text.setText(name);
        }

        // Do on/off button alarm code

        Switch onOff = (Switch)v.findViewById(R.id.alarm_switch);
        onOff.setChecked(c.getInt(c.getColumnIndex("onOff")) == 1);
        final Context contextl = context;
        final long id = c.getInt(c.getColumnIndex("_id"));
        onOff.setOnCheckedChangeListener(new OnCheckedChangeListener(){

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                AlarmDatabase database = new AlarmDatabase(contextl);
                SQLiteDatabase write = database.getWritableDatabase();
                ContentValues values = new ContentValues(1);
                if (isChecked){
                    // Alarm has been turned on
                    values.put("onOff",1);
                    // Add system alarm
                    AlarmReceiver.addAlarm(contextl);
                }else{
                    // Alarm has been switched off
                    values.put("onOff",0);
                    // Remove system alarm

                }
                write.update(AlarmDatabase.ALARMS_TABLE, values, "_id = " + id, null);
                write.close();
                database.close();
            }

        });
    } 
```

当开关打开时，LogCat 会显示以下内容：

```
12-06 13:50:12.365: I/infodb(18968): ADDEDALARM
12-06 13:50:12.370: W/AlarmManager(2120): FACTORY_ON= 0
12-06 13:50:13.785: W/PowerManagerService(2120): Timer 0x7->0x3|0x0
12-06 13:50:13.785: I/PowerManagerService(2120): Ulight 0x7->0x3|0x0
12-06 13:50:13.785: D/lights(2120): button : 2 +
12-06 13:50:13.785: D/lights(2120): button : 2 -
12-06 13:50:13.785: D/PowerManagerService(2120): setLightBrightness : mButtonLight : 0
12-06 13:50:13.865: W/AlarmManager(2120): FACTORY_ON= 0
12-06 13:50:13.865: W/AlarmManager(2120): FACTORY_ON= 0
12-06 13:50:17.370: V/AlarmManager(2120): waitForAlarm result :1
12-06 13:50:17.375: V/AlarmManager(2120): trigger WAKEUP Alarm{41ec8190 type 0 XXX.XXXXXXXXXXXXXXX.XXXXXXX}
12-06 13:50:18.835: V/AlarmManager(2120): waitForAlarm result :1
12-06 13:50:18.870: V/AlarmManager(2120): trigger WAKEUP Alarm{41dc01e0 type 0 XXX.XXXXXXX.XXXXXXX} 
```

我已经在各个地方寻找解决方案，但我只能确定我所做的一切都是正确的，但显然我不是。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:14:02.037

你应该正确使用包名，如果你有不同的包，

接收器 android:name="XXX.XXXXXXXXXXXXXXX.AlarmReceiver" />

# date - java.util.Date.getTime() 的问题

> ID：13745252
> 
> 赞同：0
> 
> 时间：2012-12-06T14:03:59.000
> 
> 标签：date, simpledateformat

我对 java`Date`和`SimpleDateFormat`.

**我有一个应用程序，它以GMT**格式维护其文件创建时间**`yearMonthDayHourMinute`**。目前我在不同的时区（比如说`IST`）。所以我想以`GMT`格式进行所有处理。

以下片段显示，我如何检索将存储在我的对象中的日期转换为 TimeInMillis。

```
>        1\. SimpleDateFormat valueSDF = new SimpleDateFormat("yyyyMMddHHmm");
>        2\. valueSDF.setTimeZone(TimeZone.getTimeZone("GMT"));
>        3\. Date date = valueSDF.parse("201212060915");
>        4\. System.out.println("date.getTime():  "+ date.getTime());   // returns 1354785300000
>        5\. String fileCreationTime= Long.toString((date.getTime()/1000));
>        6\. System.out.println("time :: "+ fileCreationTime);   // returns 1354785300 
```

以毫秒为单位的检索到的时间值（步骤＃4）有一个**额外的三个尾随零**。我的应用程序需要的是结果除以 1000。（步骤 #5）

我很想知道，为什么 date.getTime() 会在结果中附加更多的零。堆栈专家，请分享您的建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:06:04.060

> 我很想知道，为什么 date.getTime() 会在结果中附加更多的零。

它没有。它给出了自 Unix 纪元以来的*毫秒数。*如果您需要自 1970 年 1 月 1 日午夜 UTC 的 Unix 纪元以来的*秒数*，则需要除以 1000。如果您想要毫秒（如您所说），则不要除以 1000。仅此而已-它的行为完全符合预期。

目前尚不清楚您为什么认为它是“添加”三个零，但我可以向您保证，事实并非如此。请注意，自 Unix 纪元以来，1354785300 毫秒只有 376*小时......*

您给出的日期（UTC 时间 2012 年 12 月 6 日上午 9:15）*是*自 Unix 纪元以来的 1354785300000 毫秒。为什么您期望结果为 1354785300？

> 我的应用程序需要的是结果除以 1000

这与您声称它需要毫秒的说法不符。

# java - PrintWriter 不写入文件（Java）

> ID：13745260
> 
> 赞同：1
> 
> 时间：2012-12-06T14:04:34.960
> 
> 标签：java, file-io, printwriter

我正在编写一种自动取款机程序，它将数据输出到一个文件中（是​​的，我知道它不是英文的，但这不是重点），我遇到了一个错误。

当我尝试使用`PrintWriter`它时它不起作用，我不知道为什么。

```
 public void writeFooter(List<Purchase> list) throws Exception{

    int amountSold = 0;
    int amountNotSold = 0;

    int moneyRecieved = 0;

    openStreams();

    printer.println("Проданные товары: ");

    for(int i = 0; i <= list.size() - 1;i++){
        if(list.get(i).isSold()){
            writeToFile(list.get(i), dir);
            amountSold++;
            moneyRecieved += list.get(i).getPrice();
        }
    }
    printer.println();
    printer.println("Не проданные товары: ");
    for(int i = 0; i <= list.size() - 1; i ++){
        if(!list.get(i).isSold()){
            writeToFile(list.get(i), dir);
            amountNotSold++;
        }
    }

    printer.println();
    printer.println("Всего: "+list.size());
    printer.println("Кол-во проданно: "+ amountSold);
    printer.println("Кол-во не проданно: "+ amountNotSold);
    printer.println("Выручка: "+ moneyRecieved);

    printer.flush();

    System.out.print(printer.checkError());

    closeStreams();

}

private void openStreams() throws IOException{
    writer = new FileWriter(file,true);
    buffer = new BufferedWriter(writer);
    printer = new PrintWriter(buffer);
}
private void closeStreams() throws IOException{
    printer.flush();
    printer.close();
    buffer.close();
    writer.close();
}
    public void writeToFile(Purchase purchase,String dir) throws Exception{
    file = new File(dir);

    if(!file.exists()){
    file.createNewFile();
    }

    openStreams();

    printer.println(purchase.getName() + "   По цене:   " + purchase.getPrice() + "руб");

    closeStreams();
} 
```

for 循环有效，但行。这真的让我很困惑！我已经尝试过`checkError(`）并且我得到`true`了，但这仍然没有帮助。

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:31:10.070

为什么在 writeToFile 调用中打开和关闭流？您不应该在 for 循环之前在 writeFooter() 中打开流，在编写代码周围放置一个 try 块，然后在 finally 部分中关闭它们。

在我看来，您首先在 writeFooter 中打开了流，然后您编写了 printer.println("Проданные товары:");，然后您的 for 循环的第一次迭代调用 writeToFile，将再次打开未关闭的流，即肯定会覆盖第一行打印。

打开和关闭文件以写入一行效率太低了。

你需要类似的东西

```
writeFooter(...) {

  try {
    openStreams();
    writeToFile();
  } finally {
    closeStream();
  }
} 
```

writeToFile 简单地写入，不打开或关闭流，而 closeStream 安全地关闭流，即检查 null 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:54:59.667

```
public static void studentAdd() throws IOException ,ClassNotFoundException{

    DataOutputStream output = new DataOutputStream(new FileOutputStream("Student.txt"));
    PrintWriter pr = new PrintWriter("Student.txt");
    Student7 student[] = new Student7[total];
    int STOP = 999;
    int stdID;
    int age;
    String address;
    String gender;
    String name;

    Scanner input = new Scanner(System.in);
    System.out.println("Please type  student ID or 999 to quit");
    stdID = input.nextInt(); 

    try {
        while(stdID != STOP) {  
            input.nextLine();
            output.writeInt(stdID);
            pr.print(stdID + "#");

            System.out.println("Please type student name");
            name = input.nextLine();
            output.writeUTF(name);
            pr.print(name + "#");

            System.out.println("Please type student age");
            age = input.nextInt();
            output.writeInt(age);
            input.nextLine();
            pr.print(age + "#");

            System.out.println("Please type student gender");
            gender = input.nextLine();
            output.writeUTF(gender);
            pr.print(gender + "#");                     

            System.out.println("Please type student address");
            address = input.nextLine();
            output.writeUTF(address);
            pr.print(address + "#");
            pr.println();

            System.out.println("Please type  student ID or 999 to quit");
            stdID = input.nextInt();
            }
        ;   pr.close();
            output.close();

    } catch (IOException e) { 
        System.err.println("Error is" + e.getMessage());
    } catch(InputMismatchException e) {
        System.err.println("Invalid Data Entry");
    }finally {
        studentMenu();
    }

} //end of stuadd 
```

# python - 通过将 Mat/Numpy 转换为 Python 公开基于 OpenCV 的 C++ 函数

> ID：13745265
> 
> 赞同：3
> 
> 时间：2012-12-06T14:04:51.907
> 
> 标签：python, opencv, numpy, python-2.7, boost-python

我在尝试使用 Numpy **ndarray将链接到 OpenCV 并使用 OpenCV 的****Mat**数据类型的动态 C++ 库函数公开到 Python 2.7 时遇到了问题。

 **我在这里提出了一个类似于[lightalchemist 的解决方案的解决方案，](https://stackoverflow.com/questions/12957492/writing-python-bindings-for-c-code-that-use-opencv)并且我也尝试过使用[这个 SO question 中描述的 boost::python 和 boost::numpy （也链接到 Python 2.7）。](https://stackoverflow.com/questions/10701514/how-to-return-numpy-array-from-boostpython)

现在我坚持前者。我已经到了可以在 iPython 中加载模块的地步，并且我看到了一个我正在尝试使用**检查**模块移植的函数，我什至可以调用它并且它甚至可以执行。但是，当我尝试使用**NumpyAllocator**（[请参阅 lightalchemist 的解决方案](https://stackoverflow.com/questions/12957492/writing-python-bindings-for-c-code-that-use-opencv)）类将**Mat**对象转换回 ndarray 时，就会出现问题。首先，当我尝试从外部 C++ 可执行文件调用**pyopencv_from**函数时，它在编码时使用 NumpyAllocator，它在

```
PyEnsureGIL gil; 
```

，每次都没有消息。Lightalchemist 的解决方案不在 pyopencv_to 中使用它**（**编辑：如果传入的 ndarray 已经分配），它似乎可以工作。但是，官方的 OpenCV cv2.cpp 也确实使用了分配器，所以如果我尝试使用该函数，甚至无法将输入的 ndarray 转换为 Mat。

当我尝试使用 iPython 中的模块时，它会看到该功能。再次，它正确执行它（将进度打印到控制台），但是当它到达**pyopencv_from**时，它会出现段错误并终止 iPython shell。

编辑：我使用与 lightalchemist 相同的来源，除了我公开了一个函数，就像官方 OpenCV 端口一样：

```
static PyMethodDef methods[] = {
{"findEdgesCGTG", (PyCFunction)pycvex_findEdgesCGTG, METH_KEYWORDS, "findEdgesCGTG(source) -> edgeGradient, edgeOrientations"},
    {NULL, NULL}
};
extern "C"
#if defined WIN32 || defined _WIN32
__declspec(dllexport)
#endif
void initcvex()
{
  import_array();
  PyObject* m = Py_InitModule(MODULESTR, methods);
  PyObject* d = PyModule_GetDict(m);
  opencv_error = PyErr_NewException((char*)MODULESTR".error", NULL, NULL);
  PyDict_SetItemString(d, "error", opencv_error);
} 
```

有没有人知道如何解决这个转换问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:16:43.953

问题不在于

```
PyEnsureGIL gil; 
```

陈述。仅当我尝试使用外部 C++ 函数时，这才不起作用。当我在这里尝试将两个输出值合并为一个时，问题实际上发生了：

```
return Py_BuildValue("(NN)", pyopencv_from(edgeGrad), pyopencv_from(edgeOri)); 
```

临时解决方法只是使用以下语句：

```
return pyopencv_from(edgeGrad); 
```

编辑：对不起，我又搞砸了。Py_BuildValue 工作得很好。刚刚再次测试了我的功能，它运行良好。一定是上次测试的时候忘记放return关键字了，所以给了我“没有设置异常的错误返回”。

这是完整的功能代码（我希望它对任何将 OpenCV 东西移植到 python 的人有用）

```
static PyObject* pycvex_findEdgesCGTG(PyObject* , PyObject* args, PyObject* kw)
{
    PyObject* pyobj_source = NULL;
    Mat source;
    Mat edgeGrad;
    Mat edgeOri;
    const char* keywords[] = { "src", NULL };
    if( PyArg_ParseTupleAndKeywords(args, kw, "O:findEdgesCGTG", (char**)keywords, &pyobj_source) &&
        pyopencv_to(pyobj_source, source));
    {
        ERRWRAP2(findEdgesCGTG(source,edgeGrad,edgeOri));
        return Py_BuildValue("(NN)", pyopencv_from(edgeGrad), pyopencv_from(edgeOri));
    }
    return NULL;
} 
```

**更新：**

这是我为使用 OpenCV 的 Mat 类以尽可能少的痛苦公开代码而编写的开放 C++ 代码的[github 存储库。](https://github.com/Algomorph/pyboostcvconverter)这是针对**OpenCV 3.X**的。

**对于 OpenCV 2.X**，您可以使用Yati Sagade 的[此代码](https://github.com/yati-sagade/blog-content/blob/master/content/numpy-boost-python-opencv.rst)/示例。如果您想使用 opencv Mat 类公开函数*而不用*担心显式转换，可以很容易地将我的代码中的 Boost 转换器与 Yati 代码中的转换函数相适应。**

# java - 如何在 java SE7 中格式化字符串？

> ID：13745266
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:04:59.763
> 
> 标签：java, string, format

来自java教程：

```
 System.out.format("%s: %s"
            + "  has bowed to me!%n", 
            this.name, bower.getName()); 
```

但是在 java SE7 中没有这样的方法。我应该使用哪种方法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:07:25.220

当然有：

System.out 是 PrintStream 类型，它有[`format()`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format%28java.lang.String,%20java.lang.Object...%29)

如果您不想输出它而只是将其存储在一个字符串中，`String`也提供相同的方法[`format()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T14:06:40.993

有`String.format`或`System.out.printf`。

```
System.out.printf("%s: %s"
    + "  has bowed to me!%n", 
    this.name, bower.getName()); 
```

`String.format`在 a 中返回结果`String`；`System.out.printf`将结果打印到控制台。

（而且 jbx 也是正确的：为什么你说 Java SE 7 中没有这种方法？）。

# java - 如何获取列名并显示Sql java

> ID：13745267
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:04:59.623
> 
> 标签：java, information-schema

获取表中列的名称并使用 Sistem Print 在 java 中显示

我有这段代码可以获取列的名称

SELECT Column_Name FROM INFORMATION_SCHEMA.COLUMNS where Table_Name =table

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:03:39.493

您所拥有的是非常特定于数据库供应商的。对于适用于所有数据库的东西，我建议执行'select * from tablename where 1 = 0'，然后检查ResultsetMetaData。

# java - Eclipse - 列出所有类及其方法

> ID：13745273
> 
> 赞同：3
> 
> 时间：2012-12-06T14:05:12.710
> 
> 标签：java, eclipse

我有一个 java 项目（实际上是一个 Android 项目），我需要在一个文件中打印我在这个项目中拥有的所有类和方法。

我一直在网上查看并找到了 javap 工具，它很感兴趣，但我不知道如何递归地使用它来解析我拥有的所有 .java 文件。或者也许存在另一个工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:12:07.657

这个输出文件需要什么格式？

Eclipse 可以为您的项目导出 javadoc。这些 html 文件将包含所有类及其方法。

我相信您还可以指定一个“自定义 doclet”，它允许您自定义输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:27:19.613

伪代码：

1.  `bin`在项目文件夹中生成文件列表。如果您不知道如何使用，请使用`FileUtils`commons [-io](http://commons.apache.org/io/)。
2.  确保文件名以`.class`
3.  从路径中删除“bin/”。结果字符串是类的名称，`/`而不是`.`。将其替换为`.`
4.  加载类`Class.forName()`
5.  使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/member/index.html)获取所有字段和方法的名称。

# c# - 现在如何在 datarepeater 中更改样式行选择

> ID：13745275
> 
> 赞同：0
> 
> 时间：2012-12-06T14:05:17.963
> 
> 标签：c#, asp.net, css

我想更改显示的样式链接按钮行。我想使用此代码，但在选择其他链接按钮行之后选择链接按钮行之前保持样式。

html代码：

```
 <asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1" OnItemCommand="Repeater1_ItemCommand">
        <ItemTemplate>
            <div id="div">
                <asp:Panel runat="server" aID="pnl">
                    <asp:LinkButton runat="server" ID="lnkbtn" PostBackUrl='<%#"WebForm1.aspx?Id="+Eval("CategoryGalleryID")%>'
                        Text='<%#Eval("Title")%>'>
                    </asp:LinkButton>
                </asp:Panel>
            </div>
        </ItemTemplate>
    </asp:Repeater> 
```

C#代码：

```
 protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        string ID = Page.Request.QueryString.Get("ID");
        LinkButton lnkbtn = (LinkButton)e.Item.FindControl("lnkbtn");
        lnkbtn.Font.Bold= true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:19:17.787

**更新：**使用

```
lnkbtn.Attributes.Add("style", "font-weight:bold;"); 
```

例如。：

```
protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    string ID = Page.Request.QueryString.Get("ID");
    LinkButton lnkbtn = (LinkButton)e.Item.FindControl("lnkbtn");
    lnkbtn.Attributes.Add("style", "font-weight:bold;");
} 
```

* * *

我认为您想更改所选 LinkBut​​ton 的样式。

您可以使用 CSS 来做到这一点。

例如。：

```
a:link {color:#FF0000;}      /* unvisited link */
a:visited {color:#00FF00;}  /* visited link */
a:hover {color:#FF00FF;}  /* mouse over link */
a:active {color:#0000FF;}  /* selected link */ 
```

检查此以获取详细信息：

[样式链接](http://www.w3schools.com/css/css_link.asp)

# ssl-certificate - 云形成的弹性豆茎上的 SSL 证书

> ID：13745278
> 
> 赞同：3
> 
> 时间：2012-12-06T14:05:27.150
> 
> 标签：ssl-certificate, amazon-elastic-beanstalk, amazon-cloudformation

我有一个由 cloudformation 实例化的 elasticbeanstalk 应用程序，但我想将一个 ARN 传递给它，以便 SSL 证书部署在其 ELB 上。一旦ELB启动，我就知道该怎么做，我只是找不到任何文档或示例来说明如何在cloudformation模板中设置它。有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:48:35.537

我认为您可以尝试在 AWS::ElasticBeanstalk::Application 的 OptionSettings 中指定它。你可以尝试这样的事情：

```
{
   "Namespace": "aws:elb:loadbalancer",
   "OptionName": "LoadBalancerHTTPSPort",
   "Value": "443"
}

{
   "Namespace": "aws:elb:loadbalancer",
   "OptionName": "SSLCertificateId",
   "Value": "Your certificate ARN"
} 
```

我没有测试它，所以不能保证它会起作用。

# git - 如何找到过去 100 个最大的 GitHub 存储库？

> ID：13745285
> 
> 赞同：9
> 
> 时间：2012-12-06T14:05:40.447
> 
> 标签：git, github, open-source

我试图了解 GitHub 上 100 个最大存储库的演变。使用 GitHub 搜索功能或 GithubArchive.org，我可以轻松访问截至目前的 100 个最大的存储库（以贡献者、star、fork 或 LOC 的总数衡量）。

但是，我想查看历史上给定数据（例如 2011 年 4 月 1 日）中最大的 100 个存储库，以便从那时起跟踪它们的增长（或下降）。如何确定过去某个日期 GitHub 上最大的 100 个存储库（按星、叉或 LOC 衡量）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T18:38:48.543

我认为 GitHub 存档项目可以提供帮助：[http ://www.githubarchive.org/](http://www.githubarchive.org/)

它存储来自 GitHub 时间线的所有公共事件并公开它们以供处理。这些事件包含有关存储库的信息，因此您应该能够从那里提取数据以适合您的用例。

例如，我刚刚在 BigQuery 控制台 ( [https://bigquery.cloud.google.com/?pli=1](https://bigquery.cloud.google.com/?pli=1) ) 中使用了以下查询来找出 2012 年的 joyent/node 存储库的分支数-03-15：

```
SELECT repository_forks, created_at FROM [publicdata:samples.github_timeline] WHERE (repository_url = "https://github.com/joyent/node") AND (created_at CONTAINS "2012-03-15") LIMIT 1 
```

结果如下：

```
Row forks   created_at   
1   1579    2012-03-15 07:49:54 
```

显然，您会使用 BigQuery API 来执行类似的操作（提取您想要的数据、获取一系列日期的数据等）。

这是一个查询，用于获取给定日期的单个最大存储库（通过分叉）：

```
SELECT repository_forks, repository_url FROM [publicdata:samples.github_timeline] WHERE (created_at CONTAINS "2012-03-15") ORDER BY repository_forks DESC LIMIT 1 
```

结果：

```
Row forks   repository_url   
1   6341    https://github.com/octocat/Spoon-Knife 
```

以下是通过 fork 获取给定日期前 100 个存储库的查询：

```
SELECT MAX(repository_forks) as forks, repository_url FROM [publicdata:samples.github_timeline] WHERE (created_at CONTAINS "2012-03-15") GROUP BY repository_url ORDER BY forks DESC LIMIT 100 
```

结果：

```
Row forks   repository_url   
1   6341    https://github.com/octocat/Spoon-Knife   
2   4452    https://github.com/twitter/bootstrap     
3   3647    https://github.com/mxcl/homebrew     
4   2888    https://github.com/rails/rails
... 
```

# android - 相对布局不显示所有宽度

> ID：13745296
> 
> 赞同：0
> 
> 时间：2012-12-06T14:06:22.063
> 
> 标签：android, android-layout, android-relativelayout

我在 Android 中有一个带有 RelativeLayout 的屏幕，有一个 TableLayout 和一个 TableRow，然后是 6 个小部件：4 个 TextView 和 2 个按钮。

当我在平板电脑大小的模拟器上显示它时，所有小部件都在里面。但是当我移动到手机大小的模拟器（5 英寸）时，两个按钮中的一个半消失在右侧。

我希望RelativeLayout 会在屏幕上显示所有这些。我怎样才能做到这一点？

我的 RelativeLayout 声明如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:paddingLeft="16dp"
  android:paddingRight="16dp" > 
```

表格布局：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/cancelTable"
  android:layout_below="@+id/pageheader"
  android:layout_width="fill_parent"
android:layout_height="fill_parent" > 
```

表行：

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dip" > 
```

TextView 和 Button 在 Activity 的 onCreate 中启动：

```
 table = (TableLayout) findViewById(R.id.cancelTable);
    table.removeAllViewsInLayout();

    TableRow tr=new TableRow(Edit.this);
    tr.removeAllViewsInLayout();
    int flag = 1;       
    if(flag == 1) {
        TextView b11=new TextView(Edit.this);
        b11.setText("Name");
        b11.setTextColor(Color.RED);
        b11.setTextSize(15);
        tr.addView(b11);

        TextView b4 = new TextView(Edit.this);
        b4.setPadding(10, 0, 0, 0);
        b4.setTextSize(15);
        b4.setText("Text");
        b4.setTextColor(Color.RED);
        tr.addView(b4);

        TextView b5=new TextView(Edit.this);
        b5.setPadding(10, 0, 0, 0);
        b5.setText("Number");
        b5.setTextColor(Color.RED);
        b5.setTextSize(15);
        tr.addView(b5);

        TextView b7=new TextView(Edit.this);
        b7.setPadding(10, 0, 0, 0);
        b7.setText("Time");
        b7.setTextColor(Color.RED);
        b7.setTextSize(15);
        tr.addView(b7);

        TextView b8=new TextView(Edit.this);
        b8.setPadding(10, 0, 0, 0);
        b8.setText("Delete");
        b8.setTextColor(Color.RED);
        b8.setTextSize(15);
        tr.addView(b8);

        TextView b9=new TextView(Edit.this);
        b9.setPadding(10, 0, 0, 0);
        b9.setText("Edit");
        b9.setTextColor(Color.RED);
        b9.setTextSize(15);
        tr.addView(b9);

        table.addView(tr);

        final View vline = new View(Edit.this);
        vline.setLayoutParams(new       
        TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 2));
        vline.setBackgroundColor(Color.RED);
        table.addView(vline); 
        flag=0;
   }

    com.eyal.sms.db.SMS sms;        
    for(int i=0; i<allSched.size(); i++) {

        tr = new TableRow(Edit.this);
        tr.removeAllViewsInLayout();

        sms = allSched.get(i);

        TextView b = new TextView(Edit.this);
        String str = String.valueOf(sms.getToContact());
        b.setText(str != null ? str : "");
        b.setTextColor(Color.WHITE);
        b.setTextSize(15);
        tr.addView(b);

        TextView b1=new TextView(Edit.this);
        b1.setPadding(10, 0, 0, 0);
        b1.setTextSize(15);
        String str1 = sms.getText();
        if (str1.length() > 20) 
            str1 = str1.substring(0, 20); 

        b1.setText(str1);
        b1.setTextColor(Color.WHITE);
        tr.addView(b1);

        TextView b2 = new TextView(Edit.this);
        b2.setPadding(10, 0, 0, 0);
        String str2 = String.valueOf(sms.getToNumber());
        b2.setText(str2);
        b2.setTextColor(Color.WHITE);
        b2.setTextSize(15);
        tr.addView(b2);

        TextView b3 = new TextView(Edit.this);
        b3.setPadding(10, 0, 0, 0);
        String str3 = String.valueOf(sms.getTime());
        b3.setText(str3);
        b3.setTextColor(Color.WHITE);
        b3.setTextSize(15);
        tr.addView(b3);

        Button delete = new Button(Edit.this);
        delete.setText("Delete");            
        DeleteButtonListener dbl = new DeleteButtonListener();
        dbl.setSMS(sms);
        delete.setOnClickListener(dbl);            
        tr.addView(delete);

        Button edit = new Button(Edit.this);
        edit.setText("Edit");
        EditButtonListener ebl = new EditButtonListener();
        ebl.setSMS(sms);
        edit.setOnClickListener(ebl);
        tr.addView(edit);

        table.addView(tr);

        final View vline1 = new View(Edit.this);
        vline1.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, 1));
        vline1.setBackgroundColor(Color.WHITE);
        table.addView(vline1);  // add line below each row  

    } 
```

我错过了什么？RelativeLayout —— 或 Android 中的任何其他布局 —— 能否保证我的所有小部件都在屏幕上，或者至少可以滚动，在所有尺寸的硬件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:55:36.620

试试这个，它会包装你的 TableLayout，并解决你的问题，我希望

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" >

            <TableLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/cancelTable"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/pageheader" >

            </TableLayout>
        </LinearLayout>
    </HorizontalScrollView>

</RelativeLayout> 
```

[编辑 1]

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.widget.Button;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class MainActivity extends Activity {
    TableLayout table;
    TableRow tr;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        table = (TableLayout) findViewById(R.id.cancelTable);
        table.removeAllViewsInLayout();
        tr = new TableRow(MainActivity.this);
        int flag = 1;       
        if(flag == 1) {
            TextView b11=new TextView(MainActivity.this);
            b11.setText("Name");
            b11.setTextColor(Color.RED);
            b11.setTextSize(15);
            tr.addView(b11);

            TextView b4 = new TextView(MainActivity.this);
            b4.setPadding(10, 0, 0, 0);
            b4.setTextSize(15);
            b4.setText("Text");
            b4.setTextColor(Color.RED);
            tr.addView(b4);

            TextView b5=new TextView(MainActivity.this);
            b5.setPadding(10, 0, 0, 0);
            b5.setText("Number");
            b5.setTextColor(Color.RED);
            b5.setTextSize(15);
            tr.addView(b5);

            TextView b7=new TextView(MainActivity.this);
            b7.setPadding(10, 0, 0, 0);
            b7.setText("Time");
            b7.setTextColor(Color.RED);
            b7.setTextSize(15);
            tr.addView(b7);

            TextView b8=new TextView(MainActivity.this);
            b8.setPadding(10, 0, 0, 0);
            b8.setText("Delete");
            b8.setTextColor(Color.RED);
            b8.setTextSize(15);
            tr.addView(b8);

            TextView b9=new TextView(MainActivity.this);
            b9.setPadding(10, 0, 0, 0);
            b9.setText("Edit");
            b9.setTextColor(Color.RED);
            b9.setTextSize(15);
            tr.addView(b9);

            table.addView(tr);

            flag=0;
       }

        for(int i=0; i<30; i++) {
            tr = new TableRow(MainActivity.this);

            TextView b = new TextView(MainActivity.this);
            b.setText("TExt");
            b.setTextColor(Color.WHITE);
            b.setTextSize(15);
            tr.addView(b);

            TextView b1=new TextView(MainActivity.this);
            b1.setPadding(10, 0, 0, 0);
            b1.setTextSize(15);
            b1.setText("text2");
            b1.setTextColor(Color.WHITE);
            tr.addView(b1);

            TextView b2 = new TextView(MainActivity.this);
            b2.setPadding(10, 0, 0, 0);
            b2.setText("text3");
            b2.setTextColor(Color.WHITE);
            b2.setTextSize(15);
            tr.addView(b2);

            TextView b3 = new TextView(MainActivity.this);
            b3.setPadding(10, 0, 0, 0);
            b3.setText("text4");
            b3.setTextColor(Color.WHITE);
            b3.setTextSize(15);
            tr.addView(b3);

            Button delete = new Button(MainActivity.this);
            delete.setText("Delete");            
            tr.addView(delete);

            Button MainActivity = new Button(MainActivity.this);
            MainActivity.setText("MainActivity");            
            tr.addView(MainActivity);

            table.addView(tr);

        }

    }  
} 
```

# batch-file - 使用子文件夹名称将子文件夹复制到另一个文件夹的批处理脚本

> ID：13745297
> 
> 赞同：0
> 
> 时间：2012-12-06T14:06:23.327
> 
> 标签：batch-file, copy

我需要使用批处理脚本将文件夹及其内容复制到目标文件夹。

例如，我们有一个名为“ParentFolder”的文件夹，在这个文件夹里面我们有“Child1”文件夹，里面有一个文本文件。

目标文件夹被命名为“Targetfolder”

我想首先检查“Parentfolder”的子文件夹是否是“Child1”文件夹，然后将整个文件夹“Child1”复制到“Targetfolder”

***编辑 - 从评论中添加代码***

```
@echo on
set FOLDER1=c:\Temp\FOLDER1
set FOLDER2=c:\Temp\FOLDER2
if exist %FOLDER1% ( xcopy /Q /D /S /V %FOLDER1% %FOLDER2% )
:END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:49:10.487

澄清一下，您想将文件夹复制`Parent (Child 1, Child 2)`到`Target ( Empty )`其中，以便生成的副本变为`Target ( Parent ( Child 1, Child 2) )`?

如果是这样，那么您需要将父名称添加到目标路径，因为 xcopy 只会将源目录的内容复制到指定的目标目录中。确保在目标路径的末尾有一个反斜杠，以表示它是一个目录而不是一个文件。否则会提示您。

```
@echo on
set SOURCENAME=FOLDER1
set FOLDER1=c:\Temp\%SOURCENAME%
set FOLDER2=c:\Temp\FOLDER2
if exist %FOLDER1% ( xcopy /Q /D /S /V %FOLDER1% %FOLDER2%\%SOURCENAME%\ )
:END 
```

# c# - 运行 Thrift C# 教程的问题

> ID：13745298
> 
> 赞同：1
> 
> 时间：2012-12-06T14:06:30.943
> 
> 标签：c#, rpc, thrift, thrift-protocol

我是新手，需要了解 Thrift RPC 框架的具体细节。为此，我下载了计算器教程（由客户端和服务器组成）。

我认为这将是了解引擎盖下发生的事情的最佳方式。

我已经能够做到以下几点

1.  生成 thrift.dll 文件
2.  生成创建 dll 所需的 csharp shource 文件 -calculator.thrift.dll
3.  为客户端和服务器创建一个由两个项目组成的项目。（注意客户端项目是控制台应用，服务器是类库）

我正在从客户端项目的主要方法中复制一些代码以供参考

```
public static void Main()
    {
        try
        {
            TTransport transport = new TSocket("localhost", 9090);
            TProtocol protocol = new TBinaryProtocol(transport);
            Calculator.Client client = new Calculator.Client(protocol);

            transport.Open(); 
```

尝试执行上述行时，系统会产生错误。

错误如下。

无法建立连接，因为目标机器主动拒绝它 127.0.0.1:9090

想到的一个明显的解决方案是防火墙。我创建了一些防火墙规则以允许端口 9090 上的连接。但错误仍然存​​在。

任何有套接字连接和/或节俭使用经验的人都可以指导我解决这个错误吗？

提前致谢

罗米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:20:54.340

此问题已解决。我只是忘记启动服务器。:-)

# windows-8 - ILOG 甘特图和 Windows 8

> ID：13745299
> 
> 赞同：0
> 
> 时间：2012-12-06T14:06:31.917
> 
> 标签：windows-8, gantt-chart, ilog

有人知道 ILOG Gantt (.net) 是否与 Windows 8 兼容？我在 IBM 网站上没有找到相关信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:27:53.083

这是一个似乎归 IBM 所有的旧应用程序，看起来他们页面上的最后修改日期是 2010 年 8 月。如果您有 IBM 支持帐户，那么您可以使用链接：[IBM ILOG](http://www-01.ibm.com/support/docview.wss?uid=swg21418886)来查找。如果您知道 .NET 的版本，那么您可以在以下位置查看覆盖范围：[.NET Framework Versions and Dependencies](http://msdn.microsoft.com/en-us/library/bb822049%28v=VS.110%29.aspx)。

这个问题被正确标记为 Windows 8，但我的建议是直接从 IBM 获得答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:59:55.053

IBM 已停产此产品： [http ://www-01.ibm.com/software/integration/visualization/net/redirect/](http://www-01.ibm.com/software/integration/visualization/net/redirect/)

我代表一家提供替代产品的公司，该产品也适用于 Windows 8。也许值得在这里看看。 [http://blog.netronic.com/migration-offer-ibm-ilog-gantt-net-customers-partners](http://blog.netronic.com/migration-offer-ibm-ilog-gantt-net-customers-partners)

# iphone - 如何从 nib 自定义 UITableViewCell 可以重用

> ID：13745303
> 
> 赞同：0
> 
> 时间：2012-12-06T14:06:41.617
> 
> 标签：iphone, uitableview

我创建了一个自定义 UITableViewCell ，其中包含三个 UILabel 和一个 UIImageView ，1：我创建了 UITableViewCell 的子类，2：添加了三个标签和一个 UIImageView ，也在 xib 文件中 3：在 cellForRowAtIndexpath 中使用以下方式创建单元格

```
static NSString *CellIdentifier = @"NarrativeCell";

NarrativeCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil){
    NSLog(@"New Cell Made");

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"NarrativeCell" owner:nil options:nil];

    for(id currentObject in topLevelObjects)
    {
        if([currentObject isKindOfClass:[NarrativeCell class]])
        {
            cell = (NarrativeCell *)currentObject;
            break;
        }
    }
}

Narrative n=(Narrative*)[tableArray objectAtIndexPath:indexpath.row];

[cell.articleName setText:n.title];

NSData *data=[[NSData alloc]initWithContentsOfFile:n.file]
[cell.sideImageView setImage:[UIImage imageWithData:data]]; 
```

问题是这个，它总是创建新的单元格，我在添加几张图片后收到内存警告和崩溃。请帮助如何重用上述代码中的单元格，以免占用太多内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:22:00.830

你的代码很好。您只是从未设置单元格的可重用标识符，因此它们不会被重用（正如您所注意到的）。

在您的自定义单元类中，实现方法reuseIdentifier：

```
- (NSString *) reuseIdentifier {
    return @"NarrativeCell";
} 
```

或在界面生成器中设置标识符（在单元格的检查器中）。

# wpf - 从 FlowDocument 中删除图像时如何删除图像文件？

> ID：13745310
> 
> 赞同：0
> 
> 时间：2012-12-06T14:07:22.707
> 
> 标签：wpf, wpftoolkit

我有一个可编辑的 RichTextBox，用户可以在其中添加表格、段落、超链接、图像等。当用户插入图像时，我的程序会从选定位置创建图片副本到应用程序的目标目录，并在 Image 对象中设置这个新源。

现在用户可以从 RichTextBox 中删除图像。在这种情况下，应用程序还应该从其目录中删除图像文件。当删除任何内容时，我试图找到 FlowDocument 中发生的任何事件。我没有发现这样的事件。

或者，我决定使用 Image 对象的 Unloaded 事件。当图像被删除时，Unloaded 事件被适当地触发（有时两次）并且我删除文件的代码有效。现在的问题是 RichTextBox 被放置在 TabItem 中。如果我切换到另一个选项卡项，Image 对象会触发 Unloaded 事件并删除文件。为了解决这个问题，我尝试在 Unloaded 事件期间检测 Image 对象属性的变化。我发现我可以使用 Parent 属性。FlowDocument 中 Image 对象的父对象是 InlineUIContainer。因此，如果图像被删除，InlineUIContainer 的父级变为空（当焦点转移到其他 TabItem 时不为空）。这让我点头删除图像文件，它可以按需要工作。

但是当图像落入选择范围时问题就开始了。在这种情况下，会触发 Unloaded 事件，但 InlineUIContainer 的 Parent 不为空。我追查到——

1.  图像在段落中，段落的父级变为空，
2.  图像在 TableCell 中，表的父级变为空，
3.  图像在 ListItem 中，List 的 Parent 变为 null。

图像在树中可能很深。所以检查每个容器的父级是很烦人的。

然后我想在 Delete/Backspace 按键上抓取所选内容的 XAML。这样，我将使用 XML API 解析选择中的图像标签并删除这些文件。我尝试编写代码将 RichTextBox 的选择保存到文件中。所有选定的元素，如表格、列表、段落等在结果 XAML 中都可用，但图像以某种方式从选择中省略。我正在编写以下代码。

```
var stream = new System.IO.FileStream("e:\\check.xml", System.IO.FileMode.Create);
rtfMain.Selection.Save(stream, DataFormats.Xaml, true);
stream.Close(); 
```

总之，我只想知道是否从 FlowDocument 中删除了任何内容（图像、超链接等）并删除了参考文件。但不知何故，解决方案似乎非常难以捉摸。

提前感谢您的时间。

里特什

# java - int 不能被取消引用？

> ID：13745313
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:07:31.663
> 
> 标签：java, super, jcreator

编译程序后，我收到这条错误消息，显示我

```
 Resource: Employee.java
 int cannot be dereferenced 
```

对于此代码

```
public Salary(int positionSalary) {
        setMonthlySalary(positionSalary);
    } 
```

经过一段时间检查后，我仍然无法修复错误。这是我的课，

员工

```
import java.util.*;
import java.lang.String.*;
public class Employee {
    protected int type;
    private static int staticID = 0001;
    protected int id;
    protected String name;
    protected String ic;
    protected String tel;
    protected static int count = 0;
    protected int editChoice=0;
    private Salary salary = new Salary(0);

    public Employee(){
        id = -1;
        name = "";
        ic = "";
        tel = "";
    }

    public Employee(int type, String name, String ic, String tel) {
        this.type = type;
        this.id = staticID++;
        this.name = name;
        this.ic = ic;
        this.tel = tel;
        this.salary = salary;
        count++;
    }

    public void setId(int id){
        this.id = id;
    }

    public int getId(){
        return id;
    }

    public void setName(String name){
        this.name = name;
    }

    public String getName(){
        return name;
    }

    public void setIc(String ic){
        this.ic = ic;
    }

    public String getIc(){
        return ic;
    }

    public void setTel(String tel){
        this.tel = tel;
    }

    public String getTel(){
        return tel;
    }

    public void setSalary(int salary){
        salary.setMonthlySalary(salary);
    }

    public double getSalary(){
        return salary.getMonthlySalary();
    }

    public static void setCount(int count){
        count =count ;
    }

    public static int getCount(){
        return count;
    }

    public static void addCount(){
        count++;
    }

    public String toString(){
        return getId()+"/t/t" +getName()+ "\t\t" +getIc()+ "\t\t" +getTel();
    }

    //Add Employee
    public void addEmp(){
        Scanner add = new Scanner(System.in);
        System.out.print("Enter New Employee Name :");
        String newName = add.nextLine();
        System.out.print("Enter New Employee IC :");
        String newIC = add.nextLine();
        System.out.print("Enter New Employee Phone Number :");
        String newPhoneNumber = add.nextLine();

        this.id = staticID++;
        setName(newName.toUpperCase());
        setIc(newIC);
        setTel(newPhoneNumber);
        this.id=staticID++;

    }

    //Delete Employee
    public void deleteEmp(){
        this.id = 0;
        System.out.println("Deletion Successfull.");
    }

    //Edit Employee Details
    public void editEmp(){
        Scanner edit = new Scanner(System.in);
        int choice= 0;
        choice=editMenu();
        switch(choice){
            case 1:
                System.out.print("Enter Employee Name: ");
                String newName = edit.nextLine();
                setName(newName.toUpperCase());
                break;
            case 2:
                System.out.print("Enter Employee IC: ");
                String newIC = edit.nextLine();
                setIc(newIC);
                break;
            case 3:
                System.out.print("Enter Employee Contact Number: ");
                String newTel = edit.nextLine();
                setTel(newTel);
                break;
            case 4:
                this.editChoice=4;
                break;
        }
  }
    public int getEditChoice(){
        return this.editChoice;
    }
    public void setEditChoice(int editChoice){
        this.editChoice=editChoice;
    }

    public int editMenu(){
        Scanner input = new Scanner(System.in);
        System.out.println("You Are Currently Modifying:\n"+
                           "\nID:"+getId()+"   Name:"+getName()+
                           "\n======================================"+
                           "\n\n1.Employee Name\n" +
                           "2.Employee IC\n" +
                           "3.Employee Contact Number\n" +
                           "4.Continue\n");
        int choice = input.nextInt();

        return choice;

    }

} 
```

薪水

```
public class Salary {
    private double monthlySalary;

    public Salary(){
    }

    public Salary(int positionSalary) {
        setMonthlySalary(positionSalary);
    }

    public double getMonthlySalary(){
        return this.monthlySalary;
    }
    public void setMonthlySalary(int positionSalary){
        switch(positionSalary){
            case 0:
                this.monthlySalary=0.00;
                break;
            case 1:
                this.monthlySalary=4500.00;
                break;
            case 2:
                this.monthlySalary=4000.00;
                break;
            case 3:
                this.monthlySalary=3500.00;
                break;
            case 4:
                this.monthlySalary=3000.00;
                break;
            case 5:
                this.monthlySalary=2500.00;
                break;
            case 6:
                this.monthlySalary=2000.00;
                break;
            case 7:
                this.monthlySalary=1500.00;
                break;
        }
    }

} 
```

行政

```
import java.util.*;
import java.lang.String.*;
public class Admin extends Employee{
    private int position;// head of school,head of division,assistant ,senior , manager
    private String positionS;
    private String department;// accounting,finance ,operational ,marketing
    private int workingYears;
    private static int adminCount = 0;

    public Admin() {
        super();
    }

    public Admin(String name, String ic, String tel, int position, String department, int workingYears) {
        super(1, name, ic, tel);
        this.position = position;
        this.department = department;
        this.workingYears = workingYears;
        adminCount++;

    }

    public String getPosition(){
        positionToString(this.position);
        return this.positionS;
    }
    public void setPosition(int position){
        this.position = position;
    }
    public void positionToString(int position){
        switch(position){
            case 1:
                this.positionS="HEAD OF SCHOOL";
                break;
            case 2:
                this.positionS="HEAD OF DIVISON";
                break;
            case 3:
                this.positionS="ASSISTANT";
                break;
            case 4:
                this.positionS="SENIOR";
                break;
            case 5:
                this.positionS="MANAGER";
                break;
        }
    }

    public void setDepartment(String department){
        this.department = department;
    }

    public String getDepartment(){
        return department;
    }

    public void setWorkingYears(int workingYears){
        this.workingYears = workingYears;
    }

    public int getWorkingYears(){
        return workingYears;
    }

    public double calculateSalary(){
        if(workingYears>5){
            return super.getSalary()+2000;
        }
        else
            return super.getSalary()+1000;
    }

    public static void setAdminCount(int adminCount){
        adminCount=adminCount;
    }

    public static int getAdminCount(){
        return adminCount;
    }

    public String toString(){
        return super.toString()+ "\t\t" +getPosition()+ "\t\t" +getDepartment()+ "\t\t\t" +getWorkingYears()+ "\t\t" +calculateSalary();
    }

    //Add Admin Employee
    public void addEmp(){
        super.addEmp();
        Scanner add = new Scanner(System.in);
        System.out.print("1.Head of School\n"+
                         "2.Head of Division\n"+
                         "3.Assistant\n"+
                         "4.Senior\n"+
                         "5.Manager\n\n"+
                         "Please Enter Your Choice:");
        int newPositionS = add.nextInt();
        int newPosition = newPositionS;
        setPosition(newPosition);
        System.out.print("Enter Employee Department: ");
        String newDepartment = add.nextLine();
        setDepartment(newDepartment);
        this.adminCount++;
    }

    //Search Admin Employee
    public void searchAdminEmp(){
        System.out.print("ADMINISTRATIVE EMPLOYEE"+
                         "\n================================"+
                         "\nID: "+super.getId()+
                         "\nName: "+super.getName()+
                         "\nNRIC: "+super.getIc()+
                         "\nTel No.: "+super.getTel()+
                         "\nPosition: "+getPosition()+
                         "\nSalary: "+getSalary() +
                         "\nDepartment: "+getDepartment());
    }

    //Edit Admin Employee Detail
    public void editEmp(){
         super.editEmp();
         Scanner edit = new Scanner(System.in);
         int check = super.getEditChoice();
         if(check==5){
            switch(EditAdminMenu()) {
                case 6:
                    System.out.print("1.Head of School\n"+
                                     "2.Head of Division\n"+
                                     "3.Assistant\n"+
                                     "4.Senior\n"+
                                     "5.Manager\n\n"+
                                     "Please Enter Your Choice:");
                    int newPositionS = edit.nextInt();
                    int newPosition = newPositionS;
                    super.setSalary(newPosition);
                    setPosition(newPosition);
                    break;
                case 7:
                    System.out.print("Enter Employee Department: ");
                    String newDepartment = edit.nextLine();
                    setDepartment(newDepartment);
                    break;
                case 0:
                    super.setEditChoice(0);
                    break;
                default:
                    System.out.print("Wrong Input, please try again.");
                    break;
            }
        }
    }
    public int EditAdminMenu(){
        Scanner edit = new Scanner(System.in);
         System.out.print("=======Administrative==========\n"+
                          "6.Employee Position\n"+
                          "7.Employee School\n"+
                          "0.Back\n\n");
        int choice = edit.nextInt();

        return choice;
    }

} 
```

学术的

```
import java.util.*;
import java.lang.String.*;
public class Academic extends Employee{
    private String school;//SAS, SBS, SSSH , SPUS , SOT
    private int position;// lecturer ,tutor
    private String positionS;
    private int workingYears;
    private static int acaCount = 0;

    public Academic(){
        super();
    }

    public Academic(String name, String ic, String tel, String school, int position, int workingYears){
        super(2, name, ic, tel);
        this.school = school;
        this.position = position;
        this.workingYears = workingYears;
        acaCount++;

    }

    public void setSchool(String school){
        this.school = school;
    }

    public String getSchool(){
        return school;
    }

    public void setPosition(int position){
        this.position = position;
    }

    public String getPosition(){
        positionToString(this.position);
        return this.positionS;
    }

    public void positionToString(int position){
        switch(position){
            case 6:
                this.positionS="LECTURER";
                break;
            case 7:
                this.positionS="TUTOR";
                break;
            default:
                break;
        }
    }

    public void setWorkingYears(int workingYears){
        this.workingYears = workingYears;
    }

    public int getWorkingYears(){
        return workingYears;
    }

    public double calculateSalary(){
        if(workingYears>5){
            return super.getSalary()+1000;
        }
        else
            return super.getSalary()+500;
    }

    public static void setAcaCount(int acaCount){
        acaCount=acaCount;
    }

    public static int getAcaCount(){
        return acaCount;
    }

    public String toString(){
        return super.toString()+ "\t" +getSchool()+ "\t\t" +getPosition()+ "\t\t" +getWorkingYears()+"\t\t\t" +calculateSalary() ;
    }

    //Add Admin Employee
    public void addEmp(){
        super.addEmp();
        Scanner add = new Scanner(System.in);
        System.out.print("Enter Employee School: ");
        String newSchool = add.nextLine();
        setSchool(newSchool.toUpperCase());
        System.out.print("6.Tutor\n"+
                         "7.Lecturer\n\n"+
                         "Please Enter Your Choice:");
        int newPositionS = add.nextInt();
        int newPosition = newPositionS;
        setPosition(newPosition);
        this.acaCount++;
    }

    //Search Admin Employee
    public void searchAcaEmp(){
        System.out.print("ADMINISTRATIVE EMPLOYEE"+
                         "\n================================"+
                         "\nID: "+super.getId()+
                         "\nName: "+super.getName()+
                         "\nNRIC: "+super.getIc()+
                         "\nTel No.: "+super.getTel()+
                         "\nSchool: "+getSchool()+
                         "\nPosition: "+getPosition()+
                         "\nSalary: "+getSalary());
    }

    //Edit Admin Employee Detail
    public void editEmp(){
         super.editEmp();
         Scanner edit = new Scanner(System.in);
         int check = super.getEditChoice();
         if(check==5){
            switch(EditAcaMenu())   {
                case 6:
                    System.out.print("Enter Employee School: ");
                    String newSchool = edit.nextLine();
                    setSchool(newSchool.toUpperCase());
                    break;
                case 7:
                    System.out.print("6.Tutor\n"+
                                     "7.Lecturer\n\n"+
                                     "Please Enter Your Choice:");
                    int newPositionS = edit.nextInt();
                    int newPosition = newPositionS;
                    super.setSalary(newPosition);
                    setPosition(newPosition);
                    break;
                case 0:
                    super.setEditChoice(0);
                    break;
                default:
                    System.out.print("Wrong Input, please try again.");
                    break;
            }
        }
    }
    public int EditAcaMenu(){
        Scanner edit = new Scanner(System.in);
         System.out.print("================Academic================\n"+
                          "6.Employee Position\n"+
                          "7.Employee School\n"+
                          "0.Back\n\n");
        int choice = edit.nextInt();

        return choice;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T14:09:12.317

*这*是问题，而不是构造函数：

```
public void setSalary(int salary){
    salary.setMonthlySalary(salary);
} 
```

看看`salary.setMonthlySalary`- 你*期望*它做什么，因为这`salary`是一个`int`参数？

我怀疑你是打算打电话`this.salaray.setMonthlySalary(salary)`的。

顺便说一句，这不是你遇到的唯一问题。看看你的代码，我怀疑这不能满足你的要求：

```
public static void setCount(int count){
    count =count ;
} 
```

您确实需要了解代码何时引用参数以及何时引用字段。如果您对两者感到困惑，请使用不同的名称。

此外：

*   为什么您只允许使用 a 构造薪水`int`，然后将其存储为 a `double`？
*   首先，您不应该使用`double`货币价值。要么使用`int`带有隐式缩放的 a （例如美分数），要么使用 a `BigDecimal`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T14:12:43.563

正如错误消息所说

```
Resource: Employee.java
 int cannot be dereferenced 
```

这意味着您不能取消引用它没有提到薪水中的`int`值。`Employee`

```
public void setSalary(int salary){
    salary.setMonthlySalary(salary);
} 
```

您有一个称为参数的参数`salary`，`int` 它隐藏了具有相同名称的字段。要解决此问题，您可以这样做

```
public void setSalary(int salary){
    this.salary.setMonthlySalary(salary);
} 
```

或者更好的是使名称不同，因为它们有不同的用途。

```
public void setSalary(int monthlySalary){
    salary.setMonthlySalary(monthlySalary);
} 
```

我建议您查看 IDE 中的代码，因为它将帮助您找到错误的来源并帮助您修复它们。

# ios - 安装 RestKit 后使用未声明的标识符“RKClient”

> ID：13745314
> 
> 赞同：8
> 
> 时间：2012-12-06T14:07:39.753
> 
> 标签：ios, xcode, restkit

根据说明安装 RestKit（使用 github 获取源代码）并导入后，我在 XCode 中收到“使用未声明的标识符 'RKClient'”错误。

*   [https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)
*   [https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-as-a-Git-Submodule)

根据说明，安装和链接后，我将以下代码放入 didFinishedLaunchingWithOptions 中：

```
RKClient *client = [RKClient clientWithBaseURLString:@"http://restkit.org"]; 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T21:15:17.930

RKClient 不再是 RestKit 0.20.x 的一部分。RestKit 现在在后台使用 AFNetworking。您可以像这样访问新的 HTTP 客户端：

```
[RKObjectManager sharedManager].HTTPClient 
```

请参阅[https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

您会发现有关升级的大部分更改 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T16:43:42.070

你是否安装了最新的 RestKit，即 0.20pre2 版本？如果是，那么您正在处理与我 30 分钟前相同的问题。问题是 API 从 0.10 到 0.20 版本发生了巨大变化，并且文档仍然在描述 0.10 版本的内容。关于您的特定问题，RKClient 类在 0.20 中不再存在，整个网络方法已经改变。

# php - 维护从一个php页面到另一个页面的jquery事件

> ID：13745315
> 
> 赞同：1
> 
> 时间：2012-12-06T14:07:39.683
> 
> 标签：php, jquery

我遇到这种情况： - 有一个 php 页面 - 有一个折叠菜单的 jQuery 脚本 - 通过在 php 中传递变量单击其中一个折叠的元素以加载另一个页面

问题： - jQuery 脚本也会重新加载并取消我之前的选择。

这是一个例子。我单击“菜单”，jQuery 脚本作用于“折叠器”，但是当我单击“鱼”链接（或其他）时，我显示了页面，但菜单不会显示为折叠状态。

我想要实现的目标： - 在从一页移动到另一页时保持菜单折叠

这是一个 php 代码示例。

```
echo rightMenu();
function rightMenu(){

    $r  = '';

    $r .= '<ul id="collapser"><li>Menu<ul>';
    $r .= '<li><a href="main.php?show=page1">Fish</a></li>';
    $r .= '<li><a href="main.php?show=page2">Vegetables</a></li>';
    $r .= '<li><a href="main.php?show=page3">Meat</a></li></ul>';
    $r .= '</li></ul>';

    return $r;
}; 
```

谢谢你，米里亚姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:05:46.713

如果包含`jQuery.cookie`，则可以使用 cookie 来执行此操作，这应该更简单：

```
$("#collapser").click(function () {
   //change to more appropriate value
   $.cookie('autocollapse', $(this).is(":visible"), {expires: 30});
});

//initial page load
if ($.cookie('autocollapse')) {
   $("#collapser").click();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:18:55.597

单击折叠时，您可以发送一个 ajax 请求，该请求记录某种指示折叠的会话变量：

```
//Your collapser click function
//record hidden status in data
$("#collapser").click(function () {
   if ($(this).data('hidden')) {
      $(this).slideDown().data('hidden', false);
   }
   else {
      $(this).slideUp().data('hidden', true);
   }
   //record hidden (collapsed) status on the server
   $.post('/record-collapser-hide.php', {'hidden': $(this).data('hidden')});
});

//On initial page load, collapse if #autocollapse is in the DOM
//Added by PHP code below
if ($("#autocollapse").length) {
   $("#collapser").data('hidden', false).click();
}

//--- record-collapser-hide.php ---
session_start();
$_SESSION['collapsercollapsed'] = isset($_POST['hidden']) ? $_POST['hidden'] : 0;

//--- function rightMenu() ---
...
$r .= '</li></ul>';
if (isset($_SESSION['collapsercollapsed']) && $_SESSION['collapsercollapsed']) {
   $r .= "<span style='display: none' id='autocollapse'>&nbsp;</span>";
} 
```

注意：此代码很可能无法按原样运行，但您应该能够遵循基本思想。

# python - 如何在python中调用getter或setter？

> ID：13745319
> 
> 赞同：0
> 
> 时间：2012-12-06T14:07:50.727
> 
> 标签：python

我有以下问题：

```
 self.myWrapper = wrapper.Wrapper
    self.myWrapper.set_entities(self.myWrapper, self.testEntity) 
```

产生一条错误消息，也是如此

```
 self.myWrapper = wrapper.Wrapper   
 self.myWrapper.set_entities(self.myWrapper, self.testEntity) 
```

错误信息是：

> TypeError：必须使用 Wrapper 实例作为第一个参数调用未绑定的方法 set_entities()（改为获取类型实例实例）

这里有什么问题？对象实例和类型实例的区别在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:09:13.660

假设`wrapper.Wrapper`是一个类，你需要实际初始化一个实例。

```
self.myWrapper = wrapper.Wrapper() 
```

注意括号。另外，请注意这不是 getter/setter 调用的问题（尽管如果您对成员属性使用 getter/setter 模式，您应该多阅读一些有关 Python 的内容，因为在 Python 中大多数情况下不建议这样做），但是而是实例与类和属性访问的问题。

# matlab - pinv 结果差异 - matlab

> ID：13745322
> 
> 赞同：0
> 
> 时间：2012-12-06T14:08:08.853
> 
> 标签：matlab, image-processing, matrix

作为我们作业的一部分，我们需要将 imageA 映射到 iamge B
我正在使用此代码进行逆映射
`A = zeros(8,8);
A = [imageB(1,1) imageB(2,1) 0 0 1 0 (-1)*(imageB(1,1))*imageA(1,1) (-1)*(imageB(2,1))*imageA(1,1);
0 0 imageB(1,1) imageB(2,1) 0 1 (-1)*(imageB(1,1))*imageA(2,1) (-1)*(imageB(2,1))*imageA(2,1);
imageB(1,2) imageB(2,2) 0 0 1 0 (-1)*(imageB(1,2))*imageA(1,2) (-1)*(imageB(2,2))*imageA(1,2);
0 0 imageB(1,2) imageB(2,2) 0 1 (-1)*(imageB(1,2))*imageA(2,2) (-1)*(imageB(2,2))*imageA(2,2);
imageB(1,3) imageB(2,3) 0 0 1 0 (-1)*(imageB(1,3))*imageA(1,3) (-1)*(imageB(2,3))*imageA(1,3);
0 0 imageB(1,3) imageB(2,3) 0 1 (-1)*(imageB(1,3))*imageA(2,3) (-1)*(imageB(2,3))*imageA(2,3);
imageB(1,4) imageB(2,4) 0 0 1 0 (-1)*(imageB(1,4))*imageA(1,4) (-1)*(imageB(2,4))*imageA(1,4);
0 0 imageB(1,4) imageB(2,4) 0 1 (-1)*(imageB(1,4))*imageA(2,4) (-1)*(imageB(2,4))*imageA(2,4)];
imageA(1,4); imageA(2,4)];
B = reshape(imageA,[],1);`
`D = pinv(A)*B;`

然而，我的朋友使用此代码：
`D = inv(A'*A)*A'*B;`

我得到与他相同的值，除了我得到 0.0000 而他得到 -0.0000 所有其余的正数或负数都是相同的。

为什么是这样 ？正确答案是什么？
你建议我可以做些什么来轻松检查我的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:04:59.210

这些差异似乎源于数值的不稳定性。就机器精度而言，它们有多大（`eps`）？你为什么不使用`backslash`？

```
>> D = A \ B; 
```

# facebook - 如何将网站 URL 从“通过 APPNAME 发布 XX 分钟”更改为其他内容，如我网站上使用的 Facebook 登录 URL

> ID：13745324
> 
> 赞同：3
> 
> 时间：2012-12-06T14:08:20.340
> 
> 标签：facebook, facebook-apps, facebook-wall

我的公司有一个 CMS... 登录后，他们可以将 facebook 连接到他们的 CMS 帐户。

如果他们通过我们的 CMS 在墙上发帖，他们的消息后会出现类似这样的内容：

> XX 分钟前通过 APPNAME 发布

## 现在它来了：（我们的案例）

当他们点击 APPNAME 时，他们会从我们的 CMS 系统重定向到**登录页面。**

虽然我们**想将**用户重定向**到 CMS 的促销网站**，但该网站位于**不同的域中**......

Facebook 应用程序设置告诉我

**应用程序域必须从站点 URL 派生**

*例子：*

*我们登录 www.xx.nl，我们的促销网站域名是 yy.nl*

## 问题：

**我们可以在不更改应用设置中的“使用 facebook 登录的网站**”字段的情况下更改**圆圈链接**的重定向吗？**重定向到应用页面**？甚至**更好地**直接**访问我们的促销网站**？！？！？！

 ******我很困惑，现在试图让它工作 2 个工作日......

提前谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:32:49.350

你不能在 Facebook 方面做很多事情，你必须在你的网站上更改你的代码。除了当用户登录您的站点和 URL 更改时它会混淆用户这一事实之外，从安全方面来看，它也不是最好的：/

您仍然可以尝试从 facebook 获取引用代码并将所有来自该 url 的传入请求重定向到 yy.nl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:47:25.940

我已经通过将 facebook 重定向更改为类似 www.xx.nl/?something=true 的方式解决了这个问题。.htaccess 现在将其拾取并重定向到促销网站。******

# list - 自定义对象列表无法在运行时添加对象给出“Nullpointer Exception”

> ID：13745325
> 
> 赞同：0
> 
> 时间：2012-12-06T14:08:21.210
> 
> 标签：list, jsp, nullpointerexception, dynamicobject, tobjectlist

在创建一个自定义类型 objectlist 列表并在该列表中添加一些对象时，我遇到了一些问题。我有一个`advertise`对象列表

```
public int ajax_GenerateReports(ResourceRequest request, ResourceResponse response) throws Exception {

    log.info("ajax_Generate Reports Enter");

    String strcamp_id =  request.getParameter("CMD");

    log.info("ajax_Generate Reports Enter"+strcamp_id);

    long camp_id = Long.parseLong(strcamp_id);

    log.info("camp_ID:-"+ camp_id);

    int iResult = 1;

    List<campaign_map_adv> camp_map_adv_List = null;

    List<advertise> adv_List = null;

    camp_map_adv_List = campaign_map_advLocalServiceUtil.getAllCamp_Map_Adv_By_campID(camp_id);

    log.info("CAMPIAGN MAP OBJECT : - "+ camp_map_adv_List.get(0));
    log.info("CAMPIAGN MAP OBJECT List Count : - "+ camp_map_adv_List.size());

    if(!camp_map_adv_List.isEmpty()) { //Search For Each Camp entry in camp_map Adv

        for (campaign_map_adv campaign_map_advitem : camp_map_adv_List) {                
            //add each advertise to temporary list file of advertise from camp_map_adv
            advertise temp_ad = advertiseLocalServiceUtil.getadvertise(campaign_map_advitem.getAdvId());

            adv_List.add(temp_ad);
        }

    }
    //          

    ////////////////
    System.setProperty("java.awt.headless", "true");
    System.out.println(java.awt.GraphicsEnvironment.isHeadless());
    System.out.println("IN GENRATE REPORTS ");

    System.out.println("IN GENRATE LIST " +adv_List.size());

    JRBeanCollectionDataSource beanCollectionDataSource = new JRBeanCollectionDataSource(adv_List);

    System.out.println(" bean collection " + beanCollectionDataSource.getRecordCount());

    System.out.println("Test!!");

    JasperPrint jasperPrint = JasperFillManager
            .fillReport(
                    "C:/liferay/tomcat-7.0.27/webapps/eMenuAdvertise-portlet/src_reports/report3.jasper",
                    new HashMap<String, Object>(), beanCollectionDataSource);

    System.out.println(" report path ");
    JasperExportManager.exportReportToHtmlFile(jasperPrint, "c:/liferay/report.html");

    ///////////////

    log.info("ajax_GenerateReports Leave");

    return iResult;
} 
```

从以下行开始，我的代码在插入第一个对象后出现运行时错误：

```
advertise temp_ad = advertiseLocalServiceUtil.getadvertise(campaign_map_advitem.getAdvId());

adv_List.add(temp_ad); 
```

所以如果有人可以指导我......

堆栈跟踪：-

```
18:32:21,719 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2311] serveResource Start
18:32:21,746 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2322] Resource Id - generate_report
18:32:21,747 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2225] ajax_Generate Reports Enter
18:32:21,747 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2228] ajax_Generate Reports Enter22901
18:32:21,747 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2230] camp_ID:-22901
18:32:21,778 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2237] CAMPIAGN MAP OBJECT : - {id=22902, campaignId=22901, advId=18726, restId=15101, isactive=true, adtypeId=4}
18:32:21,779 INFO  [http-bio-8080-exec-56][RestaurantPortlet:2238] CAMPIAGN MAP OBJECT : - 7
java.lang.NullPointerException
    at emenu.advertise.portlet.RestaurantPortlet.ajax_GenerateReports(RestaurantPortlet.java:2248)
    at emenu.advertise.portlet.RestaurantPortlet.serveResource(RestaurantPortlet.java:2437)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:118)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:71)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:531)
    at com.liferay.portlet.InvokerPortletImpl.invokeResource(InvokerPortletImpl.java:626)
    at com.liferay.portlet.InvokerPortletImpl.serveResource(InvokerPortletImpl.java:436)
    at com.liferay.portal.action.LayoutAction.processPortletRequest(LayoutAction.java:1075)
    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:719)
    at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:249)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:176)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:560)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:537)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:294)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:138)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.gzip.GZipFilter.processFilter(GZipFilter.java:123)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:294)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.i18n.I18nFilter.processFilter(I18nFilter.java:241)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:246)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:83)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:80)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:216)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:187)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:167)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:167)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:187)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:46:19.880

[您在此评论](https://stackoverflow.com/questions/13745325/custom-object-list-cant-add-object-at-runtime-gives-nullpointer-exception#comment18896791_13745325)中回答了您自己的问题。

因此，考虑到这一点 `RestaurantPortlet.java:2248`，堆栈跟踪中的行将是：

```
adv_List.add(temp_ad); // I m guessing this might be the line: 2248 
```

我认为这只是您可能错过了实例化的疏忽`adv_List`，您目前拥有：

```
List<advertise> adv_List = null; 
```

在此之后没有任何内容，直接调用`adv_List.add(temp_ad);`，而是我们可以拥有：

```
List<advertise> adv_List = new ArrayList<advertise>(); 
```

我认为这应该解决它，这很简单:-)

[***与问题无关：***将您的类名视为小写（如 等）很奇怪，`advertise`这`campaign_map_adv`使得它难以阅读并且不是标准的 java 约定。因此，您必须使用带下划线的变量，这又是一个阅读难题。]

# php - 通过电子邮件/内容类型/字符集传达 XML 内容？

> ID：13745329
> 
> 赞同：0
> 
> 时间：2012-12-06T14:08:38.280
> 
> 标签：php, xml, email, xml-parsing, email-headers

尝试将 XML 数据提交到电子邮件地址，该电子邮件地址设置为收集数据以进行解析并提交到本地 CRM 系统。似乎找不到任何关于在标题中应该设置什么正确的内容类型和字符集以便正确解析数据的文档。有关 HTTP 的大量信息，但无法找到有关通过电子邮件发送 XML 的任何信息。有人能在这里指出我正确的方向吗？

# java - 用 jsonpath 计算成员？

> ID：13745332
> 
> 赞同：120
> 
> 时间：2012-12-06T14:08:41.927
> 
> 标签：java, spring, testing, jsonpath, spring-test-mvc

是否可以使用 JsonPath 计算成员数？

使用[spring mvc test](https://github.com/SpringSource/spring-test-mvc)我正在测试一个生成的控制器

```
{"foo": "oof", "bar": "rab"} 
```

和

```
standaloneSetup(new FooController(fooService)).build()
            .perform(get("/something").accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk())
            .andExpect(jsonPath("$.foo").value("oof"))
            .andExpect(jsonPath("$.bar").value("rab")); 
```

我想确保生成的 json 中没有其他成员。希望通过使用 jsonPath 计算它们。是否可以？也欢迎替代解决方案。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2013-12-10T15:52:04.063

要测试**数组**的大小：`jsonPath("$", hasSize(4))`

要计算**object**的成员：`jsonPath("$.*", hasSize(4))`

* * *

即测试该 API 返回一个包含 4 个项目的**数组**：

接受值：`[1,2,3,4]`

```
mockMvc.perform(get(API_URL))
       .andExpect(jsonPath("$", hasSize(4))); 
```

* * *

测试 API 返回一个包含 2 个成员的**对象：**

接受值：`{"foo": "oof", "bar": "rab"}`

```
mockMvc.perform(get(API_URL))
       .andExpect(jsonPath("$.*", hasSize(2))); 
```

* * *

我正在使用 Hamcrest 1.3 版和 Spring Test 3.2.5.RELEASE

[hasSize(int) javadoc](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#hasSize(int))

注意：您需要包含 hamcrest-library 依赖项和`import static org.hamcrest.Matchers.*;`hasSize() 才能工作。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-11-22T14:42:04.223

您还可以使用 jsonpath 中的方法，所以而不是

```
mockMvc.perform(get(API_URL))
   .andExpect(jsonPath("$.*", hasSize(2))); 
```

你可以做

```
mockMvc.perform(get(API_URL))
   .andExpect(jsonPath("$.length()", is(2))); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-06T17:08:18.210

我们可以使用类似or的[JsonPath 函数](https://github.com/json-path/JsonPath#functions)，如下所示：`size()``length()`

```
@Test
public void givenJson_whenGetLengthWithJsonPath_thenGetLength() {
    String jsonString = "{'username':'jhon.user','email':'jhon@company.com','age':'28'}";

    int length = JsonPath
        .parse(jsonString)
        .read("$.length()");

    assertThat(length).isEqualTo(3);
} 
```

或者简单地解析`net.minidev.json.JSONObject`并获取大小：

```
@Test
public void givenJson_whenParseObject_thenGetSize() {
    String jsonString = "{'username':'jhon.user','email':'jhon@company.com','age':'28'}";

    JSONObject jsonObject = (JSONObject) JSONValue.parse(jsonString);

    assertThat(jsonObject)
        .size()
        .isEqualTo(3);
} 
```

事实上，第二种方法看起来比第一种方法表现更好。我进行了 JMH 性能测试，得到以下结果：

```
| Benchmark                                       | Mode  | Cnt | Score       | Error        | Units |
|-------------------------------------------------|-------|-----|-------------|--------------|-------|
| JsonPathBenchmark.benchmarkJSONObjectParse      | thrpt | 5   | 3241471.044 | ±1718855.506 | ops/s |
| JsonPathBenchmark.benchmarkJsonPathObjectLength | thrpt | 5   | 1680492.243 | ±132492.697  | ops/s | 
```

示例代码可以在[这里](https://github.com/earth001/jsonpath-jmh-test)找到。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-28T23:33:42.470

今天一直在处理这个问题。这似乎没有在可用的断言中实现。但是，有一种方法可以传入`org.hamcrest.Matcher`对象。有了它，您可以执行以下操作：

```
final int count = 4; // expected count

jsonPath("$").value(new BaseMatcher() {
    @Override
    public boolean matches(Object obj) {
        return obj instanceof JSONObject && ((JSONObject) obj).size() == count;
    }

    @Override
    public void describeTo(Description description) {
        // nothing for now
    }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-27T20:55:35.493

如果您`com.jayway.jsonassert.JsonAssert`的类路径中没有（我就是这种情况），则以以下方式进行测试可能是一种可能的解决方法：

```
assertEquals(expectedLength, ((net.minidev.json.JSONArray)parsedContent.read("$")).size()); 
```

*[注意：我假设 json 的内容总是一个数组]*

# android - 了解shader mat4 * vec4计算

> ID：13745334
> 
> 赞同：0
> 
> 时间：2012-12-06T14:08:47.280
> 
> 标签：android, vector, matrix, shader

有人可以确认以下计算吗？:)

在普通的 android opengl 着色器中，计算：

```
mat4 a;
vec3 p;

vec3 pos = (a * vec4(p,1.0)).xyz; 
```

会这样计算：

```
pos.x = a0 * p.x + a1 * p.y + a2 * p.z + a3 * 1.0;
pos.y = a4 * p.x + a5 * p.y + a6 * p.z + a7 * 1.0;
pos.z = a8 * p.x + a9 * p.y + a10 * p.z + a11 * 1.0; 
```

它是否正确？还是我错过了什么？每一个帮助都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:34:03.757

好的，实际上我找到了一个可靠的来源：[http ://www.khronos.org/files/opengles_shading_language.pdf](http://www.khronos.org/files/opengles_shading_language.pdf)

```
vec3 v, u;
mat3 m; 
```

和

```
u = m * v; 
```

相当于

```
u.x = m[0].x * v.x  +  m[1].x * v.y  +  m[2].x * v.z;
u.y = m[0].y * v.x  +  m[1].y * v.y  +  m[2].y * v.z;
u.z = m[0].z * v.x  +  m[1].z * v.y  +  m[2].z * v.z; 
```

所以

```
vec3 v, u;
mat4 m; 
```

和

```
u = (mat * vec4(v,1.0)).xyz 
```

应该相当于

```
u.x = m[0].x * v.x  +  m[1].x * v.y  +  m[2].x * v.z + m[3].x * 1;
u.y = m[0].y * v.x  +  m[1].y * v.y  +  m[2].y * v.z + m[3].y * 1;
u.z = m[0].z * v.x  +  m[1].z * v.y  +  m[2].z * v.z + m[3].z * 1; 
```

如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T02:11:14.153

所以答案是“是的”。

这也可以考虑为三点积。

# spring - 是否可以在 Spring xml-config 中将 String 转换为 int

> ID：13745337
> 
> 赞同：3
> 
> 时间：2012-12-06T14:08:48.667
> 
> 标签：spring

假设我有一个包含以下行的属性文件“config.properties”：

```
myIntValue=4711 
```

和一个小java bean：

```
public MyLittleJavaBean {
    private int theInt;
    public void setTheInt(int theInt) { this.theInt = theInt }
} 
```

在我的 applicationContext.xml 中，我阅读了属性文件：

```
<context:property-placeholder location="config.properties"/> 
```

然后我想像这样将这些东西连接在一起：

```
<bean id="theJavaBean" class="MyLittleJavaBean">
    <property name="theInt" value="${myIntValue}"/>
</bean> 
```

然后我会得到这个错误消息：

```
org.springframework.beans.TypeMismatchException: Failed to convert property
value of type 'java.lang.String' to required type 'int' for property 'theInt' 
```

是否可以将 ${myIntValue} 转换为 spring-xml 中的 int？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:29:05.880

嗯...您的设置一定有一些有趣的地方，因为对我来说，spring 无需我的任何努力就可以进行 String 到 Int 的转换。这是一个对我有用的例子：

**xml配置**：

```
<util:properties id="props">
    <prop key="foobar">23</prop>
</util:properties>

<context:property-placeholder properties-ref="props" />
<bean class="Foo" p:bar="${foobar}" /> 
```

**Foo.java**

```
public class Foo {
    private int bar;

    public void setBar(int bar) {
        this.bar = bar;
    }
} 
```

**更新**

用弹簧测试`3.1.2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T20:54:24.867

有时该异常不清楚，但编译器的逻辑。

在我的情况下，***$(name.itsn)***的价值参考错误，这给了我这个例外。

正确的方法是**${name.itsn}**

看看这个！问候帆

# django - django 表单集混淆（验证，必需，empty_permitted）

> ID：13745343
> 
> 赞同：12
> 
> 时间：2012-12-06T14:09:04.843
> 
> 标签：django, django-forms

我真的发现 django 表单集令人困惑。

我对以下我不太了解的概念特别有疑问：

> 表单集足够聪明，可以忽略未更改的额外表单。

谈论代码试图太聪明。这到底是什么意思？为什么我什至想要那个？

然后，试图理解之前的概念，我看到了人们

> 在所需的表单集中制作表单。

这是另一个我无法理解的概念。什么是表单集中的必填表单，为什么我必须制作必填表单？再次没有记录的东西。

然后谈到我的实际问题，其他人似乎也遇到过，但他们无法真正解释为什么他们以他们修复它的方式修复它。

为什么在下面的示例中，表单集是有效的，而具有相同输入的单个表单将是无效的？

```
import django
class MyForm(django.forms.Form):
    start = django.forms.DateField()
    end = django.forms.DateField()

data =  {
    'form-TOTAL_FORMS': '1',
    'form-MAX_NUM_FORMS': '',
    'form-INITIAL_FORMS': '0',
    'form-0-start': '',
    'form-0-end': '',
}

MyFormSet = formset_factory(MyForm)
formset = MyFormSet(data)
#fee_forms[0].empty_permitted = False

print formset.is_valid()
# --- returns True ---
print formset.errors

f = MyForm({'start': '', 'end': ''})
print f.is_valid()
# --- returns False ---
print f.errors 
```

将 empty_permitted 设置为 False 似乎给了我预期的结果（这是由于缺少“开始”和“结束”而导致表单集无效）。这是另一个未记录的功能...

有人愿意花点时间解释吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-01T23:05:10.703

> > 表单集足够聪明，可以忽略未更改的额外表单。
> 
> 谈论代码试图太聪明。这应该是什么意思？为什么我什至想要那个？

这似乎意味着——正如你所计算的——由表单集（`extra=N`在你的例子中）创建的“额外”表单已`empty_permitted`设置为`True`. [看一眼`django/forms/formsets.py`](https://github.com/django/django/blob/stable/1.5.x/django/forms/formsets.py#L144)就会发生这种情况。

`formset[0].empty_permitted`表示如果`formset[0].has_changed() == False`，则不进行进一步的处理/验证。同样，[您可以在`forms/forms.py`](https://github.com/django/django/blob/stable/1.5.x/django/forms/forms.py#L268).

**为了防止这种情况**，[一篇博客文章建议](http://www.kevinbrolly.co.uk/blog/django-model-formsets-not-validating/)定义一个自定义表单集以用于`modelformset_factory`（或`inlineformset_factory`）其中设置`empty_permitted = False`：

```
class MyModelFormSet(BaseModelFormSet):
    def __init__(self, *args, **kwargs):
        super(MyModelFormSet, self).__init__(*args, **kwargs)
        for form in self.forms:
            form.empty_permitted = False 
```

我没有测试过这个，但它看起来是合法的。

至于为什么有人可能想要这个，它使使用 [`django-dynamic-formset`](http://code.google.com/p/django-dynamic-formset/)变得更简单——你可以发送数据，`form-0`并且`form-2`假设`form-1`是一个额外的表单（*即*没有链接到模型数据），Django 不会抱怨。如果默认`empty_permitted`情况`False`下，您将不得不担心在您自己的代码中跳过空白表单，或者在 Javascript 中重新索引内容。

# html - 使整体 作为与正确 HTML 的链接

> ID：13745347
> 
> 赞同：19
> 
> 时间：2012-12-06T14:09:22.917
> 
> 标签：html, css, navigation, html-lists

我知道这已经出现过很多次了，但是在我的具体情况下我找不到任何解决方案。

我有一个导航栏，`<li>`如果你愿意的话，我希望整个 's 都被“链接”或“可点击”。现在只有`<a>`（和`<div>`我摆弄过的）是“可点击的”。

我已经尝试过这种`li a {display: inner-block; height: 100%; width: 100%}`方法，但结果很糟糕。

源代码可以在这里找到：http: [//jsfiddle.net/prplxr/BrcZK/](http://jsfiddle.net/prplxr/BrcZK/)

## HTML

```
<!DOCTYPE html>
<html>
    <head>
        <title>asdf</title>
    </head>
    <body>
        <div id="wrapper">
            <div id="menu">
                <div id="innermenu">    
                    <ul id="menulist">       
                        <li class="menuitem"><a href="index.php"><div class="menulink">Lnk1</div></a></li>
                        <li class="menuitem"><a href="index.php"><div class="menulink">Lnk2</div></a></li>
                        <li class="menuitem"><a href="index.php"><div class="menulink">Lnk3</div></a></li>
                        <li class="menuitem"><a href="index.php"><div class="menulink">Lnk4</div></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

有人对此有一个巧妙的解决方案吗？

先感谢您！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-06T14:18:03.927

*   摆脱`<div>`s。
*   将`<a>`标签设置为`display: block`
*   将填充从 移动`<li>`到`<a>`。
*   s将`<li>`需要浮动或`display: inline-block`

示例：http: [//jsfiddle.net/8yQ57/](http://jsfiddle.net/8yQ57/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T14:23:33.497

只需使用“显示块”进行链接。

```
ul {
  display: block;
  list-style-type: none;
}

li {
  display: inline-block; /* or block with float left */
  /* margin HERE! */
}

li a {
  display: block;
  /* padding and border HERE! */
} 
```

这是示例[http://jsfiddle.net/TWFwA/](http://jsfiddle.net/TWFwA/) :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-06T14:20:18.847

我自己就是有这个问题。

答案再简单不过了：

```
<li class="menuitem"><a href="index.php"><div class="menulink">Lnk1</div></a></li>
Wrong:
.menuitem {
    list-style-type:        none;
    display:                 inline;
    margin-left:            5px;
    margin-right:            5px;
    font-family:            Georgia;
    font-size:                11px;
    background-color:        #c0dbf1;
    border:                 1px solid black;
    padding:                10px 20px 10px 20px;
}

Correct
.menuitem a {
    list-style-type:        none;
    display:                 block;
    margin-left:            5px;
    margin-right:            5px;
    font-family:            Georgia;
    font-size:                11px;
    background-color:        #c0dbf1;
    border:                 1px solid black;
    padding:                10px 20px 10px 20px;
} 
```

换句话说，您想将 LI 所具有的 css 应用于 A 元素。确保 A 是块行元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T14:18:43.170

我想你可能的意思是`inline-block`，不是`inner-block`：

```
li a {display: inline-block; height: 100%; width: 100%; } 
```

此外，`inline-block`较旧的 IE 浏览器也有其自身的一系列问题，并且可能不会像您期望的那样做出反应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T14:14:36.877

先生，您使用 jquery 吗？如果是的话，你可以试试：

```
$("li").click(function(){
   $(this).find('a').click();
}); 
```

或者您也可以将其用作 css：

```
li{
  position:relative;
}
li a {
  position:absolute;top:0px;left:0px;width:100%;height:100%;
} 
```

选择一个...祝你好运

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T14:16:14.100

只需`a`直接格式化而不是`li`使用您的样式。

我改变了你的小提琴[http://jsfiddle.net/BrcZK/1/](http://jsfiddle.net/BrcZK/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T14:19:52.463

您应该制作`a`元素`display:block`或`display:inline-block`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T14:21:50.990

这就是我所做的：

```
a { display: block; } 
```

然后按照我认为合适的方式设计锚。

这是小提琴：http: [//jsfiddle.net/erik_lopez/v4P5h/](http://jsfiddle.net/erik_lopez/v4P5h/)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-12-06T14:13:16.800

移动`<a>`标签，以便它们包裹`<li>`标签。根据[这个](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-an-anchor-ever-correct)答案，锚标签必须包含内联元素，看起来你`<li>`的是内联的，所以这应该是有效的。

# regex - 正则表达式重构

> ID：13745350
> 
> 赞同：3
> 
> 时间：2012-12-06T14:09:35.703
> 
> 标签：regex

是否有自动正则表达式重构之类的东西？

我想知道是否有可以理解、简化和/或优化正则表达式的在线服务或实用程序。

例如

`^[A-Z][A-Z][0-9][0-9][0-9]$`→`^[A-Z]{2}[0-9]{3}$`

（显然这是一个抽象的例子）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:35:29.247

正则表达式是自动机，您可以使用一种旨在构建确定性有限自动机的算法，它将原始自动机重构为更简单的自动机。

我不知道编程语言实现，但您可以从[非确定性有限自动机维基百科页面](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)中获得灵感。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T14:13:39.150

这可能有用（我还没有尝试过） [http://www.myregextester.com/](http://www.myregextester.com/)

嘿我试过这个

如下使用它

1.  在“源文本”AA111 AA111AA111 下粘贴以下代码

2.  在“工具”下拉菜单中选择“字符集：优化字符集”

3.  粘贴正则表达式模式字符串并点击“GO”

# php - html_entity_decode 上的 ENT_HTML5、ENT_HTML401、... 修饰符有什么作用？

> ID：13745353
> 
> 赞同：54
> 
> 时间：2012-12-06T14:09:53.593
> 
> 标签：php, html, html-entities, htmlspecialchars

由于 php 5.4 **html_entity_decode**引入了四个新的标志，用最少的解释

```
ENT_HTML401 Handle code as HTML 4.01.
ENT_XML1    Handle code as XML 1.
ENT_XHTML   Handle code as XHTML.
ENT_HTML5   Handle code as HTML 5\. 
```

我想了解它们的用途。在哪些情况下它们很重要？

我的猜测（但我可能错了）是任何不同的标准都会编码一些不寻常的字符，但任何其他的都不会，所以为了尊重这一点，它们就在这里。

我的研究：**htmlentities**有同样的最小解释，也没有例子。我用谷歌搜索没有运气。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-25T23:52:23.547

# vim - 在vim中设置光标覆盖的字符颜色（无gvim）

> ID：13745361
> 
> 赞同：1
> 
> 时间：2012-12-06T14:10:48.170
> 
> 标签：vim

光标的颜色有时候和字符的颜色是一样的，所以当这个字符被光标覆盖的时候，很难看清楚，我想把光标覆盖的字符的颜色设置成和背景一样，怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:22:40.690

这主要取决于您选择的配色方案；你可以试试其他人。大多数情况下，光标只是其下字符的反向表示。可以通过 调整`:hi Cursor ...`，详见`:help :hi`。

在 GVIM 中，您还可以通过 影响外观`:set guicursor=...`，例如将其从块更改为水平线或下划线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T14:17:19.763

使用此配置命令，选择正确的颜色（在本例中为黑色）：

```
:hi Cursor guifg=black 
```

# c# - Quartz.NET + SQLite Jobstore 抛出 JobPersistenceException

> ID：13745363
> 
> 赞同：1
> 
> 时间：2012-12-06T14:10:50.490
> 
> 标签：c#, sqlite, quartz.net, system.data.sqlite

当向调度程序添加或删除作业时，Quartz 偶尔会抛出 JobPersistenceException（在前面的 SQLiteException 之后）。

看起来值得注意的事情：

*   Quartz.NET 2.01 + System.Data.SQLite 1.0.66（~~在撰写本文时都是最新版本，~~刚刚注意到有一个可用的 SQLite 1.0.82 二进制包）
*   如果当前没有执行作业/触发器，也会引发异常（我正在监视 Quartz 侦听器）
*   作业是从 UI 上下文手动添加的（我需要大约 10-20 次重复才能导致错误，但它似乎完全随机）
*   ~~只要我不触摸 AddJob()/DeleteJob()，一切似乎都运行良好（多个作业、并行执行、应用程序重新启动后的持久性）~~经过扩展测试后，我确信它与添加/删除作业无关。数据库锁定/访问问题是一个普遍问题。

在添加/删除作业时，是否有任何我不知道必须遵循的推荐程序？

我的 ISchedulerFactory 配置有什么问题吗？（见下文）

**补充**

*   我尝试使用 System.Data.SQLite 1.0.82 这让事情变得更糟。Quartz 执行作业后，我几乎经常收到“SQLite 错误 (5)：数据库已锁定”。
*   Quartz.NET 将 System.Data.SQLite 1.0.56 列为受支持的数据库提供程序，因此使用较新版本可能会出现问题。但是，我不考虑从 1.0.66 返回作为选项，因为 IIRC 有很多改进/修复。
*   我查看了 Quartz.NET 在 2.0.1 发布版本 (624) 和当前头部版本 (669) 之间的开发主干。似乎没有相关的修复。
*   我怀疑这是一个 System.Data.SQLite 问题。我偶然发现了几篇文章（关于不同的 SQLite 版本），提到内部资源处理可能存在一些问题，使数据库文件保持锁定。

**补充 2**

目前，我放弃了这个。我尝试了很多东西，但开发必须继续。我切换到另一种数据库类型（Firebird），到目前为止它似乎与 Quartz 一起工作得很好。

如果有人得到这个工作，我很乐意听到它。

-

异常详情：

Quartz.JobPersistenceException: "无法提交 ADO.NET 事务。数据库文件已锁定\r\n数据库已锁定"

堆

```
bei Quartz.Impl.AdoJobStore.JobStoreSupport.CommitConnection(ConnectionAndTransactionHolder cth, Boolean openNewTransaction)
bei Quartz.Impl.AdoJobStore.JobStoreSupport.ExecuteInNonManagedTXLock(String lockName, Func`2 txCallback)
bei Quartz.Impl.AdoJobStore.JobStoreTX.ExecuteInLock(String lockName, Func`2 txCallback)
bei Quartz.Impl.AdoJobStore.JobStoreSupport.RemoveJob(JobKey jobKey)
bei Quartz.Core.QuartzScheduler.DeleteJob(JobKey jobKey)
bei Quartz.Impl.StdScheduler.DeleteJob(JobKey jobKey) 
```

InnerException SQLiteException: "数据库文件被锁定\r\n数据库被锁定"

堆

```
bei System.Data.SQLite.SQLite3.Step(SQLiteStatement stmt)
bei System.Data.SQLite.SQLiteDataReader.NextResult()
bei System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
bei System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
bei System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
bei System.Data.SQLite.SQLiteTransaction.Commit()
bei Quartz.Impl.AdoJobStore.JobStoreSupport.CommitConnection(ConnectionAndTransactionHolder cth, Boolean openNewTransaction) 
```

异常的来源是“cth.Transaction.Commit();” 在这个 Quartz.NET 方法中。

```
/// <summary>
/// Commit the supplied connection.
/// </summary>
/// <param name="cth">The CTH.</param>
/// <param name="openNewTransaction">if set to <c>true</c> opens a new transaction.</param>
/// <throws>JobPersistenceException thrown if a SQLException occurs when the </throws>
protected virtual void CommitConnection(ConnectionAndTransactionHolder cth, bool openNewTransaction)
{
    CheckNotZombied(cth);

    if (cth.Transaction != null)
    {
        try
        {
            IsolationLevel il = cth.Transaction.IsolationLevel;
            cth.Transaction.Commit();
            if (openNewTransaction)
            {
                // open new transaction to go with
                cth.Transaction = cth.Connection.BeginTransaction(il);
            }
        }
        catch (Exception e)
        {
            throw new JobPersistenceException("Couldn't commit ADO.NET transaction. " + e.Message, e);
        }
    }
} 
```

这就是我创建 ISchedulerFactory 的方式：

```
public static ISchedulerFactory CreateSQLiteSchedFactory(SQLiteConnection sqlConn, string tablePrefix) {
    // db provider hinzufügen
    var metaData = new DbMetadata();
    metaData.AssemblyName = "System.Data.SQLite,Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139";
    metaData.BindByName = true;
    metaData.CommandBuilderType = typeof(SQLiteCommandBuilder);
    metaData.CommandType = typeof(SQLiteCommand);
    metaData.ConnectionType = typeof(SQLiteConnection);
    metaData.ExceptionType = typeof(SQLiteException);
    metaData.ParameterDbType = typeof(TypeAffinity);
    metaData.ParameterDbTypePropertyName = "DbType";
    metaData.ParameterNamePrefix = "@";
    metaData.ParameterType = typeof(SQLiteParameter);
    metaData.UseParameterNamePrefixInParameterCollection = true;
    DbProvider.RegisterDbMetadata("SQLite-1066", metaData);

    // konfiguration für factory erstellen
    NameValueCollection properties = new NameValueCollection();
    properties["quartz.scheduler.instanceName"] = "TestScheduler";
    properties["quartz.scheduler.instanceId"] = "instance_one";
    properties["quartz.threadPool.type"] = "Quartz.Simpl.SimpleThreadPool, Quartz";
    properties["quartz.threadPool.threadCount"] = "5";
    properties["quartz.threadPool.threadPriority"] = "Normal";
    properties["quartz.jobStore.misfireThreshold"] = "60000";
    properties["quartz.jobStore.type"] = "Quartz.Impl.AdoJobStore.JobStoreTX, Quartz";
    properties["quartz.jobStore.useProperties"] = "false";
    properties["quartz.jobStore.dataSource"] = "default";
    properties["quartz.jobStore.tablePrefix"] = tablePrefix;
    properties["quartz.jobStore.clustered"] = "true";

    properties["quartz.jobStore.lockHandler.type"] = "Quartz.Impl.AdoJobStore.UpdateLockRowSemaphore, Quartz";

    properties["quartz.dataSource.default.connectionString"] = sqlConn.ConnectionString;
    properties["quartz.dataSource.default.provider"] = "SQLite-1066";

    // factory erzeugen
    return new StdSchedulerFactory(properties);
} 
```

SQLiteConnection 是使用类似于“Data Source=c:\mydb.db;Version=3;”的连接字符串创建的 并且所有石英表都使用提供的 SQL 脚本进行初始化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-13T09:35:24.400

您必须在属性中将此设置为 true：

```
properties["quartz.jobStore.txIsolationLevelSerializable"] = "true"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:18:22.060

这个错误的原因很可能是因为SQLite db上的多个并发写入，sqlite只能接受多个只读连接，但不能接受同时写入！

[http://www.sqlite.org/faq.html#q5](http://www.sqlite.org/faq.html#q5)

# jquery - jquery最接近（'form'）不序列化

> ID：13745365
> 
> 赞同：2
> 
> 时间：2012-12-06T14:10:52.690
> 
> 标签：jquery, html, ajax, forms, closest

我用它作为评论的形式。页面上有很多此类，所以我必须选择最接近的形式，但它不起作用。

```
$(document).ready(function() {
$(".comment_but").on('click',function(){
    var location2 = $(this).closest('div');
    var datastring = $(this).closest('form').serialize();
        $.ajax({
        type: "POST",
        url: "comment_save.php",
        data:  datastring,
        cache   : false,
        success: function(html){
$('.comment_show',location2).html(html);}});});}); 
```

还有我的 HTML

```
<div class="comment_show"></div>
<tr>
        <form onSubmit="return false;" name="comment_form" id="comment_form" style=" display:inline; ">
            <td align="right"><textarea name="comment_box" cols="70" rows="2"></textarea></td>
                        <td>
            <input name="post_id" type="hidden" value="<? echo($data['post_id']); ?>" />
            <input name="Send" class="comment_but" value="Comment!" type="submit" /></td>
        </form>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:24:52.000

将代码放入onsubmit

```
$(document).ready(function() {
  $("#comment_form").on("submit",function(){
    var datastring=$(this).serialize();
    $.ajax({
      type: "POST",
      url: "comment_save.php",
      data:  datastring,
      cache   : false,
      success: function(html){
        $('.comment_show',location2).html(html);
      }
    });
    return false; // mandatory
  });
}); 
```

# ios - UIAccelerometerDelegate：我可以有两个对象来处理 DidAccelerate 事件吗？

> ID：13745367
> 
> 赞同：0
> 
> 时间：2012-12-06T14:11:00.120
> 
> 标签：ios, delegates, uiaccelerometer

我正在将我的 android 应用程序移植到 iOS，加速度计有点问题。我想要两个不同的类，它们具有 DidAccelerate 实现。我制作了两个对象，每个对象都成为 UIAccelerometer 的代表。但只有一个对象 - 最后创建的，有效。另一个没有从加速度计获得事件。UIAccelerometer 不能让两个代表在一个应用程序中同时工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:16:32.703

我会让您的视图控制器成为加速度计的主要代表，然后让该实现将数据传递给任何其他相关方：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

    /* So just create a couple properties to hold an instance of your other delegates. */
    [self.accelerometerDelegate1 accelerometer:accelerometer didAccelerate:acceleration];

    [self.accelerometerDelegate2 accelerometer:accelerometer didAccelerate:acceleration];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:13:10.793

您可能想为此使用[单例](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)。

# asp.net - infragistics ultrawebgrid 上的寻呼机可见性

> ID：13745373
> 
> 赞同：2
> 
> 时间：2012-12-06T14:11:10.923
> 
> 标签：asp.net, infragistics, pager, ultrawebgrid

我的 asp.net 项目中有一个 infragistics ultrawebgrid v11.1，我被要求取消网格上的分页。即使我通过设置关闭分页`AllowPaging="false"`，寻呼机仍然出现，说“跳转到第 1 页，共 1 页”或类似的东西。

我该怎么做才能隐藏寻呼机？如果我没记错的话，gridview 寻呼机有一个`Visible`属性，但是 ultrawebgrid 的寻呼机似乎没有这个属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:17:12.797

AllowPaging 属性控制寻呼机是否可见。如果即使在将其设置为 false 后仍然看到寻呼机，请检查后面的代码以确认您在将其设置为 false 后没有将其设置为 true。

您可能还想查看是否定义了自定义寻呼机，以及是否正在显示。

如果您只想隐藏现有的寻呼机，您也可以使用 CSS 将其隐藏，但如果有多个页面，您的用户将无法访问任何其他页面。使用 CSS 隐藏寻呼机的代码：

```
UltraWebGrid1.DisplayLayout.Pager.PagerStyle.CustomRules = "display:none;"; 
```

# c - 将多维数组作为c中的参数传递

> ID：13745375
> 
> 赞同：1
> 
> 时间：2012-12-06T14:11:18.523
> 
> 标签：c, function, multidimensional-array, arguments, argument-passing

所以基本上，我想做的是将数组作为参数传递。我想出了这样的想法：

```
#include <stdio.h>
#include <stdlib.h>

int x;

void function(int array[][x]){
    //stuff here
}

int main(){
    x = random(10);
    int array[10][x];
    //initialize array
    function(array[10][x]);
} 
```

我认为这应该可行，但它给了我一个注释：

> 预期为 'int (*)[(unsigned int)(x)]' 但参数的类型为 'int'</p>

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:13:30.163

利用

```
function(array) 
```

代替

```
function(array[10][x]) 
```

您可能想阅读我几天前发表的[这篇文章。](https://stackoverflow.com/questions/13562807/indexing-elements-in-a-3-d-array/13563297#13563297)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:21:42.530

您将参数错误地传递给函数。应该`function(array)`像指出的那样。
其他意见：
1\. 使用`random()`应该是`random()%10;`而不是`random(10);`，除非它的一些非标准功能。
2.`int main()`应该是`int main(void)`or 3\. 你应该从say或`int main(int argc, char **argv)`
返回一个 int 值`main``return 0``return EXIT_SUCCESS`

附加说明：
请注意，您可能无法在函数中获取数组的实际尺寸。如果您打算在函数中使用它，您可能应该考虑传递数组的维度。

希望这可以帮助！

# css - 表单提交框不会对齐

> ID：13745377
> 
> 赞同：0
> 
> 时间：2012-12-06T14:11:20.690
> 
> 标签：css

我有一个简单的表单可以将您的电子邮件添加到邮件列表，但是我想并排对齐最后一个输入字段和提交按钮，而不使用负边距。

[http://bettondesignwork.co.uk/miltoun](http://bettondesignwork.co.uk/miltoun)这是带有表格的网站。

这是CSS

```
 form .inputbox{border:#666476 1px solid; color:#c3c2c9; height:28px; padding-left:6px;}
    form .name{width:282px; margin:0 0 10px;}
    form .email{width:215px; vertical-align:bottom;}
    form .submit{width:60px; background:#666476; color:#e7dbcf; border:none; height:32px; margin:0; padding:0; border:#666476 1px solid;} 
```

我已经尝试为电子邮件和提交表单提供 0 边距和 0 填充，但它们不会并排齐平。关于这是如何实现的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:14:07.867

只需添加`float:left`如下`aside form .email`：

```
aside form .email {
    vertical-align: bottom;
    width: 215px;
    float: left; /* add this */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:16:04.273

删除源代码中两个输入元素之间的空格/制表符/新行，它们应该齐平。

# sql - bcp 实用程序输出一个空文件

> ID：13745380
> 
> 赞同：0
> 
> 时间：2012-12-06T14:11:32.227
> 
> 标签：sql, sql-server, debugging, sql-server-2005, bcp

我将使用 bcp 实用程序来调试存储过程，因此我想将一些数据导出到文件中。

我对我的 SQL-Server 2005 进行了测试

```
DECLARE @SQL VARCHAR(8000)
SELECT @SQL = 'BCP "SELECT 1" QUERYOUT "D:\test.txt" -C -T'
EXEC MASTER..XP_CMDSHELL @SQL 
```

我观察到文件“D:\test.txt”已创建，但为空。
我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:33:42.843

我运行了等效的命令：

```
BCP "SELECT 1" QUERYOUT "c:\junk\test.txt" -C -T 
```

输出似乎是一个空文件，直到我用十六进制编辑器查看它。在十六进制编辑器中，我看到了这个：`01 00 00 00`

所以它将数值 1 保存为整数格式。我怀疑您希望第 2 行阅读：

```
SELECT @SQL = 'BCP "SELECT '1'" QUERYOUT "D:\test.txt" -C -T' 
```

在这种情况下，您将在记事本中看到 1。在十六进制编辑器中，您会得到：`01 00 31`

因为 '1' 是长度为 1 且十六进制值为 31 的字符串，所以字符 1 的 ASCII 码。

**编辑：**

您还可以使用该**`-w`**选项告诉 bcp 对所有输出使用 unicode 字符。可能是一个更好的选择，因为您说您将进行调试。

# ascii - \n\r 是什么意思？

> ID：13745381
> 
> 赞同：7
> 
> 时间：2012-12-06T14:11:33.313
> 
> 标签：ascii

通过 java 从伪终端读取时，我在文本中看到“\n\r”。那代表什么？注意它不是我熟悉的“\r\n”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T14:15:21.180

`\n`是换行符（ASCII 码 10），`\r`是回车符（ASCII 码 13）。

不同的操作系统使用这些字符的不同组合来表示一行文本的结尾。类 Unix 操作系统（Linux、Mac OS X）通常只使用`\n`. MS-DOS 和 Windows 使用`\r\n`（回车，后跟换行）。

您使用的代码使用`\n\r`（换行、回车）。有使用该序列的操作系统，但可能这是一个错误，应该是`\r\n`.

请参阅Wikipedia 上的[换行符](http://en.wikipedia.org/wiki/Newline)。

如果您正在使用 Java 进行编程，并且您想知道运行程序的操作系统的换行符序列是什么，您可以获取系统属性`line.separator`：

```
String newline = System.getProperty("line.separator"); 
```

# ffmpeg - 如何使用带有附加 ffmpeg 命令行选项的 Xuggler 接收 RTSP 流？

> ID：13745382
> 
> 赞同：3
> 
> 时间：2012-12-06T14:11:35.433
> 
> 标签：ffmpeg, rtsp, xuggler

我可以使用默认 UDP 传输从 IP 摄像机获取带有 Xuggler 的 RTSP 流，但它会生成诸如 [Thread-6] ERROR org.ffmpeg - [h264 @ 00000000489652B0] 损坏的宏块之类的错误尽管使用新下载的 ffmpeg 二进制文件（ffmpeg.exe、ffplay.exe），从 IP 摄像机打开相同的流也可以正常工作。

所以我尝试使用 ffmpeg -rtsp_transport tcp 选项获取 RTP TCP 流。但是在 Java 代码中添加该选项 `container.setProperty("rtsp_transport", "tcp");` 但没有任何反应，流仍然是 UDP。

如何克服 RTP UDP 流问题以及如何使用 Xuggler 将 rtsp 流传输切换到 tcp？

转发谢谢

# directshow - 为 C# 应用程序中的 Windows Media Player ActiveX 控件提供 DirectShow 过滤器

> ID：13745383
> 
> 赞同：0
> 
> 时间：2012-12-06T14:11:36.657
> 
> 标签：directshow, axwindowsmediaplayer, wasabi

我在 C# 应用程序中使用 Windows Media Player ActiveX 控件。我还有第三方 DirectShow 过滤器（[Wasabi Marlin](http://www.intertrust.com/solutions/wasabi)），我需要使用它来播放视频。据我所知，Windows Media Player 能够使用 DirectShow 过滤器。如何将过滤器提供给 WMP 控件？我在控件的[对象模型](http://msdn.microsoft.com/ru-ru/library/windows/desktop/dd564679%28v=vs.85%29.aspx)中进行了搜索，但没有发现任何有用的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:52:23.887

请注意，Windows Media Player 会首先尝试使用 Media Foundation，如果无法播放文件，则会回退到 DirectShow。

当 WMP 请求 DirectShow 呈现文件时，过滤器图形管理器会通过现有文件和协议关联来选择适当的源过滤器。也就是说，需要按照以下 MSDN 主题中的说明注册感兴趣的过滤器：

*   [注册自定义文件类型](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377513%28v=vs.85%29.aspx)

它可以是文件扩展名注册，或自定义协议处理程序。另见 MSDN 论坛上的相关讨论：

*   [Vista 上媒体播放器的文件类型注册问题](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/a0e2fa8f-bbef-44cd-a160-5e6f5347215b)

# javascript - 使用 $(this).val("") 重置输入文件不适用于 IE8

> ID：13745384
> 
> 赞同：4
> 
> 时间：2012-12-06T14:11:38.410
> 
> 标签：javascript, jquery, internet-explorer

> **可能重复：**
> [IE 9 jQuery 未设置输入值](https://stackoverflow.com/questions/11567469/ie-9-jquery-not-setting-input-value)

如果输入字段与某些条件匹配，我想重置输入字段`$(this).val("");`：

```
$(".checkimgextension").on("change", function () {

var file = $(this).val();

if (some conditions){
  alert("wrong:...");
  $(this).val("");
} 
```

对于 Firefox，该字段设置为`""`，但对于 IE，该字段不会按预期更改。使用正确的功能`.val("")`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T14:13:55.783

参考这个：[IE 9 jQuery not setting input value](https://stackoverflow.com/questions/11567469/ie-9-jquery-not-setting-input-value)

```
$("input[type='file']").replaceWith($("input[type='file']").clone(true)); 
```

所以在你的情况下：

```
$(this).replaceWith($(this).clone(true)); 
```

而不是`$(this).val("");`线。

**更新：**

为了利用允许您修改`input:file`元素的浏览器，我将使用如下内容：

```
$(".checkimgextension").on("change", function () {
    var $this = $(this);

    if (some conditions) {
        alert("wrong:...");
        $this.val("");
        var new_val = $this.val();
        if (new_val !== "") {
            $this.replaceWith($this.clone(true));
        }
    }
}); 
```

这样，它首先尝试将值设置为空，如果不成功，请使用该`replaceWith`方法。

# ruby-on-rails - 在 if 语句中包含 url 参数

> ID：13745386
> 
> 赞同：1
> 
> 时间：2012-12-06T14:11:43.373
> 
> 标签：ruby-on-rails, url, if-statement

我正在尝试将布局的不同部分包含在不同的页面中，我目前有这个：

```
- if %w(/ /news).include? request.fullpath
  = yield      

- unless %w(/ /news).include? request.fullpath 
```

这意味着当 URL 是主页或新闻页面时，会显示内容。当主页 URL 中有参数时，我需要将其包含在内，例如`/?campaign=test`，我尝试了一些方法，但无法让它识别单独的参数。

**回答：**

```
- if params[:controller] == 'application' && params[:action] == 'index' && params[:campaign].present?
  = yield      

- elsif params[:controller] == 'application' && params[:action] == 'index'
  = yield

- else 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:13:46.227

而不是请求完整路径，您可以使用类似的参数

```
 if params[:controller] == 'news'
  if params[:action] == 'smth'
  if params[:campaign] == 'test' 
```

在你的条件下。

UPD

```
- if params[:controller] == 'homepage'
  = 'This is homepage'
- if params[:controller] == 'homepage' && params[:campaign].present?
  = 'this homepage is with campaign.' 
```

这绝对应该有效。

# c# - 使用 Linq 将 xml 转换为类

> ID：13745390
> 
> 赞同：1
> 
> 时间：2012-12-06T14:11:53.953
> 
> 标签：c#, linq

我正在使用 LINQ 从 XML 文件转换为我创建的类。无论我尝试什么，我都会在列表中得到 0。

```
List<UpdateMember> updateMembers = new List<ExeTeam.UpdateMember>();
updateMembers = GetMember(doc);
try
{
  IEnumerable<UpdateMember> member = from r in doc.Descendants("UpdateMember").Descendants("member")
  select new UpdateMember()
  {
    Birthdate = (string)(r.Element("Birthdate")) == string.Empty ? DateTimeParser((DateTime)(r.Element("Birthdate"))) : DateTime.Now,
    Email = (string)r.Element("Email") != null ? (string)r.Element("Email") : "",
    FamilyStatus = (string)r.Element("Familystatus") != null ? (string)r.Element("Familystatus") : "",
    ID = (int)r.Element("IdNumber") != 0 ? (int)r.Element("IdNumber") : 0,
    Phone1 = (int)r.Element("Telephone1") != 0 ? (int)r.Element("Telephone1") : 0,
    Phone2 = (int)r.Element("Telephone2") != 0 ? (int)r.Element("Telephone2") : 0,
    phone3 = (int)r.Element("Telephone3") != 0 ? (int)r.Element("Telephone3") : 0
  };
  return member.ToList();
} 
```

xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
  <UpdateMember xmlns="http://tempuri.org/">
    <member>
      <Birthdate>25122012</Birthdate>
      <Email>fake@testing.com</Email>
      <Familystatus>single</Familystatus>
      <IdNumber>12345678</IdNumber>
      <Telephone1>123-4567890</Telephone1>
      <Telephone2></Telephone2>
      <Telephone3></Telephone3>
    </member>
  </UpdateMember> 
```

在这一行`from r in doc.Decendants("")...` 中，我尝试了各种变化。感谢所有人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:25:57.357

问题是命名空间：

```
<UpdateMember xmlns="http://tempuri.org/"> 
```

这意味着默认情况下，您的所有元素都在该名称空间中。您的查询都尝试查找*不在*命名空间中的元素，例如

```
Element("Familystatus") 
```

这在 LINQ to XML 中很容易修复：

```
XNamespace ns = "http://tempuri.org/";
IEnumerable<UpdateMember> member = from r in doc.Descendants(ns + "UpdateMember")
                                                .Descendants(ns + "member")
// etc 
```

此外，您处理丢失数据的尝试将不起作用并且过于复杂。例如，这个：

```
Phone1 = (int)r.Element("Telephone1") != 0 ? (int)r.Element("Telephone1") : 0 
```

应该：

```
Phone1 = (int?) r.Element(ns + "Telephone1") ?? 0 
```

如果您强制转换为`int`，它不会给出`0`值是否丢失 - 它会抛出异常。转换为`int?`将给出一个空值。

我会将您的整个代码更改为：

```
return doc.Descendants(ns + "UpdateMember").Descendants(ns + "member")
          .Select (r => new UpdateMember
          {
              // Really? This is an odd default.
              Birthdate = (DateTime?) r.Element(ns + "Birthdate") ?? DateTime.Now,
              Email = (string) r.Element(ns + "Email") ?? "",
              FamilyStatus = (string) r.Element(ns + "Familystatus) ?? "",
              ID = (int?) r.Element(ns + "IDNumber") ?? 0,
              Phone1 = (int?) r.Element(ns + "Telephone1") ?? 0,
              Phone2 = (int?) r.Element(ns + "Telephone2") ?? 0,
              Phone3 = (int?) r.Element(ns + "Telephone3") ?? 0)
          })
          .ToList(); 
```

编辑：如评论中所述，将电话号码存储为`int`值是一个非常糟糕的主意。你会失去任何格式，你会失去前导零，而且我希望许多完整的电话号码`int`无论如何都超出了范围。我会将它们保留为字符串。

# java - 将 * 作为参数传递时可调用语句花费大量时间

> ID：13745396
> 
> 赞同：1
> 
> 时间：2012-12-06T14:12:13.913
> 
> 标签：java, hibernate, stored-procedures, jdbc, callable-statement

我有以下一段代码。当我传递像“firstname lastname”这样的普通字符串时。存储过程很快就会返回。但是当我用 firstname* 调用它时，它需要很多时间。当我使用 firstname* 执行存储过程时，不会超过 2 秒。这是下面的代码

```
public List<NameBean> getNameReportJson(final int numberOfResults,
        final String searchValue, final String category, Connection con)
        throws SQLException {

    final List<NameBean> beanList = new ArrayList();
    List<String> resultStrs = new ArrayList<String>();
    final String nameReportStoreProcedure = "{call [sp_SENTRY_INFORMATION_REPORT_NAME_REPORT] (?,?,?,?,?)}";

    Session session = (Session) em.getDelegate();
    StringBuffer sb = new StringBuffer();

    session.doWork(new Work() {

        @Override
        public void execute(Connection connection) throws SQLException {
            CallableStatement cstmt = connection
                    .prepareCall(nameReportStoreProcedure);
            ResultSet rs = null;

            cstmt.setInt("numberOfResults", numberOfResults);
            cstmt.setString("SearchValue", searchValue);
            cstmt.setString("Category", category);
            cstmt.setDate("startDate", null);
            cstmt.setDate("endDate", null);

            rs = cstmt.executeQuery();
            logger.debug("CeReport the ResultSet is: " + rs);
            while (rs.next()) {
                NameBean nameBean = new NameBean();
                String oriName = rs.getString("ORIGINAL NAME");
                String standName = rs.getString("STANDARDIZED NAME");
                String groupName = rs.getString("GROUP NAME");
                long groupId = rs.getLong("GROUP ID");
                nameBean.setOriginalName(oriName);
                nameBean.setStandardName(standName);
                nameBean.setGroupName(groupName);
                nameBean.setGroupID(groupId);
                nameBean.setEntityID(rs.getString("ENTITY ID"));
                beanList.add(nameBean);
            }

        }

    });

    return beanList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:27:22.583

找到了原因。当对存储过程有同时请求时，就会发生此问题。罪魁祸首是声明

```
Session session = (Session) em.getDelegate(); 
```

所以我必须为每个请求创建一个新的 EntityManager 实例，然后使用它获取会话。由于 Session 由多个线程共享，因此它锁定了表，因此出现了问题。我希望这对其他人有帮助

# neo4j - Neo4j 批量插入 - 索引导致 OutOfMemoryError 异常

> ID：13745398
> 
> 赞同：1
> 
> 时间：2012-12-06T14:12:19.430
> 
> 标签：neo4j

我正在使用“批量导入”将大型数据集添加到 neo4j 服务器

BatchInserterIndex someIndex = indexProvider.nodeIndex("some_index", MapUtil.stringMap("type", "exact"));

```
 /** Looping large dataset */
    for (..) {

        Map<String, Object> testMap //Map with various properties    
        long id  = inserter.createNode(testMap);
        someIndex.add(id, testMap);
    } 
```

在大约 400k 个条目之后，我的代码抛出异常“java.lang.OutOfMemoryError: Java heap space”。

当我不使用索引时，它可以完美运行。我曾尝试不时刷新索引，但没有任何改善。

如何在使用索引的同时添加大型数据集？知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:55:33.137

如果您的堆不是那么大，您可能会遇到 lucene 索引上的批量提交大小太高的问题。默认值为 500,000 个值。而且恐怕您无法从公共 API 更改它。我将尝试获得一些可以为 1.9 版配置此批量大小的东西。

# backbone.js - 骨干收藏 + Instagram API

> ID：13745400
> 
> 赞同：0
> 
> 时间：2012-12-06T14:12:39.467
> 
> 标签：backbone.js

你好，我刚刚潜入骨干。

我想做的是从 instagram api 提要中收集一些低分辨率的照片。

我有一个用户模型，它存储了所有的 instagram 信息，比如 access_token 和，

```
 App.Models.Ig_photo({}); 
```

还有一个集合，

```
App.Collections.Ig_photos({function() {
    model: App.Models.Ig_photo,

    url: "https://api.instagram.com/v1/users/self/feed?access_token=",

    sync:function (method, model, options) {
        options.timeout = 10000; // required, or the application won't pick up on 404 responses
        options.dataType = "jsonp";
        return Backbone.sync(method, model, options);
},

    parse: function( response ) {
          return response.data
    } 
}}); 
```

现在我在这里遇到了一些问题，当我获取时我的集合没有被填充，其次我想要的是 accesstoken 保存在我的另一个名为 user 的模型中，那么我如何在这里访问它？

如果有人建议我采取的方法是否正确，那就太好了。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:10:54.427

您可以将 API 密钥添加到集合模型中：

```
App.Collections.Ig_photos.access_token = OtherModel.get("access_token"); 
```

并为集合 URL 使用一个函数：

```
url: function() {
    return "https://api.instagram.com/v1/users/self/feed?access_token=" + this.access_token
}, 
```

# google-bigquery - 我可以获得 bq 工具可用于导入 Big Query 的公共 IP 地址列表吗？

> ID：13745402
> 
> 赞同：0
> 
> 时间：2012-12-06T14:12:39.983
> 
> 标签：google-bigquery

我使用代理来使用 bq 工具将数据导入 bigquery，但我的代理要求我同时指定域和所有可能需要允许的公共 IP 地址。我将其设置为允许 googleapis.com 和 google.com 域，但由于某种原因，bq 工具似乎经常直接连接到 IP。因此，我需要在代理配置中指定每个 IP，以便能够连接到 Bigquery。目前我使用的 IP 列表是 74.125.133.95、74.125.142.92 和 74.125.133.84。我知道这可能会改变，并且它可能连接到更多 IP。是否可以获得可以放入代理配置的 IP 范围或列表，以便在 IP 由于负载平衡等原因发生更改时不会中断上传。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:55:51.693

与所有 Google API 一样，无法为 BigQuery API 提供 IP 地址或 IP 地址范围的列表。Google 的 API 具有一系列动态的 IP 地址，这些地址会随着需求的变化而变化。

# javafx-2 - JavaFX 2.0：我必须做什么才能对表中的行选择更改做出反应？

> ID：13745404
> 
> 赞同：3
> 
> 时间：2012-12-06T14:13:01.457
> 
> 标签：javafx-2

我想做一件非常简单和常见的事情，但找不到使用 JavaFX 的方法。我有一个包含两列的 TableView，如果至少选择了一行，我想启用一个按钮。如果没有选择任何行，我想再次禁用该按钮。

为此，我需要获得一个选择更改事件或类似的东西。不应该有可能在动作上设置 tableView 的 selectionModel 或添加一个监听器吗？我需要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T17:59:52.847

我认为您要做的是将 ListChangeListener 添加到 TableView 的选择模型上的选定索引中。它应该是这样的......

```
tableView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE); // just in case you didnt already set the selection model to multiple selection.
tableView.getSelectionModel().getSelectedIndices().addListener(new ListChangeListener<Integer>()
    {
        @Override
        public void onChanged(Change<? extends Integer> change)
        {
            if (change.getList().size() >= 2)
            {
                button.setDisable(false);
            }
            else
            {
                button.setDisable(true);
            }
        }

    }); 
```

我原本打算建议将按钮的禁用属性绑定到表视图上大于 2 的选定索引属性大小，但似乎没有提供。如果您愿意，您可以创建自己的 SimpleIntegerProperty 并在列表更改侦听器中更新它，将按钮的禁用属性绑定到您的 SimpleIntegerProperty 的值大于 2。我希望这个答案有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-14T12:24:04.907

使用 Property 的另一种解决方案：

```
myButton.disableProperty().bind(myTable.getSelectionModel().selectedItemProperty().isNull()); 
```

这样，当至少选择了一行时，该按钮将启用

# winforms - Clickonce winforms 应用程序不会从开始菜单启动

> ID：13745411
> 
> 赞同：0
> 
> 时间：2012-12-06T14:13:26.323
> 
> 标签：winforms, clickonce

我有一个通过 clickonce 部署的简单 Winforms 应用程序。

在我的开发机器上它可以工作。

在其他机器上安装正常，但从开始菜单启动时崩溃。

从 C:\Users\xxxxx\AppData\Local\Apps\2.0 开始是没问题的...

当 clickonce 在 ...[Application Directory]\Data 中查找 .mdb 时发生崩溃错误。但是，.mdb 文件部署在应用程序目录中。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:58:21.177

您是否尝试过使用 procmon 查看您的应用程序试图访问的内容？它可能会显示您可能遗漏的应用程序的进一步依赖关系。

此外，如果有问题的 dll 是 COM，您是否为应用程序和程序集创建了必要的清单。

高温高压

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:43:45.747

围绕调用 3rd 方 dll 进行异常处理并发布您遇到的确切错误。如果它在您单击 ClickOnce 文件夹中的 exe 时有效，但在您作为 ClickOnce 应用程序运行时无效，则可能的问题是您正在运行的东西需要比 ClickOnce 应用程序更多的权限，即需要管理访问权限的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:36:45.853

**是什么导致了问题：**

.mdb 文件包含在“构建操作 = 内容”和“复制到输出目录 = 始终复制”的项目中。

在应用程序设置中，.mdb 文件的发布状态设置为“包含”。

这使用应用程序文件部署了 .mdb 文件。但是，clickonce 应用程序希望 .mdb 文件部署在 clickonce \Data 文件夹中。

**解决方案：**

在“应用程序文件”中，.mdb 的“发布状态”设置为数据文件。这会将文件分解到 clickonce \Data 文件夹。

通过路径与 .mdb 文件的所有交互都已更新，以便在部署应用程序时使用 clickonce 数据路径。

```
 if (ApplicationDeployment.IsNetworkDeployed)
    {
        this.applicationDataPath = Path.Combine(Path.GetDirectoryName(Application.UserAppDataPath), "Data");
    } 
```

# java - 用变量替换eclipse中的所有单词

> ID：13745412
> 
> 赞同：1
> 
> 时间：2012-12-06T14:13:26.337
> 
> 标签：java, eclipse

我有一个包含许多课程的项目。

我想替换这个命令：

```
a.Dosomething(); 
```

通过这个：

```
((JavascriptExecutor) driver).executeScript("click();", a); 
```

（当第一个命令中的 a 在第二个命令中相同时）

我读了这个答案：[Eclipse Replace text in all Classes?](https://stackoverflow.com/questions/3376440/eclipse-replace-text-in-all-classes)

但这对于变量是不可能的。有简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:28:08.843

如果我的问题是正确的，那么您只想将所有出现的 替换`a.Dosomething();`为`((JavascriptExecutor) driver).executeScript("click();", a);`。

您可以尝试使用“搜索”->“文件...”->输入您要输入的文本`Containing text:`

设置`File Name Pattern`为*******。

设置`Scope`为**工作区**

然后点击`Replace...`你可以输入你的新文本。您也可以`Preview`将所有将受到影响的地方。终于命中了`OK`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:34:05.847

使用 Ultraedit、PSPAd、Notepad++ 等文本编辑器，并在帮助中查找它的替换功能。通常它支持正则表达式...

# mysql - 选择所有已结束的预订

> ID：13745423
> 
> 赞同：1
> 
> 时间：2012-12-06T14:14:02.780
> 
> 标签：mysql, sql, select

我们的数据库中有一系列预订，每个预订都有一个序列的多个会话。每个会话都有一个包含日期时间的“停止”。

我想选择所有会话都在两个日期之间结束的预订。

```
SELECT DISTINCT b.*
  FROM Booking as b
    JOIN Sequence as se
    JOIN Session as s
ON (b.sequence_id=se.id AND s.sequence_id=se.id
    AND s.stop between '2012-09-01 00:00:00' AND '2012-12-01 00:00:00'); 
```

此 SQL 选择包含 1 个或多个已结束会话的预订。

我只想要所有会话都结束的预订。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:56:11.237

thanx，确切的查询是这样的：

```
SELECT b.id, s.stop  
  FROM Booking as b  
  JOIN Sequence as se  
  JOIN Session as s  
     ON (b.sequence_id=se.id AND s.sequence_id=se.id)  
        where not exists (SELECT ss.id from Session as ss where ss.sequence_id=se.id and ss.stop < '2012-09-01 00:00:00')  
        and not exists (SELECT ss.id from Session as ss where ss.sequence_id=se.id and ss.stop > '2012-12-01 00:00:00'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:44:12.773

我想知道你是否可以这样做：

```
SELECT DISTINCT b.*  
  FROM Booking as b  
  JOIN Sequence as se  
  JOIN Session as s  
     ON (b.sequence_id=se.id AND s.sequence_id=se.id )  
  where s.stop between '2012-09-01 00:00:00' AND '2012-12-01 00:00:00')  
     and not exists ( s.stop < '2012-09-01 00:00:00' )  
     and not exists ( s.stop > '2012-12-01 00:00:00'); 
```

虽然语法不太正确。

# tfsbuild - TFS Build 2010 - 设置初始内部版本号

> ID：13745425
> 
> 赞同：1
> 
> 时间：2012-12-06T14:14:10.787
> 
> 标签：tfsbuild

有没有办法在 TFS 2010 中设置初始内部版本号？我在我的文件版本中使用 TFS 内部版本号 (BuildDetail.BuildNumber)。在我的 Main 分支上，一切正常。但是，当我创建发布分支并为它们创建新的 CI 构建定义时，构建号从 1 重新开始。我想告诉 TFS 从特定数字开始。或者，也许只是对所有分支机构使用相同的号码池。所以主分支上的构建可能是 100，然后发布分支上的构建将是 101。任何人都知道实现此目的的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:10:39.847

BuildNumber 属性从构建定义过程设置“内部版本号格式”中提供的格式生成其值 - 默认值：$(BuildDefinitionName)_$(Date:yyyyMMdd)$(Rev:.r) 其中修订版是您可能指的增量号- 这个数字的重点是确保内部版本号是唯一的。仅当系统中已有相同的内部版本号时，此值才会增加。

您也可以添加任何文字字符，但需要您更新每个构建的数字..

如果您想实现更复杂的东西，您将不得不考虑自定义 Team Build，这可能会帮助您获得优秀的系列文章“Customize Team Build 2010”，特别是这应该让您走上正轨： [http://www.ewaldhofman。 nl/post/2010/06/01/Customize-Team-Build-2010-e28093-Part-10-Include-Version-Number-in-the-Build-Number.aspx](http://www.ewaldhofman.nl/post/2010/06/01/Customize-Team-Build-2010-e28093-Part-10-Include-Version-Number-in-the-Build-Number.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:43:46.587

你指的是buildId吗？进程选项卡中的内部版本号当然可以设置为您想要的任何值。如果您指的是 buildId，则可能有一种方法可以通过数据库，但我会非常谨慎地这样做。我不知道会有什么影响。我不会那样做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T16:11:51.960

您可以在内部版本号中包含变更集编号。这在分支机构中是独一无二的，因此它可能会满足您的需求。我在[https://stackoverflow.com/a/16321699/992425](https://stackoverflow.com/a/16321699/992425)有步骤将文件拉`BuildDetail.SourceGetVersion`入`BuildNumberFormat`.

如果您试图将数字推回您的文件版本，那么它可能还不够。

# playframework-2.0 - 玩！框架 2.0 路径 - 播放运行与播放开始

> ID：13745429
> 
> 赞同：0
> 
> 时间：2012-12-06T14:14:20.130
> 
> 标签：playframework-2.0, production-environment

我正在将文件存储到一个文件夹中！项目，我有一个关于路径的问题。我的解决方案有效，但我认为该解决方案是次优的。

我目前的解决方案：

```
public static String getStoragePath(){
    String pubDir =  Play.application().configuration().getString("pathToFiles");

    if(Play.isProd()){ 
        String prodDir = Play.application().configuration().getString("productionPath"); 
        //prodDir variable is "target/scala-2.9.1/classes"

        return Play.application().path().getAbsolutePath() + "/" + prodDir + "/" + pubDir;
    }else{
        return Play.application().path().getAbsolutePath() + "/" + pubDir;
    }
} 
```

我的问题：

我这样做是因为运行“play run”和“play start”时路径不同。有没有办法避免使用这个 if 块？我不想依赖于我的配置文件中的 productionPath 字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:56:22.453

使用 conf 文件是一种方法。只需为您的生产环境使用不同的 conf 文件，您就不需要在代码中进行大量 if(isProd...) 检查。

Play 2 能够使用文档中[所述的](http://www.playframework.org/documentation/2.0.4/ProductionConfiguration)替代/扩展配置文件（***指定替代配置文件***部分）。此外，您可以创建简单的 bash 脚本（或 Windows 中的 .bat 文件）以所需模式启动应用程序，而无需每次都指定替代文件。

# c# - 已连接主机未能响应，超时已过期

> ID：13745433
> 
> 赞同：0
> 
> 时间：2012-12-06T14:14:30.537
> 
> 标签：c#, .net, mysql

我在 mysql 中尝试了这个查询，它工作正常，但查询花了 103.5772 秒

```
SELECT doctor, 
       SUM(medicine) medicine, 
       sum(radiology) radiology, 
       sum(lab) lab, 
       sum(act) act
FROM ( SELECT max(doctor) doctor, 
  sum( if( pm = 'F', cost, 0.00 ) ) medicine,
  sum( if( pm = 'R', cost, 0.00 ) ) radiology,
  sum( if( pm = 'L', cost, 0.00 ) ) lab,
  sum( if( pm = 'P', cost, 0.00 ) ) act
  FROM my_table
  GROUP BY no
  )t
GROUP BY doctor 
```

我的表有大量数据（近200万条数据）

当我在.net中尝试时，它有一个错误

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

我可以增加连接超时吗？

nb 我用这个查询来连接数据

```
conn.ConnectionString = conection.getConnection();
MySqlDataAdapter da = new MySqlDataAdapter(query, conn);
da.Fill(ds);
return ds; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:16:48.437

这不是连接超时，而是由于您的数据而导致命令超时。调整超时时间如下；

```
Command.CommandTimeout = 300; 
```

更多信息：[SqlCommand.CommandTimeout 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout%28v=vs.71%29.aspx)

我还建议您查看索引以查看是否可以优化查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T14:17:36.287

您可以使用 SqlCommand.CommandTimeout 属性：

`SqlCommand.CommandTimeout = 300;`

# c# - 在网页中显示 excel 文件

> ID：13745435
> 
> 赞同：0
> 
> 时间：2012-12-06T14:14:32.900
> 
> 标签：c#, excel

我已经使用 EPPlus 库创建了一个 excel 文件，有没有一种无需编写大量代码即可在网页中显示它的快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:09:43.003

一种解决方案是将您的报告嵌入为 PDF 或大型 PNG/Jpeg。

另一种解决方案是使用 pdf.js 嵌入 PDF

[http://mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/)

这允许 javascript 在不使用任何其他插件等的情况下呈现 PDF（尽管它确实需要 HTML 5 浏览器）

[http://mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)

# php - 如何将 PHP 代码转换为 Zend Framework 2

> ID：13745442
> 
> 赞同：1
> 
> 时间：2012-12-06T14:15:00.677
> 
> 标签：php, session, zend-framework2, zend-auth, zend-session

> **可能重复：**
> [如何在 zf2 中使用 Zend\Session？](https://stackoverflow.com/questions/8990195/how-to-use-zend-session-in-zf2)

我开始`ZF2`但我无法继续，因为我不了解官方`ZF2`文档。

我运行版本 2.0.4。

我怎样才能简单地将这个 PHP 代码翻译成 ZF2？：

**包含.php**

```
session_start(); 
```

**索引.php**

```
$_SESSION['login'] = 'toto'; 
```

**其他页面.php**

```
if ( isset($_SESSION['login']) ) echo $_SESSION['login'];//view toto 
```

我试过了`Zend\Authentification\Storage\Session`，`Zend\Session`但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:46:54.640

Zend 是一个框架，没有办法将 PHP“简单地翻译”为 Zend。只需查看您尝试实现的功能，看看 Zend 是否提供了可以复制它的类。

您基本上必须完全重写整个事情，因为 Zend 严格执行 MVC 模式。

# c# - 内容控件必须是内容页或引用母版页的嵌套母版页中的顶级控件

> ID：13745449
> 
> 赞同：7
> 
> 时间：2012-12-06T14:15:18.500
> 
> 标签：c#, asp.net, master-pages, web-content

我想使用嵌套母版页，所以我创建了以下母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="test.master.cs" Inherits="DocumentFlowUI.test" MasterPageFile="~/MasterPage2.master" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            <asp:Button ID="Button1" runat="server" Text="Button" />
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

* * *

我创建以下页面以使用该母版页：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/test.Master" AutoEventWireup="true" CodeBehind="WebForm4.aspx.cs" Inherits="DocumentFlowUI.WebForm4" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</asp:Content> 
```

* * *

我收到以下错误：

> 内容控件必须是内容页或引用母版页的嵌套母版页中的顶级控件

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T14:29:06.447

嵌套母版页中的 HTML 代码必须使用 asp:content-tag 包装，该标签带有来自“母版”母版页的 contentplaceholderid。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-17T09:43:36.880

只是为了证明 Erik 的观点：

父主页：

```
<asp:ContentPlaceHolder ID="head" runat="server" /> 
```

子母版：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <asp:ContentPlaceHolder ID="head" runat="server" />
</asp:Content> 
```

页：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <!-- content -->
</asp:Content> 
```

# html - 卡片式设计，高度灵活

> ID：13745452
> 
> 赞同：-2
> 
> 时间：2012-12-06T14:15:22.510
> 
> 标签：html, css

让我们想象一个网上商店，列出产品：

```
 PICTURE  PICTURE  PICTURE
 PRICE1   PRICE1   PRICE1
                   PRICE1
 buy      buy      buy 
```

第三个产品有两个价格，例如不能固定高度（宽度是固定的），“买我”按钮必须放在底部。如何做到这一点，可能没有桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:23:11.610

如果您使用单独的行，则`buy`无需担心设置高度。

**CSS**

```
<style type="text/css">
    .row {
        width: 600px;
    }

    .col {
        float: left;
        width: 200px;
    }

    .clear {
        clear: both;
    }

</style> 
```

**HTML**

```
<div class="row">
    <div class="col">
        picture <br />
        price
    </div>
    <div class="col">
        picture <br />
        price
    </div>
    <div class="col">
        picture <br />
        price<br />
        price
    </div>
    <div class="clear"></div>
</div>

<div class="row">
    <div class="col">
        buy
    </div>
    <div class="col">
        buy
    </div>
    <div class="col">
        buy
    </div>
    <div class="clear"></div>
</div> 
```

# javascript - jQuery 不调用警告框

> ID：13745457
> 
> 赞同：0
> 
> 时间：2012-12-06T14:15:44.213
> 
> 标签：javascript, jquery, ajax

我有以下内容：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function() {
        $.getJSON(
            "/myServer/getAllWidgets",
            function(data) {
                var optionsHTML = "<select id='widget-sel'>";
                optionsHTML += "<option selected='selected' id='default'>Select an option</option>";
                var len = data.length;
                for(var i = 0; i < len; i++) {
                    optionsHTML += '<option value="' + data[i] + '">'
                        + data[i] + '</option>';
                }

                optionsHTML += "</select>";

                $('#widget-sel-div').html(optionsHTML);
            }
        );

        $("#widget-sel").change(function() {
            alert("Hello!");
        });
    });
</script>

<div id="widget-sel-div"></div> 
```

因此，想法是，当`document.ready`触发时，它会使用一个选择`widget-sel-div`框（`widget-sel`通过警报框到屏幕。

当我运行它时，我没有收到任何错误（Firebug 根本不会抱怨），并且选择填充了来自 AJAX 调用的所有小部件`/myServer/getAllWidgets`。*问题是*，更改处理程序不起作用：当我选择一个小部件时，我没有得到警报框。有人能看出我哪里出错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:18:15.553

在代码运行时，该`#widget-sel`元素在 DOM 中不存在，因为您在回调中添加了它`getJSON`（这是异步的）。当它尚不存在时，您无法将事件处理程序绑定到它。

为了解决这个问题，您可以使用方法（jQuery 1.7+，如果您使用的是旧版本，请改用）将事件处理程序委托给 DOM 树的更高层（`div`在这种情况下您可以使用父级）：[`.on()`](http://api.jquery.com/on/)`.delegate()`

```
$("#widget-sel-div").on("change", "#widget-sel", function () {
    alert("Hello!");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:19:31.570

这是由于 AJAX 调用的异步特性。该`change`处理程序将在 AJAX 调用完成之前执行，因此 DOM 中没有元素可以绑定到它。相反，将 放置`change`在 AJAX 回调中：

```
$.getJSON(
    "/myServer/getAllWidgets",
    function(data) {
        var optionsHTML = "<select id='widget-sel'>";
        optionsHTML += "<option selected='selected' id='default'>Select an option</option>";
        var len = data.length;
        for(var i = 0; i < len; i++) {
            optionsHTML += '<option value="' + data[i] + '">' + data[i] + '</option>';
        }
        optionsHTML += "</select>";

        $('#widget-sel-div').html(optionsHTML);
        $("#widget-sel").change(function() {
            alert("Hello!");
        }
    }
); 
```

或者，您可以将`change`处理程序留在原处，并将事件侦听器委托给静态父元素，如下所示：

```
 $('#widget-sel-div').on('change', '#widget-sel', function() {
      alert("Hello!");
 }); 
```

# c# - 如何编写一个正则表达式来匹配每个单词之间只有一个空格且没有尾随或前导空格的字符串

> ID：13745460
> 
> 赞同：-3
> 
> 时间：2012-12-06T14:15:53.517
> 
> 标签：c#, asp.net, regex

**所有这些条件的单个** 正则表达式 1\. 应该只允许一个字母数字 2\. 单词之间只允许一个空格 3\. 应该只允许特殊字符，如 -.,' 4\. 不应该允许前导空格、尾随空格和连续空格。

有效输入：

```
"testing with 2 regx solution" 
```

输入无效：

```
" testing    with 2 regx solution" or "testing  %^with 2 regx solution " 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:52:50.127

尝试这个

```
^(\w+\s)*\w+$ 
```

> ```
> ^     Start of string
> (     Start of group
> \w+   Word of one or more characters
> \s    White space
> )     End of group
> *     Zero or more of the preeceding group
> \w+   Word of one or more characters
> $     End of string 
> ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T14:28:16.547

```
 inputString= Regex.Replace(inputString.Trim(),@"\s+"," "); 
```

--SJ

# javascript - Javascript，选中一个复选框 = location.html，选中 2 个复选框 = anotherlocation.html

> ID：13745464
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:16:17.690
> 
> 标签：javascript, jquery

我尝试在 html 和 javascript 中创建的表单有问题

首先我想有多个复选框

如果选中一项，则在提交时将用户带到一个 url

如果选中两个框，则在提交时将用户带到另一个 url 等。

这可能吗？如果可以，javascript 或 jquery 会是什么？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:29:46.263

一些代码会很好，因为我不知道您使用什么机制来提交表单，但解决方案很可能涉及以下内容：

```
 switch ($('form input:checkbox:checked').length) 
    {
    case 1:
    window.location.href = url1;
    break;
    case 2:
    window.location.href = url2;
    break;
    //etc
    default:
    } 
```

**编辑**：好的，我必须感谢 Valentin，所以让我们结合解决方案。

```
 var $myForm = document.getElementById('myForm');

    $('#myForm input:checkbox').on('change', function(event){
        switch ($('#myForm input:checkbox:checked').length) 
        {
        case 1:
        $myForm.action = url1;
        break;
        case 2:
        $myForm.action = url2;
        break;
        //etc
        default:
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:30:52.443

我会说您可以使用`onCheck`和`onUnCheck`复选框，并让他们将表单的操作属性修改为用户应该进入的任何页面。

所以你的 HTML 可能是：

```
<form method="post" action="whateverpage.php" id="myform">
<input type="checkbox" id="check0"/>
<input type="checkbox" id="check1"/> 
<input type="submit" value="Submit" /> 
</form> 
```

还有你的 javascript：

```
yourform=document.getElementById("myform");
checkbox0=document.getElementById("check0");
checkbox1=document.getElementById("check1");

checkbox0.onCheck=function(){
  if(checkbox1.checked==true){
    yourform.action="bothchecked.php";
  }else{
    yourform.action="firstchecked.php";
  }
}
checkbox1.onCheck=function(){
  if(checkbox0.checked==true){
    yourform.action="bothchecked.php";
  }else{
    yourform.action="secondchecked.php";
  }
}
checkbox1.onUnCheck=function(){
  if(checkbox0.checked==true){
    yourform.action="firstchecked.php";
  }else{
    yourform.action="nonechecked.php";
  }
}
checkbox0.onUnCheck=function(){
  if(checkbox1.checked==true){
    yourform.action="secondchecked.php";
  }else{
    yourform.action="nonechecked.php";
  }
} 
```

当然你也可以`yourform.setAttribute("action","page.php");`替代使用。

# adsense - AdSense 横幅中有多个网址？

> ID：13745465
> 
> 赞同：1
> 
> 时间：2012-12-06T14:16:20.857
> 
> 标签：adsense

在访问 Zalando.com 并查看了一些产品后，我经常看到通过 Google AdSense 重新定位 Flash 广告，展示了这些相同的产品。单击其中一种产品将带我进入该产品的 Zalando 产品*页面*。

这背后的跟踪并不是我真正感兴趣的，但在广告中有多个链接确实如此，因为我的雇主问我要创建一个包含 3 个类似产品或类别的横幅，以便用户可以简单地点击进入他们选择的产品/类别，而不是单个着陆页。

现在，根据[图片广告政策](https://support.google.com/adwordspolicy/bin/answer.py?answer=176108)，特别是关于点击标签和动画图片广告的部分，这似乎是不可能的，因为这似乎需要更改点击标签中的目标 URL。

Zalando（和其他人）是否通过跟踪用户行为（和加载外部内容）以及使用不同的 URL 或我错过了什么来违反政策？

我可以在不违反 AdSense 政策的情况下制作雇主要求的横幅吗？

# asp.net - 从数据视图中删除排序

> ID：13745471
> 
> 赞同：0
> 
> 时间：2012-12-06T14:16:37.510
> 
> 标签：asp.net, vb.net, sorting, dataview

我有一个绑定到 PagedDataSource 对象的数据视图。使用存储过程将数据从数据库中拉入数据视图，并根据日期字段对返回的数据进行排序。存储过程在应用程序的几个地方使用，所以我不能在这个实例中做任何大的改变。我只需要禁用存储过程返回的排序顺序（不对存储过程进行任何更改）并应用新排序。

```
 objPagedDs = New PagedDataSource()
 dvFeedback = objCompany.PublishedMonitoringCards.DefaultView
 dvFeedback.RowFilter = "EligibleForPrinting = 1"
 dvFeedback.Sort = "IncludeInRepReport DESC, Work_dt DESC" 
```

请找到上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:00:05.790

我在数据库中有 0,1 和空值。它按降序对 Includeinreport 进行排序。这意味着它按 1,0 和 null 的顺序排序。显然，当它从数据库返回时，我希望 null 为 0，以使排序按我想要的方式工作。使用 ISNULL 来做到这一点。与问题无关，但这就是我所做的。上面的代码片段很好。

# sql - 为什么我在这个简单的查询中需要 Group by？

> ID：13745472
> 
> 赞同：0
> 
> 时间：2012-12-06T14:16:38.610
> 
> 标签：sql, sql-server

**更新 ：**

**-----**

错误可能在项目表中的 sum(si.amt_pd) 中（因为没有关系）：

```
select SUM(si.amt_pd)amt_pd from [HMIS_REPORTING].HMIS_RPT_ME.dbo.item  i
                    where 
```

有解决办法吗？

**----------**

我正在尝试运行此查询。该查询仅根据某些表获取一个月的金额。这只是一个大查询的一部分。

```
select s.sales_Contract_Nbr
     , s.Sales_Id
     , s.Sale_Dt
     , YEAR(s.Sale_Dt) 'YEAR'
     , MONTH(s.Sale_Dt) 'MONTH'
     , s.Sales_Need_TYpe_Cd
     , s.Sales_Status_Cd
     , si.Posted
     , s.location_Cd
     , jan2011 = (
          select SUM(si.amt_pd)amt_pd 
          from [HMIS_REPORTING].HMIS_RPT_ME.dbo.item  i
          where i.Item_Id  = si.Product_Item_ID
            and i.Item_Cd <> '*INT'
            and convert(varchar(10),SI.Sales_Item_Dt,126) >= '2011-01-01'   
            and convert(varchar(10),SI.Sales_Item_Dt,126) >= '2011-01-31'
            ) INTO dbo.#a_acomparision

FROM [HMIS_REPORTING].HMIS_RPT_ME.dbo.Sales S 
   , [HMIS_REPORTING].HMIS_RPT_ME.dbo.Sales_Item SI 

WHERE SI.Sales_Id = S.Sales_Id 
  and s.Sales_Contract_Nbr in (
      select distinct (Sales_Contract_Nbr) 
      from mountainviewContracts 
      where Sales_Contract_Nbr <> '') 
```

但我收到以下错误消息。

```
Msg 8120, Level 16, State 1, Line 1
Column 'HMIS_REPORTING.HMIS_RPT_ME.dbo.Sales.Sales_Contract_Nbr' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

我只是不明白为什么我的查询应该对 sales_contract_nbr 有一个 group by，即使我放入 group by 子句，它也告诉我内部查询 si.Product_item_id 和 SI.sales_item_dt 也应该包含在 group by 子句中。

请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:57:18.853

这是一个非常微妙的问题。但是，我认为子查询应该是：

```
select SUM(i.amt_pd)amt_pd from [HMIS_REPORTING].HMIS_RPT_ME.dbo.item  i 
```

也就是说，别名不应该`i`是`si`。

发生的事情是`sum`子查询中的 位于外部查询中的值上。因此，SQL 编译器假定聚合查询。一旦发现第一列不是聚合，它就会抱怨您拥有的消息。

顺便说一句，您应该使用正确的连接语法，因此您的`from`子句如下所示：

```
FROM [HMIS_REPORTING].HMIS_RPT_ME.dbo.Sales S join
     [HMIS_REPORTING].HMIS_RPT_ME.dbo.Sales_Item SI 
     on SI.Sales_Id = S.Sales_Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:13:33.540

As @Gordon Linoff says, this is almost certainly because the query optimizer is treating this like a SUM operation, normalizing away the subquery for "jan2001".

If the amt_pd column is present in the ITEM table, Gordon's solution is the right one.

If not, you have to add the group by statement, as below.

```
select s.sales_Contract_Nbr
     , s.Sales_Id
     , s.Sale_Dt
     , YEAR(s.Sale_Dt) 'YEAR'
     , MONTH(s.Sale_Dt) 'MONTH'
     , s.Sales_Need_TYpe_Cd
     , s.Sales_Status_Cd
     , si.Posted
     , s.location_Cd
     , jan2011 = (
          select SUM(si.amt_pd)amt_pd 
          from [HMIS_REPORTING].HMIS_RPT_ME.dbo.item  i
          where i.Item_Id  = si.Product_Item_ID
            and i.Item_Cd <> '*INT'
            and convert(varchar(10),SI.Sales_Item_Dt,126) >= '2011-01-01'   
            and convert(varchar(10),SI.Sales_Item_Dt,126) >= '2011-01-31'
            ) INTO dbo.#a_acomparision

FROM [HMIS_REPORTING].HMIS_RPT_ME.dbo.Sales S 
   , [HMIS_REPORTING].HMIS_RPT_ME.dbo.Sales_Item SI 

WHERE SI.Sales_Id = S.Sales_Id 
  and s.Sales_Contract_Nbr in (
      select distinct (Sales_Contract_Nbr) 
      from mountainviewContracts 
      where Sales_Contract_Nbr <> '')
GROUP BY s.sales_Contract_Nbr
     , s.Sales_Id
     , s.Sale_Dt
     , YEAR
     , MONTH
     , s.Sales_Need_TYpe_Cd
     , s.Sales_Status_Cd
     , si.Posted
     , s.location_Cd 
```

# javascript - 拆分此字符串的最简单解决方案是什么？

> ID：13745473
> 
> 赞同：-2
> 
> 时间：2012-12-06T14:16:42.387
> 
> 标签：javascript, split

我有更多的文字，如：

*   标识符_100D_200A
*   标识符_400D_500A

我想要这样的文字：

*   100D_200A
*   400D_500A

如何使用最简单的解决方案从字符串中删除 identifier_ 并将其存储在新变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:18:59.753

```
var str="identifier_100D_200A";
var n=str.replace("identifier_",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:20:49.807

由于您知道“identifier_”（11 个字符）的长度，您还可以使用[`substr`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)：

```
var str = "identifier_100D_200A";
str = str.substr(11); 
```

# iphone - 在朋友墙上发布消息时出现集成错误？

> ID：13745474
> 
> 赞同：1
> 
> 时间：2012-12-06T14:16:44.773
> 
> 标签：iphone, ios, facebook, ios5

我正在使用 facebook_skd_3.1 (Xcode ios 4.5) 我通过调用 FBFriendPickerViewController 获得了朋友列表，在单击完成按钮时我试图
在选定的朋友墙上发布消息但我收到了这个错误：- 警告：尝试从视图控制器中关闭在演示或解散过程中！
2012-12-06 19:37:09.187 ........项目 [5474:19a03] 错误：HTTP 状态代码：403

警报视图中的错误

```
 error =Error Domain=com.facebook.sdk code=5" ..........
 message = "(#200)the user hasn't authorized the application to perform this action";
 type = OAuthException
 };
 };

 code=403;

 com.acebook.sdk:HTTPStatuscode=403} 
```

代码 ：-

```
 -(void)facebookViewControllerDoneWasPressed:(id)sender {
  NSString* userid;

  for (id<FBGraphUser> user in self.friendPickerController.selection)
    {
        NSLog(@"\nuser=%@\n", user);
     userid = user.id;

    }

  NSMutableDictionary* dictaram = [[NSMutableDictionary alloc]
    initWithObjectsAndKeys:@"like this!", @"message", nil];
  [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/feed", userid] 
       parameters:params HTTPMethod:@"POST"  
  completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
  {

      UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Shared"
      message:[NSString     stringWithFormat:@ %@! error=%@", fbUserName, error]
                                                        delegate:nil
                                              cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
      [alertView show];
   }
   ];

   [self dismissModalViewControllerAnimated:YES]; 
```

![在此处输入图像描述](../Images/8bbf66aa08400f701728df5f98492fc4.png)

我需要一些权限还是有一些编码错误请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:21:51.510

请延迟一段时间后关闭视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:24:35.603

我已经通过在委托中重新授权如下权限来解决这个问题，我已经读取了会话的权限，因此不适用于发布。在 ButtonAction 中写入以下代码，您将获得正确的输出。

```
 NSArray *permissions =[NSArray arrayWithObjects:@"publish_actions",@"publish_stream",@"manage_friendlists", nil];

[[FBSession activeSession] reauthorizeWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceFriends
                                           completionHandler:^(FBSession *session, NSError *error) {
                                               /* handle success + failure in block */
                                           }]; 
```

# .net - 在 MVP 中绑定视图事件

> ID：13745475
> 
> 赞同：1
> 
> 时间：2012-12-06T14:16:45.773
> 
> 标签：.net, delegates, event-handling, mvp

我正在创建一个 MVP 项目，并且我已经完成了大部分工作，但我对几点有点困惑。这是我的代码：

```
//Used to invoke asynchronous calls.
Public Delegate ModelNumberChangedDelegate(sender as Object, e as EventArgs)

Public Interface IEquipmentView
    Event ModelNumberChanged as ModelNumberChangedDelegate

    Property ModelNumber as String
End Interface

Public Class Equipment
    Inherits Form
    Implements IEquipmentView

Public Property ModelNumber Implements IEquipmentView.ModelNumber
    Get
        return txtModelNumber.Text //A texbox
    End Get
    Set(value as String)
        txtModelNumber.Text = value
    End Set
End Property

Public Event ModelNumberChanged(sender as Object, e as EventArgs) _
    Implements IEquipmentView.ModelNumberChanged

Public Sub New()
    InitializeComponent()

    AddHandler ModelNumberChanged, AddressOf view_ModelNumberChanged
End Sub   

Private Sub view_ModelNumberChanged(sender as Object, e as EventArgs)
    //If invoke is required, create a ModelNumberChangedDelegate and invoke it
    //at this address. Otherwise, just execute the method.
End Sub

End Class 
```

我的困惑在于我应该如何实际提出这个事件。我是否应该简单地转到该属性并手动引发 ModelChangedEvent，如下所示：

```
Public Property ModelNumber Implements IEquipmentView.ModelNumber
    Get
        return txtModelNumber.Text //A texbox
    End Get
    Set(value as String)
        txtModelNumber.Text = value
        RaiseEvent ModelNumberChangedEvent(txtModelNumber, Nothing)
    End Set
End Property 
```

或者，我应该将控件的更改事件直接绑定到委托函数，如下所示：

```
Public Sub view_ModelNumberChanged(sender as Object, e as EventArgs) _
    Handles txtModelNumber.Changed
    //If invoke is required, create a ModelNumberChangedDelegate and invoke it
    //at this address. Otherwise, just execute the method.
End Sub 
```

提前致谢！

注意：我知道评论是错误的，但如果我`'`在帖子中使用，它会将它们解释为字符串。

# javascript - 使用 phonegap/Jquery/Ajax 将 XML 解析到数据库中

> ID：13745478
> 
> 赞同：1
> 
> 时间：2012-12-06T14:17:03.260
> 
> 标签：javascript, sqlite, cordova, jquery-mobile, xml-parsing

嘿，我在这里非常感谢一些帮助，我正在尝试解析 XML 并将结果放入我正在开发的应用程序的数据库中（Phonegap/JQuery 移动应用程序）。有人可以告诉我如何在 JS 函数中执行此操作吗？

我了解 XML 的解析过程，但是在将其本地存储到 phonegap 允许您访问的 SQLlite 数据库中时，我有点迷失了。这是我正在使用的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
 <orders>
    <order>
        <orderId>123456789</orderId>
        <city>Cincinnati</city>
        <state>Ohio</state>
        <zip>45451</zip>
    </order>
 </orders> 
```

这是一个解析这个的JS函数：

```
 $(document).ready(function(){
    $.ajax({
    type: "GET",
    url: "testOrders.xml",
    dataType: "xml",
    success: function(xml) {
      $(xml).find('order').each(function(){
        orderId = $(this).find("orderId").text();
        city = $(this).find("city").text();
        state = $(this).find("state").text();
        zip = $(this).find("zip").text();
         $("#acceptedOrdersContent").append('<div>');
         $("#acceptedOrdersContent").append('<h3>'OrderId: '+ orderId + '</h3>');
         $("#acceptedOrdersContent").append('<p>');
         $("#acceptedOrdersContent").append('City: '+ city + '<br />');
         $("#acceptedOrdersContent").append('State: '+ state + '<br />');
         $("#acceptedOrdersContent").append('Zip: '+ zip +'<br />');
         $("#acceptedOrdersContent").append('</p>');
         $("#acceptedOrdersContent").append('</div>');
            });
        }
     });
 }); 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:18:55.640

创建数据库：

```
var db = openDatabase('PhoneGap_db', '1.0', '', 2 * 1024 * 1024); 
```

创建表：

```
db.transaction(function (tx) {
  tx.executeSql('CREATE TABLE IF NOT EXISTS orders (id unique, city, state, zip)');
}); 
```

插入表格：

```
db.transaction(function (tx) {
  tx.executeSql('INSERT INTO orders (id, city, state, zip) VALUES (orderId,city,state,zip)');
}); 
```

最好将 INSERT 放在 AJAX 的回调中：

```
$.ajax({
    type: "GET",
    url: "testOrders.xml",
    dataType: "xml",
    success: function(xml) {
      $(xml).find('order').each(function(){
        orderId = $(this).find("orderId").text();
        city = $(this).find("city").text();
        state = $(this).find("state").text();
        zip = $(this).find("zip").text();
        db.transaction(function (tx) {
           tx.executeSql('INSERT INTO orders (id, city, state, zip) VALUES      (orderId,city,state,zip)');
        });
            });
        }
     }); 
```

祝你好运！

# ios - 在 XCode/Keychain 的“自动配置文件选择器”中设置默认的“iPhone Developer”证书

> ID：13745479
> 
> 赞同：3
> 
> 时间：2012-12-06T14:17:07.003
> 
> 标签：ios, xcode

在我的公司，我们有两个独立的开发人员门户，一个用于内部/BD 应用程序，一个用于外部/合同应用程序。因此，我有两个单独的开发人员证书。

我想将它保留在 XCode 中，以便从“自动配置文件选择器”分组（而不是 iPhone 开发人员：{Name} {ID}）中将“代码签名身份”设置为“iPhone 开发人员”。显然，在有多人的项目中，将其硬编码到我的名字和特定密钥是非常不受欢迎的。

但是，某些 iPad 仅针对两个门户之一进行配置，因此默认的“iPhone 开发人员”证书仅在大约一半的时间内有效，具体取决于项目（如果我在 Organizer 中对证书进行“刷新”，所有的赌注关闭哪个将成为默认的“iPhone Developer”）。

很难为此找到好的解决方案。任何人都知道如何更改与通用“iPhone Developer”条目相关联的证书密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T22:15:40.187

I have found this a common issue too, but as far as I understand it, the defaults are chosen based on which profile is most appropriate for the app you are working on. This seems to be done according to the bundle identifier associated with each profile - the profile with an applicable bundle identifier is chosen as the automatic selection, with a preference towards a more distant profile expiry date.

Of course, this decision is not based on the device you intend to run the app on, which means the wrong profile is often chosen,which leads to great frustration on the part of the developer who then has to change the profile to a static setting and always remember to change back before committing their changes (or more often forget, causing even more frustration for the other members of the team!)

PS: If anyone else knows differently here, I'd love to know how its done!

# codeigniter - 通过 jquery 的 CI 加载视图

> ID：13745480
> 
> 赞同：0
> 
> 时间：2012-12-06T14:17:10.653
> 
> 标签：codeigniter

大家好，我正在以这种方式加载弹出屏幕

```
<script>
  function show_popup(){
    $('#popup-container').load(html);
$('.popup').fadeIn();
  }
</script> 
```

在我的 html 上

```
<a onlick="show_popup('popup/view-content')" href="#"> 
```

我的问题是加载 html 时，在新的 html 出现之前可以看到以前加载的 html 一段时间。我如何卸载以前的 html。

视图似乎缓存显示以前的 html 我如何删除以前的 html 然后加载新的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:40:04.877

要从页面中删除缓存，您需要在页面顶部包含以下内容：-

```
$this->output->set_header("Expires: Tue, 01 Jan 2000 00:00:00 GMT"); 
$this->output->set_header("Last-Modified: " . gmdate("D, d M Y H:i(worry)") . " GMT"); 
$this->output->set_header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0"); 
$this->output->set_header("Cache-Control: post-check=0, pre-check=0", false); 
$this->output->set_header("Pragma: no-cache"); 
```

# http - Cookie 有时会在 303 重定向时消失

> ID：13745483
> 
> 赞同：0
> 
> 时间：2012-12-06T14:17:17.103
> 
> 标签：http, redirect, cookies, identity, redirectwithcookies

**问题已解决**

该特定用户在他的两个浏览器中关闭了第三方 cookie，并且测试是在嵌入 iFrame 的页面上完成的。

* * *

我们有许多用于`303 redirects`在它们之间共享身份的站点。

```
You GET a Page 1 on site A with a blank cache - you get a 
303 to a sync page on site B.

You GET the sync page on Site B - it sets a cookie and redirects (303). 

You GET a sync page on Site A - the cookie value is also in the URL.

Site A unpacks the cookie from the URL - it sets it on itself and then 
303's you back to GET your original page 
```

您应该为站点 A 和站点 B 设置两个相同的 cookie，具有较长的生命周期和根路径。

有时，对于某些用户来说，它会无限重定向。当浏览器处理最后一次重定向时，站点 B 为最终重定向设置的 cookie 不会发回。

这可能是什么原因造成的？

*   cookie 设置不正确？
*   浏览器设置？

我该如何调试它？这是生产中真正的间歇性问题，我无法在开发中重现。

# facebook - 如何使用 Facebook 提要对话框发布文本？

> ID：13745486
> 
> 赞同：1
> 
> 时间：2012-12-06T14:17:42.620
> 
> 标签：facebook, facebook-graph-api, lua, coronasdk

我使用 Corona SDK 在 Lua 中编写应用程序。我想用 Facebook 提要对话框发布一些独特的文本。我的代码是：

```
facebook.showDialog( "feed", {message = "This is my unique text"  }  ) 
```

我也试过：

```
local text_arr = {}
text_arr.text = "This is my unique text"
facebook.showDialog( "feed", {properties = text_arr }  ) 
```

他们两个都不工作。对话框发布操作后，我没有在墙上看到“这是我的唯一”字符串。那么，我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:55:18.773

用户登录 facebook 后，您需要执行以下操作：

```
facebook.login( appId, listener ) 
```

您现在可以使用 request 函数向 facebook graph API 发送请求：

```
facebook.request( "me/feed", "POST", {message = "Hello Facebook"} ) 
```

您可以在此处查看文档页面[http://docs.coronalabs.com/api/library/facebook/request.html](http://docs.coronalabs.com/api/library/facebook/request.html)

如果您真的想使用我从未尝试过的对话框，我想您必须定义更多参数：

根据我从[http://docs.coronalabs.com/api/library/facebook/showDialog.html](http://docs.coronalabs.com/api/library/facebook/showDialog.html)和[https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)可以理解的内容，结果应该是这样的这：

```
facebook.showDialog( "feed", {
    redirect_uri = "YOUR_URL",
    link = "YOUR_LINK",
    picture = "YOUR_PICTURE_URL",
    name = "DIALOG_NAME",
    caption = "DIALOG_CAPTION",
    description = "DIALOG_DESCRIPTION" 
}) 
```

有些属性可能是可选的，所以稍微弄乱一下......

# log4j - Websphere Message Broker 中的消息流中的 Log4jNode 抛出错误

> ID：13745487
> 
> 赞同：4
> 
> 时间：2012-12-06T14:17:47.083
> 
> 标签：log4j, websphere, messagebroker

我正在开发一个简单的消息流，它使用 Log4j 记录各个阶段的状态。但是，当我尝试运行此流程时，我收到以下错误。我在消息流中使用了 Log4jNode。

尝试解析`''com.ibm.broker.IAM3.Log4jNode.initLog4j''`例程“ **initLog4j** ”引用的 Java 类或方法时发生错误

正如错误消息所述，我猜它找不到 log4jNode 的参考。但我找不到任何可以确定这一点的帮助。请高手帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:28:10.800

[Log4jNode](http://www-01.ibm.com/support/docview.wss?uid=swg24021221)是[类别 2](http://www-01.ibm.com/support/docview.wss?rs=171&uid=swg27007198#2)之一- 不受支持的 Websphere MQ SupportPacs。这是一种用于配置和写入日志文件的计算节点。初始化期间发生错误。

如您所料，在 MQ Broker 的类路径中查找参考 jar 似乎很困难。请检查[此处](ftp://public.dhe.ibm.com/software/integration/support/supportpacs/individual/iam3.pdf)找到的文档，看看您是否遗漏了任何内容。

# asp.net-mvc-3 - 从动态属性 ASP.NET MVC3 中选择

> ID：13745488
> 
> 赞同：0
> 
> 时间：2012-12-06T14:17:53.070
> 
> 标签：asp.net-mvc-3, select, dynamic

我正在开发一个支持多语言的 ASP.NET MVC3 项目。我将所有单词保存在数据库中，并根据 Session 值从中选择。目前我得到的值如下：

```
 public ActionResult Index()
    {
        string lang = (string)System.Web.HttpContext.Current.Session["Language"];
        if (lang == "Tr" || lang == null)
        {
            ViewBag.Admin = db.Words.Find(10).Tr;
        }
        else if(lang == "En") 
        {
            ViewBag.Admin = db.Words.Find(10).En;
        }
        return View();
    } 
```

目前的Word类型：

```
public class Word
{
    public int ID { get; set; }
    public string Tr { get; set; }
    public string En { get; set; }
} 
```

但是，语言的数量会增加，使用目前的方法，我需要手动添加这些。我想要的是动态获取单词的“会话”语言形式，例如（伪）：

```
ViewBag.Admin = db.Words.Find(10)."Session[Language]"; 
```

我知道这应该很容易，但找不到合适的关键字来找到它。知道如何实现这一目标吗？

**编辑**：我只需要一种执行 SQL 字符串的方法，如下所示：

```
String lang = (string)System.Web.HttpContext.Current.Session["Language"];
ViewBag.MyWord = ExecuteSQL.("SELECT " + lang + " FROM Words WHERE ID = " + 10 + " "); 
```

**编辑2**：我尝试了以下几行：

```
ViewBag.Admin = db.Words.SqlQuery("SELECT" + 
                (string)System.Web.HttpContext.Current.Session["Language"] + 
                "FROM Words WHERE ID=10"); 
```

但是，此操作的输出是屏幕上的查询本身。（从 ID=10 的单词中选择 Tr）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:20:19.917

如果您使用 EF 作为 ORM，您可以执行以下操作：

```
int wordId = 10;
string lang = (string)System.Web.HttpContext.Current.Session["Language"];
var query = "SELECT " + lang + " FROM Words WHERE ID = {0}";
var word = context.Database.SqlQuery<string>(query, wordId).FirstOrDefault(); 
```

有关原始 sql 查询的更多信息，请参见此处：

[http://msdn.microsoft.com/en-us/data/jj592907.aspx](http://msdn.microsoft.com/en-us/data/jj592907.aspx)

**注意：**上面可能对 sql 注入开放，最好在将 sql 请求发送到服务器之前测试它是 2 个字符的语言代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:45:38.293

你可以通过反思来做到这一点。只需通过语言键获取属性。

这是一些代码：

```
 Word word = ...
 string lang = (string)System.Web.HttpContext.Current.Session["Language"];
 PropertyInfo pi = typeof(Word).GetProperty(lang);
 return pi.GetValue(word, null); 
```

我没有处理异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:31:07.033

您可以使用表达式/委托。

编写一个返回表达式的方法，具体取决于`Session["Language"]`.

```
private string GetLanguageStringByKey(int key){
    return GetFuncByLanguage()(db.Words.Find(key));
}

private Func<Word,string> GetFuncByLanguage(){

    string lang = (string)System.Web.HttpContext.Current.Session["Language"];
    Func<Word, string> func;
    switch(lang){
         case "En":{
            func = w => w.En;
            break;
         }
         default:{
            func = w => w.Tr;
            break;
         }
    }
    return func;
}

public ActionResult Index()
{
    ViewBag.Admin = GetLanguageStringByKey(10);
    return View();
} 
```

# perl - Perl 在不使用对象的情况下创建格式化表

> ID：13745497
> 
> 赞同：0
> 
> 时间：2012-12-06T14:18:05.310
> 
> 标签：perl

我想简单地在表格中输出一些结果，而不会出现任何偏移问题。为了清楚起见，不要担心只是伪代码的 foreach 和值的输出。

```
print "\n  ______________________________________________________";
print "\n |                                                      |";
print "\n |                        Title                         |";
print "\n +______________________________________________________+";
print "\n |                          |                           |";
print "\n |          City            |          Size             |";
print "\n |__________________________|___________________________|";

#Sort by highest scores
################################
foreach (city, size)
{
print "\n | (city(value)";
print "| (size(value)";
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:40:14.347

它已经很少使用了，但是 Perl 有内置的能力来创建这些类型的[表单](http://perldoc.perl.org/perlform.html)。

基本上，您使用规范来说明您希望这些表格的格式，以及这些表格中的信息将使用该`format`语句放置的位置。然后，您使用 Perl`write`语句写入该格式。您也可以指定表格的页眉和页脚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:55:40.923

我建议您使用 [`substr`](http://perldoc.perl.org/functions/substr.html) 覆盖模板行的正确部分。

```
use strict;
use warnings;

my %data = (
  Birmingham  => 1_000_000,
  Bristol     => 430_000,
  Manchester   => 110_000,
);

print "  ______________________________________________________\n";
print " |                                                      |\n";
print " |                        Title                         |\n";
print " +______________________________________________________+\n";

my $template =
      " |                          |                           |\n";
print $template;

while (my ($city, $size) = each %data) {
  my $line = $template;
  substr $line, 12, length $city, $city;
  substr $line, 39, length $size, $size;
  print $line;
}

print " |__________________________|___________________________|\n"; 
```

**输出**

```
 ______________________________________________________
 |                                                      |
 |                        Title                         |
 +______________________________________________________+
 |                          |                           |
 |          Bristol         |          430000           |
 |          Manchester      |          110000           |
 |          Birmingham      |          1000000          |
 |__________________________|___________________________| 
```

# knockout.js - 计算的 observableArray 不更新 UI

> ID：13745498
> 
> 赞同：3
> 
> 时间：2012-12-06T14:18:08.283
> 
> 标签：knockout.js, knockout-2.0

我有一个主要的 ko.observableArray，我从它创建了三个计算的 observable 数组，并将这三个数组绑定到 UI。代码是

```
self.ActiveVisitsList = ko.observableArray();

self.FVL = ko.computed(function () {
    return ko.utils.arrayFilter(self.ActiveVisitsList(), function (o) {
        return o.CsrID == 0;
    });
}, self);

self.MVL = ko.computed(function () {
    return ko.utils.arrayFilter(self.ActiveVisitsList(), function (o) {
        return o.CsrID == self.Me().ID;
    });
}, self);

self.OVL = ko.computed(function ()
{
    return ko.utils.arrayFilter(self.ActiveVisitsList(), function (o) {
        return (o.CsrID != self.Me().ID && o.CsrID != 0);
    });
}, self); 
```

一段时间后，主 observableArray“ActiveVisitorsList”中的一个对象，其 CsrID 从 0 更改为其他值，但绑定的 UI 不反映。有什么方法可以手动将 UI 与模型或其他东西重新绑定以使其工作？

谢谢，阿迪尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:22:50.303

如果定义`CsrID`为`observable`淘汰赛会自动更新UI。在这种情况下，您必须将计算结果修改为：

```
self.FVL = ko.computed(function () {
    return ko.utils.arrayFilter(self.ActiveVisitsList(), function (o) {
        return o.CsrID() == 0;
    });
}, self);

self.MVL = ko.computed(function () {
    return ko.utils.arrayFilter(self.ActiveVisitsList(), function (o) {
        return o.CsrID() == self.Me().ID;
    });
}, self);

self.OVL = ko.computed(function ()
{
    return ko.utils.arrayFilter(self.ActiveVisitsList(), function (o) {
        return (o.CsrID() != self.Me().ID && o.CsrID != 0);
    });
}, self); 
```

# tomcat - 多个用户重用tomcat会话

> ID：13745502
> 
> 赞同：0
> 
> 时间：2012-12-06T14:18:20.213
> 
> 标签：tomcat, servlets

我在创建 Web 应用程序方面相对较新，所以请耐心等待。

我有一个遗留应用程序，我想在 tomcat 上托管。此应用程序需要很长时间才能启动（10 秒？）并且消耗大量资源。我希望在任何给定时间只运行此应用程序的一个实例。

我想设置 tomcat 以便在任何给定时间都可以有 0 或 1 个会话。当用户第一次连接时，会创建一个会话，该会话会启动旧版应用程序的一个实例，任何后续用户都将使用相同的会话。

似乎tomcat的默认行为是为每个用户创建一个对我不起作用的新会话。

您能否建议我如何设置tomcat，以便后续用户使用第一个用户创建的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:44:16.340

另一种选择是实现您自己的会话[管理器](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/Manager.html)。会话管理器负责创建新会话、查找会话等，设置在`server.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:21:01.320

我最终实现了一个维护单个实例的 HttpSessionListener：

```
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;
import javax.servlet.*;
import javax.servlet.http.*;

public class SessionListener implements HttpSessionListener {

   private static HttpSession _session = null;

   public static HttpSession GetSession()
   {
      return _session;
   }

   @Override
   public void sessionCreated(HttpSessionEvent arg0) {
      if (_session == null)
      {
         System.out.println("setting session");
         _session = arg0.getSession();
      }
   }

   @Override
   public void sessionDestroyed(HttpSessionEvent arg0) {
      System.out.println("Clearing session");
      _session = null;
  } 
} 
```

# javascript - 如何使用 Zurb Foundation 显示打开、打开、关闭、关闭回调函数？

> ID：13745505
> 
> 赞同：37
> 
> 时间：2012-12-06T14:18:26.410
> 
> 标签：javascript, callback, modal-dialog, zurb-foundation, dom-events

在 zurb 基金会的网站[http://foundation.zurb.com/docs/reveal.php](http://foundation.zurb.com/docs/reveal.php)他们列出了一些选项，包括

open：在模式打开之前触发的回调函数。

已打开：在模式打开“之后”触发的回调函数。

关闭：触发“在”模式准备关闭之前的回调函数。

关闭：在模式关闭后触发的回调函数。

但我不知道如何将它们与我的模态一起使用。我试过：

```
$('#myModal').closed(function()
{});

$('#myModal').trigger('reveal:closed')(
{});

$('#myModal').reveal.closed(function()
{});

$('#myModal').reveal().closed(function()
{}); 
```

我用谷歌搜索但没有找到任何结果。任何人都可以解释它或给我一个例子或提供相关链接？

给出的建议有效，但是我还有另一个密切相关的问题`reveal()`：

```
<a href="#" class="button" data-reveal-id="myModal2">Click Me For A Modal</a>); 
```

我试图添加一个属性，例如`data-closeOnBackgroundClick="false"`That 似乎不起作用。正确的语法应该是什么？它也适用于回调函数吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-05-20T20:54:51.740

上面的答案对我不起作用。这是有效的（Foundation 4 和 jQuery）：

```
$('#myModal').bind('opened', function() {
  console.log("myModal opened");
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-11T10:55:33.163

**Zurb Foundation Reveal 的事件绑定 -**

您可以绑定一系列事件来触发回调：

```
$(document).on('open.fndtn.reveal', '[data-reveal]', function () {
  // your code goes here...
});

$(document).on('opened.fndtn.reveal', '[data-reveal]', function () {
  // your code goes here...
});

$(document).on('close.fndtn.reveal', '[data-reveal]', function () {
  // your code goes here...
});

$(document).on('closed.fndtn.reveal', '[data-reveal]', function () {
  // your code goes here...
}); 
```

如果您在单页中使用了多个数据显示，如下所示：

```
<div class="content reveal-modal" id="element-1" data-reveal>
<div class="content reveal-modal" id="element-2" data-reveal> 
```

然后在这种情况下，您可以触发与上述相同的回调，但只需稍作修改，如下所示：

```
$(document).on('open.fndtn.reveal', '#element-1[data-reveal]', function () {
  // your code goes here...
});

$(document).on('open.fndtn.reveal', '#element-2[data-reveal]', function () {
  // your code goes here...
}); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-07T15:40:33.933

像往常一样调用`reveal`，但将选项的名称和相应的函数作为对象包含在内：

```
//Reveal the modal and say "Good bye" when it closes
$("#myModal").reveal({ "closed": function () { alert("Good bye") } }); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-08-19T00:17:38.270

在 Zurb Foundation v6 上，这些事件被重命名为`xxx.zf.reveal`：

> *   **closeme.zf.reveal** 在模态打开之前立即触发。关闭当前打开的任何其他模式
> *   **open.zf.reveal** 当模式成功打开时触发。
> *   **closed.zf.reveal** 当模式完成关闭时触发。

来源： http: [//foundation.zurb.com/sites/docs/reveal.html#js-events](http://foundation.zurb.com/sites/docs/reveal.html#js-events)

### 例子：

*   将为所有模式触发的通用回调：

    ```
    $(document).on('open.zf.reveal', '[data-reveal]', function() {
      console.log('This works');
    }); 
    ```

*   打开特定模式时将触发的回调：

    ```
    $(document).on('open.zf.reveal', '#<ELEMENT-ID>[data-reveal]', function() {
      console.log('This works');
    }); 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-17T13:34:31.973

就像肉机器人说的那样，要让这个工作你想用你所针对的动作绑定到模态。我得到了这个工作：

```
$('#myModal').bind('closed', function() {
    console.log("myModal closed!");
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-15T10:47:51.253

这有点晚了，但是对于第二部分，您将属性添加为 data-options 属性中的分号分隔的值列表（使用基础 5 测试），即：

`<div id="myModal" data-options="close_on_background_click:false;" class="reveal-modal">`

不，你不能以这种方式传递函数，我试过:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-08T18:57:02.760

查看Foundation 5，发现reveal library会触发open、open、close、close事件。只需将处理程序附加到您想要的事件。

`$('#myModal').on([event], handler)`

您还可以通过设置参数传递处理程序。看看这个：[https ://github.com/zurb/foundation/blob/master/js/foundation/foundation.reveal.js#L92](https://github.com/zurb/foundation/blob/master/js/foundation/foundation.reveal.js#L92)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-26T13:35:32.430

Foundation 5 文档指定了揭示事件到“揭示”事件空间的范围。然而，实际的模态事件似乎并没有在这个事件空间内持续触发。删除此规范可解决问题：

```
$(document).on('opened.fndtn', '[data-reveal]', function() {
  console.log('This works');
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-06T21:28:30.717

在基础 3.2.5 中，您应该像这样绑定 'reveal:opened'：

```
$('#myModal').bind('reveal:opened', function() {
   console.log("myModal opened");
}); 
```

问候， MarianoC。

# dart - Dart ord() 和 chr() 函数在哪里？

> ID：13745507
> 
> 赞同：7
> 
> 时间：2012-12-06T14:18:36.553
> 
> 标签：dart

我找不到到达`ord()`或`chr()`在 Dart 中的方法：

```
print(ord("f")); // should be 102
print(chr(0x41)); // should be A 
```

这些方法在哪里？

我说的是 PHP 中的函数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T14:27:43.280

当你需要时`ord()`，你只需使用这个 getter：

```
print("ABC".codeUnits); // [65, 66, 67] 
```

如果您需要从这些构造一个字符串：

```
print(new String.fromCharCodes([65, 66, 67])); // ABC 
```

所以在你的情况下：

```
print("f".codeUnits.first); // 102
print(new String.fromCharCode(0x41); // "A" 
```

注意：有`fromCharCode()`和`fromCharCodes()`。

# node.js - 如何托管 HTML node.js 应用程序

> ID：13745508
> 
> 赞同：1
> 
> 时间：2012-12-06T14:18:38.877
> 
> 标签：node.js, hosting, socket.io

我使用 socket.io 和 node.js 开发了一个简单的 webapp，想知道如何将它部署到服务器上？我的应用程序使用带有用户交互的画布元素的 HTML 文件，我将如何将 css 和 js 文件以及 app.js 文件部署到服务器？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:09:02.037

在一些支持 Node.js 的托管公司（如 Nodejitsu 和 Heroku）中，您可以将静态文件部署为应用程序代码的一部分。换句话说，当你部署你的应用程序时，你的代码和静态文件（JS/CSS/Images）都会被部署。

这种方法的缺点是您不能像在更传统的部署中那样轻松地更改 CSS 文件，您可以将新的 CSS 文件通过 FTP 传输到生产服务器。不过，如果您将 CSS 文件托管在其他地方，则可以绕过这一点。

我没有使用 AppFog 的经验，但我怀疑情况也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:58:55.693

Azure 有 90 天的免费试用期。信不信由你，但他们对 node.js 有很大的支持。[在http://www.windowsazure.com/en-us/develop/nodejs/](http://www.windowsazure.com/en-us/develop/nodejs/)阅读更多内容

# java - JNLP Webstart + JavaFX 和 DeployToolkit

> ID：13745511
> 
> 赞同：3
> 
> 时间：2012-12-06T14:18:45.227
> 
> 标签：java, deployment, javafx-2, jnlp, java-web-start

几天以来，我一直在搜索和尝试 Webstart。一些应用程序用户有与 java 相关的问题——但没关系，……。这很容易修复。

但是我有很多问题：

1.  图标图像总是从服务器重新下载。我尝试使用属性 version=""，但是找不到我的图标。我将图像文件重命名为与我的 jar 资源文件名_V$ *version$.jar -> 文件名*_V$version%.png 相同的格式。有什么办法可以防止这种行为？
2.  我正在使用 JavaFX，并且通过 JavaFX Webstart 获得了一些新元素，例如 jfx:javafx-runtime... 我找不到任何描述/文档哪些“新”元素存在，我也没有找到任何 jfx 的命名空间。这导致无法检查我的 jnlp 文件的有效性。此外，不再显示默认的 Webstart 启动器。我目前可以通过创建自定义进度指示器来解决此问题，但没有任何本机解决方案吗？
3.  Java Webstart 会在开始安装后显示 Java7 启动画面。有什么办法可以隐藏这个吗？要查看此行为，您可以开始安装[http://youtubeuploader.square7.ch/nightly/](http://youtubeuploader.square7.ch/nightly/) - 不过您不必完成它。
4.  JavaFX (dtjava.js) 引入的新部署工具包是否有完整的文档/api

问候，丹尼斯·菲舍尔

编辑：包括当前的 JNLP 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0" codebase="http://youtubeuploader.square7.ch/nightly/data" href="http://youtubeuploader.square7.ch/nightly/data/SimpleJavaYoutubeUploader3.0.jnlp">
<information>
                        <title>Simple Java Youtube Uploader 3.0</title>
                        <vendor>Dennis Fischer aka CHAOSFISCH</vendor>
                        <description>Simple Java Youtube Uploader that helps you uploading videos to your favourite video platform (youtube).</description>
                        <homepage href="http://code.google.com/p/simple-java-youtube-uploader/"/>
                        <icon href="http://youtubeuploader.square7.ch/nightly/images/icon.png"/>
                        <icon kind="splash" href="http://youtubeuploader.square7.ch/nightly/images/splash.png"/>
                        <icon kind="shortcut" href="http://youtubeuploader.square7.ch/nightly/images/icon.png"/>
                        <offline-allowed/>
                        <shortcut online="true" install="true">
                            <desktop/>
                            <menu submenu="SimpleJavaYoutubeUploader">
                                <menu submenu="SimpleJavaYoutubeUploader"/>
                            </menu>
                        </shortcut>
                    </information><security>
                        <all-permissions/>
                    </security><resources>
                        <property name="jnlp.packEnabled" value="true"/>
                        <property name="jnlp.versionEnabled" value="true"/>
                        <j2se version="1.7.0.09+" href="http://java.sun.com/products/autodl/j2se"/>
                        <jfx:javafx-runtime version="2.2+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/><jar href="SimpleJavaYoutubeUpl.jar" size="467908" version="a3eed954cab539117aa17a786c01454d" download="lazy"/>
<jar href="lib/xmlpull-1.1.3.1..jar" size="4989" version="e27ea23afcb18f5aecf099c84ca43d02" download="lazy"/>
<jar href="lib/mail-1.4.5.jar.p.jar" size="196338" version="4070ac4943d6adb3af259067dde24733" download="lazy"/>
<jar href="lib/WebstartProgress.jar" size="3236" version="238c19b333f9f9a46d13326b45c71abf" download="progress"/>
<jar href="lib/aopalliance-1.0..jar" size="2735" version="9e61869680381a8f71aa1fde530bbb12" download="lazy"/>
<jar href="lib/commons-logging-.jar" size="30947" version="9036fbe6150b7f30e090b80bc1a2a209" download="lazy"/>
<jar href="lib/commons-email-1..jar" size="20195" version="edce8c0ac33553ebf5ebbb7182661faf" download="lazy"/>
<jar href="lib/httpmime-4.2.1.j.jar" size="14761" version="9918a4c7dcc1d5fc6aa0a8c13357a75b" download="lazy"/>
<jar href="lib/logback-classic-.jar" size="83594" version="bdcd2936c1b843a228e00018ba829697" download="lazy"/>
<jar href="lib/jfx-dialogs.jar..jar" size="16337" version="53019dac238b574ae94c5db901682ae6" download="lazy"/>
<jar href="lib/xpp3_min-1.1.4c..jar" size="16309" version="a65c0872e018d7d69d1e47f58ac14105" download="lazy"/>
<jar href="lib/javax.inject-1.j.jar" size="2036" version="91e135b600db7218af1bb13c37476718" download="lazy"/>
<jar href="lib/h2-1.3.168.jar.p.jar" size="502628" version="8f4e15d4696eb6dc5c1eabbbf61700d2" download="lazy"/>
<jar href="lib/httpcore-4.2.1.j.jar" size="76244" version="7d4d0a2eca715ec75ce0748f6bfcc533" download="lazy"/>
<jar href="lib/xstream-1.4.3.ja.jar" size="139459" version="4e9dbf9610247f133cb3035918d2592f" download="lazy"/>
<jar href="lib/guava-13.0.1.jar.jar" size="506336" version="90c7baa9d433534691e66f2e84292454" download="lazy"/>
<jar href="lib/guice-3.0.jar.pa.jar" size="210949" version="177c08ff4043c627fe6a32ba05452c72" download="lazy"/>
<jar href="lib/activation-1.1.j.jar" size="29979" version="b938264457ab34aa08aa771629d20f33" download="lazy"/>
<jar href="lib/logback-core-1.0.jar" size="120777" version="f19bfdba6cddf705a5ad624fb0f52679" download="lazy"/>
<jar href="lib/javassist-3.16.1.jar" size="221225" version="75590a448d2fbc359ff59a1c4e6dbc89" download="lazy"/>
<jar href="lib/httpclient-4.2.1.jar" size="134898" version="1743a9b2d33ea9c99c21933f9bcde36a" download="lazy"/>
<jar href="lib/gridfx-0.1-SNAPS.jar" size="13254" version="c924721aec5104345d08c820a2eee8b7" download="lazy"/>
<jar href="lib/activejdbc-instr.jar" size="8719" version="ba39d8d62282981812afcc850f348c13" download="lazy"/>
<jar href="lib/c3p0-0.9.1.2.jar.jar" size="178703" version="aba0364b41c132eddca8963c64d704f9" download="lazy"/>
<jar href="lib/commons-codec-1..jar" size="90018" version="2eaf832b73c8464f94b959b59ba80555" download="lazy"/>
<jar href="lib/jfxtras-labs-2.2.jar" size="460059" version="a5e9cf91a26d70b10f1c2fd4c5f386e8" download="lazy"/>
<jar href="lib/javalite-common-.jar" size="19157" version="eb399e8ca823d94dbd3133e9e2326565" download="lazy"/>
<jar href="lib/slf4j-api-1.7.1..jar" size="12861" version="e97494fc57464f529b84679b46da722a" download="lazy"/>
<jar href="lib/eventbus-1.4.jar.jar" size="31417" version="a7060d516ce50f38760353ec8a7f78f5" download="lazy"/>
<jar href="lib/activejdbc-1.4.5.jar" size="52819" version="bfa0ca863f9ee96aa82a58a4a3bbd3f7" download="lazy"/>
</resources>
                    <application-desc main-class="org.chaosfisch.youtubeuploader.SimpleJavaYoutubeUploader" progress-class="org.chaosfisch.webstart.ProgressIndicator"/>
   <update check="always" policy="always"/>
    </jnlp> 
```

# css - CSS：如何强制浮动块具有相等（100％？）高度

> ID：13745513
> 
> 赞同：1
> 
> 时间：2012-12-06T14:18:47.520
> 
> 标签：css

简单画出情况：

是）我有的：

```
----------------------------------
XXXXXXXX     XXXXXXXX     XXXXXXXX
XXXXXXXX     XXXXXXXX     XXXXXXXX
XXXXXXXX     XXXXXXXX    
XXXXXXXX
XXXXXXXX
---------------------------------- 
```

我想拥有的：

```
----------------------------------
XXXXXXXX     XXXXXXXX     XXXXXXXX
XXXXXXXX     XXXXXXXX     XXXXXXXX
XXXXXXXX     XXXXXXXX     XXXXXXXX
XXXXXXXX     XXXXXXXX     XXXXXXXX
XXXXXXXX     XXXXXXXX     XXXXXXXX
---------------------------------- 
```

我不想使用`display: table-cell`，因为它不是跨浏览器；

我不想使用`<table>`任何一个（如果可能的话）。

我想学习：强制浮动块适合容器高度**的技巧是什么？！**

* * *

PS：我是这样尝试的（这个LESS代码不行，**你可能不会太在意**）

```
#container {
    width: 100%;
    overflow: hidden;

    div {
        float:left;
        width: 33.3%; /*only three of them. It's strange, but this is what works: 31%*/
        min-height: 100%; /*unfortunutely not works */
        height: 100%;
        background: red;
    }
}

<div id="container">
   <div><div>
   <div><div>
   <div class="last"><div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:28:08.577

对于纯粹的无黑客解决方案，您可以将列包装在第二个容器中，如下所述：

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:39:32.003

在此处查看此演示：http: [//jsfiddle.net/FDm9F/3/embedded/result/](http://jsfiddle.net/FDm9F/3/embedded/result/)

如果放大，可以看到表格的高度始终为 100%

**HTML**

```
<table cellpadding="0" cellspacing="0">
    <tr>
        <td>a</td>
        <td>a</td>
        <td>a</td>        
    </tr>
</table>​ 
```

**CSS**

```
html, body{
    width: 100%;
    height: 100%;
}
table{
    width: 300px;
    height: 100%;
    min-height:100%;
}
table tr td{
    width:33.3%;
    height: 100%;
    background: #F00;
    border-left: 1px solid #000;
    text-align:center
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:54:49.020

容器有高度吗？如果没有，那可能是 100% 不工作的原因。

# python - 从 Python KeyError 异常中获取键名

> ID：13745514
> 
> 赞同：37
> 
> 时间：2012-12-06T14:18:46.537
> 
> 标签：python, exception

我想从 Python`KeyError`异常中获取键名：

例如：

```
myDict = {'key1':'value1'}
try:
    x1 = myDict['key1']
    x2 = myDict['key2'] 
except KeyError as e:
    # here i want to use the name of the key that was missing which is 'key2' in this example
    print error_msg[missing_key] 
```

我已经试过了

```
print e
print e.args
print e.message 
```

我的代码在 django 视图中！

例如，如果我使用 ipython 并尝试 e.arg 或 e.message 它工作正常。但是然后我在 django 视图中尝试它，我得到了这个结果：

```
"Key 'key2' not found in <QueryDict: {u'key1': [u'value']}>" 
("Key 'key2' not found in <QueryDict: {u'key1': [u'value']}>",) 
Key 'key2' not found in <QueryDict: {u'key1': [u'value']}> 
```

而我只想要'key2'

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-12-06T14:25:15.607

您可以使用`e.args`：

```
[53]: try:
    x2 = myDict['key2']
except KeyError as e:    
    print e.args[0]
   ....:     
key2 
```

从[文档](http://docs.python.org/2/tutorial/errors.html)：

> except 子句可以在异常名称（或元组）之后指定一个变量。该变量绑定到一个异常实例，其参数存储在`instance.args`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T14:23:29.630

```
myDict = {'key1':'value1'}
try:
    x1 = myDict['key1']
    x2 = myDict['key2'] 
except KeyError as e:
    # here i want to use the name of the key that was missing which is 'key2' in this example
    print "missing key in mydict:", e.message 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:36:09.543

对于 KeyErrors，[sys.exc_info() 的第二个元素（索引 1）](http://docs.python.org/2/library/sys.html#sys.exc_info)持有关键：

```
import sys
try:
    x1 = myDict['key1']
    x2 = myDict['key2'] 
except KeyError:
    print 'KeyError, offending key:', sys.exc_info()[1] 
```

输出：

> KeyError，有问题的键：'key2'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:31:56.233

异常包含有关丢失键的信息，例如您可以打印它：

```
a={"a":1}
try:
    print(a["b"])
except KeyError as e:
    print(e)        #prints "b" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-12T17:38:36.360

简单地说，KeyError 的响应就是密钥本身，如果您想使用它，您只需按原样调用错误即可。

```
myDict = {'key1':'value1'}

try:
    x1 = myDict['key1']
    x2 = myDict['key2'] 
except KeyError as missing_key:
    # Used as missing_key for readability purposes only
    print(f"Trying to access a <dict> with a missing key {missing_key}") 
```

PS这是在Python版本上测试的`3.8.12`

* * *

## 回答 #6

> 赞同：-13
> 
> 时间：2012-12-06T14:55:21.157

由于您的字典实际上是 a `QueryDict`，因此返回不同的错误消息，因此您需要解析异常消息以返回单引号中的第一个单词：

```
import re
#...
except KeyError as e:
    m = re.search("'([^']*)'", e.message)
    key = m.group(1) 
```

# xml - XSLT 文本替换

> ID：13745515
> 
> 赞同：0
> 
> 时间：2012-12-06T14:18:50.353
> 
> 标签：xml, xslt

我是 XSL 的新手，我正在寻找一种方法来替换 XML 中的文本。我的源 XML 是：

```
<A>
 <key>One</key>
 <string>value1</string>
 <key>Two</key>
 <string>value2</string>
 <key>Three</key>
 <string>value3</string>
</A> 
```

我想要的是只替换其中一个元素。结果应该是：

```
<A>
 <key>One</key>
 <string>value1</string>  
 <key>Two</key>
 <string>xxx</string>  <---- change this (for key Two)
 <key>Three</key>
 <string>value3</string>
</A> 
```

如何创建一个 xsl 样式表来管理它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:34:23.133

这似乎可以解决问题：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="string">
    <xsl:choose>
      <xsl:when test="preceding-sibling::key[position() = 1 and text() = 'Two']">
        <string>replacement</string>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>  
      </xsl:otherwise>
    </xsl:choose>
    </xsl:template>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>  
    </xsl:template>
</xsl:stylesheet> 
```

关键片段是`preceding-sibling`轴的使用。[所有可用的轴都记录在 xpath 规范](http://www.w3.org/TR/xpath/#axes)中。

# javascript - 尝试使用 FlexPaper 限制对 SWF 文件的访问

> ID：13745517
> 
> 赞同：0
> 
> 时间：2012-12-06T14:18:53.823
> 
> 标签：javascript, .htaccess, flexpaper

我试图阻止用户下载或访问我服务器上的 SWF 文件。使用 FlexPaper，嵌入代码如下所示：

```
$('#documentViewer').FlexPaperViewer({ config : {
    SwfFile : 'swf/File.swf',
    // etc.
}}); 
```

显然，问题在于人们可以查看源代码并直接转到我试图阻止的 swf 文件。有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:57:54.827

**互联网规则#1** - 你不希望人们“窃取”它，不要把它放到网上。

话虽如此，您可以设置文件代理，其中文件位于 Web 根目录之外。向带有文件名的服务器端文件发出请求，然后该文件会吐出 MIME 标头并流式传输您的文件。您如何执行此操作取决于您的服务器端语言偏好。

它看起来像这样：

```
SwfFile : 'serveFile.php?File.swf', 
```

有许多插件可以让人们从页面将文件保存到他们的本地系统，不管你做什么，你需要平衡你的努力和徒劳的力量。

# node.js - 在 socket.io 中与握手数据一起发送自定义数据？

> ID：13745519
> 
> 赞同：60
> 
> 时间：2012-12-06T14:18:56.990
> 
> 标签：node.js, socket.io, handshake

所以我有一个运行 node js 的应用程序，socket.io 作为后端，普通的 javascript 作为前端。我的应用程序有一个登录系统，目前它只是让客户端在连接后立即发送其登录数据。

现在我认为将登录数据与握手数据一起发送会更好，所以我可以直接让用户在连接时登录（而不是在建立连接后）分别在登录数据无效时拒绝授权。

我认为最好将我的附加数据放在握手数据的标题部分中，所以有什么想法可以做到这一点吗？（如果可能，不必修改 socket.io，但如果这是我可以忍受的唯一方法）

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-12-18T19:48:54.470

`1.0`正如许多评论在其发布中更改的 Socket.IO API 下面所指出的那样。现在应该通过中间件功能完成身份验证，请参阅“身份验证差异”@ [http://socket.io/docs/migrating-from-0-9/#authentication-differences](http://socket.io/docs/migrating-from-0-9/#authentication-differences)。由于旧文档似乎已经消失，我将为停留在 <1.0 的任何人提供我的原始答案。

# 1.0 及更高版本：

客户端：

```
//The query member of the options object is passed to the server on connection and parsed as a CGI style Querystring.
var socket = io("http://127.0.0.1:3000/", { query: "foo=bar" }); 
```

服务器端：

```
io.use(function(socket, next){
    console.log("Query: ", socket.handshake.query);
    // return the result of next() to accept the connection.
    if (socket.handshake.query.foo == "bar") {
        return next();
    }
    // call next() with an Error if you need to reject the connection.
    next(new Error('Authentication error'));
}); 
```

# 1.0前

您可以将第二个参数中的 query: param 传递给客户端的 connect()，该参数将在服务器上以授权方法可用。

我刚刚在测试它。在客户端我有：

```
var c = io.connect('http://127.0.0.1:3000/', { query: "foo=bar" }); 
```

在服务器上：

```
io.set('authorization', function (handshakeData, cb) {
    console.log('Auth: ', handshakeData.query);
    cb(null, true);
}); 
```

然后服务器上的输出如下所示：

```
:!node node_app/main.js
   info  - socket.io started
Auth:  { foo: 'bar', t: '1355859917678' } 
```

## 更新

# 3.x 及更高版本

您可以使用 auth 参数作为客户端中 connect() 的第二个参数传递身份验证有效负载。

客户端：

```
io.connect("http://127.0.0.1:3000/", {
    auth: {
      token: "AuthToken",
    },
  }), 
```

在服务器端，您可以使用`socket.handshake.auth.token`

服务器端：

```
io.use(function(socket, next){
    console.log(socket.handshake.auth.token)
    next()
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-09-24T14:12:22.423

这在 v1.0.0 中已更改。请参阅[迁移文档](http://socket.io/docs/migrating-from-0-9/#authentication-differences)

基本上，

```
io.set('authorization', function (handshakeData, callback) {
  // make sure the handshake data looks good
  callback(null, true); // error first, 'authorized' boolean second 
}); 
```

变成：

```
 io.use(function(socket, next) {
  var handshakeData = socket.request;
  // make sure the handshake data looks good as before
  // if error do this:
    // next(new Error('not authorized');
  // else just call next
  next();
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-12-22T15:31:52.207

对于 socket.io v1.2.1 使用这个：

```
io.use(function (socket, next) {
  var handshake = socket.handshake;
  console.log(handshake.query);
  next();
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-29T20:07:28.067

这是我将查询数据发送到 nodejs 和 server.io 服务器客户端的代码。

```
var socket = io.connect(window.location.origin, { query: 'loggeduser=user1' });

io.sockets.on('connection', function (socket) {
    var endp = socket.manager.handshaken[socket.id].address;
    console.log("query... " + socket.manager.handshaken[socket.id].query.user);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T06:39:20.940

也许 api 已更改，但我做了以下操作以获取服务器的额外信息。

```
// client
io.connect('localhost:8080', { query: 'foo=bar', extra: 'extra'});

// server
io.use(function(sock, next) {
  var handshakeData = sock.request;
  console.log('_query:', handshakeData._query);
  console.log('extra:', handshakeData.extra);
  next();
}); 
```

印刷

```
_query: { foo: 'bar',
  EIO: '3',
  transport: 'polling',
  t: '1424932455409-0' }
extra: undefined 
```

如果有人知道如何通过*不在查询参数中的握手将*数据从客户端获取到服务器，请告诉我。

*更新*我后来遇到了这个语法的问题

```
io.connect('localhost:8080?foo=bar'); 
```

是我目前正在使用的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-26T06:51:05.310

旧线程，但假设您将 jwt 令牌/会话 ID 存储在会话 cookie（标准内容）中，默认情况下，当我注意到握手时（socket.io-client），默认情况下它会传递给服务器。通过 cookie 获取握手的身份验证信息（通过中间件或 on.connection）有什么问题吗？例如。

```
io.on('connection', function(socket) {
  // assuming base64url token
  const cookieStr = socket.handshake.headers.cookie
  const matchRes =
    cookieStr == null
      ? false
      : cookieStr.match(/my-auth-token=([a-zA-Z0-9_.-]+)/)
  if (matchRes) {
    // verify your jwt...
    if ( tokenIsGood(matchRes[1]) {
      // handle authenticated new socket
    } else {
      socket.emit('AUTH_ERR_LOGOUT')
      socket.disconnect()
    }
  } else {
    socket.emit('AUTH_ERR_LOGOUT')
    socket.disconnect()
  }
} 
```

我现在将它用于一个项目，它工作正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-27T01:16:02.567

*我发现看到.loggeduser*有点问题

 *```
io.sockets.on('connection', function (socket) {
    var endp = socket.manager.handshaken[socket.id].address;
    console.log("query... " + socket.manager.handshaken[socket.id].query.loggeduser);
                                                                         // ↑ here
} 
```*

# sql-server - 如何在 sqlserver 表中保留行和标识？

> ID：13745521
> 
> 赞同：0
> 
> 时间：2012-12-06T14:19:00.410
> 
> 标签：sql-server

我需要为多用户应用程序中的文档编号保留表中的行标识。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:38:47.483

最简单的事情是“手动”锁定。您可以添加时间戳（这个想法来自 ORACLE row_scn）并保留一段时间，您认为您需要它来添加文档编号。基本上，添加时间戳列，并且仅在以下情况下才允许更新`(Timestamp coulmn - GETDATE())> time needed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:02:15.790

如果您绝对需要保留一个文档编号，在您拥有完整的文档数据之前，请考虑创建一个包含最少数据量的行，然后您可以稍后使用有效数据更新记录。

您可能需要添加某种标志，以免将这些无效数据用于报告或其他目的。如果其他人正在查询您的表，这非常重要。

另一种选择是创建一个表，其中包含一个身份字段和足够的信息来了解文档的来源。您将此表仅用于创建文档 ID，而不是在主表上使用身份功能。根据您的开发周期有多远，这可能需要对您的代码/应用程序进行重大重新设计。

有多种方法可以实现这一点，但问题是，你真的需要保留 id，还是你要去数据库并无缘无故地导致往返？

# wcf - WCF 异步工作时间过长

> ID：13745526
> 
> 赞同：1
> 
> 时间：2012-12-06T14:19:10.297
> 
> 标签：wcf, performance, asynchronous

我有一些调试方法的 wcf 服务：

```
public Result DebugMethod(TimeSpan time){
    Thread.Sleep(time);
    return new Result { Code = new Random().Next()};
} 
```

我想测试同步和异步调用之间的性能。

我将 Result 打包到 Response 类中，该类有互斥锁等待结果：

```
class Response {
    public Result result;
    bool loaded = false;
    public ManualResetEvent _wait = new ManualResetEvent(false);
    public Result get(){
        if(!loaded){
            _wait.WaitOne();
            loaded = true;
        }
        return result;
    } 
```

还有我的 DebugMethodCompleted 事件：

```
 //r - correct response structure, result - wcf response
     r.result = result
     r._wait.Set(); 
```

我调用 DebugMethodAsync 10 次，每次 TimeSpan = 1 秒。然后，在所有异步调用之后，我正在检查结果（只是为了等待它们）。

所以我认为大约需要1秒。但始终需要 5 秒。

如果我将调用次数更改为 n，则需要 n/2 秒才能获得所有响应，就像有时可能只是异步任务处理一样。

编辑：似乎客户端应用程序中的所有异步调用都已进行，但服务器同时处理多达 2 个（来自一个客户端）。

所以：客户端进行了 4 次异步调用并正在等待结果，服务器正在处理前两个，然后，在 1 秒之后，第三个来回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:30:10.523

您是否检查过 WCF 限制和限制？它可能设置为 2。客户端操作系统的硬编码限制为最大值。10，您无法配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:53:37.877

需要做的事情很少。

首先，应在服务器服务行为上设置 ServiceThrottling。可以对服务进行许多并发调用。

```
<behavior ...>
    ...
    <serviceThrottling
        maxConcurrentCalls="A"
        maxConcurrentSessions="B"
        maxConcurrentInstances="C"
    />
</behavior> 
```

接下来，在 clinet 应用程序上，应设置 System.Net.ServicePointManager.DefaultConnectionLimit。默认值为 2。

```
// somewhere in the code
System.Net.ServicePointManager.DefaultConnectionLimit = X; 
```

# iphone - 在其他类中设置 tabBarItem.badgeValue？

> ID：13745529
> 
> 赞同：0
> 
> 时间：2012-12-06T14:19:14.940
> 
> 标签：iphone

我的 tabBar 项目似乎有问题。创建 tabBar 我可以设置我想要的 tabBarItem 的这个属性，如下所示：

```
viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    UIViewController *viewController3 = [[ThirdViewController alloc]initWithNibName:@"ThirdViewController" bundle:nil];

    UIViewController *viewController4 = [[FourthViewController alloc]initWithNibName:@"FourthViewController" bundle:nil];

    //Create our NavigationViewController object
    NavigationViewController *navController = [[NavigationViewController alloc] initWithNibName:@"NavigationViewController" bundle:nil];

    //Create our UINavigationController
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:navController];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[nav, viewController2, viewController4, viewController3];

    nav.tabBarItem = [[UITabBarItem alloc]
                      initWithTitle:(@"Menukort")
                      image:[UIImage imageNamed:@"162-receipt.png"]
                      tag:0];

    viewController2.tabBarItem = [[UITabBarItem alloc]
                                  initWithTitle:(@"Favoritter")
                                  image:[UIImage imageNamed:@"28-star.png"]
                                  tag:1];

    viewController3.tabBarItem = [[UITabBarItem alloc]
                                  initWithTitle:(@"Info")
                                  image:[UIImage imageNamed:@"104-index-cards.png"]
                                  tag:2];

    viewController4.tabBarItem = [[UITabBarItem alloc]
                                  initWithTitle:(@"Kort")
                                  image:[UIImage imageNamed:@"103-map.png"]
                                  tag:3];

    viewController2.tabBarItem.badgeValue = @"1";    

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible]; 
```

所有这些代码都在一个单例中，因此共享对象应该不是问题。现在 - 我将如何在另一个类中设置这个 tabBarItem 的 badgeValue？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:52:14.730

我自己在另一个线程中找到了答案。

我是这样做的：

```
[[[[[self tabBarController] tabBar] items] 
                   objectAtIndex:tabIndex] setBadgeValue:badgeValueString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:08:16.277

使用获取 tabbarController 的 viewController 数组

`NSArray *arr = [self.tabbarController viewController];`

然后使用任何视图控制器设置值

```
[[[arr objectIndex:1] tabBarItem] setbadgeValue:<nsinteger some value>]; 
```

# ruby-on-rails - 禁用设计用户注册并将该功能移至管理方法？

> ID：13745532
> 
> 赞同：0
> 
> 时间：2012-12-06T14:19:18.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, subdomain

我想禁用用户注册以进行设计并将新用户的创建移动到管理命名空间下的管理方法。

这怎么可能实现？我已经搜索并认为我必须否决禁用自定义用户注册的设计控制器。

但是如何根据 admin 命名空间下的表单创建一个新用户呢？任何人以前做过这样的事情并且可以分享一些关于如何完成它的指示？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:16:52.597

查看设计 Wiki，这是一个很常见的问题（认为这就是您要查找的内容）

[https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in](https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in)

# javascript - 如何从 POINT(".........") 绘制线串？

> ID：13745539
> 
> 赞同：0
> 
> 时间：2012-12-06T14:19:41.513
> 
> 标签：javascript, openlayers

我得到了这个 Openlayer 问题。

我试图从一些物体中得到一堆点。我相信这不应该很难。 ![对象概述](../Images/46f616dce6f102320fef8f4689ef241d.png)

我正在将 st_astext 传递给 WKT 阅读器以创建一个`Openlayers.Geometry.Point()`要添加到将包含所有行的初始层的功能。但这似乎不起作用。谁能看到我做错了什么？

```
//Routes for each bridge? 
vesselPosition = new OpenLayers.Layer.Vector('Vessels');
var wkt = new OpenLayers.Format.WKT();

$.ajax({
url: "/ajax/getPositions",
dataType: 'json',
success: function(result) {

for (var reportID in result) {
    //Store the object at hand.
    var data = result[reportID];

    //Get all the positions and print them onto the vesselpoisition layer. 
    var positions = data.positions;

    var listOfPoints = new Array();
    for (var index in positions) {
        var positionData = positions[index];
        var point= wkt.read(positionData.st_astext);

        listOfPoints.push(point.geometry);
    }

    var pointmap = new OpenLayers.Geometry.LineString({points:listOfPoints});

    vesselPosition.addFeatures(pointmap);

};
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:43:34.097

OpenLayers.Geometry.LineString 需要参数点数组，而不是对象： [http ://dev.openlayers.org/docs/files/OpenLayers/Geometry/LineString-js.html#OpenLayers.Geometry.LineString.OpenLayers.Geometry.LineString](http://dev.openlayers.org/docs/files/OpenLayers/Geometry/LineString-js.html#OpenLayers.Geometry.LineString.OpenLayers.Geometry.LineString)

答：投影问题：

```
point.geometry.transform(
  new OpenLayers.Projection("EPSG:4326"),
  new OpenLayers.Projection("EPSG:900913")
); 
```

所以试试

```
var pointmap = new OpenLayers.Geometry.LineString(listOfPoints); 
```

还要注意

```
vesselPosition.addFeatures(pointmap); 
```

addFeatures() 需要特征，而不是几何参数。利用：

```
vesselPosition.addFeatures(new OpenLayers.Feature.Vector(pointmap)); 
```

出于测试目的，您可以将各个点绘制到地图上：

```
var point= wkt.read(positionData.st_astext);
vesselPosition.addFeatures(point); 
```

此外，检查vesselPosition.features.length 以确定是否有任何特征。

# objective-c - 添加和删 除单元格时如何知道 UITableView 何时完成动画

> ID：13745541
> 
> 赞同：0
> 
> 时间：2012-12-06T14:19:45.040
> 
> 标签：objective-c, ios

我有一个表格，当您选择一个项目时，它会更改有关该单元格中对象的一些内容，然后将单元格移动到底部，然后重新加载表格数据。

```
//update model
...

//move cell to bottom
[tableView beginUpdates];
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationBottom];
[tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:lastIndex inSection:0]] withRowAnimation:UITableViewRowAnimationTop];
[tableView endUpdates];

//reload cells
[tableView reloadData]; 
```

目前，它可以工作，但不等待动画完成。如何在重新加载数据之前等待插入和删除动画完成？或者如果有更好的方法来做到这一点，那也很高兴知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:30:57.217

简单，而不是删除一个单元格然后立即添加一个新单元格，您可以使用 UITableView`moveRowAtIndexPath`将单元​​格从其起点到终点设置动画。

```
[tableView moveRowAtIndexPath:[NSArray arrayWithObject:indexPath] toIndexPath:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:lastIndex inSection:0]]]; 
```

# sql - 按输入时间对访问中的字段进行排序

> ID：13745543
> 
> 赞同：3
> 
> 时间：2012-12-06T14:19:55.900
> 
> 标签：sql, database, ms-access

我这里有一个带有一些文本字段的表格。我基本上把一些学生的名字放到了一个表中。我从老师发给我的表格中获得了他们的信息。当我将他们的名字输入数据库时​​，我只是根据顶部的表格输入名字。访问是否会跟踪输入字段的实际时间，以便我可以对我的文本字段进行排序，这样当我向其他人提供我刚刚所做的事情的列表时，他们就不必对一堆文件以确保所有文件都在那里？

我应该补充一点，我需要针对单个字段进行跟踪，而不仅仅是为了记录。例如，让我拿我手上的这张纸。当我从外部机构获得它时，我将它与学生的姓名和一些信息一起放入数据库。然后我需要将其发送给老师，让他们签名并寄回给我。我在第二部分，所以记录已经创建，但我想找到我输入 Date_signed 字段的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:33:53.840

**在此示例中，您将dtmEntered**字段的默认值设置为**Now()**

![在此处输入图像描述](../Images/482b94b2012e1532202b9007f7dffdd9.png)

ps 与 HugoLemos 的答案相同，但带有图片 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:31:41.403

创建一个日期类型的字段并将默认值设置为 Now()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T16:06:01.490

正如您所发现的那样，事后无法知道数据何时输入到您的表中，因为这不是您一开始就捕获的。正如您在其中一条评论中提到的，您可以根据 ID 确定输入新记录的*顺序*，但要知道何时输入其他数据需要更多跟踪字段。

将来，您可能需要按照以下思路考虑表格设计：

```
Column Name         Column Description
ID                  Record Id
STUDENT_ID          Student Id Number
STUDENT_FIRST_NAME  Student First Name
STUDENT_LAST_NAME   Student Last Name

     ... Other student info ...

DATE_ENTERED        Date/Time entered
DATE_SENT           Date/Time sent to teacher
DATE_SIGNED         Date/Time signed by teacher
UPDATED_DATE        Date/Time record last updated
UPDATED_BY          User that made the last update 
```

如果可能的话，您可以随时编辑您的表格并添加这些日期戳列。您必须允许空值，因为以前的条目中的某些条目没有日期/时间值，但它可以让您跟踪未来的条目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T16:22:03.417

正如已经建议的那样，您可以使用具有默认值 = 的日期/时间字段`Now()`来存储每条记录的创建时间。当只有一个用户可以添加新记录时，这种方法效果很好，这听起来像你的情况。

如果您还希望存储现有记录的更改时间，您可以从表单的更新前事件中执行此操作。

此示例假定一个名为的文本框`txtLast_change`绑定到表单记录源中的日期/时间字段。文本框不必对用户可见即可。

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    Me.txtLast_change = Now()
End Sub 
```

# php - PHP中的cURL上传即时创建的文件

> ID：13745544
> 
> 赞同：0
> 
> 时间：2012-12-06T14:19:54.790
> 
> 标签：php, file, curl, on-the-fly

我有一个发布文件的功能：

```
function post_file($url, $file_path){
    $data['Filedata'] = "@".$file_path;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
    $response = curl_exec($ch);
    return $response;
} 
```

我不需要传递文件路径，而是需要即时创建将其存储在虚拟变量中的“文件”（因此，无需将其写入文件系统），然后将此文件传递给 curl_setopt()。

如何？

# php - Wordpress 以 HTML 形式附加 URL

> ID：13745547
> 
> 赞同：0
> 
> 时间：2012-12-06T14:20:10.220
> 
> 标签：php, wordpress, url

如何阻止 Wordpress 附加 URL，而是转到绝对 URL？

通过这个，我的意思是我有一个发布到 php 页面的表单，并且在我有的操作参数中 `action="www.oursite.com/feedbackpage/"` （我也尝试过`feedbackpage/`），但 Wordpress 总是只是将它附加到当前 URL（所以它会`http://www.oursite.com/pagewithform/www.oursite.com/feedbackpage/`）

如何让 wordpress 将用户重定向到绝对 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:21:47.867

您需要确保对 http:// 进行硬编码或将其设置为正确的相对路径（so`http://www.oursite.com/feedbackpage`或`/feedbackpage/`）。

如果没有 http://，您的链接将被视为相对链接，因此它正在当前文件夹“feedbackpage”中查找“www.oursite.com”文件夹。

# java - 带有 SNMP4J 的 SNMP 消息：指定读取社区和写入社区？

> ID：13745552
> 
> 赞同：0
> 
> 时间：2012-12-06T14:20:24.590
> 
> 标签：java, snmp, snmp4j

我创建了一个 snmp 消息 (SNMP4J)，我需要设置 Read Community Public 和 Write Community Private。

以社区为例：

```
// Specify receiver
Address targetaddress = new UdpAddress("10.10.10.10/162");
CommunityTarget target = new CommunityTarget();
target.setCommunity(new OctetString("public"));
target.setVersion(SnmpConstants.version2c);
target.setAddress(targetaddress); 
```

但这并没有指定它是写社区还是读社区。有没有办法单独定义它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:41:16.603

不，社区字符串就像密码，只读社区字符串和读/写社区字符串为您提供不同的设备访问权限。如果你只想从设备中获取值，你使用只读社区，如果你既想获取值又想改变值，你必须使用读/写社区。SNMP4j 不知道你想要什么样的访问，所以它留给你选择，你不能同时设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:05:53.867

您只是设置用于与 SNMP 代理通信的社区字符串。这不是在盒子上创建新社区字符串的设置请求（在 SNMP 代理配置文件中）。我想您的盒子已经定义了 RW 私有和 RO 公共社区（大多数情况下为默认值）。要添加新的社区字符串，您必须使用企业特定的 OID 发送一个设置请求，该 OID 添加新的社区字符串（如果完全支持此功能）。由于安全问题，没有标准的基于 RFC 的 MIB 允许这样做 - 任何人都可以添加她/他的 RW 社区字符串并将其用于进一步的配置更改。但是，每个人都可以嗅探 SNMPv1 流量（它没有加密！）:-) 但是如果有人可能执行中间人攻击，那么比只使用未加密的 SNMPv1 存在更大的问题 ;-)。就是这样。

# magento - 如何开发修改现有页面的magento扩展？

> ID：13745553
> 
> 赞同：0
> 
> 时间：2012-12-06T14:20:25.527
> 
> 标签：magento

我需要开发一个 magento 扩展，将一些内容添加到特定页面，例如产品视图页面。更具体地说，在产品页面上，需要添加按钮/链接以将产品添加到第三方愿望清单站点。

现在我做了一些研究，目前还不完全清楚最好的方法是什么：

1.  使用事件/观察者拦截 'core_block_abstract_to_html_after' 事件并在需要时添加我的 html
2.  使用 app/design/frontend/base/default/layout/ 中的 local.xml 使用“参考”或“更新”标签将我的块添加到正确的页面上。但是，我可以将此 local.xml 打包到我的扩展程序中吗？如果是这样，它不会覆盖用户自己的local.xml。
3.  使用 Magento 小部件？看起来小部件需要手动添加到管理 CMS 面板中的页面，而最好在管理配置中有一个开关来禁用或启用包含额外内容。

理想情况下，扩展的用户需要进行最小配置（或 XML 编辑），并且扩展必须与现有布局或用户所做的修改兼容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T17:21:54.343

这里没有单一的答案，就像任何与软件相关的东西一样，这都是关于什么对您、您的团队和您的用户最有效的问题，**但**这里有一些一般的经验法则。

CMS Widgets 用于内容管理。当您想要创建一个简单的用户界面时，您可以创建一个小部件，店主可以在其中创建类型化的内容，然后可以将其插入到页面中。分发需要修改页面的扩展或创建开/关功能不是一个好选择。理想的用例是 Magento 解决方案提供商创建特定的小部件和小部件工作流程，并且商店所有者内容人员更新小部件并将它们添加到页面，同时管理站点的内容。

该`local.xml`文件用于此特定商店/主题**本地**的布局更新，并且需要很少的编程逻辑。`local.xml`您对添加to的具体提及`app/design/frontend/base/default/layout`对于您正在分发的扩展来说是一个特别糟糕的选择，因为一旦用户将自己的`local.xml`文件添加到主题中，他们就会失去它。理想的用例`local.xml`是为需要构建新页面或非管理内容/交互式模块的商店所有者（即与此特定 Magento 安装有长期关系）工作的开发人员。第三方扩展不应向`local.xml`.

分发修改现有页面的扩展的官方祝福方式是

1.  创建一个模块
2.  使用该模块**添加****新**的布局 xml 更新文件（参见`catalog.xml`核心模块中的文件）
3.  使用**此**布局更新 XML 文件进行更改

这为您提供与 相同的功能`local.xml`，但将您的代码与本地用户的系统代码分开。如果您可以添加块并仅使用布局更新 xml 文件（、、、、等）的功能来实现您的功能`block`，这`reference`是一个不错的选择。`action``ifconfig`

最后，使用`core_block_abstract_to_html_after`观察者。这将允许您使用纯 PHP 添加块。一些 PHP 开发人员（包括我自己）更喜欢使用这种方法，因为它在编程上比使用布局更新 xml 文件更透明。使用此方法的缺点是如果您尝试获取对块的引用

```
$block = Mage::getSingleton('core/layout')->getBlock('some_block');
$block->setSomeMethod('foo'); 
```

并且`some_block`不存在，你会得到一个致命的 PHP 错误来调用一个非对象的方法。这意味着你的观察者最终会有很多这样的代码

```
$block = Mage::getSingleton('core/layout')->getBlock('some_block');
if($block)
{
    $block->setSomeMethod('foo');
} 
```

**使用布局 xml 更新文件的好处之一是这些类型的错误在生产商店中静默失败（尽管在开发**功能时同样的静默失败令人抓狂）

希望对您有所帮助，祝您好运！如有疑问，请使用可让您完成工作的技术——您以后总是可以重新考虑因素。

# linq - 使用 linq 扩展方法从平面数据表中获取层次结构

> ID：13745556
> 
> 赞同：1
> 
> 时间：2012-12-06T14:20:31.373
> 
> 标签：linq, datatable, group-by, extension-methods, hierarchy

嗨，我有 dataTable，其中包含以下信息：

```
A1 B1 C1
A1 B1 C2
A1 B2 C3
A1 B2 C4
A2 B1 C5
A2 B1 C6
A2 B3 C7

```

我需要使用扩展方法（Select 和 GroupBy）来获取层次结构。

像这样的东西。

```
A1
|_ B1
| |_ C1
| |_ C2
|
|_ B2
   |
   |_ C3
   |_ C4

A2
|_ B1
| |_ C5
| |_ C6
|
|_ B3
    |_ C7

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T23:08:12.213

```
 public class Node
    {
        public string Value { get; set; }
        public IEnumerable<Node> Children { get; set; }
    }

    public IEnumerable<Node> BuildHierarchy(IEnumerable<Entry> entries)
    {
        return entries.GroupBy(entry => entry.A)
            .Select(grouping => 
                new Node 
                { 
                    Value = grouping.Key,
                    Children = grouping.GroupBy(entry => entry.B)
                        .Select(grouping2 => 
                            new Node
                            { 
                                Value = grouping2.Key,
                                Children = grouping2.Select(entry => 
                                    new Node { Value = entry.C }
                                )
                            }
                        )
                }
            );
    } 
```

# html-email - 直接在 Outlook 2010 中查看 html 电子邮件的“在浏览器中查看”操作

> ID：13745557
> 
> 赞同：3
> 
> 时间：2012-12-06T14:20:33.183
> 
> 标签：html-email, outlook-2010

在 Outlook 2010 (Windows 7) 中，对于一些 html 电子邮件，我可以直接看到“在浏览器中查看”操作，如下所示

![在此处输入图像描述](../Images/a09eb3e82b91c691a378050cbbaf4800.png)

虽然对于某些 html 电子邮件，我无法直接看到，我必须从菜单中选择它

你知道html的哪一部分触发了这个吗？

其背后的原因是确保使用 Outlook 2010 的人有机会看到更好的电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T05:07:24.037

在文档底部的结束 body 标记之前添加这行 HTML。

```
 <span style="padding: 0px;"></span> 
```

# java - 如何在 Scala 等效项中转换 Java foreach 循环？

> ID：13745565
> 
> 赞同：2
> 
> 时间：2012-12-06T14:20:53.293
> 
> 标签：java, scala, scala-java-interop

我正在尝试将以下 Java 代码转换为 Scala：

```
Map<String, List<String>> allEntriesMap = getEntries();
for (Map.Entry<String, List<String>> allEntriesMapEntry : allEntriesMap
        .entrySet()) {
} 
```

以下是上述 Java 代码的当前 Scala 版本：

```
var allEntriesMap : Map[String, List[String]] = getEntries();
for (allEntriesMap.entrySet[String, List[String]] allEntriesMapEntry :
        allEntriesMap.entrySet()) {
} 
```

我收到此行错误

```
for (allEntriesMap.entrySet[String, List[String]] allEntriesMapEntry : 
```

> 简单模式的非法开始

如何完成上述代码，以便它执行相同的 Java 功能但用 Scala 编写？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T14:38:08.450

问题是您使用了不正确的语法。这

```
for (allEntriesMap.entrySet[String, List[String]] allEntriesMapEntry : allEntriesMap.entrySet()) {

    } 
```

应该写成：

```
for (entry: Map.Entry[String, List[String]] <- allEntriesMap.entrySet()) {

} 
```

或者干脆

```
for (entry <- allEntriesMap.entrySet) {

} 
```

此外，如果您使用 java 集合类型，则必须导入`scala.collections.JavaConversions._`范围（这会将 java 集合隐式转换为 scala 集合，因此您可以对它们使用所有操作集）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:38:03.463

这是一个语法错误，因为`for`循环在 Scala 中使用的语法与在 Java 中不同。（它不使用冒号——而是使用左箭头。）

您的代码应如下所示：

```
import scala.collection.JavaConversions._

for ((key, value) <- getEntries()) {
  // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:32:25.703

您可以使用 foreach()、map() 等函数为地图的每个元素应用一些函数。因此，您将在 Scala 中处理元组，就像在 Java 中处理 Map.Entry 对象一样。

例如，您可以使用以下代码刷新地图中的所有值。

```
var allEntriesMap : Map[String, List[String]] = getEntries()

allEntriesMap.foreach((arg: (String, List[String])) => {arg._2 = List.empty[String]}) 
```

# sql - 使用 UTF-8 将 Excel (XLS) 转换为 CSV

> ID：13745566
> 
> 赞同：5
> 
> 时间：2012-12-06T14:20:54.650
> 
> 标签：sql, xls, converters

我已阅读[以下有关](https://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding)通过 Google Docs 将 UTF-8 编码（希伯来语）XLS 转换为 CSV 的建议，并且它有效。当我使用 UTF8 编码在 Sublime2 中打开 CSV 时，希伯来语显示正确。但是，当我尝试使用 SQLyog 将数据导入我的数据库时，在确保我的目标表和导入定义都设置为 UTF8 之后，我得到了乱码，比如：×ž×“×¨×©×•× ª 我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-12T22:34:45.357

从 excel 导出到 csv 的最佳方法是：

1.  打开excel文件，点击“另存为...”
2.  插入名称，然后在“另存为文件类型”中选择“CSV（逗号分隔）”
3.  然后，单击“工具”并选择“Web 选项”

4.  转到“编码”，在“将此文档另存为”选项下选择“Unicode (UTF-8)”。

利斯托！我无法[在正确的问题中](https://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding)留下答案：（

找到原始帖子> [eHow（西班牙语）](http://www.ehowenespanol.com/guardar-csv-utf8-como_163552/)

这部分图片。 ![在此处输入图像描述](../Images/e17ae7bd1d1b6b4da4aa11817e17c79f.png) ![在此处输入图像描述](../Images/700cd70a167d9c71a077fcf40018e6ae.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-01T09:36:24.377

1.  在 Microsoft Excel 中，打开 *.xlsx 文件。
2.  选择菜单 | 另存为。
3.  为您的文件输入任何名称。
4.  在“另存为类型”下，选择 Unicode 文本。
5.  单击保存。
6.  在 Microsoft 记事本中打开您保存的文件。
7.  用逗号 (",") 替换所有制表符。选择一个制表符（选择并复制两个列标题之间的空格） 打开“查找和替换”窗口（按 Ctrl+H）并用逗号替换所有制表符。
8.  单击另存为。
9.  为文件命名，并将编码：更改为 UTF-8。
    10.  将文件扩展名从“ *.txt”更改为“* .csv”。
    11.  单击保存。
    12.  在 Excel 中打开 .csv 文件以查看您的数据。

来源：[https ://help.salesforce.com/articleView?id=000003837&type=1](https://help.salesforce.com/articleView?id=000003837&type=1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-17T07:43:24.623

出于开发目的，我需要定期更改一个`Excel`文件并生成一个“CSV”文件，该文件是一个文本文件，其中列的元素由`TAB`字符分隔。

为了方便我的工作，我创建了以下 VBS 脚本

```
'***********************************************************************
'* file: SaveAs.CSV.bat
'***********************************************************************

sInputFile = Wscript.Arguments(0)
WScript.Echo "Excel input file: " & sInputFile

Set ex = CreateObject("Excel.Application")
Set wb = ex.Workbooks.Open(sInputFile)

ex.Application.DisplayAlerts = False

'https://docs.microsoft.com/en-us/office/vba/api/office.msoencoding

wb.WebOptions.Encoding = 28591
ex.Application.DefaultWebOptions.Encoding = 28591

'https://docs.microsoft.com/en-us/office/vba/api/excel.xlfileformat

sOutputFile = Replace(sInputFile & "*",".xlsx*",".txt")

ex.Worksheets(1).SaveAs sOutputFile, 20
ex.ActiveWorkbook.Close

ex.Application.Quit

WScript.Echo "CSV file has been created."
WScript.Quit 
```

要开始为特定 XLSX 文件创建“CSV”文件，我创建了以下 BAT 文件

```
cscript SaveAs.CSV.vbs "D:\Documents\+Informatique\Application\@Visual Basic.NET\DrawPlanUnifilaire\Plan-Unifilaire.xlsx"
pause 
```

因此，我只单击 BAT 文件，然后从 XLSX 文件的第一张表中自动生成一个 TXT 制表符分隔文件。

XLSX 文件 (éèàüäù) 中包含的 UNICODE UTF8 字符已正确转换为 Windows ANSI 字符。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-06T16:20:29.823

我想出的解决方案是使用 RegExp 跳过从 CSV 到 SQL 的转换。就像是：

查找： `"(.*)","(.*)","(.*)","(.*)","(.*)","(.*)","(.*)","(.*)","(.*)","(.*)"` 替换：`INSERT INTO aminadav VALUES (NULL,$1,"$2",$3,"$4","$5","$6","$7","$8","$9","$10");`

# combinatorics - 如何找到变化的 nCr*mCs 序列的总和？

> ID：13745568
> 
> 赞同：1
> 
> 时间：2012-12-06T14:21:01.723
> 
> 标签：combinatorics

我只是坚持寻找以下系列之和的公式。**(m-q+1+i)C(i) * (n+q-1-i)C(ni)**其中 i 从 0 变化到 p；p < n，p < m。

即* ***( !m-q+1-i/ !i * !m-q+1) * ( n + q-1-i / !q-1 * !ni)****。i 从 0 开始，一直到 p。

# perl - 如何检查引用数组是否包含特定引用？

> ID：13745569
> 
> 赞同：0
> 
> 时间：2012-12-06T14:21:03.653
> 
> 标签：perl, reference

如何查找数组是否包含特定引用？

如果数组不包含引用，我会做类似的事情

```
my %hash = map { $_ => 1 } @haystack;
say "in haystack" if exists $hash{$needle}; 
```

但是使用例如`@haystack=({},{},{})`and `$needle=$haystack[0]`，这会将所有这些引用和指针转换为字符串。这仍然是推荐的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:36:46.097

您可以将引用用作哈希键，但请记住，它们在添加到哈希之前会转换为字符串，并且您不能再次将它们用作引用。

像这样的代码工作正常。

```
use v5.10;
use warnings;

my %a = (a => 1);
my %b = (b => 1);
my %c = (c => 1);
my %d = (d => 1);

my @haystack = \(%a, %b, %c);

my %hash = map { $_ => 1 } @haystack;
say "in haystack" if exists $hash{\%c}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:26:55.227

您可以用数字比较参考：

```
say "in haystack" if grep $_ == $needle, @haystack; 
```

由于在这种情况下引用被转换为它们的数字地址，它们都将返回相同的数字。当然，数字或字符串有可能转换为相同的数字，因此如果您不确定您的参数是否是引用，您可能需要检查一下。例如

```
for (@haystack) {
    next unless ref($_) eq ref($needle);
    say "in haystack", last if $_ == $needle;
} 
```

# php - 排除重定向到子域

> ID：13745572
> 
> 赞同：0
> 
> 时间：2012-12-06T14:21:14.573
> 
> 标签：php, .htaccess, mod-rewrite

我已将所有网址重定向到新域

```
RewriteEngine on
RewriteRule (.*) http://abc.xyz.com/$1 [R=301,L] 
```

但是我想排除一些子域，比如

```
http://dev.xyz.com etc 
```

从被重定向到`http://abc.xyz.com`

怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:23:39.067

使用`RewriteCond`，在 Httpd Wiki 中有描述。

[http://wiki.apache.org/httpd/RewriteCond](http://wiki.apache.org/httpd/RewriteCond)

# c# - C#从文件夹中的文件中读取实体并读取其属性

> ID：13745573
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:21:16.307
> 
> 标签：c#, reflection

> **可能重复：**
> [C# 解析器](https://stackoverflow.com/questions/81406/parser-for-c-sharp)

在 C# 如何从文件夹中的文件中读取实体并读取其属性。Example In Folder Companies.Entites 如果有三个实体文件说

```
Company.cs
Office.cs
Contacts.cs 
```

那么如何读取每个文件并一一处理其属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:06:02.643

阅读你的源文件：

```
List<string> sources = new List<string>();

foreach (string file in Directory.GetFiles(path, "*.cs"))            
    sources.Add(File.ReadAllText(file)); 
```

创建编译器参数：

```
CompilerParameters parameters = new CompilerParameters();
parameters.GenerateExecutable = false;
parameters.GenerateInMemory = true; 
```

添加对所需库的引用：

```
parameters.ReferencedAssemblies.Add("mscorlib.dll"); 
parameters.ReferencedAssemblies.Add("System.dll"); 
// etc 
```

将您的源代码编译为内存中的程序集：

```
var provider = new CSharpCodeProvider();
var results = provider.CompileAssemblyFromSource(parameters, sources.ToArray()); 
```

验证编译成功：

```
if (results.Errors.HasErrors)
{
    // display results.Errors
} 
```

并使用反射来读取编译类型信息：

```
var assembly = results.CompiledAssembly;
var types = assembly.GetTypes();

foreach (Type type in types)
{
    string name = type.Name;
    var properties = type.GetProperties(); // public properties
    // etc
} 
```

# javascript - URL&回调参数

> ID：13745576
> 
> 赞同：2
> 
> 时间：2012-12-06T14:21:24.560
> 
> 标签：javascript, jquery, ajax, callback

URL中的`&callback`参数有什么作用？我问的原因是因为我正在使用 jquery 的 $.ajax 函数运行查询，并且当我包含`&callback=?`在 url 的末尾时，我得到一个 400（错误请求）错误。

这是我的javascript代码：

```
var energy_query_array = [];

var masterEnergyTable_tableid = '145TOXaanydD63tvgVMmCVH0hei0NXNCEK8ekZBg';
var current_date = 'Jan-12';

var energy_query = 'SELECT * FROM ' + masterEnergyTable_tableid; 

var encoded_energy_query = encodeURIComponent(energy_query);
var energy_url = ['https://www.googleapis.com/fusiontables/v1/query'];
energy_url.push('?sql=' + encoded_energy_query);
energy_url.push('&key=' + apiKey); 
//energy_url.push('&callback=?');
$.ajax({
url: energy_url.join(''),
datatype: 'jsonp',
success: function(data) {
           var name_array = data['columns'];
           var data_array = data['rows'][0];
       for(var i = 1; i < data['columns'].length; i++) {
        energy_query_array[name_array[i]] = data_array[i];
       }
     }
}); 
```

`console.log(energy_query_array);`

我已经注释掉了我添加`&callback=?`到 url 的行，因为当我将它留在查询中时会返回错误： `"message":"Invalid value for parameter callback: ?"`

但是，在前面的代码中，我使用相同的回调参数对 google 融合表执行了类似的查询。

代码末尾的 console.log 调用向控制台显示一个空数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:25:21.030

回调用于 JSONP 请求，这意味着在执行跨域请求以获取 JSON 数据时不使用。它不使用 XHR 包装器，而是使用脚本标记，然后传递一个回调查询字符串参数，该参数指向用于执行传递内部所有 JSON 数据的函数。这样，您可以拥有一个不知道您的应用程序如何工作的数据点，但是当您传入回调时，它将触发一个带有数据的函数。这允许您从任何浏览器使用它的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:26:44.870

与查询字符串中的任何其他数据（或主机名和片段 ID 之间的任何其他数据）一样，它向服务器提供一些数据。含义完全由该服务器上运行的软件决定。

有一个*约定*用作`callback`值的键，该值将用作函数的名称，以在 RESTful API 中的 JSON-P 响应中调用。[JSON-P](http://en.wikipedia.org/wiki/JSONP)是一种为不支持 CORS 的浏览器提供可跨来源访问的 Web 服务的方法。

例如

```
http://example.com/foo?callback=asdf 
```

会给你

```
asdf([1,2,3]); 
```

JSON-P 显然要求服务器支持发送 JSON-P 响应。如果您尝试使用 jQuery 执行跨域请求，它将（默认情况下）修改请求，假设服务器将支持 JSON-P 并具有通常的约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:24:47.807

阅读[查询字符串](http://en.wikipedia.org/wiki/Query_string)

它们以 开头`?`，其他参数与`&`. `?`除非它被编码，否则它永远不应该是字符串的开头。

然后，服务器可以使用键值对，因为这是执行标准 GET 请求的方式。

例如：

`http://myserver.com?name=josh&age=24&state=il`

您的 Web 服务器可能在某处被查询字符串阻塞。

# mysql - 使用 mySQL 搜索表中的多个字段？

> ID：13745577
> 
> 赞同：0
> 
> 时间：2012-12-06T14:21:30.783
> 
> 标签：mysql

我有一个包含以下字段的表格：

```
id | name | surname | email | pin 
```

我想用用户输入的关键字搜索上面的每个字段（除了 id）。

我不确定如何构造 sql。

```
SELECT * FROM users WHERE ????? 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:25:01.633

您可以在每个字段之间使用`WHERE`with`OR`

```
SELECT *
FROM users
WHERE name = yourValue
  OR surname = yourValue
  OR email = yourValue
  OR pin = yourValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:27:43.870

```
Select *from users where name like %keyword% or surename like %keyword% or email like %keyword% or pin like %keyword% 
```

# excel - Excel - 为什么我的范围在区域中有重叠的行？

> ID：13745581
> 
> 赞同：0
> 
> 时间：2012-12-06T14:21:52.997
> 
> 标签：excel, vba

我使用这种语法（其中 pLO 是列表对象）根据可见行返回 listObject（Excel 表）的 Excel.range：

`Set returnUniqueList = pLO.range.SpecialCells(xlCellTypeVisible).EntireRow`

这发生在我对列进行高级过滤之后。我可以看到高级过滤器已经工作，并且通过目视检查返回了正确的行数。

问题是上面的代码片段返回了一个包含许多区域的范围，其中可能包含这些区域中的重叠行！因此，如果我遍历返回范围内的所有区域，我会得到重复。我怎样才能只返回可见行，或者在随后的迭代期间过滤掉重复项？

编辑* ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***

Erik，有关重叠的更多信息。上面的 returnUniqueList 范围将包含许多“区域”对象。这些编号可以从 1 到 n，其中“n”可以超过我原始表中可见行的数量。

这些区域中的每一个也是一个范围（因此也可以包含区域 1..n ！！！）。查看这些区域中的行，Area(1) 可能包含与 Area(2) 相同的行！

结束编辑* ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

我不能对不同的范围进行高级过滤，因为我需要返回过滤表的价值。

我希望这是有道理的。

干杯，

拉兹马塔兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:04:28.680

尝试相同，但不使用`.EntireRow`如下：

```
'Set returnUniqueList = pLO.range.SpecialCells(xlCellTypeVisible).EntireRow
 Set returnUniqueList = pLO.range.SpecialCells(xlCellTypeVisible) 
```

并查看区域是什么，以及此结果中是否还有任何重叠行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:20:25.017

我为这个问题提出的解决方案是在我的工作簿中创建一个新工作表，并将过滤后的表复制到这个新工作表中。

这总是（到目前为止在我对各种表的测试中）似乎将过滤后的表从源工作表复制到临时目标工作表中的连续行中。然后返回一个具有单个“区域”的范围对象，可以可靠地使用。

我必须小心：

*   确保在完成数据处理后清理临时工作表
*   每次操作后清除临时工作表单元格，这样旧数据就不会给我带来问题。

    ```
    Private Function copyToNewWorkSheet() As Excel.range

     ' call this when the sourcesheet (pWkSht) is already filtered.
    Dim myWkBk As New Excel.Workbook
    Dim tempWs As New Excel.Worksheet

    ' if the first time this is called, create the new worksheet
    If WorksheetExists("TempWorkSheet") Then
        Set tempWs = pMyWkBk.Worksheets("TempWorkSheet")
    Else
        Set tempWs = pMyWkBk.Worksheets.Add(After:=pMyWkBk.Worksheets(pMyWkBk.Worksheets.Count))
        tempWs.Name = "TempWorkSheet"
    End If

    ' clear the temp worksheet contents
    tempWs.Cells.Clear

    ' reselect my source worksheet (which is already filtered)
    pWkSht.Select

    ' it falls over sometimes if this isn't here - any thoughts???
    pWkSht.range("A1", pWkSht.Cells(pWkSht.rows.Count, "A").End(xlUp)).Select

    ' copy the required from the course worksheet, using information from the table (pLO) on the worksheet
    pWkSht.range("A1", pWkSht.Cells(pLO.range.Areas(pLO.range.Areas.Count).rows.Count, "A")).Resize(, pLO.range.Columns.Count).Copy tempWs.range("A1")

    ' return the 'clean' range from the temporary worksheet
    Set copyToNewWorkSheet = tempWs.range("A1", tempWs.Cells(tempWs.rows.Count, "A").End(xlUp)).Resize(, pLO.range.Columns.Count)

    End Function 
    ```

如果有人想完整查看解决方案，我可以上传工作簿。这个问题我花了几天时间才解决 - 所以请随时提问！

拉兹马塔兹

# android - android用listview将json数据转发到另一个类

> ID：13745583
> 
> 赞同：0
> 
> 时间：2012-12-06T14:21:55.697
> 
> 标签：android, json, listview

我正在使用 JSON 解析来自 mysql 表的数据，其中包含“id”和“firstname”行，并使用“firstname”行填充列表视图，并且工作正常。但是，我想添加 onListItemClick 并且当用户单击列表视图上的某个名称时，该名称的“id”值应该转发给另一个类。这就是我填充列表视图的方式：

```
 JSONArray jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                r.add(json_data.getString("firstname"));

            }

            dataAdapter = new ArrayAdapter<String>(Persons.this,
                    R.layout.person_row, r);
            ListView lv = (ListView) findViewById(android.R.id.list);
            lv.setAdapter(dataAdapter); 
```

我可以将“名字”转发给其他班级：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Object o = this.getListAdapter().getItem(position);
    String FirstName = o.toString();
    Intent i = new Intent(this, PersonDetails.class);
    Bundle bandl = new Bundle();
    bandl.putString("fn", FirstName);
    i.putExtras(bandl);
    startActivity(i);

} 
```

但问题是我想在 listview 和 onClick 上显示“名字”以仅将“id”转发给其他类，我无法弄清楚。将“名字”转发到其他类，然后检索其他 mysql 数据工作正常，直到我得到两个同名的人，所以这就是为什么我需要转发行“id”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:36:40.250

给你的简单简短的工作答案

保持一个参考`JsonArray` ，你可以在哪里访问它`onListItemClick`

所以您可以执行以下操作

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    String id = jArray. getJSONObject(position).getString("id");
    Intent i = new Intent(this, PersonDetails.class);
    Bundle bandl = new Bundle();
    bandl.putString("id",id);
    i.putExtras(bandl);
    startActivity(i);

} 
```

请注意，您应该通过将适配器更改为可以同时保存 id 和名称的东西来使其变得更好。所以你不需要保留对 JsonArray 对象的引用。这是给你的[教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:37:46.583

最简单的方法是创建一个具有 2 个属性的自定义类 CustomPerson：id 和 firstName。在 CustomPerson 中重写 toString 以返回 firstName。

ArrayAdapter 创建：

```
// list should be a List<CustomPerson> and should be filled with your data
dataAdapter = new ArrayAdapter<CustomPerson>(Persons.this, R.layout.person_row, list); 
```

OnListItemClick 实现 |:

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    CustomPerson o = (CustomPerson) this.getListAdapter().getItem(position);
    long id = o.getId();
    // DO SOMETHING WITH the person's id

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:47:26.373

我以某种方式设法使用以下代码使其工作：

```
 lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    try {

                        String ajdi = jArray.getJSONObject(position).getString("id").toString();
                        Intent i = new Intent(Persons.this, PersonDetails.class);
                        Bundle bandl = new Bundle();
                        bandl.putString("id", ajdi);
                        i.putExtras(bandl);
                        startActivity(i);

                    } catch (JSONException e) {
                        ;
                    }
                }

            }); 
```

再次感谢你们两位！

# c# - 不使用 .linq 将过滤后的结果输出为 excel 可读格式

> ID：13745586
> 
> 赞同：0
> 
> 时间：2012-12-06T14:22:02.487
> 
> 标签：c#, list, export

我有一个 .dat 文件，其中包含很多多余的数据（几千行我只需要几百行）。我目前有一段代码能够读取并过滤它。以前，我使用这个（这是当前代码所做的）将摘要数据输出到控制台，但是我现在需要能够将与 Excel 可读文件相关的每一行输出。包含的数据为 ASCII 格式。

如果可能，我会尽量避免使用 linq，因为我并不真正理解它，而且我只是在应对不使用它带来的困难程度。

根据研究，看起来最有效的方法是让 C# 读取文件，将所有内容作为列表存储到内存中，然后将整个列表写入 excel。我很乐意手动完成其余的工作，一旦这个列表在 excel 中，它只是从 c# 中获取列表并将其转储到 excel 列中的一个例子。鉴于所有数据都将具有固定长度，我在如何完成这方面并没有受到很大限制，但如果可能的话，我希望将每个变量写入一个新列，而不是将其全部写入 A 列。

当前代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using NsExcel = Microsoft.Office.Interop.Excel;

class Program
{
    static void Main(string[] args)
    {
        List<string> myList = new List<string>();

        int i = 1;
        using (StreamReader reader = new StreamReader("file.dat"))
        {
            string line;
            var locations = new Dictionary<string, int[]>() {
                {"210", new [] {405, 4, 128, 12, 141, 12, 247, 15, 121, 3}},
                {"310", new [] {321, 4, 112, 12, 125, 12, 230, 15, 105, 3}}, 
                {"410", new [] {477, 4, 112, 12, 125, 12, 360, 15, 105, 3}} 
            };

            while ((line = reader.ReadLine()) != null)
            {

                var lineStart = line.Substring(0, 3);

                if (lineStart == "210" || lineStart == "310" || lineStart == "410")
                {
                    var currentLocations = locations[lineStart];
                    var letters = line.Substring(currentLocations[0], currentLocations[1]);

                    var tvolume =
                        int.Parse(line.Substring(currentLocations[2], currentLocations[3])) +
                        int.Parse(line.Substring(currentLocations[4], currentLocations[5]));

                    var tprice = long.Parse(line.Substring(currentLocations[6], currentLocations[7]));
                    var mvolume = tprice * tvolume * 0.01 * 0.0000001;
                    var currency = line.Substring(currentLocations[8], currentLocations[9]);

                    // double total = myList.

                    Console.WriteLine(i);
                    Console.WriteLine(lineStart);
                    Console.WriteLine(letters);
                    Console.WriteLine(tvolume * 0.01);
                    Console.WriteLine(tprice * 0.0000001);
                    Console.WriteLine("{0:N}", mvolume);
                    Console.WriteLine(currency + "\n");
                    i = i + 1;
                }

            }

            //Dictionary<string, int> tvolumeDictionary = new Dictionary<string, int>();
            //Dictionary<string, double> mvolumeDictionary = new Dictionary<string, double>();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:34:41.783

如果您只有一个数据文件，您可以解析数据（就像您已经拥有的一样）并将该数据写入一个简单的文本文件，然后将该文件中的内容直接复制粘贴到 Excel 中。我不是 Excel 用户，但如果您使用制表符 ('\t') 等拆分数据，它应该会自动将一行中的内容放入单独的列中。

```
// Construct a tab-separated string with your variables:
StringBuilder str = new StringBuilder();
str.Append(i.ToString());
str.Append("\t");
str.Append(lineStart.ToString());
str.Append("\t");
str.Append(letters.ToString());
...

// Push the string into your list:
myList.Add(str.ToString());
...

// Finally, you can write the contents of your list into a text file:
System.IO.File.WriteAllLines("output.txt", myList.ToArray()); 
```

然后，只需打开*output.txt*文件并将内容复制粘贴到 Excel 中。

**编辑：**就像***VoidMain***指出的那样，您可以将制表符 ('/t') 替换为分号 (';') 并将文件保存为*output.cvs*，然后希望 Excel 能够按原样打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:26:31.590

您可以使用 CSV 格式，这比编写 xls 或 xlsx 文件（Microsoft Excel 格式）要容易得多。您可以手动编写 csv 文件或使用任何现成的 csv .net 库，例如：

[http://knab.ws/blog/index.php?/archives/3-CSV-file-parser-and-writer-in-C-Part-1.html](http://knab.ws/blog/index.php?/archives/3-CSV-file-parser-and-writer-in-C-Part-1.html)

# google-maps - 谷歌地理编码迟到了（仍然落后一步）

> ID：13745591
> 
> 赞同：-2
> 
> 时间：2012-12-06T14:22:23.343
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-geocoder

我把我的整个代码放在那里。试图确定位置地址。我的脚本仍应创建一个带有地理编码地址的标记（在控制台中 - 变量 kktina）。

但是，不幸的是，并非一切都好。因为通过脚本仍然可以解析以前的位置（或者它需要以前的坐标，不知道）。也许代码中有错误，但我不能再这样做了..

所以寻求帮助，谢谢！

```
<!DOCTYPE html>
<html>
<head>
  <title>Google Maps JavaScript API v3 Example: Map Simple</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <style>
  html, body, #map_canvas {
    margin: 0;
    padding: 0;
    height: 100%;
  }
  </style>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places,geometry"></script>
  <script src="http://code.jquery.com/jquery-1.7.min.js" type="text/javascript"></script>
  <script>
  var map,marker;
  var geocoder = new google.maps.Geocoder();
  var markers = [];
  var img,icon,type;
  var prenos,pos,address = "5",point;

      function clearMarkersFromArray() {
    if (markers.length>0){
      markers[0].setMap(null);
      markers.shift(markers[0]);
    }
  }

  function geocodePosition(pos) {
    geocoder.geocode({
      latLng: pos
    }, function(responses) {
      if (responses && responses.length > 0) {
        address = responses[0].formatted_address;
      } else {
        address = 'Cannot determine address at this location.';
      }
    });
    return address;
  }

  function initialize() {

    var mapOptions = {
      zoom: 7,
      center: new google.maps.LatLng(49,19),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions),

    google.maps.event.addListener(map, 'click', function(response) {
      clearMarkersFromArray();
      point = new google.maps.LatLng(response.latLng.$a,response.latLng.ab); 
      var kktina = geocodePosition(point);
      console.log(kktina);
      var marker = new google.maps.Marker({
        position: point,
        draggable: true
      });
      markers.push(marker)
      marker.setMap(map);
});
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
  <div id="map_canvas" style="height:400px;width:700px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:56:51.093

你不能这样做：

```
 function geocodePosition(pos) {
    geocoder.geocode({
      latLng: pos
    }, function(responses) {
      if (responses && responses.length > 0) {
        address = responses[0].formatted_address;
      } else {
        address = 'Cannot determine address at this location.';
      }
    });
    return address;
  } 
```

地理编码器是异步的，返回时地址的值是未定义的。

改为在回调函数中使用返回的数据，如下所示（未测试）：

```
var kktina = null;
function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      kktina = responses[0].formatted_address;
    } else {
      kktina = 'Cannot determine address at this location.';
    }
   console.log(kktina);
    var marker = new google.maps.Marker({
      position: point,
      draggable: true
    });
    markers.push(marker)
    marker.setMap(map);
  });
} 
```

# django - 如何通过 mongodb shell 在 mongoengine/Django FileField 中保存由 GridFS 提供的文件

> ID：13745592
> 
> 赞同：0
> 
> 时间：2012-12-06T14:22:25.277
> 
> 标签：django, mongodb, mongoengine, gridfs, filefield

我通过 mongofiles 在 GridFS 上保存了一个文件

```
$ mongofiles -d dba put file.txt
connected to: 127.0.0.1
added file: { _id: ObjectId('50c0a48f8d1d53325a7d7b01'), filename: "file.txt", chunkSize: 262144, uploadDate: new Date(1354802319244), md5: "a6039c33d297d12d0dfb9b1a99bda542", length: 3527 }
done!
$ mongofiles -d dba list
connected to: 127.0.0.1
file.txt    3527 
```

我有一个 Django 和 mongoengine 的模型，定义为

```
class IFile(Document):
    iptr = FileField(required=True) 
```

如何从 mongodb shell 将此文件保存在 IFile 的实例中？

```
db.ifile.save({"iptr" : ??}) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:12:46.023

Internally GridFS uses two collections to store data:

*   fs.files contains the object metadata
*   fs.chunks contains the binary chunks with some additional accounting information

### Files

Documents in the files collection require the following fields:

```
{
  "_id" : ,            // unique ID for this file
  "length" : data_number,           // size of the file in bytes
  "chunkSize" : data_number,        // size of each of the chunks.  Default is 256k
  "uploadDate" : data_date,         // date when object first stored
  "md5" : data_string               // result of running the "filemd5" command on this file's chunks
}

```

### Chunks

The structure of documents from the chunks collection is as follows:

```
{
  "_id" : ,         // object id of the chunk in the _chunks collection
  "files_id" : ,    // _id of the corresponding files collection entry
  "n" : chunk_number,            // chunks are numbered in order, starting with 0
  "data" : data_binary,          // the chunk's payload as a BSON binary type
}

```

For more detailed information, click [here](http://www.mongodb.org/display/DOCS/GridFS+Specification) Related Driver docs: [Python](http://api.mongodb.org/python/current/api/gridfs/grid_file.html)

# asp.net-mvc-3 - MVC 3/4 站点地图提供程序异常

> ID：13745595
> 
> 赞同：0
> 
> 时间：2012-12-06T14:22:37.370
> 
> 标签：asp.net-mvc-3, sitemap, mvcsitemapprovider

我正在使用来自 codeplex 的 MVC SiteMap，我已将站点地图设置为此

```
<mvcSiteMapNode title="LEADS" controller="Leads" action="DetailsLeads"   Url="/Leads/DetailsLeads" roles="TEST">
          <mvcSiteMapNode title="LEADS1" controller="Leads" action="ScheduleMettingLeads"   Url="/Leads/ScheduleMettingLeads" roles="TEST"/>
          <mvcSiteMapNode title="LEADS2" controller="Leads" action="ServiceAppealLeads"  Url="/Leads/ServiceAppealLeads" roles="TEST"/>
        </mvcSiteMapNode> 
```

当我设置 securityTrimmingEnabled="true" 时，我收到以下错误：

**模棱两可的控制器。找到 LeadsController 的多个控制器类型。考虑通过将控制器命名空间添加到 ControllerBuilder.Current.DefaultNamespaces 来缩小搜索范围。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T18:47:15.760

区域设置非常棘手。有关如何使用 MvcSiteMapProvider 设置区域的说明，请参阅此问题。

[https://github.com/maartenba/MvcSiteMapProvider/issues/78?source=cc#issuecomment-20918916](https://github.com/maartenba/MvcSiteMapProvider/issues/78?source=cc#issuecomment-20918916)

# php - wordpress /woo commerce import 脚本定期调用 wp-config.php 导致处理超慢

> ID：13745596
> 
> 赞同：2
> 
> 时间：2012-12-06T14:22:38.790
> 
> 标签：php, wordpress, performance

我为许多开源购物车编写了一个产品导入应用程序。

该应用程序的核心用于所有购物车，然后我使用了一个单独的类来将产品导入特定于购物车的直播商店。

它在 magento、osc、cre 和 zen 上运行良好，但在 WordPress 上它真的可以挤满服务器。

它非常耗费资源，以至于我什至无法从主机帐户访问静态 .html 文件（通过 HTTP 请求）。

我唯一能解决的是 wp-config 在导入过程中被调用了两次。

两次调用 wp-config.php 真的会占用资源吗？我必须调用此文件才能使用 WordPress API 来导入产品。

我用：

```
include_once('../wp-config.php'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T07:10:54.710

你写的 include_once 意味着文件只包含一次。在每个 ajax 调用中调用它不是问题。相反，您将需要它。由于 wordpress 架构，脚本运行缓慢。对于每个产品导入 wordpress 执行许多查询。wordpress 的最大数据主要在 post 和 post_meta 表中。对于每个元字段，将执行一个插入查询，这就是它运行缓慢的原因。

您可以编写自己的 sql 查询并使用扩展的插入查询样式添加多个元标记，这将很快。

# python - 为什么不能在 Python 中使用 dbus 调用 org.freedesktop.NetworkManager 中的方法？

> ID：13745599
> 
> 赞同：2
> 
> 时间：2012-12-06T14:22:52.140
> 
> 标签：python, ubuntu, dbus

我在交互式 python shell 中尝试了下面的代码，并在代码的第 3 行得到了以下错误，使用 D-Feet 我看到总线中存在路径和接口，并且使用命令 dbus-send 我能够获取设备，请参见此消息的结尾。为什么不在 python 中使用此代码？PS：我用的是 ubuntu 12.04，在 ubuntu 11 也试过，同样的问题。

代码：

```
import dbus
bus = dbus.SessionBus()
obj = bus.get_object('org.freedesktop.NetworkManager', '/org/freedesktop/NetworkManager')
t = dbus.Interface(obj, "org.freedesktop.NetworkManager")
t.GetDevices() 
```

输入代码第 3 行的输出错误：

```
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/usr/lib/pymodules/python2.7/dbus/bus.py", line 244, in get_object
    follow_name_owner_changes=follow_name_owner_changes)
  File "/usr/lib/pymodules/python2.7/dbus/proxies.py", line 241, in __init__
    self._named_service = conn.activate_name_owner(bus_name)
  File "/usr/lib/pymodules/python2.7/dbus/bus.py", line 183, in activate_name_owner
    self.start_service_by_name(bus_name)
  File "/usr/lib/pymodules/python2.7/dbus/bus.py", line 281, in start_service_by_name
    'su', (bus_name, flags)))
  File "/usr/lib/pymodules/python2.7/dbus/connection.py", line 630, in call_blocking
    message, timeout)
DBusException: org.freedesktop.DBus.Error.ServiceUnknown: The name org.freedesktop.NetworkManager was not provided
 by any .service files 
```

有效的 Shell 命令：

```
dbus-send --system --print-reply --reply-timeout=2000 --type=method_call --dest=org.freedesktop.NetworkManager /org/freedesktop/NetworkManager org.freedesktop.NetworkManager.GetDevices 
```

输出：

```
method return sender=:1.2 -> dest=:1.69 reply_serial=2
   array [
      object path "/org/freedesktop/NetworkManager/Devices/0"
   ] 
```

这只是一个例子，我想知道为什么不工作，如果我将第 3 行更改为（注意第一个参数中的 DBus 名称）：

```
obj = bus.get_object('org.freedesktop.DBus', '/org/freedesktop/NetworkManager') 
```

该错误不会发生，但在此接口中 GetDevices 方法不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:35:15.397

在您的命令行示例中，您要求使用系统总线：

```
dbus-send --system ... 
```

在您的 Python 代码中，您要求使用会话总线：

```
bus = dbus.SessionBus() 
```

如果您通过系统总线尝试请求，我想您会发现它有效：

```
>>> import dbus
>>> bus = dbus.SystemBus()
>>> obj = bus.get_object('org.freedesktop.NetworkManager', '/org/freedesktop/NetworkManager')
>>> t = dbus.Interface(obj, "org.freedesktop.NetworkManager")
>>> t.GetDevices()
dbus.Array([dbus.ObjectPath('/org/freedesktop/NetworkManager/Devices/0'), dbus.ObjectPath('/org/freedesktop/NetworkManager/Devices/1')], signature=dbus.Signature('o'))
>>> 
```

# iphone - GPU图像。第二次尝试保存照片时应用程序崩溃

> ID：13745600
> 
> 赞同：1
> 
> 时间：2012-12-06T14:22:57.527
> 
> 标签：iphone, objective-c, ios, gpuimage

制作完成后，`[_stillCamera pauseCameraCapture];`我想保存拍摄的照片。代码：

```
[_stillCamera capturePhotoAsJPEGProcessedUpToFilter:_filter withCompletionHandler:^(NSData *processedJPEG, NSError *error){

     [self savePhotoToAlbum:processedJPEG];
     if (error) {
         NSLog(@"error")
     }
}]; 
```

第一次成功保存照片。在此之后我没有做`[_stillCamera resumeCameraCapture];`，但是当我再次点击保存按钮时，我的应用程序崩溃而没有任何消息。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:15:55.590

您的处理程序内容应如下所示：

```
if (error)
    NSLog(@"error occured code = %d", error.code);
else
    [self savePhotoToAlbum:processedJPEG]; 
```

# r - diff（）在动物园对象上失败

> ID：13745607
> 
> 赞同：4
> 
> 时间：2012-12-06T14:23:07.950
> 
> 标签：r

在 R 中处理一个新项目时，我编写了以下代码：

```
sp500 <- get.hist.quote("^GSPC",start=(today <- Sys.Date())-735,quote="Cl")
lsp500 <- log(sp500)
rlsp500 <- diff(lsp500) 
```

问题是 diff() 函数，它会产生以下错误：

```
Error in MATCH(x, x) : could not find function "MATCH" 
```

所有其他代码执行没有问题。我正在使用 RStudio 和 R 版本 2.15.2 (2012-10-26) -- Mac OSX 10.8.2 上的“不给糖就捣蛋”。

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] tseries_0.10-30

loaded via a namespace (and not attached):
[1] grid_2.15.2     lattice_0.20-10 quadprog_1.5-4  tools_2.15.2    zoo_1.7-9 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T15:10:09.233

`tseries::get.hist.quote`默认情况下返回一个动物园对象，但 tseries 包不附加动物园，所以`zoo::MATCH`找不到。我假设在它调用的函数`zoo::MATCH`中`diff.zoo`或其中一个函数中使用。

附加动物园（通过`library(zoo)`）将解决问题。

# ios - 移除导航栏/搜索栏底部的黑线

> ID：13745612
> 
> 赞同：0
> 
> 时间：2012-12-06T14:23:17.537
> 
> 标签：ios, xcode, uinavigationbar, uisearchbar

我想做一个干净的白色设计。所以，我将`tintColor`属性设置为，但是和`whiteColor`下有这些暗线。`UINavigationBar``UISearchBar`

有人知道，如何去除暗线或如何改变颜色？

![](../Images/26be0e794d6424064d62f3b3f89d4d3e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T15:59:35.470

按类别向 UIImage 添加方法

```
+ (UIImage *)imageWithColor:(UIColor *)color {
    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [color CGColor]);
    CGContextFillRect(context, rect);
    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return theImage;
} 
```

并设置

```
[self.navigationController.navigationBar setShadowImage:[UIImage imageWithColor:[UIColor whiteColor]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:38:58.420

这就是我所做的，并且似乎有效，这是此链接的进一步发展。我将显式宽度声明更改为动态声明，这样无论您是否更改视图大小，它都会是视图的大小：

```
UIView *overlayView = [[UIView alloc] initWithFrame:CGRectMake(0, 43, self.view.frame.size.width, 1)];
[overlayView setBackgroundColor:[UIColor whiteColor]];
[navBar addSubview:overlayView]; // navBar is your UINavigationBar instance
[overlayView release]; 
```

我在这里找到了东西： [如何移除 UINavigatonItem 的边界线](https://stackoverflow.com/questions/5888265/how-to-remove-uinavigatonitems-border-line)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T16:37:09.880

从 iOS 7 UINavigationBar 有一个 shadowImage 属性，您可以将其设置为 nil。

# asp.net - 将不同的aspx页面加载到一个区域而不重新加载整个页面

> ID：13745613
> 
> 赞同：0
> 
> 时间：2012-12-06T14:23:20.253
> 
> 标签：asp.net, navigation

我已经写了一篇关于这个主题的更长的文字，今天早些时候发布。也许文字太长，所以我在这里非常简单地改写一下：

我想设计一个非常标准的网站，让用户有机会借助导航菜单（左，上）导航到不同的 aspx 页面。我不希望在更改内容页面时重新加载整个页面，原因有三个：状态处理、闪烁和带宽节省。我只想将一个新的 aspx 页面加载到“主要内容区域”中，而网站的其余部分保持不变。

实现这一目标的最佳方法是什么？我不能依赖母版页或非母版页或 AJAX 或非 AJAX。它不能依赖任何特定的东西。我只是想知道实现这一目标的标准方法是什么。这一定是一个很普遍的愿望。

谢谢

/DT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:28:03.780

您可以为此使用**[iframe 。](http://www.w3schools.com/tags/tag_iframe.asp)**

该`<iframe>`标记指定一个内联框架。内联框架用于在当前 HTML 文档中嵌入另一个文档。

```
<iframe src="http://www.w3schools.com"></iframe> 
```

# c# - 为什么 Ruby 中的这个算法比 Parallel'd C# 运行得更快？

> ID：13745616
> 
> 赞同：15
> 
> 时间：2012-12-06T14:23:25.517
> 
> 标签：c#, ruby, performance, algorithm, task-parallel-library

以下 ruby​​ 代码在大约 15 秒内运行。它几乎不使用任何 CPU/内存（大约一个 CPU 的 25%）：

```
def collatz(num)
   num.even? ? num/2 : 3*num + 1
end

start_time = Time.now
max_chain_count = 0
max_starter_num = 0
(1..1000000).each do |i|
    count = 0
    current = i
    current = collatz(current) and count += 1 until (current == 1)
    max_chain_count = count and max_starter_num = i if (count > max_chain_count)
end

puts "Max starter num: #{max_starter_num} -> chain of #{max_chain_count} elements. Found in: #{Time.now - start_time}s" 
```

下面的 TPL C# 将我的所有 4 个内核都使用 100%，并且比 ruby​​ 版本慢几个数量级：

```
static void Euler14Test()
{
    Stopwatch sw = new Stopwatch();
    sw.Start();
    int max_chain_count = 0;
    int max_starter_num = 0;
    object locker = new object();
    Parallel.For(1, 1000000, i =>
    {
        int count = 0;
        int current = i;
        while (current != 1)
        {
            current = collatz(current);
            count++;
        }
        if (count > max_chain_count)
        {
            lock (locker)
            {
                max_chain_count = count;
                max_starter_num = i;
            }
        }
        if (i % 1000 == 0)
            Console.WriteLine(i);
    });
    sw.Stop();
    Console.WriteLine("Max starter i: {0} -> chain of {1} elements. Found in: {2}s", max_starter_num, max_chain_count, sw.Elapsed.ToString());
}

static int collatz(int num)
{
    return num % 2 == 0 ? num / 2 : 3 * num + 1;
} 
```

为什么 ruby​​ 比 C# 运行得更快？有人告诉我 Ruby 很慢。在算法方面不是这样吗？

* * *

修正后的性能：

*   Ruby（非并行）：14.62s
*   C#（非并行）：2.22s
*   C#（使用 TPL）：0.64 秒

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-06T14:41:03.953

实际上，该错误非常微妙，与线程无关。您的 C# 版本需要这么长时间的原因是该`collatz`方法计算的中间值最终开始溢出`int`类型，导致负数可能需要很长时间才能收敛。

这首先发生在`i`134,379 时，其中第 129项（假设从 1 开始计数）是 2,482,111,348 ^。这超过了最大值 2,147,483,647，因此存储为 -1,812,855,948。

要在 C# 版本上获得良好的性能（和正确的结果），只需更改：

```
int current = i; 
```

…到：

```
long current = i; 
```

…和：

```
static int collatz(int num) 
```

…到：

```
static long collatz(long num) 
```

这会将你的表现降低到可观的 1.5 秒。

**编辑**：CodesInChaos 提出了一个非常有效的观点，即在调试面向数学的应用程序时启用溢出检查。这样做可以立即识别错误，因为运行时会抛出一个`OverflowException`.

![溢出检查](../Images/cd18d6dc4b23bc617e37392a9cb1040a.png)

![溢出异常](../Images/a9cc4db270c3dcff2c197f5144c76d5b.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T14:41:19.027

应该：

```
Parallel.For(1L, 1000000L, i =>
    { 
```

否则，您有整数溢出并开始检查负值。相同的`collatz`方法应该对长值进行操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T14:39:40.213

我经历过类似的事情。我发现这是因为您的每个循环迭代都需要启动其他线程，这需要一些时间，在这种情况下，它与您在循环体中实际执行的操作相当（我认为它需要更多时间）。

有一个替代方案：您可以获得多少 CPU 内核，而不是使用具有相同数量迭代的并行循环，每个循环将评估您想要的实际循环的一部分，它是通过制作一个内部依赖于并行循环的 for 循环。

**编辑：示例**

```
int start = 1, end = 1000000;
Parallel.For(0, N_CORES, n =>
{
    int s = start + (end - start) * n / N_CORES;
    int e = n == N_CORES - 1 ? end : start + (end - start) * (n + 1) / N_CORES;
    for (int i = s; i < e; i++)
    {
        // Your code
    }
}); 
```

你应该试试这段代码，我很确定这会更快地完成这项工作。

**编辑：说明**

好吧，自从我回答这个问题以来已经很长时间了，但是我再次面对这个问题，终于明白了发生了什么。

我一直在使用 Parallel for 循环的 AForge 实现，看起来，它会为循环的每次迭代触发一个线程，所以，这就是为什么如果循环需要相对较少的时间来执行，你最终会得到一个低效的并行性。

所以，正如你们中的一些人所指出的，System.Threading.Tasks.Parallel 方法是基于任务的，这是一种[更高级别的](http://msdn.microsoft.com/en-us/library/dd537609(v=vs.110).aspx)线程抽象：

“在幕后，任务排队到 ThreadPool，该线程池已通过确定和调整线程数量的算法得到增强，并提供负载平衡以最大限度地提高吞吐量。这使得任务相对轻量级，您可以创建许多任务以启用细粒度的并行性。”

所以，是的，如果你使用默认库的实现，你就不需要使用这种“伪造的”。

# javascript - 如何在移动设备上正确执行 Google oauth2 javascript 工作流程？

> ID：13745620
> 
> 赞同：2
> 
> 时间：2012-12-06T14:23:28.940
> 
> 标签：javascript, mobile, oauth-2.0

我正在构建一个简单的移动 web 应用程序，它使用 javascript api 针对 Google 的 oauth2 服务进行身份验证。虽然在桌面上它工作正常，但移动版本坚持工作流程的最后一步。它不会返回主页，而是停留在以下 url：

```
https://accounts.google.com/o/oauth2/auth?immediate=false&response_type=token&scope=https://www.googleapis.com/auth/plus.me&redirect_uri=postmessage&proxy=oauth2relay1692997977&state=455491569&origin=[http://mydomain.com]&client_id=[myclientid]&authuser=0&hl=nl&from_login=1&as=fb5f6593cf79e46&pli=1 
```

我使用了以下示例[代码](http://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html)

在 Windows Phone 7.5 的 IE9 上对其进行了测试。

我需要做些什么来解决这个问题，并让工作流程最终出现在主页中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:18:41.190

您提供的示例代码专为桌面浏览器弹出窗口中的身份验证流程而设计。它在移动浏览器上无法正常工作。我建议您使用一个使用重定向执行身份验证流程的库。

# javascript - 比较 document.domain 和 iframe-document.domain

> ID：13745625
> 
> 赞同：1
> 
> 时间：2012-12-06T14:23:55.133
> 
> 标签：javascript, jquery, iframe, cross-domain

我有一个页面（=parent），其中包含具有不同域的 iview（=child），我想使用 JavaScript 在它们之间进行通信。我已经可以通过手动设置子文件的 document.domain (a.foo.bar) 和它的父文件 (b.foo.bar) 的 document.domain 来做到这一点，以便之后它们具有相同的域 (foo.bar ) = 域松弛。这很好用。实际上我不能“做”这个，但它已经由孩子的默认实现完成了。之后，我可以通过例如放置在父母正文中的 JavaScript 来操纵孩子的内容。我只有一个问题：父母不知道，如果孩子的 document.domain 已经设置为匹配父母 document.domain。

我的问题是：有没有办法让父母使用 JavaScript/jQuery 检查孩子的域是否等于它自己的域？如果这是不可能的：如果域不匹配，有没有办法尝试，父母是否有权访问孩子的文档，而不会引发“权限被拒绝”错误？

提前感谢您的帮助。

问候，勒内

# logging - 使用 StructureMap 进行 AOP 日志记录

> ID：13745629
> 
> 赞同：1
> 
> 时间：2012-12-06T14:24:05.357
> 
> 标签：logging, castle-windsor, aop, structuremap

我正在尝试使用 StructureMap 的 AOP 方法实现简单的日志记录。

基本上，我想做[Castle, AOP and Logging in .NET](https://stackoverflow.com/questions/238755/castle-aop-and-logging-in-net) with StructureMap这个问题中提出的问题。

CastleWindsor 具有帮助`IInterceptor`您可以实现然后控制何时使用`IInvocation.Proceed()`. 允许您在调用方法之前和之后执行日志记录。

如何使用 StructureMap 实现这一点？我已经厌倦了使用自定义`Interceptor`，但您获得的唯一句柄是创建实例时，而不是在实例上调用方法时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:56:16.363

像这样的东西可能对你有用：

创建城堡代理拦截器：

```
public class LoggingInterceptor : IInterceptor
{
    private readonly IMyLogger _logger;
    public LoggingInterceptor(IMyLogger logger) { _logger = logger; }
    public void Intercept(IInvocation invocation)
    {
        _logger.Log("Before calling " + invocation.Method);
        invocation.Proceed();
        _logger.Log("After calling " + invocation.Method);
    }
} 
```

`IFoo`在您的 SM 配置中注册它以使用代理包装所有内容：

```
var proxyGenerator = new ProxyGenerator();
c.For<IFoo>().Use<Foo>();
c.For<IFoo>()
    .EnrichAllWith(instance => 
        proxyGenerator.CreateInterfaceProxyWithTarget<IFoo>(instance, 
            new LoggingInterceptor(new MyLogger()))); 
```

现在，所有实例上对任何方法的所有调用都`IFoo`将被`LoggingInterceptor`. 您当然可以通过检查实例来过滤要记录的调用。

# java - 尝试使用 wordnet java api 查找同义词

> ID：13745631
> 
> 赞同：4
> 
> 时间：2012-12-06T14:24:18.410
> 
> 标签：java, wordnet, synonym

我正在尝试使用 Wordnet java api 在 java 中查找某些单词（字符串类型）的同义词。我很难弄清楚它是如何工作的。

我找到了这个链接[http://lyle.smu.edu/~tspell/jaws/doc/edu/smu/tspell/wordnet/impl/file/ReferenceSynset.html#getTagCount%28java.lang.String%29](http://lyle.smu.edu/~tspell/jaws/doc/edu/smu/tspell/wordnet/impl/file/ReferenceSynset.html#getTagCount%28java.lang.String%29)我虽然它很有用，但我仍然不知道如何开始。我是否必须创建一个 ReferenceSynset 对象，然后找到它的同义词，如何做到这一点？或者还有其他更简单的方法吗？请帮忙！

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:19:05.917

**JAWS——“用于 WordNet 搜索的 Java API”**正是为此目的而创建的。可能是您没有正确安装它。在您提到的同一域 (smu.edu) 中，有安装 JAWS 的说明。

首先，您需要下载可执行文件和*Wordnet*本身。

1.  获取 *.jar 文件
2.  将 wordnet 数据库文件下载到适当的目录（[此处的说明](https://wordnet.princeton.edu/wordnet/download/)）

完成此操作后，您接下来应该尝试[示例程序。](https://github.com/jaytaylor/jaws/blob/master/TestJAWS.java)首先，确保它在未经修改的情况下工作。如果你得到它的工作，你应该在输入时看到一堆同义词：

`java TestJAWS <your word here>`

如果可行，您可以开始修改代码以满足您的目的。

希望有帮助。

# java - 深入研究 Hazelcast 新手的问题

> ID：13745633
> 
> 赞同：3
> 
> 时间：2012-12-06T14:24:32.190
> 
> 标签：java, hazelcast

我最近的任务是评估 Hazelcast 作为我们产品的键值存储解决方案。我阅读了他们的文档并在这里遇到了几个问题：

1.  关于持久性 - 他们说地图/多图可以持久化，这很酷。但是他们提供的其他集合（列表、队列、集合......）呢？一段配置代码在这里会有很大帮助:)

2.  我知道当我从 hazelcast 实例中获取地图时，它实际上为我创建了一个代理。因此，假设 hazelcast 以独立模式部署，任何后续的“获取”请求都将导致套接字通信。那么嵌入式模式呢？我的意思是，如果我的 JVM 进程的 RAM 中有一个巨大的映射，由于性能原因，我不想通过套接字访问它……我希望它会创建某种“本地代理”，直接进入我的RAM，任何人都可以确认或反驳这一点吗？

非常感谢提前

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T08:04:20.190

1.  目前仅地图支持持久性。不支持多图持久性，但有一个问题：[here](https://github.com/hazelcast/hazelcast/issues/42)

2-是的，如果条目位于本地节点，则不会有远程调用。还有更多优化选项，例如近缓存。看[这里](http://www.hazelcast.com/docs/2.4/manual/single_html/#MapNearCache)

# javascript - 用Javascript从谷歌搜索中提取关键字时出错？

> ID：13745634
> 
> 赞同：0
> 
> 时间：2012-12-06T14:24:35.093
> 
> 标签：javascript

我有一个示例代码：

```
function getKeyword() {
    var instance = this;
    var googlePattern = /(www\.google\..*)/;

    this.params = function(parameters) {
        var result = [];
        var params = parameters.split("&");
        for(var p in params) {
            var kv = params[p].split("=");
            result[kv[0]] = kv[1];
        }
        return result;
    };

    this.googleKeywords = function(params){
        var query = params["q"];
        var pattern = /"(.*?)"|(\w+)/g;
        return decodeURIComponent(query).replace(/\+/g, " ").match(pattern);
    };

    this.parseReferrer = function(){
        var result = [];
        var pathAndParams = document.referrer.split("?");
        if(pathAndParams.length == 2) {
            var path = pathAndParams[0];
            var params = this.params(pathAndParams[1]);
            if(path.search(googlePattern) > 0) {
                result = this.googleKeywords(params);
            }
        }
        return result;   
    };

    return this.parseReferrer();
} 
```

接着：

```
<script type="text/javascript">
    if (document.referrer && document.referrer != "") {
        if (document.referrer.search(/google\.*/i) != -1){
            var keyword = getKeyword();
            alert(keyword);
        } else {
            alert('Not search from google');
        }
    } else {
        alert('Not referrer');
    }
    </script> 
```

例如：当我用关键字搜索“iphone 5”时，结果不显示警报（“iphone 5”）？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:15:51.337

JavaScript`for in`构造循环的不仅仅是数组中的条目。如果你想使用`for in`你需要确保你只处理实际参数。这最容易通过检查来完成`hasOwnProperty`：

```
this.params = function(parameters) {
  var result = [];
  var params = parameters.split("&");
  for(var p in params) {
    if (params.hasOwnProperty(p))
    {
      var kv = params[p].split("=");
      result[kv[0]] = kv[1];
    }
  }
  return result;
}; 
```

或者，您可以在数组上使用常规`for`循环：

```
this.params = function(parameters) {
  var result = [];
  var params = parameters.split("&");
  for(var i=0; i < params.length; i++) {
    var kv = params[i].split("=");
    result[kv[0]] = kv[1];
  }
  return result;
}; 
```

# java - 不同 Eclipse Java 项目的不同选项卡/空间策略

> ID：13745640
> 
> 赞同：1
> 
> 时间：2012-12-06T14:24:54.690
> 
> 标签：java, eclipse, indentation

我有自己的项目，我希望看到这些项目带有制表符。我还下载了一个使用空间的第三方项目，我想自定义它。我想保留第三方库的编码风格，但我仍然想在完全属于我自己的项目中使用我最喜欢的一个选项卡 = 一种深度风格。

我浏览了许多 Eclipse 设置，但我仍然看不到我的出路。我正在使用 Eclipse Juno SR1 和 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:39:46.747

很抱歉没有发布答案，但这似乎真的很合适......;）

[![制表符或空格](../Images/7c31224be969c9cdf6b2af80b12022d5.png)](https://i.stack.imgur.com/UkAvC.png)
[（来源：[emacswiki.org](http://www.emacswiki.org/pics/static/TabsSpacesBoth.png)）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T14:28:57.233

轻松搞定。在**Windows > Preferences > Java > Code Style > Formatter**中，您可以定义您想要使用的各种格式化程序。

然后，可以通过右键单击项目并在那里调整首选项来调整每个项目以使用不同的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T14:29:09.767

转到 Eclipse 项目的“属性”，然后找到“Java 代码样式”->“格式化程序”并将其设置为项目特定设置。您可以在那里定义项目的格式化程序属性。

# iphone - 使用 segue 传递字符串

> ID：13745643
> 
> 赞同：1
> 
> 时间：2012-12-06T14:25:03.330
> 
> 标签：iphone, objective-c, ios, cocoa, uistoryboardsegue

我有一个表视图控制器和另一个视图控制器。我想将数据从选定的单元格（从表视图）传递到视图控制器并更新视图控制器中的标签。我正在通过以下方式执行此操作：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"SubRecipeConnectorSegue"])
{
     RecipeDetailViewController *destViewController = segue.destinationViewController;
     destViewController.recipeName = selectedRecipe;

 }
} 
```

问题是，当我第一次选择一个未出现在标签中的单元格时；但是，当我选择任何第二个值时；我的第一个选择值显示在标签中。同样，选择第三值时，标签中显示了第二个值。谁能告诉我出了什么问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:34:12.103

这样做的方法是手动触发 segue。在 IB 中，将 segue 从一个 VC 绘制到另一个（而不是从表格单元格）。确保给它一个标识符。在 tableView:didSelect 中，设置选中的字符串并调用 performSegueWithIdentifier:。

您看到的问题是 segue prep 在 tableView 委托之前被调用，因此新的 VC 呈现先前的选择，这是第一次未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:58:01.640

您应该从 didSelectRowAtIndexPath 中的相应单元格获取数据，然后以语法方式执行 segue。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *recipeString = [dataArray objectAtIndex:indexPath.row];
    [self performSegueWithIdentifier:@"SubRecipeConnectorSegue" sender:recipeString];
} 
```

然后将您的 prepareForSegue 方法更改为

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(NSString*)recipeString
{
    if ([segue.identifier isEqualToString:@"SubRecipeConnectorSegue"])
    {
        RecipeDetailViewController *destViewController = segue.destinationViewController;
        destViewController.recipeName = recipeString;

    }
} 
```

我不知道您如何将数据存储在单元格中，因此这可能与我编写的示例不同。如果您需要帮助实施，请告诉我。

# db2 - 带有“in”的 DB2 子选择，有限制吗？

> ID：13745644
> 
> 赞同：0
> 
> 时间：2012-12-06T14:25:13.597
> 
> 标签：db2, subquery

有人向我提到，在 DB2 中使用 'in' 执行子选择时，子选择可以返回多少个结果可能会有限制。如果是这样，有人知道这个限制是多少吗？或者如果它可能取决于数据库的版本，如何找到这些信息？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:50:01.670

查找此类信息的最佳位置是 IBM 的网站。例如，以下是[z/OS 上 DB2 的限制](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2.doc.ugref%2Frlimtas.htm)

我没有看到关于“IN”子句中的值数量有限制的任何信息，但是“表或视图中的最大列数（该值取决于 CREATE VIEW 语句的复杂性）或表函数返回的列。” 是750。

与您的问题无关 - [DB2 SQL Cookbook](http://mysite.verizon.net/Graeme_Birchall/id1.html)是使用 DB2 的绝佳参考。

# makefile - Makefile：检测到时钟偏差

> ID：13745645
> 
> 赞同：13
> 
> 时间：2012-12-06T14:25:14.813
> 
> 标签：makefile, clock, skew

我的问题是每当我尝试使用 Makefile 进行编译时，我都会得到以下信息：

```
make: Warning: File `Board.c' has modification time 1.3e+03 s in the future
gcc -Wall -c -Wvla -lm Board.c -o Board.o
gcc -Wall -c -Wvla -lm PlayBoard.c -o PlayBoard.o
gcc -lm ErrorHandle.o Board.o PlayBoard.o -g -o PlayBoard
make: warning:  Clock skew detected.  Your build may be incomplete. 
```

我的 Makefile 是：

```
CC = gcc
FLAGS = -Wall -c -Wvla

PlayBoard: ErrorHandle.o Board.o PlayBoard.o
    $(CC) -lm ErrorHandle.o Board.o PlayBoard.o -g -o $@

PlayBoard.o: PlayBoard.c Board.o
    $(CC) $(FLAGS) -lm PlayBoard.c -o $@

Board.o : ErrorHandle.o Board.c Board.h
    $(CC) $(FLAGS) -lm Board.c -o $@

.PHONY : clean

clean:
    rm -f Board.o PlayBoard.o PlayBoard

all : PlayBoard 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-25T22:44:16.710

一种可能的解决方案是对`touch`源树中的每个文件进行更新以更新时间戳：

转到子树的根并执行以下操作：

```
find . -exec touch {} \; 
```

然后`make clean`重试编译。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-06T15:05:23.533

正如*stijn*的评论中所述，消息“*的评论中所指出的，如果编译位于 NFS 挂载上的源并且 NFS 服务器的时钟运行在客户端的时钟之前进行编译，则最常给出*检测到时钟偏差”。**

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-16T20:06:31.187

在这里的一台大学计算机上做一些工作时，我在 Eclipse 中也看到过几次。我的数据驱动器是网络驱动器，并且网络驱动器和本地计算机之间的时钟差异已关闭。

将我的工作区切换到本地计算机（C 驱动器）上的位置解决了问题*

# python - 从 python 中运行 bash 脚本

> ID：13745648
> 
> 赞同：139
> 
> 时间：2012-12-06T14:25:16.740
> 
> 标签：python, bash, call

我对以下代码有疑问：

**调用Bash.py：**

```
import subprocess
print "start"
subprocess.call("sleep.sh")
print "end" 
```

**睡眠.sh：**

```
sleep 10 
```

我希望在 10 秒后打印“结束”。（我知道这是一个愚蠢的例子，我可以简单地在 python 中睡觉，但是这个简单的 sleep.sh 文件只是作为一个测试）

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-06T14:42:00.133

使 sleep.sh 可执行并添加`shell=True`到参数列表（如先前答案中所建议的）可以正常工作。根据搜索路径，您可能还需要添加`./`或其他一些适当的路径。（即，更改`"sleep.sh"`为`"./sleep.sh"`。）

`shell=True`如果 bash 脚本的第一行是 shell 的路径，则不需要该参数（在 Linux 等 Posix 系统下）；例如，`#!/bin/bash`。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-03-14T21:35:09.610

如果`sleep.sh`有 shebang`#!/bin/sh`并且它具有适当的文件权限 - 运行`chmod u+rx sleep.sh`以确保它在其中，`$PATH`那么您的代码应该按原样工作：

```
import subprocess

rc = subprocess.call("sleep.sh") 
```

如果脚本不在 PATH 中，则指定它的完整路径，例如，如果它在当前工作目录中：

```
from subprocess import call

rc = call("./sleep.sh") 
```

如果脚本没有 shebang，那么您需要指定`shell=True`：

```
rc = call("./sleep.sh", shell=True) 
```

如果脚本没有可执行权限并且您无法更改它，例如，通过运行`os.chmod('sleep.sh', 0o755)`，您可以将脚本作为文本文件读取并将字符串传递给`subprocess`模块：

```
with open('sleep.sh', 'rb') as file:
    script = file.read()
rc = call(script, shell=True) 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-12-06T14:35:52.480

实际上，您只需要添加`shell=True`参数：

```
subprocess.call("sleep.sh", shell=True) 
```

但要注意——

> 警告 如果与不受信任的输入结合使用，使用 shell=True 调用系统 shell 可能会带来安全隐患。有关详细信息，请参阅常用参数下的警告。

[来源](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2018-03-12T08:22:55.027

如果有人想**调用带参数的脚本**

```
import subprocess

val = subprocess.check_call("./script.sh '%s'" % arg, shell=True) 
```

请记住在传递之前使用 str(arg) 将 args 转换为字符串。

这可用于根据需要传递尽可能多的参数：

```
subprocess.check_call("./script.ksh %s %s %s" % (arg1, str(arg2), arg3), shell=True) 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-12-06T14:28:11.053

确保它`sleep.sh`具有执行权限，并使用以下命令运行它`shell=True`：

```
#!/usr/bin/python

import subprocess
print "start"
subprocess.call("./sleep.sh", shell=True)
print "end" 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-04-06T05:40:56.450

如果 chmod 不起作用，那么您也可以尝试

```
import os
os.system('sh script.sh')
#you can also use bash instead of sh 
```

*由我测试谢谢*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-08T16:04:19.043

添加一个答案是因为我在询问如何从 python 运行 bash 脚本后被引导到这里。`OSError: [Errno 2] file not found`如果您的脚本接受参数，您会收到错误消息。例如，您的脚本接受了睡眠时间参数：`subprocess.call("sleep.sh 10")`将不起作用，您必须将其作为数组传递：`subprocess.call(["sleep.sh", 10])`

# c# - 如何在使用 XPATH 查询之前将正确的 XML 命名空间提供给管理器

> ID：13745651
> 
> 赞同：0
> 
> 时间：2012-12-06T14:25:24.447
> 
> 标签：c#, xml, xml-namespaces

我有以下 graphml 文档，我想在其上执行 XPATH 查询

```
<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
     http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
  <graph id="G" edgedefault="undirected">
    <node id="n0"/>
    <node id="n1"/>
    <edge id="e1" source="n0" target="n1"/>
  </graph>
</graphml> 
```

我想对该文档执行 XPATH 查询，但由于它定义了一个命名空间，我不确定节点的名称是什么。在这里搜索后，我发现[了这个](https://stackoverflow.com/questions/5123521/xpath-and-xml-multiple-namespaces)问题。接受的答案是剥离命名空间声明并重新加载文档，以便您可以使用本地名称（这违背了 XML 命名空间的要点），但是还有一条评论给了我以下语法：

```
var nodeList = input.SelectNodes("//*[local-name()='node']", nsmgr); 
```

老实说，我也不是很喜欢这个解决方案。在我看来，使用 an`XMLNameSpaceManager`应该可以解决这个问题，所以我尝试了以下方法：

```
string xmlns = input.DocumentElement.Attributes["xmlns"].Value;
XmlNamespaceManager nsmgr = new XmlNamespaceManager(input.NameTable);
nsmgr.AddNamespace("graphml", xmlns); //Problematic?

var nodeList = input.SelectNodes("//node", nsmgr); 
```

但是使用它`//node`并没有给我任何结果，这可能是我标记有问题的行的原因，我不确定 GrapML 的命名空间是如何被调用的，我在 XSD 文档中找不到它（我不知道在哪里看）。有人有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:40:04.157

graphml 命名空间似乎是`http://graphml.graphdrawing.org/xmlns`（来自[http://graphml.graphdrawing.org/primer/graphml-primer.html](http://graphml.graphdrawing.org/primer/graphml-primer.html)）。

因此，使用`nsmgr.AddNamespace("graphml", "http://graphml.graphdrawing.org/xmlns")`将其添加到命名空间管理器，然后使用以下内容选择节点：

```
var nodeList = input.SelectNodes("//graphml:node", nsmgr); 
```

# php - 自定义联系表单模块中的 Magento 可自定义重定向路由

> ID：13745656
> 
> 赞同：0
> 
> 时间：2012-12-06T14:25:36.463
> 
> 标签：php, magento

我们已经在我们的网店中构建了一个自定义 Magento 模块，用于联系查询。

请参阅下面的 IndexController。我们想更改每个商店视图的重定向路线。我们怎样才能做到这一点？

```
<?php
class MVE_ContactInquiry_IndexController extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {
        $this->loadLayout();
        $block = $this->getLayout()->createBlock(
            'Mage_Core_Block_Template',
            'mve.contact_inquiry',
            array(
                'template' => 'mve/contact_inquiry.phtml'
            )
        );
        $this->getLayout()->getBlock('content')->append($block);
        //$this->getLayout()->getBlock('right')->insert($block, 'catalog.compare.sidebar', true);
        $this->_initLayoutMessages('core/session');
        $this->renderLayout();
    }
    public function sendemailAction()
    {

        $params = $this->getRequest()->getParams();
        $mail = new Zend_Mail();       
        $bodytext = '
            Naam: ' . $params['name'] . '
            E-mailadres: ' . $params['email'] . '
            Telefoonnummer: ' . $params['telephone'] . '
            Bericht:
            ' . $params['comment'];
        $mail->setBodyText( $bodytext );

        $mail->setFrom($params['email'], $params['name']);
        $mail->addTo('example@gmail.com');
        $mail->setSubject('Contact aanvraag');
        try {
            $mail->send();
        }
        catch(Exception $ex) {
            Mage::getSingleton('core/session')->addError('Unable to send email.');
        }

        $this->_redirect('contact/bedankt');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:59:04.477

选项1

在 /app/code/local/MVE/ContactInquiry/etc/system.xml

假设您想在左侧导航中创建自己的 Tab

```
<?xml version="1.0"?>
<config>
    <tabs>
        <mve_tab translate="label" module="contactinquiry">
            <label>MVE</label>
            <sort_order>900</sort_order>
        </mve_tab>
    </tabs>
    <sections>
        <contactinquiry translate="label" module="contactinquiry">
            <label>Admin Order Confirmation</label>
            <tab>mve_tab</tab>
            <sort_order>1001</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>
            <groups>
                <general_option translate="label">
                    <label>General Options</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>1</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <redirect_url translate="label">
                            <label>URL </label>
                            <frontend_type>text</frontend_type>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </redirect_url>
                    </fields>
                </general_option>
            </groups>>
        </contactinquiry>
    </sections>
</config> 
```

为了在你的控制器中获得价值，你做

Mage::getStoreConfig('contactinquiry/general_option/redirect_url', Mage::app()->getStore()->getId())

有关更多帮助，请参阅[管理配置的 XML](http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/xml_structure_for_admin_configurations)

选项 2

```
if(Mage::app()->getStore()->getStoreId() == 1){
    $this->_redirect('contact/...');
}
else if(Mage::app()->getStore()->getStoreId() == ...){
    $this->_redirect('contact/..');
}
else{
    $this->_redirect('contact/bedankt');
} 
```

选项 3

您还可以在每个表单中添加一个隐藏字段，其中包含要重定向到的 url

# php - 我希望我的 PHP 电子邮件代码在完成后重定向到一个页面

> ID：13745657
> 
> 赞同：0
> 
> 时间：2012-12-06T14:25:55.933
> 
> 标签：php

我有一个 PHP 电子邮件脚本工作正常，但理想情况下我想要的不是一条消息：

> 感谢您联系 CF Racing F3，我们会尽快与您联系。

我希望它重定向到一个网址，这是代码：

```
<?php
if(isset($_POST['email'])) {
    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "number8pie@gmail.com";
    $email_subject = "CFR F3 Contact Form";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['message'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $name = $_POST['name']; // required
    $email_from = $_POST['email']; // required
    $message = $_POST['message']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  }
  }
  if(strlen($message) < 2) {
    $error_message .= 'The Message you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Message: ".clean_string($message)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

Thank you for contacting CF Racing F3, we will be in touch with you very soon.

<?php
?> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:31:34.253

您需要使用以下语句：

```
header("Location: http://www.test.com/test.php"); 
```

确保在此行之前不输出或打印任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:27:25.880

通过更改以下内容进行标头重定向：

```
?>

Thank you for contacting CF Racing F3, we will be in touch with you very soon.

<?php
?> 
```

对此：

```
header( "Location: http://www.example.com/email_done.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:31:34.177

如果您想在发送电子邮件后重定向，那么您可以使用

```
if(mail($email_to, $email_subject, $email_message, $headers)){
header( "Location: http://www.example.com/email_success.php");
} 
```

并在 email_success.php 中添加消息

```
Thank you for contacting CF Racing F3, we will be in touch with you very soon. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:33:34.303

成功发送邮件后，使用它重定向到另一个页面：

```
if (mail($email_to, $email_subject, $email_message, $headers)) {
    header("Location: http://your_domain.com/your_page.php");
} 
```

# javascript - 如何在浏览器快捷键上调用方法？

> ID：13745661
> 
> 赞同：0
> 
> 时间：2012-12-06T14:26:00.140
> 
> 标签：javascript, html

我正在开发一个关于 HTML 和 javascript 的项目。按 Ctrl+P 浏览器将打印网页（它正在显示）。为了阻止这个我正在使用

```
 e.preventDefault(); 
```

但是当我试图在此之后调用我的函数时，浏览器的打印被启用。我想阻止浏览器打印弹出窗口并想显示我的弹出框。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:31:07.170

这应该可以工作（在 Chrome、Safari 和 Firefox 中测试）（[jsfiddle](http://jsfiddle.net/zUt7X/)）：

```
$(window).keydown(function(evt){ 
    if((evt.which == "80" && ( evt.metaKey || evt.ctrlKey ))){  
            evt.preventDefault(); 
            alert('not printing anything here');
    }  
});​ 
```

更多资源：[http](http://h43z.blogspot.de/2012/11/whats-real-and-whats-not.html) ://h43z.blogspot.de/2012/11/whats-real-and-whats-not.html，http : [//labs.neohapsis.com/2012/11/14/browser-event-hijacking](http://labs.neohapsis.com/2012/11/14/browser-event-hijacking/) [/，http://arstechnica.com/security/2012/12/how-script-kiddies-can-hijack-your-browser-to-steal-your-password/](http://arstechnica.com/security/2012/12/how-script-kiddies-can-hijack-your-browser-to-steal-your-password/) [_](http://labs.neohapsis.com/2012/11/14/browser-event-hijacking/) _

编辑：没有 jQuery 版本：

```
document.addEventListener('keydown',function(evt){
    if((evt.which == "80" && ( evt.metaKey || evt.ctrlKey ))){  
            evt.preventDefault(); 
            alert('not printing anything here');
    }  
}); 
```

# c# - Getting access denied when raising property changed

> ID：13745672
> 
> 赞同：1
> 
> 时间：2012-12-06T14:26:49.953
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml, windows-store-apps

I have a class defined like this (i have removed some code lines, like null checks, to keep it short):

```
public sealed class CodeTheme : INotifyPropertyChanged
{
    public void Reload()
    {
        PropertyChanged(sender, new PropertyChangedEventArgs("MyProperty"));
    }

    public Thickness MyProperty
    {
        get
        {
            return new Thickness():
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

I am registering the codetheme class in XAML like this, using the StandardStyles.xaml

```
<me:CodeTheme x:Key="Theming" /> 
```

Than, i am using it in varios templates and styles, like so:

```
<Style x:Key="Style1" TargetType="ListViewItem">
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="VerticalContentAlignment" Value="Stretch" />
    <Setter Property="Margin" Value="{Binding Source={StaticResource Theming}, Path=MyProperty}" />
</Style> 
```

I then i might call the `Reload` method at any time in the program, the first time in the overwritten `OnLaunched` event of the App.xaml.cs

This works for colors, strings and other Thickness values when i assign them in `DataTemplate`. However when i use it in a `Style`, i get the following error as soon as i fire the `PropertyChanged` event:

> System.UnauthorizedAccessException was unhandled by user code HResult=-2147024891 Message=Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)) Source=System StackTrace: (i have removed this) InnerException:

I have tried to raise the event by `RunAsync` from the `Window.Current.Dispatcher` but that didnt change anything. What am i doing wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:51:56.107

Bindings were not supported in Style Setters last time I checked.

# php - MYSQL Joomla 数据库调用无法正常运行

> ID：13745673
> 
> 赞同：0
> 
> 时间：2012-12-06T14:26:52.203
> 
> 标签：php, mysql, joomla

我在 Joomla 中的数据库调用存在问题，而我正在循环通过一个数组以提取所有记录，如果有一个匹配的值 LIKE 该数组值。

这是我的代码：

```
$time = JRequest::getVar('time');

    if($time == 'Morning') {
        $times = array('07', '08', '09', '10', '11');
    }
    if($time == 'Afternoon') {
        $times = array('12', '13', '14', '15', '16');

    }
    if($time == 'Evening') {
        $times = array('17', '18', '19', '20', '21');
    }
    if(isset($times)) {
        $first = array_shift($times);
        $query->where('a.startTime LIKE "%'. $first .'%"');
        foreach($times as $tim => $val) {               
            $query->or('a.startTime LIKE "%'. $val .'%"');
        }
    }
    $query->order('a.weekday,a.startTime ASC');

    return $query; 
```

如果时间等于“Morning”，我只希望它返回具有“Morning”数组中的值的记录。我的查询的“或”部分有问题。我不认为 '$query->or' 是一个有效的函数？我希望查询执行“WHERE a.startTime LIKE arrayvalue1 OR LIKE arrayvalue2....etc”，但我不确定如何使用 Joomla 数据库查询来执行此操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:41:07.027

您忘记在查询的开头添加这些行：

```
$query = $db->getQuery(true);
$query->select('*'); 
```

有关更多详细信息，请访问此链接： [JDatabaseQuery](http://docs.joomla.org/API16%3aJDatabaseQuery)

# mongodb - mongodb在哪里导出文件？

> ID：13745677
> 
> 赞同：4
> 
> 时间：2012-12-06T14:27:04.963
> 
> 标签：mongodb

我正在努力使用 mongoexport 查找使用 Mongo 导出的文件的位置

```
mongoexport --db databaseName --collection collName --out file.json 
```

有人可以指点我的位置吗

我在默认安装 mongo 的 ubuntu 服务器上运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:36:38.337

Mongoexport 在当前目录生成输出文件

但如果你不能只找到一个文件，我会做这样的事情：

```
mongoexport --db databaseName --collection collName --out /pathToYourFile/file.json 
```

在这种情况下，您肯定会知道它会在哪里。确保您有权在该文件夹中写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-22T10:30:30.260

如果不指定文件名，mongoexport 会将数据写入标准输出。

来源：[https ://docs.mongodb.com/manual/reference/program/mongoexport/#cmdoption-out](https://docs.mongodb.com/manual/reference/program/mongoexport/#cmdoption-out)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-17T20:00:42.560

它将在您当前的目录中。在 linux 机器上运行`pwd`命令以查看当前路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T23:22:48.207

实际上，mongoexport 命令会在当前目录中生成 out 文件。

# .net - Silverlight 数据网格禁用特定单元格

> ID：13745679
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:27:09.610
> 
> 标签：.net, silverlight, validation, datagrid, silverlight-4.0

silverlight 的元素中必须有一个验证：如果在组合框中选择了特定值，则必须禁用`DataGrid`同一行 ( ) 上的复选框列。`DataGridCheckBoxColumn`但是，据我所见，我只能禁用整个列，这是**不可接受**的。

那么，如果我有坐标（行、列），如何禁用特定的单元格？

PS 类似的问题 -[这里](https://stackoverflow.com/questions/9129336/disabling-specific-cell-edit-in-datagrid)不适合我。silverlight 4中**没有 CellEnter 和 CellLeave 事件**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:36:27.510

部分答案可能是：

```
private void DisableCheckboxColumnInRow(DataGridRow row)
{
    var checkBoxColumn = Datagrid1.Columns[0];
    var checkBoxCell = GetCell(checkBoxColumn, row);
    checkBoxCell.IsEnabled = false;
}

private static DataGridCell GetCell(DataGridColumn column, DataGridRow row)
{
    var cellContent = column.GetCellContent(row);
    return (DataGridCell)cellContent.Parent;
} 
```

但是我可能有更好的方法来使用 MVVM 做到这一点：

视图模型部分：

```
public class TestItem : INotifyPropertyChanged
{
    private bool _isChecked;
    public bool IsChecked
    {
        get { return _isChecked; }
        set
        {
            _isChecked = value;
            OnPropertyChanged("IsChecked");
        }
    }

    private bool _canBeChecked;
    public bool CanBeChecked
    {
        get { return _canBeChecked; }
        private set
        {
            _canBeChecked = value;
            OnPropertyChanged("CanBeChecked");
        }
    }

    private string _selectedValue;
    public string SelectedValue
    {
        get { return _selectedValue; }
        set
        {
            _selectedValue = value;
            OnPropertyChanged("SelectedValue");
            // here we do the 'magic':
            CanBeChecked = SelectedValue != "one";
        }
    }

    public IEnumerable<string> PossibleValues
    {
        get
        {
            yield return "one";
            yield return "two";
            yield return "free";
        }
    }

    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion
} 
```

查看部分：

```
<Controls:DataGridTemplateColumn>
    <Controls:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox ItemsSource="{Binding PossibleValues}" SelectedItem="{Binding SelectedValue,Mode=TwoWay}" />
        </DataTemplate>
    </Controls:DataGridTemplateColumn.CellTemplate>
</Controls:DataGridTemplateColumn>
<Controls:DataGridTemplateColumn>
    <Controls:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding IsChecked,Mode=TwoWay}" IsEnabled="{Binding CanBeChecked}" />
        </DataTemplate>
    </Controls:DataGridTemplateColumn.CellTemplate>
</Controls:DataGridTemplateColumn> 
```

# ruby-on-rails - 让 rails-api 和 strong_parameters 一起工作

> ID：13745689
> 
> 赞同：10
> 
> 时间：2012-12-06T14:27:43.487
> 
> 标签：ruby-on-rails, rails-api, strong-parameters

当包括

```
gem 'strong_parameters'
gem 'rails-api' 
```

一起在我的身边，`Gemfile`呼唤`params.require`

```
private
  def user_params
    params.require(:user).permit(:first_name, :last_name)
  end 
```

调用失败并出现以下错误`require()`。

```
TypeError:
   can't convert Symbol into String 
```

回溯显示`strong_parameters`' `ActionController::StrongParameters`'`require()`方法从未被命中。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-06T14:27:43.487

我在这个上花了太长时间，所以我想我会在这里分享，希望能为别人节省一点时间。

上面的错误来自调用时正在执行的[`require()`](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/dependencies.rb#L225)方法`ActiveSupport::Dependencies::Loadable`

```
params.require(:user)... 
```

`strong_parameters`注入`ActionController::StrongParameters`到[这个文件](https://github.com/rails/strong_parameters/blob/master/lib/action_controller/parameters.rb#L148)的`ActionController::Base`底部

```
ActionController::Base.send :include, ActionController::StrongParameters 
```

`rails-api`gem 需要您的应用程序的扩展`ApplicationController`以`ActionController::API`支持`ActionController::Base`

应用程序控制器对此一无所知，`ActionController::StrongParameters`因为它们没有扩展`ActionController::StrongParameters`包含在其中的类。这就是为什么`require()`方法调用没有调用`ActionController::StrongParameters`.

讲述就像将以下内容添加`ActionController::API`到.`ActionController::StrongParameters``config/initializers`

```
ActionController::API.send :include, ActionController::StrongParameters 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-24T12:15:56.843

这个问题可以通过在 Gemfile 中包含**rails_api master git 分支**来解决，如下所示：

```
gem 'rails-api', git: 'https://github.com/rails-api/rails-api.git', branch: 'master' 
```

rails_api gem通过在[api.rb](https://github.com/rails-api/rails-api/blob/master/lib/rails-api/action_controller/api.rb)中包含以下行来解决此[问题](https://github.com/rails-api/rails-api/commit/04846e05b7b57d7811bb8df1d6b44b0c12318877)

```
if Rails::VERSION::MAJOR == 4
   include StrongParameters
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T21:11:29.517

我有一个[拉取请求](https://github.com/rails/strong_parameters/pull/144)（当前打开），应该解决这个问题。而不是调用`ActionController::API.send`，这应该包含在...

```
ActiveSupport.on_load(:action_controller) do
  include ActionController::StrongParameters
end 
```

# javascript - Google Maps Uncaught TypeError：无法读取未定义的属性“LatLng”

> ID：13745693
> 
> 赞同：6
> 
> 时间：2012-12-06T14:27:56.850
> 
> 标签：javascript, api, google-maps

尝试
在头部创建地图时，我不断收到此错误“Uncaught TypeError: Cannot read property 'LatLng' of undefined”：

```
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"/>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&sensor=true"></script> 
```

......

```
function init(){

            var latlng = new google.maps.LatLng(-43.552965, 172.47315);
            var myOptions = {
                zoom: 10,
               center: latlng,
               mapTypeId: google.maps.MapTypeId.ROADMAP

            };
           map = new google.maps.Map(document.getElementById("map"), myOptions);

        } 
```

......

```
 <body>
        <div id="map" style="width:600px;height: 600px;">
        </div>
        <ul class="navigation">
        </ul>
    </body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-24T14:27:03.150

如果一起使用，上面的两个答案都可以解决这个问题。属性 LatLng 未定义，因为`google`对象尚不可用。

你总是关闭你的`<script>`标签期。

`google`在加载 DOM 之前，对象将不可用。所以在你的 javascript 中你必须使用谷歌地图的`addDomListener()`. Kara 的解决方案是正确的，但它不适用于您的情况，因为函数名称是 init 并且 addDomListener 必须等待“加载”。你需要：

```
google.maps.event.addDomListener(window, 'load', init); 
```

另一个非常简单的解决方案是将回调添加到脚本

```
src="https://maps.googleapis.com/maps/api/js?v=3&sensor=true&callback=init 
```

回调将等待脚本加载，然后触发您的`init`函数来初始化和绘制您的地图。

我把解决方案放在 CodePen 上[http://codepen.io/redbirdisu/pen/BHivq](http://codepen.io/redbirdisu/pen/BHivq)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T15:00:29.607

看起来问题是缺少`<script>`jquery.js 包含的结束标记：

```
 <script 
   type="text/javascript"
   src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"/>
 <script 
   type="text/javascript" 
   src="https://maps.googleapis.com/maps/api/js?v=3&sensor=true">
 </script> 
```

`<script>`标签需要用 关闭`</script>`，它应该是：

```
 <script 
   type="text/javascript" 
   src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js">     
 </script>
 <script 
   type="text/javascript" 
   src="https://maps.googleapis.com/maps/api/js?v=3&sensor=true">
 </script> 
```

有关更多信息，请参阅：[为什么自闭合脚本标签不起作用？](http://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:40:11.880

你什么时候运行你的初始化函数？如果 init 函数在 google.js 加载之前运行，你会得到这个错误。

尝试像这样调用初始化函数。

```
function init(){
      //...
}
google.maps.event.addDomListener(window, 'init', Initialize); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-13T05:56:02.183

我也有同样的问题，所有语法都是正确的。尝试通过向上/向下移动 HTML 文件的脚本文件来修复，但没有一个成功。

我所做的是，`&callback=init`从 URL 中删除 并在`$(document).ready(function () {})`. 现在它完美地工作了。

# java - 静态方法，静态变量可以被Web应用程序中的多个线程变异 - jsp

> ID：13745694
> 
> 赞同：3
> 
> 时间：2012-12-06T14:27:55.637
> 
> 标签：java, multithreading, jsp, methods, static

我正在做这个项目。有一个类 DefaultsHelper 具有：

```
 public  class DefaultsHelper {

    static SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd") ;

    public static String getDate(int days)
    {
        GregorianCalendar c = new GregorianCalendar() ;
        c.setTime(new Date()) ;
        c.add(Calendar.DAY_OF_MONTH, days);
        return df.format(c.getTime()) ;

    }
} 
```

在 Web 应用程序中 - 如果两个用户同时查看一个 jsp 并调用 getDate 函数 - df 对象是否可能会变得不一致，从而不返回预期值？

我认为 DefaultsHelper 旨在成为一个实用程序类，无需实例化新的 df 对象

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:29:59.027

您为每个线程创建一个新`Calendar`的，这很好，但是您正在使用`SimpleDateFormat`跨多个线程。如果该类是线程安全的，那就没问题了，*但它不是*.

`SimpleDateFormat`[因线程不安全](https://stackoverflow.com/questions/6840803/simpledateformat-thread-safety)而臭名昭著。只需为每个调用（即在方法中）创建一个新的，或者更好的是，使用[Joda-Time](http://joda-time.sourceforge.net/)来完全避免线程问题。

关于创建一个格式化程序类作为优化的主题，这是过早优化和无意结果的经典示例。鉴于这是在 JSP 中，HTTP 请求/响应时间将使新格式化程序的实例化时间（和资源要求）相形见绌。使您的类线程安全且不可变，并在出现问题时担心优化。

# android - 在 TextView 中格式化文本

> ID：13745705
> 
> 赞同：0
> 
> 时间：2012-12-06T14:28:19.970
> 
> 标签：android, textview

我在线性布局中有两个文本视图。在一个文本视图中，文本包含 21 个字符，而在另一个文本视图中，文本仅包含 12 个字符。第一个文本视图显示为两行，第二个文本视图显示为单行。我希望两个 textview 文本在单行或双行中都应该相同。

我使用了以下代码：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" >

    <TextView
        android:id="@+id/tvtextview1"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_margin="1dp"
        android:layout_weight="1"
        android:inputType="textMultiLine"
        android:scrollHorizontally="false"
        android:gravity="center"
        android:textColor="#FFFFFF"
        android:textSize="16sp" >
    </TextView>

    <TextView
        android:id="@+id/tvtextview2"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_margin="1dp"
        android:layout_weight="1"
        android:scrollHorizontally="false"
        android:gravity="center"
        android:inputType="textMultiLine"
        android:textColor="#FFFFFF"
        android:textSize="16sp">
    </TextView>
</LinearLayout> 
```

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:37:10.810

如果您希望它们都是单行使用`android:singleLine="true"`：

```
<TextView
    android:layout_margin="10dip"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true"
    android:text="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    android:textSize="16sp" />

<TextView
    android:layout_margin="10dip"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true"
    android:text="xxxxxxxxxxxxxxxxxxxxxxxx"
    android:textSize="16sp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:24:28.873

添加`android:minLines="2"`两个`<TextView>`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:33:32.307

```
android:singleLine="true" 
```

此外，您的两个文本视图都具有完全相同的 ID。你可能想改变它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:40:58.200

您可以设置属性：

```
android:lines="2"
android:maxLines="2" 
```

对于两个 TextView

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T14:43:29.217

试试这个示例代码来修复文本视图的高度

```
<TextView
    android:id="@+id/tvtextview1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="1dp"
    android:gravity="center"
    android:minHeight="50dp"
    android:singleLine="true"
    android:scrollHorizontally="false"
    android:text="sdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsd"
    android:textSize="16sp" >
</TextView>

<TextView
    android:id="@+id/tvtextview2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="1dp"
    android:gravity="center"
    android:lines="2"
    android:minHeight="50dp"
    android:inputType="textMultiLine"
    android:scrollHorizontally="false"
    android:text="sdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsdsdfsdfsdfsdfsd"
    android:textSize="16sp" >
</TextView> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T15:21:01.660

以编程方式检索屏幕宽度和 2 个文本的最大宽度。如果文本宽度大于屏幕宽度，则`TextView`在您的情况下将行数设置为 2。否则，到 1。

用于`Paint`计算文本的宽度。

```
 int screenWidth = this.getWindowManager().getDefaultDisplay().getWidth();

    TextView t1 = (TextView) this.findViewById(R.id.tvtextview1);
    TextView t2 = (TextView) this.findViewById(R.id.tvtextview2);

    Paint paint = new Paint();
    String longText = "123456789012345678901";

    paint.setTextSize(30);

    float textWidth = paint.measureText(longText);

    if((int)textWidth > screenWidth)
    {
        t1.setLines(2);
        t2.setLines(2);
    } else
        {
            t1.setLines(2);
            t2.setLines(2);
        } 
```

# matlab - 分配从二维矩阵中随机选择和删除行

> ID：13745706
> 
> 赞同：4
> 
> 时间：2012-12-06T14:28:35.417
> 
> 标签：matlab, variables, random, row

我有一个包含 stimlui 的 35x2 矩阵，用于单词记忆实验。每次运行我的程序时，我都需要随机抽取 16 个单元格，以便实验总是不同的。我已经设法使用 datasample() 创建一个 8x2 矩阵来做到这一点，但是我需要将它们从 35x2 中删除，以确保它们不会在两次试验的第二次中被重新选择。当单元格坐标已知时，我知道如何删除单元格；但不是每次随机选择它们时。任何建议将不胜感激。

谢谢

凯利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:34:53.213

`Datasample`返回它选择的索引。考虑这个

```
 m = rand(35,2);             % // test matrix
  [s i ] = datasample(m,8,1); % // s are the samples, i are their indices
   m(i,:) = [];               % // elimination of selected samples 
```

# php - facebook访问令牌仅在一个页面上工作

> ID：13745707
> 
> 赞同：2
> 
> 时间：2012-12-06T14:28:40.037
> 
> 标签：php, facebook, facebook-graph-api, yii, facebook-php-sdk

我的应用程序在过去 3 个月内运行良好，但由于 Facebook 的一些变化而遇到了一个新问题。当我通过以下方式获得访问令牌时：

```
$facebook->getAccessToken(); 
```

它返回一个有效的令牌并获取用户信息。但是在另一个页面上，我再次使用相同的函数来获取访问令牌，并且我得到了无效的访问令牌，包括应用程序 ID。我试图获取访问令牌并将其保存到会话并在另一个页面上使用，但它显示异常`OAuthException: An active access token must be used to query information about the current user.` 但令牌有效，我已经 [在这里检查过](https://developers.facebook.com/tools/debug/access_token)

可能是“ [2012 年 12 月 5 日更改](https://developers.facebook.com/roadmap/completed-changes/)”的原因吗？我认为我的应用程序令牌的有效期不到一分钟。请帮我。

代码-->

```
$facebook = Yii::app()->facebook;
try {
    $facebook_uid = $facebook->getUser(); 

    $accessToken = $facebook->getAccessToken();
    $fbuser = $facebook->api('/me');

 }catch(Exception $e) {

     $access_token = $_SESSION['fb_396582000367255_access_token'];
     $facebook->setAccessToken($access_token);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:34:34.917

这是一个错误[https://developers.facebook.com/bugs/404450666302585](https://developers.facebook.com/bugs/404450666302585)但您可以使用 Shawn Carter 的解决方法。如果您确实使用了他的解决方法，您需要阻止 Facebook SDK 清除会话。这就是你只能让它工作一次的原因。这样做的一种粗略且非常肮脏的方法是修改 facebook.php 方法以清除所有持久数据。

```
protected function clearAllPersistentData() {
  return;
  foreach (self::$kSupportedKeys as $key) {
      $this->clearPersistentData($key);
  }
} 
```

除了让它为其他人工作（谁的会话没有设置），你需要允许 facebook 做一次它的事情。所以我正在做的是：

```
$tok = $facebook->getAccessToken();

if(strpos($tok, $config["appId"]) == 0 && isset($_SESSION["fb_" . $config["appId"] . "_access_token"]))
{
    $facebook->setAccessToken($_SESSION["fb_" . $config["appId"] . "_access_token"]);
    $tok =$_SESSION["fb_" . $config["appId"] . "_access_token"];
} 
```

请注意，这一切都很肮脏。由于您已经用清除会话的事情弄混了水，您还需要自己清除会话以处理其他身份验证情况，例如用户注销、删除然后重新添加您的应用程序等......等等......所以虽然在他们修复 SDK 之前，您可以在短期内执行此操作，不要将其留在您的代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:12:15.307

尝试这个。有些事情有点乱，你在 try catch 的 else 开关中设置了令牌。

```
$facebook = Yii::app()->facebook;
try {
    $facebook_uid = $facebook->getUser(); 
     $access_token = $_SESSION['fb_396582000367255_access_token'];
     $facebook->setAccessToken($access_token);
    //$accessToken = $facebook->getAccessToken();
    $fbuser = $facebook->api('/me');

 }catch(Exception $e) {

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:48:54.133

尝试使用 fb **sr** _396582000367255_access_token 代替 fb_396582000367255_access_token

# c++ - 测量 C++ 代码的最准确但“最便宜”的方法？

> ID：13745717
> 
> 赞同：2
> 
> 时间：2012-12-06T14:29:06.797
> 
> 标签：c++, boost, cpu

我想要一种尽可能准确地测量 C++ 代码的方法。我确实看到 boost 有一个高分辨率时钟，但是 boost 文档说它在性能方面是一个昂贵的时钟——有点违背了目的：

[http://www.boost.org/doc/libs/1_47_0/doc/html/chrono/users_guide.html](http://www.boost.org/doc/libs/1_47_0/doc/html/chrono/users_guide.html)

还有哪些其他方法？有什么方法可以测量 CPU 周期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:09:48.577

如果您使用的是 GCC，请尝试 GNU profiler (gprof) [http://sourceware.org/binutils/docs/gprof/](http://sourceware.org/binutils/docs/gprof/)。Gprof 可能会为您提供最准确的结果。

由于上下文切换（黑白进程或线程），在函数中获取开始/结束时间的差异不太准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:37:00.233

在 Windows 上使用 QueryPerformanceCounter()。

在 Solaris 上使用 gethrtime()。

在其他 UNIX 上使用 gettimeofday()。

当然，您应该将它们包装在一个类中，以便您的代码仅使用该类而不是直接使用方法。

我们使用一个类

```
class dbbHighResTimer {
public:
    dbbHighResTimer(); // Does call set()
    dbbHighResTimer( int ); // Does not call set()
    void    set();
    friend double operator - ( const dbbHighResTimer &, const dbbHighResTimer & );
    friend int compare( const dbbHighResTimer &, const dbbHighResTimer & );
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:53:10.693

如果这是为了在 Windows 上进行分析，请使用 rdtsc 指令，前提是它在您的 CPU 上是准确的（请参阅[如何检测 RDTSC 是否返回恒定速率计数器值？](https://stackoverflow.com/questions/4509727/how-to-detect-if-rdtsc-returns-a-constant-rate-counter-value)进行讨论）。它比 QueryPerformanceCounter 快很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T14:54:23.670

如果您想要外部或内部分析，我无法从您的问题中看出。

对于外部分析，您可以在 Windows 上使用 Quantify（或其继任者），在任何带有 g++ 和朋友的 unix 上使用 gprof。如果您使用 Solaris，您甚至还有 dtrace，您可以将其附加到正在运行的应用程序以进行统计分析。

如果您正在寻找内部分析，那么`gettimeofday`在 Solaris/Linux 上，除了在紧密循环中之外，其他任何东西都应该具有足够的性能。

# jquery - IOS HTML5 App - Jquery 滑块也允许点击动作

> ID：13745718
> 
> 赞同：2
> 
> 时间：2012-12-06T14:29:07.833
> 
> 标签：jquery, ios, html, css

我正在构建一个 HTML5 IOS 应用程序 - 它的简介过于复杂！

基本上我正在构建一个锻炼指南 - 该功能需要用户左右滑动以显示替代的锻炼表格 - 用户可以扩展和收缩每个表格单元以显示详细的锻炼信息，也可以单击复选框以禁用单元格当任务完成时。

所以基本上我需要有一个滑动滑块脚本，它不会推翻滑块区域内的点击操作——所以我可以触发其他脚本来使功能起作用。

我开始使用这个库 - [http://swipejs.com/](http://swipejs.com/)很好地滑动 - 但在 iphone 上运行时不允许在滑块内点击/点击。

任何人都可以推荐一个方法/库来让我做需要的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:41:30.477

我知道这里的无耻插件，但我认为我几个月前编写的库应该可以实现您所追求的： [https ://github.com/benmajor/jQuery-Mobile-Events](https://github.com/benmajor/jQuery-Mobile-Events)

您可以轻松地将多个事件绑定到滑块：

```
$('#slider').swiperight(function() {  
    // Do something here when the user swipes right.
}).swipeleft(function() {  
    // Do something here when the user swipes left.
}).singletap(function() {  
    // Finally, handle the tap event.
}); 
```

# c# - 如何基于现有的 C# 片段在 F# 中创建可观察函数？

> ID：13745726
> 
> 赞同：0
> 
> 时间：2012-12-06T14:29:32.167
> 
> 标签：c#, f#, reactive-programming, c#-to-f#

我正在尝试将以下代码转换为 F#：

```
static void Main(string[] args)
{
    var y = Observable.Create<int>(x =>
        {
            x.OnNext(5);
            return (() => { });
        });

    y.Subscribe(x => Console.WriteLine(x));
} 
```

尝试了以下方法：

```
let ob = Observable.Create<int>(fun x -> 
                                    x.OnNext(5)
                                    fun unit -> unit) 
```

但没有成功。我应该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T15:08:37.557

```
let observable = Observable.Create(fun (x: IObserver<_>) ->
  x.OnNext(5)
  Action(ignore))

observable.Subscribe(printfn "%d") |> ignore 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T15:39:55.463

如果你的 Observable 不能被取消（通常是同步的），使用单例会更有效`Disposable.Empty`

```
Observable.Create(fun (o : IObserver<_>) -> 
    o.OnNext(5)
    Disposable.Empty
) 
```

# c++ - Poco 任务管理器 / Boost 线程混合匹配

> ID：13745727
> 
> 赞同：0
> 
> 时间：2012-12-06T14:29:35.703
> 
> 标签：c++, boost, poco-libraries, taskmanager

我很难决定是否应该在我们的产品中使用 Poco。我们目前使用提升，但提升是非常低的水平。我想使用 Poco 中的一些功能。目前我只需要两个，Task Manager 和 Timer 类，但是它们依赖于使用 Poco::Thread over Boost::Thread 等的线程池。

我想删除我们当前的任务管理框架并使用 Poco 框架，因为它更适合。这么说，我担心未来的后果以及 Poco 对象和 Boost 对象的混合。

我可以看到其他一些 Poco 软件包的好处，也许我将来会使用它们，但现在，我真的只需要一个好的任务管理器。

这就是我如何看待我的选择
Poco :
Pro – 我毫不费力地获得了一个经过良好测试的工作任务管理器。
缺点 - 我将在模块中引入另一个基础层库，混合和
匹配可能是未来的一个问题。

Boost：
Pro – 我仍然使用 boost，我们没有其他依赖项。
缺点 - 编写 Poco 任务管理器/计时器的等效项需要时间，并且不会
获得社区压力测试/代码检查的好处。（我也在重新发明轮子）
骗局——我们错过了其他可能会很有帮助的 Poco 包，例如 xml、缓存、Unicode 支持等。

完全使用 Poco 并停止使用 Boost Pro——
我们可以使用 Poco 的所有功能，这些功能都是以更高的抽象级别编写的，我们可以快速实现功能。
缺点 - 如果我们将来需要 Boost 中的某些东西，我们将无法使用它。
缺点 - 重新编写使用 boost 的当前代码需要大量工作。

当我查看实现时，我正在沿着混合它们的路线前进，它们看起来很相似，但是问题已经提出，现在我不确定。
我一直在寻找这方面的文档，但没有找到任何结论，我希望得到社区对最可取的行动的回应。
我毫不怀疑更多的工程师会希望将 boot 与 Poco 一起使用，所以也许他们在搜索时会看到这一点。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:31:32.137

我们在项目中混合使用 Poco 和 boost，这种组合效果非常好。在我看来，boost 有一组很棒的低级算法，而 Poco 提供了一组非常有用的高级应用程序对象。两个库之间没有明确的界限，但这就是我们使用它们的方式。例如用于信号/插槽、foreach 等的 boost，以及用于线程、HTTP 服务、Unicode/UTF8 转换的 Poco。这两个库都适用于 OS X、Windows、Linux、iOS 和 Android 上的通用代码。

# php - 按字母顺序输出数组

> ID：13745728
> 
> 赞同：-6
> 
> 时间：2012-12-06T14:29:35.553
> 
> 标签：php, arrays

我有很多这样的用户：

```
Array
(
    [9] => Array
        (
            [id] => 246
            [name] => John
            [surname] => Doe 
        )
   [13] => Array
        (
            [id] => 246
            [name] => Mark
            [surname] => Doe 
        )

    [19] => Array
        (
            [id] => 246
            [name] => Bill
            [surname] => Buffalo 
        )
) 
```

我想有这样的输出：

```
<h4>B</h4>
 Buffalo Bill
<h4>D</h4>
 John Doe
 Mark Doe 
```

我怎样才能完成这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:36:58.363

你可以试试

```
$group = array_reduce($data, function($a,$b) { $a[$b['surname']{0}][] = $b; return $a; } );
ksort($group);

foreach($group as $id => $data)
{
    printf("<h4>%s</h4>\n",$id);
    foreach($data as $name)
    {
        printf("%s %s\n",$name['name'],$name['surname']);
    }
} 
```

输出

```
<h4>B</h4>
Bill Buffalo
<h4>D</h4>
John Doe
Mark Doe 
```

[查看完整演示](http://eval.in/4306)

# dns - 修复我的 dns 区域中的 www 记录？

> ID：13745735
> 
> 赞同：0
> 
> 时间：2012-12-06T14:29:54.787
> 
> 标签：dns, webserver, domain-name

我有域名，即。example.com，我有一个问题，如果我去 `http://example.com`它可以工作，但是如果我去 www.example.com，它不起作用，我的 dns 区域文件如下

> ```
>  NAME    TYPE    Value 
>  @       A       ip_address     // http://example.com this works!
>  www     CNAME   example.com    // this deosnt work. 
> ```

我不知道是什么问题，我在网上搜索但找不到任何东西，我的域名是在 gandi.net 注册的，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:23:10.747

CNAME 资源记录将域名作为值。此值相对于当前域或绝对值。绝对域名以一个点结尾。这是来自[RFC1033](http://www.ietf.org/rfc/rfc1033.txt)的参考：

> 区域文件中的域名可以是绝对或相对两种类型之一。绝对名称是完全限定的域名，并**以句点结尾**。相对名称不会以句点结尾，并且会附加当前的默认域。

如果你把你的`example.com`区域，你可以有

```
@        A       XXX.XXX.XXX.XXX
www      CNAME   @ 
```

或（请注意 example.com 末尾的点。）

```
@        A       XXX.XXX.XXX.XXX
www     CNAME    example.com. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:43:04.473

我会尝试始终使用 @ 和 example.com，所以要么：

```
NAME   TYPE    Value 
@       A       ip_address     // http://example.com this works!
www     CNAME   @  // this deosnt work. 
```

或者

```
NAME             TYPE    Value 
example.com      A       ip_address     // http://example.com this works!
www              CNAME   example.com    // this deosnt work. 
```

# ruby-on-rails - 使用子域且无子域的多租户 Ruby 应用程序

> ID：13745738
> 
> 赞同：1
> 
> 时间：2012-12-06T14:30:02.503
> 
> 标签：ruby-on-rails, devise, multi-tenant

我开发了一个应用程序，它使用具有多模式的 PostgreSQL 来实现应用程序的多租户端。租户是通过子域检查的，但我正在尝试找到一种方法来仍然能够将主域用作我自己的注册点和管理后端。

下面是我的应用程序控制器，我相信检查租户正在发生。

我从这里跟随 railscast [http://railscasts.com/episodes/389-multitenancy-with-postgresql?view=comments](http://railscasts.com/episodes/389-multitenancy-with-postgresql?view=comments)

```
class ApplicationController < ActionController::Base

protect_from_forgery

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path, :alert => exception.message
  end

  before_filter :mailer_set_url_options

  def mailer_set_url_options
    ActionMailer::Base.default_url_options[:host] = request.host_with_port
  end

  around_filter :scope_current_tenant

private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
 helper_method :current_user

  def current_tenant
    @current_tenant ||= Tenant.find_by_subdomain!(request.subdomain)
  end
  helper_method :current_tenant

  def scope_current_tenant(&block)
    current_tenant.scope_schema("public", &block)
  end
end 
```

我注意到的另一个问题是通过设计。似乎是因为多租户，并且在应用程序控制器中定义助手 current_user 对设计中的会话很挑剔，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-26T20:41:09.403

If you do not have a tenant for your main domain (for eg. visitors) and current_tenant therefore is set to nil in that case, you cannot call current_tenant.scope_schema, but I believe you can do something like this:

```
 def current_tenant
   # Select tenant based on a user and set it to nil if no user:
   @current_tenant ||= current_user.tenant unless current_user.nil?
 end
 helper_method :current_tenant

 def scope_current_tenant(&block)
   if current_tenant.nil?
      scope_visitor_schema
      yield
   else
     current_tenant.scope_schema("public", &block)
   end
 end  

 def scope_visitor_schema()
   original_search_path = ActiveRecord::Base.connection.schema_search_path
   ActiveRecord::Base.connection.schema_search_path  = 'public'
 ensure
   ActiveRecord::Base.connection.schema_search_path = original_search_path
 end 
```

In this example tenant is selected based on the user rather than a subdomain, but the approach is the same.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T16:23:08.117

我找到了一个解决方案并忘记发布它，但你的评论让我记住了。这就是我在确定当前客户端范围时正在做的事情：

基本上我使`current_id`某些东西无效，在这种情况下`"admin"`，当子域等于时`"admin"`，并且不设置`current_id`子域为时`www`，或空白（我将用于主页。

希望这可以帮助

```
 def scope_current_client
  case  request.subdomain
    when /^admin$/
        Client.current_id = "admin"
    when /^www$|^$/

    else
        Client.current_id = current_client.id
  end
  yield
  ensure
    Client.current_id = nil         
end 
```

# c++ - Windows 窗体：从另一个文件写入 RichTextBox (C++)

> ID：13745740
> 
> 赞同：1
> 
> 时间：2012-12-06T14:30:27.713
> 
> 标签：c++, winforms, pointers, richtextbox

如何从表单类外部在richTextBox 中输入文本？

我的项目中有四个文件： Form1.h Form1.cpp Main.cpp Importfile.cpp

在 form1.cpp 我使用这个函数：

```
System::Void Form1::SendText_Click(System::Object^  sender, System::EventArgs^  e) 
{
    info_function();
} 
```

在 Importfile.cpp 中，我尝试使用以下代码编写文本：

```
#include "Form1.h"
#include "Importfile.h"

using namespace Forms_test; // the namespace where my Form class is in

void info_function()
{   
    //Form1->richTextBox1.AppendText("Starting slaveinfo\n");
    //formpointer->richTextBox1->AppendText("Starting slaveinfo\n");
    //richTextBox1->AppendText("Starting slaveinfo\n");
    // I tried all three.
} 
```

在我的主文件中，我开始这样的表格：

```
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 

Form1^ formpointer = (gcnew Form1());
Application::Run(formpointer); 
```

我这样做是为了可以使用表单指针以某种方式访问​​我的richtextbox。

我的问题是，当我尝试构建时出现错误：“'-> AppendText' 的左侧必须指向类/结构/联合/通用类型”

我在想它以某种方式找不到我的richTextBox 指针，但我怎样才能确保它可以呢？我知道可能还有更多类似这样的问题，但不知何故我似乎找不到它们。

提前致谢。

# jquery - 如何创建像 Myntra.com 这样的粘性侧边栏（大内容）

> ID：13745741
> 
> 赞同：1
> 
> 时间：2012-12-06T14:30:29.273
> 
> 标签：jquery, html, css, sticky

最近我发现了 myntra.com 并因其动态的侧边栏而感到惊讶。转到此链接：[http](http://www.myntra.com/men-casual-shoes) ://www.myntra.com/men-casual-shoes并查看侧边栏。通常我们通过 jquery 找到了很多 Sticky 项目。但是如果侧边栏中的内容很大，那就行不通了。

但在 Myntra，他们做得很好。在滚动底部，它会粘在底部，在滚动顶部，它会粘在顶部。

已经有这样的插件可用了吗？或我们如何在 Jquery 中做到这一点。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:49:08.720

这应该让您开始使用监视器滚动位置技术：

```
<html>
<body>
<div id="floatMenu">

</div>
</body>
</html> 
```

jQuery：

```
var name = "#floatMenu";
var menuYloc = null;

menuYloc = parseInt($("#floatMenu").css("top").substring(0, $(name).css("top").indexOf("px")))
    $(window).scroll(function () {
        offset = menuYloc + $(document).scrollTop() + "px";
        $(name).animate({ top: offset }, { duration: 500, queue: false });
    }); 
```

CSS：

```
#floatMenu {
    border: 1px solid black;
    height: 200px;
    position: absolute;
    width: 100px;
}

body {height:500px;} 
```

工作示例：[jsFiddle](http://jsfiddle.net/markps/b7K9t/)

更新：

工作示例 2：[jsFiddle](http://jsfiddle.net/markps/7ey9g/95/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:40:00.587

试试那个jquery插件：[waypoint](http://imakewebthings.com/jquery-waypoints/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:10:22.017

对于确切的类似 Myntra 的菜单，这可能对您有所帮助 - [http://techbrij.com/fixed-sidebar-scrolling-jquery-div](http://techbrij.com/fixed-sidebar-scrolling-jquery-div)

# javascript - setDate 到星期天为零的日期

> ID：13745742
> 
> 赞同：0
> 
> 时间：2012-12-06T14:30:30.680
> 
> 标签：javascript, struts2

我正在处理与日期相关的报告，所以在我的项目中，我需要将天设置为零（星期日）例如今天是 2012 年 12 月 6 日（星期四是四 (4)）我想将其设置为最后一周的星期日，即 2012 年 11 月 25 日（日是星期日零（0））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:51:08.523

这可能是你需要的..

```
 function getLastSunday(leWildDate) {
        var res = new Date();
        res.setDate(leWildDate.getDate() - leWildDate.getDay());
        return res;
    }

    alert(getLastSunday(new Date())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:45:13.047

```
var d = new Date();
var dow = d.getDay();
d.setDate( d.getDate() - dow);
console.log(d); 
```

# agile - 如何估计“不那么复杂”但“努力更多”的故事

> ID：13745745
> 
> 赞同：1
> 
> 时间：2012-12-06T14:30:41.540
> 
> 标签：agile, estimation, user-stories

在敏捷过程中**，故事点是复杂性而非时间的度量**。这对于一个不太复杂但需要更多时间来完成的故事有什么好处。

让我举个例子，

**故事 1**：保存用户详细信息。

```
Story points = 2\. Typically Takes about 1 day to complete. 
```

**故事 2：**公司名称已从 X 更改为 Y，需要在应用程序中更新。大约有 40 个屏幕，10 个报告，法律声明所有这些都应该改变。

这是简单任务的典型示例，但需要大量时间来实现（考虑到本地化应用程序，即使遵循适当的开发标准）和测试。

如果我按照传统定义，我会给出故事点 1，但是我看到的速度是错误的，即使工作做得好，速度也会下降。我看过这篇文章，它谈到了这个问题。

`My question is how this task can be compared to the first story and should the effort be included in story point estimation?`

我几乎对这个想法深信不疑，但想知道在这种情况下使用的最佳实践，或者是否有任何我可以阅读的好[文章？](http://www.mountaingoatsoftware.com/blog/its-effort-not-complexity)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:03:40.037

> *“与故事相关的故事点的数量代表了故事的整体规模。没有固定的公式来定义故事的大小。相反，故事点估计是开发一个特性所涉及的工作量、开发它的复杂性、它固有的风险等等的结合。”* ——来自 Mike Cohn 的敏捷估计和规划。

在我的开发团队中，我们根据大小***和***复杂性来估计故事。我向新团队成员描述它的方式是将大小和复杂性视为图表上的两个正交轴。这允许复杂性不同但在相反方向上大小（努力）相同的故事被认为是相对相同的。

根据个人经验，我们发现如果只考虑复杂性，那么您的团队可能会无意中低估需要大量努力才能交付的故事。这将避开您的积压估算，并使使用三角测量等技术来保持估算的相对性变得更加困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T14:53:03.077

我不知道一篇好文章，但这是我们使用故事点估计活动的方法：首先，我们将尽可能多的开发团队成员与产品负责人（PO，客户的决策者）召集在一起，我们让 PO 解释一个任务/故事/功能，然后我们使用计划扑克（以 PO 作为参与者）来评估任务的复杂性，因此要分配的故事点数。

这里重要的部分是，从 PO 的角度或任何开发人员的角度来看，复杂性是不同的。从 PO 来看，您给出的“更改公司名称”示例可能非常简单，但从开发人员的角度来看，它会传播到整个应用程序中，因此非常复杂。

规划扑克帮助我们建立一个框架，让每个人都表达他对复杂性的看法。对我们来说，它给出了很好的估计。

另外，请记住，您的故事点并不代表故事的复杂性，而是故事实现的复杂性。

# c# - C# Linq：选择接受 null 的数字列

> ID：13745746
> 
> 赞同：0
> 
> 时间：2012-12-06T14:30:44.393
> 
> 标签：c#, linq, ado.net, dataset

我有强类型数据集。现在我想用 linq 对数据表进行选择。

我的问题是该表具有允许空值的数字列。但是，如果此列中的数据行没有值，我不知道要执行 Select- 命令。

这是我的查询：

```
var query = from tab1 in localDataSet.simpleTable
            select new {
               line = tab1.IsLineNull ? null : tab1.line,
               wait = tab1.IswaitNull() ? null : tab1.wait
            } 
```

如果 tab1.IsLineNull() 返回 true，我无法设置 line = null，因为数据类型“十进制”（以及所有其他数字值类型）不能为空。但是我应该选择什么呢？我也不能选择0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:35:26.147

我假设您不知道如何创建[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/kwxxazwb.aspx)：

```
var query = from tab1 in localDataSet.simpleTable
        select new {
           line = tab1.IsLineNull ?   new Nullable<decimal>(): tab1.line,
           wait = tab1.IswaitNull() ? new Nullable<decimal>(): tab1.wait
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:35:35.003

你必须在你的 ? : 到 tab1.line 和 tab1.wait 的类型。

```
var query = from tab1 in localDataSet.simpleTable
            select new {
               line = tab1.IsLineNull ? (decimal?)null : tab1.line,
               wait = tab1.IswaitNull() ? (decimal?)null : tab1.wait
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:36:24.740

放一个

```
(int?) 
```

或者

```
(decimal?) 
```

之前`null`，它将 转换`null`为可为空的整数/小数

另外，如果你的方法：

```
IsLineNull
IswaitNull 
```

只需控制字段是否为空，您可以减少以下问题：

```
var query = from tab1 in localDataSet.simpleTable
            select new {
               line = (int?)tab1.line,
               wait = (int?)tab1.wait
            } 
```

# phpunit - phpstorm - 用户不同的phpunit如何？

> ID：13745749
> 
> 赞同：0
> 
> 时间：2012-12-06T14:30:52.020
> 
> 标签：phpunit, phpstorm

我系统上安装的phpunit是老版本，我无权更改。所以我下载了一个当前版本的 phpunit 并将它（例如）放在 /home/myname/apps/PHPUnit/

我怎样才能让 phpstorm 使用那个 phpunit 而不是 /usr/bin/phpunit ？

问候，恶意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:34:26.327

可以为每个项目或您的用户单独安装 PEAR：

```
$ mkdir ~/pear
$ pear config-create ~/pear ~/pear/pear.conf 
```

现在，如果您使用每个命令传递配置文件，您就可以安装软件包：

```
$ pear -c ~/pear/pear.conf install html_quickform2 
```

如果您根本不想使用系统范围的 pear，请将`pear.conf`文件移入`~/.pearrc`- 它会自动覆盖任何系统设置。您无需再指定`-c ~/pear/pear.conf`。

# java - 一次将SQL脚本执行到oracle db中

> ID：13745753
> 
> 赞同：4
> 
> 时间：2012-12-06T14:31:03.503
> 
> 标签：java, python, sql, regex, oracle

假设我有一个如下所示的 sql 脚本：

```
--split statement 1
ALTER TABLE abs
  ADD (make    VARCHAR2(2 byte),
     model    varCHAR2(12 BYTE),
     built_on DATE,
     serial    varchar2(123 BYTE));
    /

    --split statement 2 
     declare
     begin
         null;
     end;
     /

     --split statement 3
     insert into test (v,a,c)
     values ('1','jjoe;','232');

     --split statement 4
     create or replace function BLAH_BLAH(i_in varchar2)
     as
         l_one varchar2(12);
         l_two varchar2(12);
         l_three varchar2(12);
     begin
         l_one := 1;
         l_two := 3;

         insert into test (v,a,b)
         values ('1','jjoee;','232');

    exception when no_data_found then
        l_three := 3;

    end;
    / 
```

基本上，脚本可以有 DML、DCL、DDL 和匿名块。我希望能够拆分每个语句并单独执行它们，但当然是为了它们出现。

我想过使用正则表达式，我相信逻辑必须是这样的：

1) 如果字符串以 create|alter|drop|declare 开头，则获取从该字符串开头到分号的所有内容，然后是一个新行，然后是一个正斜杠（这里的关键是匿名块的事件，我们必须忽略 DML，直到我们到达最后）。

2) 如果字符串以 insert|delete|update|merge 开头（同样，如果我们已经在一个适用于要求 1 的块中，则忽略此字符串），获取从该字符串的开头到后面的分号的所有内容没有正斜杠的换行符。

到目前为止，我已经在 Python 中提出了这个：

```
sql_commands = re.split('(?i)(((create|alter|drop|merge)+)(?m);(\s*)\n(\s*))|(;(\s*)\n(\s*)/)',sql_script) 
```

但是每次我尝试推进其他要求时，正则表达式开始不起作用（实际上输出有点时髦）并且变得足够复杂，让我迷失了方向。

我想在 Python 或 Java 中完成此操作（我想，Java 实际上是首选，因为这是一个 oracle db）

如果 regex 不能真正完成这项任务，这不一定是正则表达式。我的最终目标是拆分每个语句并单独运行它，这样我就可以捕获出现的任何错误并优雅地处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:13:43.737

伪代码，未经测试，只是为了展示这个想法：

```
while (line = readLine()) {
    String cmdString = null;
    if (line.beginsWith("create" || line.beginsWith("alter") ...) {
       String previousLine = line;
       while (line = readLine()) {
          if (line.equals("/") && previousLine.endsWith(";")) {
            executeSQL(cmdString);
            break;
          }
          previousLine = line;
          cmdString = cmdString + line;
       }
    }
    if (line.beginsWith("insert" || line.beginsWith("update") ...) {
       String previousLine = line;
       while (line = readLine()) {
          if (line.equals("\n") && previousLine.endsWith(";")) {
            executeSQL(cmdString);
            break;
          }
          previousLine = line;
          cmdString = cmdString + line;
       }
    }
    // skip others
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T14:56:02.343

根据您的目标，在每个语句的末尾插入以下命令后，您可以将文件提供给 SQL*Plus：

```
pause Press any key to proceed 
```

# jquery - 一次显示多个页面 jquery mobile

> ID：13745765
> 
> 赞同：1
> 
> 时间：2012-12-06T14:31:38.657
> 
> 标签：jquery, jquery-mobile, mobile

如何使用 jQuery mobile 同时显示多个页面？我在“背景”中有一个大页面，但是当我单击一个按钮时，我想显示一个设置菜单（另一个 jQuery 页面），保持相同的背景。有可能吗？

编辑：避免使用`iframe`html 元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:36:38.390

JQuery mobile 旨在一次显示一页。但是，您可以显示一个弹出窗口（[请参阅文档](http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html)），它将显示在当前页面的顶部，并且可以容纳一个菜单

# javascript - Backbone.Collection.reset() 在 IE8 中抛出异常

> ID：13745771
> 
> 赞同：0
> 
> 时间：2012-12-06T14:32:00.493
> 
> 标签：javascript, internet-explorer, backbone.js, coffeescript, marionette

每次，我在 Backbone.Marionette.CollectionView 中重置 Backbone.Collection，IE8 都会抛出错误：

> Function.prototype.apply：参数为空或未定义

同样的情况也适用于 emptyView。

我的 CoffeeScript 代码（以下 js 版本）：

```
Collection = Backbone.Collection.extend
url       : '/videos.json'
baseModels: []
initialize : -> 
  GIS.VL.vent.on 'specialization:selected', @onSpecializationSelected, @
  @on 'reset', @onFirstSync, @

onFirstSync : (a)->
  @off 'reset', @onFirstSync, @
  @baseModels = @models
  console.log @models

onSpecializationSelected : (model)-> 
  if model.id < 0
    @reset @baseModels
  else
    filteredItems = _.filter @baseModels, (item)->
      specializations = _.map item.get('specializations'), (specialization) ->
        specialization.id 
      -1 < _.lastIndexOf specializations, model.id
    @reset filteredItems 
```

Javascript版本：

```
var Collection;

Collection = Backbone.Collection.extend({
  url: '/videos.json',
  baseModels: [],
  initialize: function() {
    GIS.VL.vent.on('specialization:selected', this.onSpecializationSelected, this);
    return this.on('reset', this.onFirstSync, this);
  },
  onFirstSync: function(a) {
    this.off('reset', this.onFirstSync, this);
    this.baseModels = this.models;
    return console.log(this.models);
  },
  onSpecializationSelected: function(model) {
    var filteredItems;
    if (model.id < 0) {
      return this.reset(this.baseModels);
    } else {
      filteredItems = _.filter(this.baseModels, function(item) {
        var specializations;
        specializations = _.map(item.get('specializations'), function(specialization) {
          return specialization.id;
        });
        return -1 < _.lastIndexOf(specializations, model.id);
      });
      return this.reset(filteredItems);
    }
  }
}); 
```

我正在使用带有 Handlebars 模板的最简单的 CollectionView：

```
 VideosView = Backbone.Marionette.CollectionView.extend
    tagName   : 'div'
    itemView  : VideoView
    collection: new Collection
    config: 
      itemsPerPage: 3

    initialize: (options)->
      console.log 'initialize'

      # override defaults:
      @config           = _.extend @config, options 
```

Javascript 版本如下：

```
var VideosView;

VideosView = Backbone.Marionette.CollectionView.extend({
  tagName: 'div',
  itemView: VideoView,
  collection: new Collection,
  config: {
    itemsPerPage: 3
  },
  initialize: function(options) {
    console.log('initialize');
    return this.config = _.extend(this.config, options);
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:48:34.560

这原来是 Marionette 中的一个错误，`.apply`使用 null 或未定义的`arguments`参数调用。

Marionette 及其依赖项已更新以解决此问题，并且该修复不在开发分支中（请参阅此票证：[https](https://github.com/marionettejs/backbone.marionette/issues/368) ://github.com/marionettejs/backbone.marionette/issues/368 ）。

如果您需要立即进行此修复，则需要从`dev`分支中获取木偶构建：[https ://github.com/marionettejs/backbone.marionette/tree/dev/lib](https://github.com/marionettejs/backbone.marionette/tree/dev/lib)

如果您使用的是“核心”构建，请务必同时更新 Wreqr 和 EventBinder。BabySitter 不需要任何更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:15:05.513

确保*所有*对象都没有杂散逗号：

```
ie8err: { something: 1, something: 2, } //Error in IE8 and below. 
```

我不肯定就是这样，但它闻起来可能是这样。

# vb.net - 隐藏左列DataGridView

> ID：13745774
> 
> 赞同：22
> 
> 时间：2012-12-06T14:32:05.937
> 
> 标签：vb.net, winforms, datagridview

我正在 VS2010 中创建一个 Visual Basic 程序。我正在使用 DataGridView 来显示 .csv，但我不想显示左列，这很难看。

有什么形式可以隐藏吗？

![在此处输入图像描述](../Images/e1b9b104e26b06e233d59dc911fa05ad.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-06T14:41:18.167

尝试将`RowHeadersVisible`DataGridView 的属性设置为 False。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-09T17:07:54.347

是的，您可以这样做，将 DataGridView 的 RowHeadersVisible 属性设置为 False

![看看这个](../Images/959a458ad259da8f261d77f55d127797.png)

# android - 从另一个应用程序绑定到服务

> ID：13745779
> 
> 赞同：18
> 
> 时间：2012-12-06T14:32:36.063
> 
> 标签：android, binding, android-service

我写了两个应用程序（目标姜饼）。假设app1和app2。App1 有两个以“BOOT_COMPLETED”启动的服务，它们以返回值 START_STICKY 启动。它们在不同的线程中运行。使长话短说。其中一项服务是监视串行端口上的传入数据（一种应用程序与串行端口另一端的接口通信的代理）。另一个有一个监听器，它正在监视一些系统状态并等待来自其他应用程序的一些“指令”。我知道它们运行良好，因为它们列在正在运行的服务中，并且我添加了一些代码，当某些特定数据来自串行端口时，它们会强制它们执行某些操作。

现在的问题：我写了app2。它尝试绑定到 app1 中的一项服务。我使用了[android-developper](http://developer.android.com/guide/components/bound-services.html)文档并在 app1 和 app2 中的服务之间实现了双向通信。由于我只有少量非常简单的数据要发送，因此我按照建议使用了信使。我基本上只是使用“什么，arg1 和 arg2”，我没有按照文档的建议使用 AIDL 接口。

这是 androidmanifest 在 app1 中声明服务的部分，我也尝试绑定。

```
 <service android:name=".ModemWatcherService"
              android:label="@string/app_name"
              android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
            <!-- Service name -->
            <action android:name="com.admetric.modemwatcher.Service" />
        </intent-filter>
    </service> 
```

然后，这里是在 app1 中处理这个问题的几个方法：

```
 @Override
public IBinder onBind(Intent intent) {
    Log.d(TAG, "entering onBind");
    return mMessenger.getBinder();
}

/**
 * Handler of incoming messages from clients.
 */
class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        String logMessage = "Received meaasge what= %d, arg1= %d, arg2= %d" + String.valueOf(msg.what) + String.valueOf(msg.arg1) + String.valueOf( msg.arg2);
        Log.d(TAG, logMessage);
        switch (msg.what) {
            case MSG_REGISTER_CLIENT:
                mClients.add(msg.replyTo);
                break;
            case MSG_UNREGISTER_CLIENT:
                mClients.remove(msg.replyTo);
                break;
            case .....  
             more code here for the application
            default:
                super.handleMessage(msg);
        }
    }
}

@Override
public void onCreate() {
    mHandler = new Handler();
    startSignalLevelListener();
    Log.i(TAG, "Just did onCreated");
    // Display a notification about us starting.  We put an icon in the status bar.
    // showNotification();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i(TAG, "Received start id " + startId + ": " + intent);
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
} 
```

对于app2，这里是建立与双向通信绑定的相关代码：

```
public final class ComWithIoMcu extends Service {
private static final String TAG = "ComWithIoMcu";
/** Messenger for communicating with service. */
static Messenger mServiceMcu = null;
/** Flag indicating whether we have called bind on the service. */
boolean mIsBound;

/**
 * Command to the service to register a client, receiving callbacks
 * from the service.  The Message's replyTo field must be a Messenger of
 * the client where callbacks should be sent.
 */
static final int MSG_REGISTER_CLIENT = 1;

/**
 * Command to the service to unregister a client, ot stop receiving callbacks
 * from the service.  The Message's replyTo field must be a Messenger of
 * the client as previously given with MSG_REGISTER_CLIENT.
 */
static final int MSG_UNREGISTER_CLIENT = 2;
/**
 * Command to forward a string command to the I/O MCU
 */    
public static final int MSG_SEND_STRING_TO_IOMCU = 3;
/** List of supported commands
 * 
 */
   ...... more code ....

/**
 * Handler of incoming messages from service.
 */
class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case MSG_UNSOL_MESSAGE:
                Log.d(TAG, "Received from service: " + msg.arg1);
                break;
            default:
                super.handleMessage(msg);
        }
    }
}

/**
 * Target we publish for clients to send messages to IncomingHandler.
 */
final Messenger mMessenger = new Messenger(new IncomingHandler());
boolean mBound;

/**
 * Class for interacting with the main interface of the service.
 */
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className,
            IBinder service) {
        // This is called when the connection with the service has been
        // established, giving us the service object we can use to
        // interact with the service.  We are communicating with our
        // service through an IDL interface, so get a client-side
        // representation of that from the raw service object.
        mServiceMcu = new Messenger(service);
        Log.d(TAG, "Attached.");

        // We want to monitor the service for as long as we are
        // connected to it.
        try {
            Message msg = Message.obtain(null,
                    MSG_REGISTER_CLIENT);
            msg.replyTo = mMessenger;
            mServiceMcu.send(msg);

        } catch (RemoteException e) {
            // In this case the service has crashed before we could even
            // do anything with it; we can count on soon being
            // disconnected (and then reconnected if it can be restarted)
            // so there is no need to do anything here.
            Log.e(TAG, "ModemWatcherService is not running");
        }
    }

    public void onServiceDisconnected(ComponentName className) {
        // This is called when the connection with the service has been
        // unexpectedly disconnected -- that is, its process crashed.
        mServiceMcu = null;
        mBound = false; 

    }
};

void doBindService() {
    // Establish a connection with the service.  We use an explicit
    // class name because there is no reason to be able to let other
    // applications replace our component.
    //bindService(new Intent(this, MessengerService.class), mConnection, Context.BIND_AUTO_CREATE);
    try {
        Intent intentForMcuService = new Intent();
        Log.d(TAG, "Before init intent.componentName");
        intentForMcuService.setComponent(new ComponentName("com.admetric.modemwatcher", "ModemWatcherService"));
        Log.d(TAG, "Before bindService");
        if (bindService(intentForMcuService, mConnection, 0)){
            Log.d(TAG, "Binding to Modem Watcher returned true");
        } else {
            Log.d(TAG, "Binding to Modem Watcher returned false");
        }
    } catch (SecurityException e) {
        Log.e(TAG, "can't bind to ModemWatcherService, check permission in Manifest");
    }
    mIsBound = true;
    Log.d(TAG, "Binding.");
}

void doUnbindService() {
    if (mIsBound) {
        // If we have received the service, and hence registered with
        // it, then now is the time to unregister.
        if (mServiceMcu != null) {
            try {
                Message msg = Message.obtain(null, MSG_UNREGISTER_CLIENT);
                msg.replyTo = mMessenger;
                mServiceMcu.send(msg);
            } catch (RemoteException e) {
                // There is nothing special we need to do if the service
                // has crashed.
            }
        }

        // Detach our existing connection.
        unbindService(mConnection);
        mIsBound = false;
        Log.d(TAG, "Unbinding.");
    }
} 
```

查看正在运行的服务，可以看到我在 app2 中创建的服务正在运行。Logcat 显示我尝试绑定 ModemWatcherService 但未找到。这是logcat的有趣部分

```
12-05 17:22:59.884 D/ComWithIoMcu(  547): Before init intent.componentName
12-05 17:22:59.884 D/ComWithIoMcu(  547): Before bindService
12-05 17:22:59.888 D/ComWithIoMcu(  547): Binding to Modem Watcher returned false
12-05 17:22:59.888 D/ComWithIoMcu(  547): Binding.
12-05 17:22:59.888 W/ActivityManager(   89): Unable to start service Intent { cmp=com.admetric.modemwatcher/ModemWatcherService }: not found 
```

我的第一个想法是我错过了一个权限，但是 bindService() 可以引发安全异常，在这种情况下它不是这样，我检查并返回 false，原因不明。另外，我知道在 app1 中，永远不会调用 onBind 来证明绑定从未发生过。所以 logcat 消息“未找到”是有道理的，但我在其清单中声明了该服务。这可能是一个简单的错误，但我在这个问题上已经有一段时间了，我没有找到原因。知道为什么 app2 在 app1 中找不到服务吗？我只使用剪切和粘贴来命名名称，这样我就不会在名称中犯愚蠢的错误输入错误。我是否缺少某种权限？我需要做一些额外的步骤来为整个系统发布服务吗？这是我第一次尝试从另一个应用程序访问一个应用程序中的某些内容，所以，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T16:30:50.247

你`ComponentName`的构造不正确。传入类名时必须是完全限定的，如下所示：

```
intentForMcuService.setComponent(new ComponentName("com.admetric.modemwatcher",
        "com.admetric.modemwatcher.ModemWatcherService")); 
```

另一件事，如果您`Service`在应用程序的边界之外引用 a，最好不要使用`ComponentName`它来引用它，即使它确实可以正常工作。一种更常见的方法是为您创建一个自定义 ACTION 字符串`Intent`并`Service`过滤该操作。

# javascript - 循环绘制画布

> ID：13745782
> 
> 赞同：0
> 
> 时间：2012-12-06T14:32:43.883
> 
> 标签：javascript, jquery, html, canvas, backbone.js

我通过附加到元素 x 画布来渲染我的 Backbone 模型。然后在一个循环中，我在每一个上绘制一个图像。

**问题**：似乎只画了最后一个画布，其余的都是空白的。

这是代码： http: [//pastie.org/private/bt4b4imwd6csrv32gay2yq](http://pastie.org/private/bt4b4imwd6csrv32gay2yq) - 渲染函数

这是模型： http: [//pastie.org/private/mvmlbrefzbcgltwyfyfw](http://pastie.org/private/mvmlbrefzbcgltwyfyfw)

我已经在 onload 事件中输出了图像的源和实际画布的 id，并且我只得到最后一个（最后一个画布 id，最后一个图像源）x 次（x = 零件变量的长度）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:43:47.903

这是一个“循环中的闭包”问题。使用您的 .onload 您正在创建一个闭包。这个闭包可以访问其周围的范围，但不是在创建时而是在执行时。并且在那个时间点循环已经到达最后一个元素，因此`faceImg`并且`ctxFace`只会引用最后一个图像。

解决方案：用一个立即执行的匿名函数创建一个内部闭包，交出当前`faceImg`和`ctxFace`在每个循环中并返回一个匿名函数，该函数将在加载时执行

```
var faceImg = new Image();
faceImg.src = cardsPath + this.model.get('name') + '/faces/'+key+'/'+parts[key];            
faceImg.onload = (function (localCtx, localFaceImg) {
   return function() {localCtx.drawImage(localFaceImg, 0, 0);}
})(ctxFace, faceImg); 
```

# android - 片段已添加。支持库

> ID：13745787
> 
> 赞同：12
> 
> 时间：2012-12-06T14:32:57.080
> 
> 标签：android, fragment, android-support-library

因为我升级了我的应用程序以使用**支持 lib rev。11并针对****SDK 4.2**编译我收到以下错误

```
java.lang.IllegalStateException: Fragment already added: i{4079e598 #2 id=0x1020002 i}
    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1159)
    at android.support.v4.app.BackStackRecord.popFromBackStack(BackStackRecord.java:729)
    at android.support.v4.app.FragmentManagerImpl.popBackStackState(FragmentManager.java:1493)
    at android.support.v4.app.FragmentManagerImpl.popBackStackImmediate(FragmentManager.java:477)
    at android.support.v4.app.FragmentActivity.onBackPressed(FragmentActivity.java:174) 
```

我在stackoverflow上读过类似的问题。他们中的一些人建议避免使用我没有使用的替换方法。导致回滚时崩溃的事务如下所示：

```
ft.remove(oldFrag).add(newFrag).addToBackStack(null).commit() 
```

其他评论说，如果您使用的片段转换在用户再次按下之前无法足够快地完成，则可能会发生这种情况。由于我确实在给定的片段上使用了过渡动画，这可能是原因。但是，删除转换不是一种选择，因为这**仅**发生在运行 2.3.x 的手机上，并且该错误是通过升级到 lib 11 和 sdk 4.2 引入的，我希望谷歌将在下一个版本中修复它。

有没有人有类似的问题，有关是否计划在 4.2.1 中修复或支持 r12 的信息，或者建议我可以做些什么来规避错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T21:54:47.227

我正在尝试使用我在[此处找到的提示来解决此问题](https://stackoverflow.com/questions/10715008/fragment-isadded-returns-true-after-fragment-removed-from-a-container)

所以我添加了[executePendingTransactions()](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)来立即执行事务：

```
ft.remove(oldFrag).add(newFrag).addToBackStack(null).commit()
getFragmentManager().executePendingTransactions(); 
```

这应该确保 backstack 始终处于我希望的干净状态，并且没有我能想到的任何负面缺点。

**更新** 虽然它确实适用于普通手机，但问题仍然存在于一些没有已知 Android 版本号的通用设备上，如 4.0.1 或类似版本，而是报告一些日期，如 'Thu Mar 02 2006 00:00:00 GMT +0100 (MEZ) ' 作为 Android 版本号，例如：samsung - espressowifixx - GT-P3110 将给定日期报告为 android 版本并产生片段添加异常......仍然很烦人。用户不关心这些东西，所以总是责怪已经亏本的开发者。对价值数十亿美元的公司来说当然没问题，但是单个开发人员只需在你的时间里做一些比编写应用程序更有用的事情；）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T16:24:17.390

所以对我来说，事实证明我实际上是在尝试添加一个片段两次。也许在以前的支持库版本中，它只是吞下了这个并继续前进。不幸的是，即使检查片段是否`isAdded()`对我不起作用，因为在我的情况下，我在事务有时间实际添加第一个片段之前将它们背靠背调用。

我最终做的是创建一个布尔类变量`fragmentAdded`，并在我进行交易后立即将其设置为 true。然后我在尝试添加片段之前检查这个布尔值。可能无法解决您的问题，但对我来说是，所以希望它有所帮助。

# c# - 如何以编程方式锁定 Windows 工作站？

> ID：13745788
> 
> 赞同：18
> 
> 时间：2012-12-06T14:33:05.590
> 
> 标签：c#, user32

> **可能重复：**
> [在 C# 中以编程方式锁定 Windows 工作站](https://stackoverflow.com/questions/1263047/lock-windows-workstation-programmatically-in-c-sharp)

我目前正在开发一个需要锁定工作站功能的 Visual Studio Windows 窗体应用程序。调用该函数时，如何使用 user32.dll 进行锁定（Windows + L）？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-06T14:35:21.870

我自己没试过，但我在google上找到[了这个](http://www.dotnetspider.com/resources/20698-C-Code-for-Lock-Computer.aspx)

`Process.Start(@"C:\WINDOWS\system32\rundll32.exe", "user32.dll,LockWorkStation");`

编辑：我试过了，它有效！

edit2：这是一个不启动外部进程的[解决方案](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376875%28v=vs.85%29.aspx)。`user32.dll`

`using System.Runtime.InteropServices;`

声明这样的方法：

```
[DllImport("user32.dll")]
public static extern bool LockWorkStation(); 
```

然后调用`LockWorkStation();`.

瞧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:37:39.237

```
using System.Runtime.InteropServices;

[DllImport("user32.dll")]
public static extern int ExitWindowsEx(int uFlags, int dwReserved); 
```

打电话

```
 ExitWindowsEx(0, 0); 
```

# java - 通过复制构造函数在 Java 中复制对象而不影响原始对象

> ID：13745791
> 
> 赞同：5
> 
> 时间：2012-12-06T14:33:21.360
> 
> 标签：java, object, constructor, copy

我正在尝试复制一个对象，然后将对其进行修改，而不更改原始对象。

我找到[了这个解决方案](https://stackoverflow.com/questions/869033/how-do-i-copy-an-object-in-java)，似乎最好的方法是复制构造函数——据我了解，这会给我一个深层副本（与原始对象完全分开的对象）。

所以我试过了。但是，我注意到当下面的代码执行时，它会影响之前复制它的所有对象。当我调用 时`surveyCopy.take()`，这将更改 内部的值`Survey`，它也会更改 selectedSurvey 内部的值。

```
public class MainDriver {
...
//Code that is supposed to create the copy
case "11":  selectedSurvey = retrieveBlankSurvey(currentSurveys);
            Survey surveyCopy = new Survey(selectedSurvey);
            surveyCopy.take(consoleIO);
            currentSurveys.add(surveyCopy);
            break;
} 
```

这是我的复制构造函数的代码：

```
public class Survey implements Serializable
{
    ArrayList<Question> questionList;
    int numQuestions;
    String taker;
    String surveyName;
    boolean isTaken;

    //Copy constructor
    public Survey(Survey incoming)
    {
        this.taker = incoming.getTaker();
        this.numQuestions = incoming.getNumQuestions();
        this.questionList = incoming.getQuestionList();
        this.surveyName = incoming.getSurveyName();
        this.isTaken = incoming.isTaken();
    }
} 
```

那么究竟是什么问题呢？复制构造函数不能那样工作吗？我编码的方式错了吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T14:35:26.907

这是您的复制构造函数中的问题：

```
this.questionList = incoming.getQuestionList(); 
```

那只是复制对列表的*引用*。两个对象仍将引用同一个对象。

您可以使用：

```
this.questionList = new ArrayList<Question>(incoming.getQuestionList()); 
```

创建原始列表的副本 - 但如果它本身是可变的，这*仍然*不够好。`Question`在这种情况下，您必须创建每个`Question`对象的副本以实现完全隔离。

您的其他字段没问题，因为它们是原语或引用`String`（这是不可变的，允许您安全地共享引用）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T14:34:48.793

这个

```
this.questionList = incoming.getQuestionList(); 
```

最有可能复制对原始列表的*引用（我说**可能是*因为它可能`getQuestionList()`会给您一个防御性副本）。您可能必须制作该列表的新副本。也许是包含的`Question`对象。也许他们提到的任何东西。

这就是深拷贝的问题。为了可靠地做到这一点，您必须复制所有可变对象。请注意，如果一个对象是*不可变*的（例如字符串），那么它们就无法更改，因此您可以参考原始对象，确信它们不会被更改。这同样适用于原语。鼓励代码库中不变性的一个很好的理由。

如果您无法创建不可变类，请编写您的类，使其生成防御性副本。即当客户要求它收集时，它应该制作一个副本并返回它。否则，您所谓的善意客户可能会改变您的内部状态（无意或无意）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T14:40:15.640

创建深拷贝时的问题是，所有不是原始类型的东西都是通过引用复制的，除非您也在其上使用特定的深拷贝构造函数。

`bool`在您的特定情况下，您对,`int`或`String`变量没有问题，因为您通过值传递它们（实际上`String`是通过引用传递，但它是不可变的，因此没有问题）但是您传递的是`ArrayList<Question> questionList`. 当你这样做

```
this.object = incoming.object 
```

你只是复制一个参考。所以**这两个变量都指向内存中的同一个对象**，所以你没有深度复制它。您必须创建具有相同内部值的对象的另一个实例，然后您将确定，例如`this.object = new YourObject(incoming.object)`.

请注意，这通常意味着您的类在组合树中越复杂，您将不得不深入研究变量，直到您将它们全部复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-01T12:54:41.197

如果我们需要复制一个简单的 pojo（不是嵌套的）。那么浅拷贝就足够了。

**克隆类**

导入 java.lang.reflect.Field；

```
public class Cloner {
    public static <T> T cloneShallow(T srcEntity, T destEntity){
        try {
            return copy(srcEntity, destEntity);
        }catch (Exception e){
            e.printStackTrace();
        }
        return null;
    }

    private static <T> T copy(T srcEntity, T destEntity) throws IllegalAccessException, InstantiationException {
        if(srcEntity == null){
            return null;
        }

        Class<?> clazz = srcEntity.getClass();

        T newEntity;

        if(destEntity != null){
            newEntity = destEntity;
        }else{
            //create new instance
            newEntity = (T) srcEntity.getClass().newInstance();
        }

        while (clazz != null) {
            copyFields(srcEntity, newEntity, clazz);
            clazz = clazz.getSuperclass();
        }

        return newEntity;
    }

    private static  <T> T copyFields(T entity, T newEntity, Class<?> clazz) throws IllegalAccessException {
        for (Field field : clazz.getDeclaredFields()) {
            field.setAccessible(true);
            field.set(newEntity, field.get(entity));
        }
        return newEntity;
    }
} 
```

打电话吧。。

```
eg.
Apple apple = new Apple();
apple.setColor("Green");

Apple newApple = Cloner.cloneShallow(apple, new Apple());
( or )
Apple newApple = Cloner.cloneShallow(apple, null); 
```

# javascript - javascript如何接受答案

> ID：13745794
> 
> 赞同：-1
> 
> 时间：2012-12-06T14:33:31.913
> 
> 标签：javascript, css

刚刚用 JavaScript 做了一个简单的文字游戏。如果我问一个数学问题并且用户必须输入一个值。页面上有 4 个框，我想弄清楚的是如何得到它，所以当用户输入所有正确的答案时，比如在页面上弹出的文本。

以下。该代码已重复 4 次。

```
function changecolour1(textbox) {
    var val = textbox.value;
    if (val == 26) {
        textbox.style.backgroundColor = 'green';
    } else {
        textbox.style.backgroundColor = 'red';
    }
} 
```

因此，再次尝试 2 找出用户何时在 4 个框中输入正确的数字我如何得到它，所以它会弹出说做得好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:09:47.657

```
$(document).ready(function() {
$('#questions input').keyup(function() {
    var val = $(this).val();
    if (val == '26') {
        $(this).css('backgroundColor', 'green');
        $(this).attr('correct', 'true');
    } else {
        $(this).css('backgroundColor', 'red');
        $(this).attr('correct', 'false');
    }
    if ($('#questions input[correct="true"]').length == $('#questions input').length) alert("All answers are OK!");

}); 
```

});​</p>

```
<div id="questions" >
1: <input type="text" id="a1"/><br/>
2: <input type="text" id="a2"/><br/>
3: <input type="text" id="a3"/><br/>
4: <input type="text" id="a4"/><br/>
</div>​ 
```

工作示例：http: [//jsfiddle.net/vash6p/HLF3K/](http://jsfiddle.net/vash6p/HLF3K/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:39:28.463

```
var counter=0;
function changecolour1(textbox) {
var val = textbox.value;
if (val == 26) {
    textbox.style.backgroundColor = 'green';
    counter++;
    if(counter==4)
    {
        alert('well done');
    }
}
else {
    textbox.style.backgroundColor = 'red';
    counter--;
    if(counter < 0)
    {
       counter=0;
    }
}
}

function reset(){
    counter=0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T14:55:24.623

跟踪所有问题的状态，并在每个函数中询问该状态：

```
// question 1 is questionState[0], 2 is questionState[1], etc
var questionState = [false, false, false, false];

var allCorrect = function () {
    for (var i = 0; i < questionState.length; i++) {
        if (!questionState[i]) {
            return false;
        }
    }

    return true;
};

var changecolour1 = function (textbox) {
    var val = textbox.value;
    if (val == 26) {
        questionState[0] = true;
        textbox.style.backgroundColor = 'green';

        if (allCorrect()) {
            alert('Congratulations!');
        }
    } else {
        questionState[0] = false;
        textbox.style.backgroundColor = 'red';
    }
}; 
```

请注意，您可能可以`changecolour`用一个通用函数替换所有 4 个函数。这假设您的文本框具有相应的 ID：

```
var questions = {
    textbox1: {
        answer: 26,
        state: false
    },
    textbox2: {
        answer: 0,
        state: false
    },
    textbox3: {
        answer: 1,
        state: false
    },
    textbox4: {
        answer: 2,
        state: false
    },
};

var allCorrect = function () {
    for (var i = 0; i < questions.length; i++) {
        if (!questions[i].state) {
            return false;
        }
    }

    return true;
};

var changecolour = function (textbox) {
    var val = textbox.value;
    if (val == questions[textbox.id].answer) {
        questions[textbox.id].state = true;
        textbox.style.backgroundColor = 'green';

        if (allCorrect()) {
            alert('Congratulations!');
        }
    } else {
        questions[textbox.id].state = false;
        textbox.style.backgroundColor = 'red';
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:53:05.353

嘿，如果您向每个输入字段添加一个名为 box 的类，您可以执行类似的操作。我使用 jquery 作为事件内容。

```
$(document).ready(function() {
  var Game = {
    correctAnswers: 0,  
    questionCount: undefined,
    addListener: function(boxes){
        this.questionCount = boxes.length;
        var that = this;
        for(var i = 0; i < boxes.length; i++){
            var item = boxes[i];
            $(item).keyup(function(){
                if($(this).val() == "correct value"){
                    $(this).unbind();
                    that.correctAnswers++;
                    $(this).css({background:'green'});
                    if(that.correctAnswers === that.questionCount){
                        that.gameOver();
                    }
                }else{
                    $(this).css({background:'red'});
                }
            });
        }    
    },
    gameOver: function(){
        alert("You won!");
    }
};
Game.addListener($('.boxes'));
});

<input type="text" class="boxes" />
<input type="text" class="boxes" /> 
```

# c# - 在 Linq 中对实体多列进行排序

> ID：13745812
> 
> 赞同：7
> 
> 时间：2012-12-06T14:34:31.963
> 
> 标签：c#, entity-framework, linq-to-entities

我在 SQL Server 中有一个表，其中包含以下列

*   ID（身份/主键）
*   DestinationID（外键）
*   日期（日期字段）
*   时间（时间字段）
*   DayOfWeek（Char（3）字段）即“MON”，“TUE”等。

我想按日期和时间排序数据，然后按 DayOfWeek 和时间排序。所以所有带日期的记录都出现在顶部，并按时间排序，然后是 DayOfWeek 按时间排序。

我尝试了几种方法，但无法理解，我有以下代码

```
 var qry = ctx.DestinationTimings.Where(x => x.DestinationID == this.ID)
                     .OrderBy(t => t.Date).ThenBy(t => t.Date != null)
                     .ThenBy(t => SqlFunctions.CharIndex(t.DayOfWeek + ",", "MON,TUE,WED,THU,FRI,SAT,SUN"))
                     .ThenBy(t => t.Time); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-06T14:49:03.280

如果`Date`可以为空，您可以执行以下操作：

```
var qry = ctx.DestinationTimings.Where(x => x.DestinationID == this.ID)
                 .OrderBy(t => t.Date ?? DateTime.MaxValue)
                 .ThenBy(t => SqlFunctions.CharIndex(t.DayOfWeek + ",", "MON,TUE,WED,THU,FRI,SAT,SUN"))
                 .ThenBy(t => t.Time); 
```

# android - 无法在 scala 2.10 RC3 Android 和 Eclipse 中设置断点

> ID：13745815
> 
> 赞同：1
> 
> 时间：2012-12-06T14:34:39.140
> 
> 标签：android, eclipse, scala, breakpoints

我正在使用 Scala 和具有以下模式的 AndroidProguardScala 插件进行开发：

[https://stackoverflow.com/a/11084146/1287856](https://stackoverflow.com/a/11084146/1287856)

我将我的 Android 项目从旧版本的 scala 升级到了新版本，即 2.10.0-RC3 和他们[很棒的新 IDE 插件](http://scala-ide.org/download/milestone.html#scala_ide_21_milestone_2)：

我发现自己无法通过单击每个文件左侧的列来在我的 scala 文件中设置断点。

幸运的是，我找到了解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:34:39.140

我刚刚找到的一种解决方法是更改​​导入库的顺序：

*   右键单击项目，选择`properties`
*   选项卡`Java build path`，`Order and export`
*   确保“Scala 库 [2.10.0-RC3]”位于顶部
*   清理项目，重建，现在您可以像以前一样设置断点。

# android - 如何在更新之前检查 Google Maps InfoWindow 是否仍然显示？

> ID：13745818
> 
> 赞同：6
> 
> 时间：2012-12-06T14:34:47.517
> 
> 标签：android, google-maps, google-maps-android-api-2

我开始研究在 InfoWindow 内显示位置图像的 InfoWindowAdapter。我有很多不同的位置，因此有可能手机上没有位置图像，而是从网上下载的。

现在 Maps API 声明如下：

> 请注意，将拍摄返回视图的快照，然后在地图上呈现，因此对视图的后续更改不会反映在地图上的信息窗口中。要更新信息窗口（例如，在加载图像后），只需调用 showInfoWindow() 即可更新视图。

据我了解，我需要跟踪创建要更新的信息窗口的标记，并在加载图像后调用 showInfoWindow。我有一个 ImageDownloadService ，它将接受一个处理程序，如果图像完成加载，则通知该处理程序。

如果图像加载时间稍长，则用户可能打开了另一个 InfoWindow 或关闭了当前滚动的窗口。问题是，当我再次在标记上调用 showInfoWindow 以更新视图时，我无法确定 InfoWindow 是否仍然显示。

只有当它仍然显示时，有没有办法更新信息窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:50:29.057

我刚刚在`AsyncTask`下载和更新时遇到了类似的问题，`InfoWindow`今天早上我把头撞在墙上后，我想出了这个小解决方法，希望能满足您的需求，直到谷歌解决这个问题。

我正在调用my`marker.showInfoWindow()`的方法，该方法重新调用了这些方法，这些方法最终进入一个循环并且从未正确传播我的更改。`OnPostExecute()``AsyncTask``InfoWindowAdapter`

我使用的解决方案是存储当前选择的标记和`InfoWindow`我想要显示的视图。我已经在下面的示例中进行了`TextView`更新`DownloadBubbleInfo` `AsyncTask`（我相信类似于您的图像线程）。

```
 // Setting a custom info window adapter for the google map
        gMap.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            public View getInfoWindow(Marker arg0) {
                return null;
            }

            // Defines the contents of the InfoWindow
            public View getInfoContents(Marker arg0) {
                if (selectedMarker.isInfoWindowShown()) {
                    return infoWindowView;
                } else {
                    // Getting view from the layout file info_window_layout
                    infoWindowView = getLayoutInflater().inflate(
                            R.layout.bubblewindowlayout, null);
                    // Stash the base view in infoWindowView
                    // Getting reference to the TextView to set latitude
                    TextView tvTit = (TextView) infoWindowView
                            .findViewById(R.id.tv_title);
                    tvTit.setText("Fetching data...");

                    // Async the update so we're not slowed down waiting for
                    // the
                    // bubble to populate
                    new DownloadBubbleInfo(context, infoWindowView, arg0)
                            .execute(arg0.getTitle(), arg0.getSnippet());

                    // Returning the view containing InfoWindow contents
                    return infoWindowView;
                }
            }
        });
        gMap.setOnMarkerClickListener(new OnMarkerClickListener() {

            public boolean onMarkerClick(Marker marker) {
                // When a marker is clicked set it as the selected marker so
                // we can track it for the InfoWindow adapter. This will
                // make sure that the correct marker is still displayed when
                // the callback from DownloadBubbleInfo is made to
                // marker.showInfoWindow() which is needed to update the
                // InfoWindow view.
                selectedMarker = marker;
                infoWindowView = null;
                return false;
            }
        }); 
```

以及来自的相关行`DownloadBubbleInfo` `AsyncTask`：

```
 @Override
protected String[] doInBackground(String... queryparts) {
    // Do the query and stash the results in queryResults and pass to
    // onPostExecute to attach to the mainview (the current view from the
    // main code) and then call showInfoWindow on the marker to re-launch
    // the InfoWindowAdapter methods again to repopulate the InfoWindow view
    // and attach it.
    return queryResults;
}
protected void onPostExecute(String[] results) {
    ((TextView) mainview.findViewById(R.id.tv_title)).setText(results[0]);
    ((TextView) mainview.findViewById(R.id.tv_info)).setText(results[1]);

    marker.showInfoWindow();
    Log.i("Chris-Debug", "Reshowing InfoWindow");
} 
```

现在，所有这些都应该确保正确的标记填充了从您返回的正确信息`AsyncTask`，嘿，很快就成功绕过了极其尴尬的 GoogleMaps v2 for Android API 的另一个角落！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T17:01:04.173

Marker 的布尔 isInfoWindowShown() 方法可能是您正在寻找的吗？

[Marker#isInfoWindowShown() - Google Maps Android API v2 文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#isInfoWindowShown%28%29)

当 InfoWindow 被滚动离开时它无济于事，不过，为此，我认为，您可能必须将 Marker 的 LatLng 坐标转换为屏幕坐标或使用它来检查标记是否仍在屏幕上：

[如何在适用于 Android 的 Google Map V2 中获取纬度/经度跨度](https://stackoverflow.com/questions/13739075/how-to-get-latitude-longitude-span-in-google-map-v2-for-android)

我不确定是否可以检查窗口本身是否仍在地图视图范围内。

# google-drive-api - 谷歌云端硬盘查看器“文档到图像”转换：是否有用于此的 API？

> ID：13745820
> 
> 赞同：3
> 
> 时间：2012-12-06T14:34:47.920
> 
> 标签：google-drive-api

我们正在开发一个文档查看器，以在浏览器（webapp）中向我们的用户显示文档。我们想使用 Google Drive Viewer 出色的“文档到图像”功能将我们的文档（PDF、Word、Excel 等）转换为图像。

有没有可能？（API，我们可以在我们的服务器上运行的库，其他想法？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:13:23.303

这个可能值得一看：[http ://saaspose.com/](http://saaspose.com/)

从他们的首页：

> Saaspose 是面向开发人员的基于云的文档生成、转换和自动化平台。

从他们的 Words API 的描述中：

> Saaspose.Words 是一个基于云的文档创建、操作和转换 API，它具有许多灵活的功能，可帮助您处理文档。Saaspose.Words 的独立于平台的文档操作 API 是一个真正的 REST API，可以与任何语言一起使用：.NET、Java、PHP、Ruby、Rails、Python、jQuery 等等。API 与其他云服务集成，为您提供处理文档时所需的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-04T02:38:17.337

搜索 Google Drive Viewer 返回了第三方 Chrome 扩展程序。

Google Drive API 确实允许文件转换，但最符合您需求的似乎是转换为 pdf 文件 [https://developers.google.com/drive/v2/web/integrate-open#open_and_convert_google_docs_in_your_app](https://developers.google.com/drive/v2/web/integrate-open#open_and_convert_google_docs_in_your_app)

您可以在此处尝试文件导出 [https://developers.google.com/drive/v2/reference/files/export](https://developers.google.com/drive/v2/reference/files/export)

在“Try this API”框中，输入其中一个文件的 fileID，然后将 application/pdf 放入 MIME 类型框中，然后单击执行按钮。

# android - 带帧动画的安卓动态壁纸

> ID：13745822
> 
> 赞同：1
> 
> 时间：2012-12-06T14:34:51.510
> 
> 标签：android, animation, frame, live, live-wallpaper

我正在尝试使用帧动画（来自资源的其他图像）创建 android 动态壁纸，代码看起来不错，但问题是壁纸没有显示（加载中的堆栈并且没有任何反应），这是我的代码：

```
public class lwpService extends WallpaperService {
int incrementer=0;
Bitmap bmps[]=new Bitmap[10];

public void onCreate() 
{
super.onCreate();
}

public void onDestroy() 
{
super.onDestroy();}

public Engine onCreateEngine() 
{
return new WallpaperSerEngine();
} 
```

ande 这里是引擎类。...

```
class WallpaperSerEngine extends Engine 
{

int res[]={R.drawable.img_00,R.drawable.img_01};
WallpaperSerEngine() 
{  
      for(int i=0;i<2;i++)
          {
                bmps[i]= BitmapFactory.decodeResource(getResources(),res[i]);                     
           }
}
}

private final Handler handler = new Handler();
 private final Runnable drawRunner = new Runnable() {
        @Override
        public void run() {

              drawFrame();

        }

    };
    void drawFrame() 
    {
        final SurfaceHolder holder = getSurfaceHolder();

        Canvas c = null;
        try 
        {
            c = holder.lockCanvas();
            if (c != null) 
            {              

                c.drawBitmap(bmps[incrementer], 0, 0, null);
                incrementer=(incrementer==2)?0 : incrementer+1; 

            }
        } finally 
        {
            if (c != null) holder.unlockCanvasAndPost(c);
        }
       handler.removeCallbacks(drawRunner);
       handler.postDelayed(drawRunner, 200);
    }

    private SurfaceHolder getSurfaceHolder() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

任何人都可以帮助我吗？谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T16:28:28.543

增量器可以是 2？但似乎只有解码的 bitmap[0] 和 bitmap[1]。

```
c.drawBitmap(bmps[incrementer], 0, 0, null);
incrementer=(incrementer==2)?0 : incrementer+1; 
```

# c - 递归查找子字符串是否在字符串中

> ID：13745826
> 
> 赞同：3
> 
> 时间：2012-12-06T14:35:12.233
> 
> 标签：c, recursion

我的目标是调用一个函数，如果发送的字符串中包含发送的子字符串，该函数将返回 0 / 1，我不需要找到它的索引，例如：

字符串：“Hello World”
子字符串：“rl”
将返回 1

字符串：“asssbdsd”子字符串
：“ab”
将返回 0

所以我想出了这个解决方案：

```
int HasSubstr(char* mainStr, char* subStr)
{
    if (!*subStr)
    {
        return 1;
    }
    if (!*mainStr)
    {
        return 0;
    }
    if (*mainStr == *subStr)
    {
        return HasSubStr(mainStr + 1, subStr + 1);
    }
    else
    {
        while(*(subStr -1))
        {
            subStr--;
        }
        return HasSubStr(mainStr + 1, subStr);
    }
} 
```

**但它不是一个纯递归，我需要它是一个纯递归，帮助将被广泛应用**

是的，这是作业

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:53:34.500

不要试图将所有内容都放在一个函数中。

```
int StartsWith(const char *mainstr,const char *subStr)
{
  if (*subStr == '\0') return 1;
  if (*mainStr != *subStr) return 0;
  return StartsWith(mainStr+1,subStr+1);
}

int HasSubstr(const char *mainStr,const char *subStr)
{
  if (StartsWith(mainStr,subStr)) return 1;
  if (*mainStr == '\0') return 0;
  return HasSubstr(mainStr+1,subStr);
} 
```

# php - 当我的查询成功时，我想重定向到一个页面

> ID：13745831
> 
> 赞同：-3
> 
> 时间：2012-12-06T14:35:14.613
> 
> 标签：php, mysql

我想在查询成功时链接到页面，通过按下按钮执行查询。现在它即时链接到`klantvoltooid.php`.

```
$verplicht = array('voornaam','achternaam','email','telefoonnummer','woonplaats');

foreach($_POST as $key => $value){
    if(in_array(trim($key),$verplicht)){
        if(empty($value)){
            $error = true;
        }
    }
}   

if(isset($error) && $error = true) {
    header("location:../nieuweklant.php");
    echo "U bent een veld vergeten intevullen";
} else { // else execute query
    $nieuweklant  = "INSERT INTO klanten (voornaam,achternaam,tussenvoegsel,email,telefoonnummer,woonplaats,nieuwsbrief) VALUES ('$voornaam','$achternaam','$tussenvoegsel','$email','$telefoonnummer','$woonplaats','$nieuwsbrief')";
    mysql_query($nieuweklant) or die(mysql_error());
    //stuurt de medewerker naarde voltooi pagina
    header("location:../klantvoltooid.php");
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:55:04.403

已经注意到这一行：

```
if(isset($error) && $error = true) 
```

需要是这样的（==比较）：

```
if(isset($error) && $error == true) 
```

**还值得一提的是这段代码：**

```
 echo "U bent een veld vergeten intevullen"; 
```

**永远不会执行，因为浏览器已经重定向。**

# python - 如何使用 lxml 解析来自 html 的文本？

> ID：13745832
> 
> 赞同：1
> 
> 时间：2012-12-06T14:35:14.817
> 
> 标签：python, text, xpath, lxml

```
<p>
    Glassware veteran
    <strong>Corning </strong>
    (
    <span class="ticker">
      NYSE:
      <a class="qsAdd qs-source-isssitthv0000001" href="http://caps.fool.com/Ticker/GLW.aspx?source=isssitthv0000001" data-id="203758">GLW</a>
    </span>
    <a class="addToWatchListIcon qsAdd qs-source-iwlsitbut0000010" href="http://my.fool.com/watchlist/add?ticker=&source=iwlsitbut0000010" title="Add to My Watchlist"> </a>
    ) has fallen on hard times lately. Is it time to give up on the stock, or will Corning have a banana and a comeback?
</p> 
```

想入“Glassware 老手”，“最近陷入困境，是时候放弃股票了，还是康宁会一发不可收拾，卷土重来？”

使用代码

```
tnode = root.xpath("/p")
content = tnode.text 
```

我只能得到“玻璃器老手”，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:13:18.450

这样的事情可能会让你得到你想要的：

```
>>> tnode = root.xpath('/p')
>>> content = tnode.xpath('text()')
>>> print ''.join(content)

Glassware veteran

(

) has fallen on hard times lately. Is it time to give up on the stock, or will Corning have a banana and a comeback?
>>> 
```

如果您想要*所有*文本节点，只需使用`//text()`而不是`text()`：

```
>>> print ' '.join([x.strip() for x in ele.xpath('//text()')])
Glassware veteran Corning ( NYSE: GLW    ) has fallen on hard times lately. Is it time to give up on the stock, or will Corning have a banana and a comeback? 
```

# html - Windows Phone 网络浏览器控件

> ID：13745834
> 
> 赞同：0
> 
> 时间：2012-12-06T14:35:21.480
> 
> 标签：html, webbrowser-control, windows-phone-7.1, windows-phone-8

是否可以从 WebBrowser 控件引用本地文件？我的项目层次结构的 Assets/Images 文件夹下有一个图像。我加载了以下 html 片段。

```
<html><body>
    <img src='file:///Assets/Images/myimage.png' />
</body></html> 
```

有没有办法使这项工作？（图像的构建动作是**Content**）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:00:23.703

这有点棘手，但你可以。

您必须使用 iso 存储才能在您的 html 内容中显示图像检查这一点：http: [//www.codeproject.com/Articles/333036/Include-static-JS-CSS-image-files-from-IsolatedSto](http://www.codeproject.com/Articles/333036/Include-static-JS-CSS-image-files-from-IsolatedSto)

# iphone - 设备特定的唯一标识符

> ID：13745846
> 
> 赞同：1
> 
> 时间：2012-12-06T14:36:03.370
> 
> 标签：iphone, ios, uniqueidentifier

我正在开发一个应用程序，在该应用程序中我需要一个特定于设备的全局唯一标识符（即 imei 等）。我尝试了以下代码，但它总是生成一个新的 uuid 。

```
CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);
NSString *uuidStr = ( NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuid);
CFRelease(uuid); 
```

有什么方法可以让我得到一个永远存在的唯一标识符。

PS：- 我使用的是 iOS 5 和 iOS 6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:41:50.687

Apple 不允许您跟踪唯一设备，因为该设备可以转手，而您确实想跟踪用户而不是设备。苹果也认为这是对隐私的侵犯。

goto 解决方案是使用[OpenUDID](https://github.com/ylechelle/OpenUDID)，它们将为每个应用程序生成一个唯一的密钥，该密钥存储在钥匙串中。这意味着如果用户删除应用程序，钥匙串中的数据将保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:39:21.957

您可以为自己创建一个唯一密钥，并将其存储到`NSUserDefaults`. 在启动时，检查`NSUserDefaults`以检索密钥。但是，它不会在删除/重新安装应用程序后“幸存”。

# c# - 我可以避免这种 linq 查询冗余吗？

> ID：13745847
> 
> 赞同：2
> 
> 时间：2012-12-06T14:36:05.553
> 
> 标签：c#, .net, linq, linq-to-xml

我的代码：

```
var myList = xDoc.Descendants("localita").Select(n => new
{
    ID = n.Element("id").Value.ToString(),
    Localita = n.Element("nome").Value.ToString(),
    Lat = n.Element("lat").Value.ToString(),
    Lng = n.Element("lon").Value.ToString(),
    MeteoOggi = new MeteoGiorno()
    {
        Min = n.Descendants("previsione").First().Element("temp_perc").Value.ToString(),
        Max = n.Descendants("previsione").First().Element("temp").Value.ToString(),
        DescrizioneTempo = n.Descendants("previsione").First().Element("desc_tempo").Value.ToString(),
        Precipitazioni = n.Descendants("previsione").First().Element("prec").Value.ToString(),
        VentoDirezione = n.Descendants("previsione").First().Element("v_dir").Value.ToString(),
        VentoIntensita = n.Descendants("previsione").First().Element("v_int").Value.ToString(),
        Pressione = n.Descendants("previsione").First().Element("press").Value.ToString(),
        ZeroTermico = n.Descendants("previsione").First().Element("zerot").Value.ToString(),
        Immagine = n.Descendants("previsione").First().Element("id_tempo").Value.ToString()
    }
}); 
```

但正如您所看到的，`n.Descendants("previsione").First()`每次我为 Class 设置值时都会“搜索” `MeteoGiorno`。我可以在我的示例中对该节点进行某种引用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:39:09.077

当然可以，只需更改`Select`：

```
var myList = xDoc.Descendants("localita").Select(n => {
   var previsione = n.Descendants("previsione").First();

   return new {
      ID = n.Element("id").Value.ToString(),
      ....
      MeteoOggi = new MeteoGiorno()
      {
          Min = previsione.Element("temp_perc").Value.ToString(),
          Max = previsione.Element("temp").Value.ToString(),
          ....
      }
   }
}); 
```

# junit - 如何测试@Valid

> ID：13745848
> 
> 赞同：7
> 
> 时间：2012-12-06T14:36:06.863
> 
> 标签：junit, annotations, hibernate-annotations, spring-annotations

在我的实体中，我有一些用于验证的休眠注释，例如@NotEmpty、@Pattern.. 和其他

在我的控制器中，在保存操作时，它有一个 @Valid 参数。

但是，如果任何实体有任何必填字段，并且没有注释，我就会遇到问题。

所以我想测试每个实体，以确保它们有必要的注释。

就像是：

```
@Test(expect=IllegalArgumentException.class)
public void testAllNull() {
    Person p = new Persson(); // Person name has an @NotEmpty
    validator.validate(p);
} 
```

但是如何验证呢？谁被要求检查@Valid？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T17:11:20.387

我发现了如何检查：

```
 @Autowired
    private LocalValidatorFactoryBean validator;

    ...

    validator.validateProperty(object, propertyName) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-03T00:32:26.643

这是一个基于 Spring v4.1.x 的测试示例，用于验证**@Valid**注释的存在和处理以及在发生错误时构建自定义 JSON 响应。

jUnit

```
import com.fasterxml.jackson.core.type.TypeReference;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.context.annotation.Bean;
import org.springframework.http.MediaType;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.MvcResult;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;

import javax.inject.Inject;
import java.util.List;

import static org.abtechbit.miscboard.util.JsonUtils.toJson;
import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.CoreMatchers.notNullValue;
import static org.junit.Assert.assertThat;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {
        RegistrationValidationTest.MockDependencies.class,
})
public class RegistrationValidationTest {

    @Inject
    MockMvc mvc;

    @Test
    public void validatesRegistration() throws Exception {
        Registration registration = ... //build an invalid Registration object
        MvcResult result = mvc.perform(post(RegistrationController.CONTEXT_REGISTER).
                contentType(MediaType.APPLICATION_JSON).
                content(toJson(registration))).
                andExpect(status().isBadRequest()).
                andExpect(content().contentType(MediaType.APPLICATION_JSON)).
                andReturn();

        assertThat(result.getResolvedException(), is(notNullValue()));
        String content = result.getResponse().getContentAsString();
        assertThat(content, is(notNullValue()));
        List<Message> messages = JsonUtils.fromJson(content, new TypeReference<List<Message>>() {
        });
        assertThat(messages.size(), is(1));
    }

    public static class MockDependencies {

        @Bean
        public MockMvc mvc() {
            return MockMvcBuilders.standaloneSetup(new RegistrationController()).build();
        }
    }
} 
```

控制器

```
import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.MethodArgumentNotValidException;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;
import java.util.List;
import java.util.stream.Collectors;

@Controller
public class RegistrationController
{
    public static final String CONTEXT_REGISTER = "/register";

    @RequestMapping(value = CONTEXT_REGISTER, method = RequestMethod.POST)
    @ResponseBody
    public String register(@RequestBody @Valid Registration registration) {
        //perform registration
    }

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<List> handleValidationException(MethodArgumentNotValidException ex) {
        //Build a list of custom Message{String message;} objects
        List<Message> messages = ex.getBindingResult().getAllErrors().
                stream().map(e->new Message(e.getDefaultMessage())).collect(Collectors.toList());
        return ResponseEntity.status(HttpStatus.BAD_REQUEST).contentType(MediaType.APPLICATION_JSON).body(messages);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:47:11.257

[Spring MVC 测试框架](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)可能是一个不错的选择。通过使用它，您可以确保测试中的验证运行代码，因为 Spring @MVC 实际工作。

实际上，`@Valid`注解是由 检测到的`HandlerMethodInvoker`，它处理 Spring 控制器的处理程序方法上的注解。`Validator`在内部，实际的验证逻辑根据您的应用程序上下文设置委托给bean。（Hibernate Validator 被广泛使用。）

默认配置（例如`<mvc:annotation-driven />`），`LocalValidatorFactoryBean`用于在内部处理`@Valid`注释，如@Falci 所述，但有时可能会有所不同。相反，Spring MVC 测试框架提供了与主应用程序相同的环境，因此是一个不错的选择。

# java - 附加到 SOAP 响应的奇怪空值

> ID：13745854
> 
> 赞同：0
> 
> 时间：2012-12-06T14:36:25.523
> 
> 标签：java, soap, axis2

我必须使用远程 SOAP Web 服务，其中一些字段是字符串，在许多情况下包括重音符号 (á é í ó ú)，因为它是西班牙语文本。

发生的情况是，当这些字符串有一个带重音符号的字母时，“null”会附加到字符串的开头。我得到的空值与字符串中的重音字母一样多。例如：

```
<tag_x>nullme gusta esa canción</tag_x> (1 accent - 1 null)

<tag_y>nullnullnullmás información sobre la posición</tag_y> (3 accents - 3 nulls)

<tag_z>sin acentos</tag_z> (no accents - no nulls) 
```

最让我感到困惑的是，我正在从两台不同的计算机上使用 SOAP Web 服务，而我在一种情况下得到空值，而在另一种情况下却没有。

我构建请求，发送它，当我得到响应时，我立即打印它。在一种环境中，我得到空值，在一种环境中，我没有。在这两种情况下，我们都使用 Java 1.6、axis2 来生成存根……我完全不知道是什么原因造成的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:31:23.993

在到达客户端肥皂堆栈之前，使用网络监视器查看两个响应是否相同。

如果您使用 Eclipse，您可以使用它的内置[TCP/IP 监视器](http://www.avajava.com/tutorials/lessons/how-do-i-monitor-http-communication-in-eclipse.html)来查看网络连接上的原始数据流。

如果在那个低级别上的响应不同，请责怪网络服务提供商，并出示您的证据。如果没有，那就太丢脸了。;-)

# mysql - 选择按一段时间内花费的金额计算的前 10 条记录？

> ID：13745855
> 
> 赞同：1
> 
> 时间：2012-12-06T14:36:27.763
> 
> 标签：mysql

目前，我正在努力检索按一段时间内的支出金额计算的前 10 条记录。

MySQL 表：

```
create table `payment_holder` (
    `user_id` int (11),
    `amount` Decimal (6),
    `date_added` datetime 
); 
```

演示数据：

```
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('4','3.75','2012-03-15 00:41:39');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('5','32.20','2012-03-15 00:42:10');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('6','32.20','2012-03-15 00:42:58');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('7','0.89','2012-03-15 00:48:05');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('8','3.75','2012-03-15 00:50:54');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('4','3.75','2012-03-15 00:41:39');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('5','32.20','2012-03-15 00:42:10');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('6','32.20','2012-03-15 00:42:58');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('7','0.89','2012-03-15 00:48:05');
insert into `payment_holder` (`user_id`, `amount`, `date_added`) values('8','3.75','2012-03-15 00:50:54'); 
```

我想从这个例子中检索如下结果：

```
user_id amount
------------------
6       64.40   
5       64.40   
4       7.5 
8       7.5 
7       1.78 
```

简而言之， 2012 年哪个`user_id`采购量最高`date_added`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:40:25.063

您是否尝试过这样的方法，它将返回所有年份的所有数据：

```
select user_id, sum(amount) Amount
from payment_holder
group by user_id
order by amount desc
limit 0, 10 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/cd348/7)

但是，如果您想按年份进行限制，您可以添加一个`WHERE`子句，将`YEAR()`函数应用于该`date_added`字段：

```
select user_id, sum(amount) Amount
from payment_holder
where year(date_added) = 2012
group by user_id
order by amount desc
limit 0, 10 
```

# properties - MSBuild：在预处理文件中捕获命令行属性

> ID：13745858
> 
> 赞同：3
> 
> 时间：2012-12-06T14:36:36.537
> 
> 标签：properties, import, msbuild, preprocessor

使用 MSBuild 4.0（框架版本 v4.0.30319），我在调用项目文件时将属性传递给 MSBuild：

```
MSBuild Build.csproj /p:Property1=Value1 
```

是否可以使用 /pp （预处理文件）选项在生成的文件中捕获它？

我问的原因是我们已经在导入的项目文件中设置了大约 20 个属性......我们通常会覆盖其中的不到 10 个。第一次运行 Build 项目时，要覆盖的属性通过命令行传递（通过批处理文件）。如果项目在 IDE 中启动，属性将（自然）没有修改后的值。我尝试将它们放在与项目相邻的 msbuild.rsp 文件中，当调用 MSBuild 时，它们确实生效。但我希望它们保留在导入的项目文件中，以便 IDE 也知道更新的值。导入的文件是可有可无的，因此我试图让这些值保留在其中。

在此先感谢您的任何指点。

# stream - rc4 密钥恢复（2 条消息，相同的部分密钥）

> ID：13745862
> 
> 赞同：1
> 
> 时间：2012-12-06T14:36:45.600
> 
> 标签：stream, encryption, rc4-cipher

我有两条使用相同的部分密钥加密的消息。例如：

```
 C1 = RC4(M1, "(VARIABLE_DATA)XXXXYYYY")
   C2 = RC4(M2, "(VARIABLE_DATA)XXXXYYYY") 
```

如果已知 C1 和 C2 至少可以恢复“XXXXYYYY”的部分密钥，那么 RC4 是否有可能，因为它永远不会改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:07:54.217

我认为您的问题有些混乱。流密码的工作方式是生成一个密钥流，该密钥流（通常）与消息进行异或。您是正确的，如果您使用相同的密钥和 IV，因此使用相同的密钥流，这会泄漏有关消息的信息。

这里，K 是 RC4 生成的密钥流：

> C1 = K ^ M1
> 
> C2 = K ^ M2

并通过重新排列：

> C1 ^ C2 = (K ^ M1) ^ (K ^ M2)

密钥流在这里取消了，剩下的就是

> C1 ^ C2 = M1 ^ M2

由于攻击者知道这两个密文值，他可以计算两个消息的差异。如果攻击者知道其中一个输入（可能是一个固定的标头），他就可以计算第二条消息。

> M2 = (C1 ^ C2) ^ M1

如果消息是自然语言，还有一些使用婴儿床的统计测试。

为了回答你的问题，RC4 应该在相关密钥下生成一个完全不同的密钥流，所以这种攻击不会起作用。但是，还有其他[针对密钥调度算法的攻击](http://www.crypto.com/papers/others/rc4_ksaproc.pdf)，并且有很多理由更喜欢 RC4 的替代方案。

如果您要从密钥流中恢复初始密钥，[有](http://www.iacr.org/archive/fse2008/50860272/50860272.pdf) [几个](http://en.wikipedia.org/wiki/Fluhrer,_Mantin_and_Shamir_attack)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:38:23.820

一般来说，不妥协的加密技术的密钥只能通过暴力破解来恢复，而暴力破解又需要某种方法来验证解密是否成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T14:16:47.400

Trying to solve this exact question i've stumbled across several threads with almost the same question and absolutely the same answer... which didn't work for me. BUT! The answers were absolutely correct and @mfanto gives very accurate description of what needs to be done (though the brackets make no sense as u can see in my code)!

Here is my C code which worked for me:

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
    if(argc != 4)
    {
        printf("usage: ./rc4_pa cipher1 cipher2 message1\n");
        return 1;
    }
    char *c1 = argv[1]; 
    char *c2 = argv[2];
    char *m1 = argv[3];

    int len_c1 = strlen(c1);
    int len_m1 = strlen(m1);
    char m2[len_m1 + 1];
    m2[len_m1] = '\0';

    for(int i = 0; i < len_m1; i++)
    {
        m2[i] = c1[i] ^ m1[i] ^ c2[i];
    } 
    printf("decrypted: %s\n", m2);
} 
```

Why my code didn't work out of the box? I've got my cipher text from a web server and usually some chars of a ciphertext are not really printable. The only way to pass them further is to encode once more. In my case that was base64.

save the code to `rc4_pa.c` and `make rc4_pa` than use it like this

```
$ ./rc4_pa $(echo L1Gd8F5g | base64 -d) $(echo MFuD8FVg | base64 -d) hello 
```

hope someone else might find it helpful.

# axapta - 忽略 AX 2012 中表单上的数据源过滤器？

> ID：13745863
> 
> 赞同：0
> 
> 时间：2012-12-06T14:36:46.757
> 
> 标签：axapta, dynamics-ax-2012, ax

我有一个表单，它有一个菜单项，它将我们带到另一个表单，并根据所选记录的基本 AX 过滤器。

我想创建一个单独的菜单项，将我带到同一个表单，但删除记录上的过滤器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:45:35.247

您是否在谈论动态链接，从第一个表单打开第二个表单，并且只看到第二个中与第一个中当前选定记录相关的记录。

如果是这样，请从第一个表单上的新菜单项中删除 Datasource 属性，或者以编程方式清除第二个表单数据源的 Init() 方法中的动态链接

这是一个简单的例子（来自 AX2009） [http://ckmun.wordpress.com/2009/07/08/cleardynalinks-method/](http://ckmun.wordpress.com/2009/07/08/cleardynalinks-method/)

# python - 用python跳过excel行

> ID：13745870
> 
> 赞同：0
> 
> 时间：2012-12-06T14:37:05.957
> 
> 标签：python, dictionary, continue

我正在制作一个使用该`xlrd`库解析 Excel 文件的 Python 脚本。我想要的是`if`在单元格包含某个值的不同列上进行计算。否则，跳过这些值。然后将输出存储在字典中。这是我试图做的：

```
import xlrd

workbook = xlrd.open_workbook('filter_data.xlsx')
worksheet = workbook.sheet_by_name('filter_data')

num_rows = worksheet.nrows -1
num_cells = worksheet.ncols - 1

first_col = 0
scnd_col = 1
third_col = 2

# Read Data into double level dictionary
celldict = dict()
for curr_row in range(num_rows)  :

    cell0_val = int(worksheet.cell_value(curr_row+1,first_col))
    cell1_val = worksheet.cell_value(curr_row,scnd_col)
    cell2_val = worksheet.cell_value(curr_row,third_col)

    if cell1_val[:3] == 'BL1' :
        if cell2_val=='toSkip' :
        continue
    elif cell1_val[:3] == 'OUT' :
        if cell2_val == 'toSkip' :
        continue
    if not cell0_val in celldict :
        celldict[cell0_val] = dict()
# if the entry isn't in the second level dictionary then add it, with count 1
    if not cell1_val in celldict[cell0_val] :
        celldict[cell0_val][cell1_val] = 1
        # Otherwise increase the count
    else :
        celldict[cell0_val][cell1_val] += 1 
```

所以在这里你可以看到，我计算了每个“cell0_val”的“cell1_val”值的数量。但我想跳过那些在相邻列的单元格中具有“toSkip”的值，然后再进行求和并将其存储在字典中。我在这里做错了，我觉得解决方案要简单得多。任何帮助，将不胜感激。谢谢。

这是我的工作表的一个例子：

```
cell0 cell1  cell2
12    BL1    toSkip
12    BL1    doNotSkip
12    OUT3   doNotSkip
12    OUT3   toSkip
13    BL1    doNotSkip
13    BL1    toSkip
13    OUT3   doNotSkip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:10:21.473

用于嵌套字典[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)。[`collections.Counter`](http://docs.python.org/2/library/collections.html#counter-objects)

这是在行动：

```
>>> from collections import defaultdict, Counter
>>> d = defaultdict(Counter)
>>> d['red']['blue'] += 1
>>> d['green']['brown'] += 1
>>> d['red']['blue'] += 1
>>> pprint.pprint(d)
{'green': Counter({'brown': 1}),
 'red': Counter({'blue': 2})} 
```

在这里，它被集成到您的代码中：

```
from collections import defaultdict, Counter
import xlrd

workbook = xlrd.open_workbook('filter_data.xlsx')
worksheet = workbook.sheet_by_name('filter_data')

first_col = 0
scnd_col = 1
third_col = 2

celldict = defaultdict(Counter)
for curr_row in range(1, worksheet.nrows): # start at 1 skips header row

    cell0_val = int(worksheet.cell_value(curr_row, first_col))
    cell1_val = worksheet.cell_value(curr_row, scnd_col)
    cell2_val = worksheet.cell_value(curr_row, third_col)

    if cell2_val == 'toSkip' and cell1_val[:3] in ('BL1', 'OUT'):
        continue

    celldict[cell0_val][cell1_val] += 1 
```

我还结合了您的 if 语句并将计算更改`curr_row`为更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:58:14.150

看起来你想在`cell2_val`等于时跳过当前行`'toSkip'`，所以如果你`if cell2_val=='toSkip' : continue`在计算之后直接添加它会简化代码`cell2_val`。

另外，你在哪里

```
# if the entry isn't in the second level dictionary then add it, with count 1
if not cell1_val in celldict[cell0_val] :
    celldict[cell0_val][cell1_val] = 1
    # Otherwise increase the count
else :
    celldict[cell0_val][cell1_val] += 1 
```

通常的成语更像

```
celldict[cell0_val][cell1_val] = celldict[cell0_val].get(cell1_val, 0) + 1 
```

也就是说，使用默认值 0，这样如果 key`cell1_val`还没有在 中`celldict[cell0_val]`，那么`get()`将返回 0。

# iis - 如果 CPU 使用率高于 90%，则执行 IISRESET

> ID：13745871
> 
> 赞同：3
> 
> 时间：2012-12-06T14:37:08.190
> 
> 标签：iis, batch-file, iisreset

如果 CPU 使用率超过 90%，我正在尝试找出如何执行 IISRESET。我正在考虑使用批处理文件或类似的东西，但我真的不知道。

问题是 CPU 使用率达到 99%，机器速度变慢，让网站再次运行的唯一方法是登录机器并手动执行 IISRESET，我正在尝试找出是否有办法自动执行此操作，以便当 CPU 使用率达到 95% 左右时，将发生 IISRESET。

希望有人可以提供帮助。

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:41:21.917

此 PowerShell 脚本将执行此操作：

```
if ((Get-Counter '\Processor(_Total)\% Processor Time').CounterSamples[0].CookedValue -gt 90) { &iisreset } 
```

# prolog - Prolog 未返回预期值

> ID：13745873
> 
> 赞同：2
> 
> 时间：2012-12-06T14:37:13.917
> 
> 标签：prolog

我正在尝试熟悉 Prolog（特别是 SWI Prolog）。

我有这个非常简单的清单：

```
animal(bear).
animal(mouse).
animal(bird). 
```

现在，每当我要求所有满足谓词动物的原子（正确的表达方式是什么？）时，我总是只得到第一个。

```
?- animal(X).
X = bear . 
```

尽管对于动物来说，所有三个原子都评估为“真”。

```
?- animal(mouse).
true.

?- animal(bird).
true. 
```

我究竟做错了什么？这种行为是否可以通过某些设置来控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:41:26.530

您的代码没有任何问题。Prolog 是一个推理机。所以它试图找到满足所有变量的第一个解决方案。一旦找到解决方案，它就会打印出来。

现在，如果您需要其他解决方案，应该输入一些组合，以便 prolog 继续搜索。如果我没记错的话，它可能是一个分号...

希望这可以帮助

# php - 图片上传不起作用

> ID：13745874
> 
> 赞同：0
> 
> 时间：2012-12-06T14:37:14.243
> 
> 标签：php, mysql, upload

我得到了这个上传脚本，但是当我想运行它时，页面返回空白。出了点问题，但我无法弄清楚错误在哪里以及如何解决它。如果有人帮助我制作这个脚本，我将不胜感激！**非常感谢 ！**

```
<?php
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 20000)
    && in_array($extension, $allowedExts))
      {
      if ($_FILES["file"]["error"] > 0)
        {
        echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
        }
      else
        {
        echo "Upload: " . $_FILES["file"]["name"] . "<br>";
        echo "Type: " . $_FILES["file"]["type"] . "<br>";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

        if (file_exists("upload/" . $_FILES["file"]["name"]))
          {
          echo $_FILES["file"]["name"] . " already exists. ";
          }
        else
          {
          move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]);
            include 'db.php';
            mysql_query("INSERT INTO `members`(img) VALUES ('$_FILES["file"]["name"]')");
            include 'succes.php';
            }
        }
      }
    else
      {
      echo "Invalid file";
      }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:42:12.723

此行有错误

```
mysql_query("INSERT INTO `members`(img) VALUES ('$_FILES["file"]["name"]')"); 
```

将该行更改为

```
mysql_query("INSERT INTO `members`(img) VALUES ('{$_FILES["file"]["name"]}')"); 
```

**更新：**

错误是`Parse error: syntax error, unexpected '"', expecting T_STRING or T_VARIABLE or T_NUM_STRING on line 30`

**注意：**不要使用`mysql_*`它们很快就会被弃用的功能。而是使用 PDO 或 mysqli 函数。在将数据插入数据库之前，请始终验证数据并注意 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:43:50.840

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

但是，请检查该`upload/`文件夹是否具有`read and write`权限并使用此工作代码：

```
mysql_query("INSERT INTO `members`(img) VALUES ('" . $_FILES["file"]["name"] . "');"); 
```

看到使用该代码存在 SQL 注入漏洞，我建议您通过`PDO`.

如果您必须更新现有记录，请使用：

```
mysql_query("UPDATE `members` SET img = '" . $_FILES["file"]["name"] . "' WHERE member_id = '" . $member_id . "';"); 
```

如果您必须向现有成员添加新图像，您可以尝试：

```
mysql_query("INSERT INTO `members` (img, member_id) VALUES ('" . $_FILES["file"]["name"] . "', '" . $member_id . "');"); 
```

# ruby - 如何以简单的方式访问类设置器？

> ID：13745876
> 
> 赞同：2
> 
> 时间：2012-12-06T14:37:24.830
> 
> 标签：ruby, oop, setter

如何在同一个类中轻松访问 setter？

可以说我有这个电话：

```
# some_file.rb , create a new object
temperature = Measurement.new 'temperature', 36.6 
```

还有一个模型：

```
# Measurements.rb , some model
class Measurement
  attr_accessor :value, :type
  attr_reader :device, :title, :label

  def initialize type, value
    # This one works, but not trigger the setter
    @type = type
    # And this one trigger setter
    self.type = type
  end

  def type= new_type
    # do something very important
  end    
end 
```

这是否意味着我总是需要使用`self.var =`而不是`@var =`如果我想使用带有这个变量的设置器而不在类中的任何地方重命名它？有没有更多的区别，以及添加二传手的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:47:18.720

是的，你总是这样。在 Ruby 中，并不存在真正意义上的 setter。只是一种以`=`. 但是，由于语法歧义，您必须始终在 setter 前加上一个对象和一个句点，否则 Ruby 将看到对局部变量的赋值。

换句话说，请记住这`@blah`是原始访问，并且永远不会触发方法（不完全正确，有一些日志记录和调试方法，但没关系）。

`self.blah=`所以，如果你的二传手那么重要，那就忍受吧。

# mysql - MySQL 每个用户插入（条件）唯一值一次

> ID：13745881
> 
> 赞同：1
> 
> 时间：2012-12-06T14:37:47.190
> 
> 标签：mysql, insert, key, unique

我不知道如何在标题中解释这一点，但我有一张这样的表格：

```
user_id           | subscription_id
6                   12
6                   10
12                  6
4                   12 
```

每个用户都可以订阅所有其他用户，但是是否可以通过 INSERT 查询阻止一个用户两次订阅另一个用户？

由于我的 subscription_id 不是唯一的，因此会发生这种情况：

```
user_id           | subscription_id
6                   12
6                   12 
```

我想避免这种情况。据我所知，INSERT IGNORE、INSERT UPDATE 和 ON DUPLICATE 仅适用于唯一键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:40:51.100

您需要将数据库表设置为具有 user_id 和 subscription_id 的复合主键

这样，每一行在两列中都必须是唯一的。

请参阅：[如何正确创建复合主键 - MYSQL](https://stackoverflow.com/questions/5835978/how-to-properly-create-composite-primary-keys-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:41:24.720

确保元组在单个表中不能多次出现的唯一可靠且简单的方法是：

1.  使用跨越唯一键

2.  使用跨越主键

3.  也许触发

前两个大致相同，但唯一键也将空值视为不同的，因此这可能不适合您。

```
ALTER TABLE user_subscriptions ADD PRIMARY(user_id, subscription_id); 
```

# git - 如何获取 Git 当前分支和标签

> ID：13745887
> 
> 赞同：1
> 
> 时间：2012-12-06T14:38:12.570
> 
> 标签：git

我想设置一个别名来获取指向当前变更集（`HEAD`）或给定引用的引用名称。目的是知道“我们在哪里？”、“哪些分支和标签是等价的（指向同一个 ref）？”、“当前的 ref 是什么？”、“给定的 ref 与 HEAD 相比在哪里？”。
其中一些信息可使用各种 Git 命令获得，并显示在大多数 Git 提示中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:38:12.570

以下两个命令几乎提供了我想要的：

```
id = log -1 --pretty=format:'%h%d'
id = show -s --pretty=format:'%h%d' 
```

能够将 ref 作为参数，例如：

```
$ git id 5.6.0
02a719d (some-tag, origin/master, origin/5.6.0, master, feature-NXP-9342-make_wizard_use_connect_client, 5.6.0) 
```

理想情况下，我想添加一些颜色来以不同的方式突出显示当前结帐 ref ( `.git/HEAD`)、标签以及本地和远程分支。reflog 也可能很有用（例如`HEAD@{4}`）。
例如，在上面的示例中，将`some-tag`是黄色（标签的颜色），蓝色（远程分支的颜色），绿色（分支的颜色）和橙色（当前 HEAD 的颜色）。有什么提示吗？`origin/master``origin/5.6.0``feature-NXP-9342-make_wizard_use_connect_client``5.6.0``master`

# json - 未找到 AppEngine 和 Jackson 类：JaxbAnnotationIntrospector（起初）

> ID：13745889
> 
> 赞同：0
> 
> 时间：2012-12-06T14:38:18.610
> 
> 标签：json, google-app-engine, jersey, jackson

我正在尝试让一个简单的 AppEngine 工作，它充当 Web 服务并以 JSON 格式交付内容。

我正在使用 Jersey 和 Jackson，尽管当我第一次启动应用程序并访问其中一个 Web 服务时，我收到此错误：

java.lang.NoClassDefFoundError：com/google/appengine/repackaged/org/codehaus/jackson/xc/JaxbAnnotationIntrospector

如果我尝试在之后立即访问另一个 WS（或尝试重新访问当前的），那么一切似乎都很好。只是不是第一次。

任何人都知道如何解决这个问题？

氪，

短剑

# c# - 计划任务时间约束

> ID：13745891
> 
> 赞同：2
> 
> 时间：2012-12-06T14:38:28.977
> 
> 标签：c#, .net-4.0, windows-services, scheduled-tasks

我已经阅读了一些关于是否使用 Windows 服务或计划任务的帖子，根据我的理解，我应该使用计划任务。

我有一个简单的程序，基本上做一点逻辑并发送电子邮件。我唯一的硬性要求是必须在`:40`每小时的分钟标记上发送电子邮件。所以 8:40、9:40、10:40 等。当我最初为任务设置时间表时，我可以将其设置为从 8:40 开始，每小时、每天重复一次。

这似乎满足了要求，但我是否应该担心确保任务按计划运行？

这一切似乎都很简单，我确定我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:29:43.513

好几点要提

*   如果您使用的是批处理文件，请确保其他程序可以替换或更改它。
*   使用和访问日志来记录执行是否成功，以便您稍后监控（调试您的应用程序）
*   使用计划任务错误检查您的应用程序是否正确运行 ( [http://support.microsoft.com/kb/308558](http://support.microsoft.com/kb/308558) )
*   使用尽可能少的权限。（这是默认设置）

# java - java语言规范中的颜色是什么意思 - 差异版本？

> ID：13745895
> 
> 赞同：-5
> 
> 时间：2012-12-06T14:38:36.007
> 
> 标签：java

[我从 Java SE 5.0 for java 7 下载了带有差异](http://docs.oracle.com/javase/specs/jls/se7/jls7-diffs.pdf)的 jsl PDF - 并计划在我的暑假阅读它。有些段落是红色的，有些是蓝色的，有些是绿色的。我想这些是差异。他们的意思是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:56:00.100

颜色的含义如下：

*   黑色 - 未更改
*   绿色 - 添加文字
*   红色 - 删除的文本
*   蓝色 - 文本格式更改。

# php - Laravel 身份验证检查所有页面

> ID：13745897
> 
> 赞同：7
> 
> 时间：2012-12-06T14:38:44.120
> 
> 标签：php, authentication, laravel

我已经创建了身份验证，并且它工作得很好。但是检查内页有一些问题。例如，

```
Route::get('/', array('before' => 'auth' , 'do'=> function(){
return View::make('home.index');
})); 
```

索引页面仅对登录用户可见。但是每当我进入内页时，例如`example.com/products`。无需登录即可查看产品页面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-22T17:21:21.093

这是我的解决方案。

```
/**
 * Groups of routes that needs authentication to access.
 */
Route::group(array('before' => 'auth'), function() 
{
    Route::get('user/logout', array(
        'uses' => 'UserController@doLogout',
    ));

    Route::get('/', function() {
        return Redirect::to('dashboard');
    });

    Route::get('dashboard',  array(
        'uses' => 'DashboardController@showIndex',
    ));

    // More Routes

});

// Here Routes that don't need Auth. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T19:42:22.103

有几种方法可以为许多路由应用过滤器。

将 rotues 放入`Route::group()`或者如果您使用控制器在其中添加过滤器，请将其添加到其中，`Base_Controller`以便将其应用于所有人。您还可以使用过滤器模式并使用正则表达式，它将过滤器应用于除您不想要的少数之外的所有人。

**文档**

路由过滤器：http: [//laravel.com/docs/routing#route-filters](http://laravel.com/docs/routing#route-filters)

模式过滤器的示例，因为其他基本在文档中。这可能是最快的，但也是最成问题的，因为在此函数中注册正则表达式的方式存在问题（`*`实际上已转换为`(.*)`）。

```
Route::filter('pattern: ^(?!login)*', 'auth'); 
```

这将 auth 应用于除`example.com/login`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-16T22:31:34.090

```
Route::group(['middleware' => ['auth']], function()
{
    Route::get('list', 'EventsController@index');     
}); 
```

在文档页面上阅读更多信息： [https ://laravel.com/docs/5.2/routing#route-groups](https://laravel.com/docs/5.2/routing#route-groups)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-08T23:58:01.310

可能有更好的方法，但我采用白名单方法。除了我放在这个数组中的页面之外，所有内容都被禁止公开。

```
 // config/application.php   
 return array(

    'safe' => array(
        '/',
        'card/form_confirm',
        'record/form_create',
        'card/form_viewer',
        'user/login',
        'user/quick_login',
        'user/register',
        'info/how_it_works',
        'info/pricing',
        'info/faq',
        'info/our_story',
        'invite/accept',
        'user/terms',
        'user/privacy',
        'email/send_email_queue',
        'user/manual_login',
        'checkin/',
        'checkin/activate',
        'system/list',
    ),

// routes.php
Route::filter('before', function()
{
    // Maintenance mode
    if(0) return Response::error( '503' );

    /*
        Secures parts of the application
        from public viewing.
    */
    $location = URI::segment(1) . '/' . URI::segment(2);
    if(Auth::guest() && !in_array( $location, Config::get('application.safe')))
        return Redirect::to( 'user/login' );
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-23T10:41:36.343

这段代码对我很好

```
Auth::routes();

Route::group(['middleware' => 'auth'], function () {
    // Authentication Routes...
    Route::get('/', 'HomeController@index')->name('home');

}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T14:44:20.227

只需检查用户是否在您的视图中登录。或限制所有控制器（如果您使用它）或检查路由组，并为整个路由组提供过滤器：http: [//laravel.com/docs/routing#groups](http://laravel.com/docs/routing#groups)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-07T15:50:51.580

```
Route::filter('pattern: /*', array('name' => 'auth', function()
{
  return View::make('home.index');
})); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-07T17:19:19.603

使用 BaseController 扩展所有 Controller 必须登录的用户可以解决相同的问题。

例子：

```
class SomeController extends BaseController
{
    public function index() { return view('some.index');}
} 
```

`__construct()`只需向 BaseController添加一个方法

```
class BaseController extends Controller
{
    protected $redirectTo = '/myIndex'; // Redirect after successfull login

    public function __construct()
    {
        $this->middleware('auth'); // force all controllers extending this to pass auth
    }
} 
```

更多信息[在这里](https://laravel.com/docs/5.7/authentication#protecting-routes)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-03T04:23:30.537

它对我有用。看看它。

```
Route::when('*', 'auth.basic');

Route::get('api/getactorinfo/{actorname}', array('uses' =>'ActorController@getActorInfo'));
Route::get('api/getmovieinfo/{moviename}', array('uses' =>'MovieController@getMovieInfo'));
Route::put('api/addactor/{actorname}', array('uses' =>'ActorController@putActor'));
Route::put('api/addmovie/{moviename}/{movieyear}', array('uses' =>'MovieController@putMovie'));
Route::delete('api/deleteactor/{id}', array('uses' =>'ActorController@deleteActor'));
Route::delete('api/deletemovie/{id}', array('uses' =>'MovieController@deleteMovie')); 
```

# c# - WPF MVVM 文本框文本绑定

> ID：13745901
> 
> 赞同：5
> 
> 时间：2012-12-06T14:38:55.317
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

我刚刚开始使用 MVVM，如果我做了一些非常愚蠢的事情，我深表歉意。我尝试编写一个非常简单的测试，看看我是否能记住所有内容，而对于我的生活，我不明白为什么它不起作用。

在我看来，我有一个文本框，它的文本属性绑定到 ViewModel 中的一个值。然后，当按下按钮时，应该更改值并更新文本框。

我可以看到值确实发生了变化（我在按钮按下命令中添加了 MessageBox.Show() 行）但是文本框没有更新。

我认为这意味着我没有正确实施该`INotifyPropertyChanged`事件，但看不到我的错误。

谁能指出我正确的方向？

这是代码：

看法

```
<Window x:Class="Mvvm.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">

<StackPanel Orientation="Horizontal" VerticalAlignment="Top">
    <TextBox Height="40" Width="200" Text="{Binding helloWorld.Message, UpdateSourceTrigger=PropertyChanged}"/>
    <Button Command="{Binding UpdateTimeCommand}">Update</Button>
</StackPanel>
</Window> 
```

背后视图

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel.MainWindowViewModel();
    }
} 
```

视图模型

```
namespace Mvvm.ViewModel
{
internal class MainWindowViewModel
{
    private HelloWorld _helloWorld;

    /// <summary>
    /// Creates a new instance of the ViewModel Class
    /// </summary>
    public MainWindowViewModel()
    {
        _helloWorld = new HelloWorld("The time is " + DateTime.Now.ToString("HH:mm:ss"));
        UpdateTimeCommand = new Commands.UpdateTimeCommand(this);
    }

    /// <summary>
    /// Gets the HellowWorld instance
    /// </summary>
    public HelloWorld helloWorld
    {
        get
        {
            return _helloWorld;
        }
        set
        {
            _helloWorld = value;
        }
    }

    /// <summary>
    /// Updates the time shown in the helloWorld 
    /// </summary>
    public void UpdateTime()
    {
        helloWorld = new HelloWorld("The time is " + DateTime.Now.ToString("HH:mm:ss"));
    }

    public ICommand UpdateTimeCommand
    {
        get;
        private set;
    }
} 
```

模型

```
namespace Mvvm.Model
{
    class HelloWorld : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public HelloWorld(string helloWorldMessage)
        {
            Message = "Hello World! " + helloWorldMessage;
        }

        private string _Message;
        public string Message
        {
            get
            {
                return _Message;
            }
            set
            {
                _Message = value;
                OnPropertyChanged("Message");
            }
        }

        private void OnPropertyChanged(string p)
        {
            PropertyChangedEventHandler handler = PropertyChanged;

            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(p));
            }
        }
    }
} 
```

命令

```
namespace Mvvm.Commands
{
    internal class UpdateTimeCommand : ICommand
    {
        private ViewModel.MainWindowViewModel _viewModel;
        public UpdateTimeCommand(ViewModel.MainWindowViewModel viewModel)
        {
            _viewModel = viewModel;
        }

        public event EventHandler CanExecuteChanged
        {
            add { CommandManager.RequerySuggested += value; }
            remove { CommandManager.RequerySuggested -= value; }
        }

        public bool CanExecute(object parameter)
        {
            return true;
        }

        public void Execute(object parameter)
        {
            _viewModel.UpdateTime();
        }
    }
} 
```

抱歉这么长的帖子，这是我的错误帖子，但我已经看了很长时间，我不知道我做错了什么

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:47:50.490

您遇到的问题是您更改了错误的属性。不是更改`HelloWorld.Message`属性，而是更改`MainWindowViewModel.HelloWorld`属性。如果您更改此行，您的代码将正常工作：

```
public void UpdateTime()
{
    helloWorld = new HelloWorld("The time is " + DateTime.Now.ToString("HH:mm:ss"));
} 
```

对于这个

```
public void UpdateTime()
{
    helloWorld.Message = "The time is " + DateTime.Now.ToString("HH:mm:ss");
} 
```

如果要保留原始代码，则需要为 ViewModel 实现 INotifyPropertyChanged，并在更改`helloWorld`对象时触发事件。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:49:44.210

我认为您需要在 ViewModel 上实现 PropertyChanged 通知。您正在 UpdateTime 方法中创建一个新的 HelloWorld，但 UI 不知道它。

# 编辑

我有一个 ViewModel 基类，我从中派生出所有的 ViewModel。它实现了 INotifyPropertyChanged，并引用了我的中继命令类和其他一些常见的东西。我建议始终在 ViewModel 上实现 INotifyPropertyChanged。ViewModel 用于向 UI 公开数据，而对于没有该接口的数据更改，它无法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:54:20.313

我认为您的 ViewModel 也需要实现 INotifyPropertyChanged，或者您可以在调用 InitializeComponents() 之前设置 DataContext，如果这样做，您应该更改代码以不像 Agustin Meriles 所说的那样每次更新都创建一个新实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T14:56:11.110

1.  我认为你弄错了模型和虚拟机：模型是 MainWindowViewModel 而虚拟机是 HelloWorld

2.  在您的 VM（类 HelloWorld ）中，您需要使用您的模型

    因此，您的课程将如下所示：

    ```
     using System.ComponentModel;

    namespace WpfApplication1
    {
        public sealed class TextVM : INotifyPropertyChanged
        {
            public event PropertyChangedEventHandler PropertyChanged;
            private TextInfo _info;

            public TextVM()
            {
                _info = new TextInfo();
            }

            public string MyText 
            {
                get { return _info.MyText; }
                set
                {
                    _info.MyText = value;
                    OnPropertyChanged("MyText");
                }
            }

            private void OnPropertyChanged(string p)
            {
                PropertyChangedEventHandler handler = PropertyChanged;

                if (handler != null)
                {
                    handler(this, new PropertyChangedEventArgs(p));
                }
            }
        }
    }

    using System;

    namespace WpfApplication1
    {
        public sealed class TextInfo
        {
            public TextInfo()
            {
                MyText = String.Empty;
            }

            public string MyText { get; set; }
        }
    } 
    ```

在您的 ICommands 中插入

# ios - ios：如何检测用户取消拨打电话号码

> ID：13745902
> 
> 赞同：1
> 
> 时间：2012-12-06T14:38:55.917
> 
> 标签：ios, cocoa-touch

> **可能重复：**
> [从我的应用程序拨打电话时如何确定用户是否按下了通话或取消按钮？](https://stackoverflow.com/questions/13743344/how-to-find-out-if-user-pressed-call-or-cancel-button-when-making-call-from-my-a)

我可以使用以下代码在 ios 中拨打电话号码：

```
 NSURL *url = [NSURL URLWithString:@"tel://123"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
UIWebView *webView = [[UIWebView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
[webView loadRequest:request]; 
```

由于运行此代码后会显示警报视图，我如何检测用户是否按下取消按钮或呼叫按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:21:24.923

如果不越狱您的设备，这是不可能直接实现的。但是，正如@J Shapiro 在[这篇文章](https://stackoverflow.com/a/13743956/716216)中所建议的那样，您可以使用以下代码来收听`UIApplicationSuspendedNotification`通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(suspended:) name:@"UIApplicationSuspendedNotification" object:nil];

-(void)suspended:(NSNotification *) notification
{
    NSLog(@"Suspended");
} 
```

# c# - LINQ Lambda，按列表分组

> ID：13745904
> 
> 赞同：9
> 
> 时间：2012-12-06T14:39:01.593
> 
> 标签：c#, database, linq, entity-framework, notsupportedexception

我在找到正确的语法来完成以下操作时遇到了一些麻烦：

是否可以将 LINQ（Lambda 表达式）用于 .GroupBy 数据，而不是使用通常的 .Sum() 或 .Count() 我希望结果数据是 Int 列表。

我定义了自己的类，名为：Filter_IDs。它的构造函数需要两个参数：

```
public int? type; // Represents the object_type column from my database
public List<int?> objects; // Represents the object_id column from my database 
```

我想将数据库中的数据加载到这个对象中。以下 LINQ 查询应生成 Filter_ID 列表：

以下 LINQ 查询应生成 Filter_ID 列表：

```
List<Filter_IDs> filterids = ef.filterLine
        .GroupBy(fl => fl.objectType)
    .Select(fl => new Filter_IDs { type = fl.Key, objects = fl.Select(x => x.object_id).ToList() })
    .ToList(); 
```

使用此查询不会产生任何构建错误，但会在运行时出现“NotSupportedException”。

数据库看起来像这样可以让您更好地理解数据：

[http://d.pr/i/mnhq+（droplr](http://d.pr/i/mnhq+)图像）

在此先感谢，格本

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T14:44:11.863

我认为问题是数据库无法在选择中调用 ToList，也无法创建新的 Filter_ID。

尝试这样的事情：

```
List<Filter_IDs> filterids = ef.filterLine.Select(o => new { objectType = o.objectType, object_id=o.object_id})
    .GroupBy(fl => fl.objectType).ToList()
    .Select(fl => new Filter_IDs { type = fl.Key, objects = fl.Select(x => x.object_id).ToList() })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:49:16.800

也许你想要

```
IList<Filter_IDs> filterIds = ef.filterline
    .Select(fl => fl.objectType).Distinct()
    .Select(ot => new Filter_IDs
        {
            type = ot,
            objects = ef.filterline
                          .Where(fl => fl.objectType == ot)
                          .Select(fl =>objectType)
                          .ToList()
        }).ToList(); 
```

获取不同的列表`objectType`并使用它对每个列表进行子查询`object_id`。

但是，对我来说，按顺序枚举值似乎更有效，

```
var results = new List<Filter_IDs>();
var ids = new List<int>();
var first = true;
int thisType;

foreach (var fl in ef.filterLines
                       .OrderBy(fl => fl.objectType)
                       .ThenBy(fl => fl.object_Id))
{
    if (first)
    {
        thisType = fl.objectType;
        first = false;
    }
    else
    {
        if (fl.objectType == thisType)
        {
            ids.Add(fl.object_Id);
        }
        else
        {
           results.Add(new Filter_IDs
                {
                    Type = thisType,
                    objects = ids
                });
           thisType = fl.objectType;
           ids = new List<int>();   
        }
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T14:44:35.020

您可以在客户端使用 GroupBy：

```
List<Filter_IDs> filterids = ef.filterLine
        .Select(fl=>new {fl.ObjectType, fl.object_id})
        .AsEnumerable()
        .GroupBy(fl => fl.objectType)
    .Select(fl => new Filter_IDs { type = fl.Key, objects = fl.Select(x => x.object_id).ToList() })
    .ToList(); 
```

# java - CATALINA_OPTS 在 Tomcat 中是如何工作的？

> ID：13745907
> 
> 赞同：2
> 
> 时间：2012-12-06T14:39:10.287
> 
> 标签：java, tomcat, servlets

我很好奇 CATALINA_OPTS 如何在 Apache Tomcat 的后台工作？是的，我知道它在 Tomcat 启动和运行时执行，我在其中添加了一些供我的程序使用的参数，即使我长时间使用它，也将它添加到我的 VM 参数中，但不确定它是如何真正运行的。

例如，是否可以将 Web.xml 中的那些参数设置为上下文初始化参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T14:44:49.033

它们只是 Tomcat 启动脚本在启动时传递给 Java 运行时可执行文件的命令行选项。由于服务器已经在运行，因此您无法在运行时更改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:48:08.860

稍微扩展 Zutty 的答案。可以使用[JMX 调整正在运行的 Tomcat 实例。](http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html).

# android - 如何在运行时更改 Android ListView 中的 textview 大小和位置

> ID：13745908
> 
> 赞同：1
> 
> 时间：2012-12-06T14:39:17.950
> 
> 标签：android, mono

我在同一行上有一个带有 3 个 textview 的 ListView，从 axml 文件膨胀，每个 textview 都有一个值，就像一个表。我需要在运行时更改这些文本视图的大小和位置（仅限 x 轴）。我想我已经尝试了一切，但没有任何效果。

这是我的代码：

```
 public override Android.Views.View GetView (int position, Android.Views.View convertView, 
                                           Android.Views.ViewGroup parent)
{           
    var view = convertView;
    if (convertView == null || !(convertView is LinearLayout))            
        view = CurrAct.LayoutInflater.Inflate(Resource.Layout.XXX, parent, false);

    if (position == _CurrPos)            
        SelectRow(view);
    else            
        view.SetBackgroundColor(CurrAct.Resources.GetColor(Resource.Color.solidwhite)); 

    TextView[] LocArrTxt = new TextView[3];
    LocArrTxt[0] = view.FindViewById<TextView> (Resource.Id.TextView0);
    LocArrTxt[1] = view.FindViewById<TextView> (Resource.Id.TextView1);
    LocArrTxt[2] = view.FindViewById<TextView> (Resource.Id.TextView2);

    for (int i=0; i<3; i++)
    {
        LocArrTxt[i].Text = NewValue; 
        LocArrTxt[i].Layout(NewLeft, OriginalTop, NewRight, OriginalBottom);
        LocArrTxt[i].SetWidth(NewRight-NewLeft);           
    }                 

    return view;
} 
```

这是文件 axml：带有 3 个文本视图的水平线性布局。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minWidth="25px"
    android:minHeight="25px"
    android:id="@+id/LinLay"
    android:background="#ffffffff">
    <TextView
        android:text="Text"
        android:layout_width="160dp"
        android:id="@+id/TextView0"
        style="@style/BlackLabel"
        android:layout_height="30dp"
        android:layout_weight="1" />
    <TextView
        android:text="Text"
        android:layout_width="96dp"
        android:id="@+id/TextView1"
        style="@style/BlackLabel"
        android:layout_height="30dp"
        android:layout_weight="1" />
    <TextView
        android:text="Text"
        android:layout_width="64dp"
        android:id="@+id/TextView2"
        style="@style/BlackLabel"
        android:layout_height="30dp"
        android:layout_weight="1" />
</LinearLayout> 
```

任何想法？我已经失去了 2 天没有解决方案。

# r - 为R中另一个变量的每个值找到一个变量的最小值

> ID：13745909
> 
> 赞同：0
> 
> 时间：2012-12-06T14:39:18.967
> 
> 标签：r

我对 R 相当陌生，正在尝试找到 ID 号的每个值的最小日期/时间。下面是我正在使用的数据示例

```
ID        DATE  
1         11/24/12 12:51 
1         11/24/12 12:52 
1         11/24/12 12:53
2         11/27/12 12:51
2         11/24/12 12:52
2         11/24/12 12:53 
```

我需要做的是生成一个对象，该对象显示每个 ID 值的最早日期/时间，如下所示：

```
ID        DATE  
1         11/24/12 12:51
2         11/27/12 12:51 
```

我尝试了几种方法，但仍在苦苦挣扎。
任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:50:20.783

尝试使用 R 基函数（如 Roland 建议的那样）

```
DATE <- strptime(c("11/24/12 12:51", "11/24/12 12:52", "11/24/12 12:53", 
                   "11/27/12 12:51", "11/24/12 12:52", "11/24/12 12:53"),
                 "%m/%d/%y %H:%M")
ID <- rep(1:2, each=3)
DF <- data.frame(ID, DATE)

aggregate(DATE ~ ID, min, data=DF) 
  ID                DATE
1  1 2012-11-24 12:51:00
2  2 2012-11-24 12:52:00 
```

# php - PHP/ MySQL 查询：未插入行

> ID：13745916
> 
> 赞同：0
> 
> 时间：2012-12-06T14:39:35.003
> 
> 标签：php, mysql, sql, mysqli

我有一个大的 SQL 文件，我正试图插入到数据库中。由于它太大，它无法通过 phpMyAdmin 工作，所以我创建了一个自定义脚本：

```
<?php

ini_set('max_execution_time', 0);

$file = file_get_contents('./mySQLfile.sql');

//var_dump($file); die();

$conn = new mysqli('localhost', 'myUserName', 'myPassword', 'myDatabase');

$q = $file;

if ($result = $conn->query($q))
{
    echo '<font color="red">'.$conn->error.'</font>';
    echo '<br />';
}

?> 
```

文件 var_dump() 正确。创建到数据库的连接（我已经通过从数据库返回值对其进行了测试）。但是，当我运行代码时，没有数据插入到数据库中。SQL文件的开头如下：

```
-- phpMyAdmin SQL Dump
-- version 3.4.5
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Dec 05, 2012 at 04:01 PM
-- Server version: 5.5.16
-- PHP Version: 5.3.8

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `myDatabase`
--

-- --------------------------------------------------------

--
-- Table structure for table `content_field_image_cache`
--

CREATE TABLE IF NOT EXISTS `content_field_image_cache` (
  `vid` int(10) unsigned NOT NULL DEFAULT '0',
  `nid` int(10) unsigned NOT NULL DEFAULT '0',
  `delta` int(10) unsigned NOT NULL DEFAULT '0',
  `field_image_cache_fid` int(11) DEFAULT NULL,
  `field_image_cache_list` tinyint(4) DEFAULT NULL,
  `field_image_cache_data` text,
  PRIMARY KEY (`vid`,`delta`),
  KEY `nid` (`nid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `content_field_image_cache`
--

INSERT INTO `content_field_image_cache` (`vid`, `nid`, `delta`, `field_image_cache_fid`, `field_image_cache_list`, `field_image_cache_data`) VALUES
(1000, 1000, 0, 1000, 1, NULL),
(1001, 1001, 0, 1001, 1, NULL),
(1002, 1002, 0, 1002, 1, NULL), 
```

为什么不插入这些值？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:43:12.917

作为安全措施，PHP 的 mysql 驱动程序 (mysql/mysqli/pdo) 不允许在一次调用中进行多个查询。您不能将整个转储提供给这样的单个查询调用。

你最好简单地做类似的事情

```
exec("mysql -u xxx -p < dump.sql"); 
```

反而。

# python - 使用 IBM SPSS 20 独立数据文件驱动程序以编程方式创建 ODBC 数据源

> ID：13745922
> 
> 赞同：1
> 
> 时间：2012-12-06T14:39:49.293
> 
> 标签：python, vba, odbc, spss

**问题：**

我有一个 .sav 文件，其中包含来自调查问卷的大量数据。该数据通过使用 VBA 的 ODBC 连接传输到访问数据库。许多不那么精通技术的同事正在使用 VBA 宏，每次他们需要使用新的 .sav 文件时，他们都需要创建或更改连接。每次解释如何都可能很麻烦，所以我希望能够以编程方式创建此连接（理想情况下包含在 VBA 宏中，但如果这不可能，则类似于 python 脚本将执行此操作）。

**我想到的解决方案：**

我对 VBA 不是很熟悉，所以一开始我尝试用 python 来做。我找到了这个例子，这似乎（对我来说）是一个解决方案：

[http://code.activestate.com/recipes/414879-create-an-odbc-data-source/](http://code.activestate.com/recipes/414879-create-an-odbc-data-source/)

但是，我不确定要为 SQLConfigDataSource 提供哪些参数。我试过：

```
create_sys_dsn(
    'IBM SPSS Statistics 20 Data File Driver - Standalone',
    SDSN='SAVDB',
    HST='C:\ProgramFiles\IBM\SPSS\StatisticsDataFileDriver\20\Standalone\cfg\oadm.ini',
    PRT='StatisticsSAVDriverStandalone',
    CP_CONNECT_STRING='data/Dustin_w44-47_2011.sav',
    CP_UserMissingIsNull=1) 
```

但无济于事。

在这个领域是绿色的，我意识到我提出的解决方案甚至可能不是正确的解决方案。stackoverflow有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:16:48.983

一旦你有了文件名，从一个提示，比如

```
dim fd as Object
dim CSVFilename as String
Set fd = Application.FileDialog(3)
'Use a With...End With block to reference the FileDialog object.
With fd
    .AllowMultiSelect = False
    .Filters.Add "Data Files", "*.csv", 1
    .ButtonName = "Forecast"
    If .Show = -1 Then
        CSVFilename = .SelectedItems(1) 
        ' returns an array, even with multiselect off
    Else
        Exit Sub
    End If
End With
'Set the object variable to Nothing.
Set fd = Nothing 
```

那么您应该能够构造连接字符串，这将允许您打开文件

```
Dim MyConnect as new Connection

With MyConnect
    .Provider="IBM SPSS Statistics 20 Data File Driver - Standalone"
    .ConnectionString="data/" & CSVFilename
    .Open
End With 
```

我还要指出，如果您可以使用（或等效）导入**csv**文件`External Data -> Text File`，那么命令更像

```
DoCmd.TransferText(TransferType, SpecificationName, TableName, FileName, _
    HasFieldNames, HTMLTableName, CodePage) 
```

对你来说可能会更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:05:06.123

对于碰巧需要解决方案的任何人，我最终做的是通过手动编辑注册表来创建系统 DSN。

要查看需要修改哪些键和值，请手动创建系统 DSN 并检查 'HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI[DSN]' 和 'HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI\ODBC 数据源中的值'。那么如何通过VBA创建DSN应该很清楚了。

# jquery - JQuery Mobile：格式化自动完成结果

> ID：13745924
> 
> 赞同：1
> 
> 时间：2012-12-06T14:39:57.873
> 
> 标签：jquery, jquery-mobile

我正在为内部 Web 应用程序开发移动选项。我有一个在 PC 端工作的自动选择，但是在移动端查看时，搜索结果在显示时看起来很糟糕： [格式错误 http://www.rkrdevel.com/files/mobile_autoselect.png](http://www.rkrdevel.com/files/mobile_autoselect.png)

理想情况下，我希望列表视图看起来更像一个下拉列表。在手机上显示时，我知道它可能会列在键盘下方，但目前还可以。

我在我的主站点和移动站点上都使用了相同的代码片段。为了确定它是否是移动设备，我调用了一个我制作的函数：check_mobile()。

我在某处找到了自动选择代码，但不确定如何将格式应用于结果集。任何帮助表示赞赏。

html:

```
<div class="ui-widget">
    <p>To find a customer, enter the Customer name, all lower case and no spaces. For example, bwi or t&r</p>
    <label for="Customer">Customer Name: </label>
    <input id="Customer" placeholder="Search"/>
    <div class="ui-widget" id="results" style="width: 600px; font-weight: bold; border-bottom: black;">Search Results: </div>
    <div data-theme="b" id="custData"  data-collapsed="true" data-role="collapsible"></div><!--class="ui-widget-content"-->
</div> 
```

jquery自动选择功能：

```
init: function(){
    $('#results').hide();
    $( "#Customer" ).val('');
    $( "#Customer" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            delay: 500,
            source: function( request, add ) {
                $.getJSON( cust.url+"?funct=1" , {term: cust.extractLast( request.term )}, function(data) {  
                    //create array for response objects  
                    var suggestions = [];  
                    //process response
                   for(var i =1, ii=data[0];i<=ii;i++){
                        suggestions.push(data[i].ABAN8 + ':' + $.trim(data[i].ABDC));
                    }  
                    //pass array to callback  
                    add(suggestions);
                });
            },
            search: function() {
                // custom minLength
                $( "#custData" ).hide();
                $('#results').hide();
                var term = cust.extractLast( this.value );
                if ( term.length < 2 ) {
                    cust.clearReportData();
                    return false;
                }
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = cust.split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                cust.getfulldetail(ui.item.value);
                return false;
            }
        })
        .focus();
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:02:08.757

JQM 有许多自动完成解决方案，您需要查看[JQM 自动完成](http://andymatthews.net/code/autocomplete/)或[这个实现](http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:26:18.480

这里的具体问题是您忘记将css文件添加到您的解决方案中，并且排序很重要，例如

```
 <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.9.2.custom.css" /> 
```

# iphone - 更换 Passbook 中的通行证是否需要新通行证与旧通行证不同？

> ID：13745933
> 
> 赞同：0
> 
> 时间：2012-12-06T14:40:17.920
> 
> 标签：iphone, ios, ios6, passbook

我正在尝试通过调用`-replacePassWithPass:`并传递与`PKPassLibrary`. 方法返回`NO`（替换失败） - 为什么？（顺便说一句：我设备上的控制台不显示来自 iOS 的任何日志）

在这种情况下，文档`-replacePassWithPass:`不是很有帮助：

> 如果库中不存在具有匹配标识符和序列号的通行证，或者该进程无权访问该通行证，则此操作将失败。

和：

> 如果成功更换通行证，则为 YES；否则否。

我满足这两个要求。

不能用这种方式更换通行证吗？我应该使用`-removePass:`而不是尝试添加它`PKAddPassesViewController`吗？

我的后端尚不支持更新通行证，因此我无法验证此处的所有可能性（即真正获得具有相同 typeID 和序列号但内容不同的更新通行证）。你有什么经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:56:49.243

只要 passTypeIdentifier**和**一个 pass 的序列号等于 passTypeIdentifier**和**另一个 pass 的序列号 - 它们就是同一个 pass 的实例。如果两次传递之间的一切都相同 - 它们是一次传递的一个实例。

如果您的 PKPassLibrary 中确实有通行证，则**-replacePassWithPass**在第一种情况下有效，**-removePass并在第二种情况下使用****PKAddPassesViewController**将其添加回来。

更新通行证始终是替代品。为了成功更换通行证，基本上必须满足三个要求：

1) 必须已将具有相同 passTypeIdentifier 和 serialNumber 的 pass 添加到您的 PKPassLibrary；

2) pass 的新实例必须与旧 pass 至少有一个差异（除了 passTypeIndentifier 和 serialNumber 必须保持相同）；

3) 您的应用程序必须有权使用此 passTypeIdentifier 进行通行证。

# wpf - 通过避免“Microsoft .Jet.OLEDB.4.0”读取 C# 中的 excel 文件

> ID：13745937
> 
> 赞同：1
> 
> 时间：2012-12-06T14:40:33.723
> 
> 标签：wpf, jet

我一直在使用该方法将 excel 数据导入我的 WPF 应用程序，如中所述

[使用 C# 将 Excel 文件导入 Microsoft SQL Server](https://stackoverflow.com/questions/10750803/import-excel-file-into-microsoft-sql-server-using-c-sharp) 并 [从 C# 读取 Excel 文件](https://stackoverflow.com/questions/15828/reading-excel-files-from-c-sharp)

它在调试模式下工作得很好，但在发布模式下它死了！

问题是我的客户已经转移到基于 x64 的机器上，并且应用程序工作正常，但是这段代码不能在 x64 上工作，只是因为没有更多可用于 x64 机器的“Microsoft .Jet.OLEDB.4.0”驱动程序更多的。

我不想使用办公室互操作或为用户提供任何依赖项以在机器上安装办公室。

那么有什么建议可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:59:39.777

尝试改用`Microsoft.Ace.OLEDB.12.0`驱动程序

当我们开始升级所有机器时，我使用的所有查询都`Microsoft.Jet.OLEDB.4.0`停止工作，我必须升级它们才能使用`Microsoft.Ace.OLEDB.12.0`. 除了更改连接字符串以使其正常工作之外，您不需要做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:05:23.103

您也可以尝试使用[OpenXML SDK 2.0](http://www.microsoft.com/en-us/download/details.aspx?id=5124)！

这是一篇解释使用 SDK 读取 excel 文件的文章：http: [//debugmode.net/2011/10/08/reading-excel-file-in-a-collection-using-open-xml-sdk-2-0 /](http://debugmode.net/2011/10/08/reading-excel-file-in-a-collection-using-open-xml-sdk-2-0/)

入门和最佳实践：http: [//blogs.msdn.com/b/erikaehrli/archive/2009/05/14/open-xml-format-sdk-2-0-getting-started-best-practices.aspx](http://blogs.msdn.com/b/erikaehrli/archive/2009/05/14/open-xml-format-sdk-2-0-getting-started-best-practices.aspx)

希望这可以帮助！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:08:08.857

我正在使用 Aspose.cells 库。它工作得很好，而且很容易工作。你可以试一试！ [http://www.aspose.com/.net/excel-component.aspx](http://www.aspose.com/.net/excel-component.aspx)

# windows-phone-7 - 对图像应用颜色调整

> ID：13745938
> 
> 赞同：0
> 
> 时间：2012-12-06T14:40:38.380
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-8

如何将颜色调整应用于 Windows Phone 中的图像。是否有任何支持颜色调整的免费 sdk 可用。在我的应用程序中，我需要根据他从颜色颗粒中选择的颜色为图像应用颜色阴影。谁能帮我在 Windows Phone 中实现这样的功能。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T20:48:41.003

在图像上放置一个矩形并将其不透明度设置为 60%。（这部分使用 Expression Blend 会更容易）。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Image Margin="188,208,168,299" Source="wifi-signal.jpg"/>
        <Rectangle Name="Rect1" Fill="Blue" Margin="188,208,167,299" Stroke="Black" Opacity="0.595"/>

    </Grid> 
```

在代码视图中，您可以触发一个事件，以使用以下代码更改 Rectangle 的颜色：

```
Rect1.Fill = new SolidColorBrush(Colors.Red); 
```

# css - 在 IE7 中覆盖

> ID：13745939
> 
> 赞同：0
> 
> 时间：2012-12-06T14:40:40.273
> 
> 标签：css, internet-explorer-7

Client.css 托管在另一台服务器上。

```
td { background: none transparent scroll repeat 0% 0%; } 
```

我可以为 IE7 覆盖它吗？

我正在尝试删除此元素的背景属性。背景迫使 IE7 中的所有内容在元素上不可见`<tr>`，`<td>`因为我认为它在 IE7 中不允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:45:28.457

仅适用于 IE7

```
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="/client.css" />
<![endif]--> 
```

对于 IE 7 及更低版本

```
<!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="/client.css" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:45:52.063

当然。您可以使用`!important`规则和条件样式表：

在您的`<head>`中，添加：

```
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]--> 
```

然后在里面`ie7.css`，简单地创建以下 CSS 规则：

```
td { background: #fff !important; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:12:21.253

在我的样式表中，我可以覆盖特定的客户端样式，定义特定的类，然后定义将覆盖客户端样式的 td。

```
<link type="text/css" rel="stylesheet" href="http://domain.com/client.css"/>
<link type="text/css" rel="stylesheet" href="mystyles.css"/> 
```

在我的链接样式表中

```
.class > td { background: #fff; } 
```

# java - JAXB 相关异常

> ID：13745943
> 
> 赞同：0
> 
> 时间：2012-12-06T14:41:02.410
> 
> 标签：java, web-services, jaxb, classcastexception

当我尝试连接到在本地计算机上运行的 Web 服务时，出现以下异常：

```
java.lang.ExceptionInInitializerError
    at com.sun.xml.internal.ws.server.sei.EndpointMethodHandler.invoke(EndpointMethodHandler.java:254)
    at com.sun.xml.internal.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:82)
    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:587)
    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:546)
    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:531)
    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:428)
    at com.sun.xml.internal.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:232)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:460)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:233)
    at com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handleExchange(WSHttpHandler.java:95)
    at com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handle(WSHttpHandler.java:80)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
    at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:65)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:68)
    at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:557)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
    at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:529)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassCastException: com.sun.xml.bind.v2.runtime.JAXBContextImpl cannot be cast to com.sun.xml.internal.bind.api.JAXBRIContext
    at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.<clinit>(SOAPFaultBuilder.java:533)
    ... 20 more 
```

我读过的所有信息都表明这是由不同版本的 JAXB 之间的冲突引起的。但是，对我来说似乎并非如此。在 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext 文件夹中，我有 jaxb-api.jar 和 jaxb-impl.jar。似乎这些中的任何一个都不会出现不止一次。在项目中的“引用库”下，似乎没有任何其他 JAXB 内容。

我错过了什么？

**编辑：**这是引用库的列表：

![在此处输入图像描述](../Images/671ebb1a9348d34ed81c96d5783b813b.png)

# jquery - 关闭先前打开的面板 jQuery

> ID：13745948
> 
> 赞同：0
> 
> 时间：2012-12-06T14:41:13.550
> 
> 标签：jquery, click, toggle, collapse

我想在单击按钮时显示内容，当显示另一个面板时，它需要关闭任何其他打开的面板，同时还允许您在再次单击时关闭当前面板，不显示任何内容。

除了打开面板的崩溃之外，这是我正在寻求帮助的工作。

有任何想法吗？

jQuery

```
 var propertyPanelExpanded;
 var expandPanel; 

 function ResultsToggle() {
    expandPanel.parent().next("div.AnswerFAQ").toggle(); 
 }

 $(document).ready(function () {
    $('.Expand').live('click', function () {
        $('.Expand').each(function(){
                if($(this).parent().next("div.AnswerFAQ").is(":visible")){
                    expandPanel = $(this)
                    ResultsToggle()
                }
        })
        expandPanel = $(this)
        ResultsToggle()    
    });    
});​ 
```

HTML

```
 <h3>
     Title 1         
     <span class="Expand">
     CLICK HERE
     </span></h3>
     <div class="AnswerFAQ" style="display:none;">
     <p>Content 1</p> 
 </div>

 <h3>
     Title 2         
     <span class="Expand">
         CLICK HERE
     </span></h3>
     <div class="AnswerFAQ" style="display:none;">
     <p>Content 2</p> 
 </div> 
```

继承人的jsfiddle：http: [//jsfiddle.net/huddds/HYB2r/2/](http://jsfiddle.net/huddds/HYB2r/2/)

提前感谢您的任何回复​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:56:59.803

我不太清楚你到底想要什么。单击两次时是否要关闭内容？请在[此处](http://jsfiddle.net/umeshpatil86/HYB2r/3/)检查工作代码。

我只是在那里添加了一行 jquery。

```
 $(this).parent().next("div.AnswerFAQ").toggle('display'); 
```

是你想要的吗？

# c# - C++ 非托管项目中的 C# 托管 COM dll - 奇怪的实体框架问题

> ID：13745951
> 
> 赞同：0
> 
> 时间：2012-12-06T14:41:19.510
> 
> 标签：c#, entity-framework, visual-c++, com, com-interop

我正在通过 COM 在 C++ 非托管解决方案中实现 C# 项目。C# 项目使用 EntityFramework 来返回有关数据库的值。

当我们在此解决方案中从 UnitTest C# 项目中调用“Test()”方法时，一切正常。当我们从非托管 C++ 调用它时，在调用的“Test()”方法中会发生异常。

例外：

```
No connection string named 'Entities' could be found in the application 
config file. 
```

我们在非托管 C++ 中调用“Test()”方法的位置：

```
AServer::Server_InterfacePtr p(__uuidof(AServer::Server));
long res = p->Test(); // gives 1337, WRONG: it should give the count of users 
```

C#项目中被调用的方法：

```
 public int Test()
    {
        TextWriterTraceListener myTextListener = new TextWriterTraceListener(@"C:\log.txt");
        Trace.Listeners.Add(myTextListener);
        try
        {
            Entities model = new Entities();
            ObjectResult<UserGetAll_Result> res = model.UserGetAll();
            return res.Count;
        }
        catch (Exception e)
        {
            Trace.WriteLine(e.Message); // writes out "No connection string named 'Entities' could be found in the application config file."
            return 1337;
        }
    } 
```

单元测试方法：

```
 [TestMethod]
    public void TestMethod1()
    {
        Server server = new Server();
        var res = server.Test(); // OK: gives the count of users
    } 
```

无论如何我们可以解决这个问题吗？我们曾考虑在“Test()”方法中将 ConnectionString 作为参数提供给模型的构造函数，但显然`Entities`不接受 ConnectionString 作为其构造函数中的参数。

连接字符串已在`App.Config`. AntiityFramework使用的版本是5，解决方案针对frameworkversion 4.0。

不使用 EntityFramework 的方法工作得很好。

# extjs - ExtJS 3.4 复选框组未设置值

> ID：13745953
> 
> 赞同：0
> 
> 时间：2012-12-06T14:41:22.020
> 
> 标签：extjs, extjs3

我得到检查数据字符串：“box0,box15,box30,box45”

Sencha docs 说，我可以这样设置值（复选框 id 和 name 与上面相同）

```
// use comma separated string to set items with name to true (checked)
myCheckboxGroup.setValue('cb-col-1,cb-col-3'); 
```

我想以这种方式设置我的盒子，但不能。你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:42:52.983

我不在工作，所以我无法检查我的消息来源，但我记得应该是

```
cb-col-1 = Ext.getCmp(cb-col-1)
cb-col-3 = Ext.getCmp(cb-col-3)

myCheckboxGroup.setValue(cb-col-1 true);
myCheckboxGroup.setValue(cb-col-3, true); 
```

如果它是一个组件，并且

```
Ext.get('cb-col-1').dom.value = true;
Ext.get('cb-col-3').dom.value = true; 
```

如果它是一个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T13:38:11.147

`setValue`与 a 一起使用时，`checkboxgroup`您需要传递复选框字段名称：

```
Ext.create('Ext.form.CheckboxGroup', {
    id: 'MyGroup',
    items: [{
        xtype:'checkbox',
        name: 'check1'
    },{
        xtype: 'checkbox',
        name: 'check2'
    },{
        xtype: 'checkbox',
        name: 'checkset',
        inputValue: 'val1'
    },{
        xtype: 'checkbox',
        name: 'checkset',
        inputValue: 'val2'
    }]
 });

 Ext.getCmp('MyGroup').setValue({
     check1: true,
     check2: false,
     checkset: ['val1', 'val2']
 }); 
```

字面意思是从[Sencha Docs中提取的](http://docs.sencha.com/extjs/4.1.0/#!/api/Ext.form.CheckboxGroup-method-setValue)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T09:03:44.587

这应该工作：

```
Ext.getCmp('MyCheckboxGroup').setValue({
     cbxName: true,
     cbxDescription: false
     //cbxDescription: (condition)  //you can always specify an condition here.
 }); 
```

注意： `cbxName`,`cbxDescription`是 下的复选框的 id `MyCheckboxGroup`，例如：

```
{
    xtype: 'checkboxgroup',
    fieldLabel: 'MyCheckboxGroup',
    name: 'mycbxgrp',
    columns: 2,
    items: [
        { id: 'cbxName', boxLabel: 'Name', name: 'mycbxgrp', inputValue: 1 },
        { id: 'cbxDescription', boxLabel: 'Description', name: 'mycbxgrp', inputValue: 2 }
    ]
} 
```

# google-fusion-tables - 为什么我的 Google 图表没有出现在 Fusion Tables 信息窗口中？

> ID：13745963
> 
> 赞同：0
> 
> 时间：2012-12-06T14:41:55.300
> 
> 标签：google-fusion-tables, google-visualization

我正在尝试使用 Google 的 Chart API 在信息窗口中显示图表。

[https://www.google.com/fusiontables/DataSource?classic=true&docid=1z614mo0DPw19PX00IFsW7g0S-yilCmUTQaKLjiw](https://www.google.com/fusiontables/DataSource?classic=true&docid=1z614mo0DPw19PX00IFsW7g0S-yilCmUTQaKLjiw)

我使用图表向导创建了以下 img：

![在 {Road} 发出的车票](../Images/3e86d90a10dbfb6f725726a8084b289b.png)

我想要做的是调整它，以便我可以传入参数，但它没有出现。

这是原始代码（出现在上面）：

```
<img src="//chart.googleapis.com/chart?chxl=1:|2008|2009|2010|2011&chxr=0,0,5000|1,-5,100&chxs=0,676767,10.5,0.333,lt,676767|1,676767,11.833,0.167,l,676767&chxt=y,x&chs=300x173&cht=lxy&chds=0,5000,0,5000&chd=t:-1|111,122,1685,4699&chdlp=b&chls=3&chma=|2,4&chtt=Tickets+issued+in+xxx&chts=676767,11.833" width="300" height="173" alt="Tickets issued in {Road}" /> 
```

这是我的努力，这是行不通的。

```
<img src="//chart.googleapis.com/chart?chxl=1:|2008|2009|2010|2011&chxr=0,0,5000|1,-5,100&chxs=0,676767,10.5,0.333,lt,676767|1,676767,11.833,0.167,l,676767&chxt=y,x&chs=300x173&cht=lxy&chds=0,5000,0,5000&chd=t:|{2008},{2009},{2010},{2011}&chdlp=b&chls=3&chma=|2,4&chtt=Tickets+issued+in+{Road}&chts=676767,11.833" width="300" height="173" alt="Tickets issued in {Road}" /> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:13:20.723

它不起作用的原因是因为在 img src 位的开头没有“http:”。

# git - 如何将 2 签名添加到我的 git 补丁中？

> ID：13745964
> 
> 赞同：1
> 
> 时间：2012-12-06T14:41:56.590
> 
> 标签：git

我想用命令生成一个 git 补丁

```
git format-patch master -s 
```

但是上面的命令会生成带有我的电子邮件（已经定义）作为签名的补丁。我想生成带有 2 封电子邮件的补丁，如下所示：

```
Signed-off-by: firstname1 lastname1 <person1@email1.com>
Signed-off-by: firstname2 lastname2 <person2@email1.com> 
```

注意：我想通过命令行自动添加，而不是手动添加到补丁文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:44:34.487

更改提交者身份

```
GIT_COMMITTER_NAME="John Doe" GIT_COMMITTER_EMAIL=john.doe@skynet.com git format-patch master -s 
```

这将产生（在每个补丁中）

```
Signed-off-by: John Doe <john.doe@skynet.com> 
```

要添加额外的“签名人”，恐怕您必须使用外部即

```
sed -i '/Signed-off-by/ a\
Signed-off-by: Jane Doe <jane.doe@skynet.com>' *.patch 
```

这将产生（在每个补丁中）

```
Signed-off-by: John Doe <john.doe@skynet.com>
Signed-off-by: Jane Doe <jane.doe@skynet.com> 
```

# flash - 命名电子学习模块的最佳方式是什么？

> ID：13745973
> 
> 赞同：2
> 
> 时间：2012-12-06T14:42:10.870
> 
> 标签：flash, actionscript, actionscript-2

我正在创建一个电子学习模板，我正在努力研究如何制作模块并以最有效的方式命名它们。我的想法是在每个课程模块中调用一个外壳——该模块是一个包含课程和页面场景的 FLA。通常，课程设置为具有以下深度：

*   **模块 1**
    *   第 1 课
        *   第 1 页
        *   第2页
        *   第 3 页
    *   第 2 课
        *   第 1 页
        *   第2页
*   **模块 2**
    *   第 1 课
        *   第 1 页
        *   第2页
        *   第 3 页
    *   第 2 课
        *   第 1 页
        *   第2页

现在我的想法是像这样命名文件`1_2_3.swf`。`1`将指示模块 1，`2`将指示第 2 课，并`3`指示第 3 页。这似乎是最好的方法，但我想从有创建电子学习模板经验的人那里获得一些反馈，看看是否会出现问题道路或更有效的方法来做到这一点。

如果有帮助，这是我的文件夹/文件结构：

![文件夹](../Images/7793643cfc45f642fd4701e3a5cf451f.png) ![在此处输入图像描述](../Images/6296369385374f791dc88925281141ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T11:12:37.453

你的系统可以工作，但它有几个问题：

*   您的文件可能会被排序为 1_1、1_10、1_11、1_2、1_3、1_4 等等。大多数现代文件浏览器可以“以人性化的方式”对此类文件进行排序，即使用完整编号，而不仅仅是按字符，因此不太可能成为*真正的*问题。
*   在某些时候，您需要在现有页面和/或章节之间添加页面。您将如何在 2_2_5 和 2_2_6 之间添加两个新闻页面？
*   如前所述，您的名字没有任何内容 - 添加类似 3_1_1_intro、3_2_1quiz 的内容。
*   同样，您最终将使用大量模板，因为大多数电子学习页面彼此相似。你打算只克隆 FLA 文件吗？如果您需要更改每种颜色的单一颜色怎么办？你会打开并重新发布 20 个克隆的 FLA 吗？

您选择了一种原始但非常耗时的开发方式。我建议您考虑使用播放器外壳、页面模板和 XML 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T20:36:27.993

我已经使用电子学习模块超过 10 年了。我们采用了严格的文件命名约定，起初由于开销而有点难以采用，但最终确实简化了我们的生活。我们为每个模块分配 9 位零件编号，前 n 个字符确定一个类别（如果适用于您）。我们有另一个故事板类别和另一个资产类别。接下来的 n 位数字是每个模块的实际 ID，最后一对用于模块的变体（即不同语言或不同平台的相同模块）。我们像您一样将模块文件放在专用的模块文件夹中。文件夹名称包含部件号，后跟修订字母或编号，然后是简短说明。文件夹内的文件仅使用零件号和转速。

我们还在日志/电子表格中跟踪所有零件编号。这使得事情更容易跟踪谁制作了什么模块，什么版本是最新的。我强烈推荐它，特别是如果您将重用模块（即 SCORM）并创建多个版本的模块。

对于您的特定示例，当需要发布课程/外壳时，我不会使用文件夹名称中的说明，以便将来通过更改路径中的 Rev 字母/数字来更轻松地更新外壳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T05:31:05.930

技术的进步不仅彻底改变了企业的运作方式，而且还极大地影响了教育部门。

此外，eLearning 正在慢慢取代传统的课堂和教学方式。这是因为大多数人正在慢慢发现这种学习模式的好处。

虽然最明显的是成本节约和灵活性，但在本指南中，我们定义了什么是电子学习及其对导师和学习者的好处。

更多信息 - [http://tutorroom.net/e-learning/what-is-e-learning/](http://tutorroom.net/e-learning/what-is-e-learning/)

# sql - Azure 数据同步和触发器

> ID：13745976
> 
> 赞同：0
> 
> 时间：2012-12-06T14:42:12.910
> 
> 标签：sql, azure, triggers, azure-data-sync

我使用 SQL Azure Data Sync 将远程 Azure 数据库与本地 SQL 数据库同步。Data Sync 确实在客户端和服务器上创建了一些额外的表，并且还在现有表中添加了删除、插入和更新触发器。

这些触发器是为了什么？我可以删除它们吗？我不这么认为？

现在的问题是我无法在服务器上编辑数据。

我得到错误

```
The target table 'dbo.Corporation' of the DML statement cannot have any 
enabled triggers if the statement contains an OUTPUT clause without INTO clause. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:02:16.637

触发器由[Microsoft Sync Framework](http://msdn.microsoft.com/en-us/library/bb726002.aspx)添加，用于 SQL Azure 数据同步。而且，是的，您不能删除它们，因为 SQL Azure 数据同步将停止工作。在配置表之后修改表并不容易。如果您要添加列，请查看[此问题](https://stackoverflow.com/questions/12285307/sync-framework-and-add-columns)。如果是其他问题，请尝试搜索标记为 Microsoft 同步框架而不是 SQL Azure 的项目的解决方案。

# http - 如何使用 Java EE 的 Restlet api 从 ServerResource 发送 HTTP Get 请求？

> ID：13745977
> 
> 赞同：1
> 
> 时间：2012-12-06T14:42:13.753
> 
> 标签：http, jakarta-ee, restlet

我是 Restlet api 的新手。到目前为止，我已成功将 HTTP Post 请求从 android 设备发送到 tomcat 服务器，并将服务器的响应发送到设备。现在，我正在尝试将 HTTP GET 请求从 Tomcat 服务器发送到另一个 HTTP 服务器。这是我在 CustomServerResource 类中的代码：

```
ClientResource clientResource = new ClientResource(httpGetUrl);
Representation representation = clientResource.get(); 
```

我在控制台中收到以下错误：

```
Dec 6, 2012 7:31:09 PM org.restlet.engine.component.ClientRouter getNext
WARNING: The protocol used by this request is not declared in the list of client     connectors. (HTTP/1.1)
Not Found (404) - The server has not found anything matching the request URI
at org.restlet.resource.ClientResource.handle(ClientResource.java:870)
at org.restlet.resource.ClientResource.handle(ClientResource.java:769)
at org.restlet.resource.ClientResource.get(ClientResource.java:502)
at com.org.restlet.network.ServerConnection.sendGetRequest(ServerConnection.java:58)
at com.org.restlet.resources.SmsAccessCodeResource.sendAccessCode(SmsAccessCodeResource.java:36)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.restlet.resource.ServerResource.doHandle(ServerResource.java:449)
at org.restlet.resource.ServerResource.post(ServerResource.java:1114)
at org.restlet.resource.ServerResource.doHandle(ServerResource.java:533)
at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:590)
at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:302)
at org.restlet.resource.ServerResource.handle(ServerResource.java:849)
at org.restlet.resource.Finder.handle(Finder.java:513)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Router.doHandle(Router.java:500)
at org.restlet.routing.Router.handle(Router.java:740)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:155)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.engine.ChainHelper.handle(ChainHelper.java:114)
at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75)
at org.restlet.Application.handle(Application.java:391)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Router.doHandle(Router.java:500)
at org.restlet.routing.Router.handle(Router.java:740)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.routing.Router.doHandle(Router.java:500)
at org.restlet.routing.Router.handle(Router.java:740)
at org.restlet.routing.Filter.doHandle(Filter.java:159)
at org.restlet.routing.Filter.handle(Filter.java:206)
at org.restlet.engine.ChainHelper.handle(ChainHelper.java:114)
at org.restlet.Component.handle(Component.java:391)
at org.restlet.Server.handle(Server.java:491)
at org.restlet.engine.ServerHelper.handle(ServerHelper.java:74)
at org.restlet.engine.http.HttpServerHelper.handle(HttpServerHelper.java:153)
at org.restlet.ext.servlet.ServerServlet.service(ServerServlet.java:1031)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:08:56.887

知道了。这是我在 CustomServerResource 中使用的代码

```
Client client = new Client(new Context(), Protocol.HTTP);
ClientResource clientResource = new ClientResource(httpGetUrl.toString());
clientResource.setNext(client);
clientResource.get(); 
```

# google-chrome - VideoJS 不会在 Chrome 中加载视频

> ID：13745978
> 
> 赞同：1
> 
> 时间：2012-12-06T14:42:17.450
> 
> 标签：google-chrome, video, video-streaming, html5-video

我正在开发的系统是这样设置的：

文件（在 DB 中）<-> ContentServer <-> 网页

假设我有一个视频链接，有人单击该链接，内容服务器找到请求的文件，生成一个 Guid 来表示该文件，然后构建一个使用 Guid 作为“文件”的页面。本指南没有文件扩展名（自然）。

在 IE 和 Firefox 中使用 VideoJS 时，这似乎工作得很好。但是在 Chrome 中它根本不起作用。视频似乎没有加载，更不用说加载和播放了。下面是我如何设置它的示例。任何人都知道如何在 Chrome 上完成这项工作？

```
<html>
  <head>
    <link href="/Video/video-js.css" rel="stylesheet" type="text/css">
    <script src="/Video/video.js"></script>
  </head>
  <body> 
    <video id="video" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264">
      <source type="video/mp4" src="/content/7cb55f87-b240-45e0-9890-ec383fd019c9"/>
    </video>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:24:00.330

看来问题在于 Apple 产品和 Google Chrome 不能很好地与 ASP.Net 配合使用。Chrome 和 Apple 产品首先发送前两个字节内容的请求。如果他们没有收到这两个字节 - 他们会失败。ASP.Net 不具备处理字节范围请求的能力，无论它所在的服务器是否可以。因此，如果您正在使用 ASP.Net 并且您打算使用视频，您应该考虑这样一个事实，即您将不得不推出自己的字节范围请求处理程序，或者使用为数不多的第三方扩展之一。

# windows-phone-7 - WP7 应用程序上的 WP8 更新

> ID：13745981
> 
> 赞同：0
> 
> 时间：2012-12-06T14:42:37.257
> 
> 标签：windows-phone-7, windows-phone-8

自 Windows Phone 8 发布（在某些情况下是之前）发布以来，市场上的几个 WP7 应用程序都有更新，只是简单地声明“为 Windows Phone 8 更新”。

这到底是什么意思？因为市场允许多个 XAP 上传，它是 WP8 的新 XAP 但应用程序只允许单个描述（因此“为 WP8 更新”）？如果是这样，即使 WP7 XAP 没有改变，市场是否会推送 WP7 的更新？

或者，针对 WP8 上的 WP7 应用程序优化的 7.1.1 SDK 是否有更改？如果是这样，您能否提供一个概述此内容的链接？（我进行了搜索，但我只能找到 7.1.1 更新目标 256MB 设备。）

底线，虽然我知道 WP7 应用程序在 WP8 上兼容，但在 WP7 上仍然可以使用我的 WP7 应用程序时，我应该对 WP7 应用程序做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:08:26.587

看看这个，似乎是目前正在处理的一个问题。

[http://social.msdn.microsoft.com/Forums/en-US/wpsubmit/thread/789b3017-d242-4151-9d0b-84c85c4b3c24](http://social.msdn.microsoft.com/Forums/en-US/wpsubmit/thread/789b3017-d242-4151-9d0b-84c85c4b3c24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:48:09.767

这些“已针对 Windows Phone 8 更新”标签并不一定意味着该应用程序已升级为 Windows Phone 8 应用程序。这也可能意味着开发人员已经测试并修复了可能破坏 Windows Phone 8 中 Windows Phone 7 应用程序功能的错误。例如，我在 Windows Phone 8 上运行时发现了两个涉及 Windows Phone 7 项目中本地存储的错误。因此，我必须做一些调整才能让我的项目在 Windows Phone 8 上 100% 运行（但它仍然是一个 WP7.1 项目）。有关在 Windows Phone 8 上运行 WP7.1 项目时的错误和“怪癖”的更多信息，这里是 Microsoft 信息的链接。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx)

# matlab - 使用 Matlab / Octave 绘制字符模式（shell）图？

> ID：13745987
> 
> 赞同：8
> 
> 时间：2012-12-06T14:42:51.630
> 
> 标签：matlab, shell, plot, octave, ascii-art

这可能是一个有点奇怪的问题，但无论如何。有时，我在整个地方（大陆）的服务器或实验室计算机中使用 ssh 以检查内容，有时甚至运行 Matlab 或 Octave 以查看最新数据等。然后，当我需要任何类型的绘图时，乐趣开始。要么我通过互联网将一大块可能的垃圾复制到我的电脑上，然后在本地生成情节。或者，如果之前的尝试没有选择，我通过 ssh 和 X-forwarding 运行 Matlab，考虑到低带宽和/或高 ping，这只是痛苦的。

实际上，我想知道是否有一种方法可以在 shell 中生成类似 1980 年代的老式字符模式图，至少是带有线条或点的简单东西（没有 X 转发）。拥有一个“丑陋”（但很酷？）的角色模式情节至少可以让我确定我是在看一条线、一条抛物线还是只是简单的废话——这非常有帮助。我知道，有些东西可以通过聪明的数学来确定，但是，嘿，抽象思维被高估了。

编辑...另一个相关的 (?) 标签。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T16:22:40.280

在 Octave 的情况下，你应该没有问题。我通常通过 ssh 在远程机器上进行计算，并且一直使用它。

只要您将 gnuplot 作为您的图形工具包（供将来参考，从 3.6.2 开始，这仍然是默认设置，但将来可能会更改为 fltk），如果没有 X 显示，您将获得 ASCII 绘图。

![带标签的 cos 和 sin 函数的 ASCII 图](../Images/b5d6ca0d539547280fa51660fe40681a.png)

为确保您拥有正确的图形工具包，只需`graphics_toolkit`在提示符处键入即可。要将其更改为 gnuplot 使用`graphics_toolkit gnuplot`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T15:08:15.560

该`plot`命令（和朋友）使用 Java 图形库，这在纯文本模式下显然不起作用。AFAIK，没有办法绕过这些底层库调用并将任何图形输出重定向到一些 ASCII 艺术翻译器/生成器。

您可能想尝试[此处](https://stackoverflow.com/questions/1853259/save-matlab-invisible-plot-under-terminal-as-an-image-with-same-size)建议的类似操作：

```
h = figure('visible', 'off');
plot(h, ...)            
saveas(gcf, 'file.fig') 
```

然后`scp/rsync`结束`file.fig`（这有点像 X-forwarding 真的......）。

您当然可以编写一个生成绘图的函数，将其存储到临时文件（如上），然后将该 PNG/JPG/... 通过[ASCII-art 生成器](http://www.fiz-ix.com/2012/01/making-html-color-ascii-art-with-matlab/)（或[这个](http://www.mathworks.nl/matlabcentral/fileexchange/11307-ascii-art-variation)）传递，其输出为显示在终端中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-25T22:15:27.287

*尽管这个问题有很多部分答案，但通过WSL 和 Cygwin*在 Windows 上对我有用的唯一方法如下。

1.  ### 作为交互式 CLI 会话：

```
# Start the Octave CLI session:
octave-cli.exe -iWq

graphics_toolkit ("gnuplot")
x = -2*pi:2*pi;
y = sin(x);
figure(1,'Visible','off');
plot(y)
print (1, "-ddumb", "dummy"); type -q dummy.txt 
```

生成：

```
 1 |-------------------------------------------------------------|
      |        + ***    +        +       +  ** *  +        +        |
      |        **   *                     **   *                    |
      |       *     *                    *      *                   |
      |       *      *                   *       *                  |
  0.5 |-+    *        *                 *        *                +-|
      |      *        *                 *         *                 |
      |     *          *               *           *                |
      |    *           *               *           *                |
      |    *            *              *            *               |
    0 |-+ *             *             *             *             +-|
      |                  *            *              *              |
      |                  *           *               *              |
      |                   *          *                *             |
      |                   *         *                 *             |
 -0.5 |-+                  *        *                  *        * +-|
      |                    *       *                    *      *    |
      |                     *      *                     *    *     |
      |                     ****  *                      *   *      |
      |        +        +       *+*      +        +       *+*       |
   -1 |-------------------------------------------------------------|
      0        2        4        6       8       10       12       14 
```

不幸的是，这仍然依赖于使用临时文件`dummy.txt`。但是糟糕的[Octave 文档](https://octave.org/doc/interpreter/Printing-and-Saving-Plots.html#Printing-and-Saving-Plots)没有提供任何明显的替代方案，也没有提供示例。在阅读难以理解的文档时，最好通过以下相关问题来解释和猜测：

*   [使用 Octave 脚本的字符模式（shell/ASCII）绘图](https://stackoverflow.com/questions/50881826/character-mode-shell-ascii-plots-with-octave-scripts)
*   [使用 Matlab / Octave 绘制字符模式（shell）图？](https://stackoverflow.com/questions/13745987/character-mode-shell-plots-with-matlab-octave)
*   [从命令行调用函数时绘制八度音阶](https://stackoverflow.com/questions/6843014/getting-octave-to-plot-when-invoking-a-function-from-the-command-line)
*   [命令行 Unix 基于 ASCII 的图表/绘图工具](https://stackoverflow.com/questions/123378/command-line-unix-ascii-based-charting-plotting-tool)
*   [在背景中以八度音阶打印绘图](https://stackoverflow.com/questions/6289807/print-plot-in-octave-in-background)

* * *

2.  ### 作为脚本 CLI 会话：

```
$ cat foo.m
#!/usr/bin/env octave

graphics_toolkit ("gnuplot")
setenv GNUTERM dumb
x = -2*pi:2*pi;
y = sin(x);
plot(y)
pause (2); 
```

然后运行：`octave-cli foo.m`。

3.  ### 作为一个单行：

```
octave-cli.exe --eval "graphics_toolkit gnuplot;setenv GNUTERM dumb; plot(sin(-2*pi:2*pi)); pause(2)" 
```

> **注意：`pause`获得任何输出都需要 ！**

* * *

如果您正在寻找 print 命令的其他选项（使用*gnuplot*时），请执行以下操作：

```
gnuplot -e "set term"
gnuplot -e "set terminal dumb; plot sin(x);" 
```

例如，在适当支持的 ANSI xterms 中，您可以将*Sixel*用于：

```
gnuplot -e "set terminal sixelgd; plot sin(x);" 
```

[![在此处输入图像描述](../Images/7b8e11de6f432d4c327a897526b73839.png)](https://i.stack.imgur.com/0nqNJ.png)

# jboss - JBoss7.1 final 2 个 IllegalAnnotationExceptions 计数

> ID：13745988
> 
> 赞同：1
> 
> 时间：2012-12-06T14:42:57.577
> 
> 标签：jboss, jaxb

我正在尝试将应用程序从 jboss 5.1 迁移到 7.1，并且出现类似此[错误消息](http://pastie.org/5488987)的错误，我不确定为什么会收到此消息。如果有人有任何想法，请帮助我。

更新：1

```
@Stateless
@Remote(PackageService.class)
@Interceptors(CrossContextSpringBeanAutowiringInterceptor.class)
@WebContext(contextRoot="/appname_web_services", urlPattern="/MaintenanceService", authMethod="", secureWSDLAccess=false)
@WebService(
   name="MaintenanceService",
   targetNamespace = "http://appname.com/web/services",
   serviceName = "MaintenanceService")
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.WRAPPED) 
@HandlerChain(file = "WebServiceHandlerChains.xml")
@TransactionTimeout(10800)
public class MaintenanceServiceBean implements MaintenanceService {

    private static final Logger logger =  Logger.getLogger( MaintenanceServiceBean.class );

    @Resource(mappedName="/ConnectionFactory")
    ConnectionFactory connectionFactory;

    @Resource(mappedName="topic/manager_system_topic")
    javax.jms.Destination systemTopic;

    @Autowired
    MaintenanceService MigrationService;

    @WebMethod
    public List<Long> getSoftDeletedPackageIds(Long performedBy) throws Exception {
        return MigrationService.getSoftDeletedPackageIds(null);
    } 
```

这是我认为失败的课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:52:41.513

您在 JAXB 映射中使用了一个接口，您没有向运行时提供足够的信息，因此它也无法绑定实际的实现。如果您的问题中没有包含更多代码，则很难推荐特定的解决方案，但通常您会使用 @XmlAnyElement 注释包含的接口。

您可以通读[这个有用的教程](http://jaxb.java.net/guide/Mapping_interfaces.html)，以确定适合您的情况的最佳解决方案。

# ios - 为什么我的 WebView 不加载新内容？

> ID：13745989
> 
> 赞同：2
> 
> 时间：2012-12-06T14:42:58.430
> 
> 标签：ios, url, webview, request

我有一个在我的 WebView 中加载内容的方法：

```
-(void)loadContent:(NSURLRequest *)requestObj{
    //Load the request in the UIWebView.
    [webView loadRequest:requestObj];
    webView.delegate = self;

    NSLog(@"LOAD WEBSITE!!!");  
} 
```

当我第一次这样称呼它时：

```
[self loadContent:requestObj]; 
```

它工作正常！但是当我再次为新 URL 调用它时，它不起作用。

我已经读到在加载新 URL 之前调用以下命令会有所帮助：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.open();document.close()"]; 
```

但这不会改变结果。有谁知道如何处理这个？请耐心等待，我是 iOS 世界的新手。

好的，我发现，我的 WebView 是 Null，但是为什么呢？我从 ViewController 调用它，它必须在那里。有人知道如何处理吗？

更新：它不再是 Null 因为我这样做了：

```
if(!webView)
{
    webView = [[UIWebView alloc]init];
} 
```

但是当我这样做时它不会改变内容：`[webView loadRequest:requestObj];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:46:34.083

尝试像 self reload.nameOfTheView 一样重新加载视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:13:09.720

您的 webview 是在 nib 中创建的吗？如果是这样，它可能没有连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T06:31:43.403

[http://sweng.epfl.ch/tutorials/getting-started-with-ios-developement-xcode-and-objective-c](http://sweng.epfl.ch/tutorials/getting-started-with-ios-developement-xcode-and-objective-c)

你可以通过上面的链接找到一步一步的过程

[http://www.raywenderlich.com/2712/using-properties-in-objective-c-tutorial](http://www.raywenderlich.com/2712/using-properties-in-objective-c-tutorial)

您可以从上面的链接下载示例代码。

# android - Android：活动 - 更改活动时图像可见性消失

> ID：13745990
> 
> 赞同：0
> 
> 时间：2012-12-06T14:42:59.387
> 
> 标签：android, android-activity

嗨，当我单击列表时，我有一个带有列表视图的活动，当登录成功时，它会进入登录活动，标题上会出现一个图标，（标题对所有活动都很常见），到目前为止，它的工作问题是在当我更改活动并返回相同的活动时出现图标我看不到图标，下面是我的代码

```
img = (ImageView) findViewById(R.id.red);
        Intent i = getIntent();
        Bundle b = i.getExtras();
        if (b != null) {
            boolean redonly = b.getBoolean("redonly");
            if (redOnly) {
                img.setVisibility(View.VISIBLE);
                Constants.isredonly=true;
            } else {
                img.setVisibility(View.GONE);
                Constants.isredonly=false;
            }
        } else {
            img.setVisibility(View.GONE);
        } 
```

以下是我的登录活动

```
public void onClick(View v) {

                String password = etPassword.getText().toString();
                 Intent myIntent = new Intent(loginActivity.this, myActivity.class);
                 myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                if (password.equals("1234")) {
                     myIntent.putExtra("redonly", true);
                } else {
                     myIntent.putExtra("redonly", false);
                }
                startActivity(myIntent);
                finish();
            } 
```

任何建议表示赞赏。