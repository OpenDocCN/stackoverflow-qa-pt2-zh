# StackOverflow 问答 15384000-15384999

# android - 重命名android应用程序签名密钥文件

> ID：15384000
> 
> 赞同：4
> 
> 时间：2013-03-13T11:27:44.730
> 
> 标签：android, keystore

我想重命名应用程序签名密钥。但我怀疑是否会对密钥文件签名产生任何影响。在我的情况下，应用程序已经上传到 Play 商店。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T08:54:22.207

您可以简单地重命名文件名。不会有问题的。我以前做过。

# xcode - 是否需要实施 In-App-Purchase 或者我可以简单地将付费版本添加为新应用程序？

> ID：15384003
> 
> 赞同：3
> 
> 时间：2013-03-13T11:27:54.587
> 
> 标签：xcode, app-store, in-app-purchase

我已经在 App Store 中有我的应用程序的免费版本。现在我想为同一个应用添加一个全新的付费版本（具有额外功能）。

是否需要实施 In-App-Purchase 或者我可以简单地将付费版本添加为新应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:30:33.220

您可以毫无问题地创建应用的付费版本。它将获得批准。所以这真的取决于你。但是使用应用内购买对用户来说更方便。他们将能够切换到应用程序的完整版本而不会丢失任何数据（例如游戏成就或使用免费应用程序创建的文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:30:59.687

如果您查看应用商店，您会看到这两个选项。有许多免费的“精简版”应用程序版本，以及您需要付费的完整版本。应用内购买也很常见，但它们需要更多的努力来开发。

# sql - 如何在 MS SQL 的联合查询中添加条件列？

> ID：15384004
> 
> 赞同：0
> 
> 时间：2013-03-13T11:27:54.757
> 
> 标签：sql, sql-server

在 MS SQL 中，有没有一种方法可以根据第一列的值将条件列添加到如下的联合查询中？

基本上我试图将 bin 值添加为第四列，如果部件值类似于 ('%XX') 或让它显示 0，到目前为止，我只能添加另一列反映 MAX(part_bins.bin)如果代码不符合，列。

```
SELECT part_bins.part AS part,
       SUM(part_bins.free_stock) AS FREE_STOCK,
       MAX(PART_BINS.BIN) AS Bin
FROM part_bins
LEFT OUTER JOIN part ON part_bins.part = part.part
WHERE (part_bins.free_stock > 0)
GROUP BY part_bins.part
UNION
SELECT part.master_part AS part,
       SUM(part_bins.free_stock) AS FREE_STOCK,
       MAX(PART_BINS.BIN) AS Bin
FROM part_bins
LEFT OUTER JOIN part ON part_bins.part = part.part
WHERE (part_bins.free_stock > 0)
GROUP BY part.master_part 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:44:49.447

您可以使用一条`CASE`语句，并且必须在两个查询中添加它才能添加第四列，例如；

```
--4th Column for both queries, if bin_value is a numeric type
case when part_value like '%XX' then bin_value 
       else 0 end as fourth_column

--4th Column for both queries, if bin_value is a string type
case when part_value like '%XX' then bin_value 
       else '0' end as fourth_column 
```

# c# - HTMLAgilityPack：C# 如何使用 CreateNode 添加带有标签的字符串

> ID：15384005
> 
> 赞同：1
> 
> 时间：2013-03-13T11:27:57.587
> 
> 标签：c#, html-agility-pack

我正在尝试使用可能包含 HTML 标签（简单标签、链接或
）的数据构建 HTML 输出。

如果我使用 CreateNode 将这样的字符串添加到我的 HTML 中，则会发生一些不需要的过滤。我怎样才能解决这个问题？

例子：

```
string myText = "<strong>Intro</strong><br />Some Explanation";
node.ParentNode.ReplaceChild(HtmlNode.CreateNode(myText, node); 
```

在我生成的 HTML 中，只输出了强文本，其余的都消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:39:04.113

你为什么不尝试使用**InnerHtml**？

```
string myText = "<strong>Intro</strong><br />Some Explanation";
node.ParentNode.InnerHtml = myText; 
```

# javascript - Hashchange 事件

> ID：15384008
> 
> 赞同：0
> 
> 时间：2013-03-13T11:27:59.273
> 
> 标签：javascript, jquery, hashchange

所以，我的 hashchange 有问题......它不会触发

```
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});

$(window).on('hashchange', function () {
    var values = window.location.hash.slice(1).split('/');
    $("[name=" + values[0] + "]").val(values[1]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:30:33.160

您`);`在第二个事件处理程序分配结束时缺少关闭。

```
$(window).on('hashchange', function () {
    '...';
}); //<= here you had only } 
```

除此之外，它[似乎工作正常](http://jsfiddle.net/w7Fnn/)。除非你用的是 IE7 当然不支持[`onhashchange`](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)（[浏览器支持](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange#Browser_compatibility)）。

# ruby - Ruby：在不触及堆栈跟踪的情况下为异常消息添加信息

> ID：15384009
> 
> 赞同：3
> 
> 时间：2013-03-13T11:27:59.647
> 
> 标签：ruby, exception-handling

我需要为块内发生的所有异常添加调试信息，但我不想弄乱回溯。`$!`在 1.9.3 中似乎不允许这样做；`raise`无论我尝试什么，都在替换回溯。

想法？

这是我最初使用的：

```
def self.load(filename, virtual_path = nil)
  t = Template.new(filename, virtual_path)
  t.is_page? ? Page.new(t) : t
rescue
  raise $!, "Error loading template '#{filename}'#{virtual_path ? " under virtual path '" + virtual_path  + "'" : ""}: #{$!}"
end 
```

到目前为止我发现的最好的是：

```
def self.load(filename, virtual_path = nil)
  t = Template.new(filename, virtual_path)
  t.is_page? ? Page.new(t) : t
rescue => e
    raise e, "Error loading template '#{filename}'#{virtual_path ? " under virtual path '" + virtual_path  + "'" : ""}: #{e.message} #{e.backtrace}"
end 
```

**这会将原始堆栈跟踪转储到消息中，但仍不会将旧堆栈跟踪保留为堆栈跟踪**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:07:27.870

如果您查看[Kernel#raise](http://ruby-doc.org/core-2.0/Kernel.html#method-i-raise)方法，它可以采用三个参数：

```
raise(exception [, string [, array]]) 
```

如果要保留回溯，则应指定`array`参数，即回调信息。

**例子：**

假设您最初拥有：

```
def some_method()
    raise('original message')
end

some_method
#=> scratch.rb:10:in `some_method': original message (RuntimeError)
#   from scratch.rb:16:in `<main>' 
```

您可以使用异常的第三个参数来引发具有更新消息和相同回溯的新异常：

```
def some_method()
    begin
        raise('error message')
    rescue
        raise $!, 'new message', $!.backtrace
    end
end

some_method
#=> scratch.rb:10:in `some_method': new message (RuntimeError)
#       from scratch.rb:16:in `<main>' 
```

如您所见，新异常与原始异常相同，只是更新了消息。

# ravendb - 按实体名称和最后修改日期搜索

> ID：15384010
> 
> 赞同：2
> 
> 时间：2013-03-13T11:28:03.510
> 
> 标签：ravendb

我在 RavenDb 中存储了许多命令，它们都实现了 ICommand。我希望能够搜索上次修改和 Raven-Entity-Name 的元数据。我目前正在对每个命令进行多重映射，如下所示：

```
public class CommandAuditSearch_Index : AbstractMultiMapIndexCreationTask<CommandAuditSearch_Index.Results>
    {
        public class Results
        {
            public string CommandType { get; set; }
            public DateTime LastModified { get; set; }
        }

        public CommandAuditSearch_Index()
        {
            AddMap<NewEmployeeStartCommand>(employees => employees.Select(x => new
            {
                CommandType = MetadataFor(x).Value<string>("Raven-Entity-Name"),
                LastModified = MetadataFor(x).Value<DateTime>("Last-Modified")
            }));

            AddMap<EmployeeLeaverCommand>(employees => employees.Select(x => new
            {
                CommandType = MetadataFor(x).Value<string>("Raven-Entity-Name"),
                LastModified = MetadataFor(x).Value<DateTime>("Last-Modified")
            }));

            Index(results => results.CommandType, FieldIndexing.Analyzed);
        }
    } 
```

我查询如下：

```
session.Query<CommandAuditSearch_Index.Results, CommandAuditSearch_Index>()
                              .Where(x => x.CommandType == commandType && x.LastModified >= DateTime.Today).OfType<ICommand>().ToList(); 
```

我知道 Raven 中已经内置了一个索引来获取标签（实体名称）和上次修改日期，但我似乎无法弄清楚如何获取结果，因为上面的索引给了我。

谁能给我指出一个静态索引的正确方向，我不必为我必须查询的每个命令都提供上面的多重映射，从而将结果作为 ICommands 列表提供给我？

谢谢

稻田

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T13:59:44.983

几点：

*   `Search`除非您打算使用查询方法进行全文搜索，否则您不需要将字段标记为已分析。如果您只是使用`Where`，则分析索引词没有任何优势。

*   如果您要在结果中查找元数据值，您只需从元数据中获取它们，而不是使用`GetMetadataFor`. [参考这里](http://ravendb.net/docs/client-api/advanced/document-metadata)。

*   正如你所说，已经有一个你需要的索引。查询它的最简单方法是使用`LuceneQuery`API。

    ```
    var tag = documentStore.Conventions.GetTypeTagName(theCommand.GetType());

    var results = session.Advanced
                         .LuceneQuery<ICommand, RavenDocumentsByEntityName>()
                         .WhereEquals("Tag", tag)
                         .AndAlso()
                         .WhereGreaterThanOrEqual("LastModified", DateTime.Today
                                                              .ToUniversalTime())
                         .ToList();

    foreach (var result in results)
    {
        var md = session.Advanced.GetMetadataFor(result);
        var entityName = md.Value<string>("Raven-Entity-Name");
        var lastModified = md.Value<DateTime>("Last-Modified");

        // you can see all the metadata if you like
        Debug.WriteLine(md.ToString(Formatting.Indented));
    } 
    ```

# javascript - jquery.mobile "tap" 触发 "focus" 事件

> ID：15384011
> 
> 赞同：3
> 
> 时间：2013-03-13T11:28:04.063
> 
> 标签：javascript, jquery, cordova, jquery-mobile, mobile

事件“点击”到 jquery.mobile 中存在问题。当“点击”该项目时，该项目被隐藏，它会在位于该项目下方的 INPUT 字段上触发事件“焦点”。我怎样才能使焦点事件不被触发？这是一个小示例代码。

```
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
  <style>
    .drop {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      z-index: 100;
      padding: 0 0 1px;
    }
    .drop .holder {
      overflow: hidden;
      padding: 10px 10px 3px;
      margin: 0 24px -2px;
      background: #1c365b;
    }
    a {font-size: 24px;}
  </style>
</head>
<body>
  <form action="#" id="form">
    <input type="text" name="input 1">
    <input type="text" name="input 2">
    <input type="text" name="input 3">
  </form>
  <div class="drop">
    <div class="holder">
      <a>Link 1</a><br>
      <a>Link 2</a><br>
      <a>Link 3</a><br>
    </div>
  </div>
  <div id="console"></div>
  <script>
    $(function () {
      var console = $('#console');
      $('.drop').find('a').unbind('tap').bind('tap', function (e) {
        console.append(' tap on drop menu');
        $('.drop').hide();
        return false;
      });
      $('#form').find('input').unbind('focus').bind('focus', function (e) {
        console.append(' focus on ' + $(e.target).attr('name'));
      });
    });
  </script>
</body> 
```

隐藏掉落后，您将获得：

```
<div id="console">tap on drop menu focus on input 2</div> 
```

stopImmediatePropagation() 方法没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:50:19.877

可能的解决方案是我需要在点击事件（提供 jquery）上替换点击事件（提供 jquery.mobile）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T11:34:47.947

我有完全相同的问题，我无法找到好的解决方案。

我想这是 Mobile Safari 的问题，但你是我发现的第一个和我有同样问题的人。

临时解决方案是：**禁用您认为隐藏在您将要单击的按钮下的所有字段。**

在 Sencha 中，它看起来像这样：

```
disableFields: function() {
    this.enableFieldsFunc(); //lets make sure all fields were switched back to default values
    this.disableAllFields();  //and then disable them
},
disableAllFields: function() {
    fields = Ext.ComponentQuery.query('field');
    for(var i = 0; i<fields.length; i++) {
        var field = fields[i];
        if(field.getComponent() && field.getComponent().input && field.getComponent().input.dom && field.getComponent().input.dom) {
            field.wasDisabledBefore = field.getComponent().input.dom.disabled;
            field.getComponent().input.dom.disabled = true;
        }
    }
},
enableFields: function() {
    Ext.create('Ext.util.DelayedTask', this.enableFieldsFunc, this).delay(100);
},
enableFieldsFunc: function() {
    fields = Ext.ComponentQuery.query('field');
    for(var i = 0; i<fields.length; i++) {
        var field = fields[i];
        var disabled = field.wasDisabledBefore;
        if(typeof disabled != 'undefined') {
            field.getComponent().input.dom.disabled = disabled;
        }
    }
} 
```

在**按下**和**释放**的事件中，我调用*disableFields*和*enableFields*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:35:05.930

在 JSFiddle 中使用您的确切代码我没有得到您遇到的问题。我已经在桌面浏览器和我的 S3 上的 chrome 浏览器中尝试过这个。

覆盖的 div 消失并触发点击事件，但焦点事件不会触发，直到您在覆盖消失后选择其中一个输入框。

[http://jsfiddle.net/U9bYR/](http://jsfiddle.net/U9bYR/)

我更改的唯一代码是删除事件代码中不必要的方法。

```
$(function () {
  var console = $('#console');
  $('.drop').bind('tap', function (e) {
    console.append(' tap on drop menu');
    $('.drop').hide();
    return false;
  });
$('#form').find("input").bind('focus', function (e) {
    console.append(' focus on ' + $(e.target).attr('name'));
  });
}); 
```

# android - 从名称中获取资源标识符

> ID：15384019
> 
> 赞同：5
> 
> 时间：2013-03-13T11:28:16.897
> 
> 标签：android

我正在开发一个应用程序，它从数据库中读取每个徽标的资源名称，然后尝试设置可绘制对象。

但是，`NumberFormatException`当我尝试获取徽标的整数标识符并且我的应用程序在应用程序开始时突然强制关闭时，我在我的 Logcat 中得到了一个。

我的代码如下：

```
String logo;
logo = c.getString(2);
button.setBackgroundResource(Integer.parseInt(logo)); 
```

`logo`保存在数据库中，例如：`R.drawable.logo`

您有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:36:17.823

如果 的值为`logo`( `"R.drawable.logo"`a `String`)，则无法解析为`int`. R.drawable.logo 实际上是对 中的`static int logo`变量的引用`static class drawable`，它是生成的资源类的子类`R`。`R`是一个生成的资源类，你可以在你的项目`gen`文件夹下找到它。

你必须自己解析它。如果您知道这是一个将返回的可绘制对象，则必须执行以下操作：

```
String logoParts [] = logo.split ("\\.");
int logoId = getResources ().getIdentifier (logoParts [logoParts.length - 1], "drawable", "com.example.app"); 
```

或者，您可以将其分成一个函数：

```
public static int parseResourceString (Stinrg resString, String package) {
    String resParts [] = resString.split ("\\.");
    return getResources ().getIdentifier (resParts [resParts.length - 1], resParts [resParts.length - 2], package);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:34:00.340

试试这个

```
String logo=c.getString(2); 
```

获取您的可绘制名称，不需要 R.drawable 因此通过拆分将它们删除。

```
logo=logo.split("\\.")[2]; 
```

第三个参数是你的包名

```
int drawableId = getResources().getIdentifier(logo, "drawable", "com.mypackage.myapp");

button.setBackgroundResource(drawableId); 
```

# svn - 持续集成工作流程和 SVN

> ID：15384022
> 
> 赞同：11
> 
> 时间：2013-03-13T11:28:24.933
> 
> 标签：svn, jenkins, continuous-integration

好的，这可能是一个很长的。

我正在尝试标准化和专业化我们在工作场所对我们的软件进行实时更新的设置。目前，一切都是手动的；所以我们有机会从头开始。

我已经安装了 jenkins，有可以使用的存储库，有一个工作模板（基于[http://jenkins-php.org](http://jenkins-php.org)）并牢记当前的工作流程：

*   主存储库，“主干”位于其自己的虚拟主机中的开发服务器上
*   每个开发人员都为特定的错误/增强/添加创建一个分支，并拥有自己的虚拟主机

1）第一个问题：在这个阶段，是否建议在开发人员提交到他的分支后运行 jenkins 作业/构建？这将运行单元测试和其他一些东西（根据上面链接的模板）

*   一旦开发人员分支经过测试、批准等 - 首席开发人员将该分支合并到主干

2）在这个阶段，我希望 jenkins 工作在合并完成后再次重新运行。这可能吗，正确的方法是什么？

*   一旦该合并过程经过测试和批准，我们就会进行部署（我猜这可以作为任务/目标添加到部署作业中，这会在上述步骤中通过所有测试时自动发生？）到实时站点。

3）我在某处读到人们也在现场检查了一个主干，并且部署任务只是执行 svn 更新而不是执行文件的 FTP 任务。再次，这是正确的方法吗？

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++
我也对詹金斯工作区有些困惑。我使用的模板设置为将 build/ 文件夹转储到工作区中。将 SVN 设置为选项，这似乎也将项目检出到工作区中。工作区的目的到底是什么，一旦它被填充，你会如何处理它？

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++
**更新：**

在部署到实时服务器时......似乎我有 3 个选项：

1) 在活动站点上有一个已检出的主干副本，.svn 文件和用 .htaccess 隐藏的目录，并在准备好后运行 svn 更新。这样做的好处是，速度快，可以回滚。缺点是，安全问题？

2）svn直接导出到live文件夹（在此过程中暂时关闭站点）或其他文件夹，并将apache vhost更改为新位置

3) 使用 rysnc 或类似工具？

哪个是更好的选择，还是我错过了更好的选择？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T12:46:02.413

通常，使用持续集成，所有开发人员完成的所有工作都在单个分支（或主干）上完成。事实上，Subversion 在设计时就考虑到了这种类型的工作流程。让每个人都在同一个分支上工作可能听起来很可怕。毕竟，*碰撞*呢？如果我想在下一个版本中包含一个错误/增强/添加，但不包含另一个，该怎么办？

我的经验是，强制所有开发都在一个分支上进行会更好。它迫使开发人员进行小的、谨慎的更改并相互合作。*处理问题*（错误修复和增强）的顺序必须在开发周期开始时完成，而不是在最后尝试选择它们。管理人员喜欢在最后挑选和选择的灵活性，但这意味着在发布前几天需要一个大规模的合并周期，这通常会导致匆忙的测试。

如果您决定使用私有分支，我建议您设置***两个***Jenkins 实例。第一个将是*官方*的。您构建了主干和发布分支，而不是开发者分支。这个 Jenkins 会做所有的单元测试。它将存储发布所需的工件。它将报告测试。这将是您的 QA 团队提取版本进行测试的地方。只有您可以在此 Jenkins 上设置作业。

另一个将用于开发人员。他们可以根据需要设置作业并对其进行测试。它将用于**他们的**分支——私有分支或错误修复分支。

回答您的第一个问题：我根本不会在私人分支机构上运行 Jenkins。私有分支曾经被称为*沙箱*，因为开发人员可以玩他们的。开玩笑的是，开发人员在他们的沙箱中所做的几乎就像小猫在沙箱中所做的那样。在私有分支上强制执行持续集成确实剥夺了该分支的目的。您真的只关心将代码交付到主干后。

这就是为什么我推荐两个 Jenkins 设置。第一个是给你的。每当发生提交/签入时，它将执行*构建。*第二个是为他们的私人分支的开发人员。他们会根据需要设置作业并在需要时执行构建。它的唯一目的是帮助开发人员确保一旦他们的代码交付到主干，一切都会正常工作。

这样做完全避免了问题 #2：您总是在代码交付到主干之后进行构建，因为那是提交完成的时间。

最后一个，代码如何放置在服务器上是一个谜。我喜欢 Jenkins 创建交付工件。您可以谈论通过 Jenkins 内部版本号发布的内容。

“*让我们在生产服务器上发布 build #25。* ”

“*等等，QA 从来没有测试过 build #25，但他们测试了 build #24。* ”

“*好吧，让我们发布 build #24，我发现它已经修复了 US232 问题。* ”

顺便说一句，我们使用*curl*或*wget*将软件从 Jenkins 中拉出并放到我们的服务器上。事实上，我们有一个`deploy.sh`我们使用的脚本。你`deploy.sh`从 Jenkins 中提取脚本，然后运行它。这会自动从 Jenkins 拉下正确的构建并安装它。它关闭服务器，备份旧安装，安装新软件，重新启动服务器，然后报告结果。

然而，Subversion 为您交付的想法是有一定意义的。使用了各种方法。*一种是 Subversion 在生产*分支的特定时间自动进行更新。您将代码放在*生产*分支上，每天凌晨 2:00，Subversion 将交付您的代码。这是一个好主意，我已经做到了——尤其是当您谈论不必编译的 PHP 时。

我更喜欢第一种方法，因为你有更多的控制权并迫使你只部署 Jenkins 构建。另外，通常有一些问题会导致部署的*svn update*方法失败（冲突、需要删除的未版本化文件等）。当然，这只会在最关键的时候发生。当然，在你的老板填写你的年度审查之前，这将是一个惊人的失败。

所以，回答你的第三个问题。我首选的方法是不涉及 Subversion。相反，我直接从 Jenkins 服务器*ftp*构建的工件（使用`wget`和`curl`），并运行一个真正的部署脚本来处理所需的一切。

顺便说一句，我们正在研究将与 Jenkins 集成的各种部署工具，例如[LiveRebel 。](http://zeroturnaround.com/software/liverebel/)这个想法是 Jenkins 将构建可交付包并将其部署到 LiveRebel，然后 IT 可以使用 LiveRebel 将其部署到我们的服务器。我们不确定每个 Jenkins 构建是否会部署到 LiveRebel，或者我们将使用*构建升级*插件让 QA 选择要部署到 LiveRebel 的构建。第二个将阻止我们部署未经 QA 认证的构建。

### 附录

> 感谢您的回复和洞察力。我查看每个任务分支的原因有很多：

我会回应你的每一个理由...

> 1) - 允许独立于主干线完成任务。

任务也可以彼此隔离完成。问题是生成的代码没有与这些任务隔离，并且这些任务可能彼此不兼容。

许多经理喜欢认为这种隔离将允许他们选择下一个版本中要包含的任务，并且他们将能够在发布时执行此操作。第一个真正的 CM 包之一是 AT&T 的 Sablime，它正是基于这一理念。

在 Sablime 中，您有一个*Generic*，这就是他们所说的发布。这是所有更改的基础。每个更改都分配有一个*修改请求*（MR 编号），所有工作都必须在 MR 上完成。

您可以通过采用旧的基线泛型、添加选定的 MR 和 tada 来创建下一个泛型！可以创建一个新的*Generic 。*听起来很简单：旧基线 + 选定的更改 = 新基线。

不幸的是，MR 会影响文件相同的文件。事实上，新泛型包含不是由实际开发人员编写的文件版本的情况并不少见。此外，一个 MR 最终依赖于另一个 MR。经理会声明 MR 1001、1003 和 1005 在下一个版本中。我们尝试将这些 MR 添加到基线中，我们发现 MR 1003 依赖于 MR 1002，而 MR 1002 也依赖于我们不想释放的 MR 1008。我们在接下来的一周里试图制定出一组可发布的 MR，并最终发布从未经过彻底测试的软件。

为了解决这个问题，我们最终在基线之间进行了较小的更改。我们每周都会做一个新的*Generic ，有时是两个。*这使我们能够确保合并有效，并确保在依赖于它们的 MR 之前首先包含依赖的 MR。但是，它也消除了整个*挑选和选择*的概念。剩下的就是 Sablime 内置的大量开销。

> 2）没有时间限制——每个任务都可以慢慢完成，并且不会影响其他任务。

任务总是会相互影响，除非它们是针对两个完全不同的软件包，这些软件包在两台完全不同的机器上运行，并具有两个独立的数据库。

所有任务都有时间限制，因为时间有成本，任务有收益。一项耗时长但收益甚微的任务是不值得做的。

开发的工作之一是确定这些任务的优先级：哪些应该先完成，哪些应该稍后完成。耗时过长的任务应分解为子任务。

在敏捷开发中，假设没有任何任务占用的资源超出*sprint*所能承受的范围。（*冲刺*是一个迷你版本，通常涵盖两周的时间。）在这两周的时间里，开发人员有一定数量的他们可以完成的*点*（点有点与时间有关，但不是真的。假设一个点代表这个思想实验的 X 小时工作量。）如果一个开发人员每周可以做 15 个点，那么需要 30 个点的任务对于 sprint 来说太大了，必须分成子任务。

> 3) - 发布和部署也可以在每个任务的基础上完成，而不是等待其他任务完成，然后在固定时间点进行多任务发布（我们试图摆脱这种情况)

我所说的都不意味着您不能进行基于任务的开发。使用 Git 的网站经常这样做。敏捷过程假设了这一点。这并不意味着您要回到瀑布方法，在这种方法中，在布置好每一个令人痛苦的细节之前，不允许任何人触摸键盘。但是，您不能简单地执行 50 个单独的任务，然后在发布前一天挑选您想要包含的任务。你不是发布任务，而是发布一个软件产品。

使用任务分支。但是，就您而言，任务在其更改位于主干之前是不*完整的。*开发人员对此负责。他们必须*变基*（将主干的更改合并到他们的分支中），测试他们的变基代码，然后*交付*（将他们的更改合并回主干），然后项目才能认为该任务完成。

这就是为什么我告诉你你可以有两个 Jenkins 实例：一个用于在主干和发布分支上的官方构建，另一个用于开发人员进行任务构建。开发人员可以通过他们的 Jenkins 和他们的分支以及他们的开发来享受世界上所有的乐趣。直到它在主干上并且你用你的 Jenkins 构建它才算数。

想想 Git 和 Linux 的工作原理。Linux 有一个官方的 Git 存储库。你从这个存储库中拉取并在你的机器上创建你自己的 Git 存储库。您可以与您的朋友共享此 Git 存储库。你可以随心所欲地做任何事。您可以从您的 Git 存储库创建另一个 Git 存储库，或者提取官方 Git 存储库的另一个副本，或者找到其他拥有 Linux 的 Git 存储库的人并从那里提取。

但是，在将这些更改推送回唯一的官方 Git 存储库之前，您所做的所有更改都不会被视为 Linux 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:56:43.467

我建议使用 Gerrit ( [https://code.google.com/p/gerrit/](https://code.google.com/p/gerrit/) )。这是一个基于 Git 的代码审查系统。它与 Jenkins ( [https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger) ) 很好地集成，因此它可以为每个提交的评论触发构建（即每个提交在主干中合并的提交由构建詹金斯）。首席开发人员在 UI 中批准提交，并将其合并到主干中。

我知道 Git 的学习曲线很陡峭，但我已经使用这个过程将近一年了，它确实改进了这个过程。

# bash - -bash：__git_ps1：找不到命令

> ID：15384025
> 
> 赞同：71
> 
> 时间：2013-03-13T11:28:28.370
> 
> 标签：bash, shell, command, git-bash, ruby-2.0

我尝试安装 Ruby 2.0。我的命令行 urped 现在如下所示：

```
-bash: __git_ps1: command not found
[11:58:28][whatever@whatever ~]$ 
```

我不知道如何摆脱 __git_ps1 command not found 错误。我搜索了我的 .bash_profile 和 .bashrc 以查看它是否正在尝试设置变量或其他内容，但没有看到任何内容。我唯一能找到提到的 git_ps1 的地方是 ~/.dotfiles/.bash_prompt。我完全替换了该文件的内容，注销并重新登录，它没有修复任何问题。

我看到了[这个](https://stackoverflow.com/questions/12870928/mac-bash-git-ps1-command-not-found)，但我对命令行很陌生，所以我只是让自己感到困惑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-13T22:59:33.060

运行以下命令：

```
$ curl -L https://raw.github.com/git/git/master/contrib/completion/git-prompt.sh > ~/.bash_git 
```

并将其添加到您的顶部`~/.bashrc`：

```
source ~/.bash_git 
```

重新登录到你的 shell，你应该已经设置好了。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-07-07T01:08:06.997

在您的系统中搜索 a `git-prompt.sh`，您需要`source`该`__git_ps1`功能才能使用该功能。在 Arch 中，它当前位于`/usr/share/git/completion/git-prompt.sh`. 添加

```
source /path/to/git-prompt.sh 
```

到一些合适的shell脚本。如果您不确定在哪里，请将其添加到您的`~/.bashrc`.

如果您已经`locate`安装，您可以使用它来查找`git-prompt.sh`文件，但您可能需要先`updatedb`以 root 身份运行。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-03-14T04:21:24.040

BASH 有很多方法可以自动设置提示符，以便为您提供很好的信息。您通过设置`PS1`环境变量来设置提示。例如，如果我设置`PS1="$ "`我的提示将如下所示：

```
$ 
```

信息量不大。我只能说命令行正在提示我。

但是，如果我设置`PS1=\u@\h: \w$`，我的提示现在将如下所示：

```
david@vegibank:/usr/bin$ 
```

这告诉我我是如何登录的 (the `\u`)、我所在的机器 ( `\h`) 以及我所在的目录 (the `\w`)。如果我使用`git`，如果我所在的 git 分支也是我的提示的一部分，那就太好了。

这正是您的`.profile`、您的`.bashrc`文件、您的`.bash_login`或您的`.bash_profile`脚本所发生的事情。或者，某些系统管理员在`/etc/profile`.

您可以做几件事。任何一个：

*   下载缺少的`__git_ps1`并确保它在您的`$PATH`环境变量中（由上述各种初始化文件的组合设置）
*   `PS1`在正在执行的任何初始化文件中更改您的环境变量（我相信它可能是`.bash_profile`.

只需将其添加为最后一行：

```
PS1="\u@\h:\w\n$ " 
```

添加`\n`的在下面的行上打印美元符号提示，如下所示：

```
david@vegibank:/usr/bin
$ 
```

我喜欢这样做，因为提示可能会变得相当长，并且当提示长于 30 到 50 个字符时，编辑命令行会变得很棘手。否则，这几乎是大多数用户使用的标准提示。[您可以在手册页](http://linux.die.net/man/1/bash)中看到有关设置 BASH 提示的更多信息。（在该页面上搜索“提示”一词）。

如果您觉得它有点混乱，请庆幸您没有使用 Kornshell。我使用 Kornshell 并获得相同的提示`PS1=\u@\h:\w\n$`，我将提示设置为：

```
export PS1='$(print -n "`logname`@`hostname`:";if [[ "${PWD#$HOME}" != "$PWD" ]] then; print -n "~${PWD#$HOME}"; else; print -n "$PWD";fi;print "\n$ ")' 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-03-21T06:25:21.093

引自`/usr/lib/git-core/git-sh-prompt`：

```
# This script allows you to see repository status in your prompt.
#
# To enable:
#
#    1) Copy this file to somewhere (e.g. ~/.git-prompt.sh).
#    2) Add the following line to your .bashrc/.zshrc:
#        source ~/.git-prompt.sh
#    3a) Change your PS1 to call __git_ps1 as
#        command-substitution:
#        Bash: PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ '
#        ZSH:  setopt PROMPT_SUBST ; PS1='[%n@%m %c$(__git_ps1 " (%s)")]\$ '
#        the optional argument will be used as format string.
#    3b) Alternatively, for a slightly faster prompt, __git_ps1 can
#        be used for PROMPT_COMMAND in Bash or for precmd() in Zsh
#        with two parameters, <pre> and <post>, which are strings
#        you would put in $PS1 before and after the status string
#        generated by the git-prompt machinery.  e.g.
#        Bash: PROMPT_COMMAND='__git_ps1 "\u@\h:\w" "\\\$ "'
#          will show username, at-sign, host, colon, cwd, then
#          various status string, followed by dollar and SP, as
#          your prompt.
#        ZSH:  precmd () { __git_ps1 "%n" ":%~$ " "|%s" }
#          will show username, pipe, then various status string,
#          followed by colon, cwd, dollar and SP, as your prompt.
#        Optionally, you can supply a third argument with a printf
#        format string to finetune the output of the branch status 
```

遵循这些步骤应该可以解决您的问题！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-03-09T21:20:24.793

截至 2019 年，安装包时应安装提示助手功能`git`，可在`/usr/lib/git-core/git-sh-prompt`.

如果未加载，请安装`bash-completion`包并查看您的`~/.bashrc`.

就我而言，我不得不取消注释：

```
if [ -f /etc/bash_completion ] && ! shopt -oq posix; then
    . /etc/bash_completion
fi 
```

并打开一个新的外壳，一切都很好。

根本原因是在全新安装时没有正确设置“bash-completion”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-27T20:12:45.690

我只是使用解决了它

```
sudo apt install git 
```

出现这种情况是因为未安装 git，因此未定义环境变量。

# c - 为什么在编译时没有捕获到“符号查找错误”？

> ID：15384027
> 
> 赞同：2
> 
> 时间：2013-03-13T11:28:37.043
> 
> 标签：c, gcc

我正在更新一些旧代码，并且不小心在里面留下了一个不再定义的宏：

```
// "DETAIL" is not defined anywhere
if (DETAIL ("notebook")) {
    // ...
} 
```

代码仍然可以编译和链接（它是一个 .so 库），但是当它被加载时，我得到：

```
gtk3-widget-factory: symbol lookup error: /usr/lib/gtk-3.0/3.0.0/
theming-engines/libmurrine.so: undefined symbol: DETAIL 
```

**为什么这在编译时没有被捕获？**我猜 C`DETAIL`没有任何定义就认为它是一个函数`int -> int`，对吧？有没有办法让编译器（gcc）更严格并在编译时抱怨？我不认为我在源文件或头文件中直接使用任何没有定义的符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:30:48.767

您的分析是正确的：`DETAIL`被视为隐式定义的函数。

从[`gcc`手册](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)：

> `-Wimplicit-function-declaration (C and Objective-C only)`
> 
> 在声明之前使用函数时发出警告。在 C99 模式（`-std=c99`或`-std=gnu99`）下，默认启用此警告，并通过`-pedantic-errors`. 此警告也由 启用`-Wall`。

此外，正如@Jonathan Leffler 在评论中指出的那样：

> 此外，在某些版本的 GCC 中，这是一个错误`-Werror=implicit-function-declaration`（对于任何其他显式警告选项也是如此）。所有警告都可以用`-Werror`.

# android - 使用 ksoap2 从 Android 访问 WebService

> ID：15384028
> 
> 赞同：1
> 
> 时间：2013-03-13T11:28:44.107
> 
> 标签：android, web-services, soap, ksoap2, android-ksoap2

搜索了一整天后，我仍然找不到解决问题的方法。

我有一个 WebService，它为我提供了以下[WSDL 文件](http://pastebin.com/Cv7wDpuS)，我将其上传到 pastebin，因为它真的很大。

首先，我想实现 ping 函数，您可以使用字符串值调用该函数并将字符串值返回给客户端。我认为相关部分是：

```
<wsdl:operation name="ping">
<wsdl:input message="tns:ping" name="ping"></wsdl:input>
<wsdl:output message="tns:pingResponse" name="pingResponse"></wsdl:output>
<wsdl:fault message="tns:ServerException" name="ServerException"></wsdl:fault>
<wsdl:fault message="tns:UserException" name="UserException"></wsdl:fault>
</wsdl:operation> 
```

和：

```
<xs:complexType name="ping">
<xs:sequence>
<xs:element minOccurs="0" name="in" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

无论如何，如果您可以查看实际的 wsdl 文件并告诉我这些是否真的是它的相关部分，那将是非常好的。

因此，要使用 Android 访问它，我使用的是 ksoap2。我的代码如下所示：

```
SoapObject request = new SoapObject("http://shared.bimserver.org/", "ping");
request.addProperty("in", "Hallo Welt");

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE httpTransport = new HttpTransportSE("http://10.0.0.5:8082/soap");
httpTransport.debug = true;
httpTransport.call("http://shared.bimserver.org/ping", envelope); 
```

这将创建以下请求：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header /><v:Body><ping xmlns="http://shared.bimserver.org/" id="o0" c:root="1"><in i:type="d:string">Hallo Welt</in></ping></v:Body></v:Envelope> 
```

但我得到了这样的回应：

```
<soap:Body><soap:Fault><faultcode>soap:Client</faultcode><faultstring>Unmarshalling Error: unexpected element (uri:"http://shared.bimserver.org/", local:"in"). Expected elements are &lt;{}in> </faultstring></soap:Fault></soap:Body> 
```

所以我希望参数“in”不能有命名空间。我尝试了不同的方法，例如：

```
PropertyInfo info = new PropertyInfo();
info.setName("in");
info.setNamespace("");
info.setValue("Hallo Welt");
request.addProperty(info); 
```

但这并没有改变请求或响应。

我还从肥皂对象中删除了命名空间：

```
SoapObject request = new SoapObject("", "ping"); 
```

这给了我以下要求：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header /><v:Body><ping xmlns="" id="o0" c:root="1"><in i:type="d:string">Hallo Welt</in></ping></v:Body></v:Envelope> 
```

并做出以下回应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><soap:Fault><faultcode>soap:Client</faultcode><faultstring>Unexpected wrapper element ping found.   Expected {http://shared.bimserver.org/}ping.</faultstring></soap:Fault></soap:Body></soap:Envelope> 
```

所以这里看起来，参数“in”不能有命名空间，但 ping 请求必须有命名空间。

请帮我。我已经尝试了我能想象到的任何事情。

**编辑：**使用soapUI 我发现，响应应该是这样的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:shar="http://shared.bimserver.org/">
   <soapenv:Header/>
   <soapenv:Body>
      <shar:ping>
         <!--Optional:-->
         <in>Hallo</in>
      </shar:ping>
   </soapenv:Body>
</soapenv:Envelope> 
```

我的请求如下所示：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header />
  <v:Body>
    <ping xmlns="http://shared.bimserver.org/">
      <in i:type="d:string">test</in>
    </ping>
  </v:Body>
</v:Envelope> 
```

如何让我的请求看起来像所需的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:15:55.313

添加属性的命名空间：

```
PropertyInfo info = new PropertyInfo();
info.setNamespace("http://www.w3.org/2001/XMLSchema-instance");
info.setName("in");
info.setValue("Hallo Welt");
info.setType(PropertyInfo.STRING_CLASS);
request.addProperty(info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:24:33.003

以下是如何向 .Net Web 服务发出请求，在这里我正在调用名为“Login”的函数，您可以在函数链接行中以肥皂信封格式找到您的服务的名称空间，因此此处为“ [http://www.example。 com/](http://www.example.com/) " 在命名空间和函数名 id Login 中。有关更多详细信息，请查看[此](http://code.google.com/p/ksoap2-android/w/list)链接

```
    私有静态最终字符串 URL = "http://www.example.com/service.asmx";
    私有静态最终字符串 NAMESPACE = "http://www.example.com/";
    最终字符串 SOAP_ACTION = NAMESPACE+“登录”；
    最终字符串 METHOD_NAME ="登录";
    字符串响应=空；
    SoapObject request=new SoapObject(NAMESPACE,METHOD_NAME);

        request.addProperty("用户名",user_name);
        request.addProperty("密码", 密码);

        SoapSerializationEnvelope 信封=新 SoapSerializationEnvelope(SoapEnvelope.VER11);
        信封.setAddAdornments（假）；

        信封.implicitTypes = true;
        信封.dotNet=真；
        信封.setOutputSoapObject（请求）；
        MarshalBase64 元帅 = 新 MarshalBase64();
        marshal.register（信封）；
        HttpTransportSE httpTransport = new HttpTransportSE(URL);
        httpTransport.call(SOAP_ACTION, 信封);
        SoapPrimitivesoap_primitive = null;
            soap_primitive=(SoapPrimitive)信封.getResponse();
            response=String.valueOf(soap_primitive);

```

# php - 在“Onsubmit”上调用多个函数

> ID：15384032
> 
> 赞同：2
> 
> 时间：2013-03-13T11:28:57.320
> 
> 标签：php, javascript, function

我有一个表格，通过它我可以找到两个位置之间的距离。现在我的表格工作正常。我用过。

```
<form method="get" name="f1" id="f1" class="formular" action="findcars.php" onsubmit="showLocation(); return false;"> 
```

现在我想验证所有表单输入..所以我添加了函数 validate(); 像这样

```
<form method="get" name="f1" id="f1" class="formular" action="findcars.php" onsubmit="validate(); showLocation(); return false;"> 
```

但这不起作用..pls..help，我应该如何调用这个 validate() 函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:31:17.740

尝试做

```
validate() && showLocation(); 
```

或者，调用一个主函数，然后运行一个链：

```
masterFunction();

function masterFunction() {
  validate();
  showLocation();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:32:51.430

也许你可以试试这个

```
<form method="get" name="f1" id="f1" class="formular" action="findcars.php" onsubmit="myFunction(); return false;">

<script>
    myFunction function () {
    validate(); 
    showLocation();
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:37:47.890

试试这个

```
<form method="get" name="f1" id="f1" class="formular" action="findcars.php" onsubmit="validate(); showLocation(); return false;">  
    <button id="search-submit" type="submit">Search</button>
</form> 
```

**Javascript**

```
function validate(){
    alert('validate');
}
function showLocation(){
    alert('Location');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:31:24.057

这样做..

```
<form method="get" name="f1" id="f1" class="formular" action="findcars.php" onsubmit="return myvalidations();">

function myvalidations() {
validate(); 
showLocation();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:33:11.790

安排这样的功能：

```
<input type="button" onclick="function1();function2();" value="Call2Functions" />

  function func1(){
     //--- some logic
     func2();
   }

   function func2(){
    //--- some logic
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T11:35:32.167

如果返回 true，则首先调用 validate() 方法，然后在其中调用第二个方法。像下面

```
function validate(){
// ok is output of your validate method whether true or false
if(ok){
showLocation();
}
else{
return false;
}
} 
```

# javascript - 不想页面跳转

> ID：15384033
> 
> 赞同：0
> 
> 时间：2013-03-13T11:28:59.740
> 
> 标签：javascript, jquery, css, page-jump

以前的问题解决了@use [selectors in variable jquery](https://stackoverflow.com/questions/15380047/use-selectors-in-variable-jquery) on the same coe

我必须制作这样的功能，[这](http://www.biz.konicaminolta.com/lineup/index.html) 是使用我不理解的大 jquery 代码

这是我的[jsfiddle](http://jsfiddle.net/Hg4zp/4/) ， 我做了同样的功能，但是当它被点击时页面跳转到那个元素我不想页面跳转我需要一些淡入淡出

```
$(".show").click(function() {
    var link = $('this').attr('href');
  $(link).show();

});

$(".close").click(function() {
  $(this).closest("div.popupbox").hide();
}); 
```

和 html

```
<a href="#popup" id="show" class="show">a</a>
<a href="#popup1" id="show1" class="show">b</a>
<a href="#popup2" id="show2" class="show">c</a> 
```

我想在锚点单击时显示#popup，但不想页面跳转/滚动到我`top:10000px`在小提琴中给出的用于测试此问题的 id，因为在我的原始页面中它移动到特定元素

[小提琴](http://jsfiddle.net/Hg4zp/4/)上的完整代码，我想要[这个功能](http://www.biz.konicaminolta.com/lineup/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:40:58.210

试试这个：

```
$(".show").click(function(e) {
  e.preventDefault();
  var link = $(this).attr('href'); //<----remove quotes in $('this')
  $(link).fadeIn(); // <-------------use fadeIn() instead
});

$(".close").click(function(e) {
  e.preventDefault();
  $(this).closest("div.popupbox").hide();
}); 
```

并将其调整`top:100000px`为较小的值，例如`50px`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:32:58.300

采用`preventDefault()`

```
$(".show").click(function(e) {
    e.preventDefault();
    var link = $(this).attr('href');
    $(link).show().animate(
    {
        scrollTop: $(link).offset().top
    },800);;

});

$(".close").click(function(e) {
  e.preventDefault();
  $(this).closest("div.popupbox").hide();
  $('body,html').animate(
    {
        scrollTop: 0
    }, 800);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:33:09.623

```
$('#foo',function(event) {
    event.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T11:35:52.650

尝试`event.preventDefault()`

```
$(".show").click(function(event) {
    event.preventDefault();
    var link = $(this).attr('href');
    $(link).show();

});

$(".close").click(function(event) {
    event.preventDefault();
    $(this).closest("div.popupbox").hide();
}); 
```

文档[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# android - VideoView：seekTo 不加载（缓冲）

> ID：15384036
> 
> 赞同：2
> 
> 时间：2013-03-13T11:29:06.333
> 
> 标签：android, android-videoview

```
videoView.setVideoURI(Uri.parse("video stream url"));
videoView.seekTo(1000); 
```

我正在使用 VideoView 从视频流中观看视频。并且需要在不加载（缓冲）完整视频的情况下寻求。有人知道这样做的技巧或窍门吗？谢谢！

# angularjs - Angular UI Bootstrap Modal 不适用于 ng-include

> ID：15384037
> 
> 赞同：4
> 
> 时间：2013-03-13T11:29:07.177
> 
> 标签：angularjs, angular-ui, angular-ui-bootstrap, angularjs-ng-include

现场示例：[http ://plnkr.co/edit/wWS3UFB3IZ0cAI4u2x04?p=preview](http://plnkr.co/edit/wWS3UFB3IZ0cAI4u2x04?p=preview)

单击“打开模式1”时，会抛出以下错误：

> 错误：Dialog.open 预期的模板或 templateUrl，均未找到。使用选项或打开方法来指定它们。

但是，不使用 的模态 2`ng-include`可以正常工作。

此外，如果`ui-bootstrap-tpls-0.1.0.js`包含而不是`ui-bootstrap-tpls-0.2.0.js`，则一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T11:58:19.083

我相信这个问题是将模式指令更改为终端的结果。这意味着其他指令（例如 ng-include）将不会与 modal 一起处理。这是进行此更改的提交：

[https://github.com/angular-ui/bootstrap/commit/ec796ec2299d03ddfb821e97047c0329f11ab962#src/modal/modal.js](https://github.com/angular-ui/bootstrap/commit/ec796ec2299d03ddfb821e97047c0329f11ab962#src/modal/modal.js)

老实说，我对此知之甚少，无法确切知道为什么该指令应该是终端的，但一个简单的解决方案就是使用 ng-include 作为 modal 的子项，而不是作为作用于同一元素的第二个指令。这就是我的意思：

```
<div modal="opened1">
    <ng-include src="'modal1.html'"></ng-include>
</div> 
```

更新的实时示例： http: [//plnkr.co/edit/KBBOn2T8cbeLfB0Su9jp](http://plnkr.co/edit/KBBOn2T8cbeLfB0Su9jp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-30T03:19:13.080

我不知道那是什么版本的 Angular-ui，但模态窗口的文档仍然令人困惑。虽然您确实可以使用 ngInclude 指令作为显示模态窗口的一部分，但它不是必需的，如下所示。在下面的案例中，模态 html 和脚本位于不同的文件中，并且 modal.open() 用于引用和显示它们。出于某种原因，我只能在将可更新模型作为 $scope 的对象属性传递时才能实现它。（参见代码中的“vm”）

ModalView.html 片段

```
<!-- html elements reference the ModalViewCtrl decorated $scope -->
<input ng-model='vm.email' type='email' placeholder='Email address' autofocus />
<input ng-model="vm.password" type="password" class="form-control" placeholder="Password" />
<label class="checkbox">
    <input ng-model="vm.rememberMe" type="checkbox" />
    Remember me
</label> 
```

ModalViewCtrl.js 片段

```
 angular.module('app')
   .controller('ModalViewCtrl', function($scope, $modal, parms) {

      /* decorate the $scope and/or preset the $scope.vm object
         as needed with parms.parm1, parms.parm2, ....
      */

      $scope.ok = function () {
         $modalInstance.close($scope.vm);
      };

      $scope.cancel = function () {
         $modalInstance.dismiss();
      };     

   }); 
```

SourcePageCtrl.js 片段

```
 angular.module('app')
   .controller('SourcePageCtrl', function($scope, $modal, ...) {

      $scope.open = function() {
         var modalInstance = $modal.open({
            templateUrl: 'path_literal_to_ModalView.html'
            ,controller: 'ModalViewCtrl'
            ,resolve : {
                parms : function() { return {
                   parms1 : value1
                  ,parm2 : value2
                  ,...
                }}
            });

         modalInstance.result.then(
            function (vm) { 
                $scope.result = vm;
            } , function () {
                ... 
            }
         );

      });
   }); 
```

但是，如果您确实想使用包含，则有两个问题。

1.  'templateUrl' 必须引用模态元素包含标签的 Id，例如 ngInclude 本身的 Id，与模板文件的 URL 相对。
2.  因为 Angular 评估属性值，如果向 path 的 src 属性提供了文字，则它必须在已引用的字符串中被引用：

# c# - 嵌套循环 C# 上的内存不足错误

> ID：15384038
> 
> 赞同：0
> 
> 时间：2013-03-13T11:29:08.017
> 
> 标签：c#, while-loop, streamreader

我查了一下，我几乎明白了，但我还有一个剩余的运行时错误。
我的代码如下：

```
while ((line = reader.ReadLine()) != null)
{
    while (reader.Peek() != '\r')
    {
        datalinestream.Add(GetWord(reader));
    }
    LuceneDB.AddUpdateLuceneIndex(new MATS_Doc( datalinestream));
    datalinestream.Clear();
} 
```

代码正在导入数据，但循环不会中断，并且由于以下原因会崩溃

> “在 mscorlib.dll 中发生了“System.OutOfMemoryException”类型的未处理异常”

外部 while 循环的适当中断条件是什么，以确保我读取整个文件并在最后中断。我为此感到挣扎，因为我需要前进到下一行，并且我需要跳过电子表格中的第一行。非常感谢任何帮助。

****更新****

我清除了字符串列表，因为我正在为 lucene 索引创建一个文档，并且它只有大约 14 个字段，我不希望列表变得太大。

我的 getword 代码

```
private string GetWord(TextReader inputdata)
        {
            String word = "";

            while (inputdata.Peek() >= 0)
            {
                word += (char)inputdata.Read();
                if ((word.Contains(";"))) break;
            }

        return word;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:31:32.303

我猜`GetWord`不是在推进读者 - 导致`datalinestream`变得庞大。

或者你的文件真的很大。

出于兴趣——你为什么要扔掉`line`？- 肯定包含您在内部循环中尝试阅读的所有文本？

**更新**

您的代码中肯定有一个逻辑漏洞，我的猜测是它要么向列表中添加`-1`或`0`字符，要么是内部字符串`GetWord`（顺便说一句，`+=`以这种方式在字符串上使用对于性能和内存使用来说是可怕的）。也可能是您的线路终止符`\r`不仅仅是 'naked' `\n`。

也就是说，您可以通过以下方式解决所有问题：

```
string line = reader.ReadLine();
string wordTemp;
while(line != null)
{
  string[] words = 
    line.Split(";".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
  foreach(var word in words)
  {
    wordTemp = word.Trim(); //get rid of any whitespace
    if(wordTemp.Length != 0)
      datalinestream.Add(wordTemp);
  }
  LuceneDB.AddUpdateLuceneIndex(new MATS_Doc( datalinestream));
  datalinestream.Clear();
  line = reader.ReadLine();
} 
```

正如我所说——不要扔掉你刚刚读到的那一行——使用它，利用它也去掉换行符的事实。然后简单地使用`string.Split`来破解每个单词，在此过程中修剪它们以消除它们可能具有的任何尾随/前导空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:32:25.240

这可能会导致异常

```
 while (reader.Peek() != '\r')
      {
       datalinestream.Add(GetWord(reader));
      } 
```

# ios - QLPreviewController 以不正确的字体显示 PDF

> ID：15384042
> 
> 赞同：1
> 
> 时间：2013-03-13T11:29:16.897
> 
> 标签：ios, pdf, fonts, qlpreviewcontroller

我正在从笔尖在 iPad 应用程序中生成 PDF。该应用程序使用在应用程序的笔尖中正确显示的自定义字体。当我在我的 Mac 上查看此保存的 PDF 时，它也以正确的字体显示。当我在应用程序中显示它时`QLPreviewController`，字体似乎已被替换。数据源实现`previewController:previewItemAtIndex:`返回`NSURL`应用程序文档文件夹中的 PDF 文件。

无论如何要纠正这个问题吗？我是否需要嵌入字体或将其提供给 QLPreviewController，如果需要，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:19:54.567

Probably the fonts are not embedded in the document and this causes the PDF rendering engine to substitute them. Unfortunately with CoreGraphics API you do not have the option to specify whether to embed or not the font in the PDF file.
The Preview app has more capabilities to locate the font files in order to display the file correctly.

# azure - 使用 Azure ACS 时无法从 Active Directory 注销

> ID：15384043
> 
> 赞同：5
> 
> 时间：2013-03-13T11:29:18.850
> 
> 标签：azure, asp.net-mvc-4, single-sign-on, acs, adfs2.0

我在我的 MVC 4 应用程序中使用 ACS 2.0。

它已经配置为登录，并且适用于包括 ADFS 在内的各种提供程序。我需要实现注销功能。

由于[这个问题](https://stackoverflow.com/questions/5651929/azure-appfabric-access-control-service-log-off)已经过时，我使用了[这些示例](http://msdn.microsoft.com/en-us/library/windowsazure/jj984618.aspx)中的代码：

这是它的样子：

```
 // Load Identity Configuration 
    FederationConfiguration config = FederatedAuthentication.FederationConfiguration;

    // Get wtrealm from WsFederationConfiguation Section 
    string wtrealm = config.WsFederationConfiguration.Realm;
    string wreply = wtrealm; //return url

    // Read the ACS Ws-Federation endpoint from web.Config 
    string wsFederationEndpoint = ConfigurationManager.AppSettings["ida:Issuer"];

    SignOutRequestMessage signoutRequestMessage = new SignOutRequestMessage(new Uri(wsFederationEndpoint));

    signoutRequestMessage.Parameters.Add("wreply", wreply);
    signoutRequestMessage.Parameters.Add("wtrealm", wtrealm);

    FederatedAuthentication.SessionAuthenticationModule.SignOut();

    var signoutUrl = signoutRequestMessage.WriteQueryString(); 
```

结果，我得到了我应该重定向的退出 URL，它将处理令牌并将我发回。URL 如下所示：

```
https://myacsnamespace.accesscontrol.windows.net/v2/wsfederation?wa=wsignout1.0&wreply=http%3a%2f%2flocalhost%3a61192%2f&wtrealm=http%3a%2f%2flocalhost%3a61192%2f 
```

因此，它可以按预期对 Google、Yahoo 和 Microsoft 帐户运行。当我退出并尝试访问受保护区域时，我会得到一个身份提供者列表，即使我选择了相同的提供者，我也必须再次登录。

但是当我使用 ADFS 提供程序时，它的工作方式如下：

*   我点击退出并进入可用提供商的页面

*   我再次选择 ADFS 提供程序

*   我使用旧的 AD 凭据进入保护区

*   如果我将 ADFS 作为唯一的提供程序，则会跳过上面的第 2 步，并且我会不断登录而无法更改用户。

正如我看到的那样，ACS 不会处理它从 ADFS 获得的安全令牌，而是重新使用它。

您对我如何强制 ACS 处置此令牌有任何线索吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T04:51:44.880

+1 @oren-melzer 的回答：浏览器缓存 http 基本凭据并自动重新发送它们。移动到表单身份验证（使用 cookie）或注销时，特别拒绝浏览器的身份验证标头，不断返回 401。有时这种“返回 401 以获取有效凭据”可以清除浏览器，有时您必须简单地要求用户关闭浏览器.

# jsf-2 - 如何刷新特定组件的内容

> ID：15384044
> 
> 赞同：0
> 
> 时间：2013-03-13T11:29:25.397
> 
> 标签：jsf-2, primefaces

我正在使用 primefaces 3.5

我有一个拆分按钮和一个附加到拆分按钮的覆盖面板。

OverlayPanel 保持其先前的值。

单击拆分按钮时如何刷新覆盖面板的内容

```
enter code here

            <p:splitButton 
                value="some value"
                id="splitbutton">
            </p:splitButton>
        </h:panelGroup>

        <p:overlayPanel id="idPanel" for="splitbutton" hideEffect="fade"  
            widgetVar="dropdownPanel" dynamic="true">
            <h:form id="ctTreeForm">
                <composite:page value="#{backingbean.value}"
                    id="ctTree" `enter code here`render="form:contentForm:splitbutton"
                    showFilter="false" onselect="dropdownPanel.hide()">
                </composite:page>
            </h:form>
        </p:overlayPanel> 
```

# git - 如何配置 Github for Mac 应用程序以显示我的本地存储库？

> ID：15384050
> 
> 赞同：0
> 
> 时间：2013-03-13T11:29:40.747
> 
> 标签：git, github, github-for-mac

到目前为止，我一直在使用带有 bash 命令行的 Github。但现在我想使用mac客户端。但是，当登录 mac 应用程序时，它不会显示我的本地存储库。然而，github 上的 repos 出现了。我想我必须在应用程序本身中进行配置，但我找不到任何偏好来执行此操作。有任何想法吗？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:35:33.957

在侧边栏中，您应该会在“Github”标题上方看到“This Computer”作为标题。在这里你应该有“我的存储库”。如果单击它，则可以使用底部的 + 按钮添加新的存储库。

或者更容易：

点击“Command O”打开一个新的本地仓库。这也可以从文件菜单中访问。

不幸的是，据我所知，没有“自动”方式来添加所有本地存储库。

# ios - iOS 可视化 UISearchBar 范围按钮变化

> ID：15384053
> 
> 赞同：0
> 
> 时间：2013-03-13T11:29:51.077
> 
> 标签：ios, ipad, tableview, uisearchbar

在我单击取消按钮后，范围栏位于搜索栏旁边......但代码是：

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
searchBar.showsScopeBar = YES;
[searchBar sizeToFit];
[searchBar invalidateIntrinsicContentSize];
[searchBar setShowsCancelButton:YES animated:YES];
tabellaCanzoni.tableHeaderView = self.searchDisplayController.searchBar;
} 
```

我希望它留在搜索下方，而不是旁边！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:49:57.500

使用此代码一切正常：

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
[_barraRicerca resignFirstResponder];
_barraRicerca.text = nil;
[_barraRicerca setShowsScopeBar:YES];
[_barraRicerca sizeToFit];
isFiltered=FALSE;
[tabellaVideo reloadData];
} 
```

# python - Python：列表推导与 lambda

> ID：15384058
> 
> 赞同：4
> 
> 时间：2013-03-13T11:30:13.480
> 
> 标签：python, list, lambda, list-comprehension

我想从包含“b”作为第一个元素的子列表中检索整数值（b 只会在列表中出现一次）

我想到了这两种方法：

```
foo = [["a", 5], ["b", 10], ["c", 100]]

y = filter(lambda x: x[0] == "b", foo)
print y[0][1]

z = [foo[i][1] for i in range(len(foo)) if foo[i][0] == "b"] 
print z[0] 
```

他们都工作。两者中的任何一个都更可取（关于运行时间），还有更好的第三种方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T11:38:48.037

当列表很小时，两者之间没有显着差异。如果输入列表可以变大，那么就会出现更严重的问题：您正在遍历整个列表，而您可能会在第一个元素处停止。您可以使用 for 循环来完成此操作，但如果您想使用类似理解的语句，请使用*生成器表达式*：

```
# like list comprehensions but with () instead of []
gen = (b for a, b in foo if a == 'b')
my_element = next(gen) 
```

或者简单地说：

```
my_element = next(b for a, b in foo if a == 'b') 
```

如果您想了解有关生成器表达式的更多信息，请查看[PEP 289](http://www.python.org/dev/peps/pep-0289/)。

* * *

请注意，即使使用生成器和迭代器，您也有不止一种选择。

```
# Python 3:
my_element = next(filter(lambda x: x[0] == 'b', foo))

# Python 2:
from itertools import ifilter
my_element = next(ifilter(lambda (x, y): x == 'b', foo)) 
```

我个人不喜欢也不推荐这个，因为它的可读性要差得多。事实证明，这实际上比我的第一个片段要慢，但`filter()`在某些特殊情况下，通常使用而不是生成器表达式可能会更快。

无论如何，如果您需要对代码进行基准测试，我建议您[使用`timeit`module](http://docs.python.org/2/library/timeit.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:46:27.760

这比 DavidE 的回答慢（我计时了），但具有简单的优点：

```
z = dict(foo)['b'] 
```

当然，它假设您的密钥都是可散列的，但如果它们是字符串，那就没问题了。如果您需要进行多次查找，尽管这绝对是要走的路（只要确保只转换为 dict 一次）。

# google-maps-api-3 - Google 地图标记图标未在 AIR HTMLLoader 中加载

> ID：15384060
> 
> 赞同：0
> 
> 时间：2013-03-13T11:30:24.197
> 
> 标签：google-maps-api-3, air, google-maps-markers

[我从http://www.technogumbo.com/2011/12/Migrating-to-Javascript-from-the-Google-Maps-API-for-Flash](http://www.technogumbo.com/2011/12/Migrating-to-Javascript-from-the-Google-Maps-API-for-Flash-Using-Adobe-AIR/index.php)下载了代码以使用新的 Google maps javascript api 在 Flash AIR 应用程序中使用 [-使用-Adobe-AIR/index.php](http://www.technogumbo.com/2011/12/Migrating-to-Javascript-from-the-Google-Maps-API-for-Flash-Using-Adobe-AIR/index.php)

对于项目标记，我分配了一个图标图像。如果在浏览器中打开 html 文件，则会加载图标图像。但是，当通过 HTMLLoader 在 AIR 应用程序中加载相同的 html 时，不会显示标记图像。

我正在使用从上面示例中下载的相同代码，只是为标记添加了图标图像。

# php - 从数组中一次插入 2 个表到 mysql 数据库中

> ID：15384065
> 
> 赞同：0
> 
> 时间：2013-03-13T11:30:35.800
> 
> 标签：php, mysql, arrays, textfield

一个叫做 Job，另一个叫做 Attributes。Attributes 表依赖于 Job 表，因为一张表可以有很多 Attributes。作业表包含几个字段，即

> Jobid(auto increment, PRIMARY KEY), JobName, Jobdescription

属性表包含以下字段

> id(auto increment, PRIMARY KEY, AttribName, Score, Jobid(工作表中的外键)。

每个作业要输入的属性数量各不相同，因此一个作业可以有 10 个属性，而另一个作业可能有 2、3、4 等属性。

以下是我在卡住之前创建的代码。

插入作业.php

```
<?php

include 'html/head.php';//connect to connect to the database and initialize all functions
include 'scripts/functions/init.php';
include 'html/page_title.php';
include 'html/top_menu.php';
include 'titles/Job_insert.php';

if(empty($_POST)=== false)
    {
        $R_fields = array('JobName','JobDesc','JobDuties','RecruitmentProcess','ContractType','SPackage');
        foreach($_POST as $key=>$value)
        {
            if (empty($value) && in_array($key,$R_fields)=== true)
                {
                    $errors[] = 'fields marked with (*) are required';
                    break 1;
                }

        }

        if(empty($errors)=== true)
            {

                if($_POST['DirectorateName'] == '------ select ------')
                    {
                        $errors[] ='Please select Directorate Name';
                    }
                if($_POST['Attributes'] == '-select-')
                    {
                        $errors[] ='Please Select the Number of Attributes';
                    }

            }
    }

    include 'html/job_insert.php';

    //Check if the form is not empty then submit details
    if(empty($_POST) === false && empty($errors)=== true)
        {
            //store input into the session variables
            $_SESSION['JobName'] = $_POST['JobName'];
            $_SESSION['JobDesc'] = $_POST['JobDesc'];

            //Store the number of attributes to get captured
            $_SESSION['Attributes'] = $_POST['Attributes'];

            //redirect
            header('Location: Rank.php');
            exit();                                                                                                                             
        }
    else if(empty($errors) === false)
        {
            //output errors if the errors array is not empty
            echo output($errors);

        }
?>

                        </div> <!-- div class entry ends here -->
                    </div> <!-- div post ends here -->
                </div> <!-- div idcontents ends here -->
                <!-- end #content -->
                <?php
                    include 'html/top_side.php';
                    include 'html/side_other.php';
                    include 'html/side_bottom.php';
                    include 'html/footer.php';
                ?> 
```

您会注意到我将所有输入存储到会话变量中，并将其带到下一页我将在其中一次将所有内容插入到两个表中。

以下代码用于 Rank.php

```
<?php

include 'scripts/functions/init.php';
include 'html/head.php';
include 'html/page_title.php';
include 'html/top_menu.php';
include 'titles/Rank.php';

//declare the Array to store user input
$job_array = array();

//declare the Array to store attributes
$attributes = array();

//declare the Array to store attributes scores
$scores = array();

//Number of input fields selected by user on Job_insert.php page
$Number = $_SESSION['Attributes'];

//User Input from Job_insert.php page
$JobName    = $_SESSION['JobName'];
$JobDesc    = $_SESSION['JobDesc'];
$JobDuties  = $_SESSION['JobDuties'];
$RProcess   = $_SESSION['RecruitmentProcess'];
$SPackage   = $_SESSION['SPackage'];
$DName      = $_SESSION['DirectorateName'];

//Store user input Job details into an array
$job_array = array(
            'JobName' =>$JobName,
            'JobDesc'=>$JobDesc,
            'JobDuties' =>$JobDuties,
            'RecruitmentProcess'=>$RProcess,                                                
            'SPackage'=>$SPackage,
            'DirectorateName'=>$DName); 

//Check if the form is not empty then submit details
if(empty($_POST) === false && empty($errors)=== true)
        {
            //submit job details
            job_insert($job_array);                 

            //Store the current jobid into a variable
            $jobid = mysql_insert_id();             

            for($i =0;$i<$Number;$count++)
                {
                    //This is where I am getting stuck
                }

            //redirect
            header('Location: Rank.php');

            exit();                                                                                                                             
        }
    else if(empty($errors) === false)
        {
            //output errors if the errors array is not empty
            echo output($errors);
        } 
```

> //将表单输出到屏幕 include 'html/Rank.php';

以下是我如何将用户输入存储到数组中的示例

```
<form action = "" method ="POST" enctype="multipart/form-data">
                        <fieldset>
                            <?php

                                    if($Number == 10)
                                        {
                                            echo '<table border="0">';
                                            echo '<th>'.'Attribute'.'</th>';
                                            echo '<th>'.'Score'.'</th>';
                                            //Print the first row of the result set
                                            echo '<tr>';
                                            //First Form
                                                echo '<td>'.'<input type="text" size="35" name="attributes[]">'.'</td>';   
                                                echo '<td>'.'<select id="select1" name ="Score[]">
                                                                <option>-select-</option>
                                                                <option>10</option>
                                                                <option>9</option>
                                                                <option>8</option>
                                                                <option>7</option>
                                                                <option>6</option>
                                                                <option>5</option>
                                                                <option>4</option>
                                                                <option>3</option>
                                                                <option>2</option>
                                                                <option>1</option>
                                                            </select>'.'</td>';            
                                                echo '</tr>'; 

                                                //Second Form
                                                echo '<tr>';
                                                echo '<td>'.'<input type="text" size="35" name="attributes[]">'.'</td>';   
                                                echo '<td>'.'<select id="select2" name = "score[]"">
                                                                <option>-select-</option>
                                                                <option>10</option>
                                                                <option>9</option>
                                                                <option>8</option>
                                                                <option>7</option>
                                                                <option>6</option>
                                                                <option>5</option>
                                                                <option>4</option>
                                                                <option>3</option>
                                                                <option>2</option>
                                                                <option>1</option>
                                                            </select>'.'</td>';            
                                                    echo '</tr>'; 
```

基本上，我将用户输入存储到名为 Attributes 的数组和另一个名为 Score 的数组中。将作业详细信息插入作业表工作正常，但现在我需要将 Attributes 和 Score 数组中包含的信息插入 mysql 数据库。请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:49:04.427

不太清楚你的意思

```
//This is where I am getting stuck 
```

但是您基本上想为已创建的作业插入属性。因此，您可以遍历属性列表并为此构建查询。

```
$query = 'INSERT INTO attributes
  (name, score, job_id)
VALUES';

foreach ($_SESSION['Attributes'] as $attribute) {
   $query .= "({$attributep['name']}, {$attribute['score']}, $job_id),";
} 
```

像在 job_insert 中一样执行该查询。

# android - 在什么情况下可以在客户端设备上使用应用内计费版本 3 服务器更改？

> ID：15384067
> 
> 赞同：10
> 
> 时间：2013-03-13T11:30:40.190
> 
> 标签：android, in-app-purchase, in-app-billing

由于 Google Play 应用程序缓冲来自 Google Play 服务器的数据，而且缓冲过程没有详细记录，因此测试应用内结算版本 3 变得不可预测。特别是，如果购买是在用户的设备之一上进行的，则可能不会立即在同一用户拥有的不同设备上看到。

推荐的做法是应用程序在启动时检查所有已购买产品的库存。但有时，由于通过不同设备上的同一应用程序或通过 Google Checkout（例如，退款或取消订单）进行更新，此检查使用的缓冲数据已经过时。

在什么情况下，对 Google Play 服务器上的购买数据所做的更改可用于在未启动该更新的设备上运行的 Google Play 应用程序？

具体来说，如何确保在测试期间使用 queryInventoryAsync()（随 TrivialDrive 示例应用程序提供的 IabHelper 类的一种方法）检查​​返回的数据反映了 Google Play 服务器上当前的内容，而不是可能是陈旧的缓冲数据？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T11:55:01.260

这是我自己使用在 Nexus 7 平板电脑上运行的应用程序购买商品，然后使用在 Nexus One 手机上运行的相同应用程序检测到该购买的经验。下面描述的测试是使用测试帐户对以草稿模式上传（尚未发布）的应用程序执行的。测试帐户已在草稿应用程序的开发者控制台上声明，并且是两个测试设备的主帐户。

购买的是非消耗品。购买是使用随 TrivialDrive 示例应用程序提供的 IabHelper 类的变体进行的。为进行购买而调用的 IabHelper 方法是 launchPurchaseFlow()。

购买后，当随后使用 IabHelper 的 queryInventoryAsync() 方法时，该项目被添加到返回到同一设备的购买项目列表中。

但是，同一帐户拥有的另一台 Nexus One 设备在启动时执行了对 queryInventoryAsync() 的调用，但未收到使用该方法返回的已购买商品库存中的已购买商品。

但是，如果使用 Nexus One 设备使用 launchPurchaseFlow() 启动购买同一商品，则会返回一条消息（在用于购买的显示屏前弹出的对话框中），表示无法购买该项目，因为它已经拥有。这发生在从 Nexus 7 开始购买后不到 15 分钟，这表明数据在 Google Play 服务器上相当迅速地可用，但在 Nexus One 上不会自动可用，*直到*尝试从Nexus One 设备已启动。

在这次购买已拥有物品的失败尝试之后，该物品*确实*出现在 Nexus One 上的 queryInventoryAsync() 后续调用中。这表明购买该项目的尝试触发了 Nexus One Google Play 应用程序的缓冲数据与 Google Play 服务器上可用数据的同步。这*不是*由 queryInventoryAsync() 本身触发的。

我测试了第二种情况，在这种情况下，我没有尝试从 Nexus One 购买已经拥有的物品，而是删除了 Google Play 应用程序中的缓存。这没有*启动*对 queryInventoryAsync() 返回的数据的更新；该数据保持不变。

我测试了第三种情况，在这种情况下，我没有尝试从 Nexus One 购买已经拥有的物品，而是简单地关闭了 Nexus One，然后再次打开它。此后，当我运行同一个应用程序并执行 queryInventoryAsync() 请求时，从 Nexus 7 购买的商品实际上在返回的购买商品列表中可见。

我从上面得出的结论是，Google Play 应用程序试图通过在本地缓冲购买并仅在发生特定触发器时更新自身来减少它对 Google Play 服务器进行的往返次数。我已经确定了两个触发因素，即 1) 尝试购买已拥有的物品和 2) 重新启动运行 Google Play 应用程序的设备。特别是，queryInventoryAsync() 不会*启动*这样的更新，因此可能会返回过时的数据，如上所述。

了解上述内容可以使测试更高效且更少混乱，因为它允许人们故意触发从 Google Play 服务器上可用的数据更新缓冲数据。

# asp.net - 引起邮寄问题的特别章程清单

> ID：15384068
> 
> 赞同：1
> 
> 时间：2013-03-13T11:30:44.183
> 
> 标签：asp.net, javascript-injection

我想避免在我已经运行的 asp.net 应用程序中进行脚本注入，因此我在 Pagebase Init 事件的运行时为每个文本框添加了 FilteredTextBoxExtender，并且效果很好，其中我定义了无效的“<>&”章程。

我想知道所有导致脚本注入问题的特殊章程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:36:36.510

尝试使用`Server.HTMLEncode`和`Server.HTMLDecode`。

1.  小于号 (<) 转换为`&lt;`.
2.  大于号 (>) 转换为`&gt;`.
3.  & 符号 (&) 转换为`&amp;`.
4.  双引号字符 (") 转换为`&quot;`.
5.  任何代码大于或等于 0x80 的 ASCII 代码字符都将转换为 &#，其中是 ASCII 字符值。

更多详细信息
[http://msdn.microsoft.com/en-in/library/ms525347%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-in/library/ms525347%28v=vs.90%29.aspx)

## 编辑 1

一些 SO 链接
[ASP.NET Server.HtmlEncode 限制](https://stackoverflow.com/questions/1221439/asp-net-server-htmlencode-limitations)
[为什么需要 Server.HtmlEncode？](https://stackoverflow.com/questions/6851874/why-is-server-htmlencode-required)

## 编辑 2

可以参考这个链接
[ValidateRequest 设置为 true 时哪些字符或字符组合无效？](https://stackoverflow.com/questions/3118876/what-characters-or-character-combinations-are-invalid-when-validaterequest-is-se)

# c++ - 任务调度程序 2.0 的任务编辑器对话框

> ID：15384073
> 
> 赞同：3
> 
> 时间：2013-03-13T11:30:54.697
> 
> 标签：c++, scheduled-tasks

我正在开发一个遗留应用程序。此应用程序计划文件。它使用的是任务计划程序 1.0。但是在 vista 和 7 中它无法完全执行其功能存在一些问题。解决方案是迁移到 Task Scheduler 2.0。

在`ITask::EditWorkItem`v1.0 中有显示一个 GUI，用户可以在其中选择何时运行计划。问题是我在 v2.0 中找不到这个对话框。那里`ITaskDefinition`，但没有`TaskEditDialog`或类似的东西。

我怎样才能得到那个对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T01:06:14.897

在第一次修补 vista 后，该对话框似乎不可用。唯一的方法似乎是您必须自己制作 GUI，并让用户在那里输入和编辑您需要他们输入和编辑的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:25:58.683

是的，如果 2.0 ITask::EditWorkItem 不存在，我建议查看[http://taskscheduler.codeplex.com/](http://taskscheduler.codeplex.com/) “该项目为在所有 Microsoft 操作系统都发布了 Windows 98。它简化了编码，聚合了多个版本，提供了一个编辑器并允许本地化支持。”

# html - 如何将视频添加到html中

> ID：15384077
> 
> 赞同：0
> 
> 时间：2013-03-13T11:31:03.837
> 
> 标签：html, video

我想在我的 html 代码中添加一个视频，至少应该可以从 IE、firfox 和 chrome 浏览器访问它。

视频的扩展名为.vob

我用过这段代码

```
<object data="../Video/VTS_01_1.vob" height="200" width="200"></object> 
```

但我在屏幕上什么也看不到，只是一个 200 高和 200 宽的正方形

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:34:15.117

*   使用[元素](http://html5doctor.com/the-video-element/)[_`<video>`](http://html5doctor.com/the-video-element/)
*   使用浏览器支持的文件格式。VOB 不是这样的格式。MP4 和 WebM 对于不同的浏览器都是不错的选择，你应该同时使用
*   考虑使用为旧浏览器提供 Flash 等回退的库。示例包括[video.js](http://videojs.com/)和[适用于所有人的视频](http://camendesign.co.uk/code/video_for_everybody)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:46:08.710

示例代码：

```
<video width="640" height="360" src="/demo/google_main.mp4?2" autobuffer>
    <div class="fallback">
        <p>................</p>
    </div>
</video> 
```

用新标签包裹了相同的旧标签`<object>`和`<embed>`标签。

[有关视频](http://www.quackit.com/html_5/tags/html_video_tag.cfm)标签的更多信息

# three.js - 更新网格内的几何图形没有任何作用

> ID：15384078
> 
> 赞同：12
> 
> 时间：2013-03-13T11:31:14.650
> 
> 标签：three.js

我正在使用 THREE.JS rev 49。

我的程序需要通过更改其几何形状来更新网格。不幸的是，显示似乎没有更新。

这是我的代码：

```
// theObject is an array of associatives :

// {
//     object1: {mesh: undefined/THREE.mesh, mat: THREE.Material, geo: THREE.Geometry}
//     object2: {mesh: undefined/THREE.mesh, mat: THREE.Material, geo: THREE.Geometry}
//     ...
// }

// In my function, theObject[i].mesh geometry must change to be theObject[i].geo.

for(i in theObjects) {

    //*
    if ( theObjects[i].mesh == undefined) {
        theObjects[i].mesh = new THREE.Mesh(theObjects[i].geo, theObjects[i].mat);

        theObjects[i].mesh.geometry.dynamic = true;
        theObjects[i].geo.verticesNeedUpdate = true;

        scenePostsurgery.add(theObjects[i].mesh);
    }  else
        theObjects[i].mesh.geometry.vertices = theObjects[i].geo.vertices;

} 
```

我必须添加其他东西吗？

/奥拉贡

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T12:27:56.920

如果我理解正确，您将在此处更新顶点：

```
else{
        theObjects[i].mesh.geometry.vertices = theObjects[i].geo.vertices;  
} 
```

尝试将此代码更改为：

```
else{
         theObjects[i].mesh.geometry.dynamic = true;
         theObjects[i].mesh.geometry.vertices = theObjects[i].geo.vertices;  
         theObjects[i].mesh.geometry.verticesNeedUpdate = true;
    } 
```

在`if(){}`您创建一个网格并进行`else{}`更新时`dynamic = true`，`verticesNeedUpdate = true`您需要设置为`else{}`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T15:24:30.360

更改整个几何图形时，我认为最简单的方法是删除旧的（scene.remove(geometry)，然后添加新的（scene.add(geometry)）。我认为修改网格和几何参数的成本和属性和添加一个新的一样，虽然添加要容易得多，而且省去了很多麻烦！

# iphone - GLKit 中的纹理映射不仅适用于设备

> ID：15384079
> 
> 赞同：7
> 
> 时间：2013-03-13T11:31:14.927
> 
> 标签：iphone, ios, objective-c, opengl-es, glkit

我使用[此链接](https://github.com/ricardo-rendoncepeda/mtl2opengl)中的代码来映​​射人脸的纹理。此代码使用**GLKIT**来渲染图像。代码在模拟器中运行良好，但如果我在设备中运行相同的代码它不起作用。以下是它在设备中而不是在我的 ipad 中工作的图像的屏幕截图。

我用来加载纹理的代码：

```
- (void)loadTexture:(UIImage *)textureImage
{
    glGenTextures(1, &_texture);
    glBindTexture(GL_TEXTURE_2D, _texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    CGImageRef cgImage = textureImage.CGImage;
    float imageWidth = CGImageGetWidth(cgImage);
    float imageHeight = CGImageGetHeight(cgImage);
    CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, imageWidth, imageHeight, 0, GL_RGBA,  
    GL_UNSIGNED_BYTE, CFDataGetBytePtr(data));
} 
```

模拟器图片：

![模拟器中的输出](../Images/671ad4add58cae7e19539315fe78cc49.png)

设备中的相同代码给出以下输出：

![设备中的输出](../Images/16fa94f689d1c88f3b477d9d9c981657.png)

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:00:38.300

1.  使用 Apple 内置的 1 行方法来加载——不要编写自己的（损坏的）实现！

    [https://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html#//apple_ref/occ/clm/GLKTextureLoader/textureWithContentsOfFile:options:error](https://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html#//apple_ref/occ/clm/GLKTextureLoader/textureWithContentsOfFile:options:error)：

* * *

1.  或者，如果你必须自己做，你有两个可疑的部分：

    2.1。摆脱这一行：

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    2.2\. 此行使用范围外的数字，这不是很好：

    glGenTextures(1, &_texture);

* * *

1.  如果由于某种原因您不能使用 Apple 的代码（例如，您想从内存图像加载原始数据），这里是工作代码的复制/粘贴：

    ```
    NSData* imageData = ... // fill this yourself
    CGSize* imageSize = ... // fill this yourself

    GLuint integerForOpenGLToFill;
    glGenTextures(1, &integerForOpenGLToFill);

    glBindTexture( GL_TEXTURE_2D, integerForOpenGLToFill);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    unsigned char* pixelData = (unsigned char*) malloc( [imageData length] * sizeof(unsigned char) );
    [imageData getBytes:pixelData];
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, imageSize.width, imageSize.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixelData); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:00:11.517

我终于屈服并切换到 GLKTextureLoader。正如亚当所说，它非常坚固。

这是一个可能对您有用的实现：

```
- (void)loadTexture:(NSString *)fileName
{
    NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES],
                             GLKTextureLoaderOriginBottomLeft,
                             nil];

    NSError* error;
    NSString* path = [[NSBundle mainBundle] pathForResource:fileName ofType:nil];
    GLKTextureInfo* texture = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];
    if(texture == nil)
    {
        NSLog(@"Error loading file: %@", [error localizedDescription]);
    }

    glBindTexture(GL_TEXTURE_2D, texture.name);
} 
```

我很快就会为`mtl2opengl`GitHub 上的项目更改它...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T12:25:27.070

看截图......我想知道问题是否在于你要从 iPhone 到 iPad？

即视网膜到非视网膜？

在我看来，您的图像加载*可能*忽略了 Retina 比例，因此 iPad 上的纹理贴图“太大了 2 倍”。

使用 Apple 的方法（我的另一个答案）应该会自动解决这个问题，但如果没有：您可以尝试制作图像的两个副本，一个为当前大小（名为“image@2x.png”），另一个为一半大小（在 photoshop 中调整大小） /preview.app/etc)（命名为“image.png”）

# android - FFMPEG 从图像流中输出视频

> ID：15384093
> 
> 赞同：1
> 
> 时间：2013-03-13T11:31:58.737
> 
> 标签：android, ffmpeg, video-conversion

我知道如何使用 ffmpeg 将图像序列转换为视频。

我想要做的是**在我准备好所有图像之前**开始将图像转换为视频，即一旦我开始输出图像，ffmpeg 开始转换，并在图像停止出现时停止。有什么办法可以做到这一点？

编辑：我正在 Android 中尝试这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:15:16.970

如果你想在 sdcard 上存储视频，你应该从 OpenCV for Android 的 FFMpegFrameRecorder 类开始。你可以很容易地谷歌它。它将允许您添加单个帧并逐位创建视频。

如果您需要将视频保存在内存中，则必须编写自己的帧记录器，这不是那么简单，而是可行的，我可以为您提供一些帮助。

# html - 如何阻止我的 :after 内容阻止我的锚？

> ID：15384094
> 
> 赞同：4
> 
> 时间：2013-03-13T11:32:02.107
> 
> 标签：html, css

我制作了一个简单的 Fiddle 来演示我的问题。[http://jsfiddle.net/JTqww/](http://jsfiddle.net/JTqww/)

HTML：

```
<body>
    <div class="button">
        <a href="#">
            <img SRC="http://www.mikesfreegifs.com/main4/halloween/comehere.gif"/>
            <span class="desc">Description</span>
        </a>
    </div>
</body> 
```

CSS：

```
.button {
    float: left;
    width: 100px;
}

.button a {
    background:green;
    float:left;
    z-index:-1;
}

img {
    display:inline-block;
}

.desc{
    display:inline-block;
    text-align:center;
    width:200px;
    background-color:blue;
    color:white;
}
.button:after {
    position:   absolute; 
    top:        10%;
    left:       10%; 
    content:"I destroy your anchor";
    color:red;
    position:   absolute; 
    width:      50%;
    height:     50%;

    background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 ); /* IE6-9 */

} 
```

如您所见，我在图像顶部制作了一个带有覆盖玻璃反射效果的按钮。我希望下面的图像和描述都包含在一个锚标记中（它们是但 :after 内容似乎阻止了锚）。如果将鼠标移到有光泽的白色区域之外，它将与锚点交互，但在白色光泽区域内则不会。

我已经尝试浮动锚点并更改 z-index，但放置的内容 :after 按钮（“光泽”）似乎阻止了锚点接收鼠标悬停和单击事件。

有人知道怎么修这个东西吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:09:41.787

我用你的代码解决了，所以它看起来不错。

这是[小提琴](http://jsfiddle.net/JTqww/8/)

要使单击也对添加的描述起作用，只需`:after`使用 to`a`或`span`tag 而不是 class `.button`。

[**工作小提琴**](http://jsfiddle.net/JTqww/12/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:48:02.773

由于您的`:after`内容不是锚的一部分，因此无法单击，因此您不能将其放置在锚的顶部，然后期望能够单击您的锚

现在，如果您更改`.before:after`为`.desc:after`您的链接将是可点击的：

[http://jsfiddle.net/JTqww/2/](http://jsfiddle.net/JTqww/2/)

你只需要弄乱样式就可以让它重新排列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:51:54.383

正如@Pete 所说，您生成的内容不是您的锚的一部分，因此它不会如此行事。最简单的解决方法是`div.button`完全删除您的，并将该类直接应用于您的`a`：

```
 <a href="#" class="button">
        <img SRC="http://www.mikesfreegifs.com/main4/halloween/comehere.gif"/>
        <span class="desc">Description</span>
    </a> 
```

生成的内容本身是锚的一部分，因此是可点击的。你最初的 CSS 也需要整理一下。类`button`，无论它应用到什么，都需要有`position: relative`，以便它创建一个新的定位上下文。然后覆盖层将正确放置 - 请参阅[此分叉](http://jsfiddle.net/cherryflavourpez/DVEt3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:55:05.793

相反，你可以直接给`div`

```
<div class="button">
    <a href="#">
        <img src="http://www.mikesfreegifs.com/main4/halloween/comehere.gif"/>
        <div class="overlay">I destroy your anchor</div>
        <span class="desc">Description</span>
    </a>
</div> 
```

**[演示](http://jsfiddle.net/JTqww/6/)**

# iphone - UIViews-masked-off-area-still-touchable

> ID：15384095
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:32:03.463
> 
> 标签：iphone, ios, objective-c, uiview, image-masking

![蒙面图像](../Images/44367fe6258f047c88014e811cfb78de.png)

我有蒙面 UIView 。用蓝点查看。绿色圆圈区域被屏蔽。我不想接触那个区域。我只想接触视图的可见层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:37:06.207

请在您的触摸方法中选择触摸视图代替 self.view

可能有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:48:30.313

尝试创建蒙版区域的 CGPath，然后检查触摸是否落在您的蒙版区域中，如下所示：

UIBezierPath *p = [UIBezierPath bezierPathWithCGPath:myCGPath];

BOOL isInPath = [p containsPoint:myCGPoint];

希望这可以帮助 ！！！

# .net - EntitySpaces 的文档是否仍然在任何地方可用？

> ID：15384098
> 
> 赞同：4
> 
> 时间：2013-03-13T11:32:17.440
> 
> 标签：.net, documentation, entityspaces

[实体空间](http://en.wikipedia.org/wiki/EntitySpaces)

> EntitySpaces 是一种对象关系映射工具，可在编写 ASP.NET、.NET Framework 或 .NET Compact Framework 应用程序时使用其架构。
> 
> 2012 年 9 月 21 日，EntitySpaces 宣布他们将于 2012 年 12 月 31 日解散，他们的产品将过渡到开源。

**有谁知道其他地方是否有任何支持文件？随着开源过渡，这些链接现在都关闭了；**

[开发人员文档站点](http://www.developer.entityspaces.net/documentation/Default.aspx)

[EntitySpaces API 参考](http://www.entityspaces.net/Documentation/EntitySpaces/index.html)

[入门 PDF](http://www.entityspaces.net/documentation/GetStarted.pdf)

甚至是公告的链接；

[EntitySpaces 关闭并移动到另一台服务器](http://www.entityspaces.net/blog/2012/09/21/EntitySpaces+To+Shutdown+Move+To+Open+Source.aspxhttp://www.entityspaces.net/blog/2012/09/21/EntitySpaces+To+Shutdown+Move+To+Open+Source.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T08:25:42.800

[http://esdocs.pixeo.be/](http://esdocs.pixeo.be/)（适用于只想要文档链接的任何人）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T20:18:51.180

混合先生，

你可以在 GitHub 上找到所有内容。

[https://github.com/EntitySpaces/EntitySpaces-CompleteSource](https://github.com/EntitySpaces/EntitySpaces-CompleteSource)

槊

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T11:36:24.850

转到 EntitySpaces 主页，下载产品，它是完全免费的，安装所有东西，包括分析器、完整源代码和文档，安装后只需查看 EntitySpaces 2012 菜单。

PS：使用下载按钮下的直接下载链接，否则 Download.com 会尝试让您安装烦人的工具栏等。

# c# - 禁用和启用后 WPF 文本框焦点“粘”

> ID：15384101
> 
> 赞同：2
> 
> 时间：2013-03-13T11:32:22.957
> 
> 标签：c#, wpf, mvvm, focus

我在具有 InputBindings 的网格中有一个 TextBox，这样当我点击返回时，就会在后台线程中执行搜索。

`IsEnabled`TextBox 的属性绑定到我`bool`的 ViewModel 中名为 IsSearching 的属性，在后台线程运行时这是真的（我使用转换器来否定该值）。

我输入文本框并按回车键，开始搜索并禁用文本框。当后台线程完成时，TextBox 被启用，但是焦点被搞砸了：

插入符号仍在 TextBox 内，但它不会闪烁，我无法输入。我相信 TextBox 有焦点，但没有“ `KeyboardFocus`”。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:08:28.153

看看那个答案：

[文本框光标不闪烁](https://stackoverflow.com/questions/8010272/textbox-cursor-is-not-blinking)

就像你说的，也许你必须将焦点设置在键盘上

# asp.net - 将我自己的表关联到 SqlMembership 中的 userProfile 表没有按预期工作

> ID：15384105
> 
> 赞同：1
> 
> 时间：2013-03-13T11:32:35.637
> 
> 标签：asp.net, asp.net-mvc-4, sqlmembershipprovider

我有这个表名为`Person`：FirstName,LastName,BirthDate,UserId(FK,int,not null)

`userId`字段与 SqlMembership 的 userProfile 表联合

和其他 2 个名为的表`Category`，`News`除了 SqlMembership 表之外，例如`UserInRole,...`在数据库中

我创建了一个 .edmx 文件并将我自己的表（类别、新闻、人员）添加到它。因为我的方法是首先使用数据库。

现在我除了获得当前登录用户外，我可以访问它的相关内容`person`：

```
if (Request.IsAuthenticated)
        {
            var context = new UsersContext();
            var user = context.UserProfiles.SingleOrDefault(u => u.UserName == "asma");
            ViewBag.fullName= user.person.FirstName+' '+user.person.LastName; //ERROR
        } 
```

但是当我编写`user.`智能感知时，只给了我 2 个字段：UserId 和 UserName

哪里`user.person....`

另一方面，我无法添加`UserProfile`到我的 .edmx 文件。添加`UserProfile`到 .edmx 文件会导致[“MVC4 重复的 UserProfile 表”问题](https://stackoverflow.com/questions/14170339/mvc4-duplicated-userprofile-table)

我的错是什么？将我自己的表添加到由 SqlMembership 创建的数据库中？

# ssis - 在 SSIS 中执行 DFT 时，Row Count Transformation 设置的变量值是否生效？或条件拆分可以正确读取变量？

> ID：15384108
> 
> 赞同：2
> 
> 时间：2013-03-13T11:32:43.683
> 
> 标签：ssis, rowcount, dataflowtask, script-component

我有一个 SSIS 包，其中 1 条记录（硬编码）流经。

![在此处输入图像描述](../Images/8490c30e20f9c5e0c68c1558f1e38d40.png)

我在 DFT 范围内有变量。

![在此处输入图像描述](../Images/2a0dfdc5436ef382189e432eb3314da7.png)

我使用行计数转换为变量赋值。

![在此处输入图像描述](../Images/68e6729c57ffba060a7a48fb3a867bae.png)

该值应该是 1 我通过使用脚本组件来验证它。

```
 public override void PostExecute()
  {
    System.Windows.Forms.MessageBox.Show(ReadWriteVariables[0].Value.ToString());
    base.PostExecute();
    /*
      Add your code here for postprocessing or remove if not needed
      You can set read/write variables here, for example:
      Variables.MyIntVar = 100
    */
  } 
```

我通过条件拆分转换中的条件寻找零条件。

![在此处输入图像描述](../Images/10c34b2a7a277523dc8ae362db495e3b.png)

奇怪的是，它满足等于零条件 whrease 我认为它应该具有值 1。甚至通过脚本组件的 Messagebox 显示值 1。

![在此处输入图像描述](../Images/2f596eb72ee5c0011221e5f57a3e7f16.png)

可能是什么原因？变量中的值是否仅在 DFT 结束时实现或条件拆分在读取正确值或其他我无法想出的问题时出现问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:48:39.187

`variable`在 a 中分配的值`data flow task`不能`split transformation`在 Data Flow 任务中或以后使用。`populated`一旦 DFT 得到，这些值通常会得到`completed`。

```
Variable values does not update during the execution of Data Flow task 
```

即使您能够在执行后或执行前事件中查看`value 1`或设置其他值以`Variable`从脚本转换中获取，这些值也仅在执行后生效`DFT`

因此，更新后的值可以用于优先约束或控制流中的其他任务。

阅读[这篇](http://microsoft-ssis.blogspot.in/2011/02/how-to-skip-trailer-records.html)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T14:33:20.800

或者，您可以使用 RANK 函数作为列之一，后者使用带 max 函数的条件拆分来获取所选行数（直接为行数）。接下来，您可以在插入最终目的地之前使用 Copy 列并删除 RANK 列。希望这可以帮助！

# android - 外部/内部存储查看文件

> ID：15384113
> 
> 赞同：1
> 
> 时间：2013-03-13T11:32:45.797
> 
> 标签：android, file, file-io

我让我的应用程序将文件写入“下载”文件夹（只是一些文本，内容无关紧要）。使用文件管理器应用程序，我可以查看文本文件并查看它。然后我将 Nexus 7 平板电脑插入 PC 并在 Windows 资源管理器中导航到平板电脑。“下载”文件夹是空的，我将图像文件放入“下载”文件夹中只是为了在其中放置一个文件。我回到平板电脑上的文件管理器应用程序，现在我可以看到从应用程序写入的图像文件和文本文件。

就 Windows 资源管理器而言，“下载”文件夹中只有 1 个文件，文件管理器应用程序显示有 2 个文件。如果我在 Windows 上创建一个同名文件并将其放入“下载”文件夹，它将覆盖从应用程序创建的文本文件。如果我从应用程序重新创建文本文件，它将覆盖我在 Windows 上创建的文件。

谁能告诉我为什么会这样？为什么我不能“看到”文件？我`-rw`对文件有权限...

（我还在文件夹首选项中完成了整个“显示隐藏文件”的操作）。

# android - 使用 SurfaceView 防止在画布之外绘图

> ID：15384118
> 
> 赞同：5
> 
> 时间：2013-03-13T11:33:01.153
> 
> 标签：android, android-canvas, surfaceview

有没有办法防止绘制超出`Canvas`in边界的对象部分，如位图或路径`SurfaceView`？

当我逐渐将对象缩放到超过`Canvas`' 大小时，尤其是在油漆模糊的情况下，它会减慢到静止状态，我必须等待几秒钟才能恢复控制 - 它没有响应。我通过在屏幕上移动手指来缩放对象；如果我做得太快并按比例放大，那么它真的会减慢绘图速度。

使用普通画布时我没有同样的问题`View`，所以不知道是什么让它变慢了。就好像`SurfaceView`反应太快，然后变得拥挤。

因此，改进这一点的一个想法是防止在画布外绘制，但不确定是否`SurfaceView`有这样的剪辑选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:23:18.467

我不确定画布是否真的会绘制超出尺寸的东西，这不是一件聪明的事情。不过，您可以使用它`clipRect()`来定义剪辑区域。

您是否应用了每帧模糊之类的过滤器？那可能相当昂贵。

另外，您是否在触摸事件上触发绘图调用？触摸事件的生成速度非常快，并且会淹没渲染线程。您可能希望以较慢的速度接收事件：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/Oe6k1_bm38o](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Oe6k1_bm38o)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:01:11.120

一种解决方案可能是使用`Canvas` `.drawBitmap`接受源`Rect`/`RectF`参数的方法之一，以便仅`Bitmap`呈现可见部分。我刚刚在我自己的项目中完成了这项工作，以提高`SurfaceView`性能，我有几个`Bitmaps`有时只能部分查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:16:03.443

当您将 SurfaceView 放在 Activity 的布局上时，您可以使用填充属性，例如：

```
android:paddingLeft="20dp"
android:paddingTop="20dp"
android:paddingRight="20dp"
android:paddingBottom="20dp" 
```

它是这样工作的：

![填充描述](../Images/1329398a91fda6c44c42dcb496918a72.png)

要绘制画布，您可以使用以下方法动态绘制边框：

```
canvas.drawLine(1,1,canvas.getWidth()-1,1);  //Top border
canvas.drawLine(1,1,1,canvas.getHeight()-1);  //Left border
canvas.drawLine(1,canvas.getHeight()-1,canvas.getWidth()-1,canvas.getHeight()-1);  //Bottom border
canvas.drawLine(canvas.getWidth()-1,1,canvas.getWidth()-1,canvas.getHeight()-1);  //Right border 
```

# zend-framework2 - 动态下拉进入zf2？

> ID：15384132
> 
> 赞同：0
> 
> 时间：2013-03-13T11:33:55.863
> 
> 标签：zend-framework2

我想在 zf2 中制作的项目中放置一个下拉列表...我浪费了一整天，但我只有一个静态下拉列表，而不是动态下拉列表。谁能帮我解决这个问题？？

用户窗体.php

```
$this->add(array(
            'name' => 'group_name',
            'type' => 'select',  
            'attributes' => array(
                'id'=>'group_name',
                'class'=>'large',
                'options' => array('1=>php','2'=>'java'),
            ),
            'options' => array(
                'label' => '',
            ),
        )); 
```

提前感谢您的宝贵回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:26:48.057

这就是我所做的：

在我的表单构造函数中

```
 $this->add(array(
        'type' => 'Zend\Form\Element\Select',
        'name' => 'color',
        'options' => array(
            'empty_option' => 'Select a Color',
            'value_options' => self::getColors(),
            'label' => 'Color',
        ),
    )); 
```

在表单类中，我创建了这个方法：

```
public static function getColors() {
    // access database here
    //example return
    return array(
        'blue' => 'Blue',
        'red'  => 'Red',
    );
} 
```

在我看来脚本：

```
 <div class="form_element">
        <?php $element = $form->get('color'); ?>
        <label>
            <?php echo $element->getOption('label'); ?>
        </label>
        <?php echo $this->formSelect($element); ?>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:37:39.073

尝试这个：

```
$this->add(array(
    'name' => 'group_name',
    'type' => 'select',  
    'attributes' => array(
        'id'=>'group_name',
        'class'=>'large',
    ),
    'options' => array(
        'label' => '',
        'value_options' => array(
            '1' => 'php', 
            '2' => 'java'
        ),
    ),
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:55:01.393

从抽象的层面考虑。

*   你有一个表格
*   表单需要来自外部的数据

所以最终你的 Form 有一个`Dependency`. 由于我们从[官方文档](http://zf2.readthedocs.org/en/latest/tutorials/quickstart.di.html)中了解到，有两种类型的`Dependency-Injection`aka `DI`。Setter 注入和构造函数注入。就个人而言（！）我在这些情况下使用一种或另一种：

**如果依赖项是功能正常工作的绝对要求，则使用**构造函数注入****

 ****如果依赖项或多或少是可选的以扩展已经工作的东西，则使用**Setter-Injection****

 **对于您的表单，它是必需的依赖项（因为没有它，就没有填充的 Select-Element），因此我将为您提供构造函数注入的示例。

您的控制器的一些操作：

```
$sl   = $this->getServiceLocator();
$dbA  = $sl->get('Zend\Db\Adapter\Adapter');
$form = new SomeForm($dbA); 
```

这就是表格的全部内容。人口现在发生在您的表单中。这只是一个例子，可能需要一些微调，但你会明白的：

```
class SomeForm extends \Zend\Form
{
    public function __construct(\Zend\Db\Adapter\Adapter $dbA)
    {
        parent::__construct('my-form-name');

        // Create all the form elements and stuff

        // Get Population data
        $popData = array();
        $result = $dbA->query('SELECT id, title FROM Categories', $dbA::QUERY_MODE_EXECUTE)->toArray();
        foreach ($result as $cat) {
            $popData[$cat['id'] = $cat['title'];
        }

        $selectElement = $this->getElement('select-element-name');
        $selectElement->setValueOptions($popData);
    }   
} 
```

**重要提示**：我对上述代码一无所知`Zend\Db`，仅用于我认为[文档](http://zf2.readthedocs.org/en/latest/modules/zend.db.sql.html)将如何工作！这可能是需要一些优化的部分。但总而言之，您将了解它是如何完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-06T13:03:30.953

刚遇到同样的问题，不得不查看 zf2 源代码。这是一个更多的OOP解决方案：

在表单构造函数内部：

```
 $this->add(array(
        'name' => 'customer',
        'type' => 'Zend\Form\Element\Select',
        'attributes' => array(
            'options' => array(
                0 => 'Kunde',
            )
        ),
        'options' => array(
                'label' => 'Kunde'
    ))); 
```

控制器内部：

```
 $view->form = new SearchForm();
    $customers = $view->form->get('customer')->getValueOptions();
    $customers[] = 'Kunde1';
    $customers[] = 'Kunde2';
    $customers[] = 'Kunde3';
    $customers[] = 'Kunde4';
    $view->form->get('customer')->setValueOptions($customers); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-24T10:07:39.020

在您的控制器中，您可以执行以下操作；

在我的第一个示例中，假设您有一个组表。然后我们将获取组表中的所有数据；我们需要在选择选项中显示 id 和 name；

```
public function indexAction()
{
    $groupTable = new GroupTable();
    $groupList = $groupTable->fetchAll();

    $groups = array();
    foreach ($groupList as $list) {
        $groups[$list->getId()] = $list->getName();
    }    

    $form = new UserForm();
    $form->get('group_name')->setAttributes(array(
        'options' => $groups,   
    )); 
} 
```

或者

在本例中，组列表是硬编码的；

```
public function indexAction()
{
    $groupList = array('1' => 'PHP', '2' => 'JAVA', '3' => 'C#');

    $groups = array();
    foreach ($groupList as $id => $list) {
        $groups[$id] = $list;
    }    

    $form = new UserForm();
    $form->get('group_name')->setAttributes(array(
        'options' => $groups,   
    )); 
} 
```

然后在您的视图脚本中；

```
<?php 
    $form = $this->form;
    echo $this->formRow($form->get('group_name')); 
?> 
```

或者你可以对一个控制器助手，你可以查看这个链接[http://www.resourcemode.com/me/?p=327](http://www.resourcemode.com/me/?p=327)****

# amazon-s3 - 由于本地机器的时钟偏差，S3 RequestTimeTooSkewed 错误

> ID：15384142
> 
> 赞同：5
> 
> 时间：2013-03-13T11:34:21.950
> 
> 标签：amazon-s3, amazon-ec2, ntp

在我的本地机器上工作时，我一直在尝试上传图像（它会立即将它们上传到亚马逊服务器），但它给了我一个错误（使用 PHP S3 类的 RequestTimeTooSkewed 错误），我可以弄清楚这是一个时区问题并且 S3 使用当前时区来验证请求，我是否需要在 EC2 服务器上设置或更改任何配置才能在本地上传图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:48:40.363

将您的时钟与 NTP 时间服务器同步。所有现代操作系统都支持这一点。

无论您**从**哪里上传，都是需要同步的机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T12:48:11.777

检查您的 ec2 实例上的时间同步。由于虚拟机的性质，时钟可能会随着时间的推移而出现偏差。S3 不允许超过几分钟的请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-04T01:51:54.170

从虚拟机运行代码，必须`sudo ntpdate ntp.ubuntu.com`同步，它工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-27T23:14:10.317

重启 ntp 服务通常可以解决这个问题：

```
sudo service ntpd restart 
```

另请参阅：[如何使用 ntp 强制时钟更新？](https://askubuntu.com/questions/254826/how-to-force-a-clock-update-using-ntp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-28T04:06:50.127

sudo ntpdate -s time.nist.gov

这会将您的本地机器时间设置为当前时间......您可以在本地时间正确后更改您的时区。

# python - 根据索引减少列表

> ID：15384143
> 
> 赞同：2
> 
> 时间：2013-03-13T11:34:22.120
> 
> 标签：python, list, reduce

假设我有 3 个列表

```
x1 = [1, 2, 3, 4]
x2 = [2, 3, 4, 5]
x3 = [3, 4, 5, 6] 
```

我想根据索引减少这个列表列表。

我们可以通过对元素求和来减少这种情况：-`x1[i] + x2[i] + x3[i]`

```
out = [6, 9, 12, 15] 
```

或相乘：-`x1[i] * x2[i] * x3[i]`

```
out = [6, 24, 60, 120] 
```

python中实现这一目标的最佳方法是什么？

编辑：

有没有办法为列表列表执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T11:37:20.623

您可以使用`zip`和`sum`功能。

```
out = [sum(i) for i in zip(x1, x2, x3)] 
```

对于乘法，您可以使用`reduce`（对于 Python 2）

```
out = [reduce(lambda a, b: a * b, i) for i in zip(x1, x2, x3)] 
```

您可以`reduce`从`functools`Python 3 中获取。

但是，您也可以定义自己的乘法函数，然后在列表推导中使用该函数。

```
def mult(lst):
    mul = 1
    for i in lst:
        mul *= i
    return mul

out = [mult(i) for i in zip(x1, x2, x3)] 
```

如果您有一个列表列表，`lst = [[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6]]`那么您需要做的就是替换`zip(x1, x2, x3)`为`zip(*lst)`. 运算符基本上解包列表的`*`元素并将它们作为单独的参数提供给函数。

例如：

```
out = [sum(i) for i in zip(*lst)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:00:08.837

使用`zip(*data)`：

```
data = [
[1, 2, 3, 4],
[2, 3, 4, 5],
[3, 4, 5, 6]
]

print [sum(col) for col in zip(*data)]

import operator
def product(data):
    return reduce(operator.mul, data)

print [product(col) for col in zip(*data)] 
```

如果你想用非常大的数据进行计算，我建议你使用 NumPy：

```
import numpy as np

print np.sum(data, axis=0)
print np.product(data, axis=0) 
```

# c# - WMV 文件在 WP8 模拟器上播放 - 无法在设备上播放

> ID：15384146
> 
> 赞同：1
> 
> 时间：2013-03-13T11:34:39.243
> 
> 标签：c#, windows-phone-8, windows-phone, wmv, windows-phone-8-emulator

我有一个 WMV 文件的 url，我想`MediaPlayerLauncher`在我的应用程序中使用它。这在模拟器中工作得很好，但是当我在我的设备上尝试这个，运行与模拟器中完全相同的代码时，我收到消息“对不起，我们无法在你的手机上播放这个文件”。我的手机是HTC 8x。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:41:34.857

模拟器的视频编解码器支持与设备不完全匹配。

此外，根据手机上的确切芯片组，任何特定设备可能不支持特定音频或视频文件中的编解码器。[您可以在MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087%28v=vs.105%29.aspx)上找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:23:32.327

这对我有用：

当您尝试从您的应用程序播放 AudioTrack 并且根本没有响应（甚至没有生成异常）时，请从手机的 Music+Videos 应用程序（歌曲或播客）播放一些内容，然后再次尝试您的应用程序。

（我仍在使用 BackgroundAudioPlayer 调试这个问题......我想我可能正在向它传递一个尚未完成下载的 ISO 存储中的文件名。AudioPlayer 然后在其上阻塞，然后我无法检测到并且恢复。我会再次在这里发布任何进展。）

# python - 在 Python 中杀死任务

> ID：15384147
> 
> 赞同：1
> 
> 时间：2013-03-13T11:34:43.167
> 
> 标签：python

这是我使用 PyInstaller 编译 python 代码的程序，无需手动操作：

```
prog = raw_input('File to compile: ')
shutil.copy(prog,'C:\Users\Hydro\Desktop\Projects\Python\PyInstaller\\'+prog)
os.chdir('PyInstaller\\')
subprocess.call(['python', 'PyInstaller.py', prog, '--onefile'])
x = os.getpid()
print x
os.kill(x,9)
var = prog.split('.')
new_var = var[0]
os.chdir(new_var+'\\'+'dist')
shutil.copy(new_var+'.'+'exe','C:\Users\Hydro\Desktop\Projects\Python')
shutil.rmtree('C:\Users\Hydro\Desktop\Projects\Python\PyInstaller\\'+new_var)
os.remove('C:\Users\Hydro\Desktop\Projects\Python\PyInstaller\\'+prog)
raw_input('File Compiled. Press Enter to Exit') 
```

这不起作用，因为一个进程正在使用我试图删除的目录。

我在 PyIRC 上问过为什么，但无济于事。我也尝试过杀死 PID，但我杀错了。

谁能帮助我或告诉我为什么这不允许我在编译后删除目录？所以我可以想出一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:05:52.103

似乎您的应用程序是使用您要删除的目录的应用程序。通过调用`os.chdir()`，您将在删除目录之前将当前工作目录更改为不同的目录：

```
org_dir = os.getcwd()

... # your stuff

os.chdir(org_dir)
# delete the dir 
```

# c# - IIS 以纯文本形式提供自定义错误页面，没有内容类型标题

> ID：15384148
> 
> 赞同：16
> 
> 时间：2013-03-13T11:34:43.613
> 
> 标签：c#, iis, asp.net-mvc-4, error-handling

**UPD**：这是[错误处理的完整解决方案](http://tech.trailmax.info/2013/08/error-handling-in-mvc-and-nice-error-pages/)

我有普通的 MVC4 网络项目。没有添加，没有删除，只是在 Visual Studio 中创建了一个新项目。

在`web.config`我添加了自定义错误页面处理程序：

```
<customErrors mode="On" defaultRedirect="~/Content/Error.htm" redirectMode="ResponseRewrite" /> 
```

`~/Content/Error.htm`文件是：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>OOPS! Error Occurred. Sorry about this.</title>
</head>
<body>
    <h2>OOPS! Error Occurred</h2>
</body>
</html> 
```

每当我在网站上收到 404 错误时，Error.htm 在 Firefox 和 Chrome 中以纯文本形式提供：

![HTML 显示为纯文本](../Images/9a0903379167ba54fef8d93502957ae4.png)

Fiddler 说错误页面没有`content-type`标题，这导致浏览器将页面呈现为纯文本：

![无内容类型标头](../Images/df21c754d6b257d2f83adb8f376d62d7.png)

**有没有办法强制带有`content-type`标头的 IIS 服务器错误页面？**

ps 实际问题出在一个复杂的 MVC4 项目中，它在 Global.asax 中有自己的错误处理。但我发现有些错误不会通过 ASP 管道，仅由 IIS 处理。就像[网址末尾的点](https://stackoverflow.com/questions/429963/the-resource-cannot-be-found-error-when-there-is-a-dot-at-the-end-of-the-ur)一样。[< httpErrors />](https://stackoverflow.com/a/6661699/809357)的解决方案确实提供了正确的响应，但是我们在 Global.asax 中的自定义错误处理，Application_Error() 没有以这种方式调用。

**UPD**看来我无法赢得这场战争。IE 显示正确呈现的 html，Firefox 和 Chrome 显示为纯文本。当我切换到纯文本时，Firefox 和 IE 正确显示空白，IE 吞下空白并尝试呈现 html。如果我尝试将图像作为错误页面提供，Firefox 和 Chrome 会显示图像。IE 显示： ![IE9 即将破解！](../Images/59139cd22b8ea0c5dcc4957d91b06ccb.png) Facepalm！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T21:24:33.043

对错误页面使用 .aspx 而不是 .htm（将 htm 重命名为 aspx）。

```
<customErrors mode="On" defaultRedirect="~/Content/Error.aspx" redirectMode="ResponseRewrite" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-22T23:12:14.090

显然，`<customErrors>`开始工作是一团糟。如果你决定使用它，Ben Foster 有一篇关于这个主题的精彩文章：http: [//benfoster.io/blog/aspnet-mvc-custom-error-pages](http://benfoster.io/blog/aspnet-mvc-custom-error-pages)

如果你想使用 .cshtml 页面，最好的办法可能是放弃`<customErrors>`并处理 Global.asax.cs 中的错误：

```
protected void Application_Error(object sender, EventArgs e)
{
    var exception = Server.GetLastError();
    if (exception != null)
    {
        Response.Clear();
        HttpException httpException = exception as HttpException;
        RouteData routeData = new RouteData();
        routeData.Values.Add("controller", "Error");
        if (httpException == null)
        {
            routeData.Values.Add("action", "Unknown");
        }
        else
        {
            switch (httpException.GetHttpCode())
            {
                case 404:               // Page not found.
                    routeData.Values.Add("action", "NotFound");
                    break;

                default:
                    routeData.Values.Add("action", "Unknown");
                    break;
            }
        }

        // Pass exception details to the target error View.
        routeData.Values.Add("Error", exception);
        // Clear the error on server.
        Server.ClearError();
        // Avoid IIS7 getting in the middle
        Response.TrySkipIisCustomErrors = true;
        // Ensure content-type header is present
        Response.Headers.Add("Content-Type", "text/html");
        // Call target Controller and pass the routeData.
        IController errorController = new ErrorController();
        errorController.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
    }
} 
```

当然，您还需要使用适当的方法和 .cshtml 视图添加一个 ErrorController。

```
public class ErrorController : Controller
{
    public ActionResult Index()
    {// your implementation
    }

    public ActionResult Unknown(Exception error)
    {// your implementation 
    }

    public ActionResult NotFound(Exception error)
    {// your implementation         
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-06T09:00:00.207

这显然是一个已知的错误，微软的建议与 spiatrax 将 htm/html 重命名为 aspx 的想法一致。就我而言，我还必须包括

```
<% Response.StatusCode = 400 %> 
```

在 .aspx 页面中。

更多信息：[http ://connect.microsoft.com/VisualStudio/feedback/details/507171/](http://connect.microsoft.com/VisualStudio/feedback/details/507171/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T14:45:32.163

我在部分下的自定义标题上添加了内容类型标题`system.webServer/httpprotocol`并修复了它。

```
<customHeaders><remove name="Content-Type" /><add name="ContentType"value="text/html" /></customHeaders> 
```

# c# - 哪些控件用于 WPF 中的日期输入和时间输入

> ID：15384152
> 
> 赞同：0
> 
> 时间：2013-03-13T11:34:49.047
> 
> 标签：c#, wpf, xaml, controls

在我的 WPF 应用程序中，我希望我的用户可以输入一个日期，并且，**可选**地输入一个时间。

```
12/03/2013       11:20 
```

我可以在 WPF 中使用 DatePicker 作为日期，好的，但是时间呢？一个简单的文本框？

请问您有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:39:22.480

您可以使用在此地址扩展的库 WPF Toolkit：

[http://wpftoolkit.codeplex.com/](http://wpftoolkit.codeplex.com/)

你有一个 TimePicker / DateTimePicker 等所有你想要的

# android - Tabhost 可以用 Android 中的图像代替吗？

> ID：15384156
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:35:08.407
> 
> 标签：android

如何设置看起来像我设置了 Tab 主机的图像？请帮助我想要与没有 Tabhost 的 Tab 主机相同的外观和感觉...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:42:40.743

**你的问题不清楚。**

您可以在线性布局中使用按钮并为其设置背景图像和 setOnClickListener 并在单击按钮时调用活动。

如果您想将图像添加到 tabhost，您可以参考此链接：

[http://www.mkyong.com/android/android-tablayout-example/](http://www.mkyong.com/android/android-tablayout-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:39:01.067

创建一个带有按钮的 LinearLayout，将您的图像作为显示，并创建一个带有其下方每个选项卡内容的 viewflipper...每个按钮都会使相应的视图处于活动状态。这看起来像 tabhost 但不使用它。

# javascript - 谷歌仪表板可以按列标题过滤吗

> ID：15384160
> 
> 赞同：0
> 
> 时间：2013-03-13T11:35:22.913
> 
> 标签：javascript, google-apps-script, google-sheets

我要做的是创建一个仪表板，用户可以在其中按列中的数据和列本身进行过滤。例如，以下数据显示了此人的姓名及其在特定周内的表现。

```
Name      WC 11.02.2013    WC 18.02.13

Person1   10               12
Person2    6                4
Person3   18                1 
```

我对 Javascript 和谷歌电子表格还很陌生，但设置仪表板并按列条目过滤并不难：

```
var nameFilter = Charts.newCategoryFilter()
  .setFilterColumnLabel("Name")
  .build(); 
```

但我完全坚持如何按列过滤。我的目标是让用户（来自作为 Web 应用程序部署的仪表板）能够按人名和日期范围显示数据（图表等会自动更改）。IE Person 1 在 WC 18.02.13 的表现（有很多日期）

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:08:02.460

您没有显示代码，但很可能您正在从电子表格数据创建一个[DataTable](https://developers.google.com/apps-script/reference/charts/data-table)`.setDataTable()` ，并使用.

您需要做的是定义一个 DataView，它仅包含您感兴趣的列的子集。以下是仅显示“名称”和第一个日期列的方式：

```
var dataViewDefinition = Charts.newDataViewDefinition().setColumns([0, 1]);

var nameFilter = Charts.newCategoryFilter()
  .setFilterColumnLabel("Name")
  .setDataViewDefinition(dataViewDefinition)
  .build(); 
```

我不认为您可以`dataViewDefinition`即时更改（尚未尝试过），但或者，您可以基于列表的特定列图表`add()`。`remove()`

# python - 2to3 范围（...）-> 列表（范围（...））

> ID：15384162
> 
> 赞同：2
> 
> 时间：2013-03-13T11:35:26.223
> 
> 标签：python, list, python-2to3

我知道 python 2to3 全部更改`xrange`为`range`，我认为这没有任何问题。我的问题是它如何`range(...)`变成`list(range(...))`：它是愚蠢的，只是盲目地搜索并替换它们，还是它足够聪明，可以判断何时不需要列表并将其保留为`range`更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:40:01.477

我不知道它到底有多智能，但它肯定不会添加`list()`到*每个* `range()`.

例如，以下内容：

```
print(range(10)) 
```

改为：

```
print(list(range(10))) 
```

但是，以下内容：

```
for el in range(10):
  print(el) 
```

保持不变。

这清楚地表明它比盲目的搜索和替换更复杂。

# json - 设置 FOSRestBundle 异常 _format

> ID：15384165
> 
> 赞同：1
> 
> 时间：2013-03-13T11:35:31.537
> 
> 标签：json, exception, symfony, fosrestbundle

我在我的 Symfony 2.3 项目中使用 FOSRestBundle。

我无法为响应异常设置 _format。在我的 config.yml 我有：

```
twig:
    exception_controller: 'FOS\RestBundle\Controller\ExceptionController::showAction' 
```

默认返回是 HTML 格式，但是可以设置`_format = json`返回异常吗？

我有多个bundle，但只有一个是RestBundle，所以其他的bundle需要正常设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:49:40.947

您可以手动编写路线并在`_format`此处设置如下：

```
acme_demo.api.user:
    type: rest
    pattern: /user/{username_canonical}.{_format}
    defaults: { _controller: 'AcmeDemoBundle:User:getUser', username_canonical: null, _format: json }
    requirements:
        _method: GET 
```

**编辑**：或者您可以编写自己的异常处理程序并处理您需要做的任何异常：

```
// src/Acme/DemoBundle/EventListener/AcmeExceptionListener.php
namespace Acme\DemoBundle\EventListener;

use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpKernel\Exception\HttpExceptionInterface;

class AcmeExceptionListener
{
    public function onKernelException(GetResponseForExceptionEvent $event)
    {
        // do whatever tests you need - in this example I filter by path prefix
        $path = $event->getRequest()->getRequestUri();
        if (strpos($path, '/api/') === 0) {
            return;
        }

        $exception = $event->getException();
        $response = new JsonResponse($exception, 500);

        // HttpExceptionInterface is a special type of exception that
        // holds status code and header details
        if ($exception instanceof HttpExceptionInterface) {
            $response->setStatusCode($exception->getStatusCode());
            $response->headers->replace($exception->getHeaders());
        }

        // Send the modified response object to the event
        $event->setResponse($response);
    }
} 
```

并将其注册为监听器：

```
# app/config/config.yml
services:
    kernel.listener.your_listener_name:
        class: Acme\DemoBundle\EventListener\AcmeExceptionListener
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException } 
```

[如何创建事件监听器](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T00:28:14.253

当向 FosRest 控制器发出请求时，捕获 symfony 异常并返回 json 的最简单方法如下：

```
# app/config/config.yml
fos_rest:
    format_listener:
        rules:
            - { path: '^/api/', priorities: ['json', 'xml'] }
            - { path: '^/', stop: true } 
```

# javascript - Codekit 忽略 .jshintrc

> ID：15384170
> 
> 赞同：3
> 
> 时间：2013-03-13T11:35:39.530
> 
> 标签：javascript, amd, jshint, codekit

现在很常见，我使用 AMD 模块来组织我的 JS。所以我在每个项目中相应地配置了一个 .jshintrc ：

```
{
    "predef": [
        "define",
        "require"
    ]
} 
```

在命令行上，运行 jshint 会给出清晰的输出。然而，Codekit 似乎在运行时忽略了 jshint，抱怨“定义”等。

如何让 Codekit 尊重 .jshintrc 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-11T23:01:57.543

`Custom Globals`是用于 JSHint 和 JSLint 的 CSV 列表。

它位于此处：

`CodeKit.app`→ `[Select Your Project]`→ `Project Settings`/ `[Gear Icon]`→ `Syntax Checkers`→`Custom Globals`

你的看起来像这样：

![CodeKit -> 项目设置 -> 语法检查器 -> 自定义全局](../Images/c4fb571ce9484995443079dc99768ac2.png)

我用 " `app, angular`" 对其进行了测试，它就像一个魅力。

# sql - IPv4 地址的 PostgreSQL 字段数据类型

> ID：15384179
> 
> 赞同：9
> 
> 时间：2013-03-13T11:35:57.173
> 
> 标签：sql, postgresql, ip

PostgreSQL 中 IPv4 地址的正确数据类型是什么？

听说过`inet`，但没用过。

我需要执行`SELECT`类似的查询`SELECT ... WHERE ip = '99.88.99.88'`，它应该支持人类可读格式的输出（人类可读我的意思是'99.88.99.88'）。

如果能够`SELECT`通过那里的子网访问 IP 地址，那就太好了。

感谢您提前提出任何建议！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T11:42:08.013

内置`cidr`和`inet`类型将做你想做的事并提供合适的运算符：

```
regress=> SELECT '192.168.1.19'::inet << '192.168.1.0/24'::cidr;
 ?column? 
----------
 t
(1 row) 
```

[请参阅有关网络数据类型运算符和函数](http://www.postgresql.org/docs/current/static/functions-net.html)以及[网络](http://www.postgresql.org/docs/current/static/datatype-net-types.html)数据类型的 PostgreSQL 文档。

`cidr`为和`inet`类型提供了有限的索引支持；特别是，“范围内的地址”类型查询至少在地址为常数的情况下会转换为范围查询。看到[这个（相当旧的）线程](http://www.postgresql.org/message-id/CC17A70CE630D7119C520090278444C81248B7@mail1.gomez.com)。

另请参阅 Chris 的观点`ip4r`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:39:52.600

[http://www.postgresql.org/docs/current/static/datatype-net-types.html](http://www.postgresql.org/docs/current/static/datatype-net-types.html)具有`inet`类型字段它只是您需要的。

> 运算符 <<、<<=、>> 和 >>= 测试是否包含子网。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T12:32:37.663

我想补充一点，内置类型非常强大，这就是您应该开始的地方。但是，如果您需要 GIN 索引，请查看[http://pgfoundry.org/projects/ip4r/](http://pgfoundry.org/projects/ip4r/)

如果您需要存储 CIDR 块并确保没有块包含任何其他块，则可能是 ip4r 的一个案例（我开始使用它的原因）。由于这需要 GIN 索引，因此您必须使用 ip4r 而不是内置类型。

# c# - CloudConfigurationManager.GetSetting 返回 null

> ID：15384186
> 
> 赞同：24
> 
> 时间：2013-03-13T11:36:09.353
> 
> 标签：c#, azure, app-config, azure-storage

按照[此处](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)的说明，我有：

```
var connectionString = CloudConfigurationManager.GetSetting("StorageConnectionString"); 
```

但是，这`connectionString`是`null`我的 app.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <connectionStrings>
    <add name="StorageConnectionString"
         connectionString="DefaultEndpointsProtocol=https;AccountName=storage;AccountKey=key" />
  </connectionStrings>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Data.OData" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.0.0" newVersion="5.2.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-05T19:55:43.443

有同样的问题。不要使用连接字符串，而是使用 configuration->appSettings->add 像这样的键...

```
<configuration>
    <appSettings>
        <add key="StorageConnectionString" value="[ConnectionStringHere]" />
    </appSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-22T15:03:26.820

根据 MSDN [http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.cloudconfigurationmanager.aspx中的文档](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.cloudconfigurationmanager.aspx)

CloudConfigurationManager 只能读取 appSettings 标签中的配置设置。如果您的配置设置在不同的标签中，调用 GetSetting 将返回 Null。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-14T09:58:57.553

好吧，即使评论不合适，这也行得通，因为我确实有 CloudConfigManager 的参考：

> 如果您正在创建一个不引用 Microsoft.WindowsAzure.CloudConfigurationManager 的应用程序，并且您的连接字符串位于 web.config 或 app.config 中，如上所示，那么您可以使用 ConfigurationManager 来检索连接字符串。您需要在项目中添加对 System.Configuration.dll 的引用，并为其添加另一个命名空间声明：

```
using System.Configuration;

CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
    ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-05-21T01:46:21.743

我有同样的问题。我已更新项目以使用 Azure SDK 2.0。我为我的 Web 和辅助角色更新了 NuGet 包，但 Visual Studio 中的 Azure 项目仍使用旧版本。

要解决此问题，请右键单击您的 Azure 项目并选择属性。在应用程序选项卡下，您将看到一个用于更新您的 Azure SDK 的按钮。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-13T12:09:30.917

确保您的所有参考文献都是同步的。有 2012-06 库和 2012-10 将它们设置为 Copy Local = true 并验证 SDK 版本。我处理了完全相同的事情，让我发疯。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-07T16:34:42.257

当我将 Azure SDK 升级到 2.2 版时，这发生在我身上。

为了修复它，我更改了 packages.config 以使用更新版本的 Azure ConfigurationManager。

```
<package id="Microsoft.WindowsAzure.ConfigurationManager" version="2.0.1.0" targetFramework="net45" /> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-05-05T09:59:41.467

根据我的理解，我想指出 CloudConfigurationManager.GetSetting 如果您的云服务用完，将会查看 web.config。如果您在云服务中，它将查看 cscfg。

请参考此 [链接。](https://stackoverflow.com/questions/20432586/azure-webrole-cloudconfigurationmanager-getsetting-returns-null/30049598#30049598)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-06T18:29:38.237

按照本教程：

您可以像这样获得配置设置：

```
RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString") 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-22T09:16:29.140

我在将 Azure SDK 从 2.0 升级到 2.2 后得到了这个。我能够通过以下方式修复：

1.  右键单击 Azure 项目并选择属性。根据应用程序选项卡更新 Azure SDK。（感谢rattrick的回答）。
2.  右键单击以管理 NuGet 包。在左侧单击更新并更新 WindowsAzure.ConfigurationManager。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-09T09:22:11.137

我有同样的问题（两次）。即使在重新启动 Visual Studio 和重新启动 Azure 模拟器之后，CloudConfigurationManager.GetSetting("SettingName") 也会返回 null。

我确信它以前可以工作，并且我拥有最新的 SDK。

所以解决方案是重新启动我的电脑，然后 CloudConfigurationManager.GetSetting("SettingName") 返回正确的值。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-03T16:17:54.550

在重新访问我的 Azure 解决方案（Web + Worker 角色）以将其更新为`Azure 2.5`. 查看 的帮助`CloudConfigurationManager.GetSetting`，如果它在云平台 (Azure) 下运行，它会从 中读取`ServiceConfiguration.csfg`，如果作为`.net`Web 应用程序运行，则从应用程序或`web.config`.

所以我的解决方法是简单地将启动项目改回 Azure 云项目，而不是 Web 项目。
我得到空值，因为它托管在错误的平台上并且从`.config`没有设置的文件中读取。（呸！）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-11T08:52:47.270

这是一个旧线程，但如果上述方法无法解决问题，我想分享我的解决方案，然后确保在运行应用程序时 Azure Storage Emulator 正在运行；至少对我来说这发生了。对我来说，我必须创建一个类来处理这里提到的模拟器问题......

> [http://blog.simontimms.com/2013/08/28/configuration-settings-in-an-azure-worker-role/](http://blog.simontimms.com/2013/08/28/configuration-settings-in-an-azure-worker-role/)

```
class ConfigurationProvider
{
    private static string GetStorageConnectionString(string name)
    {
        try
        {
            return RoleEnvironment.GetConfigurationSettingValue(name);
        }
        catch (SEHException)
        {
            return System.Configuration.ConfigurationManager.ConnectionStrings[name].ConnectionString;
        }
    }

    public static string StorageConnectionString()
    {
        return GetStorageConnectionString("StorageConnectionString");
    }

    public static string DefaultConnection()
    {
        return GetStorageConnectionString("DefaultConnection");
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-10T20:22:34.997

我有非常相似的问题。我从 Azure SDK 2.0 更新到 2.2 - 在此过程中，我使用 NuGet 管理器将 Microsoft.WindowsAzure.Storage 更新到最新版本。PackageManager 自动将 Microsoft.WindowsAzure.Configuration 升级到 1.8.0.0。我无法运行它（它是为 .Net 2.0 设计的！？）。在我手动将所有引用设置为

*   Microsoft.WindowsAzure.Storage 2.1.0.0
*   Microsoft.WindowsAzure.Configuration 2.0.0.0

一切正常。

我认为这是因为 CloudConfigurationManager.GetSetting 加载程序集并调用函数（通过反射）的方式。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-07T09:46:46.897

将 Azure SDK 从 2.2 升级到 2.3 后，此处相同：

右键单击 Azure 项目选择属性。在“应用程序”选项卡中单击“升级...”（感谢 rattrick 的回答）。

然后还有一个错误需要解决：尝试在计算模拟器中运行 Azure 项目引发异常：未处理 System.Configuration.ConfigurationErrorsException 消息：Microsoft.WindowsAzure 中发生了“System.Configuration.ConfigurationErrorsException”类型的未处理异常。 ServiceRuntime.dll 附加信息： konnte nicht erstellt werden。

VS2013的“错误列表”窗口出现如下警告：

发现同一依赖程序集的不同版本之间存在冲突。在 Visual Studio 中，双击此警告（或选择它并按 Enter）以修复冲突；否则，将以下绑定重定向添加到应用程序配置文件中的“运行时”节点：C:\Program Files (x86)\MSBuild\12.0\bin\Microsoft.Common.CurrentVersion.targets 1635

我让 VS 解决了这个警告，一切正常。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-11-04T04:23:52.933

这对我有用...

```
using System.Configuration; 
```

...

```
var connectionString = ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-09-23T10:13:53.377

我有同样的问题。没有任何建议对我有用，但“问题”很简单。一个简单的人必须了解这个类是如何工作的。

它不会进入您`app.config`/`web.config`或您存储应用程序设置的任何位置。`CloudConfigurationManager`与`ServiceConfiguration.*.cscfg`和一起使用`ServiceConfiguration.csdef`。.csdef 必须包含设置的定义，但不能包含该`ConfigurationSettings`部分下的值。设置本身位于 .cscfg 文件中（在同一部分但包括值；我想双重定义的原因是确保云和本地配置具有相同的设置）。

您可以通过在 Visual Studio 中右键单击您的角色并选择属性 -> 设置（如果是 StorageConnectionString，只需选择“您的订阅”，如果您的存储帐户连接到云服务）或手动编辑它们来设置这些. 如果你搞砸了设置，你会得到一个感叹号图标。

就那么简单。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2015-06-29T15:23:51.293

在安装 Azure SDK 2.6（之前工作）后传递文字字符串时也得到一个空值。

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["AzureStorage"].ConnectionString); 
```

替换了文字字符串，它工作正常。

```
 string connectionStr = "AzureStorage";

   var connectionstring = ConfigurationManager.ConnectionStrings[connectionStr].ConnectionString;

   CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionstring); 
```

# asp.net - 是否可以同时使用同一存储库的多个分支？

> ID：15384191
> 
> 赞同：1
> 
> 时间：2013-03-13T11:36:19.447
> 
> 标签：asp.net, git, iis-7, visual-studio-2012

我在 Github 上托管了一个 Web 应用程序，并且正在开发代码库的三个不同分支。

目前，我已将代码签出到一个目录，该目录映射到它在我的机器上托管的 IIS 文件夹。当我切换分支时，VS 中的项目会使用该分支的代码库重新加载，并且 IIS 中的站点也会更改为运行当前分支的代码。

分支的切换似乎是机器范围内的事情，因此无法在浏览器窗口中并排比较两个分支的输出。回到我的 Subversion/TFS 时代，我只会检查不同的目录并将每个目录都交给 IIS 以作为不同的站点运行。

是否有一种解决方法可以让我使用 Git 和 VS 做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:48:18.753

您可以在 Unix 下执行此操作（需要带有符号链接和 bash 脚本的文件系统）。

使用 git-new-workdir 脚本（在 Ubuntu Linux 中位于 /usr/share/doc/git/contrib/workdir/git-new-workdir），可以从[https://github.com/gerrywastaken/git-下载新工作目录/blob/master/git-新工作目录](https://github.com/gerrywastaken/git-new-workdir/blob/master/git-new-workdir)

用法：

```
git-new-workdir your-clone your-new-working-dir 
```

your-new-working-dir 包含一个单独的结帐和暂存区域，但与 your-clone 共享历史记录。同时在两个分支上工作或仅检查历史记录中的文件是一种有效的解决方案。

谷歌搜索“git new workdir windows”，看起来有 Windows 端口。我没有测试过那些（[https://groups.google.com/forum/?fromgroups=#!topic/msysgit/1z07lWg9Nts](https://groups.google.com/forum/?fromgroups=#!topic/msysgit/1z07lWg9Nts)）

# ios - SDWebImage：在刷新和放置图像之前运行方法

> ID：15384198
> 
> 赞同：3
> 
> 时间：2013-03-13T11:36:32.277
> 
> 标签：ios, image-processing, lazy-loading, sdwebimage

所以在其他任何事情之前，我发现了这个：

[SDWebImage 在缓存之前处理图像](https://stackoverflow.com/questions/12928103/sdwebimage-process-images-before-caching)

哪种帮助，但我真的很想使用`SDWebImage`，有没有办法在完成之前通过类外的方法处理图像？

据我了解，完成块

```
- (void)setImageWithURL:(NSURL *)url completed:(SDWebImageCompletedBlock)completedBlock 
```

在放置图像后运行。我想在放置加载的图像之前运行一个方法。

是否有捷径可寻？

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:07:30.720

转发我的答案：[SDWebImage 在缓存之前处理图像](https://stackoverflow.com/questions/12928103/sdwebimage-process-images-before-caching/15393477#15393477)

SDWebImage 开发人员 Olivier Poitrey 在这里为我回答了这个问题。

您必须实现 SDWebImageManagerDelegate 协议，然后将其设置为共享管理器的委托，如下所示：

SDWebImageManager.sharedManager.delegate = self;

使用 imageManager:transformDownloadedImage:withURL: 实例方法。更多信息。

非常适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:24:18.077

两种选择：

1.  编写自己的例程，[独立使用异步图像缓存](https://github.com/rs/SDWebImage#using-asynchronous-image-downloader-independently)，处理图像，然后设置图像视图的`image`属性。您必须担心一些有趣的排列（例如，如果在下载完成之前已重用单元格，您会想要取消该图像视图的先前图像下载），因此您需要小心，但事实并非如此太糟糕了。

2.  不过，可能更容易编写您自己的`UIImageView`类别，就像现有的`SDWebImage`( `UIImageView+WebCache.m`) 类别一样，但引入您自己的排列，`setImageWithURL`就像原来的一样，但也提供了一个预处理完成块。

我可能会倾向于后者，但两者都可以很好地工作

# r - 如何遍历R中的文本文件？

> ID：15384199
> 
> 赞同：1
> 
> 时间：2013-03-13T11:36:35.023
> 
> 标签：r, loops

我有三个文本文件。我想做一些如下所示的计算并绘制结果。所有文本文件都包含 14 列 X1 到 X14 和 601 行。该代码基本上从所有三个文件中读取 X3 并进行一些计算，然后返回结果。

```
 ref= read.table("D:\\ref.txt", sep="",header=TRUE)# read first file
   sour1 = read.table("D:\\sour1.txt", sep="",header=TRUE)# read second file
   sour2= read.table("D:\\sour2.txt", sep="",header=TRUE,na.rm=TRUE)# read third file
  result1 = (mean(ref$X3) - ((sd(ref$X3)/sd(sour1$X3))*mean(sour1$X3))+ ((sd(ref$X3)/sd(sour1$X3)*sour1$X3))) # calculate using ref and sour1
result2 = ((mean(ref$X3) - ((sd(ref$X3)/sd(sour2$X3,na.rm=TRUE))*mean(sour2$X3,na.rm=TRUE))+((sd(ref$X3)/sd(sour2$X3,na.rm=TRUE)*sour2$X3))))  # calculate using ref and sour2
plot(ref$X3,result1,ylab="Weight in pounds",xlab="Weight in pounds",col=2)
points(ref$X3,ref$X3, col = 'green')
points(ref$X3,result2, col = 'blue') # from this I get one plot showing 3 variables on y axis against one on x axis. 
```

这只是使用所有数据中的 X3 绘制的图，但我仍然有其他列 X1 到 X14 我的问题是如何对所有其他列执行相同的操作，最终将获得 14 个图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:46:31.327

要从1 到 14，您必须使用函数和在列表中`Xi`获取元素的替代方法：而不是`i``paste``ref[["X3"]]``ref$X3`

它给出了你的例子：

```
for (i in 1:14){
        name <- paste('X',i,sep='')
        result1 = (mean(ref[[name]]) - ((sd(ref[[name]])/sd(sour1[[name]]))*mean(sour1[[name]]))+ ((sd(ref[[name]])/sd(sour1[[name]])*sour1[[name]]))) # calculate using ref and sour1
        result2 = ((mean(ref[[name]]) - ((sd(ref[[name]])/sd(sour2[[name]],na.rm=TRUE))*mean(sour2[[name]],na.rm=TRUE))+((sd(ref[[name]])/sd(sour2[[name]],na.rm=TRUE)*sour2[[name]]))))  # calculate using ref and sour2
        plot(ref[[name]],result1,ylab="Weight in pounds",xlab="Weight in pounds",col=2)
        points(ref[[name]],ref$X1, col = 'green')
        points(ref[[name]],result2, col = 'blue')
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:59:38.740

正如 Pop 所提到的，您需要创建一个列名列表并遍历它们。

`lapply``for`为循环提供了一种更优雅的替代方案。

通过更清楚地布置代码，您可以看到在分配`result1`和的行中有一些奇怪的双括号`result2`。为了清楚起见，考虑将这些行分解为更小的计算。

```
columns <- paste0("X", 1:14)
lapply(
  columns,
  function(column)
  {
    result1 <- (
      mean(ref[[column]]) - 
      ((sd(ref[[column]]) / sd(sour1[[column]])) * mean(sour1[[column]])) + 
      ((sd(ref[[column]]) / sd(sour1[[column]]) * sour1[[column]]))
    )   # calculate using ref and sour1
    result2 <- ((  
      mean(ref[[column]]) - 
      ((sd(ref[[column]]) / sd(sour2[[column]], na.rm=TRUE)) * mean(sour2[[column]], na.rm=TRUE)) + 
      ((sd(ref[[column]]) / sd(sour2[[column]], na.rm=TRUE) * sour2[[column]])) 
    ))  # calculate using ref and sour2
    plot(
      ref[[column]],
      result1,
      ylab = "Weight in pounds",
      xlab = "Weight in pounds",
      col  = 2
    )
    points(ref[[column]], ref[[column]], col = 'green')
    points(ref[[column]], result2, col = 'blue') 
  }
) 
```

# ajax - 用实体字段保存 symfony2 实体表单

> ID：15384201
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:36:40.363
> 
> 标签：ajax, forms, symfony

我有一个城市添加表格：

```
public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name', null, array(
            'label' => 'City',
        ));
        $builder->add('country', 'genemu_jqueryautocompleter_entity', array(
            'class' => 'X\tBundle\Entity\Country',
            'property' => 'name',
            'route_name' => 'ajax_country',
            'required' => true,
            'label' => 'Country',
        ));
    } 
```

国家是一个实体。当我提交此表单时 - S2 返回错误：`cannot save because cannot convert Object to String`

为此，我使用魔术方法`__toString()`并返回`(string)$this->getId()`；

但我不确定 - 这是对的吗？

**决定：** [Symfony/Doctrine：“可捕获的致命错误：类 <type> 的对象无法转换为字符串”](https://stackoverflow.com/questions/11512262/symfony-doctrine-catchable-fatal-error-object-of-class-type-could-not-be-co)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:53:35.793

最好的办法是为您的 Country 实体创建一个 FormType 并将其嵌入到主窗体中。请参阅[How to Embed a Collection of Forms](http://symfony.com/doc/master/cookbook/form/form_collections.html) from the Cookbook 以准确解释如何执行此操作。

您尝试做的事情是可能的，但它会使事情很快变得混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:34:00.173

答案：[Symfony/Doctrine：“可捕获的致命错误：类 <type> 的对象无法转换为字符串”](https://stackoverflow.com/questions/11512262/symfony-doctrine-catchable-fatal-error-object-of-class-type-could-not-be-co)

所以，我们使用下一件事：

```
/**
 * @var X\tBundle\Entity\Country;
 *
 * @ORM\ManyToOne(targetEntity="X\tBundle\Entity\Country")
 * @ORM\JoinColumn(name="country_id", referencedColumnName="id", nullable=false)
 */
public $country; 
```

# android - 以编程方式将特定颜色设置为 ColorStateList

> ID：15384209
> 
> 赞同：6
> 
> 时间：2013-03-13T11:37:10.340
> 
> 标签：android, textview, textcolor, android-selector

我从我的问题[Add Color "#e3bb87" to StateListDrawable programmatically](https://stackoverflow.com/questions/15382854/add-color-e3bb87-to-statelistdrawable-programmatically)创建了 StateListDrawable ，但是 TextView.setTextColor 不采用 StateListDrawable （奇怪它在布局中起作用）而是 ColorStateList 。我读了这个[更改 statelistdrawable 文本颜色的 android 按钮](https://stackoverflow.com/questions/14604385/change-statelistdrawable-text-color-android-button)

在 ColorStateList 的构造函数中，它只接受 int 的数组

```
ColorStateList colorStateList = new ColorStateList(
            new int[][]{
                    new int[]{R.attr.state_pressed},
                    new int[]{R.attr.state_selected},
                    new int[]{-R.attr.state_selected},
            },
            new int[]{
                    Color.GREEN,
                    Color.BLUE,
                    Color.RED}); 
```

颜色没有在 colors.xml 中定义，因为我下载了这个颜色属性。我怎么能这样定义？

```
ColorStateList colorStateList = new ColorStateList(
            new int[][]{
                    new int[]{R.attr.state_pressed}
            },
            **getThisColor**("#e3bb87")); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T11:47:04.180

用这个

```
ColorStateList colorStateList = new ColorStateList(
            new int[][] { new int[] { R.dimen.padding_large } },
            new int[] {Color.parseColor("#e3bb87")}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-08-07T08:34:15.757

您可以使用返回包含单一颜色的`valueOf()`方法：`ColorStateList``ColorStateList`

```
ColorStateList.valueOf(Color.parseColor("#e3bb87")) 
```

# jquery - 单击 btn 时显示图像 - 实时更新

> ID：15384212
> 
> 赞同：1
> 
> 时间：2013-03-13T11:37:19.290
> 
> 标签：jquery, asp.net, ajax

概述：使用中继器在屏幕上显示记录列表，其中包含名称、复选框、文本区域和提交按钮。

当文本添加到文本区域并单击相邻的提交按钮时，记录将在数据库中实时更新，而无需加载页面。这是使用 JQuery 完成的，一切正常。

我如何让图像显示在某个位置。即在文本区域内

感谢您的回复

# php - 通过 Amazon 的 REST API 以编程方式解决请求

> ID：15384218
> 
> 赞同：2
> 
> 时间：2013-03-13T11:37:32.967
> 
> 标签：php, rest, amazon

我（开发人员）使用亚马逊市场支付进行交易。为此，我使用了启用市场费用的按钮（[http://docs.aws.amazon.com/AmazonSimplePay/latest/ASPGettingStartedGuide/nomktplc.html](http://docs.aws.amazon.com/AmazonSimplePay/latest/ASPGettingStartedGuide/nomktplc.html)）。

我想稍后从发件人的卡中收取费用，所以我正在使用结算（亚马逊市场费用启用按钮的高级功能）。为了解决我正在尝试使用的交易（在[http://docs.aws.amazon.com/AmazonFPS/latest/FPSMarketplaceGuide/Settle.html](http://docs.aws.amazon.com/AmazonFPS/latest/FPSMarketplaceGuide/Settle.html)找到）

" [https://fps.sandbox.amazonaws.com?Action=Settle&AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&ReserveTransactionId=14GKD9GE66FAA63E6O6B2JDPZKN53LZ7F22&SignatureMethod=HmacSHA256&SignatureVersion=2&Signature=SJJLsIBghi7VIycBjX7c3hnfgZ%2FBvZbzqLtAZXDL8ys%3D&Timestamp=2009-10-06T07%3A53%3A11.750Z&TransactionAmount.CurrencyCode=USD&TransactionAmount.Value=1&Version =2008-09-17](https://fps.sandbox.amazonaws.com?Action=Settle&AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&ReserveTransactionId=14GKD9GE66FAA63E6O6B2JDPZKN53LZ7F22&SignatureMethod=HmacSHA256&SignatureVersion=2&Signature=SJJLsIBghi7VIycBjX7c3hnfgZ%2FBvZbzqLtAZXDL8ys%3D&Timestamp=2009-10-06T07%3A53%3A11.750Z&TransactionAmount.CurrencyCode=USD&TransactionAmount.Value=1&Version=2008-09-17) "

我关于这个请求的问题是

1.  我应该如何使用它。
2.  我应该从哪里调用它 - 浏览器或作为普通的 api 调用。
3.  如果它是由 api 完成的，那么我应该遵循哪些步骤？
4.  我直接从浏览器拨打了这个电话，但它总是显示“SignatureDoesNotMatch”错误。

请建议我应该怎么做？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:25:44.903

您使用的 Amazon Simple Pay 解决方案为您提供了一个非常简单的 HTML 集成。浏览器在这里发挥了魔力。

然而，亚马逊灵活支付系统 (FPS) 是一种 API，旨在供服务器端代码使用（即使它可以由 JavaScript 使用）。您必须创建并正确签署请求以自动执行此集成。这比仅仅将一个 ASP 片段放入您的页面要复杂得多。我建议你从这里开始：

*   [什么是亚马逊 FPS](https://payments.amazon.com/sdui/sdui/helpTab/Amazon-Flexible-Payments-Service/Creating-Managing-Your-Account/What-Is-Amazon-FPS) <- 好的起点
*   [FPS Sandbox](https://payments.amazon.com/sdui/sdui/helpTab/Amazon-Flexible-Payments-Service/Technical-Resources/Amazon-FPS-Sandbox) <-- 一个用于 FTP 调用的浏览器游乐场

# android - 使用 AudioRecord 实例获取错误代码 20

> ID：15384221
> 
> 赞同：1
> 
> 时间：2013-03-13T11:37:36.813
> 
> 标签：android, audio-recording

我正在开发一个通过 MIC 记录并更改其频率的 android 应用程序。类似于 iPhone 的 Helium 展位应用程序。目前我已经编写了代码来记录文件并将其保存在 sdcard 中。我收到一条错误消息：

```
Could not get audio input for record source 1
Error creating AudioRecord instance: initialization check failed.
[ android.media.AudioRecord ] Error code -20 when initializing native
FATAL EXCEPTION: Thread-10
java.lang.IllegalStateException: startRecording() called on an uninitialized 
```

以下是我的代码：

```
public class MainActivity extends Activity {

Integer[] freqset = {8000};
 private ArrayAdapter<Integer> adapter;

 Spinner spFrequency;
 Button startRec, stopRec, playBack;

 Boolean recording;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        startRec = (Button)findViewById(R.id.startrec);
        stopRec = (Button)findViewById(R.id.stoprec);
        playBack = (Button)findViewById(R.id.playback);

        startRec.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                   Thread recordThread = new Thread(new Runnable(){

                        @Override
                        public void run() {
                         recording = true;
                         startRecord();
                        }

                       });

                       recordThread.start();

            }
        });
        stopRec.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                recording = false;

            }
        });
        playBack.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                 playRecord();

            }
        });

        spFrequency = (Spinner)findViewById(R.id.frequency);
        adapter = new ArrayAdapter<Integer>(this, android.R.layout.simple_spinner_item, freqset);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spFrequency.setAdapter(adapter);

    }

 private void startRecord(){

  File file = new File(Environment.getExternalStorageDirectory(), "test.pcm"); 
  int BytesPerElement = 2;
  int sampleFreq = (Integer)spFrequency.getSelectedItem();
    Log.e("Test","Start Recording"+sampleFreq);
  try {
   file.createNewFile();

   OutputStream outputStream = new FileOutputStream(file);
   BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(outputStream);
   DataOutputStream dataOutputStream = new DataOutputStream(bufferedOutputStream);

   int minBufferSize = AudioRecord.getMinBufferSize(sampleFreq, 
     AudioFormat.CHANNEL_IN_MONO, 
     AudioFormat.ENCODING_PCM_16BIT);
   Log.i("Test","Buffer Size is"+minBufferSize);

   short[] audioData = new short[minBufferSize];
   Log.i("Test","audioData initialized"+audioData);
   AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,
     sampleFreq,
     AudioFormat.CHANNEL_IN_MONO,
     AudioFormat.ENCODING_PCM_16BIT,
     minBufferSize*BytesPerElement);
   Log.i("Test","audioRecord initialized"+audioRecord);

   audioRecord.startRecording();

   while(recording){
    int numberOfShort = audioRecord.read(audioData, 0, minBufferSize);
    for(int i = 0; i < numberOfShort; i++){
     dataOutputStream.writeShort(audioData[i]);
       Log.i("Test","Recording buzzz");

    }
   }

   audioRecord.stop();
   dataOutputStream.close();

  } catch (IOException e) {
   e.printStackTrace();
   Log.e("Testing", "Esception Found");
  }

 }

 void playRecord(){

  File file = new File(Environment.getExternalStorageDirectory(), "test.pcm");

        int shortSizeInBytes = Short.SIZE/Byte.SIZE;

  int bufferSizeInBytes = (int)(file.length()/shortSizeInBytes);
  short[] audioData = new short[bufferSizeInBytes];

  try {
   InputStream inputStream = new FileInputStream(file);
   BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
   DataInputStream dataInputStream = new DataInputStream(bufferedInputStream);

   int i = 0;
   while(dataInputStream.available() > 0){
    audioData[i] = dataInputStream.readShort();
    i++;
   }

   dataInputStream.close();

   int sampleFreq = (Integer)spFrequency.getSelectedItem();

   AudioTrack audioTrack = new AudioTrack(
     AudioManager.STREAM_MUSIC,
     sampleFreq,
     AudioFormat.CHANNEL_CONFIGURATION_MONO,
     AudioFormat.ENCODING_PCM_16BIT,
     bufferSizeInBytes,
     AudioTrack.MODE_STREAM);

   audioTrack.play();
   audioTrack.write(audioData, 0, bufferSizeInBytes);

  } catch (FileNotFoundException e) {
   e.printStackTrace();
  } catch (IOException e) {
   e.printStackTrace();
  }
 }} 
```

PS 我之前问过类似的问题，但我使用了 MediaRecorder。我现在在这里使用 AudioRecord 类。

# chef-infra - 将时间戳添加到刀日志文件

> ID：15384228
> 
> 赞同：0
> 
> 时间：2013-03-13T11:37:49.263
> 
> 标签：chef-infra

有谁知道如何为 chef-knife.log 中的日志条目添加时间戳并获得与 chef-client.log 类似的语法？

```
CentOS 5.8
\#> knife --version Chef: 10.14.2 
```

# c++ - 复制构造函数

> ID：15384231
> 
> 赞同：0
> 
> 时间：2013-03-13T11:37:53.467
> 
> 标签：c++, copy, binary-search-tree, nodes

我正在使用二叉搜索树。在这里，我正在编写一个函数来从树中删除一个项目。在以下代码中：

```
if(root = NULL)//if there is nothing in the tree
{
    cout<<"the Tree is empty"<<endl;//ouput to the screen
    return;//exit the function
}

bool isFound = false;//tells us if the item is found
Node* tmp = new Node();//declare a temp pointer
Node* tmp2 = new Node();;//declare a temp pointer
tmp* = *root;//assign the pointer to something 
```

它正在调用复制构造函数，但正如我现在所拥有的那样，我只是复制这样的值：

```
Node& Node::operator= (const Node& node)
{
    data = node.data;
    left = node.left;
    right = node.right;
    return *this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:38:34.330

您正在分配指针，以分配您需要的对象

```
*tmp = *root; 
```

`tmp`并且`root`是类型`Node*`；`*tmp`并且`*root`是 类型`Node`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:43:18.080

```
if(root = NULL) 
```

将其更改为

```
if(root == NULL) 
```

这也是错误的：

```
tmp* = *root;//assign the pointer to something 
```

# javascript - 用javascript慢慢改变一个值

> ID：15384233
> 
> 赞同：1
> 
> 时间：2013-03-13T11:37:55.073
> 
> 标签：javascript, numbers, increment

我正在为船制作一个界面原型。抛开细节不谈，我使用 javascript onClick 创建了一个数字键盘，可以让您输入一个值，然后将该值发送到另一个字段，我们称之为“当前”。有没有办法让我发送的“当前”字段慢慢增加，直到达到我从小键盘发送的值？

例如，如果我在小键盘上输入数字 24 并单击“提交”，“当前”字段会立即显示 24，但我希望它以增量方式缓慢滴答至 24。这可能听起来像一个愚蠢的细节，但它会对我的原型产生很大的影响。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:40:42.313

您可以使用 javascript 的 setInterval 函数：

```
var handle;

function func() {
    // Increment the value by 1
    if(necessary value is reached) {
        window.clearInterval(handle);
    }
}

handle = window.setInterval("func", 50); // Run each 50ms 
```

# c# - 使用 Intelligencia.UrlRewriter 进行 http 到 https 的重定向，反之亦然

> ID：15384234
> 
> 赞同：0
> 
> 时间：2013-03-13T11:37:55.830
> 
> 标签：c#, url-rewriting, rewrite

有没有人尝试使用`Intelligencia.UrlRewriter`http到https，反之亦然页面重定向。我似乎无法让它在我的网站上运行。虽然我能够在 http 页面之间使用重写。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:47:30.717

这似乎对我有用，在 web.config 中：

```
<rewriter>
  <if header="HTTPS" match="^OFF$">
    <redirect url="(.*)" to="https://mydomain$1" />
  </if>
</rewriter> 
```

尽管我发现 IIS 和 MVC 至少设置 [RequireHttps] 将使用 302 自动处理 http -> https 重定向。

# c# - Task.IsCancelled 不起作用

> ID：15384237
> 
> 赞同：2
> 
> 时间：2013-03-13T11:38:12.717
> 
> 标签：c#, task-parallel-library, task

我有以下示例代码：

```
static class Program
{
    static void Main()
    {
        var cts = new CancellationTokenSource();

        var task = Task.Factory.StartNew(
            () =>
                {
                    try
                    {
                        Console.WriteLine("Task: Running");
                        Thread.Sleep(5000);
                        Console.WriteLine("Task: ThrowIfCancellationRequested");
                        cts.Token.ThrowIfCancellationRequested();
                        Thread.Sleep(2000);
                        Console.WriteLine("Task: Completed");
                    }
                    catch (Exception exception)
                    {
                        Console.WriteLine("Task: " + exception.GetType().Name);
                        throw;
                    }
                }).ContinueWith(t => Console.WriteLine("ContinueWith: cts.IsCancellationRequested = {0}, task.IsCanceled = {1}, task.Exception = {2}", cts.IsCancellationRequested, t.IsCanceled, t.Exception == null ? "null" : t.Exception.GetType().Name));

        Thread.Sleep(1000);

        Console.WriteLine("Main: Cancel");
        cts.Cancel();

        try
        {
            Console.WriteLine("Main: Wait");
            task.Wait();
        }
        catch (Exception exception)
        {
            Console.WriteLine("Main: Catch " + exception.GetType().Name);
        }

        Console.WriteLine("Main: task.IsCanceled = {0}", task.IsCanceled);
        Console.WriteLine("Press any key to exit...");

        Console.ReadLine();
    }
} 
```

输出是：

*   任务：运行
*   主要：取消
*   主线：等
*   任务：ThrowIfCancellationRequested
*   任务：OperationCanceledException
*   继续： cts.IsCancellationRequested = True，task.IsCanceled = False，task.Exception = AggregateException
*   主要：task.IsCanceled = False
*   按任何一个键退出...

如果我删除 ContinueWith，则输出为：

*   任务：运行
*   主要：取消
*   主线：等
*   任务：ThrowIfCancellationRequested
*   任务：OperationCanceledException
*   主要：捕获 AggregateException
*   主要：task.IsCanceled = False
*   按任何一个键退出...

我不明白，为什么 task.IsCanceled 在这两种情况下都返回 false ？

为什么只有在没有 ContinueWith 的情况下才会重新抛出异常？

* * *

我想要实现的是一种统一且简单的等待任务完成的方法，以及一个指示任务是否被取消的属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:45:46.780

我认为您并没有取消任务本身，而只是从任务中抛出异常。尝试使用[StartNew](http://msdn.microsoft.com/en-us/library/dd988458.aspx) (Action action,CancellationToken cancelToken) 而不是 StartNew(Action action)。您还可以将取消令牌作为参数添加到 ContinueWith。

# jquery-autocomplete - 当我选择不清除输入中先前键入的数据的选项时，有什么办法吗

> ID：15384238
> 
> 赞同：0
> 
> 时间：2013-03-13T11:38:16.783
> 
> 标签：jquery-autocomplete

问题是这样的：在我的程序中，用户首先获得了名字的选项 - 所以希望他喜欢选项中的某些内容并且他选择了它 - 到目前为止一切都很好！
但是当他输入空格时，他开始接收第二个名字的选项，如果他喜欢某样东西并选择它 - 然后自动完成只会删除第一个名字。有什么办法可以改变吗？

* * *

你好 Rich 非常感谢你或你的回复 - 现在我决定改变我的任务，这是我在用户输入例如 I 字符时所做的，我得到了所有以 I 开头的名字 - 到目前为止没问题！并且当他键入空格和 K 时，例如，我向我的 Web 服务发出请求，该服务获取以 K 开头的中间名或以 K 开头的姓氏（其中一个应该以 K 开头，对于 Iwelina），所以在这个Iwelina 的案例我有 RADULSKA KOSEWA 和 KOSEWA NEDEWA！对于自动完成的来源，我将 iwelina 与 (radulska kosewa) 和 iwelina 与 (KOSEWA NEDEWA) 连接起来，所以最后我得到了 IWELINA IELINA RADULSKA KOSEWA 和 IWELINA KOSEWA NEDEWA ！！！唯一的问题是，当我输入 Iwelina K 时，我只得到 IWELINA KOSEWA NEDEWA !!!这里是自动完成的代码

```
 $('#input').autocomplete({
                source: function(request, response) {
                    var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term, " "));
                    var data = $.grep( srcAutoComp, function(value) {
                        return matcher.test( value.label || value.value || value );
                    });
                    response(data);
                }
            }); 
```

如果你知道我可以如何改变它，我会很高兴得到帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:01:38.817

我不明白，当用户开始输入第二个名字时，他得到的结果只是姓氏。例如，如果他键入“Joh”并从选项中选择“John”，然后继续键入“John Do”，那么您的下拉菜单怎么可能只为他提供姓氏的结果，例如“Doe” ?

无论如何，假设这真的发生了，您可以将源数据中名字和姓氏的所有组合组合起来，当用户键入“Joh”选择“John”然后在下拉列表中显示“John Doe”继续键入“John Do”。

另一种方法是对搜索和响应事件进行复杂的更改，以在空格存在后进行搜索，并在完成对姓氏的搜索后将其与第一个字符串重新组合。如果你给我你的源数据，我可以为此整理一些东西。

# android - 在不知道名称的情况下打开文件

> ID：15384241
> 
> 赞同：0
> 
> 时间：2013-03-13T11:38:28.143
> 
> 标签：android, android-sdcard, android-file

在我的应用程序中，当我将时间戳保存到设备上的文件夹时，我使用时间戳作为文件名。我知道想从我的应用程序访问这些文件之一，但我不确定如何打开你不知道的文件知道的名字。它们都是相同的文件类型，所以我的问题是如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:40:45.787

您必须提供文件的名称。否则就像对 JVM 说“这样做？” 不知道该怎么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:09:43.633

您可能希望保存到仅包含您的时间戳文件而不包含其他内容的特定目录。您可以使用 File.listFiles API 来获取目录中的文件数组，然后您可以检查每个文件名以找到合适的文件名（例如最近的时间戳）。

# c++ - 如何为基于 C++ 模板的代码绘制 UML 类图？（如 TMP）

> ID：15384242
> 
> 赞同：6
> 
> 时间：2013-03-13T11:38:29.173
> 
> 标签：c++, templates, uml, instantiation, modeling

我为 C++ 绘制 UML，就像**UML 提炼**的书一样。

在我学习模板编程之前，这本书就足够了。但是当我在学习包括模板元编程在内的模板编程时，我终于遇到了这个问题。

*   是否有任何已知的方法来绘制模板的实例化？
*   任何表达模板实例化的最佳方法？

[https://github.com/Jeonghum/tmplguide/tree/master/inherit](https://github.com/Jeonghum/tmplguide/tree/master/inherit)

从这个页面你可以找到我画的 UML 图

继承/命名tmpl.cpp

这是一本书的一个例子，C++ Templates - The Complete Guide 如果你能以这个为例解释一下，那将是最好的。

我使用 StarUML。

# javascript - 骨干collection.fetch()，解析不起作用

> ID：15384249
> 
> 赞同：2
> 
> 时间：2013-03-13T11:38:49.830
> 
> 标签：javascript, backbone.js

我正在使用backbone.js，我想从服务器获取我的集合的数据：

```
var Account = Backbone.Model.extend();
var AccountList = Backbone.Collection.extend({
        model: Account,

        url: '/pfp/accounts/service',

        parse: function(response){
            return response.Data;
        }

    });
var accountList = new AccountList;
accountList.fetch();
console.log(accountList.toJSON()); 
```

服务器响应：

```
{"Data":
[{"accountid":"101752","account_name":"hijklmnopq","userid":"1","comment":"mnopqrstu","creation_date":"6 Jan 2008","account_type":"2","acc_type_name":"Дебетовая карта","currency":"144","letter_code":"","start_balance":"90.000.000","start_balance_raw":90000000.000,"to_total":true},
{"accountid":"144924","account_name":"emabcefghijklmnopqr","userid":"1","comment":"lmno","creation_date":"19 Jan 2008","account_type":"4","acc_type_name":"Банковский счёт","currency":"113","letter_code":"Le","start_balance":"360.000.000,00","start_balance_raw":360000000.000,"to_total":true},
... 
```

accountList.toJSON() 返回空数组 ([ ])。请帮我看看代码有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:16:22.933

因此，正如 WiredPrairie 所说，您需要更改这些行：

```
accountList.fetch();
console.log(accountList.toJSON()); 
```

至：

```
accountList.fetch({
  success: function(collection){
    // This code block will be triggered only after receiving the data.
    console.log(collection.toJSON()); 
  }
});
// JS will likely reach this line before receiving the data. 
```

# django - 在 django ALLOWED_HOSTS 异常上禁止管理员电子邮件

> ID：15384250
> 
> 赞同：22
> 
> 时间：2013-03-13T11:38:50.003
> 
> 标签：django

由于在 django 1.4.4 中引入了 ALLOWED_HOSTS 设置，我收到了很多 django 错误电子邮件到我的管理员地址，因为一些愚蠢的蜘蛛正在寻找易受攻击的 phpMyAdmin 安装或类似的东西。这些邮件是完全有效的，因为蜘蛛请求中的主机头确实是错误的，但我宁愿让 django 只在重要事情出错时给我发送错误邮件。有没有一种简单的方法可以使`SuspiciousOperation`邮件静音，还是我必须一路走下去子类`CommonMiddleware`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-08-04T07:54:52.843

为了完整起见，您可以覆盖部分日志记录：（在 django 1.6 上测试）：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'null': {
            'level': 'DEBUG',
            'class': 'logging.NullHandler',
        },
    },
    'loggers': {
        'django.security.DisallowedHost': {
            'handlers': ['null'],
            'propagate': False,
        },
    },
} 
```

另请参阅[Django 安全文档](https://docs.djangoproject.com/en/stable/topics/logging/#django-security)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T18:54:07.527

要禁止管理员电子邮件，请定义日志过滤器：

```
def skip_suspicious_operations(record):
    if record.name == 'django.security.DisallowedHost':
        return False
    return True 
```

然后在 settings.py 中将其添加到 LOGGING 字典中作为过滤器：

```
'filters': {
    'skip_suspicious_operations': { 
        '()': 'django.utils.log.CallbackFilter',
        'callback': skip_suspicious_operations,
    }
} 
```

并将过滤器添加到 mail_admins 处理程序：

```
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['skip_suspicious_operations'],
        'include_html' : True,
    }
} 
```

这在 Django 1.6 中按原样工作。在 Django-1.5 中，我认为与 record.name 比较的 RHS 有点不同，但否则它应该可以工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-01T16:12:54.227

## 阿帕奇

如果您使用的是 Apache，您可以从 httpd.conf 过滤掉到不同主机的流量——这是一个比编写任何代码更简单的解决方案。就像是

```
WSGIPythonPath [your Python path]
ServerSignature Off
ServerTokens Prod

<VirtualHost *:80>
    DocumentRoot /var/www
</VirtualHost>

<VirtualHost *:80>
    ServerName www.myrealhost.com
    rest of apache configuration ....
</VirtualHost> 
```

第一个设置将抓取与您的服务器名称不匹配的所有内容（例如 www.myrealhost.com ）

## Nginx

您可以在 nginx 中使用相同的方法使用`server_name`指令过滤掉配置文件中不同主机的流量，例如

```
server {
    # the port your site will be served on
    listen      80;

    # the domain name it will serve for
    server_name www.myrealhost.com;  # optionally include localhost here for local testing

    ...the rest of your nginx config for Django
}
server {
     # You need to provide a default server for all other traffic
    listen 80 default_server;
    server_name  _;

    # If you need a healthcheck route that works with any hostname, unncomment
    # the next three lines
l   #location = /healthcheck {
    #    return 200;
    #}
    location / {
        return 444;
    }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T12:01:49.793

稍微搜索一下就会发现 Django 的错误跟踪器中已经存在一个错误：

[https://code.djangoproject.com/ticket/19866](https://code.djangoproject.com/ticket/19866)

在（希望）Django 1.5.1 中修复之前，有一个涉及日志过滤器的[解决方法。](http://www.tiwoc.de/blog/2013/03/django-prevent-email-notification-on-suspiciousoperation/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-17T14:08:38.957

所以我通常更喜欢将所有不匹配的虚拟主机重定向到一个虚拟主机。这是通过对 apache.conf 文件的简单添加来完成的...

```
<VirtualHost *:80>
    RedirectMatch ^/?(.*) http://www.example.com/$1
</VirtualHost> 
```

上面的示例将导致对任何不匹配的虚拟主机的请求重定向到[http://www.example.com](http://www.example.com)，同时正确保留路径组件。

这还有一个额外的好处，那就是纠正用户遵循无效请求或类似情况的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-11T01:21:59.663

但是等等，有一个应用程序！

[https://github.com/litchfield/django-safelogging](https://github.com/litchfield/django-safelogging)

# c++ - Qwt 缺少包括

> ID：15384251
> 
> 赞同：0
> 
> 时间：2013-03-13T11:38:51.947
> 
> 标签：c++, visual-studio-2010, qwt

键入以下行时：

```
QwtPointSeriesData* myData = new QwtPointSeriesData; 
```

它对我说标识符未定义。但是我输入了以下内容，其中提到它无法打开那些打开的 pource 文件。

```
#include <qwt_plot_curve.h>
#include "qwt_series_data.h" 
```

任何想法如何解决并找出如何获得它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:18:05.487

回答我的问题：似乎我有一个非常旧的 QWT 版本！

# cordova - PhoneGap: BarcodeScanner 分享插件

> ID：15384252
> 
> 赞同：2
> 
> 时间：2013-03-13T11:38:59.433
> 
> 标签：cordova, phonegap-plugins, barcode-scanner, phonegap-build

笔记：

1.  我想开发具有二维码扫描功能的 IOS 和 Android 应用程序。

2.  我没有 Mac 机器，我在 WIndows OS 中使用`Netbean`/ 。`Eclipse`

* * *

**问题：**

1.  是否可以使用 Eclipse Windows OS + android [BarcodeScanner Plugin编写单个代码库，并通过](https://github.com/wildabeast/BarcodeScanner/blob/master/README.md)[Adob​​e Cloud Build 服务](https://build.phonegap.com/)内置到 IOS 应用程序中

* * *

如果有人能给我一个建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:13:18.017

如果您使用的是 phonegap 的在线编译器（[Phonegap Build](http://build.phonegap.com)），那么可以为所有受支持的设备使用插件。

> 插件：[https ://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)
> 
> 在 Config.xml
> 
> < gap:plugin >：为PhoneGap Build指定一个PhoneGap插件，以包含在您生成的应用程序中。目前，要包含插件，您将确保：
> 
> PhoneGap Build 支持该插件；并且任何 JavaScript 脚本标记都存在于您的 index.html 文件中。更多详细信息，包括可用插件列表，请参见我们的[插件文档](https://build.phonegap.com/docs/plugins)。

转到[https://build.phonegap.com/docs/plugins](https://build.phonegap.com/docs/plugins)并向下滚动到 BarcodeScanner 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:54:08.527

您可以使用[条码扫描器插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner)。您可以在 ios 上重用混合部分。但是一些基本的设置也需要在ios上进行。如果您想轻松地为多个平台构建，请尝试[Phonegap 构建。](https://build.phonegap.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T16:03:38.433

如果这对任何人都有帮助： [https ://github.com/zeroasterisk/PhoneGap-BarcodeScanner-Example-iOS](https://github.com/zeroasterisk/PhoneGap-BarcodeScanner-Example-iOS)

并针对您的问题。

*   所有设备都可以共享相同的`www`（html/js/css）目录和子目录
*   所有设备都需要自己独特的 PhoneGap 应用程序和设备代码代码库

PhoneGap 负责将共享的 WWW 代码库和特定于设备的本机代码这两者连接起来。

# ruby-on-rails - 运行 rake about 命令时出错

> ID：15384256
> 
> 赞同：0
> 
> 时间：2013-03-13T11:39:03.453
> 
> 标签：ruby-on-rails

我在我的linux系统上安装了所有ruby on rails..然后当我输入命令'rake about'时，以下是错误..plz帮助

```
 rake aborted!
   Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a                   list of available runtimes.
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect'
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/execjs-1.4.0/lib/execjs.rb:5
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/coffee-script-2.2.0/lib/coffee-    script.rb:1
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/coffee-rails-3.2.2/lib/coffee-  rails.rb:1:in `require'
   /home/imobigeeks1/work/demo/jbuilder/ruby/1.8/gems/coffee-rails-3.2.2/lib/coffee-  rails.rb:1
   /home/imobigeeks1/work/demo/config/application.rb:7
   /home/imobigeeks1/work/demo/Rakefile:5
   (See full trace by running task with --trace) 
```

而且我还使用`gem install execjs`命令安装了javascript，仍然显示相同的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:46:49.960

放入`gem 'therubyracer'`您的gemfile，然后`bundle install`从命令行执行。

这颗宝石是为了——

> 从 Ruby 调用 JavaScript 代码并操作 JavaScript 对象。调用 Ruby 代码并从 JavaScript 操作 Ruby 对象。

来源 - [http://rubydoc.info/gems/therubyracer/0.11.4/frames](http://rubydoc.info/gems/therubyracer/0.11.4/frames)

# api - 缺少父资源的 REST API 代码/消息

> ID：15384260
> 
> 赞同：9
> 
> 时间：2013-03-13T11:39:12.997
> 
> 标签：api, rest, http-status-code-404, httpresponse

在请求构成另一个资源的一部分的资源时，我正在寻找一些关于正确响应代码和消息的指导。

例如，一个 GET 请求：

用户/{id}

如果用户不存在，将返回 404，并显示未找到用户资源的消息。

我的问题是，当没有找到用户资源时，应该返回什么：

用户/{id}/朋友

我目前正在返回与第一个示例相同的代码/消息。我应该返回与朋友资源特别相关的消息吗？我个人认为让 API 客户端知道找不到父资源会更有帮助，以防您有更大的 URI 链。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T00:26:37.530

在这个特定的例子中，如果要让客户端区分一个不存在的用户的好友请求和一个没有好友的用户的好友请求，我认为返回 404 是最有意义的第一种情况，第二种情况下有 200 个空集。

换句话说，“none”对朋友来说是一个有效值。没有用户存在但他们的（可能为空的）朋友列表不存在的情况，因此在为父资源发出 404 时不会有任何歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:06:54.017

我很想返回一个`400 Bad Request`标头，并将错误消息放在响应的正文中。不幸的是，在这种情况下没有正确或错误的答案，所以选择最适合您和您的应用程序的方法。

# java - android是否支持视频裁剪？

> ID：15384268
> 
> 赞同：7
> 
> 时间：2013-03-13T11:39:36.520
> 
> 标签：java, android

我需要对视频实施裁剪操作，是否有任何内置类或第三方库可用，或者是否有任何替代方法。我已经完成了从 android 开发者到 Mr.Google 的演练！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:45:33.830

据我所知，android 没有用于这些视频操作的内置 API。我推荐[FFMPEG](http://ffmpeg.org/faq.html#How-do-I-encode-single-pictures-into-movies_003f)。完成本[教程](http://www.mumuen.com/2012/03/crop-video-using-ffmpeg.html)一次。我已经将[xuggler](http://www.xuggle.com/xuggler)与 java swing 一起使用。它服务很好，我认为它可能会帮助你。

# c++ - 为什么 long long 值打印不正确？

> ID：15384269
> 
> 赞同：1
> 
> 时间：2013-03-13T11:39:49.443
> 
> 标签：c++, printf, long-integer

为什么在下面的代码片段中没有像我预期的那样打印 long long 值？

```
#include <stdio.h>

int main()
{
    int x = 1363177921;
    long long unsigned y = x * 1000000;
    printf("y: %llu\n", y); // Why is 1363177921000000 not printed?
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T11:41:32.397

不是印刷有问题。你有整数溢出：

```
long long unsigned y = x * 1000000; 
```

将其更改为：

```
long long unsigned y = x * 1000000ull; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:42:04.453

因为 your `x`is not a `long long`，也不是`1000000`- 它仅`long long`在乘法之后转换为。

做吧`1000000ULL`，你会得到你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:45:29.703

问题是 x 是 int 并且 1000000 会很长。现在编译器会将它们乘以 2 long，然后将结果转换为 long long

要解决在 x 或 100000 之前添加隐式类型转换或将 x 转换为 long long 的问题，如下所示

```
 #include <stdio.h>

 int main()
 {
         int x = 1363177921;
         long long unsigned y = (long long )x * 1000000;
         printf("y: %llu\n", y); // Why is 1363177921000000 not printed?
         return 0;
 } 
```

[http://codepad.org/rLW8fGTA](http://codepad.org/rLW8fGTA)

# java - JEuclid - 设置从 MathML 转换的图像的大小

> ID：15384274
> 
> 赞同：0
> 
> 时间：2013-03-13T11:40:03.933
> 
> 标签：java, image, mathml

我正在寻找一种在 MathML 到图像转换后设置输出图像尺寸的方法。我写了一个简单的代码：

```
public static void main(String[] args) throws IOException {
    Converter converter = Converter.getInstance();
    converter.convert(new File("C:\\test.html"),
        new File("C:\\out.jpg"), "image/jpeg");
} 
```

test.html 看起来像：

```
<?xml version="1.0"?>
<!DOCTYPE math PUBLIC "-//W3C//DTD MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/mathml2.dtd">
<math mode="display">
  <mrow>
    <munderover>
      <mo>&#x222B;</mo>
      <mn>1</mn>
      <mi>x</mi>
    </munderover>
    <mfrac>
      <mi>dt</mi>
      <mi>t</mi>
    </mfrac>
  </mrow>
 </math> 
```

结果，我得到了一个尺寸为 21x37px 的图像。到目前为止，我已经尝试过（但它不起作用）：

```
MutableLayoutContext params = new LayoutContextImpl(
            LayoutContextImpl.getDefaultLayoutContext());
    params.setParameter(Parameter.?, ?); 
```

你知道我可以操纵这个维度的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:16:31.490

我找到了一种方法，在这里有帮助的参数是：

```
params.setParameter(Parameter.MATHSIZE, 50f); 
```

# c++ - 播放 .wav 文件

> ID：15384276
> 
> 赞同：3
> 
> 时间：2013-03-13T11:40:11.477
> 
> 标签：c++, visual-studio-2010, wav

我正在使用visual studio 2010 express，我正在尝试编写一个简单的程序，它将重复一个波形文件5次（我正在运行一个windows xp sp3）。

据我所知：

```
#include "stdafx.h"
#include <windows.h>
#include <iostream>

using namespace std;   
int main ()
{
    int a = 5;
        while(a >= 1){
            cout << "It's a wav file";
            PlaySound(L"SomeAudioFile-01.wav", NULL, SND_FILENAME);
            --a;
        }
    return 0;
 } 
```

问题是我在构建它时不断收到此错误消息：

```
1>-------- 构建开始：项目：这是一个F**king国家，配置：发布Win32 -- ----
1> mycode.cpp
1>..\..\..\..\..\Shaul 的文档\Visual Studio 2010\Projects\MyProject\Release\SomeAudioFile-01.wav：致命错误 LNK1136：文件无效或损坏
========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

```

该文件非常好，在视觉工作室之外播放没有任何问题。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:47:49.623

不要将`WAV`文件添加到项目文件中，而是将其添加到资源中并使用`SND_RESOURCE`而不是`SND_FILENAME`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:46:03.483

您将声音文件作为目标文件包含在内，因此编译器会尝试与之链接。但它是一个不可链接的二进制文件（这是错误消息所说的）。

不要在项目中包含声音文件，因此环境不会与之链接。

^(PS 今后，请不要在这样的公共网站上使用“坏”字眼。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T21:30:14.997

要消除链接器错误，您还需要告诉 IDE 与**winmm.lib**库链接，因此打开*Project/Properties/Configuration Properties/Linker/Input*并在*Additional Dependencies*字段中附加**winmm.lib 。**

 *此外，使用以下函数配置文件：

PlaySound(L"audio.wav", NULL, SND_APPLICATION);*

# javascript - 在 javascript 中使用 url 包含 cookie

> ID：15384282
> 
> 赞同：0
> 
> 时间：2013-03-13T11:40:21.927
> 
> 标签：javascript, ajax, url, post

在 terinal 我正在使用以下代码获取 post 方法的输出：

```
curl -X POST 'http://localhost:8787/rpc/getSingleSecurity' -d @data -H 'Cookie: user-id=algotree|Mon%C%2013%20Mar%2023%2009%3A48%3A16%20GMT|EVtpHw4dlEYCnrIxUQZORgJXvGk%3D' 
```

我拥有的数据如下：

```
{"method":"getSingleSecurity", "params":[{"ticker":"AAPL"} ], "clientId": "31d0c653-d7e5-44b6-98b5-8c084f99514a", "version":1354777632} 
```

输出如下：

```
{"ep":"false","result":{"CUSIP":["037833100"],"name":["Apple Inc"],"ticker":["AAPL"]}} 
```

我想在javascript中使用输出。如何使用 $.ajax() 方法使用此 url 的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:56:14.630

请参阅下面的代码片段，使用 ajax 进行发布请求。您还可以通过使用 cookie 将其用于经过身份验证的请求，如下所述。

```
var cookie = $.cookie('yourCookieNameHere');
var reqUrl = requestUrl;

jQuery.ajax({
    type: "POST", 
    url: reqUrl, 
    dataType: "json", 
    data: {
        utf8: true, 
        _method:"POST",
        "method":"getSingleSecurity", 
        "params":[{"ticker":"AAPL"} ], 
        "clientId": "31d0c653-d7e5-44b6-98b5-8c084f99514a", 
        "version":1354777632             //replace these with variables if any
    }, 
    Cookie: cookie
}).success(function (response, textStatus, jqXHR){
    // you can use response data from response
    console.log("This is response data " + response);
}); 
```

# extjs - ExtJs 网格分页不起作用

> ID：15384284
> 
> 赞同：0
> 
> 时间：2013-03-13T11:40:28.330
> 
> 标签：extjs, extjs4

我无法让我的网格与分页一起使用。这是我的代码（此代码在用户在 textField 控件中键入一些信息后在 controller.js 中执行）：

```
 var store = Ext.create('App.store.vo.Posts', {
        autoLoad: {
            params: {
                query: textTyped,
                start: 0,
                limit: 10
            },
            callback: function (regs) {
                me.getGrid().reconfigure(store);
                me.getGrid().down('pagingtoolbar').bindStore(store);
            }
        }
    }); 
```

这是我的商店代码：

```
Ext.define('App.store.vo.Posts', {
    extend: 'Ext.data.Store',

    model: 'App.model.vo.Post',
    autoLoad: true,
    autoSync: false
}); 
```

网格正确地填充了数据，但分页被禁用。

更新：

和 Post 模型：

```
Ext.define('App.model.vo.Post', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id', type: 'auto'},
        {name: 'text', type: 'auto'}        
    ],
    idProperty: 'id',
    proxy: {
        type: 'rest',
        url : '/posts',
        format: 'json',
        reader: {
            root: 'data',
            successProperty: 'success',
            totalProperty: 'total'
        },
        writer: {
            // wrap post params for Rails
            getRecordData: function(record) {
                return { post: record.data };
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:46:47.287

我让它以这种方式工作：

```
 //set the 'query' param before load 
    var store = Ext.create('App.store.vo.Posts', {
        listeners: {
            beforeload: function(s,op, ot) {
                op.params = {
                    query: filtro
                }
            }
        }
    });

    store.load({
        callback: function (regs) {
            if (store.data.length > 0) {
                me.getGrid().getView().focus(true, 200);
                me.getGrid().getView().select(0);
            }
        },
        params: {
            query: filtro,
            field: campo,
            start: 0
        }
    });
    me.getGrid().reconfigure(store);
    me.getGrid().down('pagingtoolbar').bindStore(store); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:14:55.240

你应该试试这个（见[`Ext.data.Operation`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Operation)）：

```
autoLoad: {
    start: 0,
    limit: 10,
    params: { ... },
    callback: function () { ... }
} 
```

* * *

## 更新

我想知道是否[`pageSize`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-pageSize)需要进行分页工作。默认值设置为 25，也许您应该根据所需的页面大小设置此属性：

```
var store = Ext.create('App.store.vo.Posts', {
    pageSize: 10 
```

# java - 在java中用'\'替换'\\'字符串

> ID：15384285
> 
> 赞同：2
> 
> 时间：2013-03-13T11:40:37.470
> 
> 标签：java, regex

嗨，我们有一个像`"ami\\303\\261o"`. 我们要替换`\\`为`\`.

我们尝试了以下方法：

1.  `replace("\\", "\")`
2.  `replaceAll("\\", "\")`

但是我们没有得到正确的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:50:55.503

这里不需要正则表达式。转义斜线并使用 replace()

```
someString.replace('\\\\', '\\'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T11:44:33.690

您必须牢记反斜杠转义。利用

```
public class so {
    public static void main(String[] args) {
        String s = "ami\\\\303\\\\261o";
        System.out.println(s);
        s = s.replace("\\\\", "\\");
        System.out.println(s);
    }
}; 
```

每个反斜杠转义以下反斜杠并解析为两个文字字符串`\\`和`\`

还要记住，[`String.replace`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)返回修改后的字符串并保持原始字符串不变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T11:44:09.637

要在 Java 正则表达式中使用，您需要对反斜杠进行两次转义：

```
resultString = subjectString.replaceAll("\\\\\\\\", "\\\\"); 
```

1.  在正则表达式中，`\\`表示“文字反斜杠”。
2.  在 Java 字符串中，`"\\"`对单个反斜杠进行编码。
3.  因此，描述匹配单个反斜杠的正则表达式的 Java 字符串是`"\\\\"`
4.  如果您想匹配两个反斜杠，则`"\\\\\\\\"`相应地是 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:52:21.157

那是因为`\\`您的输入 String 内部`\`由于[Java Escape Character](http://docs.oracle.com/javase/tutorial/java/data/characters.html)而在内部被替换。
这意味着如果你输出你的字符串而不对其执行任何正则表达式，它看起来像这样`"ami\303\261o"`：

通常，您应该记住使用自身转义**每个**转义字符：

```
\ -> escaped = \\  
\\ -> escaped = \\\\  
\\\ -> escaped = \\\\\\  
...and so on 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:53:57.327

试试下面的代码

```
 String val = "ami\\303\\261o"; 
    val =val.replaceAll("\\\\", "\\\\");        
    System.out.println(val); 
```

输出将是

> 亲\303\261o

在这里创建了一个 Fiddle 检查它

[Java 运行示例](http://ideone.com/afgNgH)

# highcharts - 仪表中心值不显示

> ID：15384297
> 
> 赞同：1
> 
> 时间：2013-03-13T11:41:21.460
> 
> 标签：highcharts

我只想知道是否可以删除或不显示包含该值的仪表图中间的框架（在枢轴下方）。我得到了不止一个系列，价值观相互重叠。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:56:02.413

一种方法是，您可以格式化您的**`datalabels`**并且在**`formatter ()`**函数中不返回任何内容。

```
 dataLabels: {
     formatter: function () {
     var kmh = this.y,
     mph = Math.round(kmh * 0.621);                
     }
 } 
```

[**`Fiddled version`**](http://jsfiddle.net/gopinaghr/v9Dtw/). （从 Highchart[演示](http://www.highcharts.com/demo/gauge-dual)示例中调整）

希望这是你需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-17T21:23:23.490

另一种选择是

```
dataLabels: false 
```

文档：[启用仪表数据标签](http://api.highcharts.com/highcharts#plotOptions.gauge.dataLabels.enabled)

# ios - 加速数据检测器

> ID：15384302
> 
> 赞同：1
> 
> 时间：2013-03-13T11:41:39.500
> 
> 标签：ios, objective-c, performance, nsdatadetector

我正在使用 an`NSDataDetector`从字符串中获取地址。我正在调用该方法大约 500 次，它会产生明显的延迟（在 iPhone 4 上大约 3 秒）。有什么办法可以加快速度吗？我尝试将数据检测器移动到静态变量，认为设置需要时间，但没有任何区别。这是代码：

```
- (NSDictionary *)addressDetectorForString:(NSString *)address
{
    if (!address) return nil;

    static NSDataDetector *addressDetector = nil;
    if (!addressDetector) {
        addressDetector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeAddress error:nil];
    }

    NSDictionary *dictionary = nil;

    NSArray* matches = [addressDetector matchesInString:address options:0 range:NSMakeRange(0, [address length])];
    if ([matches count] > 0) {
        for (NSTextCheckingResult *match in matches) { // Only ever one result.
            if ([match resultType] == NSTextCheckingTypeAddress) {
                dictionary = [match addressComponents];
            }
        }
    }
    return dictionary;
} 
```

# c# - 如何获取枚举属性

> ID：15384305
> 
> 赞同：0
> 
> 时间：2013-03-13T11:41:42.123
> 
> 标签：c#, asp.net-mvc

我创建模板编辑器。

```
@model dynamic

@{
    var modelMetadata = Html.GetModelMetadataFor(model => model);
    var selectList = ReflectionHelpers.GetSelectListByEnumFor(modelMetadata);
    String name = //get property name;
} 
```

用 get modelMetadata 没问题

但是我不明白如何获取属性。

在我使用此代码之前：

```
Type enumType = GetNonNullableModelType(metadata);
IEnumerable<TEnum> values = Enum.GetValues(enumType).Cast<TEnum>();

IEnumerable<SelectListItem> items = values.Select(value =>
    new SelectListItem
    {
        Text = GetEnumDescription(value),
        Value = value.ToString(),
        Selected = value.Equals(metadata.Model)
    }); 
```

但是在这个时候我不明白如何服用 TEnum

我的问题是：“如何从枚举创建选择列表”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:12:03.830

您可以编写一个自定义的 html 助手，它将为当前模型生成一个下拉列表（当然假设这个模型是一个枚举）：

```
public static class HtmlExtensions
{
    public static IHtmlString DropDownListForEnum(this HtmlHelper htmlHelper)
    {
        var model = htmlHelper.ViewData.Model;
        if (model == null)
        {
            throw new ArgumentException("You must have a model in order to use this method");
        }
        var enumType = model.GetType();
        if (!enumType.IsEnum)
        {
            throw new ArgumentException("This method works only with enum types.");
        }

        var fields = enumType.GetFields(
            BindingFlags.Static | BindingFlags.GetField | BindingFlags.Public
        );
        var values = Enum.GetValues(enumType).OfType<object>();
        var items =
            from value in values
            from field in fields
            let descriptionAttribute = field
                .GetCustomAttributes(
                    typeof(DescriptionAttribute), true
                )
                .OfType<DescriptionAttribute>()
                .FirstOrDefault()
            let description = (descriptionAttribute != null)
                ? descriptionAttribute.Description
                : value.ToString()
            where value.ToString() == field.Name
            select new { Id = value, Name = description };

        var selectList = new SelectList(items, "Id", "Name", model);
        return htmlHelper.DropDownList("", selectList);
    }
} 
```

然后在你的模板中简单地调用这个助手：

```
@Html.DropDownListForEnum() 
```

* * *

更新：

如果你想拥有模板中的所有代码，你也可以这样做：

```
@using System.ComponentModel
@using System.Reflection
@using System.Linq;
@model object

@{
    var model = Html.ViewData.Model;
    if (model == null)
    {
        throw new ArgumentException("You must have a model in order to use this template");
    }
    var enumType = model.GetType();
    if (!enumType.IsEnum)
    {
        throw new ArgumentException("This method works only with enum types.");
    }

    var fields = enumType.GetFields(
        BindingFlags.Static | BindingFlags.GetField | BindingFlags.Public
    );
    var values = Enum.GetValues(enumType).OfType<object>();
    var items =
        from value in values
        from field in fields
        let descriptionAttribute = field
            .GetCustomAttributes(
                typeof(DescriptionAttribute), true
            )
            .OfType<DescriptionAttribute>()
            .FirstOrDefault()
        let description = (descriptionAttribute != null)
            ? descriptionAttribute.Description
            : value.ToString()
        where value.ToString() == field.Name
        select new { Id = value, Name = description };

    var selectList = new SelectList(items, "Id", "Name", model);
}

@Html.DropDownList("", selectList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:25:13.107

不幸的是，我不知道 asp.net 是如何工作的，但是在 .Net 框架中我使用了这个扩展方法：

```
public static IList<KeyValuePair<T, string>> ToList<T>() where T : struct
{
    var type = typeof(T);

    if (!type.IsEnum)
    {
        throw new ArgumentException("T must be an enum");
    }

    return (IList<KeyValuePair<T, string>>)
            Enum.GetValues(type)
                .OfType<T>()
                .Select(e =>
                {
                    var asEnum = (Enum)Convert.ChangeType(e, typeof(Enum));
                    return new KeyValuePair<T, string>(e, GetEnumDescription(asEnum));
                })
                .ToArray();
} 
```

在winforms中，我可以通过简单地调用将它用于组合框：

```
var pairs = EnumExtension.ToList<ContenAlignment>();
comboBoxFormat.DataSource = pairs;
comboBoxFormat.ValueMember = "Key";
comboBoxFormat.DisplayMember = "Value"; 
```

也许您可以在 asp.net 中根据您的需要更改上述组合框代码。

# java - 如何使带有 IO 任务循环的 java 程序更快？

> ID：15384310
> 
> 赞同：2
> 
> 时间：2013-03-13T11:42:01.107
> 
> 标签：java, io

我编写了一个程序来使用 zip4j 查找 zip 文件的密码。我使用了蛮力方法，因此应使用以下代码在文件中检查每个密码：

```
while(true)
try
{
  zipFile.setPassword(passstr);
  zipFile.extractAll(deststr);
  break;
}
catch (Exception ex2)
{ 
    //passstr = next password string to be checked
} 
```

但这太慢了，因为每次都在循环中重复与 io 相关的任务！有没有其他方法可以检查 zip 文件的密码？还是我需要以某种方式将文件移动到内存并使其更快？或任何其他解决方案来加快速度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:27:38.393

蛮力是一个[令人尴尬的平行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)问题。您应该尝试每个核心使用一个线程来解决此问题。

此外，您应该（如您所说）避免 I/O。为此，找到一种将文件加载到内存并在不使用 I/O 的情况下测试密码的方法。[（根据维基百科](http://en.wikipedia.org/wiki/Zip_%28file_format%29#Encryption)和本[规范](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)，您还应该尝试最小化测试持续时间，似乎 zip 文件可能包含一个加密的标头，这将更快地测试密码 - 如果可以进行一些测试）。

结合并行和内存解决方案，很明显您应该为每个线程使用内存中的文件副本。

最后尝试使用你能找到的最快的解密实现。（用c做吧？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:52:33.193

试试下面的逻辑。

*   启动程序
*   该文件夹的路径应与 java 程序共享。
*   首先根据您的需要在同一文件夹中制作多个 zip 文件的副本。
*   接下来为您创建的每个副本启动单独的线程。
*   使用包含不同暴力字典集的每个线程执行密码破解过程。
*   在类中保留一个公共标志，该标志最初为假，每个线程将遵循该标志执行
*   最后，当任何线程通过解决方案返回 true 时，它​​会设置标志并且所有其他线程停止处理。

线程数可以根据需要或性能设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:08:08.727

正如 Vineet 已经提到的，应用线程将在一定程度上提高性能。然而，更复杂的方法是：

*   确定文件正在使用什么加密算法
*   将文件一次读入内存
*   启动多个线程以使用您生成的密码解密原始数据
*   根据库/解密机制，您将得到一个异常或随机的比特混乱 - 在这种情况下，检查 zip 文件的文件签名的前几个字节。

如果保护文件的人知道如何生成安全密码，请准备好等待几千年！

# ios - 在循环中使用 CAKeyframeAnimation 和 CAAnimationGroup 动画视图（层）

> ID：15384322
> 
> 赞同：1
> 
> 时间：2013-03-13T11:42:27.620
> 
> 标签：ios, animation, view, timing, cakeyframeanimation

我正在尝试使用 CAKeyframeAnimation 和 CAAnimationGroup 为多个视图（图层）设置动画。每个要动画的视图都包含在一个数组中。我的想法是遍历数组，其中每个视图的 CAKeyframeAnimation 实例将添加到动画数组中，然后将添加到 CAAnimationGroup 中。我的目标是一个接一个地为每个视图设置动画。据我了解，我需要使用该组才能获得 beginTime 的参考。

我可能遗漏了一些明显的东西，但我的代码不起作用

```
CAAnimationGroup *cardAnimationGroup = [CAAnimationGroup animation];
cardAnimationGroup.delegate = self;
cardAnimationGroup.removedOnCompletion = NO;
cardAnimationGroup.beginTime = 0.0f;
[cardAnimationGroup setValue:@"animation0" forKey:@"id"];
cardAnimationGroup.duration = 1.2f * [_myViewsArray count];

NSMutableArray *animationsArray = [[NSMutableArray alloc] init];

// Loop through views
for (UIView *cardView in _myViewsArray)
{

    NSUInteger index = [_myViewsArray indexOfObject:cardView];
    // my target origin
    CGFloat yOffset = (-(cardView.frame.origin.y - _middleCardView.frame.origin.y) - index * 2);

    CAKeyframeAnimation *translateCardPositionAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform.translation.y"];
    translateCardPositionAnimation.removedOnCompletion = YES;
    //translateCardPositionAnimation.fillMode = kCAFillModeForwards;
    translateCardPositionAnimation.beginTime = 1.2f * index;
    translateCardPositionAnimation.duration = 1.2f;

    translateCardPositionAnimation.values = [NSArray arrayWithObjects:
                                                   [NSNumber numberWithFloat:0.0f],
                                                   [NSNumber numberWithFloat:yOffset],
                                                   [NSNumber numberWithFloat:yOffset],nil];

    translateCardPositionAnimation.keyTimes = [NSArray arrayWithObjects:
                                                     [NSNumber numberWithFloat:0.0f],
                                                     [NSNumber numberWithFloat:1.0f],
                                                     [NSNumber numberWithFloat:1.2f], nil];

    [_containerCardView addSubview:cardView];
    [_containerCardView sendSubviewToBack:cardView];

    [animationsArray addObject:translateCardPositionAnimation];
    [cardView.layer addObject:translateCardPositionAnimation forKey:@"id"];

    if (index == [_myViewsArray count]-1) {
        [cardAnimationGroup setAnimations:animationsArray];

    }

} 
```

# android - Google Auth2 为获取访问令牌和刷新令牌提供“invalid_request”响应

> ID：15384323
> 
> 赞同：3
> 
> 时间：2013-03-13T11:42:29.807
> 
> 标签：android, http-post, google-authentication

如何获取 XMPP 谷歌身份验证的访问令牌和刷新令牌。我成功获得了授权码，但现在我需要获取访问令牌和刷新令牌。但是当我在 Android 中使用下面的代码发出请求时，我得到了响应：{“error”：“invalid_request”}

```
HttpPost request = new HttpPost("https://accounts.google.com/o/oauth2/token" );         
json.put("client_id", "128232338269.apps.googleusercontent.com" );
json.put("client_secret", "eufZ8Rmjsk1MaADYsHYW" );
json.put("redirect_uri", "urn:ieadsdg:oauth:2.0:oob");
json.put("code", res_code);
json.put("grant_type", "authorization_code");

StringEntity se = new StringEntity(json.toString());

Log.i(TAG, "JSON********" +json.toString());
se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
request.setEntity(se);

/* Checking response */  
response = client.execute(request); 
```

但我收到该代码的此错误。`Response = { "error" : "invalid_request" }`

这里有什么问题。HttpPost 方法对于这个 url 是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:02:31.637

经过一番交谈，我们发现了问题出在哪里。有效负载错误并且内容类型设置错误。以下代码是解决方案：

```
 HttpClient client = new DefaultHttpClient();
    HttpPost request = new HttpPost("https://accounts.google.com/o/oauth2/token" );
    request.setHeader("Content-type", "application/x-www-form-urlencoded");

    //Please make this custom with you're credentials
    String requestBody = "code=123123132&client_secret=eufFgyAZ8Rmjsk1MaADYsHYW&redirect_uri=urn:ietf:wg:oauth:2.0:oob&grant_type=authorization_code&client_id=128169428269.apps.googleusercontent.com";

    try {
        request.setEntity(new StringEntity(requestBody));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }

    /* Checking response */
    try {
        HttpResponse response = client.execute(request);
        String results = "ERROR";
        results = EntityUtils.toString(response.getEntity());
        Log.d("STACK", "Response::" + results);
    } catch (IOException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } 
```

# iphone - 如果该日期已经过去，则将该日期的年份加一

> ID：15384325
> 
> 赞同：1
> 
> 时间：2013-03-13T11:42:31.730
> 
> 标签：iphone, ios, date

我有一个包含出生日期的数组，如下所示：

```
 Array(
"11/07/2013",
"07/10/2013",
"20/02/2013"
) 
```

现在我想根据日期是否已过创建一个新数组。在 2013 年写这个问题，如果当前日期已经过去，那么我们将该日期的年份更改为 2014 年。如果还没有过去，那么我们将保持 2013 年的日期。

例如：

```
NewArray(
 "11/07/2013",    no change cus this date hasnt passed yet
 "07/10/2013",     no change same as above
 "20/02/2014"     **as date has already passed thats why 2014** 
```

我为此使用以下代码

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
   [dateFormatter setDateFormat:@"dd/MM/yyyy"];
NSString *curYear = [dateFormatter stringFromDate:[NSDate date]];
NSString *nextYear = [NSString stringWithFormat: @"%d", ([curYear intValue] + 1)];
for(int i = 0; i < [_newlymadeArray count]; i++)
{
    NSString *dateStr = [_newlymadeArray objectAtIndex:i];
    NSComparisonResult comResult = [[dateFormatter dateFromString:dateStr] compare:    [NSDate date]];
    if(comResult == NSOrderedAscending)
    {
        [dateStr stringByReplacingOccurrencesOfString:curYear withString:nextYear];
        [_newlymadeArray replaceObjectAtIndex:i withObject:dateStr];
         NSLog(@"_newlymadeArray%@",_newlymadeArray);
    }
NSLog(@"_newlymadeArray%@",_newlymadeArray); 
```

然而，这是我在 NSLog 时得到的`_newlymadeArray`：

```
 after replacing (
 "11/07/2013",
 "07/10/2013",
 "20/02/2013"       
 ) 
```

在索引 2**处，它应该是“20/02/2014”**而不是 2013 年的日期。什么可能导致我的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:01:55.893

我对您的代码进行了一些修改，它可以按您的意愿工作。

在我的代码中，我比较了日期，它是当前日期的升序形式。如果它满足条件，那么我已经通过 DateFormatter“yyyy”从匹配的日期获取 YEAR。然后我简单地将今年增加 1，并将今年替换为旧日期，即“20/02/ **2013** ”​​到“ **20/02/2014** ”

```
array = [[NSMutableArray alloc] initWithObjects:@"11/07/2013",@"07/10/2013",@"20/02/2013", nil];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/MM/yyyy"];
for(int i = 0; i < [array count]; i++)
{
    NSString *dateStr = [array objectAtIndex:i];
    NSComparisonResult comResult = [[dateFormatter dateFromString:dateStr] compare:    [NSDate date]];
    if(comResult == NSOrderedAscending)
    {
        NSDateFormatter *yrFormatter = [[NSDateFormatter alloc] init];
        [yrFormatter setDateFormat:@"yyyy"];
        NSString *curYear = [yrFormatter stringFromDate:[NSDate date]];
        NSString *nextYear = [NSString stringWithFormat: @"%d", ([curYear intValue] + 1)];

        NSLog(@"%@",curYear);
        NSLog(@"%@",nextYear);

        dateStr = [dateStr stringByReplacingOccurrencesOfString:curYear withString:nextYear];
        NSLog(@"%@",dateStr);
        [array replaceObjectAtIndex:i withObject:dateStr];
        NSLog(@"_newlymadeArray%@",array);
    }
    NSLog(@"_newlymadeArray%@",array);
} 
```

这似乎工作得很好，所以我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:53:41.780

请亲爱的尝试使用这个。我认为这个可能会有所帮助

```
 NSCalendar*       calendar = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
    NSDateComponents* components = [[NSDateComponents alloc] init];
    components.year = 1;
    NSDate* newDate = [calendar dateByAddingComponents: components toDate:@"YourDate" options: 0]; 
```

否则，您可以使用此代码。

```
 if (comResult == NSOrderedSame)
   {
       NSCalendar*       calendar = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
    NSDateComponents* components = [[NSDateComponents alloc] init];
    components.year = 1;

    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    [formatter setDateFormat:@"dd/MM/yyyy"];

    NSDate *date = [formatter dateFromString:@"11/07/2013"];

    NSDate* newDate = [calendar dateByAddingComponents: components toDate:date options: 0];
   // here replace your array object with this "newDate"

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:54:46.330

使用函数将您的数组日期与今天的日期进行比较`NSDate compare`。以下是详细信息：

```
NSString *arrayDateString = @"20/02/2013" // fetch this string from your array
NSDate *todaysDate = [NSDate date];

NSDateFormatter* df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"dd/MM/yyyy"];
NSDate* d = [df dateFromString:arrayDateString];

// now compare this date (d) with todaysDate using NSDate function
if ([d compare:todaysdate]== NSOrderedAscending)  
{//write your code here} 
```

如果结果`NSOrderedAscending`为 ，则表示数组日期早于今天的日期。

因此，对于该日期，使用以下方法更新年份加一`NSDateComponents`：

```
NSDateComponents *dayComponent = [[[NSDateComponents alloc] init] autorelease];
dayComponent.year = 1;

NSCalendar *theCalendar = [NSCalendar currentCalendar];
dateToBeIncremented = [theCalendar dateByAddingComponents:dayComponent toDate:dateToBeIncremented options:0]; 
```

或者您可以使用`NSDate`函数本身：

```
NSDate *now = arrayDate;
int yearsToAdd = 1;
NSDate *newDate1 = [now dateByAddingTimeInterval:60*60*24*365*year]; 
```

但第二个选项不是完全证明 - 因为闰年问题。

希望这两个选项对您有所帮助，以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:19:18.313

```
NSArray * array = [[NSArray alloc]   initWithObjects:@"11/07/2013",@"07/10/2013",@"20/02/2013", nil];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/MM/yyyy"];
NSDate *now = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
NSMutableArray *output = [NSMutableArray new];

for(int i = 0; i < [array count]; i++)
{
    NSString *dateStr = [array objectAtIndex:i];
    NSDate *date = [dateFormatter dateFromString:dateStr];
    if ([date compare:now] == NSOrderedAscending)
    {

        [components setYear:1];
        date = [calendar dateByAddingComponents:components toDate:date options:0];

    }
    dateStr = [dateFormatter stringFromDate:date];
    [output addObject:dateStr];

}
NSLog(@"Result : %@",output); 
```

# javascript - 用于存储用户界面首选项的 html5 网络存储

> ID：15384400
> 
> 赞同：0
> 
> 时间：2013-03-13T11:45:55.267
> 
> 标签：javascript, html, css, local-storage

我需要一些代码的帮助，伙计们。我想使用媒体存储来存储一组用户的用户界面值。我正在考虑通过样式表提供多种样式，但无法弄清楚如何让用户偏好保留默认样式表，我是否需要在 html5 存储中使用某种 javascript 触发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:58:10.160

您可以使用 localStorage 保存键/值对：

```
localStorage.setItem('alpha','beta'); 
```

您可以稍后使用以下方法从 localStorage 中获取值：

```
localStorage.alpha; 
```

或者

```
localStorage.getItem('alpha'); 
```

然后，您可以使用一些 javascript 根据从 localStorage 检索到的值更改样式表。

# c# - 下载功能失败，文件大小为 1.35gb

> ID：15384407
> 
> 赞同：3
> 
> 时间：2013-03-13T11:46:12.610
> 
> 标签：c#, .net, download

我有这个下载功能，效果很好。但是对于文件大小为 1.35gb 的文件，下载停止在 300 Mb、382、400mb 或 1.27 Gb。我究竟做错了什么？*（下载功能是这样制作的，因为文件需要隐藏，可能不会在网站上发布。）*

```
public static void downloadFunction(string filename)
{
    string filepath = @"D:\texts\New folder\DLfolder\" + filename;
    string contentType = "application/x-newton-compatible-pkg";

    Stream iStream = null;
    // Buffer to read 10K bytes in chunk
    //byte[] buffer = new Byte[10000];
    // Buffer to read 1024K bytes in chunk

    byte[] buffer = new Byte[1048576];

    // Length of the file:
    int length;

    // Total bytes to read:
    long dataToRead;

    try
    {
        // Open the file.
        iStream = new FileStream(filepath, FileMode.Open, FileAccess.Read, FileShare.Read);

        // Total bytes to read:
        dataToRead = iStream.Length;
        HttpContext.Current.Response.ContentType = contentType;
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + HttpUtility.UrlEncode(filename, System.Text.Encoding.UTF8));
        HttpContext.Current.Response.AddHeader("Content-Length", iStream.Length.ToString());

        // Read the bytes.
        while (dataToRead > 0)
        {
            // Verify that the client is connected.
            if (HttpContext.Current.Response.IsClientConnected)
            {
                // Read the data in buffer.
                length = iStream.Read(buffer, 0, 10000);

                // Write the data to the current output stream.
                HttpContext.Current.Response.OutputStream.Write(buffer, 0, length);

                // Flush the data to the HTML output.
                HttpContext.Current.Response.Flush();

                buffer = new Byte[10000];
                dataToRead = dataToRead - length;
            }
            else
            {
                // Prevent infinite loop if user disconnects
                dataToRead = -1;
            }
        }
    }
    catch (Exception ex)
    {
        // Trap the error, if any.
        HttpContext.Current.Response.Write("Error : " + ex.Message + "<br />");

        HttpContext.Current.Response.ContentType = "text/html";
        HttpContext.Current.Response.Write("Error : file not found");
    }
    finally
    {
        if (iStream != null)
        {
            //Close the file.
            iStream.Close();
        }
        HttpContext.Current.Response.End();
        HttpContext.Current.Response.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:53:02.653

您可能已达到请求超时。请注意，如果文件在某个预定时间后停止下载，例如 60 或 300 秒。如果是这种情况，您可以在应用程序的 web.config 中配置超时。

# javascript - C# 函数返回一个值并显示在网页中

> ID：15384416
> 
> 赞同：3
> 
> 时间：2013-03-13T11:46:39.037
> 
> 标签：javascript, asp.net, ajax, asp.net-ajax

我在我的 apx.cs 文件中的 C# 中创建了以下函数

```
[WebMethod]
public static string  SendForm()
{
    string message = "hello world";
    return message;
} 
```

当我的脚本在我的 aspx 文件中调用该函数时，我试图显示消息（“hello world”）

```
<script>
    function SendForm() {
        var msg;
        msg = PageMethods.SendForm(OnSucceeded, OnFailed);

        function OnSucceeded() {
            alert(msg);
        }

        function OnFailed(error) {
            // Alert user to the error.
            alert("failed");
        }
    }
</script>
    <body>
    <form id="Form1" runat="server">
   <asp:ScriptManager ID="ScriptManager" runat="server"
       EnablePageMethods="true" />
   <fieldset id="ContactFieldset">
        <input type="button" onclick="return SendForm()" value="send" />
   </fieldset>
</form>
</body> 
```

当我单击按钮发送时，我收到一条带有消息“未定义”的警报，因此我的 var 'msg' 未定义，但是如何将 C# 函数中的“hello world”放入 msg var 中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:51:09.107

尝试使用

```
 function OnSucceeded() {
        alert(msg.d);
    } 
```

## 编辑-1

请通过此链接
[如何使用 ScriptManager 调用特定的类方法](https://stackoverflow.com/questions/634661/how-do-i-call-a-particular-class-method-using-scriptmanager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:56:39.883

```
 function SendForm() {
        var msg;
        msg = PageMethods.SendForm(function (result) {
            alert(result);
        }, function (error) {
            alert(error);
        });
    } 
```

这应该有效。

如果从 SendForm 方法抛出异常，它会自动转到错误方法。

```
[WebMethod]
public static string  SendForm()
{
    throw new Exception("Error");

    string message = "hello world";
    return message;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:59:28.443

那不是您接收消息的方式。

像这样做

```
 function SendForm() {
        PageMethods.SendForm(OnSucceeded, OnFailed);

        function OnSucceeded(msg) {
            alert(msg);
        }

        function OnFailed(error) {
            // Alert user to the error.
            alert("failed");
        }
    } 
```

您的成功函数将接收函数调用的结果作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:07:12.980

我不确定您使用的是哪个版本的 .Net 框架，但如果它是 3.5，那么您可能需要查看以下链接：

[http://encosia.com/a-break-change-between-versions-of-aspnet-ajax/](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)

在 asp.net 3.5 及以后版本中，响应包含在 .d 中。

# ios - 使用实例变量/属性/与 ARC 合成的正确方法

> ID：15384422
> 
> 赞同：6
> 
> 时间：2013-03-13T11:46:59.873
> 
> 标签：ios, objective-c, automatic-ref-counting, synthesize

在 ARC 项目中工作时，使用实例变量（在接口上声明）、它们`@property`的正确方法是什么？`@synthesize`我现在要做的是：

SomeClass.h：

```
@interface SomeClass : NSObject {
  NSString *someString;
}
@property(nonatomic, copy) NSString* someString; 
```

和 SomeClass.m：

```
@implementation SomeClass

@synthesize someString;

- (void)someMethod {
  self.someString = @"Foobar";
} 
```

问题是还有其他可行的方法，比如只使用@property：

SomeClass.h：

```
@interface SomeClass : NSObject
@property(nonatomic, copy) NSString* someString; 
```

访问`someString`没有`self`：

SomeClass.m：

```
@implementation SomeClass

@synthesize someString;

- (void)someMethod {
  someString = @"Foobar";
} 
```

等等。我是 Objective-c 的新手，我已经习惯了 Java。那么使用属性的正确方法是什么？我知道特殊情况会有特殊行为，但一般来说最好的方法是什么？（一般来说，我的意思是我想从类本身和“外部”访问变量，并且我希望 ARC 仍然可以正常工作，例如，我不必担心内存泄漏）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T12:22:28.790

对于简单的属性，您不需要实例变量声明或`@synthesize`. 默认情况下，clang 编译器将为您生成两者。所以你可以在标题中写下：

```
@interface SomeClass : NSObject

@property (nonatomic, copy) NSString *someString;

@end 
```

和实施：

```
@implementation SomeClass

- (void)someMethod {
    self.someString = @"Foobar";
}

@end 
```

避免直接访问实例变量，除非您在`-init`方法中或覆盖 setter。在其他任何地方，您都应该使用点语法 ( `self.someString`)。如果您确实需要访问实例变量，默认合成将创建一个下划线前缀的 ivar，例如`_someString`.

请注意，对于具有可变版本（如`NSString`/`NSMutableString`和`NSArray`/ `NSMutableArray`）的类，标准做法是使用`copy`属性。如果你`strong`在字符串或数组上使用，调用者可能会传入一个可变版本，然后从你下面改变它，从而导致难以发现的错误。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T11:57:58.897

查看[此 SO 帖子](https://stackoverflow.com/questions/9859719/xcode-property-attributes-nonatomic-copy-strong-weak)以获取有关 ARC 的信息。

（已*编辑*）“strong”属性告诉 ARC 保留一个对象，直到具有该属性的对象被释放。您确实需要“复制”属性，因为 NSString 属性可以作为 NSMutableString 传入。“副本”保证原始对象将被保留。再次，对于我最初在这里获得的不正确/误导性信息，我深表歉意。

您可以访问*实例变量* `someString`和*属性* `self.someString`的原因是该`@synthesize someString`行为属性创建了一个实例变量，并创建了获取和设置其值的方法。但是，建议您使用属性而不是直接使用实例变量，因为通过使用实例变量，您无法让父对象知道您已更改其属性之一。

# jquery - 使用 $.ajax() 保存时删除的字符

> ID：15384423
> 
> 赞同：0
> 
> 时间：2013-03-13T11:47:02.157
> 
> 标签：jquery, ajax, save

我有一个我写 javascript 的文本区域。我想用 $.ajax() 保存 javascript 代码。问题是 + 号和第一个 & 之后的所有内容都被删除了。

有没有人对此有任何提示，或者可以给我一个正确方向的线索？

这是我的 jQuery 代码：

```
$("#save").click(function(){
    var code = editor.getValue(); 
    $.ajax({ 
        type: "POST", 
        url: "save.php", 
        data: "id=1&code="+ code, 
        contentType: "application/x-www-form-urlencoded;charset=ISO-8859-1",
        success: function(html){             
            alert("Done");
        } 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:48:36.417

jQuery 自动为您序列化数据，因此您可以发送一个对象：

```
$("#save").click(function(){
    var code = editor.getValue(); 
    $.ajax({ 
        type: "POST", 
        url: "save.php", 
        data: { id: 1, code: code }, 
        contentType: "application/x-www-form-urlencoded;charset=ISO-8859-1",
        success: function(html){             
            alert("Done");
        } 
    }); 
}); 
```

# jquery - CSS 和脚本在可滚动的 div 中实现相当大的 div 中的多个 div

> ID：15384425
> 
> 赞同：2
> 
> 时间：2013-03-13T11:47:17.273
> 
> 标签：jquery, css

也许是今天最不寻常的问题标题！

我正在尝试在我的网站上实现一些我遇到了难以置信的困难的事情，并希望有人可以向我展示我的方式的错误，或者建议我是否以完全错误的方式处理这个问题。

考虑以下：

```
1-----------------------------------------------------------------------+
|2--------+ 3---------------------+ 4-------------+                     |
||        | |                     | |             |                     |
|| a-+    | | b-+ c-+ d-+ e-+ f-+ | | g-+ h-+ i-+ |                     |
|| | |    | | | | | | | | | | | | | | | | | | | | |                     |
|| +-+    | | +-+ +-+ +-+ +-+ +-+ | | +-+ +-+ +-+ |                     |
||        | |                     | |             |                     |
|+--------+ +---------------------+ +-------------+                     |
+-----------------------------------------------------------------------+

|<--------------- SCREEN WIDTH --------------->| 
```

根据与我想要的布局相关的数字和字母，这是我想要实现的目标：

1 = 一个“容器”，高度固定，不比屏幕宽度宽（给或取边距等，使其适合屏幕中心）。

这个“容器”还需要一个水平滚动条，以便用户可以滚动它的内容。

在这个容器中还有另外 3 个容器，分别标记为 2、3 和 4。它们的大小会有所不同，但从不包含滚动条，但是每个容器随着它的增长，都需要保留在容器 1 中并且从不垂直滚动。

在 2、3 和 4 中，可以插入额外的容器（小部件），从而使其父容器增长。

正如您在我的布局中看到的，容器 2 有“小部件”a，容器 3 有小部件 b、c、d、e 和 f，容器 4 有小部件 g、h 和 i。

添加我管理的所有内容的 jQuery/Javascript 没有问题，但实际的 CSS 和“布局”我遇到了问题。

我已经制作了容器 1，`'white-space:nowrap;'`因此这消除了垂直滚动，并且使用类似于 的 jQuery`$('#containerA').append([something]);`还将“小部件”添加到相应的容器（2、3 或 4）中。

目前我的HTML如下：

```
 <div id="divfieldWidgets" style="width:auto;margin-top:40px;background-color:#FFFFFF;border:1px solid gray;height:320px;left:50px;right:50px;-moz-box-shadow: 4px 4px 2px #888;-webkit-box-shadow: 4px 4px 2px #888;box-shadow: 4px 4px 2px #888;overflow:hidden;margin-left:60px;margin-right:60px;overflow:scroll;">
                    <div style="white-space:nowrap;float:left;">
                        <div id="divFieldWidgetsProductAndMarketing" style="background-color:#FFEEEE;height:100%;width:auto;white-space:nowrap"></div>
                        <div id="divFieldWidgetsYears" style="background-color:#EEFFEE;height:100%;width:auto;white-space:nowrap"></div>
                        <div id="divFieldWidgetsCalculations" style="background-color:#EEEEFF;height:100%;"></div>
                    </div>
                </div> 
```

这在某些部分实现了我想要的（即，仅当添加“小部件”时，主容器的水平滚动以及容器 2、3 和 4 的大小），但正如您所看到的，并非全部在一起。

真的很感激这方面的一些帮助。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:33:48.007

如果您希望您的`float:left`div 水平增长并避免垂直滚动，则需要将您的 div 包裹`divs`在一个具有固定水平宽度的更大 div 中，即

您可以通过以下步骤接近您想要实现的目标：

*   使您的容器 1 具有非常高的宽度。您可以通过静态指定宽度或计算内部 div 的宽度并通过 javascript 将其分配给它来做到这一点

*   现在，您的内部 div 即 2,3,4 将是`width:auto`and `float:left`, (4 也可以`float:right`)

*   现在，您的内部 div 将具有您想要水平对齐的 div，即容器 3 中的 b、c、d、e、f：您希望它们水平对齐，因此您必须给 3 一个静态宽度，以及这些 b、c、d、e、fa`width:auto`
*   现在，由于您不知道应该为 2,3 和 4 赋予什么宽度，因此您必须通过 javascript 计算每个 div 内部的单个 div 的宽度并将总和分配给它们。IE

    width(3) = width(b) + width(c) + width(d) + width(e) + 30px =（比内容 div 的实际总和多一点）

所以，基本点是，对于水平对齐和没有垂直滚动，父容器应该有固定的宽度。

现在看到这个[小提琴](http://jsfiddle.net/manishmishra256/Nxbvh/)，我已经为容器提供了静态宽度。你已经通过javascript代码得到了。

另外，看看溢出属性。经历[这个](https://stackoverflow.com/questions/258372/css-div-element-how-to-show-horizontal-scroll-bars-only)和[这个](https://stackoverflow.com/questions/443700/div-with-horizontal-scrolling-only)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T12:06:09.163

我认为父 div 应该是 100%，子 div 应该向左浮动。保持溢出滚动水平，但不允许垂直滚动。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-13T15:39:14.447

如果我正确理解了您想要的行为，您*可以*在不设置静态宽度的情况下执行此操作并保留您对水平滚动的渴望。

[http://codepen.io/cimmanon/pen/HCKEx](http://codepen.io/cimmanon/pen/HCKEx)

```
#divfieldWidgets {
  max-width: 100%; /* modified */
  margin-top:40px;
  background-color:#FFFFFF;
  border:1px solid gray;
  height:320px;
  -moz-box-shadow: 4px 4px 2px #888;
  -webkit-box-shadow: 4px 4px 2px #888;
  box-shadow: 4px 4px 2px #888;
  overflow:hidden;
  margin-left:60px;
  margin-right:60px;
  overflow-x:scroll; /* modified */
}

.grouper {
  display: table-cell;
}

.grouper div {
  display: table-cell;
}

#divFieldWidgetsProductAndMarketing {
  background-color:#FFEEEE;
}

#divFieldWidgetsYears {
  background-color:#EEFFEE;
}

#divFieldWidgetsCalculations {
  background-color:#EEEEFF;
} 
```

的HTML：

```
<div id="divfieldWidgets">
    <div class="grouper"><!-- added a class here -->
        <div id="divFieldWidgetsProductAndMarketing">a</div>
        <div id="divFieldWidgetsYears">b</div>
        <div id="divFieldWidgetsCalculations">c</div>
    </div>

  <div class="grouper">
    <div>a</div>
    <div>b</div>
    <div>c</div>
    <div>d</div>
    <div>e</div>
  </div>
</div> 
```

关键是使用`display: table-cell`. 您的元素被迫连续出现，并且它们的父容器会增长以包含它们。

# php - 亚马逊 ec2 中的 url 映射

> ID：15384426
> 
> 赞同：0
> 
> 时间：2013-03-13T11:47:23.893
> 
> 标签：php, amazon-web-services, amazon-ec2, amazon

我正在使用 amazon `EC2 instanc`e 在一个站点上工作，我们创建了两个实例让`EC1`和`EC2`. 我们有我们的`EC1`网站，我们已经映射了`www.example.com`。另一个实例`EC`2 有我们的主要应用程序。现在我们想要的是，如果有人输入，`www.example.com`那么它应该被重定向到`EC1 instance`，如果他输入，`www.example.com/anyThingHeTypes`那么他应该被重定向到`EC2 instance`. 有可能`Amazon instances`吗？如果是，那么请帮助我们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:50:05.800

使用子域更容易做到这一点。由于 DNS 可以将流量直接发送到第二个实例。如果您想使用文件夹执行此操作，则需要将您的网络服务器配置为实例 2 的反向代理。

# mysql - MySQL：将字段默认值设置为其他列

> ID：15384429
> 
> 赞同：32
> 
> 时间：2013-03-13T11:47:31.683
> 
> 标签：mysql, default, default-value

如何将字段的默认值设置为 MySQL 中的其他列？

我已经在 Oracle 中使用虚拟字段完成了它，但我不知道如何在 MySQL 中完成它。

这是我的桌子：

```
CREATE TABLE TSM_TRANSACTION_TBL
(
  TRANS_ID     INT primary key auto_increment,
  LOCATION_ID  INT,
  TRANS_DATE   DATE,
  RESOURCE_ID  INT,
  TS_ID        INT,
  MAX_VALUE    INT,
  BOOKED_UNITS INT default 0,
  REMAINING    INT default MAX_VALUE - BOOKED_UNITS,
  BOOKED       INT not null,
  USER_ID      INT,
  TRANS_TIME   TIMESTAMP
); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T11:53:11.550

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-31T11:40:32.157

对于 AFTER 插入触发器，“NEW”是不可接受的。您应该通过 BEFORE 插入触发器执行“字段更新”。所以，

```
CREATE TRIGGER foo BEFORE INSERT ON TSM_TRANSACTION_TBL FOR EACH ROW
    IF NEW.REMAINING IS NULL THEN
        SET NEW.REMAINING := NEW.MAX_VALUE - NEW.BOOKED_UNITS;
    END IF;; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-28T18:26:30.297

从[MySQL 8.0.13 开始](https://dev.mysql.com/doc/refman/8.0/en/data-type-defaults.html#data-type-defaults-explicit)，您可以引用另一列作为列的默认值。

> 一个列的表达式默认值可以引用其他表列，但对生成的列或具有表达式默认值的列的引用必须是表定义中较早出现的列。也就是说，表达式默认值不能包含对生成的列或具有表达式默认值的列的前向引用。

```
CREATE TABLE table1 (
  id int NOT NULL AUTO_INCREMENT,
  name varchar(250) NOT NULL,
  name_url varchar(250) NOT NULL DEFAULT (`name`),

  created datetime NOT NULL DEFAULT (UTC_TIMESTAMP()),
  modified datetime NOT NULL DEFAULT (UTC_TIMESTAMP()),

  PRIMARY KEY (id),
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci; 
```

# accordion - 我想做一个手风琴，我想让它像我找到的网站一样运作

> ID：15384430
> 
> 赞同：0
> 
> 时间：2013-03-13T11:47:32.467
> 
> 标签：accordion, jquery-ui-accordion

它必须能够在 Wordpress 中运行，并且还必须能够容纳我希望的尽可能多的“部分”。它还必须能够拥有多个手风琴实例，每个实例具有不同的信息。我得到这个想法的网站是[http://www.steppenwolf.org/Plays-Events/](http://www.steppenwolf.org/Plays-Events/)。

我几乎没有使用 javascript 的经验，但我精通 HTML 和 CSS。

我不是要你为我做这个，只是帮助我建造这样的东西。

我希望能够使用无序列表来形成手风琴：

```
<ul class="accordion-1">
    <li class="accordion-item-1"></li>
    <li class="accordion-item-2"></li>
    <li class="accordion-item-3"></li>
    <li class="accordion-item-4"></li>
</ul>
<ul class="accordion-2">
    <li class="accordion-item-5"></li>
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:52:56.660

我建议看看是否已经有可用的插件。我快速搜索并找到了一个 jQueryUI - [http://wordpress.org/extend/plugins/jquery-ui-widgets/](http://wordpress.org/extend/plugins/jquery-ui-widgets/)

这将允许您使用[Accordian 插件](http://jqueryui.com/accordion/)

# excel - 如果列名匹配数据验证，则扩展 VB 代码以填充 Excel 单元格

> ID：15384432
> 
> 赞同：0
> 
> 时间：2013-03-13T11:29:05.647
> 
> 标签：excel, vba

我们目前在 Excel 工作簿中有一些 VB 代码，它允许多次选择数据验证（列表下拉列表）选项，然后对于从列表中选择的每个下拉项目，它在行尾输出选项，一个选项每列。

即：从下拉列表中选择 Apples、Bananas 和 Cherries 将输出 Apples | 香蕉 | 樱桃（其中 | 是列分隔符）位于第一个单元格为空的行的末尾。

我们为此提供的代码是：-

```
Option Explicit
Private Sub Worksheet_Change(ByVal Target As Range)
On Error GoTo exitHandler

Dim rngDV As Range
Dim iCol As Integer

If Target.Count > 1 Then GoTo exitHandler

On Error Resume Next
Set rngDV = Cells.SpecialCells(xlCellTypeAllValidation)
On Error GoTo exitHandler
If rngDV Is Nothing Then GoTo exitHandler
If Intersect(Target, rngDV) Is Nothing Then
   'do nothing
Else
  Application.EnableEvents = False
   If Target.Column = 3 Then
    If Target.Value = "" Then GoTo exitHandler
    If Target.Validation.Value = True Then
     iCol = Cells(Target.Row, Columns.Count).End(xlToLeft).Column + 1
     Cells(Target.Row, iCol).Value = Target.Value
   Else
     MsgBox "Invalid entry"
     Target.Activate
    End If
  End If
End If

exitHandler:
  Application.EnableEvents = True

End Sub 
```

然而，我们想在这个 VB 代码中修改的是，而不是在行尾填充单元格并选择数据验证。我们想填充列标题与从下拉列表中选择的选项匹配的列下的单元格。

即：在下拉列表中选择的苹果将填充该行上标有“苹果”的列下的单元格。在下拉列表中选择的樱桃将填充该行上标有“樱桃”的列下的单元格。理想情况下，通过填充，我们会为该单元格着色或在其中放置一个 X，而不是重复所选项目的名称。

如果有人可以建议我们需要在上面的代码中修改什么，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:56:09.557

代替

```
Cells(Target.Row, iCol).Value = Target.Value 
```

为了

```
Cells(Target.Row, Range(Target.Value).Column).Value = "X" 
```

请注意：只有在您命名标题单元格时它才会起作用。`Range("Banana")`例如，将引用您命名为“香蕉”的单元格。

要命名，请使用屏幕左上角的文本框。该文本框最初只包含单元格坐标，例如“A1”、“B2”等。单击您要命名的标题单元格，转到此文本框并输入“香蕉”或任何其他与您的下拉值匹配的名称。用所有下拉值命名所有标题（缺少一个会导致错误）。

（你可以放弃 iCol 计算）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:54:30.303

我已按照您的要求修改了您的代码，它遍历列标题以找到正确的列，然后更改相应单元格的背景颜色。
更新：添加了一项检查以防止无限循环。

```
Private Sub Worksheet_Change(ByVal Target As Range)
On Error GoTo exitHandler

Dim rngDV As Range
Dim iCol As Integer, iColumnHeaderRow As Integer
iColumnHeaderRow = 3 'change this if header row changes

If Target.Count > 1 Then GoTo exitHandler

On Error Resume Next
Set rngDV = Cells.SpecialCells(xlCellTypeAllValidation)
On Error GoTo exitHandler
If rngDV Is Nothing Then GoTo exitHandler
If Not Intersect(Target, rngDV) Is Nothing Then
    Application.EnableEvents = False
    If Target.Column = 3 Then
        If Target.Value = "" Then GoTo exitHandler
        If Target.Validation.Value = True Then
            'iterate through column headers to find the matching column
            iCol = (Target.Column + 1)
            Do Until Cells(iColumnHeaderRow, iCol).Value = Target.Value
                iCol = iCol + 1
                'if we've hit a blank cell in the header row, exit 
                '(also to prevent an infinite loop here)
                If Cells(iColumnHeaderRow, iCol).Value = "" Then GoTo exitHandler
            Loop

            'set fill color of appropriate cell
            With Cells(Target.Row, iCol).Interior
                .Pattern = xlSolid
                .PatternColorIndex = xlAutomatic
                .ThemeColor = xlThemeColorAccent6
                .TintAndShade = 0.599993896298105
                .PatternTintAndShade = 0
            End With
        Else
            MsgBox "Invalid entry"
            Target.Activate
        End If
    End If
End If

exitHandler:
    Application.EnableEvents = True
End Sub 
```

# java - JAVA - 我应该将 JUNG 放在我的目录中的什么位置？我只在记事本中编程

> ID：15384433
> 
> 赞同：-3
> 
> 时间：2013-03-13T11:47:40.597
> 
> 标签：java, directory, packages, jung

我下载了 JUNG 包，但我不知道我应该把我的目录放在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:50:02.217

我假设当您说您已经下载了软件包时，您的意思是您已经下载了库。

您需要在构建路径中引用它们。如果您使用的是 Eclipse，这在 .classpath 文件中定义。

编辑 ：

如果您不使用 IDE，请使用此...

```
javac -classpath external.jar myClass.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:53:45.637

你真的应该尝试使用 Maven 或类似的工具。如果您反对，只需将其放在“lib”文件夹中并在您的 .classpath 中引用它

# facebook-graph-api - 以用户身份发布到 Facebook 页面

> ID：15384437
> 
> 赞同：0
> 
> 时间：2013-03-13T11:47:45.950
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我正在研究用于在 facebook 页面上发布的 facebook graph API。我有一个网页，每个用户都可以在其中登录并在 facebook 页面上共享内容。考虑某些组织，每个组织都有自己的 facebook 页面。从我的网站上，任何拥有 facebook 帐户的用户都可以来分享他们对该组织的反馈，反馈应该发布在特定组织的 Facebook 页面上。

我需要使用 facebook javascript api 来实现这个，但是我得到了一个错误

```
The user hasn't authorized the application to perform this action","type":"OAuthException","code":200 
```

这是我的代码：

```
FB.api('/page_id/feed', 'post', 
          { 
              message     : "It's awesome ...",
              name        : 'Feedback',
              to: '',
              from: '',
              description : 'Your description'
      }, 
      function(response) {

          if (!response || response.error) {
              //alert(JSON.stringify(response.error));
              console.log(JSON.stringify(response.error));
          } else {
              alert('Post ID: ' + response.id);
          }
      }); 
```

}

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:28:35.133

试试这个：

```
 function login() {       
      FB.login(function (response) {              
          if (response.authResponse) {
              // connected  
              postFeedBack();
          } else {
              // cancelled
          }
      }, { scope: 'publish_stream' });
  }

  function postFeedBack() {
        FB.api('/page_id/feed', 'post', {
            message: "My Feedback"
        }, function (response) {
            if (!response || response.error) {
                alert('Error occured');
            } else {
                alert('Post ID: ' + response.id);
            }
        });
    } 
```

# c++ - 使用 std::unique_ptr 的双向链表

> ID：15384443
> 
> 赞同：4
> 
> 时间：2013-03-13T11:47:56.937
> 
> 标签：c++, unique-ptr, doubly-linked-list

有人建议实施吗？前几天我在家里试过这个，发现移动语义太难建立一个先前的链接或简单的链表。如果使用 std::unique_ptr 制作树很容易。当然，由于复制/分配，std::shared_ptr 可以轻松实现这个问题。那么怎么样呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:39:47.123

由于问题已重新打开，我将发表我的评论作为我认为的答案：

如果您的意思是*仅* `unique_ptr`使用，那将是不可能的，因为在双向链表中，您有*两个*指向每个元素的指针，因此它们不能同时是 unique_ptrs。（这会以某种方式与*独特的*部分相矛盾......）

为了澄清，让我们考虑三个元素的列表：`A <-> B <-> C`这里`A`将包含 a `unique_ptr next`，指向`B`并因此拥有`B`。`C`也会有一个`unique_ptr prev`,`B`并且拥有它。拥有同一个对象的两个`unique_ptr`s 违反了 unique_land 定律，由于`unique_ptr`的只能移动属性，您必须付出邪恶的努力才能实现它。

`next`另一种选择是指针所在的列表`unique_ptrs`，而`last`指针是普通的旧 C 指针 - 我在那里没有看到太多问题，所以我认为这不是你想要的。

但是*，如果*您有类似“半唯一列表”的想法，请提供一些代码并告诉我们您有什么问题 - 我们很乐意提供帮助 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T23:25:58.150

这是我用的，

[https://gist.github.com/mukunda-/153d802065c130e2956c](https://gist.github.com/mukunda-/153d802065c130e2956c)

它当然是使用“半唯一”方法，因为这是唯一可能的方法。

它的作用是控制赋予它的 unique_ptr，并且与列表中的项目的任何交互都使用普通指针完成。如果您将某个项目从列表中拉出，那么您将获得所有权。

从本质上讲，它为您提供了使用智能指针自动删除的便利。当然，如果您在处理其中一个对象时删除列表对象，它会中断，在这种情况下，您需要一个 shared_ptr 列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T04:13:06.027

# knockout.js - 将 1 个 observable 加载到另一个中，但同时修改两者

> ID：15384444
> 
> 赞同：0
> 
> 时间：2013-03-13T11:47:58.020
> 
> 标签：knockout.js

在这个函数中，我已经成功地将 selectedItem 可观察对象传递给函数 openAlertDialogueEdit。

```
openAlertDialogueEdit(selectedItem) {
        this.IsAlertDialogueInEditMode(true);
        this.EditingItemAlert(selectedItem);
        this.isAlertDialogueOpen(true);
    } 
```

我正在调试应用程序，可以看到对绑定到 AlertDialogueEdit 中控件的 EditingItemAlert 可观察对象所做的更改已完成。但是原始的 selectedItem 可观察对象没有改变。我怎样才能实现这种行为。

请注意， selectedItem 是通过以下方式传递的：

```
 data-bind="click:function() { $parent.openAlertDialogueEdit($data)}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:52:05.800

这不是传递 $data 的值，而不是 observable 本身吗？如果要传入可观察对象，可以尝试为 foreach 中的项目分配别名，或者使用索引直接从父集合中获取可观察对象：

```
data-bind="click:function() { $parent.openAlertDialogueEdit($parent.observableArray()[$index])}" 
```

# php - 一天的 PHP 时间戳

> ID：15384447
> 
> 赞同：0
> 
> 时间：2013-03-13T11:48:06.863
> 
> 标签：php, mysql, timestamp

我有点怀疑。

我怎么知道从 X 天开始的时间戳，大约 00:00:00 到 23:59:59 小时？

我想这`time()`只是给你当前的时间戳，我需要从一天开始到最后一天的时间戳，这样我就可以在这些时间之间检查我在 MySQL 中的数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:49:30.700

```
$today = new DateTime();
$morning = $today->format('Y-m-d 00:00:00');
$evening = $today->format('Y-m-d 23:59:59'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:53:43.297

strtotime 将日期从字符串转换为时间戳。

```
$start_date = "2012-01-10";
$end_date = "2012-04-14";
$start = strtotime($start_date . " 00:00:00");
$end = strtotime($end_date . " 23:59:59"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:52:19.117

您可以使用 mktime()。

[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

```
// Set the default timezone to use. Available as of PHP 5.1
date_default_timezone_set('UTC');

// Prints: July 1, 2000 is on a Saturday
echo "July 1, 2000 is on a " . date("l", mktime(0, 0, 0, 7, 1, 2000));

// Prints something like: 2006-04-05T01:02:03+00:00
echo date('c', mktime(1, 2, 3, 4, 5, 2006)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:53:54.543

看看[strtotime](http://www.php.net/manual/en/function.strtotime.php)函数，例如

```
$date1 = 'today 00:00:00';
$date2 = 'today 23:59:59';
$unixTime1 = strtotime($date1);
$unixTime2 = strtotime($date2); 
```

# python - 如何从 JSON 字符串中获取所需的内容

> ID：15384448
> 
> 赞同：2
> 
> 时间：2013-03-13T11:48:07.497
> 
> 标签：python, python-2.7, selenium-webdriver, robotframework

我在 Robot Frame Work 中有一个变量，具有以下格式的 Json 响应主体

```
{
   "jsonrpc": "2.0",
   "id": "787878",
   "result":
   {
       "content":
       [
           {
               "id": 30,
               "userID": "user",
               "eventType":
               {
                   "name": "test"
               },
               "timestamp": "2013-03-13T11:00:28.537Z",
               "source": "Service",
               "reason": null,
               "comment": null,
               "dataCache":
               {
                   "lastLogin":
                   {
                       "id": 103,
                       "fieldName": "value1",
                       "newValue": "Wed Mar 13 07:00:28 EDT 2013",
                       "oldValue": null,
                       "type": "java.util.Date",
                       "auditEvent": null
                   }
               },
               "authority": "authenticate",
               "auditedObject": null
           }
       ],
       "pageNumber": 0,
       "pageSize": 99,
       "numberOfElements": 1,
       "totalElements": 1,
       "lastPage": true,
       "totalPages": 1
   }

} 
```

SO from this How can I get the content only datacache 如下所示

```
{
   "lastLogin":
   {
       "id": 103,
       "fieldName": "value1",
       "newValue": "Wed Mar 13 07:00:28 EDT 2013",
       "oldValue": null,
       "type": "java.util.Date",
       "auditEvent": null
   }
}, 
```

如果我使用类似的变量`${variable['result']['content']}`，我将在内容中获得整个正文但我只想要“DataCache”中的正文：

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:54:51.343

```
${variable['result']['content'][0]['dataCache']} 
```

这是你要找的吗？也许你需要更多的 JSON 练习......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-25T13:36:22.613

```
${variable['result']['content'][0]['dataCache']} 
```

在我的情况下工作。

# r - 向 quantmod::chart_Series 添加垂直线

> ID：15384458
> 
> 赞同：13
> 
> 时间：2013-03-13T11:48:37.473
> 
> 标签：r, quantmod

我想在某个图表上的几个日期添加垂直线。到目前为止，我还没有设法完成这个简单的任务。这是我尝试过的：

```
> s <- get(getSymbols('nvmi'))["2012::"]
> d1 <- index(s[100])
> d1
[1] "2012-05-24"

> chart_Series(s,TA="addLines(v=d1)")
Error in get.current.chob() : improperly set or missing graphics device

> chart_Series(s)
> abline(v=d1) 
# nothing

> add_TA("addLines(v=d1")
Error in `[.data.frame`(lenv$xdata, Env$xsubset) : 
  undefined columns selected 
```

从我已经在这里阅读的内容来看，我知道这`abline`不应该与新`chart_Series`功能一起使用。无论如何，它似乎不起作用。该功能在我尝试过的 任何`addLines`形式中都不起作用 - 普通`addLines`、`plot(addLines(...))`或.`chart_Series(..., TA="addLines(...)")``add_TA("addLines(...)")`

我需要使用 quantmod 的实验版本，因为它解决了我在旧版本中遇到的其他问题。`d1`最终将是一个日期列表。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T12:16:01.277

您不能混合使用新旧版本的 quantmod 图表函数。如果你想使用`addLines`，你必须使用`chartSeries`。即使您使用`addLines`and `chartSeries`，`d1`也应该是 xts 对象，而不是 datetime 对象。例如：

```
library(quantmod)
data(sample_matrix)
s <- as.xts(sample_matrix)
chartSeries(s,TA="addLines(v=s[100])") 
```

![quantmod::chartSeries](../Images/a310f8224985557c4c4b00171b30e381.png)

如果要使用添加垂直线`chart_Series`，请创建一个逻辑 xts 对象，`TRUE`其中包含您希望线条出现的位置，`FALSE`否则。例如：

```
l <- xts(!as.logical(s[,1]),index(s))
l[100] <- TRUE
chart_Series(s,TA="add_TA(l,on=1)") 
```

![quantmod::chart_Series](../Images/c557c6a6128b8f81c139ed9bf4470a44.png)

另请注意，您可以通过`on=-1`在`add_TA`调用中使用将垂直线放在图表“后面”：

```
chart_Series(s,TA="add_TA(l,on=-1,col='grey',border='grey')") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-18T04:42:27.257

添加水平线我的例子：

```
library(quantmod)
library(lubridate)

stockId<-"CVS"
showperiod<-6   # 6 months

stockData<-getSymbols(stockId, src="yahoo",auto.assign=FALSE)

startDate<-Sys.Date()-months(showperiod,abbreviate = FALSE)
fromDate<-paste0(year(startDate),month(startDate))

subset<-paste0(fromDate,"/")

mytheme <- chart_theme() 
mytheme$col$dn.col  <- "firebrick1" 
mytheme$col$up.col  <- "darkgreen"
chart_Series(stockData, name = stockId, subset = subset, theme = mytheme)

#if you add line at 2018-6-18 to 2018-07-16 & y(price)=72
#you need creat new data to plot
#
ntick<-nrow(stockData["20180618/20180716"]) #2018-6-18 to 2018-07-16 tick numbers
getDate<-index(stockData["20180618/20180716"])
y<-rep(72,ntick)
df<-data.frame(getDate,y)
linedata<-xts(df$y,order.by = df$getDate)
# add line
add_TA(linedata,on=-1,col="blue",lwd=2) 
```

[在此处输入图像描述](https://i.stack.imgur.com/9lNts.png)

# acl - 阻止访问 cakePHP 中的页面

> ID：15384469
> 
> 赞同：1
> 
> 时间：2013-03-13T11:49:18.890
> 
> 标签：acl, cakephp-2.2

如何阻止对 cakePHP 中任何页面的访问。对于页面，我指的是位于页面文件夹中的实际视图。

当我删除这一行时，它可以工作，但它也会阻止用户登录。它会创建一个直接循环：

```
$this->Auth->allow('display'); 
```

基本上，当用户想要查看任何页面并且他们没有登录时，他们将被重定向到登录（`app/users/login`）页面。登录后，他们将被定向到他们最后一次尝试访问的页面。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:57:40.347

您的情况的问题是pagesController 显示的*所有页面都是**相同*的操作（`display()`），只是使用不同的参数（要显示的页面）。因此，您不能阻止对显示操作的访问，因为这将阻止对*所有*页面的访问。

如果页面数量有限，那么实现这一点的最简单方法是`ControllerAuthorize`. 在此处阅读文档；[使用控制器授权](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-controllerauthorize)

```
class AppController extends Controller {
    public $components = array(
        'Auth' => array('authorize' => 'Controller'),
    );
    public function isAuthorized($user = null) {
        // Make all actions public 
        return true;
    }
} 
```

然后，在您的页面控制器内部；

```
class PagesController extends AppController {

    public function isAuthorized($user = null) {
        if ('display' !== $this->request->action) {
            // other actions; let he AppController handle access
            return parent::isAuthorized($user);
        }

        if (!empty($user)) {
            // Logged-in users have access to any page
            return true;
        }

        $page = empty($this->request->params['pass'][0]) ? null : $this->request->params['pass'][0];

        switch($page) {
            case 'home':
            case 'about':
            // etc
               return true;
        }

        // all other pages are 'private'
        return false;
    }
} 
```

只是一个例子，当然，修改以满足您的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:13:09.967

使用 $this->Auth->allow('\','display'); 它允许'\'页面之后的所有内容..或者如果你不允许除了显示页面你什么都不做。

# solr - 使用多核

> ID：15384471
> 
> 赞同：0
> 
> 时间：2013-03-13T11:49:27.757
> 
> 标签：solr, lucene

我有 2 个核心，***core1***和***core2***，我正在尝试使用多个核心来实现以下目标。
1）如何从core1（仅core1）中删除所有条目。
通常，当我只有一个核心时，我使用以下命令删除所有文档。
java -Ddata=args -Dcommit=true -jar post.jar " *:* "

2) 使用 Nutch，如何只在 core2 中索引 web 文档。（不在 core1 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:50:35.670

问题 1：由于某种原因，我的 curl 命令给了我错误。我纠正了它，现在它工作正常。

```
 curl localhost:8983/solr/core1/update/?commit=true -H "Content-Type: text/xml" -d "<delete><query>*:*</query></delete> 
```

问题 2：为了使用 Nutch 将数据索引到不同的核心，我使用了以下命令，它对我有用。因此与您分享想法。

```
bin/nutch crawl urls -solr http://localhost:8983/solr/core1/ -depth 3 -topN 5

bin/nutch crawl urls -solr http://localhost:8983/solr/core2/ -depth 3 -topN 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:12:33.047

每个核心将有一个单独的 URL（参见下面的示例）。只需为您的删除和索引操作分别引用每个核心。

*   `http://localhost:8983/solr/core1`
*   `http://localhost:8983/solr/core2`

1) 对于删除，我建议使用可以通过 curl 执行的[按 ID 或查询删除选项，指定 core1 的 url。](http://wiki.apache.org/solr/UpdateXmlMessages#A.22delete.22_documents_by_ID_and_by_Query)

2) 要使用 Nutch 对 core2 进行索引，只需在索引步骤中为 core2 使用适当的 url。

# android - 如何关闭自定义对话框

> ID：15384476
> 
> 赞同：0
> 
> 时间：2013-03-13T11:49:36.193
> 
> 标签：android

我在android中创建了一个自定义对话框。我尝试使用dismiss（）将其关闭。但是我的对话框仍然没有被关闭，你们可以帮我看看下面是代码。

```
void unsubPhoneNumberDialogBox(final ArrayList<String> unsubcribeList)
{
    AlertDialog.Builder builder;

    LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.customalert,null);

    builder = new AlertDialog.Builder(SMSServiceListActivity.this);
    builder.setView(layout);
    alertDialog = builder.create();

    input = (EditText)layout.findViewById(R.id.txtPhoneNo);
    btnVerify = (Button)layout.findViewById(R.id.btnSendSMS);

    btnVerify.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(input.getWindowToken(), 0);

            alertDialog.dismiss();

        }
    });

    alertDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:02:16.833

试试这个代码：

```
....
Dialog alertDialog = new Dialog(SMSServiceListActivity.this);
alertDialog.setContentView(R.layout.customalert);
alertDialog.show();

input = (EditText)alertDialog.findViewById(R.id.txtPhoneNo);
btnVerify = (Button)alertDialog.findViewById(R.id.btnSendSMS);

btnVerify.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(input.getWindowToken(), 0);
        alertDialog.dismiss();
    }
});

.... 
```

# javascript - 带有codeigniter的jquery自动完成 - 将控制器名称传递给javascript

> ID：15384481
> 
> 赞同：1
> 
> 时间：2013-03-13T11:49:43.387
> 
> 标签：javascript, jquery, codeigniter

我有一个 codeigniter 自动完成工作正常。javascript语法是：

*控制器*

```
 function autocomplete(){
    $this->load->view('sales/new_order_details');
  } 
```

*模型*

```
function get_customer($q){
    $this->db->select('CustomerName');
    $this->db->like('CustomerName', $q);
    $query = $this->db->get('Customers');
    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['CustomerName'])); //build an array
      }
      $this->output->set_content_type('application/json')->set_output(json_encode($row_set));

    }
  } 
```

*javascript*

```
$(function(){
  $("#customer").autocomplete({
    source: "get_customers"
  });
}); 
```

MVC 框架的概念是可重用性。如何将请求控制器的名称传递给 javascript，以便它可以被多个控制器方法动态使用？

所以像：

```
var method=controllername.requestingmethod;
$(function(){
  $("#customer").autocomplete({
    source: "method"
  });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:00:56.433

在您的控制器中，您可以将其作为变量传递

控制器：

```
function autocomplete(){
    $data['methodName'] = "autocomplete";
    $this->load->view('sales/new_order_details',$data);
} 
```

现在您可以像这样在视图中访问它：

```
$(function(){
    $("#customer").autocomplete({
        source: "<?=$methodName?>"
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:51:57.397

如果您在 php 扩展文件中编写了 jquery 或 javascript 代码，您可以这样做

```
$(function(){
    $("#customer").autocomplete({
        source: "<?php echo site_url('controllername/methodname');?>"
    });
}); 
```

# java - Java并发修改异常错误

> ID：15384486
> 
> 赞同：10
> 
> 时间：2013-03-13T11:49:59.093
> 
> 标签：java, arraylist

我在为我的大学课程玩一些代码并改变了一种方法

```
public boolean removeStudent(String studentName)
{
    int index = 0;
    for (Student student : students)
    {
        if (studentName.equalsIgnoreCasee(student.getName()))
        {
            students.remove(index);
            return true;
        }
        index++;
    }
    return false;
} 
```

至：

```
public void removeStudent(String studentName) throws StudentNotFoundException
{
    int index = 0;
    for (Student student : students)
    {
        if (studentName.equalsIgnoreCase(student.getName()))
        {
            students.remove(index);
        }
        index++;
    }
    throw new  StudentNotFoundException( "No such student " + studentName);
} 
```

但是新方法不断给出并发修改错误。我怎样才能解决这个问题，为什么会这样？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T11:52:18.017

这是因为您在执行完之后继续遍历列表`remove()`。

您正在同时读取和写入列表，这破坏了 foreach 循环底层迭代器的合同。

## 利用`Iterator.remove()`

```
for(Iterator<Student> iter = students.iterator(); iter.hasNext(); ) {
    Student student = iter.next();
    if(studentName.equalsIgnoreCase(student.getName()) {
        iter.remove();
    }
} 
```

描述如下：

> 返回迭代中的下一个元素。
> 
> `NoSuchElementException`如果迭代没有更多元素，则抛出。

您可以使用`Iterator.hasNext()`来检查是否有下一个元素可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:53:45.270

`foreach`构造使用底层`Iterator`.

在第二种方法中，即使从列表中删除了一个项目，您也会继续迭代。这会导致您看到的异常。看看从`ConcurrentModificationException`文档中获取的这个声明：

> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:53:26.103

迭代时不允许从集合中删除元素。迭代器在使用过程中检测到结构变化，并抛出异常。许多集合都是以这种方式实现的。

直接使用迭代器：

```
 Iterator<Student> it = students.iterator();
    while (it.hasNext()) {
        Student student = it.next();

        if (studentName.equalsIgnoreCase(student.getName())) {
                it.remove();
                return true;
        }
    }
    return false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T07:31:16.363

您可以避免并发修改错误购买只是在删除元素后打破循环，或者如果该方法具有返回类型，则在删除元素后返回一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:54:41.913

您不应该在使用 for-each 语句时从集合中删除对象 - 这将导致异常，因为您的迭代器在其迭代过程中面临更改的集合。(for 循环) 要么使用常规的 for 循环 (for int i = 0; i < 100; i++) 等...或者将要删除的对象保留在列表中，并将它们删除到 for 循环之外。

此外，您通过索引删除对象，其中 index 为 : 0 , 1 , 2 但 index 实际上应该是学生的索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T11:53:16.710

发生此错误是因为您在迭代时尝试更改集合的大小。如果你有 10 名学生，你开始你的循环期望经历 10 次迭代。当您移除一个学生时，还需要进行多少次迭代？答案显然取决于您将学生从列表中删除的位置以及您当前在迭代中的位置。显然，java 无法知道这一点。

要解决这个问题，您必须使用迭代器。您可以按如下方式完成此操作：

```
Iterator<Student> studentsIterator;
for(studentsIterator = students.iterator(); studentsIterator.hasNext();)
{
    Student student = studentsIterator.next();
    if(student... /* condition */)
    {
        studentIterator.remove();  //This removes student from the collection safely
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T11:53:16.907

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T11:53:24.480

如果要在循环中删除，则应使用迭代器及其[删除](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)方法

```
public boolean removeStudent(String studentName)
{
    Iterator<Student> itS = students.iterator();
    while(itS.hasNext())
    {
        Student student = itS.next();
        if (studentName.equalsIgnoreCasee(student.getName()))
        {
            itS.remove();
            return true;
        }
    }
    return false;
} 
```

# javascript - 将 ajax 调用返回的数据添加到 UL，然后更新 jQuery 流沙

> ID：15384489
> 
> 赞同：1
> 
> 时间：2013-03-13T11:50:16.863
> 
> 标签：javascript, jquery, quicksand

我正在构建一个用户列表，并尝试使用 jQuery[流沙](http://razorjack.net/quicksand/docs-and-demos.html)根据 ajax 请求返回的数据更新 UL。

数据要求如下：

```
$.webMethod({
    url: 'http://staging.cmdapp.com/Services/Poll.asmx/LeaderboardGetTopScores',
    data: '{quizIDs:"'+quizIDs+'",numRecords:"'+numRecords+'"}',
    beforeSend: function () { },
    success: function (ret) {

        $.each(ret.leaderboard,function(i){
            // do something     
        });  

    },
    error: function (response) { console.log(response.responseText); }
}); 
```

返回的数据是一个 JSON 字符串，每个用户由 'user_id' 定义。JSON数据（抱歉未格式化）：

```
{"d":"{\"leaderboard\":[{\"user_id\":\"8\",\"first_name\":\"Kevin\",\"last_name\":\"McFarlane\",\"points\":\"1\",\"time_taken\":1408,\"incorrect_attempts\":0},{\"user_id\":\"9\",\"first_name\":\"Hanna\",\"last_name\":\"Gilbert\",\"points\":\"1\",\"time_taken\":4762,\"incorrect_attempts\":0},{\"user_id\":\"1\",\"first_name\":\"Adrian\",\"last_name\":\"Bathurst\",\"points\":\"0\",\"time_taken\":1616,\"incorrect_attempts\":0}]}"} 
```

在我的 html 页面中，我准备好了流沙列表，如下所示：

```
<ul class="quicksand">
    <li data-id="1">1</li>
    <li data-id="2">2</li>
    <li data-id="3">3</li>
    <li data-id="4">4</li>
</ul> 
```

我现在想在每个 ajax 请求上更新 UL。如何存储返回的数据并将每个单独的“用户”添加到单独的 LI 项中？

我尝试了以下但没有运气：

```
$.webMethod({
    url: 'http://staging.cmdapp.com/Services/Poll.asmx/LeaderboardGetTopScores',
    data: '{quizIDs:"'+quizIDs+'",numRecords:"'+numRecords+'"}',
    beforeSend: function () { },
    success: function (ret) {

        $.each(ret.leaderboard,function(i){
            pos = i + 1;
            str = '<li data-id="'+pos+'">' + ret.leaderboard[i].first_name + '&nbsp;' + ret.leaderboard[i].last_name + '</li>';       
        });

        $('.quicksand').quicksand( str, { adjustHeight: 'dynamic' } );     
        console.log(str);              
    },
    error: function (response) { console.log(response.responseText); }
}); 
```

可能值得注意的是，我**可以**看到每个 LI 项目中的正确数据在每个 ajax 请求中被拉入 DOM，但它立即消失并且只显示第一个 LI 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:00:46.433

您的 JSON 不正确。键的值在`d`这里实际上是一个字符串，而不是一个对象，这就是您觉得 JSON 格式化程序不起作用的原因。它实际上可以工作，但将其视为字符串而不是对象。

您必须解开引号以将其视为对象或使用`$.parseJSON`将其转换为对象。

```
$.webMethod({
    url: 'http://staging.cmdapp.com/Services/Poll.asmx/LeaderboardGetTopScores',
    data: '{quizIDs:"'+quizIDs+'",numRecords:"'+numRecords+'"}',
    beforeSend: function () { },
    success: function (ret) {

        ret = $.parseJSON(ret.d);

        $.each(ret.leaderboard,function(i){
            pos = i + 1;
            str = '<li data-id="'+pos+'">' + ret.leaderboard[i].first_name + '&nbsp;' + ret.leaderboard[i].last_name + '</li>';       
        });

        $('.quicksand').quicksand( str, { adjustHeight: 'dynamic' } );     
        console.log(str);              
    },
    error: function (response) { console.log(response.responseText); }
}); 
```

小提琴 - [http://jsfiddle.net/rttAZ/](http://jsfiddle.net/rttAZ/)

# macos - git 子模块和分离的 HEAD

> ID：15384497
> 
> 赞同：0
> 
> 时间：2013-03-13T11:50:49.813
> 
> 标签：macos, git, git-submodules

所以，我一直在学习更多关于 git 子模块的知识，而且我读到的所有地方都告诉我，在添加子模块后，我最终会得到一个分离的 HEAD。这是有道理的，因为我希望我的超级项目具体知道应该使用哪个提交。但是，这不是我在实践中看到的（在 Mac OS X 上）。

考虑以下命令序列，这些命令创建一个包含单个文件的快速存储库（称为 sub），然后将其作为子模块添加到另一个名为 blah 的存储库中。

```
/tmp> git version 
git version 1.7.12.4 (Apple Git-37)
/tmp> git init sub
Initialized empty Git repository in /private/tmp/sub/.git/
/tmp> cd sub
/tmp/sub> touch a.txt
/tmp/sub> git add a.txt
/tmp/sub> git commit -m "add a file"
[master (root-commit) c527790] .
 0 files changed
 create mode 100644 a.txt
/tmp/sub> cd ..
/tmp> git init blah
Initialized empty Git repository in /private/tmp/blah/.git/
/tmp> cd blah
/tmp/blah> git submodule add /tmp/sub sub
Cloning into 'sub'...
done.
/tmp/blah> cd sub
/tmp/blah/sub> git status
# On branch master
nothing to commit (working directory clean) 
```

为什么子模块在主分支上？我原以为它会说它不在分支上。更多挖掘表明 git 引用了正确的提交哈希，但不知何故位于主分支上，而不是分离的 HEAD。

```
/tmp/blah/sub> cd ../../sub
/tmp/sub> git reflog
97b97b3 HEAD@{0}: commit (initial): add a file
/tmp/sub> cd ../blah
/tmp/blah> git submodule status
 97b97b349cfae8da490c2cad3b3f4fc3af6a53c7 sub (heads/master) 
```

我错过了什么？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:16:09.983

运行此命令：

```
git submodule add /tmp/sub sub 
```

结果正常`clone`运行，因此您最终进入`HEAD`了 master 分支。但是，如果您检查生成的提交，您会看到它`git`在您的存储库中记录了显式提交哈希。

从您的`blah`存储库内部：

```
$ git commit -m 'added submodule'
[master (root-commit) 13e36eb] added submodule
 2 files changed, 4 insertions(+)
 create mode 100644 .gitmodules
 create mode 160000 sub
$ git log --oneline
13e36eb added submodule
$ git cat-file -p 13e36eb
tree 5d205c2e2ce63d8087b3b6644e3ac183cd49c644
author Lars <lars@> 1363184265 -0400
committer Lars <lars@> 1363184265 -0400

added submodule
$ git cat-file -p 5d205c2e2ce63d8087b3b6644e3ac183cd49c644
100644 blob 30c9a7559a85f36bcedaabb8bdfaf43363966b85    .gitmodules
160000 commit 2122e5378b7940afae8e49ad9179c815c7711610  sub 
```

最后一行 ( `160000 commit ...`) 显示了`git`为您的子模块记录的提交哈希。

如果您现在要使用子模块*克隆*您的存储库...

```
cd /tmp
git clone --recursive blah cloned-blah 
```

您会发现它`sub`现在不在分支上，因为它不是正常的克隆操作，而是检查显式提交。

# android - 在 Android 中使用 Airtel 提供商 SIM 卡时无法获取 SIM 号码？

> ID：15384498
> 
> 赞同：0
> 
> 时间：2013-03-13T11:50:50.680
> 
> 标签：android, telephonymanager

我正在我的应用程序中工作并使用以下方法获取电话号码：

```
TelephonyManager phoneManager = (TelephonyManager)appContext.getSystemService(Context.TELEPHONY_SERVICE);
        number = phoneManager.getLine1Number(); 
```

它适用于所有 SIM 卡，但在 Airtel 提供商的 SIM 卡中出现问题。我在尝试使用这张 SIM 卡时变得空白。

我不知道为什么 Android API 与不同的提供者打交道不同。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:54:52.563

这是因为运营商没有在 SIM 卡上填写[MSISDN号码。](http://en.wikipedia.org/wiki/MSISDN)不幸的是，您对此无能为力。

[在这里](https://stackoverflow.com/questions/10695601/msisdn-is-it-a-sim-card-data-why-all-the-provided-function-from-blackberry-a)有一些见解的线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T06:39:33.303

您必须使用电话管理器；如果您根本没有找到联系电话。用户的；您可以使用相同的电话管理器类获取 SIM 卡的 SIM 序列号和 Android 设备的 Imei 号...

添加权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

进口：

```
import android.telephony.TelephonyManager; 
```

使用以下代码：

```
 TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);

     // get IMEI
     imei = tm.getDeviceId();

     // get SimSerialNumber
     simSerialNumber = tm.getSimSerialNumber(); 
```

# git - Git 的问题 - rebase / squash

> ID：15384502
> 
> 赞同：33
> 
> 时间：2013-03-13T11:51:00.453
> 
> 标签：git, sublimetext2, git-rebase

我正在尝试压缩 git 存储库中的一些提交。

`> git rebase -i HEAD~3`

`Successfully rebased and updated refs/heads/staging.`

打开一个文件，标题为`git-rebase-todo`：

```
pick a2f3467 Require statement incorrect
pick c41212e Require file in environment
pick 2743221 This should work

# Rebase c5f42f3..2743221 onto c5f42f3
# .......... 
```

我尝试将底部的两个提交更改为`squash`from `pick`。我保存文件，我收到以下错误：

`Unable to save ~/Documents/code/myapp/.git/rebase-emrge/git-rebase-todo`

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-15T11:09:55.333

问题是当 sublimetext2 启动时，它不会阻塞并立即返回。然后 Git 认为您已完成文件编辑并执行变基。这就是为什么你看到

```
Successfully rebased and updated refs/heads/staging 
```

消息，甚至在您编辑文件之前。请改用该[`subl`](http://www.sublimetext.com/docs/2/osx_command_line.html)命令，该命令专为此类用途而设计。[github帮助](https://help.github.com/articles/using-sublime-text-2-as-your-default-editor)告诉你配置它

```
git config --global core.editor "subl -n -w" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T00:27:23.340

根据我的经验，问题是由于用户权限造成的。

如果您`Could not find the file "~/../../git-rebase-todo"`在保存文件时收到错误消息，请尝试以 sudo 运行它：

```
sudo git rebase -i HEAD~3 
```

但是请记住，这可能会更改任何受影响文件的所有者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T17:08:52.850

我在使用 vs 代码时遇到了类似的问题，您可以在终端中尝试...

`git config --global core.editor "code -n --wait"`

# android - android中HTML 5音频标签中的异常

> ID：15384508
> 
> 赞同：2
> 
> 时间：2013-03-13T11:51:16.367
> 
> 标签：android, html, cordova

当我运行 html5 音频标签播放 mp3 文件时，我的 eclipse android 模拟器抛出错误。我的代码是

```
 <audio controls="controls" autoplay >
<source src= "audios/test.mp3" />
</audio> 
```

这是我在 Eclipse 控制台窗口中的错误

> 错误（1，-2147483648）

.

我找不到解决方案。该代码适用于 chrome。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T21:16:39.000

Vinod 我也试过了，但是当你将媒体嵌入到音频标签中时，android 模拟器直到现在才支持音频/视频再现。

# c# - 任务不工作的 WaitAll

> ID：15384512
> 
> 赞同：0
> 
> 时间：2013-03-13T11:51:29.313
> 
> 标签：c#

我以下面的方式创建了几个任务。但它似乎`WaitAll`不起作用。它正在发送响应而无需等待。这里有什么问题吗？

```
private void GetItemsPrice(IEnumerable<Item> items, int customerNumber)
    {
        try
        {
            var tasks = new List<Task>();

            for (var i = 0; i < items.Count(); i += 50)
            {
                var newTask = DoGetItemsPrice(items.Skip(i).Take(50), customerNumber);    
                tasks.Add(newTask);
            }

            Task.WaitAll(tasks.ToArray());
        }
        catch (Exception ex)
        {
            ErrorLog.WriteLog(GetType().Name, "GetItemsPrice", string.Format("customerNumber={0}", customerNumber), ex.Message);
        }
    }

private static Task DoGetItemsPrice(IEnumerable<Item> items, int customerNumber)
    {
        return Task.Factory.StartNew(() =>
        {
            var sxApiObj = new SxApiService();
            var request = new OEPricingMultipleRequest();

            request.customerNumber = customerNumber;
            request.arrayProduct =
                items.Select(
                    itemCode =>
                    new OEPricingMultipleinputProduct
                    {
                        productCode = itemCode.ItmNum,
                        quantity = itemCode.Quantity,
                        warehouse = ConfigurationVariables.DefaultWareHouse
                    }).ToArray();
            var response = sxApiObj.OEPricingMultiple(ConfigurationVariables.SfAppServer,
                                                  ConfigurationVariables.SfUserId,
                                                  ConfigurationVariables.SfPassword,
                                                  request);

            if (response.arrayPrice != null)
            {
                foreach (var priceData in response.arrayPrice)
                {
                    var productCode = priceData.productCode;
                    var item = items.FirstOrDefault(itm => itm.ItmNum == productCode);

                    if (item == null) continue;
                    item.ItmListPrice1 = priceData.price.ToString("c", ConfigurationVariables.UsCulture);
                    item.ItmListPrice2 = priceData.discountAmount.ToString("c", ConfigurationVariables.UsCulture);
                    item.ItmListPrice3 = priceData.extendedAmount.ToString("c", ConfigurationVariables.UsCulture);

                    item.Quantity = priceData.netAvailable;
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:24:30.587

我的问题没有错。`WaitAll`工作正常，代码也正确。

# php - 如何结合字段搜索数据

> ID：15384513
> 
> 赞同：0
> 
> 时间：2013-03-13T11:51:30.020
> 
> 标签：php, mysql

我有一个包含 first_name 和 last_name 的学生表。当我对名字或姓氏进行搜索时，它会为我提供正确的记录，但是当我使用全名搜索时，它不会返回任何内容。这是我的查询

```
SELECT 
  `student_personal_info`.`spi_id` AS `sid`, 
  `student_personal_info`.`spi_first_name` AS `fname` 
FROM 
  `student_personal_info` 
WHERE 
 ((spi_first_name like '%test developer%') OR (spi_last_name like '%test developer%') 
ORDER BY 
 `spi_first_name` ASC 
```

有什么方法可以通过这两个字段组合进行搜索。

如果我们输入名字.中间名和姓氏，它将给出记录，但如果名字和姓氏不是中间名，则不获取。

```
SELECT `student_personal_info`.`spi_id` AS `sid` , `student_personal_info`.`spi_first_name` AS `fname`
FROM `student_personal_info`
WHERE (
spi_scholar_no LIKE '%amir hussain khan%'
)
OR (
CONCAT( spi_first_name, ' ', spi_middle_name, ' ', spi_last_name ) LIKE '%amir hussain khan%' 
```

我也试过这个，但它只适用于完全匹配。

```
SELECT `student_parents_info`.`spri_spi_id` AS `sid`
FROM `student_parents_info`
WHERE (MATCH (spri_first_name, spri_middle_name, spri_last_name) AGAINST ('Pramod Kumar Sharma*' IN BOOLEAN MODE ) )
ORDER BY `spri_first_name` ASC
LIMIT 0 , 30 
```

请提出任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:01:37.433

尝试使用 concat() 搜索..

```
SELECT `student_personal_info`.`spi_id` AS `sid` , `student_personal_info`.`spi_first_name`    AS `fname`
FROM `student_personal_info`
  WHERE CONCAT( spi_first_name, ' ', spi_middle_name, ' ', spi_last_name ) LIKE '%test%'
ORDER BY `spi_first_name` ASC 
```

它总是对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:53:53.557

像这样试试

```
SELECT `student_personal_info`.`spi_id` AS `sid`, `student_personal_info`.`spi_first_name` AS `fname` 
FROM `student_personal_info`
WHERE 
    ((spi_first_name like '%amir khan%') OR (spi_last_name like '%test develope%'))
ORDER BY `spi_first_name` ASC 
```

你错过了')'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:54:45.503

您是否收到用于执行搜索的全名？或者你总是得到2个分开的（名字和姓氏）？

如果您得到一个全名字符串，请将您的查询更改为连接名字和姓氏，并使用

```
GROUP BY HAVING(full_name LIKE %search_term%) 
```

如果你得到两个单独的字符串，只需在名字和姓氏 LIKE 测试之间将 OR 更改为 AND。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:55:33.810

尝试使用 CONCAT：

```
SELECT
  `student_personal_info`.`spi_id` AS `sid`,
  `student_personal_info`.`spi_first_name` AS `fname`
FROM
  `student_personal_info`
WHERE 
  CONCAT(spi_first_name, ' ', spi_last_name) LIKE '%test develope%'
ORDER BY
 `spi_first_name` ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T11:59:03.200

拆分您的`test develope`to`test`并`develope`使用 php，然后编写如下查询：

```
$first = 'test';
$last  = 'develope';

$query = "SELECT `student_personal_info`.`spi_id` AS `sid`, `student_personal_info`.`spi_first_name` AS `fname` FROM `student_personal_info` WHERE 
(spi_first_name like '%".$first."%') OR (spi_last_name like '%".$last."%') 
ORDER BY `spi_first_name` ASC"; 
```

如果您有两个以上的单词，请拆分单词并创建动态`where`查询。

# azure - Azure 队列存储 - 在调用 CloudQueue.GetMessages() 后立即将消息标记为可见

> ID：15384517
> 
> 赞同：3
> 
> 时间：2013-03-13T11:51:45.373
> 
> 标签：azure, azure-worker-roles, azure-storage, azure-storage-queues

**问题：**

我正在从 Azure 存储队列读取消息，然后使用辅助角色将它们插入到存储表中。

我想读入消息，但仅在至少有 100 条消息时才处理它们（这是为了优化正在发生的存储表批量插入）。如果消息少于 100 条，那么我想取消消息处理并使它们立即在队列中再次可见，以供下一个队列读取。

**问题：**

是否可以将刚刚读取的消息标记`CloudQueue.GetMessages(...)`为可见，而无需等待超时到期？

**代码：（**在 WorkerRole.cs 中）

```
public override void Run()
{
    while (true)
    {
        var messages = queue.GetMessages(100);

        if (messages.Count() >= 100)
        {
            // This will process, insert into a table, and delete from the queue
            ProcessMessages(messages);
        }
        else
        {
            //!!! MARK MESSAGES AS VISIBLE ON THE QUEUE
            System.Threading.Thread.Sleep(1000);
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:04:15.430

您可以检查队列的 `ApproximateMessageCount' 属性（详情请[点击此处](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudqueue.approximatemessagecount.aspx)），这将使您大致了解队列中有多少消息正在等待。

另外：您可以将消息的隐形超时设置为较小的（可能是 5-10 秒？）。在那段时间之后，该消息将再次可见。您还可以在阅读后将隐形超时修改为更短的时间。

请记住，从队列中读取数据算作一个事务，更新消息也是如此（例如更新隐身超时）。

等待 100 条消息可能不是最佳优化。哦，`GetMessages()`（详情请[点击此处](http://msdn.microsoft.com/en-us/library/windowsazure/ee758360.aspx)）限制为 32 条消息，因此等待 100 条消息是没有意义的。另外：交易真的非常便宜（每 100K 交易一分钱）。我不一定看到这里的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:02:27.303

将过期时间重置为 0.0。这有望解决问题。

# c - 我可以在 TCP 套接字上一次写入多少字节？

> ID：15384518
> 
> 赞同：5
> 
> 时间：2013-03-13T11:51:45.597
> 
> 标签：c, sockets, tcp, buffer, byte

正如标题所说，在面向连接的套接字上一次可以写入的字节数是否有限制？

如果我想发送一个缓冲区，例如 1024 字节，我可以使用

```
write(tcp_socket, buffer, 1024); 
```

还是我应该使用多个`write()`调用，每个调用的字节数都更少？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T11:55:41.913

`write()`不保证将写入所有字节，因此`write()`需要多次调用。从[人写](http://linux.die.net/man/2/write)：

> **写入的字节数可能少于 count**，例如，底层物理介质上的空间不足，或者遇到 RLIMIT_FSIZE 资源限制（参见 setrlimit(2)），或者调用被信号处理程序中断后写入少于 count 个字节。（另请参见管道 (7)。）

`write()`返回写入的字节数，因此必须维护写入的字节总数并将其用作索引`buffer`并计算要写入的剩余字节数：

```
ssize_t total_bytes_written = 0;
while (total_bytes_written != 1024)
{
    assert(total_bytes_written < 1024);
    ssize_t bytes_written = write(tcp_socket,
                                  &buffer[total_bytes_written],
                                  1024 - total_bytes_written);
    if (bytes_written == -1)
    {
        /* Report failure and exit. */
        break;
    }
    total_bytes_written += bytes_written;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T12:34:09.120

根据我的经验，最好保持在 1024 字节的限制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:57:43.293

没有固有的限制。TCP/IP 将根据需要对数据包进行分段和重组。您的系统可能会施加（可能是可调的）上限，但它很可能在多 MB 范围内。请参阅您的手册页以获取 setsockopt() 并始终检查 write() 的返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:59:15.820

您可以写入的实际数量取决于套接字的类型。通常，您需要检查返回值以查看实际写入了多少字节。写入的字节数取决于套接字是否处于阻塞模式。

此外，如果套接字阻塞，您可能不想等待所有数据一次性写入。您可能希望一次写一些，以便能够在写操作之间进行其他操作。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-13T11:55:02.270

如您所见，[写入套接字](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=/com.ibm.ztpf-ztpfdf.doc_put.cur/gtpc2/cpp_write.html)的最大缓冲区大小为 1048576 字节。

# ios - APNS反馈149是什么意思？

> ID：15384522
> 
> 赞同：1
> 
> 时间：2013-03-13T11:51:48.630
> 
> 标签：ios, apple-push-notifications, feedback

我已经在我的应用程序中实现了**APNS**代码。它在**开发**版本中运行良好。

在**生产**构建中，设备令牌被输入到服务器端的数据库中，但没有一个设备收到推送通知。

在服务器端，在**PHP 代码**中，**反馈响应**为**149**，

我知道这张桌子，

```
0 - No errors encountered

1 - Processing error

2 - Missing device token

3 - Missing topic

4 - Missing payload

5 - Invalid token size

6 - Invalid topic size

7 - Invalid payload size

8 - Invalid token

255 - None (unknown) 
```

**但是这个表中的149**怎么读？？？比较哪个实体？我正在发送内容和消息，所以它不应该是**“4 - Missing payload”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:37:45.867

这是服务器端的一些错误。它现在运行良好，无需更改代码中的任何内容。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:01:19.793

你是否也使用了苹果的生产服务器和你的 PHP - 脚本？生产服务器：- gateway.push.apple.com 2195 而不是开发服务器- gateway.sandbox.push.apple.com 2195

# vba - 如何将电子表格数据导出到 SQLServer？

> ID：15384545
> 
> 赞同：0
> 
> 时间：2013-03-13T11:53:02.080
> 
> 标签：vba, excel

* * *

我是Vba的新手，希望有人能解决我的问题。我正在尝试更新电子表格中存在的数据。实际上我有 20,000 条记录，每条记录大约有 74 列。因此，使用 ADO 逐条更新它们需要花费大量时间。是否有任何替代方法可以一次性更新这些记录。任何帮助将不胜感激。

* * *

目前我的代码是。

* * *

```
 Sub InitialExport()
      On Error GoTo ErrHandler

    Dim con As New ADODB.Connection
    Dim Query As String
    Dim EffectedRecs As Long
    Dim i As Integer

    ServerName = "192.178.78.36"

    'Setting ConnectionString
    con.ConnectionString = "Provider=SQLOLEDB; " & _
            "Data Source=" & ServerName & "; " & _
            "Initial Catalog=AppEmp;" & _
            "User ID=sa; Password=admin08; "

    'Setting provider Name
    con.Provider = "Microsoft.JET.OLEDB.12.0"

    'Opening connection
    con.Open
    With ThisWorkbook.Sheets("Export")
    For i = 3 To ThisWorkbook.Sheets("Export").Range("B65536").End(xlUp).Row
        '---------------------->
        EmpId = .Range("B" & i).Value 'Emp Code-varchar
        C = .Range("C" & i).Value 'Emp Name-varchar
        D = .Range("D" & i).Value 
        E = .Range("E" & i).Value 
        F = .Range("F" & i).Value 
        G = .Range("G" & i).Value 
        H = .Range("H" & i).Value
        II = .Range("I" & i).Value 
        JJ = .Range("J" & i).Value 
        k = .Range("K" & i).Value 
        l = .Range("L" & i).Value 
        M = .Range("M" & i).Value 

        N = CheckNull(.Range("N" & i).Value)
        O = CheckNull(.Range("O" & i).Value) 
        P = CheckNull(.Range("P" & i).Value) 
        Q = CheckNull(.Range("Q" & i).Value) 
        R = CheckNull(.Range("R" & i).Value) 
        S = .Range("S" & i).Value 
        T = .Range("T" & i).Value 
        U = .Range("U" & i).Value 
        v = .Range("V" & i).Value 
        W = .Range("W" & i).Value
        X = CheckNull(.Range("X" & i).Value)

        Y = .Range("Y" & i).Value 
        Z = .Range("Z" & i).Value 
        AA = CheckNull(.Range("AA" & i).Value)
        AB = .Range("AB" & i).Value 
        AC = CheckNull(.Range("AC" & i).Value) 
        AD = CheckNull(.Range("AD" & i).Value) 
        AE = CheckNull(.Range("AE" & i).Value) 
        AF = CheckNull(.Range("AF" & i).Value)
        AG = .Range("AG" & i).Value 
        AH = CheckNull(.Range("AH" & i).Value) 
        AI = CheckNull(.Range("AI" & i).Value) 
        AJ = CheckNull(.Range("AJ" & i).Value) 
        AK = CheckNull(.Range("AK" & i).Value)
        AL = CheckNull(.Range("AL" & i).Value) 
        AM = CheckNull(.Range("AM" & i).Value)
        AN = CheckNull(.Range("AN" & i).Value) 
        AO = CheckNull(.Range("AO" & i).Value) 
        AP = CheckNull(.Range("AP" & i).Value) 
        AQ = CheckNull(.Range("AQ" & i).Value)
        AR = CheckNull(.Range("AR" & i).Value) 
        aAS = CheckNull(.Range("AS" & i).Value) 
        AT = .Range("AT" & i).Value
        AU = CheckNull(.Range("AU" & i).Value) 
        AV = CheckNull(.Range("AV" & i).Value) 
        AW = CheckNull(.Range("AW" & i).Value) 
        AX = CheckNull(.Range("AX" & i).Value) 
        AY = CheckNull(.Range("AY" & i).Value) 
        AZ = CheckNull(.Range("AZ" & i).Value) 
        BA = CheckNull(.Range("BA" & i).Value) 
        BB = CheckNull(.Range("BB" & i).Value)
        BC = CheckNull(.Range("BC" & i).Value) 
        BD = CheckNull(.Range("BD" & i).Value)
        BE = .Range("BE" & i).Value 

        BF = .Range("BF" & i).Value 
        BG = CheckNull(.Range("BG" & i).Value) 
        BH = .Range("BH" & i).Value 
        BI = .Range("BI" & i).Value 
        BJ = CheckNull(.Range("BJ" & i).Value) 
        BK = CheckNull(.Range("BK" & i).Value) 
        BL = CheckNull(.Range("BL" & i).Value) 
        BM = .Range("BM" & i).Value 
        BN = .Range("BN" & i).Value 

        Query = "Exec HRApp_P_AddEmpData '" & EmpId & "','" & C & "','" & D & "','" & E & "','" & F & "','" & G & "','" & H & "','" & II & "','" & JJ & "','" & k & "','" & l & "','" & M & "'," & N & "," & O & "," & P & "," & Q & "," & R & ",'" & S & "','" & T & "','" & U & "','" & v & "','" & W & "'," & X & ",'" & Y & "','" & Z & "'," & AA & ",'" & AB & "'," & AC & "," & AD & "," & AE & "," & AF & ",'" & AG & "'," & AH & "," & AI & "," & AJ & "," & AK & ",'" & AL & "'," & AM & "," & AN & "," & AO & "," & AP & "," & AQ & "," & AR & "," & aAS & ",'" & AT & "'," & AU & "," & AV & "," & AW & "," & AX & "," & AY & "," & AZ & "," & BA & "," & BB & "," & BC & "," & BD & ",'" & BE & "','" & BF & "'," & BG & ",'" & BH & "','" & BI & "'," & BJ & "," & BK & "," & BL & ",'" & BM & "','" & BN & "'"

        con.Execute Query

    Next
    End With

     con.Close
     Set con = Nothing
    Exit Sub
ErrHandler:     'MsgBox "The Not able ta Save Data"

                Set con = Nothing
End Sub 
```

* * *

上面的代码工作正常。但是更新数据需要更多时间。:-(

* * *

现在我的代码变成了这样

* * *

```
 Private Sub Worksheet_Activate()
    Dim adoConn             As New ADODB.Connection
    Dim adoRS               As New ADODB.Recordset

    Dim sQuery              As String
    Dim EffectedRecs        As Long
    Dim sFields             As String
    Dim sValues             As String

    Dim iRow                As Integer
    Dim iField              As Integer

    ServerName = "193.128.125.14"
    con_Str = "Provider=SQLOLEDB; " & _
            "Data Source=" & ServerName & "; " & _
            "Initial Catalog=DB_At&T;" & _
            "User ID=sa; Password=ad28; "

    sQuery = "select * from Currency where 1=2"

    sValues = ""

    With adoConn
        .ConnectionString = con_Str
        .Provider = "Microsoft.JET.OLEDB.12.0"
        .CursorLocation = adUseClient
        .Open
    End With

    With adoRS
        .ActiveConnection = adoConn
        .CursorLocation = adUseClient
        .LockType = adLockBatchOptimistic
        .CursorType = adOpenKeyset ' adOpenDynamic
        .Source = sQuery
        .Open
    End With

    With ThisWorkbook.Sheets("Export")
        For iRow = 3 To ThisWorkbook.Sheets("Export").Range("B65536").End(xlUp).Row
            For iField = 0 To adoRS.Fields.Count - 1
                sFields = sFields & "," & adoRS.Fields(iField).Name
            Next

            sValues = sValues & "," & .Range("A" & iRow).Value
            sValues = sValues & "," & .Range("B" & iRow).Value
            sValues = sValues & "," & .Range("C" & iRow).Value
            sValues = sValues & "," & .Range("D" & iRow).Value

            sFields = Right(sFields, Len(sFields) - 1) 'Removing ,
            sValues = Right(sValues, Len(sValues) - 1) 'Removing ,
            adoRS.AddNew FieldList = sFields, Values:=sValues
        Next
End With

    adoRS.UpdateBatch adAffectAllChapters

    adoRS.Close
    adoConn.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:14:16.283

你可以试试这个：

```
Sub InitialExport()
On Error GoTo ErrHandler
'
Dim adoConn             As New ADODB.Connection
Dim adoRS               As ADODB.Recordset
'
Dim sQuery              As String
Dim EffectedRecs        As Long
Dim sFields             As String
Dim sValues             As String
'
Dim iRow                As Integer
Dim iField              As Integer
'
ServerName = SERVER_NAME
'
sQuery="SELECT * from tableName where 1 =2" ' get an empty recordset!
'
'Set the connection and open
with adoConn
    .ConnectionString = CONNECTION_STRING
    .Provider = "Microsoft.JET.OLEDB.12.0"
    .cursorlocation=aduseclient
    .Open
end with
'
' set the Recordset and open
With adoRS
    .activeconnection=adoconn
    .CursorLocation = adUseClient
    .LockType = adLockBatchOptimistic
    .CursorType = adopenkeyset ' adOpenDynamic
    .Source = sQuery
    .Open
End With
'
' now get the data into the recordset
With ThisWorkbook.Sheets("Export")
    For iRow = 3 To ThisWorkbook.Sheets("Export").Range("B65536").End(xlUp).Row
        ' here loop through all the columns
        For iField = 0 To adoRS.Fields.Count - 1
            ' adding the column names to the Variable sFields
            sFields = sFields & "," & adoRS.Fields(iField).Name
            '
            ' adding the values from the worksheet for this row
            sValues = sValues & ", " & .Cells(iRow, iField).Text
        Next
        '
        ' add a new record with the fields and values
        adoRS.AddNew FieldList:=sFields, Values:=sValues
        '
Next
'
' update all the rows in one step
adoRS.UpdateBatch adAffectAllChapters ' update them all in one step!
'
End Sub 
```

只需将**查询**中的表名更改为正确的表，并确保工作表中的列与表中的列具有相同的顺序和数据类型

有关 ADO 记录集的帮助，请参阅：

[MSDN 库 - ADO 记录集、AddNew 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677536%28v=vs.85%29.aspx)

和

[MSDN 库 - ADO 记录集、UpdateBatch](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms675283%28v=vs.85%29.aspx)

和

[W3学校](http://www.w3schools.com/ado/met_rs_updatebatch.asp)

我希望你开始了！

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T15:47:58.050

[另一种选择是使用BulkInsert](https://msdn.microsoft.com/en-us/library/ms188365.aspx)将整个 Excel 工作表作为 csv 文件直接上传到服务器。

Sql 代码可能看起来很简单：

```
BULK INSERT [DB].[dbo].[Importa_Aux] FROM '\\share\filename.csv' WITH ( FIELDTERMINATOR = ',' , ROWTERMINATOR = '\n' , FIRSTROW = 2 ) 
```

然后只需在 SqlServer 中进行数据更新。

# javascript - 使用jquery从移动设备上传文件到服务器

> ID：15384547
> 
> 赞同：0
> 
> 时间：2013-03-13T11:53:03.633
> 
> 标签：javascript, jquery, jquery-mobile, file-upload

我有一个移动应用程序，它需要用户从他的手机附加一些文件并将其上传到服务器上。有没有办法使用 JQUERY/JAVASCRIPT 从手机上传服务器上的文件？

我发现很多人使用 PHP/ASP.NET-c#...但我需要的是**带有 JAVASCRIPT/JQUERY 的 HTML** ...！！

**我的应用程序上的更多信息（如果不需要，请忽略它）：**

我的前端是 HTML/CSS ..我有一个 WCF 服务在我的服务器上运行，它与数据库进行通信..我通过从客户端进行 ajax 调用来使用 WCF 服务..

我仅使用这些服务实现了所有其他操作，例如从数据库中插入/删除/更新/检索数据。我想知道是否有可能也使用这些网络服务来执行“在服务器上上传文件”任务...但没有任何想法！

这是另一个完全符合我需要的问题！[使用 WCF 以及 jquery(AJAX) 和 html 客户端的文件上传服务](https://stackoverflow.com/q/5355215/2098899)

对不起，如果我在任何地方都错了..这些东西对我来说是全新的，所以我需要你的指导..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:58:03.140

要保存上传的文件，您需要一个服务器端脚本（PHP、ASP 例如）将上传的文件从服务器的 tmp 目录移动到您想要的位置。

也许您可以编辑您的服务配置，以便将上传的文件自动写入您想要的位置，但出于安全原因，我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:07:52.403

这是本机应用程序吗？如果它只是一个网站，那么你会遇到困难，因为 iPhone 上的 safari 不支持文件上传。如果它是一个 phonegap 应用程序，你可能会挂接到文件 API ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:39:57.157

好的一些值得一提的观点。

1.  当您想将文件上传到服务器时，您必须使用表单的多部分内容类型发布文件。为此，您可能需要相应地在服务器端编写 WCF 服务。我对 WCF 没有很好的经验，但[这篇文章](https://stackoverflow.com/questions/6949668/how-to-upload-a-file-to-a-net-3-5-wcf-service-hosted-in-iis)可能会有所帮助

    <form method="POST" enctype="multipart/form-data" >

2.  [HTML5 文件 API](http://www.w3.org/TR/FileAPI/)和[XHR 2 级](http://www.w3.org/TR/XMLHttpRequest/)规范，您可以将文件上传到服务器。因为它们是新功能并且涉及到 JS 和 DOM，所以只要您的浏览器支持它们，您就可以在 JQuery 中使用和执行它。

有了这些东西，我不确定在将文件上传到服务器时是否应该有任何问题。

# javascript - 无法从函数返回值

> ID：15384548
> 
> 赞同：1
> 
> 时间：2013-03-13T11:53:04.127
> 
> 标签：javascript, jquery

我想从包含匿名函数的函数返回值。

```
function getSingleCheckedItemId() {
    return $(".data-table-chk-item").each(function() {
      if ($(this).is(":checked")) {
          var value = $(this).attr("value");
          return value;
      }
    });
  } 
```

在这种情况下，它会返回所有复选框的数组。如果我删除第一个`return`，它不会返回一个值但是`undefined`.

那么如何从 中返回值`getSingleCheckedItemId()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:54:29.850

[`.each`](http://api.jquery.com/each/)始终返回包含您迭代的所有元素的 jQuery 对象，因此：

```
function getSingleCheckedItemId() {
    var ret;
    $(".data-table-chk-item").each(function() {
      if ($(this).is(":checked")) {
          ret = $(this).attr("value");
          return false; //breaks out of .each
      }
    });
    return ret;
} 
```

此外，`this.value`这通常是比处理表单输入更好的选择-由于它们的属性`$(this).attr('value')`，您似乎有`radio`/输入。此外，返回一个布尔值，因此两者都不需要。`checkbox``checked``this.checked``$(this).is(':checked')`

* * *

我相信您的逻辑可以简化为：

```
function getSingleCheckedItemId() {
    return $(".data-table-chk-item:checked").val();
} 
```

这种方式[`.val()`](http://api.jquery.com/val/)将返回第一`:checked`项的值，或者`undefined`如果选择器没有匹配任何元素，这与上面的循环相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T12:01:38.260

你能行的：

```
function getSingelCheckedItemId() {
    var elements = $(".data-table-chk-item:checked");
    return (elements.length > 0) ? $(elements[0]).val() : undefined;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:01:40.970

我会这样做

```
function getSingleCheckedItemId() {
    var ret;
    $(".data-table-chk-item").each(function() {
        if ($(this).is(":checked")) {
            ret = $(this).attr("value");
        }
    });
    return ret;
} 
```

# java - Android SQLite ContentValues 未插入

> ID：15384550
> 
> 赞同：4
> 
> 时间：2013-03-13T11:53:08.983
> 
> 标签：java, android, sqlite

我正在尝试将值插入`SQLite`Database for Android Application。我正在编写以下代码：

```
public class DataBaseAdapter extends SQLiteOpenHelper 
{
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "AlarmSystem";

// Alarm table name
private static final String TABLE_NAME = "Alarms";

//AlarmTable Columns names
private static final String KEY_ALARM_ID = "Id";
private static final String KEY_DESC = "Description";
private static final String KEY_REPEAT_DAY = "RepeatDay";
private static final String KEY_REPEAT_TYPE = "REPEAT_TYPE";
private static final String KEY_CALENDAR = "Calendar";
private static final String KEY_APP = "Device";
private static final String KEY_ACTIVE = "Active";

//creating database
public DataBaseAdapter(Context con)
{
    super(con, DATABASE_NAME, null, DATABASE_VERSION);
}

//creating table
@Override
public void onCreate(SQLiteDatabase db)
{
    String CREATE_TABLE = "Create Table "+TABLE_NAME+"("
            +KEY_ALARM_ID+" integer primary key AUTOINCREMENT, "+KEY_DESC+" TEXT, "+KEY_REPEAT_DAY+ " TEXT,"
            +KEY_REPEAT_TYPE+" integer, "+KEY_CALENDAR+" TEXT, "+KEY_APP+" TEXT, "+KEY_ACTIVE+" integer );";

    db.execSQL(CREATE_TABLE);
}
//updating database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

    // Create tables again
    onCreate(db);
}
public void addAlarm(Alarm alarm)
{
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    values.put(KEY_DESC, alarm.getDesc());
    values.put(KEY_REPEAT_DAY, alarm.getRepeatDay());
    values.put(KEY_REPEAT_TYPE, alarm.getRepeatType());
    values.put(KEY_CALENDAR, Long.toString(alarm.getCalendarInMillis()));
    values.put(KEY_APP, alarm.getApp());
    values.put(KEY_ACTIVE, alarm.getActive());

    db.insert(TABLE_NAME, null, values);
    db.close();
} 
```

我不知道是什么问题。所以我发布了Logcat：

```
 03-13 17:09:33.388: D/SqliteDatabaseCpp(1095): Registering sqlite logging func: /data/data/com.example.devicecontrolpanel/databases/AlarmSystem
    03-13 17:09:33.408: D/SqliteDatabaseCpp(1095): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, cannot stat file, errno = 2, message = No such file or directory
    03-13 17:09:33.408: D/SqliteDatabaseCpp(1095): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x8ccc98, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
    03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x8ccc98, type = w, r/w = (0, 0)
    03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, file size = 4096
    03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x8f3100, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
    03-13 17:09:33.588: D/SqliteDatabaseCpp(1095): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x8f3100, type = w, r/w = (0, 0)
    03-13 17:09:33.598: D/AndroidRuntime(1095): Shutting down VM
    03-13 17:09:33.598: W/dalvikvm(1095): threadid=1: thread exiting with uncaught exception (group=0x40ae0228)
    03-13 17:09:33.618: E/AndroidRuntime(1095): FATAL EXCEPTION: main
    03-13 17:09:33.618: E/AndroidRuntime(1095): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.devicecontrolpanel/com.example.devicecontrolpanel.Main}: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.os.Handler.dispatchMessage(Handler.java:99)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.os.Looper.loop(Looper.java:156)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.main(ActivityThread.java:4987)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at java.lang.reflect.Method.invoke(Method.java:511)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at dalvik.system.NativeStart.main(Native Method)
    03-13 17:09:33.618: E/AndroidRuntime(1095): Caused by: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2194)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:448)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:435)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:79)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:176)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:168)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.example.devicecontrolpanel.DataBaseAdapter.getAlarmsCount(DataBaseAdapter.java:190)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.example.devicecontrolpanel.DataBaseAdapter.getAllAlarmList(DataBaseAdapter.java:117)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at com.example.devicecontrolpanel.Main.onCreate(Main.java:19)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.Activity.performCreate(Activity.java:4538)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
    03-13 17:09:33.618: E/AndroidRuntime(1095):     ... 11 more
    03-13 17:16:48.144: D/SqliteDatabaseCpp(2080): Registering sqlite logging func: /data/data/com.example.devicecontrolpanel/databases/AlarmSystem
    03-13 17:16:48.144: D/SqliteDatabaseCpp(2080): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, cannot stat file, errno = 2, message = No such file or directory
    03-13 17:16:48.164: D/SqliteDatabaseCpp(2080): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x86b220, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
    03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x86b220, type = w, r/w = (0, 0)
    03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: open db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, flag = 6, file size = 5120
    03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle: 0x897800, type: w, r/w: (0,1), mode: truncate, disk free size: 777 M
    03-13 17:16:48.384: D/SqliteDatabaseCpp(2080): DB info: close db, path = /data/data/com.example.devicecontrolpanel/databases , key = 9lYvmWqw, handle = 0x897800, type = w, r/w = (0, 0)
    03-13 17:16:48.394: D/AndroidRuntime(2080): Shutting down VM
    03-13 17:16:48.414: W/dalvikvm(2080): threadid=1: thread exiting with uncaught exception (group=0x40ae0228)
    03-13 17:16:48.424: E/AndroidRuntime(2080): FATAL EXCEPTION: main
    03-13 17:16:48.424: E/AndroidRuntime(2080): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.devicecontrolpanel/com.example.devicecontrolpanel.Main}: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2205)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.os.Handler.dispatchMessage(Handler.java:99)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.os.Looper.loop(Looper.java:156)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.main(ActivityThread.java:4987)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at java.lang.reflect.Method.invoke(Method.java:511)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at dalvik.system.NativeStart.main(Native Method)
    03-13 17:16:48.424: E/AndroidRuntime(2080): Caused by: java.lang.IllegalStateException: database /data/data/com.example.devicecontrolpanel/databases/AlarmSystem (conn# 0) already closed
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2194)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:448)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:435)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:79)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:176)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:168)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.example.devicecontrolpanel.DataBaseAdapter.getAlarmsCount(DataBaseAdapter.java:196)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.example.devicecontrolpanel.DataBaseAdapter.getAllAlarmList(DataBaseAdapter.java:123)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at com.example.devicecontrolpanel.Main.onCreate(Main.java:19)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.Activity.performCreate(Activity.java:4538)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
    03-13 17:16:48.424: E/AndroidRuntime(2080):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:45:33.520

通常，最好将包装器方法（在您的情况下`addAlarm, editAlarm, deleteAlarm`）分开在一个单独的类中。我建议您创建一个具有名称的新类，`myAppDataSource`并在该类中添加所有包装方法，以使您的生活更轻松。

该类的代码如下所示：

```
 public class StudyManagerDataSource {

    SQLiteOpenHelper dbHelper;
    SQLiteDatabase database;

public StudyManagerDataSource(Context context) {
            dbHelper = new DatabaseAdapter(context);

        }

public void addAlarm(Alarm alarm)
{  

    // open the database connection 
    open();
    ContentValues values = new ContentValues();

    values.put(KEY_DESC, alarm.getDesc());
    values.put(KEY_REPEAT_DAY, alarm.getRepeatDay());
    values.put(KEY_REPEAT_TYPE, alarm.getRepeatType());
    values.put(KEY_CALENDAR, Long.toString(alarm.getCalendarInMillis()));
    values.put(KEY_APP, alarm.getApp());
    values.put(KEY_ACTIVE, alarm.getActive());
    database.insert(TABLE_NAME, null, values);
    // I will suggest to keep the connection to the database open when your app is 
    // running, the recommended time to close the connection is when your app is 
    //going to pause/stop.
    close();
}

public void open() {
        database = dbHelper.getWritableDatabase();
        Log.i(LOG_TAG, "Database Opened");
    } // end method open

public void close() {
        Log.i(LOG_TAG, "Database Closed");
        dbHelper.close();
    } // end method close
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:10:02.490

您应该首先打开与数据库的连接，尝试将 db.open() 放入 onCreateMethod()

```
//creating table
@Override
public void onCreate(SQLiteDatabase db)
{
    db.open();
    String CREATE_TABLE = "Create Table "+TABLE_NAME+"("
            +KEY_ALARM_ID+" integer primary key AUTOINCREMENT, "+KEY_DESC+" TEXT, "+KEY_REPEAT_DAY+ " TEXT,"
            +KEY_REPEAT_TYPE+" integer, "+KEY_CALENDAR+" TEXT, "+KEY_APP+" TEXT, "+KEY_ACTIVE+" integer );";

    db.execSQL(CREATE_TABLE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T06:41:33.390

```
public void addAlarm(Alarm alarm)
{  

    // open the database connection 
   database=this.getWritableDatabase();

    ContentValues values = new ContentValues();

    values.put(KEY_DESC, alarm.getDesc());
    values.put(KEY_REPEAT_DAY, alarm.getRepeatDay());
    values.put(KEY_REPEAT_TYPE, alarm.getRepeatType());
    values.put(KEY_CALENDAR, Long.toString(alarm.getCalendarInMillis()));
    values.put(KEY_APP, alarm.getApp());
    values.put(KEY_ACTIVE, alarm.getActive());
    database.insert(TABLE_NAME, null, values);
    // I will suggest to keep the connection to the database open when your app is 
    // running, the recommended time to close the connection is when your app is 
    //going to pause/stop.
    database.close();
} 
```

# python - 有条件地附加文件内容

> ID：15384555
> 
> 赞同：0
> 
> 时间：2013-03-13T11:53:19.297
> 
> 标签：python

在检查源文件中的所有行（作为一个组）是否已经存在于目标文件中之后，我有一个包含需要附加到目标文件的内容的源文件。

如果它已经在目标文件中找到，我不应该再次追加，因为这会复制目标文件中的内容。

这实质上是在将行块作为一个整体进行比较。有没有办法在不使用正则表达式的情况下在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:19:35.187

```
src = open('source').read()
if src not in open('dest').read():
    with open('dest', 'a') as dst:
        dst.write(src) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:01:38.773

如果您可以将整个文件作为单个字符串加载到内存中，那么您可以简单地使用`count`：

```
import os

f = open("the_file_name", 'r+')
s1 = "the block of text\nwith newlines!\nyou will search in the file"
s2 = f.read() # s2 now has the whole file
if s2.count(s1) > 0:
    # seek to end and append s1
    f.seek(0, os.SEEK_END)
    f.write(s1) 
```

# android - 使用自定义 ArrayAdapter 从列表视图中删除一行

> ID：15384556
> 
> 赞同：1
> 
> 时间：2013-03-13T11:53:22.387
> 
> 标签：android, android-listview, android-arrayadapter, onitemclicklistener

我在教程中有一个自定义的 ArrayAdapter

这是代码：

```
public class EntryAdapter extends ArrayAdapter {

    private Context context;
    private ArrayList<Item> items;
    private LayoutInflater vi;

    public EntryAdapter(Context context,ArrayList<Item> items) {
        super(context,0, items);
        this.context = context;
        this.items = items;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v = convertView;

        final Item i = items.get(position);
        if (i != null) {
            if(i.isSection()){
                SectionItem si = (SectionItem)i;
                v = vi.inflate(R.layout.list_item_section, null);

                v.setOnClickListener(null);
                v.setOnLongClickListener(null);
                v.setLongClickable(false);

                final TextView sectionView = (TextView) v.findViewById(R.id.list_item_section_text);
                sectionView.setText(si.getTitle());
            }else{
                EntryItem ei = (EntryItem)i;
                v = vi.inflate(R.layout.list_item_entry, null);
                final TextView title = (TextView)v.findViewById(R.id.list_item_entry_title);
                final TextView subtitle = (TextView)v.findViewById(R.id.list_item_entry_summary);

                if (title != null) 
                    title.setText(ei.title);
                if(subtitle != null)
                    subtitle.setText(ei.subtitle);

            }
        }
        return v;
    }

} 
```

现在我正在尝试使用此 ArrayAdapter 从列表视图中删除一行

这是我到目前为止所尝试的：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        // TODO Auto-generated method stub
        DataHandler.itemToCart.remove(position);
        DataHandler.pricesOnCart.remove(position);
        items.remove(position);
        for(int i = 0 ; i<DataHandler.itemToCart.size(); i ++){
            Log.e("DataHandler.itemToCart", ""+DataHandler.itemToCart.get(i).toString());
            Log.e("DataHandler.pricesOnCart", ""+DataHandler.pricesOnCart.get(i).toString());
        }
        adapter.notifyDataSetChanged();
    } 
```

`ListView`包含两个`TextViews`我填充的，并且`DataHandler.itemToCart` 是`DataHandler.pricesOnCart`一个`items`ArrayList，它是`ListView`.

我尝试使用`items.remove(position)`从 ListView 中删除一行，但它对我不起作用。

# primefaces - primefaces 数据表行着色

> ID：15384560
> 
> 赞同：14
> 
> 时间：2013-03-13T11:53:27.923
> 
> 标签：primefaces

我想用不同的颜色显示数据表行。

我正在使用 rowStyleClass 属性。但它并没有改变颜色

我在数据表中的代码是，

```
rowStyleClass="highlight"; 
```

我的css文件看起来像这样，

```
.highlight {
    background: yellow  !important ;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-13T15:41:24.480

你应该有两个不同颜色的类，并在 rowStyleClass 属性中使用 inline 如果：

```
rowStyleClass="#{(rowIndex mod 2) eq 0 ? 'highlight1' : 'highlight2'}" 
```

您应该在数据表 rowIndexVar 属性中设置“rowIndex”

```
rowIndexVar="rowIndex" 
```

这意味着偶数行的行样式类设置为“highlight1”，奇数行 - “highlight2”

[在这里查看更多信息](https://www.primefaces.org/showcase/ui/data/datatable/rowColor.xhtml)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-13T19:24:25.620

最简单的方法是在你的 CSS 中实现`.ui-datatable-odd`和`.ui-datatable-even`样式化类，这是`p:dataTable`默认实现的。例子：

```
.ui-datatable-odd {
    background: #ffffff;
}

.ui-datatable-even {
    background: #F2F5F9;
} 
```

最终看起来像

![在此处输入图像描述](../Images/4f7f53aba3f23b21b57c2be6c18f4177.png)

可能是您需要使用更具体的选择器，请阅读有关 css 的特殊性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-11T05:33:52.917

试试这个......它在我的情况下工作

```
.ui-widget-content .ui-datatable-even{
    background: #F2F5F9;
}

.ui-widget-content .ui-datatable-odd{
    background: red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T18:44:40.207

都铎的答案是正确的方式。如果您使用 treeTable ，您可以这样做：

```
.ui-treetable tbody tr:nth-child(odd) {
    background-color: #edf2f6 !important;
}

.ui-treetable tbody tr:nth-child(even) {
    background-color: #ffffff !important;
} 
```

# .net - .net 如何使用占位符查找子字符串

> ID：15384561
> 
> 赞同：1
> 
> 时间：2013-03-13T11:53:29.233
> 
> 标签：.net, regex, vb.net, string, search

我有一个字符串列表，我想检查每个字符串是否包含某个子字符串。

问题是：应该允许使用占位符。

例如：我正在搜索 `"customer-id", "customer id", "customers id"` -> 我的搜索字符串如下所示：（`"customer{2}id"`而 {2} 代表占位符字符的数量 -> 介于 0 和 2 之间）。

当然这不适用于

```
teststring.indexof("customer{2}id") 
```

也试过：

```
Dim r as new Regex("customer??id") 
```

但这只会引发嵌套限定符某些异常。由于我不是正则表达式的极客，因此我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:07:26.413

如果我对您的理解正确，您可以尝试以下操作：

```
customer.{0,2}id 
```

这将搜索一个`customer`以 0-2 个字符开头的字符串，然后是`id`.

所以基本上你的例子来自`customer.{0,n}id`哪里： 。`n``indexof``customer{n}id`

请注意，`.`匹配任何字符（在某些情况下包括新行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:09:42.740

`?`是正则表达式中的量词（而不是单个字符的占位符）。这意味着它量化了前面的元素。这可以是一个字符、一个字符类或一个组。

正则表达式中存在 4 个量词。

1.  `{x,y}`其中 x 是要匹配的最小数量，y 是要匹配的最大数量。您也可以只输入一位`{4}`与 4 次匹配的数字。

2.  `+`表示一个或多个，与`{1,}`

3.  `*`表示零个或多个，与`{0,}`

4.  `?`表示零或一，与`{0,1}`

我认为你需要类似的东西

```
customer.{0,2}id 
```

`.`是正则表达式中的特殊字符并匹配任何字符（换行符除外）

所以这个正则表达式将匹配如下字符串：

> customerid
> 客户 id
> 客户 id
> 客户#+id
> customerXXid

您可以将 替换`.`为更定义的字符类，例如，如果您只想允许空格和连字符，请创建您自己的字符类并添加您想要允许的字符。

```
customer[ -]{0,2}id 
```

此正则表达式将匹配以下字符串：

> customerid
> 客户 id
> 客户-id
> 客户
> - id 客户--id

更多的信息：

*   www.regular-expressions.info 上的[正则表达式快速入门](http://www.regular-expressions.info/quickstart.html)
*   msdn.microsoft.com 上的[.NET Framework 正则表达式](http://msdn.microsoft.com/en-us/library/hs600312.aspx)

# xcode - Xcode 无法检测到设备

> ID：15384562
> 
> 赞同：3
> 
> 时间：2013-03-13T11:53:29.980
> 
> 标签：xcode, ipad, version, device

我正在使用 xcode 4.6。

在我将 iPad 从 iOS 5.1 升级到 6.1 后，Xcode 在架构中找不到设备。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:55:13.920

我相信以下内容对您有用：

*   导航 `Window -> Organizer`并定位您的设备。
*   单击“**用于开发**”按钮。

# networking - 带宽延迟积

> ID：15384563
> 
> 赞同：4
> 
> 时间：2013-03-13T11:53:34.743
> 
> 标签：networking, tcp

假设带宽延迟乘积定义了可以填充链路的比特数。发送者应该发送一个 (2*bandwidth*delay) 位的数据突发。我不明白为什么术语带宽*延迟乘以 2。请解释原因？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:10:54.380

这取决于您所说的“延迟”是什么意思。如果延迟是往返时间 (RTT)，那么您不会将其乘以 2。据推测，在您正在查看的公式中，延迟是单向传输时间，因此您将其乘以 2 来估计 RTT。

一个 RTT 是您最早可以收到您传输的第一个比特的确认，这就是为什么您的窗口应该那么大以填充管道的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-22T14:05:47.753

在您的情况下，延迟是传播延迟，即信号（消息）从发送者传播到接收者所花费的时间。

它乘以 2，因为链路是双向的，即发送方和接收方都可以同时发送数据，即为了完全填充链路，您需要将传播延迟乘以 2，这个术语称为往返时间（ RTT)。

```
bandwidth-delay product = RTT * bandwidth
bandwidth-delay product = 2 * propagation delay * bandwidth 
```

在哪里

```
RTT = 2 * propagation delay 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T08:45:13.477

i guess this product only work to tcp/ip, not udp/ip. as only tcp need confirmation about the sending data.

# android - 在android后台调用多个服务

> ID：15384564
> 
> 赞同：1
> 
> 时间：2013-03-13T11:53:37.073
> 
> 标签：android, service, android-service, background-process

我必须在后台为 android 应用程序中的项目调用多个服务。在每个服务中，我必须调用单独的 Web 服务并获取一些数据并使用本地 sqlite 数据库处理它。我可以分别调用每个服务，并可以使用本地数据库操作其结果。但无法按顺序调用所有服务。我的代码如下：

```
@Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Timer timer = new Timer();

        final SyncTableUsers syncUserObj = new SyncTableUsers(LocalService.this);
        final SyncTableVehicles syncVehicleObj = new SyncTableVehicles(this);
        final SyncTableLicenses syncLicenseObj = new SyncTableLicenses(this);
        final SyncTableTags syncTagObj = new SyncTableTags(this);
        final SyncTableTagMappings syncTagMapObj = new SyncTableTagMappings(this);
        final SyncTableAddresses syncAddressObj = new SyncTableAddresses(this);
        final SyncTableDispatches syncDispatchObj = new SyncTableDispatches(this);
        final SyncEditCompany syncCompanyObj = new SyncEditCompany(LocalService.this);
        final SyncEditVehicle syncEditVehicleObj = new SyncEditVehicle(LocalService.this);
        final SyncEditUser syncEditUserObj = new SyncEditUser(this);
        final SyncVehicleLog vLogObj = new SyncVehicleLog(LocalService.this);
        TimerTask timerTask = new TimerTask() {

            @Override
            public void run() {
                        syncUserObj.syncUserData();
                        syncVehicleObj.syncVehicleData();
                        syncLicenseObj.syncLicensesData();
                        syncTagObj.syncTagData();
                        syncTagMapObj.syncTagMappingData();
                        syncAddressObj.syncAddressData();
                        syncDispatchObj.syncDispatchData();
                        syncCompanyObj.syncCompanyData();
                        syncEditVehicleObj.syncVehicleData();
                        syncEditUserObj.syncUserData();
                        Log.i("TAG", "LogId After insert values ");
                }
            }
        };
        timer.scheduleAtFixedRate(timerTask, 10000, 180000);  call after every
                                                             3 minute
        super.onStart(intent, startid); 
```

syncUserData 是一种调用 Web 服务的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:19:42.240

I recommend you go for the AsyncTask solution. It is an easy and straightforward way of running requests or any other background tasks and calling web services using devices having latest OS virsion you must need to use AsyncTask.

It's also easy to implement e.g. onProgressUpdate if you need to show a progress bar of some sort while running your requests.

```
private class YourTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
    //call your methods from here
         //publish yor progress here..
        publishProgress((int) ((i / (float) count) * 100));
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
    //action after execution success or not
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-26T16:58:21.820

使用 Intent 服务按顺序执行您的任务。查看以下链接了解详情
[https://developer.android.com/reference/android/app/IntentService.html](https://developer.android.com/reference/android/app/IntentService.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-16T17:16:16.500

```
 <uses-sdk
            android:minSdkVersion="8"
            tools:ignore="GradleOverrides" />
        <uses-permission android:name="android.permission.CAMERA" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.RECORD_AUDIO" />
    Videocapture Activity   - activitymain

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <SurfaceView
                android:id="@+id/CameraView"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="bottom"
                android:orientation="vertical">

                <LinearLayout

                    android:gravity="center_vertical"
                    android:background="@color/color_transparent"
                    android:paddingLeft="10dp"
                    android:paddingRight="10dp"
                    android:layout_width="match_parent"
                    android:layout_height="150dp"
                    android:orientation="horizontal">
                    <TextView
                        android:id="@+id/txt_cancel"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:text="Cancel"
                        android:layout_weight="1"
                        android:textSize="30dp"
                        android:textColor="@color/color_white" />

                    <CheckBox
                        android:button="@drawable/checkbox"
                        android:id="@+id/chk_videorecord"
                        android:layout_width="100dp"
                        android:layout_height="100dp"
                        android:textColor="@color/color_white"
                        android:textOff="@null"
                        android:textOn="@null" />

                    <TextView
                        android:id="@+id/txt_submit"
                        android:layout_weight="1"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:text="Submit"
                        android:textSize="30dp"
                        android:textColor="@color/color_white" />

                </LinearLayout>

            </LinearLayout>
        </RelativeLayout>
    </LinearLayout>

    import java.io.File;
    import java.io.IOException;

    import android.app.Activity;
    import android.content.Intent;
    import android.hardware.Camera;
    import android.media.CamcorderProfile;
    import android.media.MediaRecorder;
    import android.net.Uri;
    import android.os.Bundle;
    import android.os.Environment;
    import android.util.Log;
    import android.view.SurfaceHolder;
    import android.view.SurfaceView;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.CheckBox;
    import android.widget.CompoundButton;
    import android.widget.MediaController;
    import android.widget.TextView;
    import android.widget.Toast;
    import android.widget.ToggleButton;
    import android.widget.VideoView;

    public class VideoCapture extends Activity implements OnClickListener, SurfaceHolder.Callback {

        public static final String LOGTAG = "VIDEOCAPTURE";

        private MediaRecorder recorder;
        private SurfaceHolder holder;
        private CamcorderProfile camcorderProfile;
        private Camera camera;

        boolean recording = false;
        boolean usecamera = true;
        boolean previewRunning = false;

        TextView txt_cancel, txt_submit;
        CheckBox chk_videorecord;
        private String str_record_file;
        private Uri uri;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            camcorderProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
            setContentView(R.layout.activity_main);
            chk_videorecord = findViewById(R.id.chk_videorecord);
            final SurfaceView cameraView = (SurfaceView) findViewById(R.id.CameraView);
            txt_cancel = findViewById(R.id.txt_cancel);
            txt_submit = findViewById(R.id.txt_submit);
            holder = cameraView.getHolder();
            holder.addCallback(this);
            holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

            cameraView.setClickable(true);
            cameraView.setOnClickListener(this);

            chk_videorecord.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    if (chk_videorecord.isChecked())
                    {
                        chk_videorecord.setBackgroundDrawable(getResources().getDrawable(R.drawable.img_stop_record));
                        recording = true;
                        recorder.start();
                        Toast.makeText(VideoCapture.this, "Recording Started", Toast.LENGTH_SHORT).show();

                    } else {
                        chk_videorecord.setBackgroundDrawable(getResources().getDrawable(R.drawable.img_start_record));
                        recorder.stop();
                        Toast.makeText(VideoCapture.this, "Recording Stop", Toast.LENGTH_SHORT).show();
                        if (usecamera) {
                            try {
                                camera.reconnect();
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        }
                        // recorder.release();
                        recording = false;
                        Log.v(LOGTAG, "Recording Stopped");
                        // Let's prepareRecorder so we can record again
                        prepareRecorder();
                    }
                }
            });

            txt_cancel.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    finish();
                }
            });

            txt_submit.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v)
                {
                    if(str_record_file!=null) {
                        Intent intent = new Intent(VideoCapture.this, HomeActivity.class);
                        intent.putExtra("str_record_file", str_record_file);
                        startActivity(intent);
                    }
                }
            });
        }

        private void prepareRecorder() {
            recorder = new MediaRecorder();
            recorder.setPreviewDisplay(holder.getSurface());

            if (usecamera) {
                camera.unlock();
                recorder.setCamera(camera);
            }

            recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
            recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);

            recorder.setProfile(camcorderProfile);

            // This is all very sloppy
            if (camcorderProfile.fileFormat == MediaRecorder.OutputFormat.THREE_GPP)
            {
                try {
                    File newFile = File.createTempFile("videocapture", ".3gp", Environment.getExternalStorageDirectory());
                    recorder.setOutputFile(newFile.getAbsolutePath());
                    str_record_file = newFile.getAbsolutePath();
                    Log.d("file_path", "=======>" + str_record_file);

                } catch (IOException e) {
                    Log.v(LOGTAG, "Couldn't create file");
                    e.printStackTrace();
                    finish();
                }
            } else if (camcorderProfile.fileFormat == MediaRecorder.OutputFormat.MPEG_4) {
                try {
                    File newFile = File.createTempFile("videocapture", ".mp4", Environment.getExternalStorageDirectory());
                    recorder.setOutputFile(newFile.getAbsolutePath());
                    str_record_file = newFile.getAbsolutePath();
                    Log.d("file_path", "=======>" + str_record_file);

                } catch (IOException e) {
                    Log.v(LOGTAG, "Couldn't create file");
                    e.printStackTrace();
                    finish();
                }
            } else {
                try {
                    File newFile = File.createTempFile("videocapture", ".mp4", Environment.getExternalStorageDirectory());
                    recorder.setOutputFile(newFile.getAbsolutePath());
                    str_record_file = newFile.getAbsolutePath();
                    Log.d("file_path", "=======>" + str_record_file);

                } catch (IOException e) {
                    Log.v(LOGTAG, "Couldn't create file");
                    e.printStackTrace();
                    finish();
                }

            }
            //recorder.setMaxDuration(50000); // 50 seconds
            //recorder.setMaxFileSize(5000000); // Approximately 5 megabytes

            try {
                recorder.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
                finish();
            } catch (IOException e) {
                e.printStackTrace();
                finish();
            }
        }

        public void onClick(View v) {
            if (recording) {
                recorder.stop();
                if (usecamera) {
                    try {
                        camera.reconnect();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                // recorder.release();
                recording = false;
                Log.v(LOGTAG, "Recording Stopped");
                // Let's prepareRecorder so we can record again
                prepareRecorder();
            } else {
                recording = true;
                recorder.start();
                Log.v(LOGTAG, "Recording Started");
            }
        }

        public void surfaceCreated(SurfaceHolder holder) {
            Log.v(LOGTAG, "surfaceCreated");

            if (usecamera) {
                camera = Camera.open();

                try {
                    camera.setPreviewDisplay(holder);
                    camera.startPreview();
                    previewRunning = true;
                } catch (IOException e) {
                    Log.e(LOGTAG, e.getMessage());
                    e.printStackTrace();
                }
            }

        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            Log.v(LOGTAG, "surfaceChanged");

            if (!recording && usecamera) {
                if (previewRunning) {
                    camera.stopPreview();
                }

                try {
                    Camera.Parameters p = camera.getParameters();

                    p.setPreviewSize(camcorderProfile.videoFrameWidth, camcorderProfile.videoFrameHeight);
                    p.setPreviewFrameRate(camcorderProfile.videoFrameRate);

                    camera.setParameters(p);

                    camera.setPreviewDisplay(holder);
                    camera.startPreview();
                    previewRunning = true;
                } catch (IOException e) {
                    Log.e(LOGTAG, e.getMessage());
                    e.printStackTrace();
                }

                prepareRecorder();
            }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            Log.v(LOGTAG, "surfaceDestroyed");
            if (recording) {
                recorder.stop();
                recording = false;
            }
            recorder.release();
            if (usecamera) {
                previewRunning = false;
                //camera.lock();
                camera.release();
            }
            finish();
        }
    }

Custom Tinder

 implementation 'com.mindorks:placeholderview:0.7.1'
    implementation 'com.android.support:cardview-v7:25.3.1'
    implementation 'com.github.bumptech.glide:glide:3.7.0'
    implementation 'com.google.code.gson:gson:2.7'

     <string-array name="arry_card">
            <item>Sofia</item>
        <item>Roma</item>
        <item>Zoya</item>
    </string-array>

      <color name="colorPrimary">#008577</color>
    <color name="colorPrimaryDark">#00574B</color>
    <color name="colorAccent">#D81B60</color>
    <color name="white">#FFFFFF</color>
    <color name="grey">#757171</color>

    activity_main

    <?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/grey">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="80dp"
        android:layout_gravity="bottom"
        android:gravity="center"
        android:orientation="horizontal">
        <ImageButton
            android:id="@+id/rejectBtn"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="@drawable/ic_cancel"/>
        <ImageButton
            android:id="@+id/acceptBtn"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_marginLeft="30dp"
            android:background="@drawable/ic_heart"/>
    </LinearLayout>
    <com.mindorks.placeholderview.SwipePlaceHolderView
        android:id="@+id/swipeView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</FrameLayout>

tinder_card_view

<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="350dp"
    android:layout_height="425dp"
    android:layout_marginBottom="50dp"
    android:orientation="vertical">
    <android.support.v7.widget.CardView
        android:orientation="vertical"
        android:background="@color/white"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp"
        app:cardCornerRadius="7dp"
        app:cardElevation="4dp">
        <ImageView
            android:id="@+id/profileImageView"
            android:scaleType="centerCrop"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="75dp"/>
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="75dp"
            android:orientation="vertical"
            android:layout_gravity="bottom"
            android:gravity="center|left"
            android:paddingLeft="20dp">
            <TextView
                android:id="@+id/nameAgeTxt"
                android:layout_width="wrap_content"
                android:textColor="@color/colorPrimaryDark"
                android:textSize="18dp"
                android:textStyle="bold"
                android:layout_height="wrap_content"/>
            <TextView
                android:id="@+id/locationNameTxt"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/colorPrimaryDark"
                android:textSize="14dp"
                android:textStyle="normal"/>
        </LinearLayout>
    </android.support.v7.widget.CardView>
</FrameLayout>

tinder_swipe_in_msg_view

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="350dp"
    android:layout_height="425dp">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="32sp"
        android:textStyle="bold"
        android:layout_margin="40dp"
        android:textColor="@android:color/holo_green_light"
        android:text="Accept"/>
</LinearLayout>

tinder_swipe_out_msg_view

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="350dp"
    android:gravity="right"
    android:layout_height="425dp">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="32sp"
        android:textStyle="bold"
        android:layout_margin="40dp"
        android:textColor="@android:color/holo_red_light"
        android:text="Reject"/>
</LinearLayout>

Profile

import com.google.gson.annotations.Expose;
import com.google.gson.annotations.SerializedName;

public class Profile {

    @SerializedName("name")
    @Expose
    private String name;

    @SerializedName("url")
    @Expose
    private String imageUrl;

    @SerializedName("age")
    @Expose
    private Integer age;

    @SerializedName("location")
    @Expose
    private String location;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getImageUrl() {
        return imageUrl;
    }

    public void setImageUrl(String imageUrl) {
        this.imageUrl = imageUrl;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    TinderCard

import android.content.Context;
import android.util.Log;
import android.widget.ImageView;
import android.widget.TextView;

import com.bumptech.glide.Glide;
import com.mindorks.placeholderview.SwipePlaceHolderView;
import com.mindorks.placeholderview.annotations.Layout;
import com.mindorks.placeholderview.annotations.Resolve;
import com.mindorks.placeholderview.annotations.View;
import com.mindorks.placeholderview.annotations.swipe.SwipeCancelState;
import com.mindorks.placeholderview.annotations.swipe.SwipeIn;
import com.mindorks.placeholderview.annotations.swipe.SwipeInState;
import com.mindorks.placeholderview.annotations.swipe.SwipeOut;
import com.mindorks.placeholderview.annotations.swipe.SwipeOutState;

@Layout(R.layout.tinder_card_view)
public class TinderCard {

    @View(R.id.profileImageView)
    private ImageView profileImageView;

    @View(R.id.nameAgeTxt)
    private TextView nameAgeTxt;

    @View(R.id.locationNameTxt)
    private TextView locationNameTxt;

    private Profile mProfile;
    private Context mContext;
    private SwipePlaceHolderView mSwipeView;

    public TinderCard(Context context, Profile profile, SwipePlaceHolderView swipeView) {
        mContext = context;
        mProfile = profile;
        mSwipeView = swipeView;
    }

    @Resolve
    private void onResolved(){
        Glide.with(mContext).load(mProfile.getImageUrl()).into(profileImageView);
        nameAgeTxt.setText(mProfile.getName() + ", " + mProfile.getAge());
        locationNameTxt.setText(mProfile.getLocation());
    }

    @SwipeOut
    private void onSwipedOut(){
        Log.d("EVENT", "onSwipedOut");
        mSwipeView.addView(this);
    }

    @SwipeCancelState
    private void onSwipeCancelState(){
        Log.d("EVENT", "onSwipeCancelState");
    }

    @SwipeIn
    private void onSwipeIn(){
        Log.d("EVENT", "onSwipedIn");
    }

    @SwipeInState
    private void onSwipeInState(){
        Log.d("EVENT", "onSwipeInState");
    }

    @SwipeOutState
    private void onSwipeOutState(){
        Log.d("EVENT", "onSwipeOutState");
    }
}

import android.content.Context;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;

import com.google.gson.Gson;
import com.mindorks.placeholderview.SwipeDecor;
import com.mindorks.placeholderview.SwipePlaceHolderView;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class MainActivity extends AppCompatActivity {

    private SwipePlaceHolderView mSwipeView;
    private Context mContext;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSwipeView = (SwipePlaceHolderView) findViewById(R.id.swipeView);
        mContext = getApplicationContext();

        mSwipeView.getBuilder()
                .setDisplayViewCount(3)
                .setSwipeDecor(new SwipeDecor()
                        .setPaddingTop(20)
                        .setRelativeScale(0.01f)
                        .setSwipeInMsgLayoutId(R.layout.tinder_swipe_in_msg_view)
                        .setSwipeOutMsgLayoutId(R.layout.tinder_swipe_out_msg_view));

        List<Profile> profileList = new ArrayList<>();

        List<String> arrayList = Arrays.asList(getResources().getStringArray(R.array.arry_card));
        for (int i = 0; i < arrayList.size(); i++) {
            //Profile profile = Gson.fromJson(arrayList.get(i), Profile.class);
            Profile profile = new Profile();
            profile.setName(arrayList.get(i));
            profile.setAge(2);
            profile.setImageUrl("");
            profile.setLocation("");
            profileList.add(profile);
        }

        for (Profile profile : profileList) {
            mSwipeView.addView(new TinderCard(mContext, profile, mSwipeView));
        }

        findViewById(R.id.rejectBtn).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mSwipeView.doSwipe(false);
            }
        });

        findViewById(R.id.acceptBtn).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mSwipeView.doSwipe(true);
            }
        });
    }
} 
```

# extjs - 在 extjs 4 树 multiSelect 中传递两个 id 并在单击中传递一个 id

> ID：15384565
> 
> 赞同：0
> 
> 时间：2013-03-13T11:53:38.757
> 
> 标签：extjs, extjs4

当用户在我的树中选择一行或多行时，我想将行的 ID 设置到我的商店代理的 url 上。这是我当前的代码：

```
var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    title: 'Taxonomy',
    region:'west',
    collapsible: true,
    split: true,
    multiSelect: true,                          
    height:'100%',       
    width: '20%',
    minWidth: 100,
    rootVisible: false,
    autoScroll: true,
    store: store,
    viewConfig: {
        allowCopy: true,
        plugins: {
            ptype:      'treeviewdragdrop',
            appendOnly: true,
            ddGroup:    'selDD'
        }
    }
}); 
```

这是我设置“选择”事件的代码：

```
treePanel.getSelectionModel().on('select', function(selModel, record) {
    var selectedNode = treePanel.getSelectionModel().getSelection();
    if (multiSelect,true) {
        treeID=selectedNode[0].data.id;
        //if(treeID = 'null'){
        store1.proxy.url='json/json.php?taxee_id=<?php echo $taxe_id;?>&id=' + selectedNode[0].data.id ;
        store1.load();
    }
    else
    {
        store1.proxy.url='json/json.php?taxee_id=<?php echo $taxe_id;?>&id=' + selectedNode[0].data.id + '&id1='+ selectedNode[1].data.id ;
        store1.load();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:54:23.253

如果这是您唯一的问题，这对您有用：

```
treePanel.getSelectionModel().on('select', function(selModel, record) {
    var selectedNode = treePanel.getSelectionModel().getSelection();
    if(selectedNode.length > 0)
    {
        var proxyUrl = 'json/json.php?taxee_id=<?php echo $taxe_id;?>&id=' + selectedNode[0].data.id;
        for(var i = 1; i < selectedNode.length; i++)
            proxyUrl += '&id' + i + '='+ selectedNode[i].data.id;
        store1.proxy.url = proxyUrl;
        store1.load();
    }
}); 
```

# asp.net-mvc-4 - Windows Server 2003 64 位 IIS 6.0 服务不可用

> ID：15384570
> 
> 赞同：1
> 
> 时间：2013-03-13T11:53:44.747
> 
> 标签：asp.net-mvc-4, .net-4.0, asp.net-web-api, iis-6, windows-server-2003-r2

我创建了一个 MVC 4 Web Api 并运行了所有配置以使其运行，但出现上述错误。

事件日志显示我正在运行两个版本的 .NET

我在服务器上启用了 32 位应用程序

这是 .NET 4 注册的证明：

![命令](../Images/846831fc828fc5dbfb52db8bf9bd7e27.png)

这是我得到的错误：

![错误 1](../Images/be671c08f52b90ae58f38366f6fa6d3e.png)

![事件查看器](../Images/7b062d09a06c01327c308bb15b13b120.png)

上述错误的设置：

![网站属性](../Images/c886374a51b781278bb2fbcd36baf972.png)

从上面的屏幕单击配置：

![应用程序配置](../Images/b2cec80413f0a4f9c9f1f6a7ce217347.png)

点击编辑：

![选择版本 4 isapi 时](../Images/0075577987d7fee2d3859e013e41e28c.png)

如果我将通配符映射 dll 更改为以下

![选择版本 2 isapi 时](../Images/db4e5c024bf35364dca58f49796c0874.png)

我收到此错误，如您所见，它说我正在运行 .net 版本 2，根据第一个屏幕截图，这不是真的，我尝试 iisreset 无效：

![错误2](../Images/b0831f78087f91baba40b2c760894983.png)

使用 MVC 4 web api 时，通配符映射用于干净的 url。

这是 IIS 中的设置：

![IIS](../Images/d1dbba84ff098328ed13d292fe62120f.png)

有人可以指导我解决这个问题吗？

**编辑：**

这些是我所做的初始设置的资源：

[http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

[http://johan.driessen.se/posts/getting-an-asp.net-4-application-to-work-on-iis6](http://johan.driessen.se/posts/getting-an-asp.net-4-application-to-work-on-iis6)

基本上 IIS 注册了框架 4，但是当我尝试加载 api 时它正在使用框架 2。

# .net - 在文本框中显示在列表框中选择的数据时出现错误

> ID：15384575
> 
> 赞同：0
> 
> 时间：2013-03-13T11:53:49.427
> 
> 标签：.net, c#-4.0, listbox

我正在使用以下代码：

```
private void listBox1_MouseClick(object sender, MouseEventArgs e)
{
    txtFrom.Clear();
    txtSubject.Clear();
    txtBody.Clear();
    something = this.listBox1.SelectedIndex.ToString();

    int something1 = Convert.ToInt32(something);

    foreach (MailMessage email in messages)
    {
        count++;
        if (count == something1)
        {
            txtFrom.Text = email.From.ToString();
            txtSubject.Text = email.Subject.ToString();
            txtBody.Text = email.Body.ToString();
        }
    } 
```

问题是，当我选择另一个项目时，txtFrom.Text、txtSubject.Text、txtBody.Text 的值不会根据列表框中选择的新值而改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:05:45.447

如果您有兴趣了解选择何时更改，则该`MouseClick`事件不是您想要处理的事件。`MouseClick`每次用户在控件内部单击时都会引发该事件，无论他们是否进行了选择。有几种方法可以在不使用鼠标的情况下选择列表框中的项目——例如，我可以使用键盘上的箭头键更改选择。（如果这还不足以说服您，我提请您注意[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.mouseclick.aspx)，其中说该`MouseClick`事件“支持 .NET Framework 基础结构，不打算直接从您的代码中使用”。）

相反，您需要切换到处理[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)事件。每次`SelectedIndex`属性（`SelectedIndices`或多选列表框的集合）更改时都会引发该事件，每当进行/更改选择时都会自动发生该事件。

您甚至不必对代码进行任何其他更改：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    txtFrom.Clear();
    txtSubject.Clear();
    txtBody.Clear();
    something = this.listBox1.SelectedIndex.ToString();

    int something1 = Convert.ToInt32(something);

    foreach (MailMessage email in messages)
    {
        count++;
        if (count == something1)
        {
            txtFrom.Text = email.From.ToString();
            txtSubject.Text = email.Subject.ToString();
            txtBody.Text = email.Body.ToString();
        }
    }
} 
```

# c# - 如何显示具有名称和格式的 byte[] 数组图像？

> ID：15384584
> 
> 赞同：0
> 
> 时间：2013-03-13T11:54:00.153
> 
> 标签：c#, asp.net-mvc

我正在使用以下函数在 asp.net mvc 中显示 byte[] 数组图像

```
 public ActionResult Images(int id)
        {
            byte[] imageData = GetImage(id);

            string contentType = "image/jpeg";

            return File(imageData, contentType);
        }

        <img src="/Home/Images/2"> 
```

所以问题是我不想显示**/Home/Images/2**。我想用这样的图像格式显示任何随机名称

```
 > /Home/Images/imgnameetc.jpg 
```

注意：我有图像只是 byte[] 数组形式。没有任何其他信息，如名称、图像格式

我确实搜索过，但找不到任何解决方案

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:01:12.210

您的服务器端代码不能欺骗用户导航到的 url。如果他们导航到`/Home/Images/2`，***那就是 url***。您*可以*做的是让它们导航到`/Home/Images/imgnameetc.jpg` *而不是* `/Home/Images/2`，但是您需要配置路由以允许使用名称而不是 id，并且在某个地方可以从名称 (/slug) 而不是从 id 查找详细信息. 例如，您`UrlSlug`的数据库中可能有一个已编入索引的列（我建议使用唯一且非聚集的列，限制为非空值，并将 id 作为附加的包含值包括在内（不是索引的一部分，但可用于包含`imgnameetc.jpg`该记录的 slug => id 查询），因此您可以通过简单的`where`测试找到它。

您可以做的另一件事是设置*content-disposition*标头，它告诉浏览器文件如何识别自己；例如，如果用户尝试保存文件，将`"content-disposition"`标题设置为`"inline;filename=imgnameetc.jpg"` *可能会有所帮助；*但是，它***不会***更改浏览器中显示的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:10:46.550

路由表必须配置为接受 URL 中的图像名称。无论您在哪里存储图像，都可以将名称与其一起存储。数据库中的单独列。

在 Global.asax 的 register routes 方法中，尝试编写这个。

```
 routes.MapRoute(
          "ImageRoute", // Route name
          "{controller}/{action}/{imageName}", // URL with parameters
          new { controller = "Home", action = "Images", imageName = UrlParameter.Optional       }); 
```

EX url = localhost/Home/Images/image1.jpg。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:18:37.753

看看下面的 URL，你可以在 MVC 路由器的帮助下实现这一点。只需添加一个特定于您的请求的路由器并为其配置 IIS。

**[带有名称和格式的图像](https://stackoverflow.com/questions/13587541/asp-net-mvc-3-route-for-jpg-files)**

# windows - 没有获得命名空间 - Windows Phone 8 中的 System.Data、System.Web.Services

> ID：15384585
> 
> 赞同：0
> 
> 时间：2013-03-13T11:54:00.463
> 
> 标签：windows, windows-phone-8

我尝试创建一个 Windows Phone 库并尝试在 Windows Phone 中创建一个类，但我无法访问诸如`System.Data,System.Web.Services`etc之类的命名空间。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:30:30.703

`System.Web.Services`命名空间在 windows phone 8 上不可用，并且比`System.Data`完整的 .Net 框架小很多。

比较：[WP8](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.data%28v=vs.105%29.aspx)和[.Net 4.5](http://msdn.microsoft.com/en-us/library/system.data.aspx)

这可能就是您找不到命名空间的原因。

请参阅：可用命名空间的[API 参考](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626516%28v=vs.105%29.aspx)。

# java - 查看我的单元格是否属于一组合并单元格以及该组的大小

> ID：15384586
> 
> 赞同：2
> 
> 时间：2013-03-13T11:54:05.397
> 
> 标签：java, apache-poi

我有一个 excel 文档，对于一个单元格，我想找出它是否是合并区域的一部分，如果是，则找出这个合并区域的坐标。

我发现了一些方法，例如 CellRangeAddress getMergedRegion(int index) 但是 CellRangeAddress 类在我的案例中没有任何用处。

（我事先不知道excel文档的格式）

有没有人有办法解决吗 ？

编辑：没关系，CellRangeAddress 继承 getFirstColumn、getFirstRow、getLastColumn 和 getLastRow 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:01:26.370

没关系，CellRangeAddress 继承了 getFirstColumn、getFirstRow、getLastColumn 和 getLastRow 方法。

# c# - 在多个线程上执行相互依赖的数据库操作

> ID：15384591
> 
> 赞同：1
> 
> 时间：2013-03-13T11:54:18.423
> 
> 标签：c#, sql, multithreading, parallel-processing

我用 C# 编写的服务器应用程序每次需要从数据库中插入或删除数据时都会启动一个新线程。问题在于，由于线程的执行是任意的，因此如果这些事件几乎同时发生，则不能确保在插入同一对象之后执行删除命令。

例如：服务器接收到插入多个对象的命令。插入所有对象大约需要 5 秒钟。执行 1 秒后，服务器收到从数据库中再次删除所有这些对象的命令。由于删除可能发生在所有对象完全存储之前，结果是未知的。

如何管理某个线程的执行顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:01:09.693

您可以为此使用事务并为不同的操作指定不同的级别。

例如，您可以将最高级别的事务用于写入/更新/删除，而将低级别的事务用于读取。与表相比，您还可以对其进行微调以允许仅阻止特定行。[具体术语](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)取决于您使用的数据库和数据访问库。

我建议不要使用任何排序。并行和有序只是不能很好地结合在一起。例如：

*   您需要水平扩展服务器，一旦添加第二台服务器和负载平衡器，互斥解决方案将无法正常工作

*   在大型和分布式系统中，消息队列也不会工作，因为当一个线程完成扫描并决定我们可以开始时，另一个线程可以写入一条应该阻止操作执行的消息。此外，如果您收到高负载，多次扫描同一个队列是低效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:59:39.003

如果您知道您在删除之前收到了插入，而问题只是您不想中断插入，那么您可以在插入代码上使用锁定。

```
static object m_Lock = new object();

public void Insert()    
{
   lock (m_Lock)
   {
      InsertRecords();
   }
}

public void Remove()    
{
   lock (m_Lock)
   {
      RemoveRecords();
   }
} 
```

这样您就可以确保在插入期间不会发生删除。

PS 虽然您需要立即插入然后删除，但这似乎很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:02:16.220

我认为最简单的方法是将所有传入请求排队以在一个集合中插入对象，并将所有传入请求排队以删除第二个集合中的对象。

服务器应该有一个基本循环：

**一种。检查是否有传入的插入，如果有 -> 执行所有插入。**

**湾。检查是否有传入的删除请求，如果有 -> 执行所有删除请求。**

**C。睡眠 X 毫秒。**

现在，如果您对不存在的对象有删除请求。你有两个选择：

**一种。忽略此请求并丢弃它。**

**湾。忽略这一轮的这个请求，并在接下来的 N 轮中将其保留在集合中，然后再删除它**（最后删除它 - 假设这只是一个错误的请求，而不是竞争条件的问题。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:18:50.510

使用队列（带有单个服务线程）来强制执行排序。您还可以使用任务并行库来管理依赖于其他任务的任务，尽管这对于任意 DB 操作来说非常困难。

我认为您需要重新考虑如何管理传入的操作，以及它们的相互依赖关系是否足够可预测，以至于您可以以这种方式安全地使用多个线程。您可能需要在传入操作中添加一些“取决于”信息以实现该目标。

# html - 首页上的多个索引文件

> ID：15384594
> 
> 赞同：0
> 
> 时间：2013-03-13T11:54:23.053
> 
> 标签：html, indexing

是否可以在首页加载不同的索引文件并且仍然看起来像浏览器中的默认站点名称，即 index.html 为 www.mysite.com ， index2.html 为 www.mysite.com ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:33:33.370

您可以使用 AJAX 从 index2.html 加载内容

欲了解更多信息[w3schools](http://www.w3schools.com/ajax/default.asp)

# jquery - 使用 JQuery 隐藏/显示 div 的更简单方法

> ID：15384595
> 
> 赞同：5
> 
> 时间：2013-03-13T11:54:24.497
> 
> 标签：jquery, html

我想隐藏所有的类`.Hide`，然后根据我点击的链接显示一个特定的 div。到目前为止我得到了这个，但是有没有更简单的方法？

到目前为止我的代码：（使用 JQuery）

```
$(".btn").click(function (){
        $(".Hide").hide("fast");
    });

    $("#btn_one").click(function () {
        $("#one").show("fast");
    });

    $("#btn_two").click(function () {
        $("#two").show("fast");
    });

    $("#btn_three").click(function () {
        $("#three").show("fast");
    }); 
```

HTML：

```
<a href="#" id="btn_one" class="btn">one</a>
<a href="#" id="btn_two" class="btn">one</a>
<a href="#" id="btn_three" class="btn">one</a>

<div id="one" class="Hide">1</div>
<div id="two" class="Hide">2</div>
<div id="three" class="Hide">3</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:58:07.170

数据属性可能是一个选项：

```
$(".btn").click(function () {
    $(".Hide").hide("fast");
    $("#" + $(this).data('type')).show("fast"); 
}); 
```

HTML：

```
<a href="#" id="btn_one" data-type="one" class="btn">one</a>
<a href="#" id="btn_two" data-type="two" class="btn">one</a>
<a href="#" id="btn_three" data-type="three" class="btn">one</a> 
```

您可以使用`data-something`来引用相应的元素。

[http://jsfiddle.net/dfsq/u8CAD/](http://jsfiddle.net/dfsq/u8CAD/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:59:14.937

就像现在一样，我认为这与您可以做到的一样好（您可以将隐藏代码放在一个函数中并从所有人中引用，但大致相同）。

如果您可以稍微更改 HTML 代码，并`rel`为按钮添加一个包含相关元素的 id 的属性，那么您确实可以使代码更好（我正在使用`.click()`，但如果您的 jQuery 版本允许您应该更改为`.on()`） ：

```
$('.btn').click(function() {
  $('.Hide').hide("fast");
  $('#'+$(this).attr('rel')).show("fast");
} 
```

以及相关的 HTML

```
<a href="#" id="btn_one" class="btn" rel="one">one</a>
<div id="one" class="Hide">1</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:02:26.553

单程

```
$("a.btn[id^=btn]").click(function() {
    $(".Hide").hide("fast");
    var id = $(this).attr('id').substring(4);
    $("#" + id).show("fast");
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/dNjG7/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:05:20.167

假设您的链接和 div 位于单独的容器中，您可以使用它：

```
<nav>
    <a href="#" class="btn">one</a>
    <a href="#" class="btn">two</a>
    <a href="#" class="btn">three</a>
</nav>

<div>
    <div class="Hide">1</div>
    <div class="Hide">2</div>
    <div class="Hide">3</div>
</div> 
```

**JavaScript**

```
$('.btn').click(function() {
     $(".Hide").hide("fast").eq( $(this).index() ).show("fast");
}); 
```

**演示**

[http://jsfiddle.net/TUrgG/](http://jsfiddle.net/TUrgG/)

这个不需要任何 id 或`data-*`-attributes。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-03-13T11:58:08.907

首先，您可以使用以下方法隐藏所有这些：

```
$(".Hide").hide(); 
```

之后，您需要解析点击链接的 ID 以获取需要显示的 ID 或 DIV。为此，您可以这样做：

```
var id = $(this).attr("id").replace("btn_", ""); 
```

此解决方案将基于您当前的 HTML 结构，没有任何更改。

* * *

但是，我建议您使用`data-*`属性来存储 ID。一个完整的解决方案如下所示：

```
<a href="#" id="btn_one" data-showid="one" class="btn">one</a>
<a href="#" id="btn_two" data-showid="two" class="btn">two</a>
<a href="#" id="btn_three" data-showid="three" class="btn">three</a>

<div id="one" class="Hide">1</div>
<div id="two" class="Hide">2</div>
<div id="three" class="Hide">3</div> 
```

使用以下 javascript/JQuery：

```
$(".btn").click(function(e){
   e.preventDefault();
   $(".Hide").hide();
   var id = $(this).data("showid");
   $("#" + id).show();
}); 
```

[这是一个工作示例](http://jsfiddle.net/musefan/V9JQT/)

# ios - UIPickerview 没有出现在正确的位置

> ID：15384598
> 
> 赞同：0
> 
> 时间：2013-03-13T11:54:39.787
> 
> 标签：ios, objective-c, uipickerview, uiactionsheet

很抱歉问了这么一个愚蠢的问题，但我不知道为什么我的 UIPickerView 和完成按钮没有出现在正确的位置。我正在使用以下代码，但我不知道为什么会遇到这样的问题。

```
actionSheet=[[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,320,40)];

[pickerToolbar sizeToFit];
pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonTapped:)];
[barItems addObject:cancelBtn];

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonTapped:)];
[barItems addObject:doneBtn];

[pickerToolbar setItems:barItems animated:YES];
[actionSheet addSubview:pickerToolbar];

//-----------
maritalStatusPickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 44, 320, 216)];
maritalStatusPickerView.delegate = self;
maritalStatusPickerView.showsSelectionIndicator = YES;

[actionSheet addSubview:maritalStatusPickerView];

[actionSheet showInView:self]; 
```

![在此处输入图像描述](../Images/4244bee691187cd9f25eb037b8d50cd9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:11:13.973

使用下面的代码

```
actionSheet=[[UIActionSheet alloc] initWithTitle:@"" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
actionSheet.frame = CGRectMake(0, 234, 320, 256);

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,320,40)];

[pickerToolbar sizeToFit];
pickerToolbar.barStyle = UIBarStyleBlackTranslucent;
NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonTapped:)];
[barItems addObject:cancelBtn];

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonTapped:)];
[barItems addObject:doneBtn];

[pickerToolbar setItems:barItems animated:YES];
[actionSheet addSubview:pickerToolbar];

//-----------
maritalStatusPickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 44, 320, 216)];
maritalStatusPickerView.delegate = self;
maritalStatusPickerView.showsSelectionIndicator = YES;
//        [self addSubview:maritalStatusPickerView];

[actionSheet addSubview:maritalStatusPickerView];

[self.view addSubview:actionSheet]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:58:37.273

为什么要添加 maritalStatusPickerView 2 次

```
[self addSubview:maritalStatusPickerView];

[actionSheet addSubview:maritalStatusPickerView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:16:02.770

初始化后只需将操作表的框架包含到您的代码中

```
actionSheet.frame = CGRectMake(0, 0, 320, 256); 
```

参考这个[问题](https://stackoverflow.com/questions/11051512/add-uiview-as-subview-on-uiactionsheet)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:18:20.587

您必须在视图中添加您的操作表，如果您想从视图底部打开选择器视图，请更改坐标。

```
[actionSheet addSubview:maritalStatusPickerView];

//Replace this :  [actionSheet showInView:self];

[self.view addSubview:actionSheet]; 
```

# tsql - 有没有更好的方法来查找具有多个子查询的记录

> ID：15384600
> 
> 赞同：0
> 
> 时间：2013-03-13T11:54:42.360
> 
> 标签：tsql, database-performance

我正在查询具有以下架构的数据库：

```
People
------
PersonId

PeopleTags
----------
PeopleId
TagId

Tags
----
TagId
Guid 
```

一个人可能有多个标签，并且在查询时要求是找到具有所有一组强制性标签和任何一组可选标签的人。

目前，我正在为每个强制性标签做一个单独的子查询，并为可选标签做一个子查询，这给了我这样的东西：

```
SELECT People.*
FROM People
WHERE
    PeopleId IN (SELECT PeopleId FROM PeopleTags WHERE TagId IN (SELECT TagId FROM Tags WHERE Guid = '83c55f3d...')
    AND PeopleId IN (SELECT PeopleId FROM PeopleTags WHERE TagId IN (SELECT TagId FROM Tags WHERE Guid = '8159248a...')
    AND PeopleId IN (SELECT PeopleId FROM PeopleTags WHERE TagId IN (SELECT TagId FROM Tags WHERE Guid IN ('737d9015...', 'b7a5974e...') 
```

可以有任意数量的强制和可选标签，我们偶尔会收到此错误：

> 查询处理器用尽了内部资源，无法生成查询计划。这是一个罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。如果您认为您错误地收到了此消息，请联系客户支持服务以获取更多信息。

研究此错误表明这是由于具有大型 IN 列表的子查询（这完全可能与代码一样）。

有没有更好的方法来编写这个查询？我曾多次尝试加入表格，但如果我这样做，它不会返回任何结果。

```
SELECT People.*
FROM People
INNER JOIN PeopleTags ON PeopleTags.PersonId = People.PersonId
INNER JOIN Tags t1 on t1.TagId = PeopleTags.TagId and t1.Guid = '8159248A...'
INNER JOIN Tags t2 on t2.TagId = PeopleTags.TagId and t2.Guid = '415DF7A3...' 
```

我可以改变

```
PeopleId IN (SELECT PeopleId FROM PeopleTags WHERE TagId IN (SELECT TagId FROM Tags WHERE Guid = '83c55f3d...') 
```

至

```
PeopleId IN (SELECT PeopleId FROM PeopleTags INNER JOIN Tags ON Tags.TagId = PeopleTags.TagId WHERE Guid = '83c55f3d...') 
```

对于每个强制性标签，这会有所不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:32:42.780

**更新：**

您尝试将其转换为 JOIN 很好，但您需要 LEFT JOIN，否则您将不会得到结果，就像我在原始答案中解释的那样。此外，我添加了一个 ORDER BY，因此没有可选标签的会列在有可选标签的下方。然后，您可以限制结果并获取用户最有可能正在寻找的结果。

```
SELECT People.*
FROM People
INNER JOIN PeopleTags ON PeopleTags.PersonId = People.PersonId
INNER JOIN Tags t1 on t1.TagId = PeopleTags.TagId and t1.Guid = '8159248A...'
LEFT JOIN Tags t2 on t2.TagId = PeopleTags.TagId and t2.Guid = '415DF7A3...'
ORDER BY CASE WHEN t2.TagId IS NULL THEN 99 ELSE 1 END
LIMIT 10 /*or whatever*/ 
```

**原始答案：**

你的问题有点不清楚。第二个加入标签中的可选标签是否（我会在我的回答中假设）？是否必须至少有一个可选标签，或者可以没有？如果没有（这是我可选的定义），为什么要关心它们呢？你也不要`SELECT`他们。所以你可以忘记第二次加入，顺便说一下，在你的情况下这是错误的。您将 PeopleTags 中的同一列多次连接到同一列上的同一个表中。但是 PeopleTags 中的行不能同时有两个不同的值。因此你没有结果。

当您需要确保至少有一个可选标签但您不在乎它是什么时，您可以这样优化它：

```
SELECT People.*
FROM People
INNER JOIN PeopleTags ON PeopleTags.PersonId = People.PersonId
INNER JOIN Tags t1 on t1.TagId = PeopleTags.TagId 
WHERE t1.Guid = '8159248A...'
AND EXISTS (SELECT 1 FROM Tags t2 WHERE t2.TagId = PeopleTags.TagId) 
```

# android - 出现键盘建议时 EditText 失去焦点

> ID：15384606
> 
> 赞同：0
> 
> 时间：2013-03-13T11:54:51.940
> 
> 标签：android, keyboard, android-edittext, suggestbox

我的 android 应用程序有问题。

我在 ListView 中有一个 EditText。当我关注 EditText 时，键盘会出现（通常），但是当键盘建议出现时，我失去了焦点，我无法集中注意力。

谢谢大家的帮助。

# php - 列出服务器文件夹和文件php iphone sdk？

> ID：15384611
> 
> 赞同：1
> 
> 时间：2013-03-13T11:55:02.010
> 
> 标签：php, ios

我正在尝试从服务器获取文件夹和文件的列表。

*例如*

```
home/user1/files in this you may have home/user1/files/directory1 

home/user1/files/directory2 home/user1/files/photo.xls. 
```

和

```
home/user1/files/directory1 you may have home/user1/files/directory1/subdirectory1 
home/user1/files/directory1/subdirectory2 
home/user1/files/directory1/subdirectory2/file.png. 
```

我读到我可以使用 PHP，但我如何在 iPhone UI 中呈现它，比如 FTP 客户端？

# c# - 未从 Outlook 2010 获取联系人项目

> ID：15384621
> 
> 赞同：0
> 
> 时间：2013-03-13T11:55:18.540
> 
> 标签：c#, visual-studio-2010, outlook

我正在开发一个 WPF-C# 应用程序并使用 Redemption 获取 MS Outlook 2010 联系人项目。如果我的 Outlook 只有一个 SMTP 帐户，它工作正常。但是，如果我配置另一个帐户是交换服务器帐户，那么我不会从同一代码中获得任何联系项目。以下是我的代码：

```
 Interop.Redemption.RDOItems folderItems = null;
        Interop.Redemption.RDOFolder folderContacts = null;
        Interop.Redemption.RDOFolder folderSuggestedContacts = null;
        List<GMContactItem> allOutlookContacts = null;
        object itemObj = null;
        List<Interop.Redemption.RDOContactItem> contactItemsList = null;

        try
        {

            folderContacts = (RDOFolder)RDOSessionItem.GetDefaultFolder(Interop.Redemption.rdoDefaultFolders.olFolderContacts);
            contactItemsList = new List<RDOContactItem>();
            folderItems = folderContacts.Items;
            for (int i = 1; folderItems.Count >= i; i++)
            {
                itemObj = folderItems[i];
                if (itemObj is Interop.Redemption.RDOContactItem)
                    contactItemsList.Add(itemObj as RDOContactItem);
                else
                    Marshal.ReleaseComObject(itemObj);
            }

            Marshal.ReleaseComObject(folderItems);
            folderItems = null;

            // getting items from the Suggested Contacts folder in Outlook 
            folderSuggestedContacts = RDOSessionItem.GetDefaultFolder(
                                      rdoDefaultFolders.olFolderSuggestedContacts);
            if (folderSuggestedContacts != null)
            {
                folderItems = folderSuggestedContacts.Items;
                for (int i = 1; folderItems.Count >= i; i++)
                {
                    itemObj = folderItems[i];
                    if (itemObj is Interop.Redemption.RDOContactItem)
                        contactItemsList.Add(itemObj as Interop.Redemption.RDOContactItem);
                    else
                        Marshal.ReleaseComObject(itemObj);
                }
            }
        }
        catch (System.Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.ToString());
        } 
```

当我删除我的交换服务器帐户时，它工作正常，如果我在 Outlook 中添加交换服务器帐户，那么此代码也不例外，但不提供任何联系项目。任何人都可以建议我这里可能是什么问题。提前致谢。

-苏里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:09:10.723

你在看 GAL 条目吗？这些地址条目存在于 GAL（基于 AD）中，而不是 Exchange 邮箱的联系人文件夹中。

如果您需要打开（非默认）PST 存储的联系人文件夹，请调用 RDOStore.GetDefaultFolder(olFolderContacts) 而不是 RDOSession.GetDefaultFolder（从默认存储返回一个文件夹）。

可以使用 RDOSession.Stores 集合打开辅助 PST 存储。

# php - php & js 动态创建自动填充下拉列表

> ID：15384622
> 
> 赞同：0
> 
> 时间：2013-03-13T11:55:18.983
> 
> 标签：php, javascript

我创建了一个脚本，它用第一个组合框的值填充第二个组合框。但这不是我想做的。我想根据在第一个组合框中选择的项目，用 SQL 查询的结果填充第二个组合框。

这是我的javascript：

```
<script type="text/javascript">
    function selectDropdown(){
        var dropdownValue=document.getElementById("dropdown").value;
        $('option[value=st]').text(dropdownValue);
    }
</script> 
```

第一个组合框：

```
<select id="dropdown" name="dropdown" onchange="selectDropdown()">
    <option value="dd">--take an option--</option>
    <?
    $standard = Env::value('standard');
    if (!$status)
        $statement = "select code from standard";
    foreach ($db->query($statement )->fetchall() as $row)
        echo "<option".($row == $standard ? ' selected ' : '').">$row[0]</option>";
    ?>
</select> 
```

第二个我想在其中显示查询结果：`$q= select request.code from request inner join standard on ( request.standard_id=standard.id) where standard.code=$st`。

```
<select name='st' class='txt'>
  <option value="st"><? echo $st; ?></option>
</select> 
```

谁能给我一个提示我应该在哪里执行查询？或者只是指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:05:21.213

每次更改第一个下拉选择时，使用 jQuery 的 ajax 调用向服务器发出请求。在服务器端创建一个脚本，该脚本将接收该请求并以 JSON 格式返回第二个下拉列表的相应记录，然后可以通过 javascript 轻松处理。要使用 ajax，请参阅此链接：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

它会像：

```
jQuery.ajax({
    method: "POST",
    url: "http://domain.com/path/to/script.php",
    data: value_of_selected_item_from_first_dropdown,
    success: function(response) {
        // Set 2nd dropdown values to those received via response
    }
    dataType: "json",
}); 
```

# php - InnoDB 安全或不安全事务

> ID：15384624
> 
> 赞同：0
> 
> 时间：2013-03-13T11:55:30.647
> 
> 标签：php, mysql, database, yii, migrate

我正在使用 InnoDB 引擎创建一些表。我在 yii 框架中使用 CDbMigration 执行此操作。这是我的类似代码：

```
public function up(){

$this->createTable(...);
$this->addForeignKey(..);

} 
```

添加外键时出错，很明显 migrate up 命令没有创建外键，但我预计它也不会创建表（因为 InnoDB 安全事务）但它创建了表。我对安全交易有误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:04:53.150

`CREATE TABLE`位于隐式提交列表（[http://dev.mysql.com/doc/refman/5.6/en/implicit-commit.html](http://dev.mysql.com/doc/refman/5.6/en/implicit-commit.html)）。它以及它之前的任何东西都将被提交并且不会回滚。

# xaml - Windows 8 - 从 UserControl 获取对主页的引用

> ID：15384625
> 
> 赞同：0
> 
> 时间：2013-03-13T11:55:32.733
> 
> 标签：xaml, windows-store-apps, winrt-xaml

在我的示例 Windows 8 应用程序中，我有一个 Popup UserControl 作为自定义 SettingsPane，我想让它选择 MainPage 背景颜色。

问题是我无法从 UserControl 的代码隐藏文件中访问 MainPage 的子项 - 我命名了根网格，但仍然出现错误`The name “mainGrid” doesn’t exist in the current context`。我知道 WPF 已经解决了这个问题，但这些解决方案似乎都不适用于 Windows 8 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:31:52.273

使用用户控件时只需传递对 Main 的引用。将此作为您在运行时设置的用户控件的属性。

另一种选择是，如果您需要在用户控件中发生某些事情时执行 X 操作，您可以简单地在用户控件中定义一个事件，并在 MainPage 中为该事件实现一个事件处理程序。

# opencv - 从视频流中获取像素数据

> ID：15384626
> 
> 赞同：0
> 
> 时间：2013-03-13T11:55:33.113
> 
> 标签：opencv, video, getpixel

如果理解某些编码我会遇到麻烦我很抱歉如果这很愚蠢但是我有一个代码可以从我的网络摄像头捕获视频我想从帧中获取 RGB 值如果这是不可能的将不得不保存一个框架作为图片，然后从中获取值？

const char window_name[]="网络摄像头";

int main(int argc, char* argv[]) {

```
/* attempt to capture from any connected device */
CvCapture *capture=cvCaptureFromCAM(CV_CAP_ANY);
if(!capture)
{
    printf("Failed to initialise webcam\n");
    return -1;
}

/* create the output window */
cvNamedWindow(window_name, CV_WINDOW_NORMAL);

do
{
    /* attempt to grab a frame */

    IplImage *frame=cvQueryFrame(capture);
    if(!frame)
    {
        printf("Failed to get frame\n");
        break;
    }

    COLORREF myColAbsolute = GetPixel(frame, 10,10);//error in saying frame is not compatible with HDC.

    cout << "Red - " << (int)GetRValue(myColAbsolute) << endl;
    cout << "Green - " << (int)GetGValue(myColAbsolute) << endl;
    cout << "Blue - " << (int)GetBValue(myColAbsolute) << endl;

    /* show the frame */
    cvShowImage(window_name, frame); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:32:21.350

哈 ！（显然被复制和粘贴的无赖抓住了）

GetPixel() 是一个 windows 函数，而不是 opencv 函数。GetRValue() 和姐妹们一样。

您可以在本机 win32 api 中使用它们来从 HDC 获取像素，但它不适用于 opencv/highgui，因为 HDC 和 HWND 都没有暴露。

既然你显然是一个初学者（这没什么错，再次！）让我试着说服你不要使用旧的 1.0 opencv api(IplImages, cv*Functions)，你应该使用新的（cv ::Mat，命名空间 cv::Functions) 代替。

```
#include "opencv2/opencv.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace cv;
using namespace std;

int main()
{
    Mat frame;
    namedWindow("video", 1);

    VideoCapture cap(0);
    while ( cap.isOpened() )
    {
        cap >> frame;
        if(frame.empty()) break;

                int x=3, y=5;
                // Ladies and Gentlemen, the PIXEL!
                Vec3b pixel = frame.at<Vec3b>(y,x); // row,col, not x,y!
                cerr << "b:" << int(pixel[0]) << " g:" << int(pixel[1]) << " r:" << int(pixel[2]) << endl;

        imshow("video", frame);
        if(waitKey(30) >= 0) break;
    }   
    return 0;
} 
```

# c# - 日志设计方法

> ID：15384629
> 
> 赞同：0
> 
> 时间：2013-03-13T11:55:39.293
> 
> 标签：c#, oop, logging

记录对我来说一直是一场噩梦！现在我必须为代理系统再次实现它。在这个代理应用程序中，一些系统要求代理系统调用其他一些服务。我必须记录的是

*   请求时间
*   请求者 IP
*   请求参数为 XML
*   请求的服务名称
*   请求的服务方法
*   响应时间
*   XML 形式的响应数据
*   响应消息（如果发生任何异常，它将记录为消息）

我考虑在我的方法中附加两行：

```
// Log Request
Task.Factory.StartNew(() => Logger.Log(RequestParameters.ToXML(),Assembly.GetCallingAssembly().FullName, MethodBase.GetCurrentMethod().Name, DateTime.Now));

// Invoke requested service and get response

// Log Response
Task.Factory.StartNew(() => Logger.Log(Response.ToXML(), DateTime.Now)); 
```

我还想记录嵌套事务。

假设一个事务包含一个请求和一个响应。一个事务可能包含许多其他内部事务。当我收到一个请求时，我应该注册一个事务，并为其插入一个请求，稍后，当收到响应时，我应该更新事务响应。请注意，我正在尝试存储请求和响应关系以便更好地跟踪。

如何安全地将此日志记录过程添加到方法中？我想限制开发人员在所有方法中实现这个日志系统，需要一些方法体的接口或继承。我可以通过属性做到这一点吗？那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T11:18:28.287

为什么要重新发明轮子，可以使用 nlog 或 microsoft 模式和实践日志库；有人已经在这里详细回答了这个问题[设计应用程序范围的日志记录系统的准则是什么？](https://stackoverflow.com/questions/15987193/what-are-the-guidelines-for-designing-an-application-wide-logging-system?rq=1)

我经常使用logstash，但您似乎是ac# 密集型工作。

# php - PHP + MYSQL 座位预订系统。计算免费座位

> ID：15384630
> 
> 赞同：1
> 
> 时间：2013-03-13T11:55:40.723
> 
> 标签：php, mysql, for-loop, select

我有一张这样的桌子：

```
 $sql = "CREATE TABLE dramaStudio
   (
   rowId varchar(1) not null,
   columnId int not null,
   status int,
   firstName varchar(15) not null,
   lastName varchar(15) not null,
   updatedby varchar(10),
   PRIMARY KEY (rowId, columnId)
   )"; 
```

在我网站的主页上，我希望用户能够查看是否有任何空闲座位而无需继续座位计划。几乎只是说“免费座位：”后跟一个数字。我在伪代码中的逻辑是：

```
$j=0 
select * from dramaStudio
for every status == 0
    $j+1
echo $j 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:04:50.203

查看示例代码

```
$con = mysql_connect("localhost", "peter", "abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$db_selected = mysql_select_db("test_db",$con);

$sql = "SELECT * from Person";
$result = mysql_query($sql,$con);

while ($property = mysql_fetch_field($result))
  {
  echo "Field name: " . $property->name . "<br />";
  echo "Table name: " . $property->table . "<br />";
  echo "Default value: " . $property->def . "<br />";
  echo "Max length: " . $property->max_length . "<br />";
  echo "Not NULL: " . $property->not_null . "<br />";
  echo "Primary Key: " . $property->primary_key . "<br />";
  echo "Unique Key: " . $property->unique_key . "<br />";
  echo "Mutliple Key: " . $property->multiple_key . "<br />";
  echo "Numeric Field: " . $property->numeric . "<br />";
  echo "BLOB: " . $property->blob . "<br />";
  echo "Field Type: " . $property->type . "<br />";
  echo "Unsigned: " . $property->unsigned . "<br />";
  echo "Zero-filled: " . $property->zerofill . "<br /><br />";
  }

mysql_close($con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:57:55.517

只需对所有状态为 0 的字段进行计数？

```
SELECT COUNT(*) FROM dramaStudio WHERE status = '0' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:58:32.110

假设如果有空闲座位，则 status=0：

```
SELECT COUNT(*) AS freeseats FROM dramaStudio WHERE status=0 
```

完整示例，来自 php 手册：

```
<?php
  $link = mysqli_connect("localhost", "my_user", "my_password", "world");

  /* check connection */
  if (mysqli_connect_errno()) {
      printf("Connect failed: %s\n", mysqli_connect_error());
      exit();
  }

  $query = "SELECT COUNT(*) AS freeseats FROM dramaStudio WHERE status=0";
  $result = mysqli_query($link, $query);

  /* associative array */
  $row = mysqli_fetch_array($result, MYSQLI_ASSOC);
  echo $row['freeseats']; // this is an integer

  /* free result set */
  mysqli_free_result($result);

  /* close connection */
  mysqli_close($link);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T12:06:27.700

您要存放已坐满的座位吗？要找出空的，您必须指定列数和行数。

以及是否可以根据表格中的状态区分已满座和空座。你可以这样做，

```
 $query = "select * from dramaStudio where status = 0";
    $result_Set = mysql_query($query);
    while($row = mysql_fetch_object($result_set)){
        echo $row->rowId .',', $row->columnId; 
        echo '</br>';
    } 
```

# jquery-ui - 如何让 jQueryUI 从一开始就显示正确的选项卡？

> ID：15384632
> 
> 赞同：1
> 
> 时间：2013-03-13T11:55:51.837
> 
> 标签：jquery-ui, jquery-ui-tabs

我正在使用 jQueryUI 在页面上显示一些选项卡。显示的选项卡并不总是相同的，所以有时我将不同的选项卡设置为活动的。

```
<script>
    $(function() {
        $("#tabs").tabs({'active': 1});
    });
</script> 
```

我在后端生成此代码，因此当浏览器加载页面时它就在那里，但无论如何，第一个选项卡会显示几分之一秒，然后才会显示活动选项卡。

如何从一开始就显示激活选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:58:02.993

只需将您的代码更改为：

```
<script>
    $(function() {
        $("#tabs").tabs({selected: index});
    });
</script> 
```

其中 index 是从 0 开始的选项卡编号

# java - 在 WebView 中实现 Swipe 函数并通过 Javascript 接口调用 Javascript 函数

> ID：15384638
> 
> 赞同：1
> 
> 时间：2013-03-13T11:56:05.213
> 
> 标签：java, javascript, android, android-webview, gesturedetector

我想在我的 WebView 应用程序中实现滑动功能，并在滑动时调用 HTML/Javascript 应用程序的 Javascript 中的函数。

根据这个问题的答案：[How to detect a swipe gesture on webview](https://stackoverflow.com/questions/12578895/how-to-detect-a-swipe-gesture-on-webview)

我做了这样的事情：

```
package (...);

import (...)

public class MainActivity extends Activity {
    WebView mywebview;

public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    mywebview = (WebView) findViewById(R.id.webview);

    WebSettings webSettings = mywebview.getSettings();
    mywebview.addJavascriptInterface(new WebAppInterface(this), "Android");

    webSettings.setJavaScriptEnabled(true);
    webSettings.setDatabaseEnabled(true);
    webSettings.setDatabasePath("/data/data/" + this.getPackageName() + "/databases/");
    webSettings.setDomStorageEnabled(true);
    mywebview.setWebChromeClient(new WebChromeClient());
    mywebview.setWebViewClient(new WebViewClient());
    mywebview.loadUrl("file:///android_asset/www/index.html");

    mywebview.setGestureDetector(new GestureDetector(new CustomeGestureDetector())); 

    }

private class CustomeGestureDetector extends SimpleOnGestureListener {      
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if(e1 == null || e2 == null) return false;
        if(e1.getPointerCount() > 1 || e2.getPointerCount() > 1) return false;
        else {
            try { // right to left swipe .. go to next page
                if(e1.getX() - e2.getX() > 100 && Math.abs(velocityX) > 800) {
                    mywebview.loadUrl("javascript:left()");
                    return true;
                } //left to right swipe .. go to prev page
                else if (e2.getX() - e1.getX() > 100 && Math.abs(velocityX) > 800) {
                    mywebview.loadUrl("javascript:right()");
                    return true;
                } //bottom to top, go to next document
                else if(e1.getY() - e2.getY() > 100 && Math.abs(velocityY) > 800 
                        && mywebview.getScrollY() >= mywebview.getScale() * (mywebview.getContentHeight() - mywebview.getHeight())) {
                    mywebview.loadUrl("javascript:up()");
                    return true;
                } //top to bottom, go to prev document
                else if (e2.getY() - e1.getY() > 100 && Math.abs(velocityY) > 800 ) {
                    mywebview.loadUrl("javascript:down()");
                    return true;
                } 
            } catch (Exception e) { // nothing
            }
            return false;
        }
    }
}

public final class CustomWebView extends WebView {

    private GestureDetector gestureDetector;

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public CustomWebView(Context context) {
        super(context);
    }

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public CustomWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public CustomWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    /* 
     * @see android.webkit.WebView#onScrollChanged(int, int, int, int)
     */
    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        super.onScrollChanged(l, t, oldl, oldt);
    }

    /* 
     * @see android.webkit.WebView#onTouchEvent(android.view.MotionEvent)
     */
    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return gestureDetector.onTouchEvent(ev) || super.onTouchEvent(ev);
    }

    public void setGestureDetector(GestureDetector gestureDetector) {
        this.gestureDetector = gestureDetector;
    }
}

public class WebAppInterface {
    Context mContext;

    WebAppInterface(Context c) {
        mContext = c;
    }

 } 
```

但是当我启动应用程序时，控制台中有很多错误并且应用程序被关闭。那么我的代码有什么问题？

这是日志：

```
03-13 12:09:19.944: E/AndroidRuntime(311): FATAL EXCEPTION: main
03-13 12:09:19.944: E/AndroidRuntime(311): java.lang.RuntimeException: Unable to start activity ComponentInfo{packagename/packagename.ActivityName}: java.lang.ClassCastException: android.webkit.WebView
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.os.Looper.loop(Looper.java:123)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-13 12:09:19.944: E/AndroidRuntime(311):  at java.lang.reflect.Method.invokeNative(Native Method)
03-13 12:09:19.944: E/AndroidRuntime(311):  at java.lang.reflect.Method.invoke(Method.java:521)
03-13 12:09:19.944: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-13 12:09:19.944: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-13 12:09:19.944: E/AndroidRuntime(311):  at dalvik.system.NativeStart.main(Native Method)
03-13 12:09:19.944: E/AndroidRuntime(311): Caused by: java.lang.ClassCastException: android.webkit.WebView
03-13 12:09:19.944: E/AndroidRuntime(311):  at packagename.ActivityName.onCreate(ActivityName.java:47)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-13 12:09:19.944: E/AndroidRuntime(311):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-13 12:09:19.944: E/AndroidRuntime(311):  ... 11 more 
```

我的 XML 文件 (activity.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />
 </RelativeLayout> 
```

# java - 使用 apache batik 加载、更新和转码 svg 文档时出现奇怪的 CSS 异常

> ID：15384640
> 
> 赞同：1
> 
> 时间：2013-03-13T11:56:14.170
> 
> 标签：java, svg, java-2d, batik

我正在通过以下代码行将 svg 文件加载到我的应用程序中

```
 parser = XMLResourceDescriptor.getXMLParserClassName();

                                     factory = new SAXSVGDocumentFactory(parser);

                                    // ua = new UserAgentAdapter();
                                    // loader = new DocumentLoader(ua);
                                    // ctx = new BridgeContext(ua, loader);
                                    // ctx.setDynamicState(BridgeContext.DYNAMIC);

                                    doc = factory.createSVGDocument(svg.toURI().toString());
                                    generator = new SVGGraphics2D(doc); 
```

该文档是之前使用 SVG 生成器生成的，可以在所有 SVG 浏览器中查看，并且不包含任何错误。

现在我正在更新文档

// 在这里对画布和图像本身进行高度/宽度计算 Dimension d = calculateImageSize(true, true);

```
 System.out.println(" 400 DPI Original width " + d.getWidth()
                            + " height " + d.getHeight());

            generator.setSVGCanvasSize(d);

            Element root = doc.getDocumentElement();

            //root.setAttributeNS(null, "viewBox", ("0 0 " + (d.getWidth() + " " + d
                    // .getHeight())));

            NodeList imageList = root.getElementsByTagName("image");

             Node imageNode = imageList.item(0);

             Element image = (Element) imageNode;

             image.setAttributeNS(null, "width", String.valueOf(d.getWidth()));
             image.setAttributeNS(null, "height", String.valueOf(d.getHeight()));

            updateCanvas(); 
```

以下是 updateCanvas 实现

公共无效更新画布（）{

```
 Element root = doc.getDocumentElement();
            generator.getRoot(root);
            canvas.setSVGDocument(doc);

    } 
```

现在，当我尝试使用以下方法保存此更新的文档时

public void savePngImage(String pngFile, boolean is400DPI) 抛出 IOException {

```
 OutputStream ostream = null;

            try {

                    System.gc();

                    ostream = new FileOutputStream(pngFile);

                    transCoder = new PNGTranscoder();

                    if (is400DPI) {
                            transCoder.addTranscodingHint(
                                            ImageTranscoder.KEY_PIXEL_UNIT_TO_MILLIMETER,
                                            new Float(0.0635f));
                    } else {
                            transCoder.addTranscodingHint(
                                            ImageTranscoder.KEY_PIXEL_UNIT_TO_MILLIMETER,
                                            new Float(0.3528f));
                    }

                    transCoder.addTranscodingHint(PNGTranscoder.KEY_INDEXED,
                                    new Integer(5));
                    transCoder.addTranscodingHint(ImageTranscoder.KEY_MEDIA, "screen");

                    TranscoderInput input = new TranscoderInput(canvas.getSVGDocument());
                    TranscoderOutput output = new TranscoderOutput(ostream);
                    // perform Transcoding
                    transCoder.transcode(input, output);

            } catch (TranscoderException te) {
                    te.printStackTrace();
                    throw new IOException(te.getMessage());
            } finally {
                    ostream.flush();
                    ostream.close();
            }
    } 
```

每次运行，程序都会抛出随机异常，

像

* *** CSSEngine：异常 property.syntax.error:org.w3c.dom.DOMException：“o”标识符不是“shape-rendering”属性的有效值。

属性值：自动

***** CSSEngine：异常 property.syntax.error:org.w3c.dom.DOMException：“”标识符不是“shape-rendering”属性的有效值。

属性值：自动

异常：org.w3c.dom.DOMException org.w3c.dom.DOMException：“”标识符不是“形状渲染”属性的有效值。在 org.apache.batik.css.engine.value.AbstractValueFactory.createInvalidIdentifierDOMException(AbstractValueFactory.java:50) 在 org.apache.batik.css.engine.value.IdentifierManager.createValue(IdentifierManager.java:48) 在 org.apache .batik.css.engine.CSSEngine$1.property(CSSEngine.java:744) 在 org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap(CSSEngine.java:768) 在 org.apache.batik.css.engine。 CSSEngine.getComputedStyle(CSSEngine.java:876) at org.apache.batik.bridge.CSSUtilities.getComputedStyle(CSSUtilities.java:82) at org.apache.batik.bridge.CSSUtilities.convertVisibility(CSSUtilities.java:579) at org .apache.batik.bridge。

*****CSSEngine: exception.... org.w3c.dom.DOMException: file:/F:/workspace/MonoGeneiousShoe/src/svg/72DPI/Style-5/Left_Style-5.svg: 属性“shape-rendering”代表一个无效的 CSS 值（“自动”）。原始消息：“”标识符不是“形状渲染”属性的有效值。在 org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap(CSSEngine.java:784) 在 org.apache.batik.css.engine.CSSEngine.getComputedStyle(CSSEngine.java:876) 在 org.apache.batik.bridge .CSSUtilities.getComputedStyle(CSSUtilities.java:82) 在 org.apache.batik.bridge.CSSUtilities.convertVisibility(CSSUtilities.java:579) 在 org.apache.batik.bridge.SVGSVGElementBridge.createGraphicsNode(SVGSVGElementBridge.java:142) 在org.apache.batik.bridge.GVTBuilder.build（GVTBuilder.java：

异常：org.w3c.dom.DOMException org.w3c.dom.DOMException：“o”标识符不是“shape-rendering”属性的有效值。在 org.apache.batik.css.engine.value.AbstractValueFactory.createInvalidIdentifierDOMException(AbstractValueFactory.java:50) 在 org.apache.batik.css.engine.value.IdentifierManager.createValue(IdentifierManager.java:48) 在 org.apache .batik.css.engine.CSSEngine$1.property(CSSEngine.java:744) 在 org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap(CSSEngine.java:768) 在 org.apache.batik.css.engine。 CSSEngine.getComputedStyle(CSSEngine.java:876) at org.apache.batik.bridge.CSSUtilities.getComputedStyle(CSSUtilities.java:82) at org.apache.batik.bridge.CSSUtilities.convertVisibility(CSSUtilities.java:579) at org .apache.batik.bridge。SVGSVGElementBridge.createGraphicsNode(SVGSVGElementBridge.java:142) 在 org.apache.batik.bridge.GVTBuilder.build(GVTBuilder.java:76) 在 org.apache.batik.swing.svg.GVTTreeBuilder.run(GVTTreeBuilder.java:96)错误：null 封闭异常：file:/F:/workspace/MonoGeneiousShoe/src/svg/72DPI/Style-5/Left_Style-5.svg：属性“shape-rendering”表示无效的 CSS 值（“auto”）。原始消息：“”标识符不是“形状渲染”属性的有效值。svg：属性“shape-rendering”表示无效的 CSS 值（“auto”）。原始消息：“”标识符不是“形状渲染”属性的有效值。svg：属性“shape-rendering”表示无效的 CSS 值（“auto”）。原始消息：“”标识符不是“形状渲染”属性的有效值。

*****CSSEngine: exception.... org.w3c.dom.DOMException: file:/F:/workspace/MonoGeneiousShoe/src/svg/72DPI/Style-5/Left_Style-5.svg: 属性“shape-rendering”代表一个无效的 CSS 值（“自动”）。原始消息：“o”标识符不是“shape-rendering”属性的有效值。在 org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap(CSSEngine.java:784) 在 org.apache.batik.css.engine.CSSEngine.getComputedStyle(CSSEngine.java:876) 在 org.apache.batik.bridge .CSSUtilities.getComputedStyle(CSSUtilities.java:82) 在 org.apache.batik.bridge.CSSUtilities.convertVisibility(CSSUtilities.java:579) 在 org.apache.batik.bridge.SVGSVGElementBridge.createGraphicsNode(SVGSVGElementBridge.java:142) 在org.apache.batik.bridge.GVTBuilder.build（GVTBuilder.java：76) 在 org.apache.batik.swing.svg.GVTTreeBuilder.run(GVTTreeBuilder.java:96) 错误：空封闭异常：文件：/F:/workspace/MonoGeneiousShoe/src/svg/72DPI/Style-5/Left_Style -5.svg：属性“shape-rendering”表示无效的 CSS 值（“auto”）。原始消息：“o”标识符不是“shape-rendering”属性的有效值。

***** CSSEngine：异常 property.syntax.error:org.w3c.dom.DOMException：“lormal”标识符不是“font-style”属性的有效值。

属性值：正常

异常：org.w3c.dom.DOMException org.w3c.dom.DOMException：“lormal”标识符不是“font-style”属性的有效值。在 org.apache.batik.css.engine.value.AbstractValueFactory.createInvalidIdentifierDOMException(AbstractValueFactory.java:50) 在 org.apache.batik.css.engine.value.IdentifierManager.createValue(IdentifierManager.java:48) 在 org.apache .batik.css.engine.CSSEngine$1.property(CSSEngine.java:744) 在 org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap(CSSEngine.java:768) 在 org.apache.batik.css.engine。 CSSEngine.getComputedStyle(CSSEngine.java:876) at org.apache.batik.bridge.CSSUtilities.getComputedStyle(CSSUtilities.java:82) at org.apache.batik.bridge.CSSUtilities.convertVisibility(CSSUtilities.java:579) at org .apache.batik.bridge。

*****CSSEngine: exception.... org.w3c.dom.DOMException: file:/F:/workspace/MonoGeneiousShoe/src/svg/72DPI/Style-5/Left_Style-5.svg: 属性“font-style”代表一个无效的 CSS 值（“正常”）。原始消息：“lormal”标识符不是“font-style”属性的有效值。在 org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap(CSSEngine.java:784) 在 org.apache.batik.css.engine.CSSEngine.getComputedStyle(CSSEngine.java:876) 在 org.apache.batik.bridge .CSSUtilities.getComputedStyle(CSSUtilities.java:82) 在 org.apache.batik.bridge.CSSUtilities.convertVisibility(CSSUtilities.java:579) 在 org.apache.batik.bridge.SVGSVGElementBridge.createGraphicsNode(SVGSVGElementBridge.java:142) 在org.apache.batik.bridge.GVTBuilder.build（GVTBuilder.java：ShoeComponentPNGCreator.main(ShoeComponentPNGCreator.java:662) ERROR: null Enclosed Exception: file:/F:/workspace/MonoGeneiousShoe/src/svg/72DPI/Style-5/Left_Style-5.svg: 属性“font-style”代表无效的 CSS 值（“正常”）。原始消息：“lormal”标识符不是“font-style”属性的有效值。org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142) 在 org.apache.batik 的 com.mmg.app.svg.TiledImageTranscoder.transcode(TiledImageTranscoder.java:69) 的 java.lang.NullPointerException。 transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:156) 在 com.mmg.app.svg.ShoeComponentPNGCreator.savePngImage(ShoeComponentPNGCreator.java:601) 在 com.mmg.app.svg.ShoeComponentPNGCreator。

有时它说 height 是 0 ，有时它说 stroke-width 不是有效的属性等。

我认为这是与 CSS 引擎相关的问题。我在这里做错了什么？

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:58:48.990

我找到了解决方案。问题是多个线程同时更新画布，这就是异常的原因。解决方案如下代码，

```
UpdateManager updateManager = canvas.getUpdateManager();

                    updateManager.getUpdateRunnableQueue().invokeLater(
                            new Runnable() {
                                @Override
                                public void run() {
      // my update code here
} 
```

谢谢你

# android - 如何在android上加密/解密图像？

> ID：15384643
> 
> 赞同：2
> 
> 时间：2013-03-13T11:56:32.077
> 
> 标签：android, image, encryption

我有一些开发基本 android 应用程序的经验。但是我的教授要求我在 android 中实现图像加密。我对这个概念很陌生——我用谷歌搜索了这个话题，我能理解其中的一些。我在 Stack Overflow 中查找了类似的问题，但找不到任何对我有帮助的东西。

如何开始在 android 中进行图像加密/解密？我知道 AES、RSA 等加密标准。

请帮我。

# java - 实例化引用错误的 java if 语句

> ID：15384648
> 
> 赞同：-1
> 
> 时间：2013-03-13T11:56:45.077
> 
> 标签：java, error-handling, boolean

如何编写一个“if 语句”来检查方法中是否发生错误，如果是，它将启动一个单独的方法来处理错误，否则打开下一个方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:00:20.440

它被称为[异常处理](http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)。

例子：

```
void someMethod()
{
    try
    {
        // Open a File
    }
    catch(FileNotFoundException e)
    {
        // Call another method
    }
    finally
    {
        // this block executes whether exception occurs or not
    }

    // Continue execution
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:59:16.383

为此使用 try catch 语句。假设如果第一个方法错误（在处理异常之后）你想崩溃，那么下面的格式应该可以工作

```
try {

    methoda();

} catch(Exception e) {

    methodToDealWithError(e);
    throw(e);
}

methodb(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:59:27.943

我认为`try-catch`块会为你做这件事。在块中调用您的第一个方法`try`，然后在块中调用处理异常的方法`catch`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:59:31.093

为什么不只使用异常？使方法在错误时抛出异常，在调用代码中捕获异常，将错误处理放在catch块中？？？这就是例外的用途！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T12:00:53.510

这取决于方法如何报告错误。如果它在错误时返回“false”，你可以做一个简单的测试：

```
boolean res = method();
if (!rest) {
  // manage error
} 
```

但是，如果该方法引发异常，则必须使用以下方法捕获它们：

```
try {
  method();
} catch (Exception e) {
  // Manage exception or raise
} 
```

实际上，这取决于方法的实现方式。你能提供更多信息吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T12:01:29.953

**methodA** : 第一种方法，如果发生错误则抛出异常 **methodB** : 下一个方法执行，如果没有错误发生 **methodC** : 错误处理方法

```
try{
    methodA();
    methodB();
catch(Exception e){
    methodC();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T12:09:19.663

使用 try catch 块作为异常处理

```
try {
    Place Your Code Here...
} catch(Exception e) {

   callAnotherMethodHere();
} 
```

# css - 在 Codeigneter 中放置 css 文件的位置

> ID：15384658
> 
> 赞同：0
> 
> 时间：2013-03-13T11:57:04.557
> 
> 标签：css, codeigniter

我正在尝试仅显示具有某种样式的视图页面。我的所有其他代码工作正常，但视图页面未显示样式。我已将**`style.css`**文件放在所有视图页面的视图文件夹中。它是放置**`css`**文件的正确位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-31T07:38:48.587

**但首先你必须设置你项目的 base_url 路径**

```
mysite/
     application/
             controllers/
             models/
             views/
             .
             .
      system/
      public/
            assets/
            css/
                style.css/     
            js/
            images/

<link rel="stylesheet" href="<?php echo base_url();?>public/assest/css/style.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:08:27.870

在您的应用程序目录之外创建一个名为“assets”或类似名称的文件夹是一种常见的做法。这是出于安全原因，因为您不想公开您的应用程序文件夹结构。

使用以下方法引用此文件夹：

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url()?>assets/css/style.css"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:09:01.287

遵循这个结构

```
mysite/
     application/
             controllers/
             models/
             views/
             .
             .
      system/
      public/
            css/
            js/
            images/ 
```

您可以像这样在视图中包含这些文件

```
<link rel="stylesheet" href="<?php echo base_url();?>public/css/style.css" /> 
```

这里 mysite 是我的站点名称。其中有3个文件夹。将包含我所有代码的应用程序。核心文件系统和 css、js 和图像的公共系统。之后，上述标准应该起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:39:50.853

如果您在模板中工作，那么最好将所有 css 文件包含在模板标题中。这是使用模板的最佳方法，因为它减少了您的视图代码。只需在 head 标签后包含您的 css 文件

```
 <head> css files link </head> 
```

# android - android - 自动完成文本视图未更新

> ID：15384662
> 
> 赞同：1
> 
> 时间：2013-03-13T11:57:21.850
> 
> 标签：android, autocomplete, progress-bar

我尝试从在文本框中键入的基于 Web 服务的文本更新自动完成文本视图数据。它工作正常，但我在 Web 服务调用时放置了进度条，因为在这种情况下，自动完成文本视图不显示下拉菜单需要一些时间。我猜自动完成文本视图在进度条被解雇时被解雇。在这种情况下我们应该如何放置进度条。

```
Code 
```

类 GetFundNames 扩展 AsyncTask {

```
 ProgressDialog progress = new ProgressDialog(BasicAutoText.this);

    @Override
    protected void onPreExecute() {
        Log.d("TAG", "onPreExecute()");
        progress.setMessage("Please wait...");
        progress.setCanceledOnTouchOutside(false);
        progress.show();
    }

    @Override
    // three dots is java for an array of strings
    protected String doInBackground(Void... args) {

        try {
            response = getNames(strKeyword);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ;

        return response;
    }

    // then our post

    @Override
    protected void onPostExecute(String response) {

        if(progress.isShowing())
        {
            progress.dismiss();
        }

        if (ETF_Constants.registerResponsevalue == 200) {
            JSONArray arObjects;
            try {
                arObjects = new JSONArray(response);
                arProducts = new ArrayList<ProductData>();
                arProducts.clear();
                for (int i = 0; i < arObjects.length(); i++) {
                    JSONObject jOb = arObjects.getJSONObject(i);
                    ProductData pd = new ProductData();

                    int fundId = jOb.getInt("fundId");
                    String con = "" + fundId;
                    String fundName = jOb.getString("fundName");
                    String priceAndDate = jOb.getString("priceAndDate");
                    String recentGain = jOb.getString("recentGain");
                    String recentGrowth = jOb.getString("recentGrowth");
                    String tickerName = jOb.getString("tickerName");

                    pd.fundId = con;
                    pd.fundName = fundName;
                    pd.priceAndDate = priceAndDate;
                    pd.recentGain = recentGain;
                    pd.recentGrowth = recentGrowth;
                    pd.tickerName = tickerName;

                    arProducts.add(pd);
                }

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            // autocomplete
            adapter = new ArrayAdapter<String>(BasicAutoText.this,
                    R.layout.advancelist);
            adapter.setNotifyOnChange(true);
            AUTO_View.setAdapter(adapter);

            System.out.println("adapter" + adapter);
            for (int i = 0; i < arProducts.size(); i++) {
                adapter.add(arProducts.get(i).fundName);
                System.out.println("Fund Name:"
                        + arProducts.get(i).fundName);
            }
            System.out.println("arProducts count:" + arProducts.size());
            System.out.println("adapter count:" + adapter.getCount());

            adapter.notifyDataSetChanged();

        } 
    }

} 
```

# php - 如何将邮件正文保存为 html

> ID：15384663
> 
> 赞同：0
> 
> 时间：2013-03-13T11:57:29.397
> 
> 标签：php

我正在寻找一种方法来将我用作证书的模板文件保存到我的 my.snf sttsch 中。

下面是用我查询的字段替换模板中的字段的代码。

```
require("class.phpmailer.php");

//placeholders array
$pholders = array('replace_name', 'replace_number', 'replace_title');

//Certificate replace values array
$failedValues = array($FullName, $TestNo, $Title);

$mail_body = file_get_contents("failed.html");
$mail_body = str_replace($pholders,$failedValues,$mail_body);

//mailer
$mail = new phpmailer;
$mail->IsSMTP(); // set mailer to use SMTP
$mail->IsHTML(true);    // set email format to HTML
$mail->Subject = "Results";
$mail->Body = $mail_body;
$mail->AddAttachment("cpd.html"); 
```

我省略了 smtp 设置的代码。必须生成并附加文件 cpd.html。我正在寻找一种方法来生成它并将其保存以将其附加到邮件中。

# eclipse - 在eclipse中调试期间的类加载异常

> ID：15384664
> 
> 赞同：1
> 
> 时间：2013-03-13T11:57:32.257
> 
> 标签：eclipse, debugging, classloader

每次我尝试在 Eclipse 调试会话期间进入一个类时，我都会得到一个 ClassNotFoundException 的整个调用堆栈，JVM 在类加载期间抛出该调用堆栈。这意味着调用通过 AppClassLoader、ExtClassLoader 和 URLClassLoader 传播，最终引发异常。我现在可以跨出整棵树，然后再次跨入，然后它会起作用，但我不需要告诉你这很烦人。

有谁知道我的配置有什么问题？有趣的是，我在两个新的 eclipse 安装上尝试了这个，但它仍然发生。我想过一个异常断点，但没有......

# django - Django ManyToManyField 添加用户

> ID：15384665
> 
> 赞同：1
> 
> 时间：2013-03-13T11:57:33.670
> 
> 标签：django

目前我正在学习 ManyToManyField。我有一个我不完全理解的场景。

例如，这是我的模块。我创建了 3 个帐户，分别为 Jim、Tony 和 Mary

我让用户 Mary 关注 Jim。我可以通过在管理页面的下拉框中单击 Jim 来轻松地让 Mary 关注 Jim。Mary 的 User 对象和 Jim 的用户名。

```
Mary = User.objects.get(username='Mary')
Jim = User.objects.get(username='Jim') 
```

我怎样才能让玛丽跟随吉姆？就像在管理页面中一样

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100, blank=True)
    following = models.ManyToManyField('self', related_name='followers', symmetrical=False, blank=True, null=True)

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:06:58.127

```
mary = User.objects.get(username='Mary')
jim = User.objects.get(username='Jim')

#just make sure your user is saved before adding the relationship.

jim.following.add(mary)
jim.save() 
```

在指定您对额外字段所做的操作时，基本上是在描述您希望关系如何工作。

这`models.ManyToManyField()`在幕后所做的是创建一个中间数据库表，通常看起来像这样的“app_model1_model2”，命名可能是关闭的，但你明白了。

`self`意味着您正在定义与同一模型的关系。因此，你不会得到一个`user_set`，但是因为你已经决定它`False`在`symmetry`你会得到一个，因为你强迫 Django 添加一个。

代码中的含义是您可以`user.user_set.all()`获取所有相关用户！

`related_name='followers'`意味着您正在命名您的关系`followers`而不是 Django 生成的名称，否则我认为它会类似于“用户”。IE。您正在赋予它更好的含义和表示您想要实现的目标。

这在文档中得到了很好的解释！

[Django 文档多对多字段](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:07:32.747

```
>>> Mary = User.objects.get(username='Mary')
>>> Jim = User.objects.get(username='Jim')
>>> Jim.following.add(Mary)
>>> Jim.save() 
```

Django书中的[Django ManyToMany 示例](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

# ios - drawRect 不想画任何东西

> ID：15384674
> 
> 赞同：2
> 
> 时间：2013-03-13T11:58:03.897
> 
> 标签：ios, cocoa-touch, avfoundation, drawrect

我在情节提要上有一个 ViewController。我已经使用界面生成器在屏幕底部设置了一个工具栏。我已将自定义视图设置为覆盖 drawRect 的视图。但是，对于我的生活，我无法在从该 drawRect 调用的屏幕上显示**任何内容。**drawRect 本身被调用得很好，但屏幕上什么也没有。

另外，我有这个 ViewController 的方法，它使用 AVCaptureSession 将其背景切换为来自相机输入的实时视图。我曾怀疑这可能是导致错误的原因，但是在删除了 AVCaptureSession 的所有引用后，我仍然无法让它工作。

对不起我的写作和/或缺乏逻辑，我现在没有任何睡眠。

编辑：这是一个不起作用的代码的小例子。内部的每个方法都被调用，但没有显示任何内容。

```
- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);

    // Draw them with a 2.0 stroke width so they are a bit more visible.
    CGContextSetLineWidth(context, 2.0);

    CGContextMoveToPoint(context, 0,0); //start at this point

    CGContextAddLineToPoint(context, 100, 100); //draw to this point

    // and now draw the Path!
    CGContextStrokePath(context);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T13:42:52.233

如果您`UIView`覆盖. 删除那个电话！众所周知，它会导致奇怪的行为。`[super drawRect]``UIView`

根据[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html)：

> 如果你直接继承 UIView，你的这个方法的实现不需要调用 super。但是，如果您要对不同的视图类进行子类化，则应在实现中的某个时刻调用 super。

# android - Android 共享文件：我可以知道文件何时被共享或选择器被取消吗？

> ID：15384684
> 
> 赞同：1
> 
> 时间：2013-03-13T11:58:28.347
> 
> 标签：android, share

我有一个带有`Share`选项的应用程序。当用户点击它时，`file`将创建一个要共享的内容，然后`chooser`显示一个询问用户他想如何共享它（邮件、Skype、谷歌驱动器......）。共享文件或取消选择器后，我想删除该文件，因为不再需要它。

我希望文件名具有当前日期，因此不能每次都覆盖同一个文件。有什么方法可以知道何时不再需要此文件？

要共享文件，我使用以下代码：

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.setType("text/csv");
sharingIntent.putExtra(Intent.EXTRA_STREAM, csv);
sharingIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
startActivity(Intent.createChooser(sharingIntent, getResources().getText(R.string.send_to))); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:26:40.930

取而代之的是`startActivity`，选择器需要使用 开始`startActivityForResult`。选择器在取消或文件被共享之前不会关闭，因此可以在`onActivityResult`.

# java - 将java中的字符串文本框的值转换为整数，以便该值可用于乘法

> ID：15384688
> 
> 赞同：0
> 
> 时间：2013-03-13T11:58:39.793
> 
> 标签：java, netbeans, textbox, type-conversion

嘿，我正在尝试转换字符串文本框，以便我可以将两个变量相乘并将其显示在第三个文本框中。我的文本框是 txtTotalPre，我试图将此数字乘以 1，然后将其显示在 txtTotal 中。

```
 String number = txtSub.getText();
   String.valueOf(number);
   int price = 1;
   txtTotal.setText(number * price); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:03:40.867

尝试

```
int number = Integer.parseInt(txtSub.getText()); 
```

代替

```
String number = txtSub.getText();
String.valueOf(number); 
```

# android - 哪个cordova版本至少支持android v2.2？

> ID：15384690
> 
> 赞同：0
> 
> 时间：2013-03-13T11:58:43.337
> 
> 标签：android, cordova

我需要开发一个带有phonegap的android应用程序至少支持android v2.2。

哪个cordova版本支持最低这个？

我真的无法在网站上的任何地方找到这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:18:58.817

PhoneGap 2.5.0 的示例应用有 minSDK=7 什么是 2.1`<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="17"/>`

见[https://github.com/phonegap/phonegap/blob/2.5.0/lib/android/example/AndroidManifest.xml#L62](https://github.com/phonegap/phonegap/blob/2.5.0/lib/android/example/AndroidManifest.xml#L62)

Cordova 2.5.0 也是如此 :)`<uses-sdk android:minSdkVersion="7" />` 见[https://github.com/apache/cordova-android/blob/master/test/AndroidManifest.xml#L48](https://github.com/apache/cordova-android/blob/master/test/AndroidManifest.xml#L48)

所以最新的应该仍然支持 Android 2.2 ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T05:10:05.543

Cordova 2.6.0 加速度计在真实设备上的 Android 2.2.1（SDK 级别 8）中不起作用。不调用 watchAcceleration() 回调。在 Android 4.2 模拟器上进行测试确认我的代码有效 - 调用了 watchAcceleration() 成功回调。但是，仿真器对运动的模拟有限（且不正确）以执行加速度计功能。

# d3.js - d3 矩形插值

> ID：15384693
> 
> 赞同：0
> 
> 时间：2013-03-13T11:59:03.017
> 
> 标签：d3.js

我有大量行业的预测利润率数据集，即对于每个行业，我都有以下形式的概率分布

```
 var data = [{'confidence': 0.0, 'rule': 'Agriculture', 'value': 45},
 {'confidence': 0.052631578947368418, 'rule': 'Agriculture', 'value': 46},
 {'confidence': 0.10526315789473684, 'rule': 'Agriculture', 'value': 47},
 {'confidence': 0.15789473684210525, 'rule': 'Agriculture', 'value': 48},
 {'confidence': 0.36842105263157893, 'rule': 'Agriculture', 'value': 52},
 {'confidence': 0.73684210526315785, 'rule': 'Information', 'value': 59},
 {'confidence': 0.78947368421052633, 'rule': 'Machine Learning', 'value': 60},
 {'confidence': 0.84210526315789469, 'rule': 'Machine Learning', 'value': 61},
 {'confidence': 0.89473684210526305, 'rule': 'Machine Learning', 'value': 62},
 {'confidence': 0.94736842105263153, 'rule': 'Machine Learning', 'value': 63}]; 
```

我需要在 d3.js 中重新创建以下图，其中每个密度都绘制为条形图，其中线性色标描述概率。

![示例可视化](../Images/98cbc63579f344ac8fe5ed1c1bf3bb79.png)

到目前为止，我的尝试包括将每个给定点绘制为高度为 1 的矩形元素：

```
var rect = svg.selectAll("rect")
              .data(data)
              .enter()
              .append("rect")
              .attr("x", function(d, i) {
                  return x(d.rule) + margin.left;
              })
              .attr("y", function(d, i) {
                  return y(d.value) 
              })
              .attr("width", 100)
              .attr("height", 1) // change this !
              .style("fill", function(d, i) {
                  return color(d.confidence);
              }); 
```

正如您在下面看到的这种作品，但我现在需要以某种方式插入矩形以获得更平滑的可视化。

![不平滑](../Images/ba7a3d74d8924c6cb29b85f18fe6b9af.png)

我怎样才能做到这一点（或者我完全走错了路）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:13:45.437

做你想做的事情的一种方法是使用[SVG gradients](http://www.w3schools.com/svg/svg_grad_linear.asp)。对于每个条，您将定义一个渐变，其停止点对应于您的置信度值（生成方式与您现在生成矩形的方式大致相同）。然后您所要做的就是绘制矩形并将渐变分配为各自的填充。

我已经使用这种技术来填充[这里](http://www.larsko.org/v/euca/)的“线条” 。

# c++ - 枚举问题，还是我的理解？

> ID：15384696
> 
> 赞同：2
> 
> 时间：2013-03-13T11:59:06.837
> 
> 标签：c++

我正在将枚举类型添加到我迄今为止学到的极少数 C++ 中，但是设置它时遇到了麻烦……我是否缺少一些基础知识？

```
class Rectangle
{
public:
    Rectangle();
    ~Rectangle();
    enum rectangle_directions_t {R_LEFT = 0, R_DOWN = 1, R_RIGHT= 2, R_UP = 3, R_NONE = 4};
    void setRect(rectangle_directions_t rec_dir) {rectangle_direction = rec_dir;}

private:
    rectangle_directions_t rectangle_direction;

};

int main()
{
    Rectangle pRect;
    pRect.setRect(R_LEFT);

} 
```

你不能像任何其他类型一样设置枚举类型的变量吗？还是我错过了一些简单的东西？我得到的错误是在 main 中的“设置”期间，它说 R_LEFT 未定义。这很奇怪，因为如果我想将它传递给一个方法，我通常不会首先声明一个“int”......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T12:00:17.787

枚举在您的类中定义`Rectangle`。您需要符合条件`R_LEFT`：

```
pRect.setRect(Rectangle::R_LEFT); 
```

# javascript - 在 Android 浏览器中启动相机

> ID：15384705
> 
> 赞同：0
> 
> 时间：2013-03-13T11:59:23.267
> 
> 标签：javascript, html, android-camera

我正在为移动浏览器开发一个 Web 应用程序（不是 Android 原生应用程序）。如何使用 Android 浏览器上的 Web 应用程序启动 Android Native 相机？

我目前指的是以下相机教程。它适用于桌面浏览器，但不适用于 Chrome 移动浏览器，因为只有 Opera Mobile 12.0 支持 getUserMedia。 [http://webcache.googleusercontent.com/search?q=cache:http://davidwalsh.name/browser-camera](http://webcache.googleusercontent.com/search?q=cache:http://davidwalsh.name/browser-camera) [http://caniuse.com/stream](http://caniuse.com/stream)

我想这是可能的，因为如果我通过我的 android 浏览器（不是 Facebook 应用程序）访问 Facebook，我可以启动手机原生相机。对使用 HTML 和 Javascript 启动 android 手机摄像头的语法有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:04:20.973

您可以创建一个`intent://`将触发本机相机应用程序的 URL。但这只是启动了这个本机应用程序。没有将拍摄的照片返回到您的网络应用程序的反向通道。

# actionscript - 是否有任何动作脚本字节码调试器？

> ID：15384706
> 
> 赞同：3
> 
> 时间：2013-03-13T11:59:24.217
> 
> 标签：actionscript, bytecode

是否有任何已知的工具可以调试动作脚本字节码，就像使用 IDA 或 olly 调试器调试 x86 二进制代码一样？

我没有源代码。我想逐行调试ABC字节码。SWFWire 不支持这一点，FireBug 也不支持。

我想调试这样的 ActionScript 字节码。

```
 push "a"
    96 03 00 00 01 00
    getVariable 
    1C
    push 248
    96 05 00 07 F8 00 00 00
    equals 
    0E
    not 
    12
    if true goto #159
    9D 02 00 1D 00
    push "a"
    96 03 00 00 01 00
    push "a"
    96 03 00 00 01 00
    getVariable 
    1C
    push 476
    96 05 00 07 DC 01 00 00
    add 
    0A
    setVariable 
    1D
    getVariable 
    1C
    jump #20
    99 02 00 E0 FD 
```

我想在我想要的地方设置一个断点，并逐行遵循执行路径。

我用谷歌搜索了一段时间，没有支持这个的软件。先感谢您。

# parallel-processing - OpenCL 矩阵乘法入队/缓冲区读取

> ID：15384711
> 
> 赞同：1
> 
> 时间：2013-03-13T11:59:33.390
> 
> 标签：parallel-processing, opencl, matrix-multiplication

我正在 OpenCL 中尝试一个基本的矩阵乘法程序。我相信我的问题在于我的队列和/或缓冲区读取，因为结果矩阵的输出完全不正确，矩阵 A 和 B 的第一行也不正确。我是 OpenCL 新手，我一直在努力我反对这个已经有一段时间了，也许这里有人可以给我一个提示我哪里出错了？

主机代码：

```
#define __NO_STD_VECTOR // Uses cl::vector instead of standard version
#include <CL/cl.hpp>
#include <stdlib.h>
#include <stdio.h>
#include <fstream>
#include <iostream>
#include <math.h>
#include <string>

/* Defined matrix width/height constants */
#define numRowsA 3
#define numColsA 3
#define numRowsB 3
#define numColsB 3
#define numRowsC numRowsA
#define numColsC numColsB

using namespace std;

/* Function declarations */
inline void checkErr(cl_int err, string name);
void initMatrix (float* matrix, int numIndices);
void printMatrix (string displayName, float* matrix, int numIndices,  
      int rowSize);

//*************
// Main Program
//*************
int main(int argc, char* argv[]) {

    /* Check for valid matrix sizes */
    if (numColsA != numRowsB) {
        cout << "ERROR: Invalid matrix dimensions." << endl;
    } else {

    srand(2013); // Set random seed

    /* Allocate memory for matrices A, B, and C */
    unsigned int sizeA = numRowsA * numColsA;
    unsigned int sizeB = numRowsB * numColsB;
    unsigned int sizeC = numRowsC * numColsC;
    unsigned int memoryA = sizeof(float) * sizeA;
    unsigned int memoryB = sizeof(float) * sizeB;
    unsigned int memoryC = sizeof(float) * sizeC;

    /*
        Allocate memoryA/memoryB/memoryC size blocks of bytes
        (cast from void*)
    */
    float* blockA = (float*) malloc(memoryA);
    float* blockB = (float*) malloc(memoryB);
    float* blockC = (float*) malloc(memoryC);

    /* Initialize matrices A and B */
    initMatrix(blockA, sizeA);
    initMatrix(blockB, sizeB);

    /* Display matrices A and B */
    printMatrix("Matrix A", blockA, sizeA, numColsA);
    printMatrix("Matrix B", blockB, sizeB, numColsB);

    cl_int err;            // Error code
    string platformVendor; // Platform vendor

    /* Create list of platforms */
    cl::vector < cl::Platform > platformList;
    cl::Platform::get(&platformList);

    /*
        Display potential Platform list generation error. If the
        platform list size does not equal 0, CL_SUCCESS (0) is
        sent to the function. If the platform list size does
        equal 0, -1 is sent to the function.
    */
    checkErr(platformList.size()!=0 ? CL_SUCCESS : -1,
            "Platform");

    /*
        Replace empty value of platformVendor with device vendor
        name
    */
    platformList[0].getInfo((cl_platform_info) CL_PLATFORM_VENDOR,
        &platformVendor);

    /* Properties for Context constructor (Use unknown) */
    cl_context_properties cprops[3] =
        {
        CL_CONTEXT_PLATFORM,
        (cl_context_properties) (platformList[0]) (),
        0
        };

    /* Create context */
    cl::Context context(CL_DEVICE_TYPE_GPU, cprops, NULL, NULL,
        &err);

    /* Display potential Context constructor error */
    checkErr(err, "Context");

    /* Create buffer for matrix A */
    cl::Buffer deviceMemA(context,
            CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR, sizeA, blockA, &err);

    /* Create buffer for matrix B */
    cl::Buffer deviceMemB(context,
            CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR, sizeB, blockB, &err);

    /* Create buffer for matrix C */
    cl::Buffer deviceMemC(context,
            CL_MEM_WRITE_ONLY | CL_MEM_USE_HOST_PTR, sizeC, blockC, &err);

    /* Create buffer for row (A) and col (C) */
    cl::Buffer rowA(context, CL_MEM_READ_ONLY, sizeof(int),
            (void *) numRowsA, &err);
    cl::Buffer colC(context, CL_MEM_READ_ONLY, sizeof(int),
            (void *) numColsC, &err);

    /* Display potential Buffer constructor error */
    checkErr(err, "Buffers");

    /* Get list of devices */
    cl::vector<cl::Device> devices =
        context.getInfo<CL_CONTEXT_DEVICES>();

    /* Check for at least one device, if not throw error */
    checkErr(devices.size() > 0 ? CL_SUCCESS : -1, "No Devices");

    /* Read input from .cl file */
    ifstream file("matrixMult1_kernels.cl");

    /* Check for potential problem opening .cl input file */
    checkErr(file.is_open() ? CL_SUCCESS:-1, "File Not Open");

    /* Store file contents in a string */
    string prog(istreambuf_iterator<char>(file),
            (istreambuf_iterator<char>()));

    /* Create source object */
    cl::Program::Sources source(1, make_pair(prog.c_str(),
        prog.length()+1));

    /* Create program for given context and source */
    cl::Program program(context, source);

    err = program.build(devices, ""); // Check for build error

    /* Display potential program build error */
    checkErr(err, "Program Build");

    /* Create kernel */
    cl::Kernel kernel(program, "matrixMul", &err);

    /* Display potential Kernel constructor error */
    checkErr(err, "Kernel");

    /*
        Set matrixMul arguments, error checking after each
        argument
    */
    err = kernel.setArg(0, deviceMemA);
    checkErr(err, "Arg0");
    err = kernel.setArg(1, deviceMemB);
    checkErr(err, "Arg1");
    err = kernel.setArg(2, deviceMemC);
    checkErr(err, "Arg2");
    err = kernel.setArg(3, rowA);
    checkErr(err, "Arg3");
    err = kernel.setArg(4, colC);
    checkErr(err, "Arg4");

    /* Create command queue */
    cl::CommandQueue queue(context, devices[0], 0, &err);

    /* Display potential CommandQueue constructor error */
    checkErr(err, "Command Queue");

    /* Create event object */
    cl::Event event;

    cl::NDRange global(3, 3);
    cl::NDRange local(1, 1);

    /* Enqueue the kernel */
    err = queue.enqueueNDRangeKernel(kernel, 2, global, local,
        NULL, &event);

    /* Display potential enqueueing error */
    checkErr(err, "Enqueue");

    /* Wait until kernel has completed execution before continuing */
    event.wait();

    /* Read kernel result back into host memory */
    err = queue.enqueueReadBuffer(deviceMemC, CL_TRUE, 0, memoryC,
        blockC, NULL, &event);

        checkErr(err, "C");

    err = queue.enqueueReadBuffer(deviceMemA, CL_TRUE, 0, sizeA,
        blockA, NULL, &event);
    err = queue.enqueueReadBuffer(deviceMemB, CL_TRUE, 0, sizeB,
        blockB, NULL, &event);

    /* Display potential kernel read error */
    checkErr(err, "Read Buffer");

    /* Display matrices */
        cout << endl;
        cout << "After:" << endl;
    printMatrix("Matrix A", blockA, sizeA, numColsA);
    printMatrix("Matrix B", blockB, sizeB, numColsB);
    printMatrix("Matrix C", blockC, sizeC, numColsC);

    /* Free up memory */
    free(blockA);
    free(blockB);
    free(blockC);
    }
}

//--------------------------------------------------------------------
// checkErr - Inline error checking function for OpenCL portion of
//            host program.
//
// PRE:  err is of type int in OpenCL; name is a string.
// POST: The program is terminated after display an error message
//       indicating the location of the error and the error code.
//--------------------------------------------------------------------
inline void checkErr(cl_int err, string name) {

    /* Check error code against OpenCL success constant */
    if (err != CL_SUCCESS) {

    /*
        Display an error message stating the error origin and
        error number.
    */
    std::cerr << "ERROR: " << name << " (" << err << ")"
              << std::endl;

    exit(EXIT_FAILURE); // Terminates process with status code 0
    }
}

//--------------------------------------------------------------------
// initMatrix - Assigns a random float value to each indice of the
//              matrix.
//
// PRE:  matrix is a pointer to a block of bytes in memory; numIndices
//       is the number of indicies in the matrix being instantiated.
// POST: Each index of the matrix has been instantiated with a random
//       float value.
//--------------------------------------------------------------------
void initMatrix (float* matrix, int numIndices) {

    /*
    Loop through the block of bytes, assigning a random float
    for each index of the matrix
    */
    for (int i = 0; i < numIndices; i++) {

    /* Assign a random float between 0 and 1 at this byte */
    matrix[i] = rand() / (float) RAND_MAX;
    }
}

//--------------------------------------------------------------------
// printMatrix - Outputs a readable version of the matrix.
//
// PRE:  displayName is a string; matrix is a pointer to a block of
//       bytes in memory; numIndices an integer indicating the number
//       of indices in the matrix being displayed (read left-to-right,
//       top-to-bottom); rowSize is an integer indicating the number
//       of elements in one row of the matrix.
// POST: A readable version of the matrix is displayed.
//--------------------------------------------------------------------
void printMatrix (string displayName, float* matrix, int numIndices,
          int rowSize) {

    /* Output display name of matrix */
    cout << "\n" << displayName << ":" << endl;

    /* Loop through each indice of the matrix */
    for (int i = 0; i < numIndices; i++) {
    cout << matrix[i]; // Display value at this indice

    /* Check for next row of the matrix */
    if (((i + 1) % rowSize) == 0) {
        cout << endl; // Line break
    } else {
        cout << "  |  "; // Indice separator
    }
    }
} 
```

核心：

```
// matrixMult1_kernels.cl
// Multiply two matrices A * B = C
// Device code.

// OpenCL Kernel
__kernel void
matrixMul(__global float* A, 
          __global float* B, 
      __global float* C, 
          int wA, int wB) {

   // 2D Thread ID
   int tx = get_local_id(0);
   int ty = get_local_id(1);

   // value stores the element 
   // that is computed by the thread
   float value = 0;

   for (int k = 0; k < wA; ++k)
   {
       float elementA = A[ty * wA + k];
       float elementB = B[k * wB + tx];
       value += elementA * elementB;
   }

   // Write the matrix to device memory each 
   // thread writes one element
   C[ty * wA + tx] = value;
} 
```

样本输出：

> 矩阵 A：
> 
> 0.398748 | 0.999793 | 0.206833
> 
> 0.354238 | 0.674347 | 0.492022
> 
> 0.707017 | 0.353635 | 0.430668
> 
> 矩阵 B：
> 
> 0.91598 | 0.0260167 | 0.881732
> 
> 0.810974 | 0.193091 | 0.589857
> 
> 0.229151 | 0.0657822 | 0.965835
> 
> 错误：C (-30)

我正在使用仅支持 OpenCL 1.1 的 NVIDIA GeForce 9800 GT。在这里的任何帮助将不胜感激。

谢谢，

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:38:42.863

输入矩阵 A 和 B 的数据不会传递给设备。创建缓冲区时：

```
cl::Buffer deviceMemA(context, CL_MEM_READ_WRITE, memoryA,blockA, &err) 
```

blockA**参数**被忽略，因为标志没有指定如何使用它。您需要至少添加**CL_MEM_COPY_HOST_PTR以使用****blockA**的内容初始化缓冲区。

或者，您可以在创建缓冲区后调用**clEnqueueWriteBuffer**发送数据。

# java - 在 AS3 中的本地主机上时无法接收来自套接字服务器的响应

> ID：15384716
> 
> 赞同：2
> 
> 时间：2013-03-13T11:59:40.337
> 
> 标签：java, html, actionscript-3, sockets, flash-cs6

我的 Flash AS3 项目有问题。我正处于制作的最后阶段，即将它部署到我们的网络服务器。但问题是，一旦SWF部署在Web服务器上（Web服务器是XAMPP）并通过localhost访问，它就停止接收来自socket服务器的任何数据。socket服务器是一个基于JDK6的java应用程序。但是当我尝试从 Flash CS6 运行 SWF（按 CTRL + Enter）时，它会从服务器接收数据。所以我怀疑我的 Flash 嵌入对象标签有一些错误配置。这是我的嵌入式对象标签。

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1000" height="700" id="vclass" align="top">
            <param name="movie" value="vclass.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="window" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="sameDomain" />
                            <param name="allowNetworking" value="all" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="vclass.swf" width="1000" height="700">
                <param name="movie" value="vclass.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                                    <param name="allowNetworking" value="all" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:22:39.023

这很可能是跨域策略文件问题！你的服务器上有吗？
在此处阅读[Flash 电影的跨域策略](http://kb2.adobe.com/cps/142/tn_14213.html)和此处[的跨域策略文件规范](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)

# python - NDB query() 是否通过缓存？

> ID：15384718
> 
> 赞同：5
> 
> 时间：2013-03-13T11:59:47.990
> 
> 标签：python, google-app-engine, memcached, app-engine-ndb

NDB query() 是否通过缓存？

NDB 文档提到它将自动使用缓存。这仅适用于 get_by_id 还是也适用于查询语句，例如：

```
Product.query().order(Product.name).fetch() 
```

在许多页面中，我都显示了一个产品列表，这就是我希望它来自缓存的原因。

另一种方法是自己查询产品列表并存储在 memcache 中，但在这种情况下，产品更新不会最终出现在我的“手动”缓存中。或者是否可以自己将所有产品 ID 存储在缓存中，然后通过 memcache/datastore 检索它们。但这需要一个 get_by_id 接受多个 id 并返回一个列表..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T07:32:02.480

我有同样的问题。由于查询没有被缓存（至少在不同的上下文之间，或者这是我在文档中所理解的），我决定将查询缓存并使其与我的添加/更新/删除数据保持同步。

[这](https://stackoverflow.com/questions/16688269/gae-how-to-add-new-data-in-a-memcache-var/16689347)是我解决这个问题的方法。我希望它有所帮助。

# ibm-mobilefirst - ToolBarButton 未触发事件

> ID：15384724
> 
> 赞同：0
> 
> 时间：2013-03-13T12:00:17.583
> 
> 标签：ibm-mobilefirst

我有这个事件捕捉器：

```
 WLJQ('button#refreshBte').bind('click', function() {
        console.log("start refresh...");
    }); 
```

有人可以解释一下为什么：

适用于：

```
 <div data-dojo-type="dojox.mobile.Heading"
        data-dojo-props='fixed:"top"'>
        Header
    </div>
    <button id="refreshBte" data-dojo-type="dojox.mobile.Button"
            style="float: right">Refresh</button> 
```

并且不适用于：

```
 <div data-dojo-type="dojox.mobile.Heading"
        data-dojo-props='fixed:"top"'>
        Header
        <button id="refreshBte" data-dojo-type="dojox.mobile.ToolBarButton"
            style="float: right">Refresh</button>
    </div> 
```

如果我用按钮替换 ToolBarButton 也不会。

谢谢

* * *

编辑：因为它不适合我，所以我创建了一个简单的 WL 项目并添加了标题和工具栏按钮，这里是 html：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Test</title>
<meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="shortcut icon" href="images/favicon.png">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="stylesheet" href="css/Test.css">
<script>
    window.$ = window.jQuery = WLJQ;
</script>
<script type="text/javascript"
    data-dojo-config="isDebug: false, async: true, parseOnLoad: true, mblHideAddressBar: false"
    src="dojo/dojo.js"></script>
</head>
<body id="content" style="display: none;">
    <div data-dojo-type="dojox.mobile.ScrollableView" id="view0"
        data-dojo-props="selected:true">
    <div data-dojo-type="dojox.mobile.Heading"
        data-dojo-props="label:'Heading'">
            <button data-dojo-type="dojox.mobile.ToolBarButton" id="refreshBte">Label</button>
        </div>

    </div>
    <!--application UI goes here-->
    <script src="js/initOptions.js"></script>
    <script src="js/Test.js"></script>
    <script src="js/messages.js"></script>
</body>
</html> 
```

“页面设计器”显示了标题和工具栏，但是当我在 Android 模拟器上运行它时，我得到了一个黑屏！任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:34:35.543

可能是因为您使用 JQuery 语法绑定事件？

使用此 Dojo 代码，相同的标记对我来说效果很好：

```
require([
    "dojo/ready",
    "dijit/registry"
], function(ready, registry){
    ready(function(){
        registry.byId("refreshBte").on("click", function(){
            console.log("start refresh...");
        });
    });
}); 
```

# ios - 通用/中央 popViewControllerAnimated 方法

> ID：15384725
> 
> 赞同：1
> 
> 时间：2013-03-13T12:00:17.463
> 
> 标签：ios, objective-c, generics, uinavigationcontroller, popviewcontrolleranimated

我有一个甜蜜的小问题和场景：

问题：我可以拥有 [self.navigationController popViewControllerAnimated:True]

受到中央阶级的控制，要求在每一个观点中都必须重复。

所以这就是我到目前为止所拥有的：观点：

```
//this is all I want to accomplish and repeat in every view. I want to pass on the own NavigationController and have central class add an action (and style) to the leftBarButton

[self.navigationItem setLeftBarButtonItem:[actionsCollection setGenericBackButton:self.navigationController]]; 
```

中心班：

```
@interface ActionsCollection ()
@property(nonatomic, weak)UINavigationController *NavCtrl; // I do this since I dont seem to be able to pass the self.NavigationController on to the buttons action selector (se bellow).
@end 
```

setGenericBackButton 可以：

```
-(UIBarButtonItem *)setGenericBackButton:(UINavigationController *)NavContrl{
     _NavCtrl = NavContrl; // so that I can get a the global (to the class) UINavigationController being reached from -(IBAction)backButtonAction (see bellow)

     UIButton* myBackButton = [ButtonMaker BtnTypeBack]; //just returns a styled btn

//this is where it starts to fail - I want to pass the 'NavContrl' on with the selector bunt havnt figured out how (thats why the global variable '_NavContrl'
    [myBackButton addTarget:self action:@selector(backButtonAction) forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem* BackBtnItem = [[UIBarButtonItem alloc]initWithCustomView:myBackButton];

} 
```

backButtonAction 会：

```
-(IBAction)backButtonAction{
     [_NavCtrl popViewControllerAnimated:TRUE];
} 
```

我是否懒于尝试保存尝试做不可能的代码行，或者这实际上可以做到吗？我很乐意更好地解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:37:38.423

好的程序员是懒惰的。

也就是说，如果您正确设置 UINavigationController，它将添加自己的后退按钮并为您执行此操作。你不应该需要任何代码`[self.navigationController pushViewController:someViewController animated:YES];`

# deployment - apt::source 和阶段的木偶问题

> ID：15384733
> 
> 赞同：8
> 
> 时间：2013-03-13T12:00:27.380
> 
> 标签：deployment, puppet

我已经完成了本地 Puppet 安装：

```
# puppet module install puppetlabs/apt  
Preparing to install into /etc/puppet/modules ...            
Downloading from http://forge.puppetlabs.com ...             
Installing -- do not interrupt ...                           
/etc/puppet/modules                                          
└─┬ puppetlabs-apt (v1.1.0)                                  
  └── puppetlabs-stdlib (v3.2.0) 
```

我还有以下`nodes.pp`要申请的：

```
node default {                                                              
    include stdlib                                                      

    class {'apt':
            always_apt_update => true,
            disable_keys => true,
            stage => 'setup'
    }
    ->
    apt::source { "cassandra":
            location => "http://debian.datastax.com/community",
            release => "stable",
            repos => "main",
            key => "B999A372",
            key_source => "http://debian.datastax.com/debian/repo_key", 
            include_src => false
    }
} 
```

当我尝试应用它时，我得到：

```
# puppet apply nodes.pp
err: Could not apply complete catalog: Found 1 dependency cycle:
(Anchor[apt::key B999A372 present] => Apt::Key[Add key: B999A372 from Apt::Source cassandra] => File[cassandra.list] => Exec[apt_update] => Class[Apt::Update] => Stage[setup] => Stage[main] => Class[Main] => Node[default] => Apt::Source[cassandra] => File[cassandra.list])
Try the '--graph' option and opening the resulting '.dot' file in OmniGraffle or GraphViz
notice: Finished catalog run in 0.12 seconds 
```

问题似乎出在`stage => 'setup'`参数上，但我想了解发生了什么以及我能做些什么来解决这个问题（我继承了一个大型 puppet 代码库 - 以上只是一个概念证明 - 它使用`stage`我还不想删除它，因为我不太了解 Puppet 的内部工作原理）。

**更新#1**

尝试将`apt::source`步骤移至`setup`舞台，如下所示：

```
class cassandra {
     apt::source { "cassandra":                                               
        location => "http://debian.datastax.com/community",              
        release => "stable",                                             
        repos => "main",                                                 
        key => "B999A372",                                               
        key_source => "http://debian.datastax.com/debian/repo_key",      
        include_src => false                                             
    }                                                                        
}                                                                           

node default {                                                               
    include stdlib                                                           

    class {'apt':                                                            
        always_apt_update => true,                                       
        disable_keys => true,
        stage => setup
    }                                                                        
    ->                                                                       
    class {'cassandra': stage => setup}
} 
```

但是，这并不能解决问题，只会产生另一个依赖循环。

```
err: Could not apply complete catalog: Found 1 dependency cycle:
(Anchor[apt::key B999A372 present] => Apt::Key[Add key: B999A372 from Apt::Source cassandra] => File[cassandra.list] => Exec[apt_update] => Class[Apt::Update] => Anchor[apt::update] => Class[Apt] => Class[Cassandra] => Apt::Source[cassandra] => File[cassandra.list]) 
```

完整的调试输出[在这里](http://pastebin.com/vHFqpb2d)。依赖图是![这个](../Images/e774478c198f223aa963f052532715ad.png)

所以在我看来，试图以“自然”的方式（通过`->`操作员）强制执行操作顺序会导致这种奇怪的依赖循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:06:56.877

基本上看起来你的 apt::source 指定了一个键。apt::key 的 apt::source 声明指出 apt::key 需要在添加文件 cassandra.list 之前进行处理。这是有道理的吧？

但随后 cassandra 文件资源有一个 Exec['apt_update'] 的通知，它存在于 apt::update 中。它是一个仅刷新包，仅由正在执行并通知它的 cassandra 文件资源触发。

Exec['apt_update'] 位于 apt::update 内部，因此需要对其进行处理才能使 Class['apt::update'] 被视为已处理。

现在实际问题发生在 apt 声明中。您已经使用元参数 stage => 'setup' 声明了 apt（apt 模块的初始化清单）。您会发现 apt 实际上包含 apt::update，这很好 - 但它还定义了一个锚点 'apt::update'，它*需要*类 apt::update。由于 apt 对 apt::update 的依赖，我们现在在设置阶段也隐含了对 apt::update 的依赖。

主要阶段取决于设置阶段，任何没有给出阶段的东西都会自动选择主要阶段 - 因此 File['cassandra.list'] 也是主要阶段资源（但需要在 apt::update 之前发生，即隐含的设置阶段资源！）

我希望这会有所帮助，它看起来很复杂——尤其是对于锚点。

# c# - asp.net 从代码隐藏中手动添加一行

> ID：15384736
> 
> 赞同：2
> 
> 时间：2013-03-13T12:00:48.770
> 
> 标签：c#, asp.net, sql, gridview, insert

如何使用 gridview 控件手动将行/插入添加到数据库中？

在将数据发送到 INSERT sql 查询之前，我需要先对用户输入执行一些计算。

有一种`gridview.Insert()`方法，但它不带任何参数。

如何将来自文本框、下拉列表等的参数传递给它，然后运行 ​​sql 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:17:27.530

在绑定之前尝试将其添加到数据表中：

```
DataRow dr = dt.NewRow();
// set dr fields here
dt.Rows.Add(dr); 
```

# php - 没有从php while循环打印的变量

> ID：15384738
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:00:53.403
> 
> 标签：php, mysql

我有一个 html 表单中的下拉菜单，它调用下面包含的 php 文件，它正在进入 while 循环并从回声判断它似乎正在正确执行，但它没有返回信息。

首先，我只需要列出的书籍专栏，一旦我能做到这一点，我就可以增加复杂性。我的最终目标是列出书籍、作者、流派和电子邮件。

该表的格式为：id-book-author-genre-email

这是我的PHP代码：

```
 include('definitions.php');

 $con=mysqli_connect(DB_HOST,DB_USER,DB_PASS,DB_NAME);
 // Check connection
 if (mysqli_connect_errno())
   {
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
   }
 $namequery="SELECT book,author,genre,email FROM book WHERE book = ?";
 $namestmt = mysqli_prepare($con, $namequery);

 mysqli_stmt_bind_param($namestmt, "s", $_POST['select1']);
 var_dump($_POST);

 mysqli_stmt_execute($namestmt);

 /* bind variables to prepared statement */
     mysqli_stmt_bind_result($namestmt, $name, $author, $genre, $email);

 while(mysqli_stmt_fetch($namestmt))
   {
   printf("%s %s %s %s\n", $name, $author, $genre, $email);
   echo "<br>";
   echo "got as far as the while loop";
   }

   /* close statement */
     mysqli_stmt_close($namestmt);

 /* close connection */
 mysqli_close($con);

?> 
```

这将返回： array(1) { ["select1"]=> &string(4) "book" } (,) 书籍作者流派电子邮件到达了 while 循环 (,) 书籍作者流派电子邮件到达了 while循环（，）书籍作者流派电子邮件一直到while循环

有什么建议我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:05:10.283

您不将结果绑定到任何变量。看看[http://php.net/manual/en/mysqli-stmt.fetch.php](http://php.net/manual/en/mysqli-stmt.fetch.php)

# matlab - matlab中多边形的缓冲区

> ID：15384741
> 
> 赞同：1
> 
> 时间：2013-03-13T12:01:01.807
> 
> 标签：matlab, buffer, polygon

我想在 matlab 中为给定的简单多边形（无凸面，无孔）创建一个缓冲区，而不使用 bufferm 函数。

```
vx = [ 2 4 6 4 2]; %  polygon vertices
vy = [ 2 4 3 2 2];
figure;
% axis equal;
plot([vx vx(1)],[vy vy(1)],'r');
hold on;
vx = vx(end:-1:1); % Vertices in cw direction
vy = vy(end:-1:1);
xctr = mean(vx(1:end-1)); % find centroid of polygon
yctr = mean(vy(1:end-1));
sf = 2; % scale factor to extend polygon
rx = vx - xctr; % find radius
ry = vy - yctr;
angle = atand(ry/rx); % find angle
new_vx = xctr + rx * cosd(angle) * sf; % find new vertex at a distance of sf
new_vy = yctr + ry * sind(angle) * sf;
plot([new_vx new_vx(1)],[new_vy new_vy(1)], 'g'); 
```

但它绘制错误。任何想法请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:35:27.473

改变角度为

```
angle = atan2(ry,rx); 
```

new_vx 到

```
new_vx = xctr + abs(rx) .* cos(angle) * sf; 
```

和 new_vy 要么

```
new_vy = yctr + abs(ry) .* sin(angle) * sf; 
```

或者

```
new_vy = yctr + ry * sf; 
```

取决于您希望它的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:45:04.793

看来您的代码有几个问题。

首先是角度计算。Atand 函数返回的结果在 -90 到 90 的范围内。因此，您将遇到第二象限和第三象限的点问题。最好使用如下结构：

```
ang = angle(rx + ry*1i) 
```

错误使用 sf 的第二个问题。你的建筑

```
new_vx = xctr + rx * cosd(angle) * sf; 
```

使用 sf 作为比例因子，但不作为距离。真的，你需要在 rx 和 cosd 之间加上，例如

```
new_vx = xctr + rx + cos(ang) * sf 
```

或者干脆

```
new_vx = vx + sf * cos(ang) 
```

new_vy 也需要同样的修改。

此外，实际缓冲区在多边形的每个顶点附近应该是平滑的。但是，您在代码中没有此选项。

如果要实现平滑，则需要为每个多边形顶点创建两个新顶点并将它们与弧连接。对于入射到多边形顶点的边缘，这些顶点应放置在距原始顶点的距离 sf 上，沿法线向量方向。

# scala - 如何制作右结合中缀运算符？

> ID：15384744
> 
> 赞同：36
> 
> 时间：2013-03-13T12:01:10.627
> 
> 标签：scala, associative, infix-notation

我有一个关联操作`>>`。问题是它的成本线性地取决于它的左操作数的大小。因此，由类似的一系列`n`应用形成的表达式`>>`

```
a >> a >> a >> a >> a >> ... >> a 
```

它在 方面具有二次成本`n`，因为默认情况下中缀运算符是[左关联的](https://en.wikipedia.org/wiki/Associative_property)。如何使其具有右关联性，以使这种表达式的成本保持线性关系`n`？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-13T12:01:10.627

我找到了解决方案。Scala[参考](https://www.scala-lang.org/files/archive/spec/2.12/06-expressions.html#prefix-infix-and-postfix-operations)在第*6.12.3 节中缀操作*中说：

> 运算符的*关联*性由运算符的最后一个字符决定。以冒号 ':' 结尾的运算符是右结合的。所有其他运算符都是左结合的。

因此重命名`>>`为`>>:`.

我花了一些时间才意识到，虽然`a >> b`是脱糖成的`a.>>(b)`，但`a >>: b`也是脱糖成的`b.>>:(a)`。所以我不得不定义`>>:`为

```
def >>:(x: T): T = x >> this 
```

# c++ - 指向成员对象的成员指针和声明顺序

> ID：15384746
> 
> 赞同：1
> 
> 时间：2013-03-13T12:01:11.540
> 
> 标签：c++, pointers, inheritance, member

```
#include <iostream>

class FooParent
{
    public:
        FooParent(int* new_p_bar)
        {
            p_bar = new_p_bar;
        }
    public:
        int* p_bar;
};

class FooChild : public FooParent
{
    public:
        int bar;
    public:
        FooChild(int new_x)
        :FooParent(&bar)
        ,bar(new_x) \\ point of concern
            {} 
};

int main()
{ 
    FooChild foo(8);
    std::cout << foo.bar << std::endl;

} 
```

上面的示例按我的意愿工作。即将指针链接`p_bar`到`bar`. 但是，我担心的是我指向一个尚未调用其构造函数的成员。

这段代码是否有效，或者标准对此有什么要说的。如果不是还有什么选择。

*注意*：在我的应用程序`bar`中是一个对象`Bar`（不是`int`），这有什么影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:21:08.217

如果您将指针传递给成员，则没有未定义的行为，直到您尝试取消引用它。如果您想调用构造函数，请查看`base-from-member`习语[http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Base-from-Member](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Base-from-Member)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:40:40.727

看这个：

```
class FooParent {
    public:
        FooParent(int* new_p_bar)
        {
            p_bar = new_p_bar;
            *p_bar = 99; // this has no sense
        }
        void set99() {
            *p_bar = 99; // this - has
        }
    public:
        int* p_bar;
};

class FooChild : public FooParent
{
    public:
        int bar;
    public:
        FooChild(int new_x)
        :FooParent(&bar)
        ,bar(new_x) // point of concern
            {} 
};

int main()
{ 
    FooChild foo( 42 );
    std::cout << foo.bar << std::endl;
    foo.set99();
    std::cout << foo.bar << std::endl;
} 
```

[轻量级](http://liveworkspace.org/code/42dhJ3%244)_

我的意思是，如果`FooParent`的构造函数**只存储一个指向**外部的指针`int`（或`Bar`- 没关系），那么就不会有问题。

另一方面，如果您要提供一份**to**`bar` -`FooParent`像这样

```
class FooParent
{
    public:
        FooParent(Bar new_p_bar)
        {
            p_bar = new_p_bar;
        }
        void set99() {
            p_bar = 99; // this - has
        }
    public:
        Bar p_bar;
};

class FooChild : public FooParent
{
    public:
        Bar bar;
    public:
        FooChild(Bar new_x)
        :FooParent(bar)
        ,bar(new_x) // point of concern
            {} 
};

int main()
{ 
    FooChild foo( 42 );
    std::cout << foo.bar << std::endl;
    foo.set99();
    std::cout << foo.bar << std::endl;
} 
```

[轻量级](http://liveworkspace.org/code/42dhJ3%245)_

这行不通。即使`Bar`会有一个复制 c-tor 或/和赋值运算符

# c++ - 使用 std::unique_ptr 使用自定义删除器作为智能 void*

> ID：15384748
> 
> 赞同：11
> 
> 时间：2013-03-13T12:01:13.200
> 
> 标签：c++, c++11, unique-ptr

我有一个通用类`myClass`，有时需要根据使用情况存储额外的状态信息。这通常使用 a 完成`void*`，但我想知道是否可以使用 a`std::unique_ptr<void, void(*)(void*)>`以便在类实例被破坏时自动释放内存。问题是我需要使用自定义删除器，因为删除 void* 会导致未定义的行为。

有没有办法默认构造 a `std::unique_ptr<void, void(*)(void*)>`，这样我就不用先用虚拟删除器构造它，然后在使用`void*`状态结构时设置真正的删除器？或者有没有更好的方法在类中存储状态信息？

这是一些示例代码：

```
void dummy_deleter(void*) { }

class myClass
{
public:
    myClass() : m_extraData(nullptr, &dummy_deleter) { }
    // Other functions and members
private:
    std::unique_ptr<void, void(*)(void*)> m_extraData;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T12:04:25.783

存储额外信息的一种更直观的方法可能是使用带有虚拟析构函数的接口 IAdditionalData。无论您拥有什么数据结构，都将从 IAdditionalData 继承并存储在`std::unique_ptr<IAdditionalData>`.

这也提供了更多的类型安全性，因为您将在 IAdditionalData 和实际类型之间进行静态转换，而不是在`void *`任何数据类型之间进行 reinterpret_cast。

# limit - Couchbase 存储桶中的文档数量是否有限制？

> ID：15384750
> 
> 赞同：1
> 
> 时间：2013-03-13T12:01:17.620
> 
> 标签：limit, document, couchbase

一个桶里的文件有没有限制？

我们有一个加载 180 万个文档的场景，但成功存储的文件最多只有 150 万。

另一个问题，当我们编写一个基本视图时，它只产生 1535 个结果，尽管可能有更多结果（几乎所有）。

通过 .net 客户端，我们也验证了 GetView 仅返回 1535。

再次，对文档数量和查看结果有任何限制吗？

如果可能的话，请用任何资源、链接指导我们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:46:18.243

Couchbase 对文档的数量没有任何限制（只要您有足够的内存用于文档的键和磁盘）

看起来您的问题不是“大小”问题，而是您使用视图的方式。

您能否确认我们在“生产”中发布您的观点？

如果您仍在开发中使用该视图，您将只有文档的一个子集，除非您使用 full_set=true 执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:08:28.463

您是否已验证文档已写入磁盘或该队列未处理？如果没有，它们将不会被索引。

> “一旦文档被持久化到磁盘，文档就可以被视图机制索引。” - [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-datastore-indexseq.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-datastore-indexseq.html)

您是否尝试过针对视图执行查询并控制`Stale`标志？

```
var view = client.GetView("foo","bar").Stale(StaleMode.False); 
```

更多信息：

*   [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-stale.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-stale.html)
*   [http://www.couchbase.com/docs/couchbase-devguide-2.0/creating-views-from-sdk.html](http://www.couchbase.com/docs/couchbase-devguide-2.0/creating-views-from-sdk.html)

# android - 如何降低Android中的麦克风灵敏度？

> ID：15384759
> 
> 赞同：1
> 
> 时间：2013-03-13T12:01:34.763
> 
> 标签：android

我正在使用 MediaRecord 的 getMaxAmplitude() 函数来获取振幅。

[http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude()](http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude%28%29)

但是，我发现它非常敏感。那就是说一点点声音会引起很大的振幅，达到最大值32767。有兄弟知道吗？

# asp.net-mvc-4 - MVC4 Elmah 位置路径无法识别

> ID：15384764
> 
> 赞同：2
> 
> 时间：2013-03-13T12:01:42.600
> 
> 标签：asp.net-mvc-4, elmah, elmah.mvc

对于我的 MVC4 应用程序，我使用 NUGET 将 ELMAH 加载到我的应用程序中。但在 web.config 中，我收到以下错误消息：

> 位置元素未使用；在 elmah.axd 中找不到项目项。

我是否打算创建一个具有此名称的文件？我该如何解决？

```
<location path="elmah.axd" inheritInChildApplications="false">
    <system.web>
      <httpHandlers>
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      </httpHandlers>

        See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for 
        more information on using ASP.NET authorization securing ELMAH.

      <authorization>
        <allow roles="admin" />
        <deny users="*" />  
      </authorization>

    </system.web>
    <system.webServer>
      <handlers>
        <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
      </handlers>
    </system.webServer>
  </location> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T23:33:07.447

如果您使用 Elmah.MVC.dll，则无需为 elmah.axd 添加处理程序。Elmah.MVC.dll 包含一个控制器，使您可以访问[http://www.yourwebsite.com/elmah](http://www.yourwebsite.com/elmah)上的日志。这在以下位置进行了完整描述：

[https://github.com/alexanderbeletsky/elmah.mvc](https://github.com/alexanderbeletsky/elmah.mvc)

我推荐这种方法，因为它比 elmah.axd 处理程序更易于配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:01:35.020

我通过 NuGet 安装了 Elmah.MVC。

大多数 web.config 设置是由安装自动添加的。

不得不补充：

```
<httpHandlers>
      <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
</httpHandlers> 
```

和：

```
<handlers>
      <add name="Elmah" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
</handlers> 
```

然后在配置的最底部会有一个空白部分，所以我将其修改为：

```
<elmah>
    <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data" />
</elmah> 
```

并记录到 XML 文件有效！

请注意，如果不合适，您可能需要调整 logPath。

吉娜！VS2012，MVC4，所有更新/sp应用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:56:22.057

您需要在 RegisterRoutes 中添加以下内容：

routes.IgnoreRoute("elmah.axd/{*pathInfo}");

# qt - 锁屏-qml

> ID：15384773
> 
> 赞同：0
> 
> 时间：2013-03-13T12:02:03.430
> 
> 标签：qt, qml

从过去 1 周开始，我正在尝试解决此问题。我无法锁定我创建的任何页面的屏幕。我试着把计时器。但我不知道我应该如何检测用户是否不活跃。例如 ex1.qml

```
rectangle{
id:ex1
color:"red"
keys.onReturnPressed:{
ex2.visble=true;
visible=false;
}
rectangle {
id:ex2
color:"blue"
keys.onReturnPressed:{
visible=false;
ex1.visible=true;
}
}
} 
```

如果用户有一段时间没有活动，那么应用程序应该要求输入密码来解锁它。如果用户在 2 分钟内没有按 Enter 键，那么它应该锁定屏幕并要求输入密码。怎么做？？？

我在等待你的回答。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:03:26.673

你可以尝试这样的事情：

```
FocusScope{
    height: 500;
    width:500;
    focus: true;
    Rectangle {
        id:ex1
        color:"red"
        focus: ex1.visible;
        visible:true;
        anchors.fill: parent;
        Keys.onEnterPressed: {
            lockTimer.restart();
        }
        Keys.onReturnPressed:{
            lockTimer.restart();
        }
    }
    Rectangle {
        id:ex2
        color:"blue";
        focus: !ex1.visible;
        visible: !ex1.visible;
        anchors.fill: parent;
        Keys.onReturnPressed:{
            password.opacity=1;
        }
        Text {
            id: password;
            anchors.centerIn: parent
            opacity: 0;
            text: "Enter Password"
        }
    }

Timer{
    id:lockTimer;
    repeat: false;
    onTriggered: {
        ex2.visible=true;
        ex1.visible=false;
    }
}

function setTimer(val){
    lockTimer.interval=60000*val;
}

Component.onCompleted: {
    setTimer(2);
    lockTimer.start();
} 
```

}

# mysql - 如何从 mysql 数据库中提取数据并使用 D3.JS 进行可视化？

> ID：15384774
> 
> 赞同：8
> 
> 时间：2013-03-13T12:02:05.587
> 
> 标签：mysql, json, d3.js, visualization

我有一个`MySQL`要在其中可视化的数据库`D3.JS`。为了做到这一点，首先我想要格式化`parse`数据`JSON`，然后编写一个基本代码，从数据库中提取数据并使用`D3.JS`. 我环顾四周，但找不到我想要的，因为我是新手`D3.JS`。

我怎样才能做到这一点？任何帮助或线索表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T17:07:10.227

以下是一个 php 脚本，您应该可以将其保存为文件（假设您将其称为“getdata.php”），可以从您的 HTML 文件中访问，其中包含您的 D3 代码。调用时，它将以 json 格式从您的 MySQL 数据库返回数据（只要数据库服务器不在您的域之外）；

```
<?php
    $username = "******"; 
    $password = "******";   
    $host = "******";
    $database="***dbase_name***";

    $server = mysql_connect($host, $user, $password);
    $connection = mysql_select_db($database, $server);

    $myquery = "
    query here
    ";

    $query = mysql_query($myquery);

    if ( ! $query ) {
        echo mysql_error();
        die;
    }

    $data = array();

    for ($x = 0; $x < mysql_num_rows($query); $x++) {
        $data[] = mysql_fetch_assoc($query);
    }

    echo json_encode($data);     

    mysql_close($server);
?> 
```

显然，您需要为用户名、密码、主机和数据库输入适当的详细信息。您还需要为您的数据包含一个适当的查询，以便它返回您正在寻找的内容。类似的东西（这只是一个猜测）；

```
SELECT `dateTimeTaken`, `reading` FROM `tablename` 
```

这将从一个名为and`tablename`的列中返回一个时间戳和值的列表。然后，当您读取您的 json 文件时，您将对您将在 json 中读取的代码使用以下语法；`dateTimeTaken``reading`

```
d3.json("getdata.php", function(error, data) { 
```

希望这接近您正在寻找的内容。我已经在本地对其进行了测试，这一切似乎都有效..

我已经整理了一篇文章来介绍简单 WAMP 服务器的本地安装并在此处从 d3.js 对 MySQL 数据库设置查询[http://www.d3noob.org/2013/02/using-mysql-database -as-source-of-data.html](http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html)

[这与在 d3 可视化中访问 MySQL 数据库的](https://stackoverflow.com/questions/14679610/accessing-mysql-database-in-d3-visualization/14683311#14683311)情况几乎相同

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T13:52:58.913

简短的回答：Web 服务。

基本上，您会想要创建一个 Web 服务，该服务将返回 json 数据（例如）以连接到`d3.json()`调用。

我建议您使用 Python 快速做一些扩展`SimpleHTTPServer`，或者使用 web 服务框架，例如[web2py](http://web2py.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:05:37.087

AFAIK 没有任何库允许 javascript 直接连接到 MySQL 数据库。而是考虑通过 Web 服务公开您的数据（使用任意数量的服务器端技术：ASP.Net、PHP、Ruby on Rails 等）并在响应中将您的数据序列化为 JSON

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-13T19:23:19.280

我自己遇到了json_encode的问题，最后我写了自己的代码而不是json_encode。只需要设置 sql 和 yoru 连接信息。希望你觉得它有用。

```
$conn = new mysqli(DB_Host, DB_User, DB_Password, DB_Name) or die("Connection failed: " . $conn->connect_error);
$sql = "select  AID as id, deDate_Value as date, nterTime AS counter 
        from xxxx";

//Get the Date and store it in array
$records = array();
if ( $result=mysqli_query($conn,$sql) )
    while ( $obj=mysqli_fetch_object($result) )
        $records[] = $obj;

//echo in json format on screen       
echo "[";
$comma_1 = "";
foreach($records as $obj)
{
    echo $comma_1."{";
    $comma_2 = "";
    foreach($obj as $key => $value)
    {
        echo $comma_2.'"'.$key."\": \"". $value . "\"";
        $comma_2 = ", ";
    }
    echo "}";
    $comma_1 = ", \n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-06T01:36:37.627

为了让 d3.json 工作，我必须用以下方式调用它（我的 PHP 文件生成 JSON 数据）：

```
d3.json("InventoryData.php").then(function(data){
  console.log(data);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-27T15:18:16.593

您可以使用更流行的 jQuery，如下所示：

```
$.getJSON( "ajax/test.json", function( data ) {
console.log(data);
} 
```

# html - 实体中的“-”是什么意思？

> ID：15384781
> 
> 赞同：1
> 
> 时间：2013-03-13T12:02:16.453
> 
> 标签：html

`-`在一个`-&nbsp;`实体中是什么意思？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T12:03:56.517

没有。它不是实体的一部分。它只是出现在实体之前的*连字符。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T12:04:09.190

没有什么特别的含义，只是一个`dash`要显示的前缀和后缀的空格

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T12:05:05.490

当您运行代码时，它没有任何意义：

```
 &nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp; 
```

你会得到像

 - - - - - - - - - - - 

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T12:06:00.413

实体以外部的一切开头`&`和结尾`;`都按原样解释。所以你只有一个破折号，然后是一个非中断空间。

# android - 升级到 SDK 21.1 和 ADT 21.1 后的 java.lang.ClassNotFoundException

> ID：15384787
> 
> 赞同：0
> 
> 时间：2013-03-13T12:02:31.600
> 
> 标签：android

我最近用 ADT 21.1 升级了我的 Eclipse。

我能够完美地以调试方式运行应用程序，但是在导出 apk 并将其安装在我的智能手机上后，它总是崩溃，并出现以下错误：

```
java.lang.RuntimeException: Unable to instantiate application 
com.tapcrowd.app.TCApplication: java.lang.ClassNotFoundException: com.tapcrowd.app.TCApplication in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/mnt/asec/com.tapcrowd.ecommercebrasil-1/pkg.apk]
at android.app.LoadedApk.makeApplication(LoadedApk.java:466)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3264)
at android.app.ActivityThread.access$2200(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.tapcrowd.app.TCApplication in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/mnt/asec/com.tapcrowd.ecommercebrasil-1/pkg.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newApplication(Instrumentation.java:942)
at android.app.LoadedApk.makeApplication(LoadedApk.java:461)
... 11 more 
```

清单中正确引用了 TCApplication。

我尝试通过将外部库放在 libs 文件夹中来添加外部库，删除和添加库项目但没有成功。

我怎样才能防止崩溃？

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tapcrowd.ecommercebrasil"
    android:installLocation="auto"
    android:versionCode="2"
    android:versionName="1.0.1" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.FLASHLIGHT" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.SET_DEBUG_APP" />
    <uses-permission android:name="android.permission.CALL_PHONE" />

    <!-- BEGIN GCM -->
    <permission
        android:name="com.tapcrowd.ecommercebrasil.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.tapcrowd.ecommercebrasil.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.VIBRATE" />

    <!-- END GCM -->

    <uses-feature
        android:name="android.hardware.telephony"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.autofocus"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location.gps"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location"
        android:required="false" />

    <application
        android:name="com.tapcrowd.app.TCApplication"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <uses-library android:name="com.google.android.maps" />

        <service android:name="com.tapcrowd.app.service.UpdateService" />
        <service android:name=".GCMIntentService" />

        <activity
            android:name="com.tapcrowd.app.Splash"
            android:label="@string/app_name"
            android:launchMode="singleInstance"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

          ...
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T13:39:07.610

我通过完全重新安装 eclipse 和 android SDK 来修复它

# ruby-on-rails - 集成测试中的会话哈希名称错误

> ID：15384788
> 
> 赞同：1
> 
> 时间：2013-03-13T12:02:35.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, minitest

我正在尝试使用 minitest 两种控制器方法进行测试：

```
class CurrenciesController < InheritedResources::Base

  def mark_refresh
    session[:refreshable] = true
    redirect_to currencies_url
  end

  def unmark_refresh
    session[:refreshable] = false
    redirect_to currencies_url
  end
end 
```

我的测试：

```
require "minitest_helper"

describe "Currencies integration" do

  it "should auto refresh" do
    visit currencies_path
    click_on "Auto refresh"
    session[:refreshable].must_equal true
  end

  it "should turn off auto refresh" do
    session[:refreshable] = true
    visit currencies_path
    click_on "Auto refresh"
    session[:refreshable].must_equal false
  end 
```

但我得到*未定义的局部变量或方法 `session'*。会话哈希必须在测试中以某种方式初始化？我正在使用导轨 3.2.12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:10:42.023

我了解到，在集成测试中不应测试会话哈希，并且默认情况下不会在那里添加它。这个[问题](https://stackoverflow.com/questions/11342355/session-available-in-some-rspec-files-and-not-others-how-come)对弄清楚这一点非常有帮助。

# java - Hibernate/Oracle：如何在插入语句而不是两个查询中执行序列

> ID：15384789
> 
> 赞同：4
> 
> 时间：2013-03-13T12:02:36.563
> 
> 标签：java, hibernate, hibernate-mapping

我来自 jdbc 背景，我决定自学使用hibernate。所以我做了一个有序列的表：

```
CREATE TABLE TST_PERSON(
ID NUMBER,
NAME VARCHAR(30),
SURNAME VARCHAR(30)
);

CREATE SEQUENCE TST_PERSON_SEQ MINVALUE 1 MAXVALUE 999999999999999999999999999 
INCREMENT BY 1 START WITH 1000 CACHE 20 NOORDER  NOCYCLE ; 
```

和我的映射java代码：

```
@Entity
@Table(name="TST_PERSON")
public class Person {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO,generator="pers_seq")
    @SequenceGenerator(name="pers_seq",sequenceName="TST_PERSON_SEQ")
    private Long id;

    @Column(name="NAME")
    private String name;

    @Column(name="SURNAME")
    private String surname;
    ... getters and setters ...
} 
```

我的休眠配置是：

```
 <?xml version='1.0' encoding='utf-8'?>
    <!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

    <hibernate-configuration>
        <session-factory>
            <property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
            <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:sid</property>
            <property name="hibernate.connection.username">root</property>
            <property name="hibernate.connection.password">root</property>
            <property name="hibernate.connection.pool_size">10</property>
            <property name="show_sql">true</property>
            <property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>
            <property name="hibernate.current_session_context_class">thread</property>
            <mapping class="com.domain.Person"/>
        </session-factory>
    </hibernate-configuration> 
```

但是当我在调用 session.save 时查看 Hibernate 日志生成的 SQL 时：

```
Hibernate: select TST_PERSON_SEQ.nextval from dual
Hibernate: insert into TST_PERSON (NAME, SURNAME, id) values (?, ?, ?) 
```

我认为可能有一些缓存原因，但是当我尝试通过循环保存时，我得到了相同的输出。

所以问题是我如何让休眠将序列作为插入语句的一部分包含在内（这是我打算发生的）。就版本而言，我使用的是休眠 4.1.8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:51:13.987

这实际上是不可能的。我们举一个简单的例子：

```
@SequenceGenerator(name="pers_seq",sequenceName="TST_PERSON_SEQ",allocationSize=10) 
```

分配大小相当于“INCREMENT BY 10”。如果您使用插入语句重新组合 ID 检索查询，您将必须检测何时应该从数据库中检索第 10 个 ID (TST_PERSON_SEQ.nextval)，而不是插入。

此外，插入查询批处理发生在同一张表上的语句上。

如果您想节省一些 I/O，请设置更高的 allocationSize 并使用 JDBC 批处理模式（+ order_inserts 属性最终设置为 true）。这样一来，对于设置为 10 的 allocationSize，每 10 次插入都会有一个 ID 检索查询。

# mysql - 使用三个表计算行数

> ID：15384791
> 
> 赞同：0
> 
> 时间：2013-03-13T12:02:37.810
> 
> 标签：mysql, join

我有三个 mysql 数据库表作为

```
 1) websites
+-----+--------------------+
|  id |website             |
+-----+--------------------+
|   1 | http://abcd.com    |
|   2 | http://xyz.com     |
|   3 | http://pqrs.com    | 
+-----+--------------------+

 2) pages
+-----+---------------------------------------+
|  id |page                                   |
+-----+---------------------------------------+
|   1 | http://abcd.com/index.php             |
|   2 | http://abcd.com/contact.php           |
|   3 | http://xyz.com /index.php             | 
|   4 | http://pqrs.com /index.php            |
+-----+---------------------------------------+

 3) statistics
+-----+-------------------+
|  id |page_id | type     |
+-----+-------------------+
|   1 | 1      | AOL      |
|   2 | 1      | YAHOO    |
|   3 | 2      | AOL      | 
|   4 | 3      | YAHOO    |
|   5 | 3      | YAHOO    |
|   6 | 4      | YAHOO    |
+-----+-------------------+ 
```

我希望输出为：

```
+-------------------+--------------------+
|website            | count_hit_by_AOL   | 
+-------------------+--------------------+
|http://abcd.com    |      2             |
|http://xyz.com     |      0             |
|http://pqrs.com    |      0             |
+-------------------+--------------------+ 
```

为了获得这个输出，我正在使用以下 mysql 查询——

```
SELECT
  COUNT(statistics.id) as count_stats,
  websites.website
FROM websites,
  pages,
  statistics
WHERE pages.page LIKE CONCAT(websites.website,'%')
    AND pages.id = statistics.page_id
    and statistics.type LIKE 'AOL%'
GROUP BY websites.website
ORDER BY count_stats DESC 
```

我得到的输出为

```
+-------------------+--------------------+
|website            | count_hit_by_AOL   | 
+-------------------+--------------------+
|http://abcd.com    |      2             |
+-------------------+--------------------+ 
```

如果我做错了什么，请帮助我，因为我是 MYSQL 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:11:37.967

您现有查询的问题是您`INNER JOIN`在表上使用 an ，因此您只会返回匹配的行。

由于您要返回所有`website`行，因此您将需要使用`LEFT JOIN`：

```
SELECT w.website, count(s.id) Total
FROM websites w
LEFT JOIN pages p
  on p.page like CONCAT(w.website,'%')
LEFT JOIN statistics  s
  on p.id = s.page_id
  and s.type like 'AOL%'
group by w.website 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/78c13/7)。结果是：

```
|         WEBSITE | TOTAL |
---------------------------
| http://abcd.com |     2 |
| http://pqrs.com |     0 |
|  http://xyz.com |     0 | 
```

编辑#1，如果你想包括每个网站的总页数，那么你可以使用：

```
SELECT w.website, 
  count(s.id) TotalStats,
  count(p.page) TotalPages
FROM websites w
LEFT JOIN pages p
  on p.page like  CONCAT (w.website,'%')
LEFT JOIN statistics  s
  on p.id = s.page_id
  and s.type like 'AOL%'
group by w.website 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/78c13/9)。这个查询的结果是：

```
|         WEBSITE | TOTALSTATS | TOTALPAGES |
---------------------------------------------
| http://abcd.com |          2 |          2 |
| http://pqrs.com |          0 |          1 |
|  http://xyz.com |          0 |          1 | 
```

# vb.net - VB.Net - 如何创建变体类型的字典？

> ID：15384792
> 
> 赞同：0
> 
> 时间：2013-03-13T12:02:38.647
> 
> 标签：vb.net, dictionary

在 VB6 中可以定义一个字典对象，（通过对脚本库的引用）。在 python 中，对值的类型没有限制（对键类型的限制也很少）。

拥有变体类型字典的 VB.NET (visual basic.net) 方法是什么？

例如

```
d(key1) = "text"
d(key2) = 53
d(key3) = 3.1415
d(key4) = {array...} 
```

?

# php - 计算总小时数

> ID：15384796
> 
> 赞同：1
> 
> 时间：2013-03-13T12:02:49.067
> 
> 标签：php

我在计算总小时数时遇到了一个小问题

我的工作时间是这样的：

```
Day1 - 12:23 Hours
Day2 - 11:43 Hours
Day3 - 10:18 Hours 
```

我怎样才能通过php获得它？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:06:07.983

只需像这样添加它们：

```
$day1hours = "12:23";
$day2hours = "11:43";
$day1 = explode(":", $day1hours);
$day2 = explode(":", $day2hours);

$totalmins = 0;
$totalmins += $day1[0] * 60;
$totalmins += $day1[1];
$totalmins += $day2[0] * 60;
$totalmins += $day2[1];

$hours = $totalmins / 60;
$minutes = $totalmins % 60;

$totalhours = "$hours.$minutes"; 
```

像这样非常复杂，但它只是为了展示这个想法：计算回分钟，将分钟相加，然后计算回小时。

请注意，PHP 对日期和时间有相当广泛的支持。考虑使用：[http ://www.php.net/manual/en/book.datetime.php](http://www.php.net/manual/en/book.datetime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-02T11:46:04.767

**这种技术将给出准确的总小时数和分钟数。当我添加 00:30 和 00:45 时，上面的答案给了我 1.25.15**

```
<?php
$hourMin = array("00:30","00:45"); //an Multiple Hour:Minutes array
$hours = 0;
$mins  = 0;
  foreach($hourMin as $val)
  {
      $explodeHoursMins = explode(':',$val);
      $hours += $explodeHoursMins[0];
      $mins  += $explodeHoursMins[1];
  }

  $minToHours =  date('H:i', mktime(0,$mins)); //Calculate Hours From Minutes
  $explodeMinToHours = explode(':',$minToHours);
  $hours += $explodeMinToHours[0];
  $finalMinutes = $explodeMinToHours[1];
  echo $hours." : ".$finalMinutes;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:16:50.087

如果您使用此函数来计算时间，那么它将起作用

```
function sumTime($initialHour, $finalHour) {
    $h = date('H', strtotime($finalHour));
    $m = date('i', strtotime($finalHour));
    $s = date('s', strtotime($finalHour));
    $tmp = $h." hour ".$m." min ".$s." second";
    $sumHour = $initialHour." + ".$tmp;
    $newTime = date('H:i:s', strtotime($sumHour));
    return $newTime;
 }; 
```

有关更多解释，请参阅此链接：[PHP 中的时间计算](https://stackoverflow.com/questions/12163071/time-calculation-in-php)

# excel - 尝试将多个文本文件的内容合并为电子表格中的每个单元格

> ID：15384798
> 
> 赞同：1
> 
> 时间：2013-03-13T12:02:50.570
> 
> 标签：excel, text, merging-data

本质上：

我有几个 (400) 文本文件，每个文本文件都有一个数字文件名（即 12345.txt）。

每个文本文件都包含一些文本（长描述样式、纯文本段落等）。我想弄清楚是否可以将所有这些文本文件导入电子表格以导出为 CSV。

该工作表将有两列：没有扩展名的文件名（12345），第二列是文件的内容（每个文件一个单元格）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:09:16.417

假设所有这些文件都在同一个文件夹中，并且该文件夹中没有其他 .txt 文件，您可以执行以下操作

## 创建2个批处理文件

for 命令只能导致执行 1 个其他命令，调用第二个批处理文件是一个可以包含所有其他所需命令的命令

**测试.bat**

```
for %%f in (*.txt) do CALL test2.bat "%%f" "results.csv" 
```

**test2.bat**

```
set str=%1
set resultfile=%2
set str=%str:~1,-5%
echo |set /p=%str%;>> %resultfile%
type %1 >> %resultfile%
echo ; >> %resultfile% 
```

## 运行批处理文件

运行第一个批处理文件，所有文件都将放入名为 results.csv 的 csv 中

# git - 如何使用直接提交给 git 的更改来更新 gerrit 存储库？

> ID：15384799
> 
> 赞同：2
> 
> 时间：2013-03-13T12:02:53.110
> 
> 标签：git, repository, sync, gerrit

我目前正在处理一些人正在测试驱动 gerrit 以进行代码审查的情况，但那些尚未使用它的人仍然可以将代码直接推送到远程 git repo。

问题是，gerrit 自己的 repo 当然没有更新所有的变化。我怎样才能让它与 git 同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:40:38.510

Gerrit 目前不支持将上游存储库作为主存储库引用。对此有几个请求，因此用户可以将 Gerrit 放在 Github 前面，但目前不支持。你有几个选择：

1.  切换到 Gerrit，但允许绕过审查。Gerrit 是大师，测试驱动代码审查的人可以这样做，但想要绕过审查的用户可以直接推送到存储库。

2.  设置一些脚本以将 Gerrit 的存储库副本与上游同步。如果存在合并冲突，这将变得棘手，但可能是可行的。

祝你好运！

# java - 在 Java 和 ANTLRWorks 调试器中捕获 ANTLR 的 NoViableAltException

> ID：15384800
> 
> 赞同：2
> 
> 时间：2013-03-13T12:02:55.473
> 
> 标签：java, antlr

考虑我们尝试将一些不正确的输入文本提供给一些语法（例如，包含一些未知标记的文本）。在`ANTLRWorks`解释过程中，我们将`NoViableAltException`在图中看到。

**UPD：**出现此异常有两种情况：

1) 意外使用了一些已知令牌，在这种情况下，我们将收到类似`line 5:36 no viable alternative at input ','`

2) 使用未知的令牌类型。例如，语法对以符号开头的标记一无所知`@`。我们正在尝试将带有此类标记的文本提供给我们的语法。

不幸的是，在情况 (2)中，调试器和生成的 Java 代码都**没有抛出这个异常；**`ANTLRWorks`但它只在`ANTLRWorks`解释器的结果图中看到。

我还尝试将以下标准代码添加到我的语法中：

```
@parser::members {
    private IErrorReporter errorReporter = null;
    public void setErrorReporter(IErrorReporter errorReporter) {
        this.errorReporter = errorReporter;
    }
    public void emitErrorMessage(String msg) {
        errorReporter.reportError(msg);
    }
}
@lexer::members {
    ... the same code as above ...
} 
```

这种构造成功地捕获了类型 (1) 的解析错误（例如，关于意外使用令牌的错误：）`line 5:36 no viable alternative at input ','`。但是如果输入不可行且带有未知标记，解析器只会`children == null`在顶部`CommonTree`对象中生成，而不会报告任何错误。

我正在使用`antlr 3.5`.

问题：是否有可能`NoViableAltException`在生成的 Java 代码中捕捉到所描述的情况以及如何捕捉？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:37:49.777

好吧，[280Z28](https://stackoverflow.com/users/138304/280z28)对我这个问题的[第二部分](https://stackoverflow.com/questions/15385650/outofmemoryerror-when-parsing-incorrect-input-in-antlr)给出的[这个答案](https://stackoverflow.com/a/15386679/1479414)很好地解决了这两个问题。所以，这是正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:15:39.107

您需要添加以下内容作为词法分析器中的*最后一条*规则。它将为无效字符创建一个令牌并将其发送到解析器，在那里将正确报告错误。

```
ANYCHAR : . ; 
```

# java - tesseract不使用java读取具有背景图像的文本和数字

> ID：15384801
> 
> 赞同：2
> 
> 时间：2013-03-13T12:03:01.597
> 
> 标签：java, ocr, tesseract

我尝试使用 tess4j(1.1) 为 tesseract 读取图像，但无法读取具有背景图像的数字/字符，因此我对图像应用阈值处理并将图像更改为黑白，但问题仍然相同。

所以我想知道，

> 是否可以通过使用 tess4j(tesserarct) 读取具有背景颜色或背景图像的字符/数字。如果可能，请尝试提供一些线索。
> 
> 或者
> 
> 是否可以通过对字符识别的训练数据进行一些更改来获得结果

对于这种情况，javacv 是唯一可用的选项而不是 tesseract 吗？

我也在寻找神经网络的机会，但似乎需要更多时间。

有什么解决办法吗？

使用 tess4j 的例子是

```
File imageFile = new File("myimage.jpg");

Tesseract instance = Tesseract.getInstance();

String result = instance.doOCR(imageFile);

System.out.println(result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T06:29:31.193

Tesseract 并不是图像处理的最佳方式。

还有其他更好的选择，如神经网络、模板匹配等。

在任何情况下，都需要清理图像背景，因此可以选择 javacv 进行图像背景清理。

而且直到现在 tesseract 还不能识别数字。所以我认为神经网络是图像文本阅读和使用的不错选择，我可以获得大约 60%+ 的准确度结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:27:42.217

尝试使用 Jumio Netswipe SDK 读取信用卡[http://jumio.com/products/netswipe/overview/](http://jumio.com/products/netswipe/overview/)

# sql-server-2008 - 获取 SQL Server 2008 数据库设置列表

> ID：15384804
> 
> 赞同：0
> 
> 时间：2013-03-13T12:03:27.517
> 
> 标签：sql-server-2008, codeigniter

我阅读了很多发布他们的数据库设置的用户，他们看起来像这样：

```
$db['local']['dbdriver'] = 'sqlsrv';  
$db['local']['dbprefix'] = '';  
$db['local']['pconnect'] = FALSE;  
$db['local']['db_debug'] = TRUE;  
$db['local']['cache_on'] = FALSE;  
$db['local']['cachedir'] = '';  
$db['local']['char_set'] = 'utf8';  
$db['local']['dbcollat'] = 'utf8_general_ci';  
$db['local']['swap_pre'] = '';  
$db['local']['autoinit'] = TRUE; 
```

我使用 Sql Server 2008，如何查看我的数据库的这些设置？命令是什么？

# c# - WinRT - 向 XML 添加新项目并拒绝访问

> ID：15384806
> 
> 赞同：0
> 
> 时间：2013-03-13T12:03:33.963
> 
> 标签：c#, windows-8, winrt-xaml

我有一个简单的任务应用程序。我有 taskTextBox、addButton 和 tasksListView，其中显示了任务。我以这种方式将新项目添加到 XML 文件中：

```
 private async void addButton_Click_1(object sender, RoutedEventArgs e)
    {
        try
        {
            var folder = ApplicationData.Current.LocalFolder;
            var file = await folder.GetFileAsync("tasks.xml");
            var readStream = await FileIO.ReadTextAsync(file);
            var writeStream = await file.OpenStreamForWriteAsync();

            XElement xElem = XElement.Parse(readStream);

            xElem.Add(new XElement("Task",
                new XElement("Id", Guid.NewGuid()),
                new XElement("Name", QuickTaskTextBox.Text.ToString())
            ));

            xElem.Save(writeStream);

            taskTextBox.Text = "";
        }
        catch (Exception ex)
        {
            new MessageDialog(ex.Message).ShowAsync();
        }
        finally
        {
            this.Frame.Navigate(typeof(MyTasks));
        }
    } 
```

但是当我在 addButton 上单击时，应用程序会抛出异常访问被拒绝 HRESULT: 0x80070005 (E_ACCESSDENIED)

它是由 this.Frame.Navigate(typeof(MyTasks)); 当我删除此代码时，一切看起来都不错，只有 ListView 不包含我新添加的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:12:45.127

您可能应该更改页面，使其不会导航到自身。

但是，暂时忽略这一点，您还有另一个问题。您永远不会明确关闭您的文件。这意味着如果您的页面导航到自身的速度足够快，那么您尝试打开的文件仍然处于打开状态。这会导致访问被拒绝错误。要解决这个问题，您需要`writeStream`在`using`语句中包装使用 of：

```
var readStream = await FileIO.ReadTextAsync(file);
using (var writeStream = await file.OpenStreamForWriteAsync())
{
    XElement xElem = XElement.Parse(readStream);

    xElem.Add(new XElement("Task",
        new XElement("Id", Guid.NewGuid()),
        new XElement("Name", QuickTaskTextBox.Text.ToString())
    ));

    xElem.Save(writeStream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:13:37.957

根据您的描述，这听起来像是一页（即您的代码出现在页面中`MyTasks`），并且您正在从页面导航回自身？我原以为这本身就是一个问题，但它似乎至少对我来说是一个简单的案例。所以我不确定异常是在哪里引发的，除非你的某些东西`OnNavigatedTo`不喜欢你导航回同一页面的事实。

最重要的是，我建议不要使用这种方法，当你这样做时，你正在拆除并重新创建页面和基础类。

将项目添加到 XML 流时，将元素添加到任务集合中，该集合是`ItemsSource`ListView 控件的。假设这是一个[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，您将看到添加的内容反映而无需执行像重新加载页面这样的破坏性操作（我假设只是重新读取您刚刚编写的文件？）

# android - Cordova 项目上的 Java.lang.NullPointerException

> ID：15384807
> 
> 赞同：0
> 
> 时间：2013-03-13T12:03:40.410
> 
> 标签：android, cordova, eclipse-plugin, applaud

我刚刚安装了 AppLaud Phonegap Eclipse 插件。

但是当我尝试创建一个新项目时，它只是给了我一个 Java.lang.NullPointerException，它没有创建我的资产文件夹。

我错过了文件还是什么？或者我如何查看导致异常的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:07:39.440

没关系。在向导的应用程序信息步骤中选择“创建活动”复选框可以解决此问题。我不知道为什么。

# linux - 如何获得linux中两个文件之间的差异（仅添加）

> ID：15384818
> 
> 赞同：94
> 
> 时间：2013-03-13T12:04:03.830
> 
> 标签：linux, bash, diff

我有两个文件 A1 和 A2（未排序）。A1 是 A2 的早期版本，并且在 A2 中添加了一些行。如何获取添加到 A2 的新行？

注意：我只想添加新行，而不想要 A1 中但在 A2 中删除的行。当我这样做时`diff A1 A2`，我得到了添加和删除，但我只想要添加。

请提出一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2016-02-26T05:11:07.740

以下大部分内容是直接从@TomOnTime 的服务器故障答案复制[而来](https://serverfault.com/a/68786)。底部是对未排序文件的尝试，但该命令在给出差异之前对文件进行排序，因此在许多情况下它不会是所需的。对于未排序文件的格式良好的差异，您可能会发现其他答案更有用（感谢@Fritz 指出这一点）：

显示仅存在于文件 a 中的行：（即从 a 中删除的内容）

```
comm -23 a b 
```

显示仅存在于文件 b 中的行：（即添加到 b 中的内容）

```
comm -13 a b 
```

显示仅存在于一个文件或另一个文件中的行：（但不能同时存在）

```
comm -3 a b | sed 's/^\t//' 
```

（警告：如果文件`a`有以 TAB 开头的行，它（第一个 TAB）将从输出中删除。）

注意：这两个文件都需要进行排序，以便“comm”正常工作。如果它们尚未排序，您应该对它们进行排序：

```
sort <a >a.sorted
sort <b >b.sorted
comm -12 a.sorted b.sorted 
```

如果文件非常长，这可能是一个相当大的负担，因为它需要额外的副本，因此需要两倍的磁盘空间。

编辑：请注意，可以使用进程替换更简洁地编写命令（感谢@phk 的评论）：

```
comm -12 <(sort < a) <(sort < b) 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-03-13T12:07:54.157

`diff`然后`grep`是你想要的编辑类型。

```
diff -u A1 A2 | grep -E "^\+" 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2013-03-13T12:16:50.260

你可以试试这个

```
diff --changed-group-format='%>' --unchanged-group-format='' A1 A2 
```

这些选项记录在`man diff`：

```
 --GTYPE-group-format=GFMT
              format GTYPE input groups with GFMT 
```

和：

```
 LTYPE is 'old', 'new', or 'unchanged'.
              GTYPE is LTYPE or 'changed'. 
```

和：

```
 GFMT (only) may contain:

       %<     lines from FILE1

       %>     lines from FILE2

       [...] 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-08-06T16:52:34.803

[与https://stackoverflow.com/a/15385080/337172](https://stackoverflow.com/a/15385080/337172)类似的方法，但希望更易于理解且易于调整：

```
diff \
  --new-line-format="%L" \
  --old-line-format="" \
  --unchanged-line-format="" \
  A1 A2 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-13T12:09:26.877

简单的方法是使用：

```
sdiff A1 A2 
```

另一种方法是使用`comm`，正如您在[Comparing two unsorted lists in linux 中看到的那样，在第二个文件中列出唯一的](https://stackoverflow.com/questions/11099894/comparing-2-unsorted-lists-in-linux-listing-the-unique-in-the-second-file)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-03-13T12:11:25.947

您可以键入：

```
grep -v -f A1 A2 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-11-21T10:57:01.593

```
git diff path/file.css | grep -E "^\+" | grep -v '+++ b/' | cut -c 2- 
```

*   `grep -E "^\+"`来自以前接受的答案，它是不完整的，因为留下了非来源的东西
*   `grep -v '+++ b'`删除具有更高版本文件名的非源行
*   `cut -c 2-`删除`+`标志列，也可以使用`sed 's/^\+//'`

`comm`或者`sdiff`因为 git 而不是一个选项。

# c# - 如何从方法中返回 DataTable 和 Integer？

> ID：15384823
> 
> 赞同：-1
> 
> 时间：2013-03-13T12:04:19.450
> 
> 标签：c#

从方法返回两个变量的最简单方法是什么？我想返回一个`DataTable`和一个`Integer`。

```
Private SomeType someMethod()
{
   int x=0;
   Datatable y;
   //return x and y
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T12:08:00.993

最终，“最佳”是主观的，取决于您的情况。我们可以提供*选项*，但“最佳”对您来说是本地的。

返回多个值有多种方式；`out`非常高效，但不是很灵活，很多人觉得它很混乱（确实，有些人会说它是一种反模式）。但例如：

```
DataTable Foo(out int val) {
   ...
   val = something
   return dataTable;
} 
```

也许更方便的是声明一个*封装*了这两个值的返回类型：

```
FooResult Foo() {
   ...
   return new FooResult { Table = dataTable, Value = val };
} 
```

where`FooResult`是具有 2 个属性的类。这样做的好处是您可以轻松添加更多属性，而无需更改 API。

同样，您可以返回 a `Tuple<DataTable,int>`- 但我建议不要这样做，因为它没有表达每个值所代表的含义。在一个`Tuple<string,int,string>`，什么是`Item1`？有什么不同`Item3`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:09:42.173

忽略问题中“最有效”的部分，因为它毫无意义。您可以使用一个[`out`参数](http://msdn.microsoft.com/en-us/library/vstudio/ee332485.aspx)和一个[返回值](http://msdn.microsoft.com/en-us/library/1h3swy84.aspx)：

```
public DataTable GetData(out int integerVariable)
{
    // ...
    integerVariable = 4711;
    return table;
} 
```

您还可以创建并返回一个自定义类型，其中包括 the`DataTable`和`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:10:20.120

您的函数应返回一个公开两个属性的对象，其中一个是整数，另一个是 DataTable。

# javascript - 当我单击提交并同时调用 servlet 时如何显示隐藏的 div 字段

> ID：15384824
> 
> 赞同：0
> 
> 时间：2013-03-13T12:04:20.163
> 
> 标签：javascript, jsp, servlets

我创建了一个jsp（upload.jsp）页面来上传文件。当我单击提交时，它将调用 servlet 并读取文件内容。另一个 jsp 页面（比如 filecontent.jsp）用于显示内容。我`<iframe>`在upload.jsp 中使用插入filecontent.jsp。它是隐藏的。我真正想要的是当我单击上传时，它应该调用 servlet，然后在同一页面中显示 iframe，以便我可以显示文件内容。

这是我的jsp页面。

```
<form class="form-horizontal" name="regist" action="Registration" onsubmit="return validateFile(this)" enctype="multipart/form-data"
            method="post">

            <div class="control-group" class="span12">
                <label class="control-label" for="file">Please upload a
                    file:</label>
                <div class="controls">
                    <input type="file" name="file"/>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">

                    <button type="submit" class="btn btn-primary">Upload</button>
                </div>
            </div>
        </form>
    </div>
    <div id="showFrames" class="hidden">
<iframe src="filecontent.jsp" width="700" height="800"></iframe>
</div> 
```

这是我的剧本。

```
<script>
function validateFile(form) {
    var fileName = form.file.value;
    if (!fileName) {
        alert("No File Selected!!!");
        return false;
    }
    else
    {
        $("#showFrames").show();

    }
}
</script> 
```

但它不起作用。当我点击上传时，它不显示框架。错误是什么，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:20:23.100

It seems you are using a jQuery selector? Is jQuery loaded?

If your class .hidden { display: none; } contains you can use VanillaJS like this:

```
function validateFile( form )
{
    var fileName = form.file.value;

    if (!fileName)
    {
        alert("No File Selected!!!");
        return false;
    }
    else
    {
        document.getElementById( "showFrames" ).style.display = "block";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:18:15.330

如果要在 iframe 中显示`Registration`请求的响应，则必须将该 iframe 设置为表单的目标：

`<form target="myframe" ...>`和`<iframe src="filecontent.jsp" name="myframe ...>`

# java - 容器 AS 7.1 中的 Jboss 状态

> ID：15384826
> 
> 赞同：3
> 
> 时间：2013-03-13T12:04:25.053
> 
> 标签：java, jboss7.x

我需要不断地监控服务器的状态。我的想法是编写一个 MBean 并将其部署为核心服务的一部分，但我需要的是一种机制（最好是 java API），它为我提供了一个接口来持续监控应用程序服务器的状态。有没有办法我可以实现它，旋转也是一种选择，但这是我至少现在没有看到的东西。

# apache - Apache 可以处理 URL 中的空格 +（加号）吗？

> ID：15384828
> 
> 赞同：2
> 
> 时间：2013-03-13T12:04:25.950
> 
> 标签：apache, file, url, space, url-encoding

我的 PHP Web 应用程序为**文件**（图像）生成 URL，它在文件名中放置`+`（加号）符号而不是空格，因为 function `urlencode()`。但是 Apache 不会转换`+`为空间，它会引发 404 错误。当我使用`rawurlencode()`时，空格用 进行编码`%20`，这很有效。

但我`+`更喜欢登录 URL :) 如何设置 Apache 来识别它？或者这是一个坏主意？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:52:10.613

是的，`+`登录 URL 路径是个坏主意。尤其是在文件名中，其中`+`可以是文件名的常规部分。所以路径`ab+cd.jpg`将是模棱两可的。Apache 无法确定浏览器是否请求文件`ab cd.jpg`或`ab+cd.jpg`.

# floating-point - PHP计算有缺陷

> ID：15384830
> 
> 赞同：5
> 
> 时间：2013-03-13T12:04:34.107
> 
> 标签：floating-point

我正在编写一个小脚本来计算扣除后的税值。我的应用程序有几个提供 CRUD 功能的 PHP 脚本。我可以添加每月费用、总账单收入，然后计算欠公司税多少。

所有的数据都存储在数据库中，但是我在计算时遇到了一个有趣的问题，我将简化下面的代码，以便可以重现它：

```
$total = 1.0;
$tax = 0.2;
$expenses = 0.05;

echo (($total-$tax) + $expenses); // this echo's 0.85
// (1.0 - 0.2) + 0.05 

if( (($total-$tax) + $expenses) == 0.85 ) {
    echo "totals add up";
}
else {
    echo "accounting error";
} 
```

这个想法是所有总数都以百分比计算。1.0 是收入的 100%，当月的支出是 5%（不是真的，但为了争论，因为我的实际计算有点复杂），无论哪种方式，这似乎是最简单的我可以把我的计算下来。

所以 100%（收入）- 20%（公司税）+ 5%（费用报销）应该让我得到总额的 85%。如第一个回声语句所示。

然而，if 语句出错并显示“会计错误”。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:07:12.260

这是浮点计算的常见问题。简而言之，一些十进制数不能用二进制精确描述。

常见的解决方案是坚持使用整数并以美分计算所有内容，并且仅在输出除以 100 时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:12:33.990

查看用于比较浮点的手册：http: [//php.net/manual/en/language.types.float.php](http://php.net/manual/en/language.types.float.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:12:46.827

您可能想研究 PHP 的[BCMath](http://us2.php.net/manual/en/book.bc.php)扩展。我通过搜索此站点并在[此处](https://stackoverflow.com/questions/4502588/doing-exact-real-number-arithmetic-with-php)找到问题找到了参考。

# php - PHP - 具有三元运算符confsuion的类属性 - 有人可以解释为什么这不起作用

> ID：15384832
> 
> 赞同：0
> 
> 时间：2013-03-13T12:04:46.340
> 
> 标签：php, oop, class

我正在尝试扩展一个基类并能够从它的子类访问一个属性，有人可以解释为什么以下工作：

```
class Base_Class {
        public function is_dev(){
            $var = (substr($_SERVER['HTTP_HOST'], -3) == 'dev') ? TRUE : FALSE;
            return $var;
        }
} 
```

所以有了这个我可以通过`$this->is_dev()`

但以下不起作用：

```
class Base_Class {
        public $var = (substr($_SERVER['HTTP_HOST'], -3) == 'dev') ? TRUE : FALSE;
} 
```

我希望使用它来访问它，`$this->var`但在我进入这部分之前我遇到了一个我不明白的语法错误。

**更新：**

当我在空间不足之前尝试列出 5 或 6 个语法错误时，该错误抱怨很多，以语法 er 结尾.​​.....但第一行显示

```
expected identifier +,_,static 
```

所有其他人都说它期待其他不存在的东西......当然期待很多

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:08:40.930

使用该`__construct`功能。这将`var`在加载类时设置：

```
class Base_Class {
        public $var;
        function __construct(){
            $this->var = (substr($_SERVER['HTTP_HOST'], -3) == 'dev') ? TRUE : FALSE;
        }
} 
```

# batch-file - 如何使用批处理查找隐藏文件夹？

> ID：15384833
> 
> 赞同：0
> 
> 时间：2013-03-13T12:04:49.007
> 
> 标签：batch-file, hidden, directory, minecraft

我正在尝试制作一个我的世界批处理程序，它将找到并重置您的我的世界。问题是，我要发布它，每个人都会有不同的用户名，并不是所有的人都会有 Vista+ 下的用户`C:\Users\Username`。有些人会把它放在下面`C:\Documents and Settings\Username`或类似的地方。

这是我已经拥有的代码。

```
@Echo off
set UserProfile = Jackson
set Find = Desktop
pause
FOR /D %%Find in ("C:\Users\%UserProfile%\") DO pause 
```

这就是我所拥有的。显然这是错误的，但我需要一些帮助。`set /p UserProfile = Insert username here`是的，我知道如果我要走那条路，上面应该是这样，但我有它用于测试。我就是不能`FOR`上班。我使用了错误的命令吗？我一直在尝试研究它，但找不到有效的解决方案。我在这里先向您的帮助表示感谢！

PS如果你不知道我会寻找哪个隐藏文件夹`C:\Users\Username\Appdata\Roaming\.minecraft`

我在执行 FOR 时一直遇到这个问题。即使在暂停的情况下，它也会关闭 cmd 窗口。如果我在没有批处理脚本的情况下手动执行（输出到 cmd.exe），那么它会说`%%Find was unexpected at this time.`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:07:03.820

实际上，您所需要的只是`%APPDATA%`环境变量。它可以在 XP、Vista、7 或 8 上运行（我敢说可能是 Windows NT 和 2000）。 `%APPDATA%\.minecraft`将`c:\users\<username>\appdata\roaming\.minecraft`在 Vista+ 或`c:\documents and settings\<username>\application data\.minecraft`XP- 上转换。

因此，只需`%APPDATA%\.minecraft`在需要引用`.minecraft`文件夹的任何地方使用（可能引用）。

有关更多有用的系统变量名称，请参阅[Windows 环境变量的此页面。](http://ss64.com/nt/syntax-variables.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:09:06.897

```
for /f "delims=" %%i in ( ' dir /b /ah /ad /s \.minecraft ' ) do set target=%%i
echo %target% 
```

where \ is the directory where you start your search.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:13:22.240

尝试这个

```
FOR /D %%F in ('dir/a C:\Users\%UserProfile%\') DO echo %%F 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:06:27.393

谢谢你们所有的答案！我发现（感谢@AndriyM）你只能在 %% 之后使用 1 个字母。那是我的问题，因为我正在尝试执行 %%Find 并且我必须执行 %%F 并更改变量。谢谢各位帮忙！

# java - Android围绕一个布局背景图像，只有顶角或底角

> ID：15384837
> 
> 赞同：15
> 
> 时间：2013-03-13T12:05:04.940
> 
> 标签：java, android

我希望能够拥有一个具有多个 RelativeLayouts 的屏幕，并且我希望顶部布局和底部布局具有圆角，因此顶部布局将顶部 2 个角圆角，底部布局将底部 2 个角圆角。

我的问题是，我在网上找到的所有示例都使用 shape.xml 创建一个圆角并给它一个渐变，这还不够好，因为我想给 relativeLayout 一个背景图像，并使该图像变圆，我似乎不能同时做这两个。

任何帮助将非常感激！！

编辑 - 赏金开始

好吧，我多年来一直在用头撞墙。我目前正在使用一个名为 UITableView 的 3rd 方工具，主要只是测试一些东西。

[https://github.com/thiagolocatelli/android-uitableview](https://github.com/thiagolocatelli/android-uitableview)

它设置 tableView 类似于 iPhone 表格的方式，我希望能够为每一行提供背景图像，并使顶部和底部行弯曲。在这个 UITableView 类中，在提交下，这段代码被称为

```
public void commit()
    {
        mIndexController = 0;

        if (mItemList.size() > 1)
        {
            // when the list has more than one item
            for (IListItem obj : mItemList)
            {
                View tempItemView;
                if (mIndexController == 0)
                {
                    //tempItemView = new RoundedView(context_i, this);
                    tempItemView = mInflater.inflate(R.layout.list_item_top,null);

        } 
            else if (mIndexController == mItemList.size() - 1)
            {
                tempItemView = mInflater.inflate(R.layout.list_item_bottom,null);
            } 
            else
            {
                tempItemView = mInflater.inflate(R.layout.list_item_middle,null);
            }
            setupItem(tempItemView, obj, mIndexController);
            tempItemView.setClickable(obj.isClickable());
            mListContainer.addView(tempItemView);
            mIndexController++;

        }
    } 
    else if (mItemList.size() == 1)
    {
        // when the list has only one item
        View tempItemView = mInflater.inflate(R.layout.list_item_single,
                null);
        IListItem obj = mItemList.get(0);
        setupItem(tempItemView, obj, mIndexController);
        tempItemView.setClickable(obj.isClickable());
        mListContainer.addView(tempItemView);
    }
} 
```

他有顶部中间和底部行的布局样式，顶部和底部圆形使用 XML，但问题是，我想给每一行一个图像。所以我添加了这段代码

```
tempItemView.setBackgroundResource(R.drawable.background); 
```

但问题是，这会删除顶行和底行的弧形角，因为角是使用 XML 和使用白色渐变而不是图像进行圆角处理的。我需要能够使布局膨胀，然后弯曲顶角和底角。我看过这么多裁剪角落的例子，甚至尝试了不同的 3rd 方工具，但还没有找到一个例子来展示将背景图像应用于容器，然后圆角。

有没有人对如何做到这一点有任何想法？

编辑：

在 iPhone 上，你可以做这样的事情

```
UIColor *color = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"image.png"]]; 
```

将图像转换为颜色的位置。Android是否有等价物？

编辑：

感谢ACheese的回答，我修改了他的代码，把它分成了3种方法，一种用于顶部圆角，一种用于全圆角，一种用于底部圆角，并想出了这个

```
public void setBackgroundRounded(int resID, int w, int h, View v)
    {
        DisplayMetrics metrics = getResources().getDisplayMetrics();
        double dH = (metrics.heightPixels / 100) * 1.5;
        int iHeight = (int)dH;

        Bitmap bmp = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(bmp);
        Shader shader = new BitmapShader(BitmapFactory.decodeResource(
                getResources(), resID), Shader.TileMode.MIRROR,
                Shader.TileMode.MIRROR);

        Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
        paint.setAntiAlias(true);
        paint.setShader(shader);
        RectF rec = new RectF(0, 0, w, h);
        c.drawRoundRect(rec, iHeight, iHeight, paint);

        v.setBackgroundDrawable(new BitmapDrawable(getResources(), bmp));
    }

    public void setTopRounded(int resID, int w, int h, View v)
    {
        Bitmap bmp = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(bmp);
        Shader shader = new BitmapShader(BitmapFactory.decodeResource(
                getResources(), resID), Shader.TileMode.MIRROR,
                Shader.TileMode.MIRROR);

        Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
        paint.setAntiAlias(true);
        paint.setShader(shader);
        RectF rec = new RectF(0, 0, w, h - 20);
        c.drawRect(new RectF(0, 20, w, h), paint);
        c.drawRoundRect(rec, 20, 20, paint);
        v.setBackgroundDrawable(new BitmapDrawable(getResources(), bmp));
    }

    public void setBottomRounded(int id, int w, int h, View v)
    {
        DisplayMetrics metrics = getResources().getDisplayMetrics();
        double dH = (metrics.heightPixels / 100) * 1.5;
        int iHeight = (int)dH;

        Bitmap bmp = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(bmp);
        Shader shader = new BitmapShader(BitmapFactory.decodeResource(
                getResources(), id), Shader.TileMode.MIRROR,
                Shader.TileMode.MIRROR);
        Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
        paint.setAntiAlias(true);
        paint.setShader(shader);
        RectF rec = new RectF(0, 0, w, h);
        c.drawRoundRect(rec, iHeight, iHeight, paint);
        c.drawRect(new RectF(0, 0, w, h-iHeight), paint);

        v.setBackgroundDrawable(new BitmapDrawable(getResources(), bmp));
    } 
```

我使用指标来设置视图的圆角，因此它可以根据不同的屏幕尺寸进行缩放。

希望对遇到此问题的其他人有所帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:10:31.430

那么你有没有尝试过这样的事情：

例如，这是您的主要布局：

```
RelativeLayout myMainRelLAyout = (RelativeLayout) findViewById(R.id.my_layout); 
```

做`MyMainRelLAyout.setBackgroundResource(R.drawable.mydrawable);`

mydrawable.xml 看起来像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="@android:color/white" />

    <corners
        android:bottomLeftRadius="0dip"
        android:bottomRightRadius="0dip"
        android:topLeftRadius="5dip"
        android:topRightRadius="5dip" />
    </shape> 
```

根据下面的评论，我可以建议您使用此链接：[Romain Guy - 带圆角的图片](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)，您可以在其中找到我认为可以帮助您执行此操作的答案。

这是另一个使用 ImageView 的有用库，但您可以更改它并将其用于任何类型的视图，链接：[RoundedImageView](https://github.com/makeramen/RoundedImageView)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:40:43.143

检查我的解决方案是否适合您的情况：通过扩展 RelativeLayout 来定义您自己的布局。您只需要添加以下代码

```
@SuppressWarnings("deprecation")
public void setBackground(int id){
    Bitmap bmp = Bitmap.createBitmap(getMeasuredWidth(), getMeasuredHeight(), Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(bmp);
    Shader shader = new BitmapShader(BitmapFactory.decodeResource(getResources(), id), Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);

    Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);
    paint.setAntiAlias(true);
    paint.setShader(shader);
    RectF rec = new RectF(0, 0, getMeasuredWidth(), getMeasuredHeight());
//  you may need this for only top round corner
//  RectF rec = new RectF(0, 0, getMeasuredWidth(), getMeasuredHeight()-20);
//  c.drawRect(new RectF(0, 20, getMeasuredWidth(), getMeasuredHeight()),      paint);
    c.drawRoundRect(rec, 20, 20, paint);
    this.setBackgroundDrawable(new BitmapDrawable(getResources(), bmp));

} 
```

从您的活动中调用此方法。您不能从 onCreate() 调用，因为 getMeasuredWidth() 和 getMeasuredHeight() 尚未准备好。通过设置您自己的可绘制 id 从 onWindowFocusChanged(boolean hasFocused) 覆盖和调用。这将重复将您的图像设置为带圆角的背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:07:35.017

好的，我终于找到了解决方案。为了圆顶角，请使用此方法

```
public Bitmap getTopRoundedCorner(Bitmap bitmap, DisplayMetrics metrics) {

    //Using this so it scales with different screen sizes
    double dH = (metrics.heightPixels / 100.0) * 3;
    int iHeight = (int) dH;

    //Subtract this from bitmap height
    Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
                bitmap.getHeight()-iHeight, Config.ARGB_8888);

    Canvas canvas = new Canvas(output);

    final int color = 0xff424242;
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());

    //Again used so it scales with diff screen sizes
    //Can play around with this value, depending on how rounded you wanted the corner
    dH = (metrics.heightPixels / 100.0) * 3.5;
   iHeight = (int) dH;

    final RectF rectF = new RectF(rect);
    final float roundPx = iHeight;

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    paint.setColor(color);
    canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);

    return output;
  } 
```

如果您只想圆底角，请使用此方法

```
public Bitmap getBottomRoundedCorner(Bitmap bitmap) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
                    bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);

        //Again play around with this to get the rounded value you require
        double dH = (metrics.heightPixels / 100.0) * 2.5;
        int iHeight = (int) dH;
        final float roundPx = iHeight;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        //Draw second rectangle over the top of the first one
        //So it hides the top rounded corners
        iHeight = (int) dH;

        final int color2 = 0xff424242;
        final Paint paint2 = new Paint();
        Canvas canvas2 = new Canvas(output);
        final Rect testRect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight()-iHeight);
        final RectF testF = new RectF(testRect);

        paint2.setAntiAlias(true);
        canvas2.drawARGB(0, 0, 0, 0);
        paint2.setColor(color2);
        canvas2.drawRoundRect(testF, roundPx, roundPx, paint2);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas2.drawBitmap(bitmap, testRect, testRect, paint2);
        return output;
      } 
```

另外，如果您传入不同大小的不同图像，我建议您先使用此方法

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
        int width = bm.getWidth();
        int height = bm.getHeight();
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        // CREATE A MATRIX FOR THE MANIPULATION
        Matrix matrix = new Matrix();
        // RESIZE THE BIT MAP
        matrix.postScale(scaleWidth, scaleHeight);

        // "RECREATE" THE NEW BITMAP
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
        return resizedBitmap;
    } 
```

在应用圆角方法之前将图像放大到相同的大小，否则如果您传入具有不同宽度/高度的不同图像，圆角将根据传入的图像看起来完全不同。如果您缩放图像首先，这意味着无论您传入什么图像，都应该看起来相当一致。

然后你可以做这样的事情

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.tablebackground);
        bmp = getResizedBitmap(bmp, 200, 300);
        bmp = getTopRoundedCorner(bmp);
        BitmapDrawable backgroundDrawable = new BitmapDrawable(getResources(),bmp);
        subLayout = (RelativeLayout) findViewById(R.id.subLayout);
        subLayout.setBackgroundDrawable(backgroundDrawable); 
```

希望对遇到同样问题的其他人有所帮助！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:17:01.053

使用[LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)设置位图、圆角，然后将其设置为相对布局背景怎么样？

该文档包括如何执行此操作的分步操作。

# sql - 从一列到多列的数据解析

> ID：15384842
> 
> 赞同：0
> 
> 时间：2013-03-13T12:05:16.843
> 
> 标签：sql, oracle, plsql, oracle11g, plsqldeveloper

我有一个包含如下数据的文本文件：

```
A 123 JoeBSD1639973e7378790
A 344 TomGDF7393694e0902087
B 344 ZenGDF9838987e0849399 
```

我已经使用 sqlldr 批量插入临时表，并且所有数据都在一个列中，因为我这里没有任何字段分隔符。

现在我想将这些数据分成如下列：

```
Section    Book1   Name   Book2   RollNo   Book3   RegNo
----------------------------------------------------------
A          123     Joe    BSD     1639973  e       7378790
A          344     Tom    GDF     7393694  e       0902087
B          344     Zen    GDF     9838987  e       0849399 
```

我可以识别字段的方法是使用字符长度，例如 Section 是 2 长度，Book1 是 4，Name 是 3，Book2 是 3，RollNo 是 7，Book3 是 1，RegNo 是 7。

有人可以帮助我进行查询以进行此转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:20:29.900

you can use substr

eg:

```
with data as (select 'A 123 JoeBSD1639973e7378790' str from dual union all
select 'A 344 TomGDF7393694e0902087' from dual union all
select 'B 344 ZenGDF9838987e0849399' from dual)
select str,
       substr(str, 1, 1) section,
       substr(str, 3, 3) book1,
       substr(str, 7, 3) name,
       substr(str, 10, 3) book2,
       substr(str, 13, 7) rollno,
       substr(str, 20, 1) book3,
       substr(str, 21, 7) regno
  from data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:19:24.627

SubStr() 函数是您所需要的：[http ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions162​​.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions162.htm)

您可能想考虑使用外部表而不是 SQL Loader 插入临时表，因为您可以更轻松地将 SQL 函数应用于文件数据并在读取文件期间拆分列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:38:26.990

我们还可以使用 UTL 文件从平面文件中提取数据，而 UTL 文件本身会将数据提取为字符串，因此您知道可以使用哪些长度`SUBSTR`来提取正确的列值，然后插入到临时表中

```
declare 
     f1 UTL_FILE.FILE_TYPE;
     V_str varchar(2000);
begin
     f1 := UTL_FILE.FOPEN('Directory','File_NAME.txt','W');
     loop
         UTL_FILE.GETLINE(F1,v_str);
         v1:=substr(v_str,1,2);
         v2:=substr(v_str,3,4);
         v3:=substr(v_str,7,3);
         v4:=substr(v_str,10,3);
         v5:=substr(v_str,13,7);
         v6:=substr(v_str,20,1);
         v7:=substr(v_str,21,7);
         insert into temp values(v1,v2,v3,v4,v5,v6,v7);
    end loop;
 exception
    when no_data_found then
       dbms_output.put_line('end reached');
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T12:20:23.273

Here's an example:

```
Select trim(substr('B 344 ZenGDF9838987e0849399',1,2)) as Section, 
       trim(substr('B 344 ZenGDF9838987e0849399',3,4)) as Book1,
       trim(substr('B 344 ZenGDF9838987e0849399',7,3)) as Name,
       trim(substr('B 344 ZenGDF9838987e0849399',10,3)) as Book2,
       trim(substr('B 344 ZenGDF9838987e0849399',13,7)) as RollNo,
       trim(substr('B 344 ZenGDF9838987e0849399',20,1)) as Book2,
       trim(substr('B 344 ZenGDF9838987e0849399',21,7)) as RegionNo
from dual 
```

I used trim to eliminate spaces; but maybe they are relevant?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:22:53.610

这也可能有所帮助。我有类似的问题，并在 Oracle-Base 论坛中寻求帮助。此查询由 Tim - Oracle-Base.com 的版主编写：

```
SELECT REGEXP_SUBSTR(str, '[A-Z][a-z]+', 1, 1) col1,
       REGEXP_SUBSTR(str, '[A-Z]+', 1, 2) col2,
       REGEXP_SUBSTR(str, '[0-9]+', 1, 1) col3,
       REGEXP_SUBSTR(str, '[a-z]+', 1, 2) col4,
       REGEXP_SUBSTR(str, '[0-9]+', 1, 2) col5
  FROM
  (
   SELECT 'JoeBSD1639973e7378790' str FROM dual
  )
  /

COL1  COL2  COL3     COL4  COL5
-----------------------------------
Joe   BSD   1639973   e    7378790 
```

# c++ - 从 websocketpp 中的 connection 或 connection_ptr 获取本机套接字描述符？

> ID：15384847
> 
> 赞同：2
> 
> 时间：2013-03-13T12:05:21.737
> 
> 标签：c++, websocket, boost-asio, websocket++

有没有办法从`connection`or`connection_ptr`中获取本机套接字描述符`websocketpp`？在将帧发送到客户端之前，我需要设置 TCP_CORK。我是 Boost.Asio 的新手，请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:42:15.237

按照[github](https://github.com/zaphoyd/websocketpp)代码，您可能会调用 `connection_ptr->get_raw_socket().native_handle()`.

[`websocketpp::connection`](https://github.com/zaphoyd/websocketpp/blob/a10b3a1704a05c85289b8701cfe0603815b402fa/src/connection.hpp#L69)继承自[`websocketpp::socket::connection`](https://github.com/zaphoyd/websocketpp/blob/db0a43a228346f6e8cff12ea9bbff8ca80cd9bdf/src/sockets/plain.hpp#L68)，并`websocket::socket::connection`提供一个`get_socket()`公共成员函数，该函数返回对 Boost.Asio 套接字的引用。Boost.Asio 套接字提供了一个[`native_handle()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/native_handle.html)返回本机套接字表示的成员函数。

# jquery - MVC - ClientValidationEnabled = true，但仍有回发，破坏了我的 jQuery

> ID：15384861
> 
> 赞同：1
> 
> 时间：2013-03-13T12:06:18.640
> 
> 标签：jquery, asp.net-mvc, validation, postback

我的页面上有一些 jQuery，当单击按钮时显示带有一些控件的 div。最初div是隐藏的。

我在 web.config 中设置了 ClientValidationEnabled = true。如果我单击显示按钮，则显示带有控件的 div，但是如果我填写一些数据，然后单击提交按钮，而不是客户端验证启动，页面将重新加载，我又回到了开始，隐藏了我的 div。

这可能是什么原因造成的？

这是我的看法...

```
<script type="text/javascript" src="~/Scripts/jquery-1.7.1.min.js"></script>
<h2>cardiac</h2>

<br>
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>cardiac</legend>
        <div id ="confirmdiv" class="notificationdiv" align="center">  
            Please check sample type, this screen is only for <b>Cardiac</b> results and <b>NOT</b> Liquid Cardiac.
            <br />    
            <input type ="button" id ="buttonConfirm" value ="Confirm"/>
            <input type ="button" id ="buttonBack" value ="Back"/>
        </div>
        <div id ="formdiv" style="display:none;">
            <br>
            Please fill in your results...    
            <br/>
            @Html.Partial("_CreateOrEdit", Model)    

            <input type="submit" value="Submit" />
        </div>
    </fieldset>
}

<script type="text/javascript">
    $(document).ready(function () {

        $("#buttonConfirm").click(function () {
            $("#confirmdiv").hide();
            $("#formdiv").show();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:11:58.623

看起来您包含 jQuery，但不包含其他必需的脚本。

尝试添加

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js"></script> 
```

这些将实现所需的验证属性。

编辑：哎呀，我假设您的模型上有必要的属性来根据需要调用验证

# ios - iOS：为循环重命名 NSString

> ID：15384866
> 
> 赞同：2
> 
> 时间：2013-03-13T12:06:33.710
> 
> 标签：ios, nsstring, rename

```
NSString *string = @"Test"; 
```

是否可以重命名此字符串？我想在最后使用 int 使其动态化：

```
for (int i = 0; i <= 19; i++)
{
   // here the name of the string should be dynamic, so that I'll get 20 NSString (titled like string_00 to string_20)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:08:05.957

在 Objective C中没有办法引入新的*局部变量*。当您需要使用整数索引访问多个数据对象时，请使用数组或`NSArray`对象：

```
NSString *strings[20];
for (int i = 0; i <= 19; i++) {
    strings[i] = [NSString stringWithFormat:@"Test%d", i];
} 
```

或者

```
NSMutableArray *strings = [NSMutableArray array];
for (int i = 0; i <= 19; i++) {
    [strings addObject:[NSString stringWithFormat:@"Test%d", i]];
} 
```

# cassandra - Cassandra Cql timeunix 范围查询

> ID：15384867
> 
> 赞同：1
> 
> 时间：2013-03-13T12:06:35.410
> 
> 标签：cassandra, cql

我有这个查询，在我的 columnfamily 中，所有的列名都是一个 unix 时间戳。如果我意识到这个查询，我有这个消息：

```
 SELECT FIRST  10000 '631144800'..'1363176066'   FROM datas where KEY='users';
   Bad Request: range finish must come after start in traversal order 
```

但是，如果我在第一个日期之前输入 0：

```
 SELECT FIRST  10000 '0631144800'..'1363176066'   FROM datas where KEY='users'; 
```

它有效，这是一个错误吗？，我不知道为什么它在第一个查询中不起作用

如果字符串的长度较小，它总是给我同样的问题，我尝试使用 999999999 并给了我同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:55:15.530

您需要将列比较器设置为 LongType，以便 Cassandra 进行数字比较而不是字典比较（默认值）。

不幸的是，您无法在现有数据上更改此设置。如果你不能重写你的数据，你将不得不归零。

# html - 在 Rails 3.2 中将安全的 HTML 附加到不安全的 HTML

> ID：15384870
> 
> 赞同：0
> 
> 时间：2013-03-13T12:06:39.723
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

假设我有，

```
<%= @order.shipping.address1 + '<br />' unless @order.shipping.address1 %>
<%= @order.shipping.address2 + '<br />' unless @order.shipping.address2 %> 
```

如何返回带有默认标签剥离的变量，并将“
”打印为 html_safe？

据推测，包装在 <%= raw ... %> 中会引发安全问题，因为变量没有被剥离 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:12:36.103

您不想使用 raw 或 html_safe 之类的东西，因为正如您所说的那样，它会在地址字段中打开漏洞。

你可以像这样重写它：

```
<% unless @order.shipping.address1 %>
  <%= @order.shipping.address1 %> 
  <br />
<% end %>
<% unless @order.shipping.address2 %>
  <%= @order.shipping.address2 %>
  <br />
<% end %> 
```

但我会考虑使用 html/css 而不是添加断线。用 div 包围它实际上会使下一个元素出现在下一行，因为 div 是一个[块元素](http://www.w3schools.com/html/html_blocks.asp)，因此会创建一个换行。

看法：

```
<% unless @order.shipping.address1 %>
  <div>
    <%= @order.shipping.address1 %> 
  </div>
<% end %>
<% unless @order.shipping.address2 %>
  <div>
    <%= @order.shipping.address2 %>
  </div>
<% end %> 
```

如果您需要进一步的样式，您可以添加一个类并将 css 用于宽度、高度和其他内容。

# jquery - jQuery 禁用

> ID：15384872
> 
> 赞同：0
> 
> 时间：2013-03-13T12:06:43.717
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我有一个这样的 Jquery 函数：

```
$("#cittadinanza_nascita_label").keyup(function () {
    $(this).autocomplete({
        source: "/index/status/",
        minLength: 2,
        select: function (event, ui) {
            event.preventDefault();
            $("# cittadinanza_nascita_label").val(ui.item.label);
            $("# cittadinanza_nascita").val(ui.item.value);                        
        }
    });                
}); 
```

在表格上制作自动完成的出生状态。“值”存储在隐藏类型中。我希望如果它的值是 X，则字段“comune_nascita”被禁用。

一点帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:10:34.060

我不确定你在说什么。

```
if ($("# cittadinanza_nascita").val() == X) {
    $ ("# cittadinanza_nascita").attr('disabled', 'disabled');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:12:50.740

像这样的东西会起作用吗？

```
$ ("# cittadinanza_nascita_label"). Keyup(function () {
    $ (this).autocomplete({
    source: "/index /status /"
    minLength: 2,
    select: function (event, ui) {
       event.preventDefault();
       $("#cittadinanza_nascita_label").val(ui.item.label);
       $("#cittadinanza_nascita").val(ui.item.value);
       if ($("#cittadinanza_nascita").val() === 'x') {
         $("#comune_nascita").attr('disabled','disabled');
       }
    }});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:14:20.750

> 应该使用 .prop() 方法来设置禁用和检查，而不是.attr [(](http://api.jquery.com/prop/) [)](http://api.jquery.com/attr/)方法。

```
if($("#cittadinanza_nascita_label").val() == "YOUR X VALUE"){
    $("#cittadinanza_nascita").prop('disabled', true);
} 
```

# xml - 如何在与 xmltask 一起使用的属性中转义“&”？

> ID：15384874
> 
> 赞同：2
> 
> 时间：2013-03-13T12:06:44.973
> 
> 标签：xml, ant, xmltask

我有一个属性字符串（从文件加载），其中包含我的 ANT 构建脚本中的 & 字符。

如何转义该字符串，以便可以使用 xmltask 将其写入 xml 文件？

**编辑：**以下代码有效，但我不能用 & 替换 &，所以我必须使用“和”这个词：

```
 <propertyregex property="prop"
           input="${prop}"
           regexp="&amp;"
           replace="and"
           override="true"
           global="true" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:09:42.143

尝试其中一个：
`&amp;amp;`解析为`&amp;`哪个依次导致`&`
HTML 实体（十进制）`&#38;`
或 HTML 实体（十六进制）`&#x26;`

# memory - ImageMagick 使用超过 2GB 的内存来转换 PDF 文件

> ID：15384879
> 
> 赞同：11
> 
> 时间：2013-03-13T12:07:00.463
> 
> 标签：memory, resources, imagemagick, converter, imagemagick-convert

ImageMagick 使用大量内存来转换 PDF 文件——超过 2GB。我正在使用的命令是：

```
convert -density 250 -resize 1280x myfile.pdf -interlace plane -strip -quality 40 -alpha flatten myfolder/myfile-%03d.jpg 
```

如何改进？我有 1GB 的限制，否则进程会被无情地杀死。):

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T12:13:44.000

使用内存限制选项。

此处显示的选项用法：

[http://www.imagemagick.org/script/command-line-options.php#limit](http://www.imagemagick.org/script/command-line-options.php#limit)

> **-limit 类型值**
> 
> 设置像素缓存资源限制。
> 
> 选择：`area`、`disk`、`file`、`map`、`memory`、`threads`或`time`。
> 
> 的值`file`是文件数。其他限制以字节为单位。使用 SI 前缀（例如 100MB）定义内存、映射、区域和磁盘资源限制的参数。
> 
> 默认情况下，限制为 768 个文件、3GB 图像区域、1.5GiB 内存、3GiB 内存映射和 18.45EB 磁盘。如果此信息可用，这些限制将根据您计算机上的可用资源进行调整。当达到任何限制时，ImageMagick 会以某种方式失败，但会尝试采取补偿措施（如果可能）。例如，以下限制内存：
> 
> -limit memory 32MiB -limit map 64MiB

# java - JPA 将 java.io.File 或 java.nio.file.Path 对象映射到 STRING 列

> ID：15384882
> 
> 赞同：2
> 
> 时间：2013-03-13T12:07:04.073
> 
> 标签：java, jpa, mapping, sqldatatypes

假设以下实体：

```
@Entity
public class MyEntity {
    @Id
    private Long id;

    private File path;

    private String someString;
} 
```

我想映射到这样的表：

```
CREATE TABLE (id BIGINT, path VARCHAR, somestring VARCHAR); 
```

`java.io.File`问题在于从（或`java.nio.file.Path`）到表示文件路径的简单字符串的映射。JPA可以进行这样的映射吗？

当然，我可以定义`path`为字符串，让客户端创建`File`or`Path`对象。但是直接在实体中提供这些对象要方便得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:15:49.703

问题`File`不仅仅是路径。虽然它是可序列化的，但它不会映射到 VARCHAR。如果只需要路径，则需要添加 make file.getPath() 实体和`File`对象的一部分`@Transient`。这样，您可以保存到数据库的路径，并且在`File`加载对象时仍然拥有该对象。

像这样的东西：

```
@Entity
public class MyEntity {
    @Id
    private Long id;

    @Transient
    private File file;

    private String filePath;

    private String someString;

public void setFilePath(File file) {
    filePath = file.getPath();
} 
```

}

# apache - apache在哪里存储php致命错误？

> ID：15384885
> 
> 赞同：0
> 
> 时间：2013-03-13T12:07:17.240
> 
> 标签：apache, store, php

我处于一种情况，其中有可能超过 php 执行时间。所以我的想法是将“致命错误：第 1 行超过 5 秒的最大执行时间”之类的消息重写为更“花哨”的内容。我正在使用阿帕奇。

apache 将这些 php 致命错误（或一般的 php 错误）存储在哪里？如果是这样，是否有可能重写那些？谢谢。

**编辑：**注意 - 我知道错误日志在哪里，我在询问实际的错误消息，或者如果需要，我会询问错误消息的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:15:01.190

你想看看的是： http: [//php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

它允许您设置一个函数来处理错误，您可以捕获您遇到的错误并根据它显示自定义输出。

此功能也可能对您有用：http: [//php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

它允许您在脚本结束之前运行一个函数，即使它已经死了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:15:51.273

这取决于您的 ini 设置。请参阅[此处](http://php.net/manual/en/errorfunc.configuration.php)了解相关设置，尤其`log_errors`是`error_log`和`display_errors`。如果`log_errors`打开，错误将记录到`error_log`.

听起来您也正在使用自定义错误处理程序，这可以使用[set_error_handler()](http://php.net/manual/en/function.set-error-handler.php)来实现。

# cakephp - 如何在 cakephp Croogo CMS 中强制使用动态页面而不是 webroot 文件？

> ID：15384887
> 
> 赞同：0
> 
> 时间：2013-03-13T12:07:23.210
> 
> 标签：cakephp

我使用 croogo CMS 创建了一个带有 slug 名称的动态页面作为测试，我的 webroot 包含 test.xml。

我的网址是： http: [//www.domain.com/test](http://www.domain.com/test)它应该重定向到我的动态页面，但它显示来自 app/webroot/test.xml 的内容。

请给我解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:02:05.573

我假设您正在使用 Apache 并已`MultiViews`打开。

将行添加`Options -MultiViews`到您的`webroot/.htaccess`.

# ruby-on-rails - 移动到软层

> ID：15384895
> 
> 赞同：0
> 
> 时间：2013-03-13T12:07:44.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dedicated-server, ibm-cloud-infrastructure

我计划将我的一个 Rails 应用程序从 Heroku 迁移到 Softlayer。我也有一个softlayer帐户。但是我完全不知道专用服务器是如何工作的，前提是什么。我认为迁移和服务器部署需要注意的一些关键点是

1.  设置
2.  数据迁移
3.  部署
4.  表现

我想知道在 Softlayer 上设置服务器并将我的应用程序数据从 Heroku 迁移到 SoftLayer 的最佳方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:15:52.710

运行一个专用的 Rails 服务器（任何专用的服务器）需要做很多工作。你必须关心自己：

1.  Linux 发行版和更新
2.  MySQL/PostgreSQL/MongoDB 数据库安装和更新
3.  配置备份解决方案
4.  应用服务器安装和配置
5.  网络服务器配置
6.  编写自己的 Capistrano 脚本进行部署

我现在在 Softlayer 上有一个专用服务器（Windows 服务器），我可以说它们很棒。他们超越了职责范围来帮助您。但是当谈到 Rails 服务器时，我宁愿不把时间花在所有的配置问题上。

对于 Heroku 的升级，我会推荐[Engine Yard](http://www.engineyard.com)。它们使您可以更好地控制您的实例，同时管理我真的不想担心的服务器端维护。我有一个运行良好的实例。

# android - 按下确定按钮后如何在对话框关闭后保留键盘？在安卓中

> ID：15384901
> 
> 赞同：1
> 
> 时间：2013-03-13T12:08:20.373
> 
> 标签：android, dialog, keyboard, dismiss

键盘显示在屏幕上。并显示对话框。当我在对话框中单击“确定”按钮时，键盘是隐藏的。

```
public void setButton(~)
{
 dialog.dismiss();
} 
```

我认为dismiss() 是包含一个问题。

对话框关闭后如何保留键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:11:30.963

好的..在 dialog.dismiss(); 之后添加这个

InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT);

在这里，editText 是您的 EditText 实例。相应地改变它。

* * *

将此添加到您`Activity`的 androidmanifest.xml 中的标签

```
android:windowSoftInputMode="stateAlwaysVisible" 
```

# facebook - 对签名请求的不安全处理

> ID：15384903
> 
> 赞同：0
> 
> 时间：2013-03-13T12:08:23.573
> 
> 标签：facebook, security

我注意到几个 FB 应用程序以不安全的方式处理 signed_request。F.ex 我从页面选项卡加载应用程序，FB 将 signed_request 发布到应用程序。然后，该应用程序将我进一步重定向到他们的站点，将 signed_request 作为 get 变量传递。

从理论上讲，它至少不那么安全，Facebook 是否发布了有关如何处理签名请求的任何指南/规则，或者应用程序是否可以自由地做任何他们想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:05:17.370

> F.ex 我从页面选项卡加载应用程序，FB 将 signed_request 发布到应用程序。然后，该应用程序将我进一步重定向到他们的站点，将 signed_request 作为 get 变量传递。

通过 GET 传递它本身并没有害处——只要您没有将外部资源嵌入到您的页面中（因为这些资源很可能会将其作为 HTTP 引用者传输）。

但是我看不出有任何真正的理由来传递signed_request 参数——一旦它被解码和验证，我就将它放入我的会话中，并且可以随时访问它。

> 从理论上讲，它至少不那么安全，Facebook 是否发布了有关如何处理签名请求的任何指南/规则，或者应用程序是否可以自由地做任何他们想做的事情？

处理令牌是你的责任——如果你这样做的方式是它被盗并被滥用于垃圾邮件，FB 很可能会阻止你的应用程序。

# coldfusion - 如何安装和测试wirebox 1.6？

> ID：15384905
> 
> 赞同：0
> 
> 时间：2013-03-13T12:08:24.177
> 
> 标签：coldfusion, coldfusion-8, cfml, coldbox

我正在使用 ColdFusion8、Windows7 64 位操作系统，并且我已经从[ColdBox](http://www.coldbox.org/download)下载了 Wirebox 1.6 。我已提取文件并将它们放入`wwwroot`并使用以下代码创建了一个“index.cfm”页面：

```
<cfscript>
  wirebox = createObject("component","wirebox.system.ioc.Injector").init();
</cfscript>
<cfdump var="#wirebox#"> 
```

但它抛出一个错误：

> ```
> Invalid CFML construct found on line 43 at column 36.
> ColdFusion was looking at the following text:
> {
> The CFML compiler was processing:
> A script statement beginning with instance on line 43, column 25.
> A cfscript tag beginning on line 33, column 18.
> A cfscript tag beginning on line 33, column 18.
> 
> The error occurred in C:\ColdFusion8\wwwroot\wirebox\system\ioc\Injector.cfc: line 43
> 41 : 
> 42 :          // Prepare Injector instance
> 43 :          instance = {
> 44 :              // Java System
> 45 :              javaSystem = createObject('java','java.lang.System'), 
> ```

如何正确安装并测试安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:04:16.107

您使用的是什么 CF8 更新程序？我猜这是一个带有`struct`文字解析的 CF8 错误。您可以通过将文字重写`struct`为老式风格来测试这一点：

```
instance = structnew();
instance.javaSystem = createObject(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:12:55.010

如[文档中所述](http://wiki.coldbox.org/wiki/Installation.cfm)，ColdBox 需要以下引擎之一：

*   ColdFusion 8.01 或更高版本
*   Railo 2.0 或以上
*   Open Blue Dragon（并非所有功能都支持）

正如[这个答案](https://stackoverflow.com/questions/12138168/invalid-cfml-construct-error-with-simple-coldbox-application/12139430#12139430)所解释的，CF 8 不支持 ColdBox 使用的嵌套内联结构。

# google-app-engine - 将基于 JDO 的 App Engine 应用程序迁移到 Objectify

> ID：15384907
> 
> 赞同：1
> 
> 时间：2013-03-13T12:08:30.743
> 
> 标签：google-app-engine, objectify

我想迁移我的基于 JDO 的 App Engine 应用程序以进行对象化。但是这样做会做很多工作，因为有很多查询。

是否可以并排使用 JDO 和 Objectify，以某种方式使用相同的实体类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:39:38.630

使用最新版本的 Objectify（我在撰写本文时使用的是 Objectify v4），根据我的经验，可以使用 JDO 和 Objectify 并注释相同的类而没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:17:14.367

你可以试试这个[Objectify Link](https://code.google.com/p/objectify-appengine/wiki/FrequentlyAskedQuestions#How_do_I_migrate_from_JDO_to_Objectify?)从 JDO 迁移到 Objectify。

# c++ - 在 c++ windows 中获取硬盘的总大小

> ID：15384916
> 
> 赞同：8
> 
> 时间：2013-03-13T12:09:04.100
> 
> 标签：c++, winapi, visual-c++, filesystems

我正在尝试获取物理驱动器的总大小（未分配 + 主分区 + 扩展分区大小）。

我的磁盘名称为`\\.\PhysicalDriveX`

我尝试使用`GetDiskFreeSpaceEx`，但是当分区是扩展分区时它没有给出正确的结果，在这种情况下它返回分区的总大小。

```
BOOL ret = FALSE;
ULARGE_INTEGER ulFreeSpace;
ULARGE_INTEGER ulTotalSpace;
ULARGE_INTEGER ulTotalFreeSpace;
__int64 ulTotalUsedSpace = 0;
GetDiskFreeSpaceEx(szBuffer, &ulFreeSpace, &ulTotalSpace, &ulTotalFreeSpace);
*diskSize = ulTotalSpace.QuadPart; 
```

我可以使用 IOCTL_DISK_GET_DRIVE_LAYOUT_EX 使用 DeviceIoControl 获取分区信息，但我对扩展分区大小感到困惑。

有没有办法可以在 Windows 上准确获取 C++ 中硬盘的总大小？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T12:16:55.553

由于您谈论的是物理磁盘而不是分区，因此请查看[DeviceIoControl](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363147%28v=vs.85%29.aspx)。

来自那里的示例，其中包括计算总磁盘大小`wmain`：

```
#include <windows.h>
#include <winioctl.h>
#include <stdio.h>

BOOL GetDriveGeometry(LPWSTR wszPath, DISK_GEOMETRY *pdg)
{
  HANDLE hDevice = INVALID_HANDLE_VALUE;  // handle to the drive to be examined 
  BOOL bResult   = FALSE;                 // results flag
  DWORD junk     = 0;                     // discard results

  hDevice = CreateFileW(wszPath,          // drive to open
                        0,                // no access to the drive
                        FILE_SHARE_READ | // share mode
                        FILE_SHARE_WRITE, 
                        NULL,             // default security attributes
                        OPEN_EXISTING,    // disposition
                        0,                // file attributes
                        NULL);            // do not copy file attributes

  if (hDevice == INVALID_HANDLE_VALUE)    // cannot open the drive
  {
    return (FALSE);
  }

  bResult = DeviceIoControl(hDevice,                       // device to be queried
                            IOCTL_DISK_GET_DRIVE_GEOMETRY, // operation to perform
                            NULL, 0,                       // no input buffer
                            pdg, sizeof(*pdg),            // output buffer
                            &junk,                         // # bytes returned
                            (LPOVERLAPPED) NULL);          // synchronous I/O

  CloseHandle(hDevice);

  return (bResult);
}

int wmain(int argc, wchar_t *argv[])
{
  DISK_GEOMETRY pdg = { 0 }; // disk drive geometry structure
  BOOL bResult = FALSE;      // generic results flag
  ULONGLONG DiskSize = 0;    // size of the drive, in bytes

  bResult = GetDriveGeometry (wszDrive, &pdg);

  if (bResult) 
  {
    wprintf(L"Drive path      = %ws\n",   wszDrive);
    wprintf(L"Cylinders       = %I64d\n", pdg.Cylinders);
    wprintf(L"Tracks/cylinder = %ld\n",   (ULONG) pdg.TracksPerCylinder);
    wprintf(L"Sectors/track   = %ld\n",   (ULONG) pdg.SectorsPerTrack);
    wprintf(L"Bytes/sector    = %ld\n",   (ULONG) pdg.BytesPerSector);

    DiskSize = pdg.Cylinders.QuadPart * (ULONG)pdg.TracksPerCylinder *
               (ULONG)pdg.SectorsPerTrack * (ULONG)pdg.BytesPerSector;
    wprintf(L"Disk size       = %I64d (Bytes)\n"
            L"                = %.2f (Gb)\n", 
            DiskSize, (double) DiskSize / (1024 * 1024 * 1024));
  } 
  else 
  {
    wprintf (L"GetDriveGeometry failed. Error %ld.\n", GetLastError ());
  }

  return ((int)bResult);
} 
```

# android - 使用 phoneGap 的 jQuery.ajax 的“内部服务器错误”

> ID：15384917
> 
> 赞同：0
> 
> 时间：2013-03-13T12:09:10.103
> 
> 标签：android, jquery, ajax, json, cordova

我正在尝试为我的 PhoneGap 应用程序发出 ajax 请求。我对这些东西真的很陌生，所以我不知道我的代码有什么问题。服务器需要 facebook 令牌才能连接。当我通过终端上的“curl”执行此操作时，这是有效的，但是当我在我的 android 模拟器上运行它时，它会出现警报：“错误：内部服务器错误”Localserver 在 android 模拟器中的 10.0.2.2:9000 上正常运行。

```
function fun(){
  FB.getLoginStatus(function(response) {
    if (response.status == 'connected') {
        var token = response.authResponse.accessToken;
        token = '"'+token+'"';
        jQuery.ajax({
            url: "http://10.0.2.2:9000/lists/json",
            type: "GET",
            data: {"token": token},
            dataType: "json",
            success: function(result) {
                alert('Success.');
            },
            error: function(xhr, ajaxOptions, thrownError) {
                alert('ERROR: '+thrownError);
            }
        });
    } else {
    //Not logged in
    }
  });
} 
```

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:34:33.967

最后我所做的是将令牌附加到服务器的 url，如：

```
function fun(){
  FB.getLoginStatus(function(response) {
    if (response.status == 'connected') {
        var token = response.authResponse.accessToken;
        jQuery.ajax({
            url: "http://10.0.2.2:9000/lists/json?token="+token,
            type: "GET",
            success: function(result) {
                alert('Success.');
            },
            error: function(xhr, ajaxOptions, thrownError) {
                alert('ERROR: '+thrownError);
            }
        });
    } else {
    //Not logged in
    }
  });
} 
```

它奏效了:)

# json - JSON - 将 JSON 返回到输入 jqGrid 自动完成

> ID：15384918
> 
> 赞同：1
> 
> 时间：2013-03-13T12:09:10.493
> 
> 标签：json, jqgrid, autocomplete

我在这件事上需要帮助：我正在 jqGrid 中进行自动完成，我需要做的是将 JSON 返回到自动完成的输入。我正在做这样的事情，但在我的自动完成中只返回一个值，而在数据库中我有多个值。有人可以在这方面帮助我。我正在做这样的回报：

```
...
header("Content-Type: application/json");
$i=0;
while($row = pg_fetch_array($result)) {
   $response->input['value']=$row[ac_fin_g];
   $i++;
}
echo json_encode($response);
... 
```

但例如.. 我在数据库中有 ac_fin_g 的值：{house, home, cake}。如果我写字母“O”，在我的自动完成中出现的正确是“HOUSE”和“HOME”，但这并没有发生。当我为此代码更改上面的代码时（对于 input="HO"）：

```
...
header("Content-Type: application/json");
$i=0;
while($row = pg_fetch_array($result)) {
   $response->input[$i]['value']=$row[ac_fin_g];
   $i++;
}
echo json_encode($response);
... 
```

我有正确的 JSON：

```
{"input":[{"value":"HOME      "},{"value":"HOUSE     "}]} 
```

我很抱歉，但我不知道如何解决这个问题。有人可以帮助我吗？

* * *

**更新：** 感谢@Oleg，我想出了如何做到这一点。对于我的情况是：

```
$i=0;
while($row = pg_fetch_array($result)) {
$response[] = $row[ac_fin_g]; $i++;
}
echo json_encode($response); 
```

:)

PS：这个[链接](https://stackoverflow.com/questions/1830264/how-can-i-convert-the-result-of-this-postgres-db-query-into-json-to-return-to-my)很有用:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:11:50.673

当前，您正在用另一个值覆盖一个值。只需替换这个：

```
while($row = pg_fetch_array($result)) {
   $response->input['value']=$row[ac_fin_g];
   $i++;
} 
```

经过

```
while($row = pg_fetch_array($result)) {
   $response->input['value'][]=$row[ac_fin_g];
   $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:37:44.577

服务器应该创建期望 jQuery UI 的 JSON 数据。对应于[jQuery UI 自动完成文档](http://api.jqueryui.com/autocomplete/#option-source)JSON 数据应该是

```
["HOME", "HOUSE"] 
```

或者

```
[{"label": "Home", "value": "HOME"}, {"label": "House", "value": "HOUSE"}] 
```

代替

```
{"input":[{"value":"HOME      "},{"value":"HOUSE     "}]} 
```

您当前生成的。有办法在客户端解码任何其他 JSON 数据，但最好遵循 jQuery UI 自动完成标准格式。

# c# - 每行匹配多个 IP 地址

> ID：15384923
> 
> 赞同：1
> 
> 时间：2013-03-13T12:09:28.233
> 
> 标签：c#, regex

我尝试将字符串与具有规则的正则表达式匹配，它们都以`10.20`

```
string str = @"10.20.30.1\r\n10.20.40.2\r\n10.20.50.3";
string pattern = @"(10\.20.+(\r\n)*)+";

var m = System.Text.RegularExpressions.Regex.Match(str, pattern); 
```

但是它只捕获第一行，即：

```
Console.Write(m.ToString()); // prints 10.20.30.1, 
```

编辑：我试图区分有单行或多行的情况。即在上面的例子中`str`，如果用户给出

```
string pattern = @"(10\.20.+)+"; 
```

它只匹配我期望的第一行。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:17:49.373

您是否尝试过使用`Matches`而不是`Match`. 您正在寻找多个匹配项：

```
var matches = System.Text.RegularExpressions.Regex.Matches(
    "10.20.30.1\r\n10.20.40.2\r\n10.20.50.3",
    @"(10\.20.+(\r\n)*)+",
    RegexOptions.Compiled | RegexOptions.CultureInvariant);

Assert.AreEqual(3, matches.Count); 
```

在回复下面的评论时，将所有匹配项作为`string`：

```
var match = System.Text.RegularExpressions.Regex.Match(
        "foo 10.20.30.1\r\n10.20.40.2\r\n10.20.50.3 bar",
        @"(10\.20\.\d{1,3}\.\d{1,3}(\r\n)*)+",
        RegexOptions.Compiled | RegexOptions.CultureInvariant)
    .ToString(); 
```

最好使用`Regex`尽可能具体但仍符合您的所有标准的。由于`.`匹配除 之外`\n`的所有内容，因此仍有一个解决方案可以提出类似`@"(10\.20\.([^\r])+(\r\n)*)+"`. 尽管`10.20.30.1\r\n10.20.40.2\r\n10.20.50.3 bar`如果您周围还有其他信息，这将匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:26:51.190

您将字符串定义为逐字字符串（带`@`字符）：

```
string str = @"10.20.30.1\r\n10.20.40.2\r\n10.20.50.3"; 
```

所以`\`不能作为转义字符。`@`从字符串定义的开头删除。

您的模式的问题是`.+`in`@"(10\.20.+(\r\n)*)+"`将消耗`\r`，而剩余的字符串以`\n`which deos 不匹配开头`(\r\n)*`。[文档](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)说点（）`.`：

> 匹配除 \n 之外的任何单个字符。

为避免这种情况，请尝试使用更准确的模式来匹配部分 IP 地址中的数字，正如**Caramiriel**在他的回答中所说的那样。

您还可以将模式更改为：

```
string pattern = @"(10\.20.+(\r\n?|\n)*)+"; 
```

哪个更准确匹配换行符。

# ios - 自动布局、约束和旋转

> ID：15384925
> 
> 赞同：2
> 
> 时间：2013-03-13T12:09:33.363
> 
> 标签：ios, constraints, autolayout

我在自动布局和约束方面遇到问题，可以使用一些帮助。

我在 iPad 上运行这个应用程序。我有一个包含两个视图的窗口，一个 UIWebView 和一个 MKMapView。这两个视图都是在 IB 中设置的，并且 Auto Layout 是打开的。UIWebView 位于窗口顶部，MKMapView 位于底部。每个视图几乎占据了窗口的一半。UIWebView 在 IB 中设置了以下约束：NSLayoutAttributeTop 到 Superview 等于 0，Leading Edge 到 Superview 等于 0，Trailing Edge 到 Superview 等于 0，NSLayoutAttributeBottom 到 Superview 等于 480。 MKMapView 设置了以下约束在 IB 中：NSLayoutAttributeTop 到 Superview 等于 480，Leading Edge 到 Superview 等于 0，Trailing Edge 到 Superview 等于 0，NSLayoutAttributeBottom 到 Superview 等于 0。

加载窗口时，实际上移除了 MKMapView，因为我希望 UIWebView 占据整个屏幕，因为地图视图中没有要显示的数据。这是在我的 updateDetailViews 函数中完成的：

```
- (void)updateDetailViews
{
displayHeight = self.maximumUsableFrame.size.height;
viewDistance=displayHeight/2+centerMapButton.frame.size.height/2+16;

[detailMapView setTranslatesAutoresizingMaskIntoConstraints:NO];
[directoryWebView setTranslatesAutoresizingMaskIntoConstraints:NO];

if (mapViewVisible==true) {
    webViewDistFromBottomDefault=viewDistance;
    webViewDistFromBottom.constant=viewDistance;
    mapViewDistFromTopDefault=viewDistance;
    mapViewDistFromTop.constant=viewDistance;

}
else {
    [detailMapView removeFromSuperview];
    webViewDistFromBottomDefault=0;
    webViewDistFromBottom.constant=0;
    mapViewDistFromTopDefault=viewDistance;
    mapViewDistFromTop.constant=viewDistance;
}

[detailMapView setNeedsUpdateConstraints];
[UIView animateWithDuration:0.25f animations:^{
    [self.detailMapView layoutIfNeeded];
}];

} 
```

移除 MKMapView 后，UIWebview 的 NSLayoutAttributeBottom 属性设置为 0，并填满整个屏幕。一旦地图中显示了实际数据，然后添加 MKMapView，并在我的 displayMapView 函数中重新定位 UIWebView 以及必要的约束：

```
- (void)displayMapView
{
double dblLatitude;
double dblLongitude;

[detailMapView setTranslatesAutoresizingMaskIntoConstraints:NO];
if ([self isMapViewDisplayed]==FALSE) {

    [detailView addSubview:detailMapView];

    NSLayoutConstraint *myConstraint =[NSLayoutConstraint
                                       constraintWithItem:detailMapView
                                       attribute:NSLayoutAttributeTop
                                       relatedBy:NSLayoutRelationEqual
                                       toItem:detailView
                                       attribute:NSLayoutAttributeTop
                                       multiplier:1.0
                                       constant:mapViewDistFromTopDefault];

    [detailView addConstraint:myConstraint];

    //mapViewDistFromTop.constant = mapViewDistFromTopDefault;

    myConstraint =[NSLayoutConstraint
                   constraintWithItem:detailMapView
                   attribute:NSLayoutAttributeBottom
                   relatedBy:NSLayoutRelationEqual
                   toItem:detailView
                   attribute:NSLayoutAttributeBottom
                   multiplier:1.0
                   constant:0];

    [detailView addConstraint:myConstraint];

    myConstraint =[NSLayoutConstraint
                   constraintWithItem:detailMapView
                   attribute:NSLayoutAttributeLeading
                   relatedBy:NSLayoutRelationEqual
                   toItem:detailView
                   attribute:NSLayoutAttributeLeading
                   multiplier:1.0
                   constant:0];

    [detailView addConstraint:myConstraint];

    myConstraint =[NSLayoutConstraint
                   constraintWithItem:detailMapView
                   attribute:NSLayoutAttributeTrailing
                   relatedBy:NSLayoutRelationEqual
                   toItem:detailView
                   attribute:NSLayoutAttributeTrailing
                   multiplier:1.0
                   constant:0];

    [detailView addConstraint:myConstraint];
    [detailMapView setNeedsUpdateConstraints];

}
[UIView animateWithDuration:.5
                 animations:^{
                     webViewDistFromBottom.constant=webViewDistFromBottomDefault;
                     mapViewDistFromTop.constant=mapViewDistFromTopDefault;
                     [self.directoryWebView layoutIfNeeded];
                     [self.detailMapView layoutIfNeeded];
                 }];

[self updateDetailViews];

...

if ((dblLatitude != 0) && (dblLongitude != 0)) {
    zoomLocation.latitude = dblLatitude;
    zoomLocation.longitude = dblLongitude;

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, METERS_PER_MILE, METERS_PER_MILE);
    MKCoordinateRegion adjustedRegion = [detailMapView regionThatFits:viewRegion];
    [detailMapView setRegion:adjustedRegion animated:YES];
}
CLLocationCoordinate2D coordinate;
coordinate.latitude = dblLatitude;
coordinate.longitude = dblLongitude;

...

[detailMapView addAnnotation:annotation];
} 
```

所有这些都像我打算的那样工作。旋转设备时会出现此问题。如果我从 iPad 以纵向模式开始，则 webViewDistFromBottom 和 mapViewDistFromTop 约束设置为 490，因为上面的 updateDetailViews 函数具有以下计算：

```
displayHeight = self.maximumUsableFrame.size.height;
viewDistance=displayHeight/2+centerMapButton.frame.size.height/2+16; 
```

如果 iPad 旋转到横向，将调用 willAnimateRotationToInterfaceOrientation 函数，然后调用 updateDetailViews，将 viewDistance 设置为 367（以及相应的 webViewDistFromBottom.constant 和 mapViewDistFromTop.constant）。顶部的 UIWebView 看起来应该如此，但是底部的 MKMapView 却没有。mapViewDistFromTop 约束设置为 367（如果我将值输出到日志），但它似乎仍设置为 490。我的 updateDetailViews 函数调用 [self.view layoutIfNeeded]（我也尝试过 [detailMapView layoutIfNeeded]， [detailMapView setNeedsLayout])，但该视图未正确显示。与顶部的距离太大。如果我将 iPad 转回纵向，它看起来还不错。

如果 iPad 以横向模式启动，然后旋转为纵向模式，我也会遇到同样的问题。在横向模式下，mapViewDistFromTop 和 webViewDistFromBottom 的值为 367，一旦旋转为纵向，则设置为 490。但是，底部的MKMapView看起来与顶部的距离仍然是367，覆盖了太多的显示。

知道我做错了什么吗？提前感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:58:35.420

如果我正确理解了这个问题，那么在纵向时，您需要一个底部 480 点高的地图视图，而在横向时，您希望 Web 视图占据整个屏幕。另一种方法是仅修改地图视图的高度（纵向为 480，横向为 0）。不要删除地图视图，只需将其高度设置为 0。让现有的约束处理其他所有事情。然后没有添加约束、视图等的修改。您需要做的就是在旋转时调整一个常数。这能完成工作吗？

为了说明这一点，在这种情况下，我建议您设置约束（我将只关注垂直约束），以便它们等效于

```
V:|[webView][mapView(480)]| 
```

（我不建议你使用 VFL 来指定约束，但这只是表达我使用的一系列约束的最简洁的方式。）注意，确保你没有任何无关的约束浮动（例如 web 视图底部对超级视图等的约束）。我提议，在垂直维度上，只是这些约束（Web 视图顶部到超级视图、Web 视图底部到地图视图顶部、地图视图高度和地图视图底部到超级视图）。

然后，为 的高度约束定义并链接一个出口`mapView`：

```
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *mapViewHeightConstraint; 
```

最后，在旋转时，只需更改该约束的常量：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];

    if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation))
        self.mapViewHeightConstraint.constant = 480.0;
    else
        self.mapViewHeightConstraint.constant = 0.0;
} 
```

如果我了解您正在拍摄的 UI，我认为这就是您所需要的，消除了您问题中的所有其他代码。我刚刚测试了它，它似乎工作正常。

# javascript - Maven 的 Jasmine 插件：SNAPSHOT 问题

> ID：15384929
> 
> 赞同：1
> 
> 时间：2013-03-13T12:09:39.997
> 
> 标签：javascript, unit-testing, maven, plugins, jasmine

我是 Maven 和 Jasmine 的新手，首先我尝试按照[github 页面上](http://searls.github.com/jasmine-maven-plugin/usage.html)的使用示例进行操作，这是第一个开始的命令：

> mvn archetype:generate -DarchetypeRepository= [http://searls-maven-repository.googlecode.com/svn/trunk/snapshots](http://searls-maven-repository.googlecode.com/svn/trunk/snapshots) -DarchetypeGroupId=com.github.searls -DarchetypeArtifactId=jasmine-archetype -DarchetypeVersion=1.3.1.0-SNAPSHOT -DgroupId =com.acme -DartifactId=my-jasmine-project -Dversion=0.0.1-SNAPSHOT

如果你去[这里的 archtype 存储库](http://searls-maven-repository.googlecode.com/svn/trunk/snapshots/com/github/searls/jasmine-archetype/)；最新的快照是 1.2.0。上面的命令指的是 1.3.1 中的`-DarchetypeVersion=1.3.1.0-SNAPSHOT`.

我收到此错误：

> 无法在项目 Standalone-pom 上执行目标 org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli)：所需的原型不存在（com.github.searls:jasmine-archetype:1.3 .1.0-快照）

我应该使用另一个存储库吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T09:53:28.480

我能够使用此配置生成原型。

```
mvn archetype:generate \
-DarchetypeRepository=http://repo1.maven.org/maven2/com/github/searls/jasmine-archetype/2.0/ \
-DarchetypeGroupId=com.github.searls \
-DarchetypeArtifactId=jasmine-archetype \
-DarchetypeVersion=2.0 \
-DjasminePluginVersion=2.1 \
-DgroupId=com.test \
-DartifactId=test \
-Dversion=1.0 
```

# c# - 如何在富文本 C# 中查找图片？

> ID：15384930
> 
> 赞同：0
> 
> 时间：2013-03-13T12:09:40.607
> 
> 标签：c#, .net, find, image

如何在富文本中查找图片，有什么方法可以做到吗？

我需要从富文本生成 html，所以我需要找到图片并找到在哪个位置。

这是我用来将图片放入富文本的代码

```
 Clipboard cl;            
        Bitmap myBitmap = new Bitmap("c:\\time.png");
        Clipboard.SetDataObject(myBitmap);
        Clipboard.SetImage(myBitmap);         
        rchBody.Paste(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:19:10.493

虽然不完全相同，但您是否看过其他 SO 问题？[将 Rtf 转换为 HTML](https://stackoverflow.com/questions/439301/convert-rtf-to-html)。

答案将您指向这篇文章： http: [//www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter](http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter)

在那里你可以获得很多关于如何做的细节，包括带有图像的 RTF。

# bash - 与退出状态的比较不起作用

> ID：15384941
> 
> 赞同：3
> 
> 时间：2013-03-13T12:10:11.363
> 
> 标签：bash

我正在尝试自定义我的 bash 提示符。如果我输入一个不存在的命令，或者由于其他原因失败，我希望它改变颜色。我对 bash 脚本的编码相当陌生，所以我查看了其他一些脚本以便获得一些帮助，但有些东西不起作用。这是我的代码：

```
export PROMPT_COMMAND="
    PS1='`
        if [ $? -eq 0 ];
            then echo '
                \[\033[00;32m\]┌─\[\033[00;35m\]\u\[\033[01;32m\]@
                \[\033[00;35m\]\h\n\[\033[00;32m\]└─\[\033[01;32m\]
                (\[\033[01;35m\]\W\[\033[01;32m\])\[\033[00;32m\]\$';
         else echo '
                \[\033[00;31m\]┌─\[\033[00;35m\]\u\[\033[01;31m\]@
                \[\033[00;35m\]\h\n\[\033[00;31m\]└─\[\033[01;31m\]
                (\[\033[35m\]\W\[\033[31m\])\[\033[00;31m\]\$';
         fi`\[\033[0m\]'" 
```

我在实际代码中没有任何换行符，因为这会对 PS1 造成混乱，我只是添加了它们以使代码更易于阅读。

所以，我想比较一下退出状态，**$?** , 为*0*。出于某种原因，变量 $? 在脚本中根本没有改变。它只是保持*0*，因此第一个条件始终为真，即使我发出错误的命令也是如此。我试过添加*echo $?* 到 if-case 之前的代码，这总是返回 0，即使发出*echo $?* 作为终端的命令返回不同的东西。我试过将工作代码复制到我的，但这也不能解决它。此外，当我使用**'**作为外部引用和**"**作为第二个引用时，它起作用了。我改变了这个，因为脚本不会接受**(**否则作为一个字符。

任何想法为什么会这样以及如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:54:26.623

您的代码中的问题是您的报价被破坏了：

```
export PROMPT_COMMAND="
PS1='`
    if [ $? -eq 0 ];
        then echo ' 
```

通常它应该工作，试试这个：

```
PS1='`if [ $? -eq 0 ] ; then echo Y:; else echo N:; fi` 
```

这是应用代码后的输出：

```
$ PS1='`如果 [ $? -eq 0 ] ; 然后回显 Y:; 否则回显 N:; 菲`'
是的：
是的：
是的：
是：假
纽：
纽：
N:真
是的：
是的：

```

注意：只需按`ENTER`键，不会更改提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T20:45:54.933

正如 H.-Dirk Schmitt 的出色回答的后续行动一样，这对我有用（我不会费心解释代码，这已经比我做得更好了）；

```
PS1='`
  if [ $? -eq 0 ];
    then echo -n "\[\033\[00;35m\]\u\[\033\[01;32m\]@\[\033\[00;35m\]\h\[\033\[00;32m\](\[\033\[01;35m\]\W\[\033\[01;32m\])\[\033\[00;32m\]\$";
    else echo -n "\[\033\[00;35m\]\u\[\033\[01;31m\]@\[\033\[00;35m\]\h\[\033\[01;31m\](\[\033\[35m\]\W\[\033\[31m\])\[\033\[00;31m\]\$";
  fi`\[\033\[0m\]' 
```

![重击颜色](../Images/0cc95f085fb401279eb6c0efae4bbec4.png)

# openvms - 无法删除 OpenVMS 上的打印机队列

> ID：15384942
> 
> 赞同：0
> 
> 时间：2013-03-13T12:10:12.307
> 
> 标签：openvms, vms

我试图删除打印机队列，但我总是收到消息：$> delete/que myprinter %DELETE-E-NOTDELETED，删除 MYPRINTER -JBC-E-REFERENCED 时出错，现有引用阻止删除 $> sh que/all/full myprinter服务器队列 MYPRINTER，已停止，在 MYSERVER:: 上，安装形式 A4_LINEP_LS (stock=DEFAULT) /BASE_PRIORITY=4 /DEFAULT=(FEED,FORM=DEFAULT) /OWNER=[SYSTEM] /PROCESSOR=TCPIP$LPD_SMB /PROTECTION=(S :M,O:D,G:R,W:S) /保留

我尝试在这种情况下建议的“用户操作” - 删除所有条目和对队列的引用，显然没有更多引用，因为 $ show que/full/all 命令什么也没显示。无论如何，那里必须有一个隐藏的参考，但在哪里？你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:55:48.847

从 OpenVMS System Manager's Manual 中：*您尝试删除的队列可能被命名为通用队列的目标*...。要检查这样的目标队列，请执行`$ pipe show queue/generic/full |search sys$pipe generic`. 如果您的队列显示您希望将其从通用队列中删除。

# ruby-on-rails-3 - 使用 LIKE 的 ActiveRecord 搜索模型仅返回完全匹配

> ID：15384944
> 
> 赞同：1
> 
> 时间：2013-03-13T12:10:19.617
> 
> 标签：ruby-on-rails-3, activerecord

在我的 rails 应用程序中，我试图根据某些条件搜索*用户模型。*

特别是，我有一个*位置*字段，它是一个字符串，我想根据它是否*包含*搜索字符串来搜索这个字段。例如，如果我搜索位置为“牛津”的用户，我希望它也返回具有该变体的用户，例如“牛津，英格兰”。

在网上搜索了这个问题的答案后，我似乎应该在 activerecord 搜索中使用 LIKE 关键字，但对我来说这只是返回完全匹配。

这是我的搜索方法中的代码片段

```
conditions_array = []
conditions_array << [ 'lower(location) LIKE ?', options[:location].downcase ] if !options[:location].empty?
conditions = build_search_conditions(conditions_array)
results = User.where(conditions) 
```

难道我做错了什么？还是使用 LIKE 不是实现目标的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:13:29.107

你需要做`like '%oxford%'`

`%`匹配任意数量的字符，甚至是零个字符

```
conditions_array << [ 'lower(location) LIKE ?', "%#{options[:location].downcase}%" ] if !options[:location].empty? 
```

# javascript - 使用javascript的文件下载弹出框

> ID：15384946
> 
> 赞同：1
> 
> 时间：2013-03-13T12:10:29.903
> 
> 标签：javascript, asp.net, ajax, download

我正在开发 ASP.NET Web 表单应用程序。我正在我的 Web 服务代码中的服务器端处理文件。这个网络方法将返回我文件内存流。我想使用 javascript 方法在客户端使用这个内存流。在 js 方法中处理后，我将打开弹出窗口以下载该内存流。

```
function ExportExel(){

    $.ajax({
        type: "POST",
        url: baseUrl + '/' + "WebServices/ExtraInfoWebService.asmx/Urlhttphandler",
        data: {},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {

            //********some code require here.... *************
        }
    });
} 
```

在 msg.di 中获取内存流我需要这里的代码

```
//********some code require here.... ************* 
```

显示文件下载弹出窗口。任何帮助/指针都会对我有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:16:22.880

为此，您需要向`new request`服务器提供.. `Ajax`调用不提供那么多功能（在获取流时显示弹出窗口）如果您发送新请求和响应以流的形式获取。浏览器显示`save and open popup`. 你不需要手动做

# plsql - 如何在 pl/sql 中安排作业？

> ID：15384952
> 
> 赞同：1
> 
> 时间：2013-03-13T12:10:36.533
> 
> 标签：plsql, oracle10g

我创建了一个名为的存储过程

```
traffic_details_temp_send_mail; 
```

如何让这个程序每天上午 10 点运行？

请帮助代码块。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T12:13:39.793

您可以创建调度程序作业：

```
begin
    dbms_scheduler.create_job(job_name        => 'TRAFFIC_DETAILS_JOB',
                              job_type        => 'STORED_PROCEDURE',
                              job_action      => 'traffic_details_temp_send_mail',
                              start_date      => systimestamp,
                              end_date        => null,
                              repeat_interval => 'freq=daily; byhour=10; byminute=0; bysecond=0;',
                              enabled         => true,
                              auto_drop       => false,
                              comments        => 'your description here.');
end;
/ 
```

然后您可以在调度程序作业视图（user_scheduler_jobs 等）中查看详细信息。有关 schehduler 作业的信息，请参见[此处](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm)。

# c# - 禁用特定控件的设计模式

> ID：15384954
> 
> 赞同：4
> 
> 时间：2013-03-13T12:10:42.043
> 
> 标签：c#, wpf, visual-studio, visual-studio-2012

我目前正在使用本机 Windows 控件，它应该出现在我的 WPF 设计视图中，但是当我关闭设计选项卡时，它会使整个 IDE 崩溃。

有没有做以下任何一个？

*   阻止此特定类的实例出现在设计视图中。
*   让此类在设计视图中显示替代图像。
*   阻止此本机控件使 IDE 崩溃（仅在选项卡关闭时）。

我的特定本机控件是[Scintilla](http://www.scintilla.org)，我用[HwndHost](http://msdn.microsoft.com/en-gb/library/system.windows.interop.hwndhost.aspx)显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:13:06.577

您需要插入对设计模式的检查，并执行仅在您未处于设计模式时才会导致问题的代码。

看：

[WPF 中是否有 DesignMode 属性？](https://stackoverflow.com/questions/425760/is-there-a-designmode-property-in-wpf)

# iphone - 如何识别 PDF 文档中的封面

> ID：15384959
> 
> 赞同：3
> 
> 时间：2013-03-13T12:10:46.610
> 
> 标签：iphone, ios, pdf, quartz-graphics, cgpdfdocument

我想实现一个 PDF-Viewer，它一次并排显示两页文档。自然地，如果文档存在，则应该单独显示封面页，以便同时显示属于一起的那些页面。问题是有些文档的首页有封面，有些似乎有封面，然后是封底作为首页，而有些则两者都没有。

我的问题是：我怎么知道是否有一个或多个封面？封面是否带有可以识别的特殊标记？或者这可能是检查页码的问题？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:36:39.640

PDF 格式中没有“封面”的概念。您不会从 PDF 对象中获得此信息。也没有页码信息（除了您已经拥有的页码）

# c++ - 对多个索引数据数组的面向数据的访问

> ID：15384968
> 
> 赞同：15
> 
> 时间：2013-03-13T12:11:23.130
> 
> 标签：c++, data-oriented-design

我正在为游戏引擎开发实体组件系统。我的目标之一是使用面向数据的方法来优化数据处理。换句话说，我想遵循宁愿需要数组结构而不是结构数组的准则。但是，我的问题是我还没有找到一种巧妙的方法来为我解决这个问题。

到目前为止，我的想法是系统中的每个组件都负责游戏逻辑的特定部分，比如重力组件负责根据质量、速度等计算每一帧的力，而其他组件负责其他事情。因此，每个组件都对不同的数据集感兴趣。重力组件可能对质量和速度感兴趣，而碰撞组件可能对边界框和位置等感兴趣。

到目前为止，我认为我可以拥有一个数据管理器，它可以为每个属性保存一个数组。假设实体可能具有重量、位置、速度等中的一项或多项，并且它们将具有唯一的 ID。数据管理器中的数据将表示如下，其中每个数字代表一个实体 ID：

```
weightarray ->   [0,1,2,3]
positionarray -> [0,1,2,3]
velocityarray -> [0,1,2,3] 
```

如果所有实体都具有每个属性，则此方法效果很好。但是，如果只有实体 0 和 2 具有所有树属性，而其他实体是不移动类型的实体，它们将没有速度，数据将如下所示：

```
weightarray ->   [0,1,2,3]
positionarray -> [0,1,2,3]
velocityarray -> [0,2]     //either squash it like this
velocityarray -> [0  ,2  ]     //or leave "empty gaps" to keep alignment 
```

突然间，迭代它并不容易。如果我采用第二种方法，一个只对迭代和操纵速度感兴趣的组件将不得不以某种方式跳过空白间隙。保持数组短的第一种方法在更复杂的情况下也不能很好地工作。假设我有一个具有所有三个属性的实体 0，另一个只有重量和位置的实体 1，以及只有位置和速度的实体 2。最后，最后一个实体 3 只有权重。被压扁的数组看起来像：

```
weightarray ->   [0,1,3]
positionarray -> [0,1,2]
velocityarray -> [0,2] 
```

另一种方法会留下如下空白：

```
weightarray ->   [0,1, ,3]
positionarray -> [0,1,2, ]
velocityarray -> [0, ,2, ] 
```

如果您只对迭代只有少数属性的实体集感兴趣，那么这两种情况都不是简单的迭代。例如，给定的组件 X 会对处理具有位置和速度的实体感兴趣。如何提取可迭代数组指针以提供给该组件进行计算？我想给它一个数组，其中元素彼此相邻，但这似乎是不可能的。

我一直在考虑解决方案，例如为每个数组设置一个位字段，描述哪些点是有效的，哪些是间隙，或者一个系统将数据复制到没有孔的临时数组，然后将其提供给组件，以及其他想法，但我认为没有一个是优雅的，并且没有额外的处理开销（例如额外检查数据是否有效，或额外复制数据）。

我在这里问是因为我希望你们中的某些人可能有类似的经验，或者可能有有助于解决这个问题的想法或想法。:) 此外，如果这整个想法是废话并且不可能正确，而您有一个更好的想法，请告诉我。希望这个问题不会太长或太混乱。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T18:07:05.960

好问题。但是，据我所知，这个问题没有直接的解决方案。有多种解决方案（您已经提到了其中一些），但我没有看到直接的灵丹妙药解决方案。

我们先来看看目标。目标不是将所有数据放在线性数组中，这只是达到目标的手段。目标是通过最小化缓存未命中来优化性能。就这样。如果您使用 OOP-Objects，您的实体数据将被您不一定需要的数据包围。如果您的体系结构的缓存线大小为 64 字节，而您只需要权重 (float)、位置 (vec3) 和速度 (vec3)，则使用 28 字节，但无论如何都会加载剩余的 36 字节。更糟糕的是，当这 3 个值不在内存中并排或您的数据结构与缓存线边界重叠时，您将加载多个缓存线，仅 28 字节的实际使用数据。

现在，当你这样做几次时，这并不是那么糟糕。即使你这样做一百次，你也几乎不会注意到它。但是，如果您每秒执行数千次，则可能会成为问题。所以进入 DOD，您可以在其中优化缓存利用率，通常在存在线性访问模式的情况下为每个变量创建线性数组。在你的情况下，重量、位置、速度的数组。当您加载一个实体的位置时，您再次加载了 64 字节的数据。但是因为您的位置数据在一个数组中并排放置，所以您不会加载 1 个位置值，而是加载 5 个相邻实体的数据。更新循环的下一次迭代可能需要下一个位置值，该值已经加载到缓存中，依此类推，直到第 6 个实体才需要从主内存加载新数据。

因此，DOD 的目标不是使用线性数组，而是通过将在（大约）同时访问的数据相邻地放置在内存中来最大化缓存利用率。如果您几乎总是同时访问 3 个变量，则不需要为每个变量创建 3 个数组，您可以轻松地创建一个仅包含这 3 个值的结构并创建这些结构的数组。最佳解决方案始终取决于您使用数据的方式。如果您的访问模式是线性的，但您并不总是使用所有变量，请使用单独的线性数组。如果您的访问模式更不规则，但您总是同时使用所有变量，请将它们放在一个结构中并创建这些结构的数组。

因此，您的答案很简短：这完全取决于您的数据使用情况。这就是我不能直接回答你的问题的原因。我可以给你一些关于如何处理你的数据的想法，你可以自己决定哪个对你的情况最有用（如果有的话），或者你可以调整/混合它们。

您可以将访问最多的数据保存在一个连续的数组中。例如，位置经常被许多不同的组件使用，因此它是连续数组的主要候选者。另一方面，重量仅由重力组件使用，因此此处可能存在间隙。您已经针对最常用的情况进行了优化，并且对于不经常使用的数据将获得较低的性能。尽管如此，由于多种原因，我不是该解决方案的忠实拥护者：它仍然效率低下，您将加载太多空数据，#特定组件/#总实体的比率越低，它变得越糟糕。如果只有八分之一的实体具有重力分量，并且这些实体均匀分布在整个数组中，则每次更新仍然会出现一次缓存未命中。它还假设所有实体都有一个位置（或任何公共变量），它' 很难添加和删除实体，它既不灵活又丑陋（无论如何，恕我直言）。不过，这可能是最简单的解决方案。

解决这个问题的另一种方法是使用索引。组件的每个数组都将被打包，但是还有两个额外的数组，一个从组件数组索引中获取实体 id，第二个从实体 id 获取组件数组索引。假设位置由所有实体共享，而重量和速度仅由重力使用。您现在可以遍历打包的重量和速度数组，并获取/设置相应的位置，您可以获取 GravityIndex -> entityID 值，转到 Position 组件，使用它的 entityID -> positionIndex 来获取正确的索引位置数组。优点是您的重量和速度访问将不再给您缓存未命中，但如果 #gravity components / #position components 之间的比率较低，您仍然会获得位置的缓存未命中。您还可以获得额外的 2 个数组查找，但在大多数情况下，一个 16 位无符号整数索引应该足够了，因此这些数组将很好地适合缓存，这意味着在大多数情况下这可能不是一个非常昂贵的操作。不过，配置文件配置文件可以确保这一点！

第三种选择是数据复制。现在，我很确定在重力组件的情况下这不值得付出努力，我认为它在计算量大的情况下更有趣，但无论如何让我们以它为例。在这种情况下，重力组件有 3 个用于重量、速度和位置的打包数组。它还具有与您在第二个选项中看到的类似的索引表。当您开始 Gravity 组件更新时，您首先使用示例 2 中的索引表从 Position 组件中的原始位置数组更新位置数组。现在您有 3 个打包数组，您可以使用最大缓存进行线性计算利用率。完成后，使用索引表将位置复制回原始位置组件。现在，这不会 如果您将第二个选项用于 Gravity 之类的东西，它不会比第二个选项更快（实际上可能更慢），因为您只读取和写入一次位置。但是，假设您有一个组件，其中实体相互交互，每个更新传递都需要多次读取和写入，这可能会更快。尽管如此，一切都取决于访问模式。

我要提到的最后一个选项是基于变更的系统。您可以轻松地将其改编为消息传递系统之类的东西。在这种情况下，您只更新已更改的数据。在您的 Gravity 组件中，大多数物体将毫无变化地躺在地板上，但少数物体正在下落。Gravity 组件具有用于位置、速度、重量的打包数组。如果在更新循环期间更新了职位，则将实体 ID 和新职位添加到更改列表中。完成后，您将这些更改发送到任何其他保持位置值的组件。同样的原理，如果任何其他组件（例如，播放器控制组件）更改位置，它将发送更改实体的新位置，Gravity 组件可以侦听并仅更新其位置数组中的那些位置。你' 将像前面的示例一样复制大量数据，但不是在每个更新周期重新读取所有数据，而是仅在数据更改时更新数据。在少量数据实际更改每一帧的情况下非常有用，但如果大量数据更改可能会变得无效。

所以没有银弹。有很多选择。最佳解决方案完全取决于您的情况、您的数据以及您处理该数据的方式。也许我给出的例子都不适合你，也许所有的例子都适合你。并非每个组件都必须以相同的方式工作，有些可能使用更改/消息系统，而另一些则使用索引选项。请记住，尽管如果您需要性能，许多 DOD 性能指南都很棒，但它仅在某些情况下有用。DOD 不是总是使用数组，也不是总是最大化缓存利用率，你应该只在真正重要的地方这样做。配置文件配置文件。了解您的数据。了解您的数据访问模式。了解您的（缓存）架构。如果你做了所有这些，当你推理时，解决方案就会变得很明显:)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T16:12:48.150

该解决方案实际上是接受您可以优化的程度存在限制。

解决gap问题只会引入以下内容：

*   If 语句（分支）处理数据异常（缺少组件的实体）。
*   引入漏洞意味着您也可以随机迭代列表。国防部的强大之处在于，所有数据都按照处理方式紧密打包和排序。

你可能想做的事：

创建针对不同系统/案例优化的不同列表。每帧：仅将需要它的实体（具有该特定组件）的属性从一个系统复制到另一个系统。

具有以下简化列表及其属性：

*   **刚体**（力、速度、变换）
*   **碰撞**（边界框，变换）
*   **可绘制**（texture_id，shader_id，变换）
*   **刚体**到碰撞（刚体索引，碰撞索引）
*   **碰撞**到刚体（碰撞索引，刚体索引）
*   **刚体**到可绘制（刚体索引，可绘制索引）

ETC...

对于流程/作业，您可能需要以下内容：

*   **RigidbodyApplyForces(...)**，对速度施加力（例如重力）
*   **RigidbodyIntegrate(...)**，将速度应用于变换。
*   **RigidbodyToCollision(...)**，仅针对具有碰撞组件的实体将刚体变换复制到碰撞变换。“rigidbody_to_collision”列表包含应该将哪个刚体 ID 复制到哪个碰撞 ID 的索引。这使碰撞列表保持紧密。
*   **RigidbodyToDrawable(...)**，将刚体变换复制到具有绘制组件的实体的可绘制变换。“rigidbody_to_drawable”列表包含应该将哪个刚体 ID 复制到哪个可绘制 ID 的索引。这使 drawabkl 列表保持紧密。
*   **CollisionUpdateBoundingBoxes(...)**，使用新的变换更新边界框。
*   **CollisionRecalculateHashgrid(...)**，使用边界框更新 hashgrid。您可能希望在多个帧上执行此操作以分配负载。
*   **CollisionBroadphaseResolve(...)**，使用 hashgrid 等计算可能的碰撞......
*   **CollisionMidphaseResolve(...)**，使用broadphase等的边界框计算碰撞......
*   **CollisionNarrowphaseResolve(...)**，使用中相等的多边形计算碰撞......
*   **CollisionToRigidbody(...)**，将碰撞物体的反作用力添加到刚体力。“collision_to_rigidbody”列表包含从哪个碰撞 ID 将力添加到哪个刚体 ID 的索引。您还可以创建另一个名为“reactive_forces_to_be_added”的列表。您可以使用它来延迟添加力。
*   **RenderDrawable(...)**，将可绘制对象渲染到屏幕（渲染器只是简化了）。

当然，您将需要更多的流程/工作。您可能想要对可绘制对象进行遮挡和排序，在物理和可绘制对象之间添加一个变换图系统（请参阅 Sony 演示文稿，了解您如何执行此操作）等。作业的执行可以分布在多个内核上执行。当一切都只是一个列表时，这很容易，因为它们可以分为多个列表。

在创建实体时，组件数据也将一起创建并以相同的顺序存储。这意味着列表将大部分保持相同的顺序。

在“将对象复制到对象”过程中。如果跳过孔确实*成为*一个问题，您总是可以创建一个“重新排序对象”过程，该过程将在每一帧结束时分布在多个帧上，将对象重新排序为最佳顺序。需要最少跳过孔的顺序。跳过漏洞是为了让所有列表尽可能紧凑而付出的代价，并且还允许以将要处理的方式对其进行排序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-21T03:22:33.953

我依靠两个结构来解决这个问题。希望图表足够清晰（否则我可以添加进一步的解释）：

[![在此处输入图像描述](../Images/5896459c253f43f2c4de3c87d4d7008d.png)](https://i.stack.imgur.com/1p3M7.png)

稀疏数组允许我们将数据并行关联到另一个数据，而不会从未使用的索引中占用太多内存，也不会降低空间局部性（因为每个块连续存储一堆元素）。

您可能会使用比 512 更小的块大小，因为对于特定的组件类型来说这可能非常大。32 之类的值可能是合理的，或者您可以根据`sizeof(ComponentType)`. 有了这个，您可以将您的组件与您的实体并行关联，而不会从未占用的空间中过多地使用内存，尽管我不那样使用它（我使用垂直类型的表示，但我的系统有很多组件类型 - - 如果你只有几个，你可能只是并行存储所有东西）。

但是，我们在迭代时需要另一个结构来确定哪些索引被占用。在那里我使用了一个分层位集（我非常*喜欢*并使用这种数据结构，但我不知道它是否有正式名称，因为它只是我在不知道它叫什么的情况下制作的东西）：

[![在此处输入图像描述](../Images/0d66cbf5fa7810656c341693529067d3.png)](https://i.stack.imgur.com/4olSY.png)

这允许始终按顺序访问被占用的元素（类似于使用排序索引）。这种结构对于顺序迭代来说非常快，因为测试单个位可能表明可以处理一百万个连续元素，而无需检查一百万位或必须将一百万个索引存储和访问到容器中。

作为奖励，它还允许您在最佳情况下设置交集`Log(N)/Log(64)`（例如：能够在 3-4 次迭代中找到两个包含一百万个元素的密集索引集之间的集合交集）如果您需要快速设置对 ECS 来说通常非常方便的交叉点。

这两个结构是我的 ECS 引擎的支柱。它们非常快，因为我可以处理 200 万个粒子实体（访问两个不同的组件），而无需以略低于 30 FPS 的速度缓存具有两个组件的实体的查询。当然，对于仅 200 万个粒子来说，这只是一个糟糕的帧速率，但这是在将它们表示为具有两个组件（运动和精灵）的完整实体时，粒子系统每帧执行查询，未缓存 - 人们通常永远不会做（最好像一个`ParticleEmitter`代表给定实体的许多粒子的组件一样使用，而不是使粒子本身成为一个完整的独立实体）。

如果您有兴趣，希望图表足够清晰，可以实现您自己的版本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-13T16:46:16.227

与其解决数据的结构问题，我只想提供关于我过去如何完成此类工作的观点。

游戏引擎有一个负责游戏中各种系统的管理器列表（InputManager、PhysicsManager、RenderManager 等）。

3D 世界中的大多数事物都由一个 Object 类表示，并且每个 Object 可以有任意数量的组件。每个组件负责对象行为的不同方面（RenderComponent、PhysicsComponent 等）。

物理组件负责加载物理网格，并为其提供所有必要的属性，如质量、密度、质心、惯性响应数据等。该组件还存储有关物理模型曾经存在于世界中的信息，例如位置、旋转、线速度、角速度等。

PhysicsManager 了解由任何物理组件加载的每个物理网格，这允许该管理器处理所有与物理相关的任务，例如碰撞检测、发送碰撞消息、进行物理射线投射。

如果我们想要只有少数对象需要的特殊行为，我们将为它创建一个组件，并让该组件操纵速度或摩擦力等数据，这些变化将被 PhysicsManager 看到并在物理模拟中解释。

就数据结构而言，您可以拥有我上面提到的系统并以多种方式对其进行构建。通常，对象保存在 Vector 或 Map 中，组件保存在 Object 上的 Vector 或 List 中。就物理信息而言，PhysicsManager 有一个所有物理对象的列表，可以存储在 Array/Vector 中，PhysicsComponent 有它的位置、速度和其他数据的副本，以便它可以做任何事情需要由物理管理器处理该数据。例如，如果你想改变一个物体的速度，你只需告诉 PhysicsComponent，它会改变它的速度值，然后通知 PhysicsManager。

我在这里更多地谈论对象/组件引擎结构的主题：[https ://gamedev.stackexchange.com/a/23578/12611](https://gamedev.stackexchange.com/a/23578/12611)

# postscript - 如何在ghostscript中将矢量打印到标准输出

> ID：15384970
> 
> 赞同：2
> 
> 时间：2013-03-13T12:11:30.103
> 
> 标签：postscript

我想从 postscript 中获取 StandardEncoding 向量（PLRM 的附录 E.6 中有图形版本，但没有文本）。我正在寻找类似于 [/A /B /C /D] 的东西，但实际上，我可以通过正则表达式将编码向量中的位置与字符命令相关联的任何东西都会很好。

我试过了

```
(%stdout)
(w)
file
/StandardEncoding
writestring 
```

但它（显然）不起作用，因为 /StandardEncoding 不是字符串。我如何将这样的矢量打印到标准输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T03:36:52.230

最简单的。

```
StandardEncoding == 
```

或使用索引。十进制：

```
0 StandardEncoding { exch dup =only(: )print 1 add exch == } forall pop 
```

八进制：

```
0 StandardEncoding { exch dup 8 3 string cvrs =only(: )print 1 add exch == } forall pop 
```

十六进制：

```
0 StandardEncoding { exch dup 16 2 string cvrs =only(: )print 1 add exch == } forall pop 
```

此外，您应该知道这`/StandardEncoding`是一个*文字*名称（因为`/`），因此名称本身位于堆栈上。如果您进行了下一步并转换为字符串，它只会打印单词“StandardEncoding”。因此，要自动加载（并可能执行）与名称关联的值，请删除斜杠 ( `/`)，以便名称是*可执行*的。单词`StandardEncoding`（没有斜线！）成为向量。斜线的工作方式很像`quote`Lisp 系列语言。

为了说明，这里有更多的方法来打印和迭代数组。

```
StandardEncoding {
    (%stdout)(w)file exch 80 string cvs writestring
    (%stdout)(w)file (\n) writestring
} forall

StandardEncoding
0 1 2 index length 1 sub {  % Arr i
    2 copy get 80 string cvs print  % Arr i
    (\n) print  % Arr i
    pop  % Arr
} for

[ StandardEncoding 0 {
    {
        2 copy get ==only
        ()=
        1 add
    } loop
} stopped cleartomark 
```

最后一个使用无限循环并捕获在尝试读取不存在的元素`rangecheck`时发出的错误信号。`get`它会在堆栈 ( ) 上留下 5 个值`StandardEncoding 256 StandardEncoding 256 true`，您可以将其丢弃，`cleartomark`如图所示，或者简单地`pop pop pop pop pop`(或`5{pop}repeat`)。

*编辑：*进一步玩最后一个例子。这将错误捕获隔离到预期会引发错误的操作员。隔离预期错误可以让任何意外错误打印通常的诊断信息。

```
[ StandardEncoding 0 {
    2 copy
    { get } stopped { exit } if
    ==only ()=
    1 add
} loop cleartomark 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:02:39.770

您可以使用“==”和“forall”：

```
([) =
StandardEncoding { == } forall
(]) = 
```

# apache-flex - 在 ActionScript 中的 Flex 中画线

> ID：15384976
> 
> 赞同：0
> 
> 时间：2013-03-13T12:11:42.600
> 
> 标签：apache-flex, actionscript, line, draw

我真的不明白我做错了什么：这是一个简单的例子，但是当我点击按钮时没有任何反应..

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
 xmlns:s="library://ns.adobe.com/flex/spark" 
xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955"minHeight="600">

<fx:Script>
    <![CDATA[

        private function drawLine():void 
        {
            var myShape:Shape = new Shape();
            myShape = new Shape() ;
            myShape.graphics.lineStyle(2, 0x990000, .75);
            myShape.graphics.moveTo(100, 100);

            myShape.graphics.lineTo(25, 45);
            this.addChild(myShape);
        }
    ]]>
</fx:Script>
<!--<mx:Label text="Hello World"/>-->
<mx:Button label="Click" click="drawLine()" />

</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:45:41.493

用于`SpriteVisualElement`添加简单的非弹性对象。

```
<s:SpriteVisualElement width="500" height="500" id="spr"/>

spr.addChild(myShape) 
```

# sql - 案例条款执行程序

> ID：15384979
> 
> 赞同：0
> 
> 时间：2013-03-13T12:12:01.227
> 
> 标签：sql, performance, oracle, query-performance

嗨，我有一个非常慢的 SQL。

```
select case when (value=1) 
then (select <Some Math Logic> from table where table.id=table_2.id) 
else 'false' end 
from table_2 where <where clause> 
```

我想知道的是case条款是如何工作的..??

该零件`select <Some Math Logic> from table`正在处理巨大的桌子。

在 Java 中，我们看到 if 语句

```
if(condition_1==true) 
{return output;} 
else 
{return false;} 
```

如果 if 语句为假，那么它里面的部分永远不会被处理，那么我想知道的是它在 oracle SQL 中是否也相同。

它是否适用于以下逻辑..??

*   检查案例条件
*   如果为真，则处理内部输出
*   else 处理其他输出。

还是采用以下逻辑：

*   预处理所有子查询
*   检查案例条件
*   如果为真，则显示在输出内部
*   否则显示其他输出。

请帮忙

编辑：伙计们，我不想调整上面显示的查询......这只是一个虚拟的。

我需要知道的是 case 条款是如何一步一步地工作的。

如果有人对此有一些意见，请分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:21:18.997

这能解决你的问题吗？

```
SELECT
   COALESCE(<Some Math Logic>, 'false')
FROM table_2 T2
    LEFT JOIN table T
        ON T.Id = T2.Id
           and T2.value = 1
WHERE <where clause> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:21:44.220

好问题。您需要查看执行计划才能确定。数据库引擎可以免费使用它认为合适的任何算法，只要它能够为您提供您要求的结果。

它甚至可以通过外连接`table`来获得预期值 = 1 的结果。或者它可以运行从表中选择并将结果存储到一个临时表中，它可以在运行主查询时扫描该临时表。

然而，最有可能的是，它正在为 value = 1 的每一行运行子查询。如果没有看到计划，很难判断。

这也取决于 . 你在服用聚合体吗？如果是这样，真正的连接可能是不可能的，它可能必须重新计算每一行的答案。如果它正在查看表行上的值，那么它可能能够优化它。

如果去掉 case 语句，整个查询是否执行得更快？想要确保您正在分析正确的子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:39:54.223

看起来逻辑与java中的逻辑完全一样。

我使用以下逻辑来测试您的场景：

我创建了一个虚拟函数，如下所示，它只会在 dbms_output 上写一些东西，并且只返回 10。

```
CREATE OR REPLACE
  FUNCTION DISP_MSG
    RETURN VARCHAR2
  AS
    ret_val VARCHAR2(20):='10';
  BEGIN
    dbms_output.enable;
    dbms_output.put_line('executed');
    RETURN ret_val;
  END DISP_MSG; 
```

然后我创建了一个匿名块来测试它：

```
DECLARE
  var VARCHAR2(100);
BEGIN
  SELECT CASE WHEN (1!=1) THEN DISP_MSG ELSE '1' END INTO var FROM dual;
  dbms_output.put_line('j = '||var);
END; 
```

输出：

> j = 1

但是当我尝试以下操作时：

```
DECLARE
  var VARCHAR2(100);
BEGIN
  SELECT CASE WHEN (1=1) THEN DISP_MSG ELSE '1' END INTO var FROM dual;
  dbms_output.put_line('j = '||var);
END; 
```

输出：

> 执行
> 
> j = 10

所以很清楚什么是执行逻辑

# android - 从 ImageView 位图中获取 ColorMode

> ID：15384982
> 
> 赞同：1
> 
> 时间：2013-03-13T12:12:10.213
> 
> 标签：android, android-imageview

看[这个例子](https://stackoverflow.com/questions/7326660/how-can-i-check-if-a-given-image-is-cmyk-in-java)，我试图确定视图中的图像是否为 CMYK 颜色模式。如果是它，我一定不要尝试显示它，并继续我列表中的下一张图片

这就是我设置 ImageView 的方式

```
options.inSampleSize = calculateInSampleSize(options, imageWidth, imageWidth);
imageView = (ImageView)findViewById(R.id.imageView);
Bitmap image = decodeSampledBitmapFromResource(path, 1280, 700);
imageView.setImageBitmap(image);
imageView.setVisibility(View.VISIBLE); 
```

如何确定此图像是否为 CMYK？或者简单的说，我确定这个图片能不能显示

# android - 具有单一或重叠背景的 Android 幻灯片视图

> ID：15384983
> 
> 赞同：2
> 
> 时间：2013-03-13T12:12:14.267
> 
> 标签：android, background, android-viewpager, slide

我需要在 Android 中重现此菜单。-> [MenuVideo 示例](https://dl.dropbox.com/u/43532071/files/Main%20Menu.mov)
我将如何以最好的方式实现这一点！？？通常我会使用`ViewPager`. 但是我将如何显示下一个视图的部分内容，例如视频中的视图 2 和 3。**注意您是如何看到其他视图的部分文本的**。
客户希望用户通过显示一些下一个视图来查看它是可滚动的！

我将如何给出`HorizontalScrollView`那种弹跳的行为。作为资源，我得到的只是宽背景 png **，包括文本**。！
你将如何解决这个问题并从 Android 的视频中制作菜单？！我的意思是，它在ios上是可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:12:05.853

You will need a horizontal scrollview that is customized to show content from pages at both ends. Also the touch events should be handled properly so it snaps to page ends.

I had a similar requirement in one of my projects and pushed code to GitHub at [SnappingScrollView](https://github.com/rajivnarayana/SnappingScrollView) so it could be of help to someone.

Please let me know if it is of some use.

You could alternately use a pager adapter with custom page width but it would not show content from previous page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:23:55.770

你可以试试`Horizontal View Swiping with ViewPager`，或者`ViewFlipper`我在下面添加了两个链接。

ViewPagers 从 PagerAdapters 获取他们的视图，这使您可以完全控制视图的重用和回收。提供了一个称为 FragmentPagerAdapter 的 PagerAdapter 实现，以方便在 ViewPager 中使用 Fragments；

```
 <android.support.v4.view.ViewPager
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        … /> 
```

支持演示：

```
 public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {
            return ArrayListFragment.newInstance(position);
        }
    } 
```

当您在列表中滑动时，FragmentPagerAdapter 将分离每个片段，但将它们保存在内存中，以便在用户向后滑动时可以简单地重新连接它们。

有关更多信息，请尝试此[链接](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

或者你可以去`ViewFlipper`

```
public class ViewFlipperActivity extends Activity implements OnGestureListener,
        OnTouchListener {

    private ViewFlipper mViewFlipper;
    private GestureDetector mGestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewflipper_layout);

        mGestureDetector = new GestureDetector(this);
        mViewFlipper = (ViewFlipper) findViewById(R.id.viewflipper);
        mViewFlipper.setOnTouchListener(this);
        mViewFlipper.startFlipping();
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        // TODO Auto-generated method stub
        if (e2.getX() - e1.getX() > 0) {
            //mViewFlipper.showPrevious();
        } else {
            //mViewFlipper.showNext();
        }
        return true;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        mGestureDetector.onTouchEvent(event);
        return true;
    }

} 
```

ViewFilpper 控件系统自带控件之一，主开关和设置在同屏动画，和自动播放，用法同上，所以[这个](http://www.verydemo.com/demo_c131_i6929.html)例子就是你所需要的！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T10:21:15.103

这很容易做到：

```
yourViewPager.setAdapter(new FragmentPagerAdapter(getSupportFragmentManager()) {

    @Override
    public Fragment getItem(int position) {
        //return whatever fragment you want;
    }
    @Override
    public float getPageWidth(int position) {
        return 0.8f;
    }
    @Override
    public int getCount() {
        //return the count;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:07:52.060

您可以使用一个 Viewpager 将背景拆分为 4 个可绘制资源。viewpager 将根据它们在 arraylist 中的位置加载它们。

您需要一个没有文本的纯图像资产。文本需要是单独的图像，是您个人视图的一部分。很难/几乎不可能预测不同的 android 设备将如何缩放图像，所以你不能只放置不可见的热链接

# ruby-on-rails - Rails - 涉及渲染时似乎忽略了根路径

> ID：15384995
> 
> 赞同：0
> 
> 时间：2013-03-13T12:12:54.940
> 
> 标签：ruby-on-rails, ruby, redirect, routes, document-root

我有一个控制器#new，用作根路径。

路由.rb

```
 resources :participants

  root :to => 'participants#new' 
```

耙路线

```
 participants GET    /participants(.:format)          participants#index
                 POST   /participants(.:format)          participants#create
 new_participant GET    /participants/new(.:format)      participants#new
edit_participant GET    /participants/:id/edit(.:format) participants#edit
     participant GET    /participants/:id(.:format)      participants#show
                 PUT    /participants/:id(.:format)      participants#update
                 DELETE /participants/:id(.:format)      participants#destroy
            root        /                                participants#new 
```

这在访问 xxx.xx/ 时效果很好

但是当我在控制器中渲染 #new 时，我被重定向到 /participants ，我该如何阻止这种情况发生？

```
 def create

    @participant = Participant.new(params[:participant])

    respond_to do |format|
      if @participant.save
        format.html { redirect_to root_path, notice: "<h2>Tack!</h2> <p>Registrering genomförd, vi har skickat ut ett mail med instruktioner till #{@participant.email}</p>".html_safe }
        format.json { render json: @participant, status: :created, location: @participant }
      else
        format.html { render action: "new" }
        format.json { render json: @participant.errors, status: :unprocessable_entity }
      end
    end
  end 
```

日志：

```
Started POST "/participants" for 127.0.0.1 at 2013-03-13 13:21:29 +0100
Processing by ParticipantsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dXmuTX/ugwgNjc21PPdiSHDGlNXEEGZCRHVIWKELOuw=", "participant"=>{"company"=>"asd", "f_name"=>"asd", "l_name"=>"asd", "email"=>"asd@asd.com", "phone_number"=>"asd", "allergy"=>"asd"}, "commit"=>"Anmäl mig!"}
  MOPED: 127.0.0.1:27017 COMMAND      database=damn_development command={:count=>"models", :query=>{"company"=>"asd", "_type"=>{"$in"=>["Participant"]}}} (0.7780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=damn_development collection=models selector={"email"=>"asd@asd.com", "_type"=>{"$in"=>["Participant"]}} flags=[] limit=1 skip=0 batch_size=nil fields={:_id=>1} (0.5569ms)
  Rendered participants/_form.html.erb (4.7ms)
  Rendered participants/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 25ms (Views: 19.8ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:27:57.190

您被发送到的原因`/participants`是因为这是创建操作的路线。除非您更改路线和表格，否则您无能为力。在您的路线中，您可以将 create 操作与 '/' 匹配，但只能通过`post`. 然后在您的表单中，使用“/”作为操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:45:37.503

`root / participants#new`当你这样做时，请看这条线`rake routes`。因此，您的路线将带您到`participants#new`.

如中`routes.rb`，当你使用`root :to => 'participants#new'`然后`redirect_to root_path`，它会去到`participants#new`你使用的任何地方`/`，它相当于`root_url`。

例如：

当您在本地编写以下网址时：

```
http://my_host_name/ 
```

它实际上会——

```
http://my_host_name/participants/new 
```

因此，在您的创建操作中，您有这一行：

```
format.html { redirect_to root_path, notice: "...."} 
```

它正在重定向到 -

```
http://my_host_name/participants/new 
```