# StackOverflow 问答 14653000-14653999

# svn - svn diff：合并后为删除/重新添加的文件获取“真实”差异

> ID：14653002
> 
> 赞同：0
> 
> 时间：2013-02-01T18:45:54.470
> 
> 标签：svn, svn-merge

所以我有两个分支，`b1`并且`b2`. `b1`我有一个在某个修订版中签出的工作副本`r1000`，并且我已经合并了来自`r1001`的一些更改`b2`。

我`foo`在我的工作副本中手动编辑了一个文件，使其现在`r1000`与`b1`. 但是，当我执行 , 时`svn diff`，输出是与`b2`,修订的差异，而不是我所期望`r1001`的（空）差异与。`b1``r1000`

是否有一种通用的方式可以`svn diff`说“如果您签入，这就是存储库中将发生的变化”，还是我必须在命令行上指定分支和修订号才能得到我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:59:26.190

`svn help diff`， 读这个！

当您`svn diff <FILENAME>`在工作副本中使用修改后的文件时，它与文件的“原始副本”不同（没有其他选项），在您的情况下，它必须是**b1/foo@1000**，而不是 b2@1001 （顺便说一句 - 当你合并时，你合并分支，而不是单个修订：来自`svn help merge`，1-st 形式“可选的 '@REV' 指定 URL 的 peg 修订和**将考虑合并的最新修订**”）

如果您想要并且清楚地识别差异来源，您必须在命令中编写它并使用 diff 的 3-rd 形式

`diff OLD-URL[@OLDREV] NEW-URL[@NEWREV]`

其中一个 URL 是 WC 中的文件，另一个 URL - repo 中文件的 URL（如果需要，使用 PEG 修订版）

> 如果您签入，这就是存储库中将发生的变化

“......如果你**提交**”我们在 SVN 世界中说，这是与 BASE-revision 的**差异**，`svn diff FILE`（这个差异包含 - 合并和手动 - 更改，如果它们存在/并且这种混合是不好的做法和反-图案/）

# java - javax.faces.ViewState 在 p:commandButton 操作中丢失

> ID：14653011
> 
> 赞同：0
> 
> 时间：2013-02-01T18:46:28.223
> 
> 标签：java, jsf-2, primefaces, java-ee-6

我有一个简单的登录表单，它调用一个动作，如果登录成功，则返回安全区域的视图 ID。我想使用 ajax 来执行该操作，但是当页面被重定向时，表单中不存在 javax.faces.ViewState，使得用户必须单击两次才能恢复它。如果我设置 ajax="false" 一切正常，只是我失去了使用 p:ajaxSatatus 实现的酷过渡。

[在使用 BlausC http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)的此博客条目之前，我已经处理过此类问题 我还看到了[commandButton/commandLink/ajax 操作/listener 方法未调用或输入值未更新](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

我过去成功地解决了这个问题，但现在我被困住了。

我的环境是：Mojarra 2.1.6 PrimeFaces 3.4.2 GlassFish Server Open Source Edition 3.1.2.2

代码：

```
<h:form id="loginForm">
    <div style="margin: 0px auto; width: 300px;">
        <p:messages />
        <p:panelGrid columns="2" styleClass="panelGridNoBorder">
            <h:outputLabel value="Name: " for="txtPrincipal"/>
            <p:inputText id="txtPrincipal" value="#{userBean.principal}"/>
            <h:outputLabel value="Email:" for="txtPassword"/>
            <p:password id="txtPassword" value="#{userBean.password}" />
        </p:panelGrid>
        <p:commandButton id="loginButon" action="#{userBean.login}" value="Login"/>
    </div>
</h:form> 
```

UserBean.java @SessionScoped

```
public String login() {
    try {
        HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
        loginedUser = autenticator.authenticate(principal, passHash, request.getRemoteAddr());
        request.login(principal, passHash);
        if (loginedUser != null) {
            return "/admin/index.xhtml";
        } else {
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Usuario o contraseña incorrecto", "Usuario o contraseña incorrecto");
            FacesContext.getCurrentInstance().addMessage(null, message);
            return null;
        }
    } catch (ServletException ex) {
        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Usuario o contraseña incorrecto", "Usuario o contraseña incorrecto");
        FacesContext.getCurrentInstance().addMessage(null, message);
        return null;
    }
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:02:08.480

如果您使用的是 MSIE 浏览器，您的具体问题是可以识别的。您基本上需要覆盖 PrimeFaces ajax 响应处理程序。另请参阅[此答案](https://stackoverflow.com/questions/12820010/object-doesnt-support-this-property-or-method-with-primefaces-omnifaces-timeout/12821032#12821032)以获取具体代码示例。

但是，更好的是在登录后发送重定向。这也是符合 Post-Redirect-Get 模式的规范方法。

```
return "/admin/index.xhtml?faces-redirect=true"; 
```

# web-crawler - 为什么 Googlebot 不断请求“value.png”？

> ID：14653013
> 
> 赞同：1
> 
> 时间：2013-02-01T18:46:31.767
> 
> 标签：web-crawler, robots.txt, googlebot

**查看我的请求日志，我看到了对/value.png**的各种请求：

```
66.249.75.199 - - [29/Jan/2013:20:49:01 +0000] "GET /robots.txt HTTP/1.1" 301 459 "-" "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
66.249.75.199 - - [30/Jan/2013:05:20:22 +0000] "GET /robots.txt HTTP/1.1" 301 459 "-" "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
66.249.75.116 - - [30/Jan/2013:05:20:23 +0000] "GET /robots.txt HTTP/1.1" 200 440 "-" "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
66.249.75.199 - - [30/Jan/2013:05:20:23 +0000] "GET /value.png HTTP/1.1" 301 457 "-" "Googlebot-Image/1.0"
66.249.75.116 - - [30/Jan/2013:05:20:24 +0000] "GET /value.png HTTP/1.1" 500 651 "-" "Googlebot-Image/1.0"
66.249.75.116 - - [30/Jan/2013:11:43:03 +0000] "GET /value.png HTTP/1.1" 500 651 "-" "Googlebot-Image/1.0"
66.249.75.116 - - [30/Jan/2013:14:07:53 +0000] "GET /value.png HTTP/1.1" 500 651 "-" "Googlebot-Image/1.0" 
```

如果您查看日志，它会不断询问 value.png。

我从未链接或发布过这张图片。

为什么 Google 蜘蛛会请求这个特定的图像？特别是考虑到它不存在！

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T20:59:33.187

另一个站点上的某人总是有可能链接到您服务器上的（不存在的）图像。

# javascript - 正则表达式在最后一次出现特殊字符后提取所有数字

> ID：14653017
> 
> 赞同：0
> 
> 时间：2013-02-01T18:46:51.400
> 
> 标签：javascript, regex

我想在最后一次出现字符“-”之后提取所有数字，因此例如 311-1974-8 应该返回 8 和 311-1974-348 应该返回 348

编辑：

从评论中添加了说明：

实际上它是一个外部工具，它提供了它自己的内置功能主义者，我别无选择，只能使用正则表达式来提取它。没有JS可以申请:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:52:34.110

这将捕获最后一个数字。

```
var str = '311-1974-348';
var matches = str.match(/-(\d+)$/);
var match = matches ? matches[1] : null;
console.log("matched? " + match); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:52:18.167

尝试匹配`/[^-]+$/`，例如：

```
var s = '311-1974-348';
s.match(/[^-]+$/); // => ["348"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:47:33.407

为什么不简单地拆分？

```
var str = input.split('-').pop(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T18:50:32.080

您在评论中提到它是用于外部工具的，所以...

`-([0-9]+)$`

不知道您的工具如何处理捕获的组或任何东西...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T19:07:42.637

试试这个`/[0-9]+$/`。它适用于您提供的两种输入。

# ssas - 具有命名集的成员在 SSAS 中总是返回相同的值

> ID：14653025
> 
> 赞同：0
> 
> 时间：2013-02-01T18:47:06.550
> 
> 标签：ssas, mdx, olap, olap-cube

我需要将多维数据集查询为普通表。此外，出于性能原因，我需要使用命名集（如果不使用该集，查询需要 10 倍）。问题是我为日期时间计算成员的每一行获得相同的值。顺便说一句，我正在使用这个成员，因为我还没有找到任何方法来查询“列上”的命名集。

查询如下所示：

```
with
set [CurrentDates] as filter([Time].[Date].Members, not isempty([Measures].[Net Sold Units]))
member [Measures].[Date Time] as [CurrentDates].Item(1).Member_Key
select
{
[Measures].[Date Time],
[Measures].[Song Name]
--other calculated members
}
on columns
,
subset
(
    {
        order
        (
            except
            (
                NONEMPTY([Trend Transaction].[Trend Transaction].Members, [Measures].[Net Sold Units]), 
                [Trend Transaction].[Trend Transaction].[All]
            ),
            [Measures].[Date Time], basc
        )
    }
    ,0, 50)
on rows 
from Trends
where
(
{[Time].[Date].&[2012-09-01T00:00:00],[Time].[Date].&[2012-09-02T00:00:00]}
) 
```

我得到的结果是这样的：

日期 时间 歌曲名称

* * *

2012 年 9 月 1 日你去过哪里 2012 年 9 月 1 日我们还年轻 2012 年 9 月 1 日清醒（原由凯蒂佩里表演）[卡拉 OK 版] 2012 年 9 月 1 日呼吸 2012 年 9 月 1 日如此复杂（最初由 Rick Ross 表演）[卡拉 OK 版]。. .

最后一首歌的日期显然是错误的，应该是 2012 年 9 月 2 日

我认识到我有点 SSAS 新手，可能我在这里缺少一些东西:)

有什么办法可以做到我需要的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:48:33.653

您计算的 :`member [Measures].[Date Time] as [CurrentDates].Item(1).Member_Key` 将始终引用您集合中的第二个项目（记住它是基于 0 的）

您想要的是使用该`RANK`函数： this 与该`CURRENTMEMBER`函数一起在呈现集合时带回集合中的项目位置。例如：

```
set [CurrentDates] as filter([Time].[Date].Members, not isempty([Measures].[Net Sold Units]))
member MemberRank As 'RANK(Time].[Date].CURRENTMEMBER , CurrentDates)'
member [Measures].[Date Time] as [CurrentDates].Item(MemberRank-1).UNIQUE_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:42:45.433

好吧，最终的解决方案是让集合和成员像这样：

```
set CurrentDates as filter([Time].[Date].[Date], not isempty([Measures].[Net Sold Units]))
member [Measures].[Date Time] as CDATE(NONEMPTY(CurrentDates, [Measures].[Net Sold Units]).Item(0).Member_Key) 
```

关键是将命名集放入 SCOPE 中，使其在成员中引用。

# c# - Workflow Foundation - 在自定义设计器中分配 InArgument

> ID：14653027
> 
> 赞同：5
> 
> 时间：2013-02-01T18:47:16.527
> 
> 标签：c#, wpf, workflow-foundation-4

我在 Workflow Foundation 中使用自定义活动和设计器时遇到问题。为了这个问题，我创建了一个非常简单的活动，如下所示：

```
[Designer(typeof(TesteDesigner))]
public sealed class Teste : CodeActivity
{
    // Define an activity input argument of type string
    [RequiredArgument]
    public InArgument<string> Text { get; set; }

    // If your activity returns a value, derive from CodeActivity<TResult>
    // and return the value from the Execute method.
    protected override void Execute(CodeActivityContext context)
    {
        // Obtain the runtime value of the Text input argument
        string text = context.GetValue(this.Text);
    }
} 
```

设计师如下：

```
<sap:ActivityDesigner x:Class="ActivityDesignerLibrary1.TesteDesigner"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
                      xmlns:sapv="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation"
                      xmlns:System="clr-namespace:System;assembly=mscorlib"
                      xmlns:Converters="clr-namespace:System.Activities.Presentation.Converters;assembly=System.Activities.Presentation">
    <sap:ActivityDesigner.Resources>
        <Converters:ArgumentToExpressionConverter x:Key="ArgumentToExpressionConverter" />
    </sap:ActivityDesigner.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <TextBlock Text="Valor: "
                   VerticalAlignment="Center" />
        <sapv:ExpressionTextBox HintText="Valor"
                                Expression="{Binding Path=ModelItem.Text, Mode=TwoWay, Converter={StaticResource ArgumentToExpressionConverter}, ConverterParameter=In}"
                                ExpressionType="{x:Type System:String}"
                                OwnerActivity="{Binding Path=ModelItem}"
                                UseLocationExpression="True"
                                Grid.Column="1"
                                Margin="3,0,0,0" />
    </Grid>
</sap:ActivityDesigner> 
```

当我在 TextBox 中键入内容时，我收到错误：invalid l-value expression，但如果我在属性网格中键入值，则 TextBox 会更新。

有没有人见过这个？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:57:49.750

从 XAML 中删除***UseLocationExpression***属性或将其设置为*False*。您的其余代码似乎是正确的。

[查看MSDN](http://msdn.microsoft.com/en-us/library/system.activities.presentation.view.expressiontextbox.uselocationexpression.aspx)上的属性备注：

> 位置表达式（或 L 值表达式）是一种计算结果为标识符的表达式，可以放在赋值语句的左侧。当您将 ExpressionTextBox 绑定到 Out 参数时，您应该将此属性设置为 True。

它仅在您想要绑定 OutArgument 时使用。

# subquery - 在一个选择中选择

> ID：14653030
> 
> 赞同：0
> 
> 时间：2013-02-01T18:47:25.337
> 
> 标签：subquery, visual-foxpro

我的数据库中有一个表，其中包含一组个人的所有记录，包括男性和女性以及他们的后代。每个记录都有那个人的出生地。

我正在尝试创建一个光标来显示特定日期范围之间的所有出生，这些日期显示个人的身份证、他们的出生日期和他们的父母。到目前为止没有问题

我的 SELECT 语句如下

```
SELECT DISTINCT IdNumber,birthstate, sex, DateOfBirth, father, mother;
FROM members;
WHERE (DateOfDeath>=ldStartDate AND DateOfDeath<=ldEndDate);
ORDER BY 1;
INTO CURSOR ReportMaster 
```

这正是我想要的——现在我想做的是从同一个文件中提取父亲和母亲的出生状态，有没有办法动态地（在同一个 select 语句中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:53:02.100

```
 SELECT DISTINCT m.IdNumber,m.birthstate, m.sex, m.DateOfBirth, m.father, m.mother,
    mother.birthstate, father.birthsate
    FROM members m
    left outer join members mother on mother.IdNumber = m.mother 
    left outer join members father on father.IdNumber = m.father
    WHERE (m.DateOfDeath>=ldStartDate AND m.DateOfDeath<=ldEndDate) 
```

如果您确定您始终拥有父亲和母亲，您也许可以将左外部联接更改为内部联接。

我还假设“母亲”和“父亲”是成员表中 IdNumber 列的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:41:15.737

@aquinas，这不是 VFP 的好语法。你用过m。作为本地别名！它应该是 m.ldStartDate 和 m.ldEndDate 但有其余的 m。在那个查询中只是一个错误的邀请（逻辑错误，一个可能会被忽视或只有在你幸运的情况下才会显示为错误）。

请预留米。用于内存变量。mdot 在此查询中以这种方式工作只是一个永远不会被纠正的错误。

PS：如果您是经验丰富的开发人员，那么它可能不会咬您。但是，我认为问题的所有者是初学者/中级，她/他不应该以这种方式学习。

# mysql - MYSQL中按函数分组

> ID：14653034
> 
> 赞同：0
> 
> 时间：2013-02-01T18:47:37.943
> 
> 标签：mysql, sql

我正在尝试使用 GROUP BY 函数对数据进行排序。在我将它添加到它之前，我的查询工作正常。这里是：

```
SELECT a.cust_id, a.account_id, a.product_cd, status, b.name, i.fname, i.lname, 
from account a, branch b, individual i
where b.name = 'So. NH Branch' or b.name = 'Woburn Branch' and a.status = 'ACTIVE'
group by b.name; 
```

我收到此消息：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'from account a, branch b, individual i where b.name = 'So. NH Branch' 或 b.name ' 在第 2 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:49:19.073

您的 : 中有一个额外的逗号`SELECT`：

```
SELECT a.cust_id, 
  a.account_id, 
  a.product_cd, 
  status, 
  b.name, 
  i.fname, 
  i.lname, 
         ^ --- this is incorrect. 
```

我确实看到你的查询很奇怪的一件事是你没有加入你的表，你正在返回一个笛卡尔结果集。

如果您不想要笛卡尔结果集，则可以`JOIN`在表之间使用 a。与此类似：

```
SELECT a.cust_id, 
   a.account_id, 
   a.product_cd, 
   status, 
   b.name, 
   i.fname, 
   i.lname
from account a
INNER JOIN branch b
  ON a.branchid = b.id
INNER JOIN individual i
  ON a.individualid = i.id
where b.name = 'So. NH Branch' or b.name = 'Woburn Branch' and a.status = 'ACTIVE'
group by b.name; 
```

*注意：我猜到了将加入表格的列名。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:51:48.367

除了 bluefeet 指出的错误逗号，您正在生产笛卡尔积。这可能不是你想要的。您需要以某种方式关联表格（仅插图）：

```
SELECT a.cust_id, 
       a.account_id, 
       a.product_cd, 
       status, 
       b.name, 
       i.fname, 
       i.lname 
FROM   account a, 
       branch b, 
       individual i 
WHERE  i.cust_id = a.cust_id             <-- JOIN individual to account
       AND b.account_id = a.account_id   <-- JOIN branch to individual
       AND b.name = 'So. NH Branch' 
        OR b.name = 'Woburn Branch' 
           AND a.status = 'ACTIVE' 
GROUP  BY b.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:18:12.667

除了有关笛卡尔积和错误逗号的其他答案之外，如果您只是想对应该使用的数据进行排序，`ORDER BY`而不是`GROUP BY`后者仅在使用聚合函数时才需要。

# c# - Wpf 数据绑定...如何？

> ID：14653035
> 
> 赞同：-3
> 
> 时间：2013-02-01T18:47:38.560
> 
> 标签：c#, wpf, xaml, data-binding

如何在 Xaml 中设置绑定

**Xaml 代码：**

```
 ItemsSource="{Binding Path=compassLogCollection}" 
```

**.cs 代码**

```
 compassDataGrid.DataContext = LogSession.compassLogCollection; 
```

compassLogCollection 是一个**静态的** `ObservableCollection<>`

和

`LogSession`是单身人士（如果重要的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:04:42.410

要回答您的第一个问题，您可以更改`Xaml`如下：

```
 ItemSource = {Binding} 
```

这告诉`ItemSource`直接绑定到`DataContext`.

您的后续问题询问如何`DataContext`在 Xaml 中分配。为此，我建议您看看这个问题 -[如何在 XAML 中实例化 DataContext 对象](https://stackoverflow.com/questions/1521699/how-to-instantiate-datacontext-object-in-xaml)。如果这不起作用，那么你应该问另一个问题。

# visual-studio - 使用 Razor 在 Visual Studio 2012 Express 中创建局部视图时出错

> ID：14653039
> 
> 赞同：17
> 
> 时间：2013-02-01T18:48:09.137
> 
> 标签：visual-studio, asp.net-mvc-4, partial-views, strongly-typed-view

我正在 Microsoft Visual Studio 2012 Express 中创建一个视图，我希望它是一个强类型的局部视图，但我收到以下错误：

> C:\Program Files(x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress\Item Templates\CSharp\Web\MVC 4\CodeTemplates\AddView\CSHTML\Empty.tt(-1,1)：错误：有让 AppDomain 从主机运行转换时出现问题。该过程无法继续。

我在创建不是部分视图、强类型或非强类型的视图时没有遇到任何问题。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-01T19:26:47.427

很简单...只需**重新启动 Visual Studio**。

[http://blog.jongallant.com/2012/07/appdomain-process-cannot-continue.html#.UQwtQs6mg1I](http://blog.jongallant.com/2012/07/appdomain-process-cannot-continue.html#.UQwtQs6mg1I)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-05T07:21:24.777

我使用的是 Visual Studio 2013 Professional 并且遇到了同样的问题，以下都没有对我有用-

*   重新启动VS-没有帮助
*   `<NetFx40_LegacySecurityPolicy enabled="true" />`devenv.exe.config 文件中没有
*   从 VS > 工具 > 扩展和更新重新安装 Nuget 包管理器
*   从 Microsoft 重新安装 MVC4

然后我从控制面板 > 添加/删除程序修复了我的 VS 安装，我的问题得到了解决。我不知道出了什么问题，但这肯定需要 Microsoft Guys 的注意。希望我的回答对有需要的人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-17T07:33:30.857

我正在使用 VS12 并更新到 VS13，我无法创建视图并收到上述错误，我刚刚通过进入工具 --> 扩展和更新更新了 Nuget 包管理器，一切对我来说都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T17:32:29.587

当我遇到同样的问题时，我意识到这种解决方法可能对我们中的一些人有用，但是……就我而言，它不起作用。但是更改 devenv.exe.config，删除该行

```
<NetFx40_LegacySecurityPolicy enabled="true" /> 
```

成功了。希望它对像我这样的人有所帮助，对于一些旧的解决方案需要有那个烦人的东西......;）

# c# - 无法读取根

> ID：14653041
> 
> 赞同：5
> 
> 时间：2013-02-01T18:48:13.570
> 
> 标签：c#, svn, sharpsvn

所以我正在使用 SharpSVN(SharpSvn.1.7-x86 1.7008.2243) 并且我一直遇到问题。每次我尝试`SvnWorkingCopyClient`在位于驱动器根目录的 repo 上使用时（例如说我有`D:\`驱动器，它本身就是一个 repo），它都会`svn_dirent_is_absolute`向我抛出一个错误。

事实上，我能找到的唯一不在乎的命令是`SvnClient.GetUriFromWorkingCopy(string)`

关于如何解决这个问题的任何想法（除了移动我的工作副本或在文件系统上链接）？我希望在代码中找到一种方法，或者解决这个限制的替代方法（因为 SVN 1.7 似乎不再有这个限制）。

这里有一些代码？

```
private void fakeFunction(){
    var RootPath="d:\";
    using (var client = new SharpSvn.SvnClient())
    using(var workingClient = new SvnWorkingCopyClient())
    {
        SvnWorkingCopyVersion workingVersion = null;
        // Exception happens here
        if (workingClient.GetVersion(this.RootPath, out workingVersion))
        {
            CurrentRevision = workingVersion.End;
                // This will resolve just fine
            var targetUri = client.GetUriFromWorkingCopy(RootPath);
            var target = SvnTarget.FromUri(targetUri);
            SvnInfoEventArgs info = null;
            if (client.GetInfo(target, out info))
            {
                if (workingVersion.End != info.Revision)
                {
                    System.Collections.ObjectModel.Collection<SvnLogEventArgs> logEventArgs = null;
                    if (client.GetLog(targetUri, out logEventArgs))
                    {
                        var oldBack = Console.BackgroundColor;
                        var oldFor = Console.ForegroundColor;
                        Console.BackgroundColor = ConsoleColor.DarkMagenta;
                        Console.ForegroundColor = ConsoleColor.White;
                        foreach (var l in logEventArgs)
                        {
                            Console.WriteLine("[{0}-{1}]-{2}", l.Revision, l.Author, l.LogMessage);
                        }
                        Console.BackgroundColor = oldBack;
                        Console.ForegroundColor = oldFor;
                    }

                    System.Console.WriteLine("Repo not up to date.");
                }
            }
        }
    }
} 
```

我还偶然发现了这个[http://subversion.tigris.org/issues/show_bug.cgi?id=3535](http://subversion.tigris.org/issues/show_bug.cgi?id=3535)和[http://subversion.tigris.org/ds/viewMessage.do?dsForumId=463&viewType=browseAll&dsMessageId=2456472](http://subversion.tigris.org/ds/viewMessage.do?dsForumId=463&viewType=browseAll&dsMessageId=2456472)

那么，既然这发生在很久以前，这不应该不再是一个问题了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:49:00.693

一个 kludge 是“..”从当前目录到根目录：

```
[pwd = C:\USERS\franklin\absrel]
root = ..\..\.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:42:49.407

SharSVN 存在根路径问题，我们可以在邮件存档中阅读。但是，我们可以为您的场合做一些小技巧：

1.  下载完整包sharpsvn [http://sharpsvn.open.collab.net/files/documents/180/5569/SSvnEx-1.7002.1998.zip](http://sharpsvn.open.collab.net/files/documents/180/5569/SSvnEx-1.7002.1998.zip)
2.  复制 svnversion.exe 到你的 bin 目录
3.  然后我们需要一个hack方法来获取verison

    ```
     public static bool GetVersionHack(string appPath,string targetPath,out long version)
        { 
           // <param name="appPath">Path to svnversion.exe</param>
           // <param name="path">Target path</param>
           // <param name="version">Result version</param>

            Process p = new Process();               

            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.FileName = appPath;
            p.StartInfo.Arguments = targetPath + " -n";
            p.Start();

            //read svnversion.exe result
            string output = p.StandardOutput.ReadToEnd();
            p.WaitForExit();

            output = output.Replace("M", "");
            output = output.Replace("S", "");
            output = output.Replace("P", "");

            //valid results
            //4123:4168     mixed revision working copy
            //4168M         modified working copy
            //4123S         switched working copy
            //4123P         partial working copy, from a sparse checkout
            //4123:4168MS   mixed revision, modified, switched working copy            

            return long.TryParse(output, out version);
        } 
    ```

4.  并修改你的伪造方法[完整源代码](http://pastebin.com/bMTxk3KA)

当然这是一项肮脏的工作，但它可能会有所帮助。请**注意**svnversion.exe 结果 GetVersionHack 并不理想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:11:52.620

如果它抱怨绝对路径，请尝试定义 unc 路径。共享您的 D:\ 驱动器，这是您的 svn 存储库。然后使用它访问它

```
 var RootPath="\\<servername>\D$"; 
```

# actionscript-3 - AS3：在按钮中访问影片剪辑

> ID：14653042
> 
> 赞同：0
> 
> 时间：2013-02-01T18:48:13.790
> 
> 标签：actionscript-3, simplebutton

我试图访问位于按钮中的movieclip，我通过以下代码引用：

```
var buttonObject = this[weaponsPurchased[i]]; 
```

然后我将“mouseEnabled”设置为false（那部分有效）

```
buttonObject.mouseEnabled = false; 
```

然后我试图在这个按钮内设置一个不可见的电影剪辑（这不起作用）

```
buttonObject["square"].visible = false; 
```

我收到此错误：

> ReferenceError：错误 #1069：在 flash.display.SimpleButton 上找不到属性 square，并且没有默认值。在 （...）

我在互联网上没有找到任何帮助，所以请帮助我。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:44:07.283

我前段时间遇到过这个问题。我所做的是在按钮的每个状态中搜索 DisplayObject。我会在这里放一些可能对你有帮助的代码。您必须意识到，如果您的按钮在所有四个框架中都有对象，那么您也会在所有状态下找到您的对象。

```
 private var Obj1:DisplayObject, Obj2:DisplayObject, 
    Obj3:DisplayObject, Obj2:DisplayObject;

    private function searchInChildren(spr:DisplayObject, name:String):void
    {
        for (var i:int = 0; i < spr.numChildren; i++) 
        {
            if(spr.getChildAt(i).name == name)
            {
                return spr.getChildAt(i);
            }           
        }
        return null;
    }

    public function searchControllers(_ref:SimpleButton, name:String):void
    {   
        try{
            Obj1 = searchInChildren(_ref.upState, name);
            Obj2 = searchInChildren(_ref.overState, name);
            Obj3 = searchInChildren(_ref.downState, name);
            Obj4 = searchInChildren(_ref.hitTestState, name);
        } catch (e:Error) {
            trace("error: "+e+", when trying to search for controllers");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:51:17.443

您不能访问 SimpleButton 的子元素。SimpleButtons 不是 DisplayObjectContainers，但是当从 Flash IDE 创建时它们可以有子元素。

来源：http: [//xtyler.com/as3-simple-button-break-all-rules/](http://xtyler.com/as3-simple-button-breaking-all-rules/)

我只会使用 MovieClip，而不是使用您自己的类来处理 MouseOver 和 MouseOut 事件。一个很好的教程概述了如何创建一个可重用的扩展 MovieClip 的按钮类。

[http://www.ironcoding.com/2011/02/flash-as3-movieclip-button-tutorial/](http://www.ironcoding.com/2011/02/flash-as3-movieclip-button-tutorial/)

# google-chrome - 停止或中断浏览器进行进一步的 AJAX 调用

> ID：14653045
> 
> 赞同：0
> 
> 时间：2013-02-01T18:48:19.930
> 
> 标签：google-chrome, browser

我有一个关于停止/中断浏览器进行进一步调用的问题。

在我们的应用程序中，我们有一系列 (10) **AJAX 调用**，它们将在**登录过程中**对中间件进行。

所有这些 (10) 异步调用并在登录过程中命中中间件。

我的问题是，一旦浏览器进行 3 次调用，我需要停止浏览器？？

仅供参考，（我使用 google chrome/firefox/safari）

# c++ - 使用特定于机器的 .file 路径 - CUDA .ptx 文件是否可移植？

> ID：14653046
> 
> 赞同：4
> 
> 时间：2013-02-01T18:48:21.297
> 
> 标签：c++, cuda, gpgpu, gpu

我正在研究[cudaDecodeD3D9 示例](http://docs.nvidia.com/cuda/cuda-samples/index.html#cuda-video-decoder-d3d9-api)以了解 CUDA 的工作原理，并在编译时从 .cu 文件生成 .ptx 文件。据我所知，这个 .ptx 文件是一个中间表示，它将为任何特定的 GPU 即时编译。该示例使用类 cudaModuleMgr 通过 cuModuleLoadDataEx 加载此文件。

.ptx 文件是文本格式，我可以看到它的顶部是我机器上的一堆硬编码路径，包括我的用户文件夹，即：

```
 .file   1   "C:/Users/******/AppData/Local/Temp/tmpxft_00002abc_00000000-7_NV12ToARGB_drvapi.cudafe2.gpu"
    .file   2   "c:\program files (x86)\microsoft visual studio 10.0\vc\include\codeanalysis\sourceannotations.h"
    .file   3   "C:/Program Files (x86)/NVIDIA GPU Computing Toolkit/CUDA/v5.0/include\crt/device_runtime.h"
    .file   4   "C:/Program Files (x86)/NVIDIA GPU Computing Toolkit/CUDA/v5.0/include\host_defines.h"
    .file   5   "C:/Program Files (x86)/NVIDIA GPU Computing Toolkit/CUDA/v5.0/include\builtin_types.h"
    .file   6   "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\device_types.h"
    .file   7   "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\host_defines.h"
    .file   8   "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\driver_types.h"
    .file   9   "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\surface_types.h"
    .file   10  "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\texture_types.h"
    .file   11  "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\vector_types.h"
    .file   12  "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\builtin_types.h"
    .file   13  "C:/Program Files (x86)/NVIDIA GPU Computing Toolkit/CUDA/v5.0/include\device_launch_parameters.h"
    .file   14  "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\crt\storage_class.h"
    .file   15  "c:\users\******\desktop\cudadecodesample\3_imaging\cudadecoded3d9\cudaProcessFrame.h"
    .file   16  "c:\program files (x86)\nvidia gpu computing toolkit\cuda\v5.0\include\math_functions.h"
    .file   17  "C:/Users/******/Desktop/CudaDecodeSample/3_Imaging/cudaDecodeD3D9/NV12ToARGB_drvapi.cu"
    .file   18  "C:/Program Files (x86)/NVIDIA GPU Computing Toolkit/CUDA/v5.0/include\common_functions.h" 
```

那么我的问题是：由于该文件是在编译时创建的，由于所有这些硬编码路径，它是否只能在我的机器上工作？即使没有安装 CUDA SDK，我应该怎么做才能确保程序可以在任何机器上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:21:33.087

.file 指令仅用于调试。它不会影响代码在正常情况下的编译方式。因此，我非常确定您可以剥离或完全忽略它们，并且代码将可移植，至少在您的编译器选项规定的架构和功能限制范围内（因此目标代码版本、架构和编译大小）。

# python - Django：将表单保存到数据库

> ID：14653056
> 
> 赞同：3
> 
> 时间：2013-02-01T18:48:53.457
> 
> 标签：python, django, model-view-controller

所以我有以下模型：

```
class Recipe(models.Model):
        title = models.CharField(max_length=100)
        ingredients = models.TextField(max_length=200,help_text="Put the ingredients required for the recepies here !")
        instructions = models.TextField(max_length=500)

        posted_on = models.DateTimeField('Posted On')

        def __unicode__(self):
                return self.title 
```

现在我想要做的是我有一个名为 add.html 的 html 前端，其形式如下：

```
<!DOCTYPE html>

<head><title>New Recipe</title></head>
<body>
<h1>Add A new Recipe Here</h1>

<form action="/recipes/add/" method="post">
{% csrf_token  %}

<label>ID<label>
<input type="number" name="id"></input><br />

<label>Title </label>
<input type ="text" name="title"><br />

<label>Ingredients</label>
<input type="text" name="ingredients" />
<br />

<label>Instructions </label>
<input type="text" name="instructions" />
... 
```

这是我使用以下方法保存表单的方法`ModelForm`：

```
def add(request):
        if request.method == 'POST':
                form = RecipeForm(request.POST)
                if form.is_valid():

                        form.save()
                        #redirect
                        return HttpResponse("Thank you")
                else:
                        return HttpResponse("Form Not Valid")
        else:
                form = RecipeForm()

                context = Context({'form':form,})
                context.update(csrf(request))
                template = loader.get_template('myApp/add.html')
                return HttpResponse(template.render(context)) 
```

当我运行它时，我总是得到`"form Invalid"` 所以现在我的问题是，html 表单 add.html 是否应该将 EXACT 映射作为我的模型配方？
如果是，那么

1.  如何`types`在 html 表单中添加相应的（for `posted_on`）？
2.  如何处理由`id`隐式创建的`syncdb`？
3.  有没有其他选择？

我刚开始学习Django

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:50:15.557

1) 更改`posted_on`为自动添加发布日期。

```
posted_on = models.DateTimeField(auto_now_add=True) 
```

2) Django 将为您处理 pk id 创建。

3）为什么不使用 a`ModelForm`呢？[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)。

```
class RecipeForm(ModelForm):
    class Meta:
        model = Recipe 
```

您可以使用`exclude`或`include`on`fields`确保您的表单仅包含`Recipe`您想要包含在表单中的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:56:21.457

**模型.py**

```
class Recipe(models.Model):
    title = models.CharField(max_length=100)
    ingredients = models.TextField(max_length=200,help_text="Put the ingredients required for the recepies here !")
    instructions = models.TextField(max_length=500)

    posted_on = models.DateTimeField(auto_add_now=True)

    def __unicode__(self):
            return self.title 
```

**page.html**

```
<!DOCTYPE html>

<head><title>New Recipe</title></head>
<body>
<h1>Add A new Recipe Here</h1>

<form action="/recipes/add/" method="post">
{% csrf_token  %}
     {% form.as_p %}
     <input type="submit" value="submit">
</form>
</body>
</html> 
```

**视图.py**

```
from django.contrib import messages
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect
from django.shortcuts import render

def add(request):
    if request.method == 'POST':
            form = RecipeForm(request.POST)
            if form.is_valid():
                form.save()
                    return HttpResponseRedirect(reverse('app_name:url'))
            else:
                messages.error(request, "Error")
    return render(request, 'myApp/add.html', {'form': RecipeForm()}) 
```

# ios - 使用 Objective-C 在 iPhone 上禁用 WIFI

> ID：14653058
> 
> 赞同：5
> 
> 时间：2013-02-01T18:49:03.863
> 
> 标签：ios, objective-c

是否可以在 iPhone 上使用 Objective-C 来禁用所有 WIFI 连接。我们有一个组织只希望通过手机连接发送数据，并且不希望手机能够加入任何 WIFI 网络。我们正在考虑编写一个应用程序，它可以保持 WIFI 关闭或检测它何时连接到网络然后断开连接。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-01T19:06:25.410

> 是否可以在 iPhone 上使用 Objective-C 禁用所有 WIFI 连接？

咆哮注：每个人都看到 OP 在问它是否可能？他没有提到 API 必须是公开的。所以这里是：

```
Class _SBWifiManager = objc_getClass("SBWiFiManager"); // Steal a class from SpringBoard
[[_SBWifiManager sharedInstance] setWiFiEnabled:NO]; // disable 
```

（[参考](https://github.com/DjKira/iOS-6-Headers/blob/master/SpringBoard/SBWiFiManager.h)）

但是，必须注意的是**，像这样对 iOS 内部进行模拟肯定会导致您的应用程序被拒绝。**但是，如果您不关心进入 AppStore，并且您正在开发越狱或内部或个人应用程序，那么这应该没问题。

另外，如果您需要这样的功能，我认为您应该考虑重新设计您的应用程序/代码/逻辑。这通常是不必要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T18:55:48.087

您无法从非越狱设备上的应用程序内部关闭 WiFi。

也就是说，您可以检测设备是通过 WiFi 连接还是使用[Reachability Framework](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)进行蜂窝连接，并基于此自定义行为。

# perl - 使用 Perl PAR:Packer exe -s 命令行输入

> ID：14653060
> 
> 赞同：1
> 
> 时间：2013-02-01T18:49:19.570
> 
> 标签：perl, command-line-arguments, packer

我经常将 perl`-s`选项用于我的脚本的命令行输入。现在，我想使用`PAR::packer`. 有没有办法可以将这种风格的命令行输入与 exe 文件一起使用？

例如，我会运行一个 perl 脚本：

```
perl my_script.pl -name="Robin" -date=20130201 
```

在此脚本中，变量`$name`和`$date`将使用给定的值进行初始化。我可以使用从 my_script 创建的 exe 文件（使用`PAR::packer`）来模拟这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:26:15.303

您可以在脚本的开头添加类似的内容：

```
BEGIN{ 
    my %args = map {s/^-{0,2}//; split /[=:]/} @ARGV;
    no strict 'refs';
    $$_ = $args{$_} for keys %args;
    @ARGV = ();
} 
```

或者把它放在你在脚本开始时“使用”的包中。

编辑：更改本地=>我的，简化地图并且不添加严格的 'refs' 作为 sugested。

# php - codeigniter 插入多个表

> ID：14653061
> 
> 赞同：1
> 
> 时间：2013-02-01T18:49:28.603
> 
> 标签：php, codeigniter

我有一张名为 testimonial 的表。表结构如下。

![在此处输入图像描述](../Images/481031b6511ae0c281120f91a4beabd5.png)

但表格似乎没有标准化。我想要类似的东西。

**trip_testimonial**

```
-----------------------------------
id
trip_id
status
----------------------------------- 
```

另一张桌子

**见证**

```
 ----------------------------------
    id
    name
    email
    website
    message
    ----------------------------------- 
```

但是我如何在 codeigniter 中将数据输入到它们中。我用过类似的东西

```
function add($data){

        $this->db->insert('testimonials', $data);
        if($this->db->affected_rows()>0){
            return TRUE;
        }else{
            return FALSE;
        }
    } 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:05:48.520

```
[TRIP]
trip_id
trip_name
trip_desc
....

[TESTIMONIAL]
testimonial_id
trip_id
testim_name
testim_email
......

function add($data){

  $dataTrip = array(
    //fill the array the appropriate data
  );

  //return the last inserted trip_id
  $lastTripId = $this->myModel->myFuncToAddTrip($dataTrip);    

  $dataTestimonial = array(
   'trip_id' => $lastTripId,
   'testim_name' => $data['testim_name'],
   .......
  );

  if($this->myModel->myFuncAddTestimonial($dataTestimonial)){
   //success
  }else{
   //error
  }

} 
```

如果至少 1 个查询失败，则使用事务回滚。

**编辑** 1 前往许多推荐书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:29:30.090

您的结构已针对一对一关系进行规范化，只需删除 trip_id 列

```
testimonial
-----------------------------------
id
name
email
website
message
date
status 
```

您的添加功能很好

```
function add($data){

    $this->db->insert('testimonials', $data);
    if($this->db->affected_rows()>0){
        return TRUE;
    }else{
        return FALSE;
    }
} 
```

以及要插入的数据

```
$data['name']       =   'blah';
$data['email']      =   'abc@test.com';
$data['website']    =   'website';
$data['message']    =   'message';
$data['date']       =   date('Y-m-d H:i:s'); 
```

并在创建表时或使用 ALTER 将状态的默认值设置为 0。
但是当您需要插入时，您可以再添加一列具有不同值的列。

```
$data['status']     =   1; 
```

现在你可以调用函数 add
选择时你可以选择状态

```
SELECT * FROM testimonial WHERE status = 0 
```

或者

```
SELECT * FROM testimonial WHERE status = 1 
```

更新：

如果是这种情况，您可以这样做。在推荐表中添加一列

```
testimonial
-----------------------------------
id
name
email
website
message
date
status
trip_id 
```

现在选择旅行ID

```
 SELECT id FROM trip_testimonial WHERE status = 0 
```

并且返回的 id 应该与推荐数据一起放置

```
$data['name']       =   'blah';
$data['email']      =   'abc@test.com';
$data['website']    =   'website';
$data['message']    =   'message';
$data['date']       =   date('Y-m-d H:i:s');
$data['trip_id']    =   $row->id; 
```

现在调用你的 add 函数

# session - asp.net 中的会话、缓存和配置文件有什么区别

> ID：14653065
> 
> 赞同：6
> 
> 时间：2013-02-01T18:49:38.647
> 
> 标签：session, caching, webforms, asp.net-profiles

我们经常在 asp.net webform 项目中使用会话、缓存和配置文件。我们经常在 asp.net webform 项目中将数据存储在会话、缓存和配置文件中，但我想知道什么时候应该将数据存储在会话中，或者什么时候应该存储在缓存和配置文件中。缓存或配置文件的范围是什么。这两个也是特定于会话的生命周期或特定于应用程序的。

假设如果我将会话 1 中的任何数据存储在缓存或配置文件中，那么我是否可以从会话 2 访问该数据。当我们应该将数据存储在会话、缓存和配置文件中时，只需用场景和示例来指导我。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T20:09:13.493

您`cache`通常在想要提高站点性能时使用：减少数据库调用、访问文件系统上的文件、调用外部服务等。

`Scenario 1`：假设有一个应用程序有一个页面列出了存储在数据库中的所有产品。用户需要产品列表过滤功能（例如在 ebay 或 amazon 上）。此外，与产品列表页面的使用频率相比，产品列表和产品功能的变化很少。

`Solution 1`: 这里可以`cache`用来减少数据库调用。您将产品列表和产品功能`cache`放在内存中执行过滤并避免冗余数据库调用。`Cache`每当产品列表或功能发生变化时，都应该失效。这个解决方案应该没问题，直到内存消耗处理比性能增益更便宜。

作为一个很好的资源，我建议阅读[ASP.NET 缓存：技术和最佳实践](http://msdn.microsoft.com/en-us/library/aa478965.aspx)MSDN 文章。

* * *

在`profile`您通常保存特定于具体用户的数据，并且每次用户登录系统时都应该可用。

`Scenario 2`：假设您有相同的应用程序，`Scenario 1`但现在您需要为用户提供保存他们的过滤器首选项（最喜欢的过滤器列表）的能力。

`Solution 2`：您可以创建一种过滤状态类并将其存储在 user 中`profile`。因此，用户将不会再一次又一次地指定过滤器参数，并且每次用户登录时都可以使用这些首选项。

* * *

`Session`用于存储用户特定的信息，这些信息可以从所有网页访问，并且在用户下次登录时不需要。

`Scenario 3`：假设有一些电子商务应用程序和营销人员希望以接近实时的方式查看站点上发生的事情，即查看某些用户在登录时访问了哪些页面。将此场景视为选定的用户活动快照.

`Solution 3:`在这里，您可以使用`session`记录用户访问的 URL，然后为营销人员生成报告。

至于状态管理你也可以参考另一篇 MSDN 文章[ASP.NET State Management Overview](http://msdn.microsoft.com/en-us/library/75x4ha6s(v=vs.100).aspx)。

* * *

[另一个很好的答案](https://stackoverflow.com/a/9824257/1314859)突出了管理 asp.net 应用程序状态的对象之间的区别。

* * *

希望这对您有所帮助。

# android - 小部件调整大小后小部件布局更改

> ID：14653066
> 
> 赞同：4
> 
> 时间：2013-02-01T18:49:47.830
> 
> 标签：android, android-widget, resize

我的小部件支持小部件调整大小。

但是当小部件大小改变时，文本大小保持不变。我该怎么办？

我正在寻找类似于文本大小百分比的东西，这取决于小部件的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:48:14.017

我明白了，正如文档所说：您需要在 AppWidgetProvider 中覆盖[onAppWidgetOptionsChanged](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html#onAppWidgetOptionsChanged%28android.content.Context,%20android.appwidget.AppWidgetManager,%20int,%20android.os.Bundle%29)，**因此您将在小部件调整大小时收到广播**。

```
public class YourWidgetProvider extends AppWidgetProvider {

    ...

    @Override
    public void onAppWidgetOptionsChanged (Context context, 
                                      AppWidgetManager appWidgetManager,
                                      int appWidgetId, Bundle newOptions) {
        // Here you can update your widget view
    }

    ...

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-27T14:19:54.593

要添加到 Artem 的答案，您可以通过执行以下操作从捆绑包中获取新选项。

```
public class YourWidgetProvider extends AppWidgetProvider {

    @Override
    public void onAppWidgetOptionsChanged (Context context, AppWidgetManager appWidgetManager, int appWidgetId, Bundle newOptions) {
        // This is how you get your changes.   
        int minWidth = newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH)
        int maxWidth = newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH)
        int minHeight = newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT)
        int maxHeight = newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT)
    }
} 
```

不幸的是，在 Android 上事情从来没有那么容易。TouchWiz（三星的银河系）不打这个电话，但我们可以得到他们的广播。因此，在您的 AppWidgetProvider 类中执行以下操作：

```
@Override
public void onReceive(Context context, Intent intent) {
    // Handle TouchWiz
    if(intent.getAction().contentEquals("com.sec.android.widgetapp.APPWIDGET_RESIZE")) {
        handleTouchWiz(context, intent);
    }
}

    private void handleTouchWiz(Context context, Intent intent) {

        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

        int appWidgetId = intent.getIntExtra("widgetId", 0);
        int widgetSpanX = intent.getIntExtra("widgetspanx", 0);
        int widgetSpanY = intent.getIntExtra("widgetspany", 0);

        if(appWidgetId > 0 && widgetSpanX > 0 && widgetSpanY > 0) {
            Bundle newOptions = new Bundle();
            // We have to convert these numbers for future use
            newOptions.putInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT, widgetSpanY * 74);
            newOptions.putInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH, widgetSpanX * 74);

            onAppWidgetOptionsChanged(context, appWidgetManager, appWidgetId, newOptions);
        }
    } 
```

如果您使用 MAX_HEIGHT 或 MAX_WIDTH 而我不是，您可能需要更改处理该捆绑包的方式。

# actionscript-3 - Flash 中的图片库加载到我的主 Flash 页面顶部

> ID：14653067
> 
> 赞同：1
> 
> 时间：2013-02-01T18:49:53.457
> 
> 标签：actionscript-3, flash, loader, image-gallery, flash-cs6

在 flash 中，我调用了一个外部 swf 文件和图像库，我使用加载器来执行此操作，除了一件事之外，它应该如何工作，它在我的主 flash 文件顶部打开 swf，而不是一个单独的窗口。我还需要做一个后退按钮带我回到我的主 Flash 页面，我不太确定如何操作。

我需要一些帮助我真的很挣扎这个装载机的东西。这是加载程序的代码。就像我说的那样，当我单击按钮时，它会将我带到 swf 文件。

```
var loadedSWF:Loader = null;
function loadSWF(file:String, container:MovieClip=null):void
{
if(container == null) container = MovieClip(root);

// removes the previously loaded SWF
if(loadedSWF != null)
{
    if(loadedSWF.parent) loadedSWF.parent.removeChild(loadedSWF);
}

var req:URLRequest = new URLRequest("imagegallery.swf");
loadedSWF = new Loader();
loadedSWF.load(req);

addChild(loadedSWF);
}
imageGallery_btn.addEventListener(MouseEvent.CLICK, _click);
function _click(e:MouseEvent):void
{
loadSWF("myfile1.swf");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:43:59.973

这实际上是它应该工作的方式。如果你想在一个新的“窗口”中打开画廊，你需要让它看起来好像是一个新窗口。你打电话时

```
addChild(loadedSWF); 
```

您实际上是在告诉加载的SWF 添加到舞台。要将其添加到不同的影片剪辑，您可以使用以下语法：

```
whateverMovieClipName.addChild(loadedSWF); 
```

其中whateverMovieClipName 也是您要添加外部SWF 的影片剪辑的名称。

# c++ - 工厂模式中的模板

> ID：14653072
> 
> 赞同：1
> 
> 时间：2013-02-01T18:50:08.720
> 
> 标签：c++

当我在解释一个工厂模式时，它接受一个枚举到它的 createobject 静态方法，一位同事问我们如何才能使它不必每次定义一个新的派生类时都添加一个 switch case。下面几行的东西。我知道它不会编译（只是为了更好地表达这个想法）

```
template <class T>
class theCreator {
  public:
    static T* createInstance(int a_ichoice) {
      return new T();
    }
};

class theBase {
  public:
    virtual void SayyourName() = 0;
};

class theDerived1 : theBase {
  public:
    void SayyourName() {
      cout << typeid(this).name();
    }
};

class theDerived2 : theBase {
  public:
    void SayyourName() {
      cout << typeid(this).name();
    }
};

int main() {
  theBase * p = theCreator::createInstance(1);
  p->SayyourName();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:21:36.893

因此，您可以在运行时将类型列表与所述列表的索引相关联。不确定你是否真的想要。这是我获取类型的示例，将其映射到类型列表的索引，调用虚函数，然后将映射反转回类型，并根据传递的原始类型在实现中调用模板函数在：

```
#include <type_traits>

template<typename... Types>
struct TypeList {};

template<typename T, typename List, typename=void>
struct IndexOf;

template<typename T, typename First, typename... Types>
struct IndexOf<T, TypeList<First, Types...>,
  typename std::enable_if<
    std::is_same< T, First >::value
  >::type
> {
  enum {value = 0};
};

template<typename T, typename First, typename... Types>
struct IndexOf<T, TypeList<First, Types...>,
  typename std::enable_if<
    !std::is_same< T, First >::value
  >::type
> {
  enum {value = 1+IndexOf<T, TypeList<Types...>>::value};
};

template<size_t n, typename List>
struct TypeAt;

template<size_t n, typename First, typename... Types>
struct TypeAt<n, TypeList<First, Types...>> {
    typedef typename TypeAt<n-1, TypeList<Types...>>::type type;
};

template<typename First, typename... Types>
struct TypeAt<0, TypeList<First, Types...>> {
    typedef First type;
};

template<typename Functor, typename List>
struct TypeDispatch {
    struct Helper {
        Helper( Functor const& f_ ):f(f_) {}
        Functor const& f;
        template<size_t n>
        void Call() const {
            typedef typename TypeAt<n, List>::type target_type;
            f.template Call<target_type>();
        }
    };
};

template<size_t max>
struct RuntimeSwitch {
    template<typename Functor>
    static bool Call( size_t n, Functor const& f ) {
        if (n == max) {
            f.template Call<max>();
            return true;
        } else {
            return RuntimeSwitch<max-1>::template Call( n, f );
        }
    }
};

template<>
struct RuntimeSwitch< size_t(-1) > {
    template<typename Functor>
    static bool Call( size_t n, Functor const& f ) {
        return false;
    }
};

template<typename List>
struct DynamicTypeDispatch;

template<typename... Types>
struct DynamicTypeDispatch<TypeList<Types...>> {
    template<typename Functor>
    static bool Call( size_t n, Functor const& f ) {
        typedef TypeDispatch<Functor, TypeList<Types...>> typeDispatch;
        typedef typename typeDispatch::Helper typeCaller;
        return RuntimeSwitch<sizeof...(Types)-1>::Call(n, typeCaller(f));
    }
};

#include <iostream>
#include <string>
struct Test {
    std::string s;
    Test( std::string s_ ):s(s_) {}
    template<typename T>
    void Call() const {
        std::cout << sizeof(T) << " == " << s.c_str() << " I hope\n";
    }
};

struct Test2Base {
    typedef TypeList<int, double, char> TestList;
    virtual void Dispatch( size_t n ) = 0;
    template<typename T>
    void Test(T const& unused) {
        Dispatch( IndexOf<T, TestList>::value );
    }
};
template<typename Child>
struct Test2CRTP: Test2Base {
    Child* self() { return static_cast<Child*>(this);}
    Child const* self() const { return static_cast<Child const*>(this); }

    template<typename T>
    void Call() const {
        self()->template TestImpl<T>();
    }
    virtual void Dispatch( size_t n ) {
        DynamicTypeDispatch<Test2Base::TestList>::Call( n, *this );
    }
};
struct Test2Impl: Test2CRTP<Test2Impl> {
  template<typename T>
  void TestImpl() const {
      std::cout << T(256.1) << "\n";
  }
};
int main()
{
    typedef TypeList<int, double> TestList;
    DynamicTypeDispatch<TestList>::Call( 0, Test("4") );
    DynamicTypeDispatch<TestList>::Call( 1, Test("8") );

    Test2Impl test2;
    test2.Test(int());
    test2.Test(char());
    test2.Test(double());
} 
```

现在，你真的想做这么重的事情，而不是维持一个`enum`？

但这是可能的。:)

# javascript - jquery ui droppable：如何在 div 外使用溢出删除元素：隐藏？

> ID：14653079
> 
> 赞同：2
> 
> 时间：2013-02-01T18:50:37.447
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-droppable

我知道如何使用[jquery ui droppable](http://jqueryui.com/droppable/)。

但我不确定是否可以这样做：

[用这个小提琴看一个活生生的例子](http://jsfiddle.net/Vinyl/rrn6L/1/)

我有一个 div 中的元素列表，它位于 overflow:hidden 中：

html：

```
<div id="list">
    <p id="draggable_1">Element 1</p>
    <p id="draggable_2">Element 2</p>
    <p id="draggable_3">Element 3</p>
</div> 
```

CSS：

```
#list
{
    overflow:hidden;
} 
```

javascript / jQuery :

```
$("#draggable_1").draggable();
$titre_track_1.droppable({
    drop: function () {
        alert("dropped");
    }
}); 
```

如果我尝试在 div #list 之外放置像 draggable_1 这样的元素，则该元素不可见。这是逻辑，因为父级处于溢出：隐藏

你知道是否可以把那个元素放在外面吗？我需要让这个 div 溢出：隐藏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:20:22.770

您可以使用克隆助手在拖动开始时克隆元素并将其附加到带有`appendTo`选项的主体：

```
$("#draggable_1").draggable({
    helper: 'clone',
    appendTo: 'body',
    start: function(e){
        $(this).css('visibility', 'hidden');
    },
    stop: function(){
        $(this).css('visibility', 'visible');
    }
}); 
```

[http://jsfiddle.net/xYQ9c/](http://jsfiddle.net/xYQ9c/)

# php - PHP preg_replace_callback 没有替换我的“匹配”

> ID：14653085
> 
> 赞同：0
> 
> 时间：2013-02-01T18:50:46.343
> 
> 标签：php, regex, preg-replace-callback

为什么这会返回原始字符串而不是编辑后的字符串？

原始字符串：

```
I cant believe Ed ate [-food-] for breakfast. 
```

代替：

```
preg_replace_callback('/\[\-[a-zA-Z0-9_]\-\]/', 'tag_func', $email_body);

function tag_func($matches){
     $matches[0] = 'tacos';
     return $matches[0];
} 
```

结果所需的字符串：

```
I cant believe Ed ate tacos for breakfast. 
```

这是我收到的警告：

```
preg_replace_callback(): Requires argument 2, 'tag_func', to be a valid callback 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:51:36.323

您忘记添加 a `+`，以便它应该匹配多个字符：

```
preg_replace_callback('/\[-[a-z\d_]+-\]/i', 'tag_func', $email_body);
//                                 ^ 
```

在此处查看实际操作：[http ://codepad.viper-7.com/f94VPy](http://codepad.viper-7.com/f94VPy)

* * *

如果你运行的是 5.3，你可以直接给它传递一个匿名函数：

```
preg_replace_callback('/\[-[a-z\d_]+-\]/i', function () {
    return 'tacos';
}, $email_body); 
```

这是演示：[http ://codepad.viper-7.com/NGBAIh](http://codepad.viper-7.com/NGBAIh)

# google-app-engine - 图片加载缓慢

> ID：14653086
> 
> 赞同：0
> 
> 时间：2013-02-01T18:50:46.403
> 
> 标签：google-app-engine

我正在使用一些图像的谷歌应用引擎上运行一个[简单的应用程序。](http://www.anaadyanta.com)显然，下载图像需要很长时间，导致页面加载缓慢。

我尝试增加`Frontend Instance Class`，但似乎并没有改善这种情况。GAE有这个问题，还是只是我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:08:36.847

页面加载对我来说很好。虽然我在这里有几个想法。

首先，我将使用 Chrome 开发人员工具（右键单击->检查元素->审核）审核页面。

审核页面向您展示了一些关于如何提高页面性能的建议。最重要的是：

利用浏览器缓存：请参阅[静态缓存过期](https://developers.google.com/appengine/docs/python/config/appconfig#Static_Cache_Expiration)

提供来自无 cookie 域的静态内容：您的图像应使用[静态文件处理程序](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)声明。

指定图像尺寸：设置图像的宽度和高度时渲染速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:56:49.553

要加载图像，您可以使用 get_serving_url 并且 Google 将为您提供图像：快速且几乎免费，因为您不需要处理程序来提供图像。谷歌这个文档。

# java - Android相机应用强制关闭

> ID：14653090
> 
> 赞同：0
> 
> 时间：2013-02-01T18:51:00.863
> 
> 标签：java, android, camera, android-camera, forceclose

我正在为android构建一个相机应用程序，试图学习如何。我遵循了一个教程，但它一直失败并强制关闭。请在下面查看我的详细信息：

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:id="@+id/layout">
<TextView android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:text="Camera Demo"
    android:textSize="24sp" />

<FrameLayout android:id="@+id/preview"
    android:layout_weight="1" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
</FrameLayout>

<Button android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:id="@+id/buttonClick"
    android:text="Click" android:layout_gravity="center"></Button>

</LinearLayout> 
```

Java代码：

```
public class CameraActivity extends Activity {
private static final String TAG = "CameraDemo";
Camera camera;
Preview preview;
Button buttonClick;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera_screen);

    preview = new Preview(this);
    ((FrameLayout) findViewById(R.id.preview)).addView(preview);

    buttonClick = (Button) findViewById(R.id.buttonClick);
    buttonClick.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            preview.camera.takePicture(shutterCallback, rawCallback,
                    jpegCallback);
        }
    });

    Log.d(TAG, "onCreate'd");
}

ShutterCallback shutterCallback = new ShutterCallback() {
    public void onShutter() {
        Log.d(TAG, "onShutter'd");
    }
};

/** Handles data for raw picture */
PictureCallback rawCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        Log.d(TAG, "onPictureTaken - raw");
    }
};

/** Handles data for jpeg picture */
PictureCallback jpegCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        FileOutputStream outStream = null;
        try {
            // write to local sandbox file system
            // outStream =
            // CameraDemo.this.openFileOutput(String.format("%d.jpg",
            // System.currentTimeMillis()), 0);
            // Or write to sdcard
            outStream = new FileOutputStream(String.format(
                    "/sdcard/%d.jpg", System.currentTimeMillis()));
            outStream.write(data);
            outStream.close();
            Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
        }
        Log.d(TAG, "onPictureTaken - jpeg");
    }
};

} 
```

预览.java：

```
class Preview extends SurfaceView implements SurfaceHolder.Callback {
private static final String TAG = "Preview";

SurfaceHolder mHolder;
public Camera camera;

Preview(Context context) {
    super(context);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    camera = Camera.open();
    try {
        camera.setPreviewDisplay(holder);

        camera.setPreviewCallback(new PreviewCallback() {

            public void onPreviewFrame(byte[] data, Camera arg1) {
                FileOutputStream outStream = null;
                try {
                    outStream = new FileOutputStream(String.format(
                            "/sdcard/%d.jpg", System.currentTimeMillis()));
                    outStream.write(data);
                    outStream.close();
                    Log.d(TAG, "onPreviewFrame - wrote bytes: "
                            + data.length);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                }
                Preview.this.invalidate();
            }
        });
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    // Because the CameraDevice object is not a shared resource, it's very
    // important to release it when the activity is paused.
    camera.stopPreview();
    camera = null;
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Now that the size is known, set up the camera parameters and begin
    // the preview.
    Camera.Parameters parameters = camera.getParameters();
    parameters.setPreviewSize(w, h);
    camera.setParameters(parameters);
    camera.startPreview();
}

@Override
public void draw(Canvas canvas) {
    super.draw(canvas);
    Paint p = new Paint(Color.RED);
    Log.d(TAG, "draw");
    canvas.drawText("PREVIEW", canvas.getWidth() / 2,
            canvas.getHeight() / 2, p);
}
} 
```

日志猫：

```
02-01 19:44:41.825: E/AndroidRuntime(4329): FATAL EXCEPTION: main
02-01 19:44:41.825: E/AndroidRuntime(4329): java.lang.RuntimeException: setParameters failed
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.hardware.Camera.native_setParameters(Native Method)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.hardware.Camera.setParameters(Camera.java:1527)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at com.mysoftware.mysoftwareos.mobile.Preview.surfaceChanged(Preview.java:78)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.SurfaceView.updateWindow(SurfaceView.java:554)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.SurfaceView.access$000(SurfaceView.java:81)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:671)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1848)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1028)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4246)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.Choreographer.doFrame(Choreographer.java:525)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.os.Handler.handleCallback(Handler.java:615)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.os.Looper.loop(Looper.java:137)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at android.app.ActivityThread.main(ActivityThread.java:4765)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at java.lang.reflect.Method.invoke(Method.java:511)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-01 19:44:41.825: E/AndroidRuntime(4329):     at dalvik.system.NativeStart.main(Native Method)
02-01 19:44:45.455: E/Trace(4386): error opening trace file: No such file or directory (2)
02-01 19:44:45.585: E/PhonePolicy(4386): Could not preload class for phone policy: com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback 
```

请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:37:27.213

您没有显示 Preview 类的源代码，因此很难说可能出了什么问题。

但从跟踪来看，错误来自 Preview.surfaceChanged 的​​ Camera.setParameters() 调用。所以问题是，你想在相机不喜欢的地方设置什么？

此外，您的日志仅涵盖了该异常，因此没有关于系统在您失败之前正在做什么的上下文。在失败之前包含一些日志对调试也很有帮助；系统通常会在堆栈跟踪前几行打印出调用失败的原因。

编辑：现在有了 Preview.java，我可以看到问题所在。

您不能为相机预览输出选择随机大小。它必须是[getSupportedPreviewSizes()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewSizes%28%29)提供的预览尺寸之一。现在，您只是将 Surface 的大小用于预览输出，这根本不能保证工作（如果大小与列表中的一个匹配，您可能会很幸运，但这不太可能）。

看看安卓开发者网站上的[相机应用教程；](http://developer.android.com/guide/topics/media/camera.html#custom-camera)它试图涵盖其中一些细节。

# android - 在 onPostExecute Asynctask 中运行对话框

> ID：14653095
> 
> 赞同：0
> 
> 时间：2013-02-01T18:51:19.073
> 
> 标签：android

我在 Asynctask 中有 onPostExecute

```
protected void onPostExecute(Void unused) {
        TextView tvStatus=(TextView) layoutSendDialog.findViewById(R.id.tvPupukSendStatus);
        if (bNodata){
            tvStatus.setText("No data to be sent!!!");              
        }else {
            if (bError){
                tvStatus.setText("Fail at record #"+String.format("%d",recordCount));
            }
            else {
                tvStatus.setText("Sending Data : Finished");
                CUtilities.showAlert(CInputHamaApp.this, "Data Terkirim");
                createDialogSend2();
                // Closing dashboard screen
            }
        }
//          dismissDialog(CGeneral.DIALOG_SEND);
    } 
```

这是我的对话

```
private Dialog createDialogSend2(){
    AlertDialog.Builder builder = new AlertDialog.Builder(CInputHamaApp.this);
    builder.setMessage("Anda yakin untuk update?");
    builder.setTitle("Warning") ;
    builder.setPositiveButton("YES",  new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dlg, int sumthin) {
            Intent i2 = new Intent(CInputHamaApp.this, CInputHamaApp.class);
            startActivity(i2);
            }
            });
    builder.setNegativeButton("No",  new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dlg, int sumthin) {
            // do nothing – it will close on its own
            }
            });
    return builder.create();        
}//createDialogSend2 
```

我把`createDialogSend2();`这个 onPostExecute 代码

```
 else {
                    tvStatus.setText("Sending Data : Finished");
                    CUtilities.showAlert(CInputHamaApp.this, "Data Terkirim");
                    createDialogSend2();
                    // Closing dashboard screen
                } 
```

但结果是当状态完成时，对话框仅显示警报，而`createDialogSend2();`不是运行。

如何`createDialogSend2()`在文本发送数据完成时显示

BR

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:55:36.097

您的功能没有`show()`对话框。你需要类似...

```
AlertDialog dlg = createDialogSend2();
dlg.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:56:59.190

试试这个，

```
AlertDialog alert = builder.create();    
alert.show(); 
```

将此添加到您的`createDialogSend2()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:34:12.433

这对我有用，在 OnPostExecute 方法中。

我在我的 AsyncTask 类中添加 Activity 对象作为属性，我在该 AsyncTack 的构造函数中实例化它，以便我可以调用该活动并在 onpostexe 中执行 runOnUiThread ...

```
AlertDialog.Builder builder = new AlertDialog.Builder(Activity);
            builder.setTitle("Connection ?");
            builder.setIcon(android.R.drawable.ic_dialog_alert);
            builder.setMessage("Test \n ");
            builder.setPositiveButton("Ok",null);
            final AlertDialog alert = builder.create();
            Activity.runOnUiThread(new java.lang.Runnable(){
                public void run(){
                    //show AlertDialog
                    alert.show();
                }
            }); 
```

# jenkins - Jenkins：如何在控制台输出中找到链接并将其放在构建页面上？

> ID：14653096
> 
> 赞同：4
> 
> 时间：2013-02-01T18:51:27.980
> 
> 标签：jenkins

我正在寻找一种从 Jenkins 构建控制台中提取链接并将提取的文本放在构建页面上的方法。

[Log Parser Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Log+Parser+Plugin)没有帮助，因为它添加了指向构建页面的链接，但重点是提供直接链接。

对 Jenkins 的回答[：在项目页面上显示最后一个控制台输出](https://stackoverflow.com/questions/9496888/jenkins-display-last-console-output-on-project-page)对于提供控制台的快捷方式很有用，但也不能解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:05:55.740

我为此使用[https://wiki.jenkins-ci.org/display/JENKINS/Description+Setter+Plugin 。](https://wiki.jenkins-ci.org/display/JENKINS/Description+Setter+Plugin)它允许在控制台日志中搜索 RegEx 表达式，并使用该表达式更新作业的描述。这在两者上都可见：在构建历史记录中的构建下方和构建页面上

# wordpress - 从 wordpress 小部件中删除自动段落

> ID：14653101
> 
> 赞同：6
> 
> 时间：2013-02-01T18:51:40.543
> 
> 标签：wordpress

我刚刚完成了我的第一个 wordpress 主题。我的问题是，当我创建一个新的文本小部件时，输出会自动添加到段落中，并且我还看到`<br />`每行之后都插入了标签。任何人都可以在这里帮助我！

我已经添加`remove_filter('the_content', 'wpautop');`到我的functions.php，但它不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-06-22T20:38:48.863

也许这可以帮助你（或其他人）：

```
// remove <br> tags from text widget content, from 4.8 version WP adds these tags
remove_filter('widget_text_content', 'wpautop'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-14T15:42:15.340

从 WordPress 4.8 开始，文本小部件上的“自动添加段落”复选框已被删除。

但是，我在存储库中编写了一个插件来重新添加复选框。

[https://wordpress.org/plugins/add-paragraphs-option-to-text-widget/](https://wordpress.org/plugins/add-paragraphs-option-to-text-widget/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T19:11:04.407

**选项1：**

转到小部件页面，编辑您的文本小部件并取消选中 textarea 下的复选框。 ![如何从文本小部件内容中删除段落](../Images/94dade44b4641f1fc0971bc80ff70a51.png)

**选项#2：**

创建自己的钩子，它将影响所有文本小部件：

```
add_filter( 'widget_display_callback', 'wpse8170_widget_display_callback', 10, 3 );
function wpse8170_widget_display_callback( $instance, $widget, $args ) {
    $instance['filter'] = false;
    return $instance;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T20:47:17.483

默认情况下，WordPress 在文本小部件上有一个“自动添加段落”复选框，可让您关闭段落。

![在此处输入图像描述](../Images/2c1d9587fa9d727fe3e834f8a2c2f6db.png)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-08-16T05:50:45.490

在functions.php中添加以下代码

// 从 wordpress 小部件中删除自动段落

remove_filter('the_content', 'wpautop');

# sql-update - 使用 2 个主键从另一个表更新

> ID：14653102
> 
> 赞同：0
> 
> 时间：2013-02-01T18:51:42.407
> 
> 标签：sql-update, composite-primary-key

我有两个表 T1 和 T2 具有相同的列（服务，desti，...） T1 上的复合主键（服务，desti）我想将 t1 更新为 t2 中的数据。

请建议，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:54:22.540

我想这就是你要问的：

```
update t1 set col1 = t2.col1, col2 = t2.col2, etc
from t2
where t1.service = t2.service and t1.desti = t2.desti 
```

# php - 如何在wordpress中创建文件并传递参数？

> ID：14653103
> 
> 赞同：0
> 
> 时间：2013-02-01T18:51:45.810
> 
> 标签：php, wordpress, plugins

我在 wordpress 中创建了一个名为 my-game 的插件文件夹。通过调用 add_action 和其他规则，我的代码以老式方式完美运行。问题是我不想通过注册来调用我的代码。我想在我的侧边栏中有一个链接（“index.php?action=game”），它将在我的游戏中获取 game.php 的内容插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:59:50.243

这不会是一个很好的方法，但是，你可以在你的 function.php 中添加它吗？

```
if(isset($_GET['action']) && ($_GET['action']=='game')) {
    include(PATH_TO_GAME);
    exit();
} 
```

我认为更好的方法是在 function.php 中添加一个函数来做你想做的事：

```
function MY_FUNCTION() {
    include(PATH_TO_GAME);
    exit();
}
add_action('wp_ajax_MY_FUNCTION', 'MY_FUNCTION');
add_action('wp_ajax_nopriv_MY_FUNCTION', 'MY_FUNCTION');//for users that are not logged in 
```

然后这样称呼它

```
$url = admin_url('admin-ajax.php').'?action=MY_FUNCTION'; 
```

# android - 自动滚动文本视图

> ID：14653105
> 
> 赞同：1
> 
> 时间：2013-02-01T18:51:49.460
> 
> 标签：android, scroll, textview

我有这个布局，但是当这个 textview 有超过 2 行文本时，我无法将 ready_text textview 设置为垂直自动滚动到底部。谁能帮我解决这个问题。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:weightSum="100" >

    <LinearLayout
        android:id="@+id/topHolder"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:layout_alignParentTop="true" >

        <TextView
            android:id="@+id/ready_text"
            android:layout_width="100dp"
            android:layout_height="30dp"
            android:layout_margin="2dp"
            android:background="@color/white"
            android:maxLines="2"
            android:paddingLeft="10dp"
            android:scrollbars="none"
            android:textColor="@color/black"
            android:layout_gravity="bottom"
            android:textSize="12sp"
            android:paddingBottom="10dp" />

        <LinearLayout
            android:id="@+id/recognized_text_container"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:background="@color/white"
            android:textColor="@color/black" >
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/buttonsHolder"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@color/yellow"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnUndo"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnUndo"
            android:textColor="@color/white" />

        <Button
            android:id="@+id/btnSym"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnSym"
            android:textColor="@color/white" />

        <ImageButton
            android:id="@+id/btnReturn"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:src="@drawable/enter" />

        <Button
            android:id="@+id/btnAt"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnAt"
            android:textColor="@color/white" />

        <Button
            android:id="@+id/btnExclamation"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnExclamation"
            android:textColor="@color/white" />

        <Button
            android:id="@+id/btnQuestion"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:layout_marginRight="0dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnQuestion"
            android:textColor="@color/white" />

        <Button
            android:id="@+id/btnComma"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnComma"
            android:textColor="@color/white" />

        <Button
            android:id="@+id/btnDot"
            android:layout_width="20dp"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnDot"
            android:textColor="@color/white" />

        <Button
            android:id="@+id/btnSpace"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_margin="5dp"
            android:background="@android:color/darker_gray"
            android:text="@string/btnSpace"
            android:textColor="@color/white" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/writingSurface"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/buttonsHolder"
        android:layout_below="@id/topHolder" >

        <com.myapp.myview
            android:id="@+id/my_view"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@color/yellow" />
    </LinearLayout>

</RelativeLayout> 
```

我也尝试使用此代码滚动：

```
final int scrollAmount = ready_text.getLayout()
                    .getLineTop(ready_text.getLineCount())-ready_text.getHeight();
            Log.v("DARE", scrollAmount+"");
            // if there is no need to scroll, scrollAmount will be <=0
            if(scrollAmount>0)
                ready_text.scrollTo(0, scrollAmount);
            else
                ready_text.scrollTo(0,0); 
```

# php - 为什么我的 html 电子邮件在 GMail 中是空白的？（代码点火器）

> ID：14653108
> 
> 赞同：0
> 
> 时间：2013-02-01T18:52:09.573
> 
> 标签：php, html, codeigniter, email

我正在尝试使用 codeigniter 发送 HTML 电子邮件，但是当我使用 GMail 检查我的收件箱时，消息是空白的。为什么要这样做？

**我检查了类似的问题，但似乎没有一个提供有效的答案。**

这是我的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Email extends CI_Controller {

    public function index()
    {

        $message = $this->load->view("email/default_view",True);

        $email_config = Array(
            'protocol'  => 'smtp',
            'smtp_host' => 'ssl://smtp.googlemail.com',
            'smtp_port' => '465',
            'smtp_user' => '****************',
            'smtp_pass' => '****************',
            'mailtype'  => 'html',
            'starttls'  => true,
            'newline'   => "\r\n"
        );

        $this->load->library("email",$email_config);

        $this->email->from('*******', '*********');
        $this->email->to('********'); 

        $this->email->subject("Re: Contact");
        $this->email->message($message);    

        $this->email->send();

        echo $this->email->print_debugger();

    }

} 
```

而我的观点：

```
<html>
  <body>
    <h2>Some text</h2>
</body>
</html> 
```

我没有从“print_debugger()”得到任何错误，并且消息按预期显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:54:45.293

您需要`TRUE`作为第三个参数传递给视图：

```
$message = $this->load->view("email/default_view", null , true); 
```

# playframework-2.0 - Play 2.1.x 中是否仍需要 conf/play.plugins 文件？

> ID：14653109
> 
> 赞同：4
> 
> 时间：2013-02-01T18:52:13.037
> 
> 标签：playframework-2.0

我还没有看到它正式记录在任何地方，但似乎在 Play 1 和 2 中更新`conf/play.plugins`文件是启用插件的强制性步骤。

例如，如[本文](http://www.objectify.be/wordpress/?p=464)中所描述的*objectify.be*

> **无论实现语言如何，一旦您将插件添加到conf/play.plugins** 文件中，Play 就会直接调用它们。启动新应用程序时不会创建此文件，因此您需要自己添加。语法是：。例如，要将示例插件添加到您的项目中，您可以使用
> 
> ```
>  10000:be.objectify.example.MyExamplePlugin 
> ```

在 Play 2.1.x 中仍然需要这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:12:45.660

[通过查看源代码](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/Application.scala#L97)，`conf/play.plugins`仍然需要手动创建。

# php - 关于我的页面验证或验证

> ID：14653112
> 
> 赞同：0
> 
> 时间：2013-02-01T18:52:17.560
> 
> 标签：php

这是我的代码：是否有可能使

```
if(isset($_GET['home'])){
if($_SESSION['valid_user']==null){
    $_SESSION['pages']=0;//this is when user is not login or visitor
}else{
    if($_SESSION['valid_admin']==1){
        $_SESSION['pages']=1;//this is when user is login as admin
    }else{
        $_SESSION['pages']=2;//this is where user is login
    }
}
} 
```

当我像这样编写代码时。

```
 if(isset($_GET['home'])){
if($_SESSION['valid_user']==null){
    $_SESSION['pages']=0;//this is when user is not login or visitor
}else{
    if($_SESSION['valid_admin']==null){
        $_SESSION['pages']=0;//this is when user is login as admin
    }else{
        $_SESSION['pages']=2;//this is where user is login
    }
}
} 
```

如果valid_admin或admin_user登录我应该把代码放在哪里我为我的主页创建了3个不同的页面.. 1 =用户1 =管理员和1 =访客对不起我的英语不好我只是php中的新手...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:56:23.840

我会选择类似的东西：

```
if(isset($_GET['home'])){
  if(isset($_SESSION['valid_user'])) {
    $_SESSION['pages']=0;//this is when user is not login
  } else {
    if(isset($_SESSION['valid_admin'])) {
      $_SESSION['pages']=1;//this is when user is login as admin
    } else {
      $_SESSION['pages']=2;//this is where user is login or Visitor
    }
  }
} 
```

在这种情况下，您只需设置相应的`$_SESSION`成员。

# ios - NSDate 比较，找出特定（本地）时区的“午夜数”

> ID：14653114
> 
> 赞同：6
> 
> 时间：2013-02-01T18:52:18.320
> 
> 标签：ios, cocoa-touch, cocoa, nsdate

我在这里错过了什么吗？似乎 Apple 提供的方法仅适用于 UTC，无论机器的默认时区如何，或者您将其设置为什么。

这是我得到的输出：

```
Output:
2013-02-01 10:41:24.152 Scratch[17640:c07] cal=gregorian, cal.timeZone=America/Los_Angeles (PST) offset -28800
2013-02-01 10:41:24.154 Scratch[17640:c07] date_Feb1_1400PST=2013-02-01 14:00 -0800
2013-02-01 10:41:24.156 Scratch[17640:c07] date_Feb2_1200PST=2013-02-02 12:00 -0800
2013-02-01 10:41:24.157 Scratch[17640:c07] midnights between=1
2013-02-01 10:41:24.158 Scratch[17640:c07] and then...
2013-02-01 10:41:24.159 Scratch[17640:c07] date_Feb1_2000PST=2013-02-01 22:00 -0800
2013-02-01 10:41:24.161 Scratch[17640:c07] date_Feb2_1000PST=2013-02-02 10:00 -0800
2013-02-01 10:41:24.161 Scratch[17640:c07] midnights between=0
```

***我真正想知道的是给定时区*（本地或其他地方，不一定是UTC）的两天之间的“多少个午夜”（即多少个日历日差异）**

这似乎是一个如此常见且相当简单的问题，以至于我惊讶地发现它是多么混乱和难以弄清楚。

我不是在寻找涉及“mod 86400”或类似脏东西的答案。框架应该能够认真地告诉我这一点。

```
- (void)doDateComparisonStuff {
    NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    cal.timeZone = [NSTimeZone timeZoneWithName:@"America/Los_Angeles"];
    NSLog(@"cal=%@, cal.timeZone=%@", cal.calendarIdentifier, cal.timeZone);

    NSDate *date_Feb1_1400PST = [self dateFromStr:@"20130201 1400"];
    NSLog(@"date_Feb1_1400PST=%@", [self stringFromDate:date_Feb1_1400PST]);

    NSDate *date_Feb2_1200PST = [self dateFromStr:@"20130202 1200"];
    NSLog(@"date_Feb2_1200PST=%@", [self stringFromDate:date_Feb2_1200PST]);

    NSLog(@"midnights between=%d", [self daysWithinEraFromDate:date_Feb1_1400PST toDate:date_Feb2_1200PST usingCalendar:cal]);

    NSLog(@"and then...");

    NSDate *date_Feb1_2000PST = [self dateFromStr:@"20130201 2200"];
    NSLog(@"date_Feb1_2000PST=%@", [self stringFromDate:date_Feb1_2000PST]);

    NSDate *date_Feb2_1000PST = [self dateFromStr:@"20130202 1000"];
    NSLog(@"date_Feb2_1000PST=%@", [self stringFromDate:date_Feb2_1000PST]);

    NSLog(@"midnights between=%d", [self daysWithinEraFromDate:date_Feb1_2000PST toDate:date_Feb2_1000PST usingCalendar:cal]);
}

// based on "Listing 13" at
// https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW1
- (NSInteger)daysWithinEraFromDate:(NSDate *)startDate toDate:(NSDate *)endDate usingCalendar:(NSCalendar *)cal
{
    NSInteger startDay=[cal ordinalityOfUnit:NSDayCalendarUnit
                                       inUnit: NSEraCalendarUnit forDate:startDate];
    NSInteger endDay=[cal ordinalityOfUnit:NSDayCalendarUnit
                                     inUnit: NSEraCalendarUnit forDate:endDate];
    return endDay-startDay;
}

- (NSDate *)dateFromStr:(NSString *)dateStr {
    NSDateFormatter *df = nil;
    df = [[NSDateFormatter alloc] init];
    df.timeZone = [NSTimeZone timeZoneWithName:@"America/Los_Angeles"];
    df.dateFormat = @"yyyyMMdd HHmm";

    return [df dateFromString:dateStr];
}

- (NSString *)stringFromDate:(NSDate *)date {
    NSDateFormatter *df = nil;
    df = [[NSDateFormatter alloc] init];
    df.timeZone = [NSTimeZone timeZoneWithName:@"America/Los_Angeles"];  // native timezone here
    df.dateFormat = @"yyyy-MM-dd HH:mm Z";

    return [df stringFromDate:date];
}
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:25:58.830

使用[此答案](https://stackoverflow.com/a/4739650/937822)作为起点，我只是将日历添加为附加参数（如果需要，您可以只传递时区而不是日历）：

```
- (NSInteger)daysBetweenDate:(NSDate*)fromDateTime andDate:(NSDate*)toDateTime usingCalendar:(NSCalendar *)calendar
{
    NSDate *fromDate;
    NSDate *toDate;

    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&fromDate
                 interval:NULL forDate:fromDateTime];
    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&toDate
                 interval:NULL forDate:toDateTime];

    NSDateComponents *difference = [calendar components:NSDayCalendarUnit
                                               fromDate:fromDate toDate:toDate options:0];

    return [difference day];
} 
```

这将使用您传递的日历来确定和之间的午夜数，`fromDateTime`并将`toDateTime`其作为`NSInteger`. 确保正确设置时区。

使用上面的示例，这是输出：

```
2013-03-07 17:23:54.619 Testing App[69968:11f03] cal=gregorian, cal.timeZone=America/Los_Angeles (PST) offset -28800
2013-03-07 17:23:54.621 Testing App[69968:11f03] date_Feb1_1400PST=20130201 1400
2013-03-07 17:23:54.621 Testing App[69968:11f03] date_Feb2_1200PST=20130202 1200
2013-03-07 17:23:54.622 Testing App[69968:11f03] midnights between=1
2013-03-07 17:23:54.622 Testing App[69968:11f03] and then...
2013-03-07 17:23:54.623 Testing App[69968:11f03] date_Feb1_2000PST=20130201 2200
2013-03-07 17:23:54.624 Testing App[69968:11f03] date_Feb2_1000PST=20130202 1000
2013-03-07 17:23:54.624 Testing App[69968:11f03] midnights between=1 
```

所以是的，我支持我的投票，将这个问题作为重复问题结束，因为它**非常**接近你正在做的事情。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T04:58:37.063

以下是我的做法：

```
// pick a random timezone
// obviously you'd replace this with your own desired timeZone
NSArray *timeZoneNames = [NSTimeZone knownTimeZoneNames];
NSTimeZone *randomZone = [NSTimeZone timeZoneWithName:[timeZoneNames objectAtIndex:(arc4random() % [timeZoneNames count])]];

// create a copy of the current calendar
// (because you should consider the +currentCalendar to be immutable)
NSCalendar *calendar = [[NSCalendar currentCalendar] copy];

// change the timeZone of the calendar
// this causes all computations to be done relative to this timeZone
[calendar setTimeZone:randomZone];

// your start and end dates
// obviously you'd replace this with your own dates
NSDate *startDate = [NSDate dateWithTimeIntervalSinceReferenceDate:1234567890.0];
NSDate *endDate = [NSDate dateWithTimeIntervalSinceReferenceDate:1234890567.0];

// compute the midnight BEFORE the start date
NSDateComponents *midnightComponentsPriorToStartDate = [calendar components:NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:startDate];
NSDate *midnightPriorToStartDate = [calendar dateFromComponents:midnightComponentsPriorToStartDate];

// this will keep track of how many midnights there are
NSUInteger numberOfMidnights = 0;

// loop F.O.R.E.V.E.R.
while (1) {
    // compute the nth midnight
    NSDateComponents *dayDiff = [[NSDateComponents alloc] init];
    [dayDiff setDay:numberOfMidnights+1];
    NSDate *nextMidnight = [calendar dateByAddingComponents:dayDiff toDate:midnightPriorToStartDate options:0];

    // if this midnight is after the end date, we stop looping
    if ([endDate laterDate:nextMidnight] == nextMidnight) {
        // this next midnight is after the end date
        break; // ok, maybe not forever
    } else {
        // this midnight is between the start and end date
        numberOfMidnights++;
    }
}

NSLog(@"There are %lu midnights between %@ and %@", numberOfMidnights, startDate, endDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T07:50:54.757

这是我能想到的最好的。

无论当前日历是什么和一天中的时间，它都可以工作。

```
- (NSInteger)daysApartFrom:(NSDate *)startDate toDate:(NSDate *)endDate usingCalendar:(NSCalendar *)localizedTZCal {

    static NSTimeZone *timeZoneUtc;
    static NSCalendar *utcCal;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        timeZoneUtc = [NSTimeZone timeZoneWithName:@"UTC"];

        utcCal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];        
        utcCal.timeZone = timeZoneUtc;
    });

    NSInteger componentFlags = NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
    NSDateComponents *componentsStartDate = [localizedTZCal components:componentFlags fromDate:startDate];
    NSDateComponents *componentsEndDate = [localizedTZCal components:componentFlags fromDate:endDate];

    NSDate *utcStartDate = [utcCal dateFromComponents:componentsStartDate];
    NSDate *utcEndDate = [utcCal dateFromComponents:componentsEndDate];

    NSInteger utcDaysDiff = [self daysWithinEraFromDate:utcStartDate toDate:utcEndDate usingCalendar:utcCal];
    return utcDaysDiff;
}

- (NSInteger)daysWithinEraFromDate:(NSDate *)startDate toDate:(NSDate *)endDate usingCalendar:(NSCalendar *)cal {
    NSInteger startDay = [cal ordinalityOfUnit:NSDayCalendarUnit inUnit: NSEraCalendarUnit forDate:startDate];
    NSInteger endDay = [cal ordinalityOfUnit:NSDayCalendarUnit inUnit:NSEraCalendarUnit forDate:endDate];

    return endDay - startDay;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T15:34:31.690

我写了一个小类别来查找两个 NSDate 对象之间的天数。如果我正确理解你的问题，那就是你想要的。

**NSDate+DaysDifference.h**

```
#import <Foundation/Foundation.h>

@interface NSDate (DaysDifference)

- (NSInteger)differenceInDaysToDate:(NSDate *)otherDate;

@end 
```

**NSDate+DaysDifference.m**

```
#import "NSDate+DaysDifference.h"

@implementation NSDate (DaysDifference)

- (NSInteger)differenceInDaysToDate:(NSDate *)otherDate {
    NSCalendar *cal = [NSCalendar autoupdatingCurrentCalendar];
    NSUInteger unit = NSDayCalendarUnit;
    NSDate *startDays, *endDays;

    [cal rangeOfUnit:unit startDate:&startDays interval:NULL forDate:self];
    [cal rangeOfUnit:unit startDate:&endDays interval:NULL forDate:otherDate];

    NSDateComponents *comp = [cal components:unit fromDate:startDays toDate:endDays options:0];
    return [comp day];
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-07T08:35:18.477

这似乎运作良好：

这是一个类别，用于查找两个 NSDate 对象之间的午夜数。

**NSDate+DaysDifference.h**

```
#import <Foundation/Foundation.h>

@interface NSDate (DaysDifference)

+ (int) midnightsBetweenDate:(NSDate*)fromDateTime andDate:(NSDate*)toDateTime;

@end 
```

**NSDate+DaysDifference.m**

```
#import "NSDate+DaysDifference.h"

@implementation NSDate (DaysDifference)

+ (int) midnightsBetweenDate:(NSDate*)fromDateTime andDate:(NSDate*)toDateTime;
{
      NSDate* sourceDate = [NSDate date];
      NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];
      NSInteger timeZoneOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];

      NSCalendar *calendar = [NSCalendar currentCalendar];
      NSInteger startDay = [calendar ordinalityOfUnit:NSDayCalendarUnit
                                               inUnit:NSEraCalendarUnit
                                             forDate:[fromDateTime dateByAddingTimeInterval:timeZoneOffset]];

      NSInteger endDay = [calendar ordinalityOfUnit:NSDayCalendarUnit
                                             inUnit:NSEraCalendarUnit
                                            forDate:[toDateTime dateByAddingTimeInterval:timeZoneOffset]];
      return endDay - startDay;
}

@end 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-01-03T12:19:47.817

这是日历的 Swift 3 扩展，可以解决问题

```
extension Calendar
{
    /**
     Calculates the number og midnights between two date-times
     - parameter firstDateTime: the date to start counting, defaults to today
     - parameter lastDateTime: the date to end counting
     - returns: the number of midnights between the given date-times
     - note: If firstDateTime is after lastDateTime the result may be negative
     */
    public func midnights(from firstDateTime: Date = Date(), until lastDateTime: Date) -> Int
    {
        let firstStartOfDay = startOfDay(for: firstDateTime)
        let lastStartOfDay = startOfDay(for: lastDateTime)

        return Int(lastStartOfDay.timeIntervalSince(firstStartOfDay)/(60*60*24))
    }
} 
```

# python - 对如何使用单选按钮创建 Django 表单感到困惑。

> ID：14653116
> 
> 赞同：0
> 
> 时间：2013-02-01T18:52:26.833
> 
> 标签：python, django

这是我的forms.py。

```
from django.db import models
from django.forms import ModelForm
from django import forms

class Blog(models.Model):
    blog_id = models.CharField(max_length=100)

class TumblrForm(ModelForm):
    class Meta:
        model = Blog
        fields = ('blog_id',)
        widgets = {
            'blog_id':forms.RadioSelect(),
        } 
```

如何在视图中声明它并显示单选按钮列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:15:18.753

正如您在要显示可供选择的博客列表的表单中所说，此处需要一个下拉列表：

```
class MyForm(forms.Form):
    blog = forms.ModelChoiceField(
        label=_("Blog"),
        queryset=Blog.objects.all()) 
```

# php - Aptana 将有效括号标记为 PHP 语法错误

> ID：14653125
> 
> 赞同：4
> 
> 时间：2013-02-01T18:52:48.090
> 
> 标签：php, aptana

我是 Aptana 的新手，所以还没有完全整理好所有的行为。我有可以工作的 PHP 代码，但是 Aptana 在两个括号上都抛出了语法错误：

```
public function addRecord($data)
{
    $request = [
        'action' => 'addrecord',
        'data' => json_encode($data)
    ];

    return $this->requestJson($request, 'POST');
} 
```

我在这里没有看到什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-30T01:32:03.677

似乎 Aptana 现在确实支持 PHP 5.4，而在发布原始帖子时却不支持。

```
Project->Properties->PHP Development-> Select PHP 5.4.x 
```

# php - 远程访问非 AWS 服务器上 PHP 应用程序的 MySQL EC2 实例

> ID：14653128
> 
> 赞同：0
> 
> 时间：2013-02-01T18:52:55.357
> 
> 标签：php, mysql, amazon-web-services, amazon-ec2

我正在开发一个 PHP 应用程序，它需要从我的机器（或任何 IP）远程访问 MySQL（EC2 实例）。应用程序需要是独立的，这意味着如果需要隧道，那么应用程序需要能够做到这一点。目前我正在使用以下代码连接到 MySQL：

```
$conn = mysql_connect( $serverName, $uid, $pwd) or die(print_r(mysql_error(), true));

// select database
$dbname='xxxxx';
mysql_select_db($dbname); 
```

我尝试在 AWS 控制台的安全组中打开 MySQL 端口，并尝试提供对 IP 的访问权限。我知道 EC2 需要密钥才能访问，所以我想知道是否有任何功能允许我使用密钥来连接和查询数据，以及将这些数据返回到我的应用程序中以供使用。

这是我目前收到的错误消息：

```
XMLHttpRequest cannot load /myapp.php? Origin null is not allowed by Access-Control-Allow-Origin. 
```

它似乎无法将数据加载回来，而且我确实从文件中的数据库中获取了一些信息，这很奇怪。不知何故，它无法以我想要的方式返回并处理信息。当同一个应用程序在本地主机上时，它可以正常工作

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:56:21.670

1.  您不需要使用密钥来连接到 mysql。与在传统环境中一样，mysql 的 ec2 设置没有什么特别之处。为了安全起见，最好使用 ssl 连接（或 SSH 隧道）连接到 mysql，如果它是远程的，通过 Internet。

2.  另一个错误信息与mysql无关。您正在发出跨域 ajax 请求。默认情况下，浏览器会阻止它。最近的浏览器允许您设置`Access-Control-Allow-Origin`标头以允许跨域请求。

# php - PHP循环没有一致地写入文本

> ID：14653135
> 
> 赞同：3
> 
> 时间：2013-02-01T18:53:27.440
> 
> 标签：php, html, loops

这是我的代码片段：

```
 foreach ($row as $key => $val) {

        echo "<div class='jmp'><b>". htmlentities($key).": </b><br>"
        .htmlentities($val)."</div>\n";
    } 
```

奇怪的是，PHP 有时会这样输出：

```
<div class='jmp'><b>HDD_SIZE_GB:</b><br> 143.5</div>
<div class='jmp'><b>HDD_MODEL:b><br> SEAGATE STT14775 </div>
<div class='jmp'><b>HDD_SN:</b><br> 3LN3N0098271QL2</div> 
```

请注意，中间的“b”元素缺少结尾<？是什么原因造成的？DB中有500条记录。更令人费解的是，它并不一致。当我刷新页面时，该特定行中的错误将消失，但相同的错误将在其他行中弹出。这完全违背了严格的 XHTML 解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:49:38.077

我的评论作为答案：

你确定这是原始输出（在命令行上试试，还是用 lynx）？有时浏览器会更改代码...

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-01T19:13:28.187

您的阵列是如何创建的。这样它应该可以按预期工作

```
$row = array();
$row['HDD_SIZE_GB'] = '143.5';
$row['HDD_MODEL'] = 'SEAGATE STT14775';
$row['HDD_SN'] = '3LN3N0098271QL2'; 
```

# macos - 在新终端窗口中运行 MongoDB 和节点服务器的 Bash 脚本

> ID：14653138
> 
> 赞同：0
> 
> 时间：2013-02-01T18:54:05.713
> 
> 标签：macos, bash, shell

我正在尝试编写一个 bash 脚本来运行 mongoDB 和 Node.js 服务器。

目前我尝试通过 Automater 实现这个，但是我无法做到这一点。我现在正在尝试使用 Bash 脚本完成相同的任务。

目前我的 MongoDB shell 脚本位于

```
/User/Bacon/mongodb/bin/mongod 
```

和

```
/User/Bacon/mongodb/bin/mongo 
```

我的 node.js 服务器位于

```
/User/Bacon/nodeapp/app.js 
```

这是通过在终端中键入来执行的

```
node app.js 
```

有人可以向我解释我应该如何处理这个问题吗？任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:57:48.680

尝试使用“屏幕”。这是最简单的方法。

您也可以尝试使用“dtach”（在 brew 中可用）来运行它。

```
su - mongo -c "dtach -n mongo /User/Bacon/mongodb/bin/mongod"
su - node -c "dtach -n nodejs node app.js" 
```

# types - 如何获取xsd文件的xml命名空间中提到的xml元素信息

> ID：14653142
> 
> 赞同：0
> 
> 时间：2013-02-01T18:54:11.310
> 
> 标签：types, namespaces, xsd

在任何 xsd 文件中，我们多次发现引用 xml 命名空间的元素类型，例如在以下 xsd 中：

```
<xsd:element type='x:SOME_TYPE_NAME'> 
```

命名空间“x”中提到了元素的类型，名称为“SOME_TYPE_NAME”。我想从那个特定的 xml 命名空间定义或 xsd 定义这种类型。我该怎么做呢？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:03:37.700

首先，请注意，没有中央机构提供您正在寻找的信息，因此不能保证对于给定的命名空间 x 和类型名称 SOME_TYPE_NAME 将只有一个 XSD 类型定义。同一个命名空间可能有多个模式，它们的 SOME_TYPE_NAME 定义完全不同。

也没有通用规则说明给定命名空间的所有者（这里是绑定到前缀 x 的命名空间）应该如何组织该命名空间的模式文档，或者他们应该去哪里。在某些情况下，给定系统中使用的所有模式文档可能会缓存在某个本地模式存储库中（数据库管理系统非常喜欢这种方法）。

所以事情可能会有很大的不同。但很多时候，有可能找到您正在寻找的（或至少一些）定义。

您引用的元素声明是指在给定名称空间中定义的类型。如果这不是发生声明的架构文档的目标命名空间，那么架构文档必须包含显式 xsd:import 元素，该元素导入绑定到前缀 x 的命名空间。xs:import 元素通常会带有一个 schemaLocation 属性，该属性提供有关在该命名空间中查找声明的位置的提示。schemaLocation 属性不是必需的，并且验证器没有义务取消引用该 URI（也许它有一个它喜欢的本地存储库，或者它已经被一个运行时参数调用，指示它在别处查找），但是许多验证器确实这样做了默认情况下按照链接（即使他们不这样做，该 URI 也是您可以查看的一个地方——您的架构文档的作者）

取消引用命名空间名称以查看那里是否有任何文档通常也很有帮助。命名空间所有者没有义务将任何可取消引用的文档放在命名空间名称中，并且软件每次看到命名空间中的元素时取消引用命名空间名称通常被认为是非常糟糕的做法，但你不是软件，你是一个人，并且取消引用命名空间名称对您来说是一个不错的做法。一些命名空间所有者在命名空间名称处放置一个模式文档，有些则在其中放置一个 RDDL 文档（用机器可处理的指向模式、文档等的指针扩展的 HTML）。

对于一些众所周知的名称空间，您可以通过正常的 Web 搜索过程找到文档。

# c# - 从效果类插入新的图像层

> ID：14653149
> 
> 赞同：1
> 
> 时间：2013-02-01T18:54:55.107
> 
> 标签：c#, plugins, paint.net

当从效果调用时，我试图以编程方式将新图层插入到 Paint.NET 中。我决定不使用 Code Lab 并创建了一个扩展的 C# 项目

```
PaintDotNet.Effects.Effect 
```

我已经能够根据需要对活动表面进行其他调整，但需要修改新图层。关于如何从效果中访问文档的图层数组的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:40:27.973

我已经解决了这个问题。事实证明，效果插件必须扩展的抽象类除了活动表面之外没有其他方法可以操作。对于 Paint.NET 开发人员来说，公开更多元素（例如图层和工具栏）本来会很好，但显然此时我无能为力。

# bash - 获取每个用户名的最后一个修饰符的文件数量

> ID：14653150
> 
> 赞同：1
> 
> 时间：2013-02-01T18:55:02.893
> 
> 标签：bash, powershell, filesystems, window, cygwin

我想获取每个用户名在过去 45 天内在整个目录结构中编辑了多少文件（是编辑该文件的最后一个用户）的计数。

这是我想要的输出：

```
+-------+-----+
| alex  |   3 |
| liza  | 345 |
| harry | 564 |
| sally |  23 |
+-------+-----+ 
```

到目前为止，我有这个 powershell 非工作脚本：

```
gci -Recurse| where {$_.LastWriteTime -gt (Get-Date).AddDays(-45)}| group owner|select count,owner 
```

解决方案可以在 powershell 或 bash 中！

谢谢你的指导。

在我看来，这个过程应该是：

1.  获取过去 45 天内修改的所有文件的列表
2.  获取最近修改文件的所有用户名
3.  按用户名分组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:17:26.507

PowerShell方式：

```
gci -Recurse| where {$_.LastWriteTime -gt (Get-Date).AddDays(-45)}| 
 select @{n="Owner";e={ get-acl $_ | select -expa owner }} | select -expa owner | group  | select Count,name 
```

编辑最后评论（powershell 3.0）：

```
$dirs = dir -Directory

foreach ( $dir in $dirs)
{      
 $a = dir $dir -r -File  |  select @{n="Owner";e={ get-acl $_.fullname | 
 select -expa owner }} | select -expa owner | group  | select Count,name

 $a | add-member -Name Path -MemberType NoteProperty -Value $dir -PassThru
} 
```

电源外壳 2.0：

```
$dirs = dir | ? { $_.psiscontainer }
foreach ( $dir in $dirs)
{

 #$dir

 $a = dir $dir -r |? { -not $_.psiscontainer } |  select @{n="Owner";e={ get-acl $_.fullname | select -expa owner }} | select -expa owner | group  | select Count,name

 $a | add-member -Name Path -MemberType NoteProperty -Value $dir -PassThru
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:37:07.710

文件系统不会跟踪最近编辑文件的用户的身份，但它们会跟踪文件的所有者。如果您想按所有者查看最近修改文件的数量，可以尝试以下操作：

```
find . -not -mtime +45 -printf %u\\n | sort | uniq -c 
```

一点一点，这意味着：

*   查找 45 天或更长时间前未修改的所有文件：

    ```
    find . -not -mtime +45 
    ```

*   对于每个文件，打印文件的所有者：

    ```
    -printf %u\\n 
    ```

*   分组并计算结果：

    ```
    | sort | uniq -c 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T07:28:13.243

使用 PowerShell 3：

```
ls -r | ? LastAccessTime -gt (get-date).AddDays(-45) | get-acl | group Owner -no 
```

分解：

1.  递归查找所有文件
2.  通过使用日期/时间算法，仅使用小于 45 天的文件
3.  获取安全描述符
4.  按所有者属性分组，丢弃元素（我们只需要计数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:10:35.097

这是一个非常基本的脚本，可以帮助您到达那里：

```
$ cat findfilesbyuser.sh
#!/usr/bin/bash

searchdir="$1"
filelist=`find "$searchdir" -maxdepth 1 -type f -printf "%u:%p\n"`
userlist=`echo "$filelist" | cut -d: -f1 | sort -u`

echo "username:filecount"

while read uname
 do
  userfilecount=`grep -c "^"$uname":" <<< "$filelist"`
  echo "$uname:$userfilecount"
 done <<< "$userlist" 
```

我是这样称呼它的，它的输出是：

```
$ ./findfilesbyuser.sh /cygdrive/h
username:filecount
Administrators:1
user01:13
user02:24 
```

在 cygwin 将某些用户名显示为 ?????? 时，您可能会遇到一些问题，但不幸的是，如果您使用 bash 解决方案来扫描在 Windows 上创建的文件，这是不可避免的。

嗯！

# python - 运行记录器在本地项目中运行良好，但在 Heroku 上失败

> ID：14653153
> 
> 赞同：0
> 
> 时间：2013-02-01T18:55:12.103
> 
> 标签：python, django, logging, heroku

运行一个名为的模块`log.py`会创建一个文件，在该文件`my_file.log`中记录脚本运行的时间。在我的本地项目中运行`log.py`（过度）写入日志文件非常好，但由于某种原因，在我在 heroku 中的生产部署上运行它不会写入`my_file.log`. The`log.py`还做了一些其他的事情，我可以看出这`log.py`确实在 Heroku 中执行。只是没有写入的日志。

首先我认为这可能是一个权限问题，但检查`ls -l`给

```
drwx------ 3 my_app
-rw------- 1 my_file.log 
```

以下是我的项目结构：

```
.
├── my_project
│   ├── my_app
│   │   ├── __init__.py
│   │   ├── models.py
│   │   ├── tests.py
│   │   ├── views.py
│   │   ├── my_file.log
│   │   └── management
│   │       ├── __init__.py
│   │       └── commands
│   │           ├── __init__.py
│   │           └── log.py
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── manage.py
└── requirements.txt 
```

它不应该与用作自定义 Django 命令的代码有任何关系，因为在我的开发版本中，日志文件每次都会被覆盖。

这是`log.py`负责记录到的片段`my_file.log`：

```
log_lc = os.path.join(os.path.dirname(os.path.abspath(__file__)), 
  os.path.pardir, os.path.pardir, "my_file.log")
logging.basicConfig(filename=log_lc,level=logging.INFO,
  format='%(asctime)s %(message)s', datefmt='%m/%d/%Y %I:%M:%S %p',
  filemode="w")

logging.info("You just ran my_file.log") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:20:40.067

Heroku 是只读的。您正在尝试创建自己的日志文件，`my_file.log`但您将无法做到这一点，因为您无法向他们的文件系统写入任何内容。

但是，您可以将日志消息打印到 Heroku 的标准日志。[这是相关的文档。](https://devcenter.heroku.com/articles/logging). 然后，您可以通过查看您的消息`heroku logs`。

除了 Heroku 的标准日志记录之外，他们还有许多可用于日志记录的应用程序，您可以将它们安装在 Heroku 应用程序上。否则，您可以考虑使用电子邮件选项或将日志文件写入第三方位置，例如`s3`.

# python - matplotlib '不支持格式“rgba”的动画'

> ID：14653159
> 
> 赞同：3
> 
> 时间：2013-02-01T18:55:37.463
> 
> 标签：python, macos, animation, matplotlib, macports

我正在尝试使用[此处](http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/)的示例使用 matplotlib 制作动画。起初的问题是 ffmpeg 没有安装，所以我从 macports 安装了它——但并不是说不支持“rgba”。错误信息：

```
File "Plot_shocktube1D.py", line 85, in <module>
    animDensity.save(densityAnimationName, extra_args=['-vcodec', 'libx264']) #, writer=movWriter)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/animation.py", line 615, in save
    writer.grab_frame()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/animation.py", line 199, in grab_frame
    dpi=self.dpi)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/figure.py", line 1363, in savefig
    self.canvas.print_figure(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.py", line 2012, in print_figure
    print_method = self._get_print_method(format)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.py", line 1953, in _get_print_method
    '%s.' % (format, ', '.join(formats)))
ValueError: Format "rgba" is not supported.
Supported formats: bmp, emf, eps, gif, jpeg, jpg, pdf, pgf, png, ps, raw, rgba, svg, svgz, tif, tiff. 
```

现在，经过一番努力，我设置了一个`FFMpegWriter`using`png`而不是`rgba`，但现在我遇到了新错误......

```
movWriter = anim.FFMpegWriter(fps=5, codec=None, bitrate=None, extra_args=None, metadata=None)
movWriter.frame_format = 'jpg'
animDensity = anim.FuncAnimation(fig, animateDensity, frames=10, interval=100, blit=True)
animDensity.save(densityAnimationName, extra_args=['-vcodec', 'libx264'], writer=movWriter) 
```

有错误：

```
File "Plot_shocktube1D.py", line 85, in <module>
    animDensity.save(densityAnimationName, extra_args=['-vcodec', 'libx264'], writer=movWriter)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/animation.py", line 615, in save
    writer.grab_frame()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/animation.py", line 199, in grab_frame
    dpi=self.dpi)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/figure.py", line 1363, in savefig
    self.canvas.print_figure(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.py", line 2093, in print_figure
    **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_macosx.py", line 326, in print_jpg
    self._print_bitmap(filename, *args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_macosx.py", line 319, in _print_bitmap
    self.write_bitmap(filename, width, height, dpi)
ValueError: Unknown file type 
```

我的印象是我只是没有安装我需要的东西......通常macports为我设置了所有东西，我不确定在哪里看。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T18:39:19.990

该 use() 语句对我没有帮助，但我遇到了与您尝试在 IPython 中工作的[基本 matplotlib 动画示例的第二部分相同的错误。](http://matplotlib.org/examples/animation/basic_example.html)我使用 macports 安装 ffmpeg，然后得到相同的 rgba 不支持警告（尽管 rgba 出现在支持的格式列表中！）。

无论如何，我发现如果我使用明确的 FFMpegFileWriter（而不仅仅是 FFMpegWriter），一切都很好，并且 rgba 问题消失了，我得到了一个可用的 m4v 文件：

```
import matplotlib.animation as animation
fig2 = plt.figure()

x = np.arange(-9, 10)
y = np.arange(-9, 10).reshape(-1, 1)
base = np.hypot(x, y)
ims = []
for add in np.arange(15):
    ims.append((plt.pcolor(x, y, base + add, norm=plt.Normalize(0, 30)),))

im_ani = animation.ArtistAnimation(fig2, ims, interval=50, repeat_delay=3000, blit=True)
im_ani.save('im.m4v', writer=animation.FFMpegFileWriter(), metadata={'artist':'Guido'}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:33:12.633

我不知道为什么，解决方案是让 matplotlib 使用一种叫做“Agg”的东西：

```
import matplotlib
matplotlib.use("Agg") 
```

# c++ - 将字符串操作为变量的名称？

> ID：14653160
> 
> 赞同：0
> 
> 时间：2013-02-01T18:55:40.290
> 
> 标签：c++, naming-conventions

我是编程新手，我的代码有一些问题：我不太确定那个东西是如何被调用的，所以很难用谷歌搜索它；但我认为人类会理解我的意思：

while 循环每次增加 i++。在我想表达的评论行中

当 i = 1 时， player1.cards[j] = 随机；i = 2 , player2.cards[j] = 随机;

```
void cardScramble()
{
  int random;
  int i = 1;
  while (i <= 4)
  {
    cout << "Card of Player " << i << " : ";
    int j = 0;
    while (j < 13)
    {
      random = rand() % 52;
      if (cards[random] == NULL)
      {
        cards[random] = i;
        cout << cardName(random) << " , ";
        /*   player(i).cards[j] = random; */
        /* That's what I'm doubt with */
        j++;
      }
    }

    cout << endl;
    i++;
  }
  return;
} 
```

我试图将它定义或操作为字符串，但没有奏效。任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:58:58.193

你不能按照你想的方式去做。相反，将`player1`and `player2`（和任何其他玩家）组合成一个数组。例如：

```
Player_Type player[2]; // alternatively std::array<Player_Type,2> player; 
```

然后你可以`i`像这样引用每个玩家：

```
player[i].cards[j] = random; 
```

或者，如果您想从`i`1 开始，则只需从中减去 1：

```
player[i-1].cards[j] = random; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:04:37.090

您可以如下所述使用。您需要一个具有 int 数组的结构。

```
 struct Player
    {
        public
        int[] cards = new int[13];
    }; 
```

然后你的 while 循环如下所示

```
Palyer []player = new Palyer[4];

int random;
        int i = 1;
        while (i <= 4)
        {
            cout << "Card of Player " << i << " : ";
            int j = 0;
            while (j < 13)
            {
                random = rand() % 52;
                if (player[i].cards[random] == NULL)
                {
                    cards[random] = i;
                    cout << cardName(random) << " , ";
                     player[i].cards[j] = random; 
                    /* That's what I'm doubt with */
                    j++;
                }
            }
            i++;
        } 
```

//如果有帮助就点赞

# python - 使用 Cron 从其目录运行程序

> ID：14653161
> 
> 赞同：3
> 
> 时间：2013-02-01T18:55:42.580
> 
> 标签：python, macos, unix

我在使用 UNIX 的 OSX 机器上。我有一个 Python 程序，我想每隔一小时左右运行一次，所以我在编辑器中设置了一个基本的 cron 命令：

```
0 * * * * python Documents/workspace/programfolder/src/ProgramToRun.py 
```

我实际上还没有尝试过，因为我已经遇到了问题。我试图`python Documents/workspace/programfolder/src/ProgramToRun.py`从我的主目录运行命令，但脚本无法在其目录中找到它所依赖的任何文件。就好像该程序以某种方式在我的主目录中运行并且找不到它的任何依赖项。如果我`cd`进入程序所在的文件夹并执行 python `ProgramToRun.py`，它工作正常。所以我的问题是如何让 cron 像从它的目录运行它一样对待这个程序？我给的目录会不会工作，或者我需要给一些更绝对的东西，比如/Users/MyName...等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T19:01:20.787

您可以通过以下两种方式之一执行此操作：

**第一种方式**：

`cd`进入包含 python 脚本和依赖项的目录并从那里运行它，如下所示：

```
(cd /Users/username/Documents/workspace/programfolder/src/ && python ProgramToRun.py) 
```

在这里，括号调用“子shell”。把它想象成一个所有命令都在其中运行的连续会话。`&&`函数作为 a ，但如果上一个命令失败，`;`则不执行下一个命令

**第二种方式**：

添加`Documents/workspace/programfolder/src/`到PYTHONPATH里面`ProgramToRun.py`如下：

```
import sys
sys.path.append("/Users/username/Documents/workspace/programfolder/src/") 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:09:38.640

在你开始做相关的事情之前，把它放在你脚本的顶部。

```
import os
scriptdir =  os.path.dirname(os.path.abspath(__file__))
os.chdir(scriptdir) 
```

这也可能是您的脚本实际上并没有首先尝试解析相对于脚本的路径等的症状。脚本不应依赖于从与脚本相同的目录运行脚本的用户。

我通常`scriptdir`用来查找与脚本相关的内容，例如

`open(os.path.join(scriptdir, 'data', 'someconfig.cfg'))`代替 `open(os.path.join('data', 'someconfig.cfg'))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:16:45.793

在 OS X 上，如[文档所述](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/ScheduledJobs.html#//apple_ref/doc/uid/10000172i-CH1-SW2)：

> 虽然它仍然受支持，但`cron`不是推荐的解决方案。它已被弃用，取而代之的是`launchd`.

如果您已经`cron`从长期的 Unix 经验中了解了自己的手背，或者您正在 OS X 和 Linux 上实现相同的东西，或者您有其他好的借口，请继续使用`cron`. 但很明显，这里的情况并非如此。

如果您使用的是`launchd`，这里的答案将是微不足道的。从[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html#//apple_ref/doc/man/5/launchd.plist)：

> **`WorkingDirectory <string>`**
> 
> 此可选键用于在运行作业之前指定 chdir(2) 的目录。

或者，如果您想修改用于运行应用程序的环境（例如，将其目录放入`PYTHONPATH`），这同样容易。

`launchd.plist`这是每小时运行程序的示例文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
  "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.example.ProgramToRun</string>
    <key>ProgramArguments</key>
    <array>
        <string>python</string>
        <string>Documents/workspace/programfolder/src/ProgramToRun.py</string>
    </array>
    <key>StartInterval</key>
    <integer>3600</integer>
    <key>WorkingDirectory</key>
    <string>Documents/workspace/programfolder/src/</string>
</dict>
</plist> 
```

很多老 Unix 手会看到这个并说，“哇，这太冗长了。” 并且我同意。另一方面，它并没有被弃用。此外，它还有额外的功能，它与睡眠的交互有据可查且易于配置等。Apple 文档中到处都有示例和解释，将告诉您如何进行这项工作，而`cron`基本上除了联机帮助页和一个很少有文件说“如果您知道自己在做什么，请继续使用它，但我们不会帮助您”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:05:17.813

是的，您的 python 路径中没有该目录，因此 Python 无法找到脚本尝试导入的模块。将文件夹添加到您的路径。你可以做类似的事情

```
import sys
sys.path.append(".") 
```

在您的脚本文件中，或者更好的是，使用 lib/site-packages 中的 .pth 文件来包含脚本所在的目录。

# android - 安卓：获取时间

> ID：14653165
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:56:13.677
> 
> 标签：android, timer

我一直在考虑为我的应用程序计时，这样我就可以知道事件何时发生。我的第一个想法是在启动应用程序时访问系统时钟，并在每次我想检查经过时间时再次访问（然后只需减去）。不知道这是否是最准确和最优的方式。有什么建议吗？

非常感谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:02:05.240

如果毫秒分辨率足够，我会使用[`System.currentTimeMillis()`](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29). 它非常适合运行快速性能检查。

# python - 获取每个窗口的 HWND？

> ID：14653168
> 
> 赞同：9
> 
> 时间：2013-02-01T18:56:17.930
> 
> 标签：python, windows, hwnd

我正在开发一个 python 应用程序，我想获取`HWND`每个打开的窗口。我需要窗口的名称和`HWND`过滤列表以管理一些特定的窗口，移动和调整它们的大小。

我试图自己做这件事，四处寻找信息，但我没有得到正确的代码。我尝试使用此[代码](http://sjohannes.wordpress.com/2012/03/23/win32-python-getting-all-window-titles)，但我只获得每个窗口的标题（这很棒），但我也需要`HWND`。

```
import ctypes
import win32gui
EnumWindows = ctypes.windll.user32.EnumWindows
EnumWindowsProc = ctypes.WINFUNCTYPE(ctypes.c_bool, ctypes.POINTER(ctypes.c_int), ctypes.POINTER(ctypes.c_int))
GetWindowText = ctypes.windll.user32.GetWindowTextW
GetWindowTextLength = ctypes.windll.user32.GetWindowTextLengthW
IsWindowVisible = ctypes.windll.user32.IsWindowVisible

titles = []
def foreach_window(hwnd, lParam):
    if IsWindowVisible(hwnd):
        length = GetWindowTextLength(hwnd)
        buff = ctypes.create_unicode_buffer(length + 1)
        GetWindowText(hwnd, buff, length + 1)
        titles.append((hwnd, buff.value))
    return True
EnumWindows(EnumWindowsProc(foreach_window), 0)

for i in range(len(titles)):
    print(titles)[i]

win32gui.MoveWindow((titles)[5][0], 0, 0, 760, 500, True) 
```

这里有一个错误：

```
win32gui.MoveWindow((titles)[5][0], 0, 0, 760, 500, True)
 TypeError: The object is not a PyHANDLE object 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-01T20:16:03.157

你混在一起`ctypes`了`win32gui`。你得到的是通过
并且是一个对象。这就是为什么没有接受它。你应该把它传递给`hwnd``ctypes``LP_c_long``win32gui.MoveWindow`

```
ctypes.windll.user32.MoveWindow(titles[5][0], 0, 0, 760, 500, True) 
```

如果要使用`win32gui.MoveWindow`，可以直接使用python函数作为回调。
例如，

```
import win32gui

def enumHandler(hwnd, lParam):
    if win32gui.IsWindowVisible(hwnd):
        if 'Stack Overflow' in win32gui.GetWindowText(hwnd):
            win32gui.MoveWindow(hwnd, 0, 0, 760, 500, True)

win32gui.EnumWindows(enumHandler, None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:07:17.937

您的问题（现在 martineau 已经解决了根本不存储`HWND`值的原始问题）是您正在尝试混合`ctypes`和`win32gui`.

如果你知道自己在做什么，你可以这样做——但如果不知道，就不要这样做。

如果您想获得可以使用的窗口句柄`win32gui`，请使用而不是从DLL[`win32gui.EnumWindows`](http://timgolden.me.uk/pywin32-docs/win32gui__EnumWindows_meth.html)中调用原始函数。`user32`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:14:04.043

要获取所有可用主窗口的句柄，请传递 0，`win32gui.EnumChildWindows`然后检查以确保窗口的文本长度大于 0（因为您只需要不隐藏/临时/弹出/特殊窗口的实际窗口）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:22:41.493

只需修改获取所有标题的[代码](http://sjohannes.wordpress.com/2012/03/23/win32-python-getting-all-window-titles/)，使其执行如下操作：

```
titles.append((hwnd, buff.value)) 
```

该`titles`列表将是包含 HWND**和**标题文本的元组列表。

# java - 限制线程数和 Java 并发

> ID：14653173
> 
> 赞同：3
> 
> 时间：2013-02-01T18:56:30.630
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

我找不到使用最新的 JAVA 并发例程的这种特定情况的示例。

我计划用于`threads`处理来自可能包含 0 到数千个请求的开放队列中的项目。我想限制所以在任何给定时间有不少于 0 并且不超过 10 个线程处理队列项。

是否有针对这种特定类型案例的 Java 并发进程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T19:08:20.117

我认为线程池是您正在寻找的。看看 ExecutorService 和 Executors。

执行服务： http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

执行者： http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)

获取一个新的 Thread 固定线程池，处理最大。10 线程一次：

```
ExecutorService threadPool = Executors.newFixedThreadPool(10); 
```

使用提交方法，您可以将 Callables 或 Runnables 传递给池。

对于您的用例，您需要一个查看队列的进程，如果有新请求，则必须创建 Callable 或 Runnable 并将其传递给线程池。池确保最大。一次执行 10 个线程。

这是一个非常小的教程： http: [//www.math.uni-hamburg.de/doc/java/tutorial/essential/threads/group.html](http://www.math.uni-hamburg.de/doc/java/tutorial/essential/threads/group.html)

使用线程池的一个好处是提交方法返回一个 Future 对象，该对象支持执行线程的返回类型。

未来：[http ://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)

我希望这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:03:06.790

我有同样的任务：我使用`BlockingQueue`了`java.util.concurrent`包的。我创建了 X 个工作线程，它从队列中读取一个动作，处理它，并在准备好时执行下一个动作。这很简单，而且效果很好。

如果你使用 X = 10 Worker 线程，那么你的任务就解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:07:06.077

看起来您需要一个 corePoolSize=0 和 maximumPoolSize=10 的线程池执行器。

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T01:00:48.493

如果您实际上无权访问线程的创建，而您只管理队列访问，则解决方案可能只是使用一个`Semaphore`对象（请参阅[文档页面](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)）。

这个想法是为了一个全局信号量，以与访问队列相同的方式访问，被初始化为数字`max_threads`（例如，10）。

在访问队列以进行项目处理之前，线程将首先从信号量[获取](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html#acquire%28%29)许可，如果`max_threads`多个线程已经开始处理队列中的项目，则该信号量将阻塞。

在某个线程处理了一个项目之后，该线程应该最终[释放](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html#release%28%29)许可，从而允许更多线程处理其他项目。

请注意，许可证的获取/释放应该使用 try-finally 块来完成，这样即使从项目处理中抛出了一些异常，信号量也会保持一致状态。代码应如下所示：

```
semaphore.acquire().
try {
    // retrieve item from queue and process it
}
finally {
    semaphore.release();
} 
```

# ruby - 使用静态函数中的“自我”

> ID：14653174
> 
> 赞同：0
> 
> 时间：2013-02-01T18:56:31.330
> 
> 标签：ruby

我知道红宝石允许静态函数在同一个类中相互调用的两种方式......

```
class MyClass

  def self.foo
    self.say "self"
  end

  def self.bar
    MyClass.say "class name"
  end

  def self.say(text)
    puts "Using #{text}"
  end

end 
```

两种语法之间有什么细微差别吗？也许是性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T18:58:43.140

不，那些是完全一样的。性能方面也是如此。唯一的区别是代码的可维护性。如果您决定将具有显式类引用的方法移动到另一个类，那么您需要做的工作更多（或更少，具体取决于具体情况）

```
def self.bar
  MyClass.say "class name"
end 
```

哦，ruby 中没有静态方法。

此外，您不需要显式地使用`self`来调用那里的方法。`self`可以是隐式的。

```
class MyClass

  def self.foo
    say "self"
  end

  def self.say(text)
    puts "Using #{text}"
  end

end

MyClass.foo
# >> Using self 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:00:01.990

不，没有区别。Ruby 慷慨地提供了多种方法来做同样的事情。

# windows - 是否可以在 Windows 中为每个应用程序设置 ANSI 编码

> ID：14653176
> 
> 赞同：14
> 
> 时间：2013-02-01T18:56:37.747
> 
> 标签：windows, locale, ansi

Windows 本地化有一个对话框，它为所有不支持 Unicode 的应用程序设置区域设置，它在 xp 上看起来像这样，在其他风格的 Windows 上类似： ![](../Images/d5d8a8ada5ae1c21ccc4727ae26fb7f0.png)

有没有办法将每个应用程序指定为与整个操作系统全局相对应的方法。假设我有 2 个不同的 ansi 应用程序，我想在同一台机器上运行一个用俄语和一个用中文运行，这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-04T13:51:25.727

**[有一个名为Locale Emulator](https://github.com/xupefei/Locale-Emulator)**的免费开源实用程序，它可以使用您选择的区域设置（代码页）运行其他应用程序，而不是系统默认设置。

在撰写本文时，Locale Emulator 声称与 Windows 10 版本 1803（这是 Windows 的最新版本）兼容。

[![Locale Emulator 甚至可以与 Windows shell 集成](../Images/0b08d62ea85020a4b295c72022b1ace6.png)](https://i.stack.imgur.com/qvdwT.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T20:35:05.753

微软曾经提供一个免费软件，叫做**Microsoft AppLocale**。它允许使用与系统默认设置不同的区域设置执行应用程序。设置完成后，您将获得一个通过 AppLocale 运行您的应用程序的快捷方式。

然而有两个问题：

1.  AppLocale 不再受支持，[其下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=2043)不再可用。不过，您可以[从 Softpedia 下载它](http://www.softpedia.com/get/System/System-Miscellaneous/Microsoft-AppLocale.shtml)。我检查了它的数字证书；Softpedia 没有篡改它。
2.  在 Windows Vista 及更高版本上，其安装程序可能会出现错误。要成功安装它，您必须使用管理权限打开 PowerShell（或命令提示符），导航到包含`apploc.msi`并从那里运行它的文件夹。（[发现这一点的功劳归于 TechJourney](https://techjourney.net/workaround-to-install-microsoft-applocale-utility-in-windows-vista/)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T09:38:19.250

Microsoft AppLocale 实用程序与 Windows 10 不兼容，在这种情况下，您可以为非 UTF-8 应用程序达到相同的代码页默认设置，如下所示；

1.  开始 > 设置 > 时间和语言
2.  地区和语言
3.  相关设置 > 其他日期、时间和地区设置
4.  区域 > 更改位置
5.  管理选项卡
6.  非 Unicode 程序的语言 > 更改系统区域设置...
7.  选择您的语言环境，然后单击确定，然后您将需要重新启动

很抱歉，说明很长，但我认为如果 Micros，您仍然应该使用正确的设置

# java - Java：静态方法数组

> ID：14653177
> 
> 赞同：3
> 
> 时间：2013-02-01T18:56:49.207
> 
> 标签：java, arrays

我想创建一个包含静态方法（或包含对静态方法的引用）的数组。我试图创建一个类数组，这些类使用该方法实现接口。使用此方法，我将获取对象，然后在其上调用该方法。这不适用于静态方法。有没有办法在Java中做到这一点？

编辑：这是我迄今为止使用的方法：

```
interface TableElement{
    public Integer lookup(int value);
}

TableElement[] table = new TableElement[]
{
    new TableElement() { public Integer lookup(int value) { return 0; } },
    new TableElement() { public Integer lookup(int value) { return value * 3; } },
    new TableElement() { public Integer lookup(int value) { return value * value + 3; } },
};

public Integer find(int i, int value) {
    return table[i].lookup(value);
} 
```

我希望 find 方法是静态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:00:17.263

当然，您可以拥有一个数组，`Method`然后您可以使用invoke 调用它，查看这些示例：[如何使用反射（Java）调用私有静态方法？](https://stackoverflow.com/questions/4770425/how-do-i-invoke-a-private-static-method-using-reflection-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:41:28.560

如果你能满足以下条件：

1.  您知道代码生成时的所有密钥。
2.  您知道代码生成时的所有值（方法）。

你可以使用这样的代码：

```
public class Table {
    public static int hash(String key) {
        /* you can use any type of key and whatever hash function is
         * appropriate; this just meant as a simple example.
         */
        return key.length();
    }

    public static Integer find(String s, int value) {
        int h = hash(s);

        switch (h) {
          case 4: // "zero"
            if (s.equals("zero"))
                return methodZero(value);

          case 6: // "triple"
            if (s.equals("triple"))
                return methodTriple(value);

          case 11: // "squarePlus3"
            if (s.equals("squarePlus3"))
                return methodSquarePlus3(value);

          default:
            throw new UnsupportedOperationException(s);
        }
    }

    private static Integer methodZero(int value) { return 0; };
    private static Integer methodTriple(int value) { return value * 3; };
    private static Integer methodSquarePlus3(int value) { return value * value + 3; };

    /**
     * Just a demo.
     */
    public static void main(String arguments[]) {
        System.out.println("Zero(5): " + find("zero", 5));
        System.out.println("Triple(5): " + find("triple", 5));
        System.out.println("SquarePlus3(5): " + find("squarePlus3", 5));
        System.out.println("boom!");
        find("missingcode", 5);
    }
} 
```

如果您需要放松任何一个要求，我不相信您可以静态地做所有事情。

如果您希望能够添加新键，则必须在添加时创建一个普通的哈希表来存储它们。（您可以在`default`代码中检查它。）

如果您希望能够替换值，则必须在此处使用间接级别，可能使用`Method`对象或实现`Callable`（您可以从方法体中调用它们`methodZero`）。

# algorithm - 寻找一种算法来将攀爬保持颜色分配给墙壁扇区

> ID：14653179
> 
> 赞同：2
> 
> 时间：2013-02-01T18:56:53.423
> 
> 标签：algorithm, resources, allocation

我不确定要选择哪个 SE 站点——stackoverflow 和 math 是候选者——但是因为我们可能会为这个问题编写一个软件，所以我决定在这里发布它。

在我们的攀岩馆中，我们面临的问题是相邻的墙壁区域可能不会使用相同（或相似）的攀岩支撑颜色。我正在寻找一种将攀爬保持颜色分配给墙壁扇区的算法。到目前为止，我们都是手动完成的，结果各不相同，有时甚至令人不快。这是我们的“规则”：

如果 A 区的路线为红色，则附近的区域（A-1 和 A+1）不得设置红色路线。优选地，不应在扇区 A-2 和 A+2 中设置具有该颜色的路线，除非路线设置者特别注意使路线不“接触”。

一个或相邻扇区的不同颜色应该“足够不同”。例如，不允许使用红色和粉色等组合，应避免使用红色和紫色。颜色互补并不是将它们组合在一个区域的真正理由，因为我们有红绿色盲的登山者（还有其他一些口味）。此外，还有白色和黑色等非颜色（也不要一起使用），荧光色和两种或三种颜色组合。但是，我们可以有把握地说哪些颜色组合可以很好地搭配在一起，哪些是应该避免的，哪些是不允许的。

一个扇区中最多可以有四个路由。应避免只有一两条路线的扇区。我们对每种颜色都有不同的数量，因此也必须考虑到这一点。扇区可以是圆形的（例如围绕一根柱子）或以其他方式相互连接（一根柱子和附近的墙壁由屋顶连接）。

是否有解决此类问题的通用方法？

* * *

编辑 1：
我已经实现了 mbeckish 的建议，并为这个问题编写了一个模拟退火算法。虽然我相信我的代码可以正常工作，但结果并不令人满意。

以下是一些细节：

*   有15个扇区，每个扇区有4条路线；
*   路线颜色有 10 种：3 原色、3 副色、黑色、白色、青绿色和紫罗兰色/白色（组合）；
*   每种颜色的数量固定在每种颜色3到8条路线之间；
*   算法开始时颜色是“聚集的”；
*   我为每种可能的颜色组合定义了一个带有惩罚 (1e-2...1) 的矩阵；
*   energy() 函数将每个扇区内和相邻扇区之间的所有惩罚相加；
*   neighbour() 函数在两个不同扇区之间交换一对随机选择的路线（除非路线颜色相同，在这种情况下选择一对新的交换路线）；
*   T() 呈指数衰减
*   P() 的实现方式与[关于模拟退火的维基百科文章](http://en.wikipedia.org/wiki/Simulated_annealing)一样。

这将愉快地运行和交换，但结果总是包含具有两条相同颜色路线的扇区。不过，我想包括一个能量的“收敛”图（归一化；蓝色：当前，绿色：最佳）与迭代：

![在此处输入图像描述](../Images/ef22b16227304cc974ff1a37d3c920fd.png)

当我在开始算法之前对路线进行洗牌时，结果是相似的。这就像在不考虑惩罚的情况下进行一些预迭代。这是相同类型的图，预先洗牌，T() 衰减更快，使算法更贪婪，迭代次数更多：

![在此处输入图像描述](../Images/c1fa75e6fe5584a0c08ef3b265df81e3.png)

* * *

编辑 2：neighbour() 函数现在从具有最高能量 (S1) 的扇区中选择一种随机颜色 (C1)，并将其与来自随机其他扇区 (S2) 的随机颜色 (C2) 交换，除非 C1 已经包含在 S2 或 C2 中已包含在 S1 中。这会产生更好的结果，但它们仍然包含具有重复颜色的扇区。我现在会尝试想出一些不同的东西。

# asp.net-mvc-3 - 为动态 html 控件 (MVC 3) 创建验证？

> ID：14653183
> 
> 赞同：0
> 
> 时间：2013-02-01T18:57:04.310
> 
> 标签：asp.net-mvc-3, validation

使用 MVC 3，

我有一个创建动态控件的问题表单。我需要为这些控件合并以下验证：

```
01 - Unicode String. No line breaks or tabs. DATA_MAX_LENGTH applies.
02 - Unicode Memo. Line breaks permitted. No tabs. DATA_MAX_LENGTH applies.
03 - Non-negative integer, as string.
04 - Non-negative Money (precision 18,2), as string.
05 - Date, as string, in the U.S. 4-digit-year format (e.g. 12/31/2012).
06 - Boolean (aka "Bit", "Yes/No"), as string, with "1" for True, "0" for False. 
```

这些值与表（sql server）中每个问题项的控件类型一起存储。

**不确定如何在此处将这些验证与我当前的代码合并？**：

```
public static string DisplayControl(this HtmlHelper helper, int controlId, string choices, string answer, int? controlType, int maxlength, int dataType)
        {
            var output = new StringBuilder();

            output.Append(@"<div class='answer'>");
            switch ((ControlTypes)controlType)
            {
                case ControlTypes.Calendar:
                    output.Append(String.Format("<input class='datepicker' type='text' id='{0}' name='{0}' value='{1}' />", controlId, answer));
                    break;
                case ControlTypes.DropDownList:
                    output.Append(String.Format("<select id='{0}' class='droplist' name='{0}'>", controlId));
                    var ddls = LookupList(choices, "|");
                    foreach (var ddl in ddls)
                    {
                        string selected = ddl.Equals(answer) ? "selected" : "";
                        output.Append(String.Format("<option value='{0}' class='dd_option' {1}>{0}</option>", ddl, selected));
                    }
                    output.Append("</select>");
                    break;
                case ControlTypes.RadioButtonList:
                    var rbls = LookupList(choices, "|");
                    output.Append("<fieldset class='radio_btns'>");
                    foreach(var rbl in rbls)
                    {
                        string rchecked = rbl.Equals(answer) ? "checked" : "";
                        output.Append(String.Format("<label><input class='qa_radio' type='radio' id='{1}' name='{0}' value='{1}' {2} />{1}</label>&nbsp;", controlId, rbl, rchecked)); 
                    }
                    output.Append("</fieldset>");
                    break;
                case ControlTypes.TextBoxMultiLineInteger:
                    output.Append(String.Format("<textarea id='{0}' name='{0}' class='multi_text'>{1}</textarea>", controlId, answer));
                    break;
                case ControlTypes.TextBoxMultiLineMaxLength:
                    output.Append(String.Format("<textarea id='{0}' name='{0}' class='multi_text'>{1}</textarea>", controlId, answer));
                    break;
                case ControlTypes.TextBoxSingleLineInteger:
                    output.Append(String.Format("<input class='single_line' type='number' id='{0}' name='{0}' value='{1}' {2} />", controlId, answer, maxlength > 0 ? String.Format("maxlength='{0}'", maxlength) : ""));
                    break;
                case ControlTypes.TextBoxSingleLineMaxLength:
                    output.Append(String.Format("<input class='single_line' type='text' id='{0}' name='{0}' value='{1}' {2} />", controlId, answer, maxlength > 0 ? String.Format("maxlength='{0}'", maxlength) : ""));
                    break;
            }

            output.Append("</div>");
            return output.ToString();
        } 
```

# jquery - 尝试在 JQuery 中构建更智能的 RegEx Word Counter

> ID：14653184
> 
> 赞同：1
> 
> 时间：2013-02-01T18:57:04.627
> 
> 标签：jquery, regex, word-count

我正在尝试编写正则表达式字数，但我发现的大多数示例仅涵盖以下部分情况：

1.  你好，有=应该是2个词（注意逗号后面没有空格）
2.  你好，=应该是2个字（注意逗号前后的空格）
3.  10,000 美元 = 应该是 1 个字
4.  你好 ？= 应该是 2 个单词（注意问号前的空格）
5.  hello-there = 应该是 2 个字
6.  [http://www.google.com](http://www.google.com) = 应该是 1 个字
7.  [http://www.google.com/analytics](http://www.google.com/analytics) = 应该是 1 个字

我目前在 jquery 中使用以下代码

```
var total_words = $.trim($("#mytextbox").value).split(/[\s\-\.\\\/\?\!]+/).length 
```

但它只涵盖情况#3 和#5。

覆盖 URL 对我来说不是优先事项。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:12:15.387

以下 RegEx 将适用于您的所有示例：

```
var total_words = /(\b(https?|ftp):\/\/([\-A-Z0-9.]+)(\/[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[A-Z0-9+&@‌​#\/%=~_|!:,.;]*)?)|[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?|(&)|('\w+)|(\w+'‌​\w+)|(\w+')|(\w+)/gi 
```

此 RegEx 已从 JSoft 转换为 JavaScript：

```
(\b((?#protocol)https?|ftp)://((?#domain)[-A-Z0-9.]+)((?#file)/[-A-Z0-9+&@#/%=~_|!:,.;]*)?((?#parameters)\?[A-Z0-9+&@#/%=~_|!:,.;]*)?)|[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?|\w+ 
```

第一部分定义了任何 url 类型的项目：

```
(\b((?#protocol)https?|ftp)://((?#domain)[-A-Z0-9.]+)((?#file)/[-A-Z0-9+&@#/%=~_|!:,.;]*)?((?#parameters)\?[A-Z0-9+&@#/%=~_|!:,.;]*)?) 
```

部分部分适用于带或不带小数的货币：

```
[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})? 
```

最后，第三部分匹配单词：

```
\w+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:12:28.883

由于 javascripts 正则表达式引擎从左到右评估，您可以指定更具体的正则表达式，然后在最后指定更通用的正则表达式

```
\b(https?://\S+|\d+(,\d+)+|\w+)\b 
   ------------  --------- ---
         |           |      |->general
         |           |->less specific
         |->more specific regex 
```

# jquery - 移动网站 - 特定的不可缩放区域

> ID：14653187
> 
> 赞同：0
> 
> 时间：2013-02-01T18:57:22.317
> 
> 标签：jquery, html, mobile

我开发了一个工具栏，在运行时通过 jQuery 包含在相当多的网站上（公司希望推广他们的其他 Web 属性）。现在他们想要一个移动版本。一切似乎都很好，直到我开始考虑这个工具栏在非移动网站上的作用。他们希望工具栏版本由设备驱动，而不是由站点驱动……因此，如果查看非移动优化站点，他们仍然希望您获得移动优化工具栏，至少在优化更多站点之前。

我知道我解释得很糟糕......所以，这是一张图片： ![示例页面布局](../Images/0270252eb990d5b55b83e696405e008a.png)

这样的布局甚至可能吗？您能否为我指定页面的一部分不可缩放，同时让页面的其余部分正常运行？您可以设置元素的缩放比例，就像您可以设置整个站点的视口缩放比例一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:15:30.660

据我所知（我使用过移动浏览器），您只能启用或禁用整个页面的缩放，而不是单个元素。

我唯一能想到的就是尝试在 Javascript 中捕获 resize/zoom 事件，并在它们被触发时尝试调整元素，请参阅我发现的这篇文章：[Catch browser's "zoom" event in JavaScript](https://stackoverflow.com/questions/995914/catch-browsers-zoom-event-in-javascript)

但我没有亲自测试过，这听起来像是很多工作——特别是因为移动浏览器之间的 Javascript 支持差异很大。

# c# - TimeSpan的比较好慢

> ID：14653192
> 
> 赞同：1
> 
> 时间：2013-02-01T18:57:43.930
> 
> 标签：c#, .net, performance

最近我遇到了一个奇怪的性能问题。我需要将周期中的时间间隔与大量迭代进行比较。我使用 DateTime.TimeOfDay 属性来比较这些间隔。但是，我发现这些比较与 DateTime 比较相比非常慢。因此，我必须创建具有 1 年 1 个月和 1 天的 DateTime 以加快时间间隔比较。我准备了一个小例子来说明我的意思。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DatesBenchmark
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            DateTime firstDate = DateTime.Now;
            DateTime secondDate = DateTime.Now.AddSeconds(5);
            for (int i = 0; i < 2000000; i++)
            {
                var a = firstDate.TimeOfDay > secondDate.TimeOfDay;
                //var a = firstDate > secondDate;
            }
            sw.Stop();
            Console.WriteLine(sw.ElapsedMilliseconds);
            Console.ReadKey();
        }
    }
} 
```

在我的笔记本电脑上，我得到了 15 毫秒（如果循环中的第一行被注释）与 176 毫秒（如果循环中的第二行被注释）。

我的问题很简短。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:01:57.877

您从不使用`a`，因此在第二种情况下，编译器可以优化整个语句，因为它不会产生副作用并且永远不会使用该变量。在第一种情况下，它不能确定在日期时间调用的属性不会引起副作用（优化分析不是那么深入），因此需要保留该行。

最重要的是，在确定一天中的时间时至少需要进行*一些*计算（它需要通过一天中的滴答数来修改日期时间中的滴答数），这意味着它会更慢，它只是一个多少的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T19:10:02.680

调用 foo.TimeOfDay 是这样做的：

```
public TimeSpan TimeOfDay
{
    get
    {
        return new TimeSpan(this.InternalTicks % 864000000000L);
    }
} 
```

通过访问超过 200 万次迭代`TimeOfDay`的 2 个实例上的属性，您将创建 400 万个实例。然而，这还不是最大的开支。`DateTime``Timespan`

进一步挖掘，你有：

```
internal long InternalTicks
{
    get
    {
        return (long)(this.dateData & 4611686018427387903uL);
    }
} 
```

所以你有 400 万个实例化、余数计算、强制转换和`&`操作。这些都是便宜的操作（“便宜”当然是一个相对的术语），但是它们加起来的数量。

实际比较是微不足道的：

```
public static bool operator >(TimeSpan t1, TimeSpan t2)
{
    return t1._ticks > t2._ticks;
} 
```

在调试模式下编译 OPs 代码，我看到：

1.  空循环：4ms。
2.  `var a = firstDate > secondDate;`6ms（暗示它没有被优化掉）
3.  `var a = firstDate.TimeOfDay;`40毫秒
4.  `var a = firstDate.TimeOfDay > secondDate.TimeOfDay;`80毫秒
5.  `TimeSpan a = new TimeSpan( ticks ), b = new TimeSpan( ticks );`7ms

在 VS 2012 中针对该程序运行性能分析，81% 的样本来自`DateTime.get_TimeOfDay()`.

运行 x64，发布模式，启用所有优化：

1.  空循环：3ms。
2.  `var a = firstDate > secondDate;`6ms
3.  `var a = firstDate.TimeOfDay;`20ms
4.  `var a = firstDate.TimeOfDay > secondDate.TimeOfDay;`40毫秒
5.  `TimeSpan a = new TimeSpan( ticks ), b = new TimeSpan( ticks );`6ms

所以：

*   微基准可能会产生误导（尽管并非无用）。
*   在确定存在问题之前启用优化。
*   性能似乎随着优化而翻倍。
*   在任何情况下，所讨论的语句似乎都没有被优化掉。
*   实例化是费用的有形但很小的一部分。
*   铸造/算术运算占其余费用。
*   在循环之前将属性值存储在变量中可以大大提高性能。

# ios - 与 tableViewCell 关联的对象有时为零

> ID：14653196
> 
> 赞同：0
> 
> 时间：2013-02-01T18:57:48.943
> 
> 标签：ios, uitableview

我有一个具有标记类型属性的 customTableViewCell。我使用这个对象来绑定 UI 元素，例如 UILabel。

我有一个 TableSection 对象，我基本上只用于分组表以帮助更好地管理事情。看起来像：

```
@interface TableSection : NSObject

@property (nonatomic, copy) NSString *name;
@property (nonatomic, strong) NSMutableArray *array; 
```

在我的 cellForAtIndexPath 方法中，我这样做：

```
 TableSection *tableSection = [self.markersList objectAtIndex:indexPath.section];
    Marker *m = (Marker *)[tableSection.array objectAtIndex:row];
    cell.marker = m; 
```

如果我从 Web 服务获取的信息有更多信息，我想更新此单元格。

所以我在我的 tableview 中得到了对象的 indexPath，然后我试试这个：

```
- (void)updateIndexPath:(NSIndexPath *)indexPath marker:(Marker *)marker {
    MarkerTableViewCell *cell = (MarkerTableViewCell *)[self.MarkersTableView cellForRowAtIndexPath:indexPath]; 
```

对于我的 tableView 的第一部分，这`cell.marker`就是我所期望的。然而，在其他部分，`cell.marker`为零。是否有一个原因？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:57:37.313

UITableView 的工作原理是它只包含当前显示的单元格，仅此而已。因此，如果您尝试访问的单元格不在视图中，那么您将一无所获（或者可能是垃圾，因为单元格被重用了）。

我发现处理这种情况的唯一方法是使用数据数组。不要将标记绑定到单元格，而是将标记绑定到您的数据数组。然后，当您的网络服务为您提供更新的信息时，您会在数组中找到该标记并更新您需要的任何内容。这样，无论单元格是否在屏幕上，您的数据源都会更新。如果它在屏幕外，那么下次它出现在屏幕上时，代码将调用 cellForRowAtIndexPath 并且您的数据源会将更新的信息传递给它。

长话短说，您的数据源是唯一可以找到所有数据并且操作系统不会释放它以节省内存的地方。

# java - 拆分 ArrayList 字符串

> ID：14653197
> 
> 赞同：-2
> 
> 时间：2013-02-01T18:57:54.977
> 
> 标签：java

如何拆分 arrayList String SCHOOLWORK BALCONY INSIST SALTPETER BOLTON KITSCHY CLIENTELE

我想将这些词拆分为“SCH”、“OOL”、“WO”、“RK”。

这是我的代码

```
import java.io.File;
import java.util.ArrayList;

public class HW2 {

    public static ArrayList<String> getTiles(ArrayList<String> input_list_of_strings) {
        // create a substring by go through the loop first, then .... (instruction)
        Object[] subString = new Object[input_list_of_strings.size()];
        for (int i = 0; i < input_list_of_strings.size(); i++) {
            subString[i] = input_list_of_strings.get(i);
            // test just want to see if subString get all String
//          System.out.println(subString[i]);

            String delim=" ";
            String[] splitstrings = ((String) subString[i]).split(delim);
            for (int j = 0; j < splitstrings.length; j++) {
                splitstrings[j] +=delim;
                System.out.println(splitstrings[j]);
            }
        }
        return input_list_of_strings;       
        }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        ArrayList<String> input_words = new ArrayList<String>();
        input_words.add("SCHOOLWORK");
        input_words.add("BALCONY");
        input_words.add("INSIST");
        input_words.add("SALTPETER");
        input_words.add("BOLTON");
        input_words.add("KITSCHY");
        input_words.add("CLIENTELE");
        System.out.print(getTiles(input_words));    
    }

} 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:06:12.030

首先遍历你的`ArrayList<String>`. 对于 ArrayList 中的每个单词，将其拆分为块。你上面的例子没有多大意义——为什么“SCHOOLWORK”被分成“SCH”、“OOL”、“WO”、“RK”而不是“SCHOOL”和“WORK”？在不了解您的要求背后的逻辑的情况下，我们只能提供一般性建议。

所以，基本上：

```
// iterate through the arraylist
ArrayList<String> allWords; // instantiate this
...
for(String word : allWords) {
    splitWord(word);
} 
```

并创建一种方法，该方法`splitWord(String)`应用您需要的任何逻辑来拆分单词。`substring()`如果您需要一定大小的单词，我建议您研究 String 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:33:54.017

我会使用一个接口来封装您希望如何拆分每个字符串。

```
public static interface StringSplitter {
    public List<String> splitString(String s);
} 
```

那么你的“getTiles”方法就是：

```
public static ArrayList<String> getTiles(ArrayList<String> input,StringSplitter splitter) {

    int initSize = input.size();
    for(int i = 0; i < initSize; i++) {

        String source = input.remove(0); //Remove from head
        input.addAll(splitter.splitString(source)); //Add to end

    }

    return input;

} 
```

**注意：**此方法修改原始列表，如果需要，它可以很容易地调整为简单地复制列表。虽然，我更喜欢这种方式。

由于拆分这些单词的确切过程尚不清楚，我猜你想继续将一个单词拆分为三个字符，除非只留下一个字符，然后拆分为两个 - 否则不要拆分。因此，您的默认“StringSplitter”将是：

```
public static final StringSplitter DEFAULT_SPLITTER = new StringSplitter() {

    @Override
    public List<String> splitString(String s) {
        List<String> subs = new ArrayList();
        while(!s.isEmpty()){
            int splitsize = 0;
            if(s.length() < 5) {
                if(s.length() == 4) {
                    splitsize = 2;
                } else {
                    splitsize = s.length();
                }
            } else {
                splitsize = 3;
            }
            subs.add(s.substring(0,splitsize));
            s = s.substring(splitsize);
        }
        return subs;
    }

}; 
```

您的主要方法将是：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    ArrayList<String> input_words = new ArrayList<String>();
    input_words.add("SCHOOLWORK");
    input_words.add("BALCONY");
    input_words.add("INSIST");
    input_words.add("SALTPETER");
    input_words.add("BOLTON");
    input_words.add("KITSCHY");
    input_words.add("CLIENTELE");
    System.out.print(getTiles(input_words),DEFAULT_SPLITTER); //Make sure to use DEFAULT_SPLITTER
} 
```

# php - 将代码存储在 SQL 数据库中并执行

> ID：14653201
> 
> 赞同：1
> 
> 时间：2013-02-01T18:58:12.977
> 
> 标签：php, mysql

我希望将某些代码作为模板存储在数据库表中，但我不确定它们是否会产生问题。我一直在不同的帖子中阅读来自不同人的混合信息，我只是不高兴我对这个主题很清楚。

我已经发现您不能真正将 PHP 回显/打印到网页中。显然，您可以回显 HTML 字符串，但是当您尝试使用 PHP 代码执行此操作时会变得很尴尬。我设法做到这一点的唯一方法是通过 eval 这在大多数情况下显然很糟糕......所以我正在使用另一种方法来实现模板（即编写一个 php 文件用作包含文件）

我要问的主要问题是：将 PHP 代码字符串（包括 SQL 语句）存储在表中的文本类型字段（mediumtext、longtext 等）中真的有问题吗？这些 SQL 语句是否可以执行诸如执行实际操作之类的操作，或者它们只是保留为文本字符串？

澄清一下，我存储代码字符串的原因是因为它们是 Web 管理员希望将它们分配到页面的特定区域 (div) 时使用的模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:03:11.360

使用[SMARTY](http://www.smarty.net/)模板。这将巧妙地解决您的问题，您无需在数据库中存储任何内容。它还将使您的 PHP 代码与您的 HTML 完全分离。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T18:59:55.037

不要这样做。如果您的数据库曾经遭到入侵并且有人注入了恶意 PHP，它可能会被执行。您应该将模板存储为文件并在需要时调用它们。

而且您实际上可以*回显/打印*PHP。你会使用[`eval`](http://php.net/manual/en/function.eval.php).

> `eval()`语言结构**非常危险**，因为它允许执行任意 PHP 代码。**因此不鼓励使用它。**如果您已仔细验证除了使用此构造之外别无选择，请特别注意**不要将任何用户提供的数据**传入其中，而无需事先正确验证。

# jquery - jQuery 顺序加载内容

> ID：14653202
> 
> 赞同：1
> 
> 时间：2013-02-01T18:58:16.480
> 
> 标签：jquery, ajax, load, preload

我目前正在尝试弄清楚如何将大量内容加载/预加载到长页面网站上。

我想到的解决方案是在加载前一部分之后加载内容。

HTML 设置如下所示：

```
<div class="panel">Panel 1</div>
<div class="panel">Panel 2</div>
<div class="panel">Panel 3</div>
<div class="panel">Panel 4</div> 
```

有没有办法加载面板 1，然后一旦加载，加载面板 2，依此类推...

对于我看过的大多数解决方案，他们建议使用 jQuery 中的 .load() 方法通过外部文件加载内容。

如果有人有任何令人惊叹的建议和/或示例或示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:04:25.500

如果您真的想单独加载它，那正是 jQuery 的[`load`](http://api.jquery.com/load/)用途。例如，假设您`data-page`在这些元素上放置一个属性，告诉每个元素它应该包含什么内容：

```
<div class="panel" data-page="page1.html">Panel 1</div>
<div class="panel" data-page="page2.html">Panel 2</div>
<div class="panel" data-page="page3.html">Panel 3</div>
<div class="panel" data-page="page4.html">Panel 4</div> 
```

（您不必这样*做*，这只是您可以告诉他们的一种方式。）

然后按顺序加载它们（如果你真的希望它是连续的）是相当简单的：

```
// Assumes script is at the bottom of the page, just before </body>
(function() {
  var index = 0,
      panels = $(".panel");

  triggerLoad();

  function triggerLoad() {
    var panel;

    if (index <= panels.length) {
      panel = $(panels[index]);
      ++index;
      panel.load(panel.attr("data-page"), triggerLoad);
    }
  }
})(); 
```

其工作原理是在页面首次呈现时触发第一个面板的加载，然后使用前一个`load`调用的完成处理程序触发每个后续面板加载。

[实例](http://jsbin.com/atufam/1)| [资源](http://jsbin.com/atufam/1/edit)

* * *

在下面的评论中，您还谈到了等待图像等完成。缺少您使用 windows 获得`body`的 master 元素`onload`，我们必须检查不完整的图像（`HTMLImageElement`具有`complete`属性）并挂钩它们的加载事件。当没有更多不完整的图像时，我们加载下一个面板：

```
(function() {
  var index = 0,
      panels = $(".panel");

  nextPanel();

  function nextPanel() {
    var panel, imgs;

    display("Checking for panel #" + index);
    panel = panels[index++];
    if (panel) {
      panel = $(panel);
      display("Loading panel");
      panel.load(panel.attr("data-page"), panelLoaded);
    }

    function panelLoaded() {
      display("Panel loaded");
      imgs = panel.find('img');
      imgs.on('load', nextPanelWhenReady);
      nextPanelWhenReady();
    }

    function nextPanelWhenReady() {
      var incomplete = imgs.filter(onlyIncomplete);
      if (incomplete.length === 0) {
        display("No pending images, loading next panel");
        imgs.off('load');
        nextPanel();
      }
      else {
        display("Images left to load: " + incomplete.length);
      }
    }

    function onlyIncomplete() {
      return !this.complete;
    }
  }

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }
})(); 
```

[实例](http://jsbin.com/atufam/4)| [资源](http://jsbin.com/atufam/4/edit)

那只处理图像，但您也应该能够概括视频的概念（我没有处理`video`标签，而且我不知道您使用它们而不是 Flash 视频等 - 我也没有处理）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T19:06:10.420

您也可以使用`each`. 假设您的设置是最终的：

```
$('.panel').each(function(){
  var panelname = $(this).innerHTML;
  var result = $.ajax({
    url: <URL>,
    async: false,
    data: panelname
  });
  $(this).html(result.responseText);
}); 
```

或围绕这个想法，但您必须有一种方法来区分面板以加载正确的面板。此解决方案应该适用于任意数量的面板。

# c++ - 将像素流式传输到 OpenGL 的现代方法？

> ID：14653205
> 
> 赞同：4
> 
> 时间：2013-02-01T18:58:29.623
> 
> 标签：c++, opengl, streaming, pixels

我有一个实时合成 5 兆像素图像的系统。一切正常，但我想用 OpenGL 程序可视化我的提要。

将 rgb绘制`char*`到屏幕上的最佳方法是什么？我希望使用 OpenGL 来执行 GPU 互操作，尽管有关平台的任何建议也会有所帮助。

这里有一个类似的帖子[OpenGL - draw pixel to screen?](https://stackoverflow.com/questions/10825011/opengl-draw-pixels-to-screen) 但似乎该方法已过时并且与 glDrawPixels 的链接已失效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:04:26.300

从我之前的答案中复制： [如何取消阻塞的 OpenGL 调用](https://stackoverflow.com/questions/14071350/how-to-cancel-a-blocking-opengl-call)

您可以使用不阻塞的 PixelBufferObjects 而不是 glDrawPixels。glDrawPixels 将等待（在您的主线程中）直到整个像素传输完成，但 PBO 将继续...

[http://www.songho.ca/opengl/gl_pbo.html](http://www.songho.ca/opengl/gl_pbo.html)

[http://www.opengl.org/wiki/Pixel_Buffer_Object](http://www.opengl.org/wiki/Pixel_Buffer_Object)

如果您需要一些更高级的计算，那么您可能想要使用 OpenCL，这将为您提供更大的灵活性。

# c# - Vector2 和 Vector4 的区别

> ID：14653206
> 
> 赞同：0
> 
> 时间：2013-02-01T18:58:32.250
> 
> 标签：c#, xna

我今天开始了解 XNA 游戏工作室，想知道`Vector2`和`Vector4`

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:59:58.097

`Vector2`包含 2 个浮点组件。它主要用于 2D 图形（2D -> 2 个组件）

`Vector4`包含 4 个浮点组件。它用于 3D 图形（在 3D 仿射空间中，可以使用[齐次坐标](http://en.wikipedia.org/wiki/Homogeneous_coordinates)（4 个分量）完成 3D 仿射变换）

# asp.net-web-api - Web API ModelBinders - 如何以不同方式绑定对象的一个 属性

> ID：14653211
> 
> 赞同：6
> 
> 时间：2013-02-01T18:58:48.920
> 
> 标签：asp.net-web-api, model-binding

我有以下动作签名

```
 [ValidateInput(false)]
    public HttpResponseMessage PostParam(Param param) 
```

参数看起来像这样：

```
public class Param {
  public int Id { get; set;}
  public string Name { get; set; }
  public string Choices { get; set; }
} 
```

这是障碍 - 电线上的东西是这样的

```
{
  Id: 2,
  Name: "blah",
  Choices: [
    {
      foo: "bar"
    },
    {
      blah: "blo"
      something: 123
    }
  ]
} 
```

我不希望“选择”反序列化 - 我希望它存储为字符串（是的，我了解安全隐患）。可以理解的是，我收到一个错误，因为默认活页夹不知道这一点。

现在使用 Asp Mvc 创建一个特定的 ModelBinder 将相当简单。ID

*   继承 DefaultModelBinder
*   用我自己的重写属性反序列化
*   在我的`Application_Start`使用中设置活页夹`Binders.Add`

似乎对于 Web Api，这是一个不同的过程 - System.Web.DefaultModelBinder 没有任何要覆盖的东西，我无法使用`Binders.Add`. 我试过环顾四周，但找不到太多关于如何实际做我想做的事。这更加复杂，因为显然 ModelBinders api 比 Beta 和 RTM 发生了相当大的变化，所以那里有很多过时的信息。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-05T01:56:01.980

在 Web API 中，您必须区分三个概念 -`ModelBinding`和. 这对于从/习惯于 MVC 的人来说是相当混乱的，我们只讨论.`Formatters``ParameterBinding``ModelBinding`

`ModelBinding`与 MVC 不同，它只负责从 URI 中拉取数据。格式化程序处理读取正文，并且`ParameterBinding`( `HttpParameterBinding`) 包含前两个概念。

`ParameterBinding`仅当您想要彻底改变整个机制时（即允许从主体绑定两个对象，实现 MVC 样式绑定等）时才真正有用 - 对于修改绑定器（针对 URI 特定数据）或格式化程序（针对主体数据）的更简单任务) 几乎总是绰绰有余。

无论如何，直截了当 - 您想要实现的目标可以通过自定义`JSON.NET`转换器轻松完成（JSON.NET 是 Web API JSON 格式化引擎背后的默认序列化库）。

您需要做的就是：

```
public class Param
{
    public int Id { get; set; }
    public string Name { get; set; }

    [JsonConverter(typeof(CustomArrayConverter))]
    public string Choices { get; set; }
} 
```

然后添加转换器：

```
internal class CustomArrayConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return true;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue,
                                    JsonSerializer serializer)
    {
        var array = JArray.Load(reader);
        return JsonConvert.SerializeObject(array);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, JArray.Parse(value as string));
    }
} 
```

在这种情况下，我们告诉转换器中的 JSON.NET 存储`Choices`为`string`（在 read 方法中），当您将`Param`带有属性的对象返回`Choices`给客户端（在 write 方法中）时，我们将`string`and 序列化为 an `array`，以便输出 JSON 看起来与输入相同。

您现在可以像这样测试它：

```
 public Param PostParam(Param param)
    {
        return param;
    } 
```

并验证输入的数据是否如您所愿，输出的数据是否与原始 JSON 相同。

# ios - DetailViewController 仅第二次加载网页

> ID：14653212
> 
> 赞同：0
> 
> 时间：2013-02-01T18:58:49.047
> 
> 标签：ios, xcode, uiviewcontroller, uiwebview, uisplitviewcontroller

好的，所以我是一个 Master Detail 应用程序，当用户单击一个单元格时，它会在 DetailViewController 中加载一个网页。问题是，在 iPhone 版本（这是一个通用应用程序）上，我必须单击单元格，然后返回 MasterViewController，然后再次单击单元格以加载网页。我只需要这样做一次，我认为这就像第一次启动网页什么的。不过，在 iPad 版本上，它会第一次加载它。那么这是什么一回事？

这是我的 applicationDidFinishLaunching AppDelegate.m 文件的代码，我在其中初始化 DetailViewController

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPhone" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
    self.window.rootViewController = self.navigationController;
    masterViewController.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPhone" bundle:nil];
} else {
    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPad" bundle:nil];
    UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

    masterViewController.detailViewController = detailViewController;

    self.splitViewController = [[UISplitViewController alloc] init];
    self.splitViewController.delegate = detailViewController;
    self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];

    self.window.rootViewController = self.splitViewController;
} 
```

这是 didSelectCellAtIndexPath 的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSDictionary *object = _objects[indexPath.row];
    NSURL *ex = [NSURL URLWithString:[object objectForKey:@"url"]];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.detailViewController.detailItem = object;
        [self.detailViewController loadURL:ex];
        self.detailViewController.detailItem = object;
        [self.detailViewController loadURL:ex];
        [self.navigationController pushViewController:self.detailViewController animated:YES];
    } else {
        self.detailViewController.detailItem = object;
        [self.detailViewController loadURL:ex];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:44:16.407

在 iPad 上，您在拆分视图控制器中有 2 个控制器，因此它们会被实例化，并且它们的视图会在应用程序启动时加载。在 iPhone 上，第二个控制器被实例化了，但是在你按下它之前它的视图不会被加载——我认为这就是区别。您应该尝试将 detailController 方法 loadURL: 移动到它的 viewDidAppear 方法，而不是将它放在主控制器的 didSelectRowAtIndexPath 方法中。

# java - 有没有办法在 LibGDX 中暂时隐藏场景小部件

> ID：14653223
> 
> 赞同：6
> 
> 时间：2013-02-01T18:59:25.397
> 
> 标签：java, user-interface, libgdx

我需要在 LibGDX 中临时隐藏标签或图像，因此我可以根据传递的值将按钮的一部分设置为图像或文本，我已经尝试过：

```
public void SetScore(int score)
{
    if(score<0)
    {
        highScore.setWidth(0);
        lockImage.setWidth(50);
    }
    else
    {
        highScore.setText(Integer.toString(score));
        highScore.validate();
        lockImage.setWidth(0);
    }
} 
```

它完全失败了，有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:51:02.020

假设它们是标准的 Scene2d 小部件，只需在您想查看它们时使用 setVisible(true) 并在不查看时使用 setVisible(false)。

沿着这些路线的东西......

```
public void SetScore(int score)
{
    if(score<0)
    {
        highScore.setVisible(false);
        lockImage.setVisible(true);
    }
    else
    {
        highScore.setVisible(true);
        highScore.setText(Integer.toString(score));
        highScore.validate();
        lockImage.setVisible(false);
    }
} 
```

如果它们在屏幕上占据相同的空间，那么您可能需要考虑将它们放在 Stack 上。

# r - R Null 导致数据帧子集

> ID：14653224
> 
> 赞同：0
> 
> 时间：2013-02-01T18:59:33.983
> 
> 标签：r, mapping, maptools

在 R 中，我有一个循环。我想通过循环中的变量对数据框进行子集化。我希望我的代码看起来像这样：

```
library(maptools)
for(theMonth in 600: 0)
{
  Inspections.mp <- readShapeLines("InspDates2")
  counties.mp <- readShapePoly("Boundary")
  plot(counties.mp, axes=FALSE, border="gray")
  data1 <-Inspections.mp[Inspections.mp$MonthInt == theMonth]
  lines(data1, col="blue", lwd=1)
} 
```

不幸的是，这将返回 data1 中的所有记录，并使用该行

```
data1 <-Inspections.mp[Inspections.mp$MonthInt == theMonth,] 
```

导致以下错误： bb[1, ] 中的错误：维数不正确

但是，我可以在仅使用常量整数时获得我想要的记录，但我需要一个变量

```
library(maptools)
for(theMonth in 600: 0)
{
  Inspections.mp <- readShapeLines("InspDates2")
  counties.mp <- readShapePoly("Boundary")
  plot(counties.mp, axes=FALSE, border="gray")
  data1 <-Inspections.mp[Inspections.mp$MonthInt == 60,]
  lines(data1, col="blue", lwd=1)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:50:38.110

这里的问题似乎是一个空子集。这可以通过使用 try/catch 语句来避免。

```
library(maptools)

Inspections.mp <- readShapeLines("InspDates2")
counties.mp <- readShapePoly("Boundary")
for(theMonth in 600: 0)
{
  plot(counties.mp, axes=FALSE, border="gray")

  result <- tryCatch({
    data1 <-Inspections.mp[Inspections.mp$MonthInt == theMonth,]
    lines(data1, col="blue", lwd=1)
    },warning = function(war){
      print("WARNING")
    },error = function (err)
    {
      print("Error")
    }, finally = {
      print("Finally")
    })
} 
```

# f# - 使用带有 F# 的 PostSharp - 需要带有工作示例的文档

> ID：14653231
> 
> 赞同：4
> 
> 时间：2013-02-01T18:59:55.497
> 
> 标签：f#, postsharp

我需要捕获 F# 函数的输入和输出，因此决定尝试使用 PostSharp。我找不到将 PostSharp 与 F# 结合使用的文档和有效的 F# 示例。有谁知道我在哪里可以找到这样的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:34:50.353

PostSharp 不正式支持 F#。它可能会部分工作，因为 PostSharp 在 MSIL 级别上工作，但不能保证一切都会正常工作，并且由于不受支持，因此无法解决错误。

# javascript - jquery检测输入焦点

> ID：14653233
> 
> 赞同：1
> 
> 时间：2013-02-01T18:59:59.027
> 
> 标签：javascript, jquery

我正在创建一个转换网络应用程序来自学 Javascript。用户可以使用数字键盘（基本上是没有运算符的计算器）输入数据。我还设置了一个功能来检测像数字键盘一样插入数据的击键（1-9）。还有清除所有数据的字符'c'

我的问题是我还有一个搜索字段（它使用自动完成功能使用户能够搜索其他转化）。我不希望用户使用“c”或数字键搜索某些内容，并让它在数字键盘和搜索字段中输入数据。

我的想法是创建一个 if 语句来确定搜索字段是否处于活动状态（聚焦），以及是否将变量（启用）更改为 false，从而禁用击键检测。

我遇到的问题是持有带有焦点属性的 if 语句的函数不起作用。

如果我的漫无边际没有意义，希望代码能把事情弄清楚。

*这是带有焦点属性的 if 语句*

```
$(document).ready(function(){
    if($(':focus').attr('#searchInput') == 'input')){
        enabled === false;
    }
}); 
```

*这是按键检测的代码（我省略了多余的部分以节省空间*

```
document.onkeydown = function(event){
    var key = event.charCode || event.keyCode;
    if(enabled === true){
        if(key === 67){
            clearInput(input); //Clears form input (input is my form ID)
        }else if(key === 48){
            writeInput(input, zero); //Zero is a var equaling 0
        }
        ...
    }else{
        return false; //if enabled is false don't detect keystrokes
    }
}; 
```

任何帮助将不胜感激。如果有任何不妥之处，我会很乐意解释（或编辑帖子。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:05:13.893

```
$(document).keyup(function(e){
   if($('#searchInput').is(':focus')) {
      return ; // search field is focused, ignore other part of function
   }
   var key = e.which;
   // do your code here
}); 
```

# dart - 内部错误：...不明确的参考：“DataGrid”在库 web/DataGrid.dart 和 web/out/DataGrid.dart 中定义

> ID：14653235
> 
> 赞同：1
> 
> 时间：2013-02-01T19:00:05.843
> 
> 标签：dart, dart-webui

我使用 web-ui 创建了一个基本的数据网格进行测试，并且它工作得很好。然后我决定尝试将其声明为组件。我改变了库引用，现在当我尝试运行应用程序时它给了我上述错误。你可以在下面看到我的文件结构。当我尝试运行它时收到“不明确的引用”消息的原因是，当我进入 out 目录中自动生成的 DataGrid.dart 文件时，它具有以下声明

```
import 'DataGrid.dart';
...
import '../DataGrid.dart'; 
```

我很困惑为什么生成的代码会同时导入它们。我考虑的一件事是，这可能是因为 DataGridPage.html 文件实例化了我的 DataGrid 组件，而我的 DataGridPage.dart 文件导入了 DataGrid.dart，因此它可以引用 DataGridColumn（它需要为 DataGrid 设置列）。在 DataGridPage.dart 中，我还附加到某些 DataGrid 事件，例如 SortColumnChanged 和 SelectionChanged，因此我需要在 DataGridPage.dart 中请求我的 DataGrid 实例的副本（我认为没有办法附加到来自 Web 组件的事件DataGridPage.html 中的实例化）。

关于我做错了什么的任何想法？

这是我的文件结构：

```
DataGrid.dart
--------------------------------------------
library datagrid;
...
part 'DataGridColumn.dart';
part 'DataGridRow.dart';
class DataGrid extends WebComponent{...}    

DataGridRow.dart
--------------------------------------------
part of datagrid;
class DataGridRow {...}

DataGridColumn.dart
--------------------------------------------
part of datagrid;
class DataGridColumn {...}

DataGrid.html
--------------------------------------------
[contains the component declaration UI]

DataGridPage.html
-----------------------------------------
...
<div is="s-datagrid" id="myDataGrid" ItemsSource="{{app.Assets}}" Columns="{{app.Columns}}"></div>
...

DataGridPage.dart
--------------------------------------------
import 'DataGrid.dart';
import 'Asset.dart';
void main() {
}
DataGridApp _app;
DataGridApp get app {
  if (_app == null) {
    _app = new DataGridApp();
  }
  return _app;
}
class DataGridApp{
//provides ItemsSource and DataGridColumn data
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:24:41.610

jmesserly 在 github 网站上回答了这个问题。他说您需要删除主 dart 文件中的组件导入。因此，在我的示例中，我将从 DataGridPage.dart 中删除 import 'DataGrid.dart' 语句。IDE 会给你一个警告，但你可以忽略它，因为它实际上是从 out 文件夹运行的。

[GitHub Web-UI 问题 342](http://github.com/dart-lang/web-ui/issues/342)

# java - jcombo 框中的键/值对

> ID：14653242
> 
> 赞同：1
> 
> 时间：2013-02-01T19:00:48.053
> 
> 标签：java, swing, jcombobox, key-value-coding

我希望relitivly简单，我正在尝试为jcombobox（swing）设置一个键/值对。显示名称将用作我的检查条件，并且无论如何都是从数组加载的，因此我需要找到一种方法将 ActionPerformed 方法的可获取值和键值对的显示加载到 jcobo 框中。我宁愿避免“获取组合框值，循环遍历 75 个索引数组以找到匹配项（因为组合框值是从数组加载的，所以会有完全匹配）以获取匹配索引。更新选定索引数组突变器用新号码。” 但现在这是唯一可行的解​​决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:02:09.057

**使用的基本概念是[ListCellRenderer](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListCellRenderer.html)。**您的组合框模型可以填充您的自定义对象，并且渲染器将知道如何表示每个对象。有关组合框渲染器的更多信息，请参见

[http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)

# c++ - 如何为表示动态分配的二维数组的类重载 [][] 运算符

> ID：14653245
> 
> 赞同：4
> 
> 时间：2013-02-01T19:01:06.197
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [运算符 [] [] 重载](https://stackoverflow.com/questions/6969881/operator-overload)

我创建了一个包含一个数组的类，该数组包含（在一行中）给定二维数组中的所有数字。例如给定：类对象中`{{1,2}{3,4}}`的字段包含. 我想为这个类重载 [][] 运算符，这样它就可以这样工作`b``T``{1,2,3,4}`

```
T* t.....new etc.
int val = (*t)[i][j]; //I get t->b[i*j + j] b is an 1dimension array 
```

* * *

```
 class T{
    public:
        int* b;
        int m, n;
        T(int** a, int m, int n){
            b = new int[m*n];
            this->m = m;
            this->n = n;
            int counter = 0;
            for(int i  = 0; i < m; i++){
                for(int j = 0; j < n; j++){
                    b[counter] = a[i][j];
                    counter++;
                }
            }
        }
int main()
{
    int m = 3, n = 5, c = 0;
    int** tab = new int*[m];
    for(int i = 0; i < m; i++)
           tab[i] = new int[n];
    for(int i  = 0; i < m; i++){
        for(int j = 0; j < n; j++){
            tab[i][j] = c;
            c++;
            cout<<tab[i][j]<<"\t";
        }
        cout<<"\n";
    }

    T* t = new T(tab,3,5);

    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:02:23.763

你不能。您必须重载`operator[]`才能返回*代理*对象，而代理对象又要重载`operator[]`才能返回最终值。

就像是：

```
class TRow
{
public:
    TRow(T &t, int r)
    :m_t(t), m_r(r)
    {}
    int operator[](int c)
    {
        return m_t.tab[m_t.n*m_r + c];
    }
private:
    T &m_t;
    int m_r;
};

class T
{
    friend class TRow;
    /*...*/
public:
    TRow operator[](int r)
    {
         return TRow(*this, r);
    }
}; 
```

您可以直接保存指向行的指针，而不是保存 a `T&`，这取决于您。`TRow`

此解决方案的一个不错的功能是您可以将 TRow 用于其他事情，例如`operator int*()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:36:32.837

在二维数组的情况下，您不需要创建代理类型。只需使用`int*`：

```
#include <iostream>

class T {
public:
  int m, n;
  int *b;
  T(int m, int n) : m(m), n(n), b(new int[m*n]) {
  }
  int*operator[](std::size_t i) {
    return &b[i*m];
  }
};

int main () {
  T t(2,2);
  t[0][0] = 1;
  t[0][1] = 2;
  t[1][0] = 3;
  t[1][1] = 4;
  std::cout << t.b[0] << t.b[1] << t.b[2] << t.b[3] << "\n";
} 
```

# windows-runtime - 如何声明继承自 IClosable/IDisposable 的接口

> ID：14653250
> 
> 赞同：4
> 
> 时间：2013-02-01T19:01:31.443
> 
> 标签：windows-runtime, c++-cx

在[这个问题](https://stackoverflow.com/questions/14594171/can-a-c-cx-interface-inherit-from-iclosable)中被告知我的首选解决方案是不可能的之后，我现在正在尝试实施一种解决方法。我没有在 C++/CX 中声明从 IClosable 继承的接口，而是在原始 IDL 中声明它。但这似乎也不起作用。

我创建了一个 IDL 文件`FooSpace.idl`，其中包含

```
import "inspectable.idl";
import "Windows.Foundation.idl";
namespace FooSpace
{
    [uuid(01234567-89AB-CDEF-FEDC-BA9876543210)]
    [version(42)]
    interface Foo : IInspectable requires Windows.Foundation.IClosable
    {
    }
} 
```

并从中生成 Windows 运行时元数据

```
midlrt /nomidl /metadata_dir "C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral" FooSpace.idl 
```

当我用它反汇编它时，生成的`FooSpace.winmd`看起来还不错`ildasm`——特别是，它似乎以与 system-provided 中相同的方式`Foo`继承自。`IClosable``IInputStream``Windows.winmd`

但是，当我尝试从 C++/CX 使用它时——甚至没有实现它，只是暂时假装其他人已经用 WRL 或其他方式实现了它——它似乎不起作用。这是我的测试 C++/CX 源文件：

```
void works(Windows::Storage::Streams::IInputStream^ istream) {
  Platform::IDisposable^ local = istream ;
}
void doesnt(FooSpace::Foo^ foo) {
  Platform::IDisposable^ local = foo ;
} 
```

这会产生错误`Foo`但不会产生错误`IInputStream`：

```
C:\cygwin\tmp>cl /nologo /c /ZW /FU FooSpace.winmd  testit.cpp
testit.cpp
testit.cpp(5) : error C2440: 'initializing' : cannot convert from 'FooSpace::Foo ^' to 'Platform::IDisposable ^'
        No user-defined-conversion operator available, or
        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast 
```

我在这里做错了什么？

* * *

另一方面，等效的 C# 代码似乎编译得很好：

```
public class Whatever {
  public static void Works(Windows.Storage.Streams.IInputStream istream) {
    System.IDisposable local = istream ;
  }
  public static void AlsoWorks(FooSpace.Foo foo) {
    System.IDisposable local = foo ;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T21:47:31.433

如果您在 cmds 中添加对 mdmerge 的调用，它应该可以工作：

```
midlrt /nomidl /metadata_dir "C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral" FooSpace.idl
mdmerge -metadata_dir "C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral" -i "." -o "merged" -v -partial
cl /nologo /c /ZW /FU merged\FooSpace.winmd /EHsc testit.cpp 
```

使用“合并”的 winmd 文件，我可以编译如下代码：

```
namespace ClosableTest
{
    ref class Test sealed
        : FooSpace::Foo
    {
    public: 
        virtual ~Test()
        {
           FooSpace::Foo^ f = nullptr;
           Platform::IDisposable^ d = f;
        }
    };
} 
```

midlrt 生成的原始 FooSpace.winmd 文件引用 Windows.Foundation (C:\Windows\system32\WinMetadata\Windows.Foundation.winmd)，而 mdmerge 输出引用 Windows (C:\Program Files (x86)\Windows Kits\ 8.0\References\CommonConfiguration\Neutral\Windows.winmd）。

有趣的是，您能够毫无问题地引用 ac# 项目中的mildrt-output winmd 文件，因为在博客文章[如何从 .NET 项目中引用 C++ WRL 组件](http://blogs.interknowlogy.com/2012/03/28/how-to-reference-c-wrl-components-from-a-net-project/)Kevin Stumpf 描述了他在不首先使用 mdmerge 时遇到了一些问题.

# html - CSS 样式适用于所有情况？

> ID：14653251
> 
> 赞同：1
> 
> 时间：2013-02-01T19:01:33.160
> 
> 标签：html, css

```
#menu {float:left; margin:0; padding:0; list-style-type:none; width:100%; border:1px solid #BBBBBB; background-color:#FFFFFF;}
#menu li {display:list-item; float:left;}
#menu a:link,a:visited {border-right:1px solid #BBBBBB; display:block; float:left;  padding:10px 15px; color:#AAAAAA; text-decoration:none; font-weight:bold; -webkit-transition: background 0.2s linear; -moz-transition: background 0.2s linear;}
#menu a:hover,a:active {background-color:#0096FF; color:#FFFFFF; -webkit-transition: background 0.2s linear; -moz-transition: background 0.2s linear;} 
```

这是 HTML：

```
<div id='header'>
<a href='index.html'><img src='logo.png' /></a>
</div>
<ul id='menu'>
<li><a href='index2.html'>HOME</a></li>
<li><a href='index.html'>FORUM</a></li>
</ul> 
```

问题是，我在 UL 之前还有另一个链接，它也获得了这些属性。我将如何使只有 UL 内的链接获得这些属性，而不是之前的链接（在 UL 之外）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:05:00.897

改变这个

```
#menu a:link,#menu a:visited {border-right:1px solid #BBBBBB; display:block; float:left;   padding:10px 15px; color:#AAAAAA; text-decoration:none; font-weight:bold; -webkit-transition:  background 0.2s linear; -moz-transition: background 0.2s linear;}
#menu a:hover,#menu a:active {background-color:#0096FF; color:#FFFFFF; -webkit-transition: background 0.2s linear; -moz-transition: background 0.2s linear;} 
```

您忘记在 a:visited 和 a:active 之前放置 #menu

# sql - 如何在postgres中获取具有最大时间戳的行？

> ID：14653257
> 
> 赞同：10
> 
> 时间：2013-02-01T19:02:02.763
> 
> 标签：sql, postgresql, timestamp, max

我需要在 postgresql 中获取具有最大时间戳的一行信息。下面是这个问题的演示：

```
drop table Mytable cascade
create table MyTable (usr char(1), event_dt timestamp without time zone);
insert into mytable values ('A','01-JAN-2009 11:10:11');
insert into mytable values ('A','02-JAN-2009 11:10:22');
insert into mytable values ('B','02-JAN-2009 01:01:59' );
insert into mytable values ('C', '31-DEC-2008 02:02:02');
insert into mytable values ('D', '31-DEC-2008 03:03:03'); 
```

如果我做

```
select max(event_dt) from (
select usr,event_dt from mytable where usr= 'A') as foo 
```

这是我需要的，但它只返回 event_dt "2009-01-02 11:10:22"

我想要该行的 usr 以及 sa event_dt 。我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-01T19:03:31.220

我只会去...

```
SELECT usr, event_dt FROM mytable ORDER BY event_dt DESC LIMIT 1 
```

# python - 使用 h5py 高级接口时如何设置缓存设置？

> ID：14653259
> 
> 赞同：5
> 
> 时间：2013-02-01T19:02:17.100
> 
> 标签：python, h5py

我正在尝试增加 HDF5 文件的缓存大小，但它似乎不起作用。这就是我所拥有的：

```
import h5py

with h5py.File("test.h5", 'w') as fid:
        # cache settings of file
        cacheSettings = list(fid.id.get_access_plist().get_cache())
        print cacheSettings
        # increase cache
        cacheSettings[2] = int(5 * cacheSettings[2])
        print cacheSettings
        # read cache settings from file
        fid.id.get_access_plist().set_cache(*cacheSettings)
        print fid.id.get_access_plist().get_cache() 
```

这是输出：

```
[0, 521, 1048576, 0.75]
[0, 521, 5242880, 0.75]
(0, 521, 1048576, 0.75) 
```

知道为什么阅读有效，但设置无效吗？
关闭和重新打开文件似乎也无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:51:00.807

如果您使用的是 h5py 2.9.0 或更高版本，请参阅[Mike 的回答](https://stackoverflow.com/a/57278604/190597)。

* * *

根据[文档](http://www.h5py.org/docs/low/h5f.html#h5py.h5f.FileID.get_access_plist)，`get_access_plist()`返回文件访问属性列表的**副本**。所以修改副本不影响原件也就不足为奇了。

高级界面似乎没有提供更改缓存设置的方法。

这是使用低级接口的方法。

```
propfaid = h5py.h5p.create(h5py.h5p.FILE_ACCESS)
settings = list(propfaid.get_cache())
print(settings)
# [0, 521, 1048576, 0.75]

settings[2] *= 5
propfaid.set_cache(*settings)
settings = propfaid.get_cache()
print(settings)
# (0, 521, 5242880, 0.75) 
```

上面创建了一个[PropFAID](http://www.h5py.org/docs/low/h5p.html#file-access)。然后我们可以通过这种方式打开文件并获取[FileID](http://www.h5py.org/docs/low/h5f.html#functional-api)：

```
import contextlib
with contextlib.closing(h5py.h5f.open(
                        filename, flags=h5py.h5f.ACC_RDWR, fapl=propfaid)) as fid:
    # <h5py.h5f.FileID object at 0x9abc694>
    settings = list(fid.get_access_plist().get_cache())
    print(settings)
    # [0, 521, 5242880, 0.75] 
```

我们可以使用`fid`来打开具有高级接口的文件，方法是传递`fid`给`h5py.File`：

```
 f = h5py.File(fid)
    print(f.id.get_access_plist().get_cache())
    # (0, 521, 5242880, 0.75) 
```

因此，您仍然可以使用高级接口，但需要一些摆弄才能到达那里。另一方面，如果您将其提炼成基本要素，也许还不错：

```
import h5py
import contextlib

filename = '/tmp/foo.hdf5'
propfaid = h5py.h5p.create(h5py.h5p.FILE_ACCESS)
settings = list(propfaid.get_cache())
settings[2] *= 5
propfaid.set_cache(*settings)
with contextlib.closing(h5py.h5f.open(filename, fapl=propfaid)) as fid:
    f = h5py.File(fid) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-07-30T19:13:20.477

从 h5py 版本 2.9.0 开始，现在可以直接通过主`h5py.File`界面使用此行为。控制“原始数据块缓存”的三个参数 — `rdcc_nbytes`、`rdcc_w0`和`rdcc_nslots`—[在此处](http://docs.h5py.org/en/stable/high/file.html#chunk-cache)记录。OP 试图调整`rdcc_nbytes`设置，现在可以简单地完成

```
import h5py

with h5py.File("test.h5", "w", rdcc_nbytes=5242880) as f:
    f.create_dataset(...) 
```

在这种情况下，我假设您知道实际需要多少空间，而不是像 OP 想要的那样乘以 5。当前默认值与找到的 OP 相同。当然，如果您真的想以编程方式执行此操作，您可以只打开一次，获取缓存，关闭它，然后使用所需的参数重新打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-13T21:19:02.453

h5py [-cache](https://github.com/moble/h5py_cache)项目可能会有所帮助，尽管我没有使用它：

```
import h5py_cache
with h5py_cache.File('test.h5', chunk_cache_mem_size=1024**3, 'a') as f:
    f.create_dataset(...) 
```

# css - 我怎样才能总是从每 2 个街区的新行开始？

> ID：14653267
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:02:49.020
> 
> 标签：css

为什么内联对齐在 Opera 上不起作用？这一切都是直截了当的。

演示：http: [//jsfiddle.net/KKEKW/](http://jsfiddle.net/KKEKW/)

**使用 Firefox 或 Safari 看起来就像这样。这就是我想要的样子。**

![在此处输入图像描述](../Images/f5273c6e43b5f85b580db3146fe42a54.png)

**有了 Opera，一切都会像这样直截了当。我不想要它。**

![在此处输入图像描述](../Images/25c4490801f89e386685202d2aeb2baf.png)

**HTML**

```
<div class ="social">
    <div class ="row">  
        <div class="twitter">
            twitter content
        </div>
        <div class="facebook">
            facebook content
        </div>
    </div>
    <div class ="row">
        <div class="google">
            google content
        </div>
        <div class="instagram">
            instagram content
        </div>        
    </div>
</div> 
```

**CSS**

```
div.social {
  margin-top: 10px;
  display: inline-block;
  height: 90px;
  overflow: hidden;
  text-align: left;
  vertical-align: bottom;
}

div.row{    
}

div.twitter {
  float: left;
  width: 200px;
  height: 30px;
  overflow: hidden;
  display:inline-block;
}

div.facebook {
  float: left;
  width: 170px;
  height: 30px;
  overflow: hidden;
  display:inline-block;
}

div.google {
  float: left;
  width: 200px;
  height: 25px;
  overflow:hidden;
  display:inline-block;
}

div.instrgram {
  float: left;
  width: 170px;
  height: 30px;
  overflow: hidden;
  display:inline-block;
} 
```

**我想要的输出**

```
twitter content ewfe(20px margin)facebook conten adhfhefjw
google content ewffewfewfewfew(20px margin)instagram content dwqwqqwfqwe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:06:31.950

一个样式化的无序列表可以为你做到这一点。

给你`LI`一个固定的宽度，给你`UL`两倍的宽度。在`float:left`您的`LI`.

```
<div class ="social">
<ul>
    <li>twitter content</li>
    <li>facebook content</li>
    <li>google content</li>
    <li>instagram content</li>
</ul>
</div> 
```

CSS：

```
social ul, social li {
    margin:0;
    padding:0;
    list-style:none;    
}

.social ul {
    width:500px;
}

.social li {
    width:250px;
    float:left;
} 
```

# ruby - gem prawn 可以用来创建带有嵌入视频的 PDF 吗？

> ID：14653268
> 
> 赞同：0
> 
> 时间：2013-02-01T19:02:58.623
> 
> 标签：ruby, flash, gem, prawn

是否可以使用 prawn [http://prawn.majesticseaacreature.com/](http://prawn.majesticseacreature.com/)创建带有嵌入式 Flash 的文档？

我已经查看了 api 并且空了。

如果大虾还没有这个功能，其他任何pdf生成器都可以做到吗（我的猜测是所有依赖webkit的都会自动拒绝）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:40:23.763

不，这是不可能的，倒在 api 上，尽我所能，我空了。回答我自己的问题，希望能让其他人避免做所有的研究

# java - 错误：缺少 JavaFX 运行时组件，需要运行此应用程序

> ID：14653270
> 
> 赞同：6
> 
> 时间：2013-02-01T19:03:03.067
> 
> 标签：java, ant, javafx-2

我尝试使用 javafx ant build 构建应用程序，生成 jar 文件。但是当我运行 jar 文件时，发出：

> 错误：JavaFX 运行时组件丢失，并且是运行此应用程序所必需的。

这`javafx-class-path: libs/h2.jar libs/jfxrt.jar libs/log4j.jar`

使用以下命令运行 JAR 文件：

```
java -jar app.jar 
```

会是什么呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-07-13T17:40:41.337

我能够在 Windows 机器上重现您的问题（使用 java8 64 位版本）。

一种简单的解决方法可能是：尝试再次重新安装 java。

另一个可能是：将 jre/lib/jfxrt.jar 复制到 jre/lib/ext/jfxrt.jar

# java - Map的线程安全Get和Put方法（性能测试）

> ID：14653271
> 
> 赞同：0
> 
> 时间：2013-02-01T19:03:04.263
> 
> 标签：java, multithreading, performance-testing

我正在尝试对我的服务进行一些性能测试。所以我为此编写了一个多线程程序。它将以很少的线程并行访问我的服务，然后测量每个线程返回所需的时间。

我进行更新并进入地图的方式将是线程安全的。正确的？因为我发现很难调试这个多线程程序来查看我的程序是否正常工作。谁能帮我解决这个多线程程序

```
private static ConcurrentHashMap<Long, Long> histogram = new ConcurrentHashMap<Long, Long>();

    public static void main(String[] args) {

        ExecutorService service = Executors.newFixedThreadPool(10);

        for (int i = 0; i < 1 * 1000; i++) {
            service.submit(new ThreadTask(i, histogram));
        }

        service.shutdown();

        while (!service.isTerminated()) {

        }

        ThreadTask.report();
    }

class ThreadTask implements Runnable {
    private int id;
    private RestTemplate restTemplate = new RestTemplate();
    private String result;
    private static ConcurrentHashMap<Long, Long> mapData;

    public ThreadTask(int id, ConcurrentHashMap<Long, Long> histogram) {
        this.id = id;
        this.mapData = histogram;
    }

    @Override
    public void run() {

            long start_time = System.currentTimeMillis();

            result = restTemplate.getForObject("",  String.class);
            long difference = (System.currentTimeMillis() - start_time);

            Long count = getMethod(mapData, difference);
            if (count != null) {
                count++;
                putMethod(mapData, difference, count);
            } else {
                putMethod(mapData, difference, Long.valueOf(1L));
            }

    }

    private synchronized void putMethod(ConcurrentHashMap<Long, Long> hg2, long difference, Long count) {
        hg2.put(Long.valueOf(difference), count);       
    }

    private synchronized Long getMethod(ConcurrentHashMap<Long, Long> hg2, long difference) {
        return hg2.get(difference);
    }

    public static void report() {
        System.out.println(mapData);
    }
} 
```

**根据以下建议更新了代码 -**

```
 private static RestTemplate restTemplate = new RestTemplate();
    private static String result = null;
    private static ConcurrentHashMap<Long, AtomicLong> histogram = new ConcurrentHashMap<Long, AtomicLong>();

    public static void main(String[] args) {

        ExecutorService service = Executors.newFixedThreadPool(10);

        for (int i = 0; i < 1 * 1000; i++) {
            service.submit(new ThreadTask(i, histogram));
        }

        service.shutdown();

        while (!service.isTerminated()) {

        }

        ThreadTask.report();
    }

class ThreadTask implements Runnable {
    private int id;
    private static RestTemplate restTemplate = new RestTemplate();
    private String result;
    private static ConcurrentHashMap<Long, AtomicLong> hg;

    public ThreadTask(int id, ConcurrentHashMap<Long, AtomicLong> histogram) {
        this.id = id;
        this.hg = histogram;
    }

    @Override
    public void run() {

            long start_time = System.currentTimeMillis();

            result = restTemplate.getForObject("",  String.class);
            long difference = (System.currentTimeMillis() - start_time);

        final AtomicLong before = hg.putIfAbsent(difference, new AtomicLong(1L));
        if (before != null) {
            before.incrementAndGet();
        }

    }

    public static void report() {
        System.out.println(mapData);
    }
} 
```

谁能看一下，让我知道这次我做对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:16:54.990

不，您的代码绝对**不是**线程安全的，因为整个更新操作不是原子的。你读取一个值，增加它，然后写回。到那时，另一个线程可能已经增加了相同的直方图条目，现在您正在保存一个陈旧的值，有效地“吞下”了一个命中。

我的建议：`synchronized (histogram) { ... }`围绕整个更新操作使用。但是，您不需要单独的同步方法。

如果您想要一个无锁解决方案，请使用`ConcurrentHashMap<Long, AtomicLong>`并使用此代码来更新它：

```
final Long before = histogram.putIfAbsent(difference, new AtomicLong(1L));
if (before != null) before.incrementAndGet(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:07:46.437

您不需要将同步与 ConcurrentHashMap 一起使用

您应该通过多次运行代码来预热代码。我会忽略前 10,000 次并运行测试至少 2 到 10 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T23:38:31.017

查看 Guava 的[AtomicLongMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/AtomicLongMap.html)。

# java - 父面板未绘制

> ID：14653275
> 
> 赞同：2
> 
> 时间：2013-02-01T19:03:12.890
> 
> 标签：java, swing, jpanel, transparency, paintcomponent

我有以下 Java Swing 问题：当父面板被另一个具有透明背景的面板覆盖时，它不会被绘制（即，paintComponent() 甚至没有被调用）。

我想如果子面板不透明，这种行为是正常的，但这是一个问题，因为父面板提供了一张图片作为背景。

可能不相关但你永远不知道：子面板是 JFreeChart 库中的 ChartPanel（扩展 JPanel），父面板也是 JPanel 扩展，特此 paintComponent 代码：

```
@Override

public void paintComponent(Graphics g) {
    try {
        long start = System.currentTimeMillis();

        //Sets waiting cursor
        GuiHelper.setCursorOnEntireWindow(Cursor.WAIT_CURSOR);

        //Paints parent
        super.paintComponent(g);

        //Paints background and other elements
        g.drawImage(generateBackground(getWidth(), getHeight()), 0, 0, getWidth(), getHeight(), this);

        long end = System.currentTimeMillis();
        System.out.println("Chart paint took: "+(end-start)+"ms");
    }
    finally { 
        //Removes waiting cursor
        GuiHelper.setCursorOnEntireWindow(Cursor.getDefaultCursor().getType()); 
    }       

} 
```

任何帮助/提示将不胜感激，因为我已经研究了几个小时。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:33:46.400

> 当父面板被另一个具有透明背景的面板覆盖时，它不会被绘制（即，paintComponent() 甚至没有被调用）

不确定如何设置 ChartPanel 的透明背景。我认为你只需要使用：

```
childPanel.setOpaque(false); 
```

如果这不起作用，请查看[具有透明度的背景以](http://tips4java.wordpress.com/2009/05/31/backgrounds-with-transparency/)获取有关如何在子/父组件之间完成绘画的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:13:02.040

作为替代方案，请考虑 的[`setBackgroundImage()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/JFreeChart.html#setBackgroundImage%28java.awt.Image%29)方法`org.jfree.chart.JFreeChart`，该方法也具有控制对齐和 alpha 的方法。

# php - 如何在php中查找多维数组中的数据？

> ID：14653277
> 
> 赞同：0
> 
> 时间：2013-02-01T19:03:21.883
> 
> 标签：php, arrays

比方说，我有类似下面的东西（数量可以是可变的）：

```
Product Color   XS   S    M    L    XL
   A    RED     100  200  200  200  100
   A    WHITE    50  100  200  100   20
   B    RED      50  200  200  100   50
   B    WHITE   100  200  300  200  100 
```

如果我将它们保存到这样的数组中：

```
$product_array[] = 
    array('product' => 'A', 'color'  => 'RED',
          'XS'      => 100, 'S'      => 200,
          'M'       => 200, 'L'      => 200, 
          'XL' =>100); 
```

查找尺码数量并更新给定产品 ID 和颜色的最简单方法是什么？比方说，（A，RED）出售 XS 尺寸 10 数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:15:09.387

如评论中所述，您可以使用项目名称+颜色作为索引。如果您需要使用给定的格式，您可以创建引用数组来固定。

```
$product_array[] = 
    array('product' => 'A', 'color'  => 'RED',
      'XS'      => 100, 'S'      => 200,
      'M'       => 200, 'L'      => 200, 
      'XL' =>100);
$product_array[] = 
    array('product' => 'B', 'color'  => 'GREEN',
      'XS'      => 100, 'S'      => 200,
      'M'       => 200, 'L'      => 200, 
      'XL' =>100);

foreach($product_array as &$product)
{
    $product_by_name_and_color[$product['product']][$product['color']] =& $product;
} 
```

接着：

```
$product_by_name_and_color['B']['GREEN']['XS'] += 5;
print_r($product_array); 
```

编辑：

如果您的产品从数据库中显示为红色，则很可能您想更新数据库中的值并且您问错了问题。

# sql - 如何从动态数据透视表中分配普通表？

> ID：14653278
> 
> 赞同：0
> 
> 时间：2013-02-01T19:03:24.183
> 
> 标签：sql, report, pivot-table, stimulsoft

我需要在我们当前日期的过去 12 个月中在 Stimulsoft 中制作报告，我使用动态数据透视表来制作这个，原始表格在图 1

![原始表数据](../Images/7a9b358603a2857e4f71247b721523b1.png)

然后数据透视表如图 2 所示（此处为大图链接：http: [//i.stack.imgur.com/LPCuP.jpg](https://i.stack.imgur.com/LPCuP.jpg)）

![数据透视表](../Images/64239c0808bea34aefe25395f764376c.png)

图 1 中的 DACP_Value 是对应于图 2 的日期的行。请注意，区域性设置为 pt-BR（巴西）

这是在 SQLFiddle 中生成数据透视表的示例代码

[http://www.sqlfiddle.com/#!3/3205a/23](http://www.sqlfiddle.com/#!3/3205a/23)

我需要将这些带有标题的动态数据放在一个普通表中（它可以是一个临时表），这样我就可以在我的报告查询中使用它并被 Stimulsoft 软件识别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:08:19.953

在您的代码`INTO YourTable` 之后添加：`SELECT`

```
DECLARE @Col NVARCHAR(MAX) = 
    (   SELECT  ', ' + QUOTENAME(CONVERT(VARCHAR, DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - (12 - Number), 0), 103)) + ' = [' + CAST(number AS VARCHAR) + ']'
        FROM    Master..spt_values
        WHERE   Type = 'P'
        AND     number BETWEEN 0 AND 12
        FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)')

DECLARE @SQL NVARCHAR(MAX) = 
        N'WITH Data AS
        (   SELECT  DACP_ID,
                    DACP_Value,
                    [MonthNum] = 12 - DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP)
            FROM    yourtable
            WHERE   DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP) BETWEEN 0 AND 12
        )   
        SELECT  DACP_ID' + @Col + '
        INTO YourTable --Add this line here
        FROM    Data
                PIVOT
                (   SUM(DACP_Value)
                    FOR MonthNum IN ([0], [1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
                ) pvt;'

EXECUTE SP_EXECUTESQL @SQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:53:57.703

作为一种方式，您可以使用 Stimulsoft 工具中的主从报告。作为主表，您只能使用带有日期的表：

```
SELECT CONVERT(DATE, DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - (12 - Number), 0), 103) AS DT,
       CONVERT(VARCHAR(2),MONTH(DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - (12 - Number), 0))) + CONVERT(VARCHAR(4),YEAR(DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - (12 - Number), 0))) As MonthYear
  FROM Master..spt_values
 WHERE Type = 'P'
       AND number BETWEEN 0 AND 12 
```

详细信息表是“yourTable”，带有附加列：

```
select *, convert(varchar(2),Month(DACP_date)) + convert(varchar(4),Year(DACP_date)) as MonthYear from yourtable 
```

MonthYear 列上的变量。在报表中，您可以将 Cross-Data 组件用于主数据，将 DataBand 组件用于详细数据。请从以下链接查看图片：http: [//imgur.com/Ve03BXU](http://imgur.com/Ve03BXU)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:08:10.990

这也是针对每个日期的数据量相同（即每个日期的 ID 相同）的情况的解决方案。如果没有，可能必须添加更多条件以在左侧显示标题。

# java - 生成的代码导致的 JAXBException

> ID：14653281
> 
> 赞同：2
> 
> 时间：2013-02-01T19:03:45.717
> 
> 标签：java, web-services, maven, jaxb, websphere

我收到以下形式的 JAXBException

> 类 SomeClass 或其任何超类在此上下文中是已知的。

完整的堆栈跟踪如下所示：

```
javax.xml.ws.WebServiceException: javax.xml.bind.JAXBException: class com.myCompany.generatedCode.WebServiceOperationName 或其任何超类对此上下文都是未知的。
    在 org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:175)
    在 org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:70)
    在 org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException（ExceptionFactory.java:128）
    在 org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute（AxisInvocationController.java:586）
    在 org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.doInvoke（AxisInvocationController.java:130）
    在 org.apache.axis2.jaxws.core.controller.impl.InvocationControllerImpl.invoke（InvocationControllerImpl.java:93）
    在 org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:364)
    在 org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:185)
    在 $Proxy41.deleteAccount（未知来源）
    在 com.myCompany.myPackage.MyWebServiceClient.callSomeWebService(MyWebServiceClient.java:100)
（特定于我的应用程序和框架的其他类）
...
造成的：
javax.xml.bind.JAXBException: com.myCompany.generatedCode.WebServiceOperationName 类或其任何超类对此上下文都是未知的。
    在 com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:556)
    在 com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:452)
    在 com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:314)
    在 com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:243)
    在 javax.xml.bind.helpers.AbstractMarshallerImpl.marshal（AbstractMarshallerImpl.java:75）
    在 com.ibm.xml.xlxp2.jaxb.marshal.MarshallerProxy.marshal（MarshallerProxy.java:100）
    在 org.apache.axis2.datasource.jaxb.JAXBDSContext$1.run(JAXBDSContext.java:470)
    在 org.apache.axis2.java.security.AccessController.doPrivileged(AccessController.java:76)
    在 org.apache.axis2.datasource.jaxb.JAXBDSContext.marshalByElement(JAXBDSContext.java:455)
    在 org.apache.axis2.datasource.jaxb.JAXBDSContext.marshal（JAXBDSContext.java:414）
    在 org.apache.axis2.jaxws.message.databinding.impl.JAXBBlockImpl._outputFromBO(JAXBBlockImpl.java:189)
    在 org.apache.axis2.jaxws.message.impl.BlockImpl.outputTo(BlockImpl.java:372)
    在 org.apache.axis2.jaxws.message.impl.BlockImpl.serialize(BlockImpl.java:296)
    在 org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerializeAndConsume(OMSourcedElementImpl.java:808)
    在 org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:975)
    在 org.apache.axiom.om.impl.llom.OMElementImpl.internalSerializeAndConsume(OMElementImpl.java:1016)
    在 org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally（SOAPEnvelopeImpl.java:271）
    在 org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize（SOAPEnvelopeImpl.java:233）
    在 org.apache.axiom.om.impl.llom.OMElementImpl.internalSerializeAndConsume(OMElementImpl.java:1016)
    在 org.apache.axiom.om.impl.llom.OMNodeImpl.serializeAndConsume(OMNodeImpl.java:488)
    在 org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:88)
    在 com.ibm.ws.websvcs.transport.http.SOAPOverHTTPSender.writeMessage(SOAPOverHTTPSender.java:3271)
    在 com.ibm.ws.websvcs.transport.http.SOAPOverHTTPSender.sendChunkedRequest(SOAPOverHTTPSender.java:888)
    在 com.ibm.ws.websvcs.transport.http.SOAPOverHTTPSender.sendSOAPRequest(SOAPOverHTTPSender.java:807)
    在 com.ibm.ws.websvcs.transport.http.SOAPOverHTTPSender.send(SOAPOverHTTPSender.java:611)
    在 com.ibm.ws.websvcs.transport.http.HTTPTransportSender.invoke(HTTPTransportSender.java:364)
    在 org.apache.axis2.engine.AxisEngine.send（AxisEngine.java:531）
    在 org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:401)
    在 org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:228)
    在 org.apache.axis2.client.OperationClient.execute（OperationClient.java:163）
    在 org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute（AxisInvocationController.java:581）
    ... 52 更多

```

触发这种情况的原因是尝试调用名为`WebServiceOperationName`. 我已经看到了处理此错误的其他技巧，这些技巧通常涉及添加`@XmlSeeAlso`注释或调整编组和解组的方式。

在这种情况下，我正在调用一个 Web 服务，其代码由 Maven 基于 WSDL（和支持模式）生成。我无法直接控制 Maven 生成的代码，也无法控制 marshall/unmarshall 调用。应用程序中的其他 web 服务调用似乎没有任何问题。

更奇怪的是，我无法在本地服务器上重现它，尽管它发生在开发服务器上。为 Web 服务生成的 JAR 与应用程序的其余代码相同。

这个例外在本周突然出现（并且一直如此），我怀疑环境发生了一些变化，但我不确定是什么。有任何想法吗？

* * *

一个新的观察：

我在服务器启动/重启后第一次尝试在服务器上运行此代码时，它需要一段时间（大约一分钟）才会失败并引发异常。之后的每一次，异常几乎都是瞬间的……

* * *

更多的信息：

WebSphere 7.0.0.23（在服务器上）中存在此问题，但在 WebSphere 7.0.0.7（在工作站上）中不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:50:48.047

问题已解决。我正在检查包含 WAS 抱怨的类的 jar，并注意到一些类在包层次结构的不同级别上重复。值得指出的是，原始错误中报告的类实际上并不是这些重复的类之一。此外，应用程序没有引用同一类的不同变体 - 引用的类在预期的包中。上一级的额外副本没有在任何地方引用（据我所知）。

它*看起来*像是一个糟糕的 Maven 配置，但是当我检查 xjb 绑定文件时，我无法弄清楚该模式命名空间中的类型是如何绑定到两个不同的包的。不管怎样，我清理了一些 Maven 使用的绑定文件，将常见的绑定重构到一个文件中，让 Maven 重建 jar，然后进行测试，突然问题就消失了！

显然，WAS 7.0.0.23 中存在问题，因为原始 jar 在 WAS 7.0.0.7 上运行良好。这*可能*是由 Maven 绑定问题引起的，导致 jar 看起来很奇怪，但在技术上是有效的。

同样有趣的是：我们的一位开发人员将 WAS 升级到 7.0.0.25 并使用原始的“坏”jar，并得到“没有这样的操作”错误而不是 JAXBException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:12:24.103

我在 Guidewire ClaimCenter 中遇到了同样的问题，这是一个可以配置但核心根本无法修改的保险应用程序，它是基于 Java 的，它包含像 axis2 这样的组件，但我创建了一个单独的 java 项目来包装 web 服务调用，我用 wsimport 创建了所有的存根代码。它在我的开发环境（windows 和 jetty）下运行良好，因为是 Guidewire 平台来配置它（没有其他选项）。我们使用 WAS 7 作为生产服务器。

```
    引起：javax.xml.ws.WebServiceException: javax.xml.bind.JAXBException: au.com.mycompany.policyinquiry.retrieveinsurancepolicydetails.v1.RetrieveInsurancePolicyDetailsResp 对此上下文未知
    在 org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:175)
    在 org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:70)
    在 org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException（ExceptionFactory.java:128）
    在 org.apache.axis2.jaxws.marshaller.impl.alt.DocLitBareMinimalMethodMarshaller.demarshalResponse（DocLitBareMinimalMethodMarshaller.java:158）
    在 org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.createResponse(JAXWSProxyHandler.java:499)
    在 org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:377)
    在 org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:185)
    在 $Proxy80.retrieveInsurancePolicyDetails（未知来源）

```

我试图在服务器端生成和编译客户端，以防万一它与不同的JDK平台相关，但这并没有解决问题。我发现下一篇文章[是6](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PK75322)！但是对于 WAS 6 ，我还没有尝试过。

```
    当 JAX-WS Web 服务引擎接收到消息时，它使用
    JAXB 引擎将消息转换为 java bean。
    该消息表明转换 xml 时发生故障
    进入一个类型的对象
    com.somecom.lib.business.xml.ComIdentifierXml。失败
    表示 JAXB 引擎未使用
    有关此用户类别的信息。
    .
    在这个用例中，类
    com.somecom.lib.business.xml.ComIdentifierXml 被打包在一个
    EAR 级别的 JAR。如果
    类被打包在一个位于 WAR 模块的 JAR 中
    WEB-INF/lib 目录。

```

```
SOLUTION: 
```

目标环境：IBM 服务器 IBM JDK 1.6 IBM Webpshere 7.0.0.25

调用 web 服务的客户端使用纯 JAVA，不依赖外部库 JAX-WS RI 2.1.6

在 webspehre 中 1- 为应用程序设置加载到父级的类 last 2- 关闭 web 服务注释：将 com.ibm.websphere.webservices.DisableIBMJAXWSEngine 属性设置为 true。这将禁用基于修改后的 Axis2 3-使用第三方 JAX-WS 运行时部署您的应用程序的 Websphere 自己的实现，在我的情况下，我使用 Glassfish Metro 1.5，其中包括 JAX-WS RI 2.1.7，并且与我的本地环境相同JDK 1.6.0_37

就是这样

干杯亚历克斯:)

# mongodb - mongodb聚合：如何返回具有最小值/最大值而不是值的对象

> ID：14653282
> 
> 赞同：4
> 
> 时间：2013-02-01T19:04:00.453
> 
> 标签：mongodb

假设我的文档有一个`date`字段，我想获取聚合中第一个和最后一个出现的文档。使用`$group`and `$min`or `$max`，很容易自己获取日期，例如：

```
db.mycollection.aggregate([
  { $group: {
      _id: 1, // for the example say I'm grouping them all ... 
      first: { $min: "$date" },
      result: { $push: { ... } } // ... and returning them all
  }}
]) 
```

这将返回如下结果：

```
{ _id: 1, first: ISODate(...), result: [...] } 
```

但我想要的不是第一次约会，而是第一次约会*的结果*。我将如何使用管道来解决这个问题？

我一直在修改使用`$project`之后扫描数组以查找具有匹配日期的对象，这似乎可以工作，但我想在我偶然发现不正确的方法之前，我想看看是否有*适当的*方法来做到这一点.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T21:12:40.563

您可以使用`$first`此处来获取排序集的第一个（[http://docs.mongodb.org/manual/reference/aggregation/first/#_S_first](http://docs.mongodb.org/manual/reference/aggregation/first/#_S_first)）：

```
db.mycollection.aggregate([
  { $group: {
      _id: 1, // for the example say I'm grouping them all ... 
      first: { $first: "$date" },
      result: { $push: { ... } } // ... and returning them all
  }}
]) 
```

这也将使您使用索引对 $group 进行排序，从而提高性能。

# c# - ASP.NET 中的计划事件？

> ID：14653287
> 
> 赞同：4
> 
> 时间：2013-02-01T19:04:27.937
> 
> 标签：c#, asp.net, api, notifications

我的网站需要每隔几分钟就做一些事情。

基本上我从另一个网站获得项目。然后我调用我的一个网页并更新。

目前我正在为此制作一个控制台应用程序，但我想知道是否有更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:11:53.970

存在用于在 .NET 中创建计划作业的超级酷的开源工具，
它称为[Quartz.NET](http://quartznet.sourceforge.net/)。我认为目前是该任务的#1 工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:23:23.637

使用 Windows 任务计划程序在适当的时间运行您编写的控制台应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:11:45.833

根据需要做什么，有几个选项。

1.  这可以通过 Windows 服务中的计时器来实现。
2.  使用 HttpCache 过期回调功能（不推荐，这是一个 hack）。
3.  使用 Sql 作业（假设数据正在更改）。
4.  在@Ph0en1x 答案的基础上，已经有一个关于如何在 ASP.Net 中使用 Quartz.Net的 Stackoverlow[问题](https://stackoverflow.com/questions/1356789/how-to-use-quartz-net-with-asp-net)

# c# - 在不同的命名空间中复制一个类有什么缺点？

> ID：14653289
> 
> 赞同：0
> 
> 时间：2013-02-01T19:04:33.623
> 
> 标签：c#, .net

我有一个名为[SimpleCommand](https://gist.github.com/773312)的类。它是一个以非常简单的方式实现 ICommand 的单个文件类（因此得名）。

我发现我正在把它放在我的几个项目中。（我只是复制代码并将其添加到项目中。）

这些项目都在同一个解决方案和生成的 wpf 应用程序中。

我的问题是：**除了稍微增加我的 DLL 的大小之外，复制这段代码有什么缺点？**

（我正在尝试决定将其放入 nuget 包中是否值得。）

注意：我多年来没有更改此代码，我也不打算这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:08:45.453

这里的问题不在于在不同的命名空间中有各种具有相同名称的类。

问题是您正在复制代码，这真是个坏主意。

如果您想将您的 SimpleCommand 扩展为 ABitMoreComplexCommand，您最终会将其全部复制。

如果您需要按类型将一个命令与另一个命令进行比较，您无法可靠地做到这一点 - 您可能实施的启发式方法可能会给您带来误报

底线：创建另一个项目，将所有可重用的代码放在那里，不要复制它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:08:09.290

复制和粘贴是重用代码最低效的方式，IMO。如果你决定向这个类添加一个简单的 bool 属性会发生什么？您将不得不复制和粘贴它的次数。

我建议将这些可重用部分组合在一个 DLL 中，并从多个项目中引用它们。

# apache-flex - 更改 Datagrid 中的背景颜色单元格 (Flex 4.6)

> ID：14653294
> 
> 赞同：0
> 
> 时间：2013-02-01T19:04:47.270
> 
> 标签：apache-flex, datagrid, flex4, flexbuilder

我试图在数据网格中的每个单元格的两种背景颜色之间交替。它会在双击特定单元格时更改其状态。

我想要的是用户能够在 Datagrid 中选择单个单元格，因此#FFFFFF 颜色用于未选择的单元格，#CDCDCD 用于选定的单元格。

我有以下用于 ItenRenderer 的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" 
                    clipAndEnableScrolling="true">

    <fx:Script>
        <![CDATA[
            override public function prepare(hasBeenRecycled:Boolean):void {
                //lblData.text = data[column.dataField]
            }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal"/>
        <s:State name="selected"/>
    </s:states>

    <s:Label id="lblData" top="9" left="7" text="10" width="100%" height="100%" textAlign="center"/>
    <s:Rect width="100%" height="100%">
        <s:fill>
            <s:SolidColor color.selected="#CDCDCD" color.normal="#FFFFFF"/>
        </s:fill>
    </s:Rect>

</s:GridItemRenderer> 
```

问题是由于 rect 组件将其隐藏，因此从未显示标签。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:42:43.590

试试这个：

![在此处输入图像描述](../Images/6f5718e43c1a86e06e226b9b321f94f6.png)

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]private var initDG:ArrayCollection = new ArrayCollection([
            {Artist:'01', Album:'Album 01', Year:'2008'},
            {Artist:'02', Album:'Album 02', Year:'2009'},
            {Artist:'03', Album:'Album 03', Year:'2007'},
            {Artist:'04', Album:'Album 04', Year:'2003'},
        ]);
    ]]>
</fx:Script>

<s:VGroup>
    <s:DataGrid id="myGrid" width="360" dataProvider="{initDG}">   
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="Artist" headerText="Artist" itemRenderer="com.dgcoloredcells.CellRenderer"/>
                <s:GridColumn dataField="Album" headerText="Album" itemRenderer="com.dgcoloredcells.CellRenderer"/>
                <s:GridColumn dataField="Year" headerText="Year" itemRenderer="com.dgcoloredcells.CellRenderer"/>
            </s:ArrayList>
        </s:columns>       
    </s:DataGrid> 
</s:VGroup>
</s:Application> 
```

//渲染器

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" 
                implements="mx.controls.listClasses.IDropInListItemRenderer">
<fx:Script>
    <![CDATA[
        import mx.controls.dataGridClasses.DataGridListData;
        import mx.controls.listClasses.BaseListData;

        private var _listData:BaseListData;

        [Bindable]private var isSelected:Boolean = false;

        override public function set data( value:Object ) : void 
        {
            super.data = value;
            lblData.text = data[column.dataField];
        }

        [Bindable]public function get listData() : BaseListData
        {
            return _listData;
        }
        public function set listData( value:BaseListData ) : void
        {
            _listData = value;
        }

        private function onClick(evt:Event):void
        {
            isSelected = !isSelected;
        }
    ]]>
</fx:Script>

<s:Rect width="100%" height="100%">
    <s:fill>
        <s:SolidColor color="{isSelected ? 0xCDCDCD : 0xFFFFFF}"/>
    </s:fill>
</s:Rect>

<s:Label id="lblData" top="9" left="7" width="100%" height="100%" textAlign="center" doubleClickEnabled="true" doubleClick="onClick(event)"/>

</s:GridItemRenderer> 
```

**//编辑** 在这里你可以看到我的数据[column.dataField]问题的截图：

![在此处输入图像描述](../Images/d04a9eda27b4e5d27dba677676d0dec4.png)

这是对应的值对象

![在此处输入图像描述](../Images/1b05a6501394f985bec213b36168ac29.png)

所以 data[column.dataField] = data["Artist"] = "01"

# objective-c - gpus_ReturnNotPermittedKillClient，而应用程序正在“后台”

> ID：14653295
> 
> 赞同：2
> 
> 时间：2013-02-01T19:04:56.107
> 
> 标签：objective-c, ios5, audio-recording, background-process

我有一个（旧）音频应用程序在 iOS 5.1.1 上行为不端。它录制音频，并且在较旧的 iOS 版本上（不确切知道“中断”在哪里），它会在录制时保持“在前台”，没有任何轻推。

但是在 5.1.1 上，应用程序在两分钟后进入后台，然后事情就变糟了。目前（将不得不改变这一点，我想）应用程序在后台运行时会终止录制（并且它似乎成功地做到了这一点），但它仍然在上述例程中因陷阱而死。

不幸的是，发生这种情况时调用堆栈是空的，因此几乎没有关于*为什么*应用程序被杀死的线索，但我收集（仅从网络上的提示）发生陷阱是因为后台应用程序无法使用任何 UI 设施，并且该应用程序必须以某种方式调用 UI-ish。但我不知道它可能是什么。

我已经处理了大多数通知，以查看通知是否可能潜伏在某处的队列中并做某事，但到目前为止我还没有发现任何可能触发 UI opp 的东西。

关于如何追踪这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:29:58.443

啊哈！！该应用程序使用称为 AQLevelMeter 的 Apple freebee 小部件。当记录停止时，电平表也会停止，但 AQLevelMeter.mm 中的停止代码不会使驱动 UI 更新的计时器失效。

# html - 清除 html5 画布，然后重新初始化

> ID：14653299
> 
> 赞同：0
> 
> 时间：2013-02-01T19:05:08.323
> 
> 标签：html, canvas, graph, paperjs

我正在开展一项活动，用户将绘制折线图并检查它与实际图表的接近程度。我已经开始工作了，但在“重置”画布方面需要帮助。我可以清除它，但我需要在清除后重新初始化它，以便用户可以重试。

这是我到目前为止的重置代码：

```
var clearCanvas = false;

function onFrame(event) {
    if (clearCanvas && project.activeLayer.hasChildren()) {
        project.activeLayer.removeChildren();
        clearCanvas = false;
    }
}
$('.clear').on('click', function() {
    clearCanvas = true;
    return false
}) 
```

[这是一个jsfiddle](http://jsfiddle.net/EXXJb/)

由于我不是编码员，所以我将这段代码拼凑在一起，所以如果这不是最好的做事方式，那就放轻松。如果有人有更清洁/更有效的方式来做到这一点，我会全力以赴！

提前致谢。小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T19:50:44.553

首先，当您的 jsfiddle 尝试使用“ [http://paperjs.org/static/js/paper.js](http://paperjs.org/static/js/paper.js) ”时，它会收到 404。将其切换为“ [https://raw.github.com/paperjs/paper.js/master/dist/paper.js](https://raw.github.com/paperjs/paper.js/master/dist/paper.js) ”对我有用。

其次，如果您希望用户再试一次，他们需要能够在重置后放置 7 个（或多个）新点，因此在您的`onFrame`函数中，您需要`maxPoints`在清除画布时设置为 0。

第三，连接用户点的路径需要重新初始化。这可以通过调用`path.removeSegments()`然后重新添加`path`到`activeLayer`.

第四，一旦你从 activeLayer 中移除了孩子，`fullChart`（“答案”）就不再在 activeLayer 上。您必须重新添加它并将其不透明度重新设置为 0（如果您想再次隐藏它）。

将它们放在一起，这`onFrame`似乎可以满足您的要求：

```
function onFrame(event) {
    if (clearCanvas && project.activeLayer.hasChildren()) {
        project.activeLayer.removeChildren();
        fullChart.opacity = 0;
        maxPoints = 0;
        path.removeSegments();
        project.activeLayer.addChildren([fullChart, path]);
        clearCanvas = false;
    }
} 
```

这是一个[jsfiddle](http://jsfiddle.net/TNLAg/5/)。

* * *

其他注意事项：

我不相信你必须像那样分离你的代码；您可以在按钮的回调中清除画布，而不是等待`onFrame`. 所以所有代码都`onFrame`可以进入回调（只是没有`clearCanvas`变量）。

我还建议`Point`为您的 myCircle 和 myPath 使用相同的对象，而不是创建具有相同坐标的新对象。例如：

```
var point1 = new Point(72, 214);
var point2 = new Point(205, 177);
...
var point7 = new Point(868, 177);
var myCircle1 = new Path.Circle(point1, 10)
var myCircle2 = new Path.Circle(point2, 10)
....
var myCircle7 = new Path.Circle(point7, 10)
var myPath = new Path([point1, point2, ..., point7]); 
```

# java-me - 哪个版本的 Eclipse 支持 J2ME 应用程序开发？

> ID：14653302
> 
> 赞同：1
> 
> 时间：2013-02-01T19:05:25.593
> 
> 标签：java-me, eclipse-plugin

尝试开发 J2ME 应用程序，但我无法使用 Java ME SDK v. 3.2 在 Eclipse (Juno) 中配置 J2ME。仿真器甚至不能与 NetBeans 7.2 一起运行。我怎样才能正确配置这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:17:24.413

我不知道确切原因，但`MTJ`不运行[`Juno`](http://www.eclipse.org/juno/). 如果你喜欢`Eclipse`用[`Indigo`](http://www.eclipse.org/indigo/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T06:23:54.477

执行以下步骤：

1.  去帮助->安装新软件

2.  单击添加选项卡

3.  在名称文本字段中输入“eclipse me update site”

4.  在网址中给出“ [http://eclipseme.org/updates](http://eclipseme.org/updates) ”

5.  安装软件

6.  然后你可以在你的eclipse juno中找到j2me

    现在将 sun wtk 仿真器与 juno 集成

    1.转到文件->新建->项目->j2me

    2.next我们需要导入运行midlets的设备

    3.单击导入选项卡

    指定 wtk 的路径

    单击刷新按钮选择设备

    4.尝试构建一个midlet应用程序

# html - 引号呈现为符号“

> ID：14653305
> 
> 赞同：0
> 
> 时间：2013-02-01T19:05:30.880
> 
> 标签：html, rendering

我在 bd 上过 css 课程。在工作室管理中看到他们时，这没关系： `.box_blue { background: url("../imgs/box_teste.png") no-repeat; #0087bd; border: 1px solid #0d5875; } .box_blue:hover { background: #0087bd; }`

但是当我将它从 db 检索到 c# 并在 vs12 html 可视化器上看到它时没关系，但是当渲染到 html 时，双引号被替换为`"&quot;"` 所以......这是结果：

```
background: url(&quot;../imgs/box_teste.png&quot;) no-repeat; #0087bd;) 
```

我怎样才能使事物正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:07:32.227

CSS 中的 URL 不需要引号。你可以把它们排除在外。

见：[http ://www.w3.org/TR/css3-background/#background-image](http://www.w3.org/TR/css3-background/#background-image)

# android - 如何使用 Android 更新程序脚本安装 APK

> ID：14653306
> 
> 赞同：8
> 
> 时间：2013-02-01T19:05:33.620
> 
> 标签：android, android-install-apk, edify

我正在尝试使用 Android 的更新程序脚本语言（Edify？）通过无线方式将 APK 安装到我可以控制的嵌入式设备上。 [这](http://www.freeyourandroid.com/guide/introdution_to_edify)是描述该语言的链接。

我的第一次尝试如下：

```
package_extract_file("added_files/data/app/test.apk", "/data/app/test.apk"); 
```

这导致`test.apk`自动安装在 中`/data/data/com.acme.test`，但是该目录`/data/data/com.acme.test/lib`是空的，而它应该包含. 中包含`test.so`的共享库`test.apk`。（如果我使用 手动安装`adb install test.apk`，则会提取库。）

然后我尝试将 APK 提取到`/data`而不是`/data/app`这样操作系统不会自动将其安装到`/data/data`中，我可以尝试使用脚本进行安装：

```
package_extract_file("added_files/data/app/test.apk", "/data/test.apk");
run_program("/system/bin/pm", "install", "/data/test.apk"); 
```

这导致了以下错误：

```
about to run program [/system/bin/pm] with 3 args
run_program: execv failed: Exec format error
run_program: child exited with status 1 
```

我不确定为什么会发生上述错误。

有没有办法安装 APK 并自动提取其共享库？我可以手动安装这些库，但我希望避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:49:51.873

我不熟悉 Edify，但通过查看文档，`package_extract_file()`只需将 APK 提取为存档文件即可。为什么数据最终在里面`/data/data`很奇怪；你确定这不是以前安装留下的吗？我建议完全卸载该应用程序并重试。

在我看来，该特定功能不适合安装应用程序。您可能想尝试通过命令安装它：

```
run_program("adb", "install", "-r", "added_files/data/app/test.apk"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T09:08:41.763

Edify 脚本在恢复模式下运行，根据您的设备，默认情况下并非所有分区都可用。您的问题很可能是您尝试使用的分区尚未安装。

# mysql - Django 管理员搜索通过将拉丁字母视为立陶宛字母

> ID：14653308
> 
> 赞同：3
> 
> 时间：2013-02-01T19:05:51.530
> 
> 标签：mysql, django, unicode

立陶宛语中有一些非拉丁字母，它们都可以写成拉丁语：

ą - a, č - c, ę/ė - e, į - i, š - s, ų/ū - u, ž - z。

例如有记录`ąžuolas`和`azuolas`在数据库中。如果我在 django admin 中输入查询，`ąžuolas`那么它会找到两条记录。如果`azuolas`- 只有第二个。

我必须在 django（或 MySQL）中进行哪些更改才能使其双向工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:27:19.940

首先，我刚刚了解到那些看起来像拉丁文的字符有一个通用名称：[变音符号](http://en.wikipedia.org/wiki/Diacritic)！

似乎[Django 允许使用全文搜索进行这种类型的查询（](https://docs.djangoproject.com/en/dev/ref/models/querysets/#search)[在相关问题的评论](https://stackoverflow.com/questions/4527983/django-queries-especial-caracters#comment4974516_4528115)中记录成功

**哇哦，看看[这个小开关](https://github.com/django/django/blob/master/django/contrib/admin/views/main.py#L351)！**

```
elif field_name.startswith('@'):
    return "%s__search" % field_name[1:] 
```

难不成找了`@azuolas`找你总算找到了`ąžuolas`？请试一试并报告您的发现。

此外，这里是有关[BOOLEAN MODE 的相关 MySQL 文章](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)

# ios - Xcode 4.6 不会归档具有依赖库的目标

> ID：14653312
> 
> 赞同：1
> 
> 时间：2013-02-01T19:06:09.140
> 
> 标签：ios, objective-c, xcode, cocoa, xcode4.6

尝试归档目标会导致依赖库在编译期间无法找到公共头文件。我在存档期间看到这样的错误。

```
fatal error: 'OmniBase/NSException-OBExtensions.h' file not found
#import <OmniBase/NSException-OBExtensions.h>
        ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:06:09.140

此问题似乎与 Xcode 4.6 未正确转义标头搜索路径有关。无论我多么努力地试图逃避搜索路径，它总是在空间处被分割。这个问题在以前版本的 Xcode 中没有出现。我能够通过从我正在构建的方案名称中删除空格来解决这个问题。

似乎纠正此问题的唯一方法是确保您的搜索路径没有空格。您可以通过查看错误日志中的编译参数来检查您的搜索路径。每个以 开头的参数`-I`都是一个搜索路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T21:11:31.013

尝试将标题搜索路径放在引号中：

```
"$(BUILD_ROOT)/../path/to/headers" 
```

# android - 在 Android 中打开 SQLite 数据库时出错

> ID：14653314
> 
> 赞同：0
> 
> 时间：2013-02-01T19:06:11.350
> 
> 标签：android, database, sqlite

我在工作区中有 2 个应用程序和 1 个库项目。第一个应用程序创建一个数据库 test.db 并退出，它工作正常（数据库已正确创建）。第二个应用程序尝试打开数据库并失败。数据库访问是通过两个应用程序中的同一个库完成的。当第二个应用程序尝试打开数据库时，它会出现异常：

```
E/SQLiteDatabase(26994): Failed to open database'/storage/emulated/0/Android/data/com.mydblib/databases/test.db'.

E/SQLiteDatabase(26994): android.database.sqlite.SQLiteException: not an error (code 0): Could not open the database in read/write mode. 
```

打开数据库的代码：

```
File dbDir = new File(dbDirectory);

if (!dbDir.exists()) {
    dbDir.mkdirs();
}

File dbFile = new File(dbDir, DATABASE_NAME);

// This causes exception in the 2nd app but works fine in the 1st one:
SQLiteDatabase.openOrCreateDatabase(dbFile, null); 
```

此错误的原因可能是什么？谢谢。

# c# - 从 SQL Server 插入 Access

> ID：14653324
> 
> 赞同：3
> 
> 时间：2013-02-01T19:06:31.983
> 
> 标签：c#, sql-server, ms-access

我希望将几千条记录从 SQL Server 复制到 C# 中的 Access 中。另一个方向使用`SqlBulkCopy`. 有什么办法可以反过来做吗？

我正在尽我最大的努力避免遍历每条记录中的每个字段并构建一个令人发指的`Insert`语句，该语句不仅需要永远运行，而且如果有任何变化可能会严重崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:11:01.033

这将针对 MS Access OleConnection 连接运行：

```
SELECT fld1, fld2 INTO accessTable FROM [sql connection string].sqltable 
```

例如：

```
SELECT * INTO newtable 
FROM 
[ODBC;Description=Test;DRIVER=SQL Server;SERVER=server\SQLEXPRESS;UID=uid;Trusted_Connection=Yes;DATABASE=Test].table_1 
```

或追加

```
INSERT INTO newtable
SELECT *
FROM [ODBC;Description=Test;DRIVER=SQL Server;SERVER=server\SQLEXPRESS;UID=uid;Trusted_Connection=Yes;DATABASE=Test].table_1; 
```

或使用 FileDSN

```
INSERT INTO newtable
SELECT * 
FROM [ODBC;FileDSN=z:\docs\test.dsn].table_1; 
```

例如，您需要找到合适的司机

```
ODBC;Driver={SQL Server Native Client 11.0};Server=myServerAddress;Database=myDataBase; Uid=myUsername;Pwd=myPassword; 
```

从[http://connectionstrings.com](http://connectionstrings.com)为我工作，但请查看您的客户端版本。

# android - “R 无法解析为变量”android 错误

> ID：14653329
> 
> 赞同：1
> 
> 时间：2013-02-01T19:07:03.433
> 
> 标签：android, eclipse

我新安装了 eclipse 3.8 和 android sdk。当我创建一个新项目时，我`R cannot be resolved to a variable`在`MainActivity.java`. `R.java`不见了，而是我`BuildConfig.java`在 gen 文件夹中。根据对类似问题给出的建议，我尝试了以下但没有成功。

1.  重新安装 ADT
2.  清理项目
3.  重启日食

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:11:30.060

是的，XML 文件可能是罪魁祸首，但也要确保在文件顶部也有一个导入语句。**此处编辑**是典型的 java 文件开头，您需要在我的评论所在的地方进行 R 导入

```
package your.package.name;

import your.package.name.R;    // make sure you have this line
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:37:28.567

If you have an error in your XML file then R.java will not be generated. Try cleaning your project and look for any signs of errors on your XML files.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T11:35:04.147

我有同样的问题。未生成 R.Java（在 gen 文件夹中）。xml 文件中没有错误。问题是我没有完全更新 sdk。在 SDK 管理器中，只要启用“安装包”按钮，我们就需要安装包，然后关闭并打开 sdk 管理器以检查更新。关闭并重新打开 eclipse 并检查 eclipse 中的更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:10:19.047

验证 XML 文件的语法。问题可能不在 MainActivity.java 中。如果您的任何 XML 文件有错误，则不会生成 R 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T19:35:03.073

如果您使用的是 Eclipse，请删除您的类中的 R 类导入并按 `CTRL + SHIFT + O`，它将自动导入您的类。如果它建议您移动而不是一个 R 类，请从您的项目中选择一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-15T19:01:29.073

看到这个问题[Eclipse give error, missing R.java file after recent update](https://stackoverflow.com/questions/16608524/eclipse-giving-error-missing-r-java-file-after-recent-update?lq=1)，如果您最近安装了 ADT，可能会对您有所帮助

# c# - 如何避免 C# 中的命名空间和源文件名冲突？

> ID：14653332
> 
> 赞同：0
> 
> 时间：2013-02-01T19:07:08.183
> 
> 标签：c#

我有一门课，假设它叫“Apples”。假设该类位于名为“Apples”的文件夹中的 .cs 文件中

```
Project
   -Apples
       -Apples.cs
   -main.cs 
```

我如何在不写此内容的情况下引用它：

主文件

```
Apples.Apples.testVar = 2; 
```

然后写

主要.cs：

```
Apples.testVar = 2; 
```

有没有办法做到这一点，还是我必须忍受它或更改文件夹名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:08:51.383

把它放在文件的顶部 -

`using Apples = Apples.Apples;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:51:27.077

如果您在 Visual Studio 中有一个文件夹并在其中创建一个类，Visual Studio（可能还有其他 IDE）会自动将该文件夹的名称附加到从该文件夹创建的任何文件的命名空间中。

这并不意味着命名空间必须保持这种状态。“文件夹”纯粹是出于组织目的，不参与代码的编译。文件名也与实际代码无关。如果您查看 Apples.cs 只需更改：

```
namespace Apples.Apples
{
     //.... 
```

到

```
namespace Apples
{
    //... 
```

这只是您的 IDE 用作假设您想要什么的规则。您不需要遵循它。

编辑：至少这是我认为的误解，因为您专注于文件夹名称 - 这对代码没有任何意义，只对您很重要。此外，如前所述，您可能会对命名空间名称和类名称之间的歧义感到困惑。正如其他答案中提到的，将类命名为与其名称空间相同是一个坏主意。

默认情况下，您的项目的全局命名空间将与您的项目同名。因此，如果您将项目命名为“Apples”，然后创建了一个名为“Apples”的文件夹并在该文件夹中创建了一个名为“Apples”的类 - 然后您将按照命名空间链导航到您的类：

```
Apples.Apples.Apples 
```

您得出的结论是，您必须根据文件夹/文件名执行此操作，但实际上是命名空间/类。您在这里有几个选项，但底线是为了消除混乱和混乱 2 或所有 3 个“苹果”需要更改。更改文件名或文件夹名将不起作用。您必须更改类名和至少一个命名空间名称。更合适的东西：

```
AppleProject.Apples.AppleBase 
```

甚至简单到：

```
Apples.Apple // removed the extra namespace in the middle 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:08:10.967

您可以在 using 语句中为“Apples”起别名：

```
using Apples = Apples.Apples.testVar; 
```

或者任何你想让它更容易阅读的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:08:51.967

是的，如果您使用的是 C#，您只需将其添加到您所在的代码文件顶部的 using 引用中：

例如：

使用 Apples.Apples；

如果项目集不在当前项目中，您只需要确保您拥有对项目集的引用。

# r - 如何使用 RcppArmadillo 绘制多项分布样本？

> ID：14653336
> 
> 赞同：4
> 
> 时间：2013-02-01T19:07:24.560
> 
> 标签：r, rcpp, armadillo

问题是我有一个变量`arma::mat prob_vec`并且想要与`rmultinom(1, 1, prob_vec)`R 中相同的东西。

我找到了`rmultinom`RcppArmadillo 提供的函数有一个奇怪的参数要求，这与 R 中的不同！所以它不会通过编译。

我只是想知道如何在 RcppArmadillo 或等效地在 Armadillo 中绘制所需的样本。如果我需要获取指针或转换我的`prob_vec`变量，请告诉我如何。

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:20:05.577

您在这里的友好社区合著者`RcppArmadillo`：我可以向您保证，它不提供`rmultinom`，但 Rcpp 提供。事实上，它只是简单地传递给 R 本身，就像快速`grep`告诉你的那样：

```
 inline void rmultinom(int n, double* prob, int k, int* rn) 
         { return ::rmultinom(n, prob, k, rn); } 
```

所以我建议你首先针对 R API 编写一个五行 C 程序，以确保你知道如何`rmultinom`做你想做的事情，然后使用 Rcpp 和 RcppArmadillo 对向量中的数据做同样的事情.

# asp.net - 如何将文本框的值分配为下拉值的一部分？

> ID：14653342
> 
> 赞同：0
> 
> 时间：2013-02-01T19:07:48.183
> 
> 标签：asp.net, vb.net

我有`GridView` `DropDownList`：

```
<asp:TemplateField HeaderText="Employer">
    <ItemTemplate>
        <asp:DropDownList ID="txtEmployer" runat="server" AutoPostBack="true"
            OnSelectedIndexChanged="SelectedIndexChanged">
            <asp:ListItem>Select</asp:ListItem>
            <asp:ListItem Value="AllScripts">AllScripts</asp:ListItem>
            <asp:ListItem Value="Contractor">Contractor</asp:ListItem>
            <asp:ListItem Value="Other">Other</asp:ListItem>
        </asp:DropDownList>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server"
            ControlToValidate="txtEmployer" ErrorMessage="*"
            InitialValue="Select"></asp:RequiredFieldValidator>
    </ItemTemplate>
</asp:TemplateField> 
```

还有一个`TextBox`：

```
<asp:TemplateField HeaderText="Other">
    <ItemTemplate>
        <asp:TextBox ID="txtOther" runat="server" TabIndex="435"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator7" runat="server"
            ControlToValidate="txtOther" ErrorMessage="*"
            SetFocusOnError="True"></asp:RequiredFieldValidator>
    </ItemTemplate>
</asp:TemplateField> 
```

`TexBox`默认情况下，隐藏在上`PageLoad`。

当用户选择“其他”选项时，该选项`TextBox`变为可见，允许用户输入他/她想要的任何值。到目前为止，这工作得很好。

我们可以成功收集到的值`DropDownList`并成功插入到数据库中。

但是，我们正试图弄清楚如何插入 的值`txtOther` `TextBox`和 insert 作为`DropDownList`. 希望最后一句话是有道理的。

我尝试了以下方法：

```
Dim table As DataTable = TryCast(ViewState("CurrentTable"), DataTable)

If table IsNot Nothing Then
    For Each row As DataRow In table.Rows
        Dim txLName As String = TryCast(row.ItemArray(1), String)
        Dim txName As String = TryCast(row.ItemArray(2), String)
        Dim txEmail As String = TryCast(row.ItemArray(3), String)
        Dim txRole As String = TryCast(row.ItemArray(4), String)
        Dim txPhone As String = TryCast(row.ItemArray(5), String)
        Dim drpEmpl As String = TryCast(row.ItemArray(6), String)
        If drpEmpl = "Other" Then
            drpEmpl = txtOther.Text
        Else
            drpEmpl = TryCast(row.ItemArray(6), String)
        End If 
```

我收到一个`txtOther.Text`未声明且可能无法访问的错误。

`drpEmpl`是 的名称`DropDownList`。

我努力了：

```
drpEmpl = gridview1.FindControl("txtOther") 
```

但同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:47:21.963

这是我会尝试的。

1.  用户在 txtOther 中输入文本并提交页面
2.  获取用户提交者并将其存储到 viewstate 变量中（如果需要更多值，一些数组可能是最好的）
3.  修改您的 txtEmployer 并为 OnLoad 添加事件处理程序
4.  在 OnLoad 的事件处理程序中，您只需为下拉列表添加另一个选项。

    ```
    foreach (string s in ArrayOfPreviouslyAddedValues){

        ddl.Items.Add(new ListItem(s, s));
    } 
    ```

另一种选择是将所有选项的所有值存储在某个后台源（数据库或其他任何东西）中，并以编程方式将值数据绑定到您的下拉列表。

这是 C#，但您明白这一点。

# video - jQuery绑定：在媒体结束之前运行函数

> ID：14653346
> 
> 赞同：6
> 
> 时间：2013-02-01T19:08:02.350
> 
> 标签：video, bind, media, jquery

我正在构建一个简单的 php 页面，该页面使用 HTML5 视频和 jQuery 绑定函数来播放视频播放列表，以便在当前视频结束后淡入和播放下一个视频。

将函数绑定到*结束*的事件效果很好，但我想在视频结束前 20 秒触发淡入和播放功能（比如说）。

但我似乎无法弄清楚如何让这种魔法发生。这甚至可能吗？

我的 HTML：

```
<video controls preload="auto">
<source src="sequence01.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
</video>

<video controls preload="auto">
<source src="sequence01.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
</video> 
```

我的 jQuery：

```
$('video').bind("ended", function(){
   $(this).fadeOut(20000).next().fadeIn(20000).get(0).play(); 
}); 
```

* * *

# **解决了！**

```
$('video').on('timeupdate', function(event) {
  var current = Math.round(event.target.currentTime * 1000);
  var total = Math.round(event.target.duration * 1000);

  if ( ( total - current ) < 20000 ) {
    $(this).fadeOut(2000).next().fadeIn(2000).get(0).play();
  } 
}); 
```

*非常感谢大家的帮助，我能够使用您的精彩评论和其他看似无关*的 SO 帖子拼凑出一个答案：

[未捕获的类型错误：对象 [object Object] 没有方法“addEventlistner”](https://stackoverflow.com/questions/13572527/uncaught-typeerror-object-object-object-has-no-method-addeventlistner)

如果有人有一种更简洁的方式将它们组合在一起，那就太棒了，但这对于我的目的来说似乎工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:28:03.370

我给出的第一个答案有一些问题。我已将其修改为正确

```
var myVid = document.getElementById("video1");

myVid.addEventListener('timeupdate', function() {
    if( (myVid.duration - myVid.currentTime ) < 20000 ) {
        console.log("less than 20 seconds left"); 
    }
}); 
```

这要求您为视频标签提供一个 ID，并且应将 console.log 替换为您想要在函数中执行的任何操作。但是我已经对此进行了测试，并且效果很好。

在您的情况下，您将需要运行一个循环并将事件绑定到每个视频，但请确保您引用实际视频而不是其属性之一，例如长度或项目。

如果您将此代码复制并粘贴`<script>`到此示例的“自己尝试”部分的标签中，它将起作用。

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_av_event_progress](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_av_event_progress)

这是视频对象属性和事件的参考

[http://www.w3schools.com/tags/ref_av_dom.asp](http://www.w3schools.com/tags/ref_av_dom.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:14:10.487

您可以使用以下任何一种：

```
$('video').currentTime;
$('video').duration; 
```

我不会写代码，但你应该检查一下

```
if ( ( this.duration - this.currentTime ) < 20000 ) 
```

查看[http://dev.opera.com/articles/view/custom-html5-video-player-with-css3-and-jquery/](http://dev.opera.com/articles/view/custom-html5-video-player-with-css3-and-jquery/)

# javascript - Node.js 不能创建 Blob？

> ID：14653349
> 
> 赞同：109
> 
> 时间：2013-02-01T19:08:13.643
> 
> 标签：javascript, html, node.js, audio

我正在使用 node.js，并将我的音频流式传输到我的 node.js 服务器。现在我在构建音频 blob 的过程中注意到：

```
var audioBlob = new Blob([dataview], { type: 'audio/wav' }); 
```

我在新的 Blob 处得到一个 ReferenceError。似乎不支持 Blob。如何创建一个我想用 node.js fs 模块保存的 blob。

多谢你们！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-06T19:43:23.667

解决这个问题的方法是创建一个可以在 Array Buffers 和 Node Buffers 之间转换的函数。:)

[将二进制 NodeJS 缓冲区转换为 JavaScript ArrayBuffer](https://stackoverflow.com/questions/8609289/convert-a-binary-nodejs-buffer-to-javascript-arraybuffer)

在最近的节点版本中，它只是：

```
let buffer = Buffer.from(arraybuffer);
let arraybuffer = Uint8Array.from(buffer).buffer; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-11-16T23:35:35.140

从 Node.js 16 开始，[`Blob`](https://nodejs.org/dist/latest-v16.x/docs/api/buffer.html#buffer_class_blob)可以导入：

```
import {Blob} from 'node:buffer';

new Blob([]);
//=> Blob {size: 0, type: ''} 
```

否则，只需使用`cross-blob`：

```
import Blob from 'cross-blob';

new Blob([]);
//=> Blob {size: 0, type: ''}

// Global patch (to support external modules like is-blob).
globalThis.Blob = Blob; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-08-30T10:28:46.707

> ##### *注意：此答案仅适用于您想遵循 Richie Bendall 的答案。*

## 简短的回答：

**避免`Blob`从`'node:buffer'`**.

相反，更喜欢像这样导入它（如[NodeJS 文档中所述。（](https://nodejs.org/api/buffer.html#buffer_class_blob)[此处](https://nodejs.org/api/buffer.html#buffer_blob_objects_and_messagechannel)的实现示例））：

```
import { Blob } from 'buffer'; 
```

## 长答案：

Richie Bendall 的回答对我帮助很大。但似乎`Blob`从`node:buffer`中断 Jest 单元测试导入，抛出此错误：

```
 FAIL  dist/tests/unit/users/getOneById.spec.js
  ● Test suite failed to run

    ENOENT: no such file or directory, open 'node:buffer'

      2 | import config from '../config/config';
      3 | import { getFileExt, getFileName, removeFile } from './file';
    > 4 | import { Blob } from 'node:buffer';
        | ^
      5 |
      6 | class PdfHelpers {
      7 |

      at Runtime.readFile (node_modules/jest-runtime/build/index.js:2118:21)
      at Object.<anonymous> (src/helpers/pdf.ts:4:1) 
```

我没有尝试使用一些奇怪/棘手的代码来模拟`node:buffer`导入，而是查看了 NodeJS 文档示例。所以它表明`Blob`可以从`'buffer'`

```
import { Blob } from 'buffer';

// ...

// Only the import is changing, don't change your existing implementation
const blob = new Blob([buf], { type: 'application/pdf' }); 
```

所有 Jest 错误都已消失！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-01T18:40:22.277

另一个要考虑的解决方案是使用**Base64 字符串**将数据从服务器传输到客户端。

我正在开发一个 Node.js 项目，在该项目中我以 ArrayBuffer 的形式接收音频数据，并且我想在浏览器中发送和播放该数据。我的大部分挣扎来自尝试将 ArrayBuffer 发送到客户端或尝试转换 ArrayBuffer 并发送 Buffer。

最终对我来说是一个简单的解决方案是

1.  在服务器上将 ArrayBuffer 转换为 Base64 编码的字符串
2.  从服务器返回/发送 Base64 字符串到客户端
3.  在客户端创建一个音频元素/对象并播放声音

我使用[base64-arraybuffer](https://www.npmjs.com/package/base64-arraybuffer)来执行 ArrayBuffer > Base64 String 转换（不过，在没有包的情况下执行此操作可能很简单）。

我使用[此处](https://stackoverflow.com/questions/17762763/play-wav-sound-file-encoded-in-base64-with-javascript)的提示在客户端创建音频元素。

*我在测试限制方面没有做太多 - 所以我不知道这如何处理大型音频文件。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-01T19:31:34.480

作为建议，您可能想阅读以下内容：http: [//howtonode.org/really-simple-file-uploads](http://howtonode.org/really-simple-file-uploads)

我的意思是我想我不知道你想做什么。可能没有用于 blob 的模块，但是如果您只想将某些内容写入磁盘，则可以使用 fs 模块.. 此代码不能直接工作，但是..

```
var fs = require('fs')
  , express = require('express')

app.post('/upload', function (req, res) {
  // asynch call to write file to disk
  fs.write("/tmp/file.mp3", req.params.body, function (err) {
    if (err) console.log(err)
  });
  res.end();
}); 
```

只需将 mp3 或其他任何内容发布到 /upload，它就会将其写入磁盘。你可以做任何你想做的验证。

# jquery - 编辑器在生产环境中的 jQuery 1.9 中可以完美地工作吗？

> ID：14653353
> 
> 赞同：0
> 
> 时间：2013-02-01T19:08:18.430
> 
> 标签：jquery, jquery-plugins, redactor

我可以访问的最新版本的编辑器使用 jQuery 的 1.7 版本。由于我在部署中使用 1.9，我想问问社区是否有人在 1.9（或 1.8）上完成了 redactor 并遇到任何问题 - 或缺乏问题？

谢谢！

# maven - Maven：是否可以有多个 settings.xml 文件？

> ID：14653358
> 
> 赞同：0
> 
> 时间：2013-02-01T19:08:45.310
> 
> 标签：maven, maven-2

我有一个多模块项目。所有的模块，但一个是不同的。文件中有一些东西`settings.xml`我希望在一个模块中与其他模块不同。

是否可以有两个`settings.xml`文件并将它们用于不同的模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:39:01.020

Think of the `settings.xml` as the configuration for your installation of maven. It determines the behavior of maven across it's use in your various projects.

This being said, if an individual project, i.e. a pom, requires something unique, it should be in that pom.

I think the thing to remember is that the project should be able to build on an individual dev's machine without any special intervention. In other words, the ideal case is that a given pom can successufl execute `mvn install` in a vanilla environment. So, don't put something in it that requires tweaking for a dev to get it to work. Also don't put anything in your `settings.xml` that enables a project to build, but then puts the burden on other devs to know what secrets are in your `settings.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:33:31.573

您可以在各个 pom 文件中设置不同的内容。pom 文件中的内容将覆盖设置中的内容。例如，如果您的子 poms 设置不同的存储库，它们将用于 settings.xml 中定义的内容。Settings.xml 是默认值，没有其他适用。根据您想要做什么，您还可以查看配置文件功能。

# c++ - 对象特定的 ArrayList C++ 问题

> ID：14653360
> 
> 赞同：0
> 
> 时间：2013-02-01T19:08:48.003
> 
> 标签：c++

我目前有一个 Person 类，并创建了一个扩展 List 的 PersonList 类，专门用于 Person 类型的对象。当我实例化一个新的 PersonList 时，我收到一个错误，导致整个构建无法成功发生：

错误 C2678：二进制“==”：未找到采用“Person”类型左侧操作数的运算符（或没有可接受的转换）c:\program files\microsoft visual studio 11.0\vc\include\xutility 3186 1控制台应用程序3

这是 PersonList 类：

```
#pragma once
#include<iostream>
#include<sstream>
#include<string>
#include<algorithm>
#include "linearList.h"
#include "myExceptions.h"
#include "changeLength1D.h"
#include <Person.h>

using namespace std;

template<class Person>
class PersonList: public linearList<Person> 
{
public:
PersonList(int initialCapacity = 10);
PersonList(const PersonList<Person>&);
~PersonList() {delete [] element;}

bool empty() const {return listSize == 0;}
  int size() const {return listSize;}
  Person& get(int theIndex) const;
  int indexOf(const Person& theElement) const;
  void erase(int theIndex);
  void insert(int theIndex, const Person& theElement);
  void output(ostream& out) const;

  // additional method
  int capacity() const {return arrayLength;}

  protected:
  void checkIndex(int theIndex) const;
        // throw illegalIndex if theIndex invalid
  Person* element;            // 1D array to hold list elements
  int arrayLength;       // capacity of the 1D array
  int listSize;          // number of elements in list
  };

template<class Person>
PersonList<Person>::PersonList(int initialCapacity)
{// Constructor.
if (initialCapacity < 1)
{ostringstream s;
  s << "Initial capacity = " << initialCapacity << " Must be > 0";
 throw illegalParameterValue(s.str());
}
arrayLength = initialCapacity;
element = new Person[arrayLength];
listSize = 0;
 }

template<class Person>
PersonList<Person>::PersonList(const PersonList<Person>& theList)
{// Copy constructor.
arrayLength = theList.arrayLength;
listSize = theList.listSize;
element = new Person[arrayLength];
copy(theList.element, theList.element + listSize, element);
}

template<class Person>
void PersonList<Person>::checkIndex(int theIndex) const
{// Verify that theIndex is between 0 and listSize - 1.
if (theIndex < 0 || theIndex >= listSize)
{ostringstream s;
s << "index = " << theIndex << " size = " << listSize;
throw illegalIndex(s.str());
}

}

template<class Person>
Person& PersonList<Person>::get(int theIndex) const
{// Return element whose index is theIndex.
 // Throw illegalIndex exception if no such element.
 checkIndex(theIndex);
 return element[theIndex];
 }   

 template<class Person>
int PersonList<Person>::indexOf(const Person& theElement) const
{// Return index of first occurrence of theElement.
 //  Return -1 if theElement not in list.

  // search for theElement
  int theIndex = (int) (find(element, element + listSize, theElement)
                     - element);

   // check if theElement was found
  if (theIndex == listSize)
   // not found
    return -1;
    else return theIndex;
    }

template<class Person>
void PersonList<Person>::erase(int theIndex)
{// Delete the element whose index is theIndex.
 // Throw illegalIndex exception if no such element.
 checkIndex(theIndex);

 // valid index, shift elements with higher index
 copy(element + theIndex + 1, element + listSize,
                            element + theIndex);

   element[--listSize].~Person(); // invoke destructor
  }

template<class Person>
void PersonList<Person>::insert(int theIndex, const Person& theElement)
{// Insert theElement so that its index is theIndex.
if (theIndex < 0 || theIndex > listSize)
{// invalid index
  ostringstream s;
  s << "index = " << theIndex << " size = " << listSize;
  throw illegalIndex(s.str());
}

// valid index, make sure we have space
 if (listSize == arrayLength)
  {// no space, double capacity
     changeLength1D(element, arrayLength, 2 * arrayLength);
     arrayLength *= 2;
  }

  // shift elements right one position
   copy_backward(element + theIndex, element + listSize,
             element + listSize + 1);

    element[theIndex] = theElement;

     listSize++;
    }

template<class Person>
void PersonList<Person>::output(ostream& out) const
{// Put the list into the stream out.
 copy(element, element + listSize, ostream_iterator<Person>(cout, "  "));
 }

// overload <<
template <class Person>
ostream& operator<<(ostream& out, const PersonList<Person>& x)
 {x.output(out); return out;} 
```

人物类：

```
#pragma once
#include <string>

using namespace std;

class Person
{
public:
Person(string firstName, string lastName, string birthday, string hometown);
Person(void);
~Person(void);
string name;
string birthday;
string hometown;
}; 
```

同样的事情发生在我之前尝试使用的 arrayList 类中。有没有办法得到它，所以我可以简单地将人员对象存储在 ArrayList 类型结构中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:25:47.583

您的函数`indexOf()`包含对 STL`std::find()`算法的调用，该算法在内部执行值对之间的比较，以确定作为第三个参数传递的元素是否包含在前两个参数定义的范围内。

要执行此比较，`std::find()`请使用`==`运算符。但是，没有`operator ==`为 类型的对象定义`Person`。

为了解决这个问题，您必须`==`为 的实例重载比较运算符`Person`。例如，您可以这样做：

```
class Person
{
    ...
public:
    friend bool operator == (Person const& p1, Person const& p2)
    {
        // Perform the comparison and return "true" if the objects are equal
        return (p1.name == p2.name) && ... 
    }
}; 
```

# asp.net - 如何将datagridview中的列连接到不同的sql表？

> ID：14653366
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:08:55.367
> 
> 标签：asp.net, datagridview

1.  我正在使用连接到我的数据库中的表的 datagridview。我想更改 dgv 中的一列，因为现在，我可以在此列中看到不同表的 id(fk)（dgv 仅显示 sql 中第一个表的信息）。 **我试图将这些列连接到不同的表以获取文本而不是 id。**

2.  当我从 gridview 中选择行时，我想在下拉列表中显示项目而不是值。

代码示例：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    accountIdTB.Text = accountsDGV.SelectedRow.Cells[1].Text;
    AccountTB.Text = accountsDGV.SelectedRow.Cells[3].Text;
    phoneTB.Text = accountsDGV.SelectedRow.Cells[4].Text;
    webSiteTB.Text = accountsDGV.SelectedRow.Cells[5].Text;
    string str = accountsDGV.SelectedRow.Cells[7].Text;
    industryDDL.ClearSelection();
    industryDDL.DataTextField = str;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:32:53.780

你能给我们一个你正在使用的 SQL 语句吗？很可能您可以通过使用 INNER JOIN 修改 SQL 查询以包含来自其他表的人类可读数据而不是显示外键 ID 来轻松完成此操作。

其他选项是使用上面使用的，并在每次更新所选索引时查询第二个表。

希望这会有所帮助，但请提供更多详细信息。SQL 语句和/或表结构。

# jquery - 如何不使用 SlidesJS 为标题设置动画

> ID：14653367
> 
> 赞同：1
> 
> 时间：2013-02-01T19:09:02.823
> 
> 标签：jquery

我正在使用 SlidesJS ( [http://www.slidesjs.com](http://www.slidesjs.com) )，除了两件事外，我已经按照我想要的方式工作了。一，我需要字幕不做与图像相同的动画。具体来说，我需要它们根本不设置动画，只需立即更改即可。[这是一个应该足够的jsfiddle](http://jsfiddle.net/bzrDK/42/)

我已将整个 slidesjs 位包含在 jsfiddle 的 javascript 部分中，因此您可以轻松地对其进行编辑。您调用的部分只是：

```
$(function(){
  $('.slides').slides({
    preload: true,
    preloadImage: '<?=STATIC_ROOT?>images/loading.gif',
    play: 5000,
    pause: 2500,
    hoverPause: false,
    effect: 'dpg',
  }); 
```

});

dpg 只是我制作的自定义效果，因此我不会删除滑动和淡入淡出的正常效果。

另一个不起作用的部分是动画第一次不起作用。在第一次过渡之后，它会按应有的方式工作。不过，我可能会弄清楚如何修复这部分，所以我主要需要第一部分的帮助，但如果你能在这两个方面都帮助我，我会额外加分。提前致谢。

# php - 如何获取“while”的值以包含唯一的数组

> ID：14653370
> 
> 赞同：0
> 
> 时间：2013-02-01T19:09:27.933
> 
> 标签：php, mysql, while-loop, explode, array-unique

桌子：

```
fungi  |  fruit  |  country

fungi-a       Aple, Orange, Grape,               Japan, America, China, Australia,

fungi-b       Aple, Watermelon, Grape,           Korea, America, China,

fungi-c       Aple, Watermelon, Orange,          Korea, Canada, China, America

fungi-d       Aple, Grape, Orange,               Japan, Canada,

include"config.php";

$result = mysql_query("SELECT * FROM `table` WHERE `fruit` LIKE
'%aple%' AND `country` LIKE'%korea%'");

function asd(){

 while($row=mysql_fetch_array($result)){

 echo $row['country'];

 } } echo implode(',',array_unique(explode(',',asd()))); 
```

**值为：**韩国、美国、中国、韩国、加拿大、中国、美国

**但我想要这个值：**韩国，美国，中国，加拿大，

我让 array_unique 爆炸但没有用，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:12:24.383

您没有在 asd() 返回任何值

这应该有效：

```
function asd() {
    $result = mysql_query("SELECT * FROM `table` WHERE `fruit` LIKE '%aple%' AND `country` LIKE'%korea%'");
    $countries = array();
    while($row=mysql_fetch_array($result)) {
        $countries = array_merge($countries, explode(',', $row['country']));
    }
    return array_unique($countries);
}
echo implode(',', asd()); 
```

这会将每个“国家”记录放入 $countries 数组并返回它。

您可能还应该看看 OOP 和 PDO（PHP 数据对象）或 MySQLi（改进的 MySQL）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:20:31.100

试试看

```
include"config.php";

$result = mysql_query("SELECT * FROM `table` WHERE `fruit` LIKE
'%aple%' AND `country` LIKE'%korea%'");

function asd(){

    $myarr = array();

    while($row=mysql_fetch_array($result)){

      if (!in_array($row['country'], $myarr)) {
        $myarr[] = $row['country'];
      }

    }
    return $myarr;
} 

echo implode(",", asd()); 
```

# ruby-on-rails - 如何避免“您确定要再次发送表单吗？”？

> ID：14653377
> 
> 赞同：2
> 
> 时间：2013-02-01T19:10:14.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中

用户可以像这样访问社区页面
`http://example.com/communities?tag=lovely`

然后，如果我尝试返回上一页。我总是收到这个消息

```
Are you sure you want to send a form again 
```

这仅在从 Safari 访问时出现

我怎样才能避免这种情况。我不希望用户每次返回时都看到它。

**路线.rb**

```
resources :communities 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:21:52.153

避免此问题的一种方法是使您的 POST 响应返回[重定向（HTTP 301 或 303）](https://stackoverflow.com/questions/4764297/difference-between-http-redirect-codes)到新页面，然后浏览器使用 GET 请求该新页面。返回应该（尽管并不总是）获取原始表单页面，而不是 POST。

在 Rails 中，这种绕行通常看起来像这样：

1.  客户端 GET`/foos/new`
2.  服务器返回 HTML`<FORM method='POST' action='/foos'>`
3.  客户端 POST `/foos`（带参数）
4.  服务器创建一个 ID 为 123 的新 Foo
5.  服务器返回重定向到`/foos/123`
6.  客户端 GET`/foos/123`
7.  服务器为新创建的 Foo 返回 HTML

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-01T08:38:06.897

只需添加

`window.location.replace("about:blank");`

# javascript - 跨浏览器方法确定选择导致文本区域模糊的锚标记

> ID：14653381
> 
> 赞同：1
> 
> 时间：2013-02-01T19:10:25.380
> 
> 标签：javascript, jquery, html, javascript-events

关于如何确定焦点“并发”到 textarea 的位置，这里有[几个](https://stackoverflow.com/a/121708/1028230)很好的[问题](https://stackoverflow.com/questions/7096120/how-to-determine-where-focus-went)`onblur`。

但是我还没有找到一种好的跨浏览器方法来确定单击了哪个锚标记导致 textarea 触发`onblur`，`setTimeout`或者没有。 `document.activeElement`看起来很有希望，但是，答案似乎相反，没有`setTimeout`,`activeElement`是不可靠的。在某些浏览器中，我不断收到`body`返回。`activeElement`

例如： [jsFiddle-ige #1](http://jsfiddle.net/Y5kcp/)：

**HTML**

```
<form>
    <input onblur="blurHandler();" type="text" id="spam1" 
        value="immediate blur check">
    <input onblur="blurHandlerTimeout();" type="text" id="spam2" 
        value="delayed blur check"> 
    <a href="#" id="spam3">X</a>
    <br>
</form>
<br>
<hr>
<br>
<div id="logs"></div> 
```

**JavaScript**

```
var logs = document.getElementById('logs');

function blurHandler() {
    logit(document.activeElement.outerHTML.substr(0, 80));
}

function blurHandlerTimeout() {
    setTimeout(function () {
        logit(document.activeElement.outerHTML.substr(0, 80));
    }, 10);
}

function logit(msg) {
    try {
        var e = document.createTextNode(msg), // probably a better way, but this does allow html as text
            f = document.createElement('div');

        logs.insertBefore(e, logs.firstChild);
        logs.insertBefore(f, logs.firstChild);
    } catch (err) {
        alert(err);
    }
} 
```

**立即模糊检查文本框中的用于模糊的正文元素每次都会出现以下情况：**

*   Safari 5.1.7（它根本不让我专注于锚点，标签或点击）
*   火狐 18.0.1
*   铬 24.0.1312.56 m,

将焦点设置到**延迟**模糊复选框并单击/切换到锚点会给我：

*   Chrome：如果单击锚点，则为**正文**
*   Chrome：如果我进入它的**锚点**
*   Safari：**身体**任何一种方式
*   Firefox：无论如何都是**锚**

**IE8 每次都会**为每个文本框、延迟处理程序或否给我一个锚点。

所以诚然，有一些方法可以让锚在共享范围级别（例如，全局）设置一个布尔值，并从模糊事件查询中获得一个 setTimeout 布尔值来查看锚 [最近] 是否获得焦点，但是天哪，那是笨拙的。

就是说，我做到了，付出或接受，在这里：[jsFiddle-ige #2](http://jsfiddle.net/Y5kcp/2/) 似乎在所有四个中都可以正常工作，尽管我担心这将是极端情况下的疯狂。

有没有更好的方法来做到这一点？jQuery 很好，我想，虽然我更喜欢干净的 JavaScript 解决方案——也就是说，干净的 jQuery 解决方案比复杂的 JavaScript 修复更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:42:08.953

[`document.activeElement`](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement)只要您`tabindex`在锚标记上指定属性，延迟检查就适用于所有浏览器。`a`，默认情况下，没有标签顺序，所以我认为那些能够`a`在没有该属性的情况下“聚焦”的浏览器行为不端。

根据[HTML5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#attr-tabindex)：

> **tabindex 内容属性允许作者控制一个元素是否应该是可聚焦**的，它是否应该可以使用顺序焦点导航来访问，以及为了顺序焦点导航的目的，元素的相对顺序是什么。

*（强调我的）*

```
<form>
    <input onblur="blurHandler();" type="text" id="spam1" 
        value="immediate blur check">
    <input onblur="blurHandlerTimeout();" type="text" id="spam2" 
        value="delayed blur check"> 
    <a href="#" id="spam3" tabindex='1'>X</a>
    <br>
</form>
<br>
<hr>
<br>
<div id="logs"></div> 
```

**更新小提琴：http:** [//jsfiddle.net/Y5kcp/4/](http://jsfiddle.net/Y5kcp/4/)

在 IE8/9、FF 18.0.1、Chrome 24.0.1312.56 m、Safari 5.17 中测试

这纯粹是猜测，但也许 IE 表现得很好，因为[HTML4 规范`tabindex`](http://www.w3.org/TR/REC-html40/interact/forms.html#adef-tabindex)没有提到“可聚焦性”作为一个特性：

> 此属性指定当前元素在当前文档的跳位顺序中的位置。

在这种情况下，也许遵循 HTML 4 规范的浏览器可以允许锚标记在有或没有 tabindex 属性的情况下是可聚焦的。

还值得注意的是，这`document.activeElement`是一个专有的 IE4 功能（请参阅MDN 文章的**注释**`document.activeElement`以获取）。也许这就是为什么它会在 Internet Explorer 中没有超时的情况下运行。

# vb.net - 如何在不打开 Excel 的情况下将 ExcelPackage 保存到本地路径？

> ID：14653387
> 
> 赞同：0
> 
> 时间：2013-02-01T19:10:57.757
> 
> 标签：vb.net, epplus

我正在尝试将使用 EPPLUS 创建的 ExcelPackage 输出到文件路径，而 Excel 不会实际打开文件。我现在有下面的代码......我做错了什么？谢谢。

```
 Dim FileName As String = "C:\Temp\" + CurrAcct + ".xlsx"
 Dim Result As New MemoryStream()
 xlPackage.SaveAs(Result)
 Context.Response.Clear()
 Context.Response.ContentType = "application/vnd.openxmlformats-      officedocument.spreadsheetml.sheet"
 Context.Response.AddHeader("Content-Disposition", "attachment;filename=" + FileName + ".xlsx")
 Result.WriteTo(Context.Response.OutputStream)
 Context.Response.End() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:14:03.337

您需要使用 FileStream 将其保存到本地磁盘。

这是一个 stackoverflow 示例：[另存为使用 EPPlus？](https://stackoverflow.com/questions/12912912/save-as-using-epplus)

# ruby-on-rails - 使用 Twitter Bootstrap 和 Cocoon 的标签链接的唯一嵌套子标识符

> ID：14653390
> 
> 赞同：4
> 
> 时间：2013-02-01T19:11:05.797
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form, nested-forms, cocoon-gem

我有一个 Ruby on Rails 应用程序，其中一部分包含 Twitter Bootstrap 选项卡，用户可以使用 Simple Form 和 Cocoon 添加该部分的多个实例。

为了使选项卡链接正常工作，我必须为部分的每个新子项中的选项卡设置唯一名称（以便单击特定选项卡会激活其自己的唯一内容，而不是在前一个子部分出现在同一页面上）。

我在这里看到将代码添加到 Cocoon 以实现此目标：[https](https://github.com/nathanvda/cocoon/pull/100) ://github.com/nathanvda/cocoon/pull/100 。

在那次讨论中，有迹象表明新功能已在 Cocoon Simple Form Demo 项目中进行了试用。但是在尝试新功能的过程中所做的任何更改都没有在那里提交（至少据我所知）。

查看 github 上的提交，似乎已经在 Cocoon javascript 代码中通过将 '[contentNode]' 添加到 'insertionNode.trigger' 调用（[https://github.com/woto/cocoon/提交/cb206d501e4749a05e0c1d868911da159c8200c1](https://github.com/woto/cocoon/commit/cb206d501e4749a05e0c1d868911da159c8200c1)）：

```
insertionNode.trigger('cocoon:before-insert', [contentNode]); 
```

我对这些东西不是很老练。

那么，如何为嵌套子项的每个新实例实现/获取唯一标识符？

任何帮助或方向将不胜感激。

这是我的应用程序中的代码供参考：

-# /app/controllers/parent_records_controller.rb

```
class ParentRecordsController < ApplicationController

  # GET /parent_records/1/edit
  def edit
    @parent_record = ParentRecord.find(params[:id])
    @parent_record.items.build
  end
end 
```

-#/app/views/parent_records/_form.html.haml

```
.row-fluid
  =simple_form_for(@parent_record, :wrapper => :inline4, :html => {:class => 'form-inline', :multipart => true}) do |f|
    .row-fluid
      = f.simple_fields_for :items do |item|
        =render :partial => '/parent_records/form_partials/item', :locals => { :f => item }
      .row
        .span2.offset9
          = link_to_add_association 'Add Another Item', f, :items, :class => 'btn btn-primary', :partial =>     'parent_records/form_partials/item'
    = f.button :submit , :class => 'btn btn-success' 
```

-#/app/views/parent_records/form_partials/_item --- **--- TAB HREF 名称是我需要唯一标识符的地方 ---** ---

```
.nested-fields
  .well.span
    .tabbable
      %ul.nav.nav-tabs
        %li.active
          %a{"data-toggle" => "tab", :href => "#tab1"} Item Info 
        %li
          %a{"data-toggle" => "tab", :href => "#tab2"} Pictures

      .tab-content
        #tab1.tab-pane.active
          = f.input :short_name,:label => 'Item Title'
          = f.input :brand,:label => 'Brand'
          = f.input :description,:label => 'Description' 

        #tab2.tab-pane
          = f.simple_fields_for :pictures do |picture|
            =render :partial => '/parent_record/form_partials/picture', :locals => { :f => picture }
          .span2.offset9
            = link_to_add_association 'Add A Picture', f, :pictures, :class => 'btn btn-primary', :partial =>     'parent_records/form_partials/picture'
      .span2
        = link_to_remove_association "Remove Item", f, :class => 'btn btn-danger' 
```

-#/app/views/parent_records/form_partials/_picture

```
.nested-fields  
  .well.span
    = f.input :image,   :label => 'Seclect Image to be Uploaded'
    = f.input :rank,    :label => 'Image Rank for this Item'
    .row
      .span2
        = link_to_remove_association "Remove Picture", f, :class => 'btn btn-danger' 
```

**编辑/后续问题：**

下面 Nathan 的回答适用于添加唯一标识符，但添加唯一标识符破坏了 Bootstrap 的选项卡功能。鉴于我的印象是 Bootstrap javascript 可能仅在文档最初加载时评估选项卡和链接之间的对应关系，这似乎是有道理的。

谁能指出我如何让​​ Bootstrap javascript 重新初始化并找到新的 id 和链接？

**编辑2**

事实证明（我认为）是 div`.well.span`分离`.nested-fields`并且`.tabbable`阻止了 Bootstrap 能够初始化新命名的`href`和选项卡 ID。疯狂的旅程，但最终令人满意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:54:36.490

首先，在[cocoon_simple_form_demo](https://github.com/nathanvda/cocoon_simple_form_demo/commits/master)项目中，您将看到最后一次提交添加了动画，使用了`cocoon:before-insert`or`cocoon:after-insert`事件。

该`after_insert`事件为您提供了插入的 DOM 元素，因此您可以对它做任何您喜欢的事情，例如填写一个唯一的 href。

所以在你的情况下，这将类似于以下内容（注意：完全未经测试的代码，但我希望它能让你继续前进）：

```
$('form').bind('cocoon:before-insert', function(e,item_to_be_added) {
    new_id = new Date().getTime();
    item_to_be_added.find('a[href="#tab1"]').attr('href', "#tab1_" + new_id);
    item_to_be_added.find('#tab1').attr('id', "tab1_" + new_id);
    // do the same for #tab2
}); 
```

这只是标准的 jquery DOM 操作。希望这可以帮助。

您可以在插入后重新触发选项卡行为（这需要在插入后，否则没有用处）：

```
 $('form').bind('cocoon:after-insert', function(e,item_to_be_added) {
       $('nav-tabs a').click(function(e) {
         e.preventDefault();
         $(this).tab('show');
       }); 
   }); 
```

你已经应该有这样的代码了？另一种选择是使用 better `on`，如下所示：

```
$('form').on 'click', '.nav-tabs a', function(e) {
    e.preventDefault(); 
    $(this).tab('show');
}); 
```

这应该只需要在加载页面时执行一次，并且在添加选项卡时这将继续工作。

HTH。

# c# - 将子文件夹放入 Resources 文件夹 Visual Studio C# Windows Form

> ID：14653391
> 
> 赞同：2
> 
> 时间：2013-02-01T19:11:15.777
> 
> 标签：c#, winforms

我在资源文件夹 (Properties.Resources) 中创建了一个文件夹。我如何使用那里的图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T19:22:44.453

通常在添加资源时，会为该资源生成类型安全的包装器。

假设我添加了一个名为“图片”的图像，我可以通过以下方式访问：

```
Form.picturebox1.Image = Properties.Resources.picture; 
```

希望这可以帮助

编辑：

再次阅读您的帖子后，我认为您的意思是您在资源文件夹下的解决方案文件夹中添加了一个子文件夹。

我不建议这样做，因为通过资源设计器添加诸如图像之类的资源要简单得多，如果您一心想要创建子文件夹，则必须在 .resx 的根标记下添加一行看起来像这样的文件...

```
<data name="picture" type="System.Resources.ResXFileRef, System.Windows.Forms">
<value>..\Resources\*SubDirectory*\picture.png;System.Drawing.Bitmap, System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
</data> 
```

其中*SubDirectory*替换为您创建的子文件夹的名称。然后，您应该能够编译并使用 Properties.Resources.picture，如上所示。

# .htaccess - 多个站点与 htaccess 并保持分开

> ID：14653396
> 
> 赞同：0
> 
> 时间：2013-02-01T19:11:44.013
> 
> 标签：.htaccess, mod-rewrite, subdirectory

我在同一个地方托管了 2 个站点：domain1.com 和 domain2.com

起始位置是它们都指向根目录。

/root/subdirectory1/ 包含 domain1.com 的文件 /root/subdirectory2/ 是我的其他站点的目录。

domain1.com 应该选择 /subdirectory1/ 文件夹中的文件。domain2.com 应该选择 /subdirectory2/ 文件夹中的文件。我也不希望能够访问 domain1.com/subdirectory2/ 因为它们是单独的网站。此外，任何非 www 的 URL 都应转发到 www。版本。

我要求不高？我在网上看到的大部分内容都有助于其中的一部分，但不是全部。似乎最好不要在此粘贴我的捣碎尝试，而是寻求帮助。

我在根 .htaccess 文件中尝试了以下内容...

```
RewriteEngine on
Options +FollowSymLinks
RewriteBase /
# Site 1
RewriteCond %{HTTP_HOST} ^domain1.com$ [NC]
RewriteCond %{REQUEST_URI} !^/subdirectory1/.*$
RewriteRule ^(.*)$ /subdirectory1/$1 [L]
# Site 2
RewriteCond %{HTTP_HOST} ^domain2.com$ [NC]
RewriteCond %{REQUEST_URI} !^/subdirectory2/.*$
RewriteRule ^(.*)$ /subdirectory2/$1 [L] 
```

然后在 subdirectory1 .htaccess 文件中...

```
RewriteEngine On
RewriteRule ^subdomain2/(.*)$ http://www.domain1.com/$1 [R=301,L] 
```

但我仍然无法让它按要求工作。请帮忙（而且我无权使用此网络空间制作虚拟主机。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:34:30.147

如果可能，请将 domain2 文件夹移到 domain1 文件夹之外。你会很高兴你做到了。

将其放入 domain1 文件夹中的 .htaccess 文件中：

```
RewriteEngine On
RewriteRule ^domain2/(.*)$ http://www.domain2.com/$1 [R=301,L] 
```

如果您在 domain2 文件夹中有一个 .htaccess 文件，请添加以下内容：

```
RewriteEngine On
RewriteOptions Inherit 
```

根据您对 site1 的其他规则，您可能不想继承它们。在这种情况下，只需将第一个 RewriteRule 放在两个 .htaccess 文件中。

现在...所有这些都假设您的网站已经在 domain1.com 和 domain2.com 呈现。如果您试图让它们渲染，这些都无济于事。您需要首先正确渲染域，这需要@N1xx1 和@David 提到的虚拟主机设置。这需要通过您的控制面板软件或与您主机的支持人员一起完成。

# java - 返回 json 对象时出现 NullPointerException

> ID：14653402
> 
> 赞同：2
> 
> 时间：2013-02-01T19:12:01.600
> 
> 标签：java, android, json, nullpointerexception, return

我正在尝试发布 json 对象，然后尝试接收 json 对象。通过嗅探器显示该帖子并获得成功的作品。但接收对象始终为空。我想这是因为我的粗心，所以我希望你能帮助我。

```
 try {
        DefaultHttpClient httpclient = new DefaultHttpClient(ccm, params);
        HttpPost httppostreq = new HttpPost(URL);

        StringEntity se;
        se = new StringEntity(jsonObjSend.toString());
        //se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        se.setContentType("application/json;charset=UTF-8");
        //se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json;charset=UTF-8"));
        httppostreq.setEntity(se);

        //Setting headers
        HttpResponse response = httpclient.execute(httppostreq);

        HttpEntity entity = response.getEntity();

        if (entity != null) {
            InputStream instream = entity.getContent();
            Header contentEncoding = response.getFirstHeader("Content-Encoding");
            if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
                instream = new GZIPInputStream(instream);
            }
            // convert content stream to a String
            String resultString= convertStreamToString(instream);
            instream.close();
            resultString = resultString.substring(1,resultString.length()-1);

            // Transform the String into a JSONObject
            JSONObject jsonObjRecv = new JSONObject(resultString);

            return jsonObjRecv;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;

private static String convertStreamToString(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line).append("\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

这是 Activity 的一部分，我在行中不断收到 NullPointerException 错误`JSONObject jsonObjRecv = JSONPost.SendHttpPost(URL, jsonObjSend);`：

```
// Send the HttpPostRequest and receive a JSONObject in return
JSONObject jsonObjRecv = JSONPost.SendHttpPost(URL, jsonObjSend);
    try {
        jsonObjRecv.getJSONObject("id"); //Here I got the error
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

当我将 jsonObjRecv 类型更改为 String 时，它开始工作，但我需要 JSON 类型。

错误：

```
02-01 21:39:01.673: ERROR/AndroidRuntime(20855): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Phone/com.Phone.MainActivity.OtherActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2781)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
    at android.app.ActivityThread.access$2300(ActivityThread.java:135)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:143)
    at android.app.ActivityThread.main(ActivityThread.java:4914)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.Phone.MainActivity.OtherActivity.onCreate(OtherActivity.java:47)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
    ... 11 more 
```

谢谢您的答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:19:02.647

您在 JSONPost.SendHttpPost 中遇到异常，导致它返回 null。这意味着当您尝试对结果调用 getJSONObject 时，您会得到一个空指针异常。看起来您正试图通过 SendHttpPost 函数在 onCreate 中执行 HTTP 请求。这是不允许的——你不能在 UI 线程上做网络 IO，它会抛出一个异常。您需要在线程或 AsyncTask 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:40:00.127

检查这个[库](http://loopj.com/android-async-http/ "异步 HTTP 客户端")。它将轻松帮助您获取和解析正确的 JSON 响应。具体来说，它为 JSON 请求提供了一个非常简洁的**JsonHttpResponseHandler 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:00:34.270

HttpEntity 实体 = response.getEntity();'

这是返回您的任何数据吗？在使用响应对象之前在那里放置一个空检查。您还为 sendhttppost 中的异常返回 null

# javascript - javascript中的简单在线编辑器

> ID：14653407
> 
> 赞同：0
> 
> 时间：2013-02-01T19:12:22.337
> 
> 标签：javascript, editor, contenteditable, google-wave

我正在寻找一些用 javascript 编写的引擎，允许用户在“盒子”中写入。这个想法是创建类似于 Google 文档但没有编辑选项的东西（因此，不允许粗体和那种东西）。

我不是在寻找类似`contentEditable`javascript 中的选项的东西，因为它有点取决于浏览器。这就是为什么我需要一些自己的实现。这`WaveProtocol`也不是我要找的。例如，它更像是[typewith.me 之](http://typewith.me)类的东西。

你们知道一些引擎或我可以使用的东西吗？使用客户端部分就足够了。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:30:25.650

听起来您正在寻找[所见即所得的编辑器](http://www.jquery4u.com/plugins/html5-wysiwyg/)。

如果我必须推荐一个，我会使用[tinyMCE](http://www.tinymce.com/tryit/full.php)，因为它是开源的并且有据可查/支持。

# java - 使用 Java Netscape Directory LDAP API 和二进制过滤器值

> ID：14653410
> 
> 赞同：2
> 
> 时间：2013-02-01T19:12:24.867
> 
> 标签：java, ldap

我试图找出是否有人熟悉如何在搜索过滤器中针对 LDAP 中的 userCertificate 属性使用二进制值。我知道如何使用旧的 JNDI API 来做到这一点，但我很好奇是否有人可以帮助我在 Netscape Directory SDK (netscape.ldap) 中解决这个问题。

JNDI API 示例：

```
byte[] userCert = Base64.decodeBase64(base64Certificate);
Hashtable<String, String> env = new Hashtable<String, String>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, ldapURL);
env.put(Context.SECURITY_PRINCIPAL, username);
env.put(Context.SECURITY_CREDENTIALS, password);
InitialDirContext context = new InitialDirContext(env);
SearchControls controls = new SearchControls();
controls.setSearchScope(SearchControls.SUBTREE_SCOPE);
controls.setReturningAttributes(fetchArray);
Enumeration<SearchResult> results = context.search(baseDN, "userCertificate={0}", new Object[] {userCert}, controls); 
```

我*想做*的是使用以下 API，但是上面的代码没有得到任何结果：

```
byte[] userCert = Base64.decodeBase64(base64Certificate);
LDAPConnection ld = new LDAPConnection();
ld.connect(ldapURL, ldapPort);

ld.authenticate(username, password);

LDAPSearchResults results = ld.search(baseDN, LDAPConnection.SCOPE_SUB, "(userCertificate;binary=" + base64Certificate + ")",
                fetchArray, false); 
```

我尝试使用/不使用 ;binary 修饰符，并尝试了二进制和 base64 值。但是，如果我编写一个自定义方法将字节数组转换为“\xx”字符串格式，那么会起作用*。*这似乎有点骇人听闻，而且可能很慢，所以我想知道是否有一种 API-native 方式来进行这样的二进制搜索。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T21:59:41.480

如果您想为数据类型显示为二进制十六进制值（相应的数据类型通常称为“八进制字符串”）的属性编写过滤器，那将是完全不同的事情。

如果要过滤此类二进制属性，则必须声明必须以十六进制代码进行比较的每个字节。例如，如果您搜索属性为“Inventory”且值为 0x01AAF5EF 的对象，则相应的过滤器必须为：

```
(Inventory=\01\aa\f5\ef) 
```

不幸的是，搜索二进制属性时不允许使用通配符搜索！

[试试这个链接了解更多](http://www.ldapexplorer.com/en/manual/109010000-ldap-filter-syntax.htm)

# php - 如何将主菜单项链接到提要项？德鲁巴 7

> ID：14653411
> 
> 赞同：0
> 
> 时间：2013-02-01T19:12:26.150
> 
> 标签：php, mysql, drupal

Drupal 7.x，我使用提要和提要新闻模块来导入和显示 RSS 提要。链接到主菜单项的每个提要，例如：`node/1484`. 但是当点击主菜单项时，这个打开的“查看”选项卡是空的，因为提要项目位于“查看项目”选项卡上：`node/1484/feed-items` 如何将主菜单项链接到“查看项目”选项卡中的提要项目，以直接显示提要项目？最有效的方法是什么？

# visual-studio-2012 - 在 Visual Studio 2012 中重命名 Monodroid 文件

> ID：14653415
> 
> 赞同：2
> 
> 时间：2013-02-01T19:12:46.097
> 
> 标签：visual-studio-2012, xamarin.android

我正在为 Android 和 Visual Studio 2012 使用 Mono。我注意到，如果我创建一个新文件并忘记在创建时命名它，那么我右键单击然后重命名该文件，资源设计器不会注意到任何更改（我找不到我创建的任何 ID）。但是，如果当我创建一个新文件时，我从一开始就给它一个正确的名称，资源设计器确实知道更改。

事实上，似乎重命名文件实际上会创建一个新文件，而 ResourceDesigner 仍在查看原始文件。

如何在 Visual Studio 和 Mono for Android 中重命名文件，以便资源设计器知道查看它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T00:43:22.790

这似乎在 Xamarin.Android (4.8.01013) 的当前稳定版本中工作。但是，在我处理添加文件和重命名的过程中，有时 IDE “丢失”了 BuildAction 应该是什么文件。

仔细检查：

> 右键单击文件 -> 属性 -> BuildAction

如果希望在 Resource.Designer 中，请将操作设置为“AndroidResource”

# filenet-p8 - 在启动步骤中获取系统字段

> ID：14653416
> 
> 赞同：0
> 
> 时间：2013-02-01T19:12:52.300
> 
> 标签：filenet-p8, filenet-process-engine

我需要在启动工作流之前获取系统字段，以使它们可供用户设置。F_subject 和 F_Comment 等字段

```
filenet.vw.api.VWWorkflowDefinition workflowDefinition = vwSession.fetchWorkflowDefinition(-1, workClassName, true);
filenet.vw.api.VWFieldDefinition []fieldDefinitions = workflowDefinition.getFields(); 
```

在上面的代码中使用了在工作流定义上调用 getFields 方法，它只返回 F_trackers

我可以通过硬编码来制作这些字段，但我不喜欢那样。需要这方面的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:22:24.257

您是否尝试获取步骤元素参数？例如，在启动工作流时：

```
VWStepElement stepElement = vwSession.createWorkflow(workflowName);
stepElement.getParameters(VWFieldType.ALL_FIELD_TYPES, VWStepElement.FIELD_USER_AND_SYSTEM_DEFINED); 
```

# azure - Windows Azure：删除连接到不存在的 VM 的磁盘

> ID：14653421
> 
> 赞同：7
> 
> 时间：2013-02-01T19:13:38.460
> 
> 标签：azure, azure-storage, azure-virtual-machine, azure-vm-role

刚刚发现由于很久以前删除的虚拟机的废弃磁盘，我正在占用并支付大量存储空间。我设法删除了其中的大部分，但现在我遇到了一组无法删除的问题，因为它们仍然连接到无处可寻的虚拟机上。

任何想法如何摆脱这些磁盘，也许是 PowerShell 技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T02:07:20.487

如果我理解正确，删除虚拟机后，它会删除服务，但会在磁盘下保留 VHD 映像的副本。因此，请转到虚拟机下的**磁盘**选项卡并尝试将其删除。

如果不是这种情况，请在您尝试删除 VM 的位置添加带有错误消息的屏幕截图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-25T20:52:42.473

在“新”Azure 门户中。选择存储帐户，然后单击未使用的 VHD 所在的存储帐户，单击服务下的 Blob，单击 Essentials 下的 vhd，搜索不需要的 vhd，然后单击删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T20:16:25.647

我能看到的唯一方法是通过`PowerShell`. 我遇到了同样的问题，这就是我解决它的方法。我安装了 Azure`PowerShell`扩展并配置了我的订阅，然后是我的存储帐户。一旦我这样做了，我就运行了这个命令

```
get-azuredisk | Remove-AzureDisk 
```

`Get-azuredisk`将抓取所有磁盘在我的情况下，我需要将它们全部移除。如果您需要单独操作，则需要获取磁盘的名称，然后`remove-azuredisk`使用名称开关运行并指定磁盘名称以将其删除。那为我修好了。希望这对将来的某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T15:30:29.507

我无法使用 (2016) 门户网站删除我的（经典）存储帐户中的孤立磁盘。此处的答案有效，但此处是使用 PowerShell 删除这些孤立磁盘的更详细的演练。

### 电源外壳

如果您还没有，请下载并安装 PowerShell。（[安装和配置 Azure PowerShell](https://azure.microsoft.com/en-us/documentation/articles/powershell-install-configure/)。）此文档链接的初始步骤：

*   安装后检查 Azure PowerShell 模块是否可用：
    `Get-Module –ListAvailable`

*   如果未列出 Azure PowerShell 模块，您可能需要将其导入：
    `Import-Module Azure`

*   登录到 Azure 资源管理器：
    `Login-AzureRmAccount`

### Azure发布设置文件

*   检索您的 PublishSettingsFile。
    `Get-AzurePublishSettingsFile`

    *   Get-AzurePublishSettingsFile 启动[manage.windowsazure.com](https://manage.windowsazure.com/publishsettings/index?client=powershell)并提示您下载可以保存在任何地方的 XML 文件。

    *   参考： [Get-AzurePublishSettingsFile 文档](https://msdn.microsoft.com/en-us/library/dn790375.aspx)
*   Import-AzurePublishSettingsFile 并指定刚刚保存的文件的路径。
    `Import-AzurePublishSettingsFile -PublishSettingsFile '<your file path>'`

### 显示和删除磁盘

*   显示当前磁盘。（参考：[Azure 存储 Cmdlets](https://msdn.microsoft.com/en-us/library/dn806401.aspx)）
    `Get-AzureDisk`

*   快速删除所有磁盘。（归功于[迈克的回答](https://stackoverflow.com/a/31842041/3182836)）
    `get-azuredisk | Remove-AzureDisk`

*   或按名称删除磁盘。（[归功于 Remove-AzureDisk 文档](https://msdn.microsoft.com/en-us/library/azure/dn495255.aspx)）
    `Remove-AzureDisk -DiskName disk-name-000000000000000000 -DeleteVHD`

# eclipse - 带有项目参考的 SBT 和 Eclipse？

> ID：14653424
> 
> 赞同：1
> 
> 时间：2013-02-01T19:14:02.047
> 
> 标签：eclipse, scala, maven, sbt, m2eclipse

我正在考虑从 Maven 切换到 SBT。在某种程度上，我想这样做，以便我可以将我的应用程序交叉部署到不同版本的 scala。

我经常发现在 Eclipse 中有项目引用很有用。但是，如果我使用`sbt sbteclipse`而不是 M2Eclipse 插件，我将不会在 Eclipse 中有项目引用，而是我所有的依赖项都来自常春藤缓存。

除了手动删除依赖项和添加项目引用之外，是否有一种简单的方法来获得项目引用？不幸的是，每次我更改 sbt 依赖项时都需要这样做，因为这样做需要我再运行`sbt sbteclipse`一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:18:37.043

是的，您可以让 sbteclipse 插件自动生成项目引用。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/14351940/setting-up-sbt-environment-to-hack-on-multiple-libraries-at-once/14352600#14352600)。

# python - 如何让 Python 2.4.3 具备提取 Python 2.6 引入的 ZIP 文件的能力？

> ID：14653427
> 
> 赞同：2
> 
> 时间：2013-02-01T19:14:08.413
> 
> 标签：python, zipfile

`ZipFile.extract(member[, path[, pwd]])`是 Python 2.6 中引入的新功能。出于某种原因，我需要在 Python 2.4.3 中实现 ZipFile.extract（2.4.3 不能处理 ZipFile，只能处理一些属性）。

我正在考虑在我需要使用提取函数的python脚本中显式导入[zipfile.py 。](http://hg.python.org/cpython/file/6074530b526f/Lib/zipfile.py)

我的考虑是我不知道 zipfile.py 中是否有任何与 Python 2.4.3 标准不兼容的新语法或新功能。

有另一种方法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:39:01.967

`ZipFile.extract()`可以使用`ZipFile.open()`、`open()`和来模拟`shutil.copyfileobj()`。该功能甚至可以`ZipFile`根据使用的 Python 版本进行猴子修补。

```
if PythonVersion < 2.6: # obviously not how it's done
  def myextract(self, member, path=None, pwd=None):
     ...
  zipfile.ZipFile.extract = myextract 
```

# c++ - 什么是静态类？

> ID：14653430
> 
> 赞同：1
> 
> 时间：2013-02-01T19:14:18.163
> 
> 标签：c++, static

> **可能重复：**
> [一个类可以在 C++ 中声明为静态的吗？](https://stackoverflow.com/questions/1635068/can-a-class-be-declared-static-in-c)

`static`之前放`class`的，还行。但是这是什么意思？

```
static class A
{
public:
    void F();

private:
    int i;
}; 
```

# eclipse - 在 Eclipse 中，如何从 SVN 中删除旧的或不需要的类文件

> ID：14653432
> 
> 赞同：1
> 
> 时间：2013-02-01T19:14:39.177
> 
> 标签：eclipse, svn

当我第一次开始我当前的项目时。我去了我们的 SVN 存储库。我在树干上创建了一个新分支。然后，我将现有分支（即当前项目的先前版本）复制到新分支。然后我将项目导入 Eclipse。

现在我目前的项目接近完成。我有很多类文件没有在新项目中使用。但是这些文件仍然是存储库的一部分。

我想弄清楚的是如何从我的项目中删除文件。这样我的项目的最新版本就不再显示它们了。我不想从存储库中删除文件，只是从最新版本中删除。

例子：

项目 - 修订版 1

A 级 B 级 C 级 O 级 - 旧 U 级 - 旧

想要删除文件并提交

项目 - 修订版 2

A类 B类 C类

但是如果发生了可怕的事情并且我需要恢复文件，我希望能够恢复到修订版 1

A 级 B 级 C 级 O 级 - 旧 U 级 - 旧

提交修订版 3

有人建议我 -> 右键单击​​文件 -> 团队 -> 删除 我在团队菜单中没有看到删除选项。

我可以，右键单击文件 -> 删除 -> 团队 -> 提交 -> 确保在列表中检查它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:13:33.010

假设您已使用 Subclipse 等 Subversion 客户端插件正确设置 Eclipse，并且它识别出您的项目存在于工作副本中，`svn rm`当您从项目树视图中删除文件时，它将自动为您处理任务。

如果您真的想确定，请转到命令行并运行`svn rm <file>`.

我建议`.class`从您的存储库中删除所有文件（以及任何其他构建的工件），并设置`svn:ignore`规则以防止将来添加它们。没有必要对这些进行版本控制，因为您已经对重建它们所需的所有内容进行了版本控制。

# java - 如何最好地同步访问 Java 中的一个类的两个线程

> ID：14653434
> 
> 赞同：0
> 
> 时间：2013-02-01T19:15:01.713
> 
> 标签：java, multithreading, synchronization

我有一个发送 SNMP 命令并侦听陷阱的程序。

我的第一种方法是协调 SNMP 的发送。一旦他完成发送，我需要他等到他收到陷阱已收到的通知，这样他才能继续运行。现在，我正在尝试通过同步一个全局对象来做到这一点，但它不起作用，我不确定它是否是我的理想解决方案。

```
public synchronized int loginUser(ScopedPDU pdu) throws IOException
{

    loginUserManager = new LoginUserManager();

    pdu = buildPdu();   

// send command
        errorStatus = snmpManager.snmpSend(pdu);

        if (errorStatus == SnmpManager.SNMP_PASS)
        {
            // Wait for traps
            synchronized(syncObject)
            {
// read global variable status to see if it's no longer in progress
                while(status == TrapStatus.INPROGRESS)
                {
                    try {
                        System.out.println("Waiting for login to be done");
                        syncObject.wait();
                        System.out.println("We received a notify");
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        } //(errorStatus == SnmpManager.SNMP_PASS)
        else
        {
            return TrapStatus.FAIL;
        }

    System.out.println("Returning status");
    return status;

} 
```

我的第二种方法是接收陷阱（并在与第一种方法不同的线程上运行）并获得我想要的正确状态，但我无法通知另一个线程。

```
public synchronized void readTrap(Vector v)
{
    Enumeration e = v.elements();

    if(v.contains(PduTrap.UserLoginStatusTrap))
    {
// gets status of login
        status = loginUserManager.getStatus(e);

        synchronized(syncObject)
        {
// notify first method to read the new status
            syncObject.notify();            
        }
    }
        } 
```

status 和 SyncObject 是我试图在线程之间共享的全局类型。我在类构造函数中将状态初始化为 INPROGRESS。

```
private int status;
private Object syncObject; 
```

有人可以告诉我为什么事情不正常，或者我是否完全以错误的方式解决这个问题？目前，我的 loginUser 方法没有被 readTrap 通知。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:39:26.583

Please make your syncObject Object, as final (private Object syncObject = new Object();); please note that synchronized block uses the Object reference; so in case if the Object reference get changed, you will not see the needed behavior.

Also, please remove synchronized from both the function, why you need it? If both the thread are working on same Object; it may cause issue. Please note that synchronized method use this reference for synchronization.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:19:03.403

您可能会考虑共享`BlockingQueue`，因此该`readTrap(...)`方法将`add()`进入队列（也许是新状态？）并且`loginUser(...)`来自`take()`队列。这会处理所有锁定和信号，而无需您进行等待/通知。

在调试代码方面，您需要确保`syncObject`是一个对象，以便等待和通知共享`private final`相同的对象*引用。*显然，如果他们使用不同的对象工作，那么您的代码将无法工作。

此外，您应该在块*内设置状态。*`synchronized`我不确定它在这里有什么不同，但是对代码至关重要的任何值都应该在互斥块中。您可以考虑在这两种方法中打印 status 的值，以确保它按照您的想法进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:32:35.337

这不是做这类事情的唯一方法，但人们通常认为这种流程是解决方案。（我希望这不是太抽象以至于没有意义。）

*--方法一--*

1.  做某事的一部分
2.  发出其他信号以异步执行某些工作
3.  在某些结果发生之前什么都不做
4.  完成你开始的事情
5.  将完成状态返回给其他代码。

可以通过这种方式完成，但通常比将其分成两组步骤的另一种方式要困难得多。

*--方法二--*

*A部分*

1.  做某事的一部分
2.  保存正在进行的工作
3.  发出其他信号以异步执行某些工作
4.  忘掉它

*B部分*

1.  得到通知，另一件事已完成。
2.  检索正在进行的工作
3.  做剩下的工作
4.  全部完成

注意一个关键的区别是，第一种方式，你实际上有结果状态，你可以返回到调用这些东西的代码。第二种方式，这两个部分不再同步，你不能这样做。

你想要做什么取决于调用者需要什么。

也许有一个需要执行的 SNMP 命令列表。如果是这样，您只需要*B 部分*在完成或标记失败时将事情从列表中标记出来，以便其他人可以重试或通知某些人。

也许对 SNMP 命令有一个排序，您必须按顺序执行一个，然后执行另一个。第一种方法适用于此，因为您可以按顺序进行调用。第二种方法更难，因为*B 部分*的异步完成将不得不查找然后启动序列中的下一个项目。这变得很复杂。

# java - 静态和动态链接沙箱

> ID：14653442
> 
> 赞同：2
> 
> 时间：2013-02-01T19:15:24.730
> 
> 标签：java, python, sandbox, static-linking, dynamic-linking

我试图在我的项目中使用[libsandbox](http://openjudge.net/~liuyu/Project/LibSandbox)。我能够在这个沙盒中完美地运行 c/c++ 程序。为了运行 c/c++ 程序，首先我必须将代码编译为：

```
g++  -lm  --static  <filename>  2> err.txt 
```

然后我必须使用上面编译的代码运行[示例沙箱程序。](http://ncu.dl.sourceforge.net/project/libsandbox/0.3.5/sample2.py)

请注意我上面使用的标志**--static**非常重要。 --static 的重要性反映在以下两个stackoverflow答案[Link1](https://stackoverflow.com/a/10957362/1348550)，[Link2](https://stackoverflow.com/a/10863494/1348550)

现在，我想将此沙箱用于 java 和 python。但我不知道 python 和 java的**gcc/g++ --static等价物。**

将以下作品？

```
 javac --static    <filename>  2> err.txt 

  python  --static  <filename>  2>err.txt 
```

*我再说一遍，我很困惑，因为我不知道 java 或 python 中的 --static 等价物。*

*谢谢！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:47:19.320

我认为你混淆了两件事。您的 Python 程序不是所谓的可执行文件`libsandbox`。可执行文件是 Python 解释器。

因此，您不能使用`libsandbox`.

但是，您*可以对 Python 解释器进行沙箱处理。*执行此操作的方式与对任何其他可执行文件进行沙箱处理相同。任何一个：

*   创建 Python 解释器的静态构建（包含您需要编译的任何 C 扩展模块），并在沙箱中运行它。这并不容易，但它是可行的，并且 Python 源代码树和其他地方的信息可能会有所帮助。
*   使用更宽松的沙箱，允许标准解释器做它需要的一切（可能包括动态加载扩展模块，取决于你是否需要），但仅此而已。

无论哪种方式，您都需要一些试验和错误来弄清楚您可以禁止什么和不能禁止什么，以及如何将不同的 Python 代码位映射到系统调用，等等。并且有些事情是您无法阻止脚本执行的，因为您不希望 Python 代码执行的相同系统调用对于解释器本身来说是必需的。

实际上，Java 也是如此。JVM 是可执行文件，而不是您的程序。而且你真的不能静态链接JVM，所以你只有第二种选择。

当然，除非您使用`gcj`将 Java 代码编译为本机代码而不是 JVM 代码。在这种情况下，您实际上使用的是与`gcc`and相同的后端`g++`，并且您只是`--static`用来确保`libgcj`其他所有内容都静态链接。您可能仍然会遇到问题，因为`libgcj`在幕后做的事情比`libc`……更多，但概念与 C 代码相同。

（JVM 本身有自己的访问模型，您可能可以在类加载器中使用反射构建一些东西，以在 Java API 级别而不是 linux 系统调用 API 上沙箱 Java 程序。我不知道这样的东西是否已经存在.)

* * *

> 每当我尝试在没有“--static”的情况下编译程序（我想在沙箱中运行）时，沙箱都不起作用。所以，再次 --static 非常关键，这超出了我的知识范围。

最有可能的是，您的实际代码不会打开任何文件，因此您使用的是禁止打开文件的默认沙箱设置。但是如果你动态链接你的程序，它必须打开`.so`文件来链接它们——这是行不通的，因为你的沙箱被配置为禁止它。

如果你静态链接同一个程序，问题就消失了，因为它不再需要打开任何`.so`s 来运行。简而言之，这就是沙盒静态链接的重点。你甚至在对你的问题的评论中解释了这一点，所以我无法想象你是怎么理解它的，除非你甚至不明白你为什么要禁止`SYS_open`以及这样做意味着什么。

> (a) 对于 java 和 python，如果我编译 w/o“--static”，沙箱会工作吗

是的，沙盒可以正常工作。这意味着，如果您使用默认配置，它将禁止您打开文件。这意味着您的 Java 或 Python 程序将失败，因为 VM/解释器必须打开（除其他外）您的程序才能运行它。

即使静态链接解释器或 JVM 也无济于事。您必须将程序的实际字节码静态链接到可执行文件中。并非不可能，但可能远远超出您此时想要考虑的任何事情。

正确的做法是弄清楚您要禁止哪些系统调用，以及为什么要禁止，并适当地配置沙箱。默认配置对您不起作用。

> (b)同一个开发者openjudge.net/~liuyu/Project/LibSandbox有一个叫pysandbox的沙箱

`pysandbox`只是配置和启动沙箱的一种更简单的方法。您不会在沙盒代码中使用它。（*另* [`pysandbox`](https://github.com/haypo/pysandbox#readme)一位开发人员在 Python 级别对您的代码进行沙箱处理。这可能对您有用，但它与系统调用沙箱不同。）

* * *

在这一点上，我不确定你甚至不知道你想要做什么。为什么要首先对代码进行沙箱化？你知道你的代码需要什么样的访问权限才能完成它需要做的事情吗？如果您知道自己要做什么，那么您确定系统调用级别的沙箱是执行它的正确级别，而不是像[`RestrictedPython`](http://pypi.python.org/pypi/RestrictedPython)? 在不知道您的实际用例的情况下，我什至无法猜测这些问题的答案。但是，如果您对所有这些问题都没有立即的答案，那么您将无法完成任何有用的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T19:08:02.280

可以使用`libsandbox`. 您需要处理一些系统调用，例如加载共享库和导入默认 python 模块。在 Richard Lobb 的项目`pysandbox`中可以找到 over Python3 解释器的工作示例，`CodeRunner`

[https://github.com/trampgeek/CodeRunner](https://github.com/trampgeek/CodeRunner)

Java 有自己的安全机制。因此没有必要将 Java VM 包装在沙箱中。

免责声明：我是`libsandbox`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T19:46:44.140

对于 Java，您唯一的选择似乎是使用静态绑定到它的 JNI 包装器。可能已经有这样的包装器，但如果你能写一个。

# msbuild - 删除除一个以外的所有目录 - MSBuild

> ID：14653446
> 
> 赞同：0
> 
> 时间：2013-02-01T19:15:30.220
> 
> 标签：msbuild, tfsbuild

我从那里有一个 TFS MSBuild 项目我正在尝试删除我不想从 MSBuild 中明确指定其名称的目录 [因为它们很多并且将来可能会更改] 但想要保留一个目录。

在下面的示例中，我想删除“Web”下的所有文件夹，但想保留“bin”目录。

```
-Web
    --bin
    --folder 1
    --folder 2
    --folder 3
    ...
    ...

    <ItemGroup>
  <OutputDirs Include="$(DropLocation)\$(BuildNumber)\Web\**\*.*" Exclude="$(DropLocation)\$(BuildNumber)\Web\bin" />
</ItemGroup> <RemoveDir Directories="@(OutputDirs)" /> 
```

上面的示例适用于文件但不适用于目录，是否可以使用排除选项而不指定要包含的目录。

提前致谢。

# php - 从动态形式插入多个数组

> ID：14653447
> 
> 赞同：3
> 
> 时间：2013-02-01T19:15:35.207
> 
> 标签：php

我一直在尝试使用此代码来获取两个数组以插入到 sql 数据库中。数据来自从 sql 表生成的表单。我的初衷是更新从问题和答案生成表单的表格。但是，我相信将它们插入新表会更容易，当需要信息时，我可以从该表中调用。无论哪种方式，都有两条重要的信息需要传输并准确排列。这些是问题来自的行和问题所附的采访ID。这是我的代码。

```
 $result = mysql_query("SELECT * FROM interviews WHERE id='$int'");
                        while($row = mysql_fetch_array($result)){ $a = $row[1]; $b =   $row[2]; $c = $row[3]; $d = $row[4]; $e = $row[5]; $f = $row[7]; $g = $row[8]; $h = $row[9]; }

                    $i = array();   
                    $result = mysql_query("SELECT * FROM dbinter WHERE interview_id='$int'");
                        while($row = mysql_fetch_array($result)){ $i[] = $row[2]; }

                    $l = array();   
                    $result = mysql_query("SELECT * FROM form_custom WHERE attached='$cid' && date='$e'");
                        while($row = mysql_fetch_array($result)){ $l[] = $row[0]; }

                    echo "<font style='font-size: 45px;'>$a $b</font>";

                                    echo "<p><font style='font-size: 20px;'>$c
                                    <br />$d</font></p>";

                    echo "<form method='POST' name='interview' action='interviewsheet.php?cid=$cid&int=$int&stat=proc'>";
                    echo "<div style='margin-top:50px;'><input type='submit' value='COMPLETE INTERVIEW'></div>";

                    foreach($i as $j){
                    $result = mysql_query("SELECT * FROM form WHERE id='$j'");
                    while($row = mysql_fetch_array($result)){ $k = $row[2]; $p = $row[0];}
                    echo "
                    <div style='margin: 20px;'>
                    <font styler='font-size: large; font-weight: bold;'>$k</font><br />
                    <textarea rows='5' cols='60' style='border: none;' name='q'></textarea>
                    <input type='hidden' name='qid' $value='$p'>
                    </div>
                    ";}

                    foreach($l as $m){
                    $result = mysql_query("SELECT * FROM form_custom WHERE id='$m'");
                    while($row = mysql_fetch_array($result)){ $n = $row[2]; $q = $row[0];}
                    echo "
                    <div style='margin: 20px;'>
                    <font styler='font-size: large; font-weight: bold;'>$n</font><br />
                    <textarea rows='5' cols='60' style='border: none;' name='qc'></textarea>
                    <input type='hidden' name='qcid' $value='$q'>
                    </div>
                    ";}
                    echo "</div>"; 
```

}

处理页面的其他代码是：

```
 $a = array();
    $a[] = $_POST['q'];
    $b = array();
    $b[] =$_POST['qc'];
    $e = array();
    $e[] = $_POST['qid'];
    $f = array();
    $f[] = $_POST['qcid'];

    $frm = "f";
    $frmc = "fc";

    foreach($a as $key=>$value){
        $avalue = mysql_real_escape_string($value);
        $evalue = mysql_real_escape_string($e[$key]);
        $sql = "INSERT INTO answers (qid,cid,inta,frm,ans) VALUES ('$evalue','$cid','$int','$frm','$avalue')";
                if (!mysql_query($sql,$con)){die('Error: ' . mysql_error());}
    }

    foreach($b as $key=>$value){
        $bvalue = mysql_real_escape_string($value);
        $fvalue = mysql_real_escape_string($f[$key]);
        $sql = "INSERT INTO answers (qid,cid,inta,frm,ans) VALUES ('$fvalue','$cid','$int','$frmc','$bvalue')";
                if (!mysql_query($sql,$con)){die('Error: ' . mysql_error());}
    }

    header("Location: hr.php?act=int&stat=pend");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T16:42:06.780

您在这里所做的是将数组设置为数组的第一个元素。

```
$a = array();
$a[] = $_POST['q'];
$b = array();
$b[] =$_POST['qc'];
$e = array();
$e[] = $_POST['qid'];
$f = array();
$f[] = $_POST['qcid']; 
```

那么`$a`将是长度上的单个元素，然后是一个等于的数组`$_POST['q']`

我同意上面关于使用的代码等的评论，但是坚持这个而不是上面的代码会给你一个可循环的数组......

```
$a = (array)$_POST['q'];
$b = (array)$_POST['qc'];
$e = (array)$_POST['qid'];
$f = (array)$_POST['qcid']; 
```

# google-maps-api-3 - 谷歌地图kml实现

> ID：14653450
> 
> 赞同：1
> 
> 时间：2013-02-01T19:15:54.777
> 
> 标签：google-maps-api-3, kml

这是根据 kml 显示地图的以下代码。

```
var myLatLng = new google.maps.LatLng(41.875696, -87.624207);
var mapOptions = {
  zoom: 11,
  center: myLatLng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var ctaLayer = new google.maps.KmlLayer('http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml');
ctaLayer.setMap(map); 
```

我需要的是使用解析 kml 在地图上显示它。我将在字符串中嵌入 kml 数据并传递给 api 以在地图上显示它。

我不希望从 url 或任何文件中获取 kml。我只想将 kml 嵌入此页面本身。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:16:17.110

[geoxml3 第三方解析器](https://github.com/geocodezip/geoxml3)有一个 parseKmlString 方法，该方法将获取包含 KML 的字符串，并将其作为本地 Google Maps API v3 对象（不是 KmlLayer，因此您失去了基于图块的渲染的好处，即 KmlLayer给你）。可能满足您的要求（取决于您的 KML 的复杂程度）。

# symfony - 翻译 __toString

> ID：14653455
> 
> 赞同：1
> 
> 时间：2013-02-01T19:16:16.330
> 
> 标签：symfony, doctrine-orm

我有这个实体的 __toString 方法：

```
/**
 * String
 * 
 * @return string
 */
public function __toString()
{
    // I Have:
    // (EMR132 - Escuela Superior Mariano Moreno) Primary - 3 Bº Degree - Afternoon Shift
    // I Want:
    // (EMR132 - Escuela Superior Mariano Moreno) Primario - 3er Grado Bº - Turno tarde

    $levels = array(
        'primary' => 'Degree',
        'secondary' => 'Year',
    );

    return sprintf("(%s) %s - %s %sº %s - %s Shift", // Translate Format
            $this->school, 
            ucfirst($this->level), // Translate (fixed values)
            $this->degree, 
            $this->division, 
            $levels[$this->level], // Translate (fixed values)
            ucfirst($this->shift)  // Translate (fixed values)
    );
} 
```

我需要在方法内翻译字符串。但是不可能在实体内部获得服务（翻译器）。

如何创建可翻译的 __toString 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:08:40.333

翻译是视图层的一个问题。我鼓励您只从该`__toString()`方法中输出英语，然后在显示它时获取它的翻译（即在视图层/模板中）。

# jquery - 我可以触发彩盒错误吗

> ID：14653456
> 
> 赞同：0
> 
> 时间：2013-02-01T19:16:18.127
> 
> 标签：jquery, colorbox

[我的页面](http://www.jacklmoore.com/colorbox)上有一个颜色框

我使用 ajax 来获取这个颜色框的内容。我在发出 ajax 请求之前执行了一些检查，以确保 url 有效。如果不是，我希望 colorbox 显示它的 xhr 错误，而不必进行不可避免地失败的 ajax 调用。

有没有办法做到这一点？

# php - 在另一台服务器上通过 PHP 获取 Ubuntu 服务器使用情况

> ID：14653457
> 
> 赞同：0
> 
> 时间：2013-02-01T19:16:33.977
> 
> 标签：php, linux, resources, cpu, ram

我有几个 Linux 服务器。我希望其中一个显示其他的资源使用情况。例如 CPU 负载、RAM（总、已用和可用）等。

我正在寻找的是可能从 Webmin（安装在所有服务器上）或可能通过 SSH 获取数据的 PHP 类或类似的。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:23:28.107

除非 Webmin 提供某种 api 类型的接口，否则您必须通过 ssh 登录到每个服务器并运行一组命令来获取所有数据。这可以使用`exec`或使用 PHP 中的 ssh 库来完成。

更有效的选择是让所有服务器每隔一段时间向中央数据库报告相关统计信息。然后，您可以查询该数据库以获取有关您正在寻找的任何统计信息的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:23:44.173

我能想到的优雅解决方案（众多解决方案之一）

在要监控的服务器上安装[zabbix客户端。](http://www.zabbix.com/)

在你的 PHP 中使用它：http: [//zabbixapi.confirm.ch/](http://zabbixapi.confirm.ch/)

# c# - 验证消息来自哪里？

> ID：14653460
> 
> 赞同：2
> 
> 时间：2013-02-01T19:16:41.577
> 
> 标签：c#, asp.net, asp.net-mvc

在一个新创建的MVC项目中，在Account Register页面中，如果我没有填写任何信息并点击Register按钮，我会看到

> • 用户名字段是必需的。
> 
> •密码字段是必需的。

这些是从哪里来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:18:44.353

如果您查看注册 ActionResult（在 AccountController.cs 中）

```
 [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid) // here it will check it lal
            {
                // Attempt to register the user
                try
                {
                    WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                    WebSecurity.Login(model.UserName, model.Password);
                    return RedirectToAction("Index", "Home");
                }
                catch (MembershipCreateUserException e)
                {
                    ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

您会看到 ModelState.IsValid，基本上它会检查或模型有任何验证问题。

该模型可以在 AccountModels 中找到

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

如您所见，它们都有一个 require 标签，因此它们将返回 false 并在其旁边显示它是必需的（当未填写时）

编辑：由于您想知道为什么是该文本而不是其他文本，因此它是默认文本，因此请询问 microsoft :)，无论如何，您可以通过将 ErrorMessage 参数添加到 Required 标记来随意修改文本。

例子：

```
[Required(ErrorMessage = "Hey you forgot me!")] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:32:21.307

实际的消息字符串存储在一个`MvcHtmlString`对象中，它是视图中调用的辅助方法调用`System.Web.Mvc.ModelStateDictionary.` 的方法的返回值。`ValidationExtensions``ValidationMessageFor()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:20:09.393

在顶部的 [required] 的关联模型中查找。

# c# - 使用 LINQ 更改集合中的项目

> ID：14653462
> 
> 赞同：7
> 
> 时间：2013-02-01T19:16:49.203
> 
> 标签：c#, linq

我有以下代码：

```
List<Car> allCars = new List<Car>
{
    new Car(1977, "Ford", "Pinto"),
    new Car(1983, "Ford", "Taurus"),
    new Car(1981, "Dodge", "Colt"),
    new Car(1982, "Volkwagen", "Scirocco"),
    new Car(1982, "Dodge", "Challenger")
};

Array.ForEach(allCars.ToArray(), Console.WriteLine);

// I want to do an "in-place" modification of an item in 
// the list
var query = allCars.Select(x =>
{
    if (x.Model == "Colt") return "Dart";
});

public class Car
{
    public int Year { get; set; }
    public string Make { get; set; }
    public string Model { get; set; }

    public Car(int year, string make, string model)
    {
       Year = year; Make = make; Model = model;
    }

    public override string ToString()
    {
        return string.Format("{0} - {1} {2}", Year, Make, Model);
    }
} 
```

现在我知道我可以做到这一点：

```
var query = allCars.Select(c => c.Model == "Colt"); 
```

或这个：

```
for (var item in allCars.Select(c => c.Model == "Colt"))
{
    item.Model = "Dart";
} 
```

或这个：

```
allCars.Single(c => c.Model == "Colt").Model = "Dart"; 
```

但是如何在列表中“就地”修改项目呢？

如果我有一个要修改的属性，我提到的最后一种方法会很好，但是如果我有两个呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T19:18:19.117

LINQ 是一种查询语言，它应该保持原始集合不可变。

还行吧

```
foreach (var item in allCars.Where(c => c.Model == "Colt"))
{
    item.Model = "Dart";
} 
```

请阅读[这篇文章，了解为什么它没有在 LINQ 中实现](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:32:30.740

```
foreach(var item in allCars.Where(c => c.Model == "Colt"))
{
    item.Model = "Dart";
} 
```

# android - 无法更改 Textview 的背景

> ID：14653464
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:16:56.073
> 
> 标签：android, timer, widget, textview

嗨，我在这里有一个时钟小部件，我希望它每 2 分钟更改一次背景，但是当我使用

```
R.id.widget_textview.setBackgroundResource(R.drawable.pic1); 
```

它说

```
Cannot invoke setBackgroundResource(int) on the primitive type int 
```

并且要改变它的背景，我需要在那里循环一个变量 i 和 if 条件，如果 1 使用 pic 1，然后等待 2 分钟，如果 2 使用 pic 2，如果 10 使用 pic 10 并且 i = 1 再次。有没有比这更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:19:38.613

将您的代码更改为：

```
TextView textview = (TextView)findViewById(R.id.widget_textview);
textview.setBackgroundResource(R.drawable.pic1); 
```

因为 R.id.widget_textview 是 textView 的 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:19:40.570

`R.id.widget_textview`是一个整数。

你首先需要做`findViewById(R.id.widget_textview)`的是得到`View`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:20:30.837

```
R.id.widget_textview.setBackgroundResource(R.drawable.pic1); 
```

你不能那样做。你必须做这样的事情：

```
TextView myTxt = (TextView) findViewById(R.id.widget_textview);
myTxt.setBackgroundResource(R.drawable.pic1); 
```

# c# - ASP.NET Razor 获取 URL 中的区域

> ID：14653465
> 
> 赞同：2
> 
> 时间：2013-02-01T19:17:17.280
> 
> 标签：c#, razor, asp.net-mvc-areas

有没有办法使用 ASP.NET Razor 语法从请求中获取区域组件？

```
http://localhost:12345/SomeController/SomeAction
http://localhost:12345/MyArea/AnotherController/AnotherAction 
```

我想使用 Razor 干净可靠地获取 URL 的“MyArea”部分。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:24:22.377

我实际上使用了这个：

```
var area = ViewContext.RouteData.DataTokens["area"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:41:01.390

我在另一篇文章中找到了这个：

[RouteValueDictionary 的字符串 URL](https://stackoverflow.com/questions/1481565/string-url-to-routevaluedictionary)

```
var request = new HttpRequest(null, "http://localhost:3333/Home/About", "testvalue=1");
var response = new HttpResponse(new StringWriter());
var httpContext = new HttpContext(request, response);
var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(httpContext)); 
```

然后获取该区域：

```
string area = routeData.DataTokens["area"].ToString(); 
```

或者，您可以只使用：

```
var action = RouteData.Values["area"]; 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:45:05.137

这应该为你做。

```
@ViewContext.Controller.ValueProvider.GetValue("area").RawValue.ToString() 
```

# html - 表格中的边框底部+圆角

> ID：14653468
> 
> 赞同：1
> 
> 时间：2013-02-01T19:17:38.123
> 
> 标签：html, css, css-tables

我正在尝试将 td 元素的圆角和 tr 元素的边框底部组合在表格中，以获得类似标签的外观（我无法更改 html 结构）。

演示：http: [//jsfiddle.net/VvdBQ/](http://jsfiddle.net/VvdBQ/)

代码：

```
table#one {width:100%;border-spacing:0;border-collapse:separate;}
tr {border-bottom:5px solid red;}
td {font-weight:bold;text-align:center;background:blue;border-radius:15px 15px 0 0;border:1px solid green;} 
```

我的问题（在 Chrome 中查看）：

*   拐角正确圆角，`border-collapse:separate`但我看不到底部边框
*   与之`border-collapse:collapse`相反

我怎样才能让角落和底部边框都正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:55:09.437

如果您使用`border-collapse:separate;`并将样式全部移动到`td`您应该能够通过以下方式获得所需的内容：

```
td {
    font-weight:bold;
    text-align:center;
    background:blue;
    border-bottom:5px solid red;
    border-top:1px solid green;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
} 
```

这里有一个小提琴：http: [//jsfiddle.net/digthedoug/qjLyZ/](http://jsfiddle.net/digthedoug/qjLyZ/)

# javascript - Javascript - 如何从二维数组中获取索引 [1] 元素的总和

> ID：14653469
> 
> 赞同：2
> 
> 时间：2013-02-01T19:17:48.780
> 
> 标签：javascript

为我的发展课做家庭作业。我的部分问题需要我创建一个多维数组 (2D) 并从每个嵌套数组中获取第二个元素的总和。我怎样才能做到这一点？这是我的数组：

```
var studentGrades = [['Bob', 85], ['Jim', 76], ['Steve', 92], ['Sue', 83], ['Liz', 65], ['Jack', 77], ['Jo', 96], ['Tim', 80], ['Mike', 53], ['John', 81]]; 
```

我需要把所有的数字加在一起。我意识到他们的索引是 [1]，但我不知道如何编写代码来将它们加在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:21:21.173

您必须使用 for 循环（项目）做一些事情，`i`并将一个`count`变量放在 for 循环之外。比使用索引`1` 作为计数，因为这是数字。

这应该可以帮助您完成作业。

更多信息

1.  [循环](http://www.w3schools.com/js/js_loop_for.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T19:01:36.790

使用 ECMAScript5[`Array.prototype.reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)将您的数组减少到该总和，

```
var sum = studentGrades.reduce(function(sum, pair) {
    return sum + pair[1];
}, 0); 
```

用 ECMAScript6[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/arrow_functions)美化它，

```
var sum = studentGrades.reduce((sum, pair) => sum + pair[1], 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:19:51.187

```
var sum = 0;
for(var x=0; x<arr.length; x++)
    sum += arr[x][1]; 
```

您只需使用 2 个索引括号，尽管第二个索引将始终为 1。这是不安全的，因为多维数组可以是锯齿状的，因此第二维没有固定大小。

```
var sum = 0;
for(var x=0; x<arr.length; x++)
    if(arr[x].length >= 2)
        sum += arr[x][1]; 
```

每次迭代添加检查内部数组的长度是更安全的路线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-18T14:17:30.653

你可以使用[Alasql](http://github.com/agershun/alasql) JavaScript 库来做到这一点：

```
var res = alasql('SELECT VALUE SUM([1]) FROM ?',[studentGrades]); 
```

[在 jsFiddle](http://jsfiddle.net/agershun/nebrsv1c/)试试这个例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T19:57:06.817

二维数组只是数组的数组。在您更好地掌握它们之前，我建议您写出如何访问它们的网格。例如，数组 a 有 3 个元素，每个元素包含两个元素（我们称之为 b）。索引看起来像这样

```
a0b0 a0b1 
a1b0 a1b1
a2b0 a2b1 
```

在你的情况下是

```
[['Bob', 85],
['Jim', 76],
['Steve', 92]] 
```

因此，要获得 Jims 的成绩，我们可以查看索引表，它将是 a1b1，它转换为 studentGrades [1][1]。要遍历双维数组，您先遍历行然后遍历列

```
for(var row = 0; row < a.length; row++){
    var b = a[row];
    for(var column = 0; column < b.length; column++){
        var accesingByRowAndColumn = a[row][column];
        var accesingByColumn = b[column];
    }
} 
```

如果您只是学习，我不建议您将一堆代码放在一起来产生解决方案，从长远来看，您只会伤害自己。了解问题和解决问题的工具。我曾辅导过一些人，如果问题需要从书中的代码示例中稍作调整，他们会吓坏并且不明白如何去做

# iphone - 在其他方法中引用以编程方式制作的对象

> ID：14653470
> 
> 赞同：2
> 
> 时间：2013-02-01T19:17:54.037
> 
> 标签：iphone, ios, objective-c, cocoa-touch, object

我`UIImageView`在方法中以编程方式制作了这个 ImageView () `viewDidLoad`。

```
 UIImageView *imageview = [[UIImageView alloc]initWithFrame:CGRectMake(110, 200, 100, 100)];
  imageview.image = [UIImage imageNamed:@"imageviewImage.png"];
  [self.view addSubview:imageview]; 
```

但是当我在`viewDidLoad`方法中创建这样的按钮时，我无法在同一类的其他方法中引用它。假设我想`IBAction`在同一个类的方法中将 ImageView alpha 更改为 0.0f。我不能像这样引用 imageview：

```
 -(IBAction) button {
  imageview.alpha = 0.0f;
  } 
```

如果我想在另一种方法中引用 ImageView，最简单的方法是什么？

PS： ImageView 必须以编程方式制作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:24:46.060

因为你在本地声明它。改为将其设为类的实例变量。

```
@interface MyClass: NSObject {
    UIImageView *imageView;
}

- (void)foo
{
    imageView = [[UIImageView alloc] init];
}

- (void)bar
{
    imageView.image = [UIImage imageNamed:@"baz"];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:28:30.517

问题是范围。您在 viewDidLoad 中创建的 imageView 指针只能在此处访问。创建属性或使用标签。

1）创建属性：

```
// top of the .m file
@interface MyClass () /* replace MyClass with your class name */
@property(strong, nonatomic) UIImageView *imageView;
@end

// in viewDidLoad, don't declare UIImageView *imageView, just replace
// all mentions of it with self.imageView; 
```

2）或使用标签：

```
// top of the .m file
#define kIMAGE_VIEW_TAG   128

// in viewDidLoad
UIImageView *imageview = [[UIImageView alloc]initWithFrame:CGRectMake(110, 200, 100, 100)];
imageview.image = [UIImage imageNamed:@"imageviewImage.png"];
imageView.tag = kIMAGE_VIEW_TAG;
[self.view addSubview:imageview];

// elsewhere in the code, when you want the image view
UIImageView *imageView = (UIImageView *)[self.view viewWithTag:kIMAGE_VIEW_TAG]; 
```

# mocking - Rhino 在使用 Where 模拟泛型时从 Castle Dynamic Proxy 模拟异常

> ID：14653471
> 
> 赞同：1
> 
> 时间：2013-02-01T19:17:56.400
> 
> 标签：mocking, rhino-mocks, castle-dynamicproxy

在模拟以下界面时，Rhino Mocks 3.6.0 和 3.6.1 有一个例外：

```
public interface ic
{
    IComponentConfig<TImpl> Bob<TSvc, TImpl>()
        where TImpl : TSvc;
} 
```

我可以确认在删除通用“where”关联时，它会正确模拟。

堆栈跟踪牢牢地指向 Castle Dynamic Proxy：

> System.BadImageFormatException 未被用户代码处理 HResult=-2147024885 Message=试图加载格式不正确的程序。（HRESULT 异常：0x8007000B） Source=mscorlib StackTrace：在 System.Reflection.Emit.TypeBuilder.TermCreateClass（RuntimeModule 模块，Int32 tk，ObjectHandleOnStack 类型）在 System.Reflection.Emit.TypeBuilder.CreateTypeNoLock() 在 System.Reflection.Emit .TypeBuilder.CreateType() at Castle.DynamicProxy.Generators.Emitters.AbstractTypeEmitter.BuildType() at Castle.DynamicProxy.Generators.Emitters.AbstractTypeEmitter.BuildType() at Castle.DynamicProxy.Generators.InterfaceProxyWithTargetGenerator.GenerateCode(Type proxyTargetType, Type[ ] 接口，ProxyGenerationOptions 选项）位于 Castle.DynamicProxy.DefaultProxyBuilder。`1.<GenerateMock>b__6(MockRepository r) at Rhino.Mocks.MockRepository.CreateMockInReplay[T](Func`2 createMock) 在 Rhino.Mocks.MockRepository.GenerateMock[T](Object[] argumentsForConstructor) 在 XXXXX.ConfigTestBase.SetUp() 在 c:\git\MyFork\Workspace\Db.Montage.Common.Tests\Config\ConfigTestBase。 cs：第 27 行内部异常：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:06:23.837

这是旧版本 DynamicProxy 中的一个老错误，很久以前就修复了。

不幸的是，似乎 Rhino Mocks 仍然没有将它对 DynamicProxy 的依赖更新到更新的版本，修复了这个问题。

我认为您的两个选择是构建一个自定义版本 od Rhino（针对新的 DynamicProxy）或使用另一个使用更新版本 DynamicProxy（如 NSubstitute、FakeItEasy 或 Moq）的模拟框架

# c# - 隔离存储并不总是保存我的设置

> ID：14653472
> 
> 赞同：2
> 
> 时间：2013-02-01T19:18:05.440
> 
> 标签：c#, windows-phone, isolatedstorage

在我的 Windows Phone 7 应用程序中，我有一些设置保存在 IsolatedStorage 中。这些设置可以通过我的应用程序的形式进行更改。我的问题是这些设置并不总是被保存。如果我使用主页按钮退出应用程序，然后再次打开它，有时我仍然看到旧设置而不是新设置。这是随机发生的，我的意思是，我做的事情完全相同，但有时设置会更新，有时不会。

所以我做了一些研究，发现了这个页面： http: [//msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save(v=vs.95).aspx)

“当使用该类的应用程序关闭时，写入到 IsolatedStorageSettings 对象的数据会保存。当用户关闭 Web 浏览器、刷新页面或浏览离开页面时，可能会发生这种情况。如果您希望应用程序写入隔离立即存储，您可以在应用程序代码中调用 Save 方法。”

所以我尝试使用 Save() 函数将更改立即保存在 IsolatedStorage 中。现在的问题是，当我在我的应用程序中单击“保存”按钮时，有时它会起作用，有时它会引发异常（再次完全随机）。该页面说只有当我的独立存储空间不足时才会引发异常，但是：

1.  我的 IsolatedStorage 几乎是空的，只有三个设置，我只更新它们的值。
2.  它随机发生，并非总是如此。

**所以我的问题是：如何安全地将数据保存在我的 IsolatedStorage 中以确保更改不会丢失？感谢您的关注。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:52:52.720

如果它在您的设备中随机发生，请确保您有足够的物理空间。您描述的异常似乎与此有关。

确保您保存的值是基本类型，如 int、double、string。

# java - 用于从 Collection 或 Iterable 中获取第 N 个元素的 Java 库

> ID：14653473
> 
> 赞同：10
> 
> 时间：2013-02-01T19:18:11.780
> 
> 标签：java

我有一个`Collection`并且需要获取其返回的第 N 个元素`Iterator`。我知道我可以在计算`Iterator`元素的同时进行迭代。是否有第三方库（Google Guava 或 Apache Commons）可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T19:20:45.797

番石榴[`Iterators.get`](https://google.github.io/guava/releases/15.0/api/docs/com/google/common/collect/Iterators.html#get(java.util.Iterator,%20int))可以提供帮助

> 将迭代器位置向前移动 + 1 次，返回第 positionth 位置的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:21:28.430

编辑：忽略这一点，阅读部分问题。

* * *

你可以这样：

```
for(int counter = 0; counter < max; counter++) 
    current = iterator.next(); 
```

之后，current 将是迭代器引入的顺序的最大元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-21T09:27:42.307

使用[Iterators.get(Iterator iterator, int position)](https://google.github.io/guava/releases/18.0/api/docs/com/google/common/collect/Iterators.html#get(java.util.Iterator,%20int))获取第三个元素的示例`myCollection`：

```
com.google.common.collect.Iterators.get(myCollection.iterator(), 3); 
```

*如果需要，使用上面的完全限定名称，例如在 Eclipse 的显示视图中。*

# java - 如何参数化这个原始 ArrayList

> ID：14653477
> 
> 赞同：0
> 
> 时间：2013-02-01T19:18:35.027
> 
> 标签：java, generics, arraylist

我有一个包含所有原始类型的遗留代码，我正在尝试删除原始类型。我有一个 ArrayList 对象，其中包含 String 数组、String 对象、Integer 对象。

```
List arLst = new ArrayList();
arlst.add(strngArr) //String Array
arrlst.add(intObj)  //Integer Object
arrlst.add(heyItsString) //String Object 
```

我将如何参数化它？具体来说，字符串数组的添加给我在为数组列表指定任何泛型类型时引起了问题。将不胜感激的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:20:28.680

在这种情况下，您唯一的选择是使其成为一个`ArrayList<Object>`（这样您就可以添加任何引用类型的元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:20:02.240

这三个类中常见的最小超类是 Object。因此，您可以这样做，或者将其保留为原始类型，因为（iirc）原始类型无论如何都采用对象。

# ruby-on-rails - JSON：Ruby 中的 ParseError

> ID：14653479
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:18:55.603
> 
> 标签：ruby-on-rails, ruby, json, sequel

我在 ruby​​ 中使用 sequel 和 json gem

当我尝试将记录转换为 json 对象并尝试获取其字段时，我的代码是

```
require 'json'
require "rubygems"
require "sequel"
require 'yaml'
require "sequel/extensions/pg_array"

DB = Sequel.connect('postgres://ritesh:newpassword@localhost')

pokes=DB[:use];
car = {:make => pokes.all, :year => "2003"}
cp = pokes.filter(:id =>1).first.inspect

jj = cp.to_json
puts jj
parseObject = JSON.parse(cp) 
```

在最后一行我收到错误

```
"{:id=>1, :first_name=>\"Ritesh\", :last_name=>\"Mehandiratta\", :email=>\"riteshmehandiratta@gmail.com\", :zipcode=>\"127021\", :comapnay_name=>\"heroku\", :google_profile=>\"google\", :skype=>\"helloworld\", :phone=>\"9013895056\", :about=>\"i am a great person\", :linkedin_profile_url=>\"linkedin.com\", :comapny_url=>\"company.com\", :needs=>[\"Web Designer\", \"Web Developer\", \"SoftWare Developer\"], :offering=>[\"Web Designer\", \"Web Developer\", \"SoftWare Developer\"], :upcoming_meetings=>[1, 2, 3, 4], :past_meetings=>[1, 2, 3, 4], :top_matches=>[1, 2, 3, 4]}"
/home/ritesh/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/json/common.rb:148:in `parse': 743: unexpected token at '{:id=>1, :first_name=>"Ritesh", :last_name=>"Mehandiratta", :email=>"riteshmehandiratta@gmail.com", :zipcode=>"127021", :comapnay_name=>"heroku", :google_profile=>"google", :skype=>"helloworld", :phone=>"9013895056", :about=>"i am a great person", :linkedin_profile_url=>"linkedin.com", :comapny_url=>"company.com", :needs=>["Web Designer", "Web Developer", "SoftWare Developer"], :offering=>["Web Designer", "Web Developer", "SoftWare Developer"], :upcoming_meetings=>[1, 2, 3, 4], :past_meetings=>[1, 2, 3, 4], :top_matches=>[1, 2, 3, 4]}' (JSON::ParserError)
    from /home/ritesh/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/json/common.rb:148:in `parse'
    from hello1.rb:15:in `<main>' 
```

当我按照答案中的建议解析 jj 变量时

```
jj = cp.to_json
puts jj
parseObject = JSON.parse(jj) 
```

然后我收到错误

```
"{:id=>1, :first_name=>\"Ritesh\", :last_name=>\"Mehandiratta\", :email=>\"riteshmehandiratta@gmail.com\", :zipcode=>\"127021\", :comapnay_name=>\"heroku\", :google_profile=>\"google\", :skype=>\"helloworld\", :phone=>\"9013895056\", :about=>\"i am a great person\", :linkedin_profile_url=>\"linkedin.com\", :comapny_url=>\"company.com\", :needs=>[\"Web Designer\", \"Web Developer\", \"SoftWare Developer\"], :offering=>[\"Web Designer\", \"Web Developer\", \"SoftWare Developer\"], :upcoming_meetings=>[1, 2, 3, 4], :past_meetings=>[1, 2, 3, 4], :top_matches=>[1, 2, 3, 4]}"
/home/ritesh/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/json/common.rb:148:in `parse': 743: unexpected token at '"{:id=>1, :first_name=>\"Ritesh\", :last_name=>\"Mehandiratta\", :email=>\"riteshmehandiratta@gmail.com\", :zipcode=>\"127021\", :comapnay_name=>\"heroku\", :google_profile=>\"google\", :skype=>\"helloworld\", :phone=>\"9013895056\", :about=>\"i am a great person\", :linkedin_profile_url=>\"linkedin.com\", :comapny_url=>\"company.com\", :needs=>[\"Web Designer\", \"Web Developer\", \"SoftWare Developer\"], :offering=>[\"Web Designer\", \"Web Developer\", \"SoftWare Developer\"], :upcoming_meetings=>[1, 2, 3, 4], :past_meetings=>[1, 2, 3, 4], :top_matches=>[1, 2, 3, 4]}"' (JSON::ParserError)
    from /home/ritesh/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/json/common.rb:148:in `parse'
    from hello1.rb:15:in `<main>' 
```

而不是 jj 中的 cp 仅在字符串中存在差异

```
'{:id=>1
'"{:id=>1 
```

注意两个错误但错误相同

为什么我收到此解析器异常错误这是一个有效的 json 字符串。我必须将其转换为哈希请告诉如何转换为哈希以及如何纠正此错误的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:22:56.133

我想你想解析 jj 而不是 cp ......

```
jj = cp.to_json
puts jj
parseObject = JSON.parse(jj) 
```

# java - 在 WebSphere Application Server v8.0 上发布失败

> ID：14653483
> 
> 赞同：1
> 
> 时间：2013-02-01T19:19:18.427
> 
> 标签：java, websphere-8, ibm-rad

我正在使用 RAD v8 并且我已经安装了 WAS v8.0 我可以启动服务器并且在它运行时我尝试发布 ear 文件它给了我以下错误：

发布遇到了一些问题，应用程序可能尚未安装，或者可能已成功安装但无法启动。ADMA0176E: excsEAR 的应用程序安装失败并出现 PrivilegedActionException。Ear 文件路径为 \SALSMOSXF03\Redir\GRQBB0\IBM\rationalsdp\workspace\excsEAR。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:15:04.140

我终于想通了！！愚蠢的我......我正在使用我的工作场所网络驱动器作为我的工作空间，我认为它是一个本地文件夹！一旦我在 C: 驱动器上创建了一个新工作区，一切正常.. WOOOHOOOO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T12:26:42.930

解决它的好方法从以下位置删除您的 {{application}}.ear

/opt/IBM/WebSphere/AppServer/profiles/{{profilename}}/config/temp/download/cells/applications

/opt/IBM/WebSphere/AppServer/profiles/{{profilename}}/config/temp/download/cells/cus

/opt/IBM/WebSphere/AppServer/profiles/{{profilename}}/config/temp/download/cells/blas

/opt/IBM/WebSphere/AppServer/profiles/{{profilename}}/config/cells/{{Nodename}}/applications

/opt/IBM/WebSphere/AppServer/profiles/{{profilename}}/config/cells/{{Nodename}}/blas

/opt/IBM/WebSphere/AppServer/profiles/{{profilename}}/config/cells/{{Nodename}}/cus

# android - Android Emulator CONNECT 隧道缺少预期的标头

> ID：14653484
> 
> 赞同：4
> 
> 时间：2013-02-01T19:19:24.503
> 
> 标签：android, eclipse, rest, cordova, fiddler

我正在编写一个针对 RESTful api 的 phonegap 应用程序。出于调试目的，我想看看我的 POST 和 GET 是什么样的。谷歌上的所有信息都说使用提琴手代理。我安装了 fiddler 并开始工作，设置了我的 android 模拟器以使用它，但是每当我开始查询 restful 服务时，数据包就会以某种方式被破坏（或者至少是它的授权部分）。

如果我没有代理，以下 JS 代码在我的 android 模拟器中可以正常工作：

```
$.post("https://blah.hi.com/homepage/security_check",
     $("#loginForm").serialize(), function (data, textStatus, jqXHR) {... 
```

但是当我让提琴手去，以便我可以分析我的 android 应用程序发出的请求时，我收到以下错误：

![在此处输入图像描述](../Images/908a68ae38bb6d22cc482c935632d922.png)

据我通过检查提琴手中的初始请求可以看出，进行了以下更改：

User-Agent、Connection 和 Host 标头被剥离。我尝试使用 Fiddler 规则手动添加它们，但这不起作用。

这是一个很好的比较：

![在此处输入图像描述](../Images/076e3ea43c6e72478b9898c53a7259e4.png)

此外，当我查看请求的 TextView 选项卡时，Extensions 下的以下标题被剥离（以下是使用 Chrome 时请求的样子，并通过 fiddler 并正常工作）：

![在此处输入图像描述](../Images/0b8c00afe53d03c4d80495574170c191.png)

现在这是通过 eclipse android 模拟器，通过 fiddler 并失败时的情况： ![在此处输入图像描述](../Images/db29d59bcdfcadc5588cd0a8552d6299.png)

我考虑过使用 WireShark，但所有通信都是通过 https 完成的，并且更喜欢使用 fiddler。

任何建议将不胜感激！！另外，我通过使用以下参数 -http-proxy 127.0.0.1:8888 从这里[http://vkosinets.com/blog/2011/08/16/debug-http-requests-from-android-emulator进入代理](http://vkosinets.com/blog/2011/08/16/debug-http-requests-from-android-emulator)

编辑：这是使用 Android 4.X 模拟器时的一些调试信息（也失败了）。 ![在此处输入图像描述](../Images/cecea6ce56138fd92b678830fc80d236.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:55:30.577

这很可能是针对旧的 Android SDK/Emulator 版本报告的问题：

[问题 12356：通过代理的 https 连接丢失标头](http://code.google.com/p/android/issues/detail?id=12356)

还值得检查相关问题中缺少的标题讨论：

[问题 3334：未通过 Wi-Fi 连接时，SSL 网站无法在浏览器应用程序中加载](http://code.google.com/p/android/issues/detail?id=3334)

根据[这篇文章](https://stackoverflow.com/questions/13885221/connectionkeep-alive-missing-from-header-for-android-versions-3-x-and-lower-fi)，这个问题似乎只存在于 Android 3.x 及更低版本：

> 此问题仅发生在 Android 3.x 及更低版本上。iOS 没问题。所有主要的桌面浏览器都很好。Android 4.x 很好。

尝试使用 Android 4.x 模拟器，看看是否可行。

## 更新：

除了在某些情况下不清楚的错误之外，这可能是一个具有挑战性的配置。查看[在 Android 模拟器中设置持久可信 CA](http://intrepidusgroup.com/insight/2011/08/setting-up-a-persistent-trusted-ca-in-an-android-emulator/)：

> 在 Android 模拟器中设置持久可信 CA 是一个常见问题，每当我们在模拟器中评估应用程序时都会遇到正确使用 SSL 的问题。目标是来自运行在 Android 模拟器中的应用程序的中间人 (MITM) 流量。
> 
> **为了成功进行 MITM 流量，中间节点的证书颁发机构 (CA) 必须受到设备的信任，否则连接将失败并出现一些通用的 SSL 握手错误。**通常，可以通过修改 cacerts 文件并重新启动设备，将中间节​​点标记为在根电话上受信任。当尝试在 Android 模拟器中执行此操作时，重新启动虚拟设备会导致操作系统将许多系统文件恢复到其基本状态——包括 cacerts 文件。这篇文章的其余部分描述了如何设置一个模拟器，在重启后保留对核心系统文件的修改。这还没有记录在一个地方（据我所知），所以希望这将为那些面临这个问题的人节省时间。
> 
> ……

# zend-framework2 - config_cache_enabled 错误

> ID：14653485
> 
> 赞同：3
> 
> 时间：2013-02-01T19:19:29.393
> 
> 标签：zend-framework2

使用 Zend 框架 2.1

当我`'config_cache_enabled' => true`进入我的`application.config.php`

它返回以下错误：

`Warning: var_export does not handle circular references in /usr/local/apache/vhosts/otwebsoft_admin/vendor/Zend/ModuleManager/Listener/AbstractListener.php on line 67`

几次刷新页面后，我得到了这个：

`Fatal error: Call to undefined method Zend\Cache\Storage\Adapter\Apc::__set_state() in /usr/local/apache/vhosts/otwebsoft_admin/data/cache/module-config-cache.otwebsoft.php on line 181`

我现在可以看到该文件是在服务器上创建的。当然，在配置中将值设置回 false 会消除所有错误。但是现在我们失去了缓存功能。

是的，我正在为我的缓存使用 APC 适配器。

阅读它建议使用序列化的 PHP 文档。所以我查看了源代码并将 var_export 更改为 serialize 并删除了该错误，但它带回了此处列出的第二个错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T14:41:45.360

我终于想通了。我不知道为什么我花了这么长时间，但现在一切都说得通了。

所以闭包是这样的：

```
'example' => factory()
{
    return new Example();
} 
```

我应该在哪里使用（例如）：

```
'example' => 'Module/Service/Example' 
```

在我删除了所有的闭包之后，我现在可以使用

```
'config_cache_enabled' => true 
```

# object - 用类中的方法创建一个类？

> ID：14653505
> 
> 赞同：1
> 
> 时间：2013-02-01T19:20:56.967
> 
> 标签：object, php, stdclass

我想创建一个属性，它本身就是一个类，并在“父”类中添加其他方法`MyName`，这样我就可以做类似的事情

```
$myname = new MyName();
$myname->event->post($params); 
```

我尝试了以下方法，但它不起作用：

```
class MyName {
    public function __construct() {
        $this->event = new stdClass();
        $this->event->post = function($params) {
            print_r($params);
        };
    }
}

$x = new MyName();
$x->event->post(array(1, 2, 3)); 
```

最终只会标记以下致命错误：

```
Fatal error: Call to undefined method stdClass::post() in C:\xampp\htdocs\Arkway\recreation\primepromotions\api\classes\FacebookWrapper.php on line 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:30:10.193

你可以`__call`用来访问一个内部的闭包数组，可能是这样的：

```
class MyName {
  public function __construct() {
     $this->event = new EventObj();
     $this->event->post = function($params) {
          print_r($params);
      };
  }
}

class EventObj {

  private $events = array();

  public function __set($key, $val) {
    $this->events[$key] = $val;
  }

  public function __call($func, $params) {
     if (isset($this->events[$func])) {
       call_user_func_array($this->events[$func], $params);
     }
  }
}

$x = new MyName();
$x->event->post(array(1, 2, 3)); 
```

输出：

```
Array
(
  [0] => 1
  [1] => 2
  [2] => 3
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:25:00.717

你不能在 PHP 中做到这一点。

您可以创建另一个类，然后在主类中初始化它并通过变量访问它，或者如果您想将代码全部保存在一个对象中，您可以模拟方法链接。这篇文章[http://www.talkphp.com/advanced-php-programming/1163-php5-method-chaining.html](http://www.talkphp.com/advanced-php-programming/1163-php5-method-chaining.html)展示了 PHP 中方法链的一种方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T19:33:02.377

你可以这样做：

```
class MyName extends stdClass{ 
```

或者

```
class MyName {
    public function getStdClass(){
        return new StdClass();
    } 
```

您可以致电：

```
$test = new MyName();
$test->someStdClassMethod(); 
```

或者

```
$test = new MyName();
$test2 = $test->getStdClass();
$test2->someStdClassMethod(); 
```

各自。

# django - django ModelChoiceField：显示字段名称

> ID：14653507
> 
> 赞同：0
> 
> 时间：2013-02-01T19:21:08.287
> 
> 标签：django, field, names, choicefield

我想在下拉列表中显示表的所有字段名称。这是我的表格：

```
sortFields=forms.ModelChoiceField(queryset=ActsInformationModel._meta.get_all_field_names(), empty_label="Select the sort field") 
```

我收到错误“列表”对象没有属性“全部”。

怎么了？

提前致谢，

罗曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:26:00.087

您需要一个[ChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#choicefield)：

```
choices = [(i, i) for i in ActsInformationModel._meta.get_all_field_names()]

sortFields = forms.ChoiceField(label='Sort',
                               choices=choices) 
```

# curl - 无法通过查询字符串下载 PISA 数据

> ID：14653512
> 
> 赞同：0
> 
> 时间：2013-02-01T19:21:20.437
> 
> 标签：curl, bioinformatics

我正在尝试从[PDBePISA](http://www.ebi.ac.uk/msd-srv/prot_int/pi_download.html)下载文件。他们建议使用模板 URL：

```
http://www.ebi.ac.uk/pdbe/pisa/cgi-bin/interfaces.pisa?pdbcodelist 
```

其中`pdbcodelist`必须填写用户的偏好。例如：

[http://www.ebi.ac.uk/pdbe/pisa/cgi-bin/interfaces.pisa?4FGF](http://www.ebi.ac.uk/pdbe/pisa/cgi-bin/interfaces.pisa?4FGF)

到目前为止，我一直未能成功下载该文件。我曾尝试使用`-L`重定向，但我没有任何运气。

如果您在 Web 浏览器中键入示例 URL，则会出现一个下载提示，允许您下载该文件。我正在尝试用 cURL 完成同样的任务。该 URL 确实以某种方式指向一个可以下载的文件。但是，到目前为止，如何使用 cURL 来做到这一点让我无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:45:47.897

问题似乎只是您将 PDB 代码大写。在[PDBePISA 下载页面上](http://www.ebi.ac.uk/msd-srv/prot_int/pi_download.html)，所有示例代码都是小写的。我猜想驱动下载的脚本可能无法处理大写。

当我[`...pisa?4FGF`](http://www.ebi.ac.uk/pdbe/pisa/cgi-bin/interfaces.pisa?4FGF)在浏览器中输入 URL 时，我得到“找不到条目”XML，但使用小写字母可以解决问题。

在我的机器上，以下工作完全符合预期：

```
$ curl -O http://www.ebi.ac.uk/msd-srv/pisa/cgi-bin/interfaces.pisa?4fgf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:33:34.670

当你卷曲

```
http://www.ebi.ac.uk/pdbe/pisa/cgi-bin/interfaces.pisa?4FGF 
```

你得到这个标题

```
HTTP/1.1 302 Found
Server: Apache
Content-Type: text/html; charset=iso-8859-1
Date: Fri, 01 Feb 2013 19:29:11 GMT
Location: http://www.ebi.ac.uk/msd-srv/pisa/cgi-bin/interfaces.pisa?4FGF
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Length: 246 
```

当您跟随指定的位置时，您会以包含此内容的页面结束

```
<pisa_interfaces>
  <status>Ok</status>
  <pdb_entry>
    <pdb_code>4FGF</pdb_code>
    <status>Entry not found</status>
  </pdb_entry>
</pisa_interfaces> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T17:57:33.560

你可以使用这个类，这个类的原版在**php.net**上我只做了一点改动

```
 <?php 
 function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          print_r($response);
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}
 class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_replace_callback("~(.*?)=(.*?);~si",function($m){$this->Cookie[trim($m[1])]=trim($m[2]);},' '.$Cookie.'; ');
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 

?> 
```

此代码使您可以轻松使用 Curl ；

初始化 Curl :tou 可以看到脚本中的参数，但如果你想可以使用默认模式，如下所示：

```
 $cc = new cURL(); 
```

对于做发布请求，您可以使用打击代码

```
 $response=$cc->post('http://www.sepidarsoft.com','foo=bar');
 print_r($response); 
```

或为获取请求您可以使用打击代码

```
 $response=$cc->get('http://www.sepidarsoft.com');
 print_r($response); 
```

此代码支持重定向

# jquery - Fancybox 弹出窗口中的 IE8 中未完全显示关闭按钮

> ID：14653514
> 
> 赞同：1
> 
> 时间：2013-02-01T19:21:24.810
> 
> 标签：jquery, css, internet-explorer-8, fancybox

我正在跨浏览器测试我的开发网站。

在 IE8（通过 IE Tester 软件测试）中，当您启动一个fancybox 弹出窗口时，右上角的关闭按钮会被修剪。我试过设置溢出：在大量花式盒 div 上可见，但没有任何乐趣。

画廊位于本页底部：dev.enterf1.com/british-grand-prix.php

希望有人可以提供帮助。我非常讨厌这样烦人的事情！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:51:54.490

我无法在 Windows 7 机器上重现这个模拟 IE8。

![在此处输入图像描述](../Images/e43b50f54acd4a2608b2576e512eba72.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:59:32.230

解决了！升级到最新的 jQuery 和 fancybox 版本解决了它。旧代码中一定有一些潜在的小问题。

为大家的帮助干杯！

# scala - Spray.io 路由可以拆分为多个“控制器”吗？

> ID：14653526
> 
> 赞同：18
> 
> 时间：2013-02-01T19:22:03.777
> 
> 标签：scala, spray

我还没有找到将 Spray.io 路由拆分为多个文件的可靠示例或结构。我发现我的路由的当前结构将变得非常繁琐，对于一个非常简单的 REST API 应用程序，将它们抽象为不同的“控制器”会很好。

文档似乎没有太大帮助：[http ://spray.io/documentation/spray-routing/key-concepts/directives/#directives](http://spray.io/documentation/spray-routing/key-concepts/directives/#directives)

这是我到目前为止所拥有的：

```
class AccountServiceActor extends Actor with AccountService {

  def actorRefFactory = context

  def receive = handleTimeouts orElse runRoute(demoRoute)

  def handleTimeouts: Receive = {
    case Timeout(x: HttpRequest) =>
      sender ! HttpResponse(StatusCodes.InternalServerError, "Request timed out.")
  }
}

// this trait defines our service behavior independently from the service actor
trait AccountService extends HttpService {

  val demoRoute = {
    get {
      path("") {
        respondWithMediaType(`text/html`) { // XML is marshalled to `text/xml` by default, so we simply override here
          complete(index)
        }
      } ~
      path("ping") {
        complete("PONG!")
      } ~
      path("timeout") { ctx =>
        // we simply let the request drop to provoke a timeout
      } ~
      path("crash") { ctx =>
        throw new RuntimeException("crash boom bang")
      } ~
      path("fail") {
        failWith(new RuntimeException("aaaahhh"))
      } ~
      path("riaktestsetup") {
        Test.setupTestData
        complete("SETUP!")
      } ~
      path("riaktestfetch" / Rest) { id =>
        complete(Test.read(id))
      }
    }
  }
} 
```

感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-11T20:59:17.793

我个人将其用于大型 API：

```
class ApiActor extends Actor with Api {
  override val actorRefFactory: ActorRefFactory = context

  def receive = runRoute(route)
}

/**
 * API endpoints
 *
 * Individual APIs are created in traits that are mixed here
 */
trait Api extends ApiService
  with AccountApi with SessionApi
  with ContactsApi with GroupsApi
  with GroupMessagesApi with OneToOneMessagesApi
  with PresenceApi
  with EventsApi
  with IosApi
  with TelephonyApi
  with TestsApi {
  val route = {
    presenceApiRouting ~
    oneToOneMessagesApiRouting ~
    groupMessagesApiRouting ~
    eventsApiRouting ~
    accountApiRouting ~
    groupsApiRouting ~
    sessionApiRouting ~
    contactsApiRouting ~
    iosApiRouting ~
    telephonyApiRouting ~
    testsApiRouting
  }
} 
```

我建议将最常见的路由放在首位，并`pathPrefix`尽快在子路由中使用，这样可以减少 Spray 为每个传入请求运行的测试数量。

您会在下面找到一条我认为经过优化的路线：

```
 val groupsApiRouting = {
    pathPrefix("v3" / "groups") {
      pathEnd {
        get {
          traceName("GROUPS - Get joined groups list") { listJoinedGroups }
        } ~
        post {
          traceName("GROUPS - Create group") { createGroup }
        }
      } ~
      pathPrefix(LongNumber) { groupId =>
        pathEnd {
          get {
            traceName("GROUPS - Get by ID") { getGroupInformation(groupId) }
          } ~
          put {
            traceName("GROUPS - Edit by ID") { editGroup(groupId) }
          } ~
          delete {
            traceName("GROUPS - Delete by ID") { deleteGroup(groupId) }
          }
        } ~
        post {
          path("invitations" / LongNumber) { invitedUserId =>
            traceName("GROUPS - Invite user to group") { inviteUserToGroup(groupId, invitedUserId) }
          } ~
          path("invitations") {
            traceName("GROUPS - Invite multiple users") { inviteUsersToGroup(groupId) }
          }
        } ~
        pathPrefix("members") {
          pathEnd {
            get {
              traceName("GROUPS - Get group members list") { listGroupMembers(groupId) }
            }
          } ~
          path("me") {
            post {
              traceName("GROUPS - Join group") { joinGroup(groupId) }
            } ~
            delete {
              traceName("GROUPS - Leave group") { leaveGroup(groupId) }
            }
          } ~
          delete {
            path(LongNumber) { removedUserId =>
              traceName("GROUPS - Remove group member") { removeGroupMember(groupId, removedUserId) }
            }
          }
        } ~
        path("coverPhoto") {
          get {
            traceName("GROUPS - Request a new cover photo upload") { getGroupCoverPhotoUploadUrl(groupId) }
          } ~
          put {
            traceName("GROUPS - Confirm a cover photo upload") { confirmCoverPhotoUpload(groupId) }
          }
        } ~
        get {
          path("attachments" / "new") {
            traceName("GROUPS - Request attachment upload") { getGroupAttachmentUploadUrl(groupId) }
          }
        }
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-01T19:55:18.050

您可以使用 ~ 组合器组合来自不同“控制器”的路由。

```
class AccountServiceActor extends Actor with HttpService {

  def actorRefFactory = context

  def receive = handleTimeouts orElse runRoute(
  new AccountService1.accountService1 ~  new AccountService2.accountService2)

  def handleTimeouts: Receive = {
    case Timeout(x: HttpRequest) =>
      sender ! HttpResponse(StatusCodes.InternalServerError, "Request timed out.")
  }
}

class AccountService1 extends HttpService {

  val accountService1 = {
    get {
      path("") {
        respondWithMediaType(`text/html`) { // XML is marshalled to `text/xml` by default, so we simply override here
          complete(index)
        }
      }
    }
}

class AccountService2 extends HttpService {

  val accountService2 = {
    get {
      path("someotherpath") {
        respondWithMediaType(`text/html`) { // XML is marshalled to `text/xml` by default, so we simply override here
          complete(index)
        }
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-11T23:35:33.443

我从上面的代码片段，基本格式和作品中尝试了这种方式。

```
import akka.actor.ActorSystem
import akka.actor.Props
import spray.can.Http
import akka.io.IO
import akka.actor.ActorRefFactory
import spray.routing.HttpService
import akka.actor.Actor

/**
 * API endpoints
 *
 * Individual APIs are created in traits that are mixed here
 */

trait Api extends ApiService
with UserAccountsService
{
  val route ={
    apiServiceRouting ~
    accountsServiceRouting
  }

}

trait ApiService extends HttpService{
  val apiServiceRouting={
    get{
      path("ping") {
       get {
        complete {
          <h1>pong</h1>
        }
       }
      }
    }
  }
}

trait UserAccountsService extends HttpService{
  val accountsServiceRouting={
     path("getAdmin") {
      get {
        complete {
          <h1>AdminUserName</h1>
        }
      }
    }
  }
}
class ApiActor extends Actor with Api {
  override val actorRefFactory: ActorRefFactory = context

  def receive = runRoute(this.route)
}

object MainTest extends App {

  // we need an ActorSystem to host our application in
  implicit val system = ActorSystem("UserInformaitonHTTPServer")

  // the handler actor replies to incoming HttpRequests
  val handler = system.actorOf(Props[ApiActor], name = "handler")

  // starting the server
  IO(Http) ! Http.Bind(handler, interface = "localhost", port = 8080)

} 
```

# javascript - 使用正则表达式替换 javascript 字符串的第一个单词

> ID：14653528
> 
> 赞同：1
> 
> 时间：2013-02-01T19:22:10.823
> 
> 标签：javascript, regex

在字符串中

> somethingcryptic12A@#$~` abc def@#

, 我想用 new 替换第一个单词，这样它就会是新的

> 新的 abc def@#

. 我怎样才能使用正则表达式来做到这一点。我使第一个词变得神秘，以表明它可以包含任何字符和任意数量的字符。如果后面有空格，则为第一个单词。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T19:23:42.217

您可以使用此正则表达式

```
^\S+ 
```

`^`表示字符串的开始

`\S`匹配**除**空格以外的任何字符..

`+`匹配前面的字符 1 到多次

# css - 我们可以调整虚线边框上的虚线大小吗？

> ID：14653529
> 
> 赞同：0
> 
> 时间：2013-02-01T19:22:16.930
> 
> 标签：css

我想知道是否可以不使用图像使 CSS 中边框上的点变大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:24:20.237

尝试这个：

```
div
{
    border: 10px dotted #000000;
} 
```

现场小提琴：http: [//jsfiddle.net/U7HTd/](http://jsfiddle.net/U7HTd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:23:38.953

是的，可以使用该`border-width`属性。下面的演示使用速记符号应用了这一点。

## [查看演示](http://jsfiddle.net/TrvjK/)

# jquery - 清除队列后，延迟（）似乎变短了

> ID：14653530
> 
> 赞同：0
> 
> 时间：2013-02-01T19:22:32.420
> 
> 标签：jquery, delay

我有一个图像滑块和一个淡入一个图像的功能，延迟 5 秒，然后淡出。

通过单击通过 JQuery 生成的按钮，您可以直接切换到某个图像。当前图像之前要淡出。显示所选图像后，幻灯片将从该点继续播放。

问题：当我单击其中一个直接访问按钮时，延迟显着缩短。我不知道为什么会这样？

代码：

```
$(document).ready(function(){
  var index = 0;

  var bilder=[
    ["HA_Promo_1.jpg","(a Link here)"],
    ["HA_Promo_2.jpg","(a Link here)"],
    ["HA_Promo_3.jpg","(a Link here)"],
    ["HA_Promo_4.jpg","(a Link here)"],
    ["HA_Promo_5.jpg","(a Link here)"],
    ["HA_Promo_6.jpg","(a Link here)"]
  ];

  $(bilder).each(function() {
    $("#linkleiste").append("<span class=\"klick\">" + ($(bilder).index(this)+1) + "</span>");
  });

  $(".klick").click(function() {   
    index=$(this).text();  
    $("#promo_slider").clearQueue().fadeOut(500,runIt);
  });

  function runIt() {
    $(".blink").remove();
    if(index==bilder.length) index=0;
    diesbild="<a class=\"blink\" id=\"" + "promo_a" + index + "\" href=\"" + bilder[index][1]+ "\"><img src=\"./images/" + bilder[index][0]+ "\" alt=\"\" title=\"\" /></a>";        
    index++;        
    $("#promo_slider").append(diesbild).fadeIn(500).delay(5000).fadeOut(500, runIt);
  }  
  runIt();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:59:05.793

我使用 setTimeout() 而不是 delay() 得到了更好的结果。显然， stop() 不会取消延迟。从文档中：

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的本机 setTimeout 函数，这可能更适合某些用例。

演示片段，如下：

```
$(document).ready(function() {
  var index = 0;
  var loopTimer;

  var bilder = [
    ["http://lorempixel.com/200/200/abstract/1/", "(a Link here)"],
    ["http://lorempixel.com/200/200/abstract/2/", "(a Link here)"],
    ["http://lorempixel.com/200/200/abstract/3/", "(a Link here)"],
    ["http://lorempixel.com/200/200/abstract/4/", "(a Link here)"],
    ["http://lorempixel.com/200/200/abstract/5/", "(a Link here)"],
    ["http://lorempixel.com/200/200/abstract/6/", "(a Link here)"]
  ];

  $(bilder).each(function() {
    $("#linkleiste").append("<span class=\"klick\">" + ($(bilder).index(this) + 1) + "</span>");
  });

  $(".klick").click(function() {
    clearTimeout(loopTimer);
    index = $(this).text() - 1;
    runIt();
  });

  function runIt() {
    if (index == bilder.length) index = 0;
    diesbild = "<a class=\"blink\" id=\"" + "promo_a" + index + "\" href=\"" + bilder[index][1] + "\"><img src=\"" + bilder[index][0] + "\" alt=\"\" title=\"\" />" + (index + 1) + "</a>";
    index++;
    $("#promo_slider").fadeOut(500, function() {
      $(this).html(diesbild).fadeIn(500);
      loopTimer = setTimeout(runIt, 5000);
    });
  }
  runIt();
});
```

```
.klick {
  margin-left: 20px;
  margin-right: 20px;
}
.klick:hover {
  cursor: pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<div id="linkleiste"></div>
<div id="promo_slider"><span class="blink"></span></div>
```

这也是一个[jFiddle](http://jsfiddle.net/Z6J65/1/)。

# java - 动态添加新的 jcombo 框和按钮到hierarchy

> ID：14653535
> 
> 赞同：1
> 
> 时间：2013-02-01T19:22:45.230
> 
> 标签：java, swing, panel, jcombobox, dynamic-programming

所以我有一个按钮，假设向我的摇摆 gui 添加一个（子）比赛选项以创建混合字符实际更新类和统计值的代码在控制台中工作，但 GUI 方面现在证明很困难我的代码动态执行创建新代码，但在添加按钮内部分层，它需要修改父面板而不是自身。想法？

```
if (e.getActionCommand().equals("AddRaceBox")){
        JButton cb = (JButton)e.getSource();
        String[] cRace = new String[75];
        JComboBox[] raceBox = new JComboBox[2];
        raceBox[1] = new JComboBox();
        for (int i=0; i<75; i++){
            cRace[i] = nala.getRaceName(i);
            raceBox[1].addItem(cRace[i]);
            }
        cb.add(raceBox[1]);

        ImageIcon deleteRaceIcon = createImageIcon("1359702329_delete_user.png", "add race icon");
        JButton addRaceButton1 = new JButton(deleteRaceIcon);
        addRaceButton1.addActionListener(this);
        addRaceButton1.setActionCommand("AddRaceBox");
        addRaceButton1.setSize(new Dimension(32, 32));          
        cb.add(addRaceButton1);
        cb.revalidate();
        cb.repaint();
        System.out.println("Add Race Clicked");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:43:34.810

1）为什么你添加一个新的[`JButton`](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#jbutton)和[`JComboBox`](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)另一个，`JButton`源自[`ActionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

```
JButton cb = (JButton)e.getSource();

.
.

cb.add(raceBox[1]);

.

cb.add(addRaceButton1);
cb.revalidate();
cb.repaint(); 
```

2)`JButton`错过任何[`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，然后一个新的`JButton`and `JComboBox`（添加到 derived `JButton`）有`Dimmension[0, 0]`

3）为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译

# javascript - 切换覆盖具有半透明组件的 div

> ID：14653536
> 
> 赞同：0
> 
> 时间：2013-02-01T19:22:55.517
> 
> 标签：javascript, css, html

我想知道如何`<div>`用一些有用的 HTML 组件/图像覆盖 a 来制作`<div>`：

*   A）不可点击（鼠标等无法访问）
*   B）看起来有点〜0.3f模糊（因为它是透明的前景）
*   C）使效果动态我的意思是使`<div>`某些事件覆盖/未覆盖？

所以我的问题是：用 HTML、CSS 和 Javascript 制作前面提到的效果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:30:33.340

*(A) 使 div “无法点击（鼠标等无法访问）”*

这可以通过使用各种[CSS 定位元素](https://developer.mozilla.org/samples/cssref/css-positioning.html)将两个 div 放置在完全相同的位置来实现。然后将一个 div 堆叠在另一个上，使用[`z-index`](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index)（较高的元素`z-index`将堆叠在较低的元素的顶部`z-index`）。例如：

HTML：

```
<div id="div1">
    <a href="#">Link</a>
</div>
<div id="div2"></div> 
```

CSS：

```
#div1, #div2 {
    width: 50px;
    height: 50px;
    top: 0;
    left: 0;
    position: fixed;
}

#div2 {
    z-index: 1;
} 
```

* * *

*(B) 使 div “看起来有点 ~0.3f 模糊（因为它是透明的前景）”*

为此，您将使用 CSS [`opacity`](https://developer.mozilla.org/en-US/docs/CSS/opacity)。例如：

```
#div2 {
    opacity: .3;
} 
```

* * *

*（C）“使效果动态我的意思是使某些事件被覆盖/未被覆盖。”*

您可以使用 Javascript 完成此操作。最简单的方法可能是使用[`document.getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)添加[`display:none`](https://developer.mozilla.org/en-US/docs/CSS/display)到要删除的 div 中。

```
<script>
  document.getElementById('div2').style.display = 'none';
</script> 
```

* * *

**注意**：这些不是完成此任务的唯一方法。我只是想给你一个起点。我建议查看我发布的 MDN 链接并编写最适合您具体尝试完成的代码。

# pentaho - Kettle (pdi) - 使用 Stax Step 打开多个文件

> ID：14653543
> 
> 赞同：0
> 
> 时间：2013-02-01T19:23:32.270
> 
> 标签：pentaho, stax, kettle

我有数百万个需要读取、转换和保存到数据库的 xml。

使用 StAX Step 我设法打开了一个 xml 文件并执行了我需要的操作。

但是文件名只能让我每一步打开一个文件。有什么方法可以让 Stax Step 使用正则表达式或其他解决方案一次打开多个 xml 文件？

PS：不一定需要是并行打开xml，只需要一个单独可以打开文件夹中所有xml并运行我需要的转换。

拥抱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:04:52.197

我认为您不能这样做，因为您不能只是将 XML 文档连接在一起。您需要做的是让您的转换加载一个文件，然后为每个文件运行一次该转换。看到这个答案：

[https://stackoverflow.com/a/14613787/1515537](https://stackoverflow.com/a/14613787/1515537)

布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:20:28.567

使用 Stax Step 打开多个文件

大家好，

使用已弃用的 XML 输入，我可以在打开文件时使用正则表达式。

谢谢你

# c - 将正在运行的程序的输出通过管道传输到 xargs

> ID：14653549
> 
> 赞同：3
> 
> 时间：2013-02-01T19:23:43.400
> 
> 标签：c, bash, shell

我有一个通过 i2c 连续读取加速度计数据的 C 程序。每当数位板的方向发生变化时，它都会向标准输出输出一个新行。

现在，我希望能够在 bash 脚本中使用该输出来更改屏幕的旋转。

现在，问题是这样的：当我在 bash 中查看程序的输出时，程序正在逐行输出更改。当我将输出重定向到文件时，输出会连续写入文件中，但是当我尝试通过管道传输输出时，什么也没有发生。

这是C程序：

```
#include <stdio.h>

int main(int argc, char *argv[])
{
    int changed;
    char *orientation;

    while (1) {
        /* Read data from i2c, check for change in orientation */
        if (changed) {
            fprintf(stdout, "%s\n", orientation);
            fflush(stdout);
            changed = 0;
        }
    }

    exit(0);
} 
```

这是我在 bash 中的试用：

```
#!/bin/bash

# This does not work, xrandr is not called.
./i2c-rotation | xargs xrandr --orientation 
# This is working
#./i2c-rotation > output 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:30:18.203

默认情况下，`xargs`希望在运行所有参数之前读取大量参数。在这种情况下，这可能不是您想要的。

`xargs -L1`在每个完整的输入行之后运行命令。

# c# - 如何在 LINQ 中比较两个不同大小的列表

> ID：14653551
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:23:44.570
> 
> 标签：c#, linq

可以说我有一个`ListA`with `objectA`。

`objectA`有名字，年龄，rollno，等级

和其他`ListB`的`objectB`。

`objectB`有名字，年龄

如何比较两个列表并根据姓名和年龄过滤掉不常见的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:12:31.677

这是类的示例：

```
public interface IHaveNameAndAge
{
    string Name { get; set; }
    int Age { get; set; }
}

public class ObjectA : IHaveNameAndAge
{
    public string Name { get; set; }
    public int Age { get; set; }
    int RollNo { get; set; }
    int Rank { get; set; }
}

public class ObjectB : IHaveNameAndAge
{
    public string Name { get; set; }
    public int Age { get; set; }
}

public class MyEqualityComparer : IEqualityComparer<IHaveNameAndAge>
{
    public bool Equals(IHaveNameAndAge x, IHaveNameAndAge y)
    {
        if (ReferenceEquals(x, y))
            return true; 
        return x.Age == y.Age && String.Equals(x.Name, y.Name, StringComparison.Ordinal);
    }

    public int GetHashCode(IHaveNameAndAge obj)
    {
        return obj.Age.GetHashCode() ^ obj.Name.GetHashCode();
    }
} 
```

这是测试代码：

```
var listA = new List<ObjectA>();
listA.Add(new ObjectA() { Name = "A", Age = 20 });
listA.Add(new ObjectA() { Name = "B", Age = 25 });
var listB = new List<ObjectB>();
listB.Add(new ObjectB() { Name = "A", Age = 20 });
listB.Add(new ObjectB() { Name = "C", Age = 29 });

var myComparer = new MyEqualityComparer();
var result = listA.Intersect<IHaveNameAndAge>(listB, myComparer); 
```

您可以根据自己的要求修改此示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:07:49.827

这是比较没有共同基类型的不同类型的一个小技巧。创建一个`IEqualityComparer<object>`例如：

```
public class DynamicComparer : IEqualityComparer<object>
{
    public bool Equals(dynamic x, dynamic y)
    {
        return x.Name == y.Name && x.Age == y.Age;
    }

    public int GetHashCode(dynamic obj)
    {
        return ((string)obj.Name).GetHashCode() * 31
            + ((int)obj.Age).GetHashCode();
    }
} 
```

然后你可以这样做：

```
var filtered = ListA.Intersect(ListB, new DynamicComparer())
                    .Cast<objectA>().ToList(); 
```

* * *

**这个怎么运作。**由于`object`是所有类型的通用基本类型，因此`IEqualityComparer<object>`适用于不同类型。但是，我们通常无法比较`Name`和`Age`属性，因为它们没有在`object`. 这里的诀窍是编译器允许您`dynamic`代替方法签名并且仍然履行合同。因此，我们可以利用动态运行时来比较两者和类型的共同属性。`object``IEqualityComparer<object>``objectA``objectB`

# html - 样式从 chrome 到 IE 不同。定心

> ID：14653553
> 
> 赞同：0
> 
> 时间：2013-02-01T19:23:49.913
> 
> 标签：html, css, internet-explorer

我正在尝试使页面居中。页面以 chrome 和 FF 居中显示。IE 将所有内容推向左侧。我感到困惑的是，我对多个页面使用了 1 个样式表，其中一些页面在所有浏览器中都是正确的。最好的猜测是我在页面上设置的样式生成了不正确的格式。

唯一可行的解​​决方案是如果我应用 a `text align: center`，但这是不可行的，因为它们已经在正文中出现了其他几种文本样式。

我尝试通过将 边距 `margin: 0` 更改 `margin: 10px auto 0;` 为 `.container{width:auto;}``.container{width:900px;}`

我在此处附加了一个 jsfiddle，但我不确定它是否有助于识别问题，因为它看起来居中。[http://jsfiddle.net/thetylercox/p6ENV/](http://jsfiddle.net/thetylercox/p6ENV/)

当前的问题就在这里。 [http://www.redwirelogic.com/index.html](http://www.redwirelogic.com/index.html) 当我发现问题时，我会更新小提琴以显示问题和解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:28:35.023

所以这里的问题：

```
#wrapper { width:100%; overflow:hidden; margin-left:auto; margin-right:auto; }

/* Wrapper Sub Elements */
.w-main { width:1004px; margin:0 auto; overflow:hidden; } 
```

基本上，您正在创建一个与当前窗口宽度相同的“包装器”。`1004px`然后，您创建一个具有自动左/右边距的设置宽度的子元素。

这会碰到窗口最左边的原因是因为您的`#wrapper`元素是文本左对齐的。

您应该做的是简单的事情，例如：

```
#wrapper { width:100%; overflow:hidden; margin-left:auto; margin-right:auto; 
        text-align:center; } // <-- that 

/* Wrapper Sub Elements */
.w-main { width:1004px; margin:0 auto; overflow:hidden; 
         text-align:left;} // <----and this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:34:11.240

您处于怪癖模式。将您的文档类型更改为类似

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

或者

```
 <!DOCTYPE HTML> 
```

并且无需对齐中心。这也将解决您在 IE 中的许多其他问题。

# php - NSDate 到 MySQL 日期

> ID：14653555
> 
> 赞同：2
> 
> 时间：2013-02-01T19:23:53.650
> 
> 标签：php, mysql, ios, objective-c, nsdate

我想将 NSDate 保存到 MySQL 字段。哪种类型最好？日期或时间戳？以及如何格式化我的 NSDate 以将其发送（到 PHP 脚本）并将其保存在我的字段中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T08:07:41.623

首先创建一个日期格式化程序：

```
NSDateFormatter *gmtDateFormatter = [[NSDateFormatter alloc] init];
gmtDateFormatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];
gmtDateFormatter.dateFormat = @"yyyy-MM-dd HH:mm:ss"; 
```

转换`NSDate`为 MySQL 兼容的日期字符串：

```
NSString *dateString = [gmtDateFormatter stringFromDate:aDate]; 
```

要转换回来：

```
NSDate *date = [gmtDateFormatter dateFromString:aString]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T20:12:35.753

你问了两个问题。

关于 MySQL DATETIME 与 TIMESTAMP，请参阅[我应该使用字段 'datetime' 还是 'timestamp'？](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)

关于通过 PHP 从 NSDate 到 MySQL...

NSDate 是一个表示时间点的对象。要通过网络发送，您需要将其序列化为某种格式（即，将其转换为字符串）。最简单的做法是把它放在 format`yyyy-MM-dd HH:mm:ss`中，因为那是 MySQL 想要的。

用于`NSDateFormatter`将 NSDate 对象转换为该格式的字符串。确保将格式化程序时区设置为 UTC，这样无论计算 NSDate 的设备/计算机的时区如何，您都将获得一致的结果。然后通过网络将其发送到您的 PHP 脚本。

在 PHP 脚本中，您可以直接获取该值并将其保存到 DATETIME 列。

奖励：确保您使用准备好的语句（PHP 附带的 PHP PDO 库允许这样做），否则您将面临 SQL 注入的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:35:18.853

我曾经在我的应用程序中做过同样的事情。我曾经将 NSDate 存储为字符串。但是我在我的项目中使用了 SQLite。但是将 NSDate 存储为字符串对我来说效果很好。在获取数据时，将字符串再次转换为 NSDate。这种方法也没有什么好处，因为您总是以字符串格式获取数据，因此在项目中处理事情非常容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:04:45.660

我会将其转换为日期时间格式（YYYY-MM-DD HH:MM:SS）。这样你就没有 Unix 纪元问题或 y38k 问题。另外，PHP 可以很容易地使用这种格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T17:49:06.127

新版本的 MySQL 支持小数秒，所以这是我的解决方案：

```
@implementation NSDate (MySQL)

//used to send a utc date to the server.
-(NSString*)yourprefix_MySQLString{
    static NSDateFormatter *df = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        df = [[NSDateFormatter alloc] init];
        // [df setDateFormat:@"yyyy-MM-dd HH:mm:ss.SSSSSS"]; can't use this because three S's
        // is the maximum and rest are 0, e.g. 1415986217.544384 with six S's becomes .544000
        // so missing some of the fraction.
        [df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
        [df setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
    });
    double d = [self timeIntervalSince1970];
    d = d - floor(d); // extract fraction
    d*=1000000; // convert to micros
    d = round(d);
    return [NSString stringWithFormat:@"%@.%06d", [df stringFromDate:self], (int)d];
}

@end 
```

例子：

```
NSDate* d = [NSDate date];
NSLog(@"%@", d);
NSLog(@"%f", [d timeIntervalSince1970]);
NSLog(@"%@", [d yourprefix_MySQLString]); 
```

输出：

```
2014-11-14 17:47:33 +0000
1415987253.326594
2014-11-14 17:47:33.326594 
```

注意第 2 行和第 3 行的分数完全匹配，这就是我想要的。

与往常一样，将您自己的前缀添加到类别中，以防止与其他开发人员类别发生冲突。

# safari - 边框半径在 Mac 的 Safari 上切断右边框

> ID：14653557
> 
> 赞同：0
> 
> 时间：2013-02-01T19:23:59.487
> 
> 标签：safari, webkit, css

有没有人见过这样的事情？在 Mac 上的 Safari 中查看附加的 JSFiddle - [http://jsfiddle.net/cbrauckmuller/6e4gM/1/](http://jsfiddle.net/cbrauckmuller/6e4gM/1/)

这是我所看到的 -

![在此处输入图像描述](../Images/24e1c4a831feaccf58740cec57d35cee.png)

CSS：

```
input[type=text], div.test {
    border-radius: 4px;
    display: inline-block;
    width: 75%;
    background: #fff;
    border: 1px solid red;
    outline: none;
    -webkit-appearance: none;
} 
```

HTML：

```
<div style="margin: 20px;">
     <input type="text" value="Your mom" />
</div>

<div style="margin: 20px;">
    <div class="test">Your mom</div>
</div> 
```

出于某种原因，Safari 正在切断元素的右边框。无论是输入字段还是普通的旧 <div> 元素都没有关系。我只保留了复制错误所需的 CSS 属性。如果您删除边框半径或背景颜色，它可以解决问题，但我需要在我的设计中使用这些属性。关于造成这种情况的任何想法？

我在 Mountain Lion 上使用 Safari 版本 6.0.2 (8536.26.17)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:16:08.850

尝试设置`margin-right: 2px`。也许它会起作用。

不幸的是，我无法在 Mack 上的 Safari 中检查它。

# c - c中的字计数器不起作用

> ID：14653559
> 
> 赞同：1
> 
> 时间：2013-02-01T19:24:38.143
> 
> 标签：c, string, pointers

我有如下的交流代码。
我想计算用分隔符分隔的文本中的单词数。
代码编译但停止。
问题是什么？
这是我下面的代码。

```
#include <stdio.h>
#include <string.h>

int WordCount(char *text,char delimiter)
{
    char *s;
    int count = 0;
    strcpy(s,text);
    while(*s){
        if(*s==delimiter){
            count++;
        }
    }
    return count;
}

int main(void)
{
    char *line = "a,b,c,d,e";

    printf("%d\n",WordCount(line,','));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:27:49.367

您忘记增加指针`s`，因此您有一个无限循环，而不是复制字符串（您需要为其分配内存），只是让它指向输入。

```
int WordCount(char *text,char delimiter)
{
    char *s = text;
    int count = 0;
    // strcpy(s,text);
    while(*s){
        if(*s==delimiter){
            count++;
        }
        ++s;
    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:27:55.733

`char *s;``s`-在堆栈或堆中分配内存。

程序中的错误

*   声明时必须初始化所有变量。
*   应将有效内存分配/分配给指针变量。
*   无限循环，它总是检查字符串的第一个字符。

修改您的代码，如下所示

```
...
char *s = NULL;
int count = 0;
s = text; 
while(*s);
{
    if (*s == delimiter)
    {
        count++;
    }
    s++;
}
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T19:25:58.217

```
char *s;
int count = 0;
strcpy(s,text); 
```

`s`是一个未初始化的指针而不是一个数组对象。

# java - 单元测试期间的错误

> ID：14653562
> 
> 赞同：1
> 
> 时间：2013-02-01T19:24:47.533
> 
> 标签：java, jsf, powermock

编译单元测试时遇到问题。我收到以下错误消息。

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/faces/event/ValueChangeEvent
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at org.powermock.core.classloader.MockClassLoader.loadModifiedClass(MockClassLoader.java:143)
at org.powermock.core.classloader.DeferSupportingClassLoader.loadClass(DeferSupportingClassLoader.java:67)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
at java.lang.Class.getDeclaredMethod(Class.java:1935)
at net.sf.cglib.proxy.Enhancer.getCallbacksSetter(Enhancer.java:630)
at net.sf.cglib.proxy.Enhancer.isEnhanced(Enhancer.java:604)
at org.powermock.api.extension.proxyframework.ProxyFrameworkImpl.isProxy(ProxyFrameworkImpl.java:29)
at org.powermock.reflect.internal.WhiteboxImpl.getUnmockedType(WhiteboxImpl.java:1783)
at org.powermock.reflect.internal.WhiteboxImpl.getConstructor(WhiteboxImpl.java:248)
at org.powermock.core.MockGateway.newInstanceCall(MockGateway.java:192)
at br.gov.dataprev.siaci.web.ConsultaProcessosTest.setUp(ConsultaProcessosTest.java:43)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.internal.runners.MethodRoadie.runBefores(MethodRoadie.java:129)
at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:93)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:112)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:73)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)
at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:42)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

当我使用 PowerMock 时会发生此错误。有没有人遇到过这个问题？

这不会发生在特定点代码处。在我编译测试类时发生。这是我的测试课。

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(BeanUtil.class)
public class ConsultaProcessosTest {

    private ConsultaProcessos consulta;

    private ServicoConsultaProcessos mockServicoConsulta;

    private Acordo acordo;

    @Before
    public void setUp() {
        consulta = new ConsultaProcessos();
        mockServicoConsulta = createMock(ServicoConsultaProcessos.class);
        consulta.setServicoConsultaProcessos(mockServicoConsulta);
        acordo = Util.criarAcordoComDadosMinimos("1");
        consulta.setAcordo(acordo);
    }

    @Test
    public void consultaComResultadosDeveIrParaPaginaDeResultados() throws Exception {
        List<ProcessoTO> resultadoConsulta = new ArrayList<ProcessoTO>();
        resultadoConsulta.add(new ProcessoTO());

        ParametrosConsultaProcessos parametrosConsultaProcessos = consulta.obterParametrosConsultaProcessos();
        expect(mockServicoConsulta.consultarProcessos(parametrosConsultaProcessos)).andReturn(resultadoConsulta);
        replay(mockServicoConsulta);

        PowerMock.mockStatic(BeanUtil.class);
        EasyMock.expect(BeanUtil.salvarValorRequisicao("resultado", resultadoConsulta)).andReturn(resultadoConsulta);
        PowerMock.replay(BeanUtil.class);

        String resultado = consulta.consultarProcessos(parametrosConsultaProcessos);
        String resultadoEsperado = "/pages/consulta/resultadoConsultaProcessos.xhtml";
        assertEquals(resultadoEsperado, resultado);

        verify(mockServicoConsulta);
        PowerMock.verify(BeanUtil.class);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:03:42.197

注释掉这个：

```
<dependency>
  <groupId>javax</groupId>
  <artifactId>javaee-api</artifactId>
  <version>6.0</version>
  <scope>provided</scope>
</dependency> 
```

替换为以下依赖项：

```
<dependency>
 <groupId>javax.servlet</groupId>
 <artifactId>servlet-api</artifactId>
 <version>2.5</version>
 <scope>provided</scope>
</dependency> 
```

（如果您使用 GlassFish 以外的其他应用服务器，您可能还需要这个）

```
<dependency>
 <groupId>javax.persistence</groupId>
 <artifactId>persistence-api</artifactId>
 <version>1.0</version>
</dependency> 
```

参考： http: [//forum.springsource.org/showthread.php?57108-ClassFormatError-Absent-Code-attribute](http://forum.springsource.org/showthread.php?57108-ClassFormatError-Absent-Code-attribute)

# c - 使用原始缓冲区为 C/C++ 寻找类似 PHP 的 str_replace() 但没有 malloc()/realloc()

> ID：14653564
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:24:55.963
> 
> 标签：c, str-replace

我一直在为 C/C++ 寻找[类似 PHP 的**str_replace()**](http://php.net/manual/en/function.str-replace.php)，但我发现只有为结果分配/重新分配缓冲区的解决方案。在嵌入式环境中，这并不总是可能的，字符串没有内存，甚至没有*malloc()*。所以我正在寻找一个函数，它使用相同的缓冲区，类似于*strncat()*，其中最大值。缓冲区大小作为参数给出：

```
 void str_replace(char* search,char* replace,char* subject,int maxBufferSize); 
```

诀窍是，我刚刚写了一个，我会在一分钟内发布。是的，这是回答我自己问题的典型案例，但[我读过它是合法的](https://meta.stackexchange.com/questions/17463/can-i-answer-my-own-questions-even-those-where-i-knew-the-answer-before-asking)。

无论如何，我会在最佳答案上按下接受按钮。我的解决方案已经过测试，希望效果很好，但还有改进的余地。我相信会有更好的答案。我可以等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:43:27.127

这是我的尝试，未经测试：

```
void str_replace(char *search, char *replace, char *subject, size_t size)
{
    char *end = subject+size;
    size_t sl = strlen(search);
    size_t rl = strlen(replace);
    size_t l = strlen(subject);
    char *src = memmove(end-l-1, subject, l+1);
    char *dest = subject;
    while (*src) {
        char *match = strstr(src, search);
        if (!match) {
            match = src + strlen(src);
            rl = 0;
        }
        memmove(dest, src, match-src);
        dest += match-src;
        src = match+sl;
        memcpy(dest, replace, rl);
        dest += rl;
    }
    *dest = 0;
} 
```

这假设`strlen(replace) <= strlen(search)`. 如果不满足该约束，则需要进行一些额外的检查以确保`dest`不会通过`src`，并且替换在复制到位时适合。

该算法应该是避免过多访问（读取和写入）的最佳算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:36:03.477

所以，这是我的快速解决方案。它有效，但有问题：

*   当*模式*被发现不止一次时，剩余部分（收缩/扩展）将在每一轮中被复制；
*   *应该使用*memcpy() ；**
**   一些预先计算应该在*for*语句之外进行。*

 **编辑：为请求添加评论。*

```
 void strReplace(char* pattern,char* replacement,char* buffer,int maxLength) {

      int buflen = strlen(buffer);  // atual string length (changes after each replace)
      int patlen = strlen(pattern);  // pattern length, constant
      int replen = strlen(replacement);  // replacement lengh, constant
      int matlen = (patlen < replen ? patlen : replen);  // length of pattern/replacement mathcing part
      int ptr = 0;  // pointer, runs from 0 to buffer length

      while (true) {

        // find out, if string at buffer[ptr] matches the pattern
        int match = true;
        for (int n = 0; n < patlen; n++) {
          if ((n + ptr) == buflen) return;
          if (buffer[n + ptr] != pattern[n]) {
            match = false;
            break;
          } // if matching
        } // for pattern

        // if not match, increase ptr
        if (!match) {
          ptr++;
          if (ptr > buflen) return;
          continue;
        } // if not match

        // replace the common part (which requires no remaining block move)
        for (int n = 0; n < matlen; n++) buffer[n + ptr] = replacement[n];
        // if we're lucky, the search string is same lenght as replacement
        if (patlen == replen) return;

        // move remaining
        if (patlen > replen) {  // shrink, if repacement was shorter

          int shrink = patlen - replen;
          // perform shrink
          for (int idx = matlen + ptr; idx < buflen - shrink; idx++) {
            buffer[idx] = buffer[shrink + idx];
          }
          // don't forget to close the asciiz string
          buffer[buflen - shrink] = 0;

          // align ptr
          ptr = 1 + ptr - shrink;
          // align buffer
          buflen -= shrink;

        } else {   // expan if replacement is longer

          int expand = replen - patlen;
          int bufend = buflen + expand;  // buffer end after expand
          if (bufend > maxLength - 1) bufend = maxLength - 1;  // apply maxLength

          // make room by copying remaining to the end of the string
          for (int idx = bufend; idx > ptr + matlen + expand; idx--) {
            buffer[idx - 1] = buffer[idx - 1 - expand];
          }
          // fill the hole with the remainig part of the replacement
          for (int n = matlen; n < replen; n++) {
            buffer[n + ptr] = replacement[n];
          }
          // don't forget to close the asciiz string
          buffer[bufend] = 0;

          // align ptr
          ptr = 1 + ptr + expand;
          // align buffer
          buflen = bufend;

        } // if shrink else expand

        // continue from new ptr

      } // scan buffer

    } // strReplace() 
```*

# jquery - JQuery - 根据其类使整个 div 链接到不同的事物

> ID：14653565
> 
> 赞同：0
> 
> 时间：2013-02-01T19:24:57.207
> 
> 标签：jquery, arrays, class, hyperlink

Jquery 的新手，还不太了解如何使用它来处理数组，我想知道如何根据其类将 div 制作成链接，以及根据其类使其链接到不同的事物（下面的示例）。

CSS -

```
.a (link to domain.com/a)
.b (link to domain.com/b)
.c (link to domain.com/c) 
```

HTML

```
<div class="a">
<div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:31:07.240

是的，您可以这样做：

```
$('.a').click(function(){
    window.location = "www.google.com";
});
$('.b').click(function(){
    window.location = "www.yahoo.com";
}); 
```

将`www.google.com`和替换`www.yahoo.com`为您想要的课程地址`a`和`b`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:32:25.743

这个小片段会做到这一点：

```
$(function () {
    $('div').each(function () {
        $(this).wrap('<a href="http://example.com/' + $(this).attr('class') + '" />');
    });
}); 
```

jsfiddle 上的演示 - [http://jsfiddle.net/FloydPink/zkuFA/](http://jsfiddle.net/FloydPink/zkuFA/)

这样做是使用[jQuery wrap 函数](http://api.jquery.com/wrap/)使用其属性动态添加`anchor`标签`classname``div``href`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:47:18.487

这可以通过`window.location.replace()`这种方式实现：

```
 $('.a').click(function(){
   window.location.replace('http://www.mysite.com/'+$(this).attr('class'));
   //---------> output url---> http://www.mysite.com/a
 });

 $('.b').click(function(){
   window.location.replace('http://www.mysite.com/'+$(this).attr('class'));
   //---------> output url---> http://www.mysite.com/b
 }); 
```

这将用新文档替换当前文档。

# makefile - GNU 为批处理文件处理制定隐含规则

> ID：14653566
> 
> 赞同：1
> 
> 时间：2013-02-01T19:24:58.197
> 
> 标签：makefile, rules, implicit

我想使用*GNU make*来自动化批处理文件处理，在我的特殊情况下，我有大量的图像文件，我想将色彩空间转换并重新编码为自定义文件格式。文件格式编码器只接受命令行上的文件名，即不接受 stdio 重定向。

我的文件和目录结构是

```
./sourceimages/*.tif
./destimages/*.mie
./Makefile 
```

我写了一个带有模式规则的 Peliminary Makefile

```
%.mie : %.tif
    tmpraw := $(shell mktemp --suffix=raw)
    convert $< -colorspace YUV -resize …x… rgb:$(tmpraw)
    miecoder $(tmpraw) $@
    rm $(tmpraw) 
```

但是现在我被卡住了，因为我不知道如何使*make*将所有文件`sourceimages`作为`destimages`. 那么我该怎么做呢？

我真的很想使用*make*来利用它的并行执行能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:32:25.127

首先，您使用`mktemp`创建唯一的临时文件名是不必要的，并且会导致其他问题；如果您要转换`foo.tif`为`foo.mie`，我们只需调用临时文件`foo_temp.tif`.

```
%.mie : %.tif
    convert $< -colorspace YUV -resize …x… rgb:$*_temp.tif
    miecoder $*_temp.tif $@
    rm $*_temp.tif 
```

接下来，我们输入路径，以便 Make 可以使用另一个地方的先决条件在一个地方构建目标：

```
destimages/%.mie : sourceimages/%.tif
    convert $< -colorspace YUV -resize …x… rgb:$*_temp.tif
    miecoder $*_temp.tif $@
    rm $*_temp.tif 
```

最后，我们寻找来源，推断出所需目标的列表，然后使它们成为默认目标的先决条件（将所有这些放在`destimages/%.mie:...`makefile 中的规则之上）：

```
SOURCES := $(wildcard sourceimages/%.tif)
TARGETS = $(patsubst sourceimages/%.tif, destimages/%.mie, $(SOURCES))

.PHONY: all
all: $(TARGETS) 
```

# android - 无法播放音乐文件

> ID：14653567
> 
> 赞同：1
> 
> 时间：2013-02-01T19:25:00.290
> 
> 标签：android, file, audio

我试图让用户选择一个文件，然后再播放。

```
case R.id.choose_ringtone_btn:
        isPaused = true;
        Intent intent = new Intent();
        intent.setType("audio/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent, "Select Audio "), REQUEST_ID);
        break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_ID && data != null) {
        Uri uri = data.getData();
        savefile(uri);
        editor.putString(URI_STR, uri.toString()).commit();
    }
}

void savefile(Uri sourceuri)
{
    String sourceFilename= sourceuri.getPath();
    String destinationFilename = android.os.Environment.getExternalStorageDirectory().getPath()+File.separatorChar+"abc.mp3";

    BufferedInputStream bis = null;
    BufferedOutputStream bos = null;

    try {
      bis = new BufferedInputStream(new FileInputStream(sourceFilename));
      bos = new BufferedOutputStream(new FileOutputStream(destinationFilename, false));
      byte[] buf = new byte[1024];
      bis.read(buf);
      do {
        bos.write(buf);
      } while(bis.read(buf) != -1);
    } catch (IOException e) {

    } finally {
      try {
        if (bis != null) bis.close();
        if (bos != null) bos.close();
      } catch (IOException e) {

      }
    }
} 
```

我不能通过这个： bis = new BufferedInputStream(new FileInputStream(sourceFilename)); 这是为什么？

# c# - Azure Web 角色中的 WCF 休息 Web 服务 - 404 错误

> ID：14653570
> 
> 赞同：0
> 
> 时间：2013-02-01T19:25:01.590
> 
> 标签：c#, wcf, rest, azure

我已经通过堆栈交换进行了搜索，虽然有很多类似的问题，但我无法解决这个问题。我需要在 Azure webrole 上运行 WCF Web 服务（因为我也在运行常规网页）而不是 Azure Web 服务角色。我已经设置了 WCF 服务并在 web.config 中定义了端点，但我无法通过浏览器或客户端连接到端点。下面是代码 - 如果有人能就可能出现的问题提出建议，我将不胜感激。

鉴于下面的代码，我假设以下代码可以在浏览器中使用

```
http://127.0.0.1:81/testAPI.svc/store/ 
```

但我得到一个 404 如果我只是指定

```
http://127.0.0.1:81/testAPI.svc 
```

我得到的页面告诉我我有一个网络服务。

**测试API.cs**

```
namespace MvcWebRole1
{

    [ServiceContract]
    public interface ItestAPI
    {

        [OperationContract]
        [WebGet(UriTemplate = "store",
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare)]
        List<Financials> GetStoreActuals();
    }
} 
```

**测试API.svc**

```
namespace MvcWebRole1
{

    public class testAPI : ItestAPI
    {
            public List<Financials> GetStoreActuals()
            {
                return GetActuals();

            }

            private List<Financials> GetActuals()
            {

                List<Financials> Actuals = new List<Financials>
                {
                    new Financials
                    {
                    Store = "Store1", Profit = "10000000", Sales = "2000000"
                    },
                    new Financials
                    {
                    Store = "Store2", Profit = "20000000", Sales = "30000"
                    },
                    new Financials
                    {
                    Store = "Store3", Profit = "30000000", Sales = "4000000"
                    },
                    new Financials
                    {
                    Store = "Store4", Profit = "4000000", Sales = "500000"
                    },

                };
                return Actuals;
            }

    }

    [DataContract]
    public class Financials
    {
        [DataMember]
        public string Store { get; set; }
        [DataMember]
        public string Sales { get; set; }
        [DataMember]
        public string Profit { get; set; }

    }
} 
```

最后是**web.config中的服务模型**

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="servicebehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="restbehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name ="MvcWebRole1.testAPI" behaviorConfiguration ="servicebehavior" >
        <endpoint name ="RESTEndPoint"
        contract ="MvcWebRole1.ItestAPI"
        binding ="webHttpBinding"
        address =""
        behaviorConfiguration ="restbehavior"/>
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

非常感谢这里的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:11:08.363

我发现了以下内容：如果我使用上述类和配置设置了 WCFServiceWebRole，那么它一切正常。尝试在 MCVWebRole 中运行上述内容时，这只是一个问题。

在玩弄了 MVCWebRole web.config 之后，我终于让它工作了。正如您可能会告诉我的那样，我是 .NET 的新手，但是从我的 MVWWebRole 中删除以下内容解决了这个问题。我相信这会产生后果，但至少我已经隔离了这个问题。

只是想我会分享以防它帮助其他人。

这是我删除的

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer> 
```

如果有人能准确地告诉我是什么导致了问题，那将会很有帮助。谢谢

# openstreetmap - 使用部分 OSM 地图限制？

> ID：14653571
> 
> 赞同：1
> 
> 时间：2013-02-01T19:25:09.247
> 
> 标签：openstreetmap

在我设置 OSM 之前，我需要在托管这个星球或只是它的一部分之间进行选择。我更喜欢第一个，但我担心这会产生影响。

是否可以选择在我的机器上只获取几个国家，并将其他标题的请求转发到其他服务器？或者他们不会出现在我的网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-16T07:08:24.517

您可以托管地球或仅托管某些国家/地区，这是可能的。如何设置 OSM 服务器的手册： http: [//switch2osm.org/serving-tiles/building-a-tile-server-from-packages/](http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/)

这仅取决于您的服务器容量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:12:46.433

我不知道任何现成的解决方案。因为渲染的地图通常由方形[图块](https://wiki.openstreetmap.org/wiki/Tiles)组成，您必须为每个图块定义一些相当复杂的比较，以决定是从您自己的服务器还是从其他服务器检索它。

# c# - GeckoWebBrowser 未显示（句柄）（C# WinForms）

> ID：14653572
> 
> 赞同：0
> 
> 时间：2013-02-01T19:25:10.223
> 
> 标签：c#, .net, browser, gecko

我想使用 geckoWebBrowser 但它说我必须将句柄分配给要显示的东西。经过一番搜索，一个不错的解决方案似乎是将其分配给一个标签页，尤其是模拟多个标签页，这是我想做的。但我不知道它是如何工作的。将浏览器的父级分配给标签页没有任何作用。在谷歌上搜索时，我几乎找不到任何关于创建句柄的信息。

有人可以给我一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:33:57.697

解决了。我不得不调用 CreateControl() 然后将选项卡分配为父级确实有效。

# objective-c - 如何使用 NSRegularExpression 解析字符串以使用正则表达式提取数字？

> ID：14653573
> 
> 赞同：3
> 
> 时间：2013-02-01T19:25:14.027
> 
> 标签：objective-c, regex, macos, cocoa, nsregularexpression

我是正则表达式的新手，不知道如何使用它们。我想为下面的一段文本创建一个正则表达式来获取最小、平均和最大时间。我会将它们与 NSRegularExpression 一起使用来获取范围和字符串。

有人可以帮助为以下文本创建正则表达式。

```
round-trip min/avg/max/stddev = 3.073/6.010/13.312/2.789 ms 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T19:42:51.100

把它分解。

我假设您想从该字符串中获取数值并扔掉其余的。

首先制作一个正则表达式来匹配一个数字：

*   `\d`匹配一个数字
*   `\d*`匹配零个或多个数字
*   `\.`匹配一个句点
*   `(\d*\.\d*)`匹配零个或多个数字，然后是句点，然后是零个或多个数字

然后把它变成一个 Cocoa 字符串：

*   `@"(\\d*\\.\\d*)"`

然后做一个[`NSRegularExpression`](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)：

```
NSError error;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(\\d*\\.\\d*)"
    options:NSRegularExpressionCaseInsensitive
    error:&error]; 
```

然后得到一个包含所有匹配项的数组：

```
NSArray *matches = [regex matchesInString:string
                              options:0
                                range:NSMakeRange(0, [string length])]; 
```

然后提取值：

```
NSString* minText = [string substringWithRange:[matches[0] range]];
NSString* avgText = [string substringWithRange:[matches[1] range]];
// etc. 
```

我将这些字符串转换为浮点数作为练习。:-)

* * *

**更新：**我发现自己对它的复杂性感到非常恶心，所以我做了一个小库，我谦卑地称之为[Unsuck](https://github.com/alexch/unsuck) ，它以和方法`NSRegularExpression`的形式增加了一些理智。以下是您如何使用它们：`from``allMatches`

```
NSRegularExpression *number = [NSRegularExpression from: @"(\\d*\\.\\d*)"];
NSArray *matches = [number allMatches:@"3.14/1.23/299.992"]; 
```

请[查看 github 上的 unsuck 源代码，](https://github.com/alexch/unsuck)并告诉我我做错的所有事情 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:32:30.377

我知道你想要一个正则表达式，它们学习起来非常方便，但在这种情况下，它可能比你需要的要重一些。考虑到这一点，我提供了一个替代方案。我相信其他人也会给你一个正则表达式。

```
NSString* str = @"round-trip min/avg/max/stddev = 3.073/6.010/13.312/2.789 ms";

NSString* str2 = [str substringFromIndex:32];

NSArray* components = [str2 componentsSeparatedByString:@"/"];

CGFloat min = [[components objectAtIndex:0] doubleValue];
CGFloat avg = [[components objectAtIndex:1] doubleValue];
CGFloat max = [[components objectAtIndex:2] doubleValue];

NSLog(@"min/avg/max: %f/%f/%f",min,avg,max); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:40:51.997

我通过使用来管理这个`(.*) = (.+?)/(.+?)/(.+?)/(.*)`

# jquery - jquery ui滑块元素返回对象

> ID：14653575
> 
> 赞同：1
> 
> 时间：2013-02-01T19:25:22.830
> 
> 标签：jquery, jquery-ui

我正在尝试使用滑块控制图表中条形的高度。这是基于[此处](http://jqueryui.com/slider/#colorpicker)找到的滑块示例。我在从滑块中获取值时遇到问题。我创建[了一个 JSfiddle 来演示这一点](http://jsfiddle.net/sevenless/cXMkN/)。

问题出在函数refeshGraph()中

```
function refreshGraph() {
var jan = $("slider1").slider("option","value"),
feb = $("slider2").slider("option","value"),
mar = $("slider3").slider("option","value"),
apr = $("slider4").slider("option","value"),
may = $("slider5").slider("option","value");

console.log(feb)

sliderData = new Array(
        [jan,'Jan','#222222'],
        [feb,'Feb','#7D252B'],
        [mar,'Mar','#EB9781'],
        [apr,'Apr','#FFD2B5'],
        [may,'May','#4A4147']
    );

$('.exampleSimpleColors').show();
$('#exampleSimple').html('');
$('#exampleSimple').jqbargraph({ data: sliderData});

} 
```

我没有将值存储在变量中，而是得到了整个滑块对象。我知道[这个 StackOverflow 帖子](https://stackoverflow.com/questions/12881198/why-does-the-jquery-ui-slider-return-an-object)，其中 OP 有同样的问题。我试图应用答案，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:38:31.717

You forget **#** in slider declaration

in your code `$("slider1").slider("option","value"),`
but should be `$("#slider1").slider("option","value"),`

Fix that and It will work.

# c++ - cin.getline 不允许用户输入值

> ID：14653577
> 
> 赞同：0
> 
> 时间：2013-02-01T19:25:37.947
> 
> 标签：c++

> **可能重复：**
> [cin.getline() 正在跳过 C++ 中的输入](https://stackoverflow.com/questions/10199897/cin-getline-is-skipping-an-input-in-c)

我正在研究 C++，以获取 2 部电影的一些数据，如下所示：

```
 struct Movie m1, m2;
    cout << "Enter first movie title: ";
    cin.getline(m1.title, 30); 
    cout << "Enter first movie director: ";
    cin.getline(m1.director, 30); 
    cout << "Enter first movie length: ";
    cin >> m1.length; 

    cout << "Enter second movie title: ";
    cin.getline(m2.title, 30);
    cout << "Enter second movie director: ";
    cin.getline(m2.director, 30); 
    cout << "Enter second movie length: ";
    cin >> m2.length; 
```

但是，令我惊讶的是，在输出中输入第二部电影的标题并不全是我。这是输出

```
Enter first movie title: Girl

Enter first movie director: GirlD

Enter first movie length: 10

Enter second movie title: Enter second movie director: Boy

Enter second movie length: 20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:50:42.180

,`cin >> m1.length;`它只读取数字，所以它离开`\n`, 下一个 getline 将读取空行，因此您可以这样读取：

```
string temp;
cin.getline(temp, 30);
stringstream sst(temp);
sst >> m1.lenght; 
```

# sql-server - SQL Server 2008 列出具有重复值的行

> ID：14653578
> 
> 赞同：1
> 
> 时间：2013-02-01T19:25:41.263
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我有一个 SQL 服务器（2008 R2），它将文件的元数据存储在表中。每个文件都有自己的 Row，每个文件都有一个为它计算和存储的 MD5。我想打印一个 MD5 值在服务器中多次出现的文件列表，这样我就可以检查并识别随着时间的推移重复的文件并决定删除哪个文件。我有一个相当混乱的命令，里面有几个内部连接，我发现几年前我的 MySQL 服务器可以使用，但是将它修改为 SQL Server 还没有为我工作。任何人都知道任何更简单的方法来做到这一点？下面是我正在尝试的修改后的 MySQL 命令。谢谢

```
select [IGCSlidesDB].[dbo].[FilePath]
, [IGCSlidesDB].[dbo].[FileSize]
, [IGCSlidesDB].[dbo].[MD5] from [IGCSlidesDB].[dbo].[MD5Tool]
inner join ( select 
    [IGCSlidesDB].[dbo].[FilePath],
    [IGCSlidesDB].[dbo].[FileSize],
    [IGCSlidesDB].[dbo].[MD5] from [IGCSlidesDB].[dbo].[MD5Tool] group by [MD5] having count(*)>1) 
as t2 on ([IGCSlidesDB].[dbo].[MD5Tool].[MD5]=[t2].[MD5])
order by [IGCSlidesDB].[dbo].[MD5Tool].[FilePath]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:33:18.297

尝试这个：

```
;WITH CTE AS
(
    SELECT  *, 
            COUNT(*) OVER(PARTITION BY [MD5]) Total
    FROM [IGCSlidesDB].[dbo].[MD5Tool]
)
SELECT *
FROM CTE 
WHERE Total > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:29:38.703

如果我对您的理解正确，对于重复的 MD5Tool 表中的每个 MD5，您要返回这些行吗？

试试这个：

```
SELECT M.FilePath, M.FileSize, M.MD5
FROM MD5Tool M
INNER JOIN ( 
    SELECT MD5 FROM MD5Tool GROUP BY MD5 HAVING COUNT(*)>1
) M2 ON M.MD5 = M2.MD5
ORDER BY M.FilePath; 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/cf990/1)。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:39:29.427

Another possibility:

```
select filepath, filesize, md5 
     from MD5Tool 
where md5 in 
     (select md5 from md5tool group by md5 having count(1) > 1)
order by filepath 
```

# javascript - 如何检查 JSON 数组是否包含不同/多个键值对

> ID：14653594
> 
> 赞同：0
> 
> 时间：2013-02-01T19:26:53.567
> 
> 标签：javascript, jquery, json

我有一个 JSON 数组，想实现一个过滤引擎，我尝试找到一个解决方案，用一个特殊的键：值对获取所有这些条目并将其推送到一个 sep 数组中。

JSON 看起来像这样：

```
var sample = {
    "response": {
        "things": [{
            "index": 0,
            "type": 1,
            "img":2
        },{
            "index": 1,
            "type": 0,
            "img":1
        },{
            "index": 2,
            "type": 1,
            "img":1
        }]
    }
}; 
```

示例 HTML：

```
<select name="type">
<option value="0">one</option>
<option value="1">two</option>
...
</select> 
```

目前我已经制定了一个运行良好的解决方案，仅使用一个键和值进行过滤，这不是重点。问题是获取对象： Object:{param:1,param:2,param:3,param:n} 并找到具有这些过滤器对的所有条目。

我没有找到正确的方法来处理多个或如何在这里使用，所以我希望有人可以帮忙。

```
 var uri =['http://example.com?type=1&img=0'];

        for (var i = 0, len = uri.length; i < len; i++) {
            var result = this.qwertzSplit(uri[i]);
        }
        testing(result);
//qwertzSplit contains the Object: Object{type="1",img="0"}
    function testing(result){
        var obj = this.sample,indexes = [];

        for (result in obj) {
            if (obj.hasOwnProperty(result)) {
                indexes.push(result);
            }
        }
       console.log(indexes);
} 
```

因此，就我而言，kolink 的解决方案和我当前的解决方案可以满足我的需要。而且我也找不到正确的 JS 方法来解决它。我在这里的问题不是重复的，因为发布的链接处理单一方式，而不是多种方式。

所以我必须找到一种方法来获取具有给定键/值对的所有条目，这些键/值对取出 URI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:38:51.247

> my question is how get all entries with the type:0 and save this information into a Javascript array – JohnDoo 1 min ago

That's easy.

```
var out = [], i, l = sample.response.things.length;
for( i=0; i<l; i++) {
    if( sample.response.things[i].type == 0) out.push(sample.response.things[i]);
} 
```

# python - 在图像上用 Python 实现 Kruskal 算法

> ID：14653595
> 
> 赞同：3
> 
> 时间：2013-02-01T19:26:56.883
> 
> 标签：python, image, algorithm, kruskals-algorithm

网格使用存储在两个数组中的边缘定义图像：

*   `h[x][y]``x,y`给出从to的边权重`x+1,y`
*   `v[x][y]``x,y`给出从to的边权重`x,y+1`

我正在尝试实现 Kruskal 的算法。这相当简单——我可以在[网上找到实现](https://github.com/israelst/Algorithms-Book--Python/blob/master/5-Greedy-algorithms/kruskal.py)并复制它们。问题是处理边缘。具体来说; 对它们进行排序令人困惑。

有没有更好的方法来专门存储这个拍摄的边缘？我希望它们从每个像素到相邻像素。我将图像存储为 i[x][y]，边缘权重只是图像值之间的差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:32:59.940

您需要做的是创建所有边缘的列表，然后对它们进行排序。为此，您需要定义一个 Edge 类：

```
class Edge:
    def x
    def y
    def direction
    def weight 
```

然后，解析`h`和`v`矩阵并建立`edges`列表。最后，它应该有`2 * N * M`元素。边缘的方向应该是`'h'`或`'v'`，具体取决于您解析的矩阵。

如果您不将`h`和`v`矩阵用于任何其他目的，则可以完全放弃它们，因为您可以直接从`i`矩阵计算边的权重。

最后，出于算法的目的，您需要使用权重作为标准对列表进行排序：

```
edges.sort(key=weight) 
```

# performance - 给定 a 和 p 是 n 位数， mod p 的大 O 运行时间是多少？

> ID：14653596
> 
> 赞同：8
> 
> 时间：2013-02-01T19:26:59.317
> 
> 标签：performance, big-o

我正在尝试查找包含 a%p 计算的算法的运行时间。如果 a 和 p 是 n 位数，这一步需要多长时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:30:54.683

`O(1)`如果您使用硬件实现，则模运算是 on 。（原因是，对同一组有限输入值的每个操作都在 中`O(1)`）否则，任意长度整数的任何软件实现都应该具有与相同输入数字除法相似的复杂性。我不确定那到底是什么。

编辑：我有预感，`O(n²)`但我没有准备好证明。

EDIT2：很难对此提供完整和正确的答案，因为复杂性不取决于**问题**，而是取决于**实现**，因此，不同的实现具有不同的复杂性，问题只能给出可实现性能的下限的求解算法。

**然而，目前还没有**乘法复杂度的下限。并且由于模的下限实际上取决于乘法的下限（请参阅评论中发布的链接。我读过它，这是好东西！），模实现的复杂性也没有下限，并且所以我们无法准确估计模数的可实现性能。

但是由于我们谈论的是 Big-O 表示法，我可以肯定地说，任何体面的模实现在 in 中`O(n²)`，并且大多数都在`O(n²)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-08T20:35:25.077

它是 O1，因为 int 或 long 的位是恒定的

# jquery - 具有固定位置和滚动的多个 div

> ID：14653602
> 
> 赞同：1
> 
> 时间：2013-02-01T19:27:44.093
> 
> 标签：jquery, css, html, fixed, sticky

我有 4 个 div，我想向下滚动并覆盖所有这些 div。但是...保持当前 div 与浏览器顶部的固定位置

只有向下滚动才能很好地工作。但是当我向上滚动失败。

您可以查看此小提琴[http://jsfiddle.net/rtSKj/](http://jsfiddle.net/rtSKj/)以获取演示

这是js代码

```
$(document).ready(function() {
    $(window).scroll(function () {

        var scrollY = $(window).scrollTop();

        if(scrollY>=500){
            $('#block2').css({'position': 'fixed', 'margin-top': 0});
            $('#block3').css({'margin-top': '1000px'});
        }

        if(scrollY>=1000){
            $('#block3').css({'position': 'fixed', 'margin-top': 0});
            $('#block4').css({'margin-top': '1500px'});
        }

    });

}); 
```

注意：div的高度为：500px；

我应该考虑滚动方向来修复行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:07:24.660

您需要“重置”位置和边距顶部。

```
if(scrollY<500) {
  $('#block2').css({'position': 'relative', 'margin-top': '500px'});
}
if(scrollY<1000) {  
  $('#block3').css({'position': 'relative','margin-top': '1000px'});
} 
```

请参阅更新的小提琴：http: [//jsfiddle.net/rtSKj/14/](http://jsfiddle.net/rtSKj/14/)

# c# - 将模型视图控制器模式实施到具有多个 Windows 的桌面应用程序

> ID：14653603
> 
> 赞同：0
> 
> 时间：2013-02-01T19:27:44.307
> 
> 标签：c#, wpf, model-view-controller

我正在学习他的 MVC 模式，并将其应用于 WPF 和 WinForms 中的一些简单的演示应用程序中，这些应用程序具有一个视图或窗口。

```
 App app = new App();
        app.MainWindow = new MainWindow();

        IModelInterface model = new ModelCalculator();
        IControllerInterface controler = new ControllerCalculator(model);
        app.Run(); 
```

我知道很多人会建议我应该使用 MVVM，我会的，但我很好奇如何使用 MVC 做到这一点。

**我的问题**是如何管理多个视图（例如：具有许多*菜单**项*的菜单）。每个*菜单项*都是一个窗口，有自己的按钮文本框等等，它们需要自己的*控制器*吗？

还是我只是把所有东西都放在一个*Controller*中？

这是`IControlerInterface`and`ControlerCalculator`类。

```
public interface IControllerInterface
{

    void Addition();
    void Divide();
    void Multiply();
    void Subtract();
    void Equals();
    void RemoveNull();
    void Clear();

    void OpenChildWindow();
}

class ControllerCalculator : IControllerInterface
{
    IModelInterface model; 

    MainWindow view;

    public ControllerCalculator(IModelInterface model)
    {
        this.model = model;
        view = new MainWindow(this,model);
        view.Show();
    }

    #region ControlerMethodsRegion

    public void Addition() 
    {
        int number = Convert.ToInt32(view.txtDisplyValue.Text);
        model.SetInput(number);
        view.txtDisplyValue.Clear();
        view.txtDisplyValue.Text = "0";
        model.SetState(States.Add);
    }

    public void Subtract()
    {
        int number = Convert.ToInt32(view.txtDisplyValue.Text);
        model.SetInput(number);
        view.txtDisplyValue.Clear();
        view.txtDisplyValue.Text = "0";
        model.SetState(States.Subtract);
    }
} 
```

我认为将所有内容放在一个 Controller 中不是解决方案，因为我需要更改接口，因为 View 使用它来调用 Controller。

那么知道如何从我的主视图管理`MenuItem`点击吗？`MainWindow`

# android - beginTransaction() 空指针？

> ID：14653608
> 
> 赞同：0
> 
> 时间：2013-02-01T19:27:59.913
> 
> 标签：android, database, sqlite, csv

因此，我在将 .csv 文件从 sdcard 导入应用程序中的 sqlite 数据库的代码部分遇到了问题。根据我的 LogCat 我的“db.beginTransaction();” 行因空指针而失败？我真的不知道如何解决这个问题，希望有人能帮助我！

这是我的代码将 csv 文件导入数据库的样子：

```
@Override
    public void onStart(){
        super.onStart();

        FileReader fr;
        try {
            fr = new FileReader(new File("mnt/sdcard/database/",
                    "fcmtest.csv"));
        } catch (FileNotFoundException e) {
            throw new Error("ERROR File Not Found");
        }
        BufferedReader br = new BufferedReader(fr);
        String data = "";
        String tableName ="MY_TABLE";
        String columns = "Serial Numbers,PartNumber,Result,Date,Time,Operator";
        String InsertString1 = "INSERT INTO " + tableName + " (" + columns + ") values(";
        String InsertString2 = ");";

        db.beginTransaction();
        try {
            while ((data = br.readLine()) != null) {
                StringBuilder sb = new StringBuilder(InsertString1);
                String[] sarray = data.split(",");
                sb.append("'" + sarray[0] + "',");
                sb.append(sarray[1] + "',");
                sb.append(sarray[2] + "',");
                sb.append(sarray[3] + "',");
                sb.append(sarray[4] + "',");
                sb.append(sarray[5] + "'");
                sb.append(InsertString2);
                db.execSQL(sb.toString());
            }
        } catch (SQLException e) {
            throw new Error("Error copying database");
        } catch (IOException e) {
            throw new Error("Error IOException");
        }
        db.setTransactionSuccessful();
        db.endTransaction();

    } 
```

这是Logcat：

```
02-01 14:20:04.071: W/dalvikvm(7655): threadid=1: thread exiting with uncaught exception (group=0x41033930)
02-01 14:20:04.071: E/AndroidRuntime(7655): FATAL EXCEPTION: main
02-01 14:20:04.071: E/AndroidRuntime(7655): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.magna.magna/com.magna.magna.FCM}: java.lang.NullPointerException
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.os.Looper.loop(Looper.java:137)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at java.lang.reflect.Method.invoke(Method.java:511)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at dalvik.system.NativeStart.main(Native Method)
02-01 14:20:04.071: E/AndroidRuntime(7655): Caused by: java.lang.NullPointerException
02-01 14:20:04.071: E/AndroidRuntime(7655):     at com.magna.magna.FCM.onStart(FCM.java:56)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1164)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.Activity.performStart(Activity.java:5114)
02-01 14:20:04.071: E/AndroidRuntime(7655):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2153)
02-01 14:20:04.071: E/AndroidRuntime(7655):     ... 11 more 
```

在 (FCM.java:56) 行是 db.beginTransaction(); 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:49:09.023

`NullPointerException`你在那条线上得到了 a ，因为`db`is `null`。您永远不会在上面显示的代码中进行初始化`db`。您可以通过将非`null`值分配给 来修复它`db`。

# .net - 如何以编程方式从 VSS 备份驱动器中读取项目？

> ID：14653609
> 
> 赞同：1
> 
> 时间：2013-02-01T19:28:01.647
> 
> 标签：.net, powershell, volume-shadow-service

我使用 VSS 备份到备份驱动器。我想将该驱动器附加到另一台机器上并列出其上的所有备份，然后列出特定备份中的所有项目。

我知道您可以使用该`wbadmin`工具在命令提示符下执行此操作`wbadmin get versions`，`wbadmin get items`但我想以编程方式读取这些值。

我知道有用于使用 VSS 的[powershell 命令](http://technet.microsoft.com/en-us/library/ee706683.aspx)，但它们似乎只适用于本地“策略”对象。我找不到从另一台机器检查磁盘的方法（使用不同的策略）。例如，Get-WBBackupTarget 没有指向我的备份驱动器号的参数，只有一个 Policy 对象。并且 Get-WBPolicy 仅返回系统 afaik 的当前策略。

那么是否可以通过编程方式从备份驱动器中读取信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:04:19.930

你试过 get-wbdisks 吗？ [http://technet.microsoft.com/en-us/library/ee706673.aspx](http://technet.microsoft.com/en-us/library/ee706673.aspx)

> 详细说明 Get-WBDisks cmdlet 获取本地计算机联机的内部和外部磁盘的列表。可以使用 New-WBBackupTarget cmdlet 将您获得的磁盘添加到备份策略（WBPolicy 对象），以将它们指定为备份存储位置。

# php - 从php中的字符串中删除年份（yyyy）

> ID：14653612
> 
> 赞同：2
> 
> 时间：2013-02-01T19:28:26.333
> 
> 标签：php, regex

我无法让正则表达式从字符串中识别日期并使用字符串替换将其删除：

```
<?php

$string = "keywords=2012+some+words";

echo $string ."<br />";

$new_string = str_replace("keywords=/^([0-9]{4})$/","keywords=",$string);

echo $new_string ;
?> 
```

我已阅读这篇文章[Regex to remove year from a string PHP](https://stackoverflow.com/questions/6073218/regex-to-remove-year-from-a-string-php)

只是不能让它工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:30:03.163

要使用正则表达式，请使用[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)并将其传递给实际的正则表达式：

```
$new_string = preg_replace("/^keywords=\d{4}/", "keywords=", $string); 
```

在此处查看实际操作：[http ://codepad.viper-7.com/dxwxvG](http://codepad.viper-7.com/dxwxvG)

# iphone - Apple Notification Service 的最大并发连接数是多少

> ID：14653617
> 
> 赞同：1
> 
> 时间：2013-02-01T19:28:37.453
> 
> 标签：iphone, objective-c, apple-push-notifications

我的应用程序需要发送许多通知消息。因此，我想知道我可以打开多少个并发连接到 Apple 通知服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:51:47.130

该文档没有指定您可以使用 Apple 的 Push 服务器建立的套接字连接数的限制。但根据经验，您可以通过一个连接发送大量消息（每分钟 100 条或 1000 条，如果不是更多）。话虽如此，您当然可以打开更多连接。只要确保检查可能发生的最终断开连接。

# c++ - c++ 成员变量不会在函数之外更改

> ID：14653618
> 
> 赞同：-3
> 
> 时间：2013-02-01T19:28:40.057
> 
> 标签：c++

附加的代码似乎可以按需要工作，但是当它位于单独的文件中时，main.cpp、Set.h、Set.cpp 填充不会在删除函数之外递减。我真的不明白这里发生了什么。或者为什么它会在一个文件中产生任何影响。

```
#include <iostream>
using namespace std;
typedef int value_type;

class Set {
private:
value_type *dataArray, size, filled;
public:

Set() {
    size = 50;
    dataArray = new value_type[size];
    filled = 0;
}

bool Set::isFull() const {
    return (filled == size) ? true : false; // if filled is equal to size then full.
}

bool Set::remove(const value_type& item) {

    for (int index = 0; index < filled; index++) {
        if (index != (filled - 1) && dataArray[index] == item) {
            dataArray[index] = dataArray[filled - 1];
            --filled;
            return true;

        } else {
            --filled;
            return true;
        }
    }

    return false;
}

void Set::insert(const value_type& newItem) {

    if (!isFull()) {
        dataArray[filled] = newItem;

        filled++; // increment filled to account for new entry.

    }
}

friend ostream& operator<<(ostream& out, const Set& obj) {
    out << "\nfilled: " << obj.filled << endl;
    out << "{";

    for (int index = 0; index < obj.filled; index++) {
        out << obj.dataArray[index];
        if (index != (obj.filled - 1))
            cout << ",";

    }
    out << "}";
    return out;
}
};
Set firstSet;

void pauseNwait() {
cout << "<--Enter to Continue-->";
cin.ignore();
cin.get();
}

int main() {

int choice = -1;
value_type input;

while (choice != 0) {
    cout << "       Set Manager" << endl
            << " (1) Add item to Set 1" << endl
            << " (2) Remove item from Set 1" << endl
            << " (0) Exit" << endl
            << "-----------------------------------------" << endl
            << "Choose: ";
    cin.clear();

    if (cin >> choice) {
        switch (choice) {
            case 0:
                // Exit.
                break;
            case 1:
                cout << "Enter int to add to list: ";
                cin >> input;
                firstSet.insert(input);
                cout << "First Set: " << firstSet << endl;
                pauseNwait();
                break;
            case 2:
                cout << firstSet << endl;
                cout << "Enter item to remove from list: ";
                cin >> input;
                firstSet.remove(input);
                cout << "First Set: " << firstSet << endl;
                pauseNwait();
                break;
            default:
                break;
        }
    } else {
        cin.clear(); // clear cin to avoid invalid menu input errors.
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:45:01.970

如果**dataArray**是该类的成员，那么您看到的可能是在数组边界之外分配值的副作用。

将会发生的情况是该值将被设置到相邻的类成员上，您不会得到任何异常，因为内存确实属于您的程序（它仍在类内）。

场景：

循环遍历数组，没有找到任何东西。
现在**索引**超出范围。
您检查该位置的 item 是否等于**item**。它可能等于项目。然后将数组中的“最后一个”项复制到该位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T04:16:23.830

我找到了问题感谢人们迫使我在一个文件中制作一个较小的版本。在原始程序中，我有多个要操作的对象，因此我在 main.cpp 中创建了一个函数，该函数可以处理函数参数中提供的不同对象。这样做我将对象的副本传递给辅助函数而不是引用。插入函数工作正常的原因是因为我作为参考传递了。谢谢大家的帮助，如果我从这次经历中学到了什么，那就是我应该提供最小化的完全可编译的代码，这将来可能会阻止我寻求帮助。

# python - 在Django中使用annotate as group by时如何获取其他列？

> ID：14653622
> 
> 赞同：0
> 
> 时间：2013-02-01T19:29:10.363
> 
> 标签：python, django, django-models, group-by, aggregate-functions

我想对一个班级的学生进行分组，并获得最高成绩以及最高成绩的学生的姓名。

我想使用 Django 模型复制这个 SQL 查询：

```
SELECT class_name, MAX(grade), name FROM students ORDER BY grade DESC GROUP BY class_name 
```

使用此代码，我可以获得 class_name 和 max(grade) 但似乎无法获得名称。

```
entity.objects.values('class_name').order_by('-grade').annotate(Max('grade')) 
```

显然，根据 SQL Server，此查询是错误的，但 MySQL 可以，它返回第一行的名称，这是我想要的，因为 ORDER BY。

有任何想法吗？

# c# - 如何在 GeckoFX 中设置用户代理？

> ID：14653627
> 
> 赞同：6
> 
> 时间：2013-02-01T19:29:31.617
> 
> 标签：c#, geckofx, winforms-to-web

使用webbrowser控件一段时间后，我决定试试gecko，因为我遇到过webbrowser的问题，速度慢，性能下降。我下载了最新版本的 geckofx (16.0.0.2) 和 xulrunner(16.0.2) 并创建了一个 geckoWebbrowser 控件。当我试图导航到一个网页时，我收到了一个 javascript.alert，我的网络浏览器不受支持，我应该使用 firefox>2.0.0.2，这当然是荒谬的。问题是 - 我假设 - 检测到的用户代理字符串是“Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/ /16.0”而不是正常的 Firefox 字符串“Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0"。控件的用户代理字符串中缺少“20100101”和“Firefox”。有没有办法使用 C# 来改变它？我使用 C# winforms .net 4.5。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T19:33:13.943

从[http://www.webprogrammingblog.com/geckofx-set-user-agent/](http://www.webprogrammingblog.com/geckofx-set-user-agent/)：

```
public Form1()
{
    InitializeComponent();
    Gecko.Xpcom.Initialize("c:\\tools\\xulrunner");
    myBrowser = new GeckoWebBrowser();
    myBrowser.Parent = this;
    myBrowser.Dock = DockStyle.Fill;

    string sUserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; pl; rv:1.9.1) Gecko/20090624 Firefox/3.5 (.NET CLR 3.5.30729)";
     Gecko.GeckoPreferences.User["general.useragent.override"] = sUserAgent;
} 
```

# c++ - cppcheck 输出路径似乎错误

> ID：14653630
> 
> 赞同：2
> 
> 时间：2013-02-01T19:29:54.027
> 
> 标签：c++, path, cppcheck

我正在尝试使用[cppcheck](http://cppcheck.sourceforge.net/ "cppcheck")来分析我的 c++ 项目。我的命令如下所示：

```
me@home:trunk/software/cpp/tnoid$ cppcheck -v --enable=all --xml -I ../../../package/build/common/cpp/ -I ../../../package/build/software/cpp/tnoid/ . 
```

您可以看到我在哪里包含 (-I) 两个附加目录。在结果中，它似乎被截断了，而不是返回那些（不幸的是长）相对路径，例如：

```
<error file="/../package/build/common/cpp/libutil/DeleteNullifier.h" line="34" id="postIncrementDecrement" severity="possible style" msg="Pre-Incrementing variable 'iter' is preferred to Post-Incrementing"/> 
```

也许我错误地使用了 cppcheck？为什么错误中的文件路径出现缩短？cxx 声纳插件真的很乱。

**编辑**：这是使用 cppcheck 1.40 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:12:20.200

事实证明，无论如何我都需要升级我的 cppcheck 应用程序。

*   Ubuntu 10.04 中的版本：1.40
*   最新的 cppcheck 版本：1.58
*   最新声纳支持：1.54

升级到 1.54 解决了这个问题。相对路径现在是正确的。

# java - 多个鼠标连接到计算机，如何确定在 Applet 中触发事件的确切鼠标？

> ID：14653642
> 
> 赞同：3
> 
> 时间：2013-02-01T19:30:32.857
> 
> 标签：java, applet, awt, mouseevent, mouselistener

我打算为一个事件编写一个蜂鸣器。会有多个团队，每个团队知道答案后都会有鼠标单击，现在我必须确定首先单击的鼠标。所有鼠标都连接到同一台计算机。是否可以识别触发事件的鼠标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T23:40:19.170

本机方法是做到这一点的唯一方法，我不认为本机方法可以帮助您，除非您破解操作系统。操作系统隐藏了两个鼠标之间的所有区别。您还可以重新连接鼠标，使一个人只能右键单击，一个人只能单击鼠标左键，并区分右键单击和左键单击。

# javascript - 如何使用javascript将运算符存储在变量中

> ID：14653647
> 
> 赞同：5
> 
> 时间：2013-02-01T19:31:02.070
> 
> 标签：javascript

我想将“+”运算符存储在变量中。

```
<head>
<script type="text/javascript">
var m= function(a,b){
return a-b
}
var jj= 10 m 10;
alert(jj)
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-01T19:33:37.030

避免使用`eval`，我建议使用函数映射：

```
var operators = {
   '+': function(a, b){ return a+b},
   '-': function(a, b){ return a-b}
} 
```

然后你可以使用

```
var key = '+';
var c = operators[key](3, 5); 
```

请注意，您也可以存储`operators[key]`在变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:36:16.203

您不能按照您的要求将运算符存储在 JavaScript 中。您可以将函数存储到变量中并改用它。

```
var plus = function(a, b) { 
    return a + b;
} 
```

抱歉，JavaScript 不允许此运算符重载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:39:13.030

你不能。

有一些方法可以通过使用可用的钩子来使用 javascript 来实现运算符的自定义版本，但没有可能的方法将`m`功能转换为`+`.

@dystroy 有一个很好的例子，它使用可用的钩子来实现自定义版本的运算符，但请注意，它仍然只是使用对象访问执行某些工作的函数的经典示例。

# c# - 在 WCF Windows Phone 中投射查询时出现错误的结果

> ID：14653648
> 
> 赞同：0
> 
> 时间：2013-02-01T19:31:03.490
> 
> 标签：c#, wpf, wcf

基本上，当我尝试将查询结果转换为可用格式时，我会得到诸如“systems.collections.whatever”之类的输出

相反，我想要返回的实际数字。这就是我选择我想要的值的方式

```
 listBox2.DisplayMemberPath = "MonthlyHourLimit";
            listBox2.ItemsSource = e.Result;
            if (this.listBox2.Items.Count > 0)
                this.listBox2.SelectedIndex = 0;
            limit = listBox2.SelectedItem.ToString(); 
```

我应该得到“156”，但我得到的是“Timesheet_System.userDataService.UserData”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:35:35.270

[ListBox.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)的类型是`object`，`ToString()`任何对象的 都是类型名称。

要获取实际的字符串值，您需要先转换`listBox2.SelectedItem`为您的数据类型。

我假设你`SelectedItem`的类型是`UserData`基于它给你的名字`.ToString()`，所以使用这样的东西：

```
((UserData)listBox2.SelectedItem).ToString(); 
```

或者如果你想`limit`等于`DisplayMemberPath`

```
((UserData)listBox2.SelectedItem).MonthlyHourLimit; 
```

# reportingservices-2005 - SSRS 2005 子报表偶尔为空

> ID：14653651
> 
> 赞同：3
> 
> 时间：2013-02-01T19:31:26.917
> 
> 标签：reportingservices-2005

我有一个“父”报告，它故意不显示任何内容，但查询要计费的工作编号数据集。然后，此父报表循环遍历这些作业，并将它们一一传递到两个子报表。第一个子报告是对传入的工作计费的摘要。第二个子报告是该工作的发票、员工、小时、费率等的所有详细信息的细目。

Parent 将向 SubReports 提交大约 400 个作业。摘要报告打印精美。Detail SubReport 在大约 90 - 95% 的情况下会这样做，但在某些作业中它是空白的，并且我看到错误消息表明无法显示 SubReport。

对此进行研究时，最常见的反应是传入参数的方式存在问题。这里的情况似乎并非如此，尤其是考虑到 400 个作业中约有 380 多个完美地显示了细节。因此，我对该 SubReport 运行了特定查询，以查看我是否真的获得了其中一项违规作业的数据。是的，数百行数据，所以数据在那里，正在传递单个参数。

还有什么可能导致此错误？

报告继续过去的错误，所以这很好，但我也需要显示这些详细信息表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:47:09.123

为了调试此类问题，我采用以下方法。

1.  确定它是否是一组特定的数据。IE 是一组特定的工作编号。您可以通过以某种方式（参数、硬代码等）限制查询来做到这一点
2.  如果它与数据相关，请缩小范围，直到找到导致问题的实际数据
3.  如果它与数据无关，那么我会一一缩小渲染技术的范围。

    *   首先我使用单独的浏览器
    *   然后我尝试不同的报表服务器
    *   最后是不同的报表查看器（SharePoint native、direct、visual studio 等）。

通常我发现这是一个小的数据转换问题，它会抛出以下数据流渲染。

也不要忽视报告系统中的错误——我认为你使用的是遗留技术。

注意 仅仅因为子报表是自己呈现的，并不意味着它可以与主报表一起使用。不同部分相互作用的方式也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:33:17.500

此问题已得到解决。我在这里为任何可能遇到类似情况的人发布我的解决方案，即使这似乎是一个相当奇怪的情况。该问题与应用于表的各种元素的 Hidden 属性有关。

在我们公司，工作组被分配到程序中。其中一个项目的项目经理希望在他的项目中看到按“子工作”分组的收入小计。没有人愿意看到这一点。我的解决方案是在报告中创建字段（在有问题的表中），只有在报告他的程序时才将可见性属性设置为 true。

这些报告的分组是程序/作业/子作业。我正在使用 IIF 语句将隐藏属性应用于表中的各个字段。如果是他的程序，显示数据，否则，不显示。事实证明，SSRS 2005 中的某些内容因这些隐藏字段而发生冲突，但仅限于某些工作，并且当这些工作通过时，这种冲突会导致“找不到对象”异常。我仍然不确定冲突是什么，以及为什么它并不*总是*出现。大约 95% 的报告打印正常。

解决方案是将所有隐藏值移动到表的一列，并将隐藏属性仅应用于该列。因此，整个列都根据需要隐藏，其中的所有内容都服从列本身的隐藏属性。

# php - 在 PHP 中 Ping Minecraft 服务器：小错误

> ID：14653656
> 
> 赞同：-6
> 
> 时间：2013-02-01T19:31:48.370
> 
> 标签：php, html, minecraft

我正在尝试将来自 Minecraft 服务器的数据输入到我的网页中，作为测试。这是代码：

```
<?php $host = "hub.cobalt-mc.com";
$port = 25565;
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
$connected = socket_connect($socket, $host, $port);
if ($connected) {
$ping_start = microtime(true);
socket_send($socket, "\xFE", 1, 0);
$data = "";
$result = socket_recv($socket, &$data, 1024, 0);$ping_end = microtime(true);
socket_close($socket);

if ($result != false && substr($data, 0, 1) == "\xFF") {
$info = explode("\xA7", mb_convert_encoding(substr($data,1), "iso-8859-1","utf-16be"));
$serverName = substr($info[0], 1);
$playersOnline = $info[1];
$playersMax = $info[2];
$ping = round(($ping_end - $ping_start) * 1000);
echo     "<table class=\"table table-hover\">
<th>Server Address</th>
<th>Status</th>
<th>Rank</th>
<th>Total DP</th>

<tr>
<td>$host:$ip</td>
if (($ping > '1000') || ($ping < '0')) {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
else {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
<td></td>
<td></td>
</tr>

<tr>
<td>$host:$ip</td>
<td></td>
<td></td>
<td></td>
</tr>
</table>";
                            }

 else {
 echo "<span style=\"color:#FF0000\">Error: </span>Failed to receive data";
 }
 } else {
 echo "<span style=\"color:#FF0000\">Error: </span>Failed to send data";
 }?> 
```

我得到错误：

```
Parse error: syntax error, unexpected '>' in /home/mctronco/public_html/leaderboards/serverping.php on line 27 
```

代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:37:02.990

您在该`$ping = round(...`行之后开始的回声不会在 if 语句之前终止......您不能只是`if`在中间放置一个`echo`

行内容如下：

```
<td>$host:$ip</td> 
```

应该：

```
<td>$host:$ip</td>"; 
```

然后你需要在 if 语句之后再做一次 echo ...

该代码中似乎还有无数其他问题会阻止你做你想做的事......

如评论中所述，正确的代码格式将大大有助于解决这些错误......使用为代码着色的编辑器，这样的错误会跳出来......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:38:27.617

您的错误消息指的是第 27 行：

```
Parse error: syntax error, unexpected '>' in /home/mctronco/public_html/leaderboards/serverping.php on line 27 
```

所以不清楚具体哪条线路有问题。因此，我建议您更改以下所有内容，因为您的编码非常混乱。这不是我的理想，但应该可行。

```
if ($result != false && substr($data, 0, 1) == "\xFF") {
$info = explode("\xA7", mb_convert_encoding(substr($data,1), "iso-8859-1","utf-16be"));
$serverName = substr($info[0], 1);
$playersOnline = $info[1];
$playersMax = $info[2];
$ping = round(($ping_end - $ping_start) * 1000);

echo "<table class=\"table table-hover\">";
echo "<th>Server Address</th>";
echo "<th>Status</th>";
echo "<th>Rank</th>";
echo "<th>Total DP</th>";

echo "<tr>";
echo "<td>$host:$ip</td>";
if (($ping > '1000') || ($ping < '0')) {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
else {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
echo "<td></td>";
echo "<td></td>";
echo "</tr>";

echo "<tr>";
echo "<td>".$host.":".$ip."</td>";
echo "<td></td>";
echo "<td></td>";
echo "<td></td>";
echo "</tr>";
echo "</table>";
                            }

 else {
 echo "<span style=\"color:#FF0000\">Error: </span>Failed to receive data";
 }
 } else {
 echo "<span style=\"color:#FF0000\">Error: </span>Failed to send data";
 }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:44:52.567

您的代码中有多个问题，但我要指出一个重要问题。您不能将纯 PHP 放在字符串或回显的中间。

旧代码

```
<tr>
<td>$host:$ip</td>
if (($ping > '1000') || ($ping < '0')) {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
else {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
<td></td> 
```

新代码

```
<tr>
<td>{$host}:{$ip}</td>";

if (($ping > '1000') || ($ping < '0')) {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}
else {
echo "<td><span class=\"label label-success\">Online!</span></td>";
}

echo "
<td></td> 
```

如果您在 echo 之外执行 if 语句，将其结果存储在一个变量中，然后将变量放入 echo 中，那会更好。当您在双引号内时（如您的回声），您可以让 PHP 显示变量的内容，但它不会执行语句。

# javascript - 从未使用文字表示法调用Javascript对象构造函数？

> ID：14653660
> 
> 赞同：3
> 
> 时间：2013-02-01T19:32:19.470
> 
> 标签：javascript, constructor, literals

对于在 Javascript 中创建对象的构造函数和文字表示法之间的差异和相似之处，似乎有很多不同的答案。我最近读到“*当通过对象文字符号定义对象时，实际上从未调用过 Object 构造函数。* ”（该语句在创建数组时也适用）。我知道在使用构造函数表示法时，“new”关键字是设置初始化对象的“this”关键字的原因。那么在使用文字符号创建对象时是否没有设置“this”关键字，这就是上面的句子在说“对象构造函数从未被实际调用”时的意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:39:33.830

*创建对象文字后*，该`this`值将立即在对象内部可用（但它始终[取决于 context](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)）。最好用一个例子来解释：

 *```
var obj = {
    foo : true,
    // bar : this.foo, // THIS WOULD FAIL, this IS NOT AVAILABLE YET!
    baz : function() { 
       return this; // THIS IS OK, this WILL BE AVAILABLE 
                    // WHEN THE FUNCTION IS *CALLED*
    }
};

obj === obj.baz(); // true 
```

* * *

关于你引用的那句话：

> 通过对象字面量表示法定义对象时，从不实际调用 Object 构造函数

那不准确。在幕后，`Object`构造函数*被*调用（或者至少它表现得好像是这样）。我相信这句话所指的是这之间的区别：

```
var obj = { foo : true }; 
```

还有这个：

```
function Foo() {
    this.foo = true;
}
var obj = new Foo(); 
```

两个版本都会产生非常相似（但不相同）的对象。以下是一些差异：

*   构造函数版本允许您在创建对象的同时运行其他代码（如调用函数）（只需从构造函数调用某些函数）。

*   在文字版本中，`obj instanceof Object === true`. 在构造函数版本中，`obj instanceof Object`两者`obj instanceof Foo`都是`true`.

还有其他差异，但也许这两个是最显着的。另外，我想澄清一些你似乎误解的事情：

> 我知道在使用构造函数表示法时，“new”关键字是设置初始化对象的“this”关键字的原因。

这不是真的。尽管您可以`this`从构造函数内部引用，但 的值`this`是动态确定的（例如，当您调用方法时）。我建议您阅读[MDN 文档页面`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)以更好地理解这一点。*

# 3d - RGBA8 色带伪影

> ID：14653666
> 
> 赞同：0
> 
> 时间：2013-02-01T19:32:34.507
> 
> 标签：3d, rendering, shader

我的 3d 应用程序在渲染到 RGBA8 渲染目标时出现色带伪影。我怎样才能摆脱它们（无需更精确地渲染到缓冲区）？

更新

渲染过程基本上是：
1）将几何体渲染到纹理
2）应用全屏后处理步骤（对比度、亮度、饱和度、色调映射和伽马校正）

这是两个屏幕截图，一个使用 rgba8 目标，另一个使用 rgba16f 目标。两者都在禁用后处理步骤的情况下呈现。如您所见，rgba8 渲染中存在条带伪影。

![截图比较：rgba8 - rgba16f](../Images/6c75d7f549e520234250604a68ff1dd7.png)

几何体由三个变形平面组成，这些平面使用以下着色器和启用的添加混合进行绘制：

```
float4 PlaneFP(VSOutput In) {
    float3 normal = normalize(In.WorldNormal);
    float3 eyeDirection = normalize(In.WorldPosition - scene.EyePosition.xyz);        
    float falloff = 1.0f - saturate(dot(normal, -eyeDirection));
    falloff = pow(falloff, 4.0f);        
    return float4(MaterialDiffuse * falloff, 1.0f);
} 
```

如果我启用后处理步骤，则条带伪影会更加明显。使用 rgba16f 时，条带消失，但我正在为 PS3 开发此应用程序，它无法处理带有浮点目标的 MSAA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:57:00.540

如果您看到条带，那么在您的渲染管道中的某个时刻，您的一项计算的精度并不像您想象的那么高精度。

例如，您可能有 32 位纹理、32 位光源颜色等，但如果您的漫反射计算已经在位深度与速度之间进行了权衡，那么您将看到漫射光下的马赫条带表面。

您是否至少缩小了条带的来源（通过一次切换到单个光源，用漫反射颜色替换纹理，消除镜面反射等？）根据您给我们的信息，几乎没有什么可以做帮助。一些屏幕截图至少会有所帮助。

# java - 大型、复杂的对象集。我正在寻找一个 ORM 吗？

> ID：14653668
> 
> 赞同：0
> 
> 时间：2013-02-01T19:32:46.687
> 
> 标签：java, memory-management

上下文：3d 建模/渲染包。许多类型的 3d 对象 - 几何图元，各种风格的网格对象。

加上定义纹理、材料等的 POJO。

在脚本、动画轨道和所有相关有趣的东西中定义的对象。

我的问题：随着这个包的增长，用户创建的一些场景已经达到了普通消费级硬件的极限，尤其是。内存使用。

我想做的：将大部分场景映射到磁盘，仅将当前正在修改的部分加载到 RAM 中。MemoryMappedByteBuffers 不能直接使用，因为场景中的对象都有自己的内部数据结构，有些是嵌套的。（一个网格对象有一个顶点对象的集合，每个顶点对象都有一个 Vector3D 对象。任何对象都可以有各种动画轨迹，它们有可变数量的关键帧......等等。）

我的问题：在挖掘信息时，我遇到了对 ORM 系统的描述。特别是 SimpleORM。这些可能对我有帮助吗？如果不是，为什么不呢？我可以在哪里寻找更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:54:56.940

我不会推荐 ORM，因为场景和图形不太适合关系模型。加入会杀死你。

我建议使用图形或对象数据库。查询深度嵌套的递归图会快得多。

# html - 我无法让 favicon.ico 显示

> ID：14653677
> 
> 赞同：1
> 
> 时间：2013-02-01T19:33:21.270
> 
> 标签：html, browser

我已将 favicon.ico 保存在根文件夹中，并将以下代码添加到主页的 head 部分。我已经尝试清除我的缓存并将页面添加到书签然后重新加载它。图标仍然不显示。

```
<link rel="shortcut icon" href="/favicon.ico" >
<link rel="icon" href="/favicon.ico" > 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:59:02.160

确保您使用正确的 MIME 类型提供服务；请参阅[Paul Irish 的评论](https://github.com/paulirish/html5-boilerplate/commit/37b5fec090d00f38de64b591bcddcb205aadf8ee)。

它的要点是，虽然有些人说标准的 MIME 类型是 image/vnd.microsoft.icon，但 IE 只能在使用 MIME 类型的 image/x-icon 服务时显示它。

首先，检查 favicon.ico 的 HTTP 请求的标头（使用 Firebug、Chrome Inspector Tools、IE 开发工具和任何 Safari 使用的工具。）。检查 MIME，看看它说什么。如果错误，请将其添加到您的 .htaccess 中：

```
AddType image/x-icon ico 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:04:36.260

如果 MIME 类型不是问题，请参阅mercator 的[出色答案](https://stackoverflow.com/a/1344379/361933)；您实际上不必为它添加 <link> 标记，因为浏览器会自动请求 /favicon.ico，除非您

*   将其设为 .png，
*   将其定位在 Web 根目录以外的其他位置，
*   或者真的，真的想将图标命名为 favicon.ico 以外的名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T19:41:01.060

应该是

```
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" href="/favicon.ico" /> 
```

你忘记了两个 /> 关闭标签

编辑试试这个：

```
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/> 
```

# c# - C# 中与 ICollection 的协方差

> ID：14653684
> 
> 赞同：0
> 
> 时间：2013-02-01T19:33:47.453
> 
> 标签：c#

不是最伟大的头衔，但必须有更好的方法来完成我想要的。也许答案是我想要错误的东西......

所以我有一个具有以下结构的对象：

```
public class Viper
{
   public ObservableCollection<Personnel> PersonnelList {get;set;}
   public ObservableCollection<Equipment> EquipmentList {get;set;}
   public ObservableCollection<Fluid> FluidList {get;set;}
   public ObservableCollection<Event> EventList {get;set;}
} 
```

在我的应用程序运行期间，我将收到包含与上述结构相同的对象的数据包，我需要将这两个对象的属性合并在一起。关于如何将传入集合的每个项目添加到基础对象中有一组特定的规则，如下面的函数中所示：

```
private void ProcessEventCollection<T>(T existing, IEnumerable<IViperEvent> newlist)
    {
        if (newlist == null) { return; }

        var a = existing.GetType();
        var b = newlist.GetType();
        if (a.GetGenericArguments().Single() != b.GetGenericArguments().Single()) { return; }

        var oldlist = (ICollection<IViperEvent>)existing;

        foreach (var evt in newlist)
        {
            switch (evt.Action.ToUpper())
            {
                case "A":
                    oldlist.Add(evt);
                    break;
                case "M":
                    var item = oldlist.FirstOrDefault(e => e.Index == evt.Index);
                    if (item != null)
                    {
                        oldlist.Remove(item);
                    }
                    oldlist.Add(evt);
                    break;
                case "D":
                    var itemToDelete = oldlist.FirstOrDefault(e => e.Index == evt.Index);
                    oldlist.Remove(itemToDelete);
                    break;
            }
        }
    } 
```

所有集合项都实现了 IViperEvent 接口，该接口确保存在 Action 属性和 Index 属性。两个集合都将包含相同类型的项目。合并每个不同集合的逻辑完全相同，但是，例如，我不能将 ObservableCollection 转换为 ICollection。我理解为什么不允许这样做，但有什么办法可以将此函数用于实现 IViperEvent 接口的所有集合？必须有办法。我只是讨厌通过更改 PersonnelList、FluidList、EquipmentList 等的单行来复制和粘贴相同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:39:45.663

我想这就是你要找的：

```
private void ProcessEventCollection<T>(ICollection<T> existing, IEnumerable<T> newlist)
    where T : IViperEvent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:39:02.097

> 有什么办法可以将此函数用于实现 IViperEvent 接口的所有集合？

当然：

```
private void ProcessEventCollection<T>(ICollection<T> existing, IEnumerable<IViperEvent> newlist)
    where T: IViperEvent 
{
    // ...
} 
```

# netbeans - glassfish-resources.xml 不会从 Netbeans 中的 Server Resources 文件夹部署

> ID：14653689
> 
> 赞同：3
> 
> 时间：2013-02-01T19:34:28.893
> 
> 标签：netbeans, jdbc, glassfish, web-deployment

我在 Netbeans 中构建了一个 Java EE 项目，就像他们的 AffableBean 教程一样，当我尝试在远程 glassfish 服务器上部署我的 WAR 时，我在 glassfish-resources.xml 中定义的数据库资源没有被创建（连接池和 jdbc 资源）。

我查看了本地硬盘驱动器上项目的“构建”目录，但在任何地方都看不到 glassfish-resources.xml 文件。（它应该在那里，对吧？）

我看到这个错误[http://netbeans.org/bugzilla/show_bug.cgi?id=200354](http://netbeans.org/bugzilla/show_bug.cgi?id=200354)表明 netbeans 开发人员知道 glassfish-resources 没有被打包在某些项目中，但我不清楚解决方案是什么/将会。

我看到这个问题[如何以编程方式创建 jms 主题和主题连接工厂？](https://stackoverflow.com/questions/8412513/how-to-create-a-jms-topic-and-topicconnectionfactory-programatically)，有一个很好的答案说我应该将 glassfish-resrouces.xml 移动到项目的配置文件文件夹中 - 但 IDE 不允许我这样做。

我看到这篇出色的博客文章[https://blogs.oracle.com/JagadishPrasath/entry/application_scoped_resources_in_glassfish](https://blogs.oracle.com/JagadishPrasath/entry/application_scoped_resources_in_glassfish)描述了 glassfish-resources.xml 文件应该用于各种目的的位置，但我不知道如何移动我的 glassfish 资源。使用 Netbeans 从 Server Resources 文件夹中获取 xml。

我的问题是如何在部署到远程服务器时定义我的数据库资源？WAR 中的信息是否在某处而我没有正确部署？我计划使用 glassfish 管理控制台创建连接池和 jdbc 资源，但我希望它成为 WAR 的一部分。

编辑：我最终使用 Glassfish 管理控制台构建了连接池和 jdbc 资源，一切似乎都运行良好。我没有从 netbeans 论坛上的类似帖子中得到任何解释。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T22:42:46.200

我经常想知道如何在部署时自动创建数据库、连接池等，虽然 glassfish-resources.xml 会为我做到这一点，但我似乎找不到具体的答案。这让我想知道如果必须手动创建资源，xml 文件的目的是什么。但是我遇到了[这个页面](http://javahowto.blogspot.co.uk/2011/02/sample-glassfish-resourcesxml.html)，似乎可以解析 XML 文件`asadmin`来创建资源，而无需一长串命令行开关。

# android - 如何将 ScrollView 添加到 Android 布局

> ID：14653690
> 
> 赞同：0
> 
> 时间：2013-02-01T19:34:34.533
> 
> 标签：android, android-layout, android-widget, xamarin.android

我有以下布局，但如果内容太多而无法显示，我想让它垂直滚动。ImageView, 'imagePhoto' 是使用设备相机拍摄的图像。如果照片是纵向拍摄的，那么布局需要能够滚动。我尝试在 LinearLayout 之前添加一个 ScrollView，如下所示：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 
```

但它似乎没有用。

有什么建议么？？

这是布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widgetUploadPhoto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffffff"
    android:orientation="vertical">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/topLevelMenuBackground"
        android:orientation="horizontal">
        <TextView
            android:id="@+id/tvHeaderText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:text=""
            android:textColor="#ffffffff"
            android:textSize="20sp"
            android:shadowColor="#7F000000"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="2"
            android:layout_centerVertical="true" />
    </RelativeLayout>
    <TextView
        android:id="@+id/tvYourCurrentPhoto"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:text="Your current photo:"
        android:background="#ffffffff"
        android:textColor="#ff626262"
        android:paddingTop="10dp" 
        android:paddingLeft="10dp"
        android:paddingBottom="10dp"
        android:textSize="@dimen/text_size_medium"
        android:layout_marginLeft="0dp"
        android:layout_marginTop="0dp"
        android:layout_marginRight="0dp"
        android:layout_marginBottom="0dp"
        android:visibility="gone" />
    <ImageView
        android:id="@+id/imagePhoto"
        android:src="@drawable/OrangeAccessoryButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_gravity="center_horizontal"
        android:background="#ffffffff"
        android:layout_marginLeft="0dp"
        android:layout_marginRight="0dp"
        android:layout_marginTop="0dp"
        android:layout_marginBottom="0dp"
        android:paddingTop="15dp"
        android:paddingRight="15dp"
        android:paddingBottom="15dp"
        android:paddingLeft="15dp"
        android:visibility="gone" />
    <TextView
        android:id="@+id/empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:text="Select an option below to change your photo."
        android:background="#ffffffff"
        android:textColor="#ff626262"
        android:paddingTop="15dp"
        android:paddingRight="15dp"
        android:paddingBottom="15dp"
        android:paddingLeft="15dp"
        android:textSize="@dimen/text_size_medium" />
    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:focusable="false"
        android:layout_weight="1" />
</LinearLayout> 
```

感谢您的任何帮助/建议。

更新的 XML：

注意：这可行，但不是预期的结果。我只希望RelativeView 中的东西滚动。第一个 TexView 是一个标题，我想保持静止并且它下面的视图可以滚动。基本上，一切都应该滚动，但相对 vie 部分。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/widgetUploadPhoto"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#ffffffff"
        android:orientation="vertical">
        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/topLevelMenuBackground"
            android:orientation="horizontal">
            <TextView
                android:id="@+id/tvHeaderText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:text=""
                android:textColor="#ffffffff"
                android:textSize="20sp"
                android:shadowColor="#7F000000"
                android:shadowDx="1"
                android:shadowDy="1"
                android:shadowRadius="2"
                android:layout_centerVertical="true" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvYourCurrentPhoto"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Your current photo:"
            android:background="#ffffffff"
            android:textColor="#ff626262"
            android:paddingTop="10dp" 
            android:paddingLeft="10dp"
            android:paddingBottom="10dp"
            android:textSize="@dimen/text_size_medium"
            android:layout_marginLeft="0dp"
            android:layout_marginTop="0dp"
            android:layout_marginRight="0dp"
            android:layout_marginBottom="0dp"
            android:visibility="gone" />
        <ImageView
            android:id="@+id/imagePhoto"
            android:src="@drawable/OrangeAccessoryButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_gravity="center_horizontal"
            android:background="#ffffffff"
            android:layout_marginLeft="0dp"
            android:layout_marginRight="0dp"
            android:layout_marginTop="0dp"
            android:layout_marginBottom="0dp"
            android:paddingTop="15dp"
            android:paddingRight="15dp"
            android:paddingBottom="15dp"
            android:paddingLeft="15dp"
            android:visibility="gone" />
        <TextView
            android:id="@+id/empty"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:text="Select an option below to change your photo."
            android:background="#ffffffff"
            android:textColor="#ff626262"
            android:paddingTop="15dp"
            android:paddingRight="15dp"
            android:paddingBottom="15dp"
            android:paddingLeft="15dp"
            android:textSize="@dimen/text_size_medium" />
        <ListView
            android:id="@+id/listView"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:focusable="false"
            android:layout_weight="1" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:39:04.870

This will have a header `TextView` that doesn't scroll at the top, followed by whatever you want below that scrolling vertically. Take note in particular of the `ScrollView`'s attributes, the combination of `android:height="0dp"` and `android:weight="1"` will cause it to expand to fill all leftover space after the top `TextView` is drawn.

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical>
    <TextView android:id="@+id/tvHeaderText"
        android:background="@drawable/topLevelMenuBackground"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:textColor="#ffffffff"
        android:textSize="20sp"
        android:shadowColor="#7F000000"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2" />
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
            <!-- Everything you want to scroll goes here -->
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:43:00.780

尝试这个

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widgetUploadPhoto"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffffff"
android:orientation="vertical">
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/topLevelMenuBackground"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/tvHeaderText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:text=""
        android:textColor="#ffffffff"
        android:textSize="20sp"
        android:shadowColor="#7F000000"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2"
        android:layout_centerVertical="true" />
</RelativeLayout>
<TextView
    android:id="@+id/tvYourCurrentPhoto"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="left"
    android:text="Your current photo:"
    android:background="#ffffffff"
    android:textColor="#ff626262"
    android:paddingTop="10dp" 
    android:paddingLeft="10dp"
    android:paddingBottom="10dp"
    android:textSize="@dimen/text_size_medium"
    android:layout_marginLeft="0dp"
    android:layout_marginTop="0dp"
    android:layout_marginRight="0dp"
    android:layout_marginBottom="0dp"
    android:visibility="gone" />
<ImageView
    android:id="@+id/imagePhoto"
    android:src="@drawable/OrangeAccessoryButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_gravity="center_horizontal"
    android:background="#ffffffff"
    android:layout_marginLeft="0dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="0dp"
    android:layout_marginBottom="0dp"
    android:paddingTop="15dp"
    android:paddingRight="15dp"
    android:paddingBottom="15dp"
    android:paddingLeft="15dp"
    android:visibility="gone" />
<TextView
    android:id="@+id/empty"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="left"
    android:text="Select an option below to change your photo."
    android:background="#ffffffff"
    android:textColor="#ff626262"
    android:paddingTop="15dp"
    android:paddingRight="15dp"
    android:paddingBottom="15dp"
    android:paddingLeft="15dp"
    android:textSize="@dimen/text_size_medium" />
<ListView
    android:id="@+id/listView"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:focusable="false"
    android:layout_weight="1" /> 
```

```
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:28:06.220

结构如下所示：

```
<LinearLayout>
    <RelativeLayout>
        <TextView android:id="@+id/tvHeaderText" />
    </RelativeLayout>
    <ScrollView>
        <LinearLayout android:id="@+id/widgetUploadPhoto" >
            <TextView android:id="@+id/tvYourCurrentPhoto"/>
            <ImageView android:id="@+id/imagePhoto" />
            <TextView android:id="@+id/empty"/>
            <ListView android:id="@+id/listView"/>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

首先，有一个`LinearLayout`作为根。然后将您希望它始终位于顶部`RelativeLayout`的根目录下移动。`LinearLayout`接下来， `ScrollView`在 the 之后加上一个，`RelativeLayout`并将另一个`LinearLayout`作为孩子的`ScorllView`。

另外，我不认为把 a`ListView`放在里面`ScrollView`是一个好主意。见[答案](https://stackoverflow.com/a/6211286/620138)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-02T00:45:32.930

您在手机或平板电脑上测试哪种设备？请注意，在手机上工作的内容可能不适用于平板电脑，因此对于手机和 sw600dp-land，您必须进行测试和定制。我已经为图表实现了 Scrollview，我在这里分享我的工作代码。

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollView01"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textSize="20sp">

        <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tableLayout1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:background="@drawable/back"
            android:scrollbars="vertical"
            android:textSize="20sp">
            <!--Month Combo Box-->
            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:padding="20sp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Select Month"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <Spinner
                    android:id="@+id/spinner"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <Spinner
                    android:id="@+id/spinneryr"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />
            </TableRow>
            <!--Field1 Combo Box-->
            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="20sp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/ERY"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <EditText
                    android:id="@+id/ERYS"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/back"
                    android:gravity="center"
                    android:inputType="numberDecimal" />
            </TableRow>

            <!--Field9 Combo Box-->
            <TableRow
                android:id="@+id/tableRow10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="20sp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/PCOUNT"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <EditText
                    android:id="@+id/PLS"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/back"
                    android:gravity="center"
                    android:inputType="numberDecimal" />
            </TableRow>
            <!--Field10 Combo Box-->
            <TableRow
                android:id="@+id/tableRow11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="20sp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/NES"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <EditText
                    android:id="@+id/NESSS"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/back"
                    android:gravity="center"
                    android:inputType="numberDecimal" />
            </TableRow>
            <!--Field11 Combo Box-->
            <TableRow
                android:id="@+id/tableRow12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="20sp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/EOS"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <EditText
                    android:id="@+id/EOSS"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/back"
                    android:gravity="center"
                    android:inputType="numberDecimal" />
            </TableRow>
            <!--Field12 Combo Box-->
            <!--Removed android:layout_gravity="center"-->
            <TableRow
                android:id="@+id/tableRow13"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:padding="20sp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/LYMS"
                    android:textColor="#0c0b0b"
                    android:textSize="20sp" />

                <EditText
                    android:id="@+id/LYMSS"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/back"
                    android:gravity="center"
                    android:inputType="numberDecimal" />
            </TableRow>
            <!-- Button :Start here-->
            <TableRow
                android:id="@+id/tableRow14"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="20sp">

                <Button
                    android:id="@+id/btnAdd"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/add" />
                <Button
                    android:id="@+id/btnViewAll"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/view_all" />

            </TableRow>

            <TextView
                android:id="@+id/tvValues"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:textSize="20sp" />
        </TableLayout>
    </ScrollView> 
```

# ios - 调试时如何从命令行启动 iOS 应用程序？

> ID：14653691
> 
> 赞同：2
> 
> 时间：2013-02-01T19:34:37.920
> 
> 标签：ios, xcode, debugging, ios-simulator

我希望能够使用参数从命令行启动 iOS 应用程序。理想情况下，我想在模拟器中附加的调试设备 + 上执行此操作，但目前我根本不知道如何执行此操作，或者是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:55:02.180

我猜你想同时在设备和模拟器上运行和调试 iOS 应用程序。

此链接可能对您有用。

[使用 Xcode 同时测试多个设备 (iPhone/iPad) 的控制台输出](https://stackoverflow.com/questions/5557633/testing-with-console-output-for-multiple-devices-iphone-ipad-at-the-same-time)

# java - 仅列出 s3 存储桶中的子文件夹

> ID：14653694
> 
> 赞同：18
> 
> 时间：2013-02-01T19:34:50.423
> 
> 标签：java, amazon-web-services, amazon-s3

我有一个 s3 结构如下：

```
s3bucketname -> List of first level keys -> List of second level keys -> List of third level keys -> Actual file. 
```

我需要做的是，给定 s3bucket 的名称和第一级键的条目，我需要位于第一级键下的所有第二级键的名称。所以本质上，如果我们把它看成一个文件夹，我会得到`root folder`它`s3bucketname`的名称和其中一个子文件夹的名称`subfolder1`，我想列出所有位于其中的文件夹`subfolder1`。只是名称，而不是完整的路径。

有人可以指出如何使用亚马逊的 java sdk 在 java 中做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-01T19:54:07.453

我做了以下似乎工作正常的代码，您必须传递 a`prefix`并确保前缀以**/**结尾，并指定要获取子目录列表的分隔符。以下应该有效：

```
public List<String> listKeysInDirectory(String bucketName, String prefix) {
    String delimiter = "/";
    if (!prefix.endsWith(delimiter)) {
        prefix += delimiter;
    }

    ListObjectsRequest listObjectsRequest = new ListObjectsRequest()
            .withBucketName(bucketName).withPrefix(prefix)
            .withDelimiter(delimiter);
    ObjectListing objects = _client.listObjects(listObjectsRequest);
    return objects.getCommonPrefixes();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-14T20:18:34.263

查尔斯版超级简洁！谢谢@charles-menguy

我写了一个扩展来通过分页支持巨大的列表。

```
 public List<String> getSubPathsInS3Prefix(String bucketName, String prefix) {
        if (!prefix.endsWith(FILE_DELIMITER)) {
            prefix += FILE_DELIMITER;
        }
        List<String> paths = new ArrayList<String>();
        ListObjectsRequest listObjectsRequest = new ListObjectsRequest()
                .withBucketName(bucketName).withPrefix(prefix)
                .withMaxKeys(1000).withDelimiter(FILE_DELIMITER);
        ObjectListing currentListing = s3Client.listObjects(listObjectsRequest);
        paths.addAll(currentListing.getCommonPrefixes());

        while (currentListing == null || currentListing.isTruncated()) {
            currentListing = s3Client.listNextBatchOfObjects(currentListing);
            paths.addAll(currentListing.getCommonPrefixes());
        }
        return paths;
    } 
```

[http://www.lazywiz.com/uncategorized/s3-missing-api-list-sub-paths-in-the-s3-bucket/](http://www.lazywiz.com/uncategorized/s3-missing-api-list-sub-paths-in-the-s3-bucket/)

# quickbooks - AccountQuery 返回所有类型不正确的帐户

> ID：14653695
> 
> 赞同：1
> 
> 时间：2013-02-01T19:35:02.197
> 
> 标签：quickbooks, intuit-partner-platform, quickbooks-online

我从 Quickbooks 在线获取帐户列表，并且所有 AccountTypeEnum 类型都设置为 Asset。这个不对。有没有更好的方法来使用正确的帐户类型（如收入和费用）获取这些数据？

```
 OAuthRequestValidator oauthValidator = Initializer.InitializeOAuthValidator(accessToken, accessTokenSecret, consumerKey, consumerSecret);
        ServiceContext context = Initializer.InitializeServiceContext(oauthValidator, realmId, string.Empty, string.Empty, dataSourcetype);
        DataServices commonService = new DataServices(context);
        int currentPage = 1;
        int itemListPageSize = 100;
        Intuit.Ipp.Data.Qbo.AccountQuery qboAccQuery = new Intuit.Ipp.Data.Qbo.AccountQuery();
        IEnumerable<Intuit.Ipp.Data.Qbo.Account> qboAccounts = commonService.FindAll(new Intuit.Ipp.Data.Qbo.Account(), currentPage, itemListPageSize) as IEnumerable<Intuit.Ipp.Data.Qbo.Account>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:31:35.017

QBO 不返回帐户的类型，只返回子类型。请参见：

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Account](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Account)

Type 在 QBO Accounts 的 DevKit 中公开，但从未设置，这就是为什么它始终是 Asset。

# objective-c - Theos - UIKit 中单个类的未定义符号

> ID：14653700
> 
> 赞同：0
> 
> 时间：2013-02-01T19:35:11.500
> 
> 标签：objective-c, ios5, theos

在我尝试使用 UIPopoverController 之前，我在使用 UIKit 类时没有遇到任何问题，现在我得到了链接器错误：

```
Undefined symbols:
  "_OBJC_CLASS_$_UIPopoverController", referenced from:
      __objc_classrefs__DATA@0 in Tweak.xm.c4a09c77.o
ld: symbol(s) not found 
```

我已经确定我的 make 文件中有 UIKit，所以我不确定问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:38:13.470

最肯定的问题是您拥有一个尚未拥有的开发 sysroot 版本`UIPopoverController`（即它比 iOS 3.2 SDK 更早）。更改为更新版本的开发 sysroot。可用的最新版本是 6.1。

# python - 如何在python中链接层次结构树状图的刻度？

> ID：14653701
> 
> 赞同：0
> 
> 时间：2013-02-01T19:35:16.233
> 
> 标签：python, matplotlib, plot, hierarchical-clustering

我有一个层次聚类的图，x 刻度是聚类后的观察指数。如何添加标签，以便我可以将链接到索引的原始观察名称链接到索引编号列表（例如 [11, 6 ,18, 3 5, 12....]）。对于直方图，我可以通过字符串列表分配标签，因为索引始终为 1,2,3...4，但对于聚类后的绘图，观察索引会改变......我可以使用任何对象或函数利用？

# java - 停止 Android 后退按钮重新启动 Activity

> ID：14653708
> 
> 赞同：1
> 
> 时间：2013-02-01T19:35:59.590
> 
> 标签：java, android, android-activity, menu, webview

我正在制作一个为主要内容加载 web 视图的应用程序。我有一个菜单充气器，它将提供一些链接。我使用菜单充气机作为警告标签。“你确定要离开这个页面吗？” 但是如果用户不想离开这个页面，我希望他们能够按下后退按钮返回到 web 视图。我遇到的问题是后退按钮重新启动活动并重新加载网页。

我尝试将我的 savedContentState 打包发送到菜单类，但是当我按下后退按钮时，我不知道如何将它应用到我的 web 视图中。

主类：

```
protected void onRestoreInstanceState(Bundle savedInstanceState) {

    super.onRestoreInstanceState(savedInstanceState);
    web.restoreState(savedInstanceState);
    Intent in = new Intent(getApplicationContext(), DBZWiki.class);
    in.putExtras(savedInstanceState);
    startActivity(in);
}

public boolean onCreateOptionsMenu(android.view.Menu menu) {

    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.dbz_menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case R.id.dbzAbout:
        break;

    case R.id.dbzDonate:
        break;

    case R.id.dbzWiki:
        Intent a = new Intent("com.example.thenewboston.DBZWIKI");
        startActivity(a);

        break;
    }
    return false;
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    web.loadUrl("file:///android_asset/infAppPaused.html");

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    web.loadUrl(stream);
}

} 
```

维基菜单类：

```
public class DBZWiki extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dbz_wiki);

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if(keyCode == KeyEvent.KEYCODE_BACK) {
        Intent in = getIntent();
        startActivity(in);
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:14:31.700

我解决了这个问题。按下调用 onResume() 的后退按钮。

```
@Override
protected void onResume() {
// TODO Auto-generated method stub
super.onResume();
web.loadUrl(stream);
} 
```

所以 loadUrl 正在重新加载 webView，而不是重新启动活动。

# javascript - 在客户端调试 Javascript

> ID：14653711
> 
> 赞同：0
> 
> 时间：2013-02-01T19:36:14.713
> 
> 标签：javascript, jquery, debugging, browser, google-chrome-devtools

我是一个 JS 菜鸟，想成为一个 JS 怪物，这意味着大量的调试。

我正在使用 Chrome 调试器工具。摆在我面前的是一大堆意大利面条式的 JS 代码，看起来像是要破译的达芬奇的代码。我需要调试它并了解正在发生的事情。本质上，我想找出 .js 文件中的哪个函数在特定事件上被调用。为此，我设置了**“事件侦听器断点”**来记录任何鼠标单击事件。当我点击有问题的按钮时，这就是我得到的：

![调试客户端点击](../Images/f13258d40ce11a85b19fb38b96c1a670.png)

如您所见，调试器确实暂停了相应 jQuery 函数上的脚本，该函数即将在这一轮事件中执行。不幸的是，这对于所有基于 jQuery 的函数来说都是非常通用的，并且对事情没有多大帮助。我真正感兴趣的是我的 JS 文件中触发 jQuery 函数的函数，而不是 jQuery 库中调用的函数。

插图：

```
$('#myButton').live('click', function(){
$('#popUpMenu').close();
}); 
```

这是调试浏览器事件的正确方法吗？如果这还不够清楚，请让我详细说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:38:29.247

You can start by pretty-fying that JavaScript code:

![enter image description here](../Images/a12909e842d028e70f1d1fb14ebca95b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:40:51.147

考虑到您仍然是新手，我建议不要使用 JQuery 的最小化 (.min.js) 版本（或任何其他 javascript 文件）。这样，您可以逐行调试并在单个语句上放置断点。

仅建议在生产环境中使用最小化代码，以减少文件的加载时间/带宽。在开发过程中，使用完整（虽然更慢）版本是明智的。

您可以在[http://code.jquery.com/jquery-1.9.0.js下载它](http://code.jquery.com/jquery-1.9.0.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:40:56.070

嗯，首先，你需要确保你的来源是正确的。现在，您正在查看缩小的 Jquery 库。查看源上方的选项卡列表吗？这向您显示了您所在的脚本文件。

您需要选择正确的文件（您的），然后您可以通过单击最左边的边距来添加断点。

使用左上角的小三角形（看起来像 [>]）查看所有加载的源。

# html - CSS 在 IE 和 Firefox 中不起作用

> ID：14653714
> 
> 赞同：-4
> 
> 时间：2013-02-01T19:36:27.387
> 
> 标签：html, css

[http://bit.ly/WTkIfS](http://bit.ly/WTkIfS) -- 由于某种原因，该网站无法在 IE 和 Firefox 中运行，谁能帮忙找出原因？我已经尝试将所有 css 移动到文件 base.css，使用与原始主题相同的标题并且没有任何工作。为什么这些特定浏览器中没有显示 css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:41:03.077

Firefox 或 chrome 中的一些 css 代码需要 -moz- 和 -wekkit-

[这里有一些例子](http://www.w3schools.com/css3/css3_transitions.asp)

# sed - sed：向文件中的集合行添加一个单词（或一个新成员）

> ID：14653718
> 
> 赞同：0
> 
> 时间：2013-02-01T19:36:46.853
> 
> 标签：sed

让我们想象一下我有一个包含几行的文件，其中一行具有这种结构：

```
blah blah
YYYY      :['aaa','ddd']
blah
XXXX      :['member1', 'member2']
blah blah 
```

我想要一个脚本来自动将 member3 添加到 XXXX 数组的末尾。我尝试使用 sed，但我不知道如何用“'member3']”替换以 XXXX 开头的行的最后一个括号。所以它看起来像这样：

```
blah blah
YYYY      :['aaa','ddd']
blah
XXXX      :['member1', 'member2', 'member3']
blah blah 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:04:58.417

```
sed "/^XXXX /s/\]\$/, 'member3']/" < input 
```

这将对以 开头的行应用替换`XXXX`，将结尾替换`]`为`'member3']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:42:13.993

有点不清楚，这是你所追求的：

```
$ echo "XXXXX      :['member1', 'member2']" | sed "s/]$/, 'member3']/"
XXXXX      :['member1', 'member2', 'member3'] 
```

**更新**

```
$ cat file.txt
bla
bla bla
XXXXX      :['member1', 'member2']
bla
bla bla

$ sed "s/]$/, 'member3']/" file.txt
bla
bla bla
XXXXX      :['member1', 'member2', 'member3']
bla
bla bla 
```

# asp.net - 如何授予 ASP.NET 权限以写入 Windows 7 中的文件夹？

> ID：14653722
> 
> 赞同：64
> 
> 时间：2013-02-01T19:37:03.363
> 
> 标签：asp.net, iis-7.5

我有一个新的 Win7 工作站，我正在尝试让 ScrewTurn Wiki 在这台机器上运行。我的 STW 安装使用文件系统选项来存储其数据，因此我需要在安装网站的文件夹中授予 ASP.NET 工作进程写入权限。

但是，我似乎无法在 Win7 中想出工作进程的名称，以便将其添加到文件夹的权限中。如果我没记错的话，在 XP 中它是 ASPNET_WP，但在 Win7 中不是它的名称。

有人可以告诉我吗？

编辑添加：

作为对@Dragan_Radivojevic 的回应，有问题的应用程序池如下所示（名为ScrewTurnWiki）：

![IIS7 应用程序池](../Images/29270daaabf0a4da96510242ffee051d.png)

身份是“ApplicationPoolIdentity”

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-02-01T19:59:47.643

从安全的角度来看，向所有 IIS_USRS 组授予写入权限是一个坏主意。您不需要这样做，您可以只向运行应用程序池的系统用户授予权限。

如果您使用的是 II7（我猜您这样做了），请执行以下操作。

1.  打开 IIS7
2.  选择需要修改权限的网站
3.  转到基本设置并查看您正在使用的应用程序池。
4.  转到应用程序池并从#3 中找到应用程序池
5.  查找用于运行此应用程序池的系统帐户（身份列）
6.  导航到 IIS 中的存储文件夹，选择它并单击编辑权限（在右侧的操作子菜单下）
7.  打开安全选项卡并仅为您在 #3 中标识的用户添加所需的权限

注意 #1：如果您在 #3 中看到 ApplicationPoolIdentity，则需要像 IIS AppPool{application_pool_name} 一样引用此系统用户。例如 IIS AppPool\DefaultAppPool

注意 #2：添加此用户时，请确保在“选择用户或组”对话框中设置正确的位置。这需要设置为本地计算机，因为这是本地帐户。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-15T17:32:55.453

我知道这是一个旧线程，但为了进一步扩展这里的答案，默认情况下 IIS 7.5 创建应用程序池身份帐户来运行工作进程。添加文件权限时，您不能像普通用户帐户一样搜索这些帐户。要将它们添加到 NTFS 权限 ACL 中，您可以键入应用程序池标识的完整名称，它将起作用。

处理应用程序池身份帐户的方式略有不同，因为它们被视为虚拟帐户。

此外，应用程序池标识的用户名是“IIS AppPool\应用程序池名称”，因此如果它是应用程序池 DefaultAppPool，则用户帐户将是“IIS AppPool\DefaultAppPool”。

如果你打开计算机管理并查看本地组 IIS_IUSRS 的成员，可以看到这些。将帐户添加到 NTFS 权限 ACL 时不需要附加到它们末尾的 SID。

希望有帮助

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-01T19:46:50.270

我的直接解决方案（因为我找不到 ASP.NET 工作进程）是向 IIS_IUSRS 授予写入（即修改）权限。这行得通。我似乎记得在 WinXP 中我必须专门授予 ASP.NET 工作进程写入权限才能完成此操作。也许我的记忆有问题，但无论如何......

@DraganRadivojevic 写道，他认为从安全角度来看这是危险的。我不反对，但由于这是我的工作站而不是网络服务器，它看起来相对安全。无论如何，他的答案更好，并且由于没有为 AppPool 用户指定正确的域，我在追查失败路径后最终确定了这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-12T23:28:24.197

完整的命令如下所示，注意引号

icacls "c:\inetpub\wwwroot\tmp" /grant **"IIS AppPool\DefaultAppPool:F"**

# c# - 允许在 typeof 表达式中引用未绑定类型有什么用处？

> ID：14653729
> 
> 赞同：2
> 
> 时间：2013-02-01T19:37:29.270
> 
> 标签：c#, generics

给定

```
 int foo = 1;
        Type unboundType = typeof(List<>);
        Type w = unboundType.MakeGenericType(typeof(int));

        if (w == typeof(List<int>))
        {
            Console.WriteLine("Yes its a List<int>");

            try
            {
                ((List<int>)(object)w).Add(foo);
            }
            catch(InvalidCastException)
            {
                Console.WriteLine("No you can't cast Type");
            }
        } 
```

我可以验证该类型确实与构造类型匹配并基于所述构造类型执行操作。但是，我不能将`Type`其转换为`class`using`as`或显式转换。允许开发人员创建未绑定类型是否有实际目的，`Type`或者此功能是否仅以某种方式支持该语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:50:51.333

在您发布的代码中，您实际上并没有在任何地方*实例化*该类型的对象。您只是试图将一个实例转换为`System.Type`没有`List<int>`意义的实例。如果您更新代码以实际创建实例，则它可以工作：

```
int foo = 1;
Type unboundType = typeof(List<>);
Type w = unboundType.MakeGenericType(typeof(int));

if (w == typeof(List<int>))
{
    Console.WriteLine("Yes its a List<int>");
    object obj = Activator.CreateInstance(w);

    try
    {
        ((List<int>)obj).Add(foo);
        Console.WriteLine("Success!");
    }
    catch(InvalidCastException)
    {
        Console.WriteLine("No you can't cast Type");
    }
} 
```

也许我只是错过了你问题的症结所在。当然，根据您的逻辑，您可以根据编译时不知道的某些类型进行 if/else 检查（在您的示例中，您*知道*您正在使用`int`，但可能在运行时可能是其他类型的所需）

编辑：只是为了提供一个真正的运行时使用示例，请考虑以下内容：

```
public object CreateList(Type elementType, object initialValue)
{
    if (!elementType.IsAssignableFrom(initialValue.GetType()))
        throw new ArgumentException("Incompatible types!");

    Type unboundType = typeof(List<>);
    Type listType = unboundType.MakeGenericType(elementType);
    object list = Activator.CreateInstance(listType);
    var addMethod = listType.GetMethod("Add");
    addMethod.Invoke(list, new []{initialValue});
    return list;
} 
```

这让我们可以在运行时创建一个`List<T>`未知类型/对象。一些用法：

```
object intList = CreateList(typeof(int), 1);
object stringList = CreateList(typeof(string), "asdf");

object objectFromSomewhere = GetMyUnknownObject();
object someUnknownListType = CreateList(objectFromSomewhere.GetType(), objectFromSomewhere); 
```

因此，您可能无法按*原样*处理对象；可能`IEnumerable`至少可以对待他们。但这取决于您的系统需要做什么。

编辑：忘记了`IList`界面：

```
public IList CreateList(Type elementType, object initialValue)
{
    if (!elementType.IsAssignableFrom(initialValue.GetType()))
        throw new ArgumentException("Incompatible types!");

    Type unboundType = typeof(List<>);
    Type listType = unboundType.MakeGenericType(elementType);
    IList list = (IList)Activator.CreateInstance(listType);
    list.Add(initialValue);
    return list;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T19:57:34.377

并非所有事情都可以在编译时完成。有时，特别是在库代码中，您需要获取所提供的内容。`object`在只给你一个或一个并且需要做一些聪明的处理的场景中`Type`，未绑定的类型真的很有帮助；例如：

```
object obj = NoIdeaWhatThisReturns();
IList list = (IList)Activator.CreateInstance(
                 typeof(List<>).MakeGenericType(obj.GetType()));
list.Add(obj); 
```

基本上; 使用大量反射或元编程的场景可能会在某些时候发现自己使用未绑定类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:55:39.343

`Type`不是给定类型的占位符 - 它是描述其他类型的特定类型本身。尝试将其转换为不同的、不相关的类型是没有意义的，因为元数据（显然）不能针对该特定类型起作用。

元数据类型用于检查特定类型的各个方面，而不是创建一个。如果您想以通用方式创建类型的实例，您可以使用`Activator`该类。

```
Type oType = ...; // get a Type instance here about a type
object[] oArgs = { oParam1, oParam2 }; // constructor parameters (if any)

return ( Activator.CreateInstance ( oType, oArgs ) ); 
```

例如，这使您能够基于字符串创建类型。您可以获取（或从类似的函数调用）的`Type`实例，然后创建该类型的实例。（直接支持只获取一个字符串，但在内部，它用于查找需要实例化的类型。）`System.String``GetTypeNameFromUser(...)``Activator``Type`

由于所有类型都是平等的，因此您可以`Type`像任何其他类型一样为未绑定的泛型类型创建一个实例 - 至少，它允许您检查其属性和方法。（正如公认的答案所示，您还可以使用`Type`实例来创建专用的泛型类型`MakeGenericType`。）

# ant - 如何使用 Ant 获取完全限定的主机名

> ID：14653733
> 
> 赞同：4
> 
> 时间：2013-02-01T19:38:08.600
> 
> 标签：ant

我使用 Ant 作为我们服务器的设置脚本，我们需要获取服务器的完全限定名称。我如何使用 Ant 获得它，或者在 Ant 中是可能的？

完全限定的主机名类似于：xxx.company.com

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T13:27:54.693

```
<exec executable="hostname" outputproperty="computer.hostname"/> 
```

将在 linux 和 windows 上运行，否则使用 Marc O'Connor 的 groovy 解决方案
此外，nslookup 将在 linux 和 windows 上运行，如果您需要完整主机名，则必须解析 Name: 在`nslookup ServerName`输出中的条目，使用：

```
<groovy>
properties.'hostname' = "hostname".execute().text
//or
properties.'hostname' = InetAddress.getLocalHost().getHostName()

properties.'hostnamefull' = "nslookup ${"hostname".execute().text}".execute().text.find(/Name:\s(.+)/).split(/:\s+/)[1]
</groovy>

<echo>
$${hostname} => ${hostname}
$${hostnamefull} => ${hostnamefull}
</echo> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:33:20.917

有一个称为 Ant 任务[`HostInfo`](http://ant.apache.org/manual/Tasks/hostinfo.html)，您可以使用它来设置包含当前机器的主机名和域的属性。

或者，如果您在 Linux/Unix 上运行，您可以调用以下`hostname`命令：

```
<exec executable="hostname" outputproperty="myhostname">
  <arg line="-f"/>
</exec> 
```

然后，完全限定的主机名在`${myhostname}`.

**编辑：**对于完全独立于平台的解决方案，类似这样的自定义任务（未经测试）应该可以完成这项工作：

```
public class GetHost extends Task
{
    private String property;

    public void setProperty(String property)
    {
        this.property = property;
    }

    @Override
    public void execute() throws BuildException
    {
        if (property == null || property.length() == 0)
        {
            throw new BuildException("Property name must be specified.");
        }
        else
        {
            try
            {
                String hostName = InetAddress.getLocalHost().getHostName();
                getProject().setProperty(property, hostName);
            }
            catch (IOException ex)
            {
                throw new BuildException(ex);
            }
        }
    }
} 
```

这可以按如下方式使用：

```
<GetHost property="myhostname" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T15:34:51.120

重新散列我为[Maven](https://stackoverflow.com/questions/7441265/look-up-hostname-from-maven/7450469#7450469)做的答案:-)

使用嵌入式 groovy 脚本执行 Java 主机名查找：

```
 <groovy>
            properties["hostname"] = InetAddress.getLocalHost().getHostName()
        </groovy> 
```

# 例子

项目是自我记录的：

```
$ ant -p
Buildfile: /home/mark/tmp/build.xml

    This is a demo project answering the followng stackoverflow question:

        https://stackoverflow.com/questions/14653733

    First install 3rd party dependencies

        ant bootstrap 

    Then run the build

        ant

    Expect the following output

        print-hostname:
            [echo] Hostname: ????? 
```

## 构建.xml

```
<project name="demo" default="print-hostname">

    <description>
    This is a demo project answering the followng stackoverflow question:

        https://stackoverflow.com/questions/14653733

    First install 3rd party dependencies

        ant bootstrap 

    Then run the build

        ant

    Expect the following output

        print-hostname:
            [echo] Hostname: ?????

    </description>

    <target name="bootstrap" description="Install 3rd party dependencies">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get dest="${user.home}/.ant/lib/groovy-all.jar" src="http://search.maven.org/remotecontent?filepath=org/codehaus/groovy/groovy-all/2.1.0/groovy-all-2.1.0.jar"/>
    </target>

    <target name="print-hostname" description="Retrieve and print the hostname">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy"/>

        <groovy>
            properties["hostname"] = InetAddress.getLocalHost().getHostName()
        </groovy>

        <echo message="Hostname: ${hostname}"/>
    </target>

</project> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-09T00:06:15.743

另一种方法是编写一个在属性中设置此信息的 javascript **scriptdef 。**

```
<scriptdef name="get-hostame" language="javascript">
    <attribute name="prefix" /> <![CDATA[
        importClass(java.net.InetAddress);
        address = InetAddress.getLocalHost();
        prefix = attributes.get("prefix");
        project.setNewProperty(prefix + ".hostname", address.getHostName());
        project.setNewProperty(prefix + ".fqdn", address.getCanonicalHostName());
        project.setNewProperty(prefix + ".address", address.getHostAddress());
    ]]>
</scriptdef> 
```

你可以这样称呼它：

```
<get-hostame prefix="uwi.host" /> 
```

结果如下：

```
[echoproperties] uwi.host.address=10.666.666.666
[echoproperties] uwi.host.fqdn=myhost.stackoverflow.com
[echoproperties] uwi.host.hostname=myhos 
```

这是基于我在这里找到的一些建议：http: [//grokbase.com/t/ant/user/051sygfj9b/any-way-to-get-at-the-machine-name](http://grokbase.com/t/ant/user/051sygfj9b/any-way-to-get-at-the-machine-name)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-18T10:11:13.803

使用环境

```
<property name="hostname" value="${env.COMPUTERNAME}"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-15T04:00:19.040

使用内置的javascript

```
<script language="javascript">//<![CDATA[
    project.setProperty("hostname", Packages.java.net.InetAddress.getLocalHost().getHostName());
    project.setProperty("hostname-full", Packages.java.net.InetAddress.getLocalHost().getCanonicalHostName());
//]]></script>
<echo message="hostname=${hostname}"/>
<echo message="hostname-full=${hostname-full}"/> 
```

# javascript - 寻找带有语法高亮的 javascript 组件

> ID：14653736
> 
> 赞同：-2
> 
> 时间：2013-02-01T19:38:18.197
> 
> 标签：javascript, html, syntax-highlighting

有一些相当不错的 RTE HTML 文本编辑器（如 jsredaktor、TinyMCE 或 FCK 编辑器），但我正在寻找 html/javascript 组件，类似于 TEXTAREA 但具有代码语法突出显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:39:59.267

查看 CodeMirror，我认为是迄今为止最好的 - [http://codemirror.net/](http://codemirror.net/)

# java - 关于在对象的构造函数完成之前对对象的引用

> ID：14653739
> 
> 赞同：13
> 
> 时间：2013-02-01T19:38:28.117
> 
> 标签：java, multithreading, concurrency, final, jls

你们每个人都知道**JMM**的这个特性，有时对对象的引用可以在该对象的构造函数完成*之前接收值。*

在[JLS7 中，p。17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html) *final 字段语义*我们还可以阅读：

> 字段的使用模型`final`很简单：`final`在对象的构造函数中设置对象的字段；**并且不要在对象的构造函数完成之前在另一个线程可以看到它的地方写对正在构造的对象的引用**。如果遵循这一点，那么当另一个线程看到该对象时，该线程将始终看到该对象`final`字段的正确构造版本。`(1)`

紧随其后的是 JLS 中的示例，该示例演示了如何不保证初始化 **非最终**`(2)`字段（1Example 17.5-1.1） ：

```
class FinalFieldExample { 
    final int x; 
    int y; 

    static FinalFieldExample f;

    public FinalFieldExample() { 
        x = 3; 
        y = 4; 
    } 

    static void writer() { 
        f = new FinalFieldExample(); 
    } 

    static void reader() { 
       if (f != null) { 
           int i = f.x; // guaranteed to see 3 
           int j = f.y; // could see 0 
       } 
    } 
} 
```

此外，在[这个](https://stackoverflow.com/a/10301179/1479414)问答中，格雷先生写道：

> 如果将字段标记为，`final`则保证构造函数作为构造函数的一部分完成初始化。否则，您必须在使用锁之前对其进行同步。`(3)`

* * *

**所以，问题是：**

1）根据语句（1）我们应该避免在构造函数完成之前共享对**不可变对象的引用**

2) 根据 JLS 给出的示例 (2) 和结论 (3)，我们似乎可以在其构造函数完成**之前安全地共享对****不可变**对象的引用，即当它的所有字段都是.**`final`**

 ****是不是有些矛盾？**

* * *

**EDIT-1**：我的意思是什么。如果我们以这种方式修改示例中的类，该字段`y`也将是`final`（2）：

```
class FinalFieldExample { 
    final int x; 
    final int y; 
    ... 
```

因此在`reader()`方法中可以保证：

```
if (f != null) { 
int i = f.x; // guaranteed to see 3
int j = f.y; // guaranteed to see 4, isn't it??? 
```

如果是这样，为什么我们应该避免在它的构造函数完成之前写入对对象的引用`f`（根据（1）），当所有字段`f`都是最终的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:46:32.753

> [在 JLS 中围绕构造函数和对象发布] 是否存在一些矛盾？

我相信这些是略有不同的问题，并不矛盾。

JLS 引用将对象引用存储在构造函数完成之前*其他线程可以看到它的位置。*例如，在构造函数中，不应将对象放入`static`其他线程使用的字段中，也不应分叉线程。

```
 public class FinalFieldExample {
      public FinalFieldExample() {
         ...
         // very bad idea because the constructor may not have finished
         FinalFieldExample.f = this;
         ...
      }
  } 
```

您也不应该在构造函数中启动线程：

```
 // obviously we should implement Runnable here
  public class MyThread extends Thread {
      public MyThread() {
         ...
         // very bad idea because the constructor may not have finished
         this.start();
      }
  } 
```

即使您的所有字段都`final`在一个类中，在构造函数完成之前将对该对象的引用共享给另一个线程也不能保证在其他线程开始使用该对象时已经设置了这些字段。

我的回答是在构造函数完成后使用不同步的对象。这是一个稍微不同的问题，尽管在构造函数、缺乏同步和编译器对操作的重新排序方面相似。

在 JLS 17.5-1 中，它们*没有*在构造函数内部分配静态字段。他们在另一个静态方法中分配静态字段：

```
static void writer() {
    f = new FinalFieldExample();
} 
```

这是关键的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T19:52:25.657

在完整的例子中

```
class FinalFieldExample { 
    final int x;
    int y; 
    static FinalFieldExample f;

    public FinalFieldExample() {
        x = 3; 
        y = 4; 
    } 

    static void writer() {
        f = new FinalFieldExample();
    } 

    static void reader() {
        if (f != null) {
            int i = f.x;  // guaranteed to see 3  
            int j = f.y;  // could see 0
        } 
    } 
} 
```

如您所见，`f`直到构造函数返回*后才设置。*这意味着`f.x`是安全的，因为它是`final`并且构造函数已返回。

在以下示例中，不保证设置任何值。

```
class FinalFieldExample { 
    final int x;
    int y; 
    static FinalFieldExample f;

    public FinalFieldExample() {
        x = 3; 
        y = 4; 
        f = this; // assign before finished.
    } 

    static void writer() {
        new FinalFieldExample();
    } 

    static void reader() {
        if (f != null) {
            int i = f.x;  // not guaranteed to see 3  
            int j = f.y;  // could see 0
        } 
    } 
} 
```

* * *

> 根据语句（1），我们应该避免在构造函数完成之前共享对不可变对象的引用

在出于多种原因（不可变或其他方面）构造对象之前，您不应允许对对象的引用转义，例如，在您存储对象后，对象可能会抛出异常。

> 根据 JLS 给出的示例 (2) 和结论 (3)，我们似乎可以安全地共享对不可变对象的引用，即当它的所有字段都是 final 时。

构造对象后，您可以安全地在线程之间共享对不可变对象的引用。

注意：您可以在构造函数调用的方法中设置不可变字段之前查看它的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T20:53:29.100

构造出口在这里起着重要作用；JLS 说“当 c**退出**时，会在 o 的最后一个字段 f 上发生冻结动作”。在构造函数退出之前/之后发布引用是非常不同的。

非正式地

```
1 constructor enter{

2   assign final field

3   publish this

4 }constructor exit

5 publish the newly constructed object 
```

[2] 无法在构造函数退出后重新排序。所以 [2] 不能在 [5] 之后重新排序。

但是 [2] 可以在 [3] 之后重新排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:49:29.963

陈述 1) 并没有说出你认为它做了什么。如果有的话，我会改写你的陈述：

> 1）根据语句（1）我们应该避免在构造函数完成之前共享对不可变对象的引用

读书

> 1）根据语句（1）我们应该避免 在构造函数完成之前共享对***可变对象的引用***

我所说的 mutable 是指具有任何非最终字段或对可变对象的最终引用的对象。（不得不承认我不是 100% 你需要担心对可变对象的最终引用，但我认为我是对的......）

* * *

换句话说，您应该区分：

*   最终字段（可能不可变对象的不可变部分）
*   在任何人与此对象交互之前必须初始化的非最终字段
*   在任何人与此对象交互之前不必初始化的非最终字段

第二个是问题点。

因此，您可以共享对不可变对象的引用（所有字段都是`final`），但您需要谨慎对待具有非`final`字段的对象，这些非字段必须在对象可以被任何人使用之前被初始化。

换句话说，对于您发布的两个字段都位于的已编辑 JLS 示例`final`，`int j = f.y;`保证是最终的。但这意味着您不需要避免编写对对象 f 的引用，因为在任何人看到它之前它总是处于正确初始化的状态。您无需担心，JVM 会。**

# cuda - 联网 CUDA GPU

> ID：14653744
> 
> 赞同：1
> 
> 时间：2013-02-01T19:38:32.997
> 
> 标签：cuda, cloud

在云场景的请求/响应中，多台低端计算机是否可以分别对位于中央服务器上的 GPU 进行 CUDA 调用？让这些低端计算机好像拥有一个“虚拟”GPU。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:17:31.537

我有一个类似的问题要解决。

该数据库位于低端机器中，我在本地网络上有一组 GPU 可供我使用。

我做了一个小客户端（在低端机器上）来解析数据库，用[谷歌协议缓冲区序列化数据，然后用](https://developers.google.com/protocol-buffers/)[zmq 套接字](http://www.zeromq.org/)将它们发送到服务器。对于数据分发，您可以使用异步发布者/订阅者套接字。

在服务器端，您反序列化数据并且您有 CUDA 程序来运行计算（它也可以是一个守护程序，因此您不必每次都自己启动它）。

一旦数据在服务器上准备好，您可以从客户端发出同步消息（请求/回复套接字），当服务器收到消息时，它会调用 CUDA 内核的函数包装器。

如果您需要在客户端处理返回的结果，您可以按照反向路由将数据发送回客户端。

如果数据已经在服务器中，那就更容易了。您只需要请求/回复套接字来发送消息并调用该函数。

检查zmq手册，他们有很多编程语言的例子。

# ruby-on-rails - 如何设置到以 ruby on rails 中的数字/id 结尾的 url 的路由？

> ID：14653745
> 
> 赞同：0
> 
> 时间：2013-02-01T19:38:35.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

如何路由到以 id 结尾的页面？

```
E.G. 
before: site.com/messages/8
after:  site.com/messages/terrytibbs 
```

我试过了：

```
match "/messages/:username" => "messages#id" 
```

到目前为止没有运气。只是试图通过将数字替换为当前用户正在与之交谈的用户的用户名来使 url 具有更多意义。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:40:25.363

看看[friendly_id](https://github.com/norman/friendly_id) gem。我认为这是你需要的。

> FriendlyId 是用于 Ruby on Rails 的 slugging 和永久链接插件的“瑞士军队推土机”。它允许您创建漂亮的 URL 并使用人性化的字符串，就好像它们是 Active Record 模型的数字 ID。
> 
> 使用 FriendlyId，很容易让您的应用程序使用以下 URL：
> 
> ```
>  http://example.com/states/washington 
> ```
> 
> 代替：
> 
> ```
>  http://example.com/states/4323454 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:14:09.007

如果您想要一些简单的东西而不必更改路线等，为什么不这样做：

```
class Message

  def to_param
    "#{id}-{username}"
  end

...
end 
```

假设您的消息中有用户名属性。这将使您的网址看起来像：

site.com/messages/8-terrytibbs

这是因为以下原因（比如在 irb 中）：

> > > "8-terrytibbs".to_i => 8

当 rails 在你的控制器中查找你的消息时，它会对 id 参数做同样的事情。

编辑：这里有一个优秀的 railscast：[http](http://railscasts.com/episodes/63-model-name-in-url) ://railscasts.com/episodes/63-model-name-in-url和更新版本：[http ://railscasts.com/episodes/63-model-名称在 URL 修订](http://railscasts.com/episodes/63-model-name-in-url-revised)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:08:20.690

您的路线设置正确，您必须更改控制器以使用正确的参数。

假设您的 MessagesController 确实：

```
def id
  User.find(params[:id])
end 
```

改成：

```
def id
  User.find_by_username(params[:username])
end 
```

我还建议在用户名上添加索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:29:05.817

您在正确的轨道上，您只需要确保路线指向控制器上的正确操作，如下所示：

假设您希望 this 指向的操作是 named `show`，这是您定义路线的方式：

```
match 'messages/:username' => 'messages#show' 
```

然后，如果您导航到`messages/8`，`params[:username]`将设置为`'8'`( 参数始终以`String`'s.

同样，如果您导航到`messages/terrytibbs`，`params[:username]`将设置为`'terrytibbs'`。

尝试阅读[Rails 路由指南的第 3-3.5 章，它很好地概述了如何将参数绑定到](http://guides.rubyonrails.org/routing.html#non-resourceful-routes)您正在尝试做的路由。

# java - View Schedule on Calendar

> ID：14653746
> 
> 赞同：1
> 
> 时间：2013-02-01T19:38:34.753
> 
> 标签：java, mysql, swing, calendar

I'm working on an application that has the user open a calendar view, and schedule different tasks (similar to what you can do in outlook). I have the Calendar view, but don't know where to go from here. This is borrowed code btw. I've updated some of it to meet some of my intent.

I'm thinking of using mysql as the database to store the task dates, but how do I populate my calendar with the dates from the database? I've attached the borrowed code. Any suggestions are welcome...

```
//Import packages
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;

public class ViewCalendar {

     JLabel lblMonth, lblYear;
     JButton btnPrev, btnNext;
     JTable tblCalendar;
     JComboBox cmbYear;
     JFrame frmMain;
     Container pane;
     DefaultTableModel mtblCalendar; //Table model
     JScrollPane stblCalendar; //The scrollpane
     JPanel pnlCalendar;
     int realYear, realMonth, realDay, currentYear, currentMonth;

    public void viewCalendar() {
        System.out.println("*Calendar open*");
        //Look and feel
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
        } catch (InstantiationException e) {
        } catch (IllegalAccessException e) {
        } catch (UnsupportedLookAndFeelException e) {
        }

        //Prepare frame
        frmMain = new JFrame("Scheduled Repairs"); //Create frame
        frmMain.setSize(330, 375); //Set size to 400x400 pixels
        pane = frmMain.getContentPane(); //Get content pane
        pane.setLayout(null); //Apply null layout
        frmMain.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //Close when X is clicked

        //Create controls
        lblMonth = new JLabel("January");
        lblYear = new JLabel("Change year:");
        cmbYear = new JComboBox();
        btnPrev = new JButton("<<");
        btnNext = new JButton(">>");
        mtblCalendar = new DefaultTableModel() {

            public boolean isCellEditable(int rowIndex, int mColIndex) {
                return false;
            }
        };
        tblCalendar = new JTable(mtblCalendar);
        stblCalendar = new JScrollPane(tblCalendar);
        pnlCalendar = new JPanel(null);

        //Set border
        pnlCalendar.setBorder(BorderFactory.createTitledBorder("Calendar"));

        //Register action listeners
        btnPrev.addActionListener(new btnPrev_Action());
        btnNext.addActionListener(new btnNext_Action());
        cmbYear.addActionListener(new cmbYear_Action());

        //Add controls to pane
        pane.add(pnlCalendar);
        pnlCalendar.add(lblMonth);
        pnlCalendar.add(lblYear);
        pnlCalendar.add(cmbYear);
        pnlCalendar.add(btnPrev);
        pnlCalendar.add(btnNext);
        pnlCalendar.add(stblCalendar);

        //Set bounds
        pnlCalendar.setBounds(0, 0, 320, 335);
        lblMonth.setBounds(160 - lblMonth.getPreferredSize().width / 2, 25, 100, 25);
        lblYear.setBounds(10, 305, 80, 20);
        cmbYear.setBounds(230, 305, 80, 20);
        btnPrev.setBounds(10, 25, 50, 25);
        btnNext.setBounds(260, 25, 50, 25);
        stblCalendar.setBounds(10, 50, 300, 250);

        //Make frame visible
        frmMain.setResizable(true);
        frmMain.setVisible(true);

        //Get real month/year
        GregorianCalendar cal = new GregorianCalendar(); //Create calendar
        realDay = cal.get(GregorianCalendar.DAY_OF_MONTH); //Get day
        realMonth = cal.get(GregorianCalendar.MONTH); //Get month
        realYear = cal.get(GregorianCalendar.YEAR); //Get year
        currentMonth = realMonth; //Match month and year
        currentYear = realYear;

        //Add headers
        String[] headers = {"Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"}; //All headers
        for (int i = 0; i < 7; i++) {
            mtblCalendar.addColumn(headers[i]);
        }

        tblCalendar.getParent().setBackground(tblCalendar.getBackground()); //Set background

        //No resize/reorder
        tblCalendar.getTableHeader().setResizingAllowed(false);
        tblCalendar.getTableHeader().setReorderingAllowed(false);

        //Single cell selection
        tblCalendar.setColumnSelectionAllowed(true);
        tblCalendar.setRowSelectionAllowed(true);
        tblCalendar.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //Set row/column count
        tblCalendar.setRowHeight(38);
        mtblCalendar.setColumnCount(7);
        mtblCalendar.setRowCount(6);

        //Populate table
        for (int i = realYear - 100; i <= realYear + 100; i++) {
            cmbYear.addItem(String.valueOf(i));
        }

        //Refresh calendar
        refreshCalendar(realMonth, realYear); //Refresh calendar
    }

    public  void refreshCalendar(int month, int year) {
        //Variables
        String[] months = {"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"};
        int nod, som; //Number Of Days, Start Of Month

        //Allow/disallow buttons
        btnPrev.setEnabled(true);
        btnNext.setEnabled(true);
        if (month == 0 && year <= realYear - 10) {
            btnPrev.setEnabled(false);
        } //Too early
        if (month == 11 && year >= realYear + 100) {
            btnNext.setEnabled(false);
        } //Too late
        lblMonth.setText(months[month]); //Refresh the month label (at the top)
        lblMonth.setBounds(160 - lblMonth.getPreferredSize().width / 2, 25, 180, 25); //Re-align label with calendar
        cmbYear.setSelectedItem(String.valueOf(year)); //Select the correct year in the combo box

        //Clear table
        for (int i = 0; i < 6; i++) {
            for (int j = 0; j < 7; j++) {
                mtblCalendar.setValueAt(null, i, j);
            }
        }

        //Get first day of month and number of days
        GregorianCalendar cal = new GregorianCalendar(year, month, 1);
        nod = cal.getActualMaximum(GregorianCalendar.DAY_OF_MONTH);
        som = cal.get(GregorianCalendar.DAY_OF_WEEK);

        //Draw calendar
        for (int i = 1; i <= nod; i++) {
            int row = new Integer((i + som - 2) / 7);
            int column = (i + som - 2) % 7;
            mtblCalendar.setValueAt(i, row, column);
        }

        //Apply renderers
        tblCalendar.setDefaultRenderer(tblCalendar.getColumnClass(0), new tblCalendarRenderer());
    }

     class tblCalendarRenderer extends DefaultTableCellRenderer {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean selected, boolean focused, int row, int column) {
            super.getTableCellRendererComponent(table, value, selected, focused, row, column);
            if (column == 0 || column == 6) { //Week-end
                setBackground(new Color(255, 220, 220));
            } else { //Week
                setBackground(new Color(255, 255, 255));
            }
            if (value != null) {
                if (Integer.parseInt(value.toString()) == realDay && currentMonth == realMonth && currentYear == realYear) { //Today
                    setBackground(new Color(220, 220, 255));
                }
            }
            setBorder(null);
            setForeground(Color.black);
            return this;
        }
    }

     class btnPrev_Action implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (currentMonth == 0) { //Back one year
                currentMonth = 11;
                currentYear -= 1;
            } else { //Back one month
                currentMonth -= 1;
            }
            refreshCalendar(currentMonth, currentYear);
        }
    }

     class btnNext_Action implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (currentMonth == 11) { //Foward one year
                currentMonth = 0;
                currentYear += 1;
            } else { //Foward one month
                currentMonth += 1;
            }
            refreshCalendar(currentMonth, currentYear);
        }
    }

     class cmbYear_Action implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            if (cmbYear.getSelectedItem() != null) {
                String b = cmbYear.getSelectedItem().toString();
                currentYear = Integer.parseInt(b);
                refreshCalendar(currentMonth, currentYear);
            }
        }
    }
} 
```

# c - Yes/No Prompt in C?

> ID：14653749
> 
> 赞同：-3
> 
> 时间：2013-02-01T19:38:40.860
> 
> 标签：c

I'm using a Yes/No user prompt to determine whether the user wants to go through the program or exit the program...when you type y or Y it will go through the program again. However, any other character, not just n or N, will discontinue the program. I was wondering how I could fix this?

```
int main() {
    unsigned num;
    char response;

    do {
        printf("Please enter a positive integer greater than 1 and less than 2000: ");
        scanf("%d", & num);
        if(num > 1 && num < 2000) {
            printf("All the prime factors of %d are given below: \n", num);
            printPrimeFactors(num);
            printf("\n\nThe distinct prime factors of %d are given below: \n", num);
            printDistinctPrimeFactors(num);
        } else {
            printf("Sorry that number does not fall within the given range.\n");
        }
        printf("\n\nDo you want to try another number? Say Y(es) or N(o): ");
        getchar();
        response = getchar();
    }
    while (response == 'Y' || response == 'y'); // if response is Y or y then program runs again
        printf("Thank you for using my program. Good Bye!\n\n"); //if not Y or y, program terminates
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:47:45.863

我希望您期望以下逻辑仅获得`y`, `Y`,`n`或`N`作为使用的输入来做出决定。

```
do
{
    ...

    r = getchar();
    if (r == '\n') r = getchar();
    while(r != 'n' && r != 'N' && r != 'y` && r != `Y`)
    {
        printf("\invalid input, enter the choice(y/Y/n/N) again : ");
        r = getchar();
        if (r == '\n') r = getchar();
    }
}while(r == 'Y' || r == 'y'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:47:11.417

此外......您可能需要更换

```
getchar();
response = getchar(); 
```

和：

```
char c;
do{
    printf("Do you want to continue? (y/n)");
    scanf(" %c",&c); c = toUpper(c);
}while(c != 'N'); 
```

请注意（尽管不是必需的），%c 前面的空格是为了消除空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:45:08.963

我认为问题在于您`getchar()`在程序中使用了两个。.

我们不知道错误。您仍然可以尝试在程序中`getchar()`立即删除`printf`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:14:13.927

> 任何其他字符，而不仅仅是 n 或 N，都将终止程序。我想知道如何解决这个问题

在这种情况下，您可能想要测试：

```
while(tolower(response) != 'n')); 
```

我只能假设空`getchar()`的是扔掉换行符。有更好的方法可以做到这一点，但在这种情况下，您可以简单地在 scanf 中添加一个空格：

```
scanf("%d ", &num);
         ^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T19:49:21.697

将读取的行替换`getchar();`为`fflush(stdin);`

对我来说工作得很好，这是完整的代码。

```
#include <stdio.h>
#include <string.h>

int main(){
    unsigned num;
    char response;

    do {
        printf("Please enter a positive integer greater than 1 and less than 2000: ");
        scanf("%d", &num);
        if (num > 1 && num  < 2000){
            printf("All the prime factors of %d are given below: \n", num);
            printPrimeFactors(num);
            printf("\n\nThe distinct prime factors of %d are given below: \n", num);
            printDistinctPrimeFactors(num);
        }
        else{
            printf("Sorry that number does not fall within the given range.\n");
        }

        fflush(stdin);
        printf("\n\nDo you want to try another number? Say Y(es) or N(o): ");
        response = getchar();
    } while(response == 'Y' || response == 'y');

    printf("Thank you for using my program. Good Bye!\n\n");
    return 0;
} 
```

# java - Load recent apps into GridView

> ID：14653757
> 
> 赞同：0
> 
> 时间：2013-02-01T19:39:04.470
> 
> 标签：java, android, gridview

I am creating a feature inside my Android app that will allow users to see their 6 last used apps in a gridview with only the application image. So far I have tried this:

```
 //Load recent used apps
    ActivityManager result = (ActivityManager)this.getSystemService(Context.ACTIVITY_SERVICE);
    ArrayList<RecentTaskInfo> apps = (ArrayList<RecentTaskInfo>) result.getRecentTasks(10, ActivityManager.RECENT_WITH_EXCLUDED);
    ArrayAdapter adapter = new ArrayAdapter(MainActivity.this,
            android.R.layout.simple_list_item_1, apps);
    recentappsGridView.setAdapter(adapter); 
```

But this only shows a lot of text in each row and column. How can I fix this/make it happen? Please note that I am already using a ListView within the same activity with a method for its click events.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:12:23.153

创建 的子类`ArrayAdapter`。覆盖`getView()`。将您的单元格设置为图像，而不是`TextView`. 使用你从中得到的[`resolveActivityInfo()`对象`Intent`](http://developer.android.com/reference/android/content/Intent.html#resolveActivityInfo%28android.content.pm.PackageManager,%20int%29)。使用on填充您的单元格。`baseIntent``RecentTaskInfo``ActivityInfo``icon``ActivityInfo`

我没试过那个食谱，但它应该让你更接近。

# php - UNIX / Windows 上的斜线和反斜线一致性

> ID：14653760
> 
> 赞同：7
> 
> 时间：2013-02-01T19:39:22.220
> 
> 标签：php

我正在编写一个 PHP 类，我希望它能够跨平台兼容。我需要分解路径以找到特定的文件夹名称。我为分隔符选择什么？该路径在 UNIX 上将包含“/”，在 Windows 上将包含“\”。

在此特定示例中，我想获取存储包含文件的目录的名称。我用这个：

```
private function find_lib_dir() {
    $array_path = explode('/', __DIR__);
    return $array_path[count($array_path)-1];
} 
```

在这种情况下（更一般地），我能做些什么来确保它可以在 Windows 和 UNIX 上运行？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T19:43:24.203

您可以`DIRECTORY_SEPARATOR`按如下方式使用：

```
$array_path = explode(DIRECTORY_SEPARATOR, __DIR__); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:40:55.783

使用`basename()`and`dirname()`进行路径操作，而不是自己解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:43:04.960

你应该使用`DIRECTORY_SEPARATOR`常量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:53:23.503

我会做这样的事情：

```
private function find_lib_dir() {
    // convert windows backslashes into forward slashes
    $dir = str_replace("\\", "/", __DIR__);

    $array_path = explode('/', $dir);
    return $array_path[count($array_path)-1];
} 
```

对于您的特定示例，您可以执行其他答案提供的操作。但是，如果您自己构建字符串，例如：

```
__DIR__ . '/path/to/dir'; 
```

然后尝试将其分解，然后您将在 UNIX 与 Windows 系统上遇到问题。在这种情况下，最好（imo）将所有反斜杠替换为正斜杠（两个系统都支持）。然后基于正斜线爆炸。

# javascript - jQuery On 事件和触发器的顺序

> ID：14653771
> 
> 赞同：0
> 
> 时间：2013-02-01T19:39:56.103
> 
> 标签：javascript, jquery, events, triggers

请参阅以下内容：

```
$('body').on('whyhellothere', function(){

    console.log('done...');                                     

});

$('body').triggerHandler('whyhellothere'); 
```

此代码段返回：

```
done... 
```

而如果我们颠倒顺序：

```
$('body').triggerHandler('whyhellothere');

$('body').on('whyhellothere', function(){

    console.log('done...');                                     

}); 
```

此代码段不返回任何内容。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:41:01.007

如果你在森林里大喊大叫，*然后*我过来，我什么也听不见，对吗？

您在事件触发*后注册事件处理程序。*注册的处理程序只能侦听开始侦听后触发的事件。

这是简单的物理：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:42:32.240

Javascript自上而下处理。它不会将您的`on`调用识别为应在其他内容之前处理的顶级定义。因此，您正在调用一个触发处理程序的函数，该函数调用会查找该事件的所有当前注册的处理程序，其中没有，然后全部调用它们（其中没有）。然后向该事件侦听器添加一个新的处理程序。此后的任何调用都将迭代处理程序列表（现在为 1）并调用它们。

# php - MySQLi Query will not execute

> ID：14653778
> 
> 赞同：0
> 
> 时间：2013-02-01T19:40:32.780
> 
> 标签：php, mysql, mysqli

I am playing around with this trying to pull some articles from a database.

Here is the code i have so far: ($host etc are defined in config)

```
 include ("admin/config.php");
                    $mysqli = mysqli_connect($host, $user , $pass , $database);

                    $query = "SELECT * FROM articles ORDER BY date LIMIT 5";
                    $result = mysqli_query($mysqli,$query);

                    while($row = mysqli_fetch_array($result))
                    {
                                            Some code to display results

                                             } 
```

This is the error that gets generated but i just cant see what i am doing wrong. Any help will be much appreciated.

Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in /website....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:41:44.987

您的查询中有错误。
让它始终以这种方式运行所有查询

```
$result = mysqli_query($mysqli,$query) or trigger_error($mysqli->error."[$query]"); 
```

# vba - 如果返回 #N/A，则向此 INDEX MATCH 公式添加条件

> ID：14653784
> 
> 赞同：0
> 
> 时间：2013-02-01T19:40:57.007
> 
> 标签：vba, excel, excel-formula, excel-2010

我在 Sheet3 中有一个公式可以从 sheet1 中查找一个值并返回它，但有时，如果值不在 sheet1 中，我希望它检查 sheet2。sheet1 和 sheet2 在 A:A 列中具有相同的数据，只有列具有不同的值。

```
=INDEX(Sheet1!D:D,MATCH(Sheet3!A2&"MAN_CHANGE",Sheet1!A:A,0)) 
```

如果 sheet1 中没有匹配项，如何修改公式以签入 sheet2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:47:40.660

很高兴再次收到您的来信！）请试试这个：

```
=INDEX(Sheet1!D:D,IFERROR(MATCH(Sheet3!A2&"MAN_CHANGE",Sheet1!A:A,0),MATCH(Sheet3!A2&"MAN_CHANGE",Sheet2!A:A,0))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:46:27.330

iferror 将检查索引公式中的任何错误结果

```
=iferror(INDEX(Sheet1!D:D,MATCH(Sheet3!A2&"MAN_CHANGE",Sheet1!A:A,0)),"NOT FOUND") 
```

或者，您可以使用 isNA 仅搜索 #N/A

```
=if(ISNA(INDEX(Sheet1!D:D,MATCH(Sheet3!A2&"MAN_CHANGE",Sheet1!A:A,0)),"NOT FOUND",INDEX(Sheet1!D:D,MATCH(Sheet3!A2&"MAN_CHANGE",Sheet1!A:A,0))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-01T05:08:45.550

我嵌套了两个 INDEX,MATCH 公式，它起作用了。

=IFERROR(INDEX('活动报告 11-30-17'!G:G,MATCH('侦察报告 11-30-17'!C2,'活动报告 11-30-17'!D:D,0)) ,INDEX('活动报告 11-30-17'!G:G,MATCH('侦察报告 11-30-17'!D2,'活动报告 11-30-17'!D:D,0)))

# hibernate - Hibernate Subqueries.notIn 错误地排除结果

> ID：14653791
> 
> 赞同：1
> 
> 时间：2013-02-01T19:41:18.717
> 
> 标签：hibernate, subquery, hibernate-criteria

当谈到 Hibernate 时，我相对比较陌生，但我面临着调试一个看起来应该可以工作的 Criteria 查询。

数据结构大致如下：

```
User { Integer id, String type, String email, List<CustomerPolicy> policies, .... }  
CustomerPolicy { List<PolicyTable> tables, ... }  
PolicyTable { List<Insured> insureds, ... }  
Insured { Applicant applicant, ... }  
Applicant { String email, ... } 
```

我正在尝试获取用户链接的 CustomerPolicies 上所有申请人的电子邮件列表，*除了*那些与 User 表中存在的电子邮件匹配的电子邮件。

这是我们在代码中的查询，它不起作用：

```
    emails.addAll(User.createCriteria().list() {
       eq（“身份证”，身份证）
       eq（“类型”，“A”）
       createAlias（“政策”，“政策”）
       createAlias("policy.tables", "table")
       createAlias("table.insureds", "被保险人")
       createAlias("insured.applicant", "applicant")
       isNotNull("applicant.email")
       add(Subqueries.propertyNotIn("applicant.email", emailSubquery))
       预测{
           不同的（“申请人.email”）
       }
    })

    emailSubquery = DetachedCriteria.forClass(User).setProjection(Projections.property("email"))

```

我有一个用户有大约 4 个保单，每个保单大约有 3-5 个表格，每个表格至少有一个投保人，其中大约一半的申请人在用户表格 (alice@company.com) 中有一封电子邮件，*并且*另一半的电子邮件*不在*用户表 (foo@foo.com) 中。

使用 emailSubquery 后，没有任何电子邮件返回。删除子查询后，两者都返回。我已经验证 foo@foo.com 绝对不在 User 表中。

这个查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:45:07.920

我假设您正在使用 Oracle 进行此查询，这就是行为怪异的来源。

本质上，Oracle 为其 sql 执行提供了一个优化编译器。[本文](http://explainextended.com/2009/09/17/not-in-vs-not-exists-vs-left-join-is-null-oracle/)详细介绍了“不在”、“不存在”和“左连接”的详细信息。

归结起来，使用 propertyNotIn 方法看不到任何结果的原因是“用户”表上的电子邮件属性包含空对象。这是[一个示例](http://sqlfiddle.com/#!4/cfab9/8)，说明了您提供的架构的这种行为。

更恰当地说，您要做的是使用*Subqueries.notExists方法来生成*[此处](http://sqlfiddle.com/#!4/cfab9/9)显示的查询结果，这样即使该列中有空值，您也可以获得结果。

最良好的祝愿，希望这会有所帮助。

HT：[SQL“选择不在子查询中的位置”不返回任何结果](https://stackoverflow.com/questions/1406215/sql-select-where-not-in-subquery-returns-no-results)

# javascript - jquery datepicker onSelect 不会在 Internet Explorer 中调用自定义函数

> ID：14653794
> 
> 赞同：0
> 
> 时间：2013-02-01T19:41:22.000
> 
> 标签：javascript, jquery, html

我有一个初始化的日期选择器，例如：

`$("#startDate").datepicker({ onSelect: dateChanged });`

这与输入一起工作：

`<input type="text" id="startDate" value="" class="dateField"/>`

这是在一个表中搜索一个 jquery 数据表。

这在 chrome 中效果很好，但在 IE 中无法使用。我的目标是让今天的数据填充`dataTable`然后当开始日期更改为上一个日期时`onSelect`应该调用该`dateChanged`函数。该`dateChanged`函数负责再次查询数据库，但日期较早。

在 IE 中发生的情况是，当您选择日历出现日期的文本框时（好）。当您选择所需的日期时，日历不会消失。

我有一个没有问题的测试函数调用。不同之处在于测试函数只有一个警报，而`dateChanged`函数有变量初始化和查询调用。在我创建任何类型的变量之前，它似乎工作正常。

任何的意见都将会有帮助。

**更新**

这是我试图调用的更多函数：

```
function dateChanged(){  
        var StartTime = startDate.value;  
    var EndTime = endDate.value;  
    alert("hello");  
    var cmecProx2 = new cmec();  
...  
} 
```

我拥有的大部分代码我都无法分享，因为它是为我工作的公司提供的，但是从上面的代码中我没有得到警报声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:53:56.963

一些浏览器不会及时触发事件。所以在 FF/Chrome 中运行良好的东西在 IE 中可能根本不起作用。通过在超时中包装事件代码，我在这些情况下取得了很好的成功。

```
$("#startDate").datepicker({ onSelect: function(){setTimeout(dateChanged, 500);} }); 
```

这将使触发延迟`dateChanged()`半秒，并且——如果时间是问题——将给 IE 足够的时间来实现`onSelect`事件已经触发。

# backbone.js - Backbone/Laravel：如何发布到不同的表

> ID：14653795
> 
> 赞同：0
> 
> 时间：2013-02-01T19:41:28.420
> 
> 标签：backbone.js, laravel

这是我的困境。我有一系列表格，其中包含来自我们各种联系表格的线索。我们的表格中还有垃圾邮件表格。但有时，潜在客户可能会被错误地路由到垃圾邮件表。所以我需要将该线索从一个表移动到另一个表，这意味着将它插入一个表并从另一个表中删除它。

据我了解，当 Backbone 调用该`save`方法时，它会检查该 id 是否存在于表中。如果没有，它会发出一个 POST 请求。如果是，它会发出一个 PUT 请求。我需要能够强制 Backbone 发出 POST 请求，以便 Laravel 可以调用正确的 RESTful 操作。

看到问题是，如果 Backbone 发出 PUT 请求说，`/send-message/52`（52 是 send-message-spam 表中潜在客户的 ID），它将更新/覆盖 ID 为 52 的现有潜在客户。我想向`/send-message`（显然没有 ID）发出 POST 请求。

我可以强制 Backbone 使用不同的`urlRoot`，但是当我打电话时如何强制它进行 POST`save()`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:06:28.433

我不确定是否有执行此操作的配置选项，但您始终可以覆盖 Backbone 模型中的保存方法以使其执行您想要的操作。

# android - 如何使用循环语句进行减法、乘法和除法

> ID：14653797
> 
> 赞同：-3
> 
> 时间：2013-02-01T19:41:37.870
> 
> 标签：android

我正在使用循环语句创建用于减法、乘法、除法和加法的 android 应用程序

```
case 1: if user insert= 3 then looping = 3x
case 2: user input 1st looping = 5 then dialog show = 5
case 3: user input 2nd = 10 then dialog show 5+10
case 4: user input 3rd = 90 then dialog show 5+10+90 
```

这是我的添加代码

```
package com.test.testing;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;

public class arithmatic extends Activity {

     int y = 0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);
        final LayoutInflater inflater = this.getLayoutInflater();
        final View v=inflater.inflate(R.layout.dialoginputloop, null);

        new AlertDialog.Builder(arithmatic.this)
       // .setIcon(R.drawable.ic_launcher)
        .setTitle("Operator")
        .setView(v)
        .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int whichButton) {

              EditText op = (EditText)v.findViewById(R.id.operator);
              int n = Integer.valueOf(op.getText().toString());

            for (int i = 0;i<n;i++){

                LayoutInflater inflater = arithmatic.this.getLayoutInflater();
                final View v2=inflater.inflate(R.layout.dialoginputnumber, null) ;
                new AlertDialog.Builder(arithmatic.this)
                    //.setIcon(R.drawable.ic_launcher)
                    .setTitle("input number")
                    .setView(v2)
                    .setNeutralButton("Ok", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dlg, int sumthin) {

                            EditText number = (EditText)v2.findViewById(R.id.number);
                            String a = number.getText().toString();
                            int x = Integer.valueOf(a);
                            y = y + x; //my formula to addition looping

                            new AlertDialog.Builder(arithmatic.this)
                                .setTitle("result")
                                .setMessage(Integer.toString(y))
                                .setNeutralButton("Close", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dlg, int sumthin) {
                                    }
                                })
                                .show(); 

                        }
                  })
                  .show();

              }

             }

          })

          .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int whichButton) {

                 finish();
               }
           })
           .show();
    }
} 
```

如何创建减法，乘法和除法的公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:09:04.757

减法公式是 yx
乘法公式是 y*x
除法公式是 y/x

如果你为每个单独的方法，它会更清楚。

此外，如果您尝试不断等待另一个号码，那么您所写的内容将无法正常工作。您可以拥有用户输入的数字数组并在最后进行计算。

# mysql - MySQL 在不同字段中的搜索和替换

> ID：14653799
> 
> 赞同：0
> 
> 时间：2013-02-01T19:41:45.883
> 
> 标签：mysql, database, search, replace, phpmyadmin

嗨，我在我的街机网站上导入了一堆驾驶游戏，但只有一些属于“驾驶”类别。动作和冒险类别中的一些土地是偶然的。我需要在 phpMyAdmin mysql 终端中解决这个问题。我的代码正在尝试在我的标签字段中搜索数据库中的关键字，并将实体的类别从 Action 或任何可能是 Driving

这是我的代码，但似乎不起作用

```
SELECT * FROM games WHERE tags LIKE '%truck%'
UPDATE games SET category = replace (category, "%", "Driving")
SELECT * FROM games WHERE tags LIKE '%car%'
UPDATE games SET category = replace (category, "%", "Driving")
SELECT * FROM games WHERE tags LIKE '%drive%'
UPDATE games SET category = replace (category, "%", "Driving")
SELECT * FROM games WHERE tags LIKE '%race%'
UPDATE games SET category = replace (category, "%", "Driving") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:00:22.780

查找标签列包含`truck`or`car`或`drive`or的记录`race`。

```
Update mytable
SET category = 'Driving'
where tags REGEXP 'truck|car|drive|race'
; 
```

其他：

```
Update mytable
SET category = 'Driving'
where tags LIKE '%truck%' 
OR LIKE '%car%' OR LIKE '%drive%' OR LIKE '%race%' 
; 
```

# php - mysql错误消息读取表数据（警告：为foreach（）提供的参数无效）

> ID：14653802
> 
> 赞同：0
> 
> 时间：2013-02-01T19:41:47.080
> 
> 标签：php, mysql

我这个表在每个午夜更新和重新排序，几天后我开始收到这个消息

```
 Warning: Invalid argument supplied for foreach() in 
```

在修复它的分页的最后一页中，我曾经对表格进行中继并再次运行我的代码，然后它的工作正常，这是我的 mysql 语句案例问题

```
 mysql_free_result($result);

   $i = 0;
    $total_amount = count($tweeps);

    foreach  ($tweeps as $tweep) {
            $i++;
            if ($total_amount == $i) {

    $class = 'divrow divrowlast';
            } else {
              $class = 'divrow';
            } 
```

需要提示进行永久修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:48:56.277

没有看到什么`$tweeps`包含它很难帮助。但是，您缺少一个右括号。为了练习，您应该检查是否`$tweeps`实际上是一个数组。我的假设是这`$tweeps`不是一个数组。

```
if (is_array($tweeps)) {
    foreach ($tweeps as $tweep) {
        $i++;
        if ($total_amount == $i) {
            $class = 'divrow divrowlast';
        } else {
            $class = 'divrow';
        }
    }
} 
```

# wordpress - wordpress 网站中的问题

> ID：14653803
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:41:50.693
> 
> 标签：wordpress, amazon-ec2, ubuntu-12.04

我已经**在亚马逊云上安装了 wordpress**并在我的 wordpress 网站中添加了一个帖子，但它没有在我的网站上显示该帖子，而是显示

*“它有效！这是此服务器的默认网页。Web 服务器软件正在运行，但尚未添加任何内容。”* 所有这些内容都在我 使用的**/var/www中的****index.html**文件中本教程安装我的 wordpress [http://iampuneet.com/wordpress-amazon-ec2/](http://iampuneet.com/wordpress-amazon-ec2/)

 **请协助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:53:02.513

删除 index.html（或将其重命名为 index.old）**

# javascript - 如何在我的javascript中执行anchor\href？

> ID：14653805
> 
> 赞同：2
> 
> 时间：2013-02-01T19:42:04.377
> 
> 标签：javascript, jquery, html, anchor, href

我试图弄清楚这一点，但我的脑海里一片空白。

*   我的网页上有一个带有 id 的按钮元素：例如`<button id="someId"></button>`
*   在 document.ready 函数中，我有一个单击事件，当用户单击按钮时会发生该事件。例如`$('#someId').on('click', function() {`
*   在这种情况下，有一个 if 语句来确定一个值。根据值，我想在锚点中执行 href，但我无法弄清楚语法。

我试图在 javascript 中执行锚点的原因是因为我将一个变量传递给了 href。它可能是真的或假的。

这就是我所拥有的\我正在尝试做的事情。任何帮助都会很棒。

```
if (date1 <= date2) {
   //I want to execute this anchor
   <a href="@{Application.openthispage(true)}"></a>
}else{
   //otherwise execute this anchor
   <a href="@{Application.openthispage(false)}"></a>
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T19:44:21.860

你看错了问题。锚点是一个静态 HTML 元素，当单击它时，会更改当前窗口位置（即 URL）。JS 等价物看起来像这样：`window.location.href = 'http://www.google.com';`. 因此，通过设置`window.location.href`您将使用 JS 导航到另一个 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:00:23.387

Eli 发布的 window.location 方法是使用 JavaScript 访问链接的正确方法。但是，如果您可以使用链接而不是按钮，则只需在 onclick 中设置链接的 href。这是一个示例 jsFiddle，它根据一个输入是否大于另一个来访问不同的 url：http: [//jsfiddle.net/jw3Pd/](http://jsfiddle.net/jw3Pd/)

因此，当用户单击链接时，请将 href 设置为您希望用户访问的任何链接。

```
$("#someId").on("click", function () { 
   if (date1 <= date2) {
      //I want to execute this anchor
      $("#someId").attr("href", "@{Application.openthispage(true)}");
   } else{
      //otherwise execute this anchor
      $("#someId").attr("href", "@{Application.openthispage(false)}");
   }
}); 
```

# ruby-on-rails - 了解 Rails 3 中的关联

> ID：14653808
> 
> 赞同：0
> 
> 时间：2013-02-01T19:42:23.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations, models

看来我需要重温一下我在 Rails 中的联想。目前我正在尝试显示所有以部门名称为员工的帖子。

目前有两种模式，岗位和部门

```
class Post < ActiveRecord::Base
  belongs_to :department
  attr_accessible :title, :comments, :department_id
end

class Department < ActiveRecord::Base
  has_many :posts
  attr_accessible :name, :post_id
  #Scopes
  scope :staff_posts, where(:name => "Staff") 
end 
```

所以我想显示所有具有部门名称人员的帖子

为此，我已将其放入我的控制器中

```
class PublicPagesController < ApplicationController

  def staffnews
    @staffpost = Department.staff_posts
  end

end 
```

在我看来，我正试图像这样显示所有这些帖子

```
<% @staffpost.each do |t| %>
  <h2><%= t.title %>
  <h2><%= t.comments %></h2>
<% end %> 
```

当我得到未定义的方法 nil 时，显然某处出错了，即使我有 3 个名为“员工”的帖子

有人可以解释一下我在哪里误解了协会，因为我很想把这个做对

编辑

路线

```
scope :controller => :public_pages do 
get "our_news"

match "our_news/staffnews" => "public_pages#staffnews" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:52:24.880

在控制器中，它返回带有名称员工的部门。而且您正在对部门对象使用标题和评论，这就是它给出 nil 方法错误的原因。

像这样使用：

```
 def staffnews
   @dept_staff = Department.staff_posts
 end

 <% @dept_staff.each do |ds| %>
   <% ds.posts.each do |p| %>
     <h2><%= p.title %></h2>
     <h2><%= p.comments %></h2>
   <% end %>
 <% end %> 
```

或者

在后期模型创建`named_scope`

```
class Post < ActiveRecord::Base
  belongs_to :department
  attr_accessible :title, :comments, :department_id
  scope :staff_posts, :include => :department, :conditions => {"departments.name" => "Staff"}
end

class Department < ActiveRecord::Base
  has_many :posts
  attr_accessible :name, :post_id
end 
```

控制器：

```
def staffnews
  @staffpost = Post.staff_posts
end 
```

查看：#无变化

```
<% @staffpost.each do |t| %>
  <h2><%= t.title %></h2>
  <h2><%= t.comments %></h2>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:56:07.943

您的`staff_posts`范围仅选择名称为“员工”的部门。假设您将有一个且只有一个名为员工的部门，您有几种方法来处理这个问题。

这将找到所有名称为员工的部门，并急切地加载与之相关的帖子：

```
@department = Department.where(name: "Staff").include(:posts).first 
```

但是，由于您正在尝试确定 Post 的范围，因此它属于 Post。这是一个使用方法作为范围的示例：

```
class Post < ActiveRecord::Base
  belongs_to :department
  attr_accessible :title, :comments, :department_id

  def self.staff
    where(department_id: staff_department_id)
  end

  def staff_department_id
    Department.find_by_name!("Staff").id
  end

end 
```

这样，您可以使用`@staff_posts = Post.staff`和迭代该集合（注意：我不建议`staff_department_id`永久使用这种方式。可以在应用程序启动时将其设置为常量，或其他更强大的解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:25:02.857

您可以通过以下更改找到所有具有部门名称人员的帖子：

类 PublicPagesController < ApplicationController

```
def staffnews
    #get all the department which have name is staff
    departments = Department.where("name=?","staff")

    #get all the ids
    department_ids = departments.map(&:id)

    #retrieve post that department name is staff 
    @staffpost = Post.find_by_department_id(department_ids)
end 
```

结尾

# jquery - jQuery JSON淡入淡出 - 不工作？

> ID：14653809
> 
> 赞同：0
> 
> 时间：2013-02-01T19:42:28.667
> 
> 标签：jquery, json, fadein, setinterval

这段代码出了点问题，但已经晚了，我就是想不通：

```
var json_object = '.$json_twitter_array.';

function displayTweets(obj){
    $("#tweetblock").html(obj[0].description).fadeIn("slow");
    var i = 1;
    setInterval(
        function(){
            $("#tweetblock").html(obj[i].description).fadeIn("slow");
            i++;
            if(i >= obj.length) i = 0;
        },6000);
}
displayTweets(json_object); 
```

它循环通过 json 对象就好了，问题是淡入淡出不起作用，只是显示了文本。有人可以指出我哪里出错/错过了显而易见的事情吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:45:15.757

问题是您在实际放置内容后使对象褪色。解决此问题的一种快速方法是`hide()`在发生之前为每个元素添加一个`html()`，然后将内容添加到隐藏区域，然后再`fadeIn()`启动。

所以每个：

```
$("#tweetblock").html 
```

变成：

```
$("#tweetblock").hide().html 
```

最终代码应如下所示：

```
var json_object = '.$json_twitter_array.';

function displayTweets(obj){
    $("#tweetblock").hide().html(obj[0].description).fadeIn("slow");
    var i = 1;
    setInterval(
        function(){
            $("#tweetblock").hide().html(obj[i].description).fadeIn("slow");
            i++;
            if(i >= obj.length) i = 0;
        },6000);
}
displayTweets(json_object); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:44:01.030

您需要先将其淡出，然后才能再次淡入！

`fadeIn`并且`fadeOut`只改变元素的可见性。当内容发生变化时，他们不会做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:50:16.327

只需在 css 中做一件事：

```
#tweetblock{
   display:none;
} 
```

然后`fadeIn()`就会发生。

# php - 文本文件中的新条目

> ID：14653811
> 
> 赞同：-1
> 
> 时间：2013-02-01T19:42:33.993
> 
> 标签：php, ajax

我创建了一个聊天网站，人们可以互相发送私人消息。但是，我无法弄清楚如何检测指定文本文件中的新条目。

在我的网站中，每个用户都有一个以自己的名字命名的文本文件和特定的 url 地址，例如 chat.php?name=asd(user's name is asd)。t 如果其他用户链接并写入了某些内容，则新条目会将其写入 asd.txt 中而不会出现错误。然而，用户“asd”并不知道他有消息。我怎样才能告诉他他有消息。我试图添加的这个功能就像 facebook 通知用户他们有消息要阅读一样。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:08:49.797

正如 Supericy 所说，您应该使用 AJAX。您应该定期检查显示消息的位置。为此，您可以创建一个函数来获取消息并显示它们。使用`setTimeout()`，您可以刷新此功能。我做了一个这样的脚本，我使用了 jQuery 的 AJAX 方法，我刷新了这个方法，包括 jQuery AJAX by `setTimeout()`.

# jsf - 在验证器属性中找不到 EL 函数

> ID：14653812
> 
> 赞同：4
> 
> 时间：2013-02-01T19:42:33.753
> 
> 标签：jsf, el, validation

在依赖于动态或重复值的验证器属性中找不到El函数？

```
Function 'el:min' not found 
```

```
#{el:min(a + b, c)}
<f:validateLongRange maximum="#{el:min(foo.bar, 10)}"/> 
```

只需打印出该值就可以在验证器中不起作用的地方起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:07:06.843

这个构造应该可以正常工作。问题很可能是你在那里的变量的范围和时间（即你什么时候需要它们？它们什么时候“在幕后”改变了？）。

您需要了解标签处理程序喜欢`<f:xxx>`在视图构建期间运行（[如 JSTL`<c:xxx>`](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)）。因此，它们的属性在视图构建期间被解析，并且将填充 bean 的默认值。也许您在提交表单时正在对它们执行一些业务逻辑，并期望它们会反映到 taghandler 属性中。但是这是错误的。它们已经在视图构建期间进行了评估，并且在处理表单提交期间不会重新评估这些值。

如果确实是这种情况，那么您基本上遇到了相同的问题，该问题已经在此答案中概述并用各种可能的解决方案进行了回答：[如何为数据表的每一行设置转换器属性？](https://stackoverflow.com/questions/7530560/how-to-set-converter-properties-for-each-row-of-a-datatable/7531284#7531284)除了为此进行家庭种植之外`Validator`，您还可以为此使用[OmniFaces](http://omnifaces.org) [`<o:validator>`](http://showcase.omnifaces.org/taghandlers/validator)：

```
<o:validator validatorId="javax.faces.LongRange" maximum="#{el:min(a + b, c)}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T01:26:36.423

错误信息`Function 'el:min' not found`非常具有误导性。问题从来不是构造，而是`NullPointerException`嵌套属性的基础。

由于在一种情况下，该值取决于不同的组件选择，因此它是通过 ajax 更新的，默认值为 null。由于默认值为 null，因此引发了此误导性异常。

*该值是一个嵌套属性，所以它没有被 el 函数捕获*

解决方案：默认禁用验证器

```
<o:validator validatorId="javax.faces.LongRange" maximum="#{el:min(foo.bar, 10)}"
    disabled="#{foo eq null}"/> 
```

# user-experience - 用户看屏幕的哪个区域最多？

> ID：14653813
> 
> 赞同：0
> 
> 时间：2013-02-01T19:42:34.647
> 
> 标签：user-experience

是否有图形或图表或其他东西表明屏幕的哪个区域首先吸引用户注意力？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:44:32.407

以下是关于人们如何阅读网页的一些研究：

[http://www.nngroup.com/articles/f-shape-pattern-reading-web-content/](http://www.nngroup.com/articles/f-shaped-pattern-reading-web-content/)

# asp.net-mvc - Mvc3 FileResult 和 FileStreamResult 错误

> ID：14653816
> 
> 赞同：0
> 
> 时间：2013-02-01T19:42:50.887
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html

我有这个返回 pdf 文档的控制器操作：

```
 public FileResult getPdf()
  {
         System.IO.FileStream  fileStream = System.IO.File.OpenRead("myFile.pdf");         
         byte[] bytes = new byte[(int)fileStream.Length];
         fileStream.Read(bytes, 0, (int)fileStream.Length);
         Response.AppendHeader("Content-Disposition", "inline;");
         return File(bytes, "application/pdf", "file.pdf");
  } 
```

该代码可以与 ActionLink 配合使用：

```
@Html.ActionLink("Download File","getPdf") 
```

但不适用于：

```
 <embed id="PdfFile" type="application/pdf" src="/Home/getPdf"/> 
```

或者

```
<object id="PdfFile" type="application/pdf" src="/Home/getPdf"/> 
```

或者

```
<script type="text/javascript" >
    $(document).ready(function () {
         $("#someDiv").load('/Home/getPdf');
    });
</script> 
```

**这 3 个选项在 Visual Studio 自主机上运行良好，但是当我部署到 IIS7 时返回“找不到错误 404”。ActionLink 在 IIS7 中也能正常工作**

这些文件夹对所有用户都有权限。

我还尝试了 FileStreamResult 和 HttpResponse.binaryWrite。（结果相同）

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:01:49.397

好的，这应该给你你想要的

```
 <object data="src="@Url.Action("GetPDF")"" type="application/pdf" width="300" height="200">
alt : <a href="data/test.pdf">test.pdf</a>
 </object>

 public FileStreamResult GetPDF()
 {
     FileStream fs = new FileStream("filename.pdf", FileMode.Open, FileAccess.Read);
     return File(fs, "application/pdf");
 } 
```

# android - Android - BaseColumns 和 _id

> ID：14653818
> 
> 赞同：4
> 
> 时间：2013-02-01T19:42:58.073
> 
> 标签：android, database, sqlite

我正在阅读这个帖子：[Android 中 BaseColumns 的用途是什么](https://stackoverflow.com/questions/7899720/what-is-the-use-of-basecolumns-in-androi)，我知道如何使用 BaseColumns，你必须在 SELECT 语句中获取 _id。

我仍然不清楚的是什么时候“内部”创建了 _id 字段？是在 execSQL(...) 期间 Android 添加了 _id 字段吗？或者，我们还需要在 CREATE TABLE 语句中定义它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T20:00:48.340

您必须“手动”创建它。Android 不会为您这样做。

例如，在创建表期间，您发出：

```
CREATE TABLE messages (_id INTEGER PRIMARY KEY AUTOINCREMENT, timestamp INTEGER, message TEXT); 
```

看？该`_id`列被显式命名和添加。

或者，按照 DB-helper 类的约定，你会想出类似的东西：

```
db.execSQL("CREATE TABLE " + TABLE_MESSAGES + " ("
        + BaseColumns._ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"
        + COLUMN_TIMESTAMP + " INTEGER,"
        + COLUMN_MESSAGE + " TEXT"
        + ");"); 
```

其中`TABLE_*`and`COLUMN_*`是 DB-helper 的常量字段，例如：

```
public static final String TABLE_MESSAGES = "messages";
public static final String COLUMN_TIMESTAMP = "timestamp";
public static final String COLUMN_MESSAGE = "message"; 
```

# c# - 消息框不阻止 windows.forms 上的事件

> ID：14653819
> 
> 赞同：1
> 
> 时间：2013-02-01T19:42:58.730
> 
> 标签：c#, winforms, events

我有这个代码：

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        MessageBox.Show(Thread.CurrentThread.ManagedThreadId.ToString());
    } 
```

定时器已启用，间隔 = 100。

这会导致无限数量的消息框彼此重叠出现，而我原本希望它们只是阻止下一个事件，直到当前消息框关闭。

在更复杂的应用程序中，这可能会导致不可预测的结果，并且好像有多个线程可以访问同一个函数，但实际上它是同一个线程。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:44:43.580

消息框是一个模式对话框，用于抽取消息队列。这样就可以触发计时器滴答消息，因为它们被发布到 GUI 线程的消息队列中。

对于 GUI 线程中显示的模式对话框，情况总是如此。由于每个线程只有一个消息队列，模态对话框的消息泵将提取计时器滴答消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:45:36.040

它正在按照它应该的方式发生。滴答事件由消息循环提供支持（除非您使用线程变体），除非您以某种方式（思考`Thread.Sleep`或非基于消息的代码执行）阻止消息循环，否则将重复调用该事件。

消息框不会阻塞，它只是另一个窗口，只要应用程序的消息泵正常工作，窗口也会正常工作，因此每次滴答发生时，都可以创建和堆叠新对话框。

对此的快速解决方案如下：

```
private void timer1_Tick(object sender, EventArgs e)
{
    timer1.Stop();
    MessageBox.Show(Thread.CurrentThread.ManagedThreadId.ToString());
    timer1.Start();
} 
```

这将停止计时器，显示对话框并允许计时器在对话框关闭后恢复。这意味着您只会得到一个对话框，而不是它们的永久堆栈。

# css - 为什么与新浏览器相比，旧 IE 版本中的字母间距要宽得多？

> ID：14653825
> 
> 赞同：0
> 
> 时间：2013-02-01T19:43:34.313
> 
> 标签：css, internet-explorer-8, cross-browser

我正在跨浏览器测试我的开发站点，在看到朋友的一些 IE8 屏幕截图后，我很生气地看到我的许多标题和段落溢出到新行上，而它们在 FF、IE9 和 Chrome 中看起来都非常相似。

特别是 IE8，与这些较新的浏览器相比，字母间距似乎很宽。我能做些什么来让它们彼此一致吗？

这是一个很好的演示：[http ://dev.enterf1.com/british-grand-prix/tickets.php](http://dev.enterf1.com/british-grand-prix/tickets.php)

H2 设置为 -1px，在新浏览器中看起来很棒。如果我将它设置为 -2px，它在 IE8 中看起来要好得多，但在较新的浏览器中却被压扁了。

有什么我能做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:46:02.483

浏览器有自己的样式表。*您可以使用 CSS 规范器或重置器来平衡竞争环境，以便所有浏览器按照您*的意图呈现您的样式。IE8 显然具有与其他适合您需要的不同的基本样式。

查看[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

如果没有别的，你可以使用条件注释在body上为ie8设置一个类，然后专门为那个类使用CSS规则。考虑以下：

```
<!--[if IE 9]><body class="ie9 ie"><![endif]-->
<!--[if IE 8]><body class="ie8 ie"><![endif]-->
<!--[if IE 7]><body class="ie7 ie"><![endif]-->
<!--[if lte IE 6]><body class="ie6 ie"><![endif]-->
<![if !IE]><body><![endif]> 
```

然后考虑以下CSS：

```
h2 {
    font-size : 14px;
}

.ie8 h2 {
    font-size : 12px;
} 
```

这只会为您提供 ie8 所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:42:52.160

可能它使用了不同的字体。例如，也许您的 Win7/IE9 系统正在使用 Segoe 字体，但 WinXP/IE8 不会安装该字体，而是会恢复为 Ariel 或 Verdana。

这很容易解释差异——这些字体可能看起来很相似，但它们之间的文本宽度可能存在显着差异。

您可以进行调整以尝试解决它，但请记住，其他操作系统和平台的用户也可能安装了不同的字体，并且可能会看到不同的东西。不要忘记在您想要支持的平板电脑和其他设备上进行测试。他们几乎肯定会在您的桌面浏览器中以不同的方式呈现这样的东西。

所有这一切意味着依赖字体大小与您在自己的浏览器中看到的完全一样可能是一个坏主意。更好的建议是让元素空间以稍大的字体适应文本，或者允许它们根据需要调整大小。无论哪种方式，自适应布局可能是这里的方法，而不是试图强迫事物像素完美。

# google-apps-script - OnFormSubmit 触发问题

> ID：14653828
> 
> 赞同：2
> 
> 时间：2013-02-01T19:43:45.177
> 
> 标签：google-apps-script

我有许多表格都可以正常工作几个月（在少数情况下甚至几年）。我们是一个小学区，我是唯一的技术人员。我建立了表格，以便教师可以请求设备、寻求帮助或提出一般性问题。该表格嵌入在与工作人员共享的谷歌网站中。一旦他们提交，每个电子表格中的应用程序脚本会收集表单数据并将其通过电子邮件发送给我，因此我不必在电子表格中查找它。长期以来，这一切都很好。从最近几天开始，我收到了错误消息（下面的示例），看来我的 onformsubmit 触发器都丢失了。

```
function onMyFormSubmit(e) {
  var myEmailAddress =  "aUser@mydomain.com" ;
  var myEmailSubject  = "Ask The Tech" ; 
  var replyToAddress = String(e.namedValues['Username']);
  try{
    var message = e.values.join( "][" );
    var hmessage  = "<b>From: </b>" + replyToAddress + "<br>";
        hmessage += "<b>Question: </b>" + e.namedValues['Your Question'] + "<br>";
        hmessage += "<b>When: </b>" + e.namedValues['Timestamp'] + "<br>";
    var advancedArgs = {htmlBody:hmessage,replyTo:replyToAddress};
    MailApp.sendEmail(myEmailAddress, myEmailSubject, message, advancedArgs)  ;
  }
  catch(err){
    MailApp.sendEmail(myEmailAddress, myEmailSubject, err)  ;   
  }
} 
```

* * *

```
Start   Function    Error Message   Trigger End
2/1/13 2:30 PM  onMyFormSubmit  You do not have permission to call getActiveSpreadsheet formSubmit  2/1/13 2:30 PM 
```

从示例脚本中可以看出，没有一个脚本直接调用 getActiveSpreadSheet，所以我不明白为什么会收到此消息。此外，一旦我查看脚本并意识到触发器已经消失，当我添加一个新触发器时，脚本再次开始工作 onformsubmit，但是我仍然收到发送到我的邮箱的错误消息，以及脚本生成的电子邮件.

这个问题是否与最近的表格修改有关，我的代码有缺陷，或者我能做些什么？如果是谷歌错误，是否有问题跟踪器我应该提交我的问题？提前感谢您的任何回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:41:46.333

[问题 2391：由于表单刷新更新提交错误](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2391) 报告已于 2013 年 2 月 25 日修复。

# azure-devops - 将 TFS 2010 迁移到 Team Foundation Service

> ID：14653829
> 
> 赞同：2
> 
> 时间：2013-02-01T19:43:52.877
> 
> 标签：azure-devops

> **可能重复：**
> [将本地 TFS 迁移到 Team Foundation Service](https://stackoverflow.com/questions/9312873/migrate-local-tfs-to-team-foundation-service)

我们希望将自托管 TFS 上的代码移至新的 Team Foundation Service，但我们没有看到任何选项可以执行此操作。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T01:13:48.297

这可以使用 ALM Rangers 的[Team Foundation Server 迁移工具](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)来完成。这需要一些技巧，[通过命令行将](http://blog.hinshelwood.com/tfs-integration-tools-issue-tfs-wit-bypass-rule-submission-is-enabled/)`TFS Service`您的帐户置于 Team Foundation Service 和源计算机上的帐户组。

```
 TFSSecurity.exe /g+ "Team Foundation Service Accounts" n:USERNAME /server:SERVERNAME 
```

请注意，您无法迁移任何自定义（化）流程模板。Team Foundation Service 仅支持标准流程模板，因此您可能需要映射字段才能进行迁移。

您还可以使用[Git-TF](http://gittf.codeplex.com/)创建源代码管理的本地副本，然后将代码提交给 Team Foundation 服务。这不会迁移分支和工作项，但是非常简单。

# linux - 如何提取每 N 列并写 入新文件？

> ID：14653830
> 
> 赞同：3
> 
> 时间：2013-02-01T19:43:53.247
> 
> 标签：linux, awk

我一直在努力编写一个代码，用于从输入文件中提取每 N 列，并根据它们的提取顺序将它们写入输出文件。

（我的真实案例是从第 6 列开始的总共 24005 列文件中提取每 800 列，所以我需要一个循环）

在下面更简单的情况下，从输入文件中提取每 3 列（字段），其中第 2 列的起点。

例如，如果输入文件如下所示：

```
aa 1 2 3 4 5 6 7 8 9 
bb 1 2 3 4 5 6 7 8 9 
cc 1 2 3 4 5 6 7 8 9 
dd 1 2 3 4 5 6 7 8 9 
```

我希望输出看起来像这样： output_file_1:

```
1 2 3
1 2 3
1 2 3
1 2 3 
```

输出文件_2：

```
4 5 6  
4 5 6 
4 5 6 
4 5 6 
```

输出文件_3：

```
7 8 9
7 8 9 
7 8 9
7 8 9 
```

我试过这个，但它不起作用：

```
awk 'for(i=2;i<=10;i+a) {{printf "%s ",$i};a=3}' <inputfile> 
```

它给了我语法错误，我修复的越多，出现的问题就越多。

我也尝试了 linux 命令 cut，但是当我处理大文件时，这似乎毫不费力。我想知道 cut 是否会像 awk 一样对每 3 个字段进行一次循环剪切。

有人可以帮我解决这个问题并给出一个快速的解释吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:16:37.347

awk 对输入数据执行的操作必须包含在花括号中，因此您尝试的 awk 单行代码导致语法错误的原因是`for`循环不遵守此规则。语法正确的版本将是：

```
awk '{for(i=2;i<=10;i+a) {printf "%s ",$i};a=3}' <inputfile> 
```

这在语法上是正确的（几乎，请参见本文结尾。），但并没有按照您的想法进行。

要按不同文件上的列分隔输出，最好的办法是使用`awk`重定向运算符`>`。鉴于您的输入文件始终有 10 列，这将为您提供所需的输出：

```
awk '{ print $2,$3,$4 > "file_1"; print $5,$6,$7 > "file_2"; print $8,$9,$10 > "file_3"}' <inputfile> 
```

请注意`" "`指定文件名。

* * *

## 已编辑：真实案例

如果由于列太多而必须沿列循环，您仍然可以使用 awk (gawk)，有两个循环：一个在输出文件上，一个在每个文件的列上。这是一种可能的方式：

```
#!/usr/bin/gawk -f 

BEGIN{
  CTOT = 24005 # total number of columns, you can use NF as well
  DELTA = 800  # columns per file
  START = 6 # first useful column
  d = CTOT/DELTA # number of output files.
}
{
  for ( i = 0 ; i < d ; i++)
  {
    for ( j = 0 ; j < DELTA ; j++)
    {
      printf("%f\t",$(START+j+i*DELTA)) > "file_out_"i
    }
    printf("\n") >  "file_out_"i
   }
 } 
```

我已经在您的示例中的简单输入文件上尝试过这个。如果 CTOT 可以除以 DELTA，它就可以工作。我假设你有浮动（`%f`）只是根据你的需要改变它。

让我知道。

* * *

Ps 回到你原来的单行，注意循环是一个无限循环，因为`i`没有递增：`i+a`必须替换为`i+=a`，并且`a=3`必须在内部大括号内：

```
awk '{for(i=2;i<=10;i+=a) {printf "%s ",$i;a=3}}' <inputfile> 
```

这在每个周期都会评估 a=3，这有点毫无意义。因此，更好的版本是：

```
awk '{for(i=2;i<=10;i+=3) {printf "%s ",$i}}' <inputfile> 
```

尽管如此，这只会打印文件的第 2、第 5 和第 8 列，这不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:16:34.383

```
awk '{ print $2, $3,  $4 >"output_file_1";
       print $5, $6,  $7 >"output_file_2";
       print $8, $9, $10 >"output_file_3";
     }' input_file 
```

这使得一次通过输入文件，这比多次通过更可取。显然，显示的代码只处理固定数量的列（因此也处理固定数量的输出文件）。如有必要，可以对其进行修改，以处理可变列数和生成可变文件名等。

* * *

> （我的真实案例是从第 6 列开始的总共 24005 列文件中提取每 800 列，所以我需要一个循环）

在那种情况下，你是对的；你需要一个循环。实际上，您需要两个循环：

```
awk 'BEGIN { gap = 800; start = 6; filebase = "output_file_"; }
     {
         for (i = start; i < start + gap; i++)
         {
             file = sprintf("%s%d", filebase, i);
             for (j = i; j <= NF; j += gap)
                  printf("%s ", $j) > file;
             printf "\n" > file;
         }
     }' input_file 
```

我对具有 25 列（对应列中的数字 1-25）和间隙设置为 8 并开始设置为 2 的输入文件证明了这一点令我满意。下面的输出是结果水平粘贴的 8 个文件。

```
2 10 18    3 11 19    4 12 20    5 13 21    6 14 22    7 15 23    8 16 24    9 17 25
2 10 18    3 11 19    4 12 20    5 13 21    6 14 22    7 15 23    8 16 24    9 17 25
2 10 18    3 11 19    4 12 20    5 13 21    6 14 22    7 15 23    8 16 24    9 17 25
2 10 18    3 11 19    4 12 20    5 13 21    6 14 22    7 15 23    8 16 24    9 17 25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T13:14:08.527

使用 GNU awk：

```
$ awk -v d=3 '{for(i=2;i<NF;i+=d) print gensub("(([^ ]+ +){" i-1 "})(([^ ]+( +|$)){" d "}).*","\\3",""); print "----"}' file
1 2 3
4 5 6
7 8 9
----
1 2 3
4 5 6
7 8 9
----
1 2 3
4 5 6
7 8 9
----
1 2 3
4 5 6
7 8 9
---- 
```

如果需要，只需将输出重定向到文件：

```
$ awk -v d=3 '{sfx=0; for(i=2;i<NF;i+=d) print gensub("(([^ ]+ +){" i-1 "})(([^ ]+( +|$)){" d "}).*","\\3","") > ("output_file_" ++sfx)}' file 
```

这个想法只是告诉 gensub() 跳过前几个 (i-1) 字段，然后打印您想要的字段数 (d = 3) 并忽略其余的 (.*)。如果您没有打印字段数量的精确倍数，则需要按摩在最后一次循环迭代中打印了多少字段。算一算...

这是一个适用于任何 awk 的版本。它需要 2 个循环并修改字段之间的空格，但它可能更容易理解：

```
$ awk -v d=3 '{sfx=0; for(i=2;i<=NF;i+=d) {str=fs=""; for(j=i;j<i+d;j++) {str = str fs $j; fs=" "}; print str > ("output_file_" ++sfx)} }' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T20:09:46.683

我成功使用了以下命令行。:) 它使用 for 循环并使用`-f -`. `awk`程序本身是使用 bash 变量数学创建的。

```
for i in 0 1 2; do 
    echo "{print \$$((i*3+2)) \" \" \$$((i*3+3)) \" \" \$$((i*3+4))}" \
  | awk -f -  t.file   > "file$((i+1))"
done 
```

* * *

更新：问题更新后，我尝试破解一个动态创建请求的 800-cols-awk 脚本的脚本（根据 Jonathan Lefflers 回答的版本）并将其通过管道传输到 awk。尽管脚本看起来不错（对我来说），但它会产生 awk 语法错误。问题是，这对 awk 来说是不是太多了，还是我错过了什么？非常感谢反馈！

更新：对此进行调查，发现[文档](http://oreilly.com/catalog/unixnut3/chapter/ch11.html#ch11_09.htm)说`awk`有很多限制。他们告诉在这种情况下使用 gawk。（GNU 的 awk 实现）。我已经做到了。但我仍然会收到语法错误。仍然反馈赞赏！

```
#!/bin/bash

# Note! Although the script's output looks ok (for me)
# it produces an awk syntax error. is this just too much for awk?

# open pipe to stdin of awk
exec 3> >(gawk -f - test.file)

# verify output using cat
#exec 3> >(cat)

echo '{' >&3

# write dynamic script to awk
for i in {0..24005..800} ; do
    echo -n " print " >&3
    for (( j=$i; j <= $((i+800)); j++ )) ; do
        echo -n "\$$j " >&3
        if [ $j = 24005 ] ; then
            break
        fi
    done
    echo "> \"file$((i/800+1))\";" >&3
done
echo "}" 
```

# java - 使用 MySQL 设置 ITHit WebDAV 服务器

> ID：14653842
> 
> 赞同：2
> 
> 时间：2013-02-01T19:44:50.800
> 
> 标签：java, webdav

我已经下载了 ITHit WebDAV 服务器（java 版本），并想知道是否有任何示例/文档可以使用 MySQL（两个示例都用于 Oracle）数据库或基于简单文件系统的存储来实现它。

由于我刚刚开始，任何其他文档或示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:58:56.017

我们有 MySql 示例并在内部用于测试目的。请写信给我们，我们会将其发送给您。我们不发布它，因为它复制了大部分 Oracle 示例代码。

目前，除了 Oracle 提供的 IT Hit WebDAV Server Library for Java 之外，没有任何示例。我们正在努力创建更多样本。

我们不使用文件系统创建示例的主要原因是为了存储文件锁，我们需要创建外部文件。这可能会破坏您的存储空间。

对于 .Net 的 WebDAV 服务器引擎的文件系统示例，我们将锁存储在 NTFS 备用文件流中，因此不会在文件系统中创建任何额外的文件。使用 Java 更加困难，并且可能超出了“示例”的想法。

# autocomplete - 为 NSTextView 自动填充 NSPopover

> ID：14653848
> 
> 赞同：3
> 
> 时间：2013-02-01T19:45:15.163
> 
> 标签：autocomplete, nstextview, nspopover

我试图弄清楚如何创建一个自动完成的 NSTextView。我试图实现的想法是让 NSPopover 显示可能的用户名列表，如下所示：[http](http://cl.ly/McZ0) ://cl.ly/McZ0 。它的目标是像 Mac 的 Tweetbot 一样运行，你输入的越多，它就越能过滤列表。我已经调查过了

```
- (NSArray *)textView:(NSTextView *)textView completions:(NSArray *)words forPartialWordRange:(NSRange)charRange indexOfSelectedItem:(NSInteger *)index 
```

和

```
- (NSArray *)completionsForPartialWordRange:(NSRange)charRange indexOfSelectedItem:(NSInteger *)index for the autocompletion. 
```

我了解到它们都不适用于我试图做的事情，所以我调查了

```
- (void)textDidChange:(NSNotification *)notification 
```

和

```
- (void)controlTextDidChange:(NSNotification *)notification 
```

我想我必须找到“@”所在的位置并使用“@”之后的字符来过滤列表。我真正坚持的是在 NSTextView 中的单词下方显示 NSPopover。有人对如何实现这一点有任何想法吗？

# c - 数组的指针错误

> ID：14653850
> 
> 赞同：2
> 
> 时间：2013-02-01T19:45:22.610
> 
> 标签：c, arrays, pointers

```
 DIR * d;
 int dsize=0;
 struct dirent * de;
 char *dir[1024];
 d=opendir(".");
 while ((de = readdir(d)))
            {                                                                               
              if((de->d_type) & DT_DIR)
                {
                  dir[dsize]= de->d_name;
                  dsize++;
                }
             } 
```

我正在尝试将文件名的地址存储到 char 指针数组中。

指针有点生疏我回去阅读了一些指针审查页面，但我不确定我做错了什么......一直告诉我“警告：赋值从指针中生成整数而没有强制转换”。我的语法是否因为结构而关闭？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:51:00.213

您不能以这种方式存储指针。它们每次都被覆盖，你调用`readdir`，然后你有一个指向无效内存的悬空指针。如果要存储目录条目，则必须复制整个名称，而不仅仅是指针

```
char dir[1024][256];
while (de = readdir(d)) {
    if (de->d_type & DT_DIR) {
        if (dsize < 1024) {
            strcpy(dir[dsize], de->d_name);
            dsize++;
        }
    }
} 
```

不要忘记检查`dir`数组边界。否则，您可能会覆盖堆栈，这可能会导致崩溃。

# powershell - 需要有关来自网络驱动器的 Powershell Copy-Item 的帮助

> ID：14653851
> 
> 赞同：20
> 
> 时间：2013-02-01T19:45:24.180
> 
> 标签：powershell, powercli, copy-item

我正在尝试使用`Copy-Item`以下命令从远程机器到另一台远程机器：

```
Copy-Item -Path "\\machine1\abc\123\log 1.zip" -Destination "\\machine2\\c$\Logs\" 
```

我不断收到错误“ `Cannot find Path "\\machine1\abc\123\log 1.zip`”

我可以访问该路径并从那里手动复制。

我以管理员身份打开 PowerCLI 并运行此脚本......我完全被困在这里，不知道如何解决它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T20:26:04.123

这似乎在 PowerShell v3 上工作。我没有方便测试的 v2，但我知道有两个选项应该可以工作。首先，您可以映射 PSDrive：

```
New-PSDrive -Name source -PSProvider FileSystem -Root \\machine1\abc\123 | Out-Null
New-PSDrive -Name target -PSProvider FileSystem -Root \\machine2\c$\Logs | Out-Null
Copy-Item -Path source:\log_1.zip -Destination target:
Remove-PSDrive source
Remove-PSDrive target 
```

如果这是您要做的很多事情，您甚至可以将其包装在一个函数中：

```
Function Copy-ItemUNC($SourcePath, $TargetPath, $FileName)
{
   New-PSDrive -Name source -PSProvider FileSystem -Root $SourcePath | Out-Null
   New-PSDrive -Name target -PSProvider FileSystem -Root $TargetPath | Out-Null
   Copy-Item -Path source:\$FileName -Destination target:
   Remove-PSDrive source
   Remove-PSDrive target
} 
```

或者，您可以为每个路径显式指定提供程序：

```
Copy-Item -Path "Microsoft.PowerShell.Core\FileSystem::\\machine1\abc\123\log 1.zip" -Destination "Microsoft.PowerShell.Core\FileSystem::\\machine2\\c$\Logs\" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-03T20:11:05.117

这对我来说一整天都有效：

```
$strLFpath = "\\compname\e$\folder"
$strLFpath2 = "\\Remotecomputer\networkshare\remotefolder"  #this is a second option that also will work
$StrRLPath = "E:\localfolder"  
Copy-Item -Path "$StrRLPath\*" -Destination "$strLFpath" -Recurse -force -Verbose 
```

需要注意的事项： Copy-item 将 LAST 项定义为对象。要复制文件夹的内容，您需要 \*

如果要将文件夹本身复制到新位置，则无需声明内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-16T03:38:50.743

我每天都用这个：

```
Robocopy /E \\\SOURCEIP\C$\123\  \\\DESTIP\C$\Logs\ 
```

中间有一块空地。对于 ROBCOPY，/E 进行复制。如果你需要搬家，你可以谷歌。

或者：

```
$SourceIP = Read-Host "Enter the Source IP"

$DESTIP = Read-Host "Enter the Destination IP"

Robocopy /E \\\\$SourceIP\C$\123\  \\\\$DESTIP\C$\Logs\ 

####Just adjust the C$ path on both##### 
```

# jekyll - 样式化 octopress 图像布局（例如，所有图像都在一行中）

> ID：14653852
> 
> 赞同：3
> 
> 时间：2013-02-01T19:45:35.333
> 
> 标签：jekyll, octopress

`{%img ... %}`关于使用插件设计图像布局的任何提示？

我很好`left`，`right`但我真的很想将所有图像垂直排列成一排，并且无法安静地弄清楚如何设置样式。

我想也许可以添加`<div class="right">`一堆，`{% img ... %}`但这似乎与 HTML 混淆太多了。

在此先感谢您的任何指点

ps，我看到了[这个问题](https://stackoverflow.com/questions/13663530/how-to-arrange-images-in-a-grid-in-octopress-using-markdown?rq=1)，但它并没有完全回答我的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:29:11.293

在 Markdown 中，您可以使用以下语法编写表格

```
-----------------
|   A   |   B   |
| :---: | :---: |
|   C   |   D   |
----------------- 
```

水平线两侧的两个点定义单元格的对齐方式：

*   **居中**：`:--:`
*   **左**：`:---`
*   **对**：`---:`

您可以在中间使用任意数量的破折号。

[我在这篇博文](http://blog.alestanis.com/2013/02/04/octopress-and-the-twilight-color-scheme/)中使用这种技术将图像对齐为表格（在里面搜索“Nil”）。它看起来像这样：

![与降价表对齐的图像](../Images/3f57a633c3dc93e960b88df460c7e898.png)

使用此代码：

```
| Nil | Inline / list | Table |
| :---: | :---: | :---: |
| {% img /images/2013-02-04-nil.png 36 92 Nil line numbers %} | {% img /images/2013-02-04-inline.png 62 92 Inline line numbers %} | {% img /images/2013-02-04-table.png 72 92 Table line numbers %} | 
```

# syntax - 在 shell 脚本中使用多个 for 循环时出现语法错误

> ID：14653855
> 
> 赞同：1
> 
> 时间：2013-02-01T19:45:49.423
> 
> 标签：syntax, for-loop, sh

我想在 linux 中执行以下练习。Impute2 是基于命令行的软件。我想使用 for-loops 自动更改其选项，但它会在 ** bold ** 中引发以下错误。

-int 选项是从 ** $int1 到 $int2 ** 对于每个 ** $chunk ** 的范围。

这意味着这里对于块 34，int 将从 165752599 到 170752599（差为 5000001），对于块 35，int 将是 170752600 到 175752600，依此类推，直到最后一个块，即块 49，它的 int 将从 240752614 到 245752614。

```
for chunk in $(seq 34 49)
for int1 in $(seq 165752599 5000001 240752614) 
for int2 in $(seq 170752599 5000001 245752614) 
do ./impute2 -use_prephased_g -m map.txt -h hap.txt -l legend.txt \
    -known_haps_g knownhap.txt -strand_g chr1_pos_strand_new \
    -align_by_maf_g -int $int1 $int2 -Ne 20000 -iter 30 -burnin 10 \
    -k 80 -k_hap 500 -os 0 1 2 3 -o result.out -o_gz -r result.summary \
    -i resul.info 
done
done
done 
```

** bash：意外标记“for”附近的语法错误**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:58:41.053

你有 3 `for`s 和 3 `done`s 但只有一个`do`。你需要更多`do-do`！

IE，`for x in a; do for y in b; do for z ...`

# javascript - Chrome 新标签页自动对焦

> ID：14653857
> 
> 赞同：5
> 
> 时间：2013-02-01T19:45:55.120
> 
> 标签：javascript, jquery, html, google-chrome, google-chrome-extension

我正在制作 Chrome 扩展程序，并且正在使用以下内容：

**清单.json**

```
{
    "name": "Test extension",
    "version": "1.1",
    "description": "Test extension.",
    "icons": {
        "128": "icon_128.png"
    },
    "chrome_url_overrides": {
        "newtab": "cc.html"
    },
    "manifest_version": 2
} 
```

**抄送.html**

```
<style>body,html{padding:0;margin:0}</style>
<iframe src="theiframe.html" frameborder="0" height="200px" width="200px">
</iframe> 
```

**theiframe.html**

```
<style>body,html{padding:0;margin:0}</style>
<form action="http://www.example.com/search">
    <input autofocus="autofocus" tabindex="1" type="text" />
    <input tabindex="2" value="search" type="submit"/>
</form> 
```

当用户打开新标签时，**自动对焦**将在地址栏中。我希望用户能够改变这一点。是否有任何代码可以自动自动聚焦搜索输入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-25T10:35:54.290

也许仅使用`iframe`. 但是您可以制作一个示例页面，当打开新选项卡时，该页面将重定向到您想要的页面，因此`input`将`autofocus`自动聚焦。

这是一种方法：

**清单.json**

```
"chrome_url_overrides": {
    "newtab": "r.html"
}, 
```

**r.html**

```
<html>
  <head>
    <title>Loading...</title> <!-- user friendly -->
    <noscript>
      <meta http-equiv="refresh" content="0; url=https://www.google.com"> <!-- in case javascript is disabled -->
    </noscript>
    <script src="s.js"></script>
  </head>
  <body></body>
</html> 
```

**s.js**

```
window.location="https://www.google.com"; 
```

这是最好的方法（可能也是唯一的方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T19:58:23.653

[正如 Erik Kay（Chrome 工程总监）在这个 Chromium 错误报告](https://code.google.com/p/chromium/issues/detail?id=243102#hc5)中指出的那样，预期的行为是让多功能框默认具有焦点，并且无法更改这一点。

因此，该错误被标记为`WontFix`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-19T19:57:02.247

来自[API 文档](https://developer.chrome.com/extensions/override#tips)的提示：

> **不要依赖具有键盘焦点的页面。** 当用户创建新标签时，地址栏总是首先获得焦点。

# sql - 在sql server中将字符串转换为日期时间

> ID：14653859
> 
> 赞同：-2
> 
> 时间：2013-02-01T19:46:06.503
> 
> 标签：sql, datetime

我有一列没有分隔符的日期。该列是 nvarchar。字符串的长度和格式是一致的`MMDDYYYY`。如何将这些值转换为`datetime`？

编辑 - 这个问题是关于 sql server 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:51:35.017

假设 SQL Server：

```
DECLARE @A NVARCHAR(10)
SET @A = '11302012'

SELECT CONVERT(DATETIME,LEFT(@A,2) + '/' + 
       SUBSTRING(@A,3,2) + '/' + RIGHT(@A,4),101) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:50:27.123

```
BEGIN
DECLARE @d DATETIME
DECLARE @s NVARCHAR(32)
SET @s = N'12012013'
SET @d = SUBSTRING(@s, 5,4) + SUBSTRING(@s, 1,2) + SUBSTRING(@s, 3,2)
SELECT @d
END 
```

您只需要将字符串转换为 SQL 服务器可以正确解析为日期的格式。在上面它是 YYYYMMDD 格式。

**编辑**删除了“-”，因为法语设置破坏了它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:39:41.630

首先使用两个简单的字符串函数将格式更改为无论服务器设置如何（YYYYMMDD）都始终有效的格式，然后转换为日期时间：

```
declare @datestring varchar(8) = '11302012';

select CONVERT(datetime, RIGHT(@datestring, 4) + LEFT(@datestring, 4)) ConvertedDatetime; 
```

# python - 禁用 QActions 的快捷方式触发事件

> ID：14653860
> 
> 赞同：0
> 
> 时间：2013-02-01T19:46:11.380
> 
> 标签：python, qt, qt4

我在 CentOS 上使用 QT4 (4.2.1) 和 python 2.4。

我为我的菜单分配了带有快捷方式的 QAction，并相应地禁用/启用它们。我`triggered`为动作分配了事件处理程序。除了快捷方式触发禁用操作的事件外，一切都按预期工作。例如，我有一个带有 Del 快捷方式的 Delete QAction。我看到禁用的删除菜单选项，但如果我按下 Del 键，我的`triggered`事件处理程序就会被调用。这有点奇怪……

这是设计使然还是我做错了什么？

作为一种解决方法，我现在在每个动作事件处理程序中检查 QAction isEnabled() 但有没有办法不获取`triggered`禁用动作的事件？

非常感谢您的帮助，

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:24:38.483

这在 Qt 4.8.5 中表现良好，据我所知，它应该适用于与 Qt 4.5 一样旧的版本。

尝试将 Qt 升级到相当新的版本，或者至少在更现代的版本上尝试您的代码。

# python - Python 生成器截止

> ID：14653870
> 
> 赞同：3
> 
> 时间：2013-02-01T19:46:47.650
> 
> 标签：python, python-2.7, generator

我有一个生成器，它会不断给出遵循特定公式的数字。为了论证，假设这是函数：

```
# this is not the actual generator, just an example
def Generate():
    i = 0
    while 1:
        yield i
        i+=1 
```

然后，我想从该生成器中获取低于某个阈值的数字列表。我试图找出一种pythonic方式来做到这一点。我不想编辑函数定义。我意识到你可以只使用一个以你的截止作为条件的while循环，但我想知道是否有更好的方法。我试了一下，但很快就意识到为什么它不起作用。

```
l = [x for x in Generate() x<10000] # will go on infinitely 
```

那么有没有正确的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T19:49:08.703

[`itertools`](http://docs.python.org/2/library/itertools.html#itertools.takewhile)创建另一个迭代器的解决方案：

```
from itertools import takewhile
l = takewhile(lambda x: x < 10000, generate()) 
```

`list()`如果您确定需要一个列表，请将其包装起来：

```
l = list(takewhile(lambda x: x < 10000, generate())) 
```

或者，如果您想要一个列表并喜欢发明轮子：

```
l = []
for x in generate():
    if x < 10000:
        l.append(x)
    else:
        break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:04:48.533

将您的生成器包装在另一个生成器中：

```
def no_more_than(limit):
    def limiter(gen):
        for item in gen:
            if item > limit:
                break
            yield item
    return limiter

def fib():
    a,b = 1,1
    while 1:
        yield a
        a,b = b,a+b

cutoff_at_100 = no_more_than(100)
print list(cutoff_at_100(fib())) 
```

印刷：

```
[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T00:00:54.663

`itertools.takewhile`只会在遇到不满足谓词的项目之前起作用。如果您需要从可能无序的迭代中返回所有值，我建议使用`itertools.ifilter`Python 2.x，如

```
from itertools import ifilter
f = ifilter(lambda x: x < 400, gen())
f.next() 
```

这过滤了生成器，如希望的那样产生 0 到 400 之间的随机整数。

FWIW`itertools.ifilter`在 Python 3.x 中被弃用，取而代之的是内置的，`filter()`它的迭代语法略有不同

```
f = filter(lambda x: x < 400, gen())
next(f) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-11T14:31:15.617

将其包装在一个限制范围的 zip 生成器上：

```
gen = range(100_000_000_000)
limit = 10
(z[1] for z in zip(range(limit), gen)) 
```

[zip](https://docs.python.org/3.7/library/functions.html#zip)创建一个元组，这就是`z[1]`

这可以用于`for`循环：

```
for g in (z[1] for z in zip(range(limit), gen)):
    print(g) 
```

或者你可以使用[lambda](https://docs.python.org/3.7/reference/expressions.html#lambda)：

```
wrap = lambda gen, limit: (z[1] for z in zip(range(limit), gen))
for g in wrap(gen, 10):
    print(g) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T19:55:08.567

只需将计数器用于无限生成器：

```
gen=Generate()        # your generator function example
l=[gen.next() for i in range(100)] 
```

但既然是生成器，就使用生成器表达式：

```
seq=(gen.next() for i in xrange(100))  #need x in xrange in Python 2.x; 3.x use range 
```

* * *

**编辑**

好的，然后只需使用控制器：

```
def controler(gen,limit):
    n=gen.next()
    while n<limit:
        yield n
        n=gen.next()

seq=[i for i in controler(Generate(),100)] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-01T23:51:45.513

替换`Generate()`为`xrange(10000)`

# php - 在 SQL 上计算一个类别中的不同项目

> ID：14653873
> 
> 赞同：7
> 
> 时间：2013-02-01T19:46:54.810
> 
> 标签：php, mysql, sql, count

我需要编写如下 SQL 语句：

我有一张桌子，里面有很多物品，每个物品都有一个类别。总共有3个类别。

我需要选择 DISTINCT 类别，然后按每个类别中的项目数对它们进行排序。

这会是一个好方法吗？还是太慢了？

```
SELECT DISTINCT category, count(*) AS counter
FROM item_descr
GROUP BY category
ORDER BY counter DESC 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T19:49:14.630

`DISTINCT`不需要，因为您正在使用`GROUP BY category`：

```
SELECT category, count(*) AS counter
FROM item_descr
GROUP BY category
ORDER BY counter DESC 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T19:49:46.797

`GROUP BY`就是做你想做的事。`DISTINCT`是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:53:04.917

如果您希望获得良好的性能，尤其是在较大的表上，那么对类别进行索引非常重要。

# c++ - 如何使用 g++ 生成确定性二进制输出？

> ID：14653874
> 
> 赞同：16
> 
> 时间：2013-02-01T19:46:57.993
> 
> 标签：c++, g++, deterministic

我在一个非常规范的环境中工作，我们需要能够生成相同的二进制输入，每次构建产品时提供相同的源代码。我们目前使用的是一个古老版本的 g++，该版本已被修补，不会在生成的二进制文件中写入日期/时间之类的东西，这些二进制文件会随着构建而改变，但我想更新到 g++ 4.7.2。有谁知道补丁，或者对我需要寻找什么来获取两个相同的源代码并产生相同的二进制输出有什么建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-24T06:36:52.247

Debian [Reproducible 构建项目](https://wiki.debian.org/ReproducibleBuilds)试图逐字节标准化 Debian 软件包，并[于 2016 年获得了 Linux 基金会的资助](http://web.archive.org/web/20190723155526/https://www.linuxfoundation.org/press-release/2016/11/the-linux-foundations-core-infrastructure-initiative-renews-funding-for-reproducible-builds-project/)。

虽然这可能不仅仅包括编译，但您应该看看它。

它还向我指出了[这篇文章](http://blog.mindfab.net/2013/12/on-way-to-deterministic-binariy-gcc.html)，它在@Employed 所说的内容中添加了以下几点：

*   把源码放在一个固定的文件夹里（例如`/tmp/build`）来处理`__FILE__`
*   对于`__DATE__`, `__TIME__`, `__TIMESTAMP__`:
    *   libfaketime：[https ://github.com/wolfcw/libfaketime](https://github.com/wolfcw/libfaketime)
    *   覆盖这些宏`-D`
    *   `-Wdate-time`or : 如果使用, or are 则`-Werror=date-time`警告或失败。Linux 内核 4.4 默认使用它。`__TIME__``__DATE__``__TIMESTAMP__`
*   将`D`标志与 一起使用`ar`，或使用[https://github.com/nh2/ar-timestamp-wiper/tree/master](https://github.com/nh2/ar-timestamp-wiper/tree/master)擦除图章
*   `-fno-guess-branch-probability`：[旧的手册版本](https://gcc.gnu.org/onlinedocs/gcc-3.3.1/gcc/Optimize-Options.html)说它是不确定性的来源，但现在[不是了](https://gcc.gnu.org/onlinedocs/gcc-5.4.0/gcc/Optimize-Options.html#Optimize-Options)。不确定这是否被覆盖`-frandom-seed`。

[Buildroot](https://buildroot.org/)有一个`BR2_REPRODUCIBLE`选项可以提供一些关于包级别的想法，但目前还远未完成。

相关话题：

*   [https://superuser.com/questions/639351/does-recompiling-a-program-produce-a-bit-for-bit-identical-binary](https://superuser.com/questions/639351/does-recompiling-a-program-produce-a-bit-for-bit-identical-binary)
*   [https://www.quora.com/What-c​​an-be-the-possible-reasons-for-the-object-code-of-an-unchanged-C-file-to-change-on-recompilation](https://www.quora.com/What-can-be-the-possible-reasons-for-the-object-code-of-an-unchanged-C-file-to-change-on-recompilation)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T02:40:40.460

我们还依赖位相同的重建，并且使用 gcc-4.7.x。

除了设置`PWD=/proc/self/cwd`和使用之外`-frandom-seed=<input-file-name>`，还有一些补丁，可以在`svn://gcc.gnu.org/svn/gcc/branches/google/gcc-4_7`分支中找到。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-20T02:19:02.087

使用“ **DATE** ”宏使构建不确定

# sql - 将整数更改为浮点数并添加小数点

> ID：14653875
> 
> 赞同：1
> 
> 时间：2013-02-01T19:47:03.853
> 
> 标签：sql, sql-server-2008, tsql

我正在 Microsoft SQL Server Management Studio 2008 上使用 SQL。

简而言之，我正在接收坐标数据，`115949833`并且我需要将其输出，`115.949833`因为我需要能够计算纬度和经度坐标之间的里程。经度和纬度值都保存为不带小数位的整数。我试图将其更改为字符串，以便可以使用子字符串连接并将其转换为浮点数。我已经弄清楚了经纬度值之间里程的公式，但由于小数点的问题，它并不准确。

这是我用于经度的代码：

`Cast(substring(str(longitude,1,not null),1,3)+'.'+substring(str(longitude,4,not null),4,9) as float) as longitude`

它一直告诉我我在`CAST`.

我一直在做很多研究，但仍然找不到执行此任务的确切方法。如果有人可以提供任何反馈、提示、帮助等。将不胜感激。谢谢。

***编辑：我需要将名为“经度”的整个列转换为浮点数或以某种方式在第三个字符之后显示小数点，并且将名为“纬度”的整个列在第二个字符之后显示一个小数点。

例如，现在我的专栏显示：

纬度经度
36158500 115949833
36340000 115914667
36153488 115944875

我需要它看起来像这样：

纬度 经度
36.158500 115.949833
36.340000 115.914667
36.153488 115.944875

****编辑**** 所以使用 Tim Lehner 的答案，我已经使用了我的代码并实现了他的答案，但现在我需要弄清楚如何让它使用新的纬度和经度列显示里程......我创建了一些临时表来存储我想要的基于特定无线电名称的信息，但我无法使用蒂姆的回答从这些临时表中提取信息。

**这是我正在使用的代码：**
USE [system]
GO
With CTE as
(SELECT * FROM AVL
WHERE (DATE_TIME between '01/30/2013 00:00:00' AND
'01/30/2013 23:59:59' ) AND radio_name = 'MAS7') CTE2
as
(select *,row_number() over(partition by Vehicle_ID order by Date_Time) as RN FROM CTE)

```
 SELECT *, sqrt((69.1*(previous.Latitude - next.Latitude))*
     (69.1*(previous.Latitude-next.Latitude)) + 
     (69.1*(previous.Longitude-next.Longitude)) *
     cos(next.Latitude/57.3) * (69.1*(previous.longitude-next.Longitude)) *
     cos(next.Latitude/57.3)) as Miles

    From CTE2 as Previous
    Join CTE2 as Next
    On previous.Vehicle_ID = Next.Vehicle_ID
    AND Previous.RN = 
    Next.RN - 1
    SELECT CAST(Latitude / 1000000.0 as decimal(10, 6)) as Latitude, 
    cast(Longitude / 1000000.0 as decimal(10, 6)) as Longitude
    from AVL 
```

实际代码本身确实可以正常工作，但里程计算使用的是原始的整个纬度/经度数字，而不是具有小数点的更新数字。

我尝试在最后一条语句中插入 CTE2 而不是 AVL，它说这是一个无效的对象名称。有什么指点或提示吗？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:53:16.290

我喜欢使用数据类型来发挥我的优势：

```
select 115949833 / 1000000.0
-- returns 115.949833000 
```

然后，您可以根据您的规范四舍五入/截断。

将小数点添加到除数将根据[数据类型优先](http://msdn.microsoft.com/en-us/library/ms190309.aspx)`numeric`规则将此操作的输出提升。

**更新**

根据您的测试数据，您可以使用如下查询：

```
select cast(Latitude / 1000000.0 as decimal(10, 6)) as Latitude
  , cast(Longitude / 1000000.0 as decimal(10, 6)) as Longitude
from MyTable

/*
Returns:
Latitude    Longitude
36.158500   115.949833
36.340000   115.914667
36.153488   115.944875
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T19:51:09.320

你总是想在第三个字符之后添加点？使用[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)功能

```
DECLARE @v VARCHAR(100)
SELECT @v = '115949833'

SELECT CONVERT(FLOAT,(STUFF(@v,4,0,'.'))) 
```

输出

115.949833

另一种方法是乘以 0.000001

```
DECLARE @v VARCHAR(100)
SELECT @v = '115949833'

SELECT CONVERT(INT,@v)  * 0.000001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:52:22.303

我会使用`STUFF`：

```
select stuff(longitude,4,0,'.') from table 
```

这是[小提琴](http://sqlfiddle.com/#!3/d41d8/8382)。

如果你需要它是浮动的，那么只需添加演员表：

```
select cast(stuff(longitude,4,0,'.') as float)  from table 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T20:08:11.437

```
SELECT round(substring(longitude,1,3)+'.'+substring(longitude,4,6),6)
FROM TableName 
```

# java - 在流中实现故障安全行为

> ID：14653881
> 
> 赞同：0
> 
> 时间：2013-02-01T19:47:20.083
> 
> 标签：java, mule, flow

我正在尝试在我的流程中创建一个故障安全场景。

我的流程如下所示。它涉及一些实习生调用网络服务的子流程。在任何情况下，如果其中一个 Web 服务不可用，则会引发连接拒绝异常并且整个处理将停止。

相反，我想要一个故障安全场景，即使当前的出站呼叫失败，流也应该继续下一个子流。

是否有任何消息处理器或流控制处理器可以帮助在 Mule 中实现这种行为。

下面给出的是我的抽象流程

```
<flow name="main_flow" >
    ....
    ....
    <flow-ref  name="subflow_1" />
    ....
    ....
    <flow-ref  name="subflow_2" />
    ....
    ....
    <flow-ref  name="subflow_3" />
    ....
    ....

</flow>

<sub-flow name="subflow_1">
    ....
    ....
    <out-bound call to web-service />
    ....
    ....
</sub-flow>

<sub-flow name="subflow_2">
    ....
    ....
    <out-bound call to web-service />
    ....
    ....
</sub-flow>

<sub-flow name="subflow_3">
    ....
    ....
    <out-bound call to web-service />
    ....
    ....
</sub-flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:04:17.590

一种技巧可能是将有效负载存储在一个变量中，有一个`<catch-exception-strategy>`块将捕获您的 Web 服务调用异常，用于`<set-payload>`覆盖当前有效负载，然后从流程`sub-flow2`手动调用`catch-exception``sub-flow1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:32:08.637

对于每个 Web 服务调用，使用[`first-successful`](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-FirstSuccessful)路由器，将您的 Web 服务调用作为第一个子节点，将回退机制作为第二个子节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:08:55.923

您可以通过流实现故障安全行为。

```
<flow name="main_flow" >
    ....
    ....
    <flow-ref  name="flow_1" />
    ....
    ....
    <flow-ref  name="flow_2" />
    ....
    ....
    <flow-ref  name="flow_3" />
    ....
    ....

</flow>

<flow name="flow_1" processingStrategy="synchronous" >
    ....
    ....
    <out-bound call to web-service />
    ....
    <catch-exception-strategy >
      .... Your FailSafe code to recover. Also you will have the exception here.
     </catch-exception-strategy>
</flow> 
```

通过这种方式，您可以使用流程实现故障安全行为。

快乐编码:)

# sql - 由于已插入记录的意外更新导致休眠外键约束

> ID：14653883
> 
> 赞同：1
> 
> 时间：2013-02-01T19:47:23.843
> 
> 标签：sql, nhibernate, transactions

这是在以下代码中复制的一个奇怪的代码：

```
 using (ISession session = RepositoryTestHelper.SessionFactory.OpenSession())
        {
            //session.BeginTransaction();

            UserRepo repo = new UserRepo(session);
            CompanyRepo cRepo = new CompanyRepo(session);
            var user = repo.FindByEmail("test.user@blah.com");
            user.CompanyAssociations.Add(new CompanyUserAssoc() 
                { 
                    User = user,
                    Company = cRepo.GetById(1)
                });
            repo.AddOrUpdate(user);

            //session.Transaction.Commit();
        } 
```

用户、公司和 CompanyUserAssoc 之间的关系相当直接：

对于公司：

```
HasMany<CompanyUserAssoc>(x => x.UserAssociations).KeyColumn("User_id"); 
```

对于用户：

```
HasMany<CompanyUserAssoc>(x => x.CompanyAssociations).KeyColumn("Company_id") 
```

对于关联类本身：

```
References(x => x.Company).UniqueKey("CompanyId_UserId");
References(x => x.User).UniqueKey("CompanyId_UserId"); 
```

现在这就是我感到困惑的地方。请注意，在我的初始代码中，开始和提交 trans 调用已被注释掉。这实际上意味着代码将起作用！CompanyUserAssoc 已创建并正确引用了 id 为 1 的用户和公司。太好了！

但是......可悲的是，当我把它放在一个交易中时，我得到了这个错误：

```
{"The UPDATE statement conflicted with the FOREIGN KEY constraint \"FK3C47859753A62C6E\". The conflict occurred in database \"xxxx\", table \"dbo.Company\", column 'Id'.\r\nThe statement has been terminated."} 
```

但为什么？那是我的问题。我在分析器中看到的是它这样做：

```
exec sp_executesql N'UPDATE [CompanyUserAssoc] SET Company_id = null WHERE Company_id = @p0',N'@p0 int',@p0=1 
```

等等……什么？无效的？为什么将公司ID设置为null？为什么它只在交易中这样做？我的 Nhibernate 映射有什么“错误”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:56:56.347

由于这两个集合都映射为非反向（[默认](http://nhforge.org/doc/nh/en/index.html#collections-mapping)）并且 Company 集合没有用户，因此它将发出该更新以清除链接表。您可以尝试将其设置`UserAssociations`为反向吗？或者，当涉及到显式链接表时，我通常会做的是将`HasMany`s 都设置为反向并直接使用链接表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:06:08.117

这到底是一条红鲱鱼，一条我已经开始鄙视的鱼。在我匆忙和依赖智能感知的过程中，我没有注意到 Company 的 UserAssocations 属性不是 IList 而是 IList！是的，我愚蠢地选择了 Nhib 地图类而不是域类。这很奇怪，这并没有像您期望的那样出错，并且在没有事务的情况下工作，但是为什么呢？

好吧 - Nhib 能够插入 assoc 条目，但随后认为它需要使用它已经插入的 id 更新同一个表（因为它以某种方式将其视为不同的实体？）。当我使用该类型时，我会预料到地图类本身会出现编译错误，但没有。并且没有事务，生成的 sql 就可以工作。

我会更多地调查原因，但我回答这个只是为了强调一个罕见且愚蠢的错误，如果错过，可能会导致大量调查。

# jenkins - jenkins 中打开的 http 会话过多的性能问题？

> ID：14653889
> 
> 赞同：0
> 
> 时间：2013-02-01T19:48:16.707
> 
> 标签：jenkins, cloudbees

我们现在使用 Jenkins Enterprise 有一段时间了。自最新更新以来，似乎在打开多个 http 会话时性能急剧下降。

我们的实验表明，打开的 http 会话似乎有一个限制（在 10 到 30 个之间变化，但总是在 10 到 30 个之间），可以很好地提供服务，而再添加一个会话也会导致一切下降。一旦我们关闭了几个会话，一切都恢复到正常的 CPU、主计算机上的内存和 IO 都正常。

最近有其他人经历过这种情况吗？

Tobias（技术细节：在 Windows Server 2003 机器上托管主机，在 Win7 和 XP 上也是如此，在 JRE 1.7 中运行，Jenkins 版本 1.466.12.1（CloudBees 的 Jenkins Enterprise 12.11））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:38:21.497

这已被归档为[JENKINS-16474](https://issues.jenkins-ci.org/browse/JENKINS-16474)，正在调查中。

# .net - 是否可以在 xaml winrt 应用程序中创建自定义主题画笔？

> ID：14653891
> 
> 赞同：2
> 
> 时间：2013-02-01T19:48:45.830
> 
> 标签：.net, xaml, windows-runtime

我想在我的应用程序中创建一个solidbrush 资源，该资源将根据所选主题改变颜色。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:06:31.160

好吧，我想通了。在 StandardStyles.xaml 中有一个部分

在这里，您可以为每个不同的主题添加相同的实体画笔元素。

```
<ResourceDictionary.ThemeDictionaries>
    <ResourceDictionary x:Key="Default">
        <x:String x:Key="BackButtonGlyph">&#xE071;</x:String>
        <x:String x:Key="BackButtonSnappedGlyph">&#xE0BA;</x:String>
        <SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="#CEE3F8"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemPointerOverBackgroundThemeBrush" Color="#E0E0E0"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBackgroundThemeBrush" Color="#CEE3F8"></SolidColorBrush>
        <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderThemeBrush" Color="#CEE3F8"></SolidColorBrush>
        <SolidColorBrush x:Key="HeaderBrush" Color="#FF8AA1B8">

        </SolidColorBrush>
    </ResourceDictionary>
    <ResourceDictionary x:Key="Light">
        <SolidColorBrush x:Key="HeaderBrush" Color="#FFCEE3F8">

        </SolidColorBrush>
    </ResourceDictionary>
    <ResourceDictionary x:Key="HighContrast">
        <x:String x:Key="BackButtonGlyph">&#xE0A6;</x:String>
        <x:String x:Key="BackButtonSnappedGlyph">&#xE0C4;</x:String>
    </ResourceDictionary>
</ResourceDictionary.ThemeDictionaries> 
```

在这里，我添加了一个“Light”主题，并向其中 2 个主题添加了一个名为“HeaderBrush”的实心画笔。

要实现此画笔，只需将其作为资源添加到元素中。像这样...

```
<AppBar x:Name="BottomAppBar1"   Padding="10,0,10,0" BorderBrush="Blue"  BorderThickness="0 1 0 0" Background="{ThemeResource HeaderBrush}"  AutomationProperties.Name="Bottom App Bar" Opened="BottomAppBar1_Opened" Closed="BottomAppBar1_Closed"> 
```

这里我将画笔设置为背景颜色，现在它会随着主题自动改变。

# mysql - MySQL外键具有多个（条件）可能值

> ID：14653893
> 
> 赞同：0
> 
> 时间：2013-02-01T19:48:54.747
> 
> 标签：mysql, foreign-keys

我的想法是在一个表中使用两个条目（一个包含引用的表名，一个包含该表中的键）来引用其他几个表之一。

表的相关部分：

```
CREATE TABLE people 
  ( 
     peopleid SMALLINT UNSIGNED auto_increment, 
     name     VARCHAR(40) NOT NULL, 
     prevname VARCHAR(40), 
     role     ENUM('Teacher', 'Mentor', 'Administrator'), 
     roleid   SMALLINT UNSIGNED 
  ) 
```

注：Teacher 和 Mentor 是表格。如果此人是管理员，则 RoleID 将为空。

我希望 RoleID 成为引用 Role 字段中引用的表的外键。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:10:27.693

最好的办法是为角色和人员设置一个单独的表格。这将提供一个规范化的关系模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:58:52.277

SQL 的设计初衷不是为了做到这一点。如果要链接到单独的表，则需要单独的外键。

# javascript - 重命名 node.js 续集时间戳列

> ID：14653913
> 
> 赞同：11
> 
> 时间：2013-02-01T19:50:25.890
> 
> 标签：javascript, mysql, node.js, orm, sequelize.js

我刚刚开始使用 sequelize，但在映射现有数据库时遇到了一个小问题。

默认情况下，sequelize 创建两个名为 createdAt 和 updatedAt 的数据时间列，有人知道是否可以将这些列重命名为其他名称。例如...

```
products: sequelize.define('products', {
    timestamps: false,
    product_id: {
        type: Sequelize.INTEGER, 
        primaryKey: true, 
        autoIncrement: true
    },
    product_name: Sequelize.STRING,
    product_description: Sequelize.TEXT,
    product_created: Sequelize.DATE,
    product_updated: Sequelize.DATE
}), 
```

这仍然会自动修改创建和更新的 product_created/product_updated 列。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-06-26T17:27:58.533

另一个更新罢工（两年过去了），你可以做[你想做](http://docs.sequelizejs.com/en/1.7.0/docs/models/)的事：

```
products: sequelize.define('products', {
    timestamps: false,
    product_id: {
        type: Sequelize.INTEGER, 
        primaryKey: true, 
        autoIncrement: true
    },
    product_name: Sequelize.STRING,
    product_description: Sequelize.TEXT,
    product_created: Sequelize.DATE,
    product_updated: Sequelize.DATE
}, {
  updatedAt: 'product_updated',
  createdAt: 'product_created'
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T12:28:14.423

遗憾的是，这还不可能。你能在github上打开一个问题吗？我想这很容易实现。

谢谢 ：）

# google-apps-script - ContactsApp getFullName() 从目录添加的联系人中不返回任何内容

> ID：14653914
> 
> 赞同：0
> 
> 时间：2013-02-01T19:50:25.863
> 
> 标签：google-apps-script, google-contacts-api

1.  我有 Google 目录，我想在我的域中共享联系人及其信息
2.  我去域用户的谷歌联系人并将所有目录联系人添加到“我的联系人”中

问题：当我将我的目录联系人添加到“我的联系人”时，我无法从指定联系人那里获取姓名。我发现了一些奇怪的解决方案：

*   我必须先给联系人发送电子邮件，然后才能获得他/她的姓名
*   或者我必须手动将带有谷歌应用脚​​本（GAS）的联系人添加到一个新的联系人组中
*   旁注：我可以使用这种方法成功地收到电子邮件。只是名称之类的信息是个问题

    ```
     var svContacts = ContactsApp.getContacts();
        for (var i=0; i<svContacts.length; i++) {
         var nameStr  = svContacts[i].getFullName();
         Logger.log(nameStr);
        } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:40:17.453

我不能 100% 确定，但我强烈怀疑将共享目录中的联系人添加到您自己的联系人中并不会真正复制它，直到您执行编辑联系人的操作（例如向他们发送电子邮件或将其添加到一组）。Apps 脚本会看到与 Google Contacts GData API 中公开的相同联系人，但它目前无法查看目录联系人，因此这可以解释您的结果。

# android - 删除本地存储但仍然存在

> ID：14653916
> 
> 赞同：3
> 
> 时间：2013-02-01T19:50:27.857
> 
> 标签：android, android-webview, local-storage

当用户注销时，我正在尝试清除应用程序中 webview 使用的本地存储。我正在手动删除保存本地存储的文件夹，并且能够验证它在用户注销时是否被删除。但是，当他们重新登录时，即使没有本地存储文件，webview 似乎仍然可以访问本地存储。如果我在注销后手动终止进程，它会按预期工作，但我需要这种行为而不终止应用程序。

是否可以清除应用程序使用的 RAM，这是 vebview 的已知错误，还是有其他方法可以解决这个问题？

我已尝试删除 webview 和 webviewCache 数据库，删除所有缓存文件夹，删除应用程序使用的文件，但本地存储仍然存在，因为注销时应用程序未重置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-18T19:27:47.100

我终于找到了我要找的东西！

由于我们在应用程序中有一种内置浏览器，因此可以加载许多网页并将内容保存到 localStorage。调用`localStorage.clear()`或未`loadUrl("javascript:localStorage.clear()")`正确清除所有网页等的所有缓存。

最终起作用的行为是使用下面的`WebStorage.deleteAllData()`链接。我也在删除文件（因为 kitkat 默认保存在 app_webview 中，在此之前您提供路径）

[http://developer.android.com/reference/android/webkit/WebStorage.html#deleteAllData()](http://developer.android.com/reference/android/webkit/WebStorage.html#deleteAllData())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:07:19.410

尝试调用`localStorage.clear()`JavaScript 来清除 localStorage，而不是`WebView`通过删除它管理的文件来胡闹。

# c# - 在非 UI 线程上引发异常时如何保留堆栈跟踪

> ID：14653920
> 
> 赞同：7
> 
> 时间：2013-02-01T19:50:50.760
> 
> 标签：c#, wpf, exception

这样做是不好的形式，因为它不保留堆栈跟踪：

```
try { /*... some code that can throw an exception ...*/ }
catch (Exception e)
{
    throw e; // ...Use "throw;" by itself instead
} 
```

但是，如果在非 UI 线程上捕获到异常，我想将其提升回 UI 并处理它，以便用户收到如下消息：

```
try { /*... some code that can throw an exception ...*/ }
catch (Exception e)
{
    Dispatcher.Invoke((Action)(() => { throw; }));
} 
```

但是，我不能在这里单独使用 throw 关键字，因为 C# 词法分析器（正确地）认为**throw**语句不在**catch**中。我必须这样做：

```
try { /*... some code that can throw an exception ...*/ }
catch (Exception e)
{
    Dispatcher.Invoke((Action)(() => { throw e; }));
} 
```

并重新抛出异常，该异常会丢失其堆栈跟踪。

有什么（简单的）方法可以解决这个问题（我总是可以在异常准备好切换线程时打包堆栈跟踪，但这似乎很狡猾）？

注意：我看到了[这个帖子](https://stackoverflow.com/questions/13586411/write-stack-trace-when-an-exception-is-thrown-from-another-thread)，但它只是标题相似，而不是内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:00:48.307

通常的方法是抛出一个*新*的异常，原始的包含为`InnerException`. `Exception`对此有[一个特殊的构造函数](http://msdn.microsoft.com/en-us/library/804f22sf.aspx)。

但是如果你真的想这样做并且你在.Net 4.5上，[你可以使用`ExceptionDispatchInfo`](http://blogs.microsoft.co.il/blogs/sasha/archive/2011/10/19/capture-transfer-and-rethrow-exceptions-with-exceptiondispatchinfo-net-4-5.aspx)捕获异常的堆栈跟踪，然后在其他地方重新抛出它而不重置堆栈跟踪。但在大多数情况下，使用旧方法将异常包装在新方法中可能会更好。

# data-binding - Knockout.js 应用绑定而不重新渲染

> ID：14653931
> 
> 赞同：1
> 
> 时间：2013-02-01T19:51:31.270
> 
> 标签：data-binding, razor, asp.net-mvc-4, knockout.js, model-binding

我想知道是否有一种方法可以在不重新渲染 DOM 元素的情况下将绑定应用于某些 DOM 元素。

我问是因为在我的情况下，服务器正在向我返回带有 Razor 模板的 HTML 构建。所以后端处理所有的 DOM 构建。

我想要做的就是使用一个健壮的 JS 库，例如 Knockout.js，获取一个完全渲染的标记并对其应用某种绑定。这是可能吗。

因此，例如在普通的客户端构建标记中，我会做这样的事情：

```
<ul data-bind="foreach: fruits">
    <li data-bind="text: name"></li>
</ul> 
```

然后应用绑定并构建 html。

```
ko.applyBindings(new ViewModel(data)); 
```

这将导致这样的事情：

```
<ul data-bind="foreach: fruits">
    <li data-bind="text: name">Apples</li>
    <li data-bind="text: name">Pairs</li>
    <li data-bind="text: name">Banana</li>
    <li data-bind="text: name">Peaches</li>
    <li data-bind="text: name">Grapes</li>
</ul> 
```

但是使用 Razor 模板，HTML 已经像这样返回了，但我仍然想应用绑定。如何在不重新渲染 html 的情况下执行此操作。我能想到的唯一其他方法也是构建自己的自定义绑定，但我想避免这种情况。

是否有另一个我可以使用的框架来做到这一点？我听说骨干可能会这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:02:55.690

正如其他一些受访者所说，我认为你最好以不同的方式来做这件事。如果您宁愿避免 Ajax 调用的额外服务器往返来获取数据，您可以让服务器呈现代表您的数据的 JSON 字符串，并将其嵌入到 HTML 模板旁边的 HTML 中。

然后，您可以使用 JSON.parse 将此字符串解析为 JSON 树，并将这些值绑定到视图模型构造函数中的视图模型中。

这样，您将获得从服务器返回数据作为响应的一部分的性能提升，但不会使 Knockout 变形。作为一个额外的好处，添加 AJAX 行为到例如更新此数据变得更加容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:55:55.260

听起来你正在混合方法，这最终会有点混乱。话虽如此，如果您*真的*想这样做以简化 DHTML 等，那么我建议您不要尝试将 foreach 绑定添加到提供的标记中，并让您的模型反映服务器端提供的模型。粗略的例子：

```
var model = {
   fruits: {
      apple: { name: ko.observable('Apples') },
      pairs: { name: ko.observable('Pairs') },
      banana: { name: ko.observable('Banana') },
      peaches: { name: ko.observable('Peaches') },
      grapes: { name: ko.observable('Grapes') },
   }
}

<ul data-bind="with: fruits">
    <li data-bind="text: apple.name">Apples</li>
    <li data-bind="text: pairs.name">Pairs</li>
    <li data-bind="text: banana.name">Banana</li>
    <li data-bind="text: peaches.name">Peaches</li>
    <li data-bind="text: grapes.name">Grapes</li>
</ul> 
```

这很丑，因为它是:-) 最好的答案是请考虑不同的方法。

# sql - 包含多个连接的查询

> ID：14653932
> 
> 赞同：1
> 
> 时间：2013-02-01T19:51:33.660
> 
> 标签：sql, ruby-on-rails

我在 Rails 应用程序中有以下三个表/模型：

```
class ProgramType < ActiveRecord::Base
  attr_accessible :name, :description, :position

  has_many :programs
end

class Program < ActiveRecord::Base
  attr_accessible :site_id, :start_date, :end_date, :program_type_id,
                  :active, :name,:short_name

  belongs_to :program_type
  has_many :sessions
end

class Session < ActiveRecord::Base
  belongs_to :program
end 
```

以下查询返回表中的所有记录`sessions`，而不是只返回指定的记录`ProgramType`。我究竟做错了什么？

```
Session
  .active
  .joins(:program)
  .joins(:program => :program_type)
  .where('program_types.name = ?', "Summer Domestic") 
```

我试图只检索属于特定程序类型的程序的那些会话记录。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:02:00.463

我认为您可能会遇到与 AR 不知道您实际使用的事实相关的问题`program_types`，因为您使用的是 SQL 字符串。尝试这个 ：

```
Session
 .active
 .joins( program: :program_type )
 .where( program_types: {name: "Summer Domestic"} ) 
```

# visual-studio-2012 - 如何使用 C++/CX 并在控制台应用程序中包含 Windows 运行时库？

> ID：14653935
> 
> 赞同：1
> 
> 时间：2013-02-01T19:51:48.430
> 
> 标签：visual-studio-2012, windows-runtime, c++-cx

我希望能够从控制台应用程序访问 Windows 命名空间（例如 Windows::Storage::Compression、Windows::Web::Json）。我目前正在使用 Win32 控制台应用程序项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:24:08.757

在桌面控制台应用程序的 API 文档中引用元数据[winmd 文件。](http://msdn.microsoft.com/en-us/library/vstudio/hh708954.aspx)然后，您可以使用标记为 DualApiPartition 的 API，例如[Windows::Storage::Compression::Compressor](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.compression.compressor.aspx)。请注意，在桌面项目中，Core 选项卡默认情况下不会出现。请参阅[msdn.microsoft.com/library/hh708954(v=vs.110).aspx](http://msdn.microsoft.com/library/hh708954%28v=vs.110%29.aspx)，了解在添加引用对话框中启用元数据引用的步骤。

在 Visual Studio 的早期版本中，如果您安装了 Windows 8 Kit，则可以通过 COM 调用相同的类。

# zeromq - 有没有办法知道 ZeroMQ 消息来自哪里？

> ID：14653937
> 
> 赞同：3
> 
> 时间：2013-02-01T19:51:56.773
> 
> 标签：zeromq

我有一个 ZeroMQ 套接字，它从不同机器上的多个进程接收数据。在不改变数据内容的情况下，有没有办法识别数据的来源？具体来说，如果它来自 TCP 连接，我想要发件人的 IP 地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T22:09:51.903

不，没有办法从 ZeroMq 套接字获取发送者 IP。这些信息隐藏在 ZeroMq 的实现层中。您有两种选择来解决这个问题，一种是更改正在传递的消息，只需将发件人 IP 添加到消息本身，另一种是使用多部分消息。

来自 ZeroMq [zmq_send()](http://api.zeromq.org/3-2%3azmq-msg-send) Api 文档（3.2.2）：

> 一个ØMQ消息由1个或多个消息部分组成。每个消息部分本身就是一个独立的 zmq_msg_t。ØMQ 确保消息的原子传递：对等方应接收消息的所有消息部分或根本不接收。消息部分的总数不受可用内存限制。

Multi-Part 消息实际上是原子消息，但被分成几个逻辑消息。即您收到所有零件或没有零件。如果您无法修改原始消息，您可以在消息（在发件人端）前面加上发件人的 IP。然后，接收方可以提取第一部分作为发送方 IP，将第二部分提取为原始的、未修改的消息。它将作为单个消息传递，但在逻辑上分为两个谨慎的部分。

在您的情况下，您可以执行以下操作：

```
// Send a multi-part message consisting of sender IP plus another message
zmq_msg_send (&my_ip, my_socket, ZMQ_SNDMORE);
zmq_msg_send (&my_message, my_socket, 0); 
```

对于接收器，请参阅[zmq_msg_recv()](http://api.zeromq.org/3-2%3azmq-msg-recv)的文档。

# http - 远程连接到 EC2 服务器上的 MongoDB http 接口

> ID：14653938
> 
> 赞同：9
> 
> 时间：2013-02-01T19:51:58.850
> 
> 标签：http, mongodb, rest, interface, amazon-ec2

我无法远程连接到 AWS ec2 服务器上的 mongodb http 接口。

我检查了日志并确认它正在侦听端口 28017。我已经使用 netstat -a 验证了 tcp 端口 28017 已打开。我在安全组中启用了 28017。

我使用 ifconfig 获取我的 IP，并尝试使用 IP:28017 访问 http 接口。什么都没发生。没有错误，什么都没有。

我已经在我的 mongod.conf 文件中添加了 rest = true 并且我使用 'sudo service mongod restart' 将 mongod 作为服务启动

我什至尝试使用 'sudo mongod --rest' 启动 mongod，但无济于事。

这是 tail -f /log/mongod.conf 显示的内容：

```
Sat Feb  2 02:06:54 [initandlisten] MongoDB starting : pid=3919 port=27017 dbpath=/data 64-bit host=domU-12-31-39-12-3A-A2
Sat Feb  2 02:06:54 [initandlisten] db version v2.2.2, pdfile version 4.5
Sat Feb  2 02:06:54 [initandlisten] git version: d1b43b61a5308c4ad0679d34b262c5af9d664267
Sat Feb  2 02:06:54 [initandlisten] build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Sat Feb  2 02:06:54 [initandlisten] options: { config: "/etc/mongod.conf", dbpath: "/data", fork: "true", logappend: "true", logpath: "/log/mongod.log", pidfilepath: "/var/run/mongodb/mongod.pid", rest: "true" }
Sat Feb  2 02:06:54 [initandlisten] journal dir=/data/journal
Sat Feb  2 02:06:54 [initandlisten] recover : no journal files present, no recovery needed
Sat Feb  2 02:06:54 [initandlisten] waiting for connections on port 27017
Sat Feb  2 02:06:54 [websvr] admin web console waiting for connections on port 28017 
```

这就是 netstat -a 显示的内容：

```
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address               Foreign Address             State
tcp        0      0 localhost:smtp              *:*                         LISTEN
tcp        0      0 *:27017                     *:*                         LISTEN
tcp        0      0 *:mysql                     *:*                         LISTEN
tcp        0      0 *:28017                     *:*                         LISTEN
tcp        0      0 *:ssh                       *:*                         LISTEN
tcp        0    272 domU-12-31-39-12-3A-A2.:ssh pool-108-54-50-116.ny:50722 ESTABLISHED
tcp        0      0 *:ssh                       *:*                         LISTEN
udp        0      0 *:bootpc                    *:*
udp        0      0 domU-12-31-39-12-3A-A2.c:ntp *:*
udp        0      0 localhost:ntp               *:*
udp        0      0 *:ntp                       *:*
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node Path
unix  2      [ ACC ]     STREAM     LISTENING     5402   @/com/ubuntu/upstart
unix  2      [ ACC ]     STREAM     LISTENING     40948  /var/lib/mysql/mysql.sock
unix  2      [ ACC ]     SEQPACKET  LISTENING     5468   @/org/kernel/udev/udevd
unix  2      [ ACC ]     STREAM     LISTENING     6332   /var/run/dbus/system_bus_socket
unix  9      [ ]         DGRAM                    6278   /dev/log
unix  2      [ ACC ]     STREAM     LISTENING     182622 /tmp/mongodb-27017.sock
unix  3      [ ]         STREAM     CONNECTED     182434
unix  3      [ ]         STREAM     CONNECTED     182433
unix  2      [ ]         DGRAM                    182429
unix  2      [ ]         DGRAM                    131031
unix  2      [ ]         DGRAM                    40170
unix  2      [ ]         DGRAM                    19247
unix  2      [ ]         DGRAM                    7231
unix  2      [ ]         DGRAM                    7212
unix  2      [ ]         DGRAM                    7194
unix  3      [ ]         STREAM     CONNECTED     6341   /var/run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     6340
unix  3      [ ]         STREAM     CONNECTED     6336
unix  3      [ ]         STREAM     CONNECTED     6335
unix  3      [ ]         DGRAM                    5484
unix  3      [ ]         DGRAM                    5483 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-03-04T04:31:05.953

我在尝试远程访问 mongo shell 时遇到了类似的问题，其中一些答案有助于解决部分问题。总结一下：

*   **公共 IP/DNS**：在 EC2 管理控制台上选择您的实例并确保它具有公共 IP 或公共 DNS。AWS 正在将更多默认设置转移到虚拟私有云 (VPC) 中，并且可以启动到只有私有 IP 地址（VPC 内部）的云中。如果您没有公共 DNS 或 IP，则需要[分配一个弹性 IP](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-allocating)。

*   **安全组端口**：再次查看 EC2 控制台上的实例详细信息，找到安全组并选择“查看规则”。假设您使用的是默认 Mongo 端口，您应该从您的 IP 地址或（更安全）从您的 IP 地址拥有`27017`并`28017`打开 TCP 。`0.0.0.0/0`如果没有，请为您的实例选择一个安全组，然后从控制台转到`Inbound`> `Edit`> `Add Rule`> `Custom TCP Rule`、`Port Range: 27017`和适当的 IP `Source`。对于 http 接口，为`Port Range: 28017`.

*   **/etc/mongod.conf**：

    *   取消注释`port=27017`以确保您拥有默认端口（我认为这实际上没有必要，但它让我感觉更好，很高兴知道在哪里更改默认端口......）
    *   注释掉`bind_ip=127.0.0.1`以便监听外部接口（例如远程连接）
    *   `httpinterface=true`如果要使用http接口，请取消注释
*   **创建用户**：您需要[创建一个管理员和/或用户](http://docs.mongodb.org/manual/administration/security-user-role-management/)来远程访问数据库。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-15T00:51:08.463

对于您的 EC2 实例，添加两个入站自定义 TCP 规则以允许端口 27017 和 28017 上的入站流量。

确保在 /etc/mongod.conf 文件中注释掉“bind_ip = 127.0.0.1”

重启 mongod 服务器：$sudo service mongod restart

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T23:20:25.963

听起来您的安全组设置有问题。您可以尝试从盒子本身访问管理界面：

```
curl http://localhost:28017/ 
```

如果您取回内容，那么您的安全组设置（或盒子本身的防火墙）可能有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:29:00.343

您是否检查过它正在侦听公共 IP 以及该端口？它可能正在本地主机上监听。

# sql-server - SQL Server 'FOR XML' 将值放入“行”元素节点

> ID：14653939
> 
> 赞同：5
> 
> 时间：2013-02-01T19:52:08.930
> 
> 标签：sql-server, xml, tsql, for-xml

这是另一个“for xml”问题，但我不确定这是否可以在没有显式模式的情况下完成。如果不能，那我就只能忍受了。

以下是我目前的选择语句：

```
 SELECT
        [stream_id] as '@stream_id',
        [path_locator] as '@path_locator',
        [parent_path_locator] as '@parent_path_locatr',
        [file_type] as '@file_type',
        [cached_file_size] as '@cached_file_size',
        [creation_time] as '@creation_time',
        [last_write_time] as '@last_write_time',
        [last_access_time] as '@last_access_time',
        [is_directory] as '@is_directory',
        [is_offline] as '@is_offline',
        [is_hidden] as '@is_hidden',
        [is_readonly] as '@is_readonly',
        [is_archive] as '@is_archive',
        [is_system] as '@is_system',
        [is_temporary] as '@is_temporary',
        [name] as '/name',
        dbo.udf_GetChildren(path_locator)
    FROM @Merged
    WHERE path_locator.GetLevel() = 1
    FOR XML PATH'file'), ROOT('files'), TYPE 
```

这将输出以下 xml：

```
 <files>
   <file stream_id="" etc...>
      <name>NAME</name>
   </file>
 </files> 
```

这还不错，但我真正想要的是获取**name**元素的值作为**file**元素的值。这是一个如此简单的任务，我认为它可以在没有显式模式的情况下完成，但我经常在这些事情上犯错。

I've tried using the '/' marker, but this doesn't seem to have the effect I want (for example [Update XML node (in an XML column) in SQL Server 2005 with another column value in the same row](https://stackoverflow.com/questions/10271297/update-xml-node-in-an-xml-column-in-sql-server-2005-with-another-column-value)).

**edit:** The desired xml would be simply this:

```
 <files>
   <file stream_id="" etc...>NAME</file>
 </files> 
```

Many thanks for the help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:52:18.947

Use `name as '*'`

[Columns with a Name Specified as a Wildcard Character](http://msdn.microsoft.com/en-us/library/bb500154.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:37:57.810

I think you have to remove the Column Name from the field -- I was able to do this with concatonating a blank space to the end. Here is a condensed version that you should be able to get to work with your above example:

```
SELECT name + ''
FROM TestXML
FOR XML PATH('file') 
```

And here is the [SQL Fiddle](http://sqlfiddle.com/#!3/e1f14f/25).

And a good article about it:

[http://msdn.microsoft.com/en-us/library/bb510469.aspx](http://msdn.microsoft.com/en-us/library/bb510469.aspx)

Here it is with your above query:

```
SELECT
    [stream_id] as '@stream_id',
    [path_locator] as '@path_locator',
    [parent_path_locator] as '@parent_path_locatr',
    [file_type] as '@file_type',
    [cached_file_size] as '@cached_file_size',
    [creation_time] as '@creation_time',
    [last_write_time] as '@last_write_time',
    [last_access_time] as '@last_access_time',
    [is_directory] as '@is_directory',
    [is_offline] as '@is_offline',
    [is_hidden] as '@is_hidden',
    [is_readonly] as '@is_readonly',
    [is_archive] as '@is_archive',
    [is_system] as '@is_system',
    [is_temporary] as '@is_temporary',
    [name] + '',
    dbo.udf_GetChildren(path_locator)
FROM @Merged
WHERE path_locator.GetLevel() = 1
FOR XML PATH'file'), ROOT('files'), TYPE 
```

Good luck.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:40:56.397

I moved the `file` node to each column:

```
SELECT [stream_id] AS 'file/@stream_id'
   , [is_system] AS 'file/@is_system'
   , [is_temporary] AS 'file/@is_temporary'
   ...
   , [name] AS 'file'
FROM Merged
FOR XML PATH('files'), TYPE; 
```

# java - 对多个 POST 参数使用 @RequestParam

> ID：14653940
> 
> 赞同：0
> 
> 时间：2013-02-01T19:52:09.783
> 
> 标签：java, spring, data-binding, spring-mvc

我在这个线程中解决了一个非常相似的问题：[*单击*](https://stackoverflow.com/questions/4596351/binding-a-list-in-requestparam)

使长话短说：

我正在使用 jQuery 动态生成表单元素，结果如下所示：

```
<div id="XYZ-1">
<input type="text" id="XYZ-1-position" name="XYZ-1-position" style="width: 20px;"/>
<input type="text" id="XYZ-1-input" name="XYZ-1-value" style="width: 400px;"/>
</div>

<div id="XYZ-2">
<input type="text" id="XYZ-2-position" name="XYZ-2-position" style="width: 20px;"/>
<input type="text" id="XYZ-2-input" name="XYZ-2-value" style="width: 400px;"/>
</div> 
```

因此，为了处理一个表单字段，我只使用了这个简单的@ReqeustParam：

```
 @RequestMapping(value = "/data", method = RequestMethod.POST)
 public String myHandler(@RequestParam("XYZ-1-value")String content, Model model) {

    model.addAttribute("dataset", content); 
            return "data" 
```

在我帖子开头的主题中，它的解决方法如下：

```
public String controllerMethod(@RequestParam(value="myParam[]") String[] myParams){
....
} 
```

这适用于具有相同名称的输入类型：

```
<input type="checkbox" name="myParam[]" value="myVal1" />
<input type="checkbox" name="myParam[]" value="myVal2" /> 
```

但与我的问题不同的是，我的表单元素没有相同的名称——每个元素都有一个单独的名称。

所以我的问题是如何在我的控制器中的单个处理程序中处理这些单独的后参数。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:08:39.753

对于这类事情，我喜欢的模式是有一个表单 bean，其中包含一个包含我的个人值的 bean 列表（或映射）。所以，我会：

```
public class FormBean {
  private List<FormItem> items;
  //...getters/setters
} 
```

和

```
public class FormItem {
  private String val1;
  private Integer val2;
  //...getters/setters
} 
```

和控制器方法：

```
@RequestMapping()
public String default(@ModelAttribute("formBean") FormBean formBean) {
   // Blah blah blah
} 
```

在视图端，映射名称如下所示：

```
<input type="text" name="formBean.items[0].val1" />
<input type="text" name="formBean.items[0].val2" /> 
```

或者您可以使用 JSTL 标签：

```
<form:form modelAttribute="formBean">
  <form:input path="items[0].val1" />
  <form:input path="items[0].val2" />
</form:form> 
```

这样一来，一切都很好并且被打包了，并且在添加新行时在视图端解析名称真的很容易。

**编辑**

将模型自动放入会话的简单示例（我是从记忆中输入的……请自行验证）

控制器：

```
@Controller
@RequestMapping("/form")
@SessionAttributes({"formBean"})
public class FormController {
    @RequestMapping()
    public String defaultView(@ModelAttribute("formBean") FormBean formBean, Model uiModel) {
        // Do something...add anything to the uiModel that you want to use in your form...you should not need to add formBean as it should auto-matically get put into session now with the @SessionAttributes annotation
        // Also to note, if you set the "formBean" attribute on the Model or ModelAndView, it will replace the one in Session.  Also, you can add the SessionStatus to one of your methods and use its .setComplete() method to indicate you are done with the session...you usually do this after you know the user is done with the application so the session can get cleaned up.
    }

    @RequestMapping("/someOtherPath")
    public String someOtherHandler(@ModelAttribute("formBean") FormBean formBean, Model uiModel) {
        // Do something...again, formBean should be either created or out of session
    }

    @ModelAttribute("formBean")
    private FormBean createFormBean() {
        // This method can be named anything, as long as it returns a FormBean, has the @ModelAttribute named on it, and has no arguments.  Use this method to populate your FormBean when its created (set defaults and such).
        return new FormBean();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:08:47.623

首先，你不需要`[]`- 没有它它也能工作。但是如果每个复选框的名称不同，那么您需要`@RequestParam`为每个复选框单独设置一个。

# javascript - Javascript 中的 Windows Phone 样式“循环选择器”

> ID：14653946
> 
> 赞同：1
> 
> 时间：2013-02-01T19:52:31.137
> 
> 标签：javascript, html

在 Windows Phone 7 中，可以制作一个“循环选择器”，它可以用于各种类型的选择器。它用作列表或选择框，当您向下滚动时，在列表的末尾，它将环绕到列表中的第一项，反之亦然。

[http://www.windowsphonegeek.com/articles/WP7-LoopingSelector-in-depth--Part1-Visual-structure-and-API](http://www.windowsphonegeek.com/articles/WP7-LoopingSelector-in-depth--Part1-Visual-structure-and-API)

此链接可能会有所帮助。

我的问题：有没有办法可以用 Javascript 在 HTML 中复制这种功能？

谢谢。

# php - PHP 5.2 注意：使用未定义常量 __DIR__ - 假定为 '__DIR__

> ID：14653947
> 
> 赞同：15
> 
> 时间：2013-02-01T19:52:33.890
> 
> 标签：php

在 php 5.3 或更低版本中，它会提供如下错误：

```
Notice: Use of undefined constant __DIR__ - assumed '__DIR__ 
```

这是因为我使用的是魔法常数`__DIR__`。`__DIR__`有没有在 5.3 或更低版本中使用的替代方法？

这是导致它的代码：

```
<?php
/**
 * Load template files
 *
 * $files   Contains alphabetized list of files that will be required
 */
$files = array(
  'elements.inc',
  'form.inc',
  'menu.inc',
  'theme.inc',
);

function _zurb_foundation_load($files) {
  $tp = drupal_get_path('theme', 'zurb_foundation');
  $file = '';

  // Workaround for magic constant; for now because of php 5.2 issue
  // http://drupal.org/node/1899620#comment-6988766
  if( !defined( __DIR__ ) )define( __DIR__, dirname(__FILE__) );

  // Check file path and '.inc' extension
  foreach($files as $file) {
    $file_path = __DIR__ .'/inc/' . $file;
    if ( strpos($file,'.inc') > 0 && file_exists($file_path)) {
      require_once($file_path);
    }
  }
}

_zurb_foundation_load($files); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-01T19:53:26.897

使用旧技巧：

```
dirname(__FILE__) 
```

但如果可能，请更新到较新版本的 PHP。

# javascript - 通过透明元素处理 JS 事件

> ID：14653948
> 
> 赞同：1
> 
> 时间：2013-02-01T19:52:34.890
> 
> 标签：javascript, jquery, css

我有两个重叠的元素，一个在另一个之上。顶部元素的一半是完全透明的（不透明度 = 0），显示下方的另一个元素。我已经为这两个元素分配了单击事件处理程序，但显然，当尝试单击下面的元素时，它会激活透明的“顶部”元素。我正在寻找解决此问题的方法。

我通常会在顶部元素的不透明部分创建一个幽灵元素来获取顶部元素的事件处理程序，但我正在使用有角度的渐变，所以这不是一个真正的选择。

下面的 CSS、HTML 和 jQuery 代码：

HTML：

```
<body>
    <div id="wrapper">
        <div id="window">
            <div id="blueRibbon" class="ribbon">
               <div class="ribbonContent">
                   <h1>Page Title</h1>
                   <p>CONTENT</p>
               </div>
            </div>
            <div id="blueRibbon2" class="ribbon">
               <div class="ribbonContent">
                   <h1>Page Title</h1>
                   <p>CONTENT2</p>
               </div>
            </div>
        </div>
    </div>
    <script src="/scripts/jQuery.js"></script>
    <script src="/scripts/ribbons.js"></script>
</body> 
```

CSS：

```
body, html{
margin: 0;
padding: 0;
height: 100%;
}

#blueRibbon2{
background: -moz-linear-gradient(-45deg,  rgba(249,249,249,1) 62%, rgba(45,175,226,1) 62%, rgba(45,175,226,1) 67%, rgba(45,175,226,0) 67%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right bottom, color-stop(652%,rgba(249,249,249,1)), color-stop(62%,rgba(45,175,226,1)), color-stop(67%,rgba(45,175,226,1)), color-stop(67%,rgba(45,175,226,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(-45deg,  rgba(249,249,249,1) 65%,rgba(45,175,226,1) 65%,rgba(45,175,226,1) 69%,rgba(45,175,226,0) 69%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(-45deg,  rgba(249,249,249,1) 62%,rgba(45,175,226,1) 62%,rgba(45,175,226,1) 67%,rgba(45,175,226,0) 67%); /* Opera 11.10+ */
background: -ms-linear-gradient(-45deg,  rgba(249,249,249,1) 62%,rgba(45,175,226,1) 62%,rgba(45,175,226,1) 67%,rgba(45,175,226,0) 67%); /* IE10+ */
background: linear-gradient(135deg,  rgba(249,249,249,1) 62%,rgba(45,175,226,1) 62%,rgba(45,175,226,1) 67%,rgba(45,175,226,0) 67%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9f9f9', endColorstr='#002dafe2',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
/*dimensions*/
height: 800px;
width: 1880px;
/*positioning styles*/
position: absolute;
left: -1520px;
}

#blueRibbon{
background: -moz-linear-gradient(-45deg,  rgba(249,249,249,1) 62%, rgba(45,175,226,1) 62%, rgba(45,175,226,1) 67%, rgba(45,175,226,0) 67%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right bottom, color-stop(652%,rgba(249,249,249,1)), color-stop(62%,rgba(45,175,226,1)), color-stop(67%,rgba(45,175,226,1)), color-stop(67%,rgba(45,175,226,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(-45deg,  rgba(249,249,249,1) 65%,rgba(45,175,226,1) 65%,rgba(45,175,226,1) 69%,rgba(45,175,226,0) 69%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(-45deg,  rgba(249,249,249,1) 62%,rgba(45,175,226,1) 62%,rgba(45,175,226,1) 67%,rgba(45,175,226,0) 67%); /* Opera 11.10+ */
background: -ms-linear-gradient(-45deg,  rgba(249,249,249,1) 62%,rgba(45,175,226,1) 62%,rgba(45,175,226,1) 67%,rgba(45,175,226,0) 67%); /* IE10+ */
background: linear-gradient(135deg,  rgba(249,249,249,1) 62%,rgba(45,175,226,1) 62%,rgba(45,175,226,1) 67%,rgba(45,175,226,0) 67%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9f9f9', endColorstr='#002dafe2',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
/*dimensions*/
height: 800px;
width: 1880px;
/*positioning styles*/
position: absolute;
left: -1400px;
}

#window{
width: 1200px;
height: 800px;
margin: 0 auto;
border: 1px solid #000;
overflow: hidden;
position: relative;
}

#wrapper{
padding-top: 50px;
padding-bottom: 50px;
width: 1200px;
margin: 0 auto;
position: relative;
background: #EEE;
} 
```

JS：

```
function moveRibbonLeft(){
$(this).unbind("click", moveRibbonLeft);
$(this).animate({left: -1400}, 200, function(){
    $(this).bind("click", moveRibbonRight);    
});
}

function moveRibbonRight(){
$(this).unbind("click", moveRibbonRight);
$(this).animate({left: 0}, 200, function(){
    $(this).bind("click", moveRibbonLeft);    
});
}

function moveRibbonLeft2(){
$(this).unbind("click", moveRibbonLeft2);
$(this).animate({left: -1520}, 200, function(){
    $(this).bind("click", moveRibbonRight2);    
});
}

function moveRibbonRight2(){
$(this).unbind("click", moveRibbonRight2);
$(this).animate({left: -120}, 200, function(){
    $(this).bind("click", moveRibbonLeft2);    
});
}

$(document).ready(function(){
$("#blueRibbon").bind("click", moveRibbonRight);
$("#blueRibbon2").bind("click", moveRibbonRight2);  
}); 
```

非常感谢任何帮助:)

PS我知道很多代码远非漂亮，但我只是在这个阶段进行测试:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:56:53.023

Just capture the x,y coords of the click event and check which of your elements underneath the invisible blocker fit in the same screen space, then trigger the click event on the respective element.

That being said, this is silly. If you want people to click on things, you shouldn't put things in front of them.

# ios - 在 GCD 串行队列上调度和使 NSTimers 无效是否安全？

> ID：14653951
> 
> 赞同：9
> 
> 时间：2013-02-01T19:52:46.177
> 
> 标签：ios, objective-c, nstimer, grand-central-dispatch, core-foundation

这样做的正确方法是什么？`NSTimer`文档是这样说的：

> **特别注意事项**
> 
> 您必须从安装了计时器的线程发送此消息。如果您从另一个线程发送此消息，与计时器关联的输入源可能不会从其运行循环中删除，这可能会阻止线程正确退出。

既然`GCD`不能保证串行队列总是在同一个线程上运行块，那么确保您`NSTimer`在同一个线程上调度和无效的正确方法是什么？

**编辑：**

根据以下答案的建议，我创建了**`MSWeakTimer`**（[https://github.com/mindsnacks/MSWeakTimer](https://github.com/mindsnacks/MSWeakTimer)），这是一个自定义计时器实现`GCD`，可以从任何队列中使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T01:29:02.663

您不应该`NSTimer`在由 GCD 管理的匿名工作线程上安装。

使用带有 GCD 的调度计时器源而不是`NSTimer`，参见 dispatch_source_create(3)。

`NSTimer`依赖于当前线程的 runloop，这对于 GCD 队列来说是没有意义的。有关 GCD 和 runloop API 的更多详细信息，请参阅 WWDC2012 GCD 会议。

# android - Playbook 上的 Android 文件系统布局

> ID：14653953
> 
> 赞同：0
> 
> 时间：2013-02-01T19:52:56.313
> 
> 标签：android, filesystems, blackberry-playbook, blackberry-10

我不熟悉Android播放器如何看待文件系统。以前在 Air 应用程序中，我会在 Documents 中创建一个目录来保存我的应用程序文件。我应该使用哪个目录来存储 Android 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:29:43.847

据我所知，适用于 Android 应用程序的黑莓模拟器可以很好地处理通过[`Environment.getExternalStorageDirectory()`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)和将数据存储到外部存储[`Environment.getExternalStoragePublicDirectory()`](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29)。

请注意，这些都是外部存储。通常，您只需将数据存储到私有数据文件夹中。您可以[在此处找到有关 Android 存储选项的更多信息](http://developer.android.com/guide/topics/data/data-storage.html)。

# iis - 通过主机文件伪造多租户

> ID：14653963
> 
> 赞同：0
> 
> 时间：2013-02-01T19:53:31.760
> 
> 标签：iis, multi-tenant, hosts

我正在尝试通过主机文件在我的开发 PC 上模拟多租户以进行测试。

```
127.0.0.1 localhost
127.0.0.1 test1.gwd.nl
127.0.0.1 test2.gwd.nl 
```

当我运行我的网站（MVC4，清理新网站只是为了弄清楚这一点）并导航到 URL test1.gwd.nl:50401 时，我收到以下错误：错误的请求 - 无效的主机名

谷歌搜索它实际上告诉我这应该是可能的。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:16:41.567

最简单的方法是：

1.  转到iis，创建一个新站点并指向您的应用所在的文件夹
2.  请记住将文件夹的权限添加到 IIS_IUSRS 以便 iis 可以访问该文件夹
3.  配置应用程序池以使用对应版本的运行时
4.  创建与您的主机名的绑定
5.  转到 iis 中的 Web 应用程序属性并将 iis 设置为运行时主机，还指向您的多租户 URL 之一作为启动地址

这样，您可以使用 vs 调试您的应用程序，但该应用程序由 iis 托管，因此您可以轻松调试多租户。

# r - 从稀疏矩阵获得上三角矩阵

> ID：14653966
> 
> 赞同：1
> 
> 时间：2013-02-01T19:53:37.587
> 
> 标签：r, cluster-analysis, graph-theory, linear-algebra, sparse-matrix

我有一个对称但稀疏的 0 和 1 矩阵，表示两个对象之间是否存在边或链接——邻接矩阵。我正在尝试使用 R 中集群包中的命令 PAM，它需要一个相异矩阵（特别是该矩阵的上三角形）或距离。

下面找到一个有代表性的矩阵（尽管我的矩阵有更多的边和节点，并且与这个矩阵不同，实际上是稀疏的）。

```
0  1 0 0
1  0 0 0
0  0 0 1
0  0 1 0 
```

我需要我的矩阵的上三角版本，这意味着我需要获得这个矩阵。我的问题是我的矩阵至少是奇异的，所以矩阵命令（如常规 LU 分解或 Choleski 分解）不适用于它。

这是我尝试 64 * 64 稀疏矩阵时收到的错误消息：

```
Warning message:
In .local(x, ...) :
Exact singularity detected during LU decomposition: U[i,i]=0, i=20. 
```

我在这里阅读了关于稀疏矩阵的几篇文章，包括“[大稀疏矩阵到三角矩阵 R](https://stackoverflow.com/questions/12379426/large-sparse-matrix-to-triangular-matrix-r) ”

但他们似乎并没有完全按照我的意愿行事。

我想知道是否有人对我应该尝试获得所需矩阵的 R 命令有什么建议。如有必要，我可以尝试编写自己的功能，但我宁愿不这样做。

# java - JTable中的动画

> ID：14653967
> 
> 赞同：0
> 
> 时间：2013-02-01T19:53:37.590
> 
> 标签：java, multithreading, swing, animation, jtable

我正在尝试将 gif 图像（动画）放入 JTable 单元格，但它没有被显示。正如我所读到的，JTable 组件是静态的，需要重写渲染。

关键是我有一个线程计算一些数据并将其粘贴到表格单元格中，在计算时我想显示一些旋转轮。此外，我从另一个单独的线程向表中添加行。因此，一个线程添加包含一些数据的行，另一个线程计算行中单元格的数据。

是否可以将动画图标添加到每个添加行的同一单元格中？有谁知道怎么做？

更新：现在我可以创建一个带有动画 gif 的行，但不能将这些行从线程添加到表中

```
public class AnimatedIconTableExample extends JFrame {

    private static final long serialVersionUID = -1038271613549995183L;

    public AnimatedIconTableExample() {
        super("AnimatedIconTable Example");

        final Object[][] data = new Object[][] {
                { "", "", new ImageIcon("src/loading.gif"),
                        "text" } };
        final Object[] column = new Object[] { "First", "Second", "Third", "Fourth" };

        DefaultTableModel model = new DefaultTableModel() {

            private static final long serialVersionUID = 31150076182704312L;

            public int getColumnCount() {
                return column.length;
            }

            public int getRowCount() {
                return data.length;
            }

            public String getColumnName(int col) {
                return (String) column[col];
            }

            public Object getValueAt(int row, int col) {
                return data[row][col];
            }

            public Class<?> getColumnClass(int col) {
                return ImageIcon.class;
            }
        };

        JTable table = new JTable(model);
        setImageObserver(table);
        JScrollPane pane = new JScrollPane(table);
        getContentPane().add(pane);

        for (int i = 0; i < 5; i++) {
            new TableUpdater(model, data).start();
        }

    }

    private void setImageObserver(JTable table) {
        TableModel model = table.getModel();
        int colCount = model.getColumnCount();
        int rowCount = model.getRowCount();
        for (int col = 0; col < colCount; col++) {
            if (ImageIcon.class == model.getColumnClass(col)) {
                for (int row = 0; row < rowCount; row++) {
                    Object obj = model.getValueAt(row, col);
                    ImageIcon icon = null;
                    if (obj instanceof ImageIcon)
                        icon = (ImageIcon) model.getValueAt(row, col);
                    if (icon != null) {
                        icon.setImageObserver(new CellImageObserver(table, row,
                                col));
                    }
                }
            }
        }
    }

    class CellImageObserver implements ImageObserver {
        JTable table;
        int row;
        int col;

        CellImageObserver(JTable table, int row, int col) {
            this.table = table;
            this.row = row;
            this.col = col;
        }

        public boolean imageUpdate(Image img, int flags, int x, int y, int w,
                int h) {
            if ((flags & (FRAMEBITS | ALLBITS)) != 0) {
                Rectangle rect = table.getCellRect(row, col, false);
                table.repaint(rect);
            }
            return (flags & (ALLBITS | ABORT)) == 0;
        }
    }

    public static void main(String[] args) {
        AnimatedIconTableExample frame = new AnimatedIconTableExample();
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        frame.setSize(300, 150);
        frame.setVisible(true);
    }
}

public class TableUpdater extends Thread {

    private DefaultTableModel model;
    private Object[][] data;

    public TableUpdater(DefaultTableModel model, Object[][] data) {
        this.model = model;
        this.data = data;
    }

    public void run() {
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        model.addRow(data);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:59:30.957

`Is it possible to add an animation icon into the same cell in each added row?`,

*   [看看渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)，

*   但是 for`animated Gif`会更好、更舒适、更容易`JLabels`使用`GridLayout`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T20:23:11.530

阅读[编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。

`JTable`允许您放置图像和图标。

您需要覆盖您的`getColumnClass`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T12:12:18.683

上面来自 MadProgrammer 的“此示例”链接已损坏。但是，我在这里找到了它，它有所帮助：[AnimatedIconTableExample.java](http://www-st.inf.tu-dresden.de/SalesPoint/v3.1/faq/SwingExamples/html/jtable8.html)

```
/* (swing1.1.1beta2) */
//package jp.gr.java_conf.tame.swing.examples;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.swing.*;
import javax.swing.table.*;

/**
 * @version 1.0 06/19/99
 */
public class AnimatedIconTableExample extends JFrame {

  public AnimatedIconTableExample(){
    super( "AnimatedIconTable Example" );

    final Object[][] data =  new Object[][]{
      {new ImageIcon("images/3-40.gif"),new ImageIcon("images/3-119.gif")},
      {new ImageIcon("images/3-41.gif"),new ImageIcon("images/3-6.gif")}};
    final Object[] column = new Object[]{"Boy and Girl","Dog and Cat"};

    AbstractTableModel model = new AbstractTableModel() {
      public int getColumnCount() { return column.length; }
      public int getRowCount()    { return data.length; }
      public String getColumnName(int col) {
       return (String)column[col]; 
      }
      public Object getValueAt(int row, int col) { 
        return data[row][col]; 
      }
      public Class getColumnClass(int col) {
        return ImageIcon.class;
      }
    };

    JTable table = new JTable( model );
    table.setRowHeight(50);
    setImageObserver(table);
    JScrollPane pane = new JScrollPane(table);
    getContentPane().add(pane);
  }

  private void setImageObserver(JTable table) {
    TableModel model = table.getModel();
    int colCount = model.getColumnCount();
    int rowCount = model.getRowCount();
    for (int col=0;col<colCount;col++) {
      if (ImageIcon.class == model.getColumnClass(col)) {
        for (int row=0;row<rowCount;row++) {
          ImageIcon icon = (ImageIcon)model.getValueAt(row,col);
          if (icon != null) {
            icon.setImageObserver(new CellImageObserver(table, row, col));
          }
        }
      }
    }
  }

  class CellImageObserver implements ImageObserver {
    JTable table;
    int row;
    int col;

    CellImageObserver(JTable table,int row, int col) {
      this.table = table;
      this.row   = row;
      this.col   = col;
    }

    public boolean imageUpdate(Image img, int flags,
                   int x, int y, int w, int h) {
      if ((flags & (FRAMEBITS|ALLBITS)) != 0) {
        Rectangle rect = table.getCellRect(row,col,false);
        table.repaint(rect);
      }
      return (flags & (ALLBITS|ABORT)) == 0;
    }
  }

  public static void main(String[] args) {
    AnimatedIconTableExample frame = new AnimatedIconTableExample();
    frame.addWindowListener(new WindowAdapter() {
      public void windowClosing(WindowEvent e) {
        System.exit(0);
      }
    });
    frame.setSize( 300, 150 );
    frame.setVisible(true);
  }
} 
```

# c# - 拒绝从浏览器访问网页并允许从 C# 应用程序访问

> ID：14653968
> 
> 赞同：1
> 
> 时间：2013-02-01T19:53:49.603
> 
> 标签：c#, php, apache, .htaccess

我的`.htaccess`代码：

```
<Directory /var/www/electronic_signature/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order deny,allow
    deny from all
    allow from 127.0.0.1
    <Files /var/www/electronic_signature/mkcnf.php>
    allow from 127.0.0.1
    </Files>
</Directory> 
```

从浏览器一切正常，但我`mkcnf.php`通过 C# 应用程序调用页面；在`mkcnf.php`页面调用另一个php页面的地方，出现了这个异常：

> 远程服务器返回错误 403 Forbidden

为什么会出现此错误，即使我已在本地允许此页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:51:20.590

您允许访问为该页面提供服务的框。您拒绝访问其他所有内容，包括未在 127.0.0.1 上运行的 C# 应用程序。

# python - python：类型概率函数

> ID：14653974
> 
> 赞同：-2
> 
> 时间：2013-02-01T19:54:08.550
> 
> 标签：python, python-3.x, python-2.7

我想知道如何通过对从 890 到 910（含）的 x 值使用循环在 Python 中键入以下公式（请查看下面的图片）：

![公式](../Images/93169055aab7db66b8e0f5358836e2ab.png)

我的代码：

```
# PURPOSE : Evaluate cumulative probabilities for a normal distribution, sum an infinite series and convert the infinite series to integers

import math

m_ = 900         # identifier for normal distribution mean   [mm]
s_d = 1          # identifier for normal distribution standard deviation [mm]

print "DISTRIBUTION OF A PLATE WIDTH:" " MEAN", "=",m_,"," "STD DEV", "=", s_d
print ""
print "Using functions from the math library ..."

# The probability density function(pdf) for a normal distribution with mean m_ and standard deviation s_d
xx = 890
print "x" "       " " f(x)" "        " " F(x)"
while xx < 911:
    print xx
    xx = xx + 1

print (1 / ((s_d * (math.sqrt(2 * math.pi) * math.exp((- (x - m_) ** 2) / (2 * (s_d) ** 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:02:42.783

最好为公式定义一个函数......

**工作代码**

```
# PURPOSE : Evaluate cumulative probabilities for a normal distribution, sum an infinite series and convert the infinite series to integers

import math

def foo(x, mean, deviation):
    return (
                (
                    1 /
                    (
                        deviation
                        *
                        math.sqrt(2 * math.pi)
                    )
                )
            *
                math.exp
                (
                    -
                    (
                        (
                            (x - mean) ** 2
                        )
                        /
                        (
                            2 * (deviation ** 2)
                        )
                    )
                )
            )

m_ = 900         # identifier for normal distribution mean   [mm]
s_d = 1          # identifier for normal distribution standard deviation [mm]

print "DISTRIBUTION OF A PLATE WIDTH:" " MEAN", "=",m_,"," "STD DEV", "=", s_d
print ""
print "Using functions from the math library ..."

# The probability density function(pdf) for a normal distribution with mean m_ and standard deviation s_d

print "x" "       " " f(x)" "        " " F(x)"

for xx in range(890, 911):
    print xx
    xx = xx + 1

    print foo(xx, m_, s_d) 
```

**输出**

```
>>> 
DISTRIBUTION OF A PLATE WIDTH: MEAN = 900 ,STD DEV = 1

Using functions from the math library ...
x        f(x)         F(x)
890
1.69484813456e-18
891
5.05227108354e-15
892
1.50606078392e-11
893
6.07588284982e-09
894
2.45118608751e-06
895
0.000133830225765
896
0.00730688274528
897
0.0539909665132
898
0.398942280401
899
0.398942280401
900
0.398942280401
901
0.0539909665132
902
0.00730688274528
903
0.000133830225765
904
2.45118608751e-06
905
6.07588284982e-09
906
1.50606078392e-11
907
5.05227108354e-15
908
1.69484813456e-18
909
7.69459862671e-23
910
3.49334237203e-27
>>> 
```

# java - 十六进制数字在 Java Long 的 javascript 实现中向后出现

> ID：14653975
> 
> 赞同：1
> 
> 时间：2013-02-01T19:54:13.090
> 
> 标签：java, javascript, hex, long-integer

由于 javascript 没有原生的 Long 类型（就像 Java 一样），我目前正在使用[这个](http://closure-library.googlecode.com/svn/docs/class_goog_math_Long.html)类，它应该模拟 Java 的 Long 类型。但是，我得到了奇怪的输出。

*   Java Long1：3837363534333231，JS Long1：3132333435363738
*   Java Long2：3635343332313039，JS Long2：3930313233343536

当我对它们进行异或运算时：我得到：

*   JavaXor：e02020606020208，JSXor：80202060602020e

这些值是通过调用获得的：

*   Java: Long.toHexString(var);
*   JS：Long.toString(16)（这是goog.math.Long类的一个方法）

您会注意到 JS 表示（1 和 2）向后出现，每两个字符移动一次（因为十六进制表示 2 个字符，与它们的 Java 等效项相比。XOR 结果有点不同，因为它是向后的，但是字符-换字符。

难道我做错了什么？这是正常行为吗？谁能猜出为什么会发生这种情况？

# jquery - jQuery标签可能吗？

> ID：14653978
> 
> 赞同：0
> 
> 时间：2013-02-01T19:54:32.903
> 
> 标签：jquery, html

> **可能重复：**
> [如何在结束正文标记之后创建元素](https://stackoverflow.com/questions/4792142/how-do-i-create-an-element-after-the-closing-body-tag)

搜索了一下，没找到这个。

是否可以 jQuery 结束`</body>`标记，然后在上面添加一些 JS 代码？即：找到：

```
$("</body>") 
```

然后在这个标签上方添加一些 JS 脚本？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T19:56:31.687

您无需选择“关闭”标签，只需选择正文并附加您想要的内容：

```
$('body').append('<h1>foobar</h1>'); 
```

**更新**

正如@meagar 正确提到的那样，使用jQuery，您不会选择“结束”标签，而是选择整个“元素”，例如正文或整个“段落”（p）

试图让它更清楚，这段代码：

```
<body>
    <p>my paragraph</p>
    <script>
       $(body).append('<p>new paragraph</p>');
    </script>
</body> 
```

会产生这样的结果：

```
<body>
    <p>my paragraph</p>
    <script>
       $(body).append('<p>new paragraph</p>');
    </script>
    <p>new paragraph</p>
</body> 
```

新段落附加在正文末尾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:56:33.643

只需使用`.append()`.

```
$('body').append(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T19:56:38.110

如果您想这样做，您将查询`body`然后使用[append](http://api.jquery.com/append/)方法。

```
$("body").append(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T19:57:54.673

要将内容附加到正文，请使用以下内容。

```
$('body').append(htmltoappend); 
```

> 是否可以 jQuery 结束标记，然后在上面添加一些 JS 代码？

为什么要在结束 body 标记上方插入*JS 代码？*

# asp.net-mvc-3 - 带有父 ID 的 ASP.Net MVC 递归模型

> ID：14653980
> 
> 赞同：0
> 
> 时间：2013-02-01T19:54:49.443
> 
> 标签：asp.net-mvc-3, recursion, model, ef-code-first, foreign-keys

我似乎无法找到答案，所以希望有人可以提供帮助。我有以下模型，可以嵌套在同一模型的其他项目中，有效地创建一个 n 层数据集。我的模型是这样写的：

```
public partial class Resource
{
  [Key]
  public int ResourceID { get; set; }
  [Display(Name = "Parent Resource")]
  public int? ParentResourceID { get; set; }
  public virtual Resource ParentResource { get; set; 
  [Display(Name = "Resource Name")]
  public string Name { get; set; }
  public bool Deleted { get; set; }
} 
```

ParentResourceID 可以设置为 NULL，这意味着该项目位于级别 1 并且没有父项。

但是，当我从分配了父资源的数据库中请求项目时，ParentResource 对象始终为空。

我尝试了多种 [ForeignKey] 和 [InverseProperty] 想法，但没有任何运气。

我是否需要映射一些东西，以便模型知道 ParentResourceID 实际等于虚拟对象的 ResourceID，如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:09:52.153

我会使用[Fluent API](http://msdn.microsoft.com/en-us/library/hh295844%28v=vs.103%29.aspx)来配置它。它比在实体属性上使用属性要灵活得多。它看起来像这样。

```
 this.HasOptional(l => l.ParentResource)
  .WithMany(p => p.Children)
  .HasForeignKey(l => l.ParentId); 
```

从您的模型中不清楚的是父母是否可以有多个孩子。假设有多个孩子，您需要将这样的属性添加到您的模型中。

```
public virtual List<Resource> Children {get; set;} 
```

# javascript - 使用纯 CSS 进行图像平铺

> ID：14653981
> 
> 赞同：5
> 
> 时间：2013-02-01T19:54:56.173
> 
> 标签：javascript, jquery, css, layout

我正在尝试在类似网格的系统中平铺图像，其中任何一个都没有间距。如果您无法控制 DOM 中图像的顺序，是否可以不使用 javascript？

你显然不能只浮动容器，因为**如果你的图像大小不一样，就会有间隙。**

[http://jsfiddle.net/bzCNb/3/](http://jsfiddle.net/bzCNb/3/)

```
.wrapper
{
    width:400px;
}

/* One grid unit */
.box1
{
    float:left;
    overflow:hidden;
    height:100px;
    width:100px;
}

/* 2x bigger than a box1, takes up 4 grid units */
.box4
{
    float:left;
    overflow:hidden;
    height:200px;
    width:200px;
} 
```

由于 DOM 中元素的顺序，前三行行为正常。

**我猜它不可能没有javascript。希望我错了。=)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T23:35:53.783

您可以使用 column-count CSS3 属性来创建一个网格并让图像适合以下教程。[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

# php - Preg_Replace 模板中的模式

> ID：14653988
> 
> 赞同：0
> 
> 时间：2013-02-01T19:55:17.890
> 
> 标签：php, preg-replace, pattern-matching, datatemplate, template-engine

我正在努力寻找一种提高效率的方法。是否可以将循环变成单行？

编辑：寻找替换循环。

```
$template = "<div>[@ data]</div>";
$arrayData = array('hello', 'hi', 'hola');

foreach ($arrayData as $dataValue) {
    $fillPattern = '/\\[@ data\\]/is';

    $arrayTemplate .= preg_replace($fillPattern, $dataValue, $template);
}

$viewContent = preg_replace($pattern, $arrayTemplate, $viewContent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:57:59.217

在开始循环之前，您应该设置`$arrayTemplate`为空字符串：

```
$template = "<div>[@ data]</div>";
$arrayData = array('hello', 'hi', 'hola');
$arrayTemplate = ''; // <-- you forgot to declare this

foreach ($arrayData as $dataValue) {
    $arrayTemplate .= preg_replace('/\\[@ data\\]/is', $dataValue, $template);
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/OuxEUT](http://codepad.viper-7.com/OuxEUT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T01:03:39.633

首先，为什么你把任务放到`$fillPattern`循环中？它的值不会因每次迭代而改变。您应该将这些语句放在循环之外，在它之前。像这样：

```
$template = "<div>[@ data]</div>";
$arrayData = array('hello', 'hi', 'hola');
$fillPattern = '/\\[@ data\\]/is'; //<-- put it here

$arrayTemplate = '';
foreach ($arrayData as $dataValue) {
    $arrayTemplate .= preg_replace($fillPattern, $dataValue, $template);
} 
```

其次，您已经有一种方法可以将循环变成一行。只需使用较短的变量名，删除花括号（因为它只是其中的一个语句），然后将这 2 个语句写入一行。像这样：

```
$tpl = "<div>[@ data]</div>";
$data = array('hello', 'hi', 'hola');
$pat = '/\\[@ data\\]/is';

$res = ''; foreach ($data as $val) $res .= preg_replace($pat, $val, $tpl); 
```

但如果你不喜欢较短的变量名，祝你好运。我不认为你可以用那些长变量名制作一行代码。除了，你有一个 loooong looong 线：D

对于循环替换，您应该对函数式编程有所了解。您可以使用`array_map`来替换循环。要使其成为一行代码（或者我猜是一个语句代码），您必须使用匿名函数作为`array_map`.

使用 PHP 5.3 或更高版本，您可以使用以下代码：

```
$arrayTemplate = join('', array_map(
    function($x) use ($fillPattern, $template) {
        return preg_replace($fillPattern, $x, $template);
    }, $arrayData)); 
```

但如果你没有 PHP 5.3 或更新版本，你可以`create_function`这样使用：

```
$arrayTemplate = join('', array_map(
    create_function('$x', 'global $fillPattern, $template;
        return preg_replace($fillPattern, $x, $template);'
    ), $arrayData)); 
```

使用上面较短的变量名，这些代码可以重写如下：

```
$res = join('', array_map(function($x) use ($pat, $tpl) {
    return preg_replace($pat, $x, $tpl);
}, $data)); 
```

或者：

```
$res = join('', array_map(create_function(
    '$x', 'global $pat, $tpl; return preg_replace($pat, $x, $tpl);'
), $data)); 
```

你看，PHP 最初是一种命令式过程语言。它一开始并没有被设计为一种功能性语言。所以，我想现在使用 foreach 循环的命令式方法仍然是更好的方法。

# android - 如何在android上制作在线广播应用程序？

> ID：14653991
> 
> 赞同：-3
> 
> 时间：2013-02-01T19:55:20.983
> 
> 标签：android

我试图对位于网站上的 mp3 文件进行一些测试。它是成功的。但是当我试图收听一个在线广播的链接时，应用程序什么也没做。没有任何声音。。

我用了 ：

```
private void initializeMediaPlayer() {
    player = new MediaPlayer();
    try {
        player.setDataSource("http://www.buradyo.com/");
        // player.setDataSource("http://cdn.concreteloop.com/wp-content/uploads/2011/01/Jennifer-Lopez-feat.-Pitbull-On-the-Floor.mp3");
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    player.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

        public void onBufferingUpdate(MediaPlayer mp, int percent) {
            playSeekBar.setSecondaryProgress(percent);
            Log.i("Buffering", "" + percent);
        }
    });
} 
```

此代码适用于 mp3 文件，但不适用于在线广播..

等待你的帮助..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:02:42.293

您从[http://www.buradyo.com/](http://www.buradyo.com/)使用错误的 url 进行流式广播。setDataSource 用于从 buradyo.com 流式传输广播

```
 String str_stream_url="http://46.137.18.79:8000/;stream.nsv
                                       &type=mp3&volume=75&autostart=true";
 player.setDataSource(str_stream_url); 
```

# c# - MVP winforms 中的数据绑定

> ID：14653993
> 
> 赞同：7
> 
> 时间：2013-02-01T19:55:38.657
> 
> 标签：c#, winforms, data-binding, mvp

我有一个用 MVP 实现的 WinForms 应用程序。我的表单有一个`TextBox`，我想将它`Text`的属性数据绑定到模型中的一个属性。我不想在视图中引用模型。

在谷歌搜索后，我发现通过耦合模型和视图进行数据绑定是一个坏主意。我的示例初始化`Model`,`View`和`Presenter`如下。

```
class View : Form, IView
{
    public View()
    {
        InitializeComponent();
        new Presenter(this);
    }
}

class Presenter
{
    public Presenter(IView) : this.Presenter(this, new Model())
    {
    }

    public Presenter(IView view)
    {
    }
}

class Model : IModel
{
    public Model()
    {
    }

} 
```

目前我有 3 个项目，每个项目用于`Model`,`View`和`Presenter`。View 有参考，`Presenter`也`Presenter`有参考`Model`。谁能指导我如何将数据绑定到控件中`View`的属性中`Model`？

**编辑**

我知道在 Grid 中做事。我们可以将`Datasource`网格的属性分配给`List`演示者中的一个（或类似的东西），例如：

```
_view.DataSource = _model.ListOfEmployees; 
```

`ListOfEmployees`当模型发生变化时，这将反映 UI 中的值。但是`TextBox`暴露一个`Text`属性的 a 呢？如何在 MVP 架构中绑定它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T20:10:13.720

我的建议是将 View 和 Model 封装在 Presenter 中。这意味着给定视图的专用演示者（在大多数情况下）。在我看来，这很有效，因为无论如何大多数模型都会有所不同。

```
class Presenter {
    readonly IView view;
    readonly IModel model;

    public Presenter() {
        // if view needs ref. to presenter, pass into view ctor
        view = new View(this);
        model = new Model();
    }

    // alternatively - with the model injected - my preference
    public Presenter(IModel Model) {
        // if view needs ref. to presenter, pass into view ctor
        view = new View(this);
        model = Model;
    }
} 
```

在您的 IView 中，公开一个控件或控件的数据源属性：

```
interface IView {
    object GridDataSource { get; set; }
} 
```

向 Presenter 添加一些方法：

```
void SetGridDatasource() {
    view.GridDatasource = model.SomeBindableData;
} 
```

查看实现：

```
public object GridDatasource {
    get { return myGridView.DataSource; }
    set { myGridView.DataSource = value; }
} 
```

**注意：**
代码片段未经测试，建议作为起点。

**更新评论：**
`INotifyPropertyChanged`是一种非常有价值的机制，用于更新 和 之间的`IView`属性`IModel`。

大多数控件确实具有某种绑定功能。我建议尽可能使用那些[DataBinding 方法。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.databindings%28v=vs.100%29.aspx)只需通过 IView 公开这些属性，然后让 Presenter 将这些绑定设置为 IModel 属性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-31T18:20:09.023

解释：

如果要将文本框数据绑定到模型的基础属性：

第一：像许多其他状态一样，任何包含您的属性的内容都必须实现 INotifyPropertyChanged 接口，以便在更改对象属性时触发必要的事件以通知视图更改。在这方面，我将使用视图模型作为模型的属性来封装您希望将视图数据绑定到的特定属性。

第二：您的 IView 将包含您的 View 必须实现的 viewmodel 属性。

第三：您的视图将在 viewmodel 对象上仅使用 set 访问器实现 IView 属性，以将每个文本框数据绑定到 dto 属性。请注意，在下面的示例中，我再也不会在视图加载后手动设置文本框。现在，当底层模型的 viewmodel 属性更改时， textbox.text 值将被更新。这适用于两种方式（2 路数据绑定）。使用用户输入编辑文本框将更改基础模型的 dto 属性值。

第四：您的演示者只会在视图加载时将 IView 的属性设置为模型的属性一次。

示例：请记住，这是一个非常简单的粗略示例，没有像 OP 那样使用任何模型抽象，但应该为 Winforms MVP 中的文本框数据绑定提供一个很好的起点。我将在生产应用程序中更改的另一件事是使模型无状态并将视图模型（人）移动到演示者中。

```
//VIEWMODEL
public class Person : INotifyPropertyChanged
{
    string _firstName;
    string _lastName;
    public string FirstName
    {
        get { return _firstName; }
        set
        {
            if(value != _firstName)
            {
                _firstName = value;
                NotifyPropertyChanged("FirstName");
            }
        }
    }
    public string LastName
    {
        get { return _lastName; }
        set
        {
            if (value != _lastName)
            {
                _lastName = value;
                NotifyPropertyChanged("LastName");
            }
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

}

//MODEL
class Model
{
    Person _person;
    public Person Person { get { return _person; } }

    public Model()
    { 
        //Set default value
        _person = new Person(){ FirstName = "Test", LastName = "Subject" };
    }

    public void ChangePerson()
    {
        //When presenter calls this method, it will change the underlying source field and will reflect the changes in the View.
        _person.FirstName = "Homer";
        _person.LastName = "Simpson";
    }
}

//PRESENTER
class Presenter
{
    readonly View _view;
    readonly Model _model;
    public Presenter(View view)
    {
        _view = view;
        _model = new Model();

        _view.OnViewLoad += Load;
        _view.OnChangePerson += ChangePerson;
    }

    private void Load()
    {
        _view.Person = _model.Person;
    }

    private void ChangePerson()
    {
        _model.ChangePerson();
    }
}

//IVIEW
interface IView
{
   Person person { set; }

   event Action OnViewLoad;
   event Action OnChangePerson;
}

//VIEW
public partial class View : IView
{
     public View()
     {
         Presenter presenter = new Presenter(this); 
         this.Load += (s, e) => OnViewLoad(); //Shorthand event delegate
         this.btnChange.Click += (s, e) => OnChangePerson(); //Shorthand event delegate
     }

     public event Action OnViewLoad;
     public event Action OnChangePerson;

     public Person person
     {   //This is how you set textbox two-way databinding
         set
         {
               //Databinding syntax: property of control, source, source property, enable formatting, when to update datasource, null value
               txtFirstName.DataBindings.Add(new Binding("Text", value, "FirstName", true, DataSourceUpdateMode.OnPropertyChanged, string.Empty));
               txtLastName.DataBindings.Add(new Binding("Text", value, "LastName", true, DataSourceUpdateMode.OnPropertyChanged, string.Empty)); 
         }
     }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-05T00:08:43.387

我在 WinForms 中涉足了 MVP，有很多问题需要解决。大多数问题都来自于您在 VS 中的事实，并且能够使用表单设计器轻松设计表单真是太好了。

我尝试了一个从广泛使用的 WebForms MVP 项目开发的 WinForms MVP API，但是由于表单的隐藏文件代码使用了泛型（例如公共类 TheForm：UserControl），你失去了设计表单的能力，因为设计师知道如何处理泛型。

我最终选择了核心接口 IPresenter、IView、IViewModel。即使我没有添加任何额外的属性，我也总是为特定实现创建一个中间接口，主要是因为当我确实想要添加额外的属性时，它更容易适应以后的更改。IPresenter 采用 IView 类型的协变泛型类型所以在继承链中，我可以制作特定子视图类型的演示者。最后创建一个对话框是通过实例化一个 Presenter 并调用 Show 来完成的：

```
ISomePresenter<ISomeView> somePresenter = new SomeFactory.GetSomePresenter();
somePresenter.Show(); 
```

我的视图包含 IViewModel 的副本：

```
public void Show()
{
  ISomeView theView = new V();
  theView.ViewModel = new SomePresenterViewModel();
  .
  .
  .
} 
```

不回到原来的问题...... SampleView 无法了解 ISampleViewModel，因此如果不将演员表放在某个地方，就不可能对 ViewModel 进行标准数据绑定。这在我开发所有这些东西的项目中失控了，人们在事件处理程序以及 BindingSource 向导中到处进行转换。MVP的全部意义都丢失了。

因此，现在我对如何处理事件以及将控件设置为公共属性（以及随附的 ISampleView 属性）变得非常严格，以便演示者可以看到它们，或者只是创建重复事件以重新触发事件由演示者接听我一直在思考整个数据绑定难题。确实，唯一的方法是在没有设计人员支持的情况下完成设计人员在 Presenter 内的代码中所做的一切。也许使用 Designer 在 .designer.cs 文件中获取自动生成的代码，但将所有代码剪切到 Presenter 中。也许做一次以获得正确的语法等，然后抨击一些样板代码或根据生成的内容创建一个片段。您仍然需要访问视图上的实际控件才能指定绑定，因此，还要向返回控件实例的 ISampleView 添加一个属性。另外，我建议将 BindingSource 实例也放在 Presenter 中，或者至少将 Presenter 保存到的其他一些类中。

我喜欢尽可能多地使用 Designer，但有时您需要中断。正如我所说，CodePlex 上的 WinForms MVP 项目很棒，但所有表单设计都是在代码中完成的。在我的场景中，只有 DataBinding 需要在代码中完成，这实际上并不是视觉上的东西，因此更容易处理。

此外，作为旁注，用户 NotifyPropertyWeaver (IL Weaving) 支持完整的数据绑定。非常棒的是，您可以在视图模型中创建自动属性，从而使您的代码简洁且更具可读性，而无需在每个属性上调用 NotifyPropertyChanging 等。IL Weaving with Fody 在最终构建输出步骤之前完成所有后编译。非常方便。

无论如何，我希望围绕这个问题的概念头脑转储对某人有价值。我花了很长时间整理它，但它对我来说效果很好。

史蒂夫

编辑 2014-04-23

你知道吗，.NET 数据绑定是一个巨大的痛苦。最近在一个项目中，我们刚刚为特定控件滚动了自己的数据绑定代码，因为这一切都很难处理。

重新考虑我最初的回复以及最近的经验，核心模型应该完全分开。我倾向于创建一个我称之为 ViewModel 的东西，它与数据库对话并且是 DataBindable 并且被 View 看到。数据绑定让我非常伤心，尤其是在处理控制事件时，比如 DateTimePicker 的 ValueChanged。在一种情况下，我有一个开始和结束日期选择器以及一个复选框，用于将结束日期设置为开始日期后一天以及我需要考虑的其他范围规则。在根据某些规则更改值时将数据绑定配置到 VM 时，事件会再次触发并最终覆盖我所做的选择。我最终不得不输入 bool 值来帮助了解事件处理程序是否应该继续，然后' s 潜在的竞争条件或不知道事件处理程序（在另一个线程中）是否应该等待。很快就会变得混乱。

所以，从现在开始，我的方法是创建一个大模型，它接触数据库，可以根据捕获的数据进行验证规则检查，但我将创建一个更小、更轻的版本，它只包含数据绑定的属性。与真实模型的分离仍然存在，Presenter / Controller 响应的任何事件都可以在表单数据验证/数据持久性时从 VM 复制到主模型。如果我正在响应事件，那么设置 vm 值绑定到哪个更轻的 VM，我可以创建一个全新的 VM 实例并重新分配验证结果，然后将此新 VM 实例设置为 .DataSource当我准备好时视图上的 BindingSource 可以避免事件处理程序混乱。

主模型可以响应 NotifyPropertyChanged 事件来更新自己的变化，或者更好的是让演示者在正确的时间这样做。

顺便说一句，Visual Studio 2012 和 2013 现在似乎在设计器中处理通用控件，这非常酷。

作为旁注，我最近一直在涉足 iOS 开发。我印象非常深刻的一件事是他们在 MVC 中作为流程的一部分烘焙的方式，与 .NET 不同，它允许我们想出各种黑客方式来做这件事。我从中吸取了一些教训并将它们应用于.NET，发现我的大脑并没有那么严重。我特别喜欢的一件事是列表控件的工作方式，它很像 Qt（C++ 框架）的 MVC 控件。拥有单一后端对象列表但视图仅在可见区域中保存所需内容的能力比 .NET 控件的默认行为要好得多。

无论如何，祝 .NET 数据绑定好运。我个人会向任何新来者推荐......不要使用它，只需让控制器在适当的时间明确分配所有值。但是，如果您感到舒服并理解令人讨厌的细微差别，我希望我所说的某些内容能传达给某人。

# delphi - Delphi 到 ASM - 在 ASM 中创建对象会是什么样子？

> ID：14653996
> 
> 赞同：0
> 
> 时间：2013-02-01T19:55:45.690
> 
> 标签：delphi, assembly, reverse-engineering

我在delphi中有一个对象，如下所示：

```
 object DXDraw: TDXDraw
    Left = 0
    Top = 0
    Width = 640
    Height = 360
    AutoInitialize = True
    AutoSize = False
    Display.BitCount = 16
    Display.FixedBitCount = True
    Display.FixedRatio = True
    Display.FixedSize = False
    Options = [doFullScreen, doAllowReboot, doWaitVBlank, doHardware, 
        doRetainedMode, doDrawPrimitive, doSelectDriver, doTexture, 
        doRGB, doMono]
    SurfaceHeight = 360
    OnInitialize = DXDrawInitialize
    TabOrder = 1
    Visible = False
    OnClick = LbBackScreenClick
    OnDblClick = DXDrawDblClick
    OnDragDrop = FormDragDrop
    OnDragOver = FormDragOver
    OnKeyPress = EdFocusKeyPress
    OnMouseDown = LbBackScreenMouseDown
    OnMouseMove = LbBackScreenMouseMove
    OnMouseUp = LbBackScreenMouseUp
  end 
```

我试图弄清楚这在 ASM 中会是什么样子。特别是选项。我找到了它的枚举表，但它似乎被读过。我有兴趣删除 doFullScreen 标志。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T20:24:31.773

没有与 .dfm 格式文件关联的汇编代码。.dfm 文件中的属性将转换为二进制 .dfm 资源，然后链接到可执行文件。在运行时，表单持久性代码加载资源并使用 RTTI 动态处理其内容。

使用资源编辑器查看更多信息。表单资源将出现在 RCData | TMyForm 用于名为`TMyForm`. 然后，您可以从可执行文件中提取资源并将其保存到磁盘。使用`convert`Delphi 提供的实用程序将其转换为文本，然后传递`-t`。然后编辑文本 .dfm。然后使用转换选项将其转换回二进制`-b`。然后更新可执行文件，你就完成了。

@Remy 指出了一个更简单的解决方案。使用支持 Delphi .dfm 文件的资源编辑器，例如[XN Resource Editor](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)。这总结并保护您免受上述所有细节的影响。

# php - 无法在 wordpress 中显示新的元框

> ID：14653997
> 
> 赞同：0
> 
> 时间：2013-02-01T19:55:46.007
> 
> 标签：php, wordpress, meta

我无法添加新的元框。这是我的代码。元框旨在添加到自定义帖子类型上，其名称为“爪”。

代码的最后一行实际上出现在源代码中。即使那样它也没有显示。非常不合逻辑。

```
add_action('add_meta_boxes', 'my_admin');
function my_admin() {
    add_meta_box('claws_link','Link','random_callback','claws','normal','high');
}

function random_callback($post) {
    $post_id = $post->ID;
    wp_nonce_field( plugin_basename( __FILE__ ), 'random_linknonce' );
    // The actual fields for data entry
    // Use get_post_meta to retrieve an existing value from the database and use the value for the form
    $value = get_post_meta( $_POST['post_ID'], $key = 'claws_link', $single = true );
    echo '<label for="claws_link">';
        _e("Enter link", 'random_textdomain' );
    echo '</label> ';
    echo '<input type="text" id="claws_link" name="claws_link" value = "'.$value.'" size="25" />';    //this html code actually comes in the source, still no metabox, dunno why
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:04:38.703

尝试这个

```
add_action('do_meta_boxes', function() {
    add_meta_box('claws_link','Link','random_callback','claws','normal','high');
}); 
```

或者如果你不在 php 5.3+

```
add_action('do_meta_boxes', 'my_meta_boxes');

function my_meta_boxes() {
    add_meta_box('claws_link','Link','random_callback','claws','normal','high');
} 
```

# php - 如何在wordpress中突出显示当前菜单

> ID：14653998
> 
> 赞同：2
> 
> 时间：2013-02-01T19:55:56.223
> 
> 标签：php, html, css, wordpress

请查看网站[http://tourbazaar.co.in](http://tourbazaar.co.in) 您可以看到，当我将鼠标悬停时，它会变成灰白色。我想为当前选定的页面保留该颜色。怎么做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:58:13.453

为类添加样式`current_page_item`

```
li.current_page_item {
    background-color: #HEXVALUE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:11:57.587

它通过简单地使用来工作

```
li.current_page_item a {   background-color: #efefef;
    color: #000 !important; } 
```

!important 是关键

# c - 将负数连接到二进制数

> ID：14653999
> 
> 赞同：1
> 
> 时间：2013-02-01T19:56:06.320
> 
> 标签：c

我正在处理一些二进制数，试图连接数字。在这种情况下，我会得到我想要的：

```
 num = 0;
  num = (num<<3)|4;
  num = (num<<9)|7; 
```

如果我格式化为 4 个十六进制数字，这会将 num 设置为 100000000111 或 0x0807。

但是，如果我尝试连接一个负数：

```
 num = 0;
  num = (num<<3)|4;
  num = (num<<9)|-7; 
```

当我想得到 0x09F9 时，我得到 0xFFF9。右边的 9 位似乎是正确的，但左边的一些位似乎被翻转了。我猜当我执行逻辑或负数时，符号位被移动到最左边的位或其他东西。有什么办法可以防止这种情况发生吗？

另外，我知道在我的示例中，我可以将 num 设置为数字而不进行移位，但在我的实际程序中，这些是变量，我只是对数字进行硬编码以进行演示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:58:34.970

`-7`可能是一个 32 位负数 - 即`0xfffffff9`. 如果您只想使用 9 位，则需要对其进行屏蔽：

```
num = (num << 9) | (-7 & 0x1ff) 
```