# StackOverflow 问答 15790000-15790999

# php - 在 php 中创建文件 google drive API

> ID：15790004
> 
> 赞同：0
> 
> 时间：2013-04-03T14:21:38.297
> 
> 标签：php, google-drive-api

我想在我的驱动器中创建文件，然后点击此链接[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)。现在我创建了我的文件和目录，但文件和目录没有出现在我的驱动器中。

如果我列出我的驱动器，我可以在 var_dump 中看到所有创建的文件和目录，但在我的真实驱动器中看不到现有文件。

你有解决方案吗 ？

```
 function retrieveAllFiles($service) {

    $result = array();
      $pageToken = NULL;

      do {
        try {
          $parameters = array();
          if ($pageToken) {
            $par

ameters['pageToken'] = $pageToken;
      }
      $files = $service->files->listFiles($parameters);

      $result = array_merge($result, $files->getItems());
      $pageToken = $files->getNextPageToken();
    } catch (Exception $e) {
      print "An error occurred: " . $e->getMessage();
      $pageToken = NULL;
    }
  } while ($pageToken);
  var_dump($result);
  return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:00:01.943

请用：

```
$auth->prn = 'mailuser'; 
```

完成委托。

# c# - 用 List 模拟一个方法 作为参数并使用最小起订量返回 List<>

> ID：15790007
> 
> 赞同：11
> 
> 时间：2013-04-03T14:21:50.673
> 
> 标签：c#, .net, mocking, moq

在我的测试中，我将数据定义为`List<IUser>`带有一些记录的数据。

我想为 GetList 方法设置一个最小起订量，该方法接收 a`List<int>`作为参数。这是一个 ID 列表；我想返回带有这些 ID 的 IUser 列表`List<IUser>`

我试过了，但找不到正确的 Returns 语法

```
Mock<IUsers> mockUserRepository = new Mock<IUsers>();
_mockUserRepository.Setup(m => m.GetListAll(It.IsAny<List<int>>())).Returns(????????); 
```

我试过这样的事情：

```
_mockUserRepository.Setup(m => m.GetListAll(It.IsAny<List<int>>())).Returns(u =>_users.Contains(???)); 
```

谢谢，

```
class User : IUser
{
    public int Id { get; set; }
    public string Firsname { get; set; }
    public string Lastname { get; set; }
}

interface IUser
{
    int Id { get; set; }
    string Firsname { get; set; }
    string Lastname { get; set; }
}

interface IAction
{
    List<IUser> GetList(List<int> listId);
}

class Action : IAction
{

    public List<IUser> GetList(List<int> listId)
    {
        //....
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T14:31:29.133

试试这个：

```
mock.Setup(users => users.GetListAll(It.IsAny<List<int>>()))
            .Returns<List<int>>(ids =>
                {
                    return _users.Where(user => ids.Contains(user.Id)).ToList();
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T16:04:36.633

如果您有多个作为一个过滤器参数，则可以使用此示例

```
mock.Setup(o => o.GetListAllAsync(It.IsAny<List<int>>(), It.IsAny<string>())
 .ReturnsAsync((int[] ids, string firstname) =>
 {
   return _users
          .Where(user => ids.Contains(user.Id) && user.Firstname.Equals(firstname))
          .ToList();
 }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T14:25:58.197

只需返回准备好的列表：

```
_mockUserRepository.Setup(m => m.GetListAll(It.IsAny<List<int>>())).Returns(_users); 
```

# xcode - 使用滑块控制主音量？- Xcode

> ID：15790009
> 
> 赞同：0
> 
> 时间：2013-04-03T14:21:52.557
> 
> 标签：xcode, loops, slider, views, volume

**有没有办法可以使用滑块控制主音量？**

附加问题：

有没有办法让背景音乐在我更改或加载视图时停止播放？

谢谢你的回答！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T10:11:46.767

如果“背景音乐”是指正在播放的音乐/iPod 应用程序，是的，您可以在需要时停止它。

将 MediaPlayer 框架添加到您的项目中，然后在您的工作中使用这些代码：

**.h 文件**

```
 #import <MediaPlayer/MediaPlayer.h>

    @interface ViewController : UIViewController <MPMediaPickerControllerDelegate>
    {
        MPMusicPlayerController *musicPlayer;
    }

    @property (nonatomic, retain) MPMusicPlayerController *musicPlayer;
    @end 
```

**.m 文件**

```
@synthesize musicPlayer 
```

然后分配音乐播放器

```
musicPlayer = [MPMusicPlayerController iPodMusicPlayer]; 
```

现在您可以使用以下方法播放/暂停/停止/控制音乐/iPod 应用程序：

```
[musicPlayer play]; // play
 [musicPlayer pause]; //pause
 [musicPlayer stop]; // stop
 [musicPlayer skipToPreviousItem]; //previous song
 [musicPlayer skipToNextItem]; //next song 
```

您还可以使用滑块控制其音量：

```
[slider setValue:[musicPlayer volume]]; 
```

# twitter-bootstrap - Bootstrap 修复菜单 + jquery 对话框问题

> ID：15790019
> 
> 赞同：1
> 
> 时间：2013-04-03T14:22:00.623
> 
> 标签：twitter-bootstrap, jquery-ui-dialog

当我在小窗口中显示 JQuery 对话框时，它位于页面顶部，菜单关闭对话框。

```
$(function () {
    $('.d').dialog({
                width: '75%',
                height: 600,
                modal: true,
                draggable: false,
                resizable: false,
        position: [ "center", 100]
    });
}); 
```

见：[http ://snag.gy/BSJVs.jpg](http://snag.gy/BSJVs.jpg)

示例：http: [//jsfiddle.net/ishubin/9ruhx/1/](http://jsfiddle.net/ishubin/9ruhx/1/)

我该如何解决（例如设置 margin-top: 100px）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T23:48:24.623

你有两种简单的方法来处理这个问题。

更干净的解决方案：确保如果显示对话框，它始终位于菜单顶部：

```
// add this to your css file

div.ui-dialog {
     z-index: 1031 !important;   
} 
```

可以在[http://jsfiddle.net/9ruhx/2/](http://jsfiddle.net/9ruhx/2/)上找到一个工作示例。

否则，您可以确保对话框始终在顶部菜单下方打开：

```
// your css file

div.ui-dialog {
     top: 45px !important;
} 
```

见[http://jsfiddle.net/9ruhx/3/](http://jsfiddle.net/9ruhx/3/)。

# gnuplot - Gnuplot - 使用另一个字段作为标签绘制文件

> ID：15790026
> 
> 赞同：1
> 
> 时间：2013-04-03T14:22:10.617
> 
> 标签：gnuplot

（如果这是重复的，我不会感到惊讶，但我找不到正确的搜索词来找到它）

我有一个形式的数据文件（简化了一点）：

```
date       time       label      value
2013-03-17 10:09:28   thing 1    54
2013-03-17 10:09:32   thing 2    20
2013-03-17 10:10:02   thing 3    35
2013-03-17 10:10:03   thing 1    59
2013-03-17 10:10:21   thing 1    64
2013-03-17 10:10:37   thing 3    37
2013-03-17 10:10:37   thing 2    40
2013-03-17 10:10:42   thing 3    41
2013-03-17 10:10:44   thing 2    59 
```

...而我想要做的是创建一个多线图，分别为“事物 1”、“事物 2”和“事物 3”，并让 Gnuplot 自动相应地标记它们。

如果我将文件拆分为单独的数据集，每个标签一个，那么我知道我可以做一个这样的多线图：

```
set timefmt '%Y-%m-%d %H:%M:%S';
set xdata time;    
plot 'thing1.txt' using 1:3 title 'thing 1', \
     'thing2.txt' using 1:3 title 'thing 2' 
```

...但是这似乎是矫枉过正。这可以通过 Gnuplot 实现，而无需将文件拆分为每个数据集的单独文件吗？实际上有大约 200 个单独的标签，所以如果 Gnuplot 可以自动进行标签，它将节省大量的手动数据预处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:20:10.797

是的，你可以这样做：

```
plot for [i=1:300] 'thing.txt' using 1:(($4 == i)? $3:NaN) title 'thing '.i 
```

这不会是最有效的（我很确定 gnuplot 会读取您的文件 300 次），但它会完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T02:56:37.003

尽管@mgilson 的答案会起作用，但如果数据很大，它可能会非常慢，因为它读取文件 300 次。

我认为手工放置标签更有效。如果标签是数字，我们可以使用它们来选择颜色。例如，以下行将在第 1 列上绘制第 5 列，其中颜色从第 4 列中选择，并且通过绘制具有恒定值 NaN (1/0) 的假想线来放置标签

```
plot 'thing.txt' u 1:5:4 pt 7 lc variable notitle,\
     for [i=1:300] 1/0 w p pt 7 lc i title 'thing '.i 
```

请注意，默认情况下，gnuplot 颜色是循环的，即每 N 行颜色将重复（通常，N=9）。如果您需要不同的颜色，则需要手动设置 300 个箱子中的每一个。为了自动执行此操作，[SO 中的这个问题](https://stackoverflow.com/questions/29633894/color-repetition-when-using-boxes-in-gnuplot "自动颜色选择")提供了一些好的方法。

# javascript - JavaScript：代码选择 - 怎么了？

> ID：15790032
> 
> 赞同：0
> 
> 时间：2013-04-03T14:22:27.617
> 
> 标签：javascript, syntax-error, selection

```
<!DOCTYPE html>
<html>
<head>
  <title>Select Code</title>
  <meta charset="UTF-8">
  <script type="text/javascript">
    window.onload = function() {
      function selectCode(a) {

        // Get ID of Code Block
        var e = a.parentNode.parentNode.getElementsByTagName('code')[0];

        // Not IE or IE9+
        if (window.getSelection) {
          var s = window.getSelection();
          if (s.setBaseAndExtent) {
            s.setBaseAndExtent(e, 0, e, e.innerText.length - 1);
          }

          // Firefox and Opera
          else {
            if (window.opera && e.innerHTML.substring(e.innerHTML.length - 4) == '<br>') {
              e.innerHTML = e.innerHTML + '&nbsp;';
            }
            var r = document.createRange();
            r.selectNodeContents(e);
            s.removeAllRanges();
            s.addRange(r);
          }
        }

        // Some older browsers
        else if (document.getSelection) {
          var s = document.getSelection();
          var r = document.createRange();
          r.selectNodeContents(e);
          s.removeAllRanges();
          s.addRange(r);
        }

        // IE
        else if (document.selection) {
          var r = document.body.createTextRange();
          r.moveToElementText(e);
          r.select();
        }
      };
    }
  </script>
</head>
<body>
  <a onclick="selectCode(this); return false;" href="#">Select all</a>
  <code>Some Code</code>
</body>
</html> 
```

有人知道出了什么问题吗？它只是行不通。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:37:13.130

我刚刚删除了 window.onload

请参阅此处的工作代码[http://jsfiddle.net/5n4cw/](http://jsfiddle.net/5n4cw/)

```
<a onclick="selectCode(this);" href="#">Select all</a>
<code>Some Code</code>

<script type='text/javascript'>

 function selectCode(a) {

        // Get ID of Code Block
        var e = a.parentNode.parentNode.getElementsByTagName('code')[0];
        // Not IE or IE9+
        if (window.getSelection) {
          var s = window.getSelection();
          if (s.setBaseAndExtent) {
            s.setBaseAndExtent(e, 0, e, e.innerText.length - 1);
          }

          // Firefox and Opera
          else {
            if (window.opera && e.innerHTML.substring(e.innerHTML.length - 4) == '<br>') {
              e.innerHTML = e.innerHTML + '&nbsp;';
            }
            var r = document.createRange();
            r.selectNodeContents(e);
            s.removeAllRanges();
            s.addRange(r);
          }
        }

        // Some older browsers
        else if (document.getSelection) {
          var s = document.getSelection();
          var r = document.createRange();
          r.selectNodeContents(e);
          s.removeAllRanges();
          s.addRange(r);
        }

        // IE
        else if (document.selection) {
          var r = document.body.createTextRange();
          r.moveToElementText(e);
          r.select();
        }
      }

</script> 
```

# perl - Image::Magick::constant 未定义

> ID：15790035
> 
> 赞同：1
> 
> 时间：2013-04-03T14:22:32.697
> 
> 标签：perl, imagemagick, perl-module

有谁知道以下错误的原因：

> Image::Magick::constant 未定义。
> 所需的 ImageMagick 库未安装或未正确安装。

我在网上看到了很多与此相关的帖子，但没有真正的解决方案。
我在安装了 ImageMagick-6.8.4-Q16 的 Windows 7 桌面上使用 ActivePerl 5.16.3 (MSWin32-x86-multi-thread)。
该库似乎可以从包含的“Image-Magick.ppd”文件正确安装，DLL 和支持文件安装在预期的 Perl 模块位置。
编译的 Image::Magick DLL 是否可能与 Perl 的多线程版本不兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:28:42.000

好吧，我真的不知道为什么这会解决问题，但我回滚到 ImageMagick-6.8.3-Q16，更改路径语句以引用旧版本的“ImageMagick-6.8.3-Q16”并重新安装使用 PPM 在 6.8.3 目录中的 Image-Magick PPD，然后再次重新引导系统。

```
C:\Program Files\ImageMagick-6.8.3-Q16\PerlMagick>perl -v

This is perl 5, version 16, subversion 3 (v5.16.3) built for MSWin32-x86-multi-thread
(with 1 registered patch, see perl -V for more detail)

Copyright 1987-2012, Larry Wall

Binary build 1603 [296746] provided by ActiveState http://www.ActiveState.com
Built Mar 13 2013 11:29:21

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.

C:\Program Files\ImageMagick-6.8.3-Q16\PerlMagick>ppm install Image-Magick.ppd
Unpacking Image-Magick-6.82...done
Generating HTML for Image-Magick-6.82...done
Updating files in site area...done
   2 files unchanged
   6 files updated

C:\Program Files\ImageMagick-6.8.3-Q16\PerlMagick> 
```

我的代码现在运行时没有“Image::Magick::constant not defined”错误。我不确定这是否表明我的桌面配置有问题或与 ActivePerl 5.16.3 和 ImageMagick-6.8.4-Q16 冲突，但它解决了我的问题。

# javascript - 使用 Crafty 响应触摸

> ID：15790040
> 
> 赞同：0
> 
> 时间：2013-04-03T14:22:45.193
> 
> 标签：javascript, cordova, craftyjs

我正在尝试使用 Crafty JS 创建一个游戏，我最终想通过 PhoneGap 进行部署。开箱即用，该`.fourway()`方法对我的 Android 设备上的触摸没有响应。是否有内置的触摸支持？是否有我可以用来添加触摸功能的组件，或者我必须手动设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:30:37.243

Crafty 中的触摸事件被[标准化为鼠标事件](http://craftyjs.com/api/Crafty-touchDispatch.html)。`fourway`专门[与键盘事件相关联](http://craftyjs.com/api/Fourway.html)。

使用[moveTo 组件](http://craftycomponents.com/components/single/15/moveto)而不是`fourway`

# php - 检查是否设置了 GET 变量检查值不起作用

> ID：15790041
> 
> 赞同：-5
> 
> 时间：2013-04-03T14:22:49.990
> 
> 标签：php

```
<?php               
if((isset($_GET["r"])) == "en")
{
    echo "<font color='#FF9900'>Right.</font>";
}
else
{
    echo "";
}
?> 
```

当“index.php?r=en”显示正确时。但是当我发送错误的值时，它也会显示相同的结果。像“index.php?r=abc”或“index.php?r”。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:24:40.717

`isset($_GET["r"])`是一个布尔运算符。如果这是真的，您将进行以下比较：

`if(true == "en") ...`

你想要的是：

```
if( !empty($_GET[r]) && $_GET[r] == 'en' ) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:24:58.427

替换这一行：

```
if((isset($_GET["r"])) == "en") 
```

和

```
if((isset($_GET["r"])) && $_GET["r"] == "en") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:24:43.100

```
if( isset($_GET["r"]) &&  $_GET["r"] == "en")
{
    echo "<font color='#FF9900'>Right.</font>";
}
else
{
    echo "";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:25:05.177

```
 if(isset($_GET['r'])){      

     if($get === 'en'){
         echo 'something';}
       else {
         echo 'nothing';}
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:25:18.790

```
<?php
if(true === array_key_exists('r', $_GET) && 'en' == $_GET['r'])
{
    echo "<font color='#FF9900'>Right.</font>";
}
else
{
    echo "";
}
?> 
```

# delphi - 模拟点击 DBGrid

> ID：15790044
> 
> 赞同：1
> 
> 时间：2013-04-03T14:22:54.833
> 
> 标签：delphi, sqlite, delphi-5, zeos

我做了一些搜索，但没有任何效果。

使用 D5、Zeos 和 SQLite。

我有一个经过过滤的 DBGrid 和一个 DataSet (tblBricks)。

在 DBGrid1.OnCellClick 事件中，我有

```
tblBricks.Refresh; 
```

在运行时，我可以将焦点设置到 DBGrid 中的适当行

```
tblBricks.Locate('Color','Red',[loCaseInsensitive]);
frmMain.DBGridCellClick(Columns[0]); 
```

它关注正确的行和列。

问题是我第一次运行这个应用程序时，当 DataSet 打开时，它设置为 Filtered:=True; 但显示尚未显示为已过滤。

如果我单击 DBGrid 中**已经聚焦**的单元格，那么它会突然过滤并正确显示结果。

如何模拟对单元格的单击，以便第一次通过它强制过滤，或者只是强制数据集进行过滤？

不确定这是否是 D5、Zeos、SQLite 或组合的特质。

谢谢

# ssis - SSIS：加入标题和记录

> ID：15790045
> 
> 赞同：0
> 
> 时间：2013-04-03T14:22:59.410
> 
> 标签：ssis

我正在尝试使用 SSIS 将 xml 文件导入 SQL Server 2008R2。文件的结构被冻结并保持原样（简化）：

```
<dailyReport>
  <header>
    <clientId>1234</clientId>
  </header>
  <dataRecord>
    <PosId>567</PosId>
    <recordValue>777</recordValue>
  </dataRecord>
  <dataRecord>
    <PosId>765</PosId>
    <recordValue>221</recordValue>
  </dataRecord>
</dailyReport> 
```

XML Source 从中创建两个输出，一个带有包含标题日期的单个记录，另一个带有单独的数据点。我想加入它们，以便可以将它们导出到单个数据库表中，其中包含 clientId、PosId 和 recordValue 列。问题是 Merge Join 需要一个公共列来执行连接，而我没有（并且 Merge 和 Union All 都执行联合）。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:46:29.863

也许尝试为每个列添加一个派生列，始终使用值 1。然后你就有了要合并的东西。这对你的问题有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:37:41.203

当我必须这样做时，我使用源连接和目标连接（覆盖检查连接的文件）来拉头并将其写入新文件。然后我创建另一个源和目标（**覆盖未选中连接的文件！**）并写入同一个文件。

# hybridauth - HybridAuth Facebook、Twitter 和 Google 失败

> ID：15790049
> 
> 赞同：1
> 
> 时间：2013-04-03T14:23:02.857
> 
> 标签：hybridauth

我能够连接到 HybridAuth 库的社交帐户，并且在将所有文件从一台服务器迁移到另一台服务器时它停止工作。相同的应用程序 ID 在现有服务器中运行良好。

### 我试过的：

*   重置我的 Facebook、Twitter 应用访问令牌
*   创建一个全新的 Facebook、Twitter 应用程序
*   使用 HybridAuth 调试模式进行故障排除

### 错误信息：

> 认证失败。用户已取消身份验证或提供商拒绝连接。

*   原始错误信息：`Authentification failed! Twitter returned an error. 401 Unauthorized.`
*   原始错误信息：`Authentification failed! Facebook returned an error. 401 Unauthorized.`
*   原始错误信息：`Authentication failed! Facebook returned an invalid user id.`

### 痕迹：

```
#0 /home/www/../hybridauth/Hybrid/Auth.php(39): Hybrid_Auth::initialize('/home/www/molid...')
#1 /home/www/../hybridauth/authenticate/social_hub/login.php(22): Hybrid_Auth->__construct('/home/www/molid...')
#2 {main} 
```

[我在这里](https://stackoverflow.com/questions/14594503/hybridauth-twitter-failure-401)找到了一些解决方案，但我无法设置服务器时间，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T08:56:18.820

我有同样的问题，我已经找到了解决方案及其对我的工作。

请根据您的社交媒体文件更改提供程序文件夹中的`https`http 。`api_base_url`

它可能会帮助你。

# c# - Reg 表达式匹配行为，排除值？

> ID：15790053
> 
> 赞同：0
> 
> 时间：2013-04-03T14:23:27.680
> 
> 标签：c#, regex

我有测试字符串

```
var test = "test[2][3][4]"; 
```

我需要从中提取整数 - 2、3、4

我有这样的代码

```
 var regex = new Regex(@"\[(\d)\]", RegexOptions.IgnoreCase | RegexOptions.Singleline);

    var matches = regex.Matches(test); 
```

它返回我这些值

```
matches[0].Groups[0].Value = "[2]"
matches[0].Groups[1].Value = "2 
```

我真的不需要`[2]`，但我不知道要更改什么才能排除它？如果我理解正确，捕获组`(\d)`应该只捕获数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:28:43.743

总是有一个隐含的“第 0 个”捕获组，其中填充了整个表达式匹配的内容。通常你应该忽略它。

如果您*真的*不想取回重复信息（这仅对智力练习有益），您可以将正则表达式转换为：

```
@"(?<=\[)\d(?=\])" 
```

使用正面和负面的lookbehind，您可以断言您的数字被方括号包围，而无需实际捕获它们。这种方式`matches[0]`将是你想要的。不会有`matches[1]`，因为上面的表达式中没有捕获组。

但同样，作为一个实际问题，只需忽略`matches[0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:27:22.460

为什么是正则表达式？=)

你可以这样做：

```
var test = "test[2][3][4]";
var numbers = test.Where(Char.IsDigit)
                  .Select(c => int.Parse(c.ToString()))
                  .ToArray();
//Numbers will now be a array with the integers : 2,3,4
//numers[0] = 2
//numers[1] = 3
//numers[2] = 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:28:32.727

第一个匹配组始终包含整个匹配项，您对此无能为力。

> 如果正则表达式引擎可以找到匹配项，则 Groups 属性返回的 GroupCollection 对象的第一个元素包含与整个正则表达式模式匹配的字符串。（[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)）

正如您在该页面上的示例中看到的那样，您可以从 match[0].Groups[1] 开始以从第一个捕获组开始。

# sql - 如果日期是假日或周末，SQL 替换日期值

> ID：15790054
> 
> 赞同：0
> 
> 时间：2013-04-03T14:23:38.733
> 
> 标签：sql, sql-server, tsql

这是指我之前的帖子：[链接](https://stackoverflow.com/questions/14981866/sql-replace-date-values-if-date-is-saturday-or-sunday)

系统：SQL Server 2012

使用此脚本，如果 CutoffDate 的日期是星期六或星期日，我将采用星期五的值。

```
SELECT DISTINCT dbo.ECB.Currency + '-' + CAST(dbo.myTable.CutoffDate AS varchar(30)) AS ComboCurrDate, dbo.ECB.Rate AS ECBrate
FROM         dbo.ECB INNER JOIN
                      dbo.myTable ON dbo.ECB.Date = CASE WHEN datepart(weekday, dbo.myTable.CutoffDate) IN (6, 7) THEN dateadd(d, - ((datepart(weekday, 
                      dbo.myTable.CutoffDate) + 1 + @@DATEFIRST) % 7), dbo.myTable.CutoffDate) ELSE dbo.myTable.CutoffDate END AND 
                      dbo.ECB.Currency = dbo.myTable.InvoiceCurrency
WHERE     (dbo.myTable.InvoiceCurrency NOT LIKE 'EUR%') 
```

但现在我需要重写它来处理假期。或者更好的是，处理 ECB 表中不存在的记录。

例如：对于 3 月 29 日星期五，ECB 表中没有记录，但 myTable.CutoffDate 设置为此日期。使用上面的脚本，我没有得到这一天的值。

我现在如何将 28 日的 ECB 值分配给 CutoffDate？

一般来说：如果 ECB 表中没有一天的记录，则尝试 ECB 表中的前一个日期，依此类推。

希望我能清楚地解释这一点。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:35:38.663

我认为您应该获取数据中每个截止日期的最新欧洲央行日期。

以下作为相关子查询执行此操作：

```
SELECT DISTINCT ECB.Currency + '-' + CAST(m.CutoffDate AS varchar(30)) AS ComboCurrDate,
                ECB.Rate AS ECBrate
FROM (select m.*,
             (select     top     1     ecb.date
              from ecb
               where ecb.currency = m.InvoiceCurrency and ecb.date <= m.CutoffDate
               order by ecb.date desc
             ) as ECBDateToUse
      from mytable
     ) m left outer join
     ECB 
     ON ECB.Date = m.ECBDateToUse and
        ECB.Currency = m.InvoiceCurrency
WHERE (m.InvoiceCurrency NOT LIKE 'EUR%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:29:20.017

我想你在找什么`LEFT OUTER JOIN`

```
SELECT DISTINCT dbo.ECB.Currency + '-' + CAST(dbo.myTable.CutoffDate AS varchar(30)) AS ComboCurrDate, dbo.ECB.Rate AS ECBrate
FROM mytable LEFT OUTER JOIN ECB ON dbo.ECB.Date = CASE WHEN datepart(weekday, dbo.myTable.CutoffDate) IN (6, 7) THEN dateadd(d, - ((datepart(weekday, 
                  dbo.myTable.CutoffDate) + 1 + @@DATEFIRST) % 7), dbo.myTable.CutoffDate) ELSE dbo.myTable.CutoffDate END AND 
                  dbo.ECB.Currency = dbo.myTable.InvoiceCurrency 
```

这将返回 mytable 中的所有记录，无论 ECB 表中是否有结果。您可以添加过滤器 AND ECB.date IS NULL 以仅提取 ECB 表中不存在的记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:39:27.897

使用外连接，并将所有影响连接外侧的谓词条件放在连接条件中，而不是放在 where 子句中。另外，我可以谦虚地建议您使用表别名和格式来使 sql 更具可读性。如果读者可以更轻松地理解您的查询，您将更快地获得问题的答案。

```
SELECT DISTINCT e.Currency + '-' + 
    CAST(m.CutoffDate AS varchar(30)) ComboCurrDate, 
    e.Rate ECBrate
FROM dbo.ECB e  Left JOIN dbo.myTable m 
     ON e.Currency = m.InvoiceCurrency
          And m.InvoiceCurrency NOT LIKE 'EUR%'
          And e.Date = 
               CASE WHEN datepart(weekday, m.CutoffDate) IN (6, 7) 
                    THEN dateadd(d, - ((datepart(weekday, 
                         m.CutoffDate) + 1 + @@DATEFIRST) % 7), m.CutoffDate) 
                    ELSE m.CutoffDate END 
```

# c# - 在 Visual Studio 2012 中找不到 Dockpanel

> ID：15790055
> 
> 赞同：0
> 
> 时间：2013-04-03T14:23:42.820
> 
> 标签：c#, visual-studio-2012, dockpanel

我安装了 VS2012 并想使用停靠面板创建一个 Silverlight 应用程序。我已经读过“某处”必须单独安装停靠面板组件，但我无法再使用 Google 找到说明。也许来自 stackexchange 社区的人可以帮助并指出我可以找到如何将停靠面板组件添加到 VS2012 的地方。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:16:23.037

下载[Silverlight 4](http://silverlight.codeplex.com/releases/view/43528)工具包。安装它。（是的，这将适用于 Silverlight 5 测试版）

添加对“System.Windows.Controls.Toolkit”的引用。在 Silverlight 5 中，您需要导航到该文件：`%ProgramFiles%\Microsoft SDKs\Silverlight\v4.0\Toolkit\Apr10\Bin\System.Windows.Controls.Toolkit.dll`

将以下属性添加到您的 UserControl：`xmlns:tk="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"`

```
<UserControl x:Class="Project1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tk="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <tk:DockPanel>

        </tk:DockPanel>
    </Grid>

</UserControl> 
```

来源：[missing-dockpanel-add-dockpanel-for-silverlight-4-or-silverlight-5](http://procbits.com/2011/07/19/missing-dockpanel-add-dockpanel-for-silverlight-4-or-silverlight-5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:06:41.780

与此同时，我找到了受此链接启发的答案[http://procbits.com/2011/07/19/missing-dockpanel-add-dockpanel-for-silverlight-4-or-silverlight-5](http://procbits.com/2011/07/19/missing-dockpanel-add-dockpanel-for-silverlight-4-or-silverlight-5)。您必须安装可以从这里下载的 Silverlight Toolkit 5：http: [//silverlight.codeplex.com/releases/view/78435](http://silverlight.codeplex.com/releases/view/78435)

# apache - plesk 上的子域：找不到页面

> ID：15790056
> 
> 赞同：0
> 
> 时间：2013-04-03T14:23:45.600
> 
> 标签：apache, apache2, subdomain, plesk

我在 plesk 面板上创建子域时遇到问题。所以我正确地创建了它，我还检查了“文件管理器”，我发现我的子域名称的文件夹也创建了......

我检查了“DNS 设置”，发现也使用地址 IP 创建了子域的 DNS。

但是当我在浏览器上预览链接时，出现此错误：

```
Can not find server example.domain.com because DNS resolution failed... 
```

我等了两天激活，但没有任何改变！

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:28:05.050

谁为您的“domain.com”维护 DNS？

如果您的“domain.com”的 DNS 记录由某个第 3 方域注册商维护，请检查注册商面板中 DNS 区域中存在的记录 example.domain.com。

如果您的“domain.com”的 DNS 记录由 Plesk 服务器维护，请通过以下命令检查 Plesk DNS：

```
nslookup example.domain.com domain.com 
```

如果您不知道您的 DNS 区域维护者是谁，请运行以下命令：

```
dig -t NS domain.com 
```

# java - 从循环中删除新的 JTable()

> ID：15790057
> 
> 赞同：0
> 
> 时间：2013-04-03T14:23:46.260
> 
> 标签：java, swing, jtable, jframe

我创建了一个 java 方法，它从文本文件中提取信息，然后将其添加到 JTable。但是，我想从循环中删除 JTable，因为它循环了一个新表三次。我在执行此操作时遇到问题。

我想从循环中删除的代码显示为：

```
 JTable table = new JTable(myVector,columnNames) {{
            setOpaque(false);
            setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {{
            setOpaque(true);
            }});
        }};
            JScrollPane scrollPane = new JScrollPane(table);
            frame.add(new JScrollPane(table) {{
               setOpaque(false);
               getViewport().setOpaque(false);
            }
            @Override
            protected void paintComponent(Graphics g) {
                g.drawImage(image, 0, 0, this);
                super.paintComponent(g);
            }

        }); 
```

这是完整的java方法：

```
 Vector<Vector<String>> myVector = new Vector<Vector<String>>();
    FileReader fReader = new FileReader("playerscores.txt");
    BufferedReader inFile = new BufferedReader(fReader);
    String input;
    String[] temp;
    while((input=inFile.readLine())!=null) {
        Vector<String> v = new Vector<String>();
        temp = input.split(",",6);
        for(int i=0;i<temp.length;i++){
            v.add(temp[i]);
            System.out.println(temp[i]+" added");
        }
        System.out.println("V is "+v);
        myVector.add(v);
        System.out.println("End of Line");
        Vector<String> columnNames = new Vector<String>();
            columnNames.addElement("Player Name:");
        columnNames.addElement("Score:");
        JTable table = new JTable(myVector,columnNames) {{
        setOpaque(false);
        setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {{
        setOpaque(true);
        }});
    }};
        JScrollPane scrollPane = new JScrollPane(table);
        frame.add(new JScrollPane(table) {{
           setOpaque(false);
           getViewport().setOpaque(false);
        }
        @Override
        protected void paintComponent(Graphics g) {
            g.drawImage(image, 0, 0, this);
            super.paintComponent(g);
        }

    });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:31:59.647

使用 DataModel 将文件中的数据存储到其中。将此模型附加到桌子上

# php - 获取搜索词，在数据库中检查它，返回匹配词 MySQL php

> ID：15790058
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:23:49.143
> 
> 标签：php, mysql, sql

这似乎是一个简单的错误，但我完全被卡住了。这是代码：

```
 if (!empty ($_POST['searchbird'])){
        $searchbird=rawurlencode(trim($_POST['searchbird']));
        $result = mysql_query("SELECT `sciname` FROM `wp_birds` WHERE $searchbird = `comname`");
    if (!$result) {
        echo 'Could not run query: ' . mysql_error();
        exit;
    }
    $searchterm = mysql_fetch_row($result); 
```

SQL 数据库设置 Col 4 是 comname，col 5 是 sciname

这是错误无法运行查询：'where 子句'中的未知列'this is the searchterm'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:27:28.267

这是您当前的查询，

```
SELECT `sciname` FROM `wp_birds` WHERE $searchbird = `comname` 
```

如果 comName 的数据类型是字符串，则该值应该用单引号括起来，因为它们是文字。

```
SELECT `sciname` FROM `wp_birds` WHERE  `comname` = '$searchbird' 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:30:56.390

首先，**您将自己暴露在[SQL 注入](http://www.programmerinterview.com/index.php/database-sql/sql-injection-example/)**中。在做任何其他事情之前，您需要了解这一点。[PDO 库](http://php.net/manual/en/book.pdo.php)使它变得非常简单和安全。

关于您的问题，最终查询如下：

> SELECT `sciname`FROM `wp_birds`WHERE this is the searchterm = 'comname'

您正在寻找的是以下内容（注意引号）：

> SELECT `sciname`FROM `wp_birds`WHERE comname = '这是搜索词'

**但是你不应该那样做**，因为你仍然暴露在 SQL 注入中。

# java - 在 Java 中，从 CSV 读取具有命名行和命名列的矩阵

> ID：15790059
> 
> 赞同：0
> 
> 时间：2013-04-03T14:23:50.493
> 
> 标签：java, matrix

我有一个 CSV 文件，其中包含一组对象之间的相关系数矩阵（在下面的示例中，它是四个对象 u101、u102、u103、u104）。这些文件使用对象名称作为行名和列名，如下所示：

```
 u101,   u102,   u103,   u104
u101,   1.0,    0.2,    0.1,    0.4
u102,   0.2,    1.0,    0.5,    0.8
u103,   0.1,    0.5,    1.0,    0.9
u104,   0.4,    0.8,    0.9,    1.0 
```

我现在需要做的是：将 CSV 文件读入 Java 中的某种矩阵格式，以便我可以按名称访问相关系数。基本上，我需要实现一个功能：

```
double getValue(String arg0, String arg1) {
    […]
} 
```

调用时

```
getValue("u101", "u104") 
```

然后该函数应返回 0.4。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:32:01.107

您将需要 2 个地图和一个二维数组（或数组列表）。

*   第一个地图应该包含 col 名称作为键和 col 位置作为值，即 ('u101', 0), ('u102', 1) 等
*   第二个地图应包含行名称作为键和行位置作为值
*   二维数组应该有数据，即数字本身

所以当你接到你的方法的电话时，你确实喜欢

```
return myArray[rowmap.get('rowname')][colmap.get('colname')]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:30:31.517

从文件中[读取双精度值：从文件中读取双精度值](https://stackoverflow.com/questions/1855753/reading-double-values-from-a-file)

然后将您读取的值存储在双精度的 HashMap 中。使用行名和列名构造哈希映射键。要访问 u102 处的元素，u103 执行以下操作：

```
hashmap.put("u102-u103", 0.5);
x = hashmap.get("u102-u103"); 
```

# c# - 根据选定的 ComboBox 使用 WPF Chart ToolKit 创建图表

> ID：15790062
> 
> 赞同：1
> 
> 时间：2013-04-03T14:24:09.080
> 
> 标签：c#, wpf, charts, combobox

我有一个包含不同项目的组合框。根据此组合框的值，我希望在图表中显示该项目上已注册的不同时间。

我创建的图表的代码：

```
 <chartingToolkit:Chart Height="262" HorizontalAlignment="Left" 
                    Margin="33,0,0,620" Name="columnChart"
                    VerticalAlignment="Bottom" Width="360" BorderBrush="AntiqueWhite" BorderThickness="1">
                    <chartingToolkit:ColumnSeries 
                        DependentValuePath="Value" 
                        IndependentValuePath="Key" 
                        ItemsSource="{Binding}"/>
                </chartingToolkit:Chart> 
```

“应该”填充将创建图表的列表的代码：

```
private void showColumnChart()
    {
        List<KeyValuePair<string, int>> valueList = new List<KeyValuePair<string,int();
        List<ProsjektTime> timeListe = new List<ProsjektTime>();

        foreach (ProsjektTime p in Master.getDC().ProsjektTimes)
        {
            if (p.ProsjektID_FK == prosjekt.ProsjektID)
            {
                timeListe.Add(p);
            }
        }

        foreach(ProsjektTime p in timeListe)
        {
            valueList.Add(new KeyValuePair<string,int(p.TimeTyper.Type,p.AntallTimer));
        }

        try
        {
            columnChart.DataContext = valueList; 
        }
        catch (InvalidOperationException e) { MessageBox.Show(e+""); }
    } 
```

不幸的是，我收到错误消息“目前无法修改此节点的逻辑子节点，因为树行走”。

然而，我发现了一些有趣的事情。如果我将 ComboBox 的 selectedIndex 设置为注册了几个小时的项目（并非所有项目都注册了小时），那么一切正常。有小时数的项目会显示在图表中，而没有注册任何小时数的项目也会显示为空图表。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:13:22.333

找到了答案。由于拥有一个 dataSourceList 和一个 chartingToolkit:ColumnSeries，我创建了两个列表和两个 chartingToolkit:ColumnSeries。继承人的代码：

```
 private void prosjektTimeGraf()
    {
        int estimerteTimer = 0;
        int registrerteTimer = 0;

        List<KeyValuePair<string, int>> estimerListe = new List<KeyValuePair<string, int>>();
        List<KeyValuePair<string, int>> registrertListe = new List<KeyValuePair<string, int>>();

        foreach (ProsjektTime p in Master.getDC().ProsjektTimes)
        {
            if (p.ProsjektID_FK == prosjekt.ProsjektID)
            {
                estimerteTimer += p.AntallTimer;
                estimerListe.Add(new KeyValuePair<string, int>(p.TimeTyper.Type, p.AntallTimer));
            }
        }

        foreach (ProsjektTimeBruker ptb in Master.getDC().ProsjektTimeBrukers)
        {
            if (ptb.ProsjektID_FK == prosjekt.ProsjektID)
            {
                registrerteTimer += (int)ptb.AntallTimer;
                registrertListe.Add(new KeyValuePair<string, int>(ptb.TimeTyper.Type, (int)ptb.AntallTimer));
            }
        }

        estimerListe.Insert(0, new KeyValuePair<string, int>("Totalt", estimerteTimer));
        registrertListe.Insert(0, new KeyValuePair<string, int>("Totalt", registrerteTimer));

        try
        {
            espTimer.DataContext = estimerListe;
            regpTimer.DataContext = registrertListe;
        }
        catch (InvalidOperationException e) { MessageBox.Show(e+""); }
    } 
```

# ios - 仅在 iPhone 5 上找不到此可执行文件的有效配置文件

> ID：15790067
> 
> 赞同：20
> 
> 时间：2013-04-03T14:24:23.180
> 
> 标签：ios, xcode

我尝试在我的设备上使用 XCode 调试我的应用程序，它适用于除 iPhone 5 之外的所有手机，然后我收到以下消息：

> “找不到此可执行文件的有效配置文件”

当我尝试与组织者续订证书时，Xcode 崩溃。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-27T15:38:14.233

我遇到了同样的问题，并按照... Apple 的指导解决了它 :)

[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933)

要确保 Xcode 项目 Bundle Identifier 与与您的 Provisioning Profiles 关联的 App ID 兼容，请执行以下步骤。

*   选择 Xcode“视图”菜单 > 导航器 > 项目。
*   在左上角选择您的根项目文件夹。
    *   （项目编辑器将出现在中心窗格中。）
*   在“目标”部分单击您的目标
*   单击“构建设置”选项卡。
*   向下滚动到“代码签名身份”部分。
*   如果您正在构建您的开发设备，请单击“任何 iOS SDK”右侧的“调试”下的“值”列。
*   在供应配置文件选择弹出窗口中，检查当前选择是否显示“For Application Identifiers:”以及预期的 App ID。
*   如果您正在构建分发二进制文件，请单击“任何 iOS SDK”右侧的“发布”下的值列。
*   在供应配置文件选择弹出窗口中，检查当前选择是否显示“For Application Identifiers:”以及预期的 App ID。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-13T09:25:18.503

我有同样的问题，因为我的设备 UDID 以“FFFFFFFF”开头。这个 UDID 是错误的。

现在我从 Xcode 中获取了 UDID。

1.  将您的设备连接到 mac

2.  Xcode --> Window --> Devices --> 点击你的设备 --> Identifier(UDID)

![在此处输入图像描述](https://i.stack.imgur.com/7gexP.png)

在我的苹果开发者帐户中添加了这个 UDID 并重新生成了配置文件。

现在它工作正常

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-17T03:36:22.957

以下为我工作：

*   从项目导航器窗口中单击项目名称。
*   从 Target 部分中，选择项目的目标名称。
*   单击“构建设置”。
*   转到“代码签名”部分并为“配置文件”设置选择“iOS 团队配置文件：通配符 AppID”，或者您可以选择特定于应用程序的配置文件名称。

注意：我在构建分发时已将其更改为应用程序的分发配置文件，但在恢复项目工作时没有将其更改回来。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-27T16:01:58.007

我遇到了同样的问题，发现我的解决方案是检查设备上的日期。如果设备上的日期是将来的日期，并且在您的配置文件过期的日期之后，则会出现此错误消息。将日期更改回当前日期或配置文件过期之前的日期后，您的应用程序应该会成功加载到您的设备上。

在此之前，请务必先考虑其他解决方案。这对我来说是一个独特的情况，因为我正在测试一个需要更改设备日期的应用程序，并且无法理解为什么该应用程序在加载时会加载，而另一刻却没有加载。

一切顺利。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-21T14:24:57.167

除了所有这些很好的答案之外，还要确保您构建方案的运行部分设置为“调试”而不是“发布”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-28T17:24:06.413

对我来说，这是因为我的配置文件功能与 xcode 不匹配。在团队名称下方的身份部分下，您的目标的常规选项卡上有一条警告。它有一个选项来解决发布新配置文件的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-30T03:12:56.097

对我来说，问题很简单，因为这是新的一年，Apple 要求我重新注册我的 iPhone。整个 iOS 开发的代码签名业务比它需要的要困难得多。Android的方法要容易得多。

# php - 简单的 html dom 搜索特定链接

> ID：15790070
> 
> 赞同：0
> 
> 时间：2013-04-03T14:24:27.150
> 
> 标签：php, simple-html-dom

使用简单的 html dom 解析器来获取网页上的一些信息链接。

```
a href="http://mysite.com/_/id/5797/name"  John Doe 
```

这很好用

```
$id=5797;
$html = file_get_html("$url");
$echo $html->find("a[href*=$id]",0)->plaintext." <br><hr>"; 
```

但是如果我将 id 设置为

```
$id=797; 
```

它还发现 John Doe

所以我尝试了这个；

```
$id=5797;
$html = file_get_html("$url");
$echo $html->find("a[href*=id/$id/]",0)->plaintext." <br><hr>"; 
```

但这不会返回任何匹配项。猜测的东西不喜欢斜线。这可能与简单的html dom有关还是我需要遍历每个链接并在php中进行检查？

谢谢

# svn - TFS 2012 中的 SVN 标记等效项

> ID：15790073
> 
> 赞同：9
> 
> 时间：2013-04-03T14:24:33.253
> 
> 标签：svn, tags, checkpoint

我最近迁移到**TFS 2012**并且我已经使用**SVN**很长时间了。

在 SVN 中，我使用“*标签*”来标记一些重要的开发“*检查点*”，即当我完成一个软件版本（alpha、beta）时，我为该版本创建了一个*标签。*如果发生一些错误，我会受到“*保护*”。

现在，我需要在**TFS**源代码控制中使用相同的行为（或等效行为），但我对它的结构感到困惑。

我如何在**TFS中使用“***标记*” ？

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T15:00:30.120

在 Team Foundation Server 中，[标签](http://msdn.microsoft.com/en-us/library/gg475879%28v=vs.100%29.aspx)类似于其他版本控制系统中的标签；标签包含特定版本的文件。

当我们发布一些产品时，我们将整个团队项目快照为一个标签——也就是说，我们创建一些标签`11_Release`来指向我们的 11.0.0 版本，它将包含`$/TEE`（我们的团队项目）版本为最新的。然后我们解冻分支并允许签入继续进行。

当然，具体如何工作将取决于您的流程。您不一定需要将最新版本应用于该标签，事实上，它可能是其他一些变更集甚至日期版本规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:19:24.763

我对 TFS 很陌生，但据我所知，“标签”确实是等价的。您必须记住，尽管它们与标签不同。标签实际上只是 TFS 中文件快照的名称。

SVN 中的标签没有单独的分支。换句话说，如果您在 SVN 中有一个标签“v 1.0”，那么您仍然可以签入对它的更改，以防您需要进行小修复或添加。在 TFS 中，这对于标签是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T01:55:07.653

正如 Ron 提到的，TFS 标签也与标签非常相似，它不会像在 SVN 中那样创建单独的分支。

但 Ron 曾提到你不能对那个标签添加小改动，实际上你可以。如果您想对该标签的文件进行更改，则可以签入该更改，然后您可以编辑先前创建的标签以包含该新签入版本。

只需您稍后也可以编辑捆绑到标签中的文件版本。**

# java - FTPClient.listFiles 不工作

> ID：15790074
> 
> 赞同：7
> 
> 时间：2013-04-03T14:24:35.653
> 
> 标签：java, ftp, apache-commons, ftp-client, ftplib

我正在尝试列出 ftp 服务器中特定目录下的所有文件。

```
FTPFile[] subFiles = ftpClient.listFiles("directory"); 
```

虽然目录是有效的，但是调用 listFiles 时代码卡住了，可能是什么原因。? 此外，我想提一下，访问同一 FTP 服务器的单独 netbeans 项目使用相同的代码可以正常工作，但是 maven 项目存在问题。请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T14:56:39.967

尝试使用[`passive mode`](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#enterLocalPassiveMode%28%29). 我假设您使用的是最新的[公共网络](http://commons.apache.org/proper/commons-net/)库（您没有编写您正在使用的库）。

* * *

下一个方法，尝试更改文件列表布局。公共库使用自动检测，但在某些情况下这不起作用。您可以更改（和测试）另一个文件列表布局，如下所示：

```
FTPClientConfig configuration = new FTPClientConfig(FTPClientConfig.TEST_YOURSELF);

FTPClient yourClient = FTPClient(...);
client.configure(conf); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-12T23:56:54.807

要添加到上述答案，应在 connect() 和 login() 之前调用 enterLocalPassiveMode() 方法。任何其他方式我都无法让我的工作。此测试基于此处指定的另一个答案：[https ://stackoverflow.com/a/5183296/11971304](https://stackoverflow.com/a/5183296/11971304)

```
 client.connect(host, port);
            client.enterLocalPassiveMode();
            if (!client.login(username, password)) {
                throw new LoginException("wrong credentials");
            } 
```

# r - 将行条目与 R 中的列名匹配

> ID：15790079
> 
> 赞同：0
> 
> 时间：2013-04-03T14:24:48.043
> 
> 标签：r

我是 R 新手，正在尝试将几个数据集合并为一个。我的数据结构如下：

`opt <- data.frame( name=c("opt1", "opt2","opt3"), week=c(1,1,1,2,2,3), price=c(0))`

`price <- data.frame( week=c(1,2,3), opt1=c(3, 4,3.15), opt2=c(4.2, 3.5, 5), opt3=c(3,2,6))`

`opt$name`如果行中的条目与“data.frame price”中的列名匹配，我现在想提取“data.frame price”中的数字，并且`opt$week==price$week`。

下一步是将选定的数字添加到`opt$price`列中。要创建一个如下所示的新 data.frame：

`optcomp <- data.frame( name=c("opt1", "opt2","opt3"), week=c(1,1,1,2,2,3), price=c(3.00,4.2,3,4.00,3.5,6))`

我试图构建一些循环，但我的 R 技能有限。

任何帮助将不胜感激！

唐纳德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:35:52.900

初始合并，以匹配`week`列：

```
x <- merge(opt,price)

x
##   week name price opt1 opt2 opt3
## 1    1 opt1     0 3.00  4.2    3
## 2    1 opt2     0 3.00  4.2    3
## 3    1 opt3     0 3.00  4.2    3
## 4    2 opt1     0 4.00  3.5    2
## 5    2 opt2     0 4.00  3.5    2
## 6    3 opt3     0 3.15  5.0    6 
```

您想要的值：

```
sapply(seq(nrow(x)), function(i) x[i,as.character(x$name[i])])
[1] 3.0 4.2 3.0 4.0 3.5 6.0 
```

`x`指定as的行名称`character`允许按名称进行矩阵索引（并返回`character`）

```
rownames(x) <- as.character(rownames(x))
x.ind <- matrix(c(rownames(x), as.character(x$name)),,2)
x[x.ind]
## [1] "3.00" "4.2"  "3"    "4.00" "3.5"  "6" 
```

# c - 文件输出有两个换行符而不是一个

> ID：15790080
> 
> 赞同：0
> 
> 时间：2013-04-03T14:24:52.567
> 
> 标签：c, file-io

这是我的代码：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
int main()
{ 
    FILE *p;char c[79];
    clrscr();
    p = fopen("file1.dat","w");
    printf("\nenter lines and enter end1 to end ");
    scanf("%s",c);
    if (strcmp(c,"end1") != 0)
       do
       {  
           fputc('\n',p);
           fputs(c,p);
           gets(c);
       } while(strcmp(c,"end1")!=0);

    fclose(p);
    p = fopen("file1.dat","r");
    printf("lines in file:\n");
    while(!feof(p))
    {
        fgets(c,80,p);
        printf("%s\n",c);
    }
    fclose(p);
    return 0;
    getch();
} 
```

我的问题是当我输入（并写入文件）时

```
hello
my name is abc 
```

然后键入 end1 终止，当文件内容被读取和打印时，我得到的输出为

```
hello

my name is abc 
```

为什么打印两个换行符而不是 1 个以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:28:30.253

当您第一次调用`scanf`换行符时，您键入的内容会被抛在后面。然后，您将显式换行符放入文件中，并调用`gets`(this is **bad** )，它会拾取第一个换行符，然后再次循环以打印另一个换行符。所以你得到两个。

如果您`getchar()`在 之后立即调用`scanf`，它将删除多余的换行符（只要您只键入一个单词然后回车）。例如

```
scanf("%s",c);
getchar();             // discard newline
if (strcmp(c,"end1") != 0)
   do
   {  
       fputc('\n',p);  // you probably want to switch these two lines
       fputs(c,p);     //
       gets(c);
   } while(strcmp(c,"end1")!=0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:34:09.047

请注意以下关于 fgets()....

> fgets() 从流中最多读入一个小于 size 的字符，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。'\0' 存储在缓冲区中的最后一个字符之后。

鉴于您正在使用 fgets() 读取文件，然后使用 printf("%s\n", ... ) 打印文件，您将输出两个换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:29:37.780

字符串 sscanf'd 包含换行符，因为这是您输入的内容！

`c[strlen(c)] = '\0'`是一个粗略的修复，用额外的 null 替换最后的换行符

# c# - XNA - 保持更长时间跳得更高（附示例）

> ID：15790084
> 
> 赞同：-3
> 
> 时间：2013-04-03T14:25:02.320
> 
> 标签：c#, xna

我最近问了一个问题，但还是不明白，我的意思是答案很好，但我就是不明白。我试图让玩家跳得越高，空格键保持的时间越长。高度也需要有一个最大值。

我有一个播放器类示例，我正在尝试向其中添加这样的功能。如果有人可以看看这个类，添加功能，然后添加一些评论来帮助我，我将非常感激。- 谢谢。

播放器.cs

```
namespace Jumping 
```

{

```
class Player
{
    public Texture2D Texture;

    public Vector2 Velocity;
    public Vector2 Position;
    public float ground;
    private float Speed;

    private Rectangle screenBound;

    public bool isJumping; //are we jumping or not
    public bool goingUp; //if going up or not

    public float u; //initial velocity
    private float jumpU;
    private float g; //gravity
    public float t; //time

    private KeyboardState prevKB;

    public Player(Texture2D Texture, Vector2 Position, float Speed, Rectangle screenBound)
    {
        this.Texture = Texture;
        this.Position = Position;
        ground = Position.Y;
        this.Speed = Speed;
        this.screenBound = screenBound;
        Velocity = Vector2.Zero;
        isJumping = goingUp = false;
        jumpU = 2.5f;
        g = -9.8f;
        t = 0;
    }

    public void Update(GameTime gameTime)
    {

        Position.X += (Velocity.X * Speed);
        //Set the Y position to be subtracted so that the upward movement would be done by decreasing the Y value
        Position.Y -= (Velocity.Y * Speed);

        goingUp = (Velocity.Y > 0);

        // TODO: Add your update logic here
        if (isJumping == true)
        {
            //motion equation using velocity: v = u + at
            Velocity.Y = (float)(u + (g * t));
            //Increase the timer
            t += (float)gameTime.ElapsedGameTime.TotalSeconds;
        }
        if (isJumping == true && Position.Y > screenBound.Height - Texture.Height)
        {
            Position.Y = ground = screenBound.Height - Texture.Height;
            Velocity.Y = 0;
            isJumping = false;
            t = 0;
        }

        if (Position.X < 0)
        {
            //if Texture touches left side of the screen, set the position to zero and the velocity to zero.
            Position.X = 0;
            Velocity.X = 0;
        }
        else if (Position.X    + Texture.Width > screenBound.Width)
        {
            //if Texture touches left side of the screen, set the position to zero and the velocity to zero.
            Position.X = screenBound.Width - Texture.Width;
            Velocity.X = 0;
        }
        if (Position.Y < 0)
        {
            //if the Texture touches the top of the screen, reset the timer and set the initial velocity to zero.
            Position.Y = 0;
            t = 0;
            u = 0;
        }
    }

    public void Input(KeyboardState keyState)
    {
        if (keyState.IsKeyDown(Keys.Space) && (isJumping == false || Position.Y == ground))
        {
            isJumping = true;
            u = jumpU;
        }
        if (keyState.IsKeyDown(Keys.Left) && !keyState.IsKeyDown(Keys.Right))
        {
            if (keyState.IsKeyDown(Keys.A))
            {
                if (Velocity.X > -2.0f)
                Velocity.X -= (1.0f / 10);
            }
            else if (Velocity.X > -1.0f)
            {
                Velocity.X -= (1.0f / 10);
            }
            else
            {
                Velocity.X = -1.0f;
            }
        }
        else if (!keyState.IsKeyDown(Keys.Left) && keyState.IsKeyDown(Keys.Right))
        {
            if (keyState.IsKeyDown(Keys.A))
            {
                if (Velocity.X < 2.0f)
                Velocity.X += (1.0f / 10);
            }
            else if (Velocity.X < 1.0f)
            {
                Velocity.X += (1.0f / 10);
            }
            else
            {
                Velocity.X = 1.0f;
            }
        }
        else
        {
            if (Velocity.X > 0.05 || Velocity.X < -0.05)
                Velocity.X *= 0.90f;
            else
                Velocity.X = 0;
        }

        prevKB = keyState;
    }

    public void Fall()
    {
        t = 0;
        u = 0;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(Texture, new Rectangle((int)Position.X, (int)Position.Y, Texture.Width, Texture.Height), Color.White);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:41:55.203

为了帮助您并且不使您感到困惑，我将提出一种方法，但以后必须对其进行重构。

在您的输入法中，添加它：

```
public void Input(KeyboardState keyState)
{
   newIsJumping = keyState.IsKeyDown(Keys.Space);

   ... 
```

在您的 Update 方法中，使用它：

```
// TODO: Add your update logic here
if (isJumping == true)
{
   if (newIsJumping) u += 0.5f; // use some constant here

   ... 
```

我希望它能解决你的问题。

# xml - 按某些属性对 XML 元素进行排序

> ID：15790089
> 
> 赞同：0
> 
> 时间：2013-04-03T14:25:13.937
> 
> 标签：xml, sorting, xslt

我需要对如下所示的 XML 文档进行排序：

```
<root xmlns="http://my.name.space.com">
    <product id="id001">
        <datafield name="Name" value="value 1"/>
        <datafield name="Description" value="descriptive text"/>
        <dataAttribute id="id002">
            <datafield name="Name" value="ZZZZZ"/>
            <datafield name="Start Date" value="16/01/2010 00:00:00"/>
            <datafield name="End Date" value=""/>
            <datafield name="Status" value="Active"/>
        </dataAttribute>
        <dataAttribute id="id003">
            <datafield name="Name" value="XXXXX"/>
            <datafield name="Start Date" value="16/01/2010 00:00:00"/>
            <datafield name="End Date" value=""/>
            <datafield name="Status" value="Active"/>
        </dataAttribute>
        <dataAttribute id="id004">
            <datafield name="Name" value="YYYYY"/>
            <datafield name="Start Date" value="16/01/2010 00:00:00"/>
            <datafield name="End Date" value=""/>
            <datafield name="Status" value="Active"/>
        </dataAttribute>
    </product>
</root> 
```

dataAttribute 元素应该按照 @name Attribute = "Name" 的元素进行排序，但排序应该按照该元素的 @value 属性进行。

你对此有什么提示吗？

非常感谢你！

弗里茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:41:33.807

`xsl:sort`与适当的`select`属性一起使用：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  xmlns:df="http://my.name.space.com"
  exclude-result-prefixes="df">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="df:product">
  <xsl:copy>
    <xsl:apply-templates select="@* | *[not(self::df:dataAttribute)]"/>
    <xsl:apply-templates select="df:dataAttribute">
      <xsl:sort select="df:dataField[@name = 'Name']/@value"/>
    </xsl:apply-templates>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# video - 检测浏览器是否支持 canplaythrough

> ID：15790097
> 
> 赞同：1
> 
> 时间：2013-04-03T14:25:30.640
> 
> 标签：video, detect

我现在有一个问题，当我将播放方法包装在“canplaythrough”事件的 eventListener 中时，某些浏览器似乎没有播放视频。

我的代码是

```
document.getElementById('introVideo').addEventListener("canplaythrough", playVideo, false);

function playVideo(){
    document.getElementById('introVideo').play();
    document.getElementById('introVideo').removeEventListener("canplaythrough", playVideo, false);
} 
```

但是由于某种原因，Firefox 偶尔不播放视频，而其他浏览器“有时”也不播放，它只是坐在第一帧。

# android - 用于数据库构造函数的 Android getBaseContext()

> ID：15790098
> 
> 赞同：0
> 
> 时间：2013-04-03T14:25:31.197
> 
> 标签：android

我有 2 个单独的类供我的 android 应用程序将数据插入到 sqllite 数据库

1.  带有此构造函数的 DataBaseAdapterClass

    ```
    public DatabaseAdapter(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    } 
    ```

2.  我正在使用另一个名为 webservise 的类从 Web 服务获取数据并插入到 sqllite 数据库中，因为我使用了这个 Asyntask 类。

    ```
    public class FoodCityWebService {

        String myValue = "";
        private final String NAMESPACE="http://tempuri.org/";
        private final String URL = "xxxxxx:xxxx/Service1.asmx?WSDL";

        public FoodCityWebService(){

        }

        public FoodCityWebService(String param1){

        }

        public String getValueFromService()
        {
            myValue =  new web().execute("df").toString();
            return myValue;
        }

        public class web extends AsyncTask<String,Integer, String>
        { 
              String result = "";
              final String SOAP_ACTION="http://tempuri.org/GetUserName";
            @Override
            protected String doInBackground(String... params) {

                final String METHOD_NAME="GetUserName";

                SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
                request.addProperty("name","Bread");
                SoapSerializationEnvelope envelop=new SoapSerializationEnvelope(SoapEnvelope.VER11);//ver11 version
                envelop.dotNet=true;//only for dotnet       
                envelop.setOutputSoapObject(request);

                 HttpTransportSE httptransportse=new HttpTransportSE(URL);
                 String x ="";
                try{
                httptransportse.call(SOAP_ACTION, envelop);

                SoapPrimitive response=(SoapPrimitive)envelop.getResponse();

                    x = response.toString();

                    DatabaseAdapter da = new DatabaseAdapter(); // *ERROR!!!*           
                    da.addItem(new Item("CityItem1","Bread",Double.parseDouble(x),"222"));

                }catch (Exception e) {

                    e.printStackTrace();

                }

                return x;

            }

            } 

     } 
    ```

如何从 databseAdapter 类创建对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:31:55.010

> 如何从 databseAdapter 类创建对象？

一种基本方法是将 Context 添加到构造函数的参数中并将其保存为成员变量：

```
private Context mContext;
public FoodCityWebService(Context context){
    mContext = context;
} 
```

然后使用：

```
DatabaseAdapter da = new DatabaseAdapter(mContext); 
```

# jquery - IE Scoll set Fix css px

> ID：15790101
> 
> 赞同：0
> 
> 时间：2013-04-03T14:25:36.080
> 
> 标签：jquery, internet-explorer, scroll, position, absolute

我尝试在另一个元素中滚动的 DIV 始终位于顶部边缘。不**固定**到窗口但父绝对div

我的问题是 Internet Explorer 在滚动时出现抖动。Firefox 工作，但 IE 生涩。

有谁知道我如何以不同的方式对其进行编程？

```
$window.scroll(function(e){
    if ($window.scrollTop() > pos) {
        $this.css({
            position: 'absolute',
            top: pos
        });
    } else {
        $this.css({
            position: 'absolute',
            top: $(this).scrollTop() + 'px'
        });
    }
}); 
```

[http://jsfiddle.net/eER6t](http://jsfiddle.net/eER6t)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:41:39.000

你需要做这样的事情：http: [//jsfiddle.net/eER6t/2/](http://jsfiddle.net/eER6t/2/)

```
<div id="f">
    I'm going to follow you only so far...
</div>
<div>
your content .... .

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:39:21.547

使用位置固定：

```
$window.scroll(function(e){
    if ($window.scrollTop() > pos) {
        $this.css({
            position: 'absolute',
            top: pos
        });
    } else {
        $this.css({
            position: 'fixed',
            top: '0px'
        });
    }
}); 
```

[http://jsfiddle.net/jHWv3/](http://jsfiddle.net/jHWv3/)

# hibernate - 将休眠会话（不是 EntityManager）注入 DAO（使用 JEE6）

> ID：15790103
> 
> 赞同：1
> 
> 时间：2013-04-03T14:25:40.580
> 
> 标签：hibernate, jboss7.x, java-ee-6, cdi, ejb-3.1

我正在尝试将休眠会话注入 DAO。DAO 被注入到带有 CDI 的 EJB 3.1 无状态 Bean 中。

**我不想使用 EntityManager。我更喜欢 Hibernate Session 直接。** 但是使用 EJB，应用程序服务器（JBoss 7）尝试注入 EntityManager，而不是休眠会话。

在创建 DAO 时出现以下错误：

`Caused by: java.lang.IllegalArgumentException: Can not set org.hibernate.Session field com.mycompany.persistence.dao.RoleDAO.session to org.jboss.as.jpa.container.TransactionScopedEntityManager`

我的代码：

**持久性.xml**

```
<persistence>
    <persistence-unit name="MyPU">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/MyDS</jta-data-source>

        <class>com.mycompany.entity.MyEntity</class>
        <class>com.mycompany.entity.OtherEntity</class>

        <properties>
            <property name="hibernate.show_sql" value="false" />
        </properties>

    </persistence-unit>
</persistence> 
```

**RoleBean.java** (EJB)

```
@Stateless
@Remote(RoleRemote.class)
public class RoleBean implements RoleRemote {
    @Inject
    private RoleDAO roleDAO;

} 
```

**角色DAO.java**

```
@Named
public class RoleDAO {

    @PersistenceUnit(unitName = "MyPU")
    private Session session;
} 
```

和错误： `Caused by: java.lang.IllegalArgumentException: Can not set org.hibernate.Session field com.mycompany.persistence.dao.RoleDAO.session to org.jboss.as.jpa.container.TransactionScopedEntityManager`

是否可以在 EJB 环境中注入休眠会话（不是 EntityManager）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:22:00.430

当然不是这样。我什至不确定您将如何去做，而不必编写一堆样板来加入交易等等。我的建议是使用`EntityManager.getDelegate()`并将其转换为 Hibernate Session。

# data-warehouse - 建模数据仓库：Alter 表还是 2 事实表？

> ID：15790109
> 
> 赞同：1
> 
> 时间：2013-04-03T14:25:59.460
> 
> 标签：data-warehouse, dimension, fact-table

我实际上是在建模一个数据仓库

在我的一个事实表中，我有 3 个数据（我想分析的数字）。问题是我将首先填写其中一个数字，然后（几天）填写其他 2 个数字。

在 DW 中做这件事是一件坏事吗（因为“禁止修改表”法）？

我想到的另一个解决方案是将第一个数字放在第一个事实表中，将其他 2 个放在第二个事实表中。当然，2 FT 将链接到相同的维度表。这个解决方案对我来说似乎不错，但以后比较数据可能有点重。

--

我说的数据是关于工作时间的。首先，员工将他的工作时间（未经验证）放入数据库中，这是我的第一个属性（Qe）。然后老板验证或修改（或不）这个数据，它给了我另一个属性（Qa）有时两个属性会同时加载到DW中（如果快速验证），有时不是

那么您如何看待它，哪种解决方案更好/更清洁？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:48:01.633

没有关于修改事实表的法律。如果它是一个累积快照，它在从一个步骤流向另一个步骤时跟踪一个过程，那么标准的 Kimball 方法是在记录被修改时更新它。

如果它是一个*事务性*事实表，其中对一行同时进行所有测量，那么更新是不好的。

在您的情况下，有一个累积的快照来衡量这些数据是很有意义的，因为它代表一个“工作流程”，在输入的结果成为“真相”之前有一个批准步骤。

# python - 执行外部命令，退出脚本并与外部命令交互

> ID：15790110
> 
> 赞同：0
> 
> 时间：2013-04-03T14:25:59.900
> 
> 标签：python, exec, subprocess

在 Python 中是否有任何替代 Perl 的方法`exec();`？

我需要 Python 调用外部命令，杀死自己，然后我可以与外部命令交互。

在 Perl 我可以打电话`exec("command argument");`

我试图用`subprocess`模块来实现这一点，但似乎我遗漏了一些东西。如果我打电话`subprocess.call`，我可以与子进程交互，但父进程仍在运行。如果我运行`subprocess.Popen`，则一旦父母退出，孩子就会被杀死。

*   操作系统是 UNIX。
*   Python 是 2.6.4（不能安装任何模块）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:28:31.730

函数族就是[`os.exec*`](http://docs.python.org/2/library/os.html#process-management)这样做的。

# c# - 如何在asp.net中打印多个具有特定尺寸的图像？

> ID：15790112
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:26:03.617
> 
> 标签：c#, asp.net, printing

我有 agridview 显示问题每一行显示问题和称为打印的模板字段当我按下打印时我想循环到数据库并获取所有文档（作为图像）属于这个问题并以固定尺寸打印它（打印纸张尺寸）

我用这个代码

```
 PrintDocument pd = new PrintDocument();
             if (Images.Count >0)
             {
                 foreach (string file in Images)
                 {
                     try
                     {
                         filename = file;
                         if (!File.Exists(filename))
                         {
                             throw new FileNotFoundException();
                         }

                         pd.PrintPage += Doc_PrintPage;

                         pd.Print();
                     }
                     catch (Exception exce)
                     { MessageBox.Show(exce.Message.ToString()); }

                 }

             }

   private void Doc_PrintPage(object sender, PrintPageEventArgs e)
    {
       System.Drawing.Image i = System.Drawing.Image.FromFile(filename);

    e.Graphics.DrawImage(i, 0, 0);
    } 
```

但是没有出现打印对话框并且打印的文档不适合打印的纸张我该如何执行此功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:40:08.943

您必须使用 javascript（或类似的东西，例如 jQuery）在浏览器上打印出图像。您不能通过 ASP.NET 直接与用户计算机进行交互。

ASP.NET 是一种服务器端语言。

唯一能够同时支持服务器端和客户端的语言是 Java，因为您可以使用 Java 应用程序与用户计算机进行交互，但我不推荐这样做。

您无法从您的网络服务器直接与用户计算机进行交互是有原因的，这仅仅是出于安全原因。如果可以这样做，那么任何人都可以设置一个网络服务器，基本上只是搞砸任何访问的人。

我会看看这个： [Using javascript to print images](https://stackoverflow.com/questions/2909033/using-javascript-to-print-images)

# java - 如何在 Play Framework 中获取活动套接字连接数？

> ID：15790114
> 
> 赞同：2
> 
> 时间：2013-04-03T14:26:05.807
> 
> 标签：java, scala, playframework, playframework-2.0

我想在 Play 框架中获取流量/连接数以进行测试和监控。

Play 框架上是否有实时服务器状态监视器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:53:18.857

我认为 New relic 有一个很好的方法来做到这一点：

[http://newrelic.com/application-monitoring](http://newrelic.com/application-monitoring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:00:58.403

Play 基于 Jboss Netty，所以你需要看看如何在 Netty 中检查连接数。

# git - git format-patch 输出的第一行是什么？

> ID：15790120
> 
> 赞同：29
> 
> 时间：2013-04-03T14:26:24.897
> 
> 标签：git, format-patch

运行 git format-patch 时，目的是创建您编写的代码的电子邮件表示。到现在为止还挺好。我不是电子邮件专家，但在我看来，这个格式补丁输出的第一行不是标准的电子邮件标题格式......

```
来自 de8d128fb520416e0b029c913b3a5ce900d0320c 2001 年 9 月 17 日星期一 00:00:00
消息 ID：
来自：克里斯托弗·哈维
日期：2013 年 4 月 3 日，星期三 10:17:52 -0400
主题：[补丁 0/3] *** 主题在这里 ***
致：克里斯托弗·哈维

*** 在这里模糊 ***

克里斯托弗哈维（3）：
  提交 2
  提交 3
  提交 4

 数据 | 3 +++
 1 个文件已更改，3 个插入（+）

--
1.7.12.4

```

什么是`From de8d128fb520416e0b029c913b3a5ce900d0320c Mon Sep 17 00:00:00 2001`？日期是什么？它在我看来是任意的，而且它还阻止我将它传送到 sendmail。每次我想发送补丁时，我都必须手动删除该行。

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-03T14:35:45.083

从`git help format-patch`

> 讨论 git format-patch 生成的补丁是 UNIX 邮箱格式，带有一个固定的“魔术”时间戳，表明该文件是从 format-patch 而不是真实邮箱输出的，如下所示：
> 
> ```
>  From 8f72bad1baf19a53459661343e21d6491c3908d3 Mon Sep 17 00:00:00 2001
>        From: Tony Luck <tony.luck@intel.com>
>        Date: Tue, 13 Jul 2010 11:42:54 -0700
>        Subject: [PATCH] =?UTF-8?q?> > [IA64]=20Put=20ia64=20config=20files=20on=20the=20?=
>         =?UTF-8?q?Uwe=20Kleine-K=C3=B6nig=20diet?=
>        MIME-Version: 1.0
>        Content-Type: text/plain; charset=UTF-8
>        Content-Transfer-Encoding: 8bit 
> ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-18T23:07:16.007

作为[Fredrik 回答](https://stackoverflow.com/a/15790338/1851186)的附录，以下是 Junio Hamano 的一些相关评论：

> `"Mon Sep 17 00:00:00 2001"`只是一个虚假的随机日期，使普通[MUA](http://en.wikipedia.org/wiki/Email_client)可以识别 Unix-From 行，并且与您的提交对象没有任何关系。实际日期在`Date:`标题上。

> 实际上，我曾经尝试将其更改为 git 的生日`Thu Apr 7 15:13:13 2005 -0700`（更新。

> 该`"From $SHA1 $magic_timestamp"`行和其他标题行是为了使它看起来像一个[mbox](http://en.wikipedia.org/wiki/Mbox)

链接：[1](http://marc.info/?l=git&m=117222147724676)、[2](http://marc.info/?l=git&m=117230943206808)、[3](http://marc.info/?l=git&m=132650295312709)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T14:40:01.703

输出为 mbox 格式。您可以使用以下命令轻松剥离第一行：

```
git format-patch --stdout <range> | sed 1d 
```

然后随心所欲地处理结果。

或者，您可以使用`git`它自己来发送电子邮件。尝试：

```
git send-mail --smtp-server=<your server> *.patch 
```

有关所有选项，请参阅[GIT Send-Mail 联机帮助页。](http://bit.ly/10vDP3p)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-06T22:07:35.917

来自维基百科（[https://en.wikipedia.org/wiki/September_17](https://en.wikipedia.org/wiki/September_17)）

2001 年——纽约证券交易所在 9 月 11 日袭击事件后重新开放交易，这是自大萧条以来最长的关闭时间。

也许只是巧合！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-02T23:56:31.537

Git 2.32（2021 年第二季度）实际上在其余文档开始引用它们之前预先解释了格式补丁输出的部分内容。

请参阅[Junio C Hamano ( ) 的](https://github.com/gitster)[提交 28e29ee](https://github.com/git/git/commit/28e29ee38b59c54d199c4ef42a77173e2090ccdb)（2021 年 3 月 24 日[）](https://github.com/gitster)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 5c2f7ff](https://github.com/git/git/commit/5c2f7ff0181cdcf711323e98b016bdd165484406))^(中，2021 年 3 月 30 日）)[`gitster`](https://github.com/gitster)
^([`gitster`](https://github.com/gitster))

> ## [`format-patch`](https://github.com/git/git/commit/28e29ee38b59c54d199c4ef42a77173e2090ccdb)：概述什么是“补丁”消息

> 文本说为每个提交准备了一个称为“补丁”的东西，它适用于电子邮件提交，“am”是使用它的命令，但没有说明“补丁”到底是什么。
> 
> 页面中的描述也提到了“三划线”，但不清楚它是什么，除非给读者更详细的“补丁”是什么的概述。
> 
> 添加一个简短的段落以概述输出的外观。

`git format-patch`现在在其[手册页](https://github.com/git/git/blob/28e29ee38b59c54d199c4ef42a77173e2090ccdb/Documentation/git-format-patch.txt#L39-L60)中包含：

> 在每次提交的一个“消息”中准备每个提交及其“补丁”，格式类似于 UNIX 邮箱。

> 命令生成的“消息”由三部分组成：
> 
> *   `From <commit>` 以固定日期戳开头的简短元数据标头，`Mon Sep 17 00:00:00 2001`以帮助“file(1)”之类的程序识别文件是此命令的输出、记录作者身份、作者日期和更改标题的字段（取自提交日志消息的第一段）。
>     
>     
> *   提交日志消息的第二段和后续段落。
>     
>     
> *   “补丁”，它是提交与其父级之间的“ `diff -p --stat`”输出（参见 参考资料）。[`git diff`](https://git-scm.com/docs/git-diff)
>     
>     
> 
> 日志消息和补丁由一条带三点划线的线分隔。

# ruby-on-rails - Rails link_to 使用“get”而不是“post”发送数据

> ID：15790122
> 
> 赞同：1
> 
> 时间：2013-04-03T14:26:27.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我认为我有一个代码

```
<% topics.each do |t| %>
<li><%= link_to "#{t.name}", {:controller => "pages", :action => "session_start", :topic_id => t.id} , :method => :post , :confirm => "Start a new QA session for '#{t.name}' ?"  %></li>
<% end %> 
```

参数 :topic_id 作为 get 发送并附加到 url，我希望它作为帖子正文的一部分发送。我尝试了各种组合，甚至阅读了 link_to API 文档。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:43:04.230

actually, you can do a rake routes to check the routes which you want to POST. your routes should have something like this:

```
 resources :pages do
    member do
      post   'session_start'
    end
  end 
```

then in your link, you can just do

```
<%= link_to "Hello", session_start_pages_path() %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:37:03.317

为什么不做类似的事情：

```
<%= link_to "#{t.name}", pages_session_start_path(topic_id: t.id), method: :post, confirm: "Start a new QA session for '#{t.name}' ?" %> 
```

PS 从我的头顶上掉下来，我不记得它是否会，`pages_session_start_path`或者`session_start_pages_path`但无论哪种方式，您都可能希望将您的 routes.rb 中的 URL 帮助程序重命名为更令人难忘的东西。

确保此 URL 的路由设置为`POST`

```
post "/pages/session_start", to: "pages#session_start", as: :session_start 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T14:31:23.460

查看[`link_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)文档，有一个`url_options`和`html_options`哈希；该选项`method`必须属于`url_options`散列，但是当您编写代码时，它属于`html_options`散列。尝试将所有选项移动到一个哈希中（在您的示例中，您不需要`html_options`哈希）：

```
<%= link_to "#{t.name}", {:controller => "pages", :action => "session_start", :topic_id => t.id, :method => :post , :confirm => "Start a new QA session for '#{t.name}' ?" } %> 
```

# ruby-on-rails - YAML - TypeError：无法转储匿名模块

> ID：15790124
> 
> 赞同：5
> 
> 时间：2013-04-03T14:26:37.270
> 
> 标签：ruby-on-rails, yaml, delayed-job

在 application_controller 的一个动作中，如果我们尝试：

```
p request.env.to_yaml 
```

我会收到这个错误：

```
 TypeError: can't dump anonymous module: #<Module:0x007fee26e34ad8>
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:267:in `visit_Module'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `accept'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:447:in `block in dump_ivars'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:445:in `each'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:445:in `dump_ivars'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:124:in `visit_Object'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `accept'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:447:in `block in dump_ivars'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:445:in `each'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:445:in `dump_ivars'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:124:in `visit_Object'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `accept'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:292:in `block in visit_Hash'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:290:in `each'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:290:in `visit_Hash'
    from /Users/twer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `accept' 
```

我的问题是：如何序列化为`request.env`yaml？

实际上，我应该将 request.env 传递给 delay_job 并发送电子邮件，但我收到了这个错误，因为 delay_job 需要将对象序列化到数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:13:53.410

问题是，request.env 哈希有很多嵌套对象（尤其是模块），无法转换为 yaml。诀窍是删除那些无法转换的哈希部分。

```
tmp_env = request.env.clone
tmp_env.delete "action_dispatch.routes"
tmp_env.delete "action_controller.instance"
tmp_env["action_dispatch.remote_ip"] = tmp_env["action_dispatch.remote_ip"].to_s 
p tmp_env.to_yaml # now it works 
```

我们首先克隆原始`env`哈希，以免意外修改它。然后我们从副本中删除这些键，这会导致错误。

`tmp_env["action_dispatch.routes"]`包含对`ActionDispatch::Routing::RouteSet`对象中未命名模块的引用，这是导致错误的原因。我们最好删除它。

`tmp_env["action_controller.instance"]`包含对原始`env`-hash 的引用（我们无法转换）。删除它。

最后`tmp_env["action_dispatch.remote_ip"]`看起来像一个字符串（当检查它时），但它是一个`ActionDispatch::RemoteIp::GetIp`实例。`env`它包含对原始哈希的另一个引用。我们将其转换为字符串，因为我不知道您以后是否对那个键感兴趣。

此外，您可以删除更多键以减小 yaml 输出的大小。但是，这应该不会抛出您遇到的错误。一个更精简的解决方案是从一个空的 Hash 开始，只复制你在 yaml 输出中真正需要的键。

用 ruby​​ 1.9.3 和 rails 3.2.13 测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-28T00:46:08.260

这是我想出的，基于 tessi 的例子：

```
module RequestSerializationHelper
  ::SerializableRequest = Struct.new(
    :env,
    :filtered_parameters,
    :fullpath,
    :headers,
    :request_method,
    :remote_ip
  )

  ## From http://stackoverflow.com/questions/7604153/rails-2-3-14-how-to-serialise-an-actioncontrollerrequest-object
  ## with additional modifications

  # build a serializable Struct that out of the given request object, which looks like a real request
  def make_request_serializable(request)
    serializable_request = ::SerializableRequest.new
    serializable_request.env = request.env.clone
    serializable_request.filtered_parameters = request.filtered_parameters.clone if request.respond_to? :filtered_parameters
    serializable_request.fullpath = request.fullpath
    serializable_request.headers = request.respond_to?(:headers) ? request.headers.clone : {}
    serializable_request.request_method = request.request_method

    delete_identified_unserializable_values(serializable_request.env)
    delete_identified_unserializable_values(serializable_request.headers)

    # Some jobs want this, so set it after it's been converted to a string in the env
    serializable_request.remote_ip = serializable_request.env["action_dispatch.remote_ip"]

    # automatically delete anything left that's non-serializable.  If we end up deleting
    # too much and breaking something, here's where to debug it based on info in warning
    delete_unidentified_unserializable_values :env, serializable_request.env
    delete_unidentified_unserializable_values :headers, serializable_request.headers

    serializable_request
  end

  def delete_identified_unserializable_values(hash)
    hash.delete "async.callback"
    hash.delete "action_dispatch.backtrace_cleaner"
    hash.delete "action_dispatch.cookies"
    hash.delete "action_dispatch.request.accepts"
    hash.delete "action_dispatch.routes"
    hash.delete "action_dispatch.logger"
    hash.delete "action_controller.instance"
    hash.delete "rack.input"
    hash.delete "rack.errors"
    hash.delete "rack.session"
    hash.delete "rack.session.options"
    hash["action_dispatch.remote_ip"] = hash["action_dispatch.remote_ip"].to_s
    hash.delete "warden"
    hash.delete_if { |key, _| key =~ /^rack-cache/ }
  end

  private

  def delete_unidentified_unserializable_values(hash_name, hash)
    hash.each do |key, value|
      begin
        serialized = value.to_yaml
        YAML.load(serialized)
      rescue => e
        warning = "RequestSerializationHelper: Automatically removing un(re)serializable entry in " +
          "'#{hash_name}' for key '#{key}' and value '#{value}'.  Exception was: '#{e}'"
        Rails.logger.warn(warning)
        hash.delete key
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:17:40.870

根据[physic](https://github.com/tenderlove/psych/blob/master/lib/psych/visitors/yaml_tree.rb)的代码，听起来可能有点奇怪，但是

```
request.env.instance_eval "def name; 'some_name'; end" 
```

可能会奏效。酷，哼？

# javascript - 是否可以使用 Javascript 来搜索代码尝试访问的所有 URL 的 Javascript 代码？

> ID：15790127
> 
> 赞同：0
> 
> 时间：2013-04-03T14:26:46.037
> 
> 标签：javascript, ajax, search

假设我在一个字符串变量中有一个完整的 JS 脚本。与其执行整个脚本，我只想评估它的代码，以找出如果运行它会尝试检索（通过 Ajax）哪些 URL。

我可以将代码作为文本进行正则表达式搜索，但这不会找到故意使用`replace()`.

这需要使用 Javascript 来完成。

如果可能的话，任何人都可以提供至少一个关于这如何可能的提示吗？

编辑：就上下文而言，我的项目是构建一个greasemonkey 脚本，从userscripts.org 的脚本列表中过滤掉Facebook 垃圾邮件诈骗。我已经有一些东西可以对用于诈骗的常见 facebook ajax URL 进行简单的文本搜索，但诈骗作者已经在尝试寻找解决方法。我需要可靠地捕获所有 Ajax URL 以进行检查，无论它们如何被串在一起并使用字符串函数进行更改。如果有兴趣，请参阅[http://userscripts.org/scripts/show/163038 。](http://userscripts.org/scripts/show/163038)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:30:37.080

你说整个事情都在一个变量中......我假设你的意思是一个字符串。使用任何内容的字符串表示形式，您可以将其解析为您想要的任何内容。棘手的部分是正确地做到这一点。在此处查看 RegEx（正则表达式）：[http ://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

这是一个查找 URL 的正则表达式：

```
^http(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?$ 
```

**回复：评论**

您可以在 BuildString() 函数中连接所述字符串的所有可能实例，并返回一个带有结果的字符串，然后为您的 URL 正则表达式返回的变量。

IE：

```
function Concatenation() {
    var _strOutput = "<script>var x = 0; x += " + GetVariableIterator() + "; return x; </script>";
    return _strOutput;
}

function FinalResult() {
    var _strCombined = Concatenation();
    // Do Regex and work with URLs
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:55:51.207

本主题可能对您有所帮助：[拦截所有 ajax 调用？](https://stackoverflow.com/questions/6884616/intercept-all-ajax-calls)

实际上，您可以重新定义 XHR 以使 ajax 调用按照您的意图进行，而不依赖于 Javascript 框架：

```
var ajax_urls = new Array();
var XHR_backup = new Array();
XHR_backup.open = XMLHttpRequest.prototype.open;
XHR_backup.send = XMLHttpRequest.prototype.send;

// Customize XHR behaviour
(function(XHR, ajax_urls) {
    "use strict";

    var open = XHR.prototype.open;
    var send = XHR.prototype.send;

    XHR.prototype.open = function(method, url, async, user, pass) {
        ajax_urls.push(url);
    };

    XHR.prototype.send = function(data) {
    }
})(XMLHttpRequest, ajax_urls);

// Evaluate your script
eval(resultScript);

for (var i = 0; i < ajax_urls.length; i++) {
    alert('Hey, my super XHR fetched ' + ajax_urls[i] + ' !!');
}

// Restore initial XHR behaviour
XMLHttpRequest.prototype.open = XHR_backup.open;
XMLHttpRequest.prototype.send = XHR_backup.send; 
```

**编辑：**我还没有测试过这个片段，所以我正在等待你的反馈。

**Edit2：**测试和工作！[http://jsfiddle.net/3qVUP/1/](http://jsfiddle.net/3qVUP/1/)

# javascript - 当手动和编程更改文本字段的值时是否应该触发更改事件？

> ID：15790128
> 
> 赞同：5
> 
> 时间：2013-04-03T14:26:46.220
> 
> 标签：javascript, jquery, html

我有一个带有远程数据源的 jQuery UI 自动完成文本字段。自动完成的`select`事件做了三件事：

1.  使用从自动完成列表中选择的值更新文本字段的值
2.  进行 AJAX 调用以将更多数据加载到页面中
3.  将焦点移动到另一个文本字段（在上一步中创建）

文本字段还有一个`change`事件，它会删除上面第 2 步中加载的数据并触发自动完成的`search`事件。

这在 IE 中完美运行（使用版本 9 和 10 进行了测试），但在 Firefox 中却不行。当我从自动完成列表中进行选择时，永远不会显示额外的数据（尽管分析网络流量表明正在进行 AJAX 调用）并且`search`触发了自动完成的事件。在上述步骤 3 之后，我设法将问题追溯到 Firefox 触发文本字段的`change`事件，显然是因为我在文本字段中输入了一些内容以触发自动完成列表，尽管文本字段后来以编程方式更新。

快速示例： http: [//jsfiddle.net/2umrJ/1](http://jsfiddle.net/2umrJ/1)
（为简洁起见，该示例仅使用`keyup`文本字段上的事件。）

IE10 中的输出：

> input1.focus() 触发
> input1.blur() 触发
> input2.focus() 触发

Firefox 20 中的输出：

> input1.focus() 触发
> input1.change() 触发
> input1.blur() 触发
> input2.focus() 触发

可以看出，Firefox 会触发该`change`事件，而 IE 则不会。现在我知道默认情况下（即没有任何额外代码）该`change`事件仅在手动更改值时触发，但是当*手动和以编程*方式更改值而字段在两者之间失去焦点时，正确的行为是什么？

另外，对于我的特殊情况，更重要的是，如果 Firefox 的行为是正确的（或至少不是不正确的），那么防止它的最佳方法是什么？在我从自动完成列表中选择某些内容后，我不希望在`change`以编程方式更改焦点时触发事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:45:00.903

为了防止更改事件在 Firefox 中触发，我会在您的逻辑中设置一个变量，说明它正在以编程方式进行更改，并且在更改事件逻辑中，您应该检查该变量，如果以编程方式触发，请不要执行更改逻辑，并在退出前重置变量。

# jsf - 如何在 EL 中调用带参数的辅助方法

> ID：15790130
> 
> 赞同：0
> 
> 时间：2013-04-03T14:27:02.880
> 
> 标签：jsf, jsf-2, facelets, el

我有一个托管 bean 中的值列表。

```
价值观

120
70
30
60
```

然而，要求是将这些值映射到红色（0%）和绿色（100%）之间的颜色。我需要将此转换后的颜色值提供给具有可以是 EL（表达式语言）表达式的*颜色*属性的数据驱动组件（类似于 a `h:dataTable`）的列。

 *所以对于颜色转换的百分比，我可以使用[这里](https://stackoverflow.com/a/25024/1527084)给出的简单算法。尽管它是用 JavaScript 编写的，但它可以很容易地用 Java 编写。让我们调用这个方法`color()`并让它在具有原始 List(values) 的托管 bean 中声明。

```
 Color  color(double percentage){} 
```

现在我的问题是如何首先将百分比传递给此方法，然后在运行时将转换后的颜色值传递回组件。

例如

```
<nameSpace:dataTable  values="#{bean.Values} var="row" ...>
   <nameSpace:column  color="#{expression language syntax}" --> 
```

所以这种表达语言应该能够：

1.  首先计算百分比（因此对于值 30 ，百分比应为 (( 30 /120 ) * 100)= 25 ，然后将此百分比传递给`color()`函数。

2.  然后继续将百分比传递给先前声明的`color()`方法，然后将该方法的返回设置为`color`属性。

我正在使用 JSF2.0。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:11:45.507

有几种方法。

1.  [创建自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function)。

    ```
    <nameSpace:column color="#{f:color(row.percentage)}"> 
    ```

2.  [利用 EL 2.2 调用带参数的方法的特性](https://stackoverflow.com/questions/5273729/how-to-call-a-method-with-a-parameter-in-jsf/5273864#5273864)（Weblogic 12c 与 Servlet 3.0 兼容，因此只要 webapp 提供`web.xml`的也与 Servlet 3.0 兼容，这应该可以工作）。

    ```
    <nameSpace:column color="#{bean.color(row.percentage)}"> 
    ```

3.  直接在模型中准备所需的数据。

    ```
    <nameSpace:column color="#{row.color}"> 
    ```

4.  `#{row}`在 getter 方法中以编程方式计算 EL 表达式。

    ```
    <nameSpace:column color="#{bean.color}"> 
    ```

    和

    ```
    Double percentage = context.getApplication().evaluateExpressionGet(context, "#{row.percentage}", Double.class);
    // ... 
    ```*

# php - 如果得到 3xx 状态码，php curl 立即重定向

> ID：15790131
> 
> 赞同：0
> 
> 时间：2013-04-03T14:27:03.763
> 
> 标签：php, curl, http-status-codes

我正在使用 php 和 curl 创建网页抓取。我看如果http响应的状态码是3xx，curl还是会下载body内容。如果正文内容很小，我认为这没问题，但在我的情况下，有些页面有 3xx 和巨大的正文内容。如果它得到 3xx 而没有获取正文内容，我只想立即重定向。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:28:39.820

首先你需要[告诉它](http://php.net/manual/en/function.curl-setopt.php)只有小于 4xx 的状态才是好的。

```
$handle = curl_init(); 
curl_setopt($handle, CURLOPT_FAILONERROR, true); 
```

> CURLOPT_FAILONERROR
> 如果返回的 HTTP 代码大于或等于 400，则为 TRUE 以静默失败。默认行为是正常返回页面，忽略代码。

其次，对于 3xx 错误，您需要遵循重定向。见`CURLOPT_FOLLOWLOCATION`和`CURLOPT_MAXREDIRS`。

# python - Django 提供下载文件

> ID：15790136
> 
> 赞同：13
> 
> 时间：2013-04-03T14:27:25.857
> 
> 标签：python, django, file, download

我正在尝试提供一个由某些内容生成的 txt 文件，但我遇到了一些问题。我创建了临时文件并使用 NamedTemporaryFile 编写了内容，并将 delete 设置为 false 以进行调试，但是下载的文件不包含任何内容。

我的猜测是响应值没有指向正确的文件，因此没有下载任何内容，这是我的代码：

```
 f = NamedTemporaryFile()
    f.write(p.body)

    response = HttpResponse(FileWrapper(f), mimetype='application/force-download')
    response['Content-Disposition'] = 'attachment; filename=test-%s.txt' % p.uuid
    response['X-Sendfile'] = f.name 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-03T14:35:59.413

您是否考虑过仅`p.body`通过以下`response`方式发送：

```
response = HttpResponse(mimetype='text/plain')
response['Content-Disposition'] = 'attachment; filename="%s.txt"' % p.uuid
response.write(p.body) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:30:33.897

XSend 需要文件的路径 `response['X-Sendfile']` 所以，你可以这样做

```
response['X-Sendfile'] = smart_str(path_to_file) 
```

这里，`path_to_file`是文件的完整路径（不仅仅是文件名）检查这个[django-snippet](http://djangosnippets.org/snippets/2226/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:43:55.687

您的方法可能存在几个问题：

*   文件内容不必刷新，`f.flush()`如上面评论中所述添加
*   `NamedTemporaryFile`在关闭时被删除，当你退出你的功能时可能会发生什么，所以网络服务器没有机会拿起它
*   临时文件名可能不在配置 Web 服务器发送使用的路径中`X-Sendfile`

也许最好使用[StreamingHttpResponse](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.StreamingHttpResponse)而不是创建临时文件和`X-Sendfile`......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-16T11:42:05.740

```
import urllib2;   
url ="http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=s&chld=H|0"; 
opener = urllib2.urlopen(url);  
mimetype = "application/octet-stream"
response = HttpResponse(opener.read(), mimetype=mimetype)
response["Content-Disposition"]= "attachment; filename=aktel.png"
return response 
```

# emacs - 在带有粘液的emacs中找不到普通lisp中的任何符号

> ID：15790143
> 
> 赞同：1
> 
> 时间：2013-04-03T14:27:40.613
> 
> 标签：emacs, common-lisp, slime

根据网上的指南，我们可以在 HyperSpec 中通过键入 Cc Cd h 在 Emacs 中搜索“格式”之类的符号，但是我就是无法让它工作，emacs 只是提示符号没有完成。有人能应付吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:32:04.457

你真的在使用 Slime REPL 模式吗？有时，在没有任何配置的情况下启动 Slime 时，您不会进入 REPL 模式，而是坐在`*inferior-lisp*`缓冲区中。

首先，检查缓冲区的标题是什么。如果是`*inferior-lisp*`，则不是正确的。它应该`*slime-repl sbcl*`是（其中 sbcl 指的是您正在使用的 CL 实现）。

如果是这种情况，那么您需要确保在您的 Emacs 初始化文件中启用 slime-fancy。这就是我所拥有的：

```
(defun init-slime-configuration ()
  (slime-setup '(slime-fancy slime-fuzzy))
  (setq slime-load-failed-fasl 'never)
  (define-key slime-repl-mode-map (kbd "C-<tab>") 'slime-fuzzy-complete-symbol)
  (define-key slime-mode-map (kbd "C-<tab>") 'slime-fuzzy-complete-symbol))

(add-hook 'slime-load-hook 'init-slime-configuration) 
```

这也允许我使用 C-TAB 进行模糊扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T23:37:22.867

从使用 Quicklisp（2.9 版）安装的 SLIME 版本切换到从 MELPA（20141010.1357 版，作为 ac-slime 的依赖项）安装的 SLIME 版本后，我遇到了这个问题。

使用 Quicklisp 的 SLIME 与我的本地 HyperSpec 副本配合使用，使用以下设置：

```
(require 'slime-autoloads)
(add-to-list 'slime-contribs 'slime-fancy)
(setq slime-lisp-implementations
  '((ccl ("ccl"))
    (clisp ("clisp"))
    (cmucl ("cmucl"))
    (ecl ("ecl"))
    (sbcl ("sbcl"))))
(setq slime-default-lisp 'sbcl)
(setq common-lisp-hyperspec-root "file:/usr/share/doc/HyperSpec/")
(setq common-lisp-hyperspec-symbol-table "file:/usr/share/doc/HyperSpec/Data/Map_Sym.txt") 
```

然后我完全删除并重新安装了 Quicklisp（无需重新安装 SLIME！），然后使用 Emacs 包管理器从 MELPA 安装 ac-slime。

我碰巧注意到，当我尝试在 HyperSpec 中查找文档时，Emacs 打开了一个隐藏缓冲区，其中包含一个名为“Map_Sym.txt”的空文件。

查看这个文件的完整路径名，`C-h v buffer-file-name [RET]`发现它被设置为“/home/miki/file:/usr/share/doc/HyperSpec/Data/Map_Sym.txt”。

作为一项实验，我尝试从设置的最后两行中删除“file:/”，以使它们读取：

```
(setq common-lisp-hyperspec-root "/usr/share/doc/HyperSpec/")
(setq common-lisp-hyperspec-symbol-table "/usr/share/doc/HyperSpec/Data/Map_Sym.txt") 
```

它似乎已经解决了这个问题。为什么这样有效，我不知道（它与文档不同）。也许是错误或未记录的更改？

# r - data.frame 中具有多个值的列

> ID：15790148
> 
> 赞同：2
> 
> 时间：2013-04-03T14:27:52.697
> 
> 标签：r, dataframe

我想在 R 中创建一个 data.frame，其中一些列具有多个值（所有行的变量数量相同）。例如，这是一个包含两列（汽车和价格）的数据框，请注意，价格列的每一行都有三个值。

```
cars price

F    1000,2000,3000

GM   2000, 500, 1000 
```

第二个问题：

现在我想对价格列中的每个值应用相同的函数，我该怎么做？假设我想创建另一个价格列值加倍的列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:58:06.157

`data.frame`s 只是`list`s，因此，它们也可以是`list`s 的`list`s。

```
cars <- c("FORD", "GM")
price  <- list( c(1000, 2000, 3000),  c(2000, 500, 1000))
myDF <- data.frame(cars=cars, price=cbind(price))

myDF
#    cars            price
#  1 FORD 1000, 2000, 3000
#  2   GM  2000, 500, 1000 
```

* * *

`price`然后对给定行中的所有值执行函数：

```
# execute on ALL PRICES at once
mean(unlist(myDF$price))
#  [1] 1583.333

# execute on each set of PRICES per row: 
lapply(myDF$price, mean)
#  [[1]]
#  [1] 2000 
#    
#  [[2]]
#  [1] 1166.667 
```

* * *

## 话虽如此，我会建议反对这种方法。

它变得很麻烦，通常有更好的方法来实现相同的目标。

一种替代方法是简单地使用价格表作为您的数据集，并根据汽车列命名元素：

```
names(price) <- cars
price
#  $FORD
#  [1] 1000 2000 3000
#    
#  $GM
#  [1] 2000  500 1000 
```

在这种情况下，您的 *ply 语句将具有已经分配给它们的汽车的名称，并且输入会稍微少一些：

```
lapply(price, mean)
#  $FORD
#  [1] 2000
#  
#  $GM
#  [1] 1166.667 
```

* * *

另一种方法是使用 long `data.frame`or `data.table`：

```
# transforming to long: 
myDF <- data.frame("cars"=rep(cars, times=lapply(price, length)), "price"=unlist(price, use.names=FALSE))
myDF 
```

然后，您可以使用 by 参数对组中的所有价格执行函数：

```
by(data=myDF$price, INDICIES=myDF$cars, FUN=mean)

# or using with:
with(myDF, by(price, cars, mean)) 
```

这是相同的方法，但使用`data.table`（`by`内置）

```
library(data.table)
myDT <- data.table(myDF, key="cars")
myDT[, mean(price), by=cars]

#     cars       V1
#  1: FORD 1501.250
#  2:   GM 1166.667 
```

# sdk - 如何编译 CUDA SDK 示例？

> ID：15790150
> 
> 赞同：1
> 
> 时间：2013-04-03T14:27:55.823
> 
> 标签：sdk, cuda

我未能编译共轭梯度求解器。我下载了包含库、makefile 和其他东西的整个档案，但编译器缺少一些头文件。如何包含我下载的所有文件？也许我需要添加一些路径或将文件夹“common”复制到`/usr/local/cuda/include/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:18:26.967

要直接下载和构建 cuda 示例，以下步骤对我有用：

```
wget http://developer.download.nvidia.com/compute/DevZone/CUDALibraries/Projects/x64/conjugateGradient.tar.gz
tar -xzvf conjugateGradient.tar.gz
cd 7_CUDALibraries/conjugateGradient
make
# to execute the program:
./conjugateGradient 
```

这假设标准 cuda 5 安装在`/usr/local/cuda`. 它不假定以前安装了任何示例。我在一台装有 CUDA 5 和 RHEL 5.5 的机器上测试了这个

如果这不起作用，请发布您收到的错误输出的详细信息。

如果您想使用此处给出的示例以外的其他示例，可以在[此处](http://docs.nvidia.com/cuda/cuda-samples/index.html)获得下载链接。

# java - 多线程问题不能等待线程完成

> ID：15790151
> 
> 赞同：0
> 
> 时间：2013-04-03T14:27:56.270
> 
> 标签：java, eclipse, multithreading

我遇到了多线程问题。当我尝试使用 wait() 和 notify() 或 join() 时，我得到了 InterruptedException。我在 WHILE 循环中有 2 个线程，我想等到它们都完成。这是我的代码：

```
while (!GamePanel.turn)
    {
        if(GamePanel.s.isRunning)
        {
            synchronized (GamePanel.s.thread) 
            {
                try {
                    GamePanel.s.thread.join();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        //Player selected random moves
        if(GamePanel.selectedMove == 1)
        {
            //Get computer's Random move.
            strategy.getRandomMove();
        }
        else
        {
            //Player selected AI moves
            if(GamePanel.selectedMove == 2)
            {
                //Get computer's AI move.
                strategy.getMove();
                System.out.println(strategy.move);

            }
        }

        //Perform the next move of the computer.
        Rules.makeMove(GamePanel.dimples, strategy.move, false);
    } 
```

strategy.getMove() 和 Rules.makeMove() 都是线程。对于每个线程，我创建了自己的 start() 和 stop() 方法：

```
public void start() 
//This function starts the thread.
{
    if (!isRunning) 
    {
        isRunning = true;
        thread = new Thread(this);
        thread.setPriority(Thread.NORM_PRIORITY);
        thread.start();
    }
}
private void stop() 
//This function stops the thread.
{
    isRunning = false;
    if (thread != null) 
    {
        thread.interrupt();
    }
    thread = null;
} 
```

我也尝试过 thread.stop() 但仍然存在同样的问题。 **我的问题是如何让 WHILE 循环等到两个线程都完成？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:43:35.597

您可能会考虑将代码切换为使用[`CountDownLatch`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html). 您将创建如下所示的锁存器，并且所有 3 个线程将共享它：

```
final CountDownLatch latch = new CountDownLatch(2); 
```

然后你的两个线程将在完成时递减计数器：

```
countDown.countDown(); 
```

你的等待线程会做：

```
countDown.await(); 
```

在两个线程都完成并且闩锁变为 0 后，它将被唤醒。

# r - R Shiny：不知道为什么 ggplot 失败了

> ID：15790152
> 
> 赞同：5
> 
> 时间：2013-04-03T14:28:01.833
> 
> 标签：r, ggplot2, shiny

闪亮的新手在这里。

我正在尝试编写一个 R 闪亮的脚本，我想做的一件事是生成给定日期和不同地区给定广告商的广告浏览次数的直方图。

我的表有以下列（带有示例数据）：

```
Date    Impressions Advertiser  Factor 1         DMA

2/19       22789     McDonalds   Cheap           Los Angeles
2/17       15002    Regal Cinem  Luxury          New York
2/20       12345     McDonalds   Cheap           D.C. 
```

我在 UI 选项卡上想要的输出与 ggplot 类似

```
ggplot(df2, aes(x=DMA, y=Impressions, fill=DMA)) +geom_histogram() 
```

应该看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/oLBMM.png)

但是，我收到一个错误

```
Error: object 'DMA' not found 
```

当我基本上将相同的公式粘贴到 R Shiny 中时。我的代码如下

服务器.R

```
library(shiny)
library(ggplot2)

df<- na.omit(read.csv("data.csv", fill= TRUE, nrows= 3000000))

shinyServer(function(input, output){

df2<- reactive({df[df$Date==input$date & df$Advertiser==input$name, ]})

#FIXME why is this plot not printing
output$plot1<- renderPlot({
  print(ggplot(df2, aes(x=DMA, y=Impressions, fill=DMA)) +geom_histogram())

})
#end of server brackets
}) 
```

用户界面

```
library(shiny)
df<- na.omit(read.csv("data.csv", fill= TRUE, nrows= 3000000))
daterange<- unique(df$Date)
names <- unique(df$Advertiser)

shinyUI(pageWithSidebar(

  #Title of Application
  headerPanel("Advertisement"), 

  sidebarPanel( 

    selectInput("date", "Date:", 
                choices= daterange),

    selectInput("name", "Partner", 
                choices= names)

  ),

  mainPanel(
    tabsetPanel(
      tabPanel("Plot1", plotOutput("plot1"))

      )
    )

  #end of UI brackets
  )) 
```

其他一切正常，包括选项卡。但是这个情节没有出现。

更新：谢谢，GGplot 现在通过将 print() 语句包装在它周围来工作。但是，在无法找到变量的情况下出现了一个新问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T15:18:56.210

`df2`不是数据，而是一个反应函数。使用`df2()`in `ggplot`，并且不要忘记如上所述打印。

如果发生这样的事情，不要假设“DMA 存在”，而是`print(str(df2))`在关键点插入 a。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T14:55:32.937

尝试用 print() 包装 ggplot 对象

# android - 带有背景可绘制对象的 outOfMemoryError

> ID：15790156
> 
> 赞同：2
> 
> 时间：2013-04-03T14:28:14.087
> 
> 标签：android, memory, out-of-memory, analyzer, mat

我读了很多关于位图内存泄漏的信息，但我无法解决我的问题。我有一个应用程序在我的手机上运行良好，但在其他应用程序中我得到 outOfMemoryError 位图大小超过 VM。

我的问题是我不明白如何释放这些资源。我有一个游戏，其中包含多个活动和对话框，在 XML 文件的背景中带有可绘制对象，有时作为布局背景，有时作为全屏的 ImageView。我怎样才能释放这个内存？我不能使用回收，我在销毁活动或关闭对话框时使用 unbindDrawables 方法，但这似乎还不够。

我的垫子概述： ![垫子概述](https://i.stack.imgur.com/EgYJU.jpg)

和我的 MAT 内存泄漏嫌疑人： ![内存泄漏嫌疑人](https://i.stack.imgur.com/j3DOF.jpg) 这是我的支配树：

```
 `Class Name                                                                 | Shallow Heap | Retained Heap | Percentage
-----------------------------------------------------------------------------------------------------------------------
android.graphics.Bitmap @ 0x42689c38                                       |           48 |     9.437.248 |     15,43%
class android.content.res.Resources @ 0x40daacb8 System Class              |           48 |     5.154.752 |      8,43%
android.graphics.Bitmap @ 0x41674f78                                       |           48 |     4.194.368 |      6,86%
android.graphics.Bitmap @ 0x41b1f978                                       |           48 |     4.194.368 |      6,86%
android.graphics.Bitmap @ 0x415954e8                                       |           48 |     4.096.064 |      6,70%
android.graphics.Bitmap @ 0x416565a8                                       |           48 |     4.096.064 |      6,70%
android.graphics.Bitmap @ 0x41ab4b70                                       |           48 |     4.096.064 |      6,70%
android.graphics.Bitmap @ 0x425218a8                                       |           48 |     4.096.064 |      6,70%
android.graphics.Bitmap @ 0x41664030                                       |           48 |     2.389.984 |      3,91%
android.graphics.Bitmap @ 0x41ab2b88                                       |           48 |     2.187.648 |      3,58%
android.graphics.Bitmap @ 0x42687718                                       |           48 |     1.740.864 |      2,85%
android.graphics.Bitmap @ 0x41ab2818                                       |           48 |     1.521.024 |      2,49%
android.graphics.Bitmap @ 0x40f796e8                                       |           48 |     1.127.584 |      1,84%
android.graphics.Bitmap @ 0x41a7f6a0                                       |           48 |     1.048.640 |      1,71%
android.graphics.Bitmap @ 0x41ab5348                                       |           48 |     1.048.640 |      1,71%
android.graphics.Bitmap @ 0x42687b08                                       |           48 |     1.048.640 |      1,71%
android.graphics.Bitmap @ 0x4268dce0                                       |           48 |     1.048.640 |      1,71%
android.graphics.Bitmap @ 0x426a59c0                                       |           48 |     1.048.640 |      1,71%
android.graphics.Bitmap @ 0x41bfce38                                       |           48 |       890.944 |      1,46%
android.graphics.Bitmap @ 0x416796d8                                       |           48 |       750.784 |      1,23%
android.graphics.Bitmap @ 0x41596ec0                                       |           48 |       262.208 |      0,43%
android.graphics.Bitmap @ 0x41694318                                       |           48 |       262.208 |      0,43%
android.graphics.Bitmap @ 0x41a98cb0                                       |           48 |       262.208 |      0,43%
android.graphics.Bitmap @ 0x41bfefc0                                       |           48 |       262.208 |      0,43%
android.graphics.Bitmap @ 0x42790e90                                       |           48 |       262.208 |      0,43%
class android.text.Html$HtmlParser @ 0x40e7ade0 System Class               |            8 |       126.632 |      0,21%
class java.lang.ref.FinalizerReference @ 0x40d0fef0 System Class           |           16 |       118.464 |      0,19%
class libcore.icu.TimeZones @ 0x40d152b0 System Class                      |           40 |       103.432 |      0,17%
android.graphics.Bitmap @ 0x40f450a0                                       |           48 |       100.288 |      0,16%
com.android.org.bouncycastle.jce.provider.BouncyCastleProvider @ 0x40e0e0d8|          112 |        80.096 |      0,13%
android.graphics.Bitmap @ 0x426a4718                                       |           48 |        66.624 |      0,11%
android.graphics.Bitmap @ 0x4158c1a0                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41592a58                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41655380                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41a90980                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41aa9718                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41ab4178                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41ab43b0                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41ab8440                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41adc988                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x41b0ae10                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x422e46c0                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x42520580                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x42684680                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x42686db8                                       |           48 |        65.600 |      0,11%
android.graphics.Bitmap @ 0x4268ab38                                       |           48 |        65.600 |      0,11%
android.graphics.drawable.StateListDrawable$StateListState @ 0x426a5800    |           80 |        63.064 |      0,10%
android.graphics.drawable.StateListDrawable$StateListState @ 0x426f3458    |           80 |        63.064 |      0,10%
android.graphics.drawable.NinePatchDrawable @ 0x426f2bc0                   |           72 |        62.464 |      0,10%
android.graphics.drawable.NinePatchDrawable @ 0x427404e8                   |           72 |        62.464 |      0,10%
android.graphics.NinePatch @ 0x426b5030                                    |           32 |        62.288 |      0,10%
Total: 51 of 15.374 entries                                                |              |               |           
-----------------------------------------------------------------------------------------------------------------------
` 
```

我从MAT开始，我的记忆力太差了吗？如果不使用位图，如何正确释放背景内存？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:30:14.140

不使用时回收位图。在蜂窝位图停留在堆上之后。

```
 bitmaps.recycle(); 
```

[http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)。上面的链接有一个关于如何避免内存泄漏的主题。

此外，如果您有高分辨率图像，则应按比例缩小。请参阅将**缩小版本加载到内存中的主题。**

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

假设您将表单活动 A 导航到 B。在`onPause()`回收位图中。在`onResume()`加载位图。为您加载位图的每个活动执行此操作。

由于您使用 MAT，您应该查看下面的链接以查找和解决内存泄漏 [http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

# scala - 类型推断不一致

> ID：15790159
> 
> 赞同：0
> 
> 时间：2013-04-03T14:28:24.927
> 
> 标签：scala, generics, collections, containers, type-inference

假设我有一个包装类

```
case class Cont [E] (e : Seq[E]) {
  def :: [E1 >: E] (e1 : Seq[E1]) : Cont[E1] = Cont(e1 ++ e)
  def + [E1 >: E] (e1 : Seq[E1]) : Cont[E1] = Cont(e1 ++ e)
} 
```

它是某种类型序列的包装器。它现在可以接受另一种类型的序列并返回附加序列的新包装器及其超类型的类型。它有两种方式 - 从右到左使用 :: 和从左到右使用 +。

现在这些是链接的结果：

```
Cont(Seq[Nothing]()) //-> Cont[Nothing]
Seq[Nothing]() :: Cont(Seq[Nothing]()) //-> Cont[Nothing]
Seq[Nothing]() :: Seq[Nothing]() :: Cont(Seq[Nothing]()) //-> Cont[E1]
Seq[Int]() :: Seq[Nothing]() :: Seq[Nothing]() :: Cont(Seq[Nothing]()) //-> Cont[Any]

Cont(Seq[Nothing]())//-> Cont[Nothing]
Cont(Seq[Nothing]()) + Seq[Nothing]()//-> Cont[Nothing]
Cont(Seq[Nothing]()) + Seq[Nothing]() + Seq[Nothing]() //-> Cont[Nothing]
Cont(Seq[Nothing]()) + Seq[Nothing]() + Seq[Nothing]() + Seq[Int]() //-> Cont[Int] 
```

结果应该相同还是不应该？他们不是。我需要第二个（从左到右）行为。我什至不知道 Cont[E1] 是什么意思。发生这种情况有什么原因吗？使用 :: 的代码是否有任何修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:50:05.603

您是否知道在中缀“类似运算符”的形式中使用以冒号结尾的方法名称是右关联的，并根据右手操作数解析？

换句话说：

```
foo :: bar 
```

相当于：

```
bar.::(foo) 
```

而这：

```
foo + bar 
```

相当于

```
foo.+(bar) 
```

我相信这解释了您在`+`和之间看到的差异`::`。

# jsf-2 - Primefaces Selectors：更新最接近的表单时如何排除某些组件？

> ID：15790160
> 
> 赞同：1
> 
> 时间：2013-04-03T14:28:25.863
> 
> 标签：jsf-2, jquery-selectors, primefaces

我正在使用 PrimeFaces`commandButton`发出 Ajax 请求。
我应该设置`update`属性，以便更新整个父表单，除了某些特定组件（假设我用 标记它们`styleClass="noupdate"`）。
我正在使用 PrimeFaces 3.5，所以我认为 PrimeFaces JQuery 选择器可能会有所帮助。
我试过这样的事情：

```
<!-- ...some inputs/labels to be updated here... -->
<p:overlayPanel styleClass="noupdate">
    <!-- ...some inputs/labels to be updated here... -->
    <p:commandButton id="btnDoIt" value="Do it" 
            update="@(this.closest('form') :not(.noupdate))"/>  
</p:overlayPanel> 
```

但它不起作用（我得到一个 JavaScript 语法错误）。
有没有办法得到我需要的东西？
请注意：
1) 表单 ID 未知，因为按钮是复合组件的一部分，可以由不同视图中的任何表单托管
2) 在我的示例中，`<p:overlayPanel>`不得更新其本身，但任何后代组件都可以。
3）视图中有不止一种形式，我应该只处理“当前”的一种。

提前感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:03:15.103

[PrimeFaces 选择器](http://www.primefaces.org/showcase/ui/selectors.jsf)`this`中没有这样的东西。PrimeFaces 选择器中绝对没有 jQuery 函数可用。它只是一个纯[jQuery 兼容的 CSS 选择器](http://api.jquery.com/category/selectors/)，而不是一些 JavaScript 代码。`$.closest()`

```
<p:commandButton ... update="@(form :not(.noupdate))"/> 
```

### 也可以看看：

*   [如何在父组件的ajax更新中排除子组件？](https://stackoverflow.com/questions/12614882/how-to-exclude-child-component-in-ajax-update-of-a-parent-component/)

# python - 异步 DNS 解析器测试

> ID：15790165
> 
> 赞同：2
> 
> 时间：2013-04-03T14:28:29.167
> 
> 标签：python, twisted

我想测试大量 IP 以寻找开放的 DNS 解析器。我正在尝试找到最有效的方法来并行化它。目前我正试图通过扭曲来实现这一点。我希望有 10 或 20 个并行线程发送查询以避免阻塞槽超时。

Twisted 有一个似乎合适的 DNSDatagramProtocol，但我只是不知道如何将它与扭曲的“反应器”和“线程”设施组合在一起以使其高效运行。

我阅读了很多扭曲的文档，但我仍然不确定什么是最好的方法。

有人可以举例说明如何实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:43:47.347

这是一个演示 Twisted Names API 的快速示例：

```
from sys import argv
from itertools import cycle
from pprint import pprint

from twisted.names import client
from twisted.internet.task import react
from twisted.internet.defer import gatherResults, inlineCallbacks

def query(reactor, server, name):
    # Create a new resolver that uses the given DNS server
    resolver = client.Resolver(
        resolv="/dev/null", servers=[(server, 53)], reactor=reactor)
    # Use it to do an A request for the name
    return resolver.lookupAddress(name)

@inlineCallbacks
def main(reactor, *names):
    # Here's some random DNS servers to which to issue requests.
    servers = ["4.2.2.1", "8.8.8.8"]

    # Handy trick to cycle through those servers forever
    next_server = cycle(servers).next

    # Issue queries for all the names given, alternating between servers.
    results = []
    for n in names:
        results.append(query(reactor, next_server(), n))
    # Wait for all the results
    results = yield gatherResults(results)
    # And report them
    pprint(zip(names, results))

if __name__ == '__main__':
    # Run the main program with the reactor going and pass names
    # from the command line arguments to be resolved
    react(main, argv[1:]) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T14:31:13.927

尝试 gevent，生成许多 greenlet 来进行 DNS 解析。gevent 也有一个不错的 DNS 解析 API：[http ://www.gevent.org/gevent.dns.html](http://www.gevent.org/gevent.dns.html)

他们甚至有一个例子： [https ://github.com/gevent/gevent/blob/master/examples/dns_mass_resolve.py](https://github.com/gevent/gevent/blob/master/examples/dns_mass_resolve.py)

# objective-c - 表达式结果未使用警告但不想使用它

> ID：15790168
> 
> 赞同：0
> 
> 时间：2013-04-03T14:28:31.577
> 
> 标签：objective-c, xcode, macos, cocoa

我得到一个未使用的表达式结果，原因很明显，但我想以最干净的方式避免这个警告：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [_window setReleasedWhenClosed:TRUE];
    [_window close];
    [[HotkeyHandler alloc] init:self];
} 
```

HotkeyHandler 是另一个主要监听热键的类。我只需要初始化它，这就是它需要做的一切。我不使用它的任何方法，因为这些方法将由系统通知触发。关于规避此警告的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:31:22.210

问题是，一旦您离开该方法，您创建的实例将被释放，因此它将无法收听通知。你为什么不让那个类成为单例？

# java - Java clone() 方法是实现多态克隆的唯一方法吗？

> ID：15790171
> 
> 赞同：6
> 
> 时间：2013-04-03T14:28:35.083
> 
> 标签：java, clone, deep-copy, cloneable

我需要为我的班级配备多态克隆（深拷贝），即我需要这样的东西才能工作：

```
SuperType original = new SubType();
SuperType copy = original.clone(); 
```

where`original.clone()`可以被任何机制替代以创建深层副本，并且实际类型`copy`应为`SubType`，因为`original`也是`SubType`.

`clone()`方法和接口是`Cloneable`实现这一目标的唯一方法吗？工厂方法和复制构造函数不能被使用，因为实际的类只在运行时才知道，对吧？[除了那些序列化反序列化方法以及恕我直言的Java深度克隆库](http://code.google.com/p/cloning/)比该方法更糟糕的黑魔法之外，还有其他建议的`clone()`方法吗？

谢谢，彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:45:13.843

实际上 Object 的`clone()`方法不允许你做任何多态调用，因为 is `protected`. 实现`Cloneable`也没有用，因为它不包含`clone()`方法。

您可以通过为克隆的类提供多态方法来进行多态克隆，该方法反过来调用复制构造函数。

```
abstract class SuperType {
    public SuperType(SuperType t) {
    }

    public abstract SuperType deepCopy();
}

class SomeType extends SuperType {

    SomeType(SomeType t) {
        //copy constructor
    }

    @Override
    public SomeType deepCopy() {                        
        return new SomeType(this);
    }
}

 ...

SuperType original = new SubType();
SuperType copy = original.deepCopy(); //the deepCopy is called on children classes 
```

也可以看看：

[Joshua Block 对克隆与复制构造函数的看法](http://www.artima.com/intv/bloch13.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T23:20:22.983

为了使您的代码工作，该代码要么在`SuperType`类或子类中，要么您的`SuperType`类型必须具有公共`clone()`方法。公共`clone()`方法不会自动存在，您必须实现它。就此而言，您可以将其称为其他任何名称，例如`copy()`.

那么，您的问题是如何实现该`clone()`（或您所称的）方法，以便它进行多态克隆。

Java 开发人员的意图是调用`super.clone()`，假设继承层次结构中的所有类都类似地实现`clone()`以执行多态克隆。这最终得到了受保护的`Object.clone()`方法，它具有多态克隆的魔力。请注意，`Object.clone()`为了不引发异常，您的类必须实现`Cloneable`接口。

但是，还有其他可能的方式。例如，假设所有子类都有一个默认构造函数，您可以执行类似`this.getClass().newInstance()`. 这将创建正确类的对象，但不会复制字段。您的克隆方法将需要复制所有字段，子类必须覆盖您的克隆方法以复制其字段等。请注意，`Cloneable`在这种情况下是否实现接口无关紧要。

另一种方法是，假设类是可序列化的，序列化和反序列化`this`。这应该创建一个包含所有可序列化字段的多态克隆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:38:10.557

您可以简单地为 SuperType 添加一个复制方法并在所有 SubTypes 中实现它

```
class SuperType {

    public SuperType copy() {
              ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:42:01.670

如果你不喜欢这个`Cloneable`界面，你可以创建自己的界面。每个类将负责创建正确类型的新实例。

# android - facebook 扩展权限

> ID：15790178
> 
> 赞同：1
> 
> 时间：2013-04-03T14:28:44.307
> 
> 标签：android, facebook, facebook-javascript-sdk

我有一个 facebook android 应用程序。在这个应用程序中有登录（具有相对权限）。第二次我想制作一个 facebook 共享。问题是出现另一个权限（显然）..我希望这似乎只有一个权限......如何？我在 facebook 控制台中添加了 publish_stream，但没有结果！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:51:22.890

您不能将它们都定义为登录按钮

如果要发布，则需要从当前打开的会话中“询问”更多权限

喜欢：

```
private void requestPublishPermissions(Session session) {
    if (session != null && !session.getPermissions().contains("publish_actions")) {
        System.out.println("SEESION Permission");
        Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(mainFragment, Arrays.asList("publish_actions"));
        // demonstrate how to set an audience for the publish permissions,
        // if none are set, this defaults to FRIENDS
        //  .setDefaultAudience(SessionDefaultAudience.FRIENDS);
        session.requestNewPublishPermissions(newPermissionsRequest);
    }
} 
```

有关权限的更多信息，请访问：

[https://developers.facebook.com/docs/reference/android/3.0/LoginButton/#setReadPermissions(List)](https://developers.facebook.com/docs/reference/android/3.0/LoginButton/#setReadPermissions(List))

# maven - 使用 build-helper-maven-plugin 将树添加到源 JAR

> ID：15790188
> 
> 赞同：0
> 
> 时间：2013-04-03T14:28:56.683
> 
> 标签：maven, build-helper-maven-plugin

我在 main/src/env/dev、qa、prod 等中有我的环境特定属性文件，我想将它们包含在我的 myProject-sources.jar 中。我想不通的是如何让“env”文件夹被包含在内。现在，我直接在源 jar 的根目录中获取 dev、qa 和 prod 文件夹。

这是我的插件配置的样子：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>add-environment-specific-properties</id>
            <phase>process-sources</phase>
            <goals>
                <goal>add-source</goal>
            </goals>
            <configuration>
                <sources>
                    <source>${basedir}/src/main/env</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我不能只指定 /src/main，因为那里还有其他我不想包含的文件夹。

我希望我只是遗漏了一些简单的东西，而不是我必须以某种方式放置一堆排除项来跳过所有我不想要的东西。

# c# - 如何解决“邮箱不可用。服务器响应为：5.7.1 ....”

> ID：15790194
> 
> 赞同：1
> 
> 时间：2013-04-03T14:29:09.773
> 
> 标签：c#, asp.net, smtp

收到以下错误消息。

“邮箱不可用。服务器响应为：5.7.1：客户端主机被拒绝：邮件被拒绝：收到无法投递的电子邮件。”

提交表单后，这发生在带有 IIS 6.0 的 Windows 2003 服务器上托管的 .net 网站上。

# c++ - 不同类的访问成员

> ID：15790196
> 
> 赞同：0
> 
> 时间：2013-04-03T14:29:14.970
> 
> 标签：c++

我有 2 个类，如下所示：

```
class A : public C
{
void Init();
};

class B : public C
{
int a = 3;
}; 
```

我如何访问 A 类中 B 类的成员？

```
class A::Init()
{
 class B. a  ???
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:44:10.663

Perhaps you want a static member, which you can access without an object of type `B`?

```
class B : public C
{
public:
    static const int a = 3;
}; 
```

Now you can access it from anywhere (including your `A::Init` function) as `B::a`.

If that's not what you want, then please clarify the question.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:46:26.723

如果您想将 B 类的“属性”作为全局访问，而不是特定对象，则在此类中将变量设为静态

```
class B : public C
{
public:
    static const int a = 0;
}; 
```

并使用`B::a`

* * *

或者：

```
class A{
public:
    void init(){
        static int a2 = 0;
        a1=a2;
    }
    int a(){return a1;}
private:
    static int a1;
};
int A::a1=0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:30:08.747

您必须创建一个实例`class B`并声明变量 public

```
class B : public C
{
    public:
    int a=3;//Data member initializer is not allowed in Visual Studio 2012, only the newest GCC
};

void A::Init()
{
 B b;
 b.a= 0;
} 
```

如果您不想创建 的实例`class B`，请声明变量 static

```
class B : public C
{
public:
    static int a = 3;
}; 
```

然后像这样访问它：

```
void A::Init()
{
   B::a=0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T08:35:45.020

你也可以尝试在你的类中添加静态函数。但我不确定这是否是你要找的。

```
class B: public C
{
public:
    static int GetA(void) {return a;}
private:
    static int a;
};
int B::a = 4;

class A: public C
{
public:
    void Init()
    {
    std::cout<<"Val of A "<<B::GetA()<<std::endl;
    }

private:
    int b;
}; 
```

# javascript - 显示数组中的下一个对象值

> ID：15790206
> 
> 赞同：1
> 
> 时间：2013-04-03T14:29:27.860
> 
> 标签：javascript

我有一个包含两个对象的数组。当用户按下按钮时，我希望显示特定对象属性的下一个值。

这是我的数组：

```
var allQuestions = [{
    question: "This is question number one",
    choices: ["one", "two", "three", "four"],
    correctAnswer: "two"
}, {
    question: "This is question number two",
    choices: ["dog", "cat", "bear", "lion"],
    correctAnswer: "bear"
}]; 
```

当按下按钮时，我想显示下一个“问题”实例。

这是我切换问题的功能：

```
function switchQuestion() {

    var singleQuestion = 0;

    if(singleQuestion >= allQuestions.length) {
        singleQuestion == 0;
    } else {
        singleQuestion == ""; // not sure what should go here
    }

    document.getElementById('question').innerHTML = allQuestions[singleQuestion].question;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:32:54.447

您需要将问题索引范围限定在函数之外，每次单击按钮时递增，并在超出数组边界时将其重新分配回 0：

```
var questionIndex = 0;
function switchQuestion() {
  if(++questionIndex >= allQuestions.length) {
    questionIndex = 0;
  }

  document.getElementById('question').innerHTML = allQuestions[singleQuestion].question;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:32:11.537

在这段代码中：

```
if(singleQuestion >= allQuestions.length) {
        singleQuestion == 0;
    } else {
        singleQuestion == ""; // not sure what should go here
    } 
```

使用`=`而不是完成分配`==`：

```
if (singleQuestion >= allQuestions.length) {
    singleQuestion = 0;
} else {
    singleQuestion = singleQuestion + 1; // increment
} 
```

增量也可以通过以下简短形式实现：

```
singleQuestion++; 
```

整个表达式也可以通过使用模数计算来替换：

```
singleQuestion = (singleQuestion + 1) % allQuestions.length; 
```

最后，变量 singleQuestion 必须在函数之外定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:34:05.407

您需要将 currentQuestion 存储在某处，然后在单击时将其递增

```
 var singleQuestion = 0;

  function switchQuestion() {

  if(singleQuestion >= allQuestions.length) {
      singleQuestion == 0;
   } else {
    singleQuestion +=1; 
   }

document.getElementById('question').innerHTML = allQuestions[singleQuestion].question;

 } 
```

目前，您将在每次点击时将其重置为 0，并且仅根据长度显示第一个或第二个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:53:09.767

这是一个[JSFiddle](http://jsfiddle.net/KEK8C/)示例，它显示了您的脚本的可能实现。

我建议只使用一个全局对象。
并使用`.createElement()`而不是`.innerHTML()`. 这是一个[讨论](https://stackoverflow.com/questions/2946656/advantages-of-createelement-over-innerhtml)。

简而言之：

```
var myGlobalVar = {
    singleQuestion: 0,
    nextButton: document.getElementById("nextQstBtn"),
    questionHolder: document.getElementById("questionHolder"),
    allQuestions: [qstObjOne, qstObjTwo, qstObjThree],

    switchQuestion: function () {
        myGlobalVar.singleQuestion += 1;
        if (myGlobalVar.singleQuestion === myGlobalVar.allQuestions.length) {
                myGlobalVar.singleQuestion = 0;
        }
        myGlobalVar.showQuestion(myGlobalVar.singleQuestion);
    },
    showQuestion: function (qstNum) {
        // Implementation
    },
    init: function () {
        // Script initialisation
        // Attaching events, etc.
};

myGlobalVar.init(); 
```

# android - 使用webview在android中进行视频流

> ID：15790210
> 
> 赞同：-2
> 
> 时间：2013-04-03T14:29:38.260
> 
> 标签：android

在我的应用程序中，我想从 url 流式传输视频。视频播放完美。当用户单击该 web 视图时，它重定向到视频的 url 并显示警报对话框“使用完成操作”，用户可以通过单击选项 Internet 下载该视频。我想限制这意味着用户只能观看该视频，但可以不要下载那个。我希望用户使用 android 默认播放器观看该视频。提前致谢。

```
 public class PlayVideo extends Activity {

    private String vUrl, vName;
    private WebView webView;
    Button back, home;
    TextView videoName;
    Vibrator vibrator;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        // For full screen
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.videoplay);
        webView = (WebView) findViewById(R.id.webView01);
        back = (Button) findViewById(R.id.bBack);
        home = (Button) findViewById(R.id.bHome);
        videoName = (TextView) findViewById(R.id.tvVidName);
        // for vibration when a button clicked
        vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        // getWindow().setFormat(PixelFormat.TRANSLUCENT);

        back.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                vibrator.vibrate(40);
                finish();
            }
        });

        vName = getIntent().getStringExtra("videoname");
        videoName.setText(vName);
        vUrl = getIntent().getStringExtra("vid_url");
        webView.setWebChromeClient(new WebChromeClient());
        webView.getSettings().setPluginState(WebSettings.PluginState.ON_DEMAND);
        webView.getSettings().setJavaScriptEnabled(true);
        Log.i("fired url", vUrl);
        webView.loadUrl(vUrl);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:37:35.560

您可以通过启动用于流式传输视频的特定应用程序来做到这一点。

**但请注意：**

*   只有 1 个合适的视频应用程序的用户不会看到该对话框。
*   此外，已设置默认视频应用程序的用户也不会看到该对话框。

因此，我不会限制自己，通过启动特定的视频应用程序，而是让安卓用户拥有良好的安卓体验。

***如果***您有***充分的***理由启动特定的视频播放器，您可以使用：

```
try {
    Intent intent = new Intent("com.mxtech.videoplayer.ad"); // Will launch MX player
    intent.setDataAndType(Uri.parse("your_path"), "video/*");
    startActivity(intent);
} catch(ActivityNotFoundException e){
    // the app mxplayer was not found...
    Toast.makeText(this, "mx player is not installed", Toast.LENGTH_SHORT).show();
} 
```

# silverlight - 谷歌浏览器的 Silverlight iframe 问题 - 适用于 Firefox 和 IE

> ID：15790212
> 
> 赞同：0
> 
> 时间：2013-04-03T14:29:41.637
> 
> 标签：silverlight, google-chrome, iframe

我有一个应用程序，内置 Silverlight，我通过 iframe 调用它。

在 IE 中，firefox 应用程序按钮可以工作，但在 google chrome 中它们没有..

我正在拔头发，并认为这是 Google Chrome 中的一个错误。

有没有人有任何想法/建议？

网址： http: [//gotek.dev.pixel-geeks.co.uk/](http://gotek.dev.pixel-geeks.co.uk/)

点击“点击这里试用我们的直播面板！” 按钮查看问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T17:08:36.090

这是谷歌之前修复的 Chrome 错误，但又再次出现。

有报道说它只影响应用程序在无窗口模式下运行。

# sql - MS Access SQL 选择日期范围

> ID：15790213
> 
> 赞同：2
> 
> 时间：2013-04-03T14:29:41.923
> 
> 标签：sql, ms-access

我需要选择一个包含日期的记录（范围：从 1998 年到 1999 年）。我写了似乎确实有效的声明。为什么？

```
SELECT *
FROM Factory
WHERE 
(EXTRACT(YEAR FROM date) AS dyear) BETWEEN '1998'  AND '1999' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:31:35.270

您可以使用`YEAR()`从日期获取年份。

```
SELECT *
FROM   Factory
WHERE  YEAR(date) BETWEEN 1998 AND 1999 
```

*   [MSAccess 年（）](http://www.techonthenet.com/access/functions/date/year.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:44:19.190

如果表包含数千行，则对其中的*每一*行应用该`Year()`函数将是一个明显的性能挑战。（实际上，对于较小的表来说，这也是一个性能挑战，但在这种情况下您不太可能注意到命中。）更有效的方法是索引字段并使用索引检索来限制数据库引擎的工作负载.*`Factory``[date]`*

 *```
SELECT f.*
FROM Factory AS f
WHERE f.date >= #1998-1-1# AND f.date < #2000-1-1#; 
```

只要有可能，设计您的查询以利用索引检索。这可以显着提高性能。作为一个简单的经验法则：索引检索 = 好；全表扫描=坏。尽可能避免全表扫描。*

# java - Java Tetris - 考虑块旋转

> ID：15790214
> 
> 赞同：10
> 
> 时间：2013-04-03T14:29:45.157
> 
> 标签：java, swing

我正在构建俄罗斯方块并试图思考我应该如何旋转碎片。

它们是在一个块上旋转吗？或者他们应该变形......也就是交换位置？

![在此处输入图像描述](https://i.stack.imgur.com/rRmqW.png)

我正在考虑这样做的方式是硬编码......就像（伪代码）：

```
if (rotateRight()) {

    if (Piece == "T") {
        if (Piece.getCurrRotation() == down (aka.. 180 degrees))
          move each Tile in Piece from the down rotation to the left rotation... each coordinate would be pre-specified for a given condition... aka lot's of hardcoding
     }
    if (Piece == "L") { etc...

     }
}
if (rotateLeft()) {
     perform same checks for the Left...
} 
```

但这似乎是大量的代码，只是为了弄清楚

首先）当前件在哪个旋转（每件有4个可能的旋转）

其次）从那里...将其设置为基于该部分的新硬编码坐标

我必须为每一件作品都这样做......这似乎是错误的思考方式。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:36:39.380

如果您将片段存储为矩阵，则可以使用通用函数旋转矩阵。假设您要将 [[1, 1, 1], [0, 0, 0], [0, 0, 0]] 向左旋转 90 度 -> [[1,0,0], [1,0 ,0]，[1,0,0]]。这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:45:39.293

您有 2 个选项（取决于您存储形状的方式）：

*   通过重新定位形状块来执行旋转运行时（将形状点保持在矩阵中，并围绕中心旋转）。
*   为形状存储 4 个（或者对于旋转不变的形状，2 个甚至 1 个）相位，并且只增加/减少形状所在的相位。

在第一个版本中，您必须计算运行时间、找到形状的中心等。

在第二个版本中，您必须进行预先计算，并对形状进行硬编码。

我认为第二种方法更好，因为您有固定数量的零件和固定数量的阶段。但这取决于你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:56:56.257

对于每个 PieceType 对象，我可能会有 1-4 个 Orientation 对象。然后每个方向将定义实际块的位置（相对于某个枢轴）。例如

```
PieceType "L":

    Orientation 1:
    #
    #
    ##

    Orientation 2:
    ###
    #

    Orientation 3:
    ##
     #
     #

    Orientation 4:
      #
    ###

PieceType "I":

    Orientation 1:
    #
    #
    #
    #

    Orientation 2:
    #### 
```

每个 PieceType 还可以保存有关每个可能的“方向变化”（即旋转）所需空间的信息。这都是静态信息，所以在游戏过程中真的不需要移动方块。只需改变棋子的方向，让方向对象告诉你块的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T18:56:31.503

该示例代码看起来像是一场噩梦。

另一种非常简单的方法是将棋盘视为固定数量的单元，然后将每次“旋转”视为计算每块位置应移动多少的一种方式，然后重新安装就像是这些碎片，然后让他们自己画，所以从碎片的角度来看，他们只是被告知：'好吧，你现在在 A5。

如果您查看第一个示例，则新位置只是它们当前与中心的偏移量和所需旋转方向的函数。

这种方法最好的一点是，您不会到处跑来跑去做大量可怕的案例陈述，并制作完全不可持续的上帝目标代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:37:17.760

恕我直言，最简单的方法不是旋转或变换块，而是记住每个状态下的块形状（正常，旋转_90_度，旋转_180_度，旋转_270_度）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T14:43:13.377

我建议您将一块定义为相对于单个旋转点的点。然后，您可以（使用一点矩阵代数）应用简单的旋转 3 次以获得相对于中心点的其他布局。

旋转然后从显示的游戏中取消设置当前点，切换到下一个旋转，然后将新点重新应用于显示的游戏。

# android - Android facebook sdk 3 - 获取访问令牌

> ID：15790224
> 
> 赞同：0
> 
> 时间：2013-04-03T14:30:22.567
> 
> 标签：android, facebook

我正在使用最新的 facebook sdk 3。我正在尝试构建一个类：

连接到 facebook（应用程序）并返回给我： 1\. 访问令牌。2.如果是第一次注册或登录。在我得到 1 和 2 之后，我不需要连接。

我将我想要的 facebook 应用程序放在字符串中，就像在 SDK 示例 SessionLoginSample 中一样。

我的代码：

```
private static class FacebookConnector implements Session.StatusCallback{

    private static FacebookConnector instance = null;
    private Fragment mFragment;

    public static FacebookConnector getInctance(Fragment fragment){
        if(instance == null){
            instance = new FacebookConnector();
        }
        instance.setFragment(fragment);

        return instance;
    }

    private FacebookConnector(){        
    }

    public Fragment getFragment() {
        return mFragment;
    }

    public void setFragment(Fragment fragment) {
        mFragment = fragment;
    }

    //Facebook fb = new Facebook("app_id");
    //fb.getAccessToken();

    public void connect(){
        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
        Session session = Session.getActiveSession();
        if(session == null){
            session = new Session(mFragment.getActivity());
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(mFragment).setCallback(this));
            }
        }
    }

    @Override
    public void call(Session session, SessionState state, Exception exception) {
        String token = session.getAccessToken();
        System.out.println(token);
    }

} 
```

我有一个例外：

```
4-03 17:25:47.651: E/AndroidRuntime(689): FATAL EXCEPTION: main
04-03 17:25:47.651: E/AndroidRuntime(689): java.lang.NullPointerException: Argument 'applicationId' cannot be null
04-03 17:25:47.651: E/AndroidRuntime(689):  at com.facebook.internal.Validate.notNull(Validate.java:29)
04-03 17:25:47.651: E/AndroidRuntime(689):  at com.facebook.Session.<init>(Session.java:224)
04-03 17:25:47.651: E/AndroidRuntime(689):  at com.facebook.Session.<init>(Session.java:209) 
```

也许有更简单的解决方案？

# android - 无效登录时的 JSON Web 服务问题

> ID：15790234
> 
> 赞同：0
> 
> 时间：2013-04-03T14:31:02.800
> 
> 标签：android, android-intent

我有 JSON Web 服务，当有效和无效登录时，Web 服务的节点名称会发生​​变化。

我已经编写了有效 Web 服务的代码。现在当无效登录当时节点名称发生变化时，那么**如何识别有效和无效的身份验证？**

有效登录

```
{
root: [
{
Login: {
uid: "1",
uname: "aaa",
email: "aaa@far.com",
}
}
]
} 
```

登录无效

```
{
root: [
{
Result: {
Result: "Login failed"
}
}
]
} 
```

有效登录时代码正在工作，**我的问题是当登录无效时如何检查**？

因为节点名称从“登录”更改为“结果”

```
 Toast.makeText(getApplicationContext(), result,
          Toast.LENGTH_LONG).show();

        Log.e("log_tag", "root :" + result.toString());

        JSONObject json_data = new JSONObject(result);

        String root = json_data.getString("root");

        Toast.makeText(getApplicationContext(), root, Toast.LENGTH_LONG).show();

        JSONArray json_array = new JSONArray(root);

        json_data = json_array.getJSONObject(0);

        String Login = json_data.getString("Login");

        Toast.makeText(getApplicationContext(), Login, Toast.LENGTH_LONG).show();

        json_data = new JSONObject(Login);

        String email = json_data.getString("email");

        Toast.makeText(getApplicationContext(), email, Toast.LENGTH_LONG).show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:36:48.440

以这种方式解析和读取结果：

```
JSONObject json_data = new JSONObject(result);
JSONObject root = json_data.getJSONArray("root").getJSONObject(0);
if (root.has("Result")) {
    JSONObject loginRes = root.getJSONObject("Result");
    if (loginRes.has("Result")) {
         String status = loginRes.getString("Result");
         if (status.equalsIgnoreCase("Login failed")) {
             // LOGIN FAILED!
         }
    }
} 
```

注意：您的 JSON 格式似乎很差（逻辑上），并且包含一些不必要的项目。您可能想要简化它。

# scala - 获取更新的不可变对象的更短方法？

> ID：15790235
> 
> 赞同：3
> 
> 时间：2013-04-03T14:31:10.423
> 
> 标签：scala

我有一个带有几个参数的类，例如`class Building(val a: Int, val b: Int, val c: Int)`. 我必须更新的这段代码是这样的：

```
def updatedA(a: Int): Building = new Building(a, this.b, this.c)
def updatedB(b: Int): Building = new Building(this.a, b, this.c) 
```

有没有更短的方法来获取更新的对象，如下所示？

```
def updatedA(newA: Int): Building = new { val a = newA } extends this // doesn't compile/ type is AnyRef instead of Building 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:34:06.440

你看过`copyWith()` [构造机制](http://www.jayconrod.com/posts/32/)吗？

> copyWith 方法利用了 Scala 2.8 的默认参数。对于类中的每个字段，它都有一个默认为当前值的参数。未指定的任何参数都将采用其原始值。我们可以使用命名参数调用该方法（也在 Scala 2.8 中）。
> 
> val newJoe = joe.copyWith(phone = "555-1234")

或者查看案例类的[复制机制](http://daily-scala.blogspot.co.uk/2010/01/case-classes-in-28.html)。

> /* 真正强大的是在案例类中自动生成的复制构造函数。我可以使用复制构造函数并声明要修改的字段来修改任何或所有属性的副本 */
> 
> scala> parent.copy(right = Some(node))

# android - 应用中的亮度

> ID：15790240
> 
> 赞同：2
> 
> 时间：2013-04-03T14:31:22.597
> 
> 标签：android, screen-brightness

我通过这种方法在我的应用程序中选择亮度

```
public void setBrightness(Context context, int progress) {
        float BackLightValue = (float) progress/100;
        WindowManager.LayoutParams layoutParams = ((Activity) context).getWindow().getAttributes();

        if (BackLightValue == 0.0) {
            BackLightValue = 0.01f;
        }

        layoutParams.screenBrightness = BackLightValue;
//        layoutParams.screenBrightness = progress;
        ((Activity) context).getWindow().setAttributes(layoutParams);

    } 
```

此代码有效，但如果我去另一个活动亮度设置回到以前。

如何在所有应用程序中更改亮度？或者我必须在所有活动的 oncreate 方法上恢复它？

# sql-server - 使用带有数据映射器的 jruby 编码不正确

> ID：15790245
> 
> 赞同：1
> 
> 时间：2013-04-03T14:31:33.350
> 
> 标签：sql-server, jdbc, jruby, datamapper

我正在尝试使用 jruby 和 datamapper 从 2008r2 MSSql 服务器获取数据。
到目前为止，我遇到的唯一问题是 jruby 中的正确字符编码。
数据库使用 Polish_CI_AS 排序规则，测试字段填充：`"ą ę ś ć"`.
从 jruby 中获取该字段会导致：`"uFFFD uFFFD uFFFD uFFFD"`这是 utf-8 的默认替换字符串。
我尝试将 -E 变量设置为 windows-1250，它会更改显示的字符，但与在 Utf-8 中它们的显示方式相同。还尝试包含 # encoding: Windows-1250，但它也无济于事。
我很确定它与数据映射器或数据库连接有关，但 jdbc 不支持（AFAIK）编码变量。

**更新**

我的连接字符串：`DataMapper.setup(:default, 'sqlserver://servername/database;instance=InstanceName;domain=DOMAIN')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:18:20.153

该连接适用于 MS JDBC，datamapper 使用默认使用 UTF8 编码的 jTDS。

我检查了 jTDS 文档，发现我需要`charset=cp1250;`在连接字符串的末尾添加：属性。现在一切都很好。

# jquery - 尝试使用 jQuery 将选择的单选按钮的值传递给另一个函数

> ID：15790250
> 
> 赞同：0
> 
> 时间：2013-04-03T14:31:40.980
> 
> 标签：jquery, forms, radio-button

我有一个带有单选按钮组的屏幕。客户不希望它们看起来像单选按钮，所以我设置了标签的样式并隐藏了实际的单选按钮。我有 jquery 来“突出显示”选择的单选按钮，然后调用一个函数来处理用户的选择：

```
$(function() {
   $('input:radio').change(function(){
     $(this).parent().toggleClass('active', this.checked).siblings().removeClass('active');
     processStep1(this);
   });  
}); 
```

这部分工作正常，它调用函数：

```
function processStep1(v) {
  if ($("input:radio[name='challenge-type']").is(":checked")) {
    $('#step1 .next').removeClass('disabled');
    // which of the challenge-type radios was selected?
    }
 } 
```

检查以确保在“启用”下一个按钮之前检查了收音机。但是此时，我需要知道选择了哪个收音机的 VALUE，如果不第二次检查 dom，我不确定如何获得它；有没有办法可以在第一个函数的更改事件中获取它并将其传递给第二个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:35:39.380

具有输入的数据属性（在本例中为单选按钮），当您调用函数时，只需将数据属性的值传递给函数。您可以拥有每个单选按钮独有的数据属性，我认为这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:37:42.863

我创建了一个 Fiddle 来展示一个类似代码的工作示例。此代码获取复选框的值并显示在警报中。

看看这个：http: [//jsfiddle.net/Joqus/cJPzv/](http://jsfiddle.net/Joqus/cJPzv/)

```

$(function() {
   $('input:radio').change(function(){
       $(this).parent().toggleClass('active', this.checked);
       $(this).parent().siblings().removeClass('active');

       processStep1(this);
   });
});

function processStep1(v) {
    if(v.checked)
    {
        alert('Value: ' + v.value);
    }
}

```

# css - 选择以下第 n 个同级

> ID：15790256
> 
> 赞同：12
> 
> 时间：2013-04-03T14:31:56.397
> 
> 标签：css, css-selectors

我想知道是否有比我在不更改 html 结构的情况下找到的更好的解决方案

HTML 结构如下所示

```
<div class="wrap">
  <div class="divider"></div>
  <div class="block"></div>
  <div class="block"></div>
  <div class="divider"></div>
</div> 
```

所以在同一级别上有各种 DIV，我想做的是每隔四个块用不同的颜色着色，直到出现分隔线，然后它必须重新计算。

我认为类似的东西`.block:nth-child(4n)`可以解决问题，但它实际上是根据父级计算元素，而不是基于类。

这是要试用的 JSFiddle。每行中的块 #4 和 #8 应该有不同的颜色 [http://jsfiddle.net/SKgdH/3/](http://jsfiddle.net/SKgdH/3/)

这就是我让它工作的方式：http: [//jsfiddle.net/SKgdH/1/](http://jsfiddle.net/SKgdH/1/)

我所做的是像这样寻找 .divider 的第四个兄弟姐妹`.divider + .block + .block + .block + .block`

它有效，但是，我必须为第 8、12、16、.. 块编写相同的代码，这不再使其自动运行。

有类似的东西`.divider + .block:nth-sibling(4)`吗`.divider + .block:nth-of-class(4)`？

也许你们中的一个人知道如何在不更改源代码或使用 javascript 的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T14:34:01.833

这样的伪类不会起作用，因为您期望它匹配相对于不同复合选择器的元素，这不是简单选择器的工作方式。例如，如果您编写了一个复杂选择器，它只有一个带有该伪类的复合选择器（并且没有兄弟组合器）：

```
.block:nth-sibling(4n) 
```

您是否希望它匹配`.block:nth-child(4n)`、完全不匹配或无效？

能够以`+ .block + .block + .block + .block`某种方式删节并使其重复会很好，但不幸的是，由于选择器语法的设计方式，这是不可能的。

您将不得不使用 JavaScript 和/或向适当的元素添加额外的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-06T14:28:39.263

这里的问题是`:nth-of-type`指元素的类型，两者都是***type 的元素***。`.divider``.block``<div>`

您真正需要的是`.divider`成为与`.block`.

* * *

在此基础上，如果仅有的两个子元素`<div class="wrap">`是：

1.  `<div class="divider">`
2.  `<div class="block">`

我很想换掉-*主题休息*`<div class="divider">`元素。`<hr>`

 *然后你*可以*使用：

```
 .wrap div:nth-of-type(4) 
```

去风格`.block`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:48:49.350

正如 BoltClock 所解释的，没有 JavaScript 就无法做到这一点。如果您选择该路线（即使您明确表示*不*使用 JavaScript），也可以使用 jQuery 来完成，如下所示：

```
var counter = 0;
$('.wrap > div').each(function() {
    if ($(this).hasClass('divider')) {
        counter = 0;
    }
    else if ($(this).hasClass('block')) {
        counter++;
        if (counter % 8 == 4) {
            $(this).css('background-color','#ff0');
        }
    }
}); 
```

这会将每行中的第 4 列染成黄色。*

# css - 根据某些 CSJS 条件从主题设置 CSS 资源的渲染属性？

> ID：15790260
> 
> 赞同：1
> 
> 时间：2013-04-03T14:32:01.103
> 
> 标签：css, themes, xpages, xpages-ssjs

有没有办法根据一些 JavaScript 条件计算渲染属性？

例如：

> 如果 document.compactMode == "BackCompat"

我找到的所有例子；使用 SSJS #{javascript:condition;}

例如：

```
<resource rendered="#{javascript:context.getUserAgent().isIE(0,6)}">
    <content-type>text/css</content-type>
    <href>global.css</href>
</resource> 
```

它怎么能混合这样的东西：

```
<![CDATA[return document.compactMode == "BackCompat"? true: false;]]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:17:18.267

您不能使用 CSJS 来计算服务器端的东西。这在概念上是不可能的，因为 CSJS 是在浏览器中执行的，而主题是在服务器上计算的。

你可以做什么：执行一些 CSJS 并将结果发送到服务器。然后，您可以在服务器上处理此数据并为主题属性执行计算。

您可以打开一个*登录页面*，执行您的 CSJS，然后使用一些 URL 参数或 cookie 重定向到目标 XPage 或...然后您可以访问服务器端的数据。

```
<resource rendered='#{javascript:context.getUrlParameter("CSJS") == "1"}'>
   <content-type>text/css</content-type>
   <href>global.css</href>
</resource> 
```

如果您使用 URL *?CSJS=1*打开 XPage ，则会添加*global.css 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:52:30.330

也许修改 CSS 以便单个 CSS 文件处理多个浏览器会更有意义？例如，请参阅[http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

# mysql - MySQL concat - 在自定义函数中 - 不起作用

> ID：15790264
> 
> 赞同：0
> 
> 时间：2013-04-03T14:32:03.883
> 
> 标签：mysql, concat, stored-functions

我试着这样做

```
CREATE FUNCTION getOneCentOrderIds (s text) RETURNS text
BEGIN
    DECLARE no_more_orders, ent_id INT default 0;
    DECLARE ids text;
    DECLARE orders_cur CURSOR FOR SELECT entity_id FROM sales_flat_order WHERE total_due = 0.01;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_orders = 1;
    OPEN orders_cur;
        FETCH NEXT FROM orders_cur INTO ent_id;
        REPEAT
            SET ids = CONCAT(ids, ', ', ent_id);
            FETCH orders_cur INTO ent_id;
        UNTIL no_more_orders END REPEAT;
    CLOSE orders_cur;
    RETURN ids;
END$ 
```

但是当我执行该函数时我得到空值。

如果我只是删除 concat 并离开，`SET ids = ent_id`我会得到光标中的最后一个 id，如预期的那样。

我应该如何进行连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:40:42.960

上面可以简单地在查询中完成，而不是创建函数

```
SELECT group_concat(entity_id) FROM sales_flat_order WHERE total_due = 0.01; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:45:13.780

如果任何参数为 NULL，则 concat() 函数将返回 NULL。尝试

```
DECLARE ids text DEFAULT ''; 
```

这将确保对 CONCAT 的第一次调用没有 NULL 参数。

# vb.net - vb.net：测试是否在运行时注册了 com dll

> ID：15790266
> 
> 赞同：1
> 
> 时间：2013-04-03T14:32:06.263
> 
> 标签：vb.net, dll, com

如何在运行时检查 dll 是否已正确注册？目前正在尝试以下操作，但即使它已使用`regsvr32`. Assembly 类是否仅适用于系统程序集，如果可以，我自己的程序集使用什么？

```
 'check com dll connection for diagnostics
    Try
        Dim asm As Assembly = Assembly.LoadWithPartialName("mycomdll.mycomclass")
        DebugText.AppendText("DLL registered" + vbNewLine)
    Catch ex As Exception
        DebugText.AppendText("DLL test failed" + vbNewLine)
        DebugText.AppendText(ex.ToString() + vbNewLine)
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:35:57.190

```
 'check com dll connection for diagnostics
    Try
        Dim test As Object = CreateObject("mycomdll.mycomclass")
        test.mymethod(0)
        DebugText.AppendText("COM DLL registered" + vbNewLine)
    Catch ex As Exception
        DebugText.AppendText("COM test failed" + vbNewLine)
        DebugText.AppendText(ex.ToString() + vbNewLine + vbNewLine)
    End Try 
```

# php - 意外错误调用类

> ID：15790270
> 
> 赞同：1
> 
> 时间：2013-04-03T14:32:13.667
> 
> 标签：php

我使用下面的代码

```
echo "Start";
class A extends B
{
   //stuff
}

abstract class B extends C
{
   //stuff
}

abstract class C
{
   //stuff
}
echo "end"; 
```

当我运行此页面时，它没有显示任何错误，但没有执行。回显“开始”，但不回显“结束”。谁能解释我在哪里做错了？真的很需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:39:43.843

“`B`找不到类” - 这是我得到的错误。

这有效：

```
echo "Start";

abstract class B extends C
{
    //stuff
}

abstract class A extends B
{
    //stuff
}

abstract class C
{
    //stuff
}
echo "end"; 
```

# c++ - 检查单选按钮状态 winapi

> ID：15790273
> 
> 赞同：4
> 
> 时间：2013-04-03T14:32:24.043
> 
> 标签：c++, winapi, radio-button

我使用 mingw32 编译器。我创建了两个radioButton：

```
radio1 = CreateWindowExW(WS_EX_TRANSPARENT  , L"BUTTON", L"RadioButton1",
   WS_CHILD | WS_VISIBLE | BS_AUTORADIOBUTTON  ,
   0, 0, 0, 0,
   hwnd, (HMENU)ID_RADIOBTN1,
   GetModuleHandle(NULL), 0);
SendMessage(radioBtnDaily, WM_SETFONT, (WPARAM) font, TRUE);

radio2 = CreateWindowExW(WS_EX_TRANSPARENT  , L"BUTTON", L"RadioButton2",
   WS_CHILD | WS_VISIBLE | BS_AUTORADIOBUTTON  ,
   0, 0, 0, 0,
   hwnd, (HMENU)ID_RADIOBTN2,
   GetModuleHandle(NULL), 0);

SendMessage(radio1, BM_SETCHECK , (WPARAM) font, TRUE);
SendMessage(radio2,  WM_SETFONT, (WPARAM) font, TRUE); 
```

我处理检查状态，如下所示：

```
case WM_COMMAND:
    switch(LOWORD(wParam))
    {   
        case ID_RADIOBTN1:
        {
            MessageBoxW( NULL, "radio1 is checked", L"radio", MB_OK | MB_ICONERROR );
        }
        break;

        case ID_RADIOBTN2:
        {
        MessageBoxW( NULL, "radio2 is checked", L"radio", MB_OK | MB_ICONERROR );
        }
        break;
        .... 
```

但这总是在我单击单选按钮时运行，因此它不会检查状态。如何在不使用点击事件的情况下检查状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:03:47.637

使用[IsDlgButtonChecked](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761879%28v=vs.85%29.aspx)：

```
if(IsDlgButtonChecked(hwnd, ID_RADIOBTN1))
    MessageBox(NULL, "radio1 is checked")
else
    MessageBox(NULL, "radio1 is not checked") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:46:27.830

使用`BM_GETCHECK`消息或`Button_GetCheck()`宏来获取单选按钮的实际状态，例如：

```
radio1 = CreateWindowExW(WS_EX_TRANSPARENT  , L"BUTTON", L"RadioButton1",
   WS_CHILD | WS_VISIBLE | BS_AUTORADIOBUTTON  ,
   0, 0, 0, 0,
   hwnd, (HMENU)ID_RADIOBTN1,
   GetModuleHandle(NULL), 0);
SendMessage(radio1, WM_SETFONT, (WPARAM) font, TRUE);

radio2 = CreateWindowExW(WS_EX_TRANSPARENT  , L"BUTTON", L"RadioButton2",
   WS_CHILD | WS_VISIBLE | BS_AUTORADIOBUTTON  ,
   0, 0, 0, 0,
   hwnd, (HMENU)ID_RADIOBTN2,
   GetModuleHandle(NULL), 0);
SendMessage(radio2,  WM_SETFONT, (WPARAM) font, TRUE); 
```

.

```
case WM_COMMAND:
    if ((HIWORD(wParam) == BN_CLICKED)
    {
        switch(LOWORD(wParam))
        {   
            case ID_RADIOBTN1:
            {
                switch (Button_GetCheck(radio1))
                {
                    case BST_CHECKED:
                        MessageBoxW( NULL, L"radio1 is checked", L"radio", MB_OK );
                        break;

                    case BST_INDETERMINATE:
                        MessageBoxW( NULL, L"radio1 is indeterminate", L"radio", MB_OK );
                        break;

                    case BST_UNCHECKED:
                        MessageBoxW( NULL, L"radio1 is unchecked", L"radio", MB_OK );
                        break;
                }
            }
            break;

            case ID_RADIOBTN2:
            {
                switch (Button_GetCheck(radio2))
                {
                    case BST_CHECKED:
                        MessageBoxW( NULL, L"radio2 is checked", L"radio", MB_OK );
                        break;

                    case BST_INDETERMINATE:
                        MessageBoxW( NULL, L"radio2 is indeterminate", L"radio", MB_OK );
                        break;

                    case BST_UNCHECKED:
                        MessageBoxW( NULL, L"radio2 is unchecked", L"radio", MB_OK );
                        break;
                }
            }
            break;
        }
    }
    break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:46:26.787

这取决于您要检查按钮状态的事件，因此您需要某种交互（这可以是另一个事件，如窗口最小化、调整大小等或另一个线程检查但不修改控件的状态）

# java - 如何识别操作系统是Linux桌面还是Android？

> ID：15790276
> 
> 赞同：1
> 
> 时间：2013-04-03T14:32:29.450
> 
> 标签：java, android

嗨，我想知道 Android 中的操作系统在编程上是什么？我尝试的是获取“os.name”的系统属性。但它将值返回为“Linux”。但这无济于事。我想知道它是否是Android？这个怎么做？

# c# - .NET WebAPI 中的 POST 对象

> ID：15790280
> 
> 赞同：3
> 
> 时间：2013-04-03T14:32:44.463
> 
> 标签：c#, asp.net-web-api

我对 WebApi 有一个小问题。

**问题**：如果我想使用 JSON 发布模型，我可以添加任意数量的成员，只要模型中定义的成员存在。

**问题**：如果我的 Json 对象中存在未定义的成员，我如何触发异常。如果没有自定义 JsonConverter，这可以实现吗？我正在寻找的是通用解决方案，而不是针对每个不同模型的转换。

**示例**：

模型：

```
public class Person
{
    [Required]
    public string Name { get; set; }
} 
```

API 控制器：

```
public class PersonController : ApiController
{
    public HttpResponseMessage Post(Person person)
    {
        if (person != null)
        {
            if (ModelState.IsValid)
            {
                //do some stuff
                return new HttpResponseMessage(HttpStatusCode.OK);
            }
        }
        return new HttpResponseMessage(HttpStatusCode.BadRequest);

    }
} 
```

Json 帖子（正文） `{"Name":"Joe"}`--> 有效 `{"Name":"Joe","InvalidMember","test","Name","John"}`--> 也有效。在这种情况下，我想触发一个异常。因为如果你看它，它与我的模型定义不完全匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:19:44.653

您可以尝试的一件事是使用此设置：

```
config.Formatters.JsonFormatter.SerializerSettings.MissingMemberHandling = MissingMemberHandling.Error; 
```

当存在 JSON 中无法识别的额外属性时，它应该为您提供无效的模型状态。

# java - hadoop 流中的 mapred.local.dir 错误

> ID：15790281
> 
> 赞同：0
> 
> 时间：2013-04-03T14:32:48.247
> 
> 标签：java, ubuntu, hadoop, hadoop-streaming

错误：

```
hadoop_admin@ubuntu:~/hadoop$ bin/hadoop jar /home/hadoop_admin/hadoop/contrib/streaming/hadoop-0.20.0-streaming.jar -input data -output DOUT -mapper /home/balachanderp/libsvm-hadoop-master/scripts/mapperLibsvm.py -reducer /home/balachanderp/libsvm-hadoop-master/scripts/reducerLibsvm.py -file /home/balachanderp/libsvm-hadoop-master/scripts/mapperLibsvm.py  -file /home/balachanderp/libsvm-hadoop-master/scripts/reducerLibsvm.py 
packageJobJar: [/home/balachanderp/libsvm-hadoop-master/scripts/mapperLibsvm.py, /home/balachanderp/libsvm-hadoop-master/scripts/reducerLibsvm.py, /home/hadoop_admin/hadoop/hadoop-tmp/hadoop-unjar7855728852423515318/] [] /tmp/streamjob5538341312778875750.jar tmpDir=null
13/04/03 19:48:15 INFO mapred.FileInputFormat: Total input paths to process : 1
13/04/03 19:48:16 ERROR streaming.StreamJob: Error Launching job : java.io.IOException:     No valid local directories in property: mapred.local.dir
at org.apache.hadoop.conf.Configuration.getLocalPath(Configuration.java:890)
at org.apache.hadoop.mapred.JobConf.getLocalPath(JobConf.java:345)
at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:242)
at org.apache.hadoop.mapred.JobInProgress.<init>(JobInProgress.java:226)
at org.apache.hadoop.mapred.JobTracker.submitJob(JobTracker.java:2918)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:508)
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:959)
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:955)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:416)
at org.apache.hadoop.ipc.Server$Handler.run(Server.java:953)

Streaming Job Failed! 
```

我试图通过命令行运行 map-reduce python 脚本。我的命令行输入是

```
bin/hadoop jar /home/hadoop_admin/hadoop/contrib/streaming/hadoop-0.20.0-streaming.jar     -input data -output DOUT -mapper /home/balachanderp/libsvm-hadoop-master/scripts/mapperLibsvm.py 
```

我什至绑了..

```
bin/hadoop jar /home/hadoop_admin/hadoop/contrib/streaming/hadoop-0.20.0-streaming.jar     -input data -output DOUT -mapper /home/balachanderp/libsvm-hadoop-master/scripts/mapperLibsvm.py -reducer /home/balachanderp/libsvm-hadoop-master/scripts/reducerLibsvm.py -file /home/balachanderp/libsvm-hadoop-master/scripts/mapperLibsvm.py  -file /home/balachanderp/libsvm-hadoop-master/scripts/reducerLibsvm.py 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T17:56:47.807

> 13/04/03 19:48:16 ERROR streaming.StreamJob：错误启动作业：java.io.IOException：属性中没有有效的本地目录：mapred.local.dir

确保 TaskTracker、JobTracker、DataNode 和 NameNode 都正常运行。您可以使用`jps`，输出应如下所示

```
$ jps
6755 TaskTracker
7297 Jps
6149 DataNode
6393 SecondaryNameNode
5907 NameNode
6488 JobTracker 
```

`mapred.local.dir`可以留空。默认位置是`< hadoop.tmp.dir >/mapred`。

`hadoop.tmp.dir`定义`core-site.xml`如下

```
<property>
  <name>hadoop.tmp.dir</name>
  <value>/home/hduser/data/tmp</value>
  <description>A base for other temporary directories.</description>
</property> 
```

# highcharts - 点击重置缩放按钮时触发 Highcharts 图表点击事件（错误？）

> ID：15790284
> 
> 赞同：8
> 
> 时间：2013-04-03T14:32:56.903
> 
> 标签：highcharts

我在图表上有一个点击事件，但如果您使用缩放并想重置缩放，点击事件也会被触发。

我有以下图表设置：

```
$('#container').highcharts({
        chart: {
            type: 'line',
            marginRight: 130,
            marginBottom: 25,
            zoomType: 'x',
            events: {
                click: function (event) {
                    alert('chart click!');
                }
            }
        }... 
```

见工作示例：http: [//jsfiddle.net/2Y3ah/](http://jsfiddle.net/2Y3ah/)

好吧，这看起来像一个错误，或者如果它是按照设计的那样，如果单击重置缩放按钮，如何阻止单击事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:47:31.903

一个肮脏的方法可以是查看 srcElement

例如测试以下内容（检查 firstChild 是否为 null ...）

```
event.srcElement.firstChild.data === "Reset zoom" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T12:17:35.387

这是最终的解决方案。只需将以下配置设置为图表：

```
 $('#container').highcharts({
        chart: {
            resetZoomButton: {
                relativeTo: 'chart'
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:12:02.927

[您可以通过 event.target http://jsfiddle.net/2Y3ah/3/](http://jsfiddle.net/2Y3ah/3/)识别是否单击了按钮

```
 if(!($(event.target)[0].textContent))
                        alert('chart click!'); 
```

[http://api.jquery.com/event.target/](http://api.jquery.com/event.target/)

# entity-framework - 2 层 WPF 应用程序中的 POCO 实体

> ID：15790286
> 
> 赞同：1
> 
> 时间：2013-04-03T14:32:57.867
> 
> 标签：entity-framework

我需要检索大量实体图，在 UI 中对其进行操作（添加、更新、删除），然后将其全部保存回数据库。在各种 SO 问题和实验之后，我发现这种大规模的“分离图更新”方法非常有问题，所以我现在正在重新考虑我的方法。

它只是一个 2 层 WPF 应用程序，所以我现在正在考虑在用于操作实体图的 UI 期间存在一个长期运行的上下文 - 这样它就可以自动跟踪更改。但是我不确定如何在架构上解决这个问题。

该应用程序当前具有三个项目 - UI、业务层和一个用于 edmx 和生成的实体的项目。我的业务层有一个`CustomerManager`类，它公开了一个检索客户图（订单、订单行等）的方法，以及一个持久化客户图的方法。假设 UI 保持`CustomerManager`类的相同实例，因此保持相同的上下文，将跟踪对图形的更改（添加和更改实体）。

删除实体有点棘手，因为必须使用上下文来执行此操作，即：-

```
context.Set<Order>().Remove(orderToDelete); 
```

真的在寻找一些建筑方面的建议。我只是`DeleteOrder`在我的`CustomerManager`类中公开一个这样做的方法吗？鉴于我有十几种其他实体类型，我可能需要公开类似的方法来删除订单、产品等。

UI 保持同一个`CustomerManager`实例是一种明智的方法，还是有更好的方法来管理长期运行的上下文？该方法的逻辑位置`DeleteOrder`将在我的客户实体（部分）类中，但由于这些类与业务层（上下文所在的位置）位于单独的项目中，我想我不能这样做（除非我将上下文传递给 DeleteOrder 方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:42:57.867

只有当您的上下文存在于 UI 中并且 UI 直接与数据库对话以获取和保存数据时，您的长期上下文想法才会起作用。在您的 UI 和上下文之间涉及 WCF 总是会导致序列化，并且会导致实体分离 = 不跟踪更改（除非您使用 STE）。在 WCF 服务中拥有长期存在的上下文太成问题了，而且通常是不好的做法。

您是否考虑过 WCF 数据服务？它们通过使用特殊的客户端上下文在某种程度上提供客户端跟踪。

# h.264 - 如何在正在进行的 RTP 会话期间发送 h.264 参数集“带外”？

> ID：15790287
> 
> 赞同：2
> 
> 时间：2013-04-03T14:32:58.763
> 
> 标签：h.264, rtp

我正在我的应用程序中实现一个 RTSP 服务器，以通过 RTP 提供 h264 视频。我已经阅读了相关的 RFC，并花了很多时间阅读有关 h264/RTP/RTSP 的内容，而我仍然感到困惑的一点是如何在带外传输“序列参数集”和“图片参数集”。

我已阅读的文档指出，这些文件最好通过可靠的带外机制传输，但除了使用 sprop-parameter-sets 之外，我找不到任何定义*如何*将它们传输到带外的东西SDP 文件的属性。

例如，RFC 6184 Sectoin 8.4 规定：

> 参数集 NALU 可以使用三种不同的原则进行传输：
> 
> A. 在实际 RTP 会话之前使用会话控制协议（带外）。
> 
> B. 在正在进行的 RTP 会话期间使用会话控制协议（带外）。
> 
> C. 在正在进行的 RTP 会话期间，在有效载荷（带内）中的 RTP 数据包流内。

...

> 建议在会话控制协议中实现原则 A 和 B……第 8.2.2 节详细讨论了使用媒体类型参数 sprop- 在 SDP Offer/Answer 中传输参数集的带内或带外。 parameter-sets ... 本节包含关于如何在会话控制协议中实现原则 A 和 B 的指南。

...

> 可以使用原则 B 和 C 在会话的生命周期内添加或更新参数集。

我已阅读第 8.2.2 和 8.4 节，但找不到任何关于如何实现方法“B”的描述。我读过的关于这个主题的所有内容都非常模糊，例如，维基百科对这个主题有以下说法：

> 在其他应用中，使用比视频通道本身更可靠的传输机制来“带外”传送参数集可能是有利的。

我在这里想念什么？是否有其他标准可以通过 RTSP 传输？RTCP？

# java - 集中式日志记录 - 跨服务器关联消息

> ID：15790288
> 
> 赞同：0
> 
> 时间：2013-04-03T14:33:01.227
> 
> 标签：java, logging, log4j, javaagents, logstash

我们有一个非常分布式的系统。用户在站点上的请求可能涉及对多个服务的调用。例如，当用户登录网站时，会调用广告服务、个性化服务、相关新闻服务等，以构建登录时显示所需的数据。高级设计：对 URL 的请求被映射到 Spring MVC 控制器，并且该控制器对不同的服务进行调用（大多数使用 HttpClient）。

我们正在使用 Logstash、ElasticSearch、Kibana、Log4j/SLF4J 实施集中式日志解决方案。当网站上报告问题时，我们希望能够更改日志级别以进行调试并查看所有服务中特定请求的日志消息。我们在 Log4j MDC 中填充请求 ID，因此我们能够识别 webapp 服务器上该特定请求的日志消息。如何关联来自对其他服务的调用的消息？

流程：用户登录 --> 请求映射到 Spring MVC 控制器，该控制器通过在 Log4j MDC 中填充请求 id 来记录消息 --> http 客户端调用服务 1、服务 2、服务 3

如何将来自 service1、service2、service3 的消息与 MVC 控制器记录的消息相关联。一种解决方案是在 http 客户端调用中传递请求 ID。有很多应用程序遵循这种范式，因此到处更改代码并不是一个理想的解决方案。

**更新1：**

我对jvm代理了解不多，但我想知道是否可以开发自定义代理来拦截网络调用并添加参数。接收方的客户代理将检测到参数并将其添加到 ThreadLocal 变量中。Dynatrace PurePath 技术以某种方式关联跨 JVM 的调用——它们需要注入他们的 jvm 代理，所以我猜他们正在拦截代理中的调用。看看这个[视频](http://www.youtube.com/watch?v=KCSFr8hV2zc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:19:36.020

您将不得不硬着头皮将请求 ID 添加到 HTTP 客户端调用中。如果您不想污染您的 API，请将其添加为自定义 HTTP 标头，然后在服务端使用某种 HTTP 拦截器提取它（取决于您使用的 Web 服务堆栈），然后重新添加它到 MDC。

# c# - 使用 c# 和 asp.net 在 ms crm4 中检索单个实体的 nvarchar 字段

> ID：15790289
> 
> 赞同：0
> 
> 时间：2013-04-03T14:33:02.933
> 
> 标签：c#, dynamics-crm-4, nvarchar

到目前为止，这是我的代码，我试图检索 kez_customparamvalue 的 nvarchar 字符串值。通常对于小数或浮点 id 使用类似 CrmDecimalProperty hoursAsCrmNumber = hours as CrmDecimalProperty; 但我不确定在 nvarchar 的情况下该怎么做。

```
public string Retrieve_SC_Target_Rate()
    {

        try
        {

            // Create the retrieve target.
            TargetRetrieveDynamic targetRetrieve = new TargetRetrieveDynamic();

            // Set the properties of the target.
            targetRetrieve.EntityName = EntityName.kez_custimizationpararmeter.ToString();
            targetRetrieve.EntityId = new Guid ("D739150F-F68B-E211-AD2B-00155D011F06");

            // Create the request object.
            RetrieveRequest retrieve = new RetrieveRequest();

            // Set the properties of the request object.
            retrieve.Target = targetRetrieve;

            // Create the column set object that indicates the properties to be retrieved.
            ColumnSet cols = new ColumnSet();
            cols.Attributes = new string[] { "kez_customparamvalue" };
            // Set the properties of the column set.
            retrieve.ColumnSet = cols;

            // Indicate that the BusinessEntity should be retrieved as a DynamicEntity.
            retrieve.ReturnDynamicEntities = true;

            // Execute the request.
            RetrieveResponse retrieved = (RetrieveResponse)svc.Execute(retrieve);

            // Extract the DynamicEntity from the request.
            DynamicEntity entity = (DynamicEntity)retrieved.BusinessEntity;

            Property paramValue = entity.Properties.Where(p => p.Name == "kez_customparamvalue").FirstOrDefault();

            if (paramValue != null)
            {                    
                // reutrn the nvarchar value of paramValue

            }
            return "The value is ";  // + param value 

        }
        catch (Exception e)
        {
            // The variable 'e' can access the exception's information.
             return e.StackTrace.ToString();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:49:10.080

我不得不使用返回正确值的 StringProperty，希望这会有所帮助。

```
if (paramValue != null)
            {
                // reutrn the nvarchar value of paramValue
                StringProperty stringParamValue = paramValue as StringProperty;
                return stringParamValue.Value;
            } 
```

# linux - 在 Linux 和 OS X 中使用 Adob e 的 Flash 播放器的套接字响应时间很慢

> ID：15790290
> 
> 赞同：0
> 
> 时间：2013-04-03T14:33:04.867
> 
> 标签：linux, macos, actionscript-3, sockets

我正在尝试使用 as3 中的套接字构建一个简单的延迟计。使用 Chromes Flash 播放器时，它可以在 Windows 和 Linux 和 OS X 上的 Chrome 中正常工作。但是当我在 Linux 或 OS X 上使用 Adob​​es Flash 播放器时，结果却很糟糕。

我的客户端设置是通过 100 Mbit/s 交换机限制 1 Gbit/s 互联网连接。在服务器端，我有一个 1 Gbit/s 互联网连接上的 Apache Web 服务器。

我下载了一个小 txt 文件，测量从我们发送 http-request 到我收到来自 Web 服务器的答复之间的时间。在测量响应时间时，使用数据包分析器，我平均为 1 毫秒，因此是基线。

所有测试均在版本 11.6.602.180 上执行，但 Ubuntu 上的 Adob​​e Flash 播放器是 11.2 r202 版本。Firefox 19.0.2 上的 Adob​​e Flash 播放器（对其他浏览器进行了类似的测试）和 Chrome 26.0.1410.43 上的 Google Flash 播放器。操作系统为 Windows 7 Enterprise（64 位）、Mac OS X 10.6.8（64 位）和 Ubuntu 12.10（64 位）。每个操作系统/播放器都经过 5 * 20 次测试。

Windows Adob​​e 平均 4.30 毫秒
Windows Chrome 平均。4.25 毫秒
OS X Adob​​e 66.67 毫秒
OS X Chrome 4.28 毫秒
Ubuntu Adob​​e 10.49 毫秒
Ubuntu Chrome 4.19 毫秒

```
doConnect();

private function doConnect():void{
    socket = new Socket(url,port);
    socket.addEventListener(Event.CONNECT, connectHandler);
    socket.addEventListener(ProgressEvent.SOCKET_DATA, socketDataHandler);
}
private function connectHandler(event:Event):void{
    writeln("GET " + path + " HTTP/1.1");
    writeln("Host: " + url);
    socket.flush();
    nStart = new Date().time;

}
private function writeln(str:String):void{
    str +=  "\n";
    socket.writeUTFBytes(str);
}
private function socketDataHandler(event:ProgressEvent):void{
    var latecy:Number = new Date().time - nStart; // latency in ms
} 
```

有什么想法可以解决这个问题吗？

# jquery - 更改链接到访问页面的 div 的背景

> ID：15790291
> 
> 赞同：1
> 
> 时间：2013-04-03T14:33:05.860
> 
> 标签：jquery, cookies, hyperlink, visited

对，因为 :visited 不再起作用了，无论如何使用背景图像，我正在寻找替代方案。

我有一个页面，上面有 3 张图片，每个都有相同的背景图片（一个封闭的盒子），点击这些盒子中的任何一个都会带你到网站的不同部分，但我想要它，当用户返回到索引页面 - 带有 3 个 div - 之前单击的 div 的背景图像已更改（打开框）。

所以正如我之前所说，我想我正在寻找一个替代方案：visited，我猜这将通过 jquery + cookies 完成？

希望这是有道理的！

我只要求它与 chrome 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:50:22.777

如果您要使用 cookie 选项，可以在此处下载 jQuery 插件：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

当有人点击其中一个链接时，注册访问：

```
$('a').click(function () {
    $.cookie('the_cookie', 'the_value', { expires: 7 });
}); 
```

在页面加载时，检查他们是否是回访者并计算出新背景：

```
$(function () {
    if ($.cookie('the_cookie') == 'the_value')
        $('div').css('background-image', 'new image');
}); 
```

# facebook - 隐私合规 Facebook Like 按钮计数

> ID：15790295
> 
> 赞同：4
> 
> 时间：2013-04-03T14:33:24.797
> 
> 标签：facebook, facebook-like, facebook-opengraph, privacy, facebook-likebox

*在德国，隐私规则 (Datenschutz) 非常严格。当我将常规的 facebook like 按钮放在我的网页上时，很有可能收到来自竞争对手的停止和终止信 (Abmahnung)。由于 facebook 的like 按钮会跟踪单个访问者，即使他不使用 Like 按钮。*

[发明了“两次点击解决方案”](http://thepoliticsofsystems.net/2011/09/a-two-click-like-button-for-more-privacy/)来克服这种情况。

![在此处输入图像描述](https://i.stack.imgur.com/lu4fR.png)

但是，它们不会显示禁用时要喜欢的 URL 的点赞数。（见截图：“21”只显示在激活状态）我知道[可以通过 open graph api 检索这个类似的计数](https://stackoverflow.com/questions/6020720/facebook-like-button-can-it-be-made-read-only)。

是否已经存在具有“两次单击按钮”的解决方案，包括禁用状态下的计数？也许是一个wordpress插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T18:27:14.813

以下插件可以完成这项工作。但是它仍然是测试版，并且没有任何图标（因为商标问题）所以，只有超级用户才会将其识别为类似 facebook 的按钮。

![在此处输入图像描述](https://i.stack.imgur.com/FObzF.gif)

[http://www.selbstaendig-im-netz.de/2013/02/14/social-web/sin-socialshare-plugin-3-betaversion/](http://www.selbstaendig-im-netz.de/2013/02/14/social-web/sin-socialshare-plugin-3-betaversion/)（只有德语，有插件zip文件的下载）

该插件尚未在 wordpress org 插件目录中

# mysql - 为应用程序优化 MySql Select

> ID：15790299
> 
> 赞同：0
> 
> 时间：2013-04-03T14:33:32.840
> 
> 标签：mysql, database

我目前正在开发一个应用程序，该应用程序分析保存在我们数据库中的运行时值（过滤器的平均值/中值，如日、月、使用的方法等）。然而，我也读到用户友好的应用程序在用户点击按钮后不应该花费太长时间来显示数据，但我只是想不出一种方法来让我的查询快速用于大型数据库。我想过写一些东西来存储每天所需的值，这样每次用户尝试获取信息时就不需要再次计算它们，但是有了这么多过滤器，它似乎是存储大量信息的方法，我只是想不出另一种方法..

这就是我的 SQL 查询的样子：

```
SELECT
p.processID, p.runtime, p.servername
FROM
public.process p
WHERE
(p.starttime BETWEEN 1356994800000 AND 1359414000000) AND
p.MainMethodID = '12'; 
```

编辑：MainMethodID 是一个 BIGINT，我已经使用了“starttime”和“MainMethodID”的索引。我的问题是是否有一种方法可以更快地为 GUI 应用程序获得结果，因为 5 秒以上的所有内容似乎都相当长，而且我认为我不能只计算之前的所有内容，因为之前解释过的许多过滤器选项（使用的方法和时间范围） .

EXPLAIN 给出了这些结果：

```
1, 'SIMPLE', 'p', 'ref', 'MainMethodID,startTime', 'MainMethodID', '8', 'const', 28128, 'Using index condition; Using where' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:26:40.753

创建一个复合索引`(MainMethodId, startTime)`

# json - 哪个是更好的选择 JSON？还是 CSV？（对于从远程服务器到 Web 应用程序（前端）的大数据 (~1 GB)

> ID：15790301
> 
> 赞同：2
> 
> 时间：2013-04-03T14:33:45.830
> 
> 标签：json, csv

我正在尝试从以二进制格式发送数据的远程 url 获取大型表格数据。为了读取这些数据，我使用了一个与服务器一起运行（内置）的**C**程序。**C**程序从各种来源获取二进制格式的数据，转换为可读形式并将其发送到前端。

我有两个选择：

1.  我将数据转换为更轻的 CSV 格式或
2.  我将数据转换为 JSON 格式，这种格式稍微重一些，但前端 Web 应用程序易于解释

我想在前端对数据进行排序和分组等操作。所以你能建议我在这种情况下使用哪个更好的选择。

更新：
1 -> 前端将只接收数据并可能进行排序或分组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:41:45.290

如果必须将所有数据发送到前端，则可以使用 json 数组来包装每一行。这可以最大限度地减少您添加的额外数据量，例如

```
data:{
     columns:["A","B","C"],
     rows:[  [1,2,3],[4,5,6],[7,8,9]   ]
} 
```

但是，如果可能，我会尽量避免将所有数据发送到前端应用程序。应该可以通过使用 ajax 调用按需获取所需数据来显示数据页面。服务器可以完成排序、分组等繁重的工作。考虑将数据存储在数据库中。

# windows - Windows 批处理文件动态创建语句

> ID：15790303
> 
> 赞同：0
> 
> 时间：2013-04-03T14:34:01.133
> 
> 标签：windows, batch-file, cmd, directory

我需要使用 Windows 批处理程序从目录中获取文件名列表。我想获取每个文件名并将其与另一个命令行语句结合起来。
注意我只需要文件名而不是文件的内容。
这将如何完成？

如果我在 D 驱动器上有一个包含以下文件的“数据”目录（注意可能有很多文件）

```
--------------
myFile1.abc
myfile2.abc
------------------ 
```

我如何使用 Windows 批处理程序动态创建这样的东西？

```
move C:\myFile1.abc C:\newdir
move C:\myFile2.abc C:\newdir 
```

注意 - （我知道有一种更简单的方法来移动文件，但我试图理解逻辑，所以我可以在不同的命令中使用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:55:06.177

在命令行上尝试：

```
for %X in (D:\DataFiles\*) do echo move "%~fX" C:\newdir>>logfile.txt 
```

它将所有文件名`D:\DataFiles` 放入`logfile.txt`（隐藏文件除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:37:44.090

您可以使用`for`循环：

```
for %%X in (D:\*) do (
    echo move %%X C:\newdir
) 
```

# java - javax.naming.NameNotFoundException：名称 [comp/env] 未绑定在此上下文中。在 Tomcat 中找不到 [comp]

> ID：15790307
> 
> 赞同：1
> 
> 时间：2013-04-03T14:34:07.037
> 
> 标签：java, tomcat7, postgresql-9.2

我在 Windows 环境的本地计算机上将我的代码部署在 Tomcat 6.0.32 中。并且相同的WAR文件部署在Linux环境下远程机器的Tomcat 7.0.39中。

context.xml 的代码如下：

```
<?xml version="1.0" encoding="UTF-8"?>
    <Context antiJARLocking="true" path="/CentralizedPush">
        <Resource auth="Container" driverClassName="org.postgresql.Driver" maxActive="20" maxIdle="10" maxWait="-1" name="jdbc/postgres" password="commonpush12#" type="javax.sql.DataSource" url="jdbc:postgresql://10.40.5.59:5444/commonpush_database" username="commonpush"/>
    </Context> 
```

DBConnection.java 的代码如下：

```
import java.sql.Connection;
import java.sql.Driver;
import java.sql.SQLException;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;
import org.slf4j.LoggerFactory;  

public class DBConnection {
    private static Connection con = null;

/**function is used for creating connection
 * @return Connection object
 */
public static Connection getConnection() {
    org.slf4j.Logger LOG = LoggerFactory.getLogger("Error");

    try {
        Driver d = (Driver) Class.forName(Constant.CLASS_NAME).newInstance();
        Context initContext = new InitialContext();
        Context envContext = (Context) initContext.lookup("java:comp/env");
        DataSource ds = (DataSource) envContext.lookup("jdbc/postgres");

        con = ds.getConnection();

    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
        LOG.error("ClassNotFoundException" );
    } catch (InstantiationException ex) {
        ex.printStackTrace();
        LOG.error("InstantiationException" );
    } catch (IllegalAccessException ex) {
        ex.printStackTrace();
        LOG.error("IllegalAccessException" );
    } catch (NamingException ex) {
        ex.printStackTrace();
        LOG.error("NamingException" );
    } catch (SQLException ex) {
        ex.printStackTrace();
        LOG.error("SQLException in db connection" );
    }

    return con;
} 
```

我在 postgres 中有我试图访问的数据库，其详细信息如下：

```
Name: CDCUCOMPUDB
Host: 10.40.5.59
Port: 5444
database name: commonpush_database 
```

问题是当我在本地机器上部署代码时一切都很好，但是当我在 Linux 环境中的远程服务器上部署代码并且具有不同的 Tomcat 版本时，我收到以下错误：

```
javax.naming.NameNotFoundException: Name [comp/env] is not bound in this Context. Unable to find [comp]. 
```

请提出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T00:53:51.293

在“java:comp/env/jdbc/postgres”的单个查找中执行此操作。这里没有理由使用两个上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T18:07:11.053

我有同样的错误。我试图按照[Tomcat DataSource JNDI Example for Servlet Web Application 的](http://www.journaldev.com/2513/tomcat-datasource-jndi-example-for-servlet-web-application)说明创建一个全局 jdbc 连接池。在他的示例代码中，他使用“java:/comp/”来查找，而不是“java:comp/”。这是有问题的。否则，这是一个非常有用的指南。

# oop - 将相关字段封装到伴随对象/类中并避免重复

> ID：15790310
> 
> 赞同：0
> 
> 时间：2013-04-03T14:34:14.670
> 
> 标签：oop, scala, encapsulation, code-duplication, companion-object

我的应用程序使用属性文件来加载多个属性。

应用程序的每个实例都有 3 个与环境相关的参数 - 其中一个是属性，另外两个是基于它计算的。

```
class Environment(val properties: Properties) {
    val dbUrl = valueOrError("db.url")
    val host = valueOrError("host")
    //... 

    val environmentFlag = valueOrError("env.flag") 
    val environmentToken = environmentFlag match {
        case "live" => "L"
        case "staging" => "S"
        case "test" => "T"
    val environmentUrlPrefix = environmentFlag match {
        case "live" => ""
        case "staging" => "staging-"
        case "test" => "test"
    }       

} 
```

在我看来，应该以某种方式封装 3 个 environment* 属性。

我称之为寻求的抽象`Discriminator`，因为它用于区分 3（目前）环境类型。由于在一个正在运行的应用程序中，只有一组这样的 environment* 属性，因此我将其实现为`object`：

```
class Environment(val properties: Properties) { 
    val dbUrl ... 

    object Discriminator {
        val flag = valueOrError("env.flag")
        val token = flag match {
            case "live" => "L"
            case "staging" => "S"
            case "test" => "T"
        val urlPrefix = flag match {
            case "live" => ""
            case "staging"=> "staging-"
            case "test" => "test-"
        }
     }
} 
```

我可以调用: `environment.Discriminator.urlPrefix`，这很好，但是如何改进代码？我如何摆脱重复的`match`？
现在感觉 of`token`和`urlPrefix`of的值`live`应该一起存在（就像 for等的值`staging`一样）——有点像作为 Discriminator 类的一个实例的一部分。

```
abstract class Discriminator(val flag = valueOrError("env.flag"), 
                             val token: String
                             val urlPrefix: String) 
```

由于我仍然想使用`environment.Discriminator.urlPrefix`，我仍然需要`Discriminator`（现在）伴生对象。

但我被困在这里 - 我不知道如何结合这些概念。

我显然必须根据具体`flag`领域为自己创建 3 个鉴别器实例，但是如何？如何调用构造函数 - 基于第一个参数（所有实例通用）将最后两个参数传递给它？

一旦我有了这个，我如何将三个实例与鉴别器伴随对象连接起来，以便我可以使用`environment.Discriminator.urlPrefix`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:44:47.913

`token`您可以像这样同时初始化两者`urlPrefix`：

```
val (token, urlPrefix) = flag match {
  case "live" => ("L", "")
  case "staging" => ("S", "staging-")
  case "test" => ("T", "test-")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:40:29.453

为什么不替换这个：

```
 val token = flag match {
        case "live" => "L"
        ....
    val urlPrefix = flag match {
        case "live" => ""
        ..... 
```

有东西返回一个元组？例如

```
 val tokens = flag match {
        case "live" => ("L", "") 
```

# icarousel - iCarousel 自动滚动不流畅

> ID：15790311
> 
> 赞同：0
> 
> 时间：2013-04-03T14:34:16.347
> 
> 标签：icarousel

当我为自动滚动 0.0333 指定 timeInterval 时，自动滚动看起来很流畅。但是，如果我将 timeInterval 指定为自动滚动 5.0 秒，则自动滚动不会显得平滑。iCarousel 中是否有动画时长？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T11:37:15.107

试试这个。

```
[_icarousel scrollByNumberOfItems:85 duration:10];//scrolls 85 items in 10 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T21:40:50.910

转到 iCarousel.m 文件并在 setUp 方法中添加以下代码行。

```
- (void)setUp
{ 
   _autoscroll=1;
} 
```

# linux - CSV 上的复杂 awk 循环

> ID：15790315
> 
> 赞同：0
> 
> 时间：2013-04-03T14:34:29.740
> 
> 标签：linux, bash, sed, awk

我有多个带有某种规则库的 CSV，我需要从中解析和创建命令，但我遇到了多个问题。

在开始之前，这里有一个布局示例，以及它的外观：

```
$1 = Rule number
$3 = Source
$4 = Destination
$5 = Service
$6 = Action
$7 = Track
$10 = Comments 
```

.

```
Security Policy: Blahblahblah,,,,,,,,,
12,,host_A,net-B,https,drop,Log,Any,Any,comments
13,,host_A,net-B,smtp,drop,Log,Any,Any,comments
14,,host_A,net-B,http,accept,Log,Any,Any,comments 
,,net-C,,,,,,,
,,net-D,,,,,,,
15,,host_A,net-B,http,accept,Log,Any,Any,comments
,,host_B,net-C,service_X,,,,,
,,host_C,net-D,service_y,,,,,
,,host_D,,,,,,,
,,host_E,,,,,,, 
```

问题 1：需要在循环内调整第 1 列（规则编号）。我需要从中减去一个变量以等于正确的数字（需要移位）。例如，第一条规则#12，需要在循环中成为#1。

我用它来创建我需要从每个连续行的原始变量中减去的变量（取第一行，减去一个）：

```
`awk -F, 'NR==2 {print $1 -1 }' 
```

问题 #2：我需要在 Rule# 的每个实例上迭代这个循环。IE：每个规则“可以”有多个来源/目的地/服务，我需要能够将新对象与正确的规则联系起来。

还需要检查 $1 的错误，因为有一些字段/规则需要跳过，它们以“禁用”或类似的东西开头。这似乎可以解决问题：

```
awk -F, '$1 ~ "^[0-9]*$" {print $1} 
```

总的来说，我希望最终输出如下所示：

（所有 echo'd/awk print'd 等）：

```
if new rule # is found in $1:
create rule security_rule
create action $rule_number $action
create comment $rule_number $comment
create source $rule_number $source <--- iterate as many times as required
create destination $rule_number $destination <--- iterate as many times as required
create service $rule_number $service <--- iterate as many times as required
create track $rule_number $track 
```

ETC...

您可以提供的任何帮助/建议将不胜感激。

谢谢，

编辑：一个更好的例子（规则 1 = CSV 中的规则 12 - 这些仍然是粗略的打印语句，我可以稍后填写正确的打印值）：

```
if new rule # is found in $1:
create rule security_rule
create action rule 1 drop
create comment rule 1 "This is a comment"
create source rule 1 host_A
create destination rule 1 net-B
create service rule 1 https
create track rule 1 Log 
```

具有多个源/目标/服务的那些将简单地添加额外的“创建源规则 x”行，如下所示：

```
if new rule # is found in $1:
create rule security_rule
create action rule 3 accept
create comment rule 3 "This is a comment"
create source rule 3 host_A
create source rule 3 net-C
create source rule 3 net-D
create destination rule 3 net-B
create service rule 3 http
create track rule 3 Log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:38:03.860

awk 可以做到这一点，但它有点笨拙。您基本上将信息收集在一个大字符串中，然后在完成每个字符串后将其打印出来。（只记得打印最后一个）

我省略了`if new rule # is found in $1:`一点......因为我不完全理解它应该如何工作。如果您绝对需要“跟踪”行显示在末尾...只需将 $3、$4 和 $5 的行复制为 $7。

```
BEGIN{
    FS=",";recNum=0;curLine=""
}

$1 ~ /^Security Policy/ {next}

$1!="" {
    print curLine,"\n"
    recNum++;
    $1=recNum;
    curLine=sprintf("create rule security_rule\ncreate action rule %d %s\n",$1,$6);
    curLine=curLine sprintf("create comment rule %d \"%s\"\n",$1,$10);
    curLine=curLine sprintf("create track rule %d %s\n",$1,$7);
}
$1=="" {
    $1=recNum;
}

$3!=""{
    curLine=curLine sprintf("create source rule %d %s\n",$1,$3);
}
$4!=""{
    curLine=curLine sprintf("create destination rule %d %s\n",$1,$4);
}
$5!=""{
    curLine=curLine sprintf("create service rule %d %s\n",$1,$5);
}
END {print curLine} 
```

对于您上面的输入，这给了我：

```
create rule security_rule
create action rule 1 drop
create comment rule 1 "comments"
create track rule 1 Log
create source rule 1 host_A
create destination rule 1 net-B
create service rule 1 https

create rule security_rule
create action rule 2 drop
create comment rule 2 "comments"
create track rule 2 Log
create source rule 2 host_A
create destination rule 2 net-B
create service rule 2 smtp

create rule security_rule
create action rule 3 accept
create comment rule 3 "comments"
create track rule 3 Log
create source rule 3 host_A
create destination rule 3 net-B
create service rule 3 http
create source rule 3 net-C
create source rule 3 net-D

create rule security_rule
create action rule 4 accept
create comment rule 4 "comments"
create track rule 4 Log
create source rule 4 host_A
create destination rule 4 net-B
create service rule 4 http
create source rule 4 host_B
create destination rule 4 net-C
create service rule 4 service_X
create source rule 4 host_C
create destination rule 4 net-D
create service rule 4 service_y
create source rule 4 host_D
create source rule 4 host_E 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:22:28.930

我对这个问题并不完全清楚，但正如@Charles Duffy 所提到的，为什么不使用本机bash，你能否提供一个示例文件及其输出，我试图从你的问题中分解要求，但迷路了。无论如何，下面是一个小例子，您可以尝试修改以适应您的要求，同样可以通过 awk 完成，这将更优雅（恐怕我在 awk 中没有那么多），我强行将第一列设置为数组索引，将第三个值保留为“hello”，如果为空则保留旧值。

```
[bash]$ cat example;echo "##################################################"; ./tmp.sh < example ;echo "##################################################"; cat tmp.sh
12,,host_A,net-B,https,drop,Log,Any,Any,comments
13,,host_A,net-B,smtp,drop,Log,Any,Any,comments
14,,host_A,net-B,http,accept,Log,Any,Any,comments
,,net-C,,,,,,,
,,net-D,,,,,,,
15,,host_A,net-B,http,accept,Log,Any,Any,comments
,,host_B,net-C,service_X,,,,,
,,host_C,net-D,service_y,,,,,
,,host_D,,,,,,,
,,host_E,,,,,,,
##################################################
0 host_A hello https drop Log Any Any comments
1 host_A hello smtp drop Log Any Any comments
2 host_A hello http accept Log Any Any comments
3 net-C hello http accept Log Any Any comments
4 net-D hello http accept Log Any Any comments
5 host_A hello http accept Log Any Any comments
6 host_B hello service_X accept Log Any Any comments
7 host_C hello service_y accept Log Any Any comments
8 host_D hello service_y accept Log Any Any comments
9 host_E hello service_y accept Log Any Any comments
##################################################
#!/bin/bash
oldarr=();
oldarr[3]="hello"
index=0
while IFS=',' read -ra newarray
#do any rule which is iteration over data
do
  for (( i = 0; i < ${#newarray[@]}; i++))
  do
    if [ "${newarray[$i]}" ]
    then
#put any exceptional case
      if [ "$i" != "3" ]
      then
      oldarr[$i]=${newarray[$i]}
      fi
    fi
  done
#put anything which is independent of iteration
  oldarr[0]=$index
  ((index++))
  echo ${oldarr[*]}
done 
```

# android - WebView 和 GridView 变成 ScrollView，View 太大而无法放入绘图缓存

> ID：15790317
> 
> 赞同：6
> 
> 时间：2013-04-03T14:34:41.447
> 
> 标签：android, caching, android-view, android-memory

我有一个布局内存问题。当我有一个大的 web 视图时，它不显示任何内容，并且 logcat 显示“视图太大而无法放入绘图缓存”。

布局是：

```
<ScrollView
    android:id="@+id/scrollNoticia"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/ficha_curva" 
    android:layout_below="@+id/linea"
    android:scrollbars="none" 
    >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="12dp"

         >

        <WebView
            android:id="@+id/webViewNoticia"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none"

             />

        <GridView
            android:id="@+id/gridGaleria"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/webViewNoticia"
            android:horizontalSpacing="4dp"
            android:verticalSpacing="4dp"
            android:numColumns="4" >
        </GridView>
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T15:38:14.353

WebView 或 GridView 都不需要嵌入到滚动视图中。当内容大小超过屏幕大小时，WebView 可以自行滚动，GridView 也可以。以正常方式，GridView 只是创建可见的子视图。一旦视图离开屏幕，它将被重用。所以如果你在一个 ScrollView 中嵌入一个 GridView，也许你会错误的重用模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T09:23:54.450

尝试禁用硬件加速：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

请参阅[ScrollView 中的 WebView：“视图太大，无法放入绘图缓存” - 如何重做布局？](https://stackoverflow.com/questions/18471194/webview-in-scrollview-view-too-large-to-fit-into-drawing-cache-how-to-rewor)了解更多信息。

# php - 过去 x 个月的 php 报告按月和天分组

> ID：15790319
> 
> 赞同：0
> 
> 时间：2013-04-03T14:34:48.977
> 
> 标签：php, date, loops

我正在尝试创建一个 php 报告，其中数据按月和天分组（然后是每天的时间段 - 但这可能会等待一段时间）。格式类似于：

2013->四月->星期一->数据

2013->四月->星期二->数据

...

2012->十二月->星期一->数据

...

我有以下代码：

```
 $lastmonth = strtotime ( '-'.$monthrange.' month' , strtotime ("now")) ;
 $arr_months = array();
 $timestampformonths = strtotime("now");
 $arr_daysofweek = array();
 for ($i = 0; $i < $monthrange; $i++) {
   $arr_months[] = strftime('%B', $timestampformonths);
   $timestampformonths = strtotime('-1 month', $timestampformonths);
 }
//tempdump($arr_months);tempstop();//April,March,February...

//build array of days of week backward, starting today
$timestampfordays = strtotime("now");
$arr_daysofweek = array();
for ($i = 0; $i < 7; $i++) {
 $arr_daysofweek[] = strftime('%A', $timestampfordays);
 $timestampfordays = strtotime('-1 day', $timestampfordays);
}

foreach ($arr_daysofweek as $dayoftheweek) {
 foreach ($arr_months as $currmonth) {
    $currmonth_datetime = strtotime($currmonth);
    $prevmonth_datetime = strtotime('-1 month', $currmonth_datetime);
     for($i = strtotime($dayoftheweek, $currmonth_datetime); ( ($i >= $lastmonth) && ($i <= strtotime("now")) && ($currmonth_datetime > $prevmonth_datetime) ); $i = strtotime('-1 week', $i)) {
        echo date('l Y-m-d', $i) . "<br />";//Monday 2012-04-02 00:00:00
    }
} 
```

}

这段代码有一个问题：有重复。例如，输出当前以'Wednesday 2013-04-03'开始，然后通过'Wednesday 2012-04-04'正常显示，然后再次显示'Wednesday 2013-03-06'；我认为这是天循环内的月份循环。

请随时完全重做此代码！我什至不介意删除 $arr_daysof 周的 foreach 循环，而是为每天硬编码几个循环——尽管这并不优雅。

谢谢！

*** 代码更新：我想我已经解决了重复的问题；如果需要，稍后会发布更多***

# android - XSD 字段“未指定资源类型”上的 Eclipse 错误

> ID：15790321
> 
> 赞同：1
> 
> 时间：2013-04-03T14:34:51.850
> 
> 标签：android, xml, eclipse, xsd, field

这是一个后续问题：

[如何为 id 属性设置 XSD 限制](https://stackoverflow.com/questions/15779408/how-to-set-restriction-on-xsd-for-id-attributes)

我使用 Eclipse。我使用答案代码创建了一个 XSD 文件，但出现以下 3 个错误：

```
error: Error: No resource type specified (at 'xpath' with value '@id'). fsm.xsd /test/res/xml   line 24 Android AAPT Problem
error: Error: No resource type specified (at 'xpath' with value '@toState').    fsm.xsd /test/res/xml   line 32 Android AAPT Problem
error: Error: No resource type specified (at 'xpath' with value '@fromState').  fsm.xsd /test/res/xml   line 28 Android AAPT Problem 
```

使用 xsd 的带有 XMLSchema-instance 的 XML 测试文件验证正常，即使存在上述 3 个错误。
我想知道这些错误是否只是 Eclipse 中的一个小故障，还是我需要定义其他东西来摆脱它们。

XSD源代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">
    <xs:element name="FSM">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" name="state">
                    <xs:complexType>
                        <xs:attribute name="id" type="xs:unsignedByte" use="required"/>
                        <xs:attribute name="name" type="xs:string" use="required"/>
                    </xs:complexType>
                </xs:element>
                <xs:element name="transition">
                    <xs:complexType>
                        <xs:attribute name="fromState" type="xs:unsignedByte" use="required"/>
                        <xs:attribute name="toState" type="xs:unsignedByte" use="required"/>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
        <xs:key name="PKStates">
            <xs:selector xpath="state"/>
            <xs:field xpath="@id"/>
        </xs:key>
        <xs:keyref name="FKTransitionToStatesFrom"  refer="PKStates">
            <xs:selector xpath="transition"/>
            <xs:field xpath="@fromState"/>
        </xs:keyref>
        <xs:keyref name="FKTransitionToStatesTo" refer="PKStates">
            <xs:selector xpath="transition"/>
            <xs:field xpath="@toState"/>
        </xs:keyref>
    </xs:element>
</xs:schema> 
```

XML 测试文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FSM xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="fsm.xsd">
    <state name="S1" id="1"/>
    <state name="S2" id="2"/>
    <state name="S3" id="3"/>
    <transition toState="1" fromState="2"/>
</FSM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:25:11.453

这是一个 Eclipse 问题，很可能与您的设置有关。该模式在各种工具和平台中完全有效，包括 QTAssistant、Visual Studio、NetBeans、Xerces 和 Eclipse Helios（我知道，有点旧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:52:45.433

这是我发现的适用于 Eclipse 的旁路。
请注意，原始语法是完全合法的，但 Eclipse XSD 验证器似乎不接受它。属性中每个属性
的前缀**.//**似乎可以解决问题，使用此 XSD 模式对 XML 文件进行的验证正确执行。更重要的是，XSD文件没有被Eclipse标记为错误，项目编译成功进行。`xpath``<xs:field>`

```
 <xs:key name="PKStates">
        <xs:selector xpath="state"/>
        <xs:field xpath=".//@id"/>
    </xs:key>
    <xs:keyref name="FKTransitionToStatesFrom"  refer="PKStates">
        <xs:selector xpath="transition"/>
        <xs:field xpath=".//@fromState"/>
    </xs:keyref>
    <xs:keyref name="FKTransitionToStatesTo" refer="PKStates">
        <xs:selector xpath="transition"/>
        <xs:field xpath=".//@toState"/>
    </xs:keyref> 
```

# c# - 用户控件内的 Formview 的 FindControl

> ID：15790322
> 
> 赞同：0
> 
> 时间：2013-04-03T14:34:57.073
> 
> 标签：c#, asp.net, formview

我的 aspx 页面中有一个 Multiformview，例如：

```
<data:MultiFormView ID="mFormView1" DataKeyNames="Id" runat="server" DataSourceID="DataSource">

            <EditItemTemplate>
                <ucl:myControl ID="myControl1" runat="server" />
            </EditItemTemplate> 
```

在我的用户控件“mycontrol”中，我有一个下拉列表，如下所示：

```
<asp:FormView ID="FormView1" runat="server" OnItemCreated="FormView1_ItemCreated">
    <ItemTemplate>
        <table border="0" cellpadding="3" cellspacing="1">

            <tr>
                <td>
                    <asp:DropDownList ID="ddlType" runat="server" Width="154px" />
                </td>
            </tr> 
```

因此，当我尝试访问我的 ascx.cs 文件中的这个下拉列表时，它给了我空引用错误。

我试过以下：

```
 protected void FormView1_ItemCreated(Object sender, EventArgs e)
    {
           DropDownList ddlType= FormView1.FindControl("ddlType") as DropDownList;
    } 
```

和

```
DropDownList ddlType= (DropDownList)FormView1.FindControl("ddlType"); 
```

和：也在数据绑定内部。没有任何工作。

编辑：

我没有检查 Formview1.Row 是否为空。这是解决方案：

```
 protected void FormView1_DataBound(object sender, EventArgs e)
    {
        DropDownList ddlType = null;
        if (FormView1.Row != null)
        {
            ddlType = (DropDownList)FormView1.Row.FindControl("ddlType");
        }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:53:53.983

这是一个扩展方法，它允许递归搜索。它使用 FindControlRecursive 方法扩展您当前的控件。

```
using System;
using System.Web;
using System.Web.UI;

public static class PageExtensionMethods
{
    public static Control FindControlRecursive(this Control ctrl, string controlID)
    {
        if (ctrl == null || ctrl.Controls == null)
            return null;

        if (String.Equals(ctrl.ID, controlID, StringComparison.OrdinalIgnoreCase))
        {
            // We found the control!
            return ctrl;
        }

        // Recurse through ctrl's Controls collections
        foreach (Control child in ctrl.Controls)
        {
            Control lookFor = FindControlRecursive(child, controlID);
            if (lookFor != null)
                return lookFor;
            // We found the control
        }
        // If we reach here, control was not found
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:45:02.440

我没有检查 Formview1.Row 是否为空。这是解决方案：

```
 protected void FormView1_DataBound(object sender, EventArgs e)
    {
        DropDownList ddlType = null;
        if (FormView1.Row != null)
        {
            ddlType = (DropDownList)FormView1.Row.FindControl("ddlType");
        }
     } 
```

# performance - EMR（Elastic Map Reduce）与非EMR（EC2-Hadoop）

> ID：15790326
> 
> 赞同：1
> 
> 时间：2013-04-03T14:35:10.657
> 
> 标签：performance, hadoop, emr

就性能而言，在 EMR 或某些安装了 hadoop 的 EC2 实例上运行作业之间有什么区别。我知道关键区别在于使用 EMR 运行作业要容易得多，但是您知道这两者的性能有什么不同吗？让我说性能是指从启动工作到完成它们所花费的时间。

# windows-phone-8 - 如何在 Windows Phone 8 中显示两个地理坐标之间的路线？

> ID：15790329
> 
> 赞同：2
> 
> 时间：2013-04-03T14:35:19.880
> 
> 标签：windows-phone-8, windows-phone

我想在 windows phone 8 中显示两个地理坐标之间的路线。

我尝试了很多但未能成功，我可以使用 GeocodeQuery 获取从当前位置到特定地点的路线，如下所示。

但是，如果我只想在地图上显示两个地理坐标之间的路线，例如从 28.608554、77.232922 到 28.630721、77.220219，该怎么办？

```
 GeocodeQuery Mygeocodequery = new GeocodeQuery();
        Mygeocodequery.SearchTerm = "New Delhi, India";
        Mygeocodequery.GeoCoordinate = new GeoCoordinate(myGeoposition.Coordinate.Latitude, myGeoposition.Coordinate.Longitude);
        Mygeocodequery.QueryCompleted += Mygeocodequery_QueryCompleted;
        Mygeocodequery.QueryAsync(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:43:30.037

这可能会帮助你

[定位服务和地图](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2012/11/06/what-s-new-in-windows-phone-8-6-out-of-8-location-services-and-maps.aspx)

# iphone - iPhone/iPod Touch：应用程序可执行文件缺少所需的架构。必须至少存在以下架构之一：armv7

> ID：15790334
> 
> 赞同：0
> 
> 时间：2013-04-03T14:35:34.940
> 
> 标签：iphone, xcode, ipad, xcode4.5

我想将我的应用程序上传到 Appstore，但我在验证它时遇到了一些问题。每次我尝试验证我的应用程序时都会出现这 3 个错误：

1.  iPhone/iPod Touch：应用程序可执行文件缺少所需的架构。必须至少存在以下架构之一：armv7 (-19033)
2.  应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。(-19011)
3.  无法从应用程序中提取权利：(null) (-19045)

无论我做什么，我都会遇到同样的错误。我什么都试过了；我已经将部署目标设置为 4.3，我也尝试使用 5.0 6.0 获得相同的结果，我已经更改了我的证书 5 次，我已经使用类似工作应用程序的设置进行了测试，但什么也没有。我尝试过使用不同的架构代码唱歌等等。就像我说的; 我已经尝试了一切，但没有结果。值得一提的是，我使用了 Drilldownsave 示例应用作为我的基础，它是为 ios 3.2 构建的

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:59:45.977

构建存档时拔下设备。您正在为特定的设备系列构建。你希望你的 Scheme 是为一个通用的 iOS 设备构建的。

![在此处输入图像描述](https://i.stack.imgur.com/KX2YP.png)

对于其他错误，请确保您使用适当的证书正确签署应用程序。这可以在以下位置找到：

```
Build Settings -> Code Signing -> Code Signing Identity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:27:12.327

我已经解决了这个问题： info.plist -> 可执行文件，其值为 ${EXECUTABLE_NAME} 并且在 ${EXECUTABLE_NAME} 后面我一定以某种方式留下了一个空间，当我删除它时，一切正常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T21:49:50.630

我也遇到了同样的问题，已经解决了。。

事实证明，我的 Bundle/Executable 名称与项目名称不同。

转到项目 > 双击目标

将其重命名为 Bundle/Executable 名称，然后为 Release/iOS 设备构建

并且应用程序加载器将接受您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T09:19:24.490

我认为您应该查看这篇文章[http://www.mindyourcode.com/ios/iphone/iphoneipod-touch-application-executable-is-missing-a-required-architecture/](http://www.mindyourcode.com/ios/iphone/iphoneipod-touch-application-executable-is-missing-a-required-architecture/)您需要同时添加架构 armv6 和 armv7

# php - 更改另一台服务器上文件的下载文件名

> ID：15790340
> 
> 赞同：0
> 
> 时间：2013-04-03T14:35:48.477
> 
> 标签：php, javascript, post

所以基本上，我有一个表单，用户输入一个流行的 mp3 站点 URL，脚本会抓取 mp3 路径的 URL，并通过 $file 提供下载。

```
if ( $_POST ) {
        $file = get_id($_POST['l']);
        print "<a href=\"$file\"> Right-Click & Save Link as...</a>";
} else { 
```

$file 以 URL 形式返回，例如访问/下载文件的[http://mp3site.com/stream/837465297349.mp3 。](http://mp3site.com/stream/837465297349.mp3)我希望能够将下载的文件名更改为虚名文件名，这可能吗？我是否必须将文件传输到我的服务器，重命名，然后他们发回链接以从我的服务器下载？

谢谢。

# java - 如何在 Java 中使用 File 对象创建数据库连接对象

> ID：15790342
> 
> 赞同：-2
> 
> 时间：2013-04-03T14:35:54.453
> 
> 标签：java, database

我正在尝试在 Java 中创建一个数据库连接对象，我希望在其中使用我在内存中拥有的 File 对象。我有点不愿意先将文件（我在内存中的文件）写入磁盘，然后再次从磁盘读取以在我存储文件的位置创建数据库连接。

在Java中可以这样做吗？有人可以指导我吗..

**根据评论更新 1**：我不愿意写入磁盘然后再次读取，因为我发现它没有必要。我有大量通过网络接收的文件。如果我继续将它们写入磁盘然后从中读取，我（处理器）实际上是在浪费大量时间将数据写入磁盘，只是在写入完成后立即读取。对磁盘的读写是昂贵的，如果我在内存中有数据，为什么你认为我寻找一种立即使用它的能力是“*模糊*的”，而不是先写、读和然后将其加载回内存？

**更新 2** - 好的，所以我想，与其让更多人感到困惑，我会更详细地说明这种情况。我通过网络接收文件 - 所以我有一个字节数组。

*现在第一件事*- 我可以使用该数据创建一个 im-memory java.io.File 对象（无需将内容写入磁盘）吗？如果是这样，那么第二步将是我尝试在内存文件对象中使用它（它是使用通过网络接收的字节创建的） - 它是我确定的数据库文件，所以想创建一个连接以便我可以查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:07:20.827

> can I create an im-memory java.io.File object using that data (without having to write the contents to the disk)?

No. The `java.io.File` class is a cross-platform abstraction for *paths* (i.e. the locations of files on disk), it has no concern for the *data* contained in the file - indeed one of the common uses for `File` objects is to check whether a particular path refers to an existing file, a directory, or does not exist at all.

Whether you can make use of the data you hold in a `byte[]` without writing it to disk is something nobody can answer without knowing exactly which "database" system you're using, as the answer depends entirely on what the underlying library supports.

# c# - 正确的 DI 项目/构建设置

> ID：15790348
> 
> 赞同：4
> 
> 时间：2013-04-03T14:36:06.890
> 
> 标签：c#, deployment, dependency-injection

希望是直截了当的。我正在寻找一个 C# 产品，由于 Xamarin，它注定可能具有桌面 (WPF)、Web、任意数量的移动构建输出。

有几个组件：

*   我有一个“CoreApi”项目，它具有接口和共享模型，可以调用它们来编写任何应用程序前端（并实现以编写后端）。
*   我还在另一个程序集中拥有所有“应用程序逻辑”——目前与 MVVM 模式中的查看模型类似，但以应用程序为重点。
*   applogic 中包含一个特定于平台的接口实现，它与动态生成用于播放的音频缓冲区有关。也单独的项目/装配

我正在使用 Ninject，它运行良好。但随着解决方案逐渐扩展到包括其他项目类型（网络、移动客户端），我可以预见到一些“味道”：

目前，客户端项目引用了特定于平台的 (DirectX) 音频引擎和后端的本地/测试实现。它仍然使用 Ninject 并且不直接引用实现类，但是让它们可以访问和直接引用感觉是错误的。

当解决方案构建时，我几乎想要拥有不同的“包”：

*   套餐一：桌面客户端+DirectX引擎+后端X
*   包 2：带有后端 Y 的 Web 部署包
*   套餐三：安卓版带后端X+安卓音频引擎...

我在正确的轨道上吗？我真的想求助于构建后步骤，将东西复制到目标文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T14:25:30.680

我会考虑使用 MSBuild 功能来执行必要的副本。我采用了使用dependency.proj 文件的方法，您可以根据您选择设置的任何配置选项对其进行配置以执行适当的复制操作，例如，您可以根据配置和CPU 类型将特定文件复制到输出文件夹中。我不提倡使用旧式的后期构建步骤，因为这些步骤不可靠且难以调试。在我看来，MSBuild 是前进的方向。

# polygon - 如何从不是质心的点制作新的多边形/特征？ArcGIS

> ID：15790351
> 
> 赞同：0
> 
> 时间：2013-04-03T14:36:10.993
> 
> 标签：polygon, point, arcgis

我整个上午都在搜索帮助网站并浏览常见问题解答和工作表，但都失败了。

我是 ArcGIS 新手，所以我希望这不是一个“新手”问题，但我正在尝试研究如何从一个不是质心的点创建一个新的多边形/特征？

```
----                ----
| . | <--not this   |   |
----       this-->  .--- 
```

我有一系列点，其中列出的东向和北向表示 200m 正方形的左下角。我知道如何制作一个圆形缓冲区，我可以使用 Feature Envelope to Polygon 工具将其转换为正方形，但这并不是我真正想要的。

数据具有 3g 的强度，这意味着在网格中。由于保密协议，我无法上传此文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:10:07.780

我手动更改了东向和北向工具，以相应地向东和向北移动 100m。然后我使用缓冲工具，使用新的点位置作为质心并将其变成一个正方形。

# c# - 获取动态数据以显示在 asp.net 中的 aspx 页面上

> ID：15790353
> 
> 赞同：0
> 
> 时间：2013-04-03T14:36:12.677
> 
> 标签：c#, asp.net

我正在使用下面的代码来显示用户的个人资料信息，但是你可以看到它的静态数据，因此我必须为每个人分别创建页面数。

```
 <td valign="top" class="main_text" >
                    <h1>Attendance Dashboard</h1>
                        <table cellspacing="0" cellpadding="0" border="0" width="100%">
                            <tr>
                                <td></br></br>
                                    <table cellspacing="0" cellpadding="0" border="0" width="100%">
                                        <tr>
                                            <td>
                                                <h3 style="display:inline;">Name:</h3> <h4 style="display:inline;" >Usman Abdullah</h4>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h3 style="display:inline;">Gender:</h3> <h4 style="display:inline;" >Male</h4>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h3 style="display:inline;">Department:</h3> <h4 style="display:inline;" >BS Computer Science</h4>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td >
                                                <h3 style="display:inline;">Designation:</h3> <h4 style="display:inline;" >Student</h4>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <h3 style="display:inline;">Number:</h3> <h4 style="display:inline;" >0333-1234567</h4>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                                <td width="400px" align="center">
                                <BR/><BR/>
                                    <img src="css/images/profile_pic.jpg">
                                </td>
                            </tr> 
```

任何人都可以指定一种方式，以便我可以在访问特定用户的个人资料时直接从数据库中插入这些值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T19:52:56.560

取而代之的是

```
<h3 style="display:inline;">Name:</h3> <h4 style="display:inline;" >Usman Abdullah</h4> 
```

做这个

```
<h3 style="display:inline;">Name:</h3> <h4 style="display:inline;" ><asp:Literal ID="lblName" runat="server" /></h4> 
```

并通过后面的代码填充数据

```
 /*
             *  When you access an user profile like www.yoursite.com/user.aspx?userId=3
             *  You must get the parameter "userId=3" and search in database for the user with ID = 3
             *  and return an object with its data
             */
            User user = GetUserFromDatabase(Int32.Parse(Request["userId"]));

            /*
             * And put dynamically in the page like 
             */
            lblName.Text = user.Name;
            lblDepartment.Text = user.Department;
            //and go on.. 
```

# html - HTML - 这对 hgroup 标签有效吗？

> ID：15790355
> 
> 赞同：0
> 
> 时间：2013-04-03T14:36:16.767
> 
> 标签：html, validation, markup

这是 hgroup 标签的有效标记吗？

```
<hgroup>
<h2>Main header</h2>
<img src etc>
<h3>Sub header</h3>
</hgroup> 
```

出于设计目的，我想在 h 元素之间放置一个图像。将 h 标签放在 hgroup 中将与标签的精神保持一致，因为这些标头被组合在一起并且相互关联。但是，当然，没有任何地方声明将图像放入 hgroup 是有效的。

我假设它是无效的。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:42:13.937

不，[hgroup 正在从 HTML 5 中删除](http://lists.w3.org/Archives/Public/public-html-admin/2013Apr/0003.html)，因此对它的任何使用都是无效的。如果浏览器可以产生一些可互操作的实现，它可能会重新出现在 HTML 5.1 中。

# sql - 从 Sybase 日期到 Oracle 的转换

> ID：15790357
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:36:19.043
> 
> 标签：sql, oracle, date, sybase

我很难将以下 Sybase 语句翻译成 Oracle。无论我做什么，我都从 Oracle 收到了很多错误。我很难处理 Where 部分。有人能帮我吗？

```
SELECT * FROM address  
WHERE convert(char(10), dateadd(dd,3,date_modified), 112)  >= convert(char(10),    
date_modified, 112) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:04:23.733

您是否正在检查从 date_modified 开始的第三天是否大于或等于修改日期？

```
where trunc(date_modified+3) > trunc(date_modified) 
```

# python - Python字典在循环外重置

> ID：15790363
> 
> 赞同：0
> 
> 时间：2013-04-03T14:36:40.247
> 
> 标签：python, for-loop, dictionary

我正在构建一个生物模拟器。它将在两个 for 循环中运行，一个跟踪一天，一个跟踪一天中的时间。我有一本关于我所有生物的字典，叫做 awake，它是在每天开始时设置的。在一天循环中的某个时间点，生物会变得疲倦并入睡。模拟将它们从唤醒字典中删除，以便在一天中的剩余时间循环中不会考虑它们。但问题是，由于某种原因，唤醒字典会随着一天中的每个时间循环而重置，以便访问沉睡的生物。我已经在这里发布了相关代码，这是唯一一次使用 awake 。谁能解释我做错了什么？

```
 for i in range(self.Day):
            start = clock()
            awake = self.creatures
            for j in range(self.timeOfDay):          
                print("Life Time " + str(i + 1) + "/" + str(self.Day) 
                       + " Hour " + str(j + 1) + "/" + str(self.timeOfDay))
                print(self)
                traveling = []
                for creature in awake:
                    goal = None
                    while goal == None:
                        priority = creature.priority()
                        if priority == "improveShelter":
                            goal = creature.findBest(land.Shelter, self.map)
                        elif priority == "sleep":
                            goal = creature.findBest(land.Shelter, self.map)
                            print(awake)
                            awake.pop(creature) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:40:48.573

您正在循环`awake`并同时修改它。这意味着某些项目将被*跳过*。

而是创建一个*副本*以`awake`断开循环迭代器的连接，`awake`以便您可以修改后者而不影响循环：

```
for creature in list(awake): 
```

但是，您最大的问题是您在循环开始时设置`awake`为，有效地更改. 也许您打算改用？`self.creatures``self.creatures``self.awake`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:43:25.337

在每天开始时，您需要制作`creatures`dict 的副本而不是引用它：

```
awake = dict(self.creatures) 
```

这是 Python 中各种可变类型的常见陷阱。

Python 只有对对象的引用，而不是像“变量”这样的东西。所以写作`a=b`只是创建一个新的引用，命名`a`为已经被`b`.

# reporting-services - SSRS 报告运行速度非常慢，而查询在 SSMS 中运行速度超快

> ID：15790365
> 
> 赞同：4
> 
> 时间：2013-04-03T14:36:47.270
> 
> 标签：reporting-services

我在 SSRS 2012 中运行一个非常基本的报告。我只是从表中检索一些数据，并且我在查询的 Where 子句中使用了一个参数。如果我在 SSRS 查询中对参数进行硬编码，则查询运行速度很快（不到 5 秒），但如果将其保留为动态选择的参数，则查询需要 5 分钟以上才能呈现。这是一个类似于我正在使用的抽象查询：

```
Select Col1, Count(*)
From Tbl1
Where Col2 = @Para1
Group By Col1
OPTION (RECOMPILE); 
```

我已经尝试在查询中使用 OPTION (RECOMPILE) 来解决参数嗅探问题。我还检查了数据类型，Col2 是 CHAR(2)，Para1 是 TEXT，所以在运行时不需要转换。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T03:25:26.173

我遇到了类似的问题，但仅在连接到 Oracle 数据库时。当我对查询中的参数进行硬编码时……效果很好……将参数传递给查询，这将需要很长时间。奇怪的是，某些参数只需要永远。在我的情况下，当我检查日志时，渲染时间是永远的。（还应该提到这是一个多选参数......无法解决这个问题）

奇怪的解决方案：

我没有将参数传递到查询中，而是将其作为过滤器传递到数据集中。有人会认为这只会增加 ssrs 服务器的负载，因为您要通过网络发送更多数据以供其处理……从而增加渲染时间，但区别在于白天和黑夜。该报告现在运行良好。

老实说无法解释。

我写的报告比我对 SQL Server 数据源的数量还要多，而且在连接到 Oracle 时我只看到过这个（以及一些其他奇怪的事情）。但是，如果您遇到同样的问题，可能值得一试，并且您应用的参数实际上并没有限制数据那么多。（就我而言，大多数人无论如何都在运行“全部”。

如果您不熟悉在数据集上使用过滤器。转到此链接并查找标题“使用具有多值参数的过滤器”（也适用于非多值参数） [http://www.mssqltips.com/sqlservertip/2866/sql-server-reporting-services -使用多值参数/](http://www.mssqltips.com/sqlservertip/2866/sql-server-reporting-services-using-multivalue-parameters/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T16:18:41.713

我在使用查询加载数据的报告中遇到了类似的问题。就我而言，我必须支持架构团队建立的开发模式（在 SSRS 数据集中使用直接查询）。我不能使用过滤器，因为未过滤的数据量和安全要求（仅从数据库中提取请求的数据）。

所以我的解决方案是攻击转换。我声明了表变量，用来自 SSRS 参数的转换选择值填充这些变量，并在`WHERE … IN (…)`表达式中使用这些表变量。这仅涵盖了所有需求*查询*、*有限的数据量*、*安全的数据访问*并解决了 NVARCHAR 到 VARCHAR 转换的减速问题。

查询中的解决方案如下所示（`@pSelectedValues`变量映射到报告中的选择参数，在我更改之前它已经存在）：

```
DECLARE @tMySelectedParameterValues TABLE( SelectedValue varchar(255) NULL );

INSERT INTO @tMySelectedParameterValues

SELECT DISTINCT EntityStatusStatusName
FROM      dbo.t_MyReferenceData
WHERE     ValueForParameters IN (@pSelectedValues);

... main selection and from parts ....

WHERE keyValues IN (SELECT SelectedValue FROM   @tMySelectedParameterValues ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T17:54:24.743

我遇到了同样的问题。我对 SQL Server 运行 SQL Server Profiler [嗅探查询以](https://stackoverflow.com/questions/349540/sniffing-queries-to-sql-server) 确定报告慢的地方，并发现查询运行了 20 秒。查询包装在**exec sp_executesql**中。我将查询复制到 SSMS 并发现它运行了 20 秒。将查询转换为直接 SQL 使其运行 1 秒。啊哈！

回到 **exec sp_executesql** sql，果然有一个 IN 子句：

```
operid IN  (N''XICL002'',N''XICL005'',N''XICL026'',N''XICL028'... 
```

operid 是 decared varchar(32) 而**N**前缀强制参数为 NVARCHAR。删除**N**使**exec sp_executesql** sql 在 1 秒内运行。

就我而言，我能够修改报告。IN 子句由多选参数 (p_operators) 填充。我更改了报告查询以使用生成 p_operators 列表的参数从视图中获取操作符列表。

```
operid IN (SELECT oper_id  FROM foo WHERE (foo1 IN (@p_foo1)) AND (foo2 IN (@p_foo2)) AND ... 
```

基本上，将参数从 NVARCHAR 转换为 VARCHAR 会导致性能下降。似乎 SSRS 应该提供指示参数数据类型的选项 - 而不仅仅是“文本”。此外，在开发模式下记录一些查询也会很好。

（我希望我提供的信息足够有用。由于公司政策，我不能写太多）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:46:36.057

三件事：

1.  为什么必须使用重新编译？除非您的计划在每次不需要时都特别想重新考虑它的执行。特别是如果您要说明您的查询很简单。SSRS 在 SQL 之上做它自己的解释，所以为它添加更多的东西只是在自找麻烦。如果您必须进行重新编译，您可能希望将其放入 proc 中，以便封装所有逻辑以供 SQL 引擎理解。

2.  参数有时会减慢任何东西是SSMS中带有参数的查询也很慢吗？您提到它是快速硬编码的，但没有在 SSMS 中使用参数对其进行测试。我有时看到 SSMS 上的参数很慢。

3.  您可以“欺骗” SSRS 的参数部分，只需稍加了解即可。在参数特别糟糕的极端情况下，您可以构建一个在运行时运行的表达式。在您的数据集选项上，单击表达式的“fx”，然后执行以下操作：

    ```
    ="Select Col1, Count(*)
    From Tbl1
    Where Col2 = " & Parameters!Para1.Value 
    ```

只要您的类型是文本，这应该会产生一个合法的字符串，然后在运行时进行评估。需要注意的是，您的字段可能不会首先自行填充，因此您可能希望进行实际查询，让它们自动填充，然后返回并将函数放入。否则您将不得不在左侧窗格中手动设置字段说明“字段”的数据集，恕我直言。

# android - IllegalArgumentException：在 Android 上将事件插入日历时出现未知 URL 内容：//com.android.calendar/events

> ID：15790369
> 
> 赞同：3
> 
> 时间：2013-04-03T14:37:01.177
> 
> 标签：android, calendar

我开发了一个应用程序，它允许用户创建约会，然后将它们插入到 Android 日历中。我看到运行 Android 版本 4.0.4 的用户的崩溃报告

```
Caused by: java.lang.IllegalArgumentException: Unknown URL content://com.android.calendar/events
at android.content.ContentResolver.insert(ContentResolver.java:726) 
```

当我在我的 Android 手机上测试它时，这很好用，但我想知道在这种情况下有什么问题？

编辑：这是我的代码-

```
 ContentResolver cr = getContentResolver();
        ContentValues values = new ContentValues();
        values.put(Events.DTSTART, startMillis);
        values.put(Events.DTEND, endMillis);
        values.put(Events.TITLE, title);
        values.put(Events.DESCRIPTION, location);
        values.put(Events.CALENDAR_ID, calID);
        values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getDisplayName());
        Uri uri = cr.insert(Events.CONTENT_URI, values); 
```

它在 cr.insert(Events.CONTENT_URI, values) 上崩溃，但只是间歇性地崩溃。到目前为止，仅针对此问题提交了一份崩溃报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:16:52.077

尝试类似的方法，而不是：

```
Uri uri = cr.insert(Events.CONTENT_URI, values); 
```

采用 ：

```
Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values); 
```

# c# - ResourceManager 回退到默认资源，而不是从附属程序集读取

> ID：15790372
> 
> 赞同：0
> 
> 时间：2013-04-03T14:37:09.337
> 
> 标签：c#, localization, satellite-assembly, resourcemanager

我有以下三个项目的文件夹结构：

```
MyClassLibrary1
  Class1.cs
  Resources\
      en-GB\
          Strings.en-GB.txt
      Strings.resx
          Strings.designer.cs (auto-generated)
MyClassLibrary2 (references MyClassLibrary1)
    Class1.cs
MyAppExe (references MyClassLibrary1 and MyClassLibrary2)
    Program.cs 
```

在 MyClassLibrary1 项目下：

```
In Strings.resx, I've string resources defined, let's say:
    <data name="SchoolString"><value>Preschool</value></data>
In Strings.en-GB.txt, I have:
    SchoolString=Playgroup 
```

MyClassLibrary1 的项目属性-> Pre-Build，我有以下内容：

```
CD $(ProjectDir)Resources
FOR /D %%1 IN (*) DO (
    CD "%%1"
    resgen.exe "Strings.%%1.txt"
    if %errorlevel% 0 al.exe /t:lib /culture:"%%1" /embed:"Strings.%%1.resources" /out:MyClassLibrary1.resources.dll
    if not exist "$(TargetDir)%%1" md "$(TargetDir)%%1"
    move /Y "MyClassLibrary1.resources.dll" "$(TargetDir)%%1"
    CD ..
) 
```

在 MyAppExe 项目下的 Program.cs 中：

```
static void Main() {
    Strings.Culture = new CultureInfo("en-GB");
    Trace.WriteLine(Strings.SchoolString);
} 
```

问题是，由于某种原因，ResourceManager 不断回退到默认资源文件（嵌入在 MyAppExe 中）。请帮助我理解我在这里做错了什么。

无论我尝试什么，我都会得到的输出是“Preschool”而不是“Playgroup”。就好像卫星组件根本没有得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:39:07.573

按照[http://support.microsoft.com/kb/839861](http://support.microsoft.com/kb/839861)下提供的正确程序，应用程序现在按预期工作。

我所要做的就是更改“预构建事件命令行”，如下所示：

`CD "$(ProjectDir)Resources"
FOR /D %%1 IN (*) DO (
    CD "%%1"
    resgen.exe "Strings.%%1.txt" **"MyClassLibrary1.Resources.Strings.%%1.resources"**     if %errorlevel% == 0 (
        al.exe /t:lib /embed:**"MyClassLibrary1.Resources.Strings.%%1.resources"** /culture:"%%1" /out:MyClassLibrary1.resources.dll
        if not exist "$(TargetDir)%%1" md "$(TargetDir)%%1"
        move /Y "MyClassLibrary1.resources.dll" "$(TargetDir)%%1"
    )
    CD ..
)`

希望它可以帮助某人。

# html - 获取缩放图像像素的 X,Y 坐标 - KineticJs / HTML5 Canvas Image

> ID：15790379
> 
> 赞同：1
> 
> 时间：2013-04-03T14:37:23.810
> 
> 标签：html, html5-canvas, kineticjs, pixel-manipulation

我正在开发一个允许用户上传照片的应用程序，在上传照片期间，应用程序在服务器上执行检测以获取照片的感兴趣区域（x、y、宽度和高度），并将其返回给客户端（浏览器）。

在客户端，用户需要通过点击感知为边缘的位置来调整感兴趣的区域。见下图。

![感兴趣的区域](https://i.stack.imgur.com/DjlT8.jpg)

我的主要挑战是：

(1) 给定从服务器返回的 x、y、宽度和高度，我如何缩放到确切的感兴趣区域？

到目前为止，这是我对这个问题的解决方案：

```
 var maxWidth = stage.getWidth();
var maxHeight = stage.getHeight();  

var imageObj = new Image();
imageObj.src = "image.jpg";

$(imageObj).load(function(){

var ratio = 1;

 if(imageObj.width > maxWidth)
     ratio = maxWidth / imageObj.width;
 else if(imageObj.height > maxHeight)
     ratio = maxHeight / imageObj.height;

var w = imageObj.width * ratio;
var h = imageObj.height * ratio;

  //region of interest
var roiX = 5;
var roiY = 30;
var roiW = 207;
var roiH = 252;

var face = new Kinetic.Image({
    x: -roiX,
    y: -roiY,
    image: imageObj,
    width: w,
    height: h,
    draggable: true,
    scale: {x:1.7, y:1.7}
});

    layer.add(face);
    stage.add(layer);
}); 
```

如您所见，我的解决方案不是将服务器返回的宽度和高度放在缩放的角度。我真的不知道如何执行计算以获得在宽度和高度内缩放的比率。

(2) 我想获取图像的每个单击像素的 x 和 y 坐标（我将其保存在服务器上的某个位置以备后用）。

（3）没有x，y坐标值，我如何定位同一图像上的像素位置（在图像上应用或不应用缩放）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:54:28.417

只是在这里解决您的主要挑战。您要做的是绘制画布，然后移动和缩放，以便放大适当的区域。

首先你需要转换： http: [//kineticjs.com/docs/symbols/Kinetic.Node.php#getTransform](http://kineticjs.com/docs/symbols/Kinetic.Node.php#getTransform)
应用这个：

```
 layer.getTransform() or face.getTransform() // whether you want to move just the face or the whole layer 
```

然后你需要修改变换： http: [//kineticjs.com/docs/symbols/Kinetic.Transform.php](http://kineticjs.com/docs/symbols/Kinetic.Transform.php)

```
 face.translate(x, y); // move the image (can also do layer) 
 face.scale(sx, sy); // zoom by a scale of x and scale of y 
 layer.draw(); // redraw to see effect 
```

这是一个有用的链接：[Zoom in a canvas using canvas.scale function?](https://stackoverflow.com/questions/13348386/zoom-in-a-canvas-using-canvas-scale-function)

# django - Django celery 任务：新创建的模型 DoesNotExist

> ID：15790380
> 
> 赞同：17
> 
> 时间：2013-04-03T14:37:31.083
> 
> 标签：django, asynchronous, celery, django-celery

为什么我创建的模型实例在之后直接启动的芹菜任务中查询时找不到？例如：

```
# app.views

model = Model.objects.create()    # I create my lovely model in a view
from app.tasks import ModelTask   # I import my Async celery task
ModelTask.delay(model.pk)         # I start the task 
```

一切看起来都很好，如果我在`create()`调用后的任何时候查询，模型应该存在于数据库中。

**更新 1**：我正在使用`transaction.autocommit`Django 提供的默认行为，以供我查看。

但是下面的任务会引发`ObjectDoesNotExist`异常：

```
# app.tasks

class ModelTask(Task):
    def run(self, model_pk):
        from app.models import Model
        Model.objects.get(pk=model_pk) 
```

在我的测试中，正如预期的那样，`model_pk`是一个正确的正整数 ID。

## 结论

我假设这里出现了一些异步/“单独的进程”问题，但我不知道它是什么。如果感觉好像我犯了一些明显的错误。

我不认为数据库事务是答案，因为 Django 的默认“自动提交”方法可确保在`create()`调用该方法后立即执行数据库操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-02-21T14:41:35.077

这些答案需要更新。Django 现在已经`transaction.on_commit()`为这个确切的问题构建了它，他们甚至提供了一个带有任务的示例：

```
transaction.on_commit(lambda: some_celery_task.delay('arg1')) 
```

[https://docs.djangoproject.com/en/2.1/topics/db/transactions/#django.db.transaction.on_commit](https://docs.djangoproject.com/en/2.1/topics/db/transactions/#django.db.transaction.on_commit)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T04:34:20.573

我的代码中遇到了同样的问题。经过长时间的调查，我发现竞争条件正在发生，因为我使用了[@transaction.commit_on_success](https://docs.djangoproject.com/en/1.5/topics/db/transactions/#django.db.transaction.commit_on_success)装饰器。所以只有在视图返回后才提交事务。这是在我调用 celery 任务之后发生的。

一旦我删除了“commit_on_success”装饰器，一切都开始按预期工作。因为 Django 的[默认事务行为](https://docs.djangoproject.com/en/dev/topics/db/transactions/#django-s-default-transaction-behavior)是在任何数据库更改操作之后提交事务。

您可能还想确保您没有使用 TransactionMiddleware，因为它与[@transaction.commit_on_success](https://docs.djangoproject.com/en/1.5/topics/db/transactions/#django.db.transaction.commit_on_success)装饰器做类似的事情。如果你想继续使用它，你应该考虑在你的视图中使用[@transaction.autocommit](https://docs.djangoproject.com/en/1.5/topics/db/transactions/#django.db.transaction.autocommit)装饰器和 celery 任务，或者[@transaction.commit_manually](https://docs.djangoproject.com/en/1.5/topics/db/transactions/#django.db.transaction.commit_manually)。

# git - git - 忽略提交的文件并切换分支

> ID：15790390
> 
> 赞同：1
> 
> 时间：2013-04-03T14:38:15.430
> 
> 标签：git

我有本地仓库和远程，说“上游”。在远程仓库中，一些基本配置说“file1.txt”和“file2.txt”，我将更改拉到分支“some_branch”，然后输入：

```
git update-index --assume-unchanged file1.txt
git update-index --assume-unchanged file2.txt 
```

要允许修改此文件，请使用我不想提交的本地更改添加一些更改。

之后在“上游”中添加了分支“somefeature”

```
fetch upstream somefeature:somefeature 
```

并尝试：

```
$git checkout somefeature
error: Your local changes to the following files would be overwritten by checkout:
    file1.txt
    file2.txt
Please, commit your changes or stash them before you can switch branches.
Aborting

$git checkout -f somefeature 
error: Entry 'file1.txt' not uptodate. Cannot merge. 
```

然后我尝试：

```
$git stash 
No local changes to save

$git stash -u
No local changes to save

$git update-index --no-assume-unchanged .
Ignoring path 
```

我也试过“--skip-worktree”，但也没有成功。

那么，如何使用“add”或“commit -a”跳过本地更改，但能够更改分支，并将此隐藏的更改应用于非其他分支，而不是从当前创建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:56:53.370

要隐藏所有内容，请尝试：

```
git stash save --all --no-keep-index 
```

# visual-studio-2010 - MSBuild 为错误的框架版本创建附属程序集

> ID：15790402
> 
> 赞同：2
> 
> 时间：2013-04-03T14:38:42.637
> 
> 标签：visual-studio-2010, msbuild, .net-2.0, satellite-assembly

我有一个 VS2010 解决方案，它为 .NET 2.0 创建了几个程序集。

这也包括附属程序集。

当我用 VS2010 创建一切时，一切都很好。但是我有一台 XP 机器使用 MSBuild 作为构建服务器。从那里创建的附属程序集无法识别。查看 ILDASM，我看到 VS2010 创建元数据版本 2，而 MSBuild 创建版本 4。我猜这意味着 VS2010 创建正确的 .NET2 版本，而 MSBuild 仅创建 .NET2 的主要程序集，但附属程序集是 .NET4。

我已经从这里知道了这个话题：[什么决定了附属程序集的目标框架版本？](https://stackoverflow.com/questions/6096276/what-decides-the-target-framework-version-of-a-satellite-assembly)

但这对我不起作用。

有什么想法可以让构建服务器创建 .NET2 附属程序集吗？如果我知道如何正确调用 AL.exe，我也许可以增强我的脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:55:08.610

好吧，我破解了。

构建机器 (WinXP) 有一个带有 AL.exe 10.0.30.x 的 Windows SDK 7.1。这是始终创建 .NET4-satellite 程序集的方法。

我的带有 VS2010 的机器（Win7）有一个带有 AL.exe 9.0.30729.1 的 Windows SDK 7.0a。这是尊重目标框架的一个。

我（备份后）用我的那个替换了构建机器中的 AL.exe。这可行，但我认为这是一个非常肮脏的解决方法。

如果有人知道更好的方法，我将不胜感激！

# java - “考虑使用 jsig 库”是什么意思？

> ID：15790403
> 
> 赞同：2
> 
> 时间：2013-04-03T14:38:43.873
> 
> 标签：java, java-native-interface

我正在运行一个使用带有`-Xcheck:jni`标志的 JNI 的 Java 程序，我收到的消息如下所示：

`SIGSEGV: [libjvm.so+0x6fd190], sa_mask[0]=0x00000400, sa_flags=0x10000000, flags was changed from 0x10000004, consider using jsig library`

这意味着什么？我应该担心吗？什么是 jsig 库？

我在 Linux 上使用 Java 7，或者确切地说：

```
JRE version: 7.0_03-b04
Java VM: Java HotSpot(TM) 64-Bit Server VM (22.1-b02 mixed mode linux-amd64 compressed oops) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-11T10:28:48.023

更多细节，因为关于信号链的文档有点稀疏：

Java VM（至少是Oracles 实现，还包括OpenJDK）使用POSIX 信号进行内部通信，因此它安装了信号处理程序，例如SIGSEGV。这意味着，为了正常工作，Java VM 必须获取并检查进程中发生的任何 SIGSEGV，以区分“通信”SIGSEGV 和可能是程序错误的真实 SIGSEGV。

但是信号处理程序是一种全局资源，在一个进程中，任何本机代码都可以安装信号处理程序并替换 Java VM 安装的那些。

-Xcheck:jni 使 VM 运行定期检查，除其他外，检查是否有人从 Java VM 下更改了信号处理程序。如果检测到更改，则会打印警告。

为了解决这个问题（用户安装的信号处理程序取代了 JavaVM 信号处理程序）并容纳可能有理由安装信号处理程序的用户代码，Java VM 使用“信号链接”，这基本上意味着信号处理程序（VM 和用户) 相互链接：JavaVM 信号处理程序首先运行；如果他们认为该信号对 VM 不感兴趣，它会将信号传递给用户处理程序。

有两种方法可以激活此支持：1) 使用您自己的本机启动器（加载 libjvm.so 的 C 程序，调用 JNI_CreateJavaVM 来创建 VM 等）。在这种情况下，如果启动器在创建 Java VM 之前安装其用户信号处理程序，Java VM 将记住用户处理程序并将它们链接到自己的信号处理程序后面。2）如果在创建Java VM之后加载用户本机代码，这不起作用。libjsig.so 是这个问题的答案：它用自己的版本替换系统信号 API（sigaction() 等），任何尝试安装信号处理程序的用户代码都不会替换全局信号处理程序，但用户处理程序会被链接在（已安装的）Java VM 信号处理程序后面。

为了使 (2) 工作，必须在启动 VM 之前使用 LD_PRELOAD 加载 libjsig.so：

例如：LD_PRELOAD=//jre/lib/amd64/libjsig.so java myprogram

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:34:52.660

由于您的问题似乎很有趣，因此我进行了快速谷歌搜索，并找到[了有关 JNA 的页面](http://jna.java.net/javadoc/overview-summary.html)。引用它

> 虚拟机崩溃保护
> 
> 在定义新库和编写测试时遇到导致 VM 崩溃的内存访问错误的情况并不少见。这些通常是由不正确的映射或传递给本机库的无效参数引起的。要生成 Java 错误而不是使 VM 崩溃，请调用 Native.setProtected(true)。并非所有平台都支持这种保护；如果不是，Native.isProtected() 的值将保持为 false。注意：启用保护模式后，您应该使用 jsig 库（如果可用）（请参阅[信号](http://docs.oracle.com/javase/1.4.2/docs/guide/vm/signal-chaining.html)链）以避免干扰 JVM 对信号的使用。简而言之，在启动 Java 之前，将环境变量 LD_PRELOAD（或 LD_PRELOAD_64）设置为 JRE lib 目录（通常为 ${java.home}/lib/${os.arch}/libjsig.so）中 libjsig.so 的路径应用。

因此，据*我猜测*，jsig 库应该在您的 Java 安装目录中的“某处”可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:32:58.043

jsig 库执行信号链接，允许将信号传递给 JVM。 [从 IBM 看到这个](http://publib.boulder.ibm.com/infocenter/realtime/v1r0/index.jsp?topic=%2Fcom.ibm.rt.doc.10%2Fuser%2Fnative_signals.html)

这很重要，因为根据我对 JVM 的理解，它使用 SIGSEGV 信号来确定您是否取消引用空指针，如果是，它将抛出 NullPointerException。

不幸的是，我不记得我从哪里获得了 libjsig.so 的副本，但您应该能够从一些 Red Hat 或 Debian 源中获得它。

# c# - ListBox.SelectedItem 拒绝设置

> ID：15790405
> 
> 赞同：0
> 
> 时间：2013-04-03T14:38:52.533
> 
> 标签：c#, wpf, listbox, selecteditem

以下代码中引发异常的可能原因是什么？

```
var oldItem = this.MyListBox.SelectedItem;

if (this.MyListBox.Items.Contains(newItem))
{
    this.MyListBox.SelectedItem = newItem;

    if (this.MyListBox.SelectedItem != newItem && this.MyListBox.SelectedItem == oldItem) 
        throw new ApplicationException("WTF?");
} 
```

绝不会引发 ListBox.SelectionChanged 事件。

编辑： oldItem 和 newItem 是相同类型的简单业务对象。它们不为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:57:33.613

您需要像这样使用[SetSelected](http://msdn.microsoft.com/en-GB/library/system.windows.forms.listbox.setselected.aspx)方法：

```
MyListBox.SetSelected(index, true); 
```

或将其设置在项目本身上，如下所示：

```
MyListBox.Items(index).Selected = true; 
```

我不确定`newItem`您的问题是什么，因此您需要在列表中识别它的索引，并将其放在我`index`在上述代码段中的位置。

# c - 交叉编译器在哪里寻找库？

> ID：15790407
> 
> 赞同：0
> 
> 时间：2013-04-03T14:39:07.810
> 
> 标签：c, linux, cross-compiling

在 Linux 上使用交叉编译器并定义`--host`选项时`./configure`，它在哪里寻找库？一个人可以定义它应该在哪里寻找库、头文件等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-13T14:09:41.047

--host 标志用于设置生成的二进制文件将运行的平台。这个 --host 标志通常用于配置 libs/bins 的交叉编译，但不用于生成交叉编译器。

要使用您的交叉编译器，您需要在本地环境（通常是 CC、CXX、STRIP、AR、AS）中导出一些指向您的交叉工具（arm-linux-*）的环境变量。之后，设置 CFLAGS (-I) 和 LDFLAGS (-L) 正确指向你的交叉工具链的 rootfs。

# linux - 了解操作系统引导加载 - 程序集

> ID：15790409
> 
> 赞同：5
> 
> 时间：2013-04-03T14:39:08.530
> 
> 标签：linux, assembly, operating-system

我正在尝试更深入地了解操作系统。所以，linux引导必须处理一个汇编文件。我知道，`mov, push, pop,`但在这里我很迷茫：

```
.globl  __start
    .ent    __start
__start:
    br  $29,2f
2:  ldgp    $29,0($29)
    jsr $26,start_kernel
    call_pal PAL_halt
    .end __start

switch_to_osf_pal:
    subq    $30,128,$30
... 
```

如果我说那`__start`是一个标签，我是对的吗？那么一旦在其他代码和平中调用它就会被调用吗？我试图用谷歌搜索以了解`ldgp`, 或`call_pal`符号，但我一无所获。`switch_to_osf_pal`最后，我在以这种方式调用的c文件中找到了`switch_to_osf_pal(2, pcb_va, pcb_pa, VPTB);`这个带这个参数的函数调用汇编函数吗？

抱歉，如果有太多问题，但我没有找到任何明确的文档

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:57:51.783

`__start`是一个标签。

`ldgp`表示在[Alpha 程序集中](http://www.alphalinux.org/wiki/index.php/Alpha_Assembly)*加载全局指针*。

`call_pal`表示*调用特权架构库*。它是无条件跳转到异常处理程序。

[汇编程序员指南](http://www.cs.cmu.edu/afs/cs/academic/class/15213-f98/doc/alpha-asm.pdf)中的更多信息

# sql - 在 Access VBA 中使用 SQL 时输入参数值

> ID：15790411
> 
> 赞同：1
> 
> 时间：2013-04-03T14:39:17.003
> 
> 标签：sql, vba, ms-access, sql-update

运行此代码时，我不断收到“输入参数值”输入框。

```
Private Sub UpdateTables()
Dim strSQL As String
strSQL = "update tblTest,ImportedTable set tblTest.Unit_Cost=ImportedTable.Unit_Cost where tblTest.Part_No=ImportedTable.Part_No"
DoCmd.RunSQL strSQL
End Sub 
```

该框显示为`tblTest.Unit_Cost`、`ImportedTable.Unit_Cost`、`tbltTest.Part_No`和`ImportedTable.Part_No`。

这两个表，`tblTest`并且`ImportedTable`存在并且拼写正确。`Unit_Cost`并且`Part_No`两者在字段名称中都有空格（我知道这很糟糕），因此在引用它们时使用“_”。我尝试取出空间并重新运行代码，但这并没有解决它。

关于我做错了什么有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:51:39.203

`[]`在 MS Access 中，当字段包含空格时，您必须将字段名称括在括号中。

```
Private Sub UpdateTables()
Dim strSQL As String
strSQL = "update tblTest,ImportedTable set tblTest.[Unit Cost]=ImportedTable.[Unit Cost] where tblTest.[Part No]=ImportedTable.[Part No]"
DoCmd.RunSQL strSQL
End Sub 
```

# php - 未找到 Macports 端口

> ID：15790412
> 
> 赞同：5
> 
> 时间：2013-04-03T14:39:17.363
> 
> 标签：php, terminal, macports

我是一个相对较新的 Mac 用户（来自 ubuntu/debian 背景），并试图用 macports "port" 命令替换 apt-get。我已经成功安装了 XCode 和 Macports（我的终端识别“sudo port install”命令）。但是，无论我尝试安装什么，似乎都找不到端口。

我尝试过：

sudo port install mysql5-server 和 curl 和 gd 等其他要求。我不断收到“找不到端口”错误。

macports 在哪里寻找，问题可能出在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-15T01:16:33.320

我遇到了同样的问题，当时我对解决问题感到非常失望！但现在它对我有用！

首先，关闭“防火墙”，然后尝试以下命令：

```
sudo port -d selfupdate 
```

或者等效地这个命令：

```
sudo port -d sync 
```

它将更新端口树，之后，您将能够使用这个不错的命令进行安装！

享受吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:02:40.733

如果这不起作用：

```
sudo port install mysql5 +server 
```

而您只是想安装 MySQL 服务器，您可以直接从 MySQL 站点下载已编译的版本。他们也有可用的工作台。并非 Mac 上的所有内容都需要从源代码构建，因为大多数 Mac 具有非常相似的硬件。[http://www.mysql.com/downloads/mysql/#downloads](http://www.mysql.com/downloads/mysql/#downloads)

他们确实提供了 tar 版本和 DMG 作为可执行文件。

# java - 春季发布-订阅？

> ID：15790420
> 
> 赞同：4
> 
> 时间：2013-04-03T14:39:35.880
> 
> 标签：java, spring, design-patterns, spring-mvc, publish-subscribe

谁能告诉我如何在 Spring 中使用 Publish-Subscribe 模式？Spring 是否有任何内置功能来实现这一点？

在 Java 中，我们可以这样做：[http](http://www.avajava.com/tutorials/lessons/observer-pattern.html) ://www.avajava.com/tutorials/lessons/observer-pattern.html 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T15:37:55.410

Spring是Java；显然，您可以在 Spring 中使用任何 Java 模式，以及 Spring 的额外好处（尤其是 IoC 和 AOP）。Spring 本身[提供了自己的事件](http://www.javacodegeeks.com/2012/08/observer-pattern-with-spring-events.html)，可以用来做这件事。

[Spring Integration](http://www.springsource.org/spring-integration)为 Spring带来了大量的 Java EE 模式，包括 Pubsub。对于简单的用例，它可能有点繁重；像[RabbitMQ](http://www.rabbitmq.com/)和[Spring 的 AMQP 支持](http://digitalsanctum.com/2010/08/31/using-rabbitmq,-spring-amqp-and-spring-integration/)更轻。

*PubSub*只是一种模式：有很多方法可以实现它。哪个最有意义取决于很多因素。在提出如此广泛的问题之前，请考虑在网上多搜索一下；有大量资源涵盖了广泛的实施选择。

# ios - Facebook Web 对话框在单击警报视图按钮后崩溃 (iOS)

> ID：15790422
> 
> 赞同：2
> 
> 时间：2013-04-03T14:39:38.750
> 
> 标签：ios, facebook, modal-dialog, alertview

我正在尝试将 iOS 应用程序与 Facebook 集成。登录和大多数功能都运行良好，但是当我尝试让 FBWebDialogs 分享用户发布的内容时遇到了一个小问题。如果它在发布后直接调用（调用函数），但当我尝试从警报视图执行相同操作时崩溃，它刚刚开始出现并在完全加载之前突然消失而不会破坏应用程序并且不会引发错误. 当用户在 iPhone 的设置中登录时，它使用 iOS 6 中具有本机视图而不是 FBWebDialogs 的新 Facebook 功能工作。我正在使用第三方库来自定义警报视图，但它与标准警报视图相同。

我认为这是一种不屑一顾的观点，但没有足够的关于 iOS 的知识来确定。任何想法？。谢谢你。

那是代码：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    switch (buttonIndex)
    {
        case 1:
        {
            [self sharePostOnFacebook];
            break;
        }
        default:
            break;
    }
} 
```

调用下一个方法，但模态视图永远不会完全出现。它只是闪烁并消失

```
-(void) sharePostOnFacebook
{
    if (shareData !=nil && [[shareData objectForKey:@"success"] boolValue])
    {
        NSString *caption = [shareData objectForKey:@"caption"];
        . ..........

        BOOL displayedNativeDialog =
        [FBNativeDialogs
         presentShareDialogModallyFrom:self
         initialText:description
         image:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:picture]]]
         url:[NSURL URLWithString:link]
         handler:^(FBNativeDialogResult result, NSError *error) {

             .........
         }];
        // Fallback, show the view controller that will post using me/feed
        if (!displayedNativeDialog)
        {
            [[[self presentingViewController] presentingViewController] dismissModalViewControllerAnimated:YES];

            // Put together the dialog parameters
            NSMutableDictionary *params =
            [NSMutableDictionary dictionaryWithObjectsAndKeys:
             .............
             nil];

            FBSession *activeSession = [FBSession activeSession];
            // Invoke the dialog
            [FBWebDialogs presentFeedDialogModallyWithSession:activeSession
                                                   parameters:params
                                                      handler:
             ^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                ........
             }];
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T23:27:34.333

这是我解决的解决方案（[https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)）。

关键似乎是延迟调用 FBWebDialog。

```
[self performSelector:@selector(sendRequest) withObject:nil afterDelay:0.5]; 
```

而 sendRequest 可以只是

```
- (void)sendFlyerFloRequestToFriends
{
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:nil];
   [FBWebDialogs presentRequestsDialogModallyWithSession: ... 
```

如果使用 performSelector 调用 presentRequestsDialogModallyWithSession （使用延迟），那么崩溃问题似乎消失了 - 不知道为什么，但似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T09:38:21.530

迟到的答案..但记录在案..我已经使用以下方法修复了它：

```
-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex; 
```

代替：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex; 
```

我认为问题与仍在显示 UIAlertView 时出现的 FBWebDialog 有关。使用 'didDismiss' 可确保在呈现 web 对话框时警报已经消失。

# mysql - MySQL 触发器 - 插入前更新数据

> ID：15790427
> 
> 赞同：2
> 
> 时间：2013-04-03T14:39:45.277
> 
> 标签：mysql, triggers

我正在尝试创建一个触发器，将输入日期更改为 unix 时间戳。当我向表中插入一个值时，插入的值为 NULL

```
CREATE TRIGGER `updateDate` BEFORE INSERT ON  `tl_calendar_events` 
FOR EACH
ROW SET NEW.startDate = UNIX_TIMESTAMP(STR_TO_DATE(NEW.startDate, '%d.%m.%Y')) 
```

'startDate' 的输入值类似于 01.11.2013

表定义：

```
CREATE TABLE IF NOT EXISTS `tl_calendar_events` (
...
`startDate` int(10) unsigned DEFAULT NULL,
...
PRIMARY KEY (`id`),
KEY `pid` (`pid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=66 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:00:44.557

您不能将字符串插入 INT 列。看起来 STRICT 服务器模式已关闭，并且已插入默认值（... `startTime int(10) unsigned DEFAULT NULL`...）。

唯一的方法是在插入这些值时更改它们，例如 -

```
INSERT INTO tl_calendar_events(startDate)
  VALUES (UNIX_TIMESTAMP(STR_TO_DATE('01.11.2013', '%d.%m.%Y'))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:12:48.923

将列的数据类型更改`startDate`为 varchar，然后您的上述查询将起作用。采用

```
`startDate` VARCHAR(10) NULL DEFAULT NULL in your table creation query 
```

或者

您可以在程序中将数据类型更改为`DATE`或`DATETIME`转换为 unix 时间，在这种情况下不需要该触发器

# javascript - 用另一个 js 数组填充一个 javascript 数组

> ID：15790429
> 
> 赞同：0
> 
> 时间：2013-04-03T14:39:50.063
> 
> 标签：javascript, arrays

`listOfFriends`我有一个包含对象的数组`[{"name" : "fName lName", "uid" : "0102030405"}], ...`

我想减小这个数组的大小，因为我只需要`uids`，所以我想制作另一个数组，只有`uids`

```
var listOfFriends, listOfFriendsUIDs;
//listOfFriends gets filled

for(var i = 0; i < listOfFriends.length; i++){
  listOfFriendsUIDs[i].uid = listOfFriends[i].uid;  // this line isn't working
  //listOfFriendsUIDs is still undefined untill the start of this loop

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:42:13.767

您可以使用[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)ID 创建新数组：

```
var listOfFriendsUIDs = listOfFriends.map(function(obj) { return obj.uid; }); 
```

检查浏览器[兼容性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Browser_compatibility)并在需要时使用[shim 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)

**演示：http:** [//jsfiddle.net/x3UkJ/](http://jsfiddle.net/x3UkJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:43:56.523

尝试使用投影方法[.map()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
var listOfFriendsUIDs = listOfFriends.map(function(f){ return f.uid;}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:42:24.553

`listOfFriendsUIDs[i]`未定义，因此您无法访问其`uid`属性。您要么需要：

```
// creates an array of UID strings: ["0102030405", ""0102030405", ...]
listOfFriendsUIDs[i] = listOfFriends[i].uid; 
```

或者

```
// creates an array of objects with a uid property: [{uid:"0102030405"}, ...]
listOfFriendsUIDs[i] = {}
listOfFriendsUIDs[i].uid = listOfFriends[i].uid; 
```

# angularjs - ng-app 指令的位置（html vs body）

> ID：15790432
> 
> 赞同：103
> 
> 时间：2013-04-03T14:39:59.200
> 
> 标签：angularjs

我最近查看了一个使用 angular 构建的 webapp 的代码，发现它是使用`ng-app="myModule"`放置在`<body>`标签上的指令编写的。在学习 Angular 时，我只见过它在`<html>`标签上使用过，正如 angular docs [here](http://docs.angularjs.org/guide/bootstrap)、[here](http://docs.angularjs.org/api/ng.directive:ngApp)和他们的[教程](http://docs.angularjs.org/tutorial/step_00)中所推荐的那样。

我自己对此进行了一些探索，发现了一些问题，尤其是[这个](https://stackoverflow.com/questions/15583289/multi-modules-in-one-page-with-angularjs)问题和类似的[这个问题](https://stackoverflow.com/questions/15641730/angular-js-directives-in-different-modules)，它们讨论了为一个页面加载多个模块。但是，这种技术与我的情况不同，因为它涉及将 ng-app 放置在主体*内*的元素上，并使用手动引导同时运行两个 Angular 应用程序。

据我所知，使用`ng-app`on`<html>`或`<body>`. 据我了解，它指定了角度应用程序的根，因此将`ng-app`其放置在角度范围之外，但我想不出这会影响事物的任何主要方式。所以我的问题是：放置在其中一个标签而不是另一个标签上的技术区别是什么？`<body>``<head>``ng-app`

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-04-03T14:42:30.257

你放的地方没什么大的区别`ng-app`。

如果你把它放在上面，`<body>`那么你有一个更小的 AngularJS 范围，它会**稍微**快一些。

但我已经使用`ng-app`.`<html>``<title>`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-03T11:38:41.193

我在一个开发旧版应用程序的团队中，发现最好在 div 中使用 ng-app 标签，该标签用作包装器，将新代码与旧版代码隔离开来。

我们在开发严重依赖 jqGrid 和 Dojo 的应用程序时发现了这一点。

当我们将 ng-app 添加到 head 标签时，它会炸毁网站，但是当我们使用包装器时，我们可以毫无问题地使用 Angular。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-18T11:56:48.507

AngularJS 将引导它找到的第一个 ng-app！就是这样。如果你有多个 ng-app，它只会处理第一个。如果要引导任何其他元素，请使用 angular.bootstrap()

ng-app 属性的值是使用以下命令创建的模块：

```
angular.module("module_name", []) 
```

一个模块定义了 Angular 如何引导，因为我们没有与其他编程语言不同的 main() 方法。如果 ng-app 的值为空，则默认使用默认模块 'ng'。

据说速度稍微快一些，因为 Angular 将处理 ng-app 所在元素内的所有元素。但我有点怀疑，因为除非你有一个非常庞大的 DOM，否则这种差异几乎不会被察觉。

如果你想要这里的例子：http: [//noypi-linux.blogspot.com/2014/07/angularjs-tutorials-understanding.html](http://noypi-linux.blogspot.com/2014/07/angularjs-tutorials-understanding.html)

# java - 访问类路径 servlet 中存在的文件

> ID：15790433
> 
> 赞同：0
> 
> 时间：2013-04-03T14:40:01.350
> 
> 标签：java, jakarta-ee, servlets

在 DynamicWebProject - Eclipse 中，如何获取 src 文件夹中存在的文件的文件对象，我的意思是说类路径。

下面的程序工作正常，但是 wtpwebapps 中存在对文件的新更新，相反我只想更改 Eclipse 的 src 文件夹中存在的文件（如何获取类路径中存在的文件的 FileOutputStream）。

```
 String filename1 = "/WEB-INF/classes/server123.properties";
                ServletContext context = req.getSession().getServletContext();
                String path1 = context.getRealPath(filename1);

            System.out.println("PATH 1 IS :"+path1);
            FileInputStream fis1 = new FileInputStream(new File(path1));
            int ch1;
            while ((ch1 = fis1.read())!=-1) {
                System.out.print((char)ch1);
            }
            fis1.close();

            FileOutputStream fos = new FileOutputStream(path1);
            fos.write("jayesh".getBytes());
            fos.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:53:56.083

您可以在代码中使用 getServletContext()/filename，即

```
properties.load(new FileInputStream(getServletContext().getRealPath("/filename"))); 
```

或者

```
properties.load(new FileInputStream(getServletContext().getRealPath(/filename"))); 
```

# vb.net - vb.net - 在 chrome 中设置下载文件的名称

> ID：15790441
> 
> 赞同：0
> 
> 时间：2013-04-03T14:40:30.213
> 
> 标签：vb.net, google-chrome

我想制作一个可以从 chrome 下载文件的应用程序，我只需要在 chrome 中下载文件，而不是在其他地方或 Visual Basic 中的 webbrowser 控件，所以我使用以下代码下载文件：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Process.Start("chrome.exe", "http://zbigz.com/file/1c3d3743dcb8f1d438d71fdc3137e0b79aaa4209/2")
End Sub 
```

它将被下载。但我的主要问题是我无法在下载之前更改下载的文件名。我在 chrome 设置中检查了“下载前询问每个文件的保存位置”以下载文件，它将弹出 savefiledialog 以获取文件名和位置。我需要知道如何填补这些领域。

如果有人有另一种方法来更改 chrome 的下载文件名，请注意我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:08:42.900

所以，如果你想在 PHP 中这样做，你可以使用以下代码：

```
<?php
//Filepath is the full url to your file
$filepath="http://www.example.com/examplefile";
//Filename is the name you want to display for the file, even if the files name is "1" you can set the name to be "2"
$filename='Example Name Here';
//The files description:
$filedescription='This is my example file';

//The first line here contains the filetype of the file, so that it can be open correctly.
//This example is .pdf, but you can use other filetypes - as told later on

//This following "block" contains information about the file
header('Content-Type: application/pdf');
    header("Content-Transfer-Encoding: Binary"); 
    header("Content-disposition: attachment; filename=" . $filename); 
    header("Content-Description: $filedescription");             
    header("Content-Length: " . filesize($filepath));

//Download the file
    readfile($filepath);
?> 
```

如果您的文件不是 .pdf，请在此处查看不同文件类型的完整列表： [http ://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)

因此，如果您的文件是 .jpg，则代码应该是；

```
header('Content-Type: image/jpeg'); 
```

代替;

```
header('Content-Type: application/pdf'); 
```

所以......这个脚本将做的是，当它从浏览器打开时，它会获取您尝试下载的文件，并在下载之前更改信息。该文件可以上传到网络服务器或（不确定）保管箱帐户。

VB代码应该是：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
//The url should be the one to your .php file
    Process.Start("chrome.exe", "http://example.com/example.php")
End Sub 
```

我现在如果你不习惯 php 等，这可能会很模糊，但不要害怕 - 我会帮助你！如果有什么问题，请发表评论；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:20:05.577

## 确实很诡异！

**尝试重写页面以获得内容。**

目前，该页面只包含脚本。

```
<?php
$filepath="http://www.internetdownloadmanager.com/pictures/IDM_title.gif";
$filename='IDM_title.gif';

header('Content-Type: image/gif');
header("Content-Transfer-Encoding: Binary"); 
header("Content-disposition: attachment; filename=" . $filename);       
header("Content-Length: " . filesize($filepath));

readfile($filepath);
?>

<!--A simple html-->
<html>
<header>
<title>Downloading</title>
</header>
<body>
<label>Redirecting to download</label>
</body>
</html> 
```

将文件重命名为“index.html”并将其放入您的“muviz.net/download/”文件夹，然后您就可以访问地址“ [http://www.muviz.net/download/](http://www.muviz.net/download/) ”，然后您将下载您的文件！希望 ;）

# actionscript-3 - Flash CS6 - 与 Internet 通信的 SWF 文件

> ID：15790443
> 
> 赞同：0
> 
> 时间：2013-04-03T14:40:33.613
> 
> 标签：actionscript-3, flash-cs6

我有从我网站上托管的 txt 文件加载的动态文本。当我播放 swf 文件时，我收到 Flash Player 安全错误：myfile.swf 正在尝试与启用 Internet 的位置进行通信：myurl.com。要让此应用程序与 Internet 通信，请单击设置。

有没有办法在 flash 中授予 myurl.com 权限 - 而不是在 flash 播放器设置中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:47:32.920

你在本地启动 swf 吗？不，没有其他授予权限的方法，只能通过将带有 swf 文件的文件夹（或任何父文件夹或空磁盘分区）添加到 Flash 播放器设置面板中的受信任位置。

# javascript - 通过广播点击显示多个内容

> ID：15790445
> 
> 赞同：0
> 
> 时间：2013-04-03T14:40:35.523
> 
> 标签：javascript, jquery

当您单击单选按钮时，我正在使用它来显示多个内容。而且我看不到内容。但是当我将 ti 值更改为 1,2 3, 4, 6, 7, 8 时，它工作正常。知道我在做什么错吗？

```
var options = $('#options').find('input');

    options.click(function(){
    $('#deafaultBottom').hide();
      var id = "opt" + $(this).val();
      $(".optDivs").hide();
      $("#" + id).show();

    }); 
```

这是我的html结构

```
<div id="options">
        <div class="opt1"><input type="radio" name="primary" value="color" /></div>
        <div class="opt2"><input type="radio" name="primary" value="dry" /></div>
        <div class="opt3"><input type="radio" name="primary" value="damaged" /></div>
        <div class="opt4"><input type="radio" name="primary" value="thinning" /></div>
    </div>

<div class="holderOne">
        <div id="opt1" class="optDivs" style="display:none;"><img src="images/bigBottom1.png" /></div>
        <div id="opt2" class="optDivs" style="display:none;"><img src="images/bigBottom2.png" /></div>
        <div id="opt3" class="optDivs" style="display:none;"><img src="images/bigBottom3.png" /></div>
        <div id="opt4" class="optDivs" style="display:none;"><img src="images/bigBottom4.png" /></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:59:21.293

您的问题是值是“颜色”、“干燥”、“损坏”和“变薄”，但您的持有人 ID 是 opt1、opt2、opt3、opt4。您想要做的是在您的选项中添加“1”、“2”、“3”和“4”，并在它们旁边放置一些文本以供用户查看。这是带有建议修改的代码：

```
<div id="options">
    <div class="opt1"><input type="radio" name="primary" value="1" />color</div>
    <div class="opt2"><input type="radio" name="primary" value="2" />dry</div>
    <div class="opt3"><input type="radio" name="primary" value="3" />damaged</div>
    <div class="opt4"><input type="radio" name="primary" value="4" />thinning</div>
</div>

<div class="holderOne">
    <div id="opt1" class="optDivs" style="display:none;"><img src="images/bigBottom1.png" /></div>
    <div id="opt2" class="optDivs" style="display:none;"><img src="images/bigBottom2.png" /></div>
    <div id="opt3" class="optDivs" style="display:none;"><img src="images/bigBottom3.png" /></div>
    <div id="opt4" class="optDivs" style="display:none;"><img src="images/bigBottom4.png" /></div>
</div> 
```

[这是一个 jsFiddle](http://jsfiddle.net/weDj4/) ，代码可以正常工作，并且在 div (1,2,3,4) 中添加了一些文本，以表明它正在正确切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:23:26.393

试试这个：

```
var options = $('#options').find('input');
    options.click(function(){
      $('#deafaultBottom').hide();
      $(".optDivs").hide();
      $("#" + $($(this).parent()).attr('class') ).show();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:36:44.727

我建议：

```
var options = $('#options').find('input');

options.click(function () {
    // I have no idea what element you're affecting here
    $('#deafaultBottom').hide();
    // using the class-name of the parent div element
    var ref = this.parentNode.className;
    // hiding all divs within the .holderOne element
    $('.holderOne div').hide();
    // showing the element that has the same id as the
    // parent's class-name
    $('#' + ref).show();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NF6yv/)。

这利用了要*显示*的元素具有与的父元素`id`的类名匹配的属性这一事实。`radio``div`

由于父`div`元素可能有多个类，您可以使用正则表达式来识别以字符串开头`opt`并后跟数字的类名：

```
var options = $('#options').find('input');

options.click(function () {
    $('#deafaultBottom').hide();
    var ref = this
    .parentNode
    // matches the first instance in which the string 'opt' is followed by
    // a, or a sequence of, number(s).
    .className.match(/\b(opt\d+)\b/)[0];
    console.log(ref);
    $('.holderOne div').hide();
    $('#' + ref).show();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NF6yv/1/)。

# shell - 使用 CakePHP shell 将输出写入文件

> ID：15790446
> 
> 赞同：0
> 
> 时间：2013-04-03T14:40:41.647
> 
> 标签：shell, cakephp, cakephp-1.3

我试图从 cakephp 外壳中简单地将“hello world”写入文件，并计划最终使用我们的产品模型编写 sitemap.xml 文件。我发现了这个：让我开始的[问题......](https://stackoverflow.com/questions/11462829/how-can-i-capture-output-from-a-cakephp-shell)

但是我认为Cake 1.3.6（我正在使用）不支持ConsoleOutput，或者我需要包含包含它的类。

尝试从终端运行文件时出现的错误： **PHP 致命错误：第 7 行的 /public/vendors/shells/sitemap.php 中未找到 Class 'ConsoleOutput'**

这是我的代码：

```
class SitemapShell extends Shell {

public function __construct($stdout = null, $stderr = null, $stdin = null) {
    // This will cause all Shell outputs, eg. from $this->out(), to be written to
    // TMP.'shell.out'
    $stdout = new ConsoleOutput('file://'.TMP.'shell.out');

    // You can do the same for stderr too if you wish
    // $stderr = new ConsoleOutput('file://'.TMP.'shell.err');

    parent::__construct($stdout, $stderr, $stdin);
}

public function main() {
    // The following output will not be printed on your console
    // but be written to TMP.'shell.out'
    $this->out('Hello world');
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:09:27.880

您是正确的，CakePHP 1.3 中没有 ConsoleOutput 功能-您可以升级到版本 2.* 吗？

如果没有，您可以只使用常规 PHP：

```
$fp = fopen('hello.txt', 'w');
fwrite($fp, 'hello world');
fclose($fp); 
```

希望这可以帮助。

托比

# javascript - 在我的 Flask 应用程序中嵌入 Bash shell？

> ID：15790456
> 
> 赞同：2
> 
> 时间：2013-04-03T14:41:03.187
> 
> 标签：javascript, python, bash, flask

我知道这有点奇怪而且根本不安全，但是有没有办法在运行 webapp 的机器上显示带有遥控器的 bash shell？
我想在烧瓶的 web 应用程序中直接运行一个 bash 解释器，有人知道该怎么做吗？

非常感谢，
如果我的帖子不够清楚，请告诉我，我会努力改进它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:36:13.540

您可以创建一个看起来像是打开了一个新终端的界面。为此，创建一个表单，每次按 Enter 键时，都会将此数据（例如使用 jQuery.ajax）发送到服务器。

在服务器端，使用[subprocess](http://docs.python.org/2/library/subprocess.html)运行从服务器获取的命令。您可能需要解析这些数据（类似于：my_string.split(' ')）才能在列表中获取参数。您可以使用 JSON 数据类型的 subprocess.check_output 将该命令的结果返回给客户端。使用 Javascript（和 jQuery），您现在可以解析该数据并将其显示在您想要的任何位置。

# javascript - 如何在 .html() 方法中组合 HTML 标记和变量？

> ID：15790461
> 
> 赞同：1
> 
> 时间：2013-04-03T14:41:17.790
> 
> 标签：javascript, jquery

我有一个代表文件名的变量，我打算将具有该文件名的 html 图像插入到 div 中，如下所示：

```
$("#s_premise_description").html("<img src="scenario/images/" + myVariable + " />"); 
```

除了显然不起作用，但它希望能解释我正在尝试做的事情。

我想一个简单的解决方法就是创建一个像这样的变量：

```
var imgURL = "<img src="scenario/images/" + myVariable + " />"; 
```

然后使用 imgURL 作为 .html() 的值，但我认为还有另一种方法，我的语法是错误的。

编辑：所以在刷新我的问题之前，我摆弄了一下，并尝试了单引号，它似乎正在工作。

现在一切似乎都在工作。有很多不同的方式来处理这里发布的报价，所以感谢大家的反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:43:10.643

您需要转义引号：

```
var imgURL = "<img src=\"scenario/images/" + myVariable + "\" />"; 
```

或者

```
var imgURL = '<img src="scenario/images/' + myVariable + '" />'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:43:14.233

您必须在字符串中转义双引号，或使用单引号：

```
$("#s_premise_description").html("<img src=\"scenario/images/" + myVariable + "\" />"); 
```

或者：

```
$("#s_premise_description").html('<img src="scenario/images/' + myVariable + '" />'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T14:49:44.393

你缺少引号，使用这个：

```
 $(target).html("<img src='scenario/images/" + myVariable + "' />"); 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T14:43:45.453

你被你的报价缠住了：

`$( "#s_premise_description" ).html("<img src="scenario/images/" + myVariable + " />");`

应该是这样的：

`$( "#s_premise_description" ).html("<img src='scenario/images/" + myVariable + "' />");`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T14:44:00.223

您需要像这样转义引号：

```
$("#s_premise_description").html("<img src=\"scenario/images/" + myVariable + "\" />"); 
```

或者你可以只使用单引号。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T14:44:18.743

你应该这样做：

```
$("#s_premise_description").html("<img src='scenario/images/" + myVariable + "' />");
                                           ^                                  ^ 
```

# iphone - 如何防止 UIScrollView 中的左右平移

> ID：15790464
> 
> 赞同：0
> 
> 时间：2013-04-03T14:41:27.970
> 
> 标签：iphone, objective-c, xcode

我已经构建了一个带有页面的 iPhone 应用程序，以在 UIScrollView 中显示 .txt 文件的内容。出于某种原因，我的纯 txt 文件导致 Scrollview 允许它稍微向左和向右平移，我希望它只能向上向下滚动。

真的需要这个帮助..

谢谢

```
#import "ITFAQController.h"
#import "FTCoreTextView.h"

@implementation ITFAQController

- (NSString *)textForView {

NSString *path = [[NSBundle mainBundle] pathForResource:@"faq" ofType:@"txt"];
NSError *error;
return [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding         error:&error];
}

/*- (id)init
 {
 self = [super init];
 if (self) {
 // Custom initialization
 [self showLogoInNavBar:YES];
 }
 return self;
 }
 */
#pragma mark - View lifecycle

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
[super viewDidLoad];
[self showLogoInNavBar:YES];

UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 330, (self.view.bounds.size.height - 90))];
[self.view addSubview:scrollView];

FTCoreTextView *ctView = [[FTCoreTextView alloc] initWithFrame:CGRectMake(10, 0, 300, scrollView.bounds.size.height)];
[ctView setText:[self textForView]];

FTCoreTextStyle *defaultStyle = [FTCoreTextStyle styleWithName:FTCoreTextTagDefault];
[defaultStyle setFont:kITDescriptionFont];
[defaultStyle setTextAlignment:FTCoreTextAlignementJustified];
[defaultStyle setParagraphInset:UIEdgeInsetsMake(5, 10, 0, 0)];
[ctView addStyle:defaultStyle];

FTCoreTextStyle *title = [FTCoreTextStyle styleWithName:@"title"];
[title setFont:kITTitleFont];
[title setColor:kITCellFontColor];
[title setParagraphInset:UIEdgeInsetsMake(10, 0, 5, 0)];
[ctView addStyle:title];

FTCoreTextStyle *bold = [FTCoreTextStyle styleWithName:@"bold"];
[bold setFont:[UIFont boldSystemFontOfSize:14]];
[ctView addStyle:bold];

FTCoreTextStyle *link = [FTCoreTextStyle styleWithName:FTCoreTextTagLink];
[link setColor:[UIColor blueColor]];
[ctView addStyle:link];

FTCoreTextStyle *bullets = [FTCoreTextStyle styleWithName:FTCoreTextTagBullet];
[bullets setBulletColor:kITCellFontColor];
[bullets setFont:kITItalicFont];
[bullets setParagraphInset:UIEdgeInsetsMake(0, 10, 0, 0)];
[ctView addStyle:bullets];
[ctView fitToSuggestedHeight];

[scrollView addSubview:ctView];
[scrollView setContentSize:[ctView suggestedSizeConstrainedToSize:CGSizeMake(scrollView.bounds.size.width, CGFLOAT_MAX)]];
//[ctView fitToSuggestedHeight];
//[ctView sizeToFit];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:46:56.113

```
CGRectMake(0, 0, 330, (self.view.bounds.size.height - 90))]; 
```

用 320 替换 330。这应该可以解决问题。

**编辑：**如评论中所写，您应该更喜欢`self.view.bounds.size.width`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:47:07.250

问题可能与这一行有关：

```
[scrollView setContentSize:[ctView suggestedSizeConstrainedToSize:CGSizeMake(scrollView.bounds.size.width, CGFLOAT_MAX)]]; 
```

我不知道那个方法是做什么的，但它可能会给你一个`contentSize`with `width > 320`。我认为，在那之后添加以下几行可以解决它：

```
if (scrollView.contentSize.width > self.view.bounds.size.width)
    [scrollView setContentSize:CGSizeMake(self.view.bounds.size.width,scrollView.contentSize.height)]; 
```

# python - 按频率分组数据

> ID：15790467
> 
> 赞同：2
> 
> 时间：2013-04-03T14:41:41.120
> 
> 标签：python, group-by, timestamp, time-series

我做了一个代码，它在下面生成随机数，并将它们保存在一个 csv 中，如下所示，我正在尝试按函数进行分组学习。例如，我想按时间戳对这些组进行总和或平均值。我是 Python 新手，但我找不到任何开始的地方。Ulitmately 我想做同样的事情，但 1 分钟或 5 分钟（从 00:00:00 开始每 5 分钟一次，在我下面的示例中没有足够的数据，但会做类似 13:35:00 到 13:40:00 的事情下一个 13:40:00 包括到 13:45:00 排除等），我想我可以计算出从时间戳中提取分钟部分的 1 分钟，但 5 分钟似乎很复杂。不要求复制粘贴代码，但我不知道从哪里开始说实话。

```
级别时间戳
99 2013 年 3 月 4 日 13:37:20
98 2013 年 3 月 4 日 13:37:20
98 2013 年 3 月 4 日 13:37:20
99 2013 年 3 月 4 日 13:37:20
105 2013 年 3 月 4 日 13:37:20
104 2013 年 3 月 4 日 13:37:20
102 2013 年 3 月 4 日 13:37:21
102 2013 年 3 月 4 日 13:37:21
103 2013 年 3 月 4 日 13:37:22
82 2013 年 3 月 4 日 13:37:23
83 2013 年 3 月 4 日 13:37:23
82 2013 年 3 月 4 日 13:37:23
83 2013 年 3 月 4 日 13:37:23
54 2013 年 3 月 4 日 13:37:24
55 2013 年 3 月 4 日 13:37:24
54 2013 年 3 月 4 日 13:37:24
55 2013 年 3 月 4 日 13:37:24
56 2013 年 3 月 4 日 13:37:25
57 2013 年 3 月 4 日 13:37:25

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:58:06.193

它可以用 itertools [http://docs.python.org/2/library/itertools.html#itertools.groupby来完成](http://docs.python.org/2/library/itertools.html#itertools.groupby)

但要小心：

> 每次键函数的值发生变化时，它都会生成一个中断或新组（这就是为什么通常需要使用相同的键函数对数据进行排序的原因）。

一个示例用法：

如果您的数据已作为 Level 、时间戳对的列表进行处理。

```
data = [(99, '03/04/2013 13:37:20'), (98,  '03/04/2013 13:37:20'), ...] 
```

并且您想通过 5 分钟间隔的数据对组进行 AVG

```
data.sort(key=lambda i: i[1]) # sort with timestamp
results = []

def keyfunc(timestamp, interval = 5*60):
    # defined a key function.
    # 1\. parse the datetime string to datetime object
    # 2\. count the time delta (seconds)
    # 3\. divided the time delta with interval, which is (6*60) here
    xt = datetime(2013, 4,3)
    dt = datetime.strptime(timestamp, '%d/%m/%Y %H:%M:%S')
    delta_second = int((dt - xt).total_seconds())
    normalize_second = (delta_second / interval) * interval
    return xt + timedelta(seconds=normalize_second)

for k, g in groupby(data, key=lambda i: keyfunc(i[1])):
    # k would be time interval "03/04/2013 13:30:00", "03/04/2013 13:35:00" .... 
    # g would be the level, timestamp pair belong to the interval
    avg_level = sum([x[0] for x in g]) / len(g)
    results.append((k, avg_level)) 
```

# 编辑1

groupby 函数中`keyfunc`使用的函数告诉如何将项目分组。如果两个 item 的 key function 的返回值相同，它们将被放在同一个 group 中。（仅当这些项目已排序时）

```
>>> keyfunc('03/04/2013 13:37:20')
datetime.datetime(2013, 4, 3, 13, 35)

>>> keyfunc('03/04/2013 13:37:30')
datetime.datetime(2013, 4, 3, 13, 35)

# the return value are the same, so 03/04/2013 13:37:20 and 03/04/2013 13:37:30
# will be consider in the same group. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:40:41.490

有几种方法可以解决这个问题，但你实际上是在“分箱”。我会分几步来处理它：

你不想用字符串操作自己解析时间，它会在你的脸上爆炸；相信我！将时间戳解析为日期时间对象（谷歌应该给你一个很好的答案）。一旦你有了它，你就可以做很多有趣的事情，比如比较两次。

现在您有了日期时间对象，您可以开始“装箱”它们。我假设记录是有序的。从第一条记录的时间“03/04/2013 13:37:20”开始，并在“03/04/2013 13:37:00”处创建一个新的日期时间对象[提示：在你的日期时间对象上设置秒数=0读入]。这是您的第一个“bin”的开始。现在为您的开始日期时间添加一分钟 [提示：endDT = startDT + timedelta(seconds=60)]，这是您的第一个 bin 的结束。

现在开始检查您的记录，检查记录是否小于您的 endDT，如果是，请将其添加到该 bin 的列表中。如果记录大于您的 endDT，则您在下一个 bin 中。要启动新的 bin，请在 endDT 中添加一分钟并创建一个新列表来保存这些项目并在循环中继续前进。

完成循环后，您可以在列表上运行 max/min/avg。理想情况下，您会将列表存储在类似于 {datetimeObject : [34, 23, 45, 23]} 的字典中。它将使打印和分类变得容易。

这不是最有效/最灵活/最酷的方式，但我认为它可能是最有帮助的开始。

# java - 无法从 bin 读取输入文件

> ID：15790473
> 
> 赞同：1
> 
> 时间：2013-04-03T14:41:55.520
> 
> 标签：java, file, properties, filenotfoundexception

Errr 伙计们，我编写了一些代码来读取 Java 中的简单输入文件，一切正常，但是在签入代码之后，当其他人尝试运行它时，他们的二进制文件找不到文件（即使文件是就在他们的 bin 文件夹中）！

```
java.io.FileNotFoundException: C:\blah\bin\com\common\PackageRFCs.properties (The system cannot find the path specified) 
```

所以在我的工作区中，我有这些结构和文件：

```
com.test.test.java
com.common.Utility.java
com.common.PackageRFCs.properties 
```

在我的**test.java**中，我试图以这种方式读取属性文件：

```
Class<com.common.Utility> dummy = com.common.Utility.class;
String propURI = dummy.getPackage().getName().replace('.','/') + "/PackageRFCs.properties";
String filepath = ClassLoader.getSystemClassLoader().getResource(propURI).getFile();
...
BufferedReader br = new BufferedReader(new FileReader(filepath));
// do some read line stuff here 
```

上面的代码在我的 Eclipse 下工作得很好，但是当其他人试图运行它时失败了。我想也许我的垃圾箱里有一些悬空的文件，所以我做了一个项目>清理，我仍然能够很好地运行它......我也尝试清理其他用户的工作区，但他们仍然不能阅读文件... WTF是怎么回事？

我无法重现我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:47:30.900

如果您有一个 URL，`getResource()`则不需要将其转换为文件路径并用 a 打开它`FileReader`（无论如何它都不起作用，因为`URL.getFile()`它不是本机文件路径，它只是原始 URL 的子字符串）。只需首先使用`.openStream()`或调用`get{System}ResourceAsStream()`

```
BufferedReader br = new BufferedReader(new InputStreamReader(
    ClassLoader.getSystemResourceAsStream(propURI), "ISO-8859-1")); 
```

（我假设为 ISO-8859-1 编码，因为文件已命名`.properties`，这是 Java 属性文件的标准编码，但如果这是错误的，则更改编码以匹配文件）

但是鉴于您已阐明的结构，使用起来会更健壮

```
Utility.class.getResourceAsStream("PackageRFCs.properties") 
```

它会自动为您处理包到路径的映射，并且能够处理当您的类由系统类加载器以外的类加载器加载时的情况。

# cuda - ArrayFire 中的时序

> ID：15790483
> 
> 赞同：2
> 
> 时间：2013-04-03T14:42:14.347
> 
> 标签：cuda, parallel-processing, gpgpu, nvidia, arrayfire

我正在尝试使用 ArrayFire 评估简单的 GPU 元素矩阵运算的性能。

特别是，考虑到

```
int N1 = something;
int N2 = something;

array A_D = constant(1.,N1*N2,1,f64);
array B_D = constant(1.,N1*N2,1,f64);
array C_D = constant(1.,N1*N2,1,f64);
array D_D = constant(1.,N1*N2,1,f64); 
```

我想执行以下指令的时间

```
D_D = A_D + B_D + C_D + 3.; 
```

我正在使用两种方法。第一个是

```
timer  time_last;
time_last = timer::start();

D_D = A_D + B_D + C_D + 3.;

double elapsed = timer::stop(time_last);
printf("elapsed time using start and stop = %g ms \n",1000.*elapsed); 
```

第二个是定义以下函数

```
void timing_test()
{
    int N1 = something;
int N2 = something;

    array A_D = constant(1.,N1*N2,1,f64);
    array B_D = constant(1.,N1*N2,1,f64);
    array C_D = constant(1.,N1*N2,1,f64);
    array D_D = constant(1.,N1*N2,1,f64);

    D_D = A_D + B_D + C_D + 3.;
} 
```

然后打电话

```
printf("elapsed time using timeit %g ms \n", 1000.*timeit(timing_test)); 
```

我得到了以下结果：

`(N1,N2)=(256,256)` 第一种方法=`0.0456ms` 第二种方法=`0.264ms`

`(N1,N2)=(512,512)` 第一种方法=`0.0451ms` 第二种方法=`0.264ms`

`(N1,N2)=(1024,1024)` 第一种方法=`0.0457ms` 第二种方法=`0.263ms`

`(N1,N2)=(2048,2048)` 第一种方法=`0.127ms` 第二种方法=`0.265ms`

我还根据以下“手动编码”版本的表达式使用

```
cudaEventCreate(&start);
cudaEventCreate(&stop);
cudaEventRecord(start, 0);

eval_matrix_wrap_handcoded(A_D,B_D,C_D,D_D,N1*N2);

cudaEventRecord(stop, 0);
cudaEventSynchronize(stop);
cudaEventElapsedTime(&time, start, stop);

template <class T1, class T2, class T3, class T4>
__global__ inline void evaluation_matrix_handcoded(T1 *A_D, T2 *B_D, T3 *C_D, T4 *D_D, int NumElements)
{
    const int i = blockDim.x * blockIdx.x + threadIdx.x;
    if(i < NumElements) D_D[i]=A_D[i]+B_D[i]+C_D[i]+3.;
}

__host__ void eval_matrix_wrap_handcoded(double *A_D, double *B_D, double *C_D, double *D_D, int NumElements)
{
    dim3 dimGrid(iDivUp(NumElements,dimBlock.x));
    evaluation_matrix_handcoded<<<dimGrid,dimBlock>>>(A_D,B_D,C_D,D_D,NumElements);
} 
```

获得以下

`(N1,N2)=(256,256)` `0.0897ms`

`(N1,N2)=(512,512)` `0.339ms`

`(N1,N2)=(1024,1024)` `1.3ms`

`(N1,N2)=(2048,2048)` `5.37ms`

奇怪的是

1.  两种方法的结果是不同的。这可能是由于函数调用开销造成的，但无论如何，这种开销在`(N1,N2)=(2048,2048)`.
2.  这两种方法的结果几乎与矩阵大小无关。
3.  与表达式的“手动编码”版本相比，结果有很大不同（我假设库应该在生产力和性能之间进行权衡）。

请注意，在任何操作之前，我正在使用代码预热 GPU

```
array test1(1,5);
test1(0,0)=1;
test1(0,1)=2;
test1(0,2)=3;
test1(0,3)=4;
test1(0,4)=5; 
```

有人可以帮我解释上述结果吗？谢谢。

**按照 Pavan 的回答进行编辑**

第一种方法修改为

```
timer  time_last;
time_last = timer::start();

D_D = A_D + B_D + C_D + 3.;
D_D.eval();
af::sync();

double elapsed = timer::stop(time_last);
printf("elapsed time using start and stop = %g ms \n",1000.*elapsed); 
```

第二种方法修改为

```
void timing_test()
{
    int N1 = something;
    int N2 = something;

    array A_D = constant(1.,N1*N2,1,f64);
    array B_D = constant(1.,N1*N2,1,f64);
    array C_D = constant(1.,N1*N2,1,f64);
    array D_D = constant(1.,N1*N2,1,f64);

    D_D = A_D + B_D + C_D + 3.;
    D_D.eval();
} 
```

不过，现在的时机是

```
`(N1,N2)=(256,256)`  first approach = `14.7ms`  second approach = `2.04ms`

`(N1,N2)=(512,512)`  first approach = `14.3ms`  second approach = `2.04ms`

`(N1,N2)=(1024,1024)`  first approach = `14.09ms`  second approach = `2.04ms`

`(N1,N2)=(2048,2048)`  first approach = `16.47ms`  second approach = `2.04ms` 
```

而且我仍然有不同的时间并且独立于向量大小。

如果我将第一种方法修改为

```
D_D = A_D + B_D + C_D + 3.;
D_D.eval();

timer  time_last;
time_last = timer::start();

D_D = A_D + B_D + C_D + 3.;
D_D.eval();
af::sync();

double elapsed = timer::stop(time_last);
printf("elapsed time using start and stop = %g ms \n",1000.*elapsed); 
```

即，对于第一种方法，我“增加”了 GPU 预热阶段，我获得了，

```
`(N1,N2)=(256,256)`  `0.19ms`

`(N1,N2)=(512,512)`  `0.42ms`

`(N1,N2)=(1024,1024)`  `1.18ms`

`(N1,N2)=(2048,2048)`  `4.2ms` 
```

这对我来说似乎更合理，因为时间取决于数据大小并且更接近手动编码。

**第二次编辑** 总结一下：我已经解释了答案和评论，对于第一种方法，我正在使用

```
D_D = A_D + B_D + C_D + 3.;
D_D.eval();

timer  time_last;
af::sync();
time_last = timer::start();

D_D = A_D + B_D + C_D + 3.;
D_D.eval();
af::sync();

double elapsed = timer::stop(time_last);
printf("elapsed time using start and stop = %g ms \n",1000.*elapsed); 
```

我正在获得以下（新）结果：

```
`(N1,N2)=(256,256)`  `0.18ms`

`(N1,N2)=(512,512)`  `0.30ms`

`(N1,N2)=(1024,1024)`  `0.66ms`

`(N1,N2)=(2048,2048)`  `2.18ms` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:41:19.080

ArrayFire 使用即时编译器进行元素操作（这包括算术、逻辑、三角函数和其他数学运算）。

这意味着类似

```
D_D = A_D + B_D + C_D + 3.; 
```

存储为表达式，直到用户或另一个非 jit 函数请求 D_D 的值。

如果您使用`af::eval()`函数或`eval()`方法，您可以强制评估这些表达式。

因此，对于您的特定问题，请同时使用`D_D.eval()` 这两种方法。`af::sync()`对于第一种方法，您也需要这样做。`timeit()`不需要显式同步。

# responsive-design - Zurb Foundation Source Ordering--从侧栏栏目中分出一篇文章

> ID：15790488
> 
> 赞同：0
> 
> 时间：2013-04-03T14:42:36.560
> 
> 标签：responsive-design, zurb-foundation

您是否可以仅重新排列整个列的源顺序，或者是否可以在移动视图上重新排列列中的内容块？

我正在与 Foundation 3 合作，并正在尝试更改移动设备上某些内容的源顺序。我从文档中了解 push-#-mobile 和 pull-#-mobile 的工作原理，但需要做一些不同的事情。

我们有一个两列桌面布局：.eight.column 用于主要内容，.four.column 用于侧边栏。在移动设备中，侧边栏按预期显示在主要内容下方。

但是，我需要在移动视图中的主要内容 .eight.column 上方显示 .four.column 侧边栏中的一个。侧边栏中的其他块仍应显示在主要内容下方。

一位同事提出的一个建议是在主要内容上方制作一个重复的内容块，即隐藏为大，并使侧边栏隐藏为小。我希望 Foundation 有更好的选择，不会让我重复代码。

这是我们目前拥有的代码片段：

```
 <section class="eight column">
        <article>main content</article>
    </section>

    <aside class="sidebar four column">
       <article>Some content</article>

       <article class="first-in-mobile"> This should be above the main content in mobile view
       </article>

       <article>Some more content</article>

    </aside> 
```

基本上，Foundation 3 是否为我提供了一种方法来打破其父列并将其显示在移动视图的不同位置？任何解决方法的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:01:11.520

不，没有开箱即用的方法。而你同事的建议是正确的做法。但我知道这不是最好的，特别是如果您要移动的那个区域有大量内容。但是您可以移动它，而不是复制它。您可以通过 css 或 jquery 来完成。对于您的特定情况，我更喜欢后者：

**布局**

```
<div class="row" id="mainPh">
    <div class="large-8 columns" id="mainContent">
        <h1>Main content</h1>

    </div>

    <div class="large-4 columns" id="sidebar">
        <div class="panel" id="firstSidebar">
            <p>Some content</p>
        </div>
        <div class="panel" id="mobiMiddle">
            <p>Middle content</p>               
        </div>
        <div class="panel">
            <p>Some more content</p>
        </div>
    </div>
</div> 
```

**剧本**

```
<script type="text/javascript">    
    var mainContent = $("#mainContent");
    var sidebar = $("#sidebar");
    var mobiMiddle = $("#mobiMiddle");
    var mainPh = $("#mainPh");
    var firstSidebar = $("#firstSidebar");

    $(document).foundation();
    $(document).ready(function () {        

    });
    $(window).resize(function () {
        var wd = $(window).width();        
        if (wd < 768) {            
            mainPh.prepend(mobiMiddle.detach());
        }
        else {                                    
            firstSidebar.after(mobiMiddle.detach());
        }
    });
</script> 
```

您可以更改`768`目标设备的大小。

# c# - 控制c#中的溢出

> ID：15790490
> 
> 赞同：0
> 
> 时间：2013-04-03T14:42:38.213
> 
> 标签：c#, operators

我想要一个范围在 0 到 26 之间的数字（比如说 i），这样当数字为 26 并且它增加 1（比如说 i++）时，值会返回到 0（即该值是循环的）。

c#中有这样的东西吗？这叫什么？如果不是，那么我将如何在代码中实现这一点（接受重载的运算符）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:47:42.510

创建一个限制值的属性：

```
private int _value;

public int Value {
  get { return _value; }
  set { _value = value % 27; }
} 
```

现在，当您增加属性时，setter 将限制该值。

例子：

```
Value = 25;
Value++; // Value is now 26
Value++; // Value is now 0
Value++; // Value is now 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T14:46:00.547

你可以试试这个：

```
 int result = number % 27; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T14:46:10.563

使用模数运算符 (%)

```
var x = 0;
x = (x+1) % 27; 
```

如果你想让它去 0,1,2,3, ..... 24,25, **26** , 0, 1, 2, 3, ...

使用模数 27

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:46:57.277

我不知道任何类型的“边界”或规则，您可以按照您想要的方式“设置”一个 int。我建议创建一个或两个 if 语句来控制它。`

```
if( i <= 26 & i >= 0)
{ ..do something..} 
else i = 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:53:35.223

这样的事情应该完成你的要求：

```
class CircularInt
{
    public int value;

    public static CircularInt operator ++(CircularInt c)
    {
    if (c.value >= 26)
        c.value = 0;
    else
        c.value++;
    return c;
    }
} 
```

然后使用它：

```
CircularInt cInt = new CircularInt();
cInt++;
Console.WriteLine(cInt.value); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T15:43:02.313

另一种选择是定义自己的不可变类型。

```
public struct Value27
{
    private readonly int val;
    private readonly bool isDef;
    private Value27(int value)
    {
       while (value < 0) value += 27;
       val = value % 27;
       isDef = true;
    }
    public static Value27 Make(int value)
    { return new Value27(value); }

    public bool HasValue { get { return isDef; } }
    public int Value { get { return val; } }

    public static Value27 operator +(Value27 curValue)
    { return Make(curValue.Value + 1); }
    public static Value27 operator -(Value27 curValue)
    { return Make(curValue.Value + 26); }

    public static implicit operator Value27(int bValue)
    { return Make(bValue); }
    public static implicit operator int (Value27 value)
    { return value.Value; }
} 
```

# python - Python更改类变量

> ID：15790493
> 
> 赞同：11
> 
> 时间：2013-04-03T14:42:42.800
> 
> 标签：python, class, variables

好的，这次我会尽量说清楚。

```
class Yes:

    def __init__(self):
        self.a=1

    def yes(self):
        if self.a==1:
            print "Yes"
        else:
            print "No, but yes"

class No(Yes):

    def no(self):
        if self.a==1:
            print "No"
        else:
            print "Yes, but no"
        self.a-=1 #Note this line 
```

现在，在运行时：

```
Yes().yes()
No().no()
Yes().yes()
No().no() 
```

我希望它打印出来：

```
Yes
No
No, but yes
Yes, but no 
```

它给了我：

```
Yes
No
Yes
No 
```

现在，我知道原因是因为我只是在 No 类中更改 Self.a 的值（还记得那行吗？）。我想知道是否有任何方法可以在 Yes 类中更改它，而仍在 No 类中（例如，如果我可以插入一些可以代替 self.a-=1 的东西）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T14:51:40.447

我不确定您对此有什么可能的用途，但是...

你想操作一个*类*变量，但你一直在处理实例变量。如果你想要一个类变量，使用一个类变量！

```
class Yes:
    a = 1 # initialize class var.
    def __init__(self):
        self.a = 1 # point of this is what?

    def yes(self):
        if Yes.a==1: # check class var
            print "Yes"
        else:
            print "No, but yes"

class No(Yes):

    def no(self):
        if Yes.a==1: # check class var
            print "No"
        else:
            print "Yes, but no"
        Yes.a-=1 # alter class var 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:52:28.433

看来您要使用的是静态变量而不是实例变量。静态变量在类的所有实例之间共享。

```
class Yes:
    a = 1
    def __init__(self):
        pass

    def yes(self):
        if Yes.a==1:
            print "Yes"
        else:
            print "No, but yes"

class No(Yes):

    def no(self):
        if Yes.a==1:
            print "No"
        else:
            print "Yes, but no"
        Yes.a-=1 #Note this line

Yes().yes()
No().no()
Yes().yes()
No().no() 
```

将输出：

```
Yes
No
No, but yes
Yes, but no 
```

# c++ - 在 C++ 中的 Winsock 中发送 HTTP GET 请求后，Recv() 函数挂起

> ID：15790494
> 
> 赞同：1
> 
> 时间：2013-04-03T14:42:44.400
> 
> 标签：c++, http, post, winsock, recv

我正在尝试在winsock中制作一个使用HTTP的程序，但我遇到了recv函数挂在那里的问题。

```
int connect() 
{
WSADATA t_wsa; //WSADATA structure
WORD wVers = 0x0202; //version number
int iError; //error number

wVers = MAKEWORD(2, 2); // Set the version number to 2.2
iError = WSAStartup(wVers, &t_wsa); // Start the WSADATA

if(iError != NO_ERROR || iError == 1)
{
    printf("Error at WSAStartup()\n");
    WSACleanup();
    system("PAUSE");
    return 1;
}

/* Correct version? */
if(LOBYTE(t_wsa.wVersion) != 2 || HIBYTE(t_wsa.wVersion) != 2)
{
    printf("Incorrect version\n");
    WSACleanup();
    system("PAUSE");
    return 1;
}

SOCKET sClient;
sClient = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
if(sClient == INVALID_SOCKET || iError == 1)
{
    printf("Invalid Socket!\n");
    WSACleanup();
    system("PAUSE");
    return 1;
}
SOCKADDR_IN sinClient;
memset(&sinClient, 0, sizeof(sinClient));

char cIP[50];
strcpy_s(cIP, "98.139.183.24");
sinClient.sin_family = AF_INET;
sinClient.sin_addr.s_addr = inet_addr(cIP); // Where to start server
sinClient.sin_port = htons(80); //Port

if(connect(sClient, (LPSOCKADDR)&sinClient, sizeof(sinClient)) == SOCKET_ERROR)
{
    /* failed at starting server */
    printf("Could not connect ot the server!\n");
    WSACleanup();
    system("PAUSE");
    return 1;
}   

// Now we can send/recv data!
printf("YOU ARE CONNECTED!\r\n");
string buffer;
buffer += "GET / HTTP/1.1\r\n";
buffer += "Host: http://www.yahoo.com/\r\n";
buffer += "Connection: close\r\n\r\n";
const char *cha = buffer.c_str();

int sent;
int response;
sent = send(sClient, cha, sizeof(cha) - 1, 0);

char recvbuf[50000];

response = recv(sClient, recvbuf, 50000, 0);
recvbuf[response] = '\0';
printf("\nReceived data = %s", recvbuf);
WSACleanup();
return(0);
} 
```

“sent”将在发送功能后打印，但在 recv 打印后什么也没有。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:45:50.953

一个可能的原因是`send()`没有发送预期的数据：

```
sent = send(sClient, cha, sizeof(cha) - 1, 0); 
```

`sizeof(cha) - 1`实际上是，`sizeof(char*) - 1`而不是数据的实际长度：`buffer.length()`改为使用。

请注意，您可以`std::string`在单个语句中构造字符串文字，而不是通过多个连接来构造它。但是，由于`std::string`用于获取 a `const char*`only，因此根本没有理由使用`std::string`：

```
const char* buffer = "GET / HTTP/1.1\r\n"
                     "Host: http://www.yahoo.com/\r\n"
                     "Connection: close\r\n\r\n";

sent = send(sClient, buffer, strlen(buffer), 0); 
```

`send()`检查和的返回值`recv()`以确定成功或失败，特别`recv()`是当结果被用于索引数组时。失败时，`recv()`返回`SOCKET_ERROR`（我认为）是`-1`.

* * *

正确处理 HTTP 响应需要付出很大的努力。接收代码需要检查返回的[HTTP 标头](http://en.wikipedia.org/wiki/HTTP_headers)以确定如何处理响应内容。例如，HTTP 响应可能被分块或不分块。存在用于管理 HTTP 请求的库，其中一个是[cpp-netlib](http://cpp-netlib.org)（大约 2013 年 2 月在[isocpp.org](http://isocpp.org)上宣布）。

# c# - 在datagridview的数据表中使用UDF

> ID：15790495
> 
> 赞同：0
> 
> 时间：2013-04-03T14:42:47.590
> 
> 标签：c#, sql, winforms, datatable

我将 DataTable 对象传递到 Windows 窗体并将 DataTable 绑定到 DataGridView。在 DataGridView 中，我允许用户编辑和添加数据/行。我需要根据用户输入的数据在 DataGridView 上显示两次计算的结果。计算是从 DataGridView 上的事件调用的 2 个方法的结果。在主动编辑或使用 DataGridView 期间，这些功能非常有用。在用户保存项目后，我将 DataTable 对象返回给将数据保存到基础表的类。

我遇到的问题是，当用户再次打开 Windows 窗体以编辑记录时，我的计算未显示，因为尚未在 DataGridView 上触发会触发相应方法的事件。

所以，我在想我可以将计算的字段与 DataTable 对象一起发送，或者我需要将计算方法与 Windows 窗体/DataGridView 中的更多事件挂钩。

如果我将计算字段与 DataTable 一起发送，那会导致返回 DataTable 对象以进行数据库更新操作的问题，对吗？

我将不胜感激想法和/或建议。谢谢

如果有帮助，我可以发布任何相关代码。

****此代码处理网格视图单元格中的数据更改****

```
private void datagridWorkorderPartItems_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    int ID;
    HighlightSaveItems();
    DataGridViewRow row = this.datagridWorkorderPartItems.Rows[e.RowIndex];
    DataGridViewCell cell = row.Cells[e.ColumnIndex];
    if (!DBNull.Value.Equals(row.Cells[3].Value) && !DBNull.Value.Equals(row.Cells[2].Value))
    {
        if (e.ColumnIndex == 2 || e.ColumnIndex == 3)
        {
            decimal price;
            decimal originalprice;
            decimal partmargin;
            Pricing p = new Pricing();
            ID = Convert.ToInt32(row.Cells[3].Value);

            //if price all ready has a value or has been altered, don't change it
            price = p.GetPartItemPrice(ID);
            originalprice = price;
            Parts part = new Parts();
            partmargin = part.LookupPartMargin(ID);
            //now take the price and check against customer price level
            decimal pricelevel;
            decimal invertedpricelevel;
            string level;
            Customers c = new Customers();
            level = c.GetCustomerPartsLevel(_cid);
            Options o = new Options();
            pricelevel = o.GetPartsLevelPercent(level);

            //get proper percent - 100
            if (pricelevel == 1)
            {
                invertedpricelevel = 1;
            }
            else
            {
                invertedpricelevel = 1 - pricelevel; //inverted the percent
            }

            price = price * invertedpricelevel;

            try
            {
                if (e.ColumnIndex == 3) //column 3 is part id
                {
                    if (row.Cells[2].Value == null || row.Cells[2].Value == "0") //qty is null or 0
                    {
                        row.Cells[2].Value = "1"; //set it to assume 1
                        if (row.Cells[4].Value == null)
                        {
                            row.Cells[4].Value = price * 1; //assume the price is price * 1
                            row.Cells[5].Value = originalprice;
                            row.Cells[6].Value = partmargin.ToString("P");
                        }
                    }
                    else
                    {
                        row.Cells[4].Value = price * Convert.ToInt32(row.Cells[2].Value);
                        row.Cells[5].Value = originalprice;
                        row.Cells[6].Value = partmargin.ToString("P");
                    }
                }
                else if (e.ColumnIndex == 2)
                {
                    if (row.Cells[4].Value == null)
                    {
                        row.Cells[4].Value = "0";
                        row.Cells[5].Value = "0";
                        row.Cells[6].Value = "0";
                    }
                    else
                    {
                        row.Cells[4].Value = price * Convert.ToInt32(row.Cells[2].Value);
                        row.Cells[5].Value = originalprice;
                        row.Cells[6].Value = partmargin.ToString("P");
                    }
                }
            }
            catch (Exception m)
            {
                MessageBox.Show("Error: " + m.Message.ToString() + " Source: " + m.Source.ToString() + " " + m.InnerException.ToString(), "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            }
        } 
```

****此代码获取我正在处理的数据表****

```
public DataTable WorkorderPartItemsTable(int WOID)
{
    ConfigDAL config = new ConfigDAL();
    string connstr = config.GetConnString();
    SqlConnection conn = new SqlConnection(connstr);
    string query;
    Parts part = new Parts();

    query = "SELECT * FROM WorkorderItems WHERE (WorkorderID = @WorkorderID) AND (PartID <> '0')";
    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = new SqlCommand(query, conn);
    da.SelectCommand.Parameters.AddWithValue("@WorkorderID", WOID);
    DataTable dt = new DataTable();
    conn.Open();
    da.Fill(dt);
    conn.Close();
    return dt;
} 
```

p.GetPartItemPrice(ID) 和 part.LookupPartMargin(ID) 是在对 datagridview 中的列进行更改时计算的 2 个值。当我加载表格时，这些没有得到计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T17:06:01.717

在加载表单事件并在将数据表绑定到数据网格之后，然后通过编码在网格中更改您想要的值（此更改触发单元值更改事件），然后返回您更改的旧值，如果您不触发此事件两次，您可以定义 bool 参数调用它在加载表单时将其设置为 true，然后在加载完成时将其设置为 false 在 datagridWorkorderPartItems_CellValueChanged 事件中使用此参数 if (atLoad == true) 返回；当第一次更改值时，事件在两次 atLoad = false 事件中什么都不做，计算你想要的

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T14:49:47.893

FormulaEngine 是一个 .NET 程序集，可让您向应用程序添加公式支持。它负责解析和评估公式，跟踪它们的依赖关系，并以自然顺序重新计算。

看看下面的文章。

[http://www.codeproject.com/Articles/17853/Implementing-an-Excel-like-formula-engine](http://www.codeproject.com/Articles/17853/Implementing-an-Excel-like-formula-engine)

# android - 在活动之间传递对象的arraylist

> ID：15790499
> 
> 赞同：18
> 
> 时间：2013-04-03T14:42:50.457
> 
> 标签：android, android-intent, arraylist, android-activity, parcelable

我试图在两个活动之间传递一个对象数组列表，但我的应用程序在第二个活动中崩溃了。谁能帮我解决这个问题...

这是我第一次活动的代码：

```
Intent i = new Intent();
Bundle b = new Bundle();
b.putParcelableArrayList("songs",(ArrayList<? extends Parcelable>) albumsArray.get(position).getSongs());
Log.v("--", "OK");
i.putExtras(b);
i.setClass(LatestAlbums.this, AlbumDetails.class);
startActivity(i); 
```

第二个活动的代码：

```
songs=new ArrayList<Songs>();
Bundle b = this.getIntent().getExtras();
if(b!=null)
    songs = b.getParcelable("songs");
Log.v("--", songs.size()+""); 
```

我的 logcat 输出：

```
04-03 16:37:03.513: E/AndroidRuntime(6576): FATAL EXCEPTION: main
04-03 16:37:03.513: E/AndroidRuntime(6576): java.lang.RuntimeException: Parcel: unable to marshal value com.musicapp.objects.Songs@419489e8
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Parcel.writeValue(Parcel.java:1137)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Parcel.writeList(Parcel.java:524)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Parcel.writeValue(Parcel.java:1097)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Parcel.writeMapInternal(Parcel.java:493)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Bundle.writeToParcel(Bundle.java:1612)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Parcel.writeBundle(Parcel.java:507)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.content.Intent.writeToParcel(Intent.java:6147)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1613)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.app.Activity.startActivityFromChild(Activity.java:3458)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.app.Activity.startActivityForResult(Activity.java:3210)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:817)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.app.Activity.startActivity(Activity.java:3297)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at com.outsourcefarm.musicagratis.activities.LatestAlbums$4$1.onItemClick(LatestAlbums.java:232)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.widget.AbsListView$1.run(AbsListView.java:3168)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Handler.handleCallback(Handler.java:605)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.os.Looper.loop(Looper.java:137)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at android.app.ActivityThread.main(ActivityThread.java:4440)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-03 16:37:03.513: E/AndroidRuntime(6576):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-03T14:51:02.637

你试试下面

```
intent.putParcelableArrayListExtra("key", ArrayList<T extends Parcelable> list);
startActivity(intent); 
```

取回它

```
getIntent().getParcelableArrayListExtra("key"); 
```

[将用户定义对象的数组列表传递给 Intent android](https://stackoverflow.com/questions/15747727/pass-arraylist-of-user-defined-objects-to-intent-android/15747819#)。检查 Sajmon 的答案

根据 Sajmon 的评论，`Song`班级必须`implement` `Parcelable`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-03T15:49:00.850

你应该让你的`Song`班级实现[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-21T09:18:11.990

```
Intent intent=new Intent(ActivityFrom.this,ActivityTo.class);
intent.putExtra("StringKey",arrayList);
startActivity(intent); 
```

并检索

```
ArrayList<String> myList = (ArrayList<String>) getIntent().getSerializableExtra("StringKey"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T14:47:44.040

```
 i.setClass(LatestAlbums.this, AlbumDetails.class);
     i.putStringArrayListExtra("list", your song list);
     startActivity(i); 
```

获取活动中的数组列表。

```
ArrayList<String> fetchList= new ArrayList<String>();
fetchList=  getIntent().getStringArrayListExtra("list"); 
```

希望这会帮助你。

如需更多参考，请使用此[链接](https://stackoverflow.com/questions/5374546/passing-arraylist-through-intent)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-16T09:45:02.900

指[这个问题](https://stackoverflow.com/questions/45446452/send-arraylist-by-intent/54721728)。我希望这个例子对你有所帮助。

**1\. 你的 Song 类应该是实现 Parcelable 类**

```
public class Song implements Parcelable { 
//Your setter and getter methods
} 
```

**2\. 将你的数组列表放入 putParcelableArrayListExtra()**

```
public class ActivityA extends AppCompatActivity {
ArrayList<Song> songs;

@Override
protected void onCreate(Bundle savedInstanceState) {
button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            startActivity(new Intent(getApplicationContext(), ActivityB.class)
            .putParcelableArrayListExtra("songs", (ArrayList<? extends Parcelable>) songs));
        }
    });
} 
```

**3.在ActivityB中**

```
public class ActivityB extends AppCompatActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    Intent intent = getIntent();
    final ArrayList<Song> songs = intent.getParcelableArrayListExtra("songs");

    //Check the value in the console
    buttonCheck.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            for (Song value : songs) {
                System.out.println(value.getTitle());
            }
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-14T23:39:07.203

您可以像这样使 Songs 类实现 Serializable 。

`public class Songs implements Serializable{ // your code here }`.

在活动一中

```
Intent intent =  new Intent(MainActivity.this,Main2Activity.class);
Bundle bundle = new Bundle();
bundle.putSerializable("Songs",arrSongs); //where arrSongs is object of  ArrayList<Songs>

intent.putExtras(bundle);
startActivity(intent); 
```

在您要检索 ArrayList 对象的 SecondActivity 中

```
 Bundle bundle =  getIntent().getExtras();
 private ArrayList<Songs> items;
 items = (ArrayList<Songs>)bundle.getSerializable("Songs"); 
```

# opencv - 为什么安装 opencv 后 cv2.so 丢失？

> ID：15790501
> 
> 赞同：21
> 
> 时间：2013-04-03T14:42:51.920
> 
> 标签：opencv

今天我在 Ubuntu 12.10 上安装了 opencv 2.4.4

但导入 cv2 不起作用。

```
root@-:~# python
Python 2.7.3 (default, Sep 26 2012, 21:53:58) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import cv2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named cv2
>>> 
```

据我了解 cv2.so 错过了，所以 python 看不到 opencv 在哪里

```
root@-:~# find / -name "cv.py"
/root/opencv-2.4.4/modules/python/src2/cv.py
root@-:~# find / -name "cv2.so"
root@-:~# 
```

我的设置步骤看起来像

```
wget http://downloads.sourceforge.net/project/opencvlibrary/opencv-unix/2.4.4/OpenCV-2.4.4a.tar.bz2
tar -xjf OpenCV-2.4.4a.tar.bz2
cd opencv-2.4.4
mkdir release
cd release 
cmake -D CMAKE_BUILD_TYPE=RELEASE   -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON ..
make && make install
echo "/usr/local/lib" >> /etc/ld.so.conf.d/opencv.conf
ldconfig  
echo "PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig" >> /etc/bash.bashrc
echo "export PKG_CONFIG_PATH" >> /etc/bash.bashrc 
```

cv2.so 在哪里？为什么它被错过了？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-14T19:46:39.263

**如何在 Linux 中使用 python 绑定安装 opencv(cv2) - Ubuntu/Fedora**

1.  安装 gcc、g++/gcc-c++、cmake（apt-get 或 yum，yum 使用 gcc-c++）

    ```
    apt-get install gcc, g++, cmake 
    ```

2.  [从openCV 的网站](https://opencv.org/)下载最新的 opencv

3.  解压它

    ```
    tar -xvf opencv-* 
    ```

4.  在未解压的文件夹中创建一个名为的新文件夹`release`

    ```
    mkdir release
    cd release 
    ```

    （或任何文件夹名称）并在其中运行此命令

    ```
    cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON .. 
    ```

    这`..`将从父母文件夹中提取文件，并使系统准备好在您的平台上安装。

5.  在发布文件夹中运行

    ```
    make 
    ```

6.  完成运行后大约 2-3 分钟的 make 处理

    ```
    sudo make install 
    ```

7.  导出python路径

    ```
    export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages 
    ```

就是这样，现在去python试试

```
>>> import cv2 
```

您不应该收到任何错误消息。

在 python 2.7 上测试，应该与 python 3.x 几乎相似。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-15T09:01:25.290

我安装`python-opencv`以解决我在 Ubuntu 14.04 中的问题 `sh sudo apt-get install python-opencv`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-15T01:23:06.650

在 rasberry pi 上使用 raspbian 我也遇到了找不到模块的问题。我有三个版本的 python（2.6、2.7 和 3.2），请确保您使用的是 python2.7。您可以通过运行检查这一点：

```
python --version 
```

我发现就我的情况而言，我只是需要安装 python-dev。

```
sudo apt-get install python-dev 
```

我不必删除并重新安装opencv，我尽我所能避免这种情况，因为我知道完成这个过程需要几个小时。

安装 python-dev 后，我转到我构建 opencv 的文件，对我来说它是“~/opencv-2.4.9/release”，并告诉它制作

```
sudo make 
```

在此之后，我能够找到 cv2.so 文件。搜索它：

```
find / -name "cv2.so" 
```

此时我找到了一些文件。接下来我只运行了python，看看它是否能找到“导入”它们

```
python 
>>> import cv2 
```

不应该出现错误。

```
>>> import numpy 
```

我听说 numpy 是 opencv 运行所必需的。从那里我相信你应该很好地运行你的脚本，如果没有错误发生的话。我希望这有帮助。

列出了对我有帮助的页面...

[http://opencv-users.1802565.n2.nabble.com/I-can-t-find-cv-so-and-cv2-so-after-compiling-td6671937.html](http://opencv-users.1802565.n2.nabble.com/I-can-t-find-cv-so-and-cv2-so-after-compiling-td6671937.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-03T19:49:43.320

当我在 OSX El Capitan 上使用 CMAKE 手动配置时，我遇到了类似的问题。我给了这个额外的选择：

```
PYTHON2_PACKAGES_PATH='lib/python2.7/site-packages' 
```

这阻止了该软件包中的 cv2.so 安装。删除它后，它似乎可以正确安装在我的构建文件夹中：

```
PYTHON2_EXECUTABLE='/usr/bin/python2.7'
PYTHON2_INCLUDE_DIR='/usr/include/python2.7'
PYTHON2_LIBRARY='/usr/lib/libpython2.7.dylib' # TODO - Fix for linux
PYTHON2_NUMPY_INCLUDE_DIRS='/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include' # Todo - Fix for linux

cd $OPENCV_DIR

cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=$OPENCV_INSTALL_PATH \
                                  -D WITH_CUDA=OFF \
                                  -D BUILD_opencv_python2:BOOL=ON \
                                  -D PYTHON2_EXECUTABLE=$PYTHON2_EXECUTABLE \
                                  -D PYTHON2_INCLUDE_DIR=$PYTHON2_INCLUDE_DIR \
                                  -D PYTHON2_LIBRARY=$PYTHON2_LIBRARY \
                                  -D PYTHON2_NUMPY_INCLUDE_DIRS=$PYTHON2_NUMPY_INCLUDE_DIRS \
                                  -D INSTALL_PYTHON_EXAMPLES:BOOL=ON \
                                  ..
make -j8
make install 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-14T15:20:41.493

我的 OS X El Capitan 有这个问题。

我按照[本教程](http://www.pyimagesearch.com/2015/06/15/install-opencv-3-0-and-python-2-7-on-osx/)中提到的说明进行操作。没有获得成功的工作安装，并且在[提到](http://www.pyimagesearch.com/2015/06/15/install-opencv-3-0-and-python-2-7-on-osx/)的所需文件夹和`python`提示符处出现上述缺少 cv2.so 文件的错误。

最后发现使用虚拟python设置会造成麻烦。所以卸载了

```
pip install virtualenv virtualenvwrapper 
```

然后跑了

```
brew link opencv 
```

这引发了错误。

然后按照以下步骤解决问题。

首轮

```
brew link opencv 
```

如果它给出错误，请尝试自动诊断

```
brew doctor 
```

`brew doctor`列出了可能导致安装过程出错的问题。

要在文件冲突的情况下解决问题，请运行以获取**将**通过覆盖执行的所有操作的列表，而无需实际执行它们。

列出所有将被删除的文件：

```
 brew link --overwrite --dry-run opencv 
```

接下来是执行覆盖的运行，假设您觉得覆盖执行的操作将使您的系统进入更**稳定的状态**。

要强制链接并覆盖所有冲突文件：

```
 brew link --overwrite opencv 
```

[本教程](http://www.daveperrett.com/articles/2010/12/14/face-detection-with-osx-and-python/)是一个更简单的选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-21T20:50:49.583

以上都不适合我；我在 ec2 实例上的 Ubuntu 16.04 中安装了 anaconda，所以我只是使用

`conda install opencv`对于我的 conda2 和 3 安装

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-27T15:38:49.420

以上所有答案**都对我不起作用**，但是，经过一整天的努力，我终于解决了这个问题。

要拥有 cv2.so，我们需要：

> 1.  至少安装了**python 2 或 3**。这就是为什么人们说：`sudo apt-get install python-dev`。但这**不是必需**的，就我而言，我使用**anaconda python**。（安装python的方法有很多）
> 2.  **numpy**也是必须的。所以，无论你使用什么 python，只要确保你已经下载了它。就我而言，我使用**anaconda numpy**。（anaconda 已经安装了，对于普通的 python，使用`pip install numpy`）

告诉camke路径在哪里，以我的命令为例：

```
cmake -D CMAKE_BUILD_TYPE=RELEASE \
      -D CMAKE_INSTALL_PREFIX=/usr/local \
      -D OPENCV_EXTRA_MODULES_PATH=../opencv_contrib/modules \
      -D PYTHON2_EXECUTABLE='/home/parallels/anaconda2/bin/python' \
      -D PYTHON2_LIBRARY='/home/parallels/anaconda2/lib/python2.7' \
      -D PYTHON2_NUMPY_INCLUDE_DIRS='/home/parallels/anaconda2/lib/python2.7/site-packages/numpy/core/include' \
      -D BUILD_EXAMPLES=ON .. 
```

对于python3，你应该（我正在使用anaconda python，所以我将所有内容都链接到anaconda）：

```
cmake -D CMAKE_BUILD_TYPE=Release \
      -D CMAKE_INSTALL_PREFIX=/usr/local \
      -D OPENCV_EXTRA_MODULES_PATH=../opencv_contrib-3.3.1/modules \
      -D PYTHON3_EXECUTABLE='/home/test/SoftWare/anaconda3/bin/python3.6m' \
      -D PYTHON_INCLUDE_DIR='/home/test/SoftWare/anaconda3/include/python3.6m' \
      -D PYTHON3_LIBRARY='/home/test/SoftWare/anaconda3/lib/libpython3.6m.so' \
      -D PYTHON3_NUMPY_INCLUDE_DIRS='/home/test/SoftWare/anaconda3/lib/python3.6/site-packages/numpy/core/include' \
      -D PYTHON3_PACKAGES_PATH='/home/test/SoftWare/anaconda3/lib/python3.6/site-packages' .. 
```

**要记住的一件事**！在你进入 cmake 之前... **1.**清理你的构建文件夹，**2.** **只 camke 一次！**否则你不能改变 ** PYTHON3_LIBRARY: NO**...（我认为这是一个错误）

我知道可能会有一些无用的争论，但我厌倦了试图清理它们。**这是我的 cmake 打印信息的屏幕截图。** [我的 cmake 信息的屏幕截图](https://i.stack.imgur.com/PBJ4Q.png)

可以清楚的看到，只有python2才能生成cv2.so。python3不行！（无法生成 Python3 包装器）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-14T19:35:44.183

我遇到了类似的问题。在深入研究之后，我遇到了一个帖子，其中提到需要`python-numpy`包。因此，我通过在构建文件夹（在您的情况下为发布文件夹）中运行以下命令来卸载 opencv：

```
dpkg -r build 
```

然后我删除了所有的opencv文件。我安装`python-numpy`并`python-dev`使用以下命令：

```
sudo apt-get install python-dev python-numpy 
```

然后，重新运行安装脚本后，`import cv2`python 控制台中的命令没有给我任何错误并且正确导入。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-30T19:47:33.617

就我而言，这是一个问题`cmake`：

```
sudo apt install software-properties-common
sudo add-apt-repository ppa:george-edison55/cmake-3.x
sudo apt update 
```

如果`cmake`尚未安装：

```
sudo apt install cmake 
```

如果`cmake`已经安装：

```
sudo apt upgrade 
```

有关详细信息，请参阅[此链接](https://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04 "更多信息")。

# node.js - 在 Node.js 中模拟模块以进行单元测试

> ID：15790505
> 
> 赞同：18
> 
> 时间：2013-04-03T14:43:04.990
> 
> 标签：node.js, unit-testing, mocking, jasmine

我想对 node.js 模块中的一些功能进行单元测试。我认为模拟第三个模块会有所帮助。特别是为了避免撞到数据库

```
# models/account.coffee
register = (email, password)->
   sha_sum.update(password)
   pw = sha_sum.digest('hex')
   user = 
      email: email
      password: sha_sum.digest('hex')

   users_db.save user, (err, doc)->
      register_callback(err)

account_module = 
   register: register

module.exports = account_module 
```

这是我要测试的模块

```
# routes/auth.coffee
account = require '../models/account'

exports.auth = 
   post_signup: (req, res)->
      email = req.body.email
      password = req.body.password
      if email and password
          account.register(email, password)
          res.send 200
      else
          res.send 400 
```

我希望能够测试在帖子中使用正确的正文点击此 url 调用该`account.register`函数，但我不希望测试点击数据库。我可能还没有实现 account 模块。

jasmine 规范 #specs/auth.test.coffee 描述 'signup', ->

```
 request = require 'request' 
   it 'should signup a user with username and password', (done)->

       spyOn(account, 'register') # this does not work, account.register still called
       url = root + '/signup'
       headers =
           "Content-Type": "application/json" 
       data = 
           email: 'user@email.com'
           password: 'pw'
       body = JSON.stringify(data)
       request {url: url, method: 'POST',json: data, headers: headers }, (err, response, body)->

           expect(response.statusCode).toEqual(200)
           done() 
```

我已经研究了 node.js 的几个模拟库（[https://github.com/easternbloc/Syringe](https://github.com/easternbloc/Syringe)，[https://github.com/felixge/node-sandboxed-module](https://github.com/felixge/node-sandboxed-module)），但到目前为止没有成功。无论我在规范中尝试什么，`account.register`总是会被执行。这整个方法有缺陷吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T06:03:18.713

我使用[mocha](http://mochajs.org)作为测试框架，使用[sinon](http://sinonjs.org)进行模拟、存根和间谍活动。我建议您将您的帐户模块委托给 auth.coffee 模块并像这样模拟它：

```
exports.init = function (account) {
    // set account object
} 
```

因此，从 mocha 测试中，您可以创建一个虚拟帐户对象并在实际测试中使用 sinon 模拟它。

```
describe('some tests', function () {

    var account, response, testObject;

    beforeEach(function () {

        account = {
             register: function () { }
        };

        response = {
            send: function () { }
        };

        testObject = require('./auth');
        testObject.init(account);
    });

    it('should test something', function () {

        var req = { body: { email: ..., password: .... } }, // the request to test
            resMock = sinon.mock(response),
            registerStub = sinon.stub(account, 'register');

        // the request expectations
        resMock.expect('send').once().withArgs(200);

        // the stub for the register method to have some process
        registerStub.once().withArgs('someargs');

        testObject.auth(req. response);

        resMock.verify();

    });

}); 
```

很抱歉没有把它写在咖啡稿里，但我不习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-29T19:02:01.367

我推荐[proxyquire](https://www.npmjs.com/package/proxyquire)。

它可以实现您想要实现的目标，同时不依赖于依赖注入，这对您的代码来说很突兀，并且如果您没有以这种方式编写模块，则需要更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:01:03.843

Stefan 的解决方案有效。我只是添加一些细节。

```
 describe 'register', ->
    account = response = routes_auth = null

    beforeEach ->
        account =
            register: (email, pw, callback)-> 
                if email is 'valid@email.com'
                    callback(null, 1)
                else
                    err = 'error'
                    callback(err, 0)

        response = 
            send: -> {}

        routes_auth = require('../routes/auth').init(account)

    it 'should register a user with email and pw', (done)->
        req =
            body:
                email: 'valid@email.com'
                password: 'pw'

        resMock = sinon.mock(response)
        resMock.expects('send').once().withArgs(200)
        routes_auth.post_register(req, response)
        resMock.verify() 
        done()

    it 'should not register a user without email', ()->
        req =
            body:             
                password: 'pw'

        resMock = sinon.mock(response)
        resMock.expects('send').once().withArgs(400)
        routes_auth.post_register(req, response)
        resMock.verify() 
```

和`routes/auth.coffee`模块...

```
exports.init = (account)->
    get_available: (req, res)->
        email = req.param.email
        if not email? or email.length < 1
            res.send 400
            return
        account.available email, (err, doc)->
            console.log 'get_available', err, doc
            if err then res.send 401
            else res.send 200

    post_register: (req, res)->
        email = req.body.email
        password = req.body.password
        if email and password
            account.register email, password, (err, doc)->
                if err then res.send 401
                else res.send 200
        else
            res.send 400 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T17:35:51.050

我一直在[轻轻地](https://github.com/felixge/node-gently)使用 mocking 和 stubbing 以及[mocha](https://github.com/visionmedia/mocha)来测试框架，而 should.js 用于 BDD 风格的测试。这是我的示例单元测试的样子：

```
describe('#Store() ', function () {
    it('will delegate the store to the CacheItem and CacheKey', function () {
        var actualCacheKey, actualConnMgr, actualConfig, actualLogger, actualRequest;
        var actualKeyRequest, actualKeyConfig;

        gently.expect(
            CacheKey, 'CreateInstance', function (apiRequest, config) {
                actualKeyRequest = apiRequest;
                actualKeyConfig = config;

                return mockCacheKey;
            });

        gently.expect(
            CacheItem, 'CreateInstance', function (cacheKey, connectionManager, config, logger, apiRequest) {
                actualCacheKey = cacheKey;
                actualConnMgr = connectionManager;
                actualConfig = config;
                actualLogger = logger;
                actualRequest = apiRequest;

                return mockCacheItem;
            });

        var actualApiRequest, actualCallback;
        gently.expect(mockCacheItem, 'Store', function (request, callback) {
            actualApiRequest = request;
            actualCallback = callback;
        });

        var callback = function () {};
        var apiResponse = {'item': 'this is a sample response from SAS'};
        Cache.GetInstance(connMgr, config, logger).Store(apiRequest, apiResponse, callback);

        mockCacheKey.should.be.equal(actualCacheKey, 'The cachkeKey to CacheItem.CreateIntsance() did not match');
        connMgr.should.be.equal(
            actualConnMgr, 'The connection manager to CacheItem.CreateInstance() did not match');
        config.should.be.equal(actualConfig, 'The config to CacheItem.CreateInstance() did not match');
        logger.should.be.equal(actualLogger, 'The logger to CacheItem.Createinstance did not match');
        apiRequest.should.be.equal(actualRequest, 'The request to CacheItem.Createinstance() did not match');

        apiRequest.should.be.equal(actualKeyRequest, 'The request to CacheKey.CreateInstance() did not match');
        config.should.be.equal(actualKeyConfig, 'The config to CacheKey.CreateInstance() did not match');

        callback.should.be.equal(actualCallback, 'The callback passed to CacheItem.Store() did not match');
        apiResponse.should.be.equal(actualApiRequest, 'The apiRequest passed to CacheItem.Store() did not match');
    });
}); 
```

# c - valgrind not showing stack trace raspberry pi

> ID：15790509
> 
> 赞同：3
> 
> 时间：2013-04-03T14:43:13.783
> 
> 标签：c, raspberry-pi, valgrind

I am having problems getting valgrind to print the stack trace. I am trying to learn to program in 'C' see [http://learncodethehardway.org/](http://learncodethehardway.org/) section 5.3 p23, running valgrind ./ex4

My system:

```
Linux version3.6.11+     
gcc4.7.2 
Raspbian Wheezy2013-02-09
valgrind 3.7.0 
```

I used `sudo apt-get install valgrind` rather than compiling valgrind from source.

Running `valgrind ./ex4` on this program

```
1  #include <stdio.h>
2
3 /* Warning: ex4.c - this program is wrong on purpose. */
4
5 int main()
6 {
7 int age = 10;
8 int height;   
10 printf("I am %d years old.\n");
11 printf("I am %d inches tall.\n", height);
12
13 return 0;
14 } 
```

is supposed to produce the following output ...

```
1 $ make ex4
2 cc -Wall -g ex4.c -o ex4
3 ex4.c: In function 'main':
4 ex4.c:10: warning: too few arguments for format
5 ex4.c:7: warning: unused variable 'age'
6 ex4.c:11: warning: 'height' is used uninitialized in this function
7 $ valgrind ./ex4
8 ==3082== Memcheck, a memory error detector
9 ==3082== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
10 ==3082== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
11 ==3082== Command: ./ex4
12 ==3082==
13 I am -16775432 years old.
14 ==3082== Use of uninitialised value of size 8
15 ==3082== at 0x4E730EB: _itoa_word (_itoa.c:195)
16 ==3082== by 0x4E743D8: vfprintf (vfprintf.c:1613)
17 ==3082== by 0x4E7E6F9: printf (printf.c:35)
18 ==3082== by 0x40052B: main (ex4.c:11)
19 ==3082==
20 ==3082== Conditional jump or move depends on uninitialised value(s)
21 ==3082== at 0x4E730F5: _itoa_word (_itoa.c:195)
22 ==3082== by 0x4E743D8: vfprintf (vfprintf.c:1613)
23 ==3082== by 0x4E7E6F9: printf (printf.c:35)
24 ==3082== by 0x40052B: main (ex4.c:11)
25 ==3082==
26 ==3082== Conditional jump or move depends on uninitialised value(s)
27 ==3082== at 0x4E7633B: vfprintf (vfprintf.c:1613)
28 ==3082== by 0x4E7E6F9: printf (printf.c:35)
29 ==3082== by 0x40052B: main (ex4.c:11)
30 ==3082==
31 ==3082== Conditional jump or move depends on uninitialised value(s)
32 ==3082== at 0x4E744C6: vfprintf (vfprintf.c:1613)
33 ==3082== by 0x4E7E6F9: printf (printf.c:35)
34 ==3082== by 0x40052B: main (ex4.c:11)
35 ==3082==
36 I am 0 inches tall.
37 ==3082==
38 ==3082== HEAP SUMMARY:
39 ==3082== in use at exit: 0 bytes in 0 blocks
40 ==3082== total heap usage: 0 allocs, 0 frees, 0 bytes allocated
41 ==3082==
42 ==3082== All heap blocks were freed -- no leaks are possible
43 ==3082==
44 ==3082== For counts of detected and suppressed errors, rerun with: -v
45 ==3082== Use --track-origins=yes to see where uninitialised values come from
46 ==3082== ERROR SUMMARY: 4 errors from 4 contexts (suppressed: 4 from 4)
47 $ 
```

but It doesn't when run on the Raspberry Pi - what it does is this ...

```
pmy@pisoft1 ~/cprog $ valgrind --track-origins=yes ./ex4
==14237== Memcheck, a memory error detector
==14237== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==14237== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==14237== Command: ./ex4
==14237== 
I am -1111374604 years old.
I am 72 inches tall.
==14237== 
==14237== HEAP SUMMARY:
==14237==     in use at exit: 0 bytes in 0 blocks
==14237==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==14237== 
==14237== All heap blocks were freed -- no leaks are possible
==14237== 
==14237== For counts of detected and suppressed errors, rerun with: -v
==14237== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 13 from 6) 
```

(nb I'm a noob) - I gather that it ought to report that I have called a function from main() and that the function contains a mistake (eg an uninitialized variable). Then it should trace the error to the place that function was called in main(). Compilation with the -g option is supposed to give line numbers. However, doing this on Raspberry Pi produces unexpected results, in that the output from valgrind will only print the gibberish at the location of the uninitialised age value. That is it! Indeed the output does not give line numbers, it doesn't report an uninitialised value and there is no stack trace!

There was some speculation about architecture differences on stackoverflow.com in this related post [Valgrind not showing line numbers in spite of -g flag (on Ubuntu 11.10/VirtualBox)](https://stackoverflow.com/questions/9321385/valgrind-not-showing-line-numbers-in-spite-of-g-flag-on-ubuntu-11-10-virtualbo) but I'm not allowed to comment there and I don't know enough to answer the question. Various commenters offered suggestions to try but sadly, running it as

```
valgrind --track-origins=yes ./ex4 
```

made no difference and using static linking

```
cc -Bstatic -g -o ex4 ex4.c 
```

does not help either.

So, I contacted the author of, 'learn c the hard way,' Zed Shaw who replied:

"Hmm, I'm not sure but why would you want to learn C *on* the raspberrypi when you can just learn it on a regular linux box/VM and then after you learn C go use it on raspberrypi. Seems like adding an extra layer of difficulty that isn't necessary."

which is a perfectly reasonable and pragmatic reply but as I said to him, I'm contrary & I want it to work on the Pi because I want to develop on the Pi! So, I also requested help on raspberrypi.org, see [http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=7689&p=322853#p322853](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=7689&p=322853#p322853) Can anyone tell me how to sort this out please? Anyone know anyone with nous++ that I could ask? Thx in advance. Rgds

# python - 当布尔值变为假时，while循环和中断

> ID：15790516
> 
> 赞同：1
> 
> 时间：2013-04-03T14:43:29.957
> 
> 标签：python, if-statement, while-loop, breakpoints

我正在尝试创建一个循环，使程序继续运行直到bank> 100000，并且在该while循环中还有另一个while循环确定bank是否已达到最小值（用户是否失败，并且bank重置为20000）。当前，即使连续迭代达到 1000000 条件，循环也会运行并永远继续。谁能看到解决这个问题的方法？

nb 'singles' 只是一个包含一个数字的数组。

非常感谢。

```
i = 0
newbank = []
iterations = []
while bank < 1000000:
    bank = 20000
    while bank > 100:
        spin = randint(0, 38)
        if choices2 == singles:
            if spin == singles:    
                bank = bank + (bet * 35)
            else:
                bank = bank - bet
            i = i + 1
            iterations.append(i)
            newbank.append(bank) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:51:46.400

`while`即使，您的第二个也会继续运行`bank < 10000000`，因此您将永远不会离开该循环，如果您这样做了，那么您将留在第一个循环上。

您的代码无法停止。

你想要类似...

```
while bank > 100 and bank < 1000000: 
```

我不确切知道您要达到什么逻辑，但是您需要更好地考虑停止条件。

编辑：

在更好地阅读您的问题后，我认为您应该摆脱这两个循环，因为一个就足够了。

初始化你`bank = 20000`的循环外，

```
bank = 20000
while bank < 1000000:
    if bank < 100:
        bank = 20000

.... 
```

# ios - 在界面生成器中更改 UITableViewCell 背景颜色

> ID：15790518
> 
> 赞同：2
> 
> 时间：2013-04-03T14:43:30.257
> 
> 标签：ios, uitableview

我试图避免将任何与视觉设置有关的代码添加到我的 iOS 项目中，因为这是 Interface Builder 应该为您简化的。

所以我试图在 IB 中设置原型单元，然后调用：

```
TableCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"TableCell"]; 
```

问题是如果我更改 IB 中单元格的背景颜色，当我运行我的应用程序时它仍然是白色的。我可以很好地预设标签的颜色，但不能预设表格单元格中的背景颜色属性。

作为附加说明，我可以看到作为单元格内的 backgroundView 的 UIView 在断点并在初始化后检查变量后为空。

**更新** 我的印象是 IB 中的背景颜色选项基本上没用？我宁愿不相信。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:52:00.487

不幸的是，你不能这样做。

更改单元格的背景颜色`tableView:willDisplayCell:forRowAtIndexPath:`

从以下文档`UITableViewCell`：

> 注意：如果要更改单元格的背景颜色（通过 UIView 声明的 backgroundColor 属性设置单元格的背景颜色），您必须在委托的 tableView:willDisplayCell:forRowAtIndexPath: 方法中进行，而不是在 tableView :cellForRowAtIndexPath: 数据源的。更改组样式表视图中单元格的背景颜色在 iOS 3.0 中的效果与以前版本的操作系统不同。它现在影响圆角矩形内部的区域，而不是它外部的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:59:36.660

在界面生成器中，添加一个视图作为单元格的子视图，这将是您的背景视图。然后，您可以将所有标签或其他任何内容作为子视图添加到该视图。根据需要更改视图背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:03:50.190

我认为这可能是 IB 中的一个错误。您可以将视图添加到控制器底部的该栏，然后将这些视图连接到单元格的 backgroundView 和 selectedBackgroundView 属性。但是，backgroundView 的颜色不起作用，而 selectedBackgroundView 的颜色却可以正常工作。如果您在代码中将背景视图添加到自定义表格视图单元格并给它一个背景颜色，那确实有效。

# android - Android OnTouchListener deactivates button layout states

> ID：15790519
> 
> 赞同：1
> 
> 时间：2013-04-03T14:43:31.960
> 
> 标签：android, button, listener

Originally I had my button connected to a method through the XML like this:

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/custom_button_green"
    android:onClick="start_process"
    android:text="@string/button_send"
    android:textSize="50sp" /> 
```

Then I decided to add an onTouchListener so that I could handle ACTION_UP events:

```
 private OnTouchListener myListener = new OnTouchListener(){
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            //start recording
            System.out.println("DOWN");
            start_process();

        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            System.out.println("UP");   
        }
        return true;
    }
}; 
```

The listener works great, but I've noticed that the states for my button have disappeared. The button had different colors for if it had been pressed, but this no longer happens now that the button is interacting through the listener. Here is what is defined in @drawable/custom_button_green:

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/btn_default_pressed" />
<item android:state_focused="false" android:state_enabled="true"
    android:drawable="@drawable/btn_default_normal_green" />
<item android:state_focused="false" android:state_enabled="false"
    android:drawable="@drawable/btn_default_normal_disable" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/btn_default_selected" />
<item android:state_enabled="true"
    android:drawable="@drawable/btn_default_normal_green" />
<item android:state_focused="true"
    android:drawable="@drawable/btn_default_normal_disable_focused" />
<item
     android:drawable="@drawable/btn_default_normal_disable" /> 
```

Can anyone help me figure out why the button no longer follows these states?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:48:09.167

我认为`onTouch`您的侦听器的方法应该 return `false`，否则您只需覆盖在触摸事件上更新可绘制对象的“正常”行为。

# clojure - 在包含特定元数据的命名空间中查找函数的惯用方式？

> ID：15790521
> 
> 赞同：2
> 
> 时间：2013-04-03T14:43:33.757
> 
> 标签：clojure, namespaces

我试图找出最好的方法来控制包含特定元数据位的函数的命名空间。我想出了一个解决方案，但感觉有点尴尬，我完全不确定我是否以正确的方式去做。这还有第二个组成部分：我不只是想要函数的名称，我想找到它们然后执行它们。这是我目前正在做的一个片段：

```
(defn wrap-routes
  [req from-ns]
  (let [publics (ns-publics from-ns)
        routes (->>
                (keys publics)
                (map #(meta (% publics)))
                (filter #(= (:route-handler %) true))
                (map #(:name %)))
        resp (first
                (->>
                  (map #((% publics) req) routes)
                  (filter #(:status %))))]
    (or resp not-found))) 
```

正如你所看到的，我正在做各种各样的体操来查看我的元数据是否附加到给定命名空间中的任何函数，然后在此之后做额外的工作以恢复实际函数。我相信一定有更好的方法。所以我的问题是，你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:28:52.093

```
(defn wrap-routes [req from-ns]
  (or (first (filter :status
                     (for [[name f] (ns-publics from-ns)
                           :when (:route-handler (meta f))]
                       (f req))))
      not-found)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:59:13.567

你可以这样做：

```
(defn wrap-routes
  [req from-ns]
  (->> (ns-publics from-ns)
       (filter #(:route-handler (meta (%1 1))))
       (map #((%1 1) req))
       (filter #(:status %))
       first
       (#(or % not-found)))) 
```

# mvvm - 使用 Twitter Bootstrap 按钮组作为带有敲除绑定的单选框

> ID：15790524
> 
> 赞同：8
> 
> 时间：2013-04-03T14:43:52.507
> 
> 标签：mvvm, twitter-bootstrap, knockout.js, durandal

这是有效的：

**视图.html**

```
<div><input type="radio" name="radioPriority" data-bind="checked: priority" value="want" style="margin-top: -3px; margin-right: 3px;" />I want to</div>
<div><input type="radio" name="radioPriority" data-bind="checked: priority" value="need"  style="margin-top: -3px; margin-right: 3px;"/>I need to</div> 
```

**控制器.js**

```
function feedbackViewModel() {
    var self = this;
    self.priority = ko.observable("want");
    //lots of other stuff
} 
```

正如预期的那样，当您选择第二个收音机时，priority observable 的值将变为“需要”。但是，我想将 Twitter Bootstrap 按钮组用作收音机。这是我拥有的 HTML，但它并没有像预期的那样改变 observable：

```
<span class="btn-group" data-toggle="buttons-radio">
    <button data-bind="checked: priority" type="button" class="btn" value="want">I want to</button>
    <button data-bind="checked: priority" type="button" class="btn" value="need">I need to</button>
</span> 
```

**更新**我在这里有一个 jsfiddle：http: [//jsfiddle.net/a8wa8/6/](http://jsfiddle.net/a8wa8/6/) “priority1”是标准单选选择，“priority2”是引导按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T16:13:50.190

问题是您正在使用`Checked`不允许的按钮绑定，而是可以使用单击绑定。检查这个小提琴：

[http://jsfiddle.net/a8wa8/7/](http://jsfiddle.net/a8wa8/7/)

**更新：**

是的，您可以使用 ko 来实现这一点`css binding`。检查这个更新的小提琴：

[**更新小提琴**](http://jsfiddle.net/a8wa8/8/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T16:12:53.740

[检查绑定](http://knockoutjs.com/documentation/checked-binding.html)仅适用于“可检查”控件，例如复选框 ( `<input type='checkbox'>`) 或单选按钮 ( `<input type='radio'>`)。

但是您`button`在第二个示例中，引导程序只是模拟单选按钮组的外观，因此`checked`绑定不起作用。

但是，您可以使用将值传递给 observable的[`click`绑定：](http://knockoutjs.com/documentation/click-binding.html)

```
<span class="btn-group" data-toggle="buttons-radio">
     <button data-bind="click: function() { priority2('want') }" 
             type="button" class="btn" value="want">I want to</button>
     <button data-bind="click: function() { priority2('need') }" 
             type="button" class="btn" value="need">I need to</button>    
</span> 
```

您可以将其隐藏在自定义绑定后面：

```
ko.bindingHandlers.valueClick = {
    init: function(element, valueAccessor, allBindingsAccessor, 
                  viewModel, bindingContext) {     
        var value = valueAccessor();
        var newValueAccessor = function() {
            return function() {
                value(element.value); 
            };
        };
        ko.bindingHandlers.click.init(element, newValueAccessor, 
            allBindingsAccessor, viewModel, bindingContext);
    },
} 
```

然后你可以像这样使用它：

```
<span class="btn-group" data-toggle="buttons-radio">
     <button data-bind="valueClick: priority2" 
             type="button" class="btn" value="want">I want to</button>
     <button data-bind="valueClick: priority2" 
             type="button" class="btn" value="need">I need to</button>    
</span> 
```

演示[JSFiddle。](http://jsfiddle.net/6Wy4P/)

# c# - 删除 Quartz.net 中作业的触发器

> ID：15790527
> 
> 赞同：6
> 
> 时间：2013-04-03T14:43:56.803
> 
> 标签：c#, quartz.net

如何删除 Quartz.net 中作业的触发器并保留该作业？这只是在删除作业上的最后一个触发器时出现的问题，现在它也会删除作业。

我正在使用的代码是：

```
_scheduler.UnscheduleJob(trigger.Key); 
```

只要该触发器的作业具有多个触发器，它就可以正常工作。如果这是最后一个触发器，作业也会被删除，这是我不想要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T18:43:44.237

当你创建你的工作时，你必须指定你希望它在所有触发器被删除后仍然存在，你可以通过调用 StoreDurably()

例如

```
 IJobDetail job = JobBuilder.Create<HelloJob>()
        .WithIdentity("job1", "group1")
        .StoreDurably()
        .Build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T14:48:51.040

你也可以使用

```
// Unschedule a particular trigger from the job (a job may have more than one trigger)
scheduler.UnscheduleJob(new TriggerKey("trigger1", "group1")); 
```

[请注意，我的语法与Quartz.net 参考](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/UnscheduleJob)略有不同

# vb.net - OleDb through open file dialog in Visual Basic Express 2010

> ID：15790528
> 
> 赞同：0
> 
> 时间：2013-04-03T14:43:57.883
> 
> 标签：vb.net

I am using Visual Basic Express 2010\. Form 3 has code to import a csv file into a DataGridView while creating a DataSet. This event happens when I open Form 3\. The path to the file is in the code. I would like to have a button on Form 1 that opens an OpenFileDialog so the user can browse for the csv file. Once the user selects the file, the DataGridView and DataSet on Form 3 initiate. The code I am currently using is below. Is there a way to edit the code to have an open file dialog from a button on Form 1 and not auto load through a pathway? Any assistance would be appreciated.

```
Public Class Form3

    Private Sub Form3_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load

        Dim file As String = "test.csv"
        Dim path As String = "C:\Users\laptop\Desktop\"
        Dim ds As New DataSet

        End If

        Try
            If IO.File.Exists(IO.Path.Combine(path, file)) Then
                Dim ConStr As String = _
                "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & _
                path & ";Extended Properties=""Text;HDR=Yes;IMEX=1;FMT=CSVDelimited\"""
                Dim conn As New OleDb.OleDbConnection(ConStr)
                Dim da As New OleDb.OleDbDataAdapter("Select * from " & _
                file, conn)
                da.Fill(ds, "TextFile")

            End If

        Catch ex As Exception
            MessageBox.Show(ex.ToString)

        End Try

        DataGridView1.DataSource = ds.Tables(0)

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:13:16.423

更改您的 Form3 类，添加几个全局变量并强制 Form3 的调用者传递初始化值。然后使用打开连接时传递的值

```
Public Class Form3
    Dim mFileCSV As String
    Dim mPathCSV As String

    Public Sub New(ByVal fileCSV as String, ByVal pathCSV as String)
        mFileCSV = fileCSV
        mPathCSV = pathCSV
    End Sub

    Private Sub Form3_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
       Dim fullPath = Path.Combine(mPathCSV, mFileCSV)
       if File.Exist(fullPath)  then
          .... open the connection ....

    End Sub 
```

在这些更改之后，您的 Form1 需要打开 Form3 时会调用

```
 Dim of = new OpenFileDialog()
   if of.ShowDialog() = DialogResult.OK Then

       .... extract file and path and pass to form3 constructor

       Dim f3 As Form3 = New Form3(file, path)
       f3.Show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:14:00.870

> 我想在表单 1 上有一个打开 OpenFileDialog 的按钮，以便用户可以浏览 csv 文件。一旦用户选择文件，Form 3 上的 DataGridView 和 DataSet 就会启动

为了解决这个问题，你需要做两件事

**1\. 使用 OpenFileDialog**

这很简单。只需使用[OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)改编自 MSDN 示例的以下片段打开文件对话框，如果

```
Dim openFileDialog1 As New OpenFileDialog()
Dim fileLocation As String
openFileDialog1.InitialDirectory = "c:\"
openFileDialog1.Filter = "txt files (*.csv)|*.csv|All files (*.*)|*.*"
openFileDialog1.FilterIndex = 1
openFileDialog1.RestoreDirectory = True 

If openFileDialog1.ShowDialog() = System.Windows.Forms.DialogResult.OK Then 

    fileLocation = openFileDialog1.FileName

End If 
```

**2.将fileLocation传递给Form3**

形式只是对象。因此，您将信息从一个对象传递到另一个对象的所有方式都由您支配。

例如，您可以在 Form3 上创建一个公共属性`FileLocation`，然后在 Show Form3 之前设置它。此外，`Form.Load`您需要使用`Form.Shown`而不是使用。

另一种选择是重载具有 FileLocation 参数的 Form3 的构造函数。

# php - 在 php 中延迟一个 gearman 工作

> ID：15790531
> 
> 赞同：2
> 
> 时间：2013-04-03T14:44:01.727
> 
> 标签：php, message-queue, gearman

我在 php 中有一个 Gearman Work 来处理来自客户端的后台任务。有时我无法处理那份工作。我需要一种方法来延迟 5 分钟后重试该工作。我怎样才能做到这一点？

我现在要做的是做`exit(255`）但这将立即重试工作。另外我不知道如何获得该特定工作的失败次数（在工作人员中）。

问题：

1.  我如何在 Gearmand 中完成上述操作
2.  是否有任何其他消息系统能够做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:24:54.223

你不能。至少不使用内置功能。此功能在 Gearmand 中仅部分实现，PHP 模块不公开此功能。请参阅有关该功能的[讨论](https://groups.google.com/forum/?fromgroups=#!topic/gearman/woe7YN0SWZk)。

人们尝试了不同的方法，包括：

*   使用[node.js 及其超时功能](http://code.recollect.com/post/12792504787/queue-within-a-queue)
*   使用`at` [实用程序](https://stackoverflow.com/questions/3547538/schedule-a-job-in-gearman-for-a-specific-date-and-time)
*   使用另一个排队系统 - [beanstalkd](http://kr.github.io/beanstalkd/)

当涉及到跟踪故障时——AFAIK，你不能。[请参阅我关于在 Gearman 中处理重试的](https://stackoverflow.com/questions/8870132/error-conditions-and-retries-in-gearman-error-conditions-and-retries-in-gearman/10348461#10348461)答案以获得可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T08:09:59.220

不是内置的，但您可以为此使用一些 memcached+TTL。

# google-chrome - After compiling using GWT, only static elements shown in the page

> ID：15790532
> 
> 赞同：0
> 
> 时间：2013-04-03T14:44:02.623
> 
> 标签：google-chrome, gwt

I was following GWT tutorial [https://developers.google.com/web-toolkit/doc/2.1/tutorial/compile](https://developers.google.com/web-toolkit/doc/2.1/tutorial/compile)

And at the last step, which was compilation, I got a problem. When I successfully compiled the application, and when I clicked on the index html using chrome, all it showed was the static elements written inside the html file, not the dynamic contents.

However, I found it worked under safari.

I found the older version of the same tutorial [https://developers.google.com/web-toolkit/doc/1.5/tutorial/compile](https://developers.google.com/web-toolkit/doc/1.5/tutorial/compile) which says that to test the web mode after compilation, a default browser is needed, for my Mac, it's safari.

GWT version: 2.5.1

I'm wondering why this happened? Any solution? Will it happen when I put it to the server?

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:05:53.967

GWT apps (by default) can't be run from the filesystem, they must be served by an HTTP server.

The reason is that the GWT app runs in an iframe, and two `file://` URLs are considered different *origins* (for security reasons), so the iframe cannot communicate with the *host page*.

Try adding `<add-linker name="xsiframe"/>` to your `*.gwt.xml` (no guarantee though)

# ios - iOS Maps UIPopover misplaced after orientation change

> ID：15790533
> 
> 赞同：0
> 
> 时间：2013-04-03T14:44:05.587
> 
> 标签：ios, ipad, maps, orientation, uipopovercontroller

we are working on a tablet app and have the following problem:

We are using popover controllers if the user touches a pin on the map but after orientation change, the popover is misplaced. But we cannot keep a reference because after orientation change, the pins are reloaded.

Did someone already have this problem and found a generic solution for this? I wonder how apple is handling this.

Generally the placement of popovers after orientation change is sometimes acting a bit strange.

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:05:21.667

一种常见的方法是在旋转后关闭弹出框。不幸的是，你可以做的事情并不多，不需要一些复杂的重新定位逻辑。也许将原点存储为 iVar 并根据新方向计算新坐标。但是，没有通用的解决方案。

# windows-8 - WWAN Interface AT Commands

> ID：15790536
> 
> 赞同：2
> 
> 时间：2013-04-03T14:44:14.403
> 
> 标签：windows-8, at-command, wwan

I've got a Windows 8 Professional device which has got a Mobile Broadband adapter embedded and I need to be able to send AT commands to the modem, usually I'd connect to the COM port and send the commands. However the device doesn't appear to have any COM ports, instead it presents its self as a network adapter.

I'm wanting to send AT commands to change the APN of the modem and to reset the device, I've looked into the 'netsh mbn add profile' but this command always returns an error advising that the XML profile is incorrect.

Also from looking at the functions of the netsh mbn it doesn't seem to provide as much control as sending AT commands.

The modem that I'm trying to interface to is the Ericsson C5621 GW on a Lenovo ThinkPad Tablet 2.

Is there another way to send AT commands?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:42:21.360

我不是特别了解这个产品，但是由于我在爱立信工作，后来在ST-Ericsson从事手机开发十多年，它注定会有我的一些代码，所以我会在一般基础上回答。

简短的版本是，除非设备通过其中一个外部接口（可能的接口类型为 RS-232、IrDA、蓝牙、USB 或 CAIF）公开串行接口，否则无法向其发送 AT 命令¹。

作为笔记本电脑中的嵌入式设备，因为您说它似乎没有串行接口，所以我假设它使用[CAIF](http://lxr.linux.no/#linux+v3.8.6/Documentation/networking/caif/Linux-CAIF.txt)（通常用于嵌入式设置。它也可能在禁用串行接口的情况下使用 USB，但由于[本新闻稿](http://www.ericsson.com/news/110831_mobile_broadband_module_in_lenovo_244188809_c)提到它将在具有 PCI 接口的版本中可用，这是非常不可能的）。因此，除非设备设置有任何活动的 VEI 通道，否则无法使用 AT 命令。

不过，可能还有其他更改 APN 的方法。

¹我们有一个调试机制，可以将 AT 命令注入任意串行接口，但这本身是在串行接口上​​运行的，由 AT 命令启动。此外，它不会出现在已发布的产品中。

# c - Different read and write count using cachegrind and callgrind

> ID：15790541
> 
> 赞同：14
> 
> 时间：2013-04-03T14:44:24.457
> 
> 标签：c, assembly, callgrind, cachegrind, gem5

I am doing some experiments with Cachegrind, Callgrind and Gem5\. I noticed that a number of accesses were counted as read for cachegrind, as write for callgrind and for both read and write by gem5.

Let's take a very simple example:

```
int main() {
    int i, l;

    for (i = 0; i < 1000; i++) {
        l++;
        l++;
        l++;
        l++;
        l++;
        l++;
        l++;
        l++;
        l++;
        l++;
        ... (100 times)
     }
 } 
```

I compile with:

> gcc ex.c --static -o ex

So basically, according to the asm file, `addl $1, -8(%rbp)` is executed 100,000 times. Since it's both a read and a write, I was expecting 100k read and 100k write. However, cachegrind only counts them as read and callgrind only as write.

```
 % valgrind --tool=cachegrind --I1=512,8,64 --D1=512,8,64
--L2=16384,8,64 ./ex
==15356== Cachegrind, a cache and branch-prediction profiler
==15356== Copyright (C) 2002-2012, and GNU GPL'd, by Nicholas Nethercote et al.
==15356== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==15356== Command: ./ex
==15356== 
--15356-- warning: L3 cache found, using its data for the LL simulation.
==15356== 
==15356== I   refs:      111,535
==15356== I1  misses:        475
==15356== LLi misses:        280
==15356== I1  miss rate:    0.42%
==15356== LLi miss rate:    0.25%
==15356== 
==15356== D   refs:      104,894  (103,791 rd   + 1,103 wr)
==15356== D1  misses:        557  (    414 rd   +   143 wr)
==15356== LLd misses:        172  (     89 rd   +    83 wr)
==15356== D1  miss rate:     0.5% (    0.3%     +  12.9%  )
==15356== LLd miss rate:     0.1% (    0.0%     +   7.5%  )
==15356== 
==15356== LL refs:         1,032  (    889 rd   +   143 wr)
==15356== LL misses:         452  (    369 rd   +    83 wr)
==15356== LL miss rate:      0.2% (    0.1%     +   7.5%  ) 
```

-

```
 % valgrind --tool=callgrind --I1=512,8,64 --D1=512,8,64
--L2=16384,8,64 ./ex
==15376== Callgrind, a call-graph generating cache profiler
==15376== Copyright (C) 2002-2012, and GNU GPL'd, by Josef Weidendorfer et al.
==15376== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==15376== Command: ./ex
==15376== 
--15376-- warning: L3 cache found, using its data for the LL simulation.
==15376== For interactive control, run 'callgrind_control -h'.
==15376== 
==15376== Events    : Ir Dr Dw I1mr D1mr D1mw ILmr DLmr DLmw
==15376== Collected : 111532 2777 102117 474 406 151 279 87 85
==15376== 
==15376== I   refs:      111,532
==15376== I1  misses:        474
==15376== LLi misses:        279
==15376== I1  miss rate:    0.42%
==15376== LLi miss rate:    0.25%
==15376== 
==15376== D   refs:      104,894  (2,777 rd + 102,117 wr)
==15376== D1  misses:        557  (  406 rd +     151 wr)
==15376== LLd misses:        172  (   87 rd +      85 wr)
==15376== D1  miss rate:     0.5% ( 14.6%   +     0.1%  )
==15376== LLd miss rate:     0.1% (  3.1%   +     0.0%  )
==15376== 
==15376== LL refs:         1,031  (  880 rd +     151 wr)
==15376== LL misses:         451  (  366 rd +      85 wr)
==15376== LL miss rate:      0.2% (  0.3%   +     0.0%  ) 
```

Could someone give me a reasonable explanation? Would I be correct to consider there are in fact ~100k reads and ~100k writes (i.e. 2 cache accesses for an addl)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T03:33:42.680

[From cachegrind manual: 5.7.1\. Cache Simulation Specifics](http://valgrind.org/docs/manual/cg-manual.html#cache-sim)

> *   Instructions that modify a memory location (e.g. inc and dec) are counted as doing just a read, i.e. a single data reference. This may seem strange, but since the write can never cause a miss (the read guarantees the block is in the cache) it's not very interesting.
>     
>     
>     
>     Thus it measures not the number of times the data cache is accessed, but the number of times a data cache miss could occur.

It would seem that callgrind's cache simulation logic is different from cachegrind. I would think that callgrind should produce the same results as cachegrind, so maybe this is a bug?

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T23:07:44.163

callgrind 默认不完全缓存模拟。见这里：http: [//valgrind.org/docs/manual/cl-manual.html#cl-manual.options.cachesimulation](http://valgrind.org/docs/manual/cl-manual.html#cl-manual.options.cachesimulation)

要启用数据读取访问，您需要为 callgrind 添加 --cache-sim=yes。说了这么多，为什么还要在这段代码上使用 callgrind 呢？没有一个函数调用（这就是 callgrind 的用途）

# python - Edit Distance with accents

> ID：15790545
> 
> 赞同：2
> 
> 时间：2013-04-03T14:44:39.567
> 
> 标签：python, edit-distance

Are there some edit-distance in python that take account of the accent. Where for exemple hold the following property

```
d('ab', 'ac') > d('àb', 'ab') > 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:21:47.773

使用[Levenshtein 模块](https://pypi.python.org/pypi/python-Levenshtein/)：

```
In [1]: import unicodedata, string

In [2]: from Levenshtein import distance

In [3]: def remove_accents(data):
   ...:     return ''.join(x for x in unicodedata.normalize('NFKD', data)
   ...:                             if x in string.ascii_letters).lower()

In [4]: def norm_dist(s1, s2):
   ...:     norm1, norm2 = remove_accents(s1), remove_accents(s2)
   ...:     d1, d2 = distance(s1, s2), distance(norm1, norm2)
   ...:     return (d1+d2)/2.

In [5]: norm_dist(u'ab', u'ac')
Out[5]: 1.0

In [6]: norm_dist(u'àb', u'ab')
Out[6]: 0.5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T15:24:02.007

Unicode 允许将重音字符分解为基本字符和组合重音字符；例如`à`分解成`a`后跟重音组合。

您想使用规范化形式 NFKD 转换两个字符串，它分解重音字符并将兼容性字符转换为其规范形式，然后使用编辑距离度量将替换排在插入和删除之上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-13T16:27:18.390

这是一个基于[difflib](https://docs.python.org/3/library/difflib.html)和[unicodedata](https://docs.python.org/3/library/unicodedata.html)的解决方案，没有任何依赖关系：

```
import unicodedata
from difflib import Differ

# function taken from https://stackoverflow.com/a/517974/1222951
def remove_accents(input_str):
    nfkd_form = unicodedata.normalize('NFKD', input_str)
    only_ascii = nfkd_form.encode('ASCII', 'ignore').decode()
    return only_ascii

def compare(wrong, right):
    # normalize both strings to make sure equivalent (but
    # different) unicode characters are canonicalized 
    wrong = unicodedata.normalize('NFKC', wrong)
    right = unicodedata.normalize('NFKC', right)

    num_diffs = 0
    index = 0
    differences = list(Differ().compare(wrong, right))
    while True:
        try:
            diff = differences[index]
        except IndexError:
            break

        # diff is a string like "+ a" (meaning the character "a" was inserted)
        # extract the operation and the character
        op = diff[0]
        char = diff[-1]

        # if the character isn't equal in both
        # strings, increase the difference counter
        if op != ' ':
            num_diffs += 1

        # if a character is wrong, there will be two operations: one
        # "+" and one "-" operation
        # we want to count this as a single mistake, not as two mistakes
        if op in '+-':
            try:
                next_diff = differences[index+1]
            except IndexError:
                pass
            else:
                next_op = next_diff[0]
                if next_op in '+-' and next_op != op:
                    # skip the next operation, we don't want to count
                    # it as another mistake
                    index += 1

                    # we know that the character is wrong, but
                    # how wrong is it?
                    # if the only difference is the accent, it's
                    # a minor mistake
                    next_char = next_diff[-1]
                    if remove_accents(char) == remove_accents(next_char):
                        num_diffs -= 0.5

        index += 1

    # output the difference as a ratio of
    # (# of wrong characters) / (length of longest input string)
    return num_diffs / max(len(wrong), len(right)) 
```

* * *

测试：

```
for w, r in (('ab','ac'),
            ('àb','ab'),
            ('être','etre'),
            ('très','trés'),
            ):
    print('"{}" and "{}": {}% difference'.format(w, r, compare(w, r)*100)) 
```

```
"ab" and "ac": 50.0% difference
"àb" and "ab": 25.0% difference
"être" and "etre": 12.5% difference
"très" and "trés": 12.5% difference 
```

# iphone - 当应用程序进入后台时如何继续运行 NSTimer

> ID：15790547
> 
> 赞同：2
> 
> 时间：2013-04-03T14:44:45.403
> 
> 标签：iphone, ios5, ios6, nstimer

我正在创建益智游戏应用程序，并且我正在使用 NSTimer 显示时间（即 01:20）。当应用程序进入后台时，NSTimer 会暂停，但即使应用程序处于后台状态，我也想继续它。

例如**，当应用程序进入后台时，定时器计数为 15 秒**，我**将其放置 5 秒**并进入前台，现在我**需要将定时器计数更改为 20 秒**

我搜索了很多，但没有得到好的答案。所以请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:55:19.647

不要将计时器视为计时的对象。把它想象成一个以给定频率脉冲的物体。要测量时间，请记录开始时间并将其与当前时间进行比较。

要记录开始时间，将其写入文件如下，可能在 appWillResignActive 中：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *path = [paths objectAtIndex:0];
NSString *filename = [path stringByAppendingPathComponent:@"saveme.dat"];

NSData * data = [NSKeyedArchiver archivedDataWithRootObject:self.startDate];
[data writeToFile:filename atomically:NO];
// invalidate timer 
```

当 appWillBecomeActive 时：

```
NSData *data = [NSData dataWithContentsOfFile:filename];    // using the same code as before
self.startDate = [NSKeyedUnarchiver unarchiveObjectWithData:data];
// start a timer for the purpose of pulsing only 
```

此时经过的时间为：

```
NSDate *now = [NSDate date];
NSTimeInterval = [now timeIntervalSinceDate:self.startDate]; 
```

上述所有操作无需在后台运行即可完成。如果您真的需要一个计时器在后台触发，请参阅这个[apple ref](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。在“后台执行”下。简而言之，你可以做到，但 Apple 会在批准应用程序之前让你满足几个标准——比如它必须是有限的并为用户提供实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:48:02.140

您将需要将该信息写入文件或在退出时缓存时间。然后，当应用程序恢复时，您读取该值，进行一些数学运算，然后重新启动计时器。

在您的 AppDelegate 中，因为应用程序将在后台将时间保存到文件或 NSUserDefaults。您可以调用 NSDate 的类方法来获取一个可以轻松存储的 Integer 值。

```
+ (NSTimeInterval)timeIntervalSinceReferenceDate 
```

在应用程序恢复时，读入值。获取当前 timeIntervalSinceReferenceDate 并减去。您应该知道已经过去的秒数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:56:28.713

在您的班级中创建一个 NSDate ivar 来管理开始时间。

```
@implementation SomeClass {
  NSDate *startTime;
} 
```

对于您的计时器，只需通过数学计算该日期的时间。您的计时器更多地用于调用执行此计算的方法，而不是确定时间本身......

```
[NSTimer scheduledTimerWithTimeInterval:0.1f target:self selector:@selector(updateTimer) userInfo:nil repeats:YES]; 
```

你的方法的逻辑......

```
- (void)updateTimer {
  if (!startTime) {
    startTime = [NSDate date];
  }
  NSInteger secondsSinceStart = -(NSInteger)[startTime timeIntervalSinceNow];
  NSLog(@"%d", secondsSinceStart);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:53:51.643

我建议将开始时间保存为一个`NSDate`对象，然后`NSTimer`在应用程序运行时每秒通过计算当前时间和开始时间之间的时间间隔来更新显示的时间。当你的应用程序进入后台时暂停计时器（这样当你的应用程序重新启动时你不会得到很多不必要的火灾）并在应用程序进入前台时重新启动它。

如果您希望在应用程序完全关闭时保留数据（通过在后台停留太久，或在应用程序切换器中关闭），那么您需要在适当的时间将数据保存到磁盘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T04:31:47.343

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:0.5f
                                 target:self
                               selector:@selector(showTime)
                               userInfo:NULL
                                repeats:YES];

- (void)showTime
{
NSDate *now=[NSDate date];
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"HH:mm:ss"];
timeLabel.text=[dateFormatter stringFromDate:now];
} 
```

希望这个答案能帮到你......

# android - ListFragment with icon

> ID：15790551
> 
> 赞同：1
> 
> 时间：2013-04-03T14:44:49.160
> 
> 标签：android, android-layout, android-listview, android-listfragment, android-adapterview

i can manage to make a listfragment with same icon. but it seems i cant make that list with different icon. so the list result will be different icon for different item list. i try with it. and when i try to build it. it shows no error. but when i run it. its just force closes. here is my logcat.

> 04-03 16:49:13.513: W/dalvikvm(9236): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
> 04-03 16:49:13.602: E/AndroidRuntime(9236): FATAL EXCEPTION: main
> 04-03 16:49:13.602: E/AndroidRuntime(9236): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.surat.pendek/com.surat.pendek.utama}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
> 04-03 16:49:13.602: E/AndroidRuntime(9236): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
> 04-03 16:49:13.602: E/AndroidRuntime(9236): at android.os.Handler.dispatchMessage(Handler.java:99)
> 04-03 16:49:13.602: E/AndroidRuntime(9236): at android.os.Looper.loop(Looper.java:137)
> 04-03 16:49:13.602: E/AndroidRuntime(9236): at android.app.ActivityThread.main(ActivityThread.java:5041)
> 04-03 16:49:13.602: E/AndroidRuntime(9236): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list''

here is my sample fragment that extends listfragment, this fragment contain adapter too :

```
public class SampleListFragment extends ListFragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.list, null);
}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    SampleAdapter adapter = new SampleAdapter(getActivity(), null);
    for (int i = 0; i < 20; i++) {
        adapter.add(new SampleItem("Sample List", android.R.drawable.ic_menu_search));
    }
    setListAdapter(adapter);
}

private class SampleItem {
    public String tag;
    public int iconRes;
    public SampleItem(String tag, int iconRes) {
        this.tag = tag; 
        this.iconRes = iconRes;
    }
}

public class SampleAdapter extends ArrayAdapter<SampleItem> {

    private final Context context;
      private final String[] values;

    public SampleAdapter(Context context, String[] values) {
        super(context, R.layout.row);
        this.context = context;
        this.values = values;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = LayoutInflater.from(getContext()).inflate(R.layout.row, null);
        }
        ImageView icon = (ImageView) convertView.findViewById(R.id.row_icon);
        icon.setImageResource(getItem(position).iconRes);
        TextView title = (TextView) convertView.findViewById(R.id.row_title);
        title.setText(getItem(position).tag);

         String surat = title.getText().toString();
            if (surat.equalsIgnoreCase("Huruf Hijaiyah")) {
              icon.setImageResource(R.drawable.aien);
            } else
                if (surat.equalsIgnoreCase("About")) {
              icon.setImageResource(R.drawable.alief);
            } else
                if (surat.equalsIgnoreCase("Surat+arti")) {
                      icon.setImageResource(R.drawable.ba);
                    } else
                        if (surat.equalsIgnoreCase("Surat+latin")) {
                              icon.setImageResource(R.drawable.emo_im_angel);
                            } else
                                {
                                      icon.setImageResource(R.drawable.emo_im_happy);
                                    }

        return convertView;
    }

} 
```

}

and here is my fragment that extends listfragment :

```
public class MenuFragment extends ListFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.list, null);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    String[] surat = getResources().getStringArray(R.array.surat_pendek);
    ArrayAdapter<String> sampleAdapter = new ArrayAdapter<String>(getActivity(), 
            R.layout.row, R.id.row_title, surat);
    setListAdapter(sampleAdapter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T15:56:48.333

有点晚了，但我希望[这个答案](https://stackoverflow.com/a/12840673/1182515)有所帮助。

正如 logcat 所说：`Your content must have a ListView whose id attribute is 'android.R.id.list'`.

您似乎有一个明确的 xml 布局文件：`R.layout.list`. 这个布局应该定义一个带有 id 的列表`android.R.id.list`。

# python - Python orm日期时间问题

> ID：15790553
> 
> 赞同：2
> 
> 时间：2013-04-03T14:44:53.487
> 
> 标签：python, mysql-python, peewee

我在一个带有日期时间字段的非常大的数据库中有一个 Peewee 数据库模型 Products。当我想选择具有（插入时间大于现在（））的文章时，查询将永远挂起。

```
class Products(BaseModel):
    id = IntegerField()
    name= CharField()
    inserted = DateTimeField()

class Meta:
    db_table = 'products'

Products.select().where(Products.inserted >datetime(2013, 04, 03, 14, 52, 50).strftime("%Y-%m-%d %H:%M:%S")) 
```

我不确定是因为数据库大小（大于 10 GB）还是因为查询样式。

我应该像这样使用 datetime(2013, 04, 03, 14, 52, 50) 还是 "2013-04-03 14:52:50" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:23:19.730

Peewee 将接受`datetime`对象作为输入，因此您无需进行任何转换。我猜问题是您缺少索引。

尝试：

```
class Products(BaseModel):
    id = IntegerField(primary_key=True) # <-- You should specify a Primary Key
    name= CharField()
    inserted = DateTimeField(index=True) # <-- this should be an index

Products.select().where(Products.inserted >datetime(2013, 04, 03, 14, 52, 50)) 
```

如果您的表已经存在，您可以使用 python shell 以编程方式添加索引：

```
# assuming your db is named "db"
db.create_index(Products, [Products.inserted]) 
```

# jquery - 如何在每个循环中选择当前元素的子元素？

> ID：15790556
> 
> 赞同：0
> 
> 时间：2013-04-03T14:45:05.357
> 
> 标签：jquery, loops, nested-loops

在伪 CSS 中，这看起来像这样：

```
current_element .text_container {
    ...
} 
```

我试图弄清楚如何用 jQuery 做到这一点。类似于以下内容：

```
boxes.each(function() {
   console.log( jQuery(this).('.text_container').height() );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:57:58.703

奇怪，我今天早些时候有一个与此非常相似的问题。无论如何，试试这个：

```
$('.mod_article').each(function () {
    var maxHeight = 0;
    $('div.ce_deeplink div.deeplink_text ', this).each(function () {
        if ($(this).height() > maxHeight) maxHeight = $(this).height();
    });
    $('div.ce_deeplink div.deeplink_text',this).height(maxHeight);
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/NBnW9/8/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:58:57.287

如果我根据您的小提琴正确理解您的要求，那么您需要的是：

```
$(this).find(".deeplink_text") 
```

在这里查看：http: [//jsfiddle.net/NBnW9/7/](http://jsfiddle.net/NBnW9/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:49:53.283

```
boxes.each(function() {
   console.log( $(this).children('.text_container').height() );
}); 
```

# javascript - 通过 json 发送 3 个变量未正确发送

> ID：15790560
> 
> 赞同：2
> 
> 时间：2013-04-03T14:45:13.067
> 
> 标签：javascript, php, jquery, json, ajax

我有 3 个通过 javascript 创建的下拉菜单，它们在做出选择时调用“updateTable”函数。

最终，我试图根据下拉列表中的选择“过滤”一个数据表。如果用户只选择其中一个下拉菜单，我希望其他选项同时提交（如果未选择，则仅使用空数据，或者如果他们已经选择了当前选择，则使用当前选择的选项）。

我的 updateTables 函数如下所示：

```
function updateTables (creativeVal,stationVal,verticalVal) 
  {
    //-----------------------------------------------------------------------
    //Send the filter criteria
    //-----------------------------------------------------------------------

    $.ajax({                                      
        url: 'api.php',   //the script to call to get data          
        data: {"creative": creativeVal, "station": stationVal, "vertical": verticalVal},  //insert url arguments here to pass to api.php for example "id=5&parent=6"
        dataType: 'json',   //data format      
        success: function(response) //on recieve of reply     
        { //Do the following on Success   

        $('#results').empty();
        updateTableRows(response);

        } //end of on success
    }); //End Ajax call
}; //End Creative Function 
```

我的下拉菜单如下所示：

```
<!--DROPDOWNS-->
 <div id="dropdowns">

    <div id="creativesel">
    Creative -  
    <select name="creative-select" id="creative-select" onChange ="updateTables(this.value);">
        <option value="" selected="selected">All</option>
    </select>
    </div> 

    <div id="stationsel">
    Station - 
    <select name="station-select" id="station-select" onChange ="updateTables(this.value)">
        <option value="" selected="selected">All</option>
    </select>
    </div>

     <div id="verticalsel">
    Vertical - 
    <select name="vertical-select" id="vertical-select" onChange ="updateTables(this.value)">
        <option value="" selected="selected">All</option>
    </select>
    </div>

</div> <!--Dropdowns ending--> 
```

无论选择哪个下拉列表 - 请求都会通过附加？`creative=whatever_the_user_selected_from_any_of_the_3_dropdowns`

最终我希望它附加类似的东西？`creative=whatever_selection&vertical=whatever_selection&station=whatever_selection` 所以我可以在另一端获取数据并用它做我需要做的事情。

我是否不正确地发送了 json 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:52:24.420

像这样的东西怎么样：http: [//jsfiddle.net/joeframbach/2XBVv/](http://jsfiddle.net/joeframbach/2XBVv/)

我已将`onchange`事件移至它所属的 jquery，并从所有下拉列表中提取所有值，而不仅仅是更改的值。

**html**：

```
<!--DROPDOWNS-->
 <div id="dropdowns">

    <div id="creativesel">
    Creative -  
    <select name="creative-select" id="creative-select">
        <option value="" selected="selected">All</option>
    </select>
    </div> 

    <div id="stationsel">
    Station - 
    <select name="station-select" id="station-select">
        <option value="" selected="selected">All</option>
    </select>
    </div>

     <div id="verticalsel">
    Vertical - 
    <select name="vertical-select" id="vertical-select">
        <option value="" selected="selected">All</option>
    </select>
    </div>

</div> <!--Dropdowns ending--> 
```

**javascript**：

```
$(function() {
    $('#dropdowns select').change(function() {
        //-----------------------------------------------------------------------
        //Send the filter criteria
        //-----------------------------------------------------------------------

        $.ajax({                                      
            url: '/echo/json',   //the script to call to get data          
            data: {"creative": $('#creative-select').val(), "station": $('#station-select').val(), "vertical": $('#vertical-select').val()},  //insert url arguments here to pass to api.php for example "id=5&parent=6"

            dataType: 'json',   //data format      
            success: function(response) //on recieve of reply     
            { //Do the following on Success   

                $('#results').empty();
                console.log(response);

            } //end of on success
        }); //End Ajax call
    }); //End Creative Function  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:51:47.137

将其他下拉列表的值添加到您的`onchange`调用中。

```
updateTables($('#creative-select').val(), $('#station-select').val(), $('#vertical-select').val()) 
```

或者，不要在 onChange 方法中传递参数并在 updateTable 函数中获取值。

# javascript - 使用 Javascript 检测是否安装了字体，如果没有，则提供不同的 css

> ID：15790564
> 
> 赞同：1
> 
> 时间：2013-04-03T14:45:26.640
> 
> 标签：javascript, jquery, css, fonts, embedded-fonts

我是 Javascript（但不是 HTML 或 CSS）的新手，我正在尝试使用[Lalit Patel](http://www.lalit.org/lab/javascript-css-font-detect/)的这个脚本来检测用户系统上是否安装了字体，如果没有，则提供修改后的样式表。我已经成功地让第一部分工作：我上传了 fontdetect.js 文件，在我的标题中调用它，然后在我的 body 标签结束之前粘贴它：

```
<script type="text/javascript">
window.onload = function() {
    var detective = new Detector();
    alert(detective.detect('Courier'));
};
</script> 
```

（以 Courier 为例。）这会导致在页面加载时弹出警报，告诉我是否安装了字体，并且效果很好。但我不知道如何让脚本获取不同的样式表，而不是触发警报。这似乎是基本的东西，但我在任何地方都找不到细节，即使我一直在研究 Javascript 教程。任何指导将不胜感激！

如果需要更多细节：如果用户没有安装自定义字体或完全关闭自定义字体，我想使用 CSS 更改文本的大小/间距属性，以便后备字体能够以适应同一个空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:49:35.530

```
var detective = new Detector();
if (!detective.detect('Courier')){
  var s = document.createElement('link');
  s.rel = 'stylesheet';
  s.type = 'text/css';
  s.media = 'all';
  s.href = '/link/to/alternative/stylesheet.css';
  document.getElementsByTagName('head')[0].appendChild(s);
} 
```

猜测是这样的。如果`.detect()`失败，它将动态创建样式表并将其插入页面。如果遇到问题，也可以使用[`.setAttribute()`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)off 的`s`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:49:36.797

您可以使用 JS 向网站添加样式表：

```
var detective = new Detector();

if (!detective.detect('Courier')){    
     document.createStyleSheet('location/stylesheet.css');
}
else
{
     document.createStyleSheet('location/otherstylesheet.css');
} 
```

因此，您可以检查检测器是否返回 true，如果不加载一种样式，则加载另一种样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:53:39.580

在尝试了所有提供的方法之后，这是对我有用的方法（来自[这个答案](https://stackoverflow.com/a/4754995/1958539)，但它实际上是这里提供的两个答案的混合）。应该注意的是，这在 IE8 中有效，与大多数其他方法不同（遗憾的是，我确实需要 IE8 兼容性）。

```
<script type="text/javascript">
    window.onload = function() {
        var detective = new Detector();
        if (!detective.detect('Meat')){
            var url = 'link/to/style.css'
            if(document.createStyleSheet) {
                try { document.createStyleSheet(url); } catch (e) { }
            }
            else {
                var css;
                css         = document.createElement('link');
                css.rel     = 'stylesheet';
                css.type    = 'text/css';
                css.media   = "all";
                css.href    = url;
                document.getElementsByTagName("head")[0].appendChild(css);
            }
        }
    };
</script> 
```

这检测到我的浏览器不接受嵌入字体（“Meat”是我嵌入的字体之一）并提供了备用 CSS（尽管有轻微的延迟/无样式文本闪烁，可能是因为它位于页面底部？）无论如何，再次感谢所有的帮助！

# openerp - Most future-proof way to embed an iframe in an OpenERP view?

> ID：15790566
> 
> 赞同：1
> 
> 时间：2013-04-03T14:45:32.940
> 
> 标签：openerp

I wish to customize the partner view form to contain an additional tab (next to History). When clicking on this tab, I wish to show an embedded iframe, where the content is sourced from a different system.

What is the best way to go about this in OpenERP 7.0, such that it doesn't create problems when OpenERP is upgraded?

Thanks.

# ruby-on-rails - 引导弹出窗口不起作用 Rails

> ID：15790567
> 
> 赞同：2
> 
> 时间：2013-04-03T14:45:33.937
> 
> 标签：ruby-on-rails, twitter-bootstrap, popover, twitter-bootstrap-rails

我无法让我的引导弹出框在我的 rails 应用程序中正常工作。我尝试了其他问题的解决方案，但没有成功。

目前在我的 HTML 中，我有：

```
<i class="icon-exclamation-sign" id="info" rel="popover" data-content="some info"></i> 
```

和

```
<script>  
$(function () {
  $(".icon-exclamation-sign").popover();  
});  
</script> 
```

我的 application.js 看起来像：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap-datepicker
//= require_tree .
//= require bootstrap-tooltip
//= require bootstrap-popover 
```

我的 application.css 看起来像：

```
/*
*= require_tree .
*= require bootstrap-datepicker
*/ 
```

我收到错误：加载页面时未捕获的类型错误：对象 [对象对象] 没有方法“弹出框”。我究竟做错了什么？

编辑：我也试过在我的 application.js 中使用 require bootstrap 而不是 tooltip 和 popover ，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:20:10.080

尝试将代码放在下面`/app/assets/javascripts/`，看看它是否改变了任何东西。

/javascripts/some_name.js

```
$(document).ready(function() {
  $(".icon-exclamation-sign").popover();
}); 
```

实际上我认为问题`//= require_tree .`应该是最后一个，请尝试以下操作：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap-datepicker
//= require bootstrap-tooltip
//= require bootstrap-popover
//= require_tree . 
```

与 application.css 相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:59:25.620

我终于按照[这里](https://stackoverflow.com/questions/8356251/rails-3-1-assets-strange-serving-in-development)的建议解决了这个问题。

我不得不将这一行添加到我的 development.rb 文件中：

```
config.serve_static_assets = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:49:25.787

试试这个`rake assets:clean`命令。这应该会删除所有未采纳您的更改的旧版 JS/CSS。

对于大多数浏览器，您可以查看页面的源代码以检查它正在使用的资产文件的版本，查看您的更改是否在其中被提取，如果没有，这可能会起作用。

# jquery - jQuery 1.9.1 无法获取未定义或空引用的属性“createDocumentFragment”第 5823 行

> ID：15790568
> 
> 赞同：9
> 
> 时间：2013-04-03T14:45:38.503
> 
> 标签：jquery

最近我更新了我的 ASP.Net MVC4 项目以升级到 jQuery 1.9.1。但是从那以后，只要加载任何页面，我就会收到一个奇怪的错误：

(Chrome) jquery-1.9.1.js:5823 Uncaught TypeError: Cannot call method 'createDocumentFragment' of null

（IE10）无法获取未定义或空引用 jquery-1.9.1.js 的属性“createDocumentFragment”，第 5823 行字符 3

传递给其父函数 createSafeFragment(document) 的“document”参数始终为 null。该错误在 IE10 和 Chrome 中持续存在。以下是布局中包含脚本的方式：

```
<script src="/Scripts/jquery-1.9.1.js"></script>
<script src="/Scripts/jquery-ui-1.10.2.js"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>
<script src="/Scripts/bootstrap.js"></script> 
```

我试图通过调试脚本来跟踪错误，但找不到确切的来源。

有没有人遇到过这个有什么突破？任何帮助表示赞赏。

* * *

更新

* * *

jQuery Tooltip 与 Bootstrap Tooltip 冲突。更改了使用 Bootstrap 的功能，并且错误消失了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-01T17:37:14.147

您只是在引导程序和 jQuery UI 工具提示功能之间存在冲突。

您不能在同一显示器上使用展位工具提示功能。对于任何一个，然后去自定义另一个以删除工具提示功能。删除所有其他重复的无用功能（对于使用 JQUI 或 BT 的对话框也无用）。下载修改后的包并替换 js 目录中的 .js 文件。

未经检查的不需要的功能：[Boostrap 自定义包](http://twitter.github.io/bootstrap/customize.html)或[jQuery UI 自定义包](http://jqueryui.com/download/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-28T08:31:05.210

没有必要删除`$(document).tooltip();`。可能您打算使用 jQuery ui 工具提示而不是 Bootstrap 工具提示。使用这些行来恢复 Bootstrap 覆盖：

```
// return $.fn.tooltip to previously assigned value
var bootstrapTooltip = $.fn.tooltip.noConflict();

// give $().bootstrapTooltip the Bootstrap functionality
$.fn.bootstrapTooltip = bootstrapTooltip

// now activate tooltip plugin from jQuery ui
$(document).tooltip(); 
```

或者，确保您在jquery ui`bootstrap.js` **之前包含。**这也将优先考虑。

# quickbooks - How to get Customized template fields from invoice using QuickBooks QBFC

> ID：15790572
> 
> 赞同：3
> 
> 时间：2013-04-03T14:45:42.813
> 
> 标签：quickbooks, qbfc

I want to get custom S.O. Invoice Template fields using QuickBooks QBFC.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T17:19:11.137

以下是从销售订单中读取自定义字段的方法：

1.  将“0”添加`OwnerIDList`到`SalesOrderQuery`.
2.  `DataExtRetList`从附加到`SalesOrderRet`从查询返回的对象中读取自定义标头字段。
3.  `DataExtRetList`从每个中包含的对象`SalesOrderLineRet`和`SalesOrderLineGrouptRet`对象中读取自定义订单项字段`SalesOrderRet`（如果您正在读取订单项）。

如果您已经在使用`IncludeRetElementList`，则必须添加`DataExtRet`到列表中；如果你不是，那么在`IncludeRetElementList`你有自定义字段工作之前不要开始使用。就像任何交易查询一样，除非您`IncludeLineItems`在请求中设置标志，否则您不会看到任何订单项数据。

自定义字段在[QuickBooks SDK 手册](https://member.developer.intuit.com/qbSDK-Current/doc/html/wwhelp/wwhimpl/js/html/wwhelp.htm)中有详细记录。我建议您查看*QBSDK 程序员指南*中的*DataExt：使用自定义字段和私有数据*部分。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-11T19:04:32.100

为了详细说明 Paul Keister 的答案，您必须在查询中添加“0”的原因是因为这是您尝试检索的自定义字段的所有者 ID。0 可能是值，但如果所有者 ID 不同，您将不得不在此处使用不同的值。

一些示例 C# 代码：

```
//set the owner id of the custom field you are trying to get back
IInvoiceQuery invoiceQuery = requestMsgSet.AppendInvoiceQueryRq();
invoiceQuery.OwnerIDList.Add("0");

//set up query parameters and actually call your query...

//call this method for each invoice to get its custom fields (if they exist)
static void GetInvoiceCustomFields(IInvoiceRet invoice)
    {
        if (invoice.DataExtRetList == null)
        {
            return;
        }

        for (int i = 0; i < invoice.DataExtRetList.Count; i++)
        {
            IDataExtRet extData = invoice.DataExtRetList.GetAt(i);
            Console.WriteLine("external data name: " + extData.DataExtName.GetValue());
            Console.WriteLine("external data value: " + extData.DataExtValue.GetValue());
        }
    } 
```*

# ajax - Load ValidationSummary using ajax

> ID：15790574
> 
> 赞同：0
> 
> 时间：2013-04-03T14:45:50.487
> 
> 标签：ajax, asp.net-mvc-4

How to load ValidationSummary using ajax? I was trying to use MVC's ready Membership.
Simple question, but I'm stuck.

```
[HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    [RecaptchaControlMvc.CaptchaValidator]
    public ActionResult Register(RegisterModel model, bool captchaValid, string captchaErrorMessage)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
                try
                {
                    if (captchaValid)
                    {
                        WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                        WebSecurity.Login(model.UserName, model.Password);
                        return RedirectToAction("Index", "Home");
                    }
                    ModelState.AddModelError("", captchaErrorMessage);
                }
                catch (MembershipCreateUserException e)
                {
                    ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
                }

        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

View:

```
@using (Html.BeginForm()) {
@Html.AntiForgeryToken()
@Html.ValidationSummary()

<fieldset>
    <legend>Registration Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
            @Html.ValidationMessageFor(m => m.UserName)
            <input type="hidden" id ="some" value=""/>
        </li>etc. 
```

I don't want to redirect each time on for example, if username exists or etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:40:58.773

为此，您可以将部分视图返回为 html。呈现的部分将包含模型状态错误，因此将在以 html 形式返回时显示。

**例子**

可以创建一个名为 AjaxResult 的类

```
public class AjaxResult
{
    public string Html { get; set; }
    public bool Success { get; set; }
} 
```

然后在 ajax 调用的成功函数中，您可以将 html 附加到适当的元素。例如

```
$.ajax({
    url: 'http://bacon/receive', 
    dataType: "json",
    type: "POST",
    error: function () {
    },
    success: function (data) {
        if (data.Success) {
            $('body').append(data.Html);
        }
    }
}); 
```

# c++ - 如何删除二维双数组

> ID：15790576
> 
> 赞同：1
> 
> 时间：2013-04-03T14:45:58.563
> 
> 标签：c++, pointers, double, new-operator

我写了两个函数——一个创建二维双精度数组，另一个删除它。

```
double** createMatrix(int n)
{
    double **a = new double *[n];
    for (int i=0; i < n; i++)
        a[i] = new double[n];
    return a;
}

void deleteMatrix(double** a, int n)
{
    for (int i=0; i < n; i++)
        delete [] a[i]; // ERROR HERE
    delete []a;
} 
```

分配的数组工作正常。但是当我尝试释放它时，我收到一个错误（在标记行上）：“project2.exe 已触发断点。”。我正在使用 Visual Studio 2012。

编辑：我创建了一个完整的程序：

```
int main()
{
    const int n = 10;
    double **m = createMatrix(n);
    deleteMatrix(m, n);
    return 0;
} 
```

它工作正常。另外，我发现了我的问题。这是`copyMatrix`功能上的错字。

```
for (int j=0; j <= n; j++) // should be < instead of <=
    a[i][j] = originalMatrix[i][j]; 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:17:55.183

显而易见的解决方案是首先不使用数组。

如何创建一个`n`x`n`矩阵？

```
#include <iostream>
#include <vector>

using Row = std::vector<int>;
using Matrix = std::vector<Row>;

int main() {
    size_t const n = 5;

    Matrix matrix(Row(n), n);
} 
```

简单吧？作为奖励，免费提供复制、移动和破坏。

# php - php curl没有将文件保存到位置

> ID：15790581
> 
> 赞同：0
> 
> 时间：2013-04-03T14:46:12.790
> 
> 标签：php, curl, laravel

我整天都在寻找答案，但没有运气！

我想将图像从网络下载/复制到我的服务器上的某个位置，下面的代码不会引发任何错误，除了图像只是没有保存到所需的目录或任何目录。

如您所见，我正在使用 cURL 获取图像并且变量 $contents 返回 true (1)，所以我假设脚本有效，但实际上我缺少一些东西。

## 非常感谢您的帮助。:-)

```
 $dir = URL::base() . "/img/products/";

    $imgSrc = "an image on the web";

    $file = fopen($dir, "wb");

    $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';              
    $headers[] = 'Connection: Keep-Alive';         
    $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';         
    $user_agent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)';  

    $ch = curl_init($imgSrc);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);         
    curl_setopt($ch, CURLOPT_HEADER, 0);         
    curl_setopt($ch, CURLOPT_USERAGENT, $user_agent); 
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FILE, $file); // location to write to
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
    $contents = curl_exec($ch);
    $curl_errno = curl_errno($ch);
    $curl_error = curl_error($ch);
    curl_close($ch);
    fclose($lfile);

    if ($curl_errno > 0) 
    {
        Log::write("CURL", "cURL Error (".$curl_errno."): ".$curl_error);
    } 
    else 
    {
        Log::write("CURL", "Data received: " . $contents);
    }

    return; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:20:33.420

使用 curl 为文件提供对 PHP FILE 的写入访问权限以存储内容。这可以通过三种方式完成：

*   如果您有终端访问权限，则使用 chmod 提供写入访问权限

*   如果您具有 CPanel 访问权限，则使用目录资源管理器，然后通过更改文件属性来提供对文件的写入访问权限。

*   您必须有权访问 FTP 并更改文件访问属性并提供写入访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:34:14.813

不要使用卷曲。

如果您需要做的只是下载图像，请改为使用“file_get_contents”。这很容易：

```
$fileContents = file_get_contents("https://www.google.com/images/srpr/logo4w.png");
File::put('where/to/store/the/image.jpg', $fileContents); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:43:36.143

```
function saveImageToFile($image_url,$output_filename)
{
    $ch = curl_init ($url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
    $raw=curl_exec($ch);
    curl_close ($ch);
    if(file_exists($saveto))
    {
        unlink($saveto); //Saves over files
    }
    $fp = fopen($saveto,'x');
    fwrite($fp, $raw);
    fclose($fp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:47:31.610

您的问题很简单，我不知道其他人如何忽略它。它是 Laravel 特有的。您的 $dir 变量返回一个 HTTP 资源标识符。您需要的是**文件系统**标识符。

对于 laravel，将你的 URL::to() 更改为 path("public") 以告诉 Laravel 停止使用 HTTP URI，而是使用公共文件夹 (/your/laravel/setup/path/public/) 的本地路径。

**代码**

```
$dir = path("public") . "img/products/";

$imgSrc = "an image on the web";

$file = fopen($dir . substr($imgSrc,strrpos("/",$imgSrc)+1), "wb");

$headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';              
$headers[] = 'Connection: Keep-Alive';         
$headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';         
$user_agent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)';  

$ch = curl_init($imgSrc);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);         
curl_setopt($ch, CURLOPT_HEADER, 0);         
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent); 
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FILE, $file); // location to write to
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
$contents = curl_exec($ch);
$curl_errno = curl_errno($ch);
$curl_error = curl_error($ch);
curl_close($ch);

if ($curl_errno > 0) 
{
    Log::write("CURL", "cURL Error (".$curl_errno."): ".$curl_error);
} 
else 
{
    Log::write("CURL", "Data received: " . $contents);
    fwrite($file,$contents);
    fclose($file);

}

return; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:50:05.627

好的，终于让一切正常了，如果其他人尝试做同样的事情，这里是代码！

我错过了这些部分：

```
 $dir = $_SERVER['DOCUMENT_ROOT'] . "/img/products/"; 
```

和

```
 fwrite($file,$contents); 
```

所以这是我的最终代码……感谢 Sébastien 为我指明了正确的方向。谢谢。

```
 if($method == 'save')
        {
            $productId = Input::get('pId');
            $removeProductImages = DB::table('product_ref_images')->where('product_id', '=', $productId)->delete();

            $imagesData = Input::get('imageRefs');

            $dir = $_SERVER['DOCUMENT_ROOT'] . "/img/products/";

            $sortOrder = 0;

            for ($i=0; $i < count($imagesData); $i++) {

                $imgSrc = trim($imagesData[$i]['imgSrc']);
                $imgId = trim($imagesData[$i]['imgId']);

                $file = fopen($dir . basename($imgSrc), "wb");

                $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';              
                $headers[] = 'Connection: Keep-Alive';         
                $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';         
                $user_agent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)';  

                $ch = curl_init($imgSrc);
                curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);         
                curl_setopt($ch, CURLOPT_HEADER, 0);         
                curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($ch, CURLOPT_FILE, $file);
                curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
                $contents = curl_exec($ch);
                $curl_errno = curl_errno($ch);
                $curl_error = curl_error($ch);
                curl_close($ch);

                if ($curl_errno > 0) 
                {
                    Log::write("CURL", "cURL Error (".$curl_errno."): ".$curl_error);
                    break;
                } 
                else 
                {
                    fwrite($file,$contents);
                    fclose($file);

                    $imageIds = DB::table('product_ref_images')->order_by('image_id', 'desc')->first();

                    if($imageIds == null)
                    {
                        $imageIds = 0;
                    }
                    else
                    {
                        $imageIds = $imageIds->image_id;
                    }

                    $updateImages = DB::table('product_ref_images')
                        ->insert(array(
                            'image_id'          =>  $imageIds + 1,
                            'product_id'        =>  $productId,
                            'flickr_image_id'   =>  $imgId,
                            'sort_order'        =>  $sortOrder++,
                            'local_storage_url' =>  $dir . basename($imgSrc),
                            'created_at'        =>  date("Y-m-d H:i:s"),
                            'updated_at'        =>  date("Y-m-d H:i:s")
                    ));
                }
            }
            return Response::json('Complete');
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-28T19:58:04.913

删除这一行：

```
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

您将响应存储到文件，而不是返回变量。否则，您必须自己保存它（就像您在其他解决方案中所做的那样）。

# r - 要求约会

> ID：15790590
> 
> 赞同：0
> 
> 时间：2013-04-03T14:46:54.463
> 
> 标签：r, date, calendar

我有一个生成报告的代码。在代码的开头，我需要询问两个日期（开始和期间）。我怎么能这样做？

我正在使用`readline()`，但它很难看

```
data1 <- as.Date(readline('Digite a data de inicio (dd/mm/aaaa): '), "%d/%m/%Y")
data2 <- readline('Digite a data de fim (não irá incluir o dia. Deixe em branco para pegar exatamente 1 mês contando da data de inicio): ') 
```

我用交互式 GUI 日历搜索了一些解决方案，但没有找到。

# android - 为什么 ListActivity 长点击检测在 Android 中如此复杂？

> ID：15790596
> 
> 赞同：1
> 
> 时间：2013-04-03T14:47:10.990
> 
> 标签：android, listview, click, detection

在我扩展的活动中，`ListActivity`我可以检测到`ListView`点击只是这样做：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Do something
} 
```

为什么对长点击检测做同样的事情如此复杂？

# python - Python子进程 - 编写多个标准输入

> ID：15790599
> 
> 赞同：10
> 
> 时间：2013-04-03T14:47:19.177
> 
> 标签：python, r, subprocess

我需要打开一个 R 脚本并为其提供由单独的 python 脚本制定的输入。该`subprocess`模块似乎是做到这一点的好方法。

不过，我遇到了一些令人费解的结果，即我显然只能通过`p.stdin`. 这是我到目前为止所拥有的：

```
from subprocess import Popen, PIPE, STDOUT

p = Popen(['r --no-save'],stdin=PIPE,stdout=PIPE,stderr=PIPE,shell=True)
p.stdin.write("source('myrscript.R')\n")
p.stdin.write('myfirstinput') 
```

当我运行此代码时会发生什么情况是第一个实例`stdin.write()`按预期执行（并打开我的 R 脚本），但第二行什么也不做，并且子进程（实际上是 R 脚本）退出并出现错误，表明子进程在预期输入的地方没有收到任何输入，因此被终止。

NB - 在一个完美的世界里，我会直接通过 R 进行交互，但是这个特定的脚本需要复杂的输入，而不能出于实际目的直接输入。此外，rpy / rpy2 不是一个选项，因为此脚本的最终用户不一定有权访问该模块或其依赖项。`rscript`也不是一种选择（出于多种原因，但主要是因为最终用户 R 配置的可变性）。

最后，`p.communicate`这不是一个选项，因为显然这将在写入后关闭进程，我需要保持打开状态。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-11T21:46:16.813

您需要致电`.communicate()`：

```
from subprocess import Popen, PIPE, STDOUT

p = Popen(
    ['r', '--nosave'],
    stdin=PIPE,
    stdout=PIPE,
    stderr=PIPE)
p.stdin.write("source('myrscript.R')\n")
p.stdin.write('myfirstinput\n')
p.stdin.write('q\n')

stdout, stderr = p.communicate()

print '---STDOUT---'
print stdout
print '---STDERR---'
print stderr
print '---' 
```

### 讨论

*   我不使用它，`shell=True`而且它似乎与我的*假 R*脚本一起工作，因为我的系统中没有安装 R。您可能需要也可能不需要它。
*   我更喜欢将命令行分解成一个字符串列表，如图所示，但是单个字符串`r --nosave`也可以使用；只是不要同时做这两个。
*   不要忘记`stdin.write()`不写换行符`\n`，你必须自己提供。

# 更新

我的第一次尝试不成功，我希望第二次尝试更接近。正如 JF Sebastian 建议的那样，您可能想要使用`pexpect`：

```
import pexpect
import sys

if __name__ == '__main__':
    prompt = '> ' # Don't know what the R prompt looks like
    lines = ['one', 'two', 'three']

    r = pexpect.spawn('r --no-save', logfile=sys.stdout)
    for line in lines:
        r.expect(prompt)
        r.sendline(line)

    # If you want to interact with your script, use these two lines
    # Otherwise, comment them out
    r.logfile = None # Turn off logging to sys.stdout
    r.interact() 
```

### 讨论

*   您可能需要安装`pexpect`. 我做到了`pip install pexpect`
*   如果您不想与系统交互，请注释掉最后两行，但请确保发送一些信号让 R 脚本退出。
*   `spawn()`返回一个对象，请参阅[此处](http://pexpect.sourceforge.net/pexpect.html#spawn)`spawn`的文档。

# javascript - 检查用户是否在 facebook 上注册

> ID：15790604
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:28.120
> 
> 标签：javascript, facebook, html, facebook-javascript-sdk

我创建了简单的 facebook 注册页面。有什么方法可以检查用户是否使用 javascript 注册？

这是我的注册页面：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'xxxxxxx', // App ID from the App Dashboard
      channelUrl : 'http://xxxxxxxxxx', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));

<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js#appId={xxxxxxxx}&xfbml=1"></script>

<fb:registration 
  fields="name,birthday,gender,location,email" 
  redirect-uri="http://xxxxxxxxxxxx"
  width="530">
</fb:registration> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:39:39.160

是的，当您加载 javascript SDK 时添加此行

```
});

    // Additional initialization code such as adding Event Listeners goes here
    FB.getLoginStatus(userStatus);
  }; 
```

现在在文件的底部添加以下内容：

```
<script>
        function userStatus(response) {
            if (response.status === 'connected') {
              //the user is logged in on facebook and has already authorized your app
            } else if (response.status === 'not_authorized') {
              //the user is logged in on facebook but hasn't authorized your app
            } else {
              //the user is not logged in on facebook so we don't know if he has granted permission to your app
            }
        }
</script> 
```

# mysql - mysql 计数显示比预期更多的结果

> ID：15790605
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:29.653
> 
> 标签：mysql

这是我的查询：

```
SELECT COUNT(*) FROM jos_mls AS mls 
    INNER JOIN jos_activeagents AS active ON active.AGENTUID = mls.MSTLISTBRD
    AND mls.MSTACTSTA = 'Active' OR mls.MSTACTSTA = 'Keep Showing'; 
```

表格很大，所以很难显示表格结构。

当我在没有 的情况下运行计数时`AND mls.MSTACTSTA = 'Active' OR mls.MSTACTSTA = 'Keep Showing'`，我得到了预期的结果（大约 500）。但是当我想用这些参数过滤时，它会返回 25000+ 个结果，而它应该低于 500。

我认为这是一个语法问题，但查找类似的问题，我无法提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:51:32.133

使用`WHERE`子句

```
SELECT COUNT(*) FROM jos_mls AS mls 
    INNER JOIN jos_activeagents AS active ON active.AGENTUID = mls.MSTLISTBRD
    WHERE mls.MSTACTSTA = 'Active' OR mls.MSTACTSTA = 'Keep Showing'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:55:11.627

```
SELECT COUNT(*) 
  FROM jos_mls mls 
  JOIN jos_activeagents active 
    ON active.AGENTUID = mls.MSTLISTBRD
   AND (mls.MSTACTSTA = 'Active' OR mls.MSTACTSTA = 'Keep Showing'); 
```

或者

```
SELECT COUNT(*) 
  FROM jos_mls mls 
  JOIN jos_activeagents active 
    ON active.AGENTUID = mls.MSTLISTBRD
   AND mls.MSTACTSTA IN('Active','Keep Showing'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:57:26.457

`AND`具有优先权，`OR`因此您应该在条件的第二部分周围使用括号来获得所需的输出：

```
SELECT COUNT(*) FROM jos_mls AS mls 
    INNER JOIN jos_activeagents AS active ON active.AGENTUID = mls.MSTLISTBRD
    AND (mls.MSTACTSTA = 'Active' OR mls.MSTACTSTA = 'Keep Showing'); 
```

您获得的行数比预期多得多的原因是您运行的实际查询与此相同：

```
SELECT COUNT(*) FROM jos_mls AS mls 
    INNER JOIN jos_activeagents AS active ON (active.AGENTUID = mls.MSTLISTBRD
    AND mls.MSTACTSTA = 'Active') OR mls.MSTACTSTA = 'Keep Showing'; 
```

# c# - c# windows窗体覆盖dispose问题

> ID：15790607
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:31.073
> 
> 标签：c#, dispose, j#

我正在开发一个项目，我将 j# UI 代码转换为 C#。在旧代码 (j#) 中，有一个类扩展了表单和方法：

```
public void dispose()
{
   super.dispose();
   components.dispose(); 
} 
```

将导入从:`com.ms.wfc.ui`更改`system.windows.form`为编译器要求我更改`super.dispose()`为`super.Dispose()`. （与组件相同）。

我的问题是我是否也需要将上述方法更改`Dispose`为？在 J# 代码中它没有说这是否被覆盖，我想如果我不改变它，`dispose()`当这个表单关闭时不会被调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:51:59.810

C# 区分大小写。而如果要重写表单的IDIsposable接口方法实现，必须用大写字母写成is：

```
public void Dispose()
{
   //...
} 
```

希望，我正确理解了你的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:59:17.303

您不需要将 Dispose 方法声明为 override，将其更改为 Dispose() 就足够了。

```
public class MyClass : IDisposable
{
    public void Dispose()
    {
        // Perform any object clean up here.

        // If you are inheriting from another class that
        // also implements IDisposable, don't forget to
        // call base.Dispose() as well.
    }
} 
```

这是在 C# 中使用 Dispose 的一个很好的教程：http: [//www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)

# android - 如何在android开发中设置多个活动？

> ID：15790611
> 
> 赞同：-12
> 
> 时间：2013-04-03T14:47:38.180
> 
> 标签：android, ios, user-interface

我是一名试图接近 android 世界的 ios 开发人员。我已经设置了我的第一个活动，但我真的有点困惑。要开发应用程序的用户界面，我必须将每个视图开发为单独的 xml 文件？Xcode Storyboard 没有什么类似的东西？有人能给我一个简单的想法，让我知道我要做什么来开发一个由多个视图组成的简单应用程序，以及一些导致不同视图的按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:04:55.323

我可以理解在 iOS 上开发与 Android 的巨大差异，所以这里是基础知识：

*   在 Android 中，您有活动，这只是表示页面或视图的一种奇特方式。您有一个 XML 布局文件和一个执行功能任务的 Java 文件。
*   为了在活动之间切换，您需要创建意图。

这是我刚刚制作的示例：

XML 文件 1

```
<LinearLayout>
//Layout stuff in here
</LinearLayout> 
```

Java 文件 1

```
public void nextActivity(View view)
{
        Intent intent = new Intent(this, NextActivity.class);
    startActivity(intent);

} 
```

Java 文件 2

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setupActionBar();
    Intent intent = getIntent();
} 
```

如果您需要进一步的帮助，请点击此[链接](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:20:15.117

[您可以从http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)的一个很好的培训教程开始。

[稍后您可以在http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)看到视图“布局” 。

activity_main.xml 包含在此布局中包含您的视图的布局。Eclipse ADT 插件和 Android SDK 提供了一个与 Storyboard 类似的编辑器，用于药物和放置按钮、文本字段等。

# javascript - highcharts - 自定义图例 - 将过滤器的名称发送到 php 文件

> ID：15790612
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:39.367
> 
> 标签：javascript, jquery, highcharts

我能够反转高图表中过滤器的行为，以便单击系列名称，向下过滤，而不是删除数据。

这是我用来做的代码。

```
 events: {
        legendItemClick: function(event) {
            if (!this.visible)
                return true;

            var seriesIndex = this.index;
            var series = this.chart.series;

            for (var i = 0; i < series.length; i++)
            {
                if (series[i].index != seriesIndex)
                {

                    series[i].visible ? series[i].hide() : series[i].show();
                } 
            }

            return false;
        }
    }, 
```

现在，每次有人单击过滤器时，我想将该过滤器的名称发送到我的 php 文件以进行进一步处理，但无法这样做。这是我尝试过的

```
 events: {
        legendItemClick: function(event) {
            if (!this.visible)
                return true;

            var seriesIndex = this.index;
            var series = this.chart.series;

            for (var i = 0; i < series.length; i++)
            {
                if (series[i].index != seriesIndex)
                {

                    series[i].visible ? series[i].hide() : series[i].show();
                } 
            }

                                                        if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                }
              }
            xmlhttp.open("GET","/s.php?o="+series,true);
            xmlhttp.send();

            return false;
        }

    }, 
```

我认为这可能是没有正确调用过滤器名称的问题？上面写着系列，我试过了

seriesIndex、series、event.point.index.name 以及许多其他没有运气的人。我的问题是我在该事件括号中使用的当前代码是否正确，以及 B，如果我使用正确的字符串/变量来调用过滤器/索引的名称。

更正* - 使用“seriesIndex”作为变量，在一定程度上起作用，它将发送 0,1,2（对应于过滤器的 id），但仅当它是单击的第一个选择时。如果单击第二个过滤器，它将停止将自身发送到 php 文件。

/// 感谢 SteveP。

调用 php 的函数必须在第一个 if 语句之前，像这样

```
 events: {
        legendItemClick: function(event) {
                                                                        if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                }
              }
            xmlhttp.open("GET","/s.php?u="+this.name,true);
            xmlhttp.send();
            if (!this.visible)
                return true;

            var seriesIndex = this.index;
            var series = this.chart.series;
            for (var i = 0; i < series.length; i++)
            {
                if (series[i].index != seriesIndex)
                {
                    series[i].visible ? series[i].hide() : series[i].show();
                } 
            }

            return false;
        }

    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:31:33.677

如果要发送系列名称，请尝试：

```
this.name 
```

因为'this'应该是选定的系列，所以this.name应该是它的名字，假设你在你的图表中给了它一个。

# c# - 在 C# 中将当前 URL 保存到收藏夹

> ID：15790613
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:41.430
> 
> 标签：c#, .net

我正在寻找一个 C# 脚本库，它将当前 URLS 添加到不需要构建单独的类调用的 IE 书签。我正在尝试构建一个脚本，该脚本采用当前 URL 并将其保存到收藏夹...任何帮助将不胜感激我是菜鸟，我试图弄清楚这一点。我现在正试图保存饼干，但这似乎没有希望

```
 Manager.LaunchNewBrowser();

 const string url = "www.google.com";
{
var cookie = new Cookie("foo", "bar", "/", url);
cookie.Expires = DateTime.MaxValue;
var ok = ActiveBrowser.Cookies.SetCookie(cookie);
}

var c = ActiveBrowser.Cookies.GetCookies("http://www.google.com");
var count = c.Count;

Log.WriteLine(count.ToString());
foreach (Cookie cookie in ActiveBrowser.Cookies.GetCookies("http://www.google.com"))
{
Log.WriteLine(cookie.Name);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:07:35.130

C# is not a scripting language, it's a server-side programming language part of the Microsoft .NET (dot net) platform. You should use *Javascript* (JS) for client-side scripting in the browser.

Please read, for example, the answers posted to this StackOverflow question:

[How do I add an "Add to Favorites" button or link on my website?](https://stackoverflow.com/questions/10033215/add-to-favorites-button)

[(and of course there are many more examples to find around the web, through your favorite search engine).]

# jquery - 关于 jQuery / Css IE 7-8-9 问题的建议

> ID：15790614
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:42.263
> 
> 标签：jquery, html, css, image, internet-explorer

我正在尝试使用一堆浮动的动态陈旧图像创建一个基于投资组合的网站，到目前为止，我已经通过 jQuery 和 css 为 chrome 和 Firefox 工作（最新版本 anno. 2012）

我的问题是（一如既往）IE 7-8-9，我无法理解在这个平台上可能会破坏它的问题，我最好的猜测是这是一个 jQuery 交叉问题？

[检查这个 jsFiddel](http://jsfiddle.net/9Xv8L/1/)

[或在这里查看我的在线示例](http://test.madeofdots.com/jq/02/)

我正在寻找的是一些关于我可能会出错的建议，因为我现在头发灰白，试图自己解决，任何建议、想法、文章等都非常受欢迎

在此先感谢

jQuery代码：

```
$(window).load(function () {
    plottingData();
    resizeImage();
});

$(window).resize(function () {
    plottingData();
    resizeImage();
});

function plottingData() {
    var image = $('.box img');
    var divW = $(".box").width();
    var divH = $(".box").height();
    var imgW = image.width();
    var imgH = image.height();
    $('.outputText').html('DIV CONTAINER W: ' + divW + ' H: ' + divH + '  ::  imgW: ' + imgW + ' : imgH: ' + imgH);
}

function resizeImage() {
    $("img").each(function () {
        var maxWidth = $(".box").width();; // Max width for the image
        var maxHeight = $(".box").height();; // Max height for the image
        var maxratio = maxHeight / maxWidth;
        var width = $(this).width(); // Current image width
        var height = $(this).height(); // Current image height
        var curentratio = height / width;
        // Check if the current width is larger than the max

        if (curentratio > maxratio) {
            ratio = maxWidth / width; // get ratio for scaling image
            /*
            $(this).css("width", maxWidth); // Set new width
            $(this).css("height", height *ratio); // Scale height based on ratio
            */
            $(this).css("width", "100%");
            $(this).css("height", "auto");
        } else {
            /*
            ratio = maxHeight / height; // get ratio for scaling image
            $(this).css("height", maxHeight);   // Set new height
            $(this).css("width", width * ratio);    // Scale width based on ratio
            */
            $(this).css("width", "auto");
            $(this).css("height", "100%");
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:02:43.243

试试看：

```
...
var box = $(this).parent(".box");
var maxWidth = box.width();
var maxHeight = box.height();
... 
```

同样的宽度`plottingData`，你也必须在那里迭代。你能告诉我你得到的所有盒子和图像的高度吗？你很幸运，它们看起来都一样大。为每个框和图像应用规则。

# php - TCPDF 为 A3 页面大小的纸张生成丑陋的图像

> ID：15790618
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:44.407
> 
> 标签：php, image, pdf, tcpdf

尝试使用 TCPDF 生成 A3 大小的 PDF，同时添加图像作为**背景图像**（3693x5136 像素另存为 CMYK）和一些文本，我使用以下代码：

```
$this->pdf->SetMargins(0, 0, -1, true);
$this->pdf->SetPrintHeader(false);
$this->pdf->SetPrintFooter(false);
$this->pdf->SetHeaderMargin(0);
$this->pdf->SetFooterMargin(0);
$this->pdf->SetAutoPageBreak(false, 0);    
$this->pdf->AddPage('P', 'A3');
$this->pdf->setJPEGQuality(99);
$this->pdf->setImageScale(1);
$this->pdf->Image('path/img/a3bg.jpg', 0, 0, 297, 420, 'JPEG', '', '', FALSE, 300, '', false, false, 0);
$this->pdf->endPage();
$this->pdf->setPageMark();
$this->pdf->Output('file.pdf', 'F'); 
```

背景图像在 Reader/Photoshop 中打开时看起来很奇怪（左），而在使用 Firefox 或 Chrome 预览时看起来还不错（右）。这是为什么？

# c - （C编程）用户名和密码识别

> ID：15790621
> 
> 赞同：2
> 
> 时间：2013-04-03T14:47:51.430
> 
> 标签：c

为什么我会得到`format '%s' expects argument of type 'char*'`？我应该如何解决这个问题？

这是我的代码：

```
char UserName[] = "iluvcake";
scanf("%s", &UserName);
printf("Please enter your password: \n");
char PassWord[] = "Chocolate";
scanf("%s", &PassWord);
    //if...else statement to test if the input is the correct username. 
    if (UserName == "iluvcake") 
    {
     if (PassWord == "Chocolate"){
     printf("Welcome!\n");
    }
    }else
    {
     printf("The user name or password you entered is invalid.\n");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:50:12.270

&UserName 是指向 char 数组的指针（即 char**）。你应该使用

```
scanf( "%s", UserName ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-30T20:38:16.033

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

main(){
char name[20];
char password[10];
printf("Enter username: ");
scanf("%s",name);
printf("Enter password: ");
scanf("%s",password);
if (strcmp(name, "Admin") == 0 && strcmp(password, "pass") == 0)
printf("Access granted\n");
else printf("Access denied\n");

getch();
} 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:50:11.097

一定是

```
scanf("%s", UserName);
scanf("%s", PassWord); 
```

因为`UserName`和`PassWord`是指向`char`数组的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:52:05.293

1.  scanf for %s 需要一个字符数组/指针，而不是指向它的指针。`&`从`scanf`语句中删除。
2.  您不能将字符串与`==`. 使用`strcmp`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-10T06:10:13.463

```
#include <stdio.h>

int main(){
int serial;
int code;

printf("Type the Serial Here: ");
scanf("%d", &serial);

if(serial== 1590){
    printf("Almost there, now type the code: ");
    scanf("%d", &code);
    if(code==2359)
    {
            printf("\nYOU ARE DONE, ENJOY");
    }
    else{
            printf("TRY AGAIN NEXT TIME");
    }

}
    else{
        printf("OPPS");
} 
```

# java - 如何保存动态创建的 HtmlInputText 组件的值

> ID：15790622
> 
> 赞同：0
> 
> 时间：2013-04-03T14:47:56.590
> 
> 标签：java, jsf, jsf-2

这个问题实际上是这里所说的问题的下一步：

[如何将动态创建的 HtmlInputText 组件的值绑定到 bean 属性？](https://stackoverflow.com/questions/15787053/how-to-bind-value-of-dynamically-created-htmlinputtext-component-to-bean-propert)

所以下一步是实际保存用户使用上一个问题中生成的动态表单（以编程方式创建的 jsf 表单，由简单的 inputexts 组成）提交的值。以下是每个组件的代码：

该模型：

```
@Entity
@Table(name = "imageviewer_crreviewerformdata")
public class CRReviewerFormData implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
@Column(name = "FdId")
private Long fdId;

@Column(name = "Input1")
private String input1;

@Column(name = "Input2")
private String input2;

@Column(name = "Input3")
private String input3;

/* getters & setters*/
// ... 
```

风景：

```
<p:commandButton value="View" action="#{reviewReportBean.updateDynamicPanelGrid()}"
                   oncomplete="dlg.show()" icon="ui-icon-image" >
    <f:param name="selectedImage" value="#{cRImageData.imName}" />
</p:commandButton>
...
<p:outputPanel id="outerContainerDynamicPanelGrid" autoUpdate="true">
    <h:panelGrid id="innerContainerDynamicPanelGrid"
                    binding="#{reviewReportBean.dynamicPanelGrid}">
    </h:panelGrid>
</p:outputPanel>
<p:commandButton id="viewSaveForm" value="Save" 
                    action='#{reviewReportBean.saveReport()}'>
</p:commandButton>
<p:commandButton id="viewEditForm" value="Edit" 
                    action='#{reviewReportBean.editReport()}'>
</p:commandButton>
... 
```

控制器：

```
@ManagedBean(name = "reviewReportBean")
@ViewScoped
public class ReviewReportBean implements Serializable { 
    private static final long serialVersionUID = 1L;
    private String imageOfInterest;
    private HtmlPanelGrid dynamicPanelGrid;
    private CRReviewerFormData cRReviewerFromData;
    // ...
    @PostConstruct
    public void init(){     
        dynamicPanelGrid = new HtmlPanelGrid();
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ConfigOptionsBean configOptionsBean = (ConfigOptionsBean) facesContext.getApplication().getVariableResolver().resolveVariable(facesContext, "configOptionsBean");

        cRReviewerFromData = new CRReviewerFormData();
    }

    @SuppressWarnings("unused")
    public void updateDynamicPanelGrid() {

        RequestContext requestContext = RequestContext.getCurrentInstance();
        Application application = FacesContext.getCurrentInstance().getApplication();
        dynamicPanelGrid.getChildren().clear();

        Row row1 = (Row) application.createComponent(Row.COMPONENT_TYPE);
        row1.setRendered(true);
        Row row2 = (Row) application.createComponent(Row.COMPONENT_TYPE);
        row2.setRendered(true);     
        Row row3 = (Row) application.createComponent(Row.COMPONENT_TYPE);
        row3.setRendered(true);

        HtmlOutputLabel label1 = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);      
        label1.setValue("I am the first label");
        label1.setStyle("font-weight:bold;color:black");
        label1.setId("label1");     
        HtmlOutputLabel label2 = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);      
        label2.setValue("I am the second label");
        label2.setStyle("font-weight:bold;color:red");
        label2.setId("label2");     
        HtmlOutputLabel label3 = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);      
        label3.setValue("I am the third label");
        label3.setStyle("font-weight:bold;color:red");
        label3.setId("label3");

        HtmlInputText input1 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
        input1.setId("input1"); 
        input1.setValueExpression("value", FacesContext.getCurrentInstance().getApplication().getExpressionFactory()
            .createValueExpression(FacesContext.getCurrentInstance()
                    .getELContext(), "#{reviewReportBean.input1}" , String.class));

        HtmlInputText input2 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);        
        input2.setId("input2");
        input2.setValueExpression("value", FacesContext.getCurrentInstance().getApplication().getExpressionFactory()
            .createValueExpression(FacesContext.getCurrentInstance()
                    .getELContext(), "#{reviewReportBean.input2}" , String.class));

        HtmlInputText input3 = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
        input3.setId("input3");
        input3.setValueBinding(arg0, arg1);
        input3.setValueExpression("value", FacesContext.getCurrentInstance().getApplication().getExpressionFactory()
            .createValueExpression(FacesContext.getCurrentInstance()
                    .getELContext(), "#{reviewReportBean.input3}" , String.class));

        dynamicPanelGrid.setColumns(2);

        dynamicPanelGrid.getChildren().add(label1);
        dynamicPanelGrid.getChildren().add(input1);     
        dynamicPanelGrid.getChildren().add(label2);
        dynamicPanelGrid.getChildren().add(input2);     
        dynamicPanelGrid.getChildren().add(label3);
        dynamicPanelGrid.getChildren().add(input3);
        requestContext.update(":viewDatagridForm:innerContainerDynamicPanelGrid");
    }
    // ...
} 
```

如何将动态创建的`HtmlInputText`组件的值保存到 bean 属性？

我在控制器（reviewReportBean）中实现了一个典型的 Save() 方法，如下所示：

```
public String saveReport() {
    String result = null;
    System.out.println(">>>> method to save form called!");

    Session session = HibernateUtil.getSessionFactory().openSession();

    CRReviewerFormData cRReviewerFormData = new CRReviewerFormData();
    cRReviewerFormData.setInput1(this.getInput1());
    cRReviewerFormData.setInput2(this.getInput2());
    cRReviewerFormData.setInput3(this.getInput3());

    Transaction tx = null;
    try 
    {
         tx = session.beginTransaction();
         session.save(cRReviewerFormData);
         tx.commit();
         result = SUCCESS;
    } 
    catch (Exception e) 
    {
         if (tx != null) 
         {
             tx.rollback();
             result = ERROR;
             e.printStackTrace();
         }
     } 
     finally 
     {
         session.close();
     }
     return result;
} 
```

当我尝试使用保存按钮时，我收到以下错误：

```
16:44:08,632 ERROR [ExceptionHandlerAjaxImpl:57] Component ID A3702:imageEditor:label1 has already been found in the view.  
java.lang.IllegalStateException: Component ID A3702:imageEditor:label1 has already been found in the view.  
at com.sun.faces.util.Util.checkIdUniqueness(Util.java:821)
at com.sun.faces.util.Util.checkIdUniqueness(Util.java:805)
at com.sun.faces.util.Util.checkIdUniqueness(Util.java:805)
at com.sun.faces.util.Util.checkIdUniqueness(Util.java:805)
at com.sun.faces.util.Util.checkIdUniqueness(Util.java:805)
at com.sun.faces.util.Util.checkIdUniqueness(Util.java:805)
at com.sun.faces.application.view.StateManagementStrategyImpl.saveView(StateManagementStrategyImpl.java:144) 
```

再往下一点我得到：

```
SEVERE: Servlet.service() for servlet ImageViewer Servlet threw exception
javax.portlet.faces.BridgeException: java.lang.IllegalStateException: CDATA tags may not nest 
```

表单ID有什么实际问题吗？

我已经实现了足够的 Save 方法实现还是我必须设置其他任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:01:54.857

通过设置解决了导致与重复 ids & cdata 标签相关的异常的问题：

```
FacesContext.getCurrentInstance().getViewRoot().setTransient(true); 
```

在 updateDynamicPanelGrid() 方法中

# android - OnPostExecute 在 doInBackground 完成之前运行 -AsyncTask

> ID：15790629
> 
> 赞同：1
> 
> 时间：2013-04-03T14:48:15.073
> 
> 标签：android, android-asynctask

在我的 Android 项目中，我`AsyncTask`用于`Facebook API`新闻提要请求。我收到错误：`OnPostExecute method executed before doInBackground request finish.`

```
 private class NewsFeedAsyncTask extends AsyncTask < Integer, Integer, Boolean > {

     @Override
     protected Boolean doInBackground(Integer...params) {
        if (Session.getActiveSession().getState().isOpened()) {
            Get_news_feed();
            return true;
        }
        return false;
     }

     @Override
     protected void onPostExecute(Boolean t) {
         super.onPostExecute(t);
         adapter = new FacebookAdapter(data, context);
         listView.setAdapter(adapter);
         adapter.notifyDataSetChanged();
         mPullRefreshListView.onRefreshComplete();
     }
 } 
```

**fetchNewsFeed ()**

```
public void fetchNewsFeed() {
    Session.openActiveSessionFromCache(context);
    if (Session.getActiveSession().getState().isOpened()) {
        Request.executeGraphPathRequestAsync(
            Session.getActiveSession(), "me/home", new Request.Callback() {
                @Override
                public void onCompleted(
                    Response response) {

                }
            }
        }
    }
} 
```

**OnActivityCreated()**

```
 @Override
 public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
     new NewsFeedAsyncTask().execute();
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:56:33.407

该`onPostExecute`方法**总是**在 之后执行`doInBackground`。

您的问题是该`Get_news_feed`方法（在该`doInBackground`方法的后台执行）发布一些要在 UI 线程上完成`runOnUiThread`的内容，然后返回（在执行 UI 线程上发布的内容之前）。

如果您希望`Get_news_feed`是同步的（在返回之前完成所有操作），则不应在 UI 线程上发布任何内容。

只需要做所有 UI 的东西`onPostExecute`。

# sql - 在嵌套子查询中找不到列或全局变量

> ID：15790631
> 
> 赞同：1
> 
> 时间：2013-04-03T14:48:26.123
> 
> 标签：sql, db2, ibm-midrange

我有一个带有两个表的 db2 数据库；让我们打电话给他们`order`和`order_comment`。

我想要的是检索最新评论的日期以及订单信息。

例如，在 sql server 2005 上，我可以编写如下查询：

```
select a.*, (select comment_datetime FROM
    (select comment_datetime, RANK() OVER (PARTITION BY order_id ORDER BY comment_datetime DESC) AS [rank]
        FROM order_comment c where c.order_id = a.id
    ) b where b.[rank] = 1) as 'Last Comment'
from order a 
```

这将返回以下数据：

```
| 编号 | 描述 | 最后评论 |
| 1 | 假订单 | 2013-04-03 10:05:04.797 |
```

但是，当我尝试对我的 db2 数据库运行以下查询（我认为是等效的）时，我收到此错误：`Column or global variable id1 not found.`

```
select b.id1, b.id2, b.status, 
    (select a.code from 
        (select code, RANK() over (order by date desc, time desc) as recent from
            history where h_id1 = b.id1 and h_id2 = b.id2 
                 and code in ('A', 'B', 'C')) a where a.recent = 1)
     as 'recent code'
from item b 
```

经过一番尝试，我发现`id1`在我的第一个子查询中使用并没有产生相同的错误；只有在子查询中使用超过一级的全局值时，我才会遇到问题。

这是预期的行为吗？我觉得这很奇怪。我认为任何数量的子查询都应该能够访问属于任何父级的任何值（就像 sql server 2005 上的情况一样，我假设大多数其他 RDBMS）。

如果这实际上是预期的行为，还有其他方法可以完成这项任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:01:13.420

我相信在 DB2 上，您必须“冒泡”（或向下）要在子查询中使用的任何列（IE，它必须在直接父查询或子查询中才能访问该列）。

作为替代方案，我认为您可以通过以下查询获得所需的内容：

```
SELECT 
     b.id1
    ,b.id2
    ,b.status
    ,(SELECT h.code
      FROM history h
      WHERE h.id1 = b.id1
        AND h.id2 = b.id2
        AND code in ('A', 'B', 'C')
      ORDER BY date DESC, time DESC
      FETCH FIRST ROW ONLY
     ) AS "Recent Code"
FROM item AS b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:54:19.380

您可以在 db2 中尝试此版本：

```
select b.id1, b.id2, b.status, 
       (select code
        from history
        where h_id1 = b.id1 and h_id2 = b.id2 and code in ('A', 'B', 'C') 
        order by DATE desc
        fetch first 1 rows only
       ) as RecentCode
from item b 
```

# c# - 在 .NET 语言中存储一个无限制（无限）的数字

> ID：15790636
> 
> 赞同：2
> 
> 时间：2013-04-03T14:48:43.623
> 
> 标签：c#, .net, vb.net

假设我想在一个类中存储无限数量的元素，就像 Excel 对工作表的数量所做的那样（受计算机内存的限制）。

保存用于获取元素的索引的方式或数字类型是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:52:04.357

如果你想存储一个任意大的整数，你可以使用[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx).

```
public BigInteger Index{ get; set; } 
```

请注意，您必须首先添加对`System.Numerics`dll 的引用。

它与 .NET Framework 中的其他整数类型不同，后者具有由其`MinValue`和`MaxValue`属性指示的范围。

因为它没有上限或下限，所以任何导致值增长过大`OutOfMemoryException`的操作都可以抛出。`BigInteger`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:50:47.130

如果你想滚动你自己的集合，你可以使用[Indexer](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。以下简单示例可以处理 100 个元素，但您可以使用 List 或其他机制将其扩展到所需的任意数量的元素：

```
class SampleCollection<T>
{
    // Declare an array to store the data elements. 
    private T[] arr = new T[100];

    // Define the indexer, which will allow client code 
    // to use [] notation on the class instance itself. 
    public T this[int i]
    {
        get
        {
            // This indexer is very simple, and just returns or sets 
            // the corresponding element from the internal array. 
            return arr[i];
        }
        set
        {
            arr[i] = value;
        }
    }
} 
```

此类显示客户端代码如何使用索引器：

```
class Program
{
    static void Main(string[] args)
    {
        // Declare an instance of the SampleCollection type.
        SampleCollection<string> stringCollection = new SampleCollection<string>();

        // Use [] notation on the type.
        stringCollection[0] = "Hello, World";
        System.Console.WriteLine(stringCollection[0]);
    }
}
// Output: 
// Hello, World. 
```

使用 an`int`作为索引器参数将使您可以访问大约 20 亿个离散元素。如果您需要更多，则必须使用`long`或任意精度类型，`BigInt`如索引器参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:11:32.887

Tim-Schmelter 和 Joseph Lee 为您提供了很好的答案。但考虑到它们是最大化价值的好答案。但是，请考虑实现的细节：如果您的数据结构只有一个字节，那么在考虑任何其他因素（数据结构等）之前，即使是 ULong 也可以索引超过 EB 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:54:43.920

任何数值类型的变量都是有限的。我所知道的最大的是 ULong（0 到 18,446,744,073,709,551,615）。如果你有比这更多的元素，你就有麻烦了......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:56:54.830

在 .Net 中，任何特定对象都有 2Gb 的限制。这意味着，例如，`byte[]`数组索引不能大于`int.MaxValue`- 实际上它甚至更小。

因此，您可以轻松地将`Int32`==`int`用于任何索引，或者您应该仔细考虑您的数据结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T14:59:56.957

要索引仅受可用系统内存限制的项目集合，您可能可以使用`long`. 该范围足以唯一地寻址存储库的各个位，该存储库的大小几乎是[TACC Stampede 的](http://www.tacc.utexas.edu/resources/hpc/stampede)14PB 驱动器空间大小的 150 倍（或超过其 207TB 主存储器库大小的 10000 倍）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T15:26:53.563

根据 Tim Schmelter 的回答：

```
public class BigList<T>
{
    public Object[] internalArray = new Object[Int16.MaxValue];

    public T this[BigInteger i]
    {
        get
        {
            if (i < Int16.MaxValue-1)
            {
                return (T)internalArray[(int)i];
            }
            else
            {
                i = i - int.MaxValue;
                BigList<T> following = (BigList<T>)internalArray[Int16.MaxValue-1];
                if (following != null)
                {
                    return following[i];
                }
                else
                {
                    throw new KeyNotFoundException();
                }
            }
        }
        set
        {
            if (i < Int16.MaxValue-1)
            {
                internalArray[(int)i] = value;
            }
            else
            {
                i = i - int.MaxValue;
                BigList<T> following = (BigList<T>)internalArray[Int16.MaxValue-1];
                if (following == null)
                {
                    following = new BigList<T>();
                    internalArray[Int16.MaxValue - 1] = following;
                }
                following[i] = value;
            }
        }
    }
} 
```

并开始单元测试：

```
[Test]
public void BigListTest()
{
    BigList<string> test = new BigList<string>();
    var bigIndex = new BigInteger(int.MaxValue);
    string value = "test";
    bigIndex *= 2;
    test[bigIndex] = value;
    Assert.AreEqual(test[bigIndex],value);
} 
```

# ruby-on-rails - 如何使用需要参数的构造函数为 mongo 模型制作对象

> ID：15790639
> 
> 赞同：1
> 
> 时间：2013-04-03T14:48:53.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, fabrication-gem

我有一堂课

```
class Transaction
    include Mongoid::Document

    belongs_to :objectA
    belongs_to :objectB

    def initialize(objectA, objectB)
        super
        @objectA = objectA
        @objectB = objectB
    end
end 
```

现在我正在尝试组合一个`Fabricator`

```
Fabricator(:transaction) do
     on_init do
        init_with(Fabricate(:klassA), Fabricate(:klassB))
     end
end 
```

我已经创建了`Fabricator(:klassA)`并且`Fabricator(:klassB)`工作得很好。

我不断收到此错误消息：

`NoMethodError: undefined method `[]' for #<Fabrication::Schematic::Attribute:0x007f9361b59950>`

我相当肯定它与初始化方法有关。如果我删除它的构造函数。

Mongo 版本 2.4.1 制造 (2.6.4) 轨道 (3.2.11)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:51:56.890

那是因为您的`super`调用会将您的自定义参数传递给`Mongoid::Document`期望（最多）两个哈希而不是两个对象的初始化程序。解决方案是调用`super()`，它不会传递任何参数，或者重写构造函数以仅传递额外的参数：

```
def initialize(objectA, objectB, args = nil, options = nil)
    super(args, options) 
    @objectA = objectA
    @objectB = objectB
end 
```

# c# - 如何使用 lambda 表达式和 linq 从范围中获取元素？

> ID：15790641
> 
> 赞同：4
> 
> 时间：2013-04-03T14:48:59.390
> 
> 标签：c#, linq, lambda

如何使用 lambda 和 linq 按范围获取元素？

例如：

我有一张包含 54 个元素的表格。我只想从位置 1-10、或 10-20 或 20-30 等中获取元素——通常是在某个数字范围内。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T14:50:50.613

```
List<int> list = new List<int>();
IEnumerable<int> interval = list.Skip(a).Take(b); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T14:52:46.233

你可以使用[`Enumerable.Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)和[`Enumerable.Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)方法；

> 绕过序列中指定数量的元素，然后返回剩余的元素。

* * *

> 从序列的开头返回指定数量的连续元素。

```
List<int> yourlist = new List<int>(){1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15};
IEnumerable<int> newlist = yourlist.Skip(2).Take(3);

foreach(var i in newlist)
{
   Console.WriteLine(i);
} 
```

输出将是；

```
3
4
5 
```

这是一个[`DEMO`](http://ideone.com/HZNzla).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T14:55:10.087

如果你想要的是寻呼，

```
int pageIndex = 1;
int pageSize= 10

List<object> list = new List<object>();
IEnumerable<object> interval = list.Skip(pageIndex*pageSize).Take(pageSize); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T14:51:21.943

像这样：

```
MyList.Skip(x).Take(y); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T14:51:32.353

您可以使用

```
.Skip(n1).Take(n2) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T23:33:18.077

采用`List<T>.GetRange(int index, int count);`

```
List<int> numbers = new List<int>() { 1, 2, 3, 4, 5, 6 };
List<int> firstThreeNumbers = numbers.GetRange(0, 3);
List<int> lastThreeNumbers = numbers.GetRange(numbers.Count - 3, 3); 
```

不要`Skip`和`Take`，只是`GetRange`！

希望这可以帮助！

# c++ - Visual Studio 2010 链接器中可能存在的错误（包括最小测试用例）

> ID：15790642
> 
> 赞同：3
> 
> 时间：2013-04-03T14:49:00.377
> 
> 标签：c++, visual-studio-2010, compiler-errors

这是最小的测试示例，它使我的 Visual Studio 2010 在`Release`模式链接期间崩溃。（只是一个例子，没有有意义的代码）

```
#include <iostream>
#include <functional>

struct Foo
{
    typedef std::function<void()> Func;

    Func m_func;
    float m_f;

    Foo(Func func, float f)
       :m_func(func),
        m_f(f)
    {
        func();
    }
};

struct Bar
{
    Bar(): foo(std::bind(&Bar::bar, this), 1.0f)
    {
        std::cout << "foobar";
    }

    Foo foo;
    void bar(){ std::cout << "bar"; }
};

int main()   
{
    Bar b;
} 
```

输出：

```
 fatal error C1001: An internal error has occurred in the compiler.
1>  (compiler file 'f:\dd\vctools\compiler\utc\src\p2\main.c[0x5AE87EF6:0x00000009]', line 183)
1>   To work around this problem, try simplifying or changing the program near the locations listed above.
1>  Please choose the Technical Support command on the Visual C++ 
1>   Help menu, or open the Technical Support help file for more information
1>  
1>LINK : fatal error LNK1000: Internal error during IMAGE::BuildImage
1>  
1>    Version 10.00.40219.01
1>  
1>    ExceptionCode            = C0000005
1>    ExceptionFlags           = 00000000
1>    ExceptionAddress         = 5AE87EF6 (5AE40000) "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\c2.dll"
1>    NumberParameters         = 00000002
1>    ExceptionInformation[ 0] = 00000000
1>    ExceptionInformation[ 1] = 00000009
1>  
1>  CONTEXT:
1>    Eax    = 040570CC  Esp    = 0042ED34
1>    Ebx    = 5B09E2A8  Ebp    = 0042ED4C
1>    Ecx    = 0405660C  Esi    = 04010660
1>    Edx    = 00000000  Edi    = 0000001E
1>    Eip    = 5AE87EF6  EFlags = 00010287
1>    SegCs  = 00000023  SegDs  = 0000002B
1>    SegSs  = 0000002B  SegEs  = 0000002B
1>    SegFs  = 00000053  SegGs  = 0000002B
1>    Dr0    = 00000000  Dr3    = 00000000
1>    Dr1    = 00000000  Dr6    = 00000000
1>    Dr2    = 00000000  Dr7    = 00000000 
```

在调试模式下，它构建得很好。

当`func()`不被调用时，它构建得很好。

何时`float`更改为`int`它构建就好了。（？？）

这是编译器错误吗？有人可以复制吗？

我有 Visual Studio 2010 Ultimate 10.0.40219.1 SP1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:51:45.960

是的，任何程序中的崩溃都是错误，除非崩溃是该程序的功能之一（据我所知，没有任何程序将崩溃作为一项功能进行宣传）。

您最好发送错误报告或将其直接带到 MS 论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T13:39:08.897

我有同样的问题。它发生在删除空的破坏后。恢复它们后，问题就消失了。我没有在上面的示例中尝试过，但我的建议是添加：

~Foo() {}

〜酒吧（）{}

# highcharts - 需要减少填充

> ID：15790644
> 
> 赞同：0
> 
> 时间：2013-04-03T14:49:04.580
> 
> 标签：highcharts, padding

知道如何使图表填充更小吗？

![在此处输入图像描述](https://i.stack.imgur.com/0yDS8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:23:03.457

是的 - 将图表的边距设置为 0：

```
chart: {
  plotBackgroundColor: null,
  plotBorderWidth: null,
  plotShadow: false,
  margin: 0 // <---- change this number
} 
```

[**（现场演示在这里）**](http://livecoding.io/5303254)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:24:47.860

您还可以设置间距值

[http://api.highcharts.com/highcharts#chart.spacingRight](http://api.highcharts.com/highcharts#chart.spacingRight) [http://api.highcharts.com/highcharts#chart.spacingLeft](http://api.highcharts.com/highcharts#chart.spacingLeft)

要控制饼图的大小，您可以使用： [http ://api.highcharts.com/highcharts#plotOptions.pie.size](http://api.highcharts.com/highcharts#plotOptions.pie.size)

# ruby-on-rails - json中的carrierwave升级和acts_as_api响应问题

> ID：15790646
> 
> 赞同：0
> 
> 时间：2013-04-03T14:49:14.420
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3, carrierwave

我正在使用acts_as_api 和carrierwave。我有以下代码：

```
# in the model
mount_uploader :avatar, ImageUploader
mount_uploader :profile_cover, ImageUploader

api_accessible :basic do |t|
  t.add :avatar
  t.add :profile_cover
end

# in the controller
render :json => resource.as_api_response(:basic) 
```

现在我已经将 Carrierwave 从 0.5.8 升级到 0.8 并且 json 响应不同：

```
# With carrierwave 0.5.8
{
  "avatar":{
    "url":"/uploads/avatar.jpg"
  },
  "profile_cover":{
    "url":"/uploads/profile_cover.jpg"
  }
}

# With carrierwave 0.8.0
{
  "avatar":{
    "avatar":{
      "url":"/uploads/avatar.jpg"
    }
  },
  "profile_cover":{
    "profile_cover":{
      "url":"/uploads/profile_cover.jpg"
    }
  }
} 
```

有没有办法像升级前一样显示没有重复元素的json？

# eclipse - 如何在 EList 中设置重复项

> ID：15790647
> 
> 赞同：0
> 
> 时间：2013-04-03T14:49:16.437
> 
> 标签：eclipse, eclipse-emf, eclipse-emf-ecore, emf

我一直在尝试在 EList 设置重复项、字符串。

以下方法禁止添加重复的问题：

```
elist.set(index, value); 
```

我一直在寻找一种解决方法，我发现我需要禁用唯一性，但这可能会影响框架的其余部分。

任何想法，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:17:20.790

禁用唯一性设置是我处理这个问题的方式。对框架的其余部分有什么影响？

# ios - 使用 IOS 6 分段上传到 Amazon S3

> ID：15790651
> 
> 赞同：1
> 
> 时间：2013-04-03T14:49:35.333
> 
> 标签：ios, ios6, amazon-s3

尝试将大于 5 mb 的文件上传到 Amazon S3

[http://aws.amazon.com/articles/0006282245644577](http://aws.amazon.com/articles/0006282245644577)，这里说

```
// The S3UploadInputStream was deprecated after the release of iOS6 
```

5 mb 以下的文件我可以通过 wifi 轻松上传：

```
NSData *dataForAamzon = [[NSFileManager defaultManager] contentsAtPath:pathForFiile];
@try {
        NSString *uploadName= @"somestring";

        S3PutObjectRequest *por = [[S3PutObjectRequest alloc] initWithKey:uploadName
                                                                 inBucket:[Constants userEventBucket]];
        por.contentType = nil;
        por.data        = dataForAamzon;

        // Put the image data into the specified s3 bucket and object.
        S3PutObjectResponse *putObjectResponse = [self.s3 putObject:por];

        [self performSelector:@selector(uploadAllFilesToAmazon:error:) withObject:nil withObject:putObjectResponse.error];

    }
    @catch ( AmazonServiceException *exception ) {
        NSLog( @"Upload Failed, Reason: %@", exception );
    } 
```

由于`S3UploadInputStream *stream`已弃用，如何检查文件是否大于 5mb 并在 IOS 6 或更高版本中使用分段上传。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:40:25.903

我希望您需要检查本地文件的大小超过 5MB 对吗？

```
NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:_client.filename error:nil];
if(fileAttributes)
{
    NSNumber *fileSizeNumber = [fileAttributes objectForKey:NSFileSize];
    long totalFileSize = [fileSizeNumber longLongValue];
    if(totalFileSize > 5*1024*1024)
    // Go for multipart upload
    else 
    // Go for Direct Put request
} 
```

或者从 NSData 您可以获取 Length 并执行相同的计算。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-20T17:45:57.913

AWS SDK 的新版本解决了我的问题。

新的 AWS SDK 正在自动处理文件大小，您需要创建传输管理器变量并将其委托给 s3 对象

就像是

```
-(void) uploadAgendatoAmazon
{
    //pass string in memory to nsdictionary
    NSData * data = [_uploadPlistString dataUsingEncoding:NSUTF8StringEncoding];

    NSString *uploadName= [NSString stringWithFormat:@"%@/%@/agenda.plist",[[NSUserDefaults standardUserDefaults] valueForKey:@"email"],self.textEventName.text];

    self.s3.maxRetries = 10;
    self.s3.timeout = 60;
    self.tm = [S3TransferManager new];
    self.tm.s3 = self.s3;
    self.tm.operationQueue.maxConcurrentOperationCount = 2;

   S3PutObjectRequest *por = [[S3PutObjectRequest alloc] initWithKey:uploadName
                                                                 inBucket:[Constants userEventBucket]];
    por.contentType = nil;
    por.data        = data;
    por.delegate = self;
    por.requestTag = @"uploadAgendatoAmazon";
    // Put the image data into the specified s3 bucket and object.
    [self.tm upload:por];
} 
```

这是有关完整详细信息的博客文章； [http://mobile.awsblog.com/post/TxIRFEQTW9XU8G/S3TransferManager-for-iOS-Part-I-Asynchronous-Uploads](http://mobile.awsblog.com/post/TxIRFEQTW9XU8G/S3TransferManager-for-iOS-Part-I-Asynchronous-Uploads)

# android - android锁屏settext应用程序崩溃

> ID：15790654
> 
> 赞同：1
> 
> 时间：2013-04-03T14:49:42.587
> 
> 标签：android, crash, alarm, lockscreen, settext

我使用了类似于stackoverflow链接之一的代码： [如何将系统警报设置文本动态更改](https://stackoverflow.com/questions/12364591/how-to-change-system-alarm-setting-text-dynamic) 为仅在锁定屏幕上设置文本，但我的应用程序在运行时崩溃，知道我缺少什么吗？

我的主要活动：

```
package l.a;
import java.net.ContentHandler;
import android.app.Activity;
import android.app.KeyguardManager;
import android.app.KeyguardManager.KeyguardLock;
import android.content.Context;
import android.os.Bundle;
import android.provider.Settings;

public class LockscreenActivity extends Activity {

/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Context context= getApplicationContext();
    KeyguardManager _guard = (KeyguardManager)
 context.getSystemService(Context.KEYGUARD_SERVICE);
        KeyguardLock _keyguardLock = _guard.newKeyguardLock("KeyguardLockWrapper");
                //to disable
        _keyguardLock.disableKeyguard();

         String message ="New alarm :";
         Settings.System.putString(this.getContentResolver(),
                 Settings.System.NEXT_ALARM_FORMATTED, message);

                 //to enable
         _keyguardLock.reenableKeyguard();

}
} 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="l.a"
 android:versionCode="1"
 android:versionName="1.0" >

  <uses-sdk android:minSdkVersion="7" />
  <uses-permission android:name="android.permission.WAKE_LOCK"/>
  <uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>

  <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".LockscreenActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

日志猫：

```
04-03 16:43:53.920: D/AndroidRuntime(486): Shutting down VM
04-03 16:43:53.928: W/dalvikvm(486): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-03 16:43:53.968: E/AndroidRuntime(486): Uncaught handler: thread main exiting due to uncaught exception
04-03 16:43:54.138: E/AndroidRuntime(486): java.lang.RuntimeException: Unable to start activity ComponentInfo{l.a/l.a.LockscreenActivity}: java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=486, uid=10040 requires android.permission.WRITE_SETTINGS
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.os.Looper.loop(Looper.java:123)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-03 16:43:54.138: E/AndroidRuntime(486):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 16:43:54.138: E/AndroidRuntime(486):  at java.lang.reflect.Method.invoke(Method.java:521)
04-03 16:43:54.138: E/AndroidRuntime(486):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 
04-03 16:43:54.138: E/AndroidRuntime(486):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-03 16:43:54.138: E/AndroidRuntime(486):  at dalvik.system.NativeStart.main(Native Method)
04-03 16:43:54.138: E/AndroidRuntime(486): Caused by: java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=486, uid=10040 requires android.permission.WRITE_SETTINGS
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.os.Parcel.readException(Parcel.java:1218)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.content.ContentProviderProxy.insert(ContentProviderNative.java:445)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.content.ContentResolver.insert(ContentResolver.java:629)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.provider.Settings$NameValueTable.putString(Settings.java:464)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.provider.Settings$System.putString(Settings.java:591)
04-03 16:43:54.138: E/AndroidRuntime(486):  at l.a.LockscreenActivity.onCreate(LockscreenActivity.java:43)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-03 16:43:54.138: E/AndroidRuntime(486):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-03 16:43:54.138: E/AndroidRuntime(486):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:53:07.220

好吧，通过简单地阅读 logcat，我发现了这一点：在第 4 行的末尾需要 android.permission.WRITE_SETTINGS。

# iphone - 下载管理器 - 对于离线内容 - 我应该使用 idleTimerDisabled 还是后台任务完成（或不使用或两者都使用）？

> ID：15790660
> 
> 赞同：1
> 
> 时间：2013-04-03T14:49:57.347
> 
> 标签：iphone, ios, cocoa-touch

我计划添加一项功能，让 Wi-Fi 上的用户可以下载大小在 150mb 和 1gb 之间的文件，以便他们可以离线使用该应用程序。

下载管理器需要 2 分钟到几个小时才能获取内容，具体取决于文件大小和 Wi-Fi 连接速度。

许多用户有一个自动锁定，它会在一段时间不活动后激活。当设备被锁定时，网络连接被终止以保持电池寿命（我相当确定这在 iOS5 中是正确的吗？）。这会让用户感到沮丧，因为除非他们保持设备处于活动状态，否则它会经常暂停他们的下载。

为了解决这个问题，我正在考虑 2 个选项：

1.  在应用下载时设置[idleTimerDisabled](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instp/UIApplication/idleTimerDisabled) = YES 以防止屏幕锁定。我认为这不是正确使用的好方法，因为文档似乎建议仅应为应用程序设置它。此外，它会不必要地保持屏幕开启，这对电池不利。

2.  使用后台任务完成 API。它会持续多长时间有点模糊，对于用户来说可能还不够长，但总比没有好。

这些选项中的一个或两个是否可行？

# mysql - MySQL如何在自己的子查询中使用查询中的变量值

> ID：15790661
> 
> 赞同：0
> 
> 时间：2013-04-03T14:50:00.270
> 
> 标签：mysql, percentage

我需要你的帮助：

我为用户、游戏和结果设置了一组关系表，我正在尝试计算每个用户的获胜百分比。

感谢大量浏览，我发现了以下方法：

```
SELECT Winner, (COUNT(Winner) * games.TotalPlayed) AS PercentWon
FROM Results
JOIN (
  SELECT 100/COUNT(*) AS TotalPlayed
  FROM games
  where Player_1 = 'John' OR Player_2 = 'John'
) AS games

where Winner == 'John' 
GROUP BY Winner
ORDER BY PercentWon DESC; 
```

这对于获取 Johns % 非常有效，但我希望它扫描整个结果表并为每个人打印值。但是，我不允许使用：

```
SELECT Winner, (COUNT(Winner) * games.TotalPlayed) AS PercentWon
FROM Results
JOIN (
  SELECT 100/COUNT(*) AS TotalPlayed
  FROM games
  where Player_1 = Winner OR Player_2 = Winner
) AS games

where Winner != 'Draw' 
GROUP BY Winner
ORDER BY PercentWon DESC; 
```

因为没有定义获胜者。如何在执行子查询时将获胜者的值传递给子查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:56:08.827

我终于想出了一些对你有用的东西。这很棘手，因为玩家可以在`games`表中的两个字段之一中。

```
SELECT player, (COALESCE(totalWon, 0) / count(*) * 100) as PercentWon
FROM ((SELECT DISTINCT Player_1 as player FROM games) UNION (SELECT DISTINCT Player_2 as player FROM games)) players
INNER JOIN games on (games.Player_1 = player or games.Player_2=player)
LEFT JOIN
(
    SELECT Winner, COUNT(Winner) as totalWon
    FROM Results
    WHERE Winner != 'Draw' 
    GROUP BY Winner
) as winners
ON winners.Winner = player
GROUP BY player
ORDER BY PercentWon DESC; 
```

FROM 子句中的 UNION 正在构建一个用户列表，我可以使用它来加入游戏（查找每位玩家的游戏总数）和获胜者（查找每位玩家的获胜次数）。

COALESCE 用于玩家没有赢得任何比赛的情况。由于我们正在加入表，这允许我们在没有匹配项时默认为 0 而不是 NULL。

这是基于我对您的架构的假设的 sqlfiddle：

[http://sqlfiddle.com/#!2/d762c/1/0](http://sqlfiddle.com/#!2/d762c/1/0)

# java - 图形界面没有出现

> ID：15790665
> 
> 赞同：0
> 
> 时间：2013-04-03T14:50:08.053
> 
> 标签：java, swing, jframe, visible

我有一个 Main 类，它有一个 public static void main(String[] args) {}。我还有一个名为 appGUI 的类。当我运行 Main 类时，我一直试图让 GUI 加载，但什么也没发生，甚至没有任何错误...... :(

这是主类：

```
 public class Main {

    /**
     * @param args
     */

    public static void main(String[] args) throws Exception {

        appGUI gui = new appGUI();
    }

} 
```

这是 appGUI 类：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
/*
 * Created by JFormDesigner on Wed Apr 03 19:24:35 BST 2013
 */

/**
 * @author Hrach Ghapantsyan
 */
public class appGUI extends JFrame {
    public appGUI() {
        initComponents();
    }

    private void loginButtonActionPerformed(ActionEvent e) {
        // TODO add your code here
    }

    private void initComponents() {
        // JFormDesigner - Component initialization - DO NOT MODIFY  //GEN-BEGIN:initComponents
        // Generated using JFormDesigner Evaluation license - Hrach Ghapantsyan
        loginPasswordField = new JPasswordField();
        loginUsernameField = new JTextField();
        usernameLabel = new JLabel();
        passwordLabel = new JLabel();
        loginButton = new JButton();
        titleLabel = new JLabel();

        //======== this ========
        setTitle("Experimental X | Administrator Login");
        Container contentPane = getContentPane();
        contentPane.setLayout(null);
        contentPane.add(loginPasswordField);
        loginPasswordField.setBounds(80, 65, 100, loginPasswordField.getPreferredSize().height);
        contentPane.add(loginUsernameField);
        loginUsernameField.setBounds(80, 35, 100, loginUsernameField.getPreferredSize().height);

        //---- usernameLabel ----
        usernameLabel.setText("Username:");
        contentPane.add(usernameLabel);
        usernameLabel.setBounds(20, 40, 55, usernameLabel.getPreferredSize().height);

        //---- passwordLabel ----
        passwordLabel.setText("Password:");
        contentPane.add(passwordLabel);
        passwordLabel.setBounds(20, 70, 55, passwordLabel.getPreferredSize().height);

        //---- loginButton ----
        loginButton.setText("Login");
        loginButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                loginButtonActionPerformed(e);
            }
        });
        contentPane.add(loginButton);
        loginButton.setBounds(80, 95, 100, loginButton.getPreferredSize().height);

        //---- titleLabel ----
        titleLabel.setText("Experimental X | Administrator Login");
        contentPane.add(titleLabel);
        titleLabel.setBounds(45, 10, 190, titleLabel.getPreferredSize().height);

        { // compute preferred size
            Dimension preferredSize = new Dimension();
            for(int i = 0; i < contentPane.getComponentCount(); i++) {
                Rectangle bounds = contentPane.getComponent(i).getBounds();
                preferredSize.width = Math.max(bounds.x + bounds.width, preferredSize.width);
                preferredSize.height = Math.max(bounds.y + bounds.height, preferredSize.height);
            }
            Insets insets = contentPane.getInsets();
            preferredSize.width += insets.right;
            preferredSize.height += insets.bottom;
            contentPane.setMinimumSize(preferredSize);
            contentPane.setPreferredSize(preferredSize);
        }
        setSize(270, 170);
        setLocationRelativeTo(getOwner());
        // JFormDesigner - End of component initialization  //GEN-END:initComponents
    }

    // JFormDesigner - Variables declaration - DO NOT MODIFY  //GEN-BEGIN:variables
    // Generated using JFormDesigner Evaluation license - Hrach Ghapantsyan
    private JPasswordField loginPasswordField;
    private JTextField loginUsernameField;
    private JLabel usernameLabel;
    private JLabel passwordLabel;
    private JButton loginButton;
    private JLabel titleLabel;
    // JFormDesigner - End of variables declaration  //GEN-END:variables
} 
```

我曾尝试在 Eclipse 和 netbeans 上运行主类，但它会在几秒钟后运行然后停止。我没有收到任何错误。大家有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:51:42.033

你还没有打电话`JFrame#setVisible`：

```
gui.setVisible(true); 
```

* * *

*一些注意事项：*

*   避免使用`null`布局。始终使用[布局管理器](http://download.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   不要使用*setXXXSize*方法。`getPreferredSize`确定组件大小的覆盖方法
*   您通常不想扩展 a `JFrame`，而是希望创建一个并直接使用。
*   考虑`JFrame`使用[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)`EDT`创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:52:38.783

确保在 GUI 上调用 setVisible(true)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:52:46.203

```
public class appGUI extends JFrame {

    setVisible(true);

   // ----
} 
```

放置此代码以使其可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:53:27.647

只需添加：

```
this.setVisible(true); 
```

# android - 确保服务销毁时不丢失数据

> ID：15790671
> 
> 赞同：0
> 
> 时间：2013-04-03T14:50:22.850
> 
> 标签：android, android-preferences

我正在构建一个应用程序，并且需要确保在服务被破坏时保留我的数据。我使用首选项来保存用户的设置，效果很好。

我现在要存储的数据是在首次配置应用程序时设置的纵向和纬度值，它们被用作基本位置，并且它们保持其价值至关重要。

我假设内容提供商对我的需求来说太过分了。

*任何处理碎片化偏好变化引起的问题的人，[这个](https://stackoverflow.com/questions/6822319/what-to-use-instead-of-addpreferencesfromresource-in-a-preferenceactivity)值得一看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T04:56:29.027

在您的活动 onCreate()/onResume() 中加载 sharedPref 数据。并在您的活动的 onDestroy()/onPause() 内保存服务数据

# c++ - 未声明的标识符/未找到标识符的问题

> ID：15790672
> 
> 赞同：-7
> 
> 时间：2013-04-03T14:50:24.617
> 
> 标签：c++, undeclared-identifier

这是我的代码，出于某种原因，它声称存在未声明的标识符，尽管我确实声明了所有内容

```
#include <iostream>
#include <string>
#include <fstream>
#include <iterator>
#include <algorithm>

using namespace std;

char a;
char caesarCipher (char );
char caesarDecipher (char );
string input;
string line;
std::string str;

void displayMenu() { 
    cout<<"This program will encrpt/decrypt files";
    cout<<"To encrypt press 'e'/To decrypt press 'd'";
    cin>>a;
}

void encrypt() { 
    string filename,ofilename;          
    cout << "Input filename: ";
    cin >> filename;
    cout << "Output filename: ";
    cin >> ofilename;

    ifstream infile(filename);
    ofstream outfile(ofilename);
    if ((infile >> noskipws) && outfile) {
        std::transform(istream_iterator<char>(infile),
                       istream_iterator<char>(),
                       ostream_iterator<char>(outfile),
                       ceaserCipher);

        string output = "";
        for(int x = 0; x < input.length(); x++) {
            output += ceaserCipher(input[x]);
        }
    }
}

/**************************************************************
* This function decrypts the content of infile and saves the *
* decrypted text into outfile *
* @param infile string (file that has encrypted text) *
* @param outfile string (file that will have decrypted text) *
**************************************************************/
void decrypt() { 
    string filename,ofilename;          
    cout << "Input filename: ";
    cin >> filename;
    cout << "Output filename: ";
    cin >> ofilename;

    ifstream infile(filename);
    ofstream outfile(ofilename);
    if ((infile >> noskipws) && outfile) {
        std::transform(istream_iterator<char>(infile),
                       istream_iterator<char>(),
                       ostream_iterator<char>(outfile),
                       ceaserDecipher);

        string output = "";
        for(int x = 0; x < input.length(); x++) {
            output += ceaserDecipher(input[x]);
        }
    }
}

/**************************************************************
* This function takes an character and a cipher key to return*
* an encrypted character. *
* @param c is a char (the character to be encrypted) *
* @param key is an integer (cipher key given in the handout) *
**************************************************************/
char ceaserCipher(char c) {
    if (isalpha (c)) {
        c = toupper(c);
        c = (((c-65)+5) % 26) + 65;
    }
    return c;
}

char ceaserDecipher(char c) {

    if (isalpha (c)) {
        c = toupper(c);
        c = (((c-65)-5) % 26) + 65;
    }
    return c;
}

int main() {
    char b;

    displayMenu();
    if (a=='e'||a=='E') {
        encrypt;
    }
    else (a=='d'||a=='D'); { 
        decrypt;
    }

    cout<<"To exit input 'e'/To continue press 'c'";
    cin>>b;
    switch (b) {
    case 'c':
        return main();

    case 'e':
        return 0;
        break;
    }
} 
```

这些是错误：

```
停止者密码'：未声明的标识符
停止密码'：未找到标识符
停止者解码器'：未声明的标识符
停止者解密器'：未找到标识符

```

任何和所有的帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:52:17.040

您拼错了函数名称。你有

```
char caesarDecipher (char ); 
```

当您尝试使用（以及稍后定义）`ceaserDecipher`时（注意不同的拼写方式：“ceasEr”和“ceasAr”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:52:18.263

您的前向声明将其拼写为 caesar，但您的函数定义将其拼写为 ceasar。

# windows - 如何获取安装过程中添加/修改的所有文件？

> ID：15790673
> 
> 赞同：1
> 
> 时间：2013-04-03T14:50:26.367
> 
> 标签：windows, installation

当我安装程序时，我需要知道添加/修改了哪些文件，修改了哪个注册表。有人可以建议执行此操作的程序或代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:05:20.590

我认为，这个工具正是你所需要的：[http ://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

> Process Monitor 是用于 Windows 的高级监控工具，可显示实时文件系统、注册表和进程/线程活动。它结合了两个传统 Sysinternals 实用程序 Filemon 和 Regmon 的功能，并添加了广泛的增强列表，包括丰富的无损过滤、会话 ID 和用户名等综合事件属性、可靠的进程信息、具有集成符号支持的完整线程堆栈对于每个操作，同时记录到文件等等。其独特的强大功能将使 Process Monitor 成为系统故障排除和恶意软件搜寻工具包中的核心实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T03:39:00.017

Systracer 完美地做你想做的事：

> SysTracer 是一个系统实用工具，它可以扫描和分析您的计算机以查找更改（添加、修改或删除）的数据到注册表和文件中。

有免费和付费版本。

[http://www.blueproject.ro/systracer](http://www.blueproject.ro/systracer)

# google-maps - 从 MSAccess 导出到 Google 电子表格

> ID：15790675
> 
> 赞同：1
> 
> 时间：2013-04-03T14:50:34.197
> 
> 标签：google-maps, ms-access, google-apps-script, google-sheets

在将此维护任务交给管理员之前，我试图在我的工作流程中保存几个步骤。

这是我目前的工作流程：

1.  将 MSAccess 中的 SQL 查询结果导出到 XLS 文件，其中包括 Google 地图坐标和其他 infoWindow 数据。MSAccess 2013（尚无谷歌云支持）。

2.  打开我现有/已发布的 google 电子表格，它是 Google Maps 应用程序的数据源：

3.  选择“文件>导入”，选择“替换电子表格”，单击“选择文件”，导航我的笔记本电脑以查找文件...

问题 - 2 个部分：

1.  是否可以将我的查询结果直接导出到该 Google 电子表格？

2.  否则，是否可以在我的笔记本电脑上同步 XLS 和相关的 Google 电子表格？

希望您能提供帮助！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:56:48.030

谷歌应用程序脚本将让您设置 jdbc 连接这里有一个示例： [https ://developers.google.com/apps-script/jdbc#reading_from_a_database](https://developers.google.com/apps-script/jdbc#reading_from_a_database)

您还需要为访问文件注册 ODBC。

# android - 如何为意图设置动作、类别和数据？

> ID：15790681
> 
> 赞同：6
> 
> 时间：2013-04-03T14:50:44.243
> 
> 标签：android, android-intent, email

我正在编写一个 Android 应用程序。我想调用其他应用程序来执行某些操作（发送电子邮件等）。我如何知道为意图设置哪个操作和类别？我应该查看其他应用程序的意图过滤器吗？如果该应用程序不是开源的怎么办？

另外，对于数据或额外属性，我不知道第 3 方应用程序将如何处理我的意图，所以我不知道如何设置属性。例如，我想要一个字符串作为电子邮件的标题，一个字符串作为电子邮件的内容，另一个字符串作为收件人，以及一张图片作为附件。我可以在意图中包含所有这些信息吗？如果第 3 方应用程序不提供任何处理它的功能怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:33:07.773

通常，对于 Android 中的常见任务，您会发送一个通用 Intent，其他应用程序可以在该 Intent 上注册。
例如，要分享一些文本，您将创建如下意图：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, getResources().getText(R.string.send_to))); 
```

将提示 android 的本机共享对话框，用户可以在该对话框中选择他想如何共享它。

特别是对于电子邮件，您会执行以下操作：

```
Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
                  "mailto","email@domain.com", null));
intent.putExtra(Intent.EXTRA_SUBJECT, "This is my email subject");
startActivity(Intent.createChooser(intent, "Email")); 
```

其他示例可能是启动默认短信应用程序：

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);         
sendIntent.setData(Uri.parse("sms:"));
sendIntent.putExtra("sms_body", getMessageBody()); 
```

或者打开手机的拨号器：

```
Intent intent = new Intent(Intent.ACTION_CALL);
        intent.setData(Uri.parse("tel:"+number));
        startActivity(intent); 
```

你需要弄清楚你想在你的应用程序中实现哪些操作，然后弄清楚如何实现它们中的每一个。

您可以在此处找到更多数据：

*   [安卓内容分享](http://developer.android.com/training/sharing/index.html)
*   [Android Intents](http://developer.android.com/reference/android/content/Intent.html) - 在各种 Intent 动作下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T06:24:13.970

尝试在意图中使用类别和操作。

```
Intent mailIntent = new Intent(Intent.ACTION_SEND);
mailIntent.setType("text/plain");
mailIntent.putExtra(Intent.EXTRA_SUBJECT, "Reporting mail");
mailIntent.putExtra(Intent.EXTRA_TEXT, "Some message");
mailIntent.putExtra(Intent.EXTRA_EMAIL, "xxx@yyy.com");
startActivity(mailIntent); 
```

这是发送电子邮件的示例。有关详细信息，请参阅[http://developer.android.com/guide/components/intents-common.html](http://developer.android.com/guide/components/intents-common.html)

# jquery - currentSlide 的 RevolverJS 控制台日志返回未定义

> ID：15790687
> 
> 赞同：1
> 
> 时间：2013-04-03T14:50:57.927
> 
> 标签：jquery

我目前在一个网站上工作，并选择使用 RevoloverJS 插件，因为它完全符合我当前的需求。

但是我试图让当前幻灯片编号输出到萤火虫控制台，而不是返回一个数字，它只是返回未定义。

下面是我到目前为止的代码。警报不会出现，控制台日志只是返回未定义。

# 滑块代码

```
$('#slider').revolver({
    transition: {
        onStart: function(){
            var current = $('#slider').data('goto');
            if (current == '0'){
                alert('slide 0');
            }else if(current == '1'){
                alert('slide 1');
            }else if(current == '2'){
                alert('slide 2');
            }else if(current == '3'){
                alert('slide 3');
            }
            console.log(slider.currentSlide);
        },
        onFinish: function(){

        }
    }
});

var revolver = $('#slider').data('revolver');
$('.goto').click(function(e){
    e.preventDefault();
    revolver.goTo($(this).data('goto'));
}); 
```

我在滑块中只有 4 个图像，并且正在使用 if 语句来更改页面上某些按钮的样式。目前我只是想在我更改 CSS 之前让警报正常工作。如果我犯了任何愚蠢的错误，我们将不胜感激道歉:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:40:54.647

立即修复问题！原来我使用的是滑块而不是左轮手枪。

感兴趣的人的工作代码。感谢[matpol](https://stackoverflow.com/users/115965/matpol)的帮助！

```
$('#slider').revolver({
    transition: {
        onStart: function(){
            var current = revolver.currentSlide;
            if (current == 0){
                alert('slide 0');
            }else if(current == 1){
                alert('slide 1');
            }else if(current == 2){
                alert('slide 2');
            }else if(current == 3){
                alert('slide 3');
            }
            console.log(revolver.currentSlide);
        },
        onFinish: function(){

        }
    }
});

var revolver = $('#slider').data('revolver');
$('.goto').click(function(e){
    e.preventDefault();
    revolver.goTo($(this).data('goto'));
}); 
```

# python - 找不到 Procfile，Heroku python 应用程序

> ID：15790691
> 
> 赞同：20
> 
> 时间：2013-04-03T14:51:12.833
> 
> 标签：python, heroku, procfile

进行 heroku python 演示并遇到 Procfile 问题。我将它放在正确的目录中（与 requirements.txt、venv/ 和 app.py 一起），并且该文件是没有 .txt 扩展名的“Procfile”（正如其他问题所暗示的那样）。

Procfile的内容是：

```
web: python app.py 
```

尽管如此，我在运行“工头启动”时不断收到“Procfile 不存在”错误。在我的智慧尽头，任何建议将不胜感激。

干杯，泰恩

编辑：尝试使用 echo 命令而不是编辑器创建“Procfile”-

```
echo "web: python app.py" > Procfile 
```

之后工作，谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-23T08:49:48.847

只需添加一个答案，以便可以关闭（或从未回答的问题部分移动）。

如评论中所述，尝试使用`echo`命令而不是编辑器来创建文件。我怀疑这是因为大多数编辑添加的换行符导致 heroku 遇到了困难。

示例解决方案（来自 qn）：

```
echo "web: python app.py" > Procfile 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-25T21:42:54.673

该问题很可能是扩展问题。例如，在 Windows 中，保存在记事本中的文件`.txt`默认具有扩展名。但是，当您将其回显到文件中时，文件会以正确的名称保存，在这种情况下：`Procfile`.

我写这篇文章是因为我认识的人有同样的问题，这可能会帮助其他有同样问题的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-18T06:36:40.663

在这上面花了很多时间之后..我认为分享很重要..

在您的目录的根目录中 => `touch Procfile` `git add git commit git push`

确保您在 github 上的 Procfile 是“Procfile”而不是“procfile”

`git push heroku master`

它必须是本地和 github 上的正确案例，以便 heroku 识别它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-12T13:33:56.533

从文件夹中删除 .git 文件，然后尝试使用以下命令再次将文件添加到 git -

混帐初始化

混帐添加。

git commit -m "Procfile 问题已解决"

heroku git:remote --app yourappname

git push heroku 大师

heroku 打开

希望这可以帮助....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-24T06:02:02.210

我有同样的问题，但在 laravel 中。如上所述，如果您不指定文件扩展名，某些文本编辑器（例如记事本）将默认添加 .txt 扩展名。

因此，您将拥有 Procfile.txt 文件而不是 Heroku 不会检测到的 Procfile 文件

为避免添加此扩展名，请使用 Sublime 文本编辑器[下载 sublime 免费](http://www.sublimetext.com/2)，它将在没有 .txt 扩展名的情况下保存它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-20T11:31:05.680

创建 procfile 的最简单方法（不使用 IDE 并遇到文件扩展名问题）是在终端中运行此代码。

```
touch procfile 
```

如果您查找“触摸”，它实际上意味着简单地更新现有文件的时间戳，但一个方便的副产品是它创建一个文件，如果首先没有一个文件。

# jquery - 将数据消息传递给 div

> ID：15790692
> 
> 赞同：0
> 
> 时间：2013-04-03T14:51:14.223
> 
> 标签：jquery

我正在尝试将数据消息传递给 div，这是当前设置：

html

```
<a data-message="my message" href="www.site.com">Click here</a>

<div class="new-window" style="display: none;">
    <p>(message should be here)</p>
</div> 
```

js

```
$('a[data-message]').click(function(){
    $('.new-window').fadeIn(300).text($('.new-window p').data('message'));
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:53:27.077

`$('.new-window p').data('message')`因为这将没有 data-* 属性。所以它不返回任何东西。

像这样改变

```
 $('a[data-message]').click(function(){
    var values=$(this).data('message');
    $('.new-window p').text(values);
    $('.new-window').fadeIn(300);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:53:57.253

调用淡入后替换为 .text($(this).attr('data-message')); 或 .text($(this).data('message'));

您想从锚的属性中提取值，而不是目标 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:57:50.140

这是您需要做的：

html

```
<a data-message="my message" href="www.site.com">Click here</a>

<div class="new-window" style="display: none;">
    <p>(message should be here)</p>
</div> 
```

js

```
$('a[data-message]').click(function(){
    $('.new-window').fadeIn(300).text($('a[data-message]').data('message'));
    return false;
}); 
```

进一步解释：您指的是 .new-window p 中的数据消息，它不存在的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:01:49.267

采用

```
$('a[data-message]').click(function(){

    var message = $(this).data('message');
    $('.new-window').fadeIn(300)
                    .find('p')
                    .text( message );

    return false;
}); 
```

演示在[http://jsfiddle.net/gaby/cMkKY/](http://jsfiddle.net/gaby/cMkKY/)

# asp.net-mvc - Web API、OData、$inlinecount 和测试

> ID：15790695
> 
> 赞同：4
> 
> 时间：2013-04-03T14:51:21.747
> 
> 标签：asp.net-mvc, asp.net-web-api, odata

我以前有一个看起来像这样的 Web API 控制器：

```
 public IQueryable<ApiDesignOverview> GetList(
        string brandIds = "", 
        string categoryIds = "", 
        string query = "",
        string categoryOp = "or") 
```

我听说 OData NuGet 包现在支持 $inlinecount OData 参数，所以我尝试使用[http://www.asp.net/web-api/overview/odata-support-in-aspnet-web中的说明添加它-api/supporting-odata-query-options](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options) - 我不想批发使用 OData，因为这需要对应用程序进行大量重新架构，所以我选择了这个`PageResult<T>`选项。

所以现在我的控制器看起来像这样：

```
 public PageResult<ApiDesignOverview> GetList(
        ODataQueryOptions<ApiDesignOverview> options,
        string brandIds = "", 
        string categoryIds = "", 
        string query = "",
        string categoryOp = "or") 
```

我现在的问题是：

*   如何模拟 ODataQueryOptions 进行单元测试？
*   如果他们不能被嘲笑，我该如何创造一个？我需要 a`ODataQueryContext`来构建一个，这需要 a `Microsoft.Data.Edm.IEdmModel`，这需要...什么？我找不到任何文档。

真的，如果我能像以前一样从控制器签名中删除 ODataQueryOptions 会更好。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-03T14:56:19.467

如果您不想（或在我的情况下不能）不想改变使用 ODataQueryOptions 和 PageResult，以下是如何为单元测试创​​建 ODataQueryOptions 实例：

```
//arrange
var request = new HttpRequestMessage(HttpMethod.Get, "http://localhost/MyProject/api/Customers?$filter=CustomerID eq 1");
var controller = new CustomersController
{
    Request = request
};

ODataModelBuilder modelBuilder = new ODataConventionModelBuilder(); 
modelBuilder.EntitySet<Customer>("Customers"); 
var opts = new ODataQueryOptions<Customer>(new ODataQueryContext(modelBuilder.GetEdmModel(),typeof(Customer)), request);

//act
var result = controller.Get(opts);

//assert
Assert.AreEqual(1, result.Items.First().CustomerID); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T16:10:06.660

如果您更喜欢返回 IQueryable 并且想要支持 $inlinecount，仍然可以通过修改 QueryableAttribute 来做到这一点。

```
public class InlineCountQueryableAttribute : QueryableAttribute
{
    private static MethodInfo _createPageResult =
        typeof(InlineCountQueryableAttribute)
        .GetMethods(BindingFlags.Static | BindingFlags.NonPublic)
        .Single(m => m.Name == "CreatePageResult");

    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        base.OnActionExecuted(actionExecutedContext);

        HttpRequestMessage request = actionExecutedContext.Request;
        HttpResponseMessage response = actionExecutedContext.Response;

        IQueryable result;
        if (response.IsSuccessStatusCode
            && response.TryGetContentValue<IQueryable>(out result))
        {
            long? inlineCount = request.GetInlineCount();
            if (inlineCount != null)
            {
                actionExecutedContext.Response = _createPageResult.MakeGenericMethod(result.ElementType).Invoke(
                    null, new object[] { request, request.GetInlineCount(), request.GetNextPageLink(), result }) as HttpResponseMessage;
            }
        }
    }

    internal static HttpResponseMessage CreatePageResult<T>(HttpRequestMessage request, long? count, Uri nextpageLink, IEnumerable<T> results)
    {
        return request.CreateResponse(HttpStatusCode.OK, new PageResult<T>(results, nextpageLink, count));
    }
} 
```

请注意，我正在使用反射来创建 PageResult。您可以改为返回您喜欢的对象，该对象可以由您使用的格式化程序进行格式化。如果您使用 Json 格式化程序，带有结果和计数的匿名对象也可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T00:38:49.123

最近`ODataController`有一个`AllowedQueryOptions`可以解决这个问题。

```
public class MyOdataController : ODataController

    {
        [Queryable(AllowedQueryOptions = AllowedQueryOptions.All)]
        public IQueryable<Product> Get()
        {
            return Products.AsQueryable();
        }
    } 
```

# c# - 在c#中获取总内存（ram）pc

> ID：15790706
> 
> 赞同：-4
> 
> 时间：2013-04-03T14:51:45.703
> 
> 标签：c#, ram

嗨，编辑此代码，但出现错误“无法使用 [] 将索引应用于第 8 行的“view_process.managmentobject”类型的表达式

什么是获取 30% 记忆的公式？

```
private static void DisplayTotalRam()
    {
        string Query = "SELECT MaxCapacity FROM Win32_PhysicalMemoryArray";
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(Query);
        int amount = 0;
        foreach (ManagementObject memo in searcher.Get())
        {
            amount += Convert.ToInt32(Convert.ToInt64(memo["Capacity"]) / 1024 / 1024 / 1024);

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:53:19.157

添加对 Microsoft.VisualBasic.dll 的引用。然后获得总物理内存就这么简单（是的，我测试过）：

```
static ulong GetTotalMemoryInBytes()
{
    return new Microsoft.VisualBasic.Devices.ComputerInfo().TotalPhysicalMemory;
} 
```

# python - 如何使用 statsmodels 执行 2 路重复测量方差分析？

> ID：15790708
> 
> 赞同：7
> 
> 时间：2013-04-03T14:51:45.857
> 
> 标签：python, statistics, statsmodels

我找到[了这个](http://statsmodels.sourceforge.net/devel/examples/generated/example_interactions.html)例子，它解释了如何执行 2-way ANOVA。我想知道如何为重复测量设计做同样的事情。

我确实看到[了这个问题](https://stackoverflow.com/questions/15210108/one-way-anova-with-repeated-measurements-not-within-subjects?rq=1)，但我不能假设我的重复测量是独立的。

我正在使用 statsmodels 版本`0.5.0.dev-Unknown`。

理想情况下，我想使用 statsmodels，但如果有使用另一个库的可行解决方案，我也会有兴趣了解它。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:50:02.147

对于重复测量设计 ANOVA，还没有内置任何内容，尽管我怀疑它不难支持。如果您可以提供或指向我的示例并提交[增强请求](https://github.com/statsmodels/statsmodels/issues)，我们将寻求支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T14:35:00.850

> 对于重复测量设计 ANOVA，还没有内置任何内容，尽管我怀疑它不难支持。如果您可以提供或指向我的示例并提交增强请求，我们将寻求支持。

给你...

[https://github.com/statsmodels/statsmodels/issues/1863](https://github.com/statsmodels/statsmodels/issues/1863)

# mysql - 如何使用 LEFT JOIN 优化此 sql 查询？

> ID：15790712
> 
> 赞同：0
> 
> 时间：2013-04-03T14:51:49.087
> 
> 标签：mysql, join, left-join

我对以下 SQL 查询有疑问。如您所见，我加入了一些表（candidate_basic，candidate_lang，province_of_candidate，province，degree_of_candidate），然后我将结果与另一个表“professional_experience_basic”加入，但是，查询返回几个实例（例如：它返回两个实例 id_candidate_basic= 55，或者它返回 id_candidate_basic=59 的三个实例）。

我的问题是我只希望查询为每个 id_candidate_basic 返回 1 个实例。也就是说，具有属性“main_job”的实例的值为 1，如果这不可能，则为空。

我试图将**AND professional_experience_basic.main_job=1**放在 WHERE 子句中，但是，它删除了带有**main_job=null**的实例。

我觉得我已经接近最终结果，但我在最后的努力中花了很多时间。有谁知道解决方案？提前致谢。

查询：

```
SELECT DISTINCT
    candidate_basic.id_candidate_basic,
    candidate_lang.town,
    province.name,
    degree_of_candidate.id_degree_of_candidate,professional_experience_basic.main_job

FROM (((((candidate_basic
    INNER JOIN candidate_lang 
    ON candidate_lang.id_candidate_basic=candidate_basic.id_candidate_basic)
    INNER JOIN province_of_candidate
    ON province_of_candidate.id_candidate_basic=candidate_basic.id_candidate_basic)
    INNER JOIN province
    ON province.id_province=province_of_candidate.id_province)
    INNER JOIN degree_of_candidate
    ON degree_of_candidate.id_candidate_basic=candidate_basic.id_candidate_basic)
    LEFT JOIN professional_experience_basic
    ON professional_experience_basic.candidate_id=candidate_basic.id_candidate_basic)

WHERE candidate_basic.candidate_state=2
  AND degree_of_candidate.is_main_degree
  AND candidate_lang.id_website_lang=1 
```

当前结果：

![在此处输入图像描述](https://i.stack.imgur.com/oLAyD.png)

我想要的结果：

![在此处输入图像描述](https://i.stack.imgur.com/HUoPK.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:56:51.790

在列列表中更改`professional_experience_basic.main_job`为，然后：`max(professional_experience_basic.main_job)`

```
GROUP BY candidate_basic.id_candidate_basic, candidate_lang.town,
          province.name, degree_of_candidate.id_degree_of_candidate 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T14:57:06.627

首先对您的结果进行分组

```
... AND candidate_lang.id_website_lang=1
GROUP BY 
    candidate_basic.id_candidate_basic,
    candidate_lang.town,
    province.name,
    degree_of_candidate.id_degree_of_candidate 
```

而且我认为您想要 main_job 的最大值，但我不知道。将选择更改为：

```
SELECT DISTINCT
    candidate_basic.id_candidate_basic,
    candidate_lang.town,
    province.name,
    degree_of_candidate.id_degree_of_candidate,MAX(professional_experience_basic.main_job) 
```

好像你想要这里的最大值，但我不知道

# python - 嵌套列表上的理解列表（列表列表）

> ID：15790720
> 
> 赞同：0
> 
> 时间：2013-04-03T14:52:07.837
> 
> 标签：python, python-2.7, list-comprehension, nested-lists

是否允许在“列表列表”上使用理解列表？我想从嵌套列表中提取一个列表。我确实试过这个：

```
def main():
    a = ['1','2','3']
    b = ['4','5','6']
    c = ['7','8','9']
    board = [a,b,c]
    y = [x for x in board[1][i] if i in range(0,3)]
    print y 
```

但我得到“NameError：名称'i'未定义”。我使用了错误的语法或嵌套列表不能这样使用？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:54:35.393

列表推导中的嵌套循环与嵌套常规 for 循环的工作方式相同，一个在另一个内部：

```
y = [x for i in range(3) for x in board[1][i]] 
```

但在这种情况下，仅选择`board[1][:]`会更容易并给您相同的结果；中间行的副本。

如果您需要对该行中的每一列应用表达式，则直接循环`board[1]`：

```
y = [foobar(c) for c in board[1]] 
```

# php - 需要帮助获取正确的 SQL 字符串/查询

> ID：15790722
> 
> 赞同：0
> 
> 时间：2013-04-03T14:52:11.870
> 
> 标签：php, mysql

这是一段代码，很可能清除了我想要实现的目标，但写得不好，尤其是最终的字符串/查询。基本上我根据这些字符串/查询创建链接。

```
$theanimeid = $row1['anime_id'];
$theanimetype = SELECT * FROM animelist WHERE id=".$theanimeid.";
$echothetype = if $theanimetype['type']=1 echo Movie else echo Episode; 
```

链接：

```
$link="Stream-".$title."-".$echothetype."-".$row1['episodes_id']."-".$row1['language']."-".$row1['id']; 
```

一些清理：$row1 正在从表 'videos' 中获取数据，但列 'type' 在 'categories' 内，因此首先我们需要匹配anime_id，一个与要定位的类别的列 id 具有相同值的列正确的数据（我认为）。

之后，我们需要在同一行中获取列 'type' 的值，即 0 或 1。

如果您需要更多信息，我会当场回复，因为我每分钟都会刷新此页面以查看是否有人回答，我真的需要帮助，非常感谢。

提前致谢， Inder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:07:06.847

你的意思是这样的：

```
$thetype = $theanimetype['type'] == 1 ? 'Movie' : 'Episode'; 
```

？？？

或者也许在 SQL 查询中这样做：

```
SELECT *, 
    CASE type
        WHEN 1 THEN 'Movie'
        WHEN 0 THEN 'Episode'
    END AS animeType
FROM myTable 
```

# php - Mod Rewrite 显示私有文件访问被拒绝

> ID：15790723
> 
> 赞同：1
> 
> 时间：2013-04-03T14:52:13.810
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, symlink

我有以下 mod 重写规则：

```
RewriteCond %{DOCUMENT_ROOT}/../application/%{REQUEST_URI} -f
RewriteRule ([\w]+\/www\/(.*)) %{DOCUMENT_ROOT}/../../application/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ ./index.php/$1 
```

我的服务器目录布局是这样的：

```
/application
--/example
----/www
------/test.jpg
/www <- public root
--/.htaccess
--/index.php 
```

基本上，这个想法是，您可以像这样访问 index.php：

```
example.com/test/paths/ < would pass test/paths/ to index.php

example.com/example/www/test.png < would pass example/www/test.png to index.php

example.com/example/www/test.jpg < would output the contents of test.jpg 
```

现在前两个示例完美运行。当我们到达最后一个输出 test.jpg 内容（位于非公共目录中）的示例时，我收到此错误：

**您无权访问此服务器上的 /C:/web/git/framework/application/example/www/test.jpg。**

我可以将它传递给另一个公共 php 文件，然后该文件将只执行私有文件的 file_get_contents 并以这种方式显示它，但理想情况下我不想产生额外的 php 进程。无论如何我可以在没有访问被拒绝部分的情况下做我想做的事吗？

**编辑**

我通过不同的方法解决了这个问题。我将整个应用程序目录移动到 www 目录中，现在我使用此 HT ACCESS 文件仅加载 \w/www/* 目录中的文件

```
RewriteCond %{REQUEST_URI} ^/[\w]+/www/(.*)$
RewriteCond %{DOCUMENT_ROOT}/applications/%{REQUEST_URI} -f
RewriteRule ([\w]+\/www\/(.*)) /applications/$1 [L]

RewriteCond %{REQUEST_URI} !^/index.php/.*
RewriteRule ^(.*)$ ./index.php/$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:36:54.873

我通过不同的方法解决了这个问题。我将整个应用程序目录移动到 www 目录中，现在我使用此 HT ACCESS 文件仅加载 \w/www/* 目录中的文件

```
RewriteCond %{REQUEST_URI} ^/[\w]+/www/(.*)$
RewriteCond %{DOCUMENT_ROOT}/applications/%{REQUEST_URI} -f
RewriteRule ([\w]+\/www\/(.*)) /applications/$1 [L]

RewriteCond %{REQUEST_URI} !^/index.php/.*
RewriteRule ^(.*)$ ./index.php/$1 
```

# javascript - 匹配 CSS RGB 颜色值

> ID：15790729
> 
> 赞同：1
> 
> 时间：2013-04-03T14:52:25.507
> 
> 标签：javascript, css, regex, colors, replace

我对一段 JS 代码有疑问。它应该从给定的样式声明中找到所有出现的 CSS 颜色值 ( `colorNames`, `#FFFFFF`, `#FFF`, `RGB`, `transparent`) 并将它们替换为一个`span`元素，然后是匹配本身。

好吧，一切似乎都很好，除了已经浪费了我一整天的 RGB() 。

一个小的演示文稿和代码可以在[jsFiddle](http://jsfiddle.net/YEEnE/8/)上找到。在这里，我们预览了我有问题的元素。

![](https://i.stack.imgur.com/OgEQf.jpg)

感谢您的时间和兴趣！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:15:08.307

以下应处理任何有效`rgb`或`rgba`值

```
var regex = new RegExp(
    "rgb\\((?:(?:\\s*\\d+\\s*,){2}\\s*\\d+|" +
    "(?:\\s*\\d+(?:\\.\\d+)?%\\s*,){2}\\s*\\d+(?:\\.\\d+)?%)\\s*\\)|" +
    "rgba\\((?:(?:\\s*\\d+\\s*,){3}|" +
    "(?:\\s*\\d+(?:\\.\\d+)?%\\s*,){3})\\s*\\d+(?:\\.\\d+)?\\s*\\)", "gi"
); 
```

见[小提琴](http://jsfiddle.net/YEEnE/12/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:17:38.570

rgb 函数不支持 alpha 参数（rgba 支持）。此外，与这些函数匹配的正则表达式也不起作用。我不得不承认，调试所有这些正则表达式以匹配一件事太痛苦了，所以我们将尝试只做一个。尝试（不对值进行任何检查）：

```
/(rgb\((?:\s*\d{1,3}\s*%?\s*,?\s*){3}\))/gi 
```

[结果](http://jsfiddle.net/Vry2H/)。

**编辑：**
如果你想检查你的值，我们会让这个正则表达式复杂一点。

# android - 您可以在本地广播中使用未决意图吗？

> ID：15790734
> 
> 赞同：21
> 
> 时间：2013-04-03T14:52:40.287
> 
> 标签：android, android-broadcast, android-pendingintent

我有兴趣在本地广播中使用未决意图。为了清楚起见，我使用以下内容注册接收器和发送广播：`android.support.v4.content.LocalBroadcastManager`.

我在一个有效的服务中有一个本地广播接收器。我正在尝试从包含可点击项目的自定义通知布局发送本地广播。

本地广播接收器 - 只接收简单的动作意图。我正在尝试这样的事情无济于事：

```
Intent backintent = new Intent("GOTO_START_BROADCAST");
PendingIntent backIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, backintent, 0);
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom_notification);
contentView.setOnClickPendingIntent(R.id.imageView1, backIntent); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-03T15:34:50.287

> 我有兴趣在本地广播中使用未决意图。

这是不可能的。

a 背后的要点`PendingIntent`是允许*其他一些进程*执行您请求的操作，例如发送广播。

背后的要点是*在您的流程*`LocalBroadcastManager`中保持广播。

 *因此， a`PendingIntent`可以发出常规广播，但不能通过`LocalBroadcastManager`.*

# sql-server - 哪个系统表包含系统错误的描述？

> ID：15790742
> 
> 赞同：3
> 
> 时间：2013-04-03T14:53:00.457
> 
> 标签：sql-server

寻找包含 errormsgs < 50000 描述的系统表

没有运气通过 type_desc 'system_table' 浏览 sys.objects 的内容

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:24:00.243

答案实际上取决于您没有提及的 SQL Server 版本：

```
-- SQL 2000
select * from sysmessages where error < 50000
-- SQL 2005+
select * from sys.messages where message_id < 50000 
```

有关更多详细信息，请参阅文档：[`sysmessages`](http://msdn.microsoft.com/en-us/library/aa260433%28v=sql.80%29.aspx)和[`sys.messages`](http://msdn.microsoft.com/en-us/library/ms187382.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:02:01.640

```
select  *
from    master.dbo.sysmessages 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:37:35.830

看来这里是一堵砖墙。内部函数 OpenRowset(TABLE SYSERRORS) 易于用于读取系统表（使用 DAC），但对于更新，它需要在 Microsoft 之外完全未记录的参数。

# r - Data.table 元编程

> ID：15790743
> 
> 赞同：23
> 
> 时间：2013-04-03T14:53:00.810
> 
> 标签：r, data.table

我认为元编程在这里是正确的术语。

我希望能够像在 webapp 中使用 MySQL 一样使用 data.table。也就是说，Web 用户使用一些 Web 前端（例如 Shiny 服务器）来选择数据库、选择要过滤的列、选择要分组的列、选择要聚合的列和聚合功能。我想使用 R 和 data.table 作为查询、聚合等的后端。假设前端存在并且 R 将这些变量作为字符串并且它们已经过验证等。

我编写了以下函数来构建 data.table 表达式并使用 R 的 parse/eval 元编程功能来运行它。这是一个合理的方法吗？

我包含了所有相关的代码来测试它。获取此代码（在阅读它以确保安全之后！）并运行 test_agg_meta() 来测试它。这只是一个开始。我可以添加更多功能。

但我的主要问题是我是否严重过度思考这一点。当所有输入都事先未确定而不诉诸解析/评估元编程时，是否有更直接的方法来使用 data.table ？

我也知道“with”语句和其他一些无糖功能方法，但不知道它们是否可以处理所有情况。

```
require(data.table)

fake_data<-function(num=12){
  #make some fake data
  x=1:num
  lets=letters[1:num]
  data=data.table(
    u=rep(c("A","B","C"),floor(num/3)),
    v=x %%2, w=lets, x=x, y=x^2, z=1-x)
  return(data)
}

data_table_meta<-function(
  #aggregate a data.table meta-programmatically
  data_in=fake_data(),
  filter_cols=NULL,
  filter_min=NULL,
  filter_max=NULL,
  groupby_cols=NULL,
  agg_cols=setdiff(names(data_in),groupby_cols),
  agg_funcs=NULL,
  verbose=F,
  validate=T,
  jsep="_"
){

  all_cols=names(data_in)

  if (validate) {
    stopifnot(length(filter_cols) == length(filter_min))
    stopifnot(length(filter_cols) == length(filter_max))
    stopifnot(filter_cols %in% all_cols)
    stopifnot(groupby_cols %in% all_cols)
    stopifnot(length(intersect(agg_cols,groupby_cols)) == 0)
    stopifnot((length(agg_cols) == length(agg_funcs))  | (length(agg_funcs)==1) | (length(agg_funcs)==0))
  }

  #build the command

  #defaults
  i_filter=""
  j_select=""
  n_agg_funcs=length(agg_funcs)
  n_agg_cols=length(agg_cols)
  n_groupby_cols=length(groupby_cols)
  if (n_agg_funcs == 0) {
    #NULL
    print("NULL")
    j_select=paste(agg_cols,collapse=",")
    j_select=paste("list(",j_select,")")
  } else {
    agg_names=paste(agg_funcs,agg_cols,sep=jsep)
    jsels=paste(agg_names,"=",agg_funcs,"(",agg_cols,")",sep="")
    if (n_groupby_cols>0) jsels=c(jsels,"N_Rows_Aggregated=.N")
    j_select=paste(jsels,collapse=",")
    j_select=paste("list(",j_select,")")
  }

  groupby=""

  if (n_groupby_cols>0) {
    groupby=paste(groupby_cols,collapse=",")
    groupby=paste("by=list(",groupby,")",sep="")
  }

  n_filter_cols=length(filter_cols)
  if (n_filter_cols > 0) {
    i_filters=rep("",n_filter_cols)
    for (i in 1:n_filter_cols) {
      i_filters[i]=paste(" (",filter_cols[i]," >= ",filter_min[i]," & ",filter_cols[i]," <= ",filter_max[i],") ",sep="")
    }
    i_filter=paste(i_filters,collapse="&")
  }

  command=paste("data_in[",i_filter,",",j_select,",",groupby,"]",sep="")

  if (verbose == 2) {
    print("all_cols:")
    print(all_cols)
    print("filter_cols:")
    print(filter_cols)
    print("agg_cols:")
    print(agg_cols)
    print("filter_min:")
    print(filter_min)
    print("filter_max:")
    print(filter_max)
    print("groupby_cols:")
    print(groupby_cols)
    print("agg_cols:")
    print(agg_cols)
    print("agg_funcs:")
    print(agg_funcs)
    print("i_filter")
    print(i_filter)
    print("j_select")
    print(j_select)
    print("groupby")
    print(groupby)
    print("command")
    print(command)
  }
  print(paste("evaluating command:",command))
  eval(parse(text=command))
}

my_agg<-function(data=fake_data()){
  data_out=data[
    i=x<=5,
    j=list(
      mean_x=mean(x),
      mean_y=mean(y),
      sum_z=sum(z),
      N_Rows_Aggregated=.N
    ),
    by=list(u,v)]
  return(data_out)
}

my_agg_meta<-function(data=fake_data()){
  #should give same results as my_agg
  data_out=data_table_meta(data,
      filter_cols=c("x"),
      filter_min=c(-10000),
      filter_max=c(5),
      groupby_cols=c("u","v"),
      agg_cols=c("x","y","z"),
      agg_funcs=c("mean","mean","sum"),
      verbose=T,
      validate=T,
      jsep="_")
  return(data_out)
}

test_agg_meta<-function(){
  stopifnot(all(my_agg()==my_agg_meta()))
  print("Congrats, you passed the test")
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-03T15:35:11.583

虽然您的函数看起来确实很有趣，但我相信您是在问是否还有其他方法可以实现它。
就个人而言，我喜欢使用这样的东西：

```
## SAMPLE DATA
DT1 <- data.table(id=sample(LETTERS[1:4], 20, TRUE), Col1=1:20, Col2=rnorm(20))
DT2 <- data.table(id=sample(LETTERS[3:8], 20, TRUE), Col1=sample(100:500, 20), Col2=rnorm(20))
DT3 <- data.table(id=sample(LETTERS[19:20], 20, TRUE), Col1=sample(100:500, 20), Col2=rnorm(20)) 
```

## 通过引用表名访问表：

这很简单，就像在`R`

```
# use strings to select the table
tablesSelected <- "DT3"

# use get to access them 
get(tablesSelected)

# and we can perform operations:
get(tablesSelected)[, list(C1mean=mean(Col1), C2mean=mean(Col2))] 
```

## 通过引用选择列

要通过引用名称来选择列，请使用`.SDcols`参数。给定一个列名向量：

```
columnsSelected <- c("Col1", "Col2") 
```

将该向量分配给 .SDcols 参数：

```
## Here we are simply accessing those columns
DT3[, .SD, .SDcols = columnsSelected] 
```

我们还可以对字符串向量中命名的每一列应用一个函数：

```
## apply a function to each column
DT3[, lapply(.SD, mean), .SDcols = columnsSelected] 
```

请注意，如果我们的目标只是输出我们可以关闭的列`with`：

```
# This works for displaying
DT3[, columnsSelected, with=FALSE] 
```

注意：更“现代”的做法是使用`..`快捷方式`columnsSelected`从“上一级”访问：

```
DT3[ , ..columnsSelected] 
```

但是，如果使用`with=FALSE`，我们就不能以通常的方式直接对列进行操作

```
## This does NOT work: 
DT3[, someFunc(columnsSelected), with=FALSE]

## This DOES work: 
DT3[, someFunc(.SD), .SDcols=columnsSelected]

## This also works, but is less ideal, ie assigning to new columns is more cumbersome
DT3[, columnsSelected, with=FALSE][, someFunc(.SD)] 
```

我们也可以使用`get`，但它有点棘手。 *我把它留在这里供参考，但这`.SDcols`是要走的路*

```
## we need to use `get`, but inside `j`
##   AND IN A WRAPPER FUNCTION     <~~~~~ THIS IS VITAL

DT3[, lapply(columnsSelected, function(.col) get(.col))]

## We can execute functions on the columns:
DT3[, lapply(columnsSelected, function(.col) mean( get(.col) ))]

## And of course, we can use more involved-functions, much like any *ply call:
# using .SDcols 
DT3[, lapply(.SD, function(.col) c(mean(.col) + 2*sd(.col), mean(.col) - 2*sd(.col))), .SDcols = columnsSelected]

# using `get` and assigning the value to a var.  
#   Note that this method has memory drawbacks, so using .SDcols is preferred
DT3[, lapply(columnsSelected, function(.col) {TheCol <- get(.col); c(mean(TheCol) + 2*sd(TheCol), mean(TheCol) - 2*sd(TheCol))})] 
```

作为参考，如果您尝试以下操作，您会注意到它们不会产生我们所追求的结果。

```
 ## this DOES NOT work (need ..columnsSelected)
    DT3[, columnsSelected]

    ## netiher does this
    DT3[, eval(columnsSelected)]

    ## still does not work: 
    DT3[, lapply(columnsSelected, get)] 
```

如果要更改列的名称：

```
# Using the `.SDcols` method:  change names using `setnames`  (lowercase "n")
DT3[, setnames(.SD, c("new.Name1", "new.Name2")), .SDcols =columnsSelected]

# Using the `get` method:  
##  The names of the new columns will be the names of the `columnsSelected` vector
##  Thus, if we want to preserve the names, use the following: 
names(columnsSelected) <- columnsSelected    
DT3[, lapply(columnsSelected, function(.col) get(.col))]

## we can also use this trick to give the columns new names
names(columnsSelected) <- c("new.Name1", "new.Name2")
DT3[, lapply(columnsSelected, function(.col) get(.col))] 
```

*显然，使用 .SDcols 更简单、更优雅。*

### 怎么样`by`？

```
# `by` is straight forward, you can use a vector of strings in the `by` argument. 

# lets add another column to show how to use two columns in `by`
DT3[, secondID := sample(letters[1:2], 20, TRUE)]

# here is our string vector: 
byCols <- c("id", "secondID")

# and here is our call
DT3[, lapply(columnsSelected, function(.col) mean(get(.col))), by=byCols] 
```

* * *

## 把它们放在一起

我们可以通过引用它的名称来访问 data.table，然后也可以通过名称选择它的列：

```
get(tablesSelected)[, .SD, .SDcols=columnsSelected]

## OR WITH MULTIPLE TABLES
tablesSelected <- c("DT1", "DT3")
lapply(tablesSelected, function(.T) get(.T)[, .SD, .SDcols=columnsSelected])

# we may want to name the vector for neatness, since
#  the resulting list inherits the names. 
names(tablesSelected) <- tablesSelected 
```

### 这是最好的部分：

由于这么多`data.table`是通过引用传递的，因此很容易拥有一个表列表、一个要添加的单独列列表以及另一个要操作的列列表，并将所有这些放在一起以添加执行类似的操作——但是有不同的输入——在​​你所有的桌子上。与做类似的事情相反，`data.frame`不需要重新分配最终结果。

```
newColumnsToAdd <- c("UpperBound", "LowerBound") 
FunctionToExecute <- function(vec) c(mean(vec) - 2*sd(vec), mean(vec) + 2*sd(vec))

# note the list of column names per table! 
columnsUsingPerTable <- list("DT1" = "Col1", DT2 = "Col2", DT3 = "Col1")
tablesSelected <- names(columnsUsingPerTable)
byCols <- c("id")

# TADA: 
dummyVar <- # I use `dummyVar` because I do not want to display the  output
lapply(tablesSelected, function(.T) 
  get(.T)[, c(newColumnsToAdd) := lapply(.SD, FunctionToExecute), .SDcols=columnsUsingPerTable[[.T]], by=byCols ]  )

# Take a look at the tables now: 
DT1
DT2
DT3 
```

# syntax - 从历史上看，为什么反斜杠 (\) 是转义字符？

> ID：15790745
> 
> 赞同：3
> 
> 时间：2013-04-03T14:53:03.503
> 
> 标签：syntax, escaping, history

不同的键盘键背后有一些有趣的故事（例如 shift 和 backspace 来自打字机）。我现在想知道在当今语言中如此有影响力的各种非常古老的句法决策的历史是什么。字符串的转义字符 () 特别普遍，但它的起源是什么？可能起源选择了 \，因为它是一个不常见但易于键入的字符而无需移位，但如果我想知道还有另一个更有趣的原因怎么办。任何编程历史研究人员都知道（起源和/或设计考虑）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:01:09.377

根据此来源[That Powerful ESCAPE Character](https://web.archive.org/web/20180402193613/http://www.bobbemer.com/ESCAPE.HTM)，没有特殊原因：

```
...but the backslash fascinated with its brevity, preceding Microsoft's using it for their file hierarchy indicator. 
```

# nhibernate - NHibernate 使用过滤器选择最大值

> ID：15790749
> 
> 赞同：3
> 
> 时间：2013-04-03T14:53:14.457
> 
> 标签：nhibernate, filter, max

我正在尝试从表中获取最大值，执行如下操作：

```
 SELECT max(re.Sequence) FROM MyTable re WHERE re.ItemId = :itemId 
```

所以我可以为每个 itemId 获得列序列的最大值。

尝试使用 createQuery 但没有奏效：

```
 string hql = @"SELECT new Int32(max(re.Sequence) FROM MyTable re WHERE re.Item.Id = :itemId";
        List<Int32> lista =  session
            .CreateQuery(hql)
            .SetParameter("itemId", idItem)
            .List<Int32>()
            .ToList(); 
```

任何帮助将不胜感激。

最好的祝福。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T16:58:15.830

使用条件语法：

```
var criteria = session.CreateCriteria<MyTable>();
criteria.Add(Restrictions.Eq("ItemId", itemId));
criteria.SetProjection(Projections.Max("Sequence"));
var max = criteria.UniqueResult<int>(); 
```

使用查询语法：

```
var max = session.QueryOver<MyTable>().Where(x => x.ItemId.Equals(itemId)).Select(
                Projections.Max<MyTable>(x => x.Sequence)).SingleOrDefault<int>(); 
```

# google-drive-api - Google Drive SDK：Drive QuickStart App 示例不适用于 Android

> ID：15790750
> 
> 赞同：3
> 
> 时间：2013-04-03T14:53:16.733
> 
> 标签：google-drive-api

Drive QuickStart App 示例不适用于 Android ( [https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android) )。

我有一个在 Android 4.1.2 上运行的 Note 2。我按照教程中的所有步骤（使用 eclipse + ADT + google 控制台）并在上面花费了 30 多个小时。

以下行中有一个“ClassNotFoundException”： File file = service.files().insert(body, mediaContent).execute();

我发现异常发生在 Drive.Files.Insert.execute() 部分。

有没有人能让这个相机应用程序工作？我看了这个应用程序的视频教程，甚至开发人员都说这个应用程序只是“可能会工作”......

互联网上是否有确认可用的 Drive SDK 应用程序？我想做的就是从谷歌驱动器下载一个简单的谷歌电子表格。

我尝试过的其他事情： - 谷歌提供的 DrEdit 示例应用程序也没有与谷歌驱动器正确同步。- 我在 Google Document List API 网站上也找不到工作示例应用程序。

我相信从Android访问Google Drive应该是一个简单的任务，附带一个例子......否则，人们还不如使用DropBox。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T13:40:24.067

当我在寻找如何从 Drive 打开单个电子表格时，我使用了同一个 QuickStart 应用程序，我使用的是 Eclipse Juno，Windows 7，64 位。我看了两个视频，第二个是[与 Android Drive App 集成](https://developers.google.com/drive/integrate-android-ui)

我使用了这两个步骤，尤其是在我的清单 xml 中。我不得不去看视频两次，以确保我完成了所有步骤。我必须将用户功能添加到我的清单中。

```
 <uses-feature android:name="android.hardware.camera" /> 
```

我还发现了其他几件事。我根本无法在模拟器上运行它。在调试模式下在手机上运行它最初也不起作用，它可以访问手机的 SD 卡（显然）。我将APK复制到手机上并安装了它，请确保您的安全设置已放松。当没有通过 ADB 连接时，它可以在我的手机（Jellybean Droid Razr）上运行。

这是我的大部分清单。请注意，您必须将 API 控制台中的“YOURCLIENTID”替换为您的。我只使用了第一组数字，'-'之后什么都没有，即123456789-blah，blah。只是 123456789。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.birdsall.tda"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-feature android:name="android.hardware.camera" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:uiOptions="splitActionBarWhenNarrow"
     android:exported="true" >

    <meta-data android:name="com.google.android.apps.drive.APP_ID" android:value="id=YOURCLIENTID" />

    <intent-filter>
    <action android:name="com.google.android.apps.drive.DRIVE_OPEN" />
    <data android:mimeType="application/vnd.google-apps.drive-sdk.YOURCLIENTID" />
    <data android:mimeType="image/png" />
    <data android:mimeType="image/jpeg" />
    <data android:mimeType="image/jpg" />
    </intent-filter>

    <meta-data
        android:name="android.app.default_searchable"
        android:value=".ActivitySearch" />

    <activity
        android:name="com.birdsall.tda.ActivityMain"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".ActivityTakePhoto" >
    </activity>

    <provider
        android:name="com.birdsall.tda.TDAProvider"
        android:authorities="com.birdsall.tda.contentprovidertda"
        android:exported="true"
        android:readPermission="true"
        android:writePermission="true" />

    <activity
        android:name=".ActivitySearch"
        android:label="Rule Search"
        android:launchMode="singleTop" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
</application>

</manifest> 
```

我想我只更改了活动的类名，否则我不必更改任何 java 代码。这是我的活动：

```
package com.birdsall.tda;

import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

import android.accounts.AccountManager;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.widget.Toast;

import com.google.api.client.extensions.android.http.AndroidHttp;
import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;
import com.google.api.client.googleapis.extensions.android.gms.auth.UserRecoverableAuthIOException;
import com.google.api.client.http.FileContent;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;

public class ActivityTakePhoto extends Activity {
static final int REQUEST_ACCOUNT_PICKER = 1;
static final int REQUEST_AUTHORIZATION = 2;
static final int CAPTURE_IMAGE = 3;

private static Uri fileUri;
private static Drive service;
private GoogleAccountCredential credential;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
}

@Override
protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
switch (requestCode) {
case REQUEST_ACCOUNT_PICKER:
  if (resultCode == RESULT_OK && data != null && data.getExtras() != null) {
    String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
    if (accountName != null) {
      credential.setSelectedAccountName(accountName);
      service = getDriveService(credential);
      startCameraIntent();
    }
  }
  break;
case REQUEST_AUTHORIZATION:
  if (resultCode == Activity.RESULT_OK) {
    saveFileToDrive();
  } else {
    startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
  }
  break;
case CAPTURE_IMAGE:
  if (resultCode == Activity.RESULT_OK) {
    saveFileToDrive();
  }
}
}

private void startCameraIntent() {
String mediaStorageDir = Environment.getExternalStoragePublicDirectory(
    Environment.DIRECTORY_PICTURES).getPath();
String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.US).format(new Date());
fileUri = Uri.fromFile(new java.io.File(mediaStorageDir + java.io.File.separator + "BCM_IMG_"
    + timeStamp + ".jpg"));

Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
startActivityForResult(cameraIntent, CAPTURE_IMAGE);
  }

 private void saveFileToDrive() {
Thread t = new Thread(new Runnable() {
  @Override
  public void run() {
    try {
      // File's binary content
      java.io.File fileContent = new java.io.File(fileUri.getPath());
      FileContent mediaContent = new FileContent("image/jpeg", fileContent);

      // File's metadata.
      File body = new File();
      body.setTitle(fileContent.getName());
      body.setMimeType("image/jpeg");

      File file = service.files().insert(body, mediaContent).execute();
      if (file != null) {
        showToast("Photo uploaded: " + file.getTitle());
        startCameraIntent();
      }
    } catch (UserRecoverableAuthIOException e) {
      startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
 });
 t.start();
 }

 private Drive getDriveService(GoogleAccountCredential credential) {
 return new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential)
    .build();
}

public void showToast(final String toast) {
runOnUiThread(new Runnable() {
  @Override
  public void run() {
    Toast.makeText(getApplicationContext(), toast, Toast.LENGTH_LONG).show();
  }
});
  }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:00:05.967

不确定这是否会对您有很大帮助，但是是的，我让 QuickStart 应用程序与 Eclipse/Kepler 一起工作。我在使用 Eclipse/Juno 时遇到了很多问题，并且还阅读了有关 Juno 和 ADT 如何不完全正确啮合的帖子。

我目前正在使用他们的部分代码将文本文件从手机上传到云端硬盘。我有一个运行 4.2.2 的 Nexus 4。我注意到 Quickstart 应用程序的最低 API 级别是 4.2，所以这可能就是问题所在。您是否在 4.2 模拟器而不是 Note 上尝试过？

是的，这是一项简单的任务，但必须*正确*设置。Drive 有自己的文件处理方式（即不会覆盖同名文件，只会创建另一个文件）。

# javascript - 向 JavaScript 对象添加函数

> ID：15790754
> 
> 赞同：0
> 
> 时间：2013-04-03T14:53:23.923
> 
> 标签：javascript

在我的 JavaScript 中，我有一个名为“View”的对象实例。我想为这个对象添加一个函数。该功能看起来像

```
function csiSelectValueRestriction (columnName) {
    //... <a rather long and involved function>
} 
```

最终我希望能够通过以下方式使用该功能：

```
var result = View.csiSelectValueRestriction ("bldgs"); 
```

完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:54:48.257

如果您想向现有实例添加函数，这应该可以工作

```
View['csiSelectValueRestriction'] = function (columnName) { ... ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:58:25.830

只需将功能分配给属性；

```
View.csiSelectValueRestriction = csiSelectValueRestriction; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:54:40.683

```
var View = {
   someProperty: 'someVal',
   csiSelectValueRestriction: function(columnName) {
        //JS logic
   }
}; 
```

或者`View.csiSelectValueRestriction = function(columnName) { ... }`

# scala - 在scala中序列化优先级队列

> ID：15790757
> 
> 赞同：1
> 
> 时间：2013-04-03T14:53:27.980
> 
> 标签：scala, serialization, priority-queue

我正在尝试`PriorityQueue`在 scala (2.10) 中序列化一个可变对象，并且`NotSerializableException`在将对象写入 ObjectOutputStream 时得到一个。我做了一个简单的测试用例：

```
import java.io.{ByteArrayOutputStream, ObjectOutputStream}
import scala.collection.mutable

object Test extends App {
  val pq = new mutable.PriorityQueue[Int]()
  val oos = new ObjectOutputStream(new ByteArrayOutputStream())
  oos.writeObject(pq)
} 
```

例外是

```
Exception in thread "main" java.io.NotSerializableException:scala.collection.mutable.PriorityQueue$ResizableArrayAccess
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
at Test$.main(Test.scala:7) 
```

似乎 PriorityQueue 应该是可序列化的，我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:05:38.260

这应该报告为一个错误 - 修复是简单地使嵌套`ResizableArrayAccess`类继承`Serializable`。

从技术上讲，也许您可​​以使用反射来删除优先级队列类中字段上的`private`and`final`修饰符，然后将其设置为序列化之前。`resarr``null`

否则，在序列化之前将优先级队列转换为数组，反序列化时反之亦然，将避免此异常。您可以使用自己的包装器`PriorityQueue`来实现自定义序列化/反序列化。

**注意**：此问题已在 Scala 2.11.0-M7 ( [SI-7568](https://issues.scala-lang.org/browse/SI-7568) )中解决

# xcode - Xcode在界面生成器中修改XIB文件时不断崩溃

> ID：15790758
> 
> 赞同：1
> 
> 时间：2013-04-03T14:53:29.023
> 
> 标签：xcode, interface-builder

我正在尝试修改我的 IOS 项目中的一个 xib 文件，尝试拖动 UILabel 或任何其他元素时 xcode 立即崩溃..任何线索将不胜感激..

以下是崩溃报告..

```
Process:         Xcode [22769]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.3.2 (1177)
Build Info:      IDEApplication-1177000000000000~6
App Item ID:     497799835
App External ID: 7171108
Code Type:       X86-64 (Native)
Parent Process:  launchd [22632]

Date/Time:       2013-04-03 20:12:57.262 +0530
OS Version:      Mac OS X 10.7.5 (11G56)
Report Version:  9

Interval Since Last Report:          1804 sec
Crashes Since Last Report:           2
Per-App Interval Since Last Report:  244 sec
Per-App Crashes Since Last Report:   2

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4E2002
ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilder/IDEInterfaceBuilder-    2182/Framework/Document/IBDocument.m:6465
Details:  Cannot turn on autolayout for a document that doesn't support it:  <IBCocoaTouchDocument: 0x40230c320>
Object:   <IBCocoaTouchDocument: 0x40230c320>
Method:   -setUseAutolayout:
Thread:   <NSThread: 0x40010a1e0>{name = (null), num = 1}
Hints:   None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:02:42.647

问题是自动布局，检查您的部署目标需要为 6 或更高。

# android - 默认情况下，Android 摄像头中的正面

> ID：15790759
> 
> 赞同：1
> 
> 时间：2013-04-03T14:53:33.830
> 
> 标签：android, android-camera

我正在使用这段代码：

```
 Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                File photo = new File("/sdcard/picture.png");
                intent.putExtra(MediaStore.EXTRA_OUTPUT,
                Uri.fromFile(photo));
                Uri imageUri = Uri.fromFile(photo);
                startActivity(intent); 
```

我想将此意图与预定义设置一起使用，例如每次启动相机时默认为正面。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:57:24.480

这是前置摄像头意图，在您的代码中使用它！这是一个很好的教程：[http ://www.vogella.com/articles/AndroidCamera/article.html](http://www.vogella.com/articles/AndroidCamera/article.html)

```
int CAMERA_FACING_FRONT 
```

在这里阅读更多：http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

# php - PHP：来自两个查询的 SQL - 忽略重复项

> ID：15790761
> 
> 赞同：1
> 
> 时间：2013-04-03T14:53:36.177
> 
> 标签：php, sql, duplicates

所以我有这段代码。它从“rom”表中检索房间列表，然后应该对照“booket”中的相同房间进行检查。我怎样才能在设定的时间内打印出不在 booket 中的房间。

“Rom”-数据库如下所示：

```
romnavn   | romtype (not relevant here)

ex: 81-77 | 2 
```

“小册子”看起来像：

```
romnavn   | bruker      | dato       | fra | til

ex: 81-77 | foo@bar.net | 03.04.2013 | 16  | 18 
```

（这意味着房间将在 16:00:00 至 18:00:00 之间预订）

如果房间出现在两个查询中，则应该忽略它。

我的猜测是两个while循环，“ `$notFreeA`”在第一个里面，但我没有得到我想要的结果。

我相当确定数据库和查询都是，嗯..，不好，但任何帮助将不胜感激:)

```
require "sql/sqlConnect.php";
require "functions/functions.php";
date_default_timezone_set('Europe/Oslo');
$time = date('H:i:s');
$date = date('d.m.Y');
$nearestHour = roundToNearestHour($time);

$allRooms = "SELECT * FROM rom";
$notFree = "SELECT * FROM booket WHERE dato='$date' AND fra<='$nearestHour';";

$allRoomA = mysql_query($allRooms);
$notFreeA = mysql_query($notFree); 
```

向上/向下舍入到最近房间的函数如下所示：

```
function roundToNearestHour($time) {
$part = explode(":", $time);

if(count($part) != 3)
  return 0;

if($part[2] > 30)
  $parts[1]++;

if($part[1] > 30)
  $part[0]++;

return $part[0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:58:12.847

Try doing this with one query:

```
select *
from room r
where r.romnavn not in (select roomnavn booket WHERE dato='$date' AND fra<='$nearestHour') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:59:23.043

You only need one query to do this. Any one of these three will produce the results you desire:

```
SELECT * FROM rom WHERE NOT EXISTS 
  (SELECT * FROM booket WHERE dato='$date' AND fra<='$nearestHour'
   AND rom.romnavn = booklet.romnavn)

SELECT rom.* FROM rom LEFT OUTER JOIN booket USING romnavn
   WHERE dato='$date' AND fra<='$nearestHour' AND booket.romnavn IS NULL

SELECT * FROM rom WHERE romnavn NOT IN
   (SELECT romnavn FROM booket WHERE dato='$date' AND fra<='$nearestHour') 
```

That said, this table design is very poor. You don't appear to be using native datetime types, and your primary keys are poorly named and should be something easier to index (like integer ids).

If there's only one change you can make, you should at least ensure that the `dato` column is actually a DATE type and not a varchar. As it is, any date-based sorting or filtering will be extremely difficult to perform with SQL.

# asp.net - 如何使自定义动态数据字段模板组合框需要

> ID：15790764
> 
> 赞同：0
> 
> 时间：2013-04-03T14:53:42.770
> 
> 标签：asp.net, entity-framework, webforms, asp.net-dynamic-data

我创建了一个自定义动态数据字段模板来显示状态下拉列表。下拉似乎没有问题。但它没有显示为“必需”。意思是如果我把它留空，我仍然可以进入下一页。页面上的其他字段确实正确验证。

字段模板的 HTML

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="State_Edit.ascx.vb"       Inherits="State_EditField" %>

<asp:ObjectDataSource ID="objectDataSourceState" runat="server" SelectMethod="GetAll" DataObjectTypeName="AsbestosEntities.lu_state" 
TypeName="AsbestosBusiness.StateController">
</asp:ObjectDataSource>
<asp:DropDownList ID="DropDownList1" runat="server" CssClass="ui-corner-all ui-widget input-text" AppendDataBoundItems="true" DataSourceID="objectDataSourceState" DataTextField="description" DataValueField="code">
<asp:ListItem Value="-1" Text=""></asp:ListItem>
</asp:DropDownList>

<asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator1" CssClass="validator" ControlToValidate="DropDownList1" Display="Static" Enabled="false" InitialValue="-1" />
<asp:DynamicValidator runat="server" ID="DynamicValidator1" CssClass="validator" ControlToValidate="DropDownList1" Display="Static" /> 
```

字段模板背后的代码

```
Imports System.ComponentModel.DataAnnotations
Imports System.Web.DynamicData
Imports System.Web

Class State_EditField
Inherits FieldTemplateUserControl

Public Overrides ReadOnly Property DataControl As Control
    Get
        Return DropDownList1
    End Get
End Property

Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
    If (DropDownList1.Items.Count = 0) Then
        If Mode = DataBoundControlMode.Insert OrElse Not Column.IsRequired Then
            DropDownList1.Items.Add(New ListItem("[Not Set]", ""))
        End If
        PopulateListControl(DropDownList1)
    End If
    SetUpValidator(RequiredFieldValidator1)
    SetUpValidator(DynamicValidator1)
End Sub

Protected Overrides Sub OnDataBinding(ByVal e As EventArgs)
    MyBase.OnDataBinding(e)
    Dim selectedValueString As String = GetSelectedValueString()
    Dim item As ListItem = DropDownList1.Items.FindByValue(selectedValueString)
    If item IsNot Nothing Then
        DropDownList1.SelectedValue = selectedValueString
    End If
End Sub

Protected Overrides Sub ExtractValues(ByVal dictionary As IOrderedDictionary)
    ' If it's an empty string, change it to null
    Dim value As String = DropDownList1.SelectedValue
    If String.IsNullOrEmpty(value) Then
        value = Nothing
    End If
    ExtractForeignKey(dictionary, value)
End Sub

End Class 
```

显示字段的表单视图

```
<asp:FormView ID="FacilityInfo" runat="server" AllowPaging="True" DefaultMode="Insert"
                                DataKeyNames="facility_id">
    <InsertItemTemplate>
        <p>
            <h2>
                Enter the facility information:</h2>
        </p>
        <p>
            <asp:Label ID="Label7" runat="server" Text="State" CssClass="detailheader"></asp:Label><br />
            <asp:DynamicControl ID="facility_state" runat="server" DataField="facility_state" HtmlEncode="true"
                                            Mode="Insert" CssClass="detailitem" />                                            
        </p>
    </InsertItemTemplate>
</asp:FormView> 
```

该模型

```
Imports System.ComponentModel
Imports System.ComponentModel.DataAnnotations

<MetadataType(GetType(facilityMetadata))> _
Public Class facility

    <Key()> _
    Public Property facility_id As Integer
    Public Property facility_state As String

End Class

Public Class facilityMetadata

    <UIHint("LongText")> _
    <DisplayName("Facility ID")> _
    <Required(ErrorMessage:="Facility ID is required")> _
    Public Property facility_id As Integer
    <UIHint("State")> _
    <DisplayName("State")> _
    <StringLength(2, ErrorMessage:="State cannot be more than 2 characters")> _
    <Required(ErrorMessage:="Facility state is required")> _
    <RegularExpression("^[a-zA-Z]+$", ErrorMessage:="State can only contain letters.")> _
    Public Property facility_state As String

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:02:22.700

我认为问题是

```
<asp:ListItem Value="-1" Text=""></asp:ListItem> 
```

位于您的 DropDownList 内。

尝试使用

```
<asp:ListItem Value="" Text=""></asp:ListItem> 
```

而不是你正在使用。

**编辑：**

我刚刚模拟了您的问题，我发现您正在使用自定义字段模板的**AutoEventWireup Page 属性**

```
AutoEventWireup="false" 
```

防止您的 Page_Load 事件自动连接到页面的 Load 事件。

将此 Page 属性的值更改为**true**（或删除一个，因为默认值为**true**）并重试。

有关一些信息：

[AutoEventWireUp 页面属性是什么意思？](https://stackoverflow.com/questions/680878/what-does-autoeventwireup-page-property-mean)

# ios - applicationDidTimeout 不一致

> ID：15790771
> 
> 赞同：0
> 
> 时间：2013-04-03T14:53:55.840
> 
> 标签：ios, xcode

按照[本教程](http://www.icodeblog.com/2011/09/19/timing-out-an-application-due-to-inactivity/)，我已将我的 iPad 应用程序设置为半小时后超时。

这可以通过模拟器上的 Xcode 或连接到 Mac 的 iPad 完美运行。但是，如果我断开 iPad 与 Mac 的连接并重新登录我的应用程序，它就不再超时。

我希望有人能够解释为什么会发生这种情况。

AppDelegate.m

```
-(void)applicationDidTimeout:(NSNotification *) notif
{
    NSLog (@"time exceeded!!");

    UIViewController *controller = [[UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:NULL] instantiateViewControllerWithIdentifier:@"mainView"];

    [(UINavigationController *)self.window.rootViewController pushViewController:controller animated:YES];
} 
```

TIMERUIApplication.h

```
@interface TIMERUIApplication : UIApplication
{
    NSTimer     *myidleTimer;
}

-(void)resetIdleTimer; 
```

TIMERUIApplication.m

```
-(void)sendEvent:(UIEvent *)event
{
    [super sendEvent:event];

    if (!myidleTimer)
    {
        [self resetIdleTimer];
    }

    NSSet *allTouches = [event allTouches];
    if ([allTouches count] > 0)
    {
        UITouchPhase phase = ((UITouch *)[allTouches anyObject]).phase;
        if (phase == UITouchPhaseBegan)
        {
            [self resetIdleTimer];
        }

    }
 }
-(void)resetIdleTimer
{
     if (myidleTimer)
    {
        [myidleTimer invalidate];
    }
    int timeout = kApplicationTimeoutInMinutes * 60;
    myidleTimer = [NSTimer scheduledTimerWithTimeInterval:timeout target:self selector:@selector(idleTimerExceeded) userInfo:nil repeats:NO];

}

-(void)idleTimerExceeded
{
    isLoggedIn = FALSE;
    numberOfFIlesAlreadyDownloaded = 0;
    numberOfFilesToBeDownloaded = 0;
    [[NSNotificationCenter defaultCenter]  postNotificationName:kApplicationDidTimeoutNotification object:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:06:20.750

一些进一步的实验将其缩小到 iPad 自动锁定。

当 iPad 进入睡眠状态时，应用程序也会进入睡眠状态，这意味着计时器被中断。

将 iPad 连接到 Mac 禁用了自动锁定，这就是为什么我只在断开连接的 iPad 上注意到它的原因。

# javascript - 从 IntelliJ 中的 console.log 获取更多详细信息

> ID：15790776
> 
> 赞同：0
> 
> 时间：2013-04-03T14:54:09.760
> 
> 标签：javascript, node.js

我正在阅读一本关于 Node.js 的书，其中提到了以下代码 -

```
 fs.stat(file, function(err, stats) {
            console.log("File stats: " + stats);
        }); 
```

它说这将产生看起来像这样的输出 -

```
File stats:
{ dev: 234881026,
ino: 95028917,
mode: 33188,
nlink: 1,
uid: 0,
gid: 0,
rdev: 0,
size: 5086,
blksize: 4096,
blocks: 0,
atime: Fri, 18 Nov 2011 22:44:47 GMT,
mtime: Thu, 08 Sep 2011 23:50:04 GMT,
ctime: Thu, 08 Sep 2011 23:50:04 GMT } 
```

但是，当我运行此代码时，我得到以下输出 -

```
File stats: [object Object] 
```

那么有没有办法让 console.log() 函数更详细，以便打印出对象的字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:55:32.043

采用：

```
console.log('File stats: ' + JSON.stringify(stats)); 
```

或者

```
console.log('File stats:', stats); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:59:22.600

连接字符串导致转换`stats`为字符串，它变成`[object Object]`. 试试这个：

```
fs.stat(file, function(err, stats) {
     console.log(stats);
}); 
```

# wcf - 具有组合身份验证模式的 WCF Rest

> ID：15790778
> 
> 赞同：0
> 
> 时间：2013-04-03T14:54:16.983
> 
> 标签：wcf, rest, authentication

我创建了一个具有基本 http 身份验证的自托管 WCF RESTful 服务，该服务通过带有自签名 SSL 证书的 https 运行。一切正常。用户通过网络浏览器访问服务操作。

问题是我的客户现在希望服务用户同时使用**基本**身份验证（用户名 + 密码）和证书进行身份验证。我无法做到这一点。

我已经看到在 WCF 4.5 中可以有多个身份验证方案。我对此进行了调查，但无济于事。

我也遇到过这个[帖子](https://stackoverflow.com/questions/8806067/which-security-mode-to-use-in-wcf-client-with-ssl-and-http-authentication)（见最后一个答案），但是当我尝试它时，我得到了这个错误：

“发生异常：HTTPS 侦听器工厂被配置为需要客户端证书和身份验证方案‘基本’。一次只能要求一种形式的身份验证。”

我的配置是在代码中完成的，下面是它的样子（这是有效的版本）：

```
Uri baseAdress = new Uri("https://localhost:8446/"); 
WebServiceHost host = new WebServiceHost(typeof(RestService));
WebHttpBinding wb = new WebHttpBinding();
wb.Security.Mode = WebHttpSecurityMode.Transport;
wb.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;
host.AddServiceEndpoint(typeof(IRestService), wb, baseAdress);
host.Credentials.UserNameAuthentication.CustomUserNamePasswordValidator = new CustomUserNameValidator();
host.Credentials.UserNameAuthentication.UserNamePasswordValidationMode = UserNamePasswordValidationMode.Custom;
host.Description.Endpoints[0].Behaviors.Add(new WebHttpBehavior { HelpEnabled = true });
host.Open(); 
```

感谢您的任何提示，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:48:03.050

单个端点上的多重身份验证适用于 Web 托管方案（不是自托管）。您可以通过说 clientCredentialType='InheritFromHost' 在 Web 主机中进行配置，并在 vdir 身份验证中设置要为该特定端点设置的所有身份验证方案。查看[此](http://msdn.microsoft.com/en-us/library/dd456789.aspx)文档以获取标题“多重身份验证支持”。

> > 已添加多身份验证支持支持，以在使用 HTTP 传输和传输安全性时在单个 WCF 终结点上支持 IIS 支持的多种身份验证模式。IIS 允许您在虚拟目录上启用多种身份验证模式，此功能允许单个 WCF 端点支持为托管 WCF 服务的虚拟目录启用的多种身份验证模式。

# big-o - 编辑：没关系

> ID：15790779
> 
> 赞同：0
> 
> 时间：2013-04-03T14:54:18.943
> 
> 标签：big-o

编辑：哇，我很抱歉....我以某种方式混淆了第二张图中的 LinkedList 和 ArrayList 列>_>我睡得不多....对不起...至少一个答案确实对我有所帮助方式，有详细的解释，所以这篇文章不是完全浪费......

我确实找到了一些关于此的主题，但帖子中存在矛盾，所以我想确认谁是正确的。

这个主题是我发现的： [When to use LinkedList over ArrayList?](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)

投票最多的答案是：

> "对于链表
> 
> *   得到是 O(n)
> *   添加是 O(1)
> *   删除是 O(n)
> *   Iterator.remove 是 O(1)
> 
> 对于数组列表
> 
> *   得到是 O(1)
> *   add 是 O(1) 摊销，但 O(n) 最坏情况，因为必须调整数组大小和复制
> *   删除是 O(n)"

但后来有人在这里发布了一个链接，上面写着： http:
[//leepoint.net/notes-java/algorithms/big-oh/bigoh.html](http://leepoint.net/notes-java/algorithms/big-oh/bigoh.html)

```
Algorithm     ArrayList   LinkedList
access front     O(1)         O(1)
access back      O(1)         O(1)
access middle    O(1)         O(N)
insert at front  O(N)         O(1)
insert at back   O(1)         O(1)
insert in middle O(N)         O(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:06:43.397

There is no contradiction between the two sources cited in the question.

First a few thoughts about **LinkedLists**: In a linked list, we need to move a pointer through the list to get access to any particular element to either delete it, examine it, or insert a new element before it. Since the java.util.LinkedList implementation contains a reference to the front and back of the list, we have immediate accesss to the front and back of the list and this explains why any operation involving the front or back of the list is O(1). If an operation is done using an Iterator, then the pointer is already where you need it to be. So to remove an element from the middle takes O(n) time, but if the Iterator already spent O(n) operations getting to the middle, then `iter.remove()` can execute in O(1).

Now conisider **ArrayList**: Under the hood, ArrayList stores data in a primitive array. So while we can access any element in O(1) time, adding or removing an element will require that the entire array be shifted down by one element and this takes O(n) time. If we are adding or removing the last element, this does not require any shifting, so this can run in O(1).

This means that calling `list.add(newItem)` takes O(1), but occasionally there is no room at the end of the list, so the entire list needs to be copied into new memory before ArrayList can perform the add. However, since every time ArrayList resizes itself it doubles the previous capacity, this copy operation only happens log[2] n times when adding n elements. So we still say that add runs in O(1) time. If you know how many elements you will be adding when the ArrayList is created, you can give it an initial capacity to improve performance by avoiding the copy operation.

# mysql - MySQL查询：开始日期但没有结束日期

> ID：15790788
> 
> 赞同：1
> 
> 时间：2013-04-03T14:54:45.913
> 
> 标签：mysql

我正在对一个数据库进行查询，该数据库从今天开始提取所有记录 - 90 天，然后从那开始。但是，我意识到我已经对我的查询进行了编码，因此它只能提取 90 天的范围。所以我需要指出开始日期，但我不需要指出结束日期，我想要过去 90 天内的所有内容。

```
 SELECT project_id, project_name, project_end
    FROM projects
    WHERE project_end BETWEEN SYSDATE() - INTERVAL 90 DAY AND SYSDATE()
    ORDER BY project_id ASC; 
```

因为这只会返回结束日期为今天 -90 的项目，而不会返回未来结束日期的项目。更复杂的是，有些项目根本没有输入结束日期（空值），有些项目输入的是 0000-00-00。

指示范围从 90 天前开始，然后继续没有特定结束日期的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:56:26.180

如何使用`>=`？

```
WHERE project_end >= SYSDATE() - INTERVAL 90 DAY OR
      project_end IS NULL OR
      project_end = '0000-00-00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:58:57.130

为什么需要间隔？我想你可以使用：

```
WHERE
  project_end >= CURDATE() - INTERVAL 90 DAY
  OR COALESCE(project_end, '0000-00-00') = '0000-00-00' 
```

这将选择过去 90 天内具有 project_end 或具有 NULL 项目结束或项目结束 = '0000-00-00' 的所有项目

# c - 何时在扩展的 GCC 内联汇编中使用特定的操作数约束？

> ID：15790789
> 
> 赞同：2
> 
> 时间：2013-04-03T14:54:47.223
> 
> 标签：c, gcc, assembly, x86, inline-assembly

我很难理解何时在扩展的 GCC 内联汇编中使用特定的输入操作数约束而不是另一个。

例如：

```
int x = 42;
asm("movl %0, %%eax;"
    : /* no outputs */
    : "r"(x)
    : "%eax"); 
```

我知道这`"r"`告诉编译器使用寄存器来保存 的值`x`，但是什么时候使用`"g"`or更合适`"m"`？`"m"`由于我使用的是注册目的地，因此会使用破坏此代码；并且`"g"`操作数约束过于“模糊”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T15:05:30.987

您使用的约束的很大一部分是它所描述的类型是否适用于您的说明。在`mov %0, %%eax`中，您可以将寄存器、内存引用或立即操作数代替`%0`，汇编器将接受它。所以你可以使用`g`约束。

如果你有`mov %0, 4(%%esp)`，那么你不能允许`%0`成为内存引用，因为`4(%%esp)`是内存引用，并且没有`mov`接受两个内存引用的指令形式。所以你需要使用一个约束，比如`r`要求`%0`成为一个寄存器。

（请注意，这段代码本身是无用的。一旦`asm`完成，编译器就可以随意使用`%eax`它想要的任何东西，因此没有理由期望它`x`会保留在寄存器中。将某些东西移动到`%eax`仅在`%eax`在允许编译器再次控制之前使用的一系列指令。）

# git - 当前目录下的Git克隆

> ID：15790792
> 
> 赞同：2
> 
> 时间：2013-04-03T14:54:49.273
> 
> 标签：git, github

我正在尝试从 GitHub 克隆 HTML 5 Boiler Plate，但它在我的目录中创建了一个名为 html5bp 的文件夹。我想要做的是将内容直接克隆到目录中而不创建子目录。这是我正在使用的：

```
git clone http://github.com/h5bp/html5-boilerplate.git 
```

我知道这是可能的，但我是使用 git 的新手，所以还不知道它的来龙去脉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:59:37.537

您可以指定目录（必须为空）：

```
git clone http://github.com/h5bp/html5-boilerplate.git mydirectory 
```

有关 git 命令的更多帮助，请尝试`git help <command>`，例如`git help clone`.

# node.js - 在 Node.js 中使用 FineUploader 上传文件会挂起服务器

> ID：15790793
> 
> 赞同：0
> 
> 时间：2013-04-03T14:54:50.817
> 
> 标签：node.js, express, fine-uploader

我已经对这个错误进行了两个多星期的故障排除，但找不到问题所在。我已经使用 FineUploader 上传多个文件的页面。我有一个项目集合，每个项目都需要获取它自己的图像。所以我在请求中传递一个参数，以识别图像对应的项目。我还有一个图片库和徽标的上传器。

我手动触发上传并在服务器上获取请求，然后设置 req.on(data, function() { ... }) 上传文件。这永远不会被触发。

这是我的代码：

```
$(document).ready(function () {
    window.onSubmit = function (uploaderName) {
        return function (id, fileName) {
            console.log("Setting parameters...")
            window[uploaderName].setParams({
                farm: $('input[name=farm-name]').val()
            });
        }
    };

    window.logoUploader = new qq.FineUploader({
        element: $('#logo')[0],
        request: {
            endpoint: '/upload/farm/logo'
        },
        autoUpload: false,
        debug: true,
        validation: {
            allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
            sizeLimit: 1024000 // 50 kB = 50 * 1024 bytes
        },
        text: {
            uploadButton: '<i class="icon-plus icon-white"></i> Select Logo'
        },
        callbacks: {
            onSubmit: onSubmit("logoUploader")
        }
    });

  window.shareLogoUploader = [];
  window.shareLogoUploader[0] = new qq.FineUploader({
    element: $('#share-logo-0')[0],
    request: {
      endpoint: '/upload/farm/share/gallery'
    },
    autoUpload: false,
    debug: true,
    validation: {
      allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
      sizeLimit: 1024000 // 50 kB = 50 * 1024 bytes
    },
    text: {
      uploadButton: '<i class="icon-plus icon-white"></i> Select Logo'
    }
  });

    window.galleryUploader = new qq.FineUploader({
        element: $('#gallery')[0],
        request: {
            endpoint: '/upload/farm/gallery/photo'
        },
        autoUpload: false,
        debug: true,
        validation: {
            allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
            sizeLimit: 2024000 // around 2mbs
        },
        text: {
            uploadButton: '<i class="icon-plus icon-white"></i> Pics'
        },
        callbacks: {
            onComplete: function (event, id, fileName, responseJSON) {
                if (responseJSON.success) {
                    console.log(responseJSON, fileName);
                    $('#thumbnails').append('<img src="/uploads/' + fileName + '" width="256px"><input type="hidden" name="photos[]" value="' + fileName + '">');
                }
            },
            onSubmit: onSubmit("galleryUploader")
        }
    });
});

// Shares
var shares = [];
var sharesGallery = [];

$(function () {
    $('section#shares button#add-share').click(function (e) {
        e.preventDefault();

        var title = $('section#shares .control-group input[name=title]');
        var size = $('section#shares .control-group select[name=size]');
        var type = $('section#shares .control-group select[name=type]');
        var price = $('section#shares .control-group input[name=price]');
        var amount = $('section#shares .control-group input[name=amount]');
        var unit = $('section#shares .control-group select[name=unit]');
        var discount_3 = $('input[name=discount-3]').val();
        var discount_6 = $('input[name=discount-6]').val();
        var discount_12 = $('input[name=discount-12]').val();
        var errors = $('section#shares .control-group#errors');
        var delivery_period = $('section#shares .control-group input[name=delivery_period]');
        var delivery_period_es = $('section#shares .control-group input[name=delivery_period_es]');
        var billing_period = $('section#shares .control-group input[name=billing_period]');
        var billing_period_es = $('section#shares .control-group input[name=billing_period_es]');
        var logoUploader = window.shareLogoUploader[shares.length];
        var logoButtonId = "share-logo-" + shares.length;

            shares.push({
                title: title.val(),
                currency: $('select[name=currency]').children(':selected').val(),
                size: size.children(':selected').val(),
                type: type.children(':selected').val(),
                price: price.val() * 100.0,
                unit: unit.children(':selected').val(),
                amount: amount.val(),
                discounts: {
                    '3': [discount_3, price.val() * discount_3 / 100.0],
                    '6': [discount_6, price.val() * discount_6 / 100.0],
                    '12': [discount_12, price.val() * discount_12 / 100.0]
                },
                delivery_period: delivery_period.val(),
                delivery_period_es: delivery_period_es.val(),
                billing_period: billing_period.val(),
                billing_period_es: billing_period_es.val()
            });

            var newLogoButtonId = "share-logo-" + shares.length;

            sharesGallery.push({
                name: type.children(':selected').val() + "-" + size.children(':selected').val(),
                logoUploader: logoUploader
            })
        $("#" + logoButtonId).css('display', 'none');
        $("#" + logoButtonId).parent().append('<div id="' + newLogoButtonId + '"></div>');

        window.shareLogoUploader[shares.length] = new qq.FineUploader({
            element: $("#" + newLogoButtonId)[0],
            request: {
                endpoint: '/upload/farm/share/gallery'
            },
            autoUpload: false,
            debug: true,
            validation: {
                allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
                sizeLimit: 1024000 // 50 kB = 50 * 1024 bytes
            },
            text: {
                uploadButton: '<i class="icon-plus icon-white"></i> Select Logo'
            }
        });

        console.log(shares);

        return;
    }
}); 
```

这会正确触发上传，我在服务器上获取请求并以这种方式处理它，然后服务器挂起等待永远不会到来的数据，重新 req.on Data naver 被触发。这是服务器端代码：

```
var fs = require('fs'), util = require('util'), uuid = require('node-uuid');

var uploadpath = __dirname + "/../public/uploads/";

var slugify = exports.slugify = function(value) {
    return value.toLowerCase().replace(/-+/g, '').replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
};
// Route that takes the post upload request and sends the server response
exports.upload = function(req, res) {
    winston.info("Upload parameters", [req.route.params[0], req.query.farm]);
    uploadpath = __dirname + "/../public/uploads/";
    if(!fs.existsSync(uploadpath)) {
        fs.mkdirSync(uploadpath);
    }
    switch(req.route.params[0]) {
        case 'farm/logo':
            uploadpath += "../farms/" + slugify(req.query.farm);
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            uploadpath += "/" + "logo." + req.header('x-file-name').split(".").pop();
            break;

        case 'farm/gallery/photo':
            uploadpath += "../farms/" + slugify(req.query.farm);
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            uploadpath += "/gallery";
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            var fname = req.header('x-file-name');
            uploadpath += "/" + fname;
            break;

        case 'farm/share/gallery':
            uploadpath += "../farms/" + slugify(req.query.farm);
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            uploadpath += "/shares";
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            uploadpath += "/" + slugify(req.query.share);
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            uploadpath += "/gallery";
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            var fname = req.header('x-file-name');
            uploadpath += "/" + fname;
            break;
        case 'courier/license':
        case 'courier/registration':
            uploadpath += "../couriers/" + slugify(req.query.courier);
            if(!fs.existsSync(uploadpath)) {
                fs.mkdirSync(uploadpath);
            }
            var fname = req.header('x-file-name');
            uploadpath += "/" + fname;
            break;

        default:
            var fname = req.header('x-file-name');
            uploadpath += fname;
            break;
    }

    winston.info("Uploading to ", uploadpath);

    uploadFile(req, uploadpath, function(data) {
        if(data.success)
            res.send(JSON.stringify(data), {
                'Content-Type' : 'text/plain'
            }, 200);
        else
            res.send(JSON.stringify(data), {
                'Content-Type' : 'text/plain'
            }, 404);
    });
}
// Mainfunction to recieve and process the file upload data asynchronously
var uploadFile = function(req, targetfile, callback) {

    // Moves the uploaded file from temp directory to it's destination
    // and calls the callback with the JSON-data that could be returned.
    var moveToDestination = function(sourcefile, targetfile) {
        moveFile(sourcefile, targetfile, function(err) {
            if(!err)
                callback({
                    success : true
                });
            else
                callback({
                    success : false,
                    error : err
                });
        });
    };
    // Direct async xhr stream data upload, yeah baby.
    if(req.xhr) {

        // Be sure you can write to '/tmp/'
        var tmpfile = '/tmp/' + uuid.v1();

        // Open a temporary writestream
        var ws = fs.createWriteStream(tmpfile);
        ws.on('error', function(err) {
            console.log("uploadFile() - req.xhr - could not open writestream.");
            callback({
                success : false,
                error : "Sorry, could not open writestream."
            });
        });
        ws.on('close', function(err) {
            moveToDestination(tmpfile, targetfile);
        });
        // Writing filedata into writestream
        req.on('data', function(data) {
            ws.write(data);
        });
        req.on('end', function() {
            ws.end();
        });
    }

    // Old form-based upload
    else {
        moveToDestination(req.files.qqfile.path, targetfile);
    }
};
// Moves a file asynchronously over partition borders
var moveFile = function(source, dest, callback) {
    var is = fs.createReadStream(source)

    is.on('error', function(err) {
        console.log('moveFile() - Could not open readstream.', err);
        callback('Sorry, could not open readstream.')
    });
    is.on('end', function() {
        fs.unlinkSync(source);
        callback();
    });
    var os = fs.createWriteStream(dest);
    os.on('error', function(err) {
        console.log('moveFile() - Could not open writestream.', err);
        callback('Sorry, could not open writestream.');
    });

    is.pipe(os);
} 
```

有人可以指出我正确的方向，以便为每组文件使用不同的参数上传文件吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:11:15.757

好的，如果有人（像我一样）需要一个体面而简单的例子来用他们的 node.js/express 应用程序实现 Fine Uploader - 我终于能够让它工作了。事实证明，我让自己的一切变得比必要的困难得多，Fine Uploader 服务器示例并没有清楚地说明现在使用新版本的 express 有多么容易（这是使用 express@3.1.1）。

```
app.use(express.bodyParser({uploadDir: __dirname + '/uploads'}));

app.get('/upload', localQuery, function(request, response) {
    //This serves up our 
    response.render('index');

});

app.post('/uploadhander', function (request, response, next) {

    var fileName = request.files.qqfile.name
    var savePath = __dirname + '/process/';

    //after upload, rename the file, then respond to fineuploader to tell it of success
    fs.rename(request.files.qqfile.path, savePath + fileName, function(err) {
    if (err != null) {
        response.send(JSON.stringify({success: false, error: err}), {'Content-Type': 'text/plain'}, 404);
    } else {
        response.send(JSON.stringify({success: true}), {'Content-Type': 'text/plain'}, 200);
    }
    });

}); 
```

这是处理 Fine Uploader 选项的 /upload 的翡翠模板（您的选项显然会有所不同）：

```
 div.span12
    h4 Upload a show file
    #jquery-wrapped-fine-uploader
      script(type='text/javascript')
        jQuery(document).ready(function() {
          jQuery('#jquery-wrapped-fine-uploader').fineUploader({
            debug: false,
            request: {
              endpoint: '/uploadhander',
              params: {
                hostname: "#{locals.query.hostname}",
                hostport: "#{locals.query.hostport}",
                bucket: "#{locals.query.bucket}",
                nid: "#{locals.query.nid}",
                title: "#{locals.query.title}",
              },
              chunking: {
                enabled: true,
              },
              resume: {
                enabled: true,
              },
            }
          });
        }); 
```

我应该指出，我还没有测试简历功能，但我**可以**验证是否正在处理多个上传，代码比发布的示例显示的要少得多。希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:23:10.407

看起来您正在使用 Node 示例，或者可能是 Fine Uploader Github 项目的服务器目录中的 Node 示例的修改版本。该示例尚未更新以处理多部分编码请求，Fine Uploader 现在默认为所有浏览器发送该请求。

我对 Node 没有太多经验，但是如果您使用 Express，您似乎可以/应该只使用[`req.files`](http://expressjs.com/api.html#req.files)来获取与请求关联的文件。

[我将在Widen/fine-uploader-server 存储](https://github.com/Widen/fine-uploader-server)库中打开一个案例，以提醒我更新节点示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-27T21:43:50.250

[将multer](https://www.npmjs.com/package/multer#readme)与 express.js一起使用更加有用和简单。我的服务器端代码如下所示

```
var multer  = require('multer');

var upload = multer({
    dest : path.join(__dirname , '../public/uploads/')
});

router.post('/upload', function (req, res) {

    upload(req, res, function (err) {

        if (err) 
            response.send(JSON.stringify({success: false, error: err}), {'Content-Type': 'text/plain'}, 404);
        else
            res.send(JSON.stringify({success: true}), {'Content-Type': 'text/plain'}, 200);

    });

});

module.exports = router; 
```

# javascript - 在 IBMWorklight 中使用 dojo 的 android 的方向不平滑

> ID：15790794
> 
> 赞同：0
> 
> 时间：2013-04-03T14:54:52.537
> 
> 标签：javascript, android, cordova, dojo, ibm-mobilefirst

我是 IBMWorklight 和 dojo 框架的新手。我开发了一个支持两种方向模式（横向和纵向）的混合应用程序。目前我已将应用程序移植到 samsung Galaxy tablet(10 inch) 上。当我旋转设备时，方向变化不平滑，会产生闪烁效果。我也在 `android:configChanges="orientation|screenSize">`我的 AndroidManifest 文件中添加了，但它不起作用。请建议如何使方向平滑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:00:47.817

如果不知道应用程序的结构和代码，很难确定答案，但您可以轻松尝试的一件事是在 data-dojo-config 中将 mblHideAddressBar 设置为 false：

```
<script type="text/javascript"
data-dojo-config="isDebug: false, async: true, parseOnLoad: true, mblHideAddressBar: false"
src="dojo/dojo.js"></script> 
```

（在您的主 HTML 文件中）

这似乎在 Worklight 应用程序中默认设置为 true，但这在 Worklight 应用程序中没有用，并且可能会影响方向更改的性能。

# php - 如何遍历多维数组？

> ID：15790800
> 
> 赞同：0
> 
> 时间：2013-04-03T14:55:11.387
> 
> 标签：php, loops, multidimensional-array, foreach, iteration

我有这样的数组。该数组是动态创建的

```
 Array
 (
  [Data NotUploading] => Array
    (
        [items] => Array
            (
                [0] => Array
                    (
                        [date] => 2013-04-02
                        [issue_id] => 1
                        [phone_service_device] => A
                        [phone_service_model] => 
                        [phone_service_os] => 
                        [phone_service_version] => 
                        [issue_name] => Data NotUploading
                    )

                [1] => Array
                    (
                        [date] => 2013-04-02
                        [issue_id] => 1
                        [phone_service_device] => I
                        [phone_service_model] => 
                        [phone_service_os] => 
                        [phone_service_version] => 
                        [issue_name] => Data NotUploading
                    )

            )

    )

[Battery Problem] => Array
    (
        [items] => Array
            (
                [0] => Array
                    (
                        [date] => 2013-04-03
                        [issue_id] => 3
                        [phone_service_device] => I
                        [phone_service_model] => 
                        [phone_service_os] => 
                        [phone_service_version] => 
                        [issue_name] => Battery Problem
                    )

            )

    )
) 
```

我需要做的是使用 2`foreach`或 1 个 foreach 和 1 个 for 循环，这样我就可以获得我所做的每个日期值

```
 foreach($gResultbyName  as $key1 => $rec){
         for($j = 0;$j<count($rec);$j++ ){
             echo $rec['items'][$j]['date']; 
         }
     } 
```

但它唯一检索 2013-04-02 和 2013-04-03 是数据 NotUploading 的 0 索引日期和电池问题的 0 索引日期。基本上我需要比较每个值和其他东西，但我不能得到每个日期值。

原谅我的无知，但我尝试了很多:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:59:51.397

试试这个：

```
foreach ($data as $d)
{
    foreach($d['items'] as $item)
    {
        echo $item['date'];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:58:18.470

您的 for 循环循环`count($rec)`次数，但应该`count($rec['items'])`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:05:26.137

这应该将日期加载到按 issue_name 排序的数组中。您可以单步执行它们以进行进一步处理。

```
$dates= array();
foreach ($gResultbyName AS $events){
    foreach ($events['items'] AS $item){
        $dates[$item['issue_name']][] = $item['date'];
    }
}
var_dump($dates); 
```

# java - 如何在 Selenium Webdriver Java 中使用完全相同的信息识别和发送信息到 2 个不同的元素

> ID：15790804
> 
> 赞同：0
> 
> 时间：2013-04-03T14:55:22.720
> 
> 标签：java, selenium, attributes, webdriver, elements

我正在自动填写在线表格。问题是许多字段具有相同的属性信息。下面的两个示例都是不同部分的地址行，我试图发送不同的地址信息，但 selenium 只识别一个元素，因为信息是相同的。Xpath 和 Css 也没有单独识别它们。有什么建议么？

```
<div class="row-fluid">
<div class="span7">
<label for="AddressLine1">Street Address 1</label>
<input id="AddressLine1" class="span" type="text" value="" name="AddressLine1">
</div>

//Second area on form
<div class="span7">
<label for="AddressLine1">Street Address 1</label>
<input id="AddressLine1" class="span" type="text" value="" name="AddressLine1">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T11:31:26.163

css=div.row-fluid > div.span7:nth-of-type(i) > #AddressLine1 -- CSS 选择器

i -- 具有 span7 类的 div 的大小。

请让我知道上面的 CSS 选择器是否正常工作。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:26:47.013

您可以在这种情况下使用 Xpath Position()。假设如果你有 10 个地址字段具有相同的 xpath，你可以使用下面的 selenium 类型命令在第 6 个地址框中写入地址。

```
driver.findElement(By.xpath("//input[@type='text'][position()=6]")).sendKeys("Address") 
```

有关更多选项，请参阅[此](http://automationtricks.blogspot.in/2010/09/how-to-use-functions-in-xpath-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:01:53.830

```
List<WebElement> divs = driver.findElements(By.cssSelector("div.span7")); 
```

如果你想要第一个 div

```
divs.get(0); 
```

如果你想要第二个 div

```
divs.get(1); 
```

# asp.net - 检查是否有来自服务器的异常

> ID：15790806
> 
> 赞同：1
> 
> 时间：2013-04-03T14:55:29.700
> 
> 标签：asp.net, vb.net

我有一个用 vb.net 编写的 ASP.NET Web 应用程序。我已经在 wwroot 文件夹中的 Web 服务器上上传了应用程序，一旦我输入带有 的 URL `QueryString`，`page_Load`它应该请求它`QueryString`并将其存储在数据库中，一次存储在数据库中`Table1`，另一个存储在`Table2`. 好吧，它正在插入`QueryString`to`Table 1`但不是 to `Table2`。插入代码在一个`Try Catch`块内，但问题是我不知道如何`MsgBox`在客户端显示带有异常的服务器。

我也尝试在 WebServer 本身上编写`txtFile`包含任何`ex.message`内容的内容，但是没有运气，即使没有异常触发，`txtFile`也没有创建我猜它是路径问题。无论是写物理路径还是虚拟路径都测试了没有运气。

我真的很想知道为什么要插入`QueryString`to`Table1`而不是`Table2`。

我正在使用 a`class.vb`来插入`Querystring`. 在主页上，我请求`QueryString`这是一个变量（更改）表名`(Table2)`，将其传递给定义的函数，然后为预定义的不变表`class.vb`应用语句，并使用检索到的名称插入日期和时间两张桌子。 `Insert``(Table1)``QueryString` `(Table2)`

**在 MainPage.aspx 上：**

```
Dim classOBJ AS new Projet.class1

classOBJ.Fun(Request.QueryString("Table")) 
```

**在 Class1.vb 中：**

```
 Public Sub Fun(ByVal value As String)

    Dim date_T As Date = Date.Today

    Try

    Using myconn As New SqlConnection(ConnString)
    myconn.Open()

Dim cmd1 = New SqlCommand("INSERT INTO Table1 (Date_T,Time_T) values (@paramdate, @paramtime)", myconn)
cmd1.Parameters.AddWithValue("@paramdate", date_T)
cmd1.Parameters.AddWithValue("@paramtime", Now().ToString("HH:mm:ss"))
cmd1.ExecuteNonQuery()
cmd1.Dispose()

Dim cmd2 = New SqlCommand("Insert into [" & value & "] (Date_T, Time_T) values (@paramdate, @paramtime)", myconn)

    cmd2.Parameters.AddWithValue("@paramdate", date_T)
    cmd2.Parameters.AddWithValue("@paramtime", Now().ToString("HH:mm:ss"))
    cmd2.ExecuteNonQuery()
    cmd2.Dispose()
    myconn.Close()
    End Using 
```

我使用这种表示法`[` `]`是因为`Table's 2`名称是一个数字。

# php - 如何在 PHP 脚本中获取实际内存限制？

> ID：15790808
> 
> 赞同：2
> 
> 时间：2013-04-03T14:55:31.483
> 
> 标签：php, memory

使用`ini_get('memory_limit')`将获得 php.ini 文件中指定的内容（我想）。但是如果我运行`ini_set('memory_limit', 'somethingInsanelyHigh')`然后`ini_get(..)`再次运行，它将返回我之前设置的内容。这让我相信没有真正的方法可以增加内存限制并检测它是否真的增加了，是吗？

实际上是做什么的`ini_set(..)`？它只是在某处更新变量还是*实际上*增加了限制？如果是这样，我怎么知道它是否有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:18:49.217

`ini_set`成功或`FALSE`失败时返回旧值。所以你可能想检查一下：

```
if (ini_set('memory_limit', 'somethingInsanelyHigh') === false) {
  // cannot set memory_limit
} 
```

此外，考虑到这将设置当前 PHP 进程将占用的最大内存量，因此如果您要对该脚本有多个并发请求，您将需要一些合理的东西，以防您的脚本真的吃掉这么多内存。

也将其设置为`-1`意味着没有内存限制。

*编辑：禁用内存限制是将值设置为`-1`，而不是将其设置为`0`。*

# php - php脚本在中间停止，没有错误

> ID：15790814
> 
> 赞同：0
> 
> 时间：2013-04-03T14:55:42.213
> 
> 标签：php, loops

我得到了迭代目录中所有图像并调整它们大小的脚本。
我得到了包含 2000 张图像的目录，这需要一些时间。

我运行脚本，发现它只调整了 40-50 个图像的大小，然后我再次运行它，它调整了 ANOTHER 40-50 个图像的大小，依此类推......

您是否知道为什么会发生这种情况以及如何让脚本运行直到它真正完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:58:40.563

这只是最大执行时间限制的问题

如果您正在运行一个需要执行未知时间或永远的脚本..您可以使用

```
set_time_limit(0); 
```

文档： http: [//php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:00:22.507

在该代码页面上添加：`set_time_limit(0);`应该运行直到完成。

# python - Python Multiprocessing - 将类方法应用于对象列表

> ID：15790816
> 
> 赞同：16
> 
> 时间：2013-04-03T14:55:42.900
> 
> 标签：python, multiprocessing

有没有一种简单的方法可以使用 Multiprocessing 来做同样的事情？

```
for sim in sim_list:
  sim.run() 
```

其中 sim_list 的元素是“模拟”对象，而 run() 是模拟类的一个方法，它**确实**修改了对象的属性。例如：

```
class simulation:
    def __init__(self):
        self.state['done']=False
        self.cmd="program"
    def run(self):
        subprocess.call(self.cmd)
        self.state['done']=True 
```

sim_list 中的所有 sim 都是独立的，因此该策略不必是线程安全的。

我尝试了以下，这显然是有缺陷的，因为参数是由 deepcopy 传递的，并且没有就地修改。

```
from multiprocessing import Process

for sim in sim_list:
  b = Process(target=simulation.run, args=[sim])
  b.start()
  b.join() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T21:19:53.180

做你想做的事情的一种方法是让你的计算类（`simulation`在你的情况下）成为`Process`. 正确初始化后，此类的实例将在单独的进程中运行，您可以按照您的需要从列表中设置一组实例。

这是一个示例，基于您上面写的内容：

```
import multiprocessing
import os
import random

class simulation(multiprocessing.Process):
    def __init__(self, name):
        # must call this before anything else
        multiprocessing.Process.__init__(self)

        # then any other initialization
        self.name = name
        self.number = 0.0
        sys.stdout.write('[%s] created: %f\n' % (self.name, self.number))

    def run(self):
        sys.stdout.write('[%s] running ...  process id: %s\n' 
                         % (self.name, os.getpid()))

        self.number = random.uniform(0.0, 10.0)
        sys.stdout.write('[%s] completed: %f\n' % (self.name, self.number)) 
```

然后只需制作一个对象列表并以循环开始每个对象：

```
sim_list = []
sim_list.append(simulation('foo'))
sim_list.append(simulation('bar'))

for sim in sim_list:
    sim.start() 
```

当您运行它时，您应该看到每个对象都在其自己的进程中运行。不要忘记`Process.__init__(self)`在你的类初始化中首先调用，然后再调用。

显然，在这个例子中我没有包含任何进程间通信。如果您的情况需要，您必须添加它（从您的问题中不清楚您是否需要它）。

这种方法对我很有效，我不知道有任何缺点。如果有人知道我忽略的隐患，请告诉我。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-14T06:24:55.593

对于那些将使用大型数据集的人来说，这`iterable`将是您的解决方案：

```
import multiprocessing as mp
pool = mp.Pool(mp.cpu_count())
pool.imap(sim.start, sim_list) 
```

# .net - 确定 System.ObsoleteAttribute 的原因

> ID：15790822
> 
> 赞同：0
> 
> 时间：2013-04-03T14:56:02.180
> 
> 标签：.net

是否有一种标准方法来确定为什么一个类被标记为过时（除了人类在谷歌中输入内容等）？如果您偶然发现有关某些内容已过时的警告，则显然需要了解下一点信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:00:47.467

`ObsoleteAttribute`有财产[`Message`](http://msdn.microsoft.com/en-us/library/system.obsoleteattribute.message.aspx)。

> 获取解决方法消息，包括替代程序元素的描述。

当您使用过时的类型或成员时，此消息会出现在编译器警告消息中。例如（`Message`以粗体突出显示）：

> 'System.IO.FileStream.FileStream(System.IntPtr, System.IO.FileAccess)' 已过时：'"**此构造函数已被弃用。请改用 new FileStream(SafeFileHandle handle, FileAccess access) [。http://go. microsoft.com/fwlink/?linkid=14202](http://go.microsoft.com/fwlink/?linkid=14202)** "'

不幸的是，我认为 .NET 通常不包含描述性很强的消息，因此如果您需要更多信息，尤其是*为什么*，最好咨询 MSDN 或 Google。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:01:33.747

> 如果您偶然发现有关某些内容已过时的警告，则显然需要了解下一点信息。

是的，这就是该[`Message`](http://msdn.microsoft.com/en-us/library/system.obsoleteattribute.message.aspx)属性要传达的内容。

[例如](https://code.google.com/p/noda-time/source/browse/src/NodaTime/Period.cs#216)，请参阅Noda Time 中的此示例：

```
[Obsolete("Use FromMilliseconds instead. This method's name was a typo [...]")]
public static Period FromMillseconds(long milliseconds) 
```

在使成员过时时，包含一条消息告诉人们他们应该如何避免过时的成员几乎*总是一个好主意。*

# jquery - 使用 jquery-autocomplete-rails ，无法显示自动完成列表以供选择

> ID：15790829
> 
> 赞同：0
> 
> 时间：2013-04-03T14:56:15.893
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我正在使用 jquery-autocomplete-rails 尝试动态填充现有机柜的下拉列表，以便在用户创建新设备时进行选择。我希望显示cabinet.names 但捕获表单所选项目的cabinet.id。

表单标签：

```
<%= autocomplete_field_tag 'cabinet', '', cabinets_autocomplete_cabinet_name_path %>
    <% f.hidden_field :cabinet_id, :id => "real cabinet id" %> 
```

设备和机柜控制器的开头：

```
class DevicesController < ApplicationController
autocomplete :device, :cabinet, :name
...
end

class CabinetsController < ApplicationController
  autocomplete :cabinet, :name
...
end 
```

来自 routes.rb 的相关路线：

```
get 'devices/autocomplete_cabinet_name'
get 'cabinets/autocomplete_cabinet_name' 
```

看起来命令没有失败，但是当我开始输入表单（在本例中为 0055）时，控制台会显示以下内容：

```
Started GET "/cabinets/autocomplete_cabinet_name?term=0055-" for 127.0.0.1 at 20
13-04-03 10:45:08 -0400
Processing by CabinetsController#show as JSON
  Parameters: {"term"=>"0055-", "id"=>"autocomplete_cabinet_name"}
  ←[1m←[36mUser Load (1.0ms)←[0m  ←[1mSELECT `users`.* FROM `users` WHERE `users
`.`id` = 2 LIMIT 1←[0m
  ←[1m←[35mCabinet Load (5.9ms)←[0m  SELECT `cabinets`.* FROM `cabinets` WHERE (
name LIKE '%0055-%')
Completed 200 OK in 52ms (Views: 1.0ms | ActiveRecord: 6.8ms) 
```

我猜用户查询与我的登录有关。

我已经使用以下资源寻求帮助： [https](https://github.com/crowdint/rails3-jquery-autocomplete-app) ://github.com/crowdint/rails3-jquery-autocomplete-app 对上一个教程的许多更正都在这里： [rails3-jquery-autocomplete](https://stackoverflow.com/questions/11705158/rails3-jquery-autocomplete)

如果可以，请提供帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:09:03.843

我安装了一个没有主题的 jquery 包。因此没有显示任何内容。

# php - 在表中的两个列的组合上处理具有持久 UNIQUE 约束的重复项？

> ID：15790832
> 
> 赞同：0
> 
> 时间：2013-04-03T14:56:20.397
> 
> 标签：php, mysql, redbean

我有许多要插入到 MYSQL 表中的记录。我正在使用 PHP。其中一些是重复的。我正在使用 redbeanPHP orm ( [http://redbeanphp.com/](http://redbeanphp.com/) )

我的策略是使用由 2 列（ FIELD A 和 DUPLICATENUMBER ）组成的复合 UNIQUE 约束。创建每条记录时 DUPLICATENUMBER = 0。

然后尝试插入记录如下：

```
try {             
                 $id = R::store($record);
} catch (Exception $exc) {
--------------- 
```

如果尝试插入重复项，则会生成错误。然后我想将 DUPLICATENUMBER 增加 1，然后重新插入。这一次，如果 FIELD A 和 DUPLICATENUMBER 必须相同才能使唯一约束保持不变，则它应该可以工作，因为增加 DUPLICATENUMBER 应该会破坏唯一性。我应该发出什么 MYSQL 命令来设置这个组合的唯一约束？

提前致谢，

账单

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:00:19.983

您可以选择与 FIELD A 匹配的记录数，并将其设置为 DUPLICATENUMBER。

# web-services - org.jboss.ws.WSException：无法唯一识别操作：

> ID：15790834
> 
> 赞同：0
> 
> 时间：2013-04-03T14:56:27.710
> 
> 标签：web-services, jakarta-ee, soap, jax-ws

我正在运行 JBoss 4.2.2、Java 1.6 和 Ubuntu。我正在尝试从 SOAPUI 调用 Web 服务。我已经编写了其他 Web 服务端点并成功地将客户端构建到我的 Web 应用程序中。我还在一个独立的 Java 应用程序中为这个客户端使用相同的代码来调用 Web 服务，一切都很好，但是由于某种原因，当我调用它时我得到了这个异常：

```
2013-04-03 16:49:46,358 ERROR [org.jboss.ws.core.jaxws.SOAPFaultHelperJAXWS] SOAP request exception
org.jboss.ws.WSException: Cannot uniquely indentify operation: 
        at org.jboss.ws.metadata.umdm.EndpointMetaData.getOperation(EndpointMetaData.java:402)
        at org.jboss.ws.core.soap.SOAPMessageDispatcher.getDispatchDestination(SOAPMessageDispatcher.java:119)
        at org.jboss.ws.core.soap.SOAPMessageImpl.getOperationMetaData(SOAPMessageImpl.java:379)
        at org.jboss.ws.core.server.ServiceEndpointInvoker.getDispatchDestination(ServiceEndpointInvoker.java:428)
        at org.jboss.ws.core.server.ServiceEndpointInvoker.invoke(ServiceEndpointInvoker.java:179)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.processRequest(RequestHandlerImpl.java:421)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleRequest(RequestHandlerImpl.java:286)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.doPost(RequestHandlerImpl.java:196)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:122)
        at org.jboss.wsf.stack.jbws.EndpointServlet.service(EndpointServlet.java:84)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:173)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:543)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:437) 
```

有人能帮我吗？

# python - 使用 python 2.7 将 .CSV 文件转换为点要素类

> ID：15790835
> 
> 赞同：0
> 
> 时间：2013-04-03T14:56:28.427
> 
> 标签：python, csv, python-2.7

我有一个包含 75 列和近 4000 行的 .CSV 文件。我需要为整个 .CSV 文件创建一个 shapefile（点），每列作为一个字段。所有 75 列都需要转移到新的 shapefile 中，每列代表一个字段。

关于这个话题似乎已经有很多了，但是我能找到的所有内容都可以找到包含少量列的 .csv 文件。

[https://gis.stackexchange.com/questions/17590/why-is-an-extra-field-necessary-when-creating-point-shapefile-from-csv-files-in](https://gis.stackexchange.com/questions/17590/why-is-an-extra-field-necessary-when-creating-point-shapefile-from-csv-files-in)

[https://gis.stackexchange.com/questions/35593/using-the-python-shape-library-pyshp-how-to-convert-csv-file-to-shp](https://gis.stackexchange.com/questions/35593/using-the-python-shape-library-pyshp-how-to-convert-csv-file-to-shp)

这个脚本看起来很接近我需要完成的工作，但它再次为 .CSV 中的每一列添加了一个字段，在这个例子中，它有三个字段；日期、纬度、经度。

```
import arcpy, csv
arcpy.env.overwriteOutput = True

#Set variables
arcpy.env.workspace = "C:\\GIS\\StackEx\\"
outFolder = arcpy.env.workspace
pointFC = "art2.shp"
coordSys = "C:\\Program Files\\ArcGIS\\Desktop10.0\\Coordinate Systems" + \
           "\\Geographic Coordinate Systems\\World\\WGS 1984.prj"
csvFile = "C:\\GIS\\StackEx\\chicken.csv"
fieldName = "DATE1"

#Create shapefile and add field
arcpy.CreateFeatureclass_management(outFolder, pointFC, "POINT", "", "", "", coordSys)
arcpy.AddField_management(pointFC, fieldName, "TEXT","","", 10)

gpsTrack = open(csvFile, "r")

headerLine = gpsTrack.readline()
#print headerLine
#I updated valueList to remove the '\n'
valueList = headerLine.strip().split(",")
print valueList
latValueIndex = valueList.index("LAT")
lonValueIndex = valueList.index("LON")
dateValueIndex = valueList.index("DATE")

# Read each line in csv file
cursor = arcpy.InsertCursor(pointFC)
for point in gpsTrack.readlines():

   segmentedPoint = point.split(",")
   # Get the lat/lon values of the current reading                    
   latValue = segmentedPoint[latValueIndex]
   lonValue = segmentedPoint[lonValueIndex]
   dateValue = segmentedPoint[dateValueIndex]
   vertex = arcpy.CreateObject("Point")
   vertex.X = lonValue
   vertex.Y = latValue
   feature = cursor.newRow()
   feature.shape = vertex
   feature.DATE1 = dateValue
   cursor.insertRow(feature)

del cursor 
```

有没有一种更简单的方法可以使用 python 创建 shapefile，而无需为 .CSV 文件中的所有 75 列添加字段？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:32:02.380

只需选择您需要的列；您*不需要*使用所有列。

使用[`csv`模块](http://docs.python.org/2/library/csv.html)读取文件，然后从每一行中挑选出 2 个值：

```
import csv

cursor = arcpy.InsertCursor(pointFC)
with open('yourcsvfile.csv', 'rb') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        point = arcpy.CreateObject("Point")
        point.X, point.Y = float(row[5]), float(row[27])  # take the 6th and 28th columns from the row
        cursor.insertRow(point) 
```

# sql - 将列中的所有值相加

> ID：15790837
> 
> 赞同：1
> 
> 时间：2013-04-03T14:56:30.093
> 
> 标签：sql, sql-server, database, count

> **可能重复：** [SQL - 将单个表中一列的所有行值相加](https://stackoverflow.com/questions/2628159/sql-add-up-all-row-values-of-one-column-in-a-singletable)

这听起来可能是一个非常简单的问题，但我无法找到有效的答案。

我在表中有一个名为“timeId”“通话时间”“保持时间”和“呼叫计数”的列

此表中有 200 多行，每行都有一个调用计数。例如

```
TimeId     talktime    holdtime   CallCount    
1            20           40         3
2            105          9          6
3            433          43         12
4            403          44         15
5            199          85         22 
```

如何运行查询以将呼叫计数中的所有值相加？但没有分组？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:59:16.300

如果你只想得到所有计数的总和，你可以使用这个：

```
SELECT SUM(CallCount) FROM MyTbl; 
```

如果您想将总计与其他值一起使用，可以使用 OVER 子句：

```
SELECT *, SUM(CallCount)OVER()
FROM MyTbl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:58:22.820

```
SELECT sum(CallCount) FROM myTable 
```

假设`CallCount`是数值数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:58:32.180

```
Select [Total call count] = Sum([call count]) From [your table] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:58:35.050

`SELECT SUM(CallCount) FROM tblname`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:58:47.677

```
SELECT  a.*,
        b.TotalCount
FROM    TableName a
        CROSS JOIN
        (
            SELECT  SUM(CallCount) TotalCount -- Calculates all CallCount
            FROM    TableName
        ) b 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/04be1/1)

输出

```
╔════════╦══════════╦══════════╦═══════════╦════════════╗
║ TIMEID ║ TALKTIME ║ HOLDTIME ║ CALLCOUNT ║ TOTALCOUNT ║
╠════════╬══════════╬══════════╬═══════════╬════════════╣
║      1 ║       20 ║       40 ║         3 ║         58 ║
║      2 ║      105 ║        9 ║         6 ║         58 ║
║      3 ║      433 ║       43 ║        12 ║         58 ║
║      4 ║      403 ║       44 ║        15 ║         58 ║
║      5 ║      199 ║       85 ║        22 ║         58 ║
╚════════╩══════════╩══════════╩═══════════╩════════════╝ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T15:00:00.973

根据您的 SQL Server 版本，您可能可以使用[`SUM() Over()`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)窗口函数：

```
select Timeid, 
  talktime, 
  holdtime, 
  callcount,
  sum(callcount) over() TotalCalls
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5fccb/1)

# ruby - 如何在 Ruby 中生成随机混合字母和数字

> ID：15790841
> 
> 赞同：4
> 
> 时间：2013-04-03T14:56:44.797
> 
> 标签：ruby

到目前为止，我有以下代码，它只生成字母。我正在寻找字母和数字

```
#Generate random 8 digit number and output to file
    output = File.new("C:/Users/%user%/Desktop/Strings.txt", "w")

    i = 0
     while i < 500
        randomer = (0...8).map{65.+(rand(26)).chr}.join
        output << randomer
        output << "\n"
        i = i+1
     end

    output.close 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:03:39.333

这个怎么样：

```
def random_tuple(length)
    letters_and_numbers = "abcdefghijklmnopqrstuvwxyz0123456789"
    answer = ""
    length.times { |i| answer << letters_and_numbers[rand(36)] }
    answer
end

output = ""
500.times { |i| output << random_tuple(8) + "\n" } 
```

您也可以让函数附加换行符，但我认为这种方式更通用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T15:03:48.630

```
(('a'..'z').to_a + ('0'..'9').to_a).sample( 8 ).join 
```

这*是*随机的，但不会重复使用任何数字/字母，因此它不会涵盖所有可能的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:02:55.517

你可以做这样的事情

```
i = 0
while i < 500
    randomer = (1..8).map { (('a'..'z').to_a + ('0'..'9').to_a)[rand(36)] }.join
    output << randomer
    output << "\n"
    i = i+1
end

output.close 
```

享受。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T15:14:01.517

使用`SecureRandom.hex(10)`他在 0-9 和 af 中生成字母和数字

或者

```
SecureRandom.base64.delete('/+=')[0, 8] 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-03T15:15:05.843

所有数字和字母都以 36 为基数使用：

```
max = 36**8
500.times.map{ rand(max).to_s(36).rjust(8,'0') } #rjust pads short strings with '0' 
```

# java - 从通过 Runtime...exec("..") 在 java 文件中加载的已启动 jar 文件的触发方法

> ID：15790842
> 
> 赞同：0
> 
> 时间：2013-04-03T14:56:47.040
> 
> 标签：java, jar, runtime.exec, inter-process-communicat

这就是我想要做的：

我需要从一个 java 文件中启动两个 jar 文件，并且当我从第二个 jar 文件中读取特定状态时，我想从第一个启动的 jar 文件中调用一个方法。我想出了如何从那个 jar 文件中读取输出流。（我也知道，打印出来的不是jar文件，而是jar文件中的类。我只是用这种方式阐述了这个问题，以清楚地解释我使用一个java文件来启动两个jar文件）

```
long l = System.currentTimeMillis();
Process theProcess1 = Runtime.getRuntime().exec("java -jar \"C:/test.jar\"");

inStream = new BufferedReader(new InputStreamReader( theProcess1.getInputStream() ));  
... 
```

我现在可以读取 jar 文件的输出。

在一个特殊的关键字上，我希望第一个启动的 jar 运行某个方法（非静态）。

例如：

```
if(theProcess2 output a certain statuscode)
{
   start a certain Method from executed jar file "in" theProcess1

} 
```

我认为可以通过使用 theProcess1 输出来实现，但我不知道如何在 jar 文件中读取此流。（jar 文件不知道它是通过 java 文件启动的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:01:46.967

您无法访问另一个 java 进程类加载器类定义。有关如何正确加载 jar 的信息，请参阅此问题：[如何在运行时加载 jar 文件](https://stackoverflow.com/questions/194698/how-to-load-a-jar-file-at-runtime)

加载 jar 后，您可以使用 Class.forName 访问第二个 jar 所需的类

编辑：这是一个小片段，可帮助您阅读过程标准输出。

```
//open a buffered reader on process std output
    InputStreamReader ir = new InputStreamReader(theProcess1.getInputStream());
    BufferedReader in = new BufferedReader(ir);

   //read it line per line
    String line;
    while ((line = in.readLine()) != null) {

       System.out.println(line);

    } 
```

# java - Eclipse 不在模拟器中启动 android 应用程序

> ID：15790847
> 
> 赞同：1
> 
> 时间：2013-04-03T14:56:59.417
> 
> 标签：java, android, eclipse, avd

我正处于 android 编程的开始阶段。

我创建了一个在通过 AVD 管理器启动时运行良好的 AVD。我还“创建”了一个 hello-world 应用程序作为一个小测试。

当我尝试将应用程序作为 android 应用程序运行时，没有任何反应。控制台中没有输出，模拟器没有启动（或在已经启动时启动应用程序），没有消息，什么都没有。谁能帮我？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:35:05.300

不确定这是否会对您有所帮助，但在我们的 android 实验室会议期间，一些计算机遇到了更棘手的问题。如何修复它是通过执行以下操作：

1.  在“运行方式”按钮旁边，有一个小箭头，点击它。
2.  选择“运行配置”。
3.  在左侧，双击“Android 应用程序”。
4.  右侧应该有 3 个选项卡（Android、Target、Common）
    *   在“Android”下，浏览并选择要运行的项目。
    *   启动操作：选择“启动默认活动”。
5.  单击“目标”选项卡。
    *   应该有一个 AVD 表，其中包含您通过管理器创建的 Android 虚拟设备。如果没有，请点击刷新或单击“管理器”以确保您已创建它，然后再次刷新。
    *   如果有 AVD，它的左侧应该会出现一个小复选框，单击它，然后单击“运行”。

这解决了大多数学生的问题，希望它也适用于您的情况。如果没有，那么我希望有人可以为您解答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-05T16:44:23.873

我有同样的问题。我认为这是因为您创建了一个带有空白活动的项目。所以当应用程序启动时它没有任何事情可做..

要解决这个问题，只需在清单文件中添加一个活动、意图和一个类别并运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:05:44.710

如果您使用的是 Windows，请在 Eclipse 中将您的 SDK 路径指定为 Windows->preferences ->Android->SDK Location

在这里你给你的 sdk 路径。

# kendo-ui - kendoGrid 是否有 scrollIntoView 技术

> ID：15790849
> 
> 赞同：0
> 
> 时间：2013-04-03T14:57:00.447
> 
> 标签：kendo-ui, kendo-grid

我有一个 kendoGrid 显示具有 200 行和 50 列的数据源。有垂直和水平滚动条，这是需要的。

如何使网格滚动查看特定的列、行或行&列？

两个用例是：

1.  从菜单中选择列名 Z，跳转到 Z 列（将其滚动到视图中）
2.  数据源为 FOO 的网格会滚动，直到 X 列位于视图中的最左侧。然后将网格替换为数据源为 BAR 的新网格。如果 BAR 包含 X 列，那么我想将其滚动到视图中。

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:58:40.727

您需要做的第一件事是找到单元格的位置。如果您知道行号和列号，您可以执行以下操作：

```
var col = 30;
var row = 100;
var pos = $("tr:nth(" + (row - 1) + ")", grid.tbody).find("td:nth(" + (col - 1) + ")").position(); 
```

然后你必须滚动，你可以直接使用：

```
$(grid.tbody).closest(".k-grid-content").scrollTop(pos.top).scrollLeft(pos.left); 
```

或者`animate`它使用：

```
$(grid.tbody).closest(".k-grid-content").animate({
    scrollTop : pos.top,
    scrollLeft: pos.left
}, 2000); 
```

# java - 是否可以在 Google App Engine 中使用 File Appender？

> ID：15790855
> 
> 赞同：0
> 
> 时间：2013-04-03T14:57:16.893
> 
> 标签：java, google-app-engine, log4j, appender, rollingfileappender

所以我正在尝试实现 Log4j 功能 File Appender，但是我似乎无法让 appengine 来创建 log4j 文件。我拥有正确的权限，并且我希望它所在的文件夹确实存在。我无法解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:15:12.610

这是一个基本的 App Engine 限制：您不能写入文件系统。

> App Engine 应用程序不能：
> 
> *   写入文件系统。应用程序必须使用 App Engine 数据存储来存储持久数据。允许从文件系统读取，并且与应用程序一起上传的所有应用程序文件都可用。

[https://developers.google.com/appengine/docs/java/runtime](https://developers.google.com/appengine/docs/java/runtime)

# java - 弹簧配置xml文件

> ID：15790873
> 
> 赞同：1
> 
> 时间：2013-04-03T14:58:05.760
> 
> 标签：java, spring

我正在配置一个项目，但 spring 配置文件给出了错误，如图所示：![在此处输入图像描述](https://i.stack.imgur.com/XbKJd.png)

我的弹簧配置 cxf.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:jaxws="http://cxf.apache.org/jaxws"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://cxf.apache.org/jaxws
  http://cxf.apache.org/schemas/jaxws.xsd"> 
```

```
<jaxws:inInterceptors>
 <bean class="org.apache.cxf.binding.soap.saaj.SAAJInInterceptor"/>
 <bean class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
   <constructor-arg>
     <map>
       <entry key="action" value="UsernameToken"/>
       <entry key="passwordType" value="PasswordText"/>
       <entry key="passwordCallbackClass" value="com.nightingale.cxf.servlet.PWCallback"/>
     </map>
   </constructor-arg>
 </bean>
</jaxws:inInterceptors>
<jaxws:properties>
    <entry key="faultStackTraceEnabled" value="true"/>
</jaxws:properties> 
```

# c# - JavaScriptSerializer 反序列化返回 0 结果列表

> ID：15790878
> 
> 赞同：1
> 
> 时间：2013-04-03T14:58:09.173
> 
> 标签：c#, json, javascriptserializer

试图将 json 字符串反序列化为列表。Json 字符串不为空。但在反序列化后，列表返回 0 个项目。

这是我的课。

```
 [Serializable]
    public class Products : GenericItem
    {
        public List<string> Images { get; set; }
        public double Price { get; set; }
        public double SalePrice { get; set; }

        public bool OnSale
        {
            get { return (SalePrice < Price); }
        }

        public string Description { get; set; }

        public GenericItem Brand { get; set; }

        public List<GenericItem> Shops { get; set; }

        public string ProductCode { get; set; }

        public Colour Colour { get; set; }
    }

    [Serializable]
    public class Colour : GenericItem
    {
        public string Code { get; set; }
    }

    [Serializable]
    public class GenericItem
    {
        public string Name { get; set; }

        public string Permalink { get; set; }
    } 
```

这是我的 json 字符串。

```
"{\"Products\":[{\"_id\":\"515c151f7be95925d4ee794d\",\"Name\":\"CAT Formation Steel Toe - Boots  BLACK\",\"Description\":\"CAT Formation Steel Toe Boots With heavy-duty hardwearing uppers, high grip rubber outsoles and a steel toe cap, these CAT Formation Steel Toe Boots are perfect for work. CAT Formation Steel Toe Boots are ankle length and fasten with strong laces for a secure fit. The boots are available in black and have a casual multi-panelled trainer-style appearance, as well as CAT branding on the tongue and heel.\",\"ProductCode\":\"D0073\",\"Images\":[\"18000.jpg\",\"18001.jpg\",\"18002.jpg\"],\"Brand\":{\"_id\":\"5142ca0c7be95917acce7755\",\"Name\":\"CAT\",\"Permalink\":\"cat-footwear\"},\"Shops\":[{\"_id\":\"5142ca237be95917acce7999\",\"Name\":\"Mens\",\"Styles\":null,\"Permalink\":\"Mens\"}],\"Permalink\":\"cat-formation-steel-toe-boots-black\",\"Price\":89.99,\"SalePrice\":89.99}]}" 
```

这就是我反序列化 json 字符串的方式。

```
 var jss = new JavaScriptSerializer();
            jss.MaxJsonLength = Int32.MaxValue;
            var results = jss.Deserialize<List<Products>>(json); 
```

列表总是返回 0 个结果。

有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:01:03.027

您的 JSON 不是列表，而是具有属性 Products 的对象，即列表。

您可以将其反序列化为：

```
public class MyClass
{
    public List<Products> Products { get; set; }
}
...

jss.Deserialize<MyClass>(json); 
```

# c# - 使用反射设置复合类的值

> ID：15790880
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:58:16.093
> 
> 标签：c#, class, reflection, composite

我正在尝试创建一个对象的实例，该对象也包含其中的类：

```
[DataContract(Name = "share", Namespace = "")]
public class RequestShareDocument
{
    [DataMember(Order = 0)]
    public string profile_name { get; set; }
    [DataMember(Order = 1)]
    public List<RequestSigner> signers {get; set;}
    [DataMember(Order = 2)]
    public bool createcopy { get; set; }
}

[DataContract(Name = "signer", Namespace = "")]
public class RequestSigner
{
    [DataMember(Order = 0)]
    public string email { get; set; }
    [DataMember(Order = 1)]
    public string order { get; set; }
    [DataMember(Order = 2)]
    public string reminder { get; set; }
    [DataMember(Order = 3)]
    public RequestSignerPermissions permissions { get; set; }
    [DataMember(Order = 4)]
    public string signature_field { get; set; }
}

[DataContract(Name = "permissions", Namespace = "")]
public class RequestSignerPermissions
{
    [DataMember(Order = 0)]
    public bool save_locally {get;set;}
    [DataMember(Order = 1)]
    public string open_password { get; set; }
    [DataMember(Order = 2)]
    public DateTime accessible_after { get; set; }
    [DataMember(Order = 3)]
    public DateTime accessible_before { get; set; }
    [DataMember(Order = 4)]
    public string certify_level { get; set; }
} 
```

我需要创建一个类的实例并序列化为 XML，但我不知道该怎么做？

我能够创建一个类的实例，但是当涉及到`List<T>`属性时，我无法创建它。我已经尝试过这个：

```
if (typeof(IEnumerable).IsAssignableFrom(item.PropertyType))
    IList list = (IList)Activator.CreateInstance(typeof(List<>)); 
```

...并序列化我正在使用：

```
XmlSerializer mySerializer = new XmlSerializer(typeof(T), new
    XmlRootAttribute(RootElementName));       
StringWriter sww = new StringWriter();
XmlWriter writer = XmlWriter.Create(sww, new XmlWriterSettings()
    { OmitXmlDeclaration = true, Indent = true });
mySerializer.Serialize(writer, item);
writer.Close();
sww.Close(); 
```

问题是当我循环所有属性并到达`List`我不知道如何创建`List`. 有可能还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:44:26.040

如果我理解正确，则此代码可以满足您的要求：

```
public static object InitializeTarget(Type type)
    {
        object target = CreateObject(type);
        foreach (PropertyInfo propertyInfo in type.GetProperties())
        {
            if (propertyInfo.PropertyType.IsClass && propertyInfo.CanWrite
                && propertyInfo.PropertyType != typeof(string)
                && (propertyInfo.IsDefined(typeof(DataMemberAttribute), true)))
                propertyInfo.SetValue(target, InitializeTarget(propertyInfo.PropertyType), null);
        }
        return target;
    }

    public static object CreateObject(Type type)
    {
        if (typeof(IList).IsAssignableFrom(type) && type.IsGenericType)
        {
            Type[] genericArguments = type.GetGenericArguments();
            if (genericArguments.Length == 1)
            {
                var list = (IList)Activator.CreateInstance(type);
                //Adding default value
                list.Add(CreateObject(genericArguments[0]));
                return list;
            }
        }
        //If the object is only to serialize, you can use it
        return FormatterServices.GetUninitializedObject(type);
        //or
        //            return Activator.CreateInstance(type);
    } 
```

# c++ - 错误“字段类型不完整”

> ID：15790886
> 
> 赞同：0
> 
> 时间：2013-04-03T14:58:24.553
> 
> 标签：c++, opencv, wrapper, shared-ptr

我正在尝试编写 IplImage 包装器。

这是我的代码：

```
class DrawingDetector
{
public:
    typedef boost::shared_ptr<IplImage> ipl_image_ptr_t;

    DrawingDetector(){}
    DrawingDetector::DrawingDetector(IplImage* img) : m_image(img, ipl_deleter){}

private:

    static void ipl_deleter( IplImage* ipl_img )
    {
        if( ipl_img )
        {
            cvReleaseImage( &ipl_img );
        }
    }

    ipl_image_ptr_t m_image; // compiler error "field ‘m_image’ has incomplete type"

}; 
```

我有以下编译错误“字段'm_image'的类型不完整”。我的编译器是 gcc 4.4。

为什么我不能创建一个空的 shared_ptr？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:02:27.287

由于该字段具有 type `boost::shared_ptr<IplImage>`，因此您似乎没有包含`boost/shared_ptr.hpp`和/或标题定义`IplImage`. 因为`IplImage`只提供一个前向声明就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:01:06.467

编译器看不到 boost 共享 ptr 或 IplImage 定义。您应该包括相应的标题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:03:42.857

“不完整类型”是指已声明但未定义的类型。这可能意味着您不包括`boost/shared_ptr.hpp`提供定义的 。

# c# - MVC Caching of frequently accessed data that would very infrequently change

> ID：15790889
> 
> 赞同：0
> 
> 时间：2013-04-03T14:58:26.747
> 
> 标签：c#, model-view-controller, caching

I'm new to the concept of caching data and I wanted to ask if there are any issues I"m overlooking with the strategy I"m building for caching data in my MVC web application from my database. I want to stress that basically the data I'm looking at caching is practically read only, and would only be updated very very infrequently (coinciding with code upgrades where the app would be being refreshed).

From what I have been able to research I was planning on using a static class to serve as a helper for building and maintaining the cache. The below code shows how I would build the cache from a database table which would contain the different baseball card condition grades (Mint, Near Mint, etc)

Static CacheHelper class:

```
public static class CacheHelpers
{
    private static HashSet<baseballcardcondition> _CardConditionsCache = null;
    public static HashSet<baseballcardcondition> CardConditionsCache
    {
        get
        {
            if (_CardConditionsCache == null)
            {
                _CardConditionsCache = (HttpContext.Current.Cache["CardConditionsCache"] as HashSet<baseballcardconditions>);
                if (_CardConditionsCache == null)
                {
                    mydbEntities db = new mydbEntities();
                    _CardConditionsCache = new HashSet<baseballcardconditions>(db.baseballcardconditions);
                    HttpContext.Current.Cache.Insert("CardConditionsCache", _CardConditionsCache);
                }
            }
            return _CardConditionsCache;
        }
        set
        {
            HttpContext.Current.Cache.Insert("CardConditionsCache", _CardConditionsCache);
        }
    }//public static HashSet<baseballcardconditions> CardConditionsCache
}//public static class CacheHelpers 
```

Later I would be using this data to build a formatted string for a jqGrid grid (a jQuery javascript plugin for displaying tabular data) and would access it via:

```
 //cardConditionSelectListHelperString
        string tempString = "";

        foreach (var keyPair in CacheHelpers.CardConditionsCache)
        {
            tempString += keyPair.IdBaseballCardCondition + ":" + keyPair.Condition + ";";
        } 
```

Does this look like a solid, robust, and thread safe way to manage my cache for my MVC web application? I would probably expand my CacheHelpers class to have other cached Hashsets so I don't have to hit the database for this read only, basically static data.

Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:10:24.860

“这看起来像是一种可靠、健壮且线程安全的方式来管理我的 MVC Web 应用程序的缓存吗？”

不，它没有。例如，您如何保持较小的数据大小？您应该从缓存中刷新未使用的数据（检查：http: [//msdn.microsoft.com/en-us/library/dd632018.aspx](http://msdn.microsoft.com/en-us/library/dd632018.aspx)）。此外，它不是线程安全的。

我认为创建自己的缓存解决方案是典型的“重新邀请轮子”场景，市场上有很多缓存（甚至是分布式缓存） - 此外其中一些是免费的。一个好的缓存解决方案比刚开始使用一些静态字段要复杂得多。

# android - Check words from database

> ID：15790890
> 
> 赞同：0
> 
> 时间：2013-04-03T14:58:28.850
> 
> 标签：android, sql

i am new to android development,so dint get me wrong. I am developing an application in which a text is generated.which is normally a word. The word is checked in a database for is corresponding value pair. Here the word is the key and its corresponding value is the value . Since the text is auto generated it sometimes goes wrong(mis spelled). How do i perform a check of auto generated word to match with the mostly matched letters in the database of key word.

example: auto-generated word(key) - value americ: america : a country Here the auto generatd word is americ(key) is not matched since it only contains america in its pair set.it need to be corrected as america.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:44:04.420

您可能正在使用 SQLite。你最好的选择是`soundex`，[这里](http://www.sqlite.org/lang_corefunc.html)描述。

Soundex 有很多缺点，但它可能会让您入门。如果您想要一个真正的度量，那么请使用 Levenshtein 距离，它没有内置在数据库中（据我所知）。

# java - Java code's CPU usage changing

> ID：15790898
> 
> 赞同：0
> 
> 时间：2013-04-03T14:58:42.003
> 
> 标签：java

I ran into this observation when I was trying to give a rough estimate of my code's runtime: The CPU usage stayed at around 10% for the first part of the code, which involved traversing 2 strings and tossing things into a hashset. When the code reached the second part (2 nested for loops, plus a gigantic array allocation), the CPU usage skyrocketed to 50%.

I don't think I did anything related to multithreading. Also if I slightly modify the first part (something really simple like adding another for loop), the CPU usage varies a lot too. Why is this happening? A bit curious about who's utilizing the CPU consumption.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:02:09.507

这不一定是您正在运行的代码和 CPU 使用率之间的直接比较，因为 JVM 在管理垃圾收集时会根据当时堆中的内容来波动 CPU 使用率。如果它突然上升到 50%，然后又回落，这可能是巧合，因为与此同时垃圾收集开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:12:30.240

您可以通过运行 jvisualvm.exe 来获取更多详细信息，该文件位于您的 jdk bin 文件夹中。我不确定有多少开箱即用的 CPU 使用信息，但至少有一些插件可以为您提供 CPU 使用信息。根据 david99world 的回答，这也是一种查看堆使用情况的图形方式。

[http://visualvm.java.net/index.html](http://visualvm.java.net/index.html)

# sql - 选择计数（*）不适用于 perl DBI

> ID：15790899
> 
> 赞同：2
> 
> 时间：2013-04-03T14:58:43.983
> 
> 标签：sql, perl, odbc, dbi

我的代码的目标是根据一个特定参数返回表中行数的计数。

这是有效的代码：

```
######### SQL Commands
### Connect to the SQL Database
my $dbh = DBI->connect($data_source, $user, $pass)
    or die "Can't connect to $data_source: $DBI::errstr";

### Prepare the SQL statement and execute
my $sth1 = $dbh->selectrow_array("select count(*) from TableInfo where Type = '2'")
or die "Can't connect to $data_source: $DBI::errstr";

### Disconnect from Database statements are completed.
$dbh->disconnect;
######### end SQL Commands 

print $sth1; 
```

这将成功打印一个数字，在这种情况下为 189。当我尝试使用相同的代码但更改“Type = '2'”（应返回值 2000）时，我收到以下错误：

```
DBD::ODBC::db selectrow_array failed: [Microsoft][ODBC Driver 11 for SQL Server]Numeric value out of range (SQL-22003) at ./getTotalExpSRP.cgi line 33, <DATA> line 225.
Can't connect to dbi:ODBC:BLTSS_SRP: [Microsoft][ODBC Driver 11 for SQL Server]Numeric value out of range (SQL-22003) at ./getTotalExpSRP.cgi line 33, <DATA> line 225. 
```

我到处搜索，但我不知道为什么会发生这种情况。从问题的症状来看，我猜想返回的结果的大小是有限制的，但我找不到任何支持证据。

我已经在我的 Microsoft SQL 2005 服务器上运行了跟踪，并且可以确认 sql 语句正在正确运行且没有错误。

我查看了我的 odbc 跟踪日志，但不幸的是，在将工作示例与失败示例进行比较时，我无法得出任何有用的信息。

任何帮助，将不胜感激！！

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:43:55.400

现在我们已经看到了我可以解释的痕迹。DBD::ODBC 调用 SQLDescribeCol 并被告知：

DescribeCol column = 1，name = ，namelen = 0，type = unknown(0)，precision/column size = 10，scale = 0，nullable = 1 display size = 11

然后它调用 SQLColAttribute 并被告知列大小为 4。由于列类型未知（我不确定驱动程序为什么这样做） DBD::ODBC 决定将列绑定为 char(4) 等由于计数 > 3 位，它会溢出。

这里使用的 DBI 和 DBD::ODBC 版本真的很旧，我怀疑最新版本会更好地处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:20:46.570

`Numeric value out of range`是类型转换错误。应该是`TYPE`一个字符/字符串的数字？如果应该是数字，请使用数字

```
my $sth1 = $dbh->selectrow_array(
    "select count(*) from TableInfo where Type=2")  # Type=2, not Type='2' 
```

或者使用占位符，让 Perl 和数据库驱动程序担心类型转换

```
my $sth = $dbh->prepare("select count(*) from TableInfo where Type=?");
$sth->execute(2);
$sth->execute('2');     # same thing
my $st1 = $sth->fetchall_arrayref; 
```

# scala - LIFT: preventing orphaned records when destroying an object

> ID：15790901
> 
> 赞同：0
> 
> 时间：2013-04-03T14:58:49.317
> 
> 标签：scala, record, lift

i am currently learning the lift framework, and have a question regarding persistence in associated records.

if i had a model, say, artist. i also have a model called album, and one called track. an artist can have many albums, which have many tracks.

is there a way in the model to set up the dependency such that when i deleted an artist, all of their albums, and in turn, all of their tracks were deleted?

i am planning on using record with mongodb.

thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:29:16.430

Lift 没有任何中央或官方数据库包装器。你可以使用任何你想要的。例如，我使用纯 squeryl。

如果您在谈论记录-squeryl——那么主文档页面显示了一个一对多关系的示例：[https ://www.assembla.com/wiki/show/liftweb/Squeryl](https://www.assembla.com/wiki/show/liftweb/Squeryl)

如果您在谈论 mongodb+record - 那么我会看到这样的页面[https://www.assembla.com/wiki/show/liftweb/MongoDB](https://www.assembla.com/wiki/show/liftweb/MongoDB) 可以适合您。

[也不是说周围也有 Rogue，如果您使用邮件列表https://groups.google.com/forum/#!forum/liftweb](https://groups.google.com/forum/#!forum/liftweb)，问题会更快得到回答。AFAIK，这是询问电梯问题的主要方式。

# amazon-web-services - 在对象级别限制联合 IAM 用户对 Amazon S3 的访问

> ID：15790908
> 
> 赞同：4
> 
> 时间：2013-04-03T14:59:02.520
> 
> 标签：amazon-web-services, amazon-s3, federated-identity, amazon-iam

我正在围绕使用 S3 进行一些研究。我想要实现的基本上是以与文件系统相同的方式控制对 S3 存储桶中对象的访问，但对于 IAM 联合用户。

让我们假设以下场景

```
 Bucket  
     |- File 1.txt -> ACL: Read: User1; Read: User 2
     |- File 2.txt -> ACL: Read: Everyone; Read, Write: User 2
     |- File 3.txt -> ACL: Read: Group 1; Read, Write: User 2 
```

可以使用 ACL 和 Amazon“本机”用户和组来实现这种配置。另一方面，对于联合用户，我唯一能找到的就是生成具有分配存储桶策略的临时令牌。

如果我理解正确，存储桶策略与 ACL 的工作方式相反（定义用户有权访问哪些对象，而 ACL 定义谁有权访问该对象）

我的问题是。是否可以在 ACL 中分配联合用户（或以其他方式为联合用户实现相同的目标）？

**我想在文件系统上实现相同的行为，在文件系统上您有用户在组中，并且在您标记哪些组可以访问它们的对象上**

假设字段“x-amz-meta-seclevels”包含有权访问文件的组（Group1、Group2、admin3rdfloor），并附有提供的策略（这是不正确的，但我想描述一下我的想法） IAM 联合用户，我可以授予此用户访问在 x-amz-meta-seclevels 字段中包含 admin3rdfloor 值的所有文件的权限。

```
{
'Statement': [
    { 
        'Sid': 'PersonalBucketAccess', 
        'Action': [ 
            's3:GetObject' 
            ],
        'Effect': 'Allow', 
        'Resource': 'arn:aws:s3:::MyBucketName' 
        'Condition':{
        'StringLike':{
           's3:x-amz-meta-seclevels':'admin3rdfloor'
        }
     }

    }
] 
```

}

**这是否可以通过任何方式实现？**

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:08:21.033

如果我正确理解您所需的配置，AWS 可能刚刚发布了启用此方案的功能，请参阅[AWS 访问控制策略中的变量](http://aws.typepad.com/aws/2013/04/variables-in-aws-access-control-policies.html)：

> [AWS Identity and Access Management (IAM)](http://aws.amazon.com/iam/)使您能够创建控制对 AWS 服务 API 和资源的访问的策略。今天，我们正在扩展 AWS 访问策略语言以包括对变量的支持。[策略变量](http://docs.aws.amazon.com/IAM/latest/UserGuide/PolicyVariables.html)使创建和管理包括个性化访问控制的一般策略变得更加容易。

以下是为常规 IAM 用户提供的示例策略：

```
{
   "Version": "2012-10-17",
   "Statement": [
     {
       "Action": ["s3:ListBucket"],
       "Effect": "Allow",
       "Resource": ["arn:aws:s3:::myBucket"],
       "Condition":{"StringLike":
      {"s3:prefix":["home/${aws:username}/*"]}}
     },
     {
       "Action":["s3:GetObject", "s3:PutObject", "s3:DeleteObject*"],
       "Effect":"Allow",
       "Resource": ["arn:aws:s3:::myBucket/home/${aws:username}",
       "arn:aws:s3:::myBucket/home/${aws:username}/*"]
     }
]
} 
```

虽然`${aws:username}`此示例中包含的内容不适用于联合身份用户（或假定角色），但还有另一个变量`${aws:userid}`，将替换**`account:caller-specified-name`**为相应的`${aws:principaltype}` **`FederatedUser`**， - 请参阅请求信息中的表格，您[可以将其用于策略变量](http://docs.aws.amazon.com/IAM/latest/UserGuide/PolicyVariables.html#policy-vars-infotouse)有关如何根据主体类型替换这些变量的详细信息。

# ruby-on-rails - gem ice_cube for reccurence events

> ID：15790909
> 
> 赞同：5
> 
> 时间：2013-04-03T14:59:03.813
> 
> 标签：ruby-on-rails, calendar, gem, repeat, ice-cube

I have simple Event model (title, date, user) And I created Events Calendar by months (gem 'watu_table_builder'). I need the feature to create repeating events. I figured out that I may use gem ice_cube for it. But it is not clear for me.

I added to model:

```
class Event < ActiveRecord::Base
  #require 'ice_cube'
  include IceCube

  belongs_to :user

  validates :title, :presence => true,
                    :length => { :minimum => 5 }
  validates :shedule, :presence => true

  def self.events_and_repeats(date)
    @events = Event.where(shedule:date.beginning_of_month..date.end_of_month)

# Here I need to figure out what is events repeats at this month (from date param)
# how I may combine it with Events array

    @events_repeats = @events # + repeats

    return @events_repeats

  end 
```

1) How I may combine repeat rules with Events array?

2) As I understand, I may save to db information about repeats in yaml yaml = schedule.to_yaml

But it is not clear for me how it is good way to create drop-down for repeats (none, each day, each month, each year) and link it with shedule rules. Where and how I should realize it (convert user choise to right shedule)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:40:42.283

如果您正在尝试这样做，您将无法查询数据库以获取事件的序列化 (yaml) 计划以按月过滤事件。如果您需要这样做，那么您必须将`schedule.occurrences`as 行存储在单独的表连接中：这就是我在我们的应用程序中所做的。

稍后我可能有更多细节要添加到这个答案中，同时看看我的[schedule_attributes](https://github.com/avit/schedule_attributes) gem，如果它可以帮助您构建选择器以从用户输入构建时间表（我仍然需要更新文档并发布它......）

# python - Colision Resolution between Circles - Slow Sliding

> ID：15790910
> 
> 赞同：1
> 
> 时间：2013-04-03T14:59:05.770
> 
> 标签：python, physics, collision

I am having trouble with circle to circle collision resolution.

First, i detect the collision, then if the balls collide, i separate them by the sum of their radii and set the velocities. That's easy.

My problem is when gravity is acting and a ball collides with another ball **from above**. It's **suposed to bouce off** but instead it **slides very slowly until it drops in the ground**.

Whats hapning is that afer the colision resolution, gravity pushes the ball down and causes another colision. I've tried separating the ball by the sum of their radii + x but it just slides a little faster.

You can watch the video at [http://www.youtube.com/watch?v=tk7qQ9KDFp0&feature=youtu.be](http://www.youtube.com/watch?v=tk7qQ9KDFp0&feature=youtu.be).

And here's the code that hadles colision:

```
for p in world.particle_list:

        if not p == self:

            if self.pos.sub(p.pos).get_length() <= self.radius * ppm + p.radius * ppm:

                p_mass_ratio = float(self.mass) / (self.mass + p.mass)
                self_mass_ratio = float(p.mass) / (self.mass + p.mass)

                rel_pos = p.pos.sub(self.pos)
                shift = rel_pos.set_length(- rel_pos.get_length() + self.radius * ppm + p.radius * ppm)
                p.pos = p.pos.add(shift.scale(0.50))
                self.pos = self.pos.add(shift.scale(-0.50))

                p_speed = p.speed
                self_speed = self.speed

                self.speed = p_speed.add(self.speed.norm_reflect(rel_pos.set_angle(rel_pos.get_angle() + 90).scale(-self.friction))).scale(0.50 * self_mass_ratio)
                p.speed = self_speed.add(p.speed.norm_reflect(rel_pos.set_angle(rel_pos.get_angle() + 90).scale(self.friction))).scale(0.50 * p_mass_ratio) 
```

I made a vector class to handle this:

```
def dcos(x):

    return cos(radians(x))

def dsin(x):

    return sin(radians(x))

def dtan(x):

    return tan(radians(x))

class Vec(object):

    def __init__(self, x, y):

        self.x = float(x)
        self.y = float(y)

        self.length = self.get_length()
        self.angle = self.get_angle()

    def get_length(self):

        return sqrt(self.x ** 2 + self.y ** 2)

    def get_angle(self):

        return atan2(self.y, self.x) * 180 / pi

    def add(self, vec1):

        new_x = self.x + vec1.x
        new_y = self.y + vec1.y

        return Vec(new_x, new_y)

    def sub(self, vec1):

        new_x = self.x - vec1.x
        new_y = self.y - vec1.y

        return Vec(new_x, new_y)

    def scale(self, k):

        return Vec(self.x * k, self.y * k)

    def set_angle(self, a):

        new_x = self.length * dcos(a)
        new_y = self.length * dsin(a)

        if a == -90 or a == 90:

            new_x = 0

        if a == 180 or a == 0 or a == -180:

            new_y = 0

        return Vec(new_x, new_y)

    def set_length(self, l):

        new_x = l * dcos(self.angle)
        new_y = l * dsin(self.angle)

        return Vec(new_x, new_y)

    def inverse(self):

        return Vec(- self.x, - self.y)

    def norm_reflect(self, vec1):

        if self.get_angle == vec1.get_angle():

            return Vec(self.x, self.y)

        if vec1.get_angle() >= 0:

            return self.set_angle(vec1.get_angle() - self.get_angle() + 90)

    else:

        return self.set_angle(vec1.get_angle() - self.get_angle() - 90) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:37:39.940

（我不知道python，但我知道物理学，你没有得到其他答案，所以我会尝试一下。）

看着

```
if self.pos.sub(p.pos).get_length() <= self.radius * ppm + p.radius * ppm:
  ...
  rel_pos = p.pos.sub(self.pos)
  shift = rel_pos.set_length(- rel_pos.get_length() + self.radius * ppm + p.radius * ppm)
  p.pos = p.pos.add(shift.scale(0.50))
  self.pos = self.pos.add(shift.scale(-0.50)) 
```

您将长度设置为负数，因此您将对象彼此*移动。*

该`norm_reflect()`函数没有多大意义，我怀疑它做的不是你想要的（在这种情况下你不是在测试你的代码）。

这两行：

```
self.speed = p_speed.add(self.speed.norm_reflect(rel_pos.set_angle(rel_pos.get_angle() + 90).scale(-self.friction))).scale(0.50 * self_mass_ratio)
p.speed = self_speed.add(p.speed.norm_reflect(rel_pos.set_angle(rel_pos.get_angle() + 90).scale(self.friction))).scale(0.50 * p_mass_ratio) 
```

似乎`norm_reflect()`只用一个参数调用，*并且*您在简单案例起作用之前将摩擦和质量比带入图片中，*并且*您`rel_pos`在多次转换后重用，*并且*物理学是非牛顿的（即错误到需要从一张白纸重新开始）。

# json - 从原始数据切换到 getJSON

> ID：15790911
> 
> 赞同：0
> 
> 时间：2013-04-03T14:59:07.243
> 
> 标签：json, getjson

我有适合我的代码：

```
 $('#demo').live('pagecreate', function(event) {
            var data, template, html;

            data = {
"sver": [{"title":"Buffet Stagaljxxs" , "url_titler":"buffet-stagalj" },{"title":"Restoran Vrske" , "url_titler":"restoran-vrske" }]
};

            template = '<ul data-role="listview" data-divider-theme="b" data-inset="false">{{#sver}}<li data-theme="b"><a href="#{{url_titler}}" data-transition="slide"><h3>{{title}}</h3><p>Opis: {{title}}</p></a></li>{{/sver}}</ul>';
            html = Mustache.to_html(template, data);

            $('#content').html(html);
        }); 
```

现在我需要使用 getJSON 来使用远程 json，而不是像我的示例中那样使用原始 json。我无法让它工作。访问控制允许来源不是问题。

这是[远程json地址](http://wmd.hr/mobile-rss/jason/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:17:07.420

使用 Ajax 调用数据（如下面的函数）

```
<script>
function getJSONData(url)
{
    var data = null;
    var request = window.XMLHttpRequest ? new XMLHttpRequest() : (window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : null);

    if (null != request)
    {
        request.open('GET', url, false);
        request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        request.send(data);

        //Parse returned JSON string.
        data = JSON.parse(request.responseText);
    }

     return data;
}

$('#demo').live('pagecreate', function(event) {
    var data, template, html;

    data = getJSONData('http://wmd.hr/mobile-rss/jason/');

    template = '<ul data-role="listview" data-divider-theme="b" data-inset="false">{{#sver}}<li data-theme="b"><a href="#{{url_titler}}" data-transition="slide"><h3>{{title}}</h3><p>Opis: {{title}}</p></a></li>{{/sver}}</ul>';
    html = Mustache.to_html(template, data);

    $('#content').html(html);
});
</script> 
```

# c# - Silverlight：绑定到包含属性的计算结果

> ID：15790918
> 
> 赞同：0
> 
> 时间：2013-04-03T14:59:18.200
> 
> 标签：c#, xaml, silverlight, data-binding

我想做的不仅是将属性 X 绑定到滑块，还将涉及 X 的计算结果绑定到饼图，因此当用户滑动滑块时，饼图会自动更新。

以下是我现在所拥有的。当我滑动“食物”滑块时，饼图会相应更新。但是，如果移动“租用”滑块，则不会发生任何事情。我猜`renterInsurance.Value = rent.Value * 0.1`只评估一次，因此在执行后期的任何更改rent.Value 都不会影响`renterInsurance.Value`。我如何实现我所需要的？实际计算可能涉及其他属性/变量。

```
public partial class MainPage : UserControl
{       
    public class Expense : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private string _Name;
        public string Name
        {
            get { return _Name; }
            set
            {
                _Name = value;
                NotifyPropertyChanged("Name");
            }
        }

        private double _Value;
        public double Value
        {
            get { return _Value; }
            set
            {
                _Value = value;
                NotifyPropertyChanged("Value");
            }
        }

        public void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }             

    public MainPage()
    {
        InitializeComponent();

        PieSeries ps = exampleChart.Series[0] as PieSeries;

        List<Expense> expenses = new List<Expense>();  

        Expense food = new Expense();
        food.Name = "Food";
        food.Value = 50;
        sliderFood.DataContext = food;
        expenses.Add(food);

        Expense rent = new Expense();
        rent.Name = "Rent";
        rent.Value = 100;
        sliderRent.DataContext = rent;

        Expense renterInsurance = new Expense();
        renterInsurance.Name = "Renter's Insurance";
        renterInsurance.Value = rent.Value * 0.1;
        expenses.Add(renterInsurance);
        ps.ItemsSource = expenses;

    }       
} 
```

XAML：

```
<Grid x:Name="LayoutRoot" Background="White" Height="700" Width="600">
    <Canvas Height="700" Width="600">                

    <toolkit:Chart Name="exampleChart" Height="300" Width="300" Canvas.Left="150" Canvas.Top="5">
        <toolkit:Chart.Series>
            <toolkit:PieSeries IndependentValueBinding="{Binding Name}" DependentValueBinding="{Binding Value}" />                                    
        </toolkit:Chart.Series>
    </toolkit:Chart>

    <Slider Canvas.Left="11" Canvas.Top="65" Height="23" HorizontalAlignment="Left" Margin="158,254,0,0" Name="sliderFood" VerticalAlignment="Top" Width="100" Minimum="0" Maximum="100" 
            Value="{Binding Value, Mode=TwoWay}"/>
    <Slider Height="23" HorizontalAlignment="Left" Margin="158,12,0,0" Name="sliderRent" VerticalAlignment="Top" Width="100" Minimum="0" Maximum="100" Canvas.Left="154" Canvas.Top="307" 
            Value="{Binding Value,Mode=TwoWay}"/>
        </Canvas>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:04:54.210

您需要修改费用类，以便它可以订阅其他费用类的 propertyChanged 事件，这样您就可以将租房者保险连接到租金类，并让它在看到rent.value 更改时更新自己的值。

我相信这条线应该有效。您可以将其添加到构造函数的底部。

```
rent.PropertyChanged += (sender, args) => {
  if (args.PropertyName == "Value")
    renterInsurance.Value = ((Expense)sender).Value * 0.1;
}; 
```

# java - 我无法使用 Jaxb2Marshaller 生成格式化的 XML

> ID：15790920
> 
> 赞同：0
> 
> 时间：2013-04-03T14:59:21.623
> 
> 标签：java, jaxb

根据 Spring Batch 文档，Spring Batch 可以生成格式化的 xml 文件，但是我失败了，所有的 XML 元素都是一行生成的。

测试步骤

1.  下载 spring-batch-2.1.9.RELEASE-no-dependencies
2.  导入spring-*-3.2.0.RC1.jar
3.  导入 jaxb-ri-2.2.6
4.  运行 org.springframework.batch.sample.iosample.XmlFunctionalTests

在运行作业之前，我对 /spring-batch-2.1.9.RELEASE-no-dependencies/spring-batch-2.1.9.RELEASE/spring-batch-samples/src/main/resources/jobs/iosample 进行以下更改/xml.xml

```
<bean id="itemWriter" class="org.springframework.batch.item.xml.StaxEventItemWriter">
    <property name="resource" ref="outputResource" />
    <property name="marshaller" ref="customerCreditMarshaller2" />
    <property name="rootTagName" value="customers" />
    <property name="overwriteOutput" value="true" />
</bean>
<bean id="customerCreditMarshaller2" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
     <property name="contextPaths">
         <list>
             <value>com.test.domain</value><!-- the package is generated from a XSD -->
         </list>
   </property>
   <property name="marshallerProperties">
        <map>
           <entry key="jaxb.formatted.output"><value type="java.lang.Boolean">true</value></entry>
        </map>
   </property> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:16:26.120

JAXB API (com.sun.xml.bind.v2.runtime.output.IndentingUTF8XmlOutput) 支持格式化的 XML。

但默认情况下，Spring Batch 不使用 com.sun.xml.bind.v2.runtime.output.IndentingUTF8XmlOutput 来生成输出 XML。

所以我们需要创建一个 StreamResult 让 Spring Batch 使用 com.sun.xml.bind.v2.runtime.output.IndentingUTF8XmlOutput 来生成格式化的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:05:26.303

我假设您希望 xml 自己阅读。我不知道 Spring Batch，但您可以使用 Notepad++，下载 XML 工具插件，然后使用“Pretty print (XML only - with line breaks)”。这并不理想，但比所有阅读都好。

# python - 如何在 MapReduce Job 中通过 python 扫描 HBase？

> ID：15790924
> 
> 赞同：0
> 
> 时间：2013-04-03T14:59:32.007
> 
> 标签：python, mapreduce, hbase

我的 mapreduce 作业程序是由 python 编写的，我想从 HBase 获取数据作为输入。有没有什么方法可以用 MapReduce 的方式扫描 HBase 表中的数据，比如原生 Java 实现中的 TableMapper/Reducer。我了解到，HappyBase 可以提供一种与 HBase 交互的简单方法，但它只适用于客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:06:53.770

您可以编写一个从 HBase 获取数据的 pig 脚本，然后通过[流式传输](http://pig.apache.org/docs/r0.11.0/basic.html#stream)或如果您使用 jython，则通过[UDF集成 python](http://pig.apache.org/docs/r0.11.0/udf.html#python-udfs)

# c# - 客户端对象模型通过 id 错误获取项目 - “项目不存在。它可能已被其他用户删除”

> ID：15790926
> 
> 赞同：1
> 
> 时间：2013-04-03T14:59:34.837
> 
> 标签：c#, sharepoint, sharepoint-2013, sharepoint-clientobject

我在尝试按 id 执行 get list item 时遇到错误

```
 ClientContext clientContext = TokenHelper.GetClientContextWithAccessToken(sharepointUrl.ToString(), accessToken);
        Web web = clientContext.Web;
        clientContext.Load(web);
        clientContext.ExecuteQuery();        
        clientContext.Load(web.CurrentUser);
        clientContext.ExecuteQuery();
        currentUser = clientContext.Web.CurrentUser.Title;
        List _list = web.Lists.GetById(_ListGuid);
        clientContext.Load(_list);
        clientContext.ExecuteQuery();
        Microsoft.SharePoint.Client.ListItem _item = _list.GetItemById(ItemID);
        clientContext.Load(_item);
        clientContext.ExecuteQuery(); //ERROR HERE
        Response.Write(_item["Author"].ToString()); 
```

错误 ：

> 项目不存在。它可能已被其他用户删除。

我已经检查并且项目存在。我是客户端对象模型的新手。列表对象向我显示项目计数及其罚款，我不能只拿列表项目对象。

我知道这是一件非常简单的事情，但我仍然在这件简单的事情上花了很多时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:05:28.027

问题在于清单文件中的权限，当您部署应用程序时，SharePoint 会询问您“信任”，然后您必须选择要操作的列表。

# python - Python 完全对齐字符串

> ID：15790929
> 
> 赞同：2
> 
> 时间：2013-04-03T14:59:38.850
> 
> 标签：python, string, format, alignment

有没有人有一种简洁的方式来完全证明给定线宽的字符串，如下所示：

```
The cat sat on the mat, the cat
sat on the mat, the  cat sat on
mat, the cat sat on the mat the
mat,  the cat  sat on  the  mat
the cate sat on the mat... 
```

这样两边的边缘都是直的。该函数接受一个字符串和一个线宽，并以上述格式返回一个字符串。有左、右和中心的 Python 函数，但不合理。我有一个方法，但它有点太长了。

谢谢！

捷通

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:01:24.357

这是 ActiveState Python Cookbook 中的一个秘诀：

[“将字符串与单词之间的空格对齐以适应指定的宽度”](http://code.activestate.com/recipes/414870-align-text-string-using-spaces-between-words-to-fi/)

# javascript - 在 AJAX UpdatePanel 回发后滚动到 SharePoint 可视 Web 部件上的位置

> ID：15790930
> 
> 赞同：1
> 
> 时间：2013-04-03T14:59:40.493
> 
> 标签：javascript, .net, sharepoint, asp.net-ajax, updatepanel

我编写了一个 SharePoint 2010 可视 Web 部件，它使用 ASP.NET AJAX 在更新面板中执行部分回发。Web 部件中有一个搜索功能，用户在其中输入搜索词并点击 UpdatePanel 中的 Button 控件，该控件查询 Web 服务并将结果绑定到 GridView，也在同一个 UpdatePanel 中。在数据绑定到 GridView 后，我想让页面滚动到网格的顶部。

标记（缩写）：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" EnableViewState="true">
  <ProgressTemplate>
    <div id="progressBackgroundFilter"></div>
    <div id="processMessage">
      <h1>Processing<img src="/_layouts/WebPart/ajax-loader.gif" alt="" /></h1>
    </div>
  </ProgressTemplate>
  <asp:Button ID="btnSearch" runat="server" OnClick="btnSearch_Click" Text="Search" Visible="true" ValidationGroup="SearchGroup" />
  <asp:GridView ID="InstancesGrd" runat="server" Visible="false" AutoGenerateColumns="false" OnRowCommand="InstancesGrd_RowCommand" GridLines="Vertical" BorderColor="White" CssClass="grid">
  </asp:GridView>
</asp:UpdatePanel> 
```

代码隐藏（缩写）：

```
protected void btnSearch_Click(object sender, EventArgs e)
{
  ServiceClient client = ConfigureServiceProxy();
  List<string> data = client.returnResults();
  InstancesGrd.DataSource = data;
  InstancesGrd.DataBind();
  InstancesGrd.Visible = true;
} 
```

javascript代码：

```
<script type="text/javascript">
    _spOriginalFormAction = document.forms[0].action;
    _spSuppressFormOnSubmitWrapper = true;  
</script>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.1.min.js"></script>
<script type="text/javascript">
    function pageLoad() {        

    $('.leftItem').hover(
        function () {
            $('ul', this).css('display', 'block');
            $(this).css('background-image', 'url("_layouts/testclientwebpart/leftNavHover.gif")');
        },
        function () {
            $('ul', this).css('display', 'none');
            $(this).css('background-image', 'url("_layouts/testclientwebpart/navBarLeft.gif")');
        }
    );
    $('.rightItem').hover(
        function () {
            $('ul', this).css('display', 'block');
            $(this).css('background-image', 'url("_layouts/testclientwebpart/rightNavHover.gif")');
        },
        function () {
            $('ul', this).css('display', 'none');
            $(this).css('background-image', 'url("_layouts/testclientwebpart/navBarRight.gif")');
        }
    );
    $('.middleItem').hover(
        function () {
            $('ul', this).css('display', 'block');
            $(this).css('background-image', 'url("_layouts/testclientwebpart/middleNavHover.gif")');
        },
        function () {
            $('ul', this).css('display', 'none');
            $(this).css('background-image', 'url("_layouts/testclientwebpart/navBarMiddle.gif")');
        }
    );
        } 
```

Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequest); Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoaded);

```
 function beginRequest(sender, args) {
    postbackElement = args.get_postBackElement();
  }
  function pageLoaded(sender, args) {
    if (typeof (postbackElement) === "undefined") {
      return;
    }
    if ((postbackElement.id) === "ctl00_SPWebPartManager1_g_d2fd9460_f326_4df6_92c5_7afd7da02faa_ctl00_btnSearch") {
      //--- Scroll test -- does not work
      window.scrollTo(750, 0);
    }
  }
</script> 
```

我尝试在服务器端使用 ClientScriptManager.RegisterStartupScript 并使用 PageRequestManager.getInstance().add_beginRequest() 和 add_pageLoaded() 将 javascript 事件处理程序添加到 Button 的 onclick 客户端函数。我能够从两者触发警报，但无法重置滚动位置。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:47:05.207

使用这样的内部锚链接，您尝试实现的目标将变得更加简单

`<a name="scrollTo1"></a>`.

您需要将此链接放在要滚动到的位置。

在页面中的适当位置设置此类标签后，您可以将当前 url 设置为 url#scrollTo1 以使用 javascript 滚动到该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:17:30.200

尝试将您的调用放入 SharePoint 特定函数 _spBodyOnLoadFunctionNames

```
 function beginRequest(sender, args) {
    postbackElement = args.get_postBackElement();
  }
  function pageLoaded(sender, args) {
    if (typeof (postbackElement) === "undefined") {
      return;
    }
    if ((postbackElement.id) === "ctl00_SPWebPartManager1_g_d2fd9460_f326_4df6_92c5_7afd7da02faa_ctl00_btnSearch") {
      //--- Scroll test -- does not work
      //window.scrollTo(750, 0);
      _spBodyOnLoadFunctionNames.push("scrollToTop");
    }
  }
  function scrollToTop()
  {
    window.scrollTo(750, 500);
  }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T18:23:48.663

我最终确实找到了答案，或者至少是它失败的原因。这件作品的母版页具有更改默认行为的行为的设置。从那以后我换了工作，所以很遗憾我忘记了我做了什么来修复它，但是新的母版页禁用了程序化滚动。一旦我在生产和开发中使用相同的母版页，我就能够解决这个问题。

# ios - Calling search display controller without touching the search bar

> ID：15790934
> 
> 赞同：1
> 
> 时间：2013-04-03T14:59:49.947
> 
> 标签：ios, uitableview, uisearchbar, uisearchdisplaycontroller

J have a tableview which is getting its data and a functioning search bar but the sech is taking spage that i need. So i want to hide it and so the search displaycontroller is called with a push of a button. Been trying but cant find how to make the call.

# svg - 修改 SVG 路径不透明度及其标记

> ID：15790948
> 
> 赞同：12
> 
> 时间：2013-04-03T15:00:32.050
> 
> 标签：svg, d3.js

我正在尝试对使用 D3 以编程方式定义的路径进行一些修改。我想做的改变很简单，修改路径的不透明度。我遇到的问题是路径本身会改变，而结束标记不会改变，我不太确定如何做到这一点。

标记定义如下：

```
 // define arrow markers for graph links
    svg.append('svg:defs').append('svg:marker')
        .attr('id', 'end-arrow')
        .attr('viewBox', '0 -5 10 10')
        .attr('refX', 6)
        .attr('markerWidth', 3)
        .attr('markerHeight', 3)
        .attr('orient', 'auto')
        .append('svg:path')
            .attr('d', 'M0,-5L10,0L0,5')
            .attr('fill', '#CCCCCC'); 
```

路径：

```
 // Create the links between the nodes
    var links = svg.append("g")
                    .selectAll(".link")
                    .data(data.links)
                    .enter()
                    .append("path")
                        .attr("class", "link")
                        .attr("d", sankey.link())
                        .style('marker-end', "url(#end-arrow)")
                        .style("stroke-width", function (d) { return Math.max(1, d.dy); })
                        .sort(function (a, b) { return b.dy - a.dy; }); 
```

我用来更改路径的代码，它不会更新标记：

```
d3.selectAll("path.link")
      .filter(function (link) {
          // Find all the links that come to/from this node
          if (self.sourceLinksMatch(self, link, node)) {
              return true;
          }

          if (self.targetLinksMatch(self, link, node)) {
              return true;
          }

          return false;
      })
     .transition()
     .style("stroke-opacity", 0.5); 
```

任何人都可以建议我可能需要更改什么来修改标记结束样式吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-03T15:25:53.087

修改不透明度而不是描边不透明度的作品..所以

```
d3.selectAll("path.link")
  .transition()
  .style("stroke-opacity", 0.5); 
```

变成

```
d3.selectAll("path.link")
  .transition()
  .style("opacity", 0.5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:23:57.837

您应该能够对标记路径定义执行相同的操作：

```
d3.selectAll("marker path")
  .transition()
  .style("stroke-opacity", 0.5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T23:08:31.557

您可以为箭头标记设置定义预设名称

```
// build the arrow.
svg.append("svg:defs").selectAll("marker")
    .data(["HELPS","HELPED_BY","DAMAGES","REPELS","FAMILY", "KINGDOM"])      // Different link/path types can be defined here
  .enter().append("svg:marker")    // This section adds in the arrows
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
  .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");

// add the links and the arrows
var path = svg.append("svg:g").selectAll("path")
    .data(force.links())
  .enter().append("svg:path")
    .attr("class", function(d) { return "link " + d.type; })
    .attr("marker-end", function(d) { return "url(#" + d.type +")"; }); 
```

并用CSS配置各自的样式

```
marker#HELPS{fill:green;}
path.link.HELPS {
  stroke: green;
}

marker#HELPED_BY{fill:#73d216;}
path.link.HELPED_BY {
  stroke: #73d216;
}

marker#DAMAGES{fill:red;}
path.link.DAMAGES {
  stroke: red;
} 
```

# android - Is optimization of Android's RenderBuffer possible?

> ID：15790951
> 
> 赞同：1
> 
> 时间：2013-04-03T15:00:39.370
> 
> 标签：android, opengl-es, fbo

I'm using RenderBuffer and OpenGL instead of Canvas and Bitmap on Android Java. However, drawing to a texture takes time. I referred to [this question](https://stackoverflow.com/questions/8634940/fbo-offscreen-rendering-slow) and tried speed improvement (Reduces the call of glEnableVertexAttribArray, glClearColor, glBindFramebuffer), but it's ineffective. Is this limitations of GPU and Android OS?

*This is an extract of the program.

```
GLES20.glAttachShader(program, vertex);
GLES20.glAttachShader(program, fragment);
GLES20.glLinkProgram(program);
GLES20.glUseProgram(program);

GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[i]);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGBA, s, s,
0, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, null);

GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, fbs[i]);
GLES20.glFramebufferTexture2D(GLES20.GL_FRAMEBUFFER,
GLES20.GL_COLOR_ATTACHMENT0, GLES20.GL_TEXTURE_2D, textures[i], 0);

GLES20.glBindRenderbuffer(GLES20.GL_RENDERBUFFER, renders[i]);
GLES20.glRenderbufferStorage(GLES20.GL_RENDERBUFFER, GLES20.GL_DEPTH_COMPONENT16, s, s);
GLES20.glFramebufferRenderbuffer(GLES20.GL_FRAMEBUFFER,
GLES20.GL_DEPTH_ATTACHMENT, GLES20.GL_RENDERBUFFER, renders[i]);

GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, fbs[i]);
GLES20.glClearColor(fr, fg, fb, fa);
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

GLES20.glGetIntegerv(GLES20.GL_FRAMEBUFFER_BINDING, old, 0);

GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, fbs[pos]);
GLES20.glViewport(0, 0, ww, hh);

:
GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
:

GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, old[0]);
GLES20.glViewport(0, 0, scw, sch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:46:15.100

据我了解，如果您每次需要绘制某些东西时都使用粘贴的所有代码，那么您的程序运行缓慢也就不足为奇了。

OpenGL（无论是否为 ES）基于“状态机”模型：OpenGL 上下文保留您对其所做的更改（使用各种 glXXX 命令），并修改 OpenGL 对未来命令的反应方式（尤其是对用于绘图的）。

这意味着当您发出命令时：

```
GLES20.glClearColor(fr, fg, fb, fa); 
```

你真正在做的是设置

```
GL_COLOR_CLEAR_VALUE 
```

状态机内部的变量为 [fr, fg, fb, fa]。从那一刻起，GL_COLOR_CLEAR_VALUE 已经设置为 [fr, fg, fb, fa]，并且每次使用相同参数对 glClearColor 的额外调用都不会改变机器中的任何内容。

[OpenGL ES 2.0 glClearColor 参考页](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glClearColor.xml "OpenGL ES 2.0 glClearColor 参考页")

我为什么要进入这个？因为*OpenGL 状态更改对性能至关重要*（有些比其他更重要）：更改上下文状态对性能的影响通常超出简单的变量分配，因为它可能需要 OpenGL 与 GPU“对话”，丢弃缓存等等。在设置阶段完成这是一个必要的邪恶，但频繁的更改可能会在每帧完成时对性能产生巨大影响。

因此，您应该做的第一件事是通过*创建一个初始化方法和一个并条框方法来最小化程序中***每秒**glXXX 命令的绝对数量。

 *标准方法是使用 GLSurfaceView.Renderer 类

[Android GLSurfaceView.Renderer 类参考](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html "Android GLSurfaceView.Renderer 类参考")

将所有初始化命令塞进

```
public abstract void onSurfaceCreated (GL10 gl, EGLConfig config) 
```

和

```
public abstract void onSurfaceChanged (GL10 gl, int width, int height) 
```

并输入方法：

```
public abstract void onDrawFrame (GL10 gl) 
```

尽可能少的 OpenGL 命令（正是你实际绘制东西所需要的）

抛开理论，进入具体的，这里是我建议你考虑的优化列表：

*   如果您使用的是单个程序，请保留整个程序：

```
    GLES20.glAttachShader（程序，顶点）；
    GLES20.glAttachShader（程序，片段）；
    GLES20.glLinkProgram(程序);
    GLES20.glUseProgram（程序）；

```

在设置部分中设置块（即使您不这样做，只需使用 glUseProgram 在程序之间切换：您不必一遍又一遍地链接它！）。glLinkProgram 可能会对性能造成**很大**影响！

*   纹理初始化在设置中进行（在“状态更改”的顶部，您实际上是在将相同的数据从 CPU 内存一次又一次地移动到 GPU 内存，每一帧）

*   帧缓冲区初始化（包括所有渲染缓冲区的创建和绑定）也在设置中进行。此外，为什么还需要多个帧缓冲区？:)

*   glViewport 进入 onSurfaceChanged 方法

*   *在我看来*，您使用不同的帧缓冲区来绘制不同的对象：我不确定您要完成什么，但我建议您更改策略：绘制到整个屏幕并在同一个缓冲区上，除非你有充分的理由不这样做。

最后但并非最不重要的是，这是一本关于该主题的好书：

[OpenGL ES 2.0 编程指南](http://opengles-book.com/ "OpenGL ES 2.0 编程指南")

它既是对 OpenGL ES 2.0 的一个很好的介绍，也是对 OpenGL 的一个很好的介绍（我没有减少他们的销售额 ;-)）

希望能帮助到你*

# c# - How do Clip a Control [like Image] in to a Path /Shape [like Star/Round]

> ID：15790952
> 
> 赞同：0
> 
> 时间：2013-04-03T15:00:41.347
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

I have `clipped` an `Image control` in to a `Border` which contains it by referring this [blog](http://www.scottlogic.co.uk/blog/colin/2009/05/silverlight-cliptobounds-can-i-clip-it-yes-you-can/)

Sample `xaml` Code

```
 <Border Behaviors:ImageClip.ToBounds="True">
            <Image  Source="{Binding Image}"/>
        </Border> 
```

But how do i `clip` an `Image Control` into a `Path / Shape` [Like Star /Ellipse] .I have tried previous method.But it was not succeeded because path does not have `Content` Property so that we can't set `Image Clip Behaviour` to `Path`.

I have tried with `ImageBrush` Fill .But that could not fit into my case beacause i have to implement some `behaviours` like Pinch & Zoom on `Image Control`.

So that am stuck. Can anyone help me with any suggestion or samples?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:09:55.170

您是否考虑过仅采用路径/形状并将背景或填充属性设置为图像画笔？

请参阅：[如何在 WPF 中的线条或路径上使用图像作为 ImageBrush](https://stackoverflow.com/questions/4641404/how-to-use-an-image-as-imagebrush-on-a-line-or-path-in-wpf)

# r - 条形图的R循环如何传递数据？

> ID：15790955
> 
> 赞同：1
> 
> 时间：2013-04-03T15:00:48.083
> 
> 标签：r, loops, plot

我需要生成并保存到 jpeg 多个简单的条形图，其中四个条形代表四个数据点。我已经成功地让代码循环，以所需的格式生成正确数量的 jpeg 文件条形图。但我无法确定为每个条形图插入相关数据所需的代码。我只能用每个文件/图中表示的相同数据生成多个图。**我应该在代码中进行哪些更改以将相关数据插入每个图中？**

下面是我的代码。

“names”是一个数据框，其中包含一个名为“personid”的变量。“personid”包含“mydata”中的所有变量名。

'mydata' 是这样设置的数据框：

```
 J5A J5B J5C ...
w 2.1 1.3 3.2 ...
x 1.9 2.2 1.8 ...
y 1.5 2.4 1.8 ...
z 1.9 2.2 1.7 ... 
```

如果我在代码中使用变量名（例如 mydata$J5A），我可以在单独的 jpeg 文件中生成 43 个图，这些文件都包含 J5A 的数据。不好。我的理解是我应该使用 mydata$kid.i，但显然不是，因为循环中止并且我得到错误

```
"Error in barplot.default(kid.i, xlab = "Language Skills", ylim = c(1,  : 
'height' must be a vector or a matrix" 
```

代码：

```
allkids <- unique(names$personid)
for (i in 1 : 43) {
setwd("D:/R/BARPLOTS/")
kid.i <- allkids[i]
filename <- paste (kid.i, ".jpg", sep="")
jpeg(file = filename)
barplot(mydata$J5A, xlab = "Language Skills", ylim = c(1,3), xpd = FALSE,
    names.arg=working2$varname, axes=FALSE, cex.names=.8, col=c("darkblue","red",
    "darkgreen", "yellow"))
dev.off()
} 
```

**更新：**对于那些感兴趣的人，这是删除了错误的最终工作代码：

```
allkids <- unique(names$personid)
for (i in 2 : 44) {
setwd("D:/R/BARPLOTS/")
kid.i <- allkids[i]
filename <- paste (kid.i, ".jpg", sep="")
jpeg(file = filename)
barplot(mydata[, i], xlab = "Language Skills", ylim = c(1,3), xpd = FALSE,
    names.arg=working2$varname, axes=FALSE, cex.names=.8, col=c("darkblue","red",
    "darkgreen", "yellow"))
dev.off()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:17:10.457

你很接近！罪魁祸首在这里： `barplot(mydata$J5A ....`
你反而想使用

```
 barplot(mydata[, i] . . .. . 
```

* * *

* * *

**泄露出来的**是，第一个参数`barplot`当然是数据。所以我们看看这个论点，看看它是否随着你的 for 循环的每次迭代而变化。 `mydata$J5A`是恒定的，我们需要一些对 的引用`i`，例如`mydata[, i]`

**根据评论更新**
如果您的第一列（或前几列）不是您想要绘制的数据——例如标签、名称、其他特征——那么你应该有你的迭代变量, `i`, 在该列之后开始。在上面显示的特定情况下，您要使用

```
 for (i in 2:ncol(myData))  {
    . . . 
  } 
```

# php - PHP 解析错误 > 0

> ID：15790961
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:01:06.013
> 
> 标签：php, parsing, syntax-error

根本不是程序员。我被要求为我们的网站开发一个 FTP 页面，并找到了一些看起来很整洁的代码来使它工作。不幸的是（我使用的是 Dreamweaver 6），代码似乎在第 25 行的“if(strleng($error_message)>0)”处中断......我错过了什么？

```
<?php
$email_to='info@ispitfire.com';
$email_subject = "New file uploaded to FTP";
function died($error) {echo "There was an error uploading your file.";echo $error;die();}
if(!isset($_POST['theirname']) ||
!isset($_POST['email']) ||
!isset($_POST['audioname'])) {
died('Please make sure your name, email address, and the project name are completed.');
}
$theirname = $_POST['theirname'];
$email = $_POST['email'];
$audioname = $_POST['audioname'];
$comments = $_POST['comments'];
$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email)) {$error_message .= "Please input a valid email address.";
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$theirname)) {
$error_message .= "Please avoid using special characters.";
}
if(!preg_match($string_exp,$audioname)) {
$error_message .= "Please use only letters and numbers for Project Name.";
}
**if(strlen($error_message)>0){died($error_message);}clean_string($string){**
$bad = array("content-type","bbc:","to:","cc:","href");
return str_replace($bad,"",$string);
}
$email_message = "A new file has been uploaded to the FTP site\n\n";
$email_message .= "Name: ".clean_string($theirname)."\n";
$email_message .= "Title: ".clean_string($audioname)."\n\n";
$email_message .= "Comments: ".clean_string($comments)."\n\n\n\n";
$headers = 'From: '.$email."\r\n";
if ($_FILES["file1"]["error"]>0) {
$email_message .= "Return Code: " . $_FILES["file1"]["error"] . "\n";
}
else
{
$email_message .= "Upload: " . $_FILES["file1"]["name"] . "\n";
$email_message .= "Type: " . $_FILES["file1"]["type"] . "\n";
$email_message .= "Size: " . ($_FILES["file1"]["size"] / 1024) . " Kb\n";
if ($_FILES["file1"]["type"] == "") {
if (file_exists("upload/" . $_FILES["file1"]["name"])) {
$email_message .= $_FILES["file1"]["name"] . " already exists. ";
}
else
{
move_uploaded_file($_FILES["file1"]["tmp_name"],
"upload/" . $_FILES["file1"]["name"]);
$email_message .= "Stored in: " . "upload/" . $_FILES["file1"]["name"];
}
}
else
{
died("Unsupported file type.");
}
}
@mail($email_to, $email_subject, $email_message, $headers);
header('Location: ftp.html');
?> 
```

这是我第一次涉足 PHP，所以我真的不知道从哪里开始。似乎其他一切工作正常，但由于该特定行上的某些内容，我无法让上传工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:04:43.877

```
if(strlen($error_message)>0){died($error_message);}clean_string($string){
                                                   ^^^^^^^^^^^^^^^^^^^^^^^ 
```

要么你调用 function `clean_string()`，这意味着最后`{`的 the 是错误的。如果您尝试 DEFINFE `clean_string()`，在这种情况下您将丢失`function`. 例如

```
if (...) { ... }
function clean_string($string) { ... } 
```

或者

```
if (...) {... }
clean_string($string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:06:27.130

应该`clean_string($string){`怎么做？

应该是`if(clean_string($string)) {`吗？

或者`if(!clean_string($string)) {`

还是只有`clean_string($string); {`？

或者 ... ？

# javascript - Why doesn't this.find() work inside my plugin?

> ID：15790963
> 
> 赞同：3
> 
> 时间：2013-04-03T15:01:07.087
> 
> 标签：javascript, jquery, this

I'm trying to make a simple jQuery accordion plugin and can't figure out why doesn't the 'this' keyword work as it should. Here's the code of the plugin:

```
(function( $ ){
$.fn.accrdn = function(userSettings) {
    var defaults = { 
        toggle: true
    };
    var options = $.extend({}, defaults, userSettings);
    var handle = this.find('.handle');//doesn't work!

    if (options.toggle) {
        handle.click(function(){
            $(this).next('.panel').slideToggle();
        });
    } else {
        handle.click(function(){
            $(this).next('.panel').slideUp();
        });
    };
};
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:18:18.907

既然 OP 提供了代码使用的示例小提琴，问题是手风琴 div 的选择器，它应该是：

```
$(document).ready(function() {
    $('.accordion').accrdn({toggle:true, slideSpeed:500});
}); 
```

注意：选择器缺少`.`标识它是一个`class`选择器

[这是修复](http://jsfiddle.net/3KZqH/1/)

# sql - how to write UNPIVOT correctly?

> ID：15790968
> 
> 赞同：0
> 
> 时间：2013-04-03T15:01:21.490
> 
> 标签：sql, sql-server, tsql, unpivot

a have a table "research" with columns "ID", "code1", "code2", "soc0", "soc1" ... "socn" where n = 40.

The values of cells are not important at the moment as I need to get a list of "soc" columns like:

```
soc0  
soc1   
....  
soc40 
```

Can you please help me to write unpivot query?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:09:24.680

您可以使用该`UNPIVOT`功能来获取它。

基本语法是：

```
select *
from research
unpivot
(
  value
  for col in (soc0, soc1, soc40)
) un; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5d6fc/7)

但是您必须输入所有要取消透视的列名。如果您不想键入所有列名，那么您可以使用动态 SQL：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
   @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.column_name)
         from information_schema.columns as C
         where C.table_name = 'research' and
               C.column_name like 'soc%'
         for xml path('')), 1, 1, '')

set @query 
  = 'select id, col, value
     from research
     unpivot
     (
        value
        for col in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5d6fc/6)

但是如果你只想要一个列名列表，那么你可以直接查询它而不需要 unpivot：

```
select C.table_name, C.column_name
from information_schema.columns c
where C.table_name = 'research' and
  C.column_name like 'soc%' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5d6fc/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:16:55.040

尝试这个

```
select  unpvt.value
from research c
unpivot ( 
 value 
 for attribute in (Colsoc0,Colsoc1,Colsoc2,..,Colsocn)
) unpvt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:05:12.370

```
select  *
from    research
unpivot (
        CodeValue for CodeName in (code0, code1, code2)
        ) sub 
```

[SQL Fiddle 上的示例](http://sqlfiddle.com/#!6/dc2f9/1/0)

# zurb-foundation - 卸载 froogaloop api 后 Vimeo 仍在播放

> ID：15790970
> 
> 赞同：0
> 
> 时间：2013-04-03T15:01:23.617
> 
> 标签：zurb-foundation, vimeo, reveal.js, froogaloop

我正在使用 Foundation 4 框架和 Reveal 模态作为灯箱效果的画廊中托管几个 vimeo 视频。不幸的是，视频在每个模式关闭后继续播放。

我还是 jquery 的新手，所以我使用了 Froogaloop api ( [https://developer.vimeo.com/player/js-api](https://developer.vimeo.com/player/js-api) ) 来卸载每个 vimeo 视频，但我无法让它工作。

这是我的代码：

```
 //Vimeo Froogaloop API event handler 
        function ready(player_id) {
            var player = $f(player_id),

            play = document.getElementById('play'),
            pause = document.getElementById('pause'),
            unload = document.getElementById('unload');

            play.addEventListener('click', function() {
                player.api('play');
            });

            pause.addEventListener('click', function() {
                player.api('pause');
            });

            unload.addEventListener('click', function() {
                player.api('unload');
                });
            }

            window.addEventListener('load', function() {
            //Attach the ready event to the iframe
            $f(document.getElementById('player')).addEvent('ready', ready);
        }); 
```

HTML：

```
 <!-- //Video Click Event -->
        <div class="row">
            <div class="large-12 columns">
                <div id="myModal3" class="reveal-modal">
                    <iframe id="player1" src="http://player.vimeo.com/video/62831216?api=1" width="720" height="406" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                    <a class="close-reveal-modal" id="unload" href="#">x</a>
                </div>      
            </div>
        </div>      

        <div class="row">
            <div class="large-12 columns">
                <p><img src="http://placehold.it/250x100" class="logo"></p>
            </div>
        </div>

        <div class="row">
            <div class="large-12 columns">&nbsp;</div> 
        </div>

        <div class="row">
            <div class="large-12 columns">&nbsp;</div> 
        </div>   

        <!-- //Foundation 4 Accordion -->
        <div class="row">
            <div class="large-12 columns">
                <div class="section-container accordion" data-section="accordion">

                    <section class="section"> 
                        <div class="row">
                            <div class="large-5 columns"><p class="title"><a href="#"><img src="http://placehold.it/301x248"></a></p></div>
                                <div class="large-7 columns">
                                    <p class="title"><a href="#">Name</a><br> Title</p>
                                    <p class="quote">"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur ac tempus libero."</p>
                                </div> 
                            </div>  

                            <div class="row">
                                <div class="large-12 columns">&nbsp;</div> 
                            </div> 

                            <div class="content">
                                <div class="row">
                                    <div class="large-12 columns">&nbsp;</div> 
                                </div> 

                            <div class="row">
                                <div class="large-12 columns">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus malesuada sapien ut nibh porttitor fringilla in sit amet risus. Curabitur euismod viverra elit sed pretium. Suspendisse laoreet tristique convallis. Aliquam erat volutpat. Morbi pharetra lobortis purus non elementum. Pellentesque mattis dignissim lectus in blandit. Duis facilisis vestibulum adipiscing. Suspendisse vulputate viverra consequat. In quis lorem ut tellus fringilla egestas. Etiam semper, dolor ut luctus dapibus, leo nunc scelerisque erat, eget aliquam dolor mauris ut risus. Nam non sem non libero laoreet bibendum quis in mi. Sed non nibh risus. Nunc id nunc felis. Maecenas eu est dui. In tortor justo, facilisis vel pulvinar a, bibendum vel tellus.</p>
                                </div> 
                            </div>

                            <div class="row">
                                <div class="large-12 columns">&nbsp;</div> 
                            </div> 

                            <div class="row">
                                <div class="large-12 columns">&nbsp;</div> 
                                </div>

                            <div class="row">
                                <div class="large-12 columns">
                                    <a href="#" data-reveal-id="myModal3" data-animation="fadeAndPop" data-animationspeed="300" data-closeonbackgroundclick="true" data-dismissmodalclass="close-reveal-modal">
                                        <img src="http://placehold.it/720x406">
                                    </a>

                                    <div class="row">
                                        <div class="large-12 columns">&nbsp;</div> 
                                    </div>     

                                    <div class="row">
                                         <div class="large-12 columns">                          
                                              <p class="subheader"><b>Client</b><br>
                                              <medium>"Title"</medium><br>
                                              <small>Location</small></p>
                                         </div> 
                                    </div> 
                                </div> 
                            </div>  

                            <div class="row">
                                <div class="large-12 columns">&nbsp;</div> 
                            </div>

                            <div class="row">
                                <div class="large-12 columns">&nbsp;</div> 
                            </div>

                        </div>
                    </section>

                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T14:30:22.533

尝试使用这个

```
 <script type="text/javascript">
 jQuery(document).ready(function($) {
   $('body').live('click',function(){
    if($('div.reveal-modal-bg').is(':visible')){
        var resourceVideo = $('#myModal iframe').attr('src');
        $('#myModal iframe').attr('src','').attr('src',resourceVideo);
        };
    })
});
</script> 
```

# php - 显示数组中的数据

> ID：15790974
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:01:30.090
> 
> 标签：php

我想从数组中的数组中提取数据并将其显示在表格上。问题是，当我使用功能键时，它似乎覆盖了一些数据。数据应该包含 135 行，但它只返回 114。我需要显示所有这些。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:03:59.750

不看代码很难说，但我会说，如果你有相同值的重复键，新值会覆盖旧值

# c - float 指针和 int 指针地址有什么区别？

> ID：15790980
> 
> 赞同：9
> 
> 时间：2013-04-03T15:01:51.593
> 
> 标签：c, pointers

我试图运行这段代码，

```
int *p;
float q;
q = 6.6;
p = &q; 
```

虽然这将是一个警告，但我认为`&q`和`p`大小相同，所以`p`可以有一个地址`q`。但是当我打印时`&q`，`p`我得到了不同的输出。这是我的输出

```
*p =  6.600000 
 q = 0.000000, p = 0x40d33333, &q = 0x7fffe2fa3c8c 
```

我错过了什么？当指针和变量类型相同时， `p`and`&q`也相同。

我的完整代码是

```
#include<stdio.h>
void main()
{   
    int *p;
    float q;
    q = 6.6;
    p = &q;
    printf("*p =  %f \n q = %f, p = %p, &q = %p \n",*p,q,p,&q);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T15:22:21.843

您需要更认真地对待编译器警告。

C 不要求编译器*拒绝*无效程序，它只需要对规则违规进行“诊断”。诊断可以是致命错误消息或警告。

不幸的是，编译器对不兼容的指针类型的赋值发出警告是很常见的。

```
void main() 
```

这是错误的；它应该是`int main(void)`。你的编译器可能会让你侥幸逃脱，它可能不会导致任何明显的问题，但没有正确编写它是没有意义的。（这不是*那么*简单，但这已经足够接近了。）

```
int *p;
float q;
q = 6.6; 
```

没关系。

```
p = &q; 
```

`p`是类型`int*`；`&q`是类型`float*`。将一个分配给另一个（没有强制转换）是*违反约束*的。最简单的看待它的方法是它完全是非法的。

如果你真的想做这个任务，你可以使用演员表：

```
p = (int*)&q; /* legal, but ugly */ 
```

但很少有充分的理由这样做。 `p`是一个指针`int`；它应该指向一个`int`对象，除非你有充分*的*理由让它指向其他东西。在某些情况下，转换本身可能具有未定义的行为。

```
printf("*p =  %f \n q = %f, p = %p, &q = %p \n",*p,q,p,&q); 
```

`%f`格式需要一个`double`参数（在这种情况下，一个参数`float`被提升为`double`这样`float`就可以了）。但`*p`属于类型`int`。`printf`使用错误类型的参数调用会导致程序的行为未定义。

`%p`需要 type 的参数`void*`，而不仅仅是任何指针类型。如果要打印指针值，应将其转换为`void*`：

```
printf("&q = %p\n", (void*)&q); 
```

它可能在没有演员表的情况下工作，但同样，行为是未定义的。

如果您在编译程序时收到任何警告，请不要费心运行它。首先修复警告。

至于标题中的问题，类型指针和类型`int*`不同`float*`。An`int*`应该指向一个`int`对象；a`float*`应该指向一个`float`对象。您的编译器可能会让您混合使用它们，但这样做的结果是实现定义或未定义。C 语言，尤其是许多 C 编译器，会让你摆脱很多没有多大意义的事情。

它们是不同类型的原因是（试图）防止或至少检测它们使用中的错误。如果您声明一个类型为 的对象，`int*`则表示您打算让它指向一个`int`对象（如果它不是空指针）。`float`在对象中存储对象的地址`int*`几乎可以肯定是一个错误。强制类型安全允许尽早检测到此类错误（当您的编译器打印警告时，而不是当您的程序在一个重要客户端的演示期间崩溃时）。

很可能（但不能保证）`int*`并且`float*`大小相同并且具有相同的内部表示。但是对象的*含义*不是`int*`“包含虚拟地址的 32（或 64）位的集合”，而是“指向`int`对象的东西”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T15:12:14.857

你得到未定义的行为，因为你将错误的类型传递给`printf`. 当你告诉它期待一个浮点数时，它实际上期待一个`double`- 但你传递了一个`int`.

结果它打印了错误的信息，因为`printf`完全依赖于格式字符串来访问你传递给它的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:20:48.680

除了teppic所说的，

考虑，

```
int a = 5;
int *p = &a; 
```

在这种情况下，我们向编译器指示`p`将指向一个整数。因此，众所周知，当我们`*p`在运行时执行类似的操作时，没有。`int`将读取等于大小的字节。

如果将占用`x`字节数的数据类型的地址分配给声明为保存字节数少于 的数据类型地址的指针，则`x`在使用间接运算符时会读取错误的字节数。

# vbscript - GPO 使用多个签名自动生成 Outlook 签名

> ID：15790981
> 
> 赞同：5
> 
> 时间：2013-04-03T15:01:53.063
> 
> 标签：vbscript, outlook, outlook-2010, group-policy, gpo

不久前，我一直在寻找一种灵活的方式来为不同类型的用户自动生成签名。我们的域有多家公司，每个公司都有不同的需求。您在谷歌搜索时找到的默认脚本仅显示了如何创建基本签名。

下面的脚本更进一步。首次启动 Microsoft Office 时会填写用户名和姓名首字母。如果没有 Outlook 配置文件，它将使用 PRF 文件设置 Outlook（您可以对笔记本电脑/平板电脑使用缓存，对台式机/服务器使用非缓存）。然后，它会检查用户应该获得哪些签名，并使用签名文件、模板文件和活动目录中的用户信息中的信息来构建它们。所有状态信息都会写入应用程序事件日志（过滤器 WSH）。更新签名文件时，将重新应用签名。

我在这里发布整个脚本，希望其他人可能会发现它有用。随意评论（或捐赠ofcourse :-)）。它适用于 Outlook 2000、2003、2010 和 2013（并且应该是未来的证明）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:01:53.063

在您的域中创建一个新的全局安全组。在我的示例中，我将使用`Signature-Marketing`and `Signature-HR`。

创建适用于这些组的新 GPO。将`Outlook.vbs`脚本放在`User \ Policy \ Windows \ Scripts \ Logon`.

```
'\\MyDomain.local\SysVol\WGIT.local\Policies\{MyPolicyID}\User\Scripts\Logon\Outlook.vbs

On Error Resume Next 
' ##### CHANGE THESE SETTINGS #####
setup_GroupPrefix = "Signature-"
setup_Path_SignatureVBS = "\\MyDomain.local\NETLOGON\Outlook\Signatures" 'Signatures with the same name as this group (+.VBS) will be searched within this
setup_Path_Template = "\\MyDomain.local\NETLOGON\Outlook\Templates" 'Signatures with the same name as this group (+.VBS) will be searched within this
setup_PRF_CacheOn = "\\MyDomain.local\NETLOGON\Outlook\PRF\Outlook_Cached.PRF"
setup_PRF_CacheOff = "\\MyDomain.local\NETLOGON\Outlook\PRF\Outlook_NotCached.PRF"

' ##### START OF SCRIPT #####
Set oShell = CreateObject("WScript.Shell")
Set oAD = CreateObject("ADSystemInfo")
Set oFile = CreateObject("Scripting.FileSystemObject")
Set oOutlook = CreateObject("Outlook.Application") 
Set oUser = GetObject("LDAP://" & oAD.UserName)

'Quit if no outlook is present!
If oOutlook = false Then
  oShell.LogEvent 1, "Signature script error. Outlook application object was not found."
  Wscript.Quit
End If

'Quit if version is lower then 10
v = Split(oOutlook.Version, ".")
outlook_Version = v(0) & "." & v(1)
If cInt(v(0)) < 10 Then
  oShell.LogEvent 1, "Signature script error. Outlook version " & outlook_Version & " is not supported."
  Wscript.Quit
ElseIf (cInt(v(0)) >= 10) And (cInt(v(0)) < 15) Then
  reg_DefaultProfile = "HKCU\Software\Microsoft\Windows NT\CurrentVersion\Windows Messaging Subsystem\Profiles\DefaultProfile"
Else
  reg_DefaultProfile = "HKCU\Software\Microsoft\Office\" & outlook_Version & "\Outlook\DefaultProfile"
End If

'Check if Office's Userinfo already exists
t1 = oShell.RegRead("HKCU\Software\Microsoft\Office\Common\UserInfo\UserName")
If t1 = "" Then
  'Add userinfo to registry.
  oShell.RegWrite "HKCU\Software\Microsoft\Office\Common\UserInfo\UserName", oUser.FullName
  oShell.RegWrite "HKCU\Software\Microsoft\Office\Common\UserInfo\UserInitials", oUser.sAMAccountName
  oShell.RegWrite "HKCU\Software\Microsoft\Office\Common\UserInfo\Company", oUser.company
  oShell.LogEvent 0, "Office userinformation was imported from AD."
End If

'Check for a default mail profile
t2 = oShell.RegRead(reg_DefaultProfile)
oShell.LogEvent 0, "Default profile (" & reg_DefaultProfile & ") said " & t2
If t2 = "" Then 'No default profile was found! Import PRF file!
  'Detect mobile devices. Enabled cached outlook if there is a battery present
  MobileDevice = false
  Set oBattery = GetObject("Winmgmts:").ExecQuery("Select * from Win32_Battery")
  For Each x in oBattery
    MobileDevice = true
  Next

  'Import PRF location into registry
  If MobileDevice Then
    oShell.RegWrite "HKCU\Software\Microsoft\Office\" & outlook_Version & "\Outlook\Setup\ImportPRF", setup_PRF_CacheOn
    oShell.LogEvent 0, "Office Outlook has been set-up with cache."
  Else
    oShell.RegWrite "HKCU\Software\Microsoft\Office\" & outlook_Version & "\Outlook\Setup\ImportPRF", setup_PRF_CacheOff
    oShell.LogEvent 0, "Office Outlook has been set-up without cache."
  End If

  'Delete First-Run key to simulate a first run for outlook. (i.e. if a profile was configured and deleted)
  oShell.RegDelete "HKCU\Software\Microsoft\Office\" & outlook_Version & "\Outlook\Setup\First-Run"

  'Outlook does not need to be run.
  'When a signature is being applied outlook will fire up it's initial boot and import the PRF settings.
  'With this PRF applied the signature will be applied immediately
End If

'Compare users' group membership against available signature settings
Set GroupsOfUser = GetMembership(oUser.distinguishedName, null)
tGroups = Array()
For Each GroupName in GroupsOfUser.Items()
  If Mid(GroupName, 1, Len(setup_GroupPrefix)) = setup_GroupPrefix Then
    ReDim Preserve tGroups(UBound(tGroups) + 1)
    tGroups(UBound(tGroups)) = GroupName
  end if
Next
tGroups = SortArray(tGroups)

For Each group in tGroups
  sFile = setup_Path_SignatureVBS & "\" & group & ".VBS"
  If oFile.FileExists(sFile) = True Then 'File containing specific signature settings were found
    Set Signature = new Defaults 'Use defaults

    'Evaluate signature settings
    executeGlobal oFile.openTextFile(sFile).readAll()

    'Check if signature needs updating
    sUpdate = false
    If oFile.FileExists(Signature.sPath) Then
      Set f = oFile.GetFile(Signature.sPath)
      If Signature.sVersion > f.DateLastModified Then
        sUpdate = true
      End If
    Else
      sUpdate = true
    End If

    If sUpdate Then 'Apply signature
      'Replace defaults with user specific data
      If Not oUser.FullName = "" Then Signature.uName = oUser.FullName 
      If Not oUser.mail = "" Then Signature.uMail = LCase(oUser.mail)
      If Not oUser.telephoneNumber = "" Then Signature.uPhone = oUser.telephoneNumber 
      If Not oUser.mobile = "" Then Signature.uCell = oUser.mobile 
      If Not oUser.facsimileTelephoneNumber = "" Then Signature.uFax = oUser.facsimileTelephoneNumber 
      If Not oUser.Title = "" Then Signature.uTitle = oUser.Title 
      If Not oUser.department = "" Then Signature.uDepartment = oUser.department 
      If Not oUser.info = "" Then Signature.uDisclaimer = oUser.info

      'Build signature
      Set oWord = CreateObject("Word.Application")
      Set oDoc = oWord.Documents.Add()
      Set oSelection = oWord.Selection
      executeGlobal oFile.openTextFile(setup_Path_Template & "\" & Signature.sTemplate).readAll() 'Evaluate signatre template
      Set oSelection = oDoc.Range()

      'Add signature to outlook
      oWord.EmailOptions.EmailSignature.EmailSignatureEntries.Add Signature.sName, oSelection
      WScript.Sleep 200 'Give outlook the time to create the necessary files

      'Set as default signature
      If Signature.sCompanyNew = "*" OR StrComp(oUser.company, Signature.sCompanyNew, vbTextCompare) = 0 Then oWord.EmailOptions.EmailSignature.NewMessageSignature = Signature.sName
      If Signature.sCompanyReply = "*" OR StrComp(oUser.company, Signature.sCompanyReply, vbTextCompare) = 0 Then oWord.EmailOptions.EmailSignature.ReplyMessageSignature = Signature.sName

      'Closure
      oDoc.Saved = True
      oWord.Quit
      WScript.Sleep 300 'Give work some time to clean up

      'Logging
      oShell.LogEvent 0, "Signature " & Signature.sName & " applied with success!"
    Else
      oShell.LogEvent 0, "Signature " & Signature.sName & " is up to date."
    End If

  Else
    oShell.LogEvent 1, "Signature script error. Cannot load signature settings from " & sFile
  End If
Next

' ##### CLASSES AND FUNCTIONS ######
Class Defaults
  'Signature properties
  Public sName 'Name of this signature
  Public sVersion 'Apply signature if version date is newer then client's signature date
  Public sTemplate 'Signature template to be used
  Public sCompanyNew 'If the user company field matches this value it will be set as the default 'new' signature
  Public sCompanyReply 'If the user company field matches this value it will be set as the default 'reply' signature

  'Company properties
  Public cName
  Public cStreet
  Public cBox
  Public cPostal
  Public cCity
  Public cState
  Public cCountry
  Public cMail
  Public cVat
  Public cWebsite
  Public cUrl
  Public cLogo
  Public cLogoPath
  Public cPhone
  Public cFax

  'User properties
  Public uName 
  Public uMail
  Public uPhone
  Public uCell
  Public uFax
  Public uTitle
  Public uDepartment
  Public uDisclaimer

  Private Sub Class_Initialize()
    me.sName = "The name of my signature"
    me.sVersion = CDate("1/10/2012")
    me.sTemplate = "Default.vbs"

    me.cName = "MY COMPANY NAME"
    me.cStreet = "Street"
    me.cBox = "123"
    me.cPostal = "ZIP"
    me.cCity = "CITY"
    me.cMail = "info@company.com"
    me.cVat = "VAT NUMBER"
    me.cWebsite = "www.company.com"
    me.cUrl = "http://www.company.com"
    me.cPhone = "+32 3 456 780"
    me.cFax = "+32 3 456 789"

    me.uName = "John Doe"
    me.uPhone = "+32 3 456 780"
    me.uFax = "+32 3 456 780"
  End Sub

  Public Property Get sPath()
    sPath = oShell.ExpandEnvironmentStrings("%AppData%") + "\Microsoft\" & oShell.RegRead("HKCU\Software\Microsoft\Office\" & outlook_Version & "\Common\General\Signatures") & "\" & me.sName & ".htm"
  End Property
End Class

Function SortArray(arrShort)
  Dim i, j, temp
  For i = UBound(arrShort) - 1 To 0 Step -1
    For j= 0 To i
      If arrShort(j)>arrShort(j+1) Then
        temp=arrShort(j+1)
        arrShort(j+1)=arrShort(j)
        arrShort(j)=temp
      End If
    Next
  Next
  SortArray = arrShort
End Function 

Function GetMembership(sChild, dMembership)
  'Get AD info on the given Child
  Set oChild = GetObject("LDAP://" & sChild)

  If TypeName(oChild) = "Object" Then
    'Add the Child's canonical name to the array IF it's a group
    If TypeName(dMembership) = "Dictionary" Then
      dMembership.Add oChild.distinguishedName, oChild.CN
    Else
      Set dMembership = CreateObject("Scripting.Dictionary")
    End If

    'If the Child has any parents (=groups), run the same loop for these parents.
    If TypeName(oChild.memberOf) = "Variant()" Then
      oParents = oChild.GetEx("memberOf")
      For Each sParent in oParents
        If Not dMembership.Exists(sParent) Then
          Set dMembership = GetMembership(sParent, dMembership)
        End If
      Next
    End If
  End If

  Set GetMembership = dMembership
End Function 
```

在签名“指南”下方。这些脚本必须与在 AD 中创建的组同名才能工作。当用户是 AD 组 Signature-Marketing 的成员时，它将运行`\\MyDomain.local\NETLOGON\Outlook\Signatures\Signature-Marketing.vbs`

```
'\\MyDomain.local\NETLOGON\Outlook\Signatures\MyGroupName.vbs

'Set specific default values
Signature.sVersion = CDate("3/12/2012 15:35")

Signature.sName = "The name of my signature"
Signature.sCompanyNew = "MY COMPANY NAME"
Signature.sCompanyReply = "MY COMPANY NAME"

Signature.cName = "MY COMPANY NAME"
Signature.cStreet = "Street"
Signature.cBox = "123"
Signature.cPostal = "ZIP"
Signature.cCity = "City"
Signature.cMail = "info@company.com"
Signature.cVat = "VAT NUMBER"
Signature.cWebsite = "www.company.com"
Signature.cUrl = "http://www.company.com"
Signature.cLogo = "\\MyDomain.local\NETLOGON\Outlook\IMG\MyCompanyLogo.png"
Signature.cPhone = "+32 3 456 780"
Signature.cFax = "+32 3 456 789"

Signature.uName = "John Doe"
Signature.uPhone = "+32 3 456 780"
Signature.uFax = "+32 3 456 789" 
```

在默认模板下方。此脚本在 Outlook.vbs 中进行评估

```
'\\MyDomain.local\NETLOGON\Outlook\Templates\Default.vbs

oSelection.Font.Name = "Calibri"
oSelection.Font.Size = 11
oSelection.TypeText Signature.uName
If Not Signature.uTitle = "" Then
  oSelection.TypeText Chr(11)
  oSelection.TypeText Signature.uTitle
End If

If Not Signature.uDisclaimer = "" Then oSelection.TypeText " (*)"

' ### Add company table & info
oSelection.TypeParagraph()

Set tbl = oDoc.Tables.Add(oSelection.Range, 1, 2)
Set oTable = oDoc.Tables(1)
tWidth = oTable.Cell(1, 1).width + oTable.Cell(1, 2).width

' Add company logo to cell 1
Set oCell = oTable.Cell(1, 1) 
Set oCellRange = oCell.Range 
oCell.Select 
Set oLogo = oSelection.InlineShapes.AddPicture(Signature.cLogo)
oLogo.LockAspectRatio = true
oLogo.height = oWord.PixelsToPoints(50)
oCell.width = oLogo.width

' Add company info to cell 2
If Signature.cVat = "" Then
  arrAddressInfo = Array(Signature.cName, Signature.cStreet & " " & Signature.cBox, Signature.cPostal & " " & Signature.cCity)
Else
  arrAddressInfo = Array(Signature.cName, Signature.cStreet & " " & Signature.cBox, Signature.cPostal & " " & Signature.cCity, Signature.cVat)
End If
strAddressInfo = Join(arrAddressInfo, " | ")

Set oCell = oTable.Cell(1, 2)
Set oCellRange = oCell.Range
oCell.Select 
oCell.width = tWidth - oLogo.width
oSelection.Font.Size = 10
oSelection.TypeText strAddressInfo

' Add phone number information
arrUserInfo = Array()
If Not Signature.uPhone = "" Then
  ReDim Preserve arrUserInfo(UBound(arrUserInfo) + 1) 
  arrUserInfo(UBound(arrUserInfo)) = "T " & Signature.uPhone
End If
If Not Signature.uCell = "" Then
  ReDim Preserve arrUserInfo(UBound(arrUserInfo) + 1) 
  arrUserInfo(UBound(arrUserInfo)) = "G " & Signature.uCell
End If
If Not Signature.uFax = "" Then
  ReDim Preserve arrUserInfo(UBound(arrUserInfo) + 1) 
  arrUserInfo(UBound(arrUserInfo)) = "F " & Signature.uFax
End If

strUserInfo = Join(arrUserInfo, " | ")

If Not strUserInfo = "" Then
  oSelection.TypeText Chr(11)
  oSelection.TypeText strUserInfo 
End If

oSelection.TypeText Chr(11)

' Add user mail address to cell 2
Set oLink = oSelection.Hyperlinks.Add(oSelection.Range, "mailto:" & Signature.uMail, , , Signature.uMail)
oLink.Range.Font.Color = oSelection.Font.Color
oLink.Range.Font.Size = 10

' Add company weblink to cell 2
oSelection.TypeText " | "
Set oLink = oSelection.Hyperlinks.Add(oSelection.Range, Signature.cUrl, , , Signature.cWebsite)
oLink.Range.Font.Color = oSelection.Font.Color
oLink.Range.Font.Size = 10

If Not Signature.uDisclaimer = "" Then oSelection.TypeText " | (*) " & Signature.uDisclaimer

tbl.Rows(1).Cells.VerticalAlignment = 1
oTable.AutoFitBehavior(1) 
```

`\\MyDomain.local\NETLOGON\Outlook\PRF\Outlook_Cached.PRF` `\\MyDomain.local\NETLOGON\Outlook\PRF\Outlook_NotCached.PRF`

创建您自己的 PRF 文件（引自 Microsoft TechNet）：

使用 Office 自定义工具创建 PRF 文件

1.  从网络安装点的根目录运行以下命令行以启动 Office 自定义工具：\server\share\setup.exe /admin
2.  要编辑现有的自定义文件 (.msp)，请在“选择产品”对话框中，单击“打开现有的安装程序自定义文件”。或者要创建新的自定义文件，请选择要自定义的 Office 套件，然后单击“确定”。
3.  在 Outlook 区域中，单击 Outlook 配置文件。选择您希望如何为用户自定义配置文件。要指定要包含在 .prf 文件中的设置，请选择 Modify Profile 或 New Profile。
4.  要添加和配置新帐户或修改或删除现有帐户，请单击“添加帐户”，然后单击“自定义其他 Outlook 配置文件和帐户信息”。
5.  完成 Outlook 配置文件配置后，在 Outlook 区域中，单击导出设置。
6.  单击导出配置文件设置按钮以创建新的 .prf 文件。输入文件名和保存文件的路径，然后单击保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T18:15:07.180

开源项目 GenerateSignatureFromLDAP 可以根据模板和取自 Active Directory 的值生成 Outlook 签名。这可以在启动脚本中设置（例如通过 GPO）。模板可以包含“if”语句以根据特定标准（例如当前日期或位置等 AD 属性）修改模板。

请参阅：[https ://sourceforge.net/projects/gensignfromldap/](https://sourceforge.net/projects/gensignfromldap/)

# javascript - Jquery .load 没有按预期工作

> ID：15790987
> 
> 赞同：2
> 
> 时间：2013-04-03T15:02:11.037
> 
> 标签：javascript, jquery, api, load

如何将一个页面中的 div 插入当前的 div 中。

我在下面使用 .Load 的方法有效，但已停止，我不确定原因。

```
$("#button").on('click', function() {
    $("#div").load('../url.aspx #div2');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:03:57.117

您正在使用的[.load()](http://api.jquery.com/load/)未被弃用 - 您正在考虑[加载](http://api.jquery.com/load-event/)事件。

关于您的代码 - 它应该可以工作。您提到它有时在尝试使用它的快捷方式时有效，`on()`但不适用于它的快捷方式`click()`- 也许您可以尝试刷新浏览器缓存或查看您认为可能导致此问题的代码的其他部分（可能是您尝试加载的内容）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:08:13.273

从1.8 开始不推荐使用事件[加载。](http://api.jquery.com/load-event/)

您所询问的[负载](http://api.jquery.com/load/)并未被弃用，仍然可以放心使用。

如果由于某种原因您仍想替换`load`，您可以使用任意数量的其他方法： `ajax`、`get`等。

# hibernate - Hibernate：具有相同标识符值的不同对象已与会话关联

> ID：15790988
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:11.847
> 
> 标签：hibernate, persistence, one-to-many

我确实看到了所有其他类似的问题，但没有一个解决方案能解决我的问题。

我有两个类：Person 和 PersonSynonym。一个人可以有很多同义词。Person 类中的 synonyms 属性如下所示：

```
@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
@JoinColumn(name = "person_id")
private Set<PersonSynonym> synonyms = Sets.newHashSet(); 
```

和 PersonSynonym 类：

```
 @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;
... (getters, setters, equals, hashcode, ...) 
```

如果我只向一个人添加一个同义词，则更新 Person 对象可以正常工作。一旦我尝试添加第二个同义词并尝试更新 person 对象，我就会收到此异常：

```
Caused by: org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [my.package.model.PersonSynonym#6] 
```

id 6 的同义词是已经存在的同义词。显然hibernate试图再次插入现有的......为什么？

**更新：**

将 JoinColumn 移动到 PersonSynonym 没有帮助，Person：

```
@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = "person_id")
private Set<PersonSynonym> synonyms = Sets.newHashSet(); 
```

人物近义词：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

private String name;

private Long person_id;

@ManyToOne
@JoinColumn(name = "person_id", referencedColumnName = "id", insertable = false, updatable = false)
private Person person; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:29:26.307

该`@JoinColumn`属性在错误的一侧。它必须在具有引用父类`PersonSynonym`的成员（可能是`personId`or ）的类中。`getPersonId`

# iphone - 当用户按下主页按钮时游戏完全关闭

> ID：15790990
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:17.483
> 
> 标签：iphone, objective-c, cocos2d-iphone

我从网上下载了一个用cocos2d开发的游戏。现在当我按下主页按钮时出现问题，然后应用程序完全运行。它也称为 applicationWillTerminate: 方法。现在我的问题是当用户按下主页按钮时，我不希望应用程序完全完全。有什么帮助吗？

```
- (void)applicationWillResignActive:(UIApplication *)application {
    [[CCDirector sharedDirector] pause];
}

- (void)applicationDidBecomeActive:(UIApplication *)application {

}

- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    [[CCDirector sharedDirector] purgeCachedData];
}

-(void) applicationDidEnterBackground:(UIApplication*)application {
    [[CCDirector sharedDirector] stopAnimation];
}

-(void) applicationWillEnterForeground:(UIApplication*)application {
    [[CCDirector sharedDirector] startAnimation];
}

- (void)applicationWillTerminate:(UIApplication *)application {
    CCDirector *director = [CCDirector sharedDirector];

    [[director openGLView] removeFromSuperview];

    [viewController release];

    [window release];

    [director end]; 
}

- (void)applicationSignificantTimeChange:(UIApplication *)application {
    [[CCDirector sharedDirector] setNextDeltaTimeZero:YES];
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T15:43:24.420

[Info.plist](http://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW1)是否包含密钥`UIApplicationExitsOnSuspend`？如果是这样，它将终止应用程序并且不进入后台。

如果您在装有 iOS 3.x 或更早版本的设备上运行（或者应用程序的部署目标设置为 iOS 3.x 或更早版本，现在应该不再可能了）应用程序将始终终止，因为后台应用程序不是在 iOS 4.0 之前的版本上受支持。

以下是[应用程序可能终止的更多原因](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW49)。特别是如果进入后台需要太长时间（5 秒以上），或者如果它消耗太多内存并且 iOS 需要释放一些内存。

# visual-studio - 在 lib.d.ts 中做一些更改

> ID：15790991
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:18.337
> 
> 标签：visual-studio, typescript

我们正在尝试将整个 Javascript 项目翻译成 Typescript。在这个项目中，我们使用了一个名为 的变量`Storage`，它是 Typescript 中的一个关键字/受保护的词。

这个变量用的比较多，改起来有点麻烦，所以我宁愿改`Storage`定义文件lib.d.ts中的。但是我不能告诉 Visual Studio 使用这个新版本的 lib.d.ts，它总是在编译时抛出错误，即使 Intelli-sense 工作正常。我可以在某处更改配置吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:02:46.503

该`lib.d.ts`文件仅描述了运行时可用的内容，在本例中为[DOM 存储接口](https://developer.mozilla.org/en-US/docs/DOM/Storage)。

删除冲突`lib.d.ts`不会在运行时删除任何冲突。

接口在 TypeScript 中是打开的这一事实提供了一种可能的临时修复，这将允许您添加到它，例如，您可以包含以下内容而不是更改`lib.d.ts`以进行编译...

```
interface Storage {
     myCustomThing(a: string): number;
} 
```

这将允许您将代码库编译并放入 TypeScript，此时您可以使用 Visual Studio 重构存储变量的名称以避免冲突。

这是[TypeScript Playground](http://www.typescriptlang.org/Playground/#src=interface%20Storage%20%7B%0A%20%20%20%20%20myCustomThing%28a%3a%20string%29%3a%20number;%0A%7D%0A%0Avar%20storage%20=%20new%20Storage%28%29;%0Astorage.myCustomThing%28%27input%27%29;)上的工作版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:07:21.910

I doubt that it's possible to change it in Visual Studio. You may want to take a look at here: [http://typescript.codeplex.com/discussions/429115](http://typescript.codeplex.com/discussions/429115)

# rspec - 旧 rspec 的等效构造

> ID：15790992
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:18.947
> 
> 标签：rspec, rspec2

我对旧版本的rspec不熟悉，现在我必须使用rspec 1.3.2

我有为最新的 rspec (~> 2.11) 构建的结构，它不适用于旧的：

```
MyClass.any_instance.should_receive(:my_method).with do |id, email, row|
  ...
  row.should be
  ...
end 
```

旧 rspec 版本的等效结构是什么？

# c - 移植,Linux,C

> ID：15790993
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:19.020
> 
> 标签：c, linux, porting

运行此命令时出现此错误

```
[root@himanshi busybox-1.20.2]# make ARCH=arm CROSS_COMPILE=arm-unknown-linux-gnueabi- CONFIG_PREFIX=/home/himanshi/beagleboard_xm/target install
    /home/himanshi/beagleboard_xm/build/busybox-1.20.2/scripts/gcc-version.sh: line 11: arm-unknown-linux-gnueabi-gcc: command not found
      CC      applets/applets.o
    /bin/sh: arm-unknown-linux-gnueabi-gcc: command not found
    make[1]: *** [applets/applets.o] Error 127
make: *** [applets_dir] Error 2 
```

事实上，我也收到错误命令未找到:: make ARCH=arm CROSS_COMPILE=arm-unknown-linux-gnueabi-

请帮助我解决这个问题。谢谢喜满士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:32:41.087

您应该将路径`arm-unknown-linux-gnueabi-gcc`放在 PATH 环境变量中，如下所示：

```
PATH=$PATH:/path/to/compiler
export PATH 
```

# openxml - docx 牢不可破的话

> ID：15790999
> 
> 赞同：2
> 
> 时间：2013-04-03T15:02:32.290
> 
> 标签：openxml

我正在尝试替换 docx 文件中的单词，如下[所述](http://msdn.microsoft.com/en-us/library/office/bb508261.aspx)：

```
public static void SearchAndReplace(string document)
{
    using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(document, true))
    {
        string docText = null;
        using (StreamReader sr = new StreamReader(wordDoc.MainDocumentPart.GetStream()))
        {
            docText = sr.ReadToEnd();
        }

        Regex regexText = new Regex("Hello world!");
        docText = regexText.Replace(docText, "Hi Everyone!");

        using (StreamWriter sw = new StreamWriter(wordDoc.MainDocumentPart.GetStream(FileMode.Create)))
        {
            sw.Write(docText);
        }
    }
} 
```

这很好用，只是有时对于文档中的 SomeTest 你会得到类似的东西：

```
 <w:t>
        Some
    </w:t>
</w:r>

<w:r w:rsidR="009E5AFA">
    <w:rPr>
        <w:b/>
        <w:color w:val="365F91"/>
        <w:sz w:val="22"/>
    </w:rPr>
    <w:t>
        Test
    </w:t>
</w:r> 
```

当然更换失败。也许有一种解决方法可以使 docx 中的某些单词牢不可破？或者也许我做错了替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:38:04.950

解决此问题的一种方法是在进行转换之前对文档的 xml 进行规范化。您可以使用[OpenXml Powertools](http://powertools.codeplex.com/)来执行此操作。

规范化 xml 的示例代码

```
 using (WordprocessingDocument doc =
            WordprocessingDocument.Open("Test.docx", true))
        {
            SimplifyMarkupSettings settings = new SimplifyMarkupSettings
            {
                NormalizeXml = true, // Merges Run's in a paragraph with similar formatting
                // Additional settings if required
                AcceptRevisions = true,
                RemoveBookmarks = true,
                RemoveComments = true,
                RemoveGoBackBookmark = true,
                RemoveWebHidden = true,
                RemoveContentControls = true,
                RemoveEndAndFootNotes = true,
                RemoveFieldCodes = true,
                RemoveLastRenderedPageBreak = true,
                RemovePermissions = true,
                RemoveProof = true,
                RemoveRsidInfo = true,
                RemoveSmartTags = true,
                RemoveSoftHyphens = true,
                ReplaceTabsWithSpaces = true
            };
            MarkupSimplifier.SimplifyMarkup(doc, settings);
        } 
```

这将简化 Open Xml 文档的标记，使进一步的转换更容易以编程方式处理文档。在以编程方式处理打开的 xml 文档之前，我总是使用它。

可以在[此处找到有关使用这些工具的更多信息，并在](http://ericwhite.com/blog/2011/03/09/getting-started-with-open-xml-powertools-markup-simplifier/)[此处](http://blogs.msdn.com/b/ericwhite/archive/2010/02/08/enabling-better-transformations-by-simplifying-open-xml-wordprocessingml-markup.aspx)找到一篇不错的博客文章。