# StackOverflow 问答 15413000-15413999

# r - 通过降低 R 中的频率来订购绑定的 data.frame

> ID：15413001
> 
> 赞同：2
> 
> 时间：2013-03-14T15:10:28.030
> 
> 标签：r, sorting, dataframe

我知道在 R 中按频率排序非常简单。给定一个 data.frame`df`和一个`column1`带有数值的列：

```
order(df$column1,decreasing=T) 
```

我的 data.frame 是`rbind()`在较小的 data.frames 上使用的结果。每个原始 data.frame 都有一个列`Trial`，其值范围从 1 到 nrow(GralData)，尽管缺少一些数字（由于异常值删除）。另一列被调用`TrialType`并且可以有两个可能的字符值：`"Regular"`或`"Random"`

我想做的是用 GralData 创建两个 data.frames。一个只包含`Regular`在 TrialType 中，一个只包含`Random`. 此外，我希望 new.data.frame 根据 的值递减排序`Trial`。这就是我正在使用的：

```
GralData_Regular <- GralData[GralData$TrialType=="Regular" & order(GralData$Trial,decreasing=TRUE),] 
```

但是，相反，此命令对行进行排序，同时牢记行来自的 data.frames。因此，不是将所有数据混合，而是*仅*根据`Trial`列值的标准进行排序，值首先按 data.frame 排序，然后按 的值排序`Trial`。所以该`Trial`列看起来像：

```
 1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,etc... 
```

我希望它是

```
1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,etc... 
```

我希望我说清楚了。这是一个很小的问题，我确信我一定遗漏了一些基本的东西，但我在谷歌上广泛搜索，并没有找到任何关于该问题的参考。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:13:10.777

您必须分两步完成：

```
## Subset the original data frame    
GralData_Regular <- GralData[GralData$TrialType=="Regular",]
## Sort it
GralData_Regular <- GralData_Regular[order(GralData_Regular$Trial,decreasing=TRUE),] 
```

`&`运算符用于组合逻辑向量。这里您的第一个条件是逻辑向量 ( `GralData$TrialType=="Regular"`)，但您的第二个条件是数字 ( `order(GralData$Trial,decreasing=TRUE)`)。

# shell - 减少闭包编译器 jvm 启动时间

> ID：15413003
> 
> 赞同：1
> 
> 时间：2013-03-14T15:10:28.823
> 
> 标签：shell, jvm, google-closure-compiler

## 背景：与git的持续集成

我有这个简单的 shell 脚本：

```
#!/bin/sh

files=`find $1 -type f -name "*.js"`

for i in $files;
do
  echo "closure compile: $i"
  java -client -jar /var/closure-compiler/compiler.jar --js $i --js_output_file $i --compilation_level SIMPLE_OPTIMIZATIONS
done 
```

`post-receive`在一个钩子中被调用，之后`git checkout -f`

本质上，我想压缩（**但不合并**）工作目录（实际上是网站根目录）中的所有 javascript 文件。

## 问题

每个`java`显然都启动了一个自己的 JVM，这大约需要 3 秒，而编译器本身（启动时）只需要几分之一秒。如果我有 10 个 js 文件，这是 30 秒的等待时间。虽然[这对我来说实际上是积极的](http://xkcd.com/303/)，但我想尽量减少这段时间。

我查看了`--module`参数，它可以让我定义“多个输出文件”，但它将它们都放在同一个目录中。

我愿意接受建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:56:32.257

人们使用 Nailgun 取得了很好的成功：http: [//www.martiansoftware.com/nailgun/](http://www.martiansoftware.com/nailgun/)

这使JVM保持加载。

# delphi - 从 BLOB 读写 TMemoryStream

> ID：15413008
> 
> 赞同：1
> 
> 时间：2013-03-14T15:10:39.217
> 
> 标签：delphi, delphi-xe2, accuracerdb

如何将 TMemoryStream 存储到 BLOBB 字段并使用 Accuracer DB / SQL 从中读取。对于 SQL，我的意思是 ABSQuery..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:31:49.717

[BLOB 字段的文档](http://www.componentace.com/help/absdb_manual/accessingblobfields.htm)向您展示了如何操作。那里的代码演示了将文件存储到 BLOB 字段中，但您可以调整它以存储任何类型的流的内容，而不仅仅是 TFileStream。关键是创建一个 BLOB 流，然后调用`CopyFrom`，它将一个流的内容复制到另一个流中。

```
ABSTable1.Edit;
try
  BlobStream := ABSTable1.CreateBlobStream(Field, bmWrite) as TABSBlobStream;
  try
    BlobStream.CopyFrom(Stream, 0);
  finally
    BlobStream.Free;
  end;
  ABSTable1.Post;
except
  ABSTable1.Cancel;
  raise;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:21:21.440

以下示例将备注字段中的数据读取到 Blob 流中，并将其显示在备注控件中。

```
procedure TForm1.Button2Click(Sender: TObject);
var
Buffer: PChar;
MemSize: Integer;
Stream: TACRBlobStream;
begin
Stream := TACRBlobStream.Create(MyAccuracer.FieldByName('Notes') as TBlobField, bmRead);
try
MemSize := Stream.Size;
Inc(MemSize); //Make room for the buffer's null terminator.
Buffer := AllocMem(MemSize); //Allocate the memory.
try
Stream.Read(Buffer^, MemSize); //Read Notes field into buffer.
Memo1.SetTextBuf(Buffer);// Display the buffer's contents.
finally
FreeMem(Buffer, MemSize);
end;
finally
Stream.Free;
end;
end; 
```

从这里：

[http://www.aidaim.com/products/acr/guide_bde_alternative_client-server_single-file_embedded_bde_replacement_database_delphi_c++builder_kylix/blob_fields_use.php](http://www.aidaim.com/products/acr/guide_bde_alternative_client-server_single-file_embedded_bde_replacement_database_delphi_c++builder_kylix/blob_fields_use.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:40:55.790

你的问题对我来说不是很清楚（看看答案和你的评论，其他人都一样）。所以这只是在黑暗中拍摄...

Absolute Database 有一个转换函数[`MimeToBin`](http://www.componentace.com/help/absdb_manual/dataconversionfunctions.htm)，可以将 MIME 编码（字符串）值转换为二进制数据类型。

样本`MimeToBin`（样本数据只是`Hello World`）

```
INSERT INTO table ( BinData )
VALUES ( MimeToBin( 'SGVsbG8gV29ybGQ=' ) ) 
```

要从流中获取这样的`Base64`编码字符串，请使用`ABSDecUtil.TStringFormat_MIME64`.

```
uses
  ABSDecUtil; 

function BuildSQLFromStream( AStream : TMemoryStream ) : string;
var
  LCoder : TStringFormat_MIME64;
begin
  LCoder := TStringFormat_MIME64.Create;
  try
    RESULT := 
      'INSERT INTO table ( BinData ) ' +
      'VALUES( MimeToBin( ' + 
      QuotedStr( 
        LCoder.StrTo( 
          AStream.Memory, 
          AStream.Size ) ) + 
      ' ) )';
  finally
    LCoder.Free;
  end;
end; 
```

由于这只是一点点抽象，您可以[从 Component Ace 获取示例项目](http://www.componentace.com/blobs-in-sql-delphi.htm)

# r - 具有名称的相关矩阵

> ID：15413009
> 
> 赞同：7
> 
> 时间：2013-03-14T15:10:43.763
> 
> 标签：r

我有一个大约 1000 行 X 500 变量的矩阵，我试图用名称而不是数字为这些变量建立一个相关矩阵，所以结果应该是这样的

```
variable1    variable2    variable3    variable4 ...
  mrv1         mrv2         mrv3          mrv4   ...
 smrv1        smrv2        smrv3          smrv4   ...
   .             .           .             .
   .             .           .             .
   .             .           .             . 
```

其中 mrv1 = 与变量 1 最相关的变量，smrv1 = 第二最相关的变量，依此类推。

我实际上已经制作了相关矩阵，但是使用了一个 for 循环和一个非常复杂的命令（可能是有史以来最糟糕的命令，但它确实有效！）。我期待通过适当的命令来建立这一点，这是我现在使用的命令。

```
mydata <- read.csv("location", header=TRUE, sep=",")
lgn <- length(mydata)
crm <- cor(mydata)

k <- crm[,1]
K <- data.frame(rev(sort(k)))
A <- data.frame(rownames(K))

for (x in 2:lgn){
k <- crm[,x]
K <- data.frame(rev(sort(k)))
B <- data.frame(rownames(K)) 
A <- cbind(A,B)
} 
```

关于更简单、更可靠的命令的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:25:42.917

这个例子对你想要的有用吗？

```
W <- rnorm( 10 )
X <- rnorm( 10 )
Y <- rnorm( 10 )
Z <- rnorm( 10 )

df <- round( cor( cbind( W , X , Y , Z ) ) , 2 )
df
#         W     X     Y     Z
#   W  1.00 -0.50 -0.36 -0.27
#   X -0.50  1.00 -0.42 -0.02
#   Y -0.36 -0.42  1.00  0.17
#   Z -0.27 -0.02  0.17  1.00

apply( df , 2 , FUN = function(x){ j <- rev(order(x)); y <- names(x)[j]  } )
#        W   X   Y   Z  
#   [1,] "W" "X" "Y" "Z"
#   [2,] "Z" "Z" "Z" "Y"
#   [3,] "Y" "Y" "W" "X"
#   [4,] "X" "W" "X" "W"

#And use abs() if you don't care about the direction of the correlation (negative or postive) just the magnitude
apply( df , 2 , FUN = function(x){ j <- rev(order(   abs(x)   )); y <- names(x)[j]  } )
#        W   X   Y   Z  
#   [1,] "W" "X" "Y" "Z"
#   [2,] "X" "W" "X" "W"
#   [3,] "Y" "Y" "W" "Y"
#   [4,] "Z" "Z" "Z" "X" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:33:06.520

要可视化相关矩阵中的关系，您可以考虑进行聚类分析。使用一减去相关矩阵作为距离矩阵（或者可能是一减去相关矩阵的绝对值），然后将其传递给类似函数`agnes`或其他聚类函数。排序和情节可能会提供信息。

# ios - 带有块的 Objective-C 延迟动作

> ID：15413014
> 
> 赞同：52
> 
> 时间：2013-03-14T15:10:50.453
> 
> 标签：ios, objective-c, cocoa-touch

我知道在 Objective-C 中有几种延迟动作的方法，例如：

```
performSelector:withObject:afterDelay: 
```

或使用`NSTimer`.

但是有一种奇特的东西叫做块，你可以在其中做这样的事情：

```
[UIView animateWithDuration:1.50 delay:0 options:(UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionBeginFromCurrentState) animations:^{

    }completion:^(BOOL finished){
}]; 
```

不幸的是，这种方法只适用于动画。

如何在*一种方法*中使用块创建延迟，这样我就不必使用所有这些`@selectors`并且无需创建**新的单独方法**？谢谢！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-03-14T15:13:09.147

使用 dispatch_after：

```
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    //code to be executed on the main queue after delay
    [self doSometingWithObject:obj1 andAnotherObject:obj2];
}); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-03-28T00:47:00.937

扩展已接受的答案，我为那些不想在每次想要执行此操作时记住语法的人创建了一个 Helper 函数:) 我只是有一个 Utils 类：

用法：

```
[Utils delayCallback:^{
     //--- code here
} forTotalSeconds:0.3]; 
```

辅助方法：

```
+ (void) delayCallback: (void(^)(void))callback forTotalSeconds: (double)delayInSeconds{

     dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
     dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
           if(callback){
                callback();
           }
      });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-18T13:20:24.903

Xcode 11.3.1（至少，以及其他版本的 Xcode）提供了一个代码片段来执行此操作，您只需输入延迟值和您希望在延迟后运行的代码。

1.  单击`+`Xcode 右上角的按钮。
2.  搜索`after`
3.  它将仅返回 1 个搜索结果，即所需的片段（见屏幕截图）。双击它，你就可以开始了。

[![说明如何从 Xcode 本身中获取代码段的屏幕截图](../Images/ce8444ecf24d01fdb5e5155b037b3ce2.png)](https://i.stack.imgur.com/zJ0uv.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-01T22:30:08.860

以下是在 Swift 中延迟后触发块的方法：

```
runThisAfterDelay(seconds: 4) { () -> () in
    print("Prints this 4 seconds later in main queue")
    // Or just call animatedMyObject() right here
}

/// EZSwiftExtensions
func runThisAfterDelay(seconds seconds: Double, after: () -> ()) {
    let time = dispatch_time(DISPATCH_TIME_NOW, Int64(seconds * Double(NSEC_PER_SEC)))
    dispatch_after(time, dispatch_get_main_queue(), after)
} 
```

它作为标准功能包含在我的仓库中： [https ://github.com/goktugyil/EZSwiftExtensions](https://github.com/goktugyil/EZSwiftExtensions)

# actionscript-3 - 堆叠动态文本字段 Flash/ActionScript 3

> ID：15413018
> 
> 赞同：3
> 
> 时间：2013-03-14T15:11:07.483
> 
> 标签：actionscript-3, flash, actionscript, textfield

我正在通过基于 XML 文件的循环添加一系列文本字段。字段的宽度总是`200 px`如此取决于 XML 节点中包含多少文本，文本字段的高度会有所不同。我需要一种方法来根据它们的高度将这些字段堆叠在一起，再加上每个字段`10 px`之间的空格。下面是我如何创建文本字段。

```
for(var i:int; i < xml.item.length(); i++)
{
    var theText:TextField = new TextField();
    addChild(theText);
    theText.wordWrap = true;
    theText.width = 200;
    theText.antiAliasType = AntiAliasType.ADVANCED;
    theText.autoSize = TextFieldAutoSize.LEFT;
    theText.selectable = false;
    theText.htmlText = xml.item[i].@theText;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:16:50.993

您可以使用文本字段的高度来跟踪高度。

```
var startHeight:int = 0;
for(var i:int; i < xml.item.length(); i++)
{
    var theText:TextField = new TextField();
    addChild(theText);

    theText.y = startHeight;

    theText.wordWrap = true;
    theText.width = 200;
    theText.antiAliasType = AntiAliasType.ADVANCED;
    theText.autoSize = TextFieldAutoSize.LEFT;
    theText.selectable = false;
    theText.htmlText = xml.item[i].@theText;

    startHeight += theText.height + 10;
} 
```

# php - 如何通过 AJAX 从其他选择框更改选择框选项

> ID：15413021
> 
> 赞同：0
> 
> 时间：2013-03-14T15:11:19.710
> 
> 标签：php, jquery, ajax, json

我有一个弹出表单，里面有两个下拉菜单。根据第一个中选择的选项，我必须更改第二个中的可能选项。由于信息在数据库中，所以我必须通过 Ajax 检查哪些信息。

这是一个示例结果：

```
$arr = {
    "1" => array("1","first","ref1"),
    "2" => array("2","second","ref2"),
    "3" => array("3","third","ref3")
}; 
```

您能否帮助我了解如何传递此数组以及如何将这些选项分配给第二个选择框。
我现在有以下代码，效果很好。
函数 onChangeBrand(){
var brandId = $('#brand').val();
$.ajax({
type: "POST",
datatype: 'json',
url: "items/getModel",
data: {brandId : brandId},
success: function(data) {
//
}
}); 我收到一个看起来像包含以下信息的字符串的数据： [
{ "model_id":"5","name":"M1132"},{"model_id":"4","name":"ProBook 6470 "}]

如何将此信息传输到 jquery 数组中并将其作为选项传递给第二个下拉菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:13:23.113

您可以从服务器获取一个带有一些数据的 Json 对象，并通过它们循环使用 Javascript 动态创建选项：

```
for(var i in options){
  option       = $('<option>');
  option.value = options[i].value;
  option.append(options[i].text);
  select2.append(option);
} 
```

[plunker](http://plnkr.co/edit/91j9Go0Yfjif6mScJT39?p=preview)中的示例工作代码。
希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T05:30:43.517

您可以对这段代码使用 try -

```
 var secondSelect=$('#secondselectid');
     var dataString=[{"model_id":"5","name":"M1132"}, {"model_id":"4","name":"ProBook 6470"}];    
     $(dataString).each(function(key,val){
         var selectoption=$('<option>');
         selectoption.value = val.model_id;
         selectoption.append(val.name);
        $(secondSelect).append(selectoption); 
      }); 
```

# c++ - 如何使用 boost property_tree 创建 xml

> ID：15413022
> 
> 赞同：1
> 
> 时间：2013-03-14T15:11:26.387
> 
> 标签：c++, boost, xml-parsing

我需要为我的输出创建 xml。我有一个索引名称列表。我想以一种格式将其填充到 xml 文件中。

那是

```
<response>
      <indexes>
          <index>abc</index>
          <index>xyz</index>
          <index>pqr</index>
      </indexes>
</response> 
```

我的向量 index_list 中有该列表。

谁能帮我吗。

我已经为此尝试了一些代码。接下来

```
boost::property_tree::ptree tree;
stringstream output;
for (std::vector<string>::const_iterator it = index_list.begin();
        it != index_list.end(); it++) {
    std::cout << *it << "\n";
    tree.put("response.indexes.index", *it);
}
if (format == "xml") {
    write_xml(output, tree);
} else {
    write_json(output, tree);
} 
```

当我运行上面的代码时。我只得到列表中的姓氏。那是

```
<response>
  <indexes>
      <index>pqr</index>
  </indexes>
</response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:35:05.290

该`put`方法将删除任何现有值，请参阅[此处](https://stackoverflow.com/questions/13072704/boost-property-tree-multiple-values-per-key)相关的较早问题。

您必须为您的逻辑列表中的每个条目使用不同的键以避免数据丢失。

[Boost 文档](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_propertytree/accessing.html)说

> 调用 put 将在指定路径插入一个新值，以便调用 get 指定相同路径将检索它。

# c# - 如何使用 SilverLights Linq-to-SQL 从数据库中删除一行

> ID：15413026
> 
> 赞同：0
> 
> 时间：2013-03-14T15:11:38.413
> 
> 标签：c#, silverlight, linq-to-sql

我有一个 SQL 表，我想使用 SilverLight Linq-to-SQL 删除一行。我是 Linq-to-SQL 的新手，但 SQL 语句应该是

```
DELETE FROM Lloyds_Selection_Vessel WHERE Selection_ID == inpSelectionID AND ImoNumber == inpImoNumber 
```

什么是 Linq-to-SQL 语句？这是我的代码：

```
[OperationContract]
void DeleteSelectionVesselRow(int inpSelectionID, int inpImoNumber)
{
    PositionDataClassesDataContext context = new PositionDataClassesDataContext();

    context.Lloyds_Selection_Vessels.DeleteAllOnSubmit(context.Lloyds_Selection_Vessels.Where(l => l.Selection_ID == inpSelectionID && x => x.ImoNumber == inpImoNumber));
    context.SubmitChanges();
} 
```

桌子：

![在此处输入图像描述](../Images/0f22a2ad5a1ff89e4a790d9e64aa03bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:29:50.947

您的 LINQ Where 函数不应该改为： .Where(l => l.Selection_ID == inpSelectionID && l.ImoNumber == inpImoNumber) 吗？

# java - Java：拆分字符串并将它们放入文本区域的

> ID：15413029
> 
> 赞同：-9
> 
> 时间：2013-03-14T15:11:41.833
> 
> 标签：java, swing

我有一种方法可以将名称及其分数保存到文本文件中。现在我制作了一个“高分”按钮，调用一个从高分文本文件中读取的方法。现在这个输出非常难看，所以我想把名字放在一个文本区域，把分数放在另一个文本区域，这样它们就被均匀地分开了。

我怎样才能做到这一点？

提前致谢

我当前的输出：![电流输出](../Images/e8d1598cf75e3d9e3bbc8d965f2f2987.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:24:39.287

听起来您真正想要的是一种处理姓名和分数对齐的方法。您可以使用 Java 对[格式字符串](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)的支持来自动填充*名称*字段并为其指定最大宽度，从而将所有分数对齐在同一列中：

```
String.format("%-20.20s %s", "Name", "Score") 
```

这将填充每个名称以使其宽度为 20 个字符，如果名称超过 20 个字符，也会截断该名称，使其不会溢出到分数区域。您可以将`20`上面更改为您认为合理的任何宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:16:59.990

假设文件的格式是这样的：

> 姓名;分数\n
> 其他姓名;其他分数\n
> ...

你可以这样做：

```
BufferedReader br = new BufferedReader(...); // Initialize a buffered reader reading from that text file.
String line;
while ((line = br.readLine() != null) {
    String name = line.split(";")[0];
    String score = line.split(";")[1];
    namesTextArea.append(name + "\n");
    scoresTextArea.append(score + "\n");
} 
```

我希望它有帮助！

# javascript - jQuery+数组/json？

> ID：15413030
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:11:44.140
> 
> 标签：javascript, arrays, json

假设我有这个数组

```
[{k:2, v:"Stack"}, {k:5, v:"Over"}, , {k:9, v:"flow"}] 
```

如何选择值 <= 5 的所有键之类的元素？或奇数键上的前 2 个元素或所有值（拼写溢出）

我不想使用 for/foreach 循环。我正在寻找类似 jquery 的东西，我可以将一些东西应用于它匹配的所有内容。有点像这如何将 newclassproperty 应用于具有 group 类的 dom 的所有内部

```
$('.group a').addClass('newclassproperty') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:15:50.767

使用[`array.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)，您将看不到循环：

```
lessThan5 = array.filter(function (elem) {
    return elem.k <= 5;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:18:11.013

根据您需要的浏览器支持，您可能正在寻找[JavaScript 1.6 Array.filter 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。

```
var arr = [{k:2, v:"Stack"}, {k:5, v:"Over"}, , {k:9, v:"flow"}]
var odds = arr.filter(function(item, index) {
  return !(item.k % 2)
});
var small = arr.filter(function(item, index) {
  return item.k < 5
});
var first = arr.slice(0, 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:18:31.217

```
$.each(result_data_array_from_json, function(key, value) {
      if(key <= 5){
             //your statements
      }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:34:17.357

由于目前的[性能原因](https://stackoverflow.com/questions/14647470/performance-of-jquery-grep-vs-array-filter)，我建议使用普通循环并将其封装到自定义函数中（例如，通过扩展`Array.prototype`或使用您自己的包装函数）或使用 jQuery（=overkill）来完成此类任务。

```
var t = [{k:2, v:"Stack"}, {k:5, v:"Over"}, , {k:9, v:"flow"}];
var r = [];

r = t.filter(function (elem) {
    return elem.k <= 5;
}); 
```

对比

```
for (var i = 0, l = t.length;i<=l;i++){
   if(t[i] && t[i].k <= 5){r.push(t[i])}
} 
```

请参阅具体案例的[性能测试](http://jsperf.com/array-prototype-filter-vs-plain-loop)。

# visual-studio-2008 - VS2008 .NET3.5 安装项目无法从 VS2012 / .NET4.0 添加 exe 或 dll

> ID：15413031
> 
> 赞同：1
> 
> 时间：2013-03-14T15:11:51.660
> 
> 标签：visual-studio-2008, .net-4.0, .net-3.5, setup-project

我们有一个使用**VS2008 .NET3.5**开发的旧 Windows 应用程序。

我们有一个新的第 3 方“工具”应用程序，包含使用**VS2012 和 .NET4.0**开发的 exe 和 dll 。

目的是让旧应用程序将此第 3 方工具部署在其*Application Folder*的子文件夹中。我们已经以这种方式部署了一个单独的 VS2010 .NET3.5 3rd 方工具。因此，我知道将第 3 方 dll 和 exe 添加到*安装*项目是正常做法。

**问题：**

我无法将这些新文件添加到*安装*项目。

来自我的 VS2008 解决方案的*安装*项目。我选择*File System Editor并在**Application Folder*下创建适当的子文件夹。然后我尝试通过右键单击来添加第 3 方 VS2012 .NET4.0 dll 和 exe 文件以调出相应的上下文菜单，我可以在其中尝试***添加******File ...***或Assembly ***...***。我得到的只是对话框：“操作无法完成”。

我试过以管理员身份运行，也试过在同事的电脑上运行。结果相同。

拖网搜索表明，原则上应该没有问题。我认为困难在于VS2008试图通过不将这些视为匿名文件来过于聪明。

原因，想法和解决方案？

**额外的：**

我什至尝试将这些文件部署为内容。安装程序现在构建但默默地忽略它们。

# c++ - C ++中的“cv-unqualified”是什么意思？

> ID：15413037
> 
> 赞同：65
> 
> 时间：2013-03-14T15:12:03.170
> 
> 标签：c++, c++-faq

从主题。我在最近提出的一个问题中看到了这个术语，显然这是一个成熟的术语，但我在 stackoverflow 上找不到任何东西。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-14T15:21:08.900

有基本类型和复合类型。基本类型是算术类型`void`、 和`std::nullptr_t`。复合类型是数组、函数、指针、引用、类、联合、枚举和指向非静态成员的指针。

*cv-unqualified*类型是这些类型中的任何一种。

对于任何 cv-unqualified 类型，都有 3 个对应*的 cv-qualified*类型：

*   *const-qualified* - 带有`const`cv 限定符
*   *volatile-qualified* - 带有`volatile`cv 限定符
*   *const-volatile-qualified* - 同时具有 the`const`和`volatile`cv 限定符

但是请注意，应用于数组类型的 cv 限定符实际上应用于其元素。

cv-qualified 和 cv-unqualified 类型是不同的。那是`int`与`const int`.

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-03-14T15:15:23.757

如果一个类型没有任何 cv 限定符，则它是“cv-unqualified”。cv 限定符是`const`或`volatile`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-14T15:18:08.827

cv 代表`const`and `volatile`（并且很少见`mutable`），两个属性限定一个类型。您可以`std::remove_const`在 C++11 中使用等操作它们。

优秀的 cppreference 站点[为您提供更多](http://en.cppreference.com/w/cpp/language/cv)信息。

要回答您的问题，cv 不合格类型要么没有，要么已从其 cv 限定符中删除。例如`int`是 的 cv 不合格部分`const volatile int`。

`std::remove_cv<T>::type`是 cv 不合格的部分`T`。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-14T15:26:46.873

***cv-unqualified 类型***是尚未由任何*cv-qualifiers*指定的类型。它们定义了一个类型的两个基本属性： ***constness***和***Volatility***。参见*C++03 3.9.3 CV-qualifiers §1：*

> 3.9.1 和 3.9.2 中提到的类型是***cv-unqualified type***。每个类型是 cv 非限定的完整或不完整对象类型或 void (3.9) 具有其类型的三个对应的 cv 限定版本：
> 
> *   一个*const 限定的*版本，
> *   一个*volatile 限定的*版本，和
> *   一个*const-volatile 限定的*版本。
> 
> 术语对象类型 (1.8) 包括创建对象时指定的 cv 限定符。
> 
> **`const`**decl-specifier-seq 中的说明符的存在声明了一个***const 限定***对象类型的对象；这样的对象称为 a **`const object`**。
> 
> **`volatile`**decl-specifier-seq 中指定符的存在声明了一个***volatilequalified***对象类型的对象；这样的对象称为 a **`volatile object`**。
> 
> declspecifier-seq 中两个 cv 限定符的存在声明了一个***const-volatile 限定***对象类型的对象；这样的对象称为 a **`const volatile object`**。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-14T15:16:33.100

通常它的意思是“相同的类型，但删除了任何 cv-qualifier”，所以（例如） cv-unqualified 版本`void volatile * const x`将是`void *x`.

但是请注意，在这里，我从指针本身*及其*指向的内容中删除了 cv 限定符。在大多数情况下，`cv-unqualified`一次只引用一个对象，因此指针本身的 cv 不合格版本仍然是`void volatile *x`，而指针指向的内容的 cv 不合格版本将是`void *const x`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-20T14:55:04.170

**我认为第一步是了解可能的类型和 CV 的含义：**

**const 和 volatile**出现在任何类型说明符中，包括声明语法的 decl-specifier-seq，以指定被声明对象或被命名类型的 constness 或易失性。

**const** - 定义类型是常量。

**volatile** - 定义类型为 volatile。

***解释***

对于任何类型 T（包括不完整类型），除了函数类型或引用类型，C++ 类型系统中还有另外三种不同的类型：const-qualified T、volatile-qualified T 和 const-volatile-qualified T。

注意：数组类型被认为具有与其元素类型相同的 cv 限定。首次创建对象时，使用的 cv 限定符（可能是 decl-specifier-seq 的一部分或声明中的声明符的一部分或 new 表达式中的 type-id 的一部分）确定对象的常量或易变性对象，如下：

**const object -**类型为 const 限定的对象或 const 对象的非可变子对象。这样的对象不能被修改：直接尝试这样做是编译时错误，并且尝试间接这样做（例如，通过引用或指向非 const 类型的指针修改 const 对象）会导致未定义的行为。

**易失性对象 -**类型为 volatile 限定的对象，或 volatile 对象的子对象，或 const-volatile 对象的可变子对象。通过 volatile 限定类型的 glvalue 表达式进行的每个访问（读取或写入操作、成员函数调用等）都被视为用于优化目的的可见副作用（即，在单个执行线程中，volatile访问不能被优化或重新排序，另一个可见的副作用在 volatile 访问之前或之后排序。这使得 volatile 对象适合与信号处理程序通信，但不适用于与另一个执行线程通信，请参阅 std::memory_order ）。任何通过非易失性左值（例如，通过对非易失性类型的引用或指针）引用易失性对象的尝试都会导致未定义的行为。

**const volatile 对象**- 类型为 const-volatile 限定的对象、const volatile 对象的非可变子对象、volatile 对象的 const 子对象或 const 对象的非可变 volatile 子对象。既可以作为 const 对象，也可以作为 volatile 对象。

参考：Cpp 参考

# android - 尝试从远程 MP3 文件 Android 检索元数据时出错

> ID：15413038
> 
> 赞同：1
> 
> 时间：2013-03-14T15:12:04.310
> 
> 标签：android, streaming, mp3, metadata, android-mediaplayer

我正在开发适用于 Android 的 Radio Streming 应用程序。MediaPlayer 类很好地接收和播放了音乐，但问题是当我尝试检索元数据时，应用程序阻塞并返回错误。这是代码：

```
package com.tests.mediaplayer1;
import java.io.IOException;
import android.media.AudioManager;
import android.media.MediaMetadataRetriever;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity {

private Button btn_prev;
private Button btn_pause;
private Button btn_play;
private Button btn_next;
private TextView txt_song_title;
private SeekBar seekBar_volume;

private MediaPlayer mediaPlayer;
private MediaMetadataRetriever retriever;
private String url = "http://support.k-designed.net/test-z/music/Accordossie.mp3"; 
private AudioManager audioManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn_prev = (Button) findViewById(R.id.btn_prev);
    btn_pause = (Button) findViewById(R.id.btn_pause);
    btn_play = (Button) findViewById(R.id.btn_play);
    btn_next = (Button) findViewById(R.id.btn_next);
    txt_song_title = (TextView) findViewById(R.id.txt_song_title);
    seekBar_volume = (SeekBar) findViewById(R.id.seekBar_volume);
    mediaPlayer = new MediaPlayer();
    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

     audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
     int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
     int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

     seekBar_volume.setMax(maxVolume);
     seekBar_volume.setProgress(curVolume);

     seekBar_volume.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);

        }
    });

    btn_play.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            try {
                mediaPlayer.setDataSource(url);
                retriever.setDataSource(url);
                mediaPlayer.prepare(); // might take long! (for buffering, etc)
                mediaPlayer.start();
                txt_song_title.setText(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE));
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    });

    btn_pause.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mediaPlayer.pause();

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
  } 
```

这是我得到的错误：

```
 java.lang.IllegalStateException
at android.media.MediaPlayer.setDataSource(Native Method)
at com.tests.mediaplayer1.MainActivity$2.onClick(MainActivity.java:84)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:50:48.293

从错误代码中，我们可以观察到报告的错误如下

```
java.lang.IllegalStateException
at android.media.MediaPlayer.setDataSource(Native Method) 
```

如果您参考 的`native`实现`MediaPlayer`，`IllegalStateException`则在`MediaPlayer`object 为 null 时抛出。

从您的来源中，如果我们检查`retriever`，我们可以观察到您已经声明了这个变量，但还没有创建对象。`mediaPlayer`在您的来源中，请在创建对象之前尝试以下代码。

```
retreiver = new MediaMetadataRetriever(); 
```

通过此更改，`retriever`将创建对象并且您对`setDataSource`ie的调用`retriever.setDataSource(url);`将成功。

# java - 拦截客户端与弹簧断开连接？

> ID：15413039
> 
> 赞同：2
> 
> 时间：2013-03-14T15:12:07.460
> 
> 标签：java, web-services, spring, rest

我有一个基于弹簧的 Web 服务 (JAX-RS)，我想拦截客户端断开连接，以防长时间操作正在运行。例如，当客户端执行 HTTP 调用时，会在服务器上创建大量工作，但随后由于某种原因断开连接（进程终止），我想拦截该断开连接并取消服务器上的工作，因为客户端永远不会得到他等待的结果。

春天有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:59:49.777

不，但这与 Spring 无关。

即使您可以直接访问用于 HTTP 传输的套接字，您也无法检测到其他对等方已关闭套接字而不尝试读取或写入它。如果不与任何 HTTP 协议处理程序冲突，这是不可能的，显然也尝试使用套接字。

# ios - UIButton 全局外观

> ID：15413047
> 
> 赞同：0
> 
> 时间：2013-03-14T15:12:21.743
> 
> 标签：ios, uibutton

我希望整个应用程序中的 UIButtons 具有相同的外观。我尝试使用 UIAppearance 协议，但它没有为 UIButton 公开任何有趣的方法。我想更改所有 UIButtons 的 textColor 和字体。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:15:45.080

只需继承`UIButton`并覆盖自定义初始化或便利工厂方法之一。像这样的东西：

```
@interface MyCustomButton: UIButton
@end

@implementation MyCustomButton

+ (UIButton *)buttonWithType:(UIButtonType)type
{
    UIButton *b = [super buttonWithType:type];
    b.titleLabel.textColor = [UIColor redColor];
    b.titleLabel.font = [UIFont fontWithName:@"FooBar-Bold" size:3.14]; // today's Pi day
    return b;
}

@end 
```

# java - 如何测试 ViewGroup 的类型？

> ID：15413050
> 
> 赞同：0
> 
> 时间：2013-03-14T15:12:28.453
> 
> 标签：java, android, polymorphism, android-relativelayout, viewgroup

由于我不确定这会叫什么，所以我无法使用搜索引擎找到任何答案。我正在使用多态性来动态更改活动根元素的属性。

我正在使用以下代码来获取活动的根元素，通常是 LinearLayout 或 RelativeLayout。

```
ViewGroup layout = (ViewGroup) ((ViewGroup) activity.findViewById(android.R.id.content)).getChildAt(0); 
```

由于我想将RelativeLayout 中的内容动态添加到活动中，因此我想测试ViewGroup（布局）是RelativeLayout 还是LinearLayout。

有没有办法做到这一点？没有尝试强制转换为每个并捕获异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:15:52.590

你可以使用这样的实例

```
if (layout instanceof LinearLayout) {
//do some stuff 
} 
```

# java - 定义 mongodb 搜索查询

> ID：15413052
> 
> 赞同：2
> 
> 时间：2013-03-14T15:12:29.757
> 
> 标签：java, mongodb

您好我正在尝试为 mongod db 条目定义搜索查询。

条目如下所示：

```
{
    "_id" : "13132413435452113545452",
    "type" : "U",
    "dataSourceA" : {
        uSet : [ "u", "v", "w"]
    }
} 
```

假设我有 100 个这样的条目`uSet : [ "u", "v", "w"]`

所以现在我想找出我的数据库中存在哪些不同的 uSet 值。例如，另外 100 个具有不同 ID 的条目可能如下所示：

```
{
    "_id" : "13132413435452113545452",
    "type" : "U",
    "dataSourceA" : {
        uSet : [ "d", "v", "w"]
    }
} 
```

目标是包含值的结果`{"d","v","w","u"}`

我不知道从哪里开始定义一个为我提供所需值的查询。

任何帮助或提示将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:54:47.847

这应该可以通过[distinct](http://docs.mongodb.org/manual/reference/command/distinct/)命令实现（对于 Java，请参见[distinct(...)](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#distinct%28java.lang.String%29)）。

```
collection.distinct("dataSourceA.uSet"); 
```

# android - Android：LED 无法打开/关闭

> ID：15413053
> 
> 赞同：4
> 
> 时间：2013-03-14T15:12:30.813
> 
> 标签：android, camera, widget, led

我正在尝试编写一个带有打开/关闭相机手电筒按钮的小 Android 小部件。我知道，那里有成千上万个，但我想学习 Android（小步骤似乎是最好的方法）。

现在我已经阅读了官方文档、网络上的一些免费教程，并在 stackoverflow 上搜索了它。到目前为止，我没有收到任何错误，LogCat 说一切正常。但是，当我在 Galaxy Nexus 上测试应用程序时，开关按应有的方式打开/关闭，但摄像头 LED 没有打开/关闭。

这是我的代码（只有 LED 实际打开/关闭的部分）：

```
if (isLightOn) {
    Log.d("receiver", "flashlight is on, disabling it");
    if (camera != null) {
        param.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);
        camera.setParameters(param);
        camera.release();
        camera = null;
        isLightOn = false;                     
    }
} else {                                 
    Log.d("receiver", "flashlight is off, enabling it");
    camera = Camera.open();

    if(camera == null) {
        Toast.makeText(context, R.string.no_camera, Toast.LENGTH_SHORT).show();
    } else {
        // Set the torch flash mode                     
        param.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
        try {
            camera.setParameters(param);                   
            isLightOn = true;                                                      
        } catch (Exception e) {
            Toast.makeText(context, R.string.no_flash, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

任何想法为什么这不能按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:32:43.493

一般看[这里](http://www.mkyong.com/android/how-to-turn-onoff-camera-ledflashlight-in-android/)。它被正确解释。

编辑：

链接上的内容：

1.  打开

    相机 = Camera.open(); 参数 p = camera.getParameters(); p.setFlashMode(Parameters.FLASH_MODE_TORCH); camera.setParameters(p); camera.startPreview();

2.  关掉

    相机 = Camera.open(); 参数 p = camera.getParameters(); p.setFlashMode(Parameters.FLASH_MODE_OFF); camera.setParameters(p); camera.stopPreview();

并且，在 AndroidManifest.xml 上添加以下权限。

PS 这个项目是在 Eclipse 3.7 中开发的，并使用三星 Galaxy S2 (Android 2.3.3) 进行了测试。

1.  Android 布局 仅一个按钮。

文件：res/layout/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/buttonFlashlight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"
        android:text="Torch" />

</RelativeLayout> 
```

2.  Activity 阅读代码，一个打开/关闭手电筒的按钮，应该是不言自明的。

    ```
    package com.mkyong.android;

    import android.app.Activity;
    import android.content.Context;
    import android.content.pm.PackageManager;
    import android.hardware.Camera;
    import android.hardware.Camera.Parameters;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;

    public class FlashLightActivity extends Activity {

    //flag to detect flash is on or off
    private boolean isLighOn = false;

    private Camera camera;

    private Button button;

    @Override
    protected void onStop() {
        super.onStop();

        if (camera != null) {
            camera.release();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button = (Button) findViewById(R.id.buttonFlashlight);

        Context context = this;
        PackageManager pm = context.getPackageManager();

        // if device support camera?
        if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Log.e("err", "Device has no camera!");
            return;
        }

        camera = Camera.open();
        final Parameters p = camera.getParameters();

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                if (isLighOn) {

                    Log.i("info", "torch is turn off!");

                    p.setFlashMode(Parameters.FLASH_MODE_OFF);
                    camera.setParameters(p);
                    camera.stopPreview();
                    isLighOn = false;

                } else {

                    Log.i("info", "torch is turn on!");

                    p.setFlashMode(Parameters.FLASH_MODE_TORCH);

                    camera.setParameters(p);
                    camera.startPreview();
                    isLighOn = true;

                }

            }
        });

    }
    } 
    ```

3.  Android 权限分配 CAMERA 权限。

文件：AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mkyong.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />

    <application
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".FlashLightActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# php - PHP：将数组放入文件时在$_POST元素之间添加逗号

> ID：15413054
> 
> 赞同：0
> 
> 时间：2013-03-14T15:12:30.803
> 
> 标签：php, arrays, post

以下是我的代码：

```
<?php
    #put the info the user just inputed into a file for later retrival
    file_put_contents("test.txt",$_POST, FILE_APPEND);
?> 
```

这是我在 test.txt 中得到的结果：

> 简F16xyzWindows1215

如何将结果的格式更改为

> 简,F,16,xyz,Windows,12,15

（元素之间有逗号）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:13:24.420

将其更改为

```
file_put_contents('test.txt', implode(',', $_POST), FILE_APPEND); 
```

请注意，这不考虑数组 post 值的可能性。

# c# - DataRow 将其元素转换为字符串？

> ID：15413057
> 
> 赞同：0
> 
> 时间：2013-03-14T15:12:39.943
> 
> 标签：c#, wpf, object, datatable, datarow

我正在尝试将我的对象放入 DataTable 以将其用作 DataGrid 的 ItemsSource。

```
foreach (Translate t in item.Translations)
{
      if (rowArray[t.IdSprache] == null)
      {
          rowArray[t.IdSprache] = t; //here I add the Translate objects to the object[]
      }
      }
      dt.Rows.Add(rowArray); //adding the object[] to the DataTable
      var test = dt.Rows[cnt].ItemArray[1] as Translate; //aaaaaaaaaaaaaaand the object is gone (test is always null)
      cnt++; 
} 
```

一切正常，但如果我想将 DataRow 的元素转换回 Translate-Objects，我总是会得到`null`.

如果我查看 Row's `ItemArray`，我只会将对象视为字符串（`Assembly.Type`）而不是`Translate`对象。

有谁知道这个的解决方法/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:30:23.210

尝试使用内置函数`DataSet`来创建架构和行。就像是：

```
Translate t1 = new Translate() { IdSprache = 0 };
Translate t2 = new Translate() { IdSprache = 3 };
Translate t3 = new Translate() { IdSprache = 7 };
DataTable dt = new DataTable();
for (int i = 0; i < 10; i++)
    dt.Columns.Add(new DataColumn("C" + i, typeof(Translate)));
for (int i = 0; i < 5; i++)
{
    DataRow dr = dt.NewRow();
    dr[i] = new Translate() { IdSprache = i };
    dt.Rows.Add(dr);
}
for (int i = 0; i < 5; i++)
{
    for (int j = 0; j < 5; j++)
    {
        if (dt.Rows[i][j] as Translate != null)
            Console.Write("T");
        else
            Console.Write("N");
    }
    Console.WriteLine();
} 
```

印刷

TNNNN
NNNNN
NNTNN
NNNTN
NNNNT

# javascript - MVC3从Javascript调用控制器方法

> ID：15413069
> 
> 赞同：3
> 
> 时间：2013-03-14T15:13:18.723
> 
> 标签：javascript, asp.net-mvc-3

在 MVC3 中。当我点击它时，我有一个按钮类“open-deleteRowDialog”转到这个javascript：

```
 $(document).on("click", ".open-DeleteRowDialog", function () { 
         var pwd= '@Url.("GeneratePsw","Admin")';
         $(".modal-body #pwd").val(pwd);
        $('#1').modal('show');

}) 
```

我想要的是调用一个方法（在控制器中），该方法必须返回一个字符串，这就是我想保存在“var pwd”中以在模型中显示的内容（视图）

方法（在控制器中）是：

```
public string GeneratePsw()
        {

            HomeBridgeEntities ddbb = new HomeBridgeEntities();
            SqlConnection Cn = new SqlConnection(((System.Data.EntityClient.EntityConnection)ddbb.Connection).StoreConnection.ConnectionString);
            SupPassGenerator sup = new SupPassGenerator(Cn);

            //psw conteins a password from CreateRandomPassword

            string psw = sup.CreateRandomPassword(9);

            return psw;

        } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:15:56.837

对您的控制器操作方法进行**ajax**调用。您可以使用`$.get`如下方法。

```
$(function(){
   $(document).on("click", ".open-DeleteRowDialog", function () { 
      var pwd="";
       $.get("@Url.Action("Yourcontroller","GeneratePsw")",function(data){
           pwd=data;
           //now do whatever you want with pwd variable;
       });    
    })
 }); 
```

[$.get](http://api.jquery.com/jQuery.get/)是一种 HTTP GET 类型的简短`$.ajax`方法。

如果您在响应中遇到缓存数据等问题，您可以在`get`调用中添加唯一时间戳，这样您就不会获得缓存结果。您可以使用[$.now](http://api.jquery.com/jQuery.now/)方法。

```
 $.get("@Url.Action("Yourcontroller","GeneratePsw")?"+$.now(),function(data){
    // to do : do something with result
 }); 
```

另一种方法是在[ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)方法中将缓存属性值设置为 false。但这将适用于所有 ajax 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:18:01.940

使用 jQuery ajax 并直接作为 url 调用控制器方法

```
$(document).on("click", ".open-DeleteRowDialog", function () { 
    var pwd="";
    $.get('Yourcontroller/GeneratePsw', function(data){
        pwd=data;
        //now do whatever you want with pwd variable;
    });    
}) 
```

# assembly - BSD 堆栈清理

> ID：15413073
> 
> 赞同：1
> 
> 时间：2013-03-14T15:13:30.703
> 
> 标签：assembly, stack, calling-convention

我正在学习汇编语言，并且对调用约定和堆栈清理有疑问。

由于我使用的是 OSX，因此我需要对系统调用使用 BSD 调用约定，如下所示。

```
SECTION .text
    push StringLen ; Push string length 
    push MyString  ; Push the string
    push 0x1       ; Push the file descriptor (stdout)
    mov eax, 4     ; Push the system call (sys_write)
    int 0x80       ; Call kernel dispatcher
    add esp, 0x10  ; Clean up stack 16 bytes for 4DWORDS

    mov eax, 1
    mov ebx, 0
    int 0x80       ; System exit 
```

我的问题，被`add esp, 0x10`认为是清理堆栈的好习惯吗？我已经尝试过，在清理之后它会显示这些值仍然在堆栈上，但是当另一个值被推送时被覆盖，例如

```
 add esp, 0x10  ; Clean up stack 16 bytes for 4DWORDS
    push 0x1A      ; New push overwrites the previous stack values 
```

我确信这在小程序中并没有太大的区别，但是在一个大程序中，如果它永远不会被覆盖，它不会浪费空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:16:59.067

> 但是如果它永远不会被覆盖，它不会浪费空间吗？

不，这不是浪费空间。堆栈空间的 16 个字节将被一遍又一遍地重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:36:05.563

是的，这种传递参数并清理它们的方式很好。但是，您的代码中存在一个问题：您只有**3**次推送，但减去了**16**个字节。移动到`eax`不计为推送，因为它不会更改`esp`.

在这个小程序中可能无关紧要，但在任何体面大小的程序中都会崩溃。所以~~修复 0x10 到 0x0C~~添加一个`push eax`or`sub esp, 4`使其平衡并匹配 BSD 调用约定的要求。

另一种方法是预先保留堆栈空间并使用`mov`s 而不是`push`es 来设置参数。

**编辑**：根据[FreeBSD 调用约定](http://www.freebsd.org/doc/en/books/developers-handbook/book.html#x86-system-calls)（额外推送）修复代码。

```
SECTION .text
    ; we only need 12 bytes (3 args) but BSD ABI needs one extra stack slot
    sub esp, 0x10  
    mov  eax, StringLen
    mov  [esp-C], eax
    mov  eax, StringLen
    mov  [esp-8], eax
    mov  dword [esp-4], 0x1 ; file descriptor (stdout)
    mov  eax, 4     ; system call number (sys_write)
    int  0x80       ; make the syscall

    mov dword [esp-4], 0 ; exit code
    mov eax, 1      ; system call number (sys_exit)
    int 0x80       ; System exit

    ; unreachable in this case but necessary for returning functions
    add esp, 0x10  ; restore the stack at the end of the function 
```

正如你所看到的，它避免了`ESP`在函数体的大部分期间改变，但它使代码更大更冗长。由于您不能`mov`内存到内存，因此您必须为变量使用临时寄存器。

出于某种原因，这种传递参数的方式是 GCC 的默认方式，并且会导致相当大的代码膨胀。

# android - 如何在 Eclipse 的文件资源管理器中显示通过 USB 连接的手机的文件？

> ID：15413082
> 
> 赞同：1
> 
> 时间：2013-03-14T15:13:45.040
> 
> 标签：android, eclipse, adb

我已经使用 USB 连接了我的 root 手机，adb 以 root 身份运行，我仍然在 Eclipse 的文件资源管理器中看不到任何内容，但是当我从命令行运行 adb shell 时，我可以使用 ls 列出目录并浏览它们。

如何让文件资源管理器工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-18T06:47:22.687

虽然几个月后我看到它，但如果你仍然没有找到它，那么它就是：
打开你的**Eclipse**后选择**DDMS**透视图。然后去..

**窗口--> 显示视图--> 文件资源管理器**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:53:43.013

EasyShell 是 Eclipse 的扩展。它允许文件管理器。

[http://marketplace.eclipse.org/content/easyshell](http://marketplace.eclipse.org/content/easyshell)

如果使用 Ubuntu，ExploreFS 也可以提供帮助。

[http://www.junginger.biz/eclipse/](http://www.junginger.biz/eclipse/)

# python - 生成二项分布的混合

> ID：15413085
> 
> 赞同：1
> 
> 时间：2013-03-14T15:13:56.593
> 
> 标签：python, statistics, distribution, random-sample, discretization

我想生成二项分布的混合。为什么我需要它是因为我想要高斯分布的正态离散混合。是否有任何可用的 scipy 库，或者请您指导我的算法。

我通常知道对于预定义的发行版，可以使用 ppf。但是对于这个功能，我认为没有任何直接的使用 ppf 的方法。

从每个样本中取样并混合它们似乎也有问题，因为我不知道我必须从不同的分布中选择多少个实例。

最后我想要的是这样的： ![在此处输入图像描述](../Images/2d24912af1b9460fcde856f57682fbbb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:50:24.007

这是生成二项式（和其他）分布的任意混合的简单方法。它依赖于一个事实，如果你想从混合物 P(x)=sum(w[i]*P_i(x), i=1..Nmix) 中获取样本 (Nsamp)，那么你可以通过采样来做到这一点来自每个 P_i(x) 的 Nsamp。然后得到另一个随机变量的另一个 Nsamp 样本，该样本等于 i，概率为 w[i]。这个随机变量可用于选择给定样本将来自哪个 P_i(x)：

```
import numpy as np,numpy.random, matplotlib.pyplot as plt

#parameters of the binomial distributions: pairs of (n,p)
binomsP = np.array([.5, .5, .5])
binomsCen = np.array([15, 45, 95]) # centers of binomial distributions
binomsN = (binomsCen/binomsP).astype(int)

fractions = [0.2, 0.3, 0.5]
#mixing fractions of the binomials
assert(sum(fractions)==1)

nbinoms = len(binomsN)
npoints = 10000
cumfractions = np.cumsum(fractions)
def mapper(x):
    # convert the random number between 0 and 1 to
    # the ID of the distribution according to the mixing fractions
    return np.digitize(x, cumfractions)

x0 = np.random.binomial(binomsN[None, :],
        binomsP[None, :], size=(npoints, nbinoms))

x = x0[:, mapper(np.random.uniform(size=npoints))]
plt.hist(x, bin=150, range=(0, 150)) 
```

![在此处输入图像描述](../Images/2141accd27ebf7cac5eead9b9212f1f2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:07:09.557

除非您找到一种计算逆 cdf 的聪明方法（在这种情况下请告诉我们！），否则拒绝采样是一种万无一失的方法。[维基百科条目](http://en.wikipedia.org/wiki/Rejection_sampling)给出了一般描述。我在实践中发现，你需要对“工具”分布有点小心：特别是它不应该比目标分布衰减得快得多——如果是这样，你可能会失去尾部的贡献.

我这样做的方式是从一个平坦的工具分布开始：生成一对均匀的随机数`x`和`y`，其中`y`来自 [0, 1) 和`x`来自`[0, L)`，其中`L`足够大。然后比较`y`和`cdf(x)`，重复直到收敛。如果这行得通，你就准备好了。如果这还不够好，请使用非平坦的工具分布：如果混合物的尾部是高斯分布，那么您最好使用高斯分布。

附带说明一下，如果您正在处理二项式分布，则需要注意上溢/下溢 --- 根据参数，您可能需要使用高斯近似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:52:25.940

感谢@sega_sai、@askewchan 和@Zhenya，我自己编写了代码，我相信由于实现，这将是最有效的代码。有两个函数，第一个函数使“binoNumber”二项式分布的混合都具有相同的 N=maximum-minimum 参数和相同的 p=0.5，但根据我为它们生成的随机中心移动。

```
global binoInitiated
binoInitiated=False;
def binoMixture(minimum,maximum,sampleSize):
    global centers
    binoNumber=10;
    if (not binoInitiated):
        centers=np.random.randint(minimum,maximum+1,binoNumber)
    sigma=maximum-minimum-2
    sam=np.array([]);
    while sam.size<sampleSize:
        i=np.random.choice(binoNumber);
        temp=np.random.binomial(sigma, 0.5,1)+centers[i]-sigma/2+1
        sam=np.append(sam,temp)
    return sam 
```

该功能是为预先制作的分布绘制一个近似的PDF。感谢@EnricoGiampieri，我使用他的代码制作了这一部分。

```
def binoMixtureDrawer(minimum,maximum):
    global binoInitiated
    global centers
    sam=binoMixture(minimum,maximum,50000)    
    # this create the kernel, given an array it will estimate the probability over that values
    kde = gaussian_kde( sam )
    # these are the values over wich your kernel will be evaluated
    dist_space = linspace( min(sam), max(sam), 500 )
    # plot the results
    fig.plot( dist_space, kde(dist_space),'g') 
```

# android - 一旦调用警报，是否必须取消警报？

> ID：15413086
> 
> 赞同：0
> 
> 时间：2013-03-14T15:13:57.990
> 
> 标签：android, alarmmanager, android-calendar

以下几行有什么区别

**（一种）**

```
cal.add(Calendar.MILLISECOND, 0); 
```

**(乙)**

```
cal.set(Calendar.MILLISECOND, 0); 
```

`Alarm`一旦警报被调用/触发，取消它有多重要？如果我们不取消它会发生什么？

**代码**

```
Intent intent = new Intent(this, AlarmReceiver.class);

PendingIntent sender = PendingIntent.getBroadcast(this, i,
                        intent, PendingIntent.FLAG_UPDATE_CURRENT);

// Get the AlarmManager service
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
                am.set(AlarmManager.RTC_WAKEUP, triggerInMills, sender); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:28:13.237

根据[文档](https://developer.android.com/reference/java/util/Calendar.html)

[`Calendar#add()`](https://developer.android.com/reference/java/util/Calendar.html#add%28int,%20int%29)将指定的金额添加到指定的字段。

如果你这样做

```
cal.add(Calendar.MILLISECOND, 1); 
```

Calendar 的实例将在毫秒字段中**增加**`1`. 如果日历有`212`毫秒，则此方法调用将导致它为`213`毫秒。

[`Calendar#set()`](https://developer.android.com/reference/java/util/Calendar.html#set%28int,%20int%29)将字段设置为您想要的。

如果你这样做

```
cal.set(Calendar.MILLISECOND, 0); 
```

而且日历有`212`毫秒，这将导致它是`0`毫秒。

一种方法*相加*，另*一种方法*

> 一旦调用/触发警报，取消警报有多重要？如果我们不取消它会发生什么？

如果你使用 just [`AlarmManager#set()`](https://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29)，它不会重复，所以你不必在执行*后*取消任何东西。

如果您使用[`AlarmManager#setRepeating()`](https://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)，那么您将不得不取消。

如果您*不*取消，它会不断重复，就像文档和名称所暗示的那样。

所有警报将在关机/重启时被删除，并且需要重新创建。

# testing - 从命令行运行 nunit-tests

> ID：15413090
> 
> 赞同：2
> 
> 时间：2013-03-14T15:14:08.070
> 
> 标签：testing, mono, nunit, monodevelop, nunit-console

尝试运行**nunit-console Testsuite.sln时得到以下输出**

```
NUnit version 2.4.8
Copyright (C) 2002-2007 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment - 
   OS Version: Unix 11.4.0.0
  CLR Version: 2.0.50727.1433 ( 2.10.11 (mono-2-10/2baeee2 Wed Jan 16 16:40:16 EST 2013) )

Missing method .ctor in assembly /Users/administrator/Desktop/projectname/testsuite/bin/Debug/Testsuite.dll, type NUnit.Framework.TestFixtureAttribute
Can't find custom attr constructor image: /Users/administrator/Desktop/projectname/testsuite/bin/Debug/Testsuite.dll mtoken: 0x0a000004
Could not load file or assembly 'nunit.framework, Version=2.6.0.12051, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77' or one of its dependencies. 
```

有什么建议么？在单声道开发中从 testrunner 运行测试没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:36:03.553

它没有找到你的 nunit.framework.dll 文件，我认为你的安装很糟糕。你是如何安装单声道的？你是如何安装 NUnit 的？

尽管我建议先修复您的单声道/单单元安装，但可能的解决方法是：

1.  查找 nunit.framework.dll 在哪里，例如：find /usr | grep nunit
2.  以这种方式运行 nunit：

`MONO_PATH=/path/where/nunit/dlls/are nunit-console4 Testsuite.dll`

# javascript - 幻灯片崩溃

> ID：15413091
> 
> 赞同：1
> 
> 时间：2013-03-14T15:14:09.083
> 
> 标签：javascript, slideshow

我有一个我无法弄清楚的错误，所以我正在寻求帮助。我有一个带有 javascript 的简单幻灯片代码，我知道故障线，但我只是不知道它为什么会崩溃。

这是完整的代码。

```
var step=1;
var whichimage=1;
function slideit(){

    //if browser does not support the image object, exit.
    if (!document.images)
        return;
    document.images.slide.src=eval("image"+step+".src");
    whichimage=step;

    if (step==1)
    {
        changepic(step);
        step++;
    };
    else if (step==2){
        changepic(step);
        step++;
    };
    else if (step==3) {
        changepic(step);
        step=1;
    };
    setTimeout("slideit()",1500);
}

slideit()
function slidelink(){
    if (whichimage==1)
        window.location="link1.htm"
    else if (whichimage==2)
        window.location="link2.htm"
    else if (whichimage==3)
        window.location="link3.htm"
}

function Pic1(){
    if (!document.images)
        return;
    document.slide.src = image1.src;
    step=1;
    changepic(step);
}
function Pic2(){
    if (!document.images)
         return;
    document.slide.src = image2.src;
    step=2;
    changepic(step);
}
function Pic3(){
    if (!document.images)
        return;
    document.slide.src = image3.src;
    step=3;
    changepic(step);
}
function changepic (x){
    if (x==1){
        document.getElementById("temp1").setAttribute("class", "slideshowminithumb2");
        document.getElementById("temp2").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp3").setAttribute("class", "slideshowminithumb");
    }
    if(x==2){
        document.getElementById("temp2").setAttribute("class", "slideshowminithumb2");
        document.getElementById("temp1").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp3").setAttribute("class", "slideshowminithumb");
    }
    if(x==3){
        document.getElementById("temp3").setAttribute("class", "slideshowminithumb2");
        document.getElementById("temp1").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp2").setAttribute("class", "slideshowminithumb");
    }
} 
```

我知道错误发生在这一行：

```
if (step==1)
{
    changepic(step);  /** Here! **/
    step++;
}; 
```

我知道这一点，因为如果我删除该行，幻灯片脚本可以工作，但我需要它工作，以便在步骤 1 时更改类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:21:33.547

这是一个jsfiddle：http: [//jsfiddle.net/Arlen22/MeWQM/](http://jsfiddle.net/Arlen22/MeWQM/)

它在那里工作，这是一个 html 文档，它在这里也适用于我。

```
<!DOCTYPE>
<html>
<head>
<script>
var step=1;
var whichimage=1;
function slideit(){

    //if browser does not support the image object, exit.
    if (!document.images)
        return;
    //changed this line based on Chrome, not sure if FF is different
    document.images.namedItem("slide").src = document.images.namedItem("image"+step).src;
    whichimage=step;

    if (step==1)
    {
        changepic(step);
        step++;
    }
    else if (step==2){
        changepic(step);
        step++;
    }
    else if (step==3) {
        changepic(step);
        step=1;
    }
    setTimeout("slideit();",1500);
}

function slidelink(){
    if (whichimage==1)
        window.location="link1.htm"
    else if (whichimage==2)
        window.location="link2.htm"
    else if (whichimage==3)
        window.location="link3.htm"
}

function Pic1(){
    if (!document.images)
        return;
    document.slide.src = image1.src;
    step=1;
    changepic(step);
}
function Pic2(){
    if (!document.images)
         return;
    document.slide.src = image2.src;
    step=2;
    changepic(step);
}
function Pic3(){
    if (!document.images)
        return;
    document.slide.src = image3.src;
    step=3;
    changepic(step);
}
function changepic (x){
    if (x==1){
        document.getElementById("temp1").setAttribute("class", "slideshowminithumb2");
        document.getElementById("temp2").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp3").setAttribute("class", "slideshowminithumb");
    }
    if(x==2){
        document.getElementById("temp1").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp2").setAttribute("class", "slideshowminithumb2");
        document.getElementById("temp3").setAttribute("class", "slideshowminithumb");
    }
    if(x==3){
        document.getElementById("temp1").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp2").setAttribute("class", "slideshowminithumb");
        document.getElementById("temp3").setAttribute("class", "slideshowminithumb2");
    }
}
</script>
<style>
#slideshowminithumb {
    display:none;
}
#slideshowminithumb2 {
    display:none;
}
</style>
</head>
<body>
    <a href="javascript:slideit();">start</a>
    <img id="slide" src=""/>
    <div id="temp1">
        <img id="image1" src="http://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/%22Colourfull_flower%22.JPG/640px-%22Colourfull_flower%22.JPG" />
    </div>
    <div id="temp2">
        <img id="image2" src="http://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/%22Imperfection_in_perfect_beauty%22_%285113314692%29.jpg/640px-%22Imperfection_in_perfect_beauty%22_%285113314692%29.jpg" />
    </div>
    <div id="temp3">
        <img id="image3" src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/75/%22Pink_Nerium%22.JPG/640px-%22Pink_Nerium%22.JPG" />
    </div>

</body>
</html> 
```

# delphi - 为 TCustomWinSocket 定义一个 Helper 类是否安全？

> ID：15413092
> 
> 赞同：0
> 
> 时间：2013-03-14T15:14:09.420
> 
> 标签：delphi, winsock

为了让我读/写代码更舒服，我将所有这些函数堆叠到一个辅助类中，所以我可以避免客户端/服务器主单元中的所有这些愚蠢的函数，我把它放在一个导入的单元中由两个主要单位，所以我问只是为了确保我在这里没有做错任何事情。

**例如**，当我在 ServerSocket 事件中时，我可以像这样使用它：

*Socket.SendString();*

```
 { Extend TCustomWinSocket to make it more comfterable to read and tidy code }
  TCustomWinSocketHelpher = class Helper for TCustomWinSocket
  private
    procedure SendStringLenth(StrLen: Integer);
  public
    function ReceiveStringLength: Integer;
    function ReceiveString(const StrLen: Integer): String;
    function ReceiveStream(StreamLen: Integer; Callback: TUpdateProgBarProc): TMemoryStream;

    procedure SendString(const Str: string);
    procedure SendStreamEx(ASendStream: TStream);
  end;

(*************************** TCustomWinSocketHelpher BEGIN ***************************)

function TCustomWinSocketHelpher.ReceiveString(const StrLen: Integer): String;
var
  S: UTF8String;
begin
  SetLength(S, StrLen);
  ReceiveBuf(PAnsiChar(S)^, StrLen);
  Result := UTF8ToString(S);
end;

function TCustomWinSocketHelpher.ReceiveStringLength: Integer;
begin
  ReceiveBuf(Result, SizeOf(Result));
  Result := ntohl(Result);
end;

function TCustomWinSocketHelpher.ReceiveStream(StreamLen: Integer; Callback: TUpdateProgBarProc): TMemoryStream;
const
  ChunkSize = 4096;
var
  PData: PByte;
  ReadAmount: Integer;
begin
  Result := TMemoryStream.Create;
  GetMem(PData, ChunkSize);
  try
    while StreamLen > 0 do
    begin
      ReadAmount := ReceiveBuf(PData^, Min(ChunkSize, StreamLen));
      if (ReadAmount > 0) then
      begin
        Result.WriteBuffer(PData^, ReadAmount);
        Callback(ReadAmount); // update gui
        Dec(StreamLen, ReadAmount); // update loop condition
      end else
      begin
        OutputDebugString(PChar('ReadAmount ' + Inttostr(ReadAmount)));
      end;
    end;
  finally
    FreeMem(PData);
  end;
end;

procedure TCustomWinSocketHelpher.SendStringLenth(StrLen: Integer);
begin
  StrLen := htonl(StrLen);
  SendBuf(StrLen, SizeOf(StrLen));
end;

procedure TCustomWinSocketHelpher.SendString(const Str: string);
var
  S: UTF8String;
  Len: Integer;
begin
  S := UTF8Encode(Str);
  Len := Length(S);
  SendStringLenth(Len);
  SendBuf(PAnsiChar(S)^, Len);
end;

procedure TCustomWinSocketHelpher.SendStreamEx(ASendStream: TStream);
begin
  ASendStream.Position := 0;
  SendStream(ASendStream);
end;

(*************************** TCustomWinSocketHelpher END ***************************) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:33:06.997

是的，定义一个辅助类是完全安全的。

# jquery - Jquery占位符插件的问题

> ID：15413095
> 
> 赞同：1
> 
> 时间：2013-03-14T15:14:13.517
> 
> 标签：jquery, ruby-on-rails, jquery-plugins, placeholder

我尝试使用两个不同的 jquery 插件来让占位符在 ie9 中工作，[Andrew Jones 一个](http://andrew-jones.com/jquery-placeholder-plugin/)和[Mathias Bynens 一个](https://github.com/mathiasbynens)。

不幸的是，他们都给了我同样的问题，我一生都无法弄清楚。第一个问题是，在 JS 控制台中时不时出现以下错误：

```
SCRIPT438: Object doesn't support property or method 'placeholder' 
```

...就好像脚本没有加载一样，即使它已经加载了。当我刷新页面时，它通常有 50/50 的机会出现该错误。我遇到的下一个问题是有时占位符甚至不会显示，但是当我单击输入字段然后单击其他地方时，占位符文本最终会出现。

这是在 Rails 应用程序中使用的。我正在使用这样的占位符，在顶部`main.js document.ready()`

```
if (navigator.userAgent.match(/MSIE\s(?!10.0)/)) {

    $(":input[placeholder]").placeholder();
} 
```

我`layouts/application.html.erb`像这样包含脚本：

```
<%=stylesheet_link_tag "normalize"%>
    <%=stylesheet_link_tag "main"%>
    <%=stylesheet_link_tag "r"%>
    <%=stylesheet_link_tag "1140"%>
    <%=stylesheet_link_tag "ie"%>
    <%=stylesheet_link_tag "jquery.placeholder.min"%>
    <%=javascript_include_tag "vendor/jquery-1.8.0.min.js"%>
    <%=javascript_include_tag "vendor/modernizr-2.6.1.min.js"%>
    <%=javascript_include_tag "vendor/css3-mediaqueries.js"%>
    <%=javascript_include_tag "vendor/jquery.fitvids.js"%>

    <%=javascript_include_tag "plugins.js"%>
    <%=javascript_include_tag "rails.js"%>
    <%=javascript_include_tag "jquery.placeholder.min.js"%>
    <%=javascript_include_tag "main.js.erb"%>   

    <%=csrf_meta_tag %> 
```

对此问题的任何帮助将不胜感激。

# android - 无法播放内部存储中的视频文件

> ID：15413099
> 
> 赞同：1
> 
> 时间：2013-03-14T15:14:16.277
> 
> 标签：android, google-tv

我试图从我的应用程序目录播放视频文件，但我得到的只是：

```
03-14 15:43:14.539: W/VideoView(6680): Unable to open content: /data/data/com.example.video/files/temp.mp4
03-14 15:43:14.539: W/VideoView(6680): java.io.IOException: Prepare Async failed.: status=0x80000000
03-14 15:43:14.539: W/VideoView(6680):  at android.media.MediaPlayer.prepareAsync(Native Method)
03-14 15:43:14.539: W/VideoView(6680):  at android.widget.VideoView.openVideo(VideoView.java:287)
03-14 15:43:14.539: W/VideoView(6680):  at android.widget.VideoView.access$2400(VideoView.java:51)
03-14 15:43:14.539: W/VideoView(6680):  at android.widget.VideoView$8.surfaceCreated(VideoView.java:604)
03-14 15:43:14.539: W/VideoView(6680):  at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
03-14 15:43:14.539: W/VideoView(6680):  at android.view.SurfaceView.access$000(SurfaceView.java:85)
03-14 15:43:14.539: W/VideoView(6680):  at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:174)
03-14 15:43:14.539: W/VideoView(6680):  at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
03-14 15:43:14.539: W/VideoView(6680):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1451)
03-14 15:43:14.539: W/VideoView(6680):  at android.view.ViewRoot.handleMessage(ViewRoot.java:2085)
03-14 15:43:14.539: W/VideoView(6680):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 15:43:14.539: W/VideoView(6680):  at android.os.Looper.loop(Looper.java:132)
03-14 15:43:14.539: W/VideoView(6680):  at android.app.ActivityThread.main(ActivityThread.java:4196)
03-14 15:43:14.539: W/VideoView(6680):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 15:43:14.539: W/VideoView(6680):  at java.lang.reflect.Method.invoke(Method.java:491)
03-14 15:43:14.539: W/VideoView(6680):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-14 15:43:14.539: W/VideoView(6680):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-14 15:43:14.539: W/VideoView(6680):  at dalvik.system.NativeStart.main(Native Method) 
```

从外部存储文件播放没有任何问题。可用内存长度为 150MB。视频文件长度为 2MB。可能是我忘了包含一些权限吗？请帮忙。谢谢！

# postgresql - 在源 Postgres 服务器离线时迁移 Postgres DB

> ID：15413100
> 
> 赞同：1
> 
> 时间：2013-03-14T15:14:20.157
> 
> 标签：postgresql, migrate, gentoo

所以是的，标题说明了一切，我需要以某种方式将数据库从源服务器转移到新服务器，但关键是旧服务器正在分崩离析：P 有没有办法可以将它全部移动到新服务器服务器并导入它？

旧服务器只是拒绝再运行 Postgres，我几乎可以肯定旧服务器上运行的版本是 8.4，而新服务器运行的是 9.2，这会导致问题吗？

这是我尝试在旧服务器上启动 Postgres 时得到的，

```
/etc/init.d/postgresql-8.4 start
* Use of the opts variable is deprecated and will be
* removed in the future.
* Please use extra_commands, extra_started_commands or extra_stopped_commands.
* Starting PostgreSQL ...
could not start server   [ !! ]
* ERROR: postgresql-8.4 failed to start 
```

我也在运行gentoo :)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:22:22.440

您可以直接复制数据文件，但您必须在目标服务器上使用相同的*主要*版本的 PG（例如 8.4.x - “8.4”是主要版本）。检查版本的最简单方法是通过`psql -V`.

如果您想升级到 9.x 版本，这种情况下的升级过程并不难。您需要在新服务器上安装 8.4（通过软件包或手动），然后您需要使用该`pg_upgrade`工具进行升级。 `pg_upgrade`附带最新版本的 PG，因此预计在此期间在服务器上安装两个。

[您可以在此处](http://www.postgresql.org/docs/devel/static/pgupgrade.html)找到文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T01:00:04.757

注意力 ！*在 Gentoo 上，如果您的配置文件（postgresql.conf + pg_hba.conf）不在*/var/lib/postgresql//data/ 中，pg_upgrade 将失败。新安装现在将配置文件存储在 /etc/postgresql- 中。

在迁移之前，请确保将文件从 /etc/postgresql-/ 复制到 pg_upgrade 的这个目录会失败。

# web-services - 如何在提琴手中编写对 REST Web 方法的请求

> ID：15413101
> 
> 赞同：17
> 
> 时间：2013-03-14T15:14:23.970
> 
> 标签：web-services, rest, servicestack, fiddler

我可以调用网络服务，但名称属性没有绑定。

提琴手请求

```
POST http://localhost:50399/api/custservice/ HTTP/1.1
User-Agent: Fiddler
Host: localhost: 50399
Content-Length: 28
{ "request": { "name":"test"}} 
```

POST 网络方法

```
public string Any(CustomerRequest request)
{
  //return details
} 
```

客户请求.cs

```
public class CustomerRequest 
{
  public string name {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-14T16:29:20.437

首先，您需要将 Content-Type 'application/json' 添加到请求中：

```
POST http://localhost:50399/api/custservice/ HTTP/1.1
User-Agent: Fiddler
Host: localhost: 50399
Content-Type: application/json 
```

然后将您的 POST 数据更改为：

```
{"name":"test"} 
```

您将能够使用以下方式访问数据：

```
public string Any(CustomerRequest request)
{
  return request.name
} 
```

或者使用您现有的 POST 数据结构创建一个新类：

```
public class RequestWrapper
{
  public CustomerRequest request { get; set; }
} 
```

并将您的 Action 方法更改为：

```
public string Any(RequestWrapper wrapper)
{
  return wrapper.request.name;
} 
```

# command-line - Xcode 命令行工具 (XCode 4.6) 从终端运行单元测试

> ID：15413104
> 
> 赞同：4
> 
> 时间：2013-03-14T15:14:31.123
> 
> 标签：command-line, terminal, jenkins, xcode4.6

经过多次尝试，我不知道如何通过终端使用工作空间内的项目运行单元测试。我尝试创建一个新方案并运行该脚本，该脚本构建但不运行任何测试：

```
export DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer/
xcodebuild -workspace MyProject.xcworkspace\ 
           -scheme MyProjectLogicTests\
           -sdk iphonesimulator\ 
           -configuration Debug\ 
           ONLY_ACTIVE_ARCH=NO\ 
           TEST_AFTER_BUILD=YES\ 
           RUN_APPLICATION_TESTS_WITH_IOS_SIM=YES\ 
           clean build 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-21T22:08:21.090

您还可以升级到 Xcode 5，它允许执行以下命令：

```
xcodebuild test -scheme SomeTestScheme -destination "name=iPhone Retina (4-inch)" 
```

注意：目标参数应该与您希望运行测试的目标的可见名称相匹配。

# spring - 我可以在 groovy 中编写 Spring Java 测试吗？

> ID：15413106
> 
> 赞同：3
> 
> 时间：2013-03-14T15:14:39.317
> 
> 标签：spring, groovy, junit, dependency-injection

我在 java 中使用依赖注入在 spring 环境中进行了 junit 测试。

我对 groovy 很感兴趣，并想用它来编写我的测试。

在 groovy 中如何看待以下测试？

```
import javax.inject.Inject;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(value = "/META-INF/spring/context.xml")
public class DITestJava {

    @Inject
    WriteController wc;
    @Inject
    ReadController rc;

    @Test
    public void diTest() {
        Assert.assertNotNull(wc);
        Assert.assertNotNull(rc);

        wc.doConfig();
        rc.printConfig();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:23:02.030

是的，在您的 groovy 文件中使用相同的注释。只要 groovy 在你的类路径中，它就应该可以工作。

# c# - 表单身份验证 cookie 中的 ASP.NET MVC 用户数据与添加到会话

> ID：15413108
> 
> 赞同：7
> 
> 时间：2013-03-14T15:14:49.830
> 
> 标签：c#, asp.net-mvc, authentication

我想我有一个关于 asp.net mvc 4 中的身份验证的简单问题。我不清楚的一件事是我可以将用户数据添加/序列化到授权 cookie 中。将用户数据放入身份验证 cookie 与将用户数据添加到会话中有何好处/权衡？我什至需要在身份验证 cookie 中添加用户独有的任何内容吗？我应该序列化所有用户数据并将其放入 cookie 中，而不是使用会话来存储用户数据吗？

我的应用程序非常简单，没有任何角色。我只是想确保它在必要时能够很好地扩展。

现在，我只是将用户电子邮件放入身份验证 cookie 并将用户对象添加到会话中。我正在使用以下代码来授权用户：

```
FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
      1,
      user.Email,
      DateTime.Now,
      DateTime.Now.AddMinutes(15),
      false,
      user.Email); // adding the user email in the authTicket
string encTicket = FormsAuthentication.Encrypt(authTicket);
HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
Session["User"] = user; //adding user data to session
Response.Cookies.Add(faCookie);

return RedirectToAction("Summary", "Account"); 
```

我真的很感激任何见解。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T15:18:55.927

ASP.NET 会话的问题在于默认情况下它存储在内存中。这意味着，如果您在网络场中运行，则需要为会话使用进程外持久性，否则并非网络场中的所有节点都具有相同的信息。因此，您需要将会话持久化在 SQL Server 中，这比简单地从表单身份验证 cookie 中读取用户数据要昂贵得多。

关于 ASP.NET Session 的另一个重要方面是，如果您决定使用它（我个人从不使用它），您必须确保它的超时与您的表单身份验证 cookie 超时相同，否则您的 cookie 可能会过期但用户数据仍然存在于会话中或更糟糕的是，会话可能会过期，但表单身份验证 cookie 仍然有效。

因此，归根结底，如果您决定使用 ASP.NET 会话，那么您将不得不解决比最初更复杂的问题（即在所有请求中简单地保留一些用户信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T22:20:50.217

要考虑的另一件事是使用 Profile。可在 HttpContext.Profile 视图中获取[http://msdn.microsoft.com/en-us/library/ewfkf772%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ewfkf772%28v=vs.100%29.aspx)

# ruby - 为什么我在 Ruby 和命令行 OpenSSL 之间得到不同的 RSA 加密文件？

> ID：15413114
> 
> 赞同：1
> 
> 时间：2013-03-14T15:15:06.563
> 
> 标签：ruby, encryption, openssl, rsa

我正在尝试测试 openssl 的互操作性，一方面在 Ruby 中使用，另一方面在命令行中使用。

我生成了一个 RSA 证书并以这种方式提取了它的公钥：

```
openssl req -x509 -nodes -days 1825 -newkey rsa:1024 -keyout mycert.pem -out mycert.pem
openssl rsa -in mycert.pem -pubout > mycert.pub 
```

我写了一个 Ruby 脚本，它做了两件事：

1.  它首先使用公钥然后使用私钥对测试文件进行编码/解码（在 RSA 编码之上使用 Base64 编码以使网络通信更容易）
2.  它运行系统命令以使用 openssl 命令行工具加密相同的测试文件

您可以在以下 Gist 中找到此 Ruby 脚本的代码：[https](https://gist.github.com/dirtyhenry/4673331) ://gist.github.com/dirtyhenry/4673331 （参见`poc-openssl-rsa.rb`文件）

我的问题是：为什么我的 Ruby 生成的`public-encrypted.txt`文件与`public-encrypted-cl64.txt`? 它是由某些文件系统副作用引起的吗？（即一个是字符串，而另一个是文件或其他东西？）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:53:16.000

我发现这两者确实可以互操作。只是填充带来了一些随机性，这导致 2 次连续编码将产生 2 种不同的编码数据。

参看。[http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Padding_schemes](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Padding_schemes)：

> 实际的 RSA 实现通常在加密之前将某种形式的结构化随机填充嵌入到值 m 中。

# xml - 如何使用 xPath 从命名空间 xml 中检索特定元素

> ID：15413115
> 
> 赞同：1
> 
> 时间：2013-03-14T15:15:18.750
> 
> 标签：xml, vb.net, namespaces

我有一个关于从命名空间 xml 中检索节点的问题。只要我在查询中指定 xml 的单个元素，我就可以检索所有匹配的元素，并且可以遍历它们的子元素。当我尝试通过指定更详细的查询来检索单个唯一元素时，我的问题就出现了。

我用于测试的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<<MTConnectStreams xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:mtconnect.org:MTConnectStreams:1.2 http://mtconnect.org/schemas/MTConnectStreams_1.2.xsd" xmlns="urn:mtconnect.org:MTConnectStreams:1.2">
  <Streams>
    <Samples>
      <Position dataItemId="xs4" timestamp="2012-11-29T12:30:19Z" sequence="1718269" name="x_pos_cmd" subType="COMMANDED" units="MILLIMETER">1</Position>
      <Position dataItemId="xs5" timestamp="2012-11-29T12:30:19Z" sequence="1718270" name="x_pos_act" subType="ACTUAL" units="MILLIMETER">2</Position>
      <Position dataItemId="xs4" timestamp="2012-11-29T12:30:19Z" sequence="1718269" name="y_pos_cmd" subType="COMMANDED" units="MILLIMETER">3</Position>
      <Position dataItemId="xs4" timestamp="2012-11-29T12:30:19Z" sequence="1718269" name="y_pos_act" subType="COMMANDED" units="MILLIMETER">4</Position>
      <Position dataItemId="xs4" timestamp="2012-11-29T12:30:19Z" sequence="1718269" name="z_pos_cmd" subType="COMMANDED" units="MILLIMETER">5</Position>
    </Samples>
    <Condition>
      <Unavailable dataItemId="xc1" type="POSITION" timestamp="2012-11-27T23:19:40Z" sequence="7" name="x_cond_pos">UNAVAILABLE</Unavailable>
      <Unavailable dataItemId="xc2" type="LOAD" timestamp="2012-11-27T23:19:40Z" sequence="8" name="x_cond_load">UNAVAILABLE</Unavailable>
    </Condition>
  </Streams>
</MTConnectStreams> 
```

给定以下代码：

```
Dim xIt As XPathNodeIterator
Dim xDoc As XmlDocument = New XmlDocument
xDoc.Load("c:\Download\Test.xml")
Dim xNav As XPathNavigator = xDoc.CreateNavigator
Dim nsMgr = New XmlNamespaceManager(xNav.NameTable)
nsMgr.AddNamespace("ns", "urn:mtconnect.org:MTConnectStreams:1.2")

sQuery = "//ns:Samples"
xIt = xNav.Select(sQuery, nsMgr)
MsgBox(xIt.Count.ToString)

When sQuery = "//ns:Samples" (1 result)
When sQuery = "//ns:Position" (5 results)
When sQuery = "//ns:Samples/Position (0 results  why?)
When sQuery = "//ns:Samples/Position[@name='x_pos_act'] (0 results)
When sQuery = "//ns:Position[@name='x_pos_act']" (0 results)
When sQuery = "//ns:Position/[@name='x_pos_act']" (0 results) 
```

等等等等。每当查询不止一个节点名称时，我都没有得到任何结果。我无法弄清楚如何指定更详细的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:20:57.133

它应该使用`//ns:Samples/ns:Position`

Afaik 在 XPath 中，您必须在每个子部分中指定名称空间前缀。这也适用于属性！

所以试试：

```
When sQuery = "//ns:Samples"
When sQuery = "//ns:Position"
When sQuery = "//ns:Samples/ns:Position
When sQuery = "//ns:Samples/ns:Position[@ns:name='x_pos_act']
When sQuery = "//ns:Position[@ns:name='x_pos_act']"
When sQuery = "//ns:Position/[@ns:name='x_pos_act']" 
```

如果您不想考虑命名空间，也可以使用`@*[local-name()='Samples']`语法。这将忽略所有命名空间，只检查节点名称本身。

# android - 切换活动时如何淡出所有视图

> ID：15413117
> 
> 赞同：0
> 
> 时间：2013-03-14T15:15:21.480
> 
> 标签：android, animation

我有一个大约有 4-5 个视图的活动。它有一个白色的背景。理想情况下，我想将整个活动淡化为纯白色，然后淡入新活动。但由于彩色动画是不可能的，我已经放弃了这个想法。我制作的动画如下所示：

淡入：

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" 
        android:interpolator="@android:anim/accelerate_interpolator" 
        android:duration="1200"/>
</set> 
```

消退：

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="1.0" android:toAlpha="0.0" 
        android:interpolator="@android:anim/accelerate_interpolator" 
        android:duration="1200"/>
</set> 
```

我只是通过将以下代码行添加到我的所有活动来设置动画：

```
overridePendingTransition( R.animator.fadein, R.animator.fadeout); 
```

但是问题来了：当使用activity的alpha值淡出时，当alpha值降低时整个activity变成灰色。这在白色背景下看起来并不漂亮。

所以我想出了一个想法，只是淡出对活动的所有观点。我的问题：我该如何正确地做到这一点？顺便说一句，如果有人有更好的想法，请随时告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:21:36.253

一种方法是将视图包装在 RelativeLayout 中，然后膨胀视图并将其添加到具有 00ffffff 背景颜色和 fill_parent 参数的外部 RelativeLayout。

在开始新活动之前，使用处理程序和 runnable 以设定的时间间隔增加 alpha 值（并使视图无效）。一旦 alpha 达到 255，就开始新的活动。根据您的喜好调整 Handler.postDelayed() 的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:44:04.587

这是来自 Google 的一位 Android 图形专家的很酷的博客文章 - [Old Views Don't Die；他们只是消失了](http://graphics-geek.blogspot.com/2011/09/old-views-dont-die-they-just-fade-away.html "旧观点不死； 他们只是消失了")

我相信你可以将它用于你的项目。查看他关于动画的其他文章和 YouTube 视频，它们非常棒。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:26:52.907

我在 npace 提到的文章的启发下回答了我的问题。你会在下面找到我的淡出方法。它使用我上面已经创建的动画来淡出父容器RelativeLayout中的所有视图。

```
RelativeLayout container = findViewById(R.id.mainContainer);

for(int i = 0; i < container.getChildCount(); i++)
            container.getChildAt(i).startAnimation(AnimationUtils.loadAnimation(c, R.animator.fadeout));

        new Handler().postDelayed(new Runnable()
        {
            @Override
            public void run()
            {
                for(int i = 0; i < container.getChildCount(); i++)
                    container.getChildAt(i).setVisibility(View.INVISIBLE);
                c.startActivity(intent);
            }
        }, fadeDuration); 
```

# xcode - xcode如何在没有用户交互的情况下使scrollView滚动到最后？

> ID：15413124
> 
> 赞同：0
> 
> 时间：2013-03-14T15:15:39.860
> 
> 标签：xcode, button, scroll, playback, autoscroll

我有一个scrollView，我需要它自己非常缓慢地向下滚动到最后，当用户触摸视图时，它应该响应手势（向上向下）。除此之外，我需要放置一个停止/播放自动滚动的按钮。

编码：

```
self.scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
self.scrollView.autoresizingMask = UIViewAutoresizingFlexibleHeight;
self.scrollView.contentSize = CGSizeMake(320,4750);
_scrollView.frame = CGRectMake(0, 44, 320, 420);

UIButton *camilaButton = [UIButton buttonWithType:UIButtonTypeCustom];
[camilaButton setImage:[UIImage imageNamed:@"camila.jpg"] forState:UIControlStateNormal];
[camilaButton setImage:[UIImage imageNamed:@"camila.jpg"] forState:UIControlStateHighlighted];
camilaButton.frame = CGRectMake(20, 10, 280, 200);

[self.scrollView addSubview:camilaButton];
[camilaButton addTarget:self action:@selector(onButtonPressCamila) forControlEvents:UIControlEventTouchUpInside];

UILabel *camilaLabel = [[UILabel alloc] initWithFrame:CGRectMake(40,220,100,30)];
camilaLabel.text = @"Camila";
[self.scrollView addSubview:camilaLabel]; 
```

...然后在滚动视图的末尾有类似的带有图像的按钮。

我怎样才能做到这一点？

米海

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:30:48.717

*可能最简单的方法是在没有*动画的情况下从一个点滚动到另一个点：

```
CGPoint theScrollPoint;
theScrollPoint.x = 0;
theScrollPoint.y = (nRegion * self.tableView.rowHeight) +
dblPctIntoRegion * (self.tableView.rowHeight);
[self.tableView setContentOffset: theScrollPoint animated:FALSE]; 
```

如果您可以将其近似为点对点（并且您确实说得很慢），它将足够平滑，并且避免了在动画期间处理用户手动滚动的麻烦。

如果您确实决定为您的程序化滚动设置动画，请注意，当您尝试以编程方式滚动时，有一些方法可以通过用户轻弹滚动条等，您最终可能会重新进入 scrollViewDidEndScrollingAnimation 。我不得不求助于黑客：

```
- (void) scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView
{
  if(!m_bNoReentrantscroll)
  {
    m_bNoReentrantscroll = TRUE;
  }
  m_bNoReentrantscroll = FALSE;
} 
```

无论如何，当你深入测试它时，这一切都比看起来更棘手。我建议放弃卷轴上的动画！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:19:59.817

Make a timer that will periodically call this table view method

```
[tableView scrollRowToVisible:nextRow++]; 
```

nextRow can be a property NSInteger or a global/static variable.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:20:26.390

```
- (void) animateScroll:(NSTimer *)timerParam
{
    const NSTimeInterval duration = 10.2;

    NSTimeInterval timeRunning = -[startTime timeIntervalSinceNow];

    if (timeRunning >= duration)
    {
        [scrollView setContentOffset:destinationOffset animated:YES];
        [timer invalidate];
        timer = nil;
        return;
    }
    CGPoint offset = [scrollView contentOffset];
    offset.y = startOffset.y + (destinationOffset.y - startOffset.y) * timeRunning / duration;
    [scrollView setContentOffset:offset animated:YES];
}

- (void) doAnimatedScrollTo:(CGPoint)offset
{
    self.startTime = [NSDate date];
    startOffset = scrollView.contentOffset;
    destinationOffset = offset;

    if (!timer)
    {
        self.timer =
        [NSTimer scheduledTimerWithTimeInterval:0.01
                target:self
                selector:@selector(animateScroll:)
                userInfo:nil
                repeats:YES];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:55:03.307

我还发现这段代码可以解决问题：

[http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/](http://sugartin.info/2012/01/21/image-sliding-page-by-page-uiscrollview-auto-scrolling-like-image-slider/)

并将其调整为垂直滑动而不是水平滑动。

它是逐页的，但它最终适合我的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:18:54.787

这个改编的代码成功了（每张图片都是 280 x 200）：

```
 - (void)viewDidLoad
 {
[super viewDidLoad];

UIScrollView *scr=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
scr.tag = 1;
scr.autoresizingMask=UIViewAutoresizingNone;
[self.view addSubview:scr];
[self setupScrollView:scr];
UIPageControl *pgCtr = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 264, 480, 36)];
[pgCtr setTag:12];
pgCtr.numberOfPages=10;
pgCtr.autoresizingMask=UIViewAutoresizingNone;
[self.view addSubview:pgCtr];
 }

  - (void)setupScrollView:(UIScrollView*)scrMain {
// we have 10 images here.
// we will add all images into a scrollView & set the appropriate size.

for (int i=1; i<=10; i++) {
    // create image
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"sti%02i.jpg",i]];
    // create imageView
    UIImageView *imgV = [[UIImageView alloc] initWithFrame:CGRectMake(20, ((i-1)*scrMain.frame.size.height+100), 280, 200)];
    // set scale to fill
    imgV.contentMode=UIViewContentModeScaleToFill;
    // set image
    [imgV setImage:image];
    // apply tag to access in future
    imgV.tag=i+1;
    // add to scrollView
    [scrMain addSubview:imgV];
}
// set the content size to 10 image width
[scrMain setContentSize:CGSizeMake(scrMain.frame.size.width, scrMain.frame.size.height*10)];
// enable timer after each 2 seconds for scrolling.
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(scrollingTimer) userInfo:nil repeats:YES];

}

 - (void)scrollingTimer {
// access the scroll view with the tag
UIScrollView *scrMain = (UIScrollView*) [self.view viewWithTag:1];
// same way, access pagecontroll access
UIPageControl *pgCtr = (UIPageControl*) [self.view viewWithTag:12];
// get the current offset ( which page is being displayed )
CGFloat contentOffset = scrMain.contentOffset.y;
// calculate next page to display
int nextPage = (int)(contentOffset/scrMain.frame.size.height) + 1 ;
// if page is not 10, display it
if( nextPage!=10 )  {

    [scrMain scrollRectToVisible:CGRectMake(0, nextPage*scrMain.frame.size.height, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
    pgCtr.currentPage=nextPage;
    // else start sliding form 1 :)

} else {

    [scrMain scrollRectToVisible:CGRectMake(0, 0, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
    pgCtr.currentPage=0;
}
} 
```

# mysql - AppleScript 可以与托管的 MySQL 数据库对话吗

> ID：15413129
> 
> 赞同：0
> 
> 时间：2013-03-14T15:15:52.863
> 
> 标签：mysql, applescript, hosted

我有您的标准托管 MySQL 数据库 (HostGator)，我想通过 Apple 脚本从我的 Mac 笔记本电脑连接到它。这甚至可能吗？如果是这样，我在哪里可以找到示例？我发现的示例用于连接到本地 MySQL 实例。

我想从表中选择并更新表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:38:00.947

您可以在服务器上放置一个解析 SQL 语法的 PHP 脚本。一个非常简单的例子是

```
<?php
  include 'connect_to_database.php';
  $sql = $_GET['s'];
  $result = mysql_qery($sql);
  if (!result) echo mysql_error();
  else echo $result;
  include 'close_database.php';
?> 
```

其中包含包含您的数据库凭据。

现在您可以使用 AppleScript。假设你的 PHP 文件的 URL 是[http://www.exampledomain123.com/file.php](http://www.exampledomain123.com/file.php)那么你可以使用这个 AppleScript：

```
sql = urlEncode("SELECT * FROM db_name;")
set shellScript to "curl \"http://www.exampledomain123.com/file.php?s=" & sql & "\""
do shell script shellScript 
```

这应该执行所需的 SQL 语法。建议通过使用附加的 AppleScript 例程混淆 SQL 语法并在 PHP 中解码混淆后的字符串来调整此代码。

[您可以在http://harvey.nu/applescript_url_encode_routine.html](http://harvey.nu/applescript_url_encode_routine.html)找到 AppleScript 的 urlEncode 例程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:44:44.090

这里有另一种方法，它只使用 shell 脚本并且应该与本地 MySQL 安装一起工作：

```
set shellScript to "/usr/local/mysql/bin/mysql -u USER -pPASSWORD -D DATABASE -e \"SELECT * FROM mytable\""
do shell script shellScript 
```

# php - 将系统日期/时间与插入数据库的日期/时间进行比较

> ID：15413130
> 
> 赞同：0
> 
> 时间：2013-03-14T15:15:53.707
> 
> 标签：php, html, datetime, if-statement

我有这种在数据库中保存日期的方法：

(DROPDOWN)月 (DROPDOWN)日 (DROPDOWN)年

我有这种方法可以节省数据库时间：

（文本框）时间（下拉）上午/下午

然后它将像这样保存在基础中：

```
+------------------+-----------+
|      date        |   time    |
+------------------+-----------+
| January 1, 2013  |  4:00 PM  |
+------------------+-----------+
| January 6, 2013  |  9:00 AM  |
+------------------+-----------+ 
```

我如何将数据库中的日期与计算机时间与 if else 语句进行比较？

```
if ("date/time in database" == "date/time in computer")
{
  echo "something stuff.";
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:10:07.170

```
$date_from_db = "January 1, 2013 4:00 PM";  //just concatenate the date and time from db 

if ($date_from_db == date('F j, Y h:i A')){   
    echo "write your code";
} 

OR 

if (strtotime($date_from_db) == strtotime(date('F j, Y h:i A'))){
    echo "write your code";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:23:52.683

转换 unix 时间戳中的日期，然后比较：

```
 if (strtotime($your-db-stored-date) == strtotime($now)) {
    //doSomething;
  } 
```

无论如何，请务必使用数据库中的适当类型保存日期...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:22:54.437

为此使用 strtotime()

```
if (strtotime("January 1, 2013") == strtotime(date('F j, Y')))
{
   echo "something stuff.";
} 
```

文档链接：[http ://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

祝你好运！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:31:49.727

不是确切的答案，但它可以帮助你......我使用这些函数将数据库中的日期时间存储为UTC，并在显示时转换为服务器时间。它考虑了夏令时。

```
function convert_server_datetime_to_utc() {
  return $gmdate = gmdate("Y-m-d H:i:s");
}

function convert_utc_to_server_datetime($utc=false) {
    if (empty($utc)){return false;}
    $date = new DateTime($utc);
    $hours_offset = date("Z")/60/60;
    if(substr($hours_offset, 0, 1) == "-") {
        $hours_offset = substr($hours_offset, 1);
        $invert=1;
    }
    $offset = new DateInterval('PT'.$hours_offset.'H');
    if (!empty($invert)) {$offset->invert = 1;}
    $date->add($offset);
    return $date->format("Y-m-d H:i:s");
}

echo "convert_datetime_to_utc(): " . $d = convert_server_datetime_to_utc();
echo "<hr>convert_utc_to_datetime(): " . convert_utc_to_server_datetime($d); 
```

# google-maps - 谷歌地图：无法添加标记

> ID：15413136
> 
> 赞同：0
> 
> 时间：2013-03-14T15:16:05.677
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

无法添加标记，可能非常简单，但我是新手。谢谢。

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?&sensor=true"></script>
    <script type="text/javascript">

        function addMarker() {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(-34.397, 150.644),

                title:"Hello World!"
            });
        }

        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
        }
        google.maps.event.addDomListener(window, 'load', initialize);

        $(document).ready(function() {
            addMarker();
        })

    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:34:45.233

两个问题，需要设置marker的map变量。您的地图变量是初始化函数的本地变量。

*   在初始化地图后，从您的初始化函数（地图存在的地方）调用 addMarker 函数。

    ```
     function addMarker(map) {
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(-34.397, 150.644),
            map:map,

            title:"Hello World!"
          });
        }

        function initialize() {
          var mapOptions = {
            center: new google.maps.LatLng(-34.397, 150.644),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map-canvas"),
          mapOptions);
          addMarker(map);
        } 
    ```

[工作示例](http://www.geocodezip.com/v3_simpleMap_SO_Marker.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:20:59.983

您必须在标记构造函数中设置地图属性或在新对象上调用 setMap：

```
var marker = new google.maps.Marker({
            position: new google.maps.LatLng(-34.397, 150.644),
            map: map,   //make your map object global!
            title:"Hello World!"
        }); 
```

或者

```
marker.setMap(map); 
```

[https://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)

编辑：我关于使地图对象全局化的评论显然被忽略了，所以这里是：

map 对象应该是全局的，不仅是为了这个解决方案，而且您将在脚本的多个函数中需要它

# java - 使用两个单例时如何避免递归？

> ID：15413138
> 
> 赞同：1
> 
> 时间：2013-03-14T15:16:09.000
> 
> 标签：java, design-patterns, recursion, singleton, infinite

我有一个 Gui 类，它是一个 Singleton，因为许多其他类必须使用 Gui 的方法，并且任何时候都应该只有一个 Gui 的实例。

我也有播放器类（有点像音频播放器），它也是一个单例。

当我启动 Gui 时，我告诉玩家获取当前状态（这会创建玩家的新实例）并将其显示在 Gui 上。因此，玩家创建了一个 Gui 的新实例，因为 Gui 的 Constructor 还没有完成。

因此，这会产生无休止的递归。我想保留单例模式。有没有办法将 getInstance() 中的实例设置为“null”以外的其他值，即使 Constructur 尚未完成？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:19:57.807

我也许会[完全避免单例模式](https://stackoverflow.com/questions/11292109/why-is-singleton-considered-an-anti-pattern-in-java-world-sometimes)。正如您所发现的，它使控制创建生命周期变得困难。

相反，我会创建一个`GuiManager`，它创建`Gui`然后将其注入到需要了解它的适当组件中？这称为[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)（或[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)）并避免了对全局状态的需要。好处包括使测试变得容易（因为周围的框架控制着对象的生命周期）并且这些对象的创建是可预测的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:22:14.077

创建初始化函数

```
public class Gui
{
    public static Gui instance;
    public static Gui getInstance()
    {
        if(instance == null)
        {    
            instance = new Gui();
            instance.initialize();
        }
        return instance;        
    }

    private Gui()
    {

    }

    private initialize()
    {
        // do constructor work here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:22:26.923

我会使用静态初始化块。在构造类时调用它。不是在创建对象时。并且它只调用一次。[看更多](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:25:43.153

这种递归是更一般的设计问题的症状。您当然可以尝试通过从构造函数中“泄漏”实例引用或将“构造”推迟到稍后调用的某些初始化方法（可能是懒惰的）来解决它，但我不推荐这个¹。

为什么 GUI*和*Player 类必须是单例的，并且必须相互了解，更具体地说，必须在构建过程中相互了解？除了“更方便”之外，还有其他原因可以全局访问某个对象吗？并不是说方便不重要，但它通常不应该是设计决策的唯一原因。

更好的方法是完全摆脱单例，因为没有真正的理由不能同时存在 Player 和 GUI 的两个实例。当然，您的程序中可能只有一个，但这不是单例的目的。

此外，您应该仅在一个方向上具有依赖关系。试着想想什么可以没有对方而存在，什么不能。我认为 GUI 应该取决于 Player，因为您可能可以想象没有 GUI 的 Player，但是没有 Player 的 GUI 根本没有意义。因此，您首先构造一个 Player，然后构造一个 GUI，并将其操作的 Player 实例传递给它。如果您认为您需要从 Player 内部的任何地方访问您的 GUI 实例，您应该重新考虑您的设计并尝试使这些对象更加独立。这通常可以通过使用观察者模式来完成，并让 GUI 监听发生的变化/动作/事情。这样，您的应用程序代码根本不知道 GUI。但是，在您的 GUI 中，您可以随意传递 GUI 的实例。

关于引入“经理”对象或工厂模式的想法：它可能很有用，但你当然可以在没有它的情况下完成我上面所说的所有操作，并且仍然有一个理智的设计。我通常会反对“经理”课程，因为它们往往会做太多事情，并且通常是伪装的单身人士。然而，工厂可能很有用，但前提是您希望将事物的实际构造与它们的使用分离，例如允许稍后实现不同类型的 GUI。

所以一个简单的实现看起来像这样：

```
public static void main(...) {
    Player player = new Player();
    // maybe some other stuff to configure/set up the player

    GUI gui = new GUI(player);
    gui.show(); // or something similar
} 
```

如果您想使用工厂，您当然可以将`new ...`表达式替换为对您之前必须获得的工厂的调用。

^(1 为什么？好吧，例如，如果您成功*构建*了 GUI，但后来无法初始化它，例如抛出异常，会发生什么？您需要某种方式将此“无效”状态传达给已获得 GUI 实例的所有对象。此外，您必须确保在初始化 GUI 实例之前没有人使用它。)

# c# - MVC 日期格式和日期选择器

> ID：15413141
> 
> 赞同：3
> 
> 时间：2013-03-14T15:16:16.540
> 
> 标签：c#, jquery, asp.net-mvc

我刚刚实现了 jQuery UI 提供的日期选择器，以便使用日历来选择日期。不幸的是，当我选择日期并想要单击创建按钮时，应用程序不想保存我的条目，因为日期格式无效。我试图在 webconfig 中添加全球化参数，但似乎这种方式不起作用。

jQuery部分：

```
@section Scripts {
@Scripts.Render("~/bundles/jqueryval")
@Scripts.Render("~/bundles/jqueryui")
@Styles.Render("~/Content/themes/base/css")
<script type="text/javascript">
    $(document).ready(function () {
        $(".datepicker").datepicker({
            changeMonth: true,
            changeYear: true,

        });
    });
</script> 
```

}

我的创建视图：

```
 @using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Person</legend>
        <div class="editor-label">
            First name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            Last name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            National number :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>
        <div class="editor-label">
            Start date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new { @class = "datepicker" })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>
        <div class="editor-label">
            End date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker"})
            @Html.ValidationMessageFor(model => model.EndDate)
        </div>
        <div class="editor-label">
            Distance House - Work (km) :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>
        <div class="editor-label">
            Category :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href="../ProductPackageCategory/Create">
                Add a new category?</a>
        </div>
        <div class="editor-label">
            Upgrade? :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

有什么想法可以解决这个问题吗？

编辑：当我修改并将我的日期格式设置为“dd/mm/yy”格式时，会出现一个验证错误，说“该字段 StartDate 必须是一个日期。” 如果我将格式更改为“mm/dd/yy”格式，则会出现一个验证错误，提示“字段 StartDate 必须是日期”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:34:02.363

您也许可以将模型的格式更改为：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd-MM-yyyy}")]
public DateTime StartDate { get; set; } 
```

**编辑：**

或者将其他答案的代码更新为：

```
 $(".datepicker").datepicker({ 
   changeMonth: true,
   changeYear: true,
   dateFormat: 'dd-mm-yy' 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:19:24.503

您可以指定日期的格式，尝试这样的操作，例如使用以下`dd/MM/yyyy`格式：

```
$(".datepicker").datepicker({ 
   changeMonth: true,
   changeYear: true,
   dateFormat: 'dd/MM/yyyy' 
}); 
```

当您选择日期时，文本框上的值将以这种格式出现并提交到您的帖子中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T11:52:00.223

希望这可以帮助您，您可以更改 Global.asax 文件中的当前文化，用于应用程序级别例如，

```
using System.Globalization;
using System.Threading;

protected void Application_BeginRequest(Object sender, EventArgs e)
{    
  CultureInfo newCulture = (CultureInfo) System.Threading.Thread.CurrentThread.CurrentCulture.Clone();
  newCulture.DateTimeFormat.ShortDatePattern = "dd-MMM-yyyy";
  newCulture.DateTimeFormat.DateSeparator = "-";
  Thread.CurrentThread.CurrentCulture = newCulture;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-13T18:52:58.497

你有像 jquery.validator.js 这样的插件吗？如果你...试试这个：

```
 $("#myform").validate({
   ignore: "#DateInput"
}) 
```

# sql - 如何将 Excel 表连接到 SQL 表

> ID：15413144
> 
> 赞同：0
> 
> 时间：2013-03-14T15:16:20.190
> 
> 标签：sql, excel, sharepoint

我有一个 Excel 工作表，其中包含一个从 SharePoint 导出的表，但是我已经完成了它，因此 Excel 文件会使用来自 SharePoint 的新数据进行刷新。现在我需要在这个 excel 文件和 SQL 数据库之间创建一个连接。

我看过的大多数事情都只告诉我如何从 SQL 表中提取数据到 excel 中，而我想做相反的事情。我还尝试使用第三方应用程序将 excel 文件连接到 SQL，但这仍然不起作用

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:19:20.270

BIRT 是一个免费软件报告工具，可以使用 Excel 作为报告源。

[http://www.eclipse.org/birt/phoenix/](http://www.eclipse.org/birt/phoenix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:07:45.907

这通常使用 SQL Server 中的 SSIS（早期版本中的 DTS）来完成。使用可视化界面很容易连接到电子表格。必须记住，在任何导入中，工作表的名称始终以“$”结尾。SSIS 和 DTS 还支持可用于根据需要动态更改电子表格名称的变量。此博客条目讨论了一些问题：[http ://www.sqlservercentral.com/blogs/bradleyschacht/2012/03/23/excel-source-the-output-column-failed-because-truncation-occurred/](http://www.sqlservercentral.com/blogs/bradleyschacht/2012/03/23/excel-source-the-output-column-failed-because-truncation-occurred/)
**编辑：**最后找到了 SQL 2005 的教程。从那以后它没有太大变化。请参阅： [http ://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205](http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205)

# javascript - 页面徽标的浏览器兼容性问题

> ID：15413145
> 
> 赞同：0
> 
> 时间：2013-03-14T15:16:23.307
> 
> 标签：javascript, jquery, css, html, jquery-ui

我的页面顶部有一个徽标。它在 Opera 中看起来很棒。但是在 IE9 和 Chrome25 中这个部分是不可见的。我该如何解决这个问题？ [http://jsbin.com/eqokec/4/](http://jsbin.com/eqokec/4/)

javascript

```
<style type="text/css">
        html,body {
            background: url("img/brick.jpg") repeat;
            height: 95%;
            font-size: 100%;
            margin-top: 2.5%;
        }

        .logo {
            min-height: 20% !important;
            background: url('img/logo.jpg') center no-repeat;
            background-size: auto 60%;
        }

        #container {
            background: #ffffff;
            width: 60%;
            margin: 0 auto;
            min-height: 100%;
            border: none;
            -moz-border-radius: 25;
            -webkit-border-radius: 25;
            border-radius: 25;
        }

        table {
            width: 98%;
            clear: none;
        }

        th {
            float: left;
        }

        span {
            color: #802420;
        }
        dl{
            display:inline-block;
            vertical-align:top;
            padding-right: 10px;
        }
        dt { float: left;  overflow: hidden; white-space: nowrap; }
        dt b,td b{color: #499249; text-decoration: underline}
        dd{ float: right;  overflow: hidden; text-indent: 3px;}
        /*dd:before{content: ".........................."}*/
        img { max-width: 100%; }
        img#street_view{
            width: 60%;
        }

        *{
            font-family: verdana arial sans-serif;
        }
        @media (max-width:639px){body{font-size: .5rem;margin: 0;padding: 0;}#container{width: 100%;}}
        @media (min-width: 640px) { body {font-size: .5rem;}#container{width: 50%} }
        @media (min-width:960px) { body {font-size: .7rem;}#container{width: 50%} }
        @media (min-width:1100px) { body {font-size:.9rem;}#container{width: 50%}}
    </style> 
```

html

```
<section id="container">
<div class="logo">
    <h2><a href="/" title="Luigi's Pizzeria"></a></h2>
</div>
<div id="tabs">
<ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#menu">Menu</a></li>
    <li><a href="#locations">Locations</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:31:45.577

添加到类`.logo` `display: block;`和`height: 200px;`或类似的东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:17:36.443

您可能需要更大的最小高度。

```
.logo {
    min-height: 150px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:37:18.650

修正

```
#container {
        min-height: 100%;
    } 
```

到

```
#container {
        height: 100%;
    } 
```

# grammar - 可能的最短字符串

> ID：15413147
> 
> 赞同：2
> 
> 时间：2013-03-14T15:16:27.207
> 
> 标签：grammar, theory

我在接受采访时，被要求给出给定这种上下文无关语法生成的最短字符串。我多年没有复习，所以我认为我错了。答案是什么，所以我知道它以供将来使用？

```
S --> ABA | SS
A --> S0  | T1T
B --> S1  | 0
T --> 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:40:42.533

通过检查，该语言中的最短字符串导出如下：

```
S
=> ABA      // SS can only be worse than S, no reason to take that route
=> T1TBT1T  // S0 can only be worse than T1T, since S0 will necessarily add more A
=> 0100010  // choosing a single terminal is always as good as we can do 
```

这向您展示了如何考虑手动检查。算法解决方案是一个单独的问题，坦率地说，不是你被要求做的事情。

# vba - Powerpoint VBA msoCallout 链接更新

> ID：15413148
> 
> 赞同：0
> 
> 时间：2013-03-14T15:16:30.360
> 
> 标签：vba, powerpoint, external-links

伙计们——

我正在寻找一种方法来处理和操作 powerpoint 中的“图片”链接。这些链接不同于链接另一个 Microsoft (MS) 对象时创建的对象类型。这些是图表、Excel 中的单元格区域或 Word 中的文本区域。选择一个 MS 对象会产生：

```
Application.ActiveWindow.Selection.Type = msoLinkedOLEObject 'true 
```

但是，当插入图片时——这是我所关心的——（插入>图片>插入和链接）会产生：

```
Application.ActiveWindow.Selection.Type = msoCallout 'true 
```

跑步：

```
ActivePresentation.UpdateLinks or Object.LinkFormat.Update 
```

适用于 OLE 对象，但不适用于这些“其他”类型的链接。

我需要能够 1）识别这些对象（msoCallout 也用于其他非链接对象，所以这没有帮助）2）更新链接和 3）修改链接路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:10:27.810

你在那里得到了误导性的信息。你想看看：

```
ActiveWindow.Selection.ShapeRange(1).Type 
```

反而。你会发现它是 11，msoLinkedPicture

这为您提供了链接图片的路径：

```
With ActiveWindow.Selection.ShapeRange(1)
    Debug.Print .LinkFormat.SourceFullName
End With 
```

# r - 在 R 中插入列

> ID：15413149
> 
> 赞同：1
> 
> 时间：2013-03-14T15:16:30.467
> 
> 标签：r, merge, dataframe

我有以下内容`data frame`：

```
 Date        CCL     Rie
   2002-01-01  68.6879472  MB
   2002-02-01  38.1691072  MB
   2002-03-01  53.2893517  MB
   2002-04-01  16.9071572  MA
   2002-05-01   8.9496654   A
   2002-06-01  37.1852996  MB
   2002-07-01  39.0751017  MB
   2002-08-01  16.4683628  MA
   2002-09-01  18.9381392  MA
   2002-10-01  18.7873039  MA
   2002-11-01  39.9079079  MB 
```

而且我还没有找到获取下一个输出的代码或包：

```
 Date            New Column
2002-01-01          68.6879472
2002-01-01             MB
2002-02-01          38.1691072
2002-02-01             MB
2002-03-01         53.2893517
2002-03-01            MB
2002-04-01          16.9071572 
2002-04-01             MA 
```

等等.....

即，对于相同`date`，创建一个新列，该列抛出`CCL`和`Rie`插入的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:26:36.887

或者使用 base 的`reshape`：

```
tt <- reshape(data = df, idvar="Date", varying = c("CCL", "Rie"), 
       direction="long", v.names=c("values"))[c("Date", "values")]
> tt[order(tt$Date), ]
#                    Date     values
# 2002-01-01.1 2002-01-01 68.6879472
# 2002-01-01.2 2002-01-01         MB
# 2002-02-01.1 2002-02-01 38.1691072
# 2002-02-01.2 2002-02-01         MB
# 2002-03-01.1 2002-03-01 53.2893517
# 2002-03-01.2 2002-03-01         MB
# 2002-04-01.1 2002-04-01 16.9071572
# 2002-04-01.2 2002-04-01         MA
# 2002-05-01.1 2002-05-01  8.9496654
# 2002-05-01.2 2002-05-01          A
# 2002-06-01.1 2002-06-01 37.1852996
# 2002-06-01.2 2002-06-01         MB
# 2002-07-01.1 2002-07-01 39.0751017
# 2002-07-01.2 2002-07-01         MB
# 2002-08-01.1 2002-08-01 16.4683628
# 2002-08-01.2 2002-08-01         MA
# 2002-09-01.1 2002-09-01 18.9381392
# 2002-09-01.2 2002-09-01         MA
# 2002-10-01.1 2002-10-01 18.7873039
# 2002-10-01.2 2002-10-01         MA
# 2002-11-01.1 2002-11-01 39.9079079
# 2002-11-01.2 2002-11-01         MB 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:21:49.063

您可以使用包中的`melt`功能来做到这一点`reshape2`：

```
d <- melt(d, id.vars="Date")
d[order(d$Date),-which(colnames(d)=="variable")] 
```

这使 ：

```
 Date      value
1  2002-01-01 68.6879472
12 2002-01-01         MB
2  2002-02-01 38.1691072
13 2002-02-01         MB
3  2002-03-01 53.2893517
14 2002-03-01         MB
4  2002-04-01 16.9071572
15 2002-04-01         MA
5  2002-05-01  8.9496654
16 2002-05-01          A
6  2002-06-01 37.1852996
17 2002-06-01         MB
7  2002-07-01 39.0751017
18 2002-07-01         MB
8  2002-08-01 16.4683628
19 2002-08-01         MA
9  2002-09-01 18.9381392
20 2002-09-01         MA
10 2002-10-01 18.7873039
21 2002-10-01         MA
11 2002-11-01 39.9079079
22 2002-11-01         MB 
```

# php - 是否可以在 Twig 中使用本机 php 函数？

> ID：15413150
> 
> 赞同：5
> 
> 时间：2013-03-14T15:16:31.297
> 
> 标签：php, function, templates, symfony, twig

我是 Symfony 的新手。如何在树枝模板中使用本机 php 函数？

例如，我想`chr`在这样的循环中使用该函数：

```
{% for directory in directories %}
    chr(loop.index)
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:21:01.467

Twig 允许您添加[功能](http://twig.sensiolabs.org/doc/advanced.html#functions)和[过滤器](http://twig.sensiolabs.org/doc/advanced.html#filters)。[文档](http://twig.sensiolabs.org/doc/advanced.html)上有多个示例。

**例如，**

*   [创建过滤器就像将名称与 PHP 可调用关联一样简单](http://twig.sensiolabs.org/doc/advanced.html#filters)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:03:14.390

不，您不能直接在 Twig 中使用 PHP。

有一些选项：

## 使用 PHP 作为模板引擎

您可以将 PHP 设置为模板引擎而不是 twig。这意味着您在模板中使用 PHP，并且可以使用所有原生 PHP 函数。有关如何执行此操作的信息，请参阅[此文档文章。](http://symfony.com/doc/current/cookbook/templating/PHP.html)

## 创建一个 Twig 扩展

您可以轻松创建自己的 Twig 扩展。最佳实践是创建一个`AcmeTwigBundle`放置所有常见 Twig 扩展的位置。请参阅[这篇文档文章](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)，了解如何在 Symfony 中执行此操作。

从 Twig 1.12（Symfony2.2 附带）开始，有一个非常好的类可以让您轻松地将 PHP 函数映射到 twig 函数：

```
new Twig_SimpleFilter('rot13', 'str_rot13'); 
```

这将创建一个`rot13`映射到`str_rot13`PHP 函数的 Twig 函数。

# javascript - 用于 javascript lzw 压缩的字母字典，“仅使用这些字符”-string

> ID：15413153
> 
> 赞同：1
> 
> 时间：2013-03-14T15:16:34.897
> 
> 标签：javascript, google-chrome, compression, syntax-error, lzw

祝各位读者和帮助者们美好的一天，我想利用我最近发现的一个 javascript 函数，它的 LZW 压缩字符串。

```
function lzw_encode(s) {
    var dict = {};
    var data = (s + "").split("");
    var out = [];
    var currChar;
    var phrase = data[0];
    var code = 256;
    for (var i=1; i<data.length; i++) {
        currChar=data[i];
        if (dict[phrase + currChar] != null) {
            phrase += currChar;
        }
        else {
            out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
            dict[phrase + currChar] = code;
            code++;
            phrase=currChar;
        }
    }
    out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
    for (var i=0; i<out.length; i++) {
        out[i] = String.fromCharCode(out[i]);
    }
    return out.join("");
} 
```

这个函数实际上工作得很好，我得到的唯一问题是我想通过 websockets 传输编码的字符串，而不需要额外的编码（例如 base64），但这并不是每次都有效。有时压缩的字符串包含无法通过 websockets 传输的字符，它会引发一个 javascript 错误，表明该字符串具有非法字符。所以我的想法是在编码过程中只使用可接受的字符，比如应该用于压缩的字符“白名单”。我从代码中了解到的是它采用了某个数字的 charCode，所以我虽然可以创建自己的 charCodeSet，但我真的不知道如何实现它以及它是否可以工作。

*   Q1：我该怎么做才能让我的 lzw 编码只使用我定义的字符串的字符？
*   Q2：我还能如何“http/s”传输这些 websocket 不想传输的中文、阿拉伯文和控制字符？

顺便说一句，这是 Chrome 抛出的错误：

```
Websocket message contains invalid character(s).
Uncaught Error: SYNTAX_ERR: DOM Exception 12 
```

**更新1：虽然如果你也看到解码功能它可能会有所帮助**

```
function lzw_decode(s) {
    var dict = {};
    var data = (s + "").split("");
    var currChar = data[0];
    var oldPhrase = currChar;
    var out = [currChar];
    var code = 256;
    var phrase;
    for (var i=1; i<data.length; i++) {
        var currCode = data[i].charCodeAt(0);
        if (currCode < 256) {
            phrase = data[i];
        }
        else {
           phrase = dict[currCode] ? dict[currCode] : (oldPhrase + currChar);
        }
        out.push(phrase);
        currChar = phrase.charAt(0);
        dict[code] = oldPhrase + currChar;
        code++;
        oldPhrase = phrase;
    }
    return out.join("");
} 
```

在这里我也必须实现我的自定义字符集，我猜？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:46:23.423

确定可以发送和不能发送的字节。（希望来自可靠的文档来源，而不是测试，但通过测试验证。）

设计一个转义码，您使用其中一个有效字符作为转义字符，而下一个字符（也是有效字符之一）对您无法发送的字节进行编码。

将其应用于压缩机的输出。最好将压缩工作留给压缩器，而不是试图用编码来负担它。您应该将编码作为一个单独的步骤。

不要使用LZW。[与现代方法（ zlib](http://zlib.net/)、[lz4](https://code.google.com/p/lz4/)、[lzma](http://www.7-zip.org/sdk.html)等）相比，它无效且过时

# javascript - 用上传的图片替换图片

> ID：15413156
> 
> 赞同：3
> 
> 时间：2013-03-14T15:16:44.873
> 
> 标签：javascript, jquery, asp.net, html, sql

我在解决图像上传问题时遇到了一些麻烦。我正在使用带有 jquery 函数的 html 文件上传表单，该函数检查所选图像的文件类型。我想要做的是用用户决定上传的任何内容替换网站页面上的当前图像。但是，我找不到从上传中获取完整图像源路径的方法——我总是得到一个假路径，这对我想做的事情不起作用。如果我想这样做，我真的需要为图像创建一个数据库，还是有其他方法？我不能使用 PHP/MySQL 代码——只能使用 ASP.NET、C# 和 SQL/SQL Express。

这是我到目前为止的代码，除了我无法用上传的图片成功替换默认图片（其名称和 id 为“logo”），因为我没有从上传者那里获得完整路径。任何建议会很有帮助的！提前致谢！

```
<html>
    <head>
        <title>Image Swap Widget Testing</title>

    <style type="text/css">
        .myWebForm{
            border: 4px solid grey;
            width: 300px;
            height: 200px;
            padding: 10px;
            font-family: Arial;
            font-size: small;
        }
    </style>

        <script type="text/javascript" src="jquery-1.9.1.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {
                $('INPUT[type="file"]').change(function () {
                    var ext = this.value.match(/\.(.+)$/)[1];
                    switch (ext) {
                        case 'jpg':
                        case 'jpeg':
                        case 'png':
                        case 'gif':
                        case 'bmp':
                            $('#uploading').attr('disabled', false);
                            $('#logo').attr("src", $('#uploading').val());
                            alert('image approved!');
                            alert($('img').attr('src'));
                            alert($('img')[0].src);
                            alert($('#uploading').val(img.src));
                        break;
                    default:
                        alert('This is not an allowed file type.');
                        this.value = '';
                    }
                });

                $('#addButton').click(function (){
                    //alert('Add Image Button was clicked');

                    //var newImgSrc = getSrc($('#uploading').val());
                    //$('#logo').attr("src", newImgSrc);
                    //alert($('#logo').attr("src"));
                    //alert($('#uploading').val());

                });
            });

    </script>
    </head>

    <body>  

    <img src="Lighthouse.jpg" name="logo" alt="logo" id="logo" width="200" />

    <br/>

    <form name="myWebForm" class="myWebForm" action="#" method="post">
        <h3>Change Default Logo</h3>
            <input type="file" name="uploadField" id="uploading" />
        <p><b>Allow extensions:</b> .png, .bmp, .jpg, .jepg, .gif<p>
        <p><b>Dimensions:</b> 50px x 80px<p>
        <input type="button" name="addButton" id ="addButton" class="addButton" value="+ Add" />
        <input type="button" name="cancelButton" id ="cancelButton" class="cancelButton" value="X Cancel" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T19:45:10.550

您始终可以使用 FileSystem API。首先，我们的输入：

```
<input type="file" id="MyImage" /> 
```

监听变化并获取文件：

```
document.getElementById('MyImage').onchange = function(e) {
    // Get the first file in the FileList object
    var imageFile = this.files[0];
    // get a local URL representation of the image blob
    var url = window.URL.createObjectURL(imageFile);
    // Now use your newly created URL!
    someImageTag.src = url;
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:38:31.377

如果您使用 iframe 传输，则可以在加载时从 iframe 获取路径。

```
<script>
$('#upload-frame').load(function(e) {
    $('img').attr('src', $(this).contents().find('body').html());
});
</script>
<form method="post" action="upload.php" enctype="multipart/form-data"
      id="upload-form" target="upload-frame">
  <input type="file" name="uploadField" id="uploading" />
  <input type="submit" value="upload"/>
</form>
<iframe id="upload-frame" name="upload-frame"></iframe> 
```

在服务器上，您可以执行以下操作：

```
$info = pathinfo(basename($_FILES['image']['name']));
$ext = strtolower($info['extension']);
if (in_array($ext, array('png', 'jpg', 'gif', 'bmp'))) {
    $path = 'SOME/PATH/filename.' . $ext;
    if (move_uploaded_file($_FILES['image']['tmp_name'], $path)) {
        echo $path;
    }
} 
```

# jquery - 使用jQuery从数组中选择一个随机元素

> ID：15413157
> 
> 赞同：-6
> 
> 时间：2013-03-14T15:16:46.383
> 
> 标签：jquery, css

我想用 jQUery animate 函数设置背景颜色，我需要从数组中选择一个随机元素。

```
$(".menu li").hover(function() {
  $(this).animate({borderBottomColor:"#81C6DD"}, 200)
}, function() {
  $(this).animate({borderBottomColor:"#D8D9DC"}, 200)
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T15:21:49.903

听起来您不想随机化数组，听起来您每次都想从数组中选择一个随机元素。假设您的颜色数组被调用`colors`，请使用：

```
var color = colors[Math.floor(colors.length * Math.random())]; 
```

虽然我质疑你为什么要这样做。随机颜色听起来像是一个非常丑陋且可能令人困惑的 UI 的秘诀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:28:51.297

创建一个包含大量颜色值的数组，并使用 javascript 中的任何函数生成一个范围之间的随机数，在我们的例子中，我们需要生成一个介于 o 到颜色数组的数组长度之间的随机数。然后使用这个随机数作为颜色数组中的键，并用它代替颜色。

# javascript - 带有事件的 Twitter 按钮的自定义设计

> ID：15413159
> 
> 赞同：23
> 
> 时间：2013-03-14T15:16:48.707
> 
> 标签：javascript, html, twitter

我有一个自定义推文按钮：

```
<a href="http://twitter.com/share?url=http://example.com;text=myText;size=l&amp;count=none" target="_blank">
    <div>
        <img src="/assets/twitter-logo.jpg">
        <span>Twitter</span>
    </div>
</a> 
```

现在我想在推文发布后取得一些成果。为此，我查看了 Twitter 事件 API：

```
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<script type="text/javascript">
    twttr.events.bind('tweet', function (event) {
        alert("Tweet Successful");
    });
</script> 
```

但是，此 API 仅适用于非自定义按钮（`twitter-share-button`类）。

有人设法创建了一个自定义按钮来监听事件吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-29T21:34:59.333

你可以有一个自定义**链接，但仍然有网络意图**！

**关键**是，您的链接不应指向“ https://twitter.com/share [”](https://twitter.com/share)，而应指向“ [https://twitter.com/intent/tweet](https://twitter.com/intent/tweet) ”

像这样：

```
<a href="https://twitter.com/intent/tweet">Tweet</a> 
```

这样您就可以像尝试一样使用网络意图：

```
twttr.events.bind('tweet', function (event) {
  // Do something there
  alert('Tweeted');
}); 
```

检查这个[jsFiddle](http://jsfiddle.net/nmoliveira/aXCNX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T00:25:14.993

我有一个分享动作

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="pincheregio" data-size="large" data-count="none">Tweet</a>

<script>
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

      twttr.ready(function (twttr) {
        twttr.events.bind('tweet', function (event) {
        alert("paso");
      });

    });
</script> 
```

[http://jsfiddle.net/aXCNX/139/](http://jsfiddle.net/aXCNX/139/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-22T12:58:54.933

不要在“推特”活动上浪费您的时间。与其他社交网络不同，即使推文成功完成或用户刚刚关闭窗口，推特也会触发此功能。所以改为使用下面的代码：

```
jQuery('#twitter').off('click').on('click', function() {
  var field_list = {
    url: 'https://example.com/',
    text: 'Some random text',
    hashtags: 'myhashtag,anothertag',
  }
  window.open('https://twitter.com/share?'+jQuery.param(field_list), '_blank', 'width=550,height=420').focus();
}); 
```

# java - POST/PUT 在 HttpClient 中

> ID：15413168
> 
> 赞同：0
> 
> 时间：2013-03-14T15:17:04.417
> 
> 标签：java, json, post, httpclient, put

我正在尝试在我的客户端应用程序中执行 PUT/POST 以更新我的数据库。我正在使用 HttpClient。

以下哪种方法更正确，为什么它们都不起作用？

第一个：**HTTP/1.1 415 不支持的媒体类型**

```
 List <NameValuePair> nvps = new ArrayList <NameValuePair>();

   nvps.add(new BasicNameValuePair("Accept", "application/json"));
   nvps.add(new BasicNameValuePair("Content-Type", "application/json"));

   nvps.add(new BasicNameValuePair("userID", "user5"));
   nvps.add(new BasicNameValuePair("FirstName", "teste"));
   nvps.add(new BasicNameValuePair("LastName", "2"));

   httpPost.setEntity(new UrlEncodedFormEntity(nvps)); 
```

第二：**HTTP/1.1 500 内部服务器错误**

```
 httpPost.setHeader("Accept", "application/json");
    httpPost.setHeader("Content-type", "application/json");

    JSONObject obj = new JSONObject();  
    obj.put("userID", "user5");
    obj.put("FirstName", "teste");
    obj.put("LastName", "2");

    httpPost.setEntity(new StringEntity(obj.toString(), "UTF-8")); 
```

最后我这样做：`HttpResponse response = httpclient.execute(httpPost);`

或者问题可能出在 URL ... 我有：`HttpPost httpPost= new HttpPost("http://localhost:8080/LULServices/webresources/entities.user");` 我想在我的用户服务中添加一个新用户（来自 de 数据库的用户表）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:09:05.850

我已经解决了第二种方法的问题，只需将第一个大写字母更改为小写即可。真是愚蠢的错误..它被定义为`'firstName'`，我写它就像写在DataBase表中一样。

# c# - 在后台捕获键盘按键

> ID：15413172
> 
> 赞同：27
> 
> 时间：2013-03-14T15:17:17.027
> 
> 标签：c#, winforms, keypress

我有一个在后台运行的应用程序。`F12`每当用户随时按下时，我都必须生成一些事件。所以我需要它来捕捉按键。在我的应用程序中，如果任何时候用户按下`F10`某个事件，都会执行。我不明白该怎么做？

有谁知道怎么做？

N:B：这是一个 winforms 应用程序。它不需要关注我的表格。我的主窗口可能保留在系统托盘中，但它仍然必须捕获按键。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-14T15:22:50.537

你想要的是一个**全局热键**。

1.  在类的顶部导入所需的库：

    ```
    // DLL libraries used to manage hotkeys
    [DllImport("user32.dll")] 
    public static extern bool RegisterHotKey(IntPtr hWnd, int id, int fsModifiers, int vlc);
    [DllImport("user32.dll")]
    public static extern bool UnregisterHotKey(IntPtr hWnd, int id); 
    ```

2.  在您的类中添加一个字段，该字段将作为代码中热键的引用：

    ```
    const int MYACTION_HOTKEY_ID = 1; 
    ```

3.  注册热键（例如在 Windows 窗体的构造函数中）：

    ```
    // Modifier keys codes: Alt = 1, Ctrl = 2, Shift = 4, Win = 8
    // Compute the addition of each combination of the keys you want to be pressed
    // ALT+CTRL = 1 + 2 = 3 , CTRL+SHIFT = 2 + 4 = 6...
    RegisterHotKey(this.Handle, MYACTION_HOTKEY_ID, 6, (int) Keys.F12); 
    ```

4.  通过在您的类中添加以下方法来处理键入的键：

    ```
    protected override void WndProc(ref Message m) {
        if (m.Msg == 0x0312 && m.WParam.ToInt32() == MYACTION_HOTKEY_ID) {
            // My hotkey has been typed

            // Do what you want here
            // ...
        }
        base.WndProc(ref m);
    } 
    ```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-01-08T10:50:12.047

如果您在运行 Otiel 的解决方案时遇到问题：

1.  您需要包括：

    ```
     using System.Runtime.InteropServices; //required for dll import 
    ```

2.  像我这样的新手的另一个疑问：“类的顶部”实际上意味着像这样的类的顶部（不是命名空间或构造函数）：

    ```
    public partial class Form1 : Form
    {
        [DllImport("user32.dll")]
        public static extern bool RegisterHotKey(IntPtr hWnd, int id, int fsModifers, int vlc);

        [DllImport("user32.dll")]
        public static extern bool UnregisterHotKey(IntPtr hWnd, int id);
    } 
    ```

3.  您不需要添加 user32.dll 作为对项目的引用。WinForms 总是自动加载这个 dll。

# c# - 在包含存储库方法中调用多个 Lambda 表达式

> ID：15413173
> 
> 赞同：0
> 
> 时间：2013-03-14T15:17:17.390
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我找到了这个通用存储库，但我确实找到了一种使用它的方法：

```
 public T FindSingle(Expression<Func<T, bool>> predicate = null, params Expression<Func<T, object>>[] includes)
    {
        var set = FindIncluding(includes);

        return (predicate == null) ? set.FirstOrDefault() : set.FirstOrDefault(predicate);
    } 
```

我怎么能称之为包括这样的几个相关实体？：

```
 Message messageParentDomain = _messageRepository.FindSingle(m => m.Id == messageDto.MessageParent_Id, includes: i => i.MemberFrom, i => i.MemberTo); 
```

留言类：

```
public class Message
{
    // Primary properties
    public int Id { get; set; }
    public string NameFrom { get; set; }
    public string EmailFrom { get; set; }
    public string TelephoneFrom { get; set; }
    public string Title { get; set; }
    public string MessageText { get; set; }
    public bool? Approved { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime? DateRead { get; set; }

    // Navigation properties
    public Member MemberFrom { get; set; }
    public Member MemberTo { get; set; }
    public MessageType MessageType { get; set; }
    public Message MessageParent { get; set; }

    public Ad Ad { get; set; }
    public Ask Ask { get; set; }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:55:06.313

这是编译的方法的一个版本：

```
public T FindSingle<T>(Expression<Func<T, bool>> predicate = null, params Expression<Func<T, object>>[] includes)
{
    var set = FindIncluding(includes);

    return (predicate == null) ? set.FirstOrDefault() : set.FirstOrDefault(predicate);
} 
```

我假设 T 被调用`Message`（你不能通过 T）给我们`FindSingle<Message>`and `Expression<Func<Message, object>>`。您需要将 T 替换为您真正使用的对象。试试这段代码...

```
Message messageParentDomain = 
    _messageRepository.FindSingle<Message>(
        m => m.Id == messageDto.MessageParent_Id, 
        includes: new Expression<Func<Message, object>>[] {
            i => i.MemberFrom,
            i => i.MemberTo
        }); 
```

# coldfusion - 如何在 cfif 语句中放置多个 NOT 条件？

> ID：15413176
> 
> 赞同：2
> 
> 时间：2013-03-14T15:17:18.870
> 
> 标签：coldfusion, logic, cfml

这是我的代码：

```
<cfif (CFFILE.FileSize GT (4194304))>
Delete File
<cfelseif CFFILE.serverFileExt neq "png"  >
Delete File
<cfelse>
It's ok
</cfif> 
```

我想添加“jpg”和“jpeg”作为允许的文件类型。我试过了，这没有成功。

```
<cfif (CFFILE.FileSize GT (4194304))>
Delete File
<cfelseif ( ( CFFILE.serverFileExt neq "png" ) OR ( CFFILE.serverFileExt neq "jpg" ) OR ( CFFILE.serverFileExt neq "jpeg" ) ) >
Delete File
<cfelse>
It's ok
</cfif> 
```

有任何想法吗？

**解决方案：**

我的 OR 语句必须是 AND，谢谢 Miguel-F，并且随着 Busches 的改进，这是最终结果：

```
<cfif (CFFILE.FileSize GT (4194304))>
    Delete File
<cfelseif NOT ListFindNoCase("jpg,jpeg,png", CFFILE.serverFileExt)>
    Delete File
<cfelse>
    It's ok
</cfif> 
```

多谢你们！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T15:55:37.470

正如 Miguel-F 所说，您的问题是您需要使用`AND`而不是`OR`. 在这种情况下，我还建议切换到使用`ListFindNoCase()`而不是使用多个`OR/AND`语句。

```
<cfif CFFILE.FileSize GT 4194304> <!--- You also don't need all those () here --->
    Delete File
<cfelseif NOT ListFindNoCase( "png,jpg,jpeg", cffile.ServerFileExt )>
    Delete File
<cfelse>
    It's ok
</cfif> 
```

`ListFindNoCase`更简洁，更易于阅读和维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:42:32.280

您的代码在语法上是正确的，但逻辑是有缺陷的。该条件将始终为真，因为您正在使用`OR`. 只要其中一个条件为真，条件就会通过。尝试`AND`改用，如下所示：

```
<cfif (CFFILE.FileSize GT (4194304))>
    Delete File
<cfelseif (CFFILE.serverFileExt NEQ "png") AND (CFFILE.serverFileExt NEQ "jpg") AND (CFFILE.serverFileExt NEQ "jpeg")>
    Delete File
<cfelse>
    It's ok
</cfif> 
```

[如果您使用 ColdFusion ListFindNoCase()](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d80.html)函数，请参阅 Busches 的回答，了解一种可以稍微压缩代码的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:48:03.297

我认为您的代码中的问题只是在您的语句中使用了“OR”。如果我正确阅读了您的示例，它将每次都删除该文件。

我相信这会产生你想要的效果。

```
<cfelseif ( ( CFFILE.serverFileExt neq "png" ) 
       AND ( CFFILE.serverFileExt neq "jpg" ) 
       AND ( CFFILE.serverFileExt neq "jpeg" ) ) > 
```

您不是在寻找可能被删除的文件满足任何*一个*条件（这是“OR”所做的）的情况，因为任何文件扩展名将不等于您的 3 个选项中的至少 2 个。

相反，您正在寻找一种情况，其中可能删除的文件满足*所有*条件（这就是“AND”所做的。

# jquery - 在backbone.js中使用模板渲染视图

> ID：15413179
> 
> 赞同：0
> 
> 时间：2013-03-14T15:17:33.227
> 
> 标签：jquery, backbone.js

下面我的 webservice 简单返回数据说返回服务的 url 是：http:/example/api/players。

> > > > [ {“id”：1，“name”：“Lily”，“age”：14，“city”：纽约，}，{“id”：2，“name”：“BIlly”，“age”： 14、“城市”：纽约，}]

谁能提供我一步一步的示例来构建 html 模板以显示具有适当模板、视图、模型、Web 服务返回的上述数据集合的玩家列表。

我查看了 todomvc 和很多教程，但无法弄清楚。

这将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:44:32.073

Backbone.js 文档是一个很好的开始。

还请务必查看[Hello Backbone.js](http://arturadib.com/hello-backbonejs/)教程和这个优秀的 Envato 课程（付费）[Get Connected to the Backbone](http://net.tutsplus.com/tutorials/javascript-ajax/get-connected-to-the-backbone-new-course/)

# xml - 如何从 Razor 视图中显示 xml 元素？

> ID：15413183
> 
> 赞同：3
> 
> 时间：2013-03-14T15:17:39.800
> 
> 标签：xml, asp.net-mvc, razor

如何在 Razor 视图中硬编码和显示 xml 元素。

例如，我想显示以下元素，因为它们在一个元素中：

```
<profile>
    <status>Active</status> 
    <userIdentifier>24d05ce9-7d11-4f06-a9eb-9f33ceac7f91</userIdentifier> 
    <firstName>dd</firstName>
    <lastName>dasd</lastName>
    <title>Ms</title>
    <emailAddress>test@test.co.uk</emailAddress>
    <companyAddress>
        <companyName></companyName>
        <addressLine1></addressLine1>
        <addressLine2></addressLine2>
        <addressLine3>Sutton</addressLine3>
        <addressLine4>Surrey</addressLine4>
        <town>Sutton</town>
        <stateOrCounty>Surrey</stateOrCounty>
        <postOrZipCode>SM1 5AS</postOrZipCode>
        <country>United Kingdom</country>
        <region/>
    </companyAddress>
    <contactAddress>        
        <addressLine1>30 Park Avenue South</addressLine1>
        <addressLine2>New York </addressLine2>
        <addressLine3>NY 11010</addressLine3>
        <addressLine4>USA</addressLine4>
        <town>NY</town>
        <stateOrCounty>NY</stateOrCounty>
        <postOrZipCode>11010</postOrZipCode>
        <country>United States</country>
        <region></region>
    </contactAddress>
    <demographics>
        <demographic key="ESOATDropDownList1">
            <answer>True</answer>
        </demographic>
    </demographics>
</profile> 
```

怎么可能做到？

我知道它可以写在控件中。有没有更好/更简单的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T16:49:43.903

你可以试试这个：

```
@{
   var profileXml = @"
<profile>
    <!-- your xml -->
</profile>";
}
<pre>
    @Html.Raw(Html.Encode(profileXml))
</pre> 
```

这里`profileXml`包含 XML 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T08:50:29.560

如果控制器中有 XML，则可以使用 return xml 内容：

```
public ActionResult XmlContent()
{
    string xml = @"<profile>
                     <!-- your xml -->
                   </profile>";
    return Content(xml, "text/xml");            
} 
```

# javascript - 将表单数据存储为单个 cookie

> ID：15413186
> 
> 赞同：2
> 
> 时间：2013-03-14T15:17:49.510
> 
> 标签：javascript

我在我的网站上设置了一个 cookie，它告诉我人们正在使用什么类型的设备。

值如下

*   小号
*   米
*   吨
*   D

cookie 的值可以是 MS、TS 或 DS。

我想创建一个表单，用户可以在其中手动更新 cookie，当他们提交表单时，它将更新 cookie，但我也希望表单已经选择了当前的 cookie 值。

我尝试了这段代码，但我得到了一个未定义的 cookie 值。

这是表格

```
<form name="devicePrefs">
    <input type="radio" name="deviceType" value="D">Desktop<br>
    <input type="radio" name="deviceType" value="T">Tablet<br>
    <input type="radio" name="deviceType" value="M">Mobile<br>
    <input type="checkbox" name="skipSeat" value="S">Skip Seating Plan<br>
    <input type="button" value="Set to Cookie" onClick="storeValues()">
</form> 
```

这是我使用的 javascript

```
 var today = new Date();
 var expiry = new Date(today.getTime() + 30 * 24 * 3600 * 1000); // plus 30 days 
 function setCookie(name, value) { 
    document.cookie=name + "=" + escape(value) + "; path=/; expires=" + expiry.toGMTString(); 
 }

  function storeValues() { 
    setCookie("ATGDevicePrefs", devicePrefs.deviceType.value, devicePrefs.deviceType.skipSeat); 
  } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:22:09.567

您正在使用两个参数函数并将 3 个参数传递给它

你应该使用

```
 function storeValues() { 
    setCookie("ATGDevicePrefs", devicePrefs.deviceType.value +
              devicePrefs.deviceType.skipSeat); 
  } 
```

# python - 装饰者的工作

> ID：15413188
> 
> 赞同：2
> 
> 时间：2013-03-14T15:17:55.013
> 
> 标签：python, return, decorator

我有一个关于装饰师工作的问题。我想用一个例子来解释我的问题

我为理解装饰器而实现的代码

```
import sys
import inspect
def entryExit(f):
    def new_f(self,*args, **kwargs):
        print "Entering", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:] 
        f(self,*args)        
        print "Exited", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:]        
    return new_f

class A:
    @entryExit
    def move(self,g,h):
        print "hello"        
        print g,h            

    @entryExit    
    def move1(self,m,n):
        print "hello"        
        print m,n
        return m
a=A()
a.move(5,7)
h=a.move1(3,4)
print h 
```

这段代码的输出是

```
Entering move A ['g', 'h']
hello
5 7
Exited move A ['g', 'h']
Entering move1 A ['m', 'n']
hello
3 4
Exited move1 A ['m', 'n']
None 
```

输出的最后一行显示`None`。但是通过使用装饰器改变了方法的实际含义。方法中的 return 语句`move1`未执行。我需要的实际输出是

```
Entering move A ['g', 'h']
hello
5 7
Exited move A ['g', 'h']
Entering move1 A ['m', 'n']
hello
3 4
Exited move1 A ['m', 'n']
3 
```

那么我在创建装饰器时是否犯了任何错误，或者装饰器总是忽略函数中的 return 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:19:21.270

要让函数返回一个值，您必须将装饰器的定义更改为：

```
def new_f(self,*args, **kwargs):
    print "Entering", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:] 
    ret = f(self,*args)        
    print "Exited", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:]    
    return ret    
return new_f 
```

并不是装饰器“总是忽略” return 语句，而是你必须自己处理 return ——就像你必须使用`*args`和`**kwargs`处理参数一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:19:52.387

问题是装饰器丢弃了装饰函数的返回值。

以下：

```
def new_f(self,*args, **kwargs):
    print "Entering", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:] 
    f(self,*args)        
    print "Exited", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:] 
```

应该读：

```
def new_f(self,*args, **kwargs):
    print "Entering", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:] 
    ret = f(self,*args)        
    print "Exited", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:]        
    return ret 
```

您当前的代码忽略了的返回值`f(self,*args)`并隐式返回`None`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:20:31.730

Try this:

```
def new_f(self,*args, **kwargs):
        print "Entering", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:] 
        r = f(self,*args)        
        print "Exited", f.__name__,self.__class__.__name__,inspect.getargspec(f).args[1:]  
        return r      
return new_f 
```

The return happens when you actually call the function inside the decorator. So, you need to return it from the decorated function too.

# emacs - Emacs 自动完成不显示结果

> ID：15413189
> 
> 赞同：5
> 
> 时间：2013-03-14T15:17:59.127
> 
> 标签：emacs, autocomplete

我在 Linux 中使用 Emacs (24.3) 的新稳定版本运行最新版本的`auto-complete`in 。`elpa`我的 Emacs 初始化文件有以下设置。

```
(add-to-list 'package-archives '("melpa" . "http://melpa.milkbox.net/packages/") t)
(require 'auto-complete-config)
(setq-default ac-sources
          '(
        ac-source-filename
        ac-source-abbrev 
        ac-source-dictionary
        ac-source-words-in-same-mode-buffers))
(ac-config-default) 
```

如果我开始输入：`/home/james/.em` **在缓冲区**（例如 Python 缓冲区）中，我希望自动完成建议：

```
.emacs
.emacs.d 
```

但它没有显示任何东西。其他文件也会发生同样的事情。

有时我**确实**看到了建议和/或弹出菜单，但其他时候却没有。

有什么想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:43:30.420

`ac-config-default`设置不包括 ac-source-filename 的源列表。`setq-default ac-sources`在将它们重置为默认值后调用此函数。[自动完成手册建议](http://cx4a.org/software/auto-complete/manual.html#Using_Source)设置模式挂钩以设置特定模式所需的源。手册中的示例是

```
(defun my-ac-emacs-lisp-mode ()
  (setq ac-sources '(ac-source-symbols ac-source-words-in-same-mode-buffers)))

(add-hook 'emacs-lisp-mode-hook 'my-ac-emacs-lisp-mode) 
```

将其适应 python 模式应该很容易。或者，您可以通过首先调用它来全局覆盖设置`ac-config-default`，即

```
(require 'auto-complete-config)
(ac-config-default)
(setq-default ac-sources
          '(
        ac-source-filename
        ac-source-abbrev 
        ac-source-dictionary
        ac-source-words-in-same-mode-buffers)) 
```

这种方式`setq-default ac-sources`将覆盖设置的来源，`ac-config-default`而不是相反。

# java - 使用java解析多个json数组

> ID：15413191
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:18:01.010
> 
> 标签：java, json

如何从给定的json数组访问coldata？还有 fromdate 和 todate 和 arrayName

> ```
> { 
> ```
> 
> “fromdate”：1361912208000，“todate”：1361998608000，“datavalues”：[{“arrayName”：“第一个数组”，“datavalue”：{“rowvalues”：[{“coldata”：[“1”，“5342” , "75" ] }, { "coldata":[ "23", "4465", "75" ] } ], "colnames":[ { "id":"id1", "type":"字符串”，“标签”：“id”}，{“id”：“id2”，“类型”：“数字”，“标签”：“数字”}，{“id”：“id3”，“类型” :"Number", "label":"number" } ] } }, { "arrayName":"第二个数组", "dataTable":{ "rowvalues":[ { "coldata":[ "1", "5342" , "75"] }, { "coldata":[ "23", "4465", "75" ] } ], "colnames":[ { "id":"id1", "type":"String", "label": "id" }, { "id":"id2", "type":"Number", "label":"number" }, { "id":"id3", "type":"Number",“标签”：“数字” } ] } } ] }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:19:49.860

解析 JSON 时，需要有一个 Good [JSON Viewer](http://jsonviewer.codeplex.com/)和一个[JSON Library](https://github.com/douglascrockford/JSON-java)。这可以帮助您查看阵列的树结构。

这是我看到的，![在此处输入图像描述](../Images/f1a15001504a30ea8542d7bfc35b51be.png)

所以我编写了一些代码来解析 datavalues 数组中的第一个对象。

```
package com.stackoverflow.answers;

import org.json.JSONArray;
import org.json.JSONObject;

public class JSONReader {

static String JSON_STRING = "{\"fromdate\":1361912208000, \"todate\":1361998608000, \"datavalues\":[ { \"arrayName\":\"1st Array\", \"datavalue\":{ \"rowvalues\":[ { \"coldata\":[ \"1\", \"5342\", \"75\" ] }, { \"coldata\":[ \"23\", \"4465\", \"75\" ] } ], \"colnames\":[ { \"id\":\"id1\", \"type\":\"String\", \"label\":\"id\" }, { \"id\":\"id2\", \"type\":\"Number\", \"label\":\"number\" }, { \"id\":\"id3\", \"type\":\"Number\", \"label\":\"number\" } ] } }, { \"arrayName\":\"2nd Array\", \"dataTable\":{ \"rowvalues\":[ { \"coldata\":[ \"1\", \"5342\", \"75\" ] }, { \"coldata\":[ \"23\", \"4465\", \"75\" ] } ], \"colnames\":[ { \"id\":\"id1\", \"type\":\"String\", \"label\":\"id\" }, { \"id\":\"id2\", \"type\":\"Number\", \"label\":\"number\" }, { \"id\":\"id3\", \"type\":\"Number\", \"label\":\"number\" } ] } } ] }";

public static void main(String[] args) {

    // Create root JSON Object
    JSONObject object = new JSONObject(JSON_STRING);
    System.out.println(object.get("fromdate"));
    System.out.println(object.get("todate"));
    System.out.println("--------------------------------");

    // Get Data Values
    JSONArray dataValues = object.getJSONArray("datavalues");

    System.out.println("------------- Data Values ---------------");

    JSONObject datavalue = dataValues.getJSONObject(0);
    System.out.println("Arrray Name : " + datavalue.getString("arrayName"));

    JSONObject dval = datavalue.getJSONObject("datavalue");

    System.out.println("------------- Row Values ---------------");
    JSONArray rowvalues = dval.getJSONArray("rowvalues");

    for (int y = 0; y < rowvalues.length(); y++) {
        JSONObject columns = rowvalues.getJSONObject(y);

        System.out.println("------------- Col data --------------");
        JSONArray coldata = columns.getJSONArray("coldata");

        for (int z = 0; z < coldata.length(); z++) {
            System.out.println(coldata.get(z));
        }
    }

    JSONArray colnames = dval.getJSONArray("colnames");

    for (int y = 0; y < colnames.length(); y++) {
        JSONObject columns = colnames.getJSONObject(y);

        System.out.println("------------- Col Names --------------");

        System.out.println(columns.get("id"));
        System.out.println(columns.get("type"));
        System.out.println(columns.get("label"));
    }

} 
```

}

和输出

```
1361912208000
1361998608000
------------- Data Values ---------------
Arrray Name : 1st Array
------------- Row Values ---------------
------------- Col data --------------
1
5342
75
------------- Col data --------------
23
4465
75
------------- Col Names --------------
id1
String
id
------------- Col Names --------------
id2
Number
number
------------- Col Names --------------
id3
Number
number 
```

我相信你可以从那里找出其余的

# css - 用另一个 div 填充一个 div

> ID：15413197
> 
> 赞同：3
> 
> 时间：2013-03-14T15:18:09.990
> 
> 标签：css, html

我正在制作一个网站，它由一堆面板组成。这些面板都有重复的纹理，但为了让网站看起来更好，我决定使用彩色 div 和不透明度为图像着色。我宁愿不使用更多图片，所以请不要建议我只是重新着色图像。

我的问题是，当我将文本放入 tint div 时，字体继承了不透明度，并以灰色而不是白色结束，但是当我将它放在 tint div 之外时，我失去了色调。

```
.tint {
  display: block;
  position: static;
  height: 100%;
  width: 100%;
  line-height: 100%;
  opacity: 0.4;
  z-index: -1;
  filter: alpha(opacity=40);
  /* For IE8 and earlier */
}
.ExpDiv {
  -moz-border-radius: 7px;
  -webkit-border-radius: 7px;
  -khtml-border-radius: 7px;
  -webkit-box-shadow: 0 0 60px rgba(0, 0, 0, 0.6);
  -moz-box-shadow: 0 0 60px rgba(0, 0, 0, 0.6);
  box-shadow: 0 0 60px rgba(0, 0, 0, 0.6);
  border: solid 3px;
  -webkit-transition: all .5s ease-in-out 0.2s;
  -moz-transition: all .5s ease-in-out 0.2s;
  -ms-transition: all .5s ease-in-out 0.2s;
  -o-transition: all .5s ease-in-out 0.2s;
  transition: all .5s ease-in-out 0.2s;
  background-color: #99ccff;
  min-width: 7px;
  min-height: 9px;
  max-width: 150px;
  max-height: 200px;
  overflow: hidden;
  background-image: url(striped_linenen.png);
  background-repeat: repeat;
  float: left;
}
```

```
<div class="ExpDiv" style="float:left;">
  <div class="tint" style="background: #99CCFF; ">
    Content For these Divs will be inserted by the Owner...
  </div>
</div>
<div class="divider">
  <br />
</div>
<div class="ExpDiv" style="float:left;">
  <div class="tint" style="background: #996699; "></div>
  Content For these Divs will be inserted by the Owner...
</div>
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:34:19.907

由于不透明度会影响整个块，您可以使用两个不同的`div`。一个用于色调，另一个用于内容。将它们都放在`absolute`位置：

**HTML**

```
<div class="ExpDiv" style="float:left;">
    <div class="tint" style="background: #ff0000; "></div>
    <div class="content">Content For these Divs will be inserted by the Owner...</div>
</div> 
```

**CSS**

```
.tint {
    position:absolute;
    height:100%;
    width:100%;
    opacity:0.4;
    z-index:1;
    filter:alpha(opacity=40);
}
.content {
    position:absolute;
    height:100%;
    width:100%;
    z-index: 99;
}
.ExpDiv {    
    position: relative;
    width: 150px;
    height: 200px;
} 
```

[=> 简化和更新的 jsFiddle](http://jsfiddle.net/samsamX/uDWYS/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T15:26:46.370

不透明度会影响整个元素。您可以使用 rgba 作为背景：

```
background: rgba(153, 204, 255, 0.4); /* #99CCFF */
background: rgba(153, 103, 153, 0.4); /* #996699 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:38:07.120

我一直在处理这类问题足够长的时间，主要是因为有时我喜欢使用半不透明的 div 背景，但不希望文本部分透明，我认为我们遇到的问题是相似的。

根据经验，我会告诉您只需生成一些具有所需透明度的 10x10 像素 png，并将它们用作这些 div 的背景。会解决你很多头疼的问题。您可能遇到的唯一问题是我认为 IE6 及以下版本不支持 png，但是有一个 js 库可以解决这个问题。

大多数攻击位置和东西的方法可能最终无法跨浏览器工作，并使代码的修改变得非常讨厌。

# php - HTML表单文件上传

> ID：15413200
> 
> 赞同：5
> 
> 时间：2013-03-14T15:18:18.777
> 
> 标签：php, html

我在尝试保存从表单上传的文件时遇到困难，我检查了 w3schools 网站上的教程，但我不断收到未定义的索引错误：

注意：未定义索引：C:\wamp\www\HW4\confirm.php 中的用户图片

```
<form action="confirm.php" method="post">
<div>
<fieldset>
<legend>New User Signup: </legend>
<label> <strong>Name:</strong> <input type="text" name="name" size="16" /></label><br/>
<label> <strong>Gender:</strong> <input type="radio" name="gender" value="M"/> Male
<input type="radio" name="gender" value="F" /> Female
</label><br/>
<label> <strong>Age:</strong> <input type="text" name="age" size="6" maxlength="2" />                         </label>    <br/>
<label> <strong>Personality type:</strong> <input type="text" name="personality"     size="6" maxlength="4" />(<a href="http://www.humanmetrics.com/cgi-win/JType2.asp">Don't     know your type?</a>)</label>
<br/>
    <label> <strong>Favorite OS:</strong> <select name="favos">
    <option selected="selected">Windows</option>
    <option>Mac OS X</option>
    <option>Linux</option></select>
</label><br/>
<label> <strong>Seeking age:</strong> 
<input type="text" name="minage" size="6" maxlength="2" placeholder="min" /> to 
<input type="text" name="maxage" size="6" maxlength="2" placeholder="max"/>
</label><br/>
<label><strong>Photo:</strong><input type="file" name="userpic" id="userpic" /></label>
<input type="submit" value="Sign Up" />
</fieldset>
</div>
</form> 
```

以及我用来尝试将其保存到名为“images”的文件夹中的代码：

```
move_uploaded_file($_FILES["userpic"]["tmp_name"],"images/".$_FILES["userpic"]["name"]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:20:37.360

`enctype="multipart/form-data"`在你的表格中使用。

```
<form action="confirm.php" enctype="multipart/form-data" method="post"> 
```

# java - Java/ 在列表中搜索一些变量

> ID：15413207
> 
> 赞同：1
> 
> 时间：2013-03-14T15:18:24.233
> 
> 标签：java, list

我有一个与对象人员的链接列表。

```
Class person{
   int age;
   String name;
   String address
} 
```

现在，我想检查对象是否包含在列表中。但我的问题是，只有一些领域是相关的。例如，我想检查人员：tony, age 18 是否包含在列表中。

列表支持吗？如果不是，哪种数据结构支持它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:22:24.087

好吧，你可以使用一个简单的循环。

```
for (int i=0; i<list.size(); i++) {
    Person p = list.get(i);
    if (p.name.equals("Tony") && p.age == 18) {
        //p is the person you were looking for
        //do whatever you wanted to do with p
        //if you don't want to include duplicate "Tonies" then add a break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:22:25.883

好吧，您可以将您的人员放入 a`List<Person>`并对其进行迭代：

```
for(Person p : personList){
    if ("tony".equals(p.name) && p.age == 18){
        //match - do some stuff
        ;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:22:53.357

列表有`contains(obj)`它比较的方法`(o==null ? e==null : o.equals(e))`

因此，如果您`equals`在 Person 类中覆盖方法，并且您可以这样做`list.contains(obj)`，它会直接返回 true/false。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T15:24:24.483

你可以像这样检查

```
ArrayList<Person> persons=new ArrayList<Person>(); 
```

检查人员

这样做

```
for(Person p : persons)
{
 if (p.name.equals("Tony") && p.age == 18)
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T15:27:08.690

此类可以映射到数据库中的表，并且您要执行 select * from person where age > 18。

有两种情况： on is without index：数据库将读取所有值，并将与年龄字段值进行比较，列表也是如此：解析列表元素，你会发现，但这是最慢的方法。

另一种是对搜索的优化：将数据库索引添加到相关字段。在列表中，您可以收集其他数据以加快搜索速度。

例如： LinkedHashSet>`indexedByAge`只需询问谁是 18 岁或 18 岁之前，您将得到一系列需要使用 addAll() 方法合并到一个的 ArrayList。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T15:30:05.940

有点乱，但您可以按如下方式**覆盖该`equals`方法：**

```
class Person
{
   int age;
   String name;
   String address;

   Person(int a, String n, String ad) { age = a; name = n; address = ad; };
   @Override
   public boolean equals(Object o)
   {
      Person p = (Person)o;
      if (p.age != -1 && age != -1 && p.age != age)
         return false;
      if (p.name != null && name != null && !p.name.equals(name))
         return false;
      if (p.address != null && address != null && !p.address.equals(address))
         return false;
      return true;
   }
} 
```

我假设`-1`并且`null`是未初始化的值。

**用法：**

```
ArrayList<Person> arr = new ArrayList<Person>();
arr.add(new Person(18,"tony","here"));
System.out.println(arr.contains(new Person(18,"tony",null))); // prints true 
```

# magento - Magento 自定义网址

> ID：15413210
> 
> 赞同：0
> 
> 时间：2013-03-14T15:18:35.740
> 
> 标签：magento, e-commerce, magento-1.7

我创建了一个新模块来替换客户/帐户菜单并有一个链接 www.mysite.com/account

我现在想将登录、注册和其他页面更改为 www.mysite.com/account/login 等

而不是恢复到客户/帐户/登录等

最好的方法是什么？

这是迄今为止我制作的 config.xml 代码....

```
<?xml version="1.0"?>
<config>
  <modules>
    <SquareNetMedia_MyAccount>
      <version>0.1.0</version>
    </SquareNetMedia_MyAccount>
  </modules>
  <frontend>
    <routers>
      <myaccount>
        <use>standard</use>
          <args>
            <module>SquareNetMedia_MyAccount</module>
            <frontName>account</frontName>
          </args>
      </myaccount>
    </routers>
        <layout>
          <updates>
            <myaccount>
              <file>myaccount.xml</file>
            </myaccount>
          </updates>
        </layout>
  </frontend>
  <global>

    <helpers>
      <myaccount>
        <class>SquareNetMedia_MyAccount_Helper</class>
      </myaccount>
    </helpers>
    <blocks>
      <myaccount>
        <class>SquareNetMedia_MyAccount_Block</class>
      </myaccount>
    </blocks>
  </global>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:16:12.400

将您的文件更改为如下所示：

```
 <frontend>
 <routers>
 <myaccount>
    <use>standard</use>
      <args>
        <module>SquareNetMedia_MyAccount</module>
        <frontName>account</frontName>
      </args>
  </myaccount>
  <customer>
    <args>
      <modules>
        <SquareNetMedia_MyAccount before="Mage_Customer_AccountController">SquareNetMedia_MyAccountr</SquareNetMedia_MyAccount>
      </modules>
    </args>
  </customer> 
```

然后在模块的控制器文件夹中创建一个名为 AccountController.php 的新控制器文件

```
<?php
require_once Mage::getModuleDir('controllers','Mage_Customer').DS.'AccountController.php';
class SquareNetMedia_MyAccount_AccountController extends Mage_Customer_AccountController{
} 
```

现在您可以覆盖这些功能

```
 public function loginAction(){
 #Here you can do what you need I think
 } 
```

我希望这是对的，如果不清楚，请告诉我。和平。

# java - 函数重复调用

> ID：15413214
> 
> 赞同：-4
> 
> 时间：2013-03-14T15:18:39.497
> 
> 标签：java, multithreading

我遇到了一个奇怪的问题，我的 run() 方法运行了两次函数。可能的原因是什么？run() 是从另一个线程调用的。

```
run()
{
    while(...)
    {
        ...
    }
    function();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:25:37.267

在这些情况下，如果您打印出堆栈跟踪以找出谁是调用者，或者您是否可以使用调试器，只需设置一个断点并检查调用树，这会有所帮助。

打印堆栈跟踪的最简单方法是：

```
for (StackTraceElement ste : Thread.currentThread().getStackTrace()) {
    System.out.println(ste);
} 
```

# python - 拟合3D点python

> ID：15413217
> 
> 赞同：7
> 
> 时间：2013-03-14T15:18:45.547
> 
> 标签：python, scipy

我有 python 代码，它产生一个由数字 x、y 和 z 组成的三元组列表。我想使用 scipy curve_fit 拟合 z= f(x,y)。这是一些非工作代码

```
A = [(19,20,24), (10,40,28), (10,50,31)]

def func(x,y,a, b):
    return x*y*a + b 
```

如何让 python 使这个函数适合列表中的数据`A`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T15:29:20.963

*   第一个参数`func`必须是数据（x 和 y）。
*   其余的参数来`func`表示参数。

所以你需要修改你`func`的一点：

```
def func(data, a, b):
    return data[:,0]*data[:,1]*a + b 
```

* * *

*   第一个参数`curve_fit`是函数。
*   第二个参数是独立的`data`（`x`并且`y`以一个数组的形式）。
*   第三个参数是相关数据（`z`）。
*   第四个参数是对参数值的猜测（`a` 在`b`这种情况下。）

因此，例如：

```
params, pcov = optimize.curve_fit(func, A[:,:2], A[:,2], guess) 
```

* * *

```
import scipy.optimize as optimize
import numpy as np

A = np.array([(19,20,24), (10,40,28), (10,50,31)])

def func(data, a, b):
    return data[:,0]*data[:,1]*a + b

guess = (1,1)
params, pcov = optimize.curve_fit(func, A[:,:2], A[:,2], guess)
print(params)
# [ 0.04919355  6.67741935] 
```

# css - 导航栏项目中的少量空间 - 布局问题

> ID：15413219
> 
> 赞同：0
> 
> 时间：2013-03-14T15:18:51.057
> 
> 标签：css

我喜欢在检查我的导航项（例如`<a class="nav_anchor">`在 firebug 中）以及当我将鼠标悬停在它们上方时，每个导航项的右侧估计有 5 个像素的间距。

我在找出导致导航中发生这种情况的原因方面收效甚微，任何建议都将不胜感激。

这是链接：[http ://www.the-session.co.uk/pros/](http://www.the-session.co.uk/pros/)

也许这张图片可以帮助说明问题：

![在此处输入图像描述](../Images/69cd06258c70d29cf96bc014c707dae4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:20:59.927

内联和内联块元素会受到 HTML 中任何空白的影响。这导致每个列表项之间的差距很小。您可以将空格注释掉，也可以手动删除它。你也可以`float: left;`每一个`<li>`或给一个负的左边距几个 px

[更多信息](https://stackoverflow.com/questions/241512/best-way-to-manage-whitespace-between-inline-list-items)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:30:05.710

**这是修复后的 CSS**

```
#main_menu {
    padding: 7px 10px 7px 20px;
    background-color: #6bb8c7;
    background-image: -moz-linear-gradient(top, #6bb8c7, #6cadde);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#6bb8c7), to(#6cadde));
    background-image: -webkit-linear-gradient(top, #6bb8c7, #6cadde);
    background-image: -o-linear-gradient(top, #6bb8c7, #6cadde);
    background-image: linear-gradient(to bottom, #6bb8c7, #6cadde);
    height: 50px;
}
.menu_item, .menu_item_first {
    display:inline;
    border-right: 1px solid #000000;
    margin: 0;
    float: left;
}
a.nav_anchor {
    padding: 7px 17px;
    text-decoration: none;
    color:black;
    float: left;
} 
```

**只需将高度添加到菜单 div 容器和 float:left 到 li 和锚点。**

# java - TreeSet 操作的复杂性

> ID：15413222
> 
> 赞同：1
> 
> 时间：2013-03-14T15:18:55.530
> 
> 标签：java, tree, binary-tree, binary-search-tree, treeset

*   java.util.TreeSet 中 Higher() 的复杂度是多少？
*   按升序访问所有元素的（摊销）复杂性是多少？

在[描述](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)中，它只说“此实现为基本操作（添加、删除和包含）提供有保证的 log(n) 时间成本”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:28:19.763

我相信higher() 也是log(n)。要找到较高的元素，请找到将输入插入到 Higher() 的位置，然后“向上”移动一个，从而产生 log(n) 时间。

如果您遍历元素，您正在查看 n 时间。如果您使用 contains 访问每个购买的元素，那么您正在查看 n log(n) 时间。

# jsf - JSF 部署异常：EntityManager 类型的依赖关系不满足

> ID：15413227
> 
> 赞同：6
> 
> 时间：2013-03-14T15:19:14.893
> 
> 标签：jsf, jakarta-ee, maven, jboss, inject

我只是按照ticket-monster 教程（[http://www.jboss.org/jdf/examples/ticket-monster/tutorial/Introduction/](http://www.jboss.org/jdf/examples/ticket-monster/tutorial/Introduction/)）并在我的解决方案中添加了一个rest-service 类。

```
package projectFoo.rest;
import java.util.List;
import javax.enterprise.context.RequestScoped;
import javax.inject.Inject;
import javax.persistence.EntityManager;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import projectFoo.model.party;

@Path("/partys")
@RequestScoped
public class partyService {

@Inject
private EntityManager em;

@GET
@Produces(MediaType.APPLICATION_JSON)
 public List<party> getAllEvents() {
    @SuppressWarnings("unchecked")
    final List<party> results =
            em.createQuery(
            "select e from party e order by e.name").getResultList();
    return results;
}
} 
```

@Inject 带有下划线，返回：**“没有 bean 有资格注入到注入点 [JSR-299 §5.2.1]”**

当我尝试部署包时，该过程将失败并返回以下消息：

```
Unsatisfied dependencies for type [EntityManager] with qualifiers [@Default] at injection point. 
```

我是否必须为实体管理器添加一个 bean？这个应该怎么看？本教程没有提到这一点。实际上我在最终的ticket-monster 项目中找不到任何bean 的定义。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T15:39:25.653

可以在未启用 CDI的`EntityManager`工件中找到（JPA 提供程序 jar 没有`beans.xml`包含）。

您可以在 的 中使用“good old”`@PersistenceContext`注释`@Inject`，或者如果您想使用`@Inject`，则需要为 EntityManager 提供一个生产者，如下所示：

```
class Resources {
   @SuppressWarnings("unused")
   @Produces
   @PersistenceContext
   private EntityManager em;
... 
```

# erlang - common_test 框架中 userdata 标签的用途

> ID：15413228
> 
> 赞同：2
> 
> 时间：2013-03-14T15:19:17.680
> 
> 标签：erlang

最近我尝试使用erlang的`common_test`框架并面临这样的问题。

我的目标是从文件中加载一些数据`init_per_suite`并将其推送到所有测试用例中。但是当我直接将这些数据保存在 中时`Config`，它会在测试结果中发送垃圾邮件错误消息。我在[文档](http://www.erlang.org/doc/apps/common_test/write_test_chapter.html#info_function)中发现这样的事情：

> 用户数据
> 
> 使用它来指定与测试用例相关的任意数据。可以使用 ct:userdata/3 实用程序函数随时检索此数据。

```
reboot_node() ->
    [
     {userdata,
         [{description,"System Upgrade: RpuAddition Normal RebootNode"},
          {fts,"http://someserver.ericsson.se/test_doc4711.pdf"}]}                  
    ]. 
```

似乎这正是我所需要的，但是当我检查`ct:userdata/2`并且`ct:userdata/3`它看起来对我来说是有线的时，它需要测试目录路径和套件名称。我应该如何调用它来取回我的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T12:09:40.477

您可以简单地将数据附加到`Config`

```
init_per_suite(Config) ->
    ...
    [{your_data}|Config]. 
```

# c# - 在 Visual Studio 2012 中，当您添加 ADO.NET 实体数据模型 (*.edmx) 时？

> ID：15413233
> 
> 赞同：0
> 
> 时间：2013-03-14T15:19:24.563
> 
> 标签：c#, asp.net-mvc, entity-framework, dbcontext

在 Visual Studio 2012 中，当您添加 ADO.NET 实体数据模型 (*.edmx) 时，它包含上下文和模型类的 T4 模板作为 EDMX 文件的子项。例如，如果添加 MyModel.edmx，它将有 4 个子项，如下所示：

1.  MyModel.Context.tt
2.  MyModel.Designer.cs（在 C# 项目中）
3.  MyModel.edmx.diagram
4.  MyModel.tt（模型类）

问题：当我更改数据库时，我可以自动更新 MyModel.Context。如果我更改 MyModel.tt 中的任何模型类（添加/删除/更新任何模型或其属性），数据库是否会自动更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:28:31.667

不，不是的。edmx 文件可用于生成新的数据库模式，只需右键单击 demx 设计器 -> 选择从模型生成数据库。

要更新现有模型，请参见：

[Entity Framework 4 - 从模型更新数据库模式。不擦表数据](https://stackoverflow.com/questions/3144117/entity-framework-4-update-database-schema-from-model-without-wiping-the-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:31:00.683

仅当您使用 Code First 方法时，数据库才会自动更改，而您不是，因为您使用的是 EDMX。使用 EDMX 后，您将使用模型优先或数据库优先。

如果您希望数据库自动更改，则必须切换到 Code First。

# c++ - 跳转到 lldb 中的行号

> ID：15413236
> 
> 赞同：2
> 
> 时间：2013-03-14T15:19:31.327
> 
> 标签：c++, objective-c, xcode, macos, lldb

如何跳转到 lldb 中的特定源代码行？在 gdb 中，它将是“跳转 X”，其中 X 是行号，但我能找到的 lldb 的唯一参考是[http://lldb.llvm.org/lldb-gdb.html](http://lldb.llvm.org/lldb-gdb.html)，它说：

> 在当前程序计数器（指令指针）之前跳过 8 个字节。请注意，我们使用反引号来评估表达式并将标量结果插入 LLDB。
> 
> ```
> (gdb) jump *$pc+8
> (lldb) register write pc `$pc+8` 
> ```

FWIW，在 MacOS 上，用“rip”替换“pc”似乎可行。

但是使用这种方法跳转到特定的行似乎相当困难。有没有更好的方法来跳转lldb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:38:01.107

几天前，在 lldb 存储库中添加了一个如何在 Python 中执行此操作的示例。见[http://llvm.org/svn/llvm-project/lldb/trunk/examples/python/jump.py](http://llvm.org/svn/llvm-project/lldb/trunk/examples/python/jump.py)

将该文件的内容保存到您的主目录，可能类似于`~/lldb/jump.py`并使用以下命令将其加载到您的 lldb 中

```
command script import ~/lldb/jump.py 
```

（或将其放入您的`~/.lldbinit`文件中），您将获得一个`jump`命令。

请注意，使用 Objective-C 程序中的 ARC（自动引用计数），您可以通过四处跳转来超级容易地搞砸程序 - 很多看起来无害的跳转实际上并非如此。这绝对属于调试器技巧的“用户小心”/“祝你好运”类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T20:16:31.413

作为更新，我在这里留下了 LLDB 教程中的一个新特性：http: [//lldb.llvm.org/tutorial.html](http://lldb.llvm.org/tutorial.html)

> 最后，lldb 有一个运行直到行或帧退出步进模式： (lldb) thread until 100 此命令将在当前帧中运行线程，直到它到达该帧中的第 100 行，或者如果它离开当前帧则停止。这与 gdb 的“直到”命令非常接近。

因此，`(lldb) thread until <lineno>`对当前线程有效。

此外，还`(lldb) help thread until`包含其他选项。

# winrt-xaml - 如何使图像覆盖整个网格？

> ID：15413237
> 
> 赞同：0
> 
> 时间：2013-03-14T15:19:35.673
> 
> 标签：winrt-xaml

我有我正在处理的项目，需要将图像设置为网格上的背景。我可以设置图像，但它没有覆盖网格的整个宽度和高度。

下面是我的 XAML。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Grid.Background>
        <ImageBrush ImageSource="Images/pt.png" Stretch="UniformToFill"/>
    </Grid.Background>
</Grid> 
```

我怎样才能使它覆盖网格的整个宽度和高度？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:43:16.427

我似乎找到了问题所在。在平面设计师为我设计了图像后，我从不费心检查尺寸。事实证明，图像的宽度和高度比预期的要大得多。

在将图像尺寸更改为更合适的尺寸后，例如 2560 x 1440，一切似乎都非常合适。

我并不是说这对于遇到与我在这里遇到的相同问题的其他人来说总是一个解决方案，但值得一试。

快乐的编码...

# java - 如何在 Google App 引擎上运行 Webharvest？

> ID：15413239
> 
> 赞同：1
> 
> 时间：2013-03-14T15:19:39.173
> 
> 标签：java, google-app-engine, web-scraping, webharvest

我开发了一个带有网络收获的**刮刀（** [http://web-harvest.sourceforge.net/](http://web-harvest.sourceforge.net/)）。但是，我想让程序在服务器上运行。可以在谷歌应用引擎上运行这个系统吗？谢谢你的回复！

# css - 定位图像，使其始终以相同的方式定位，无论窗口宽度如何

> ID：15413242
> 
> 赞同：0
> 
> 时间：2013-03-14T15:19:42.823
> 
> 标签：css, position, css-position

我正在尝试在我的网站上放置一张图片，使其看起来像是剪纸到网站内容上，在正文块的外裙中，如下所示：

![在此处输入图像描述](../Images/6ea78dda6a2f3fc5fc1bd00619dd70d5.png)

我设法使用 position: absolute; 来获得这个定位。css 属性，然后使用顶部/右侧值定位图像。问题是，这仅适用于我的家庭全屏（当然还有其他具有相同分辨率的），并且一旦我缩小窗口，它看起来像这样：

![在此处输入图像描述](../Images/0613421bdae2049b49a853b4252d0dc0.png)

图像向内移动，因为我的 css 告诉它。有没有人知道我应该使用什么 CSS 属性来将图像定位在同一个位置，无论窗口有多宽？

**编辑：**这是我使用 George 和 Ed 的输入解决的 CSS：

```
#picture-container {
            position: relative;
            max-width: 1px;
            max-height: 1px;
        }

        #image {
            position: absolute;
            right: -932px;
            top: -30px;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:23:31.000

你应该添加

```
position: relative; 
```

到内容容器，然后将图像绝对定位在其中。然后绝对定位将基于该 div，而不是页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:35:07.183

解决方法是添加`position: relative`到您的容器（创建新的定位上下文），然后相对于该容器定位图像。目前，您正在定位`img`相对于`body`.

看看[这个小提琴](http://jsfiddle.net/cherryflavourpez/J5srJ/)，它显示了声明所产生的差异，下面的截图。

![在此处输入图像描述](../Images/1988256593ffd59bae7cf5e53696724d.png)

我真的建议您花 5 分钟时间阅读[这篇](http://learnlayout.com/)文章，以确保您能够使用 CSS 来布局和定位事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:30:08.303

要将图像定位在主 div 之外，请在右侧使用负值：

```
 .image{
    position: absolute;
    top: 200px;
    right:-50px;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:53:38.833

就像上面的人提到的那样，它与相对位置有关。但是，为了使其保持静止，您必须制作一个浮动的 div，并且它不是正常内容布局的一部分。

这是一个示例代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>CSS Example</title>
    <style>
        body, html {padding: 0; margin: 0;}
        #wrapper {width: 960px;margin: 0 auto;}
        .floater {height: 100%; width: 100%;position: absolute;}
        .inner-float {position: relative; width: 1020px; margin: 0 auto;text-align: center;}
        .inner-float img {width: 150px; top: -10px; right: 0px;position: absolute;}
        .content {}
    </style>
</head>
<body>
    <div class="floater">
        <div class="inner-float">
            <img src="./clipboard_icon.png" />
        </div>
    </div>
    <div id="wrapper">
        <div class="content">
            <p>
                Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
            </p>
            <p>
                Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
            </p>
            <p>
                Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
            </p>
        </div>
    </div>

</body>
</html> 
```

希望这可以帮助。

-e

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-31T09:30:09.800

**如果您可以使用百分比，那么这是一种使对象真正保持原状的方法。不要省略正文 CSS**

```
<body style="padding:0; margin:0">

<div>

<div style="background-color:red; width:100%; height:300px; position:relative;">

<div style="background-color:green; width:100px; height:100px; position:absolute; margin: 10%;"></div>

</div></div>

</body> 
```

# javascript - 如何使用 javascript 的客户端对象模型检索共享点列表中的超链接数据类型列值

> ID：15413247
> 
> 赞同：0
> 
> 时间：2013-03-14T15:19:58.220
> 
> 标签：javascript, sharepoint-2010

我的共享点自定义列表中有许多字段，其中之一是超链接数据类型。我将其命名为 URL....在使用客户端对象模型时，我无法获取其数据类型超链接的数据。我在用，

```
get_title('URL') 
```

函数。但它返回对象类型。但我需要确切的 url 值如何获取它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:36:00.863

我认为您需要在字段名称后添加**.get_url()**

例如：

myListItem.get_fieldValues()["WebPage"].get_url()

# dart - 如何展平列表？

> ID：15413248
> 
> 赞同：78
> 
> 时间：2013-03-14T15:19:58.493
> 
> 标签：dart

我怎样才能轻松地将`List`Dart 中的 a 变平？

例如：

```
var a = [[1, 2, 3], ['a', 'b', 'c'], [true, false, true]];
var b = [1, 2, 3, 'a', 'b', 'c', true, false, true]; 
```

我如何`a`变成，即包含所有这些值`b`的单个？`List`

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-03-14T15:30:49.027

我知道的最简单的方法是使用`Iterable.expand()`标识函数。`expand()`获取 Iterable 的每个元素，对其执行一个函数，返回一个 iterable（“扩展”部分），然后连接结果。在其他语言中，它可能被称为 flatMap。

因此，通过使用标识函数，expand 只会连接项目。如果你真的想要一个列表，那么使用`toList()`.

```
var a = [[1, 2, 3], ['a', 'b', 'c'], [true, false, true]];
var flat = a.expand((i) => i).toList(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T15:23:39.763

我认为没有内置方法，但您始终可以将其减少为单个值：

```
var a = [[1, 2, 3], ['a', 'b', 'c'], [true, false, true]];

var flatten = a.reduce([], (p, e) {
  p.addAll(e);
  return p;
});

print(flatten); 
```

我希望`addAll()`返回原始列表。目前它什么也不返回。如果这是真的，你可以写一个衬里：`a.reduce([], (p, e) => p.addAll(e))`.

或者，您可以遍历列表并添加：

```
var flatten = [];
a.forEach((e) => flatten.addAll(e)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-12-25T07:04:11.773

使用 Dart 2.3 或更高版本，您可以改为使用 collection-`for`和 spread 运算符来轻松展平列表。我个人觉得它比使用更具可读性`Iterable.expand`：

```
List<T> flatten<T>(Iterable<Iterable<T>> list) =>
    [for (var sublist in list) ...sublist];

var a = [[1, 2, 3], ['a', 'b', 'c'], [true, false, true]];
var b = flatten(a);
print(b); // Prints: [1, 2, 3, a, b, c, true, false, true] 
```

如果有需要递归展平的嵌套列表，您可以使用：

```
List<T> flattenDeep<T>(Iterable<dynamic> list) => [
      for (var element in list)
        if (element is! Iterable) element else ...flattenDeep(element),
    ];

var a = [[1, [[2], 3]], [[['a']], 'b', 'c'], [true, false, [true]]];
var b = flattenDeep(a);
print(b) // Prints: [1, 2, 3, a, b, c, true, false, true] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-11-14T04:06:26.490

您可以使用生成器有效地做到这一点：

```
Iterable<T> flatten<T>(Iterable<Iterable<T>> items) sync* {
  for (var i in items) {
    yield* i;
  }
}

Iterable<X> flatMap<T,X>(Iterable<Iterable<T>> items, X Function(T) f) =>
  flatten(items).map(f); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-08T05:24:45.730

使用 expand 方法的解决方案很适合满足这种情况：

```
expect(ListTools.getFlatList([[1],["hello",2],["test"]]),orderedEquals([1,"hello",2,"test"])); 
```

但不适用于这些

```
expect(ListTools.getFlatList([[1],["hello",2,["foo",5]],["test"]]),orderedEquals([1,"hello",2,"foo",5,"test"]));
expect(ListTools.getFlatList([1,["hello",2],"test"]),orderedEquals([1,"hello",2,"test"])); 
```

为了满足这些测试用例，您需要更递归的东西，例如以下函数：

```
List getFlatList(List list) {
  List internalList = new List();
  list.forEach((e) {
    if (e is List) {
      internalList.addAll(getFlatList(e));
    } else {
      internalList.add(e);
    }
  });
  return internalList;
} 
```

此致，

塞巴斯蒂安

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-05T07:37:18.227

您可以尝试这种递归解决方案，它也允许单个元素并展平深度嵌套的列表。

```
List flatten(List arr) => 
  arr.fold([], (value, element) => 
   [
     ...value, 
     ...(element is List ? flatten(element) : [element])
   ]); 
```

# javascript - Overriding a MooTools event with jQuery.click()

> ID：15413257
> 
> 赞同：2
> 
> 时间：2013-03-14T15:20:21.273
> 
> 标签：javascript, jquery, mootools, jquery-events, preventdefault

I have a library function, that I cannot change, which uses MooTools to attach an event.

```
$(document.body).addEvents({
    "mousedown:relay(a.className)": function (a, b) {
        if (!a.rightClick) {
            //do something
        }
        return false
}); 
```

I'm not too familiar with MooTools, but I've tried everything I can think of to override this with a `jQuery.click()` event.

I've tried attaching a listener to `.className`, its parents (a few levels up), and even the whole `body`; each time, I use `function (e) { e.preventDefault() }` in my `click` event.

I've always assumed the `preventDefault()` would always prevent all default events associated with the newly-triggered event.

Can anyone enlighten me as to why my event override isn't working?

// EDIT

I'm not looking to use MooTools because we will probably port everything to jQuery (or at least not MooTools) in the future. I guess I'll have to, though, if there's no other way.

// EDIT 2

I've tried `jQuery.off()` in several different ways, including `$j('body').off('click mousedown','.className');` and it still fails to remove the MooTools event.

// EDIT 3

I decided it was best to just not mess with MooTools; I've changed the classname so the MooTools doesn't do anything and just replicated what happened in the `//do something` part of the code above.

I have a feeling I can't do anything with the click event because of the `return false` at the end of the MooTools event listener.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:30:13.943

根据您使用的 JQuery 版本，您可以尝试`off`（JQuery 1.7 或更高版本）或`unbind`删除 MooTools 事件处理程序。

我不确定它们是如何在幕后工作的，但我认为无论它们是如何绑定事件的，它们都会删除事件处理程序。然后，您可以使用 JQuery 应用您自己的事件处理程序。

[http://api.jquery.com/off/](http://api.jquery.com/off/)

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

# ios - iOS NSURLCache / NSURLConnection 304 + max-age

> ID：15413260
> 
> 赞同：3
> 
> 时间：2013-03-14T15:20:35.263
> 
> 标签：ios, objective-c, nsurlconnection, nsurlcache

Just out of curiosity does NSURLCache just completely ignore the max-age cache control header on 304 responses? I have a system setup using etags and max-age, that in theory should only send a request to the web service every 10 seconds based on the max-age setting in the header. Now this works when iOS gets the 200 response on initial load, but not when it receives the 304 response, it just continues to make the request to the server despite the max-age value. Based on what I've read in the past, what I'm trying to do is COMPLETELY valid http to ease server resources.

Sometimes I dislike the magic in the background.

# wpf - How to make title bar disappear in WPF window?

> ID：15413263
> 
> 赞同：56
> 
> 时间：2013-03-14T15:20:48.747
> 
> 标签：wpf, xaml, window, titlebar

I know this has been asked before but I've tried answers:

*   [How to create a WPF Window without a border that can be resized via a grip only?](https://stackoverflow.com/questions/611298/how-to-create-a-wpf-window-without-a-border-that-can-be-resized-via-a-grip-only)
*   [How to remove the title bar from a window but keep the border](https://stackoverflow.com/questions/8918518/how-to-remove-the-title-bar-from-a-window-but-keep-the-border)

and neither work, the title bar text sits there and im unable to move my grid up to the top of the window so that the grid takes up the whole window. I' am stuck on this.

The XAML for the window :

```
<Window x:Class="PlayWPF.TimerSlideWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="" Height="95" Width="641" WindowStyle="None" 
    ResizeMode="CanResize" AllowsTransparency="False">
   <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
       <Slider Height="42" HorizontalAlignment="Left" Margin="10,14,0,0" 
               Name="sldTime" VerticalAlignment="Top" Width="495" />
       <TextBox FontSize="18" Height="29" HorizontalAlignment="Left" 
                Margin="510,10,0,0" Name="txtTime" Text="00:00:00" 
                TextAlignment="Center" VerticalAlignment="Top" Width="93" />
   </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-03-14T15:32:31.803

您需要将`WindowStyle`属性设置为，就像我在[此答案](https://stackoverflow.com/a/6792677/302677)`None`中概述的那样

```
<Window ...
    WindowStyle="None"
    WindowState="Maximized"
    WindowStartupLocation="CenterScreen"> 
```

您还可以设置`AllowsTransparency="True"`，`Background="Transparent"`如果您想隐藏整个窗框并建立自己的。

**根据添加到问题的代码进行更新**

您刚刚发布的代码对我来说很好。没有标题栏，虽然因为您指定了 Resize 边框`ResizeMode="CanResize"`

您的窗口顶部确实有一些空白，但那是因为您为 Slider 和 TextBox 指定了一个顶部边距（当您指定一个带有 4 个数字的边距时，它会向左、上、右、下，所以第二个数字是您的最高保证金）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T15:38:29.117

```
<Window x:Class="BorderlessWindow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        WindowStyle="None"
        BorderBrush="Black"
        BorderThickness="5"
        AllowsTransparency="True"
        >
    <Grid>
        <TextBlock Text="Title Less Window" HorizontalAlignment="Center" FontSize="15" Margin="10" />
    </Grid>
</Window> 
```

上面的代码适用于您的问题“如何使标题栏在 WPF 窗口中消失？”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-13T16:25:32.053

尝试将标题高度设置为 0

```
<Window x:Class="BorderlessWindow.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    WindowStyle="None"
    WindowStartupLocation="CenterScreen"
    ResizeMode="CanResize">

 //remove the border, glassframe, but keep the ability to resize
<WindowChrome.WindowChrome>
    <WindowChrome GlassFrameThickness="0" CornerRadius="0" CaptionHeight="0"/>
</WindowChrome.WindowChrome>

<Grid>
    <TextBlock Text="Resizeable Window" HorizontalAlignment="Center" FontSize="30"/>  
</Grid> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-04T21:13:11.233

尝试设置 TitleBarHeight="0"

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-07-19T12:04:50.447

我认为您应该使用 ShowTitleBar="False" 并返回应用程序中的任何位置，无论是在 Xaml 文件中还是在后面的代码中。这应该够了吧

# linux - 在 Linux 内核中暂停代码执行

> ID：15413264
> 
> 赞同：1
> 
> 时间：2013-03-14T15:20:49.770
> 
> 标签：linux, debugging, linux-kernel, kernel

有没有办法在 Linux 内核中工作时暂时暂停代码执行（出于调试目的），比如 getchar() 或 system("PAUSE") 类型的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:24:31.077

您需要的是 GNU 调试器，`gdb`. 请记住，您必须使用`-g`标志编译代码才能使其正常工作。

例如： `$ gcc -g -o out -c file.c`

然后通过调试器执行你的程序： `$ gdb ./out <params>`

`gdb`如果您对用法一无所知 ，则值得阅读手册页。`$ man gdb`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:39:04.203

一般有gdb远程调试程序：

[http://davis.lbl.gov/Manuals/GDB/gdb_17.html](http://davis.lbl.gov/Manuals/GDB/gdb_17.html)

我不确定是否可以通过这种方式调试 linux 内核。

FreeBSD 内核可能允许这样做：

[http://www.freebsd.org/doc/en_US.ISO8859-1/books/developers-handbook/kerneldebug-online-gdb.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/developers-handbook/kerneldebug-online-gdb.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T17:52:33.107

是的，在技术上可以通过 kgdb（和单独的机器，因为它通常通过串行端口连接）动态调试内核。

更实用的方法是生成内核转储并对其进行调试（只需谷歌它，它相当简单）。

如果您确实需要调试内核的运行部分，请为自己创建一个工作线程并对其进行调试（它不会锁定您的系统）。

您可以通过函数 set_current_state(TASK_STOPPED) 暂停工作线程，并且要“解冻”它，您必须使用 set_task_state(task_mm_struct_pointer, TASK_INTERRUPTIBLE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T15:58:07.753

内核本身至少有两个为此目的而设计的工具（假设您要调试内核代码，而不是用户空间代码）。它们都共享相同的框架，因此它们的设置方式非常相似：

*   `KDB`- 它允许您在没有任何额外软件工具的情况下进行有限的调试。在某些情况下（例如，当您拥有 KMS 图形驱动程序和 PS/2 键盘时）甚至可以在同一台机器上执行此操作。我的 Fedora 内核已`KDB`编译支持，并且我的笔记本电脑中有英特尔显卡，因此我可以执行以下操作：

    ```
    echo kms,kdb > /sys/module/kgdboc/parameters/kgdboc 
    ```

    在我的计算机上启用 KDB。现在，如果我想开始调试会话，我所要做的就是调用：

    ```
    echo g > /proc/sysrq-trigger 
    ```

    现在（几乎）整个内核将被停止，我将得到`kdb`提示。要退出`kdb`并恢复正常的内核操作，我会键入`go`. 您可以在`kdb`控制台中执行大量操作，只需键入`help`即可了解它们

*   另一种机制是`KGDB`允许您为了激活`kgdb`我会`kgdb`从`kdb`提示符运行命令 - 这会将调试器切换到`kgdb`模式。连接成熟的调试器 ( `gdb`) 并为其提供内核映像以访问内核中的所有符号。`kgdb`您可以像 一样激活，使用内核参数`kdb`配置其输出。`kdboc`但是，在这种情况下，您需要串行连接到将运行的其他计算机`kdb`。所以你会使用类似的东西：

    ```
    echo ttyS0 > /sys/module/kgdboc/parameters/kgdboc 
    ```

    现在，如果您同时启用`kdb`并`kgdb`启用了两者，则默认情况下将运行第一个。您可以使用命令从 shell进入`kgdb`模式。也可以通过键入返回。现在，如果您处于模式下，请在使用串行连接的第二台计算机上打开，将您的作为参数并使用类似的东西连接到您要调试的计算机。`kdb``kgdb``kdb``$3#33``kgdb``gdb``vmlinux``target remote /dev/ttyS0`

这些是基础知识，您可以`Documentation/DocBook/kgdb.tmpl`在内核源代码中找到更多信息。

# ios - Tumblr: Avatar request returns not URL

> ID：15413265
> 
> 赞同：1
> 
> 时间：2013-03-14T15:20:50.647
> 
> 标签：ios, tumblr, mknetworkkit

I use `MKNetwork Kit` for this.

```
MKNetworkOperation *op = [[MKNetworkOperation alloc] initWithURLString:@"http://api.tumblr.com/v2/blog/my_blog.tumblr.com/avatar/512"
                                                                        params:nil
                                                                    httpMethod:@"GET"];

        [op addCompletionHandler:^(MKNetworkOperation *completedOperation) {
            UIImage *img = [completedOperation responseImage];
            DLog(@"%f x %f", img.size.height, img.size.width); //512 x 512
            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSData *myImageData = UIImagePNGRepresentation(img);
        [fileManager createFileAtPath:@"/Users/Mac/Desktop/myimage.png" contents:img attributes:nil];
        } errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {
            DLog(@"error: %@",error);
        }];

   [self enqueueOperation:op]; 
```

And! Oh! wonderful Tumblr! I have an Image on my Desktop.

How can I prevent this behavior and change response to json with field `avatar_url`?

UPD:

Try this:

curl [http://api.tumblr.com/v2/blog/my_blog.tumblr.com/avatar/512](http://api.tumblr.com/v2/blog/my_blog.tumblr.com/avatar/512)

And it will returns

```
{"meta":{"status":301,"msg":"Found"},"response":{"avatar_url":"good_link_here"}} 
```

UPD 2:

[Good answer](https://groups.google.com/forum/?fromgroups=#!topic/tumblr-api/NYcPY2BBJE8)
I must stop redirection.

# php - How do I force Drupal ImageCache create image styles on upload, not on first image request?

> ID：15413266
> 
> 赞同：3
> 
> 时间：2013-03-14T15:20:51.367
> 
> 标签：php, drupal, drupal-7, image-caching

I am using [ImageCache](http://drupal.org/project/imagecache) to generate several image styles for certain uploaded pictures. However, the site is going to be pretty high-load, so it might be more resource-efficient, if those sizes were created once the file is uploaded, not on first display event. Is there any way meant to do this without having to use some kind of crawler? Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:44:15.970

我认为您可以尝试创建自定义 cron 函数来获取所有最新上传的图像并构建图像缓存版本。

在这里检查非常相似的问题：[https](https://drupal.stackexchange.com/questions/38/rebuild-imagecache) ://drupal.stackexchange.com/questions/38/rebuild-imagecache 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T15:18:26.710

似乎有一个模块： [https ://www.drupal.org/project/imageinfo_cache](https://www.drupal.org/project/imageinfo_cache)

# database - How can I use node-orm2 to model two or more databases with Express?

> ID：15413267
> 
> 赞同：4
> 
> 时间：2013-03-14T15:20:53.783
> 
> 标签：database, node.js, orm

I'm trying to use [node-orm2](https://github.com/dresende/node-orm2) as middleware with [Express](http://expressjs.com/) the documentation only shows how you can connect to one database only.

I have tried getting Express to use two different middleware layers, but no luck. For instance,

```
app.use(orm.express('sqlite://test.db', define: { /* define table1 */ }));
app.use(orm.express('sqlite://test2.db', define: { /* define table2 */ })); 
```

I've routed everything correctly to this `get` handler:

```
app.get("/", function (req, res) {
   var t1 = req.db.models.table1.find(...);
   var t2 = req.db.models.table2.find(...);
   res.send([t1,t2]);
}); 
```

Since I `app.use`d `table1`'s database first, the second of the `find` invocations will yield

```
TypeError: Cannot call method 'find' of undefined 
```

... which means that the two `define:` blocks haven't been merged, which is what we'd like.

How would I access two databases with node-orm2?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T02:12:21.903

你的代码看起来不错。我认为问题在于您使用的是“req.db.models”而不仅仅是“req.models”。从[文档](https://github.com/dresende/node-orm2)中：

```
app.get("/", function (req, res) {
    // req.models is a reference to models used above in define()
    req.models.person.find(...);
}); 
```

并且：

> 您可以多次调用 orm.express 以获得多个数据库连接。跨连接定义的模型将在**req.models**中连接在一起。不要忘记在 app.use(app.router) 之前使用它，最好是在你的资产公用文件夹之后。

一切都在“模型”下混合在一起，数据库之间没有区别。这意味着你不能在多个数据库中为你的模型命名相同的东西，但是 c'est la guerre。

# mysql - 我怎样才能在if中加上加号/减号？

> ID：15413273
> 
> 赞同：1
> 
> 时间：2013-03-14T15:21:06.650
> 
> 标签：mysql, sql

这一直让我想知道，

可以说我有这种情况：

```
select (...long sub query..) - (...long sub query..) 
```

而且我想设置`-`条件，这意味着有时会`-`，有时`+`，有没有简单的方法可以做到这一点？我知道的方式是：

```
select if(condition,(...long sub query..) - (...long sub query..),
   (...long sub query..) + (...long sub query..)) 
```

这使得查询更难阅读和维护，或者将其放入存储过程中，我不希望这样做。

我可以将算术运算放在某种 var 中并以某种方式连接它吗？

我想要达到的目标是：

```
select (...long sub query..) if(condition,-,+) (...long sub query..) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:23:41.310

不，你不能。

但是，您可以改用乘法：

```
(...) + IF(..., -1, +1) * (...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:23:48.517

您可以将每个子查询保存在一个变量中，然后使用`IF`.

```
SELECT @a:=(...long sub query..), @b:=(...long sub query..),
  IF(condition, @a-@b, @a+@b) AS result 
```

MySQL 变量的文档：http: [//dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T15:26:38.580

didn't much understand your question but you can store any character in string or char variable and use it to concatenate in your statement

# plugins - CRM 动态工作流等待条件

> ID：15413278
> 
> 赞同：2
> 
> 时间：2013-03-14T15:21:20.757
> 
> 标签：plugins, dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4

我有一个关于我面临的问题的问题。有什么方法可以让工作流程等待另一个工作流程完成（或者至少在第一个工作流程执行后几秒钟触发）？

我的场景：我有一个工作流等到合同到期日期前 6 个月，一旦到达该日期，它就会创建一个自定义实体，并且在自定义实体上我注册了一个插件，它创建一个机会并插入一个机会产品线（对于到期的合同行）。

问题：合同可以有多个合同行在同一日期到期，因此工作流程开始并创建多个机会，将每一行添加到一个机会中，这不应该发生，因为我希望所有合同行最终都在一个机会中。这不会经常发生，但我相信当工作流同时执行时，我会得到这种奇怪的行为。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:21:02.173

我通常会采取的方法是这样的：稍等片刻，然后检查相关记录（在这种情况下为合同行或合同）上的查找字段。如果未填写，请创建一条记录（在您的情况下为 Opp）并填写查找以指向它。

现在调用一个子工作流，或者只是对查找中的记录执行一些步骤，我们知道现在以一种或另一种方式填充。

因此，第一个 WF 看到没有 Opp，创建一个然后对其进行处理（例如，在自定义工作流程序集中）。

第二个 WF 到了那里，发现 Opp 已经在那里，所以使用它。

您遇到的问题是，一旦开具发票/激活合同，您就无法更新合同。因此，您可能必须首先创建机会（未来的结束日期打开），然后让您的工作流程运行，等待并在他们到达那里时使用这个机会。

如果你真的不喜欢那么多开放的 Opps，那么在两者之间创建一个层 - 从 Contract 查找到“更新”自定义实体，它本身除了保存 Opportunity 查找之外什么都不做。在创建合同（wf 或插件）时创建续订，以便已填充查找。

# json - 发布读取 JSON 文件的 SWF 文件

> ID：15413286
> 
> 赞同：1
> 
> 时间：2013-03-14T15:21:45.903
> 
> 标签：json, actionscript-2

我已经在我的计算机中测试了我的 swf，并且在解决了安全站点后运行正常。但是，当我将 swf 和 json 文件上传到（免费）服务器时，尽管权限为 666，但 swf 无法与 json 文件通信。同样的 swf 电影，读取 txt 和 php 文件没有问题，只是只有json 一个。我已经询问管理员是否有某种限制，现在等待他的回答。json 文件可能代表服务器的潜在不安全性吗？我不是安全问题专家，但我在过去读到过，通过 json 攻击相对非常容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:03:41.847

对不起。我解决了我的问题。这是Flash的问题。Flash 可以处理数字字符串，比如说，内部 flash 理解这个“5”+3，对于 Flash，如果你在计算机上运行 swf，这个结果是 53 一个实数，但是，如果你在 web 中运行嵌入的 swf页面，此操作产生 NAN !!!。我相信 Flash 好像没有从 JSON 文件中读取我的数据，它们确实存储为字符串、数字字符串。

所以，我简单地用这个来解决： Number('data from JASON') + 'a real number' + etc

然后，我明确地将从 JSON 读取的（数字字符串）数据转换为数字。而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:39:02.400

它可能不是问题的根源，但值得让管理员检查服务器上的 JSON MIME 类型是什么——它应该是 application/json。

# ios - cocos2d 和 cocosbuilder 横向

> ID：15413287
> 
> 赞同：0
> 
> 时间：2013-03-14T15:21:47.680
> 
> 标签：ios, xcode, cocos2d-iphone, cocosbuilder

我在使用 cocos2d 和 cocosbuilder 时遇到了景观旋转问题。

我的 cocosbuilder 项目中有**iPhone Landscape**和**iPhone5 Landscape**而在 xcode支持的**界面方向**上，我只选择了景观。

在我的 appDelegate.mi 上有：

```
-(NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

这应该很简单，但是我在这里很难过，真的不想在不使用 cocosbuilder 的情况下再次重新组装我的游戏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:27:13.167

如果您支持目前最常用的最新版本的 iOS，那么您应该使用这些方法来检查方向

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
}

-(NSUInteger)supportedInterfaceOrientations

{
       return UIInterfaceOrientationMaskLandscape;
}

-(BOOL)shouldAutorotate {

        return YES;    
} 
```

`shouldAutorotateToInterfaceOrientation`在 iOS6 中已弃用，而不是使用此方法，而是使用我提供的上述方法并阅读苹果提供的[UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)文档，其中清楚地写明了您可以使用哪些方法以及用于什么目的。以下是您可能会使用的一些方法

```
willRotateToInterfaceOrientation:duration: 
willAnimateRotationToInterfaceOrientation:duration:
and didRotateFromInterfaceOrientation: 
```

# excel - 在单元格引用中使用 VALUE

> ID：15413293
> 
> 赞同：1
> 
> 时间：2013-03-14T15:21:57.473
> 
> 标签：excel

所以为了简化问题：

我在一个工作簿中有两个工作表，`Alpha`并且`Beta`.

我需要引用一个单元格中的特定值`Alpha`来选择一个单元格 in `Beta`，即：如果`B2`in `Alpha`=的值`76`，那么我需要引用 row 中的单元格`76`。

我不是巫师，但我尝试过：`=Beta!(H(VALUE(Alpha!B2)))`

（在上面的示例中，我的最终目标是在 Beta 中引用 H76）

我知道这是不正确的，但我认为它可以更好地了解我正在尝试做的事情。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:28:00.553

如果我正确理解您的问题，您可以使用[INDIRECT 函数](http://office.microsoft.com/en-us/excel-help/indirect-function-HP010062413.aspx)根据另一个单元格的值创建引用。

以下将创建对工作表 H 列的引用`Beta`，并且该行将由中的值指定`Alpha!B2`

```
=INDIRECT("'Beta'!H"&VALUE(Alpha!B2)) 
```

以上产生的参考相当于：

```
Beta!H[row_number_specified_by:Alpha!B2] 
```

例如让我们假设：`=VALUE(Alpha!B2)`产生结果`76` 那么上面的原始公式将等价于：

```
Beta!H76 
```

根据问题中的场景描述，这就是您想要的..

# mysql - 如何创建脚本来运行 MySQL 命令行？

> ID：15413305
> 
> 赞同：0
> 
> 时间：2013-03-14T15:22:31.223
> 
> 标签：mysql, windows, windows-7, command-line

我正在尝试将大约 20 个 .csv 文件导入 MySQL，但我已经厌倦了通过 phpmyadmin 的导入 gui 来完成它。

有没有办法在不输入命令行的情况下批量执行此操作？即双击时将运行的脚本（Windows）。我想要的是：

1.  我有 porsche.csv、ferrari.csv 等文件
2.  我想将这些中的每一个导入具有相同名称的表中（即保时捷、法拉利）
3.  在导入文本文件之前清空表（使用`delete`标志）。它如何处理新领域？
4.  忽略第一行（标题）。

从我到目前为止收集到的：我们使用`mysqlimport`：[http ://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)

我会尝试摆弄这些选项，看看我是否可以让某些东西起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:35:19.070

在 Windows 上，最简单的方法是使用批处理脚本。

阅读有关可用选项[的文档。](http://dev.mysql.com/doc/refman/5.1/en/mysqlimport.html)

批处理脚本看起来像：

```
@echo off
cd C:\Program Files\MySQL\MySQL Workbench 5.2 CE\

mysqlimport ... 
```

其他相关问题：

*   [将多个CSV文件导入mysql](https://stackoverflow.com/questions/9696343/import-multiple-csv-files-into-mysql)
*   [如何从 MySQL 中的 .bat 文件导入数据？](https://stackoverflow.com/questions/9232240/how-do-i-import-data-from-a-bat-file-in-mysql)

# php - 在两个时间戳之间从mysql获取数据

> ID：15413310
> 
> 赞同：0
> 
> 时间：2013-03-14T15:22:45.387
> 
> 标签：php, mysql, sql, timestamp

我试图通过在两个时间戳之间进行搜索来从我的数据库中获取数据。以下是我的查询

```
$result = mysql_query("SELECT * FROM table WHERE time BETWEEN '1362355200' AND '1362959999'") 
```

当查询运行时，我没有收到任何错误或结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:23:46.333

`time`是保留关键字。试着把它放在蜱虫中：

```
SELECT * 
FROM table 
WHERE `time` BETWEEN '1362355200' AND '1362959999' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:41:42.873

我认为问题在于价值观周围的问题。如果要比较数值，请不要使用它们。查看[BETWEEN 上的手册以](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)获取更多信息

```
SELECT * 
FROM table 
WHERE `time` BETWEEN 1362355200 AND 1362959999 
```

# iphone - 处理情节提要中视图控制器之间的模态序列

> ID：15413311
> 
> 赞同：1
> 
> 时间：2013-03-14T15:22:45.403
> 
> 标签：iphone, ios, objective-c

我在故事板（在 xcode 中）中有一个 iPad 应用程序，带有几个单独的视图控制器。我必须使用模态segues设置它们以在彼此之间进行转换。我想知道在执行 segue 后处理关闭视图控制器的最佳方法是什么。成功转场后是否应该关闭前一个视图控制器？如果是这样，哪种方式是最佳的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:35:05.460

如果基本视图控制器 A 将视图控制器 B 呈现为模态，然后您需要模态 C 出现，则应在呈现 C 之前关闭模态 B。这假设模态 B 中的任务不依赖于 C 中用户操作的结果

您可以通过以下方式在解除 B 和呈现 C 之间实现平滑过渡：

```
// instantly dismiss B (or whichever is showing)
[self dismissModalViewControllerAnimated:NO];
// show the other modal with your existing segue
[self performseguewithidentifier@"c_segue"]; 
```

从 UI 设计的角度来看，模式用于用户在另一个视图控制器（在您的情况下为 A）上执行任务时*必须*处理的中断/交互。如果模态 B 中的交互需要另一个这样的中断（意味着 B 必须将 C 呈现为模态），那么是时候看看你的 UI 设计，看看你正在做的是否是最好的方法。

如果您实际上是在视图*之间*移动（您不再需要 A），那么模态绝对是错误的选择。你可能想要做一个*替换*序列，或者查看一个 ContainerView 来管理换出视图控制器。

# php - PHP 在 Internet Explorer 中显示 CSV 文件

> ID：15413313
> 
> 赞同：3
> 
> 时间：2013-03-14T15:22:46.980
> 
> 标签：php, csv

问候专家，

我有一个 php 脚本，可以查询我们的数据库并在浏览器中输出一个 csv 文件。这项工作在 FireFox、Safari 和 Chrome 中更有效。它在我们大楼的默认浏览器 Internet Explorer 中不起作用（叹气）。我无法发布网址，因为它是受保护的网站，对您没有任何好处。

在 IE 中，当我单击此报告的链接时，我得到两个弹出窗口：

1) 无法从 下载 downloads.html。无法打开此 Internet 站点。请求站点不可用或找不到请稍后再试。

2) 下载百分比信息窗口：获取文件信息：downloads.html from Estimated time left: Download to: Transfer rate: 所有这些都是空的。

所以，我有一个页面，downloads.html 试图生成一个 CSV 文件。就 IE 而言，不确定这里发生了什么轰炸。我可以尝试不同的标题吗？我在搜索中没有看到任何东西。

感谢您的任何提示...

这是我打印出数据的函数：

```
# $data is array of data from database
function render_excel($data) {
  # headers for browsers
  header("Content-type: text/csv");
  header("Content-Disposition: attachment; filename=file.csv");
  header("Pragma: no-cache");
  header("Expires: 0");

  # column headers
  $column_headers = "Filename, Link to File, Details, Unique Viewers\n";
  $rows = '';
  foreach($data as $foo => $arr){   
    $rows .= $arr['filename'].",";
    $rows .= $arr['resource_url'].",";
    $rows .= $arr['detail_url'].",";
    $rows .= $arr['distinct_views']."\n";
  }
  print $column_headers;
  print $rows;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:29:28.147

我认为有两个问题。首先是您需要在文件名周围加上引号，其次是您需要添加`Content-Length`标题以显示下载时间。

```
//1
header("Content-Disposition: attachment; filename=\"file.csv\"");

//2
header("Content-Length: " . (strlen($column_headers.$rows))); 
```

请记住，如果您的页面上有其他代码，长度可能会有所不同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T15:33:23.243

根据我的经验，要让它与 IE 一起工作——尤其是旧版本的 IE——需要使用 mod_rewrite 将具有正确文件扩展名（例如下载/file.csv）的 URL 重定向到生成 CSV 输出的 PHP 文件。IE 出于某种原因更喜欢 URL 文件扩展名而不是 content-type 和 content-disposition 标头。

# mysql - 加入 2 个表以返回结果为零的查询

> ID：15413322
> 
> 赞同：0
> 
> 时间：2013-03-14T15:23:06.220
> 
> 标签：mysql, sql

我有两张桌子，一张叫医生，一张叫约会。他们都有共同关系的医生ID。我需要能够生成医生 ID 列表以及为每个有零个或多个预约的医生进行的预约数量。（表内容见图片）

![在此处输入图像描述](../Images/e679899efa4478f7be7d0a4f6ea06add.png)

使用下面的代码，我可以获得医生列表) id 以及预约次数，但它不会显示医生列表中的零预约医生。我需要做什么修改？

```
SELECT doctor_id, COUNT(DISTINCT appt_time) AS No_APP FROM appointment GROUP BY doctor_id; 
```

这就是我从中得到的

![在此处输入图像描述](../Images/e120696fb55a4748440ecff21aec4aae.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:26:03.680

尝试：

```
SELECT doctor.doctor_id, COUNT(appointment.appt_time) AS No_APP 
FROM doctor
LEFT JOIN appointment 
ON appointment.doctor_id = doctor.doctor_id
GROUP BY doctor.doctor_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:28:08.860

使用左连接：

```
SELECT doctor.doctor_id, COUNT(appt_time) AS No_APP FROM doctor LEFT JOIN appointment ON doctor.doctor_id = appointment.doctor_id GROUP BY doctor.doctor_id; 
```

它应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:26:34.117

这应该有效：

```
select 
  d.doctor_id
  ,count(distinct a.appt_time) as No_APP 
from doctor d 
left join appointment a on d.doctor_id=a.doctor_id
group by d.doctor_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:27:28.520

使用左连接：

```
SELECT doctor.doctor_id, COUNT(DISTINCT appt_date, appt_time) AS No_APP 
FROM doctor 
LEFT JOIN appointment
ON doctor.doctor_id = appointment.doctor_id
GROUP BY doctor_id; 
```

# java - 有用还是浪费内存？

> ID：15413325
> 
> 赞同：2
> 
> 时间：2013-03-14T15:23:10.073
> 
> 标签：java, object, methods

在我的课堂上，我们被分配了一个问题来创建一个“分解器”应用程序，该应用程序计算任何数字的素数分解，直到一个非常大的数字。他给了我们一个`Number.java`类，用于计算数字是否为素数，以供显而易见的用途。

```
// Number.java
public class Number {  
    long n;
    public Number(long number) {
        n = number;
    }
    boolean isPrime() {
        for(long k = 2; k < n; k++) {
          if(n % k == 0) return false;
        }
        return true;
    }
} 
```

唯一的问题是这个`Number.java`类是它有一个构造函数，在我看来这使得它在这种情况下不那么“移动”。我的意思是，在我计算参数的主要因素的循环中，一个新的 Number 对象被一遍又一遍地创建。`private Number isPrimeFactor = new Number()`在顶部定义 a 而不是`Number isPrimeFactor = new Number(i)`为循环的每次重复都创建一个新的不是更有意义吗？我问过我的老师，但他并没有真正回答。这是我正在谈论的一些示例代码。

```
while (remainder!=0 && j<n) {
        Number isFactor = new Number(j);
        if(isFactor.isPrime() && remainder%j==0) {
            remainder = remainder / j;
            factor[i]=j;
            temp = (int) j;
            multiplicity[temp] = multiplicity[temp]+1;
            i++;
        } else {
            j++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:31:33.020

是的，`new`这是相当昂贵的，这意味着调用几千次`isPrimeFactor = new Number(j)`的效率低于只有一个实例`Number`并使用 a 更改关联`n`值`isPrimeFactor.setN(j)`。这是因为`new`分配了新内存，并且一旦实例不再可访问，垃圾收集器会不时释放内存。

但是，使 Number 不可变的优点是，您不会冒险让一段代码更改其值，而另一段代码认为它没有改变（例如，当您使用线程时这是非常好的属性）。

顺便说一句，我认为`Number`你教授的课程是一个糟糕的面向对象设计，可变与否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:33:18.537

这里有意义的是**没有**一个构造函数，其唯一目的是传递`n`给`isPrime()`：这就是函数参数的用途！

```
public class PrimeChecker {     
  public static boolean isPrime(long n) {
    for(long k = 2; k * k < n; k++) {
      if(n % k == 0) return false;
    }
    return true;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:29:41.943

在内存/速度/代码可读性/维护之间总是有一个选择。因此，不可能以客观的方式回答这个问题。

这个解决方案效率低吗？也许，但话又说回来，函数调用很昂贵，因此任何涉及函数调用的解决方案都可能被标记为低效。

如果这是家庭作业或学习练习，那么代码效率并不是很重要，但编写清晰的代码来解释所涉及的概念非常重要！

附言。

我见过的大多数检查素数的代码都有一个方法“isPrime”，它接受一个数字/整数作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:32:48.983

除了其他优化之外，没有理由为这些创建数字、整数等。您可以通过以下方式跳过上述所有内容：

```
public static boolean isPrime(long number) {
    for(long k = 2; k < n; k++) {
      if(n % k == 0) return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:33:06.160

只实例化一次数字并重复分配其字段肯定会更快。但是，在这种情况下，测试`isPrime`可能是瓶颈，因此您几乎不会注意到差异。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-14T15:29:43.760

你是对的，在循环内分配对象是一种性能反模式。相反，您可以通过使用静态类成员来提高执行速度并提高内存使用率。

```
// Number.java
public class Number {  
  private static long n;
 public static void setNumber(long number){
        n = number;
 }
 static boolean isPrime() {
     for(long k = 2; k < n; k++) {
       if(n % k == 0) return false;
     }
     return true;
 }
} 
```

# python - 例如在 __init__ 中声明的 Python“AttributeError”

> ID：15413326
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:23:14.443
> 
> 标签：python, oop, qtimer

我正在用 Python 和 Qt 开发一个应用程序，我想澄清一些事情。以这个代码示例为例：

```
import serial

from PySide.QtGui import QMainWindow
from PySide import QtCore, QtGui
from PySide.QtCore import QTimer
from ZumaUI import Ui_MainWindow

class MainWindow(QMainWindow, Ui_MainWindow):
    '''
    MainWindow: this is the class that manages all the functionality.
    '''
    def __init__(self, parent = None):
        '''
        Default Constructor. It can receive a top window as parent. 
        '''
        QMainWindow.__init__(self, parent)
        self.setupUi(self)

        self.serial = serial.Serial()
        self.serial.port = 'COM1'
        self.serial.baudrate = 19200
        self.serial.timeout = 0.5   #make sure that the alive event can be checked from time to time

        self.on_PortSettings()

        self.timer = QTimer(self)            
        self.timer.timeout.connect(self.OnRefresh)
        self.timer.start(150)

        self.on_PortSettings()

    def OnRefresh(self):
        pass

    def on_PortSettings(self):
        self.serial.close()
        self.timer.stop() 
```

当我运行我的代码时，我得到

```
"AttributeError: 'MainWindow' object has no attribute 'timer'" 
```

但是我没有`self.serial`在课堂上到处调用这种错误。这两个实例有什么区别，我应该如何调用`timer`它才能在整个班级中访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:25:08.267

你在`onPortSettings`设置之前打电话`timer`。

```
 self.on_PortSettings() <-- here

    self.timer = QTimer(self) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:27:12.590

做这个：

```
def __init__(self, parent = None):
    self.timer = None 
```

...

```
def on_PortSettings(self):
    self.serial.close()
    if self.timer is not None:
        self.timer.stop() 
```

# c++ - qtreeview：拖放子树会导致错误选择

> ID：15413348
> 
> 赞同：0
> 
> 时间：2013-03-14T15:24:34.070
> 
> 标签：c++, qt, drag-and-drop, qtreeview

我一直在尝试在 qtreeview 中拖放子树。当我执行 drop 并更新基础模型时，树会正确重新排序，但是，项目选择随后会被搞砸。我还没有想出一种可靠的方法来强制 QT 适当地重新绘制选择。请参阅下面的屏幕截图：

前：

![拖放之前](../Images/f534f64c835cca9fcc376596a80468da.png)

将顶部节点拖到节点 2 后：

![在此处输入图像描述](../Images/3dea7840995ac066be00eb00988880f6.png)

相关视图代码：

```
void View::dropEvent(QDropEvent *evt)
{
    QTreeView::dropEvent(evt);

    QModelIndex start = indexAt(_drag_start);
    QModelIndex end = indexAt(evt->pos());

    _model->moveTo(start, end);
} 
```

相关型号代码：

```
void Model::moveTo(QModelIndex& start, QModelIndex& end)
{
    // ... omitted some error checking code to ensure start and end have the same parent

    ModelData* a = (ModelData*) start.internalPointer();
    ModelData* b = (ModelData*) end.internalPointer();

    ModelData* list = (ModelData*) (parent(start).internalPointer());

    int idxa = list->indexOf(a);
    int idxb = list->indexOf(b);

    // underneath this is QList<...>::moveTo
    list->moveTo( idxa, idxb );

    QModelIndex p = this->parent(start);

    emit dataChanged( index(0, 0, p), index(rowCount(p)-1, 1, p) );
} 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:16:26.520

事实证明，这是通过在 Model::moveTo() 方法中添加以下代码来解决的：

```
...
emit layoutAboutToBeChanged();
list->moveTo( ... );
emit layoutChanged();
... 
```

# c# - 如何在从 Button 派生的 CustomControl 中获得“默认按钮外观”？

> ID：15413350
> 
> 赞同：0
> 
> 时间：2013-03-14T15:24:42.970
> 
> 标签：c#, wpf, button, custom-controls

[刚刚尝试在这个 Stackoverflow 问题](https://stackoverflow.com/questions/1933127/creating-an-imagetext-button-with-a-control-template)的帮助下为按钮编写自己的自定义控件

但是 Button 控件除了图像和文本之外是**空的。**

如果没有指定其他内容，是否有可能使用默认行为？

如果已经存在几乎适合的按钮，我不想重新编写整个按钮。只是想添加一个 ImageSource 和一个文本以及一些（不是全部）样式。

这是我所拥有的，也许我只是犯了一些错误。

类定义：

```
public class MyImageButton : Button
{
    static MyImageButton()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(MyImageButton), new FrameworkPropertyMetadata(typeof(MyImageButton)));
    }

    public ImageSource ImageSource
    {
        get { return (ImageSource)GetValue(ImageSourceProperty); }
        set { SetValue(ImageSourceProperty, value); }
    }

    public static readonly DependencyProperty ImageSourceProperty =
        DependencyProperty.Register("ImageSource", typeof(ImageSource), typeof(MyImageButton), new UIPropertyMetadata(null));

    public string Text
    {
        get { return (string)GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }

    public static readonly DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof(string), typeof(MyImageButton), new UIPropertyMetadata(null));
} 
```

从 generic.xaml

```
<Style TargetType="{x:Type local:MyImageButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyImageButton}">
                <StackPanel Height="Auto" Orientation="Horizontal">
                    <Image Source="{TemplateBinding ImageSource}" Width="24" Height="24" Stretch="Fill" />
                    <TextBlock Text="{TemplateBinding Text}" HorizontalAlignment="Left" Foreground="Black" FontWeight="Bold"  Margin="5,0,0,0" VerticalAlignment="Center" FontSize="12" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

最后是主窗口 xaml 中的用法

```
<ctrl:MyImageButton ImageSource="SomeImage.png" Text="BlaBlubb" Height="100" Width="120" Click="CheckClick" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:34:08.693

```
But the Button control is empty besides the image and the text. 
```

这就是您在这里实现的：

```
<StackPanel Height="Auto" Orientation="Horizontal">
    <Image Source="{TemplateBinding ImageSource}" Width="24" Height="24" Stretch="Fill"/>
    <TextBlock Text="{TemplateBinding Text}" HorizontalAlignment="Left" Foreground="Black" FontWeight="Bold"  Margin="5,0,0,0" VerticalAlignment="Center" FontSize="12" />
</StackPanel> 
```

默认行为是什么意思？

一个简单的选择是这样做：

```
<Style TargetType="{x:Type local:MyImageButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyImageButton}">
                <Button>
                    <StackPanel Height="Auto" Orientation="Horizontal">
                        <Image Source="{TemplateBinding ImageSource}" Width="24" Height="24" Stretch="Fill"/>
                        <TextBlock Text="{TemplateBinding Text}" HorizontalAlignment="Left" Foreground="Black" FontWeight="Bold"  Margin="5,0,0,0" VerticalAlignment="Center" FontSize="12" />
                    </StackPanel>
                </Button>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

第二种选择，在您的情况下可能是最好的：

从按钮派生一个用户控件，大约是这样的：

```
<Button x:class="..."
        x:Name="root">
    <StackPanel Height="Auto" Orientation="Horizontal">
        <Image Source="{Binding Image, ElementName=root}" Width="24" Height="24" Stretch="Fill"/>
        <TextBlock Text="{Binding Text, ElementName=root}" HorizontalAlignment="Left" Foreground="Black" FontWeight="Bold"  Margin="5,0,0,0" VerticalAlignment="Center" FontSize="12" />
    </StackPanel>
</Button> 
```

并在 UserControl 的代码隐藏中定义依赖属性。

根据经验：当您的目标是以可重用的方式排列（其他）控件时，请使用 UserControls。

# javascript - 连接 $.post 和 hash.split 并输出

> ID：15413351
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:24:44.650
> 
> 标签：javascript, jquery

我需要帮助将这两个脚本相互连接并将结果输出到该 profile.php 文件中。

另外，它安全吗？它甚至会输出 profile.php 哈希吗？

```
var parts = window.location.hash.split('/');
var id = parts[parts.length - 1]; 
```

**和**

```
p: function(){
 $.post("profile.php", function(profile) {
        $('#result').html(profile);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:40:36.290

如果没有有关应用程序的更多信息，很难确定您需要什么，但可能类似于：

```
p: function() {
    var parts = window.location.hash.split('/');
    var id = parts[parts.length - 1];
    $.post("profile.php", {
        id: id
    }, function(profile) {
        $('#result').html(profile);
    });
} 
```

这会将散列中的 ID 作为`$_POST['id']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:53:28.330

您需要发送从哈希 url 中剥离的 id

```
$.post("profile.php", { "id": id })
.done(function(profile) {
  $('#result').html(profile);
}); 
```

# python - 循环内循环python

> ID：15413353
> 
> 赞同：1
> 
> 时间：2013-03-14T15:24:53.650
> 
> 标签：python, for-loop, iteration, python-2.4, logfile-analysis

我有一个包含几十万行的日志文件。

我正在遍历这些行以查找带有某些特定文本的任何行，例如：`!!event!!`.
然后，一旦`!!event!!`找到一行，我需要在这一行之后继续循环，`!!event!!`直到找到接下来的 3 行，其中包含他们自己的特定 text `('flag1', 'flag2', and 'flag3')`。
一旦找到第三行`('flag3')`，我就想继续循环下一`!!event!!`行并重复前一个过程，直到没有更多事件为止。

有没有人对我构建代码以完成此任务的方式提出建议？

例如：

```
f = open('samplefile.log','r')
for line in f:
    if '!!event!!' in line:
            L0 = line
        #then get the lines after L0 containing: 'flag1', 'flag2', and 'flag3'
        # below is a sample log file  
        #I am not sure how to accomplish this 
        #(I am thinking a loop within the current loop) 
        #I know the following is incorrect, but the 
         intended result would be able to yield something like this:
            if "flag1" in line:
                L1 = line.split()
            if "flag2" in line:
                L2 = line.split()
            if "flag3" in line:
                L3 = line.split()
print 'Event and flag times: ', L0[0], L1[0], L2[0], L3[0] 
```

样本文件.log

```
8:41:05 asdfa   32423
8:41:06 dasd    23423
8:41:07 dfsd    342342
8:41:08 !!event!!   23423
8:41:09 asdfs   2342
8:41:10 asdfas  flag1
8:41:11 asda    42342
8:41:12 sdfs    flag2
8:41:13 sdafsd  2342
8:41:14 asda    3443
8:41:15 sdfs    2323
8:41:16 sdafsd  flag3
8:41:17 asda    2342
8:41:18 sdfs    3443
8:41:19 sdafsd  2342
8:41:20 asda    3443
8:41:21 sdfs    4544
8:41:22 !!event!!   5645
8:41:23 sdfs    flag1
8:41:24 sadfs   flag2
8:41:25 dsadf   32423
8:41:26 sdfa    23423
8:41:27 sdfsa   flag3
8:41:28 sadfa   23423
8:41:29 sdfas   2342
8:41:30 dfsdf   2342 
```

此示例中的代码应打印：

```
Event and flag times: 8:41:08 8:41:10 8:41:12 8:41:16
Event and flag times: 8:41:22 8:41:23 8:41:24 8:41:27 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:33:51.667

当然，您可以在内循环中继续使用文件，然后在遇到 flag3 时将其中断，然后外循环将恢复：

```
for line in f:
    if '!!event!!' in line:
        L0 = line.split()
        for line in f:
            if "flag1" in line:
                L1 = line.split()
            elif "flag2" in line:
                L2 = line.split()
            elif "flag3" in line:
                L3 = line.split()
                break             # continue outer loop
        print 'Event and flag times: ', L0[0], L1[0], L2[0], L3[0]

# Event and flag times:  8:41:08 8:41:10 8:41:12 8:41:16
# Event and flag times:  8:41:22 8:41:23 8:41:24 8:41:27 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:29:05.507

干得好：

```
with open("in6.txt") as f:
    flag = False
    c = 0
    d = []
    data = []
    for line in f:
        if flag:
            if "flag1" in line or "flag2" in line:
                data.append(line.split()[0])
            elif "flag3" in line:
                data.append(line.split()[0])
                flag = False
                d.append(data)

            continue
        if "!!event!!" in line:
            flag = True
            data = []
            c = 0
            data.append(line.split()[0])

for l in d:
    print "Event and flag times: ", l[0], l[1], l[2], l[3] 
```

**输出**

```
>>> 
Event and flag times:  8:41:08 8:41:10 8:41:12 8:41:16
Event and flag times:  8:41:22 8:41:23 8:41:24 8:41:27 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:34:22.623

保留标志以跟踪您要查找的内容：

```
with open('samplefile.log') as f:
    events = []
    current_event = []
    for line in f:
        if not current_event and '!!event!!' in line:
            current_event.append(line.split()[0])
        else:
            if 'flag1' in line or 'flag2' in line or 'flag3' in line:
                current_event.append(line.split()[0])
                if 'flag3' in line:  # could also be `if len(current_event) == 4:`
                    events.append(current_event)
                    current_event = []

for event in events:
    print 'Event and flag times:', ' '.join(event) 
```

这里我用作`current_event`旗帜；通过将`!!event!!`行时间添加到它，它变得非空，我们开始寻找标志。

我将各个事件时间收集到一个`events`列表中，但您也可以在找到该`flag3`行时打印事件数据。

输出：

```
Event and flag times: 8:41:08 8:41:10 8:41:12 8:41:16
Event and flag times: 8:41:22 8:41:23 8:41:24 8:41:27 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:41:22.167

只需遍历每一行，然后当你找到 时`!!event!!`，开始寻找标志，一旦找到所有标志，继续......

就像是：

```
def get_time(line):
    return [ i for i in line.split() if i != ''][0]

data = []
index = -1
look_for_flags = False
for line in lines:
    if '!!event!!' in line:
        look_for_flags = True
        data.append([get_time(line)])
        index += 1
    elif look_for_flags:
        if 'flag1' in line or 'flag2' in line or 'flag3' in line:
            data[index].append(get_time(line))
print data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T16:04:46.257

最清晰的方法是使用 a `generator function`，这样就不需要保持任何状态。**每当您需要构建状态机（就像您在这里所做的那样）时，请考虑`generator`.**

```
import sys

def find_target_lines(file_handle):
    target = yield
    for line in file_handle:
        if target in line:
            target = yield line

f = open('samplefile.log','r')
targets = ['!!event!!', 'flag1', 'flag2', 'flag3']

while True:
    found = list()
    finder = find_target_lines(f)
    next(finder)
    try:
        for target in targets:
            line = finder.send(target)
            if line:
                found.append(line)
        print(found)
    except StopIteration:
        break 
```

# java - 如何修复此 NullPointerException？

> ID：15413354
> 
> 赞同：0
> 
> 时间：2013-03-14T15:24:57.897
> 
> 标签：java, nullpointerexception

```
package blurbProject;
import java.util.Random;
import java.util.Scanner;

public class BlurbMaker
{
Random generator = new Random(); //"Random" number generator for the Whatzits

public BlurbMaker()//constructor
{
    generator = null;
}//close constructor

public BlurbMaker(Random iniGenerator)//initialize constructor
{
    generator = iniGenerator;
}//close initialization

private String getWhoozitYs(){
    StringBuffer sb = new StringBuffer();
    boolean stop = generator.nextBoolean(); //NullPointerException here
    if(stop == true)
    {
        sb.append("y");
        getWhoozitYs();
    }
    return sb.toString();
}

private String getWhozit()
{
    StringBuffer sb = new StringBuffer();
    sb.append("x");
    sb.append(getWhoozitYs()); //NullPointerException here
    return sb.toString();
}

private String getWhatzit()
{
    StringBuffer sb = new StringBuffer();
    sb.append("q");
    boolean stop = generator.nextBoolean();
    if(stop == true)
    {
        sb.append("z");
    }
    else
    {
        sb.append("d");
    }
    sb.append(getWhozit()); //NullPointerException here
    return sb.toString();
}

private String getMultipleWhatzits()
{
    StringBuffer sb = new StringBuffer();
    sb.append(getWhatzit());
    boolean stop = generator.nextBoolean();
    if(stop == true)
    {
        sb.append(getWhatzit());
    }
    else
    {
        sb.append("");
    }
    return sb.toString();
}

public String generateBlurb()
{
    StringBuffer sb = new StringBuffer();
    sb.append(getWhozit());
    sb.append(getMultipleWhatzits());

    return sb.toString();
}

public static void main(String[] args)
{
    BlurbMaker blurbmaker = new BlurbMaker();

    Scanner scanner = new Scanner(System.in);
    System.out.print("How many blurbs would you like? ");

    int blurbNumber = scanner.nextInt();

    if(blurbNumber > 0)
        for(int i = 0; i < blurbNumber; i++){
            System.out.println("Blurb: " + blurbmaker.generateBlurb());
                            //NullPointerException on line above
        }
    else
        System.out.println("My work here is done.");

    scanner.close();
}//close main

}//close class 
```

我正在开发一个编程类项目，在尝试运行该程序后，我在此处的代码中列出的四行上得到了 NullPointerExceptions。我知道 NullPointerException 来自尝试访问为空的东西，但我不确定如何修复它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:26:06.180

在无参数构造函数中删除此行。

```
generator = null; 
```

您正在“重置”先前初始化的`Random`实例，并导致`NPE`在第一次尝试使用该实例的方法调用时抛出一个：

初始化的替代方法`Random` `generator`可能是：

```
private final Random generator; // no init

public BlurbMaker() {
   generator = new Random();
}

public BlurbMaker(Random iniGenerator) {
   generator = iniGenerator;
} 
```

这将`Random`仅在需要时创建一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:26:34.840

您将无参数构造函数调用到 BlurbMaker()，它将生成器初始化为 null。然后调用生成器上的方法，该方法为空。因此，NPE。

# android - 拨打电话，包括分机

> ID：15413355
> 
> 赞同：0
> 
> 时间：2013-03-14T15:25:01.730
> 
> 标签：android, iphone, titanium, phone-call

我一直在尝试使用各种方法从我的 Titanium Appcelerator 应用程序中拨打一个号码。问题是，那也应该拨一个分机。我尝试了“tel:1234567890,34”、“tel:1234567890p34”、“1234567890w34”等格式。我已经尝试过使用：

```
// method 1
var intent = Ti.Android.createIntent({
  action : Ti.Android.ACTION_CALL,
  data : phoneNumber
});
Ti.Android.currentActivity.startActivity(intent);

// method 2
Ti.Platform.openURL(phoneNumber); 
```

格式和方法的所有组合都不起作用。“p”被改写为“7”。使用逗号，逗号之后的所有内容都将被忽略。如何拨打包括分机在内的外拨电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:50:34.250

不确定它是否适用于 Android，但我知道在 iPhone 上，当我想用​​分机拨打电话时，我会使用 4 个逗号 (,,,,)

让我知道它是否有效我很好奇

示例：1-555-455-4443,,,,8888

*注意我使用的是原生 SDK（不是 Titanium Appcelerator）

# jquery - 引用 AJAX 加载的 DIV ID

> ID：15413364
> 
> 赞同：2
> 
> 时间：2013-03-14T15:25:24.200
> 
> 标签：jquery, ajax

我的网站上有一个“命令中心”栏，其中有一个登录/注销按钮、一个我的帐户按钮和一个消息按钮。如果用户未登录，则命令中心仅显示登录按钮。如果用户已登录，命令中心会显示注销、我的帐户和消息按钮。

当用户登录或注销时，我使用 jQuery AJAX 刷新命令中心。因此，当用户登录时，他/她的信息会发布到 php 页面，并且回调函数会刷新命令中心。我有另一个 jQuery AJAX 函数，当它感应到单击注销按钮（仅在用户登录后出现）时，它会发布到一个将用户注销的 php 页面。

由于注销按钮是通过 AJAX 加载的，并且我的注销功能在初始页面下载时加载，因此即使该功能引用注销按钮的 ID，注销功能也不会响应点击注销按钮。

让我的注销功能识别加载 AJAX 的注销按钮的最佳方法是什么？我最初的想法是在命令中心 div 上使用 mouseover 事件来封装我的注销功能，以便在用户登录并将光标移动到 AJAX 加载的命令中心后，该函数会根据当前的 HTML。缺点是每次用户将鼠标悬停在命令中心上时都会调用该函数，即使他们不想注销也是如此。

有没有更直接的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:29:15.597

你想要做的是使用jQuery的[`on()`](http://api.jquery.com/on/)功能。

代码可能如下所示：

```
$('body').on('click', '#log-out-button-id', function(){
    // logout code
}); 
```

本质上，您将事件附加到页面上不会更改的元素。出于性能原因，您应该尽可能使用最接近的稳定父元素。（在你的情况下，这可能是`'#command-center'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:29:32.590

您可以在（或者更确切地说，在您的命令中心）上使用 jQuery[`.on`](http://api.jquery.com/on/)函数`body`，将您的注销按钮作为选择器传递。这样，只要该按钮存在，它就会执行 - 无论它已经存在还是将来添加：

```
$("body").on("click", "#logout", function(event){
    // Your code
}); 
```

# sas - 如何使用 SAS 将 XML 转换为 SAS 数据集/Excel/CSV 文件

> ID：15413366
> 
> 赞同：2
> 
> 时间：2013-03-14T08:48:35.517
> 
> 标签：sas

如何使用 SAS 将 XML 文件转换为 SAS 数据集/Excel/CSV 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:34:29.790

不幸的是，您需要比这更多的信息，因为“XML”文件是一个非常通用的术语，例如“文本文件”。

SAS 会自动导入一些 XML 文件，如果您有 XML 映射，或者可以创建一个，或者 xml 文件的格式足够明显。

[http://support.sas.com/documentation/cdl/en/engxml/62845/HTML/default/viewer.htm#a002484784.htm](http://support.sas.com/documentation/cdl/en/engxml/62845/HTML/default/viewer.htm#a002484784.htm)了解更多详情。

即使使用地图，其他 XML 文件也可能难以阅读，尤其是当它们具有非常非表格的布局时。对于那些通常最简单的方法是使用数据步骤并将其作为文本文件读取，然后自行解析。极其简化的代码：

```
data want;
infile "myfile.xml" lrecl=100 pad truncover;
input @1 curline $100.;
if substr(curline,1,7)='<mytag>' then do;
  mytag = substr(curline,8,find('</',curline)-7);
end;
run; 
```

这显然真的很乱。更好的是使用正则表达式解析出来；无论哪种方式，它都必须为您的 xml 文件高度定制，因为如果它不是表格的，显然您将不得不做一些工作。如果你必须走这条路，你可以用谷歌搜索一些解决方案——但先试试 XML 地图。如果您的安装包括 SAS XML Map 实用程序（一个单独的程序），请尝试运行它；如果没有，请查看您的站点管理员是否可以为您安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T13:44:13.000

对于 XML->dataset 也可以这样做：

```
libname cata xml "path\name.xml";

data datasetname;
set cata.datasetname;
run; 
```

# android - 在画布绘图上设置触摸侦听器

> ID：15413370
> 
> 赞同：3
> 
> 时间：2013-03-14T15:25:39.607
> 
> 标签：android, canvas, drawing, ontouchlistener

假设我在画布上绘制了位图图像或简单的圆圈。如何设置 OnTouchListener 以检查我的绘图是否被触摸？由于我将在画布上绘制多个圆圈，因此我希望每个圆圈都有一些唯一的 ID，以便我可以相应地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:01:06.063

当您触摸屏幕时，获取 x 和 y 坐标。你已经知道圆心了。

```
 //x and y are co-ordiantes when touched.
 //center_x and center_y are co-ordinates of the center of the circle.
 //R is the radius of the cirlcr      

 float dx = Math.abs(x-center_x);
 float dy = Math.abs(y-center_y);
 float R = radius ;//radius of circle.

 boolean checkDistance(float dx,float dy,float R)
 {
 if(dx>R)
 {
  return false;//outside
 }
 else if(dy>R)
 {
 return false;//
 }
 else
 {
 return true;
 }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T14:14:00.870

为什么你没有得到用户绘图坐标并将它们与你的圆坐标匹配..

如何捕捉用户绘图坐标：

```
int x = (int) event.getX();
int y = (int) event.getY(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:59:11.983

你不能轻易地用画布做到这一点。您应该自己处理触摸事件，并根据坐标/大小/z-index 检查您触摸的圆圈。

但是，如果每个圆圈都是一个视图，您可以让事情变得更容易。在这种情况下，您将能够使用标准的 android 触摸事件侦听器。对于圆形，您应该创建自定义视图类，该类在处理触摸时会考虑圆形。

# c++ - 将项目添加到列表框的按钮错误

> ID：15413374
> 
> 赞同：0
> 
> 时间：2013-03-14T15:26:00.413
> 
> 标签：c++, visual-studio, mfc, dialog, listbox

所以我用c++在mfc对话框中做了一个简单的程序，它有一个添加按钮、一个删除按钮、一个列表框和一个编辑框。我希望能够在编辑框中输入一些内容，然后单击添加按钮，它将被添加到列表框中。但我收到此错误：

错误 1 ​​错误 C2679：二进制“=”：未找到采用“CEdit”类型的右侧操作数的运算符（或没有可接受的转换）

这是添加按钮的代码：

```
void CtestDlg::OnBnClickedMybuttonadd()
{
    CString str;
    UpdateData();
    str = m_myEditBox;
    UpdateData(FALSE);
    m_myListBox.AddString(str);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:33:21.683

m_myEditBox 的类型是 CEdit。

您不能使用 = 运算符从 CEdit 对象分配字符串。

尝试这个：

```
m_myEditBox.GetWindowText(str); 
```

代替：

```
str = m_myEditBox; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:31:14.583

没有现成的转换 b/n`CEdit`到`CString`，请使用这个

```
int lc = m_myEditBox.GetLineCount();    

CString strLine;
CStringArray arr;

for (int i = 0; i < lc ; i++)
{
    int len = m_myEditBox.LineLength(m_myEditBox.LineIndex(i));
    m_myEditBox.GetLine(i, strLine.GetBuffer(len), len);
    strLine.ReleaseBuffer(len);

    m_myListBox.Add(strLine);
} 
```

# extjs - 滑动/动画 Extjs 窗口

> ID：15413379
> 
> 赞同：2
> 
> 时间：2013-03-14T04:44:43.503
> 
> 标签：extjs, jquery

我正在使用 Geoext、OpenLayers 和 ExtJS。在工具栏按钮中，我尝试使用 ExtJS 在单击时显示窗口。我现在想在出现而不是直接出现之前动画/滑动这个窗口。

我也意识到知道 jQuery 是有用的。但是我应该如何实现以下代码？

我的点击代码如下：

```
mainWindow = new Ext.Window({
    title: 'Company Information',
    collapsible: true,
    maximizable: true,
    closeAction: 'close',
    renderTo:Ext.getBody(),
    //renderTo:"div",
    bodyStyle: 'padding:10 10px 5;',
    width: 696,
    height: 445,
    enableTabScroll : true,
    frame: true,
    // layout: 'fit',
    plain: true,
    bodyStyle: 'padding:10px;',
    buttonAlign: 'center',
    items: [gridPanel],
});

mainWindow.show(); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:13:01.077

看看 Ext FX 和 Ext Element ( [http://www.extjs.com/deploy/dev/docs/?class=Ext.Element](http://www.extjs.com/deploy/dev/docs/?class=Ext.Element) )

# c# - 发布 Windows 窗体应用程序 - 引用错误

> ID：15413380
> 
> 赞同：0
> 
> 时间：2013-03-14T15:26:20.633
> 
> 标签：c#, publishing, windows-forms-designer

有没有办法在 c# 中发布一个 Windows 窗体应用程序，它可以在一个文件中包含所有 dll 引用以及所有数据集？

每次我尝试发布应用程序时，都会收到一条消息显示：

> 例外：缺少参考

任何帮助表示感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:43:06.073

您可以使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17630)合并程序集：

> ILMerge 是一个用于将多个 .NET 程序集合并到一个 .NET 程序集的实用程序。它适用于可执行文件和 DLL，并带有几个用于控制输出处理和格式的选项。

我猜您所指的数据集实际上是强类型`System.Data.DataSet`类。它们可能会被编译并包含在它们所属的程序集中。

# apache-flex - Flex 滑块 2 隐藏控件Nav

> ID：15413387
> 
> 赞同：1
> 
> 时间：2013-03-14T15:26:41.893
> 
> 标签：apache-flex, navigation, slider

我正在使用 Flexslider2 并希望将控制导航隐藏在幻灯片下方（小点），有人知道这是否可能。我已经设法用 ControlNav - False 关闭了这些点，但那里仍然保留了一个空框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:30:22.413

查看插件，这应该可以满足您的需求：

```
$('.flexslider').flexslider({
    controlNav: false
}); 
```

# android - 应用程序加载但不运行

> ID：15413392
> 
> 赞同：0
> 
> 时间：2013-03-14T15:26:51.247
> 
> 标签：android

我有一些空闲时间，并决定尝试 Android 开发。

使用 adt 包将 ADT 加载到 Windows 7 中。创建了一个名为 FirstApp 的空应用程序。

定义了一个名为 FirstApp 的 Android 4.2.2 虚拟设备。启动按比例缩放的设备。从 ADT 屏幕选择“运行”。....在控制台上得到以下内容...

```
Android Launch!
adb is running normally.
Performing com.example.firstapp.MainActivity activity launch
Automatic Target Mode: Preferred AVD 'firstapp' is available on emulator 'emulator-5554'
Uploading FirstApp.apk onto device 'emulator-5554'
Installing FirstApp.apk...
Failed to install FirstApp.apk on device 'emulator-5554!
(null)
Launch canceled! 
```

我不知道下一步该做什么。

吉姆·默里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:27:30.380

退出所有模拟器并重新启动项目！Window -> Preferences 然后它在Android下的DDMS中并在ADB连接上放置10000并尝试重新启动！

# python - 图形 matplotlib 以显示直方图箱中的总计数

> ID：15413397
> 
> 赞同：4
> 
> 时间：2013-03-14T15:27:04.590
> 
> 标签：python, matplotlib

我正在尝试显示直方图。下面的数组是直方图每个单独 bin 的计数。

```
binVals = [0,5531608,6475325,1311915,223000,609638,291151,449434,1398731,2516755,3035532,2976924,2695079,1822865,1347155,304911,3562,157,5,0,0,0,0,0,0,0,0,0] 
```

我该怎么做呢？我尝试使用此代码

```
import matplotlib.pyplot as plt
binVals = [0,5531608,6475325,1311915,223000,609638,291151,449434,1398731,2516755,3035532,2976924,2695079,1822865,1347155,304911,3562,157,5,0,0,0,0,0,0,0,0,0]
plt.hist(binVals, bins=len(binVals), color='r', alpha=0.5, label='Values')
plt.title("Demo Histogram")
plt.xlabel("Value")
plt.ylabel("Frequency")
plt.legend()
plt.show() 
```

这将返回与此类似的图像![演示直方图图像](../Images/14af51289cf50eaa1ccb00e098364e06.png)

不过，这是关闭的，因为 bin 0 和 19 到 27 在`binVals`. 上图中的零值不在我期望的位置。

我期待类似的东西

![预期图像](../Images/7cbffd18314e43eb64f20ebe8b45872c.png)

如何修改我的代码以获得这种类型的结果？

作为一个额外的问题，在预期图表的底部有很好地标记的垃圾箱。这可以用 matlibplot 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:14:32.140

我认为你在策划错误的事情。Matplotlib 将计算直方图本身。它现在绘制出您有 14 个值介于 0 和 250,000 之间的 bin，3 个值介于 250,000 和 500,000 之间的图，等等。如果您自己计算直方图，请使用 bar() 图，或者让 Matplotlib 为您计算直方图。

对于刻度标签，使用`set_xticklabels(["Under 600", "600-700",...], rotation = "vertical")`

（我将评论作为答案，因此可以将其标记为已回答）

# c++ - 如何通过在 C++ 中单击将文件夹名称发送到函数

> ID：15413398
> 
> 赞同：1
> 
> 时间：2013-03-14T15:27:07.597
> 
> 标签：c++, file-io

我遇到了一个比喻性的障碍。我有一个程序，当你输入他们的名字时，它会加载文本文件。但我想更进一步，这是我目前拥有的：

```
string name;  
ifstream save;    
cout<<"\nPlease choose a save file: ";  
cin>>name;  
save.open(string(name+".txt").c_str()); 
```

我想要的是当程序到达这一点时，它会打开 Windows 资源管理器，然后单击文件，然后将文件名发送到`ifstream.open()`. 我不确定它是否可能，但我愿意付出任何努力让它发挥作用。任何帮助是极大的赞赏。

PS：如果有任何令人困惑的地方，请说出来并尝试清除它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:30:24.963

我假设资源管理器是指 Windows 的打开文件对话框。使用[GetOpenFileName()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646927%28v=vs.85%29.aspx)函数。这是一个 WINAPI 函数。

它在 windows.h 中定义，因此您需要包含它（添加`#include <windows.h>`到您的程序中）。

# javascript - 工作，但很慢...用 JS 调用 XML，然后将 JS 函数添加到 XML 中的文本

> ID：15413406
> 
> 赞同：1
> 
> 时间：2013-03-14T15:27:18.887
> 
> 标签：javascript, xml, flash

我正在使用 JS 从 XML 文件中调用文本，然后将 JS 函数添加到该文本中。但是，响应非常非常缓慢。有什么办法可以改善这一点吗？

我有两个 XML 文件……一个是我创建的，另一个来自使用 flash 程序创建的数据库。我希望突出显示此 Flash 程序的某些功能。我已经完成了以下三种方式之一：

1.  我手动输入文本并使用 JS 在鼠标悬停时突出显示 flash 功能（速度很棒，但我必须在 html 页面上手动输入所有文本，并且必须为每个 flash 文件执行此操作（我是做 50 多个）另外，数据会经常变化，最好有一个单独的数据库文档，而不是单独进入每个 flash 文件。

2.  我在包含 JS 的 XML 文件中创建了一个标签，当我从页面调用它时，整个列表会立即填充，但它非常慢，以至于每个文本的每次鼠标悬停都需要几秒钟）

3.  我用 JS 调用 XML 文本并为鼠标悬停添加另一个 JS 函数。这也有效，但速度很慢（但没有#2那么慢，但仍然很慢）并且JS很长，因为我必须单独调用每个文本，而不是像我在#2中那样填充整个列表

以下是 2 和 3 的示例：

**#2 的 XML**

```
<VIRGINIAREP>
        <DISTRICTS>
            <STATE>Virginia</STATE>
            <DISTRICT>1</DISTRICT>  
            <REPRESENTATIVE>Robert J. Wittman</REPRESENTATIVE>
            <REPWEB>http://wittman.house.gov' onMouseOver='highlight1()' onMouseOut='highlight_clear()'</REPWEB>
            <PARTY>R</PARTY>
        </DISTRICTS>
        <DISTRICTS>
            <STATE>Virginia</STATE>
            <DISTRICT>2</DISTRICT>  
            <REPRESENTATIVE>Scott Rigell</REPRESENTATIVE>
            <REPWEB>http://rigell.house.gov' onMouseOver='highlight2()' onMouseOut='highlight_clear()'</REPWEB>
            <PARTY>R</PARTY>
        </DISTRICTS>
        <DISTRICTS>
            <STATE>Virginia</STATE>
            <DISTRICT>3</DISTRICT>  
            <REPRESENTATIVE>Robert C. Scott</REPRESENTATIVE>
            <REPWEB>http://www.house.gov/scott/' onMouseOver='highlight3()' onMouseOut='highlight_clear()'</REPWEB>
            <PARTY>D</PARTY>
        </DISTRICTS>..... etc. 
```

**#2 的 JS**

```
<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","113CongressC.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='0'>");
var x=xmlDoc.getElementsByTagName("DISTRICTS");
for (i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("DISTRICT")[0].childNodes[0].nodeValue + " -");
  document.write("</td><td>");
  document.write("<a TARGET='_blank' href='" +  x[i].getElementsByTagName("REPWEB")[0].childNodes[0].nodeValue + "'>" + x[i].getElementsByTagName("REPRESENTATIVE")[0].childNodes[0].nodeValue) + "</a>";
   document.write("</td><td>");
  document.write("(" + x[i].getElementsByTagName("PARTY")[0].childNodes[0].nodeValue + ")");
  document.write("</td></tr>");
  }
document.write("</table>");

</script> 
```

**亮点功能**

```
function highlight() {          
            theMap.features('DISTRICT="1"').highlight(
                {visible: true, fillColor: "#FFFF00", fillAlpha: 1.0}  
            );
        } 
```

**#3 的 XML**

```
<VIRGINIAREP>
            <DISTRICTS>
                <STATE>Virginia</STATE>
                <DISTRICT>1</DISTRICT>  
                <REPRESENTATIVE>Robert Wittman</REPRESENTATIVE>
                <REPWEB>http://wittman.house.gov</REPWEB>
                <PARTY>R</PARTY>    
            </DISTRICTS> ...etc. 
```

**#3 的 JS**

```
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","113CongressC.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;  

x=xmlDoc.getElementsByTagName("DISTRICTS");
i=0;

function displayREPS()
{
rep="<a target = '_blank' onMouseOver='highlight()' onMouseOut='highlight_clear()' href = '" + (x[0].getElementsByTagName("REPWEB")[0].childNodes[0].nodeValue) + "'>" +(x[0].getElementsByTagName("REPRESENTATIVE")[0].childNodes[0].nodeValue) + "</a>";
district=(x[0].getElementsByTagName("DISTRICT")[0].childNodes[0].nodeValue);
party=(x[0].getElementsByTagName("PARTY")[0].childNodes[0].nodeValue);

//2 
rep1="<a target = '_blank' onMouseOver='highlight1()' onMouseOut='highlight_clear()' href = '" + (x[1].getElementsByTagName("REPWEB")[0].childNodes[0].nodeValue) + "'>" +(x[1].getElementsByTagName("REPRESENTATIVE")[0].childNodes[0].nodeValue) + "</a>";
district1=(x[1].getElementsByTagName("DISTRICT")[0].childNodes[0].nodeValue);
party1=(x[1].getElementsByTagName("PARTY")[0].childNodes[0].nodeValue);
//3
rep2="<a target = '_blank' onMouseOver='highlight2()' onMouseOut='highlight_clear()' href = '" + (x[2].getElementsByTagName("REPWEB")[0].childNodes[0].nodeValue) + "'>" +(x[2].getElementsByTagName("REPRESENTATIVE")[0].childNodes[0].nodeValue) + "</a>";
district2=(x[2].getElementsByTagName("DISTRICT")[0].childNodes[0].nodeValue);
party2=(x[2].getElementsByTagName("PARTY")[0].childNodes[0].nodeValue); 
```

....ETC。

```
//TXT

txt0=district + " -  " + rep + "&nbsp; ("+ party + ")";
txt1=district1 + " -  " + rep1 + "&nbsp; ("+ party1 + ")";
txt2=district2 + " -  " + rep2 + "&nbsp; ("+ party2 + ")";
txt3=district3 + " -  " + rep3 + "&nbsp; ("+ party3 + ")";
txt4=district4 + " -  " + rep4 + "&nbsp; ("+ party4 + ")";
...etc

document.getElementById("showREPS").innerHTML=txt0 + "<br>" + txt1 +  "<br>" + txt2 + "<br>" + txt3 + "<br>" + txt4 + "<br>" + txt5 + "<br>" + txt6 + "<br>" + txt7 + "<br>" + txt8 + "<br>" + txt9 +  "<br>" + txt10 + "<br>";
}
</script>

</head>
<body onload="displayREPS()">

<div id='showREPS'></div> 
```

我也试过：`<REPWEB><![CDATA[<a target='_blank' href='http://wittman.house.gov' onMouseOver='highlight0()' onMouseOut='highlight_clear()'>]]></REPWEB>`对于 XML

关于如何以更快的速度更好、更有效地做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T15:08:42.703

我发现 COM 代码中的 XHR 对象存在同样的问题。当我使用**responseXML**方法而不是**responseText**时，xml 文档在查找具有 XPath 查询的节点时非常慢。我正在使用 MSXML6。

*   使用**responseText**获取整个文本
*   创建一个 DOM 文档
*   通过新 DOM 文档的**loadXML(string)**方法加载 xml

瞧！真的更快！我不知道为什么 XMLHTTPRequest 在**responseXML**上创建什么样的 DOM 文档来获得如此缓慢的 DOM 文档，但创建一个新文档确实更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:31:46.770

我会考虑使用 JSON 格式而不是 XML。传输速度要快得多（字节数更小），JSON 的解析速度也会更快。

# jquery - 在 Jquery 中为移动设备设置图标滑块

> ID：15413412
> 
> 赞同：1
> 
> 时间：2013-03-14T15:27:30.690
> 
> 标签：jquery, jquery-mobile, slider, flexslider

我想为带有 4 个图标和下方小圆圈的移动滑块创建一个，当每 4 个图标更改时（也应与 spiwe 一起使用），在 **FlexSlider** [http://flexslider.woothemes.com/index 中找到并示例。 html](http://flexslider.woothemes.com/index.html)

在我的 index.html 页面中构建图像列表并添加 CSS 文件

```
<div class="flexslider">
  <ul class="slides">
    <li>
      <img src="slide1.jpg" />
    </li>
    <li>
      <img src="slide2.jpg" />
    </li>
    <li>
      <img src="slide3.jpg" />
    </li>
    <li>
      <img src="slide4.jpg" />
    </li>
  </ul>
</div> 
```

index.html 中的 javaScript 函数

```
 $(document).ready(function () {
                  $('.flexslider').flexslider({
                      animation: "slide",
                      animationLoop: false,
                      itemWidth: 80,
                      itemMargin: 5
                  });
              }); 
```

但它不像在网站上那样工作，它设置了一个没有任何图像的白色行......我的错误在哪里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:14:16.747

**`Document ready`****`jQuery Mobile`**由于**`jQuery Mobile`**处理页面加载的方式，不能与一起使用。

要了解有关页面事件的更多信息，其与文档准备的区别请查看此**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**或在**[此处](https://stackoverflow.com/a/14469041/1848600)**找到。

工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/CPpBD/](http://jsfiddle.net/Gajotres/CPpBD/)

基本上你所要做的就是改变这个：

```
$(document).ready(function () {
    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: false,
        itemWidth: 80,
        itemMargin: 5
    });
}); 
```

对此：

```
$(document).on('pageshow', '#index', function(){       
    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: false
    });
}); 
```

**`pageshow`**您可以在我在请求此答案时发布的链接中阅读有关事件的更多信息。

# git - 无法在 jenkins 中结帐外部 git repo

> ID：15413414
> 
> 赞同：1
> 
> 时间：2013-03-14T15:27:39.613
> 
> 标签：git, ssh, openshift

我在 openshift 上有詹金斯。我可以进行以下操作，并且可以。

```
[jenkins-<USER>.rhcloud.com data]\> ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i /var/lib/openshift/<NUMBERED DIRECTORY>/app-root/data/.ssh/jenkins_id_rsa git@github.com
Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
PTY allocation request failed on channel 0
Hi <USER>! You've successfully authenticated, but GitHub does not provide shell access.
          Connection to github.com closed. 
```

所以它确实连接到 github ......即使我从 shell 克隆了它。

但是，当我尝试将 repo 添加到 jenkins 作业时，它会出现以下错误。它是一个私人回购。

```
Failed to connect to repository : Command "git ls-remote -h git@github.com:<USER>/test.git HEAD" returned status code 128:
stdout:
stderr: Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:38:03.477

Jenkins 可能正在运行，`jenkins`并且您接受了主机密钥，因为`<USER>`您可以通过将命令添加`whoami`到构建步骤来确认这一点，并确认用户`jenkins`与 shell 中的用户不同。

一种解决方案是登录`jenkins`并接受 github 的密钥。

另一种是从github的~/.ssh/known_hosts中复制这行，复制到jenkins文件夹~jenkins/.ssh/known_hosts中的known_hosts中。

# php - Yii - Cdbcriteria - 在有关系的条件之间选择 where 运算符

> ID：15413416
> 
> 赞同：2
> 
> 时间：2013-03-14T15:27:44.880
> 
> 标签：php, mysql, yii

我遇到了以下问题。我只想显示插入任务本身或负责任务的人的任务，为此，我有以下数据库模式：

table Funcionario (员工表) = id, name, etc...

表 TarefasGerais（任务表）= id，id_funcionario（谁插入它）等...

table TarefasResponsaveis（负责员工表）= id，id_tarefa（tarefas gerais id），id_funcionario（员工id）

在我模型的搜索方法中，我执行了以下操作：

```
 $criteria->with = array('Responsaveis' => 
        array('condition' => 'Responsaveis.id_funcionario = ' . Yii::app()->user->dados->id));
    $criteria->condition = 'id_funcionario_lancamento = ' . Yii::app()->user->dados->id; 
```

但它会生成以下 SQL：

```
 SELECT COUNT(DISTINCT `t`.`id`) FROM `tbl_tarefas_gerais` `t` LEFT OUTER JOIN `tbl_tarefas_gerais_responsaveis` `Responsaveis` ON
    (`Responsaveis`.`id_tarefa` = `t`.`id`) WHERE (id_funcionario_lancamento =
    3) AND (Responsaveis.id_funcionario = 3) 
```

如您所见，它使用“AND”运算符，但我需要它在 where 部分使用“OR”运算符。

我试过了 ：

```
 $criteria->with = array('Responsaveis' =>
        array('condition' => 'Responsaveis.id_funcionario = ' . Yii::app()->user->dados->id, 'operator' => 'OR')); 
```

但它没有改变任何东西。

有谁知道如何处理？

干杯 0/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:47:31.070

尝试`mergeWith`两个标准。

将您的逻辑分解为两个标准并将它们合并在一起

```
$criteria->with = array('Responsaveis' => 
    array('condition' => 'Responsaveis.id_funcionario = ' . Yii::app()->user->dados->id));
$criteria2->condition = 'id_funcionario_lancamento = ' . Yii::app()->user->dados->id;
$criteria->mergeWith($criteria2); 
```

完整示例：

```
$criteria2 = new CDbCriteria();
$criteria2->addInCondition('startDate', array(null));
$criteria2->addBetweenCondition('startDate', date('Y-m-d'), '1950-01-01', 'OR');

$criteria3 = new CDbCriteria();
$criteria3->addInCondition('stopDate', array(null), 'AND');
$criteria3->addBetweenCondition('stopDate', '1990-01-01', date('Y-m-d'), 'OR');

$criteria3->mergeWith($criteria2); 
```

# c - fgetc函数为什么要加回车

> ID：15413417
> 
> 赞同：2
> 
> 时间：2013-03-14T15:27:55.807
> 
> 标签：c

我正在读取一个由字符组成的 TXT 文件，并将这些字符的 ASCII 值写入 output.txt。

每当我在 ASCII 表（换行）中读取字符编号 10 时，我在输出文件中得到 13 然后 10 而不是 10。（13 表示 ASCII 回车）

这是我的代码：

```
 in_file = fopen(FILE_NAME, "rb");
...
  while((ch = fgetc(in_file)) != EOF){
    count++;
    fprintf(p, "%d\n", ch);
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:31:16.780

输入文件已使用 Windows 换行符格式化，即`\r\n`. UNIX 文本文件只有`\n`. 因此，您的输出是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:45:19.707

字符 10 是换行符 ( `\n`)；字符 13 是回车符 ( `\r`)。Windows 行终止符通常是回车后跟换行符。在 UNIX/Linux 上，行终止符通常只是一个换行符。在 Mac OS 上，它曾经只是一个回车 IIRC，但 OS X 可能不再是这种情况（因为它是 UN*X 在引擎盖下）。

如@jazzbassrob 所述，该文件可能是在 Windows 系统上创建的。
或者，如果您在 Windows 系统上运行，我相信 I/O 库函数的某些实现会将 UNIX 风格的行终止符转换为 Windows 风格。

因此，正如其他海报所指出的那样，输出可能是正确的。

编辑：
尝试`b`从调用中删除`fopen()`; 以二进制模式打开文件。在“文本”模式下——即`fopen(FILE_NAME, "r")`——`fgetc()`可以丢弃回车。

编辑 2：在文本模式下，行终止符应该“规范化”为换行符（正如@DevSolar 指出的那样）。另一方面，如果您以二进制模式打开文件，则不应假设或依赖特定字符作为行终止符。（除非您控制输入文件的创建，否则您特别关心从一种格式转换为另一种格式等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:49:07.387

您读取回车符（`0x0d`），因为您以二进制模式读取文件`"rb"`，这样 fgetc() 将读取每个字符，包括`0x0d`后跟`0x0a`（回车符）。

If you open the file as text `"r"`, fgetc() will skip the `0x0d` if followed by `0x0a` and display only `0x0a`.

# xpath - XPath，根据中的相关节点进行过滤

> ID：15413421
> 
> 赞同：0
> 
> 时间：2013-03-14T15:28:02.103
> 
> 标签：xpath

我已经阅读了我能找到的所有内容，但还没有找到让它工作的方法。我正在尝试根据节点或其父节点的值从特定节点查询总和。一些节点可能满足具有正确名称的基本要求，但它们的父节点可能不满足，所以我需要忽略这些。在 SQL 术语中，我会使用 EXISTS 或 LIKE 子句来解决这个问题。

我想做的是

```
 SUM    ServiceAmounts 
   FROM   ChargeData elements 
   WHERE  ChargeDescription = 'subTotal-DistrubutionCharges' 
          AND Detail.ServiceType = 'electric' 
          AND NOT 
          (
              ChargeData has a sibling with ChargeDescription = 'Leased Outdoor Lighting' - the entire detail node should be ignored that contains the ChargeData element with 'Leased Outdoor Lighting'. 
          ) 
```

如果有价值的话，我的 XSL 版本是 1.0。

源 XML：

```
 <Source>
      <Detail>
        <ServiceType>electric</ServiceType>
        <Charges>
           <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>19.8</ServiceAmount>
            <ChargeDescription>7% Sales Tax</ChargeDescription>
            <ChargeID>sales_tax</ChargeID>
          </ChargeData>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>282.8</ServiceAmount>
            <ChargeDescription>E-2 Demand</ChargeDescription>
            <ChargeID>usage_charge</ChargeID>
          </ChargeData>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>165.91</ServiceAmount>
            <ChargeDescription>7% Sales Tax</ChargeDescription>
            <ChargeID>sales_tax</ChargeID>
          </ChargeData>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>2370.15</ServiceAmount>
            <ChargeDescription>E-2 Commercial</ChargeDescription>
            <ChargeID>usage_charge</ChargeID>
          </ChargeData>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>2838.66</ServiceAmount>
            <Quantity>0</Quantity>
            <ChargeDescription>subTotal-DistributionCharges</ChargeDescription>
          </ChargeData>
        </Charges>
      </Detail>
      <Detail>
        <ServiceType>electric</ServiceType>
        <Charges>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>2.57</ServiceAmount>
            <ChargeDescription>7% Sales Tax</ChargeDescription>
            <ChargeID>sales_tax</ChargeID>
          </ChargeData>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>36.8</ServiceAmount>
            <ChargeDescription>Leased Outdoor Lighting</ChargeDescription>
            <ChargeID>usage_charge</ChargeID>
          </ChargeData>
          <ChargeData>
            <AllowanceChargeInd>C</AllowanceChargeInd>
            <ServiceAmount>39.37</ServiceAmount>
            <Quantity>0</Quantity>
            <ChargeDescription>subTotal-DistributionCharges</ChargeDescription>
          </ChargeData>
        </Charges>
      </Detail>
    </Source> 
```

我的 xsl，好吧，我已经尝试了多次并一直陷入死胡同：

```
 sum(//ChargeData[not(contains(ChargeDescription,'Leased Outdoor Lighting')) 
    and not(contains(Detail/Charges/ChargeData/ChargeDescription, 'subTotal'))  
    and ancestor::Detail/ServiceType='electric']/ServiceAmount) 
```

或者

```
 sum(//ChargeData[contains(ChargeDescription, 'subTotal-DistributionCharges') 
    and ancestor::Detail/ServiceType='electric']/ServiceAmount)
    -
    sum(//ChargeData[contains(ChargeDescription, 'Leased Outdoor Lighting') 
    and ancestor::Detail/ServiceType='electric']/ServiceAmount) 
```

也许这是不可能的。我不能做的一件事是更改架构/数据结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:49:54.433

我对您的要求有点困惑，并且您的样本标签不匹配（`<Source>` `</Bill>`）

这将选择您的样本中我认为符合您的条件的单个 ChargeData 元素

```
Detail
 [ServiceType="electric"]
 [not(Charges/ChargeData/ChargeDescription[.="Leased Outdoor Lighting"])]
 /Charges/ChargeData[ChargeDescription="subTotal-DistributionCharges"] 
```

**解释**

*   `Detail`
    选择详细子元素
*   `[ServiceType="electric"]`
    仅选择具有值为“electric”的子 ServiceType 元素的 Detail 元素
*   `[not(Charges/ChargeData/ChargeDescription[.="Leased Outdoor Lighting"])]`
    排除提供了匹配排除字符串的后代 ChargeDescription 的 Detail 元素
*   `/Charges/ChargeData[ChargeDescription="subTotal-DistributionCharges"]`
    在过滤后的 Detail 元素下方，选择 ChargeData，其中提供了一个子 ChargeDescription 匹配字符串

所以

```
sum(
 Detail
 [ServiceType="electric"]
 [not(Charges/ChargeData/ChargeDescription[.="Leased Outdoor Lighting"])]
 /Charges/ChargeData[ChargeDescription="subTotal-DistributionCharges"]/ServiceAmount
) 
```

产量

```
2838.6599999999999 
```

# excel - 消息框 vba

> ID：15413422
> 
> 赞同：1
> 
> 时间：2013-03-14T15:28:01.950
> 
> 标签：excel, vba

请帮助我更正以下 Excel 2007 的 VBA 代码。有人在适合我需要的论坛之一中为我提供了此代码。但是我在运行这段代码时遇到了一些问题。由于我不是程序员，因此无法纠正。所以请帮助克服这个问题。

问题是....消息从头到尾不断弹出。例如：如果单元格“P7”的值达到 0 到 1 以上，我会收到弹出消息，这很好。但有时单元格的值会在 0 以上波动，例如从 1 到 2、2 到 2.5 或 3....... 等等，因为单元格值是从其他单元格的计算中得出的（实时数据）。因此，对于单元格值的每次连续增加，我都会收到弹出消息。只有当单元格值超过 0 时才会弹出它，但不会出现从 0.5 到 1、1 到 2、2 到 2.5 或 3 的每一个进一步的增量..... 对于上述问题，我注意到，如果例如，单元格值“P7”超过 0 到 1.5 并停留在那里，随后“P8”或“P9”或两者的单元格值达到 0 以上，

以下是供您参考的代码。

```
Private Sub Worksheet_Calculate() 
    'Dimension variables
    Dim c As Range, Str1 As String

    'Set up a range to loop thru
    For Each c In Range("P7:P77,S7:S77")
        'Test if that cell contains a number >0
        If IsNumeric(c.Value) And c.Value > 0 Then
            'Which column are we in to calculate
            'The offset to column U and decide whether
            'to use Buy or Sell as our string
            Select Case c.Column
                Case Is = 16
                    Str1 = "Buy "
                    oset = 5
                Case Is = 19
                    Str1 = "Sell "
                    oset = 2
            End Select

           'Popup the message box
            MsgBox Str1 & c.Offset(, oset)
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:05:26.993

首先，我也不是程序员，但是这里希望对编码有一定程度的理解。为了解决这个问题，它将超越我担心的第一个基础知识。考虑到这一点，这是我对您问题的回答。

通过做两件事来解决这个问题：

1.  在更改之前存储范围的状态
2.  有一个状态表明您已经在此检查中，因此不希望再次激活它

**PART 1 存储状态**

**通过将这些单元格复制到未使用的工作簿的一部分或将它们作为公共变量存储在 de VBA 代码中，将您检查的范围**的状态存储在同一子例程中****

 **然后除了检查之外，`If IsNumeric(c.Value) And c.Value > 0`您还需要检查上次存储它的数字是否<=0。因此，您的 If 语句将变为：

```
If IsNumeric(c.Value) And c.Value > 0 And d.Value <= 0 Then 
```

`d`你的复制单元在哪里。您需要确定这些单元格的放置位置（最好使用固定偏移量，或者在完全相同的单元格中的隐藏工作表上！

或者使用尺寸为 7 到 77、16 到 19 的公共变量 pubVar()，可以在 Workbook_Open 中确定尺寸：

```
If IsNumeric(c.Value) And c.Value > 0 And pubVar(c.Row(), c.Column())<= 0 Then 
```

现在，无论您采用哪种方式，都需要在脚本的末尾包含一个部分来实际存储单元格的状态，并使用 a`Range("P7:P77,S7:S77").Copy` 并将值粘贴到`Range(<where you want it>).PasteSpecial ...`. 或者通过将值分配给变量，例如`Variant`

**PART 2 拥有地位**

要**获得一个状态**，您可以使用一个公共变量，我会采用一个名为 booAlreadyChecking 的布尔值，并检查该布尔值 + 一个代码以更改其围绕当前代码的值：

```
If Not booAlreadyChecking Then 'Check if there is already another check running
    booAlreadyChecking = True 'Indicate that there is already a check so not another one will be started 
    For Each c In Range("P7:P77,S7:S77")
        ...
    Next
    booAlreadyChecking = False 'Enable a new check once this one is completed
End If 
```**

# java - java junit测试用例不一致

> ID：15413423
> 
> 赞同：0
> 
> 时间：2013-03-14T15:28:05.777
> 
> 标签：java, math, junit, primitive, testcase

我是新来的，大家好。我已经四处寻找有关此的一些信息，但没有找到任何东西，但我确信这是我缺少的一些简单的东西。我有一个简单的程序，我正在尝试测试它使用链表数字来执行算术。我的测试用例生成随机 int 值并使用原始加法、减法、乘法检查答案。我现在看到的问题是，当我重复运行测试时，原始操作返回不正确的结果，但我的链表数算术是正确的。内存中是否有可能在重复 junit 测试用例运行之间没有被清理的变量？有时它可以正常工作，有时却不能。

顺便说一句，我正在使用 Eclipse 和 JUnit 4。这是我的测试代码。谢谢你的帮助！

```
import static org.junit.Assert.*;
import java.util.Random;

import org.junit.Test;

public class NumberTest {

@Test
public void testRandomIntAddition1() {
    Random generator = new Random();
    int i = generator.nextInt();
    int j = generator.nextInt();
    Number a = new Number(""+i);
    Number b = new Number(""+j);
    Number sum = a.add(b);
    System.out.printf("The first number is %d\n", i);
    System.out.printf("The second number is %d\n", j);
    System.out.printf("The primative sum is %d\n", i + j);
    System.out.printf("The Number sum is %s\n\n", sum.toString());
    assertEquals(sum.toString(),""+ (i+j));
}

@Test
public void testRandomIntSubtraction1() {
    Random generator = new Random();
    int i = generator.nextInt();
    int j = generator.nextInt();
    int k = i - j;
    Number a = new Number(""+i);
    Number b = new Number(""+j);
    Number diff = a.subtract(b);
    System.out.printf("The first number is %d\n", i);
    System.out.printf("The second number is %d\n", j);
    System.out.printf("The primative diff is %d\n", k);
    System.out.printf("The Number diff is %s\n\n", diff.toString());
    assertEquals(diff.toString(),"" + k);
}
} 
```

下面的示例输出显示了原始减法的错误结果：

```
The first number is -504267212
The second number is 454054464
The primitive sum is -50212748
The Number sum is -50212748

The first number is 1820929887
The second number is -1488686395
The primitive diff is -985351014
The Number diff is 3309616282 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:53:31.483

除了您的数字溢出的事实之外，您可能还想查看 JUnit 的`Parameterized`类来运行这样的测试。这样，您可以生成随机数对列表，并将它们用于加法和减法测试。它还允许您轻松更改测试数量，并有单独的失败而不是单个失败。

```
@RunWith(Parameterized.class)
public class NumberTest {
    static int trials = 100;
    static int MAX_VALUE = 1 << 30; // To prevent overflow

    @Parameters
    public static Collection<Object[]> randomVals() {   
        Random rnd = new Random();              
        List<Object[]> stuff = new LinkedList<>();
        for( int a = 0; a < trials; a++ ) {
            stuff.add(new Object[] {rnd.nextInt(MAX_VALUE), rnd.nextInt(MAX_VALUE)});
        }
        return stuff;
    }

    int i, j;

    public Number(int i, int j) {
        this.i = i; this.j = j;     
    }

    // Your tests here, using i and j above.

} 
```

# java - 飞路集成到现有系统中

> ID：15413429
> 
> 赞同：2
> 
> 时间：2013-03-14T15:28:16.870
> 
> 标签：java, database, spring, database-migration, flyway

我们正在考虑将 flyway 集成到我们的系统中，因为它似乎是一种以有效方式管理数据库迁移的好工具。

但是，我不太确定如何进行：

我们有三个不同的数据库

1.  生产环境（MySQL）
2.  测试环境（MySQL）
3.  单元测试（H2 内存）

它们都包含不同的数据（不同的用户等）。数据库之间没有共同的数据（在flyway页面上这称为参考数据），只有结构应该保持不变。

看看网站，我的理解是这样进行的：

1.  我们必须从生产环境中提取模式版本并将其保存在 V1__BASE_version.sql 等文件中。我会这样做，例如：

    mysqldump -d -u 用户名 -p 密码 -h 主机名 dbname

2.  我们通过获取结构的转储并将其与生产系统中的结构进行比较来确保 ddl 与测试环境的匹配（从差异开始，然后在不清楚的地方手动进行）。万一我们发现任何差异，我们通过更改用于测试或实时的 db 结构来摆脱它们（取决于更有意义的方式）。

3.  我们使用主页描述的初始版本的数据初始化所有数据库。对于我不同的数据库，我使用不同的 -Durl=、-Dusername= 和 -Dpassword= 参数。

    mvn flyway:init -Dflyway.initVersion=1 -Dflyway.initDescription="基础版本"

4.  配置我们的弹簧设置以拾取飞行路线（如主页所述）。这可确保自动应用迁移，并且数据库与应用程序处于一致状态

这是正确的方法吗？我是否忘记了任何重要步骤？

我还有一个关于将测试数据添加到内存数据库的问题：

插入单元测试数据的正确位置在哪里？即使我使用 spring 设置 flyway 并使休眠依赖于它使用

```
<bean id="sessionFactory" class="..." depends-on="flyway">
...
</bean> 
```

数据源将在之前创建，目前这是我们添加架构和测试数据的地方。如果我们在创建数据源时仍然添加示例数据，那么如果我没记错的话，架构将不是正确的。

我们如何使用内存数据库将测试数据与 flyway 一起使用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:28:16.850

您可以配置一个包含测试数据脚本的额外位置。然后应该将其配置为仅包含在单元测试中。

# android - 中断 IntentService

> ID：15413430
> 
> 赞同：1
> 
> 时间：2013-03-14T15:28:17.113
> 
> 标签：android, multithreading, service, android-asynctask, intentservice

我正在创建一个应用程序，我需要在其中处理可能非常庞大且可能需要一些时间的数据。

现在我在 IntentService 上阅读了很多东西，实际上我已经将它实现为一个用于处理 REST 调用的通信类，但现在我试图将它用于长时间运行的数据处理。

我在标题栏中添加了一个进度指示器，但现在我希望能够在用户单击它时取消操作。

有没有一些优雅的方法可以做到这一点？（类似于 Thread.interrupt()）目前我有一个静态布尔“正在运行”，并且我已经覆盖了 onStartCommand

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    if (intent.getAction() != null && intent.getAction().equals("stop")) {
        running = false;
    }
    onStart(intent, startId);
    return START_NOT_STICKY;
} 
```

我觉得这很麻烦而且不优雅，并且觉得我可能会误用 IntentService 来做一些不该做的事情。有没有更优雅的方式来做到这一点？

stopSelf() 对我不起作用，因为我需要中断正在做的事情。我试过了，代码继续执行。

我想到了异步任务，但我担心任务无法生存。（操作可能需要长达 15 分钟）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:41:19.600

我认为这`IntentService`并不适合您的目的。相反，您可以`Service`直接扩展（[http://developer.android.com/guide/components/services.html#ExtendingService](http://developer.android.com/guide/components/services.html#ExtendingService)）并在特定的启动命令上清除消息队列（`Handler`在这种情况下）并执行您的最终过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-25T05:22:55.783

对于这种情况，我想出的一个简单解决方案是添加一个由后台线程（IntentService 为您启动）代码检查的字段，该字段在 onDestory() 中设置，当您执行 stopService() 时将调用该字段调用您的 IntentService 类。

所以在你的 IntentService 中：

```
@Override
    public void onDestroy() {
        super.onDestroy();
        Log.d(LOGTAG, "got on destroy, asking background thread to stop as well");
        mPleaseStop = true;
    } 
```

和

```
@Override
protected void onHandleIntent(Intent intent) {
    while(true) {
        Log.d(LOGTAG, "Doing some long running stuff here");
        if (mPleaseStop) {
            return;
        }
    }
} 
```

然后打电话

```
stopService(new Intent(this, MyIntentService.class)) 
```

为了正确起见，您也应该使设置和检查同步。

# ruby - 在 Ruby 中更改字符串中的字符时出现意外行为

> ID：15413431
> 
> 赞同：1
> 
> 时间：2013-03-14T15:28:18.477
> 
> 标签：ruby

这段代码（在 Ruby 1.9 中）

```
word = 'atf'
new_word = word
word[0] = 'w'
puts new_word 
```

给出响应“wtf”，这

```
word = 'ok'
new_word = word
word = 'wft'
puts new_word 
```

给出了“好的”响应，这比我所期望的要多得多。这是 Ruby 中的一个错误，还是我错误地期望改变 word，但我改变它，不应该改变 new_word。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:31:31.047

在第一个示例中，只有一个实际的字符串对象，并且您有两个引用它的变量名。因此，修改字符串会修改每个变量。你可以改为：

```
new_word = word.dup 
```

制作副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:32:52.273

`word[0] = 'w'``word`是对变量引用的对象的方法调用。

`word = 'wft'`是变量赋值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:44:01.380

正如其他答案中所说，您将变量指向同一个字符串对象。

''请记住''：Ruby 绝不会仅仅通过分配对象（或返回或传递给函数）来复制/复制对象。因此，如果您来自 C/C++，Ruby 仅适用于引用/指针。（如果您来自 Java：该行为与 Java 非原语非常相似）。

例如：

```
a = [1, 2]
b = a
b << 3
puts a.inspect
# prints [1, 2, 3] 
```

如果您不习惯，甚至会更加困惑：

```
def foo(x)
  x << 3 
  return nil
end

a = [1, 2]
foo(a)
foo(a)
puts a.inspect
# prints [1, 2, 3, 3] 
```

在某些情况下，Ruby 提供了两种功能相同的方法，一种更改实际对象，另一种返回包含更改的新对象。

例如`String#gsub(from, to)`返回一个包含这些更改的新字符串，另一方面 String#gsub!(from, to) `changes the string itself. Another example would be`Array#reject `vs.`Array#reject!`

`Object#dup`复制一个对象（但不复制它的嵌套对象）。

请注意：在大多数情况下，不修改字符串被认为是好的样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:42:51.673

需要注意的重要一点是：

```
new_word = word 
```

赋值不会**复制**into的*值* 。它设置使变量指向与变量**相同的内存地址**。`word``new_word``new_word`**`word`**

 **因此，`new_word[0] = 'x'`和将对变量和的**值**`word[0] = 'x'`产生相同的影响。**`new_word``word`**

 **您可以通过以下任一方式解决问题：

```
new_word = word.dup 
```

或者

```
new_word = word.clone 
```

`clone`并在内存中`dup`创建变量**值的****副本**，并返回对该内存的引用，然后将其分配给. 和之间存在差异，但它们超出了您的问题范围。**`new_word``clone``dup`**

 **此外，您会发现许多语言都以这种方式运行。例如，您可以在 C# 或 javascript 中尝试相同的语义，并看到相同的行为。******

# jakarta-ee - TypedQuery 代替 JPA 中的普通查询

> ID：15413434
> 
> 赞同：13
> 
> 时间：2013-03-14T15:28:25.200
> 
> 标签：jakarta-ee, jpa, glassfish-3, jpql

是否可以将此查询编写为 TypedQuery 并让两个 Long 运行到一个内部有两个公共 Long 字段的对象中。

```
 Query q = em.createQuery(
            "SELECT c.id, COUNT(t.id) " +
            "FROM PubText t " +
            "JOIN t.comm c " +
            "WHERE c.element = ?1 " +
            "GROUP BY c.id");
    q.setParameter(1, e);
    List<?> rl = q.getResultList();
    Iterator<?> it = rl.iterator();
    HashMap<Long, Long> res = new HashMap<Long, Long>();
    while (it.hasNext()) {
        Object[] n = (Object[]) it.next();
        res.put((Long)n[0], (Long)n[1]);
    }
    return res; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T15:32:29.527

JPA 有一个专门用于此的功能 - 构造函数表达式：

```
Query q = entityManager.createQuery("SELECT NEW com.example.DTO( c.id, COUNT(t.id)) FROM ...");
List<DTO> dtos = q.getResultList(); 
```

您的 DTO 类可以是 POJO。它所需要的只是一个接受 2 `Long`s 的公共构造函数。请注意，您必须在`NEW`运算符之后提供您的班级的完全限定名称。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T16:08:20.720

新代码现在看起来像这样。谢谢你的帮助。

```
 TypedQuery<CommUsed> q = em.createQuery(
        "SELECT new CommUsed(c.id,COUNT(t.id)) " +
        "FROM PubText t " +
        "JOIN t.comm c " +
        "WHERE c.element = ?1 " +
        "GROUP BY c.id", CommUsed.class);
    q.setParameter(1, e);
    HashMap<Long, Long> res = new HashMap<Long, Long>();
    for (CommUsed u : q.getResultList())
        res.put(u.commID, u.cnt); 
```

# c# - C++/CLI CS0246：找不到类型或命名空间名称“包装器”

> ID：15413439
> 
> 赞同：1
> 
> 时间：2013-03-14T15:28:37.670
> 
> 标签：c#, visual-studio-2008, build, c++-cli

我遇到了一个似乎与[此](https://stackoverflow.com/questions/4659888/c-cli-dll-namespace-not-found-in-msvs)相同的问题。

我有一个 VS 2008 解决方案，其中包括：（为简单起见更改了名称）

*   DLL A：原生 C++，业务逻辑 DLL
*   DLL B：DLL A 的 C++/CLI 包装器，命名空间为“Wrapper”
*   EXE：AC# WinForms GUI EXE 项目（引用 DLL B）

当我构建 EXE 时，VS 给了我一个错误：

```
error CS0246: The type or namespace name 'Wrapper' could not be found (are you missing a using directive or an assembly reference?) 
```

然而：

*   没有报告其他错误或警告
*   EXE 项目中的所有引用似乎都可以正确解析
*   DLL A 和 DLL B 都在没有错误或警告的情况下构建
*   [DLL A 包含 .h 头文件和 .cpp 文件（仅包含 .h 头文件）](https://stackoverflow.com/questions/5619752/c-cli-dll-namespace-not-found-in-msvs-c-sharp-project-successfully-reproducab)
*   我可以毫无问题地遍历对象浏览器中的“包装器”命名空间

第一个链接的问题提到了“编译器符号的重复定义”，但我不确定在这个意义上要寻找什么。

关于尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:23:36.377

我想我想通了。

更多背景知识：在构建之前，整个解决方案是使用 CMake 创建的。我使用 CMake 对 csproj 文件进行一些编辑，以便 EXE 将其指向正确的引用，包括 DLL B。

每当我运行 CMake 时，csproj 文件的 ProjectReference 节点中为 DLL B 静态定义的 GUID 与为输出 DLL B 的 vcproj 新生成的 GUID 不同步。这种 GUID 不匹配导致*在构建时*不引用 DLL B ，即使它显示在参考列表中并且没有相关的警告或错误。

我发现这一点的方法是查看构建输出。在对 csc.exe 的调用中，没有 DLL B 的“/reference”条目。

现在我需要找到一种方法让这些 GUID 保持同步！

# windows - 他们如何判断 Windows 系统变量中的环境变量名称是什么

> ID：15413441
> 
> 赞同：0
> 
> 时间：2013-03-14T15:28:43.400
> 
> 标签：windows, environment-variables

如果这个问题很愚蠢，我很抱歉。
我对设置环境变量没有任何问题，但我很想知道答案。
我搜索了谷歌，但我没有找到信息。

例如，他们告诉将 Java 的变量名设置为**JAVA_HOME**，对于 apache tomcat 将变量名设置为**CATALINA_HOME**

他们怎么知道它是**JAVA_HOME**和**CATALINA_HOME**？
有没有办法让我自己知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:30:49.607

“他们”编写了读取具有这些名称的环境变量的代码。

因此，“他们”可以告诉您设置这些名称。

# wordpress - Wordpress 插件开发 - 我做错了什么

> ID：15413445
> 
> 赞同：0
> 
> 时间：2013-03-14T15:28:55.003
> 
> 标签：wordpress

我在做什么错......这似乎不起作用......我不断收到以下错误

警告：无法修改标头信息 - 标头已由 /home/puretige/public_html/wp-includes/option 中的（输出开始于 /home/puretige/public_html/wp-content/plugins/Pure Tiger/puretiger.php:13）发送.php 在第 568 行

警告：无法修改标头信息 - 标头已由 /home/puretige/public_html/wp-includes/option 中的（输出开始于 /home/puretige/public_html/wp-content/plugins/Pure Tiger/puretiger.php:13）发送.php 在第 569 行

该插件在激活期间生成了 2 个字符的意外输出。如果您发现“标头已发送”消息、联合提要问题或其他问题，请尝试停用或删除此插件。

请注意我对此很陌生....

```
<?php
/*
Plugin Name: Pure Tiger Hosting
Plugin URI: http://www.puretigerhosting.com/wordpressplugin
Description: Themes, Plugins and Support from within your admin panel.
Version: 1.00
Author: Pure Tiger Hosting
Author URI: http://www.puretigerhosting.com
License: GPL2
*/
?>

<?php

add_action('admin_menu','register_custom_menu_page');

add_action('admin_menu','register_my_custom_submenu_page');

add_action('admin_menu','register_my_custom_submenu_page2');

add_action('admin_menu','register_my_custom_submenu_page3');

Function register_custom_menu_page() {

    add_menu_page('Pure Tiger', 'Pure Tiger','pure-tiger','add_users','','', 6);
}

/*-----------------------------Sub Pages--------------------------------------------*/

function register_my_custom_submenu_page() {
    add_submenu_page( 'pure-tiger','Themes','Themes','PTthemes','','','my_custom_submenu_page_themes');
}

function register_my_custom_submenu_page2() {
    add_submenu_page( 'pure-tiger','Plugins','Plugins','PTPlugins','','','my_custom_submenu_page_plugins');
}

function register_my_custom_submenu_page3() {
    add_submenu_page( 'pure-tiger','Ask a Question','Ask a Question','question','','','my_custom_submenu_page_question');
}

/*-----------------------------Themes--------------------------------------------*/

function my_custom_submenu_page_themes() {
    echo '<h3>Pure Tiger Themes</h3>';
}

/*-----------------------------Plugins--------------------------------------------*/

function my_custom_submenu_page_plugins() {
    echo '<h3>Pure Tiger Plugins</h3>';
}

/*-----------------------------Support--------------------------------------------*/

function my_custom_submenu_page_question() {
    echo '<h3>Pure Tiger Support</h3>';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:32:24.487

尝试在插件声明之前删除打开的关闭 php 标签。

```
/*
Plugin Name: Pure Tiger Hosting
Plugin URI: http://www.puretigerhosting.com/wordpressplugin
Description: Themes, Plugins and Support from within your admin panel.
Version: 1.00
Author: Pure Tiger Hosting
Author URI: http://www.puretigerhosting.com
License: GPL2
*/

<?php

add_action('admin_menu','register_custom_menu_page');
//remaining code to follow.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:05:32.677

版权声明后删除关闭`?>`和打开标签。`<?php`2 换行防止 wordpress 发送标题。

```
<?php
/*
Plugin Name: Pure Tiger Hosting
Plugin URI: http://www.puretigerhosting.com/wordpressplugin
Description: Themes, Plugins and Support from within your admin panel.
Version: 1.00
Author: Pure Tiger Hosting
Author URI: http://www.puretigerhosting.com
License: GPL2
*/

add_action('admin_menu','register_custom_menu_page');

add_action('admin_menu','register_my_custom_submenu_page'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T15:50:33.340

检查此插件是否尝试写入 cookie。

如果是这种情况，那么您的插件必须在任何 html 代码处理之前启动。因此，您必须在 index.php 的顶部启动插件，然后`<!doctype ... >`

一些关于 cookie 的阅读：http: [//php.net/manual/en/features.cookies.php](http://php.net/manual/en/features.cookies.php)

# if-statement - 参考另一列最后使用的单元格左侧的单元格

> ID：15413448
> 
> 赞同：0
> 
> 时间：2013-03-14T15:29:05.113
> 
> 标签：if-statement, reference

我正在尝试获取一个 Excel 论坛，该论坛将填充引用另一列中最后使用的单元格的单元格文本。

例如，我希望输出是（$60.00）的“B”列中最后使用的单元格的日期，以填充`"1/18/13"`单独的单元格。有谁知道一个公式可以给我 1/18/13

```
row#    A         B         C
 10   1/12/13   $51.00
 11   1/15/13   $15.00
 12   1/18/13   $60.00
 13   1/31/13             $89.00
 14   2/15/13             $43.00
 15   2/18/13             $33.00 
 16   3/15/13             $100.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:32:33.900

使用宏中的 onChange 事件，或[Excel OnChange 事件](https://stackoverflow.com/questions/8494658)`NOW()`中描述的函数

# vb.net - 解析“\”（反斜杠）并将域转换为大写

> ID：15413452
> 
> 赞同：1
> 
> 时间：2013-03-14T15:29:11.727
> 
> 标签：vb.net, string, parsing

我想采取这样的措施：

```
domainB\bsmith
domainA\djones 
```

并将其转换为如下内容：

```
DOMAINA\bsmith
DOMAINB\djones 
```

这是我到目前为止的代码：

```
 arrUsers(I) = arrUsers(I).Substring(0, arrUsers(I).IndexOf("\")).ToUpper + arrUsers(I).Substring(arrUsers(I).IndexOf("\")) 
```

我希望这更容易阅读和理解。有没有更好更可持续的方式来完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:32:04.877

使用`String.Split`和重组：

```
Dim parts() As String = arrUsers(I).Split("\"C)
arrUsers(I) = parts(0).ToUpper() + "\" + parts(1) 
```

# php - 尝试通过 PHP 将数据发布到 SOAP 方法

> ID：15413455
> 
> 赞同：0
> 
> 时间：2013-03-14T15:29:15.663
> 
> 标签：php, oop, object, soap

我有一个基于 SOAP 协议的网络服务。SOAP 提供了一个方法 Add，它将一个 OO 对象变量作为输入。

我正在尝试将数据添加到他们的服务中。这是代码：

```
// this classes create a structure for WSSE security headers 
class clsWSSEAuth
{
  private $Username;
  private $Password; 
  function __construct($u, $p)
  {
    $this->Username = $u; 
    $this->Password = $p;
  }
}

class clsWSSEToken
{
  private $UsernameToken;
  function __construct($i)
  {
    $this->UsernameToken=$i; 
  }
}    

$params = array('trace' => true);

$user = 'xxxxxx'; 
$pass = base64_encode(sha1('yyyyy', true));  //sha1 is sth like mdf - it codes the pass 

$wssens = 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd';  //namespace

$soapVarUser = new SoapVar ($user, XSD_STRING, NULL, $wssens, NULL, $wssens);
$soapVarPass = new SoapVar ($pass, XSD_STRING, NULL, $wssens, NULL, $wssens);

//PREPARATION OF VARIABLE FO USER AND PASS - END

//Create Object for Auth Class and pass in soap var 
$wsseAuth = new clsWSSEAuth ($soapVarUser, $soapVarPass); 

//Create SoapVar out of object of Auth class 
$soapVarAuth = new SoapVar ($wsseAuth, SOAP_ENC_OBJECT, NULL, $wssens, 'UsernameToken', $wssens);
//Create object for Token Class 
$wsseToken = new clsWSSEToken ($soapVarAuth);
//Create SoapVar out of object of Token class 
$soapVarToken = new SoapVar ($wsseToken, SOAP_ENC_OBJECT, NULL, $wssens, 'UsernameToken', $wssens);
//Create SoapVar for 'Security' node 
$soapHeader = new SoapVar ($soapVarToken, SOAP_ENC_OBJECT, NULL, $wssens, 'Security', $wssens);

//Create header object out of security soapvar 
$header = new SoapHeader($wssens, 'Security', $soapHeader, true, 'htpp://abce.com'); 

//Create object of Soap Client
$client = new SoapClient('https://xxxxxx.support.xxxxxxx.pl:8443/webservices/LAB/LabResultsManagerEP?wsdl', $params);

//Set headers for soapclient object 
$client->__setSoapHeaders($header); 

//definition of example object

class CreateOrderResultListVO {
  public $ord;
  function CreateOrderResultListVO(){
//and some other stuff here too
    $this -> ord = $any_structure_of_objects_maching_required_fields;
  }
}

$test = new CreateOrderResultListVO(); //this is preety much any php OO object

try 
{  
  $id=$client->add($test -> ord);
} catch (Exception $e) { echo "error in add method: <pre>"; var_dump($e);echo "</pre>"; } 
```

用 Java 编写了客户端，并且工作正常。C# 中的客户端也是如此。但据我所知，我是第一个尝试在 PHP 中做到这一点的人。

事实上，传递给 Add 方法的对象结构很复杂（它匹配的不是那么小的 xml 文件），但显然这不是问题。

我得到 var_dump 错误：整个对象结构 + 这个：

```
 ["faultstring"]=>
  string(23) "VO object can't be null"
  ["faultcode"]=>
  string(10) "env:Server"
  ["detail"]=>
  object(stdClass)#19 (1) {
    ["ErlabException"]=>
    object(stdClass)#20 (2) {
      ["code"]=>
      string(10) "WRONG_DATA"
      ["message"]=>
      string(23) "VO object can't be null"
    }
  } 
```

这意味着（我认为）soap 连接没问题（我在 get_data 方法中有相同的连接并且工作正常）但是由于某种原因 Method Add 对我发送的日期没有做任何事情，就像它没有看到它一样？

我真的很乐意提供任何帮助。我该如何处理这个问题，或者至少我如何查找问题所在？

编辑：我希望这会有所帮助：我已经安装了 Fiddler，以便收听从我的电脑发送到互联网的内容。我已经配置了 Firefox 来使用它。我得到的只是浏览器中显示的 php 网页的内容。除了由 SOAP Add 方法生成的 xml 之外，c# 和 Jave 客户端什么都不显示。我几乎确定 php 与 SOap webserwice 连接得很好（除非我得到的错误不是 Soap Add 错误而是 Soap serwer 错误），所以我不明白为什么 Fiddler 什么也没显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:21:27.520

真的没人知道吗？:) 好的，就是这样，而不是标准的函数调用使用这个：

```
 $args = array('soap_parameter_name' => $xml_objects);
  $id = $client->__soapCall('add', array('parameters' => $args)); 
```

# java - Hibernate：composite-id 与 key-many-to-one 生成 java.lang.stackoverflow 错误

> ID：15413460
> 
> 赞同：1
> 
> 时间：2013-03-14T15:29:35.950
> 
> 标签：java, hibernate, hibernate-mapping, hbm

我一直在尝试使用 hbm 文件将下表映射到 Hibernate：

```
CREATE TABLE
    additional_info
    (
        info_id SMALLINT,
        book_id INT,
        desc VARCHAR(32) NULL,
        CONSTRAINT additional_info_pk PRIMARY KEY (info_id, book_id),
        CONSTRAINT additional_info_fk FOREIGN KEY (info_id, book_id) REFERENCES info (id, book_id)
    );

CREATE TABLE
    info
    (
        id SMALLINT,
        book_id INT,
        item_name VARCHAR(32),
        CONSTRAINT pk_info PRIMARY KEY (id, book_id ),
        CONSTRAINT fk_info FOREIGN KEY (book_id ) REFERENCES book (book_id)        ); 
```

如您所见，它们都共享相同的 2 字段主键 - 反过来，这也是从 additional_info 到 info 的外键。

这是 hibernateTools 定义关系的方式（additional_info hbm）：

```
<composite-id name="id" class="AdditionalInfoId">
    <key-many-to-one name="info" class="Info">
        <column name="info_id" />
        <column name="book_id" />
    </key-many-to-one>
</composite-id> 
```

在 info 的 hbm 中：

```
<one-to-one name="additionalInfo" class="AdditionalInfo"></one-to-one> 
```

使用这种方法，我不断收到**java.lang.stackoverflow**错误。我一直在搜索和尝试不同的映射/替代组合，但没有成功——因为我没有太多的休眠经验，它更像是疯狂的猜测（现在大多数人都在使用注释）。有些人建议使用`<id>`，`<generator>`但我找不到一个示例，其中两个字段用于链接一对一关系，既是 PK 又是 FK。

我的类都是可序列化的，并且也自动生成了 equals 和 hashCode 方法。

我也不明白为什么“键多对一”。这应该是一对一的关系。我读到将composite-id 与此键多对一结合使用不是一个好主意，但我未能实现可行的替代方案。

任何见解将不胜感激。

非常感谢！

PS：一段堆栈跟踪：

```
java.lang.StackOverflowError
    at java.lang.Integer.equals(Integer.java:747)
    at org.hibernate.util.EqualsHelper.equals(EqualsHelper.java:10)
    at org.hibernate.type.NullableType.isEqual(NullableType.java:214)
    at org.hibernate.type.NullableType.isEqual(NullableType.java:210)
    at org.hibernate.type.AbstractType.isEqual(AbstractType.java:116)
    at org.hibernate.engine.EntityKey.equals(EntityKey.java:97)
    at java.util.HashMap.get(HashMap.java:305)
    at org.hibernate.engine.StatefulPersistenceContext.getEntity(StatefulPersistenceContext.java:322)
    at org.hibernate.impl.SessionImpl.getEntityUsingInterceptor(SessionImpl.java:478)
    at org.hibernate.event.def.DefaultLoadEventListener.loadFromSessionCache(DefaultLoadEventListener.java:436)
    at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:338)
    at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:139)
    at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:195)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:103)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:878)
    at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:846)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:557)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:26:13.577

如果您定义双向引用，其中之一应该是惰性的，以避免`StackOverflow`.

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-18T17:01:02.150

看看这里：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)

持久类必须重写 equals() 和 hashCode() 以实现复合标识符相等。它还必须实现 Serializable。

不幸的是，这种方法意味着持久对象是它自己的标识符。除了对象本身之外，没有方便的“句柄”。您必须先实例化持久类本身的实例并填充其标识符属性，然后才能 load() 与复合键关联的持久状态

希望能帮助到你。

# java - 从 hashmap 写入 txt 文件

> ID：15413467
> 
> 赞同：4
> 
> 时间：2013-03-14T15:29:57.287
> 
> 标签：java, hashmap, bufferedreader, filewriter

我有一个 Integer,String (K,V) 的 hashMap 并且只想将字符串值写入文件（而不是键 Integer），并且我只想将一些第一个 n 条目（无特定顺序）写入文件而不是整个地图。我尝试了很多，但找不到将第一个 n 条目写入文件的方法。（有一些示例可以将值转换为字符串数组，然后执行此操作）但它没有提供正确的格式我想写文件）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:50:02.110

这听起来像家庭作业。

```
public static void main(String[] args) throws IOException {
    // first, let's build your hashmap and populate it
    HashMap<Integer, String> map = new HashMap<Integer, String>();
    map.put(1, "Value1");
    map.put(2, "Value2");
    map.put(3, "Value3");
    map.put(4, "Value4");
    map.put(5, "Value5");

    // then, define how many records we want to print to the file
    int recordsToPrint = 3;

    FileWriter fstream;
    BufferedWriter out;

    // create your filewriter and bufferedreader
    fstream = new FileWriter("values.txt");
    out = new BufferedWriter(fstream);

    // initialize the record count
    int count = 0;

    // create your iterator for your map
    Iterator<Entry<Integer, String>> it = map.entrySet().iterator();

    // then use the iterator to loop through the map, stopping when we reach the
    // last record in the map or when we have printed enough records
    while (it.hasNext() && count < recordsToPrint) {

        // the key/value pair is stored here in pairs
        Map.Entry<Integer, String> pairs = it.next();
        System.out.println("Value is " + pairs.getValue());

        // since you only want the value, we only care about pairs.getValue(), which is written to out
        out.write(pairs.getValue() + "\n");

        // increment the record count once we have printed to the file
        count++;
    }
    // lastly, close the file and end
    out.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:34:37.130

只是流...

获取值的迭代器。遍历它们以增加计数器。当计数器达到 n 个条目时出来。

其他方法是使用

```
for(int i=0, max=hashmap.size(); i<max, i<n; i++) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:59:53.373

参考：[Java API](http://docs.oracle.com/javase/6/docs/api/)

尝试这个

1.  从地图中获取值的集合。阅读 Map 对象引用并找到名为 的方法`values`。使用此方法
2.  遍历您在步骤 1 中检索到的值的集合。将一些（您选择的）写入文件。写入时根据需要格式化。

# c# - 使用 DataContractSerializer 反序列化 XML

> ID：15413468
> 
> 赞同：16
> 
> 时间：2013-03-14T15:30:00.343
> 
> 标签：c#, .net, xml, datacontractserializer

我有一个返回以下数据的 Web 服务：

```
<?xml version=""1.0"" encoding=""UTF-8""?>
<RESPONSE>
    <KEY>12345</KEY>
    <PROPERTY>
        <PROPERTY_ADDRESS>
            <STREET_NUM>25</STREET_NUM>
            <STREET_ADDRESS>ELM ST</STREET_ADDRESS>
            <STREET_PREFIX/>
            <STREET_NAME>ELM</STREET_NAME>
            <STREET_TYPE>ST</STREET_TYPE>
            <STREET_SUFFIX/>
        </PROPERTY_ADDRESS>
    </PROPERTY>
</RESPONSE> 
```

我有一个匹配的类结构：

```
[DataContract(Name="RESPONSE", Namespace="")]
public class Response
{
    [DataMember(Name="KEY")]
    public string Key { get; set; }

    [DataMember(Name = "PROPERTY")]
    public Property Property { get; set; }
}

[DataContract(Name="PROPERTY", Namespace="")]
public class Property
{
    [DataMember(Name="PROPERTY_ADDRESS")]
    public PropertyAddress Address { get; set; }
}

[DataContract(Name="PROPERTY_ADDRESS", Namespace="")]
public class PropertyAddress
{
    [DataMember(Name="STREET_NUM")]
    public string StreetNumber { get; set; }

    [DataMember(Name = "STREET_ADDRESS")]
    public string StreetAddress { get; set; }

    [DataMember(Name = "STREET_PREFIX")]
    public string StreetPrefix { get; set; }

    [DataMember(Name = "STREET_NAME")]
    public string StreetName { get; set; }

    [DataMember(Name = "STREET_TYPE")]
    public string StreetType { get; set; }

    [DataMember(Name = "STREET_SUFFIX")]
    public string StreetSuffix { get; set; }
} 
```

我的反序列化代码如下所示：

```
[Test]
public void TestMapping()
{
    var serializer = new DataContractSerializer(typeof(Response));

    Response response = null;

    using (var ms = new MemoryStream(Encoding.UTF8.GetBytes(XmlData)))
    {
        response = (Response)serializer.ReadObject(ms);
    }

    //This works
    Assert.AreEqual("12345", response.Key);

    //This works
    Assert.AreEqual("25", response.Property.Address.StreetNumber);

    //This FAILS. StreetAddress is null
    Assert.AreEqual("ELM ST", response.Property.Address.StreetAddress);
} 
```

对于我的生活，我无法弄清楚为什么 StreetAddress 失败了。我想念的东西一定很简单。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-14T16:09:35.313

DataContractSerializer 期望事物[按字母顺序排列](https://stackoverflow.com/questions/3570729/xmlserializer-vs-datacontractserializer)。您需要添加`Order`到您的数据成员才能正常工作。

```
[DataContract(Name = "PROPERTY_ADDRESS", Namespace = "")]
public class PropertyAddress
{
    [DataMember(Name = "STREET_NUM", Order=0)]
    public string StreetNumber { get; set; }

    [DataMember(Name = "STREET_ADDRESS", Order=1)]
    public string StreetAddress { get; set; }

    [DataMember(Name = "STREET_PREFIX", Order=2)]
    public string StreetPrefix { get; set; }

    [DataMember(Name = "STREET_NAME", Order=3)]
    public string StreetName { get; set; }

    [DataMember(Name = "STREET_TYPE", Order=4)]
    public string StreetType { get; set; }

    [DataMember(Name = "STREET_SUFFIX",Order=5)]
    public string StreetSuffix { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T16:09:54.720

您必须使用元素的顺序来增加数据协定，因为 DataContractSerializer 期望元素默认按字母顺序排序。您的 XML 不是这种情况。

这是代码：

```
[DataContract(Name = "PROPERTY_ADDRESS", Namespace = "")]
public class PropertyAddress
{
    [DataMember(Name = "STREET_NUM", Order=1)]
    public string StreetNumber { get; set; }

    [DataMember(Name = "STREET_ADDRESS", Order=2)]
    public string StreetAddress { get; set; }

    [DataMember(Name = "STREET_PREFIX", Order=3)]
    public string StreetPrefix { get; set; }

    [DataMember(Name = "STREET_NAME", Order=4)]
    public string StreetName { get; set; }

    [DataMember(Name = "STREET_TYPE", Order=5)]
    public string StreetType { get; set; }

    [DataMember(Name = "STREET_SUFFIX", Order=6)]
    public string StreetSuffix { get; set; }
} 
```

# go - 如何使 fmt.Scanln() 读入一片整数

> ID：15413469
> 
> 赞同：15
> 
> 时间：2013-03-14T15:30:02.110
> 
> 标签：go

我有一行包含 3 个数字，我想用 fmt.Scanln() 从标准输入读取，但这段代码不起作用：

```
X := make([]int, 3)
fmt.Scanln(X...)
fmt.Printf("%v\n", X) 
```

我收到此错误消息：

```
cannot use X (type []int) as type []interface {} in function argument 
```

我不明白。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-19T18:33:38.507

惯用的 Go 将是：

```
func read(n int) ([]int, error) {
  in := make([]int, n)
  for i := range in {
    _, err := fmt.Scan(&in[i])
    if err != nil {
       return in[:i], err
    }
  }
  return in, nil
} 
```

`interface{}`没有任何意义。如果没有必要，请不要使用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T18:01:00.580

例如，

```
package main

import "fmt"

func intScanln(n int) ([]int, error) {
    x := make([]int, n)
    y := make([]interface{}, len(x))
    for i := range x {
        y[i] = &x[i]
    }
    n, err := fmt.Scanln(y...)
    x = x[:n]
    return x, err
}

func main() {
    x, err := intScanln(3)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Printf("%v\n", x)
} 
```

输入：

```
1 2 3 
```

输出：

```
[1 2 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:01:27.357

我认为正确的版本应该是

```
X := make([]int, 3)
fmt.Scanln(&X[0], &X[1], &X[2])
fmt.Printf("%v\n", X) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T16:19:44.340

此错误消息发生在 b/c 没有合理的方式转换`[]int`为`[]interface{}`. 请注意，这是指切片。所以你使用的语法是正确的，但`fmt.Scanln`期望`[]interface{}`. 这在 pkg 之外有影响`fmt`。

我看到的原因是因为 Go 让您可以控制内存布局，因此它目前没有合理的方法来进行切片转换。这意味着您需要在将其传递给期望给定类型切片的函数之前手动进行转换。例如：

```
package main

import (
    "fmt"
)

func main() {
    x := make([]int, 3)
    y := make([]interface{}, 3)
    y[0] = x[0]
    y[1] = x[1]
    y[2] = x[2]

    fmt.Println(y...)
} 
```

或者更一般的东西：

```
 x := make([]int, 3)
    y := make([]interface{}, len(x))
    for i, v := range x {
        y[i] = v
    }

    fmt.Println(y...) 
```

关于您的具体问题，请参见以下内容：

```
 x := make([]*int, 3)
    for i := range x {
        x[i] = new(int)
    }

    y := make([]interface{}, 3)

    for i, v := range x {
        y[i] = v
    }

    if _, err := fmt.Scanln(y...); err != nil {
        fmt.Println("Scanln err: ", err)
    }

    for _, v := range y {
        val := v.(*int)
        fmt.Println(*val)
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-27T18:20:17.940

我在评论中看到你说线条可以有不同的长度。在这种情况下，您可以实现自己的`fmt.Scanner`：

```
package main

import (
   "bytes"
   "fmt"
)

type slice struct {
   tok []int
}

func (s *slice) Scan(state fmt.ScanState, verb rune) error {
   tok, err := state.Token(false, func(r rune) bool { return r != '\n' })
   if err != nil { return err }
   if _, _, err := state.ReadRune(); err != nil {
      if len(tok) == 0 {
         panic(err)
      }
   }
   b := bytes.NewReader(tok)
   for {
      var d int
      _, err := fmt.Fscan(b, &d)
      if err != nil { break }
      s.tok = append(s.tok, d)
   }
   return nil
}

func main() {
   var s slice
   fmt.Scan(&s)
   fmt.Println(s.tok)
} 
```

[https://golang.org/pkg/fmt#Scanner](https://golang.org/pkg/fmt#Scanner)

# autohotkey - 重新映射右键单击并拖动为 xbutton1 单击并拖动

> ID：15413471
> 
> 赞同：0
> 
> 时间：2013-03-14T15:30:05.790
> 
> 标签：autohotkey

我想重新映射右键单击并拖动 XButton1 单击并拖动。这是我尝试过的：

RButtonclickdrag::XButton1clickdrag

我想我没有正确的命令，但我搜索了很多，没有找到其他任何东西。有人可以给我一些帮助吗？

谢谢，艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:28:01.740

这是一种方法。让我知道这是否适合您的需求。时间设置为 100 毫秒。

```
#SingleInstance Force
#installKeybdHook
#Persistent

#ifWinActive ahk_class CorelDRAW 15.2
    $RButton::
        Sleep, 100
        GetKeyState, KeyState, RButton, p
        if KeyState = U
        {
            ;ToolTip, Short Press ; Activate to test behaviour
            Send, {RButton}
            Return
        }
        ;ToolTip, Long Press Started ; Activate to test behaviour
        sendmessage,0x111,0x1991d,0 ;pan one-shot
        MouseClick,L,,,1,0,D
        KeyWait, RButton
        ;ToolTip, Long Press Ended ; Activate to test behaviour
        MouseClick,L,,,1,0,U
    Return
#ifwinactive 
```

# wpf - 是否可以使用 StringFormat 属性有条件地显示一些文本？

> ID：15413475
> 
> 赞同：0
> 
> 时间：2013-03-14T15:30:11.670
> 
> 标签：wpf

我在数据库中有一个可以为空的字段，称为 Generation。它指定诸如“Jr.”、“II”等内容。我想要一个有条件地指定客户端生成的方法，如果它不为空，否则根本不显示它。我认为以下方法会起作用：

```
<TextBlock Text="{Binding LastName}" />
<TextBlock Text="{Binding Generation, StringFormat= {0}}" />
<TextBlock Text=", " /> 
```

但是，我收到一条错误消息，提示“Windows Presentation Foundation (WPF) 项目不支持 0”。字段值 Generation 是一个 varchar 字段。我可以用 TextBlock 类的 StringFormat 属性做我想做的事，还是需要使用转换器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:33:55.473

你需要把它写成：

```
<TextBlock Text="{Binding Generation, StringFormat={}{0}}" /> 
```

这是由于使用标记扩展的性质，它赋予`{}`. 通过在开头添加它（当您的第一个格式说明符之前没有文本时），它具有为您“转义”字符串格式说明的效果，类似于`@`在 C# 中用于处理字符串文字的方式。

# javascript - 使用 Javascript 在新窗口中弹出

> ID：15413482
> 
> 赞同：-4
> 
> 时间：2013-03-14T15:30:24.973
> 
> 标签：javascript, onclick, target

我有以下代码行，我无法在新窗口中弹出，因为目标只想关注不是有效内容的 URL：

```
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script type="text/javascript" src="/job/orgtools/ltilaunch/jobLtiLaunch.js"></script>
</head><body>
<p><span style="font-size: 14pt; color: #000080;"> <a href="#" onclick="javascript:lti_launch( {'handler_urn':'job/lti/job_mstr', 'skip_parent_check':'true','targetId':'assess'} );"><span style="color: #000080;">Assess</span></a> </span></p>
<p><span style="font-size: 14pt; color: #000080;"><a href="#" target="_blank" onclick="javascript:lti_launch( {'handler_urn':'job/lti/job_mstr', 'skip_parent_check':'true','targetId':'grade'} );"><span style="color: #000080;">Grade</span></a> </span></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:36:32.753

尝试这个 `href="javascript:void(0)"`

# c# - 获取 C# 代码逻辑的图形表示 - 方法调用层次结构

> ID：15413484
> 
> 赞同：0
> 
> 时间：2013-03-14T15:30:27.803
> 
> 标签：c#, debugging, architecture, diagram

我的实际工作包括对大型 C# 项目的某些部分进行重构/代码清理。

为了更好地理解代码逻辑，并且可以重构代码的哪一部分，我想一个好方法可能是“以图形方式”查看哪些方法调用了哪些方法。

如果这是一个好方法？

如果是，是否有这样的工具？顶部的顶部将是一个免费工具，但如果它不存在，我可以努力^^

我遇到了 DebuggerCanvas 和类似的东西，但是是自动的（比如使用 DebuggerCanvas 并进入所有方法都是这个想法）

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:32:00.627

在 Update 1 中添加到 VS 2012的[Code Map](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/26/introducing-code-map-in-visual-studio-2012-update-1-ctp.aspx)功能可能对此有所帮助。它确实提供了一种“画布”类型的功能，显示了其他方法如何调用方法。

# ruby-on-rails - 与 Rails 3.x 关联相关的基础知识 关系表和belongs_to 自动保存中都存在外键的关联？

> ID：15413491
> 
> 赞同：1
> 
> 时间：2013-03-14T15:30:46.160
> 
> 标签：ruby-on-rails, ruby, associations, rails-activerecord

在以下表格关系的模型中实现关联的最佳方法是什么。

### 当前细节/目标

*   保持表结构相同，因为它是一个遗留数据库。
*   我想一举保存`User`他们的选项。`primary address`
*   `users`table 有一个`primaryaddressid`指向 a 的列`user_addresses`。`addressid`桌子。
*   `user_addresses`表有一个`userid`指向的外键`users`。`userid`

### 这是我到目前为止所拥有的。

```
# User model class associations
has_many :user_addresses, :foreign_key => "userid", :autosave => true
belongs_to :primary_address, :class_name => "UserAddress", :foreign_key => "primaryaddressid", :autosave => true 
```

我希望能够有选择地创建具有主要地址的用户，例如......

```
User.new
User.primary_address.build(:street => 'dfkslf', :street2 => 'dfjkslfjlks231', etc)
User.save 
```

然后，这将保存记录并自动更新 User 表的 primaryaddressid。

### 问题...

我在想我的主要选项是创建一个`after_save`验证是否`primaryaddressid`有值，如果没有，则查找在`user_addresses`给定的情况下插入的最新地址`userid`并将其添加`addressid`到用户并更新它。

处理这种情况的最佳方法是什么，以使我在添加用户时具有最大的灵活性并且对性能的影响最小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:21:26.473

所以我找到了让我有些满意的解决方案。

在我的`UserAddress`模型中，我添加了：

```
attr_writer :is_primary
attr_reader :is_primary

after_save :update_primaryid

def set_as_primary!
  self.is_primary = true
end

def update_primaryid
  if self.is_primary
     user = User.find_by_personid(self.personid)
     user.primaryaddressid = self.addressid
     user.save!
  end
end 
```

这让我可以自由地做：

```
useraddress = user.user_addresses.build(personAddr)
useraddress.set_as_primary!

user.save! 
```

# excel - 平均Excel中多个单元格的最高三个值

> ID：15413495
> 
> 赞同：0
> 
> 时间：2013-03-14T15:30:52.137
> 
> 标签：excel, excel-formula, average

我有两列数据。我需要公式从两列中提取三个最高值并将它们平均。

55,000.00
**87,769.12**
**85,839.97**

56,650.00
58,349.50
60,099.99
61,902.98
63,760.07
65,672.88
**67,643.06**

这些值会发生变化，公式需要不断分析所有单元格以拉出三个最高值和平均值。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:36:29.533

此公式将执行此操作：

```
=平均(大($A:$A,ROW(A1:A3)))

```

您需要使用`Ctrl`- `Shift`-输入它`Enter`。

在您的具体示例中，使用以下公式：

```
=平均（大（（C11：D13，M12：N18），行（1：3）））

```

# resharper - 为什么 Resharper 要我在调用 ToString() 时指定一种文化？

> ID：15413496
> 
> 赞同：2
> 
> 时间：2013-03-14T15:30:55.647
> 
> 标签：resharper

我在代码中多次调用 ToString() 方法，而 Resharper 总是用错误突出显示这一点

```
Specify a culture in string conversion explicitly 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:56:40.300

当你将三十二除以一百时，你会得到什么？你可能认为答案是

```
0.32 
```

但在法语或德语（以及其他）中，它会是

```
0,32 
```

如果您不指定`CultureInfo`for `ToString`，则将使用当前线程文化，这将（通常）取决于您的代码运行的机器的配置。如果你想`ToString`产生*不*依赖于机器配置的结果，你需要指定一个`CultureInfo`.

# java - java第一次遇到堆空间错误服务器数据记录器

> ID：15413500
> 
> 赞同：3
> 
> 时间：2013-03-14T15:31:07.730
> 
> 标签：java, jdbc, heap-memory

[我构建了我的第一个 Java 程序，它建立在Interactive Brokers Java API](http://www.interactivebrokers.com/en/?f=programInterface)之上。这可能很重要，也可能不重要。我只是用几个新类扩展了主要的 API 类。

该程序正在对远程服务器进行数据查询。当服务器响应时，我将接收到的数据记录到本地 MySQL 数据库中。一旦程序完成记录数据，程序将发出下一个数据请求。

在发出几百个服务器请求后，让程序运行一段时间后，我遇到了问题。我会看到这个错误，然后程序不会继续执行：

```
java.lang.OutOfMemoryError: Java heap space 
```

我做了一些研究，根据我读到的内容，我得出结论，该程序正在创建许多新变量，而不是破坏旧的无价值变量。由于我使用 Netbeans 进行开发，因此我使用[Netbeans 分析器](http://profiler.netbeans.org/)检查是否是这种情况。看这里的图片：

![在此处输入图像描述](../Images/5329e527e8a68ef57fe68fb0e73e7494.png)

运行程序一段时间后，越来越多的内存被`Byte`. 所以看来我的理论还是正确的。

我真的不知道从这里去哪里。没有对类或特定变量的引用，只是变量类型。如何确定问题出在哪里？

**更新**

我更正了 BigMike 在评论中提到的一个特定问题。以前，我在 JDBC MySQL 连接器 API 中创建了许多语句，并且我正在调用`.execute()`以执行这些语句，但我没有使用`.close()`.

我确保`statement.close()`在每次执行后添加调用，并且程序现在运行得更好。通过查看该程序的 RAM 使用情况，它似乎解决了这个问题。我也没有看到`Java heap space`错误了，这很好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:36:06.057

仅凭这一点很难说可能出了什么问题。

它可能与您正在打开的 Streams 在您不再需要它们时没有关闭它们有关。仔细检查分配资源的方法（从文件、数据库等读取），尤其是当它们将数据读入流时，并确保在 finally 子句中关闭这些流。

除此之外，您可以尝试分析更频繁地调用哪些方法等，以尝试将问题缩小到代码的特定部分。

我找到了一个网站，它对垃圾收集的工作原理以及可能导致 OutOfMemoryErrors 的原因进行了合理的解释：

[http://www.kdgregory.com/index.php?page=java.outOfMemory](http://www.kdgregory.com/index.php?page=java.outOfMemory)

如果你通读了那篇文章，有一个对 Object[] 和 byte[] 的高分配的具体参考，这可能会为你指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:53:34.693

一般来说，这是由于以下两个原因之一：

1.  应用程序中存在内存泄漏，导致应用程序无法释放项目进行垃圾回收，从而导致 JVM 随着时间的推移耗尽内存。

2.  应用程序尝试了一次性操作，该操作需要比可用内存更多的内存，导致 JVM 由于该操作而耗尽内存。

由于您的输出似乎表明大部分内存被一百万个小字节数组消耗，我猜＃1可能是罪魁祸首；但是，要验证这一点，请重新启动您的应用程序并观察它随着时间的推移的内存消耗。它会上下反弹，但实际上你只需要观察消费*趋势*。如果消耗平均值随着时间的推移继续攀升，则说明存在内存泄漏。

要解决此问题，您通常需要源代码，并且需要找到代码中创建、使用和“存储”问题对象的部分，这些部分远远超出了上次使用它们的时间。解决方案是更正代码以不再存储它们。HashMaps、Lists 和其他 Collections 往往是内存泄漏问题的帮凶。

如果您缺少源代码，您可以尝试测量内存消耗的趋势，并安排应用程序的关闭和重新启动以有效地“重置时钟”，这样您就可以选择停机时间，而不是看着应用程序为您选择它。

如果它是一次性操作（不太可能考虑您的数据），那么在触发事件发生之前，您不会看到内存消耗的上升趋势。在这种情况下，通过访问源代码，您应该保护您的应用程序免受处理远远超出正常操作参数的数据。例如，从网络读取一条消息通常只需要几 KB，但在特殊情况下，客户端可能会永远传输。在这种情况下，如果超过 10 MB 的最大消息大小限制，请终止消息处理并将消息丢弃并报错。

在后一种情况下，如果无法访问源代码，唯一的希望是识别传入的干扰，寻找错误传输的来源，并尝试对其进行操作以防止输出过载。

如何处理这些技术的变化是巨大的，但现在你有一些想法。

# android - 启动桌面主时的 libgdx ClassNotFoundException - Mac，IntelliJ

> ID：15413501
> 
> 赞同：7
> 
> 时间：2013-03-14T15:31:08.550
> 
> 标签：android, macos, desktop, libgdx, classnotfoundexception

[我按照 IntelliJ 设置教程中的](https://code.google.com/p/libgdx/wiki/IntelliJIDEALibgdx)描述设置了我的项目，但我无法启动桌面应用程序。android 应用程序在模拟器和我的 S3 上都可以正常启动，但桌面中的 main 无法找到我的课程。

日志：

```
Exception in thread "main" java.lang.ClassNotFoundException: com.xxx.xxx.xxx.DesktopStarter
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:171)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:113) 
```

我正在运行 Mac OSX 10.7.5、Apple 的 Java JDK 1.6.0_43 和 IntelliJ 12.0.4。我觉得这很简单，我似乎无法找到问题所在。（不要笑我的班级名字，这是给我4岁的女儿）;D

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-12-08T11:42:35.123

LibGDX 1.7.1、IntelliJ IDEA 15.0、Windows 8.1——我一直在尝试通过 IDE 的运行配置对话框运行 DesktopLauncher 时遇到问题。

相反，运行 Gradle 任务（桌面 -> 运行）可以完美运行。

要在 IntelliJ 中运行 Gradle 任务，

1.  点击`Shift`两次，输入“Gradle”以打开**Gradle 项目**窗格
2.  如果没有显示任何内容，请点击“刷新所有 Gradle 项目”按钮
3.  展开**：桌面 > 任务 > 其他**
4.  双击**“运行”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T22:40:32.303

这是 intellij 的一个错误。我已被告知它将很快修复。

与此同时。

单击编辑器窗口右侧的 gradle 选项卡。

单击蓝色的刷新图标。

展开桌面 -> 任务 -> 其他 然后双击“运行”。

# vb.net - 进入后如何更新datagridview中的单元格？VB.net

> ID：15413505
> 
> 赞同：0
> 
> 时间：2013-03-14T15:31:30.450
> 
> 标签：vb.net, sql-server-2008, data-binding, datagridview, keypress

我想在单元格上输入后将值从 datagridview 更新为 sql。但它不起作用。

**这段代码：**

```
Private Sub dgvShow_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles dgvShow.KeyPress

Dim sb3 As New StringBuilder
Dim da2 As New SqlDataAdapter

For i As Integer = 0 To dgvShow.Rows.Count - 2
            If dgvShow.Rows(i).Cells(0).Value IsNot Nothing Then
                sb3.Remove(0, sb3.Length())
                sb3.Append("UPDATE PositionLevelWelfare ")
                sb3.Append("SET wfDivision=@wfDivision,wfSection=@wfSection,wfPosition=@wfPosition,wfBaht=@wfBaht")
                sb3.Append(" FROM PositionLevelWelfare pw")
                sb3.Append(" WHERE pw.Run=@Run")
                Dim SqlEdit As String = ""
                SqlEdit = sb3.ToString()

                da2.SelectCommand.CommandText = SqlEdit
                da2.SelectCommand.Parameters.Add("@Run", SqlDbType.NVarChar).Value = dgvShow.Rows(i).Cells(0).Value
                da2.SelectCommand.Parameters.Add("@wfDivision", SqlDbType.NVarChar).Value = dgvShow.Rows(i).Cells(1).Value
                da2.SelectCommand.Parameters.Add("@wfSection", SqlDbType.NVarChar).Value = dgvShow.Rows(i).Cells(2).Value
                da2.SelectCommand.Parameters.Add("@wfPosition", SqlDbType.NVarChar).Value = dgvShow.Rows(i).Cells(3).Value
                da2.SelectCommand.Parameters.Add("@wfBaht", SqlDbType.NVarChar).Value = dgvShow.Rows(i).Cells(4).Value
                da2.SelectCommand.ExecuteNonQuery()
                da2.SelectCommand.Parameters.Clear() 
            End If
        Next
End Sub 
```

感谢您的游览时间。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:04:16.597

**您可以在按 Enter 后或离开当前单元格时**使用事件`DataGridView.CellBeginEdit`和`DataGRidView.CellEndEdit` 然后值更新（单击其他单元格..）

 **在处理程序中`DataGridView.CellBeginEdit`

在这个处理程序中，我们只保存单元格的当前（旧）值在这个例子中，我使用一个`DataGridView.Tag`属性作为保存旧值的地方

```
Private Sub dgv_CellBeginEdit(sender As Object, e As DataGridViewCellCancelEventArgs) Handles dgv.CellBeginEdit
    If e.RowIndex < 0 OrElse e.ColumnIndex < 0 Then Exit Sub
    Me.dgv.Tag = Me.dgv.CurrentCell.Value
End Sub 
```

然后在处理程序中`DataGRidView.CellEndEdit`

```
Private Sub dgv_CellEndEdit(sender As Object, e As DataGridViewCellEventArgs) Handles dgv.CellEndEdit

    'Here you will get a new value of cell from dgv.CurrentCell.Value and compare with old value from dgv.Tag
    'You can add your checks for new value if you need. If some check fails just set
    dgv.CurrentCell.Value = dgv.Tag
    'If checks succeed then run your update to Database function with new value

End Sub 
```

或者您可以使用`dgv.CellValidating`事件，如果需要，您可以在其中使用检查新值和`Cancel`更改。然后在`CellEndEdit`jut 运行你的 UpdateTodatabase 函数记住`CellValidating`发生在之前`CellEndEdit`

[MSDN DataGridView.CellValidating 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalidating.aspx)**

# sharepoint - Sharepoint 2010：根据内容以不同方式显示列表行

> ID：15413510
> 
> 赞同：1
> 
> 时间：2013-03-14T15:31:36.537
> 
> 标签：sharepoint, xslt, sharepoint-2010

我想显示一个共享点列表，以便根据某些字段的值显示具有不同内容的行。

例如，如果一行是“公司”，那么我想显示公司的名称、地址等。另外，这一行应该加阴影并以粗体显示。如果该行是“人员”，那么我想显示姓名、电子邮件、职位描述等。

**问题：这可以通过操作 XSLT 模板来实现吗？**

事实上，我想在每个字段中创建某种“切换”语句，根据另一列中的数据动态填充该字段。

我事先问过，因为深入研究 XSLT 主题似乎需要做很多工作。（Sharepoint Deisgner 中生成的代码大约有 10.000 行......）

我的目的是创建一个紧凑的、便于打印的报告。我们已经尝试过 lsits 的分组功能，但这还不足以完成我们的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:45:16.417

是的，这应该可以通过 XSLT 实现。我想你的 XSLT 有一个这样的模板：

```
<xsl:template match="Row">
  <!-- XSLT for generating row -->
</xsl:template> 
```

您应该能够通过添加您自己的更具体的模板来覆盖此模板。假设**Type**是您将用于确定行类型的列的名称：

```
<xsl:template match="Row[@Type = 'Company']">
  <tr>
    <!-- Content for a company row -->
  </tr>
</xsl:template>

<xsl:template match="Row[@Type = 'Person']">
  <tr>
    <!-- Content for a company row -->
  </tr>
</xsl:template> 
```

像这样的方法理论上应该可行，但有必要查看您的一些 XSLT 以确定。也许你可以把它上传到像 PasteBin 这样的地方？

# ios - 在 iOS 中使用 OpenCV 检测条形码的边缘

> ID：15413511
> 
> 赞同：0
> 
> 时间：2013-03-14T15:31:41.107
> 
> 标签：ios, opencv, barcode

我让用户捕获条形码的图像，他们被要求将其放置在相机覆盖层上绘制的边界框内。我想检测该条形码是否正确放置在盒子中。检测这一点的最佳方法是什么？OpenCV 的 houghLines？我如何确定从 houghLines 检测到的线条是否是条形码的角，并且它们是否与相机覆盖的边界框匹配？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:39:38.813

[How to find corners on a Image using OpenCv 一](https://stackoverflow.com/questions/7263621/how-to-find-corners-on-a-image-using-opencv)文为您的问题提供了解决方案。我为我的项目做了同样的事情，它就像一个魅力:) 如果在理解或调整算法方面需要帮助，请不要犹豫。

干杯

# java - 泽西资源方法中的 MyClass 作为@PathParam

> ID：15413516
> 
> 赞同：0
> 
> 时间：2013-03-14T15:31:49.247
> 
> 标签：java, rest, jersey

在我的泽西资源中，我有：

```
@GET
@Path("/{dataType}/{dataSet}")
public Response search(
        @PathParam("dataType") String dataType,
        @PathParam("dataSet") String dataSet){
    ...
} 
```

我想使用我自己的类而不是字符串：

```
@GET
@Path("/{dataType}/{dataSet}")
public Response search(
        @PathParam("dataType") DataType dataType,
        @PathParam("dataSet") DataSet dataSet){
    ...
} 
```

但是 DataSet 依赖于 DataType（DataSet 在其构造函数中使用 DataType）。有没有办法用泽西岛做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:54:36.203

`fromString()`您可以通过静态方法使用 Jersey 的内置转换（请参阅[Jersey 文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e260)），或者使用自定义提供程序来处理路径段。对于后者，您将需要一个类似这样的类：

```
public class MyProvider extends PerRequestTypeInjectableProvider<Context, DataType> {
    @Context UriInfo uriInfo;

    public Injectable<DataType> getInjectable(ComponentContext componentCtx, Context ctx) {
        uri.getPathSegments();
        ...
    }
} 
```

# php - 无法从 Soap 响应中提取数据

> ID：15413518
> 
> 赞同：3
> 
> 时间：2013-03-14T15:31:52.607
> 
> 标签：php, soap, xpath, domxpath

这是我使用的代码：

```
$doc = // SOAP Response
            $xpath = new DOMXPath($doc);
            $xpath->registerNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');
            $xpath->registerNamespace('api', 'http://127.0.0.1/Integrics/Enswitch/API');

// Response:
            if ($xpath->query('/soap:Envelope/soap:Body/api:get_cdrsResponse')->length < 1)
            {
                throw new EnswitchResponseFaultException();
            } 
```

它不断抛出这个异常我做错了什么？

这是我得到的响应（[Pastebin 链接](http://pastebin.com/PLtMWQmg)）：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><get_cdrsResponse 
    xmlns="http://www.flatplanetphone.net/Integrics/Enswitch/API">
<s-gensym3>
<scustomer xsi:type="xsd:string">4458</scustomer>
<recording xsi:type="xsd:string" />
<outgroup_name xsi:type="xsd:string">abc</outgroup_name>
<bill_type xsi:type="xsd:string">prepaid</bill_type>
</s-gensym3> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:06:08.717

您应该使用以下方式注册您的 XML 命名空间：

```
$xpath->registerNamespace('api', 'http://www.flatplanetphone.net/Integrics/Enswitch/API'); 
```

不是

```
$xpath->registerNamespace('api', 'http://127.0.0.1/Integrics/Enswitch/API'); 
```

响应返回：

```
<get_cdrsResponse xmlns="http://www.flatplanetphone.net/Integrics/Enswitch/API"> 
```

这个 URL 是否可解析并不重要，重要的是字符串是否匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:12:21.560

**介绍**

不确定您从哪里获得`$xpath->registerNamespace('api', 'http://127.0.0.1/Integrics/Enswitch/API');`但不是有效的`namespace`去获取您可以使用的所有有效名称空间

```
$sxe = new SimpleXMLElement($xml);
print_r($sxe->getDocNamespaces(true)); 
```

输出

```
Array
(
    [xsi] => http://www.w3.org/2001/XMLSchema-instance
    [soapenc] => http://schemas.xmlsoap.org/soap/encoding/
    [xsd] => http://www.w3.org/2001/XMLSchema
    [soap] => http://schemas.xmlsoap.org/soap/envelope/
    [] => http://www.flatplanetphone.net/Integrics/Enswitch/API
) 
```

**你来自[Pastbin的 XML](http://pastebin.com/PLtMWQmg)**

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><get_cdrsResponse 
    xmlns="http://www.flatplanetphone.net/Integrics/Enswitch/API">
<s-gensym3>
<scustomer xsi:type="xsd:string">4458</scustomer>
<recording xsi:type="xsd:string" />
<outgroup_name xsi:type="xsd:string">abc</outgroup_name>
<bill_type xsi:type="xsd:string">prepaid</bill_type>
</s-gensym3>
</get_cdrsResponse>
</soap:Body>
</soap:Envelope>'; 
```

**解决方案**

```
$sxe = new SimpleXMLElement($xml);
$sxe->registerXPathNamespace("api", "http://www.flatplanetphone.net/Integrics/Enswitch/API");
$path = $sxe->xpath("//api:s-gensym3");
$info = array_shift($path);

if (!$info)
    throw new Exception("Invalid Response");

echo $info->scustomer, PHP_EOL;
echo $info->recording, PHP_EOL;
echo $info->outgroup_name, PHP_EOL;
echo $info->bill_type, PHP_EOL; 
```

**[输出](http://eval.in/13018)**

```
4458

abc
prepaid 
```

[观看现场演示](http://eval.in/13018)

=======================================

## 更新

=======================================

在处理多个孩子时，您可以忽略命名空间并使用[SimpleXMLElement::children](http://php.net/manual/en/simplexmlelement.children.php)

例子

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <get_cdrsResponse xmlns="http://www.flatplanetphone.net/Integrics/Enswitch/API">
            <s-gensym3>
                <scustomer xsi:type="xsd:string">4458</scustomer>
                <recording xsi:type="xsd:string" />
                <outgroup_name xsi:type="xsd:string">abc</outgroup_name>
                <bill_type xsi:type="xsd:string">prepaid14</bill_type>
            </s-gensym3>
            <s-gensym5>
                <scustomer xsi:type="xsd:string">4458</scustomer>
                <recording xsi:type="xsd:string" />
                <outgroup_name xsi:type="xsd:string">abcd</outgroup_name>
                <bill_type xsi:type="xsd:string">prepaid</bill_type>
            </s-gensym5>
            <s-gensym7>
                <scustomer xsi:type="xsd:string">4458</scustomer>
                <recording xsi:type="xsd:string" />
                <outgroup_name xsi:type="xsd:string">abce</outgroup_name>
                <bill_type xsi:type="xsd:string">prepaid13</bill_type>
            </s-gensym7>
            <s-gensym11>
                <scustomer xsi:type="xsd:string">4458</scustomer>
                <recording xsi:type="xsd:string" />
                <outgroup_name xsi:type="xsd:string">abcf</outgroup_name>
                <bill_type xsi:type="xsd:string">prepaid12</bill_type>
            </s-gensym11>
        </get_cdrsResponse>
    </soap:Body>
</soap:Envelope>';

$sxe = new SimpleXMLElement($xml);
$response = $sxe->children('soap', true)->Body->children()->get_cdrsResponse;

foreach ( $response->children() as $gensym ) {
    echo $gensym->scustomer, PHP_EOL;
    echo $gensym->recording, PHP_EOL;
    echo $gensym->outgroup_name, PHP_EOL;
    echo $gensym->bill_type, PHP_EOL;
    echo PHP_EOL;
    echo PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:37:57.043

当我更换你的线路时

`if ($xpath->query('/soap:Envelope/soap:Body/api:get_cdrsResponse')->length < 1)`

和：

`if ($xpath->query('/soap:Envelope/soap:Body/get_cdrsResponse')->length < 1)`

并从 get_cdrsResponse 中删除它的“xmlns”部分。所以问题出在部分`api:`..我注意到 get_cdrsResponse 中的 xmlns 返回 404 ( [http://www.flatplanetphone.net/Integrics/Enswitch/API](http://www.flatplanetphone.net/Integrics/Enswitch/API) )，所以我建议开始修复它。

# sed - 将文件 btw 2 正则表达式的 Sed 打印部分限制为第一次出现

> ID：15413519
> 
> 赞同：1
> 
> 时间：2013-03-14T15:31:53.017
> 
> 标签：sed

我正在解析文本天气数据：[http](http://www.nws.noaa.gov/view/prodsByState.php?state=OH&prodtype=hourly) ://www.nws.noaa.gov/view/prodsByState.php?state=OH&prodtype=hourly 并且只想获取我所在县/地区的数据。诀窍是每个文本报告都有当天早些时候的先前报告，我只对文件开头出现的最新报告感兴趣。我尝试使用 sed one 衬垫中的“两个正则表达式（包括）之间的文件打印部分”。我不知道如何让它在发生一次后停止。

```
sed -n '/OHZ061/,/OHZ062/p' /tmp/weather.html 
```

我发现了这个：[Sed 在模式之间打印第一个匹配结果](https://stackoverflow.com/questions/14351039/sed-print-between-patterns-the-first-match-result)，它适用于以下内容

```
sed -n '/OHZ061/,$p;/OHZ062/q' /tmp/weather.html 
```

但我觉得它不是最强大的解决方案。我没有任何东西可以支持稳健性的说法，但我有一种直觉，可能会有更稳健的解决方案。

那么有没有更好的解决方案呢？还有可能让我第一次尝试的解决方案起作用吗？如果您发布解决方案，请解释所有开关/反向引用/魔术，因为我仍在尝试发现 sed 和命令行工具的所有功能。

并帮助您开始：

```
wget -q "http://www.nws.noaa.gov/view/prodsByState.php?state=OH&prodtype=hourly" -O /tmp/weather.html 
```

ps：我看了这篇文章：[http](http://www.unix.com/shell-programming-scripting/167069-solved-sed-awk-print-between-patterns-first-occurrence.html) ://www.unix.com/shell-programming-scripting/167069-solved-sed-awk-print-between-patterns-first-occurrence.html但 sed 完全是希腊语我和我无法通过它来解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:01:30.943

不是`sed`因为我不喜欢用那个工具解析 HTML，而是在这里你有一个`perl`在 HTML 解析器的帮助下使用的解决方案，`HTML::TreeBuilder`. 代码是一步一步注释的，我觉得很容易理解。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use HTML::TreeBuilder;

##
## Get content of the web page.
##
open my $fh, '-|', 'wget -q -O- "http://www.nws.noaa.gov/view/prodsByState.php?state=OH&prodtype=hourly"' or die;

##
## Parse content into a tree structure.
##
my $tree = HTML::TreeBuilder->new;
$tree->parse_file( $fh ) || die;

## 
## Content is inside <pre>...</pre>, so search it in scalar context to get only
## the first one (the newest).
##
my $weather_data = $tree->find_by_tag_name( 'pre' )->as_text or die;

##
## Split data in "$$' and discard all tables of weather info but the first one.
##
my $last_weather_data = (split /(?m)^\$\$/, $weather_data, 2)[0];

## 
## Remove all data until the pattern "OHZ + digits" found in the text
##
$last_weather_data =~ s/\A.*(OHZ\d{3}.*)\z/$1/s;

## 
## Print result.
##
printf qq|%s\n|, $last_weather_data; 
```

像这样运行它：

```
perl script.pl 
```

在 2013 年 3 月 14 日的 23:00，它产生：

```
OHZ001>008-015>018-024>027-034-035-043-044-142300-
   NORTHWEST OHIO

CITY           SKY/WX    TMP DP  RH WIND       PRES   REMARKS
DEFIANCE       MOSUNNY   41  18  39 W7G17     30.17F
FINDLAY        SUNNY     39  21  48 W13       30.17F
TOLEDO EXPRESS SUNNY     41  19  41 W14       30.16F
TOLEDO METCALF MOSUNNY   42  21  43 W9        30.17S
LIMA           MOSUNNY   38  22  52 W12       30.18S 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:46:22.023

sed 是在单行上进行简单替换的出色工具。对于其他任何事情，只需使用 awk：

```
awk '/OHZ061/{found=1} found{print; if(/OHZ062/) exit}' /tmp/weather.html 
```

# python - 默认字典的内存错误（int）

> ID：15413526
> 
> 赞同：0
> 
> 时间：2013-03-14T15:32:02.553
> 
> 标签：python

我正在使用 defaultdict(int) 来记录一组书中单词出现的次数。

当我得到内存异常时，Python 正在消耗 1.5 Gigs 的内存：

```
 File "C:\Python32\lib\collections.py", line 540, in update
    _count_elements(self, iterable)
MemoryError 
```

我的柜台大小超过 8,000,000。

我至少有 20,000,000 个独特的单词要数。我该怎么做才能避免内存异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:12:26.617

即使您有一个带有大量内存的 64 位系统，我认为使用`dict`. 你应该使用数据库。

```
/* If we added a key, we can safely resize.  Otherwise just return!
 * If fill >= 2/3 size, adjust size.  Normally, this doubles or
 * quaduples the size, but it's also possible for the dict to shrink
 * (if ma_fill is much larger than ma_used, meaning a lot of dict
 * keys have been * deleted).
 *
 * Quadrupling the size improves average dictionary sparseness
 * (reducing collisions) at the cost of some memory and iteration
 * speed (which loops over every possible entry).  It also halves
 * the number of expensive resize operations in a growing dictionary.
 *
 * Very large dictionaries (over 50K items) use doubling instead.
 * This may help applications with severe memory constraints.
 */
if (!(mp->ma_used > n_used && mp->ma_fill*3 >= (mp->ma_mask+1)*2))
    return 0;
return dictresize(mp, (mp->ma_used > 50000 ? 2 : 4) * mp->ma_used); 
```

从[代码](http://svn.python.org/projects/python/trunk/Objects/dictobject.c)中可以看出，如果您插入太多项目，则 dict 必须增长 - 不仅为包含的项目提供空间，还为新项目提供插槽。它说如果超过 2/3 的 dict 被填充，则 dict 的大小将增加一倍（或少于 50,000 个项目的四倍）。我个人使用字典来包含少于几十万个项目。即使少于一百万个项目，它也消耗几千兆字节，几乎冻结了我的 8GB win7 机器。

如果您只是计算项目，您可以：

```
spilt the words in chunk
count the words in each chunk
update the database 
```

使用合理的块大小，执行一些数据库查询（假设数据库访问将成为瓶颈）会好得多。

# c - 数组的最大值和最小值

> ID：15413528
> 
> 赞同：5
> 
> 时间：2013-03-14T15:32:13.387
> 
> 标签：c, arrays

给出了一个包含 n 个数字的数组，其中 n 是偶数。需要确定这 n 个数字的最大值和最小值。我需要知道所需的比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:39:47.710

可以使用`3*n/2-2`比较来完成。

对于`n == 2`，只需比较两个数字。现在假设我们有第一个`n-2`数字的最小值和最大值。比较剩余的两个数字，然后将较大的与先前的最大值进行比较，将较小的与先前的最小值进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:36:11.577

它可以在 O(n) 时间内完成。

您可以查看此[链接](http://www.geeksforgeeks.org/maximum-and-minimum-in-an-array/)以供参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:02:12.463

对于未排序的数组，可以通过近似`1.5n`比较来完成。您可以通过比较数组的元素对并存储`min`和 local来做到这一点`max`。您已经进行了`n/2`比较以找到（本地）最大值并`n/2`找到最小值。因此，共`n`处于这个阶段。

现在你遍历最大和最小局部变量并找到全局最大值和最小值。这也需要`n/2`比较。因此`n + n / 2 = 1.5n`。

如果数组已排序，则无需任何比较即可找到它，因为最小的数字在位置 0 上，而最大的数字在位置 N - 1 上。

# php - Zend Framework Vanity Url 分页不起作用

> ID：15413531
> 
> 赞同：1
> 
> 时间：2013-03-14T15:32:15.597
> 
> 标签：php, zend-framework, zend-route, zend-paginator, vanity-url

我正在开发一个 Zend Framework 应用程序，我刚刚使用[http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework/](http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework/)上的指南让我的虚荣路由工作，但我的分页不起作用，我找不到任何虚荣的 url 指南。

我的虚荣路线设置为`/:username/:filter/:pag`'，其中最后两个参数是可选的。页面显示正确，“/jaimerump/badges/2”将转到我的徽章的第二页，但分页器无法正常工作，因为它似乎无法确定下一页的 url 应该是什么。我正在使用每个 Zend 分页教程中的标准 paginationControl.phtml 文件，代码如下：

```
<?php if ($this->pageCount): ?>
<div class="paginationControl" id="paginationControl">
<!-- Previous page link -->
<?php if (isset($this->previous)): ?>
    <a href="<?php echo $this->url(array('page' => $this->previous)); ?>" id="previous">
        &lt; Previous
    </a> |
<?php else: ?>
    <span class="disabled">&lt; Previous</span> |
<?php endif; ?>

<!-- Infinite Scroll doesn't use numbered page links -->

<!-- Next page link -->
<?php if (isset($this->next)): ?>
    <a id="next" href="<?php echo $this->url(array('page' => $this->next)); ?>" >
    Next &gt;
    </a>
<?php else: ?>
    <span class="disabled">Next &gt;</span>
<?php endif; ?>
</div>
<?php endif; ?> 
```

不是返回“/jaimerump/badges/3”，而是`$this->url()`返回“/”。我确信这与我的自定义路由类有关。我从 Tim Fountain 的教程中更改了 match 函数，并将类的名称更改为 VanityRouteUser 并将其放在我的模型文件夹中，但除此之外，一切都是相同的。匹配功能：

```
public function match( $path, $partial = false )
{
    /* User profile routes are of form /:username/:filter/:page
    Where filter can be haves, wants, badges, etc.
    */

    if ($path instanceof Zend_Controller_Request_Http) {
        $path = $path->getPathInfo();
    }

    $path = trim($path, $this->_urlDelimiter);
    $pathBits = explode($this->_urlDelimiter, $path);

    if ( count($pathBits) < 1 ) {
        return false;
    }

    // check database for this user
    $result = DB::call()->fetchRow('SELECT user_id 
                                    FROM users 
                                    WHERE username = ?', $pathBits[0]);
    if ($result) {
        // user found
        $values = $this->_defaults;
        $values['username'] = $pathBits[0];
        $values['page'] = ( empty( $pathBits[2] ) )?1:$pathBits[2]; //if they didn't provide a page

        // figure out which action based on second segment
        $filter = $pathBits[1];
        if( empty( $filter ) || $filter == 'default' 
            || $filter == 'haves' || $filter == 'wants' ){
            //Looking for user's haves, wants, or both 
            $values['action'] = 'index';
            $values['filter'] = ( empty($filter) )?'default':$filter; //To catch the blank
        }
        else if( $filter == 'badges' ){
            //Looking for user's badges
            $values['action'] = 'badges';
        }
        else if( $filter == 'shelves' ){
            //Looking for user's shelves
            $values['action'] = 'shelves';
        }
        else{
            //Must be a shelf id
            $values['action'] = 'index';
            $values['filter'] = $filter;
        }

        return $values;
    }

    return false;
} 
```

是什么`$this->url()`？我无法在 Zend Paginator 中找到 url 函数。我假设它正在调用路由类中的某个函数来尝试获取下一页的 url。它调用了什么函数，我必须重载它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:50:01.137

问题是汇编功能。我试图使用 Tim Fountain 教程中提供的功能，即：

```
public function assemble($data = array(), $reset = false, $encode = false)
{
    return $data['username'];
} 
```

我得到了'/'，因为`$data['username']`它是未定义的；路由器只提供了一个页面参数。在编写您自己的自定义路由类时，您的 assemble 函数必须为未在数据数组中传入的任何段提供默认值。修复它：

```
public function assemble($data = array(), $reset = false, $encode = false)
{
    //Check if username was provided
    $username = ( $data['username'] )?$data['username']:$this->_defaults['username'];

    //Check if filter was provided
    $filter = ( $data['filter'] )?$data['filter']:$this->_defaults['filter'];

    //Check if page was provided
    $page = ( $data['page'] )?$data['page']:$this->_defaults['page'];

    return $username.'/'.$filter.'/'.$page;
} 
```

# unix - ps –ef|grep java 和 ps –ef|grep *.java 的区别

> ID：15413539
> 
> 赞同：4
> 
> 时间：2013-03-14T15:32:33.177
> 
> 标签：unix, grep

我试图在 unix 框中找到所有正在运行的 java 进程。我很困惑

```
ps –ef|grep java 
```

和

```
ps –ef|grep *.java 
```

哪一个是正确的，确切的区别是什么？

PS：两者都返回不同的结果集

的输出`ps –ef|grep *.java`

```
ps -ef | grep *.java
aaassa1  7507  2304  0 11:49 pts/4    00:00:00 grep *.java 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:50:35.050

`grep`只是文本匹配，它不知道进程名称或文件名等。

也就是说，如果你有一个名为 的python 脚本`likejava.py`，它也会在结果中。

回到你的问题，你`*.java`的不好，因为 grep 使用正则表达式，而不是 glob 模式。

你可以试试：

`ps -ef|grep $(which java)`这将列出 java 进程，但仅适用于您的默认 java 安装。如果您安装了多个 Java，例如您的 Jboss 使用 java7，tomcat 使用 java6，eclipse 使用 java5，这将失败。

还有一个工具叫做`pgrep`. 你可以试一试，例如

```
pgrep -l java 
```

你可以做得到`man pgrep`更多的信息：

```
pgrep, pkill - look up or signal processes based on name and other attributes 
```

**编辑**添加一个小**ps..|grep 技巧**

刚刚在问题中看到了您的输出：

你有`grep *.java`输出，这是一个很好的例子。`grep *.java`不是java进程，但它有文本“java”。所以它就在那里。

`ps...|grep [j]ava`你可以通过为 bash 工作来避免它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:40:10.780

第一个是正确的。第二，你的 shell 会`*.java`根据你当前的工作目录进行扩展，结果很有趣。

这些结果到底是什么......我在这里猜测，但假设你有文件`foo.java`并且`bar.java`在你当前的目录中，后者实际上正在做：

```
ps -ef | grep bar.java foo.java 
```

~~*我相信*，它只会在foo.java中搜索 bar.java，而忽略来自`ps`. 但不要引用我的话——~~关键是它几乎肯定不是你想要的。

# python - Google App Engine 中的静态文件统计

> ID：15413546
> 
> 赞同：2
> 
> 时间：2013-03-14T15:33:00.780
> 
> 标签：python, google-app-engine

我在 Google App Engine 中设置了一些静态文件，想知道是否有任何方法可以跟踪用户访问这些静态文件的次数。

我在 app.yaml 中添加了这样的文件：

```
- url: /files
  static_dir: files 
```

如果可能的话，我想跟踪我获得了多少下载。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:23:29.197

每次有人请求文件（或任何类型的请求）时，Google App Engine 都会记录它。所以理论上你可以写一个应用程序来做这件事，因为他们有[Logs API](https://developers.google.com/appengine/docs/python/logs/functions)。

否则，您可以简单地通过应用程序的仪表板检查

```
https://appengine.google.com/logs?app_id=s~app-name 
```

并从那里通过选项添加一些过滤器。

# jquery - 有没有办法让 jQuery 中的选择器相交

> ID：15413547
> 
> 赞同：5
> 
> 时间：2013-03-14T15:33:03.810
> 
> 标签：jquery

我有一组 4 个元素。每个属于 4 个类中的 2 个，因此每个类组合都是唯一的。我想找到一种方法，使用 jQuery，根据其独特的类组合仅选择一个元素。这可能吗？

我期待类似的东西

```
$(".class1 & .class2") 
```

这合理吗？

jsFiddle 示例：http: [//jsfiddle.net/7UfYH/](http://jsfiddle.net/7UfYH/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T15:34:13.530

你可以做

```
$(".class1.class2") 
```

但我实际上不明白你的小提琴与此有什么关系。你想达到什么目的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:35:49.970

对于一个仍然有效的糟糕解决方案......

```
$('.class1').filter('.class2'); 
```

或者

```
$('.class2').filter('.class1'); 
```

注意，$('.class1.class2') 选择器无疑是最快的解决方案。但是，如果任何看到这个答案的人从来不知道是什么`filter()`，那么他们现在已经掌握得很好，并且可以扩展该逻辑。

考虑一下如果有人问“我如何在 jQuery 中选择一个 ID 为什么的元素？” 显然，最快/最明显的答案是`$('#id')`。但是诸如`$('*[id="' + id + '"]')`提供替代见解之类的答案可能比显而易见的答案本身更有用，也可能不更有用。

# ruby - Selenium Server 的行为与 WebDriver 不同

> ID：15413548
> 
> 赞同：0
> 
> 时间：2013-03-14T15:33:04.397
> 
> 标签：ruby, cucumber, selenium-webdriver

我遇到了硒问题。我会尽力解释我的设置以及我正在尝试做的事情。

## 简短版本：

使用 ruby​​ webdriver gem 在本地运行我的自动化测试工作正常。通过 selenium-server 独立 jar 运行完全相同的脚本（无论是远程还是本地）如果没有对代码进行奇怪的更改，将无法正常工作。

*   有没有办法获得与 webdriver 客户端库行为相同的 selenium 服务器独立 jar 版本？
*   或者是否有一些远程 ruby​​ gem 版本的 selenium 服务器，以便 selenium 的 gemified 版本可以远程工作？

基本总结：“我觉得我在 Hooters 并要求我吃饭。我在这里错过了一些非常基本的东西。”

## 我正在尝试做的事情：

我正在尝试自动化测试 Web 应用程序。这个想法是能够加载公司的网站，然后像真实用户一样与页面元素进行交互（单击链接、将文本放入文本框、选择单选按钮和复选框等）。我在 mac (10.8.2) 上使用 ruby​​ 1.9.3 和 selenium-webdriver gem 为 ruby​​ 开发了这些测试。我自己创建了一个 ruby​​ 包装库，我称之为“WebAutomation.rb”，我在其中创建了自己的方法来单击元素。我制作的其中一种包装方法的示例如下：

```
def WebAutomation.click_element_by_attribute(attribute_name, attribute_value, tag, contains=true)
  element = WebAutomation.find_element_by_attribute(attribute_name, attribute_value, tag, contains)
  @log.debug("Element returned: #{element}")
  raise "Could not click element with #{attribute_name} attribute of #{attribute_value}" unless element.click
end 
```

WebAutomation.find_element_by_attribute 调用另一个方法来查看我给它的所有元素。作为另一个抽象层，我不是直接运行 ruby​​ 代码，而是通过黄瓜脚本运行它。这不是我的问题。这段代码都在本地工作——我的意思是当自动驱动的浏览器是正在运行的代码的本地时。

但是，我希望一切都像花哨一样，并且不必在本地运行代码，因为我在 Mac 上，假设我想做跨浏览器测试，就像在 IE 上运行它一样。所以我有一台远程mac和一台远程windows笔记本电脑，目的是通过像Jenkins这样的系统来运行它，Jenkins盒子可以告诉这些远程机器运行浏览器测试。我还没有那么担心詹金斯。我只是想让测试的远程版本通过。

## 我的烦恼：

在本地运行我的 cucumber/ruby 脚本效果很好。他们太棒了，我以为我就是那个人。然后我使用相同的浏览器（chrome）将它运行到远程mac，一切都结束了。

这就是我正在做的事情：

在远程 Mac 笔记本电脑上，我下载了 selenium-server 独立 jar 并像这样启动它：

```
java -jar selenium-server-standalone-2.31.0.jar 
```

我看起来很高兴：

```
Mar 14, 2013 8:00:06 AM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
08:00:11.606 INFO - Java: Oracle Corporation 23.6-b04
08:00:11.608 INFO - OS: Mac OS X 10.8.2 x86_64
08:00:11.616 INFO - v2.31.0, with Core v2.31.0\. Built from revision 1bd294d
08:00:11.728 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
08:00:11.729 INFO - Version Jetty/5.1.x
08:00:11.730 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
08:00:11.730 INFO - Started HttpContext[/selenium-server,/selenium-server]
08:00:11.731 INFO - Started HttpContext[/,/]
08:00:11.744 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@4f8429d6
08:00:11.744 INFO - Started HttpContext[/wd,/wd]
08:00:11.747 INFO - Started SocketListener on 0.0.0.0:4444
08:00:11.747 INFO - Started org.openqa.jetty.jetty.Server@4dfbca86 
```

然后我运行我的黄瓜脚本，向它传递一些命令行参数，告诉它转到远程 Mac 笔记本电脑的 IP 以及运行什么浏览器以及我希望浏览器为我们的应用程序转到什么环境（这不是重要的）。

它看起来像这样：

```
 cucumber REMOTE_URL=http://10.110.10.233:4444/wd/hub BROWSER=chrome JJ_ENV=staging features/jabberjaw/contact_us.feature:3 
```

我有代码，当传递 REMOTE_URL 参数时，调用远程浏览器而不是本地浏览器。被执行的代码如下：

```
#This is the code that runs for a local browser
def WebAutomation.set_browser(browser)
  @log.debug("Starting browser: #{browser}")
  @driver = Selenium::WebDriver.for(browser)
end

#If the remote url is passed in, then I make a remote browser
def WebAutomation.set_remote_browser(url, browser)
  @log.debug("Starting remote browser: #{browser} at #{url}")
  @driver = Selenium::WebDriver.for(:remote, :url => url, :desired_capabilities => browser)
end 
```

浏览器窗口会在远程机器上弹出，它会转到正确的 url 并登录。但是，当远程运行时，selenium-server 似乎在单击屏幕上不可见的元素时出现问题。我用

```
@driver.action.move_to(element, 100, 100).perform 
```

我必须添加 100、100 偏移，因为即使移动似乎也只能到达左上角，并且元素仍然不在屏幕上。另一件事是您知道我引发的异常，除非 element.click（上面的代码）？是的，无论点击是否真的发生，都会触发，因为由于某种原因，远程版本（selenium-server）在 element.click 上返回 nil 是否成功。当我在本地运行相同的代码（它使用 webdriver gem）时，它会在成功时给我一个 {}，在不成功时给我一个 nil。因此，要让这段代码在 chrome 上远程工作，我必须执行以下操作：

```
def WebAutomation.click_element_by_attribute(attribute_name, attribute_value, tag, contains=true)
  element = WebAutomation.find_element_by_attribute(attribute_name, attribute_value, tag, contains)
  @driver.action.move_to(element, 100, 100).perform
  @log.debug("Element returned: #{element}")
  element.click
end 
```

本质上，明确地移动到找到的元素，并且只相信点击是有效的。是的，对于黄瓜，我确实有一层薄薄的保护，因为脚本中的下一步应该是 Then 步骤，检查单击应该执行的任何操作是否成功，但是我必须取出那个异常感觉不对并可能让自己接受误报。

甚至这个更改的代码在远程版本的 firefox 上也完全失败（我不得不向下移动到 firefox 18，因为 18 以上的任何东西似乎都不适用于 selenium webdriver - 即使在本地 - 它只是打开浏览器窗口而没有做任何其他事情）。在 Firefox 上，浏览器窗口出现，导航到 url，登录（到目前为止，它就像 chrome），但它只是给了我手指并说“MoveElementTargetOutOfBoundsException”。

我还尝试取出“远程”并尝试在本地运行 selenium-server jar 并在本地浏览器上运行我的测试，但通过 selenium-server jar。像这样！

```
cucumber REMOTE_URL=http://localhost:4444/wd/hub BROWSER=chrome JJ_ENV=staging features/jabberjaw/contact_us.feature:3 
```

而且我得到了相同的结果，所以我非常确信我的问题是 selenium-server jar 对我的脚本的解释与我的 selenium webdriver gem 完全不同。我不可能是第一个遇到这个问题的人，但我已经用谷歌搜索，直到我的眼睛流血并且找不到解决方案。

必须以某种方式远程解释本地运行的客户端代码，是吗？这不可能是一个新问题，因为如果我必须创建奇怪的自定义代码来确定我是在本地运行还是远程运行以及它是否是 chrome 以及是否是 firefox，那么整个“自动化是强大而令人敬畏的，因为你可以做交叉- 跨环境的浏览器测试和扩展”是一些蛋黄酱包装的芝士蛋糕。那个奶油馅？不要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:18:41.840

所以看起来我能够找到部分解决方案。

显然，仅仅启动 selenium 服务器独立 jar 是不够的。以下让我更进一步。

在服务器系统上（将打开并与实际浏览器交互的远程系统）：

```
java -jar selenium-server-standalone-2.31.0.jar -role hub 
```

然后在一个新的终端窗口中（仍然是服务器系统）：

```
java -jar selenium-server-standalone-2.31.0.jar -role node http://localhost:4444/grid/register 
```

然后在客户端系统上（带有实际黄瓜和 webdriver 脚本的系统）

```
cucumber REMOTE_URL=http://10.110.10.233:4444/wd/hub BROWSER=firefox JJ_ENV=staging 
```

**注意，如果您在家里跟随，此命令将有所不同，因为我编写了脚本以接受 REMOTE_URL 和 BROWSER 变量以映射到远程 webdriver 调用。

无论如何，这允许没有显式移动方法的原始代码工作。我仍然必须消除我的加注条件，因为远程访问时，无论成功与否，点击仍然给我零。Firefox 也不再抛出 MoveElementTargetOutOfBoundsException。

测试似乎仍然比在本地运行时脆弱得多，但至少是一些进步。如果有人知道为什么我的点击在远程运行时总是给我“零”，无论成功与否，我都会很感激。如果有人还知道为什么添加这些角色参数（可能还有注册）与`java -jar seleneium-server-standalone-2.31.0.jar`我阅读的几乎所有教程都告诉我要做的常规命令相比，为什么添加这些角色参数（可能还有注册）似乎可以稳定事情，我会对此感兴趣。

然而，就像一大碗纤维一样，这些命令至少让我畅通无阻。没有什么比大堵塞更糟糕的了。我希望如果其他人也有类似的麻烦，这也能帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:06:04.170

我也让自己在 Windows 远程测试上畅通无阻。显然，为此，我需要获取 chromedriver.exe 和 ieserverdriver.exe 并将它们放在服务器系统上。在windows上，你仍然需要启动hub，但是在启动节点时，你需要添加以下参数：

```
-Dwebdriver.chrome.driver=<path_to_chromedriver.exe> -Dwebdriver.ie.driver=<path_to_ieserverdriver.exe> 
```

然后在我的客户端机器上，我不得不使用端口 5555 而不是 4444。

# matlab - matlab帮助，doc命令很慢

> ID：15413553
> 
> 赞同：5
> 
> 时间：2013-03-14T15:33:12.983
> 
> 标签：matlab

我无法解释为什么会这样做，但是由于几天后的帮助需要很多时间才能显示出来。内联（选择函数，选择“帮助”），或使用命令`doc`或`help`. 该命令`doc cmdname`大约需要 10 秒才能显示帮助窗口。举个例子，我`fwrite`尝试`profile on;doc fwrite;profile viewer`挖掘兔子洞，我找到了一个私有的 java matlab 方法，该方法永远需要：

```
tic;
com.mathworks.mlwidgets.help.HelpUtils.getDocCommandArg('matlab\fwrite', true);
toc 

Elapsed time is 9.993832 seconds. 
```

知道是什么导致了这个问题吗？它也发生在安全模式下，除了 MATLAB 没有其他正在运行的程序。我会尝试完全重新安装 MATLAB，但如果我能避免这种情况那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:24:00.167

有几件事可能会导致此问题，但鉴于您提供的信息，很难确切地说出发生了什么。

当 R2012b 帮助系统初始化时，它会执行一些有时会引入明显延迟的任务，主要与确定哪些 MathWorks 产品可用以及如何设置帮助首选项有关。10 秒是不寻常的，但这有可能是导致延迟的原因。如果您在第一次使用帮助系统时看到性能下降，但在同一个 MATLAB 会话中没有再次出现，这可能是原因。此行为在 R2013a 中得到改进。

除了初始化任务之外，所讨论的 Java 调用是针对用于搜索文档的相同搜索索引的相对简单的搜索。如果您发现在帮助浏览器中搜索文档的速度很慢，这表明性能问题存在于帮助系统的搜索功能中。

无论哪种情况，您最好的选择可能是[联系 MathWorks 技术支持](http://www.mathworks.com/support/contact_us/index.html)。我们很可能可以仔细研究一下，并可能想出某种修复方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:42:13.440

该问题已通过 mathworks 支持的输入解决：

```
>> tic;doc fwrite;toc
Elapsed time is 20.301202 seconds.

>> tic;reader = org.apache.lucene.index.IndexReader.open(fullfile(docroot,'helpsearch'));
searcher = org.apache.lucene.search.IndexSearcher(reader);
term = org.apache.lucene.index.Term('relpath','ref/plot.html');
query = org.apache.lucene.search.TermQuery(term);
hits = searcher.search(query);
fprintf('Found %d results\n', hits.length); searcher.close; reader.close; toc;
Java exception occurred:
java.io.IOException: Lock obtain timed out:
Lock@C:\Users\b\AppData\Local\Temp\lucene-ca3070c312bc20732565936b371a8bd3-     commit.lock
at
org.apache.lucene.store.Lock.obtain(Lock.java:56)
at
org.apache.lucene.store.Lock$With.run(Lock.java:98)
at
org.apache.lucene.index.IndexReader.open(IndexReader.java:141)
at
org.apache.lucene.index.IndexReader.open(IndexReader.java:125) 
```

之后，我认为这是临时文件被锁定的问题，我关闭了 Matlab，进入 AppData\Local\Temp\ 并清理了其中的所有临时文件。

```
>> tic;
reader = org.apache.lucene.index.IndexReader.open(fullfile(docroot,'helpsearch'));
searcher = org.apache.lucene.search.IndexSearcher(reader);
term = org.apache.lucene.index.Term('relpath','ref/plot.html');
query = org.apache.lucene.search.TermQuery(term);
hits = searcher.search(query);
fprintf('Found %d results\n', hits.length); searcher.close; reader.close; toc;
Found 5 results
Elapsed time is 0.106868 seconds.

>> tic;doc fwrite;toc
Elapsed time is 0.153808 seconds. 
```

要么是清理临时文件，要么是对内部 java 类 org.apache.lucene* 的引用起到了作用，但就是这样，现在 doc 又快了。

# knockout.js - 无法将 JSON 对象映射到 ViewModel（敲除 js）

> ID：15413556
> 
> 赞同：2
> 
> 时间：2013-03-14T15:33:21.163
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在从 WCF 服务接收 json 数据，并希望将其映射到我的 viewModel。

***JSON数据：***

```
 {"bios" :
        { "Caption" : "something",
          "Version": "something else",
           ....
        }
    } 
```

我的**HTML**部分如下：

```
<ul class="biosContentUL">
              <li class="biosContentLI">
                  <p>
                     <b>Caption: </b><span data-bind="text: bios.Caption"></span>
                  </p>
                </li>

               <li class="biosContentLI">
                    <p>
                     <b>Version: </b><span data-bind="text: bios.Version"></span>
                    </p>
                </li>
               .......
</ul> 
```

我的**视图模型**如下：

```
var viewModel = {
    bios: ko.observable(),
    cpu: ko.observable(),
    .....
}

$(document).ready(function () {
    ko.applyBindings(viewModel);
}
); 
```

我正在尝试使用映射插件，但无法使其正常工作。

```
function showBios() {
var response = $.ajax({
        type: "GET",
        datatype: "json",
        url: "...",
        success: function (data) {
            objJS= jQuery.parseJSON(data);
            viewModel.bios(ko.mapping.fromJS(objJS));

             // I also tried this:
            //  ko.mapping.fromJS(objJS, {}, viewModel);
        }
      }); 
```

以下代码有效，但我的 ViewModel 中也有 observableArrays，所以如果我再调用一次 applyBindings()，我会丢失它们的内容。

```
viewModel.bios = ko.mapping.fromJS(objJS);
ko.applyBindings(viewModel); 
```

如何将接收到的数据映射到我的 viewModel 属性“bios”？为页面的每个部分拥有多个视图模型是否是一种好方法，所以在每个模型中我可以声明简单的属性，而不是复杂的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:36:27.540

我通常只喜欢在加载页面时调用一次 applybindings，但这确实意味着您需要在页面加载时创建所有要绑定的 observables。您可以为 bios 创建一个子视图模型，以及您想要绑定的 observables，然后始终使用 update fromJSON 方法来填充它。

你有没有尝试过：

```
function biosViewModel()
{
    var self = this;
    self.Caption = ko.observable();
    self.Version = ko.observable();
}

var viewModel =
{
    bios: ko.observable(new biosViewModel()),
    cpu: ko.observable()
} 
```

然后，在您的成功方法中：

```
ko.mapping.fromJSON(data, viewModel.bios()); 
```

使用从服务器返回的数据更新对象。

# mysql - mysql查询语句中的错误，按查询排序

> ID：15413559
> 
> 赞同：0
> 
> 时间：2013-03-14T15:33:26.337
> 
> 标签：mysql, jsp

我正在使用 jsp 页面，我可以轻松完成简单的选择查询，但由于我是新蜜蜂，我不知道如何编写查询..我在选中复选框的基础上，我想显示排序数据.. .为此我写了以下代码

```
java.sql.ResultSet rs;
               out.println(sort.toString());
                 StringBuffer myquery=new StringBuffer("select * from message");

              if(count != 0)
              { 
               myquery.append(" ORDER BY ");

               myquery.append(sort);
                } 
                 rs=stmt.executeQuery(myquery.toString()); 
```

在上面..**排序是包含列字段的字符串，**我想对其进行排序...但它给了我 sql 查询语句错误我该如何解决或重写语句..

# c++ - 使 QGraphicsProxyWidget 可移动和可选择

> ID：15413564
> 
> 赞同：5
> 
> 时间：2013-03-14T15:33:42.493
> 
> 标签：c++, qt

我想将 a`QWidget`放入 a`QGraphicsView`并使用`QGraphicsProxyWidget`. （这非常适用于`QGraphicsRectItem`等`QGraphicItem`）

这是我目前使用的代码：

```
// Create new QGraphicsScene and assign to graphicsView
scene = new QGraphicsScene(this);
ui->graphicsView->setScene(scene);

// Create widget and add to scene
MyWidget *widget = new MyWidget;
QGraphicsProxyWidget *proxy = scene->addWidget(widget);

// Make selectable
proxy->setFlag(QGraphicsItem::ItemIsSelectable, true);
// Make movable
proxy->setFlag(QGraphicsItem::ItemIsMovable, true); 
```

小部件显示正确，但既不可移动也不可选择！

任何帮助将不胜感激 ;）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-02-28T16:00:06.667

我问自己和你在这里问的一样的问题。在我继续解决这个问题之前，我想出了几个小时的解决方案，我不得不提一下，**如果你想在场景中添加大量的小部件，一般来说，向场景中添加小部件并不是一个好主意**。[您可以在此处](http://blog.qt.io/blog/2010/01/11/qt-graphics-and-performance-the-cost-of-convenience/)阅读有关此问题的信息。

现在回到正轨。以下是在尝试实现您想要的事情时出现的一些重大问题：

*   如果您弄乱了小部件代理的`mouseMove()`和`mouseHover()`，您将搞砸小部件的 UI 组件的行为方式。
*   同时您希望它是可选择和可移动的，因此您必须以某种方式将此类功能添加到小部件代理

我们如何做到这一点？好吧，直接这似乎是不可能的。但是我想出了一个简单的解决方案来完成工作 - 将 a`QGraphicsProxyWidget`与 a结合起来`QGraphicsItem`！

为了在您的小部件中保留 UI 组件的功能，您需要将代理作为子项添加到图形项。另一方面，图形项（代理的父项）将覆盖选择和移动部分。

这是一个小演示（我不排除错误，因为这是我目前正在研究的东西，而且大部分时间我使用 PyQt 而不是 C++ Qt）：

**带有可移动代理的场景.ui**

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>SceneWithMovableProxies</class>
 <widget class="QWidget" name="SceneWithMovableProxies">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>400</width>
    <height>300</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>SceneWithMovableProxies</string>
  </property>
  <layout class="QGridLayout" name="gridLayout">
   <item row="0" column="0">
    <widget class="QGraphicsView" name="graphicsView"/>
   </item>
  </layout>
 </widget>
 <layoutdefault spacing="6" margin="11"/>
 <resources/>
 <connections/>
</ui> 
```

**主文件**

```
#include "scenewithmovableproxies.hpp"
#include <QApplication>

int main(int argc, char *argv[])
{
  QApplication a(argc, argv);
  SceneWithMovableProxies w;
  w.show();

  return a.exec();
} 
```

**带有可移动代理的场景.hpp**

```
#ifndef SCENEWITHMOVABLEPROXIES_HPP
#define SCENEWITHMOVABLEPROXIES_HPP

#include <QWidget>
#include <QPoint>

namespace Ui {
  class SceneWithMovableProxies;
}

class SceneWithMovableProxies : public QWidget
{
    Q_OBJECT

  public:
    explicit SceneWithMovableProxies(QWidget *parent = 0);
    ~SceneWithMovableProxies();

  private:
    Ui::SceneWithMovableProxies *ui;
    void addWidgetToScene(QPoint initPos);
};

#endif // SCENEWITHMOVABLEPROXIES_HPP 
```

**带有可移动代理的场景.cpp**

```
#include "scenewithmovableproxies.hpp"
#include "ui_scenewithmovableproxies.h"
#include "scenewidgetitem.hpp"
#include <QGraphicsProxyWidget>

SceneWithMovableProxies::SceneWithMovableProxies(QWidget *parent) :
  QWidget(parent),
  ui(new Ui::SceneWithMovableProxies)
{
  ui->setupUi(this);
  ui->graphicsView->setRenderHint(QPainter::Antialiasing);
  ui->graphicsView->setScene(new QGraphicsScene(this));

  // Add widget proxies + their parenting graphics items to scene
  addWidgetToScene(QPoint(10, 10));
  addWidgetToScene(QPoint(300, 100));
  addWidgetToScene(QPoint(200, 200));
}

SceneWithMovableProxies::~SceneWithMovableProxies()
{
  delete ui;
}

void SceneWithMovableProxies::addWidgetToScene(QPoint initPos)
{
  // Create a widget
  SceneWidgetItem *widget = new SceneWidgetItem();
  // Create the graphics item that will be used to move the widget around the screen as well as be selectable (for example in case we want to delete a widget that is in the scene)
  // Depending on the position of the graphics item relative to its widget proxy you can adjust the size and location of both
  QGraphicsRectItem *proxyControl = ui->graphicsView->scene()->addRect(initPos.x(), initPos.y(), widget->width(), 20, QPen(Qt::black), QBrush(Qt::darkGreen)); // widget->width() works properly here because of the resize(layout->sizeHint()) that we have used inside it
  proxyControl->setFlag(QGraphicsItem::ItemIsMovable, true);
  proxyControl->setFlag(QGraphicsItem::ItemIsSelectable, true);
  // Create the proxy by adding the widget to the scene
  QGraphicsProxyWidget * const proxy = ui->graphicsView->scene()->addWidget(widget);
  // In my case the rectangular graphics item is supposed to be above my widget so the position of the widget is shifted along the Y axis based on the height of the rectangle of that graphics item
  proxy->setPos(initPos.x(), initPos.y()+proxyControl->rect().height());
  proxy->setParentItem(proxyControl);

  // proxyControl->setRotation(45); // Because the widget is a child of the graphics item if we do some sort of transformation to it, the change will be propagated to the widget too!
} 
```

**场景小部件.hpp**

```
#ifndef SCENEWIDGETITEM_HPP
#define SCENEWIDGETITEM_HPP

#include <QWidget>
#include <QVBoxLayout>
#include <QCheckBox>
#include <QComboBox>
#include <QLabel>
#include <QPushButton>

class SceneWidgetItem : public QWidget
{
    Q_OBJECT
    QVBoxLayout *layout;
    QLabel *label;
    QCheckBox *checkbox;
    QComboBox *combobox;
    QPushButton *resetButton;
  public:
    explicit SceneWidgetItem(QWidget *parent = 0);
    ~SceneWidgetItem();

  signals:

  public slots:
    void reset();
};

#endif // SCENEWIDGETITEM_HPP 
```

**场景小部件.cpp**

```
#include "scenewidgetitem.hpp"

// Create a widget with whichever UI components you like
SceneWidgetItem::SceneWidgetItem(QWidget *parent) : QWidget(parent)
{
  layout = new QVBoxLayout(this);
  checkbox = new QCheckBox("Enable proxy", this);
  checkbox->setChecked(true);
  combobox = new QComboBox(this);
  combobox->addItem("---");
  combobox->addItem("Item 1");
  combobox->addItem("Item 2");
  combobox->addItem("Item 3");
  label = new QLabel(this);
  label->setText(combobox->itemText(0));
  resetButton = new QPushButton("Reset", this);

  // Maybe add some signals :P
  connect(checkbox, SIGNAL(toggled(bool)), combobox, SLOT(setEnabled(bool)));
  connect(checkbox, SIGNAL(toggled(bool)), resetButton, SLOT(setEnabled(bool)));
  connect(resetButton, SIGNAL(clicked(bool)), this, SLOT(reset()));
  connect(combobox, SIGNAL(currentIndexChanged(QString)), label, SLOT(setText(QString)));

  layout->addWidget(checkbox);
  layout->addWidget(label);
  layout->addWidget(resetButton);
  layout->addWidget(combobox);

  // Resizing the widget to its layout's content is very important. If 
  // you don't do that the parenting graphics item will not visually fit 
  // to its child widget and you will get a mess
  resize(layout->sizeHint());
  setLayout(layout);
}

SceneWidgetItem::~SceneWidgetItem()
{

}

void SceneWidgetItem::reset()
{
  combobox->setCurrentIndex(0);
  label->setText("---");
} 
```

以下是一些截图：

**初始视图** [![在此处输入图像描述](../Images/76b53a81f2982d14c8cc609be364a467.png)](https://i.stack.imgur.com/Ee8q4.png)

**三分之二被选中** [![在此处输入图像描述](../Images/f919bfc739e6b526089569e8c0cc5da0.png)](https://i.stack.imgur.com/TWID1.png)

**移动** [![在此处输入图像描述](../Images/88aa54f78693df0d531bdbe81a8937f3.png)](https://i.stack.imgur.com/Pa8YT.png)

**旋转**

[![在此处输入图像描述](../Images/56e127d09eb3d6a85ee4f2e4784f2671.png)](https://i.stack.imgur.com/AGKhp.png)

**与小部件交互 - 使用 QComboBox** [![在此处输入图像描述](../Images/1d836883e4954fc9da2e3fde9c17e057.png)](https://i.stack.imgur.com/aJNzi.png)

**与小部件交互 - 使用 QCheckBox** [![在此处输入图像描述](../Images/e9d46a0b225079b9022866232507e5cf.png)](https://i.stack.imgur.com/cb0vL.png)

现在由于`QGraphicsItem`（以及`QGraphicsProxyWidget`）的性质，存在一些问题，其中最烦人的是重叠

**重叠** [![在此处输入图像描述](../Images/5d9d556506f48d326aafd28c9d08096f.png)](https://i.stack.imgur.com/hdVZE.png)

然而，通过使用碰撞检测可以相对容易地避免重叠，并且基本上**不允许重叠**。由于`QGraphicsProxyWidget`也可以使用该`QGraphicsItem`功能`collisionWithItem(...)`，因此您可以实现一种机制来处理这种情况。由于我是新手`QGraphicsScene`（2天前开始在SO :D上回答问题时开始），因此可能有某种综合机制`QGraphicsScene`本身来处理这个问题。

**失真** 在旋转屏幕截图中，您可能已经注意到以前完美的直线出现了一些视觉上的怪异。这些就是所谓的**锯齿状**。目前我不知道如何摆脱这些。我曾尝试使用**高质量的抗锯齿**，但结果甚至比仅使用抗锯齿 ( `QPainter::Antialiasing`) 还要糟糕。

**进一步的研究** 我实际上目前正在做我的一个小项目，我想为图像处理创建一个基于复合节点的 UI。在线查找此主题总是返回人们使用 simple `QGraphicsItem`s 并且节点配置本身部分外包给`QGraphicsViewer`小部件外部的解决方案。您可以使用我上面描述的设计，并根据您以后想要做的事情添加更多内容。多个`QGraphicItem`s 也可以附加到小部件代理。您可能会为此发疯，但请记住这会对性能产生影响（请阅读我在答案开头一次又一次地链接的博客文章）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-29T16:01:31.547

这种行为不是 QGraphicsProxyWidget 想要的，例如考虑你有一个 QTextEdit 小部件并且你想点击这个小部件的文本来选择一些东西。此时，您遇到的问题是该鼠标事件应该由 QTextEdit 处理以进行选择过程，还是由 GraphicsWidget 处理以移动 QTextEdit。

选项 1：从 QGraphicsProxyWidget 派生并且在鼠标函数（mouseMove，...）中，您可以再次调用 QGraphicsItem::mouseMove()，这应该会再次恢复移动 Widget 的功能。

选项 2：这更像是一种解决方法，但在大多数情况下是更好的解决方案，因为它会阻止您管理选项 1 所必需的事件。只需创建一个大于 Widget W 的 GraphicsRectItem R。设置R 可移动等。将 W 添加到您的场景中，您将收到一个 QGraphicsProxyWidget P。调用 P->setParentItem(R)，最后调用 scene->AddItem(R);

现在您的 Widget 可以通过移动父矩形来移动。您还可以添加其他以 R 作为父级的 GraphicsRectIrems r，例如实现调整大小功能。您只需要为 r 安装一个 EventFilter 并在 filter 函数中对 mouseMove 事件做出反应。

# asp.net - 资源未找到而不是 413 请求长度超出

> ID：15413566
> 
> 赞同：9
> 
> 时间：2013-03-14T15:33:46.617
> 
> 标签：asp.net, iis, httpfilecollection

我的页面，当我尝试上传一个大文件（超过 10MB）时显示我：

> 您要查找的资源已被删除、名称已更改或暂时不可用。

我的 web.config 有这个

```
<httpRuntime requestValidationMode="2.0" maxRequestLength="15000" /> 
```

和

```
<customErrors mode="RemoteOnly" defaultRedirect="~/Errorhandling.aspx">
      <error statusCode="404" redirect="~/NotFound.html" />
       <error statusCode="413" redirect="~/TooBig.html" />
</customErrors> 
```

为什么它不将我重定向到 TooBig.html 而不是显示上述消息？

### 笔记

默认的 ASP.NET 允许为 4MB，这就是我将其`maxRequestLength`更改为 15000 的原因。（此时将其更改为 150000 没有任何区别，因为我只测试最大 10MB）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:05:12.607

**使用 .NET 4.x 测试**

无法在 web.config 中处理此错误，因为它级别太高。

您可以像这样在 global.asax 中捕获此错误：

```
Protected Sub Application_EndRequest(sender As Object, e As System.EventArgs)

    Dim context As HttpContext = HttpContext.Current.ApplicationInstance.Context
    If Not IsNothing(context) Then

        If Not context.Response.StatusCode = HttpStatusCode.OK Then

            'Detect file upload exceeded max length:
            If context.Response.StatusCode = 404 And
                context.Response.SubStatusCode = 13 Then

                'clear the previous error page content:
                context.Response.Clear()

                'redirect to your custom upload error page:
                context.Server.Transfer("~/error.aspx?code=404.13", False)

            End If

        End If

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:17:29.550

我在使用不同大小的文件迁移到 IIS7 时遇到了这个问题。但是当时下面的解决方案对我有用。您应该将这些部分添加到您的 webconfig 或 appconfig 文件中，具体取决于您想要的范围。

```
<system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="524288000"/>
            </requestFiltering>
        </security>
</system.webServer> 
```

有关更多信息，您可以查看。

[http://www.webtrenches.com/post.cfm/iis7-file-upload-size-limits](http://www.webtrenches.com/post.cfm/iis7-file-upload-size-limits)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T09:42:14.553

以下代码可能会有所帮助：

```
<httpRuntime enableVersionHeader="false" executionTimeout="300000" maxRequestLength="256000" requestValidationMode="2.0" requestLengthDiskThreshold="256000" /> 
```

# java - 当我使用 Web 驱动程序运行 selenium 测试时，IE 根本没有打开

> ID：15413567
> 
> 赞同：0
> 
> 时间：2013-03-14T15:33:51.017
> 
> 标签：java, internet-explorer, selenium

我是 selenium 新手，我使用 selenium firefox IDE 记录了一个场景。我已将测试用例保存为 java 格式，并尝试使用 selenium-ie 驱动程序和 IEDriverServer.exe 运行测试用例。

这是我的测试用例 java 文件。

```
package com.xyz.test;

import java.io.File;
import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.support.ui.Select;

public class TestPCQDE {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
      File file = new File(TestPCQDE.class.getResource("IEDriverServer.exe").toURI());
      System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
      driver = new InternetExplorerDriver();//IN THIS LINE I GET EXCEPTION POSTED BELOW,IE BROWSER DOES NOT OPEN.PS:driver VARIABLE DOES NOT INITIALIZE PROPERLY
    baseUrl = "http://122.12.122.12:9090/MyWebApp/security/mort_main.htm";
    driver.manage().timeouts().implicitlyWait(3000, TimeUnit.SECONDS);
  }

  @Test
  public void testTestPCQDE() throws Exception {
    driver.get(baseUrl + "/MyWebApp/security/login.htm?logOut=yes");
    driver.findElement(By.name("ssoId")).clear();
    driver.findElement(By.name("ssoId")).sendKeys("abcd");
    driver.findElement(By.name("button")).click();
    driver.manage().timeouts().implicitlyWait(3000, TimeUnit.SECONDS);
    driver.findElement(By.xpath("//tr[23]/td[2]/a/u")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [selectFrame | rightFrame | ]]
    driver.findElement(By.id("dtree_0i0font")).click();
    driver.findElement(By.id("dtree_0i1font")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [waitForPopUp | leftFrame | 30000]]
    // ERROR: Caught exception [ERROR: Unsupported command [selectFrame | relative=up | ]]
    // ERROR: Caught exception [ERROR: Unsupported command [selectFrame | leftFrame | ]]
    new Select(driver.findElement(By.name("loanType1"))).selectByVisibleText("Personal Car");
    new Select(driver.findElement(By.cssSelector("select[name=\"strCustomerType\"]"))).selectByVisibleText("Individual");
    new Select(driver.findElement(By.id("strTitle"))).selectByVisibleText("Miss.");
    driver.findElement(By.name("strApplicantFirstName")).clear();
    driver.findElement(By.name("strApplicantFirstName")).sendKeys("testseleniumdemo");
    new Select(driver.findElement(By.name("customerCategory"))).selectByVisibleText("OTHERS");
    driver.findElement(By.name("strApplicantLastName")).clear();
    driver.findElement(By.name("strApplicantLastName")).sendKeys("testing");
    new Select(driver.findElement(By.name("maritalStatus"))).selectByVisibleText("Single");
    driver.findElement(By.xpath("//img[@onclick='javascript:cal2.popup()']")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [waitForPopUp | Calendar | 30000]]
    // ERROR: Caught exception [ERROR: Unsupported command [selectWindow | name=Calendar | ]]
    new Select(driver.findElement(By.name("yearSelect"))).selectByVisibleText("1963");
    driver.findElement(By.xpath("//tr[6]/td[3]/a/font")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [selectWindow | name=leftFrame | ]]
    driver.findElement(By.name("mothersMaidenName")).clear();
    driver.findElement(By.name("mothersMaidenName")).sendKeys("shraddha");
    new Select(driver.findElement(By.name("relationship"))).selectByVisibleText("FATHER");
    new Select(driver.findElement(By.name("strCategory"))).selectByVisibleText("GENERAL");
    driver.findElement(By.name("relationFirstName")).clear();
    driver.findElement(By.name("relationFirstName")).sendKeys("sdf");
    new Select(driver.findElement(By.name("employerType"))).selectByVisibleText("SALARIED");
    new Select(driver.findElement(By.name("multiVehicles"))).selectByVisibleText("No");
    new Select(driver.findElement(By.name("strChannel"))).selectByVisibleText("Direct");
    new Select(driver.findElement(By.name("strDistributionChannel"))).selectByVisibleText("NEW");
    driver.findElement(By.name("strTerm")).clear();
    driver.findElement(By.name("strTerm")).sendKeys("22");
    driver.findElement(By.name("strLoanAmount")).clear();
    driver.findElement(By.name("strLoanAmount")).sendKeys("500000");
    driver.findElement(By.name("strRecomendedAmount")).clear();
    driver.findElement(By.name("strRecomendedAmount")).sendKeys("5000000");
    driver.findElement(By.xpath("//img[@onclick='javascript:searchProduct();']")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [waitForPopUp | newwin | 30000]]
    // ERROR: Caught exception [ERROR: Unsupported command [selectWindow | name=newwin | ]]
    driver.findElement(By.name("product")).click();
    driver.findElement(By.name("New")).click();
    // ERROR: Caught exception [ERROR: Unsupported command [selectWindow | name=leftFrame | ]]
    new Select(driver.findElement(By.name("strSoftApproval"))).selectByVisibleText("abc xyz");
    driver.findElement(By.id("fanNo")).clear();
    driver.findElement(By.id("fanNo")).sendKeys("0");
    driver.findElement(By.id("productLine")).clear();
    driver.findElement(By.id("productLine")).sendKeys("test 05 01 Vxi");
    driver.findElement(By.name("costOfVehicle")).clear();
    driver.findElement(By.name("costOfVehicle")).sendKeys("40000");
    driver.findElement(By.name("bttnSearch")).click();
    assertTrue(closeAlertAndGetItsText().matches("^Do you want to save the data[\\s\\S]$"));
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();//SINCE VARIABLE driver DOES NOT INITIALIZE PROPERLY,I GET NULL POINTER EXCEPTION
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alert.getText();
    } finally {
      acceptNextAlert = true;
    }
  }
} 
```

PS：我已将 IEDriverServer.exe 文件复制到同一文件夹/包（com.xyz.test）中。

这是堆栈跟踪

```
org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.
Build info: version: '2.29.1', revision: 'dfb1306b85be4934d23c123122e06e602a15e446', time: '2013-01-22 12:58:05'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_31'
Driver info: driver.version: InternetExplorerDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:527)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:216)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:201)
    at org.openqa.selenium.ie.InternetExplorerDriver.setup(InternetExplorerDriver.java:105)
    at org.openqa.selenium.ie.InternetExplorerDriver.<init>(InternetExplorerDriver.java:51)
    at com.tcs.test.TestPCQDE.setUp(TestPCQDE.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.
Build info: version: '2.29.1', revision: 'dfb1306b85be4934d23c123122e06e602a15e446', time: '2013-01-22 12:58:05'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_31'
Driver info: driver.version: InternetExplorerDriver
    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:165)
    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:62)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:506)
    ... 29 more
Caused by: org.openqa.selenium.net.UrlChecker$TimeoutException: Timed out waiting for [http://localhost:19455/status] to be available after 20007 ms
    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:104)
    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:163)
    ... 31 more
Caused by: com.google.common.util.concurrent.UncheckedTimeoutException: java.util.concurrent.TimeoutException
    at com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:143)
    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:79)
    ... 32 more
Caused by: java.util.concurrent.TimeoutException
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:228)
    at java.util.concurrent.FutureTask.get(FutureTask.java:91)
    at com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:130)
    ... 33 more

java.lang.NullPointerException
    at com.tcs.test.TestPCQDE.tearDown(TestPCQDE.java:103)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:37)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是我的 POM.xml 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>pcqdetestcases</groupId>
  <artifactId>pcqdetestcases</artifactId>
  <version>0.0.1-SNAPSHOT</version>
    <dependencies>
    <dependency>
        <groupId>org.openqa.selenium.core</groupId>
        <artifactId>selenium-core</artifactId>
        <version>1.0-20080914.225453</version>
    </dependency>
    <dependency>
        <groupId>org.openqa.selenium</groupId>
        <artifactId>selenium-rc</artifactId>
        <version>1.0-20081010.060147</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>2.29.1</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-support</artifactId>
        <version>2.29.1</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-ie-driver</artifactId>
        <version>2.30.0</version>
    </dependency>
  </dependencies>
</project> 
```

请注意：我的系统没有管理员权限。我的机器上安装了 IE 8。

如果需要任何其他信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:10:21.663

最可能的原因是您的 IEDriverServer.exe 无法启动。尝试明确地将其称为`File file = new File("path to file");`

从您的堆栈跟踪： 原因：org.openqa.selenium.WebDriverException：等待驱动程序服务器启动超时。

# qt5 - Visual Studio 2010 上的 Q_STATIC_ASSERT 和 Q_STATIC_ASSERT_X 编译问题

> ID：15413569
> 
> 赞同：2
> 
> 时间：2013-03-14T15:33:55.090
> 
> 标签：qt5

我开发和维护了一个非常大的 opengl 应用程序，使用 qt 库编写。我正在从 qt 4 切换到 qt 5。我下载了 qt 5.0.0 Windows (8) Visual Studio 2010 预编译包。不幸的是，我发现由于预编译包提供的 OpenGL ES 2 支持导致了数百万个 OpenGL 错误。因此，我下载了源代码，并在配置步骤中使用 -opengl 桌面标志重新编译了 qt（有关问题的更多详细信息，请参阅[此处](http://qt-project.org/forums/viewthread/23499)）。opengl 编译器错误消失了，但我仍然有数百个编译器错误，每次在 Qt 库本身中有对两个宏 Q_STATIC_ASSERT 和 Q_STATIC_ASSERT_X 的引用。我得到的典型错误类型是： - 错误 C2062：类型 'void' 出乎意料 - 错误 C2238： ';' 之前的意外令牌

一些建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T10:40:32.857

如对问题的评论中所述，我通过寻找 static_assert 的重新定义并对其进行评论来解决该问题。特别是我的代码使用的是 VCGLib 库，它重新定义了 base.h 中的断言

# asp.net - Asp.net 成员资格提供商确定

> ID：15413574
> 
> 赞同：0
> 
> 时间：2013-03-14T15:34:03.570
> 
> 标签：asp.net, membership-provider

在研究 ASP.net 会员提供商时，我遇到了这样一个问题，但找不到答案。

很明显，我们有数据库，提供者存储名称/密码等信息，但它如何为当前用户找到正确的密钥？它是否通过 HTTP 标头传输并保存在用户的 cookie 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:47:49.557

基本上，[表单身份验证票](http://msdn.microsoft.com/en-us/library/ff647070.aspx)包含在 cookie 中。cookie 存储在客户端，并与页面请求一起发送回服务器进行身份验证。

如果你使用[ASP.NET Universal Providers' Membership](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)，我建议使用 ASP.Net Login 控件；它与会员资格提供程序开箱即用，无需编写任何代码。

# php - 为什么 SQLite 在特定机器上这么慢（~2 q/s）？

> ID：15413575
> 
> 赞同：16
> 
> 时间：2013-03-14T15:34:06.327
> 
> 标签：php, performance, sqlite

在我的一台服务器（i7 Ivy Core，32 GB RAM，Debian 6 @ 64bit，PHP 5.4.10）上，我使用 SQLite 的插入速度非常慢。以下测试程序仅报告**每秒 2.2 次插入**（插入 30 行需要 14 秒）。

```
unlink("test.db");

$db = new PDO('sqlite:test.db');

$db->exec("CREATE TABLE test (dummy INT)");

$count = 30;

$t = microtime(true);
for ($i=0; $i<$count; $i++) {
  $db->exec("INSERT INTO test VALUES ($i)")
   or die("SQLite error: ".$db->errorInfo()[2]."\n");
}
$elapsed = microtime(true)-$t;
echo sprintf("%d inserts in %.3f secs (%.1f q/s)\n", 
  $count, $elapsed, $count/$elapsed); 
```

输出：

```
$ time php test.php
30 inserts in 13.911 secs (2.2 q/s)

real    0m14.634s
user    0m0.004s
sys     0m0.016s 
```

我知道我可以通过在插入语句周围包装`BEGIN`/来加速这一点`END`（这给了我 200000 q/s），但即使没有事务，这也应该*快得多*。在其他（较旧的）机器（相同的 PHP 版本）上，我达到 300+ 查询/秒而无需显式事务。

这可能是什么原因？我必须调整 Sqlite 或操作系统吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-14T15:47:22.233

我在 Linux 64 位机器上做了一个类似的测试，`strace -C -tt`用来了解 SQLite3 在哪里花费时间。

```
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 99.03    0.004000          32       124           fsync
  0.64    0.000026           0       222           mprotect
  0.32    0.000013           0       216           munmap 
```

明显的延迟在`fsync`函数中，即：

*   可配置
*   取决于一般磁盘 I/O（签出`iotop`, `iostat`）
*   严重依赖于 IOSS（因此，文件系统和磁盘分配 - 你可能会在 ext3 上获得一个值，在 xfs 上获得不同的值，在 btrfs 上获得第三个值）
*   当然，间接地取决于底层硬件及其怪癖或调整。

通过关闭同步，我的 SQLite3 性能提高了大约三千倍：

```
$db = new PDO('sqlite:test.db');

$db->exec('pragma synchronous = off;'); 
```

我在两台非常相似的机器上也有两个不同的值（一个有 ext4，另一个有 XFS，但我不肯定这是主要原因 - 它们的负载配置文件也不同）。

顺便说一句，使用**准备好的语句**几乎可以将最快级别的执行速度提高一倍（从 45k 到 110k INSERT，分批 3000 次，因为在该速度下，30 次 INSERT 必然会产生虚假的时序），并将最低速度从大约 6到150左右。

因此，这（使用准备好的语句）可能是一个很好的解决方案，可以在不涉及文件同步的情况下改进重复操作，即，同时仍然可以*证明*数据风险级别保持不变。之后，我会根据数据中断的风险和*价值*尝试事务或 fsync（甚至可能是内存日志） 。

从头开始设计系统时，肯定建议对不同的 FS 进行一些测试。

## 不同文件系统（同一台机器）上的测试

```
ext4 (acl,user_xattr,data=order)         5.5 queries/s
using transactions                       170 queries/s
disabling fsync                        16000 queries/s
using transactions and disabling fsync 47200 queries/s 
```

在*临时文件系统*上，`fsync`它很便宜，所以关闭它几乎没有什么好处。大部分时间都花在守卫上，所以交易是关键。

```
tmpfs                                  13700 queries/s
disabling fsync                        15350 queries/s
enabling transactions                  47900 queries/s
using transactions and disabling fsync 48200 queries/s 
```

当然，必须考虑适当的数据组织和索引，并且对于大型数据集，可能会变得更加重要。

* * *

**更新**：为了提高性能，还可以将 SQLite 日志放入内存中`pragma journal_mode=MEMORY;`

此外，您可以告诉 ext3/4 不要费心在 SQLite 数据库上更新时间（不过，这在很大程度上取决于实现）。您可以尝试添加`noatime`到数据库所在的文件系统中，如果有效，您可以将其放入`/etc/fstab`（您也可以使用`relatime`而不是更极端的`noatime`：

```
sudo mount /var -o remount,noatime 
```

# ruby-on-rails - 在 ruby on rails 中填充随机数据

> ID：15413577
> 
> 赞同：0
> 
> 时间：2013-03-14T15:34:10.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我需要帮助在我的数据库表中填充一些随机数据。我的系统中有一个包含 10 个用户的列表。我的过敏表有以下字段：

**id user_id name 反应状态**

我在一个名为 allergy_hash 的变量中有以下过敏散列。

```
{:reaction_name=>"Bleeding", :status=>"Death", :name=>"A"} {:reaction_name=>"Nausea", :status=>"Serious", :name=>"B"} {:reaction_name=>"Fever", :status=>"Death", :name=>"C"} {:reaction_name=>"Blistering", :status=>"Serious", :name=>"D"} 
```

这是我到目前为止所做的：

```
def create_random_data
 users.each do |user|
   allergies.each do |allergies_hash|
     Allergy.where(user_id: user.id).first_or_create(
       allergies_hash )
     end
  end
end 
```

上面所做的只是将 Bleeding、Death 和 A 插入到所有用户 1 到 10 的表中。但我需要插入这样不同的用户可以有不同的值。此外，一些用户可能有不止一种过敏和相关反应。

注意：我并不是说完全随机。例如名称“A”仍应具有关联状态“死亡”和反应名称“出血”。名称“B”应在过敏表中具有相关状态“严重”和反应“恶心”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:09:52.887

创建用户时，使用`sample`on`allergies_hash = [{:reaction_name=>"Bleeding", :status=>"Death", :name=>"A"}, {:reaction_name=>"Nausea", :status=>"Serious", :name=>"B"}, {:reaction_name=>"Fever", :status=>"Death", :name=>"C"}, {:reaction_name=>"Blistering", :status=>"Serious", :name=>"D"}]`

```
Allergy.where(user_id: user.id).first_or_create(allergies_hash.sample) 
```

**更新** 我将遍历用户，因此对于每个用户，您尝试从 allergies_hash 添加 1 到 3 个过敏

```
User.all.each do |user|
  [1,2,3].sample.times do
    user.allergies.where(allergies_hash.sample).first_or_create
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:16:40.033

I would recommend you to check [Faker](https://github.com/stympy/faker) and [Factory girl](http://github.com/thoughtbot/factory_girl) to populate some random data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:01:42.667

您可以通过转到 app/db 目录中的种子文件将数据播种到您的应用程序中

做这样的事情

```
 User.delete_all
 Bill.delete_all

 u1 = User.create(:email => "bob@aol.com", :password =>"a", :password_confirmation => "a")

 b1 = Bill.create(:name => "rent", :description => "the rent", :amount => 10_000, :day => 1)
 b2 = Bill.create(:name => "cable", :description => "the cable", :amount => 150, :day => 5) 
```

或者您也可以使用 Faker gem 生成假数据。

[http://geekswithblogs.net/alexmoore/archive/2010/01/18/faker-gem---a-quick-and-dirty-introduction.aspx](http://geekswithblogs.net/alexmoore/archive/2010/01/18/faker-gem---a-quick-and-dirty-introduction.aspx)

# php - PHP XML DOM 扩展

> ID：15413578
> 
> 赞同：0
> 
> 时间：2013-03-14T15:34:10.980
> 
> 标签：php, dom

我不断看到人们使用 DOM 扩展的属性，例如：

```
$node->tagName 
```

但是我还没有在 php 手册的任何地方看到这个属性，但它似乎工作。

任何指向其定义的链接都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:43:56.617

该类有一个名为[`DOMElement`的](http://us.php.net/manual/en/class.domelement.php)只读公共字段`tagName`。

# ruby - 如何显示属性

> ID：15413581
> 
> 赞同：1
> 
> 时间：2013-03-14T15:34:13.333
> 
> 标签：ruby, watir-webdriver

我有四个单选按钮：

```
<div class="x1-radio">
    <input id = " " type="radio" name=" " value="12345">
        <span class=" ">Radio 1 - Good Luck</span>
<div class="x1-radio">
    <input id = " " type="radio" name=" " value="12345">
        <span class=" ">Radio 2 - Good Luck</span>
<div class="x1-radio">
    <input id = " " type="radio" name=" " value="12346">
        <span class=" ">Radio 3 - Good Luck</span>
<div class="x1-radio">
    <input id = " " type="radio" name=" " value="12347">
        <span class=" ">Radio 4 - Good Luck</span> 
```

由于这些是单选按钮，我可以一次选择一个。我知道如何使用 xpath 选择单选按钮：

```
nPath = '//*[@class="x1-radio"]//span[text() = "Radio 1 - Good Luck"]'
browser.element(:xpath, nPath).fire_event "onclick" 
```

此时选择了一个按钮。我想知道的是如何将“输入”标签中的属性一一显示到屏幕上。

我在这里找到了一些信息： [How can I get value of element custom attribute with Watir](https://stackoverflow.com/questions/1443455/how-can-i-get-value-of-element-custom-attribute-with-watir) 但做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:00:37.467

这应该显示`value`每个`input`元素的属性值：

```
browser.inputs.each {|input| p input.value} 
```

像这样的东西应该显示相同的信息，但仅适用于选定的单选按钮：

```
browser.inputs.each {|input| p input.value if input.checked} 
```

# internet-explorer - 网站在 IE 中几乎完全无法使用

> ID：15413586
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:34:25.087
> 
> 标签：internet-explorer, cross-browser

我有一个我建立的网站，它在 Mac 上的 Safari、Firefox 和 Chrome 中看起来很棒。但是，我的客户告诉我网站上没有任何内容。当我用模拟器查看 IE（任何版本）时，网站上几乎没有显示任何内容。即使是像背景颜色这样的基本东西也不起作用。我安装了一些插件（IE7-JS、Selectivizr for WordPress、WP IE Enhancer 和 Modernizer）并使用了各种 Doctype 设置。我只是设法使视频区域消失。我有一些页面没有出现在 IE 中，但这很荒谬。我没有时间或愿望完全（重新）编写 css。我确实必须让它大部分工作，因为客户根本不精通技术并且（当然）使用 IE。关于如何使这个可怕的事情变得一致的任何建议？该网站是cope24.com。我已经在 wordpress 堆栈网站上发布了这个，但被告知这是一个纯粹的 css/js 问题。这是来自 Firefox 和 IE 模拟器的屏幕截图。![浏览器视图](../Images/f2944fe0af55fc95f620cb491134b2cf.png)

![mac 视图](../Images/c96c2b7a5477006bd9f37790f026c9b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:33:04.403

好吧，那好吧。显然，我通过删除这个小小的 IE SPECIFIC CSS 来彻底解决这个问题： filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30); -ms-filter: "progid:DXImageTransform.Microsoft.Blur(PixelRadius=3,MakeShadow=true,ShadowOpacity=0.30)";

它正在创建一个覆盖大部分页面的灰色模糊，所以东西在那里，只是被隐藏了。

# sql - 将图像插入 SQL 数据库

> ID：15413589
> 
> 赞同：0
> 
> 时间：2013-03-14T15:34:27.930
> 
> 标签：sql, tsql

我有一张表格，列出了地点的详细信息（名称、地址等），我还想要一张该地点的图片。我想知道是否有人知道将图像上传到 SQL 数据库的简单方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:58:12.993

按照这个例子：

```
CREATE TABLE myTable(Document varbinary(max))
INSERT INTO myTable(Document)
SELECT * FROM OPENROWSET(BULK N'C:\Image1.jpg', SINGLE_BLOB) rs 
```

PS：代替 varbinary(max) 您可以将定义的最大值放入 varbinary 文件。

编辑：我在脚本末尾添加了一个别名 rs 。

萨卢多斯 ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:39:39.023

为什么不直接将图像上传到网络空间并在 SQL 数据库中拥有图像的名称（这又将是确切的 URI）？

如果您有一个带有 mountRushmore.png 的架构列，并且您的图像已上传到 mywebsite.com/images/，那么您知道确切的 URI 是 mywebsite.com/images/mountRushmore.png。

你需要数据库来做其他事情吗？有更简单的方法来存储网站访问的数据，然后是数据库。即 XML 或 JSON。

我希望这有帮助。

# java - 在 JAVA 中使用命名空间解析和验证 XML

> ID：15413593
> 
> 赞同：0
> 
> 时间：2013-03-14T15:34:45.447
> 
> 标签：java, dom, xml-parsing

我有以下 SOAP 消息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://test.testMessage.com/v2/TestMessage/schema">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:input>
         <sch:header>
               <sch:MessageName>ChangePurchaseOrder</sch:MessageName>
           </sch:header>
         <sch:payload>
           <sch:xmlData>
           </sch:xmlData>
         </sch:payload>
     </sch:input>
   </soapenv:Body>
  </soapenv:Envelope> 
```

我需要解析它（使用命名空间）并将“输入”节点放入一个新文档中。如下所示：

```
<sch:input xmlns:sch="http://test.testMessage.com/v2/TestMessage/schema">
     <sch:header>
           <sch:MessageName>ChangePurchaseOrder</sch:MessageName>
       </sch:header>
     <sch:payload>
       <sch:xmlData>
       </sch:xmlData>
     </sch:payload>
 </sch:input> 
```

我正在尝试提取消息的那一部分。谁能帮我从第一个片段中提取第二个片段中显示的代码部分？

到目前为止，我尝试过这样的事情： NodeList inputNodeList = doc.getElementsByTagNameNS(namespaceURI, "sch:input");

但是当我做 int length = inputNodeList.getLength();

我将“长度”的值设为 0，而它应该是 1。任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:48:48.403

将您的[DocumentBuilderFactor](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)设置为[名称空间感知器](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware%28boolean%29)，并实现您自己的[NameSpaceContext](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/namespace/NamespaceContext.html)。如果您使用肥皂客户端而不是手动解析 xml，那么痛苦会减少。

# php - “？>”在 PCRE 正则表达式中是什么意思？

> ID：15413594
> 
> 赞同：10
> 
> 时间：2013-03-14T15:34:47.153
> 
> 标签：php, regex

我似乎无法弄清楚`?>`正则表达式中的用途。例如，以下内容：

```
(?>[^()]+) 
```

我知道这`?:`意味着如果您不打算反向引用匹配，它不应该存储匹配。这有什么关系吗？

这也与正则表达式有关吗？`(?P>name)`或者`(?&name)`

来源： http: [//php.net/manual/en/regexp.reference.recursive.php](http://php.net/manual/en/regexp.reference.recursive.php)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T15:47:53.443

`(?>pattern)`防止在`pattern`. 它至少有 2 个名称：*非回溯组*、*原子组*。我将其称为*非回溯组*，因为它是最具描述性的名称。

不过，单独的表达式`(?>[^()]+)`不需要非回溯。没有什么可以诱导回溯以显示非回溯行为。

一个更有趣的例子是正则表达式`^\((?>[^()]+)\)`，匹配字符串`(a + b()`，与没有非回溯组的普通版本进行比较`^\([^()]+\)`。

正常版本，在尝试`(a + b`匹配`^\([^()]+`文字并失败后，`)`将回溯一个字符并使用`(a +`等重试，直到`(a`，在用尽所有可能性后失败。

非回溯版本将在第一次尝试后立即失败`(a + b`。

非回溯组主要用于减少由量词（`?`, `*`, `+`, `{n,}`, `{n,m}`）引起的回溯。使用非回溯组进行优化的技巧是了解正则表达式引擎的第一次尝试。您可能需要移动正则表达式以确保引擎进行的第一次尝试是您想要匹配的 - 然后可以使其不回溯。

作为使用非回溯组进行优化的示例：

*   [如何提高 .NET 正则表达式的性能？](https://stackoverflow.com/questions/15392132/how-can-i-improve-the-performance-of-a-net-regular-expression/15393555#15393555)

    我引用的问题来自.NET，但它对非回溯组使用相同的语法。

    在上面的问题中，原始的正则表达式有很多用法`*`和`+`量词。当匹配失败时，它会导致不必要的回溯，从而影响大输入的性能。

*   [使用 RegEx 匹配大输入时出现 StackOverflowError](https://stackoverflow.com/questions/15082010/stackoverflowerror-when-matching-large-input-using-regex/15084428#15084428)

    另一个例子。注意*所有格*量词（`+`在普通量词之后添加，例如，，，`?+`等）和非回溯组具有非回溯的相同行为，只是非回溯组的语法允许它被推广。`++``*+`

    在 PHP 中不会像在 Java 中那样出现堆栈溢出，但在验证长字符串时性能应该会更好。

# ruby-on-rails - Rails 3.2 & LESS：application.css.less 中的一些 @imported LESS 文件不会触发重新编译

> ID：15413595
> 
> 赞同：0
> 
> 时间：2013-03-14T15:34:47.170
> 
> 标签：ruby-on-rails, less

我真的不知道如何调试这个，也许有人有想法。

我有很多 LESS 文件导入到`application.css.less`. 我们使用 Bootstrap，并且我们希望在我们自己的样式中使用其中定义的变量，因此我们不能在清单中要求 LESS 文件（因为所需文件似乎不会将其变量公开给其他所需文件）。

一切都很好，除了一些 LESS 文件 - 编辑时 - 不要触发 CSS 的重新编译！哪些做哪些不做似乎很随机，只有 6 个不做（相比之下，总共有 25 个）。当我在清单中需要其中一个时，它会成功导致重新编译 - 如果我 @import 它，它不会。

关于如何调试的任何想法？如果我重命名其中一个（例如 from `time_records.less`to `time_records2.less`），它会在更改后成功触发重新编译......所以它对这 6 个特定文件的名称做了一些事情：

*   日历.less
*   联系人.less
*   文件夹.less
*   讲义.css.less
*   print.css.less
*   time_records.css.less

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T22:14:49.557

最新版本的 less-rails 实现了 Import Hooks，应该可以解决您的问题。我意识到这是一个迟到的答案，当时可能还不存在。

**导入钩子**

任何对 .less 文件的 @import 都会自动将该文件声明为导入它的文件的 sprockets 依赖项。这意味着您可以编辑导入的框架文件并查看在开发过程中反映在父级中的更改。所以这：

```
@import "frameworks/bootstrap/mixins";

#leftnav { .border-radius(5px); } 
```

最终会像您在下面执行此操作一样：

```
/*
 *= depend_on "frameworks/bootstrap/mixins.less"
*/

@import "frameworks/bootstrap/mixins";

#leftnav { .border-radius(5px); } 
```

**依赖指令**

depend_on 路径声明对给定路径的依赖关系，但不将其包含在包中。当您需要使资产的缓存过期以响应另一个文件中的更改时，这很有用。

# css - 在现有的 css 文件中添加 .hidden-phone 以隐藏背景图像

> ID：15413596
> 
> 赞同：1
> 
> 时间：2013-03-14T15:34:50.470
> 
> 标签：css, twitter-bootstrap, responsive-design

我敢肯定有一个简单的答案...

使用 Twitter Bootstrap，我的**style.css.erb**文件中有这个：

```
.login_page body {height:100%;
        max-width:inherit;
        margin:0 20px;
        background-image: url(<%= image_path 'oap_dotlogo.png' %>);
        background-repeat: no-repeat;
            background-position: 5%, 80%;
        background-color: #E3F5FD;
    } 
```

这很好，除了在背景徽标令人头疼的手机上。我想把那个标志放在手机上。

我看到**bootstrap-responsive.css**已经定义了 .hidden-phone：

```
@media (max-width: 767px) {
  .hidden-desktop {
    display: inherit !important;
  }
  .visible-desktop {
    display: none !important;
  }
  .visible-phone {
    display: inherit !important;
  }
  .hidden-phone {
    display: none !important;
  }
} 
```

那么，如何修改 style.css.erb 以使 background-image 标签具有**.hidden-phone**类？

我已经尝试了在 style.css.erb 中添加 .hidden-phone 的一些排列，但似乎没有任何效果 - 我一定是语法错误。

谢谢！戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:57:52.937

听起来您在这里混淆了 CSS 和 HTML。当你说：

> [H]如何修改 style.css.erb 以使 background-image 标签具有 .hidden-phone 类？

...您不能将类添加到 CSS 声明中。您实际上并不想*隐藏*您的元素（`body`在本例中为），而是在您想要修改`background`属性的小屏幕尺寸时。因此，在您已经拥有的媒体查询中，添加以下内容：

```
@media (max-width: 767px) {
  .login_page body { background-image: none; }
  ...
  all your other small-screen styles
} 
```

然后，默认将显示您的`background-image`并且您正在为小屏幕删除它。如果图像很大，您可能会考虑移动优先的方法。即相反，正如@po228 提到的那样 - 只添加`background-image`更大的视口宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:49:37.133

看起来你很接近。要定义不会在手机上显示的样式，您需要使用 min-width，而不是 max-width。尝试以下操作：

```
@media only screen and (min-width: 768px) {
    .login_page body {
        background-image: url(<%= image_path 'oap_dotlogo.png' %>);
        background-repeat: no-repeat;
        background-position: 5%, 80%;
    }
} 
```

# mysql - 如何像这样在sql中合并具有同一列的行？

> ID：15413598
> 
> 赞同：0
> 
> 时间：2013-03-14T15:35:04.817
> 
> 标签：mysql, sql, database

表 1：Factor_Name

```
ID NAME
1  A
2  A
3  B 
```

表 2：Sample_Info

```
 ID   FACTOR_ID   INFO
   1    1           Sample_A
   2    2           Sample_B
   3    3           Sample_C 
```

如果表 1 中的因子名称相同，我想合并 2 个表中的列，这是预期的表：

表 1：Factor_Name

```
ID NAME
1  A
2  B 
```

表 2：Sample_Info

```
 ID   FACTOR_ID   INFO
   1    1           Sample_A
   2    1           Sample_B
   3    2           Sample_C 
```

我怎么能在mysql中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:55:18.487

您将希望通过首先复制您当前拥有的表来执行此操作：

```
CREATE TEMPORARY TABLE Factor_Name_Temp as (SELECT * 
                                            FROM Factor_Name) 

CREATE TEMPORARY TABLE Sample_Info_Temp as (SELECT * 
                                            FROM Sample_Info) 
```

然后，您将需要清除现有表的内容。您似乎还想重置 id 列。这可能有点危险，具体取决于有多少*其他*表引用这些值。但是无论哪种方式...

然后，将“临时”表中的数据插入到原始表中。如果您要重新生成它们，请不要使用 id 列，否则这将选择初始的“最小”值（即，会有间隙）。

```
INSERT Factor_Name (id, name) 
SELECT MIN(id), name
FROM Factor_Name_Temp
GROUP BY name

INSERT Sample_Info (id, factor_id, info)
SELECT Sample_Info_Temp.id, Factor_Name.id, Sample_Info_Temp.info
FROM Sample_Info_Temp
JOIN Factor_Name_Temp
  ON Factor_Name_Temp.id = Sample_Info_Temp.factor_id
JOIN Factor_Name
  ON Factor_Name.name = Factor_Name_Temp.name 
```

不要忘记清理自己！

（未经测试的声明 - 我缺少一个 mySQL 实例，而 SQL Fiddle 并不完全适用于此）。

# javascript - 使用 Rally SDK2 似乎无法打开带有 _blank 标记的新窗口/选项卡

> ID：15413602
> 
> 赞同：25
> 
> 时间：2013-03-14T15:35:08.170
> 
> 标签：javascript, rally

如果我在 Rally 中使用直接 HTML 和指向要在另一个窗口中打开的故事的链接创建自定义 HTML 页面，则单击该链接会将我正确地转到故事的详细信息页面。但是如果我在 SDK2 中封装相同的 HTML，我会被发送到一个几乎空白的页面——只有 Rally 页面的深蓝色顶部显示。

这有效：

```
<html>
  <head></head>
  <body>
    <a target="_blank"
href="https://rally1.rallydev.com/#/9805917202ud/detail/userstory/10746587690">US35</a>
  </body>
</html> 
```

这不起作用：

```
<!DOCTYPE html>
<html>
  <head>
    <title>test</title>
    <script type="text/javascript" src="/apps/2.0p5/sdk.js"></script>
    <script type="text/javascript">
      Rally.onReady(function() {
        Ext.define('CustomApp', {
          extend: 'Rally.app.App',
          componentCls: 'app',
          launch: function() {
            this.add({
              xtype: 'container',
              html: '<a target="_blank" href="https://rally1.rallydev.com/#/9805917202ud/detail/userstory/10746587690">US35</a>'
            });
          }
        });
        Rally.launchApp('CustomApp', {
          name: 'test'
        });
      });
    </script>
    <style type="text/css">
      .app {
        /* Add app styles here */
      }
    </style>
  </head>
  <body></body>
  </html> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T17:04:45.850

**更新**：已于 2013 年 8 月 22 日在拉力赛中修复！应该适用于所有版本的 AppSDK 2.0。

仍然是 Rally 中的一个错误，由链接打开器是 iframe 引起。

作为一种解决方法，您可以从主窗口单击打开窗口。

`<a href="https://rally1.rallydev.com/#/9805917202ud/detail/userstory/10746587690" onclick="window.top.open(this.href); return false;">US35</a>`

# ruby - 将管道分隔文件转换为哈希？

> ID：15413606
> 
> 赞同：1
> 
> 时间：2013-03-14T15:35:23.000
> 
> 标签：ruby

我正在使用 Ruby 1.9.3 并且有两个问题：

(1) 如何将具有多个由管道分隔的数据字段的文本文件转换为哈希？：

```
name | student-id | maths | english | science | grade | remarks   | 
abc  |  10001     |  90   | 80      | 80      | A+    | excellent |
.
.
. 
```

(2) 此外，如果我有一个新列是另一个哈希：

```
name | student-id | maths | english | science | grade | remarks   | options     |
abc  |  10001     |  90   | 80      | 80      | A+    | excellent | <condition> |
.
.
. 
```

其中，`| Options |`是另一个哈希：

```
| Stream      | Average   |
| Com Science |  90       |
| Elec Eng    |  85       |
| Mech Eng    |  80       |
.
.
. 
```

我想根据他们的平均分数列出所有有资格参加所有不同流的学生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:03:28.393

首先，使用 Ruby 的内置 CSV 类。指定`:col_sep`值 as`'|'`以覆盖 的默认值`','`。两者都[`CSV.new`](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-new)允许[`CSV.open`](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-open)您指定该选项。

# c# - WCF SSL 连接配置？

> ID：15413607
> 
> 赞同：2
> 
> 时间：2013-03-14T15:35:24.317
> 
> 标签：c#, wcf, ssl-certificate

我编写了 wcf 服务服务器和客户端应用程序，客户端和服务器都适用于基本的 http 绑定。现在我想更改配置以使用 SSL 进行连接。有没有任何机构可以解释我该怎么做并举个例子

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:40:33.590

这是一篇关于此的非常好的文章[，](http://www.remondo.net/using-ssl-transport-security-wcf-basichttpbinding/)还有一篇关于[Stack](https://stackoverflow.com/questions/6028033/how-can-i-use-ssl-encryption-in-wcf)的好文章。

密钥将在您的`Config`文件中。

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicSecure">
          <security mode="Transport" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="WcfServiceLibrary.Echo.EchoService">
        <endpoint 
          address="https://localhost:8888/EchoService/" 
          binding="basicHttpBinding"
          bindingConfiguration="BasicSecure" 
          contract="WcfServiceLibrary.Echo.IEchoService">
          <identity>
            <certificateReference 
              storeName="My" 
              storeLocation="LocalMachine"
              x509FindType="FindByThumbprint" 
              findValue="f1b47a5781837112b4848e61de340e4270b8ca06" />
          </identity>
        </endpoint>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/" />
          </baseAddresses>
        </host>
      </service>
    </services>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
  </system.serviceModel> 
```

他们在这里要注意的是，是`security mode = "Transport"` 和`CertificateReference`。这些将非常非常重要。您必须确保正确配置您的端口才能使其正常工作。

请记住`wshttpBinding`，默认情况下还启用了此加密。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:45:39.013

[http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi](http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi) 这是在 WCF Serice 上使用 SSL 的非常简单和基本的参考。不久前我和你在同一条船上，我关于 SO 的第一个问题是关于 HTTP/HTTPS 绑定。我与 SO 上的一位用户进行了很好的讨论，他们给了我一个很好的想法。看看这个。我有 Web 配置，它是配置 [HTTP 和 HTTPS 绑定的主要配置](https://stackoverflow.com/questions/13608684/http-and-https-bindings)

希望这可以帮助。

# c# - 适配器设计模式在 C# 中如何工作？

> ID：15413610
> 
> 赞同：2
> 
> 时间：2013-03-14T15:35:32.127
> 
> 标签：c#, design-patterns, adapter

我这里有一个适配器模式的示例（是的，您可以检查它是否正确实现），但我真正的问题是在这里，据说适配器设计模式执行以下操作：“将一个类的接口转换为另一个接口客户端期望。适配器允许类一起工作，否则由于接口不兼容而无法工作。” 但是我对那个声明有点困惑，根据下面的代码，我不太明白，我想知道它发生在哪里。

这是我的课程/界面：

```
public interface ILogger
{
      void Write(string data);
}

public class InfrastructureDebugLogger : ILogger
{
      public void Write(string data)
      {
           Debug.WriteLine(data);
      }
}

public class InfrastructureLoggerToDatabaseAdapter : ILogger
{
      private IRepository<Log> adaptee;

      public InfrastructureLoggerToDatabaseAdapter(IRepository<Log> adaptee)
      {
            this.adaptee = adaptee;
      }

      public void Write(string data)
      {
            var log = new Log() { Value = data };
            adaptee.Create(log);   
      }
}

public interface IRepository<T>
{
        void Create(T item);
        void Update(T item);
        T Find(int id);

}

public class Log
{
        public int ID { get; set; }
        public string Value { get; set; }
}

public class LogRepository : IRepository<Log>
{
        public void Create(Log item)
        {
            Console.WriteLine("Created an item inside the LogRepository");
        }

        public void Update(Log item)
        {
            throw new NotImplementedException();
        }

        public Log Find(int id)
        {
            throw new NotImplementedException();
        }
}

class Program
{
    static void Main(string[] args)
    {

            ILogger logger = new InfrastructureDebugLogger();
            Console.Write("Data: ");
            string data = Console.ReadLine();
            logger.Write(data);
            InfrastructureLoggerToDatabaseAdapter loggerToDatabaseAdapter = 
                new InfrastructureLoggerToDatabaseAdapter(new LogRepository());
            loggerToDatabaseAdapter.Write(data);
            Console.ReadKey();
     }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:39:03.233

您的代码显示了适配器，但没有显示*将*其用作适配器。

为了使用这个适配器，你需要使用你的`LogRepository`，它实现`IRepository<Log>`了，作为`ILogger`通过适配器。就像是：

```
class Program
{
    static void Main(string[] args)
    {

        Console.Write("Data: ");
        string data = Console.ReadLine();
        InfrastructureLoggerToDatabaseAdapter loggerToDatabaseAdapter = 
            new InfrastructureLoggerToDatabaseAdapter(new LogRepository());

        // Here, you're using a IRepository<Log>, but adapting it to be used as an ILogger...
        ILogger logger = loggerToDatabaseAdapter;
        logger.Write(data);
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:05:36.540

用简单的话来说——

1.  重命名您的适配器，因为它实际上不是 InfrastructureLoggerToDatabaseAdapter，而是一个 Repository to Logger 类型。由于您传递的是 IRepository 类型的对象并期望它的行为类似于 ILogger。

2.  由于存储库现在已更新转换为 ILog 类型对象，因此您应该使用 ILogger 变量对其进行操作。

代码：

```
public class RepositoryToLoggerAdapter : ILogger
    {
        private IRepository adaptee;

        public InfrastructureLoggerToDatabaseAdapter(IRepository adaptee)
        {
            this.adaptee = adaptee;
        }

        public void Write(string data)
        {
            var log = new Log() { Value = data };
            adaptee.Create(log);   
        }
    }

class Program
    {
        static void Main(string[] args)
        {

            ILogger logger = new InfrastructureDebugLogger();
            Console.Write("Data: ");

            string data = Console.ReadLine();

      //This step is redundant as the text will be shown on the screen as you type
logger.Write(data);

//Create an object of IRepository type.
IRepository repository= new LogRepository();

//The create method works as it should
repository.Create(data);

//You could not have stored the repository object in the logger variable if you did not have this adapter.

            logger = new RepositoryToLoggerAdapter(repository);

//Effectively you now are calling the Create method of the Repository by calling the Write method of the logger.

            logger.Write(data);
            Console.ReadKey();
        }
    } 
```

希望这是有道理的。如果有不清楚的地方，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:39:36.033

> 将类的接口转换为客户期望的另一个接口。Adapter 让那些因为接口不兼容而无法协同工作的类。

在这种情况下，您有一个`IRepository<Log>`，但您需要成为一个`ILogger`，即“客户期望的另一个接口”。适配器类通过封装调用`IRepository<Log>`并将调用转换`ILogger`为`IRepository<Log>`调用来实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:39:13.760

从您的示例中不清楚，因为您没有需要记录器的客户端。考虑以下课程：

```
public class Foo
{
    private ILogger _logger;

    public Foo(ILogger logger)
    {
         _logger = logger;
    }

    public void Bar()
    {
       _logger.Write("Bar is called");
       // do something
    }
} 
```

你不能通过`LogRepository`这门课。因为`LogRepository`没有实现`ILogger`接口。但是使用适配器，您可以将接口“转换”`IRepository<Log>`为类`ILogger`所需的接口`Foo`：

```
class Program
{
    static void Main(string[] args)
    {
        // you can't pass repository to Foo
        LogRepository repository = new LogRepository();            

        InfrastructureLoggerToDatabaseAdapter loggerToDatabaseAdapter = 
            new InfrastructureLoggerToDatabaseAdapter(repository);

        // but you can pass adapter
        Foo foo = new Foo(loggerToDatabaseAdapter);
        foo.Bar();

        Console.ReadKey();
    }
} 
```

实际工作仍然由`LogRepository`班级完成。适配器只是将其接口调整为客户端所需的接口。插座适配器的工作方式相同。如果你有电动剃须刀，应该插入美国插座，你不能在没有适配器的情况下在欧洲使用它。

# compression - 短数字字符串的压缩

> ID：15413615
> 
> 赞同：0
> 
> 时间：2013-03-14T15:36:01.303
> 
> 标签：compression

有谁知道非常短的数字/二进制字符串的压缩？

例如，我想压缩任何数字（0-9）或二进制，即 3、2、6、4
，或者
我想压缩 2、1、3、6、1、4、13 的数字或二进制

适用于pick 4和euromillions的研究。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:14:14.533

我查阅了 EuroMillions 和 Pick 4。我发现前者的范围是 1-50，而后者的范围是 0-9。我认为我们可以假设任何数字都是同样可能的（一些压缩方案利用了某些数字比其他数字更可能出现的事实）。

你在什么平台上编码？像 Python 或 JavaScript 这样的高级语言？还是像 C 或 C++ 这样的低级语言？您是否希望存储大量数字序列？或者你只是想提出一个有效的内存表示？

如果您想在内存中使用大型集合，您可以做出的最合理的权衡是确保每个字符由不超过 1 个字节表示（可以容纳 0-255 的值）。在通常只有“数字”类型而没有任何更细粒度的高级语言中，这可能更难做到。但是 C/C++ 甚至 Java 应该允许你这样做。

如果您想在磁盘上存储大量这些等概率数字，请查看存储数字所需的最小位数。对于 EuroMillions，您需要 6 位来存储一个数字 (2^6 = 64)。然后将它们存储在比特流中，以便每个数字节省 2 位。使用 Pick 4，您可以在一个字节中编码 2 个数字。

# c - 具有分段错误的快速排序程序

> ID：15413620
> 
> 赞同：0
> 
> 时间：2013-03-14T15:36:10.477
> 
> 标签：c, algorithm, quicksort

今天我正在学习 R.Sedgewick 的 Algorithms in C 中的快速排序算法。

我对算法的工作原理有了很大的了解。编码部分让我有点困惑，最后我遇到了分段错误。这是代码：

```
#include <stdio.h>
void quicksort(int[], int, int); // prototype

void quicksort(int a[], int l, int r) // What is the value of l. Why hasn't the author 
                                      // mentioned it. Is it the size of the array? 
{
    int i, j, v, t;
    if(r > l)
    {
        v = a[r];
        i = l - 1; // What is l here? Is it the size if yes look at first while statement
        j = r;

        for(;;)
        {

            /*The algorithm says: scan from right until an element < a[r] is found. Where 
              r is the last position in the array. But while checking in the second while
              loop elements > a[r] is searched */

            while (a[++i] < v); // How can you increment again after reaching end of arrray
                                // size if l is the size of the array
            while (a[--j] > v);
            if(i >= j) break;
            t = a[i]; a[i] = a[j]; a[j] = t;
        }
    }

    t = a[i]; a[i] = a[r]; a[r] = t;

    quicksort(a, l, i - 1);
    quicksort(a, i + 1, r);

    return;
}

int main()
{
    int i, a[10]; // assuming size is 10

    for(i = 0; i < 10; i++)
    {
        scanf("%d", &a[i]);
    }

    int l = 10; // I am passing size of the array
    int r = 9; // position of last element

    quicksort(a, l, r);
    return 0;
} 
```

错误是这样的。假设如果我输入 10 个元素然后按 Enter，会发生以下情况：

```
1 4 8 2 3 6 4 7 10 9
segmentation fault.

process returned 139(0x8b) 
```

这是调试器返回的：

```
Breakpoint 1, quicksort (a=0xbffff808, l=0, r=0) at quick.c:11
11      if(r > 1)
(gdb) c
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0x080484fb in quicksort (a=0xbffff808, l=0, r=0) at quick.c:28
28      t = a[i]; a[i] = a[r]; a[r] = t;
(gdb) c
Continuing.

Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists.
(gdb) c
The program is not being run. 
```

执行上述程序的正确方法是这样。左右指针什么都没有。如果数组占用 n 个内存位置，则左指针应指向第 0 个位置，右指针应指向 n - 1 个位置。我犯了一个愚蠢的错误，没有在 if 条件中包含快速排序的递归函数。因此，所有的头痛。正确的程序是：

```
/* Working quicksort
 * Robert sedgewick best
 */

#include <stdio.h>

void quicksort(int[], int, int); // prototype

void quicksort(int a[], int l, int r) 
{
    int i, j, v, t;
    if(r > l)
    {
        v = a[r];
        i = l - 1;
        j = r;

        for(;;)
       {
            while (a[++i] < v); 
            while (a[--j] > v);

            if(i >= j) break;
            t = a[i]; a[i] = a[j]; a[j] = t;

        } // End for here

    t = a[i]; a[i] = a[r]; a[r] = t;

    quicksort(a, l, i - 1);
    quicksort(a, i + 1, r);

    } /* End if here. That is include the recursive
         functions inside the if condition. Then it works 
         just fine. */

    return;
}

int main()
{
    int i, a[5]; // assuming size is 10

    for(i = 0; i < 5; i++)
    {
        scanf("%d", &a[i]);
    }

    int l = 0; // I am passing size of the array
    int r = 4; // position of last element

    quicksort(a, l, r);

       int s;

    for(s = 0; s < 5; s++)
    {
        printf("%d ", a[s]);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:43:01.753

请在调试器中运行，例如`gdb`. 这将向您显示发生段错误的确切行。如果您在 Google 上搜索“gdb 备忘单”，那么上手将非常容易。记得用`-g`flag编译。”

我的会话：

```
dan@dev1:~ $ gcc -g quick.c
dan@dev1:~ $ gdb a.out
...
(gdb) r
Starting program: /home/dan/a.out 
1 4 8 2 3 6 4 7 10 9

Program received signal SIGSEGV, Segmentation fault.
0x0000000000400572 in quicksort (a=0x7fffffffe530, l=10, r=9) at quick.c:21
21              while (a[++i] < v); // How can you increment again after reaching end of arrray 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:39:22.453

`l`分别`r`代表“左”和“右”。

发生分段错误是因为您正在通过`l = 10`，所以`while (a[++i] < v);`会中断。

**[编辑]**

```
while (a[++i] < v);                                
while (a[--j] > v); 
```

这两个循环也有问题：您需要对其进行测试`i`并且`j`不会越界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:04:39.637

```
int a[10];
int l = 10;
int r =  9; 

quicksort(a, l, r);

called quicksort(a, l, r)
//l=10,r=9
if(r > 1) // 9 > 1 is true
{
    i = l - 1;//i = 10 - 1 = 9
    for(;;)
    {
        while (a[++i] < v);//a[++i] is a[9+1] = a[10] is out of range!! 
```

# javascript - 带有 8 位十六进制的 Javascript 颜色选择器

> ID：15413627
> 
> 赞同：2
> 
> 时间：2013-03-14T15:36:32.080
> 
> 标签：javascript, hash, hex, color-picker

我正在寻找一个 javascript 颜色选择器，我可以使用它设置颜色和不透明度。返回的字符串必须是 8 位长的十六进制值（不包括 #）。

已经看过了

*   Farbtastic [http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/)
*   jPicker [http://www.digitalmagicpro.com/jPicker/](http://www.digitalmagicpro.com/jPicker/)
*   jQuery Minicolors [http://labs.abeautifulsite.net/jquery-miniColors/](http://labs.abeautifulsite.net/jquery-miniColors/)

和许多其他人。但是它们都没有给我我想要的东西，我不想弄乱修剪字符串等，因为颜色选择器必须在一页上实现大约 100 次才能实现蒙皮编辑器。

**编辑**

[http://jscolor.com/](http://jscolor.com/)

这是使用 JSColor 的样子：

[http://img707.imageshack.us/img707/3962/unbenannt3op.png](http://img707.imageshack.us/img707/3962/unbenannt3op.png)

这是代码，我用它在我的 bean 中获取和设置十六进制代码：

```
<h:inputText styleClass="color {hash:true}"
             value="#{skinningBean.currentSkin.titleBar.backgroundColorStart}">
<a4j:ajax event="change" render="preview" /> 
```

除了缺少 alpha 值（最后 2 位数字）之外，这将工作得非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:40:28.507

我不知道为什么它不容易找到，但[光谱](http://bgrins.github.com/spectrum/)具有我在颜色选择器中所需的一切。（在找到光谱之前，我一直在使用 minicolors。）

我不知道它是否需要 8 位十六进制，但我知道它会接受 4 个参数 rgba。（它使用一个名为[tinycolor](https://github.com/bgrins/TinyColor)的插件进行所有颜色解析。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:01:33.190

我用 JavaScript 编写了一个公共域颜色选择器。根据您的要求，我现在添加了一个以 RRGGBBAA 格式显示颜色的功能，并带有十六进制组件。

*   演示：[http](http://peteroupc.github.com/colorpicker/) ://peteroupc.github.com/colorpicker/（查看示例“Alpha 颜色选择器（RRGGBBAA 格式）”。）
*   源代码：[https ://github.com/peteroupc/colorpicker](https://github.com/peteroupc/colorpicker)

要启用此功能，请为文本框指定一个以“rgbahex_”开头的 ID，如下例所示：

```
<input type="text" value="ff0000ff" name="c2" id="rgbahex_c2"> 
```

通过这样做，文本框将被转换为颜色选择器。但是，只有在页面完全加载之前输入框出现在 HTML 中时，它才会起作用。如果您在运行时创建颜色选择器，请使用以下 JavaScript 进行设置：

```
textbox.value="ff0000ff";
PDColorPicker.setColorPicker(textbox,{rgbahex:true}); 
```

`setColorPicker`还将文本框转换为颜色选择器。

* * *

我更新了颜色选择器以添加颜色格式 AARRGGBB。在上面的示例中使用`argbhex`而不是。`rgbahex`

你也可以用“rgbahex_”、“argbhex_”等开始一个文本框的类名，而不是ID，来转，把文本框变成一个颜色选择器。我*认为*这对应`styleClass`于您的 XML 中的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:41:35.350

您可以通过定义一个“修剪字符串并执行此操作”功能来管理它，该功能只需实现一次，然后在任何地方调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:55:49.617

我建议使用 Scott 建议的光谱颜色选择器，但是您可以从中获取 RGB 值，并使用此属性：

```
background: rgba(132,182,19,.5); 
```

这样，它将设置当前 div 的背景，并且它将像你想要的那样不透明（所以你必须找到一种方法来给它你想要的不透明度），但至少你会得到颜色选择器的值。如果您想了解更多关于使用 rgba 的后备和 IE 解决方法的信息，请查看[CSS Tricks](http://css-tricks.com/rgba-browser-support/)。

更新：

如果您必须使用十六进制值，请尝试这样的操作：

[http://jsfiddle.net/WzGG6/1/](http://jsfiddle.net/WzGG6/1/)

# node.js - Mongoose/MongoDB 中嵌套模式的正确模式是什么？

> ID：15413630
> 
> 赞同：26
> 
> 时间：2013-03-14T15:36:33.580
> 
> 标签：node.js, mongodb, mongoose

对我来说，执行以下操作似乎是合乎逻辑的：

```
var AvatarSchema = new Mongoose.Schema({
    type: String,
    url: String
});

var UserSchema = new Mongoose.Schema({
    avatars: [AvatarSchema],
    email: String,
    name: String,
    salt: String,
    token: String
});

var ThinUserSchema = new Mongoose.Schema({
    avatars: [AvatarSchema],
    email: String,
    firstname: String,
    lastname: String,
});

var QuestionSchema = new Mongoose.Schema({
    question: String,
    users: [ThinUserSchema]
}); 
```

然后以后。. . 执行以下操作：

```
var question = new Question({
    question: 'Wut?',
    users: users //where users is an array of instances of a user model of the UserSchema
}); 
```

在这里，我希望问题的用户部分填充有头像、电子邮件、名字和姓氏。. .然而，由于用户/头像已经有_id，这些不会持久化。

*   从用户/头像中删除每个 _id 似乎很愚蠢。
*   显式设置每个用户/头像似乎效率低下。
*   切换到混合类型，将所有内容都放入其中，并且需要 markModified。

这些模式的正确模式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-10T15:28:27.007

我相信您的假设是正确的，它在 Mongoose 中称为嵌入式文档，这是来自 Mongoose 文档的示例。

```
var Comments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , date      : Date
  , comments  : [Comments]
  , meta      : {
        votes : Number
      , favs  : Number
    }
});

mongoose.model('BlogPost', BlogPost); 
```

免责声明：我不一定会把逗号放在项目之前！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T11:22:02.323

我仍然是猫鼬菜鸟，如果我理解正确，我认为您需要阅读的是： http: [//mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

有一个非常好的和简单的例子，你在其他模式中引用了模式。因此，为了将特定模式的文档包含在另一个文档中，最好通过引用包含它。当您需要它时，您可以在父文档上调用填充。当您更改子文档时，填充的父文档当然也会更改。

# php - PHP 使用 glob() 将数组提供给带有 IF Then Logic 的 foreach 循环

> ID：15413631
> 
> 赞同：0
> 
> 时间：2013-03-14T15:36:34.620
> 
> 标签：php

马上，我知道这里已经有很多关于使用 Glob() 来提供 foreach 循环的线程。我已经阅读了所有我能找到的内容，但我仍然遇到困难，所以我会在这里发布我的代码，以防我遗漏了一些东西。

我的目标：使用 foreach 循环将 HTML 页面包装在一些标记中并将它们显示在我的页面上。我本可以将 HTML 直接写入我的页面，但我预计在接下来的几周内会有很多变化和添加，而且我担心版本重叠（这里不能使用版本控制。）

到目前为止，我有这个脚本拉入页面并显示它们，但 IF 逻辑没有触发。我在这里做错了什么？

```
<?php

        $directory = 'includes/pages';
        $dirIT = new DirectoryIterator($directory);
        try {        
            // Pull in HTML files from directory    

            foreach ( $dirIT as $key => $item ) {           
                if ($item->isFile()) {

                    if ( $key == '0')
                    {
                        echo "<div class=\"one-third column alpha\">";
                        $path = $directory . "/" . $item;
                        include $path;
                        echo "</div>";
                    }

                    elseif ($key == count ( dirIT ) - '1' )
                    {
                        echo "<div class=\"one-third column omega\">";
                        $path = $directory . "/" . $item;
                        include $path;
                        echo"</div>";
                    }

                    else
                    {
                    echo "<div class=\"one-third column\">";
                    $path = $directory . "/" . $item;   
                    include $path;  
                    echo "</div>";
                    }
                }
            }   
        }   
        catch(Exception $e) {
            echo 'There are no pages to display.<br />';    
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:42:11.160

在以下`else if`语句中，您有一个小错字，并且没有使用实际变量：

```
elseif ($key == count ( dirIT ) - '1' ) 
```

`dirIT`应该是`$dirIT`。尝试更新到以下内容，看看是否有帮助：

```
elseif ($key == (count($dirIT) - 1)) 
```

旁注：因为`$dirIT`不会在循环内部发生变化，所以您可以在进入循环之前预先计算它，以防止每次都重新计算。例如，您可以拥有：

```
$dirITCount = (count($dirIT) - 1);
foreach ( $dirIT as $key => $item ) { 
    ...
    } else if ($key == $dirITCount) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:46:29.763

正如@newfurniturey 所说，问题是由线路丢失引起`$`的`elseif`。

我想建议重写你的代码：

```
$g = glob('includes/pages/*.html');
$c = count($g);
if( $c > 0) {
    foreach ( $g as $key => $item ) {
        echo '<div class="one-third column';
        if( $key == 0) echo ' alpha';
        if( $key == $c-1) echo ' omega';
        echo '">';
        include $item;
        echo '</div>';
    }
}
else {
    echo 'There are no pages to display.<br />';    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:40:57.070

很可能问题出在您的`isFile()`功能上。尝试使用简单的本机 ( [http://php.net/manual/en/function.is-file.php](http://php.net/manual/en/function.is-file.php) )`is_file()`函数来检查特定项目是否为文件。

# javascript - ClearInterval 不清除 SetInterval

> ID：15413635
> 
> 赞同：3
> 
> 时间：2013-03-14T15:36:44.590
> 
> 标签：javascript, clearinterval

当我们使用 SetInterval 返回的值调用 clearInterval 时，它会使该值变为 null 还是未定义。

我正在调用 clearInterval 来清除 setInterval 但显然 setInterval 的值保持不变，即使在调用 clearInterval 之后也不会改变。t 应该是 null 还是 undefined ？这是我的代码片段

```
var setIntervalId; // declared in global scope
//lined of code

function autorefresh() {
  if (statesCount > 0) {
    setIntervalId = setInterval(function() {
        //lines of code
        // calling some handler
    }, 30000);
  }

  if (statesCount === 0) {
    clearInterval(setIntervalId);
  }
} 
```

如您所见，我每 30 秒调用一次 setInterval 函数，第一次调用时会为 setIntervalId 分配一些值，但即使在调用 clearInterval 之后，该值仍然存在。调用 clearInterval 后它应该变为 null 还是 undefined？如果它应该为 null 或 undefined 我应该在这里做什么。我已经在全局范围内定义了 setIntervalId。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T15:38:13.113

该函数`clearInterval`不会清除传递给它的值。如果你想清除它，你必须自己做

```
clearInterval(setIntervalId);
setIntervalId = undefined; 
```

请注意，您似乎没有正确保护对`setInterval`. 这可能会导致多次调用，因此您有多个间隔设置。我认为您应该将初始`if`块增加到以下内容

```
if (statesCount > 0 && typeof(setIntervalId) === 'undefined') { 
  ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T15:38:29.723

> 调用 clearInterval 后它应该变为 null 还是 undefined？

不。

这只是一个数字。当间隔被清除后，这个数字只是一个历史奇闻。

如果您愿意，可以在使用后显式分配`undefined`给它`clearInterval`。除非您使用它来跟踪您的函数当前是否正在定期运行，否则无需执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-19T07:27:32.553

好的，我遇到同样的问题太多次了，通常我只是顺其自然，但大多数时候我意识到在清除间隔后间隔继续运行，这可能会影响设备的性能（就像有一个无限循环）。

所以我做了一些研究，发现了问题所在，我写了一个简单的代码来解决它。

现在，在大多数情况下，当您开始一个间隔（很可能由事件触发）时，会声明该间隔的多个实例（无论出于何种原因）......

所以以后清除区间时，只清除*top-level区间，下一级区间设置。（top-level可能不是正确的词）

因此，为了真正清除间隔，我使用了以下方法：

**设置间隔：**

```
if(!timer)   
    timer =setInterval(myFunction, 1000); 
```

**清除间隔：**

```
clearInterval(timer);
timer=null;
while (timer!== null){
    timer=null;
} 
```

您可能决定清除 while 循环内的时间间隔，但我发现这对我有用，而且比这更有效。

> 确保检查间隔变量的范围（即上述情况下的计时器）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T04:17:01.173

# 如果您一次只允许一个间隔，这应该可以正常工作。

如果您允许多个时间间隔，则需要保持对每个实例的访问权限以停止它们。

```
var setIntervalId; // declared in global scope
var statesCount = 1; // simulate active state
//lined of code

function autorefresh() {
  if (statesCount > 0) {
    console.log('started');
    setIntervalId = setInterval(function() {
      // just to see whats happening in console
      console.log(statesCount);

      // performe interval checks inside the interval loop not outside if you want to stop it automaticaly
      if (statesCount === 0) {
        clearInterval(setIntervalId);
      }
      // lines of code
      // calling some handler
    }, 1000); // repeat every 1s
  };
}

// run interval
autorefresh();

// stimulate change of stateCount after 5s
// setTimeout(function(){
//   statesCount = 1;
// },5000);

// clear interval after 10s
setTimeout(function(){
  clearInterval(setIntervalId);
  console.log('stoped');
},10000); 
```

*   **[编解码示例](http://codepen.io/DevWL/pen/MJjEZW?editors=1111)**

# c# - Direct2D 中的 Photoshop 曲线调整

> ID：15413638
> 
> 赞同：0
> 
> 时间：2013-03-14T15:37:06.627
> 
> 标签：c#, image-processing, colors, rgb, direct2d

对于我的图像处理应用程序，我使用 Photoshop 教程使用 Direct2D 和 C# 为图像提供效果。现在我试图在 direct2d 或 C# 中获得 Photoshop Curve color(rgb) 的等效值。

[Photoshop曲线](http://i.stack.imgur.com/bHfat.png)

我正在尝试将输入值作为 X 并将输出值作为 Y 传递到 direct2d rgb 颜色。我怎样才能完成这件事..？

# firefox - Heroku + CDN Cloudfront + 字体 - Firefox 错误

> ID：15413639
> 
> 赞同：5
> 
> 时间：2013-03-14T15:37:07.977
> 
> 标签：firefox, heroku, cors, amazon-cloudfront

最近，我们将资产转移到 CDN Cloudfront 上。我们注意到 Firefox 上的表面已损坏。经过几分钟的搜索，这是一个CORS的故事。我们允许使用 Cloudfront 字段。

`application_controller`：

```
after_filter :set_access_control_headers

def set_access_control_headers
  headers['Access-Control-Allow-Origin'] = CDN_CLOUDFRONT
end 
```

`production.rb`：

```
CDN_CLOUDFRONT = "http://xxx.cloudfront.net" 
```

直到昨天，这一切都很好。经过多次搜索和思考，我没有找到解决方案。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T06:18:11.830

我没有使用 Heroku 设置，但是 AFAIK（如[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Access-Control-Allow-Origin)所示），标头`Access-Control-Allow-Origin`应该反映使用来自 CDN 的静态资产的域的*值*。

例如：对于托管在[http://mydomain.net并使用来自](http://mydomain.net)[http://wefe342r34r23.cloudfront.net](http://wefe342r34r23.cloudfront.net)的资产的网站

`headers['Access-Control-Allow-Origin'] = 'http://mydomain.net'`

将允许 mydomain.net 通过[http://wefe342r34r23.cloudfront.net](http://wefe342r34r23.cloudfront.net)访问资产。换句话说，替换`CDN_CLOUDFRONT`为您网站的域名应该可以解决问题。

希望这可以帮助。

PS：直到昨天我才知道你的设置是如何工作的。:)

PPS：将*备用域名 (CNAME)*添加到您的 CDN 将在您想要快速丢弃通过[http://xxx.cloudfront.net](http://xxx.cloudfront.net)公开的现有分发并开始使用新分发[http://yyy 的情况下为您提供帮助。云前网](http://yyy.cloudfront.net)。如果在这种情况下使用诸如[http://cdn.mydomain.net之类的](http://cdn.mydomain.net)*备用域名*，则无需更改应用程序代码库中的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T02:14:12.030

这是我在另一个 Stack Exchange 页面上发布的与同一主题相关的内容的副本，如果其他人有同样的问题但没有找到正确的答案，我会留下这个。

Heroku 上的 Rails 3 应用程序也有同样的问题；Font-Awesome 图标没有显示，因为我通过 Sumo CDN 运行我的资产。

有几个与此相关的回复，其中之一是在您的 application_controller 中放置一个 after_filter 以设置标头值（通过 freemanoid），但这对我不起作用，我不得不使用 Peter Marklund 建议的自定义中间件.

两种解决方案都在 Rails 3.1 版本下发布： [如何在 webrick 中设置 access-control-allow-origin 在 rails 下？](https://stackoverflow.com/questions/2535454/how-to-set-access-control-allow-origin-in-webrick-under-rails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T10:09:46.013

我使用的解决方法 - 将字体分别上传到 S3 并在存储桶上设置 cors 配置。将字体链接硬编码到 S3 字体。所有资产（字体除外）都将来自云端——您的字体将来自 S3。它丑陋 - 但它有效....

# java - 将值从 JFrame 传递到 JPanel

> ID：15413643
> 
> 赞同：0
> 
> 时间：2013-03-14T15:37:19.160
> 
> 标签：java, swing, jframe, jpanel, paintcomponent

我正在尝试绘制图像像素颜色值的直方图。我已经完成了获取值的工作，但我想从这些值中绘制直方图。我正在尝试使用 paintComponent() 方法在面板上绘制它。

```
if(ae.getActionCommand()=="Hist")
{      
     jf1.add(new Histo());
     jf1.pack();         
     jf1.setVisible(true);
} 
```

和

```
class Histo extends JPanel
{
  Zoom z = new Zoom();
  int x=800;

  public void paintComponent(Graphics g) {
         super.paintComponent(g);
         Graphics2D g2d = (Graphics2D) g;
         g2d.setColor(Color.red);
         g2d.drawLine(100, 100, 100,z.RedC[1]);
         for(int c=1;c<z.count;c++)
         {
           g2d.drawLine(x, z.RedC[c], 500, z.RedC[c]);
           x++;
         }
       }
  } 
```

Zoom 是 My class 的名称，使用“z”我可以访问变量，但它们的值为零。我无法获得从像素中读取的值。那么如何在 JPanel 中访问它。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:43:06.630

将构造函数添加到您的 JPanel 并为其提供值或至少一个接口以稍后获取该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T21:59:55.720

您可以创建一个 JPanel 的子类来保存该值并包括该值的 getter 和 setter，如下所示：

```
public class Mystery extends JPanel{
    int x;

    public Mystery(int passMe){
        super();
        x = passMe;
    }

    public void setX(int changeto){
        x = changeTo; //could also make a method that says x++
    }

    public int getX(){
        return x;
    }
} 
```

# c# - gridview 更新总是先选择行？

> ID：15413644
> 
> 赞同：1
> 
> 时间：2013-03-14T15:37:20.507
> 
> 标签：c#, asp.net, gridview

我有一个通过 sqldatasource 从本地 sql db 填充的 gridview。

sqldatasource的select命令为：`SelectCommand="SELECT * FROM [CERecord] ORDER BY [Priority]"`

在我后面的代码中，我有一个单选按钮列表，其中显示所有记录、活动记录、已完成记录：

```
protected void rblShowRecords_SelectedIndexChanged(object sender, EventArgs e)
    {
        switch (rblShowRecords.SelectedValue)
        {
            case "Show Active/Completed":
                CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] ORDER BY [Priority]";
                break;
            case "Show Active":
                CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] WHERE [Completed]='false' ORDER BY [Priority]";
                break;
            case "Show Completed":
                CEDatabaseSource.SelectCommand = "SELECT * FROM [CERecord] WHERE [Completed]='true' ORDER BY [Priority]";
                break;
            default:
                break;
        }
        CEDatabaseSource.DataBind();
        gvRecordList.DataBind();
    } 
```

当我在仅活动或仅完成模式下尝试更新行时，我遇到了一个奇怪的问题，即使我在上面的方法中设置了新命令，它似乎也只是开始显示所有行。

当您在gridview中单击一行上的更新时，它是否总是运行默认的选择命令：`SelectCommand="SELECT * FROM [CERecord] ORDER BY [Priority]"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:43:08.970

当您单击行上的更新按钮时，它正在更改所选索引，因此它将运行您的 selectedIndexChanged 事件。

我能想到的每次单击网格时不触发此 SQL 的最佳方法是将代码移动到不会在每次单击时触发的不同方法中。

还值得注意的是，您使用的是内联 SQL——这是一个很大的安全漏洞。虽然对于 SELECT 语句来说并没有那么糟糕，但这是一个不好的习惯。使用一些参数化的存储过程或数据访问层来获取您的数据，并记住验证您的输入。

# openssl - 使用 openssl 将 pfx 转换为 pem

> ID：15413646
> 
> 赞同：156
> 
> 时间：2013-03-14T15:37:23.757
> 
> 标签：openssl, pem, pfx

如何使用 OpenSSL 从 PFX 文件生成`.pem` *CA 证书*和*客户端证书。*

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-05-23T21:33:56.467

在 Linux 上执行此操作的另一个视角......这里是如何执行此操作，以便生成的单个文件包含解密的私钥，以便 HAProxy 之类的东西可以在不提示您输入密码的情况下使用它。

```
openssl pkcs12 -in file.pfx -out file.pem -nodes 
```

然后您可以配置 HAProxy 以使用 file.pem 文件。

* * *

这是以前版本的编辑，在我意识到 -nodes 选项只是简单地绕过了私钥加密之前，我有这些多个步骤。但我把它留在这里，因为它可能对教学有帮助。

```
openssl pkcs12 -in file.pfx -out file.nokey.pem -nokeys
openssl pkcs12 -in file.pfx -out file.withkey.pem
openssl rsa -in file.withkey.pem -out file.key
cat file.nokey.pem file.key > file.combo.pem 
```

1.  第一步提示您输入密码以打开 PFX。
2.  第 2 步会提示您输入该加号，并为密钥设置密码。
3.  第 3 步提示您输入刚刚制作的密码以存储解密后的密码。
4.  第 4 个将所有内容放在 1 个文件中。

然后您可以配置 HAProxy 以使用 file.combo.pem 文件。

您需要两个单独的步骤来指示一个带有密钥的文件和另一个没有密钥的文件的原因是，如果您有一个同时具有加密和解密密钥的文件，HAProxy 之类的东西仍然会提示您输入密码它使用它。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2013-03-14T17:32:15.467

您可以使用 OpenSSL 命令行工具。以下命令应该可以解决问题

```
openssl pkcs12 -in client_ssl.pfx -out client_ssl.pem -clcerts

openssl pkcs12 -in client_ssl.pfx -out root.pem -cacerts 
```

如果您希望您的文件受到密码保护等，那么还有其他选项。

[您可以在此处](https://www.openssl.org/docs/man1.1.0/apps/pkcs12.html)阅读整个文档。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2019-11-30T21:26:14.153

尽管其他答案是正确的并且得到了彻底的解释，但我发现理解它们有些困难。这是我使用的方法（[取自这里](https://www.xolphin.com/support/Certificate_conversions/Convert_pfx_file_to_pem_file)）：

### 第一种情况：将 PFX 文件转换为同时包含证书和私钥的 PEM 文件：

```
openssl pkcs12 -in filename.pfx -out cert.pem -nodes 
```

### 第二种情况：将 PFX 文件转换为单独的公钥和私钥 PEM 文件：

将私钥从 PFX 提取到 PEM 文件：

```
openssl pkcs12 -in filename.pfx -nocerts -out key.pem 
```

导出证书（仅包括公钥）：

```
openssl pkcs12 -in filename.pfx -clcerts -nokeys -out cert.pem 
```

从提取的私钥中删除密码（释义）（可选）：

```
openssl rsa -in key.pem -out server.key 
```

# java - Java 强加密 - 独立库 - 仅源代码

> ID：15413647
> 
> 赞同：2
> 
> 时间：2013-03-14T15:37:27.600
> 
> 标签：java, security, encryption, public-key-encryption, crypt

我正在寻找一个支持**强加密**的基于 Java 的加密库。

我知道**Java Cryptography Extension**但要使用它我想首先访问源代码，**修改它们**，编译它们并使用我自己的版本（我并不真正关心开源许可证）

或者，我想知道是否有任何好的、强大的基于 Java 的加密库**不依赖或使用**JDK 加密库中的任何内容。在这里，我也有兴趣访问源文件以自己编译它们。

如您所见，我试图避免任何中间人攻击，包括修改后的 JVM 版本或修改过的第三方库。这只是一种痴迷。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:41:13.023

我不确定创建自己的库是一个好主意，但如果你真的想要，你应该看看[bouncycastle](http://www.bouncycastle.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:41:01.630

你试过 Cryptix 吗？它是一个免费的、可用的源代码，与 JCA 库兼容，因此您可以将其安装为唯一的安全提供程序。

# c# - 使用 3 个下拉列表过滤 IEnumerable

> ID：15413648
> 
> 赞同：0
> 
> 时间：2013-03-14T15:37:36.273
> 
> 标签：c#, asp.net, ienumerable

我有一个 ID 列表，我需要根据 3 个下拉框中选择的值进行过滤。我让它为 2 个下拉菜单工作，但可以看到这不是完成它的最佳方法：

```
var nodesList = new List<int>();

                // Check each item in search output against the values in the dropdown boxes
                bool found = false;

                foreach (var item in searchOutput) // searchOut is an IEnumerable
                {
                    // This is where I need to add another dropdown box option but realise the code below is going to get even messier !!

                    if (GetNodeProperty(item.Id, "sportChooser", "sportChooser").Contains(ddlSport.SelectedValue))
                    {
                        if (ddlCategory.SelectedIndex == 0 || GetNodeProperty(item.Id, "categoryChooser", "categoryChooser").Contains(ddlCategory.SelectedValue))
                        {
                            found = true;
                        }
                    }

                    if (GetNodeProperty(item.Id, "categoryChooser", "categoryChooser").Contains(ddlCategory.SelectedValue))
                    {
                        if (ddlSport.SelectedIndex == 0 || GetNodeProperty(item.Id, "sportChooser", "sportChooser").Contains(ddlSport.SelectedValue))
                        {
                            found = true;
                        }
                    }

                    if (found)
                    {
                        nodesList.Add(item.Id);
                        found = false;
                    }

                }

                lvSearchResult.DataSource = nodesList;
                lvSearchResult.DataBind();
            } 
```

我假设某种形式的 Lambda 表达式会更合适，但对于我的生活来说似乎无法让它发挥作用。这是我到目前为止所拥有的：

```
foreach (var item in searchOutput)
                {
                    nodesList.Add(item.Id);
                }
                List<int> filteredNodes = nodesList
                    .Where(
                        x =>
                        GetNodeProperty(Convert.ToInt32(x.ToString()), "categoryChooser", "categoryChooser").Contains(ddlCategory.SelectedValue))
                    .Where(
                        x =>
                        GetNodeProperty(Convert.ToInt32(x.ToString()), "sportChooser", "sportChooser").Contains(ddlSport.SelectedValue))
                    .ToList(); 
```

注意：无论是否选择了某些内容，我都需要通过 3 个下拉列表的组合来过滤 searchOutput。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:18:21.607

呸呸呸呸呸，你上市后怎么解决这些事情！！

```
// Check each item in search output against the values in the dropdown boxes
            foreach (var item in searchOutput)
            {
                nodesList.Add(item.Id);
            }

            List<int> filteredNodes = nodesList
                .Where(
                    x =>
                    ((ddlCategory.SelectedIndex == 0 || GetNodeProperty(Convert.ToInt32(x.ToString()), "categoryChooser", "categoryChooser").Contains(ddlCategory.SelectedValue)) && (ddlSport.SelectedIndex == 0 || GetNodeProperty(Convert.ToInt32(x.ToString()), "sportChooser", "sportChooser").Contains(ddlSport.SelectedValue))) && (ddlFileType.SelectedIndex == 0 || ContentType(Convert.ToInt32(x.ToString())) == ddlFileType.SelectedValue.ToLower()))
                .ToList();

            lvSearchResult.DataSource = filteredNodes;
            lvSearchResult.DataBind(); 
```

# android - 如何实施和使用NITZ？

> ID：15413649
> 
> 赞同：2
> 
> 时间：2013-03-14T15:37:40.813
> 
> 标签：android, time

在搜索互联网并在这里询问之后。我发现从 simcard 获取准确时间的解决方案是使用名为 NITZ（网络身份和时区）的服务，当用户在设置中指定“自动时间同步”时，android 使用该服务来设置时间。
我很想知道如何实现这样的事情并在我的应用程序中使用它来获得准确的时间。
看来android使用一种名为“revertToNitz()”的方法来同步时间。
我也想用。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:53:05.343

> 我很想知道如何实现这样的事情并在我的应用程序中使用它来获得准确的时间。

这是由操作系统自动处理的。只需使用`System.currentTimeMillis()`或任何其他标准 Java 方式来获取时间。应用程序无法访问来自运营商的 NITZ 信号。

> 看来android使用一种名为“revertToNitz()”的方法来同步时间。

Android SDK 中没有`revertToNitz()`，我什至在源代码中也没有看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-10T03:36:26.603

1.  它由 Android 操作系统实现。如果用户打开了“自动时间”选项，您将只需使用标准系统时间相关 API 即可获得准确的 NITZ 或 NTP 时间。你不必再担心它了。

2.  并且在 ServiceStateTracker.java 中实现了 revertToNitzTime() 函数。当手机收到 NITZ 时，无论用户是否打开“自动时间”选项，Android 都会将此报告的时间缓存在 NITZ 中。当此选项稍后打开时，其缓存值将应用于系统时钟。此操作称为“revertToNitzTime”。

3.  系统时间不仅受 NITZ 影响，还受 NTP 时间影响。甚至 GPS 时间也包含在某些第 3 方 Android 系统中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T09:50:32.113

Android（NITZ）中通过蜂窝网络设置时间由操作系统实现。检查这里[http://androidxref.com/4.4.2_r2/xref/frameworks/base/services/java/com/android/server/NetworkTimeUpdateService.java](http://androidxref.com/4.4.2_r2/xref/frameworks/base/services/java/com/android/server/NetworkTimeUpdateService.java)

# c# - WCF Rest Service - 从同一方法返回一个对象或对象列表/数组？

> ID：15413652
> 
> 赞同：0
> 
> 时间：2013-03-14T15:37:50.533
> 
> 标签：c#, json, wcf, wcf-rest

我有一个 WCF REST 服务，它被另一个应用程序/服务（我无法控制）调用。该其他服务期望从我的服务中调用单个服务方法，并可能返回单个 JSON 对象或所述对象的数组。我对返回其中任何一个的服务都没有问题，但无法弄清楚如何（或是否有可能）从同一服务方法返回对象或对象数组。下面是代码示例：

**返回单个 JSON 对象：**

```
[DataContract]
public class Item
{
  [DataMember]
  public string ItemId { get; set; }

  [DataMember]
  public int number { get; set; }
}

[OperationContract]
[WebInvoke(Method = "POST",
   RequestFormat = WebMessageFormat.Json,
   ResponseFormat = WebMessageFormat.Json,
   UriTemplate = "items")]
public Item GetItems(RequestObject requestItems)
{
  Item newItem = SqlDataAccess.GetStandaloneItem(requestItems);
  return newItem;

  //Return format is:
  //{"ItemId" :"ABCDEFG","number" :90}
} 
```

**返回对象数组：**

```
[DataContract]
public class ItemList
{
   [DataMember]   
   public List<Item> items { get; set; }
}

[OperationContract]
[WebInvoke(Method = "POST",
   RequestFormat = WebMessageFormat.Json,
   ResponseFormat = WebMessageFormat.Json,
   UriTemplate = "items")]
public ItemList GetItems(RequestObject requestItems)
{
  ItemList newItemList = SqlDataAccess.GetItems(requestItems);
  return newItemList;

  //Return format is:

  //{"items": [
  //     {"ItemId" :"ABCDEFG","number" :30},
  //     {"ItemId" :"HIJKLMN","number" :49},...]
  //}
} 
```

想法是将这两者结合起来，以便可以返回任一类型（Item 或 ItemList）。理想情况下，调用它的应用程序/服务将能够处理只有一个对象的数组，他们同意支持，但在我们需要上线之前不会进行更改。

我还没有找到一种方法来做到这一点 - 唯一看起来可能有帮助的是 ServiceKnownTypeAttribute ......我在正确的轨道上吗？

我感谢任何帮助/建议。

# in-app-purchase - 如何为 BlackBerry 10 应用内支付测试设置环境？

> ID：15413654
> 
> 赞同：0
> 
> 时间：2013-03-14T15:38:01.650
> 
> 标签：in-app-purchase, blackberry-simulator, blackberry-webworks, blackberry-10

我想将[Blackberry Payment Api](https://developer.blackberry.com/html5/apis/blackberry.payment.html)集成到Blackberry 10 应用程序上。是否可以在没有真实设备的情况下测试 api？文档没有明确说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:55:24.237

目前测试 BlackBerry Payment API 非常困难。

> 不幸的是，实际上并没有任何确切的方法来测试该功能。据我所知，即使对于沙盒模式应用程序，checkExisting 也不会像预期的那样对购买的商品/订阅起作用（因为在这种环境中购买不收费）。

[-来自黑莓的@scdowny](https://github.com/blackberry/BB10-WebWorks-Framework/issues/638#issuecomment-14730161)

我做了一些事情来测试黑莓支付 API...

1.  设置 blackberry.payment.developmentMode = true
    *   这将为您提供几个开发模式选项来模拟来自 BlackBerry 支付服务的响应。
2.  存根 blackberry.payment 以适应您的各种用例......它很容易出错，但我不得不求助。[这是我的应用程序中使用 Sinon 的示例。](https://github.com/achan/snooby/blob/master/tests/spec/SupportSpec.js#L71)

# java - 如何从内容页面检索第一个 PAR 节点

> ID：15413661
> 
> 赞同：4
> 
> 时间：2013-03-14T15:38:14.387
> 
> 标签：java, iteration, aem

我正在遍历所有子页面以显示它们的标题和链接。但我还需要显示第一个段落节点（如果存在）。

例如，哇，我会从以下内容页面检索第一个 PAR 节点吗？

```
/content
  /foo
     /jcr:content
        /title
        /par <- need this one
        /par
        /image 
```

我认为[Page 类](http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/wcm/api/Page.html) `getProperties().get()`方法会起作用，但我只看到在 jcr:content 中返回属性的示例，而不是它下面的任何子节点。

```
 ArrayList aChildren = new ArrayList();
    String listroot = properties.get("listRoot", currentPage.getPath());

    Page rootPage = pageManager.getPage(listroot);
    if (rootPage != null) {
        Iterator<Page> children = rootPage.listChildren(new PageFilter(request));

        while (children.hasNext()) {
            Page child = children.next();

            out.println( child.getTitle() + "<br>" );
            //Output first PAR tag of this page here
        }

    } 
```

这可以使用或其他特定于 CQ 的标签来完成，或者这是 java 函数的工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T16:59:38.640

您必须遍历子页面的子节点。

获取资源类型为 parsys 的第一个节点。拥有该节点后，您可以获取其路径并将其包含在当前页面中。

```
Resource childResource = resourceResolver.getResource(child.getPath());
Node childNode = childResource.adaptTo(Node.class);
Node jcrContent = childNode.getNode("jcr:content");
NodeIterator childrenNodes = jcrContent.getNodes();

while(childrenNodes.hasNext()){
    Node next = childrenNodes.nextNode();
    String resourceType = next.getProperty("sling:resourceType").getString();
    if(resourceType.equals("foundation/components/parsys")){
        %><cq:include path="<%= next.getPath() %>" resourceType="foundation/components/parsys" /><%
        break;
    }
} 
```

这将在当前页面上嵌入子页面上的第一个 parsys 组件。我没有对此进行测试，因此可能需要进行一些修改才能使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:03:11.043

你也可以试试这个：

```
<%@page session="false" import="com.day.cq.wcm.foundation.Paragraph,
                                com.day.cq.wcm.foundation.ParagraphSystem"%>
<%
ParagraphSystem parSys = ParagraphSystem.create(resource, slingRequest);
for (Paragraph par: parSys.paragraphs()){ 
```

有了这个，您可以遍历当前资源下的 parsys 节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:57:22.637

CQ5 存储库中的每个节点都可以表示为一个[Resource](http://dev.day.com/docs/en/cq/current/javadoc/org/apache/sling/api/resource/Resource.html)。您可以使用以下代码获取资源

```
//resolver being instance of org.apache.sling.api.resource.ResourceResolver
Resource paraResource = resolver.getResource("path of the paragraph"); 
```

然后你可以对资源进行操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:06:50.793

如果您尝试将 parsys 从一页引用到另一页，我会使用开箱即用的[引用组件](http://dev.day.com/docs/en/cq/current/wcm/default_components.html#Reference)。该组件接受您站点上任何位置的组件路径，并将其显示在您选择的页面上。

# javascript - 如何对 Node.js 流进行基准测试？

> ID：15413664
> 
> 赞同：4
> 
> 时间：2013-03-14T15:38:16.197
> 
> 标签：javascript, node.js, benchmarking

如何在 Node.js 中对流进行基准[测试](http://nodejs.org/api/stream.html)？

我试过[benchmark.js](http://benchmarkjs.com/)：

```
var fs = require('fs');
var Transform = require('readable-stream').Transform;
var util = require('util');
var Benchmark = require('benchmark');
var suite = new Benchmark.Suite;

// my super uppercase stream
function Uppercase(options) {
  if (!(this instanceof Uppercase))
    return new Uppercase(options);

  Transform.call(this, options);
}

Uppercase.prototype = Object.create(
  Transform.prototype, { constructor: { value: Uppercase }});

Uppercase.prototype._transform = function(chunk, encoding, done) {
  chunk = chunk.toString().toUpperCase();
  this.push(chunk)
};

// start benchmarking
suite.add('stream test', function() {
  var reader = fs.createReadStream('in.txt');
  var parser = new Uppercase();
  var writer = fs.createWriteStream('out.txt');
  reader.pipe(parser).pipe(writer);
})
// add listeners
.on('cycle', function(event) {
  console.log(String(event.target));
})
.on('complete', function() {
  console.log('Fastest is ' + this.filter('fastest').pluck('name'));
})
// run async
.run();

suite.run(); 
```

但我得到了错误

```
Unhandled stream error in pipe 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:09:28.723

您的代码遇到此错误，您可以通过在 reader 和 writer 上收听错误来查看它：

```
[Error: EMFILE, open 'out.txt'] errno: 20, code: 'EMFILE', path: 'in.txt'
[Error: EMFILE, open 'out.txt'] errno: 20, code: 'EMFILE', path: 'out.txt' 
```

这是由于流是异步的，并且在结束时没有显式回调。因此，您几乎在 in.txt 和 out.txt 之间创建了成千上万的管道流，直到系统告诉您它们打开了太多文件描述符。

因此，我猜想通过“在 Node 中对流进行基准测试”，您想要计算的是同步执行此操作所需的时间：

```
reader.pipe(filter).pipe(writer) 
```

在这种情况下，您需要：

*   使用基准[benchmarkjs 文档的 defer 选项](http://benchmarkjs.com/docs#options_defer)
*   确定管道操作何时结束[node.js 文档](http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options)

此答案的代码已使用节点 0.10.0 进行了测试，但我想唯一的区别应该是包含的模块的名称`Transform`：

```
var fs = require('fs');
var util = require('util');
var Transform = require('stream').Transform;
var Benchmark = require('benchmark');
var suite = new Benchmark.Suite;

var i = 0;

// my super uppercase stream
function Uppercase(options) {
  if (!(this instanceof Uppercase))
    return new Uppercase(options);

  Transform.call(this, options);
}

Uppercase.prototype = Object.create(
  Transform.prototype, { constructor: { value: Uppercase }}
);

Uppercase.prototype._transform = function(chunk, encoding, done) {
  chunk = chunk.toString().toUpperCase();
  this.push(chunk)
};

// start benchmarking
suite.add('stream test', {
  'defer' : true,
  'fn' : function (deferred) {
    var reader = fs.createReadStream('in.txt');
    var parser = new Uppercase();
    var writer = fs.createWriteStream('out.txt');

    reader.on('error', function (err) {
      console.log(err);
    });
    writer.on('error', function (err) {
      console.log(err);
    });
    reader.on('end', function  (argument) {
      // Wait until reader is over and then close reader and finish deferred test
      writer.end();
      deferred.resolve();
    });

    reader.pipe(parser).pipe(writer, {'end': false});
  }
})

//  listeners
.on('cycle', function(event) {
  console.log(String(event.target));
})
.on('complete', function() {
  console.log('Fastest is ' + this.filter('fastest').pluck('name'));
})

// run async
.run(); 
```

# javascript - 如何启用超链接以打开模式对话框，同时还允许在同一链接上的新选项卡中打开

> ID：15413666
> 
> 赞同：4
> 
> 时间：2013-03-14T15:38:17.607
> 
> 标签：javascript, jquery, html, web-applications

我正在开发一个网页。网页上有一个超链接，称为“查看页面”。单击后，目标是在模式对话框中显示链接到页面。

这是我用来实现此目的的代码：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title> Test</title>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script>

        <script>
           function OpenModal() {
                $("#divModal").dialog({
                    autoOpen: false, modal: true, title: 'Modal', width: 'auto', height: 'auto'
                    , buttons: { "Cancel": function () { $(this).dialog("close"); } },
                }).dialog('open');
                return false;
            }
        </script>
    </head>

    <body>
        <a href="#" onclick="javascript:OpenModal();">View Page</a>
        <div style="display:none;" id="divModal">
            <iframe id="myIframe" src="SomeValidURL" width="1100" height="800" />
        </div>
    </body>
</html> 
```

有没有一种方法可以实现类似于下面的功能，以允许用户右键单击“*查看页面*”链接，选择“在新选项卡中打开”或*在新窗口*中打开并在新选项卡或新窗口中打开*SomeValidUrl*？如果用户左键单击*SomeValidUrl*，则该页面应在模式对话框中打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:49:05.290

真的没有问题`return false`。其实你应该！如果您不这样做，`return false`否则`preventDefault`您的模式将打开，然后链接将触发，将您转发到另一个页面。

如果您希望这仅在用户通过链接单击其方式以在新窗口/选项卡中打开它时才起作用，那么您将`SomeValidURL`（在您的`src`属性中`iframe`）放置元素的`href`属性就足够了`a`.

此外，作为一般提示，避免内联绑定事件；宁可使用[`jQuery.on`](http://api.jquery.com/on/)：它更灵活，它坚持关注点分离的最佳实践，它确实有助于处理混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:02:42.500

向链接添加一个类，然后使用它。

```
 $(".link").mousedown(function(event) {
        switch (event.which) {
            case 1:
                //modal code
                break;
            case 3:
                window.open("http://www.google.com", '_blank');
                break;
            default :
                window.open("http://www.google.com", '_blank');
                break;
        }
        return false;
    }); 
```

演示：http: [//jsfiddle.net/calder12/Er7NN/](http://jsfiddle.net/calder12/Er7NN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:16:15.287

然后让链接正常使用，带有`href`属性：

```
<a href="SomeValidURL" onclick="javascript:OpenModal();">View Page</a> 
```

尽管有`return false`，这应该仍然有效，因为`click`在右键单击并从生成的浏览器呈现的上下文菜单中选择“在新选项卡中打开”时不涉及您的处理程序。

# android - 从服务线程调用 Android Activity 的首选方法是什么

> ID：15413667
> 
> 赞同：5
> 
> 时间：2013-03-14T15:38:17.883
> 
> 标签：android, multithreading, android-service

我目前正在开发一个具有以下需求的 Android 应用程序：

在服务中启动的工作线程。该线程做了一些处理，需要从主Activity调用，并为同一个Activity提供一些异步应答。

从 Activity 调用服务很容易（IBinder 的东西）

我现在的问题是关于服务回调的正确实现。

我首先要在 Activity 中添加一个 android.os.Handler 并在 MyActivity.handleMessage(Message) 中处理线程的答案，但这需要我将此处理程序的引用提供给服务。那么当 Android 操作系统由于方向改变而决定销毁/重新创建我的 Activity 时会发生什么？我的活动是否在服务中被（间接）引用时保持活跃？如果 Activity 无论如何都销毁/重建，我的 Handler 在 Service 引用会发生什么？

我想我没有使用正确的方法从服务线程回调活动，所以我想知道是否有人可以指出我正确的做法。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:53:00.847

我更喜欢使用[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)

这是您的代码示例`Activity`：

```
BroadcastReceiver localBroadcastReceiver = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        Log.d("BroadcastReceiver", "Message received " + intent.getAction());
        Log.d("BroadcaseReceiver", "Received data " + intent.getStringExtra("com.my.package.intent.EXTRA_DATA"));
    }
};

@Override
protected void onStart()
{
    super.onStart();
    final LocalBroadcastManager localBroadcastManager =
        LocalBroadcastManager.getInstance(this);
    final IntentFilter localFilter = new IntentFilter();
    localFilter.addAction("com.my.package.intent.ACTION_NAME_HERE");
    localBroadcastManager.registerReceiver(localBroadcastReceiver, localFilter);
}

@Override
protected void onStop()
{
    super.onStop();
    final LocalBroadcastManager localBroadcastManager =
        LocalBroadcastManager.getInstance(this);
    // Make sure to unregister!!
    localBroadcastManager.unregisterReceiver(localBroadcastReceiver);
} 
```

代码库中的任何其他地方（例如在后台线程的完成中）：

```
final LocalBroadcastManager localBroadcastManager =
    LocalBroadcastManager.getInstance(context);
final Intent intent = new Intent("com.my.package.intent.ACTION_NAME_HERE")
intent.putExtra("com.my.package.intent.EXTRA_DATA", yourBackgroundData);
localBroadcastManager.sendBroadcast(intent); 
```

当然，您可以使用`intent.putExtra`添加任何附加数据或使用多个操作来区分广播消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:05:41.590

我们通过集中`Application`课堂中活动和服务之间的所有通信来做到这一点。我们扩展了这个`Application`类，然后在那里有绑定到服务并接受回调的方法。在此架构中，an`Activity`和 the之间没有直接联系。`Service`

这种机制的优点是您不必担心在活动转换和活动死亡和重新活动期间解除绑定/重新绑定到服务。班级管理所有这些`Application`，并且不受活动的影响。该类`Application`接收所有回调，您将需要有代码来确定如何处理回调。可能您希望在`Application`类中存储一些数据，然后通知活动有新数据可用，或类似的东西。

另一种方法是`Service`广播回调。在这种情况下，服务和活动之间的耦合是松散的，因此您不需要`Handler`在活动中创建 a 然后将其传递给`Service`. 活动可以只`BroadcastReceiver`为他们感兴趣的回调注册 s，或者您可以在清单中管理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:48:27.897

正如您所说，一种解决方案是使用 MyActivity.handleMessage(Message)。每当您的活动开始（或重新启动）时，您可能会尝试启动服务（您提到的“onBind”内容）。如果服务已经在运行，则不会造成任何损害。绑定内容完成后，您告诉 Messenger 发送回复的服务。

为确保处理重新启动，在 onStop 中，您需要告诉服务将该 Messenger 从其“发送回复的位置列表”中删除，这样它就不会意外地向现在不存在的 Messenger 发送消息。当 onStart 作为重启的一部分被调用时，它将发送现在正确的 Messenger。

显然，这需要服务处理这个问题，并以某种方式管理它有一个响应要发送而没有 Messenger 可以发送到的场景。它要么保留信息直到 Messenger 可用，要么丢弃信息，并且 Activity 显式获取所有状态信息，作为它在 onStart 中完成的绑定内容的后续。

另一种方法是让 Activity 每隔一段时间（10 秒？）轮询一次服务，当它知道正在进行处理以查看结果是否可用时，然后在所有信息返回后停止轮询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:50:48.660

对于异步服务调用，我会说，在启动它时会传递一个回调引用。

回调将由绑定线程执行，这是此方法的标准。

当然，发起调用的Activity可以依赖binder线程运行在自己的进程中这一事实。所以很容易从回调中回到主/UI线程。

因此，如果回调需要在主/UI线程中处理某些东西，它只使用

```
(new Handler(Looper.getMainLooper()).post() 
```

它的优点是它在代码执行的时间点动态地找到主/ UI线程。另一方面，这甚至不是必需的，因为主/UI 线程不会改变，因此通过 View 引用或您在回调中可能手头的任何其他内容也可以找到它。

# sql-server - 查找在多个 SQL Server 上分配的 Active Directory 组/角色

> ID：15413668
> 
> 赞同：0
> 
> 时间：2013-03-14T15:38:17.807
> 
> 标签：sql-server, powershell, active-directory

我一直在搜索互联网，试图找到与此相关的任何内容，但我没能做到。我正在尝试找到一种方法来查询多个 SQL 服务器并搜索特定的 Active Directory 组及其在该服务器上分配的角色。

如果可能的话，如果有人有任何想法；您能否指出我正确的方向或我可能错过的链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:25:57.660

下面的脚本将帮助您...使用 Powershell，您可以在多个服务器上运行它。

根据您的需要，您可以修改脚本。

```
SELECT  
  [srvprin].[name] [server_principal], 
  [srvprin].[type_desc] [principal_type], 
  [srvperm].[permission_name], 
  [srvperm].[state_desc]  
FROM [sys].[server_permissions] srvperm 
  INNER JOIN [sys].[server_principals] srvprin 
    ON [srvperm].[grantee_principal_id] = [srvprin].[principal_id] 
WHERE [srvprin].[type] IN ('S', 'U', 'G') and [srvprin].[type_desc] like 'WINDOWS%' 
ORDER BY [server_principal], [permission_name]; 
go

CREATE TABLE #ADMembership
(account_name SYSNAME,
 [type] NVARCHAR(10),
 privilege NVARCHAR(10),
 mapped_login_name NVARCHAR(max),
 permission_path NVARCHAR(max))

DECLARE @login SYSNAME;
SET @login = SUSER_SNAME();

INSERT INTO #ADMembership
EXEC XP_LOGININFO @login,'ALL';

-- select the data or do what ever u want ...
SELECT * FROM #ADMembership;
-- clean up
DROP TABLE #AdMembership 
```

# vb.net - 如何管理 3 个窗体之间的 Winform 控件？

> ID：15413671
> 
> 赞同：0
> 
> 时间：2013-03-14T15:38:24.827
> 
> 标签：vb.net, winforms

我有一个有两种形式的应用程序。一种仅用于管理员访问，另一种仅用于用户访问。我想要做的是检查用户是否是管理员，如果是，那么只加载管理员表单，如果启动应用程序的用户不是管理员，它只加载用户表单。当用户完成他们的表单时，它会在关闭时退出应用程序。

我是否需要一个“逻辑”表单来确定要加载哪个表单？我遇到的问题是，无论用户访问如何，它都会在屏幕上显示所有表单。我如何完全控制在开始时加载的先前或初始 winform 的 winform？一次只能在屏幕上显示 1 个表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:05:50.040

如果您取消选中项目的“启用应用程序框架”选项，并将启动对象设置为 Sub Main，您可以创建一个新模块并将代码放入 Sub Main：

```
Module Main
    Public Sub Main()
        Dim userIsAdmin As Boolean
        ' do your check here
        If userIsAdmin Then
            Application.Run(New frmAdmin())
        Else
            Application.Run(New frmMain())
        End If
    End Sub
End Module 
```

有关详细信息，请参见此处：

[http://visualstudiomagazine.com/articles/2007/10/01/enable-the-application-framework-in-vb.aspx](http://visualstudiomagazine.com/articles/2007/10/01/enable-the-application-framework-in-vb.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:36:03.570

如果在应用程序的生命周期内只显示一个表单，您可以在调用 Application.Run 之前确定用户是否为管理员，如下所示：

```
If userIsAdmin Then
    Application.Run(New frmAdmin())
Else
    Application.Run(New frmMain())
End If 
```

# javascript - 由 javascript 设置的 Cookie

> ID：15413672
> 
> 赞同：0
> 
> 时间：2013-03-14T15:38:26.307
> 
> 标签：javascript, url, cookies, set

是否可以获得由特定 URL 发送的 javascript 设置的 cookie 的详细信息？我该怎么做？

例如，有一个 URL www.abc.com，我想知道这个 URL 是否发送任何 ajavascript 以在计算机上运行以设置任何 cookie。如果它设置了任何 cookie，这些 cookie 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:45:59.300

大多数浏览器允许您查看所有站点设置的所有 cookie，例如在 Firefox 中：

```
Tools -> Options -> Privacy tab -> remove individual cookies 
```

# javascript - 为使用逻辑迭代的每一行设置日期选择器：迭代

> ID：15413679
> 
> 赞同：0
> 
> 时间：2013-03-14T15:38:53.377
> 
> 标签：javascript, jsp

我正在使用**jsp** 中迭代的每一行迭代一个列表`logic:iterate`，我们需要为名为 dateOfDetection 的字段提供日期选择器。**`logic:iterate`**

 **参考代码：

```
<logic:iterate  id="dbOject"   name="fakeNotesListInSession" scope="session"
indexId="tableCounter"> 

<TR >
<TD> <html:text name="dbOject" property="dateOfDetection"   readonly="true" size="10" ></html:text>
<img src="web/images/cal[2].gif" id="trigger<%=tableCounter.toString()%>" alt="Calendar"/> 
<script type="text/javascript">

                     Calendar.setup({

                           inputField : "dateOfDetection", 

                           ifFormat : "%d/%m/%Y", 

                           button : "trigger<%=tableCounter.toString()%>" 
                     });

                   </script></TD>

         <TD> <html:text name="dbOject" property="fives"  size = "5"  ></html:text></TD>

         <TD> <html:text name="dbOject" property="tens"  size = "5"  ></html:text></TD>

           </TR>

 </logic:iterate> 
```

* * *

对于它正在迭代的每一行，日期选择器即将到来，但是当我们选择日期值时，它仅将值设置为第一行。原因是“在 Calendar.setup 函数中，我们将 inputField 指定为“dateOfDetection”。这被定义为 String dateOfDetection[]=null; 在 action 表单中，因此可以在 action claas 中将其作为数组获取。**

# python - 带有 Pandas 的 Python、索引和数据框

> ID：15413680
> 
> 赞同：0
> 
> 时间：2013-03-14T15:39:03.137
> 
> 标签：python, pandas

我是 Python 新手，对索引和数据框有疑问。我有 3 个源文件，可以用三个键（区代码、区名称、区类型）唯一标识。我正在验证源文件和数据库中的数据之间的数据。下面的代码仅在源文件和数据库之间找到匹配的 dist_name 和 dist_code，然后根据可用的值将一个与另一个匹配。我需要向函数添加另一个条件，添加一个额外的索引/键（district_type），这将使 dist 唯一匹配并比较所有三个键。

***** 编辑**** 为了简化这一点，我改变了我的方法中的逻辑。通过连接两个键 District_code 和 District_type 我有一个唯一标识符（dist_key）。我更改了下面的函数以反映此更改，但我收到了**"keyError: u'no item named dist_key"**。这是函数产生错误，因为我相信新的唯一标识符仅在此函数中定义。作为这种语言和脚本的新手，我不确定如何在函数外部调用所需的变量 (dist_key)。**

 **```
if dfyearfound:
    df2['district_name']=df2['district_name'].str.strip()
    df2['district_code']=df2['district_code'].str.strip()
    **df2['dist_key']=df2['dist_key'].str.strip()**  """This line is causing the error"""

def addNamesCodes(testframe,districtnamedata,districtcodedata):
        """ Function that will correct any missing data such as district names or district codes.  Parameter is a pandas dataframe, dictionaries which map the district names and district codes """

        #contain list of correct district codes and district names
        districtnames=[]
        districtkeys=[]
        #Non matches
        fdistrictnames=[]
        fdistrictkeys=[]
        #fill empty values in names and codes

        testframe['district_name']=testframe['district_name'].apply(lambda x: str(x))
        testframe['district_name']=testframe['district_name'].fillna('')
        testframe['district_code']=testframe['district_code'].fillna('')
        testframe['dist_key']=testframe['dist_key'].fillna('')
        testframe['dist_key']=testframe['dist_key']+testframe['district_code']
        #Create two new columns containing the district names and district codes in same format as enrollment and teacher data  
        for i in range(len(testframe.index)):
            #both district code and district name are present
            if districtnamedata.has_key(testframe['dist_key'][testframe.index[i]]) and districtcodedata.has_key(testframe['district_name'][testframe.index[i]]):
                #district code and district name are a match
                if ((districtnamedata[testframe['dist_key'][testframe.index[i]]]==testframe['district_name'][testframe.index[i]]) and (districtcodedata[testframe['district_name'][testframe.index[i]]]==testframe['dist_key'][testframe.index[i]])):
                    districtnames.append(districtnamedata[testframe['dist_key'][testframe.index[i]]])
                    districtkeys.append(districtcodedata[testframe['district_name'][testframe.index[i]]])
                #potential wrong mappings
                else:
                    districtkeys.append(testframe['dist_key'][testframe.index[i]])
                    districtnames.append(districtnamedata[testframe['dist_key'][testframe.index[i]]])
            else:
                #check if district code is present
                if districtnamedata.has_key(testframe['dist_key'][testframe.index[i]]):
                    districtkeys.append(testframe['dist_key'][testframe.index[i]])
                    districtnames.append(districtnamedata[testframe['dist_key'][testframe.index[i]]])
                #check if only district name is present 
                elif districtcodedata.has_key(testframe['district_name'][testframe.index[i]]):
                    districtnames.append(testframe['district_name'][testframe.index[i]])
                    districtkeys.append(districtcodedata[testframe['district_name'][testframe.index[i]]])
                #complete nonmatches
                else:
                    fdistrictnames.append(testframe['district_name'][testframe.index[i]])
                    fdistrictkeys.append(testframe['dist_key'][testframe.index[i]])
        #extend the list by the complete nonmatches
        districtnames.extend(fdistrictnames)
        districtkeys.extend(fdistrictkeys)

        return districtnames,districtkeys 
```

样本来源：注册---

```
district_code   district_name   district_type_code  enroll_totals
1                 AITKIN               1                    122
1                 AITKIN               1                    123
1                 SAVAGE               3                    140
1                 SAVAGE               3                    780
15              ST. FRANCIS            1                    782
16              SPRING LAKE            1                    784 
```

金融 - -

```
district_code   district_name   district_type_code          budget
1                 AITKIN               1                    122000
1                 AITKIN               1                    120003
1                 SAVAGE               3                    140000
1                 SAVAGE               3                    780000
15              ST. FRANCIS            1                    782000
16              SPRING LAKE            1                    784000 
```

老师 - -

```
district_code   district_name   district_type_code         Salary
1                 AITKIN               1                    50000
1                 AITKIN               1                    42000
1                 SAVAGE               3                    89000
1                 SAVAGE               3                    32000
15              ST. FRANCIS            1                    78000
16              SPRING LAKE            1                    58000 
```**

# c++ - 如何保存视频的任何帧

> ID：15413683
> 
> 赞同：0
> 
> 时间：2013-03-14T15:39:06.373
> 
> 标签：c++, opencv, save-image

我想保存我的视频的一些帧。我尝试`CvsaveImage()`在视觉中使用`C++ 2010`，但它不能保存很多帧，因为我不知道如何用不同的名称保存下一帧。因此，旧帧将被下一帧覆盖。

任何人都可以帮我保存许多不同名称的框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:17:59.030

使用计数器，例如每次保存新文件时递增的帧号或整数。将此计数器的值附加到文件名的末尾，您将获得一个唯一的文件名，直到计数器溢出（无符号整数超过 40 亿帧）。

```
static unsigned int counter = 0;
[...]
char pFileName[MAX_PATH] = {0};
sprintf(pFileName, "<YourFilePath>\\Frame_%u.jpg", counter++);
[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:47:09.383

`cvSaveImage()`需要 a `const char* filename`，但这只是意味着`cvSaveImage`不会更改字符串；这并不意味着*你*不能改变它。

如果它更简单，你可以用你自己的函数包装 cvSaveImage 并在那里形成文件名：

```
int my_cvSaveImage( const char* baseFilename, int frameNumber, const CvArr* image )
{
    char filename[MAX_PATH] = {};
    sprintf( filename, "%s-%d.jpg", baseFilename, frameNumber );
    return cvSaveImage( filename, image );
} 
```

现在你打电话：

```
my_cvSaveImage( "file", 1, image );
//...
my_cvSaveImage( "file", 2, image ); 
```

# grails - Grails：如何将 executeQuery 与嵌入对象一起使用

> ID：15413684
> 
> 赞同：1
> 
> 时间：2013-03-14T15:39:06.793
> 
> 标签：grails, hql

我有一个嵌入孩子的对象：

```
class Parent {
    Child child

    static embedded  ['child']
}

class Child {
    String name
} 
```

而且我想使用 executeQuery （因为在我的真实情况下，我不能使用 Where 查询或创建条件）。在不切换到标准的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:43:49.320

尝试：

```
Parent.executeQuery("FROM Parent parent WHERE parent.child.name = 'FOO'") 
```

**编辑：**

刚刚注意到，您需要为嵌入对象添加一个静态声明：

```
static embedded  ['child'] 
```

也许这会奏效......

# encryption - 数字、可逆、伪随机数生成器，用于非常大的数字

> ID：15413686
> 
> 赞同：3
> 
> 时间：2013-03-14T15:39:10.597
> 
> 标签：encryption, random

有谁知道符合上述所有标准的算法？我需要指定一个种子编号，以及我希望输出编号所属的范围（这也将是输入编号所在的范围）。此函数还需要有一个反向操作的对应项。

例如：

我传递种子 5 和范围 5-35，然后我收到数字 27。然后我可以将它传递给一个反转操作的函数，使用相同的范围，这将使我返回数字 5。

我无法存储原始数字，也无法遍历输入数字列表。这不一定是加密强度，它必须尽可能快。

我能想到的唯一符合这种描述的是加密算法。即使是正确方向的一点也很棒。

编辑

我正在尝试找到一种方法来表示一组太大而无法保存在内存中的随机（看起来）数字（可能是 3e12 数字），然后测试该集合中是否出现某些数字范围。

例如。如果我有一个函数可以给我随机集合（4、22、7、343、67、38、2），我想说，给我该集合中介于 1 和 30 之间的数字，并且取回集合 (4, 22, 7, 2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:41:51.833

正如 RB 所说，您需要加密，而不是 RNG。使用给定的密钥，加密是可逆的。如果您想从具有更改范围的同一种子中获得不同的结果，则密钥也可以包含种子和范围。

范围大小是一个不同的问题。对于 32 位范围，使用 DES。对于 64 位使用 AES。对于其他范围，要么编写您自己的简单[Feistel 密码](http://en.wikipedia.org/wiki/Feistel_cipher)，要么使用为所有大小定义的[Hasty Pudding 密码。](http://en.wikipedia.org/wiki/Hasty_Pudding_cipher)

无论您使用什么底层密码，您始终可以使用 Hasty Pudding 方法在适当的范围内找到一个数字：只需继续对输出进行加密，直到它在所需的范围内。一旦你有合适大小的东西，你可以添加下限来获得你需要的数字。因此，对于 5 到 35 的范围，您将在 [0..30] 中生成一个数字并添加 5。

ETA：在考虑了您的问题之后，您不能将种子用作密钥的一部分。如果你这样做，你将无法重建密钥来解密你的随机数。您只能在*开始*逆向过程时知道的密钥中使用数据。

当你接触到种子时，你还需要一种识别种子的方法。当你解密时，你会得到一系列数字；您需要一种方法来找出哪个是原始种子。也许您可以将种子限制在指定的范围内（或其从零开始的等效项），并在解密系列中选择第一个处于正确范围内的种子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:44:20.910

不，这是不可能的。随机数生成器可以从多个不同的种子生成相同的输出（在这方面，它就像一个散列算法从不同的输入生成相同的输出）。

例如，PRNG 可能像这样工作（伪代码）：

```
PRNG randomWithSeed5 = new PRNG(seed: 5);
PRNG randomWithSeed6 = new PRNG(seed: 6);
PRNG randomWithSeed7 = new PRNG(seed: 7);

randomWithSeed5.NextInt(range: 5-50); //returns 20
randomWithSeed6.NextInt(range: 5-50); //returns 20
randomWithSeed7.NextInt(range: 5-50); //returns 32 
```

在这一点上，很明显不可能编写一个解码算法，给定输入 20，可以返回正确的种子 - 你无法决定是否`5`或`6`将是正确的答案。

听起来加密算法会更好地满足您的需求 - 我什至不明白为什么涉及随机数生成器。

# crystal-reports - 从子报表到主报表

> ID：15413691
> 
> 赞同：0
> 
> 时间：2013-03-14T15:39:30.093
> 
> 标签：crystal-reports, subreport

我有一个以这种方式显示数据的水晶报告：

代码_*价格*___数量

A_ **_ *10.00* ___** _1

B_ **_ *20.00* ___** _1

A_ **_ *10.00* ___** _1

在页脚中，我有一个按代码分组的子报表并对价格求和，所以：

A_ *_* _20.00

B_ *_* _20.00

现在，我想在 MAIN 中报告 A + B 的总数，即 40.00

我如何能？

我不能从子报告中获取一个值到主报告..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:24:12.627

脚步：

*   复制位于组页脚中的汇总字段
*   将汇总字段粘贴到报表页脚部分
*   删除子报告；你可以在没有人的情况下完成所有这一切
*   创建一个运行总计来计算 A 的值：

![在此处输入图像描述](../Images/24b78449201d636c42299cc0e690a785.png)

*   将“要汇总的字段”更改为表格。价格
*   公式应该类似于`{table.Code}="A"`
*   将字段放在报告页脚部分
*   为 B 创建第二个 RT 字段

# youtube - 创建 youtube 频道时如何保持图像质量？

> ID：15413699
> 
> 赞同：0
> 
> 时间：2013-03-14T15:39:44.440
> 
> 标签：youtube, youtube-channels

我试图制作一个 youtube 频道页面，发现他们已经改变了他们的频道页面结构。现在他们有一个叫做“一个频道”的东西，并要求上传一张 2120 X 1192 像素的图像。

目前很好。问题是，当我上传图片时，上传的图片显示质量要差得多。

关于如何克服这个问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T12:32:46.257

尝试将最终图像 (2120X1192) 保存为 PNG 文件格式，这应该可以解决问题。同样的事情显着提高了频道艺术和头像的质量。

# testing - 从 Grails 2.0.3 升级到 2.2.1：测试失败

> ID：15413701
> 
> 赞同：2
> 
> 时间：2013-03-14T15:39:47.763
> 
> 标签：testing, grails, upgrade, geb

我正在尝试从 Grails 2.0.3 升级到 2.2.1。我有两个问题：1）单元测试失败，2）集成测试失败。

第一个问题是缺少方法异常：

```
| Failure:  testSendingBlankDirectionsAreOK(happytrails.RouteControllerTests)
|  java.lang.reflect.InvocationTargetException
    at happytrails.RouteControllerTests.testSendingBlankDirectionsAreOK(RouteControllerTests.groovy:163)
Caused by: org.codehaus.groovy.runtime.metaclass.MissingMethodExceptionNoStack: No signature of method: happytrails.Route.addToDirections() is applicable for argument types: (happytrails.Direction) values: [null]
Possible solutions: getDirections() 
```

测试如下：

```
void testSendingBlankDirectionsAreOK() {
    populateValidParams(params)

    params['directions[0].sortNumber'] = ''
    params['directions[0].instruction'] = ''

    def route = new Route(params)
    assert route.save() != null
    params.id = route.id

    controller.update()

    println route.errors

    assert response.redirectedUrl == "/route/show/$route.id"
    assert flash.message != null
} 
```

第二个问题似乎是由 Geb 引起的，它试图使用 Chrome 驱动程序。

```
| Running 11 spock tests... 6 of 11
| Failure:  signup as a new user(happytrails.AuthenticatedUserSpec)
|  org.openqa.selenium.WebDriverException: Unable to either launch or connect to Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 45.66 seconds
Build info: version: '2.27.0', revision: '18259', time: '2012-12-05 11:30:53'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.8.2', java.version: '1.7.0_04'
Driver info: org.openqa.selenium.chrome.ChromeDriver
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:216)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:111)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:115)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:161)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:107)
    at happytrails.AuthenticatedUserSpec.signup as a new user(AuthenticatedUserSpec.groovy:25) 
```

我已经看到[这个](https://github.com/geb/geb-example-grails/pull/7/files)关于如何配置自动下载 ChromeDriver 的请求请求。但是，我在测试中将其实例化如下：

```
def "signup as a new user"() {
    given:
    def server = SimpleSmtpServer.start(1025)
    driver = new ChromeDriver() 
```

有没有更好的方法来实例化 ChromeDriver 以进行个人测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:10:13.443

关于您的单元测试，在 Grails 2.2.x 上，您需要模拟与测试相关的所有域类。这在[发行](http://grails.org/2.2.1%20Release%20Notes)说明中进行了解释。

对于您的功能测试，如果您使用另一个驱动程序它可以工作吗？`selenium`此外，针对不同版本的浏览器存在特定版本。例如，我有 FF 18.0，唯一可以使用的 selenium 版本是`2.29`，因此您可以检查您的 chrome 和 selenium 兼容性。

如果您只运行 Chrome 进行一项测试，请尝试添加`-Dgeb.env=chrome`命令。

# java - 重新编辑文件并将字符串和数值以特定格式存储在数组中

> ID：15413702
> 
> 赞同：0
> 
> 时间：2013-03-14T15:39:52.547
> 
> 标签：java

我有一个名为 file.txt 的输入文件，其内容

```
Zone
Diameter    5
-321    -560    5811
-209    -580    2935
-27     -409    3580
-1075   -220    2847
-1045   206     2827
-19     410     3570
-205    570     2929
-310    565     5768
2.0     3.0     2.0
Zone
Diameter    50
4379    461     23390
484     -264    13447
1259    -516    11969
182     -669    9530
1366    -931    12720
1553    2350    -18702
-3458    6112   -24596
-3606   -6347   -24995
1491    -2267   -18694
1315    835     12740
193     631     9525
12      1252    490     11942
13      520     211     13311
14      4308    -174    23624 
```

我正在寻找类似的输出：

```
 zone=1
    x=[1.0 2.0 1.0 2.0 1.0.......2.0 1.0]
    similarly y=[]
    z=[]
    then
    zone=2
    x=[5.0 25.0 15 25 41 25 16 25]
    similarly y=[]
    z=[] 
```

但是，我从 zone=1 开始获取 zone=2 的 x=[] 的值，因为我使用的是 x.add(scanner.nextDouble())。

请帮我。提前致谢。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package boltcal1103;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

/**
 *
 * @author Neha
 */
public class NewMain {
private static ArrayList<Double> x;
private static ArrayList<Double> y;
private static ArrayList<Double> z;
private static String next1;

/**
* @param args the command line arguments
*/
public static void main(String[] args) throws FileNotFoundException {
    // TODO code application logic here
    //File file1 = new File("file.txt");

    Scanner scanner = new Scanner(new FileReader("file1.txt"));
    String line=null,word="Zone",next = null, next1=null;
    int count=1;
    while(scanner.hasNext()) {
        line = scanner.nextLine();
        if (line.equals(word)) {
            if (count > 1) {
                System.out.println(x);
                System.out.println(y);
                System.out.println(z);
            }
            //    int b;
            //  String next1;
            if(scanner.hasNextLine()){
                String nextLine1 = scanner.next();
                System.out.println("name :"+nextLine1);
                //   scanner.useDelimiter("\t");
                if(scanner.hasNext())
                {

                    //   scanner.useDelimiter(" ");
                    next1 = scanner.next();
                    System.out.println("value of diameter:"+next1);
                    //b = Integer.parseInt(scanner.next());
                    //System.out.println("value of diameter:"+b);
                    //      scanner.useDelimiter("\n");
                    scanner.nextLine();
            }}

            System.out.println("zone=:"+count);
            count++;
            x = new ArrayList<Double>();
            y = new ArrayList<Double>();
            z = new ArrayList<Double>();
        }

        else {
            // String delims="";
            String[] d = line.split("\t");
            //         System.out.println("zone=:"+d);

            x.add(Double.parseDouble(d[0]));
            y.add(Double.parseDouble(d[1]));
            z.add(Double.parseDouble(d[2]));
            //      System.out.println("zone=:"+count);
            //  System.out.println(d[0]);
            //  System.out.println(d[1]);
            //  System.out.println(d[2]);
            int i;
            for(i=0;i<x.size();i++)
            {
                Double get1 = x.get(i);
                // System.out.println("value of x:"+get1);
                Double get2 = y.get(i);

                Double get3 = z.get(i);
                double x1 = get1*get1;
                double y1 = get2*get2;
                double z1 = get3*get3;
                System.out.println("x1:"+x1+"\ty1:"+y1+"\tz1:"+z1);

        } }

    }

    if (count > 1) {
        System.out.println(x);
        System.out.println(y);
        System.out.println(z);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:48:57.683

你可以移动

```
List<Double> x = new ArrayList<Double>();   //Defining double arraylist for Fx
List<Double> y = new ArrayList<Double>();   //Defining double arraylist for Fy
List<Double> z = new ArrayList<Double>();   //Defining double arraylist for Fz 
```

在您的 while 循环中，因此列表将在每个区域之后重置。

**编辑**因为你想支持任意大小的区域，所以你的 while 循环像：

```
while(scanner.hasNext()) {
    line = scanner.next();
    if (next.equals(word)) {
        if (count > 1) {
            System.out.println(x);
            System.out.println(y);
            System.out.println(z);
        }

        System.out.println("zone=:"+count);
        count++;
        x = new ArrayList<Double>();
        y = new ArrayList<Double>();
        z = new ArrayList<Double>();
    } else {
        String[] d = line.split(' ');
        x.add(Double.parseDouble(d[0]);
        y.add(Double.parseDouble(d[1]);
        z.add(Double.parseDouble(d[2]);
    }
}

if (count > 1) {
    System.out.println(x);
    System.out.println(y);
    System.out.println(z);
} 
```

# c# - TPL 线程数

> ID：15413704
> 
> 赞同：1
> 
> 时间：2013-03-14T15:39:53.093
> 
> 标签：c#, .net, multithreading, .net-4.0, task-parallel-library

我有一个针对 .NET 4.0 TPL 程序员的问题。我创建了这个 TPL 和 ThreadPool 压力测试器，在其中运行 X 个测试，每个测试执行 Y 个任务，完成后，它继续进行下一个测试。

我遇到的问题是，如果单个测试启动 100 个任务，则以下测试将添加更多任务等等，给我留下大量线程。

（我拥有的线程数取自资源监视器）。

伪代码：

```
while (tasksLeftToRun != 0)
{
    var nextTask = new Task(new Action(()=>
    {
        Thread.Sleep(20);
    }), cancellationToken);

    nextTask.Start();
    nextTask.ContinueWith((t) =>
    {
        //...
    },TaskScheduler.Default);
    tasksLeftToRun--;
} 
```

应用程序完成测试后大约 15 秒，线程数下降到 ~7。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:44:06.470

问题是您正在使用`Thread.Sleep`而不是*实际工作*，因此 ThreadPool 看到您已阻塞线程，并开始注入新线程。这将导致线程数随着时间的推移而增长。

如果您要进行真正的工作而不只是休眠，则不会发生这种情况，因为 ThreadPool 会看到线程实际上正在执行工作，而新线程不会加快整体吞吐量。

现在，在这种情况下，您的延续似乎是实际工作的大部分，在这种情况下，您最好完全没有初始任务：

```
while (tasksLeftToRun != 0)
{
    var nextTask = new Task.Factory.StartNew(()=>
    {
        //... Actual work
    }), cancellationToken);

    tasksLeftToRun--;
} 
```

但是，由于您似乎正在处理任务“队列”（您有很多任务要创建），您可能想要调查`Parallel`该类是否更适合此。如果“作品”以某种形式存储在集合中，使用`Parallel.ForEach`甚至 PLINQ 可能更合适。

# c++ - 分段错误，使用 MPI 库乘以矩阵

> ID：15413712
> 
> 赞同：2
> 
> 时间：2013-03-14T15:40:34.177
> 
> 标签：c++, c, multidimensional-array, segmentation-fault, mpi

我正在编写一个程序，该程序将存储在文本文件中的两个矩阵 A 和 B 相乘，其大小可能会有所不同，因此我的程序必须确定矩阵 A 和 B 的大小，确定它们是否可以相乘等。

好吧，这不是问题，真正的麻烦是当我将数据从主进程传递到从进程时，在我的程序中，我将行从主进程传递到从进程，行数取决于矩阵的行数和过程。

矩阵 A 按行存储，但矩阵 B 按列存储。

> 矩阵A[0]----------------
> 
> 矩阵A[1]----------------
> 
> 矩阵A[2]----------------
> 
> 矩阵B[ 0 ] 矩阵B[ 1 ] 矩阵B[ 2 ] ....
> 
> ```
> |           |         |     |
> |           |         |     |
> |           |         |     | 
> ```

您可以在此处找到文本文件（用于输入）：[matrixA](https://www.dropbox.com/s/io2y8r7p0eb3pxr/matrixA.txt) [matrixB](https://www.dropbox.com/s/sqw445d89l4zi20/matrixB.txt)。

经过几天的 80 年代风格调试（意味着根本不是调试器），我认为问题（我得到的分段错误作为输出）出在这些代码行中（来自从属函数）：

```
void slave( int id, int slaves, double **matrixA, double **matrixB, double **matrixC )
{
    int type, columnsA, columnsB, rowsA, rowsB, Btype, offset, rows, averageRows, extraRows;
    MPI_Status status;

    /* Recieves columns of A and B from master. */
    type = 3;

    MPI_Recv( &columnsA, 1, MPI_INT, 0, type, MPI_COMM_WORLD, &status );
    MPI_Recv( &rowsA, 1, MPI_INT, 0, type, MPI_COMM_WORLD, &status );
    MPI_Recv( &columnsB, 1, MPI_INT, 0, type, MPI_COMM_WORLD, &status );
    MPI_Recv( &rowsB, 1, MPI_INT, 0, type, MPI_COMM_WORLD, &status );
    printf( "%d slave recieved ColumnA = %d, RowsA = %d, ColumnB = %d, RowsB = %d.\n", id, columnsA, rowsA, columnsB, rowsB );

    /* Recieve from master. */
    type = 0;

    MPI_Recv( &offset, 1, MPI_INT, 0, type, MPI_COMM_WORLD, &status );
    MPI_Recv( &rows, 1, MPI_INT, 0, type, MPI_COMM_WORLD, &status );

    matrixAllocate( &matrixA, columnsA, rows );
    matrixAllocate( &matrixB, rowsB, columnsB );
    matrixAllocate( &matrixC, columnsB, rows );
    printf( "Correctly allocated.\n" );

    /* This part is only to see if the mem was correctly allocated.*/
    for( int i = 0; i < rows; i++ ){
        for( int j = 0; j < columnsA; j++)
            matrixA[ i ][ j ] = i + j;
    }

    for( int i = 0; i < columnsB; i++ ){
        for( int j = 0; j < rowsB; j++)
            matrixB[ i ][ j ] = i * j;
    }

    if ( id == 1 ){
        matrixPrinter( "matrixA", matrixA, rows, columnsA );
        matrixBPrinter( "matrixB", matrixB, rowsB, columnsB );
        matrixPrinter( "matrixC", matrixC, rows, columnsB );
    }

    MPI_Recv( &matrixA, ( rows * columnsA ) , MPI_DOUBLE, 0, type, MPI_COMM_WORLD, &status );
    MPI_Recv( &matrixB, ( rowsB * columnsB ), MPI_DOUBLE, 0, type, MPI_COMM_WORLD, &status );
    printf( "Correctly recieved.\n" );

    matrixPrinter( "matrixA", matrixA, rows, columnsA );
    matrixBPrinter( "matrixB", matrixB, rowsB, columnsB );
    matrixPrinter( "matrixC", matrixC, rows, columnsB );

    if ( id == 1 ){
        printf( "My id is %d.\n", id );
        for ( int i = 0; i < rows; i++ ){
            for( int j = 0; j < columnsA; j++ ){
                printf( "%lf    ", matrixA[ i ][ j ] );
            }
        printf( "\n" );
    }
} 
```

**整个代码可以在这里找到**。[C中的MPI矩阵乘法器。](http://pastecode.org/index.php/view/83799792)

**终端的输出是：**

![在此处输入图像描述](../Images/c23a81daf3d8a03b3a22fc594d1381c7.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:09:06.150

问题是，矩阵是在“matrixAllocate”中分配的“double **”类型。在发送和接收数据时，MPI 假定 buf 以一维数组的形式连续包含数据，但事实并非如此。（您可以通过打印出每个矩阵条目的地址来轻松检查）

我认为这是 C 语言中的一个著名陷阱：指针和数组是不同的。如果矩阵是一个二维数组，那么所有的条目都是连续布局的。

我的建议是将矩阵分配为 1-d 并且不要使用 multidim 下标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:31:45.927

在不深入研究所有`MPI`代码的情况下，我不想发布这样的答案，但我建议`-Wall`将来使用编译器命令。它可能会有所帮助并发现这样的错误。对于 MPI 和任何与计算相关的东西，您几乎总是需要`-Wall`编译器命令

查看代码的输出和警告列表。

```
$ mpic++ test.cpp -Wall -o  test
test.cpp:30:63: warning: unused variable 'rank' [-Wunused-variable]
    int lineA, lineB, columnA, columnB, id, size, rc, slaves, rank, source;
                                                              ^
test.cpp:30:69: warning: unused variable 'source' [-Wunused-variable]
    int lineA, lineB, columnA, columnB, id, size, rc, slaves, rank, source;
                                                                    ^
test.cpp:126:50: warning: variable 'matrixC' is uninitialized when used here [-Wuninitialized]
            slave( id, slaves, matrixA, matrixB, matrixC );
                                                 ^~~~~~~
test.cpp:34:21: note: initialize the variable 'matrixC' to silence this warning
           **matrixC;
                    ^
                     = NULL
test.cpp:126:41: warning: variable 'matrixB' is uninitialized when used here [-Wuninitialized]
            slave( id, slaves, matrixA, matrixB, matrixC );
                                        ^~~~~~~
test.cpp:33:21: note: initialize the variable 'matrixB' to silence this warning
           **matrixB,
                    ^
                     = NULL
test.cpp:85:44: warning: variable 'rc' is uninitialized when used here [-Wuninitialized]
                MPI_Abort( MPI_COMM_WORLD, rc );
                                           ^~
test.cpp:30:53: note: initialize the variable 'rc' to silence this warning
    int lineA, lineB, columnA, columnB, id, size, rc, slaves, rank, source;
                                                    ^
                                                     = 0
test.cpp:126:32: warning: variable 'matrixA' is uninitialized when used here [-Wuninitialized]
            slave( id, slaves, matrixA, matrixB, matrixC );
                               ^~~~~~~
test.cpp:32:21: note: initialize the variable 'matrixA' to silence this warning
    double **matrixA,
                    ^
                     = NULL
test.cpp:398:20: warning: conversion from string literal to 'char *' is deprecated [-Wdeprecated-writable-strings]
    matrixPrinter( "matrixA", matrixA, rows, columnsA );
                   ^
test.cpp:399:21: warning: conversion from string literal to 'char *' is deprecated [-Wdeprecated-writable-strings]
    matrixBPrinter( "matrixB", matrixB, rowsB, columnsB );
                    ^
test.cpp:400:20: warning: conversion from string literal to 'char *' is deprecated [-Wdeprecated-writable-strings]
    matrixPrinter( "matrixC", matrixC, rows, columnsB );
                   ^
test.cpp:407:20: warning: conversion from string literal to 'char *' is deprecated [-Wdeprecated-writable-strings]
    matrixPrinter( "matrixA", matrixA, rows, columnsA );
                   ^
test.cpp:408:21: warning: conversion from string literal to 'char *' is deprecated [-Wdeprecated-writable-strings]
    matrixBPrinter( "matrixB", matrixB, rowsB, columnsB );
                    ^
test.cpp:409:20: warning: conversion from string literal to 'char *' is deprecated [-Wdeprecated-writable-strings]
    matrixPrinter( "matrixC", matrixC, rows, columnsB );
                   ^
test.cpp:363:70: warning: unused variable 'averageRows' [-Wunused-variable]
    int type, columnsA, columnsB, rowsA, rowsB, Btype, offset, rows, averageRows, extraRows;
                                                                     ^
test.cpp:363:83: warning: unused variable 'extraRows' [-Wunused-variable]
    int type, columnsA, columnsB, rowsA, rowsB, Btype, offset, rows, averageRows, extraRows;
                                                                                  ^
test.cpp:363:49: warning: unused variable 'Btype' [-Wunused-variable]
    int type, columnsA, columnsB, rowsA, rowsB, Btype, offset, rows, averageRows, extraRows;
                                                ^
15 warnings generated. 
```

# xpages - 如何将客户端 javascript 全局添加到 xpages 应用程序

> ID：15413719
> 
> 赞同：2
> 
> 时间：2013-03-14T15:40:50.630
> 
> 标签：xpages

我通过使用复制粘贴到 Designer Java 视图中的 xpage 应用程序添加了一个 javascript 库。但是这似乎不起作用，因为浏览器中的源错误：

```
<script type="text/javascript" src="/development/charts/HighChartsTest.nsf/xsp/.ibmmodres/.js/js%2Fjquery190min.js&amp;js%2Fjs%2Fhighcharts.js"></script> 
```

代替

```
<script type="text/javascript" src="/development/charts/HighChartsTest.nsf/js/jquery190min.js"></script>
<script type="text/javascript" src="/development/charts/HighChartsTest.nsf/js/js/highcharts.js"></script> 
```

应用程序使用的主题包含以下几行：

```
<resource>
        <content-type>application/x-javascript</content-type>
        <href>/js/jquery190min.js</href>
    </resource>
    <resource>
        <content-type>application/x-javascript</content-type>
        <href>/js/js/highcharts.js</href>
    </resource> 
```

是什么导致了这个以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:46:12.293

这是由资源聚合引起的。要禁用此功能，您必须打开*应用程序属性*，选择*XPages*部分并禁用选项*使用运行时优化的 JavaScript 和 CSS 资源*

但请记住，这会影响您的应用程序的性能。

# ms-access - 聚合查询在 log([data]) 上失败

> ID：15413720
> 
> 赞同：1
> 
> 时间：2013-03-14T15:40:51.863
> 
> 标签：ms-access, ms-access-2010, aggregate-functions

`enter code here`我正在设计视图中构建一个聚合查询。如果我平均原始数据，一切正常。一旦我尝试平均 log([data]) 我得到一个错误：“标准表达式中的数据类型不匹配”

我没有在查询中使用任何 WHERE 或 HAVING 子句，所以我不确定它为什么会抱怨“标准表达式”。在任何情况下，所有数据（原始和记录的）都是“双”类型的，所以我不确定类型不匹配发生在哪里。

我什至打破了这两个步骤并设置了一个只计算日志的查询，第二个（基于第一个）进行聚合，但它抛出了同样的错误。

有人会有一些见解吗？非常感谢！

PS：我什至检查了原始数据的最小值和最大值；它们都 > 0.0，因此也不会发生零或负数的对数。

编码：

这工作得很好：

```
SELECT Tbl_00__simRecord.simID, Avg(Tbl_01__obsFlows.[obsFlow_m3/s]) AS [meanObsFlow], 
                                Min(Tbl_01__obsFlows.[obsFlow_m3/s]) AS [MinOfobsFlow_m3/s], 
                                Max(Tbl_01__obsFlows.[obsFlow_m3/s]) AS [MaxOfobsFlow_m3/s]
FROM Tbl_00__simRecord, Tbl_01__obsFlows
GROUP BY Tbl_00__simRecord.simID; 
```

然而，这失败了：

```
SELECT Tbl_00__simRecord.simID, Avg(Tbl_01__obsFlows.[obsFlow_m3/s])  AS [meanObsFlow], 
                                Min(Tbl_01__obsFlows.[obsFlow_m3/s])  AS [MinOfobsFlow_m3/s], 
                                Max(Tbl_01__obsFlows.[obsFlow_m3/s])  AS [MaxOfobsFlow_m3/s], 
                            Avg(Log(Tbl_01__obsFlows.[obsFlow_m3/s])) AS [meanLogObsFlow]
FROM Tbl_00__simRecord, Tbl_01__obsFlows
GROUP BY Tbl_00__simRecord.simID; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:09:19.277

确保您有所有日志的值，这对我有用：

```
SELECT Table1.AText, Avg(Log([anumber])) AS Log1, Table1.ANumber
FROM Table1
GROUP BY Table1.AText, Table1.ANumber
HAVING (((Table1.ANumber)>0)); 
```

注意这一行 Table1.ANumber>0

所以你可以尝试：

```
SELECT Tbl_00__simRecord.simID, 
   Avg(Tbl_01__obsFlows.[obsFlow_m3/s])  AS [meanObsFlow], 
   Min(Tbl_01__obsFlows.[obsFlow_m3/s])  AS [MinOfobsFlow_m3/s], 
   Max(Tbl_01__obsFlows.[obsFlow_m3/s])  AS [MaxOfobsFlow_m3/s], 
   Avg(Log(Tbl_01__obsFlows.[obsFlow_m3/s])) AS [meanLogObsFlow]
FROM Tbl_00__simRecord, Tbl_01__obsFlows
GROUP BY Tbl_00__simRecord.simID
HAVING Tbl_01__obsFlows.[obsFlow_m3/s] > 0 
```

# coded-ui-tests - 如何以编程方式检测 CodedUI 测试失败？

> ID：15413733
> 
> 赞同：1
> 
> 时间：2013-03-14T15:41:35.277
> 
> 标签：coded-ui-tests

我们为我们的 Windows 窗体应用程序提供了一套 CodedUI 测试。

我们在自动启动应用程序的基类中定义了一个*AssemblyInitialize方法。*

虽然通常不需要为每个单独的测试重新启动我们的应用程序，但我想检测测试何时失败并在下一次测试之前自动重新启动应用程序。

**有什么方法可以检测测试何时失败？**

我尝试为*Playback.PlaybackError*设置一个事件处理程序来检测测试中何时发生异常，但这显然会为*所有*异常调用，而不仅仅是未处理的异常。

我们的测试中有一些预期的异常，这些异常在测试用例中处理，但这些异常最终会不必要地调用 PlaybackError 处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:26:11.230

测试结果可以从**TestContext.CurrentTestOutcome**属性中找到，该属性可以在具有 [TestCleanup] 属性的方法中访问。

# postgresql - PostgreSQL：帮我弄清楚如何使用表别名

> ID：15413735
> 
> 赞同：1
> 
> 时间：2013-03-14T15:41:38.767
> 
> 标签：postgresql, join, alias

请保留我头上剩余的头发并帮助我为诸如此类的语句创建别名，我将在其中加入一个表及其查找表

```
//this does the location lookup
SELECT 
ludevice.device,
ludevice.description,
lulocation.location_long
FROM mopdb.ludevice
LEFT JOIN lulocation ON (ludevice.location_id = lulocation.location_id)
WHERE (ludevice.location_id = 1)
ORDER BY ludevice.device_id 
```

*编辑*删除了令人困惑的评论
*编辑*所需的结果是一个用更少的字符实现此功能的语句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:50:35.960

试试这个：

```
SELECT 
  d.device,
  d.description,
  l.location_long
FROM mopdb.ludevice d
LEFT JOIN lulocation l ON (d.location_id = l.location_id)
WHERE (d.location_id = 1)
ORDER BY d.device_id 
```

或者稍微短一点，这要归功于`USING`：

```
SELECT 
  d.device,
  d.description,
  l.location_long
FROM mopdb.ludevice d
LEFT JOIN lulocation l USING (location_id)
WHERE (d.location_id = 1)
ORDER BY d.device_id 
```

# python - 如何在 Python 中按属性从子类中查找对象

> ID：15413736
> 
> 赞同：0
> 
> 时间：2013-03-14T15:41:42.000
> 
> 标签：python, object, inheritance, child-objects

假设我定义了以下类来构建由点组成的矩形组成的建筑物。如何从 Building 类中按属性查询所有矩形？我想我应该在这里使用一种超级方法，但是在网上阅读后，无法弄清楚。谢谢你。

* * *

```
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

class Rectangle(Point):
    def __init__(self, north, east, south, west):
        self.north = north
        self.east = east
        self.south = south
        self.west = west

class Building(Rectangle):
    def __init__(self, rectangles):
        self.rectangles = rectangles

    #Search through all the points to find one with matching attributes
    def find_point_by_elevation(self, y):
        for rectangle in self.rectangles:
            if rectangle.south.y = y:
                return rectangle.south

#Testing the Code
n, e, s, w = Point(1,2), Point(2,1), Point(0,1), Point(0,1)
rectangle1 = Rectagnle(n,e,s,w)

n, e, s, w = Point(10,20), Point(20,10), Point(0,10), Point(0,10)
rectangle2 = Rectagnle(n,e,s,w)

my_building = [rectangle1, rectangle2]

my_building.find_point_by_elevation(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:54:08.650

你的继承毫无意义。建筑物不是矩形，矩形也不是点。这是一项组合工作，而不是继承，您通过传递点等正确地做到了这一点 - 只需放弃继承即可。

除此之外，我不确定你的问题是什么。除了您已经在做的迭代之外，没有其他方法可以查询属性，除非您将其存储在某种数据结构中，该数据结构为您要查询的属性编制索引。

# html - 将 div 放在桌子上

> ID：15413739
> 
> 赞同：0
> 
> 时间：2013-03-14T15:41:46.087
> 
> 标签：html, css

我有一张可以包含 div 的表格。表格行高为 100px，div 最高可达 200px。如果 div 高于表格行，我需要它覆盖表格并覆盖底行。我设法用这样的绝对位置做到这一点：

```
<div style="overflow: auto;">
 <table>
  <tr height="100">
    <td>
      <div style="position: absolute; height: 200px">
    </td>
  </tr>
  <tr>
    <td height="100">
      ...
    </td>
  </tr>
  ... (many more rows)
 </table>
</div> 
```

这样一切都很好。问题是当表格变得很长并且滚动时（因为主 div 溢出：自动）并且我开始滚动 div 停留在它们的位置并且只有表格移动。底部的 div 也通过背景显示。我尝试将 div 的位置更改为相对位置，但这样 div 不再覆盖表格，而是将表格行推到 200 像素。

如何解决？谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:53:33.423

...或者通过拥有 2 个 div 元素直接在您的 div 元素上处理机制，而不是试图让表格元素与您的 HTML 结构配合得很好。表格有一个很好的用途，即管理表格数据。它们不适合为您的数据打上品牌。以下将更方便您维护和更新！

```
 <table id="table">
      <tr>
        <td>
          <div style="position:relative; height:200px;">
            <div style="position: absolute; top:0; left:0; height: 200px"></div>
          </div>
        </td>
      </tr>
    </table> 
```

然后通过将所有样式保留在样式表中并简单地调用您的类来进一步升级...

```
 <table id="table">
      <tr>
        <td>
          <div class="sub-wrapper">
            <div class="sub-content">
              </div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div class="sub-wrapper">
            <div class="sub-content">
              </div>
          </div>
        </td>
      </tr>
     ...etc...
    </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:44:43.420

您需要制作表格单元格`position:relative`，并且可能想要添加 div 的顶部和左侧位置

**编辑**

刚刚发现 tds 的相对定位有问题，所以你最好制作一个相对 div，然后将你的绝对 div 放在其中：

```
<table>
  <tr height="100">
    <td>
      <div style="position:relative">
        <div style="position: absolute; top:0; left:0; height: 200px"></div>
      </div>
    </td>
  </tr>
</table> 
```

示例：http: [//jsfiddle.net/EgBAy/](http://jsfiddle.net/EgBAy/)

# delphi - Delphi 在重复时错误地说“比较总是评估为假”......直到循环类型

> ID：15413744
> 
> 赞同：0
> 
> 时间：2013-03-14T15:42:11.920
> 
> 标签：delphi, loops, repeat

我会放一段代码，一个函数。

代码完美运行，没有永远循环。

让我生气的是编译器警告系统。

在编译器警告上，它说有一个永远不会结束的循环，因为它的条件“总是评估为 False”，这是完全错误的，条件可以是 True，如果运行它会进入循环并结束。

是的，我可以忽略这样的警告信息，但我希望它不会显示...我知道这是编译器警告系统上的一个 BUG，有没有修复？

这是一段代码（阅读评论以了解我为什么这样写）：

```
function DoSomethingRetrying(ReTries:Byte=3):Boolean;
var
   HasSucceeded:Boolean;
begin // Do something till not fail, retrying no more than a given number of times
     HasSucceeded:=False; // Initial value to indicate it has not yet succeeded
     repeat // Enter into the ReTry loop till not fail or had tried more than a given number of times
           Dec(ReTries); // Reduces the number of retries to ensure that the loop will end when done more than a given number of times.
           try // Just to caught some kind of error
              // Here can go a tipical AssigFile sentence
              try // Just to caught some kind of error
                 // Here can go a tipical Reset sentence
                 // Here can go a tipical Read sentence
                 try // Just to caught some kind of error
                    // Here can go some ':=' sentences to move data form the record to variables, maths, etc
                    HasSucceeded:=True; // Set the condition so the loop will end immediately.
                 except // Something went wrong
                       // Here you can put some code in case needed
                 end;
              finally // Just in case something is mandatory to be done, if failed or not.
                     // Here can go a tipical CloseFile sentence
              end;
           except // Something went wrong
                 Sleep(1); // Just make a little pause between retries
                 HasSucceeded:=DoSomethingRetrying(ReTries); // ReTry it again (with counter one less)
           end;
     until HasSucceeded or (0>ReTries); // Repeat the loop till no fail or done a max number of retries
     DoSomethingRetrying:=HasSucceeded; // Return if has succeeded
end; 
```

只需将代码（原样，无需任何修改）添加到实现部分的任何单元......然后编译它......警告将显示文本： `W1021 Comparison always evaluates to False`

如果您分析代码，您将看到：

1.  它放在`False`变量`HasSucceeded`上
2.  进入`repeat...until`循环内
3.  递减`ReTries`变量，所以它比传递的少一（它可以是负数）
4.  在一些`try`块内，它放在`True`变量`HasSucceeded`上
5.  事实上，它永远不会运行该`Sleep(1)`部件。该部分适用于大多数外部`try`进入该`except`部分的情况，例如，如果`AssignFile`失败（文件不存在等）
6.  它将评估`until`条件，`HasSucceeded`变量具有值`True`，也可以是真实的`(0>ReTries)`部分（例如当`ReTries`具有负值时）
7.  它退出`repeat...until`循环
8.  该函数将返回`HasSucceeded`值（在这种情况下`True`）

但无需深入了解代码内部......想象一下我用这些句子之一来称呼它： `DoSomethingRetrying(0);` `DoSomethingRetrying(-1);`

在这种情况下，`until`条件部分`(0>ReTries)`将是`True`.

编译器怎么敢说`HasSucceeded or (0>ReTries)`总是被评估为假？

此外，运行代码（如果您愿意，请逐步运行），您会看到它结束，因此条件可以被评估为`True`，并非总是如此`False`......编译器警告消息位于！！！

所以，我想知道如何在不停用此类警告消息类型的情况下解决它？

提前致谢！

PD：至少它发生在 turbo Delphi 2006 上（尚未与其他人一起测试）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T15:53:49.733

您的`ReTries`变量具有 type `Byte`，这是一个无符号类型。由于它是无符号的，它的值总是大于或等于零。因此，比较`0 > Retries`确实总是错误的。您在步骤 3 中断言该值可能为负数是错误的，因此编译器正确地警告您。

在您试图禁用编译器提示或警告之前，请*绝对*确保编译器实际上是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:01:43.117

根本不是错误：编译器发出警告是正确的

> 在这种情况下，直到条件部分 (0>ReTries) 将为 True。

你永远不会是正确的，因为 ReTries 是 Byte 类型的 :)

> 已成功：=真；

如果 Dec(ReTries) 永远不会发生；引发异常:)

# c# - 在 Visual Studio 中使用正则表达式查找和替换程序集

> ID：15413747
> 
> 赞同：6
> 
> 时间：2013-03-14T15:42:16.397
> 
> 标签：c#, regex, visual-studio-2010

我们有一个包含超过 25 个项目的解决方案，每个项目都有自己的`AssemblyInfo`我正在尝试增加所有程序集编号，以便为我们的下一个版本增加一个主要版本。

我的正则表达式技能很少，但基本上我想找到：

```
<Assembly: AssemblyVersion("x.x.x.x")> 
```

在`x`正则表达式中将是`\d`/ 一个数字。看着[这里，](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.80%29.aspx)我想我可以使用：

```
{AssemblyVersion("[\d].[\d].[\d].[\d]")} 
```

哪个不起作用，它不喜欢左括号。我的问题基本上分为两个阶段：

1.  我将使用什么正则表达式字符串来查找示例？
2.  是否可以使用正则表达式将第一个数字替换为数字 + 1？（我怀疑我有点乐观）如果是这样，在这种情况下正则表达式字符串会是什么？

这是在源代码管理中，所以我不想直接修改文件。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:31:32.547

注意：这是使用 Visual Studio 正则表达式查找和替换。

我认为您不能在进行正则表达式替换时添加一个。但是，您可以替换为文字数字。例如，您可以使用将第一个数字替换为 的正则`1`表达式`99`：

`AssemblyVersion("1.0.2121.0")`-->`AssemblyVersion("99.0.2121.0")`

这是我用于 Visual Studio 搜索和替换的正则表达式：

```
Search Regex:  AssemblyVersion[(]["]([0-9]+)([.][0-9]+[.][0-9]+[.][0-9]+)["][)]
Replace Regex: AssemblyVersion("99${2}") 
```

`(.")`搜索正则表达式通过将它们包裹在方括号中来转义所有特殊字符。然后它使用括号将版本号分成两组。第一组是第一组数字。第二组是最后三组数字。

例如，`AssemblyVersion("1.0.2121.0")`像这样分组（使用大括号进行分组）： `AssemblyVersion("{1}{.0.2121.0}")`. 所以第 1 组是`1`，第 2 组是`.0.2121.0`。

替换正则表达式`AssemblyVersion("99${2}")`使用搜索正则表达式中的文字和组 2 来构建替换字符串。该`${2}`方法使用第 2 组中的文本。字符串的其余部分是文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:26:03.153

如果您打算使用 C# 来查找您的文本，那么我认为这是您需要的正则表达式 - 我已经将它包装在一个逐字字符串中并转义了双引号。

```
Regex regex = new Regex(@"<Assembly: AssemblyVersion\(""\d+\.\d+\.\d+\.\d+""\)>"); 
```

如果要选择元素以将字符串操作为新字符串，请添加一些括号，如下所示：

```
Regex regex = new Regex(@"<Assembly: AssemblyVersion\(""(\d+)\.(\d+)\.(\d+)\.(\d+)""\)>"); 
```

然后，您可以单独访问这些数字以使用正则表达式组创建一个新字符串：

```
Match match = regex.Match(your_search_text);
if (match.Success)
{
    Console.WriteLine(match.Groups[1].Value);
    Console.WriteLine(match.Groups[2].Value);
    Console.WriteLine(match.Groups[3].Value);
    Console.WriteLine(match.Groups[4].Value);
} 
```

# java - Java - XML 序列化：存在一个库来指定自己的注释？

> ID：15413748
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:42:19.007
> 
> 标签：java, xml, serialization, annotations

我想将我的 java 代码转换成 2 个不同的 xml 文件。一个，保存在内部，存储所有对象，状态，......一个，按需存储我的代码的其他部分，但在另一种语法中作为第一个。

我想知道是否存在一个库，我可以在其中定义自己的注释并创建彼此独立的 xml。

我知道一些像 simple 这样的库，它提供了一组固定的注释并抓取所有这些。但这不符合我的需要，因为我只想抓取相对 xml 文件的注释子集。

提前感谢您的帮助！

莎拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:12:30.077

有一些方法可以让您为 Jackson 编写自定义 De/Serializers，[这](http://blog.palominolabs.com/2012/06/05/writing-a-custom-jackson-serializer-and-deserializer/)是一个示例。

您还可以创建自定义注释。[这](https://stackoverflow.com/questions/12921812/create-a-custom-jackson-annotation)是来自 Stackoverflow 的示例。[这](https://stackoverflow.com/questions/12046786/jackson-json-custom-serialization-for-certain-fields)是另一个例子。

# sql - 将两个具有日期范围的表之间的重叠乘以一个因子

> ID：15413750
> 
> 赞同：0
> 
> 时间：2013-03-14T15:42:25.137
> 
> 标签：sql, database, oracle, intervals, oracle9i

我正在使用 Oracle 9i 并且有两个具有重叠间隔的表：

```
CREATE TABLE slowdown (startdate DATE, enddate DATE, factor NUMBER);
CREATE TABLE products (prod VARCHAR2(10 BYTE) NOT NULL, STARTDATE DATE, ENDDATE DATE); -- In my usage this table is actually the result of a query and has many more rows

INSERT INTO slowdown(startdate, enddate, factor) VALUES (TO_DATE('09-SEP-2012 00:00:00', 'DD-MON-YYYY HH24:MI:SS'), TO_DATE('28-SEP-2012 00:00:00', 'DD-MON-YYYY HH24:MI:SS'), .70);
INSERT INTO slowdown(startdate, enddate, factor) VALUES (TO_DATE('23-MAR-2013 07:00:00', 'DD-MON-YYYY HH24:MI:SS'), TO_DATE('28-MAR-2013 19:00:00', 'DD-MON-YYYY HH24:MI:SS'), 0);
INSERT INTO slowdown(startdate, enddate, factor) VALUES (TO_DATE('28-MAR-2013 07:00:00', 'DD-MON-YYYY HH24:MI:SS'), TO_DATE('29-MAR-2013 07:00:00', 'DD-MON-YYYY HH24:MI:SS'), .25);

INSERT INTO products(prod, startdate, enddate) VALUES ('LOT001', TO_DATE('01-FEB-2012 13:30:00', 'DD-MON-YYYY HH24:MI:SS'), TO_DATE('05-FEB-2012 01:00:00', 'DD-MON-YYYY HH24:MI:SS'));
INSERT INTO products(prod, startdate, enddate) VALUES ('LOT001', TO_DATE('26-SEP-2012 00:00:00', 'DD-MON-YYYY HH24:MI:SS'), TO_DATE('30-SEP-2012 00:00:00', 'DD-MON-YYYY HH24:MI:SS'));
INSERT INTO products(prod, startdate, enddate) VALUES ('LOT123', TO_DATE('20-MAR-2013 11:13:45', 'DD-MON-YYYY HH24:MI:SS'), TO_DATE('28-MAR-2013 19:00:00', 'DD-MON-YYYY HH24:MI:SS')); 
```

如您所见，一个区间 in`products`可能与零个或多个 in 重叠，`slowdown`反之亦然。区间可靠地不会在同一个表中重叠。

对于和`xdays`之间的每个重叠，我需要计算为。`products``slowdown``time_reduction``xdays * factor`

```
prod     product_startdate   product_enddate     xdays   fctr   time_reduction
LOT001   01-FEB-2012 13:30   05-FEB-2012 01:00   0       NULL   0     
LOT001   26-SEP-2012 00:00   30-SEP-2012 00:00   2       0.7    1.4
LOT123   20-MAR-2012 11:13   28-MAR-2012 19:00   0.5     0.25   0.125 
```

是否有可以产生此结果的 SQL 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:15:55.437

```
select
   p.prod, 
   p.startdate as product_startdate,
   p.enddate as product_enddate,
   nvl(least(p.enddate, s.enddate) - greatest(p.startdate, s.startdate), 0) as xdays,
   s.factor as fctr,   
   nvl(s.factor, 0) * nvl(least(p.enddate, s.enddate) - greatest(p.startdate, s.startdate), 0) 
      as time_reduction
from 
   products p
   left join slowdown s 
      on least(p.enddate, s.enddate) - greatest(p.startdate, s.startdate) > 0 
```

[小提琴](http://sqlfiddle.com/#!4/f09e7/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:16:48.100

您可以执行以下操作：

```
select prod, startdate, enddate, factor, xdays, 
       xdays * nvl(factor, 1)  time_reduction
  from (select p.*, s.factor, 
               case 
                 when s.startdate is null
                 then
                   0
                 else
                   least(p.enddate, s.enddate) - greatest(s.startdate, p.startdate)
               end xdays
          from products p, slowdown s
         where s.startdate(+) <= p.enddate
           and s.enddate(+) >= p.startdate); 
```

小提琴：[http ://sqlfiddle.com/#!4/6983b/1](http://sqlfiddle.com/#!4/6983b/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:48:16.157

我会为每个计算编写 PL/SQL 函数并将它们调用到我的选择中以获得您想要的结果。在 SQL 中可能有一种方法可以做到这一点，但它会变得有点难看。

# php - 使用 shell 风格的通配符匹配字符串（例如，*）

> ID：15413751
> 
> 赞同：5
> 
> 时间：2013-03-14T15:42:26.070
> 
> 标签：php, string, wildcard

是否可以在 if 语句中使用通配符？

我的代码：

`*`= 通配符

```
if ($admin =='*@some.text.here') {

} 
```

`$admin`将是其中之一：

*   xvilo@some.text.here
*   bot!bot@some.text.here
*   lakjsdflkjasdflkj@some.text.here

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T16:32:40.250

如果您不想使用正则表达式，[`fnmatch()`](http://php.net/fnmatch)可能会很好地满足您的 [有限] 目的。它使用类似 shell 的通配符匹配字符串，就像您期望的那样。

```
if (fnmatch('*@some.text.here', $admin)) {

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:12:31.153

这是一个通配符功能。
当您`*`只想使用时，我已经注释掉了`.`（单字符匹配）。

这将允许您在整个过程中使用通配符：
`*xxx`- 以“xxx”结尾
`xxx*`- 以“xxx”
`xx*zz`开头 - 以“xx”开头并以“zz”结尾
`*xx*`- 中间有“xx”

```
function wildcard_match($pattern, $subject)
{
    $pattern='/^'.preg_quote($pattern).'$/';
    $pattern=str_replace('\*', '.*', $pattern);
    //$pattern=str_replace('\.', '.', $pattern);
    if(!preg_match($pattern, $subject, $regs)) return false;
    return true;
}
if (wildcard_match('*@some.text.here', $admin)) {

} 
```

但我建议自己学习使用[正则表达式](http://regular-expressions.info)。`preg_match()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T15:46:08.063

您可以检查字符串是否以您期望的值结尾：

```
$suffix = '@some.text.here';

if (substr($admin, -strlen($suffix)) == $suffix) {
    // Do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T15:45:08.143

```
if (strstr ($admin,"@some.text.here")) {

} 
```

使用 strstr() 它会做你想做的事或如指出 strstr()

或者你可以使用类似这样的 strpos

```
$pos = strrpos($mystring, "@some.text.here");
if ($pos === false) { // note: three equal signs
    // not found...
} else {
    //found
} 
```

或从头开始（我认为没有测试过）

```
$checkstring = "@some.text.here";
$pos = strrpos($mystring, $checkstring, -(strlen($checkstring)));
if ($pos === false) { // note: three equal signs
    // not found...
} else {
    //found
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:47:02.517

检查一个字符串是否在另一个字符串中找到的最快方法是 strpos()：

```
if (strpos($admin, '@some.test.here') !== false) { } 
```

如果您需要确定 @some.text.here 出现在最后，您需要使用 substr_compare() 代替。

```
if (substr_compare($str, $test, strlen($str)-strlen($test), strlen($test)) === 0) {} 
```

# .net - string.empty 和 isNullOrEmpty 之间的区别？

> ID：15413752
> 
> 赞同：3
> 
> 时间：2013-03-14T15:42:28.127
> 
> 标签：.net, vb.net

我有以下一小段代码，它永远不会返回字符串“selected”。

```
Protected Function SelectedType(ByVal val As String) As String
    If val <> String.Empty Then Return "selected"
End Function 
```

但是，如果我将其更改为此，它会起作用。我上面的速记代码有什么问题吗？-谢谢

```
Protected Function SelectedType(ByVal val As String) As String
    If Not String.IsNullOrEmpty(val) Then
        Return "selected"
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:44:38.573

`String.Empty`是`""`，空是`Nothing`。

您可以比较字符串是否为空，是否为空，或同时与`IsNullOrEmpty ()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:48:53.297

当您调用 时`If Not String.IsNullOrEmpty(val) Then`，您正在检查该值是否等于`String.Empty`或该值是否等于`Nothing`。

这更像是把你的第一个例子写成：

```
Protected Function SelectedType(ByVal val As String) As String
    If val <> Nothing And val <> String.Empty Then 
        Return "selected"
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:44:01.440

IsNullOrEmpty 提供针对空值的额外安全性，否则您的代码将失败

# c# - 在单元测试中为 ApiController 设置用户属性

> ID：15413754
> 
> 赞同：26
> 
> 时间：2013-03-14T15:42:31.250
> 
> 标签：c#, asp.net-web-api, iprincipal

我对 ApiController 的单元测试使用一些辅助方法来实例化控制器：

```
public static ResourcesController SetupResourcesController(HttpRequestMessage request, IResourceMetadataRepository repo, IUnitOfWorkService unitOfWorkService)
{
    var config = new HttpConfiguration();
    var defaultRoute = config.Routes.MapHttpRoute(RouteNames.DefaultApi , "api/{controller}/{id}");
    var routeData = new HttpRouteData(defaultRoute, new HttpRouteValueDictionary { { "controller", "resources" } });

    var resourcesController = new ResourcesController(repo, unitOfWorkService)
    {
        ControllerContext = new HttpControllerContext(config, routeData, request),
        Request = request
    };
    resourcesController.Request.Properties.Add(HttpPropertyKeys.HttpRouteDataKey, routeData);
    resourcesController.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;

    // Compilation fail: The Property 'System.Web.Http.ApiController.User' has no setter.
    resourcesController.User = myStubUserPrincipal;

    return resourcesController;
} 
```

我的问题是：如何设置控制器的用户属性？

我试过了：

```
request.Properties.Add("MS_UserPrincipal", myStubUserPrincipal); 
```

但这也不起作用（resourcesController.User 属性保持为空）。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-15T15:25:46.897

Set the `Thread.CurrentPrincipal`, and that will initialize the `User` property in the controller automatically.

For people that see this answer, but have no idea how to set `CurrentPrincipal`.: [This code](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx) is extracted from MSDN.

```
Thread.CurrentPrincipal = new GenericPrincipal
(
   new GenericIdentity("Bob", "Passport"),
   new[] {"managers", "executives"}
); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-08-01T14:00:19.340

一种更清洁的方法是模拟`IPrincipal`，`HttpRequestContext`例如使用起订量：

```
var userMock = new Mock<IPrincipal>();
userMock.Setup(p => p.IsInRole("admin")).Returns(true);
userMock.SetupGet(p => p.Identity.Name).Returns("tester");
userMock.SetupGet(p => p.Identity.IsAuthenticated).Returns(true);

var requestContext = new Mock<HttpRequestContext>();
requestContext.Setup(x => x.Principal).Returns(userMock.Object);

var controller = new ControllerToTest()
{
    RequestContext = requestContext.Object,
    Request = new HttpRequestMessage(),
    Configuration = new HttpConfiguration()
}; 
```

# html - 在 HTML5 部分旁边浮动

> ID：15413758
> 
> 赞同：1
> 
> 时间：2013-03-14T15:42:44.213
> 
> 标签：html, css-float

我试图让一个 Aside 标记漂浮在带有 CSS 的 Section 标记旁边，但到目前为止运气不佳。

下面是HTML

```
<div id="WholePage">
<section> 
    <asp:ContentPlaceHolder ID="MainContentWindow" runat="server">                 </asp:ContentPlaceHolder>
</section>

<aside>
    <div id="SideAdRotator">
    <asp:AdRotator ID="AsideAdRotator" runat="server" AdvertisementFile="Adverts.xml"         Height="300px" Width="150px"/>
    </div>
</aside> 
```

下面是到目前为止的CSS

```
section
{
    display : block;
    width : 48em;
    height : 40em;
    border-width : 0.1em;
    border-style : dashed;
    border-color : black;
}

aside
{
    display : block;
    width : 12em;
    height : 40em;
    border-width : 0.1em;
    border-style : dashed;
    border-color : black;
} 
```

任何有关如何获得此功能的建议或建议将不胜感激。我第一次遇到浮动部分的问题，现在真的很难过。

非常感谢所有的回复，它们都很有用并解决了我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:54:53.603

我应该更改标签的顺序并给它们`display: inline-block;`

关于浮动的其他答案我不应该使用。大多数设计师误解浮动。

[什么时候使用浮动？](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

# html

```
<div id="WholePage">
    <aside></aside>
    <section></section>
</div> 
```

# CSS

```
section
{
    display : inline-block;
    width : 48em;
    height : 40em;
    border-width : 0.1em;
    border-style : dashed;
    border-color : black;
}

aside
{
    display : inline-block;
    width : 12em;
    height : 40em;
    border-width : 0.1em;
    border-style : dashed;
    border-color : black;
} 
```

[例子@jsfiddle](http://jsfiddle.net/DL4Gk/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:45:10.817

添加`float:left`到两个元素。

不要忘记[清除你的花车](http://robertnyman.com/2007/04/12/how-to-clear-css-floats-without-extra-markup-different-techniques-explained/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:46:56.947

你只需要添加`float: left;`到你的`<aside>`部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:45:29.187

添加`float: left`到您的`aside`和`section`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T20:12:44.713

有必要包装元素...

**CSS**

```
#WholePage {
  width: 100%;
  border: 1px dotted red;
  padding: 10px;
}
section {
  display: inline-block;
  width: 70%;
  height: 300px;
  border: 1px dashed green;
}
aside {
  display: inline-block;
  width: 25%;
  height: 400px;
  border: 1px dashed blue;
} 
```

[例子@小提琴](https://jsfiddle.net/Waschak/Leuh5von/)

# php - Wordpress 媒体缩略图设置 - 将更改应用到自定义图像

> ID：15413759
> 
> 赞同：1
> 
> 时间：2013-03-14T15:42:45.400
> 
> 标签：php, wordpress

我使用以下方法注册了新的图像大小：

```
add_action("init", "addcustomthumbsize");
function addcustomthumbsize() {
    if (function_exists('add_image_size')) {
        add_image_size('custom-thumb', 150, 150, true); 
    }
}

add_filter('image_size_names_choose', 'custom_thumbnail');
function custom_thumbnail($sizes) {
    $addsizes = array(
        "custom-thumb" => __("Custom thumbnail")
    );
    $newsizes = array_merge($sizes, $addsizes);
    return $newsizes;
} 
```

我希望用户能够通过媒体库裁剪图像并将更改仅应用于此自定义缩略图。

问题是我无法弄清楚如何将自定义缩略图添加到媒体库 -> 编辑图像 -> 缩略图设置中的列表中。目前唯一可用的选项是：

*   所有图像尺寸
*   缩略图
*   除缩略图外的所有尺寸

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T03:16:19.207

目前，此功能未内置在 WordPress 中。如果您现在对此感兴趣或需要此功能（尽管由于核心文件的不稳定和修改不推荐），在 Make Wordpress Core 中有此未来功能/修复的开发：

*   [车票 19889](http://core.trac.wordpress.org/ticket/19889)
*   [票22100](http://core.trac.wordpress.org/ticket/22100)

评论中还描述了为什么此功能当前不可用的问题。Wordpress 3.7 可能包含此修复程序。

# content-management-system - 在 umbraco 4.11 的内容部分创建文件夹结构

> ID：15413760
> 
> 赞同：0
> 
> 时间：2013-03-14T15:42:47.243
> 
> 标签：content-management-system, umbraco

我不知道在哪里写这个问题的正确位置，但在这里问..

目前我的内容部分如下：

内容->索引

内容->我们的产品->我们的产品1、我们的产品2

内容 -> 顶级产品->我们的顶级产品1，我们的顶级产品2

所以一切都从内容根目录开始

我希望将其更改为以下结构：

内容->药房->我们的产品......

内容->药房-> 我们的顶级产品

我希望所有 URL 的结构如下：

[http://domain.com/Pharmacy/Products1](http://domain.com/Pharmacy/Products1)

但我不知道该怎么做？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:28:05.673

为了实现你想要的 url 结构，你的节点结构需要是这样的：

*   内容
    *   家
        *   药店
            *   我们的产品
                *   我们的产品 1
                *   我们的产品 2
            *   我们的顶级产品
                *   我们的顶级产品 1
                *   我们的顶级产品 2

一切都应该在 Home 下，这被认为是网站的根目录。

# c# - 可以在 C# 中将系统类或方法标记为过时吗？

> ID：15413761
> 
> 赞同：4
> 
> 时间：2013-03-14T15:42:47.323
> 
> 标签：c#, asp.net, visual-studio

是否可以将[Obsolete 属性](http://msdn.microsoft.com/en-us/library/aa664623%28v=vs.71%29.aspx)应用于系统类或方法？如果是这样，怎么做？如果不是，我可以指示 Visual Studio 对某些代码模式发出警告吗？

具体来说，我想将 Session/Session["key"] 的使用标记为已过时，以支持可能的单例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:45:14.247

无法将其他程序集中定义的类型标记为已过时。`ObsoleteAttribute`只能应用于您正在编译的源代码中的类型 。

我知道没有现有的 Visual Studio 工具提供此功能。但是，如果您有兴趣说服它，最好的选择可能是编写针对此类型的 FxCop 规则。

# git - 当两个开发人员处理同一个文件并提交、更新等时会发生什么

> ID：15413762
> 
> 赞同：0
> 
> 时间：2013-03-14T15:42:47.890
> 
> 标签：git, github

我们想开始一个开源项目并和我的朋友一起使用 Git。我们知道 Git，但我们只在之前/单独工作之前使用它来进行分叉。

假设我们已经创建了一个存储库。

**情况一：**

```
Both of us downloaded repository to our local computers to started working.
I've created A.php, with a function named A() in it. Committed.
My friend created B.php, with a function named B() in it. Committed. 
```

Q1：我们的本地存储库没有更新，但 github 存储库已更新。我们如何在不再次下载整个 repo 的情况下同步它？

Q2：开发人员多久更新一次本地存储库？我可能会在 20:00 更新它，但在 20:05 可能会有不同的提交。是否有更新本地存储库的实时解决方案？就像在这种情况下的保管箱一样，您进行更改并自动同步它。

**情况2**

```
Me and my friend both started working on A.php. The file currently has function A(). 
I made a function called function B(), committed.
My friend also created a function called B() too. Committed. 
```

Q3：会发生什么？第一个提交者是否正常提交，而第二个提交者收到类似“文件已更改，请再次同步文件并稍后提交”之类的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:51:09.143

Q1：您使用 Fetch 或 Pull 从原始存储库获取最新更改。

Q2：每次他们都必须这样做，要么是因为他们想查看原始 repo 中发生了什么，要么是因为 git 强迫他们这样做。事实上，如果你尝试推送到远程源仓库并且你的本地副本在它后面，git 会强制你首先更新你的本地副本，合并你的更改，然后再次推送。

Q3：是的，第二次推送会被拒绝。开发人员将不得不获取、合并或变基，从而解决潜在的冲突，然后推送。

我推荐阅读[Pro Git](http://git-scm.com/book)，它既优秀又免费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:51:50.750

A1。你为什么需要这个？您可以`git pull`将存储库的更改拉到本地。没有其他方法可以接收数据，只能获取整个更改

A2。真的，您可以根据需要进行操作。如果您不需要其他功能，则可能暂时不会更新。如果你需要它 - 拉它。

我总是在每个实现的功能后检查，因为许多开发人员都在处理类似的文件。我所做的更改更少，更容易解决冲突。

A3。Git 不合并函数，它合并源文件。如果一个在文件开头添加 A()，另一个在末尾，则所有内容都会成功合并，并且会有两个 A()。

您应该合并或变基以推送到远程，而不是 HEAD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:56:02.150

为了回应您对能够回答您的问题的指南的要求，我有一些建议。我是 git 新手，但我一直在 esper.net 上的#git IRC 中闲逛并吸收信息。以下是我认为最有帮助的教程/指南。

*   [Ry 的 Git 教程](http://rypress.com/tutorials/git/index.html)目前为止我最喜欢的。非常清晰和简单的教程，指导您轻松完成 git 的各个方面。
*   [Intro to Git](http://www.webdesignerdepot.com/2009/03/intro-to-git-for-web-designers/)不是最流畅的教程，但它有一个很棒的“备忘单”，底部有许多有用的链接。
*   try.github.com 这是 github 的入门教程。由于您已经在本地使用它，因此此链接将更好地帮助初学者。
*   gitolite.com/master-toc.html 一个人关于使用 git 的广泛而密集的笔记。

希望这些链接有所帮助！我相信您的所有问题以及更多问题都可以通过这些教程得到解答。

# python - 在不使用 itertools 的情况下查找嵌套列表的总和

> ID：15413763
> 
> 赞同：1
> 
> 时间：2013-03-14T15:42:51.160
> 
> 标签：python, list

```
a = [[1,2,3],[4,1],[2,2,6],[3]] 
```

a 的总和将打印 24

我知道一个单一的列表，比如`[1,2,3]`我可以做`sum(a)`的，但我正在为一个嵌套列表而苦苦挣扎。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:47:42.720

这不会创建新的临时列表：

```
sum(sum(b) for b in a) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:43:58.737

```
sum(sum(a, [])) 
```

内部总和将所有单独的列表组合成一个列表。然后外部总和找到实际总和。

对于嵌套超过一层的列表，您可以使用以下命令：

```
def recursiveSum(data):
    try:
        total = 0
        for item in data:
            total += recursiveSum(item)
        return total
    except TypeError: #data isn't iterable, it's probably a number
        return data

print recursiveSum([[[[1,2,3],[4,1]],[2,2,6]],3]) 
```

输出：

```
24 
```

# c - 在这种情况下正确使用“易失性”（C）？

> ID：15413766
> 
> 赞同：3
> 
> 时间：2013-03-14T15:42:55.043
> 
> 标签：c, atomic, volatile

我有一个包含多个指针的结构。这些指针可以被几个不同的线程改变。这些线程通过更改指针来更新结构，使其指向另一个内存位置，它们从不更改指向的值。根据我对 volatile 的理解，将结构中的这些指针声明为 volatile 是有意义的。

读取/更新这些指针的线程是这样工作的：

*   复制指针，只使用我们的副本，这样如果原始更改我们不会在过程中途突然使用新的。
*   根据我们的副本指向的值创建一个新指针。
*   使用原子比较+交换将旧指针替换为新指针，除非另一个线程已经更新了它。

我遇到的问题是，当我复制指针时，会收到警告：

> 警告：初始化从指针目标类型中丢弃 'volatile' 限定符

编译后的代码似乎工作正常，但警告让我很困扰。我是否错误地使用了 volatile？假设我使用 volatile 没问题，我该如何删除警告？我不想在复制指针的声明上加上 volatile，没有其他线程会更新我们的副本，所以它真的不是 volatile。它在读/写结构时唯一的易失性。

这是一些演示代码，只是演示了我的问题，我正在使用的实际代码要好得多，但也太大而无法发布。有一个明显的内存泄漏，暂时忽略它，我的真实用例正确地跟踪和管理内存。我只关心这个问题的“易失性”，我不是在我的演示中寻找要解决的错误。

```
gcc -std=gnu99 -pthread test.c && ./a.out
test.c: In function ‘the_thread’:
test.c:22:25: warning: initialization discards ‘volatile’ qualifier from pointer target type [enabled by default] 
```

编码：

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

typedef struct {
    volatile int *i;
} thing;

void init( thing *t ) {
    t->i = malloc( sizeof( int ));
    *(t->i) = 1;
}

void *the_thread( void *args ) {
    thing *t = args;

    for ( int i = 0; i < 100; i++ ) {
        // This generates the 'volatile' warning. But I don't want to make
        // *copy volatile since no other threads will ever change 'copy'.
        // Is this incorrect usage, or do I just need to do something to remove
        // the warning?
        int *copy = t->i;

        int *new = malloc( sizeof( int ));
        *new = (*copy) + 1;

        // Glaring memory leak as old x becomes unreachable, this is a demo,
        // the real program this is for has the issue solved.
        // We do not care if it succeeds or fails to swap for this demo.
        __sync_bool_compare_and_swap( &(t->i), copy, new );
    }
}

int main() {
    thing t;
    init( &t );

    pthread_t a;
    pthread_t b;

    pthread_create( &a, NULL, the_thread, &t );
    pthread_create( &b, NULL, the_thread, &t );

    pthread_join( a, NULL );
    pthread_join( b, NULL );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:51:50.237

这是因为`volatile int *`它的意思不是“指向 int 的 volatile 指针”，而是“指向 volatile int 的指针”。比较`const char *a = "foo";`，这是指向常量字符数据的指针，而不是常量指针。

因此，在您的情况下，我认为`thing`应该是指针`volatile`，因为其中的字段可以“随机”更改（从一个线程的角度来看）。您可以（正如您在评论中所说）也可以移动`volatile`以使其`int * volatile i;`在结构中。

您也可以（当然）始终使用[cdecl](http://cdecl.org/)来获得即时帮助来解决这些问题。

# jquery - 分组遍历 json

> ID：15413774
> 
> 赞同：0
> 
> 时间：2013-03-14T15:43:12.893
> 
> 标签：jquery, django-views

我的应用程序中的 ajax 请求返回了这个 json，

```
{"info": {"pat_gender": "f", 
          "obtained_pmh": true, 
          "organized": false, 
          "hpi_selected_alleviating": true, 
          "greeted_patients": true, 
          "echoed_patients_words": false,
          "allowed_pt_to_finish_thoughts": true,
          "grade": "Excellent"
        } } 
```

我想遍历项目，但分组排序真假字段，即

```
{"info": {
          "pat_gender": "f", 

           //from here GROUP1
          "obtained_pmh": true, 
          "organized": false, 
          "hpi_selected_alleviating": true, 

           //GROUP2
          "greeted_patients": true, 
          "echoed_patients_words": false,
          "allowed_pt_to_finish_thoughts": true,

          "grade": "Excellent"
        } } 
```

我想让第 1 组中的字段在两个列表（True 和 false）中排序，并且 group2 也以相同的方式排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:51:38.350

您可以迭代您的属性并将具有`true`值的键推送到名为“group1”的属性，并将具有值的键推`false`送到名为 group2 的属性：

```
obj.group1 = [];
obj.group2 = [];
for p in obj {
    if (obj.hasOwnProperty(p)) {
        if (obj[p] === true) {
            obj.group1.push[p];
        } else if (obj[p] === false) {
            obj.group2.push[p];
        }
    }
} 
```

然后，您可以`obj.group1`通过遍历数组来检索所有键。

# javascript - 使用 javascript 在 Chrome 中制作自定义书签链接

> ID：15413776
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:43:26.630
> 
> 标签：javascript, google-chrome, bookmarklet, bookmarks

在深入构建 Chrome 浏览器扩展之前，我想制作一个书签列表，当单击这些书签时，使用 javascript 执行特定操作。我不是 100% 确定，但我认为这些可能是指小书签？

从简单的开始，我需要做的一个例子是：

*   我目前正在查看 www.somedomain.com
*   我想单击一个书签并转到 www.somedomain.com/?testinfo=visible

意思是，无论我在哪个站点，它都会将 /?testinfo=visible 添加到 url 并加载它。它需要检查它是否已经以/结尾，所以至少它不会以//结尾。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:50:30.923

不确定我是否理解您的要求，但如果您正在寻找一种方法来检查 JavaScript 中的字符串以什么结尾，您可以创建一个字符串原型，如此[SO 答案](https://stackoverflow.com/a/2548133/678801)中所建议的：

```
if (typeof String.prototype.endsWith !== 'function') {
    String.prototype.endsWith = function(suffix) {
        return this.indexOf(suffix, this.length - suffix.length) !== -1;
    };
} 
```

在保存你的 URL 的变量上，你可以这样做来查看它是否已经有一个斜杠：

```
if (myUrlVariable.endsWith('/')) {
   // Already ends with a slash, act accordingly
} else {
   // Does NOT end with a slash, act accordingly
} 
```

# sonarqube - 如何在将模块的 baseDir 设置为根项目目录的情况下运行 sonar-runner

> ID：15413779
> 
> 赞同：0
> 
> 时间：2013-03-14T15:43:32.157
> 
> 标签：sonarqube, sonar-runner

我有以下项目结构：

*   模块1
*   模块2

    *   模块2.1
    *   模块2.2
    *   模块2.3

并将 sonar-project.properties 定义为：

```
sonar.projectKey=example
sonar.projectName=project
sonar.projectVersion=1.0
sonar.language=xml
sonar.sources=.
sonar.sourceEncoding=UTF-8
sonar.forceAnalysis=true
sonar.projectBaseDir=.

sonar.modules=module2, module1, xml

xml.sonar.projectBaseDir=/

module1.sonar.language=js
module1.sonar.exclusions=lib/**

module2.sonar.language=java
module2.sonar.modules=module2.1,module2.2,module2.3

module2.1.sonar.sources=/src/main/java/
module2.1.sonar.binaries=/target/classes

module2.2.sonar.sources=/src/main/java/
module2.2.sonar.binaries=/target/classes

module2.3.sonar.sources=/src/main/java/
module2.3.sonar.binaries=/target/classes 
```

我想使用 js 配置文件分析 module1，使用 java 配置文件分析 module2.1、2.2、2.3，以及所有可能在项目中的 xml 文件。当前的解决方案给了我`Java heap space`，因为`xml.sonar.projectBaseDir`设置为`/`（也尝试使用`.`and `../root`，因为所有这些结果都是相同的）。

请有人帮助我并告诉我如何使用 xml 配置文件分析所有项目目录。

提前致谢！

ps 创建另外两个模块来分析 module1 和 module2 文件夹不适合我，因为我在根文件夹中也有 .xml 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:17:13.860

随着即将推出的 Sonar Runner 2.1 版，这个问题将得到解决：[https ://jira.sonarsource.com/browse/SONARUNNER-43](https://jira.sonarsource.com/browse/SONARUNNER-43)

# java - 在结果中显示 0 表示没有行

> ID：15413781
> 
> 赞同：-2
> 
> 时间：2013-03-14T15:43:38.990
> 
> 标签：java, sql, jdbc, plsql

我需要编写一个与数据库建立连接的java程序，该程序应提示用户输入7位数字ID，然后计算每个字母等级的出现次数和总等级数。

例如：学生 12345 A'S：1 B'S：0 C'S：3 D'S：0 F'S：O 总成绩：4

我下面的代码工作正常，但问题是 no row 的结果不会给我 0 .. ex：它只给我 A、C 并删除其他

所以你知道如何在结果中显示 0。

感谢你

```
import java.sql.*; // Use classes in java.sql package
import java.util.*;

public class DDBB {

    public static void main (String args []) {
        int a;
        Scanner in = new Scanner(System.in);
        System.out.println("Enter a 7 digit Number for StudentID");
        a = in.nextInt();
        System.out.println("StudentID" +" "+ a);
        int countgrade ;
        String GRADE1;
        int totalcount;
        Connection conn =null;
        Statement st =null;
        try {
            DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
            // Class.forName("oracle.jdbc.driver.OracleDriver");
            String url ="jdbc:oracle:thin ....";
            conn = DriverManager.getConnection(url,"user", "password");
            // create a Statement object
            PreparedStatement st1 = conn.prepareStatement(
                "SELECT GRADE, Count(*) AS COUNT1 FROM GRADING WHERE StudentID = ? GROUP BY Grade ORDER BY GRADE");
            st1.setInt(1, a);
            ResultSet S = st1.executeQuery();
            while (S.next()) {
                countgrade = S.getInt("COUNT1");
                GRADE1 = S.getString("GRADE");
                System.out.println(GRADE1 + "'s :"+countgrade+"\n");
            }
            String Q2 ="SELECT COUNT(GRADE) AS COUNT2 FROM GRADING WHERE StudentID = ? ";
            ResultSet S1 = st1.executeQuery(Q2);
            while (S1.next()) {
                totalcount = S1.getInt("COUNT2");
                System.out.println("Total grades:"+ " " + totalcount+"\n");
            }
            S.close();
        }
        catch (SQLException e) {
            e.printStackTrace();
        }
        finally {
            try {
                // close the Statement object using the close() method
                if (st != null) {
                    st.close();
                }
                // close the Connection object using the close() method
                if (conn != null) {
                    conn.close();
                }
            }
            catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:59:04.043

似乎您应该使用`for`循环而不是 a`while`来打印成绩（或者可能只是不使用循环）。

为什么不做这样的伪代码：

```
int A = B = C = D = F = 0;
/* Get results as you already are, stored in result set s */
while( s.next() )
{
    string grade = s.GetString("GRADE");
    if( grade == "A" )
        A = s.GetInt("COUNT1")
    if( grade == "B" )
        B = s.GetInt("Count1")
    /*etc*/
} 
```

在 while 循环结束时，只需输出 "A's:" + A + " B's:" ...

当您显示最终成绩时，只需显示 A + B + C + D + F。

这将其缩减为一个 SQL 查询，并且始终显示每个字母的等级。

# java - Java 堆的标准分配比例

> ID：15413783
> 
> 赞同：4
> 
> 时间：2013-03-14T15:43:47.020
> 
> 标签：java, garbage-collection, size, heap-memory

我试图寻找这个问题的答案，但从未设法找到任何答案。

当我定义最大堆大小时，为 Java GC 空间分配大小的标准比例是多少？

那就是：如果我用 4Gb 堆启动我的 JVM，那么分配给 Eden 的空间有多少？幸存者多少钱？多少才能终身任职？

此外，对于不同的 VM 供应商，该比率是否会发生变化？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:53:17.817

这是特定于 JVM 的。在 Oracle 的 JVM 上，您可以使用以下命令找出堆大小`-XX:+PrintCommandLineFlags -XX:+PrintGCDetails`：

```
$ java -XX:+PrintCommandLineFlags -XX:+PrintGCDetails -version
-XX:InitialHeapSize=78820288 -XX:MaxHeapSize=1261124608 -XX:+PrintCommandLineFlags -XX:+PrintGCDetails -XX:+UseCompressedOops -XX:+UseParallelGC 
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode)
Heap
 PSYoungGen      total 22464K, used 770K [0x000000013e820000, 0x0000000140130000, 0x0000000157970000)
  eden space 19264K, 4% used [0x000000013e820000,0x000000013e8e0b08,0x000000013faf0000)
  from space 3200K, 0% used [0x000000013fe10000,0x000000013fe10000,0x0000000140130000)
  to   space 3200K, 0% used [0x000000013faf0000,0x000000013faf0000,0x000000013fe10000)
 ParOldGen       total 51328K, used 0K [0x000000010c570000, 0x000000010f790000, 0x000000013e820000)
  object space 51328K, 0% used [0x000000010c570000,0x000000010c570000,0x000000010f790000)
 PSPermGen       total 21248K, used 2165K [0x0000000107370000, 0x0000000108830000, 0x000000010c570000)
  object space 21248K, 10% used [0x0000000107370000,0x000000010758d6a8,0x0000000108830000) 
```

由此，您可以轻松计算出比率。

# r - 如何在R中的球体上绘制点

> ID：15413785
> 
> 赞同：2
> 
> 时间：2013-03-14T15:43:49.223
> 
> 标签：r, map, plot

我正在做一个项目，我需要在球体上绘制一些点。我所拥有的是每个点的经度和纬度，以及每个点的值。例如，

```
longitude latitude value
123       23       1.3
75        -34      2.8
190       48       2.1
... 
```

我想要一个像下面这样的情节。我还希望点的大小与数据集中的值成比例。所以 2.8 会有一个更大的点，1.3 会有一个更小的点，等等。世界地图是可选的。

我想知道 R 中是否有任何包可以完成这项工作？非常感谢任何建议或代码！

![在此处输入图像描述](../Images/36e387a126666132393bcf1106793ed4.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T16:08:27.473

一个使用`base`plot 和 packages的简单示例`sp`，`rgdal`并且`maptools`：

```
library(sp)
library(maptools)
library(rgdal)
xy <- data.frame(lon=c(-130,110,3,45),lat=c(60,-10,50,30)) #Some coordinates
value <- data.frame(value=c(1.5,0.8,2.3,2)) #Some values for the point size
df <- SpatialPointsDataFrame(xy,value,proj4string=CRS("+proj=lonlat"))
dfMoll <- spTransform(df, CRS("+proj=moll")) #Mollweide projection of the data
data(wrld_simpl) # A base world map
wrld_moll <- spTransform(wrld_simpl, CRS("+proj=moll")) # ... that we projects as well
plot(wrld_moll) #... and plot
points(dfMoll, cex=dfMoll$value, pch=20, col="red") #...with our data points 
```

![在此处输入图像描述](../Images/b94e70984025e75a1b6cfbacd15af893.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T15:59:27.793

也许一种方法可以做到这一点`ggplot2`：

```
ggplot() +
  geom_polygon(data=world,aes(x=long, y=lat, group=group), fill=NA,colour="black") +
  geom_point(data=d, aes(x=longitude, y=latitude, size=value), color="red") +
  coord_map("mollweide") 
```

这给出了以下地图，不幸的是有一些小故障：

![在此处输入图像描述](../Images/70064006a3553ee74a110701f4fd9240.png)

顺便说一句，您可以`coord_map`在不绘制地图的情况下使用：

```
ggplot() +
  geom_point(data=d, aes(x=longitude, y=latitude, size=value), color="red") +
  coord_map("mollweide") 
```

![在此处输入图像描述](../Images/0e2199c8ad743ecb6103cceaa8af8de4.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T16:16:46.640

查看 mapproj 包。它会为你做各种地图投影。它不进行绘图，而是为您投影点，然后将其传递给您选择的功能。

# ruby-on-rails - JRuby 有多个版本的 Ruby 吗？

> ID：15413787
> 
> 赞同：2
> 
> 时间：2013-03-14T15:43:58.330
> 
> 标签：ruby-on-rails, jruby

我将使用 JRuby - 所以正在阅读它。[http://jruby.org/](http://jruby.org/)主页似乎支持多个版本的 Ruby（1.8.7 和 1.92）。如何区分 Rail2/Ruby1.8.7 和 Rails3/Ruby1.9.2 设置？我将在 Windows 环境中使用 PIK 用于多个 Ruby 版本，只是不确定 JRuby 如何适合！

EDT：不——我不是在问如何使 JRuby 1.6 默认为 Ruby 1.9。我必须在两个环境中工作，并且需要区分 Rail2/Ruby1.8.7 和 Rails3/Ruby1.9.2。看来（来自 jruby 站点）“两个版本都在单一安装中”。我只是不明白它是如何工作的！？这周我将尝试解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:20:23.683

我认为您正在寻找两个选项`--1.9`和`--1.8`（以及即将到来的`--2.0`）

```
$ jruby --1.9 -e 'h = {new: "features"} ; p h; puts RUBY_VERSION'
{:new=>"features"}
1.9.3

$ jruby --1.8 -e '"and\nold\nones".each{|l| puts l}; puts RUBY_VERSION'    
and
old
ones
1.8.7 
```

顺便提一句。我认为他们计划在下一个 JRuby 主要版本中放弃对 1.8 的支持。

# asp.net - 函数可以返回多于 1 行的数据吗？

> ID：15413791
> 
> 赞同：0
> 
> 时间：2013-03-14T15:44:01.387
> 
> 标签：asp.net, .net, vb.net, .net-1.1, asp.net-1.1

在我的代码中，我有一个函数，它从数据库中返回单行数据。它使用 a 返回数据，`Structure`因此我可以返回多个数据。

例如：

```
Public Structure structure_name
    Public column1 as integer
    Public column2 as string
    Public column3 as string
End Structure

Function function_name() As structure_name
    Dim single_row_structure as structure_name

    'get single row from database
    'assign single row values to attributes of Structure

    single_row_strucure.column1 = dbcol1
    single_row_strucure.column2 = dbcol2
    single_row_strucure.column3 = dbcol3

    return single_row_strucure
End Function 
```

这适用于单行。我的问题是，我如何获得一个返回多于 1 行数据的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:52:31.330

```
Function function_name() As structure_name()

    Dim rows(2) as structure_name
    rows(0).column1 = dbcol1
    rows(0).column2 = dbcol2
    rows(0).column3 = dbcol3
    rows(1).column1 = dbcol1
    rows(1).column2 = dbcol2
    rows(1).column3 = dbcol3

    return rows
End Function 
```

[http://www.vb-helper.com/howto_net_declare_arrays.html](http://www.vb-helper.com/howto_net_declare_arrays.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:46:13.813

是的，您可以返回某种集合。您的语法选项可能会受到一些限制，因为您的标签建议您使用的是 .NET 的第一个版本。（1.1 -- 这是真的吗？）

使用最新版本的 .NET 和 C#，我会返回`List<structure_name>`. 但是还有很多其他的选择。

就从数据库中获取数据而言，数据库非常擅长返回多行。但是您需要提供有关哪个数据库以及如何获取数据的更多详细信息，以便就如何将其传输到 C# 集合提出建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:08:11.840

抱歉，自从 VB 以来已经有一段时间了，所以 C#

为什么不使用像 List 这样的集合

```
List<structure_name> structure_names = new List<structure_name>();

structure_names.Add(single_row_strucure);  // repeat 
```

# java - mac设置环境变量

> ID：15413796
> 
> 赞同：0
> 
> 时间：2013-03-14T15:44:08.367
> 
> 标签：java, eclipse, tomcat, environment-variables, axis2

**大家好，**

**我正在尝试使用 ant 构建我的 WS 项目，但收到以下错误：**

> ```
> Admin-2:Project Test$ ant
> Buildfile: /Users/Test/Project/build.xml
> 
> init:
> 
> pre.compile.test:
> 
> BUILD FAILED
> /Users/Test/Project/${env.AXIS2_HOME} does not exist.
> 
> Total time: 0 seconds 
> ```

**我尝试了什么：**我尝试了以下命令，然后重新启动了我的机器，但我仍然收到同样的错误。

> `export AXIS2_HOME=/users/Test/Desktop/axis2`

**谢谢您的帮助！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:54:36.070

我认为重新启动会清除您通过导出手动输入的任何环境设置。您可以尝试该行，然后立即使用该环境设置再次尝试构建。您可以使用

```
echo $AXIS2_HOME 
```

验证变量是否占用。我也相信路径是区分大小写的，所以 /Users 与 /users 不同。如果在该变量到位后它就可以工作，您可能希望将其添加到您的 bash 配置文件中，以便在您每次使用该特定用户登录时加载它。

# build - 谷歌 V8 构建错误 LNK1104：无法打开文件 'ws2_32.lib'

> ID：15413797
> 
> 赞同：2
> 
> 时间：2013-03-14T15:44:11.303
> 
> 标签：build, visual-studio-2012, linker, v8

我正在尝试在 64 位系统上使用 MS Visual Studio 2012 构建谷歌的 V8 JavaScript 引擎，但它总是输出错误

```
 LINK : fatal error LNK1104: cannot open file 'ws2_32.lib' 
```

我已经根据[https://code.google.com/p/v8/wiki/BuildingWithGYP](https://code.google.com/p/v8/wiki/BuildingWithGYP)完成了所有工作。我使用python方式而不是cygwin来生成项目文件。

我如何设置它找到的链接器`ws2_32.lib`？

**//编辑**出于某种原因，GYP 为 vs2010 而不是 vs2012 制作了项目文件，所以我不得不更新它们。现在它起作用了。（奇怪，我以前试过这个，但没有用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T18:22:08.383

在我设法在 Windows 7 64 位（我为 32 位）上构建和链接 V8 之前，我遇到了几个问题，包括你的问题。

1.  确保您已将“third_party”文件夹添加到 V8 结帐，并在其中添加了文档中来自 google uri 的 cygwin 和 python_26。（“third_party”的 greping V8 文件表示精确的文件结构）。

2.  现在运行 gyp 工具。（与 third_party 丢失时的反馈完全相同，只是需要更长的时间并且实际上可以正常工作，而不是生成垃圾解决方案文件）。

3.  加载 all.sln，它应该都构建调试和发布。我正在使用 vs2012 并且 DIDNT 从 vs2010 升级项目可能很重要。

最后，当涉及到链接 v8_base.ia32.lib 和 v8_snapshot.lib（或 64 位版本）时 - 由于 V8 库中未解决的外部问题，我需要链接“Ws2_32.lib”和“winmm.lib”。

出于某种原因，V8 需要访问 win32 套接字 API 和多媒体计时器。有一个没有隐藏平台 api 包装器的精简选项会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:53:17.010

GYP 创建了 VS2010 项目文件，所以我不得不将它们更新到 VS2012。

# c# - 在 C# 应用程序中只能使用来自 C++ DLL 的 1/4 函数

> ID：15413800
> 
> 赞同：1
> 
> 时间：2013-03-14T15:44:21.987
> 
> 标签：c#, c++, dll, pinvoke, dllimport

将 C++ DLL 转换为在 C# 中使用时遇到了一些麻烦。

它正在工作.. DLL 中的第一个 C++ 函数只是：`int subtractInts(int x, int y)`并且它的典型主体工作没有问题。所有其他功能都一样简单，并且已经过测试。但是，我一直在关注教程并做一些时髦的事情，以将 C# 中的代码用作 C++ DLL（为了可移植性）。

我的步骤是：

• 创建一个 C++ 类，对其进行测试并保存 - 仅使用“class.cpp”和“class.h”文件 • 在 Visual Studio 2010 中创建一个 Win32 库项目，在启动时选择 DLL，并为我想要的每个函数暴露给 C#.. 下面的代码

```
extern "C" __declspec(dllexport) int addInts(int x, int y)
extern "C" __declspec(dllexport) int multiplyInts(int x, int y)
extern "C" __declspec(dllexport) int subtractInts(int x, int y)
extern "C" __declspec(dllexport) string returnTestString() 
```

非常关键的一点，这是我在我的 DLL 中将它们外部化的顺序。

然后作为测试，因为我之前确实遇到过这个问题。我在我的 C# 项目中以不同的方式引用了它们

```
 [DllImport("C:\\cppdll\\test1\\testDLL1_medium.dll", CallingConvention = CallingConvention.Cdecl)]

    public static extern int subtractInts(int x, int y);
    public static extern int multiplyints(int x, int y);
    public static extern int addints(int x, int y);
    public static extern string returnteststring(); 
```

从 C# 调用时唯一起作用的函数是减法，这显然是首先引用的函数。所有其他都会在编译时导致错误（见下文）。

如果我不注释掉上面的代码并去外部引用所有这些函数。我在 multipyInts(int x, int y) 处收到以下错误。

`Could not load type 'test1DLL_highest.Form1' from assembly 'test1DLL_highest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' because the method 'multiplyints' has no implementation (no RVA).`

我会想象排序可以对所有内容进行排序。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:45:56.093

您需要添加`DllImportAttribute`所有四种方法，删除路径，并修复您的套管：

```
[DllImport("testDLL1_medium.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int subtractInts(int x, int y);
[DllImport("testDLL1_medium.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int multiplyInts(int x, int y);
[DllImport("testDLL1_medium.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int addInts(int x, int y);
[DllImport("testDLL1_medium.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern string returnTestString(); 
```

还要确保本机 DLL 与托管程序集位于同一位置（或可通过常规 DLL 发现方法发现）。

# variables - Vhdl 代码行为怪异（小代码，变量保持其值且不重置）

> ID：15413801
> 
> 赞同：1
> 
> 时间：2013-03-14T15:44:23.803
> 
> 标签：variables, vhdl, unsigned, fpga, multiplication

这是代码：

```
entity main is
port(input:in unsigned(99 downto 0);
clk:in std_logic;
output:out unsigned(99 downto 0)
);
end main;

architecture Behavioral of main is

begin

process(clk)

variable x:unsigned(99 downto 0):=X"27c8a94a6fb72a00000000000";
begin
if(clk'event and clk='1') then

x:=(x*input);// this line is a problem!!

output<=x;
x:=X"27c8a94a6fb72a00000000000";// i have to rest x manually :S

end if;
end process;
end Behavioral; 
```

第一个问题是 x 虽然是一个变量并且应该在每次进程运行时重置它并没有保存它的值！我在模拟中一步一步地看到了它。第二个问题是，虽然输入是固定到这个实体的，并且不会因每个 clk 进程而改变 x 要么是 x * 输入（正确答案）或 0（错误答案），但当我的时钟停止滴答作响时，它会停在 0 答案，如果我稍微减少时钟它可能会停在正确的答案（即输入*x）我的问题是为什么输入*x 不固定如果输入和 x 是固定的，第二个是为什么当再次调用进程时 x 不重置（来自它的敏感度列表）。这是测试代码：

* * *

```
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
use IEEE.numeric_std.all;
-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
--USE ieee.numeric_std.ALL;

ENTITY test IS
END test;

ARCHITECTURE behavior OF test IS 

    -- Component Declaration for the Unit Under Test (UUT)

    COMPONENT main
    PORT(
         input : IN  unsigned(99 downto 0);
         clk : IN  std_logic;
         output : OUT  unsigned(99 downto 0)
        );
    END COMPONENT;

   --Inputs
   signal input : unsigned(99 downto 0) := (others => '0');
   signal clk : std_logic := '0';

    --Outputs
   signal output : unsigned(99 downto 0);

   -- Clock period definitions
   constant clk_period : time := 10 ns;

BEGIN

    -- Instantiate the Unit Under Test (UUT)
   uut: main PORT MAP (
          input => input,
          clk => clk,
          output => output
        );

   -- Clock process definitions
   clk_process :process
   begin
        clk <= '0';
        wait for clk_period/2;
        clk <= '1';
        wait for clk_period/2;
   end process;

   -- Stimulus process
   stim_proc: process
   begin        
      -- hold reset state for 100 ns.
      wait for 100 ns;  
input<=X"000000000000000000000000F";
--input<="000000000001";
      wait for clk_period*10;

      -- insert stimulus here 

      wait;
   end process;

END; 
```

///

**请注意，在测试开始时，该过程在没有插入输入值的情况下运行了几次，在这种情况下，我不关心结果，我说的是在插入输入时会发生此问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:11:40.450

首先要了解的是，您永远不会调用进程！

一个进程只启动一次 - 因此变量只初始化一次。

它运行到完成并休眠 - 下一个时钟事件将其唤醒，并在每个时钟周期中从开始到完成执行。

将进程想象成带有事件循环的 C 主程序可能会有所帮助。它会一直休眠直到事件发生，并且您声明的变量是全局变量（或“静态”变量 - 它保留其最后一个值）。

如果你想要一个 C 函数或过程的效果（*cough* , void 函数），写一个 VHDL 函数或过程；每次在进程中调用它们时，这些局部变量都会重新初始化。

因此，在 1 个时钟周期后您会看到`x * input`，在几个时钟周期后，您会看到其中最不重要的 100 位`x * input * input * input ... * input`，由于乘法字的增长，最终将全部为 0。

如果您要做的只是将每个新输入乘以 X 的初始值，那么您最好将 X 声明为常量，并简单地编写：

```
process(clk)
constant x:unsigned(99 downto 0):=X"27c8a94a6fb72a00000000000";
begin
   if rising_edge(clk) then
      output <= x * input;
   end if;
end process; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:26:32.153

问题是，您将 2 个长度为 100 的无符号值相乘。这导致长度为 200 的结果（参见 numeric_std 包！）。您可以按以下方式解决您的问题：

```
entity main is
port(
input:in unsigned(99 downto 0);
clk:in std_logic;
output:out unsigned(199 downto 0)
);
end main;

architecture Behavioral of main is

begin
process(clk) 
    variable x:unsigned(99 downto 0); 
    variable x_res:unsigned(199 downto 0); 
begin 
    if(clk'event and clk='1') then 
        x:=(input); 
        x_res:=(x*x); 
        output<=x_res; 
    end if; 
end process; 
end Behavioral; 
```

# c++ - 使用 WEST 工具嵌入 Windows 的 Silverlight

> ID：15413806
> 
> 赞同：1
> 
> 时间：2013-03-14T15:44:41.007
> 
> 标签：c++, silverlight, baml

我正在使用 Silverlight 来嵌入 Windows。我在源代码管理中有两个项目：

1.  带有 UI 的 Expression Blend 项目
2.  带有用于偶数处理程序的后端代码的 VC++ 项目

VC++ 项目有一个资源文件 .rc 和一个 Generated.rc2 文件。在 rc2 文件中有以下几行：

> IDR_SEALPENDANT_APP SLWE_XAML DISCARDABLE "SDK2wince7 (ARMv4I)\Debug\App.Compressed"
> IDR_SEALPENDANT_MAINPAGE SLWE_XAML DISCARDABLE "SDK2wince7 (ARMv4I)\Debug\MainPage.Compressed"

问题是当我尝试构建 VC++ 项目时，它会给出一个错误，即上述文件在 Debug 文件夹中不存在。如果我修改 Expression blend 项目并在 VC++ 项目中运行 WEST（Windows Embedded Silverlight 工具），它会获取所有更改。但是，它仍然给出有关丢失压缩文件的错误。

我查看了他正在运行的同事机器。在“调试”文件夹中，我找到了以下 4 个文件：

1.  应用程序.baml
2.  应用压缩
3.  主页.baml
4.  Mainpage.compressed

我是 Silverlight 的新手。有人可以解释为什么在我构建我的 VC++ 项目时没有生成这些文件。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:59:50.813

项目中有一个 *.xrpack 文件，其中包含以下行：

```
# Uncomment /C to force xrpack to perform a clean build every time
#/C 
```

如果您将 #/C 更改为 /C，则每次构建时都会生成 *.baml 和 *.compressed 文件。

# c# - MVC 从 ReturnURL 获取 ID

> ID：15413808
> 
> 赞同：2
> 
> 时间：2013-03-14T15:44:43.670
> 
> 标签：c#, asp.net-mvc, url, query-string

我正在构建一个 MVC 4 Web 应用程序，每当用户尝试在未经身份验证的情况下访问安全页面时，我都会将它们触发到登录屏幕

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{
   ViewBag.ReturnUrl = returnUrl;
   return View();
} 
```

一旦他们登录，我使用 returnURL 字符串将他们返回到他们之前想要访问的页面。都好。

但是，我想知道是否可以从 returnURL 字符串中获取 ID 参数，例如，如果 returnURL 字符串是

> /课程/ICT/4

反正有没有得到价值4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:11:46.543

我想您可以将字符串按“/”拆分为一个数组，然后获取数组中的最后一个元素。

```
string[] splitURL = returnURL.Split('/');
string id = splitURL[splitURL.Length - 1]; 
```

等等。希望这有点用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:29:56.007

感谢 user2025312 和这篇文章[Splitting the array with / slash](https://stackoverflow.com/questions/9673817/splitting-the-array-with-slash)

我能够得到答案

```
public ActionResult Login(string returnUrl) 
{
    string[] myString = returnUrl.Split('/');

    var ID = myString[3];

    ViewBag.ReturnUrl = ID;

    return View(); 
} 
```

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:06:41.433

您也可以使用这样的正则表达式

```
[^/]+$ 
```

在你的控制器中像这样

```
var id = 0;
int.TryParse(Regex.Match(urnUrl, "[^/]+$"), out id); 
```

* * *

**编辑**

* * *

显然，这个答案假设您**不会**有以下形式的 Uri：

```
/Controller/Action/?id=783 
```

这将使上述方法（以及发布的其他方法）足够。为了也支持这一点，您需要进行一些异常处理。

```
var id = 0;
var afterSlash = Regex.Match(returnUrl, "[^/]+$");
if(int.TryParse(afterSlash, out id) == false)
{
    if(int.TryParse(Regex.Match(afterSlash, "[^=]+$"), out id) == false)
    {
        // probably not a valid uri
    }
} 
```

这可能是一个好的开始，但您可能需要进行更多测试并根据您的环境进行修改。

# magento - 如何在magento的Topmenu中检索父类别图像？

> ID：15413811
> 
> 赞同：0
> 
> 时间：2013-03-14T15:44:51.150
> 
> 标签：magento, zend-framework, menu, magento-1.7, categories

在**magento**中如何检索**Topmenu**中的**父类别图像**。当单击或将鼠标悬停在受尊敬的父菜单上时，我必须显示父类别图像。我尝试了下面提到的代码，但我得到了所有的类别图像。如果我在前端显示它都显示在受尊重的菜单下。谁能指导我如何显示正确的图像？我的 magento 版本是 1.7.0.2。

 **$categoryData = 数组（

```
 'name' => $category->getName(),
            'id' => $nodeId,
            'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
            'is_active' => $this->_isActiveMenuCategory($category),
            'links' => $cat->getData('links'),
            'image' => $cat->getImageUrl('image'),
            'thumbnail' => $cat->getThumbnail(),
            'getLevel' => $category->getLevel()
        ); 
```

我想使用**缩略图**来显示。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:43:14.200

最后我得到了解决方案并在下面分享答案。我可以使用“ **getLevel** ”属性来查找所有菜单的位置。然后我找出父菜单并在 Topmenu 中显示受人尊敬的图像。

它被添加到模型文件中。(/app/code/core/Mage/Catalog/Model/Observer.php)

**函数名称：** _addCategoriesToMenu

```
$categoryData = array(

                'name' => $category->getName(),
                'id' => $nodeId,
                'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
                'is_active' => $this->_isActiveMenuCategory($category),
                'links' => $cat->getData('links'),
                'image' => $cat->getImageUrl('image'),
                'thumbnail' => $cat->getThumbnail(),
                'getLevel' => $category->getLevel()
            ); 
```

它被添加到 Html 文件夹中。(app/code/core/Mage/Page/Block/Html/Topmenu.php)

**函数名称：** _getHtml

```
$parentLevels = $child->getLevel();

        if($parentLevels == 0) 
        {

            $urls = Mage::getBaseUrl('media').'catalog/category/'.$child->getData('thumbnail');

            $html .= '<img src="'.$urls.'" />';
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-11T10:45:25.513

此解决方案适用于 Magento -1.8.*

在模型文件中。(/app/code/core/Mage/Catalog/Model/Observer.php)

更新函数名称中的以下代码：_addCategoriesToMenu

```
 $categoryData = array( 
            'name' => $category->getName(),
            'id' => $nodeId,
            'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
            'is_active' => $this->_isActiveMenuCategory($category),
            'thumbnail' => Mage::getModel('catalog/category')->load($category->getId())->getThumbnail()

        ); 
```

然后进入 Html 文件夹。(app/code/core/Mage/Page/Block/Html/Topmenu.php)

在第 128 行更新以下代码行

函数名：_getHtml

```
 if($childLevel < 1 ){
            $urls = Mage::getBaseUrl('media').'catalog/category/'.$child->getData('thumbnail');
            $img = '<img src="'.$urls.'" />';
        }

        $html .= '<li ' . $this->_getRenderedMenuItemAttributes($child) . '>';
        $html .= '<a href="' . $child->getUrl() . '" ' . $outermostClassCode . '><span>'
            . $this->escapeHtml($child->getName()) . ' </span> '.$img.' </a>'; 
```**

# java - 打印为 2D Java 的 1D 数组

> ID：15413815
> 
> 赞同：2
> 
> 时间：2013-03-14T15:45:13.447
> 
> 标签：java, object, loops, arraylist

我正在尝试从数组列表中打印一个稀疏矩阵，其中列表中的每个对象都包含一对。对（对象）包含两个整数 - 位置和值。[位置，值]。

位置是整数所在的稀疏矩阵中零的数量。因此，表示为 2d 矩阵，您可能具有例如以下内容：

[000 0023 100] （对不起格式，想象一个 3x3 矩阵）。无论如何，这个数组列表将是

aList = {[5,23], [6,1]}

现在，我有以下代码，我用它来尝试遍历它们以创建一个 6x6 矩阵。

```
public void printFullMatrix() {

    int count = 0;
    int temp = 0;
    for (int i = 0; i < aList.size(); i++) {
        for (int j = 0; j < aList.get(i).pos - temp; j++) {
            count+=1;
            if (count % size == 0){
                System.out.println("");

            } else {
                System.out.print(0 + " ");
            }

        }
        System.out.print(aList.get(i).val + " ");
        temp = aList.get(i).pos;
    }

} 
```

问题是我得到了以下打印结果（| 符号代表换行符）：

[0 0 35 0 0 99 0 | 0 0 0 0 0 0 | 0 0 0 0 0 0 55| 0 0 20 0 0 0 0 | 0 0 0 3 0 0 0 | 0 0 0 0 0 2]

如您所见，第一行有 7 个元素，我发现在每行打印一个整数时，都会添加一个额外的 0。这显示在没有整数的第二行。很抱歉这篇文章，但我整天都在写这篇文章！

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:09:12.193

好的，您的代码存在一些问题，我假设您的输入是：

> [2, 35] [3, 99] [17, 55] [19, 20] [26, 3] [34, 2]

首先，当您添加一个非零数字时，您不会增加计数，这就是为什么您在其他数字的行上获得额外的零。

然后，您需要对新行进行更多检查（即，对于在行的开头或结尾添加非零数字的情况）。

完成所有这些之后，您需要添加矩阵末尾剩余的任何零。

以下代码应该适合您：

```
public void printFullMatrix() {

    int count = 0;
    int temp = 0;
    int rows = 0;

    for (int i = 0; i < aList.size(); i++) {
        if (count % size == 0) {
            System.out.println("");
            rows++;
        }
        for (int j = 0; j < aList.get(i).pos - temp; j++) {
            count += 1;
            if (count % size == 0) {
                System.out.println("");
                rows++;
            } else {
                System.out.print(0 + " ");
            }

        }
        System.out.print(aList.get(i).val + " ");
        temp = aList.get(i).pos;
        count++;
        if (count % size == 0) {
            System.out.println("");
            rows++;
        }
    }

    while (rows < size) {
        count++;
        if (count % size == 0) {
            System.out.println("");
            rows++;
        } else {
            System.out.print(0 + " ");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:22:30.187

我认为您最好对二维数组进行排序（我称它们为您的*pairs*），然后遍历矩阵的长度。由于这些*对*不包含有关矩阵长度的任何信息，因此您也需要将其传递给您`printFullMatrix`的。

一个额外的警告：因为你永远不会有两个具有相同数量的零索引的对（例如，`{{5,3}, {5,4}}`永远不会发生），那么你只需要对每个矩阵条目**最多**遍历你的对列表一次。

这是我会这样做的方式：

```
import java.util.Arrays;
import java.util.Comparator;

public class q15413815 {

    public static void main(String[] args) {
        Integer[][] pairs = { { 6, 1 }, { 5, 23 } };
        printFullMatrix(pairs, 3);
    }

    public static void printFullMatrix(Integer[][] pairs, int length) {
        // Sort the pairs so we can simply iterate through them.
        Arrays.sort(pairs, new Comparator<Integer[]>() {

            @Override
            public int compare(Integer[] a1, Integer[] a2) {
                return a1[0] - a2[0];
            }

        });

        // Walk through the matrix and populate it with values.
        for (int i = 0; i < length * length; i++) {
            if (i % length == 0 && i != 0) {
                System.out.println();
            }

            int value = 0;
            for (int j = 0; j < pairs.length; j++) {
                if (pairs[j][0] == i) {
                    value = pairs[j][1];
                }
                if (pairs[j][0] > i) {
                    break;
                }
            }

            System.out.print(value + " ");
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:27:18.247

像这样的东西，我想...

```
 int[][] lll = new int[][] { {5, 23}, {6, 1}, {14, 6}};

    int count = 0;
    final int MATRIX_SIZE = 6;
    int index = 0;
    for (int pos = 0; pos < lll.length; pos++) {
        count = lll[pos][0];
        for (int i = 0; i < MATRIX_SIZE; i++) {
            index++;

            if (count == index - 1) {
                System.out.print(lll[pos][1] + " ");
            }
            else {
                System.out.print(0 + " ");
            }
        }
        System.out.print("|");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:31:18.663

我试图弄清楚如何解决您当前拥有的问题，但是由于 for 循环不会打印出在最后一个对象的值之后出现的任何 0，因此我只是从一个 while 循环重新开始，该循环将始终打印出矩阵中的每个位置。这假设您的列表将始终按位置排序。

使用输入列表`{[2,35], [4,99], [17,55], [19,20], [26,3], [34,2]}`

```
int count = 0;
int currentObj = 0; // the object whose value is going to be printed
int numObjs = 6; // the number of objects to print
int size1 = 6; // number of rows
int size2 = 6; // number of positions in a row

// make sure you loop through every possible position
// the way you have it now stops after "2" is printed, leaving out the last "0"
while (count < size1 * size2) {
    count++; // increment the position every loop

    // if there are still objects to print out,
    // and if count is at the position of the current object
    //  pos of the objects is actually the number of positions before that value
    //  so pos is technically (position to print number - 1)
    if (currentObj < numObjs && (count - 1) == aList.get(currentObj).pos) {
        System.out.print(aList.get(currentObj).val + " ");
        currentObj++; // remember to increment to the next object

    // not at the position of an object's value, so print 0
    } else {
        System.out.print("0 ");
    }

    // go to the next line if size2 positions have been printed
    if (count % size2 == 0) {
        System.out.println("");
    }
} 
```

输出：

```
0 0 35 0 99 0 
0 0 0 0 0 0 
0 0 0 0 0 55 
0 20 0 0 0 0 
0 0 3 0 0 0 
0 0 0 0 2 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T16:53:10.917

我总是觉得打印二维结构最干净的方法是嵌套循环：

```
public void printFullMatrix() {
    int mi = 0; // matrix index
    int li = 0; // list index
    for (int row = 0; row < size; row++) {
        for (int col = 0; col < size; col++) {
            System.out.printf(" %3d", 
               (li < aList.size() && mi++ == aList.get(li).pos)
               ? aList.get(li++).val : 0);
        }
        System.out.println();
    }
} 
```

# java - Xuggler 无法打开输出 url 错误

> ID：15413822
> 
> 赞同：1
> 
> 时间：2013-03-14T15:45:21.590
> 
> 标签：java, stream, media, xuggler, xuggle

我一直在关注 youtube [Xuggler](http://www.youtube.com/watch?v=wdW6tUql154)上的简单视频教程。我已确保参数中存在现有文件路径。但是我仍然收到以下错误：

15:15:44.339 [main] 调试 com.xuggle.xuggler - 无法打开输出 url：*thefilepath (../../../../../../../csrc/com/xuggle /xuggler/Container.cpp:436)

线程“主”java.lang.IllegalArgumentException 中的异常：无法在 myproject1.MediaPlayer.main(MediaPlayer.java:23) Java 结果中打开：1

* * *

我的代码如下：

公共类媒体播放器{

```
public static void main (String[] args) {
    if(args.length != 1)
        throw new IllegalArgumentException("no file");
    IContainer container = IContainer.make();
    System.out.println("args: " + args[0]);

    if(container.open(args[0], IContainer.Type.READ, null) < 0) {
        throw new IllegalArgumentException("Could not open");
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:48:35.347

原因 可能是依赖 jar 不可用或版本冲突。

在类路径中添加以下 jar 对我来说效果很好：

xuggle-xuggler-5.4.jar
slf4j-api-1.6.4.jar
logback-core-1.0.0.jar
logback-classic-1.0.0.jar

# php - 在 CakePhp 中向一位用户添加更多数据

> ID：15413823
> 
> 赞同：0
> 
> 时间：2013-03-14T15:45:24.087
> 
> 标签：php, cakephp, models

我在 Vake 项目 profile.ctp 中有一个使用 profileController 的编辑配置文件页面？我想为 url、电话等添加输入字段，但用户可以拥有更多电话，所以我创建了另一个名为 users_phones 的表

```
USERS_PHONES
id
user_id
phone 
```

在我看来，我创建了表格

```
<?
echo $this->Form->create();
echo $this->Form->input('UsersPhones.phone');
echo $this->Form->end('Save');
?> 
```

在模型中我有：

```
public $hasMany = array(
    'Phones' => array(
        'className'     => 'UsersPhones',
        'foreignKey'    => 'user_id',
        'dependent'     => true
    )
); 
```

控制器：

```
$this->User->id = $this->Auth->user('id');
if ($this->request->is('post')) {
    if ($this->User->save($this->request->data, array('validate' => false))) {
    $this->Session->setFlash('Profile updated succsessefully!',
                                        'default', array('class' => 'okmsg'));

    $this->redirect($this->request->here);
    } else {
$this->Session->setFlash('Profile could not be saved. Please, try again.',
                                                    'default', array('class' => 'errormsg'));
}
} 
```

但是当我点击保存它不会插入到 users_phones

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:08:49.183

您需要将 save() 替换为支持保存多个数据的 saveAll()（或 saveAssociated/saveMany）。

请参阅[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

# c# - 如何将 JToken 添加到 JObject？

> ID：15413825
> 
> 赞同：89
> 
> 时间：2013-03-14T15:45:25.420
> 
> 标签：c#, json.net

我正在尝试使用 JSON.Net 将一些文本中的 JSON 对象添加到现有的 JSON 文件中。例如，如果我有如下 JSON 数据：

```
 {
  "food": {
    "fruit": {
      "apple": {
        "colour": "red",
        "size": "small"
      },
      "orange": {
        "colour": "orange",
        "size": "large"
      }
    }
  }
} 
```

我一直在尝试这样做：

```
var foodJsonObj = JObject.Parse(jsonText);
var bananaJson = JObject.Parse(@"{ ""banana"" : { ""colour"": ""yellow"", ""size"": ""medium""}}");
var bananaToken = bananaJson as JToken;
foodJsonObj["food"]["fruit"]["orange"].AddAfterSelf(bananaToken); 
```

但这给出了错误：`"Newtonsoft.Json.Linq.JProperty cannot have multiple values."`

我实际上尝试了几种不同的方法，但似乎无处可去。在我的示例中，我真正想做的是将新项目添加到“水果”中。请让我知道是否有更好的方法或更简单的库来使用。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-04-03T08:21:35.603

我认为您对 JSON.Net 中可以保存的内容感到困惑。

*   A`JToken`是任何类型的 JSON 值的通用表示。它可以是字符串、对象、数组、属性等。
*   A是与名称配对`JProperty`的单个值。`JToken`它只能添加到 a`JObject`中，并且它的值不能是 another `JProperty`。
*   A`JObject`是 的集合`JProperties`。它不能`JToken`直接容纳任何其他类型。

在您的代码中，您试图将一个`JObject`（包含“香蕉”数据的那个）添加到一个`JProperty`已经有一个值（一个`JObject`包含）的（“橙色” `{"colour":"orange","size":"large"}`）。如您所见，这将导致错误。

您真正想要做的是在包含其他水果的内容中添加一个`JProperty`名为“香蕉” 。这是修改后的代码：`JObject``JProperties`

```
JObject foodJsonObj = JObject.Parse(jsonText);
JObject fruits = foodJsonObj["food"]["fruit"] as JObject;
fruits.Add("banana", JObject.Parse(@"{""colour"":""yellow"",""size"":""medium""}")); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-06-14T04:40:11.830

TL;DR：您应该将 JProperty 添加到 JObject。简单的。索引查询返回一个 JValue，因此请弄清楚如何获取 JProperty :)

* * *

接受的答案并没有像看起来那样回答问题。如果我想在特定的 JProperty 之后专门添加一个 JProperty 怎么办？首先，让我们从真正让我头疼的术语开始。

*   JToken = 所有其他类型的母亲。它可以是 JValue、JProperty、JArray 或 JObject。这是为解析机制提供模块化设计。
*   JValue = 任何 Json 值类型（字符串、整数、布尔值）。
*   **JProperty = 任何与名称（标识符）**配对的 JValue 或 JContainer（见下文） 。例如`"name":"value"`.
*   JContainer = 包含其他类型（JObject、JValue）的所有类型的母体。
*   JObject = 包含 JProperties 集合的 JContainer 类型
*   JArray = 包含集合 JValue 或 JContainer 的 JContainer 类型。

现在，当您使用索引 [] 查询 Json 项目时，您将获得不带标识符的 JToken，它可能是 JContainer 或 JValue（需要强制转换），但您不能在其后添加任何内容，因为它只是一个值。你可以自己改变它，查询更深的值，但是你不能在它之后添加任何东西。

您真正想要获得的是整个属性，然后根据需要在其后添加另一个属性。为此，您使用`JOjbect.Property("name")`，然后创建另一个您想要的 JProperty，然后在此 using`AddAfterSelf`方法之后添加它。那你就完成了。

欲了解更多信息： http: [//www.newtonsoft.com/json/help/html/ModifyJson.htm](http://www.newtonsoft.com/json/help/html/ModifyJson.htm)

这是我修改的代码。

```
public class Program
{
  public static void Main()
  {
    try
    {
      string jsonText = @"
      {
        ""food"": {
          ""fruit"": {
            ""apple"": {
              ""colour"": ""red"",
              ""size"": ""small""
            },
            ""orange"": {
              ""colour"": ""orange"",
              ""size"": ""large""
            }
          }
        }
      }";

      var foodJsonObj = JObject.Parse(jsonText);
      var bananaJson = JObject.Parse(@"{ ""banana"" : { ""colour"": ""yellow"", ""size"": ""medium""}}");

      var fruitJObject = foodJsonObj["food"]["fruit"] as JObject;
      fruitJObject.Property("orange").AddAfterSelf(new JProperty("banana", fruitJObject));

      Console.WriteLine(foodJsonObj.ToString());
    }
    catch (Exception ex)
    {
      Console.WriteLine(ex.GetType().Name + ": " + ex.Message);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-13T00:36:31.140

只需添加**`.First`**到你`bananaToken`应该做的事情：基本上移动过去以使其成为 a而不是 a 。
`foodJsonObj["food"]["fruit"]["orange"].Parent.AddAfterSelf(bananaToken` **`.First`**`);`
**`.First`****`{`****`JProperty`****`JToken`**

@Brian Rogers，谢谢，我忘记了`.Parent`. 已编辑

# c# - 如何在 ASP.NET 的用户控件中使用其 ID 获取按钮？

> ID：15413828
> 
> 赞同：0
> 
> 时间：2013-03-14T15:45:29.960
> 
> 标签：c#, asp.net

我制作了一个用户控件 (.ascx)，它由一个包含六个按钮的 div 组成。它有一个字符串属性“selectedButton”，其中包含一个按钮的 ID 值。

我想要做的是能够在页面加载时更改其 ID 对应于 selectedButton 属性的按钮的背景色。

现在我正在 ascx.cs 中对 selectedButton 属性的值进行切换，如下所示：

```
switch (selectedButton)
{
  case "Button1":
  Button1.BackColor = System.Drawing.ColorTranslator.FromHtml("#00CC00");
  break;
  //etc...
} 
```

它可以工作，但这似乎不是很有效，如果我有更多按钮，它也不是动态的。

我试过把它放在 ascx 源代码中：

```
<script type="text/javascript">
    var sb = document.getElementById("<%=this.selectedButton %>");
    sb.BackColor = System.Drawing.ColorTranslator.FromHtml("#00CC00");
</script> 
```

但没有任何结果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:55:54.203

答案取决于`selectedButton`包含的内容。如果它包含服务器端 ID（并且从您的代码片段看来是这种情况），那么您可以`FindControl`在后面的代码中使用：

```
Button button = this.FindControl(selectedButton) as Button;
if (button != null)
{
    button.BackColor = System.Drawing.ColorTranslator.FromHtml("#00CC00");
} 
```

但是，如果`selectedButton`包含客户端 ID（ASP.NET 为每个控件生成的 ID），那么您应该使用一些 javascript：

```
<script type="text/javascript">
    var sb = document.getElementById("<%= this.selectedButton %>");
    sb.style['background-color'] = '#00CC00';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:50:03.937

您正在尝试将服务器端与客户端代码混合。那是行不通的。

如果您希望在客户端更改此内容而不需要往返服务器，请使用纯 JavaScript。这意味着您不能在此处使用`this.selectedButton`,`System.Drawing.ColorTranslator`或任何其他 C# 代码。

改用纯 JavaScript 解决方案来更改颜色，您会发现很多关于如何做到这一点的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:50:50.267

试试这个：

```
<script type="text/javascript">
    var sb = document.getElementById("<%=this.Button1.ClientID %>");
    sb.style.backgroundColor =  "<%= System.Drawing.ColorTranslator.FromHtml("#00CC00") %>)";
</script> 
```

发现这里：[http ://forums.asp.net/t/1320687.aspx/1](http://forums.asp.net/t/1320687.aspx/1)

但是这个 SO 帖子是我真正想要的：[Passing ASP.NET client IDs in to a javascript function](https://stackoverflow.com/questions/6345484/passing-asp-net-client-ids-in-to-a-javascript-function)

他们使用 uniqueID 但从内存中，ClientID 是正确的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:52:31.217

使用 clientClick 调用更改颜色并传递 clientId 值的方法，其中 .style.background = color; 使用 javascript，这里有更多信息[如何使用 JavaScript 更改背景颜色？](https://stackoverflow.com/questions/197748/how-do-i-change-the-background-color-with-javascript)

# php - 为什么 PHP 允许“不兼容”的构造函数？

> ID：15413829
> 
> 赞同：28
> 
> 时间：2013-03-14T15:45:35.740
> 
> 标签：php, oop, constructor

这里有几个片段：

1.  重写*构造*方法有一个额外的参数。

    ```
    class Cat {
        function __construct() {}
    }

    class Lion extends Cat {
        function __construct($param) {}
    } 
    ```

2.  覆盖（常规）方法有一个额外的参数。

    ```
    class Cat {
        function doSomething() {}
    }

    class Lion extends Cat {
        function doSomething($param) {}
    } 
    ```

第一个会起作用，而第二个会抛出`Declaration of Lion::doSomething() should be compatible with that of Cat::doSomething()`.

为什么对构造方法有特殊的态度？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-16T11:18:49.677

要了解为什么它们被区别对待，您必须了解[Liskov 的替代原则](https://stackoverflow.com/questions/56860/what-is-the-liskov-substitution-principle)，它[指出](http://c2.com/cgi/wiki?LiskovSubstitutionPrinciple)

> 如果对于每个 S 类型的对象 o1 都有一个 T 类型的对象 o2 ，那么对于以 T 定义的所有程序 P ，当 o1 替换 o2 时 P 的行为不变，则 S 是 T 的子类型。” - *BarbaraLiskov，Data Abstraction and Hierarchy，SIGPLAN Notices，23,5（1988 年 5 月）。*

简而言之，这意味着任何使用你的类`Lion`或`Cat`应该能够可靠地调用`doSomething`它，无论类是一个还是另一个。如果您更改方法签名，则不再保证这一点（您可以扩大它，但不能缩小它）。

### 非常简单的例子

```
public function doSomethingWithFeline(Cat $feline)
{
    $feline->doSomething(42);
} 
```

既然`Lion extends Cat`，你建立了一个 is-a 关系，意思就是`doSomethingWithFeline`接受`Lion`a `Cat`。现在假设您向`doSomething`in添加了一个必需的参数`Lion`。上面的代码会中断，因为它没有传递那个新参数。因此，需要兼容的签名。

[LSP 不适用于构造函数](https://stackoverflow.com/questions/5490824/should-constructors-comply-with-the-liskov-substitution-principle)，[因为子类型可能有不同的依赖关系](https://softwareengineering.stackexchange.com/questions/178886/liskov-substitution-and-abstract-classes-strategy-pattern)。例如，如果你有一个 FileLogger 和一个 DBLogger，第一个的 ctors（构造函数）需要一个文件名，而后者需要一个 db 适配器。因此，ctors 是关于具体实现的，而不是类之间契约的一部分。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-16T11:21:03.560

[*Liskov 替换原则*](http://en.wikipedia.org/wiki/Liskov_substitution_principle)指出“如果 S 是 T 的子类型，则 T 类型的对象可以被 S 类型的对象替换” 。在您的示例中，这意味着您应该能够将 type 的对象替换为 type`Cat`的对象`Lion`。

这就是不允许您的第二个代码的原因。您将不再能够进行此替换，因为您将不再能够在`->doSomething()`没有参数的情况下调用该方法。

另一方面，构造函数*不受*Liskov 替换原则的约束，因为它不是结果对象 API 的一部分。无论构造函数签名是否匹配，您仍然可以替换生成的对象。

实际上，子类有更多的构造函数参数是很常见的，因为它们更具体并且需要更多的依赖项。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T15:52:03.903

因为`__construct()`它们在每个班级都是独一无二的。的构造函数`Lion`与 的构造函数不同`Cat`，尽管如果`Lion`extends`Cat`并且`Lion`没有`__construct()`，您仍然可以`__construct()`使用扩展父级`Lion::__construct()`。

> 与其他方法不同，当使用与父 __construct() 方法不同的参数覆盖 __construct() 时，PHP 不会生成 E_STRICT 级别的错误消息。
> 
> [PHP 手册：构造函数和析构函数](http://php.net/manual/en/language.oop5.decon.php)

其他魔术方法采用特定的参数，这意味着它们的参数计数等将始终保持一致。

在类被实例化后，多态性/覆盖会为你的`doSomething()`. 您的父类，就像抽象类所做的那样，定义了需要由子类匹配以支持覆盖的参数和可见性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T11:38:44.160

构造函数仅适用于具体对象。它孕育了它。

其他方法 - 只要涉及子类型 - 与继承的类相关，因此这些方法是同一对象的一部分，因此当分布在多个类的定义中时应该是兼容的。

否则，您将创建一个有点 shizo 的对象。

* * *

***编辑：***如果您还想使用构造函数签名引入严格检查，您可以使用`interface`PHP 5.2 以来添加了构造函数检查：

> 在接口中添加了对构造函数的支持，以强制在实现中进行构造函数签名检查。从 PHP 5.2.0 开始，接口可以有构造函数。但是，如果您选择在接口中声明构造函数，则实现该接口的每个类都必须包含一个构造函数，该构造函数的签名与基接口构造函数的签名匹配。“签名”是指参数和返回类型定义，包括任何类型提示，包括数据是通过引用传递还是通过值传递。

（取自：[*Other Enhancements - Migrating from PHP 5.1.x to PHP 5.2.x*](http://www.php.net/manual/en/migration52.other.php)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T15:56:21.797

您所描述的是PHP 不支持的[重载。](http://php.net/manual/en/language.oop5.overloading.php)现在，当您为类创建构造函数时，它仅在该类中使用，并且默认情况下不调用父构造函数（请参阅[构造函数和析构函数](http://php.net/manual/en/language.oop5.decon.php)。您需要手动调用它`parent::__construct()`。

当您在类中创建方法时，它会直接访问父方法。

所以总而言之：

*   构造函数不使用重载，但仅适用于类本身
*   该方法使用重载，因此不允许

# c++ - c++两个版本的重载下标运算符

> ID：15413831
> 
> 赞同：11
> 
> 时间：2013-03-14T15:45:42.157
> 
> 标签：c++, operator-overloading, subscript

我的问题是关于以下之间的区别：

```
const T& operator[](const int nIndex) const; 
```

和：

```
T& operator[](const int nIndex); 
```

为什么我需要在一个类中定义它们，目的是什么？后者还不够吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T15:49:56.420

成员函数声明`const`在它的末尾允许即使在`const`对象上也可以调用该函数。这仅对不修改对象状态的成员函数有意义。

假设您拥有的重载这些运算符的类称为`X`. 大概它的行为有点像一个容器，通过 this 可以访问它包含的元素`operator[]`。

现在假设用户想要使用 a `const X`：

```
const X x = /* fill it */;
use(x[0]); 
```

是否应该允许用户这样做？大概。如果他们想要一个不可变的容器，那就让他们拥有它。如果您不提供 的`const`版本`operator[]`，他们将无法执行此操作。毕竟他们并没有试图修改容器，他们只是在查看它的内容。

现在为什么要让return的`const`版本成为参考？因为它必须。它返回对类本身成员的引用。如果容器是并且返回了一个非引用，调用者将能够通过使用这个操作符来修改它的内部：`operator[]``const``const``const`

```
const X x = /* fill it */;
x[0].modify(); 
```

哦，天哪，我们修改了状态，`x`即使它是`const`. 这会很糟糕，事实上，编译器甚至不会让你这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T15:49:10.150

这些是类的成员函数，将根据该类是否用作`const`上下文来选择版本。

当在上下文`[]`中的对象上使用时，将调用此版本。`const`它保留了`const`返回元素的-ness。

```
const T& operator[](const int nIndex) const; 
```

`[]`当用于非`const`对象时，将调用此版本。它指定当您的对象不是时`const`，您将获得一个可以修改的元素，允许类似的代码`myObject[0] = 10;`

```
T& operator[](const int nIndex); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:49:06.837

如果您正在访问的对象是`const`，您不希望能够修改它。编译器不允许您调用`const`该函数的非版本。

```
const vector<int> mints;

mints[3] = 5; // not allowed by compiler 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T16:04:04.910

第一个

> const T& operator[](const int nIndex) const;

是一个常量方法（函数），即它保证它不会改变任何类成员变量（除非它是可变的）。

它还返回一个常量对象，这意味着您只能调用常量函数，即您只能调用末尾具有 const 的函数，类似于上面的函数。

> T& 运算符[](const int nIndex);

该方法可以改变成员变量并返回一个可以调用任何类方法的对象。

我们都需要它们，因为常量对象将使用常量方法，而非常量对象将使用另一种方法。

# android - android安全评论网络帖子

> ID：15413832
> 
> 赞同：0
> 
> 时间：2013-03-14T15:45:44.067
> 
> 标签：android, http-post

我从stackoverflow上的这个答案找到了如何在android上发布http帖子：[https ://stackoverflow.com/a/11899938](https://stackoverflow.com/a/11899938)

我不知道这是否是制作 http 帖子的好主意，因为它不安全，任何知道 url 来对我的帖子发表评论的人都可以使用该 url 发布垃圾邮件。

那么，如何为我的应用创建一个安全的评论框呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:51:22.360

您似乎误解了 POST 的含义。另一个问题是询问如何使用称为 POST 的方法将数据发送到 HTTP 服务器——对 HTTP 服务器的每个请求都有一个方法，例如 POST、GET、DELETE、PUT 等。他不是在询问将数据发送到评论应用。您可以通过 HTTP POST 完成此操作，但您需要发送身份验证信息、使用 HTTPS 以确保安全，并在另一端的 Web 服务中提供所有身份验证。他所问的只是你想要做的事情的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:32:08.003

post 方法的作用：

> POST 方法
> 
> 请注意，查询字符串（名称/值对）在 POST 请求的 HTTP 消息正文中发送：
> 
> ```
> POST /test/demo_form.asp HTTP/1.1
> Host: w3schools.com
> name1=value1&name2=value2 
> ```
> 
> 关于 POST 请求的其他一些说明：
> 
> 1.  POST 请求永远不会被缓存
> 2.  POST 请求不会保留在浏览器历史记录中
> 3.  不能为 POST 请求添加书签
> 4.  POST 请求对数据长度没有限制

为了您的关心：

> 任何知道对我的帖子发表评论的网址的人都可以使用该网址发布垃圾邮件。

在 POST 方法中，数据不显示在 URL 中。这意味着正在查看或使用 URL 的人将无法知道通过 URL 发送的数据是什么。它只会在用户使用 GET 或带有 URL 的查询字符串时显示。

有关更多信息，您可以[在此处查看](http://www.w3schools.com/tags/ref_httpmethods.asp)。

# java - 3D 三边测量 Java

> ID：15413833
> 
> 赞同：2
> 
> 时间：2013-03-14T15:45:47.493
> 
> 标签：java, geolocation, ip, ip-geolocation, trilateration

我的 Java 应用程序有问题。我在地球上有 3 个点和 3 个距离，我需要找到第 4 个点。在我的代码中，我使用了来自维基百科的一些 equals 来计算三边测量。解决方案应该是：49.195167,16.607208（GoogleMap 上的 GPS）。

如果有人可以帮助找出代码中的错误，我将非常高兴。因为它计数错误的GPS。

十分感谢！

```
 float earthR = 6371;
    float p1x = (float) 61.47;
    float p1y = (float) 23.76;
    float p2x = (float) 42.80;
    float p2y = (float) -1.63;
    float p3x= (float) 39.67;
    float p3y= (float) 20.85;
    float r1 = 1470;
    float r2 = 1617;
    float r3 = 1127;

    float P1x = (float) (earthR*(Math.cos(Math.toRadians(p1x))*Math.cos(Math.toRadians(p1y))));
    float P1y = (float) (earthR*(Math.cos(Math.toRadians(p1x))*Math.sin(Math.toRadians(p1y))));
     float P1z = (float) (earthR*(Math.sin(Math.toRadians(p1x))));

   float P2x = (float) (earthR* (Math.cos(Math.toRadians(p2x))*Math.cos(Math.toRadians(p2y))));
   float P2y = (float) (earthR*(Math.cos(Math.toRadians(p2x))*Math.sin(Math.toRadians(p2y))));
   float P2z = (float) (earthR*(Math.sin(Math.toRadians(p2x))));
   float P3x = (float) (earthR* (Math.cos(Math.toRadians(p3x))*Math.cos(Math.toRadians(p3y))));
   float P3y = (float) (earthR*(Math.cos(Math.toRadians(p3x))*Math.sin(Math.toRadians(p3y))));
   float P3z = (float) (earthR*(Math.sin(Math.toRadians(p3x))));

   float exx = (float) ((P2x-P1x)/Math.sqrt(Math.pow(P2z-P1z, 2)+Math.pow((P2x-P1x),2)+Math.pow((P2y-P1y),2)));
   float exy = (float) ((P2y-P1y)/Math.sqrt(Math.pow(P2z-P1z, 2)+Math.pow((P2x-P1x),2)+Math.pow((P2y-P1y),2)));
   float exz = (float) ((P2z-P1z)/Math.sqrt(Math.pow(P2z-P1z, 2)+Math.pow((P2x-P1x),2)+Math.pow((P2y-P1y),2)));
   float EX = (float) Math.sqrt(Math.pow(exx, 2)+Math.pow(exy, 2)+Math.pow(exz,2));

   float i = (float) Math.sqrt(Math.pow((P3x-P1x)*EX, 2)+Math.pow((P3y-P1y)*EX, 2)+Math.pow((P3z-P1z)*EX, 2));

   float eyx = (float) ((P3x-P1x-(i*exx))/Math.sqrt((Math.pow(P3z-P1z-(i*exz),2))+(Math.pow(P3x-P1x-(i*exx),2))+(Math.pow(P3y-P1y-(i*exy),2))));
   float eyy = (float) ((P3y-P1y-(i*exy))/Math.sqrt((Math.pow(P3z-P1z-(i*exz),2))+(Math.pow(P3x-P1x-(i*exx),2))+(Math.pow(P3y-P1y-(i*exy),2))));
   float eyz = (float) ((P3z-P1z-(i*exz))/Math.sqrt((Math.pow(P3z-P1z-(i*exz),2))+(Math.pow(P3x-P1x-(i*exx),2))+(Math.pow(P3y-P1y-(i*exy),2))));
   float EY = (float) Math.sqrt(Math.pow(eyx, 2)+Math.pow(eyy, 2)+Math.pow(eyz, 2));

   float ezx = (exy*eyz)-(exz*exy);
   float ezy = (exz*eyx)-(exx*eyz);
   float ezz = (exx*eyy)-(exy*eyx);
   float EZ = (float) Math.sqrt(Math.pow(ezx, 2)+Math.pow(ezy, 2)+Math.pow(ezz, 2));

   float d = (float) Math.sqrt((Math.pow(P2x-P1x,2))+(Math.pow(P2y-P1y,2))+Math.pow(P2z-P1z, 2));

   float j = (float) Math.sqrt(Math.pow((P3x-P1x)*EY, 2)+Math.pow((P3y-P1y)*EY, 2)+Math.pow((P3z-P1z)*EY, 2));
   float x = (float) ((Math.pow(r1, 2)-Math.pow(r2, 2)+Math.pow(d, 2))/(2*d));
   float y = (float) (Math.pow(r1, 2)-Math.pow(r3, 2)+Math.pow(i, 2)+Math.pow(j, 2))/(2*j)- (i*x/j);

   float z1 = (float) (Math.pow(r1,2) - Math.pow(x,2) - Math.pow(y,2));
if (z1<0){ z1 = z1*(-1);}
   float z = (float) Math.sqrt(z1);

   float lat = (float) Math.toDegrees(Math.atan2(y,x));
   float lon = (float) Math.toDegrees(Math.asin((z)/earthR));
   System.out.println(lat);
   System.out.println(lon); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T21:30:23.230

首先，如果`z1`小于零，这意味着没有解决方案。您可以将其视为三个不相交的球体。

```
if(z1 < 0) return NO_SOLUTION; 
```

如果它大于零，则意味着您有两个交叉点。

```
if(z1 > 0)
{
    z1 = Math.sqrt(z1);
    z2 = z1*-1;
} 
```

在这一步之后，你有 2 点，它们是：

```
result1 = P1 + exx + eyy + ez*z1;
result2 = P1 + exx + eyy + ez*z2; 
```

这就是第三点发挥作用的地方。您计算这两个结果到 的距离`P3`。

```
if(Math.abs(distance(result1, P3) - r3) < Math.abs(distance(result2, P3) - r3))
   return result1;
else return result2; 
```

这意味着，您选择满足从它到`P3`ie的距离的点`r3`。

# javascript - 在 Knockout JS 中处理多维数组的最佳方法是什么？

> ID：15413834
> 
> 赞同：2
> 
> 时间：2013-03-14T15:45:54.707
> 
> 标签：javascript, knockout.js, knockout-2.0, knockout-validation

**用 Knockout 处理多维数组的标准方法是什么？**

假设您想使用 KnockoutJS 生成一个动态表。表的行和列是从 observableArrays 生成的。每个单元格内的数据也是可观察的（绑定到文本框的数据）。每个单元格内的数据也需要通过敲除验证进行验证。

我正在使用类似的东西来生成我的文本框的值：

```
data-bind="value: $root.qty[$index()][$parentContext.$index()]" 
```

这是 tbody 的两个 foreach 内：

```
<tbody data-bind="foreach: $root.styleColors">
    <tr>
        <td data-bind="text: StyleColorName, visible: $root.showFirstColumn"></td>
        <!-- ko foreach: $root.sizes -->
            <td>
                <input type="text" class="qty" data-bind="value: $root.qty[$index()][$parentContext.$index()]"/>
            </td>
        <!-- /ko -->
    </tr>
</tbody> 
```

它运作良好，但我需要能够根据我正在编辑的项目动态更改数据。一旦我更改列数或行数，就会导致各种问题。[我使用油门](http://knockoutjs.com/documentation/throttle-extender.html)扩展器减少了很多这些问题，方法是让渲染在渲染之前等待行和列都可以观察到。

每次更改当前编辑的项目时，我都会使用简单的 javascript 数组重新生成 qty[][] 多维数组，并且每个实际值都是可观察的。

这是我遇到的一个典型问题的示例。对于这个特定示例，我验证了我的数量值（单元格）的最小值和最大值。但是当我重新绑定包含较少行或较少列的表时，我得到以下异常（未捕获的类型错误：无法读取未定义的属性“规则”）。我正在更改行和列的 observableArrays，绑定 data-bind="$root.qty[$index()][$parentContext.$index()]" 不再有效，因为其中一个索引已超出边界。

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:35:32.613

如果没有看到更多视图模型代码，我无法真正回答您的问题，但您的方式听起来很复杂。- 除非您能弄清楚如何控制淘汰赛评估添加/删除的顺序，否则您将遇到索引问题。我会告诉你我是如何解决桌子问题的。

另外- 即，尤其是8 向下，对javascript 代码修改表非常挑剔。测试测试测试！

我基本上修改了桑德森简单的网格 - 我会检查一下，看看它是否适合你。

[https://github.com/SteveSanderson/knockout/tree/gh-pages/examples/resources](https://github.com/SteveSanderson/knockout/tree/gh-pages/examples/resources)

不要做一个多维数组，而是有一个数组作为你的列，然后另一个数组作为你的行。行数组中的每一项实际上都是一个对象，以不同的列名作为键，对象作为值。

所以....

```
//two columns
this.columns = ko.observableArray(["Column1","Column2"]);

//two Rows
this.rowData = ko.observableArray([
{Column1:{StyleColorName:"Top Left"},Column2:{StyleColorName:"Top Right"}},
{Column1:{StyleColorName:"Bottom Left"},Column2:{StyleColorName:"Bottom Right"}}
]); 
```

和标记

```
<thead>
    <tr>
        <th data-bind="visible:showFirstColumn">First Column</th>
        <!-- ko foreach: $root.sizes -->
        <th data-bind="text:$data" ></th>
        <!-- /ko -->
    </tr>
</thead>
<tbody data-bind="foreach: rowData">
    <tr>
        <td data-bind="text: StyleColorName, visible: $root.showFirstColumn"></td>
        <!-- ko foreach: columns -->
            <td>
                <input type="text" class="qty" data-bind="value:$parent[$data].StyleColorName()"/>
            </td>
        <!-- /ko -->
    </tr>
</tbody> 
```

# c++ - c++ std::exception ...我可以再给我更多吗？

> ID：15413840
> 
> 赞同：-6
> 
> 时间：2013-03-14T15:46:00.867
> 
> 标签：c++, exception, exception-handling, c++11, fstream

我浏览了[http://en.cppreference.com/w/cpp/error/exception](http://en.cppreference.com/w/cpp/error/exception)和[http://en.cppreference.com/w/cpp/io/basic_fstream](http://en.cppreference.com/w/cpp/io/basic_fstream)寻找我可能抛出的 I/O 异常。我知道我可以创建一个自定义异常类，并且有很多网站提供示例代码，但我想要一些专门针对最佳实践的指导。

另外，有没有我应该集中精力使用的图书馆来让我的生活更轻松？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:52:22.033

C++11为低级错误引入了新的头文件[system_error 。](http://en.cppreference.com/w/cpp/header/system_error)可以编写自己的错误类别。

这可能是在现代 C++ 中编写自己的错误处理的良好起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:51:58.167

有很多[预定义的异常](http://en.cppreference.com/w/cpp/error/exception)，但通常，您要么定义自己的异常，要么将 throw`std::runtime_error`作为第一个近似值。

通常，您会扩展`std::runtime_error`，或者它的另一个派生词`std::exception`更合适。

例如，

```
class io_error : public std::runtime_error {
public:
    using std::runtime_error::runtime_error;
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T16:00:47.543

要回答问题的库部分，请[查看](http://www.boost.org/doc/libs/1_53_0/libs/exception/doc/boost-exception.html).`boost::exception`

Boost 异常可以在线程之间移动，并且您可以在`operator<<`捕获（并可选地重新抛出）异常时动态地将信息附加到异常。此外，`BOOST_THROW_EXCEPTION`宏会在您的表达式中记录文件、行和函数名称以进行漂亮的打印。

否则，通常的做法是为您的项目定义自己的例外。但是很难给出更具体的答案，因为我不熟悉您所说的“类似 java 的实用程序”。

作为更一般的说明，C++ 设计原则之一就是做你所要求的，仅此而已，这在某些情况下是一种祝福，在某些情况下意味着更多的工作——这与 java 完全不同。异常的主要目标是用`throw`/中断正常的程序流`catch`，而 C++ 就是这样做的。

如果您只想要一个简单的字符串消息：

```
struct E: std::exception {
  const char* msg;
  E(const char* msg_): msg(msg_) {}
  const char* what() const { return msg; }
};
// ...
throw E("invalid operation name"); 
```

# wordpress - WordPress WooCommerce - 如何处理具有多个送货和账单地址的客户？

> ID：15413842
> 
> 赞同：0
> 
> 时间：2013-03-14T15:46:06.973
> 
> 标签：wordpress, e-commerce, woocommerce

在此先感谢您的帮助。我正在与客户合作开发一种新的电子商务解决方案，而 WooCommerce 一直是我的最爱。但这个客户不同——他们的客户有时有 10 个或更多的送货地址和帐单地址。一般来说，您将如何为此编写自定义脚本？我只需要一个好的起点就可以开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T04:08:56.030

只需使用过滤器添加额外的地址`woocommerce_my_account_get_addresses`

# extjs - ext.net 我如何在同一列上使用超过 data_index

> ID：15413845
> 
> 赞同：1
> 
> 时间：2013-03-14T15:46:10.350
> 
> 标签：extjs, ext.net

我有以下内容：

```
<ext:RecordField Name="ID" />
                    <ext:RecordField Name="UserName" />
                    <ext:RecordField Name="FirstName" />
                     <ext:RecordField Name="LasttName" />
            i want use  FirstName& LasttName on : 

 <ext:Column ColumnID="Name" Sortable="false" DataIndex="????"
     Resizable="false" MenuDisabled="true"/> 
```

**我需要的是在同一列上使用超过 data_index**是可能的，我该如何实现？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:18:04.273

尝试这样的事情：

```
//In your head:

<script type="text/javascript">
var myRenderer = function(value, metadata, record) {
    return record.get('FirstName') + ' ' + record.get('LastName');
}
</script>

<ext:Column ColumnID="Name" Sortable="false" Resizable="false" MenuDisabled="true">
    <Renderer Fn="myRenderer" />
</ext:Column> 
```

# debugging - 在 chrome debbger 中编辑 chrome watch 值

> ID：15413848
> 
> 赞同：1
> 
> 时间：2013-03-14T15:46:25.030
> 
> 标签：debugging, google-chrome, google-chrome-devtools

我是 Chrome devtool 中脚本调试的新手。谁能告诉我如何编辑 chrome watch 变量值？

在 Chrome 中调试时是否有任何工具可以更改脚本代码？

作为示例，我添加到监视列表变量：

```
varibleToEditInChrome : "20" 
```

我需要将其更改如下：

```
varibleToEditInChrome : "30" 
```

允许更改，但是当我编辑它时，它显示为：

```
varibleToEditInChrome : "30" : "30" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:21:58.490

这是一个 80% 的完整功能。应该在一个月内到货。

# jquery - 循环遍历 h1 元素并仅输出前 140 个附加省略号的字符

> ID：15413852
> 
> 赞同：0
> 
> 时间：2013-03-14T15:46:32.877
> 
> 标签：jquery, character-limit

我想遍历一组 html 元素，在本例中为 H1s，计算字符数，如果字符数大于 140，我想截断字符并仅输出前 140 个字符，然后是省略号。我一直在通过控制台测试我的代码，到目前为止已经想出了这个。

```
$( "h1.evTitle" ).each(function( truncate ) {
     console.log($(this).text().substring(0, 140).split(" ").slice(0, -1).join(" ") + "...");
}); 
```

这可以正常工作，但它会将省略号添加到每个字符串上，而不管长度如何。关于 if 语句仅将其应用于长度大于 140 个字符的字符串的任何想法？请记住，这将是一系列 H1，而不仅仅是其中一个。

这是我的最终代码，以防有人也想这样做。

```
$('h1').each(function () {
    if ($(this).text().length>140) {
        $(this).text($(this).text().substring(0, 140).split(" ").slice(0, -1).join(" ") + "...");
    }
}); 
```

我添加了`.split(" ")`将字符串分隔成一个包含每个单词的数组，然后我用来`.slice(0, -1)`删除数组中的最后一项（这样我就可以从部分单词中删除任何垃圾字符，然后用来`.join(" ")`将该数组重新变成一个字符串.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:48:42.650

先检查一下：

```
var str = $(this).text();
if (str.length > 140) {
    str = str.substring(0, 140) + "...";
} 
```

由于您使用的是 jQuery，因此您可能会`$.trim`在其中抛出一两个：

```
var str = $.trim($(this).text());
if (str.length > 140) {
    str = $.trim(str.substring(0, 140)) + "...";
} 
```

第一个删除原始上的前导和尾随空格，第二个防止省略号前面有空格。

另请注意，有一种更简单的截断和添加省略号的方法（如上所示）。

如果您使用拆分/加入的目标是删除多余的空格，我认为不会，但这会：

```
var str = $.trim($(this).text());
str = str.replace(/  +/g, " ");
if (str.length > 140) {
    str = $.trim(str.substring(0, 140)) + "...";
} 
```

[实例](http://jsbin.com/ohoben/1)| [源](http://jsbin.com/ohoben/1/edit) *（在示例中，我将结果写回元素）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:48:36.507

只需`$(this).text().length > 140`在添加省略号之前检查是否。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:50:45.477

```
$('h1').each(function () {
    if ($(this).text().length>140) {
        $(this).text($(this).text().substr(0, 140) + "...");
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Cctfj/1/)**

# rest - REST + HTTP Basic Auth - 需要对每个请求进行用户查找？

> ID：15413853
> 
> 赞同：2
> 
> 时间：2013-03-14T15:46:36.247
> 
> 标签：rest, basic-authentication

我正在为我的网络应用程序制作一个 REST API，因为它应该是无状态的，所以我正在使用 HTTP Basic Auth 发送用户的凭据。

我需要通过在我的用户数据库中查找每个请求来验证用户名/密码是否正确？考虑到我可以验证一次，如果我打破“无状态规则”，这似乎是很多不必要的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:51:14.920

如果您不使用会话 cookie 进行身份验证，则需要验证每个请求。但是您可以在服务器代码中的某处缓存凭据，这样您就不需要在每次调用时查询数据库。

基本上你应该记住不要将数据存储太久，例如用户可以更改她/他的凭据。如果您有缓存不匹配，则需要进行另一个数据库查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:51:44.090

相反，您可以在验证凭据的地方保留用户名/密码的全局缓存。您的请求仍然是无状态的，但您将获得比在每个请求中针对数据库（或其他来源）验证用户更好的性能。

另一种选择是创建一个登录方法，您可以在其中返回一个加密的身份验证令牌。之后，所有其他方法都需要这个令牌并验证它而不是密码。这种方法还使您能够使用不同的身份验证机制，而不仅仅是 http 基本。

# c# - 有没有办法将 linq 表达式中的多个值与通用列表进行比较？

> ID：15413854
> 
> 赞同：5
> 
> 时间：2013-03-14T15:46:42.453
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在查询一个复杂的实体对象，它的值需要与通用列表进行比较才能选择正确的对象。我正在尝试找到一种方法来将实体对象中的 Id 值与列表中的所有值进行比较，而不必将查询放在循环中。

这就是我所拥有的：

通用列表：

```
 List<int> input = new List<int>()
                           {
                                 3,4,5....
                           }; 
```

我的查询 - 不起作用：

```
 ManagerToGetRepo mgr = new ManagerToGetRepo();
      var result = mgr.GetAllData()
                      .Where(a=>a.someObject.anotherObj.Id == input.Values); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:47:49.877

只需使用`List<T>.Contains`方法查看每个值是否在集合中

```
var result = mgr.GetAllData()
                .Where(a => input.Contains(a.someObject.anotherObj.Id)); 
```

# batch-file - 批处理：从其他变量中设置一个变量

> ID：15413864
> 
> 赞同：1
> 
> 时间：2013-03-14T15:47:12.010
> 
> 标签：batch-file

对于批量退伍军人来说，我正在尝试做的事情应该很简单。我有一个环境变量列表：

核心 1 核心 2 核心 3 等

我正在尝试将它们设置为一个名为 HOSTS 的新变量。每个变量都应该用空格分隔。所以 HOSTS = "CORE1 CORE2 CORE3"

```
for /L %%x in (1,1,20) do (
    IF "!CORE%x!"=="" (
        goto continue
    )
    IF NOT "!CORE%x!"=="" ( 
        set HOSTS = "%HOSTS% !CORE%x!"
    )
) 
:continue 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:59:30.773

如果我正确理解了您的问题，您希望将多个变量的内容（如果已设置）连接`CORE1`到`CORE20`一个变量`HOSTS`中，并用空格分隔各个值。你可以这样做（我添加了一些示例值来制作可运行的示例）：

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion
SET CORE1=1
SET CORE3=3
SET CORE4=4
SET CORE6=6
SET CORE8=8
SET CORE12=12
SET CORE17=17

for /L %%x in (1,1,20) do (
    IF "!HOSTS!"=="" ( 
        :: avoid leading space on first value
        SET HOSTS=!CORE%%x!
    ) ELSE (
        IF NOT "!CORE%%x!"=="" ( 
            SET HOSTS=!HOSTS! !CORE%%x!
        )
    )
)

ECHO %HOSTS% 
```

该脚本将输出：

```
1 3 4 6 8 12 17 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:00:31.173

这对你有用吗？

```
setlocal enabledelayedexpansion
set inc=0
:heck
set /a "inc+=1"
if defined CORE%inc% (
    set "HOSTS=%HOSTS% !CORE%inc%!
    goto heck
)
rem remove leading space from %HOSTS%
set HOSTS=%HOSTS:~1% 
```

这是一个更完整的测试脚本。

```
@echo off
setlocal enabledelayedexpansion

set CORE1=foo
set CORE2=bar
set CORE3=baz
set CORE4=qux
set CORE5=quux
set CORE6=corge
set CORE7=grault
set CORE8=garply
set CORE9=waldo
set CORE10=fred
set CORE11=plugh
set CORE12=xyzzy
set CORE13=thud

set inc=0
:heck
set /a "inc+=1"
if defined CORE%inc% (
    set "HOSTS=%HOSTS% !CORE%inc%!
    goto heck
)
rem remove leading space from %HOSTS%
set HOSTS=%HOSTS:~1%

echo %HOSTS% 
```

示例输出：

```
C:\Users\me\Desktop>test
foo bar baz qux quux corge grault garply waldo fred plugh xyzzy thud 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:04:53.920

```
@ECHO OFF
SETLOCAL
:: set 'COREn' to a value for testing
FOR /l %%i IN (1,1,10) DO SET core%%i=str%%i
::
(SET hosts=)
FOR /f "tokens=2delims==" %%i IN ('set core') DO CALL :addval %%i
ECHO hosts=%hosts%
GOTO :eof

:addval
IF DEFINED hosts (SET hosts=%hosts% %1) ELSE (SET hosts=%1)
GOTO :EOF 
```

您是否关心元素的精确顺序？这将按 envvar 名称的字母顺序累积 vars CORE* 的所有值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:44:48.073

```
set HOSTS=%CORE1%
for /L %%x in (2,1,20) do (
   if defined CORE%%x (
      set "HOSTS=!HOSTS! !CORE%%x!"
   )
) 
```

安东尼奥

# sql - 使用 Toad 从两个不同的数据库服务器查询和交叉匹配数据

> ID：15413865
> 
> 赞同：0
> 
> 时间：2013-03-14T15:47:13.593
> 
> 标签：sql, oracle, toad

我刚刚被分配了一个使用 SQL 的小任务，我已经非常过时了，我知道一些非常基本的东西，这个任务非常乏味，我相信有比一个一个更简单的方法来完成它.

**这是问题：**

公司在不同的服务器上有两个数据库（一个是 Oracle），我使用 Toad for Oracle 来查询这两个数据库。

我有一个 Excel 文件，其中包含 6k 收据编号列表，这些收据编号应该已转移到 Oracle，但由于某种原因，并非所有这些编号都已转移，因此我需要检查两个数据库中的每个编号，然后检查其他一些字段比如账单金额。现在可以忽略最后一部分。

我更喜欢在 SQL 中构建查询，或者在 excel 中构建一些公式，我可以将数据粘贴到三列中，第一个 DB 的结果和第二个 DB 的结果并自动交叉检查。哦，差点忘了，所有数据源中都重复了一些数字：S

任何帮助将不胜感激，希望我解释得足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:06:01.173

有几种方法可以做到这一点。考虑到你的技能，我会这样做：

1.  将数据粘贴到 Excel 中的 N 列中。
2.  使用 N 列中的数据在第一行创建 SQL 语句。应该看起来像这样：`=concat("select ", A1 , " from dual where not exists (select 1 from receipts_table where receipt_id = '", A1, "');"`为要检查的其他字段添加额外的 where 子句。
3.  将 SQL 复制/粘贴到 Toad 并检查它是否运行。如果收据丢失或在 Oracle 中没有正确的值，它应该打印receipt_id。
4.  在 Excel 中使用“Fill->Down”为每张收据创建一个 SQL。
5.  将 6k SQL 语句复制到 Toad 并将它们作为脚本运行。
6.  找到产生输出的行。这些是丢失的收据。

# html - 引导导航栏的固定宽度背景图像

> ID：15413866
> 
> 赞同：1
> 
> 时间：2013-03-14T15:47:18.233
> 
> 标签：html, css, twitter-bootstrap

如何设置 790px 的固定宽度图像？我怎样才能让它在显示完整图像的地方也有响应？我的代码如下所示。

```
 <div class="span10 offset1">
                <div class="navbar">
                <div class="navbar-inner">
                    <div class="container">
                        <div style="text-align: center">
                            <ul class="nav">
                                <li class="active"><a href="#">Home</a></li>
                                <li><a href="#about">About</a></li>
                                <li><a href="#contact">Contact</a></li>

                            </ul>

                        </div>
                    </div>
                </div>
            </div>
     </div> 
```

我的CSS是：

```
.navbar-inner{

    background-color: transparent;
    background-image: url("../img/nav_bg.png");
    background-repeat: no-repeat;
    background-position: center center;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
    height: 62px;
    width:88%;
    text-align: center;
    margin: 0 auto;
    min-width: 320px;
    max-width: 790px;
    border: 0;

} 
```

这是我 ![导航背景](../Images/8e7bacdaa49f776a7c9f81d82f9bc6b0.png) 在 iPad 或 iPhone 上看到的图像，它会剪切图像（两侧的按钮）并显示零件。像波纹管.. ![调整窗口大小后](../Images/7baa2c62bc31cd1676397761938cfa31.png) 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:55:47.303

您需要使用 CSS3`background-size`属性，并将其设置为`cover`. 正如 João 所指出的，这仅适用于支持此属性的浏览器（IE9+、Firefox 4+、Opera、Chrome 和 Safari 5+）。

# HTML

```
<div class="span10 offset1">
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <div style="text-align: center">
                    <ul class="nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
             </div>
         </div>
    </div>
</div> 
```

# CSS

```
.navbar-inner {
  background-size:cover;
} 
```

这是一个[jsFiddle 展示它的实际操作](http://jsfiddle.net/brettdewoody/9xjeT/)。

# c++ - Qt4：使用 QGraphicsView 的“子视图”

> ID：15413869
> 
> 赞同：1
> 
> 时间：2013-03-14T15:47:30.863
> 
> 标签：c++, qt, qt4

使用 QGraphicsView/QGraphicsScene/QGraphicsItem，我需要创建另一个 QGraphicsItem 的多个视图。

换句话说，在 QGraphicsScene 中，我需要创建多个 QGraphicItem，它们显示存储在屏幕外某处的其他 QGraphicsItem 的一部分。它有点像模型/视图框架，其中一个 QGraphicsItem 充当模型，而其他 QGraphicsItem 充当视图 - 显示（剪辑）其他项目的部分。（见附图） ![图片](../Images/b461f1139543ac1a285856240eb7bc90.png)

我怎样才能做到这一点？请注意，“视图”不应该是只读的。每个视图都应该对鼠标移动、键盘输入做出反应，并且应该在模型中的某些项目发生变化时正确地重新绘制自己。

最愚蠢的方法是将隐藏项目绘制到 QImage 上，然后在其他项目中显示该 QImage 的部分。然而，这将意味着大量的内存浪费。还有其他方法吗？

Qt 4.8，VC2008 express，Windows平台。

- 编辑 -

*我需要在*场景中显示部分场景（或屏幕外 QGraphicsItem）。这有点像 3D 游戏中的门户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:59:54.623

经过一些研究，我发现（据我所知）Qt 没有针对这种情况的（记录的）方法。

所以我决定写几个我自己的方法

1.  将 QGraphicsItems 层次结构绘制到任何 QPaintDevice（遍历子层次结构 + 为所有涉及的项目调用 paint() 方法）
2.  将任何区域的输入（鼠标/键盘）事件转换为选定的 QGraphicsItem。

这实际上可能有点棘手，因为我需要处理剪裁（按形状剪裁子项的项目）和重绘复杂的组件，如 QGraphicsWidget，但据我所知可以做到。此外，这样做我将失去 QGraphicsView 提供的 BSP 优化，但对于我的特定场景来说，这应该是一个可以接受的折衷方案。

# c# - 除非我重新启动计算机，否则 HttpWebRequest 每次都无法连接

> ID：15413874
> 
> 赞同：1
> 
> 时间：2013-03-14T15:47:43.563
> 
> 标签：c#, .net, httpwebrequest, system.net.webexception

我有一个需要连接到远程 SAP 服务器的 WPF C# 应用程序。我在两台计算机（同一网络）上运行该应用程序，并且我知道服务器是可访问的。

起初，计算机 A 可以使用 Web 请求正常连接（经过多次尝试，它们都可以正常工作）。随机（似乎；我无法复制），所有 Web 请求都将失败，并显示消息“无法连接到远程服务器”（类型 System.Net.WebException）。在浏览器中导航到 URL 加载正常；只有应用程序无法连接。引发异常的方法是 HttpWebRequest.GetRequestStream。

即使多次重启应用程序，所有 HttpWebRequests 仍然无法连接。我们有多个 SAP 服务器，尝试连接到其中任何一个都会得到相同的结果。同时，计算机B（我的开发机器）上的应用程序仍然可以毫无问题地连接到任何服务器。只有在完全重新启动计算机 A 后，它才能再次连接。

到目前为止，这已经发生在两台不同的计算机上。这两次，解决它的唯一方法是重新启动计算机。

这是一些代码：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "POST";
request.ContentType = "text/xml; charset=utf-8";
request.ContentLength = contentLength;
request.Headers.Add("Authorization", GetAuthHeader());
request.Timeout = GetTimeout();

Stream post = request.GetRequestStream();//this line throws the exception
//...write to stream...
post.Close(); 
```

编辑：忽略了响应部分：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream responsedata = response.GetResponseStream();
//...read all response data...
if (responsedata != null)
    responsedata.Close(); 
```

Edit2：所以我注释掉了所有对 Close 的调用，并提出了几十个请求。我还删除了获取响应的代码并提出了更多请求。在这些测试中，我没有收到任何异常，并且一切正常。

除了这些结果，我可以理解这样的事情可能会破坏我的程序，但我不明白为什么在重新启动程序或尝试联系不同的远程服务器后它仍然会被破坏。看起来 .NET 框架中出现了一些问题，除非我重新启动整个机器，否则它无法自行解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:50:23.687

在这里，

尝试连接时，Wireshark 日志没有显示任何内容，因此我认为其他一些程序完全阻止了我的 EXE 网络访问。

原来是 Bitdefender 阻止了它。我卸载了它，一切都开始工作了。我不知道为什么它决定开始阻止它，但这就是答案。

# php - 如何确定用户是否通过点击“后退”或“前进”浏览器按钮登陆页面？

> ID：15413876
> 
> 赞同：1
> 
> 时间：2013-03-14T15:47:46.923
> 
> 标签：php, javascript, forms, validation

我有一个表单，需要能够在每次加载时获取数据，所以我不能为此使用任何会话或唯一令牌我希望用户能够在需要时双重提交相同的表单，但我不需要如果用户在浏览器上点击“后退”然后“前进”，则希望存储旧条目。该脚本使用 PHP，但 JavaScript 解决方案与服务器端解决方案一样好。
编辑：表单具有 action="" 因此用户将被重定向到同一页面，这就是为什么它在后退操作中是明智的。例如：
我们有一个发票表格，所以您添加提交的第 1 项，然后您添加第 2 项提交，然后再次添加第 1 项，这样数量就会增加，依此类推，您不知道发票有多少项...而且您必须留在同一个表单页面上。

# perl - 使用 perl 创建一个简单的 PDF 文件

> ID：15413882
> 
> 赞同：0
> 
> 时间：2013-03-14T15:48:10.667
> 
> 标签：perl, pdf, cpan

我在我的 perl 脚本中解析一个文本文件，并想将我的哈希值变成一个 pdf 文件。我真的不需要对数据进行格式化，只是一些纯文本会出现在 pdf 文件中。我猜对于这个简单的任务来说，使用一个沉重的 cpan 模块将是一种过度杀伤力。

在不使用任何外部模块的情况下，最好的方法是什么。

我在使用 perl 5.8 的 AIX 5.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:49:30.110

使用 PDF::API2 包 - 请参阅[Oreilly 网站上的详细信息](http://oreilly.com/pub/h/2429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:58:07.173

不幸的是，PDF 不是一种简单的格式。一方面，它是二进制的，内容存储在树结构中。但是，如果您有这样的工具，[`enscript`](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=%2Fcom.ibm.aix.cmds%2Fdoc%2Faixcmds2%2Fenscript.htm)您可以轻松地从简单的文本输入创建 PS 文件，然后您可以将其转换为 PDF。

# heroku - Heroku 评估预编译失败，并出现 coffee-rails-3.2.2

> ID：15413884
> 
> 赞同：2
> 
> 时间：2013-03-14T15:48:16.450
> 
> 标签：heroku, ruby-on-rails-3.2, asset-pipeline, assets, cedar

我最近在 Heroku 上遇到了这个问题，似乎无法弄清楚如何纠正它。该应用程序是在 ruby​​ 1.9.3 上运行的 Rails 3.2.x 应用程序。它在本地运行良好，但是当部署到 heroku 时，资产的预编译阶段失败。heroku web dyno stack 是 cedar。

我已经在 application.rb 文件中设置了 'config.assets.initialize_on_precompile = false'。

以下是部署时收到的错误。

```
Counting objects: 7, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 438 bytes, done.
Total 4 (delta 3), reused 0 (delta 0)

-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.3.2
    Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
    Using rake (10.0.3)
    Using i18n (0.6.4)
    Using multi_json (1.6.1)
    Using activesupport (3.2.12)
    Using builder (3.0.4)
    Using activemodel (3.2.12)
    Using erubis (2.7.0)
    Using journey (1.0.4)
    Using rack (1.4.5)
    Using rack-cache (1.2)
    Using rack-test (0.6.2)
    Using hike (1.2.1)
    Using tilt (1.3.4)
    Using sprockets (2.2.2)
    Using actionpack (3.2.12)
    Using mime-types (1.21)
    Using polyglot (0.3.3)
    Using treetop (1.4.12)
    Using mail (2.4.4)
    Using actionmailer (3.2.12)
    Using arel (3.0.2)
    Using tzinfo (0.3.35)
    Using activerecord (3.2.12)
    Using activeresource (3.2.12)
    Using bcrypt-ruby (3.0.1)
    Using coffee-script-source (1.5.0)
    Using execjs (1.4.0)
    Using coffee-script (2.2.0)
    Using rack-ssl (1.3.3)
    Using json (1.7.7)
    Using rdoc (3.12.2)
    Using thor (0.17.0)
    Using railties (3.2.12)
    Using coffee-rails (3.2.2)
    Using orm_adapter (0.4.0)
    Using warden (1.2.1)
    Using devise (2.2.3)
    Using jquery-rails (2.2.1)
    Using pg (0.12.2)
    Using bundler (1.3.2)
    Using rails (3.2.12)
    Using rubygems-bundler (1.1.1)
    Using sass (3.2.6)
    Using sass-rails (3.2.6)
    Using uglifier (1.3.0)
    Your bundle is complete! It was installed into ./vendor/bundle
    Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
    Running: rake assets:precompile
    rake aborted!
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/coffee-rails-3.2.2/lib/rails/generators/coffee/assets/templates/javascript.js.coffee isn't in paths: /tmp/build_18zpsldi56ucr/app/assets/images, /tmp/build_18zpsldi56ucr/app/assets/javascripts, /tmp/build_18zpsldi56ucr/app/assets/stylesheets, /tmp/build_18zpsldi56ucr/vendor/assets/fonts, /tmp/build_18zpsldi56ucr/vendor/assets/javascripts, /tmp/build_18zpsldi56ucr/vendor/assets/stylesheets, /tmp/build_18zpsldi56ucr/vendor/assets/venera_images, /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/coffee-rails-3.2.2/lib/assets/javascripts, /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/jquery-rails-2.2.1/vendor/assets/javascripts
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/asset_attributes.rb:42:in `logical_path'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:160:in `find_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:111:in `block in resolve_dependencies'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `each'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `resolve_dependencies'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:97:in `build_required_assets'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:16:in `initialize'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `new'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:16:in `initialize'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/static_compiler.rb:19:in `block in compile'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/static_compiler.rb:18:in `compile'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:56:in `internal_precompile'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
    /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
    Tasks: TOP => assets:precompile:primary
    (See full trace by running task with --trace)
    Precompiling assets failed, enabling runtime asset compilation
    Injecting rails31_enable_runtime_asset_compilation
    Please see this article for troubleshooting help:
    http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting
-----> Rails plugin injection
    Injecting rails_log_stdout
    Injecting rails3_serve_static_assets
-----> Discovering process types
    Procfile declares types     -> (none)
    Default types for Ruby/Rails -> console, rake, web, worker

-----> Compiled slug size: 20.8MB
-----> Launching... done, v25 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'jquery-rails', '~> 2.2.1'

gem 'rubygems-bundler', '~> 1.1.1'
gem 'devise', '~> 2.2.3'

group :development, :test do
  gem 'sqlite3', '~> 1.3.7'
  gem 'rspec-rails', '~> 2.13.0'
  gem 'annotate', '~> 2.5.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', '~> 3.2.6'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '>= 1.3.0'
end

group :test do
  gem 'capybara', '1.1.2'
end

group :production, :staging do
  gem 'pg', '0.12.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# To use debugger
# gem 'debugger' 
```

应用程序.css

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
 *= require_tree ../../../vendor
 */ 
```

应用程序.js

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require_tree ../../../vendor 
```

这应该在 ruby​​ 1.9.3 上运行，但我在 gems 路径中看到 /tmp/build_18zpsldi56ucr/vendor/bundle/ruby/1.9.1/gems/ 。不确定这是否是问题所在。以前有没有人在heroku上遇到过这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T10:56:44.270

由于该`:assets`组下的宝石不用于生产，因此您应该将该`gem 'coffee-rails'`行移出该组。

另外我认为您的 application.js 中不需要这一**行**`*= require_tree ../../../vendor`

# xml - 在 dtd 中使元素可选

> ID：15413885
> 
> 赞同：0
> 
> 时间：2013-03-14T15:48:18.353
> 
> 标签：xml, dtd

如果一个元素在 dtd 中声明如下：

```
<!ELEMENT cite.query (#PCDATA|cite.query | citator.treatment> 
```

我收到一个错误，说`cite.query`must have`citator.treatment`那么我如何使它成为可选`cite.query`的`citator.treatment`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:56:32.957

由于 的内容模型`cite.query`是混合的（#PCDATA 和元素），您需要在组外使用星号：

```
<!ELEMENT cite.query (#PCDATA|cite.query|citator.treatment)*> 
```

# java - 制作四元数相机

> ID：15413886
> 
> 赞同：2
> 
> 时间：2013-03-14T15:48:19.553
> 
> 标签：java, opengl, camera, lwjgl, quaternions

我希望能够创建一个第一人称的相机，并且可以处于两种模式之一。它要么固定在特定位置（标准的“wasd”移动围绕该点移动），要么具有自由查看，其中移动不受限制在一个点周围盘旋，鼠标可用于查看任何地方。（虽然只能向上/向下看，因为我不想要一个六自由度的相机来下降）这意味着我目前不想滚动。

有人可以指导我完成实现这种事情所需的基础知识吗？我目前正在使用 LWJGL，因此我可以访问它们提供的 Vector* 和 Matrix* 类，以及我自己的 Quaternion 类，它可以做一些 LWJGL 没有做的事情。还假设我有一个方法lookAt，它的坐标与OpenGL的gluLookAt（eyex，eyey，...，upy，upz）完全相同，这就是我想要构建矩阵/矩阵的地方。还假设生成的矩阵/矩阵将在版本 330 着色器中使用，其中

```
layout(location = 0) in vec4 position;
uniform mat4 camera;
uniform mat4 projection;
uniform mat4 model;
// ...
gl_Position = projection * camera * model * (position); 
```

是一些代码。我是保持当前的操作顺序，还是需要以任何方式更改它以获得正确的 gl_Position？

四元数代码：

```
public class Quaternion {
    public float x, y, z, w;

    public Quaternion() {
        this.x = 0.0f;
        this.y = 0.0f;
        this.z = 0.0f;
        this.w = 1.0f;
    }

    public Quaternion(Vector3f v, float w) {
        this.x = v.x;
        this.y = v.y;
        this.z = v.z;
        this.w = w;
    }

    public Quaternion(float x, float y, float z, float w) {
        this.x = x;
        this.y = y;
        this.z = z;
        this.w = w;
    }

    public Quaternion(Quaternion other) {
        this.x = other.x;
        this.y = other.y;
        this.z = other.z;
        this.w = other.w;
    }

    public float length() {
        return (float)Math.sqrt(x * x + y * y + z * z + w * w);
    }

    public Quaternion normalize() {
        return Quaternion.normalize(new Quaternion(this));
    }

    public Quaternion conjugate() {
        return Quaternion.conjugate(new Quaternion(this));
    }

    public Quaternion mult(Quaternion other) {
        return Quaternion.mult(this, other, new Quaternion());
    }

    public static Quaternion fromAxisAngle(Quaternion q, Vector3f axis, float angle) {
        float sinAngle2 = (float)Math.sin(angle / 2.0);
        q.x = axis.x * sinAngle2;
        q.y = axis.y * sinAngle2;
        q.y = axis.y * sinAngle2;
        q.w = (float)Math.cos(angle / 2.0);
        return q;
    }

    public static Matrix4f toMatrixUnit(Quaternion q) {
        Matrix4f ret = new Matrix4f();

        ret.m00 = 1 - 2 * q.y * q.y - 2 * q.z * q.z;
        ret.m01 = 2 * q.x * q.y - 2 * q.w * q.z;
        ret.m02 = 2 * q.x * q.z + 2 * q.w + q.y;
        ret.m03 = 0;

        ret.m10 = 2 * q.x * q.y + 2 * q.w * q.z;
        ret.m11 = 1 - 2 * q.x * q.x - 2 * q.z * q.z;
        ret.m12 = 2 * q.y * q.z + 2 * q.w * q.x;
        ret.m13 = 0;

        ret.m20 = 2 * q.x * q.z - 2 * q.w * q.z;
        ret.m21 = 2 * q.y * q.z - 2 * q.w * q.x;
        ret.m22 = 1 - 2 * q.x * q.x - 2 * q.y * q.y;
        ret.m23 = 0;

        ret.m30 = 0;
        ret.m31 = 0;
        ret.m32 = 0;
        ret.m33 = 1;

        return ret;
    }

    public static Matrix4f toMatrix(Quaternion q) {
        throw new UnsupportedOperationException("Use toMatrixUnit");
//        Matrix4f ret = new Matrix4f();
//        return ret;
    }

    public static Quaternion mult(Quaternion A, Quaternion B, Quaternion C) {
        C.x = A.w*B.x + A.x*B.w + A.y*B.z - A.z*B.y;
        C.y = A.w*B.y - A.x*B.z + A.y*B.w + A.z*B.x;
        C.z = A.w*B.z + A.x*B.y - A.y*B.x + A.z*B.w;
        C.w = A.w*B.w - A.x*B.x - A.y*B.y - A.z*B.z;
        return C;
    }

    public static Quaternion normalize(Quaternion q) {
        float len = q.length();
        q.x = q.x / len;
        q.y = q.y / len;
        q.z = q.y / len;
        q.w = q.w / len;
        return q;
    }

    public static Quaternion conjugate(Quaternion q) {
        q.x = -q.x;
        q.y = -q.y;
        q.z = -q.z;
        return q;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:04:26.197

如果您在 Google 上搜索，有大量资源可用于实现基于四元数的相机。

*   [Arcsynthesis](http://www.arcsynthesis.org/gltut/Positioning/Tut08%20Quaternions.html)（一定要点击下一步等）
*   [游戏开发网](http://www.gamedev.net/page/resources/_/technical/math-and-physics/a-simple-quaternion-based-camera-r1997)
*   [维基百科](http://content.gpwiki.org/index.php/OpenGL%3aTutorials%3aUsing_Quaternions_to_represent_rotation)

如果您使用 C++，我建议使用[GLM](http://glm.g-truc.net/)（OpenGL 数学）来支持他们的 vec/mat/quat（如果您只是在学习，它胜过在您的算术中出现错误。）

# c# - 嵌套和混合代码块的正确剃刀语法是什么？

> ID：15413890
> 
> 赞同：1
> 
> 时间：2013-03-14T15:48:29.917
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, razor-2

我有嵌套并与 html 和 javascript 混合的剃刀语法。

它运行良好，除了当我执行自动代码格式时，它`}`总是被推到不合适的位置。

```
@section js{
    <script type="text/javascript">
        $(document).ready(function () {

            @if (ViewBag.Searched && ViewBag.Found)
            {
                @:$('#found').show(); $('#permit-info').show();

                @if (ViewBag.PendingRequest)
                {
                    @:$('#request-info').hide(); $('#report-info').show();
                }
                else
                {
                    @:$('#request-info').show(); $('#report-info').hide();
                }
            }
            else
            {
                @if (ViewBag.Searched)
                {
                    @:$('#not-found').show();
                            } // <----- PROBLEM. this } doesn't stay at the right place.
            }
        });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:50:46.793

`@`你在这条线上有一个额外的：

```
@if (ViewBag.Searched) 
```

这行：

```
@if (ViewBag.PendingRequest) 
```

因为您已经在剃须刀代码中（由父`if`/`else`语句管理）。

实际上，这仍然会破坏格式。**虽然**，如果您尝试使用`<text>`标签而不是`@:`它的作品。试试这个：

```
$(document).ready(function () {

        @if (ViewBag.Searched && ViewBag.Found)
        {
            <text>$('#found').show(); $('#permit-info').show();</text>

            if (ViewBag.PendingRequest)
            {
                <text>$('#request-info').hide(); $('#report-info').show();</text>
            }
            else
            {
                <text>$('#request-info').show(); $('#report-info').hide();</text>
            }
        }
        else
        {
            if (ViewBag.Searched)
            {
                <text>$('#not-found').show();</text>
            }
        }
    }); 
```

**请注意：Visual Studio 总是很差地缩进剃刀视图 :)**

# validation - 验证时带有 FacesMessage 的图标

> ID：15413893
> 
> 赞同：0
> 
> 时间：2013-03-14T15:48:42.257
> 
> 标签：validation, jsf, primefaces, icons

PrimeFaces/JSF 2.0

当您使用 p:message.... 并说您的 outputText 具有 required="true" 时，如果用户将该字段留空，您会在该字段右侧显示的消息中看到错误图标。

```
<!--  NAME -->
  <p:panelGrid styleClass="noBorders" columns="2" columnClasses="inputText" style="width:600px">
   <h:inputText id="Name" size="60" maxlength="70" required="true" styleClass="#{not     component.valid ? 'ui-input-invalid' : ''}" style="width: 300px" value="#{tinRequestBean.name}" >
    <f:validator validatorId="gov.irs.eservices.tm.validations.NameValidator" />
   </h:inputText> 
   <p:message for="Name" display="default" style="color: red" />
  </p:panelGrid> 
```

但是，如果您使用 Validator 以某种方式检查字段的内容，标准 FacesMessage，即使使用 FacesMessage.SEVERITY_ERROR，错误图标也不会出现。

```
 if (msgStr.length() > 0) {
   FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "TIN: Validation error: "   msgStr, null);
   throw new ValidatorException(msg);
  } 
```

有谁知道创建带有图标的 FacesMessage 的方法？它肯定不在构造函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:05:05.437

设置`display="both"`on `<p:message/>`（或完全不考虑该属性，`both`这是默认设置）。这将显示文本和图标。据我所知，`default`这不是一个有效的选择

# iphone - 如何在当前类中实现另一个类init？

> ID：15413896
> 
> 赞同：0
> 
> 时间：2013-03-14T15:48:48.120
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

你好，我对此有点陌生。我有一个背景类，它在 init 方法中设置背景，在我的主类中，我想通过使用我创建的背景类来设置背景。对这个简单的问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:09:27.747

在 main 中，创建一个

-（id）initWithBackground：（背景*）背景；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:02:07.040

可能就像在主类的初始化代码中编写这个一样简单？

```
[[Background alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:14:11.300

将属性添加到 Background 类类型的主类，然后在要设置背景时从主类分配和初始化它。

在您的主类标题中：

```
@property(strong, nonatomic) Background *backgroundInstance; 
```

在您的主类实现中：

```
- setBackground {
  backgroundInstance = [[Background alloc] init]}; 
```

我不确定为什么你需要一个背景类。

# javascript - 使用 processing.js 使用速度在 javascript 中移动矩形

> ID：15413898
> 
> 赞同：1
> 
> 时间：2013-03-14T15:48:52.163
> 
> 标签：javascript, html, physics, processing, processing.js

我正在使用 javascript 和 processing.js 进行简单的 pong 克隆。我为桨制作了课程，然后将其扩展为由玩家控制的课程。目前，我正在尝试在玩家控制的类中实现对键盘输入的处理。我的意图是，当按下`w`或时，我通过播放器类中的变量`s`表示的速度来更新播放器的位置。`pVector`

但是，当按下相应的键时，当前桨叶就会消失。

脚本可以在 jsfiddle [here](http://jsfiddle.net/ma6rt/9/)上看到，我的代码如下：

```
 // For reference
  // standard rectangle constructor is: rect(x, y, width, height);

    class Paddle
    {
        //width of paddle
        float pWidth;
        //height of paddle
        float pHeight;
        //initial paddle x coordinate
        float x;
        //initial paddle y coordinate
        float y;

        Paddle(float w, float h, float startX, float startY)
        {
            //set width
            paddleWidth = w;
            //set height
            paddleHeight = h;
            //set start x
            x = startX;
            //set start y
            y = startY;
        }

        void update()
        {
        }

        void draw()
        {
            //draw and fill rectangle with white
            fill(255)
            rect(x,y,paddleWidth,paddleHeight)
        }
    }

    class Player extends Paddle
    {
        Player(float w, float h, float startX, float startY)
        {
            super(w,h,startX,startY);
        }
    }

    class PlayerOne extends Paddle
    {
        pVector playerVelocity = (0,0);

        PlayerOne(float w, float h, float startX, float startY)
        {
            super(w,h,startX,startY);
        }

        void update()
        {
            debugger;

            if(keyPressed)
            {
                if(key == 'w')
                {
                    y -= playerVelocity.y;
                }
                else if(key == 's')
                {
                    y += playerVelocity.y;
                }
            }    
        }
    }

    //array list to hold the player paddles
    ArrayList<Paddle> paddles = new ArrayList<Paddle>();
    //middle x and middle y
    float mx, my, pw, ph;

    void setup()
    {
        mx = width/2;
        my = height/2;
        pw = 10;
        ph = 50;

        player1 = new PlayerOne(pw,ph,10,10);
        player2 = new Player(pw,ph,385,10);

        paddles.add(player1);
        paddles.add(player2);

        size(400,400);
    }

    void draw()
    {
        background(0);
        fill(100,100,0);

        // update each paddle added to array list
        for(Paddle p: paddles)
        {
            p.update();
            p.draw();
        }
    } 
```

我究竟做错了什么？

更新：

`debugger`我在按键条件后的行中放置了一个断点： `if(keyPressed)`。似乎如果该键被按下一次，由于某种原因，每次更新都会重复检测到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:35:00.053

在 Procesing IDE 中它甚至不会编译......它应该是 PVector 而不是 pVector，但在 jsfiddle 中它编译......你还需要`new`与 PVectors 一起使用。所以 playerVelocity 没有正确初始化，当添加到位置时会发疯......尝试：

```
PVector playerVelocity = new PVector(1,1); 
```

请注意，如果速度为 0，则不会移动，所以我使用 1.hth

# java - 使用 flexjson 序列化对象列表

> ID：15413900
> 
> 赞同：1
> 
> 时间：2013-03-14T15:48:53.550
> 
> 标签：java, android, google-cloud-endpoints, flexjson

我正在玩`flexjson`和`Google Cloud Endpoints`。我需要序列化的模型是：

```
public class SampleModel {
 Long id;
 DateTime createdAt;
 String message;
 OtherModel other;
} 
```

我刚刚创建是`DateTimeObjectFactory`为了找到一种创建`DateTime`对象的方法（缺少无 arg 构造函数）。`OtherModel`现在我对和也有疑问`SampleModel`。

我想序列化其实是`List`一个`SampleModel`. 所以这是我的代码：

```
List<SampleModel> sampleList = new ArrayList<SampleModel>();
// ...
// adding some items to sampleList
// ...
String s = new JSONSerializer().deepSerialize(sampleList); 
```

我`deepSerialize`现在想避免一些未序列化的字段，但只是现在。

当我想反序列化时`s`，我会这样做：

```
sampleList = new JSONDeserializer<List<SampleModel>>()
    .use("other", OtherModel.class)
    .use(DateTime.class, new DateTimeObjectFactory())
    .deserialize(s); 
```

我认为在那种反序列化中一切都很好，因为我可以在日志中看到反序列化对象。但事实上，当我想从那个新项目中获取项目时，`sampleList`我得到一个错误：

```
java.lang.ClassCastException: java.util.HashMap cannot be cast to com.test.games.testapi.model.SampleModel 
```

如果我有很好的理解，每个不平凡的对象都会被反序列化，就`Map`好像我没有将正确的类指向反序列化器一样。所以这个错误意味着脚本不知道`SampleModel`？这是什么意思？

# iphone - 如何扩展我的方法来检查 2 张卡是否匹配到 3 张匹配的卡？

> ID：15413903
> 
> 赞同：2
> 
> 时间：2013-03-14T15:48:57.883
> 
> 标签：iphone, ios, objective-c, cocoa-touch, cocoa

我正在学习斯坦福的课程，我们必须为应用程序构建一个方法来检查 2 张卡片是否匹配，这就是具有逻辑的模型的样子（查看那里的方法是 flipCardAtIndex）：

```
#import "CardMatchingGame.h"
#import "PlayingCardsDeck.h"

@interface CardMatchingGame()

@property (readwrite, nonatomic) int score;
@property (strong, nonatomic) NSMutableArray *cards;
@property (strong, nonatomic) NSString *notification;
@end        

@implementation CardMatchingGame

-(NSMutableArray *) cards {

    if (!_cards) _cards = [[NSMutableArray alloc] init];
    return _cards;
}

-(id)initWithCardCount:(NSUInteger)count usingDeck:(Deck *)deck {

    self = [super init];

    if (self) {

        for (int i = 0; i < count; i++) {
            Card *card = [deck drawRandonCard];

            if (!card) {
                self = nil;
            } else {
                self.cards[i] = card;
            }
        }
    }
    return self;
}

-(Card *) cardAtIndex:(NSUInteger)index {

    return (index < self.cards.count) ? self.cards[index] : nil;
}

#define FLIP_COST 1
#define MISMATCH_PENALTY 2
#define BONUS 4

-(void) flipCardAtIndex:(NSUInteger)index {

    Card *card = [self cardAtIndex:index];

    if (!card.isUnplayable) {

        if (!card.isFaceUp) {

            for (Card *otherCard in self.cards) {

                if (otherCard.isFaceUp && !otherCard.isUnplayable) {

                   int matchScore = [card match:@[otherCard]];

                    if (matchScore) {

                        otherCard.unplayble = YES;
                        card.unplayble = YES;

                        self.notification = [NSString stringWithFormat:@"%@ & %@  match!", card.contents, otherCard.contents];

                        self.score += matchScore * BONUS;
                    } else {
                        otherCard.faceUp = NO;
                        self.score -= MISMATCH_PENALTY;
                        self.notification = [NSString stringWithFormat:@"%@ did not matched to %@", card.contents, otherCard.contents];
                    }
                    break;
                }

            }
            self.score -= FLIP_COST;
        }
        card.faceUp = !card.isFaceUp;
    }
}

@end 
```

这是整个游戏的类模型，得到了实际的匹配方法：

```
#import "PlayingCards.h"

@implementation PlayingCards

@synthesize suit = _suit;

//overriding the :match method of cards to give different acore if its only a suit match or a number match
-(int)match:(NSArray *)cardToMatch {

    int score = 0;

    if (cardToMatch.count == 1) {
        PlayingCards *aCard = [cardToMatch lastObject];

        if ([aCard.suit isEqualToString: self.suit]) {
            score = 1;
        } else if (aCard.rank == self.rank) {
            score = 4;
        }

    }

    return score;

}
//more stuff... 
```

W 已经用数组创建了它，所以我们可以为更多对象扩展它，但现在我想弄清楚如何扩展它：/

这是我的项目的 github [https://github.com/NirOhayon/Matchismo](https://github.com/NirOhayon/Matchismo)

我是目标 C 的新手，如果你能帮我弄清楚，我会很感激。

谢谢一堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:05:21.850

你可以用一个循环链接这些来检查它们。非常基本的方法。只需遍历每张卡片并对照您拥有的“自我”卡片检查它并增加分数而不是设置它。

```
-(int)match:(NSArray *)cardToMatch {

    int score = 0;

    for(int i = 0; i < cardToMatch.count; i++) {
        PlayingCards *aCard = cardToMatch[i];
        if ([aCard.suit isEqualToString: self.suit]) {
            score += 1;
        } else if (aCard.rank == self.rank) {
            score += 4;
        }
    }

    return score;

} 
```

对于flipCardAtIndex: ，我会将其更改为flipCardsAtIndexes:(NSArray*)indexes，其中indexes 是NSNumber 的NSArray。然后我将运行一个 for 循环检查并删除任何无法播放或面朝上的牌，并通过这些索引处的剩余牌来检查匹配，并检索匹配分数。

告诉您的视图控制器添加另一张卡取决于您如何设置视图控制器。您可以在视图控制器成为委托的方法中执行协议，并通过协议方法告诉它切换。它也可能比这更简单，这取决于它如何检查您的卡片模型以决定显示什么，如果它看到可用的三张卡片而不是两张，它可以切换。

由于本练习的重点是学习 iOS 编程，我想给你一个良好的开端，你应该自己调整和解决一些问题。我感觉你是编程的新手，如果你是新手，你会惊讶于在你的阶段有多少编程是反复试验。最终它将成为第二天性。

# javascript - 如何动态显示div中的文本

> ID：15413911
> 
> 赞同：5
> 
> 时间：2013-03-14T15:49:10.337
> 
> 标签：javascript, html

我在论坛上搜索并看到有关单击时动态更改文本的帖子。但就我而言，我想在从头开始加载页面时动态更改显示。我已经有一个函数可以确定我应该显示什么：

```
function phone()
{
//code here
return phone;
} 
```

我的问题是如何在下面的 div 中显示返回的电话号码来替换 1.888.888.8888 部分。谁能提供一些见解？谢谢！

```
<div class="add-info">
<span class="rightfloat">Order online <span class="red">or call 1.888.888.8888</span></span>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T15:57:55.340

我会更改 HTML 以`<span>`在电话号码周围添加另一个标签，并为该 span 标签提供一个`id`属性，以便轻松访问它（将其拆分为单独的行以减少滚动）：

```
<div class="add-info">
    <span class="rightfloat">
        Order online <span class="red">
            or call <span id="contact-number"></span>
        </span>
    </span>
</div> 
```

然后在页面加载后`span`使用您想要的任何值更新：

```
window.onload = function() {
    document.getElementById('contact-number').innerHTML = PHONE_NUMBER_VALUE;
} 
```

在 JQuery 中，它将是：

```
$(document).ready(function () {
    $('#contact-number').html(PHONE_NUMBER_VALUE);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:53:47.660

你可以，

```
<body onload="phone();">
    <div class="add-info">
        <span class="rightfloat">Order online <span class="red">or call
            <span id="phone"></span>
        </span>
    </div>
</body> 
```

并设置函数运行时的值；

```
function phone() {
    document.getElementById("phone").innerHTML = "1.888.888.8888";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:52:49.677

与其返回“电话”，不如在你的跨度上放一个 id 并 `document.getElementById('spanId').innerHTML = phone` 在你的 javascript 中使用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:51:15.763

从[window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)事件中调用您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:51:58.473

我会将数字分成`<span>`带有自己的 id 的附加标签，并用 js 更改它的内容......

```
document.getElementById('id_of_span').innerText = 'new number'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T15:58:44.057

试试这个

```
<script>
    function phone(number) {
        var redText = document.getElementByClassname("red")[0];
        redText.innerHTML = "or call " + number;
    }
</script> 
```

要调用它，您可以使用点击、加载或其他任何方式。例如

```
<script>
    window.onload = phone('NEW NUMBER HERE');
</script> 
```

请记住，稍后添加另一个窗口 onload 函数将取代这个，因此您要么需要添加它，要么使用双重委托函数，但那是另一回事了......

# c# - 带有 EF 的 C# WebApi 无法调用方法

> ID：15413913
> 
> 赞同：3
> 
> 时间：2013-03-14T15:49:19.543
> 
> 标签：c#, entity-framework, asp.net-mvc-4, asp.net-web-api

我创建了一个带有一些 POCO 类的 MVC 4 WebApi 应用程序，并使用 EF 创建了一个具有读/写等功能的快速默认控制器。

现在由于某种原因我不能让这两种方法一起工作，但是第一种方法是 EF 创建的。简而言之，我想通过 ID 和用户名查找用户。

```
 // GET api/xxx
    public User GetUser(string id)
    {
        User user = db.Users.Find(id);
        if (user == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }
        return user;
    } 
```

以上工作。这不起作用。

```
 // GET api/xxx
    public User GetUserByUsername(string username)
    {
        var user = db.Users.First(s => s.Username == username);
        if (user == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return user;
    } 
```

但是通过将其更改为以下内容并将一些添加到 webapi 配置中，然后以下工作：

```
 // GET api/xxx
    [HttpGet]
    [ActionName("username")]
    public User GetUserByUsername(string id)
    {
        var user = db.Users.First(s => s.Username == id);
        if (user == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return user;
    } 
```

并将 WebApiConfig 更改为：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
        // Action-name
        config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我想知道为什么以前的方法不能一起工作（第一个和第二个），如果可能的话我可以做些什么来让它工作。我很确定它有一些东西，因为不能创建类似的方法似乎有点奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:05:14.197

因为 Web API 只查找方法是“GET”这一事实，并在方法名称中查找“get”字样。由于您的两个方法都具有“get”并且都接受单个字符串参数，因此控制器可能会解析到它找到的第一个参数，并且由于“id”是默认路由的一部分，因此它会与您的 GetUser 方法一起返回。

您也可以尝试为“用户名”添加路由：

```
config.Routes.MapHttpRoute(
        name: "ActionApi",
        routeTemplate: "api/{controller}/{username}",
        defaults: new { username = RouteParameter.Optional }
    ); 
```

**编辑：**尝试查看这些文章以了解路由如何与 Web API 一起使用。它不同于常规的 MVC 控制器。

[http://www.asp.net/web-api/overview/web-api-routing-and-actions](http://www.asp.net/web-api/overview/web-api-routing-and-actions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:58:15.393

这：

```
var user = db.Users.First(s => s.Username == id); 
```

如果没有找到具有该 id 的用户，将导致异常

但是这个：

这：

```
var user = db.Users.FirstOrDefault(s => s.Username == id); 
```

将返回`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:43:30.940

通过在 DefaultApi 之后添加新的路由规则使其工作，

```
// Routing by Action-name
config.Routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{action}/{username}",
    defaults: new { username = RouteParameter.Optional }
); 
```

并将方法更改为以下内容：

```
// GET api/xxx/username
[ActionName("username")]
public User GetUserByUsername(string username)
{
    var user = db.Users.FirstOrDefault(s => s.Username == username);
    if (user == null)
    {
        throw new HttpResponseException(
            Request.CreateResponse(HttpStatusCode.NotFound));
    }

    return user;
} 
```

我认为我尝试了太多并且很傻，但现在看起来很清楚。

通过在我应用到 routeTemplate 的地方添加一个新路由`{action}`是有意义的，因为我可以添加一个属性`[ActionName("username")]`。然后我可以浏览`localhost:xxxxx/api/xxx/2`AND `localhost:xxxxx/api/xxx/username/bob`，这使得两个 GET 方法都可以工作，因为第二个路由规则接受一个操作。

@Rob，感谢您的链接和提示，感谢！

# css - 如何使用 CSS3 创建语音气泡边框

> ID：15413915
> 
> 赞同：-2
> 
> 时间：2013-03-14T15:49:21.290
> 
> 标签：css

我想用 CSS3 创建一个风格化的边框，如下图所示。但是，我不知道怎么做？这是图像：

![](../Images/425139168a8308b305fa17f61aca58a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T12:11:29.877

```
<style type="text/css">
.comments .comment{
    width:10%;
    margin-bottom:20px;
}

.comments .comment p{
    margin:0 0 10px 0;
}
.bubble{
    position:relative;
    background-color:#CCC;
    padding:20px;
    color:#009;
    border-radius:3px;
    margin-left:20px;
}

.bubble::after{
    content:"";
    display:block;
    position:absolute;
    left:-15px;
    top:15px;

    width:0px;
    height:0px;
    border-top:8px solid transparent;
    border-bottom:8px solid transparent;
    border-right:15px solid #CCC;
}

</style>

<div class="comments">
  <div class="comment bubble">
  <p>This is comment</p>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:59:38.137

像这样： http: [//nicolasgallagher.com/pure-css-speech-bubbles/](http://nicolasgallagher.com/pure-css-speech-bubbles/)

```
.triangle-isosceles {
   position:relative;
   padding:15px;
   margin:1em 0 3em;
   color:#000;
   background:#f3961c;

   /* css3 */
   -moz-border-radius:10px;
   -webkit-border-radius:10px;
   border-radius:10px;
   background:-moz-linear-gradient(top, #f9d835, #f3961c);
   background:linear-gradient(top, #f9d835, #f3961c);
}

/* creates triangle */
.triangle-isosceles:after {
   content:"";
   display:block; /* reduce the damage in FF3.0 */
   position:absolute;
   bottom:-15px;
   left:50px;
   width:0;
   border-width:15px 15px 0;
   border-style:solid;
   border-color:#f3961c transparent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:54:52.533

你可以使用**CSS3** `box_round`：

```
.box_round {
  -webkit-border-radius: 5px; 
          border-radius: 5px;
} 
```

试试[这个](http://css3please.com/)网站:)

# c# - 使用正则表达式查找两个字符串的精确相等性

> ID：15413916
> 
> 赞同：1
> 
> 时间：2013-03-14T15:49:22.520
> 
> 标签：c#, regex

在我的 C# 应用程序中，我需要搜索字符串以查找它们是否是度量单位的缩写。例如，我需要找到“mm”，代表毫米，“l”代表升，“m2”代表平方米，“kg”代表公斤等等。只有当字符串与模式完全相等时，我才需要匹配，但当模式包含在更大的字符串中时不需要。例如，如果字符串等于“mm”，我想要一个匹配，但不是当字符串是“长度为 55 mm”时。

我知道最简单的方法是使用一系列 if - else if 语句和 == 运算符，但可能的问题是我事先不知道用户将搜索的所有单元的名称，而且，他们可以使用不同的单位集。例如，有时它可能是长度和体积单位（mm、m、cm、m3、l），而在另一种情况下，它可能是电气单位（A、V、W、MW、kWh）。

因此，我的想法是向项目添加一个简短的 XML 文件，该文件来自应用程序将在运行时读取实际单位并组成一个正则表达式以用于搜索字符串。作为第一次尝试，我使用了这种方法：

```
private bool IsUnit(String theString)
    {
        Regex regExUnits = new Regex("^(?i)m2|m3|kg|mm|cm|[mthl]$");
        Match m = regExUnits.Match(theString);
        return m.Success;
    } 
```

但它没有按我的意愿工作。我得到了“mm”的匹配，但我也得到了“长度为 55 mm”的匹配

我认为如果我同时使用“^”和“$”锚，它将被解释为“如果在字符串的开头和结尾找到模式则匹配*”*，这仅在完全相等的情况下才是正确的。但是不，它似乎被解释为“如果在字符串的开头*或*结尾找到模式则匹配”。

我之前已经使用过正则表达式，但在比这个简单得多的情况下，所以，目前我被卡住了。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:52:42.527

我不会为此使用正则表达式。`HashSet<string>`如果元素不多，我会使用- 甚至只是一个简单的数组：

```
static readonly string[] Units = { "m2", "m3", "kg", "mm", "cm", 
                                   "m", "t", "h", "l" };

private static bool IsUnit(string text)
{
    return Units.Contains(text);
} 
```

或者：

```
static readonly HashSet<string> Units = new HashSet<string> { 
    "m2", "m3", "kg", "mm", "cm", "m", "t", "h", "l" };

// IsUnit method as before 
```

对于简单的字符串相等，正则表达式比 IMO 更麻烦。

当然，可以在封闭类的每个实例的基础上指定单位，或者其他什么 - 我只是在这里对它们进行了静态硬编码，因为您的问题也对它们进行了硬编码。

编辑：为了使这种大小写不敏感，最简单的方法可能是使用该`HashSet`版本并使用适当的 构建它[`StringComparer`](http://msdn.microsoft.com/en-us/library/5hc8kytd.aspx)，例如：

```
static readonly HashSet<string> Units =
    new HashSet<string>(StringComparer.OrdinalIgnoreCase) { ... }; 
```

（但是，就文化敏感性而言，您需要*确切地确定*您想要什么样的不区分大小写。）

鉴于单位名称通常*不*区分大小写，我建议不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:51:48.553

你忘了括号！

```
"^(?i)(?:m2|m3|kg|mm|cm|[mthl])$" 
```

是可选的`?:`，只是意味着不捕获该组匹配的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:55:16.107

你只需要知道它是否是某种单位吗？

```
public static void Main()
{
    string input = Console.ReadLine();
    string[] sarr = { "kg", "li", "mm" };
    bool isUnit = sarr.Contains(input);
} 
```

# javascript - Ajax 调用不适用于具有大量数据的 heroku

> ID：15413921
> 
> 赞同：2
> 
> 时间：2013-03-14T15:49:37.780
> 
> 标签：javascript, jquery, heroku

在 Localhost 上一切正常，但是当我在 heroku 上部署代码时会出现问题。

这是我在应用程序中使用的简单 Ajax 调用。我正在使用 AJAX 将一些数据发送到服务器进行处理。当我向请求中添加大量数据时，它会失败。如果我使用 AJAX 请求发送的数据较少，它工作正常。

```
$.ajax({
        url:'Ajax.php',
    data:"data to send",
    type:'POST',
    success: function(data) {
           console.log("success");
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        console.log("failed");
    }
}); 
```

谁能告诉我为什么会这样？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T06:24:29.500

Heroku 在超时之前只允许 30 秒的请求。

[https://devcenter.heroku.com/articles/request-timeout](https://devcenter.heroku.com/articles/request-timeout)

> 发生这种情况时，如果完成时间超过 30 秒，路由器将终止请求。当请求离开路由器时，超时倒计时开始。然后，您的应用程序必须在测功机中处理该请求，然后在 30 秒内将响应发送回路由器以避免超时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T16:41:59.087

它绝对与系统内存使用有关，尤其是在一个场景中，您将来回解析大量 JSON 对象！

等一下！不仅是 JSON 数据，使用 POST/GET 方法的任何类型的数据（大小很大）都可能导致失败，因为许多面向 JS 的框架（如 nodejs）最后仍然将它们作为对象返回！

# google-maps-api-3 - 谷歌地图距离矩阵

> ID：15413922
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:49:41.850
> 
> 标签：google-maps-api-3

我正在使用 Google API，我需要做的是以英里为单位获得两个不同的距离。目前我有以下内容： -

```
var start = arrObjLatLngs[0];
var end = arrObjLatLngs[arrObjLatLngs.length - 1];

var base = new google.maps.LatLng(52.781048888889, -1.2110222222222546);

var service = new google.maps.DistanceMatrixService();
service.getDistanceMatrix(
  {
    origins: [base, base],
    destinations: [start, end],
    travelMode: google.maps.TravelMode.DRIVING,
    avoidHighways: false,
    avoidTolls: false
  }, callback);

function callback(response, status) {
  if (status == google.maps.DistanceMatrixStatus.OK) {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;

    for (var i = 0; i < origins.length; i++) {
      var results = response.rows[i].elements;
      for (var j = 0; j < results.length; j++) {
        var element = results[j];
        var distance = element.distance.text;
        var duration = element.duration.text;
        var from = origins[i];
        var to = destinations[j];
      }
    }
  }
} 
```

我需要的是两个变量；`$runinPickup`其中`$runinDestination`包含 1.) base 和 start（将是 $runinPickup）和 2.) base 和 end（将是 $runinDestination）之间的距离

如果我发出警报`distance`，我会得到回应：-

13.9公里

5.2公里

13.9公里

5.2公里

`base`首先，我只是想知道我如何才能获得与`start`$runinPickup之间的距离。其次，有没有办法我可以做到这一点，所以它不包括小数？因此，第一个值不是 13.9 公里，而是 13。

然后我需要把它转换成英里，我猜一旦我能得到这个值，我会这样做：

```
var pickup_distance = parseInt(($fieldPickup / 8) * 5); ? 
```

任何帮助将非常感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:07:38.857

你读过[文档](https://developers.google.com/maps/documentation/javascript/distancematrix#distance_matrix_results)吗？在 origins 数组中两次传递相同的地址：

```
 origins: [base, base],
   destinations: [start, end], 
```

会给你同样的结果两次。这应该有效（未经测试），并为您提供 2 个结果：

```
 origins: [base],
   destinations: [start, end], 
```

为了获得里程，我建议将 unitSystem 设置为[IMPERIAL](http://en.wikipedia.org/wiki/Imperial_units)（尽管我在文档中找不到这意味着什么的定义）：

```
unitSystem (optional) — The unit system to use when displaying distance. Accepted values are:

google.maps.UnitSystem.METRIC (default)
google.maps.UnitSystem.IMPERIAL 
```

您当然可以[将 METRIC 单位转换为英里](https://www.google.com/?q=meters+to+miles/#hl=en&sclient=psy-ab&q=meters+to+miles&oq=meters+to+miles)。

[显示两个值的示例](http://www.geocodezip.com/v3_GoogleEx_distance-matrixA.html)，距离以 IMPERIAL 单位表示。从文档中的示例修改。

**代码片段：**

```
var map;
var geocoder;
var bounds = new google.maps.LatLngBounds();
var markersArray = [];

var base = new google.maps.LatLng(55.930385, -3.118425);
var start = 'Greenwich, England';
var destinationA = 'Stockholm, Sweden';
var end = new google.maps.LatLng(50.087692, 14.421150);

var destinationIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FF0000|000000';
var originIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000';

function initialize() {
  var opts = {
    center: new google.maps.LatLng(55.53, 9.4),
    zoom: 10,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById('map'), opts);
  geocoder = new google.maps.Geocoder();
  calculateDistances();
}

google.maps.event.addDomListener(window, 'load', initialize);

function calculateDistances() {
  var service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix({
    origins: [base],
    destinations: [start, end],
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL,
    avoidHighways: false,
    avoidTolls: false
  }, callback);
}

function callback(response, status) {
  if (status != google.maps.DistanceMatrixStatus.OK) {
    alert('Error was: ' + status);
  } else {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
    var outputDiv = document.getElementById('outputDiv');
    outputDiv.innerHTML = '<table border="1">';
    deleteOverlays();
    var stringArray = ['$runinPickup', '$runinDestination'];
    var htmlString = '<table border="1">';
    for (var i = 0; i < origins.length; i++) {
      var results = response.rows[i].elements;
      addMarker(origins[i], false);
      for (var j = 0; j < results.length; j++) {
        addMarker(destinations[j], true);
        htmlString += '<tr><td>' + stringArray[j] + '</td><td>' + results[j].distance.text + '</td></tr>';
        outputDiv.innerHTML += '<tr><td>' + stringArray[j] + '</td><td>' + results[j].distance.text + '</td></tr>';
      }
    }
    htmlString += '</table>';
    // outputDiv.innerHTML += '</table>';
    outputDiv.innerHTML = htmlString;
    // alert(htmlString);
  }
}

function addMarker(location, isDestination) {
  var icon;
  if (isDestination) {
    icon = destinationIcon;
  } else {
    icon = originIcon;
  }
  geocoder.geocode({
    'address': location
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      bounds.extend(results[0].geometry.location);
      map.fitBounds(bounds);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location,
        icon: icon
      });
      markersArray.push(marker);
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}

function deleteOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}
```

```
body {
  margin: 20px;
  font-family: courier, sans-serif;
  font-size: 12px;
}
#map {
  height: 480px;
  width: 640px;
  border: solid thin #333;
  margin-top: 20px;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="outputDiv"></div>
<div id="map"></div>
```

# model - 在表模型中获取默认的 zend db 适配器

> ID：15413923
> 
> 赞同：0
> 
> 时间：2013-03-14T15:49:43.467
> 
> 标签：model, zend-framework2, adapter

如何在我的表模型中获得默认的数据库适配器？我想用它来创建交易。

在 database.global.php 中：

```
 return array(
   'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
        'aliases' => array(
            'db' => 'Zend\Db\Adapter\Adapter',
        ),
    ),
    'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=cww;host=localhost',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
    ),
); 
```

现在我想 `$this->adapter`在我的albumTable.php

我尝试按如下方式接收它：

```
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Db\TableGateway\TableGateway;
use Zend\Db\Sql\Expression;
use Zend\Db\Sql\Select;
use Zend\Db\Sql\Update;
use Zend\Db\Sql\Sql;
use Zend\Db\Sql\Where;
use Ajax\Model\Album;

class AlbumTable implements ServiceLocatorAwareInterface
{
    protected $tableGateway;
    protected $adapter;

    public function __construct(TableGateway $tableGateway)
    {
        $this->tableGateway = $tableGateway;
        $this->adapter  = $this->getServiceLocator()->get('db');    
    } 
```

但我得到了错误：

> 致命错误：Ajax\Model\AlbumTable 类包含 2 个抽象方法，因此必须声明为抽象方法或在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:10:52.383

添加以下功能：

```
public function getServiceLocator() {
    return $this->serviceLocator;
}

public function setServiceLocator(Zend\ServiceManager\ServiceLocatorInterface $serviceLocator) {
    $this->serviceLocator= $serviceLocator;
    return $this;
} 
```

然后你可以这样做：

```
$this->$dbAdapter = $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter'); 
```

但是，如果您阅读入门[指南](http://framework.zend.com/manual/2.1/en/user-guide/overview.html)，它会解释如何`TableGateways`使用服务管理器工厂进行构建，传递 DbAdapter 和其他参数，如下所示：

```
'RoleTableGateway' => function ($sm) {
    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
    $resultSetPrototype = new ResultSet();
    $resultSetPrototype->setArrayObjectPrototype(new Role());
    return new TableGateway('role', $dbAdapter, null, $resultSetPrototype);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T07:54:48.230

使用它来创建数据库适配器：

```
$adapter = $this->getServiceLocator()->get('db'); 
```

您只能在创建别名时使用“db”。您也可以尝试在 \autoload\config\local.php 中的 locals.php 中编写内容。现在，假设我们要在 MySQL 中执行一个数据库查询： 创建一个 sql 语句并放入变量 $sql。现在这样做：

```
$statement = $adapter->createStatement($sql);
$result = $statement->execute(); 
```

希望这可以帮助。

# php - 使用 PHP 返回的 JQuery 拆分 JSON 数组

> ID：15413931
> 
> 赞同：0
> 
> 时间：2013-03-14T15:50:03.823
> 
> 标签：php, jquery

我是 JQuery 的新手，整个 JQuery 到 PHP 又回到 JQuery 过程。

所以我有一个简单的 ajax JQuery 脚本：

```
$.ajax({

           type: "POST",
           url: "includes/calc.php",
           data: {

               'var1':var1,
               'var2':var2,

           },
           success: function(data){
               alert(data);
               $("input#hiddenprice").val(data);
               $('#'+itemprice).html("&euro;"+data);

           }

       }) 
```

这转到一个 PHP 脚本，然后我使用一个简单的回显返回一个值

```
echo $newprice; 
```

上面的成功函数将其用作“数据”。这一切都有效并且很好。

但是如果我想返回多个值怎么办。

我想我可以用`json_encode();`

据我了解，类似于：

```
$dataset = array($var1, var2, var3);

echo json_encode($dataset); 
```

但是假设我有两个值，我如何将它们都放入 JSON 中，然后如何在另一端拆分它们。

所以说“数据”是一个数组，我如何告诉 JQuery 拆分它？

对不起，如果这很简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:53:45.437

```
 $.ajax({

       type: "POST",
       url: "includes/calc.php",
       datatype : 'json',
       data: {

           'var1':var1,
           'var2':var2,

       },
       success: function(data){
           alert(data.firstvalue);
           alert(data.secondvalue);

       }

   }) 
```

请查看该数据类型。现在respose需要是json。

在您的 php 用户中使用 json_encode 而不是 echo。

```
$firstvalue = 'your first value';
$secondvalue = 'your second value';
echo json_encode(array('firstvalue' => $firstvalue,'secondvalue' => $secondvalue)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:56:23.010

如果为`.ajax()`as指定 dataType 选项`json`，jQuery 会自动将调用返回的 JSON 字符串解析为适当的 javascript 对象/数组。

所以你的电话可能看起来像这样：

```
$.ajax({

   type: "POST",
   url: "includes/calc.php",
   dataType: "json",
   data: {

       'var1':var1,
       'var2':var2,

   },
   success: function(data){
       alert(data);
       $("input#hiddenprice").val(data);
       $('#'+itemprice).html("&euro;"+data);

   }

}) 
```

现在，假设您的 PHP 脚本的响应是一个 JSON 字符串，表示如下对象：

```
{"key1":"value1","key2":"value2"} 
```

在您的成功处理程序中，您可以像这样简单地访问它作为对象：

```
 success: function(data){
       alert(data.key1);
       alert(data.key2);
   } 
```

或者，如果返回的 JSON 字符串表示这样的数组：

```
["value1","value2"] 
```

然后您可以像这样访问成功处理程序中的数组值：

```
 success: function(data){
       alert(data[0]);
       alert(data[1]);
   } 
```

如果您不想添加该`dataType`选项，您还可以选择手动将返回的 JSON 字符串解析为对象/数组，如下所示：

```
 success: function(data){
       var dataObj = JSON.parse(data);
       alert(dataObj.key1);
       alert(dataObj.key2);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:55:06.210

在 JSON 对象中组织数据的方法有很多种。最简单的是返回字符串或数字的线性数组。使用[http://jsonlint.com/](http://jsonlint.com/)测试您的数据以查看它是否是有效的 JSON，或者只是将 PHP 数组（线性或关联）输入到`json_encode`.

如果`data`是 JSON 线性数组，您可以将其视为`success`回调中的任何其他 JavaScript 数组：

```
var first = data[0]; // first element
var second = data[1]; // second element 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T16:22:32.733

用符号或任何自定义数据内爆您的 php 变量

像

```
$var[0] = '1st variable';
$var[1] = '2nd variable';
$var[2] = '3rd variable';

echo implode('_SPLIT_',$var); 
```

现在在jquery成功函数中

*用“ SPLIT* ”拆分响应

作为

```
 var response = data.responseText.split('_SPLIT_');
 var variable1 = response[0];
 var variable2 = response[1];
 var variable3 = response[2]; 
```

并按您的意愿分配

# energy - MonkeyTalk 用于记录和回放用户操作；它可以离线工作吗？

> ID：15413932
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:50:13.483
> 
> 标签：energy, consumption, monkeytalk

我想使用 MonkeyTalk 记录和回放移动设备上的用户操作以测量能耗，但我不希望移动设备连接到计算机或其 WiFi 处于开启状态（因为它会消耗能量）重播动作。那么，当您想重播记录的交互时，是否有人知道手机是否必须通过电缆或 WiFi 连接到计算机？

如果您对使用其他工具有任何建议，我也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:51:06.597

将整个应用程序从 SVN 更新到您的 mac 系统。您正在为您的应用程序激活创建一个 IOS 代理以进行测试。一旦运行您的应用程序，然后在猴子谈话自动化工具中激活自动记录选项。

# c# - Explain handling DBNull?

> ID：15413935
> 
> 赞同：2
> 
> 时间：2013-03-14T15:50:23.330
> 
> 标签：c#, sql, datetime, dbnull

I have a nullable DateTime field "BirthDate" the existing code was handeling this in such a way

```
info.BirthDate = (DateTime?)reader["Birthdate"]; 
```

This causes an "Invalid Cast" error and it breaks. Ok, I understand this is because nulls are returned differently from sql and are of the type "DBNull"

Fix for this turned out to be

```
if (reader["Birthdate"] != DBNull.Value)
{
    info.Birthdate = (DateTime)reader["Birthdate"];
} 
```

Can someone explain why exactly this works?..I'm particularly lost on the .Value part of DBNull. If it *IS* returning as DBNull how does the code even reach inside this block?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:52:29.720

`DBNull` is a singleton. There is only one instance of it. You access this instance with `DBNull.Value`. The comparison checks if `DBNull(.Value)` is returned and if it is not returned (`!=`) then it knows it can safely cast it to a `DateTime`.

From [MSDN](http://msdn.microsoft.com/de-de/library/system.dbnull.value.aspx):

> DBNull is a singleton class, which means only this instance of this class can exist.

Alternatively you could use the `Convert.IsDBNull` method:

```
if (!Convert.IsDBNull(reader["Birthdate"]))
{
    info.Birthdate = (DateTime)reader["Birthdate"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:02:33.030

`DBNull` is a *type*, not a *value*. As @aKzenT explained, it is implemented as a singleton, meaning there can only only be one *instance* of that type. The way to get to that one value is through the static `.Value` property.

This makes it easy to do comparisons since any `DBNull` instance is equal in both value and reference to another `DBNull` instance.

Another way to do that check which may make more sense is:

```
int columnIndex = reader.GetOrdinal("Birthdate");
if (!reader.IsDbNull(columnIndex)) // IsDbNull should have a string overload, but it does not.
{
    info.Birthdate = (DateTime)reader["Birthdate"];
} 
```

# php - 遍历两个数组并比较结果以显示不匹配的结果

> ID：15413936
> 
> 赞同：0
> 
> 时间：2013-03-14T15:50:29.503
> 
> 标签：php

所以我有一个有趣的问题。我有两个 userId 和 contractId 数组，我想比较它们以查看是否有任何结果匹配。然后只显示不匹配的。任何帮助，将不胜感激。

```
//select all users and contracts possibilities
$rQ = "SELECT users.userId AS userId, cId AS contractId, name, cTitle FROM contracts, users WHERE users.roleId = contracts.roleId ORDER BY users.userId ASC ";
$rR = mysql_query($rQ);
$a = mysql_fetch_assoc($rR);

//selects current signatures in signatures table
$rQ1 = "SELECT userId, contractId FROM signatures ORDER BY userId ASC ";
$rR1 = mysql_query($rQ1);
$a1 = mysql_fetch_assoc($rR1); 
```

示例：如果

```
$a['userId'] != $a1['userId'] && $a['contractId'] != $a1['contractId'] 
```

然后

```
echo $a['name'] . $a['cTitle'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:56:37.733

使用 array_diff() [http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)它可以方便地比较数组的差异，并将返回数组 1 中不在数组 2 中的结果列表，然后如果你以另一种方式再次运行它，您最终会得到 2 个项目数组，它们只出现在您的一个父数组中，而不是另一个。

然后，您可以进行数组合并以获得一个整体的术语数组，这些术语都不在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:57:45.343

如果您需要使用 PHP 来执行此操作，您可以执行以下操作：

```
foreach($a as $value ){

    if(!in_array($value,$a1)){
         $value1 = array_search($value,$a1);
        if(($value['userId']!=$value1['userId']) && (($value['contractId']!=$value1['contractId']) ))
            print_r($value);

} 
```

# c++ - std::unique 与谓词比较 std::string 不删除重复项

> ID：15413943
> 
> 赞同：1
> 
> 时间：2013-03-14T15:50:43.607
> 
> 标签：c++, c++11, predicate, stdvector, duplicate-removal

除非我遗漏了什么或误解了机制（很可能）这个向量中不应该存在“1”重复吗？

```
chunks.erase( std::unique ( chunks.begin(), chunks.end(), 
                           []( std::string &s1, std::string &s2 ){ 
                              return ( s1.compare(s2) == 0 ? true : false );}), 
                           chunks.end() ); 
```

在执行上述操作之前：

```
1       l:1
1+      l:2
1+1     l:3
1+1=    l:4
+       l:1
+1      l:2
+1=     l:3
1       l:1
1=      l:2
=       l:1 
```

执行上述代码后：

```
1       l:1
1+      l:2
1+1     l:3
1+1=    l:4
+       l:1
+1      l:2
+1=     l:3
1       l:1
1=      l:2
=       l:1 
```

我尝试过不使用谓词（假设将删除相同的 std::strings）。出于某种原因，“那些”被识别为相同？我查看了它们的长度（假设空格被卡在前缀或后缀中），但它们的长度相同。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T15:55:07.010

你（可能）误解了一些东西。

`std::unique`仅删除连续的重复项，因此如果您希望删除所有重复项，应用的先决条件`std::unique`是使用相同的谓词对您的范围进行排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:55:36.927

`std::unique`假设非唯一元素是相邻的，就像（例如）`chunks`排序时那样。这允许`std::unique`具有 O(n) 复杂度。

如果你想保持一个特定的顺序`vector`并删除重复项，那就是 O(n ² ) 复杂性的问题。您可以使用此处提供的逻辑来执行此操作。

```
// Create a new vector without the duplicates
std::vector<string> unique_chunks;
for (std::vector<string>::iterator x = chunks.begin(); x != chunks.end();) {
  if ( unique_chunks.find(*x) != unique_chunks.end() ) {
    unique_chunks.push_back( *x );
  }
}

// Make chunks hold this new vector (allowing the old vector to be destroyed)
std::swap( chunks, unique_chunks ); 
```

不，你不需要那个谓词。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T16:33:17.137

如其他答案中所述，`unique`删除连续的重复块，如果您需要删除重复项并及时保留其余元素的顺序（第一次出现的顺序，此处），`O(N log N)`您可以执行以下操作：

```
template<typename T>
bool bySecond(const pair<T, int>& a, const pair<T, int>& b) {
    return a.second < b.second;
}

template<typename T>
bool firstEqual(const pair<T, int>& a, const pair<T, int>& b) {
    return a.first == b.first;
}

template<typename it>
it yourUnique(it begin, it end){
    typedef typename std::iterator_traits<it>::value_type value_t;
    vector<pair<value_t, int>> v;
    for(it c = begin; c != end; ++c){
        v.push_back(make_pair(*c, v.size())); // second is start index;
    }
    sort(v.begin(), v.end()); // sort by value then by index
    v.erase(unique(v.begin(), v.end(), firstEqual<value_t>), v.end());
    sort(v.begin(), v.end(), bySecond<value_t>); // restore order.
    it c = begin;

    for(const auto& x: v){
       *(c++) = x.first;
    }
    return it;
} 
```

没有实现拥有自己的谓词的可能性。这是可能的，但一个缺点是您必须提供`less-than`功能，而不是`equality`一个，这在某些情况下可能是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T15:55:52.603

该`std::unique`算法假定输入范围是有序的，并通过比较两个连续值来删除重复项。为了能够使用该算法，您需要首先对输入进行排序。

# java - FileChooser getAttachement 仅从此文件夹

> ID：15413945
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:50:46.423
> 
> 标签：java, swing, jfilechooser

如何使用户仅从指定文件夹中选择文件

```
int returnVal = fc.showOpenDialog(FileChooser.this);

if (returnVal == JFileChooser.APPROVE_OPTION) {
    File file = fc.getSelectedFile();
    source = file.getAbsolutePath();
    fileName = file.getName();
    attachText.setText(fileName);
    source = source.replace("\\","\\\\");                
} 
```

在这里，我将从任何文件夹中获取文件，我只想从 G:\Project\Attachments 中获取文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:57:04.477

您可以在构造函数中传递目录：

```
JFileChooser filechooser = new JFileChooser(theDirectory); 
```

或设置它

```
filechooser.setCurrentDirectory(theDirectory); 
```

在**您的情况下**，目录是：

```
File theDirectory = new File("G:\\Project\\Attachments"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:57:38.053

```
File dir = new File("G:\\Project\\Attachments");
FileSystemView fsv = new SingleRootFileSystemView(dir);
JFileChooser fileChooser = new JFileChooser(fsv);
int returnVal = fc.showOpenDialog(fileChooser);

if (returnVal == JFileChooser.APPROVE_OPTION) { 
```

# javascript - var Foo = (function () { 等中 this 的上下文

> ID：15413953
> 
> 赞同：1
> 
> 时间：2013-03-14T15:51:02.140
> 
> 标签：javascript, knockout.js, typescript

如果我在课堂上声明这个

```
class AlertConfigViewModel {
   DeleteAlert = function (item) {
        if (item) {
            if (confirm('Are you sure you wish to delete this item?')) {
                this.Alerts.remove(item);
            }
        }
        else {
            alert("something is wrong");
        }
    };
} 
```

结果是这样的：

```
var AlertConfigViewModel = (function () {
    function AlertConfigViewModel(json) {
      this.DeleteAlert = function (item) {
            if(item) {
                if(confirm('Are you sure you wish to delete this item?')) {
                    this.Alerts.remove(item);
                }
            } else {
                alert("something is wrong");
            }
        };
    }
} 
```

如果我在 AlertConfigViewModel 的上下文之外调用 AlertConfigViewModel，那么“this”不是 AlertConfigViewModel，我认为它会因为它的内部函数 AlertConfigViewModel(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:27:11.790

请查看此处发布的解决方案：[TypeScript and Knockout binding to 'this' issue - 需要 lambda 函数？](https://stackoverflow.com/questions/13277537/typescript-and-knockout-binding-to-this-issue-lambda-function-needed/13285438#13285438)

如果您在构造函数中定义方法主体，“this”将始终指向类实例 - 这是一个技巧，但 imo 是它非常干净的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:07:12.093

为什么不以正常方式将函数声明为类的属性？

```
class AlertTest {

    private alerts:string = "these-alerts";

    TraceAlert():void{
       console.log(this.alerts); // Logs "these-alerts", wherever it's called from
    };
}

class CallTest {

    private alerts:string = "not-these-alerts";

    constructor() {
        var target = new AlertTest ();  // Creates an instance of your class, as you say.
        target.TraceAlert()
    }
}

var t:CallTest = new CallTest();
// Output: "these-alerts" 
```

`FuncName = function()`除了范围问题之外，我不确定语法给你什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:17:47.473

我怀疑你只会有这个“类”的一个实例，从而使 this 关键字的使用过时了。

使用类似的语法尝试类似：

```
ClassName = {
    Alerts: someObject,

    DeleteAlert: function (item) {
        if (item) {
            if (confirm('Are you sure you wish to delete this item?')) {
                ClassName.Alerts.remove(item);
            }
        } else {
            alert("something is wrong");
        }
    }
} 
```

如果你想要实例，我会选择另一种语法......

# iphone - 如何在IOS中取消/退出/停止线程对象或后台运行的线程的执行

> ID：15413955
> 
> 赞同：5
> 
> 时间：2013-03-14T15:51:12.497
> 
> 标签：iphone, objective-c, ios5, ios6

我正在分离一个线程在后台做一些操作，参考下面的代码

```
 currentThread = [[NSThread   alloc]initWithTarget:contactServiceselector:@selector(requestForContactBackup:)object:msisdn];

 [currentThread start]; 
```

这个 currentThread 是 AppDelegate 中声明的指针。我的视图上有一个按钮，点击它，后台线程的执行应该停止。参考以下代码：

```
-(void)cancelTheRunningTasks {

   if(self.currentThread !=nil) {

        [currentThread cancel];
        NSLog(@"IsCancelled: %d",[currentThread isCancelled]);   //here Yes returns
        [self removeNetworkIndicatorInView:backUpViewController.view];
    }  
} 
```

以下代码的问题是后台线程仍在执行中。

我的问题是，有线程引用，如何从主线程取消/停止执行/杀死后台线程？

请建议我可能的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:18:51.000

您的后台线程需要检查它是否已被取消，或者通过`isCancelled`方法...

```
if ([[NSThread currentThread] isCancelled]) {
    // do cleanup here
    [NSThread exit];
} 
```

您不能从外部杀死线程，因为无法知道线程可能处于什么状态，因此，杀死它会产生不确定的行为（想象一下，如果线程在被杀死时在分配器中保持互斥锁。 ..哎哟）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:07:07.753

**cancel**
更改接收器的取消状态以指示它应该退出。

**exit**
终止当前线程。

检查[NSThread 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)

有关取消和操作对象的更多信息，请参阅[NSOperation 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591)。

**注意**：在 OS X v10.6 中，cancel 方法的行为取决于操作当前是否在操作队列中。对于未排队的操作，此方法将操作标记为立即完成，生成适当的 KVO 通知。对于排队操作，它只是将操作标记为准备好执行并让队列调用它的 start 方法，该方法随后退出并导致从队列中清除操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T10:21:05.077

我解决了问题。正是我想要做的就是我想从我的主线程或其他线程中停止或终止某些后台线程的工作条件。当我阅读Apple文档和一些帖子时，我得出结论，我们不能从另一个线程中杀死一个线程，因为它们所有线程共享公共内存空间和资源，并且由另一个线程杀死线程并不是更好（但是一个进程可以杀死另一个进程，因为两个进程之间没有公共内存空间共享）。然后我得到信息，我们不能像那样退出/杀死线程，但我们仍然可以从其他线程设置正在运行的线程的取消属性。（在用户请求取消任务的代码中）。

所以在这里我们可以设置取消属性。在我们正在执行的后台任务代码中，只需检查是否设置了取消属性。（我们需要在一段代码执行后进行监控）。如果设置了取消属性/是，则在该后台线程代码中调用 [Thread exit] 并释放该线程分配的所有内存以保护内存泄漏（此处自动释放池不会释放资源）。

这就是我解决问题的方法。

简单——>只需将您要取消的特定任务的属性设置为取消集。（设置取消的方法将由线程对象引用调用）。

```
 if(self.currentThread != nil && [currentThread isExecuting])
   {
      [currentThread cancel];
   } 
```

然后在您的代码中监视取消属性。如果设置了属性，则退出线程。

```
if([appDelegate.currentThread isCancelled])
 {
      [NSThread exit];
 } 
```

如果有人有比这更好的解决方案，请参考。否则它也可以正常工作。

# c# - 对连续日期进行分组

> ID：15413961
> 
> 赞同：13
> 
> 时间：2013-03-14T15:51:23.823
> 
> 标签：c#, asp.net, linq-to-sql

我有一个`List<DateTime> dates;`

我有一堂课：

```
class NonWorkingDay
{
   public DateTime Start;
   public int Days;
} 
```

我正在尝试找出一种将它们分组的干净方法。

```
public List<NonWorkingDay> GetContiguousDates(List<DateTime> dates)
{

} 
```

注意：如果周五有 NWD，而下一个是周一，则应将它们分组。周末不考虑。

例如，如果我有

```
September 3 2013
September 20 2013
September 23 2013
September 24 2013
September 30 2013
October 1  2013 
```

输出将是：

```
Start = September 3 2013, Days = 1
Start = September 20 2013, Days = 3 //weekend got skipped
Start = September 30 2013, Days = 2 
```

有没有办法做到这一点（没有一堆计数器变量）并使用 .Select 或 .Where 或其他东西。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T16:16:28.883

因此，我们将从这个通用迭代器函数开始。它接受一个序列和一个接受两个项目并返回一个布尔值的谓词。它将从源中读取项目，而一个项目连同它的前一个项目，根据谓词返回 true，下一个项目将在“下一个组”中。如果返回 false，则前一组已满，并开始下一组。

```
public static IEnumerable<IEnumerable<T>> GroupWhile<T>(this IEnumerable<T> source
    , Func<T, T, bool> predicate)
{
    using (var iterator = source.GetEnumerator())
    {
        if (!iterator.MoveNext())
            yield break;

        List<T> currentGroup = new List<T>() { iterator.Current };
        while (iterator.MoveNext())
        {
            if (predicate(currentGroup.Last(), iterator.Current))
                currentGroup.Add(iterator.Current);
            else
            {
                yield return currentGroup;
                currentGroup = new List<T>() { iterator.Current };
            }
        }
        yield return currentGroup;
    }
} 
```

我们还需要这个简单的帮助方法，它可以根据日期获取下一个工作日。如果您还想合并假期，它会从微不足道变得非常困难，但这就是逻辑所在。

```
public static DateTime GetNextWorkDay(DateTime date)
{
    DateTime next = date.AddDays(1);
    if (next.DayOfWeek == DayOfWeek.Saturday)
        return next.AddDays(2);
    else if (next.DayOfWeek == DayOfWeek.Sunday)
        return next.AddDays(1);
    else
        return next;
} 
```

现在把它们放在一起。首先，我们订购日子。（如果您确保它们始终按顺序排列，则可以删除该部分。）然后我们将连续的项目分组，而每个项目是前一个工作日的下一个工作日。

那么我们需要做的就是把一个`IEnumerable<DateTime>`连续的日期变成一个`NonWorkingDay`。因为开始日期是第一个日期，并且`Days`是序列的计数。虽然通常使用两者`First`并且`Count`会迭代源序列两次，但我们碰巧知道返回的序列`GroupWhile`实际上是`List`引擎盖下的 a，因此多次迭代它不是问题，并且得到`Count`偶数是 O(1)。

```
public IEnumerable<NonWorkingDay> GetContiguousDates(IEnumerable<DateTime> dates)
{
    return dates.OrderBy(d => d)
            .GroupWhile((previous, next) => GetNextWorkDay(previous).Date == next.Date)
            .Select(group => new NonWorkingDay
                {
                    Start = group.First(),
                    Days = group.Count(),
                });
} 
```

# css - 使用背景大小而不缩放图像

> ID：15413963
> 
> 赞同：0
> 
> 时间：2013-03-14T15:51:29.613
> 
> 标签：css

我想为 css-sprites 使用背景大小。是否可以在不让浏览器缩小图像的情况下使用此属性？我想要实现的是隐藏不包含在背景大小中的精灵部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:01:10.603

您不需要使用背景大小来隐藏精灵的某些部分。在您的 css 类中，您应该使用像素值指定要使用的精灵的哪一部分，即：

CSS：

```
#groupIcon{width:70px; height:70px;}
.groupIcon1{background:url(../images/groupIconsSprite.png) 0 0;}
.groupIcon2{background:url(../images/groupIconsSprite.png) -70px 0;}
.groupIcon3{background:url(../images/groupIconsSprite.png) -140px 0;}
.groupIcon4{background:url(../images/groupIconsSprite.png) -210px 0;}
.groupIcon5{background:url(../images/groupIconsSprite.png) -280px 0;} 
```

然后您需要做的就是更改相关 div 的类，然后将使用所需的精灵部分

```
<div id="groupIcon" class="groupIcon1"></div> 
```

或者

```
<div id="groupIcon" class="groupIcon2"></div> 
```

如果这不能解决您的问题，那么您将不得不更具体一些并提供代码片段

# c# - 泛型派生

> ID：15413964
> 
> 赞同：3
> 
> 时间：2013-03-14T15:51:30.910
> 
> 标签：c#, oop

我的情况如下：

```
public interface I {}
public class D1 : I {}
public class D2 : I {}

public class A
{
    public List<D1> Collection {get;set;}
    //Other Members
}
public class B
{
    public List<D2> Collection {get;set;}
    //Other Members
} 
```

因此，A 和 B 都有从 I 派生的元素的 List。

如何为 A 和 B 定义基类？

PS我试图概括基类：

```
class Base<T> where T : I
{
   List<T> Collection {get;set;}
}
A:Base<D1>{..}; B:Base<D2> {..} 
```

但它什么也没给我（或者我只是这么认为）：我不能这样做：

`Base<I> b; b= new A(); b= new B();`

因为不可能从`List<I>`to 转换为`List<D1>`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:59:20.627

如果你仔细想想，它确实是有道理的。

考虑一下：

```
Base<I> b = new B();
b.List.Add(new D1); 
```

从理论上讲，这将是有效的代码。`Base<I>.List`是一个`List<I>`。`D1`继承自`I`。但是我们知道 List 确实是`List<D2>`（定义在 中`B`）。因此，我们对 Add 的调用不可能工作。

如果您不需要实际将项目添加到集合中，则可以切换一些东西以使其工作：

```
public interface IBase<out T> where T : I
{
    IEnumerable<T> Collection { get; }
}

public class A : IBase<D1>
{
    IEnumerable<D1> Collection { get; private set; }

    public A(IEnumerable<D1> list)
    {
        Collection = list;
    }
}

public class B : IBase<D2>
{
    IEnumerable<D2> Collection { get; private set; }

    public B(IEnumerable<D2> list)
    {
        Collection = list;
    }
} 
```

# javascript - 不使用 JS 更改背景颜色

> ID：15413966
> 
> 赞同：3
> 
> 时间：2013-03-14T15:51:43.450
> 
> 标签：javascript, jquery, css

我是css和js的初学者。但是我有一个基本问题，我在谷歌上找不到答案：我可以在不使用 javascript 和 jquery 的情况下，只使用 css 来更改点击时 div 的背景颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:55:43.167

是的，`:target`选择器和 ID 可以做到这一点。

[https://developer.mozilla.org/en-US/docs/Using_the_:target_selector](https://developer.mozilla.org/en-US/docs/Using_the_:target_selector)

HTML：

```
<div id="demo">Demo</div>
<a href="#demo">Click me</a> 
```

CSS：

```
:target {
    background: green;
} 
```

演示：http: [//jsfiddle.net/Qptjq/2/](http://jsfiddle.net/Qptjq/2/)

甚至更酷：http: [//jsfiddle.net/Qptjq/3/](http://jsfiddle.net/Qptjq/3/)

`:target`需要 IE9+ [http://caniuse.com/#search=%3Atarget](http://caniuse.com/#search=%3Atarget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:00:28.967

是的你可以。你可以试试这个：

代码

```
<div class="eventwheniclick">Hola amigo</div> 
```

CSS 代码

```
.eventwheniclick{
    color:#4f4; 
    background:#0f0f0f;
}
.eventwheniclick:active,.eventwheniclick:focus{
    color:#f4f;
    background:#f0f0f0;

} 
```

和现场示例 [http://jsbin.com/axawet/1/edit](http://jsbin.com/axawet/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:00:45.110

无论如何，这里有一些帮助：**（Onmouseover）**

```
<html>
<head>
<style type="text/css">
.div1 {
    width:500px;
    height:300px;
    background:red;
}
.div1:hover {
    background:blue;
}
</style>
</head>

<body>
<div class="div1"></div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:03:10.733

嗯，是的，但不是在所有浏览器中，所以这就是诀窍。

**HTML**

```
<div id="myDiv">
</div> 
```

**CSS**

```
#myDiv
{
    background-color:red;
    width:100px;
    height:100px;
    -webkit-transition: background 0s;
    -webkit-transition-delay: 99999s;
        -moz-transition: background 0s;
        -moz-transition-delay: 99999s;
            -o-transition: background 0s;
            -o-transition-delay: 99999s;
                transition: background 0s;
                transition-delay: 99999s;
}
#myDiv:active
{
    background-color:blue;
    -webkit-transition-delay: 0s;
        -moz-transition-delay: 0s;
            -o-transition-delay: 0s;
                transition-delay: 0s;
} 
```

那么这里会发生什么呢？当你点击 div 时，背景会变成`0s`，但需要`99999s`变回红色，时间长了，你还可以增加它。

这不是真正要做的事情，您需要 JavaScript，但这只是一个技巧，以防您真的非常讨厌 JavaScript。

[**演示**](http://jsfiddle.net/VYfzZ/1/)

# apache - 从本地网络访问 wamp 时出现禁止错误

> ID：15413967
> 
> 赞同：1
> 
> 时间：2013-03-14T15:51:43.683
> 
> 标签：apache, permissions, wamp, local, configure

好吧，这个问题已经让我发疯了一个星期！我希望我们能一起找到解决办法。

我正在尝试将我的 wamp 服务器配置为**在本地网络上运行**（可从本地网络访问）。具体来说，我想使用本地连接从另一台计算机访问保存在 /www 文件夹中的项目。我正在为我的 wamp 服务器使用 Windows 7。但是，当我从另一台计算机运行“192.168.178.3:8080”时，出现以下错误：

> 禁止：您无权访问此服务器上的 /。

我在**端口 8080**上运行 wamp （IIS 使用端口 80）；
我的本地 IP 地址是**192.168.178.3**

我会试着解释我到目前为止所做的事情......

在 httpd.conf 中更改了以下内容：

```
Listen 192.168.178.3:8080

<Directory />
  Options FollowSymLinks
  AllowOverride None
  Order deny,allow
  Allow from all
</Directory>

<Directory "c:/wamp/www/">
#
# Possible values for the Options directive are "None", "All",
# or any combination of:
#   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
#
# Note that "MultiViews" must be named *explicitly* --- "Options All"
# doesn't give it to you.
#
# The Options directive is both complicated and important.  Please see
# http://httpd.apache.org/docs/2.4/mod/core.html#options
# for more information.
#
Options Indexes FollowSymLinks

#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
AllowOverride All
#
# Controls who can get stuff from this server.
#
# Online --> Require all granted

#   onlineoffline tag - don't remove
Order Deny,Allow
Allow from all
Allow from 127.0.0.1

Require local

</Directory>

<Directory "c:/wamp/www/project">
   allow from all
</Directory>

<Directory "cgi-bin">
  AllowOverride None
  Options None
  Order allow,deny
  Allow from all
</Directory> 
```

另外，我在 http-vhosts.conf 中插入了以下几行：

```
<VirtualHost 192.168.178:8080>
    DocumentRoot "C:/wamp/www/project"
</VirtualHost> 
```

我已重新启动所有内容并将服务器置于**联机状态**，但仍然出现相同的错误。

任何帮助或建议将不胜感激。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T15:21:25.917

我实际上设法解决了我的问题。

端口 8080 似乎引起了问题（很奇怪）。所以我重新安装了 wamp，只在 httpd.conf 中做了以下更改（使用端口 8070）：

```
Listen 192.168.178.3:8070

<Directory "cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory> 
```

此外，我必须在卡巴斯基防火墙中添加此端口的例外，以及配置路由器以转发该端口。那解决了它。

# css - 'Lato' 字体在 safari 中呈现奇怪，而不是在 chrome 或 firefox 中

> ID：15413969
> 
> 赞同：16
> 
> 时间：2013-03-14T15:51:46.680
> 
> 标签：css, fonts, cross-browser, text-rendering

我使用来自谷歌网络字体的“Lato”字体，它在除 safari 之外的所有浏览器上都能正常显示。

我在使用它`font-weight:100;`

这是不同浏览器的一些屏幕截图。知道是什么导致它变得非常薄吗？或者，如果有一种方法可以将其设置`font-weight:300;`为仅用于 safari 渲染？

我还为这个问题做了一个 js fiddle - [http://jsfiddle.net/qLHuc/1/](http://jsfiddle.net/qLHuc/1/)

**火狐**

![在此处输入图像描述](../Images/632ea15bfaa6d18cbee20ca6d5bc08ef.png)

**铬合金**

![在此处输入图像描述](../Images/7f08171fed368554cd2b8aad0764fada.png)

**苹果浏览器**

![在此处输入图像描述](../Images/90794819dc9130f9a683e2848a141a74.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T18:13:12.080

我不知道为什么，但 Safari 会在该页面上以小字体禁用亚像素抗锯齿。您可以通过应用来修复它`-webkit-font-smoothing: subpixel-antialiased`。见这里：http: [//jsfiddle.net/qLHuc/3/](http://jsfiddle.net/qLHuc/3/)

但是，我认为您应该考虑使用较重的字体。你在 Windows 上测试过这个吗？它可能看起来非常非常轻。启用亚像素抗锯齿后，OSX 会非常重地渲染文本，尤其是当文本位于深色或彩色背景时。您在 Safari 屏幕截图中看到的内容与不在 OSX 上的人看到的内容相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T07:07:39.973

当我尝试使用带有 font-weight:300 的谷歌字体时，我也遇到了类似的问题——它在除 safari 之外的所有浏览器中都能正常工作。

我通过添加下面的 css 属性解决了这个问题。

> -webkit-font-smoothing：抗锯齿；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T02:24:44.320

我遇到了一个看起来完全相同的类似问题。我`font-weight: lighter;`在使用这个谷歌字体链接时使用了 CSS：

[http://fonts.googleapis.com/css?family=Lato:300,400](http://fonts.googleapis.com/css?family=Lato:300,400)

不知何故，它显示为 100 重量！所以，我现在明确地使用`font-weight:300;`来获得我想要的东西。我不确定，但我相信这可能与我的系统上有字体有关，谷歌建议我的电脑在再次下载之前使用系统字体......如果没有这个 Q 就不会弄明白A，谢谢！

# java - 拖尾文件时Java中的巨大虚拟内存

> ID：15413980
> 
> 赞同：2
> 
> 时间：2013-03-14T15:52:04.337
> 
> 标签：java, memory, io, apache-tailer

我使用 commons IO 中的 Apache Tailer 在机器上的许多日志文件上制作了一个类似于“tail -f”的程序。基本上它在一个线程中运行，将文件作为 RandomAccessFile 打开，检查它的长度，寻找到最后等。它将收集到的所有日志行发送到客户端。

有点不舒服的是，在 Linux 上它可以显示大量的 VIRT 内存。现在它说 16.1g VIRT (!!) 和 203m RES。

我已经阅读了一些关于虚拟内存的内容，并了解到它通常“没什么好担心的”。但是仍然是 16 GB？真的很健康吗？

当我用 pmap 查看进程时，没有显示任何日志文件名，所以我猜它们不是内存映射的。我读到（man pmap）pmap 输出的“映射”列中的“[anon]”意味着“分配的内存”。这是什么意思？:)

但是， pmap -x 显示：

```
Address           Kbytes     RSS   Dirty Mode   Mapping
...
----------------  ------  ------  ------
total kB        16928328  208824  197096 
```

..所以我想它毕竟不是驻留在RAM中。但是当打开这样的文件，寻找它的结尾等时，它是如何在内存方面工作的？

我应该担心所有 GB 的 VIRT 内存吗？它现在“监视” 84 个不同的日志文件，这些文件在磁盘上的总大小为 31414239 字节。

**编辑：** 我只是在另一台不太“类似生产”的 Linux 机器上对其进行了测试，但没有得到相同的数字。VIRT 最多达到〜2,5 GB。我发现一些默认的 JVM 设置是不同的（用“java -XX:+PrintFlagsFinal -version”检查）：

```
Value              Small machine    Big machine
InitialHeapSize    62690688         2114573120
MaxHeapSize        1004535808       32038191104
ParallelGCThreads  2                13 
```

..所以，嗯..我猜它在大型机器上占据了更多堆，因为最大限制（方式）更高？而且我还认为始终明确指定这些值是个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:47:00.163

有几件事：

*   每个 Tailer 实例都有自己的线程。每个线程都有一个堆栈。默认情况下（在 64 位 JVM 上）每个线程堆栈为 1Mb，因此您将使用 84Mb 作为堆栈。您可能会考虑在启动时使用 -Xss 选项来减少这种情况。

*   大的 virt 大小不一定是坏的。但如果它转化为对物理内存的需求……而你没有那么多……那真的很糟糕。

* * *

> 嗯，我实际上是在没有任何 JVM 参数的情况下运行它的。是好还是坏？:-)

我现在知道了。是的，这很糟糕。JVM 在大型 64 位机器上的默认堆大小远远超出您的实际需要。

假设您的应用程序仅对日志行进行简单处理，我建议您将最大堆大小设置为相对较小的大小（例如 64Mb）。这样，如果您确实发生泄漏，它不会通过吞噬大量真实内存来影响系统的其余部分。

# python - WindowsError：异常：使用 PyScripter IDLE 在 Python 2.7 中使用 shapely 模块 v.1.2.16 进行浮动无效操作

> ID：15413982
> 
> 赞同：1
> 
> 时间：2013-03-14T15:52:15.367
> 
> 标签：python, error-handling, module, runtime-error, pyscripter

在 Python 2.7 和 windows 7 机器（64 位）上。[Shapely 模块 v. 1.2.16](http://toblerity.github.com/shapely/manual.html)

**该错误似乎与[PyScripter IDE](https://code.google.com/p/pyscripter/)**的使用有关。我在 Python shell 上尝试了以下代码，代码运行良好

```
from shapely.geometry import Polygon

p1 = Polygon([(0, 1), (1, 1), (1, 0), (0, 0), (0, 1)])
p2 = Polygon([(2, 4), (4, 4), (4, 2), (2, 2), (2, 4)])
p3 = Polygon([(0, 3), (3, 3), (3, 0), (0, 0), (0, 3)])

>>> p1.intersects(p2)
False
>>> p1.intersection(p2).area
0.0

>>> p1.intersects(p3)
True
>>> p3.intersection(p1).area
1.0

>>> p3.intersects(p2)
True
>>> p3.intersection(p2).area
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python27\lib\site-packages\shapely\geometry\base.py", line 366, in intersection
    return geom_factory(self.impl['intersection'](self, other))
  File "C:\Python27\lib\site-packages\shapely\topology.py", line 43, in __call__
    product = self.fn(this._geom, other._geom, *args)
WindowsError: exception: float invalid operation 
```