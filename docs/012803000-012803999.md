# StackOverflow 问答 12803000-12803999

# javascript - 如何从 DIV 中获取 js 对象？

> ID：12803003
> 
> 赞同：0
> 
> 时间：2012-10-09T15:04:04.067
> 
> 标签：javascript, google-maps

如何从我的 DIV 中获取谷歌地图对象？

这是我为设置地图所做的：

```
var map = new google.maps.Map(document.getElementById("map_canvas"),
          mapOptions); 
```

然后我想让地图做到这一点：

```
var marker = new google.maps.Marker({
  position: initialLocation,
  map: document.getElementById("map_canvas"),
  title:"AJAX!"
}); 
```

当然，这会产生错误。

> 未捕获的错误：属性值无效：[object HTMLDivElement]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:07:30.010

我想如果它需要一个地图对象，那么您需要跟踪该地图对象，以便您可以在其他功能中使用它。就像是：

```
var map;

function CreateMap(){
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function AddMarker(){
    var marker = new google.maps.Marker({
      position: initialLocation,
      map: map,
      title:"AJAX!"
    });
} 
```

# .net - 程序和功能中的大小和版本字段

> ID：12803008
> 
> 赞同：1
> 
> 时间：2012-10-09T15:04:14.077
> 
> 标签：.net, wix, installation

我有蜡设置。

当我设置这些属性时

```
<Property Id="ARPNOREMOVE" Value="yes" Secure="yes" />
<Property Id="ARPSYSTEMCOMPONENT" Value="yes" Secure="yes" /> 
```

在程序和功能中`Size`，`Version`字段为空。为什么会这样以及如何解决？

# c++ - C ++ Win32：使用SendMessage从另一个线程调用WM_PAINT，绘图没有效果

> ID：12803009
> 
> 赞同：1
> 
> 时间：2012-10-09T15:04:20.223
> 
> 标签：c++, winapi, visual-c++

我目前正在开发一个程序（C++ Win32，Visual Studio 2012），它从麦克风捕获音频信号，在另一个线程中计算傅立叶变换（你知道，以获取音频中的频率），最后在屏幕上绘制结果.

一切正常，除了绘图，所以这是一个与 GUI 相关的主题。

在 WndProc 中，当缓冲区已满并准备好处理时，我会收到一条消息，然后我调用

```
boost::thread t(&ComputationThread,data); 
```

启动计算线程。

最后，`ComputationThread`我向 GUI 线程发送一条消息以绘制数据，使用预定义的固定值和数据指针作为参数：

```
SendMessage(hWnd, WM_PAINT, PARAM_FFT_COMPUTED, (LPARAM)data); 
```

这也很好，我收到消息，我也可以将计算的数据写入文件，但是，在表单上绘图（例如 using `SetPixel`）没有效果，而当它不是时它有效果`wParam`，*例如* `PARAM_FFT_COMPUTED`当表单被调整大小。

`InvalidateRect`也没有效果。

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T15:09:54.483

您不打算发送`WM_PAINT`. 这是一个特别合成的消息。您永远不会发布或发送它。相反，您调用`InvalidateRect`或相关函数之一来让系统生成`WM_PAINT`.

而且您不打算在`WM_PAINT`消息处理程序之外的窗口上绘图。或者来自 GUI 线程以外的线程。也许您没有做任何这些事情，但它们是常见的错误，因此提及它并没有什么坏处。

如果`InvalidateRect`不起作用，那么您的代码有一些根本性的问题。您需要解决这个问题，而不是尝试通过其他机制进行绘画。

因此，解决方案是使用`InvalidateRect`和修复`WM_PAINT`处理程序中的任何损坏。如果没有看到您的`WM_PAINT`处理程序，我不想推测出了什么问题。

# c# - 异步与“旧异步委托”的一劳永逸

> ID：12803012
> 
> 赞同：72
> 
> 时间：2012-10-09T15:04:31.140
> 
> 标签：c#, asynchronous, c#-5.0

我正在尝试用新的语法替换我旧的即发即弃的调用，希望更简单，它似乎在逃避我。这是一个例子

```
class Program
{
    static void DoIt(string entry) 
    { 
        Console.WriteLine("Message: " + entry);
    }

    static async void DoIt2(string entry)
    {
        await Task.Yield();
        Console.WriteLine("Message2: " + entry);
    }

    static void Main(string[] args)
    {
        // old way
        Action<string> async = DoIt;
        async.BeginInvoke("Test", ar => { async.EndInvoke(ar); ar.AsyncWaitHandle.Close(); }, null);
        Console.WriteLine("old-way main thread invoker finished");
        // new way
        DoIt2("Test2");   
        Console.WriteLine("new-way main thread invoker finished");
        Console.ReadLine();
    }
} 
```

两种方法都做同样的事情，但是我似乎已经获得了（无需`EndInvoke`关闭句柄，这仍然有点值得商榷）我不得不等待 a 以新的方式失败`Task.Yield()`，这实际上带来了一个新的问题必须重写所有现有的异步 F&F 方法只是为了添加那个单行。在性能/清理方面是否有一些看不见的收益？

如果我无法修改后台方法，我将如何应用异步？在我看来，没有直接的方法，我必须创建一个等待 Task.Run() 的包装异步方法？

编辑：我现在看到我可能错过了一个真正的问题。问题是：给定一个同步方法 A()，我怎样才能使用`async`/`await`以一种即发即弃的方式异步调用它，而不会得到比“旧方法”更复杂的解决方案

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-10-09T16:06:02.890

避免`async void`。它在错误处理方面具有棘手的语义；我知道有些人称它为“fire and forget”，但我通常使用“fire and crash”这个短语。

> 问题是：给定一个同步方法 A()，我怎样才能以一种即发即弃的方式使用 async/await 异步调用它，而不会得到比“旧方法”更复杂的解决方案

你不需要`async`/ `await`。就这样称呼它：

```
Task.Run(A); 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-01-09T01:19:52.560

正如其他答案中所述，并且通过这篇出色[的博客文章](https://jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-tricks-part-2-async-void.html)，您希望避免使用`async void`UI 事件处理程序之外的内容。如果您想要一种*安全*的“即发即弃”`async`方法，请考虑使用此模式（感谢@ReedCopsey；此方法是他在聊天对话中给我的）：

1.  为`Task`. 它运行传递`Task`并捕获/记录任何异常：

    ```
    static async void FireAndForget(this Task task)
    {
       try
       {
            await task;
       }
       catch (Exception e)
       {
           // log errors
       }
    } 
    ```

2.  创建样式时始终使用`Task`样式方法，从不.`async``async void`

3.  以这种方式调用这些方法：

    ```
    MyTaskAsyncMethod().FireAndForget(); 
    ```

你不需要`await`它（它也不会产生`await`警告）。它还将*正确*处理任何错误，并且由于这是您放置的唯一位置`async void`，因此您不必记住在`try/catch`任何地方放置块。

如果您实际上想要正常使用，这也为您提供了*不*将该方法用作“即发即弃”方法的选项。`async``await`

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-09T15:26:47.467

在我看来，“等待”某事和“一劳永逸”是两个正交的概念。您要么异步启动一个方法并且不关心结果，要么您希望在操作完成后继续在原始上下文上执行（并且可能使用返回值），这正是 await 所做的。如果您只想在 ThreadPool 线程上执行一个方法（这样您的 UI 不会被阻塞），请选择

```
Task.Factory.StartNew(() => DoIt2("Test2")) 
```

你会没事的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:16:08.117

我的感觉是，这些“一劳永逸”的方法在很大程度上是需要一种干净的方式来交错 UI 和后台代码的人工制品，以便您仍然可以将逻辑编写为一系列顺序指令。由于 async/await 负责通过 SynchronizationContext 进行编组，因此这不再是一个问题。较长序列中的内联代码有效地成为您的“即发即弃”块，这些块以前会从后台线程中的例程中启动。它实际上是模式的反转。

主要区别在于等待之间的块更类似于 Invoke 而不是 BeginInvoke。如果您需要更像 BeginInvoke 的行为，您可以调用下一个异步方法（返回一个任务），然后在您想要“BeginInvoke”的代码之后才真正等待返回的任务。

```
 public async void Method()
    {
        //Do UI stuff
        await SomeTaskAsync();
        //Do more UI stuff (as if called via Invoke from a thread)
        var nextTask = NextTaskAsync();
        //Do UI stuff while task is running (as if called via BeginInvoke from a thread)
        await nextTask;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-07T18:45:56.123

这是我根据 Ben Adams 关于构建这种结构的推文整理的课程。HTH [https://twitter.com/ben_a_adams/status/1045060828700037125](https://twitter.com/ben_a_adams/status/1045060828700037125)

```
using Microsoft.Extensions.Logging;
using System.Diagnostics.CodeAnalysis;
using System.Runtime.CompilerServices;

// ReSharper disable CheckNamespace
namespace System.Threading.Tasks
{
    public static class TaskExtensions
    {
        [SuppressMessage("ReSharper", "VariableHidesOuterVariable", Justification = "Pass params explicitly to async local function or it will allocate to pass them")]
        public static void Forget(this Task task, ILogger logger = null, [CallerMemberName] string callingMethodName = "")
        {
            if (task == null) throw new ArgumentNullException(nameof(task));

            // Allocate the async/await state machine only when needed for performance reasons.
            // More info about the state machine: https://blogs.msdn.microsoft.com/seteplia/2017/11/30/dissecting-the-async-methods-in-c/?WT.mc_id=DT-MVP-5003978
            // Pass params explicitly to async local function or it will allocate to pass them
            static async Task ForgetAwaited(Task task, ILogger logger = null, string callingMethodName = "")
            {
                try
                {
                    await task;
                }
                catch (TaskCanceledException tce)
                {
                    // log a message if we were given a logger to use
                    logger?.LogError(tce, $"Fire and forget task was canceled for calling method: {callingMethodName}");
                }
                catch (Exception e)
                {
                    // log a message if we were given a logger to use
                    logger?.LogError(e, $"Fire and forget task failed for calling method: {callingMethodName}");
                }
            }

            // note: this code is inspired by a tweet from Ben Adams: https://twitter.com/ben_a_adams/status/1045060828700037125
            // Only care about tasks that may fault (not completed) or are faulted,
            // so fast-path for SuccessfullyCompleted and Canceled tasks.
            if (!task.IsCanceled && (!task.IsCompleted || task.IsFaulted))
            {
                // use "_" (Discard operation) to remove the warning IDE0058: Because this call is not awaited, execution of the
                // current method continues before the call is completed - https://docs.microsoft.com/en-us/dotnet/csharp/discards#a-standalone-discard
                _ = ForgetAwaited(task, logger, callingMethodName);
            }
        }
    }
} 
```

# css - 在菜单中使用填充更改 2 列页面中 body div 的宽度。在右边找到间隙

> ID：12803018
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:04:38.320
> 
> 标签：css, xhtml

我希望我的 body div 填充页面的宽度并坐在我的侧栏旁边的右侧，我不明白如何摆脱右侧创建的空白空间。当我在边栏中使用填充时，似乎出现了问题。我的代码如下。

我的 html 是

```
<div class="header">
</div>
<div class="side">
<a href="#"> menu</a> </br>
<a href="#"> menu</a> </br>
<a href="#"> menu</a> </br>
<a href="#"> menu</a> </br>
<a href="#"> menu</a>
</div>
<div class="body">
</div> 
```

我的CSS是

```
.header{
background-color: #111;
width:100%;
height:120px
}

.side{
   float:left;
display:inline;
width:20%;
height:1000px;
background-color: #777;
padding:20px;

}

.body{
float:left;
display:inline;
height:1000px;
width:70%;
background-color: #d33;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:10:49.030

忘记`float:left;`你的`.body`并添加`margin-left:20%;`而不是它。然后你的`.body`类应该适合你的页面的整个宽度。你也可以在没有的情况下工作`display:inline;`这是我的解决方案：

```
.side{
  float: left;
  width: 20%;
  height: 1000px;
  background-color: #777;
  padding: 20px;
  box-sizing: border-box;
}

.body{
  margin-left: 20%;
  height:1000px;
  background-color: #d33;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:23:16.230

除非您尝试支持 IE7 及更早版本，否则您可以尝试使用 display:table-cell 代替。它消除了我们在浮动方面必须处理的许多 BS。

您的 html 可以这样构造：

```
<div class="header"></div>
<div class="content">
    <div class="side">
         <a href="#"> menu</a>
         <a href="#"> menu</a>
         <a href="#"> menu</a>
         <a href="#"> menu</a>
         <a href="#"> menu</a>
     </div>
     <div class="body"></div>
 </div> 
```

还有你的 CSS：

```
.header {
    background-color: #111;
    width:100%;
    height:120px;
}
.content { display:table; width:100%; }
.side, .body {
    display:table-cell;
    height:1000px;
    vertical-align:top;
}
.side {
    width:20%;
    background-color: #777;
    padding:20px;
}
.side a {
    /* just as an aside, you REALLY don't need those <br/> tags... 
       just make your a tags inside your .side into block elements */
    display:block;
}
.body {
    width:80%;
    background-color: #d33;
} 
```

请参阅此 jsFiddle 以供参考：http: [//jsfiddle.net/mori57/r8H4h/](http://jsfiddle.net/mori57/r8H4h/)

# python - URI 正则表达式模式匹配

> ID：12803019
> 
> 赞同：2
> 
> 时间：2012-10-09T15:04:43.627
> 
> 标签：python, regex, pattern-matching

假设我们有以下一系列 URI：

答：/用户/a/b/c

B：/用户/a/b/f/d

C：/用户/a/b/e

D：/用户/a/k/r

我需要 python 中的正则表达式匹配除规则 B 之外的所有规则。因此它应该匹配所有以**/user/a开头的 URI，但它应该排除以****d**结尾的 URI 。

提前非常感谢！

**更新：**路径段不是单个字符，而是整个单词。例如 d 可以是“发送”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:09:47.343

怎么样：

```
^/user/a/.*[^d]$ 
```

将其读作“以 /user/a/ 开头，然后是任意数量的其他字符，然后是最后一个字符，不能是 d。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:17:27.760

试试这个：

```
(?!.*\/d)\/user\/a.* 
```

(?!.*/d) -> 否定前瞻断言，基本上是说它不以 /d 结尾

教人钓鱼：

[http://rubular.com/](http://rubular.com/)

输入测试字符串并使用正则表达式:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:34:36.763

根据Jiman的回答，我的问题的确切解决方案如下：

```
(?!.*d)\/user/a/.* 
```

请注意，d 和 a 对应于整个单词。因此，一个例子是：

```
(?!.*send)\/user/myapp/.* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:13:14.757

可能更清楚地使用：

```
a = '/user/a/b/f/d'
b = s.strip('/').split('/')
if b[:2] == ['user', 'a'] and b[-1] != 'd':
    pass # whatever 
```

或者，如果你没有用`/`'s 分割，那么：

```
if a.startswith('/user/a') and not a.endswith('d'):
    pass # whatever 
```

# objective-c - iOS - iPhone 5 无法滚动到 TableView 的底部

> ID：12803020
> 
> 赞同：0
> 
> 时间：2012-10-09T15:04:48.360
> 
> 标签：objective-c, ios, uitableview, iphone-5

我正在 iPHone 5 上测试我的应用程序。我有一个包含大约 80 个条目的 UITableView，它似乎在 iPhone 5 上工作得很好，除了最后 4 个条目在我点击底部时超出了屏幕。我必须将 tableview 拖过最终静止位置才能看到这些单元格，但是当我释放它时它会弹回被切断。

当我运行相同的构建时，我对 4S 没有任何问题。

我怎样才能解决这个问题？

谢谢！艾伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:17:25.393

我在界面生成器中意识到，如果您在底部启用了 I 栏，它会在自动调整大小时将其拉伸到 iPhone 5 的视图之外。这似乎是表格视图的默认设置。

# c# - 用于 ASP.NET 网站的数据表？

> ID：12803021
> 
> 赞同：0
> 
> 时间：2012-10-09T15:04:51.463
> 
> 标签：c#, asp.net, .net, razor, jquery-datatables

我有一个使用 Razor for WebPages 的 C# 网站，并且发现 WebGrid 使用起来有点痛苦，因为我正在尝试按行编辑数量。我找到了这个：

[http://www.datatables.net/index](http://www.datatables.net/index)

但是所有的样本都在 PHP 中。这可以在 C# 中工作吗？你用过这个/你会推荐这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:11:59.383

DataTables 与 ASP.NET 配合得最出色。我们通常将它与 ASMX Web 服务调用结合使用来填充网格，使用`List<SomeObject>`或使用`DataTable`（但无法将 DataTable（.NET 类型）本地转换为 JSON（用于 WS 响应），所以如果这是您想要的路线要采取，您需要编写一个包装器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:09:01.770

`DataTables`主要是 javascript/jquery 并且适用于大多数服务器端语言，包括`ASP.net`：

[http://www.datatables.net/development/server-side/asp_net](http://www.datatables.net/development/server-side/asp_net)

请记住，当您的页面显示在浏览器中时，服务器端对象（如 datagrids、gridviews、datalists 等）只会转换为 html 表格。 `DataTables`只允许您获取表的句柄（id）并将其转换为`datatable`简单的 jquery。

从网站上的示例：

`$('#example').dataTable();`

假设一个带有 id 的表`example`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:09:15.293

DataTables 是一个基于 javascript 的客户端网格。只要您以预期的格式提供输出，它绝对可以与任何服务器端技术一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:09:48.527

这实际上是一个 jQuery 扩展，与 PHP 无关。

无论您在网络服务器上使用何种技术（无论是 .NET 还是 PHP，...），您都可以将 DataTable 与任何 HTML 表一起使用。DataTable 允许您的用户对数据进行一些花哨的操作：在客户端计算机上进行排序、过滤等。但它不包括编辑功能，虽然有一个[编辑器](http://editor.datatables.net/)插件可以做到这一点，但它的价格相当高：*5 位开发人员 550 美元*。（有免费试用）

# .net - 调用 SetParent 停止使用现代窗口颜色的表单

> ID：12803024
> 
> 赞同：0
> 
> 时间：2012-10-09T15:04:59.980
> 
> 标签：.net, winapi

我调用这些 User32.DLL API 调用来嵌入一个窗体窗体作为另一个窗口的子窗口......

```
SetWindowLong(frm.Handle.ToInt32, GWL_STYLE, WS_CHILD Or WS_DLGFRAME Or WS_BORDER)
SetParent(frm.Handle.ToInt32, m_intOldParent) 
```

我注意到在 Windows 8 中，这些调用了 SetParent 的窗口的样式看起来有点奇怪，它们似乎使用旧的 SystemColors.ActiveCaption 和 SystemColors.ActiveCaptionGradient 颜色来显示标题栏，而不是新的 Windows 8 颜色。

这让我的子窗口看起来有点奇怪。

有人知道如何在我的子窗口中获得 Windows 8 样式吗？

注意：认为它在 Windows 7 中也是一样的。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:22:36.673

我最终做的是这样的：

*   将我打开的表单设置为没有边框
*   第二个“主机”表单也没有边框，但边缘有一些标签和按钮，看起来有点像 Win7/Win8 标题栏和窗口关闭按钮。
*   将第一个表单添加到主机表单上的面板（停靠在面板内填写）
*   在鼠标按下时添加了一些代码，以允许用户使用表单边缘调整表单大小

我也停止使用 SetWindowLong API 调用，只是这样做了：

```
ParentForm.Controls.Add(ChildForm) 
```

这似乎工作得更好一点，关于焦点和激活哪个窗口的奇怪副作用更少。

# javascript - javascript中的array_search递归

> ID：12803029
> 
> 赞同：1
> 
> 时间：2012-10-09T15:05:17.067
> 
> 标签：javascript, jquery, logic, business-logic

```
function array_searchRecursive( $needle, $haystack, $strict=false, $path=array() )
{
    if( !is_array($haystack) ) {
        return false;
    }

    foreach( $haystack as $key => $val ) {

        if( is_array($val) && $subPath = array_searchRecursive($needle, $val, $strict, $path) ) {
            $path = array_merge($path, array($key), $subPath);

            return $path;
        } else if( (!$strict && $val == $needle) || ($strict && $val === $needle) ) {

            $path[] = $key;
            return $path;
        }
    }
    return false;
} 
```

有没有人向我建议相同的功能，可以在 javascript 中实现。参考[http://www.php.net/manual/en/function.array-search.php#68424](http://www.php.net/manual/en/function.array-search.php#68424)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:39:27.420

确实下划线（或者可能表现更好：lodash）是你的人。JavaScript 在很大程度上是一种函数式语言，并且在最新的规范中包含下划线提供的大多数功能。对于浏览器兼容，仍建议使用下划线。

在您的情况下，最好的下划线功能是：

```
var haystack = [
  {a: 1}, [{b: 2}, {c: 3}, [{d: 4}, {e: 5}, [{f: 6}, {g: 7}] ] ]
],
needle = 4;

//Search
var result = _(haystack).chain() //chain so we can keep underscoring
  .flatten() //flatten the array
  .find(function(o) { //find the first element that matches our search function
    return _(o).chain() //chain so we can keep underscoring
      .values() //get all object values as an array
      .contains(needle) //see if any of our values contains the needle
      .value(); //get out of the chain
  })
  .value(); //get out of the chain

//In short:
var result = _(haystack).chain().flatten().find(function(o) { return _(o).chain().values().contains(needle).value(); }).value(); 
```

当然，您必须对此进行微调并实施您的 $strict 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:14:11.317

这可能会给你一个开始。未经彻底测试或高度优化，并假设使用 jQuery（用其他实现替换 jQuery 实用程序函数应该不是大问题）。

```
function searchArrayRecursive(needle, haystack, strict) {

    function constructPath(needle, haystack, path, strict) {
        if (!$.isArray(haystack)) {
            return false;
        }
        var index;
        for (index = 0; index < haystack.length; index++) {
            var value = haystack[index];
            var currentPath = $.merge([], path);
            currentPath.push(index);

            if ((strict && value === needle) || (!strict && value == needle)) {
                return currentPath;
            }
            if ($.isArray(value)) {

                var foundPath = constructPath(needle, value, currentPath, strict);
                if (foundPath) {
                    return foundPath;
                }
            }
        }

        return false;
    }

    return constructPath(needle, haystack, [], strict);
} 
```

[http://jsfiddle.net/b8TxJ/2/](http://jsfiddle.net/b8TxJ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:10:13.890

如果您愿意使用库，我认为 Underscore.js 具有可以为您提供所需内容的功能，可能使用 _.find()、_.pluck() 或 _.pick()。还有很多其他方法可以帮助解决这个问题。

*   [http://underscorejs.org/#find](http://underscorejs.org/#find)
*   [http://underscorejs.org/#pluck](http://underscorejs.org/#pluck)
*   [http://underscorejs.org/#pick](http://underscorejs.org/#pick)

如果您想在核心 JS 中执行此操作，请查看 Underscore 源代码的封面，其中包含 FANTASTIC 注释/文档：

[http://underscorejs.org/docs/underscore.html](http://underscorejs.org/docs/underscore.html)

# mapping - 如何表示消息映射/转换？

> ID：12803032
> 
> 赞同：0
> 
> 时间：2012-10-09T15:05:20.070
> 
> 标签：mapping, uml, diagram, messages

我希望有一种或多或少正式的方式来表示系统中不同组件如何使用消息以及它们如何被这些组件转换。

我在Excel中做过某种主数据矩阵，但是很难表示某些类型的关系，比如消息之间的字段映射。

是否有任何 UML 方法来解决这个问题？DFD 并不是真正面向消息的，因此对这种情况没有帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:36:02.263

首先，您必须使用类图来定义您的消息，每条消息都是一个类。然后你可以做一个活动图来显示消息如何在系统之间流动。然后为每个系统创建一个描述系统如何与消息交互的序列图。

我们不喜欢 UML 的复杂性吗？:-)

# java - 比较两个画布的差异

> ID：12803037
> 
> 赞同：0
> 
> 时间：2012-10-09T15:05:36.793
> 
> 标签：java, android, android-canvas

假设我有一个用户通过在画布上拖动或点击来在画布上绘制颜色。我如何检查此操作是否实际更改了画布。

即，如果用户使用红色绘画并且他们拖过的区域已经是红色，那么图像实际上将完全相同。如何将更新后的画布图像与旧画布图像进行比较，看看它是否真的改变了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:51:21.757

您可以比较与画布关联的位图。[您可以在Comparing Bitmap images in Android](https://stackoverflow.com/questions/6120439/comparing-bitmap-images-in-android)中看到几个解决方案

# sql - sql一次查询两次获取用户名

> ID：12803040
> 
> 赞同：0
> 
> 时间：2012-10-09T15:05:55.230
> 
> 标签：sql

我有以下 3 个表：

```
users:
id, username

folders:
id,fkuser(connects to user.id)

folder_comments:
id,fkuser(connects to user.id), fkfolder(connects to folder.id) 
```

我想获取评论者用户名（`folder_comments.fkuser->user.id<->user.username`）**和**文件夹所有者的用户名（`folder_comments.fkfolder->folder.id<->folder.fkuser->user.id<->user.username`）；

我想到的查询是部分的：

```
SELECT `folder_comments`.*, `folder`.`fkuser` as folderuserid, `user`.`firstname` as username
FROM `folder_comments` 
                left join `folder` on `folder_comments`.`fkfolder` = `folder`.`id`
                left join `user` on `folder_comments`.`userid` = `user`.`id` 
```

如何获取文件夹的所有者用户名？

编辑 ：

我试过了：

```
 SELECT `folder_comments`.*, `folder`.`fkuser` as folderuserid, `user`.`firstname` as username, , `user`.`firstname` as folderowner
        FROM `folder_comments` 
                        left join `folder` on `folder_comments`.`fkfolder` = `folder`.`id`
                        left join `user` on `folder_comments`.`userid` = `user`.`id`
left join `user` on `folder`.`fkuser` = `user`.`id` 
```

但我得到一个错误`Not unique table/alias: 'user'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:20:03.083

不确定我知道您的架构中的位置

但你这样做。这是从人们那里得到妈妈和爸爸的名字

```
Select Child.Name,Mothers.Name, Father's.Name
From Child
Inner Join People Mothers On Child.MotherID = Mothers.PersonID
Inner Join People Fathers On Child.FatherID = Fathers.PersonID 
```

因此，根据需要多次加入表，但给每个人一个不同的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:22:21.087

多次使用用户加入，如下所示：

```
select folder.*, userfolder.username, comment.*, usercomment.username
  from folders folder inner join
  user userfolder on folder.fkuser = userfolder.id inner join
  comments comment on comment.fkfolder = folder.id inner join
  user usercomment on comment.fkuser = usercomment.id 
```

在连接中多次使用同一个表时，使用不同的别名很重要

# c++ - 已删除主机指针的 Opencl 缓冲区

> ID：12803043
> 
> 赞同：1
> 
> 时间：2012-10-09T15:06:04.473
> 
> 标签：c++, opencl

我有一种情况，我（可能）想尝试使用 a `std::vector`（或更准确地说是它的存储）作为`buffer`带有`CL_MEM_USE_HOST_PTR`. `vector`如果调整大小并因此重新分配其内存，这显然会出现问题。对 my 的修改`vector`是在程序的阶段，`buffer`没有使用，所以我的想法是检查缓冲区的主机指针是否与指向第一个元素的指针相同，`vector`如果不是则重新创建缓冲区案子。我的问题是我无法确定拥有 a 是否合法，如果未使用`buffer`主机指针已被释放的主机指针。`buffer`

我当然可以在使用它的阶段结束时销毁缓冲区，但是我事先不知道向量内容和/或长度是否被修改，如果不是，我宁愿保留旧缓冲区，因为 afaik 可以让它保持缓存在设备上，从而减少需要通过 pci-e 总线传输的数据量。

**我的问题是**：如果该对象仅存在但未在内核中使用，是否允许`buffer`使用`CL_MEM_USE_HOST_PTR`其主机指针已经删除主机指针的opencl。`buffer`

作为记录，我目前正在针对 nvidias opencl 实现进行开发，使用 Tesla 2070 作为 gpu，并且该软件可能会在不久的将来移植到 amd gpus/cpus（后者是使用的主要原因`CL_MEM_USE_HOST_PTR`）。因此，如果答案是特定于实现的，那么这些是主要目标，尽管我对一般答案更感兴趣，因为我不知道以后还会运行什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:20:42.813

我相信如果您不尝试更改 OpenCL 实现下的缓冲区会更安全。正如你所建议的，这可能会带来问题。例如：

```
vector<int> v(25);
cl_mem buf = clCreateBuffer(.v.data(),.CL_MEM_USE_HOST_PTR,...);
v.resize(1000); //Or some other way of changing the size of the stack
clReleaseMemObject(buf); 
```

当内存被释放时，它将尝试将数据同步回原始缓冲区（已被释放），这可能会导致段错误或其他一些令人讨厌的内存问题。

根据关于[这个线程](http://www.khronos.org/message_boards/viewtopic.php?f=41&t=4145#wrapheader)的一些讨论，应该假设一旦您使用`CL_MEM_USE_HOST_PTR`标志调用 clCreateBuffer，您已经将该内存的控制权交给 OpenCL 平台，并且您只能通过调用释放该内存缓冲区来回收该内存。 .

虽然在您的具体实施中可能并非如此，但我认为总体而言，建议发布数据。这样，如果您的底层系统将来发生变化，您将不会看到与此行为相关的错误。

或者，您可以扩展向量类，以便在调整基础数据结构的大小时，您可以在设备上释放和重新分配数据。不过，我不确定这会有多困难，或者它会影响你程序的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:13:45.630

您的问题的答案取决于用于创建缓冲区的标志。如果您使用 CL_MEM_ALLOC_HOST_PTR 或 CL_MEM_COPY_HOST_PTR 调用[clCreateBuffer](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateBuffer.html)，那么 OpenCL 实现已经具有您提供的主机位置内容的副本（在 CL_MEM_ALLOC_HOST_PTR 的情况下，也许 - 它应该用于 GPU 实现）。现在您可以随意使用该主机指针做任何您想做的事情，而 OpenCL 实现并不关心。

另一方面，如果您使用 CL_MEM_USE_HOST_PTR （我不认为您这样做，甚至因为这是一个 GPU 设备），那么内核很可能会在执行时崩溃或提供垃圾结果（基于其中的内容）现在的位置）。

希望这可以帮助！

# c# - 如何在 Windows 安装程序中更改自定义文件夹的路径？

> ID：12803045
> 
> 赞同：1
> 
> 时间：2012-10-09T15:06:04.643
> 
> 标签：c#, vb.net, winforms, windows-installer, installation

在我项目的安装程序文件中，我在文件系统中添加了一个自定义文件夹。我希望在安装时创建此文件夹并添加数据。我的问题是这个文件夹的路径将在安装时决定，所以，我想使用它的“属性”属性来改变这个路径。但我不确定如何在代码中使用此属性。[这](http://msdn.microsoft.com/en-US/library/3d6wt21y%28v=vs.80%29.aspx)是该属性的 msdn 链接。您能否建议如何在代码中使用它并更改路径。也期待一些小的代码示例或参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:43:33.977

为此，您需要使用公共属性。只需在表 Directory 中使用大写字母设置目录名称，例如 CUSTOMDIR，并在安装期间使用命令行传输此属性：

```
msiexec /i installer.msi CUSTOMDIR="C:\temp" 
```

# sql - 为什么SQL语句分为DDL、DML、DCL和TCL语句？

> ID：12803047
> 
> 赞同：2
> 
> 时间：2012-10-09T15:06:06.073
> 
> 标签：sql

是否有将这些陈述分组的特定需求，或者这样做是为了在逻辑上对各种类型的陈述进行命名（在讨论、参考文档等中）？

是否存在将这些语句分成这些子组很重要的用例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:12:32.960

DDL（数据定义语言）--> 用于定义数据结构和模式，如 Create 和 Alter 命令。

DML（数据操作语言）--> 用于管理具有模式对象的数据，例如选择命令。

DCL（数据控制语言）--> 用于控制数据，如 Revoke 和 Grant 命令。

TCL（事务控制语言）--> 用于管理 DML 语句（如 Commit）所做的更改。

这些是分类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T15:13:02.367

这些是分类，它们退出的原因与其他任何其他分类都存在的原因相同......

关于用例，我几乎看不到您会使用这些术语的情况，但如果您是 SQL Server 管理工具的业务分析师，您可能会说您不希望用户访问任何类型的 DDL 语句，这意味着用户无法在数据库上创建对象...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T15:13:16.443

没有必要这样。

但在讨论 SQL 时，它确实提供了一个句柄。我经常使用 DML 和 DDL 作为速记。

例子：

> MySQL 不支持事务 DDL，但 SQL Server 支持。

每个人（希望）都知道你的意思而不说

> MySQL 不支持事务性 CREATE、ALTER 和 DROP 语句...

他们的意思：[http ://www.orafaq.com/faq/what_are_the_difference_between_ddl_dml_and_dcl_commands](http://www.orafaq.com/faq/what_are_the_difference_between_ddl_dml_and_dcl_commands)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:12:07.917

他们没有分裂。根据它们在数据库上执行的操作类型，它们被分类为类型。

# xsd - 关于在 xsi:type 上使用 xs:unique 在序列中

> ID：12803048
> 
> 赞同：1
> 
> 时间：2012-10-09T15:06:10.303
> 
> 标签：xsd, unique

可以对元素的类型有唯一的约束吗？

假设我有一个诺亚方舟，其中 Animal/@name 必须是唯一的。

下面是一个不对模式进行验证的 XML：

```
<ns:NoahsArk xmlns:ns="http://www.xxx.com" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.xxx.com Persons.xsd"> 
    <Animal xs:type="ns:Dog" ns:name="Gipsy" ns:pedigree="caniche"/>
    <Animal xs:type="ns:Spider" ns:name="Gipsy" ns:legNumber="5"/>
</ns:NoahsArk>

<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ns="http://www.xxx.com"
targetNamespace="http://www.xxx.com" elementFormDefault="unqualified" attributeFormDefault="qualified"> 
    <xs:element name="NoahsArk">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Animal" maxOccurs="unbounded" type="ns:Animal"/>
            </xs:sequence>
        </xs:complexType>
        <xs:unique name="NameUnicity">
            <xs:selector xpath="Animal"/>
            <xs:field xpath="@ns:name"/>
        </xs:unique>
    </xs:element>
    <xs:complexType name="Animal" abstract="true">
        <xs:attribute name="name" type="xs:string" use="required"/>
    </xs:complexType>
    <xs:complexType name="Dog">
        <xs:complexContent>
            <xs:extension base="ns:Animal">
                <xs:attribute name="pedigree" type="xs:string" use="required"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="Spider">
        <xs:complexContent>
            <xs:extension base="ns:Animal">
                <xs:attribute name="legNumber" type="xs:integer" use="required"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>    
</xs:schema> 
```

这很好，但现在假设我想要一个诺亚方舟，其中 Animal/@xsi:type 是独一无二的。

我试过这个约束：

```
<xs:unique name="AnimalUnicity">
    <xs:selector xpath="Animal"/>
    <xs:field xpath="@xs:type"/>
</xs:unique> 
```

但是这个 XML 仍然有效 :(

```
<?xml version="1.0" encoding="UTF-8"?>
<ns:NoahsArk xmlns:ns="http://www.xxx.com" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.xxx.com Persons.xsd">
    <Animal xs:type="ns:Dog" ns:name="Pierre-Louis" ns:pedigree="doberman"/>
    <Animal xs:type="ns:Spider" ns:name="Gipsy" ns:legNumber="5"/>
</ns:NoahsArk> 
```

有任何想法吗 ？

谢谢，-E

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:01:38.013

All the implementations I could test on XSD 1.0 seem to agree on one thing here: the [identity constraints](http://www.w3.org/TR/xmlschema-1/#cIdentity-constraint_Definitions) will be tested only if the selectors/fields match XML nodes for which an associated **user defined** schema component can be found. [xsi:type](http://www.w3.org/TR/xmlschema-1/#xsi_type)虽然它是与模式相关的标记，但由于其意图不同，因此此处不考虑。检查 Schematron 断言是否在这里有帮助可能在学术上很有趣……

更新：我也包括了 Schematron 版本；因为我在 .NET 上，所以我正在运行 ISO 版本、带有 Microsoft 扩展的 XSLT1。

```
<?xml version="1.0"?>
<sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron" xmlns:ms="urn:schemas-microsoft-com:xslt">
    <sch:ns uri="http://www.w3.org/2001/XMLSchema-instance" prefix="xsi"/>
    <sch:ns uri="urn:schemas-microsoft-com:xslt" prefix="ms"/>

   <sch:pattern id="about-using-xsunique-on-xsitype-in-a-sequence">
      <sch:rule context="//Animal/@xsi:type">
        <sch:let name="targetNodeSet" value="//Animal/@xsi:type"/>
        <sch:assert test="count($targetNodeSet[concat('{', ms:namespace-uri(.), '}', ms:local-name(.)) = concat('{', ms:namespace-uri(current()), '}', ms:local-name(current()))]) = 1">
            Only one-of-a-kind animal is allowed.</sch:assert>
        <sch:assert test="count($targetNodeSet[. = current()]) = 1">
            Only one-of-a-kind animal is allowed (naive).</sch:assert>
      </sch:rule>
   </sch:pattern>
</sch:schema> 
```

我定义了两个断言，一个“幼稚”的断言，它在文本上比较 xsi:type 属性的值；以及将它们比较为**QName**的“正确”。

对于这个 XML：

```
<ns:NoahsArk xmlns:ns1="http://www.xxx.com" xmlns:ns="http://www.xxx.com" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.xxx.com Persons.xsd">  
    <Animal xs:type="ns:Dog" ns:name="A" ns:pedigree="caniche"/> 
    <Animal xs:type="ns1:Dog" ns:name="B" ns:pedigree="caniche"/> 
    <Animal xs:type="ns1:Dog" ns:name="C" ns:pedigree="caniche"/> 
</ns:NoahsArk> 
```

这是结果：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<svrl:schematron-output title="" schemaVersion="" xmlns:svrl="http://purl.oclc.org/dsdl/svrl" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:schold="http://www.ascc.net/xml/schematron" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:iso="http://purl.oclc.org/dsdl/schematron" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ms="urn:schemas-microsoft-com:xslt">
    <svrl:ns-prefix-in-attribute-values uri="http://www.w3.org/2001/XMLSchema-instance" prefix="xsi"/>
    <svrl:ns-prefix-in-attribute-values uri="urn:schemas-microsoft-com:xslt" prefix="ms"/>
    <svrl:active-pattern id="about-using-xsunique-on-xsitype-in-a-sequence" name="about-using-xsunique-on-xsitype-in-a-sequence"/>
    <svrl:fired-rule context="//Animal/@xsi:type"/>
    <svrl:failed-assert test="count($targetNodeSet[concat(', ms:namespace-uri(.), ', ms:local-name(.)) = concat(', ms:namespace-uri(current()), ', ms:local-name(current()))]) = 1" location="/@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']">
        <svrl:text>
            Only one-of-a-kind animal is allowed.</svrl:text>
    </svrl:failed-assert>
    <svrl:fired-rule context="//Animal/@xsi:type"/>
    <svrl:failed-assert test="count($targetNodeSet[concat(', ms:namespace-uri(.), ', ms:local-name(.)) = concat(', ms:namespace-uri(current()), ', ms:local-name(current()))]) = 1" location="/@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']">
        <svrl:text>
            Only one-of-a-kind animal is allowed.</svrl:text>
    </svrl:failed-assert>
    <svrl:failed-assert test="count($targetNodeSet[. = current()]) = 1" location="/@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']">
        <svrl:text>
            Only one-of-a-kind animal is allowed (naive).</svrl:text>
    </svrl:failed-assert>
    <svrl:fired-rule context="//Animal/@xsi:type"/>
    <svrl:failed-assert test="count($targetNodeSet[concat(', ms:namespace-uri(.), ', ms:local-name(.)) = concat(', ms:namespace-uri(current()), ', ms:local-name(current()))]) = 1" location="/@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']">
        <svrl:text>
            Only one-of-a-kind animal is allowed.</svrl:text>
    </svrl:failed-assert>
    <svrl:failed-assert test="count($targetNodeSet[. = current()]) = 1" location="/@*[local-name()='type' and namespace-uri()='http://www.w3.org/2001/XMLSchema-instance']">
        <svrl:text>
            Only one-of-a-kind animal is allowed (naive).</svrl:text>
    </svrl:failed-assert>
</svrl:schematron-output> 
```

正如您从失败的断言中看到的那样，“天真的”方式仅标记 3 个实例中的 2 个；同样，将 xsi:type 属性的值作为文本进行比较与比较**QName**不同（这就是 @xsi:types 的含义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:21:02.580

感谢您的答复。

只是为了好玩，我尝试使用 Schematron ；但是我无法让它工作，因为我发现的 XPath 表达式使用氧气或 XMLSpy 中不可用的“current()”，所以我无法测试它:(

```
 <?xml version="1.0" encoding="UTF-8"?>
    <schema xmlns="http://www.ascc.net/xml/schematron" xmlns:ns="http://www.xxx.com" >
        <ns prefix="ns" uri="http://www.xxx.com"/>
        <ns prefix="xs" uri="http://www.w3.org/2001/XMLSchema-instance"/>
            <pattern name="AnimalNameUnicity">
                <rule context="Animals/Animal">
                    <assert test="count(//@ns:name[ . = current()]) > 1">name not unique !</assert>        
                </rule>
            </pattern> 
    </schema> 
```

# javascript - 有没有办法根据单选按钮单击来填充复选框？

> ID：12803049
> 
> 赞同：0
> 
> 时间：2012-10-09T15:06:14.767
> 
> 标签：javascript, jquery, html

我有三个单选按钮和 17 个复选框。我希望选中的单选按钮可以填充一组复选框，同时仍为用户提供一种在必要时选择更多复选框的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:10:27.493

JavaScript 有能力做到这一点（通过 jQuery 变得更容易）。您需要在单选按钮上设置“onClick”功能，然后可以设置复选框的选中值。例如，此功能将根据单击的单选按钮打开/关闭复选框。

```
function CheckBoxes(selection) {
    if(selection == 1) {
        // Checks checkbox with id "CheckBoxID"
        $("#CheckBoxID").prop("checked", true);
        // Unchecks checkbox with id "CheckBoxID2"
        $("#CheckBoxID2").prop("checked", false);
    }
    else if(selection == 2) {
        // Unchecks checkbox with id "CheckBoxID"
        $("#CheckBoxID").prop("checked", false);
        // Checks checkbox with id "CheckBoxID2"
        $("#CheckBoxID2").prop("checked", true);
    }
    // etc, depending on how many radio buttons and checkboxes you have
} 
```

可以通过以下方式使用单选按钮调用此函数：

```
<input type="radio" id="radio1" name="someName" value="someValue1" onclick="CheckBoxes(1)">
<input type="radio" id="radio2" name="someName" value="someValue2" onclick="CheckBoxes(2)">
<input type="radio" id="radio3" name="someName" value="someValue3" onclick="CheckBoxes(3)"> 
```

这就是我的想法，其他人会告诉你不要在 html 中分配 OnClick，而是通过这样做来使用 JavaScript 订阅它：

```
$('#radio1').click(function(){CheckBoxes(1)}); 
```

[正确显示它的 JSFiddle](http://jsfiddle.net/BBzSf/18/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:12:07.290

[检查这个小提琴](http://jsfiddle.net/sushanth009/BBzSf/1/)

```
$('#a,#b,#c').on('click', function() {

    if( $(this).is(':checked')){
       $('.'+ this.id).show();
    }
});​ 
```

# javascript - 使用 jquery 加水印的 asp.net 表单验证

> ID：12803056
> 
> 赞同：1
> 
> 时间：2012-10-09T15:06:32.343
> 
> 标签：javascript, jquery, asp.net

我有一个带有水印的 asp.net 表单，如下所示：

```
 <form id="form1" runat="server">

<div class="form-inner">
                            <asp:TextBox ID="firstname" runat="server" value="First Name *" title="First Name *"
                                class="water"></asp:TextBox>
                            <asp:TextBox ID="lastname" runat="server" value="Last Name *" title="Last Name *"
                                class="water"></asp:TextBox>
                            <%--<input name="" value="Address *" title="Address *" type="text" class="water"/>--%>
                            <asp:TextBox ID="Address" runat="server" value="Address *" title="Address *" class="water"></asp:TextBox>
                            <%-- <input name="" value="City *" title="City *" type="text" class="water"/>--%>
                            <asp:TextBox ID="City" runat="server" value="City *" title="City *" class="water"></asp:TextBox>
                            <div>
                                <asp:DropDownList ID="drpStates" runat="server" CssClass="inpt">                                    
                                <asp:ListItem Selected="True">State*</asp:ListItem>
                                    <asp:ListItem>ACT</asp:ListItem>
                                    <asp:ListItem>NSW</asp:ListItem>
                                    <asp:ListItem>NT</asp:ListItem>
                                    <asp:ListItem>SA</asp:ListItem>
                                    <asp:ListItem>VIC</asp:ListItem>
                                    <asp:ListItem>WA</asp:ListItem>
                                </asp:DropDownList>

                                <%--  <input class="inpt" name="postalcode" id="postalcode" value="Postcode *" type="text"/>--%>
                                <asp:TextBox ID="postalcode" runat="server" class="inpt" title="Postcode *" value="Postcode *"></asp:TextBox>
                            </div>
                            <%-- <input name="" value="Phone number *" title="Phone number *" type="text" class="water"/>--%>
                            <asp:TextBox ID="txtPhoneNumber" runat="server" value="Phone number *" title="Phone number *"
                                class="water"></asp:TextBox>
                            <%-- <input name="" value="Email *" title="Email *" type="text" class="water"/>--%>
                            <asp:TextBox ID="txtEmail" runat="server" value="Email *" title="Email *" class="water"></asp:TextBox>
                            <div class="form-term">
                                <div class="chk-up">
                                    <%--<input name="" type="checkbox" value="" />--%>
                                    <asp:CheckBox ID="chkInsurance" runat="server" Text="Yes, include my free $ 15,000 Insurance" />
                                </div>
                                <div>
                                    <%--<input name="" type="checkbox" value="" checked="checked" />--%>
                                    <asp:CheckBox ID="chkNews" runat="server" Text="Yes, I would like to receive latest news" />
                                </div>
                            </div>
                            <div class="send-btn">
                                <%-- <a href="#">SEND ME A SECURE GOLD PACK</a>--%>
                                <asp:LinkButton ID="lnkSendEmail" runat="server" OnClick="lnkSendEmail_Click">SEND ME A SECURE GOLD PACK</asp:LinkButton>
                            </div>
                        </div> 
```

和水印代码是这样的：

```
jQuery(document).ready(function () {

        $(".water,.inpt").each(function () {
            $tb = $(this);
            if ($tb.val() != this.title) {
                $tb.removeClass("water");
            }
        });

        $(".water,.inpt").focus(function () {
            $tb = $(this);
            if ($tb.val() == this.title) {
                $tb.val("");
                $tb.removeClass("water");
            }
        });

        $(".water,.inpt").blur(function () {
            $tb = $(this);
            if ($.trim($tb.val()) == "") {
                $tb.val(this.title);
                $tb.addClass("water");
            }
        });
}); 
```

我想验证这个表格，但由于水印，它没有被验证。

我正在使用这个插件进行验证。

[http://jquery.bassistance.de/validate/demo/themerollered.html](http://jquery.bassistance.de/validate/demo/themerollered.html)

请建议我解决它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:50:24.847

对初始化验证器的方式进行一些假设，您可以尝试替换验证器的元素和表单功能（[http://docs.jquery.com/Plugins/Validation/Validator/element#element](http://docs.jquery.com/Plugins/Validation/Validator/element#element)和[http:// docs.jquery.com/Plugins/Validation/Validator/form](http://docs.jquery.com/Plugins/Validation/Validator/form)）

下面是一个元素函数的例子：

```
 $().ready(function() {
        var myValidator = $("form")
                          .validate({...,
                                success: ...,
                                rules:... 
                         });

        // save the 'element' function              
        myValidator.elementSave = myValidator.element;
        // create a new 'element' function that reinit the unchanged watermarked input
        // before performing check with the 'saved' element function
        myValidator.element = function (elem) {
            if (!($(elem).is('.water,.inpt')))
                return myValidator.elementSave(arguments);
            else {
                var save = $(elem).val();
                if (save == elem.title)
                    $(elem).val('');
                var result = myValidator.elementSave(arguments);
                $(elem).val(save);
                return result;
                }
        };
    }); 
```

# android - Android 可扩展列表视图 - onClickListener 用于具有持久状态的子项中的按钮

> ID：12803064
> 
> 赞同：2
> 
> 时间：2012-10-09T15:06:57.463
> 
> 标签：android, android-listview, expandablelistview

我目前在创建 ExpandableListView 时遇到问题。我不确定目前发生了什么，但我会解释我正在尝试做的事情。

我以编程方式分配某一天的膳食。每顿饭（标题是组）中都有一个包含投票和订购按钮的子项。点餐时，两者都更改为“已订购”。如果下一个订单，前一个订单按钮将返回到“订单”状态，而选中的订单将变为已订购。这与投票相同。我通过为我的按钮设置一个点击监听器来解决这个问题，该按钮循环遍历所有其他按钮并将它们的文本设置为“order”/“vote”并将当前按钮的文本设置为有序。

这在一些极其罕见的情况下可以正常工作 - 但大多数情况下，当我为某个项目订购/投票时，它会将选定的项目更改为“已订购”，并将可扩展列表视图中的最后一个元素也更改为已订购。然后，如果我订购，比如说第三个元素，关闭并重新打开第二个元素，它也会变为有序，反之亦然。有时他们都改回订单或全部更改为已订购。我发现很难弄清楚为什么会发生这种情况。

我相信这可能与 getChildView 函数有关。当我遍历打开每个元素的列表时，即使已为其分配了适当的数据，也永远不会为最后一个元素设置视图。

我误解了 ExpandableListView 的一个主要概念还是有别的什么。

这是我认为可能有错误的getChildView函数。我还将在下面提供其他相关课程的链接。如果您需要更多信息，请随时询问。

```
//Static class view holder
static class ViewHolder {
    protected Button oBut;
    protected Button vBut;
    protected TextView description;
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    //Getting the appropriate child for the group and position
    ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);

    View view = null;

    //Set up if doesn't exist
    if (convertView == null) {
        Log.d("OnClickListener", "groupPosition: " + groupPosition + " childPosition: " + childPosition);
        Log.d("OnClickListener", "View being set up for: " + child.getName() + " desc: " + child.getDescription());

        LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
        view = infalInflater.inflate(R.layout.expandlist_child_item_todays, null);

        //Attempt at viewholder
        final ViewHolder holder = new ViewHolder();
        holder.description = (TextView) view.findViewById(R.id.mealDescription);
        holder.vBut = (Button)view.findViewById(R.id.vote);
        holder.oBut = (Button)view.findViewById(R.id.order);

        view.setTag(holder);
    }
    else {
        view = convertView;
    }

    ViewHolder holder = (ViewHolder) view.getTag();

    holder.description.setText(child.getDescription());
    holder.description.setTag(child.getTag());

    holder.oBut.setOnClickListener(new OrderOnClick(groups, (Activity)context, holder.oBut, view, child));
    holder.vBut.setOnClickListener(new VoteOnClick(groups, (Activity)context, holder.vBut, view, child));

    return view;
} 
```

[ExpandListAdapterTodays](http://pastebin.com/F7schUXr)（扩展和扩展我的 BaseExpandableListAdapter）

[ExpandListAdapter](http://pastebin.com/p5ZJT7um)（扩展 BaseExpandableListAdapter）

[VoteOnClick](http://pastebin.com/AHSbnDV3)（实现在成功投票时更改按钮文本的类）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:41:31.220

android 上的 listview 高效工作的方式是它们实现了“视图回收”方法，如果某些视图离开屏幕，则相同的视图将放回屏幕上的某个位置，所有必要的位都已更改。这使事情使用更少的资源，实际上重用了相同的资源，但是如果您需要像您一样以特定顺序持续存在的状态，则会造成严重破坏。您应该做的是实现某种映射或数组列表，其中对象上的位置对应于列表视图的位置，然后通过制作的对象进行更改。有点蹩脚，但它有点像适配器的适配器方法。

现在我道歉，因为我无法准确地想象 onlick 方法应该如何工作，但是通过它查看..类似于：

```
for (int i = 0; i < groups.size(); i++) {
....
but.setText("Vote"); 
```

会成为

```
ArrayList<String> group_string_states = new ArrayList<String> ();

private void fillGroupStringStates () {
        for(int i = 0; i < groups.length; i++) {
            group_string_states.add("Order");
        }
    }

....

for (int i = 0; i < group_string_states.size(); i++) {
....
group_string_states.set(i, "Vote"); 
```

然后你做一个条件，比如如果 group_string_states.get[position] 说“投票”，然后这样做。

好吧，这就是我尝试这样做的方式。我希望它有所帮助，如果没有，我真的很抱歉。

# jpa-2.0 - hibernate jpa将两个表与另一个表连接起来

> ID：12803069
> 
> 赞同：0
> 
> 时间：2012-10-09T15:07:05.527
> 
> 标签：jpa-2.0, hibernate-mapping, hibernate-onetomany

我有两张桌子A和B

表 A：

ID_A

姓名

表 B

ID_B

姓名

我通过带有主键的第三个表 C 表加入了这两个表

表 C

ID_C

ID_A

ID_B

我想知道 jpa 映射中的这种关系以检索对象 A 中的对象 B 的列表

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:29:17.040

A 类有 C 对象的列表。

```
class A{

@Id
private Long Id;

@Column(name = "name_a", length = 5)
private Strin name_a;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "a", fetch = FetchType.LAZY)
private List<C> cList;
}
class B{

@Id
private Long Id;

@Column(name = "name_b", length = 5)
private String name_b;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "b", fetch = FetchType.LAZY)
private List<C> cList;

} 
```

这是连接表。C 类有 A 对象和 B 对象。

```
class C{

  @Id
  private Long id;

  @JoinColumn(name = "id_a", referencedColumnName = "id", nullable = false)
  @ManyToOne(optional = false, fetch = FetchType.LAZY)
  private A a;

  @JoinColumn(name = "id_b", referencedColumnName = "id", nullable = false)
  @ManyToOne(optional = false, fetch = FetchType.LAZY)
   private B b;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:19:14.840

我在这里找到了一个很好的例子[http://viralpatel.net/blogs/hibernate-many-to-many-annotation-mapping-tutorial/](http://viralpatel.net/blogs/hibernate-many-to-many-annotation-mapping-tutorial/)

# python - 在 Mac OSX 上使用 pyodbc 的 DB2

> ID：12803072
> 
> 赞同：3
> 
> 时间：2012-10-09T15:07:16.643
> 
> 标签：python, macos, db2, pyodbc

我正在尝试在 Mac OS X 上使用 pyodbc 连接到 DB2 数据库，但我似乎无法做到这一点。在类似的条件下，我已经成功使用 FreeTDS 连接到 MS SQL Server。

首先，我安装了 IBM 的 db2exc_client_952_MAC_x86_64。成功安装后，我去通过 ODBC 管理器添加驱动程序。

![ODBC 管理员](../Images/eb706194b833ea2c7034ddcc2ec6b702.png)

然后我尝试运行这个python：

```
import pyodbc
cnxn = pyodbc.connect('Driver={IBM DB2 ODBC Driver}; Hostname=myhost.com; Port=50300; Protocol=TCPIP; Database=DB2ET; CurrentSchema=SCHM1; UID=MYUID; PWD=MYPWD;'); 
```

我收到这个错误：

> Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 pyodbc.Error: ('HY000', '[]\xf8\x92\x90\x81\x9b\xf8\x93\x90\x81\x82\xf8\x96\xb0\x81\x9d\xf8\x93\x80\x81\x83\xf8\x88\x80\x81\x89 \xf8\x9c\xa0\x81\x84\xf8\x9d\xa0\x81\xa9\xf8\x9c\xa0\x81\xa5\xf8\x88\x80\x81\x9d\xf8\x94\x90\x81\x93 \xf8\x8c\x90\x81\x8c\xf8\x8c\xa0\x80\xb0\xf8\x93\xa0\x80\xb4\xf8\x88\x80\x80\xa0\xf8\x88\x80\x81\x81 \xf8\x98\x90\x81\xa4\xf8\x98\x90\x81\xb4\xf8\x98\x90\x81\xa2\xf8\x99\x90\x81\xb3\xf8\x98\xb0\x80\xa0 \xf8\x9b\xa0\x81\xaf\xf8\x99\x90\x81\xae\xf8\x9d\x80\x81\xa3\xf8\x9b\xb0\x81\xa9\xf8\x88\x80\x81\xae \xf8\x9b\xb0\x81\xa4\xf8\x9c\xb0\x81\xa5\xf8\x9b\xa0\x80\xa0\xf8\x9d\x80\x81\xaf\xf8\x99\x90\x80\xa0 \xf8\x9a\x90\x81\xb8\xf8\x9d\x80\x81\xb3\xf8\x88\x80\x80\xae\xf8\x94\xb0\x80\xa0\xf8\x93\x80\x81\x91 \xf8\x95\x80\x81\x93\xf8\x95\x80\x81\x81\xf8\x8f\x90\x81\x85\xf8\x8e\x80\x80\xb0\xf8\x8c\x80\x80\xb0 \xf2\xa0\x80\xb3\xfc\xa0\x9c\xb0\x80\x80\xfd\xa1\x99\x82\x81\xa1\xfd\xa1\x98\xa6\x85\xb4\xfd\xa9\x88\x86\x95\xb3\xfd\x82\x91\x82\x81\xae\xfd\xaf\x99\xa2\x80\xb2 \xfd\x96\x93\x92\x81\xb2\xfd\x93\x82\xa2\xb9\x93\xff\x7f (-1024) (SQLDriverConnect)')

我从搜索中收集到 HY000 可能是一个 connectionString 问题，但我不确定如何破译其余的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:08:40.253

这是我的连接字符串在 PHP 中的样子（我知道您使用的是 Python，但我认为它们非常相似）：

```
$this->db_connection = new PDO("odbc:DRIVER={iSeries Access ODBC Driver};SYSTEM=10.xxx.xxx.xxx;PROTOCOL=TCPIP", $temp_username, $temp_password); 
```

请注意，我说“SYSTEM=...”而您说“Hostname=...”——我认为这可能很重要。

您的 DSN 设置是否完整？在我的 Linux 机器上，我有两个文件，其中包含我们所有的 DSN 配置信息。

odbc.ini

```
[primary]
Description             = primary
Driver                  = iSeries Access ODBC Driver
System                  = xxx.xxx.xxx.xxx
UserID                  = xxxxxxxxxx
Password                = xxxxxxxxxx
Naming                  = 0
DefaultLibraries        = QGPL
Database                = xxxxxxxxxx
ConnectionType          = 0
CommitMode              = 2
ExtendedDynamic         = 0
DefaultPkgLibrary       = QGPL
DefaultPackage          = A/DEFAULT(IBM),2,0,1,0,512
AllowDataCompression    = 1
LibraryView             = 0
AllowUnsupportedChar    = 0
ForceTranslation        = 0
Trace                   = 0 
```

和 odbcinst.ini

```
[iSeries Access ODBC Driver]
Description     = iSeries Access for Linux ODBC Driver
Driver          = /usr/lib/libcwbodbc.so
Setup           = /usr/lib/libcwbodbcs.so
NOTE1           = If using unixODBC 2.2.11 or later and you want the 32 and 64-bit ODBC drivers to share DSN's,
NOTE2           = the following Driver64/Setup64 keywords will provide that support.
Driver64        = /usr/lib/lib64/libcwbodbc.so
Setup64         = /usr/lib/lib64/libcwbodbcs.so
Threading       = 2
DontDLClose     = 1
UsageCount      = 1 
```

我相信您在显示的对话框中输入了类似的信息，可能在 DSN 选项卡下。

您是否启用了 ODBC 跟踪？要在 Linux 中执行此操作，我必须将其添加到 odbcinst.ini 文件中：

```
[ODBC]
Trace = Yes
TraceFile = /tmp/odbc.log 
```

这为我倾倒了很多信息，并帮助诊断了我过去遇到的一些问题。

根据此页面（http://code.google.com/p/pyodbc/wiki/ConnectionStrings），“最重要的是要知道 pyodbc 甚至不查看连接字符串——它直接传递给 SQLDriverConnect未修改。” 如果这是真的，那么将您的“主机名”更改为“系统”应该可以解决问题。

编辑

这可能是编码问题吗？Unicode 试图与 UTF-8 服务器（或类似的东西）通信？您是否尝试过设置 CCSID？配置驱动程序时，是否有“BinAsChar”、“CCSID”或“Host CCSID”等选项？

默认情况下，我认为 CCSID 是 37（美国/加拿大），我认为 Unicode 是 1208。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:31:11.817

似乎连接字符串因数据库而异，并且您使用的连接字符串与 DB2 不兼容。

下面是一些 DB2 示例连接字符串：

[http://www.connectionstrings.com/ibm-db2](http://www.connectionstrings.com/ibm-db2)

这是我能找到的关于 DB2 连接字符串中有效内容的最佳参考：

[http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.swg.im.dbclient.adonet.ref.doc%2Fdoc%2FDB2ConnectionClass.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.swg.im.dbclient.adonet.ref.doc%2Fdoc%2FDB2ConnectionClass.html)

基于此，我将您的连接字符串从：

```
Driver={IBM DB2 ODBC Driver}; Hostname=myhost.com; Port=50300; Protocol=TCPIP; Database=DB2ET; CurrentSchema=SCHM1; UID=MYUID; PWD=MYPWD; 
```

至：

```
Driver={IBM DB2 ODBC Driver}; Server=myhost.com:50300; Database=DB2ET; CurrentSchema=SCHM1; UID=MYUID; PWD=MYPWD; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T19:58:28.617

为什么不使用驱动程序定义用户 DSN，然后在 connect() 方法中使用 DSN？

```
pyodbc.connect( 'DSN=MYDSN;UID=MYUSER;PWD=MYPASS' ) 
```

顺便说一句，使用“iSeries Access ODBC Driver”以外的任何驱动程序都可能引发那些 DB2 许可错误。也许这就是消息所说的。

安装“IBM i Access for Windows 7.1”时安装驱动程序

# python - 如何让字符串变量在 if 循环中更改并打印出来

> ID：12803085
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:08:27.540
> 
> 标签：python, string, variables, if-statement, range

```
b=int(1)

if b == 1:
     b=2
     c = "on my thumb"
elif b== 2:
    b=3
    c = "on my shoe"
elif b== 3:
    b=4
    c = "on my knee"
elif b== 4:
    b+1
    c = "on my door"
elif b== 5:
    b+1
    c = "on my hive"
elif b== 6:
    b+1
    c = "on my sticks"
elif b== 7:
    b+1
    c = "up in heaven"
elif b== 8:
    b+1
    c = "on my gate"
elif b== 9:
    b+1
    c = "on my spine"
else:
    c = "once again"

for r in range(10):
    print("This old man, he played one He played knick-knack " + c +" Knick-knack paddywhack, give your dog a bone This old man came rolling home")
    b+1 
```

编码相对较新，所以我真的不知道自己在做什么，但是我试图让 c 在每次打印 r 时都进行更改……以便 IT 完成旧的童谣。我正在用python编码这个......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:14:54.543

```
parts = ["on my thumb", "on my shoe", ...]
numerators = ["one", "two", "three", ...]

for num, part in zip(numerators, parts):
    print "This old man, he played " + num
    print "He played knick-knack " + part
    print "Knick-knack paddywhack, give your dog a bone"
    print "This old man came rolling home" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:14:49.037

只需将字符串存储在数组或列表中

```
lines = ["on my thumb", "on my shoe", "...."....] 
```

然后在 c#-ish 语法中的 for 循环的帮助下遍历该数组（或 list ）：

```
foreach(line in lines)
{
  print("bla" + line + "blubb");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:17:57.050

也许是这样的：

```
string b[10] = {"on my thumb","on my shoe","on my knee","on my door","on my hive","on my sticks","up in heaven","on my gate","on my spine","once again"};

for (i=0; i<b.length; i++) {
   print("This old man, he played one He played knick-knack " + b[i] +" Knick-knack paddywhack, give your dog a bone This old man came rolling home.\n");
} 
```

由于这些值不会改变，您可以创建一个静态数组来保存这些值，然后您可以在显示结果的同时循环浏览内容。

# wpf - Azure StorageClient 瞬态连接测试 - 挂起

> ID：12803086
> 
> 赞同：2
> 
> 时间：2012-10-09T15:08:29.803
> 
> 标签：wpf, azure, timeout, task-parallel-library, azure-blob-storage

我正在测试我的 WPF 应用程序连接到 Azure Blob 存储以使用 TPL（任务）下载一堆图像。预计在 Live 环境中，在已部署的位置将存在与 Internet 的高度瞬态连接。

我在 BlobRequestOptions 中设置了重试策略和超时，如下所示：

```
//Note the values here are for test purposes only
//CloudRetryPolicy is a custom method returning adequate Retry Policy
// i.e. retry 3 times, wait 2 seconds between retries
blobClient.RetryPolicy = CloudRetryPolicy(3, new TimeSpan(0, 0, 2));

BlobRequestOptions bro = new BlobRequestOptions() { Timeout = TimeSpan.FromSeconds(20) };
blob.DownloadToFile(LocalPath, bro); 
```

上述语句在按预期工作的后台任务中，并且我在后台任务和继续任务中进行了适当的异常处理。

为了测试异常处理和我的恢复代码，我通过拔出网线来模拟互联网断开连接。我已经在 UI 线程上将一个方法连接到 System.Net.NetworkChange.NetworkAvailabilityChanged 事件，我可以按预期检测连接/断开连接并相应地更新 UI。

**我的问题是：**如果我在下载文件时（通过 blob.DownloadToFile）拉网线，后台线程就会挂起。它不会超时，不会崩溃，不会抛出异常，什么都没有！！！在我写的时候，我一直在等待大约 30 分钟，并且没有发生与后台任务相关的响应/处理。

如果我拉网线，在下载开始之前，执行如预期。即我可以看到发生重试、引发异常并提前传递等等。

**有没有人经历过类似的行为？有什么技巧/建议可以克服这种行为/问题吗？**

顺便说一句，我知道我可以在检测到网络连接丢失时取消下载任务，但我不想这样做，因为网络连接可以在超时时间内恢复，并且下载过程可以从它的位置继续被打断了。我已经测试了这种自动恢复并且运行良好。

下面是我的代码结构的粗略指示（语法不正确，只是一个流程指示）

```
btnClick()
{
  declare background_task
  attach continuewith_task to background task
  start background task
}

background_task()
{
  try
  {
    ... connection setup ... 
    blob.DownloadToFile(LocalPath, bro);
  }
  catch(exception ex)
  {
     ... exception handling ....
     // in case of connectivity loss while download is in progress
     // this block is not getting executed
     // debugger just sits idle without a current statement
  }
}

continuewith_task()
{
  check if antecedent task is faulted
  {
     ... do recovery work ...
     // this is working as expected if connectivity is lost
     // before download starts
     // this task does not get called if connectivity is lost
     // while file transfer is taking place
  }
  else
  {
     .. further processing ...
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:05:52.493

我相信 Avkash 是正确的。另外，需要明确的是，您基本上永远不会看到网络删除错误，因此对其进行测试没有多大意义。您将看到大量连接被拒绝、冲突、资源丢失、只读帐户、限制、访问被拒绝，甚至 DNS 解析失败，具体取决于您处理存储帐户的方式。你应该测试那些。

话虽如此，我建议您根本不要将 RetryPolicy 与 blob 或表存储一起使用。对于您实际遇到的大多数错误，它们一开始是不可重试的（例如 404、409、403 等）。当你有一个重试策略时，默认情况下它会在接下来的 2 分钟内再试 4 次。例如，重试错误的凭据是没有意义的。

您最好自己简单地处理错误并有选择地重试（超时和油门是这里唯一有意义的事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:35:28.123

您的问题主要是因为 Azure 存储客户端库在下面使用文件流类，以及为什么 API 挂起与 Windows Azure Blob 客户端库没有直接关系。直接通过网络调用文件流 API，当突然移除网络电缆时，您可以看到完全相同的行为，但是优雅地移除网络将返回不同的行为。

如果您在 Internet 上搜索，您会发现流媒体类不会检测到网络丢失，这就是为什么在您的代码中您可以检查网络断开事件，然后停止后台流媒体线程。

# android - 构建蚂蚁詹金斯

> ID：12803087
> 
> 赞同：0
> 
> 时间：2012-10-09T15:08:33.247
> 
> 标签：android, ant, jenkins

当我在 Jenkins 中使用 android 项目执行任务时，GetTargetTask 出现问题：

```
ant/build.xml:533: java.lang.NullPointerException
at com.android.sdklib.SdkManager.loadPlatforms(SdkManager.java:386)
at com.android.sdklib.SdkManager.createManager(SdkManager.java:151)
at com.android.ant.GetTargetTask.execute(GetTargetTask.java:120)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:390)
at org.apache.tools.ant.Target.performTasks(Target.java:411)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.Main.runBuild(Main.java:809)
at org.apache.tools.ant.Main.startAnt(Main.java:217)
at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

但是当我在项目文件夹中直接执行 Ant 时，我没有错误......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:52:15.263

詹金斯权限！！！

我正在尝试对 jenkins 工作区没有权限的用户

# vb.net - .NET DefaultValue 属性属性实例化新的自定义对象类型

> ID：12803088
> 
> 赞同：1
> 
> 时间：2012-10-09T15:08:40.727
> 
> 标签：vb.net, attributes, default-value

我正在尝试使用 DefaultValue 属性来装饰属性，以断言该值默认为程序中类型化对象的新列表。失败的代码如下：

```
<DataContract()>
Partial Public Class MessageBaseResponse

#Region "Properties"

    <DataMember()>
    Public Property Header As Header

    <DataMember()>
    <DefaultValue(GetType(List(Of [Error])))>
    Public Property Errors As List(Of [Error])

    <DataMember()>
    <DefaultValue(GetType(List(Of Warning)))>
    Public Property Warnings As List(Of Warning)

#End Region

End Class 
```

如何使用 DefaultValue 属性方法将新列表实例化为默认属性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:18:15.220

[DefaultValue](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)属性更多地与序列化数据有关，而不是设置属性的实际默认值。链接页面说明：

> DefaultValueAttribute 不会导致成员使用属性值自动初始化。您必须在代码中设置初始值。

尝试使用“New”关键字实例化列表：

```
Public Property Errors As New List(Of [Error]) 
```

# objective-c - Objective-C：UISwitches 的 NSArray

> ID：12803092
> 
> 赞同：0
> 
> 时间：2012-10-09T15:08:55.810
> 
> 标签：objective-c, nsarray, uiswitch

好的，所以我正在构建一个界面，以允许管理员控制使用 UISwitches 控制的某些规则（其中很多）

所以我声明了一个开关数组

```
NSMutableArray *cameraSwitches = [[NSMutableArray alloc] initWithObjects:
loc0CamProfileSwitch, loc1CamProfileSwitch, loc2CamProfileSwitch,
loc3CamProfileSwitch, loc4CamProfileSwitch, loc5CamProfileSwitch,
loc6CamProfileSwitch, loc7CamProfileSwitch, loc8CamProfileSwitch, nil]; 
```

其中 Array 中的每个对象都是一个 UISwitch，

然后我循环一个 diff 数组检查这些开关的初始值

```
for (NSUInteger i = 0; i < [camP count]; i++) {

    if ([camP objectAtIndex:i] != 0) {

        //UISwitch *csw = [cameraSwitches objectAtIndex:i];
        //[csw setOn:YES];

        [[cameraSwitches objectAtIndex:i] setOn:YES];
    else { [loc7CamProfileSwitch setOn:NO]; }
} 
```

但是我正在尝试的一切都是在运行时给我一个错误，抛出一个异常 `'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'`

使用断点：我意识到这条线有问题

`[[cameraSwitches objectAtIndex:i] setOn:YES];`- 或者我如何启动阵列，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:24:53.890

cameraSwitches 已正确实例化。这就是为什么当您尝试达到索引 0 时会引发异常。

但是，您是否检查过 loc0CamProfileSwitch（索引 0）不为零？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:46:26.197

最有可能的`cameraSwitches`是在实例化后被释放。如果您使用与调用时不同的方法创建它`objectAtIndex`并且您没有将其设置为 iVar 或 @property（强），则可能会发生这种情况。

如果这不能解决问题，请设置断点并在调试控制台中`[[cameraSwitches objectAtIndex:i] setOn:YES]`键入。`po cameraSwitches`

# c# - 获取 C# 列表中的常用元素

> ID：12803107
> 
> 赞同：13
> 
> 时间：2012-10-09T15:09:43.117
> 
> 标签：c#, linq

我有两个排序列表如下：

```
var list1 = new List<int>() { 1, 1, 1, 2, 3 };
var list2 = new List<int>() { 1, 1, 2, 2, 4 }; 
```

我希望输出为：`{1, 1, 2}`

如何在 C# 中做到这一点？有没有使用 Linq 的方法？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-09T15:10:49.623

使用[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)：

```
 var commonElements = list1.Intersect(list2).ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T20:39:20.277

额外的 1 表示您不能使用`Intersect`，因为它返回一个集合。

这是一些可以满足您需要的代码：

```
var list1 = new List<int>() { 1, 1, 1, 2, 3 };
var list2 = new List<int>() { 1, 1, 2, 2, 4 };

var grouped1 =
    from n in list1
    group n by n
    into g
    select new {g.Key, Count = g.Count()};

var grouped2 =
    from n in list2
    group n by n
    into g
    select new {g.Key, Count = g.Count()};

var joined =
    from b in grouped2
    join a in grouped1 on b.Key equals a.Key
    select new {b.Key, Count = Math.Min(b.Count, a.Count)};

var result = joined.SelectMany(a => Enumerable.Repeat(a.Key, a.Count));

CollectionAssert.AreEquivalent(new[] {1, 1, 2}, result); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-09T13:21:13.343

这很好用：

```
var list1 = new List<int>() { 1, 1, 1, 2, 3 };
var list2 = new List<int>() { 1, 1, 2, 2, 4 };

var lookup1 = list1.ToLookup(x => x);
var lookup2 = list2.ToLookup(x => x);

var results = lookup1.SelectMany(l1s => lookup2[l1s.Key].Zip(l1s, (l2, l1) => l1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-18T16:44:07.370

虽然@Austin Salonen 的[解决方案](https://stackoverflow.com/a/12808047/1243753)和@Enigmativity 的[解决方案](https://stackoverflow.com/a/39944095/1243753)都适用于任何给定的列表，但都没有利用 OP 的条件，即列表是**sorted**。

鉴于这两个列表都是有序的，我们可以`O(n + m)`及时进行搜索，其中 n 和 m 是每个列表的长度。不完全确定以前的解决方案的性能如何，但肯定会更慢`O(n + m)`。

基本上我们只是遍历两个列表，根据比较检查移动一个或两个枚举数。

```
var results = new List<int>();
var e1 = list1.GetEnumerator();
var e2 = list2.GetEnumerator();
var hasNext = e1.MoveNext() && e2.MoveNext();

while (hasNext) {
    var value1 = e1.Current;
    var value2 = e2.Current;

    if (value1 == value2) {
        results.Add(value1);
        hasNext = e1.MoveNext() && e2.MoveNext();
    } else if (value1 < value2) {
        hasNext = e1.MoveNext();
    } else if (value1 > value2) {
        hasNext = e2.MoveNext();
    }
} 
```

而已！`results`如果没有找到匹配项，将是一个空列表。请注意，这假设两个列表都按升序排列。如果它是下降的，只需翻转`<`and`>`运算符。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-10-09T13:12:40.670

我回答这个问题迟了，这可能会对未来的访客有所帮助。

```
 List<int> p = new List<int> { 1, 1, 1, 2, 3 };
            List<int> q = new List<int> { 1, 1, 2, 2, 4 };
            List<int> x = new List<int>();
            for (int i = 0; i < p.Count; i++ )
            {
                if (p[i] == q[i])
                {
                    x.Add(p[i]);
                }
            } 
```

# ios - 我可以使用什么 iphone sdk API 来查询 iOS 词典？

> ID：12803112
> 
> 赞同：4
> 
> 时间：2012-10-09T15:09:49.903
> 
> 标签：ios, iphone, database

我正在开发一个 iphone 文字游戏。我有什么方法可以查询 iOS 中可用的单词数据库吗？该数据库非常全面，在用户选择单词时可用。（弹出定义按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:59:32.333

您也可以选择[LexiContext](http://www.lexicontext.com/)。有一个用于离线访问整个字典的不错的捆绑包，具有单例共享类和易于使用的函数来获取单词列表或描述。

但它不是免费的，但它提供了一个[免费的 sdk 示例](http://www.lexicontext.com/trial.html)，用于测试，具有与所有功能相似的功能，并且只能访问带有字母“a”的单词。

# multithreading - Lua 操作，在多头环境中工作

> ID：12803115
> 
> 赞同：3
> 
> 时间：2012-10-09T15:09:53.020
> 
> 标签：multithreading, lua

我的应用程序在具有*全局 mutex的***多线程**环境中使用**Lua**。它是这样实现的：

 ***1.  线程锁互斥锁，
2.  称呼`lua_newthread`
3.  执行一些初始化`coroutine`
4.  `lua_resume`继续运行`coroutine`
5.  解锁互斥锁

`lua_lock/unlock`没有实现，GC 停止，当 lua 使用`coroutine`.

我的问题是，如果初始化过程不需要任何全局 Lua 结构，我可以在不锁定的情况下执行第 2 步和第 3 步吗？`coroutine`如果不需要全局变量，我可以在不锁定的情况下执行所有这些过程吗？

在什么情况下我通常可以使用 Lua 函数而不加锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:28:09.343

> 在什么情况下我通常可以使用 Lua 函数而不加锁？

在同一个 Lua 状态（或从同一个源 Lua 状态派生的线程）？

***没有任何。***

Lua 是线程安全的，因为独立的 Lua 状态实例可以并行执行。当您从同一个 Lua 状态实例上的两个不同线程调用*任何*Lua API 函数时，绝对没有线程安全保证。

您不能在某些同步机制之外执行任何步骤 2、3 或 4，以防止对同一状态的并发访问。不管它只是创建一个新线程（分配内存）还是一些“初始化过程”（可能会分配内存）。即使是不分配内存的事情仍然是不允许的。

Lua 不保证 Lua 状态中的线程安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-11T13:59:47.457

如果**您**尝试在**没有**. 如果要使用多线程环境，则需要为每个 OS 线程使用单独的状态。**`lua_lock/unlock`**

 **查看一些多线程解决方案，例如[https://github.com/effil/effil](https://github.com/effil/effil)。*****

# java - 为什么更改传递给 XJC 的包名称会破坏 JAXB 生成？

> ID：12803117
> 
> 赞同：2
> 
> 时间：2012-10-09T15:10:03.967
> 
> 标签：java, xml, binding, jaxb, xjc

[我正在使用 XJC 从 HTNG 支付系统模式生成 Java 类，该模式位于此 zip](http://collaboration.htng.org/specs/documents/22372/SecureDataProxyArtifacts_FINAL.zip)的 /schemas 目录中。

如果我在不传递参数的情况下运行 XJC `-p`，则生成工作正常，并且在`org.htng._2009b`包下生成类：

```
$ cd schemas
$ xjc -mark-generated -no-header -target 2.1 -npa . 
```

我要做的就是将生成的类的包名称更改为更适合项目的名称，例如`com.justin.htng`：

```
$ cd schemas
$ xjc -mark-generated -no-header -target 2.1 -npa -p com.justin.htng . 
```

但是，这样做会极大地破坏 JAXB 生成，几乎在每个元素上都会引发碰撞错误。我可以通过第一种方法生成类，然后将它们重构到`com.justin.htng`包中来解决这个问题，但这不是很容易维护，并且不能很好地移植到 maven-jaxb2-plugin。

**有人可以解释为什么会发生这种情况，以及是否有办法使用 XJC 解决它？** 我觉得如果 JAXB 通过第一种方法工作，它应该通过第二种方法工作，因为需要做的只是对包名称进行简单的字符串替换。我想我可以使用第二种方法并通过 .xjb 绑定文件处理所有冲突，但考虑到错误的数量，这将是乏味的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:33:39.987

当我跑

```
xjc -mark-generated -no-header -target 2.1 -npa . 
```

我得到两组生成的类，一组在名为的包中`generated`，另一组在`org.htng._2009b`. `HTNG_CommonTypes.xsd`模式没有，所以当`targetNamespace`它直接编译时，它的类型最终会出现在`generated`包中。但是`HTNG_CommonTypes`也被其他模式导入，这些模式*确实*声明了`targetNamespace`. 当通用类型在导入的案例中编译时，它们最终以`org.htng._2009b`.

现在，如果您指定`-p`选项 to ，它将覆盖*所有*`xjc`命名空间的命名空间到包的映射，因此命名空间和非命名空间类型都映射到同一个包，因此名称冲突。

 *我怀疑这里的正确解决方案根本不是`CommonTypes`独立编译模式，而只是编译导入它的模式。以下对我有用：

```
xjc -mark-generated -no-header -target 2.1 -npa -p com.justin.htng HTNG_P*.xsd 
```*

# date - 如何在 symfony2 中将日期对象转换为时间

> ID：12803127
> 
> 赞同：2
> 
> 时间：2012-10-09T15:10:38.500
> 
> 标签：date, datetime, symfony

我正在使用 Symfony2。从数据库中获取日期时，我需要在我的`index.html.php`.

当我像这样打印它的显示时：`DateTime Object ( [date] => 2012-10-09 13:30:23 [timezone_type] => 3 [timezone] => UTC )`

但是当我将 object 转换为 int 时，它会给出错误：`$days2 = floor( $entities->getCreationDate() / (60 * 60 * 24));`

```
Notice: Object of class DateTime could not be converted to int** 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T17:49:57.870

如果要从 DateTime 对象获取整数时间戳，请使用[getTimeStamp 方法](http://www.php.net/manual/en/datetime.gettimestamp.php)。

```
$date = new DateTime();
echo $date->getTimestamp(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T15:38:20.303

我将其添加为第二个答案，因为它与我之前的非常不同。

要在 PHP 中获取两个日期之间的差异，您可能需要考虑使用 PHP 的内置 DateTime 和 DateInterval 类。

以下代码将为您提供创建日期和今天之间的天数差异：

```
$creationDate = $entity->getCreationDate();
$now = new \DateTime();

$interval = $creationDate->diff($now);

echo "The difference is " . $interval->days . " days."; 
```

关于 DateInterval 的更多文档：[http ://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:19:00.277

在 Twig 中显示 DateTime 对象的最佳方法是使用 Twig 的内置`date`函数：

```
{{ entity.creationDate | date("m/d/Y") }} 
```

您实际上可以使用原生 PHP 函数支持的任何格式`strtotime()`，因此您可以自定义您希望它的显示方式。以下是您上面引用的实例的一些示例：

```
{{ entity.creationDate | date("m/d/Y") }}
--> Prints: "10/09/2012"

{{ entity.creationDate | date("Y-m-d") }}
--> Prints: "2012-10-09"

{{ entity.creationDate | date("H:i") }}
--> Prints: "13:30" 
```

有关此 Twig 功能的更多信息：http: [//twig.sensiolabs.org/doc/filters/date.html](http://twig.sensiolabs.org/doc/filters/date.html)

# javascript - Javascript侧滚动条

> ID：12803128
> 
> 赞同：1
> 
> 时间：2012-10-09T15:10:45.683
> 
> 标签：javascript, html, css

我希望我的网站在单击网页中的向右箭头时侧向滚动。我制作了一个未完成的小脚本，但它没有按预期工作。在脚本中，该速率应每 10 毫秒降低一次，从而导致网页侧向滚动。稍后我将添加一个功能，以在达到所需边距时停止边滚动。这是代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<style type="text/css">
body {
    background-image:url(ios-linen.jpg); 
    overflow:hidden;
}
div.length {
    width:10000px;
}
div.container {
    position:fixed;
    top:50%;
    left:50%;
    margin-top:-300px;
    margin-left:-450px;
}
div.content {
    display:inline-block;
    height:600px;
    width:900px;
    background-color:#CCC;
    opacity:0.3;
    border-radius:20px;
    position:absolute;
    z-index:0;
    box-shadow:white 2px 2px 70px;
}
div.info {
    z-index:1;
    position:inherit;
    width:870px;
    padding-left:20px;
    padding-top:10px;
}
div.arrow {
    color:white;
    font-size:400px;
    font-weight:bold;
    position:fixed;
    opacity:0.5;
    -moz-transition:all .5s;
    -webkit-transition:all .5s;
    transition:all .5s;
}
div.arrow:hover {
    opacity:1;
}
#left {
    top:50%;
    margin-top:-200px;
    left:5%;
}
#right {
    top:50%;
    margin-top:-200px;
    left:80%;
}
</style>
<script type="text/javascript">
function right() {
    var rate = 0;
    setInterval(function() {
            document.getElementById('length').style.marginLeft += rate;
            rate--;
    }, 10);
}
</script>
</head>

<body bgcolor="black">
<div class="length" id="length">
<div class="arrow" id="left">
<
</div>
<div class="arrow" id="right" onclick="right()">
>
</div>
<div class="container">
<div class="content">
</div>
<div class="info">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean est orci, tempus id lobortis vel, euismod sed eros. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed vehicula urna ut mi laoreet malesuada. Nunc semper, nisl vel semper commodo, sem quam laoreet magna, vel tristique orci tellus sit amet sem. Cras tincidunt urna sed justo consequat porta. Pellentesque commodo lacinia est, a dapibus odio venenatis ut. Vestibulum eget luctus turpis. Morbi libero urna, laoreet commodo euismod quis, aliquam in metus. 
</div>
</div>
<div class="container" style="margin-left:1600px;">
<div class="content">
</div>
<div class="info">
Vivamus bibendum pretium enim quis faucibus. Etiam tempor dui varius nisi sagittis consectetur. Ut eget sapien ut metus consectetur hendrerit. Morbi lacinia porttitor nunc, rutrum ullamcorper arcu elementum quis. In eget nisi vel ante lacinia eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam leo odio, accumsan nec rhoncus sit amet, viverra sed urna. Mauris consequat turpis sed risus ultrices pulvinar. 
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:39:03.143

它看起来不滚动的原因是因为页面上的所有其他 DIV 都`position:fixed;` 包含 DIV`length`可能正在移动，但箭头和灰色背景的东西永远不会通过更改`length`元素的填充来移动。

要验证这一点，请向 DIV 添加一个“监视”`length`并在控制台中检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:15:56.270

本质上你应该使用 $('html').get(0).scrollLeft 来改变位置。

这是一个 js fiddle 来帮助你。

[http://jsfiddle.net/UqbPQ/17/](http://jsfiddle.net/UqbPQ/17/)

```
var direction = 0;
var speed = 2;
$('#l').click(function() {
    direction = -speed;
});
$('#p').click(function() {
    direction = 0;
});
$('#r').click(function() {
    direction = speed;
});
window.setInterval(function() {
    var elm = $('html').get(0);
    var pos = elm.scrollLeft;
    pos += direction;
    elm.scrollLeft = pos;
    $('#p').text(elm.scrollLeft);
}, 10);
```

```
body {
    background-color: yellow;
    width: 100%;
    height: 100%;
    margin: 0px;
    padding 0px;
    overflow: hidden;
}
div.length {
    background-color: aqua;
    top: 0px;
    left: 0px;
    width:10000px;
    height: 90%;
overflow: hidden;
    margin: 0px;
    padding: 0px;
}
div.container {
    position: relative;
    float: left;
    border: 2px solid red;
}
div.content {
    display:inline-block;
    height:600px;
    width:900px;
    background-color:#CCC;
    opacity:0.3;
    border-radius:20px;
    position:absolute;
    z-index:0;
    box-shadow:white 2px 2px 70px;
}
div.info {
    z-index:1;
    position:inherit;
    width:870px;
    padding-left:20px;
    padding-top:10px;
}
div.arrow {
    color:green;
    font-size: 200%;
    font-weight:bold;
    position:fixed;
    top: 90%;
    opacity:0.5;
    -moz-transition:all .5s;
    -webkit-transition:all .5s;
    transition:all .5s;
    border: 2px solid green;
}
div.arrow:hover {
    opacity:1;
}
#l {
    left:5%;
}
#r {
    left:95%;
}
#p {
    left: 45%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div class="length" id="length">
<div class="arrow" id="l">&lt;
    </div>
    <div class="arrow" id="p">||
    </div>
    <div class="arrow" id="r">&gt;
    </div>
    <div class="container">
        <div class="content">
        </div>
        <div class="info">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean est orci, tempus id lobortis vel, euismod sed eros. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed vehicula urna ut mi laoreet malesuada. Nunc semper, nisl vel semper commodo, sem quam laoreet magna, vel tristique orci tellus sit amet sem. Cras tincidunt urna sed justo consequat porta. Pellentesque commodo lacinia est, a dapibus odio venenatis ut. Vestibulum eget luctus turpis. Morbi libero urna, laoreet commodo euismod quis, aliquam in metus. 
        </div>
    </div>
    <div class="container">
        <div class="content">
        </div>
        <div class="info">
Vivamus bibendum pretium enim quis faucibus. Etiam tempor dui varius nisi sagittis consectetur. Ut eget sapien ut metus consectetur hendrerit. Morbi lacinia porttitor nunc, rutrum ullamcorper arcu elementum quis. In eget nisi vel ante lacinia eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam leo odio, accumsan nec rhoncus sit amet, viverra sed urna. Mauris consequat turpis sed risus ultrices pulvinar. 
        </div>
    </div>
</div>
```

# asp.net-mvc - ASP.NET MVC - 允许内部匿名用户，需要在外部进行 Windows 身份验证

> ID：12803129
> 
> 赞同：1
> 
> 时间：2012-10-09T15:10:47.930
> 
> 标签：asp.net-mvc, authentication

是否可以根据请求的区域设置授权？基本上它是一个内网类型的应用程序，只有很少的敏感信息。

如果请求是从组织内部执行的，则允许匿名用户是可以的。

但是，如果是外部请求，他们应该得到 401 授权挑战。外部请求来自单个防火墙，因此 IP/IP 范围应该可以指定它是外部请求还是内部请求。

目前，它在 web.config 文件中针对 Windows 身份验证进行了配置。

```
<authentication mode="Windows" />
<authorization>
  <deny users="?" />
</authorization> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:25:51.033

直接在防火墙上处理此规则会更容易。

作为替代方案，您可以在 IIS 级别配置[IP 安全](http://www.iis.net/configreference/system.webserver/security/ipsecurity)性并按客户端 IP 进行过滤。

但是如果你无法控制防火墙，你可以编写一个自定义的 Authorize 属性来检查传入的 IP 地址并允许/拒绝请求：

```
public class IpBasedAuthorizeAttribute: AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var ip = httpContext.Request.UserHostAddress;
        return IsAllowed(ip);
    }

    private bool IsAllowed(string ip)
    {
        // TODO: do your checks here and return true or false
        // depending on whether the IP address is allowed to 
        // access the application or not
        throw new NotImplementedException();
    }
} 
```

然后您可以使用此属性装饰单个控制器/操作，或者如果您希望它应用于所有请求，则将其注册为全局授权属性：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new IpBasedAuthorizeAttribute());
} 
```

# javascript - 将字符串文字作为带有全局标志的 Javascript .replace() 模式传递

> ID：12803132
> 
> 赞同：2
> 
> 时间：2012-10-09T15:10:50.560
> 
> 标签：javascript, regex, loops, syntax, replace

我有以下迭代“templateOverrides”数组的内容。 `DPGlobal.template`是我需要覆盖的原始模板。我的问题是我需要将`g`标志传递给该`.replace()`方法就`var newTemplate = ...`行了。只要我能够一次动态地迭代和覆盖模板片段，它就可以工作，但`g`标志没有通过。我主要是好奇实现它的最干燥的方法是什么......

```
for ( var i in templateOverrides ) {
    var thisOverride = templateOverrides[i];
    var origGlobalTemplate = DPGlobal[thisOverride];
    var newTemplate = DPGlobal.template.replace(origGlobalTemplate, options[thisOverride]);
    DPGlobal.template = newTemplate;
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:17:16.433

如果通过 声明它[`new RegExp()`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，则可以将`/g`修饰符作为构造函数的第二个参数包含在内

```
var newTemplate = DPGlobal.template.replace(new RegExp(origGlobalTemplate,'g'), options[thisOverride]); 
```

顺便说一句，`templateOverrides` *真的*是一个`Array []`，还是一个对象`{}`？如果是`Array`，则应该使用增量 for 循环而不是`for-in`构造，其目的是迭代对象属性。

```
for ( var i=0; i<templateOverrides.length; i++ ) {
  var thisOverride = templateOverrides[i];
  var origGlobalTemplate = DPGlobal[thisOverride];
  var newTemplate = DPGlobal.template.replace(new RegExp(origGlobalTemplate,'g'), options[thisOverride]);
  DPGlobal.template = newTemplate;
} 
```

# jquery - JQuery $.ajax 如何将数据发布到服务器

> ID：12803137
> 
> 赞同：0
> 
> 时间：2012-10-09T15:11:25.607
> 
> 标签：jquery, asp.net, ajax

> **可能重复：**
> [如何使用 jquery/ajax 发布到表单](https://stackoverflow.com/questions/8099875/how-to-post-to-a-form-with-jquery-ajax)

如何通过 Jquery Ajax 将数据发布到服务器？

jQuery

```
function postNewBaseLine() {
    var id = "300";
    $.ajax({
            type: "POST",
            url: "ManagerBaseKit.aspx/SetNewBaseVersion",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: id,
            success: function(data) {
                alert('success!');
            }
        });
} 
```

CS

```
[WebMethod]
public static void SetNewBaseVersion(string version)
{
    // I want it here!
} 
```

我正在使用脚本管理器

```
<asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" EnablePartialRendering="true"
    runat="server" /> 
```

**编辑：** 更改为`data: { 'version': id },`

我收到 POST _http://localhost:49852/ManagerBaseKit.aspx/SetNewBaseVersion 500（内部服务器错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:13:49.040

您需要将数据对象更改为：

```
function postNewBaseLine() {
    var id = "300";
    $.ajax({
            type: "POST",
            url: "ManagerBaseKit.aspx/SetNewBaseVersion",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: {version: id},
            success: function(data) {
                alert('success!');
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:18:27.913

首先将 ID 更改为对象，我相信引号很重要。

```
function postNewBaseLine() {
var id = "300";
$.ajax({
        type: "POST",
        url: "ManagerBaseKit.aspx/SetNewBaseVersion",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: {"version": id},
        success: function(data) {
            alert('success!');
        }
    }); 
```

}

您可能还需要在服务方法中添加一些属性

```
 [WebMethod]
          [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, bodystyle = WebMessageBodyStyle.WrappedRequest)]
            public static void SetNewBaseVersion(string version)
            {
                // I want it here!
            } 
```

# authentication - ASP.NET MVC4 覆盖 OnAuthorization 以允许角色白名单

> ID：12803139
> 
> 赞同：3
> 
> 时间：2012-10-09T15:11:31.317
> 
> 标签：authentication, asp.net-mvc-4, authorization

我有一个具有两种类型角色的 ASP.NET MVC4 站点：管理员和合作伙伴。

基本上所有对站点的访问都需要用户进行身份验证并具有管理员角色。因此，我在 FilterConfig.cs 中执行此操作（从 Global.asax 调用）：

```
public class FilterConfig {
    public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new AuthorizeAttribute { Roles = "Administrator" }); // default deny
    }
} 
```

但是，对于一个控制器，我想向具有合作伙伴角色但没有管理员角色的用户授予访问权限。我知道我可以通过不使用全局过滤器而是在每个控制器或操作上设置授权属性来做到这一点，但我想要一种白名单方法，而不是默认情况下所有访问都需要“管理员”角色，然后使用某种形式的白名单.

我曾尝试使用一个控制器来覆盖 OnAuthorization，如下所示：

```
public class MyController : Controller {
    protected override void OnAuthorization(AuthorizationContext filterContext) {
        if (User.Identity.IsAuthenticated) {
            var attributes = new List<AllowRolesAttribute>();
            attributes.AddRange(filterContext.ActionDescriptor.GetCustomAttributes(true).OfType<AllowRolesAttribute>());
            attributes.AddRange(filterContext.ActionDescriptor.ControllerDescriptor.GetCustomAttributes(true).OfType<AllowRolesAttribute>());
            foreach (var authorizationAttribute in attributes) {
                foreach (var role in authorizationAttribute.Roles.Split(',')) {
                    if (User.IsInRole(role))
                        return; // Skip authorization because user has one of the allowed roles.
                }
            }
        }
        base.OnAuthorization(filterContext);
    }
} 
```

然后我像这样定义控制器：

```
[AllowRoles(Roles = "Partner")]
public class HomeController : MyController
{
    ... 
```

但这不起作用。当我使用角色为“Partner”的用户访问此控制器时，我可以将代码跟随到内部 return 语句中，但用户仍被重定向到登录页面而不是被授权。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:52:15.560

不确定您是否使用表单身份验证。可能需要这样的东西？

```
[AllowRoles(Roles = "Partner")]
public class HomeController : MyController
{     
    FormsAuthentication.RedirectFromLoginPage( "User", false );
    .
    .
    .
} 
```

# java - Java - JDBC 驱动程序 SQLite 3.7.2 - 无法打开数据库 test.db：文件已加密或不是数据库

> ID：12803140
> 
> 赞同：2
> 
> 时间：2012-10-09T15:11:37.813
> 
> 标签：java, sqlite, jdbc

我正在使用 java 中的 SQLite JDBC 驱动程序 3.7.2 将一些数据写入数据库文件。当我尝试在命令行上打开数据库文件时，我收到一条错误消息：

“无法打开数据库 test.db：文件已加密或不是数据库”

我做了一个导致这种行为的最小示例：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Statement;

public class PlaygroundSQLite {
    public static void insertIntoDB(String dbFilename, String tablename){
        try {
            Class.forName("org.sqlite.JDBC");
            Connection conn = DriverManager.getConnection("jdbc:sqlite:"+dbFilename);
            PreparedStatement prep = conn.prepareStatement("insert into " + tablename + "( id, text) values (?, ?);");

            prep.setString(1, "1FD22A38");
            prep.setString(2, "This is a simple test");

            prep.addBatch();

            conn.setAutoCommit(false);
            prep.executeBatch();
            conn.setAutoCommit(true);

            conn.close();

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void createDB(String dbFilename, String tablename){
        try {
            Class.forName("org.sqlite.JDBC");
            Connection conn = DriverManager.getConnection("jdbc:sqlite:" + dbFilename);
            Statement stat = conn.createStatement();
            stat.executeUpdate("drop table if exists test;");
            stat.executeUpdate("create table " + tablename + " (key INTEGER PRIMARY KEY, id TEXT , text TEXT);");
            conn.close();
            stat.close();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        String dbFilename = "test.db";
        String tablename = "test";

        PlaygroundSQLite.createDB(dbFilename, tablename);
        PlaygroundSQLite.insertIntoDB(dbFilename, tablename);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:09:27.253

这里的问题是 Java SQLite JDBC 驱动程序（版本 3.7.2）和我机器上安装的 SQLite 版本（版本 2.8.17）之间的版本不匹配。使用 sqlite3 二进制文件解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T07:07:58.997

有没有这样的东西：“Java 中的 SQLite JDBC 驱动程序 3.7.2”？我知道 JavaDB (Derby)，但不知道 Java 中实际上有一个 SQLite JDBC 驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-12T18:28:11.627

试试这个代码：

```
Properties config = new Properties();
config.put("journal_mode", "WAL");
Class.forName("org.sqlite.JDBC");
Connection conn = DriverManager.getConnection("jdbc:sqlite:"+dbFilename,config); 
```

# c# - RedirectToAction() 去 index() 而不是去行动？

> ID：12803146
> 
> 赞同：1
> 
> 时间：2012-10-09T15:12:06.720
> 
> 标签：c#, asp.net, asp.net-mvc, post, asp.net-mvc-routing

我对这个代码片段有点困惑。我在 httpPost 操作中有以下内容

```
if(returnUrl.StartsWith("/AssetResearch/InvestorApproval"))
{
    return RedirectToAction("InvestorApproval", "AssetResearch");
} 
```

但我的代码每次都进入我的 index() 操作。为什么会发生这种情况？RedirectToAction 不应该触发我注意到的动作吗？

编辑：是的，它在 if 语句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:54:30.733

如果可以直接访问`/AssetResearch/InvestorApproval`，那么

`return RedirectToAction("InvestorApproval", "AssetResearch");`

将向您显示`InvestorApproval`操作方法，如果没有，我猜您已路由到索引页面，因为您在文件中的`Application_Start`方法中配置了路由。`Global.asax`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:59:35.143

您可以开始使用 Routing 进行调试吗？像下面...

![在此处输入图像描述](../Images/9ab77590e396373a983b8d8184b4d59c.png)

您只需要一个 Dll 即可添加到您的项目中。你可以**[在这里查看](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)**

最后添加以下代码行

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", 
                     id = UrlParameter.Optional } // Parameter defaults
    );
    RouteDebug.RouteDebugger.RewriteRoutesForTesting(routes);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:42:31.650

编码

```
return RedirectToAction("InvestorApproval", "AssetResearch"); 
```

将重定向到控制器“AssetResearch”操作方法“InvestorApproval”

1) 听起来很傻，但请确保您在类中正确拼写了 InvestorApproval 以用于操作方法名称

2）确保如果该操作采用您创建的数据和传递它的路由值字典，您可以尝试

```
 return RedirectToAction(new RouteValueDictionary( new{ controller = "AssetResearch", action = "InvestorApproval", data="blah" } ) 
```

# google-app-engine - Google App Engine Datastore Viewer 如何创建实体并设置字符串@Id（键）字段

> ID：12803150
> 
> 赞同：0
> 
> 时间：2012-10-09T15:12:11.947
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我有一个数据模型类，其中使用 Objectify 注释**@Id**标记字符串字段“customerUniqueId” 。因此，我使用了在创建要放入数据存储的新对象时在代码中设置的字符串键字段（不是自动编号长）。

```
@Id private String customerUniqueId; 
```

在使用 Datastore Viewer 查看这些对象时，我可以单击**Create**选项卡来创建一个新对象。但是，“customerUniqueId”字段不作为输入字段提供。我只在我的数据模型中显示标记为**@Indexed的字段。**

这是预期的行为还是我应该能够在数据存储查看器创建功能中为 @Id 字段输入一个值？

我是否错误地使用了@Id，我必须将该字段命名为“id”还是“name”？

也许如果我将@Id 字段也标记为@Indexed 但这应该是不必要的吧？@Id 字段应始终按定义进行索引。

也许它与我留空的“创建”表单中的“命名空间”文本框有关？

有人有这个问题并且知道解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:32:13.533

@Id 字段在数据存储中不作为属性存在。它是实体*key*的一部分。我认为数据存储查看器不允许您使用 String 键创建实体；它总是使用自动生成的数字。也许向 Google 提出针对数据存储查看器的问题？

# java - 如何中断scanner.nextline() 调用

> ID：12803151
> 
> 赞同：2
> 
> 时间：2012-10-09T15:12:13.047
> 
> 标签：java, java.util.scanner, interrupt

SO上有很多关于中断读取system.in的线程，但我在这里寻找的是一些关于如何最好地编码我想要实现的东西的建议。

我有一个`getlogin()`需要执行以下操作的方法：要求用户输入所需的登录环境详细信息，如果 6 秒后用户没有输入有效值（“live”或“test”），则将 userlogin 变量设置为“test”并将其返回给调用者。

我采取了以下`getlogin()`实施方法：

1.  启动两个线程，它们执行以下操作：

    *   `thread1`创建一个扫描仪对象，然后调用`scanner.nextline()`并根据用户输入设置一个变量`userlogin`。在退出之前中断 thread2 `thread1`。
    *   `thread2`等待 6 秒，如果之后`userlogin`仍未设置，则为`userlogin`. `thread1`退出前中断`thread2`。
2.  加入`thread2`以阻止 main`Thread`返回`userlogin`为 null

3.  返回用户登录

我对这种方法的问题是调用`scanner.nextline()`时不会中断，这就是为什么我不加入第 2 步，因为 main会挂起。有没有办法在中断后完成？或者这种方法是否完全矫枉过正，并且有一种更简单的方法来实现合同？`thread2``thread1.interrupt``thread1``Thread``thread1``thread2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:15:16.213

最简单的解决方案是在“读取”线程中公开底层流，并从超时线程中关闭该流。这应该会中断阅读并引发异常。处理这个异常，你应该能够继续你的逻辑。唯一的问题是您将无法再次重复使用相同的流。不幸的是，没有简单的方法来处理阻塞系统调用的中断。

**编辑：**

遵循完全不同的推理路线；鉴于我们不能仅仅为了中断输入流而关闭它，我能想到的唯一方法是使用 Robot 类提供的“程序化用户输入”工具。这是一个对我有用的例子：

```
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.util.Scanner;
import java.util.concurrent.TimeUnit;

public class ConsoleTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        new TimeoutThread().start();
        new ReaderThread().start();
    }

}

class ReaderThread extends Thread {

    @Override
    public void run() {
        System.out.print("Please enter your name: ");
        try(Scanner in = new Scanner(System.in)) {
            String name = in.nextLine();
            if(name.trim().isEmpty()) {
                name = "TEST"; // default user name
            }
            System.out.println("Name entered = " + name);
        }
    }

}

class TimeoutThread extends Thread {

    @Override
    public void run() {
        try {
            Thread.sleep(TimeUnit.SECONDS.toMillis(5));
            Robot robot = new Robot();
            robot.keyPress(KeyEvent.VK_ENTER);
            robot.keyRelease(KeyEvent.VK_ENTER);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

} 
```

上面的代码使用的逻辑是，一旦超时过期，我们模拟一个换行符，这将导致“name”变量为空。然后我们有一个检查，它执行必要的逻辑并设置适当的用户名。

关于上述方法的问题在于：

*   使用 AWT 的 Robot 类，因此可能无法与无头终端（？）
*   假设焦点窗口是控制台窗口。如果焦点在其他地方，`ENTER`则将为该窗口而不是您的应用程序窗口注册按键。

希望这可以帮助你。我现在真的没主意了。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-04T13:46:05.860

如果有要读取的字节，为什么不直接使用 System.in.available() 进行轮询？它是非阻塞的：可以调用 Scanner.nextLine()，它是阻塞的，当确定它工作并且不阻塞时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T16:47:03.787

也可以使用 FutureTask 和 lambda 表达式：

```
FutureTask<String> readNextLine = new FutureTask<String>(() -> {
  return scanner.nextLine();
});

ExecutorService executor = Executors.newFixedThreadPool(2);
executor.execute(readNextLine);

try {
  String token = readNextLine.get(5000, TimeUnit.MILLISECONDS);
  ...
} catch (TimeoutException e) {
  // handle time out
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-03T12:00:00.803

geri 的另一个版本是：

```
ExecutorService executor = Executors.newFixedThreadPool(1);

Future<String> future = executor.submit(() -> {
    try (Scanner in = new Scanner(System.in)) {
        return in.nextLine();
    }
});

try {
    return future.get(5, TimeUnit.SECONDS);
} catch (InterruptedException | ExecutionException | TimeoutException e1) {
    return ...;
} 
```

# mysql - Kohana 3.2 和 MySQL 存储过程

> ID：12803154
> 
> 赞同：0
> 
> 时间：2012-10-09T15:12:30.443
> 
> 标签：mysql, stored-procedures, kohana

我有一个简单的存储过程：

```
PROCEDURE `status_recalculate`(IN aid INT)
BEGIN
DECLARE actions INT DEFAULT 0;
DECLARE rid INT DEFAULT 0;
DECLARE actions_done INT DEFAULT 0;
DECLARE status_done INT DEFAULT 0;

SELECT request_id INTO rid FROM mtset_dev.actions a WHERE a.id=aid;
SELECT count(*) INTO actions FROM mtset_dev.actions a WHERE a.request_id=rid;

SELECT count(*) INTO actions_done FROM mtset_dev.actions a WHERE a.request_id=rid AND a.action_status=1;
SELECT CEIL(actions_done/actions*100) INTO status_done;

#UPDATE requests SET `status` = status_done WHERE id=rid;

SELECT rid, status_done;
END 
```

我想通过 AJAX 从 Kohana 3.2 调用它。在模型中有代码：

```
$query = "call status_recalculate($aid);";
DB::query(Database::SELECT, $query)->execute(); 
```

并且没有成功的 AJAX 响应。我究竟做错了什么？我怎样才能得到结果（或者，也许是错误）？阅读[这个答案](https://stackoverflow.com/questions/10169472/how-to-call-procedure-in-kohana-3-1)没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T13:06:36.163

我已经解决了。一切都很简单：mysql 权限来执行。

# architecture - 如何制作私有云并在云中扩展应用程序

> ID：12803156
> 
> 赞同：0
> 
> 时间：2012-10-09T15:12:33.017
> 
> 标签：architecture, cloud, saas

我们正在使用关系数据库做很多“传统”的 Web 应用程序。它们都是为有限数量的用户服务的内部软件。现在，我们正在构建一个 Web 应用程序，并将其作为云来开展业务，例如 SaaS。但是，我们没有云计算方面的经验。我们非常感谢所有建议，以便我们可以开始挖掘，因为目前，我们不知道从哪里挖掘 :)

我们的 Web 应用程序总结：我们有主要的 2 个部分

第1部分：

*   对于授权用户。
*   主要写
*   传统的
*   使用更多的 SQL 连接。这让我们认为NoSQL不适用于这部分。我们正在使用 MySql

第2部分：

*   面向公众用户
*   一种 CMS，授权用户在其中创建页面并发布内容。但是这个动作并不频繁
*   主要阅读

我们正在考虑单独管理用户注册（帐户）。让它管理身份验证和实施 SSO，以便我们可以在所有应用程序中使用它。我们计划构建更多应用程序，并预计注册用户数量会增加。

所有应用程序都是用java构建的。

我们模糊的是：

*   如何使我们的应用程序扩展（开发框架、数据库、部署模型......）。我们寻找水平尺度的方法。我们最初的想法是：对于第 1 部分，数据分片似乎是唯一的方法。但是要做到这一点，我们如何将给定的用户路由到正确的位置？是否有任何现有的开源产品？对于第 2 部分，是否有任何 CMS 可以很好地扩展？对于用户帐户，我们考虑使用 NoSQL 数据库。
*   我们希望从少量服务器开始构建私有云，并在业务增长时添加更多服务器。为此，我们需要什么样的组件（例如硬件、软件……）。对于软件，我们对开源更感兴趣。
*   “通过添加新服务器来扩展（水平）”：我们需要做些什么才能让它工作？
*   如果在一个服务器盒中同时放置 Web 应用程序服务器和数据库服务器，会有什么缺陷？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T14:47:17.947

**使用VMware Perlsdk**的最好和最简单的方法显然 perl 是 per-requiste，但它最简单的东西大多数东西都可以在 VMware 的网站上找到，您需要根据需要对其进行调整。但这并不容易，您需要深入了解操作系统的行为方式以及如何通过网络工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:42:02.700

1.  听起来您的服务还没有达到您必须关注应用程序可伸缩性的地步。为什么不让它运行，然后你会发现如何扩展它。

2.  Openstack 推荐，一个开源的、与 AWS 兼容的云计算框架。

3.  在基础设施层，openstack 负责处理它。在应用层，你必须找到自己的方式。

4.云计算应该解决这个问题。只要发现陷阱，您就可以迁移您的应用程序或数据库。

# .net - ADO.NET 全局 OnBeforeExecute 事件

> ID：12803164
> 
> 赞同：0
> 
> 时间：2012-10-09T15:12:48.523
> 
> 标签：.net, ado.net, compact-framework

如何在每个连接执行之前检查连接是否仍然有效（也是全局 OnBeforeExecute 事件处理程序），或者我需要创建全局异常处理程序“从连接读取数据时出错”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:13:54.367

我发现最好的是您实际上必须尝试建立连接。

这是我存储的代码：

```
 private const int RETRY = 3;

 public bool Reachable(Uri Address, string responseExpected) {
   for (int i = 0; i < RETRY; i++) {
     try {
       WebRequest req = WebRequest.Create(Address);
       req.Method = "GET";
       using (WebResponse rsvp = req.GetResponse()) {
         using (Stream s = rsvp.GetResponseStream()) {
           using (StreamReader r = new StreamReader(s)) {
             string text = r.ReadToEnd();
             r.Close();
             if ((String.IsNullOrEmpty(responseExpected)) || (-1 < text.IndexOf(responseExpected))) {
               return true;
             }
           }
         }
       }
     } catch (Exception err) {
#if DEBUG
       Debug.WriteLine("Url: " + Address.ToString());
       Debug.WriteLine(err.Message);
#endif
     }
   }
   return false;
 } 
```

# ruby-on-rails - 将 load_and_authorize_resource 从 rails 带到 mvc .net

> ID：12803166
> 
> 赞同：0
> 
> 时间：2012-10-09T15:12:51.527
> 
> 标签：ruby-on-rails, asp.net-mvc, security, attributes

我正在寻找在控制器级别加载和授权资源的实现/示例。我正在寻找与ruby​​ on rails`load_and_authorize_resource`中的*cancan gem 相同的功能。*

有没有人遇到过/有一个例子如何使用 Mvc .Net 属性实现类似的东西？

谢谢！

**load_and_authorize_resource 行为**

使用rails，控制器和模型名称按照约定连接起来。该属性`load_and_authorize_resource`利用了它的优势。当需要资源实例的操作被命中时，`load_and_authorize_resource`验证是否可以访问资源实例。如果可以，它会将其加载到实例变量中，如果不能，它将返回 404 或您已配置属性以产生的任何错误行为。

例如，如果我有一张资源图片，并且只有拥有某张图片的用户才能编辑该图片的名称。

所以我们会有一个 Edit 动作，它显然会有一个你想要编辑的图片的 pictureId。load_and_authorize_resource 将验证当前上下文/用户是否有权访问资源。

[这](http://railscasts.com/episodes/192-authorization-with-cancan)是该模块的小视频介绍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:58:28.817

我不知道这种 ASP.NET MVC 插件的存在。为了模仿它的功能，你可以编写一个自定义`Authorize`属性：

```
public class LoadAndAuthorizeResourceAttribute : AuthorizeAttribute
{
    private class ModelDescriptor
    {
        public string Name { get; set; }
        public Type ModelType { get; set; }
    }

    private const string ModelTypeKey = "__ModelTypeKey__";
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        var parameters = filterContext.ActionDescriptor.GetParameters();
        if (parameters.Length > 0)
        {
            // store the type of the action parameter so that we could access it later
            // in the AuthorizeCore method
            filterContext.HttpContext.Items[ModelTypeKey] = new ModelDescriptor
            {
                Name = parameters[0].ParameterName,
                ModelType = parameters[0].ParameterType,
            };
        }
        base.OnAuthorization(filterContext);
    }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // the user is not authenticated or authorized => no need to continue
            return false;
        }

        // get the currently authenticated username
        string username = httpContext.User.Identity.Name;

        // get the id of the resource that he is trying to manipulate
        // the id should be sent either as part of the query string or the routes
        string id = httpContext.Request.RequestContext.RouteData.Values["id"] as string;

        // get the action param type
        var modelDescriptor = httpContext.Items[ModelTypeKey] as ModelDescriptor;

        if (modelDescriptor == null)
        {
            throw new InvalidOperationException("The controller action that was decorated with this attribute must take a model as argument");
        }

        // now load the corresponding entity from your database given the 
        // username, id and type
        object model = LoadModel(id, username, modelDescriptor.ModelType);

        if (model == null)
        {
            // the model that satisfies the given criteria was not found in the database
            return false;
        }

        httpContext.Request.RequestContext.RouteData.Values[modelDescriptor.Name] = model;

        return true;
    }

    private object LoadModel(string id, string username, Type modelType)
    {
        // TODO: depending on how you are querying your database
        // you should load the corresponding model here or return null
        // if not found
        throw new NotImplementedException();
    }
} 
```

现在你可以有一个用这个属性装饰的控制器动作：

```
[LoadAndAuthorizeResource]
public ActionResult Edit(Picture model)
{
    ... if we get that far the user is authorized to modify this model
} 
```

# http - 谷歌按图片“image_content”格式搜索？

> ID：12803167
> 
> 赞同：5
> 
> 时间：2012-10-09T15:12:56.483
> 
> 标签：http, format, compression

我正在尝试创建一个应用程序，它能够将图像上传到[https://www.google.de/searchbyimage/upload](https://www.google.de/searchbyimage/upload)。我得到了那个工作（通过 C# 发布多部分/表单数据）

我现在唯一需要知道的是：浏览器通常如何发送图像？在 multipart/form-data 中，我在嗅探请求中发现了一个名为“image_content”的东西，它存储了图像数据。但我不知道图像存储的格式。

```
------WebKitFormBoundaryumAjUbPr6ymfh8hM
Content-Disposition: form-data; name="image_content"

_9j_4AAQSkZJRgABAgAAAQABAAD__gAEKgD_4gv4SUNDX1BST0ZJTEUAAQEAAAvoAAAAAAIAAABtbnRyUkdCIFhZWiAH2QADABsAFQAkAB9hY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAA9tYAAQAAAADTLQAAAAAp-D3er_JVrnhC-uTKgzkNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBkZXNjAAABRAAAAHliWFlaAAABwAAAABRiVFJDAAAB1AAACAxkbWRkAAAJ4AAAAIhnWFlaAAAKaAAAABRnVFJDAAAB1AAACAxsdW1pAAAKfAAAABRtZWFzAAAKkAAAACRia3B0AAAKtAAAABRyWFlaAAAKyAAAABRyVFJDAAAB1AAACAx0ZWNoAAAK3AAAAAx2dWVkAAAK6AAAAId3dHB0AAALcAAAABRjcHJ0AAALhAAAADdjaGFkAAALvAAAACxkZXNjAAAAAAAAAB9zUkdCIElFQzYxOTY2LTItMSBibGFjayBzY2FsZWQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAACSgAAAPhAAAts9jdXJ2AAAAAAAABAAAAAAFAAoADwAUABkAHgAjACgALQAyADcAOwBAAEUASgBPAFQAWQBeAGMAaABtAHIAdwB8AIEAhgCLAJAAlQCaAJ8ApACpAK4AsgC3ALwAwQDGAMsA0ADVANsA4ADlAOsA8AD2APsBAQEHAQ0BEwEZAR8BJQErATIBOAE-AUUBTAFSAVkBYAFnAW4BdQF8AYMBiwGSAZoBoQGpAbEBuQHBAckB0QHZAeEB6QHyAfoCAwIMAhQCHQImAi8COAJBAksCVAJdAmcCcQJ6AoQCjgKYAqICrAK2AsECywLVAuAC6wL1AwADCwMWAyEDLQM4A0MDTwNaA2YDcgN-A4oDlgOiA64DugPHA9MD4APsA_kEBgQTBCAELQQ7BEgEVQRjBHEEfgSMBJoEqAS2BMQE0wThBPAE_gUNBRwFKwU6BUkFWAVnBXcFhgWWBaYFtQXFBdUF5QX2BgYGFgYnBjcGSAZZBmoGewaMBp0GrwbABtEG4wb1BwcHGQcrBz0HTwdhB3QHhgeZB6wHvwfSB-UH-AgLCB8IMghGCFoIbgiCCJYIqgi-CNII5wj7CRAJJQk6CU8JZAl5CY8JpAm6Cc8J5Qn7ChEKJwo9ClQKagqBCpgKrgrFCtwK8wsLCyILOQtRC2kLgAuYC7ALyAvhC_kMEgwqDEMMXAx1DI4MpwzADNkM8w0NDSYNQA1aDXQNjg2pDcMN3g34DhMOLg5JDmQOfw6bDrYO0g7uDwkPJQ9BD14Peg-WD7MPzw_sEAkQJhBDEGEQfhCbELkQ1xD1ERMRMRFPEW0RjBGqEckR6BIHEiYSRRJkEoQSoxLDEuMTAxMjE0MTYxODE6QTxRPlFAYUJxRJFGoUixStFM4U8BUSFTQVVhV4FZsVvRXgFgMWJhZJFmwWjxayFtYW-hcdF0EXZReJF64X0hf3GBsYQBhlGIoYrxjVGPoZIBlFGWsZkRm3Gd0aBBoqGlEadxqeGsUa7BsUGzsbYxuKG7Ib2hwCHCocUhx7HKMczBz1HR4dRx1wHZkdwx3sHhYeQB5qHpQevh7pHxMfPh9pH5Qfvx_qIBUgQSBsIJggxCDwIRwhSCF1IaEhziH7IiciVSKCIq8i3SMKIzgjZiOUI8Ij8CQfJE0kfCSrJNolCSU4JWgllyXHJfcmJyZXJocmtyboJxgnSSd6J6sn3CgNKD8ocSiiKNQpBik4KWspnSnQKgIqNSpoKpsqzysCKzYraSudK9EsBSw5LG4soizXLQwtQS12Last4S4WLkwugi63Lu4vJC9aL5Evxy_-MDUwbDCkMNsxEjFKMYIxujHyMioyYzKbMtQzDTNGM38zuDPxNCs0ZTSeNNg1EzVNNYc1wjX9Njc2cjauNuk3JDdgN5w31zgUOFA4jDjIOQU5Qjl_Obw5-To2OnQ6sjrvOy07azuqO-g8JzxlPKQ84z0iPWE9oT3gPiA-YD6gPuA_IT9hP6I_4kAjQGRApkDnQSlBakGsQe5CMEJyQrVC90M6Q31DwEQDREdEikTORRJFVUWaRd5GIkZnRqtG8Ec1R3tHwEgFSEtIkUjXSR1JY0mpSfBKN0p9SsRLDEtTS5pL4kwqTHJMuk0CTUpNk03cTiVObk63TwBPSU-TT91QJ1BxULtRBlFQUZtR5lIxUnxSx1MTU19TqlP2VEJUj1TbVShVdVXCVg9WXFapVvdXRFeSV-BYL1h9WMtZGllpWbhaB1pWWqZa9VtFW5Vb5Vw1XIZc1l0nXXhdyV4aXmxevV8PX2Ffs2AFYFdgqmD8YU9homH1YklinGLwY0Njl2PrZEBklGTpZT1lkmXnZj1mkmboZz1nk2fpaD9olmjsaUNpmmnxakhqn2r3a09rp2v_bFdsr20IbWBtuW4SbmtuxG8eb3hv0XArcIZw4HE6cZVx8HJLcqZzAXNdc7h0FHRwdMx1KHWFdeF2Pnabdvh3VnezeBF4bnjMeSp5iXnnekZ6pXsEe2N7wnwhfIF84X1BfaF-AX5ifsJ_I3-Ef-WAR4CogQqBa4HNgjCCkoL0g1eDuoQdhICE44VHhauGDoZyhteHO4efiASIaYjOiTOJmYn-imSKyoswi5aL_IxjjMqNMY2Yjf-OZo7OjzaPnpAGkG6Q1pE_kaiSEZJ6kuOTTZO2lCCUipT0lV-VyZY0lp-XCpd1l-CYTJi4mSSZkJn8mmia1ZtCm6-cHJyJnPedZJ3SnkCerp8dn4uf-qBpoNihR6G2oiailqMGo3aj5qRWpMelOKWpphqmi6b9p26n4KhSqMSpN6mpqhyqj6sCq3Wr6axcrNCtRK24ri2uoa8Wr4uwALB1sOqxYLHWskuywrM4s660JbSctRO1irYBtnm28Ldot-C4WbjRuUq5wro7urW7LrunvCG8m70VvY--Cr6Evv-_er_1wHDA7MFnwePCX8Lbw1jD1MRRxM7FS8XIxkbGw8dBx7_IPci8yTrJuco4yrfLNsu2zDXMtc01zbXONs62zzfPuNA50LrRPNG-0j_SwdNE08bUSdTL1U7V0dZV1tjXXNfg2GTY6Nls2fHadtr724DcBdyK3RDdlt4c3qLfKd-v4DbgveFE4cziU-Lb42Pj6-Rz5PzlhOYN5pbnH-ep6DLovOlG6dDqW-rl63Dr--yG7RHtnO4o7rTvQO_M8Fjw5fFy8f_yjPMZ86f0NPTC9VD13vZt9vv3ivgZ-Kj5OPnH-lf65_t3_Af8mP0p_br-S_7c_23__2Rlc2MAAAAAAAAALklFQyA2MTk2Ni0yLTEgRGVmYXVsdCBSR0IgQ29sb3VyIFNwYWNlIC0gc1JHQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAAAABQAAAAAAAAbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWFlaIAAAAAAAAAMWAAADMwAAAqRYWVogAAAAAAAAb6IAADj1AAADkHNpZyAAAAAAQ1JUIGRlc2MAAAAAAAAALVJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUMgNjE5NjYtMi0xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLXRleHQAAAAAQ29weXJpZ2h0IEludGVybmF0aW9uYWwgQ29sb3IgQ29uc29ydGl1bSwgMjAwOQAAc2YzMgAAAAAAAQxEAAAF3___8yYAAAeUAAD9j___-6H___2iAAAD2wAAwHX_2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL_2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL_wgARCADvALQDACIAAREBAhEB_8QAGwAAAQUBAQAAAAAAAAAAAAAAAAIEBQYHAQP_xAAUAQEAAAAAAAAAAAAAAAAAAAAA_8QAFAEBAAAAAAAAAAAAAAAAAAAAAP_aAAwDAAABEQIRAAABv42oZooyrJczP5AuBS_EvRTEF2K2yLiUe2jtNHcHlVJicKbb4uim-qpd0AATmlijhdgot4IOepF-KD7e_iSzE9C2edfSS0lTZ4g5eMCtu_eXPPOr7QiW2jENwAA4dDh0OHeAdDnQOHQ4dDlGvTUygdVkl4ZdsHWjePqdAAAAAgZpkZqx2GOMvLXWTyItJLkQEv2HCY84sJX0hgmrxlrk3UaOzoABwjKHbmI5s8ZJgAMa3cgyiu7z5GCms0AhQAADvAmHtfWbuAAAAAAAcOiVAAFZsyDAx6yAAAD1WhZu4lkdbwfkXGCTFFycRvSRYumZULZX5smBo6OgGZU3T8wAAAD1WhZr1TkKsXJ3S34uXq_se8tF8LK1qsEatFRcIam8zPQR4AQWU6LlxLOYALS6pgX5VFWTcHtWUjTx3OnGfr0C3mE-lxsBmLbeMoIXm0NzF9Yo2tgAZ7QrVVQAAA9VoWbvie2ZKWmJcepC2OnXErb5m5Jqj3eil3YyEIc07PdCDnUGMxPp5gAAB6rQs3fPNDqYWfF3wrXMLli1OKF02nICIN0pNYYF4u1WtIRknWTJgABRzklGnqtKzdmT0KzZFBUrZ0IlMwHKpbATXbIDF8AQ8wFFL0FFeW4K9DXoKR27AAAcjyQ7FLJHsZ0kiJcj0IwkF1KXJYiXA-GboUAAAAAAcYSDE8loWJ7xQh-0QSVUscaR3q_9SFevujaUaeg8GXuewAAAAAAAAAAAAAAAAAAAAAAH_8QALhAAAgICAAQGAQMEAwAAAAAAAwQCBQABBhESFRATFBYgMTAiJTUhIzRQJDZA_9oACAEAAAEFAvz7x2_gPZLZ4mx27w9o3gz78TbJEJrmwXmsaLCzVk5Cyha2ZDJ2LbQK-xdbZPZ2Am7CxdTl6y5ypeK8Nt2zARawtGcOaK4IP2rEVrEz40mQles9KIrL8mkMon9mh4blrUV2FmHqE-aQjqyrv51NGKckW2FieoMxdcRf4YrBslmqqBXLL-NpP4hxf1Soj2dcOrOqwSS8ibKWduVD_reVxfJsPC5OaIKpQBxbkQFiw2QKa7TIHpnnFKmKYTLjDErS6KY-u6G6qXzdsWD55ar3mFg3MSyroWzSw0IMxMic4WGhxrQIyLGoxKG5u_Pl-Hllwd1M3eHs7y9k7Vwg8oE9yL_4ThGwJ2lOvvet63qO5bRoymkOERQ-dmFwsDFtl87k7nc3c7m7nc3s7o9ndHs7o9ndHs7o9ndXslYNTyNi3DO6vZ3Z7Kez21D4zlqEYuLk0IoziPWKMYfhzWHqnAZvXL8YDTXOseLC_wANk2bOa_OpiWMPEygGMNw8vPD0TYsIOYpfgWeZWH8GkCzYkJ2vmoIsYfKY4E0ajTLlijJBj5R-vz3i3no_KP1-Lq1r4y11abB6dr4x-vAjGozXd83JFHDLKw0EEDiJ4tS6FtwcMkkxNkPw4iD0OfGP1z5YVsIttRgRiMeubUqw5nK1YiQE1lsXcGzOU9RwsBmhGrLLac-WiMiETx4iH1JfGP1ZQiRLZN18KyEJwdFFZQxtBkrKcW7BiwYIiCVYV5_ScxWwmIKM-pDQG1JYiwik1428NTrNL7lmkd7yNXveapueaoo7zVAPlZ2y-t7sd8lrMShD3oWRd1hvQrgI2DXojileiIB2zC9nMG8XuwKgm2L1erqctqnGwDw4hn0o_GP1ZVxwHgKZZehbwgChyCxyR9E1hAlDkVTkj6JrJjmKWlWJR2qxrIRlOVMqRVLw4kn-v4x-mh-arUk8qzziKPNLh2fNDOJful3-15f7_c19clrCXRX0ceq08b-fVZfGP1htelsfcSuWNuu6nU2Q0Ne41ctrET-q64Aon7jVyxZi25DiBWMHrsDKXDseb3jZE8yx-MfrLwfRaJ0izSbFCAS1WoN1r26tltWCQHWVIXU_bi2PLxWe9urZaVQEVeGo_r8Jb5RnLrJ8Y_WcSD_ucPk6q8muoVPvy7bOJP8AF4f3-3ZY_qus4kl_Y4bj_wAXwsJ-XX_KP1nEA-qvXdYVj3iwyBSDN3iwxh5pqC77S0O8WOSKSZu8WGMuMNZQR5VnhfT6Kzx1r-risky5H6xpfTSyNPpE_LWHo4Gb5Y-jF4CCGkRctZujht3lrH6iL5k1tJq-Fgh68ftqGe2oZ7ahitCJdiwqYPz9tQzXDkNf6SUtR_NOJfN35_Pkzm_Ub3Hz9x5s8h-d14d0YNslmZITw5k2_DzJsxGWDGp5rfPX4JDnsvQfl0GzUDc4wLGERn1kefTjXUs1NaXoOkzLRBl0w5CZ5jjLZoa5R_BIUtz2E24aEXIhNqGhF5xGbW5BLucIyjh1mCSguQAOhjl0MZ0H59DPKUS7zpNrQ-ro_wBj_8QAFBEBAAAAAAAAAAAAAAAAAAAAcP_aAAgBAhEBPwE0_8QAFBEBAAAAAAAAAAAAAAAAAAAAcP_aAAgBAREBPwE0_8QAPRAAAgECAgUICQMEAQUAAAAAAQIDABEEEhMhMUFRECAiMjM0UmEUIzBicXKBkZJAQkMFscHwUIKT0eHx_9oACAEAAAY_Av0BTDDOfGdlduw-XVXbFvm10I5wI33HceY5iXM4GoVklgjVrXtao5l2MKfC4aJHtb-1PEmGjMidYcKxJ0SGWLqqKytCmjBs5G6tB6Ol2PQHGlOgQRkDWdeuu5r_AL9akaRVBU21VKVwy6FdjeVI64VDEx200r7FFaaDDpotw41ik9HUsq6kO-hBiMFhlv0dSb6zDCwF2NlBSsTK-Cw6KEOV1XfyHDSm7p1T5cpJ2CsTiMXIFDDKgPCpcLmvlOZDRxmc5itstY76_wB6mKuW0jX17qxGhw2lu-vyrCNNDoiN1R_PWGjdTCuzJxphCtrm511iPkqH6_3NPDe2YUInwuljXYRUrxRaOY9cGsbMl80Ml_pemdhZIYST8bf-am-DckLDxW5dDFCzaQa2G6ss-Bsyfvb91LNh8C8YTVl40ky4ZnZtqcKnxPoUh0v7eFacQsXy30e-nRsM-WVr5vDSTjCSepNreKkhXDSW1Nm_xSsf6WSy7GP_AMrFSSI6Zzm6VT4VcE9urnqLDegyEA9b60RFmJzDq0I58G5kA28axP8AUZICCy9GMb6lzYJ2XENrHCngwuFeQTqQWvsrFQPCyZUJzHfyQKPGP0QeOUiF_LYa7c_au3P2FFGmJUix1chxTDorqX4_ojHIt1NFogZY_LaK16qsAT8KD4gGOPhvNBEFlGwewT0SXKRtF7Xr1rzr513mT713mT713mT713mT713mT713mT713l67y9d5eu8vXSlv8RXRly_AV3l67w1aKU-uXf4hzizGwG01dJkYbNRrPGwdDXThF-K6qvBN9HrpQlhxTX7RZUPSWklTYw5uJjADZOiFO_VTl4THMRk0MN75r7acSOwtq0bLbLzPWxK30r1TtGfvV0AlHu1ldGU8CPY5IpLLe_N9Iw0-hkIs3A0hhT0kMDn-bjTPP2shuwG7y59nQMPMV0VMZ92sl8ykXB_Tlx1oul9N_wCi280g7DUkXhPsdGozPa9r7K6UZS5sDxrpuq_E0rQSxls4B131VaORWI4HlkOfJ0dTUmMaYNo-kqHy-FaR4snDXt5qSj96-ws724-VEBM8khzC37ksKZUJi9YLRXvRXElS8eraaSTAwXLMNl9lEwxBCRrqVY9YjNs3HkyzRXXzqWPTsmGvdBfMDXo4Ok0Iys_-KSN2sz9UceYknhfnsjEi53UIpwskf8cy_wCanw7C6RynR_CnaA6ORiAX2mtGiR2y5GK_uoiLJomj0miQ79lDD6PRBtWUHb8aSOY5lkFgwOoHhS2jMkr6kUULy-jOrdJW13FTSR7AxCVJH_IHuaSR0DMuw8yUEgb9ddpEPi9d4w__AHK73hvzrvuH_Ku_RV30fj_7psNkZyNrK1spq3S-y3_tWZIGPkWoxy4O6_PXThLMAArXHRtTznDFpW35raqZHwhsffrQzYYyC2slttITC6Omxg1fy0sMeGbKPe20cRAJYGO5aAlklybwqgE0skXUPKq-J-fLJkLRE5s1ZY0LNwFd2l_GhpImS_iFZo4XZeIFd3l_GhpI2S-zMKDJC5U7wtd3l_GsroVPA1cQyEfLVzDJb5aCqCSdwq0upmbNbhywR-RPPlj8SmoTxNuSNuD06-F-TDn41F9eQ_KKiHuCpz7lR-QJ5hHhUewa38cmr712cv2FNEiSBrgi9SiVWOa1stdnL9hUWjVxlv1qWF0kJB3V2cv2FNMgIUjfSjRy6h5VJCiSBm4054JzJ2972DnxgNUU2eS7DXUkiO-ZVuKMUhI6Nxau0kqNo2Y5jbXWldnDXtqrtJKeBCSF412klCRGcsWtrrEN5AcpPCmbib-wgk8iKy-ByKZeItUY-I5Ifno_OeST5xyQr716mbi9uWdvcPsQ3gamED5b7dVdufxFCVTZwb3rtz-IoLPJmUG-yskMmVfhXbn8RWlY-sve9dsfxFLp3zZdmqgfE5PKw8TAc1Y32lQ3MeFjbNvrSiYtqtbLyNPpyt2zWy8giLZOle4FNGHz3N9Y5PSdOevny5eRZDMUsLWApIA2bLv5VQyFApvsrvLfjXeW_Gu8t-NJKZS-XdakcyFCotsrvLfjXeW_H_hOkQPbFlOrdrrL5V1h_v8AoonVq2far_YfWj8KGc9HkK6y_AVFJIFHT3UI7MpOy420VCO1jYkCljYEZth3U2o3XaD7K48td9ldfXbj5116BLX404zi-6utuNDN1t_IzDKRMLdLdUSR-sOa5tURaExiPaaJgjkRi3_SaijVdmtm3CpJSpAOoeydgdtqIz1rk1Xq2k2DVQ6W8Ut3vr10zB_hRzNe9NllGRv2sNlLHG2_pGrZ1rrrV842a6663rrV1hQzbf8Akv_EACoQAAIBAwIEBwEBAQEAAAAAAAERACExQVFhECBxwYGRobHR8PEw4UBQ_9oACAEAAAE_If7kAyShmAbiofYaxgLuAog0VNBEF4OjPyg4iivDlMzMMwVvAxKFWtDkecNJRIAith1ltIiPlBBUhQM1cz6kQ98V4VSXF9Zf2mMNReAwBFfaAOsgu0MnlLa9V4At2NKNHMzbwrMItSAZDzhgBLELIL3gwyRoaae0FlyAW8oeHWDAvCwQGY30-HEyaAyTiH0GENFT0EGAcWtQM9j4zQ-Ao0n5Ceu9mV_hU3U9YIzPMCcjCac4AFkVrK_utCS4GwFXgFdzqs9Q4XCP4A6HECmoWbdR8Q-48E5vpNJJe4z4UhAnS0L66Sj6tOBy7AtwaQcKk3D0aGBggv1RsTirOe0XUpBq4zSXUlkKi7qsMMgK7SA6WpMZbRDklVYdVSA-gFE6kbMRwd6YY8Ywlia5Jh4E2DEvdLvD0JAqIu1lvBK1ILk4pdgC_NSEDFSRtPaYjMBCEl4rfaOYQsbVpvBh4WBBscKrBPucVvFFvFFvwLeKLfgooouAdMKUHYh_znxPqHaL3iEqPKC812W5_wAfwJ_kM9fgzCQJDzBEoSWhEdkaA5fwNvsIH2KgYgPOTK1vmisOUbdTz57c5QhP25-3P2Z-jLpdIe0un0A4Z9cQyHQx9FY-UPEZkwJXtmwMBqAGLGNyH1j0lUntdxGp6JvpLAgg7_zUKKxC5X3Q5HIYw-TIC1dqqWKEioGvoPByliqTWdLvkFJvk1eceHThojPc1XyMTE8oH-AhSUagnXkMb0EoMIhQ7ANC57EPCKS0kYgOg59t7uEenVZU8oEGdKafPc6_8CeYn00r4Q35rnX-ThuAGK8oQJgREIfygdMc1zrxG7vEABqTALW44sFDoBQ2WIR2FAZHDZucAyuIS722Dj1lnOIRqq7He8p4Sa6l1G3KgFFHqOa51hG60TlqAPxK0TKkoMWR9R4SvXFAZNBt0CTp5zMgUBZxGXIAmTzuYZSQIEykzh4FtAFc2Gsfg90NHXaDPq8jWxwPWJqd24eOpXgAPVMAvjqJ6RH-c1zrFRqRv1p4OFkat-sjUFiXZV2NhmmGgQlVJhHTcqSBu9jU6xXgsHAKEZsfiVzulbgG0lVmSOn76wVVEJRC74UagAwYqa25oO8NM1Y8kHMNDOsLRMcVLdATQYIntAJjTqEwr97T43F-8MPvBbvoEAUaYC6GtRCDI13Nd4wEigdESHoUx0hchvLvaUVWWCx0pfWUGkoIDQgIneUSK9sYlAjAhO6goYKI5T37QkMsTkkTXk0iy1NLx-gMkBDz-Q6F3XjhM3QGo2PFbmofIA8xHLMCwqgNQATnSUks0sz9HB5YpRcDzNRsifvZVUaA5biYQQZ-tlMLtKMDDwGCCqIFIYAySUos2AGTDoRrTsA7cemOY3Oso9ZDqpXajPjw-87Bm5D6gcB8IPtHbSevBm0KbXB9JtuU-ypclXaDd-a514EByT0CiDJ9TeHqAgIVD1g7mZIFE32n1zvH_tZBlb7Q3ohYhV8Z9c7wfCAAvlhKC3yg8QoEQvebv_uOTQ5x5U5rnXgjBT0BdoYAmwBF7H1h9MgBIVICPsTWPpn7ojBYFIY6KIqT9UQlogAbqgHvKPfEEFAIMKdG-afxxZNgcORubzc1zrwQjcmPzNfADXuZv0-iP7J9E8AZNC9pSNOACOovbh1efkH-xWhPIP8AeNW7CHUhcq4XOvChNQnzpD4xMFAPvG_S9JRDrTM0fpbQpRABEI-EZ0QtAT2n0LtDp0rIXn1rtKidoCfSfaCp24_V7L7chSAAZNABL8VPG483wudeC8oUgtL9fIkc2o1KpLRMgQjEAFYwfmH8jXoU2BDsmnzhq82h5SkAOzmFBA1QTZfEVvQ2dJ-N-Z-d-Z-N-Y1H2DEB4lpiAzE_O_MDdj8_9o5w4LSzP9TaY-yA7I8CZBqKGnu1CgoFdtD6QNAGJreUMwicMTOXpKoywFgL0tAFSU0D4EqQg0W6x4AcbfmIfitQgEW6xgDDs7qx0iIAGVwIABFj_A2hya5IXAFwt4Uylk_TSVXrPtT1goRQL6m_yIO5CF5arAqpFgF1JixpRZDaASDPBFOtTViZyjM9JX-8RYNYebVSwDYRRCJ3hBg3_iuGRADpeVwyULkBL5jdQ6BwjSAFJgIa47wAl9StxnFYZKcrrjpBUQ6VY02lehFTakpnRVXhhzxNfUhOd1t93gCNJqjluEwHVtCQsbSNqLKlJSARW1MAAdf_ANL_2gAMAwAAARECEQAAEECMEODNAIFPPGBCHGFIONMGPPLLEBMIADMDPPPLNJOEIAAFAPLKBLLCACABLPOONPMPKIAFPLJKEOKNLIAFPDMOAGPIPJAJGCABLDKIPAAFPOMEHFHBPAAFPKKFABLPOCAFMPHLLDPHLDHDHPKKIONAMNPPPPJEPIHFGMNPPPPPPPPPPPPPPP_EABQRAQAAAAAAAAAAAAAAAAAAAHD_2gAIAQIRAT8QNP_EABQRAQAAAAAAAAAAAAAAAAAAAHD_2gAIAQERAT8QNP_EACoQAQACAgECBQQDAQEBAAAAAAERIQAxQVFhEHGBkaEgscHwMNHx4UBQ_9oACAEAAAE_EJOvhI8mSOnw1vJOpkjrJOvhJ1MkeTwk65J1MFAAlLAGIZvgL2F-ajFRhSGHZRPzgYObKPqk_JjvBC2ODu86yyPioSkKcROHkYTBkpPRpx1YKJnqHckPcxKiylilaFK5N3CVmDDMx24_EiSEgGVsjt05wTNqfHDFqlk1F4JTAZZIEQFnWMDEgGWSnBpk1xONhgkeWBDCLAilmVvEY2JsdKDsuIrWRgAsxQklmQjw6xg0dzlwHdYMDBkvawFC-gY5e56qk0yQ0x0cF4OQItJZIk9SYRPvcskAYDvtMC7QgVLDaR1IzR-cuQhMlSuqvh7XPgWF3TAJV9MTUsZAghDYHqzglEQaViE96O7Jh4mjCC6dQVG7njJTjHs4UCaAIEije115YbbcAlQUO7yfHkUyKyDn7XqwdElqqVxDpXSPPBeQ1KHAtoBo74pizUB3zSeUUcgMpPMMBwccnsJJOk0xBgmErhtATOgvfGIyGGdijI5QvIcGifFE1J0kHpDKl_UYRN4tgEs7l98EL4RrRAUIkwBtKtK88mf4LaXhCI1F0byDrLxGQy6SIVOt424KpaMhaYNbcBkmuiPJ4Row1KMMJA2vXYmBrEuqGGArmxcTJkzEnCAkOiU8D543ETJGzAophZ2ay3_-I0hhNJ88jyiBwkqUJgYmPbDkqfAdIZDs6IxSqGZhkyZXdxPOSoUzpHsuJjWGD0wAxTZfkvlgqBZiLQNhUltlrjNquahxcaPfDicG0FppZ0l5RXniCK7IMUSkjq7fAm5eB2C_Bgy-E5mWebBHLCK3kurGTM-Znesl1yfCPLI8_fGfOEHddMZESmV04hAnWqyI1QhiLSjss9emS4r7YgR5siSBPtNnLNGN8AWG4hTsK83s4EfWgwGCpipxnpnpnpk5OTk9sBeoUoeEdicJrH7ZWiuhdOpT2x0WNqE9HDC2wIT6YBwPDHpHDu-mQ1f5AMk-s4TEXA0hFXTG8V9wEvyEnzkP5vov_cBnJ-w_rP8AN_1n-b_rK3m7f6y38T-selXq97uP3G7oZER8h_WEn7vjE3JQI7nk57Q9cF9KxjsQBte2Vmi0WSYHpMO404yCUXQMO--JMbf7b1xDMNks-4ezkOU8g68g8wxUjdIIfbj-IYxwhN--o9kr1weiCI9pO4ifRpjxAaCD6x9hx1DRhJIiQQgsnN84bHDBoAlnTDRPh3xL0cx7F5NINfl7-chhnMce8XwucwaezSfwbYw3qJEgF-D6LkRM4VPhvGinUK9ucUUk-WW7SCOSrRyzynxJAKdAPWcNfU3dON7Tk0k1TeqT7YCcN8Ewj3E-cd_Sc_8Ahi5edzfAYJSnr9Jz9ETGT4SGDJ4xjGi5YKiXpgz9BV5AWI04FiE79a9k-k58YWDJsrC2Xa0U96cfryELxOxSEksTAAZIRTrbgKbNMZJA9i_7w3mSk-aH5ws8G7gIMLlzq0g5wFYzrKChYCjA9ZzVo1B5cIuJL-hJcHZBYrT9kx2_Qc-EESgFqusXRAsD773ZTih2iTBi4GrTpcZ67bSwUhKkTxSJdEs91DlhLN-WTJVnEkkUH9YLwChIXDK83khIgstJRcx15wEzlQBKugc4er48tBLXcjCQhBgIGaplLtW9UpBABTIAuQDs63GS8-EtBCAOb9b6ZISIjxMIkxPRQ_Ix39Bz4RAJSSSjJHKFRzGOLsHFSke0SKmmLqI1aEkVXVZCOnnjKzl4IBW2AepEVGUjjcZYF6DPJbYMD8oQUgopllAiV54_IWEZkSeksGh7pkutghNy0Xg9pBkY2ooZ2zC2wavEw_wgllI3qdnTFZnoRVhju1jiTyy5mMaEj3Ce3XG4SbBce2zo6xKWHiqiBfIUS8th3caImah_nCpZ_wCqMgd7qn7YOM92R_Bh1STi_DkcVTbBwKnUAkSMdjtEyXZkGdqh0FtnvhySisXeuRHId1Ll4HYQS4HWYS57ElAgipRTExoxHsKiOALCKmWVXeLUnIBRlDcVY9cPrgcYRHUBMju6y6cqwOiI0wjMzj10pUZerzhM5paRl6w320UYddaY66TFO1STPEZKPcBh03E8xHpkLEQJClIcJrxoQrOqD8xiqyv0GTlvVgYAXsCOsTF73zkUkQbGbYM60H78ZKWsTDS4ndRiuIQ9JskIxff7vbDhPKFYNxJe8Ojk8YDCGdP9XtlERSMTphhwwNl4QpK5MSxgCAOWsQG0u7AC8bSZNKUA94l2mOPGedTJ5ofjOfoOfCN3EV5kfMYiCH-UE-8ZLkbFkL2E_IZNbKMvhX3nwh6z2j_bNn2-T4RWf-8_nKn_ABhMuWIPuR-clCSfKQ-XDxhCQHstvv8ASc-EOsL5GcO5XuA98GT3TsyYXisWMwnU8ZK1qpICUp18AEoYZwScELqxGTJ6CnkeAE9aMgIOYXFTdMcQGCF5KwSLMLpki8o7SH2w8HeFKzC3x_w-k58IdZXYWI6yfKwo4IADIFag5KAxkIm6xiNaCVCmeIcTl_sdsVpz0UAJEHnk0NZRDTZ3z9Y_GRKBzlIa74kk2fprKQawBFdHQyaHqXzL8PE2kJb5Xm55vqX8_Sc-EcYoO0vJE-7lngg6QH5wOLmq80YqSBeeVD7xgkZSulPm38YSpN7tIZOJsvs5waDteRLr7U4prkPJfHqM-lA-Ux34grBiglw58YK7UfgCvvhYTGVQY0Y26w5licDUOx1wkc9M7JxnV3TESZA6XGM-O5vMqeOMqrEuVLW4URgI46ZwRmsBIuEXVJ0OhleR6hEeNGjCTe9uXfim5hYK9DH4mDDSPUgCe2GGfAIYMsFiIh6Zd6hYB7y6gxTh7YZxdAAyO5651w8qbwwYkKoIhj_GV8JDJEREvTP8rLRE4InncOJz_CZECsCGysyXfxnNQPCVV6-L-kKOehtNS-_jIUXYiwqGwdll1vEZfad6TaRF-_goUEss_wDrE98WCZxSXiw4a-k8KoREvTBmxk_lINhGmTKVNRMcdHjJfaSxtM7OwYjjGEzzCD0ZHble7zXRVCBBwE2m-vbAqUaOHJVMYGi8iUgjJFW0t3eoxImOtiWJSLiNEbx1l8IaukkuDV41YIWpV3KwEax-FRrjUXzHOffXm4HbeFQGyPMJpmryjTzB0Hy8sROQkf4OthCQpcNTylPa2dZHIBNJJtMREtJ4e2agxPbxWYHcofOsrWDAkLMENWHWErlIhFpKpeKISNxiRT4RIYiqWkl9nrhQYjapPMTebMX2oUioMvB09uLmWJpgzMp2KPRxj4CZNEbQTKEBO2Y5nQ8R-QdeVluREN4lFw9dsEzWM1ou0Rh5G83hrTp_A6w0uoKCUF4nqYjDMBQpSTnbvG95QQAwpUKRVpzcZAejm7RJOYj3DmrMk2wUFh5NWE9G_Uk1CaiG9RLV7moOSoQiR4Ro2T5ZMSS2oQNeYvrkzOc2bcz_AJiqwmAEC46ExqXI_TIIRVG4qjqiS3eLQKi2kQSxs_PMWxQVMmjaIjU3z0MogUAFEyXqqnruI5xCAj6kA1HWy8Itl-XYZNbx_V60V7f_AEv_2Q==
------WebKitFormBoundaryumAjUbPr6ymfh8hM 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:22:47.367

默认编码为 base64。您应该形成一个与您的嗅探请求相匹配的请求，但以下内容除外：

*   该`WebKitFormBoundaryumAj...`字符串应附加一个随机字符串以确保其唯一性
*   该`_9j_`行应替换为您上传的图像的 base64 编码内容。

服务器将自动检测文件的类型（JPG、PNG 等），因此您无需担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:21:03.427

这是[base64](http://en.wikipedia.org/wiki/Base64)编码的图像。您实际上可以在许多地方使用它，例如在 CSS 和 JavaScript 中。您基本上可以将其放置在需要常用 URI 的任何地方。您还可以以这种方式编码许多不同的东西（例如，@font-face 中使用的字体）。

在大多数现代计算机语言中，都有用于 base64 编码的内置功能——如果你正在使用的话，只需在 C# 中搜索一个。

您可以在此处阅读有关数据 URI 用法的更多信息：[https](https://developer.mozilla.org/en-US/docs/data_URIs) ://developer.mozilla.org/en-US/docs/data_URIs ，也许在这里：[http ://css-tricks.com/data-uris/](http://css-tricks.com/data-uris/)

# python - Django：简化视图

> ID：12803171
> 
> 赞同：1
> 
> 时间：2012-10-09T15:13:11.587
> 
> 标签：python, django

我有以下简单的看法。有什么办法可以让它更有活力吗？

```
# ...

if 'folding' not in request.session:
    request.session['folding'] = {'shop':False,'users':False,'chat':False}

# ...

def update_folding_view(request,category,is_folded):
    if request.is_ajax():
        folding = request.session['folding']
        if 'shop' in category:
            folding.shop = is_folded
        if 'users' in category:
            folding.users = is_folded
        if 'chat' in category:
            folding.chat = is_folded
        request.session['folding'] = folding
    else:
        raise Http404 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:33:45.423

这就是我得到的：

```
from collections import defaultdict

...

if 'folding' not in request.session:
    request.session['folding'] = defaultdict(bool)

...

def update_folding_view(request, category, is_folded):
    if not request.is_ajax():
         raise Http404
    for item in category:             
        request.session['folding'][item] = is_folded 
```

# php - 正则表达式 - 美元符号仅在另一个字符之后匹配

> ID：12803174
> 
> 赞同：1
> 
> 时间：2012-10-09T15:13:18.250
> 
> 标签：php, regex, dollar-sign

我知道有很多关于正则表达式和美元符号的线索。但我读的那一篇根本没有帮助。我有这个`\b(foo bar\$)s?\b`应该匹配的正则表达式`foo bar$`and `foo bar$s`。问题是，正则表达式只匹配`foo bar$s`.

因为`\b(foo bar)s?\b`它适用于`foo bar`和`foo bars`

美元是名字的一部分，所以我不能删除它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T15:16:53.953

```
\b(foo bar\$)(s\b)? 
```

`\b`匹配单词边界，定义为单词字符后跟非单词字符，反之亦然。`$`是非单词字符，因此`$\b<space>`匹配失败，因为`\b`两边都被非单词字符包围。

解决方案是仅`\b`在`s`.

# height - 为什么我需要将 44 添加到 UITextView 框架高度？

> ID：12803177
> 
> 赞同：1
> 
> 时间：2012-10-09T15:13:33.670
> 
> 标签：height, uilabel, uitextview, cgrectmake

我正在尝试动态更改 UITextView 的高度：

```
... UITextView* textView; ...

CGRect textViewNewFrame = CGRectMake(textView.frame.origin.x, textView.frame.origin.y, textView.frame.size.width, 130);
textView.frame = textViewNewFrame; 
```

在 IB 中，我有一个与 UITextView 顶部对齐的 UIButton。UIButton 高 130px；UITextView 是，比如说，150px 高。

如果我运行上面的代码，UITextView 最终会变得 44px 太短。我必须将我的 CGRectMake 行更改为结束，

```
..., 130 + 44); 
```

但是，如果在 IB 中我将 UITextView 的高度“硬编码”为 130 像素，则 UIButton 和 UITextView 会同时呈现顶部和底部对齐（它们的高度相同）。

因此，当动态更改 UITextView 的框架高度时，我必须添加 44，但不是在通过 IB“静态”设置其高度时。

奇怪的是，UILabel 并没有像这样行为不端（动态调整大小时我不必添加 44px）。

我知道 44 是 IB 中的一个神奇数字（导航栏的高度等），但为什么我需要添加它？我错过了什么/做错了什么，或者这只是一个异常？我担心这一定是一种常见的操作，但我找不到其他人提出相同的问题并得出相同的结论。

# javabeans - 将 inputRichText 绑定到 Bean

> ID：12803181
> 
> 赞同：3
> 
> 时间：2012-10-09T15:13:44.607
> 
> 标签：javabeans, xpages

我正在尝试将 xp:inputRichText 绑定到 bean (ChatBean)，但是当代码尝试将字段更新为 bean 时出现此验证错误：

```
java.lang.IllegalArgumentException: argument type mismatch 
```

我尝试了一些不同的东西，比如转换器，以确保文本是字符串，打印调试消息以找出问题所在，更改“setChatContent()”方法的类型（将输入设置为读取-only），但不能让它工作。

我错过了什么，还是不可能？有什么想法吗？

这页纸：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:messages id="messages1"></xp:messages>

<xp:inputRichText id="inputRichText1" value="#{Chat.chatContent}"></xp:inputRichText>

<xp:button value="Save" id="button1" type="button">
    <xp:eventHandler event="onclick" submit="true" refreshMode="complete" save="false">
        <xp:this.action>
            <xp:actionGroup>
                <xp:executeScript script="#{javascript:Chat.saveContent();}"></xp:executeScript>
                <xp:openPage name="/chat.xsp"></xp:openPage>
            </xp:actionGroup>
        </xp:this.action>
    </xp:eventHandler>
</xp:button> 
```

在我点击“保存”按钮后发生错误，该按钮调用 Chat bean 上的方法（代码被缩短）：

```
public class ChatBean implements Serializable {
    private static final long serialVersionUID = 1L;
    private String chatContent;

    public String getChatContent() {
        return chatContent;
    }

    public void setChatContent(String chatContent) {
        this.chatContent = chatContent;
    }

    public void saveContent() {
        // TODO implement save
        this.chatContent = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T15:42:58.200

[*UIInputRichText*](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/component/UIInputRichText.html)需要[*com.ibm.xsp.http.MimeMultipart*](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/http/MimeMultipart.html)类型的对象[](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/http/MimeMultipart.html)

 *如果您将 ChatBean 改为使用它，它应该可以按需要工作：

```
public class ChatBean implements Serializable {
   private static final long serialVersionUID = 1L;
   private com.ibm.xsp.http.MimeMultipart chatContent;

   public com.ibm.xsp.http.MimeMultipart getChatContent() {
       return chatContent;
   }

   public void setChatContent(com.ibm.xsp.http.MimeMultipart chatContent) {
       this.chatContent = chatContent;
   }

   public void saveContent() {
       // TODO implement save
       this.chatContent = null;
   }
} 
```*

# c++ - 如何在 Visual Studio 汇编程序输出中解开名称？

> ID：12803183
> 
> 赞同：7
> 
> 时间：2012-10-09T15:13:46.087
> 
> 标签：c++, visual-studio, visual-c++, assembly, name-mangling

使用 Visual Studio 2010/2012，可以编译带有`/FAs`开关的 c++ 源文件，以生成结果代码的汇编输出。但是生成的 asm 文件包含所有符号的损坏形式。

是否有开关或其他智能方法可以让 Visual Studio 生成未损坏的符号？我知道可以手动输入 asm 文件，`undname.exe`但切换会比自定义构建后事件方便得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T21:21:26.840

由于 /FA 输出的性质，不可能这样做。FA 输出有效的汇编代码。表示未处理的 C++ 函数所需的符号在 Microsoft 的 x86 程序集中根本不是有效的标签名称。匿名命名空间也没有好的表示法。

处理这些情况的任何输出都不能使用汇编程序进行编译。如果您制作了一个确实处理此类名称的汇编程序，则它需要知道要应用谁的名称修改规则来组装它。这违背了输出汇编的主要目的（确切地看到发生了什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T01:15:57.740

如果您的所有符号都与 extern "C" 兼容，那么您可以将 C++ 源文件中的所有代码包装在 extern "C" 块中，以强制以未损坏的 C 样式发出所有符号，而不是应用 C++ 名称修饰.

Microsoft Research 项目[http://en.wikipedia.org/wiki/Phoenix_%28compiler_framework%29](http://en.wikipedia.org/wiki/Phoenix_%28compiler_framework%29)提供了工具链的挂钩，它可能允许直接操作符号名称的形成方式，但不幸的是，它的最后一个公开版本是针对 VS 2008 和它似乎没有被产品化以包含在 VS 2010 或 VS 2012 中。

# dialog - Applescript 捕获关闭对话框的结果

> ID：12803186
> 
> 赞同：2
> 
> 时间：2012-10-09T15:13:58.083
> 
> 标签：dialog, applescript

如何捕获对标准套件“关闭”对话框的“不保存”或“保存”响应？

```
 try
        close front document saving ask
    on error
        return
    end try 
```

如果用户选择“取消”，则返回“错误号 -10000”，以便处理这种情况。

但是，后续代码取决于是否选择了“不保存”或“保存”。

谢谢

* * *

**更新**

使用 regulus 的[答案](https://stackoverflow.com/a/12804523/261305)和它的解决方法，我在上面的代码前面加上

```
tell application "Finder" to set _modDateAfterSaveDialog to 
modification date of (info for file _filename) 
```

其中 _filename 是之前从特定于应用程序的 AS 代码分配的。

类似的代码和测试遵循“尝试”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:35:40.920

我真的不知道如何直接得到它。我假设您发出的命令是特定的应用程序命令，而不是标准套件命令，因为标准 applescript 没有“前端文档”。

无论如何，这是一个可行的解决方法。保存文件时，其修改日期会更改。所以你需要知道前台文件的文件。然后，您只需在发出此命令之前和之后检查文件的修改日期。如果它改变了，那么你就知道文件被保存了。

祝你好运。

# apache - 用连字符替换空格、%20 和 +

> ID：12803187
> 
> 赞同：3
> 
> 时间：2012-10-09T15:14:06.873
> 
> 标签：apache, .htaccess, mod-rewrite

> **可能重复：**
> [带空格的 301 重定向](https://stackoverflow.com/questions/5821120/301-redirect-with-spaces)

现在，我将每个 Image 命中重定向到包含该图像的 html 页面。

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http://(www\.)?domain.com/.*$ [NC,OR]
RewriteCond %{HTTP_REFERER} (bing.com|google|yahoo|stumbleupon.com|reddit.com|pinterest.com) [NC]
RewriteRule (.*)\.(gif|jpg|png)$ /$1.html [R,L] 
```

由于图像通常包含空格但 html 页面总是使用连字符，我需要一个解决方案来用连字符替换所有空格、%20 和 + 符号

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T19:34:59.690

[301重定向以将所有空格替换为连字符](https://stackoverflow.com/questions/5821120/301-redirect-with-spaces)

解决问题

```
RewriteEngine On
RewriteCond %{THE_REQUEST} (\s|%20)
RewriteRule ^([^\s%20]+)(?:\s|%20)+([^\s%20]+)((?:\s|%20)+.*)$ $1-$2$3 [N,DPI]
RewriteRule ^([^\s%20]+)(?:\s|%20)+(.*)$ /$1-$2 [L,R=301,DPI] 
```

# javascript - 为什么将数据存储为元素的属性会有风险？

> ID：12803196
> 
> 赞同：21
> 
> 时间：2012-10-09T15:14:45.393
> 
> 标签：javascript, jquery

我一直在读同样的东西：

> “直接在 DOM 元素上存储属性值是有风险的，因为可能存在内存泄漏。”

但是有人可以更详细地解释这些风险吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T15:18:08.873

*（按属性，我假设您指的是 DOM 元素的属性。）*

***DOM 元素上的自定义属性是否安全？***

一些浏览器在销毁时没有很好地清理 DOM 元素。因此保留了对其他元素、相同元素或大型数据集的引用，从而导致泄漏。我相信这在较新的浏览器中很大程度上得到了解决。

无论如何，在一个元素上存储少量数据是无害的，并且非常方便，因此请谨慎对待该警告。

* * *

***使用 jQuery 是`.data()`一个安全的选择吗？***

不是特别。使用 jQuery 的自定义数据存储存储数据有其自身的内存泄漏的可能性，不幸的是它们不仅仅影响旧的浏览器。

为了避免泄漏，您需要绝对确定`.data()`在销毁元素时清洁元素。当您使用 jQuery 销毁元素时，这是自动的，但如果您不这样做，您将有影响*每个浏览器*的内存泄漏。

* * *

***有哪些可能导致泄漏的示例？***

假设有一堆`.data()`链接到`#foo`元素。如果我们使用 jQuery 方法删除元素，我们是安全的：

```
$("#foo").remove(); // associated .data() will be cleaned automatically 
```

但是如果我们这样做，我们就会有一个跨浏览器兼容的泄漏：

```
var foo = document.getElementById("foo");
foo.parentNode.removeChild(foo); 
```

或者，如果`#foo`是某个其他元素的后代，其内容在没有 jQuery 的情况下被清除，这将是同样的问题。

```
otherElement.innerHTML = ""; 
```

在这两种情况下，都没有使用 jQuery 来删除`#foo`，因此它`.data()`与元素永久解除关联，并且我们的应用程序存在泄漏。

* * *

***因此，如果我从不直接使用 DOM API，我是否安全？***

你更安全，但另一种可能发生的方式是如果我们加载多个 DOM 操作库。考虑到 jQuery 使用以下代码帮助我们做到这一点：

```
var $jq = jQuery.noConflict(); 
```

现在我们可以允许`$`引用`prototypejs`or了`mootools`，jQuery 被引用了`$jq`。

问题是那些其他库不会清理 jQuery 设置的数据，因为他们不知道。

因此，如果 jQuery 上有一些数据`#foo`，并且`mootools`用于销毁该元素，我们就会有内存泄漏。

* * *

***如果我从不使用`.data()`jQuery 怎么办？这能让我安全吗？***

可悲的是没有。jQuery 使用相同的`.data()`机制来存储其他数据，例如事件处理程序。因此，即使您从未调用将`.data()`某些自定义数据与元素相关联，您仍然可能会因上述示例而导致内存泄漏。

大多数时候您可能不会注意到泄漏，但根据代码的性质，它们最终会变得大到足以成为问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-09T15:17:51.033

根据[jQuery 文档](http://api.jquery.com/prop/)：

> 在 Internet Explorer 9 之前的版本中，如果不删除属性（使用 .removeProp( )) 在从文档中删除 DOM 元素之前。要安全地在 DOM 对象上设置值而不发生内存泄漏，请使用 .data()。

# plot - 在matlab中使用字幕覆盖（'可见'，'关闭'）图形属性

> ID：12803201
> 
> 赞同：3
> 
> 时间：2012-10-09T15:14:51.097
> 
> 标签：plot, matlab, matlab-figure

我在 matlab R2011b 中生成大量图表。我想利用 ('visible', 'off') 图形属性，这样我就不需要在屏幕上显示每个图——每个图都包含*大量*数据和几个子图，因此渲染它们需要正常运行时间和不必要的处理能力（我将它们直接保存到图像中）。

每个图包含四个子图，我想为每个图添加一个超级“标题”。我一直在使用`suptitle`（bioinfo 工具箱的一部分），但似乎使用 suptitle 会撤消 ('visible, 'off') 的效果，并且无论如何都会显示该图。

```
xdata = -100:1:100;
ydata = -100:1:100;
zdata = rand(1,201)*-50;

fig1 = figure(1)
set(fig1, 'visible', 'off')
subplot(2,1,1)
scatter(xdata, ydata, 10, zdata)
title('Small title 1')
subplot(2,1,2)
scatter(xdata, ydata, 10, zdata)
title('small title 2')
suptitle('This is a big title') 
```

使用此代码，将显示图形。如果该`suptitle`行被注释掉，则不显示该图（这是我想要的）。

有人知道吗

1.  为什么会发生这种情况？
2.  我该如何修复它/解决它？是否有另一种方法可以为带有子图的图形添加大标题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:05:39.443

只需将此行复制到示例代码的末尾：

```
 set(fig1, 'visible', 'off') 
```

这应该可以解决您的问题...

# javascript - Javascript [defer] 属性和 document.ready？

> ID：12803203
> 
> 赞同：5
> 
> 时间：2012-10-09T15:14:53.483
> 
> 标签：javascript, jquery, deferred

在阅读了关于[mdn](https://developer.mozilla.org/en-US/docs/HTML/Element/script)`defer`的属性之后

> 此布尔属性设置为向浏览器指示脚本将在文档被解析后执行。

看起来很好。

所以我已经对它进行 了 [测试](http://jsbin.com/ujatif/3/edit)`$(function () { });``$(window).load(...)`

```
<script>
$(function ()
{
  alert('1')
});
$(window).load(function ()
{
  alert('2')
});
</script>

<script defer="defer">
  alert('4');
</script> 
```

此代码*始终*输出`4,1,2`！

好的，所以现在我可以识别文档被解析的时间了。

在什么情况下我需要document.ready*之前*的阶段（解析时间完成）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:22:13.850

来自[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/script)

> 不应该在没有 src 属性的脚本上使用 defer 属性

实际用途是您仍然可以在页面顶部放置脚本，并在整个页面完全解析后让浏览器加载它们，从而提高客户端的性能。

来自[YSlow](http://developer.yahoo.com/performance/rules.html#js_bottom)

> DEFER 属性表示脚本不包含 document.write，并且是浏览器可以继续渲染的线索

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:32:53.067

查看[W3 HTML 规范](http://www.w3.org/TR/html5/the-script-element.html#attr-script-defer)：

> async 和 defer 属性是布尔属性，指示应该如何执行脚本。如果 src 属性不存在，则不得指定 defer 和 async 属性。

因此，此属性仅对*外部*脚本有效。

# python - 与 Python 并行解析和保存主机名

> ID：12803206
> 
> 赞同：1
> 
> 时间：2012-10-09T15:15:10.800
> 
> 标签：python, parallel-processing

我正在尝试解析主机名列表。问题是当我遇到一个不存在的域时，它会减慢整个过程。代码是一个微不足道的 for 循环：

```
for domain in domains:
    try:
        if socket.gethostbyname(domain.split('@')[1]):
            file1.write(domain)
        else:
            file2.write(domain)
    except socket.gaierror:
        pass 
```

我想知道是否有一种简单的方法可以并行化 for 循环中的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:38:33.657

您可以使用 Gevent - [dns_mass_resolve.py](https://github.com/SiteSupport/gevent/blob/master/examples/dns_mass_resolve.py)中的示例之一。还可以为所有查询设置超时。

```
from __future__ import with_statement
import sys
import gevent
from gevent import socket
from gevent.pool import Pool

N = 1000
# limit ourselves to max 10 simultaneous outstanding requests
pool = Pool(10)
finished = 0

def job(url):
    global finished
    try:
        try:
            ip = socket.gethostbyname(url)
            print ('%s = %s' % (url, ip))
        except socket.gaierror:
            ex = sys.exc_info()[1]
            print ('%s failed with %s' % (url, ex))
    finally:
        finished += 1

with gevent.Timeout(2, False):
    for x in xrange(10, 10 + N):
        pool.spawn(job, '%s.com' % x)
    pool.join()

print ('finished within 2 seconds: %s/%s' % (finished, N)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:22:41.853

我不知道一个简单的解决方案。使用多个线程/进程会很复杂，并且可能不会有太大帮助，因为您的执行速度与 IO 绑定。因此，我会看看一些像[Twisted](http://twistedmatrix.com/trac/)这样的异步库。有一个方法：[http](http://twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IReactorCore.html)`resolve` : //twistedmatrix.com/documents/12.2.0/api/twisted.internet.interfaces.IReactorCore.html`IReactorCore`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:21:55.050

```
import thread

def resolve_one_domain(domain):
     ...

for domain in domains:
   thread.start_new_thread(resolve_one_domain, [domain]) 
```

# cucumber - BDD：SpecFlow - 场景大纲行为不符合预期

> ID：12803207
> 
> 赞同：0
> 
> 时间：2012-10-09T15:15:11.623
> 
> 标签：cucumber, bdd, specflow, gherkin

在 SpecFlow 中使用场景大纲，例如

```
Scenario Outline: Invalid Login Details

Given some pre-conditions...
When user "Larry" enters username <username> and password <password>
Then the message "Invalid Login Details" should be displayed

Examples:
|username|password|
|larry06 |        |
|larry06 |^&*%*^$ |
|%^&&**  |pass123 |
|        |pass123 | 
```

我预计“何时”步骤将被评估为：

```
public void WhenUserEntersUsernameAndPassword(String username, String password){} 
```

并且该场景将运行 4 次 - 对于表的每一行，根据需要传递值。**事实并非如此。**

相反，SpecFlow 创建 4 个必需步骤定义中的 1 个：

```
[When(@"""(.*)"" provides the following new username larry(.*) and password ")]
public void WhenUserEntersUsernameLarryAndPassword(string p0, int p1)
{
//TODO
} 
```

为了让剩下的 3 个“工作”，我需要手动编写显式匹配表中其他值的方法。

*从那以后*我意识到我只能说：

```
When "Larry" enters username "<username>" and password "<password>" 
```

我得到：

```
[When(@"""(.*)"" provides the following ""(.*)"" and ""(.*)""")]
public void WhenUserEntersUsernameAndPassword(string p0, string name, string pass)
{
//TODO
} 
```

完美的。

但是所有文档似乎都表明我不需要 "" 并且应该可以正常工作（例如[https://github.com/cucumber/cucumber/wiki/Scenario-outlines](https://github.com/cucumber/cucumber/wiki/Scenario-outlines)）。我注意到：

> “您的步骤定义永远不必匹配占位符。它们将需要匹配将替换占位符的值”

我只是没有真正看到为表格的每一行编写单独的步骤定义的价值。

这种细微差别是否特定于 SpecFlow？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:09:27.573

```
When "Larry" enters username <username> and password <password> 
```

将匹配

```
[When(@"""(.*)"" enters username (.*) and password (.*)")]
public void WhenEntersUsernameAndPassword(string p0, string name, string pass)
{
//TODO
} 
```

所以文档很好。

您遇到的问题是，步骤文本的自动生成无法预测要插入哪些正则表达式`"..."`- 我猜它必须用作您正在传递可互换字符串的指示符 - 可与“（。*）”匹配，但是如果您不想要引号，您仍然可以手动更正它就好了。

# sql - 链接服务器中的搜索列名

> ID：12803211
> 
> 赞同：6
> 
> 时间：2012-10-09T15:15:18.023
> 
> 标签：sql, sql-server

有没有办法在所有表中找到链接服务器数据库中的特定列。

我想解决方案在于

```
EXEC sp_columns_ex 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:34:15.893

```
SELECT t.name as TableName, c.name as ColumnName
FROM servernamehere.databasenamehere.sys.columns c 
INNER JOIN servernamehere.databasenamehere.sys.tables t ON c.object_id = t.object_id
WHERE c.name like '%yoursearchhere%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:23:45.230

这个怎么样：

```
EXECUTE [MyLinkedServer].[MyLinkedDB].dbo.sp_executesql
   N'SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE ...' 
```

并根据您要搜索的内容填写 where 子句？

另一种方法是创建一个从中选择的视图，`INFORMATION_SCHEMA.COLUMNS`然后您查询该视图。

[参考`Information_Schema.Columns`](http://msdn.microsoft.com/en-us/library/ms188348.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:28:36.470

这取决于您的链接服务器指向哪个数据库。例如，如果是 Oracle，则使用 Oracle 语法，如果是 SQL Server，则使用 Sql Server 语法。

您通过链接服务器查询架构的事实应该无关紧要。

# java - For 或 While 循环跳过输入

> ID：12803213
> 
> 赞同：0
> 
> 时间：2012-10-09T15:15:21.737
> 
> 标签：java, loops, fencepost

> **可能重复：**
> [在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

我正在创建一个需要从我的服务器读取字符串和整数的客户端程序。根据接收到的整数，它会向 GUI 添加一些标签。到目前为止，我的程序读取了整数但跳过了字符串。当我尝试将整数写入程序时，以下输出是我的程序的输出：

*   服务器写入：1
*   服务器写入：1
*   **系统打印：1**
*   **系统打印：j1**
*   **系统打印：名称**

问题是我无法编写字符串，因为它跳过了字符串。我怎样才能避免这个问题（注意我也尝试了一个`for`循环）

我的代码如下：

```
int times = client.reciveCommando();
int o = 0;
System.out.println(times);

while (o != times) {
  int j = client.reciveCommando();
  System.out.println("j"+ j);
  String name = client.reciveString();
  System.out.println("Name " +name);
  createUser(j, name);
  o++;

} 
```

createUser 方法：

```
private void createUser(int j, String reciveChat) {
  if (j == 1) {
    chatPerson1.setVisible(true);
    lbl_Chatperson1_userName.setVisible(true);
    lbl_Chatperson1_userName.setText(reciveChat);
  } else if (j == 2) {
    lbl_chatPerson2.setVisible(true);
    lbl_userName2.setVisible(true);
    lbl_userName2.setText(reciveChat);
  } else {
    chatPerson3.setVisible(true);
    lbl_userName3.setVisible(true);
    lbl_userName3.setText(reciveChat);
  }
} 
```

client.reciveCommando 方法：

```
public int reciveCommando() throws IOException{
  Integer i = input.nextInt();
  return i;
} 
```

client.reciveString 方法：

```
public String reciveString(){
  String x = input.nextLine();
  return x;
} 
```

希望有人能够帮助我:)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:57:29.080

我在循环代码中看不到任何地方增加`o`或更改`times`. 因此，要么完全跳过循环（即：times = 0），要么代码中的其他地方正在修改循环变量（`o`）或循环条件（`times`）——这两种情况下的编码都非常糟糕。

您的循环变量/增量规则在读取循环时应该非常清晰，并且可以轻松辨别开始/停止条件是什么，而无需读取可能在循环迭代期间修改值的其他方法/等。

我的直接猜测是`times = 0`，否则您将陷入无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:14:22.273

我找到了我的问题的解决方案，结果很简单！

首先让我解释一下我的意思。

当我的程序运行 while 循环时，它基本上跳过了应该从服务器接收输入的行。我发现它这样做的原因是 input.nextLine(); 是空的，当您阅读 input.nextLine() 的 api 时，这是有道理的；

> **将此扫描器前进到当前行并返回被跳过的输入**。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。由于此方法继续搜索输入以查找行分隔符，因此如果不存在行分隔符，它可能会缓冲所有搜索要跳过的行的输入。返回：被跳过的行

因为我试图获取的行是一个空行，它会跳过并将名称设置为“”。

这是我的程序的完整代码，它目前可以工作：

**while 循环：**

```
 while (o != times) {
                int j = client.reciveCommando();
                System.out.println("j"+ j);
                    String name = client.reciveString();
                    System.out.println("Name " +name);
                    createUser(j, name);    
                o++;
            } 
```

**client.reciveString();**

```
 public String reciveString(){

    String x = input.next();
    return x;
} 
```

**createUser();**

```
 private void createUser(int j, String reciveChat) {
    if (j == 1) {
        chatPerson1.setVisible(true);
        lbl_Chatperson1_userName.setVisible(true);
        lbl_Chatperson1_userName.setText(reciveChat);

    }else if (j == 2) {
        lbl_chatPerson2.setVisible(true);
        lbl_userName2.setVisible(true);
        lbl_userName2.setText(reciveChat);
    }else if (j == 3){
        chatPerson3.setVisible(true);
        lbl_userName3.setVisible(true);
        lbl_userName3.setText(reciveChat);} 
```

感谢您的所有回复，我一定会投票给您:)

# asp.net - 实现消息框以警告用户删除数据

> ID：12803218
> 
> 赞同：0
> 
> 时间：2012-10-09T15:15:34.110
> 
> 标签：asp.net

我想删除页面中的一些数据并想向用户发出警告（显示一个带有是/否的消息框），如果用户单击是删除数据

是否可以在 ASP 中实现 MessageBox？如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:22:18.233

```
<asp:Button ID="Button1" runat="server" Text="Button"
 OnClientClick="return confirm('Are you sure you want delete this?');" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:25:26.207

它`confirm`很简单：

```
<input type="submit" value="delete" onclick="javascript:confirm('Are you sure?')"/> 
```

至于 ASP.NET，您可以在服务器端执行此操作：

```
btnDelete.Attributes.Add("onclick", "return confirm('Are you sure?')"); 
```

或者，在标记上：

```
<asp:Button ID="btnDelete" runat="server" Text="Delete" OnClientClick="return confirm('Are you sure?');" /> 
```

**编辑：** 使用 a `GridView`，您可以在*服务器端*代码上执行以下操作：

```
public partial class _Default : System.Web.UI.Page {

    Dictionary<string, string> collection = null;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            collection = new Dictionary<string, string>();
            collection.Add("Microwave", "$299");
            collection.Add("Coffee maker", "$59");
            collection.Add("Arm chair", "$89");
        }
        GridView1.DataSource = collection;
        GridView1.DataBind();
    }

    protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
    {
        if (DataControlRowType.DataRow == e.Row.RowType)
        {
            ((LinkButton)e.Row.FindControl("lnkDelete"))
                .Attributes.Add("onclick", "return confirm('are you sure?')");

        }
    }

    protected void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e) {
        if (e.CommandName.ToLower() == "delete")
        {
            // this code should be executed only when the user clicks "ok"
            // in the confirm message that appears on the browser

            // your implementation goes here
        }
    }
} 
```

您的标记可以类似于以下方式完成。至于模板列，通过visual studio很容易创建一个命令列，然后将其转换为模板列，这样你实际上可以有一个删除链接按钮（或按钮）的ID，并通过`e.Row.FindControl`如上图找到它。

```
<asp:GridView ID="GridView1" runat="server" OnRowCommand="GridView1_RowCommand"
    OnRowDataBound="GridView1_RowDataBound" AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="Key" HeaderText="Product" />
        <asp:BoundField DataField="Value" HeaderText="$$$" />
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="lnkDelete" runat="server" CausesValidation="False" 
                    CommandName="Delete" Text="Remove"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:26:59.460

你可以使用 jQuery 来做到这一点！

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Modal confirmation</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>

    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
        <script>
    $(function() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Delete all items": function() {
                  alert('deleted');
                  $( this ).dialog( "close" );
                },
                Cancel: function() {
                  alert('cancel')
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    </script>
</head>
<body>

<div id="dialog-confirm" title="Empty the recycle bin?">
    <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>

</body>
</html> 
```

参考：http: [//jqueryui.com/dialog/#modal-confirmation](http://jqueryui.com/dialog/#modal-confirmation)

# xcode - MKStoreKit 错误

> ID：12803222
> 
> 赞同：7
> 
> 时间：2012-10-09T15:15:44.047
> 
> 标签：xcode

我使用 MKStoreKit 5 出现此错误。我在所有 MKStoreKit 文件上添加了 -objc-arc 标志，但出现此错误。

```
Ld /Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar-fpyxztssnpchdoalmoynsjjmsekg/Build/Products/Debug-iphonesimulator/NanoWar.app/NanoWar normal i386
    cd /Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.3
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar-fpyxztssnpchdoalmoynsjjmsekg/Build/Products/Debug-iphonesimulator -L/Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone/NanoWar2/libs/TestFlightSDK1.0 -L/Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone/../../iOS/Chartboost -L/Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone/NanoWar2/libs/Chartboost -F/Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar-fpyxztssnpchdoalmoynsjjmsekg/Build/Products/Debug-iphonesimulator -F/Users/Benoit/Workshop/Dropbox/NanoWar2_Iphone -filelist /Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar-fpyxztssnpchdoalmoynsjjmsekg/Build/Intermediates/NanoWar.build/Debug-iphonesimulator/NanoWar.build/Objects-normal/i386/NanoWar.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -lz -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=4.3 -framework StoreKit -weak_framework Social -weak_framework Twitter -weak_framework AdSupport -weak-lSystem -lz -framework GameKit -weak_framework SystemConfiguration -framework CFNetwork -framework QuartzCore -framework OpenGLES -framework OpenAL -framework AudioToolbox -framework AVFoundation -framework UIKit -framework Foundation -framework CoreGraphics -lTestFlight -lChartboost -o /Users/Benoit/Library/Developer/Xcode/DerivedData/NanoWar-fpyxztssnpchdoalmoynsjjmsekg/Build/Products/Debug-iphonesimulator/NanoWar.app/NanoWar

Undefined symbols for architecture i386:
  "_SecCertificateCreateWithData", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecItemAdd", referenced from:
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
  "_SecItemCopyMatching", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_SecItemDelete", referenced from:
      +[SFHFKeychainUtils deleteItemForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_SecItemUpdate", referenced from:
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
  "_SecKeyRawVerify", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecPolicyCreateBasicX509", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecTrustCopyInfo", referenced from:
      -[VerificationController validateTrust:error:] in VerificationController.o
  "_SecTrustCopyPublicKey", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecTrustCreateWithCertificates", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecTrustEvaluate", referenced from:
      _checkReceiptSecurity in VerificationController.o
      -[VerificationController validateTrust:error:] in VerificationController.o
  "_SecTrustGetCertificateCount", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecTrustSetAnchorCertificates", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_SecTrustSetVerifyDate", referenced from:
      _checkReceiptSecurity in VerificationController.o
  "_kSecAttrAccount", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils deleteItemForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_kSecAttrLabel", referenced from:
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
  "_kSecAttrService", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils deleteItemForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_kSecClass", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils deleteItemForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_kSecClassGenericPassword", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils deleteItemForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_kSecReturnAttributes", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
      +[SFHFKeychainUtils deleteItemForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_kSecReturnData", referenced from:
      +[SFHFKeychainUtils getPasswordForUsername:andServiceName:error:] in SFHFKeychainUtils.o
  "_kSecTrustInfoExtendedValidationKey", referenced from:
      -[VerificationController validateTrust:error:] in VerificationController.o
  "_kSecValueData", referenced from:
      +[SFHFKeychainUtils storeUsername:andPassword:forServiceName:updateExisting:error:] in SFHFKeychainUtils.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T15:18:36.890

您需要链接您的项目`Security.framework`- 转到您的目标设置/构建阶段并将其添加到“Link Binary with Libraries”列表中：

![在此处输入图像描述](../Images/d24d221146ebf6f071bfcfd23137b6e8.png)

# java - Java 集 在 HashMap 中

> ID：12803223
> 
> 赞同：2
> 
> 时间：2012-10-09T15:15:55.347
> 
> 标签：java, hashmap, set

我有这个对象：

```
Map<Long, Set<String>> resourcesByID = new HashMap<Long, Set<String>>(); 
```

另一个：

```
Set<String> resources; 
```

当我想将更多 Set 放入 HashMap 时，它将覆盖我之前放入的 Set 元素。为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:20:39.043

假设

```
Long id = 1234L;
Set<String> resources = ...; 
```

如果要添加从 a`Long`到 a 的另一个映射，`Set`则

```
resourcesById.put(id, resources); 
```

如果您想将`String`s 添加到现有映射中

```
resourcesById.get(id).addAll(resources); 
```

如果您没有正确进行初始化，为了让生活更简单......

```
if (!resourcesById.containsKey(id)) {
    resourcesById.put(id, new HashSet<String>());
}
resourcesById.get(id).addAll(resources); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:20:43.233

*   第一个原因，您可能对每组使用相同的密钥。
*   第二个原因，如果键与每个键（长）不同，您可能使用**资源**引用使用相同的 Set，您必须为每个键创建单独的 Set 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:17:27.563

如果`key`匹配，它将覆盖以前的值，否则它不会覆盖。

（或者）

正如 Thomas 评论的那样，如果您的集合是 mutate 并且您正在更新同一个集合，是的，那么它可能会覆盖。

# c++ - 通过浏览按钮仅获取文件夹路径

> ID：12803227
> 
> 赞同：2
> 
> 时间：2012-10-09T15:16:09.633
> 
> 标签：c++, file, filepath

我通过浏览文件夹并在单击**浏览按钮后选择文件来获取****文件的完整路径。**

 **但我只想通过浏览来获取**文件夹的路径。**

我为文件路径做了以下

```
 Stream^ myStream;  
                 OpenFileDialog^ openFileDialog1 = gcnew OpenFileDialog;

                 openFileDialog1->InitialDirectory = "c:\\";
                 //openFileDialog1->Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
                 openFileDialog1->FilterIndex = 2;
                 openFileDialog1->RestoreDirectory = true;

                 if ( openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK )
                 {
                     if ( (myStream = openFileDialog1->OpenFile()) != nullptr )
                     {                               

                         String^ p1 = openFileDialog1->FileName; 

                         MessageBox ::Show (p1);

                         myStream->Close();
                     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:48:39.353

要获取文件夹路径而不是文件名，请使用[FolderBrowserDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)**

# php - 简单的 html dom - 如何将 dt/dd 元素放入数组？

> ID：12803228
> 
> 赞同：1
> 
> 时间：2012-10-09T15:16:11.050
> 
> 标签：php, html, arrays, simple-html-dom

> **可能重复：**
> [仅从 php 中使用 preg_match_all 的 html 表中获取数据](https://stackoverflow.com/questions/4057574/get-data-only-from-html-table-used-preg-match-all-in-php)

HTML：

```
 <div class="table">
       <dl>
            <dt>ID:</dt>
            <dd>632991</dd>
            <dt>Type:</dt>
            <dd>NEW</dd>
            <dt>Body Type:</dt>
            <dd>Compact</dd>
        </dl>
    </div> 
```

在 PHP 中使用 simple_html_dom 获得此功能的最佳方法是什么：

PHP：

```
$option = array(
    'id' => 632991,
    'Type' => 'NEW',
    'Body Type' => 'Compact'
 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:24:07.123

您可以使用 XPath：

[通过类名获取 DOM 元素](https://stackoverflow.com/questions/6366351/getting-dom-elements-by-class-name)

[获取元素 ByTag 名称](http://php.net/manual/en/domdocument.getelementsbytagname.php)

[使用 PHP 获取 DOM 元素](https://stackoverflow.com/questions/8144061/using-php-to-get-dom-element)

这里有很多关于 Stackoverflow 的帖子。在此处使用搜索。

**编辑：**

```
<?php

$dom = new DOMDocument();
$dom->loadHTML('<div class="table">
       <dl class="list">
            <dt>ID:</dt>
            <dd>632991</dd>
            <dt>Type:</dt>
            <dd>NEW</dd>
            <dt>Body Type:</dt>
            <dd>Compact</dd>
        </dl>
    </div>');

$nodes = $dom->getElementsByTagName('dl');
foreach ($nodes as $node) {
    var_dump(getArray($node));
}

function getArray($node) { 
    $array = false; 

    if ($node->hasAttributes()) { 
        foreach ($node->attributes as $attr) { 
            $array[$attr->nodeName] = $attr->nodeValue; 
        } 
    } 

    if ($node->hasChildNodes()) { 
        if ($node->childNodes->length == 1) { 
            $array[$node->firstChild->nodeName] = $node->firstChild->nodeValue; 
        } else { 
            foreach ($node->childNodes as $childNode) { 
                if ($childNode->nodeType != XML_TEXT_NODE) { 
                    $array[$childNode->nodeName][] = getArray($childNode); 
                } 
            } 
        } 
    } 
    return $array; 
} 
?> 
```

函数 getArray 来自 php.net

# php - 来自 isset GET url 的子字符串

> ID：12803229
> 
> 赞同：0
> 
> 时间：2012-10-09T15:16:17.563
> 
> 标签：php, image, url, web, get

我用谷歌搜索了很多次，但没有看到任何解决方案。现在我的网站几乎完成了，但还有一个问题我不知道如何编写关于从当前 url 获取 url 的代码，例如：http://abc.com/123.php?url=http:// xyz.com/169.jpg 我怎样才能得到[http://xyz.com/169.jpg](http://xyz.com/169.jpg)并回显它？我尝试使用 substr 或 preg_match 但没有用..请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:18:21.773

也许你需要这样的东西。

```
 $url = $_GET['url']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:21:19.073

[在此处查看](http://php.net/manual/en/reserved.variables.server.php)**HTTP**变量的手册页

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:24:39.213

你可以试试

```
 $url = isset($_GET['url']) ? urldecode($_GET['url']) : null ; 
```

# sql - 如果作为参数传递，tsql IN 无法正常工作

> ID：12803231
> 
> 赞同：0
> 
> 时间：2012-10-09T15:16:22.360
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有一种情况，我需要传递一个字符串才能执行 IN

```
 declare @searchString varchar(50)
    set @searchString = ' ''Nestle'',''UFI'' '

    select * from tbl1 where CompanyName IN (@SearchString) 
```

不起作用。

但如果我这样做：

```
 select * from tbl1 where CompanyName IN ('Nestle','UFI') 
```

它工作正常。我不明白为什么一个工作而另一个不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:20:20.347

当您使用`IN`它时，它会查看一组而不是单个字符串表达式。因此，您需要实现一个函数，例如`CsvToInt`返回一个表，如下所示：

```
CREATE Function [dbo].[CsvToInt] ( @Array varchar(1000)) 
returns @IntTable table 
    (IntValue int)
--Parse comma seperated value parameters
--To be used in SELECT blah WHERE blah IN (...)
--This function returns int, but may be modified to return any datatype
AS
begin

    declare @separator char(1)
    set @separator = ','

    declare @separator_position int 
    declare @array_value varchar(1000) 

    set @array = @array + ','

    while patindex('%,%' , @array) <> 0 
    begin

      select @separator_position =  patindex('%,%' , @array)
      select @array_value = left(@array, @separator_position - 1)

        Insert @IntTable
        Values (Cast(@array_value as int))

      select @array = stuff(@array, 1, @separator_position, '')
    end

    return
end 
```

然后你可以在存储过程中使用这个函数，如下所示：

```
SELECT Blah
FROM MyTable
WHERE Foo IN (SELECT * FROM dbo.CsvToInt(@Parameter)) 
```

其中`@Parameter`包含逗号分隔的值字符串，例如：

`Nestle, UFI, Test`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:21:18.507

IN 将一个集合，而不是一个字符串作为参数。

看到这个：

[http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/33108337-b7b4-4ada-a480-60673e175f4d/](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/33108337-b7b4-4ada-a480-60673e175f4d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:32:30.703

```
declare @searchString varchar(50)
set @searchString = ' ''Nestle'',''UFI'' '

exec ('select * from tbl1 where CompanyName IN (' + @SearchString + ');') 
```

Note that this is dynamic SQL which is sometimes frowned upon and does not optimize well, but it's simple and will get what you want.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:19:07.733

您的有效示例与您无效的示例不同。您的有效示例有一个字符串列表。您不起作用的示例只是一个字符串。这意味着您正在尝试检索 CompanyName 字段等于整个字符串的行，而不是该字符串的逗号分隔部分。

您不起作用的示例等于：

```
select * from tbl1 where CompanyName IN (' ''Nestle'',''UFI'' ') 
```

不是以下内容：

```
select * from tbl1 where CompanyName IN ('Nestle','UFI') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T01:42:29.463

```
declare @searchString varchar(50)
set @searchString = 'Nestle,UFI'
set @searchString = ',' + @searchString + ','

select * from tbl1 where charindex(',' + CompanyName + ',',@SearchString) > 0 
```

# objective-c - 奇怪的 MPMoviePlayerController 视图旋转/动画...

> ID：12803232
> 
> 赞同：0
> 
> 时间：2012-10-09T15:16:23.733
> 
> 标签：objective-c, ios, view, rotation, mpmovieplayercontroller

我有一个 MPMoviePlayerController，它使用默认控件在一个小框架内播放视频。如果我按下媒体播放器控件上的“全屏”按钮，一切正常 - 视频仍在播放。视频完成后，我想关闭全屏视图并返回非全屏视图控制器。

我的应用程序仅是横向的。我已经测试了“setFullscreen”属性以在调用 MPMoviePlayerPlaybackDidFinishNotification 时切换回来——这有效。但是出现了从纵向到横向的视图旋转，这是错误的。我只需要风景到风景。

任何想法为什么会发生这种情况？

```
 self.moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    [self.moviePlayerController prepareToPlay];
    [self.moviePlayerController setShouldAutoplay:YES];
    self.moviePlayerController.movieSourceType = MPMovieSourceTypeFile;

    self.moviePlayerController.fullscreen = NO;
    self.moviePlayerController.scalingMode = MPMovieScalingModeAspectFit;
    self.moviePlayerController.controlStyle = MPMovieControlStyleEmbedded;

    [self.moviePlayerController.view setFrame: someMovieFrame];

    [tempImageScrollView addSubview:self.moviePlayerController.view];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackCompletePSV:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:self.moviePlayerController];
    [self.moviePlayerController play];

- (void) moviePlaybackCompletePSV:(NSNotification*) notification {

    MPMoviePlayerController *mymoviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:mymoviePlayerController];

    NSLog(@"PSV moviePlaybackComplete!");

    // movie fadeout transition ====================
    self.moviePlayerController.view.alpha = 1;

    [UIView animateWithDuration:0.3f delay:0.0 options:UIViewAnimationCurveEaseOut
                     animations:^{
                         self.moviePlayerController.view.alpha = 0;

                         if ([self.moviePlayerController isFullscreen]) {
                             NSLog(@"PSV fullscreen movieplayer deleted");

                             [self.moviePlayerController setFullscreen:NO animated:NO];
                         }
                     }
                     completion:^(BOOL finished) {
                         [mymoviePlayerController stop];
                         [mymoviePlayerController.view removeFromSuperview];

                         [self.moviePlayerController.view removeFromSuperview];
                         self.moviePlayerController = nil;

                    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:38:33.207

当电影播放器​​全屏时，你的父视图控制器的`viewWillDisappear`/`viewDidDisappear`被调用，当它恢复正常大小时，你的父视图控制器的`viewWillAppear`/`viewDidAppear`被调用。

听起来这些方法中的某些东西无意中被调用了两次。

如果这不足以回答您的问题，请在您的父控制器中发布适当的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:40:32.840

iOS 6 对设备的旋转和方向处理进行了一些更改。在此处查看更多信息：http: [//developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html%23//apple_ref/doc/uid/TP40012166-CH1-SW19](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html%23//apple_ref/doc/uid/TP40012166-CH1-SW19)

首先将您的电影播放器​​需要支持的所有方向添加到`Supported interface orientations`您的`.plist`.

在您的情况下，也许您使用`UInavigationController`or`UITabbarController`作为根视图。如果是这样，让我们​​尝试对它们进行子类化并覆盖这些方法（如果您使用 a`UIViewController`作为根，只需在`.m`文件中覆盖它们）：：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationLandscapeLeft;
}
- (BOOL)shouldAutorotate
{
    return NO;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

接下来将以下方法添加到您`MPMoviePlayerController`的`.m`文件中：

```
- (BOOL)shouldAutorotate{
    return YES;

}
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
} 
```

只是尝试，希望它有效。

# java - 如何根据使用的字体将代码点映射到 unicode 字符？

> ID：12803234
> 
> 赞同：2
> 
> 时间：2012-10-09T15:16:38.087
> 
> 标签：java, windows, oracle, swing, fonts

客户端打印标签并一直使用一组符号 (?) 字体来执行此操作。该应用程序使用单字节数据库（Oracle with Latin-1）。我要替换的旧应用程序不支持 Unicode。它以某种方式做得很好。我正在编写的替换应用程序应该处理旧数据。

从charmap 应用程序中挑选的符号通常映射到特定的Unicode 字符，但有时它们不会。例如，使用 LAB3 字体看起来像月亮的东西实际上是 U+2014 (EM DASH)。当用户将此字符粘贴到 Swing 文本字段中时，该字符的代码点为 8212。~~它被“移动”到私人使用区域（Windows？Java？）。~~当将此字符保存到数据库时，Oracle 认为它不能被安全地编码并用可怕的 ¿ 代替它。因此，我开始将字符移动 8000：保存时 -= 8000，显示字段时 += 8000。不幸的是，我发现其他字符没有移动相同的数量。例如，在一种特定的字体中，ž 的代码点为 382，因此我将其移动了 +/-256 以“修复”它。

到现在为止，我害怕发现更多奇怪的偏移量，我想知道：**我可以使用 Java 进行这种映射吗？**也许 TTF 字体有一个它编码的 255 个字形的列表以及它们对应的 Unicode 字符，我可以“正确”地做到这一点？

现在我正在使用以下kludge：

```
static String fromDatabase(String str, String fontFamily) {

  if (str != null && fontFamily != null) {
    Font font = new Font(fontFamily, Font.PLAIN, 1);

    boolean changed = false;
    char[] chars = str.toCharArray();
    for (int i = 0; i < chars.length; i++) {
      if (font.canDisplay(chars[i] + 0xF000)) {
        // WE8MSWIN1252 + WinXP
        chars[i] += 0xF000;
        changed = true;
      }
      else if (chars[i] >= 128 && font.canDisplay(chars[i] + 8000)) {
        // WE8ISO8859P1 + WinXP
        chars[i] += 8000;
        changed = true;
      }
      else if (font.canDisplay(chars[i] + 256)) {
        // ž in LAB1 Eastern = 382
        chars[i] += 256;
        changed = true;
      }
    }
    if (changed) str = new String(chars);
  }
  return str;
}

static String toDatabase(String str, String fontFamily) {

  if (str != null && fontFamily != null) {
    boolean changed = false;
    char[] chars = str.toCharArray();
    for (int i = 0; i < chars.length; i++) {
      int chr = chars[i];
      if (chars[i] > 0xF000) {
        // WE8MSWIN1252 + WinXP
        chars[i] -= 0xF000;
        changed = true;
      }
      else if (chars[i] > 8000) {
        // WE8ISO8859P1 + WinXP
        chars[i] = (char) (chars[i] - 8000);
        changed = true;
      }
      else if (chars[i] > 256) {
        // ž in LAB1 Eastern = 382
        chars[i] = (char) (chars[i] - 256);
        changed = true;
      }
    }
    if (changed) return new String(chars);
  }

  return str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:20:05.973

字体文件当然有从 Unicode 到字形的映射。不幸的是，字形是完全任意的，不需要与它映射到的角色有任何关系，就像你在 Moon/Em-Dash 中发现的那样。从单字节字符到 Unicode 代码点的映射可能可以在[Windows Code Page 1252](http://en.wikipedia.org/wiki/Windows-1252)中找到，但这不是您想要的 - 您希望字符 0x97 等同于月亮字形，例如[☽ FIRST QUARTER MOON U+263D](http://www.fileformat.info/info/unicode/char/263d/index.htm)而不是比[— EM DASH U+2014](http://www.fileformat.info/info/unicode/char/2014/index.htm)。不幸的是，除了查看字体中的每个字符并将其与可用的 Unicode 字符进行比较之外，我无法提出任何建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:13:40.780

只是为了提供关闭，这似乎是有效的：

```
static String fromDatabase(String str, String fontFamily) {
  if (str != null && fontFamily != null) {
    try {
      byte[] bytes = str.getBytes("ISO-8859-1"); // database encoding
      if (fontFamily.startsWith("LAB")) {
        str = new String(bytes, "Windows-1252");
      }
    }
    catch (UnsupportedEncodingException e) {
      e.printStackTrace();
    }
  }
  return str;
}

static String toDatabase(String str, String fontFamily) {
  if (str != null && fontFamily != null) {
    try {
      if (fontFamily.startsWith("LAB")) {
        str = new String(str.getBytes("Windows-1252"), "ISO-8859-1");
      }
    }
    catch (UnsupportedEncodingException e) {
      e.printStackTrace();
    }
  }
  return str;
}

public void exportFormData(EigentumsbezeichnungInformationFormData formData) throws ProcessingException {
  super.exportFormData(formData);
  formData.getWert().setValue(toDatabase(formData.getWert().getValue(), formData.getSchrift().getValue()));
}

public void importFormData(EigentumsbezeichnungInformationFormData formData) throws ProcessingException {
  super.importFormData(formData);
  getWertField().setValue(fromDatabase(formData.getWert().getValue(), formData.getSchrift().getValue()));
} 
```

这是我的解释：数据库使用 ISO 8859-1（又名拉丁语 1）。十年前，客户委托了一堆特殊字体，故意说是Latin-1编码，但实际上显示的是不同的字符。注意这个例子中的 Omega 是如何代替 Ù 的！

![用于说明映射的charmap 屏幕截图](../Images/1b2825ac4d5745e33de30a76fcf5f2c7.png)

此外，还使用了一些 Latin-1 未使用的字符。最简单的解决方案似乎假设正在使用相应的 Windows 代码页。这允许 Java 将“假 Windows-1252”数据库中的字节转码为 Unicode 并返回。翻译后，Swing 应用程序将使用显示 Omega 字形的字体显示一个 Ù。问题解决了。”

# javascript - 拖放在 IE 中不起作用 - Javascript、HTML5

> ID：12803235
> 
> 赞同：5
> 
> 时间：2012-10-09T15:16:51.737
> 
> 标签：javascript, html, internet-explorer

我已经构建了这个棋盘应用程序，它使用 HTML5 的 Drag&Drop 和 javascript。它适用于 chrome 和 firefox，但不适用于 IE9 或 IE8。我的猜测是问题在于我如何附加事件。

这是为所有浏览器附加事件的地方，但 IE：

```
function eventer(){
for (var i = 0, len = allPieces.length; i < len; i++){
        allPieces[i].addEventListener('dragstart', handlePieceDragStart, false);
}
for (var i = 0, len = allSquares.length; i < len; i++){
            allSquares[i].addEventListener('dragstart', handleDragStart, false);
            allSquares[i].addEventListener('dragenter', handleDragEnter, false);
            allSquares[i].addEventListener('dragover', allowDrop, false);
            allSquares[i].addEventListener('dragleave', handleDragLeave, false);
            allSquares[i].addEventListener('drop', handleDrop, false);  
    }
} 
```

...这是 IE 的附件：

```
function eventerIE(){
    for (var i = 0, len = allPieces.length; i < len; i++){
            allPieces[i].attachEvent('dragstart', handlePieceDragStart, false);
    }
    for (var i = 0, len = allSquares.length; i < len; i++){
                allSquares[i].attachEvent('dragstart', handleDragStart);
                allSquares[i].attachEvent('dragenter', handleDragEnter);
                allSquares[i].attachEvent('dragover', allowDrop);
                allSquares[i].attachEvent('dragleave', handleDragLeave);
                allSquares[i].attachEvent('drop', handleDrop);
    }
} 
```

这些是事件调用的函数：

```
function handleDragStart(e){
    dragSrcEl = this;
    e.dataTransfer.effectAllowed = 'copy';
    e.dataTransfer.setData('text/html', this.innerHTML);

}
function handlePieceDragStart(e){
    dragPiece = this;
    e.dataTransfer.setData('id', dragPiece.id);
    dragPieceId = dragPiece.id;
}
function handleDragEnter(e){
    this.classList.add('over');

}
function allowDrop(e){
    e.preventDefault();
}; 
function handleDragLeave(e){
    this.classList.remove('over');
}
function handleDrop(e) {

  if (e.stopPropagation) {
    e.stopPropagation();
    e.preventDefault();
  }

  if (dragSrcEl != this) {
    dragSrcEl.innerHTML = this.innerHTML;
    this.innerHTML = e.dataTransfer.getData('text/html');
    pId = e.dataTransfer.getData('id');
    this.taken = dragPiece.id;
    sId = this.id;

  }
var sqrs = document.getElementsByTagName("td");
    [].forEach.call(sqrs, function (col){
        col.classList.remove('over');

    });
    for(var i=0, len = piecesPosition.length; i < len; i++){
            if (piecesPosition[i][0]==dragPiece.id){
            delete piecesPosition[i];       
            piecesPosition.push([dragPiece.id,sId]);
            piecesPosition = piecesPosition.filter(function(){return true});

        }

    }
    dragPiece = document.getElementById(dragPieceId);
    dragPiece.pstn = sId;
    this.classList.remove('over');

} 
```

我希望代码可以很好地了解那里发生的事情，如果您对此有任何疑问，我很乐意发表评论和解释。

提前谢谢

**编辑：**在我按照@Chase 的建议更改了事件之后，函数正在被事件调用，现在我在函数内部得到一个`Invalid argument`错误。`e.dataTransfer.setData('text/html', this.innerHTML);``handleDragStart`

同样，这仅适用于 IE9 和 IE8 模式。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-05T06:36:09.913

使用“文本”而不​​是“文本/html”

```
e.dataTransfer.setData("text", this.innerHTML); 
```

看[这篇文章的解释](http://www.developerfusion.com/article/144828/the-html5-drag-and-drop-api/)

> 尽管 Internet Explorer 一开始只引入“文本”和“URL”作为有效数据类型，但 HTML5 对此进行了扩展以允许指定任何 MIME 类型。HTML5 将支持值“text”和“URL”以实现向后兼容性，但它们被映射到“text/plain”和“text/uri-list”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-13T07:59:41.400

您需要做两件事才能在 IE 中进行拖放操作。

**1）当你设置和获取数据时使用'text'而不是'text/html'**

```
e.dataTransfer.setData('text', this.innerHTML);

e.dataTransfer.getData('text'); 
```

**2) 在处理“dragenter”（以及“dragover”）时防止默认行为。**

```
function handleDragEnter(e) {
    if (e.preventDefault) { 
        e.preventDefault(); 
    } 
    ... 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-19T14:45:51.680

`setData`方法期望**字符串数据类型不是数字**

```
setData('text',1)//is wrong

setData('text',''+1)//is correct 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:22:54.700

IE 与大多数浏览器有点不同，请尝试[`ondragstart`](http://msdn.microsoft.com/en-us/library/ie/ms536928%28v=vs.85%29.aspx)，[`ondragenter`](http://msdn.microsoft.com/en-us/library/ie/ms536925%28v=vs.85%29.aspx)等等。

```
 allSquares[i].attachEvent('ondragstart', handleDragStart);
            allSquares[i].attachEvent('ondragenter', handleDragEnter);
            allSquares[i].attachEvent('ondragover', allowDrop);
            allSquares[i].attachEvent('ondragleave', handleDragLeave);
            allSquares[i].attachEvent('ondrop', handleDrop); 
```

**编辑**：

```
function handleDragStart(e){
    if(!e)
       e = window.event;

    dragSrcEl = (window.event) ? window.event.srcElement /* for IE */ : event.target;
    e.dataTransfer.effectAllowed = 'copy';
    e.dataTransfer.setData('text/html', dragSrcEl.innerHTML);
} 
```

# autotools - 自动重新配置清理

> ID：12803239
> 
> 赞同：11
> 
> 时间：2012-10-09T15:17:21.213
> 
> 标签：autotools

我用来`autoreconf --install`为我的项目生成配置脚本等。是否有“清理”选项或其他一些简单的方法来清理由 autoreconf 生成的文件？使用生成的 Makefiles `configure`，我可以做一个`make distclean`，但我想通过删除 Makefile.in 等文件来进一步清理我的目录。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T18:28:41.843

该命令称为`make maintainer-clean`. 它将删除几乎所有`autoreconf`生成的内容，但有一些例外。两个值得注意的例外是`configure`和`Makefile.in`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T12:14:47.753

没有自动规则来删除 .in 文件并进行配置。

在 autotools 文档中，强烈建议删除运行 ./configure && make 所需的任何内容。

您可以定义自己的清除规则来删除这些文件，但随后 au 将被迫运行完整的工具链以创建新的构建。

# jar - 使用应用程序中捆绑的 jars 而不是默认的 - Glassfish 3.1.2

> ID：12803241
> 
> 赞同：1
> 
> 时间：2012-10-09T15:17:25.217
> 
> 标签：jar, glassfish-3

我工作的公司目前有一个由另一家公司提供的 Java 应用程序，旨在在 Websphere 上运行。虽然它在 Websphere 上运行良好，但考虑到我们产品的复杂性以及它与系统的必要用途的关系，我们迫切需要使用 64 位 JVM。我们试图避免购买 Websphere 的许可证，因为这将花费一大笔钱。

我已经尝试在我能找到的几乎所有 Java 应用服务器上安装这个应用程序，Glassfish 似乎是最有前途的。它似乎存在的问题是它如何处理它想要使用的库。

与应用程序捆绑在一起的是一个 jaxb.jar 文件，它是一个相当旧的版本。我在独立应用程序上对该文件进行了快速测试，以查看版本号，结果为 1.0。我确实在其中使用了一些任意类。然后，我创建了一个简单的 jsp 来在部署应用程序时测试同一类的版本。它出来了2.2.6。我知道 Glassfish 有一个较新版本的 jaxb jar 文件，所以它显然正在使用这个。

如何强制我的应用程序使用其自己的 lib 文件夹中的类而不是应用服务器正在使用的类？我觉得这是阻碍 Glassfish 成为我的替代应用服务器的唯一因素。

注意：我确实尝试从 Glassfish 中删除导致问题的文件，但它无法重新启动。它们必须是服务器运行所必需的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:05:20.300

在 GlassFish 中部署/运行 web 应用程序时的确切问题是什么？您能否更新应用程序中的 jaxb jar 而不是篡改 GlassFish 中的 jar？

[也许您可以在此处](http://docs.oracle.com/cd/E18930_01/html/821-2418/beadf.html)阅读 GlassFish 类加载层次结构。这可能会为您提供如何解决此问题的线索。特别是认可的机制可能是有用的。

# java - Clojure java interop - 调用重载（静态）方法

> ID：12803248
> 
> 赞同：3
> 
> 时间：2012-10-09T15:17:41.190
> 
> 标签：java, clojure, interop

虽然我确实有点理解其背后的原因，但我发现 LWJGL 将 OpenGL 方法和值拆分到众多类中相当烦人。因为无论如何我更喜欢处理函数，所以我目前正在编写一个 Clojure 模块，该模块在单个命名空间中公开 OpenGL 3.3 核心函数和常量。

现在的问题是，一些 OpenGL 函数在 LWJGL 中有重载，例如`glBindAttribLocation`有一个 for`ByteBuffer`和一个 for `CharSequence`。现在我说的是最广泛意义上的“问题”，因为我还不确定这是否真的是一个问题。

例如，我可以写吗

```
(defn glBindAttribLocation [program index name]
  (GL20/glBindAttribLocation program index name)) 
```

并相信 Clojure 会找出要调用的重载，还是我必须手动执行此操作并带有一些 typehint-uglyness？

同样，LWJGL 的许多函数都采用`float`s 或`int`s - 但我听说 Clojure 本身只使用`long`and `double`（即原语）。这是否意味着每次我调用这些函数之一时，无论何时我调用这些函数之一，我都将转换为`Integer`( `Float`)，然后从那里转换为`int`( `float`)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:39:29.650

我在`long->int`转换方面遇到了奇怪的问题，但只有当两者都有一个重载的签名时，才会`int`产生`long`歧义。如果只有`int`and的方法`float`（从查看文档来看似乎是这种情况），那么你应该没问题。Clojure 将自动进行 long->int 和 double->float 转换：

```
user=> (Float/isInfinite 5.0) ; Takes a float
false
user=> (Integer/numberOfTrailingZeros 4) ; Takes an int
2 
```

至于`GL20/glBindAttribLocation`，我必须为重载方法强制转换的唯一时间是 1) 如果它们同时具有 an`int`和`long`version 或 2) 如果我`nil`作为对象的参数传递，则无法猜测我想要哪种方法。由于前两个参数必须是`int`s，除非您可以传递参数`nil`，否则`name`应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:34:01.143

是的，如果由于重载导致调用有多个候选方法，您可能需要强制数据键入正确的类型。好消息是 Clojure 编译器可能会引发错误，而不是给您带来令人惊讶的行为。

请参阅：[Longs 的 Clojure 重载方法解析](https://stackoverflow.com/questions/12586881/clojure-overloaded-method-resolution-for-longs)

# c - 我的 SIMPLE C 程序有什么问题？

> ID：12803254
> 
> 赞同：1
> 
> 时间：2012-10-09T15:17:57.373
> 
> 标签：c, char, int, printf

我正在用 C 编写一个超级简单的基于命令行的程序。这只是一个小测试，代码非常简单。所以它的意思是向用户询问他们的姓名、数学成绩、英语成绩、计算成绩。然后它会计算出他们的平均成绩，并告诉他们输入的名字。是的，我知道这是一个非常简单的程序，但我仍然做错了什么。

问题是，我的代码的一部分将首先运行，告诉用户输入他们的姓名，然后一旦他们这样做并按 enter，我的其余代码将立即运行，然后停止工作。很奇怪，我只是不明白出了什么问题。

```
#include <stdio.h>

int main(int argc, const char * argv[])
{
    char chr;
    char firstname;
    int mathsmark, englishmark, computingmark, averagemark;

    printf("What is your name?\n");
    scanf("%c", &firstname);
    printf("\n");

    printf("What is your maths mark?\n");
    scanf("%d", &mathsmark);
    printf("\n");

    printf("What is your english mark?\n");
    scanf("%d", &englishmark);
    printf("\n");

    printf("What is your computing mark?\n");
    scanf("%d", &computingmark);
    printf("\n");

    printf("Your name is: %c", firstname);
    printf("\n");

    averagemark = (mathsmark + englishmark + computingmark) / 3;
    printf("%d", averagemark);
    printf("\n");

    chr = '\0';

    while (chr != '\n') {

        chr = getchar ();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:53:56.677

一个主要问题是您已声明`firstname`为单个字符长，当您尝试从控制台读取名称时，您使用的是`%c`转换说明符，它从输入流中读取下一个单个字符并将其存储到`firstname`. 名称的其余部分留在输入流中以混淆剩余的`scanf`调用。

例如，如果您键入“Jacob”作为名字，那么第一个`scanf`调用将分配`J`给`firstname`，留`"acob\n"`在输入流中。

下一次`scanf`调用尝试转换`"acob\n"`为整数值并将其保存到`mathsmark`，但失败（`"acob\n"`不是有效的整数字符串）。`scanf`接下来的两个电话 也会发生同样的事情。

最后一个循环

```
while (chr != '\n')
{
   chr = getchar();
} 
```

finally 消耗剩下的`"acob\n"`，其中包含换行符（因为您在输入名称后按 Enter ），导致循环和程序退出。

你如何解决这个问题？

首先，您需要声明`firstname`为一个*数组*：`char`

```
char firstname[SOME_SIZE] = {0}; 
```

where`SOME_SIZE`大到足以处理您的所有案件。您需要将`scanf`呼叫更改为

```
scanf("%s", firstname); 
```

这告诉`scanf`从输入流中读取字符直到下一个空白字符，并将结果存储到`firstname`数组中。注意这里不需要使用`&`操作符；在大多数情况下，数组类型的*表达式*将被转换（“衰减”）为指针类型的表达式，表达式的值将是数组中第一个元素的地址。

请注意，这`scanf`不是很安全，也不是很健壮。如果您输入的字符多于缓冲区的大小以容纳，`scanf`则会很乐意将这些额外的字符存储到数组后面的内存中，这可能会破坏一些重要的东西。您可以通过在转换说明符中使用显式字段宽度来防止这种情况，例如

```
scanf(*%29s", firstname); 
```

但总的来说这是一种痛苦。

`scanf`也不是很擅长检测不良输入。如果您输入“12er”作为您的标记之一，`scanf`将转换并分配`"12"`，将 留`"er"`在流中以破坏下一次读取。

`scanf`返回成功分配的数量，因此防止错误输入的一种方法是检查返回值，如下所示：

```
if (scanf("%d", &mathmarks) != 1)
{
  printf("Bad input detected for math marks\n");
} 
```

不幸的是，`scanf`不会从流中删除坏字符；你必须自己使用`getchar`或类似的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:48:06.493

这是新 C/C++ 开发人员的常见错误。该`scanf`函数检测到您`ENTER/RETURN`按下键以表示输入结束，但它也会`\n`在输入字符串的末尾捕获字符，因此您基本上会`RETURNS`检测到两个字符。

请在此处阅读使用`fgets`示例`sscanf`：

[http://www.linuxforums.org/forum/programming-scripting/67560-problem-scanf.html](http://www.linuxforums.org/forum/programming-scripting/67560-problem-scanf.html)

它将很快为您解决这个问题。与此同时，我强烈建议你看看这本书：

[http://www.amazon.com/Primer-Plus-5th-Stephen-Prata/dp/0672326965](https://rads.stackoverflow.com/amzn/click/com/0672326965)

这是北美高中和大学最常用的C编程书籍，有大量示例供您使用通过，包括您在上面演示的这个特定程序。印刷版比电子书有更多的例子，所以我会为印刷版支付 30.00 美元。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:54:06.450

您可能想看一些教程。也许一个关于[格式说明符](http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output)，一个关于[C 中的字符串](http://www.cs.bu.edu/teaching/cpp/string/array-vs-ptr/)

`scanf()``stdin`从格式说明符指定的读取数据并存储它们。在这种情况下：

```
char firstname;    
scanf("%c", &firstname); 
```

读取 1 个字符`stdin`并将其存储到`firstname`：

```
>> What is your first name?
Mike 
```

现在`firstname == 'M'`因为`scanf()`按照我们的要求读取 1 个字符。

你想要做的是读取一个字符串（一堆字符）：

```
char firstname[5];        // an array of characters
scanf("%s", firstname);  // store as a string
firstname[4] = '\0';      // Truncate the result with a NULL to insure no overflow

>> What is your first name?
Mike 
```

现在`firstname`是 [M][i][k][e][\0] 因为`scanf()`按照我们的要求读取了 1 个字符串。注意同样适用于`printf()`， a `printf`with a`%c`会给你一个字符，而 as a `printf()`with a`%s`会给你所有字符，直到 NULL 终止符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T16:01:46.963

你有（至少）两个选择。

```
char firstname[number_big_enough_to_hold_long_name];
/*or */

char *firstname = malloc(sizeof(char) * number_big_enough_to_hold_long_name);
/* ... code ... */
free(firstname); 
```

此外，最好限制读取的宽度。`scanf()`不知道 的大小（可用空间）`firstname`。

```
scanf("%number_big_enough_to_hold_long_names", ...
/* i.e. */

char firstname[32];
if(scanf("%31s", firstname) == EOF) {
     perror("bad");
     return 1;
} 
```

此外，在尝试下一次阅读之前，您应该检查是否还有任何东西。即，如果有人输入“我的名字”，那么只有“我的”最终会出现，`firstname`而“名字”将留在输入流中。

并`getchar()`返回一个`int`非字符。

*   [获取字符](http://www.cplusplus.com/reference/clibrary/cstdio/getchar/)
*   [扫描](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)

*   并搜索“ *ansi c char arrays tutorial* ”或类似内容。

# c++ - 如何将一个缓冲区指针的内容复制到另一个

> ID：12803255
> 
> 赞同：2
> 
> 时间：2012-10-09T15:17:57.883
> 
> 标签：c++, c, com, atl

我有以下指针：

```
BSTR *PREVIOUS; 
```

我想制作一个新副本到：

```
BSTR *NEW; 
```

我想将 CONTENTS/DATA（PREVIOUS 指向的）从 PREVIOUS 复制到 NEW。

我刚刚尝试了以下命令，但它不起作用：

```
memcpy(NEW,PREVIOUS,SysStringByteLen(*PREVIOUS)); 
```

我在编译时没有看到任何错误，因为我正在使用 ATL COM 环境。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:27:44.613

`BSTR`本身已经是一个指针，你应该几乎总是只使用一个 plain `BSTR`，而不是 a `BSTR*`（它是一个指向 a 的指针`BSTR`）。通常，您将复制 a `BSTR`with [`SysAllocString`](http://msdn.microsoft.com/en-us/library/ms891285.aspx)：

```
BSTR NEW = SysAllocString(PREVIOUS); 
```

如果你确实有一个指向 a 的指针`BSTR`（例如通过函数的 out 参数），那么你添加一个间接层：

```
BSTR *PREVIOUS = ...;  // This must point to a valid BSTR
BSTR *NEW = ...;  // This must also point to a valid BSTR
*NEW = SysAllocString(*PREVIOUS); 
```

# database - 加载数据、WCF 服务

> ID：12803258
> 
> 赞同：0
> 
> 时间：2012-10-09T15:18:10.613
> 
> 标签：database, wcf, entity-framework

请帮帮我！我有关于 ASP.NET MVC、EF 4.5 和 WCF 服务的项目。问题是数据库中的数据没有加载到视图。我使用调试器跟踪主机 WCF 项目并在 SvcTraceViewer 中查看日志，并且我看到实体（未加载）的类似错误，但我无法忍受它们的意思。：

带有错误描述的图像。 ![我的错误](../Images/2c6f6ee08ff7f4616811619253b2231b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:23:49.187

检查 WCF 项目中的连接字符串。

以供参考：

[创建模型时无法使用上下文](https://stackoverflow.com/questions/9750115/the-context-cannot-be-used-while-the-model-is-being-created)

[EF CTP4：“创建模型时不能使用上下文。”](https://stackoverflow.com/questions/5383809/ef-ctp4-the-context-cannot-be-used-while-the-model-is-being-created)

# javascript - i18n-js Gem 没有找到必要的文件

> ID：12803261
> 
> 赞同：4
> 
> 时间：2012-10-09T15:18:15.467
> 
> 标签：javascript, ruby-on-rails-3.1, internationalization, asset-pipeline, i18n-gem

所以我有一个正在使用的应用程序`Rails 3.1.3`，并在`Jruby`. 我们允许用户导入他们自己的主题（所以他们自己的 CSS 内容），因此我们不会在生产中预编译我们的资产（我知道预编译的性能原因，但是我们没有找到性能打得那么差，这对我们来说是最好的决定）。

由于我们要支持多种语言，我们也有翻译文件。Rails 翻译已经完成`config/locales/*.yml`，然后我们的 Javascript 文件需要翻译。以前我们将这些翻译放在一个`assets/javascripts/config.js`文件中——但这对于未来来说是高度不可扩展的。我们想要一个允许从文件中提取 Javascript 文件的解决方案`config/locales/*.yml`。我们遇到了`i18n-js`Gem ( [i18n-js](https://github.com/fnando/i18n-js) )。

这颗宝石在当地完全按照预期工作。但是，在生产中，我们遇到了错误。第一个问题是`application.js`找不到`i18n.js`文件。对我来说，这是有道理的，因为我们没有预编译资产，而且 i18n-js Gem 显然不会*安装*在生产服务器上，应用程序将无法访问 i18n.js 文件。所以我在`assets/javascripts/`路径中手动添加了文件。这解决了这个错误。

现在我们得到这个错误：

```
2012-10-05[INFO] - Internal Server Error: Sprockets::FileNotFound couldn't find file 'file:/tmp/Jetty_0_0_0_0_application.war____.r5dru7/webapp/WEB-INF/lib/tmp-gems.jar!/gems/activesupport-3.1.3/lib/active_support/locale/en.yml'

    (in /tmp/Jetty_0_0_0_0_application.war____.r5dru7/webapp/WEB-INF/app/assets/javascripts/i18n/translations.js) 
```

我已经检查了`tmp-gems.jar`并且`gems.jar`文件实际上在那里......所以这让我感到困惑。我的想法是 i18n-js Gem simple 假设您正在预编译资产，并且没有设计为在没有实际安装在服务器上的 gem 的生产环境中运行。但是，我想知道是否有人可以就这个想法提供一些指导？我是对的，还是有办法解决这个问题？

*注意：*如果我预编译资产 - 生产中没有问题。还要注意，这个生产问题*只有*在我们开始使用这个 Gem 时才出现 - 所以我知道它与那个 gem 的用法有关，而不是别的。在此更改之前，一切正常。

此外，如果有人对解决语言问题有更好的建议（我们不希望在 JS 文件和语言环境 YAML 文件中维护翻译）。我也将不胜感激为此提出的建议！

谢谢！

# bash - bash 的大括号扩展不起作用

> ID：12803263
> 
> 赞同：1
> 
> 时间：2012-10-09T15:18:19.043
> 
> 标签：bash, brace-expansion

我对 bash 的大括号扩展有一个简单的问题：

```
#!/bin/bash  
PICS="{x1,x2,x3}.jpg {y1,y2}.png"    
for i in $PICS  
do  
  echo $i  
done 
```

但结果是：
{x1,x2,x3}.jpg
{y1,y2}.png
但我想要的结果是：x1.jpg x2.jpg x3.jpg y1.png y2.png
我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:24:30.213

直接的方法是

```
#!/bin/bash  

for i in {x1,x2,x3}.jpg {y1,y2}.png; do
  echo $i  
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:19:38.973

解析行时执行大括号扩展，不会发生在引号内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:21:49.890

评估命令时，对参数执行大括号和通配符扩展。将第一行更改为：

```
PICS=$(echo {x1,x2,x3}.jpg {y1,y2}.png) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:44:14.230

这些是已经存在的文件吗？如果是，你可能想要一个（ext）glob。例如

```
printf '%s\n' [xy]+([[:digit:]]).@(jp|pn)g 
```

Bash 中的大括号扩展是第一个扩展步骤。它主要出现在未引用的上下文中，尽管确切的规则很复杂。除非您稍后评估结果，否则您不能将一个存储在字符串中。

```
printf '%s\n' {x{1..3}.jp,y{1,2}.pn}g 
```

这些可以根据你的感觉来定义。请参阅其他答案以获得较少混淆的选项。

您还需要引用您的扩展。

# r - 了解 R 中的变量范围

> ID：12803269
> 
> 赞同：2
> 
> 时间：2012-10-09T15:18:32.140
> 
> 标签：r, scope, environment-variables, environment

如何在以下代码段中修改 vairable 'loco' 的值：

```
poco <- function() {

func <- function(x) {
    print(loco)
    loco <- loco+x
}

loco <- 123
func(1)
func(2)
} 
```

此函数给出以下结果：

```
> poco()
[1] 123
[1] 123 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:31:53.473

```
poco <- function() {

func <- function(x) {
    print(loco)
    loco <<- loco+x
}

loco <- 123
func(1)
func(2)
} 
```

This `<<-` operator assigns to the outer scope. (like `assign(..., env=...)`). However, as mentioned in the comments, this is usually a bad idea. If you'd like to ask a second question expanding on this where you outline your entire problem, I bet there are other, better choices.

The `<<-` can bit you in the butt if you're not careful. See this [wiki article](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)

What was happening in your first function where you `loco <- loco + x` is that the function looks outside of the scope of `func` for `loco` when it finds it it brings in into the local scope of `func` and assigns to `loco` in the local scope rather than the `poco` scope.

Hope that helps!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T15:32:04.903

R has a stack of environments. So while you are changing a variable within a function with simple `<-` or `=` commands, its value will not change in the outer environment.

To do so, you have several options, as illustrated below:

1st Option:

```
func <- function(x) {
    print(loco)
    # To modify value of "loco" just in the parent environment, but not globally
    loco <<- loco+x
} 
```

2nd (better) Option:

```
func <- function(x) {
    print(loco)
    # Again modifies the varaible just in the parent environment, not globally
    assign("loco", loco + x, envir = sys.frame(-1))
} 
```

And the 3rd Option:

```
func <- function(x) {
    print(loco)
    # To modify the value of a global variable "loco"
    assign("loco", loco + x, envir = .GlobalEnv) 
} 
```

then you will have:

```
loco <- 123
func(1) # 123
func(2) # 124
loco    # 126 
```

Note that by using options 1 and 2, if you have several nested function definitions, you are modifying the value just in the parent function but not globally.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T15:25:18.077

```
poco <- function() {

  func <- function(loco,x) {
    print(loco)
    loco <- loco+x
    loco
  }

  loco <- 123
  loco <- func(loco,1)
  loco <- func(loco,2)
  loco
}
loco_final <- poco()
#[1] 123
#[1] 124
loco_final
#[1] 126 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-09T15:28:15.050

`loco`一般来说，在功能中没有改变是一件好事。不使用这些全局变量可确保变量不会干扰较大脚本中的每个变量。

假设您`bla`在`function_a`and中使用了一个变量`function_b`。预测函数调用的结果很困难，因为它取决于`bla`. 用行话来说，这被称为函数有副作用。不使用这些会使函数更可预测，并且更容易调试。此外，当您的脚本增长时，您可以防止新函数或代码片段发生任何问题，`bla`从而改变函数中发生的情况。

通常，如果您需要函数中的变量，请将其作为变量传递。但是，R 确实允许从函数内部到函数外部进行作用域，反之亦然。另请参阅此[最近的问题](https://stackoverflow.com/questions/12750923/conflict-of-variables-in-r-language)以获取更多信息。

# javascript - Prev Next 在幻灯片中导航

> ID：12803283
> 
> 赞同：0
> 
> 时间：2012-10-09T15:19:22.360
> 
> 标签：javascript, css, navigation, slider

![](../Images/3c5198b4acfa229c6bdf865d190cbf06.png)

该概念是一张幻灯片，具有低不透明度的上一个和下一个图像可见。
有箭头键可以使用分页按钮左右导航幻灯片。

这是我现在拥有的 HTML 的结构。我在网上看到了一个教程。（您可能必须将文件复制粘贴到您的 HTML 编辑器软件上才能使 JavaScript 工作）
[http://jsfiddle.net/Doodle/yTrWP/1/](http://jsfiddle.net/Doodle/yTrWP/1/)（源代码）
[http:// /www.temzlemdor.in/stackoverflow/coolcarousel.html](http://www.temzlemdor.in/stackoverflow/coolcarousel.html)（工作页面）

但我错过了箭头键。
有人可以帮我解决这个问题。

我正在研究的另一个是这个。
[http://jsfiddle.net/Doodle/pyqhg/](http://jsfiddle.net/Doodle/pyqhg/)（源代码）
[http://www.temzlemdor.in/stackoverflow2/coolcarousel.html](http://www.temzlemdor.in/stackoverflow2/coolcarousel.html)（工作页面）

![](../Images/065497f9140653d54c956fc7bebf1ae7.png) ![](../Images/f37cbe2e3a93adf0534beb47821ed16c.png)
（对于上一个/下一个图像）
在这里我错过了侧面图像的不透明度降低。
关于如何将这些固定到我的概念的任何帮助？
我是 javascript 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:09:27.007

从这里得到了我的答案...... >br/> [http://fiddle.jshell.net/JCQ6Q/15/show/](http://fiddle.jshell.net/JCQ6Q/15/show/)
哎......就像我问了这个问题，我碰巧自己回答了...... :D

# c# - 在运行时解析属性。C＃

> ID：12803285
> 
> 赞同：0
> 
> 时间：2012-10-09T15:19:24.543
> 
> 标签：c#, dynamic, properties

我有一些类有一些代码

```
public IEnumerable<TypeOne> TypeOne
    {
        get
        {
            if (db != null)
            {
                var col = db.Select<TypeOne>();
                if (col.Count > 0) return col;
            }
            return db2.TypeOne;
        }
    }
    public IEnumerable<TypeTwo> TypeTwo
    {
        get
        {
            if (db != null)
            {
                var col = db.Select<TypeTwo>();
                if (col.Count > 0) return col;
            }
            return db2.TypeTwo;
        }
    } 
```

所以你可以看到有很多重复的代码，并且有相同的属性名称和可枚举的项目类型。我想调用对象的某些属性，例如“obj.MyProp”。并且 MyProp 必须在运行时使用一些通用或非通用方法解决。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:23:43.577

稍微不完整的答案，但你会得到一般的想法：

这是您需要泛型的场景。

```
public IEnumerable<t> TypeSomething
{
    get
    {
        if (db != null)
        {
            t col = db.Select<t>();
            if (col.Count > 0) return col;
        }
        return GetDB<t>();
    }
} 
```

您需要实现 GetDB() 来为任何给定类型返回适当的数据库，但这将是一个单一的开关（或者您可以使用反射来找到它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:26:47.933

有几种方法可以做到这一点。最好的可能是通用方法：

```
public IEnumerable<T> dbSelect<T>() //may need type constraints here
{
    return db != null
           ? db.Select<T>()
           : null;
}
public IEnumerable<TypeOne> TypeOne
{
    get { return dbSelect<TypeOne> ?? db2.TypeOne; }
}
public IEnumerable<TypeTwo> TypeTwo
{
    get { return dbSelect<TypeTwo>() ?? db2.TypeTwo; }
} 
```

如果你的`db2`对象有一个`Select<T>`像这样的泛型方法`db`，那就更容易了：

```
public IEnumerable<T> dbSelect<T>()
{
    return db != null
           ? db.Select<T>()
           : db2.Select<T>(); //or db2.GetEntities<T>() or db2.OfType<T> or whatever
}

//Later, in your main code...
var x = dbSelect<TypeOne>();
var y = dbSelect<TypeTwo>(); 
```

这将是类型安全的，**比**反射快得多，并且可以与 Intellisense 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:24:50.680

您可以使用泛型解决此问题：

```
public IEnumerable<TypeOne> TypeOne
{
    get { return GetTable<TypeOne>(); }
}

public IEnumerable<TypeTwo> TypeTwo
{
    get { return GetTable<TypeTwo>(); }
}

private IEnumerable<T> GetTable<T>()
{
    if (db != null)
    {
        var col = db.Select<T>();
        if (col.Count > 0) return col;
    }

    return db2.Select<T>();    
} 
```

# jquery-ui - jQuery UI 动画回调在动画开始之前执行

> ID：12803289
> 
> 赞同：0
> 
> 时间：2012-10-09T15:19:46.883
> 
> 标签：jquery-ui, animation, backbone.js, callback

我试图让一些动画在我将底层模型的数据刷新到新记录时调用的主干视图的渲染操作期间工作。

```
SiteView = Backbone.View.extend({

    initialize: function () {
        this.model.bind('change', this.render, this);
    },

    render: function () {
        if (this.model.get('name')) {
            var callback = function (view) {
                view.$("#activesite_name").empty().append(view.model.get('name'));
                view.$("#activesite_desc").empty().append(view.model.get('description'));
                $(view.el).show('drop', { direction: 'down' }, 'slow').removeClass('hidden');
            };

            $(this.el).filter(':visible').fadeOut(500, callback(this));
        }
    }
}); 
```

但是，jQuery UI 回调函数是在 show 操作之前执行的，导致 UI 更新然后在从一个模型选择刷新到另一个模型时消失。

仅在正确隐藏元素后，如何才能调用回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:23:08.797

试试这个：

```
render: function () {
    if (this.model.get('name')) {
        var view = this;
        var callback = function () {
            view.$("#activesite_name").empty().append(view.model.get('name'));
            view.$("#activesite_desc").empty().append(view.model.get('description'));
            view.$el.show('drop', { direction: 'down' }, 'slow').removeClass('hidden');
        };

        $(this.el).filter(':visible').fadeOut(500, callback);
    }
} 
```

# java - MySQL，从已解析文件中加载数据的最有效方式

> ID：12803296
> 
> 赞同：2
> 
> 时间：2012-10-09T15:20:16.207
> 
> 标签：java, mysql, csv, load-data-infile

我的文件具有以下格式：

```
Table1; Info
rec_x11;rec_x21;rec_x31;rec_x41
rec_x12;rec_x22;rec_x32;rec_x42
...
\n
Table2; Info
rec_x11;rec_x21;rec_x31;rec_x41
rec_x12;rec_x22;rec_x32;rec_x42
...
\n
Table3; Info
rec_x11;rec_x21;rec_x31;rec_x41
rec_x12;rec_x22;rec_x32;rec_x42
... 
```

每批记录从 TableX 标头之后的下一行开始并以空行分隔符结束，大小约为 700-800 行。

每一批这样的行 ( `rec_xyz`...) 都需要导入到批头中指示的相关**MyISAM**`TableX`表名中 ( )

我熟悉使用 shell 命令将流传输到 LOAD DATA 命令的选项。

我对简单的java snipet代码感兴趣，它将解析这个文件并每次为一批记录执行LOAD DATA（在for循环中，可能使用seek命令）。

现在我正在尝试使用 IGNORE LINES 来跳过处理过的记录，但是我不熟悉是否可以选择忽略 BELOW 中的行？

有没有更有效的方法来解析这种类型的文件并将其加载到数据库中？

**编辑**

我读过 JDBC 支持`LOAD DATA`从 5.1.3 开始的输入流，我可以用它用输入流迭代文件并`LOAD DATA`每次更改语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:02:36.330

我附上我的代码作为解决方案，

此解决方案基于MySQL Connector/J 5.1.3 及更高版本添加的[附加功能](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-implementation-notes.html)( )。`setLocalInfileInputStream`

我将输入流管道化到`LOAD DATA INTO`语句中，而不是使用直接文件 URL。

附加信息：我使用 BoneCP 作为连接池

```
public final void readFile(final String path)
        throws IOException, SQLException, InterruptedException {
    File file = new File(path);

    final Connection connection = getSqlDataSource().getConnection();
    Statement statement = SqlDataSource.getInternalStatement(connection.createStatement());

    try{
        Scanner fileScanner = new Scanner(file);
        fileScanner.useDelimiter(Pattern.compile("^$", Pattern.MULTILINE));

        while(fileScanner.hasNext()){
            String line;
            while ((line = fileScanner.nextLine()).isEmpty());

            InputStream is = new ByteArrayInputStream(fileScanner.next().getBytes("UTF-8"));
            String [] tableName = line.split(getSeparator());
            setTable((tableName[0]+"_"+tableName[1]).replace('-', '_'));

            String sql = "LOAD DATA LOCAL INFILE '" + SingleCsvImportBean.getOsDependantFileName(file) + "' " 
                    + "INTO TABLE " + SqlUtils.escape(getTable()) 
                    + "FIELDS TERMINATED BY '" + getSeparator() 
                    + "' ESCAPED BY '' LINES TERMINATED BY '" + getLinefeed() + "' ";
            sql += "(" + implodeStringArray(getFields(), ", ") + ")";       
            sql += getSetClause();

            ((com.mysql.jdbc.Statement) statement).setLocalInfileInputStream(is);
            statement.execute(sql);         
        }
    }finally{
        statement.close();
        connection.close();
    }   
} 
```

# java - 加密字符串，将其保存到数据库，加载并解密

> ID：12803298
> 
> 赞同：1
> 
> 时间：2012-10-09T15:20:19.033
> 
> 标签：java, database, encryption

我必须将与另一个数据库的连接详细信息存储在数据库表中，我必须加密这些数据库的密码，并且必须能够通过 SQL 脚本“手动”将数据插入该表......

我需要加密和解密它，因为我的应用程序必须能够使用这些数据并连接到其他数据库，所以 MD5 和类似的没有用..

我想到了 Blowfish、AES 等...但是如果我将密码作为 VARCHAR 存储在数据库中，则解密部分不起作用...所以我将其存储为 BYTE，但如果我这样做，没有人可以编写脚本在表上预加载数据..

也许我在这里遗漏了一些东西......

这是我在表中的注册表定义为 VARCHAR 时使用的代码：

```
package main;

import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.SecretKeySpec;

public class Prueba {

    private static final String keyValue = "fd<[;.7e/OC0W!d|";
    private static final String ALG = "Blowfish";

    public static void main(String[] args) {
        String text = "some random text";

        try {
            SecretKeySpec key = new SecretKeySpec(keyValue.getBytes(), ALG);
            Cipher cipher = Cipher.getInstance(ALG);
            cipher.init(Cipher.ENCRYPT_MODE, key);
            byte[] encryptedBytes = cipher.doFinal(text.getBytes());
            String encrypted = new String(encryptedBytes);

            cipher.init(Cipher.DECRYPT_MODE, key);
            byte[] recoveredBytes = cipher.doFinal(encrypted.getBytes());
            String recovered = new String(recoveredBytes);

        } catch (NoSuchAlgorithmException nsa) {
            nsa.printStackTrace();
        } catch (NoSuchPaddingException nspe) {
            nspe.printStackTrace();
        } catch (InvalidKeyException ike) {
            ike.printStackTrace();
        } catch (BadPaddingException bpe) {
            bpe.printStackTrace();
        } catch (IllegalBlockSizeException ibse) {
            ibse.printStackTrace();
        } 
    }

} 
```

我得到了例外：

```
javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher
    at com.sun.crypto.provider.SunJCE_h.b(DashoA12275)
    at com.sun.crypto.provider.SunJCE_h.b(DashoA12275)
    at com.sun.crypto.provider.BlowfishCipher.engineDoFinal(DashoA12275)
    at javax.crypto.Cipher.doFinal(DashoA12275)
    at main.Prueba.main(Prueba.java:30) 
```

如果不是：

```
byte[] recoveredBytes = cipher.doFinal(encrypted.getBytes()); 
```

我愿意

```
byte[] recoveredBytes = cipher.doFinal(encryptedBytes); 
```

我也不例外，但是我必须将密码存储为 byte[] soooo 没有脚本可能......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:27:15.253

似乎当您将密钥存储为字节时，某处的某些东西会错误地解释它。可能是字符编码问题。

如果要将密钥存储为文本，则可能需要先对其进行 base64 编码。然后，您可以 base64 将文本解码回密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:59:05.800

最后，正如maerics所建议的那样，我以这种方式解决了它：

```
import org.apache.commons.net.util.Base64;

public class MyCrypto {

    /**
     * Codifica un texto usando Base64.
     * @param texto <code>String</code> texto a codificar.
     * @return <code>String</code> texto codificado.
     */
    public static String encrypt(String texto) {
        return new String(Base64.encodeBase64(texto.getBytes()));
    }

    /**
     * Decodifica un texto usando Base64.
     * @param texto <code>String</code> texto a decodificar.
     * @return <code>String</code> texto decodificado.
     */
    public static String decrypt(String texto) {
        return new String(Base64.decodeBase64(texto.getBytes()));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:05:22.683

```
String encrypted = new BASE64Encoder ().encodeBuffer ( encryptedBytes );            
cipher.init(Cipher.DECRYPT_MODE, key);
byte[] recoveredBytes = cipher.doFinal( new BASE64Decoder ().decodeBuffer (  encrypted ) ); 
```

# sql - 如何按照它们在 Oracle 中出现的实际顺序按日期对 SQL 结果进行分组？

> ID：12803303
> 
> 赞同：1
> 
> 时间：2012-10-09T15:20:38.517
> 
> 标签：sql, oracle

我试图弄清楚如何按照月份发生的实际顺序而不是它们名称的字母顺序对 Oracle 中的表中的 SQL 结果进行分组。

谁能帮我这个？先谢谢了。

# ============ 更新 ============

这是一个示例查询：

```
SELECT exec_month FROM table_or_view WHERE condition=1 GROUP BY exec_month; 
```

你看，问题是我不能像我想要的那样按月分组。正如文森特马尔格拉特所说，“分组没有隐含的顺序”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:36:55.493

[**分组没有隐含的顺序**](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:74320098178823)。如果要按特定顺序显示行，请添加 ORDER BY 子句：

```
SQL> with data as (
  2     SELECT add_months(trunc(sysdate, 'year'), rownum-1) dt
  3       FROM dual CONNECT BY LEVEL <= 4
  4  )
  5  select to_char(dt, 'month')
  6    from data
  7   group by to_char(dt, 'month'), trunc(dt, 'month')
  8   order by trunc(dt, 'month');

TO_CHAR(D
---------
january
february
march
april 
```

# excel - 数据透视表显示值，而不是值的总和

> ID：12803305
> 
> 赞同：17
> 
> 时间：2012-10-09T15:20:40.400
> 
> 标签：excel, if-statement, excel-formula, excel-2007, pivot-table

我想显示一个数据透视表并让它显示实际值，每行一个，而不是值的总和。例如

```
Name    Jan   Feb   Mar   Apr
Bob     12    10          4
        3     5      
James   2     6     8     1
                    15 
```

等等

我的出发点是有三列`Name`：`Value`和`Month`。

这是否可能而不必做一些完全不同的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T01:26:48.003

我担心这可能会变成很长的路要走，但可能取决于您的数据集有多大——例如可能超过四个月。

假设您的数据`ColumnA:C`在第 1 行中并具有列标签，则该月也已格式化`mmm`（最后是为了便于排序）：

1.  按名称然后按月份对数据进行排序
2.  输入`D2` `=IF(AND(A2=A1,C2=C1),D1+1,1)`（一种处理同一个人同一个月的多个条目的棘手问题的一种方法）。
3.  从创建数据透视表`A1:D(last occupied row no.)`
4.  说插入`F1`。
5.  布局如屏幕截图。

![SO12803305 示例](../Images/2a84b754f65e1ca7e5ec9adc7189f528.png)

我希望这足以满足您的需求，因为数据透视表应自动更新（只要范围合适）以响应刷新的附加数据。如果不是（你的硬任务管理员），请继续，但请注意，每次源数据更改时都需要重复以下步骤。

5.  复制数据透视表和粘贴特殊/值到，比如说，`L1`。
6.  向上移动单元格删除复制范围的第一行。
7.  插入新单元格`L1`并向下移动。
8.  将“名称”键入`L1`.
9.  过滤复制的范围和 for `ColumnL`、 select`Row Labels`和数值。
10.  删除内容`L2:L(last selected cell)`
11.  使用向上移动单元格删除复制范围中的空白行（最好通过添加一个计算所有 12 个月的列）。希望结果应该以黄色突出显示。

如果不适合，很高兴进一步解释/再试一次（我还没有真正测试过）。

**编辑**（为了避免上面的第二个步骤并促进源数据更改的更新）

.0\. 在第一步之前 2\. 在最顶部添加一个空白行并向上移动`A2:D2` 。
.2\. 相应地调整单元格引用（在..3 `D3` `=IF(AND(A3=A2,C3=C2),D2+1,1)`.
Create pivot table from`A:D`

.6\. `Row Labels`用覆盖`Name`。
.7\. 数据透视表工具、设计、报表布局、以表格形式显示以及对行和列进行排序 A>Z。
.8\. 隐藏`Row1`，`ColumnG`以及显示的行和列`(blank)`。

![附加示例](../Images/943784edc37ae6e93954c1d17d6fb13b.png)

步骤 .0。和 .2。如果数据透视表与源数据位于不同的工作表中，则不需要在编辑中进行编辑（推荐）。

步骤 .3。编辑中的更改是为了简化扩展源数据集的后果。但是引入`(blank)`到数据透视表中，如果要隐藏可能需要在刷新时进行调整。因此，每次更改时调整源数据范围可能会更好：数据透视表工具、选项、更改数据源、更改数据源、选择表或范围）。在这种情况下，复制而不是移入 .0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-13T23:22:43.383

另一种更简单的方法是将您的文件上传到谷歌表格，然后添加一个数据透视表，为列和行选择与 Excel 相同的选择，但是，对于值选择计算字段，然后在公式中输入 =

[![在我的情况下，列标题是 URL](../Images/4cf490cc52f40460e0e1d927be20fd66.png)](https://i.stack.imgur.com/MCyI4.png)

# android - Android/Eclipse - 保存按钮错误

> ID：12803308
> 
> 赞同：2
> 
> 时间：2012-10-09T15:20:55.137
> 
> 标签：android, eclipse, button, save

我对“setOnClickListener(onSave)”和“View.OnClickListener”有一些问题</p>

下面是我的代码：

```
package apt.tutorial;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class LunchList extends Activity {
Restaurant r = new Restaurant ();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

//save button
//be notified when the button is clicked
Button save =(Button)findViewById(R.id.save);

save.setOnClickListener(onSave){
}

private View.OnClickListener onSave=new View.OnClickListener();
public void onClick(View v) {
    EditText name=(EditText)findViewById(R.id.name);
    EditText address=(EditText)findViewById(R.id.addr);

    r.setName(name.getText().toString());
    r.setAdress(address.getText().toString());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

对于 save.setOnClickListener(onSave)，我收到错误 save.setOnClickListener(onSave)，对于 View.OnClickListener，我收到错误无法实例化类型 View.OnClickListener。

我查看了这个网站并用谷歌搜索了这个问题，但没有找到解决方案。我希望你们能帮助我。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:24:44.840

后面去掉分号

```
private View.OnClickListener onSave=new View.OnClickListener(); 
```

并在 onClickListener 的匿名构造函数中编写 onClick(View v) 或使用以下代码更改您的代码。

```
private View.OnClickListener onSave=new View.OnClickListener(
public void onClick(View v) {
    EditText name=(EditText)findViewById(R.id.name);
    EditText address=(EditText)findViewById(R.id.addr);

    r.setName(name.getText().toString());
    r.setAdress(address.getText().toString());
});
Button save =(Button)findViewById(R.id.save);
save.setOnClickListener(onSave); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:28:15.090

试试下面的代码：

```
 start.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            mainactivity();

        }
    }); 
```

# android - Android WebView 资源参考内存泄漏

> ID：12803309
> 
> 赞同：5
> 
> 时间：2012-10-09T15:21:02.313
> 
> 标签：android, memory, webview, memory-leaks, assets

我的 Android 4.0.4 应用程序由一个 WebView 组成，用户可以通过它查看本地存储在资产目录中的多个页面。循环浏览页面时，最终会触发以下错误并且应用程序崩溃：

*   JNI ERROR (app bug): local reference table overflow (max=512)
*   添加到 JNI 本地引用表失败（有 512 个条目）
*   虚拟机中止
*   致命信号 11 (SIGSEGV) 在 0xdeadd00dd (code=1)

该问题似乎与此处报告的问题有关：

*   [Android应用程序中的WebView内存泄漏](https://stackoverflow.com/questions/7605177/webview-memory-leak-in-android-app)
*   [使用 Assets 时的 Android WebView 内存泄漏](https://stackoverflow.com/questions/9278149/android-webview-memory-leak-when-using-assets)
*   [Viewpager Webview 内存问题](https://stackoverflow.com/questions/10942929/viewpager-webview-memory-issue)

我已使用以下链接中提供的 Memory Analyzer Tool 插件说明来检查详细信息：

[http://therockncoder.blogspot.ca/2012/09/fixing-android-memory-leak.html](http://therockncoder.blogspot.ca/2012/09/fixing-android-memory-leak.html)

结果如下所示（还不能发布屏幕截图，所以必须做文字）：

**垫节选**

```
Class Name                                                                                                                                                                                                                                                                                      | Shallow Heap | Retained Heap | Percentage
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                                                                                                                                                                                                                                                                |              |               |           
java.lang.Thread @ 0x40daa320  Thread-39775 Thread                                                                                                                                                                                                                                              |           80 |    15,310,552 |     76.74%
|- byte[32768] @ 0x40d5a8d0  <!DOCTYPE html>.<html xml:lang="">.<head>.   <title>Android Test-HTML5-480PX-Page 0</title>.   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />.   <meta name="viewport" content="width=360, height=480">. <!--.   <meta name="viewport" co...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x40e25bb8  on-play-state: running;.      -webkit-animation-timing-function: step-start;.   }.   @-webkit-keyframes ag16780-anim45051\.   {.        0.000% { background-position:0px 0px,77px 0px,77px 0px,77px 0px,77px 0px,77px 0px; }.       20.000% { background-position...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x40e60520  //<![CDATA[.var pageParams = new Object();.pageParams['readMode'] = 1;...function applyReadMode().{.    var audioNodes = document.getElementsByClassName('BGAudio');.    for (var i=0; i<audioNodes.length; i++).    {.    .if (pageParams['readMode'] == 0).   ...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x40e86f48  .PNG........IHDR....... ......U......gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<....bKGD..............pHYs...#...#.x.?v...ZIDATH..U]l\W..f.9.......8..G.....Z$ZUi..*EQQ...RE.Hi.D".0BTj..J.x..O.J..C.)..IU.R......HB.8..&..\.x..w..{fx...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x40f09f00  html.{.   padding           : 0px 0px 0px 0px;.   margin            : 0px 0px 0px 0px;.   height            : 100%;.   width             : 100%;.   background        : #ffffff;.}.body.{.   padding           : 0px 0px 0px 0px;.   margin            : 0px 0px...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x40f11f18  .=Xt.....H...hE:t.;.......=.s....f.(.....v.5'<.8}=.=kXF..&&...K...j.........<...A..........}.......c.c..7.e{b.....O.p..h....e.1....8.zd{..........}3.Z.W..v.|}y.u...3M.....h2IDAT...........Z.;u..M.....'!.(.S.....|j.]..h.l7.... .....I...u.&J5.";9.d04.S.........|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41009af0  //<![CDATA[.var pageParams = new Object();.pageParams['readMode'] = 1;...function applyReadMode().{.    var audioNodes = document.getElementsByClassName('BGAudio');.    for (var i=0; i<audioNodes.length; i++).    {.    .if (pageParams['readMode'] == 0).   ...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41011b08  html.{.   padding           : 0px 0px 0px 0px;.   margin            : 0px 0px 0px 0px;.   height            : 100%;.   width             : 100%;.   background        : #ffffff;.}.body.{.   padding           : 0px 0px 0px 0px;.   margin            : 0px 0px...|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41019b20  ...t.%#2#b......0..0.6.....A.M....%.F,.*...(.>.q$_.0... a..sF...."Ypn"....#.q...@...........C...3....-.L.b.A).F....4.....Q.1.Wd..3.|.Y%........:.w.F~ ]..0i>a......4n.E7.O..+.7S...D...|.IDAT..'...<.....E.n...!.1.....Tx211..E....4 .*f....>..)..)...gS.j.. WX....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41021b38  .PNG........IHDR...|.................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<....PLTE.................................................................................................................................................|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41029b50  .PNG........IHDR.......Q.......0.....gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<....bKGD..............pHYs...#...#.x.?v..:.IDATx...gx...........-.....4...p...S....%$!$.$$....z....8T.:.L...c..wI......23..3....U...?.5..j.......J@.P....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41031b68  .PNG........IHDR...V.........0..X....gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<....bKGD..............pHYs...#...#.x.?v....IDATh..Zyp.U....f.;3....j0..p...E]...M...*%..,.J..Pb..,....Z.AE.E.....n.."A.........@..d...>...........W......|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410889d0  .PNG........IHDR.............a.~e....gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<....PLTE...Q_HRgL......=I93?/f~Zg~[DV=@P8)0$'2&(3&/<('1$......""!:;:"#"......)3&...............&&&'''.......... ...........$.677888.$....................|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410909e8  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...wPLTE........~..............v...........~.........{yn........................................................F.. ..4..............!...........+..l....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x41098a00  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...wPLTE...uuj....................i.......................................................................S..'..$..............*..............[..........|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410a0a18  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...tPLTE...llh...........................|.u.....................................................]..*..+..............-..............T..............M....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410a8a30  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...wPLTE...ooi.......................}....................................................................[..)..%..............+..............Y..........|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410b0a48  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...zPLTE...wvk.......................{....................................................................\..(..$..............,..............\..........|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410b8a60  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...zPLTE...rqg.....d...................................z........................................................R..%.. ..............(..............]....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410c0a78  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...wPLTE...rrh........r............................................................................................Q..%.. ..............(................|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410c8a90  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...wPLTE........}..............O...........|.........xwl........................................................G..!.....8.............."...........'....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410d0aa8  .PNG........IHDR.....................gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...zPLTE........~..............m...........~.........{yn........................................................F.. ..4..............!...........+..l....|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410d8ac0  .PNG........IHDR.............e.. ....gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...yPLTE...mmmhfZ........h.................)........c..kppp..h..u.......................................................................x..o..a..........|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410e0ad8  .PNG........IHDR.............e.. ....gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<....PLTE...hhh.......................-...........e..~........|.............................................................................s.............|       32,784 |        32,784 |      0.16%
|- byte[32768] @ 0x410e8af0  .PNG........IHDR.............e.. ....gAMA......a.....sRGB........ cHRM..z&..............u0...`..:....p..Q<...|PLTE.........,,+........c..~...........]..............y....................n.........................................................................|       32,784 |        32,784 |      0.16%
'- Total: 25 of 471 entries; 446 more                                                                                                                                                                                                                                                           |              |               |           
android.widget.HorizontalScrollView @ 0x40e1d8b8                                                                                                                                                                                                                                                |          576 |       978,456 |      4.90%
class android.content.res.Resources @ 0x40ab1570 System Class                                                                                                                                                                                                                                   |           48 |       266,432 |      1.34%
... 
```

**日志摘录**

```
...
10-08 22:10:28.970: D/MediaPlayer(9823): pause() out
10-08 22:10:29.090: E/dalvikvm(9823): JNI ERROR (app bug): local reference table overflow (max=512)
10-08 22:10:29.090: W/dalvikvm(9823): JNI local reference table (0x2498270) dump:
10-08 22:10:29.090: W/dalvikvm(9823):   Last 10 entries (of 512):
10-08 22:10:29.090: W/dalvikvm(9823):       511: 0x40d696d0 android.content.res.AssetManager
10-08 22:10:29.090: W/dalvikvm(9823):       510: 0x4201eab0 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       509: 0x42016a98 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       508: 0x4200ea80 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       507: 0x42006a68 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       506: 0x41ffea50 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       505: 0x41ff6a38 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       504: 0x41feea20 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       503: 0x41fe6a08 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):       502: 0x41fde9f0 byte[] (32768 elements)
10-08 22:10:29.090: W/dalvikvm(9823):   Summary:
10-08 22:10:29.090: W/dalvikvm(9823):         1 of java.lang.Class
10-08 22:10:29.090: W/dalvikvm(9823):       510 of byte[] (32768 elements) (510 unique instances)
10-08 22:10:29.090: W/dalvikvm(9823):         1 of android.content.res.AssetManager
10-08 22:10:29.090: E/dalvikvm(9823): Failed adding to JNI local ref table (has 512 entries)
10-08 22:10:29.090: I/dalvikvm(9823): "Thread-39898" prio=5 tid=12 RUNNABLE
10-08 22:10:29.090: I/dalvikvm(9823):   | group="main" sCount=0 dsCount=0 obj=0x40d6b9d8 self=0x222a030
10-08 22:10:29.090: I/dalvikvm(9823):   | sysTid=9871 nice=0 sched=0/0 cgrp=default handle=29456640
10-08 22:10:29.090: I/dalvikvm(9823):   | schedstat=( 520906000 142824000 757 ) utm=22 stm=30 core=2
10-08 22:10:29.090: I/dalvikvm(9823):   at android.content.res.AssetManager.readAsset(Native Method)
10-08 22:10:29.090: I/dalvikvm(9823):   at android.content.res.AssetManager.access$700(AssetManager.java:35)
10-08 22:10:29.090: I/dalvikvm(9823):   at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:648)
10-08 22:10:29.090: I/dalvikvm(9823):   at dalvik.system.NativeStart.run(Native Method)
10-08 22:10:29.090: E/dalvikvm(9823): VM aborting
10-08 22:10:29.090: A/libc(9823): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1)
10-08 22:10:29.140: I/MediaPlayer(9823): setLPAflag() in
... 
```

通过查看 MAT 条目，主线程似乎持有对所有 HTML 页面、CSS 和 Javascript 文件、图像和音频文件的引用，并且没有释放它们。最终，当调用新 URL 时，AssetManager 会尝试写入超出 JNI 本地 ref 表边界（512 个条目）的条目，耗尽可用空间并导致内存泄漏。

我已经尝试了各种方法来阻止保留引用，但没有成功。这包括：

*   初始化 WebView 使其不缓存页面：

    ```
    mWebView.getSettings().setAppCacheEnabled(false);
    mWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
    mWebView.setDrawingCacheEnabled(false); 
    ```

*   在加载下一页之前尝试删除所有现有的 WebView 数据：

    ```
    mWebView.stopLoading();
    mWebView.clearCache(true);
    mWebView.destroyDrawingCache();
    mWebView.clearHistory();
    mWebView.freeMemory();
    mWebView.getInstance().deleteAllData(); 
    ```

*   动态创建 WebView 而不是通过 res/layout XML，并将其分配给应用程序上下文而不是 Activity 上下文：

    ```
    mWebView = new WebView(getApplicationContext()); 
    ```

*   在更改页面之前销毁当前的 WebView 并为下一页动态创建一个新的 WebView，但这除了减慢应用程序的速度之外没有任何影响；JNI 本地表仍然保留旧的引用：

    ```
    mWebViewContainer.removeViewAt(0);
    mWebView.destroyDrawingCache();
    mWebView.destroy();
    mWebView = null;
    System.gc(); 
    ```

理想的做法是在加载下一页之前删除 JNI 表中的旧条目，但我发现没有办法这样做——一旦调用了 URL，尽管我已经保存了资产目录引用试过了。也许我错过了一些东西，或者在更高版本的 Android 中正在等待修复？如果做不到这一点，即使为每个页面销毁和创建新的 WebView 会对性能产生负面影响并且会使设计复杂化，但如果页面可以在自己的线程中创建并持有自己的资产引用而不是主线程，那么也许这会起作用（前提是这些线程可以在页面更改期间停止）。

***更新***

我尝试在单独的线程中创建我的 WebView 并得到错误“*必须在 UI 线程上调用所有 WebView 方法。WebView 的未来版本可能不支持在其他线程上使用。* ”。我假设“UI 线程”是指主线程。这个帖子似乎支持：

[无法创建线程中的 WebView](https://stackoverflow.com/questions/8353840/a-webview-in-a-thread-cant-be-created)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:21:50.913

我想出了一种解决方法，可以避免内存泄漏，但代价是存储的数据量增加了一倍。基本上资产目录的所有内容都必须复制到内部或外部存储，而 HTML 页面必须从这些存储目录加载到 WebView。

**内部存储器**

*   目标目录： **mContext.getFilesDir();**
*   例如。*/data/data/com.package.name/files*
*   HTML/CSS/Javascript 代码对用户隐藏
*   如果卸载应用程序，代码将被删除
*   如果 <audio> 或 <video> 标签要与 MediaPlayer 正常工作，媒体文件必须放在根目录而不是子目录中；如果放置在子目录中，文件只能通过 Javascript 使用 URL 重定向来触发 [ 例如。location.href=audioNodes.src；] 而不是播放 [ audioNodes.play(); ] 并在 WebViewClient.shouldOverrideUrlLoading 中捕获该 URL 并将其分配给 MediaPlayer 变量（子目录似乎没有以常规方式运行）。

**外置储存**

*   目标目录：**new File(mContext.getExternalFilesDir(STORAGE_SERVICE).getAbsolutePath());**
*   例如。*/mnt/sdcard/Android/data/com.package.name/files/storage*
*   用户可以看到 HTML/CSS/Javascript 代码，揭示代码的内部工作原理
*   需要存在 SD 卡（如果手机使用外部卡）并且没有写保护
*   如果卸载应用程序，代码将被删除
*   子目录中的媒体文件不需要特殊处理，将直接与 MediaPlayer 一起使用（按照惯例）

以下是将指定目录/子目录的内容从资产文件夹传输到存储（在本例中为内部）的示例方法。如果遇到子目录，会递归调用向下钻取。种子调用必须通过**""**作为 sourceDirName。

注意：正如所写，仅适用于深度为 1 的子目录，并且文件通过包含“。”与目录区分开来。名称和扩展名之间的字符 - 如果此测试不适合您，您可能需要使用不同的测试。不能在资产成员上使用像*if (new File(sourceFileNames[i]).isDirectory())*这样的测试，因为它们不是真正的文件；来自 AssetManager 文档：'*文件 ... 已作为简单的字节流与应用程序捆绑在一起。*'

```
private void copyAssetsToStorage(String sourceDirName)
{
    // /data/data/com.package.name/files
    try
    {
        String[] sourceFileNames = mContext.getAssets().list(sourceDirName);
        File     targetDir       = mContext.getFilesDir();

        if (sourceDirName != "")
        {
            sourceDirName += "/";
            targetDir      = new File(targetDir, sourceDirName);
            targetDir.mkdir();
        }

        targetDir.setReadable(true, false);
        if (sourceFileNames != null)
        {
            byte[]           buffer;
            int              length;
            InputStream      inStream;
            File             outFile;
            FileOutputStream outStream;
            for (int i = 0; i < sourceFileNames.length; i++)
            {
                if (sourceFileNames[i].contains(".") == false)
                {
                    // Recursive call to drill down
                    copyAssetsToStorage(sourceFileNames[i]);
                }
                else
                {
                    inStream  = mContext.getAssets().open(
                                sourceDirName + sourceFileNames[i]);
                    outFile   = new File(targetDir, sourceFileNames[i]);
                    outStream = new FileOutputStream(outFile, false);
                    buffer    = new byte[8192];
                    while ((length = inStream.read(buffer)) > 0)
                    {
                        outStream.write(buffer, 0, length);
                    }
                    inStream.close();
                    inStream = null;
                    outStream.flush();
                    outStream.close();
                    outStream = null;
                    outFile.setReadable(true, false);
                }
            }
        }
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    }

}   // copyAssetsToStorage 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T13:34:45.997

试试这个

```
WebSettings settings = webvew.getSettings();
settings.setAppCacheEnabled(false);
settings.setCacheMode(WebSettings.LOAD_NO_CACHE);
settings.setDatabaseEnabled(false);
settings.setDomStorageEnabled(false);
settings.setGeolocationEnabled(false);
settings.setPluginsEnabled(false);
settings.setSaveFormData(false);
settings.setSavePassword(false); 
```

在 webview 中加载 html 之前，我使用 loadDataWithBaseURL 而不是 loadUrl。

loadUrl 只能在您在 webview 中加载 Web 服务器时使用，否则会导致内存泄漏。

它对我有用

# c# - 检索数据库兼容级别 - 相同服务器/数据库、不同用户的不同结果

> ID：12803312
> 
> 赞同：3
> 
> 时间：2012-10-09T15:21:15.163
> 
> 标签：c#, sql-server, smo

我有以下代码来确定 SQL Server 数据库的兼容性级别：

```
Microsoft.SqlServer.Management.Smo.Server server = new Server(myServerName);
if (!server.Databases.Contains(database)) 
  { throw new ArgumentException("Specified database ('" + myDBName+ "') not found on '" + myServerName + "'"); }

string connstr = string.Format("Data Source={0};" +
   "Persist Security Info=False;" +
   "User ID={1};" +
   "Password={2};Enlist=False;", myServerName, username, password);
server.ConnectionContext.ConnectionString = connstr;

Microsoft.SqlServer.Management.Smo.Database db = server.Databases[myDBName];
DataSet ds = db.ExecuteWithResults(@"select compatibility_level 
           from sys.databases where name=db_name()"); 
```

我有两个用户，其中一个能够运行此代码并取回正确的值。另一个用户运行此代码，使用完全相同的凭据连接到同一服务器/数据库，并且返回的 DataSet 不包含任何行。

两个用户之间可能有什么区别会导致同一查询没有返回结果？有没有更好的方法来获得数据库兼容性？

顺便说一句，此代码在 SQL Server 2005 到 2012 上运行/工作。

**编辑：**我应该指出 myServerName、myDBName、用户名和密码总是相同的——唯一的区别是运行代码的两个不同的 Windows 用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:08:54.700

我怀疑返回结果的用户具有授予其登录名的 VIEW_ANY_DEFINITON 权限。将此权限授予其他用户，他应该得到结果。

# php - 如何从 DOM 中删除无效元素？

> ID：12803321
> 
> 赞同：1
> 
> 时间：2012-10-09T15:21:31.103
> 
> 标签：php, javascript, html, dom, xpath

我们有以下代码列出了`$value`找到的 xpath。

我们检测到给定 URL（见图片）一个非标准标签`td1`，该标签另外没有结束标签。正如您在下面的屏幕截图中看到的那样，可能是网站开发人员故意将其放在那里。

此元素会产生识别节点的正确 XPath 的问题。

一个损坏的 Xpath 示例：

```
/html/body/div[2]/div[2]/table/tr[2]/td/table/tr[1]/td[2]/table/tr[2]/td[2]/table[3]/tr[2]/**td1**/td[2]/span/u[1] 
```

（如您所见，td1 在 Xpath 中被识别和链接）

我们认为通过删除这个元素可以帮助我们构建我们所追求的有效 XPath。

一个有效的例子是

```
/html/body/div[2]/div[2]/table/tr[2]/td/table/tr[1]/td[2]/table/tr[2]/td[2]/table[3]/tr[2]/td[2]/span/u[1] 
```

**我们如何才能删除 DOMXpath 中的先前加载？你有其他方法吗？**

我们想删除所有可能不是 td1 的无效标签，如 h8、diw 等...

```
private function extract($url, $value) {

        $dom = new DOMDocument();

        $file = 'content.txt';
        //$current = file_get_contents($url);
        $current = CurlTool::downloadFile($url, $file);
        //file_put_contents($file, $current);

        @$dom->loadHTMLFile($current);

        //use DOMXpath to navigate the html with the DOM
        $dom_xpath = new DOMXpath($dom);

        $elements = $dom_xpath->query("//*[text()[contains(., '" . $value . "')]]");
        var_dump($elements);
        if (!is_null($elements)) {

            foreach ($elements as $element) {
                var_dump($element);
                echo "\n1.[" . $element->nodeName . "]\n";

                $nodes = $element->childNodes;
                foreach ($nodes as $node) {
                    if( ($node->nodeValue != null) && ($node->nodeValue === $value) ) {
                        echo '2.' . $node->nodeValue . "\n";
                        $xpath = preg_replace("/\/text\(\)/", "", $node->getNodePath());
                        echo '3.' . $xpath . "\n";
                    }
                }
            }
        }
    } 
```

![在此处输入图像描述](../Images/b3411fb4d7985f1c4f4fa421eb6bc464.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:24:50.667

Sooo...也许`str_replace($current, "<td1 va-laign=\"top\">", "")`可以做到这一点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:30:45.450

您可以使用 XPath 找到有问题的节点并将其删除，同时将其子节点提升到其在 DOM 中的位置。那么你的路径将是正确的。

```
$dom_xpath = new DOMXpath($dom);
$results = $dom_xpath->query('//td1'); // (or any offending element)
foreach ($results as $invalidNode)
{
    $parentNode = $invalidNode->parentNode;
    while ($invalidNode->childNodes)
    {
        $firstChild = $invalidNode->firstChild;
        $parentNode->insertBefore($firstChild,$invalidNode);
    }
    $parentNode->removeChild($invalidNode);
} 
```

**编辑：**

您还可以通过使用有效元素列表并将其否定来构建违规元素列表。

```
// Build list manually from the HTML spec:
// See: http://www.w3.org/TR/html5/section-index.html#elements-1
$validTags = array();

// Convert list to XPath:
$validTagsStr = '';
foreach ($validTags as $tag)
{
    if ($validTagsStr)
    {   $validTagsStr .= ' or ';    }
    $validTagsStr .= 'self::'.$tag;
}
$results = $dom_xpath->query('//*[not('.$validTagsStr.')'); 
```

# asp.net-mvc - 页面检查器报告外部文件已被修改

> ID：12803322
> 
> 赞同：1
> 
> 时间：2012-10-09T15:21:35.800
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4, visual-studio-2012

我在 Visual Studio 2012 中的 Page Inspector 遇到了一个奇怪的问题。

Page Inspector 在任何新创建的 ASP.NET MVC 4 项目上都可以正常工作。

然而，在我们复杂的 MVC 项目中，每当我们启动 Page Inspector（无论是否运行调试）时，在网页加载后，我们都会在 Page Inspector 窗口的顶部收到一条黄底黑字的消息，上面写着：

```
Files in external projects have been modified and might impact the
current page. Click here to build the solution and refresh the
browser. (Ctrl+Alt+Enter) 
```

如果我确实单击了文本，它会短暂暂停以说“正在构建”，然后在同一位置显示以下内容：

```
There were errors during the build. See the Output Window for details. 
```

如果我查看“输出”窗口，则只有成功构建的正常报告。

这种行为在运行相同解决方案的不同计算机上是可重复的。我想不出项目中最近发生的任何明显的变化可能会导致这个问题。文本始终显示在项目的所有页面上。

这是一种新行为，解决方案已经开发了几个星期，我一直在运行 Page Inspector 没有问题。今天注意到了这条消息。

我们在 64 位 Windows 8 Enterprise 上运行 RTM 版本的 Visual Studio 2012。

关于如何摆脱奇怪的 Page Inspector 警告的任何想法？它指的是哪些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:36:20.043

在尝试恢复到各种以前版本的源代码（git 很棒！）之后，我得出结论，当我向解决方案中添加一个 Windows 控制台应用程序时，问题就开始了。如果我从解决方案中完全排除该项目，问题就会消失。我仍然不明白为什么会这样。MVC 项目不引用控制台项目。对我来说，这似乎是 Visual Studio 中的一个错误。

# php - 限制保存到其他表的数据数量

> ID：12803324
> 
> 赞同：0
> 
> 时间：2012-10-09T15:21:48.390
> 
> 标签：php, mysql

我必须表：

```
tb_document           tb_sentence
=================     ===========================================
|doc_id|document|     | id | sentence_id |sentence | doc_id|
=================     =========================================== 
```

我想从中获取`document`数据`tb_document`。数据是文本，然后将数据解析成句子。我只需要为 tb_sentence 中的每个文档存储最多 50 个句子。

这是代码：

```
foreach ($content as $doc_id => $sentences){ //$content is variable that save document from tb_document
   $i = 0;
   foreach(preg_split('/\\.\\s*/', $sentences) as $current_sentence){
      $q = mysql_query("INSERT INTO tb_sentence SET doc_id = {$doc_id}, sentence_id = {$i}, sentence = '{$current_sentence}'") or die(mysql_error());
      $i<51; $i++;
   }
} 
```

但是，它仍然保存整个数据。请帮我。谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:29:44.297

在您的代码中，您与`$i`51 进行比较，但对比较不做任何事情。尝试：

```
foreach ($content as $doc_id => $sentences){ //$content is variable that save document from tb_document
   $i = 0;
   foreach(preg_split('/\\.\\s*/', $sentences) as $current_sentence){
      $q = mysql_query("INSERT INTO tb_sentence SET doc_id = {$doc_id}, sentence_id = {$i}, sentence = '{$current_sentence}'") or die(mysql_error());

      if(++$i >= 50) 
          break; 
   }
} 
```

该`break`语句将退出`foreach`循环。

# visual-studio-2010 - 在 Visual Studios 2010 中调试 winForms 项目时无法访问临时文件

> ID：12803326
> 
> 赞同：2
> 
> 时间：2012-10-09T15:21:53.740
> 
> 标签：visual-studio-2010, visual-studio, clickonce, visual-studio-debugging, certificate

我在 vb.net visual studios 2010 中创建了几个程序。我已经在这些程序上工作了几个月，没有任何问题。最近我开始遇到一个问题，在 VS 中调试时我无法再访问我的临时目录。我不能再使用 My.Settings 因为这些使用那些临时文件。这是我得到的错误：

> 无法保存设置：加载配置文件时出错：找不到路径“C:\Users\USERNAME\AppData\Local\PROGNAME\PROGNAME.exe_Url_gty0snnfox5ji5xgprklljwb0e0mthek\1.0.0.0\nl3u0fw2.tmp”的一部分。(C:\Users\USERNAME\AppData\Local\PROGNAME\PROGNAME.exe_Url_gty0snnfox5ji5xgprklljwb0e0mthek\1.0.0.0\user.config)*

虽然这个文件在那里。

我在尝试使用我的 Web 服务时也遇到了错误。我收到此错误：

> 访问临时目录被拒绝。运行 XmlSerializer 的身份“DOMAIN\Username”没有足够的权限来访问临时目录。CodeDom 将使用进程使用的用户帐户进行编译，因此如果用户无权访问系统临时目录，您将无法编译。使用 Path.GetTempPath() API 找出临时目录位置。*

正如错误所说，我使用了 Path.GetTempPath() 并且我正在尝试访问：>“C:\Users\USERNAME\AppData\Local\Temp\”

我已尝试访问这些文件夹并确保我已设置安全性以允许所有人完全控制。我相信这是 VS 的问题，而不是我的程序，因为我在所有程序上都遇到了同样的问题，其中一些程序我几个月都没有打开过。我对VS进行了修复。

我想不出可能会发生什么变化导致它突然停止工作。我去了一家客户设施，在那里我不得不更改一些网络设置，但一切都应该恢复到现在的状态。我的临时安全证书已过期，但我创建了一个新证书，现在我用来签署这些应用程序的证书位于证书管理器上我受信任的根目录中，并且看起来是有效的。我还应该提到这是一次单击部署，并且部署在我的计算机和其他计算机上都可以正常工作，只有在调试时我才会遇到这些问题。

我已经运行了好几个星期，花了无数个小时寻找解决方案，结果遇到了难题。有没有人有什么建议？

提前感谢您的帮助和时间！如果我能澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:26:14.577

事实证明，问题出在我的 user.config 文件的文件路径中的某个文件夹以某种方式被更改的事实。不知何故，一个 .vshost 被扔进了其中一个文件夹名称。我仍然不知道这是如何发生的以及导致这种情况发生的原因，并且我不能 100% 确定我已经找到了问题的真正根源，但现在，我能够再次调试。我将文件名改回了应有的名称，并且错误已停止。现在让我们只希望文件名不会再变回来。

# python - Python整数前缀范围算法

> ID：12803337
> 
> 赞同：3
> 
> 时间：2012-10-09T15:22:39.967
> 
> 标签：python, regex, type-conversion

这是我的问题。我有各种长度不同的整数输入，但我只想打印某些数字前缀。前缀范围是 20000-20150 所有五位数字。到目前为止，我有：

```
print 20000 <= prefix <= 20150 
```

这很好，但是我如何使用 Python 在数字中找到或捕获前缀“20000”。

示例：20000201501

使用下面的代码将不起作用，在这种情况下，因为有两个实例存在前缀值，我只想要第一个前缀。

```
obj = 20000201501
if prefix in obj
    print prefix 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:24:51.580

您可以将对象设为字符串（使用`str`），将前 5 个字符切掉（作为前缀），然后将其转换回整数（使用`int`）：

```
 prefix = int(str(obj)[:5]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:25:22.710

很简单：

```
>>> num = 20000201501
>>> print int(str(num)[:5])
20000 
```

所以，你需要这样的东西：

```
def prefix(num):
    return int(str(num)[:5])

print 20000 < prefix(20000201501) < 20150 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:25:07.170

```
def valid_prefix(number):
    return 20000 <= int(number) <= 20150

#obj is string:
obj = "20000201501"
print valid_prefix(obj[:5])

#obj is number:
obj = 20000201501
print valid_prefix(str(obj)[:5]) 
```

# java - 如何将 Java 字符串传递给 JSP 页面中的 JavaScript 函数

> ID：12803341
> 
> 赞同：1
> 
> 时间：2012-10-09T15:22:50.240
> 
> 标签：java, jsp

我希望将一个字符串从我的 Java 传递给一个 javascript showContent 函数。Java 和 javascript 都包含在 JSP 页面中。该字符串`strLine`包含我想使用 showContent 函数显示的 XML 内容。

我的爪哇

```
 try{    
        //Open the file that is the first command line parameter
            FileInputStream fstream = new FileInputStream(table.get(xmlMatch));                 

            // Get the object of DataInputStream
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;

        //Read File Line By Line
            while ((strLine = br.readLine()) != null)   
            {
                out.println (strLine);
            } 
```

Javascript（我必须感谢彼得在另一个[问题](https://stackoverflow.com/questions/12784193/css-javascript-to-display-content-of-next-previous-div-on-user-click)中为我提供了这个）

```
<script type="text/javascript" language="JavaScript">
function showContent()
{
document.getElementById('showContent').innerHTML = "printed content";
}
</script> 
```

我尝试将上述“打印内容”替换为`"strLine";` `(strLine);`和`("strLine");`

我还尝试使用和使用设置`strLine`为会话属性 ，但结果是 null 打印到屏幕上。`session.setAttribute("strLine", strLine);``"<%=strLine%>";`

对此的任何帮助都会很棒。

的HTML

```
<a href="#" onclick="showContent()">Next! <%=keywords%> concept </a>
<div id="showContent"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:36:28.427

`out.println`您应该放入一个变量（可能是一个 StringBuilder ），而不是用 打印它。为此，您必须：

在正确的范围内声明变量（可能在 JSP 的开头）

```
StringBuilder contentInnerHtml = new StringBuilder(); 
```

然后将文件的文本附加到这个新变量：

```
while ((strLine = br.readLine()) != null)   
{
    contentInnerHtml.append(strLine);
} 
```

最后，在代码的 javascript 部分返回它的值（带`toString()`）：

```
<script type="text/javascript" language="JavaScript">
function showContent()
{
    document.getElementById('showContent').innerHTML = "<%=contentInnerHtml.toString()%>";
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:39:44.073

如果您的 html 在您的 try/catch 块中，`<%=strLine%>`则应该可以正常工作。如果不是，那么将其分配为会话属性也可以，但是，您还需要从会话中访问它：

前任：

```
 try{    
    //Open the file that is the first command line parameter
        FileInputStream fstream = new FileInputStream(table.get(xmlMatch));                 

        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

    //Read File Line By Line
        while ((strLine = br.readLine()) != null)   
        {
%>
<div id="xxx"><%= strLine %></div>
<%
            out.println (strLine);
        } 
```

但这是非常丑陋的代码，难以阅读/调试。

```
 try{    
    //Open the file that is the first command line parameter
        FileInputStream fstream = new FileInputStream(table.get(xmlMatch));                 

        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

    //Read File Line By Line
        while ((strLine = br.readLine()) != null)   
        {
           session.setAttribute("strLine", strLine);  
           out.println (strLine);

        }  
  } // end of try
  catch( ... ){}
%>

<div id="xxx"> <%= session.getAttribute( "strLine" ) %></div> 
```

但是，在第二种情况下，您只会显示文件的最后一行，所以我不完全确定您要完成什么。

如果您希望显示全文，也许您可​​以使用：

```
 StringBuffer strLineBuf;

    //Read File Line By Line
        while ((strLine = br.readLine()) != null)   
        {
            strLineBuf.append(strLine).append("<br/>");
        }  
        session.setAttribute( "strLine", strLineBuf.toString() ); 
```

然后在您的 try/catch 完成后，在您的 html 代码中：

```
 <div id="xxx"><%= session.getAttribute( strLine ) %> </div> 
```

# java - 打开 Office Writer 搜索并查找字符串并移动光标

> ID：12803344
> 
> 赞同：3
> 
> 时间：2012-10-09T15:23:04.960
> 
> 标签：java, api, search, openoffice-writer, uno

如果任何人都可以帮助使用带有 Java 的 UNO API 在开放式办公室作家文档中搜索字符串的方法，那将非常有帮助。一旦它搜索字符串并找到字符串，它就可以（甚至隐藏）将光标移动到该字符串。

然后我可以使用下面的 getPageNumber 方法返回页码并将该页打印在抬头纸上。

非常感谢任何帮助

```
public int getNumberOfPages()
{
    XController xController = OODocument.getCurrentDocument().getXFrame().getController();

    XTextViewCursorSupplier supTextViewCursor =
                (XTextViewCursorSupplier) UnoRuntime.queryInterface(
                    XTextViewCursorSupplier.class, xController);

    XTextViewCursor curTextView = supTextViewCursor.getViewCursor();
    XPageCursor curPage =
                (XPageCursor) UnoRuntime.queryInterface(
                    XPageCursor.class, curTextView);
    curPage.jumpToLastPage();
    System.out.println("pages = " + curPage.getPage());
    return curPage.getPage();
}

public int getPageNumber()
{
    XController xController = OODocument.getCurrentDocument().getXFrame().getController();

    XTextViewCursorSupplier supTextViewCursor =
                (XTextViewCursorSupplier) UnoRuntime.queryInterface(
                    XTextViewCursorSupplier.class, xController);

    XTextViewCursor curTextView = supTextViewCursor.getViewCursor();

    XPageCursor curPage =
                (XPageCursor) UnoRuntime.queryInterface(
                    XPageCursor.class, curTextView);

    System.out.println("current page = " + curPage.getPage());
    return curPage.getPage();
} 
```

我知道可以使用以下组合来完成

```
 curTextView.setString("zzzzz");
    curTextView.getText();
    curTextView.gotoRange(arg0, arg1) 
```

或 XTextRange。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:04:40.603

万一有人需要回答。我解决了它并发布在下面。

```
public int searchPageNumber()
{
    XController xController = OODocument.getCurrentDocument().getXFrame().getController();

    XTextViewCursorSupplier supTextViewCursor =
                (XTextViewCursorSupplier) UnoRuntime.queryInterface(
                    XTextViewCursorSupplier.class, xController);

    XTextViewCursor curTextView = supTextViewCursor.getViewCursor();

    // gets the page cursor and assigns the text view cursor to the page
    XPageCursor curPage =
                (XPageCursor) UnoRuntime.queryInterface(
                    XPageCursor.class, curTextView);
    System.out.println("The current page number is " + curPage.getPage());

    // gets the model
    XModel model = xController.getModel();
    // assigns model to the document
    XTextDocument xTextDocument = (XTextDocument) UnoRuntime.queryInterface(XTextDocument.class, model);
    // Xsearchable so we can search the text
    XSearchable xSearchable = (XSearchable) UnoRuntime.queryInterface(XSearchable.class, xTextDocument); 
    XSearchDescriptor xsd = (XSearchDescriptor) xSearchable.createSearchDescriptor(); 

    xsd.setSearchString("zzzzz");

    XInterface xfi = (XInterface) xSearchable.findFirst(xsd); 
    if (xfi != null) { 
        XTextRange xStart = (com.sun.star.text.XTextRange) UnoRuntime.queryInterface( 
                com.sun.star.text.XTextRange.class, xfi); 

        curTextView.gotoRange(xStart, false); 
    } 

    System.out.println("current page = " + curPage.getPage());
    return curPage.getPage();
} 
```

# java - 访问非覆盖的超类方法时使用“super”关键字

> ID：12803346
> 
> 赞同：8
> 
> 时间：2012-10-09T15:23:07.063
> 
> 标签：java, coding-style, super

我试图在 Java 中掌握继承的窍门，并了解到当覆盖子类中的方法（和隐藏字段）时，仍然可以使用“super”关键字从超类访问它们。

我想知道的是，'super' 关键字是否应该用于非覆盖方法？

有什么区别（对于非覆盖方法/非隐藏字段）？

我在下面整理了一个例子。

```
public class Vehicle {
    private int tyreCost;

    public Vehicle(int tyreCost) {
         this.tyreCost = tyreCost;
    }

    public int getTyreCost() {
        return tyreCost;
    }        
} 
```

和

```
public class Car extends Vehicle {
    private int wheelCount;

    public Vehicle(int tyreCost, int wheelCount) {
        super(tyreCost);
        this.wheelCount = wheelCount;
    }   

    public int getTotalTyreReplacementCost() {
        return getTyreCost() * wheelCount;
    }   
} 
```

具体来说，鉴于`getTyreCost()`尚未被覆盖，应该`getTotalTyreReplacementCost()`使用`getTyreCost()`, 还是`super.getTyreCost()`?

我想知道是否应该在访问超类的字段或方法的所有实例中使用 super（以在代码中显示您正在访问超类），或者只在被覆盖/隐藏的实例中使用（以便它们脱颖而出）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T16:11:46.397

不要使用`super`关键字来引用其他未被覆盖的方法。它使其他试图扩展您的类的开发人员感到困惑。

让我们看一些*确实*以这种方式使用`super`关键字的代码。这里我们有 2 个类：`Dog`和`CleverDog`：

```
/* file Dog.java */
public static class Dog extends Animal {

    private String name;

    public Dog(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

}

/* file CleverDog.java */
public class CleverDog extends Dog {

    public CleverDog(String name) {
         super(name);
    }

    public void rollover() {
        System.out.println(super.getName()+" rolls over!");
    }

    public void speak() {
        System.out.println(super.getName() + " speaks!");
    }

} 
```

现在，假设您是该项目的新开发人员，并且您需要为电视上的一只聪明的狗提供一些特定的行为：这只狗必须完成所有的把戏，但应该使用它虚构的电视名称。为此，您覆盖该`getName(...)`方法...

```
/* file DogOnTv.java */
public class DogOnTv extends CleverDog {

    String fictionalName;

    public DogOnTv(String realName, String fictionalName) {
        super(realName);
        fictionalName = fictionalName;
    }

    public String getName() {
        return fictionalName;
    }

} 
```

...并落入由原始开发人员设置的陷阱以及他们对`super`关键字的不寻常使用！

上面的代码不起作用 - 因为在原始`CleverDog`实现中，是使用关键字`getName()`调用的。`super`这意味着它总是调用`Dog.getName()`- 与任何覆盖无关。因此，当您使用新`DogOnTv`类型时...

```
 System.out.println("Showcasing the Clever Dog!");
    CleverDog showDog = new CleverDog("TugBoat");
    showDog.rollover();
    showDog.speak();

    System.out.println("And now the Dog on TV!");
    DogOnTv dogOnTv = new DogOnTv("Pal", "Lassie");
    dogOnTv.rollover(); 
```

...你得到错误的输出：

```
Showcasing the Clever Dog!
Tugboat rolls over!
Tugboat speaks!

And now the Dog on TV!
Pal rolls over!
Pal speaks! 
```

`super`当你重写一个方法时，这不是通常的预期行为，所以你应该避免在不属于它的地方使用关键字造成这种混乱。

但是，如果这实际上是您想要的行为，请改用`final`关键字 - 以清楚地表明该方法不能被覆盖：

```
/* file CleverDog.java */
public class CleverDog extends Dog {

    public CleverDog(String name) {
         super(name);
    }

    public final String getName() { // final so it can't be overridden
        return super.getName();
    }

    public void rollover() {
        System.out.println(this.getName()+" rolls over!"); // no `super` keyword
    }

    public void speak() {
        System.out.println(this.getName() + " speaks!"); // no `super` keyword
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:27:16.743

通过不使用`super`关键字访问`getTyreCost`.

但是您应该将您的成员设置为私有，并且只使用 getter 方法。

Using`super`关键字应该保留给需要显式调用父方法的构造函数和重写方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:27:53.380

这将取决于您计划如何使用代码。如果您指定`super.getTyreCost()`然后覆盖该方法。您仍将调用超类上的方法，而不是覆盖的版本。

在我看来，调用 super 可能会在以后导致更多的混乱，所以最好仅在您有明确需要时才指定。但是，对于您在此处介绍的情况 - 行为不会有任何差异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T15:30:37.103

这取决于您的需求和愿望。使用`super`强制编译/应用程序忽略当前类中的任何潜在方法。如果你想传达你只想使用父母的方法，那么使用`super`是合适的。它还将防止将来对您的类进行修改以意外覆盖父方法，从而破坏您的预期逻辑。

然而，这些情况相当罕见。在课堂上到处使用 super 会导致代码非常混乱和混乱。在大多数一般情况下，仅在您自己的类中调用该方法并允许编译器/jvm 确定需要调用哪个方法（超级或本地）更合适。它还允许您干净地覆盖/修改/操作超级的返回值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T15:26:13.333

如果使用`super`，则明确告诉使用超类方法（无论子类是否具有覆盖方法），否则首先 jvm 检查子类中的方法（如果有则覆盖方法），如果不可用则使用超类方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T15:26:47.517

覆盖意味着从具有相同方法签名的子类中的超类重新定义方法。在您的情况下，该`getTyreCost()`方法尚未被覆盖，您尚未在子类中重新定义该方法，因此无需使用`super.getTyreCost()`，只会`getTyreCost()`做（就像`super.getTyreCost()`会做同样的方式）。`super`当方法已被覆盖，并且您希望子类中的方法调用在超类中实现时使用关键字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T15:32:21.787

从技术上讲，在这种情况下调用的是继承版本，其实现实际上是由父类提供的。

在某些情况下，您必须使用`super`关键字。例如，如果`Car`重写了该方法，以提供其自身的不同实现，但您需要调用父类提供的实现，那么您将使用`super`关键字。在这种情况下，您不能忽略`super`关键字，因为如果您这样做了，那么您将调用子类本身提供的实现。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-09T15:25:43.177

建议对继承类的进一步更改不需要添加超级​​限定符，并且如果错过也可以防止错误。

# android - 在 Android PreferenceActivity 中应用复选框样式

> ID：12803353
> 
> 赞同：2
> 
> 时间：2012-10-09T15:23:25.457
> 
> 标签：android, android-preferences, preferenceactivity

我正在编写一个 SDK 10+ 的应用程序。我希望我的活动中的所有复选框以及我的 PreferenceActivity 看起来都一样。我创建了一个 Theme.Black 父主题。我创建了 android:Widget.CompoundButton.CheckBox 的子样式并将 android:checkboxStyle 设置为该子主题。我在应用程序清单元素中的整个应用程序中应用了我的主题：

```
android:theme="@style/AppTheme" 
```

当我查看主 Activity 时，复选框样式已按预期应用，但 PreferenceActivity 中的复选框没有样式。我的问题是：

*   是否可以设置偏好的次要部分，而不必为每个部分指定全新的布局？
*   更一般地说，我想对首选项中显示的其他控件执行此操作，例如切换或开关。那可能吗？（我的猜测是，一个解决方案几乎也可以应用于这些特定问题）

我知道嵌套首选项存在问题，但这个问题适用于顶层的首选项。任何帮助是极大的赞赏。我已经在这个墙上撞了几个小时了......

这是我到目前为止所拥有的：

首选项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <CheckBoxPreference
        android:key="checkbox1"
        android:summary="This is a themed checkbox preference"
        android:title="Checkbox 1" />

</PreferenceScreen> 
```

ThemedPreferenceActivity.java

```
public class ThemedPreferencesActivity extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <CheckBox
        android:id="@+id/checkBox1"
        android:text="CheckBox"
        android:checked="true"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" style="@style/AppTheme.Preference.Checkbox" />

</LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

} 
```

样式.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="android:Theme.Black">    
        <item name="android:checkboxStyle">@style/AppTheme.Preference.Checkbox</item>
    </style>

    <style name="AppTheme.Preference.Checkbox" parent="android:Widget.CompoundButton.CheckBox">
        <item name="android:button">@drawable/pref_checkbox</item>
        <item name="android:background">#FF0000</item>
    </style>
</resources> 
```

pref_checkbox.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_checked="true" android:drawable="@android:drawable/ic_menu_call" />
    <item android:state_checked="false" android:drawable="@android:drawable/ic_menu_camera" />
</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:00:40.563

看起来问题出在以下行：

```
<style name="AppTheme.Preference.Checkbox" parent="android:Widget.CompoundButton.CheckBox">
    <item name="android:button">@drawable/pref_checkbox</item>
    <item name="android:background">#FF0000</item> <---- RIGHT HERE
</style> 
```

看起来像是指定导致复选框行为不端。事实证明，无论如何我都不需要它（事实上，如果我想要的话，我意识到无论如何我都会以“ListView”风格来做）所以，问题解决了。

# image - 如何以垂直和水平居中 2 图像

> ID：12803358
> 
> 赞同：0
> 
> 时间：2012-10-09T15:23:46.267
> 
> 标签：image, center, centering

**我需要帮助...**

看这里...

> [http://jsbin.com/ititac/10/edit](http://jsbin.com/ititac/10/edit)

如您所见，**水平图像已经居中..**

但问题是两个垂直图像没有居中......

另请注意，它们不是两张图片。

*它可能是数百个示例图像......*

谢谢希望你能帮我解决这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:44:45.547

试试这个css：希望它能解决你的问题：

```
#product_thumbs .product_thumb {
float: left;
padding: 5px;
border: 1px dashed #B52020;
margin: 0 10px 10px 0;
width: 90px;
height: 90px;
overflow: hidden;
}

#product_thumbs .product_thumb img {
  width: 90px;
  position: relative;
  top: 25%;
  left: 30%;
  height: 80%;
  width: 90%;
  margin: -15% 0 0 -25%;
} 
```

这是演示

```
http://jsbin.com/ititac/18/edit 
```

希望下面的链接有用：

```
http://www.vanseodesign.com/css/vertical-centering/ 
```

# ruby-on-rails - Rails 3：update_attributes 将列设置为“nil”

> ID：12803361
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:23:53.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我遇到的问题是方法 update_attributes。编码：

n 设置为 Active Record 对象。 `n = Notification.find(notification_id)`

然后，使用散列通知选项更新 n。 `n.update_attributes(notification_options)`

我遇到的问题是当我 `raise n.inspect` 显示这两个字段设置为零时。此外，在数据库中，这两个字段为空。为什么它不会更新属性？

让我知道是否需要更具体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:57:12.403

这是因为您使用的是`attr_accessor`，而不是`attr_accessible`，我猜。请向我们展示您的通知模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:32:24.797

所以最终问题出在模型中的一条线用于正在使用的宝石。它需要一种特定的格式，如果它不匹配，它会导致它设置为 nil。

# php - 如何使用graph api发表评论

> ID：12803362
> 
> 赞同：1
> 
> 时间：2012-10-09T15:24:03.630
> 
> 标签：php, facebook, json, facebook-graph-api

如果我有 10 个朋友，我如何获取每个朋友的最新状态，然后对所有这些状态发表评论？

你如何获得帖子ID？

```
 $facebook->api('/'.$POST_ID.'/comments','post',array('message' => $comment)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:02:48.270

我找不到从 Graph API 获取按日期排序的朋友状态的方法，因此您必须使用 FQL。此查询将为您提供您朋友最近的 10 条状态更新：

```
SELECT uid,status_id,time,message FROM status WHERE uid IN 
    (SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY time DESC limit 10 
```

`UNIQUE`由于无法在 FQL中执行查询，因此无法保证这 10 个来自不同的朋友。如果您想确保您评论了 10 个独特朋友的状态，您必须请求更多结果并跟踪您在脚本中评论的帖子。

从这里，您可以遍历这些结果并设置`$POST_ID = $result['status_id']`然后执行上面的 API 调用。

如果这是针对您正在构建的公共应用程序，您需要考虑将这 10 个更新组合到一个 batch.request 中，以防止遇到 API 调用限制。

# unix - Unix-在重命名文件时将相同文件从多个目录复制到新目录

> ID：12803364
> 
> 赞同：2
> 
> 时间：2012-10-09T15:24:06.237
> 
> 标签：unix, loops, copying, renaming

我在名为 10,11,12,....45 的同一目录中有 36 个子目录和一个子目录 logs

在每个子目录（目录日志除外）中都有一个名为 log.lammps 的相同文件

我想知道是否有一种方法可以从每个子目录 10-45 复制每个 log.lammps 文件并将其放入子目录日志中，同时还将其源自的目录的编号添加到文件名的末尾

所以我正在寻找一个从每个子目录一个接一个地复制文件 log.lammps 的代码，每次文件被复制到目录日志中时，如果它来自子目录，文件名就会从 log.lammps 更改为 log.lammps10 10 并且当子目录 11 中的文件 log.laamps 被复制到日志中时，其名称更改为 log.lammps11 等。

任何帮助将不胜感激，因为现在我只处理 30-40 个文件，并且及时我将处理数百个文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:03:27.797

借助 shell 脚本的魔力，这很容易。我假设你有 bash 可用。在包含这些子目录的目录中创建一个新文件；将其命名为`copy_logs.sh`. 将以下文本复制粘贴到其中：

```
#!/bin/bash

# copy_logs.sh

# Copies all files named log.lammps from all subdirectories of this
# directory, except logs/, into subdirectory logs/, while appending the name
# of the originating directory.  For example, if this directory includes
# subdirectories 1/, 2/, foo/, and logs/, and each of those directories
# (except for logs/) contains a file named log.lammps, then after the
# execution of this script, the new file log.lammps.1, log.lammps.2, and
# log.lammps.foo will have been added to logs/.  NOTE: any existing files
# with those names in will be overwritten.

DIRNAMES=$( find . -type d | grep -v logs | sed 's/\.//g' | sed 's/\///g' | sort )

for dirname in $( echo $DIRNAMES )
do
    cp -f $dirname/foo.txt logs/foo$dirname
    echo "Copied file $dirname/foo.txt to logs/foo.$dirname"
done 
```

请参阅脚本的注释了解它的作用。保存文件后，您需要通过`chmod a+x copy_logs.sh`命令行命令使其可执行。在此之后，您可以通过在命令行上键入来执行它，`./copy_logs.sh`而您的工作目录是包含脚本和子目录的目录。如果将该目录添加到 $PATH 变量中，则`copy_logs.sh`无论您的工作目录是什么，您都可以进行命令。

（我用 GNU bash v4.2.24 测试了脚本，所以它应该可以工作。）

有关 bash shell 脚本的更多信息，请参阅任意数量的书籍或互联网站点；您可以从[Advanced Bash-Scripting Guide](http://tldp.org/LDP/abs/html/)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:04:14.440

沿着这条线的东西应该起作用：

```
for f in [0-9][0-9]/log.lammps; do
  d=$(dirname ${f})
  b=$(basename ${f})
  cp ${f} logs/${b}.${d}
done 
```

# backbone.js - 仅当我进入方法时才会填充主干模型变量

> ID：12803365
> 
> 赞同：0
> 
> 时间：2012-10-09T15:24:07.747
> 
> 标签：backbone.js

我遇到的情况是我的 fetch 工作正常，我可以看到骨干集合中的数据，如果我进入将项目从集合中分配给模型 var 或暂停一两秒的方法，一切都很好：this.member 的代码行被填充

```
this.member = this.members.get(1); 
```

. 如果我只是让代码运行，我最终会将一个空模型传递给我的视图。我不明白我错过了什么。访问集合之前是否需要绑定集合中的数据？我正试图爱上骨干，但到目前为止，她一直是个残忍的情妇……

`

```
//create the namespace
var Endeavor = {
    Models: {},
    Collections: {},
    Views: {},
    Templates: {}
};

Endeavor.Models.Member = Backbone.Model.extend({
    idAttribute: "Id"
});

Endeavor.Collections.Members = Backbone.Collection.extend({
    model: Endeavor.Models.Member,
    url: "Http://localhost:60000/api/members/" + "1", // $.cookie('UserId') 
    initialize: function () {
        console.log("Members collections init");
    }
});

Endeavor.Views.MemberView = Backbone.View.extend({
    id: "memberForm",
    template: "#memberTemplate",
    initialize: function () {
        console.log('init member view');
    },
    render: function () {
        console.log('memberView render called');
        console.log(this.model.toJSON());
        var html = $(this.template).tmpl();
        $(this.el).html(html);
        $("#Name").text = this.model.Name;
    }
});

jQuery(document).ready(function () {
    // router
    Endeavor.Router = Backbone.Router.extend({
        routes: {
            "": "lists",
        },

        lists: function () {
            this.members = new Endeavor.Collections.Members();
            this.members.fetch();

            this.member = this.members.get(1);

            var memberView = new Endeavor.Views.MemberView({ model: this.member });
            memberView.render();
            $("#content").html(memberView.el);
        }
    });
    // populate local variables
    var appRouter = new Endeavor.Router();
    Backbone.history.start();
}); 
```

`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:32:31.733

`Members.fetch`是异步调用。尝试`render`查看`members` `reset`事件，或`success`在方法中传递回调`fetch`，或调用`this.members.fetch({async: false})`. 有许多不同的选择。

# android - LinearLayout 可滚动多个 ListView

> ID：12803368
> 
> 赞同：0
> 
> 时间：2012-10-09T15:24:18.293
> 
> 标签：android, listview

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:textSize="15sp"
        android:textStyle="bold"
        android:textColor="@android:color/holo_blue_dark"
        android:text="@string/section_1" />

    <ListView
        android:id="@+id/lv_section_1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:textSize="15sp"
        android:textStyle="bold"
        android:textColor="@android:color/holo_blue_dark"
        android:text="@string/section_2" />

    <ListView
        android:id="@+id/lv_section_2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false" />

</LinearLayout> 
```

问题是当**第一部分**有很多项目并且占据整个屏幕时，我无法滚动查看**第二部分**。通过快速搜索，我发现我不能`ListView`在`ScollView`.

有没有办法让这个`LinearLayout`可滚动的，所以我可以看到所有可以添加的部分？我需要类似于*iOS UITableView*的东西，几个部分和标题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:40:53.030

好的，只是有一个包含多个部分的列表，我可以做些什么来解决我的问题很简单：

我只留下了一个`ListView`并创建了一个类`CustomAdapter`。并添加了不同类型的项目：

```
ArrayList<HashMap<String, String>> listItems = new ArrayList<HashMap<String, String>>();

HashMap map = new HashMap<String, String>();
map.put("type", "section");
map.put("title", "Section 1");
listItems.add(map);

map = new HashMap<String, String>();
map.put("type", "item");
map.put("title", "Item A");
map.put("detail", "Detail A");
listItems.add(map); 
```

将适配器设置为我的`ListView`：

```
CustomAdapter adapter = new CustomAdapter(context, R.layout.result_list, listItems);
ListView lv = (ListView) view.findViewById(R.id.resultlist);
lv.setAdapter(adapter); 
```

在我的文章`CustomAdapter`中，我为每种类型、部分或项目设置了不同的样式。请注意，我只是想要一些东西来区分`ListView`.

如果我的解决方案太难看，仍然接受这个问题的建议:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:31:37.820

对两个 ListView 使用 layout_weight="1" 和 layout_height="0dp" ，这会将您的整个屏幕分成两部分，以便您可以看到这两个部分。如果您必须将 TextViews 显示为列表视图顶部的标题，则采用上述权重和线性布局内部的两个线性布局，将 textview 和 listview 放置为垂直方向。

# c - 创建新文件时遇到问题

> ID：12803369
> 
> 赞同：0
> 
> 时间：2012-10-09T15:24:18.110
> 
> 标签：c, file-io

我的 C++ 代码中有一个简单的行来创建一个新文件：

```
string fileName = "test";

// Create a file named "test"
rc = pf->CreateFile(fileName.c_str()); 
```

* * *

内部`CreateFile`函数（`const char *fileName`作为参数，我有以下代码片段；

```
// Create the file in current working directory
char *path = NULL;
path = getcwd(path, 0);
path = strcat(path, "/");
path = strcat(path, fileName);
FILE *fHandle = fopen(path, "wb"); 
```

该字符串`path`包含要创建的文件的完整绝对路径。文件名为`test`. 但是，当我运行代码时，确实创建了文件，但是它的名称包含不可打印的字符（代码在以下两个命令之间运行）：

![在此处输入图像描述](../Images/7a9889b13c50077dc0d8edd5fb8f4c95.png)

请提出什么可能是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:34:16.973

从[man getcwd](http://linux.die.net/man/3/getcwd)：

> 作为 POSIX.1-2001 标准的扩展，如果 buf 为 NULL，Linux (libc4, libc5, glibc) getcwd() 使用 malloc(3) 动态分配缓冲区。在这种情况下，分配的缓冲区具有长度大小，除非大小为零，当 buf 被分配到必要的大小时。调用者应该释放（3）返回的缓冲区。

这意味着没有多余的空间`path`可以追加，并导致覆盖`path`指向的数组的边界，从而导致未定义的行为，并且可能是无法打印字符的原因。

要构建能够保存路径的缓冲区，您需要确定完整大小`malloc()`并构建它：

```
char *path;
path = getcwd(path, 0);
if (path)
{
    /* The '+2' is for null terminator and the '/'. */
    const size_t size = strlen(path) + strlen(fileName) + 2;
    char* fullPath = malloc(size);
    if (fullPath)
    {
        sprintf(fullPath, "%s/%s", path, fileName);
        /* fopen() ... */
        free(fullPath);
    }
    free(path);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:28:39.457

您的`path`变量可能不会以`\0`.

# mysql - 查找 SQL 查询中的单词是否在子查询中

> ID：12803370
> 
> 赞同：2
> 
> 时间：2012-10-09T15:24:18.867
> 
> 标签：mysql, sql, regex, replace

我需要一种在 SQL 查询中搜索单词的方法，并且能够确定该单词是在子查询中还是在主查询中。

例如：

```
SELECT * 
FROM products 
WHERE id NOT IN (SELECT product_id 
                 FROM tagmap 
                 WHERE tag_id = 1) 
```

我需要用查询字符串中的单词实例替换这个词的实例`WHERE`，`WHERE 1=1 AND`但只能在主查询中，而不是在子查询中。

这只是我面临的问题的一个例子。真正的查询比这大得多，并且包含几个子查询！此外，我需要为数百个查询执行此操作，因此我需要能够自动执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:56:38.983

我*认为*以下正则表达式：

```
(?<!\(.*)\b(WHERE)\b|\b(WHERE)\b(?!.*\)) 
```

将匹配“WHERE”的任何实例：

*   出现在第一个*左**括号*的左侧，或
*   出现*在*最后一个*右*括号的右侧。

 *即不会检测出现*在*`(..)`.

它适用于我尝试过的几个测试用例......如果没有进一步澄清您的要求，我不会再做任何测试......

EG 下面，我用波浪号包围表示匹配的实例：`~WHERE~`。

```
SELECT * 
FROM products 
~WHERE~ id NOT IN 
    (SELECT product_id FROM tagmap WHERE tag_id = 1 and (SELECT true WHERE something) );

SELECT x FROM y ~WHERE~ z = z;

SELECT Count(*) 
FROM (Select rows FROM table WHERE filter) 
~WHERE~ z 
```

我*强烈*建议您在依赖它之前彻底测试它。

* * *

**编辑：一个基本的.NET实现......**因为我现在已经打开了VS......;-)

```
using System;
using System.Text;
using System.Text.RegularExpressions;
using System.IO;

class Program
{
    static void Main(string[] args)
    {
        StreamReader sr = new StreamReader("pathToSqlScript.sql");
        string oldSQLString = sr.ReadToEnd();
        string newSQLString = Regex.Replace(oldSQLString, @"(?<!\(.*)\b(WHERE)\b|\b(WHERE)\b(?!.*\))", @"WHERE 1=1 AND");
        StreamWriter sw = new StreamWriter("newSqlScript.sql");
        sw.Write(newSQLString);
    }
} 
```

* * *

**编辑：要在文本编辑器中执行此操作...**

Visual Studio 将允许您执行基于正则表达式的搜索/替换。我想像 Notepad++ 这样的东西会做到这一点（至少在插件的帮助下）。或者这可能会帮助你：[http ://www.regular-expressions.info/editpadpro.html](http://www.regular-expressions.info/editpadpro.html)

否则，敲出一些会读取/修改您的文本文件的东西，例如使用 PHP、.NET、Java ......*

# jquery - CSS标记实时点击未触发

> ID：12803376
> 
> 赞同：1
> 
> 时间：2012-10-09T15:24:45.487
> 
> 标签：jquery, asp.net-mvc-3, jqgrid-asp.net

我有一个由第 3 方库 JQGrid MVC 动态生成的锚标记。

它看起来像这样：

```
<a id="xx" class="someClass" href="javascript:void(0)">Does Stuff</a> 
```

我想按如下方式挂钩它的点击事件：

```
$(".someClass").on("click", function(){
    alert('hello');
}); 
```

这是一个[jsfiddle 链接](http://jsfiddle.net/y2qfG/)。

我相信这个事件没有触发，因为创建它的第 3 方控件已经有一个事件处理程序。

是否有可能调用我的点击事件，然后再调用第 3 方？

我正在使用 JQuery 1.7.2 和 JQGrid 4.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:26:20.227

尝试委派活动

```
$("body").on("click",".someClass", function(){
    alert('hello');
}); 
```

看起来事件没有被附加，因为锚是动态生成到您的 DOM 中的。将事件委托给锚的父级应该可以解决您的问题

# javascript - 下拉菜单和可视化

> ID：12803383
> 
> 赞同：0
> 
> 时间：2012-10-09T15:24:55.277
> 
> 标签：javascript, html

我正在尝试添加一个下拉框菜单，我将在其中做出选择以可视化数据。如果没有下拉框，我的可视化效果很好，但是当我将它们放在一起时出现问题。在我的代码中，我想在选择 selection02 时可视化数据。有人可以帮我吗？

```
<html>
<head>
<script language="javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>

<script type="text/javascript">

function allagi()
{
   if (document.getElementById("selection01").selected==true)
   {
      function01();
   }
   else if (document.getElementById("selection02").selected==true)
   {
      f1();
   }
   else if (document.getElementById("selection03").selected==true)
   {
      function03();
   }
   else if (document.getElementById("selection04").selected==true)
   {
      function04();
   }
}

</script>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js"> 
function f1(){
 {"dataSourceUrl":"//docs.google.com/spreadsheet/tq?key=0AihqKzH-MgAndERnaFVsYk1RLUM3S0pDSmNjcEQ4M1E&transpose=0&headers=0&range=A2%3AB13&gid=0&pub=1","options":{"vAxes":[{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}}],"booleanRole":"certainty","animation":{"duration":0},"useFirstColumnAsDomain":true,"hAxis":{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},"isStacked":false,"width":454,"height":285},"state":{},"chartType":"AreaChart","chartName":"\u0393\u03c1\u03ac\u03c6\u03b7\u03bc\u03b1 1"} 
 }
 </script>

</head>
<body>

<div id="wrapper">
  <div id="logo"><select onchange="allagi()">
  <option id="selection01">Selection01</option>
  <option id="selection02">Selection02</option>
  <option id="selection03">Selection03</option>
  <option id="selection04">Selection04</option>
</select></div>
  <div id="pie">

  </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:24:36.813

```
 <script type="text/javascript">
   function allagi() {
    if (document.getElementById("d4ropdown1").value == "s1" )
   {
    alert ("1");
   }
 else if (document.getElementById("selection02").value == "s2")
  {
   document.getElementById("VisualizationDisplay").style.display = "block";
   }
  else if (document.getElementById("selection03").value == "s3")
  {
   alert("3");
  }
  else if (document.getElementById("selection04").value == "s4")
  {
   alert("4");
  }
  }
</script>

<div id="VisualizationDisplay" style="display:none">

 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js">
 {"dataSourceUrl":"https://docs.google.com/spreadsheet/tq?key=0AihqKzH-MgAndERnaFVsYk1RLUM3S0pDSmNjcEQ4M1E&   transpose=0&headers=0&range=A2%3AB13&gid=0&pub=1","options":{"vAxes":[{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}}],"booleanRole":"certainty","animation":{"duration":0},"useFirstColumnAsDomain":true,"hAxis":{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},"isStacked":false,"width":454,"height":285},"state":{},"chartType":"AreaChart","chartName":"\u0393\u03c1\u03ac\u03c6\u03b7\u03bc\u03b1 1"} </script>

</div>
 <div id="logo"><select id="d4ropdown1" onchange="allagi()">
 <option id="selection01" value="s1">Selection01</option>
 <option id="selection02" value="s2">Selection02</option>
 <option id="selection03" value="s3">Selection03</option>
 <option id="selection04" value="s4">Selection04</option>
</select></div> 
```

这只是一个技巧......它可以按照你的意愿工作......但我相信应该有更好的方法......对不起，如果我没有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:23:03.643

我相信您编写的 JavaScript 在语法上是无效的。

您已经编写`function f1() { "string" }`了“字符串”看起来像 JSON 字符串的地方。我认为您打算编写代码来调用将这个字符串作为参数传递的函数，但我不知道您正在使用的服务的语法。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js"> 
function f1(){
 {"dataSourceUrl":"//docs.google.com/spreadsheet/tq?key=0AihqKzH-MgAndERnaFVsYk1RLUM3S0pDSmNjcEQ4M1E&transpose=0&headers=0&range=A2%3AB13&gid=0&pub=1","options":{"vAxes":[{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}}],"booleanRole":"certainty","animation":{"duration":0},"useFirstColumnAsDomain":true,"hAxis":{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},"isStacked":false,"width":454,"height":285},"state":{},"chartType":"AreaChart","chartName":"\u0393\u03c1\u03ac\u03c6\u03b7\u03bc\u03b1 1"} 
 }
 </script> 
```

# c++ - C++ 向量模板运算符 []

> ID：12803387
> 
> 赞同：1
> 
> 时间：2012-10-09T15:25:10.227
> 
> 标签：c++, vector, operator-keyword, ostream

首先，我想说这是一项硬件任务，我只是对我面临的错误有疑问

我制作了一个带有插入函数的向量模板，该函数将 data_type 添加到动态数组的末尾。这就是我目前所拥有的。

```
// Insert the value at the specified index by moving the tail
// when Size = Capacity the Vector has to be reallocated first 
// to accomate the new element
void Insert(const DATA_TYPE& value, int index){

    // If the Capacity is not large enough then ...
    // allocate large vector
    if (Size >= Capacity){
        // 0\. Let's boost the capacity
         Capacity += CAPACITY_BOOST;
        // 1\. Allocate new larger vector
         DATA_TYPE* newData = new DATA_TYPE[Capacity];

        // 2\. Copy from old Data into the newData
         for( int i=0; i< Size; i++)
                newData[i] = Data[i];

        // 3\. Delete the old Data
         delete[] Data;

        // 4\. Replace old Data-pointer with the newData pointer
        Data = newData;
    }

    // Move the tail
    for(int i=index; i<Size;i++){
        Data[i+1] = Data[i];
    }

    // Insert
    Data[index] = value;
    Size++;

}
DATA_TYPE& operator[] (int index) const{
    return *this[index];
} 
```

注意：使用私有变量：大小、容量、数据（存储动态数组） 我很确定我已经正确实现了 add 或 push_back 函数。问题是，当我尝试 cout 诸如“cout << a[1];”之类的内容时，我得到一个错误。

```
while compiling class template member function 'int &Vector<DATA_TYPE>::operator [](int) const'
      with
      [
          DATA_TYPE=int
      ]
see reference to class template instantiation 'Vector<DATA_TYPE>' being compiled
     with
     [
          DATA_TYPE=int
      ]
error C2440: 'return' : cannot convert from 'const Vector<DATA_TYPE>' to 'int &'
    with
     [
        DATA_TYPE=int
      ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:28:27.200

你的应该有 2 个版本`operator[]`：

```
const DATA_TYPE& operator[] (int index) const;
DATA_TYPE& operator[] (int index); 
```

你所拥有的是两者的奇怪组合。

你也应该回来

```
return Data[index]; 
```

返回`(*this)[index];`将导致无限递归调用（好吧，不是无限的，在此之前你会得到一个stackoverflow）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:31:05.760

这里存在三个问题：

1.  运算符优先级。`*this[index]`被解析为`*(this[index])`, 而你的意思是`(*this)[index]`.
2.  您正在从方法返回对数据的可变引用`const`。
3.  的定义`operator[]`是循环的。返回`(*this)[index]`会`operator[]`导致无限递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:27:48.420

该`operator[]`函数被声明为常量，即它不能更改`Vector`对象中的任何内容。但是它返回一个引用，这意味着返回的值是*可以*修改的。这两者相互矛盾。

这可以通过`const`从函数末尾删除或不返回引用来解决。

# r - VennDiagram - 内部标签

> ID：12803390
> 
> 赞同：10
> 
> 时间：2012-10-09T15:25:22.397
> 
> 标签：r, venn-diagram

![在此处输入图像描述](../Images/c01361ed0651a692cea64dd45736cc13.png)我使用 VennDiagram R 包绘制了我的基因列表，图表看起来很好。

我想向维恩图添加内部标签，例如，如果数据由第一组和第二组共享，而不是由第三组和第四组共享，那么标签应该是 1100。我在 Venn{gplots} 包上发现了一个使用`showSetLogicLabel=TRUE`去做这个。

我正在寻找完全相同的功能，但使用的是 VennDiagram 包。

确切地说，如下图所示，它为图中的每个计数提供二进制代码。我想在 VennDiagram 包中生成二进制代码。

[http://rgm2.lab.nig.ac.jp/RGM_results/gplots:venn/venn_016_big.png](http://rgm2.lab.nig.ac.jp/RGM_results/gplots:venn/venn_016_big.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:11:09.050

尝试这个：

```
library(VennDiagram)
draw.triple.venn(65, 75, 85, 35, 15, 25, 5, c("First", "Second", "Third")) 
```

![3组维恩图](../Images/76299f7e970a8cb777b20460218f3b1a.png)

或者这个以获得更好的视图，以及 4 个组：

```
A <- sample(1:1000, 400, replace = FALSE); 
B <- sample(1:1000, 600, replace = FALSE);
C <- sample(1:1000, 350, replace = FALSE);
D <- sample(1:1000, 550, replace = FALSE);
E <- sample(1:1000, 375, replace = FALSE);
venn.diagram(x = list(A = A,D = D,B = B,C = C), filename = "Venn.tiff",
col = "transparent", fill = c("cornflowerblue","green","yellow","darkorchid1"),
alpha = 0.50, label.col = c("orange", "white", "darkorchid4", "white", "white", 
"white",    "white", "white", "darkblue", "white", "white", "white", "white", 
"darkgreen", "white"), cex = 1.5, fontfamily = "serif", fontface = "bold",
cat.col = c("darkblue", "darkgreen", "orange", "darkorchid4"), cat.cex = 1.5,
cat.pos = 0, cat.dist = 0.07, cat.fontfamily = "serif", rotation.degree = 270,
margin = 0.2) 
```

![4组维恩图](../Images/2572f5ad042e5fae363181ab2bbaa0f3.png)

VennDiagram 文档中有更多示例（[此处](http://www.stats.bris.ac.uk/R/web/packages/VennDiagram/VennDiagram.pdf)）

# javascript - 如何使用 gruntjs 缩小 CSS

> ID：12803395
> 
> 赞同：2
> 
> 时间：2012-10-09T15:25:38.133
> 
> 标签：javascript, gruntjs

我正在尝试通过终端使用 gruntjs 和[grunt-css](https://github.com/jzaefferer/grunt-css)插件来缩小外部 css 脚本。

我正在运行的代码：

```
grunt --cssmin ../style.css > ../style1.css 
```

我做对了吗？我误解了 Grunt 的用途吗？

谢谢！

这是我生成的 style1.css 的样子......它没有被缩小......我不确定它是什么，但它正在做某事。

```
[31m<[39m[33mWARN[39m[31m>[39m [33mTask "cssmin" not found. Use --force to continue.[39m [31m</[39m[33mWARN[39m[31m>[39m 
```

[31mA 因警告而中止。[39m

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:39:48.077

这并不是 Grunt 的工作方式。Grunt 使用 grunt 文件（`grunt.js`在 v0.3 和`Gruntfile.js`v0.4 中）来配置构建指令。首先创建一个 grunt 文件，`grunt init:gruntfile`并在那里指定你的 css min 目标。我建议阅读 Grunt 文档中的入门指南： [https ://github.com/gruntjs/grunt/wiki/Getting-started](https://github.com/gruntjs/grunt/wiki/Getting-started)

您可以直接使用 Sqwish（grunt-css 使用的）来执行上述操作。`npm install -g sqwish`使用然后输入全局安装 sqwish ： `sqwish -o ../style1.css ../style.css`。在此处阅读有关 Sqwish 的更多信息：[https ://github.com/ded/sqwish](https://github.com/ded/sqwish)

# javascript - 将函数分配给 JSON 属性

> ID：12803398
> 
> 赞同：3
> 
> 时间：2012-10-09T15:25:50.070
> 
> 标签：javascript, jquery, json, prototype

我想创建一个对象，其第一个属性是一个函数，该函数确定父对象访问哪个子对象。我的特定应用程序正在根据提交的表单类型更改使用的表单验证类型。

我在页面加载时收到的错误消息是：`Uncaught TypeError: Cannot set property 'validate' of undefined`

到目前为止，这是我的 Javascript（这是 JSfiddle：http: [//jsfiddle.net/WJRwv/3/](http://jsfiddle.net/WJRwv/3/)）：

```
var O={
  form:{
    voting:{
        validate: {}, success: {}
    },
    delete:{
        validate: {}, success: {}
    }
  }
};

O.form=function(formType){
  if(formType=='voting'){
    return O.form.voting;
  }
    else if(formType=='delete'){
    return O.form.delete;
  }
} 
```

**正下方的行导致错误**

```
O.form.voting.validate=function($form){ //**THIS LINE IS CAUSING THE ERROR**
  if($form.validate().form()){ // this is a method from the jQuery validate plugin
    console.log('YES validates');
  }
  else {
    console.log('NOT valid'); return false;
  }   
}

$('input[type=submit]').click(function(){
  var formType=$(this).data('form-type'),
      $form=$(this).closest('form'),
      formType=O.form(formType);
      console.log('form type is:'+formType);
      formType($form); //this should call the O.form.voting.validate method
}); 
```

HTML：

```
<form>
  <input type="submit" data-form-type='voting' name='voting' value="1">
</form>

<form>
  <input type="submit" data-form-type='delete' name='delete' value="1">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:29:50.503

问题是你之前用一个函数覆盖`o.form`了，所以`o.form.voting`（连同你最初设置的其他东西）不再存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:32:12.647

您的`O.form`对象文字被该`O.form`函数覆盖。反而...

```
var O = {
  form: function(formType) {
    if(formType=='voting'){
      return O.form.voting;
    }
      else if(formType=='delete'){
      return O.form.delete;
    }
  }
};

O.form.voting = {
  validate: {}, success: {}
};
O.form.delete = {
  validate: {}, success: {}
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:30:35.853

这导致了问题：

```
O.form=function 
```

现在`form`已经没有`voting`房产了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:06:03.580

您可以做的是创建一个将表单映射到验证器设置的函数，jQuery 验证器允许每个表单有一个验证器，并会在提交表单时确定使用哪个验证器......

更新了 HTML...

```
<form data-form-type="voting">
  <input type="submit" name="voting" value="1"/>
</form>

<form data-form-type="delete">
  <input type="submit" name="delete" value="1"/>
</form> 
```

更新了 JS...

```
var o = {};
o.setFormValidations = function(types) {
    // Loop through forms and attempt to map each form to an item in the passed
    // types argument
    $("form").each(function() {
        // Get the form type from the data attribute
        var type = $(this).data("form-type");
        // Add in the validator if there is a matching item in the passed
        // types arguments
        if(types[type]) {
            $(this).validate(types[type]);
        }
    });
};

// On document ready we run the function passing in the jQuery validator
// settings for each form type
$(function() {
    namespace.setFormValidations({
        "voting" : {
            rules: {},
            messages: {},
            submitHandler: function() {
                // Do something for a valid form
            }
        },
        "delete" : {
            rules: {},
            messages: {},
            submitHandler: function() {
                // Do something for a valid form
            }
        }
    });
}); 
```

# java - 通过 Java 检查 MySQL 表的 ROW LOCK STATUS

> ID：12803402
> 
> 赞同：2
> 
> 时间：2012-10-09T15:25:51.940
> 
> 标签：java, mysql, locking, row, status

我有一个 Java 前端和一个 MySQL 后端方案，我对 SELECT 使用了“锁定共享模式”。如果我从另一个进程请求同一行，它会提供数据。但是它不允许我更新。我想做的是通知用户他们只会有一个只读副本，所以如果他们希望看到他们可以看到的信息，他们可以稍后再请求。我如何检查 ROW 的状态以便用户会被告知这种情况？？如果我使用“FOR UPDATE”，它只会等到第一个用户保存数据。我发现它对用户不太友好，如果他们只有一个空白屏幕或者当他们单击按钮时它什么也不做。任何帮助将不胜感激。使用 MySQL 5.5、Java 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:38:02.740

简短的回答是“你不能”！

您可能想看看[这个讨论](https://stackoverflow.com/questions/2499976/detecting-locked-tables-mysql-locked-by-lock-table)。

[编辑]

该帖子的答案指出：

> 对于未命名的锁，您不能（检查锁的状态）！！！！更多信息： http: [//forums.mysql.com/read.php?21,222363,223774#msg-223774](http://forums.mysql.com/read.php?21,222363,223774#msg-223774)

行级锁不适用于应用程序级锁。它们只是实现一致读写的手段。这意味着您必须尽快释放它们。您需要实现自己的应用程序级锁，这并不难。也许一个简单的`user_id`领域就可以了。如果它为空，则没有锁。但如果它不为空，则 id 表示谁持有该记录。在这种情况下，您需要行级锁定来更新`user_id`字段。正如我之前所说，一旦你完成锁定/解锁记录，你就必须释放 MySQL 锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-29T04:45:18.317

这个问题的全部前提在于直接将 RDBMS 的行级锁定（通常用于短期并发控制）相当自由地用于交互式 UI 控制。

但抛开这一点并回答问题，可以将会话设置[`innodb_lock_wait_timeout`](https://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_lock_wait_timeout)为一个非常短的值，最小值为`1`，并捕获超出的*锁定等待超时；*无法锁定时*尝试重新启动事务。*

异常类是`com.mysql.jdbc.exceptions.jdbc4.MySQLTransactionRollbackException`我刚尝试使用的时候`mysql-connector-java 5.1.38`，但其他异常类在版本中发生了变化，所以这在旧版本的 MySQL Connector/J 中也可能不同。

获取锁的“尝试和失败”方法是处理这些类型的并发情况的标准方法，因为“尝试前检查”的替代方法是一种反模式，它在检查和实际尝试之间创建竞争条件锁。

# python - 从 std in 读取时，python 交互模式不起作用

> ID：12803403
> 
> 赞同：4
> 
> 时间：2012-10-09T15:25:56.173
> 
> 标签：python, bash, python-interactive

给定以下 python 脚本....

```
$ cat readStdin.py 
#!/usr/bin/python

import sys

var = "".join(sys.stdin.readlines()).rstrip()
print var 
```

...我得到以下输出：

```
$ echo hello  | python -i readStdin.py 
hello
>>> 
$ 
```

...换句话说，它不会挂在 python 控制台中，而是回到 bash。有谁知道如何让它留在python控制台中？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:38:08.530

考虑一下 -

```
$ echo print  4*2 | python -i
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
Type "help", "copyright", "credits" or "license" for more information.
>>> 8
>>> 
$ 
```

回声产生`print 4*2`。即使在交互模式下，Python 也将其视为要解释的输入。因此，我们在那里看到了 8。在此之后，解释器遇到一个`EOF`，所以它退出。考虑一下您按什么退出解释器 -`Ctrl+d`或`^D`. 这只是`EOF`在 *nix 上生成的另一种方式。

# ios - iOS 6 中的 Touch/Drag Heuristics 发生了变化。有什么方法可以恢复旧的行为？

> ID：12803407
> 
> 赞同：0
> 
> 时间：2012-10-09T15:26:01.943
> 
> 标签：ios, uiwebview, onclick, touch, ios6

我们的 iPad 应用程序使用 webkit UI 进行大量用户交互，我们现在正在处理来自用户的投诉，即在 iOS 6 中，UI 忽略了他们的触摸。我们已经进行了并排比较，现在非常确定 iOS 5 中的触摸小拖动释放手势会在 onclick 事件上触发，而 iOS 6 中的触摸小拖动释放手势则不会. 因此，在 iOS 6 中，您需要非常小心，不要在按下 UI 上的按钮时移动手指。（或者，也许他们只是改变了 small-drag 中“小”的定义。）

我们相信在“设置”>“常规”页面中禁用多点触控手势会有所改善，尽管我们不相信这不是安慰剂效应。

作为测试，我尝试删除滚动防止：

```
 document.body.addEventListener('touchmove', function(e){ e.preventDefault(); }); 
```

从我们的代码中，但它没有任何区别（除了让拖动事件很明显正在拖动之外）。

我的下一个想法是遍历并改变我们依赖 onclick 的所有地方，而不是依赖 ontouchstart，但是，嗯，很糟糕。（特别是，糟糕，如果我们还需要相同的代码在桌面浏览器中工作。）

我们一个人在这里吗？我在搜索中没有发现任何关于此的投诉。有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:01:28.433

你并不孤单！

我们在新游戏[Blue Pilot](http://www.fivedeer.com/blue-pilot)中遇到了类似的问题，同时我们将支持扩展到 iPhone 5。我们现在正在处理这两个事件。

# c# - 当用户单击asp.net中的外部面板时如何获取警报消息

> ID：12803409
> 
> 赞同：0
> 
> 时间：2012-10-09T15:26:07.077
> 
> 标签：c#, javascript, asp.net

我有几个控件的表单。我担心的是，当我在 Panel1 中填写值时，并单击 panel1 之外的任何其他控件或空间。我怎样才能收到警报消息。我在 asp.net 工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:32:36.773

向正文添加点击事件。检查事件的目标或 srcElement 以查看单击发生的位置。查看 cilck 是否出现在面板中的元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T02:37:24.227

使用 Jquery 的 focusin 和 focusout。

```
<div style="border: 1px solid black;padding:10px;">
   First name: <input type="text"><br>
  Last name: <input type="text">
</div>`
<script>
$(document).ready(function(){
$("div").focusin(function(){
    $(this).css("background-color", "#FFFFCC");
});
$("div").focusout(function(){
    $(this).css("background-color", "#FFFFFF");
});
}); 
```

# c# - 使用 MVP 来区分在 2 个上下文中使用的控件的演示者是可行的

> ID：12803413
> 
> 赞同：0
> 
> 时间：2012-10-09T15:26:20.307
> 
> 标签：c#, winforms, design-patterns, mvp

我有一个 WinForms UserControl，我在 2 个不同的应用程序中使用它。一个 Word Add In 和另一个 WinForms 应用程序。我希望能够根据我所在的应用程序来区分签入操作的实施，因为这两个应用程序都有独特的问题。

然而，我正在努力解决每个应用程序特定的 UI 问题。例如，我想检查 Word Add in 中的活动文档，但显然不想在 WinForms 应用程序中执行此操作。我已经解决了我可以注入演示者的事实，但我知道我应该将 UI 逻辑排除在外。我需要另一层还是需要编写两个不同版本的控件，它们有很多相似之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:59:41.827

您最好在一个单独的项目中抽象出常用功能，并为该抽象创建 2 个不同的实现。

# linux - Curl：如何向 cookie 插入值？

> ID：12803416
> 
> 赞同：0
> 
> 时间：2012-10-09T15:26:29.167
> 
> 标签：linux, bash, cookies, curl

如何在 curl 中插入 cookie 值？从萤火虫*请求标头*我可以在下面看到

```
Cookie: PHPSESSID=gg792c2ktu6sch6n8q0udd94o0; was=1; uncheck2=1; uncheck3=1; uncheck4=1; uncheck5=0; hd=1; uncheck1=1" 
```

我尝试了以下方法：

```
curl http://site.com/ -s -L -b cookie.c -c cookie.c -d "was=1; uncheck2=1; uncheck3=1; uncheck4=1; uncheck5=0; hd=1; uncheck1=1" > comic 
```

我在 cookie.c 中看到的唯一内容是

```
PHPSESSID=gg792c2ktu6sch6n8q0udd94o0; was=1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:29:52.393

要将键/值传递给`cURL`cookie，您需要`-b`switch，而不是`-d`.

对于 forms `-d`，数据将在您的命令中由`&`而不是由分隔。`;``curl`

所以 ：

```
curl http://site.com/ \
    -s \
    -L \
    -b cookie.c \
    -c cookie.c \
    -b "was=1; uncheck2=1; uncheck3=1; uncheck4=1; uncheck5=0; hd=1; uncheck1=1"
    > comic 
```

如果您需要知道要`POST`编辑的表单的名称，可以运行以下命令：

```
mech-dump --forms http://site.com/ 
```

它带有带有或派生的`libwww-mechanize-perl`软件包。`debian`

# parameters - 打印预览参数对话框未显示所有参数字段 - 如何修复？

> ID：12803420
> 
> 赞同：0
> 
> 时间：2012-10-09T15:26:49.723
> 
> 标签：parameters, crystal-reports, report, screen, preview

我正在尝试更新 CR 文件：我有数据库 SQLserver 代码提取所有相关字段，但是当我去看打印预览时，CR 拉出一个参数屏幕 w。4 个必要的参数字段中只有 2 个，并且报告不会预览 b/c 它缺少关键数据。如何进入表单以将更多字段添加到打印预览参数对话框？（例如，我需要将 from-dept 和 to-dept 添加到 user-entry-form 以从 SQLServer 中提取正确的数据 - 如何进入 user-entry-form 以添加这些字段？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:47:02.580

我见过这种情况的唯一一次是在报告中没有使用参数时。我不确定正在使用哪个版本的 CR，但是如果在报告中使用了某个参数，则使用 CRXI 时，它会在字段资源管理器中显示一个绿色复选标记。

# oracle - 使用 PL/SQL 开发人员的游标执行 oracle 存储过程

> ID：12803421
> 
> 赞同：1
> 
> 时间：2012-10-09T15:26:54.333
> 
> 标签：oracle, stored-procedures, cursor, execute, plsqldeveloper

我在从包中执行 oracle 存储过程时遇到了一些麻烦。我已经在本地机器上安装了 PL/SQL 开发人员，当我尝试测试程序时，我得到如下生成的代码：

```
begin
  -- Call the procedure
  owner.mypackage.getallrequests(res => :res,
                                                        id=> :id);
end; 
```

但我无法修改此查询以返回数据。非常感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:14:49.157

假设您已经通过右键单击对象资源管理器中的过程并选择“测试”来达到这一点，您将拥有一个带有您显示的匿名 PL/SQL 块的测试窗口。你没有说，但我假设`id`是一个`in`变量，并且`res`是`out`游标变量。在窗口下半部分的变量部分，输入您要搜索的 ID 值，然后执行它（单击齿轮或按 F8）。

如果这些是唯一的变量，那么任何明显的变化都不会发生；如果非光标或变量的值已更改，则非光标`out`或`in out`变量将以黄色突出显示，但光标未更改，并且`in`定义的变量不会更改。

`res`在测试窗口底部光标变量的最右侧，有一个小按钮`...`，帮助页面将其称为“单元格按钮”。单击它，将打开一个新窗口，显示光标结果集。

# c++ - 迭代 std::map 的更好方法

> ID：12803424
> 
> 赞同：1
> 
> 时间：2012-10-09T15:27:03.793
> 
> 标签：c++, stl

给定一张地图，我需要检索和操作两个立即存储的项目。对我来说，处理向量更容易，因为我可以执行“iter + 1”或“iter - 1”。而对于地图，我不走运。

例如，我举一个简单的例子如下： 注意：在我的实际应用中，我不会简单地减去这些数字。

```
int main ()
{
    map<char,int> mymap;
    map<char,int>::iterator it;

    mymap['b'] = 100;
    mymap['a'] = 200;
    mymap['c'] = 300;

    // show content:
    map<char,int>::iterator firstItem  = mymap.begin();
    map<char,int>::iterator secondItem = ++mymap.begin();

    for ( ; secondItem != mymap.end(); ++firstItem, ++secondItem )
        cout << secondItem->second - firstItem->second << endl;

    return 0;
} 
```

问题> 有没有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:31:56.587

不要在循环控制中递增两个迭代器（递增有点慢），只需先赋值`firstItem = secondItem`然后递增`secondItem`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:32:30.503

您可以使用单个迭代器来完成。将增量从标题移动到循环的中间，并在到达地图末尾时退出循环，如下所示：

```
map<char,int>::iterator item  = mymap.begin();
for (;;) {
    int first = item->second;
    ++item;
    if ( item == mymap.end()) break;
    cout << item->second - first << endl;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:33:35.650

如果地图为空，您当前的循环将显示**未定义的行为。**

您的循环可以重写（更简单，并检查空地图），如下所示：

```
int main(int argc, char * argv[])
{
    map<char,int> mymap;
    map<char,int>::iterator it;

    mymap['b'] = 100;
    mymap['a'] = 200;
    mymap['c'] = 300;

    for ( it = ( mymap.begin() == mymap.end() ? mymap.end() : std::next(mymap.begin()) ) ; it != mymap.end(); ++it )
        cout << it->second - std::prev(it)->second << endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T15:34:30.300

这是风格问题。你可以做例如。

```
auto first = m.begin();

if (first != m.end())
{
    auto second = first;
    second++;

    for (; second != m.end(); first = second++)
    {
        ...        
    }
} 
```

在地图为空的情况下，您还可以更优雅地进行救助。例如，您可以这样做：

```
if (m.empty()) return;

auto first = m.begin(), second = first;

for (second++; second != m.end(); first = second++)
{
   ...
} 
```

如果可以的话，我会支持后者，只有在必须时才使用前者。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T15:30:45.843

如果地图为空，您的代码将具有未定义的行为，但除此之外，这似乎是一种合理的方法，具体取决于您的总体目标。由于`map`迭代器不是随机访问，您不能只加或减一，只能增加/减少。

另一种方法是制作迭代器的副本，然后在循环内递增。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T15:36:15.330

既不好也不坏，只是一种选择：

```
if (map.size() >=2)
std::accumulate(
  ++mymap.begin(),
  mymap.end(),
  mymap.begin(),
  [](mymap_type::const_iterator iprev, mymap_type::value_type const& entry)->mymap_type::const_iterator
  { 
    /* do something */;
    return ++iprev; 
  }); 
```

# .net - 加载模块、安全和产品密钥

> ID：12803426
> 
> 赞同：0
> 
> 时间：2012-10-09T15:27:09.600
> 
> 标签：.net, prism, unity-container, prism-4

我正在使用 Unity 和 Prism V4 开发 .NET 中的模块化应用程序。具有模块化设计的一个优势是能够轻松添加和删除功能。我必须能够创建添加或排除某些功能的应用程序版本。使用 Prism 和 Unity，我可以通过加载所需功能的程序集（.dll 文件）来做到这一点。我喜欢这个，因为它允许我干净、准确地排除整个功能。

我有某些功能**绝对不能包含**在某些版本的应用程序中，这是我们自己的责任。我想阻止用户将另一个用户的 .DLL 文件复制到他的目录中以获得该功能。其他有类似担忧的人可能有兴趣出售“插件模块”作为附加产品的升级，并限制购买附加组件的人访问。这不是我们正在做的事情，但也不能完全排除。

现在，使用 Prism 和 Unity 有多种方法可以注册模块目录，包括在代码中、从目录、从应用程序配置 XML 文件，或者您可以自己编写。最简单的方法之一是让应用程序的外壳引用每个程序集，并且代码专门为该配置加载程序集文件。这确实使简单地从其他人那里复制文件并获得该功能变得稍微困难​​一些。但是，我担心它可能会导致配置错误，或者阻止更通用的“附加”场景（即您需要重新编译应用程序外壳以包含功能）。

如果我对要加载的程序集进行硬编码，我可能必须在构建环境变量上使用#ifdef 来确定应该加载哪些模块。如果他们获取 shell 可执行文件和其他库，这并不能真正阻止某人复制文件。跟踪特定构建以进入不同的安装程序项目并阻止购买的附加方案似乎也更加困难。对我来说，最好是应用程序的外壳不需要直接引用模块。也许，它可以从特定位置加载程序集，但可以通过产品密钥或其他地方以某种方式验证用户应该有权访问该模块。

如果有人对如何许可模块或将模块的访问权限限制为应用程序的不同用户（版本）有经验或见解，我很感兴趣。基本应用程序可能完全免费，不需要许可证。可能没有什么是万无一失的，但我需要尽我最大的努力让别人绕过这个系统变得不容易。另一个要求是我不相信我可以要求我的用户能够访问互联网（如果有某种许可方法需要这样做）。当然，我不确定这不仅限于对 .NET、Prism 或 Unity 的讨论，但这就是我在这个项目中使用的。

使用强密钥名称对每个程序集进行签名可以帮助我验证模块是否来自受信任的来源，但我不确定这对许可是否有帮助。也许有一个可以使用的产品密钥系统来指示允许哪些模块？无论如何，我会停在那里，因为我对解决这个问题的任何方法持开放态度，我不想将讨论集中在一个特定的想法或路径上。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:27:56.803

我认为这可以使用以下方法来完成：

1) 扩展您在 Unity 中获得的正常 LifeTimeManagers。这些用于控制何时处理对象并允许您从 Unity 中删除注册

如何使用 LifeTimeManager 从 Unity 中删除项目：[StackOverflow 答案](https://stackoverflow.com/questions/2705418/unity-how-to-removeunregister-registered-instance-from-unity-mapping)

2）您需要构建某种 LifeTimeManager 字典，将 LifeTimeManager 实例与统一注册结合起来

3）使用 UnityContainerExtension 检查正在注册的类是否“允许”。如果不允许，则解析您的 LifeTimeManager 字典，获取类生命周期管理器并对其调用“删除”。

这是 UnityContainerExtension 的基本示例：

```
public class UnityNavigationTrackerExtension : UnityContainerExtension
    {
        protected override void Initialize()
        {
            Context.Registering += ContextRegistering;
            Context.RegisteringInstance += ContextRegisteringInstance;
        }

        private void ContextRegisteringInstance(object sender, RegisterInstanceEventArgs e)
        {
            var attributes =
                e.Instance.GetType().GetCustomAttributes(typeof (MenuItemAttribute), true) as MenuItemAttribute[];
            if (attributes != null)
                foreach (MenuItemAttribute attribute in attributes)
                {
                    RegisterMenuItemForView(e.RegisteredType, e.Instance.GetType(), attribute);
                }
        }
    } 
```

unity 容器扩展的作用是让您看到类注册到 unity。这意味着您可以在注册发生时与它们进行交互。

# excel - 在图表中选择一个点，它会显示值

> ID：12803427
> 
> 赞同：2
> 
> 时间：2012-10-09T15:27:12.080
> 
> 标签：excel, excel-2010, vba

我想创建一个宏来指出图表中的选定点。例如，在图表中有几个点。但是当我在图表中选择一个点时，它只会显示该点的值。我知道，当我将鼠标悬停在该点上时，它会显示点信息，但我希望它在我选择它时一直显示，直到我单击其他位置，这样它将被取消标记。所以我想知道如何识别选择图表中的一个点的女巫？

![例子](../Images/5e477aa4dc5b9438aba2d77844b99d25.png)

我设法列出图表中的所有点，但我不知道如何识别所选点。

```
Sub test()
Dim pt As Long

With ActiveChart.SeriesCollection(1)
     For pt = 1 To .Points.Count
          Debug.Print "Series 1 Point "; pt,Application.WorksheetFunction.Index(.Values, pt)
     Next
End With
End Sub 
```

我的vba技能很差

提前谢谢

# assembly - linux启动过程

> ID：12803430
> 
> 赞同：0
> 
> 时间：2012-10-09T15:27:21.423
> 
> 标签：assembly, boot, processor

我开始学习 Linux 操作系统的启动过程。它说处理器执行的第一个程序是`BIOS`. 我想知道`instruction pointer`微处理器执行的第一条指令的内容是什么？

而且，这些`BIOS`指令是否真的被带入`main memory`执行？如果是，那么这些指令在哪里加载，我的意思是`starting address`. 如果不是，是什么原因没有将它们带入记忆？

除此之外，`interrupt vector table`实际居住在哪里？`RAM`还是`ROM`？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:42:39.480

注意：这都是针对 x86 的。对于其他平台，这可能会有所不同。

指令指针首先指向什么，这取决于。通常，处理器会在复位时将其设置为 0，但它是由处理器定义的，最终由谁来定义。在 x86 的情况下，它将跳转到 0xFFFFFFF0 ( [source](http://duartes.org/gustavo/blog/post/how-computers-boot-up) )。这将只包含跳转到 BIOS 代码的有用部分。

然后您的 BIOS 需要开始设置您的系统。为此，它直接从其 ROM 芯片执行，因为您的内存现在尚未正确初始化。这是特定于平台的，但通常在 x86 上，BIOS 会将 CPU 置于缓存即 RAM 模式，允许它在设置内存时进行一些临时存储。

然后它将设置系统的其余部分。这包括 IVT，它位于内存底部 (0x0) 和其他有用的东西（[源 1](http://wiki.osdev.org/Memory_Map_%28x86%29)、[源 2](http://duartes.org/gustavo/blog/post/how-computers-boot-up)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:32:56.530

BIOS与操作系统无关。这取决于处理器架构，您需要研究特定的处理器开发人员指南才能找到答案。

对于基于 x86 的机器，指令指针指向 ROM 中的最后一个内存位置，其中包含第一条 BIOS 指令的起始地址。使用跳转地址处理器执行 BIOS 例程，然后将控制权交给启动设备

# sql - 混合聚合结果和单个值的 SQL 查询

> ID：12803433
> 
> 赞同：5
> 
> 时间：2012-10-09T15:27:39.693
> 
> 标签：sql, select, group-by, subquery, having

我有一张交易表。每个事务都有一个事务 ID、会计期间 (AP)、过帐值 (PV) 以及其他字段。某些 ID 重复，通常是因为交易错误完成。举个例子，表格的一部分可能如下所示：

```
ID    PV    AP  
123   100   2  
123   -100  5 
```

在这种情况下，事务在 AP2 中添加，然后在 AP5 中删除。

另一个例子是：

```
ID    PV    AP  
456   100   2  
456   -100  5  
456   100   8 
```

在第一个示例中，问题是如果我正在分析在 AP2 中花费的内容，其中有一笔交易实际上不应该被考虑在内，因为它在 AP5 中再次被取出。在第二个示例中，不应考虑后两个交易，因为它们相互抵消。

我想尽可能多地标记不应被视为错误的交易。为了识别这些事务，我想找到具有重复 ID 且 PV 总和为零的事务（如上面的 ID 123）或最早的 PV 等于 sum(PV) 的事务，如第二个示例所示。这第二个条件是让我悲伤的原因。

到目前为止我有

```
SELECT *
FROM table
WHERE table.ID IN (SELECT table.ID
                    FROM table
                    GROUP BY table.ID
                    HAVING COUNT(*) > 1
                    AND (SUM(table.PV) = 0
                    OR SUM(table.PV) = <PV of first transaction in each group>))
ORDER BY table.ID; 
```

人字形中的那一点是我想要做的，我被困住了。我可以这样做还是可以在 SQL 中使用其他方法来做到这一点？

编辑 1：顺便说一句，我忘了说我正在使用 SQL Compact 3.5，以防万一。

编辑2：我认为上面的代码片段有点误导。我仍然想用重复 ID 标记 sum(PV) = 0 的事务，如第一个示例所示。但是最早交易的 PV = sum(PV)，如第二个例子，我真正想要的是保留最早的交易，并用相同的 ID 标记所有其他交易。抱歉，如果这引起了混乱。

编辑 3：我一直在使用 Clodoaldo 的解决方案并取得了一些进展，但仍然无法得到我想要的。我试图让我知道肯定是错误的交易。假设表中还有以下事务：

```
ID     PV    AP  
789    100   2  
789    200   5  
789   -100   8 
```

在这个例子中 sum(PV) <> 0 和最早的 PV <> sum(PV) 所以我不想标记任何这些。

如果我修改 Clodoaldo 的查询如下：

```
 select t.*
    from 
    t
    left join (
        select id, min(ap) as ap, sum(pv) as sum_pv
        from t
        group by id
        having sum(pv) <> 0
    ) s on t.id = s.id and t.ap = s.ap and t.pv = s.sum_pv
     where s.id is null 
```

这给出了结果

```
 ID      PV     AP
123      100    2
123     -100    5
456     -100    5
456      100    8
789      100    3
789      200    5
789     -100    8 
```

虽然前 4 笔交易没问题（它们会被标记出来），但 789 笔交易也在那里，我不想要它们。但我不知道如何修改查询以便不包括在内。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:49:00.127

[SQL小提琴](http://sqlfiddle.com/#!3/ac36e/5)

```
select t.* 
from 
    t
    inner join (
        select id, min(ap) as ap
        from t
        group by id
        having sum(pv) <> 0
    ) s on t.id = s.id and t.ap = s.ap 
```

以上获取有效交易。如果你想要无效的使用这个：

```
select t.*
from 
    t
    left join (
        select id, min(ap) as ap
        from t
        group by id
        having sum(pv) <> 0
    ) s on t.id = s.id and t.ap = s.ap
where s.id is null 
```

[SQL小提琴](http://sqlfiddle.com/#!3/ac36e/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:43:34.417

尝试这样的事情：

```
UPDATE
    Transactions
SET
    IsError = true
WHERE
    EXISTS
    (SELECT
        NULL
    FROM 
        Transactions SubsequentTransactions
    WHERE
        Transactions.ID = SubsequentTransactions.ID
    AND Transactions.AP < SubsequentTransactions.AP
    AND Transactions.PV = -1 * SubsequentTransactions.PV) 
```

我认为这会奏效。我根本没有测试过，所以我建议您首先在 select 语句中使用 WHERE 子句，以确保它只会影响您想要的行。

这不会将负面交易标记为错误（您可能需要也可能不需要），除了在您的第二个示例中。在您的第二个示例中，如果将第二个记录单独获取，则第三个记录会取消第二个记录。您可能会发现您需要扩展逻辑以完全获得所需的内容，但它应该可以帮助您入门。

# uinavigationcontroller - 为 UINavigationController 设置自定义位置

> ID：12803436
> 
> 赞同：0
> 
> 时间：2012-10-09T15:27:51.610
> 
> 标签：uinavigationcontroller

在我的 iPad 应用程序中，我想在我的主视图中放置一个小的 UINavigationController。默认情况下，navController 大小为全屏，因此我将其框架调整如下：

```
[self.navController.view setBounds:CGRectMake(0, 0, 320, 400)];
[self.navController.view setFrame:CGRectMake(500, 200, 320, 400)]; 
```

这在视觉上起作用，即。控制器最终以正确的帧大小处于正确的位置。但是，它的“热区”似乎保持在 (0,0)，这意味着我无法在边界矩形之外与之交互。所以如果我把它放在（50,100），部分控件仍然会收到交互事件。但是，如果我将 x 和 y 值设置为 320 和 400 之外，则不会进行任何操作。

有什么解决办法吗？或者尝试用 UINavigationController 来做这件事只是一个坏主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:27:36.290

虚惊！这完全是我的疏忽。我实际上执着于错误的观点，而不是我想象的观点。掌心面对。

# jquery - 在数组 .inArray() 中查找值

> ID：12803445
> 
> 赞同：2
> 
> 时间：2012-10-09T15:28:21.957
> 
> 标签：jquery, arrays

我`.inArray()`用来检查我的数组是否有“0”值，然后`return false;`如果有零则破坏函数。

这是我目前正在使用的代码：

```
$(document).ready(function() {

    $('#calc').click(function(e) {

        var drop = $(".drop"),
            c = [],
            g = [];

        //Push values into an array.
        drop.each(function() {
            var $t = $(this),
                cals = $t.val(),
                option = $(':selected', this),
                gly = parseFloat(option.attr('rel'));
            g.push(gly * 2);
            c.push(cals * 2);
        });

        var inthere = jQuery.inArray('0', c) > -1;

        //don't calculate if array is empty
        if (c.length === 0) {
            return false;
        }
        //don't calculate with a '0' value in array
        if (inthere == true) {
            return false;
        }

        //shouldn't display if you haven't added a dropdown OR if the dropdown stayed on the "Default" option
        alert('Passed');
    });

    $('#add').click(function() {
        $('#contain').append('<select class="drop"><option value="" rel="" data-default="true">Default</option><option value="1" rel="2">Option 1</option><option value="3" rel="4">Option 2</option></select>');
    });

});​ 
```

当用户离开`option`“默认”选项时，传递给的值`c`应该是 0。出于某种原因，代码将通过，除非我没有在下拉列表中添加...

如果数组中有“0”，如何防止代码继续执行`c`？？？

这是[小提琴](http://jsfiddle.net/tdunham02/DUs8e/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:38:17.013

该数组没有字符串匹配`'0'`，它有一个数字匹配`0`。

[http://jsfiddle.net/DUs8e/1/](http://jsfiddle.net/DUs8e/1/)

```
var inthere = jQuery.inArray(0, c) > -1; 
```

# php - 我可以使用逻辑或 || 在 PHP 变量声明中？

> ID：12803446
> 
> 赞同：0
> 
> 时间：2012-10-09T15:28:25.573
> 
> 标签：php, logical-operators

此代码有效：

```
$foo = getFoo();
if (!$foo) $foo = getBar();
if (!$foo) $foo = getJiggy();
if (!$foo) $foo = getWithIt(); 
```

我以为我在某处看到了逻辑运算符的简化：

```
$foo = (getFoo() || getBar() || getJiggy() || ...); 
```

我认为第一个 true 语句会通过，但它只是将 $foo 设置为布尔值，而不是,等`true`的返回值。`getFoo()``getBar()`

有没有像我想的那样简化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:38:49.557

对于 JavaScript，`foo = bar || baz;`是一种常用的表达式，因为`||`运算符具有合并行为。

`||`PHP 对于返回布尔值的运算符没有这种行为。因此，您最初发布的代码越冗长：

```
$foo = getFoo();
if (!$foo) $foo = getBar();
if (!$foo) $foo = getJiggy();
if (!$foo) $foo = getWithIt(); 
```

是您最易读且更可取的选择。

[PHP 5.3 有一个三元运算符的简写版本，它充当合并运算符：](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

> 从 PHP 5.3 开始，可以省略三元运算符的中间部分。表达式 expr1 ?：如果 expr1 的计算结果为 TRUE，则 expr3 返回 expr1，否则返回 expr3。

这将允许您使用：

```
$foo = getFoo() ?: getBar() ?: getJiggy() ?: getWithIt(); 
```

但是，这假设您不必担心兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:38:23.130

你可以试试

```
$foo = getFoo() or $foo = getBar() or $foo = getJiggy() or $foo = getWithIt();
var_dump($foo); 
```

输出

```
string 'Stop Here' (length=9) 
```

使用的功能

```
function getFoo() {
    return false;
}

function getBar() {
    return false;
}

function getJiggy() {
    return "Stop Here";
}

function getWithIt() {
    return "Hello World";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:32:03.840

You can use nested ternary operator. Something like:

```
$foo = (!$foo)? getFoo() : ((!$foo)? getBar() : getJiggy()) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:39:04.947

您可以使用较弱的优先级`or`并建立一个条件+赋值链，如下所示：

```
 $foo = getFoo()
OR  $foo = getBar()
OR  $foo = getJiggy()
OR  $foo = getWithIt(); 
```

为了可读性和便于其他人理解这种操作符的误用，间距是必不可少的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T15:44:45.407

如果你*真的*想重写你的代码，你可以使用[call_user_func](http://php.net/manual/en/function.call-user-func.php)，但这不是一个非常优雅的解决方案：

```
$foo = false;//best declare vars before using them, to avoid warnings in strict mode
$functions = array('getFoo', 'getBar','getJiggy','getWithIt');
while(!$foo && $func = array_shift($functions))
{
    $foo = call_user_func($func,null);//replace null with optional parameters
} 
```

但正如您所看到的，这将更难以维护......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-09T15:32:39.723

尝试

```
($foo = getFoo()) || ($foo = getBar()) || ($foo = getJiggy()); 
```

# c++-cli - 创建数据日志的最佳实践

> ID：12803449
> 
> 赞同：0
> 
> 时间：2012-10-09T15:28:29.200
> 
> 标签：c++-cli, visual-studio-2012

我正在创建一个将运行一堆电机的程序。这些电机与电机控制器接口，我的程序也与之通信。我可以告诉电机控制器定期向我提供有关其状态的数据，以及每个电机的状态和位置。我计划实时查看这些数据，以便操作员可以轻松查看是否有问题，并另外创建此数据的日志，以便之后有人可以返回查看问题所在，以及可能的原因。

问题来了：创建此日志时​​应该考虑什么？我刚从大学毕业，从来没有真正遇到过这样的情况。我当然知道如何创建文件、将数据放入其中并关闭文件，但是数据日志还有更多内容吗？

我已经考虑过的事情是：

1.  最好为每个数据记录加上时间戳。
2.  最好对数据进行详细说明，而不是保持二进制。更长的设置时间，更好的最终结果。
3.  无论程序如何结束，我都必须小心关闭文件。
4.  我正在使用 C++/CLI，我想知道 MSFT 是否有一些框架可以让这一切变得简单......
5.  通过测试是否最好在每次收到条目时写入条目，或者最好等到有几个条目并一次写入它们，从而最大限度地减少 CPU/磁盘的使用。

我还应该考虑什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:41:57.967

For something like this, what comes to mind is a comma-separated or tab-separated file. These will be human-readable in notepad, or you can bring it into Excel, and make graphs of the data. (Though I'm sure someone out there will consider CSV or tab-SV to be far away from 'best practice'. However, it's simple to implement, simple to read, and readable in hundreds of apps. That's a pretty darned good practice in my book.)

You can do something similar to this:

```
FileStream^ textFileStream = gcnew FileStream(logFileName, FileMode::Append, FileAccess::Write, FileShare::Read);
StreamWriter^ textFileWriter = gcnew StreamWriter(textFileStream, Encoding::Unicode);
textFileWriter->AutoFlush = true; 
```

1.  For a timestamp, just dump out `DateTime::Now->ToString()`.
2.  See above for some objects you can use. Use String::Format and send the output to the StreamWriter, that'll give you a verbose, human-readable log.
3.  If you're worried about what happens if your program crashes, don't worry about that too much. The StreamWriter as initialized above will write through to the FileStream as you use it, which will in turn write to the filesystem. This won't do a filesystem-level flush, only a filesystem-level write (the data will be in the OS's write-back cache, to be flushed to disk at some point in the next few seconds), so if the OS crashes, your log file will be incomplete, but a program crash will be handled file.
4.  There are various logging frameworks available for .Net, which you can use from C++/CLI, but I'm not too familiar with them.
5.  Even if you're logging the data each second, it's doubtful that you need to worry about batching up the data. Let's say you had hundreds of motors to write data for: that's what, 1 kilobyte per second? maybe 2? Just write the data out as needed. (If you want to minimize disk/CPU usage, consider just logging the data less frequently, once per 10 seconds or once per minute.)

# javascript - 当属性具有 xlink 命名空间时，Chrome 22 输出无效 XML

> ID：12803451
> 
> 赞同：24
> 
> 时间：2012-10-09T15:28:33.893
> 
> 标签：javascript, google-chrome, xmlserializer

我有以下最小的 JavaScript 片段：

```
var xml = '<El a:title="T" a:href="H" xmlns:a="http://www.w3.org/1999/xlink" />';
var dom = new DOMParser().parseFromString(xml, 'text/xml');
xml = new XMLSerializer().serializeToString(dom); 
```

当我在大多数浏览器中执行代码时（只需将其粘贴到浏览器的 JavaScript 控制台中），解析后序列化的 XML 与原始 XML 相同。例如在 Chrome 8 上，我得到：

```
<El xmlns:a="http://www.w3.org/1999/xlink" a:title="T" a:href="H"/> 
```

然而，在 Chrome 22 上，相同的代码片段将 XML 更改为：

```
<El xmlns:a="http://www.w3.org/1999/xlink" xlink:title="T" xlink:href="H"/> 
```

请注意，`xlink`title 和 href 属性使用的命名空间前缀未在任何地方定义，因此 XML 现在无效。正如您可能想象的那样，这会给随后尝试使用 XML 的代码带来各种问题。

这是 XMLSerializer 中的一个错误，还是我错过了一些关于如何序列化 DOM 的复杂性？

还有没有人找到我可以在代码中输入的解决方法，而不是让 XML 匹配`xlink`作为 XLink 命名空间前缀的明显偏好？

# 更新

我做了一些额外的测试，问题似乎是由于 XMLSerializer 识别 XLink 命名空间并坚持为其输出`xlink`前缀，而没有正确注册该前缀。

所以这个片段工作正常：

```
var xml = '<El a:title="T" a:href="H" xmlns:a="any-other-namespace-uri" />';
var dom = new DOMParser().parseFromString(xml, 'text/xml');
xml = new XMLSerializer().serializeToString(dom); 
```

所以在这里我将命名空间 URL 更改为不太知名的东西，输出现在有效：

```
<El xmlns:a="any-other-namespace-uri" a:title="T" a:href="H"/> 
```

以下片段也可以正常工作：

```
var xml = '<El a:title="T" a:href="H" xmlns:a="http://www.w3.org/2000/xlink" />';
var dom = new DOMParser().parseFromString(xml, 'text/xml');
xml = new XMLSerializer().serializeToString(dom); 
```

所以在这种情况下，我们使用 XLink 命名空间的“预期”前缀，然后它会毫无问题地序列化：

```
<El xmlns:a="http://www.w3.org/2000/xlink" a:title="T" a:href="H"/> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:40:24.637

我仍然很确定 Chrome 中存在一个错误`XMLSerializer`，很可能是在解决[Barbarrosa 指出的 XLink 属性的 SVG 处理时](https://stackoverflow.com/questions/8979267/xmlserializer-strips-xlink-from-xlinkhtml-svg-image-tag)引入的。[但鉴于我为它制作的错误报告](http://code.google.com/p/chromium/issues/detail?id=155135)没有得到回应，我们不得不继续前进并解决这个问题。

我们通过调用这个函数来解决这个问题`documentElement`：

```
function EnsureXLinkNamespaceOnElement(element)
{
  if (element.nodeType == 1)
  {
    var usesXLinkNamespaceUri = false;
    var hasXLinkNamespacePrefixDefined = false;
    for (var i = 0; i < element.attributes.length; i++) 
    {
      var attribute = element.attributes[i];
      if (attribute.specified)
      {
        if (attribute.name.indexOf("xmlns:xlink") == 0) 
        {
          hasXLinkNamespacePrefixDefined = true;
        } 
        else if (attribute.namespaceURI == "http://www.w3.org/1999/xlink")
        {
          usesXLinkNamespaceUri = true;
        }
      }
    }
    if (usesXLinkNamespaceUri && !hasXLinkNamespacePrefixDefined)
    {
      element.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');
    }

    for (i = 0; i < element.childNodes.length; i++)
    {
      EnsureXLinkNamespaceOnElement(element.childNodes[i]);
    }
  }
} 
```

该函数只是确保`xmlns:xlink`在 XLink 命名空间中具有属性的任何元素上声明该属性。由于该函数会遍历树，因此可能非常耗时，因此我只在 Chrome 22 及更高版本中调用它。

请注意，在大多数情况下，您也可以简单地`xmlns:xlink`在文档元素上添加命名空间，因为它将从那里继承。但是在我们的例子中，还有一些其他代码使用正则表达式去除了文档元素，所以我们决定安全行事，并在可能需要的任何地方添加属性。

# 更新（20130324）：

该[错误](https://code.google.com/p/chromium/issues/detail?id=155135)已在 Chrome Canary 26 中修复和验证。我自己也可以在版本上验证它`25.0.1364.172 m`。

# html - CSS 固定表格单元格中的背景定位

> ID：12803456
> 
> 赞同：1
> 
> 时间：2012-10-09T15:28:39.020
> 
> 标签：html, css, background-image, css-tables, cross-browser

有 3 列，2 侧列必须可随浏览器窗口展开，而中心是固定宽度。

你可以在这里看到我的代码：http: [//jsfiddle.net/gwF5B/](http://jsfiddle.net/gwF5B/)

我无法弄清楚如何让左列上的背景图像在与表格单元格的“右下角”对齐时保持固定。图像实际上比想象的更正确，并且由于某种原因没有与单元格的右边缘对齐。

有没有其他人遇到过这个问题？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:47:20.837

您的问题是您将背景设置为 .left-column 的背景，因此它是该单元格中两个单元格的背景。要解决此问题，请将背景属性设置为 td #logo-wrap。基本上，图像没有对齐太靠右，它被设置为整个 .left-column 的背景（包括具有#logo-wrap 的表格，这是您想要设置背景的对象）。只需为#logo-wrap 添加另一个css 选择器并将图像设置为该td 的背景。

# android - How to display all the phone contacts (name, phone number) in a textView or String?

> ID：12803457
> 
> 赞同：0
> 
> 时间：2012-10-09T15:28:38.507
> 
> 标签：android

```
public class ImportContactsActivity extends Activity {
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contact);
        TextView txt = (TextView)findViewById(R.id.con);
        String msg = "";

        ContentResolver cr = getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        while (cursor.moveToNext()) {
                String name = cursor.getString(cursor.getColumnIndexOrThrow(People.NAME));
                String number = cursor.getString(cursor.getColumnIndexOrThrow(People.NUMBER));
                String email = cursor.getString(cursor.getColumnIndexOrThrow(People.PRIMARY_EMAIL_ID));

                msg += name + " " + number + " " + email + "\n";
        }
        txt.setText(msg.toString());
    }
} 
```

I am developing an application in which the application is able to send an email containing all the current phone contacts (name + phone number) as a backup alternative. I am trying out on how to extract all the phone contacts information and display them on the TextView... But I cannot do it, someone please consult me. Thanks...

```
LogCat
10-09 15:22:48.634: E/AndroidRuntime(680): FATAL EXCEPTION: main
10-09 15:22:48.634: E/AndroidRuntime(680): java.lang.RuntimeException: Unable to start   activity ComponentInfo{com.example.importcontacts/com.example.importcontacts.ImportContactsActivity} : java.lang.IllegalArgumentException: column 'name' does not exist
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.os.Looper.loop(Looper.java:137)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-09 15:22:48.634: E/AndroidRuntime(680):  at java.lang.reflect.Method.invokeNative(Native Method)
10-09 15:22:48.634: E/AndroidRuntime(680):  at java.lang.reflect.Method.invoke(Method.java:511)
10-09 15:22:48.634: E/AndroidRuntime(680):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-09 15:22:48.634: E/AndroidRuntime(680):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-09 15:22:48.634: E/AndroidRuntime(680):  at dalvik.system.NativeStart.main(Native Method)
10-09 15:22:48.634: E/AndroidRuntime(680): Caused by: java.lang.IllegalArgumentException: column 'name' does not exist
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:267)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.database.CursorWrapper.getColumnIndexOrThrow(CursorWrapper.java:78)
10-09 15:22:48.634: E/AndroidRuntime(680):  at com.example.importcontacts.ImportContactsActivity.onCreate(ImportContactsActivity.java:46)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.Activity.performCreate(Activity.java:4465)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-09 15:22:48.634: E/AndroidRuntime(680):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-09 15:22:48.634: E/AndroidRuntime(680):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:17:38.407

使用`ContactsContract.CommonDataKinds.Phone.CONTENT_URI`而不是`ContactsContract.Contacts.CONTENT_URI`这样您就可以获得电话号码，并更改这些行

```
String name = cursor.getString(cursor.getColumnIndexOrThrow(People.NAME));
String number = cursor.getString(cursor.getColumnIndexOrThrow(People.NUMBER));
String email = cursor.getString(cursor.getColumnIndexOrThrow(People.PRIMARY_EMAIL_ID)); 
```

至

```
String name = cursor.getString(cursor.getColumnIndexOrThrow(Phone.DISPLAY_NAME));
String number = cursor.getString(cursor.getColumnIndexOrThrow(Phone.NUMBER)); 
```

您将需要另一个查询来获取 email_id。从第一个光标中，您可以像这样获取联系人 ID

```
long contactId = cursor.getLong(cursor.getColumnIndexOrThrow(Phone.CONTACT_ID)); 
```

`contactId`现在使用过滤器中的查询电子邮件 uri

```
long emailId;
Cursor cur = getContentResolver()
                    .query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                     new String[]{"_id"},
                     "contact_id = " + contactId,
                     null,null);
if(cur != null && cur.moveToFirst()){
    emailId = cur.getLong(0);
} 
```

# wordpress - WordPress image url

> ID：12803459
> 
> 赞同：1
> 
> 时间：2012-10-09T15:28:47.190
> 
> 标签：wordpress, url

```
$path = bloginfo('template_url');
$image_url = $path.'image.jpg'; 
```

I do not know why, but `$path = bloginfo('stylesheet_directory');` is displaying url without `echo`, any ideas where the problem is?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:32:38.317

Yes[`bloginfo`](http://codex.wordpress.org/Template_Tags/bloginfo)自动显示属性（同时返回 null）。我想你想使用[`get_bloginfo`](http://codex.wordpress.org/Function_Reference/get_bloginfo)：

```
$path = get_bloginfo('stylesheet_directory');
$image_url = $path.'image.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:32:21.487

You need get_bloginfo() I believe.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:33:26.577

**Bloginfo()**总是将结果打印到浏览器。如果您需要在 PHP 中使用的值，请尝试使用**get_bloginfo()**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T17:12:16.673

您必须使用`template_directory`而不是`template_url`

```
<?php get_bloginfo('template_directory').'image.jpg'; ?> 
```

# c# - How to make sure a given dll function did its job?

> ID：12803460
> 
> 赞同：0
> 
> 时间：2012-10-09T15:28:54.720
> 
> 标签：c#, .net, user-interface, dll

I (still a novice programmer) have been given 2 dlls to write a GUI program to view/change tags from a running software called InTouch:

*   IOM.InTouchDataAccess;
*   NDde;

Everything works well ; Read(string tagName) works, TagDotField(string) works well

and more... The issue is when I use the method Write(tagName, inputValue).

```
string inputValue = ValueBox.Text;
renamethisobject.Write(tagName, inputValue);
MessageBox.Show("Tag Successfully changed to " + renamethisobject.Read(tagName)); 
```

In the MessageBox, I made sure that the object gives back the **changed** tag, which it *does*. The problem is that in the InTouch program, the tag is not change. Why is that? Is it an issue in the dll ?

P.S. I do not have access to the dll definition, only its method names. Should I ask the programmer who did the dlls?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:32:26.687

If you don't have any documentation and asking the person who created the code doesn't work out, you could try to decompile. [http://www.telerik.com/products/decompiler.aspx](http://www.telerik.com/products/decompiler.aspx)

# sip - Freeswitch with Skype Connect external profile keeps timing out and disconnecting

> ID：12803463
> 
> 赞同：0
> 
> 时间：2012-10-09T15:29:04.433
> 
> 标签：sip, voip, skype, telephony, freeswitch

I have a Skype Connect SIP profile set up on a small Freeswitch setup. All seems fine - I can make incoming and outgoing calls. Problem is - if there is no activity for a while, incoming calls time out and drop. That is, the caller hears a long ring and then the call drops without connecting.

If I restart Freeswitch, the problem goes away. If an outgoing call or another incoming call has happened recently, the problem does not occur.

I see frequent messages in my Freeswitch log as follows:

```
2012-10-09 16:12:04.043891 [NOTICE] sofia_reg.c:415 Registering skype
2012-10-09 16:16:51.184120 [NOTICE] sofia_reg.c:415 Registering skype
2012-10-09 16:21:38.324166 [NOTICE] sofia_reg.c:415 Registering skype 
```

A call immediately after one of these registrations succeeds.

I am off the opinion that the registration is timing out and dropping. Upon detection by Freeswitch it reconnects, but during the window when it is down, incoming calls fail.

I have replaced my router which has not made a big pile of difference.

External Sip Profile is as follows:

```
<include>
  <gateway name="skype">
  <param name="realm" value="sip.skype.com"/>
  <param name="proxy" value="sip.skype.com"/>
  <param name="from-domain" value="sip.skype.com"/>
  <param name="username" value="XXXXXXXXXXXXX"/>
  <param name="from-user" value="XXXXXXXXXXXXX"/>
  <param name="password" value="XXXXXXXXXXXXX"/>
  <param name="contact-params" value="XXXXXXXXXXXXX@sip.skype.com"/>
  <param name="extension" value="XXXXXXXXXXXXX"/>
  <param name="extension-in-contact" value="true"/>
  <param name="retry-seconds" value="0"/>
  <param name="caller-id-in-from" value="false"/>
  <param name="ping" value="30"/>
  </gateway>
</include> 
```

username and password have been replaced with XXXXs for obvious reasons. any help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:34:58.210

听起来您并没有告诉 FS 发送保持活动的数据包。

对于 Natted 软电话，在你的**sofia.conf**中试试这个：
< param name="nat-options-ping" value="true" />

对于所有已注册的软电话，请尝试：
< param name="all-reg-options-ping" value="true" />

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:03:40.307

我认为将“过期秒数”设置为某个较低的值是有意义的，这应该会迫使 FreeSWITCH 更频繁地重新注册（默认为 3600）。此外，查看在 REGISTER 和 ACK 消息中来回发送的“过期”参数是有意义的。

# c++ - Qt::QMDISubWindow maintaining aspect ratio while resizing?

> ID：12803464
> 
> 赞同：3
> 
> 时间：2012-10-09T15:29:07.323
> 
> 标签：c++, qt, user-interface, qt4

I have a `QMDIArea` in which I am having Multiple `QMdiSubWindows`. User can freely resize these subwindows any time. I want to maintain aspect ratio of the subwindows during resizing.

I have tried re-implementing `hasHeightForWidth()`, making a custom layout manager and one third party library `libqxt`'s `qxtLetterBoxWidget`. None of these methods which I found on Internet worked for me.

As per my understanding they don't work for "Top Level Widgets" they will only work for widgets inside containers. Right now I am achieving this aspect ratio by reimplementing `resizeEvent()` and calling `resize()` inside it. But even after lot of efforts i am having flickering issue while resizing diagonally in some cases window also moves unexpectedly (though this is because some unexpected moves are getting called from that resize event). But all in all its not looking good for user experience.

So now my question is is there any other mechanism availabe that QT or any other third party library provides for maintaining this lock aspect ratio ?

can I somehow make that `hasHeightforWidth` method work for my `QMdiSubwindows` ?

# jquery - jQuery：有没有更好的方法来切换两个 div？

> ID：12803465
> 
> 赞同：1
> 
> 时间：2012-10-09T15:29:09.740
> 
> 标签：jquery

我目前正在使用以下代码块在两个 div 之间切换。

```
$('.btn-my-projects').click(function(e) {
    $('.my-projects').show();
    $('.all-projects').hide();
});

$('.btn-all-projects').click(function(e) {
    $('.my-projects').hide();
    $('.all-projects').show();
}); 
```

显然它有效，但我想知道是否有更好的方法来做到这一点。感觉可以将其压缩为一个处理程序与两个处理程序。如果我使用委托，我可以将其设为单个处理程序，但它会变得更长，需要进行条件检查以查看单击了哪个按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:32:28.760

简单的：

```
function toggle(all) {
    $('.all-projects').toggle(all);
    $('.my-projects').toggle(!all);
}

$('.btn-my-projects').click(function() {
    toggle(false);
});

$('.btn-all-projects').click(function() {
    toggle(true);
}); 
```

如果你想更简洁：

```
function makeClickHandler(all) {
    return function () {
        $('.all-projects').toggle(all);
        $('.my-projects').toggle(!all);
    };
}

$('.btn-my-projects').click(makeClickHandler(false));
$('.btn-all-projects').click(makeClickHandler(true)); 
```

* * *

`data-*`或者，您可以采用完全不同的方法，并使用 HTML5属性将显示和隐藏 div 的按钮之间的链接放入标记中。像这样的东西：

```
<button class="project-control" data-show=".all-projects">
    Show all projects
</button>
<button class="project-control" data-show=".my-projects">
    Show my projects
</button>

<div class="project all-projects">...</div>
<div class="project my-projects">...</div> 
```

使用这样的 JavaScript：

```
$('.project-control').on('click', function () {
    var showSelector = $(this).data('show');
    $('.project').hide();
    $(showSelector).show();
}); 
```

注意在实际页面中，您可能希望缓存选定的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:32:05.167

您可以使用 toggle() 代替 show() 和 hide()。然后，您可以将 .projects 类添加到 .my-projects 和 .all-projects div，然后切换该选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:31:16.853

使用自定义属性怎么样？

html:

```
<div class='my-projects'>my-projects</div>
<div class='all-projects'>all-projects</div>
<span class='toggler' hide='.all-projects' show='.my-projects'>btn-my-projects</span>
<span class='toggler' hide='.my-projects' show='.all-projects'>btn-all-projects</span> 
```

和 Javascript：

```
$('.toggler').click(function(e) {
    $($(this).attr('hide')).hide();
    $($(this).attr('show')).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:31:44.643

您使用的方法是我会做的方式，但是如果您想浓缩，jquery的切换可能对您有用[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# jqgrid - JQgrid 日期格式化程序 Ymd

> ID：12803469
> 
> 赞同：1
> 
> 时间：2012-10-09T15:29:31.480
> 
> 标签：jqgrid

我对 jqgrid 日期格式化程序有疑问。在我的数据库表中，我有这个日期格式“Ymd”，如“20120219”。这里是本专栏的全部代码：

```
$col = array();
$col["title"] = "Date";
$col["name"] = "date_dem";
$col["width"] = "40";
$col["editable"] = false;
$col["editoptions"] = array("size"=>20);
$col["formatter"] = "date"; // format as date
$col["formatoptions"] = array("srcformat"=>'Ymd',"newformat"=>'d/m/Y');
$cols[] = $col; 
```

当我使用此代码时，我为每条记录得到相同的输出：“01/01/1970”。有人知道这个问题吗？

先进的 THX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:52:59.700

即使有关日期的信息被保存为`Ymd`没有任何分隔符，您也必须从服务器返回在年、月和日之间*带有一些分隔符的信息。*问题是 jqGrid 的当前代码首先使用`'\'`, `'/'`, `':'`, `'_'`,或作为分隔符拆分输入日期`';'`（参见代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/jquery.fmatter.js#L160)）`'.'``','`

```
date = String(date).split(/[\\\/:_;.,\t\T\s-]/); 
```

然后使用`srcformat`解码它。所以你不能`formatter: "date"`用来解码日期，比如`20121009`. *我建议您在服务器端*转换`20121009`为并从服务器返回始终采用[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式的日期，这是 jqGrid 使用的默认格式。或者，您可以使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)来显示日期。`2012-10-09`

# java - java.net.SocketException universal image loader

> ID：12803475
> 
> 赞同：0
> 
> 时间：2012-10-09T15:29:55.980
> 
> 标签：java, android, universal-image-loader

This error java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer) freeze my fragment besides progressBar keeps turning even after displaying image, how do i fix this ?

```
 10-09 16:10:15.933: W/System.err(19358): java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)
    10-09 16:10:15.937: W/System.err(19358):    at libcore.io.IoBridge.maybeThrowAfterRecvfrom(IoBridge.java:552)
    10-09 16:10:15.937: W/System.err(19358):    at libcore.io.IoBridge.recvfrom(IoBridge.java:516)
    10-09 16:10:15.941: W/System.err(19358):    at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
    10-09 16:10:15.941: W/System.err(19358):    at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
    10-09 16:10:15.945: W/System.err(19358):    at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
    10-09 16:10:15.945: W/System.err(19358):    at java.io.BufferedInputStream.read(BufferedInputStream.java:304)
    10-09 16:10:15.945: W/System.err(19358):    at libcore.net.http.FixedLengthInputStream.read(FixedLengthInputStream.java:45)
    10-09 16:10:15.957: W/System.err(19358):    at java.io.InputStream.read(InputStream.java:163)
    10-09 16:10:15.972: W/System.err(19358):    at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
    10-09 16:10:15.976: W/System.err(19358):    at java.io.BufferedInputStream.read(BufferedInputStream.java:309)
    10-09 16:10:15.976: W/System.err(19358):    at java.io.FilterInputStream.read(FilterInputStream.java:138)
    10-09 16:10:15.976: W/System.err(19358):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
    10-09 16:10:15.980: W/System.err(19358):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:527)
    10-09 16:10:15.980: W/System.err(19358):    at com.nostra13.universalimageloader.core.ImageDecoder.decode(ImageDecoder.java:83)
    10-09 16:10:15.980: W/System.err(19358):    at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc(LoadAndDisplayImageTask.java:219)
    10-09 16:10:15.980: W/System.err(19358):    at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:139)
    10-09 16:10:15.992: W/System.err(19358):    at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:72)
    10-09 16:10:15.996: W/System.err(19358):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
    10-09 16:10:15.996: W/System.err(19358):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    10-09 16:10:15.996: W/System.err(19358):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    10-09 16:10:15.996: W/System.err(19358):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    10-09 16:10:15.996: W/System.err(19358):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    10-09 16:10:16.000: W/System.err(19358):    at java.lang.Thread.run(Thread.java:856)
    10-09 16:10:16.004: W/System.err(19358): Caused by: libcore.io.ErrnoException: recvfrom failed: ECONNRESET (Connection reset by peer)
    10-09 16:10:16.008: W/System.err(19358):    at libcore.io.Posix.recvfromBytes(Native Method)
    10-09 16:10:16.008: W/System.err(19358):    at libcore.io.Posix.recvfrom(Posix.java:131)
    10-09 16:10:16.012: W/System.err(19358):    at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
    10-09 16:10:16.012: W/System.err(19358):    at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
    10-09 16:10:16.012: W/System.err(19358):    ... 21 more
    10-09 16:10:16.015: D/skia(19358): ---- read threw an exception
    10-09 16:10:16.015: D/skia(19358): --- decoder->decode returned false
    10-09 16:10:16.015: E/ImageLoader(19358): null
    10-09 16:10:16.015: E/ImageLoader(19358): java.lang.NullPointerException
    10-09 16:10:16.015: E/ImageLoader(19358):   at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.saveImageOnDisc(LoadAndDisplayImageTask.java:222)
    10-09 16:10:16.015: E/ImageLoader(19358):   at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:139)
    10-09 16:10:16.015: E/ImageLoader(19358):   at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:72)
    10-09 16:10:16.015: E/ImageLoader(19358):   at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
    10-09 16:10:16.015: E/ImageLoader(19358):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    10-09 16:10:16.015: E/ImageLoader(19358):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    10-09 16:10:16.015: E/ImageLoader(19358):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    10-09 16:10:16.015: E/ImageLoader(19358):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    10-09 16:10:16.015: E/ImageLoader(19358):   at java.lang.Thread.run(Thread.java:856)
    10-09 16:11:04.609: D/dalvikvm(19358): Debugger has detached; object registry had 1 entries 
```

I am using Image Universal Loader like this :

```
 public void imageHolder(String url, ImageView iv)
{
    File cacheDir = StorageUtils.getOwnCacheDirectory(context, "UniversalImageLoader/Cache");

    ImageLoader imageLoader = ImageLoader.getInstance();

    ImageLoaderConfiguration config = new     ImageLoaderConfiguration.Builder(context)
//      .memoryCacheExtraOptions(480, 800) 
//      .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 50) 
    .threadPoolSize(3)
    .threadPriority(Thread.NORM_PRIORITY - 1)
    .denyCacheImageMultipleSizesInMemory()
    .offOutOfMemoryHandling()
    .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024)) 
    .discCache(new UnlimitedDiscCache(cacheDir)) 
    .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
    .imageDownloader(new URLConnectionImageDownloader(5 * 1000, 20 * 1000)) 
    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
    .enableLogging()
    .build();
    imageLoader.init(config);
    // Creates display image options for custom display task (all options are optional)
    DisplayImageOptions options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.error)
    .showImageForEmptyUri(R.drawable.error)
    .cacheInMemory()
    .cacheOnDisc()
    .imageScaleType(ImageScaleType.IN_SAMPLE_POWER_OF_2)
    .build();
    // Load and display image
    imageLoader.displayImage(url, iv, options, new ImageLoadingListener() {
        @Override
        public void onLoadingStarted() {
            fv.pb.setVisibility(View.VISIBLE);          
        }
        @Override
        public void onLoadingFailed(FailReason failReason) {
            fv.pb.setVisibility(View.GONE);             
        }
        @Override
        public void onLoadingComplete(Bitmap loadedImage) {
            fv.pb.setVisibility(View.GONE);             
        }
        @Override
        public void onLoadingCancelled() {
            fv.pb.setVisibility(View.GONE);             
        }
    });
} 
```

# objective-c - glReadPixels 并保存到图像

> ID：12803479
> 
> 赞同：0
> 
> 时间：2012-10-09T15:30:18.477
> 
> 标签：objective-c, macos, opengl

我有应用程序，用户可以在其中拖放图像，并且正在重新绘制它以`OpenGL`进行一些可行的处理。一切正常。当用户想要保存他的图像时，它的工作方式如下：

```
glReadPixels -> NSBitmapImageRep -> NSData -> Write to file 
```

这也有效。几乎。对于某些图像，它无法正常工作。

例如：

***.png***

当我打开并保存此图像时： ![在此处输入图像描述](../Images/8a4a42ed031ac548a1e47f21c251216a.png)

我得到：
![在此处输入图像描述](../Images/39d6bacb9979650dc83459487626f3fb.png)

如果我打开并保存此图像： ![在此处输入图像描述](../Images/2a8e44028db97df27cd722b755a06470.png)

我得到：
![在此处输入图像描述](../Images/b2714c7da28a7622ea2e139893a3ef13.png)

***.jpg***

如果我打开并保存：
![在此处输入图像描述](../Images/912a4c321b972e9a42b0293dbdc8d619.png)

我得到：
![在此处输入图像描述](../Images/f532b6f1aad6074681fd08c1207ffafe.png)

当我打开并保存时：
![在此处输入图像描述](../Images/794f852a33d7d2b6b2b5a020a2a98009.png)

我得到：
![在此处输入图像描述](../Images/9b2edb64c780e9974af33050060134d7.png)

所以有时图像保存得不好。为什么会这样？

* * *

这是我`NSBitmapImageRep`的分配方式：

```
NSBitmapImageRep *imageRep = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL pixelsWide:_image_width pixelsHigh:_image_height bitsPerSample:8 samplesPerPixel:3 hasAlpha:NO isPlanar:NO colorSpaceName:NSDeviceRGBColorSpace bytesPerRow:3 * _image_width bitsPerPixel:0]; 
```

并且`GL_PACK_ALIGNMENT`没有被编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:35:55.610

在填充像素数据之前，您必须告诉 OpenGL 如何“格式化”它。这意味着设置[→glPixelStore](http://www.opengl.org/sdk/docs/man/xhtml/glPixelStore.xml)的所有 GL_PACK_ 参数。对您来说最重要的是对齐参数。还要记住，用每个像素正确数量的组件编写文件，并从 OpenGL 读取正确的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:12:24.167

我有同样的

您只需要设置正确的 bytesPerRow

```
bytesPerRow:(width*3+3)&~3 
```

# c# - 用于返回数据的命令模式

> ID：12803480
> 
> 赞同：6
> 
> 时间：2012-10-09T15:30:25.957
> 
> 标签：c#, design-patterns, solid-principles

我正在开发一个应用程序并尝试遵循 Robert C. Martin 的 SOLID 原则。我正在使用命令模式，我想知道实现。在他在 C# 中的清洁代码和敏捷原则、模式和实践中的所有示例中，他的命令对象从不返回任何内容。他的命令界面是；

```
public interface Command
{
  void Execute();
} 
```

所有示例都是“AddEmployee”、“DelEmployee”、“EditEmployee”等。我是否有一个“GetAllEmployees”命令，或者是否有一些其他特殊的“Interactor”我会为此特定目的创建？我正在考虑处理该特定情况的一种方法是拥有两个接口，一个像上面那样的非通用接口和一个像这样的通用接口；

```
public interface Command<T>
{
  T Execute();
} 
```

我要问的是，这将是这种模式的可接受实现，还是我们可以从应用程序访问数据的另一种方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:32:35.503

命令是改变状态（更新、删除或添加）的东西。

获取数据（而不是更改数据）时，您将使用*查询*。

另请参阅[CQS](http://en.wikipedia.org/wiki/Command-query_separation)和相关的[CQRS](http://martinfowler.com/bliki/CQRS.html)。

# java - Attaching class to another main class in java

> ID：12803485
> 
> 赞同：0
> 
> 时间：2012-10-09T15:30:40.737
> 
> 标签：java

I'm creating an applet so I decided to use two classes, but then I was asked to have a single java file. Could I add my other class to the main class? If so, how? I tried declaring my secondary class private, but it didn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:31:45.173

Just declare your another class right after your main class without any modifier (assuming you want it as separate detached class). Otherwise, [Nested Classes](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html) (or) annonymous classes may be the way to go.

Example:

Your file name is `Hello.java`

```
public class Hello{
  .........
}

class AnotherClass{
  ..........
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:33:03.107

每个文件一个公共类，并且类名必须与文件名匹配。

但是您可以拥有任意数量的包私有类。将 main 方法放在公共类中。

例如，在 Foo.java 中：

```
public class Foo {
}

class Bar {
}

class Baz {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:39:38.933

如果您需要单个 .java 文件，您可以在主类中声明第二类私有，或者将其放在文件中的主类旁边而不使用“public”修饰符。您的文件将如下所示：

```
public class Main {
    //...
}

class Inner {
    //...
} 
```

但是，如果您需要一个 .class 文件（编译后的 .java 文件），我要告诉您一个坏消息，它无法完成，Java 编译器总是为每个类生成一个 .class 文件。现在取决于将程序重写为单个类，或者在本地编译第二个，获取字节，将它们静态存储在主类中，并使用类加载器在运行时加载字节会有多大的麻烦。 . 这对我来说听起来很有趣:)

# android - 测试双击事件

> ID：12803489
> 
> 赞同：0
> 
> 时间：2012-10-09T15:30:56.603
> 
> 标签：android, junit

我想知道是否可以模拟双敲事件。我试过

```
TouchUtils.clickView(...) 
```

连续两次，但它没有工作。我也尝试过这种方式：

```
 long downTime = SystemClock.uptimeMillis();
    long eventTime = SystemClock.uptimeMillis();

    eventTime +=200;
    downTime +=200;

    Instrumentation instrumentation = getInstrumentation();

    MotionEvent event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_DOWN, mainview.getWidth()/2, mainview.getHeight()/2, 0);
    instrumentation.sendPointerSync(event);

    event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_UP, mainview.getWidth()/2, mainview.getHeight()/2, 0);
    instrumentation.sendPointerSync(event);

    downTime = SystemClock.uptimeMillis();
    eventTime = SystemClock.uptimeMillis();

    eventTime +=200;
    downTime += 200;

    event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_DOWN, mainview.getWidth()/2, mainview.getHeight()/2, 0);
    instrumentation.sendPointerSync(event);

    event = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_UP, mainview.getWidth()/2, mainview.getHeight()/2, 0);
    instrumentation.sendPointerSync(event); 
```

但事件仍然没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:43:03.960

查看涵盖您需要使用[的 onDoubleTap 手势检测器的测试](http://www.java2s.com/Open-Source/Android/android-core/platform-cts/android/view/cts/GestureDetectorTestUtil.java.htm)`TouchUtils.tapView`

# php - 如何在页面刷新时将表单数据存储到会话中？

> ID：12803490
> 
> 赞同：0
> 
> 时间：2012-10-09T15:31:02.297
> 
> 标签：php, forms, session

我有一个表单和一个添加按钮，可在现有表单下方添加相同的表单字段。如果在上面的表格中输入，我想保存数据。下面是我的代码

```
<form action="?file=<?= $file ?>" method="post" name="frm_news" enctype="multipart/form-data" class="well">

    <h4>
        Send Daily Work Report
    </h4>

        <table id="prjct_tbl">

            <tr align="left" valign="middle"> 

                <td height="18" class="text7" ><a id="link" href="?file=daily_report.php&prj_num=<?php if(!isset($_REQUEST['prj_num'])){echo 2;}else {$count  =    $_REQUEST['prj_num']; echo $count+1;}?>" >Add another Project</a></td>

            </tr>
            <tr>
                <td><hr /></td>
            </tr>
            <tr align="center" valign="top" > 
                <td colspan="3" align="center"><? if ($MSG != "") {
    echo $MSG;
} ?></td>
            </tr>

            <tr >
                <td width="32%" align="right">Project Name :&nbsp;</td>
                <td width="68%"><select name="pid[]" id="pid">
                        <option value="" selected="selected">Select</option>
                        <? for ($i = 0; $i < count($data); $i++) { ?>
                            <option value="<?= $data[$i]['id'] ?>"><?= $data[$i]['pname'] ?></option>
                    <? } ?>
                    </select></td>
            </tr>
            <tr> 

                <td align="right" valign="top"><span style="color:red">*</span> Deliverable :&nbsp;</td>
                <td>
                    <select name="d_id[]">
                        <option value="">Select</option>
                        <?php
                            $sql = "SELECT tbl_deliverable.*, user_to_deliverable.d_id from tbl_deliverable, user_to_deliverable where tbl_deliverable.id = user_to_deliverable.d_id AND user_to_deliverable.u_id = '".$info['id']."'";
                            $res = mysql_query($sql);
                            while ($d_data = mysql_fetch_array($res)) {
                                ?>
                        <option value ="<?php echo $d_data['id']?>"><?php echo $d_data['name']?></option>
                                    <?php
                            }
                            ?>
                    </select>

                </td>
            </tr>
            <tr>                  
                <td align="right"  valign="top"><span style="color:red">*</span>Time Spent :&nbsp;</td>
                <td><select name="hrs[]" class="Field" id="hrs" required style="width: 80px;">
                        <option value="" selected>Hour</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>

                    </select>
                    <select name="min[]" class="Field" id="min" required style="width: 80px;">
                        <option value="">Minute</option>
                        <option value="00">00</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                        <option value="41">41</option>
                        <option value="42">42</option>
                        <option value="43">43</option>
                        <option value="44">44</option>
                        <option value="45">45</option>
                        <option value="46">46</option>
                        <option value="47">47</option>
                        <option value="48">48</option>
                        <option value="49">49</option>
                        <option value="50">50</option>
                        <option value="51">51</option>
                        <option value="52">52</option>
                        <option value="53">53</option>
                        <option value="54">54</option>
                        <option value="55">55</option>
                        <option value="56">56</option>
                        <option value="57">57</option>
                        <option value="58">58</option>
                        <option value="59">59</option>                  
                    </select></td>
            </tr>
            <tr>                  
                <td align="right"  valign="top">Percentage of deliverable completed :&nbsp;</td>
                <td><input name="percent[]" id="percent" type="text">   
                    <input name="employee" type="hidden" id="employee" value="<?= $info['fname'] ?> <?= $info['lname'] ?>">
                    <input name="email" type="hidden" id="email" value="<?= $info['email'] ?>">
                    <input name="id" type="hidden" id="id" value="<?= $info['id'] ?>"></td>
            </tr>
            <tr> 
                <td align="right" valign="top"  nowrap>Comments:&nbsp;</td>
                <td><textarea name="comments[]" id="comments"></textarea></td>
            </tr>
            <tr> 
                <td colspan="2"><hr /></td>

            </tr>
            <?php
            if(isset($_REQUEST['prj_num'])) {
                for($l=1;$l<$_REQUEST['prj_num'];$l++){
                ?>
            <tr >
                <td width="32%" align="right">Project Name :&nbsp;</td>
                <td width="68%"><select name="pid[]" id="pid">
                        <option value="" selected="selected">Select</option>
                        <? for ($i = 0; $i < count($data); $i++) { ?>
                            <option value="<?= $data[$i]['id'] ?>"><?= $data[$i]['pname'] ?></option>
                    <? } ?>
                    </select></td>
            </tr>
            <tr> 

                <td align="right" valign="top"><span style="color:red">*</span> Deliverable :&nbsp;</td>

<td>
                    <select name="d_id[]">
                        <option value="">Select</option>
                        <?php
                            $sql = "SELECT tbl_deliverable.*, user_to_deliverable.d_id from tbl_deliverable, user_to_deliverable where tbl_deliverable.id = user_to_deliverable.d_id AND user_to_deliverable.u_id = '".$info['id']."'";
                            $res = mysql_query($sql);
                            while ($d_data = mysql_fetch_array($res)) {
                                ?>
                        <option value ="<?php echo $d_data['id']?>"><?php echo $d_data['name']?></option>
                                    <?php
                            }
                            ?>
                    </select>

                </td>
            </tr>
            <tr>                  
                <td align="right"  valign="top"><span style="color:red">*</span>Time Spent :&nbsp;</td>
                <td><select name="hrs[]" class="Field" id="hrs" required style="width: 80px;">
                        <option value="" selected>Hour</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>

                    </select>
                    <select name="min[]" class="Field" id="min" required style="width: 80px;">
                        <option value="">Minute</option>
                        <option value="00">00</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                        <option value="41">41</option>
                        <option value="42">42</option>
                        <option value="43">43</option>
                        <option value="44">44</option>
                        <option value="45">45</option>
                        <option value="46">46</option>
                        <option value="47">47</option>
                        <option value="48">48</option>
                        <option value="49">49</option>
                        <option value="50">50</option>
                        <option value="51">51</option>
                        <option value="52">52</option>
                        <option value="53">53</option>
                        <option value="54">54</option>
                        <option value="55">55</option>
                        <option value="56">56</option>
                        <option value="57">57</option>
                        <option value="58">58</option>
                        <option value="59">59</option>                  
                    </select></td>
            </tr>
            <tr>                  
                <td align="right"  valign="top">Percentage of deliverable completed :&nbsp;</td>
                <td><input name="percent[]" id="percent" type="text">   
                    <input name="employee" type="hidden" id="employee" value="<?= $info['fname'] ?> <?= $info['lname'] ?>">
                    <input name="email" type="hidden" id="email" value="<?= $info['email'] ?>">
                    <input name="id" type="hidden" id="id" value="<?= $info['id'] ?>"></td>
            </tr>
            <tr> 
                <td align="right" valign="top"  nowrap>Comments:&nbsp;</td>
                <td><textarea name="comments[]" id="comments"></textarea></td>
            </tr>
            <tr> 
                <td colspan="2"><hr /></td>

            </tr>
            <?php
            }}
            ?>
            <tr bordercolor="#FFFFFF"> 
                <td align="center"> 
                </td>
                <td align="left">&nbsp;
                    <input type="submit" name="Submit" id="Submit" value="  Send  " class="btn btn-primary">
                    <input type="reset" name="Reset" value=" Reset " class="btn"></td>
            </tr>
        </table>

</form> 
```

这是添加表单元素，但在页面刷新时，表单字段为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:44:21.943

我可以看到字段为空的唯一原因是 $info 数组为空或未定义。您确定在刷新页面时（表单提交后）重新填充该数组吗？你能打开错误报告吗？您可能会在字段中看到一些错误消息。

# android - ICS 上的 DeleteGlobalRef 崩溃

> ID：12803493
> 
> 赞同：3
> 
> 时间：2012-10-09T15:31:15.697
> 
> 标签：android, crash, android-ndk

我使用 NDK 为 Java 分配大缓冲区：

```
allocNativeBuffer(JNIEnv* env, jobject cls, jlong size) {
    void* buffer = malloc(size);
    jobject directBuffer = env->NewDirectByteBuffer(buffer, size);
    jobject globalRef = env->NewGlobalRef(directBuffer);
    return globalRef;
} 
```

使用此缓冲区后，我将其释放：

```
freeNativeBuffer(JNIEnv* env, jobject cls, jobject globalRef) {
    void *buffer = env->GetDirectBufferAddress(globalRef);
    env->DeleteGlobalRef(globalRef);
    free(buffer);
} 
```

在 Android 2.2 上它可以正常工作，但在 Android 4.0.3 上，应用程序在 DeleteGlobalRef 调用期间崩溃。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:58:39.677

ICS 中对全局和局部引用的实现进行了彻底检查，旨在改进 Java 端的内存管理。[在开发人员指南](http://developer.android.com/guide/practices/jni.html)中找到解释 在开发[人员博客](http://android-developers.blogspot.com/2011/11/jni-local-reference-changes-in-ics.html)中阅读更多内容。

简而言之，您在 JNI 函数中收到的任何内容，包括函数的`globalRef`参数`freeNativeBuffer()`，都是**本地引用**。您可以在 C 代码中创建并保留全局引用，如下所示：

```
static jobject globalRef;

allocNativeBuffer(JNIEnv* env, jobject cls, jlong size) {
    void* buffer = malloc(size);
    jobject directBuffer = env->NewDirectByteBuffer(buffer, size);
    globalRef = env->NewGlobalRef(directBuffer);
    return directBuffer;
}

freeNativeBuffer(JNIEnv* env, jobject cls, jobject localRef) {
    void *buffer = env->GetDirectBufferAddress(localRef);
    if (buffer == env->GetDirectBufferAddress(globalRef) {
        /* we received the object that we saved */
        env->DeleteGlobalRef(globalRef);
        free(buffer);
    }
} 
```

**PS**我发现[stackoverflow讨论](https://stackoverflow.com/questions/5060307/bytebuffer-not-releasing-memory)看起来像是你实验的灵感。请参阅解释，首先不需要创建和删除全局引用的[答案。](https://stackoverflow.com/questions/5060307/bytebuffer-not-releasing-memory#9891217)

# python - Algorithms for Mining Tuples of Data on huge sample space

> ID：12803495
> 
> 赞同：1
> 
> 时间：2012-10-09T15:31:23.030
> 
> 标签：python, data-mining, graph-algorithm, recommendation-engine, apriori

I read that Apriori algorithm is used to fetch association rules from the dataset like a set of tuples. It helps us to find the most frequent 1-itemsets, 2-itemsets and so-on. My problem is bit different. I have a dataset, which is a set of tuples, each of varying size - as follows :

(1, 234, 56, 32) (25, 4575, 575, 464, 234, 32) . . . different size tuples

The domain for entries is huge, which means that I cannot have a binary vector for each tuple, that tells me if item 'x' is present in tuple. Hence, I do not see Apriori algorithm fitting here.

My target is to answer questions like :

1.  Give me the ranked list of 5 numbers, that occur with 234 most of the time
2.  Give me the top 5 subsets of size 'k' that occur most frequently together

Requirements : Exact representation of numbers in output (not approximate), Domain of numbers can be thought of as 1 to 1 billion.

I have planned to use the simple counting methods, if no standard algorithm fits here. But, if you guys know about some algorithm that can help me, please let me know

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:05:18.120

我曾在 Apriori 从事数据挖掘工作。问题是，你有所有这些物品吗？您实际上有多少个单独的项目 ID？我知道项目 ID 可能跨越一个大域，但也许它们并不全部存在。在这种情况下，稀疏的市场篮子表示可能仍然对您有好处，您将能够使用 Apriori。将您的最低支持和信心设置为高值也将消除许多低优先级链接。我使用[Orange](http://orange.biolab.si/)库来满足我的数据挖掘需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:50:25.233

对于 Apriori，您不需要元组或向量。它可以用非常不同的数据类型来实现。常见的数据类型是排序的项目列表，看起来也可以`1 13 712 1928 123945 191823476`存储为 6 个整数。这本质上等同于*稀疏*二进制向量，并且通常非常节省内存。另外，APRIORI 实际上设计用于在对您的主内存来说太大的数据集上运行！

APRIORI 的可扩展性是事务数和项目数的混合。根据它们的不同，您可能更喜欢不同的数据结构和算法。

# applet - 是否可以将描述为 JSON 字符串的 JavaScript 对象从 Java 小程序传递给 JavaScript 函数？

> ID：12803500
> 
> 赞同：0
> 
> 时间：2012-10-09T15:31:51.267
> 
> 标签：applet

**更新：**我错误地将纯 JavaScript 对象命名为“JSON 对象”。感谢在下面的评论中指出这一点的人。所以我编辑了这个问题以避免进一步的误解。

我想知道是否可以从 Java 中调用带有 JavaScript 对象（可以描述为 JSON 字符串）作为参数使用[netscape.javascript.JSObject](http://jdk6.java.net/nonav/plugin2/liveconnect/jsobject-javadoc/netscape/javascript/JSObject.html)的 JavaScript 函数。我尝试了以下代码片段：

```
JSObject.getWindow(MyApplet.this).call(jsFunctionName, jsArgs); 
```

根据[这篇文章，](http://docstore.mik.ua/orelly/web/jscript/ch19_04.html) Java对象按原样传递给命名的JavaScript函数，并将根据它们所使用的上下文自动转换为一些JavaScript原语。这是否意味着不可能将描述为一些JSON字符串的真实JavaScript对象传递给JavaScript 函数，我必须寻找一种解决方法，比如`java.lang.String`在 Java 中准备一个 JSON 字符串作为参数，然后在 JavaScript 函数中解析它以获得一个普通的 JavaScript 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:35:47.287

最好参考章节：[«19.3 LiveConnect 数据转换»](http://docstore.mik.ua/orelly/web/jscript/ch19_03.html)。

传入的每个对象`jsArgs`都使用[JavaObject wrapper](http://www.nusphere.com/kb/jscoreref/javobj.html)进行包装。事实上，它是同一个 JavaScript 对象，具有可用的底层对象的所有公共属性和方法。

* * *

例如，如果我有以下 Java 类：

```
public class MyJavaClass {
    public String name;
    public int number;
    public MyJavaClass(String n, int i) {
        name = n;
        number = num;
    }
} 
```

并调用 JavaScript 函数：

```
JSObject.getWindow(MyApplet.this).call("abFunc", new MyJavaClass("Kolya", 500)); 
```

JavaScript 函数可能如下所示：

```
var abFunc = function(obj){
    numberPlusThousand = (1000 + obj.number);
    name = String(obj.name);
    ...
}; 
```

如果需要，您可以像任何其他 JavaScript 对象一样将其转换为 JSON 字符串。

* * *

作为参数传递给`call`函数的 JSObject 类的实例将被转换为相应的 JavaScript 对象。所以，如果你想避免在你的 JavaScript 代码中出现 JavaObject 实例，你可以尝试像这样创建新的 JSObject 实例：

```
JSObject myJsObj = (JSObject) JSObject.eval("{}"); 
```

并添加新属性：

```
myJsObj.setMember("name", JSObject.eval("'Kolya'"));
myJsObj.setMember("number", 500); 
```

或者像这样：

```
myJsObj.eval("self.name = 'Kolya'");
myJsObj.eval("self.number = 500"); 
```

* * *

在我看来，将 Java 中的 JavaScript 对象表示为映射会更方便，使用[Gson之类的库将它们作为 JSON 字符串传递给 JavaScript，然后使用](http://code.google.com/p/google-gson/)[JSON.parse()](https://stackoverflow.com/questions/1843343/json-parse-vs-eval)将它们转换为 JavaScript 对象。

看看这个 Gson 的用法：

```
Map m1 = ImmutableMap.of("id", "Kolya", "num", 500);
Map m2 = ImmutableMap.of("marks", new byte[] {5, 4, 5, 3});
Map m = ImmutableMap.of("m1", m1, "m2", m2, "l", ImmutableList.of("str", 234L, false));
System.out.println(new Gson().toJson(m));
// {"m1":{"id":"Kolya","num":500},"m2":{"marks":[5,4,5,3]},"l":["str",234,false]} 
```

*`ImmutableMap`并且`ImmutableList`来自[番石榴图书馆](http://code.google.com/p/guava-libraries/)。*

# drupal - 如何告诉我的模块中的字段将值作为 FULL HTML 处理？

> ID：12803501
> 
> 赞同：0
> 
> 时间：2012-10-09T15:31:51.540
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

好的，所以我创建了一个 drupal 模块，用于检索存储在数据库中的数据。有问题的字段包含其值的 html 代码。我想获取该html代码并将其用于drupal中的价值。因此，如果它在代码中有一个列表，我希望它显示列表等等。

这是我的模块代码。

```
<?php

/**
* @file
*/

/**
 * Implements hook_views_data()
 */
function jobs_views_data() {
  $data['Jobs']['table']['group'] = t('Jobs');
  $data['Jobs']['table']['base'] = array(
    'field' => 'JobID',
    'title' => t('Jobs'),
    'help' => t('This table shows a list of all jobs.'),
    'database' => 'MyDatabase'
  );

  $data['Jobs']['JobID'] = array(
      'title' => t('Job ID'),
      'help' => t('A unique job id'),
      'field' => array(
      'handler' => 'views_handler_field_numeric',
      'click sortable' => TRUE,
    ),
      'argument' => array(
      'handler' => 'views_handler_argument_numeric',
    ),
      'filter' => array(
      'handler' => 'views_handler_filter_numeric',
    ),
      'sort' => array(
      'handler' => 'views_handler_sort',
    ),
  );

  $data['Jobs']['Active'] = array(
      'title' => t('Active'),
      'help' => t('A field representing whether or not a job is active.'),
      'field' => array(
      'handler' => 'views_handler_field_numeric',
      'click sortable' => TRUE,
    ),
      'argument' => array(
      'handler' => 'views_handler_argument_numeric',
    ),
      'filter' => array(
      'handler' => 'views_handler_filter_numeric',
    ),
      'sort' => array(
      'handler' => 'views_handler_sort',
    ),
  );

  $data['Jobs']['DivisionID'] = array(
      'title' => t('Division ID'),
      'help' => t('A unique division id associated with a job.'),
      'field' => array(
      'handler' => 'views_handler_field_numeric',
      'click sortable' => TRUE,
    ),
      'argument' => array(
      'handler' => 'views_handler_argument_numeric',
    ),
      'filter' => array(
      'handler' => 'views_handler_filter_numeric',
    ),
      'sort' => array(
      'handler' => 'views_handler_sort',
    ),
  );

  $data['Jobs']['JobTitle'] = array(
      'title' => t('Job Title'),
      'help' => t('Job title'),
      'field' => array(
      'click sortable' => TRUE,
    ),
      'sort' => array(
      'handler' => 'views_handler_sort',
    ),
  );

  $data['Jobs']['JobHTML'] = array(
      'title' => t('Job HTML'),
      'help' => t('Job HTML.'),
      'field' => array(
        'click sortable' => TRUE,
    ),
      'sort' => array(
      'handler' => 'views_handler_sort',
    ),
  );

  return $data;
} 
```

因此，您可以看到最后一个字段 JobHTML 需要该字段的处理程序。我尝试将其设置为“处理程序”=>“views_handler_field_markup”。奇怪的是，它似乎确实正确地布置了 html，但随后它将 HTML 代码留在了内容中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:08:23.643

[在这里](http://drupal.org/node/1807708)几个月后我终于解决了这个问题

# c++ - 如何检查使用的 udp 缓冲区状态？

> ID：12803508
> 
> 赞同：2
> 
> 时间：2012-10-09T15:32:08.933
> 
> 标签：c++, udp

我有一个程序可以在视觉工作室的 udp 中接收消息。

有时我会错过一条消息。如果 udp rec 缓冲区已满，我想使用 select 查看 udp 缓冲区使用的大小。

我如何使用 select 来达到这个目的？

我在哪里可以看到一个例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:45:42.653

事后发现您的接收缓冲区已满对您没有任何好处 - 数据包已经被丢弃。甚至更多 - 您需要在`connect()`或之前设置缓冲区大小`bind()`，之后它们不会改变。

您应该做的是将套接字接收缓冲区预设为可以适应您的流量峰值的较大值，并尝试更快地处理您的网络输入。这通常意味着在`select()`非阻塞套接字上执行（甚至更好——一些高级 API，如`epoll(7)`边缘触发模式下的 Linux），并排空套接字输入，直到获得`EWOULDBLOCK`.

### 编辑0：

您无法通过使用`select()`或任何其他套接字 API 发现您错过了 UDP 数据包。这必须在**应用层协议**中完成，即传输层的上一层。通常的做法是在应用程序消息头中包含序列号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:45:13.797

您可以使用[`getsockopt`](http://linux.die.net/man/3/getsockopt)获取套接字选项，包括接收缓冲区大小。用于[`setsockopt`](http://linux.die.net/man/3/setsockopt)设置大小。

获取大小的示例：

```
int size;
getsockopt(socket_fd, SOL_SOCKET, SO_RCVBUF, &size);
std::cout << "Buffer size is currently " << size << " bytes\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:34:36.640

我认为 UDP（相对于 TCP）的主要属性之一是您有时会丢失消息。你必须设计你的协议来解决这个问题。我不是 UDP 方面的专家，但我不明白看到缓冲区的大小会对你有什么帮助，我不明白你为什么要使用`select`它。

# c++ - cpp win7控制台没有滚动条

> ID：12803532
> 
> 赞同：0
> 
> 时间：2012-10-09T15:33:08.583
> 
> 标签：c++, console, scrollbar, qbasic

我想从我的控制台中删除滚动条（就像在`edit`-command 中一样），因为我想制作一个类似 qbasic 的程序。我知道这是[一个线程，但它在](https://stackoverflow.com/questions/3471520/how-to-remove-scrollbars-in-console-windows-c)*windows 7 32bit*中对我不起作用。有人写道，您只需使控制台屏幕缓冲区的大小与控制台窗口的大小相同。
这不起作用：

```
HANDLE hstdout = GetStdHandle(STD_OUTPUT_HANDLE);
CONSOLE_SCREEN_BUFFER_INFO csbi;
GetConsoleScreenBufferInfo(hstdout, &csbi);

csbi.dwSize.X = csbi.srWindow.Right;
csbi.dwSize.Y = csbi.srWindow.Bottom;
SetConsoleScreenBufferSize(hstdout, csbi.dwSize); 
```

即使我将`csbi.dwSize.X`and设置`Y`为 10 或更小，滚动条也在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T04:45:19.247

问题是其中包含的大小信息`srWindow`是针对屏幕缓冲区而不是实际窗口的。您要使用`dwMaximumWindowSize`which 以列和行为单位指定窗口的大小。

```
csbi.dwSize.X = csbi.dwMaximumWindowSize.X;
csbi.dwSize.Y = csbi.dwMaximumWindowSize.Y; 
```

# javascript - 引用外部上下文而不重新分配

> ID：12803545
> 
> 赞同：0
> 
> 时间：2012-10-09T15:34:04.003
> 
> 标签：javascript

是否可以在不将上下文重新分配给某个局部变量的情况下引用外部函数的上下文？

例如：

```
var objects = [];

// populate objects

Foo.prototype.bar = function() {
    var outerObject = this;
    $.each(objects, function () {
        this.someMethod(outerObject);
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:39:49.043

您可以使用[.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，否则，您必须`this`使用局部变量进行存储。

```
Foo.prototype.bar = function() {
    var outerObject = this;
    var inner = (function () {
        // do something with outerObject
        console.log(this === outerObject);
    }).bind(this);
}; 
```

***更新：***

对于您的情况：

```
var objects = [];

// populate objects

Foo.prototype.bar = function() {
    $.each(objects, (function (obj) {
        this.someMethod(obj);
    }).bind(this));
}; 
```

# c# - 如何从新实例更新列表框中的项目而不闪烁？

> ID：12803547
> 
> 赞同：0
> 
> 时间：2012-10-09T15:34:13.157
> 
> 标签：c#, .net, wpf, data-binding

我有`ListBox`一些`ObservableCollection`项目。它们可能是基类或某些继承类的实例。我需要在 3 秒内更新一次项目列表。要更新集合列表项提供者下载新列表，然后我需要合并新旧列表。新旧列表中的项目使用`Item.Id`属性关联。问题是如何在不闪烁的情况下更新列表框中的项目并保留当前选择等。

有两种方法可以做到这一点

1.  做`list.RemoveAt()`然后`list.InsertAt()`更换所有项目。`CollectionViewSource.DeferRefresh()`在更新和恢复之前使用和保存当前选择也很有用。使用这种方法，我遇到了一些问题，例如工具提示闪烁等。

2.  另一种方法是用新值更新旧项目的每个属性。但这有点困难，因为集合中有一些继承的实例。

处理这种情况的正确方法是什么？如何有效地实现实时数据更新（在新实例集合中下载更新时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:49:01.093

无论您如何实现它，它总是会刷新整个列表框。这不是列表框不同方法的问题，而是列表框如何绘制列表中的项目。

您可能必须对列表框进行子类化并覆盖其 onpaint 甚至编写更高效的代码以使其无闪烁。

我过去在 ListView [http://www.codeproject.com/Articles/3617/Flicker-free-ListView-in-NET-Part-2](http://www.codeproject.com/Articles/3617/Flicker-free-ListView-in-NET-Part-2)上 使用此代码这样做过。

可能这也有助于开发无闪烁列表框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:46:42.630

需要限制对 PropertyChanged 和 CollectionChanged 的​​调用次数。

更新属性并检查新值 == 旧，如果是，请不要调用 NotifyPropertyChanged

如果它不是类匹配，则不要删除插入，因为这是两个 UI 通知。
只需分配新项目。项目[4] = 新项目。

您是否使用虚拟化。
如果该项目未显示，那么我很漂亮 UI 不会刷新。

请看下文。除了更新的一个或多个项目之外，我没有任何 UI 闪烁。我怀疑您没有正确使用 PropertyChanged。

```
<Window x:Class="ListViewUpdate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource self}}"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <Button Content="Add10000" Click="Button_Click"/>
            <Button Content="UpdateFirst" Click="Button_Click_1"/>
            <Button Content="UpdateLast" Click="Button_Click_2"/>
            <Button Content="ReplaceFirst" Click="Button_Click_3" />
            <Button Content="UpdateAll" Click="Button_Click_4"/>
        </StackPanel>
        <ListView Grid.Row="1" ItemsSource="{Binding Path=Persons}" DisplayMemberPath="Name" />
    </Grid>
</Window>

namespace ListViewUpdate
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private ObservableCollection<Person> persons = new ObservableCollection<Person>();
        public MainWindow()
        {
            InitializeComponent();
        }
        public ObservableCollection<Person> Persons { get { return persons; } }
        private void Button_Click(object sender, RoutedEventArgs e)
        {
            for (UInt16 i = 0; i < 10000; i++)
            {
                Persons.Add(new Person(Guid.NewGuid().ToString()));
            }
            System.Diagnostics.Debug.WriteLine("");
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            if (Persons.Count == 0) return;
            for (UInt16 i = 0; i < UInt16.MaxValue; i++)
            {
                Persons[0].Name = Guid.NewGuid().ToString();
            }
        }

        private void Button_Click_2(object sender, RoutedEventArgs e)
        {
            if (Persons.Count == 0) return;
            int last = Persons.Count - 1;
            for (UInt16 i = 0; i < UInt16.MaxValue; i++)
            {
                Persons[last].Name = Guid.NewGuid().ToString();
            }
        }

        private void Button_Click_3(object sender, RoutedEventArgs e)
        {
            if (Persons.Count == 0) return;
            for (UInt16 i = 0; i < UInt16.MaxValue; i++)
            {
                Persons[0] = new Person(Guid.NewGuid().ToString());
            }
        }

        private void Button_Click_4(object sender, RoutedEventArgs e)
        {
            foreach (Person p in Persons) p.Name = Guid.NewGuid().ToString();
        }
    }
    public class Person: INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
        private string name;
        public string Name 
        {
            get { return name; }
            set
            {
                if (name == value) return;
                name = value;
                NotifyPropertyChanged("Name");
            }
        }
        public Person(string name) { Name = name; }
    }
} 
```

# ios - 使用 css 和 jQuery 的 Touch Glow 示例，享受

> ID：12803549
> 
> 赞同：1
> 
> 时间：2012-10-09T15:34:18.347
> 
> 标签：ios, glow

在看到其他一些人在几个不同的 iOS 应用程序中使用这种酷炫的发光效果后，今天才想出了这个简单的方法。我从这个社区的人们那里得到了很多帮助，我想我可以回馈一点。享受！

这是发光效果的一些简单 CSS（在本例中为白色）。当然，根据您的按钮宽度和高度，您可能需要调整顶部和底部 %。

```
.glow-hover-effect {
    display:none;
    background: #B4B2B2;
    height:1px;
    width:2px;
    margin:0 auto;
    z-index:500;
    position:absolute;
    top: 15%;
    left: 47%;
    -webkit-border-radius: 5em;
    -webkit-box-shadow: 0px 0px 45px 30px rgba(255, 253, 253, 0.75); 
}
.ftk50 {
    position:relative;
    z-index:100;
} 
```

这是当您点击设备时播放的 jQuery。我也有兴趣看到一个更短的方法吗？

```
$('.ftk50').bind('touchstart', function() {
      $('.glow-hover-effect').fadeIn();
 });

$('.ftk50').bind('touchend', function() {
      $('.glow-hover-effect').fadeOut();
 }); 
```

示例 HTML

```
<div class="ftk50"> 
   <div class="glow-hover-effect"></div> 
   <input type="button" value="Buy Now" data-ajax="false"/>
</div> 
```

BAM 现在是您的样式，按钮上有发光效果。礼貌[http://www.slickremix.com](http://www.slickremix.com) 有人有其他解决方案吗？

# javascript - 折线图从 2 月而不是 1 月开始

> ID：12803552
> 
> 赞同：0
> 
> 时间：2012-10-09T15:34:25.090
> 
> 标签：javascript, charts, flot

我的折线图（通过 jsfiddle 在下面发布）从 2 月开始，我希望看到它从 1 月开始。我错过了什么？

[http://jsfiddle.net/TXPWK/66/](http://jsfiddle.net/TXPWK/66/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:36:38.207

您目前正在使用这个：

```
new Date(2012,h+1) 
```

删除+1，它从一月开始

# asp.net - 如何右对齐一个Gridview列的标题

> ID：12803556
> 
> 赞同：3
> 
> 时间：2012-10-09T15:34:29.433
> 
> 标签：asp.net, gridview, header, right-align

有谁知道如何右对齐gridview的一列的标题。一直在网上搜索，仍然找不到解决方案。

Horizo​​ntalAlign='Right' 适用于数据，但不适用于标题。我不想右对齐所有列，而只想右对齐一个。

这是代码的摘录：

```
<asp:GridView ID="gvCustomer" AutoGenerateColumns="False" runat="server">
    <Columns>
        <asp:BoundField DataField="CustomerId" HeaderText="Customer Id" />

               (other fields here)

                <asp:TemplateField HeaderText="Contact Name" HeaderStyle-HorizontalAlign="Right" >
                    <ItemTemplate>
                            <asp:Label runat="server" ID="lblContactName" Text='<%# Eval("ContactName") %>' />
                    </ItemTemplate>
                    <ItemStyle HorizontalAlign="Right" />
                    <HeaderStyle HorizontalAlign="Right" />
                </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

任何帮助表示赞赏。谢谢！

尼基

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T15:39:34.080

1 您可以在控件上定义 GridView

```
<HeaderStyle HorizontalAlign="Right" /> 
```

注意：从项目中删除您的标签。他必须在您的 GridView 控件上

所以

```
<asp:GridView ID="gvCustomer" AutoGenerateColumns="False" runat="server">
    <HeaderStyle  HorizontalAlign="Right" />
    .....
</asp:GridView> 
```

2 或者您可以在您的项目上定义

```
<asp:TemplateField HeaderStyle-HorizontalAlign="Right"> 
```

注意：使用此解决方案删除 `<HeaderStyle HorizontalAlign="Right" />`（必须在您的 GridView 内而不是项目内）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-17T06:43:50.393

我们有同样的问题，但我设法克服它。

这是我的解决方案：D

```
<asp:TemplateField>
     <HeaderStyle Width="100px"/><ItemStyle Width="100px" />
     <HeaderTemplate>
         <div style="text-align:right;">Contact Name</div>
     </HeaderTemplate>
     <ItemTemplate>
        <asp:Label runat="server" ID="lblContactName" Text='<%# Eval("ContactName") %>' />
     </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:01:42.103

嗯，Horizo​​ntalAlignment 对我来说很好用。

我只是把这个快速测试放在一起。请注意，第二列在字段标记中使用 Headerstyle-Horizo​​ntalAlign，而第三列使用带有 Horizo​​ntalAlign 的单独 HeaderStyle 标记。两者都工作得很好。

```
<asp:GridView ID="gvThings" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="text" HeaderText="Text" ItemStyle-Width="200" />
        <asp:BoundField DataField="number1" HeaderText="Number 1" ItemStyle-Width="200" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" />
        <asp:TemplateField HeaderText="Number 2" ItemStyle-Width="200" ItemStyle-HorizontalAlign="Right">
            <HeaderStyle HorizontalAlign="Right" />
            <ItemTemplate>
                <asp:Label ID="lblNumber2" runat="server" Text='<%# Eval("number2")%>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
 </asp:GridView> 
```

我认为您的想法是正确的，您只是在某些细节上犯了错误。您是否定义了不可覆盖的主题？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:46:24.797

在我见过的[示例中，已使用以下方法为特定列设置了列标题对齐方式：](http://www.dotnetgallery.com/forum/thread3-Gridview-Column-Width-Issue-in-AspNet.aspx)

```
<asp:BoundField DataField="CustomerId" HeaderStyle-HorizontalAlign="Right" /> 
```

但这可能等同于您已经在模板中使用的内容：

```
<HeaderStyle HorizontalAlign="Right" /> 
```

如果这不起作用，则问题可能不是您的标题未对齐，而是[您的标题的内容](http://forums.asp.net/t/1346364.aspx/1)被拉伸到列的整个宽度，因此对齐无关紧要。

例如，如果您的单元格标题包含带有 text-align: left 的标题，并且该标题的宽度是其容器的 100%，则容器的水平对齐不会影响它：

![在此处输入图像描述](../Images/07b3d5bf1d1a58116365f44ea6a9a41a.png)

作为一个实验，尝试将 HeaderStyle Width 属性设置为较小的值，看看这是否会影响对齐：

```
<HeaderStyle HorizontalAlign="Right" Width="50px" /> 
```

![在此处输入图像描述](../Images/f2c953ad7a6b265976eb3c240d0e51b7.png)

您可能必须收缩标题的容器以适合列标题文本，以便标题的 Horizo​​ntalAlign 生效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-31T11:48:57.557

我知道我的回答为时已晚，但对仍在寻找此问题答案的新人会有所帮助。

基本上我们可以使用以下任何选项

```
<asp:TemplateField HeaderStyle-HorizontalAlign=Right> 
```

或者

```
<HeaderStyle HorizontalAlign="Right" /> 
```

DOM 会将其创建为`<th align="right" scope="col">Quantity</th>`. 由于某些原因，这个 align = right 属性不起作用，需要分析才能知道正确的原因。

但是您可以通过创建一个类来使特定的标题右对齐并确保也为标题设置了 Horizo​​ntalAlign 属性来实现这一点。

`th[align="right"] { text-align:right; }`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T05:56:44.737

尝试这个..

```
int i=GridView3.HeaderRow.Cells.Count;
    GridView3.HeaderRow.Cells[0].HorizontalAlign = HorizontalAlign.Right; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-09T16:22:49.100

对于那些可能在 Gridview 上使用 AutoGenerateColumns=True 的人来说，这是上面未涵盖的答案。例如，如果您想从代码隐藏中填充 Gridview，并且还想从代码隐藏中以编程方式创建标题行：

在填充 Gridview 并调用 DataBind() 之后，在代码中添加以下代码：

```
 foreach (TableCell cel in grid.HeaderRow.Cells)
        {
            if (cel.Text == "Price")
            {
                cel.Style.Add("width","100%");
                cel.Style.Add("text-align", "right");
            }
        } 
```

这将使包含“价格”的标题单元格 100% 宽度，并在单元格中右对齐单词“价格”。显然，“网格”是我的 GridView 控件的 ID。标题行中的每个单元格都是托管代码上下文中的一个 TableCell 元素。

我在研究这个主题时的观察是，所有答案似乎都假设您在页面的 HTML 中使用模板方法，当然，OP 是，但我不是，也许你们中的一些人不是。

此外，我在这个主题上看到的大多数答案都忽略了我们只想在一个特定的标题单元格上设置对齐，而不是整个标题行中的所有单元格。在我的情况下，我希望所有标题单元格都左对齐，除了我想要右对齐的“价格”标题单元格。

人们可能不想在 HTML 中创建标题，而是在代码隐藏方法中创建标题是有原因的。如果这描述了您的情况，我的回答将使您能够设置每个标题单元格的对齐方式。

干杯，-=卡梅伦

# android - 推送到达时显示警报

> ID：12803557
> 
> 赞同：4
> 
> 时间：2012-10-09T15:34:35.313
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging

当推送通知从 C2DM 或 GCM 到达时，如何显示警报。现在我在状态栏上显示通知。那么如何获得通知作为警报。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:03:25.347

在用户正在做的事情中间弹出一个对话框是一种对用户充满敌意的事情。如果他们在玩愤怒的小鸟，而你刚刚毁了他们的投篮怎么办？只有平台可以而且应该摆脱这种情况。

使用通知区域，就像 Google 的意图一样，除非您的应用当前具有控制权（您的活动处于运行状态）。然后只需使用该活动的上下文来弹出一个`AlertDialog()`. `onResume()`您可以通过覆盖来检测活动是否正在运行`onPause()`- 介于两者之间的任何事情都是您活动的时间。

可以像这样弹出一个 AlertDialog：

```
new AlertDialog.Builder(Ctxt) //Use an activity object here
    .setMessage(R.string.MyMessageID) //Provide a message here... A string or a string ID will do
    .setCancelable(true) //If you want them to be able to dismiss with a Back button
    .setNegativeButton(R.string.IDS_NO, null) //No action on NO, right?
    .setPositiveButton(R.string.IDS_YES, OnYesClickListener) //Plug your own listener...
    .create()
    .show(); 
```

对于简单的消息/是/否对话框，一个`AlertDialog`就足够了。对于更复杂的 UI，从派生类`Dialog`并设计自己的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:39:07.620

对于警报，您需要编写代码

generateNotification（上下文上下文，字符串消息）

在这个方法中。

谢谢

# c# - 以编程方式引发控件的 ParentChanged 事件

> ID：12803560
> 
> 赞同：0
> 
> 时间：2012-10-09T15:34:38.177
> 
> 标签：c#, winforms, events, controls

> **可能重复：**
> [查找添加到 TableLayoutPanel 的控件的行索引](https://stackoverflow.com/questions/12800520/find-row-index-of-control-added-to-tablelayoutpanel)

我们可以`ParentChanged`在 Windows 窗体中以编程方式为控件引发事件吗？

或者就此而言，以编程方式引发任何控制事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:17:42.273

通常，外部呼叫者无法做到这一点。

在 Control 派生类中，您可以调用：

```
base.OnParentChanged(EventArgs.Empty); 
```

# c - 如何获取动态（使用 malloc 或 calloc ）分配内存的大小？

> ID：12803562
> 
> 赞同：2
> 
> 时间：2012-10-09T15:34:37.590
> 
> 标签：c, size, malloc

> **可能重复：**
> [确定 c 中动态分配内存的大小](https://stackoverflow.com/questions/1281686/determine-size-of-dynamically-allocated-memory-in-c)
> [关于 malloc 和 sizeof 的新手问题](https://stackoverflow.com/questions/1533519/newbie-questions-about-malloc-and-sizeof)
> [如何从 C 中的指针获取数组的大小？](https://stackoverflow.com/questions/232691/how-can-i-get-the-size-of-an-array-from-a-pointer-in-c)
> 
> [Malloc -> 分配了多少内存？](https://stackoverflow.com/questions/5213356/malloc-how-much-memory-has-been-allocated?rq=1)

```
int **arrofptr;
arrofptr = (int **)malloc(sizeof(int *) * 2);
arrofptr[0] = (int *)malloc(sizeof(int)*6144);
arrofptr[1] = (int *)malloc(sizeof(int)*4800); 
```

现在我必须知道在 arrofptr,arrofptr[0],arrofptr[1] 中分配了多少字节？有什么办法知道大小吗？

如果我们打印

```
sizeof(arrofptr);
sizeof(arrofptr[0]);
sizeof(arrofptr[1]); 
```

然后它将打印 4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:36:59.127

不，没有办法找到指针所指的内存量。

至少不在任何系统上，所以没有便携的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:37:04.200

不，不是在存储分配大小的地方使用额外的数据。

# c# - 如何使用 mongo c# 驱动程序更新数组/列表中的项目？

> ID：12803563
> 
> 赞同：6
> 
> 时间：2012-10-09T15:34:44.160
> 
> 标签：c#, mongodb, mongodb-.net-driver

随着最近[对 mongodb 的 10gen c# 驱动程序的](http://www.mongodb.org/display/DOCS/CSharp+Driver+LINQ+Tutorial)更新，我想更新我的代码，以便它使用强类型版本。

我之前的电话是：

```
var update2 = new UpdateBuilder();
var index = album.Ratings.IndexOf(rating);
update2.Set("Ratings." + index + ".Number", number);
update2.Set("Rating", album.Rating);
_session.Db().GetCollection<Album>("Album")
    .Update(Query<Album>.Where(x => x.Id == objId), update2); //this line is working 
```

新的电话是：

```
update.Set(x => x.Ratings[index].Number, number);
//update2.Set("Ratings." + index + ".Number", number); previous call 
```

但我得到了这个例外：

> 无法确定表达式的序列化信息：(Album x) => x.Ratings.get_Item(WebApp.Areas.API.Controllers.RatingController+<>c__DisplayClass5.index).Number。

有什么办法可以更新列表中的项目吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T18:03:30.587

有趣的问题。这在使用如下常量时有效：

```
var update = Update<Album>.Set(x => x.Ratings[0].Number, 10); 
```

However, this apparently breaks when you use a variable, like you have done with index. This is definitely a bug. I have created a Jira issue for it here: [https://jira.mongodb.org/browse/CSHARP-598](https://jira.mongodb.org/browse/CSHARP-598).

This is most likely due to us not partially evaluating the expression before processing it.

# linux - 这些列代表什么？

> ID：12803564
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:34:58.367
> 
> 标签：linux

刚开始接触linux。除了日期，有人能告诉我每列是什么吗？明智的概述。我通过 cd /home ls =la 达到了这一点

```
drwxr-xr-x  9 root         root         4096 Aug 27 22:02 .
drwxr-xr-x 24 root         root         4096 Oct  3 14:48 ..
drwxr-xr-x  4 admispconfig admispconfig 4096 Dec  7  2010 admispconfig
drwxr-xr-x  2 jsmith       root         4096 Oct 15  2008 jsmith 
```

如果我猜第 3 位是用户，第 4 位是用户级别，第 6 位是创建日期/时间。但我不确定其余的。

这个周末我将学习一些入门教程，如果一切顺利，我将报名参加当地大学的入门课程。所以我可以说是在试水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:38:48.280

来自[`man ls`](http://linux.die.net/man/1/ls)：

> **长格式**
> 
> 如果`-l`给出该选项，则为每个文件显示以下信息：文件模式、链接数、所有者名称、组名称、文件中的字节数、缩写月份、文件最后修改日期、小时文件最后修改，最后修改的分钟文件和路径名。此外，对于显示内容的每个目录，目录中文件使用的 512 字节块的总数单独显示在一行上，紧挨在目录中文件的信息之前。如果文件或目录具有扩展属性，则由`-l`选项后跟一个“@”字符。否则，如果文件或目录具有扩展的安全信息（例如访问控制列表），则`-l`选项打印的权限字段后跟一个“+”字符。
> 
> 如果文件的修改时间在过去或将来超过 6 个月，则显示最后修改的年份，而不是小时和分钟字段。
> 
> 如果所有者或组名不是已知的用户名或组名，或者`-n` 给出了选项，则显示数字 ID。
> 
> 如果文件是字符特殊文件或块特殊文件，则文件的主要设备号和次要设备号显示在大小字段中。如果文件是符号链接，则链接到的文件的路径名以“->”开头。

我不会在这里引用整个事情。关于权限列的含义*非常*`man ls`详细。

# python - 如何方便地读取python中的数字？

> ID：12803566
> 
> 赞同：4
> 
> 时间：2012-10-09T15:35:09.737
> 
> 标签：python

```
x1, y1, a1, b1, x2, y2 = int(input()), int(input()), int(input()), int(input()), int(input()), int(input()) 
```

我的问题是读取 6 个数字，每个数字都在新行中给出。如何比我上面的代码更简洁地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T15:36:43.430

```
x1, y1, a1, b1, x2, y2 = (int(input()) for _ in range(6)) 
```

在 Python 2 中替换为`range`和`xrange`。`input``raw_input`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:38:14.980

```
x,y,z,w=map(int,input().split()) #add input in form 1 2 3 4

>>> x,y,z,w=map(int,input().split()) 
1 2 3 4
>>> x
1
>>> y
2
>>> w
4
>>> z
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:38:47.483

我会使用字典：

```
parm = {}
var_names = ['x1', 'y1', 'a1', 'b1', 'x2', 'y2']
for var_name in var_names:
    parm[var_name] = int(input()) 
```

那么您可以将字典键转换为变量，但我认为这不是一个好主意：

```
locals().update(parm) 
```

# magento - 在 Magento 中对不同产品实施不同的在线支付选项

> ID：12803569
> 
> 赞同：2
> 
> 时间：2012-10-09T15:35:21.927
> 
> 标签：magento, online-store

在 Magento 中，我需要为不同的产品类型实现不同的结帐选项。这可能吗？

澄清一下，我有一套产品可以通过信用卡*或*货到付款支付，而另一套产品只能通过信用卡支付。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:01:18.767

这在标准 Magento 中是不可能的，您需要为此进行自己的扩展。

[N98_CheckoutFilters](https://github.com/netz98/N98_CheckoutFilters)可以作为如何在结帐中过滤掉付款方式的起点。

# ios - 如何使用音频图播放声音效果

> ID：12803572
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:35:45.167
> 
> 标签：ios, audio

我有一个用于双向音频通信的 AudioGraph。我还想在图表启动时播放一些声音效果（使用系统声音服务），但我似乎无法让它工作。

当图形停止时，声音效果播放得非常好。

这两个音频框架可以这样一起使用吗？我需要做一些特别的事情来将输出混合在一起吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:21:50.137

您可以在相应的回调函数中添加效果或处理代码。举一个具体的例子，

输入渲染回调（）

在 Apple 的 MixerHost 示例项目中。

# objective-c - SBJson 流解析器崩溃

> ID：12803576
> 
> 赞同：0
> 
> 时间：2012-10-09T15:35:57.123
> 
> 标签：objective-c, xcode, json, web-services, sbjson

我正在使用 SBJson 在 Json 中开发 Web 服务。

当我收到类似的东西时没有问题：

```
{"error":"The operation failed"} 
```

但是当我收到类似的东西时，它会使应用程序崩溃：

```
[{"id":"29"}] 
```

有人有想法吗？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:22:19.673

`{"error":"The operation failed"}`和的区别`[{"id":"29"}]`：

*   第一个是 Object（键：值对的无序集合，键和值之间用 ':' 字符分隔，以逗号分隔并用大括号括起来；键必须是字符串，并且应该彼此不同）；

*   第二个是数组（值的有序序列，以逗号分隔并用方括号括起来；这些值不需要是相同的类型）。

在您的应用程序中，您在 Dictionary 中处理 JSON 响应 - 这适合`{"error":"The operation failed"}`大小写，但对于第二种情况（这是一个数组）是错误的 - `[{"id":"29"}]`。

（使用字典可以执行`- objectForKey:`，使用数组`- objectAtIndex:`）。

要了解它的工作原理，您可以阅读有关 JSON 的更多信息：

[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

# eclipse - 如何找到插件所在的更新站点？

> ID：12803583
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:36:17.477
> 
> 标签：eclipse, eclipse-plugin, rcp

我知道，某个更新站点上的某个地方有一个 Eclipse RCP 插件“org.eclipse.e4.tools.emf.liveeditor”。如何找到正确的更新站点？是否可以在更新站点中搜索插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:43:35.183

通常，您必须访问该插件的网站才能找到下载位置。我已经看到更新站点位置的变化如此之大，以至于我放弃了查看插件网站以外的任何地方。让 Google 成为您的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:56:01.783

Google 仍然是最好的：[vogella 教程](http://www.vogella.com/articles/EclipseRCP/article.html#tutorial_installation2)指向更新站点[http://download.eclipse.org/e4/updates/0.12](http://download.eclipse.org/e4/updates/0.12)

# c++ - C++ 中 SetProcessAffinityMask 的示例用法？

> ID：12803585
> 
> 赞同：15
> 
> 时间：2012-10-09T15:36:25.250
> 
> 标签：c++, windows

我需要将各种 c/c++ 进程固定到机器上的特定内核，以便仅在 Windows 7 64 位上进行基准测试。我的机器有 16 个内核 (2x8)。我试图通过从给定进程的代码中调用 SetProcessAffinityMask 来做到这一点。假设这是正确的，我不确定如何准确使用此功能。我已经看过文档，但无法理解它对第二个参数的描述。我也没有在 SO 或 Google 上搜索过任何示例 c/c++ 用法。

问题1：以16核机器（2cpux8）和ac / c ++项目为例，请您提供一个说明性示例，说明如何使用SetProcessAffinityMask选择16个内核中的每一个，并解释第二个参数以供我理解？如何将核心 id 从 0-15 转换为等效的位掩码？

问题 2：如果在一个 cpu 上有 2x8 核而不是 16 核，对使用有影响吗？还是一样的用法？

非常感谢。这是我到目前为止所拥有的。

```
#include <Windows.h>
#include <iostream>

using namespace std;

int main () {

    HANDLE process = GetCurrentProcess();

    DWORD_PTR processAffinityMask = 0; /// What to do here?

    BOOL success = SetProcessAffinityMask(process, processAffinityMask);

    cout << success << endl;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T15:45:46.427

第二个参数是位掩码，其中设置的位意味着进程可以在该处理器上运行，而明确的位意味着它不能。

在您的情况下，要让每个进程在单独的核心上运行，您可以（出于一种可能性）传递一个命令行参数，为每个进程提供一个数字，并在进程内使用该数字来确定要使用的处理器：

```
#include <Windows.h>
#include <iostream>

using namespace std;

int main (int argc, char **argv) {
    HANDLE process = GetCurrentProcess();
    DWORD_PTR processAffinityMask = 1 << atoi(argv[1]);

    BOOL success = SetProcessAffinityMask(process, processAffinityMask);

    cout << success << endl;
    return 0;
} 
```

然后你会用类似的东西运行它：

```
for %c in (0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15) do test %c 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T16:05:02.607

如前所述，它是一个位掩码。您可能想要使用 GetProcessAffinityMask 的结果，以防您的进程或系统已经无法访问所有内核。这就是我想出的。

```
#include <Windows.h>
#include <iostream>
using namespace std; 

int main () { 

    HANDLE process = GetCurrentProcess(); 

    DWORD_PTR processAffinityMask;
    DWORD_PTR systemAffinityMask;

    if (!GetProcessAffinityMask(process, &processAffinityMask, &systemAffinityMask))
        return -1;

    int core = 2; /* set this to the core you want your process to run on */
    DWORD_PTR mask=0x1;
    for (int bit=0, currentCore=1; bit < 64; bit++)
    {
        if (mask & processAffinityMask)
        {
            if (currentCore != core)
            {
                processAffinityMask &= ~mask;
            } else
            {
                if ( !(systemAffinityMask & mask) )
                {
                    cerr << "Core " << core << " not enabled in system." << endl;
                }
            }
            currentCore++;
        }
        mask = mask << 1;
    }

    BOOL success = SetProcessAffinityMask(process, processAffinityMask & systemAffinityMask); 

    cout << success << endl; 

    return 0; 

} 
```

# c# - 如果链接文本包含html，如何在ASP .NET MVC Razor视图引擎中使用@Html.ActionLink()生成链接，也应该呈现？

> ID：12803588
> 
> 赞同：9
> 
> 时间：2012-10-09T15:36:31.617
> 
> 标签：c#, asp.net-mvc, razor

> **可能重复：**
> [Razor 语法阻止在操作链接中转义 html](https://stackoverflow.com/questions/5059805/razor-syntax-prevent-escaping-html-in-an-action-link)

如何使用 ASP.NET MVC Razor 视图引擎`@Html.ActionLink()`方法生成包含图像的链接。此方法将内部链接文本作为第一个参数，所以我尝试了：

```
@{
string linkInnerHtml = string.Format("<img src=\"{0}\" /> Tiles", MyClass.GetImgSrc());
}
@Html.ActionLink(linkInnerHtml, "action" ... ) 
```

但是，结果，我得到了`<img src="/source.img" /> Tiles`内部文本的链接。HTML 未呈现。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-09T15:39:43.737

把它写出来，[`Url.Action`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action%28v=vs.108%29.aspx)用来渲染`href`属性值。

```
<a href="@Url.Action("action"...)">
  <img src="@MyClass.GetImgSrc()" /> Tiles
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:47:54.060

ASP.NET 已经有一个使用 System.Web.MVC 从字符串创建 html 的实用程序

```
@MvcHtmlString.Create(linkInnerHtml) 
```

在你的情况下

```
@Html.ActionLink(MvcHtmlString.Create(linkInnerHtml), "action" ... ) 
```

# java - java swing弹出图像

> ID：12803593
> 
> 赞同：1
> 
> 时间：2012-10-09T15:36:46.140
> 
> 标签：java, image, swing, popup

我想在我的 JPanel 上创建弹出图像。

现在我有这样的事情：

![在此处输入图像描述](../Images/080b8b53258dfbe3b064013413fcebf8.png)

但需要得到这样的东西：

![在此处输入图像描述](../Images/1f3959cc2b3539644aa988ae79ae1483.png)

它将在我按下 X1 之后。如何在 Java 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:23:36.693

作为一个起点，这样的事情可能对你有用。（非常迅速地放在一起，要温柔。）我认为 GlassPane 方法将是最干净的。我将留给您在`paintComponent()`方法中的信息气泡上添加一个指针。

![在此处输入图像描述](../Images/30bb5e142d53943e76cbf8d2db293714.png)

```
static MyInfoBubble lastBubble;

public static void main(String[] args)
{
    JFrame frame = new JFrame();
    frame.setSize(new Dimension(500, 500));

    JPanel glassPane = new JPanel();
    glassPane.setOpaque(false);
    glassPane.setLayout(null);

    frame.setGlassPane(glassPane);
    frame.getGlassPane().setVisible(true);

    JPanel labelRowPanel = new JPanel();
    for (int ctr = 0; ctr < 7; ctr++) {
        labelRowPanel.add(makeButton(frame, "Button " + ctr));
    }

    frame.getContentPane().add(labelRowPanel);
    frame.setVisible(true);
}

private static JButton makeButton(final JFrame frame, final String label) {
    final JButton button = new JButton(label);

    button.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent arg0)
        {
            if (lastBubble != null)
            {
                lastBubble.setVisible(false);
                ((JPanel)frame.getGlassPane()).remove(lastBubble);
                lastBubble = null;
            }

            Point loc = button.getLocation();
            MyInfoBubble mib = new MyInfoBubble();
            mib.setBounds(loc.x+10, loc.y+30, 100, 50);
            ((JPanel)frame.getGlassPane()).add(mib);
            lastBubble = mib;

            ((JPanel)frame.getGlassPane()).validate();
            ((JPanel)frame.getGlassPane()).repaint();
        }

    });

    return button;
}

static class MyInfoBubble extends JPanel
{
    public MyInfoBubble()
    {
        setVisible(true);
    }

    public void paintComponent(Graphics g)
    {
        Graphics2D g2d = (Graphics2D)g;
        g2d.setColor(Color.BLUE);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.fillRoundRect(0, 0, getWidth(), getHeight(), 20, 20);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:44:31.757

像这样创建菜单：

```
JPopupMenu popupmenu = new JPopupMenu();
JMenuItem jMenuItem = new JMenuItem(new ImageIcon(getClass().getResource("/topmostpackage/sub/package/s/img.png")));
popupmenu.add(jMenuItem); 
```

然后将点击处理程序添加到相关按钮并显示如下菜单：

```
MouseAdapter mouseAdapter = new MouseAdapter() {

        @Override
        public void mouseClicked(MouseEvent e) {
            super.mouseClicked(e);
            popupmenu.show(button, e.getXOnScreen(), e.getYOnScreen());  
        }

    };
    button.addMouseListener(mouseAdapter); 
```

编辑：要使上述示例正常工作，您必须将图像放在包结构中，如果不是这样，您可以这样阅读：

```
 URI uri = new URI("file:///home/linski/empty.png");
    ImageIcon imageIcon = new ImageIcon(uri.toURL()); 
```

所以，在 file:// 之后，我将图像的路径放在我的 linux 文件系统上。我无法在 windows/mac 上进行测试，但是，您可以通过浏览器打开图像并从浏览器地址栏读取格式正确的路径。

编辑^2：此解决方案不适合您的需要，因为它看起来与您提供的图像不完全相同 - 气球图像将是一个菜单项，并且将看到菜单。

编辑^3：

我会给你一个快速的技巧，而不是实例化 JPopupMenu，而是实例化这个类：

```
public class CustomPopUpMenu extends JPopupMenu {

    @Override
    protected void paintComponent(Graphics g) {}

} 
```

而不是实例化 JMenuItem 实例化这个类：

```
public class CustomMenuItem extends JMenuItem {

    public CustomMenuItem(Icon icon) {
        super(icon);
    }

    @Override
    protected void paintComponent(Graphics g) {
        getIcon().paintIcon(this, g, 0, 0);
    }    

} 
```

你会得到几乎你想要的。请记住，**这是一个“hack”（不是 hack，而是“hack”）——这*不是*它的本意**。正确的方法是自定义 JPopUpMenuUI（可能与创建您自己的该类的子类一起使用）。

我不能告诉你怎么做，但我知道我一有时间就会[学会。](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)也看到[这个](https://stackoverflow.com/questions/822899/how-to-create-a-custom-swing-component)。

+1 一个有趣的问题:)

# api - 带有公共域过滤器的 Wikimedia API 图像搜索

> ID：12803599
> 
> 赞同：6
> 
> 时间：2012-10-09T15:37:07.710
> 
> 标签：api, mediawiki, wikipedia-api, wikimedia-commons

我想查询 Wikimedia API 以查找所有包含关键字的图像并仅过滤公共领域的图像。因此无需额外的 CC-SA 许可证。

目前我正在使用以下查询来提取图像：

[http://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srsearch=roses&srnamespace=6&srinfo=totalhits%7Csuggestion&srprop=size%7Cwordcount%7Ctimestamp%7Cscore%7Csnippet%7Ctitlesnippet%7Credirecttitle%7Credirectsnippet%7Csectiontitle% 7Csectionsnippet%7Chasrelated&srredirects=&srlimit=10&generator=images&titles=维基百科%3APublic_domain&gimlimit=10](http://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srsearch=roses&srnamespace=6&srinfo=totalhits%7Csuggestion&srprop=size%7Cwordcount%7Ctimestamp%7Cscore%7Csnippet%7Ctitlesnippet%7Credirecttitle%7Credirectsnippet%7Csectiontitle%7Csectionsnippet%7Chasrelated&srredirects=&srlimit=10&generator=images&titles=Wikipedia%3APublic_domain&gimlimit=10)

但这目前正在返回所有图像，无论它们的许可如何。也许我需要修改命名空间，但我不知道去哪里找。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T17:21:13.640

嗯，您当前的 api 查询做了两件非常不同的事情：

*   从页面[Wikipedia:Public Domain](http://en.wikipedia.org/wiki/Wikipedia%3aPublic_domain)获取前 10 个图像-`pages`结果，您可以指定其他属性以获取该结果集
*   在命名空间 6 中搜索单词*roses*

不幸的是，您不能将[搜索模块](http://www.mediawiki.org/wiki/API%3aSearch)限制为仅在某些类别中搜索，您只能将其限制为单个命名空间。因此，您需要获取所有搜索结果的类别并自己过滤它们以获取[Category:Public Domain](http://commons.wikimedia.org/wiki/Category%3aPublic_domain)（及其所有[子类别](http://toolserver.org/~magnus/catscan_rewrite.php?language=commons&project=wikimedia&depth=5&categories=Public+domain&comb%5Blist%5D=1&doit=1)）中的图像。API 查询看起来像

> `api.php?action=query&prop=`[`imageinfo`](http://www.mediawiki.org/wiki/API%3aProperties#imageinfo_.2F_ii)`|`[`categories`](http://www.mediawiki.org/wiki/API%3aProperties#categories_.2F_cl)`&`[`generator`](http://www.mediawiki.org/wiki/API%3aQuery#Generators)`=search&gsrsearch=roses&gsrnamespace=6&format=json`

不要忘记[继续查询](http://www.mediawiki.org/wiki/API%3aQuery#Continuing_queries)，如果您想要 10 张符合您的类别标准的图像，您可能需要查询（很多）更多。

# android - 使用 Google Play 服务通过 OAuth2 向 App Engine 进行身份验证

> ID：12803600
> 
> 赞同：2
> 
> 时间：2012-10-09T15:37:07.700
> 
> 标签：android, google-app-engine, oauth-2.0, google-play-services

Google Play 服务[最近发布了一个新的 OAuth 2.0 API](http://android-developers.blogspot.ca/2012/09/google-play-services-and-oauth-identity.html)，用于轻松进行 OAuth 2.0 身份验证。我希望能够与 App Engine 应用程序同时使用它。

但是，我无法找到任何方法来执行此操作，并且我不确定在获得令牌后应该如何查询 App Engine。每当我查询 App Engine 时，是否应该将其添加到标题中？OAuth 2.0 甚至可以与 App Engine 一起使用吗？我应该使用特定的范围吗？如果可能的话，我想使用提供配置文件的范围：[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)。

有人可以告诉我我做错了什么吗？或者如果还没有办法在这样的 App Engine 服务上进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:59:49.000

GAE 的 OAuth2 身份验证仅适用于 GAE 端点 (AFAIK)，目前尚未对所有人开放。您可以注册受信任的测试程序，您可能会获得访问权限。您可以使用 ClientLogin 通过标准获取身份验证令牌`AccountManager`（使用“啊”服务名称）来验证用户，有多个示例/博客关于此。但是，这已被弃用，并将在大约一年左右停止工作。

# javascript - Javascript Array Concat 不工作。为什么？

> ID：12803604
> 
> 赞同：116
> 
> 时间：2012-10-09T15:37:44.377
> 
> 标签：javascript, jquery, jquery-ui

所以我创建了这个 jqueryui 小部件。它创建了一个我可以将错误流式传输到的 div。小部件代码如下所示：

```
$.widget('ui.miniErrorLog', {
   logStart: "<ul>",   // these next 4 elements are actually a bunch more complicated.
   logEnd:   "</ul>",
   errStart: "<li>",
   errEnd:   "</li>",
   content:  "",
   refs:     [],

   _create: function() { $(this.element).addClass( "ui-state-error" ).hide(); },

   clear: function() { 
      this.content = ""; 
      for ( var i in this.refs )
         $( this.refs[i] ).removeClass( "ui-state-error" );
      this.refs = [];
      $(this.element).empty().hide(); 
   }, 

   addError: function( msg, ref ) {
      this.content += this.errStart + msg + this.errEnd; 
      if ( ref ) {
         if ( ref instanceof Array )
            this.refs.concat( ref );
         else
            this.refs.push( ref );
         for ( var i in this.refs )
            $( this.refs[i] ).addClass( "ui-state-error" );
      }
      $(this.element).html( this.logStart + this.content + this.logEnd ).show();
   }, 

   hasError: function()
   {
      if ( this.refs.length )
         return true;
      return false;
   },
}); 
```

我可以在其中添加错误消息，以及对将进入错误状态的页面元素的引用。我用它来验证对话框。在“addError”方法中，我可以传入一个 id 或一个 id 数组，如下所示：

```
$( "#registerDialogError" ).miniErrorLog( 
   'addError', 
   "Your passwords don't match.", 
   [ "#registerDialogPassword1", "#registerDialogPassword2" ] ); 
```

但是当我传入一个 id 数组时，它不起作用。问题出在以下几行（我认为）：

```
if ( ref instanceof Array )
   this.refs.concat( ref );
else
   this.refs.push( ref ); 
```

为什么那个 concat 不起作用。this.refs 和 ref 都是数组。那么为什么 concat 不起作用呢？

奖励：我在这个小部件中做了其他愚蠢的事情吗？这是我的第一个。

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2012-10-09T15:39:18.200

concat 方法不会改变原始数组，您需要重新分配它。

```
if ( ref instanceof Array )
   this.refs = this.refs.concat( ref );
else
   this.refs.push( ref ); 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-10-09T15:42:20.760

原因如下：

> 定义和使用
> 
> concat() 方法用于连接两个或多个数组。
> 
> 此方法不会更改现有数组，而是返回一个新数组，其中包含连接数组的值。

您需要将连接的结果分配回您拥有的数组中。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-03-27T01:40:05.833

扩展康斯坦丁·迪内夫：

`.concat()`不添加到当前对象，所以这**不起作用**：

```
foo.bar.concat(otherArray); 
```

这将：

```
foo.bar = foo.bar.concat(otherArray); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-04-15T16:26:30.643

您必须使用 = 重新分配值到数组，您想要获得连接值

```
let array1=[1,2,3,4];
let array2=[5,6,7,8];

array1.concat(array2);
console.log('NOT WORK :  array1.concat(array2); =>',array1);

array1= array1.concat(array2);
console.log('WORKING :  array1 = array1.concat(array2); =>',array1);
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-14T12:34:29.003

```
dataArray = dataArray.concat(array2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-06T22:41:18.903

请注意，如果您真的想在使用 concat 函数时拥有一个可变数组（通过可变我的意思是它不会创建新数组而是改变现有数组），您可以为该数组实例重新分配 concat 函数。当我需要这个时，我做了什么。

```
let myArray = [];

myArray.concat= function(  toAdd){
     if(Array.isArray(toAdd)){
        for(let node of toAdd)
             this.push(node);
      }else
        this.push(toAdd);
} 
```

# php - 使用 php 删除文件 - 下拉

> ID：12803605
> 
> 赞同：0
> 
> 时间：2012-10-09T15:37:54.590
> 
> 标签：php, html, drop-down-menu

这次任务略有不同，我希望通过单击下拉选项（调用文件名）删除特定目录中的文件，然后单击提交按钮。

```
<?php
$myFile = "testFile.txt";
unlink($myFile);
?> 
```

我认为上面的代码是我需要的。但是，我将“testFile.txt”替换为以下内容：

```
<?php $myFile = ?><html>Dropdown code here to list all files in directory</html><?php ;    unlink($myFile);
    ?> 
```

如果回复需要一段时间，我仍在编辑和剪切片段非常抱歉。

编辑：我想知道您是否可以帮助我创建它，以便它是上传到目录 /uploads/ 的所有文件的下拉框，因此我可以在不搜索的情况下删除它们。

提前谢谢大家。

编辑：

好的，所以经过一些帮助，到目前为止我已经实现了这一点：

```
<?php
$path = "uploads/";
$handle = opendir($path);   

while ($file = readdir($handle)) {
    if (substr($file,0,1) != ".") {
    echo "<option value ='$file'></option>";
    }   
}
closedir($handle);  
?> 
```

但是，这不会显示选项中的文件，我知道我在这里遗漏了一些东西。我使用了你们的资源，并且：

[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:03:49.790

这是一种方法 - 它可能并不完美，我还没有测试过

dir 将为您提供目录中的文件列表，您可以使用它来填充 PHP 中的选项列表，并将其回显到您的 HTML 页面。

PHP：

```
$d = dir("myDirectory");

$files = array();
while (false !== ($entry = $d->read())) {
    if($entry == '.' || $entry == '..') continue;
    $files[] = '<option value="'.$entry.'">'.$entry.'</option>';
}

$options = implode('',$files); 
```

HTML：

```
<form...>
    <select name="file_delete"><?= $options;?></select>
    <input type="submit"... />
</form> 
```

然后您可以在用户提交表单后从 $_POST 或 $_GET 数组中获取文件。

希望这可以帮助。

# php - 管理/处理几个单独的表格

> ID：12803606
> 
> 赞同：0
> 
> 时间：2012-10-09T15:37:58.827
> 
> 标签：php, forms, crud

我有一个有趣的问题，我一直在努力简化。我有一个电信客户，他有几个注册表单 - 每个代表一个不同的程序/报价。每个表单本质上是相同的，但有些表单具有其他表单没有的字段。可以想象，这在数据库和 CRUD 代码中都是一场噩梦。

目前，每个表单都被单独处理并进入每个应用程序表单的专用 MySQL 表。可怕的是，每个应用程序都有一个单独的 CRUD 代码。关于如何最好地处理这种情况，我想听从有经验的人的意见。

我考虑将表单元素解析为 CSV。我将定义一个标识元素的排序模式，以便 CRUD 可以轻松地处理一个表。然而，这是一个问题，因为有时这些表单元素会发生变化，这会使所有内容保持井井有条和整洁。我也想拥有一个带有标准元素的基本表单，然后需要不同元素的表单将与一些 FK 一起存储在其他地方。

我真的不知道我能做些什么来让这件事变得更容易。我讨厌有几个表用于应用程序，还有几个 CRUD 用于处理......

**TLDR；**我怎样才能最好地管理在数据库中处理/存储几个独特/相当大（20 个元素）的表单并在它们上实现 CRUD。

谢谢你的时间。

**编辑**我也只是考虑实现 JSON 或 XML 来定义表单元素和接受的数据类型。这可以由系统修改，并且在保存后，可以为每个应用程序生成一个缓存的 HTML 表单页面和更新的 SQL 代码。这样，我可以解决编辑问题。但是，基于这个实现，我仍然需要几个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:39:02.967

实现这一点的一种方法是使用一个基表，它只定义所有表单共有的几个字段，包括某种 ID。然后，您有一个单独的表，该表按每个表单的名称和值存储所有其余的表单数据。实际上，您有一个对象编号，然后是表单中每条数据的一组属性名称/值。

```
CREATE TABLE submission {
    submission_id INT,
    creation_date DATETIME
};

CREATE TABLE submission_attributes {
    submission_id INT,
    attr_name VARCHAR(50),
    attr_value VARCHAR(255)
}; 
```

这里的诀窍是拥有一个通用的 hydration 函数，可以将任何提交转换为有用的 PHP 对象或数组（无论您喜欢使用哪个）。

由于您的数据库仅处理字符串，因此您的验证函数需要完成了解什么是有效提交以及什么不是有效提交的任务。您将无法依靠您的数据库来拒绝无效数据。

另一种方法是使用对象数据库。我最喜欢的是[MongoDB](http://www.mongodb.org/)，它允许您将任意复杂的数据存储为 JSON，甚至可以通过深度嵌套的对象属性进行索引/搜索。但是还有其他工具也可以完成这项工作。

# javascript - 从下拉列表中删除所选项目，但将其显示为选中

> ID：12803616
> 
> 赞同：2
> 
> 时间：2012-10-09T15:38:32.553
> 
> 标签：javascript, html, drop-down-menu, html-select

我有一个如下所示的下拉菜单，其中显示 10,20,30,40

```
<select>
 <OPTION value="10" label="10"> 10 </OPTION>
 <OPTION value="20" label="20"> 20 </OPTION>
 <OPTION value="30" label="30"> 30 </OPTION>
 <OPTION value="40" label="40"> 40 </OPTION>
</select> 
```

它将显示 10 被选中，当我们单击下拉菜单时，显示 10、20、30、40。

如果选择了 20，它将显示 10 被选中，当我们单击下拉菜单时，显示 10、20、30、40。

现在我必须实现，如果选择了 20，则将其显示为已选择，但在下拉列表中，仅显示 10、30、40。20 应仅在选定的位置显示。

有没有办法实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:41:50.163

不，HTML 不提供能够这样做的输入元素。

您可以使用 CSS 的属性上的属性选择器`selected`并将`<OPTION>`显示设置为无。这*可能会*欺骗浏览器。

# c# - C# 中的时间转换混淆

> ID：12803620
> 
> 赞同：0
> 
> 时间：2012-10-09T15:38:41.523
> 
> 标签：c#, timezone, utc

我正在 C# 中访问驱动程序（.sys 文件）的 file.LastWriteTime。代码如下：

```
DateTime fileDate = FileInfo(path).LastWriteTime;
String locaZone = TimeZoneInfo.Local.DisplayName;
DateTime BinaryDate = TimeZoneInfo.ConverTimetoUtc(fileDate, TimeZoneInfo.Local); 
```

我检查了 System32 中的 Drivers 文件夹 - 文件时间是 9/27/2012 12:40:42 AM，本地时区是太平洋。

> 因此，fileDate = 9/27/2012 12:40:42 AM
> 
> 但是，BinaryDate（转换为 UTC 后）= 9/27/2012 07:40:42 AM

谁能指导一下这里出了什么问题-似乎转换没有正确进行。

理想情况下，我们应该观察到 BinaryDate 值 > 9/27/2012 12:40:42 AM（包括夏令时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:48:44.260

你不能打电话`FileInfo(path).LastWriteTimeUtc`吗？

# android - 如果值为空，如何检查光标？

> ID：12803630
> 
> 赞同：0
> 
> 时间：2012-10-09T15:39:08.933
> 
> 标签：android, sqlite, android-sqlite

我使用 Sqlite 并在 android 应用程序中运行。

我有这样的代码：

```
//get ALL Data
public Cursor getAll() throws SQLException
{
    Cursor mCursor = mDb.query(DATABASE_TABLE, null, null, null, null, null, null);
    if(mCursor != null)
    {
        mCursor.moveToFirst();
    }
    else if(mCursor.isNull(0))
    {
        Log.d("data", "null");
    }
    return mCursor;
} 
```

如果值为 null 应用程序强制关闭这样的>_<，我的麻烦。我想要如果值为 null 然后打印日志？

请任何人解决我的麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:45:15.060

我想你想嵌套这些`if`块：

```
...
if (mCursor != null)
{
     mCursor.moveToFirst();

     if (mCursor.isNull(0))
     {
         Log.d("data", "null");
     }
}
return mCursor; 
```

代码中的`else if`块仅在`mCursor`为 null 时运行，在这种情况下`mCursor.isNull(0)`将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:43:06.947

您需要检查光标是否移动

```
if (cursorinfo.moveToFirst())
{
if value then show data here.
}
else
{
Log here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:43:06.727

您试图在空指针上调用 isNull 。if 语句意味着它可以调用 isNull ，除非 mCursor 对象为 null，这将引发 NullPointerException - 这会导致崩溃。尝试在 else 之后删除 if。如果 mCursor 为空，则将记录“空”。

# macos - OSX bash“睡眠”

> ID：12803631
> 
> 赞同：11
> 
> 时间：2012-10-09T15:39:11.927
> 
> 标签：macos, bash, shell

我正在尝试暂停或“休眠”在 OSX 中运行的 bash 脚本中的特定行。该脚本在登录前启动时运行。我没有看到我期望的结果。换句话说，无论我在“睡眠”之后指定什么时间，脚本仍然会正确移动，不会有任何延迟。但是，当我在登录后运行脚本时，“睡眠”命令似乎工作得很好。

在登录之前或我的脚本运行之前，命令文件“sleep”是否可能不在路径中？如果我在命令之前放置睡眠路径会有帮助吗？如果是这样，“睡眠”生活在哪里？

我可以尝试另一种方法或替代命令吗？

谢谢

```
#!/bin/bash

#Create the bin directory
sudo mkdir /usr/local/bin

sleep 10

#Copy the files to the Hard Drive
sudo cp /Volumes/NO\ NAME/adbind.bash /usr/local/bin/adbind.bash
sudo cp /Volumes/NO\ NAME/com.sjusd.adbind.plist /Library/LaunchDaemons/com.sjusd.adbind.plist

#Fix permissions
sudo chown root:wheel /usr/local/bin
sudo chmod 755 /usr/local/bin
sudo chown root:wheel /Library/LaunchDaemons/com.sjusd.adbind.plist
sudo chmod 755 /Library/LaunchDaemons/com.sjusd.adbind.plist

exit 0 
```

该死的人群，我得到了一个负 1 LOL

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-05-14T19:17:23.883

这可能有点晚了，但似乎 OS X 上的 sleep 不适用于量词（m，h，...）。[苹果官方文档](https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man3/sleep.3.html)

所以“sleep 5m”和“sleep 5”是一样的。如果你想要5分钟，你必须使用“sleep 300”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T15:45:54.527

如果你运行`which sleep`，你可以获得系统上“睡眠”的路径。我明白了`/bin/sleep`。

此时，您有几个选择：

您可以`sleep`在调用它时指定路径

```
#!/bin/bash
# script before sleep ...
/bin/sleep
# ... after sleep 
```

或者您可以`$PATH`在调用之前在脚本中添加变量的路径。

```
#!/bin/bash
PATH="$PATH:/bin"
# script before sleep ...
sleep
# ... after sleep 
```

# c# - 到达代码，不执行并无错误退出

> ID：12803640
> 
> 赞同：3
> 
> 时间：2012-10-09T15:39:40.003
> 
> 标签：c#, .net, visual-studio-2010

到目前为止，我所有的代码都可以正常工作：

```
using System.Diagnostics;

namespace WebPortalLogging
{
    public static class EventLogging
    {
    public static void LogEvent(string origin, string message, EventLogEntryType eventLogEntryType, int eventId)
        {
      const string source = "Software";
            const string log = "Application";

            if (!EventLog.SourceExists(source))
                 EventLog.CreateEventSource(source, log);
      EventLog.WriteEntry(source, message, eventLogEntryType, eventId);      
        }
    }
} 
```

我什至在另一个项目中使用这个类，它工作正常。当它到达这条线时：

if (!EventLog.SourceExists(source)) EventLog.CreateEventSource(source, log);

它击中这条线并退出。

这是我的输出中的内容：

```
The thread 'vshost.NotifyLoad' (0x28c) has exited with code 0 (0x0).
The thread 'vshost.LoadReference' (0x470) has exited with code 0 (0x0).
'VmBackup.vshost.exe' (Managed (v4.0.30319)): Loaded 'D:\Google Drive\Code\VMBackup\VMBackup\bin\Debug\VmBackup.exe', Symbols loaded.
'VmBackup.vshost.exe' (Managed (v4.0.30319)): Loaded 'D:\Google Drive\Code\VMBackup\VMBackup\bin\Debug\WebPortalLogging.dll', Symbols loaded.
The thread '<No Name>' (0xa44) has exited with code 0 (0x0).
'VmBackup.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
The thread '<No Name>' (0x107c) has exited with code 0 (0x0).
The thread '<No Name>' (0x1838) has exited with code 0 (0x0).
The thread 'vshost.RunParkingWindow' (0xa78) has exited with code 0 (0x0).
The thread '<No Name>' (0x10e0) has exited with code 0 (0x0).
The program '[6436] VmBackup.vshost.exe: Program Trace' has exited with code 0 (0x0).
The program '[6436] VmBackup.vshost.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

它没有到达 EventLog.WriteEntry。它也不输出到事件日志。我已经重新启动了 VS2010，但这并没有帮助。我有提示打开所有错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:43:38.363

首先，我会在您的条件周围使用大括号，因为如果 EventLog 没有源，则 EventLog 是否应该写入条目有点不清楚。

```
if (!EventLog.SourceExists(source)) 
{
   EventLog.CreateEventSource(source, log); 
}

  EventLog.WriteEntry(source, message, eventLogEntryType, eventId); 
```

还可以尝试将其包装在一个`try/catch`块中，以查看是否有任何未处理的异常导致程序随机退出。

```
try {

     if (!EventLog.SourceExists(source)) 
     {
           EventLog.CreateEventSource(source, log);
     }

     EventLog.WriteEntry(source, message, eventLogEntryType, eventId);  

} catch (Exception e)
  {
     Console.WriteLine(e);
  } 
```

附加：线程`'vshost.NotifyLoad' (0x28c) has exited with code 0 (0x0)`。线程`'vshost.LoadReference' (0x470) has exited with code 0 (0x0)`。不是错误。Visual Studio 告诉您后台线程已退出。0 表示线程运行成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:44:09.993

我怀疑它正在尝试创建 eventLog Source 并引发异常，因为这需要管理员权限。

# c - 查询 glib c setmntent 函数

> ID：12803641
> 
> 赞同：3
> 
> 时间：2012-10-09T15:39:41.627
> 
> 标签：c, glibc, mount

我见过类似的东西

```
setmntent(MOUNTED, "r"); 
```

有什么意义`MOUNTED`？是关键字吗？宏？

在阅读了 的手册页后`setmntent`，我认为第一个参数`setmntent`是`file*`which could be `/etc/mtab`or `/proc/mounts`。但是这个`MOUNTED`词让我很困惑。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:48:27.650

它们是[mmtent.h](http://www.gnu.org/software/gnulib/manual/html_node/mntent_002eh.html)中的宏。

```
/* File listing canonical interesting mount points.  */
#define MNTTAB      _PATH_MNTTAB    /* Deprecated alias.  */

/* File listing currently active mount points.  */
#define MOUNTED     _PATH_MOUNTED   /* Deprecated alias.  */ 
```

> 定义了 struct mntent 类型和宏 MNTTAB、MOUNTED、MNTTYPE_ *、MNTOPT_*，并声明了函数 setmntent、getmntent、getmntent_r、addmntent、endmntent、hasmntopt。

宏 FSTAB、MNTTAB 和 MOUNTED 定义了一个路径，但它们是一个不推荐使用的别名，`_PATH_MNTTAB` 应该`_PATH_MOUNTED`使用它们。

`#define _PATH_FSTAB "/etc/fstab"`(fstab.h)

`#define _PATH_MOUNTED "/etc/mtab"`（即glibc的[paths.h](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/generic/paths.h;h=03bf0f355f693b8ed6f8fc5272c74b802d1f30df;hb=b4c4f7767d22b1e2ddbb3f0657418acafa323017)）

见[安装信息](http://www.gnu.org/software/libc/manual/html_node/Mount-Information.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:46:44.843

`setmntent()`的第一个参数是`char *`，指的是“字符串”，即包含文件系统描述的文件的名称。

对于您提供的代码片段，我可以猜测它`MOUNTED`可能被定义为

1

```
#define MOUNTED "/etc/mtab" 
```

或 2

```
char MOUNTED[] = "/etc/mtab" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:49:15.060

来自[http://www.gnu.org/software/gnulib/manual/html_node/mntent_002eh.html](http://www.gnu.org/software/gnulib/manual/html_node/mntent_002eh.html)：

> **`mntent.h`**
> 
> 定义类型 struct mntent 和宏`MNTTAB`, `MOUNTED`, `MNTTYPE_*`, `MNTOPT_*`...

请注意，`setmntent`将文件路径作为第一个参数，因此[通常](http://www.scs.stanford.edu/histar/src/pkg/uclibc/include/paths.h "uclibc paths.h")`MOUNTED`定义为文件路径（如果宏甚至可用）。 `"/etc/mtab"`

# angularjs - Angularjs，观察变量值变化

> ID：12803646
> 
> 赞同：1
> 
> 时间：2012-10-09T15:39:49.633
> 
> 标签：angularjs

我有如下的 AngularJS 模块声明。在这里，我声明了价值**AppModel**。我想编写`AppModel.currentTable`更改时会触发的代码，我如何**观察**这个值的变化？

```
angular.module('MIIApp', ['MIIServices']).
value("AppModel",{
    currentTable:"TESTME-h",
    currentUser:null
}); 
```

任何帮助！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:26:17.240

我认为你不应该这样做。正如您[在此处](http://docs.angularjs.org/api/AUTO.%24provide#value)看到的，一个值应该是一个常量：

> 值（名称，值）
> 
> 如果 $get 方法是常量，则用于配置服务的简写。

在 AngularJS 中，一个服务是一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)，一个值是可能的服务中最简单的，当被调用时返回总是相同的。我不知道您需要什么，但是您是否将模型与服务混淆了？

# ios - UIScrollView - 所有方向 - 是否可取？

> ID：12803647
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:39:51.050
> 
> 标签：ios, ipad

我想在水平和垂直方向上实现 UIScrollView。（移动上、下、右、左）。在用户端使用该应用程序好吗？这是可取的吗？

Apple 是否接受这种类型的实施？请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:47:12.920

你当然可以让你的滚动视图在两个方向上滚动，Apple 没有理由介意——毕竟，他们在 UIScrollView 中内置了这种功能，并且很多应用程序（包括他们自己的）都使用了它。

您的界面是否适合您的用户是一个单独的问题。拥有 2D 滚动条这一事实不应该受到伤害，但如果内容本质上是一维的，它显然不会那么好用。例如，表格视图通常应该只垂直滚动。

# c#-4.0 - 获取两个不同 VARCHAR 值的主键冲突

> ID：12803651
> 
> 赞同：1
> 
> 时间：2012-10-09T15:40:00.073
> 
> 标签：c#-4.0, sql-server-2008-r2, data-access

> **可能重复：**
> [区分 ß 和 ss 的 SQL 查询](https://stackoverflow.com/questions/772763/sql-query-that-distinguishes-between-ss-and-ss)

这可能是一些奇怪的编码问题，但我不知道如何解决它。

我有一个主键列是 VARCHAR(50)。如果我插入

```
dass 
```

然后我插入

```
daß 
```

然后 SQL Server 失去理智并引发主键冲突错误。如果我使用 .Net 的 DataTable 类，也会发生这种情况。

这是一个小脚本，您可以自己测试一下：

```
CREATE TABLE Foo
(
    Word varchar(50) NOT NULL
)

ALTER TABLE Foo ADD  CONSTRAINT PK_Foo PRIMARY KEY CLUSTERED 
(
    [Word] ASC
)

INSERT INTO Foo VALUES ('dass')
INSERT INTO Foo VALUES ('daß') 
```

关于如何解决这个问题的任何想法？我试图制作 NCHAR 列，但没有奏效。

# iis - web.config 允许来自特定域的所有用户，但不允许来自另一个域

> ID：12803653
> 
> 赞同：4
> 
> 时间：2012-10-09T15:40:11.237
> 
> 标签：iis, dns, web-config

我有来自两个不同域的用户可以访问我目前正在处理的网站，我只想允许来自这些域之一的用户访问该站点。我做了一些研究，唯一能想到的就是允许来自特定域组的用户，而不是仅来自整个域的用户。

我也遇到过这篇建议在登录时手动检查域的帖子：

[http://bytes.com/topic/asp-net/answers/343407-using-web-config-allow-access-domain-users-only](http://bytes.com/topic/asp-net/answers/343407-using-web-config-allow-access-domain-users-only)

我已将此添加到 web.config，但它似乎没有工作：

```
<authorization>
  <deny users="?"/>
  <allow users="FirstDomain\Domain Users"/>
  <deny users="SecondDomain\Domain Users" />
</authorization> 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:50:42.167

最终得到它的工作：

```
<authorization>
  <allow roles="FirstDomain\Domain Users"/>
  <deny users="*"/>
</authorization> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T13:01:04.060

“允许”应该在“拒绝”标签之前，因为在您的情况下，所有内容都将被拒绝访问。

```
<system.web>
 <authorization>
  <allow users="FirstDomain\Domain Users"/>
  <deny users="SecondDomain\Domain Users" />
 </authorization>
</system.web> 
```

希望这可以帮助。

# vba - VBA - 内存优化的类与类型

> ID：12803657
> 
> 赞同：1
> 
> 时间：2012-10-09T15:40:30.007
> 
> 标签：vba, excel

那里的专家-快速提问...

在 Excel VBA 中，我创建了一个包含 4 个字符串变量的类 - 没有构造函数，没有别的。

现在，在我的代码中，我正在遍历一个 ENORMOUS 数组（100k + 次迭代）不断创建类的新实例，为其变量分配值，使用它然后将其分配给 MyClass = nothing。然后再次循环：

```
Dim x As New MyClass
Set x = Nothing

For i = 0 to 1000000
   x.Var1 = "XYZ"
   x.Var2 = "abc"
   x.Var3 = "123"
   x.Var4 = 456

... Use x ...

Set x = Nothing

Next i 
```

鉴于这种用法，将 x 定义为类或公共类型会更节省内存吗（或者它真的没有区别）？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:03:08.700

他们按照你写的方式，使用类肯定会比类型花费更长的时间（在我的机器上长 5 倍）。这是因为当您销毁类时，您会不断地重新分配和重新分配内存。不过，您可能不需要销毁该类，只需将其保存在内存中并更改其属性即可。这

```
Sub test3()

    Dim x As CMyClass
    Dim i As Long
    Dim lStart As Long

    lStart = Timer

    Set x = New CMyClass

    For i = 0 To 1000000
       x.Var1 = "XYZ"
       x.Var2 = "abc"
       x.Var3 = "123"
       x.Var4 = 456
    Next i

    Debug.Print Timer - lStart

End Sub 
```

花费与 UDT 相同的时间，因为该类仅创建一次，并且仅在超出范围时才被销毁。除非有必要将其设置为 Nothing - 如果您可以使用 Type 代替它，您可能不会这样做 - 那么您不应该这样做。在这种情况下，看起来您可以使用 Type 或 Class 并获得相同的性能。

# c# - 在 opencltemplate 中执行内核时的内存使用情况

> ID：12803658
> 
> 赞同：0
> 
> 时间：2012-10-09T15:40:41.937
> 
> 标签：c#, opencl

我正在编写一个图像处理程序，并尝试使用 OpenCLTemplate 实现 gpgpu 和 opencl。在完成您的教程后，我已经弄清楚如何让我的代码运行，但我遇到了较大图像的问题。我通过将图像分成块并通过我的代码运行它来解决这个问题，但我想这样做，而不是有一定数量的块来分割，我让它确定所需的最大内存量并将图像分割成然而运行代码的许多部分。

我遇到的问题是我不知道到底有多少内存被扔到 gpu 上以及如何计算出来。下面是我正在使用的代码，是否可以解释这里的内存是如何处理的，或者关于在哪里查看的一些建议。

我浏览了 opencltemplate 文档，但无济于事，也不知道去哪里找。

```
CLCalc.Program.Compile(openCLInvert);
CLCalc.Program.Kernel kernel = new CLCalc.Program.Kernel("Filter");
CLCalc.Program.Variable CLData = new CLCalc.Program.Variable(Data);

float[] imgProcessed = new float[Data.Length];

CLCalc.Program.Variable CLFiltered = new CLCalc.Program.Variable(imgProcessed);
CLCalc.Program.Variable[] args = 
    new CLCalc.Program.Variable[] { CLData, CLFiltered };

int[] test = new int[] { imageData.Width, imageData.Height };

float size = 0;
for (int x = 0; x <= 1; x++)
{
    size += args[x].Size;
}

kernel.Execute(args, test);
CLCalc.Program.Sync(); 
```

如上所示，我可以找到用作参数的大小量，但我仍然不知道总内存使用量是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:29:33.363

您的应用程序正在使用的内存量将是`Data`变量的大小加上变量的大小`imgProcessed`。

因此，您的应用程序使用的数据量将是：

```
sizeof(float) * imgProcessed.length + sizeof(typeof(Data)) * Data.length 
```

这是因为当您拨打电话时，您的所有数据都在设备上分配

```
CLCalc.Program.Variable CLData = new CLCalc.Program.Variable(Data); 
```

在这种情况下，整个 Data 数组正在写入您的设备内存。

# asp.net-mvc - ASP.Net MVC - Img Src 服务器路径

> ID：12803659
> 
> 赞同：5
> 
> 时间：2012-10-09T15:40:41.960
> 
> 标签：asp.net-mvc, image, razor, view

Visual Studio 2012 - ASP.net - MVC 4

我在显示存储在数据库中的服务器路径中的图像时遇到问题。

我正在使用 HttpPostedFileBase 检索用户上传的文件：

```
using (var uow = _db.CreateUnitOfWork())
            {
                if (imageUpload != null && imageUpload.ContentLength > 0)
                {
                    var fileName = Path.GetRandomFileName() + Path.GetExtension(imageUpload.FileName);
                    var path = Path.Combine(System.Web.Hosting.HostingEnvironment.MapPath("~/Uploads"), fileName);
                    imageUpload.SaveAs(path);
                    achievement.ImageLoc = path;
                }

                uow.Add(achievement);
                Save(uow);
                return true;
            } 
```

这会将上传文件的绝对路径保存到数据库中，并将文件保存到服务器上。当我尝试检索此路径以在视图中显示图像文件时，我得到的只是一个空白方块，就像找不到文件一样（关于：右键单击时为空白 -> 复制图像 url）。我知道路径是正确的，因为我在不同的视图中使用它来允许用户下载文件，它工作正常。此外，我允许用户编辑成功删除旧文件并上传新文件的文件。我遇到的唯一问题是在视图中显示图像。

我努力了：

```
<img src="@Html.Encode(Model.ImageLoc)" />
<img src=@Url.Content(Model.ImageLoc)" /> 
```

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T16:30:10.170

您已将图像的绝对路径存储在数据库中，但您需要使用相对路径来引用它：

```
<img src="@Url.Content("~/Uploads/" + System.IO.Path.GetFileName(Model.ImageLoc))" alt="" /> 
```

生成的 HTML 必须如下所示：

```
<img src="/Uploads/tccxdfu0.nde.jpg" alt="" /> 
```

并不是：

```
<img src="\\PDC2\sites\t\<site.co.uk>\public_html\Uploads\tccxdfu0.nde.jpg" alt="" /> 
```

因为客户端无法从服务器访问此类文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:21:10.840

看看使用

[http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring%28VS.100%29.aspx) 我怀疑它正在被编码，因此没有按预期输出。

# android - android-不同线性布局的单选按钮

> ID：12803660
> 
> 赞同：0
> 
> 时间：2012-10-09T15:40:50.713
> 
> 标签：android, android-layout

我在每个线性布局中动态创建了线性布局和单选按钮......但我想对这些单选按钮进行分组，但我无法做到这一点......

```
LinearLayout linearlayout = (LinearLayout) findViewById(R.id.player_point_entry);

    TextView[] TVplayer = new TextView[number_of_player];
    EditText[] ETpoint = new EditText[number_of_player];
    EditText[] ETmaal = new EditText[number_of_player];
    RadioButton[] won = new RadioButton[number_of_player];
    RadioGroup RG_won = new RadioGroup(this);

    LinearLayout[] dyn_linearLayout = new LinearLayout[number_of_player];

    for(int i =0; i<number_of_player; i++)
    {
        dyn_linearLayout[i] = new LinearLayout(this);
        dyn_linearLayout[i].setPadding(5, 5, 5, 5);
        dyn_linearLayout[i].setOrientation(LinearLayout.HORIZONTAL);
        dyn_linearLayout[i].setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

            TVplayer[i] = new TextView(this);
                TVplayer[i].setText(player_name[i]);
                TVplayer[i].setTypeface(face);
                TVplayer[i].setTextSize(15);
                TVplayer[i].setTextColor(Color.BLACK);
                TVplayer[i].setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f));

            ETpoint[i] = new EditText(this);
                ETpoint[i].setHint("Point");
                ETpoint[i].setLayoutParams(new LinearLayout.LayoutParams(70, LayoutParams.WRAP_CONTENT, 1f));

            ETmaal[i] = new EditText(this);
                ETmaal[i].setHint("Maal");
                ETmaal[i].setLayoutParams(new LinearLayout.LayoutParams(70, LayoutParams.WRAP_CONTENT, 1f));

            won[i] = new RadioButton(this);
                won[i].setChecked(true);
                won[i].setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                won[i].setChecked(false);

            dyn_linearLayout[i].addView(TVplayer[i]);
            dyn_linearLayout[i].addView(ETpoint[i]);
            dyn_linearLayout[i].addView(ETmaal[i]);
            dyn_linearLayout[i].addView(won[i]);

            linearlayout.addView(dyn_linearLayout[i]);

    } 
```

请帮帮我...上面的代码让我可以将 RadioButton 添加到不同的 LinearLayout 但可以对它们进行分组...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:47:26.103

您可以通过编程方式设置 RadioGroup。查看这个问题：[以编程方式设置 RadioGroup](https://stackoverflow.com/questions/6332042/setting-up-a-radiogroup-programmatically)

# eclipse - Eclipse 更改行号

> ID：12803661
> 
> 赞同：0
> 
> 时间：2012-10-09T15:40:52.113
> 
> 标签：eclipse

我正在调试我的代码，我首先注意到它跳过了我的断点，我认为这是由于 spring 的原因。但是我也注意到它已将行号更改为流：

![在此处输入图像描述](../Images/bc720b5aea9a21325191b85f4561a914.png)

我不知道为什么 Eclipse 会随机执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:12:25.427

这在我看来是反编译的 Java 代码。

行号不是由 Eclipse 生成的，而是由第三方反编译器生成的（如果是这样的话）。

边注：

检查您的调试配置以禁用反编译器，因为如果您只是在调试，它根本不应该运行！

# xpath - 使用 XPATH 获取 SelectSingleNode 索引

> ID：12803662
> 
> 赞同：0
> 
> 时间：2012-10-09T15:40:56.140
> 
> 标签：xpath

我想使用 XPath 获取节点的索引，但我喜欢在一行中完成。我希望我存储的 int 可以作为节点存在的证明，以及匹配节点第一次出现的位置。

我现在所拥有的就是我想要的，但它匹配匹配节点的最后一次出现而不是第一次出现。我可以改变这个来让我成为第一个吗？

```
int base_Schemes = xmlWebConfig.SelectNodes("/configuration/Security/Authentication/schemes/scheme[@type='ssoscheme, sso']/preceding-sibling::scheme").Count; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:48:46.367

您在寻找`position()`功能吗？

试试`/configuration / Security / Authentication / schemes [@type = 'ssoscheme, sso'] / preceding-sibling::scheme / position()`。

# report - Report Builder 3.0 不显示没有子数据的数据

> ID：12803666
> 
> 赞同：0
> 
> 时间：2012-10-09T15:41:08.067
> 
> 标签：report, reportbuilder, reportbuilder3.0

假设我有 1 个父数据和 3 个子数据，如链：

父母 -> 孩子 1 -> 孩子 2 -> 孩子 3

在设计器中使用表向导我可以获得任何数据，但在我们的案例中没有 Child 3 数据。为了解释这一点，假设我们有一个这样的数据库：

我拥有的汽车：汽车品牌 --> 汽车型号 --> 改装 我有 2 个如下数据：

Ford --> Focus --> Spoiler, Body Kit, New Brake System Mercedes --> C180 --> \没有修改数据，因为我没有\

报告生成器仅显示福特福克斯。它没有显示梅赛德斯，因为它没有任何修改。如何让报表生成器 3 显示所有这些？

或者你能推荐任何其他报告解决方案，至少列出我的数据，没有可视化或花哨的效果。我只需要导出到 excel 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:01:26.373

问题出在我的选择语句中：

```
SELECT
  Kolonminhas.KolonminhaID
  ,Kolonminhas.KolonID AS [Kolonminhas KolonID]
  ,Kolonminhas.Aciklama
  ,Kolonminhas.En AS [Kolonminhas En]
  ,Kolonminhas.Boy AS [Kolonminhas Boy]
  ,Kats.KatID AS [Kats KatID]
  ,Kats.BlokID AS [Kats BlokID]
  ,Kats.Ad AS [Kats Ad]
  ,Kats.Kolonaltkot
  ,Kats.Kolonustkot
  ,Bloks.BlokID AS [Bloks BlokID]
  ,Bloks.ProjectID
  ,Bloks.Ad AS [Bloks Ad]
  ,Kolons.KolonID AS [Kolons KolonID]
  ,Kolons.KatID AS [Kolons KatID]
  ,Kolons.KolonAdi
  ,Kolons.En AS [Kolons En]
  ,Kolons.Boy AS [Kolons Boy]
  ,Kolons.Yukseklik
  ,Kolons.Altkot
  ,Kolons.UstKot
FROM
  Kolons
  INNER JOIN Kolonminhas
    ON Kolons.KolonID = Kolonminhas.KolonID
  INNER JOIN Kats
    ON Kolons.KatID = Kats.KatID
  INNER JOIN Bloks
    ON Kats.BlokID = Bloks.BlokID 
```

要解决此问题，应使用 OUTER JOIN 命令。但是我无法创建一个。如果有人帮助我，我将不胜感激。

这是正确的查询：

```
SELECT
  Kolonminhas.KolonminhaID
  ,Kolonminhas.KolonID AS [Kolonminhas KolonID]
  ,Kolonminhas.Aciklama
  ,Kolonminhas.En AS [Kolonminhas En]
  ,Kolonminhas.Boy AS [Kolonminhas Boy]
  ,Kats.KatID AS [Kats KatID]
  ,Kats.BlokID AS [Kats BlokID]
  ,Kats.Ad AS [Kats Ad]
  ,Kats.Kolonaltkot
  ,Kats.Kolonustkot
  ,Bloks.BlokID AS [Bloks BlokID]
  ,Bloks.ProjectID
  ,Bloks.Ad AS [Bloks Ad]
  ,Kolons.KolonID AS [Kolons KolonID]
  ,Kolons.KatID AS [Kolons KatID]
  ,Kolons.KolonAdi
  ,Kolons.En AS [Kolons En]
  ,Kolons.Boy AS [Kolons Boy]
  ,Kolons.Yukseklik
  ,Kolons.Altkot
  ,Kolons.UstKot
  from Bloks
  left join (Kats left join (Kolons left join Kolonminhas on Kolons.KolonID = Kolonminhas.KolonID) ON Kats.KatID = Kolons.KatID) ON Bloks.BlokID = Kats.BlokID 
```

# c# - Web 浏览器控件 - 随内容滚动

> ID：12803667
> 
> 赞同：1
> 
> 时间：2012-10-09T15:41:12.687
> 
> 标签：c#, .net, webbrowser-control

我有一个 Jquery 网站，它是一个终端。它工作得很好，我想使用 WebBrowser 控件将它安装在 Windows 窗体中。但是，我需要控件的焦点在加载新内容时滚动。

我怎样才能做到这一点？

# html - Sprite 菜单，网站示例

> ID：12803669
> 
> 赞同：0
> 
> 时间：2012-10-09T15:41:27.583
> 
> 标签：html, css, menu

我有一个关于精灵菜单的问题。是否可以制作这样的精灵图像：

?

我正在寻找的是一个使用该图像的菜单，并显示我悬停链接的所有内容。

我的问题是，当我尝试这样做时，文本变得不可点击：/正如你所看到的，我已经尝试过使用一些 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:49:28.493

尝试了解更多关于 html / css 图层（z-index）的信息：

[http://www.echocho.com/csslayers.htm](http://www.echoecho.com/csslayers.htm)

[http://www.html.net/tutorials/css/lesson15.php](http://www.html.net/tutorials/css/lesson15.php)

# java - 从java类中的spring文件访问属性

> ID：12803681
> 
> 赞同：1
> 
> 时间：2012-10-09T15:42:25.263
> 
> 标签：java, spring

我一直在假设一些东西，现在发现它是不正确的。我的 spring 上下文中有以下配置属性声明：

```
<bean class="org.springframework.web.context.support.ServletContextPropertyPlaceholderConfigurer">
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
        <property name="searchContextAttributes" value="true" />
        <property name="contextOverride" value="true" />
        <property name="locations">
            <list>
                <value>classpath:/app.properties</value>
            </list>
        </property>
    </bean> 
```

我认为 from 的值`app.properties`会覆盖我的系统属性，所以我可以像这样在我的 Java 类中直接访问它们：

```
String someThingFromPropertyFile = System.getProperty("nameFromPropertyFile"); 
```

当然，我到处都是空指针异常。现在我在这里询问如何从您的应用程序（您的应用程序的 Java 类的一部分）访问您的应用程序属性。

有没有比下面更好的方法（我不是说它不好）。

[使用 Spring 以编程方式访问属性文件？](https://stackoverflow.com/questions/1771166/access-properties-file-programatically-with-spring)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T15:51:52.613

在应用程序上下文中：

```
 <context:property-placeholder location="classpath:your.properties" ignore-unresolvable="true"/> 
```

然后在java中你可以这样做：

```
@Value("${cities}")
private String cities; 
```

your.properties 包含以下内容：

```
cities = my test string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:40:55.503

`Spring` properties do not override `System` properties. It works the other way. You should be getting all your properties from `Spring` and not from `System.getProperties()`. `System` properties will override `Spring` properties with the same name. The `SYSTEM_PROPERTIES_MODE_OVERRIDE` you are setting says that when you get a property value from `Spring` the `System` property will win.

You want to set the value to be `SYSTEM_PROPERTIES_MODE_FALLBACK`. This is the default so you don't actually need to set it.

If you have this in mind, @NimChimpsky has it the correct method for accessing property values:

```
@Value("${nameFromPropertyFileOrSystemProperty}")
private String someThingFromProperty; 
```

# jquery - jQuery多属性选择器“：”冒号？

> ID：12803682
> 
> 赞同：3
> 
> 时间：2012-10-09T15:42:26.273
> 
> 标签：jquery, attributes, selector

我正在寻找一些为旧 jQuery 版本 v.1.6.4 编写的 jquery 代码。它有一个多属性选择器，如下所示：

```
 "span:[id^='someid-']" 
```

选择器用于各种功能，如“查找”、“儿童”等

注意该选择器中的冒号 (:)！- 当我将我的 jQuery 库更新到 1.8.2 时，这个冒号导致语法错误。

我的问题是为什么它在 1.6.4 版本中没有导致语法错误，一个人可能有什么原因（如果有的话）首先尝试在其中放置一个冒号（这会在这里做任何事情）吗？

不会将其更改为

```
 "span[id^='someid-']" 
```

做正确的事？

另外，如果我将其更改为

```
 "span\\:[id^='someid-']" 
```

它使 v.18.2 中的语法错误消失，但结果不同（它选择较少数量的结果）......它在这里做什么？在这个选择器中转义冒号是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:20:14.803

检查：

```
$('span[id^="someid-"]') 
```

# android - 在 EditText 中获取跨区文本

> ID：12803686
> 
> 赞同：2
> 
> 时间：2012-10-09T15:42:45.167
> 
> 标签：android

我想知道是否有任何样式应用于 EditText 中的选定文本。例如

“这很大胆”

这是我想要实现的，如果选择的是粗体，则删除粗体，否则应用粗体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:46:44.153

您应该能够使用`getEditableText()`EditText 视图上的方法来获得一个 Editable - 它有一个方法`getFilters()`。您应该能够遍历过滤器以查看所选区域是否被其中一个覆盖。

[http://developer.android.com/reference/android/widget/EditText.html](http://developer.android.com/reference/android/widget/EditText.html)

[http://developer.android.com/reference/android/text/Editable.html](http://developer.android.com/reference/android/text/Editable.html)

# tomcat - 无法使用 Puppet 在 Tomcat 上部署 Solr

> ID：12803693
> 
> 赞同：0
> 
> 时间：2012-10-09T15:43:14.870
> 
> 标签：tomcat, solr, tomcat6, puppet, vagrant

我正在尝试使用 Puppet 在 Tomcat 上部署 Solr。当`solr.war`复制到 时`/var/lib/tomcat6/webapps/solr.war`，Tomcat 需要一些时间来注意到新添加的文件并部署它。部署步骤之一涉及将`.war`文件展开到`/var/lib/tomcat6/webapps/solr/`目录中。

**问题：**我正在尝试在tomcat 部署并创建此结构**后**`apache-solr-dataimporthandler-3.6.1.jar`添加更多文件（如） 。如果我在 tomcat 之前创建了文件夹，这就是我下面的清单正在做的事情，tomcat 将不会部署 Solr。`/var/lib/tomcat6/webapps/solr/` **`solr.war``/var/lib/tomcat6/webapps/solr/`**

 **在将文件添加到新创建的目录之前，是否可以让 Puppet 等待 tomcat 部署 solr？

**显现**

```
class solr {

  file { '/var/lib/tomcat6/webapps/solr.war':
    ensure => present,
    owner   => root,
    group   => root,  
    mode    => 644,   
    source => 'puppet:///modules/solr/apache-solr-3.6.1.war',
    notify => Service['tomcat'],
  }

  file { '/usr/share/solr':
    ensure => present,
    source => 'puppet:///modules/solr/solr',
    recurse => true,
    require => File['/var/lib/tomcat6/webapps/solr.war'],
    notify => Service['tomcat'],
  }

  $solr_dirs = [ "/var/lib/tomcat6/webapps/solr/", "/var/lib/tomcat6/webapps/solr/WEB-INF/", 
                  "/var/lib/tomcat6/webapps/solr/WEB-INF/lib/"]
  file { $solr_dirs:
      ensure => "directory",
  }

  file { '/var/lib/tomcat6/webapps/solr/WEB-INF/web.xml':
    ensure => present,
    owner   => root,
    group   => root,  
    mode    => 644,   
    source => 'puppet:///modules/solr/web.xml',
    require => File[$solr_dirs],
  }

  file { '/var/lib/tomcat6/webapps/solr/WEB-INF/lib/apache-solr-dataimporthandler-3.6.1.jar':
    ensure => present,
    owner   => root,
    group   => root,  
    mode    => 644,   
    source => 'puppet:///modules/solr/apache-solr-dataimporthandler-3.6.1.jar',
    require => File[$solr_dirs],
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:10:58.833

您实际上并不需要将这些附加文件添加到 solr war 文件中。通常最好让战争保持原状。这些文件可以添加到您的 solr_home，它也位于应用程序服务器之外的其他地方。由于您提到了一个 jar 文件，因此您可以在 .jar 文件中配置 jar 的路径[`solrconfig.xml`](http://wiki.apache.org/solr/SolrConfigXml#lib)。这样，它们将在启动时从 Solr 加载。也看看[这个页面](http://wiki.apache.org/solr/SolrTomcat)。**

# java - 更改列表视图

> ID：12803695
> 
> 赞同：4
> 
> 时间：2012-10-09T15:43:24.020
> 
> 标签：java, android

我想`List adapter`在此示例中使用自定义，以便我可以从中受益，`getView()` 然后获取*列表视图*中按钮的*id*。

 *这样我就可以从数据库中检索（name_id）*学生*`delete`作为带有按钮的列表。

我想实现`delete`这样当用户点击它时，`delete`它会获取*学生*并将其从数据库中删除。 `id`

 *如何在此处将我的适配器更改为自定义列表适配器？

我的代码如下：

```
public class ManageSection extends ListActivity {

//ProgresogressDialog pDialog;

    private ProgressDialog pDialog;

    // Creating JSON Parser object

// Creating JSON Parser object
JSONParser jParser = new JSONParser(); //class
boolean x =true; 

ArrayList<HashMap<String, String>> studentList;

//url to get all products list
private static String url_all_student = "http://10.0.2.2/SmsPhp/view_student_info.php";
// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_student = "student";
private static final String TAG_StudentID = "StudentID";
private static final String TAG_StudentNo = "StudentNo";
private static final String TAG_FullName = "FullName";
// course JSONArray
JSONArray student = null;
private TextView mDateDisplay;
private int mYear;
private int mMonth;
private int mDay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.manage_section);
        mDateDisplay = (TextView) findViewById(R.id.day);

        // add a click listener to the button

        // get the current date

        final Calendar c = Calendar.getInstance();
       mYear = c.get(Calendar.YEAR);
      mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);
        mDateDisplay.setText(mDay+"-"+mMonth+"-"+mYear);

        studentList = new ArrayList<HashMap<String, String>>();

     // on seleting single course
        // launching Edit course Screen
         // on seleting single course
           // launching Edit course Screen

        new LoadAllstudent().execute();

    }

    /**
     * Background Async Task to Load all student by making HTTP Request
     * */
    class LoadAllstudent extends AsyncTask<String, String, String>
    {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ManageSection.this);
            pDialog.setMessage("Loading student. Please wait...");
            pDialog.setIndeterminate(false);
                  }

        /**
         * getting All student from u r l
         * */
        @Override
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_student, "GET", params);

            // Check your log cat for JSON response
            Log.d("All student : ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1)
                {
                    // student found
                    // Getting Array of course
                    student = json.getJSONArray(TAG_student);

                    // looping through All courses
                    for (int i = 0; i < student.length(); i++)//course JSONArray
                    {
                        JSONObject c = student.getJSONObject(i); // read first

                        // Storing each json item in variable
                        String StudentID = c.getString(TAG_StudentID);
                        String StudentNo = c.getString(TAG_StudentNo);
                        String FullName = c.getString(TAG_FullName);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_StudentID, StudentID);
                        map.put(TAG_StudentNo, StudentNo);
                        map.put(TAG_FullName, FullName);

                        // adding HashList to ArrayList
                        studentList.add(map);
                    }
                } else {
                    x=false;

                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }   

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) { 
              // dismiss the dialog after getting all products 
              pDialog.dismiss(); 
              if (x==false)
                Toast.makeText(getBaseContext(),"no student" ,Toast.LENGTH_LONG).show();

              ListAdapter adapter = new SimpleAdapter( 
                      ManageSection.this,  studentList, 
                        R.layout.list_student, new String[] { TAG_StudentID, 
                              TAG_StudentNo,TAG_FullName}, 
                        new int[] { R.id.StudentID, R.id.StudentNo,R.id.FullName}); 
               setListAdapter(adapter); 

             // Updating parsed JSON data into ListView 

        } 

    }
} 
```

请注意，如果有一种无需更改适配器的简单方法，我可以`id`为每个按钮制作一个。因为我听说我必须使用自定义列表适配器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:51:27.647

在此处使用 setListAdapter 为您的 ListActivity 使用自定义适配器：http: [//developer.android.com/reference/android/app/ListActivity.html#setListAdapter](http://developer.android.com/reference/android/app/ListActivity.html#setListAdapter(android.widget.ListAdapter) (android.widget.ListAdapter )

然后，您将能够使用他们的 ID 等标记您的视图。

另一种没有自定义适配器的方法（更简单但不是首选）是将所有条目手动映射到列表中的位置。（因为你可以提供一个元素数组，你可以只使用位置来获取对象）。话虽如此，如果您只是想连接按钮，您可以让 onClick 记录元素的位置，然后当他们按下按钮时，您可以通过访问数组做出正确反应。

编辑：

在你的 onCreate 做：

getListView().setOnItemClickListener(new OnItemClickListener() {

```
public void onItemClick(AdapterView<?> parent, View view, final int pos, long id){
    selected_student=studentList.get(pos); //member of your activity.
}); 
```

然后在您的按钮 onClickListener 中，您只需执行 delete(selected_student);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:57:14.460

您的列表需要一个点击监听器！

这是一个例子；

```
list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, final int arg2, long arg3) {
                //get your information through array.get(arg0), find and delete in database, delete from your arraylist here, then call adapter.notifyDataSetChanged()

                }); 
```

这就是你所需要的！**

# android - 无法在 WebView 中打开 PDF 文档

> ID：12803701
> 
> 赞同：3
> 
> 时间：2012-10-09T15:43:47.117
> 
> 标签：android, android-layout, android-webview

我正在使用 WebView 打开一个实际上是 pdf 文档的 url。这是代码片段。

```
WebView webView = (WebView) context.findViewById(R.id.webView1);
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setLoadWithOverviewMode(true);
webView.getSettings().setUseWideViewPort(true);
webView.loadUrl("http://www.stagecoachbus.com/PdfUploads/Timetable_28768_5.pdf"); 
```

得到的错误是：

```
EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up 
```

我能够打开正常的网页。但是，打开 pdf 文件会导致异常。

有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T15:51:38.863

要在 Webview 中打开 pdf，最好通过 google doc 服务显示 pdf

```
WebView webView = (WebView) context.findViewById(R.id.webView1);
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setLoadWithOverviewMode(true);
webView.getSettings().setUseWideViewPort(true);
webView.loadUrl("http://docs.google.com/gview?embedded=true&url=http://www.stagecoachbus.com/PdfUploads/Timetable_28768_5.pdf"); 
```

它可以帮助您显示 pdf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:00:35.317

如果你想离线阅读 pdf 文件

你可以使用[mupdf-android](http://code.google.com/p/mupdf/downloads/list)库。这是一个很好的图书馆。

我在我的一个应用程序中使用了它。它是用 C 语言编写的。给出了使其可行的指令。

# php - Zend中的只读路由参数？

> ID：12803703
> 
> 赞同：1
> 
> 时间：2012-10-09T15:43:52.250
> 
> 标签：php, zend-framework

这是我的示例路线：

```
routes.subcategory.type = "Router_Route_Subcat"
routes.subcategory.route = "([^/]+)/([^/]+)"
routes.subcategory.defaults.controller = "Category"
routes.subcategory.defaults.action = "sub-category"
routes.subcategory.map.1 = "category"
routes.subcategory.map.2 = "subcategory"
routes.subcategory.reverse = "%s/%s" 
```

现在我想为请求对象添加一个参数，这很容易做到：

```
routes.subcategory.defaults.year = "2010" 
```

然后我可以在操作中执行以下操作：

```
getRequest()->getParam('year'); 
```

但我想 100% 确定这个“年份”参数不能从外界设置或覆盖，不是通过向 URL 添加查询参数，也不是通过将年份参数发布到 URL。

如果我尝试一下，我似乎无法改变它，但我可以确定吗？

# python - re.match 与 re.search 性能差异

> ID：12803709
> 
> 赞同：16
> 
> 时间：2012-10-09T15:44:27.197
> 
> 标签：python, regex

我尝试比较`re.match`和`re.search`使用`timeit`模块，我发现当我想要找到的字符串位于字符串的开头时，匹配比搜索要好。

```
>>> s1 = '''
... import re
... re.search(r'hello','helloab'*100000)
... '''
>>> timeit.timeit(stmt=s1,number=10000)
32.12064480781555

>>> s = '''
... import re
... re.match(r'hello','helloab'*100000)
... '''
>>> timeit.timeit(stmt=s,number=10000)
30.9136700630188 
```

现在，我知道 match 在字符串的开头查找模式并在找到时返回一个对象，但我想知道的是 search 是如何操作的。

在开头找到字符串后，搜索是否会执行任何额外的匹配，这会减慢它的速度？

**更新**

使用@David Robinsons 代码后，我得到了与他相似的结果。

```
>>> print timeit.timeit(stmt="r.match('hello')",
...              setup="import re; s = 'helloab'*100000; r = re.compile('hello')",
...              number = 10000000)
49.9567620754
>>> print timeit.timeit(stmt="r.search('hello')",
...              setup="import re; s = 'helloab'*100000; r = re.compile('hello')",
...             number = 10000000)
35.6694438457 
```

所以，更新后的问题是为什么`search`表现出色`match`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T09:09:01.907

> *“所以，现在更新的问题是为什么搜索性能优于匹配？”*

在这个使用文字字符串而不是正则表达式模式的特定实例中，确实`re.search`比`re.match`默认的 CPython 实现稍快（我没有在 Python 的其他版本中对此进行测试）。

```
>>> print timeit.timeit(stmt="r.match(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('hello')",
...              number = 10000000)
3.29107403755
>>> print timeit.timeit(stmt="r.search(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('hello')",
...             number = 10000000)
2.39184308052 
```

查看[这些模块背后的 C 代码](http://hg.python.org/cpython/file/0ee03c9b098f/Modules/_sre.c)，搜索代码似乎具有内置优化[功能，可以快速匹配以字符串横向为前缀的模式](http://hg.python.org/cpython/file/0ee03c9b098f/Modules/_sre.c#l1506)。在上面的示例中，整个模式是一个没有正则表达式模式的文字字符串，因此这个优化的例程用于匹配整个模式。

请注意，一旦我们引入正则表达式符号，性​​能会如何下降，并且随着文字字符串前缀变短：

```
>>> print timeit.timeit(stmt="r.search(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('hell.')",
...             number = 10000000)

3.20765399933
>>> 
>>> print timeit.timeit(stmt="r.search(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('hel.o')",
...             number = 10000000)
3.31512498856
>>> print timeit.timeit(stmt="r.search(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('he.lo')",
...             number = 10000000)
3.31983995438
>>> print timeit.timeit(stmt="r.search(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('h.llo')",
...             number = 10000000)
3.39261603355 
```

对于包含正则表达式模式的部分模式，[SRE_MATCH](http://hg.python.org/cpython/file/0ee03c9b098f/Modules/_sre.c#l776)用于确定匹配。这与后面的代码基本相同`re.match`。

`re.match`请注意，如果模式以正则表达式模式而不是文字字符串开头，结果是如何接近的（稍微快一点）。

```
>>> print timeit.timeit(stmt="r.match(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('.ello')",
...              number = 10000000)
3.22782492638
>>> print timeit.timeit(stmt="r.search(s)",
...              setup="import re; s = 'helloab'*100000; r = re.compile('.ello')",
...             number = 10000000)
3.31773591042 
```

* * *

换句话说，忽略`search`和`match`具有不同目的的事实`re.search`比`re.match`仅当模式是文字字符串时要快。

当然，如果您使用的是文字字符串，那么使用字符串操作可能会更好。

```
>>> # Detecting exact matches
>>> print timeit.timeit(stmt="s == r", 
...              setup="s = 'helloab'*100000; r = 'hello'", 
...              number = 10000000)
0.339027881622

>>> # Determine if string contains another string
>>> print timeit.timeit(stmt="s in r", 
...              setup="s = 'helloab'*100000; r = 'hello'", 
...              number = 10000000)
0.479326963425

>>> # detecting prefix
>>> print timeit.timeit(stmt="s.startswith(r)",
...              setup="s = 'helloab'*100000; r = 'hello'",
...             number = 10000000)
1.49393510818
>>> print timeit.timeit(stmt="s[:len(r)] == r",
...              setup="s = 'helloab'*100000; r = 'hello'",
...             number = 10000000)
1.21005606651 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T15:55:35.853

在我的机器上（Mac OS 10.7.3 上的 Python 2.7.3，1.7 GHz Intel Core i5），当完成将字符串构造、导入 re 和正则表达式在设置中编译并执行 10000000 次迭代而不是 10 次时，我发现对面的：

```
import timeit

print timeit.timeit(stmt="r.match(s)",
             setup="import re; s = 'helloab'*100000; r = re.compile('hello')",
             number = 10000000)
# 6.43165612221
print timeit.timeit(stmt="r.search(s)",
             setup="import re; s = 'helloab'*100000; r = re.compile('hello')",
            number = 10000000)
# 3.85176897049 
```

# android - Eclipse 上未显示 Android“启用调试的设备”

> ID：12803710
> 
> 赞同：8
> 
> 时间：2012-10-09T15:44:29.010
> 
> 标签：android

在这里发布之前，我已经经历了很多线程。我遇到了 Android 设备调试问题 - 该设备未在 Eclipse IDE 的“设备”选项卡上列出。（获取“设备”选项卡“Windows -> 显示视图 -> 设备”）。因此，在开始调试时，无法选择设备，因为设备列表显示为空白。奇怪的是，它在 Windows 资源管理器之前和之下都可以正常工作，我可以浏览文件。

我使用的是 Windows Vista Home 高级版，32 位操作系统

我所尝试的一切：

在电话中：

*   在手机的“设置-> 开发者选项”下启用 USB 调试
*   禁用和启用 USB 调试
*   重启了手机

在 Eclipse 中：

*   在“调试配置->目标（选项卡）”下，选择了“始终提示选择设备”。它提示但不显示设备列表中的任何设备！
*   尝试在设备选项卡下休息亚行。（获取“设备”选项卡“Windows -> 显示视图 -> 设备”
*   与 ADB 一起重新安装了最新的 Android SDK
*   安装 Eclipse Juno

在安装 Android SDK 工具的 /platform-tools/ 目录下的 windows CMD 中，运行以下命令而没有得到任何肯定结果： 关闭 Eclipse，拔下设备并尝试运行： adb kill-server adb start-server

重新插入并运行 adb devices

移动设备详情：

*   型号 = Galaxy S2 GT-i9100
*   扎根=是
*   操作系统版本。= 4.0.3
*   内核版本。= 3.0.15
*   铁杆@speedmod-s2-ics #k3-27b

    Eclipse 版本：Indigo Service Release 1 Build id：20110916-0149

Edit1：我最终在 Eclipse 控制台上收到此错误消息：“[2012-10-09 12:39:22 - DeviceMonitor] Adb 连接错误：现有连接被远程主机强制关闭 [2012-10-09 12 :39:23 - DeviceMonitor] 连接尝试：1" 我相信问题出在 ADB 驱动程序上。我已经安装了最新的 SDK，所以驱动程序也是最新的。有没有其他方法可以安装 ADB 驱动程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T16:20:08.610

您的手机是否设置为仅充电？我知道如果将手机设置为存储模式，我的手机将无法在 Eclipse 中连接。如果您可以在 Windows 资源管理器中查看它，则可能是您的问题的原因。

除此之外，有时当我遇到此类问题时，我会执行以下操作：

```
1\. Unplug phone from PC
2\. Disable USB Debugging in phone
3\. Plug phone into PC
4\. Unplug phone from PC
5\. Enable USB Debugging in phone
6\. Plug phone into PC 
```

如果我的手机很困难并且没有在 Eclipse 中显示，或者如果它显示但不允许我选择它进行调试，那么执行一次或两次通常可以修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:49:59.927

尝试在您的**设备**视图中**重置 adb**选项

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T18:11:53.203

您是否检查了项目所需的最低 android 版本？

我当前的项目需要超过 4.x 的 android 版本，因此无法识别低于该版本的任何设备。这似乎很明显，但只需确保您的设备版本是最新的，以便能够在您的项目中使用 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T15:04:07.363

有同样的问题 修复：1.卸载旧的 Kies mini 2.安装：SAMSUNG Kies,PC Sync (Software) (ver.2.3.3.12085_7_5) from [http://www.samsung.com/us/support/downloads/global #global_download_list](http://www.samsung.com/us/support/downloads/global#global_download_list)

发挥魅力:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-09T05:16:30.693

很久以前我也面临同样的问题，这些是我尝试过的可能解决方案。在我的情况下，sol2 有效。

溶胶1：

转到设置>开发人员选项>启用调试。（通过在广告关闭时连接您的设备来尝试此操作）

溶胶2：

转到终端中的平台工具。并尝试这些命令 1../adb kill-server 2../adb start-server 3../adb devices

溶胶3：

1.  在你的eclipse中点击设备图标。（如果图标不存在，那么按照步骤windows>show view>others> device） 2.right side角你会发现向下箭头标记点击那个
2.  clcik 重启亚行。

sol4：重新启动你的 Eclipse。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T15:47:54.250

可能看起来很明显，但是您是否尝试过卸载所有驱动程序，重新安装最新的驱动程序（和正确的驱动程序），然后尝试重新启动计算机？我已经在工作中在多部手机上进行了测试，并且通过重新安装驱动程序，至少对我而言，解决了很多类似这样的奇怪问题！似乎您遇到了很多软件问题，也许是时候尝试硬件了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-15T20:51:58.060

我以前也有类似的问题。我已经尝试了每个人提到的一切，但没有奏效。

但是，我有一个名为 EasyTether 的程序。这实际上阻止了 adb 连接。删除程序后，它开始像魔术一样工作。

你有这个机会吗？或者您在 PC 上是否有任何其他软件可以处理设备和 PC 之间的直接连接？如果这样做，请尝试将其删除并重试。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-01T09:00:09.617

这些是解决问题的步骤

1.  转到windows任务管理器
2.  停止 Adb.exe
3.  重启手机**

# google-apps-script - 无法通过 HTTP get/post 获取应用程序交换信息

> ID：12803714
> 
> 赞同：1
> 
> 时间：2012-10-09T15:45:04.433
> 
> 标签：google-apps-script

我的场景：我有一个以 user1 身份运行的 AppsScript 应用程序，该应用程序发布为 Web 应用程序。在其中我实现了 doGet()。我有另一个以 user2 身份运行的 Appscript 应用程序。我尝试在已发布的 URL 上执行 URLFetch 并返回一堆指示请求者需要登录的 HTML。如果我从浏览器获取与“user2”相同的 URL，则可以完美访问 doGet() 并返回我需要的内容。

您似乎无法在 Appscript 应用程序之间发出 get（或 post - 我都尝试过）HTTP 请求。NB 两个用户都在同一个域上，如上所述，当用户从浏览器启动时它可以工作。就像用户的身份没有从 App 传递到 App。

这是一个测试用例，因为我正在尝试找出将数据从一个应用程序移动到另一个应用程序的最佳方法。谷歌有返回数据的内容服务，但我想推送数据。推送最适合我正在考虑的架构，因为将有多个应用程序（10+）试图在任何时候推送到一个应用程序，因此扩展很重要。ContentService 本身适用于一种轮询方法，如果一个应用程序轮询其他 10 个应用程序，该方法将无法扩展。将获得超时等。任何提示：这样的架构值得赞赏。我的另一个选择是让 10 个应用程序直接写入附加到主应用程序的 ScriptDB。我不喜欢这个选项，因为共享 ScriptDB 的唯一方法是在项目级别，每个应用程序都可以看到 ScriptDB 中的所有内容，并且在应用程序级别不会隔离数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:57:04.267

并不是说您不能让一个脚本调用另一个脚本（您绝对可以），而是 UrlFetchApp 在设计上不会通过键盘传递用户的身份验证。（其原因不在此答案的范围内；只需说它们与安全相关，对许多应用程序托管平台都很常见，并且不太可能很快改变。）因此，您可以调用另一个脚本的唯一方法是如果被调用的脚本发布为可供匿名用户使用（这意味着它必须作为脚本所有者运行，正如 Henrique 所说）。

However, what you want to do is trivially supported by the libraries feature. If script A wants to notify script B of something, and have script B take an action while preserving the user authentication of script A, all you need to do is include B as a library dependency of A and add a function to B that A can call when it wants to push a notification.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:02:49.357

我没有使用这个新的“以用户身份运行”选项测试这个中间应用程序脚本 doGet 调用。但是当以开发人员身份运行时，它曾经对我很好。

此外，导入主应用程序并将数据直接推送到它并不一定要暴露任何东西。这完全取决于您构建的“接口”（不以下划线结尾的公共方法）。您不需要传递 db 实例对象。主脚本可以接收要保存的反对并自行执行。

希望这可以帮助。

# git - 如何让 master/origin 知道子树

> ID：12803721
> 
> 赞同：1
> 
> 时间：2012-10-09T15:45:30.570
> 
> 标签：git, version-control, github, git-subtree

我有多个使用共享文件集的应用程序。

我想使用子树来管理这些文件。通过签出主文件并将共享源添加为子树，我已成功设置了一个本地克隆：

```
git subtree add --squash --prefix shared git@github.com:githubaccount/shared-repo-name.git master 
```

这在本地工作，但我找不到让源知道子树的方法，这样我的同事就不必在每次克隆主存储库时手动添加子树。

我确定我遗漏了一些东西，但从稀缺的子树文档中并不明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:26:40.520

所以看起来虽然`subtree add`看起来它拉了子树（并且确实拉了文件），但它并没有合并子树。所以：

```
git subtree pull --squash --prefix shared git@github.com:githubaccount/shared-repo-name.git master
git push 
```

得到我所期望的（请注意，这些是`subtree add`对初始问题中命令的补充）。

# javascript - 结构 JS - 变量为空？

> ID：12803724
> 
> 赞同：0
> 
> 时间：2012-10-09T15:45:45.423
> 
> 标签：javascript

我是一个完全的 JS 新手，并尝试构建我的简单 JS 代码。目标是获取用户位置。

它可以工作，但是 getUserCoordinates 函数没有返回值？我认为这只是初学者的逻辑失败？

```
var app = {

geocoder: null,

init: function() {
    this.geocoder = new google.maps.Geocoder();
    coordinates = this.getUserCoordinates();
    console.log(coordinates); // empty??
    return;
},

getUserCoordinates: function() {

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition( 

            function (coords) { 
                console.log(coords); // works Geocoder Object!
                return coords; // the problem 
            }, // more code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:51:18.677

不，对于初学者来说这是一个很常见的错误。该`getCurrentPosition`方法是异步的（确定位置需要一些时间）并且不返回任何内容。完成后，它将调用`callback`您传递给它的函数 - 将来的某个时候。该值仅在该回调内可用，或对从那里调用的函数可用。

# java - Java设置奇怪的行为

> ID：12803736
> 
> 赞同：1
> 
> 时间：2012-10-09T15:46:20.627
> 
> 标签：java, iterator, set, treeset

我遇到了一个问题，我需要根据某些条件更改排序集的可比较值。

做这样的事情：

```
SortedSet<T> groups;

for(T t: groups){
        t.setOrdinal(max);
} 
```

不会自动重新排列 SortedSet。

在线阅读我发现我需要从集合中删除对象然后再次添加它。显然，在迭代集合时我不能这样做。所以我决定制作一个数组列表。使集合为空，然后再次添加所有元素，以便它们遵循排序顺序。我做了这样的事情：

SortedSet 组；

```
List<T> groupList = new ArrayList<T>(groups);
groups = null;
for(T t: groupList){
        t.setOrdinal(max);
}

groups = new TreeSet<T>(groupList); 
```

但是当我检查组集时，它没有遵循基于比较对象 T 序数的比较器的排序顺序

但是当我尝试这样的事情时：

SortedSet 组；

```
List<T> groupList = new ArrayList<T>(groups);
groups.clear();
for(T t: groupList){
        t.setOrdinal(max);
}

groups.addAll(groupList); 
```

我得到了预期的结果。有人可以解释一下发生了什么吗？

这就是我实现我的 T 类的方式

```
public class T implements Serializable, Comparable<T> {
//
int ordinal;
//getter
//setter

 @Override
  public int compareTo(T that) {
    if (that == null) {
      return 1;
    }

    return this.ordinal - that.ordinal;
  }

} 
```

对于那些想看到完整程序的人：

```
List<SmartUser> groupsList = new ArrayList<SmartUser>(groups);
groups = null;
for (SmartUser smartUser : groupsList) {
        if (smartUser.isExpired()) {
                smartUser.setOrdinal(Long.MAX_VALUE);
        }
        SmartUserQuery smartUserQuery = smartUser.getSmartUserQuery();
        if (smartUserQuery != null) {
                //Do parallel processing: of each samrtUser
        }
}

groups = new TreeSet<SmartUser>groupsList; 
```

正确的结果给出方法：

```
List<SmartUser> groupsList = new ArrayList<SmartUser>(groups);
groups.clear();
for (SmartUser smartUser : groupsList) {
        if (smartUser.isExpired()) {
                smartUser.setOrdinal(Long.MAX_VALUE);
        }
        SmartUserQuery smartUserQuery = smartUser.getSmartUserQuery();
        if (smartUserQuery != null) {
                //Do parallel processing: of each samrtUser
        }
}

groups.addAll(groupsList); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T10:44:21.417

> 我发现我需要从集合中删除该对象，然后再次添加它。显然，在迭代集合时我不能这样做。所以我决定制作一个数组列表。

看看我在[维护 TreeSet sort as object changes value](https://stackoverflow.com/questions/2579679/maintaining-treeset-sort-as-object-changes-value/11169301#11169301)的答案并尝试我的`UpdateableTreeSet`实现。它允许您在迭代排序集时执行延迟更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:01:03.003

将您的 compareTo 方法更改为以下

```
@Override
public int compareTo(CustomObject o) {
    return Integer.valueOf(o.ordinal).compareTo(ordinal );
} 
```

同样根据`TreeSet`合同，您应该提供与 compareTo 方法同步的 equals 方法

```
 @Override
public boolean equals(Object obj) {
    if (obj == null)
        return false;
    if (!(obj instanceof CustomObject))
        return false;
    CustomObject o = (CustomObject) obj;

    return this.ordinal == o.ordinal;
} 
```

示例实现

```
import java.util.ArrayList;
import java.util.List;
import java.util.Set;
import java.util.TreeSet;

public class CustomObject implements Comparable<CustomObject> {

private int ordinal = 0;

public CustomObject(int priority) {
    this.ordinal = priority;
}

/**
 * @param args
 */
public static void main(String[] args) {

    List<CustomObject> list = new ArrayList<CustomObject>();
    list.add(new CustomObject(1));
    list.add(new CustomObject(2));
    list.add(new CustomObject(3));
    list.add(new CustomObject(6));
    list.add(new CustomObject(4));
    System.out.println("Before: " + list);
    for (CustomObject object : list) {
        if (object.ordinal == 4) {
            object.ordinal = 10;
        }
    }
    Set<CustomObject> set = new TreeSet<CustomObject>();
    set.addAll(list);
    System.out.println("After: " + set);

}

@Override
public int compareTo(CustomObject o) {
    return Integer.valueOf(o.ordinal).compareTo(ordinal);
}

@Override
public boolean equals(Object obj) {
    if (obj == null)
        return false;
    if (!(obj instanceof CustomObject))
        return false;
    CustomObject o = (CustomObject) obj;

    return this.ordinal == o.ordinal;
}

@Override
public String toString() {
    return " Ordinal Value is :" + ordinal;
}

} 
```

# c++ - 使用链表的 C++ 堆栈

> ID：12803742
> 
> 赞同：0
> 
> 时间：2012-10-09T15:46:39.290
> 
> 标签：c++, list, pointers, linked-list, stack

我正在尝试使用链表实现一个简单的堆栈。当我运行下面的代码时，我得到

```
6
<some random integer> 
```

几个小时以来，我一直在寻找我的错误，但没有成功。我想某处有一个未初始化的变量，但我似乎找不到它。

```
#include <iostream>

using namespace std;

class node {
    public:
        node operator = (const node&);
        node(int d,node* n): data(d), prev(n) {}
        node(){}
        node* prev;
        int data;
};

node node::operator = (const node &n) {
    node r(n.data, n.prev);
    return r;
}

class stack {
    public:
        stack();
        void push(int);
        int pop();
        bool empty();
    private:
        node* top;
};

stack::stack() {
    top = 0;
}

bool stack::empty() {
    return top == 0;
}

void stack::push(int x) {
    node n(x,top);
    top = &n;
}

int stack::pop() {
    if (!empty()) {
        node r = *top;
        //cout << "r.data: " << r.data << endl;
        top = top->prev;
        return r.data;
    }
    else {
        cout << "Stack empty!" << endl;
        return 0;
    }
}

int main() {
    stack a;
    a.push(5);
    a.push(6);
    cout << a.pop() << endl;
    cout << a.pop() << endl;
} 
```

现在让我完全困惑的是，当我取消注释该行时

```
 //cout << "r.data: " << r.data << endl; 
```

出于测试目的，输出更改为

```
r.data: 6
6
r.data: 6
6 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:48:41.483

这段代码是错误的：

```
void stack::push(int x) {
    node n(x,top);
    top = &n;
} 
```

在这里，您创建一个局部变量，然后设置`top`为指向该变量。但是当函数返回时，局部变量不再存在，并`top`指向一些无效的内存。

您需要`node`使用操作符在堆上创建一个新的`new`：

```
void stack::push(int x) {
    node* n = new node(x,top);
    top = n;
} 
```

当然，现在您必须确保分配的节点在完成后是空闲的。这应该在`stack`弹出所有节点的析构函数中完成，并且`pop`您需要使用`delete`运算符来释放内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T16:01:43.877

除非这是一个类的编程作业，否则请使用 STL 提供的[std::stack 。](http://www.cplusplus.com/reference/stl/stack/ "标准::堆栈")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:55:03.403

```
void stack::push(int x) {
    node n(x,top);
    top = &n;
} 
```

这个函数的问题是 n 具有自动存储期限，并且在函数返回后被销毁。

相反，使用动态分配：

```
node* n = new node(x, top); 
```

# jquery - 首先 li 没有显示活动内容

> ID：12803743
> 
> 赞同：3
> 
> 时间：2012-10-09T15:46:40.537
> 
> 标签：jquery, html

嗨，我主要是一名设计师，但我自己负责了解幕后发生的事情，以帮助我设计更好的网站。

这是我从头开始设计和构建的第一个网站，一切都很顺利，直到我用 ul li 的活动状态解决了这个问题。

这是测试版的链接：[http](http://www.philmckeith.com/stonebridge/2012/4-bedroom-house-the-york-bingley.html) ://www.philmckeith.com/stonebridge/2012/4-bedroom-house-the-york-bingley.html 。

带有下拉列表的框是当前嵌套内容的位置。

HTML：

```
<div id="dd" class="wrapper-dropdown-2" tabindex="1">
<span>House Types</span>
 <ul class="dropdown">
  <li id="dd1"><a href="javascript:void(0);">Chester</a></li>
  <li id="dd2"><a href="javascript:void(0);">Durham</a></li>
  <li id="dd3"><a href="javascript:void(0);">York</a></li>
  <li id="dd4"><a href="javascript:void(0);">Westminister</a></li>
  <li id="dd5"><a href="javascript:void(0);">Ripon</a></li>
 </ul>
 </div>

<div id="content1" class="content"><img src="images/new-homes-bingley-chester-plan.png"></div>
<div id="content2" class="content"><img src="images/new-homes-bingley-durham-plan.png"></div>
<div id="content3" class="content"><img src="images/new-homes-bingley-york-plan.png"></div>
<div id="content4" class="content"><img src="images/new-homes-bingley-westminister-plan.png"</div>
<div id="content5" class="content"><img src="images/new-homes-bingley-ripon-plan.png"></div> 
```

Javascript 选择器：

```
$(document).ready(function() {
//Active first link
//var activeId = $(".active").attr("id").replace("dd",""); $("#content" + activeId).show();
$("#dd a").click(function() {

  //reset
$(".content").hide(); //Hide all content
  $("ul.dropdown li:first").addClass("active").show(); //Activate first tab
  $(".content:first").show(); //Show first tab content
  $("#dd .active").removeClass("active");

  //act
  $(this).addClass("active")
  var id = $(this).closest("li").attr("id").replace("dd","");
  $("#content" + id).show();
});   
}); 
```

Javascript切换：

```
function DropDown(el) {
            this.dd = el;
            this.initEvents();
        }
        DropDown.prototype = {
            initEvents : function() {
                var obj = this;

                obj.dd.on('click', function(event){
                    $(this).toggleClass('active');
                    event.stopPropagation();
                }); 
            }
        }

        $(function() {

            var dd = new DropDown( $('#dd') );

            $(document).click(function() {
                // all dropdowns
                $('.wrapper-dropdown-2').removeClass('active');

});
}); 
```

样式化的 ul 下拉列表选择隐藏内容 ok 但在页面加载时不显示第一个 li 内容。我在 stackoverflow 上找到的壁橱文章就是这个解决方案。[使用 jquery 更改具有嵌套内容的 div 的可见性，onclick](https://stackoverflow.com/questions/2290866/using-jquery-to-change-visibility-of-divs-with-nested-content-onclick?rq=1)

我已经尝试了以下但还没有运气：

```
$('li').eq(0).addClass("active"); 
```

我猜我的切换脚本和选择器脚本以某种方式发生冲突或重复，但不确定如何解决这个问题。非常感谢任何帮助/建议/文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:09:13.113

尝试将“JavaScript 选择器”更改为：

(

```
$(document).ready(function() {
    $("#dd a").click(function() {
        //reset
        $(".content").hide(); //Hide all content
        $("ul.dropdown li:first").addClass("active").show(); //Activate first tab
        $(".content:first").show(); //Show first tab content
        $("#dd .active").removeClass("active");

        //act
        $(this).addClass("active")
        var id = $(this).closest("li").attr("id").replace("dd","");
        $("#content" + id).show();
    });
    $("#dd1 a").click();            // selects the first house type
}); 
```

# java - 如何在java中编写一个简单的方法

> ID：12803747
> 
> 赞同：1
> 
> 时间：2012-10-09T15:46:45.093
> 
> 标签：java, arrays, eclipse, methods

我是 java 新手，已经开始使用 Eclipse。我创建了一组字符串数组，并希望创建一个方法来连接每个数组的一些成员并将它们打印出来。但是eclipse给了我一个语法错误。这是我的代码

> ```
>  Public static void Printar() {
>           System.out.println("Array0[q] + Array1[r] + Array2[s] + >Array3[t] + Array4[u] + Array5[v] + Array6[w] ");
> 
>           } 
> ```

它将数组 1 的每个成员连接到 6（作为字符串），然后将其打印出来。它说 1- Public 无法解析为变量 2- 用分号完成块语句（我有）和其他一些错误 请有人帮助我理解并找出问题所在。非常感谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:47:41.740

**Public 无法解析为变量**意味着 jvm 无法理解是什么`Public`：

`Public`应该是小盒子。Java 区分大小写，java 中的所有关键字都是小写的。

```
Public static void Printar() { 
```

应该

```
public static void Printar() { 
```

**注意：** Java 命名约定建议使用方法名称中的第一个字母作为小写字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:49:54.213

`Public`应该是`public`：

```
 public static void Printar() {
          System.out.println("Array0[q] + Array1[r] + Array2[s] + >Array3[t] + Array4[u] + Array5[v] + Array6[w] ");
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:51:25.373

根据**`Java Naming Convention`**： -

所有的 java`identifiers`和`methods`应该以小写字母或下划线开头。为 Java 定义的每个关键字都遵循相同的规则。

由于,`public`是一个关键字，它以小写字母开头.. 所以，它应该是`public`而不是`Public`..

所以你应该基本上改变你的方法： -

```
Public static void Printar() 
```

至： -

```
public static void printar() 
```

**注意**小写首字母 in`public`和你的方法`printar`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:48:06.597

`Public`应该是`public`（注意大小写）

我怀疑你的其他错误会随之而来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-27T21:58:49.740

`Public`需要是`public`

```
public static void printar() {
    System.out.println("Array0[q] + Array1[r] + Array2[s] + >Array3[t] + Array4[u] + Array5[v] + Array6[w]");
    } 
```

Public 需要小写。此外，方法名称不受大小写的影响，但一般约定是在[camelCase](https://en.wikipedia.org/wiki/Camel_case)中使用方法名称。

我不相信你`System.out.println()`会得到想要的输出。您提到您想将各种数组元素连接成一个字符串，但您当前的代码只会打印您在里面的确切字符串。

# jquery - 如何在 yii 中显示图像而不是文件字段

> ID：12803748
> 
> 赞同：1
> 
> 时间：2012-10-09T15:46:59.440
> 
> 标签：jquery, html, css, yii

在 yii 我有一个`echo CHtml::activeFileField($model, 'image');`. 它显示通常的`<input type="field ...`DOM 对象。如何显示图像而不是文件输入字段。所以当点击用户可以选择一个文件？

有没有办法通过 yii 做到这一点？还是 yii 中的 jquery ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:07:32.350

您可以通过 css 轻松完成：`input[type="file"]{opacity:0;}`并且它旁边的标签有一个图像背景，您可以将其绝对定位。确保为您的输入设置了宽度和高度，使其不会超过您的标签大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:09:12.943

它可以做你正在寻找的东西。

```
echo CHtml::image($src,$alt = '',$htmlOptions = array()); 
```

但是对于输入文件，您必须创建一个输入字段才能上传文件。

# asp.net - ASPDotNetStoreFront：无法将透明代理强制转换为在 AddIn 上键入

> ID：12803749
> 
> 赞同：1
> 
> 时间：2012-10-09T15:47:03.607
> 
> 标签：asp.net, add-in, aspdotnetstorefront, transparentproxy

我最近为客户重新设计的旧 ASPDotNetStoreFront 项目遇到了一个非常奇怪的问题。重新设计很成功，但是我们唯一的项目插件，一个内部创建的税收计算插件，现在不能工作了。插件没有进行任何更改，我可以确认它在重新设计之前一直在工作。我们对网站的所有更改本质上都是装饰性的。ASPDotNetStoreFront 使用[本 PDF 中详细介绍](http://manual.aspdotnetstorefront.com/pdf/ASPDNSF%20ERP%20Provider%20SyncV3.pdf%5d)的附加组件的 ERP 提供程序我仅通过该项目熟悉该提供程序，并且在其他地方几乎没有经验，这可能解释了我的一些问题。

奇怪的是，ASPDotNetStoreFront 正在识别 AddOn 存在并且在尝试为其调用合同时失败。（在这种情况下，它正在使用 ItaxRates 并试图调用 ItaxRatesContract。）每次我尝试激活它时都会发生这种情况并且我收到以下错误：

```
Page URL:/shoppingcart.aspx
Source:Anonymously Hosted DynamicMethods Assembly
Message:Unable to cast transparent proxy to type 'AspDotNetStorefront.Contracts.ITaxRatesContract'.
 Stack Trace:
at ITaxRatesContractToViewHostAdapter_ConstructorInvoker(Object )
at System.AddIn.Hosting.AddInActivator.AdaptToHost[T](AddInToken pipeline, IContract addInContract)
at System.AddIn.Hosting.AddInActivator.ActivateInAppDomain[T](AddInToken pipeline, AppDomain domain, AddInControllerImpl controller, Boolean weOwn)
at System.AddIn.Hosting.AddInActivator.Activate[T](AddInToken token, PermissionSet permissionSet, String appDomainName) 
at System.AddIn.Hosting.AddInActivator.Activate[T](AddInToken token, AddInSecurityLevel level, String appDomainName)
at System.AddIn.Hosting.AddInActivator.Activate[T](AddInToken token, AddInSecurityLevel level)
at System.AddIn.Hosting.AddInToken.Activate[T](AddInSecurityLevel trustLevel)
at AspDotNetStorefrontCore.AppLogic.UseAddIn[T](Action`1 usageContext) in C:\Users\Username\Documents\Visual Studio 2010\Projects\ASPDNSF\ASPDNSFCore\AppLogic.cs:line 11189 
```

它将找到插件，将其作为令牌添加到核心的 AppLogic 类中，将 ItaxRatesViewToContractAddInAdapter 中的变量设置为 Tax Add On，然后导致上述错误。

这个项目发生的一些值得注意的事情：

*   这是从我们的 SVN 服务器拉到一台新的笔记本电脑上的，所以这是第一次在这台计算机上构建这个项目。我不知道这是否真的*应该*有所作为，但在这一点上，我愿意接受任何事情。

*   我试图清理项目以及插件使用的管道以获得相同的结果。没运气。

最后一天，我一直在为这个问题绞尽脑汁，这让我感到很紧张。任何帮助都将非常感激。谢谢！

# web - OSGi 和芝麻与 OWLIM

> ID：12803750
> 
> 赞同：3
> 
> 时间：2012-10-09T15:47:10.597
> 
> 标签：web, osgi, semantics, owl, sesame

有没有一种简单的方法可以让 Sesame 和 OWLIM 在 OSGi 环境中工作？还是有另一种快速推断 OWL-Data 并存储它们的方法？我用内置的推理器、颗粒等尝试了 Jena，但它太慢了。然后我用 OWLIM 尝试了 Sesame，它的速度非常快，但我无法让它与 OSGi 一起使用。有没有人解决了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:31:25.287

我的一位同事目前正在使用 Sesame、OWLIM 和 OSGi。对于 OWLIM，您似乎必须添加额外的 VM 参数。您可以在 OWLIM 站点的新闻部分阅读一些内容，也可以在[此](http://repo.aduna-software.org/websvn/filedetails.php?repname=aduna&path=%2Forg.openrdf%2Fsesame-ext%2Fswiftowlim%2Ftrunk%2Fdoc%2FSwiftOWLIM_user_guide_3.3.pdf&rev=10516)PDF 中查找 OSGi 和 SwiftOWLIM。还有一个非常有趣的项目似乎是正确的选择[amdatu-semanticweb](https://bitbucket.org/amdatu/amdatu-semanticweb/overview)。不幸的是，没有直接的文档，但是如果您想要现成的 OSGi 组件，amdatu 的项目是一个不错的选择。看看，我希望它对你有帮助。

但我不建议使用 VM 参数，因为它们似乎适用于绝对路径，在我看来这不是灵活的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:27:04.963

我不是 OSGi 专家，但 Sesame 至少[可以作为 OSGi 包提供](http://repo.aduna-software.org/maven2/releases/org/openrdf/sesame/sesame-runtime-osgi/)。虽然我不认为 OWLIM 目前可用，但我知道对此有一些需求，因此直接询问 OWLIM 开发人员（通过他们的支持邮件列表）可能会有所回报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:18:36.793

OWLIM 相对于 Pellet 之类的东西速度很快，因为它实现了推理，也就是说，在加载时，它计算所有推理并将它们放入数据库中。因此，当您运行查询时，您只是在查询数据，在查询时没有额外的推理工作。

在数据不经常更改的情况下，这种急切的推理实现非常合适，但是，在不是这种情况的用例中，维护物化推理的开销可能是不可接受的。

硬币的另一面是对于像 Pellet 这样的系统，或其他使用反向链接式推理方法的数据库，负载和数据更改不受推理的影响，但推理工作是在查询时完成的，这可能会减慢下查询。因此，您需要考虑如何计划使用推理来了解哪种方法适合您的需求，这两种方法都不是“正确”的方法。

我会说，Pellet，第一次查询它，通常必须做所有艰苦的推理工作......分类，实现，这会使第一次查询非常慢，但是一旦计算出该信息，如果有没有对数据进行更改，以后的查询可能会非常高效。

免责声明，我不*知道*OWLIM 是如何工作的，这只是我所知道的有根据的猜测。另外，我意识到这并不能回答您的问题——我不知道将 OSGI 与 OWLIM 或其他数据库一起使用的方法——但认为您的评论值得澄清，因为太长而无法放入评论 =)

# php - 如何将 url 作为参数传递给 JavaScript 函数？

> ID：12803752
> 
> 赞同：0
> 
> 时间：2012-10-09T15:47:13.373
> 
> 标签：php, javascript

我只想将基本 url 传递给 javaScript 函数。函数调用如下

```
<img src="assets/images/c_arow_rite.jpg" onClick="nextMonth('.$bs_url.')"/> 
```

它在错误控制台中显示错误，例如

```
Error: SyntaxError: identifier starts immediately after numeric literal
Source File: `http://mywebsite/rand/`
Line: 1, Column: 15
Source Code:
nextMonth(http%3A%2F%2F192.168.1.254%2Frand%2F) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:51:59.893

这一行：

```
<img src="assets/images/c_arow_rite.jpg" onClick="nextMonth('.$bs_url.')"/> 
```

应该写成：

```
<img src="assets/images/c_arow_rite.jpg" onClick="nextMonth(\''.$bs_url.'\')"/> 
```

添加不会混淆 HTML 的双引号并在您的 php 脚本中转义的字符串分隔符。我认为我假设这实际上是以下声明的一部分是正确的：

```
echo '<img src="assets/images/c_arow_rite.jpg" onClick="nextMonth(\''.$bs_url.'\')"/>'; 
```

在这种情况下，添加转义单引号就是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:07:44.277

我认为你可以这样做：

`<img src="assets/images/c_arow_rite.jpg" onClick="nextMonth($bs_url)"/>`

# html - 我应该为我的网站使用哪个后端？

> ID：12803760
> 
> 赞同：0
> 
> 时间：2012-10-09T15:47:39.147
> 
> 标签：html, web-applications, web

我正在为一个本地组织创建一个网站，但我不确定我需要什么样的后端（Java、PHP、Ruby 和 Rails 框架等）。我只在eclipse中使用过Java动态Web项目，所以就基于以前的知识编程的易用性而言，我觉得Java会稍微容易一些。然而，该网站主要是信息性的，唯一的身份验证将是网站管理员（组织的工作人员）登录和上传视频或其他媒体。此外，在网站的一个部分，用户需要能够在评论板上发表评论（应该存储在数据库中）。除此之外，该网站大多是静态的和信息性的，主要依靠设计和内容来吸引用户加入组织。因为这，对于这么少量的数据库交互，我觉得一个 Java 项目似乎相当大。任何关于什么是最好的（对于少量数据库操作来说是最简单、最快和最容易实现的）后端的建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:50:48.370

如果您正在为本地组织创建一个小型网站，我会避免花费太多时间从头开始做任何事情，而只需使用 CMS 系统，如 Wordpress (http://wordpress.org/) 或 Drupal (http:// www.drupal.org)。

如果这是一个更大的企业项目，我会选择 Liferay，因为你提到你有使用 Java 的经验。但是，如果您使用的是 Wordpress 之类的东西，那么 PHP 将一点也不难学。

# orientation - iOS6界面方向损坏

> ID：12803762
> 
> 赞同：4
> 
> 时间：2012-10-09T15:47:46.913
> 
> 标签：orientation, ios6, uiinterfaceorientation

只需要将 iOS 5 应用程序更新到 iOS 6，当然偶然发现了界面方向问题。我现在已经知道事情发生了变化，我什至知道发生了什么变化，但我似乎仍然无法独自管理它。

我的应用程序由几个视图控制器组成，它们被推送到导航控制器上。所有视图控制器都应该是横向的，除了一个应该是纵向的。在 iOS 5 中一切正常，但现在纵向模式的一个控制器也显示为横向模式，当然会失真。

我的 iOS 5 代码如下所示：

横向模式下的视图控制器：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
return (interfaceOrientation==UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation==UIInterfaceOrientationLandscapeRight);
} 
```

纵向模式下的视图控制器：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
return (interfaceOrientation==UIInterfaceOrientationPortrait) || (interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown);
} 
```

现在我发现了我实现的 iOS 6 的变化

AppDelegate：（允许所有方向，如在 plist 中）

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
return UIInterfaceOrientationMaskLandscapeLeft|UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

横向模式下的视图控制器：（将方向限制为横向模式）

```
- (NSUInteger) supportedInterfaceOrientations{
return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight
}

-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
}

- (BOOL)shouldAutorotate{ 
return YES;
} 
```

纵向模式下的视图控制器：（将方向限制为纵向模式）

```
- (NSUInteger) supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
}

-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation { 
return UIInterfaceOrientationPortrait | UIInterfaceOrientationPortraitUpsideDown;
}

- (BOOL)shouldAutorotate { 
return YES;
} 
```

据我了解，这应该有效，但事实是它比以前更有效。首先，横向模式的视图控制器不会停留在横向模式，它们可以向各个方向自由旋转，这当然不是我想要的。其次，纵向模式下的视图控制器会崩溃

```
Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation', reason: 'preferredInterfaceOrientationForPresentation must return a supported interface orientation!' 
```

经过反复试验，我似乎只能通过 plist 文件/appdelegate 将所有控制器锁定为横向模式，这当然会强制纵向模式控制器也进入横向模式。另一方面，我可以设法让纵向模式控制器处于正确的方向，但这也会将横向模式控制器旋转到纵向模式。我似乎无法让两者都工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T10:50:04.077

好的，我修好了。

我为 UINavigationController 创建了一个类别

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
return [self.topViewController shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
return [self.topViewController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
return [self.topViewController preferredInterfaceOrientationForPresentation];
}

@end 
```

将视图控制器的值转发到导航控制器...

我还必须用 presentViewController 替换 presentModalViewController，因为第一个现在已弃用。

顺便说一句，是的，我的 appdelegate 中有一个错字……这是正确的。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
return UIInterfaceOrientationMaskLandscapeLeft|UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortrait|UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:45:32.533

刚刚观察到，在您的 UIInterfaceOrientationMaskLandscapeLeft 中，在 appdelegate LandscapeRight 中写了两次缺少如果它只是拼写错误并且在更正后仍然面临问题

我发现只有 rootViewControllers - (BOOL)shouldAutorotate; 被叫。这里你的 rootViewController 是 NavigationController。对于推送的 viewController，这不会被调用，所以你只能从 navControllers 方法中决定对推送视图的方向支持。以下为我的 navControllers 推送 viewController
Override UINavigationControllers 方法工作

```
- (BOOL)shouldAutorotate;
- (NSUInteger) supportedInterfaceOrientations; 
```

代码对你来说是这样的

```
@implementaion UINavigationController(Rotation)

- (BOOL)shouldAutorotate
{
return YES;
}

- (NSUInteger) supportedInterfaceOrientations
{
    NSArray *viewsArray = [self viewController]//stack of pushed controller

    NSUInteger orientationToReturn = assignAllMask;

    for(UIViewController *temp in  viewsArray)
    {
        if([temp isKindOfClass:MyOnlyLandscapeViewController] == YES )
        {
            orientationToReturn = assignLandscapeMask;
            break;
        }
        else if([temp isKindOfClass:MyOnlyPortraitViewController] == YES )
        {
            orientationToReturn = assignPortraitMask;
            break;
        }
    }

    return orientationToReturn;
}

@end 
```

# vbscript - 在 Outlook 中创建文件夹：错误 800A0401 - 预期语句结束

> ID：12803768
> 
> 赞同：15
> 
> 时间：2012-10-09T15:48:06.330
> 
> 标签：vbscript, outlook

我创建了一个 .vbs 文件来在 Outlook 中创建一个文件夹。

[我从MSDN](http://msdn.microsoft.com/en-us/library/office/bb220308%28v=office.12%29.aspx)中复制了大部分脚本并得到

> “预期语句结束”错误代码 800A0401

```
Option Explicit
Dim myNameSpace As Outlook.NameSpace
Dim myFolder As Outlook.Folder
Dim myNewFolder As Outlook.Folder

Set myNameSpace = Application.GetNamespace("MAPI")
Set myFolder = myNameSpace.GetDefaultFolder(olFolderInbox)
Set myNewFolder = myFolder.Folders.Add("Postini")

Wscript.Echo "Folder created"
Wscript.Quit 
```

以前从未创建过 .vbs 脚本。

Windows 7 64 位和 Outlook 2010。以本地管理员身份运行。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-09T15:54:56.087

此错误是因为您不能将变量变暗，特别是在 VBS 中。更明确地说，“Dim”语句的使用没有在 VBScript 中定义变量类型，因为 VBScript 中的所有变量都自动属于 Variant 类型。如果您尝试将变量变暗，则会引发错误。

相反，你想要：

```
Dim myNameSpace
Dim myFolder
Dim myNewFolder 
```

此外，您似乎刚刚从 Outlook 复制了一些 VBA 并尝试将其作为 VBS 运行。

VBscript 不知道如何解释`Application.GetNameSpace("MAPI")`。

您还需要创建一个 Outlook 应用程序。

```
dim myOutlook
set myOUtlook = CreateObject("Outlook.Application") 
```

此外，由于您无法在 VBS 中提供引用，因此您必须对任何对象使用后期绑定（这就是我使用 CreateObject 的原因。）因此重新编写的代码如下：

```
Option Explicit
Dim myOutlook
Dim myNameSpace
Dim myFolder
Dim myNewFolder

set myOUtlook = CreateObject("Outlook.Application")
Set myNameSpace = myOutlook.GetNamespace("MAPI")
Set myFolder = myNameSpace.GetDefaultFolder(6) '6 is the value of olFolderInbox
Set myNewFolder = myFolder.Folders.Add("Postini")  
Wscript.Echo "Folder created"
Wscript.Quit 
```

# php - PHP Shell_exec 仅适用于某些命令

> ID：12803771
> 
> 赞同：4
> 
> 时间：2012-10-09T15:48:07.583
> 
> 标签：php, linux, shell-exec

[`shell_exec`](http://php.net/shell_exec)除了某些可以列入白名单的命令外，有没有办法禁用？

我想我可以随时进入并将这些命令放入`mod_sec`我不想运行的主要命令中。但是这样的配置是不够的。我想禁用`shell_exec`但只允许`shell_exec`使用某些命令运行，确切地说是两个。

我正在运行 CentOS、Cpanel 和 PHP 5.2.17。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-11T12:05:26.590

这本身不是禁用/白名单，但如果做得正确，它可以让用户受到监督和严格控制，只能访问您在代码中指定的那些 shell 命令。

```
 $Ops = array(
            'function1'  => function($parameter){ 
                    DO PARAMETER CHECK HERE; 
                    shell_exec("CommandThatIsSafetoPerform" + parameter here);
                },
            'function2'  => function($parameter){ 
                    DO PARAMETER CHECK HERE; 
                    shell_exec("CommandThatIsSafetoPerform" + parameter here);
                },
            'function3'  => function($parameter){ 
                    DO PARAMETER CHECK HERE; 
                    shell_exec("CommandThatIsSafetoPerform" + parameter here);
                },

    ); 
```

然后调用使用这样的东西：

```
call_user_func(Ops["function1"], "your parameter here"); 
```

一些特别说明：让用户访问参数是自找麻烦。您最好对所有内容进行硬编码，而不是让用户能够修改任何参数。

# regex - 如何在 Jmeter 中解析与正则表达式不匹配的值的 JSON？

> ID：12803772
> 
> 赞同：1
> 
> 时间：2012-10-09T15:48:08.183
> 
> 标签：regex, json, jmeter

我在解析 JSON 响应时遇到问题。它基本上返回一个 JSON 对象数组，例如

```
[
  {"id":"123","value":"abc","description":"something"},
  {"id":"456","value":null,"description":"something else"},
  {"id":"789","value":"def","description":"something more"}
] 
```

当我使用以下正则表达式时

```
"id":"(.+?)","value":(?!null),"description":"(.+?)" 
```

在正则表达式提取器中，我得到以下结果：

```
variable[0][1]:123, variable[0][2]:something
variable[1][1]:456, variable[1][2]:something more 
```

这是错误的，因为匹配必须在第二个对象中被破坏并且没有拾取第二个 id 并使用第三个对象的描述。我希望 id 是 789 而不是 456。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:09:39.873

我找到了自己的答案。如果单词之间有一个 } 括号，我需要中断比赛，例如

```
"id":"(.+?)"[^\}]*"value":(?!null)[^\}]*"description":"(.+?)" 
```

容易修复:)

# java - 在 Paintcomponent 中调整大小

> ID：12803774
> 
> 赞同：3
> 
> 时间：2012-10-09T15:48:20.923
> 
> 标签：java, swing, user-interface, graphics

所以我有一个程序，我在一组 JButton 和一个 JTextArea 旁边使用paintComponent（准确地说是弧形和椭圆形）显示图像，并且我希望弧形/椭圆形在/如果用户更改大小时改变大小框架。我已经实现了 getWidth、getHeight 的东西，但我似乎无法让它工作。

这是我的代码。如果我不设置PreferredSize，那么它不起作用；弧形/椭圆形在框架边缘和按钮之间被挤压。如果我尝试使用 getWidth() 和 getHeight() 而不是 200 作为大小，它也不起作用；弧形/椭圆形根本不出现。不知道该怎么办。

此外，任何使我的代码不那么复杂的提示（例如，如果只需要一个类）将不胜感激。

```
public class GUIDesign
{
public static void main(String[] args)
{
    GUIFrame frame = new GUIFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
}
class GUIFrame extends JFrame
{
PaintPanel2 canvas = new PaintPanel2();
public GUIFrame()
{
    ...

    add(mainHolder, BorderLayout.CENTER);   //has the JButtons, JTextArea.
    add(canvas, BorderLayout.WEST);
    this.setTitle("this");
    this.pack();
    this.setLocationRelativeTo(null);
}
}
class PaintPanel2 extends JPanel
{
private static int SIZE = 200;

public PaintPanel2()
{
    setPreferredSize(new Dimension(SIZE, SIZE));
}
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);

    int xCenter = getWidth()/2;
    int yCenter = getHeight()/2;

    int startOvalX = (int) (xCenter/5);
    int startOvalY = (int) (yCenter/5);
    int endOvalX = (int) (xCenter * 1.5);
    int endOvalY = (int) (yCenter * 1.5);
    g.setColor(Color.green);
    g.fillArc(startOvalX, startOvalY, endOvalX, endOvalY, 0, 180);
    g.setColor(Color.black);
    g.drawArc(startOvalX, startOvalY, endOvalX, endOvalY, 0, 180);
    g.setColor(Color.black);
    g.fillOval((int)(startOvalX/1.5) - 1, (int) (startOvalY * 2.5),(int) (endOvalX * 1.1) + 2,(int)(endOvalY/1.5));
    g.setColor(Color.green);
    g.fillOval((int)(startOvalX/1.5), (int) (startOvalY * 2.5) -1,(int) (endOvalX * 1.1),(int)(endOvalY/1.5));
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:54:31.887

当您使用 a`BorderLayout`作为布局管理器时，添加到 中的组件`CENTER`将在主容器调整大小时调整大小。因此，如果您更改代码以使画布居中，您将获得预期的结果：

```
add(mainHolder, BorderLayout.WEST);   //has the JButtons, JTextArea.
add(canvas, BorderLayout.CENTER); 
```

# python - OpenCV traincascade XML文件错误

> ID：12803783
> 
> 赞同：0
> 
> 时间：2012-10-09T15:48:52.700
> 
> 标签：python, xml, opencv

不太确定我哪里出错了 - 我正在尝试使用我自己拍摄的 +/- 图像训练 OpenCV 进行对象检测。所有步骤都正常，但最终我的 Python 脚本不会读取我的 XML 级联文件（但会加载内置的人脸检测文件之一）。

对于它的价值，我在运行 Python 2.7.3 的 Mac Lion 上。

我的过程：

1.  在正图像上创建带有边界框的集合文件
2.  创建负面图像列表
3.  使用`opencv_createsamples`以下命令：`opencv_createsamples -info collection.txt -bg negativeImages.txt -vec positiveVectorFile.vec -num 20 -w 32 -h 24`
4.  检查矢量文件：图像有点挤压但看起来还可以
5.  `traincascade`使用以下命令运行程序：`opencv_traincascade -data directoryToStoreFiles -vec positiveVectorFile.vec -bg negativeImageList.txt -numPos 16 -numNeg 20 -numStages 5 -mem 1000 -maxHitRate 0.95 -w 32 -h 24`

然后我运行以下 Python 脚本（它适用于通常的面部检测 XML）：

```
import cv
img = cv.LoadImage("test.jpg", 0)

# load detection file (various files for different views and uses)
cascade = cv.Load("cascade.xml")        # doesn't work
#cascade = cv.Load("frontalface.xml")   # works

# detect faces, return as list
detected = cv.HaarDetectObjects(img, cascade, cv.CreateMemStorage())

# iterate detected objects, drawing a rectangle around each
for (x,y, w,h), n in detected:
    cv.Rectangle(img, (x,y), (x+w, y+h), 255)

# create a window to display the results
windowTitle = "Test Cascade"
cv.NamedWindow(windowTitle, cv.CV_WINDOW_AUTOSIZE)

# display tested image until the escape key is pressed
while True:
    cv.ShowImage(windowTitle, img)

    # watch for escape key (ASCII 20)
    key = cv.WaitKey(20)
    if key == 27:

        # save the image to file is specified
        if saveIt == True:
            cv.SaveImage("detected.png", img)

        # ... and quit
        exit() 
```

结果是错误： `cv2.error: The node does not represent a user object (unknown type?)`

我在这里上传了级联文件：http: [//pastebin.com/w7uRjyN7](http://pastebin.com/w7uRjyN7)。不确定这是我的级联文件，还是其他问题，还是明显的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:41:16.267

好吧，cyberdecker 的建议似乎是几个问题之一：cv2 对*所有内容*都有完全不同的命令，并且在使用`opencv_traincascade`. 我的代码，现在可以工作了（虽然我的级联还没有）：

```
#import library - MUST use cv2 if using opencv_traincascade
import cv2

# rectangle color and stroke
color = (0,0,255)       # reverse of RGB (B,G,R) - weird
strokeWeight = 1        # thickness of outline

# set window name
windowName = "Object Detection"

# load an image to search for faces
img = cv2.imread("test.jpg")

# load detection file (various files for different views and uses)
cascade = cv2.CascadeClassifier("cascade.xml")

# preprocessing, as suggested by: http://www.bytefish.de/wiki/opencv/object_detection
# img_copy = cv2.resize(img, (img.shape[1]/2, img.shape[0]/2))
# gray = cv2.cvtColor(img_copy, cv2.COLOR_BGR2GRAY)
# gray = cv2.equalizeHist(gray)

# detect objects, return as list
rects = cascade.detectMultiScale(img)

# display until escape key is hit
while True:

    # get a list of rectangles
    for x,y, width,height in rects:
        cv2.rectangle(img, (x,y), (x+width, y+height), color, strokeWeight)

    # display!
    cv2.imshow(windowName, img)

    # escape key (ASCII 27) closes window
    if cv2.waitKey(20) == 27:
        break

# if esc key is hit, quit!
exit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:26:31.673

我不确定，因为我不使用 python-opencv，只使用 C++ 部分。您确定您使用的是正确的检测多尺度包装函数，而不是旧的 C cvHaarDetect？因为您的级联是使用 traincascade 训练的，它生成的级联仅适用于函数 CascadeClassifier::detectMultiScale。它不适用于 cvHaarDetect。

我认为你需要在 python 中使用的功能是`cv2.CascadeClassifier.detectMultiScale`，看看[这里](http://docs.opencv.org/trunk/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)的文档。

# c++ - C++ 关于引用方法

> ID：12803784
> 
> 赞同：0
> 
> 时间：2012-10-09T15:48:54.073
> 
> 标签：c++

我有一个功能

```
File2.cpp which contains the following code below

#include "File2.h"
//some codes in between

static float File2::computeData(string s,int a,int b,float c,float d)
{
float result;
//the compute code
return result;
} 
```

在 File2.h ，我试图在我的课堂上声明它

```
Class File2
{
private:
//some variables
public:
static float computeData(string,int,int,float,float);
}; 
```

我收到一个错误，说不能声明成员函数静态浮点数据::计算数据(std::string,int,int,float,float) 具有静态链接 [-fpermissive]

然后也..在我的

主文件

我试图使用该功能

```
#include "File2.h"

float result;
result = computeData(string s,int a,int b,float c,float d); 
```

它给了我 computeData 没有在这个范围内声明..

**衷心感谢所有帮助！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:53:58.067

这是 的两个意思`static`。**声明静态成员函数仅**在类定义中完成，这意味着该函数`this`在运行时不使用指针（即它是一个常规函数，恰好可以访问类中的私有数据`File2`）。`static`在其定义中声明一个函数是 C 语法 for `static`，并且意味着该函数在其当前文件之外是不可见/不可链接的。在 C++ 中，成员函数不能有静态链接。不要放入`static`静态成员函数的定义中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:51:15.953

您只将`static`成员方法声明为`static`类内部，而不是外部。定义应该是：

```
float File2::computeData(string s,int a,int b,float c,float d)
{
   float result;
   //the compute code
   return result;
} 
```

类外没有`static`关键字。

在类定义之外，`static`提供内部（或静态）链接，静态成员函数不允许这样做：

```
class X
{
    static void foo(); //static class member
};

static void foo();     //static free function w/ internal linkage 
```

# iphone - 如何从 Facebook 获取帖子？

> ID：12803785
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:48:56.307
> 
> 标签：iphone, objective-c, xcode, facebook-graph-api

我已经在 Facebook 中创建了该页面。我希望在该页面中发布所有帖子。还有一件事我只创建了该页面。请帮帮我。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:07:06.713

听起来您需要图形 API。

您想要的网址是[https://graph.facebook.com/YOUR_PAGE_NAME_OR_ID/feed?access_token=YOUR_ACCESS_TOKEN](https://graph.facebook.com/YOUR_PAGE_NAME_OR_ID/feed?access_token=YOUR_ACCESS_TOKEN)

您可以通过[编程](https://developers.facebook.com/docs/authentication/)方式获取访问令牌，也可以从[此处获取访问令牌](https://developers.facebook.com/tools/explorer/)

更多关于 Graph API 的[信息在这里](http://developers.facebook.com/docs/reference/api/page/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:19:22.703

您还可以在此处找到[Facebook](https://developers.facebook.com/docs/reference/api/page/#feed)页面相关的 api...

[在这里](https://developers.facebook.com/tools/explorer?method=GET&path=130540617023687/feed)，您可以在应用程序中实现之前测试所有 api。

# drupal-7 - 使用表单更改添加的 Drupal 按钮导致 common.inc 中的致命错误

> ID：12803787
> 
> 赞同：0
> 
> 时间：2012-10-09T15:49:00.263
> 
> 标签：drupal-7, form-api

我在 Drupal 7 中使用表单更改向节点表单添加另一个按钮：

```
function mymod_form_alter(&$form, &$form_state, $form_id) {
  $form[$key]['button'] = array(
    '#type' => 'submit',
    '#value' => t('Seach),
    '#limit_validation_errors' => array(),
    '#submit' => array('mymod_process'),
  );
 }

...
...

function mymod_process(&$form, &$form_state) {
  $form_state['rebuild'] = TRUE;    
  // Do my processing here...
} 
```

我已添加`$form_state['rebuild'] = TRUE;`以在按下按钮时保留表单值。我第一次按下这个按钮，第二次按下我的自定义按钮，它给了我以下错误：

```
PHP Fatal error:  Cannot create references to/from string offsets nor overloaded objects in /www/includes/common.inc on line 6430 
```

然后当我重新加载页面时， drupal_set_message() 报告以下内容：

```
Notice: Array to string conversion in drupal_attributes() (line 2298 of /www/includes/common.inc). 
```

如果我取出`$form_state['rebuild'] = TRUE;`，错误就会消失。但是随后表单值不会被保留。有什么想法可以在不遇到此错误的情况下保留表单值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:27:57.613

我有一个类似的问题，我放`'#limit_validation_errors' => array(),`的地方和没有保留的表单值。如果你去掉那条线，表单值实际上会得到保留。

见[这里](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#limit_validation_errors)：

> 这通常用于“后退”按钮的多步表单中，例如，其中**'#limit_validation_errors' => array()**意味着不验证任何内容，因为**当前页面上的表单值无论如何都将被丢弃**。

# php - 在CodeIgniter中上传文件时如何设置文件名，但文件扩展名

> ID：12803789
> 
> 赞同：0
> 
> 时间：2012-10-09T15:49:13.053
> 
> 标签：php, codeigniter, file-upload

`$config['file_name']`允许我们设置文件名，同时在 CodeIgniter 中上传文件。在这里，我们需要编写带有文件扩展名的文件名。例如，`filename.pdf`或`filename.zip`。我想设置文件名，但扩展名。因此，如果有人上传 pdf 文件，文件名将是`myfilename.pdf`. 如果有人上传 zip 文件，文件名将是`myfilename.zip`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:57:45.960

像这样在控制器中开始上传内容，您可以随意命名。只需将“new_file_name”替换为您希望调用的任何内容。确保将 do_upload() 函数变量也更改为文件输入的名称。

```
if ($this->upload->do_upload('your_filename')) {
            $img_data=$this->upload->data();
            $new_imgname='new_file_name'.$img_data['file_ext'];
            $new_imgpath=$img_data['file_path'].$new_imgname;
            rename($img_data['full_path'], $new_imgpath); 
```

# drupal - Twitter Bootstrap 的 Drupal 6 菜单输出

> ID：12803790
> 
> 赞同：1
> 
> 时间：2012-10-09T15:49:14.590
> 
> 标签：drupal, drop-down-menu, menu, twitter-bootstrap, drupal-6

我一直在让自己发疯，试图操纵我的主菜单的输出以与 Twitter Bootstrap 的下拉菜单兼容，我想知道是否有人做过类似的事情或有诀窍来帮助我和让我免于为此失去更多的睡眠。就像 Bootstraps 菜单的例子一样，我有一些看起来像这样的东西：

```
<ul class="nav">
    <li class="active"><a href="/">Home</a></li>
    <li class=""><a href="/news">News</a></li>
    <li class=""><a href="/sports">Sports</a></li>
    <li class=""><a href="/opinion">Opinion</a></li>
    <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Special Sections <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/special/welcome">Welcome</a></li>
          <li><a href="/special/orientation">Orientation</a></li>
          <li><a href="/special/housing">Housing</a></li>
        </ul>
    </li>
    <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Media <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/media/video">Video</a></li>
          <li><a href="/media/photo">Photo</a></li>
        </ul>
    </li>
</ul> 
```

我试过使用主题钩子：

```
<?php 
    print theme('links', $primary_links, array('id' => 'nav', 'class' => 'nav links primary-links')); 
?> 
```

与template.php 中的`phptemplate_menu_item`和`phptemplate_menu_item_link`函数一起使用，但到目前为止，我只能成功复制顶层菜单。

作为参考：[Drupal Override Custom Menu Template](https://stackoverflow.com/questions/2317462/drupal-override-custom-menu-template)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:40:40.697

我可以通过调用自定义 menu_tree 函数来做到这一点：

```
print bootstrap_menu_tree('primary-links'); 
```

在我的主题的 template.php 中有这个：

```
function bootstrap_menu_tree($menu_name = 'navigation') {
  static $menu_output = array();

  if (!isset($menu_output[$menu_name])) {
    $tree = menu_tree_page_data($menu_name);
    $menu_output[$menu_name] = bootstrap_menu_tree_output($tree);
  }
  return $menu_output[$menu_name];
}

function bootstrap_menu_tree_output($tree, $dropdown_menu = false) {
  $output = '';
  $items = array();

  // Pull out just the menu items we are going to render so that we
  // get an accurate count for the first/last classes.
  foreach ($tree as $data) {
    if (!$data['link']['hidden']) {
      $items[] = $data;
    }
  }

  $num_items = count($items);
  foreach ($items as $i => $data) {
    $extra_class = array();
    if ($i == 0) {
      $extra_class[] = 'first';
    }
    if ($i == $num_items - 1) {
      $extra_class[] = 'last';
    }
    $extra_class = implode(' ', $extra_class);
    if ($data['below']) {
      $link = theme('menu_item_link', $data['link'], true);
      $output .= theme('menu_item', $link, $data['link']['has_children'], bootstrap_menu_tree_output($data['below'], true), $data['link']['in_active_trail'], $extra_class);
    }
    else {
      $link = theme('menu_item_link', $data['link']);
      $output .= theme('menu_item', $link, $data['link']['has_children'], '', $data['link']['in_active_trail'], $extra_class);
    }
  }
  return $output ? theme('menu_tree', $output, $dropdown_menu) : '';
}

// theme_menu_tree()
function phptemplate_menu_tree($tree, $dropdown_menu = false) {
  $class = 'nav';
  if($dropdown_menu) $class = 'dropdown-menu';
  return '<ul class="'.$class.'">'. $tree .'</ul>';
}

// theme_menu_item()
function phptemplate_menu_item($link, $has_children, $menu = '', $in_active_trail = FALSE, $extra_class = NULL) {
  $class = ($menu ? 'dropdown' : ($has_children ? 'dropdown' : ''));
  if (!empty($extra_class)) {
    $class .= ' '. $extra_class;
  }
  if ($in_active_trail) {
    $class .= ' active-trail';
  }
  return '<li class="'. $class .'">'. $link . $menu ."</li>\n";
}

function phptemplate_menu_item_link($link, $dropdown_toggle = false) {
  if (empty($link['localized_options'])) {
    $link['localized_options'] = array();
  }

  if($dropdown_toggle) {
    // add class
    if (isset($link['localized_options']['attributes']['class'])) {
      $link['localized_options']['attributes']['class'] .= ' dropdown-toggle';
    }
    else {
      $link['localized_options']['attributes']['class'] = 'dropdown-toggle';
    }
    // add toggle
    $link['localized_options']['attributes']['data-toggle'] = 'dropdown';
    // add carat
    $link['title'] .= '<b class="caret"></b>';
    $link['localized_options']['html'] = true;
  }

  return l($link['title'], $link['href'], $link['localized_options']);
} 
```

# javascript - 将 div 定位为始终位于图像的底部

> ID：12803792
> 
> 赞同：1
> 
> 时间：2012-10-09T15:49:15.977
> 
> 标签：javascript, html, dom

我正在制作一个动态图像加载器，它将在每个图像的底部有 3 个热点。这些热点将调用函数。

我现在有两个问题：

1）当页面第一次加载时，我的内容 div 将无法正确调整到图像的大小，直到我遍历整个数组。

2）我需要得到图像底部的热点，并且无论图像大小如何，它都相当一致。我希望我的热点始终位于图像的底部。

CSS 顶部、左侧高度和宽度值现在是硬编码的，这样我就可以有一个起点。我似乎无法让它们在页面加载时动态更改为图像。

```
<!DOCTYPE HTML>
<html>
  <head>
        <style type="text/css">
        #content{
            position: relative; 
            margin: 20px 0 20px 40px; 
            padding: 5px 0; 
            background-repeat: no-repeat; 
            padding: 10px;
            border:1px solid black;
        }
        #hotspot-a{ 
            position: absolute; 
            top: 1040px; 
            left: 0px; 
            width: 272px; 
            height: 83px; 
            background-color: transparent; 
            border: 1px solid red;
        }
        #hotspot-b{ 
            position: absolute; 
            top: 1040px; 
            left: 290px; 
            width: 272px; 
            height: 83px; 
            background-color: transparent; 
            border: 1px solid yellow;
        }
        #hotspot-c{ 
            position: absolute; 
            top: 1040px; 
            left: 580px; 
            width: 272px; 
            height: 83px; 
            background-color: transparent; 
            border: 1px solid green;
        }
    </style>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">     
        $(document).ready(function () {
            $("#image").attr("src", images[0]);
        });     

        var badClicks = 0;
        var skipClicks = 0;
        var goodClicks = 0;

        var iCount = 0;
        var images = [];
        images[0] = "images/document.png";
        images[1] = "images/document2.png";
        images[2] = "images/document3.png";

        function nextImage(){
            iCount++;

            //If there are no more images in the array, go back to the first image
            if (images[iCount]==null) {
                iCount = 0;
            };

            //Change image source to new image
            $("#image").attr("src", images[iCount]);

            //Set content wrapper width & height to current image's
            $("#content").css("width", $("#image").css("width"));
            $("#content").css("height", $("#image").css("height"));

            //Store content wrapper's new width and height into variables
            var h = $("#content").css("height");
            var w = $("#content").css("width");

            //Move hotspots to bottom of new image
            $("#hotspot-a").css("top", h);
            $("#hotspot-b").css("top", h);
            $("#hotspot-c").css("top", h);          

            //Change width of hotspots
        }

        //Do something with data for "bad" hotspot
        function bad(){
            badClicks++;
        }

        //Do something with data for "skip" hotspot
        function skip(){
            skipClicks++;
            nextImage();
        }

        //Do something with data for "good" hotspot
        function good(){
            goodClicks++;
        }

        //Show the collected data
        function displayResults(){
            $("#results").append("<br />Bad: " + badClicks 
            + " Skip: " + skipClicks 
            + " Good: " + goodClicks);
        }
    </script>
  </head>
  <body>
    <div id="content">
        <img id="image" />
        <div id="hotspot-wrapper">
            <div id="hotspot-a" onclick="bad();"></div>
            <div id="hotspot-b" onclick="skip();"></div>
            <div id="hotspot-c" onclick="good();"></div>
        </div>
    </div>
        <br />
        <div id="results">
            <button onclick="displayResults();" style="text-align: center">Show results</button>
        </div>
  </body>
</html> 
```

谢谢！非常感谢任何帮助或建议！

**解决方案！**

```
//Move hotspot-wrapper to the bottom of the new image
            //Height of content wrapper - height of hotspot wrapper = new top
        $("#hotspot-wrapper").css("top", h - parseInt($("#hotspot-wrapper").css("height"))); 
```

# ios - IOS unregisterForRemoteNotifications 在飞行模式下不起作用

> ID：12803793
> 
> 赞同：7
> 
> 时间：2012-10-09T15:49:26.117
> 
> 标签：ios, apple-push-notifications

我的应用程序中的一项功能是在用户从应用程序注销时从远程推送通知中注销用户。当设备处于飞行（离线）模式时用户注销时，有没有办法从推送通知中取消注册应用程序？

我尝试了此代码，但当我重新联机时仍然收到通知，[[UIApplication sharedApplication] unregisterForRemoteNotifications];

当设备处于飞行模式时，有人可以帮助如何从通知中心删除应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:57:41.103

Apple 控制远程推送通知。如果您处于离线状态，您在逻辑上无法禁用它。当 Apple 第一次在网上看到您并且推送未被禁用时，它会向您发送推送。没有办法阻止 iDevice 显示苹果发送给用户的推送，因为它不在应用程序的手中。

所以只有一种可能性：您必须在设备再次上线后立即禁用推送。仍然是一个运气问题，Apple首先获得什么信息，您在线或您禁用推送。还有一个问题，苹果想要在设备离线时发送给设备的通知会发生什么。它会在在线时重新发送它们还是在首先禁用时丢弃它们？我不知道。你需要做研究。

所以你唯一的机会是当用户上网时你的应用程序在后台。为了能够响应系统通知，您需要防止您的应用程序被暂停（[这里是如何实现的）。](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)您需要的通知是在线状态更改的通知，我只知道它存在。[此资源](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)可能会有所帮助。因此，当设备上线时，它会通知您的应用程序在后台等待（未挂起）。然后，您可以通过立即取消注册 frm 远程推送来做出反应。

这是你在这个方向上可能取得的最好成绩。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:59:43.370

当你打电话时，添加一个标志或类似的东西（随便你怎么称呼它，比如*ShouldRecallUnregister*）

`[[UIApplication sharedApplication] unregisterForRemoteNotifications];`

如果没有互联网连接，则设置为“是”，如果取消注册有效，则将其设置为“否”。

将其存储在*UserDefaults* ( `[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"ShouldRecallUnregister"];`) 中，并检查其值，`applicationDidBecomeActive:`例如（或最适合您的应用的任何位置）。

如果是，请`[[UIApplication sharedApplication] unregisterForRemoteNotifications];`再次调用。

# sql - 使用 VBA 运行多个 SQL 查询 (Oracle) - 为什么这么慢？

> ID：12803795
> 
> 赞同：3
> 
> 时间：2012-10-09T15:49:30.127
> 
> 标签：sql, oracle, vba, excel

我编写了一个简单的 VBA 代码来运行多个 SQL 查询。结果应该转到excel表。问题是该过程需要很长时间才能完成！事实上，一个一个地运行这些查询会快得多。谁能告诉我如何让它更快地工作？

这是我的代码：

```
Const strCon As String = "Driver={Microsoft ODBC for Oracle}; " & _
"CONNECTSTRING=(DESCRIPTION=" & _
"(ADDRESS=(PROTOCOL=TCP)" & _
"(HOST=xxxx)(PORT=xxx))" & _
"(CONNECT_DATA=(SID=RTD))); uid=xxxx; pwd=xxxx;"

Sub RunScripts()

Dim r As Integer
Dim con As ADODB.Connection
Dim rs As ADODB.Recordset
Dim q1 As String
Dim q2 As String
Dim q3 As String

Set con = New ADODB.Connection
Set rs = New ADODB.Recordset

q1 = Worksheets("Data").Range("i28").Value
Set rs = con.Execute(q1)
Worksheets("ACCV Query").Range("A2").CopyFromRecordset rs

Set rs = Nothing
r = Worksheets("ACCV Query").Range("A65536").End(xlUp).Row

'Next SQL Query
q2 = Worksheets("Data").Range("j28").Value
Set rs = con.Execute(q2)
Worksheets("ACCV Query").Range("A" & r).CopyFromRecordset rs

Set rs = Nothing
r = Worksheets("ACCV Query").Range("A65536").End(xlUp).Row

'Next SQL Query
q3 = Worksheets("Data").Range("k28").Value
Set rs = con.Execute(q3)
Worksheets("ACCV Query").Range("A" & r).CopyFromRecordset rs

con.Close
Set con = Nothing
Set rs = Nothing

End Sub 
```

SQL 查询存储在单元格中并命名为 q1、q2 等（它们都有效）。

当我运行两个这样的查询时，它运行良好，但是一旦我启动 15... 宏就永远无法完成工作。每个 SQL 脚本都需要几秒钟才能运行，因此它应该可以快速运行。

我怎样才能让它更快地工作？请帮忙！

非常感谢！M。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:05:51.277

通常，使 Excel 变慢的是不断的屏幕更新和重新计算。每当您更改单元格的内容时，它都会重新计算并刷新屏幕。在大插入时，这确实会减慢操作速度。幸运的是，您可以将其关闭。

在函数的顶部，输入：

```
Application.Calculation = xlManual
Application.ScreenUpdating = False 
```

然后在你的函数结束时（以及任何错误处理），输入：

```
Application.Calculation = xlAutomatic
Application.ScreenUpdating = True 
```

# android - 关于布局别名的 Android 文档不正确？

> ID：12803797
> 
> 赞同：9
> 
> 时间：2012-10-09T15:49:46.243
> 
> 标签：android, android-layout

我想弄清楚如何用最少的样板代码重用或“别名”布局。

似乎[有关布局别名的 Android 文档](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)不正确，而且肯定显得不一致。这部分文档显示了以下布局文件作为示例：

```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources> 
```

如果我尝试编译它，我会得到一个`Attribute is missing the Android namespace prefix`错误。即使在将命名空间添加到`resources`元素之后，我也得到了`error: Error: String types not allowed (at 'type' with value 'layout').`

[在 Android 文档的其他地方](http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources)，它们显示了一种不同且看似颠倒且不正确的别名布局方式：

> 要为现有布局创建别名，请使用包含在`<merge>`. 例如：
> 
> ```
> <?xml version="1.0" encoding="utf-8"?>
> <merge>
>     <include layout="@layout/main_ltr"/>
> </merge> 
> ```

运行此程序会导致 LogCat 中出现以下错误`E/AndroidRuntime(1558): android.view.InflateException: <merge /> can be used only with a valid ViewGroup root and attachToRoot=true`。所以这个错误似乎强化了这一`<include>` `<merge>`对一定是错误的事实，因为它需要一个不必要的 parent `View`。

最后是[`<merge>`文档](http://developer.android.com/training/improving-layouts/reusing-layouts.html#Merge)，这似乎与前一个方向相矛盾，没有提到顶级的倒置形式`<merge><include/></merge>`。

> 为了避免包含这样一个冗余的视图组，您可以使用该元素作为可重用布局的根视图。例如：
> 
> ```
> <merge xmlns:android="http://schemas.android.com/apk/res/android">
> 
>     <Button
>         android:layout_width="fill_parent" 
>         android:layout_height="wrap_content"
>         android:text="@string/add"/>
> 
>     <Button
>         android:layout_width="fill_parent" 
>         android:layout_height="wrap_content"
>         android:text="@string/delete"/>
> 
> </merge> 
> ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T16:10:57.550

第一种技术有效，您只需将`<resources>`文件放在正确的文件夹中。它应该在`values`文件夹中，而不是在`layout`通过`<include>`.

例如，假设您有一个名为的布局`editor.xml`，它位于`layout`文件夹中。假设您想在屏幕尺寸`small`上使用专门的布局。`normal`如果您不关心重复自己，您只需将此布局复制并粘贴到`layout-small`and文件夹中，并在每个文件夹中`layout-normal`命名。`editor.xml`因此，您将拥有三个名为`editor.xml`.

如果您不想重复自己，可以将专用布局放在主`layout`文件夹中并命名，例如`compact_editor.xml`. 然后，您将创建一个名为and文件夹`layout.xml`的文件。每个文件将显示：`values-small``values-normal`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="editor" type="layout">@layout/compact_editor</item>
</resources> 
```

我已经提交了关于其他两个问题的[文档问题。](http://code.google.com/p/android/issues/detail?id=38308)

# javascript - 画布动画 - 逐帧

> ID：12803804
> 
> 赞同：0
> 
> 时间：2012-10-09T15:50:14.060
> 
> 标签：javascript, html, canvas

它不工作：

```
var ctx=document.getElementById("mycanvas").getContext('2d');
var image = new Image();
var firtImg=1;
var lastImg=75;

window.requestAnimFrame = (function(callback) 
{
    return window.requestAnimationFrame || 
    window.webkitRequestAnimationFrame || 
    window.mozRequestAnimationFrame || 
    window.oRequestAnimationFrame || 
    window.msRequestAnimationFrame ||
    function(callback) 
    {
      window.setTimeout(callback, 1000 / 60);
    };
}
)();

function draw(){
    //loop here for loading system
    if(firstImg< lastImg){
        image.src = 'iglesiafls'+(firstImg++)+'.png';
        ctx.drawImage(image,0,0,550,800,0,0,550,800);
        requestAnimFrame(draw);
        render();
    }    
} 
```

我正在尝试使用画布实现 75 个图像的逐帧动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:40:35.593

这可能是时间问题 - 具体来说，当您尝试在此处使用图像时，您的图像可能无法加载：

```
if(firstImg< lastImg){
    image.src = 'iglesiafls'+(firstImg++)+'.png';
    ctx.drawImage(image,0,0,550,800,0,0,550,800);
    requestAnimFrame(draw);
    render();
} 
```

如果它们没有加载，对 drawImage 的调用将失败。您是否尝试过将 drawImage 调用替换为以下内容：

```
ctx.arc( 200, 400, firstImg*10, 0, Math.PI * 2, 0 ); 
```

画一个圆圈（或其他什么）并验证您的动画调用是否有效？或者，如果您可以访问 javascript 调试器，设置断点？

这是一个有效的[jsFiddle——](http://jsfiddle.net/eXWrn/4/)你有一个可能没有帮助的错字：firstImg vs firtImg。

# java - 字符串操作 - 删除结束字符

> ID：12803807
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:50:17.880
> 
> 标签：java, string

我有一个如下的传入字符串。

`Sample ("Testing")`

我需要将子字符串替换`("Testing")`为`"Testing"`. 基本上我需要删除左右括号。

请为我提供在 java 中执行相同操作的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:14:24.547

不必要的正则表达式检查方法：

```
String newstring = sample.replaceAll("\\(", "");
newstring = newstring.replaceAll("\\)", "");
System.out.println(newstring); 
```

更好的方法（没有正则表达式检查，直接子字符串检查）：

```
String newstring = sample.replace("(", "");
newstring = newstring.replace(")", "");
System.out.println(newstring); 
```

使用子字符串方法的另一种方法：

```
 String newstring=sample.substring(0,sample.indexOf('('))+sample.substring(sample.indexOf('(')+1,sample.lastIndexOf(')')); 
```

**编辑：** 仅当括号内有“测试”时才删除括号，请遵循以下代码：

```
String newstring = sample.replace("(\"Testing\")","\"Testing\""); 
```

正则表达式检查方式：

```
String newstring=sample.replaceAll("(\\()(?=(\"Testing\"))","");
newstring = newstring.replaceAll("(?<=(\"Testing\"))\\)",""); 
```

但是常识说你应该这样做：

```
if(sample.equals("Sample (\"Testing\")")
sample="Sample \"Testing\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:55:47.397

您可以使用这个简短的教程来告诉您替换功能：

[Java 字符串替换示例教程](http://javarevisited.blogspot.ro/2011/12/java-string-replace-example-tutorial.html)

# c++ - 反转滑块控件顶部 MFC C++

> ID：12803808
> 
> 赞同：4
> 
> 时间：2012-10-09T15:50:20.533
> 
> 标签：c++, mfc, slider

我有一个使用滑块控件的 MFC 项目。当我将此滑块设置为垂直时，上行是最低的，下行是最大的。我怎样才能反转它，使最大值最接近屏幕顶部，而最小值接近屏幕底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-22T16:11:46.963

如果您选择从 0 到 100 设置范围 - 那么您必须将滑块定位在 100 位置，并且每次移动滑块时，您必须将 100 减去滑块位置

# python - 使用Python的文本文件中两个单词的距离

> ID：12803809
> 
> 赞同：0
> 
> 时间：2012-10-09T15:50:34.403
> 
> 标签：python, algorithm, levenshtein-distance

我有一个 30 行的小文本文件，每行有两个相似的单词。我需要计算每行两个单词之间的[levenshtein 距离。](http://en.wikipedia.org/wiki/Levenshtein_distance)在计算距离时，我还需要使用[memoize函数。](http://en.wikipedia.org/wiki/Memoization)一般来说，我对 Python 和算法都很陌生，所以这对我来说非常困难。我打开并读取了文件，但我无法弄清楚如何将这两个单词中的每一个分配给变量“a”和“b”来计算距离。

这是我目前仅打印文档的当前脚本：

```
txt_file = open('wordfile.txt', 'r')

def memoize(f):
    cache = {}
    def wrapper(*args, **kwargs):
        try:
            return cache[args]
        except KeyError:
            result = f(*args, **kwargs)
            cache[args] = result
            return result
    return wrapper

@memoize
def lev(a,b):
    if len(a) > len(b):
        a,b = b,a
        b,a = a,b

current = range(a+1)
for i in range(1,b+1):
    previous, current = current, [i]+[0]*n
    for j in range(1,a+1):
        add, delete = previous[j]+1, current[j-1]+1
        change = previous[j-1]
        if a[j-1] != b[i-1]:
            change = change + 1
        current[j] = min(add, delete, change)

return current[b]

if __name__=="__main__":
    with txt_file as f:
        for line in f:
            print line 
```

以下是文本文件中的几句话，以便大家了解：

原型，原型

专有的，专有的

认出，认出

排除，排除

龙卷风，龙卷风

发生了，发生了

虚空，附近

**这是脚本的更新版本，仍然没有功能但更好**：

```
class memoize:
    def __init__(self, function):
    self.function = function
    self.memoized = {}

def __call__(self, *args):
    try:
      return self.memoized[args]
    except KeyError:
      self.memoized[args] = self.function(*args)
      return self.memoized[args]

@memoize
def lev(a,b):
    n, m = len(a), len(b)
    if n > m:
        a, b = b, a
        n, m = m, n
    current = range(n + 1)
    for i in range(1, m + 1):
        previous, current = current, [i] + [0] * n
        for j in range(1, n + 1):
            add, delete = previous[j] + 1, current[j - 1] + 1
            change = previous[j - 1]
            if a[j - 1] != b[i - 1]:
                change = change + 1
            current[j] = min(add, delete, change)
    return current[n]

if __name__=="__main__":
    for pair in open("wordfile.txt", "r"):
        a,b = pair.split()
        lev(a, b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:11:45.787

假设问题在于将单词传递给`lev`. 并假设您的 wordfile 是这样的 -

```
bat, man
cat, goat
foo, bar 
```

你可以做这样的事情然后 -

```
if __name__ == '__main__':

    for pair in open("wordfile", "r"):

        # first, remove all spaces, then break around the comma
        a,b = pair.replace(' ', '').split(',')

        # pass these words to lev
        lev(a, b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:57:44.350

在 Abhishek 的回答和评论的帮助下，我找到了这个问题的答案。这是最终运行的脚本，以防其他人需要它：

```
def memoize(f):
    cache = {}
    def wrapper(*args, **kwargs):
        try:
            return cache[args]
        except KeyError:
            result = f(*args, **kwargs)
            cache[args] = result
            return result
    return wrapper

@memoize
def lev(a,b):
    n, m = len(a), len(b)
    if n > m:
        a, b = b, a
        n, m = m, n
    current = range(n + 1)
    for i in range(1, m + 1):
        previous, current = current, [i] + [0] * n
        for j in range(1, n + 1):
            add, delete = previous[j] + 1, current[j - 1] + 1
            change = previous[j - 1]
            if a[j - 1] != b[i - 1]:
                change = change + 1
            current[j] = min(add, delete, change)
    return current[n]

if __name__=="__main__":
    lev = Counter(lev)
    word_file = open('wordfile.txt', 'r')
    for line in word_file:
            a,b = line.split()
            print a,b, lev(a, b) 
```

# ipad - 在应用程序屏幕截图中使用 ipad 并发送电子邮件

> ID：12803814
> 
> 赞同：1
> 
> 时间：2012-10-09T15:50:52.437
> 
> 标签：ipad, screenshot

我想在应用内截屏并通过电子邮件发送。我找到了这个[解决方案](https://stackoverflow.com/questions/6450303/in-app-screenshot-and-attach-to-email-without-saving-into-library)，但它不适用于我的应用程序，因为我使用的是故事板。当我按下 UIButton 时没有任何反应。我是否必须为它制作自己的视图控制器并调用它，或者是否有另一种方法来调用邮件视图控制器

编辑：

好的，我通过在测试设备上设置电子邮件帐户来修复它。不知道该设备需要在其上设置电子邮件帐户才能使该方法起作用。我遇到的另一个问题是关闭 mailComposer viewController。当我单击发送或取消时，它不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:59:08.883

即使您使用情节提要，您链接的解决方案也应该可以工作。您是否将按钮正确链接到操作？您是否尝试过添加`NSLog`语句以确保在点击按钮时触发该方法？即使使用故事板，您仍然可以在代码中呈现模态视图。

您的代码确实需要更新以支持视网膜显示...将第一行更改为：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
else
    UIGraphicsBeginImageContext(self.window.bounds.size); 
```

# ios5 - BGRA 被读取为 RGBA

> ID：12803817
> 
> 赞同：0
> 
> 时间：2012-10-09T15:50:56.693
> 
> 标签：ios5, opengl-es, avcapturesession, rgba, core-video

我正在使用 AVCapture 基础通过委托回调检索图像（来自 iphone 4 前置摄像头）。我已将 BGRA 指定为以下格式：

```
self.theOutput.videoSettings = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey]; 
```

其中 self.output 的类型为 AVCaptureVideoDataOutput。

我可以正确预览图像。

1.  我一直在尝试找到一种简单的方法来测试单个像素 RGB 以试图更好地理解，例如在相机上拿着一张蓝卡，但数字只是在 80-110 之间波动，而我预期的 0,0,255 给出了什么？

2.  当我将一张白卡放在相机上时，我预计每个 RGB 为 255，但我已经接近 120。似乎它在白色上将所有数字都打折了 50%。任何原因？但是当我让直射光照射到相机上时，每个 RGB 元素得到 255。

我觉得我在这里缺少一些基本的理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:30:11.390

> 我希望每个 RGB 有 255 个，但我已经接近 120 个。

相机将尝试自动调整其曝光以获得最佳照片。在这种情况下，它可能假设图像的平均亮度应该在 128 左右，并且它会调整以获得该值。相机无法判断您面前的纸张是白色、黑色还是中灰色，因此它假定它必须是中灰色。

# vb.net - vb代码创建excel表，添加 按钮并分配一个宏来发送邮件

> ID：12803819
> 
> 赞同：0
> 
> 时间：2012-10-09T15:50:58.800
> 
> 标签：vb.net, excel, vba

这是我的第一个 vb 代码。除了它的名字，我对 vb 一无所知。甚至不知道dim是用来在vb中声明变量的！！！请帮助我创建批处理..

我需要创建一个批处理过程来创建一个 excel 表，将平面中的值导入到 excel 表中，并作为电子邮件的附件发送。excel 表还应该有一个命令按钮，用于将邮件发送给最终收件人 (xyz@gmail.com)。

必须根据平面文件中的“id”字段将值导入到各个列中。平面文件中具有相同 ID 的所有行都将导入到一张 Excel 表中。此 Excel 表将作为邮件附件发送。邮件收件人必须阅读excel，使用下拉列表输入评论（excel中的一列），保存并单击按钮（Forward To XYZ）将excel表发送给最终收件人（xyz@gmail.com）并保存评论。使用 vb.net 创建 excel 表、按钮和宏以在按钮单击时发送邮件。请指定导入的命名空间（在 VS 2008 中）

将此视为平面文件数据：

```
美国广播公司 cdsmdjn 1 337666746     
def odkiejr 1 234585780   
吉 kdjfjfn 1 287474675   
jkl nfjjwke 2 455767875  
mno jfhfiee 3 039484764
```

必须使用第三列分隔值。因此，前三行出现在一个 Excel 工作簿中，第四行出现在第二个工作簿中，第五行出现在第三本书中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:32:24.693

这是我拥有的一些简单的 VBA 代码，它创建了一个带有分配宏的按钮。此代码很可能很容易修改以在 VB.net 中工作。希望能帮助到你。

```
Sub CreateButton()

    Dim btn As button

    'create the button in the active sheet.
    'The 4 arguments are left, top, width and height --- i chose to base them off of cellular dimensions
    Set btn = ActiveSheet.Buttons.Add( _
        ActiveSheet.Columns(2).Left, _
        ActiveSheet.Rows(2).Top, _
        ActiveSheet.Columns(2).Width * 2, _
        ActiveSheet.Rows(1).Height * 2)

    'this is where you assing a macro to the btn
    btn.OnAction = "ShowMessageBox"

    'add a caption
    btn.Text = "Click Me"

    Set btn = Nothing

End Sub

Sub ShowMessageBox()

    MsgBox "Hello"

End Sub 
```

# java - 将MYSQL数据库中的数据显示到android中的textview中

> ID：12803820
> 
> 赞同：0
> 
> 时间：2012-10-09T15:51:00.587
> 
> 标签：java, android, mysql

我是 android 的新手，我正在开发一个将 mysql 数据库中的数据显示到文本视图中的应用程序。我没有收到任何错误，但来自 db 的数据没有显示在 textview 中……代码是贴在下面...请帮帮我..!!

```
 package com.example.evoting;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class ContestantsInfoActivity extends Activity{
    TextView txtName;
    TextView txtBranch;
    //TextView txtDesc;
    //TextView txtCreatedAt;
  //  Button btnSave;
   // Button btnDelete;

    String rollno;

    // Progress Dialog
    private ProgressDialog pDialog;

    // JSON parser class
    JSONParser jsonParser = new JSONParser();

    // single product url
    private static final String url_contestant_detials = "http://10.0.2.2/evoting/get_contestant_details.php";

    private static final String TAG_SUCCESS = "success";
    private static final String TAG_contestant = "product";
    private static final String TAG_rollno = "rollno";
    private static final String TAG_NAME = "name";
    private static final String TAG_branch = "branch";
   // private static final String TAG_DESCRIPTION = "description";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contestants_info_activity);

     // getting product details from intent
        Intent i = getIntent();
     // getting product id (pid) from intent
        rollno = i.getStringExtra(TAG_rollno);

        // Getting complete product details in background thread
        new GetContestantsDetails().execute();

          }
    /**
     * Background Async Task to Get complete product details
     * */
    class GetContestantsDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ContestantsInfoActivity.this);
            pDialog.setMessage("Loading contestants details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }
        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("rollno", rollno));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_contestant_detials, "GET", params);

                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {

                            //Intent i = new Intent(getApplicationContext(),
                            //        CreateVoterSuccess.class);
                            // successfully received product details
                           JSONArray productObj = json
                                    .getJSONArray(TAG_contestant); // JSON Array

                            // get first product object from JSON Array
                            JSONObject contestant = productObj.getJSONObject(0);

                            // product with this pid found
                            // Edit Text
                            txtName = (TextView) findViewById(R.id.outputName);
                            txtBranch = (TextView) findViewById(R.id.outputBranch);

                            // display product data in EditText

                           txtName.setText(contestant.getString(TAG_NAME));
                           txtBranch.setText(contestant.getString(TAG_branch));

                        }else{
                            Intent i = new Intent(getApplicationContext(),
                                    CreateVoterFail.class);
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }
} 
```

xml文件是.....

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="Contestants Details"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView1"
            android:text="Name:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/outputName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView2"
            android:layout_toLeftOf="@+id/textView1"
            android:editable = "true"/>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/outputName"
            android:layout_marginTop="18dp"
            android:text="Branch:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/outputBranch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView3"
            android:layout_toLeftOf="@+id/textView1"
            android:editable = "true"  />

</RelativeLayout> 
```

这就是屏​​幕的样子

![在此处输入图像描述](../Images/2aa0c28058994d5711ade2cbca09f2a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:03:58.383

我认为您应该在整个通话过程中尝试使用 Log.d(TAG, info)。在某处，您得到空字符串或空字符串，并且由于您正在显示它，因此您的 textview 似乎是错误的。尝试更多日志记录，看看它在哪里中断。我相信你会找到你的答案——如果你不能，用日志更新你的答案，它将帮助其他人找出真正的错误！

# .net - .NET 中的 SQL Server 更新不起作用但返回更新的 1 行

> ID：12803822
> 
> 赞同：0
> 
> 时间：2012-10-09T15:51:06.710
> 
> 标签：.net, sql-server

我有一个使用显式 SQL 更新命令更新 SQL Server 数据库`ExecuteNonQuery()`。但是，如果更新值与之前的更新匹配（例如，我将列从 1 更改为 2，然后再更改为 1，然后再更改为 2，对于同一行），即使`ExecuteNonQuery`返回 1，更新也不会发生。

`ExecuteQuery`当两个连续的选择语句相同时，我注意到了类似的问题；我通过设置一个等于唯一值的变量然后添加来解决这个问题

```
AND the_unique_value = the_unique_value 
```

到选择。但是，将此添加到更新中不起作用。

这是更新的 .NET 代码：

（注意`TheValue`和`TheKey`是字符串）

```
SqlConnection conn = new SqlConnection(SomeConnectionString);
conn.Open();
try
{
    SqlCommand cmd = new SqlCommand
    ("update my_table "
     + "set the_value = '" + TheValue + "' "
     + "where the_key = '" + TheKey + "'"
    , conn);
    ReturnValue = cmd.ExecuteNonQuery();
}
catch (Exception e)
{
    ReturnValue = -2;
}
conn.Close(); 
```

这被称为三遍。每次，`TheKey`都是“1”。

第一次，`TheValue`是“1”；`ReturnValue`设置为1，更新成功。

第二次，`TheValue`是“2”；`ReturnValue`设置为1，更新成功。

第三次，`TheValue`又是“1”；SQL 命令现在与第一次使用的相同。`ReturnValue`设置为 1，但不进行更新。

我可以在表中添加一个列，该列将包含一个虚拟值，仅用于确保每个更新都有不同的 SQL 命令，但我不想用“不必要的”数据修改表。由于缺乏更好的工作，是否有另一种方法可以让更新每次都“提交”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:59:27.507

我会将sql代码更改为...

```
using (SqlConnection  conn = new SqlConnection("My Connection")) //just do a using block here
{
    SqlCommand cmd = new SqlCommand();

    //you should never use string concatination here... ever..
    cmd.CommandText = "update myTable set foo = @foo where bar = @bar";
    cmd.Parameters.Add("@foo", "foo");
    cmd.Parameters.Add("@bar", "bar");

    conn.Open();
    cmd.Connection = conn;
    cmd.ExecuteNonQuery();

} 
```

如果匹配，则返回的数字将为 1。当然，如果命令中的数据相同，则将是相同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:53:23.073

如果您想在事务期间将信息持久化到数据库中，则确实必须使用 commit 命令。如果您不提交，则不会在数据库中更新信息。您不需要额外的一行来提供额外的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:26:40.587

事实证明，SQL Server 与它无关 - 问题是，对进行更新的 .NET 函数的 AJAX 调用从未真正调用过该函数，而是执行了与调用相关的“成功”代码。将具有唯一值的虚拟参数添加到调用修复它。

# sql - 使用SQL计算表中两个日期之间的假期数

> ID：12803823
> 
> 赞同：1
> 
> 时间：2012-10-09T15:51:10.830
> 
> 标签：sql, tsql

我有一个包含两个日期字段的表（下面的示例中的日期 1 和日期 3）。我还有一个假期表，列出了所有的假期。我想在 SQL 查询中找到一种方法来计算两个日期值之间的假期数。有任何想法吗？

**示例表：**

```
日期 1 日期 2
2012 年 5 月 1 日 2012 年 5 月 4 日
2012 年 8 月 31 日 2012 年 9 月 25 日
2011 年 12 月 23 日 2011 年 12 月 27 日
```

**日期维度表示例：**

```
假期日期

2011 年 12 月 25 日
2012 年 1 月 1 日
2012 年 7 月 4 日
2012 年 9 月 3 日
```

**理想输出：**

```
日期 1 日期 2 节假日
2012 年 5 月 1 日 2012 年 5 月 4 日 0
2012 年 8 月 31 日 2012 年 9 月 25 日 1
2011 年 12 月 23 日 2012 年 1 月 10 日 2
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:55:17.510

像这样的东西：

```
SELECT count (holidays.date) AS holiday_count
FROM holidays, table
WHERE holidays.date BETWEEN table.date_1 AND table.date_2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:17:52.730

以下应该做到这一点：

```
select date1, date2, t.total
from datestable, (select count(*) as total 
                  from holidaystable 
                  inner join datestable 
                  on holidaydate between date1 and date2) t; 
```

# django - 错误：（隐藏字段词）选择一个有效选项。该选择不是可用的选择之一。（Django）

> ID：12803824
> 
> 赞同：1
> 
> 时间：2012-10-09T15:51:13.190
> 
> 标签：django, widget

做出选择并点击提交后，我收到此错误。我不确定它是如何解决的。我正在尝试在页面上的表单中使用 HiddenInput 隐藏。除了在 forms.py 上之外，还有其他方法吗？

模型.py

```
from django.db import models from django.utils import timezone
from django import forms
from django.forms import ModelForm
from django.contrib.auth.models import User
from random import randrange

class Type(models.Model):
    type = models.CharField(max_length=50)

    def _unicode__(self):
        return self.type

class WordManager(models.Manager):

    def random(self, type):
       words = Word.objects.filter(type__type=type)

       return words[randrange(len(words))]

class Word(models.Model):
    dict = models.CharField(max_length=200)
    type = models.ForeignKey(Type)

    objects = WordManager()

    def __unicode__(self):
       return u'%s %s' % (self.dict, self.type)

class Question(models.Model):
    question = models.CharField(max_length=200)

    def __unicode__(self):
        return self.question

class Meta(models.Model):
    user = models.CharField(max_length=200)
    time = models.DateTimeField('date published')

class Result(models.Model):
    question = models.ForeignKey(Question)
    word = models.ManyToManyField(Word)
    user = models.ForeignKey(User)
    score = models.IntegerField() 
```

表格.py

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm

from quest.models import Result, Question, Word

class ResultForm(ModelForm):
    CHOICES = (
('1', '1'), ('2','2'), ('3','3'), ('4', '4'), ('5', '5')
)
question = forms.ModelChoiceField(queryset=Question.objects.all(), widget=forms.HiddenInput())
word = forms.ModelChoiceField(queryset=Word.objects.all(), widget=forms.HiddenInput())
user = forms.ModelChoiceField(queryset=User.objects.all(), widget=forms.HiddenInput())
score = forms.ChoiceField(choices=CHOICES, widget=forms.RadioSelect())

class Meta:
    model = Result

class UserForm(ModelForm):
    class Meta:
       model = User
       fields = ('username',) 
```

视图.py

```
from django.contrib.auth import authenticate, login
from django.core.urlresolvers import reverse
from django.shortcuts import render, render_to_response, HttpResponseRedirect
from django.template import RequestContext
from django.utils import timezone

from random import randrange
import re

from quest.models import Word, Type, Question, Meta
from quest.forms import ResultForm, UserForm

def index(request):
    state = "Enter ID and password below"
    username = password = ''
    if request.POST:
        username = request.POST.get('username')
        password = request.POST.get('password')

        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                state = "You're successfully logged in!"
            else:
                state = "Your account is disabled."
        else:
            state = "Your username and password were incorrect."

     return render_to_response('index.html',{'state':state, 'username': username}, context_instance=RequestContext(request))

def question(request):
    # Find all words to be replaced from the question marked by '$'
    question = Question.objects.get(id=1)

    word_types = re.findall(r"\w+[$]", question.question)
    word_types = [find_w.rstrip("$") for find_w in word_types]
    words = [Word.objects.random(type) for type in word_types]

    question_text = question.question.replace("$", "")
    for word in words:
        question_text = question_text.replace(word.type.type, word.dict)
for word in words:
    question_text = question_text.replace(word.type.type, word.dict)

if request.method == 'POST':
    form = ResultForm(request.POST)
    if form.is_valid():
        form.save()
        return HttpResponseRedirect(reverse('question'))
    else:
        for error in form.errors:
            print error
else:
    form = ResultForm(initial={'question': question.id, 'word': [word.id for word in words], 'user': request.user.id})

return render_to_response('quest/question.html', {'final': question_text, 'form': form}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:45:58.893

```
word = forms.ModelChoiceField(queryset=Word.objects.all(), widget=forms.HiddenInput()) 
```

~~如果没有人可以选择，那么选择领域有什么意义？~~ 好的，现在我得到了你想要做的事情。但以下仍然适用。

还有这个：

```
'word': [word.id for word in words] 
```

在您的`initial`表单数据是错误的。ModelChoiceField`presents`有很多选择但只能选择**一个**。所以`'word': someword.id`会是正确的。

作为旁注，也许[这](https://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by)对于如何从模型中选择随机数据很有用。

# java - 如何用下划线替换斜线

> ID：12803828
> 
> 赞同：2
> 
> 时间：2012-10-09T15:51:23.293
> 
> 标签：java

> **可能重复：**
> [java.lang.String.replace 问题的提示？](https://stackoverflow.com/questions/1166905/hints-for-java-lang-string-replace-problem)
> [在 Java 中使用 string.replace()](https://stackoverflow.com/questions/12734721/using-string-replace-in-java)

为什么“/”不被“_”代替？

```
public static void main(String[] args) throws IOException {
    String file = "A/B";
    file.replaceAll("/", "_");
    System.out.println(file);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:52:41.797

因为 的实例`java.lang.String`是*不可变的*^*。 `replaceAll`返回正确的字符串，但您的程序将其丢弃。按如下方式更改您的程序以更正该问题：

```
file = file.replaceAll("/", "_"); 
```

* * *

^*这是“不可更改”的一种说法：一旦`"A/B"`创建了字符串实例，就没有任何方法可以调用它来更改该值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:52:33.127

您需要存储`file.replaceAll()`调用的结果，因为`String`实例是不可变的：

```
file = file.replaceAll("/", "_"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:54:41.250

您必须分配 replaceAll 的结果：

```
public static void main(String[] args) throws IOException {
    String file = "A/B";
    String newFile = file.replaceAll("/", "_");
    System.out.println(newFile);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:54:44.687

```
file.replaceAll("/", "_"); 
```

因为，Java 中的 String 是**不可变**的，所以**String 类的任何方法，**不仅仅是`replaceAll`，都不会修改现有的 String 。而是他们创建一个新的 String 并返回它。所以你应该将返回的字符串重新分配给`file`..

```
file = file.replaceAll("/", "_"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T15:55:25.983

仔细查看[String.replaceAll javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll)：它返回一个字符串。

像这样的方法不会修改它们的参数。所以你需要写：

```
String file = "A/B";
file = file.replaceAll("/", "_"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T16:07:38.513

您应该阅读有关**不可变**属性的信息。

[不可变属性](https://stackoverflow.com/questions/279507/what-is-meant-by-immutable)

[为什么字符串在许多编程语言中是不可变的？](https://stackoverflow.com/questions/9544182/why-are-strings-immutable-in-many-programming-languages)

# c# - 如何在 ObjectScript 中使用标志？

> ID：12803836
> 
> 赞同：1
> 
> 时间：2012-10-09T15:51:54.003
> 
> 标签：c#, intersystems-cache, objectscript

在 C# 中这是允许的：

```
 [Flags]
    private enum PermissionType
    {
        Read = 0x0001,
        Write = 0x0002,
        Execute = 0x0004,
        All = Read | Write | Execute
    } 
```

这允许：

```
private bool TestPerm(PermissionType p)
{
    if( PermissionType.Read & p) return true; // user can read    
    if( PermissionType.Write & p) return true; // user can write
    if( PermissionType.Execute & p) return true; // user can Execute
    //etc
} 
```

可以这样调用：

```
Testperm( PermissionType.Read | PermissionType.Write ); 
```

我知道 ObjectScript 中没有枚举 DataType，但我认为具有此类属性的常规类应该可以工作......

```
Class Sample.AcknowledgeType Extends %RegisteredObject
{
    Property Read As %Integer [ InitialExpression = 1 ];
    Property Write As %Integer [ InitialExpression = 2 ];
    Property Execute As %Integer [ InitialExpression = 4 ];
    Property All As %Integer [ InitialExpression = 7 ];
} 
```

这是我得到的。如何编写 TestPerm 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:38:01.330

它不是那样工作的。

您在对象上定义的每个属性都为每个实例使用内存中的一个字段（如果它是一个持久类，则在磁盘上）。因此，与其使用初始表达式定义属性，您可能会为读取、写入、执行等定义一个类参数。

此外，缓存对象脚本是其超集的 MUMPS 语言不会让您做一些小事情。语言有一个扩展允许这样做 - $BIT 内置函数。这将获取/设置字符串中指定位置的位串的值。

因此，您可以尝试：

```
Parameter READ=1;
Parameter WRITE=2;
Parameter EXECUTE=3;

    Method TestPerm(Permissions as %String) as %Boolean
    {
        If $BIT(Permissions,..#READ) Quit 1
        If $BIT(Permissions,..#WRITE) Quit 1
        If $BIT(Permissions,..#EXECUTE) Quit 1
        Quit 0
    } 
```

如果没有按位布尔运算符，这不是那么方便。它变得更糟。

如果不使用 %Dictionary 包中的反射功能，您实际上无法从类外部访问类参数。这太难也太慢了，所以最好的选择可能是用方法公开枚举值。

```
Method GetReadParameter()
{
    Quit ..#READ
} 
```

所以现在可以写：

```
Set $BIT(Permissions,MyObject.GetReadParameter())
Set $BIT(Permissions,MyObject.GetWriteParameter())
Set HasPermission=MyObject.TestPerm(Permissions) 
```

因此，一旦我们欣赏完这段代码的美感，也许是时候承认如果没有原生的按位布尔运算符，这个 C# 习语就不值得了。相反，只需创建一个具有布尔属性 Read、Write 和 Execute 的 Permissions 类。“All”可以是计算属性。

如果你真的想要，你可以创建一个具有读、写、执行和全部的权限类，每个都是布尔值和计算的。您可以编写访问私有属性的 getter 和 setter 方法，并使用 $BIT 来设置和读取值。但是你的布尔逻辑会发生在返回的值上，所以而不是

```
Testperm( PermissionType.Read | PermissionType.Write ); 
```

你会做的

```
If (myPermissions.Read || myPermissions.Write) 
```

# apache-flex - 如何从 Flex 中的自定义视图访问父容器的数据？

> ID：12803837
> 
> 赞同：2
> 
> 时间：2012-10-09T15:51:54.823
> 
> 标签：apache-flex, components, containers, parent, tabnavigator

我在 Flex 中有一个 TabNavigator 容器，在所有选项卡中我都有相同的视图（一堆按钮和一个网格）。

```
 <mx:TabNavigator id="myTabThing">
            <mx:VBox label="First tab"
                     width="100%"
                     height="100%">
                <view:myView/>
            </mx:VBox>
            <mx:VBox label="Second tab"
                     width="100%"
                     height="100%">
                <view:myView/>
            </mx:VBox>
        </mx:TabNavigator> 
```

如何在 myView.mxml 中掌握选项卡导航器的数据？我非常希望能够做一些事情，例如：

```
 <mx:Text text="{myTabThing.selectedChild}"/> 
```

或者实际上基于所选子级的更复杂的东西（更改 myView 视图中列表的填充）。

Total Flex 新手在这里，如果我的问题很愚蠢，很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:12:44.523

添加“this.parentDocument”会让您知道当前选项卡。在这种情况下，请尝试

```
<mx:Text text="{this.parentDocument.myTabThing.selectedChild}"/> 
```

如果要根据父项更改 MyView 中的列表，请检查“selectedChild”的 id。给 VBoxes 一个 id，然后像这样检查 id

```
<mx:VBox id ="firstTab" label="First tab"
             width="100%"
             height="100%">
        <local:myView/>

if(this.parentDocument.myTabThing.selectedChild.id == "firstTab"){...} 
```

# asp.net-mvc - 视图模型问题

> ID：12803839
> 
> 赞同：0
> 
> 时间：2012-10-09T15:52:06.587
> 
> 标签：asp.net-mvc, ef-code-first

我正在努力让我的 ViewModel 工作以查看详细信息。我让它用于创建新记录，但无法弄清楚如何简单地查看已注册的数据。

我有两个模型

用户（包含用户名、密码、电子邮件等常规内容），然后 -

```
public virtual ICollection<Role> Roles { get; set; }
public virtual UserDetails UserDetails { get; set; } 
```

与 UserDetails 存在 1:1 关系，其中仅包含一些附加项目，如 FirstName、LastName 和

```
 [Required]
    public virtual User User { get; set; } 
```

然后我有一个名为 RegisterViewModel 的 ViewModel，其中包含来自 User 和 UserDetails 的必要注册详细信息。

在我的 AccountController 注册方法中，我有

```
MembershipCreateStatus createStatus = MembershipService.CreateUser(viewModel.UserName, viewModel.Password, viewModel.Email);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    TRSContext context = new TRSContext();
                    //FormsService.SignIn(model.UserName, false /* createPersistentCookie */);

                    User newuser = context.Users
                        .Include(i => i.UserDetails)
                        .Where(i => i.UserName == viewModel.UserName)
                        .Single();
                    newuser.UserDetails = new UserDetails();

                    Role adminRole = context.Roles.Find("User");
                    newuser.Roles = new List<Role>();
                    newuser.Roles.Add(adminRole);

                    newuser.UserDetails.Firstname = viewModel.FirstName;
                    newuser.UserDetails.Lastname = viewModel.LastName;
                    newuser.UserDetails.Address1 = viewModel.Address1;
                    newuser.UserDetails.Address2 = viewModel.Address2;
                    newuser.UserDetails.City = viewModel.City;
                    newuser.UserDetails.Postcode = viewModel.Postcode;
                    newuser.UserDetails.Country = viewModel.Country;

                    context.SaveChanges(); 
```

这一切都很好，我可以注册一个新用户，并将数据存储在 User 和 UserDetails 表中。

我的问题是再次检索数据以显示在用户/索引页面上。这应该显示每个注册用户的用户和用户详细信息的详细信息。我尝试了许多不同的方法来使其正常工作，但不断出现错误。我浏览了 asp.net mvc 站点上的书籍和示例应用程序，但找不到任何具有 1:1 关系的示例。我认为在注册部分工作之后，这将是简单的部分，但我不知道如何做到这一点。

在我的 Index 用户控制器中，我需要传入 viewModel 吗？还是我只是在 Index 方法中设置 viewModel 然后传递给视图？我尝试在此处设置视图模型但没有成功，认为它与帐户控制器中的设置类似，但无论我尝试什么都会出错。

编辑 - 我尝试添加一个名为 UserDetaisData 的新 ViewModel，它只包含 -

```
namespace TRS.ViewModels
{
    public class UserDetailsData
    {
        public IEnumerable<User> User { get; set; }
        public IEnumerable<UserDetails> UserDetails { get; set; }

    }
} 
```

但我不知道这是否是正确的做法。

然后在用户控制器的 Index 方法中，我有 -

```
public ViewResult Index()
        {
            var viewModel = new UserDetailsData(); 
```

因为我认为我需要实例化一个可以发送回视图的新视图模型。

然后我可以选择 viewModel.User = 和 viewModel.UserDetails = 。这是我应该做的吗？我可以从这两个模型中检索数据，然后将所有数据发送回新视图模型中的视图吗？

任何人都可以给我建议或指出一个类似案例的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:57:17.260

您可以创建一个新的视图模型来显示您想要显示的所有数据，然后将其传递给视图（结合来自您的用户和 UserDetails 实体的相关字段）。或者，您可以传递带有用户 ID 参数的 HTML 部分以显示用户详细信息。

# c# - 玻璃未正确渲染

> ID：12803841
> 
> 赞同：9
> 
> 时间：2012-10-09T15:52:29.820
> 
> 标签：c#, winforms, aero, aero-glass

我制作了一个表格，并在其中扩展了玻璃，如下图所示。但是当我移动窗口以使其并非全部在屏幕上可见时，将其移回后玻璃渲染是错误的： ![在此处输入图像描述](../Images/31dd994e9fbafc9497d07ae7795671f9.png)

我该如何处理才能正确呈现窗口？

这是我的代码：

```
[DllImport( "dwmapi.dll" )]
private static extern void DwmExtendFrameIntoClientArea( IntPtr hWnd, ref Margins mg );

[DllImport( "dwmapi.dll" )]
private static extern void DwmIsCompositionEnabled( out bool enabled );

public struct Margins{
    public int Left;
    public int Right;
    public int Top;
    public int Bottom;
}

private void Form1_Shown( object sender, EventArgs e ) {
    this.CreateGraphics().FillRectangle( new SolidBrush( Color.Black ), new Rectangle( 0, this.ClientSize.Height - 32, this.ClientSize.Width, 32 ) );
    bool isGlassEnabled = false;
    Margins margin;
    margin.Top = 0;
    margin.Left = 0;
    margin.Bottom = 32;
    margin.Right = 0;
        DwmIsCompositionEnabled( out isGlassEnabled );

    if (isGlassEnabled) {

            DwmExtendFrameIntoClientArea( this.Handle, ref margin );
        }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T19:01:10.077

我认为 CreateGraphics 在这里给你带来了一些悲伤。

尝试覆盖 OnPaint 方法并改用 PaintEventArgs 中的 Graphic 对象：

```
protected override void OnShown(EventArgs e) {
  base.OnShown(e);

  bool isGlassEnabled = false;
  Margins margin;
  margin.Top = 0;
  margin.Left = 0;
  margin.Bottom = 32;
  margin.Right = 0;
  DwmIsCompositionEnabled(out isGlassEnabled);

  if (isGlassEnabled) {
    DwmExtendFrameIntoClientArea(this.Handle, ref margin);
  }
}

protected override void OnPaint(PaintEventArgs e) {
  base.OnPaint(e);

  e.Graphics.FillRectangle(Pens.Black, 
       new Rectangle(0, this.ClientSize.Height - 32, this.ClientSize.Width, 32));
} 
```

如果调整表单大小，请将其添加到构造函数中：

```
public Form1() {
  InitializeComponent();
  this.ResizeRedraw = true;
} 
```

或覆盖 Resize 事件：

```
protected override void OnResize(EventArgs e) {
  base.OnResize(e);
  this.Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T19:03:22.263

以下调用必须在您的 OnPaint 方法中

```
FillRectangle( new SolidBrush( Color.Black ), new Rectangle( 0, this.ClientSize.Height - 32, this.ClientSize.Width, 32 ) ); 
```

其余的只需完成一次。而不是调用 CreateGraphics() 使用 OnPaint (e.Graphics) 的参数

# javascript - Jquery - 选择器 $( ) 和 $( ） 不同之处

> ID：12803842
> 
> 赞同：5
> 
> 时间：2012-10-09T15:52:31.500
> 
> 标签：javascript, jquery, append

附加到元素与有什么区别

```
$('#my_parent_element').append('<div>');​ 
```

或者

```
$('#my_parent_element').append($('<div>'));​ 
```

和

```
$('#my_parent_element').append('<div/>');​ 
```

或者

```
$('#my_parent_element').append($('<div/>'));​ 
```

这个斜线的目的是什么`/`。

将这个元素转换为 jQuery 元素的目的是什么`$`？

为什么 jQuery 能够以这种方式附加元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:54:09.070

一种是完整的有效代码，保证现在和将来在所有浏览器中都能正常工作，另一种是不完整的，在某些极端情况下可能无法工作。

要清楚，你想要`'<div/>'`

jQuery 只能创建/操作元素，不能打开和关闭标签。一旦处理并在 DOM 中，元素不再由开始和结束标记表示，它们表示为树结构中的节点。

就`.append("<div />")`vs而言`.append( $("<div />") )`，两者之间几乎没有区别。两者都执行相同的操作。

`"<div>"`vs`"<div />"`在 api 中有很好的记录。[http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)

`"<div>"`vs`"<div/>"`是一个非常简单的案例，现在和将来“应该”在所有浏览器中都可以使用，但是如果您变得更复杂，那么您将遇到跨浏览器解析 html 的差异的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T16:18:56.753

一样的：

来自构造函数方法中的[jquery源](https://github.com/jquery/jquery/blob/master/src/core.js)

```
// Match a standalone tag
rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,

jQuery.fn = jQuery.prototype = {
    constructor: jQuery,
    init: function( selector, context, rootjQuery ) {
    //cut
            if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
            // Assume that strings that start and end with <> are HTML and skip the regex check
            match = [ null, selector, null ];

            }
    //cut
            // scripts is true for back-compat
            selector = jQuery.parseHTML( match[1], doc, true );
            if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
                    this.attr.call( selector, context, true );
            }
    // cut
    }
    //CUT
    parseHTML: function( data, context, scripts ) {
        // Single tag
        if ( (parsed = rsingleTag.exec( data )) ) {
            return [ context.createElement( parsed[1] ) ];
        }
    } 
```

如您所见，正则`rsingleTag`表达式同时匹配`<div/>`并且`<div>`第一个控件仅检查字符串长度> = 3的开始字符`<`和结束`>`字符。

parseHTML 方法再次执行正则表达式，因此选择器是标签的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:59:09.930

我认为这四个选项之间没有太大区别。jQuery 在处理发送的参数时非常灵活。

当只有 1 个标签时，它们之间没有区别。

但是，您应该了解以下之间的区别：

```
<div><span class="inner"> and <div/><span class="inner"/> 
```

第一个生成：

```
<div><span class="inner"></span></div> 
```

第二个：

```
<div></div><span class="inner"></span> 
```

# macos - 使用 AppleScript 设置窗口位置

> ID：12803847
> 
> 赞同：13
> 
> 时间：2012-10-09T15:52:48.307
> 
> 标签：macos, cocoa, applescript, finder, appleevents

我正在尝试使用 AppleScript 设置 Messages.app 聊天窗口的位置。

```
tell application "System Events"
    set position of window 1 of application "Messages" to {100, 100}
end tell 
```

使用此代码，我得到一个错误：

```
error "Messages got an error: Can’t set «class posn» of window 1 to {100, 100}." 
number -10006 from «class posn» of window 1 
```

这意味着什么？

如果我用 Finder 尝试相同的代码，它就可以工作。但是大多数其他应用程序都不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T06:48:36.260

```
tell application "System Events"
    set position of first window of application process "Messages" to {100, 100}
end tell 
```

启用`Access for assistive devices`以运行此脚本。

![在此处输入图像描述](../Images/9861d68e40ba35da1c567a89d9b56e02.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-09T16:03:58.603

我找到了解决方案。设置窗口的边界有效。我不知道为什么使用该职位不起作用。

```
tell application "System Events"
    set friendBounds to {4289, 400, 4479, 1600}
    set chatBounds to {3583, 400, 4289, 1599}
    set bounds of window "Buddies" of application "Messages" to friendBounds
    set bounds of window "Messages" of application "Messages" to chatBounds
end tell 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-10T22:37:56.423

在撰写本文时，其他解决方案在 macOS 10.14 Mojave 上对我不起作用。我设法找到了这个解决方案：

```
tell application "System Events" to tell process "Safari"
    set position of window 1 to {0, 50}
    set size of window 1 to {600, 650}
end tell 
```

# php - php.ini 文件未显示更改

> ID：12803855
> 
> 赞同：0
> 
> 时间：2012-10-09T15:53:05.337
> 
> 标签：php, plesk, centos5

背景：默认媒体 Temple (dv) 4、Centos 5.8、Plesk 11、FastCGI

从源安装 APC。

在 httpd 重新启动后，添加`extension = "apc.so"`到`/etc/php.ini`不会在 phpinfo 上显示 APC。

添加`extension = "apc.so"`到`/var/www/vhosts/example.com/etc/php.ini`确实会在重新启动后在 example.com 中的 phpinfo 上显示 APC。

我怎样才能让它工作，`/etc/php.ini`所以我不需要为每个域启用。或者这对 FastCGI 是必需的吗？如果是这样，我如何将其设置为自动添加到新站点。

# ruby - 从 int 生成伪随机数

> ID：12803856
> 
> 赞同：1
> 
> 时间：2012-10-09T15:53:05.607
> 
> 标签：ruby, algorithm, random

我有一个带有这种形式的输入字符串：

```
<single char><int starting at 1, going up> 
```

并希望为每个生产：

```
<the same single char><a unique 8 digit number> 
```

IE：

```
"s1" => "s78138782"
"t1" => "t18743682"
"t2" => "t49274876" 
```

不允许 - 我们已经使用了那个 8 位数字：

```
"t1" => "t78138782" 
```

这不需要是可逆的，即我不需要能够将“ `s78138782`”转换回`s1`算法。我将它们都保存在数据库中，以便查找。我只是希望数字在我逐步通过`t1`、`t2`、`t3`等时看起来是随机的，并且不会重复。

显然，8 个字符的数字将限制我可以拥有的唯一起始字符串的数量：在这个阶段我很好。

谁能给我一个算法？我在 Ruby 中执行此操作，因此 Ruby 将是理想的，并且最好使用标准的 Ruby/Rails gems。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:20:10.763

这个问题的一个常见解决方案是为数据库选择一个随机加密密钥，然后加密每个输入字符串。为了使目标字符串的大小正确，您首先用一些不能作为字符串一部分的字符填充输入字符串，例如空格。

请注意，此过程并不安全，但它是伪随机的（或者至少看起来是随机的）并且它避免了任何冲突的机会。

不幸的是，我对 Ruby 一无所知，但我用 Python 编写了这个示例：

```
import Crypto.Cipher.Blowfish
import re
import struct

parse_id = re.compile("^(\D+)(\d+)$")
cipher = Crypto.Cipher.Blowfish.new("badsecret",
                                     Crypto.Cipher.Blowfish.MODE_ECB)

def randomize(id):
  pfx, integer = parse_id.match(id).groups()
  return "%c%d" % (
    pfx,
    struct.unpack("!Q",
                  cipher.encrypt(pfx
                  + struct.pack("!Q",
                                int(integer))[len(pfx):]))[0]) 
```

然后我测试了它：

```
>>> for i in range(8): print ("t" + str(i), randomize("t" + str(i)))
... 
('t0', 't8812720357104479300')
('t1', 't14570648240240394176')
('t2', 't13775280166960833565')
('t3', 't6391672674195357485')
('t4', 't3595757360042384213')
('t5', 't10728238663553328366')
('t6', 't888684936954575988')
('t7', 't9447169127882289438')
>>> for i in range(8): print ("s" + str(i), randomize("s" + str(i)))
... 
('s0', 's9209414168426526439')
('s1', 's5452467189798635654')
('s2', 's10995755223696930463')
('s3', 's1237785964853872245')
('s4', 's4976813073866522017')
('s5', 's17045636624557288261')
('s6', 's14217087933089289315')
('s7', 's3504968071130220057') 
```

使数字更短需要找到具有较小块的块密码或使用流密码。我不知道 Ruby 在加密库方面必须提供什么。（事实上​​，在我编辑这个答案之前，我对 Python 的加密支持几乎一无所知。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:00:51.557

如果您只是在寻找一个伪随机数，我只需使用 rand() 函数生成一个随机数并将索引添加到随机数，这样您就不必担心冲突。

# java - 退出位于 JavaFX 线程外的 JFrame 内的 WebView

> ID：12803858
> 
> 赞同：1
> 
> 时间：2012-10-09T15:53:25.663
> 
> 标签：java, oop, webview, jframe, javafx-2

我有一些将 a 添加`Java FX WebView`到 JFrame 的代码。这很好用。一旦用户访问了一个特定的网站，我就会尝试以编程方式关闭这个 JFrame，首先是调用`Platform.exit()`，然后是`frame.dispose()`. 只要我从`WebView`启动的同一个线程调用此方法，它就可以正常工作。

但是，这是我试图避免的。[**考虑以下代码 (http://pastebin.com/kAjweLi5)**](http://pastebin.com/kAjweLi5)。此代码尝试在 URL 更改时关闭程序。但是，这会导致：

> IllegalStateException：在工具包未运行时尝试调用 defer ( **[stacktrace](http://pastebin.com/mJqvYAGn)** )

更新：使用我（非常有限的）调试知识，我意识到该`exit()`方法似乎成功运行。堆栈的图像：

![在此处输入图像描述](../Images/7b3a791b08f0d35e5d8c1a330facb858.png)

*（黄线执行时出现错误）*

**如何在不出现上述异常的情况下从另一个线程/类关闭 JFrame？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:12:15.153

从以前（修改）的帖子：

```
public void exit()
{
   Platform.runLater( new Runnable(){@Override public void run(){
      System.err.println( "exit/runLater/run" );
      webEngine.getLoadWorker().cancel();
      Platform.exit();
      SwingUtilities.invokeLater( new Runnable(){ @Override public void run() {
         System.err.println( "exit/invokeLater/run" );
         frame.dispose(); }});
      }});
} 
```

需要关闭后台线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T10:42:30.280

已经很晚了，但这可能对某人有帮助。

```
 Platform.runLater(new Runnable() {

        @Override
        public void run() {
            engine.getLoadWorker().cancel();    
            Platform.setImplicitExit(false);
        }
    }); 
```

我遇到了几个问题，但最后这对我有用，没有任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:01:14.427

我对JavaFX不太了解，但我猜监听器会在JavaFX线程上执行，这对Swing命令有好处`Platform.exit()`，但对Swing命令没有那么多`frame.dispose()`。您可以尝试将最后一个命令发送到`SwingUtilities.invokeLater(...)`.

如果这不起作用，您是否可以尝试从调试器获取有关错误的更多信息，因为堆栈跟踪未链接到代码中的任何行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:02:46.940

目前我没有安装 JavaFX，但据我记得你应该使用 javafx.application.Platform.runLater(Runnable runable) 在 GUI 上执行任何操作。JavaFX 和 Swing 不是线程安全的。所以应该是：

```
...
public void exit() {
  final Test self = this;
  Platform.runLater(new Runnable() {
    self.frame.dispose();
  });
  Platform.exit();
}
... 
```

在配置框架之前关闭平台。首先处理框架。在 Platform.exit 之后，您的应用程序可能会处于奇怪的状态，一些资源已关闭，一些无法访问，......

# javascript - 正则表达式和字符串组合使 Chrome 崩溃

> ID：12803859
> 
> 赞同：6
> 
> 时间：2012-10-09T15:53:32.193
> 
> 标签：javascript, regex, google-chrome

我有以下正则表达式来验证电子邮件地址：

```
^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$ 
```

在基本电子邮件上运行它可以很好地工作：

```
/^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$/.test('dave@the-taylors.org'); 
```

但是在长字符串上运行它会使 Chrome 崩溃：

```
/^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$/.test('dddddddddddddddddddddddddddddddddddddddd'); 
```

我注意到它大约有 40 个字符

这么密集的正则表达式是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T22:00:27.650

好的，让我们看看这里发生了什么。幸运的是，您已经将问题简化为应用正则表达式时发生的情况

```
(d+)*@ 
```

到字符串

```
ddddd 
```

这显然无法匹配，因为`@`缺少 。但是是什么让正则表达式引擎无法快速解决这个问题？

Well, `(d+)*` in essence can be fulfilled by the following matches (each group separated by spaces):

```
ddddd
dddd d
ddd dd
dd ddd
d dddd
ddd d d
dd d dd
d d ddd
dd dd d
d dd dd
d ddd d
d d d dd
d d dd d
d dd d d
dd d d d
d d d d d 
```

So you have one way of matching the string without breaking up the string, four ways to break it up into two strings, six ways to break it up into three, four to break it into four, and one to break it up into five strings. All these combinations have to be checked by the regex engine before it can declare failure to match when it finally has to face the following `@`.

Why doesn't it figure that out sooner? Well, some regex engines can probably do it with such a simplified example. I bet Larry Wall has that covered. But your actual regex is a bit more complex, so I guess that would be much harder to figure out beforehand. Plus, there is a simple way to ensure all this combination-trying doesn't happen. But I'll come back to that later.

I had been wondering how many such combinations there would be for a longer string than those puny five `d`s:

Let's take a string of length `m` (which can be cut apart in `m-1` different positions). Let's say `n = m-1`. Then you can calculate the number of combinations as follows:

```
1 + (n!/(1! * (n-1)!)) + (n!/(2! * (n-2)!)) + ... + (n!/(n! * (n-n)!)) 
```

The first and last items are always 1, but the items in-between can get quite large. Let's write a small Python program:

```
>>> from math import factorial as f
>>> def comb(n,x):
...    return f(n) // (f(x) * f(n-x))
...
>>> def ways_to_split(len):
...    return 1 + sum(comb(len-1,x) for x in range(1,len))
...
>>> ways_to_split(5)
16 
```

OK, seems to work. Let's try something bigger:

```
>>> ways_to_split(10)
512
>>> ways_to_split(40)
549755813888
>>> ways_to_split(100)
633825300114114700748351602688 
```

Hey, there's a pattern here: `ways_to_split(n)` is equal to `2**(n-1)`. See [Mathematics SE](https://math.stackexchange.com/q/98196/22262) for a proof. Anyway. Your regex has `O(2^n)` complexity. Well, now you see why that might take a while...

Thankfully, many regex engines provide protection against this: possessive quantifiers or atomic capturing groups.

```
(d++)* 
```

or

```
(?>d+)* 
```

both ensure that whatever `d+` has matched will not be relinquished again for trying other combinations. Good news, right?

Well, not if you use JavaScript. It doesn't support either of those features.

Therefore, you either need to rewrite your regex not to be susceptible to backtracking like this:

Instead of

```
(([_\.\-]?[a-zA-Z0-9]+)*) 
```

use

```
[a-zA-Z0-9]+([_.-][a-zA-Z0-9]+)* 
```

Or stop trying to use a regex to validate an e-mail address which doesn't work reliably, ever, anyway.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:05:06.247

我认为这与您的正则表达式有关，而不是与字符串的长度有关。我使用以下正则表达式进行电子邮件验证，它没有在 Chrome 上崩溃..

```
/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test('dddddddddddddddddddddddddddddddddddddddd'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T17:59:08.210

不要使用正则表达式验证电子邮件。我认为这是大约二十年来的常识。它太复杂了。大部分完整验证的示例在这里[http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html](http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html)甚至没有完全实现标准。编写一个功能相同的函数要简单得多。当您可以单独验证电子邮件的某些部分时，它变得微不足道。此外，就像您的情况一样，该功能会更快地执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T04:18:03.560

The root of the problem is here:

```
[_.-]? 
```

If the first `[A-Za-z0-9]+` (you left out the `+`, by the way) runs out of alphanumeric characters to consume, and the next character is not one of the separator characters ( `[_.-]` ), the match attempt should fail immediately.

What happens with your regex is that the first `[A-Za-z0-9]+` starts backing off, giving up the characters it just matched one by one, and letting the second `[A-Za-z0-9]+` (inside the `*` loop) try matching them instead. That's a lot of combinations it has to try (as Tim's ~~thesis~~ answer explains ☺), and it's all perfectly pointless.

Now have a look at this:

```
^[A-Za-z0-9]+([_.-][a-zA-Z0-9]+)*@[A-Za-z0-9]+([.-][a-zA-Z0-9]+)*\.[A-Za-z]{2,}$ 
```

This regex doesn't enter the `*` loop unless it actually sees one of the separator characters. The subexpression inside the `*` may be optional, but whatever it *does* match *must* start with `_`, `.`, or `-`. Similarly, if the regex succeeds in matching the local part and the next character is not `@`, it bails out immediately, where yours goes into another paroxysm of backtracking.

According to RegexBuddy, your regex takes 57 steps to match `dave@the-taylors.org`, where mine does it in 17 steps. And where yours locks up on the other string, mine reports a failed match in 5 steps.

The moral is: never use a `?` or `*` quantifier on something that isn't really optional.

* * *

**Disclaimer:** I'm not endorsing the use of this or any other regex to match email addresses. I'm just explaining what's wrong with the regex in the question.

# python - 检查清单以做出决定

> ID：12803861
> 
> 赞同：0
> 
> 时间：2012-10-09T15:53:38.283
> 
> 标签：python, python-2.7

全部。

我正在尝试编写一个脚本来检查文件夹中某些文件的年龄，并在创建新文件时删除旧文件。如果没有创建新文件，那么它不会删除旧文件，它会向我发送一封电子邮件，告诉我没有创建新文件。

我使用操作系统模块 ctime 来检查文件的年龄，并且我使用外部脚本“sendmail”来处理电子邮件。

由于它现在工作，它正确地确定新旧文件，然后删除旧文件，但它没有正确决定是否调用 sendmail。让我演示给你看：

```
for fn in os.listdir(path, f)
 fn = os.path.jion(path, f)
 ctime = os.stat(fn).st_ctime
 if ctime > now - 1 * 86400: #this is a new file
  new_files.append(fn)
  countit = new_files.count(fn) #counting the occurence of appended files
 if new_Files.count(fn) > countit: #checks the list
  import sendmail
   sendmail
 elif ctime < now - 10 * 86400: #checking for old file
  old_files.append(fn)
if new_files:
 for fn in old_files:
  os.remove(fn) 
```

那么，我能得到一些帮助吗？我真的被困住了。我是否应该使用`elif`语句来检查我的列表，如下所示：

```
if ctime > now - 1 * 86400:
 new_files.append(fn)
elif:
 import sendmail
  sendmail 
```

这是写那个的正确方法吗？有没有正确的方法来写这个决定？我的整个脚本错了吗？

编辑 - 抱歉，如果我发牢骚，我已经为此工作了一段时间，这非常令人沮丧。我很感激你能给的任何帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:28:01.607

看起来你可能想做这样的事情：

```
for fn in os.listdir(path, f):
    fn = os.path.join(path, f)
    ctime = os.stat(fn).st_ctime
    if ctime > now - 1 * 86400: #this is a new file
        new_files.append(fn)
        countit = new_files.count(fn) #counting the occurrence of appended files
    elif ctime < now - 10 * 86400: #checking for old file
        old_files.append(fn)
if new_files:
    for fn in old_files:
        os.remove(fn)
else:
    import sendmail
        sendmail.sendmail() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:18:24.297

我无法确定 sendmail 到底在做什么/它应该做什么。您也可以发布该模块吗？

另外，我建议将 import 语句放在文件的顶部，这样您就不必多次导入文件。这应该会显着提高性能。

此外，我无法理解“os.listdir(path, f)”这一行在做什么。每当我尝试使用超过 1 个参数的方法 os.listdir 时，都会出现错误。这是一个错字吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:20:43.213

> 我使用操作系统模块 ctime 来检查文件的年龄......

哎呀！ctime 不是在所有操作系统上创建文件的时间；*除非您确定您使用的是哪个操作系统，否则不要*依赖它。mtime 是最后修改时间，但在所有操作系统上都受支持。

# regex - 正则表达式：减少重复

> ID：12803867
> 
> 赞同：3
> 
> 时间：2012-10-09T15:54:09.100
> 
> 标签：regex

有没有办法简化这样的表达式

```
([0-9]||[A-Z])([0-9]||[A-Z])([0-9]||[A-Z])([0-9]||[A-Z])([0-9]||[A-Z])([0-9]||[A-Z]) 
```

类似于`{([0-9]||[A-Z]) = B } BBBBBB`Where B 表示子表达式的重复。

我正在使用 LabVIEW 进行编码，但我对独立于语言的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:56:11.047

当然，您可以：

```
([0-9]||[A-Z]){6} 
```

6 是指您将接受的项目数量。你也可以：

```
([0-9]||[A-Z]){3,6} 
```

这意味着接受其中的 3 到 6 个...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:56:04.667

试试这个： `([0-9]||[A-Z]){6}`

您可以使用`{x}`来指定您希望它显示的次数。 `{6}`表示模式 6 次。您可以使用`{1,6}`表示 1、2、3、4、5、6 次。

如果我使用正则表达式，我喜欢在办公桌旁边打印的一件事是：

[正则表达式备忘单](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/)

它在语法等方面为我节省了很多次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T16:11:01.803

您可以使用`.`、`*`、`+`或量词指定特定正则表达式模式重复的次数`?``{}`

```
.->match only 1 time
*->0 to many times
+->1 to many times
?->0 or 1 time
{}->Exact matches..For example:{1}->1 times {1,8}->1 to 8 times 
```

在你的情况下，它应该是

```
([0-9]||[A-Z]){6} 
```

**注意**（如果您想要**完全**重复）

如果您想捕获相同的模式..那么您将不得不使用对先前捕获的组的引用

所以，

使用下面的正则表达式

```
(hello) \1 
```

你可以匹配`hello hello`

因此，在您的情况下，如果您希望确切的副本重复 6 次，您可以这样做

```
([0-9]||[A-Z])\1{5} 
```

# php - 选择语句不显示任何内容

> ID：12803869
> 
> 赞同：0
> 
> 时间：2012-10-09T15:54:15.343
> 
> 标签：php, select

我的代码中有以下语句

```
$query3="select * from students where student_name = '$referredby'";
$result3=mysql_query($query3);
$num_rows = mysql_num_rows($result3);
if($num_rows==0){
    echo "Nobody Found";
    die();
}else{
    echo "Number Of Rows ".$num_rows;
    die();
} 
```

如果我`$referredby`在运行查询之前对变量的值进行回显，它会向我显示变量的正确值`$referredby`，并且当我查看表时，会有一个与该值匹配的学生姓名。

但是，当我运行程序时，它会被 if 语句直接触发，我在其中测试返回的行数。

我错过了一些东西，但似乎无法找到它，感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:10:19.880

尝试替换这个：

```
$result3=mysql_query($query3); 
```

有了这个

```
$result3 = mysql_query($query3) or die(mysql_error()); 
```

并查看是否有任何 MySQL 错误输出到您的屏幕。如果您不这样做，那么查询显然有效，并且 SQL 中的所有内容都是正确的。出于好奇，您将存储名称的列的字段类型设置为什么？文本？瓦查尔？斑点？没关系，但您可以提供给我们的信息越多越好。

# r - R中每个日期具有多个观察值的移动加权平均值

> ID：12803871
> 
> 赞同：2
> 
> 时间：2012-10-09T15:54:24.087
> 
> 标签：r

我对 R 很陌生，所以如果这是一个微不足道的问题，我提前道歉。我有一大组数据，包括抵押贷款信息，包括起始日期。我需要计算 3 个月窗口内 FICO 分数的移动加权（按贷款金额）平均值。我遇到的问题是，我不知道如何解释同一月/年有多笔贷款的事实，而且我知道平均 3 个月的平均值是不准确的。

那么，如果我有以下字段，我该怎么做：

```
funded$loan_amount
funded$fico_score
funded$date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:43:30.317

要进行移动平均，最好使用包 TTR。

```
library(SMA)
data<-ts(data=cbind(rnorm(10),rexp(10,2)),names=c("value","weight"))
result<-WMA(data[,"value"],wts=data[,"weight"],n=3) 
```

如果您以前从未在 R 安装中使用过库“SMA”，则可能需要先安装它。

考虑指数平滑，而不是移动平均线。它具有已知的随机属性，可以计算置信区间。见包装`forecast`。

# java - Java 堆栈排序

> ID：12803874
> 
> 赞同：0
> 
> 时间：2012-10-09T15:54:39.273
> 
> 标签：java, sorting, stack

在这个程序中，我必须打开一个文件并将其打印到 textArea，然后确保所有括号、括号等都匹配。然后如果括号匹配，我会在另一个 textArea 中打印出来。我的问题如下：我是从文件中读取还是从第一个 textArea 读取？我是在 Actionlistener 还是在构造函数中创建堆栈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:08:30.423

> 我是从文件中读取还是从第一个 textArea 读取？

我从第一个 TextArea 中读取。在处理文件 I/O 时，最好从文件中读取并尽快关闭它。如果您已经将文件的内容读入内存，则不妨使用已有的副本。这将比再次读取文件更快。

> 我是在 Actionlistener 还是在构造函数中创建堆栈？

如果没有更多关于代码结构的信息，这很难回答。一般来说，我会在所需的最窄范围内创建一个数据结构。如果您只需要一个操作的堆栈，只需在需要的方法中创建它。（这听起来像您正在做的事情。我认为您只需要堆栈来检查括号是否匹配，因此您可能希望在 ActionListner 的狭窄范围内创建它。）

# python - Matplotlib：在 PolarAxes 上绘制一系列径向线

> ID：12803883
> 
> 赞同：4
> 
> 时间：2012-10-09T15:55:04.000
> 
> 标签：python, matplotlib

我正在尝试使用 matplotlib 复制某个情节：它应该看起来像这样。

![最终情节](../Images/e64b8cb57accf95148f401f8a1c0ce91.png)

我已经看到可以使用 PolarAxes 绘制径向点：例如，我使用以下代码段制作了一个非常简单的极坐标图：

```
import matplotlib.pyplot as plt
fig = plt.figure()
# Set the axes as polar
ax = fig.add_subplot(111, polar=True)
# Draw some points
ax.plot([0],[1], 'o')
ax.plot([3],[1], 'o')
ax.plot([6],[1], 'o')

# Go clockwise
ax.set_theta_direction(-1)
# Start from the top
ax.set_theta_offset(1.570796327)

plt.savefig('test.png') 
```

我得到这样的东西：

![第一个例子](../Images/ebcea2db4e1dda382c08f2a15d860c21.png)

所以我的问题是：有没有办法像第一个图那样画线，并调整宽度以适应整个圆周？还有一些关于如何处理颜色的提示将不胜感激。

**更新：**必须绘制的数据非常简单：每个轨道都是一个浮点数组，其范围在 0 到 9 之间（颜色来自颜色图 RdYlGn）。数组长度是 96 的倍数。

**更新2：**那是我用过的剪辑

```
# mydata is a simple list of floats
a = np.array([[x for i in range(10)] for x in mydata])

# construct the grid
radius = np.linspace(0.2,0.4,10)
theta = np.linspace(0,2*np.pi,len(a))
R,T  = np.meshgrid(radius,theta)

fig = plt.figure()
ax = fig.add_subplot(111, polar = True)

# plot the values using the appropriate colormap
ax.pcolor(T,R,a,cmap=cm.RdYlGn) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T19:21:50.367

如果没有有关如何组织数据的更多信息，很难说重新创建此图的最佳方法是什么。在极坐标图上绘制不同宽度和颜色的线条很容易。尽管如果您需要与示例中的一样多，事情可能会变慢。我还提供了一个极地伪彩色图的示例。

```
import numpy as np
import matplotlib.pyplot as plt

#Create radius and theta arrays, and a 2d radius/theta array
radius = np.linspace(0.2,0.4,51)
theta = np.linspace(0,2*np.pi,51)
R,T  = np.meshgrid(radius,theta)

#Calculate some values to plot
Zfun = lambda R,T: R**2*np.cos(T)
Z = Zfun(R,T)

#Create figure and polar axis
fig = plt.figure()
ax = fig.add_subplot(111, polar = True)

ax.pcolor(T,R,Z)    #Plot calculated values

#Plot thick red section and label it
theta = np.linspace(0,np.pi/4,21)
ax.plot(theta,[1.23 for t in theta],color='#AA5555',linewidth=10)   #Colors are set by hex codes
ax.text(np.pi/8,1.25,"Text")

ax.set_rmax(1.25)   #Set maximum radius

#Turn off polar labels
ax.axes.get_xaxis().set_visible(False)
ax.axes.get_yaxis().set_visible(False) 
```

![阴谋](../Images/a90fd25406e66b23f6c51a37f99e08ee.png)

# jquery - 是否可以使用“和”或“或”来连接多个选择器？(jQuery)

> ID：12803888
> 
> 赞同：2
> 
> 时间：2012-10-09T15:55:23.577
> 
> 标签：jquery, if-statement, jquery-selectors, find, conditional-statements

我有一个这样的 jQuery 语句：

```
$("form[name='formname']").find("input[name*='pwd']"); 
```

但我想选择名称包含“pwd”或名称包含“用户”的所有输入。如何用 jQuery 做到这一点？是否可以使用 && 或 || 之类的运算符 组合选择器？

我想做这样的事情：

```
$("form[name='formname']").find("input[name*='pwd'] || input[name=+='user']"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:56:54.587

在 JQuery 中它实际上非常简单......

```
jQuery('selector1, selector2, selectorN') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:58:11.250

做一个“或”使用：

```
$("form[name='formname']").find("input[name*='pwd'],input[name=+='user']"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:13:59.297

只需用逗号分隔您的或选择器

```
$("form[name='formname']").find("input[name*='pwd'] , input[name=+='user']"); 
```

# c++ - C++ 字符串字符数组

> ID：12803889
> 
> 赞同：1
> 
> 时间：2012-10-09T15:55:25.320
> 
> 标签：c++, string, char

我是 C++ 初学者。我有一个代码如下

```
#include <iostream>
#include <string>
#include <iomanip>

using namespace std;
int main()
{
   char sym[] = "Audi.Despo";
   //string sym ("Audi.Despo");
    string rs(sym);
    //cout << rs << endl;
    rs = string(sym,4);

 cout << rs;

    return 0;
} 
```

如果变量 sym 是一个 char 数组，则字符串变量的最终输出是 Audi

但如果相同的变量 sym 是字符串，则最终输出为 .Despo （打印后缀）

什么解释。

看起来像线

```
rs = string(sym,4); 
```

如果其输入是 char [] 或字符串，则更改其行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:57:22.590

这只是两个构造函数重载的不同实现：

```
string ( const string& str, size_t pos, size_t n = npos ); 
```

> 内容被初始化为 str 的子字符串的副本。**子字符串是 str 的一部分，从字符位置 pos 开始，最多占用 n 个字符**（如果之前到达 str 的结尾，则它占用少于 n 个字符）。

```
string ( const char * s, size_t n ); 
```

> **内容被初始化为由 s 指向的字符数组中的前 n 个字符**形成的字符串的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:59:25.430

```
string ( const string& str, size_t pos, size_t n = npos ); 
```

std::string 构造函数中的第二个参数是用于初始化内容的子字符串的起始位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:05:50.567

当你说：

`rs=string(sym, 4);`

你正在做的是说，“为我构建一个`std::string`对象，我（程序员）将通过给你这个字符数组和一个数字来帮助你（程序）做到这一点。” 类背后的代码`std::string`知道，在那个实例中，给它一个字符数组和一个整数，它应该从字符数组中获取字符数并`std::string`使用该内容构造一个。

当你说：

`string rs2=string(rs, 4);`

你现在所做的就是说，“给我一个`std::string`对象，我会通过给你这个*已经存在的* `std::string`对象和一个数字来帮助你做到这一点。” 在这种情况下，`std::string`班级做了一些完全不同的事情。当它接收到这两个参数时，它会使用数字作为从提供的*开始*读取的位置`std::string`。

这两种不同的情况是类的两种不同的**构造函数**——它们提供了两种不同的方法来根据您可用的信息`std::string`构建对象。`std:string`您可以通过将第二个示例更改为以下形式轻松地使第二个示例像第一个示例一样工作：

`string rs2=string(rs, 0, 4);`

现在您要告诉它“通过从另一个 中获取字符来初始化这个新的`std::string`（称为） 。我希望您从索引 0 处的字符（所以，第一个）开始，然后再获取 4 个字符——如果它们存在的话。”`rs2``std::string` `rs`

在构造类的对象之前，了解构造函数的行为方式很重要。`std::string`您可以通过一些搜索在许多地方在线找到有关所有构造函数的文档。

**作者注：** 注意到这个例子中发生了许多其他事情（例如，赋值运算符）并且许多问题都被掩盖了，但考虑到这个问题的自我陈述的初学者性质，我觉得最好保持高等级。

# sql - SQL：计算两个子选择列时出错

> ID：12803894
> 
> 赞同：0
> 
> 时间：2012-10-09T15:55:44.730
> 
> 标签：sql, sql-server, tsql, sql-server-2000

我知道这对于 SQL 专家来说将是另一个简单的问题，因为我确信我做错了很明显的事情。**这就是 SQL Server 2000 的全部内容**（继承的项目！）

我有一个像这样的查询

```
 SELECT (SELECT Price1 from Table1) AS 'PriceOne', 
(SELECT Price2 From Table2) AS 'PriceTwo', 
PriceTwo * PriceOne AS 'Total' 
```

但这会为 PriceOne 和 PriceTwo 生成一个无法识别的列的错误。我假设它可以以这种方式乘以列，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:58:16.570

首先，您需要确保这些子查询总是只返回一行。现在，对于您关于列名的具体问题，您需要将它们包装在另一个`SELECT`上以像这样使用它们：

```
SELECT PriceOne, ProceTwo, PriceTwo * PriceOne AS 'Total'
FROM (  SELECT  (SELECT Price1 from Table1) AS 'PriceOne', 
                (SELECT Price2 From Table2) AS 'PriceTwo') AS A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:58:24.240

您不能在同一个 SELECT 上下文中使用列别名。尝试：

```
SELECT (SELECT Price1 from Table1) AS 'PriceOne', 
(SELECT Price2 From Table2) AS 'PriceTwo', 
(SELECT Price1 from Table1) * (SELECT Price2 From Table2) AS 'Total' 
```

或者将您的查询指定为子查询并在外部上下文中从中选择：

```
SELECT PriceOne, PriceTwo, PriceTwo * PriceOne AS Total
FROM (SELECT (SELECT Price1 from Table1) AS 'PriceOne', 
         (SELECT Price2 From Table2) AS 'PriceTwo') x 
```

* * *

虽然，我想知道是否真的只有`Table1`一行`Table2`，或者你是否真的打算做一些完全不同的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:03:45.067

我认为你需要澄清这个问题。Table1 和 Table2 中是否有不止一行？如果是这样，您需要指定某种连接条件，我假设您不想要笛卡尔连接。

只是好奇，你为什么要乘以价格？那没有意义。然后将结果称为“总计”——总计通常意味着相加而不是相乘。

# vb.net - VB.NET 中的方法组？

> ID：12803897
> 
> 赞同：9
> 
> 时间：2012-10-09T15:55:49.813
> 
> 标签：vb.net, method-group

James Michael Hare 最近写了[一篇](http://blackrabbitcoder.net/archive/2012/10/04/c.net-little-wonders-static-char-methods.aspx)关于`Char`静态方法的博客文章。他谈到使用*方法组*来编写简洁的 LINQ：

```
if (myString.Any(c => char.IsLower(c))) { xyzzy(); }
if (myString.Any(char.IsLower)) { xyzzy(); } // Less wordy FTW! 
```

VB.NET 中的等价物是：

```
If myString.Any(Function(c) Char.IsLower(c)) Then xyzzy()
If myString.Any(Char.IsLower) Then xyzzy() 'Compiler error 
```

可悲的是，我不能在这里做与 C# 等效的操作……编译器告诉我`Overload resolution failed because no accessible 'IsLower' accepts this number of arguments`……悲伤。我以为这可能是因为我一直`Option Strict`在做，但可惜，这也不起作用。

我假设*方法组*在 VB.NET 中不可用...在 VB.NET 中是否有类似的功能可用？或者有什么特殊原因不能（不会）在 VB.NET 中完成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T16:03:16.490

等效的 VB 代码为：

```
If myString.Any(AddressOf Char.IsLower) Then xyzzy() 
```

# java - 多线程程序中 JPL 库的意外行为（接口 Java 和 Prolog）

> ID：12803898
> 
> 赞同：1
> 
> 时间：2012-10-09T15:55:52.287
> 
> 标签：java, multithreading, prolog, jpl

我一直在试验 JPL 的多线程特性。据我从源代码中的注释了解，每个 Java 线程分配了一个不同的 Prolog 引擎。显然，在线程 A 中启动查询时出现问题，在线程 B（由线程 A 生成）中执行另一个查询，在线程 A 中再次执行第三个查询。

下面的代码片段说明了这个问题：

```
public static void main(String[] args) {
    try {
        ...
        Query query;
        query = new Query("true");
        System.out.println(query.hasSolution()); //succeeds

        Thread t = new Thread() {
            @Override
            public void run() {
                Query query2 = new Query("true");
                System.out.println(query2.hasSolution()); //succeeds
            }
        };
        t.start();
        t.join();

        query = new Query("true");
        System.out.println(query.hasSolution()); //fatal error
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

由于 JPL 文档提到不能同时激活两个查询，因此代码会等到线程完成后再继续执行最后一个查询（我尚不清楚该约束是否仅适用于同一线程中的查询或者如果它适用于不同线程和引擎中的查询）。

在前面的示例中，只有前两个查询成功。执行第三个查询时，我收到此致命错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x000000010db65bd5, pid=79191, tid=7171
#
# JRE version: 7.0_06-b24
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.2-b09 mixed mode bsd-amd64 compressed oops)
# Problematic frame:
# C  [libYap.dylib+0x125bd5]  PL_open_foreign_frame+0x45
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
... 
```

这是 JPL 中的错误吗？在那种情况下，有人知道将 JPL 与多线程一起使用的解决方法吗？

我已经用 YAP 版本 6.2.2 和 6.3.2 进行了测试，结果相同。

**更新：**

正如@sharky 所建议的那样，显然这是 YAP 二进制文件（或 YAP 的 JPL 端口）的问题。使用 SWI 时，问题中显示的示例运行良好。

我仍然对多线程程序中的 JPL 行为感到困惑。查看JPL 库`open`中类中方法的源代码和注释：`Query`

```
public synchronized final void open() {
  ...
  if (Prolog.thread_self() == -1) { // this Java thread has no attached Prolog engine?
    engine = Prolog.attach_pool_engine(); // may block for a while, or fail     
  } else { // this Java thread has an attached engine
    engine = Prolog.current_engine();       
  }
  ...
} 
```

似乎 JPL 将为每个线程创建一个新的逻辑引擎。但是，如果我执行这个简单的程序：

```
Thread t = new Thread() {
  @Override
  public void run() {
    Query query = new Query("assert(x)");
    query.hasSolution()
    query = new Query("x");
    System.out.println("Thread1 x:" + query.hasSolution()); //query succeeds
  }
};
t.start();
t.join();

t = new Thread() {
  @Override
  public void run() {
    Query query = new Query("x");
    System.out.println("Thread2 x:" + query.hasSolution()); //query also succeeds
  }
};
t.start();
t.join(); 
```

我可以看到以下输出：

```
Thread1 x:true
Thread2 x:true 
```

因此，显然第二个线程正在访问与第一个线程相同的 Prolog 引擎，而不是源代码及其评论所暗示的新引擎。

如果有人对 JPL 和多线程有经验，请澄清这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-06T18:18:07.523

现在我找到了可能的解决方案（但是有一种方法仍然可以访问定义的子句）

**你可以使用模块！**序言文件：

```
:-module(thread1,[]).
x. 
```

然后在thread1中你可以询问`thread1:x`它会成功并且thread2会启动一个异常（你可以抓住它并说失败......）（除非你没有定义x动态）

另一种方法是使用thread_local ...但您必须将每个子句定义为thread_local（无聊！）

# iis - IIS 将 Url 重写到另一个域/PHP 应用程序和 SEO 优化

> ID：12803905
> 
> 赞同：0
> 
> 时间：2012-10-09T15:56:29.837
> 
> 标签：iis, url-rewriting, seo, rewrite

在我的网站（asp.net + IIS）中，我希望将该 url /blog/ 重写为托管在另一台服务器中的我的 PHP Web 应用程序。所以 www.mywebsite.com/blog 调用 www.myblogsite.com 而不重定向到它。

可能吗 ？如果不是永久重定向 301 对 SEO 来说是很好的做法，所以谷歌会将博客视为我网站的一部分

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:09:29.767

**有可能**，如果您使用**iFrames**、**AJAX**等，但如果您真的关心 SEO，那么我会说要么将整个内容带到您的第一个域，要么使用“永久重定向”。

如果您使用永久重定向，90-99% 的排名能力将转到重定向页面。如果你想要那比它好。

如果您不想将排名权传递给第二个域，那么我建议您将整个内容从第二个域中取出并放在 /blog/ 下的您的网站上，然后永久重定向您的第二个域（www.blogsite.com ) 到您的 /blog/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:57:34.707

你不想重定向，你想在这里反向代理。如何做到这一点是：

1.  设置您的服务器以在相同 uri 结构中的奇数端口上侦听该站点，例如 -- `http://1.2.3.4:10005/blog`。这是可选的——您可以使用主机名。仅当您使用与您提供服务的主机名相同时才会获得 squirrley。

2.  在 IIS 上安装 Application Requet Routing 模块并启用反向代理功能。

3.  在您的站点上的适当子 uri（例如 /blog）上创建一个虚拟目录

4.  在 vdir 中，为反向代理添加一个 url 重写——如果你做的 #2 正确，它现在应该是一个选项。将其发送回`1.2.3.4:10005/blog`或您设置的任何位置。

事情应该会奏效。我们之前已经使用它将一些流行的基于 PHP 的 CMS 应用程序集成到网站中，并取得了普遍的成功。最大的挑战是许多 CMS 应用程序真的想知道他们正在运行的 url 并基于此构建绝对链接。

# java - 找不到为什么布局越来越小

> ID：12803906
> 
> 赞同：2
> 
> 时间：2012-10-09T15:56:36.553
> 
> 标签：java, swing, user-interface, layout

这是我的代码几乎可以按预期工作。在我进入问题之前，请查看代码，请原谅我的长代码，但这可以像 java 类一样粘贴，我使用 NETBEANS JForm 设计器来获取 GUI。

```
package test;
import java.awt.event.*;
import javax.swing.*;
/**
 *
 * @author jackandjill
 */
public class Summingup extends JFrame {

    /**
     * Creates new form Summingup
     */
    public Summingup() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */

    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        input1_tb = new javax.swing.JTextField();
        calculate_btn = new javax.swing.JButton();
        result_lbl = new javax.swing.JLabel();
        input2_tb = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Input 1");

        jLabel2.setText("Input 2");

        calculate_btn.setText("SUM");
        calculate_btn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                calculate_btnActionPerformed(evt);
            }
        });

        result_lbl.setText("RESULT DISPLAYED HERE!");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addGap(18, 18, 18)
                        .addComponent(input1_tb))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addComponent(result_lbl))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addComponent(input2_tb)))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(calculate_btn)
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addComponent(calculate_btn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel1)
                            .addComponent(input1_tb, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel2)
                            .addComponent(input2_tb, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 20, Short.MAX_VALUE)
                .addComponent(result_lbl)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void calculate_btnActionPerformed(java.awt.event.ActionEvent evt) {                                              
        // TODO add your handling code here:
        InvalidValueException ive = new InvalidValueException();
        calculate_btn.addActionListener(ive);
        //addActionListener
    }                                             

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) 
    {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Summingup.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() 
        {

            public void run()
            {
                new Summingup().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    public javax.swing.JButton calculate_btn;
    public javax.swing.JTextField input1_tb;
    public javax.swing.JTextField input2_tb;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    public javax.swing.JPanel jPanel1;
    public javax.swing.JLabel result_lbl;
    // End of variables declaration                   

class InvalidValueException implements ActionListener
{

    public void actionPerformed(ActionEvent ae)
    {
         try
       {
           if(ae.getSource() == calculate_btn)
           {
               String input_1 = input1_tb.getText();
                String input_2 = input2_tb.getText();

                checkBlankInput(input_1,input_2);

                validateInput(Integer.parseInt(input_1),Integer.parseInt(input_2));

                result_lbl.setText(calculate(Integer.parseInt(input_1),Integer.parseInt(input_2)));

           }
       }

       catch (NumberFormatException excep)
       {
        result_lbl.setText("Invalid  number");
       }

       catch (BlankInputException excep)
       {
         result_lbl.setText(excep.getMessage());
       }
         catch (InvalidInputException excep)
       {
         result_lbl.setText(excep.getMessage());
       }
    }

    public void checkBlankInput(String input1,String input2) throws BlankInputException 
    {
        if (input1.length() == 0 ||input2.length() == 0) throw new BlankInputException();
    }

    public void validateInput(int input1 , int input2) throws InvalidInputException
    {

        if (input1 + input2 > 100 )
        throw new InvalidInputException();
    }

    public String calculate(int input1, int input2)
    {
        String res = "";
        while (true) 
        {
            res = Integer.toString(input1 + input2);
            break;
        }
        return res;

    }

}
}

class InvalidInputException extends Exception {

public InvalidInputException() {

super("Invalid  number");

}
}
class BlankInputException extends Exception {

public BlankInputException() {

super("Input cannot be blank");

} 
 } 
```

所以让我简单介绍一下代码，这段代码基本上是初始化一个GUI并进行大量异常处理，你看到整个代码确实很重要，这样你才能更清楚地理解准确回答。这是我执行程序时得到的布局

![在此处输入图像描述](../Images/a9523c7453b7d099edd1c6408d26308f.png)

所以在我按下 SUM 按钮**一次**之后

仍然和上面一样的图像没有变化

我再次按下 SUM 按钮。第二次

![在此处输入图像描述](../Images/ef5d66489dcf115ad93d55fa823049c5.png)

所以希望你看到了！文本字段的长度越来越短发生了什么？甚至不知道从哪里开始，如果你要让我做调试，我已经做过但它仍然没有做任何尺寸减小这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:07:05.843

文本字段的长度越来越短，因为`result_lbl`标签中的文本越来越短，因为单击按钮时它会发生变化。您会注意到文本字段的长度始终与下面标签的长度相同。

要修复它，只需构造具有指定列数的文本字段，例如

```
 input1_tb = new JTextField(20); 
```

因此，无论下面的标签发生什么，文本字段的长度都不应受到影响。

编辑：

```
why doesn't the button listener is not kicking in the first time? 
```

删除这个

```
 calculate_btn.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            calculate_btnActionPerformed(evt);
        }
    }); 
```

还有这个

```
private void calculate_btnActionPerformed(java.awt.event.ActionEvent evt) {                                              
    // TODO add your handling code here:
    InvalidValueException ive = new InvalidValueException();
    calculate_btn.addActionListener(ive);
    //addActionListener
} 
```

并用这一行替换它们：

```
 calculate_btn.addActionListener(new InvalidValueException()); 
```

创建按钮后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:12:37.933

文本字段添加到与结果标签相同的垂直列上。当结果标签改变其大小时，它也会影响文本字段。

我在您的代码中注意到的另一件奇怪的事情是，`InvalidValueException`每当`ActionListener`您处理已经注册的`ActionListener`. 您应该这样做一次，而不是每次按下按钮。

# iphone - cocos2d 中的跳转和碰撞

> ID：12803910
> 
> 赞同：0
> 
> 时间：2012-10-09T15:56:53.767
> 
> 标签：iphone, cocos2d-iphone, collision

我正在尝试在 iphone 和 cocos2d 上创建一个平台游戏。我还没有决定使用 Box2D ......但取决于我如何解决这个问题，我可能不得不使用它。

我的问题是跳跃。当我的角色（精灵）沿着平坦的壁架奔跑时，我尝试在壁架的末端跳跃，有时，有效地，我在角色有效地“走”下壁架后立即按下跳跃。视觉上和身体上都感觉很奇怪，因为我几乎可以肯定每次我在最后一刻按下，但不，这是一个循环太晚了。

有没有人遇到过同样的问题，并且知道处理它的聪明方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:10:26.577

我认为，在您的情况下，您可以简单地考虑一些精度，让您在“离开”平台后稍微跳一下。

无论如何，box2d 是一个相当不错的物理引擎，它可以让您检测碰撞并模拟物体的行为（例如，它可以在碰撞后自动对物体应用旋转）。互联网上有很多手册，可以帮助您了解它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:01:23.290

我猜你只使用角色的位置来确定他是否还在窗台上。如果是这样，当他的中心点越过窗台时，角色将“失去立足点”。没有平台游戏可以做到这一点。

相反，您应该测试字符的整个边界框宽度。只要边界框的左下角或右下角仍然在可行走的平面上，角色就不能从窗台上掉下来。您会在许多平台游戏中看到这一点，其中角色仍然站在壁架上，而只有一只脚仍然在壁架上。

**你可能感兴趣的两件事：**

本[指南实施 2D 平台游戏](http://higherorderfun.com/blog/2012/05/20/the-guide-to-implementing-2d-platformers/)。几乎涵盖了您需要了解的所有内容。没有代码，但易于遵循算法的说明。

然后是[Commander Cool](http://www.payloadz.com/go/jump?id=1648092&aff_id=3419318)，一个带有 cocos2d 和 box2d 的商业平台游戏套件。如果您有兴趣加快开发速度，而不是花时间重新发明轮子，也就是平台游戏框架代码。

# ios - NSOperation 永远不会被释放

> ID：12803911
> 
> 赞同：0
> 
> 时间：2012-10-09T15:56:53.760
> 
> 标签：ios, instruments, nsoperation, nsoperationqueue

我有扩展 NSOperation 的对象。我也有 NSOperationQueue。

我有一个计时器，每 0.5 秒 NSOperationQueue 的 NSLogs operationCount 属性。

我将新操作添加到队列中，并且在所有操作都完成后，队列记录 0 就像预期的那样。

问题是 Instruments 报告说仍然存在 NSOperation 对象。

我没有对 NSOperation 的引用，我只分配初始化它们并将它们添加到队列中。

Instruments 中活着的 NSOperation 对象的数量是 11 (???)。如果我添加 5 个新操作，则 NSLog 记录 5... 4.... 3.... 2 .... 1... 0。仪器的行为如下：16、15、14、13、12， 11 ...

对此有任何线索吗？

我可以将 KVO isFinished 属性设置为 nil，但我想知道为什么这些对象还活着。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:20:31.887

看起来是 Instruments 造成了这种情况，因为这种情况不再发生，而且在新测试之前我没有接触过该代码。

# sql - 选择以检索多行然后循环插入语句的结果

> ID：12803916
> 
> 赞同：0
> 
> 时间：2012-10-09T15:57:19.483
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我需要创建一个存储过程来执行以下操作；

```
 SELECT * FROM TABLE1 
```

然后对于返回的每一行；

```
 INSERT INTO TABLE2 (column1, column2, column3,...) 
    VALUES (value1, value2, value3,...) 
```

我该怎么做呢？

**更新********

 **因此，根据到目前为止的响应，我得到了以下 sql；

```
INSERT INTO recEntrantStatus (entrantId, roundId, judgeId)
SELECT entrantId, judgeId
FROM recEntrantStatus
WHERE roundId = 0
AND voted = true
AND enterNextround = true 
```

但是我需要在roundId 列中新创建的记录中添加一个固定值，例如输入@round。

我该怎么做呢？

谢谢。

------------------------------------- 更新 2 ------------ --------------------------------

因此，多亏了你们的一些重要帮助，我现在有了以下 SQL，它在这个阶段工作得很好：

```
 INSERT INTO recEntrantStatus (entrantId, roundId, judgeId, notified, voted, enterNextRound)
  SELECT entrantId, (@round + 1), judgeId, 0, 0, 0
  FROM recEntrantStatus
  WHERE roundId = @round
  AND voted = 1
  AND enterNextround = 1 
```

此代码检查“enterNextRound”为真的所有记录，然后为每个记录创建一个新记录。

但是，我现在需要扩展它，以便：

A）检查所有评委的第二个表（tblJudges）并获取所有评委ID（Id）的数组

B) 执行与上述示例相同的操作，只是现在为从步骤 A 获得的每个评委/评委 ID 创建上述每个记录。

任何帮助/建议将一如既往地不胜感激。

谢谢！

已关闭 - 由于附加要求，问题作为新问题发布。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:02:13.037

```
CREATE PROCEDURE myProcedure
AS
    INSERT INTO table2 (col1, col2, col3)
    SELECT      col1, col2, col3
    FROM        table1
GO 
```

或者类似的东西应该有效。SQL Server 允许您`INSERT`直接从`SELECT`语句执行。

请注意，这实际上不需要是存储过程，除非有更多内容（业务逻辑或您希望在所有实现中保持静态的条件）。

* * *

### 更新

```
CREATE PROCEDURE myprocedure @roundId DECIMAL(5,2)
AS
  INSERT INTO   recEntrantStatus
               (entrantId, roundId, judgeId)
  SELECT        entrantId, roundId, judgeId
  FROM          recEntrantStatus
  WHERE         roundId = @roundId
    AND         voted = 1
    AND         enterNextRound = 1
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:01:57.567

INSERT 有两种允许的语法。你上面给出的一个是一个，但你也可以这样做：

```
INSERT INTO
    Table1(col1, col2, col3)
SELECT
    Col1,
    Col2,
    Col3
FROM
    Table2 
```**

# css - 没有滚动条时将页脚放在底部？

> ID：12803918
> 
> 赞同：0
> 
> 时间：2012-10-09T15:57:26.003
> 
> 标签：css, html, position, height, scrollbar

我有一个包含使用 php include 函数的元素的 div，下面我有一个页脚。仅当您滚动到页面底部时，页脚才可见，以节省空间。

问题是，如果内容高度很小（例如 300 像素），则页脚不会放在页面底部，这会使布局看起来不太好。

所以我的问题是，当浏览器窗口上没有出现滚动条时（意味着内容 div 高度很小），我可以将页脚放在底部吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:12:35.157

听起来你正在寻找一个[粘性页脚：](http://css-tricks.com/snippets/css/sticky-footer/)

HTML：

```
<div id="wrap">
    <div id="main">content</div>
</div>

<div id="footer">footer</div>​ 
```

CSS：

```
* { margin:0; padding:0; } 

html, body, #wrap { height: 100%; }

body > #wrap {
    height: auto; 
    min-height: 100%;
}

#main { 
    padding-bottom: 40px; /* must be same height as the footer */
}  

#footer { 
    position: relative;
    margin-top: -40px; /* negative value of footer height */
    height: 40px;
    clear:both;
    background: #c00;
} 
```

[在这里拉小提琴。](http://jsfiddle.net/ultranaut/kvvfb/) ​</p>

这将允许`footer`div*至少*位于窗口的底部；随着`main`内容 div 的增长，它会相应地向下推页脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:00:14.223

这只能通过 JavaScript 完成，因为您的服务器 (PHP) 无法知道窗口的高度。话虽这么说，当然可以做到：如果内容小于浏览器窗口的高度，您可以例如在页脚div上设置`position:fixed`和`bottom: 0px`将其粘贴到窗口底部；否则，就让它在内容的底部。

# mercurial - Mercurial：远程 hg 更新挂钩后强制删除

> ID：12803919
> 
> 赞同：0
> 
> 时间：2012-10-09T15:57:27.497
> 
> 标签：mercurial, mercurial-hook

我们在远程存储库上设置了一个挂钩，以便在接收到推送后自动更新存储库。它工作得很好，除非我们在本地删除文件然后推送。我们收到这样的消息：

```
remote:  local changed path/to/file/file.ext which remote deleted
remote: use (c)hanged version or (d)elete? c 
```

它会自动选择“c”。我们有没有办法让 Mercurial 使用 'd' 并删除文件？

这是钩子，也发布在评论中，但希望在这里保留换行符：

```
[hooks]

changegroup = hg update >&2

incoming = /path/filename.sh > /dev/null 2>&1 
```

.sh 文件在 hg 更新后重置一些权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:19:52.683

一位同事向我指出了这一点，这可能是我们的解决方案：

[https://bz.mercurial-scm.org/show_bug.cgi?id=3302](https://bz.mercurial-scm.org/show_bug.cgi?id=3302)

[https://www.mercurial-scm.org/repo/hg/rev/95e45abe7e8e](https://www.mercurial-scm.org/repo/hg/rev/95e45abe7e8e)

我们还没有尝试过，但我会在我们尝试后报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:10:37.200

错误消息的意思是“您的本地工作副本包含更新尝试删除的修改文件。”

如果您在远程服务器上运行“hg st”（即在远程存储库中），您应该会看到修改后的文件。请注意，更改文件的权限被视为更改。

所以会发生这样的事情：

*   您的本地 Mercurial 将文件推送到远程存储库
*   挂钩更改远程存储库中的文件（通过修改其权限）。
*   有人试图删除其中一个文件

Mercurial 总是试图防止数据丢失，因此默认选项是“保留本地更改”（因为您以后可以随时删除这些文件，但您可能无法恢复它们）。

你能做什么？

*   与其“修复”远程仓库的权限，不如拒绝接受具有错误权限的更改集。也就是说，不是修复权限，而是在`pretxnchangegroup`挂钩中检查它们。如果权限错误，请中止。这样，只要权限被破坏，您就无法推送。[文档](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html#sec:hook:pretxnchangegroup)。

*   不要修改工作副本，而是将文件复制到新位置并更改那里的权限。这会浪费一些磁盘空间（但如果您使用软链接或硬链接，则不会像您想象的那么多），但它会分离关注点（来自版本文件的特殊权限）。

**[编辑]**

> 新文件，在本地添加然后推送到远程仓库，失去执行权限。

他们没有失去它，他们一开始就没有它：Windows 不支持这个 Unix 特性。

不幸的是，[您不能告诉 Mercurial 从 Windows 设置位](https://stackoverflow.com/questions/2702825/setting-mercurials-execute-bit-on-windows)。

要正确解决此问题，请使用以下方法：

1.  像以前一样从 Windows 添加和推送文件
2.  在 Unix 服务器上创建一个 cron 作业，检查权限并发送一封电子邮件，发现它们是错误的。
3.  当电子邮件进来时，连接到 Unix 服务器并修复权限
4.  从 Unix 提交并推送更改。

如果您在 Windows 上修改文件，Mercurial 将保留执行位。

我建议将最后两个步骤放入脚本中。我不认为你可以完全自动化它。当有人在运行时推送更改时，脚本将（通常？）失败。

PS：我已经提交了一个功能请求，要求提供更好的解决方案：[提供一种从 Windows 修改 Unix 权限的方法](https://bz.mercurial-scm.org/show_bug.cgi?id=3659)

# asp.net - 旋转 image_button

> ID：12803930
> 
> 赞同：3
> 
> 时间：2012-10-09T15:58:13.027
> 
> 标签：asp.net, css

我有一个图像按钮

```
 <asp:ImageButton
    ID="ImageButton1" runat="server" ImageUrl="~/image/ImgTest.png" 
    CssClass="test" onclick="ImageButton1_Click"  /> 
```

我需要把它转45度。

```
.test {
    -webkit-transform : rotate(45deg);
}

   /\****
  /  \***
 /    \**
/      \*
\      /*
 \    /**
  \  /***
   \/**** 
```

问题是，我只需要在多维数据集内单击 b​​utton_Click，一会儿我可以单击 * 区域，但我应该删除它。

有什么方法可以从**区域删除点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:01:46.737

你可以添加这个 - 基于`CausesValidation`属性

```
ImageButton.CausesValidation="false" 
```

所以

```
<asp:ImageButton CausesValidation="false" .../> 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.imagebutton.causesvalidation.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.imagebutton.causesvalidation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:08:03.017

听起来您可能想尝试使用 HTML 图像映射。 [咖啡杯](http://www.coffeecup.com/image-mapper/)是一种巧妙的工具，可以让这些变得简单。

# haskell - Haskell：使用规则列表过滤列表

> ID：12803934
> 
> 赞同：3
> 
> 时间：2012-10-09T15:58:18.103
> 
> 标签：haskell

所以我有一个我想根据规则集过滤的项目（食谱）列表，

```
ruleset = [rule0, rule1, rule2, rule3, rule4] 
```

其中每个规则都是一个函数 :: Recipe -> Bool。我想将这些规则应用于列表中的每个项目，我一直在使用以下函数：

```
testRules :: Recipe -> Bool
testRules r = rule0 r && rule1 r && rule2 r && rule3 r && rule4 r 
```

必须有一种方法来应用数组而不明确说“rule0 && rule1&& ...”

有人知道方法吗？我知道'map' 将一个函数应用于列表.. 并且 zipWith 将一个数组乘以一个数组.. 必须有另一个函数来执行此任务！

我也一直在想，也许我可以将规则集作为参数传递给 testRules 并递归地遍历规则集：

```
testRules (rule:rules) r = rule r && testRules rules
testRules [] r = True 
```

但是，我不知道如何提供函数的头部（testRules :: ）

为任何帮助干杯！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T16:53:32.083

还有`all :: (a -> Bool) -> [a] -> Bool`可以使用的功能。此函数检查谓词是否适用于列表的所有值。

只是现在，我们要稍微扭转一下，让谓词是“当它应用于 x 时，这条规则的结果为真”，列表将包含谓词。

您可以将谓词表示为，`\rule -> rule x == True`但这与 相同`\rule -> rule x`，与 相同，`\rule -> rule $ x`与 相同`($x)`。所以这条思路给了我们很好的和简短的：

```
testRules :: [a -> Bool] -> a -> Bool
testRules rules x = all ($x) rules 
```

这可以通过使用变得无意义，`testRules = flip (all . flip ($))`但我认为这有点过头了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T16:19:00.380

您可以使用`and`，它需要一个列表`Bool`并返回`True`如果所有这些都是`True`.

然后，将 zipWith 与应用程序 ($) 一起使用：

```
testRules :: [a -> Bool] -> a -> Bool
testRules :: and $ zipWith ($) ruleset (repeat r) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T17:00:13.357

结合`and`列表推导很好地解决了这个问题：

```
testRules :: [Recipe -> Bool] -> Recipe -> Bool
testRules ruleSet r = and [rule r | rule <- ruleSet] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T16:03:40.350

首先想到的是：

```
testRules :: Recipe -> [ Recipe -> Bool ] -> Bool
testRules r ruleset = and $ map (\rule -> rule r) ruleset 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-09T16:07:39.407

我相信有很多方法。我喜欢折叠（带有应用程序）：

```
testRules = foldl1 (\f r -> (&&) <$> f <*> r) rules 
```

# c++ - Visual C++ 学习 MFC

> ID：12803936
> 
> 赞同：0
> 
> 时间：2012-10-09T15:58:23.447
> 
> 标签：c++, debugging, events, mfc, ribbon

我目前正在学习 MFC，首先，你们有没有人知道一个解释了每个事件的站点，例如，当您单击功能区中的新建时，该事件会在那里触发.

实际上这是我的问题，当您单击功能区中的文件，然后单击新建（来自 mfc 的模板）时，它在哪里执行，因为我找不到它？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:26:40.760

我推荐 Scot Wingo 的书*MFC Internals*。书中描述了MFC的消息路由机制。它可能有点过时，但它显示了在编译器附带的 MFC 源文件中查找的位置。简而言之，

1) 单击 File-New 按钮会导致一条消息发布到您的应用程序 2) 最终 AfxInternalPumpMessage() 调用 GetMessage()，调用 AfxInternalPreTranslateMessage()，可能还有 TranslateMessage() 和 DispatchMessage() 3) 最终消息发出到 AfxWindowProc()、AfxCallWindowProc() 和 CFrame 派生窗口的虚拟 WindowPrc()（假设功能区、工具栏或菜单生成的命令）。4) 最终窗口进程发现它是一条 WM_COMMAND 消息并调用 OnCmdMsg()。5) MFC 的命令路由允许视图、文档、框架窗口和应用程序在处理消息时有一个裂缝。

要处理消息，派生的 CCmdTarget 派生对象（CView、CDocument、CFrameWnd、CWinApp）必须具有消息映射 BEGIN_MESSAGE_MAP(classname)/END_MESSAGE_MAP()，条目为 ON_COMMAND(ID_FILE_NEW, CommandHandlerFunc)，其中 CommandHandlerFunc 是派生类中的函数，它是带有 void 参数的 void 返回类型。

```
BEGIN_MESSAGE_MAP(CMyApp)
   ON_COMMAND(ID_FILE_NEW, OnFileNew)
END_MESSAGE_MAP() 
```

# objective-c - 写入为 UTF16 时，iOS 导出文件中的额外空格

> ID：12803939
> 
> 赞同：1
> 
> 时间：2012-10-09T15:58:30.973
> 
> 标签：objective-c, ios

当我从我的 iPhone 应用程序中将一个简单的文本文件保存为 NSUTF16StringEncoding 时，似乎喜欢在我添加的每一行的开头添加一个额外的“空格”。这是一些粗略的代码，详细说明了我在做什么（不准确，不一定按原样可执行）。

```
NSArray *paths          = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *tempPath      = [paths objectAtIndex:0];
NSString *tempFilename  = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];
NSString *tempFilePath  = [tempPath stringByAppendingPathComponent:tempFilename];
NSError *error;

freopen([tempFilePath cStringUsingEncoding:NSASCIIStringEncoding],"a+",stderr);
NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:tempFilePath];

NSString *testLine1 = @"test row 1";
[fileHandle seekToEndOfFile];
[fileHandle writeData:[testLine1 dataUsingEncoding:NSUTF16StringEncoding]]; // NSUTF8StringEncoding

NSString *testLine2 = @"test row 2";
[fileHandle seekToEndOfFile];
[fileHandle writeData:[testLine2 dataUsingEncoding:NSUTF16StringEncoding]]; // NSUTF8StringEncoding

NSString *testLine3 = @"test row 3";
[fileHandle seekToEndOfFile];
[fileHandle writeData:[testLine3 dataUsingEncoding:NSUTF16StringEncoding]]; // NSUTF8StringEncoding

[fileHandle closeFile];  

// convert csv text to data
NSData *dataCsvOutput = [NSData dataWithContentsOfFile:tempFilePath];

NSArray *objects  = [NSArray arrayWithObjects:dataCsvOutput, exportFilename, deviceType, nil];        
NSArray *keys     = [NSArray arrayWithObjects:@"data", @"filename", @"devicetype", nil];
NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:objects 
                                                   forKeys:keys];            

NSString  *exportFilename = [withDictionary objectForKey:@"filename"];
NSData    *dataCsvOutput  = [withDictionary objectForKey:@"data"];
NSString  *deviceType     = [withDictionary objectForKey:@"devicetype"];

MFMailComposeViewController *mfViewController = [[MFMailComposeViewController alloc] init];
mfViewController.mailComposeDelegate          = self;
[mfViewController setSubject:@"Test"];
[mfViewController setMessageBody:[NSString stringWithFormat:@"Please find data attached."] isHTML:NO];
[mfViewController addAttachmentData:dataCsvOutput mimeType:@"text/plain;charset=utf-16" fileName:exportFilename];
[self presentModalViewController:mfViewController animated:YES];
[mfViewController release]; 
```

生成的文本文件最终类似于：

> 测试行 1
>  测试行 2
>  测试行 3

谁能建议这是为什么？导出为 UTF-8 时它工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:24:15.190

`NSUTF16StringEncoding`（它是 的别名`NSUnicodeStringEncoding`）在输出前添加一个所谓的“字节顺序标记”，它由字节“FE FF”或“FF FE”组成，并指示以下数据是大端还是小端UTF-16。

To avoid the byte-order marker, use either `NSUTF16BigEndianStringEncoding` or `NSUTF16LittleEndianStringEncoding`.

*Remark:* A better alternative for

```
[tempFilePath cStringUsingEncoding:NSASCIIStringEncoding] 
```

is

```
[tempFilePath fileSystemRepresentation]; 
```

# xaml - Visual Studio 2012 是否支持 XAML 2009？

> ID：12803940
> 
> 赞同：6
> 
> 时间：2012-10-09T15:58:44.260
> 
> 标签：xaml, visual-studio-2012

我知道2010年没有，但2012年呢？

UserControls 和 Windows 似乎仍然是使用 2006 命名空间自动创建的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:36:40.727

我只是试了一下，但在我看来，XAML 2009 的情况在 VS2012 中保持不变。

此外，对于 .NET 4.0 和 .NET 4.5，XAML 2009 的 MSDN 文档是相同的。

# c# - 自定义拆分容器

> ID：12803941
> 
> 赞同：1
> 
> 时间：2012-10-09T15:58:54.260
> 
> 标签：c#, winforms, controls, splitcontainer

我正在使用标准的 SplitContainer - 非常有用的东西，但实际上它看起来有点难看。我查看了其他类型的 SplitContainer 实现。[火狐](http://i.stack.imgur.com/iiLNm.png)。

你能告诉我 - 如何自定义绘制拆分栏以看起来更好一点，或者至少在 FF 中怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:57:10.220

我花时间做了一些。[这](http://pastebin.com/wu5du0Dd)是我的自定义 SplitContainer 的代码。

但是有一个小错误 - 当 SplitContainer 被聚焦并按下一个键时 - 绘图消失 - 我知道这应该通过调用 Invalidate 方法来修复 - 但我在 KeyPressed、KeyDown、KeyUp 中调用它 - 没有结果。你能告诉我应该检查哪个事件来修复那个错误吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:45:16.380

**简单的解决方案：**

将 更改`System.Windows.Forms.SplitContainer.BorderStyle`为`Fixed3D`。`Splitter`看起来和你提到的一样。

# java - 使用 org.apache.commons.net.ftp.FTPClient 保护 FTP

> ID：12803942
> 
> 赞同：24
> 
> 时间：2012-10-09T15:59:03.040
> 
> 标签：java, ftp, sftp, apache-commons, ftp-client

有没有办法可以实现安全的 FTP `org.apache.commons.net.ftp.FTPClient`？

如果没有，Java 的其他选择是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-01-12T12:33:54.377

首先，确保您了解 FTPS（安全 FTP）和 SFTP 之间的区别：
[FTPS 与 SFTP 与 SCP](https://superuser.com/q/677966/213663)

* * *

*   如果您需要**FTPS**（又名安全 FTP 或 TLS/SSL 上的 FTP），您可以使用Apache Commons 库中的[`FTPSClient`类](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPSClient.html)而不是`FTPClient`.

*   如果你需要**SFTP**（通过 SSH），你需要一个不同的库。请参阅：
    [如何通过 SFTP 从服务器检索文件？](https://stackoverflow.com/q/14617/850848)或
    [Java SFTP 传输库](https://stackoverflow.com/q/2346764/850848)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-01T20:19:29.437

您可以使用 org.apache.commons.net.ftp。**FTPSClient**而不是 org.apache.commons.net.ftp。**FTPClient**拥有安全的 ftp [http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPSClient.html](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPSClient.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T16:20:41.740

尝试 Java 安全通道

它支持SFTP

[http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

示例可以在[这里找到](http://www.jcraft.com/jsch/examples/Sftp.java.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-28T14:47:03.507

Apache FTPClient 目前不支持 SFTP。但是，您可以使用 JSch - Java 安全通道。

[Onkar Joshi](http://www.onkarjoshi.com/blog/126/which-library-to-use-for-ftp-sftp-ftps-file-transfer-in-java/)详细介绍了在 Java 中用于 FTP、SFTP、FTPS 文件传输的库。

一个使用JSch通过SFTP传输文件的例子如下：

```
 ...

private static final Logger logger = Logger.getLogger(YourClass.class.getName());

public boolean sendDataViaSFTP(String contents) throws Exception {
    String hostname = "<FTP hostname/IP>";
    String username = "<FTP username>";
    String password = "<FTP password>";
    String remoteDirectory = "<FTP remote directory>";
    int ftpPort = 22;

    logger.info("***   Creating FTP session.   ***");
    JSch jsch = new JSch();
    Session session = null;
    Channel channel = null;
    ChannelSftp c = null;

    //Now connect and SFTP to the SFTP Server
    try {
        //Create a session sending through our username and password
        session = jsch.getSession(username, hostname, ftpPort);
        logger.info("***   FTP Session created.   ***");
        session.setPassword(password);

        //Security.addProvider(new com.sun.crypto.provider.SunJCE());
        //Setup Strict HostKeyChecking to no so we dont get the
        //unknown host key exception
        Properties config = new Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        logger.info("***   Session connected.   ***");

        //Open the SFTP channel
        logger.info("***   Opening FTP Channel.   ***");
        channel = session.openChannel("sftp");
        channel.connect();
        c = (ChannelSftp) channel;

        //Change to the remote directory
        logger.info("***   Changing to FTP remote dir: " + remoteDirectory + "   ***");
        c.cd(remoteDirectory);

        //Send the file we generated
        try {
            String filename = "myfile.txt";

            logger.info("***   Storing file as remote filename: " + filename + "   ***");

            ByteArrayInputStream bis = new ByteArrayInputStream(contents.getBytes());
            c.put(bis, filename);
            return true;
        } catch (Exception e) {
            logger.info("***   Storing remote file failed. " + e.toString() + "   ***");
            throw e;
        }
    } catch (Exception e) {
        logger.info("***   Unable to connect to FTP server. " + e.toString() + "   ***");
        throw e;
    } finally {
        //
        //Disconnect from the FTP server
        //
        try {
            if(session != null)
                session.disconnect();

            if(channel != null)
                channel.disconnect();

            if(c != null)
                c.quit();
        } catch (Exception exc) {
            logger.severe("***   Unable to disconnect from FTP server. " + exc.toString()+"   ***");
        }

        logger.info("***   SFTP Process Complete.   ***");
    }

}

... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T02:43:11.210

试试 Apache Camel 怎么样，

[http://camel.apache.org/ftp2.html](http://camel.apache.org/ftp2.html)

# ios5 - 移动到上一个 AVPlayerItem AVQueuePlayer

> ID：12803949
> 
> 赞同：1
> 
> 时间：2012-10-09T15:59:27.357
> 
> 标签：ios5, avplayer, avqueueplayer

试图允许用户在 AVQueuePlayer 中向后跳过，同时保留原始 AVQueuePlayer 集合。例如，用户按两次后退按钮并从先前位置恢复收听。参考此[Skip to Previous AVPlayerItem on AVQueuePlayer / Play selected Item from queue](https://stackoverflow.com/questions/12176699/skip-to-previous-avplayeritem-on-avqueueplayer-play-selected-item-from-queue) - 似乎转储队列中的所有项目并仅播放指定项目。不必每次都重新初始化/填充队列，有没有办法跳过并让队列恢复其流程完成？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:40:32.593

不会。Apple[的文档解释说](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVQueuePlayer_Class/Reference/Reference.html)，当前进到下一个项目时，`AVQueuePlayer`会从队列中删除当前项目。鉴于只有`-insertItem:afterItem:`，如果不转储和重建队列，就无法在当前项目之前重新插入项目。

# c# - 在独立于其他列的一列上对 DataTable 进行排序

> ID：12803951
> 
> 赞同：0
> 
> 时间：2012-10-09T15:59:32.147
> 
> 标签：c#, datatable, dataview

我创建了一个两列`DataTable`（id，name）：

```
 DataTable table = new DataTable();
        DataColumn id = table.Columns.Add("id", typeof(int));
        id.AutoIncrement = true;
        id.AutoIncrementSeed = 1;
        id.AutoIncrementStep = 1;
        id.ReadOnly = true;                  
        table.Columns.Add("name", typeof(String)); 
```

`DataColumn`命名`id`是（`AutoIncrementing`例如身份）。

然后我读取一个文件，并将文件的每一行添加为一行。

```
//for each line in file
table.Rows.Add(null,line); 
```

接下来，我使用 a`DataTable`对`DataColumn`命名进行排序：`name``DataView`

```
 DataView dv = table.DefaultView;           
        dv.Sort = "name";
        table = dv.ToTable(); 
```

问题是，`id`当我不希望列排序时（基本上我只想`name`独立于另一列对列进行排序）。

我能找到的唯一解决方案是有一个中间步骤，我`List<string>`用文件行填充 a，然后对其进行排序，然后填充表格。想知道是否有更优雅（简单）的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:05:17.893

您可以使用`Linq-To-DataTable`：

```
var orderedRows = table.AsEnumerable()
                       .OrderBy(r => r.Field<String>("name")); 
```

或者，如果您只想要名称：

```
var orderedNames = orderedRows.Select(r => r.Field<String>("name")); 
```

记得添加`using System.Linq;`。

**编辑**：

> 每个名字都属于一个id。但是，我只关心名称排序后的 id、name 键、值对。例如，第一个按字母数字排序的名称应该是 1，接下来是 2，依此类推

然后，您需要在对行进行排序后添加行：

```
var txtLines = File.ReadLines(path)
                   .OrderBy(l => l);

foreach(String  line in txtLines)
    tables.Rows.Add(null, line); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:39:53.693

如果您只是担心排序后的 id 值，您似乎应该只重新生成 id 列。

```
table.Columns["id"].ReadOnly = false;
for (int i = 0; i < table.Rows.Count; i++)
{
    table.Rows[i]["id"] = i + 1;
}
table.Columns["id"].ReadOnly = true; 
```

# asp.net-mvc - 实体框架工作单元模式对象生命周期

> ID：12803957
> 
> 赞同：1
> 
> 时间：2012-10-09T16:00:05.300
> 
> 标签：asp.net-mvc, entity-framework, unit-of-work, entity-framework-5

我正在使用 MVC + Entity Framework 5，目前正在研究[Unit of Work 模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。在控制器类中，我看到以下代码：

```
private UnitOfWork unitOfWork = new UnitOfWork(); 
```

这是否意味着为每个控制器创建类，从而为每个实例`UnitOfWork`创建一个数据库连接？`UnitOfWork`还是所有`DbContext`实例（在本文`SchoolContext`中创建的实例`UnitOfWork`）共享相同的连接？

`UnitOfWork`我的第二个问题：当只创建一个存储在 中的实例时，它会提高应用程序的性能`HttpContext`，还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:07:13.640

首先，让我提醒你。我知道你没有这样做，但我想确保你明白你永远不应该创建单个数据上下文并使其成为静态或单例。原因是应用程序的所有实例（即多个用户）之间共享静态数据，并且数据上下文不是多线程或多用户安全的。

发出警告后，让我们继续前进。

一般来说，您不必担心这一点。原因是即使您创建了多个 UnitOfWorks，一次也只有一个控制器处于活动状态（每个 Web 请求）。Entity Framework 有一个连接池，可以重用连接并优化它们的使用。（实际上，这是 Ado.net 的一部分，但仍然适用）

# java - 如何获取 JInternalFrame 标题栏的高度？

> ID：12803963
> 
> 赞同：0
> 
> 时间：2012-10-09T16:00:59.273
> 
> 标签：java, swing, jinternalframe

如何找出 a 的标题栏的高度`JInternalFrame`？最好以独立于操作系统和 L&F 的方式执行此操作。

我见过这个[SO question](https://stackoverflow.com/questions/7969254/get-height-of-jdialog-title-bar)，它似乎在问一个类似的问题，但对于`JDialog`. 但是，答案似乎建议使用`Container`方法`getInsets()`，[javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#getInsets%28%29)指出：

> 确定此容器的 insets，指示容器边框的大小。
> 
> 例如，一个 Frame 对象的顶部插图对应于框架标题栏的高度。

不幸的是，`JInternalFrame`不是一个`Frame`，而是一个`JComponent`。因此，这仅提供边框的大小。

在上一个 SO 问题中，有人问用例是什么......所以让我解释一下我的。我想创建`JInternalFrame`s，在鼠标点击时弹出，并调整到一些最大/最小标准，包括它不大于父框架内鼠标点击右下角的当前可见空间。

考虑以下 SSCCE：

```
/**
 * @author amaidment
 */
public class JInternalFrameToy {

  public static void main(String[] args) {
    // create top-level frame
    final JFrame frame = new JFrame("JInternalFrame Toy");
    frame.setPreferredSize(new Dimension(500, 500));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // create desktop pane
    final JDesktopPane pane = new JDesktopPane();

    // put button on the base of the desktop pane
    JButton button = new JButton("Create Internal Frame");
    button.setSize(new Dimension(100,100));
    button.setVisible(true);
    button.setLocation(0, 0);
    button.setSelected(true);
    pane.add(button);
    frame.setContentPane(pane);

    button.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        // create internal frame
        JInternalFrame internal = new JInternalFrame("Internal Frame", 
          true, true, false, false);
        JLabel label = new JLabel("Hello world!");

        // set size of internal frame
        Dimension parentSize = pane.getParent().getSize();
        Insets insets = internal.getInsets();
        Point point = pane.getMousePosition();
        int width = parentSize.width - (insets.left+insets.right) - point.x;
        int height = parentSize.height - (insets.top+insets.bottom) -  point.y;
        label.setPreferredSize(new Dimension(width, height));

        internal.setContentPane(label);
        internal.setLocation(point);
        internal.pack();
        internal.setVisible(true);
        pane.add(internal);
        internal.toFront();
      }
    });

    frame.pack();
    frame.setVisible(true);
  }
} 
```

如果您运行它，您将看到，内部弹出窗口的大小适合宽度，但不适合高度 - 即高度超过框架大小...`JInternalFrame`标题栏的高度。因此，我想找出这个高度，以便我可以`JInternalFrame`适当地设置大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:40:53.390

到目前为止我想出的最好的......

```
Dimension parentSize = pane.getParent().getSize();
// get the initial preferred size - this has to be done before setContentPane()
// the height should, I think, be the border + height of the title bar
// the width is based on the title name, icon, etc. so is not useful
Dimension initSize = internal.getPreferredSize(); 

// then get the insets, which can be used for the horizontal border
Insets insets = internal.getInsets();

Point point = pane.getMousePosition();
int width = parentSize.width - (insets.left+insets.right) - point.x;
int height = parentSize.height - initSize.height -  point.y;
label.setPreferredSize(new Dimension(width, height)); 
```

不确定这是否是最好的方法，所以仍然欢迎其他答案或建议的改进......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:18:42.527

你可以尝试类似的东西

```
( (javax.swing.plaf.basic.BasicInternalFrameUI) getUI()).getNorthPane().getPreferredSize(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T16:31:29.287

你能调用那个特定 JComponent 的 getHeight() 吗？[见文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#getHeight%28%29)

# c# - 在类库项目中添加 WCF 服务引用，并在使用该类库的网站中添加相同的 WEF 引用。

> ID：12803966
> 
> 赞同：1
> 
> 时间：2012-10-09T16:01:13.310
> 
> 标签：c#, wcf, web-services, class-library

我真的陷入了困境，并会尝试部分解释。

1：我有一个有一些服务的 WCF 类库项目。

2：我有一个类库项目。

3：我有一个使用类库项目的网站。

4：**类库有来自 WCF 类库项目的服务引用，同样的 WCF 引用也添加到网站**

5：当我建立网站时，出现以下错误。

> 错误 1113 Reference.svcmap：无法为服务引用“VPServices”生成代码。无法导入 wsdl：portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：引用类型列表包含多个类型，命名空间“http://”中的数据协定名称为“VpResponseData” schemas.datacontract.org/2004/07/VPExternalCalls.CoreApi.MessageDefinitions'。需要排除除以下类型之一之外的所有类型。只有匹配的类型可以是有效的引用：
> 
> “WebApplication.Helpers.Class.ResponseData，WebApplication.Helpers，版本=1.0.0.0，文化=中性，PublicKeyToken=null”（匹配）“VPExternalCalls.CoreApi.MessageDefinitions.VpResponseData，VPExternalCalls，版本=1.0.0.0，文化=中性, PublicKeyToken=559d4289d6c6d138" (匹配) XPath 到错误源: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IVPServices'] 无法导入 wsdl:binding详细信息：导入 wsdl:binding 所依赖的 wsdl:portType 时出错。wsdl:portType 的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IVPServices'] 错误源的 XPath：//wsdl:definitions[@ targetNamespace='http://tempuri.org/']/wsdl:binding[@name=' BasicHttpBinding_IVPServices'] 无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='BasicHttpBinding_IVPServices'] 错误源的 XPath: //wsdl:definitions[@ targetNamespace='http://tempuri.org/']/wsdl:service[@name='VPServices']/wsdl:port[@name='BasicHttpBinding_IVPServices'] App_WebReferences/VPServices/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:52:59.933

我遇到过类似的错误，我首选的解决方案是完全摆脱服务引用并编写自己的简单代理客户端。

如果您必须保留导入服务引用，您可以尝试以下操作：在服务引用导入对话框中，单击高级按钮（或右键单击现有引用并从上下文菜单中选择“配置服务引用”。在高级属性对话框中，取消选中“在引用程序集中重用类型”框：

![对话](../Images/33d6f98ecd3afad9268be521d28eb215.png)

对两个服务引用执行此操作，重新编译，看看是否能解决问题。如果您发现需要某些引用类型，则需要使用“在指定程序集中重用类型”有选择地重新启用它们，但通常您可以在不重用任何引用类型的情况下使用服务引用。

# c# - 如何在 ViewModel 类中执行 ComboboxSelectionChanged 方法

> ID：12803968
> 
> 赞同：0
> 
> 时间：2012-10-09T16:01:33.557
> 
> 标签：c#, wpf, mvvm, combobox, viewmodel

我的 xaml 文件中有 2 个组合框。基本上，当我们双击 xaml 文件中的组合框时，它会在 xaml.cs 文件中创建一个 combobox_selectionchanged 事件。我已经这样做了：

**查看类：**

```
<ComboBox Height="23" ItemsSource="{Binding BusRateList}" SelectedItem="{Binding SelectedBusRateItem}" SelectedIndex="2"  Name="comboBox2" SelectionChanged="comboBox2_SelectionChanged" />

<ComboBox Height="23" ItemsSource="{Binding BaudRateList}" SelectedItem="{Binding SelectedBaudRateItem}" SelectedIndex="6" Name="comboBox3" SelectionChanged="comboBox3_SelectionChanged" /> 
```

**查看.xaml.cs 文件：**

```
private void comboBox2_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        int id = Convert.ToInt32(comboBox2.SelectedIndex);            
        int speed = mI2c._busRate[id]; //mI2C is object of viewmodel class

        sendBuf[0] = Convert.ToByte((speed & 0xFF000000) >> 24);
        sendBuf[1] = Convert.ToByte((speed & 0x00FF0000) >> 16);
        sendBuf[2] = Convert.ToByte((speed & 0x0000FF00) >> 8);
        sendBuf[3] = Convert.ToByte(speed & 0x000000FF);

        cmd = (256 << 8 | 0x00);
        mCom.WriteInternalCommand(cmd, 4, ref sendBuf);

        ReadBusAndBaudRate();            
    }

private void comboBox3_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        int id = Convert.ToInt32(comboBox3.SelectedIndex);            
        int speed = mI2c._baudRate[id]; //mI2C is object of viewmodel class
        sendBuf[0] = Convert.ToByte((speed & 0xFF000000) >> 24);
        sendBuf[1] = Convert.ToByte((speed & 0x00FF0000) >> 16);
        sendBuf[2] = Convert.ToByte((speed & 0x0000FF00) >> 8);
        sendBuf[3] = Convert.ToByte(speed & 0x000000FF);

        cmd = (256 << 8 | 0x00);
        mCom.WriteInternalCommand(cmd, 4, ref sendBuf);

        ReadBusAndBaudRate();
    }

public void ReadBusAndBaudRate()
    {          

        int speed = 100;

        // Some Code

        textBox1.Text = speed.ToString();

        textBox2.Text = speed.ToString();

        // Update message in Output Window as Effective Baud Rate
    } 
```

**视图模型类：**

```
public ObservableCollection<int> _busRate;
public ObservableCollection<int> BusRateList
    {
        get { return _busRate; }
        set
        {
            _busRate = value;
            NotifyPropertyChanged("BusRateList");
        }
    }

    private int _selectedBusRate;
    public int SelectedBusRateItem
    {
        get { return _selectedBusRate; }
        set
        {
            _selectedBusRate = value;
            NotifyPropertyChanged("SelectedBusRateItem");
        }
    }      

    public ObservableCollection<int> _baudRate;
    public ObservableCollection<int> BaudRateList
    {
        get { return _baudRate; }
        set
        {
            _baudRate = value;
            NotifyPropertyChanged("BusRateList");
        }
    }

    private int _selectedBaudRate;
    public int SelectedBaudRateItem
    {
        get { return _selectedBaudRate; }
        set
        {
            _selectedBaudRate = value;
            NotifyPropertyChanged("SelectedBaudRateItem");
        }
    } 
```

我在 viewmodel 构造函数的两个组合框中添加了大约 8 个项目。

现在使用上述属性，我想在 viewmodel 类中执行组合框选择更改事件，该事件应该执行在我的 .cs 文件中完成的所有语句。

请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:18:39.320

如果您希望用户界面在没有选择更改事件的情况下更新您的视图模型，只需将双向绑定添加到您的选定项。这将使您进入具有您想要使用的值的视图模型。这是一个例子：

```
<ComboBox Height="23" ItemsSource="{Binding BusRateList}" SelectedItem="{Binding SelectedBusRateItem,Mode=TwoWay}" SelectedIndex="2"  Name="comboBox2"  /> 
```

编辑：您要执行的语句将在您的属性中，因此在 SelectedBusRate 中调用 SetBusRate()，如果 Busrate 可能受到影响，则调用 SelectedBaudRate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:28:04.597

使用 ReadBusAndBaudRate() 方法更新视图模型并在 SelectedItem 属性集中调用此方法

```
public int SelectedBusRateItem
    {
        get { return _selectedBusRate; }
        set
        {
            _selectedBusRate = value;
             ReadBusAndBaudRate();
            NotifyPropertyChanged("SelectedBusRateItem");
        }
    }
    private int _selectedBaudRate;
    public int SelectedBaudRateItem
    {
        get { return _selectedBaudRate; }
        set
        {
            _selectedBaudRate = value;
            ReadBusAndBaudRate();
            NotifyPropertyChanged("SelectedBaudRateItem");
        }
    }

    private int _speed;
    public int Speed
    {
        get { return _speed; }
        set
        {
            _speed = value;
            NotifyPropertyChanged("Speed");
        }
    }

    private void ReadBusAndBaudRate()
    {
        //Do some code
        Speed = 10; // will be your logical value.
        //For message notifications use MVVM frameworks such as cinch by Sacha Barber
    } 
```

*   使用绑定模式和文本框绑定更新 xaml 以提高速度

*   将 mcom 的方法添加为

    ```
     public int SelectedBaudRateItem
        {
            get { return _selectedBaudRate; }
            set
            {
                _selectedBaudRate = value;                   
                WriteMcomCommand(_selectedBaudRate );
                ReadBusAndBaudRate();
                NotifyPropertyChanged("SelectedBaudRateItem");
            }
        }    
        private void WriteMcomCommand(int id)
        {
        int speed = mI2c._busRate[id]; //mI2C is object of viewmodel class

        sendBuf[0] = Convert.ToByte((speed & 0xFF000000) >> 24);
        sendBuf[1] = Convert.ToByte((speed & 0x00FF0000) >> 16);
        sendBuf[2] = Convert.ToByte((speed & 0x0000FF00) >> 8);
        sendBuf[3] = Convert.ToByte(speed & 0x000000FF);

        cmd = (256 << 8 | 0x00);
        mCom.WriteInternalCommand(cmd, 4, ref sendBuf);
        } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:00:37.630

使用触发器和命令，例如

```
<ComboBox Height="23" ItemsSource="{Binding BusRateList}" SelectedItem="{Binding SelectedBusRateItem,Mode=TwoWay}" SelectedIndex="2"  Name="comboBox2"  >
  <i:Interaction.Triggers>
                    <i:EventTrigger EventName="SelectionChanged">
                    <Command:EventToCommand Command="{Binding SelectionChangedCommand}" PassEventArgsToCommand="True" />
                </i:EventTrigger>
                </i:Interaction.Triggers>
</ComboBox> 
```

然后将视图模型中的命令连接到方法，例如

```
public ICommand SelectionChangedCommand { get; set; }

SelectionChangedCommand = new RelayCommand<SelectionChangedEventArgs>((e) => MyMethod(e)); 
```

您还需要将以下内容添加到 XAML 中的命名空间：

xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"

如果你想使用 RelayCommands，你还需要 MVVM Lite。

# c# - Web 浏览器控件 - 收缩 HTML 内容

> ID：12803970
> 
> 赞同：1
> 
> 时间：2012-10-09T16:01:40.313
> 
> 标签：c#, webbrowser-control

我有一个可以加载的网页，但它太大了。我想缩小加载的内容。我怎样才能做到这一点？谷歌搜索只真正显示如何增加浏览器控件的大小以适应页面。我想做相反的事情。

# asp.net - 在没有 UrlScan 的情况下删除/隐藏/禁用 Azure/IIS7 中过多的 HTTP 响应标头

> ID：12803972
> 
> 赞同：87
> 
> 时间：2012-10-09T16:01:42.830
> 
> 标签：asp.net, iis-7, azure, penetration-testing, response-headers

我需要删除[过多的标题](http://www.troyhunt.com/2012/02/shhh-dont-let-your-response-headers.html)（主要是为了通过渗透测试）。我花时间研究了涉及运行 UrlScan 的解决方案，但这些解决方案很麻烦，因为[每次启动 Azure 实例时都需要安装 UrlScan](https://serverfault.com/a/364939/140297)。

Azure 必须有一个很好的解决方案，它不涉及从 startup.cmd 部署安装程序。

我了解响应标头添加在[不同的位置](https://stackoverflow.com/questions/11155176/removing-headers-from-the-response)：

*   **服务器**：由 IIS 添加。
*   **X-AspNet-Version**：由 System.Web.dll 在 HttpResponse 类中 Flush 时添加
*   **X-AspNetMvc-Version**：由 MvcHandler 在 System.Web.dll 中添加。
*   **X-Powered-By** : 由 IIS 添加

有什么方法可以配置（通过 web.config 等？） IIS7 来删除/隐藏/禁用 HTTP 响应标头以避免[asafaweb.com](https://asafaweb.com/)上的“过多标头”警告，而无需创建 IIS 模块或部署需要的安装程序每次 Azure 实例启动时运行？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-09T16:01:42.830

以下更改允许您在 Azure 中删除这些 HTTP 响应标头，*而无需*编写自定义 HttpModule。

网上的大部分信息都已过时，并且涉及 UrlScan（它已被集成到 IIS7 中，但已`RemoveServerHeader=1`删除该选项）。下面是我找到的最简洁的解决方案（感谢[这个博客](http://www.davidaiken.com/2011/10/04/hiding-response-headers/)、[这个答案](https://stackoverflow.com/a/7338448/590558)和[这个博客](http://www.bugwriter.me/2010/01/removing-unnecessary-http-header-server.html)的结合）。

~~要删除**Server**，请转到 Global.asax，找到/创建`Application_PreSendRequestHeaders`事件并添加以下内容（感谢[BK](https://stackoverflow.com/a/7338448/590558)和[此博客](http://www.bugwriter.me/2010/01/removing-unnecessary-http-header-server.html)，这在 Cassini / local dev 上也不会失败）：~~

2014 年 4 月编辑：您可以将 PreSendRequestHeaders 和 PreSendRequestContext 事件与本机 IIS 模块一起使用，但不要将它们与实现 IHttpModule 的托管模块一起使用。设置这些属性可能会导致[异步请求](http://www.asp.net/aspnet/overview/web-development-best-practices/what-not-to-do-in-aspnet,-and-what-to-do-instead#presend)出现问题。正确的版本是使用 BeginRequest 事件。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        var application = sender as HttpApplication;
        if (application != null && application.Context != null)
        {
            application.Context.Response.Headers.Remove("Server");
        }
    } 
```

要删除**X-AspNet-Version**，请在 web.config 中查找/创建`<system.web>`并添加：

```
 <system.web>
    <httpRuntime enableVersionHeader="false" />

    ... 
```

要删除**X-AspNetMvc-Version**，请转到 Global.asax，找到/创建`Application_Start`事件并添加如下一行：

```
 protected void Application_Start()
  {
      MvcHandler.DisableMvcResponseHeader = true;
  } 
```

要删除**X-Powered-By**，请在 web.config 中查找/创建`<system.webServer>`并添加：

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <remove name="X-Powered-By" />
      </customHeaders>
    </httpProtocol>

    ... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-11T16:39:25.993

MSDN 发布[了这篇](https://blogs.msdn.microsoft.com/jpsanders/2015/10/07/remove-server-and-x-powered-by-headers-from-your-azure-mobile-apps/)关于如何在 Azure 网站上隐藏标题的文章。您现在可以通过向 system.webServer 添加条目来隐藏 web.config 中的服务器

```
<security>
      <requestFiltering removeServerHeader ="true" />
</security> 
```

VS 会皱眉认为上述无效。上面的链接有代码作为图片，很难找到。MVC 版本仍然像上面一样隐藏在应用程序启动中，对于 x-powered-by 和 .Net 版本也是如此。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T19:29:14.517

NuGet 上还有一个包可帮助您通过几行配置实现此目标，并且无需更改代码：NWebsec。可以在此处找到有关删除版本标头的文档：[https ://github.com/NWebsec/NWebsec/wiki/Suppressing-version-headers](https://github.com/NWebsec/NWebsec/wiki/Suppressing-version-headers)

它在这里演示：[http](http://www.nwebsec.com/HttpHeaders/VersionHeaders) ://www.nwebsec.com/HttpHeaders/VersionHeaders （在 Azure 中）

免责声明：我是该项目的开发人员。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-11T22:06:14.437

## 尼克埃文斯的回答是完美的，但是......

如果出于**安全**目的删除这些标题，请不要忘记更改`ASP.NET Session coockie name`！因为当你看到这个时更容易猜出使用的语言或服务器版本：

[![在此处输入图像描述](../Images/5154eb32b67b15fbe125975b188944b2.png)](https://i.stack.imgur.com/iOzLC.png)

**更改 cookie 名称：（**有创意）

```
<system.web>
  <sessionState cookieName="PHPSESSID" />
</system.web> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-24T04:07:54.370

汇总来自 @giveme5minutes 和 @AKhooli 的先前答案，因为它们与 Azure 网站以及扫描仪想要查看的其他一些项目有关，这些是我为使 ASafaWeb 对 Azure 站点感到满意所做的更改。

它仍然抱怨 Azure 关联标头 cookie 不只是 https，但关联是您想要重放的 cookie 类型，对吧？

```
<system.web>
    <compilation debug="false">
    <httpRuntime enableVersionHeader="false" />
    <httpCookies httpOnlyCookies="true" requireSSL="true" />    
    <customErrors mode="RemoteOnly" defaultRedirect="~/Error.aspx" />
</system.web>

<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="X-Frame-Options" value="DENY" />
        <remove name="X-Powered-By" />
      </customHeaders>
    </httpProtocol>
    <security>
      <!--removes Azure headers-->
      <requestFiltering removeServerHeader="true" />
    </security>
</system.webServer> 
```

# asp.net - 可以在同一个 Cassini 调试会话中同时拥有 ASP 和 ASP.NET 吗？

> ID：12803981
> 
> 赞同：1
> 
> 时间：2012-10-09T16:02:12.627
> 
> 标签：asp.net, visual-studio-2010, iis, asp-classic, cassini

我正在对 asp.net 进行一些调试，并注意到我在同一个项目中的经典 asp 东西在使用 Visual Studio 2010 SP1Rel 的 windows xp sp3 上的 cassini 中不起作用。我是否需要将 vbrun.dll 添加到 cassini，或者甚至可以在 cassini 调试会话中调试经典的 asp 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:04:46.030

Cassini 网络服务器不运行经典 ASP

您可以使用此链接，因为它已在下面回答：-

[在 Visual Studio 2010 中调试经典 ASP](https://stackoverflow.com/questions/3453762/debugging-classic-asp-in-visual-studio-2010)

# c++ - 使用 SIGABRT 信号处理程序挂起的进程

> ID：12803986
> 
> 赞同：0
> 
> 时间：2012-10-09T16:02:31.810
> 
> 标签：c++, linux, linux-kernel, scheduling

我在处理 SIGABRT 信号时遇到了信号处理程序的问题。在处理 SIGABRT 时，信号处理程序无法调度。因此，在有人收到 SIGABRT 后，其他线程无法运行。这会导致程序不正确的崩溃。但是，在处理 SIGSEGV 时，它被正确调度并且其他线程能够运行。

收到信号后，我将一些恢复机制发布到另一个线程。对于 sigsegv 它正在执行，对于 SIGABRT 它不是因为线程本身没有被调度。

仅供参考：我正在为具有> 150个线程的进程使用基于优先级的RR调度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:07:52.127

ABRT 信号不能被阻塞。您可以安装处理程序，但处理程序不得返回（即它必须终止进程，通常通过调用`std::exit`or `_Exit`）。如果它确实返回，则将再次引发信号并安装默认处理程序（这将终止您的程序）。

相比之下，SEGV 是一个普通信号，您可以捕获、处理和阻止，但由于您无法修复典型 SEGV 的*根本原因*，因此您无法真正明智地从中恢复。但是您仍然可以同时执行大量代码。

# objective-c - UICollectionView 页脚中的 UIButton

> ID：12803988
> 
> 赞同：1
> 
> 时间：2012-10-09T16:02:40.573
> 
> 标签：objective-c, ios6

我是使用 UICollectionView 的新手。我已经使用流布局在集合视图中创建了一个页脚部分，并希望在其中添加一个 UIButton。我怎样才能做到这一点？

```
[flowLayout setFooterReferenceSize:CGSizeMake (320,50)]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T02:35:05.613

您提供页脚视图的方式与通过 UICollectionViewDataSource 对象提供单元格视图的方式相同。唯一的区别在于您覆盖的单元格视图和您覆盖`[UICollectionViewDataSource collectionView:cellForItemAtIndexPath:]`的页脚视图`[UICollectionViewDataSource collectionView:viewForSupplementaryElementOfKind:atIndexPath:]`。

如果要通过 Interface Builder 配置页脚视图，请执行以下操作：

1.)`UICollectionViewController`在 IB 中选择您的 collectionView。

2.) 单击右侧面板中的属性检查器按钮。

3.) 在“集合视图”部分启用名为“部分页脚”的单选按钮

这将向您的 collectionView 添加一个页脚子视图，您可以将 UIButton 拖放到该子视图中。

此外，如果您将`UICollectionViewFlowLayout`其用作布局对象，则需要设置其 footerReferenceSize 属性，以便它知道页脚应该有多大。如果您不设置此属性，则不会显示页脚。

# objective-c - 在 Objective-C 中启动 dscutil

> ID：12803989
> 
> 赞同：1
> 
> 时间：2012-10-09T16:02:43.947
> 
> 标签：objective-c, command-line, terminal, arguments, dscl

我将如何`dscl`在 Objective-C 中使用并获得其输出？我想像在终端中一样传递的命令是：

```
dscl . -readall /Users UniqueID | awk '/^RecordName:/ {name=$2}; /^UniqueID: / {if ($2 > 500) print name}' 
```

我知道如何使用 -xml 等参数启动 system_profiler，但我不知道如何在实际工作的地方传递这么长的字符串。

我知道 system_profiler 是 /usr/sbin/system_profiler，但是 dscl 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:13:45.180

最好的办法是像启动 shell 脚本一样启动它。要么将它作为文件中的 shell 脚本粘贴到您的项目中，要么用于编写`NSTask`调用 /bin/sh 的命令行，将命令作为字符串传递以允许`sh`解析它。

IE`/bin/sh -c ".... your command string ...."`

# c# - 投射会话变量 - ViewBag MVC4 - 投射

> ID：12803991
> 
> 赞同：1
> 
> 时间：2012-10-09T16:02:50.243
> 
> 标签：c#, asp.net-mvc

编程新手，我想在 asp.net MVC 中使用 c# 从表中获取一个单元格的值；这是我正在尝试的：

```
 DALEntities db = new DALEntities();
  var duration = db.MyTable.Where(c => c.Day == date && c.ID == id).Select(c => c.Duration);
            Session["duration"] = duration; 
```

将数据获取到我使用的视图中，在控制器中： var temp = Session["duration"]; ViewBag.Duration = temp;

在视图中：

```
 @ViewBag.Duration 
```

我明白了

```
System.Data.Objects.ObjectQuery`1[System.String] 
```

我会很感激你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:05:23.463

您可以在最后调用 a`.First()`以急切地执行查询并获得与此条件匹配的单个结果：

```
var duration = db
    .MyTable
    .Where(c => c.Day == date && c.ID == id)
    .Select(c => c.Duration)
    .First(); 
```

不过要小心，因为如果没有与您的`.Where()`子句匹配的记录，`.First()`扩展方法将引发异常。在这种情况下，您可以考虑使用该`.FirstOrDefault()`方法。

我也非常强烈建议您在学习 Entity Framework**之前学习**[基本的 LINQ ，并且主要是](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b) **在**学习 ASP.NET MVC 之前。否则，您将在使用 ASP.NET MVC 时遇到很多困难。我还建议人们孤立地学习单独的框架，而不是将它们混合在一起。一旦你熟悉了它们，你就可以混合在一个项目中。

# c# - 如何使用 ASP.NET 显示消息和发送文件

> ID：12803994
> 
> 赞同：2
> 
> 时间：2012-10-09T16:03:20.537
> 
> 标签：c#, asp.net

我在文件中生成一组字母，但如果有错误，则文件可能不完整。我还是想发送文件，但会向用户发出警告。所以我有这个：

```
 string errMessage;
        string filePath = CCGTMarblox.Admin.Helpers.DocumentHelper.GenerateRejectionLetters(grantIDs, out errMessage);

        if (!String.IsNullOrEmpty(errMessage))
        {
            ScriptManager.RegisterStartupScript(Page, Page.GetType(), "problem", String.Format("alert('{0}');", errMessage), true);
        }

        if (filePath != null)
        {
            System.IO.FileInfo fileInfo = new System.IO.FileInfo(filePath);
            Response.ClearHeaders();
            Response.AddHeader("Content-Disposition", string.Format(@"attachment; filename=""{0}""", fileInfo.Name));
            Response.AddHeader("Content-Length", fileInfo.Length.ToString());
            Response.ContentType = "application/octet-stream";
            Response.TransmitFile(fileInfo.FullName);
            Response.Flush();
        } 
```

问题是当包含下载文件的代码时没有显示警报 - 标头被清除，就像一个新的响应。有什么办法可以发送脚本和文件吗？我尝试将 Response.Redirect 重定向到检索文件的页面，但这也不起作用。

实际上，我最后所做的是发送另一个启动脚本，该脚本执行与我在问题中尝试的重定向类似的任务。（我已经有一个处理下载的页面）。

**编辑（在接受答案后添加）**

```
string script = String.Format("window.location = '{0}';", url);        
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "goToDownload", script, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:09:44.560

我建议有一个页面来指示用户文件下载将很快开始，并且在此页面中，您可以显示任何警告。

此页面将使用 JS / 元刷新对文件发出单独的请求并继续下载。如果下载未在指定时间开始，您可能还需要提供直接链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:10:20.443

您不能在单个 GET 中返回 HTML 和另一个响应（用于文件流）。

您可以返回 HTML 并在此处提供下载文件的链接。

# eclipse - 在 Eclipse-Indigo 上安装新软件

> ID：12803999
> 
> 赞同：0
> 
> 时间：2012-10-09T16:03:28.030
> 
> 标签：eclipse, software-update

尝试使用 Eclipse Indigo 安装新软件时，我得到

![在此处输入图像描述](../Images/16d3a686d816d83bbc52e8dfb101b28c.png)

日志文件说：

> 找不到正在运行的配置文件实例。eclipse.p2.data.area 和 eclipse.p2.profile 属性可能未在此应用程序的 config.ini 文件中正确设置。

无论如何，这里是

```
org.eclipse.update.reconcile=false
eclipse.p2.profile=epp.package.jee
osgi.instance.area.default=@user.home/Documents/workspace
osgi.framework=file\:plugins/org.eclipse.osgi_3.7.2.v20120110-1415.jar
equinox.use.ds=true
eclipse.buildId=M20120208-0800
osgi.bundles=reference\:file\:org.eclipse.equinox.simpleconfigurator_1.0.200.v20110815-1438.jar@1\:start
org.eclipse.equinox.simpleconfigurator.configUrl=file\:org.eclipse.equinox.simpleconfigurator/bundles.info
eclipse.product=org.eclipse.platform.ide
osgi.splashPath=platform\:/base/plugins/org.eclipse.platform
osgi.framework.extensions=reference\:file\:javax.transaction_1.1.1.v201105210645.jar
eclipse.application=org.eclipse.ui.ide.workbench
eclipse.p2.data.area=@config.dir/../p2
osgi.bundles.defaultStartLevel=4 
```

请问我错过了什么？

**eclipse.p2.data.area 似乎已定义**

```
eclipse.p2.data.area=@config.dir/../p2 
```

**eclipse.p2.profile 似乎已定义**

```
eclipse.p2.profile=epp.package.jee 
```

这是一个全新的安装。没有对上述任何内容进行手动更改。请问为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:13:34.827

Unarchiver 似乎有一个错误。手动解压缩包，一切都像魅力一样工作：

```
tar -xvf eclipse-jee-indigo-SR2-macosx-cocoa-x86_64.tar 
```