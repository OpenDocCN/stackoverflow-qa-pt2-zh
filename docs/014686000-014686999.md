# StackOverflow 问答 14686000-14686999

# python - 根据特定行将文件从一个目录移动到另一个目录

> ID：14686001
> 
> 赞同：0
> 
> 时间：2013-02-04T11:39:07.727
> 
> 标签：python, bash, awk, grep

我在目录中有一些文本文件。我想读取这个目录中的所有文件，如果文件有以下行

`SAMPLE 350 AN INTEGER OF TYPE :DECIMAL : CAN BE ASSEMBLED BY` 将该文件及其所有内容移动到另一个目录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:45:02.653

使用`find`和`grep`：

```
$ find . -type f -exec \
  fgrep -l "SAMPLE 350 AN INTEGER OF TYPE :DECIMAL : CAN BE ASSEMBLED BY" {} \; \
  | xargs -i%  mv % /path/to/new/dir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:07:52.873

这在 bash 中很容易：

```
grep -l "PATTERN" * 
```

为您提供当前目录中包含 PATTERN 的文件列表。因此，除非您有太多文件，否则您可以这样做：

```
mv `grep -l "SAMPLE 350 AN INTEGER OF TYPE :DECIMAL : CAN BE ASSEMBLED BY"` /another/directory 
```

反引号（它们不是普通引号）执行命令并将其替换为输出（在本例中为文件列表）。您可以使用 $(command) 而不是反引号。所以你也可以写：

```
mv $(grep -l "SAMPLE 350 AN INTEGER OF TYPE :DECIMAL : CAN BE ASSEMBLED BY") /another/directory 
```

如果您有很多文件，bash 可能无法扩展那么多文件（您将达到命令大小的限制......它很多）。然后，您必须求助于 xargs：

```
grep -l "SAMPLE 350 AN INTEGER OF TYPE :DECIMAL : CAN BE ASSEMBLED BY" | xargs -i mv {} /another/directory 
```

-i 到 xargs 意味着它将从 grep （匹配的文件名）的输出中一次取一行，并且 {} 所在的位置将扩展为该文本并且命令将运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:39:09.007

这是python中的解决方案。os.path.isdir() 是绕过子目录所必需的。如果从源目录运行此 .py 脚本，则需要“and file[-3:] != '.py'”。或者，如果您需要移动 .py 文件，您可以只检查脚本的名称。

```
import os
import shutil

src = '/source'
dst = '/destination'
pattern = 'SAMPLE 350 AN INTEGER OF TYPE :DECIMAL : CAN BE ASSEMBLED BY'
for file in os.listdir(src):
  if not os.path.isdir(file):
    f = open(file)
    for line in f:
      if pattern in line and file[-3:] != '.py':
        f.close()
        shutil.move(file,dst)
        break
    f.close() 
```

# ruby-on-rails - capybara/rspec：GET/PUT 测试应该在不同的文件中吗？

> ID：14686006
> 
> 赞同：3
> 
> 时间：2013-02-04T11:39:29.300
> 
> 标签：ruby-on-rails, rspec, capybara, railstutorial.org

我正在关注[Ruby on Rails 教程](http://ruby.railstutorial.org/)，现在我需要为授权代码编写测试，例如确保用户只能编辑他们自己的配置文件。

有两个动作要测试。一是确保用户无法访问编辑其他用户个人资料的页面。这很简单，在水豚中进行了简单的“功能”测试。

但我当然也想测试 PUT 操作，这样用户就无法绕过编辑页面手动提交 PUT 请求。根据我的阅读，这应该作为 rspec“请求”测试来完成。

现在我的问题是，我必须在不同的目录中维护它们吗？（规格/功能与规格/请求）？这听起来不对，因为这两个场景密切相关。在 Rails 中通常如何进行此类测试？

例如，

```
describe "as wrong user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
  before { sign_in user }

  describe "visiting Users#edit page" do
    before { visit edit_user_path(wrong_user) }
    it { should_not have_selector('title', text: full_title('Edit user')) }
  end

  describe "submitting a PUT request to the Users#update action" do
    before { put user_path(wrong_user) }
    specify { response.should redirect_to(root_path) }
  end
end 
```

第二个测试在 capybara 2.x 中不起作用，因为不再支持“put”。它必须是请求测试。现在我必须编写第二个“sign_in”方法，因为当前使用的方法仅可用于功能测试。闻起来像很多代码重复。

========我的解决方案========

在弄清楚如何登录请求测试后，感谢 Paul Fioravanti 的回答，

```
 before do
      post sessions_path, email: user.email, password: user.password
      cookies[:remember_token] = user.remember_token
    end 
```

我将所有测试更改为请求测试。所以我不必将它们分成不同的文件。尽管我认为这更清洁，但保罗的解决方案也可以使用。

```
describe 'authorization' do
  describe 'as un-signed-in user' do
    let(:user) { FactoryGirl.create(:user) }

    describe 'getting user edit page' do
      before { get edit_user_path(user) }

      specify { response.should redirect_to(signin_path) }
    end

    describe 'putting to user update page' do
      before { put user_path(user) }

      specify { response.should redirect_to(signin_path) }
    end
  end

  describe 'as wrong user' do
    let(:user) { FactoryGirl.create(:user) }
    let(:wrong_user) { FactoryGirl.create(:user, email: 'wrong@example.com') }

    before do
      post sessions_path, email: user.email, password: user.password
      cookies[:remember_token] = user.remember_token
    end

    describe 'getting user edit page' do
      before { get edit_user_path(wrong_user) }

      specify { response.should redirect_to(root_path) }
    end

    describe 'putting to user update page' do
      before { put user_path(wrong_user) }

      specify { response.should redirect_to(root_path) }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:21:45.983

在完成 Rails 教程并将示例应用程序升级到 Capybara 2.0 后，我最终经历了拆分请求和功能规范的艰巨过程。既然您说您目前仍在做本教程，我建议您只保留 Hartl 指定的 gem（Capybara 1.1.2），完成您的示例应用程序，然后返回请求/功能问题作为重构锻炼。不过，供您参考，这就是我最终编写“错误用户”授权规范的方式：

**规范/支持/实用程序.rb**

```
def sign_in_through_ui(user)
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign In"
end

def sign_in_request(user)
  post session_path(email: user.email, password: user.password)
  cookies[:remember_token] = user.remember_token
end

RSpec::Matchers::define :have_title do |text|
  match do |page|
    Capybara.string(page.body).has_selector?('title', text: text)
  end
end 
```

**规范/功能/authentication_pages_spec.rb**

```
describe "Authentication on UI" do

  subject { page }
  # ...
  describe "authorization" do
    # ...
    context "as a wrong user" do
      let(:user)       { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }

      before do
        visit root_path
        click_link "Sign In"
        sign_in_through_ui(user)
      end

      context "visiting Users#edit" do
        let(:page_title) { full_title("Edit User") }
        before { visit edit_user_path(wrong_user) }
        it { should_not have_title(page_title) }
      end
    end
  end
end 
```

**规范/请求/authentication_requests_spec.rb**

```
describe "Authentication Requests" do

  subject { response }
  # ...
  describe "authorization" do
    # ...
    context "as a wrong user" do
      let(:user)       { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }

      before { sign_in_request(user) }

      context "PUT Users#update" do
        before { put user_path(wrong_user) }
        it { should redirect_to(root_url) }
      end
    end

  end
end 
```

在试图弄清楚如何将我的`feature`规格与我的`request`规格分开时，我主要使用以下两个链接作为参考：

*   [rspec-rails 和 capybara 2.0：你需要知道的](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)
*   [rspec-rails Capybara 页面](https://github.com/rspec/rspec-rails/blob/master/Capybara.md)

### 更新：

如果您不想要自定义 RSpec 匹配器，您还可以在上面的测试中使用以下内容在`title`元素上获得相同的结果：

```
its(:source) { should have_selector('title', text: page_title) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:43:25.900

根据 Jnicklas ( [https://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara) )，您应该将您在 spec/requests 中的所有 Capybare 规范移动到规范/功能，因为 Capybara 2.x 现在将使用规范/功能。因此，这意味着一旦您将 Capybara 规范移至功能，您就可以从规范/请求目录中完全删除这些规范。

就个人而言，我已经毫无问题地完成了 Ruby on Rails 教程。我使用 Capybara 2.x 并且从未使用过规范/功能（只是“旧”规范/请求）。对于 Rspec 2.x 支持，您必须将 require >'capybara/rspec'< 添加到您的 spec_helper.rb 文件中。没有它，您的测试可能会失败。

编辑：

我刚刚阅读了 Rspec 文档。如果您在规范中使用 Capybara，则必须将这些规范移至规范/功能。如果没有涉及 Capybara，则规范可以简单地保留在您的请求目录中。

功能规格 [https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/feature-specs/feature-spec](https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/feature-specs/feature-spec)！

请求规格 [https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/request-specs](https://www.relishapp.com/rspec/rspec-rails/v/2-12-2/docs/request-specs)

更多信息，来自 Rubydoc： [http: //rubydoc.info/github/jnicklas/capybara/master#Using_Capybara_with_RSpec](http://rubydoc.info/github/jnicklas/capybara/master#Using_Capybara_with_RSpec)

# sql - 将两个 SQL 选择合二为一

> ID：14686007
> 
> 赞同：1
> 
> 时间：2013-02-04T11:39:30.067
> 
> 标签：sql, postgresql

我有两个 SQL SELECT COUNT 语句：

```
SELECT COUNT(*) FROM table1 t1 
INNER JOIN table2 t2 ON t2.id = t1.rowid
WHERE t1.flag1 = false AND t2.flag2 = true;

SELECT COUNT(*) FROM table1 t1 
INNER JOIN table2 t2 ON t2.id = t1.rowid
WHERE t1.flag1 = true AND t2.flag2 = false; 
```

可以看出，这两个语句的唯一区别是翻转条件。

但我想要做的是将这两个语句组合成一个，这样输出就变成一个有两列的表，第一列包含第一个语句的结果，第二列包含第二个语句的结果。就像是：

```
 count1   |   count 2
-------------------------
    3456    |     9864 
```

* * *

顺便说一句，我使用 PostgreSQL。有人可以让我知道该怎么做吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:43:50.303

这应该为你做。我对 PostgreSql 不熟悉，但我认为它会起作用。

```
SELECT 
    SUM(CASE WHEN t1.Flag1 = false AND t2.flag2 = true THEN 1 ELSE 0 END) Count1,
    SUM(CASE WHEN t1.Flag1 = true AND t2.flag2 = false THEN 1 ELSE 0 END) Count2
FROM 
    table1 t1 
    INNER JOIN table2 t2 ON t2.id = t1.rowid 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T11:41:53.843

如果你真的需要这种方式（使用两个 sql 查询并将它们组合起来），那么：

```
select * from
 (SELECT COUNT(*) FROM table1 t1 INNER JOIN table2 t2 ON t2.id = t1.rowid WHERE t1.flag1 = false AND t2.flag2 = true) a,
 (SELECT COUNT(*) FROM table1 t1 INNER JOIN table2 t2 ON t2.id = t1.rowid WHERE t1.flag1 = true AND t2.flag2 = false) b 
```

根据您的 SQL，这将是更好的解决方案：

```
select
    sum (case when not t1.flag1 and t2.flag2 then 1 else 0 end) as count1,
    sum (case when t1.flag1 and not t2.flag2 then 1 else 0 end) as count2
FROM 
    table1 t1 
    INNER JOIN table2 t2 ON t2.id = t1.rowid 
```

您还可以将布尔类型转换为整数并缩短 sql (true::int = 1, false::int = 0)：

```
 select 
    sum((flag1::int<flag2::int)::int) count1,
    sum((flag1::int>flag2::int)::int) count2    
 from
    table1 t1 
    join table2 t2 ON t2.id = t1.rowid 
```

因为 true > false 和 false < true （至少在 PostgreSQL 中）你可以写：

```
 select 
    sum((flag1 < flag2)::int) count1,
    sum((flag1 > flag2)::int) count2    
 from
    table1 t1 
    join table2 t2 ON t2.id = t1.rowid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:47:41.273

```
Select * from
(
    SELECT COUNT(*) FROM table1 t1 
    INNER JOIN table2 t2 ON t2.id = t1.rowid
    WHERE t1.flag1 = false AND t2.flag2 = true) tab1,
(
    SELECT COUNT(*) FROM table1 t1 
    INNER JOIN table2 t2 ON t2.id = t1.rowid
    WHERE t1.flag1 = true AND t2.flag2 = false) tab2 
```

# ruby-on-rails - Rails 服务器未启动

> ID：14686010
> 
> 赞同：1
> 
> 时间：2013-02-04T11:39:38.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionpack

`rails server`启动之前运行的 rails 应用程序时出现以下错误。

```
/home/ganesh/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.5/lib/action_dispatch.rb:35:in `require': cannot load such file -- rack (LoadEr
ror)
        from /home/ganesh/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.5/lib/action_dispatch.rb:35:in `<top (required)>'
        from /home/ganesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.5/lib/rails/commands/server.rb:3:in `require'
        from /home/ganesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.5/lib/rails/commands/server.rb:3:in `<top (required)>'
        from /home/ganesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.5/lib/rails/commands.rb:49:in `require'
        from /home/ganesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.5/lib/rails/commands.rb:49:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

如何消除此错误。帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:43:23.653

首先，您使用的是什么服务也很重要。

打开命令窗口并输入：

```
irb --simple-prompt
>> require 'rack'
=> true
>> 
```

如果 rack 不存在，您将收到如下错误：

```
LoadError: no such file to load -- rack 
```

您可以通过打开一个新的命令窗口并输入以下命令来安装 rack：

```
gem install rack 
```

还要检查，**您是否尝试运行该命令**

```
rails s 
```

从您的应用程序文件夹中？

# java - pdfbox 自动换行

> ID：14686013
> 
> 赞同：17
> 
> 时间：2013-02-04T11:39:47.407
> 
> 标签：java, text, pdfbox

我正在使用带有以下代码的 PDFBox：

```
doc = new PDDocument();
page = new PDPage();

doc.addPage(page);
PDFont font = PDType1Font.COURIER;

pdftitle = new PDPageContentStream(doc, page);
pdftitle.beginText();
pdftitle.setFont( font, 12 );
pdftitle.moveTextPositionByAmount( 40, 740 );
pdftitle.drawString("Here I insert a lot of text");
pdftitle.endText();
pdftitle.close(); 
```

有谁知道我如何包装文本以使其自动转到另一行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-06T15:08:25.783

这对我有用。WordUtils 和 split 的组合

```
String[] wrT = null;
String s = null;
text = "Job Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lectus nec ipsum gravida placerat. Fusce eu erat orci. Nunc eget augue neque. Fusce arcu risus, pulvinar eu blandit ac, congue non tellus. Sed eu neque vitae dui placerat ultricies vel vitae mi. Vivamus vulputate nullam.";
wrT = WordUtils.wrap(text, 100).split("\\r?\\n");

for (int i=0; i< wrT.length; i++) {
    contents.beginText();
    contents.setFont(PDType1Font.HELVETICA, 10);
    contents.newLineAtOffset(50,600-i*15);
    s = wrT[i];
    contents.showText(s);
    contents.endText(); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T07:48:00.523

我认为不可能自动换行。但是您可以自己包装文本。请参阅[如何使用 PDFBox drawString 插入换行](https://stackoverflow.com/q/7598099)和[如何使用 PDFbox 创建固定宽度的段落？](https://stackoverflow.com/q/10640152).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-13T14:29:32.757

PdfBox 和 Boxable 都自动换行比单元格宽度长的文本部分，这意味着如果单元格宽度 = 80 句子宽度 = 100 宽度为 20 的文本的剩余部分将从下一行开始（注意：我已经提到宽度（句子消耗的实际空间）而不是长度（字符数））

如果句子宽度 = 60，则需要宽度为 20 的文本来填充单元格的宽度，之后的任何文本都将转到下一行解决方案：用空格填充此宽度 20

单元格的未填充空间 = cellWidth - sentenceWidth, numberOfSpaces = 单元格的未填充空间/单个空间的宽度

```
 private String autoWrappedHeaderText(String text, float cellWidth) {
    List<String> splitStrings = Arrays.asList(text.split("\n"));
    String wholeString = "";
    for (String sentence : splitStrings) {
        float sentenceWidth = FontUtils.getStringWidth(headerCellTemplate.getFont(), " " + sentence + " ",
                headerCellTemplate.getFontSize());
        if (sentenceWidth < cellWidth) {
            float spaceWidth = FontUtils.getStringWidth(headerCellTemplate.getFont(), " ",
                    headerCellTemplate.getFontSize());
            int numberOfSpacesReq = (int) ((cellWidth - sentenceWidth) / spaceWidth);
            wholeString += sentence;
            for (int counter = 0; counter < numberOfSpacesReq; counter++) {
                wholeString += " ";
            }
        }
    }

    return wholeString;
}
cell = headerRow.createCell(cellWidth * 100 / table.getWidth(), headerText, HorizontalAlignment.LEFT, VerticalAlignment.TOP); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T12:58:53.573

我在 pdfBOX 中找到了换行问题的解决方案

通常，您需要三个步骤来换行文本：

1）将每个单词拆分为必须包装的字符串并将它们放入字符串数组中，例如 String [] 部分

2) 使用 (textlength/(一行中的字符数)) 创建一个字符串缓冲区数组，例如 280/70=5 >> 我们需要 5 个换行符！

3) 将部分放入stringbuffer[i]，直到允许一行中的最大字符数限制，

4) 循环直到 stringbuffer.length < linebreaks

**splitString**方法是执行此操作的方法。**writeText**方法只是将包装的文本绘制到 pdf

这是一个例子

```
import java.io.IOException;
import java.util.ArrayList;

import org.apache.pdfbox.exceptions.COSVisitorException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.edit.PDPageContentStream;
import org.apache.pdfbox.pdmodel.font.PDFont;
import org.apache.pdfbox.pdmodel.font.PDType1Font;

public class pdfTest{
 private ArrayList<String> arrayList;
 private PDDocument document;
 private PDFont font = PDType1Font.HELVETICA;

 pdfTest(PDDocument document, ArrayList arrayList, PDFont font) throws COSVisitorException, IOException {
    this.document = document;
    this.arrayList = arrayList;
    this.font = font;   
    writeText(document, arrayList, 30, 750, font); //method for easily drawing a text into a pdf
 } //constructor

 public void writeText(PDDocument document, ArrayList arrayList, int positionX, int positionY, PDFont font) throws IOException, COSVisitorException {
     PDPage page = new PDPage();
     document.addPage( page );

     // Start a new content stream
     PDPageContentStream contentStream = new PDPageContentStream(document, page);

     // Define a text content stream using the selected font, moving the cursor and drawing the text in arrayList
     for(int i=0;i<arrayList.size();i++) {  
         String text=(String) arrayList.get(i);
         String [] tmpText = splitString(text);
         for( int k=0;k<tmpText.length;k++) {
             contentStream.beginText();
             contentStream.setFont(font, 12);
             contentStream.moveTextPositionByAmount(positionX, positionY);
             contentStream.drawString(tmpText[k]);           
             contentStream.endText();
             positionY=positionY-20;
         }           
         contentStream.setLineWidth((float) 0.25);
     }

     // Make sure that the content stream is closed:
     contentStream.close();      
     document.save( "Test.pdf");
     document.close();
 } //main

 public static void main(String[] args) throws COSVisitorException, IOException {
     ArrayList arrayList = new ArrayList<String>();

     PDDocument document = new PDDocument();
     PDFont font = PDType1Font.HELVETICA;
     PDPage page = new PDPage();

     arrayList.add(       "12345 56789 0 aaa bbbew wel kwäer kweork merkweporkm roer wer wer e  er"
                        + "df sdmfkl  slkdfm sdkfdof sopdkfp osdkfo sädölf söldm,f sdkfpoekr re, ä"
                        + " sdfk msdlkfmsdlk fsdlkfnsdlk fnlkdn flksdnfkl sdnlkfn kln df sdmfn sn END");
     arrayList.add("this is an example");
     arrayList.add("java pdfbox stackoverflow");         

     new pdfTest(document,arrayList,font);
     System.out.println("pdf created!");
 }

 public String [] splitString(String text) {
     /* pdfBox doesnt support linebreaks. Therefore, following steps are requierd to automatically put linebreaks in the pdf
      * 1) split each word in string that has to be linefeded and put them into an array of string, e.g. String [] parts
      * 2) create an array of stringbuffer with (textlength/(number of characters in a line)), e.g. 280/70=5 >> we need 5 linebreaks!
      * 3) put the parts into the stringbuffer[i], until the limit of maximum number of characters in a line is allowed,
      * 4) loop until stringbuffer.length < linebreaks
      * 
      */
     int linebreaks=text.length()/80; //how many linebreaks do I need?  
     String [] newText = new String[linebreaks+1];       
     String tmpText = text;
     String [] parts = tmpText.split(" "); //save each word into an array-element

     //split each word in String into a an array of String text. 
     StringBuffer [] stringBuffer = new StringBuffer[linebreaks+1]; //StringBuffer is necessary because of manipulating text
     int i=0; //initialize counter 
     int totalTextLength=0;
     for(int k=0; k<linebreaks+1;k++) {
         stringBuffer[k] = new StringBuffer();
         while(true) {               
             if (i>=parts.length) break; //avoid NullPointerException
             totalTextLength=totalTextLength+parts[i].length(); //count each word in String              
             if (totalTextLength>80) break; //put each word in a stringbuffer until string length is >80
             stringBuffer[k].append(parts[i]);
             stringBuffer[k].append(" ");
             i++;
         }
         //reset counter, save linebreaked text into the array, finally convert it to a string 
         totalTextLength=0; 
         newText[k] = stringBuffer[k].toString();
     }
     return newText;
 } 

} 
```

# arrays - 使用数字数组计算 min max 等

> ID：14686015
> 
> 赞同：0
> 
> 时间：2013-02-04T11:39:50.277
> 
> 标签：arrays, matlab, matlab-guide

嗨，我有一个小 GUI，其中包含 1 个“按钮”和 3 个“编辑文本”以及一些用于显示结果的静态文本标签。

我想要做的是能够从一系列数字中计算它们：总和、平均值、最小值、最大值、标准偏差和偏度用户将输入以下数据 [使用编辑文本框]：

 序列的起始编号

 序列的结束编号

 增量步长

并且通过使用上述`Pushbutton`所有结果将在单独的静态文本中返回。

我对 MATLAB 非常陌生，任何人都可以将我推向我需要去实现这一目标的方向。

我的用户界面（如果有帮助）：

![在此处输入图像描述](../Images/275bb757cc622d925b43cb2bb2a86909.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:13:55.850

一个简单的解决方案应该是：

```
function pushbutton1_Callback(hObject, eventdata, handles)
%[

    startValue = str2num(get(handles.edit1,'string')) ;
    stopValue = str2num(get(handles.edit2,'string')) ;
    step = str2num(get(handles.edit3,'string')) ;

    series = startValue:step:stopValue ;

    average = mean(series) ;
    minValue = min(series) ;
    ...
    ...
    set(handles.text1,'string',average);
    set(handles.text2,'string',minValue);
    ...
%] 
```

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:46:02.993

您可能会发现这[41 个完整的 GUI 示例](http://www.mathworks.us/matlabcentral/fileexchange/24861-41-complete-gui-examples)很有用……它将回答您以下问题：

1.如何操作uicontrol中的字符串？GUI_1、2、4、5、13、14、15、20、21、22、37

2.如何使uicontrol不可见/可见？GUI_3, 35（有关图像，另请参见 GUI_10）

3.如何制作多行编辑框？GUI_4

4.如何初始化一个编辑框，使光标在启动时闪烁？GUI_4、24、37

5.如何让我的 GUI 用户知道他的行为是徒劳的（或没有结果）？GUI_5

6.如何判断选择了哪个 uicontrol，例如单选按钮？GUI_6, 8

7.如何知道一个uicontrol被激活了多少次？GUI_7、19、28、32、33

8.如何判断按钮组中的哪个按钮被选中？GUI_8

9.如何让用户知道一个进程正在后台运行？GUI_9

10.如何设置图片可见/不可见？GUI_10

11.如何使用 GUI 退出 FOR 循环？GUI_11

12.如何用GUI控制鼠标指针？GUI_12

13.如何访问滑块的值（当前位置）？GUI_13, 16

14.如何在列表框中使用不同颜色的字符串？GUI_14

15.listbox中的'listboxtop'和'value'有什么区别？GUI_14

16.如何制作可复制但不可更改的文本？GUI_15

17.如何让我的GUI用户设置滑块的范围？GUI_16

18.如何在我的 GUI 中显示数字时钟？GUI_17

19.如何在 GUI 中使用计时器？GUI_17

20.如何在axes对象上使用buttondownfcn？GUI_18, 28

21.如何让一个回调与另一个回调对话？GUI_19

22.如何从弹出框或列表框中获取字符串？GUI_14、20、21、22、31、32、33

23.如何在弹出框或列表框中设置字符串？GUI_21, 22

24.如何在弹出框或列表框中添加字符串？GUI_22

25.在我的回调执行之前，我如何知道哪些图形/轴是当前的？GUI_23

26.如何从另一个GUI获取数据？GUI_24

27.如何制作只打开图片文件的GUI？GUI_25

28.如何使弹出选择互斥？GUI_26

29.如何在坐标轴坐标中显示当前指针位置？GUI_27

30.如何使用uicontextmenus？GUI_28、33、39

31.如何让我的GUI控制另一个图中的轴？GUI_29, 30

32.什么是回调字符串？GUI_30

33.我怎样才能做到当其中一个人物关闭时，他们都关闭？GUI_24、29、30、41

34.如何让多个uicontrols在更复杂的GUI中交互？GUI_31、32、33、41

35.如何从 GUI 获取数据到基础工作区？GUI_25、32、33、36

36.如何使用图形用户界面截取我的桌面？GUI_34

37.如何让切换按钮像标签面板一样？GUI_35

38.如何制作一个自定义对话框，将字符串返回到基础工作区？GUI_36

39.如何制作带有*****符号的密码编辑框？GUI_37

40.如何使用嵌套函数作为回调？GUI_11、17、34、36、37、39、40、41。

41.如何在GUI中使用uiwait？GUI_11、34、36、37

42.如何在我的GUI中使用JAVA？GUI_38

43.如何强制图形在uicontrol激活之间保持焦点？GUI_38

44.如何将坐标轴保存为图像？GUI_39

45.如何制作一个简单的绘图程序？GUI_39

46.如何设置按钮的背景以匹配图像？GUI_40

47.如何保存图形用户界面系统的状态以备后用？GUI_41

# iphone - cvCaptureFromCAM 在 xcode 中不起作用？

> ID：14686017
> 
> 赞同：3
> 
> 时间：2013-02-04T11:39:56.933
> 
> 标签：iphone, ipad, xcode4.3

不要`cvCaptureFromCAM`在 iPhone 或 iPad 中醒来。它无法打开设备相机。我已经申请

```
CvCapture* capture =  cvCaptureFromCAM( CV_CAP_ANY );
CvCapture* capture =  cvCaptureFromCAM( 0 );
CvCapture* capture =  cvCaptureFromCAM( -1 ); 
```

但每次它返回`null`。cvCaptureFromCAM 是否在 ios 设备中加载实时流媒体？

提前致谢。

# asp.net-mvc - ASP.NET：值“x”对 id 无效

> ID：14686019
> 
> 赞同：1
> 
> 时间：2013-02-04T11:40:01.100
> 
> 标签：asp.net-mvc, entity-framework

使用我的应用程序，在所有模型的所有编辑命令上，我都会收到标题中所述的错误。我在 asp.net 论坛上发布的因素正在逐步消除，为简洁起见，我将在此处排除：[http ://forums.asp.net/p/1879643/5291012.aspx/1?Re+Model+外键+默认+to+0+in+编辑+操作](http://forums.asp.net/p/1879643/5291012.aspx/1?Re+Model+foreign+key+defaulting+to+0+in+edit+operation)

如果你检查上面的链接，你可以验证我的分析。

我的外键绑定是合法的，所以我想知道这个问题是否根深蒂固。

非常感谢。

# javascript - 解析 XML 以使用 Javascript

> ID：14686022
> 
> 赞同：2
> 
> 时间：2013-02-04T11:40:06.900
> 
> 标签：javascript, ruby-on-rails, xml

我收到一个这样的 xml 文件：

```
<?xml version='1.0' encoding='utf-8'?>
<show name="test">
    <primary val="Hello">
        <secondary prop="Wolrd"/>
    </primary>
</show> 
```

我想在我的 Rails 应用程序中打印“Hello”，当用户右键单击主要单词（Hello）时，它会用次要单词（Wolrd）替换它。

我找到了一种方法，通过在 Html 中转换 xml。但出于几个原因，我更愿意保留我的 xml 文件。而且转换有点太长了。

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:45:54.943

您可以以与常规 HTML 完全相同的方式操作 XML DOM 树。

使用`document.getElementsByTagName('')`，你可以过滤`SELECTED_DOM_ELEMENT.hasAttribute('ATTRIBUTE_NAME')`

你可以在这里阅读更多：http: [//www.w3schools.com/xml/xml_examples.asp](http://www.w3schools.com/xml/xml_examples.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:46:31.620

尝试使用`gem "xml-simple"` [simple-gem](http://xml-simple.rubyforge.org/)

# css - javascript中的弹跳球动画

> ID：14686028
> 
> 赞同：1
> 
> 时间：2013-02-04T11:40:31.577
> 
> 标签：css, html, canvas, html5-canvas

这是我的 javascript 游戏的主题 -

[小提琴](http://jsfiddle.net/stackmanoz/nHfXV/1/)

当球接触到偏移到 X、Y 桨时，它应该停止移动。我认为当前轴应该为此而闻名，但不知何故我找不到任何方法。请帮我让它更真实。

这是我的绘图功能-

```
function draw() {
      ctx.clearRect(0,0,300,300);
      ctx.rect(mouseX-40,mouseY-20,40,20,true);
      ctx.fillStyle = 'black';
      ctx.fill();
      ctx.beginPath();
      ctx.arc(x,y,10,0,2*Math.PI,true);
      ctx.closePath();
      ctx.fill();
      x+=dx;
      y+=dy;
      bounce();
    } 
```

我放在这里的条件-

```
function bounce(){
      if(x+dx>300||x+dx<0)
        dx=-dx;
      if(y+dy>300||y+dy<0)
        dy=-dy;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:59:20.537

如果你想让球在击中桨时停止移动，你可以这样做：http: [//jsfiddle.net/nHfXV/2/](http://jsfiddle.net/nHfXV/2/)

```
if(x+dx<mouseX&&x+dx>mouseX-40&&y+dy<mouseY&&y+dy>mouseY-20){
    dy=0;
    dx=0;
} 
```

# c - 是否可以指示 C 不对全局数组进行零初始化？

> ID：14686030
> 
> 赞同：16
> 
> 时间：2013-02-04T11:40:54.010
> 
> 标签：c, gcc, embedded, c99

我正在编写一个嵌入式应用程序，几乎所有的 RAM 都被全局字节数组使用。当我的固件启动时，它首先用零覆盖 RAM 中的整个 BSS 部分，这在我的情况下是完全没有必要的。

有什么方法可以指示编译器不需要对某些数组进行零初始化？我知道这也可以通过将它们声明为指针并使用 malloc() 来解决，但有几个原因我想避免这种情况。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T12:06:03.333

问题是标准 C*强制*对静态对象进行零初始化。如果编译器跳过它，它将不符合 C 标准。

在嵌入式系统编译器上，通常有一个非标准选项“紧凑启动”或类似选项。启用后，程序中的任何位置都不会发生静态/全局对象的初始化。如何做到这一点取决于您的编译器，或者在这种情况下，取决于您的 gcc 端口。

如果您提及您正在使用哪个系统，那么有人可能会为该特定编译器端口提供解决方案。

这意味着您显式初始化的任何静态/全局（静态存储持续时间）变量将不再被初始化。您必须在运行时初始化它，也就是说，`static int x=1;`您必须编写`static int x; x=1;`. 以这种方式编写嵌入式 C 程序是相当普遍的，以使它们与禁用静态初始化的编译器兼容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-04T15:33:53.960

事实证明，我的工具链中包含的链接器脚本有一个特殊的“noinit”部分。

```
__attribute__ ((section (".noinit"))) 
```

> /** 强制编译器在启动时不自动将给定的全局变量归零，以便保留当前 RAM 内容。在大多数情况下，由于断电后易失性存储器的行为，该值将是随机的，但可以在某些特定情况下使用，例如在系统看门狗重置后传回值。

因此，所有标有该属性的全局变量在启动期间都不会被初始化为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T12:09:43.613

C 标准要求将全局数据初始化为零。

一些嵌入式系统制造商可能会提供一种绕过此选项的方法，但如果“初始化为零”没有完成，肯定有许多典型的应用程序会失败。

一些编译器还允许您有更多的部分，这些部分可能具有除“bss”部分之外的其他特征。

另一种选择当然是“自己分配”。由于它是一个嵌入式系统，我想您可以控制应用程序和数据如何加载到 RAM 中，特别是使用哪些地址。

因此，您可以使用指针，并简单地使用您自己的机制将指针分配给为您需要大型数组的任何内容保留的内存区域。这避免了相当复杂的使用`malloc`- 并且它为您提供或多或少的永久地址，因此您不必担心稍后尝试查找数据的位置。这当然会对性能产生很小的影响，因为它增加了另一个间接级别，但在大多数情况下，一旦数组用作函数的参数，它就会消失，因为无论如何它都会衰减到那个点的指针.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T12:09:51.640

有一些解决方法，例如：

*   从二进制文件中删除 BSS 部分或将其大小设置为 0 或 1。如果加载程序必须为所有部分显式分配内存，这将不起作用。如果加载程序只是将数据复制到 RAM，这将起作用。
*   像在 C 代码中一样声明数组`extern`并在单独的汇编文件中的汇编代码或链接描述文件中定义符号（连同它们的地址）。同样，如果必须显式分配内存，这将不起作用。
*   在加载程序或之前在程序中执行的启动代码中修补或删除相关的 BSS 归零代码`main()`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-17T11:18:25.303

所有嵌入式编译器都应该允许 noinit 段。使用 IAR AVR 编译器，您不想被初始化的变量只需声明如下：

__no_init uint16_t foo;

最有用的原因是允许变量在看门狗或掉电复位时保持其值，这在基于计算机的 C 程序中当然不会发生，因此它从标准 C 中省略。

只需在您的编译器手册中搜索“noinit”或类似内容即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T11:45:47.197

您确定二进制格式实际上包含二进制文件中的 BSS 部分吗？在我使用过的二进制格式中，BSS 只是一个整数，它告诉内核/加载器要分配多少内存并将其归零。

C 中绝对没有通用的方法来获取未初始化的全局变量。这将是您的编译器/链接器/运行时系统的一个功能，并且非常具体。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-30T11:34:03.263

使用 gcc，-fno-zero-initialized-in-bss

# html - 如何将前置+附加到搜索查询？

> ID：14686031
> 
> 赞同：1
> 
> 时间：2013-02-04T11:40:57.037
> 
> 标签：html, css, twitter-bootstrap

嗨，在使用 twitter bootstrap 时，我遇到了这个问题，我不能同时将按钮添加到带有 class="search-query" 的输入中。但是，我可以这样做：

```
<form class="form-search">
<div class="input-append">
<input type="text" class="span2 search-query">
<button type="submit" class="btn">Search</button>
</div>
<div class="input-prepend">
<button type="submit" class="btn">Search</button>
<input type="text" class="span2 search-query">
</div>
</form> 
```

但是如果我尝试将两个类放在一起它就行不通了。有什么建议么？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:48:17.837

基于 Bootstrap 文档中的代码，值得一看。

```
<div class="input-prepend input-append">
  <div class="btn-group">
    <button class="btn">
      Search
    </button>
  </div>
  <input class="span2" type="text">
  <div class="btn-group">
    <button class="btn">
      Search
    </button>       
  </div>
</div> 
```

# jakarta-ee - 企业 Java Beans 和 Java 服务器面

> ID：14686046
> 
> 赞同：0
> 
> 时间：2013-02-04T11:42:01.770
> 
> 标签：jakarta-ee, servlets, ejb

我正在学习 java ee，我正在尝试获取整个应用程序的图片。我知道我想将 Enterprise Java bean 用于服务器端功能，但我不确定如何将它连接到用户界面。据我所知，有两个主要的 UI 框架：java server faces 和 Servlets。哪一个更适合与 EJB 一起使用？（甚至可以链接它们吗？）我看到 JSF 提供了一个很好的 MVC，我实际上想遵循它，但不确定它是否打算与 EJB 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:53:44.480

1) [Servlet](http://www.oracle.com/technetwork/java/index-jsp-135475.html)实际上并不是 UI 框架，它是一种在服务器端和客户端创建网站的整体技术。

2) JSF 被认为是 JSP 和 Servlet 的继承者，所以我肯定会使用 JSF。还有一些不错的框架，如[PrimeFaces](http://primefaces.org/)或[RichFaces](http://www.jboss.org/richfaces)，它们为 JSF 提供了额外的组件和功能。在我看来，与 EJB 的集成似乎与 JSF 更顺畅，因为它们都具有 bean 和范围的相似概念，因此它们可以组合在一起。

3) 如果您没有被迫使用 JSF 或 Servlets，那么您也可以考虑使用其他框架。一些流行的 - [GWT](https://developers.google.com/web-toolkit/)，[Vaadin](https://vaadin.com/home)，[Play Framework](http://www.playframework.org/)等。特别是 Play 并不是一个糟糕的开始。

PS 一个注意事项 - 即使您使用 JSF，您可能仍然需要开发一些 Servlet。原因是 JSF 是建立在 Servlet 技术之上的，而且它不是万能的，因此例如对于文件上传，您将不得不使用 Servlet 或 RichFaces 之类的框架来为您做到这一点。

# java - BigDecimal 得到四舍五入..但我不想要任何四舍五入

> ID：14686052
> 
> 赞同：3
> 
> 时间：2013-02-04T11:42:30.043
> 
> 标签：java, bigdecimal

在我的代码中，我想在没有任何舍入或求幂的情况下插入 db ..但是当我使用 sop 作为 2.631578947368421E-7 时，它会在我的 java 代码中转换

以下是我使用的代码：

```
BigDecimal a =new BigDecimal(0.0000002631578947368421052631578947368421052632,MathContext.DECIMAL64);
System.out.println(a); 
```

我只是希望它保持原样，因为我想做一些计算。

请给我一个合适的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T11:44:29.550

[使用 String](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)构造大十进制，否则您输入的常量在作为参数传递给 的构造函数之前会被四舍五入`BigDecimal`。

所以写这样的东西：

```
BigDecimal a =new BigDecimal("0.0000002631578947368421052631578947368421052632");
System.out.println(a.toPlainString()); 
```

一切都应该工作。

编辑：您还应该摆脱构造函数的第二个参数作为 `static MathContext.DECIMAL64`手段：`A MathContext object with a precision setting matching the IEEE 754R Decimal64 format, 16 digits, and a rounding mode of HALF_EVEN, the IEEE 754R default.`

EDIT2：`a.toPlainString()`打印时也使用不使用科学计数法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:17:34.090

> BIgDecimal 四舍五入。

不，不是。`BigDecimal`与它无关。常数值`0.0000002631578947368421052631578947368421052632`正在四舍五入。它不能以浮点数精确表示。如果您想要一个具有此值的准确 BigDecimal，请使用`new BigDecimal(String).`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:48:06.787

您可以使用 MathContext.UNLIMITED。

```
BigDecimal a =new BigDecimal(0.0000002631578947368421052631578947368421052632,MathContext.UNLIMITED);
System.out.println(a);
System.out.println(a.toPlainString()); 
```

当您打印值时，您可以使用[BigDecimal.toPlainString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#toPlainString%28%29)返回“没有指数字段的此 BigDecimal 的字符串表示形式”。

# php - Codeigniter--添加“活动”css类，如何在链接上应用？

> ID：14686053
> 
> 赞同：0
> 
> 时间：2013-02-04T11:42:43.657
> 
> 标签：php, codeigniter

我有一个这样的网址 `http://localhost/bestbookfinder.com/viewallbooks/books/pgn/grid/6`

在哪里：

**bestbookfinder.com**：项目名称

**viewallbooks** : 类名

**书籍** ：功能

**pgn** :常量参数

**网格** ：视图类型

**6** :pagination 当前页码

所以现在我正在尝试阅读上面显示的 url 并使用以下代码应用 CSS 类，但不幸的是我的代码不起作用。我想我在尝试阅读网址时犯了错误。

请帮我解决这个问题

```
<?php
if ( $this->uri->uri_string() == '/books/pgn/grid' )//i think mistake is here
 {
  echo "".anchor(base_url().'viewallbooks/books/pgn/grid/'.$this->uri->segment(5),'  Grid', array('id' => 'gridactive'))."";
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:53:58.827

来自[codeigniter 手册](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)-`uri_string()`返回一个带有完整 URI 的字符串。所以在你的例子中就是`"viewallbooks/books/pgn/grid/6"`.

所以`"viewallbooks/books/pgn/grid/6" != '/books/pgn/grid'`

只需执行以下操作：

```
if ($this->uri->segment(4) == "grid")
{
   // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:54:03.257

```
if($this->uri->segment(4) == 'grid'){
    //carry on 
```

# jquery - 在jQuery中选择编号的元素范围

> ID：14686056
> 
> 赞同：2
> 
> 时间：2013-02-04T11:42:58.900
> 
> 标签：jquery, range

我想这很简单，但我不知道该怎么做：

假设我有以下元素：

```
<div class="1">Div 1</div>
<div class="2">Div 2</div>
<div class="3">Div 3</div>
<div class="4">Div 4</div>
<div class="5">Div 5</div>
<div class="6">Div 6</div>
<div class="7">Div 7</div>
<div class="8">Div 8</div> 
```

并且想针对特定范围内的元素，改变一些CSS属性。例如：

```
$(Class > 3 and < 7).css("background","#0077C1"); 
```

显然范围会发生变化。在给定范围内选择元素的最简单方法是什么？

如果您认为这可以比使用类更容易实现（我认为这很可能），请务必提及。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:45:46.933

试试这个

```
$('.2').nextUntil('.8').css('background','#0077C1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:46:43.607

```
<div class="divClass" id="1">Div 1</div>
<div class="divClass" id="2">Div 2</div>
<div class="divClass" id="3">Div 3</div>
<div class="divClass" id="4">Div 4</div>
<div class="divClass" id="5">Div 5</div>
<div class="divClass" id="6">Div 6</div>
<div class="divClass" id="7">Div 7</div>
<div class="divClass" id="8">Div 8</div>

$('.divClass').each(function() {
    var divID = $(this).attr('id');
    if(divID >3 && divID<7)
    {
        // do something
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:47:19.937

您可以使用[.slice()](http://api.jquery.com/slice/)方法来选择数组中元素的子集。但这不会使用您的 css 类名。

```
$('div').slice(2, 6).css('background','#0077C1'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:49:33.420

假设您的问题实际上是关于按类进行选择而不仅仅是按索引进行选择，那么最好的方法是将starts-with 选择器和`filter`.

假设您的类以“c”开头是有效的类名（c1、c2 等），那么您可以像这样选择您的元素：

```
$('[class^=c]').filter(function(){
   var num = parseInt(this.className.slice(1), 10);
   return num>3 && num<7;
}); 
```

# security - Android 4.2 和本地网络 (192.168.xx)

> ID：14686063
> 
> 赞同：0
> 
> 时间：2013-02-04T11:43:25.670
> 
> 标签：security, android-networking, android-4.2-jelly-bean

我开发 Android 游戏，它连接到办公室服务器以记录事件。像 adb 但通过网络。

该代码适用于除带有 Android 4.2 的 Nexus 4 之外的所有 android。我只有 Android 4.2 设备。

我阅读了有关新的 Android 4.2 安全性的文章，但没有看到本地网络访问受到限制。我明白这是有道理的，但正在寻找是否存在这种限制的确认。

# visual-studio - Visual Studio 2012 键盘冻结

> ID：14686067
> 
> 赞同：1
> 
> 时间：2013-02-04T11:43:43.500
> 
> 标签：visual-studio, razor, visual-studio-2012, resharper

我在 Visual Studio 2012 的 razor 视图中遇到问题。出于某种原因，大多数情况下，当我尝试编辑样式属性时，我的键盘会冻结并且不允许我输入任何内容。

```
<section style="height: 15[Try to edit here]"> 
```

例如，当键盘冻结时，尝试在上面放置“尝试在此处编辑”的位置添加零或“px”是不可能的。

我安装了 ReSharper 7.1，我不确定这是否是罪魁祸首？

关闭选项卡并重新打开它可以解决问题，但稍后会再次出现（不确定是否有关于何时再次出现的模式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:58:24.873

This happens to me often. I just switch tabs and come back and it doesn't happen(for sometime of course :-)). It could be some kind of unresolvable bug although i would suggest that you uninstall ReSharper and try again to see if it gets fixed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T13:46:46.113

这也发生在我和我的其他同事身上。

我发现它与具有浮动代码窗口有关。与查找结果（没有标题栏）之类的浮动窗口不同，这些看起来几乎就像 Visual Studio 的另一个实例。These do not come to the front when the main Visual Studio Window is selected. 我发现如果打开了“查找结果”类型的浮动窗口，键盘只会在这些窗口上停止响应。出现问题时，单击另一个 VS 窗口并返回对其进行排序。

在早期版本的 VS 中，任何拉取的代码窗口都没有粗标题栏和窗口控制框出现。

我尝试发布两种浮动窗口的图像，但没有足够的声誉这样做！让我知道它是否令人困惑，我会尽力澄清。

这可能不是发生此问题的唯一方法，但这是我在使用 Visual Studio 2012 的最后几周一直观察到的情况。我安装了 Resharper 7 和 Reflector 的 C# 环境设置。

# ios - 使用 LC_LOAD_DYLIB 加载的动态库插入 C 函数

> ID：14686074
> 
> 赞同：3
> 
> 时间：2013-02-04T11:44:21.367
> 
> 标签：ios, macos, dylib, dyld

首先，我想做的是拦截iOS应用程序的任意标准C函数（如fopen、read、write、malloc等）。

我有一个带有以下代码的 libtest.dylib：

```
typedef struct interpose_s {
    void *new_func;
    void *orig_func;
} interpose_t;

FILE *vg_fopen(const char * __restrict, const char * __restrict);

static const interpose_t interposing_functions[] \
__attribute__ ((section("__DATA, __interpose"))) = {
    { (void *)vg_fopen, (void *)fopen },
};

FILE *vg_fopen(const char * __restrict path, const char * __restrict mode) {
    printf("vg_fopen");
    return fopen(path, mode);
} 
```

编译完 dylib 后，我转到主机 iOS 应用程序的二进制文件并将 LC_LOAD_DYLIB 添加到 LC_LOAD_COMMANDS 列表的末尾并将其指向 @executable_path/libtest.dylib

我期望它会覆盖 fopen 的实现，并在调用 fopen 时打印“vg_fopen”。但是，我不明白，所以插入可能失败了。

我想知道可能是什么原因。这仅用于内部开发，仅用于学习目的，因此请不要提及影响或警告我不当使用。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:15:51.210

从[`dyld`来源](http://opensource.apple.com/source/dyld/dyld-210.2.3/src/dyld.cpp)：

```
// link any inserted libraries
// do this after linking main executable so that any dylibs pulled in by inserted 
// dylibs (e.g. libSystem) will not be in front of dylibs the program uses
if ( sInsertedDylibCount > 0 ) {
    for(unsigned int i=0; i < sInsertedDylibCount; ++i) {
        ImageLoader* image = sAllImages[i+1];
        link(image, sEnv.DYLD_BIND_AT_LAUNCH, ImageLoader::RPathChain(NULL, NULL));
        // only INSERTED libraries can interpose
        image->registerInterposing();
    }
} 
```

所以不，只有通过插入的库才`DYLD_INSERT_LIBRARIES`应用了它们的插入。

# ack - 如何从 ack-grep 搜索中排除 .min.css 文件？

> ID：14686076
> 
> 赞同：3
> 
> 时间：2013-02-04T11:44:26.930
> 
> 标签：ack

我有添加新文件类型的语法`ack-grep`：

```
$ ack-grep --type-add=min=.min.js,.min.css --help types | grep min
    --[no]min          .min.js .min.css 
```

但问题是它似乎与任何文件都不匹配，可能是因为我的扩展名（`.min.js`/ `.min.css`）中有 2 个点。

```
$ touch test.min.js
$ ack-grep --min -f
    [nothing returned] 
```

那么如何才能`ack-grep`识别其中包含 2 个点的文件类型呢？如果这不可能，我如何在不匹配缩小版本的情况下搜索 js 和 css 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:29:35.210

从 1.96 开始，Ack 将忽略 min.js 文件。似乎这包含在拉取[请求 142](https://github.com/petdance/ack/pull/142)中。至于 CSS 似乎不会在 1.x 中发生。[如果您在219](https://github.com/petdance/ack/issues/219)上安装自己的 fork 时会遇到麻烦，则有一个拉取请求。

# jquery - 我们现在可以在 2013 年修复 Youtube 拒绝的“toString”问题吗？

> ID：14686077
> 
> 赞同：2
> 
> 时间：2013-02-04T11:44:29.317
> 
> 标签：jquery, youtube, console

我使用 Firefox + Firebug 并尝试停止错误消息...

`Error: Permission denied to access property 'toString'`

在 Chrome 中说..

`Unsafe JavaScript attempt to access frame with URL http://jsfiddle.net/PEaUD/ from frame with URL http://www.youtube.com/embed/zTFBJgnNgU4?rel=0&showinfo=0&autohide=1&controls=0\. Domains, protocols and ports must match.`

我只是使用 jQuery 之类的东西......

```
$("body").html('<iframe width="500" height="500" src="http://www.youtube.com/embed/zTFBJgnNgU4?rel=0&showinfo=0&autohide=1&controls=0" frameborder="0" allowfullscreen></iframe>'); 
```

**演示：http:** [//jsfiddle.net/PEaUD/](http://jsfiddle.net/PEaUD/)

有什么问题？

我们无法修复它，因为... [https://stackoverflow.com/a/13101119/622813](https://stackoverflow.com/a/13101119/622813)？

PS：我问是因为在 Firefox 中出现此错误时，我无法播放 youtube 视频，单击 play-btn 时无法在 url 栏中键入/复制/传递（通过键盘）任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:53:25.830

如果您使用 youtube player api 加载视频，您将不会收到该特定错误

[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

我希望这有帮助。

# macos - OSX 在 su - root 后出现一些消息

> ID：14686082
> 
> 赞同：0
> 
> 时间：2013-02-04T11:44:52.777
> 
> 标签：macos, terminal, root

每当我切换到root后：
`su - root`

当我进入`root`终端时，它显示：
`-sh: /Applications/XCODE: No such file or directory`

请问这个消息是从哪里出现的？
我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:06:05.363

我从`trojanfoe`.

1.  检查`/var/root/.bash_profile`
2.  检查`/etc/profile`

谢谢！

# django - TypeError：*后的render_option（）参数必须是序列，而不是int

> ID：14686083
> 
> 赞同：1
> 
> 时间：2013-02-04T11:45:00.240
> 
> 标签：django, django-admin

我愿意将 Django 用于学校项目，但我遇到了几个问题。

标题中描述了我需要帮助的那个。基本上，我有一个*待办事项*应用程序，我可以在其中添加任务。现在我在视图中添加了一个表单以让用户添加任务，我无法访问 Django 管理员中的任务。

我仍然可以使用管理员删除它们，但是每次我尝试通过管理员添加或编辑任务时，它都会向我抛出此错误：

```
TypeError at /admin/todo/task/12/`
render_option() argument after * must be a sequence, not int 
```

但是，我为用户添加的表单效果很好。

我的猜测是`12`我们可以看到 url 正在出错，但我不知道为什么。我指出我对 Django 还是有点陌生​​，我没有发现任何类似的问题（发现[了这个](https://groups.google.com/forum/?fromgroups=#!msg/django-non-relational/hewmSRBnONo/ESadsuN59XwJ)但它对我没有帮助）所以我认为在这里问可能是个好主意:)。这是我的文件：

**待办事项/models.py**

```
PRIORITY_TYPES = (
    (1, 'Normal'),
    (2, 'High'),
)

class Task(models.Model):
    application = models.CharField(max_length=120, default='esportbets')
    title = models.CharField(max_length=120)
    author = models.CharField(max_length=60, blank=True, null=True)                                                                                                                                                                        
    created = models.DateTimeField(auto_now_add=True)
    completed = models.DateTimeField(blank=True, null=True)
    priority = models.IntegerField(choices=[PRIORITY_TYPES], default=1)
    done = models.BooleanField(default=False)

    def __unicode__(self):
        return self.title 
```

**待办事项/forms.py**

```
class AddTaskForm(forms.Form):
    application = forms.CharField(max_length=120, initial='esportbets', help_text='the application it is about')
    title = forms.CharField(max_length=120, help_text='the task to do')
    priority = forms.ChoiceField(choices=PRIORITY_TYPES, initial=1) 
```

**待办事项/views.py**

```
def index(request):
    if request.method == 'POST':
        form = AddTaskForm(request.POST)
        if form.is_valid():
            new_task = Task.objects.create(application=form.cleaned_data['application'],
                                           title=form.cleaned_data['title'],
                                           priority=form.cleaned_data['priority'])
            request.POST = None
        redirect('/todo/', RequestContext(request))
    else:
        form = AddTaskForm()
    tasks = Task.objects.all().order_by('-created')
    tasks_high = tasks.filter(priority=2)
    tasks_normal = tasks.filter(priority=1)

    template_datas = {'form':form, 'tasks_high':tasks_high, 'tasks_normal':tasks_normal, 'user':request.user}
    return render_to_response('todo/base.html', template_datas, RequestContext(request)) 
```

**待办事项/base.html**

```
{% if user.is_authenticated %}                                                                                                                                                                                                             
<hr /><h3>ADD A TASK</h3><br />
<form method="post" action=".">
    {% csrf_token %}
    {{ form.as_p }}
    <br />
    <input type="submit" value="add" />
    <input type="reset" value="reset" />
</form>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:05:21.763

1.  todo/models.py：删除`[]`周围的`PRIORITY_TYPES`.
2.  todo/forms.py:`forms.ChoiceField(...)`替换`forms.TypedChoiceField(choices=PRIORITY_TYPES, initial=1, coerce=int)`

* * *

由于您实际上是将数据 1:1 从表单复制到模型，因此我建议使用[`django.forms.ModelForm`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform).

如果您想进一步最小化您的代码，您可以使用通用的[CreateView](https://docs.djangoproject.com/en/dev/ref/class-based-views/flattened-index/#CreateView)。[我最近写了一篇“基于示例代码保存在视图中的最佳实践](https://stackoverflow.com/questions/14657021/best-practices-on-saving-in-a-view-based-on-example-code/14657354#14657354)”的答案，其中包括一些示例代码。

# scikit-learn - DecisionTrees - 如何找到树中的叶子数？

> ID：14686085
> 
> 赞同：1
> 
> 时间：2013-02-04T11:45:08.860
> 
> 标签：scikit-learn

在训练了一个随机森林之后，我想知道森林中每棵树的叶子数量是多少。

例如，如果我训练了一个有 10 棵树的森林，我想得到一个有 10 个条目的向量，其中第 i 个条目是第 i 个树中的叶子数。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:21:38.857

您应该查看集成树的[export_graphviz](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/tree/tree.py#L45)方法的实现，以了解如何解压树数据结构。

[文档](http://scikit-learn.org/dev/modules/tree.html#classification)`export_graphviz`中提供了该方法的示例用法。

# url-routing - 主机和前缀支持多语言的 Python 烧瓶 Web 应用程序

> ID：14686087
> 
> 赞同：3
> 
> 时间：2013-02-04T11:45:11.567
> 
> 标签：url-routing, flask, multilingual, custom-error-pages

我有一台带有烧瓶应用程序实例的服务器，并且有几个域通过 DNS 映射到该服务器。

我的网站必须通过主机和前缀支持多种语言：

```
mysite.com - english
mysite.com/fr - franch
mysite.ru - russian
mysite.ru/by - belarusian
localhost or other unknown host without language prefix - default language (english) 
```

我通过双重路由注册`/endpoint`和`/<lang>/endpoint`重新加载`url_for`功能实现了它，它可以工作，但现在我必须为`abort`功能实现自定义错误页面：

```
mysite.com/wrong-url-there - mysite.com/404.html (english)
mysite.com/fr/wrong-url-there - mysite.com/fr/404.html (franch)
mysite.ru/wrong-url-there - mysite.ru/404.html (russian)
mysite.ru/by/wrong-url-there - mysite.ru/by/404.html (belorusian) 
```

而且我没有看到解决方案。我认为我的实施很糟糕，我必须改进它。我想我必须为每个站点语言根创建一个应用程序实例，并为其预定义语言或使用蓝图，但我还没有找到适合我的解决方案。

有人可以给我建议如何用flask或wsgi或nginx解决这个url多语言支持吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:27:12.430

It's in the official doc: [http://flask.pocoo.org/docs/patterns/urlprocessors/](http://flask.pocoo.org/docs/patterns/urlprocessors/) (This is basically the same answer as Matthew Scragg's).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T04:57:43.387

几个月前我做过类似的事情。我对其进行了一些修改并推送到了 github。如果您无法使模板语言中立，您可以执行 codegeek 建议的操作。使用这种方法，您可以减少所需的模板文件。

[https://github.com/scragg0x/Flask-Localisation-Example](https://github.com/scragg0x/Flask-Localisation-Example)

**我的网站.py**

```
from flask import Flask, Blueprint, g, redirect, request

app = Flask(__name__)

mod = Blueprint('mysite', __name__, url_prefix='/<lang_code>')

sites = {
    'mysite.com': 'en',
    'myothersite.com': 'fr'
}

@app.url_defaults
def add_language_code(endpoint, values):
    values.setdefault('lang_code', g.lang_code)

@app.url_value_preprocessor
def pull_lang_code(endpoint, values):
    url = request.url.split('/', 3)
    g.lang_code = sites[url[2]]

@mod.url_defaults
def add_language_code(endpoint, values):
    values.setdefault('lang_code', g.lang_code)

@mod.url_value_preprocessor
def pull_lang_code(endpoint, values):
    g.lang_code = values.pop('lang_code')

@app.route('/')
@mod.route('/')
def index():
    # Use g.lang_code to pull localized data for template
    return 'lang = %s' % g.lang_code

app.register_blueprint(mod) 
```

**测试.py**

```
import os
import unittest
import re
import requests
import urllib2
import json
from mysite import app

class MySiteTestCase(unittest.TestCase):

    def setUp(self):
        app.config['TESTING'] = True
        app.config['SERVER_NAME'] = 'mysite.com'
        self.domain = 'http://mysite.com/'
        self.app = app.test_client()

    def tearDown(self):
        pass

    def test_en_index(self):
        rv = self.app.get('/en/', self.domain)
        self.assertEqual(rv.data, 'lang = en')
        print self.domain, rv.data

    def test_fr_index(self):
        rv = self.app.get('/fr/', self.domain)
        self.assertEqual(rv.data, 'lang = fr')
        print self.domain, rv.data

    def test_default(self):
        rv = self.app.get('/', self.domain)
        self.assertEqual(rv.data, 'lang = en')
        print self.domain, rv.data

class MyOtherSiteTestCase(unittest.TestCase):

    def setUp(self):
        app.config['TESTING'] = True
        app.config['SERVER_NAME'] = 'myothersite.com'
        self.domain = 'http://myothersite.com/'
        self.app = app.test_client()

    def tearDown(self):
        pass

    def test_en_index(self):
        rv = self.app.get('/en/', self.domain)
        self.assertEqual(rv.data, 'lang = en')
        print self.domain, rv.data

    def test_fr_index(self):
        rv = self.app.get('/fr/', self.domain)
        self.assertEqual(rv.data, 'lang = fr')
        print self.domain, rv.data

    def test_default(self):
        rv = self.app.get('/', self.domain)
        self.assertEqual(rv.data, 'lang = fr')
        print self.domain, rv.data

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:49:52.193

*免责声明：此代码未经测试。我只是给你一个关于如何处理这个问题的大致想法。*

[我建议您将蓝图与Flask-Babel 之](http://packages.python.org/Flask-Babel/)类的扩展结合使用。例如，您可以执行以下操作：

## `views.py`

```
mysitebp = Blueprint('mysitebp',__name__) 
```

然后在您的应用程序包（通常`__init__.py`）中，您可以执行以下操作：

## `__init__.py`

```
from mysite.views import mysitebp
app = Flask(__name__)
app.register_blueprint(mysitebp,url_prefix='/en/',template_folder='en')
app.register_blueprint(mysitebp,url_prefix='/fr',template_folder='fr') 
```

..等等

您的目录结构可能如下所示：

```
mysite/
__init__.py
views.py
templates/
    base.html
    404.html
    en/
        en.html
    fr/
        french.html 
```

Flask-Babel 会帮你翻译 404.html 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:36:44.107

我自己的解决方案：

```
from flask import Flask, g, render_template, redirect, request

app = Flask(__name__)

default_language = 'en'
language_urls = {
    'en': 'mysite.com',
    'fr': 'mysite.com/fr',
    'ru': 'mysite.ru',
    'by': 'mysite.ru/by',
}
languages = ','.join(language_urls.keys())

def get_language_by_request(request_host, request_path):
    '''
    Looking bad, but work.
    I cab't use request.view_args there,
    because this can't detect language for 404 pages
    like mysite.com/fr/unknown-page
    '''
    request_host_path = request_host + request_path
    request_paths = request_host_path.split('/', 2)
    if (len(request_paths) > 1 and request_paths[1] in language_urls.keys()):
        request_language_prefix = request_paths[1]
        return request_language_prefix
    for language, url in language_urls.items():
        host_prefix = url.split('/')
        if len(host_prefix) == 1:
            host, = host_prefix
            if request_host == host:
                return language
    return default_language

def get_language_url_parameter_value(language, request_host):
    host_prefix = language_urls[language]
    if host_prefix == request_host:
        return None
    return language

def get_redirection_url_by_request(request_host, request_path, request_url):
    '''
    Looking bad, but work.
    I cab't use request.view_args there,
    because this can't detect language for 404 pages
    like mysite.com/fr/unknown-page
    '''
    request_host_path = request_host + request_path
    request_paths = request_host_path.split('/', 2)
    request_language_prefix = None
    if (len(request_paths) > 1 and request_paths[1] in language_urls.keys()):
        request_language_prefix = request_paths[1]
    hosts = []
    for language, url in language_urls.items():
        host_prefix = url.split('/')
        if len(host_prefix) == 1:
            host, = host_prefix
            language_prefix = None
        else:
            host, language_prefix = host_prefix
        if request_host == host and request_language_prefix == language_prefix:
            return None
        hosts.append(host)
    if request_host not in hosts:
        return None
    if request_language_prefix:
        request_host_prefix = request_host + '/' + request_language_prefix
        host_prefix = language_urls[request_language_prefix]
        return request_url.replace(request_host_prefix, host_prefix)
    return None

@app.url_defaults
def set_language_in_url(endpoint, values):
    if '_lang' not in values and hasattr(g, 'language_url_value'):
        values['_lang'] = g.language_url_value

@app.url_value_preprocessor
def get_language_from_url(endpoint, values):
    g.language = get_language_by_request(request.host, request.path)
    g.language_url_value = get_language_url_parameter_value(g.language, request.host)
    if values and '_lang' in values:
        del values['_lang']

@app.before_request
def check_language_redirection():
    redirection_url = get_redirection_url_by_request(request.host, request.path, request.url)
    return redirect(redirection_url) if redirection_url else None

@app.route('/')
@app.route('/<any(%s):_lang>/' % languages)
def home():
    return render_template('home.html')

@app.route('/other/')
@app.route('/<any(%s):_lang>/other/' % languages)
def other():
    return render_template('other.html') 
```

我不在那里使用蓝图，因为我也使用`flask-login`并且我无法为每个蓝图设置多个使用不同语言的登录页面。例如，如果页面需要登录，flask 将我重定向到登录页面，我必须更新此页面的语言。`mysite.com/login`如果没有多次重定向，登录页面也不能是 as`mysite.com/fr/login`等。

**UPD：**我不能`request.view_args`用于检测语言或重定向，因为在这种情况下，我无法将错误页面的语言检测为`mysite.com/fr/wrong-page-there`（无法检测`endpoint`和`view_args`）。为了避免这个问题，我可以使用 hask: add url rule as`/<lang_code>/<path:path>`并在此处引发 404 错误。

# jquery - JQuery .slideToggle - 单击一个元素，它会显示所有隐藏的元素

> ID：14686093
> 
> 赞同：1
> 
> 时间：2013-02-04T11:45:27.037
> 
> 标签：jquery, slidetoggle

这可能是一个非常愚蠢的问题，答案很明显，我认为我使用 slideToggle 可能是错误的，但我不知道该怎么做。

本质上，我希望用户单击不同的标题以仅隐藏/显示下面的段落。目前，如果您单击任何标题，它会显示所有隐藏的段落。

这是我目前使用的代码：

```
<a href="#"><div class="contenthead">
    Click here
</div></a>
<p class="content"> Lorem ipsum dolor</p>

<a href="#"><div class="contenthead">
    Click here now
</div></a>
<p class="content"> Lorem ipsum dolor sit amet, consectetur adipiscing</p>

<script>
$('.contenthead').click(function() {
    $('.content').slideToggle('slow', function() {
    // Animation complete.
    });
});
</script> 
```

请问有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:47:01.390

使用[parent](http://api.jquery.com/parent/) () 和[next](http://api.jquery.com/next/) () 函数。

```
$('.contenthead').click(function() {
    $(this).parent().next().slideToggle('slow', function() {
    // Animation complete.
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:56:28.667

看到您需要在此脚本的顶部和下方添加一个 jquery 插件：

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'>
</script>

<script>
$(function(){ //<------------------------ use doc ready handler
   $('.contenthead').click(function() {
    $(this).parent().next('.content').slideToggle('slow');
   });
});          //<-------------------------
</script> 
```

# facebook - 2 月 13 日符合申请要求

> ID：14686094
> 
> 赞同：-1
> 
> 时间：2013-02-04T11:45:28.367
> 
> 标签：facebook, facebook-apps

我需要知道如何检查我的应用程序是否与新更新兼容，以及如何继续将其设置为兼容迁移谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:08:00.157

只需查看开发者[路线图](https://developers.facebook.com/roadmap/#february-2013)。
如果您想了解有关某些特定 API 使用或实现的更多信息，您应该提供更多信息，如 PHPFreak12 所说。

# java - 在java中将字符串写入图像

> ID：14686099
> 
> 赞同：1
> 
> 时间：2013-02-04T11:45:42.357
> 
> 标签：java, javax.imageio

我正在尝试使用将字符串写入图像`ImageIo`。但是在写入大字符串时，完整的字符串不会写入该图像。

这是我的代码：

```
File url=new File(imgUrl);

BufferedImage image = ImageIO.read(url);

Graphics g = image.getGraphics();
g.setPaintMode();
g.setFont(g.getFont().deriveFont(30f));
g.drawString(text, 100, 100);
g.dispose(); 
```

此代码适用于小字符串。但是当字符串的宽度超过图像的宽度时，该图像上不会显示完整的字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:50:44.917

我有一个旧方法试试

```
public BufferedImage stringToImage(String text, Font font, Color bgColor, Color fgColor) {
    BufferedImage image = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2d = (Graphics2D) image.getGraphics();
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    FontRenderContext fc = g2d.getFontRenderContext();
    Rectangle2D bounds = font.getStringBounds(text, fc);

    //calculate the size of the text
    int width = (int) bounds.getWidth();
    int height = (int) bounds.getHeight();

    image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
    g2d = (Graphics2D) image.getGraphics();
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setFont(font);

    g2d.setColor(bgColor);
    g2d.fillRect(0, 0, width, height);
    g2d.setColor(fgColor);
    g2d.drawString(text, 0, (int)-bounds.getY());
    g2d.dispose();

    return image;
} 
```

并使用

```
BufferedImage image = stringToImage(text, font, bgColor, fgColor);
ImageIO.write(image, "jpg", file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:54:15.287

未经测试，但可以这样做：

```
JLabel label = new JLabel("<html><h2>Title</h2><p>large text ...</p>");
int w = image.getWidth();
int h = image.getHeigth();
label.setBounds(0, 0, w, h);
SwingUtilities.paintComponent(g, label, null, 0, 0, w, h); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:08:17.740

您可以使用 JTextArea 来布局文本：

```
JTextArea textArea = new JTextArea(text);
textArea.setFont(g.getFont().deriveFont(30f));
textArea.setOpaque(false);
textArea.setWrapStyleWord(true);
textArea.setLineWrap(true);
textArea.setBounds(0, 0, image.getWidth(), image.getHeight());
textArea.paint(g); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:05:15.943

有很多方法可以实现这一点。

*   `FontRenderContext`/`GlyphVector`如 pbaris 所述。请参阅[此答案](https://stackoverflow.com/a/6296381/418556)以获取例如 ![](../Images/ece95cff85ba4d2b70119d5522f685a6.png)
*   `FontMetrics`如[this answer](https://stackoverflow.com/a/9122499/418556)所示。
*   A `JLabel`（可能是多行）包含文本并调整其大小。正如 Joop EG 所说[`LabelRenderTest`](https://stackoverflow.com/a/5853992/418556)
    ![](../Images/b7c0f850e0b42d0b8cc83f84d5598571.png)

# c++ - 检查 std::queue 事件的另一种方法？

> ID：14686104
> 
> 赞同：4
> 
> 时间：2013-02-04T11:45:53.103
> 
> 标签：c++, multithreading, events, queue, std

好吧，我正在尝试处理某种**队列**。我有一个**IO 线程**，它专用于从 std::queue 中弹出数据，但**问题是我正在使用 Sleep()**以防止 100% cpu 常量检查。**当然还有其他线程会将项目添加到 std::queue。**

我怎样才能使线程处于**休眠**状态并且**仅**在 std::queue 不为空时启动？

**IO线程**

```
Sleep(100);
while (!myqueue.empty())
  {
     //process data FIFO
     myqueue.pop(); //pop out and continue
  } 
```

非常感谢，谢谢！哦，这对于 c++11 或 c++03 没关系 - 在 Windows 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T12:01:51.983

`std::queue`与**线程完全无关**。完全没有。它的`.empty()`成员不是线程安全的（只能重入）！这同样适用于它的所有其他成员。因此，多个线程可以随意使用不同的队列，但每次只有一个线程可以对每个实例执行任何操作。

C++11 或 C++03**很重要。**因为 C++11 定义了线程同步原语，而 C++03 没有，你必须使用 OS API。

在 C++11 中，您会对[`std::condition_variable`](http://en.cppreference.com/w/cpp/thread/condition_variable).

在 C++03 中，您会对[Boost.Thread](http://www.boost.org/libs/thread/)（大部分与 C++11 兼容）[Events](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)或[Semaphores](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438%28v=vs.85%29.aspx)感兴趣。

在任何一种情况下，它们`std::queue::push()`和`std::queue::pop()`它们本身都**必须**受到互斥的保护。`std::condition_variable`甚至强制您使用一个 ( ) [`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)，在 Windows API 中您将使用[Critical Section](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)。

在 Windows 上，C++11 类仅在 Visual Studio 2012 和 Windows 8 中可用。对于较旧的编译器，请使用 Boost（优点是可移植）或本机 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:00:55.657

你需要一个“条件变量”。每当一个线程将某些东西放在队列中时，它都会“通知”等待条件变量的线程。从队列中消费事件的线程等待条件变量。在有人通过条件变量通知它之前，它处于休眠状态。

Boost有一个很好的实现： http: [//www.boost.org/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref](http://www.boost.org/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref)

您正在使用锁来确保对队列的访问是线程安全的，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T12:54:10.443

我的建议是首先研究如何使用线程安全队列，然后考虑使用 boost::condition 信号来提供更多控制。

这是一个如何构建线程安全队列的示例：

```
#pragma once                                                                              
#include <queue>                                                                       

template<typename T>                                                                       
class thread_safe_queue                                                                    
{                                                                                          
    queue<T>   m_queue;                                                                    
    pthread_mutex_t m_mutex;                                                               
    pthread_cond_t  m_condv;                                                               

    public:                                                                                
    thread_safe_queue() {                                                                  
        pthread_mutex_init(&m_mutex, NULL);                                                
        pthread_cond_init(&m_condv, NULL);                                                 
    }                                                                                      
    ~thread_safe_queue() {                                                                 
        pthread_mutex_destroy(&m_mutex);                                                   
        pthread_cond_destroy(&m_condv);                                                    
    }                                                                                      
    void push(T& item) {                                                                   
        pthread_mutex_lock(&m_mutex);                                                      

        T itemcpy = std::move(item);                                                       
        m_queue.push(std::move(itemcpy));                                                  

        pthread_cond_signal(&m_condv);                                                     
        pthread_mutex_unlock(&m_mutex);                                                    
    }                                                                                      
    T pop() {                                                                              
        pthread_mutex_lock(&m_mutex);                                                      
        while (m_queue.size() == 0) {                                                      
            pthread_cond_wait(&m_condv, &m_mutex);                                         
        }                                                                                  

        T& _item = m_queue.front();                                                        
        T itemcpy = std::move(_item);                                                      

        m_queue.pop();                                                                     
        pthread_mutex_unlock(&m_mutex);                                                    
        return itemcpy;                                                                    
    }                                                                                      
    int size() {                                                                           
        pthread_mutex_lock(&m_mutex);                                                      
        int size = m_queue.size();                                                         
        pthread_mutex_unlock(&m_mutex);                                                    
        return size;                                                                       
    }                                                                                      
}; 
```

这就是你实例化它的方式：

```
thread_safe_queue<myclass> myqueue; 
```

如果您想使用事件信号，请考虑使用 boost::condition - fx。像这样：

```
#include <boost/thread/condition.hpp>
#include <boost/thread/mutex.hpp>

boost::mutex mtxWait;
boost::condition cndSignalQueueHasNewEntry;

bool WaitForQueueSignal(long milliseconds)
{
    boost::mutex::scoped_lock mtxWaitLock(mtxWait);
    boost::posix_time::time_duration wait_duration =  boost::posix_time::milliseconds(milliseconds); // http://www.boost.org/doc/libs/1_34_0/doc/html/date_time/posix_time.html
    boost::system_time const timeout=boost::get_system_time()+wait_duration; // http://www.justsoftwaresolutions.co.uk/threading/condition-variable-spurious-wakes.html
    return cndSignalQueueHasNewEntry.timed_wait(mtxWait,timeout); // wait until signal notify_one or timeout
} 
```

这就是你可以发出信号的方式

```
cndSignalQueueHasNewEntry.notify_one(); 
```

这就是你可以等待信号的方式

```
bool bResult = WaitForQueueSignal(10000); // timeout after 10 seconds 
```

# silverlight - 自动缩放到 ScrollViewer 中的父对象？

> ID：14686109
> 
> 赞同：0
> 
> 时间：2013-02-04T11:46:00.660
> 
> 标签：silverlight, xaml, scrollviewer

我的页面存在自动缩放问题。页面显示在 ScrollViewer 中，它通常在右侧约 33% 处包含一列，在左侧约 66% 处包含网格。

我只想自动缩放网格的高度（即独立于右侧的列），以便它根据窗口的大小进行拉伸，因此，它是**包含**ScrollViewer 而不是 ScrollViewer 本身的对象。

到目前为止，我还没有设法将这个想法付诸实践......我怎么可能向我的 xaml 代码解释我希望我的网格**与 ScrollViewer 的“父级”**而不是 ScrollViwer 本身相比被拉伸？

这是我在这里尝试完成的代码示例，如果它使我的情况更简单：

```
<Grid x:Name="Parent" MinHeight="400" MaxHeight="700">
  <ScrollViewer x:Name="Annoying ScrollViewer">
    <Grid x:Name="Page Content" ScrollViewer.VerticalScrollBarVisibility="Auto">
      <!-- IN ANOTHER USERCONTROL FAR, FAR AWAY... -->
      <Grid x:Name="Inner Page Content">
        <Grid.ColumnDefinitions>
          <ColumnDefinition />
          <ColumnDefinition Width="330" />
        </Grid.ColumnDefinitions>
        <Grid x:Name="Right column" Grid.Column="1"></Grid>
        <Grid x:Name="Left Grid" Grid.Column="0" VerticalAlignment="StretchToParentUserControl? Please?"></Grid>
      </Grid>
      <!-- BACK TO THE PARENT USERCONTROL -->
    </Grid>
  </ScrollViewer>
</Grid> 
```

**编辑：**我通过直接通过**App.Current.Host.Content.ActualHeight**在代码隐藏中使用窗口大小并减去父文件内容的高度来解决我的问题（它是静态的，所以我可以输入数字）。不过，我不会将此解决方案作为答案，因为它实际上并没有回答原始问题。

这是我（达到的）目标所要求的一点图（呃......只需在图片中切换“左”和“右”这两个词）： ![绘画](../Images/582673c0e2042b236b2e8a459b6d8785.png)

# java - matlab到android转换计算能量

> ID：14686112
> 
> 赞同：0
> 
> 时间：2013-02-04T11:46:12.383
> 
> 标签：java, android, matlab, audio-processing

我必须将 matlab 代码转换为 Android。此 matlab 代码包含能量计算，如下所示：

首先我将音频文件读入矩阵 x，将采样频率读入 fs，然后计算每个窗口的能量：

```
[x, fs] = wavread('C:\1359873105438.wav')
energy=energy+sum(x(1:fs).^2)*Tss; 
```

我不确定如何将其转换为 Android/Java。

你以前经历过吗？请帮我解决这个问题。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:07:10.133

本质上，您必须执行以下操作：

```
double x;//Read Wave in here
for (i=0;i<x.length;i++)
{
    energy+=Tss*(x[i]^2);
} 
```

如何阅读从[本文](http://www.labbookpages.co.uk/audio/javaWavFiles.html)借来的波形文件。

```
public class ReadExample
{
   public static void main(String[] args)
   {
      try
      {
         // Open the wav file specified as the first argument
         WavFile wavFile = WavFile.openWavFile(new File(args[0]));

         // Get the number of audio channels in the wav file
         int numChannels = wavFile.getNumChannels();

         // Create a buffer of 100 frames
         double[] buffer = new double[100 * numChannels];

         int framesRead;

         do
         {
            // Read frames into buffer
            framesRead = wavFile.readFrames(buffer, 100);

            // Loop through frames and look for minimum and maximum value
            for (int s=0 ; s<framesRead * numChannels ; s++)
            {
               //This is where you put the your code in
            }
         }
         while (framesRead != 0);

         // Close the wavFile
         wavFile.close();
      }
      catch (Exception e)
      {
         System.err.println(e);
      }
   }
} 
```

底线是，没有像 matlab 那样干净的方法。甚至没有直接读取波形文件的功能。尽管如此，使用网站提供的[WavFile类还是比较简单的。](http://www.labbookpages.co.uk/audio/files/javaWavFiles/WavFile.tar.gz)

# html - kindle 电子墨水阅读器的 CSS 样式约束

> ID：14686123
> 
> 赞同：1
> 
> 时间：2013-02-04T11:47:07.007
> 
> 标签：html, css, epub, kindle

我正在做一些电子书处理。这涉及到 Kindle 电子书的样式。使用较新的设备时，一切看起来都不错，但是每当我用较旧的 kindle e-ink 打开电子书时，某些样式都没有设置。样本：

```
.bordered-box{
    border-style: solid;
    border-width: 2px;
    border-color: #000000;
} 
```

这种风格在 kindle-fire 和 kindle paperwhite 上很好看，但在普通的 kindle 和 kindle dx 上不适用。

是否有任何可以应用于旧版本的约束和样式列表？

PS。在下面回答评论，以使其更加明显。mobis 是从 epub 生成的，它们是从 HTML 生成的。所以过程是HTML->epub->mobi

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T08:18:07.507

较旧的 Kindle（及其 mobipocket 文件格式渲染器）不支持这些 CSS 属性。

[在这里（PDF 链接）您可以找到](http://kindleformatting.com/book/files/KindleHTMLtags.pdf)标准支持的标签/CSS 属性。这[是一个不错的](http://bbebooksthailand.com/bb-CSS-boilerplate.html)常用 CSS 模板。

我也建议通读[官方发布指南](http://kindlegen.s3.amazonaws.com/AmazonKindlePublishingGuidelines.pdf)。

# mysql - 在连接创建期间无法在 Mysql 工作台中启动隧道管理器

> ID：14686125
> 
> 赞同：0
> 
> 时间：2013-02-04T11:47:15.980
> 
> 标签：mysql, opensuse

我正在使用opensuse 11.3，我已经通过编译源安装了Mysql工作台，当我创建新的数据库连接时它的显示

> 无法启动 SSH 隧道管理器

我应该怎么办 ？

# sql-server - 生成一个数字并保留它直到用户插入

> ID：14686129
> 
> 赞同：0
> 
> 时间：2013-02-04T11:47:35.003
> 
> 标签：sql-server, sql-server-2008, tsql

假设我们在 SQL 中生成我们的订单号。通常我得到下一个数字

```
SELECT COUNT(numbers)+1 FROM X 
```

等等

问题是，我想先给用户这个号码，然后等待用户输入内容，然后插入表格。但是由于有多个用户，我也希望他们得到号码而不是与第一个用户相同的号码，有没有办法更优雅地做到这一点？不久，我希望将号码保留给特定用户，如果他这样做，则将其插入，如果没有，只需释放该号码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:54:01.437

创建一个数字表。使用值预先填充表并将此表用作[队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)。事务可以通过对一行进行出队来保留一个数字。回滚时，该号码将再次可用。由于 using-a-table-as-queue 的 readpast 语义，其他事务可以同时出列其他数字。根据需要添加更多数字（插入更多行）。

如果这看起来有点矫枉过正，请放心：事实并非如此。简单的解决方案可能不考虑并发或回滚，这不是微不足道的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:30:43.097

您可以插入表中，然后在用户提交数据时对其进行更新。

要绕过“释放”数字，您可以： 在桌子上放置一个标志来说明该行是否“空闲”。当您第一次插入标志时，它是“非免费的”。如果用户提交了他们的数据，请将其保持为“非免费”。

如果他们发布了他们的号码，请将其标记为“免费”。

为用户分配数字时，找到第一个“空闲”行，如果没有，则插入新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:08:19.793

如果您不需要在系统中连续排列所有数字而没有间隙，您可以制作包含身份类型列的简单表格。因此，将虚假记录插入其中并`@@IDENTITY`用作生成的数字。这种解决方案当然有一些缺点，正如 Remus Rusanu 提到的“幼稚解决方案”。

如果可能，请避免在真正将其存储到数据库之前将其显示给用户。您可以生成一些抽象数字以供临时参考，例如从日期和时间，并且在将数据插入数据库后，您可以显示您的真实数字。几乎不需要编码，但 100% 可靠。

# jquery - 在 svg 中的组元素顶部呈现文本元素

> ID：14686133
> 
> 赞同：0
> 
> 时间：2013-02-04T11:47:45.010
> 
> 标签：jquery, asp.net, svg

我有一个 svg 地图（通过 jquery 呈现为 dom），其中包含一个或两个路径元素的组元素。

我想在每个组元素的顶部显示一些文本。

我使用 jquery 来查找该组元素的偏移量，并通过将组元素的 offset.left 和 offset.top 作为 x&y 坐标传递给它来创建文本元素。

但是文本不会显示在组元素的顶部。相反，它显示在其他地方。

SVG：

```
 <g class="clsTable" id="svg_20">
   <path d="m917.57495,396.125l-0.04999 ..." fill="#919100" clip-rule="evenodd" fill-rule="evenodd" id="svg_23"/>
   <path d="m916.32501,397.97501l0.09998,2.85001l13.90002,0l0 ..." fill="#FFFF00" clip-rule="evenodd" fill-rule="evenodd" id="svg_26"/>
  </g> 
```

查询：

```
var x = $("#svg_20").offset().left;
var y = $("#svg_20").offset().top;        
var _text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
_text.setAttribute('x', x);
_text.setAttribute('y', y);
_text.setAttribute('visibility', 'visible');
_text.setAttribute('id', 'lbl');
_text.setAttribute('objectid', "#svg_20");
textNode = document.createTextNode("HI");
_text.appendChild(textNode);
$('svg').append(_text); 
```

输出：

![在此处输入图像描述](../Images/e9533c96f334f4c99c3dce11fa7c2285.png)

我尝试了 g 的 getBoundingClientRect() 和子路径元素的 getBBox() 。但我得到对象不支持 Javascript 中的这个属性错误。我做错什么了吗？...

```
$("#svg_26").getBBox(); 
```

我的应用程序在 asp.net 中，目标浏览器是 chrome 和 safari。我没有使用画布元素。相反，我直接在主 div 的 innerHtml 内将 svg 渲染为 dom。

**如何在 jquery 中找到正确的坐标并将标签放在该组元素图像的顶部？**

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:40:10.080

您正在尝试在 jQuery 对象上调用 DOM 方法。因此错误“对象不支持此属性”。您需要直接在 DOM 元素上调用这些方法。

例子：

```
$("#svg_26")[0].getBBox();
// or
$("#svg_26").get(0).getBBox(); 
```

请参阅：[如何从 jQuery 对象中提取本机 DOM 元素？](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_pull_a_native_DOM_element_from_a_jQuery_object.3F)

# python - Python IPC - Twisted，RabbitMQ，

> ID：14686136
> 
> 赞同：6
> 
> 时间：2013-02-04T11:48:00.027
> 
> 标签：python, ipc, twisted, rabbitmq, zeromq

我想在 Python 中创建 2 个应该相互通信的应用程序。其中一个应用程序应该像服务器一样运行，第二个应用程序应该是客户端的 GUI。它们可以在同一系统（同一台机器上）或远程和不同设备上运行。

我想问你，我应该使用哪种技术 - AMQP 消息传递（如`RabbitMQ`），`Twisted`如服务器（或`Tornado`）或 ZeroMQ 并将应用程序连接到它。将来我想进行某种身份验证等。

我已经阅读了很多问题和文章（例如：[Why do we need to use rabbitmq](https://stackoverflow.com/questions/5132648/why-do-we-need-to-use-rabbitmq)），很多人都在说“rabbitmq 和 twisted 是不同的”。我知道他们是。我真的很想知道这些差异**以及**为什么在这种情况下这些解决方案中的一个会比另一个更好。

**编辑：** 我想用它来满足以下要求：

1.  一次将有超过 1 个用户连接 - 我认为将有 1 - 10 个用户连接到同一个程序，他们将协同工作
2.  发送的数据是“消息”，告诉用户做了什么——比如远程调用（但不要专注于此，因为 GUIS 可以用不同的语言编写，所以消息将类似于 json 信息）。
3.  该系统应该允许协作工作——因此它应该尽可能地具有交互性。（当用户输入或执行某些操作时，数据将一直发送）。

**另外，我很想听听为什么一种解决方案不仅在这种特殊情况下会比另一种更好。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T19:46:55.727

Twisted 用于通过[Reactor Pattern](http://en.wikipedia.org/wiki/Reactor_pattern)为您提供异步网络来解决 C10k 网络问题。它也很方便，因为它提供了一个很好的并发抽象，因为 Python 中的线程/并发不像 Erlang 那样简单。因此，有些人使用 Twisted 来调度工作任务，但这不是它的设计目的。

RabbitMQ 基于[消息队列](http://en.wikipedia.org/wiki/Message_queue)模式。这一切都与**可靠的**消息传递有关，与网络无关。我强调**可靠**的部分，因为有许多不同的异步网络框架（例如 Vert.x）提供消息传递（也称为 pub/sub）。

大多数人通常将这两种模式结合在一起创建一个“消息总线”，它可以满足各种网络需求，而不会出现不必要的网络阻塞，并实现出色的集成和可扩展性。

“消息队列”与网络“反应器循环”如此相配的原因是您**不应该**阻塞反应器循环，因此您必须将*阻塞*工作分派给其他进程（线程、lwp、单独的机器进程、队列等..)。在实践中，最简洁的方法是分布式消息传递。

根据您的要求，如果您希望结果立即显示并扩展，您应该使用异步网络，但是您可能会使用一个简单的系统，只要您只有少数客户端，就可以进行轮询。所以问题是总共有多少用户（Twisted）？您希望交付更新的可靠性如何（RabbitMQ）？最后，您是否希望您的架构与语言和平台无关...也许您以后想使用 Node.js（专注于消息队列而不是异步网络...即 RabbitMQ）。就我个人而言，我会看看[Vert.x](http://vertx.io/)，它允许你用 Python 编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:15:12.627

当有人告诉您 Twisted 和 RabbitMQ 不同时，是因为比较两者就像比较具有不同目标的两个事物。

Twisted 是一个异步框架，类似于 Tornada。RabbitMQ 是一个消息队列系统。你不能直接比较每一个。

您应该将您的问题变成两个新问题，第一个问题是我应该使用哪种协议来传达我的流程？答案可以用诸如 amqp、Protocol Buffers 之类的词来找出...

另一个，我应该使用哪个框架来编写我的客户端和服务器程序？在这里，答案可能落在 Twisted、Tornado、....

# java - Autowired Hibernate Template 在线程中使用时丢失会话

> ID：14686141
> 
> 赞同：2
> 
> 时间：2013-02-04T11:48:11.170
> 
> 标签：java, multithreading, spring, hibernate, sessionfactory

我正在开发一个 spring hibenrate 应用程序并停留在一个点上。我只有 1 个控制器，只有一项服务。服务更新数据库中的数据并将更新后的 id 返回给客户端并启动线程。

```
 final Template template = templateBL.getTemplateById(Long.valueOf(templateId));

    Long templateStatusId = templateBL.updateTemplateStatus(template);
    Thread thread = new Thread(templateBL.setTemplate(template, templateStatusId));
    thread.start();
    return templateStatusId; 
```

在 thread.start() 我得到这个错误

```
Exception in thread "Thread-8" org.hibernate.SessionException: Session is closed!
at org.hibernate.impl.AbstractSessionImpl.errorIfClosed(AbstractSessionImpl.java:72)
at org.hibernate.impl.SessionImpl.getBatcher(SessionImpl.java:297)
at org.hibernate.loader.Loader.doQuery(Loader.java:770)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
at org.hibernate.loader.Loader.loadCollection(Loader.java:2082)
at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:62)
at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:628)
at org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)
at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1853)
at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:369)
at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
at org.hibernate.collection.PersistentBag.iterator(PersistentBag.java:272) 
```

我正在使用休眠模板自动装配并在我的 DAO 层上应用@transactional。我的配置是：

```
 <bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">false</prop>
            <!-- currently set to UPDATE -->
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
 <bean>
 <bean id="transactionManager" 
     class="org.springframework.orm.hibernate3.HibernateTransactionManager"> 
          <property name="sessionFactory" ref="sessionFactory" /> 
 </bean> 
```

我没有得到可能出错的地方。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:03:45.683

Hibernate 会话不是线程安全的，并且不能被多个线程使用。如果您启动一个新线程，这个新线程应该从会话工厂获得一个新会话。如果将实体传递给新线程，则应首先将实体与会话分离。

否则，正如您的代码所做的那样，任何初始化惰性集合的尝试都将调用会话中的方法。会话将被关闭（从第一个线程），导致您得到异常，或者不会，但是您将在两个线程之间进行共享会话，这将导致各种随机问题。

# web-services - org.apache.axis2.AxisFault：缺少 wsse：请求中的安全标头

> ID：14686143
> 
> 赞同：2
> 
> 时间：2013-02-04T11:48:17.130
> 
> 标签：web-services, security, header, axis2

我在axis2-1.6.2、rampart-1.6.2和apache Tomcat 7中工作。基于此链接[http://thilinamb.wordpress.com/2009/10/20/saml-2-0-token-profile- support-in-rampart-1-5/#comment-118](http://thilinamb.wordpress.com/2009/10/20/saml-2-0-token-profile-support-in-rampart-1-5/#comment-118)，我已经创建了 web 服务并部署到 Tomcat 服务器。然后我从我的 IDE（Netbeans）运行客户端代码，我收到以下错误

```
Exception in thread "main" org.apache.axis2.AxisFault: Missing wsse:Security header in request
    at org.apache.rampart.handler.RampartReceiver.setFaultCodeAndThrowAxisFault(RampartReceiver.java:180)
    at org.apache.rampart.handler.RampartReceiver.invoke(RampartReceiver.java:99)
    at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
    at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
    at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:364)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
    at client.Client.main(Client.java:79)
Caused by: org.apache.rampart.RampartException: Missing wsse:Security header in request
    at org.apache.rampart.RampartEngine.process(RampartEngine.java:114)
    at org.apache.rampart.handler.RampartReceiver.invoke(RampartReceiver.java:92)
    ... 11 more 
```

有人有想法，请告诉我？

谢谢

# iphone - 如何停止for循环并执行另一种方法，然后返回继续使用objective-c？

> ID：14686146
> 
> 赞同：0
> 
> 时间：2013-02-04T11:48:29.613
> 
> 标签：iphone, ios, objective-c, web-services, for-loop

我正在使用 SOAP WebService 并使用 for 循环来循环我收到的帐户。

在每个循环中，我都会向 WebService 调用另一个请求，因此在发出请求时我需要在 for 循环中，去获取响应，然后继续循环。

下面是 for 循环的代码：

```
for (A2AWCAccount* account in accountList.Accounts) {
      [_internalAccounts addObject:[[AccountDO alloc] initWithAccountName:[account localizedDescription] AccountNumber:account.Number Balance:[account.CurBal doubleValue] Currency:account.Curr]];

      DataBank* dataBank = [DataBank getInstace];

      A2AService* service = [A2AService service];
      service.logging = YES;

      A2AWCListCard* accountList = [A2AWCListCard alloc];
      accountList.CustMnemonic = dataBank.customerId;
      accountList.SessionID = dataBank.sessionId;
      accountList.AccountNumber = account.Number;
      accountList.Type = @"V";

      // here i make the request
     [service wrListCard:self listCard:accountList];
} 
```

这是获取响应的方法的代码

```
- (void) onload:(id)value {
if ([value isKindOfClass:[A2AWCListCard class]]) {
    A2AWCListCard* obj = (A2AWCListCard*) value;
    if (obj.ErrorCode != 0) {
        if (obj.ErrorCode == 109) {
            [self handleSessionError];
            return;
        }else if (obj.ErrorCode == 116)
        {
            UIAlertView* alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Info", @"Info") message:[obj localizedError] delegate:self cancelButtonTitle:NSLocalizedString(@"Ok", @"Ok") otherButtonTitles:nil, nil];
            alert.tag = 5;
            [alert show];
            return;
        }
        [self handleRequestError:[obj localizedError] closeView:YES];
        return;
    }

    for (A2AWCCard* account in obj.Cards) {
        [_cards addObject:[[CardDO alloc] initWithCardNumber:account.CardNo balance:[account.CurBal doubleValue] minimumPayment:account.CardAcc currencyCode:account.Status status:account.Curr cardName:[account localizedDescription] cardNo:account.Number]];
        _totalBalance += [account.CurBal doubleValue];

    }

    [cardsPicker setNeedsDisplay];
    [cardsPicker reloadAllComponents];  

    _servicesInitialized = YES;
}
} 
```

这里发生的问题是循环使它调用 N 次取决于帐户的数量，例如，如果有 3 个帐户，它会发出 3 个请求，然后我等待 3 个响应，因此有时它会相互贡献，因为服务器有点慢.

有人帮忙吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:30:06.787

我同意这些评论......你有一个架构问题。

不要这样做：

![你正在尝试做我在这里描述的事情：](../Images/845484b8cfd141c076e0ba53a310162d.png)

而是这样做：

![你应该做的是这样的：](../Images/8a9f1e30802254538382da385c02887e.png)

1 所以首先你知道有多少个账户，所以保留这些信息。

2 创建一个队列并将其限制为 3 个操作

3 观察您的队列以了解它何时完成处理计数

4 现在循环您的帐户，将操作添加到您的队列

注意：您可以使用 GCD，但这更适合您需要做的事情

5 您可以将 NSOperation 子类化以将信息返回到您的主队列

注意：相反，您可以将此方法与 NSURLConnection 一起使用

(sendAsynchronousRequest:queue:completionHandler:)

6 在观察队列的函数中，当您达到计数时...

```
A Kill the queue

B Do something with the returned data, probably in some array 
```

祝你好运！

# javascript - 如何使用 Html5 模板忽略某些 javascript 库？

> ID：14686155
> 
> 赞同：3
> 
> 时间：2013-02-04T11:49:35.183
> 
> 标签：javascript, configuration, ide, netbeans-7

我刚刚将我的 NetBeans 从 7.3 Beta 2 升级到 7.3 RC1。在 Beta 2 中，我只能排除完整文件夹（使用 php 项目类型）。为了忽略特定文件，我编辑了 project.properties 文件。这极大地帮助我忽略了包含库的多个版本。

在 RC1 中，我们有 Html5 项目类型。我不再找到任何忽略文件的选项，并且将 ignore.path 添加到 project.properties 似乎不再对我有用。

所以我的问题是，有没有办法忽略 Html 5 项目类型的文件？如果是这样，怎么做？

如果没有，我解决这个问题的唯一方法是将库源移到我的项目之外并且只包含 debug-all-with-comments 类型的文件，或者如果我的库版本过多，你将如何解决这个问题解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T14:55:31.207

部分解决方案可以从 HTML5 迁移到 Netbeans 中的 PHP 项目。

1.  将项目源文件文件夹中的 nbproject 文件夹重命名为 nbproject-html 以存储 netbeans 设置。
2.  在 Netbeans 中使用现有源创建 PHP 项目。
3.  转到项目 - 属性 - 忽略的文件夹 - 添加您的库。

现在代码完成要快得多。此外，我还可以使用 Ctrl + Space 解决记录标签的问题，因为 Netbeans 显然比 HTML5 更好地支持 php。

在我们的例子中，它是 netbeans 8 和基于 ExtJS 的纯 javascript 企业项目。

# hibernate - 在 setter 中实现验证或使用 Hibernate Validator

> ID：14686157
> 
> 赞同：0
> 
> 时间：2013-02-04T11:49:36.313
> 
> 标签：hibernate, gwt, bean-validation, setter, hibernate-validator

我在 GWT + Hibernate 项目中面临设计决策。

我将使用公司实体来解释我的问题。

```
@Entity
@Table(name = "Company")
public class Company extends LightEntity implements BaseSerializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "Id")
    private int id;

    @Column(name = "Code")
    private String code;
    @Column(name = "Name")
    private String name;

    @Column(name = "Address")
    private String address;

    @Column(name = "ContactNumber1")
    private String contactNumber1;

    @Column(name = "ContactNumber2")
    private String contactNumber2;

    @Column(name = "EMail")
    private String email;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "company", cascade = CascadeType.ALL)
    private List<CompanyRegistration> companyRegistrations = new ArrayList<CompanyRegistration>();

    public Company() {
    }
    public Company(String code, String name) {
        this.setCode(code);
        this.setName(name);
    }

    // getters & setters
} 
```

有效的公司对象必须始终具有有效的代码和名称。其余属性是可选的。因此，我提供了一个双参数构造函数来确保创建一个有效的对象。

现在。

我习惯于验证 setter 中的数据。我还在构造函数中使用这些设置器。这些确保新对象始终具有有效状态。这是/曾经是我实施 Hibernate 实体的计划。

但是，GWT-RPC 要求使用默认的 noargs 构造函数，以便它可以用于延迟绑定。但这也将允许任何人创建一个空对象，这在我的大多数 Hibernate 实体中是不可取的。例如，必须始终使用代码和名称构建公司。noargs 构造函数违反了该规则。

现在，Hibernate 已经为验证框架实现了一个标准（JSR-303，如果我没记错的话）。它允许您在已创建的对象上调用验证。

我的问题是由于 noargs 构造函数而出现的。如果它不是强制性的，我会取消 setter 中的验证。

如果我在 setter 中实现验证，这意味着无效对象将尽快失败。我不需要在客户端对对象调用验证。但是，不能以这种方式验证空对象（使用 noargs 构造函数创建）。它可能会进入服务，这意味着我还必须在服务层实现验证，其中很多可能与设置器相同。

如果我实现了验证框架，那么我必须对我在客户端创建的每个对象调用验证。如果我忘记验证一个，它可能会以无效状态进入服务层。但是，我可以轻松地在服务层上使用相同的框架。

我想到的一种解决方案是无论如何都要在 setter 中实现验证，但也在服务层中使用 Validator，然后再将对象发送到数据库中。这样，客户端将自动受到设置器的限制。另一方面，如果一个空对象被发送到服务器端，它将被服务层的验证器捕获。在这两种情况下都会向用户抛出异常。

然而，我认为这不是最好的解决方案。所以，我想入手一份。

编辑 - 我无论如何都使用注释来对实体字段施加约束，以便 Hibernate 可以在持久化对象之前使用它们进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:56:31.420

如果您的问题仅源于 GWT-RPC 的强制零参数构造函数，请注意您可以使开发人员无法访问此构造函数（即使`private`您愿意）；GWT-RPC 将使用反射访问它，无论其可见性如何。

# jsf - 使用 f:convertNumber 格式化货币值

> ID：14686162
> 
> 赞同：0
> 
> 时间：2013-02-04T11:49:58.747
> 
> 标签：jsf, jakarta-ee, xhtml

我必须自定义一个 JSF XHTML 模板，它有 2 个不同的值并显示它们的总和

```
<h:outputText value="#{Invoice.totalCharge/100 + Invoice.subscription/100}">
          <f:convertNumber currencySymbol="&#163;" groupingUsed="#{true}" maxFractionDigits="4" type="currency"></f:convertNumber>
        </h:outputText>

<h:outputText value="#{Invoice.tax/100}">
          <f:convertNumber currencySymbol="&#163;" groupingUsed="#{true}" maxFractionDigits="4" type="currency"></f:convertNumber>
        </h:outputText>

<h:outputText value="#{Invoice.grandTotal/100+Invoice.subscription/100}">
          <f:convertNumber currencySymbol="&#163;" groupingUsed="#{true}" maxFractionDigits="4" type="currency"></f:convertNumber>
        </h:outputText> 
```

值显示为

`720.1252`+

`144.025`=

`864.1502`

`maxFractionDigits`我故意设置为 4 以证实我的怀疑。最后必须是 2，但在这种情况下，这就是问题所在

用小数位数 = 2 你得到

`720.13`+

`144.03`=

`864.15`

对于查看打印输出的人来说，这简直是废话。我应该何时以及如何进行数学计算，以便结果对办公室的豆类柜台有意义，而不是像我们这样的技术人员？我无法访问源代码，我只能更改这个 XHTML 模板。

# java - 从 Eclipse 停止 jboss 服务器时出现异常

> ID：14686165
> 
> 赞同：-5
> 
> 时间：2013-02-04T11:50:05.427
> 
> 标签：java, eclipse, jboss, shutdown

从 Eclipse 中关闭 JBoss 服务器时出现异常。我使用 Jboss 4.2.2GA。

感谢您的意见

```
java.lang.NoClassDefFoundError: org/jboss/Shutdown
Caused by: java.lang.ClassNotFoundException: org.jboss.Shutdown
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:58:22.247

看到[这个问题](https://issues.jboss.org/browse/JBAS-7521)，它已被修复。JBoss AS4 已经很老了，所以他们可能不会向后移植那么旧的修复程序。除非您计划更新，否则您可能不得不忍受它。

其他选择是自己调整 shutdown.sh 脚本。

但是，如果问题仅存在于 Eclipse 中，而不是您自己手动运行脚本，则这是 Eclipse-JBoss 集成中的问题，在这种情况下，更新应该会有所帮助。

# javascript - 从父级 iframe 打开的弹出窗口中打开新选项卡（父级）上的 URL

> ID：14686166
> 
> 赞同：1
> 
> 时间：2013-02-04T11:50:07.173
> 
> 标签：javascript, html

从 iframe 触发弹出窗口。在这个弹出窗口中，我试图将用户链接到新页面，这个页面应该在父级的新选项卡上打开，但是对于弹出窗口，在这种情况下，父级是 iframe 而不是 iframe 的容器（iframe 的父级）我实际上想在哪里打开一个新标签。

这可能吗？如果没有，我如何在新的浏览器窗口上打开链接？

到目前为止，我尝试了这个但没有工作：

```
<button onclick="parent.window.open=('http://mysite.com/app_dev.php/gifts','_blank')" class="btn btn-primary">Altri Regali »</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:57:41.153

Try instead

```
<button onclick="window.open('http://mysite.com/app_dev.php/gifts','_blank')" class="btn btn-primary">Altri Regali »</button> 
```

Fiddle [**here**](http://jsfiddle.net/8RdLx/)

# installation - 如何安装 node-sqlserver

> ID：14686175
> 
> 赞同：-1
> 
> 时间：2013-02-04T11:50:31.407
> 
> 标签：installation, apt-get, aptitude

我试过 apt-get install aptitude 但我得到了这个：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
You might want to run 'apt-get -f install' to correct these:
The following packages have unmet dependencies:
 aptitude : Depends: libboost-iostreams1.42.0 (>= 1.42.0-1) but it is not going to be installed
            Depends: libcwidget3 but it is not going to be installed
            Recommends: libparse-debianchangelog-perl but it is not going to be installed
 phpmyadmin : Depends: php5-mysql but it is not going to be installed or
                       php5-mysqli but it is not installable
              Recommends: mysql-client
E: Unmet dependencies. Try 'apt-get -f instal 
```

谁能建议我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:16:14.153

你有什么 apt-get 建议和执行的吗

`root# apt-get -f install`?

你的 /etc/apt/sources.list 文件呢？它是最新的吗？

# c++ - 修改 Boost Python 包装类？

> ID：14686176
> 
> 赞同：2
> 
> 时间：2013-02-04T11:50:32.193
> 
> 标签：c++, boost, boost-python

如何访问已为给定 C++ 类注册的 boost::python::class_ 对象？我正在导入一个 boost::python 模块，它为 boost::property_tree::ptree 定义了一个包装器，但我想在这个包装器定义中添加其他方法。当我尝试创建一个新的包装器时，Boost Python 抱怨已经声明了一个处理程序，并忽略了我的新定义。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:11:21.877

按照 daramarak 的建议，以及 Boost Python 教程[Extending Wrapped Objects In Python](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/tutorial/doc/html/python/techniques.html#python.extending_wrapped_objects_in_python "在 Python 中扩展包装对象")，我从 python 中扩展了这个类。Python 和 Boost::Python 对绑定成员函数和第一个参数是对象引用（或指针）的函数几乎没有区别。因此，您可以像这样在 C++ 中定义一个函数：

```
bool ptree__contains(boost::property_tree::ptree* self, const std::string& key) {
    return self->find(key)!=self->not_found();
} 
```

然后像这样在 Python 中扩充导入的类：

```
from other_module import ptree
from my_module import ptree__contains

# The __contains__ method is a special api function 
# that enables "foo in bar" boolean test statements
ptree.__contains__ = ptree__contains

test_ptree = ptree()
test_ptree.put("follow.the.yellow.brick.road", "OZ!")

print "follow.the.yellow.brick.road" in test_ptree
# > true 
```

我将我的扩充代码添加到`__init__.py`我的模块中，这样我的模块的任何导入都会自动将所需的方法添加到外部对象。我定义了一个修改类的函数，调用这个函数，然后删除它以清理我的命名空间。或者，您可以从`__all__`列表中排除此函数，以防止它被`from module import *`语句导出。奇迹般有效！再次感谢达马拉克。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T13:59:54.067

我有一个类似的问题，但有一个区别：由于类导出定义在我自己的代码中，我能够更改第`boost::python::class_`一次调用的部分。

如果这在您的情况下也是可能的，则解决方案可能如下所示：

```
static auto ptree_class_ = boost::python::class_< ptree > ( "ptree" );

// somewhere later in your code:
ptree_class_.def("contains", &ptree__contains); 
```

这消除了对额外 Python 代码的需求——一切都在 C++ 中完成。

在这里你可以找到我原来的解决方案：[https ://stackoverflow.com/a/30622038/4184258](https://stackoverflow.com/a/30622038/4184258)

# android - 如何在Phonegap 2.0 中实现购买inappbilling？

> ID：14686180
> 
> 赞同：0
> 
> 时间：2013-02-04T11:50:54.660
> 
> 标签：android, cordova, phonegap-plugins, in-app-billing

我已经实施[了 inappBilling](https://github.com/phonegap/phonegap-plugins/tree/master/Android/InAppBilling)。单击“购买和拥有的产品”按钮时，我没有收到任何错误。结帐也不起作用。而且我想在phonegap 2.0中实现以下功能

```
1>android.test.purchased
2>android.test.canceled 
3>android.test.refunded
4>android.test.item_unavailable 
```

这是在使用静态响应测试应用内购买部分中提到[的](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T09:48:58.827

cordova/phonegap 插件最近升级到了**In App Billing API的****V3**。我强烈建议使用更稳定的新版本插件再试一次。

 **[https://github.com/poiuytrez/AndroidInAppBilling](https://github.com/poiuytrez/AndroidInAppBilling)**

# ruby-on-rails - STI & 多态关联 & user_id

> ID：14686181
> 
> 赞同：0
> 
> 时间：2013-02-04T11:50:56.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphic-associations, single-table-inheritance

所以我有一个资产模型，它被图像和文件作为 STI 继承。产品有许多图像作为资产。这种多态关联工作正常，但我不知道如何将 user_id 添加到每个资产。资产始终属于用户，无论它是图像还是文件。请看我下面的代码。我很确定在控制器创建方法中我需要做一些事情，但我不确定是什么？我试过合并 :user_id 但这只是在查看控制台日志时返回 nil 。理想情况下，我还想做的是@user.images，它将显示用户上传的所有图像，甚至是@user.files

```
class User < ActiveRecord::Base
  has_many :products
  has_many :assets
end

class Asset < ActiveRecord::Base
  belongs_to :assetable, :polymorphic => true
  belongs_to :user
end

class Image < Asset
  mount_uploader :filename, ImageUploader
  attr_accessible :filename, :assets
end

class Product < ActiveRecord::Base
  belongs_to :user

  has_many :images, as: :assetable
  accepts_nested_attributes_for :images 

  attr_accessible :name, :price, :images_attributes
  validates_presence_of :name
end

class ProductsController < ApplicationController
 def create
   @product = Product.new(params[:product])
   @product.user_id = current_user.id

   params[:product][:images_attributes].each do |key, image|
     # image.user_id = current_user.id
     image.merge(:user_id => 1)
   end

   @product.save
 end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:16:32.993

```
def create
  params[:product][:images_attributes].each do |key, image|
    image.merge!(:user_id => current_user.id)
  end

  @product = Product.new(params[:product])
  @product.user_id = current_user.id

  @product.save
end 
```

顺便说一句，您最好将继承逻辑替换到模型中：

```
class Image < Asset
  mount_uploader :filename, ImageUploader
  attr_accessible :filename, :assets

  before_save do
    self.user = assetable.try(:user)
  end
end

# controller

def create
  @product = Product.new(params[:product])
  @product.user = current_user
  @product.save
end 
```

# ruby - IOError：Ruby SFTP 中的关闭流

> ID：14686183
> 
> 赞同：4
> 
> 时间：2013-02-04T11:51:01.953
> 
> 标签：ruby, sftp, net-sftp

[以下代码尝试通过 SFTP 和Net::SFTP](http://net-ssh.rubyforge.org/sftp/v2/api/)列出远程目录的条目，但如果目录包含大量文件（约 6000 个文件），则会导致“关闭流”IOError：

```
require 'net/ssh'
require 'net/sftp'
Net::SFTP.start('hostname', 'username', :password => 'password') do |sftp|
  # list the entries in a directory
  sftp.dir.foreach("/") do |entry|
    puts entry.longname
  end
end 
```

避免它的最佳方法是什么？版本是 net-sftp Gem：2.0.5 和 net-ssh Gem：2.2.1，Ruby：1.8.7。完整的错误消息如下：

```
IOError: closed stream
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/ruby_compat.rb:33:in `select'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/ruby_compat.rb:33:in `io_select'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/ruby_compat.rb:32:in `synchronize'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/ruby_compat.rb:32:in `io_select'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/transport/packet_stream.rb:73:in `available_for_read?'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/transport/packet_stream.rb:85:in `next_packet'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb:170:in `poll_message'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb:165:in `loop'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb:165:in `poll_message'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:451:in `dispatch_incoming_packets'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:213:in `preprocess'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:197:in `process'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:161:in `loop'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:161:in `loop_forever'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:161:in `loop'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:110:in `close'
from ~/.rvm/gems/ruby-1.8.7-p330/gems/net-sftp-2.0.5/lib/net/sftp.rb:36:in `start' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-16T17:35:55.643

该行为可能是故意的，如果我们查看[net-sftp/lib/net/sftp/operations/dir.rb](https://github.com/net-ssh/net-sftp/blob/master/lib/net/sftp/operations/dir.rb)`dir`中的源代码，我们会看到一个关闭操作：

```
def foreach(path)
  ..  
ensure
  sftp.close!(handle) if handle
end 
```

这个关闭操作可能会导致关闭流错误。如果它不表示错误，则可能会捕获 IOError 异常。偶尔运行 SSH 事件循环似乎也有帮助：

```
begin   
  ..
  sftp.dir.foreach("/") do |entry|
    puts entry.longname
    # ...
    sftp.loop # Runs the SSH event loop 
  end
rescue IOError => Ex   
  puts "*** We are done: "+Ex.message 
end 
```

# ios - 取消隐藏视图并执行其他代码时，视图不显示

> ID：14686185
> 
> 赞同：1
> 
> 时间：2013-02-04T11:51:10.607
> 
> 标签：ios, uiview

执行附加代码时，我遇到了取消隐藏 UIView 的问题。代码如下：

```
- (void)someMethod {
    self.oldView.hidden = YES;
    self.newView.hidden = NO;

    NSString *parameter = self.myLabel.text;
    [AnotherObject doSomethingWith:parameter];
} 
```

该`doSomething:`方法是一种真正的计算密集型方法，需要几秒钟。这种行为现在有点出乎意料：

1.  oldView 被隐藏
2.  需要几秒钟（似乎`doSomething:`已执行
3.  显示新视图

有什么问题，我怎样才能在执行代码之前显示 newView `doSomething:`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:56:19.167

使用此代码：

```
- (void)someMethod {
    self.oldView.hidden = YES;
    self.newView.hidden = NO;

    NSString *parameter = self.myLabel.text;
    [self performSelector:@selector(doSomethingWith:) withObject:parameter afterDelay:0.1];
} 
```

这将在 0.1 秒延迟后调用您的方法，因此此时您的 newView 将显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:51:01.887

使用此代码：

```
- (void)someMethod {
    self.oldView.hidden = YES;
    self.newView.hidden = NO;

    NSString *parameter = self.myLabel.text;
   [NSThread detachNewThreadSelector:@selector(doSomethingWith:) toTarget:self   withObject:parameter];

} 
```

并恢复我..

# java - 如何正确回滚 JTA 事务？

> ID：14686187
> 
> 赞同：5
> 
> 时间：2013-02-04T11:51:23.140
> 
> 标签：java, jakarta-ee, jpa, jta

回滚容器管理的 JTA 事务的事务的**正确**方法是什么？

我理解这一点：[调用 entityManager.getTransaction() 时出现 EJBException](https://stackoverflow.com/questions/6451846/ejbexception-when-calling-entitymanager-gettransaction) ，我无法获取事务实例。[我在这里](http://www.coderanch.com/t/425702/EJB-JEE/java/setRollBackOnly-sessionBean-CMT-JTA)阅读了一个解决方案，但我不确定这是否正确。

我也知道，如果我抛出异常，事务将被回滚。

但我的问题是：如果我想（必须）使用容器管理`EntityManager`，那么在其中回滚事务的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T12:11:48.043

Code Ranch 上的答案是正确的，你必须使用`SessionContext`

```
@Resource
private SessionContext ctx;

//and then in method
if(fail) {
    ctx.setRollBackOnly(); 
} 
```

另请参阅这篇[文章](http://www.developerscrappad.com/547/java/java-ee/ejb3-x-jpa-when-to-use-rollback-and-setrollbackonly/)。

# android - Android ActionBarSherlock ProgressBar 总是不确定

> ID：14686189
> 
> 赞同：2
> 
> 时间：2013-02-04T11:51:33.773
> 
> 标签：android, actionbarsherlock, android-progressbar

我有一个扩展 SherlockActivity 的活动，但进度条始终是不确定的，即使没有将其设置为 true 或在将其设置为 false 之后也是如此。

我已经检查了导入：

```
import com.actionbarsherlock.view.Window; 
```

该活动实际上扩展了 Sherlock：

```
public class MyActivity extends SherlockActivity { 
```

这是 onCreate 方法：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setProgressBarIndeterminate(false);
    setSupportProgressBarIndeterminateVisibility(false); 
```

我在任何地方都没有将其设置为 true，但它仍然出现而不离开。

清单：

```
 <activity
        android:name=".activities.MyActivity"
        android:screenOrientation="portrait" >
    </activity> 
```

关于可能导致这种情况的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:18:55.617

我只是启用和禁用 ActionBarShareLock ProgressBar。

不确定，但可能对您有帮助。下面是我的代码：

```
public class IndeterminateProgress extends SherlockActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(SampleList.THEME); //Used for theme switching in samples
    super.onCreate(savedInstanceState);

    //This has to be called before setContentView and you must use the
    //class in com.actionbarsherlock.view and NOT android.view
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

    setContentView(R.layout.iprogress);

    findViewById(R.id.enable).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            setSupportProgressBarIndeterminateVisibility(true);
        }
    });
    findViewById(R.id.disable).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            setSupportProgressBarIndeterminateVisibility(false);
        }
    });
} 
```

}

**更新**

你试试这个：

```
 getSherlock().setProgressBarIndeterminate(indeterminate); 
```

**或者**

```
 getSherlock().setProgressBarVisibility(visible); 
```

我的意思是在去 Ideterminate 或更改其可见性之前尝试调用 getSherlock()。

让我评论一下结果。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:08:58.867

尝试如下：

> ```
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>       requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
>       requestWindowFeature(Window.FEATURE_PROGRESS);
>       setContentView(R.layout.browser);
>       setProgressBarIndeterminateVisibility(true);
>       setProgressBarVisibility(true);         
>       findViewById(R.id.enable).setOnClickListener(new View.OnClickListener() {
>     @Override
>     public void onClick(View arg0) {
>          setProgressBarIndeterminateVisibility(false);
>              setProgressBarVisibility(false);
>     }
>   });
>     } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-18T23:54:59.180

在您声明您的活动视图通过进度条之前执行此操作，并在定义您的视图之后禁用进度条的可见性，然后在您的任何点击上启用该条的可见性

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);  
            setContentView(R.layout.yourlayout);
            setSupportProgressBarIndeterminateVisibility(false);
            ......
                ......
                     .........
                      ...OnClick()
                          {
                           setSupportProgressBarIndeterminateVisibility(true);
                            }
                             ............. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T18:46:35.767

出色地，

我找不到解释为什么它总是不确定的。另外，这绝对行不通

```
getSherlock().setProgressBarIndeterminate(false); 
```

但是使用

```
getSherlock().setProgressBarIndeterminateVisibility(false); 
```

似乎解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T10:13:01.570

我遇到了同样的问题，我花了 5 个小时调试 ABS 来调查问题。解决方案非常简单：

利用：

> com.actionbarsherlock.view.Window.FEATURE_INDETERMINATE_PROGRESS

喜欢：

> requestWindowFeature(com.actionbarsherlock.view.Window.FEATURE_INDETERMINATE_PROGRESS);

代替：

> android.view.Window.FEATURE_INDETERMINATE_PROGRESS

# extjs - 更改 extjs 中面板的背景颜色

> ID：14686191
> 
> 赞同：0
> 
> 时间：2013-02-04T11:51:52.087
> 
> 标签：extjs, extjs4, extjs4.1

在我的项目中，我试图更改容器内所有面板的背景颜色。我正在尝试的代码如下：

```
container --> panel (don't change) --> panel (Change) 
```

* * *

```
//Generated dynamically using for loop.
listeners: {
   'render': function(panel) {
        panel.body.on('click', function() {
                //here change the background color of all the panels inside the container>panel. 
        });
    }
} 
```

我应该写什么来更改主容器的父面板中存在的唯一面板的背景颜色？

我试过了：

```
Ext.each('panel',function(){this.body.setStyle('background','white')}), 
```

但上述方法给了我以下错误：

> 未捕获的类型错误：无法调用未定义的方法“setStyle”

**编辑**：

在这里，我正在寻找一种 extjs 的方法，它与 jQuery 的`children()`.

```
$('#containerID').children('panel').children('panel').css(change background color); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:04:34.057

根据您的要求，您将始终拥有您正在查看的 9 个组件的总和 -1 您从开始。最短的方法是使用`each()`MixedCollection 的方法（在运行时所有项目都在 MixedCollection 中）

```
'render': function(panel) {
    panel.body.on('click', function() {
         panel.items.each(function(p){ p.body.setStyle('background','white'); }, this)
    },this);
} 
```

这可能不是性能最好的变体，但是从最后一个问题中知道您的要求我可以说这是最简单的。此外，它易于维护。并阅读我在上一个问题的评论中发布的关于代表的文章！

*我希望现在有错字，因为它未经测试*

**更新**

好吧，您正在这里寻找`ownerCt`房产（至少这是最简单的方法）。但是有一些更强大的导航方法`up()`/`down()`两者都可以用`ComponentQuery`字符串提供。将`up()`参数留空将返回直接所有者/激活者（与 基本相同`ownerCt`）。

以下是一个工作示例：

```
var childItems = [], items = [];
for (i = 0; i < 9; ++i) {
    childItems.push({
        xtype: 'container',
        width: 50,
        height: 50,
        html: i + '',
        style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px'},
        listeners: {
            'afterrender': function(panel) {
                panel.el.on('click', function(e,t) {
                    panel.el.on('click', function(e,t) {
                    panel.el.setStyle('background','red');
                    panel.ownerCt.items.each(function(p){ if(panel.el.id != p.id) p.el.setStyle('background','white'); })
                });
             }
        }
    });
}
for (i = 0; i < 9; ++i) {
    items.push({
        xtype: 'container',
        layout: {
            type: 'table',
            columns: 3
        },
        style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px'},
        items: childItems
    });
}
Ext.create('Ext.container.Container', {
    layout: {
        type: 'table',
        // The total column count must be specified here
        columns: 3
    },
    renderTo: Ext.getBody(),    
    style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px', margin: '30px'},
    items: items
}); 
```

**更新 2**

重置所有试试这个（未经测试）

```
'afterrender': function(panel) {
          panel.el.on('click', function(e,t) {
              panel.el.setStyle('background','red');
              panel.ownerCt.ownerCt.items.each(function(op){ 
                   op.items.each(function(p){ 
                       if(panel.el.id != p.id) 
                          p.el.setStyle('background','white'); 
                   })
              }, this)
          });
 } 
```

**[JSFiddle](http://jsfiddle.net/X6kQK/4/)**

# mysql - dataprovider 测试数据库中的值

> ID：14686193
> 
> 赞同：1
> 
> 时间：2013-02-04T11:52:00.720
> 
> 标签：mysql, testing, testng

如何将从mysql db读取的值传递给@DataProvider？

在我的情况下，我必须通过 @DataProvider 将从 db 读取的值传递给测试方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:52:28.583

dataprovider 旨在将值从您的数据源传递给您的测试。您可以将读取数据库和创建对象的代码放在使用 @DataProvider 注释的方法中，并在测试方法中指定此 DataProvider。大意的东西

```
@DataProvider(name = "dbreaddata")
public Object[][] readDBData() {

//read from db - 
//create object[][]
// return Object[][];
}

@Test(dataProvider = "dbreaddata")
public void useAndTestData(Object a) {
 //Use data read from db
} 
```

阅读更多@ [http://testng.org/doc/documentation-main.html#parameters-dataproviders](http://testng.org/doc/documentation-main.html#parameters-dataproviders)

# bash - awk 或 Sed：替换特殊字符（分隔符）之间的文本

> ID：14686196
> 
> 赞同：2
> 
> 时间：2013-02-04T11:52:27.173
> 
> 标签：bash, scripting, sed, awk

我对如何替换分隔符之间的文本进行了一些研究，但由于缺乏对 awk 和 sed 的了解，我无法针对我的问题调整命令。[我在这里](https://stackoverflow.com/a/6065948/1925060)找到的最相似的问题，但是在调整命令后`awk '/^(name=|&)/{f=f?0:1}f&&/*/{$0="//" $0}1' file`它不起作用。另外，我想使用变量替换而不是在文件中替换。如果我没有问太多，非常简短的解释会很棒:)

我在变量`$url`和变量中有下一个 url `$new=unnamed384`：

```
http://www.example.com/?name=unnamed293&file=4 
```

我需要用 variable 替换 "name=" 和 "&" 之间的文本`$new`。例如，这`$url`在之前是可变的：

```
http://www.example.com/?name=unnamed293&file=4 
```

这是可变的`$url`：

```
http://www.example.com/?name=unnamed384&file=4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:59:01.083

How about:

```
$ new="unnamed384"

$ url="http://www.example.com/?name=unnamed293&file=4"

$ sed "s/name=[^&]*/name=$new/" <<< $url
http://www.example.com/?name=unnamed384&file=4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:03:22.820

```
s/(.*\?name=)[^\&]*(&.*)/$1$n$2/g 
```

以上就可以了。下面测试（与 perl 一起使用）

```
> echo "http://www.example.com/?name=unnamed293&file=4"
http://www.example.com/?name=unnamed293&file=4
> echo "http://www.example.com/?name=unnamed293&file=4" | perl -lne '$n="unamed394";$_=~s/(.*\?name=)[^\&]*(&.*)/$1$n$2/g;print'
http://www.example.com/?name=unamed394&file=4
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:12:00.890

```
$new='unnamed384'; 
$echo 'http://www.example.com/?name=unnamed293&file=4' | awk -F'[=&]' '{ print $1"=""'"$new"'""&"$3"="$4 }'
http://www.example.com/?name=unnamed384&file=4 
```

# android - 在 android/eclipse 上的文本输入上显示可绘制的静止图像

> ID：14686198
> 
> 赞同：0
> 
> 时间：2013-02-04T11:52:30.777
> 
> 标签：android, eclipse, image, text

我是这里的新手，抱歉这个愚蠢的问题。我试图在drawables中显示一个与edittext中输入的文本值相等的图像。

例如，我输入“A”，然后单击完成后，某个图像将出现在下一个活动中。

我个人的想法是，这将在imageview中完成，但是如果我输入“ABC”并且与输入文本相等的3个图像会同时出现。

我认为数组将用于这个问题，但我不知道如何开始。

```
ImageView image = (ImageView) findViewById(R.id.iamgeActivity);
image.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        //my problem starts here
 }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:01:10.800

如果我说得对..您可以像在第一个活动中一样，在单击`done`按钮时将图像的名称从 editText 通过捆绑包带到下一个活动。

```
Intent intent= new Intent(currentactivity.this, nextactivity.class);
intent.putExtra("imagename",youreditText.getText().toString());
startActivity(intent); 
```

在下一个活动中，从包中获取此图像名称并使用以下代码在您的图像视图中动态设置图像：

```
ImageView image = (ImageView)findViewById(R.id.yourimageid);
int id = getResources().getIdentifier(imagename, "drawable", getPackageName());
image.setImageResource(id); 
```

# java - 如何在报告中将html文本转换为纯文本

> ID：14686200
> 
> 赞同：0
> 
> 时间：2013-02-04T11:52:32.840
> 
> 标签：java, jasper-reports, ireport

我在 java 中将 HTML 文本作为参数值传递。喜欢

```
parameter.put("TEMP_TEXT","<p>test</P>"); 
```

我在 ireport 中将此参数绑定为静态文本字段，`$P{TEMP_TEXT}`然后它将转换为纯文本。

```
output ought to be 'test' 
```

需要在*iReport中的**staticText*上添加哪些设置以获取相同的设置？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:27:46.740

将文本字段添加到您的报告中。

```
Text Field Expression : $P{TEMP_TEXT}
Markup : html 
```*

# c# - 检索 gridview 链接按钮值。

> ID：14686201
> 
> 赞同：2
> 
> 时间：2013-02-04T11:52:56.597
> 
> 标签：c#, asp.net, gridview

再会

我有包含链接按钮的gridview。单击链接按钮时如何检索链接按钮的值（文本）。

这就是我所做的。

```
<asp:TemplateField>
        <ItemTemplate>
            <asp:LinkButton ID="lnkProdCode" CommandName="ProdCode" runat="server" Width="115%" Text='<%# DataBinder.Eval(Container.DataItem,"CODE") %>' style="color:Black;font-size:smaller;"></asp:LinkButton>
        </ItemTemplate>
        </asp:TemplateField>

protected void gridReport_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "ProdCode")
    {   
        GridViewRow selectedRow = (GridViewRow)((LinkButton)e.CommandSource).NamingContainer;
        string valueLink = selectedRow.Cells[0].Text;
        System.Diagnostics.Debug.WriteLine("This is the value " + valueLink);
    }

} 
```

因为目前我没有得到价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:57:24.127

You already have the LinkButton, just use the `Text` property

```
if (e.CommandName == "ProdCode")
{   
    System.Diagnostics.Debug.WriteLine("This is the value " + 
                                       ((LinkButton)e.CommandSource).Text);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:12:16.070

我不确定，但似乎您将值存储在 LinkBut​​ton 的文本中。你为什么不使用`CommandArgument`财产？

```
<asp:TemplateField>
   <ItemTemplate>
            <asp:LinkButton ID="lnkProdCode" CommandName="ProdCode" runat="server" Width="115%" Text='<%# DataBinder.Eval(Container.DataItem,"CODE") %>' CommandArgument='<%# DataBinder.Eval(Container.DataItem,"CODE") %>' style="color:Black;font-size:smaller;"></asp:LinkButton>
   </ItemTemplate>
</asp:TemplateField> 
```

然后你将能够做到这一点：

```
protected void gridReport_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "ProdCode")
    {   
        System.Diagnostics.Debug.WriteLine("This is the value " + e.CommandArgument);
    }
} 
```

当然，您必须复制数据，但我认为它更可取且更方便。

# java - 从另一个类调用字符串的问题 - 变量可能尚未初始化

> ID：14686203
> 
> 赞同：1
> 
> 时间：2013-02-04T11:53:02.763
> 
> 标签：java, jsf

我在一个类中有一个字符串，我想在另一个类中使用它，但我无法编译它

我下面的代码应该从另一个java类中提取NewDestination，但是我得到错误变量NewDestination可能没有被初始化，当我尝试运行时，我该如何初始化它？

```
@Named("Filter")

public class Filter{

    //public String NewDestination;

    private static final String FILE_TEXT_EXT = ".pdf";

        public static final String NewDestination;

    public static void main(String args[]) {
        new Filter().listFile(NewDestination, FILE_TEXT_EXT);
    }

    public void listFile(String folder, String ext) {

        GenericExtFilter filter = new GenericExtFilter(ext);

        File dir = new File(folder);

        if(dir.isDirectory()==false){
            System.out.println("Directory does not exists : " + NewDestination);
            return;
        }

        // list out all the file name and filter by the extension
        String[] list = dir.list(filter);

        if (list.length == 0) {
            System.out.println("no files end with : " + ext);
            return;
        }

        for (String file : list) {
            String temp = new StringBuffer(NewDestination).append(File.separator)
                    .append(file).toString();
            System.out.println("file : " + temp);
        }
    }

    // inner class, generic extension filter
    public class GenericExtFilter implements FilenameFilter {

        private String ext;

        public GenericExtFilter(String ext) {
            this.ext = ext;
        }

        public boolean accept(File dir, String name) {
            return (name.endsWith(ext));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:08:44.287

```
public static final String NewDestination; 
```

`static final`变量代表一个应用程序范围的常量**，**必须在加载类期间设置。

直接初始化就好了

```
public static final String NewDestination = "some"; 
```

或者，不要让它成为一个常数。

```
public static String NewDestination; 
```

这完全取决于具体的功能要求，这在问题中根本不清楚。整个代码看起来很奇怪，因此根据目前提供的代码也很难做出有根据的猜测。

进一步需要注意的是，这一切都与JSF无关。这只是基本的Java。您甚至无法编译该类，因此这完全超出了 JSF。[花一些时间学习基本的 Java](http://docs.oracle.com/javase/tutorial/getStarted/index.html)。[本章介绍](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)了常量。JSF 的学习曲线相当陡峭。如果您已经不了解基本的 Java SE，更不用说 Servlet API，那么 JSF 的学习旅程将花费至少两次，而且不会很有趣。

# sql - 如何替换 SQL 字段值

> ID：14686204
> 
> 赞同：32
> 
> 时间：2013-02-04T11:53:02.843
> 
> 标签：sql, sql-server-2008

我真的不知道该怎么做，我对 SQL 有点陌生。我应该使用`substring`还是`replace`在我的情况下？

我的数据库中有一个名为“email”的字段，现在我想将所有以“email.com”结尾的电子邮件编辑为“email.org”。我该怎么办？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-04T11:55:45.767

这取决于你需要做什么。您可以使用[`replace`](http://msdn.microsoft.com/en-us/library/ms186862.aspx)，因为您想替换该值：

```
select replace(email, '.com', '.org')
from yourtable 
```

然后到`UPDATE`你的桌子上用新的结尾，然后你会使用：

```
update yourtable
set email = replace(email, '.com', '.org') 
```

您还可以通过检查电子邮件值的最后 4 个字符来对此进行扩展：

```
update yourtable
set email = replace(email, '.com', '.org')
where right(email, 4) = '.com' 
```

但是，问题`replace()`在于`.com`电子邮件中的其他位置可能会出现，而不仅仅是最后一个。因此，您可能希望使用[`substring()`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)以下方式：

```
update yourtable
set email = substring(email, 1, len(email) -4)+'.org'
where right(email, 4) = '.com'; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/720c2/5)

使用`substring()`将返回电子邮件值的开头，没有结尾`.com`，然后将 连接`.org`到结尾。这可以防止替换`.com`字符串中的其他位置。

或者，您可以使用[`stuff()`](http://msdn.microsoft.com/en-us/library/ms188043.aspx)，它允许您同时进行删除和插入：

```
update yourtable
set email = stuff(email, len(email) - 3, 4, '.org')
where right(email, 4) = '.com'; 
```

这将删除最后一个字符之前第三个字符位置的 4 个字符（即 final 的起始位置`.com`）并插入`.org`。

有关此方法，请参阅[SQL Fiddle with Demo 。](http://www.sqlfiddle.com/#!3/720c2/7)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T11:59:07.053

You could just use [`REPLACE`](http://msdn.microsoft.com/en-us/library/ms186862.aspx):

```
UPDATE myTable SET emailCol = REPLACE(emailCol, '.com', '.org')`. 
```

But take into account an email address such as `john.comrad@some.company.com` will be updated to `john.orgrad@some.organy.org`.

If you want to be on a safer side, you should check for the last 4 characters using [`RIGHT`](http://msdn.microsoft.com/en-us/library/ms177532%28v=sql.100%29.aspx), and append `.org` to the [`SUBSTRING`](http://msdn.microsoft.com/en-us/library/ms187748%28v=sql.100%29.aspx) manually instead. Notice the usage of [`UPPER`](http://msdn.microsoft.com/en-us/library/ms180055%28v=sql.100%29.aspx) to make the search for the `.com` ending case insensitive.

```
UPDATE myTable 
SET emailCol = SUBSTRING(emailCol, 1, LEN(emailCol)-4) + '.org'
WHERE UPPER(RIGHT(emailCol,4)) = '.COM'; 
```

See it working in this [SQLFiddle](http://sqlfiddle.com/#!3/cad7a/6).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:05:59.890

为避免包含`.com`like `john.comrad@email.com`to 的更新名称`john.orgrad@email.org`，您可以这样做：

```
UPDATE Yourtable
SET Email = LEFT(@Email, LEN(@Email) - 4) + REPLACE(RIGHT(@Email, 4), '.com', '.org') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-04T12:00:05.510

试试这个查询，它会改变以 .com 结尾的记录

```
 UPDATE tablename SET email = replace(email, '.com', '.org') WHERE  email LIKE '%.com'; 
```

# python - SQLite Python 成行打印？

> ID：14686212
> 
> 赞同：1
> 
> 时间：2013-02-04T11:53:34.680
> 
> 标签：python, sqlite

下午，我正在尝试使用以下代码从数据库中检索座位号

```
 cur.execute("SELECT * FROM seats")
    while True:
        row = cur.fetchone()
        if row == None:
            break
        print row[0] 
```

但是当我这样做时，它会打印出每条记录，如下所示：

```
A1
A2
B3 etc.. 
```

但是如果有意义的话，我希望每一行都打印出相同的字母，例如：

```
A1 A2 A3 A4 A5 A6 A7 A8
B1 B2 B3 B4 B5 B6 B7 
```

但我似乎不能那样理解？我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:55:24.613

使用[`itertools.groupby()`工具](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

for letter, rows in groupby(cur, key=lambda r: r[0][0]):
    print ' '.join([r[0] for r in rows]) 
```

该`groupby()`函数循环遍历 中的每一行`cur`，获取第一列的第一个字母，并为您提供一个包含每个`(letter, rows)`值的元组。该`rows`值是另一个可迭代的，您可以对其进行循环（`for`例如，使用循环）以列出所有具有该第一个字母的行。

这确实依赖于已经排序的行。如果您的行在第一个字母之间交替：

```
A1
A2
B1
B2
A3
A4 
```

它会将它们打印为单独的组：

```
A1 A2
B1 B2
A3 A4 
```

您可能希望在`ORDER BY firstcolumnname`查询中添加排序指令以确保正确分组。

这是我在创建测试数据库时看到的：

```
>>> cur.execute("SELECT * FROM seats ORDER BY code")
<sqlite3.Cursor object at 0x10b1a8730>
>>> for letter, rows in groupby(cur, key=lambda r: r[0][0]):
...     print ' '.join([r[0] for r in rows])
... 
A1 A2 A3 A4 A5 A6 A7 A8
B1 B2 B3 B4 B5 B6 B7 B8
C1 C2 C3 C4 C5 C6 C7 C8 
```

# command-line - 我可以使用命令行按全类名对 NUnit 或 MSTest 上的测试进行分组吗？

> ID：14686214
> 
> 赞同：0
> 
> 时间：2013-02-04T11:53:40.887
> 
> 标签：command-line, nunit, mstest

我的大部分测试都使用与 NDbUnit 的数据库集成，我使用的隔离模式是按它们的完整类名分组。

现在，我需要在命令行上运行此配置，因为我将使用 Jenkins CI。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:21:20.740

如果您使用的是`nunit-console.exe`，那么您可以按类别。这里有关于您可以发送给跑步者的文档[(http://www.nunit.org/index.php?p=consoleCommandLine&r=2.2)](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.2)。您可能想要使用`/include`and`/exclude`标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:44:50.200

您可以使用 /test 在 mstest.exe 命令行上执行此操作

```
mstest /testcontainer:TestProject1.dll /test:TestProject1.Unittest2 
```

这将执行 UnitTest2 类中的所有测试。

# django - Scrapy 项目找不到 django.core.management

> ID：14686223
> 
> 赞同：2
> 
> 时间：2013-02-04T11:54:09.893
> 
> 标签：django, scrapy, webfaction

我正在尝试按照[此处](https://stackoverflow.com/questions/7883196/saving-django-model-from-scrapy-project)的方法从网络上“抓取”数据，同时使用 Scrapy 的项目管道将该数据直接保存到我的 Django 数据库中。

但是，当我尝试运行时`scrapy crawl spidername`，出现错误：

`ImportError: No module named django.core.management`

起初我以为是因为我的 Scrapy 项目在我的 Django 项目文件夹之外，但即使在我将整个项目移动到我的 Django 项目文件夹之后，我仍然遇到同样的错误。如果我在 Scrapy 项目文件夹的新位置（在我的 Django 项目文件夹中）打开一个 python shell，`import django.core.management`工作正常。发生什么了？

**编辑：**一些附加信息：我在 Webfaction 服务器上执行此操作，我的 Django 项目的路径是`/home/gchorn/webapps/django_app/django_project`. 我正在使用 Django 版本 1.4.1、Scrapy 0.16 和 Python2.7。Django+Scrapy项目的布局如下：

```
django_project/
    __init__.py
    manage.py
    settings.py
    urls.py
    myproject #folder containing wsgi.py
    app1
    app2
    app3
    templates
    ScrapyProject/
        scrapy.cfg
        ScrapyProject/
            __init__.py
            items.py
            pipelines.py
            settings.py
            spiders/
                __init__.py
                my_spider.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-19T17:16:51.520

尝试在您的 Spider 的 settings.py 中进行设置：

```
import os
import sys

sys.path.append('/home/gchorn/webapps/django_app')

os.environ['DJANGO_SETTINGS_MODULE'] = 'django_project.settings' 
```

然后你可以导入你的模型类，如：

```
from django_project.app1.models import some_model 
```

# android - Created file is not visible in the gallery, but is visible in a sdcard folder

> ID：14686227
> 
> 赞同：2
> 
> 时间：2013-02-04T11:54:23.413
> 
> 标签：android, gallery, sd-card

I've added a video file in /mnt/sdcard/DCIM/somefolder But it is not visible in the gallery. Could anyone help me please to understand what is wrong?

```
File dir = new File(Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_DCIM), "/somefolder");
    if (!dir.exists()) {
        dir.mkdirs();
    }

    mrec.setOutputFile(dir.getPath() + "/video" + ".mp4"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:58:52.027

just add these lines:

```
sendBroadcast(new Intent(
Intent.ACTION_MEDIA_MOUNTED,
Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

# jasper-reports - 从 Ireport 调用时如何在程序中调用和添加条件？

> ID：14686229
> 
> 赞同：0
> 
> 时间：2013-02-04T11:54:46.677
> 
> 标签：jasper-reports, ireport

我使用 Ireport 4.5 创建了一个报告，但我认为报告运行速度非常慢，我认为这只是因为多个 UNION 和 JOINS。

我正在复制一个简单的查询以进行测试：-

```
 SELECT b.Project_Id,
       b.Project_Manager,
       b.project_title,
       b.Project_location,
       b.Project_Level,
      SUM(COALESCE(b.Project_Budget, 0)) Projected,
      SUM(COALESCE(c.Accounting, 0)) Actual
   FROM t_authorized_budget a, t_project_c b,t_project_allocation c
   WHERE a.Project_Id = b.Project_Id and b.project_id=c.`Key` 
        and a.Project_Id = c.`Key`
        and $X{IN,b.project_location,p_project_location}
        and $X{IN,b.project_manager,p_project_manager}
        and $X{IN,b.project_id,p_project_id}; 
```

所以我使用这个查询创建了一个过程 CALL GetAllcompo() 但没有

```
 $X{IN,b.project_location,p_project_location}
        and $X{IN,b.project_manager,p_project_manager}
        and $X{IN,b.project_id,p_project_id}; 
```

现在我试图在从 Ireport 调用时在程序中添加这些条件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:18:12.947

您需要使用该程序吗？我通过添加另一个参数来做到这一点。首先，提示用户定义您使用的 WHERE 子句类型：

```
$P{PROJECT_PROMPT} 
```

然后使用定义 WHERE 子句的默认表达式创建第二个参数 ($P{PROJECT_SQL_DEF})：

```
 $P{PROJECT_PROMPT} == 'SHORT' ? 
      " ' a.Project_Id = b.Project_Id 
      and b.project_id=c.Key 
      and a.Project_Id = c.Key '" : 

      " ' a.Project_Id = b.Project_Id and b.project_id=c.`Key` 
      and a.Project_Id = c.`Key`
      and $X{IN,b.project_location,p_project_location}
      and $X{IN,b.project_manager,p_project_manager}
      and $X{IN,b.project_id,p_project_id} ' " 
```

在您的查询中：

```
 SELECT b.Project_Id,
   b.Project_Manager,
   b.project_title,
   b.Project_location,
   b.Project_Level,
  SUM(COALESCE(b.Project_Budget, 0)) Projected,
  SUM(COALESCE(c.Accounting, 0)) Actual
FROM t_authorized_budget a, t_project_c b,t_project_allocation c
WHERE $P!{PROJECT_SQL_DEF} 
```

# ios - 使属于 UIView 子类的计时器无效

> ID：14686232
> 
> 赞同：1
> 
> 时间：2013-02-04T11:55:13.327
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uikit

我有一个属于 UIView 子类的重复计时器。

该类有一个加载它的笔尖，我正在使用 ARC。

当 UIView 是...时，我想使计时器无效...

1.  从其超级视图中删除
2.  包含其 superView 的 ViewController 从堆栈中弹出。

我似乎在 UIView 上找不到像 vi​​ewDidDisappear 这样的方法。

有没有其他方法可以拦截这个？

目前，在 ViewController 弹出后，计时器不断触发并创建`NSLog`输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:01:35.693

**对于弹出的视图控制器：**只需使用`viewDidDisappear`或类似。还有`UINavigationControllerDelegate`可能有用的。

**对于视图本身**：您是否尝试过使用`willMoveToSuperview:`方法 in `UIView`？我还没有验证这一点，但理论上，当视图`nil`从其超级视图中删除时，它会移动到超级视图。

因此，请在您的视图中尝试以下操作：

```
- (void)willMoveToSuperview:(UIView *)superview {
    if (!superview) {
        // cancel timers
    }
} 
```

还有一种`willRemoveSubview:`方法，但会在超级视图上调用，而不是被删除的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:01:51.247

您是否尝试过在`dealloc`

# c# - 在 mvc4 的 _layout 中显示数据库中的图像

> ID：14686237
> 
> 赞同：3
> 
> 时间：2013-02-04T11:55:32.087
> 
> 标签：c#, entity-framework-4, asp.net-mvc-4

大家好，我有我`_layout`的以下内容，可以按照我的要求工作，但是这里有几件事让我感到震惊，即我想显示相应的图像，我写如下

```
@if (Session["UserName"] != null)
{
 <div class="logged_in" id="user_navigation" runat="server">
 <a title="Your Profile" href="">
 <img alt="" src="@Url.Action("GetPhoto", new { photoId = Session["UserName"] })" height="50" width="50" class="photo" />
</a>
</div>
} 
```

但这并没有按照我的要求显示图像所以有人可以帮助我我想在用户登录后显示数据库中的图像我也想`session`在某些控件中显示值

这是我的控制器代码

```
public ActionResult GetPhoto(string photoId)
        {
            byte[] photo = null;
            var v = db.tblUsers.Where(p => p.UserName == photoId).Select(img => img.Photo).FirstOrDefault();
            photo = v;
            return File(photo, "image/jpeg");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:25:27.117

`<img>`您的语法似乎有问题。它应该是这样的：

```
<img alt="" src="@Url.Action("GetPhoto","User", new { photoId = Session["UserName"].ToString() })" height="50" width="50" class="photo" /> 
```

根据评论部分，您似乎在实际代码中使用了 WebForms 视图引擎 ( `<%= Html.Encode(Session["UserName"]) %>`)。

话虽这么说，您对这段代码有一个更严重的问题。当前经过身份验证的用户永远不应作为参数传递。这是一个巨大的安全漏洞。所以从摆脱它开始：

```
<img alt="" src="@Url.Action("GetPhoto", "User")" height="50" width="50" class="photo" /> 
```

然后在您的控制器操作中，您可以检索它：

```
public ActionResult GetPhoto()
{
    string user = Session["UserName"] as string;
    byte[] photo = db
        .tblUsers
        .Where(p => p.UserName == user)
        .Select(img => img.Photo)
        .FirstOrDefault();
    return File(photo, "image/jpeg");
} 
```

# asp.net - 是否有任何 .NET 标准来处理本地化但允许用户自定义文本？

> ID：14686239
> 
> 赞同：5
> 
> 时间：2013-02-04T11:55:33.853
> 
> 标签：asp.net, localization, resx

我们正在构建一个尚未本地化的 ASP.NET MVC 应用程序，其中包含大量的数据注释`DisplayAttribute`，其中包含硬编码字符串和遍布代码的硬编码消息字符串。

现在我们要求应用程序必须是可本地化的，但我们仍然需要允许用户自定义字段显示和文本。

到目前为止，我正在考虑使用`RESX`带有自定义`IResourceProvider`. Rick Strahl 写了[一篇很好的文章](http://www.west-wind.com/presentations/wwdbresourceprovider/#Creating_a_custom_Resource_Provider)。在这种方法中，应用程序是使用标准`RESX`文件开发的，但在运行时，当应用程序需要字符串时，自定义提供程序将查询数据库以查找自定义项，并在找到时使用它们。

尽管这似乎是一个很好的解决方案，但它似乎并不自然。我想知道是否有更好的选择。

这有什么标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:11:01.293

使用静态值作为默认值并检查数据库的本地化值有什么不自然的？对我来说这是一个很好的方法，因为如果有人会在数据库中弄乱资源，例如，以某种方式删除其中一个，你将始终有一个默认文本要显示。

你总是可以用不同的方式来做，只使用基于 db 的文本，而不用担心更改代码中的默认值和数据库中的翻译，因为当资源在少数地方时很容易错过一些东西。大约 2 年前，当我检查[nopCommerce](http://www.nopcommerce.com)的代码时，我看到他们仅使用数据库中的资源进行本地化。我不确定它现在是如何完成的，但是您可以下载源代码并检查它。

在我一年前开发的 WinForms 应用程序中，我使用不同语言的 XML 文件，因为我们的客户希望能够允许非技术人员创建新的语言文件。我创建了内置在应用程序中的本地化工具，但对于网站，最好使用数据库，因为您已经可以访问它并且可以轻松地操作数据。

[您可以在此博客文章](http://eyefetch.wordpress.com/tag/custom-resource-provider/)中阅读有关此主题的更多信息。

# r - R中的POSIXct微秒不一致

> ID：14686240
> 
> 赞同：2
> 
> 时间：2013-02-04T11:55:35.800
> 
> 标签：r, xts, posixct

> **可能重复：**
> [R 如何用小数秒格式化 POSIXct](https://stackoverflow.com/questions/7726034/how-r-formats-posixct-with-fractional-seconds)

我熟悉[这个关于“R 如何用小数秒格式化 POSIXct”](https://stackoverflow.com/questions/7726034/how-r-formats-posixct-with-fractional-seconds)的问题。接下来有一个论点，关于 POSIXct 在处理微秒时是否存在数字错误。

在我重新实现一整套可以在微秒内无错误地处理的 xts 功能之前（xts 没有问题 - 只是它需要 POSIXct），我只是想确保：

为什么下一行的输出是 4.577894？

```
as.POSIXlt(as.POSIXct(sprintf("%s",(format(as.POSIXct("2012-12-14 15:42:04.577895 EDT"), "%Y-%m-%d %H:%M:%OS6")))))$sec 
```

非常感谢！

```
EDIT 
```

这背后的原因如下：如果我正在从文件中读取时间条目，进行一些处理，再次写入文件，再次读取等，我会累积错误。所以 - 这不是一个“技巧”问题，但实际上是经过数小时的调试..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:37:46.310

这个问题已经讨论得太久了——尤其是考虑到问题本身与答案相关联。

这是一个输出表示问题，并且是众所周知的。舍入时间值具有影响。在某些情况下，您不能只四舍五入亚秒级值而不会得到不正确的结果。

解决方案在这里（如问题中的链接）： [R如何用小数秒格式化POSIXct](https://stackoverflow.com/questions/7726034/how-r-formats-posixct-with-fractional-seconds)

直接从 Aaron 的优秀答案中窃取：

```
myformat.POSIXct <- function(x, digits=0) {
  x2 <- round(unclass(x), digits)
  attributes(x2) <- attributes(x)
  x <- as.POSIXlt(x2)
  x$sec <- round(x$sec, digits)
  format.POSIXlt(x, paste("%Y-%m-%d %H:%M:%OS",digits,sep=""))
}

x <- as.POSIXct("2012-12-14 15:42:04.577895 EDT") 
```

你正在尝试什么：

```
as.POSIXlt(as.POSIXct(sprintf("%s",(format(x, "%Y-%m-%d %H:%M:%OS6")))))$sec
## [1] 4.577894 
```

亚伦的代码：

```
myformat.POSIXct(x, 6)
## [1] "2012-12-14 15:42:04.577895" 
```

有人可能会考虑使用`sprintf`格式字符串`%.06f`来格式化亚秒值，但如果该值略低于整数，这将失败：

```
sprintf('%.06f', .9999999)
## [1] "1.000000" 
```

如果亚秒值向上舍入，则转换为 POSIXlt 会导致正确的翻转为秒、分钟等。

向您表明这**不是**数据问题：

```
y <- as.numeric(x)
y
## [1] 1355521324.5778949261
sprintf('%06f', y - floor(y))
## [1] "0.577895" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:21:24.090

我认为您所引用的 SO 问题的评论中指出了您的问题的答案。问题是转换为 POSIXct 或 POSIXlt 包含舍入。只需为您的价值和转换权本身添加一个小偏移量。

```
# Original value
format(as.POSIXct("2012-12-14 15:42:04.577895 EDT"), "%Y-%m-%d %H:%M:%OS6")
[1] "2012-12-14 15:42:04.577894"

# Original value + offset
format(as.POSIXlt("2012-12-14 15:42:04.5778951 EDT"), "%Y-%m-%d %H:%M:%OS6")
[1] "2012-12-14 15:42:04.577895" 
```

我建议使用正则表达式来添加偏移量，如下所示：

```
gsub(" (\\w+)$","1 \\1","2012-12-14 15:42:04.577895 EDT")
[1] "2012-12-14 15:42:04.5778951 EDT" 
```

# javascript - Jquery / Javascript - 添加年份到日期变量

> ID：14686243
> 
> 赞同：15
> 
> 时间：2013-02-04T11:56:07.690
> 
> 标签：javascript, jquery

我有一个小麻烦，如果能得到一些帮助会很好。我正在创建一个小表单，我想将当前日期格式化`'dd/mm/yyyy'`并从下拉框中添加一个年份变量以创建最终到期日期。唯一的麻烦是我不知道如何将开始日期解析为日期变量以完成计算。任何想法或帮助将不胜感激。保罗。

```
<script>
    $(document).ready(function () {
        $("#registerfor, #startdate, ").change(function () {
            // Get Variables
            var startdate = $("#startdate").val();
            var registerfor = $("#registerfor").val();
            // Add Years to Date
            var expirydate = startdate + registerfor;
            // Send Result on
            $("#expires").val(expirydate);
        });
    });
</script>
<input name="startdate" id="startdate" value="dd/mm/yyyy" />
<select id="registerfor" name="registerfor">
    <option value="1">1 Year</option>
    <option value="2">2 Years</option>
    <option value="3">3 Years</option>
</select> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-10-30T10:23:55.383

快速简便的解决方案：

```
var myDate = new Date();
myDate.setFullYear(myDate.getFullYear() + nbYearsToAdd); 
```

“nbYearsToAdd”可以是负数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T12:20:46.523

有时看起来很简单的任务变得相当复杂。

```
 $(document).ready( function () {

    $("#registerfor, #startdate").change( function () {

        var str = $("#startdate").val();

        if( /^\d{2}\/\d{2}\/\d{4}$/i.test( str ) ) {

            var parts = str.split("/");

            var day = parts[0] && parseInt( parts[0], 10 );
            var month = parts[1] && parseInt( parts[1], 10 );
            var year = parts[2] && parseInt( parts[2], 10 );
            var duration = parseInt( $("#registerfor").val(), 10);

            if( day <= 31 && day >= 1 && month <= 12 && month >= 1 ) {

                var expiryDate = new Date( year, month - 1, day );
                expiryDate.setFullYear( expiryDate.getFullYear() + duration );

                var day = ( '0' + expiryDate.getDate() ).slice( -2 );
                var month = ( '0' + ( expiryDate.getMonth() + 1 ) ).slice( -2 );
                var year = expiryDate.getFullYear();

                $("#expires").val( day + "/" + month + "/" + year );

            } else {
                // display error message
            }
        }
    });
}); 
```

[**这**](http://jsfiddle.net/bruno/fgtw8/2/)是一个小提琴，因此您可以看到它的实际效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:59:32.307

```
var dt = new Date($("#startdate").val());

var updateDate = dt.setDate(dt.getFullYear() + $("#registerfor").val());

var dd = updateDate.getDate();
var mm = updateDate.getMonth();
var y = updateDate.getFullYear();

var someFormattedDate = dd + '/'+ mm + '/'+ y;
console.log(someFormattedDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:21:17.517

哥们，已经开始工作了。如果您仍想转换日期，请执行以下操作：

```
var dat=Date.parse(startdate ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T18:10:50.940

我会：

*   将日期设置为 Date.parse 可以很好地使用的格式 (mm/dd/yyyy)
*   将所选选项乘以一年中的毫秒数
*   将新值重新格式化为人类可读的格式并填充#expires

    `var dateArr = $("#startdate").val().split();`
    `var niceDate = Number(dateArr[1]) + "/" + Number(dateArr[0]) + "/" + Number(dateArr[2]);`

    `var expDate = Date.parse(niceDate) + 365*24*60*60*1000*Number($("#registerfor").val());`

    `$("#expires").val(expDate.getMonth()+1 + "/" + expDate.getDate() + "/" + expDate.getFullYear());`

如果您需要 2 位数的日期和月份作为到期日期，您可以有额外的变量来保存它们的字符串版本并检查如下内容：
`var padMonth = expDate.getMonth()+1;`
`if(expDate.getMonth()+1 < 10) padMonth = "0" + Number(expDate.getMonth()+1);`

之后，您将在 $("#expires").val(.. .)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-04T12:01:55.337

网上有很多日期选择器 jquery

[这](http://jdpicker.paulds.fr/?p=doc)

一个是我最喜欢的，易于实施和根据我们的需要进行编辑。

如果你想从你的代码中使用脚本，你可以直接将日期值传递给**var startdate**像

```
var startdate=<?php echo date("Y-m-d")?> 
```

试试这个..可能会有所帮助。

# jquery - 如果我在 JQuery 中创建动态列表视图，则不会应用星级（插件）样式

> ID：14686245
> 
> 赞同：1
> 
> 时间：2013-02-04T11:56:11.010
> 
> 标签：jquery, jquery-mobile

我正在尝试创建一个动态列表并为列表视图中的每个项目添加星级。如果我创建一个静态列表，一切都会正确显示，但如果我动态创建它，它不会显示星级，而是显示单选按钮。以下是我的代码中包含的脚本和 css。

```
<script src="jquery-mobile/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.rating.js" type="text/javascript"></script>
<link href="jquery-mobile/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css">
<link href="jquery-mobile/jquery.rating.css" rel="stylesheet" type="text/css"> 
```

这是我的 HTML 页面，其中仅包含 ul 元素，并且列表视图是动态添加的

```
<div data-role="page" id="mypage">
    <div data-role="header" data-position="fixed">
        <a id="btnLink" href="#"  rel="external" data-direction="reverse" data-rel="back" data-icon="back">Back</a>
        <h1 id="venHeader"></h1>
        <a id="btnHome" href="index.html" rel="external" data-icon="home">Home</a> 
    </div>

    <div data-role="content">
        <ul id="vendorlist" data-role="listview" data-list-icon="gear" data-filter="true">
        </ul>

    </div>

    <div data-role="footer">
        <h4>Footer</h4>
    </div>
</div> 
```

下面是我的脚本

```
<script>
$("#mypage").live('pagebeforeshow',function(){
    $.post("jquery-mobile/getvalue.jsp",
    {
        struser:"username",
        password:"password"
    },
    function(data,status){
        if(status="success"){
            var rowdata = data.split("|"); // | is the row delimiter
            var vendorlist="";
            $.each(rowdata,function(i, rowelement){
                var columndata = rowelement.split("::"); // :: is the column delimiter
                if(i>0){
                    var list = '<li>' +              
                        '<div class="checkBoxLeft">' +
                            '<input type="checkbox" name="checkbox-0" id="checkbox-0" class="hidden-checkbox"/>' +
                        '</div>' +
                        '<a href="#" class="detailListText">' +
                            '<h3>'+columndata[2]+'</h3>' +
                            '<span class="ui-li-aside" style="padding:0px 0px 0px 0px;">' +
                                '<input data-role="none" name="star1" type="radio" class="star" title=""/>' +
                                '<input data-role="none" name="star1" type="radio" class="star" title=""/>' +
                                '<input data-role="none" name="star1" type="radio" class="star" title=""/>' +
                                '<input data-role="none" name="star1" type="radio" class="star" title=""/>' +
                                '<input data-role="none" name="star1" type="radio" class="star" title=""/>' +
                            '</span>' +
                            '<p>'+columndata[3]+'</p>' +
                        '</a>' +
                        '</a><a href="#" data-icon="home"></a>' +
                    '</li>';
                    vendorlist = vendorlist+list;
                };
            });
            $("#vendorlist").append(vendorlist);
            $("#vendorlist").listview("refresh");
        }
    });
});
</script> 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:56:07.223

为了实现 Star Rating，我更改了我的代码。现在我正在使用 Rateit 插件[http://rateit.codeplex.com/](http://rateit.codeplex.com/)。下面是解决我的问题的脚本。

```
<script>
$("#mypage").live('pagebeforeshow',function(){
    $.post("jquery-mobile/getvalue.jsp",
    {
        struser:"username",
        password:"password"
    },
    function(data,status){
        if(status="success"){
            var rowdata = data.split("|"); // | is the row delimiter
            var vendorlist="";
            $.each(rowdata,function(i, rowelement){
                var columndata = rowelement.split("::"); // :: is the column delimiter
                if(i>0){
                    var list = '<li>' +              
                        '<div class="checkBoxLeft">' +
                            '<input type="checkbox" name="checkbox-0" id="checkbox-0" class="hidden-checkbox"/>' +
                        '</div>' +
                        '<a href="#" class="detailListText">' +
                            '<h3>'+columndata[2]+'</h3>' +
                            '<span class="ui-li-aside" style="padding:0px 0px 0px 0px;">' +
                                '<div class="rateit"></div>' +
                            '</span>' +
                            '<p>'+columndata[3]+'</p>' +
                        '</a>' +
                        '</a><a href="#" data-icon="home"></a>' +
                    '</li>';
                    vendorlist = vendorlist+list;
                };
            });
            $("#vendorlist").append(vendorlist);
            $("#vendorlist").listview("refresh");
            $('.rateit').rateit();
        }
    });
});
</script> 
```

为了“激活”在 domready 之后添加到 dom 的项目的 rateit 控件，您只需调用**$('.rateit').rateit();** 加载列表视图后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T13:08:30.533

问题是在插入新的 HTML 之后，您需要再次调用该插件。

在这之后...

```
$("#vendorlist").append(vendorlist);
$("#vendorlist").listview("refresh"); 
```

你需要这样做......

```
 $('.star').rating(); 
```

这就是你对新插件所做的。任何一个插件都可以工作。

# django - 在 raw_id_fields 中一次插入更多记录

> ID：14686246
> 
> 赞同：4
> 
> 时间：2013-02-04T11:56:17.267
> 
> 标签：django, django-admin

我有一个 m2m 关系，在我的 AdminForm 中我会使用 raw_id_fields 而不是 filter_horizo​​ntal 选项。为了解释，我更喜欢 raw_id_fields 而不是 filter_horizo​​ntal 选项，因为记录已经分类。因此，在弹出窗口中，用户可以通过类别进行搜索和过滤。但是有两点我想不通：

*   在弹出窗口中选择多个记录的可能性
*   在 input_field 中显示真实姓名而不是 pk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:47:21.593

1.  这是可能的。为了选择多个记录，您需要通过将脚本包含在您的或小部件的类中`dismissRelatedLookupPopup()`来覆盖默认值：`django/contrib/admin/static/admin/js/admin/RelatedObjectLookups.js``Media``ModelAdmin`

    ```
    var dismissRelatedLookupPopup = (function(prev, $) {
        return function(win, chosenId) {
            var name = windowname_to_id(win.name);
            var elem = document.getElementById(name);

            // 1\. you could add extra condition checking here, for example
            if ($(elem).hasClass('my_raw_id_ext_cls')) { // add this class to the field
            //     ...logic of inserting picked items from the popup page
            } 
            else { // default logic
                prev(win, chosenId);
            }

            // 2\. or you could copy the following part from RelatedObjectLookups.js ...
            if (elem.className.indexOf('vManyToManyRawIdAdminField') != -1 && elem.value) {    
                elem.value += ',' + chosenId;
                // 2\. and add a return. Remember this acts globally.
                return;
            } else {
                document.getElementById(name).value = chosenId;
            }

            // 3\. the following line cause the popup to be closed while one item is picked. 
            // You could comment it out, but this would also affect the behavior of picking FK items.
            win.close(); 

        }
    })(dismissRelatedLookupPopup, django.jQuery); 
    ```

2.  Django 默认不支持这个。[djangosnippets.org](http://djangosnippets.org/tags/raw_id_fields/)上有一些片段，你可能想看看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T06:59:53.233

最后，我使用了修改后的[https://django-salmonella.readthedocs.org/en/latest/](https://django-salmonella.readthedocs.org/en/latest/)。我不显示输入字段并在表格中显示选定的记录。

# php - Javascript，使多个文本隐藏文本输入可见 onchange

> ID：14686250
> 
> 赞同：0
> 
> 时间：2013-02-04T11:56:22.713
> 
> 标签：php, javascript, html

好的，这是我现在的新 javascript 代码：

```
var counter = <? echo $count-1 ?>;
var limit = 24;

function addInput(divName){
 if (counter >= limit)  {
      alert("You have reached the limit of adding " + counter + " inputs");
 }
 else {
      var newdiv = document.createElement('div');

      var dropDown;

      var fromPHP=<? echo $s_to_json ?>;

      for (i=0; i<fromPHP.length; i++){
        yourValue = fromPHP[i];
        dropDown = dropDown + "<option value='" + yourValue + "'>" + yourValue + "</option>";
      }
      //document.write(dropDown);
      var containerType = "<?echo $matRow['container']?>";
      var viz;

      if (containerType == "Box/Bag"){
        viz = "visible";
      }else{
        viz = "hidden";
      }

      newdiv.innerHTML = "Weight " + (counter + 1) + ": <input type='text' name='myWeights[]' class='putty' maxlength='6' /> Material " + (counter + 1) + ": <input type='text' name='myMaterials[]' class='plato' maxlength='17' value='<? echo (isset($matRow['material']) ? $matRow['material'] : '')?>' /> Container " + (counter + 1) + ": <select onchange=\"switchMain(this.nextSibling.nextSibling.id);\" name='myContainers[]' id='myContainers[]'><option value='<? echo (isset($matRow['container']) ? $matRow['container'] : '') ?>' selected><? echo (isset($matRow['container']) ? $matRow['container'] : '') ?></option>' + dropDown + '" + dropDown + "</select><div id='boxhide[]' style='visibility:" + viz + ";display:inline;'> Quantity " + (counter + 1) + ": <input type='text' name='boxnum" + (counter + 1) +"' class='boxputty' maxlength='2' /></div>";
      document.getElementById(divName).lastChild.parentNode.appendChild(newdiv);
      counter++;
 }
}

function getStyle(divName){

var temp = document.getElementById(divName).style.visibility;

return temp;
}

function switchMain(divName){

//var e = document.getElementById("myContainers[]");
//var strUser = e.options[e.selectedIndex].value;

//console.debug(strUser);
//console.debug(divName);

if (strUser == "Box/Bag"){

    var current = getStyle(divName);

    //console.debug(current);

    document.getElementById(divName).style.visibility = "visible";
}else{
    document.getElementById(divName).style.visibility = "hidden";
}
}

function removeInput(divName){

if (counter<=1){
    alert("You cannot remove any more weights from this job.");
}
else {
    var olddiv = document.getElementById(divName);
    var lastChild = olddiv.lastChild;
        if (lastChild && lastChild.parentNode && lastChild.parentNode.removeChild){
            lastChild.parentNode.removeChild(lastChild);
            counter--;
        }
}
} 
```

这是调用它的脚本部分：

```
Weight <? echo $count ?>: <input type="text" class="putty" name="myWeights[]" maxlength="6" value="<? echo $read ?>" autofocus /> Material <? echo $count ?>: <input type="text" class="plato" name="myMaterials[]" maxlength="17" value="<? echo (isset($matRow["material"]) ? $matRow["material"] : "") ?>" />
        Container <? echo $count ?>: <select onchange="switchMain(this.nextSibling.nextSibling.id);" name="myContainers[]" id="myContainers[]">
            <option value="<? echo (isset($matRow["container"]) ? $matRow["container"] : "") ?>" selected><? echo (isset($matRow["container"]) ? $matRow["container"] : ""); ($matRow['container'] == 'Box/Bag' ? $vishid = 'visible' : $vishid = 'hidden') ?></option>
                <?

            <div id='boxhide[]' style="visibility:<? echo $vishid ?>;display:inline;">
            Quantity <? echo $count ?>: <input type="text" name="boxnum[]" class="boxputty" maxlength="2" />
            </div>

    <input type="button" alt='Add Weight' title='Add Weight' value="+" onClick="addInput('dynamicInput');">
    <input type="button" alt='Remove Weight' title='Remove Weight' value="-" onClick="removeInput('dynamicInput');"> 
```

我剪掉了所有不必要的部分。

截至目前，当用户单击以添加一行时，它会将其放置在错误的位置，但我确信我可以像以前一样对其进行排序。更大的问题是，通过单击“+”按钮添加的任何行在更改由 switchMain() 检查的下拉菜单时都会出错。错误显示“TypeError：this.nextSibling.nextSibling 为空”。

任何建议都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:38:53.923

因此，这里有一些明显但不一定容易听到的建议，用于清理您的编码方法以使您的生活更轻松，并可能使您的问题在未来更容易回答：

## 干净地分离php和js

尽可能将 php 和 javascript 分开。如果您必须将数据从 js 传递到 php，我建议采用更规范的方法，预先初始化所有 php 变量，然后稍后在 javascript 中使用它们：

```
var counter = <? js_escape($count-1); ?>;
var fromPHP=<? js_escape($s_to_json); ?>; // Null if not available
var jsVarFromPhp = <?php escape($necessary_var);?>;
var anotherVariable = <?php escape($another_var);?>;
var materialArray = <? echo json_encode($material_array);?>;

// then the js actually does stuff with javascript variables, ideally wrapped within a function, no php in the logic of your javascript. 
```

## 隔离 javascript 行为

当您处理这样的复杂语言组合时，通常最好将 php 行为与 javascript 行为隔离开来。 [http://jsfiddle.net](http://jsfiddle.net)非常适合，将您想要的 js 行为和您期望的 html 放入测试用例中。您必须将您的 php 变量转换为它们的值，但这会简化测试用例，因此建议您自己调试。

## 改掉在 html 中直接使用 echo 的习惯

您直接在 html 中回显内容。这最终会导致 XSS。省去麻烦并使用模板引擎（如果只是一个小项目，那就是一个小引擎）。Smarty 很受欢迎，而且很有效。如果您觉得出于某种原因必须使用原生 php，请尽量避免 html 中的 php 逻辑，并给自己一个包装函数以使 php 尽可能干净，例如：

```
function h($dirty){
    echo htmlentities($dirty, ENT_QUOTES | ENT_IGNORE, 'UTF-8');
} 
```

像这样使用：

```
<input value='<?php h($input_value);?>'> 
```

不过，我仍然推荐模板引擎方法。

# ember.js - 如何将 hasOne 关系与嵌入的 always 关系

> ID：14686253
> 
> 赞同：6
> 
> 时间：2013-02-04T11:56:33.997
> 
> 标签：ember.js, ember-data

EmberJS 在早期版本中删除了 hasOne。什么方法可以创建我想要的嵌套对象关系 hasOne

删除 hasOne 以支持 belongsTo，任何人都可以分享关于如何编写嵌套 JSON 之间的 {embedded : always} 关系的想法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-15T05:44:20.163

> 我知道这个问题已经过时并且已经得到解答，但由于它是“ember hasone”的热门搜索结果之一，我想分享我在这个主题上的发现。我已经阅读了第一个答案中的链接，但这个例子有点过时了。

“embedded”标志已过时，“DS.RESTAdapter.map”不是函数，“DS.hasOne”方法已弃用。

当前用于模拟“hasOne 关系”的 1.0.0-beta.2 解决方案只是使用“DS.belongsTo”。它们并没有太大的不同，您只需将 hasOne foreignKeys 添加到结果集中，就像使用 belongsTo 一样。

**来源：** [https ://github.com/emberjs/data/commit/a466741a36731c5d382df33461268024627325ef](https://github.com/emberjs/data/commit/a466741a36731c5d382df33461268024627325ef)

这是来自复杂模型的示例服务器响应。

```
{"users": [{
  "id": 1,
  "name": "John Doe",
  "profile": 27,        // merged hasone
  "image": 3,           // merged hasone
  "account_id": 64      // an actual belongsTo
}]} 
```

然后作为模型

```
App.User = DS.Model.extend({
   name: DS.attr('string'),
   profile: DS.belongsTo('profile'),
   image: DS.belongsTo('image'),
   account_id: DS.belongsTo('account')
}); 
```

希望这可以帮助任何寻找有关如何建模 hasOne 的信息的人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:00:57.770

您必须在适配器上设置映射，请参阅[此答案](https://stackoverflow.com/a/14521612/793002)以获取工作示例。

# android - admob 资源标识符在哪里定义？

> ID：14686255
> 
> 赞同：0
> 
> 时间：2013-02-04T11:56:43.770
> 
> 标签：android, attributes, admob

在旧版本的 admob SDK 中，您必须手动添加一个`attrs.xml`文件，其中定义了 admob 属性（adUnitId、adSize 等）。但在当前版本的 SDK 中不再需要。您需要在 XML 布局文件中做的唯一一件事就是使用 xmlns 声明 admob 命名空间。

所以我的问题是：他们是怎么做到的？我只是好奇他们是如何声明或定义这些属性的；我实际上可以使用这个“技巧”来使用我的海关观点，这些观点在未来有自己的属性。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:16:27.567

概括地说，AdMob 正在调用[AttributeSet.getAttributeValue(String namespace, String name)](http://developer.android.com/reference/android/util/AttributeSet.html#getAttributeValue%28java.lang.String,%20java.lang.String%29)和类似方法。它传入它所期望的命名空间（“ [http://schemas.android.com/apk/lib/com.google.ads ”）。](http://schemas.android.com/apk/lib/com.google.ads)这不需要是一个有效的 url - 它应该是一个不与其他命名空间冲突的唯一的。

# go - 如何在 golang 中包装 zlib？

> ID：14686256
> 
> 赞同：3
> 
> 时间：2013-02-04T11:56:47.940
> 
> 标签：go, zlib, cgo

我试图通过使用 cgo 从 golang 调用 c zlib 来修复 golang 最慢的 zip 实现

但我得到一个错误

错误：“deflateInit”未声明（在此函数中首次使用）

deflateInit 在 zlib.h 中定义

我错过了什么吗？感谢您的任何提示。

```
package main

/*
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>
#include "zlib.h"
*/
import "C"

import (
    "fmt"
)

func main() {
    fmt.Println("hmmm....")
    fmt.Println(int(C.random()))
    var strm C.struct_z_stream
    fmt.Println(strm)
    ret := C.deflateInit(&strm, 5) // trouble here
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T19:05:56.680

这是您的代码的固定版本。请注意`#cgo LDFLAGS: -lz`与 zlib 库和小 C 函数的链接，该函数处理宏而不是函数`myDeflateInit`这一事实。`deflateInit`还要注意定义的变化`strm`。

不幸的是，从 Go 中处理 C 宏相当烦人——我想不出比一个小的 C shim 函数更好的方法。

```
package main

/*
#cgo LDFLAGS: -lz
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>
#include "zlib.h"

int myDeflateInit(z_streamp s, int n) {
     return deflateInit(s, n);
}
*/
import "C"

import (
    "fmt"
)

func main() {
    fmt.Println("hmmm....")
    fmt.Println(int(C.random()))
    var strm C.z_stream
    fmt.Println(strm)
    ret := C.myDeflateInit(&strm, 5)
    fmt.Println(ret)
} 
```

# php - 表格中的PHP多个提交按钮

> ID：14686257
> 
> 赞同：1
> 
> 时间：2013-02-04T11:56:51.980
> 
> 标签：php, html, mysql, form-submit

我一直在创建一个允许用户向系统内的图像添加评论的 php 网站。

我的代码目前的工作方式是它获取该图像的所有注释并使用 while 循环将它们放入表中：

```
$commResult = mysql_query("SELECT u.userID, u.USERNAME, c.COMMENT, c.DATE_ADDED, c.ACTIVE, c.id FROM USERS u, COMMENTS c WHERE u.id = c.user_id and c.box_id = $boxId ORDER BY c.DATE_ADDED DESC");

while ($row = mysql_fetch_array($commResult))
    {
        if ($row[4] != 0)
        {
            echo "<tr><td><a href='User.php?uid=$row[0]'>$row[1]</a></td>";
            echo "<td style='text-align:right;'>" . date("d M y g:iA", strtotime($row[3])) ;
            if (isLoggedIn())
                echo " - DELETE";
            echo "</td></tr>";
            echo "<tr><td colspan='2'>" . $row[2] . "</td></tr>";
        }
    } 
```

我遇到的问题是我想在 DELETE 所在的位置放置一个提交按钮。这将为每个评论行创建一个按钮，因此如果单击代码将不知道按下了哪个按钮。有没有办法解决这个问题，所以每个按钮都有一个单独的 ID，所以当提交代码时，它知道评论的 id 是什么，因此我可以在数据库表上处理该评论 ID 的删除。

我尝试在 DELETE 所在的位置添加这段代码：

```
if (isLoggedIn())
                echo " - <button type='submit' name='delCom_sub' value='$row[5]' >X</button>"; 
```

但是，当我尝试使用以下代码处理按钮单击时：

```
if (!empty($_POST['delCom_sub']))
{
    echo "test";
} 
```

如果我单击一个按钮，则永远不会显示“测试”一词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:08:01.967

可以使用每个评论行的单独表格来完成。评论的 ID 存储在隐藏字段中。使用此方法，您需要删除任何父表单以防止嵌套表单。

```
 if (isLoggedIn())
        {
            echo '<form action="delete.php" method="post">
                  <input type="hidden" name="id" value="' . (int)$row['id'] . '" />
                  <input type="submit" value="Delete" />
                  </form>';
        } 
```

在您发布到的页面上，即`delete.php`：

```
if(isset($_POST['id']) && isLoggedIn())
{
    // do the delete with $_POST['id']
} 
```

除此之外，您可以通过在单击按钮时填充隐藏字段来使用 Javascript 来实现。另一种选择是将评论 ID 存储在提交按钮的`name`属性中，这样做您必须遍历帖子变量并解析出 ID。

使用按钮的示例`name`：

```
if (isLoggedIn())
            echo " - <input type='submit' name='delete_" . (int)$row['id'] . "' value='Delete' />"; 
```

在接收页面上：

```
if($_SERVER['REQUEST_METHOD'] == 'POST' && isLoggedIn())
{
    foreach($_POST as $key => $value)
    {
        if(strpos($key, 'delete_') === 0)
        {
            $id = substr($key, 7);
            // do the delete for $id
        }
    }
} 
```

# forms - Google App Script Spreadsheet Form error

> ID：14686268
> 
> 赞同：1
> 
> 时间：2013-02-04T11:57:25.673
> 
> 标签：forms, triggers, google-apps-script

**Separate issue raised with Google by st...@ditoweb.com [here](http://code.google.com/p/google-apps-script-issues/issues/detail?can=2&start=0&num=100&q=&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&groupby=&sort=&id=2391) (issue 2391)**

We have an iframe-based spreadsheet form on a website ([http://www.monarch-equestrian.co.uk/brochurerequest.html](http://www.monarch-equestrian.co.uk/brochurerequest.html)) which is set to generate emails with attached PDF's to respondents.

Over the past few days, this has been generating an error notification - "You do not have permission to call getActiveSpreadsheet". The script, triggered on submission, has been working perfectly - however the spreadsheet had grown to 1387 rows so we archived it and deleted most of the records in the original (in case we had reached the limit allowed and so we wouldn't have to create a new spreadsheet etc).

The question is, even though the spreadsheet is presumably now within data limits and all the settings are unchanged, why are we still getting the error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T19:34:33.247

根据问题中提到的报告问题，此问题已于 2013 年 2 月 25 日修复。

# mysql - 导出数据库时“创建查询的最大长度”是什么

> ID：14686277
> 
> 赞同：19
> 
> 时间：2013-02-04T11:57:59.447
> 
> 标签：mysql, phpmyadmin

我正在使用[phpMyAdmin](http://www.phpmyadmin.net/)，我想从数据库中导出所有数据。“创建查询的最大长度”属性是否会影响您导出的数据量？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T12:59:42.587

不，它没有。它确实会在一定程度上影响导出文件的大小。唯一发生的事情是它限制了每条`INSERT`语句的插入行数。所以你最终会得到更多、更小的陈述。

[以下](http://wiki.phpmyadmin.net/pma/export)是他们 wiki 中的一些信息：

> “创建查询的最大长度”选项似乎没有记录。但实验表明，它会拆分大型扩展插入，因此每个插入都不大于给定的字节数（或字符数？）。因此，在导入文件时，对于大型表，您可以避免错误“得到的数据包大于 'max_allowed_pa​​cket' 字节”。见 [http://dev.mysql.com/doc/refman/5.0/en/packet-too-large.html](http://dev.mysql.com/doc/refman/5.0/en/packet-too-large.html)

# soundcloud - SoundCloud API - Load entire set into scPlayer

> ID：14686279
> 
> 赞同：0
> 
> 时间：2013-02-04T11:58:03.147
> 
> 标签：soundcloud, audio-player

I want to get an entire set waveform overview like my Soundcloud homepage has.

```
.scPlayer({
    links: [{url: permalink_url, title: ""}] 
```

where permalink_url is my set's URL - it will only load one track at a time. Is there a way to get it to behave similar to my Soundcloud homepage, where the entire set is visible (and playable) as a single waveform?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:09:10.247

> 有没有办法让它的行为类似于我的 soundcloud 主页，整个集合作为单个波形可见（和可播放）？

不，抱歉，您需要根据我们的 API 自己编写该功能。

# javascript - 将 Javascript Ajax 转换为 jQuery Ajax 的最佳方法

> ID：14686280
> 
> 赞同：2
> 
> 时间：2013-02-04T11:58:08.093
> 
> 标签：javascript, jquery, ajax

将此代码转换为 jquery 的最佳方法是什么？我以这种方式尝试过，但注意到 Internet Explorer 给我带来了麻烦。所以我决定用 jQuery 来做，但我看到了很多方法，但我不知道如何用它做同样的功能。

```
function updateField(str, id, prevvalue, value, vehicletype) {
    if (str == "") {
        document.getElementById(id).innerHTML = "";
        return;
    }
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById(id).innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "inc/form_rest.php?q=" + str + "&prevvalue=" + prevvalue + "&value=" + value + "&vehicletype=" + vehicletype, true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T12:02:49.233

最简单的方法是使用[get](http://api.jquery.com/jQuery.get/)：

```
$.get("inc/form_rest.php",
    {q:str, prevvalue:prevvalue, value:value, vehicletype:vehicletype},
    function(html){
       $('#'+id).html(html);
    }
); 
```

请注意，我让 jQuery 构建 url，这也将确保正确完成 urlencoding。

由于您仅使用响应来填充元素，因此您也可以使用

```
$('#'+id).load(
   "inc/form_rest.php?q=" + str + "&prevvalue=" + prevvalue + "&value=" + value + "&vehicletype=" + vehicletype
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:03:11.607

很简单，只需调用一个方法：

```
function updateField(str, id, prevvalue, value, vehicletype) {
  if (str=="")
  {
    $('#' + id).html("");
    return;
  } 
  $.get("inc/form_rest.php", 
        {"prevvalue": prevvalue, "value":value /*and so on*/},
        function(data) {
          document.getElementById(id).innerHTML = data;  //this is compatible, no jQuery needed!
        }
  );

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T12:03:09.993

你正在做一个 GET 请求，所以使用它是有意义的[`jQuery.get`](http://api.jquery.com/jQuery.get)：

```
$.get("inc/form_rest.php", {
    q : str,
    prevvalue : prevvalue,
    value : value,
    vehicletype : vehicletype
}, function(response) {
    $('#' + id).html(response);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:00:20.757

在使用 jQuery 时，您不必担心浏览器。只需使用 jQuery Ajax [get](http://api.jquery.com/jQuery.get/)
方法。
采用

```
$.get('inc/form_rest.php',  // URL
      {q:str, prevvalue:prevvalue, value:value,vehicletype:vehicletype}, // Data
      function(data) {
      // Do post Ajax things here
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T12:03:13.340

尝试

```
$.ajax({
    url: 'inc/form_rest.php?q='+str+'&prevvalue='+prevvalue+'&value='+value+'&vehicletype='+vehicletype,
    method: 'GET',
    success: function(data, textStatus, jqXHR) {
        document.getElementById(id).innerHTML=data;
    }

}); 
```

或简单

```
$.get('inc/form_rest.php?q='+str+'&prevvalue='+prevvalue+'&value='+value+'&vehicletype='+vehicletype, function(data) {
    document.getElementById(id).innerHTML=data;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T12:04:19.843

执行以下操作：

1.  删除检查浏览器然后创建**xmlhttp** 对象的代码。
2.  您不需要像 **xmlhttp.onreadystatechange = function**这样的显式回调方法。
3.  直接把你的**jQuery** ajax 方法调用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T12:06:08.000

我认为这应该有效：

```
function updateField(str, id, prevvalue, value, vehicletype){
      var request = $.ajax({
          url: "inc/form_rest.php",
          type: "GET",
          data: { "str" : str, 
                  "prevvalue" : prevvalue, 
                  "value" : value, 
                  "vehicletype" : vehicletype
          },
          'success': function(){
             //successful request
          }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T12:06:28.913

那么你的例子：

```
var url = "inc/form_rest.php?q="+str+"&prevvalue="+prevvalue+"&value="+value+"&vehicletype="+vehicletype;

$.get(url,function(data){
 $("#"+id).html(data); 
 }); 
```

# background-image - Retain hard edge when blurring background image with size: cover

> ID：14686281
> 
> 赞同：2
> 
> 时间：2013-02-04T11:58:12.997
> 
> 标签：background-image, blur, css

So I set a background img with background-size: cover. Works so far. But when I add a blur it will lose it's hard egde obviously. How could I remove the blurred edge? Maybe the background has to be scaled up and then cut off with some overflow:hidden?

I would have used a wrapping div with overflow:hidden around an img, but then I can't use background-size:cover, right?

This is how it looks: [http://jsfiddle.net/RyQRY/](http://jsfiddle.net/RyQRY/)

And this is how it should look: [http://cl.ly/image/0B2f191p2m0i](http://cl.ly/image/0B2f191p2m0i)

HTML

```
<div id="background"></div> 
```

CSS

```
#background {
    position: absolute;
    z-index: -999;
    top: 0px;
    height: 546px;
    width: 100%;
    background-image: url(../img/background.jpg);
    background-size: cover;
    -webkit-filter: blur(50px);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T14:14:55.117

Second link is dead, so I don't know how it should be.

However you can hide blured edges:

```
position: absolute;
    top: -25px;
    bottom: -25px;
    left: -25px;
    right: -25px; 
```

But you can NOT use `overflow:hidden` after that, because it will crop bluring-area. And you find yourself in the same place where you were ))

Use `:after`.

It is not very beautyfull solution, but...

You can look here:

[**http://jsfiddle.net/RyQRY/10/**](http://jsfiddle.net/RyQRY/10/)

May be it will be usefull for you...

# c# - WinCE中的线程同步

> ID：14686284
> 
> 赞同：0
> 
> 时间：2013-02-04T11:58:22.490
> 
> 标签：c#, winforms, compact-framework, windows-ce, thread-synchronization

我遇到了线程同步的问题。我的演示者分析了一些传感器并更新了 UI 表单。我将更新代码移动到单独的线程中。它工作正常，但是如果用户在更新视图时停止演示者，软件就会冻结 - 我发现它发生在 view.UpdateUI 工作时（它只是使用 Invoke 设置了一些标签）。我的问题在哪里？我使用紧凑型框架 3.5 和 Windows CE 5

```
using System.Threading;

class MyPresenter
{
  UserControl view;

  private Thread thread;
  private ManualResetEvent cancelEvent;

  public void Start()
  {
    cancelEvent = new ManualResetEvent(false);
    thread = new Thread(UpdateView) { IsBackground = true };
    thread.Start();
  }

  public void Stop()
  {
    if (thread != null) {
      cancelEvent.Set();
      thread.Join();
      thread = null;
    }
  }

  private void UpdateView()
  {
    while (cancelEvent.WaitOne(1000, false) == false) {
      // analyze something
      view.UpdateUI(...);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:27:30.233

不要直接从工作线程中更新 UI 线程。请改用委托。例如：[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:36:22.817

如果您的后台线程被阻止调用您的 UI（通过`Control.Invoke`），然后您的 UI 线程被阻止调用您的 Stop 方法，`thread.Join()`那么您将获得一个经典的致命拥抱。您应该摆脱加入，而是让后台线程在停止完成时引发最后一个事件/通知，以便 UI 可以处理该事件（启用/禁用按钮等）。

# winscp - WinSCP：查找选项列出所有文件夹

> ID：14686286
> 
> 赞同：2
> 
> 时间：2013-02-04T11:58:25.590
> 
> 标签：winscp

我正在使用 WinSCP 来导航我所有的 unix（虚拟）机器。

当我使用“查找”对话框搜索特定文件名并尝试使用简单的掩码“status.dat”时。为什么它列出了我所有的目录？

真是神奇...

你有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:33:36.503

它可能取决于您使用的 WinSCP 的确切版本：

[错误 840](http://winscp.net/tracker/840)已在 5.0.7 中修复，大约是：

> 查找文件时，隐式查找所有目录

# java - NullPointerException Error in Method .But Method field is fetching value

> ID：14686287
> 
> 赞同：0
> 
> 时间：2013-02-04T11:58:28.543
> 
> 标签：java, arraylist, nullpointerexception, file-handling

```
Class A
{
    Class B
    {
        ArrayList<MultiGridImageNode>   a
        Bitmap                          b
        ByteBuffer                      c
    }

    B bb;

    save()
    {
        //Load will use Save method to fetch all stored value in file(which is correct)
    }

    load(B cc)
    {
        //this P.x and P.y . I am fetching from file one by one (while debugging i can see correct value)
        Point P;
        cc.a.get(i).add(P)   //Still NULL POINTER EXCEPTION ERROR 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:11:01.350

您的任何对象都没有被初始化。简单地声明它们不会实例化新对象。尝试这样的事情：

```
Class A
{
    Class B
    {
        ArrayList<MultiGridImageNode>   a = new ArrayList<MultiGridImageNode>(); // <----
        Bitmap                          b = new Bitmap(); // <----
        ByteBuffer                      c = new ByteBuffer(); // <----
    }

    B bb = new B(); // <----

    save()
    {
        //Load will use Save method to fetch all stored value in file(which is correct)
    }

    load(B cc)
    {
        //this P.x and P.y . I am fetching from file one by one (while debugging i can see correct value)
        Point P = new Point(); // <----
        cc.a.get(i).add(P)   //Still NULL POINTER EXCEPTION ERROR 
    }
} 
```

我用 标记了更改`// <----`。

# iphone - remove a UIView on touchevent

> ID：14686291
> 
> 赞同：0
> 
> 时间：2013-02-04T11:58:38.527
> 
> 标签：iphone, xcode4.5

I'm adding a `UIView` in the current `UIViewController`. I need to remove a `UIView` when touched anywhere on the screen. I have a `UIButton` in the `UIView`. But if I click `UIButton` then also the `UIView` is removed.

Actually I have added a button(Signout) in `UIView` which when click should dismiss the `currentview` and go to `homeViewController`. But if I tap anywhere on the current view other than the button on `UIView` then `UIView` should be removed. But in my case if I click button then also `UIView` is removed.

```
logout= [[UIView alloc]initWithFrame:CGRectMake(210,lbllogin.frame.origin.y+lbllogin.frame.size.height, 80, 50)];
logout.backgroundColor = [UIColor yellowColor];
btnSignout = [UIButton buttonWithType:UIButtonTypeCustom];
[btnSignout addTarget:self 
                action:@selector(aMethod:)
      forControlEvents:UIControlEventTouchDown];
btnSignout = CGRectMake(0,0,80,13);
[logout addSubview: btnSignout];
[self.view addSubview:logout];

        UIButton *btnsignout=[[UILabel alloc]init];
        [lblsignout setFrame:CGRectMake(0, 0, 80, 13)];
        lblsignout.textAlignment = NSTextAlignmentLeft;
        lblsignout.backgroundColor = [UIColor clearColor];
        lblsignout .font=[UIFont fontWithName:@"Helvetica-Bold" size:14];
        lblsignout.text=@"Sign out";

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [logout removeFromSuperview];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:05:59.340

您必须跟踪触摸的位置，这意味着您必须检查您是否已经点击了按钮的框架。如果您点击了按钮的位置，即按钮的框架，则不要调用 removeFromSuperView。否则调用 removeFromSuperView。

```
//pseudo code,not actual code
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

if( touches.x & touches.y is in button frame)
{
[logout removeFromSuperview];
}
else
{
[btnSignOut removeFromSuperview];
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:07:25.667

要添加此功能，您必须转到 InterfaceBuilder-identity 检查器 - 类并设置类 UIControl.然后通过 ctr-drag 将 ViewController 的主视图连接到您的 .h 文件并创建用于修饰 inside.like 的操作：

```
- (IBAction)backgroundTapped:(id)sender; 
```

并在 .m 文件中

```
 - (IBAction)backgroundTapped:(id)sender {
        //remove your view here
    [logout removeFromSuperview];
    } 
```

# xml - Java XML files comparison

> ID：14686292
> 
> 赞同：1
> 
> 时间：2013-02-04T11:58:40.487
> 
> 标签：xml, java, xmlunit

I'm trying to compare 2 XML files using XMLUnit. I tried with the following code in eclipse, I have placed the xml files to be compared in the local directory.

```
import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.URL;
import java.util.List;

import org.custommonkey.xmlunit.DetailedDiff;
import org.custommonkey.xmlunit.Diff;
import org.custommonkey.xmlunit.Difference;
import org.xml.sax.SAXException;

public class ComparisonTest {

public static void main(String[] args) {
    URL url1 = ComparisonTest.class.getResource("D:/reference.xml");
    URL url2 = ComparisonTest.class.getResource("D:/comparison.xml");
    FileReader fr1 = null;
    FileReader fr2 = null;
    try {
        fr1 = new FileReader(url1.getPath());
        fr2 = new FileReader(url2.getPath());
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    try {
        Diff diff = new Diff(fr1, fr2);
        System.out.println("Similar? " + diff.similar());
        System.out.println("Identical? " + diff.identical());

        DetailedDiff detDiff = new DetailedDiff(diff);
        List differences = detDiff.getAllDifferences();
        for (Object object : differences) {
            Difference difference = (Difference)object;
            System.out.println("***********************");
            System.out.println(difference);
            System.out.println("***********************");
        }

    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

} 
```

I'm getting an error as

```
Exception in thread "main" java.lang.NullPointerException
at com.org.comparison.ComparisonTest.main(ComparisonTest.java:21) 
```

I'm not able to figure out why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:24:56.897

I'm not sure that you can pass "D:/reference.xml" as resource. Just pass paths to constructor of `FileReader`:

```
FileReader fr1 = null;
FileReader fr2 = null;
try {
    fr1 = new FileReader("D:/reference.xml");
    fr2 = new FileReader("D:/comparison.xml");
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

I'm pretty sure that `getResource` gives you null.

```
URL url1 = ComparisonTest.class.getResource("D:/reference.xml");
URL url2 = ComparisonTest.class.getResource("D:/comparison.xml");
System.out.println(url1 + " " + url2); // I suppose output is "null null" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T09:16:57.310

由于 getResource() 方法，您会收到此错误。它不会将引用对象返回到您的 xml 文件。您可以直接将文件名传递给 FileReader 构造函数，也可以创建一个 File 类对象。我已经改进了你的代码块，你可以复制并运行它。它将工作 100 % :) :)

```
import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.URL;
import java.util.List;

import org.custommonkey.xmlunit.DetailedDiff;
import org.custommonkey.xmlunit.Diff;
import org.custommonkey.xmlunit.Difference;
import org.xml.sax.SAXException;

public class ComparisonTest {

public static void main(String[] args) {
File f1 = new File("D:/reference.xml");
File f2= new File("D:/comparison.xml");
FileReader fr1 = null;
FileReader fr2 = null;
try {
    fr1 = new FileReader(f1);
    fr2 = new FileReader(f2);
} catch (FileNotFoundException e) {
    e.printStackTrace();
}

try {
    Diff diff = new Diff(fr1, fr2);
    System.out.println("Similar? " + diff.similar());
    System.out.println("Identical? " + diff.identical());

    DetailedDiff detDiff = new DetailedDiff(diff);
    List differences = detDiff.getAllDifferences();
    for (Object object : differences) {
        Difference difference = (Difference)object;
        System.out.println("***********************");
        System.out.println(difference);
        System.out.println("***********************");
    }

} catch (SAXException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
} 
```

}

# powershell - Powershell command for waiting one process to get completed

> ID：14686294
> 
> 赞同：0
> 
> 时间：2013-02-04T11:58:43.707
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-1.0

I have power shell script which will perform multiple tasks like uninstalling,removing and again installing wsp solutions.I am facing an issue like the first process is taking too long time for uninstalling solution so that other process has to wait till the first action has to get completed fully.Now i am giving sleep time but it has some problem while different machines speed gets varies.. I also aware about calling notepad like an external function but i dont want that has to happen here.Apart from that any solutions are availabe like I need to wait for first process to get complete before starting the second process.

```
$InstallDIR = "F:\new\source\UpdatedWSPFiles"
$Dir = get-childitem $InstallDIR -Recurse
$WSPList = $Dir | where {$_.Name -like "*.wsp*"}
Foreach ($wsp in $WSPList )
{
$WSPFullFileName = $wsp.FullName
$WSPFileName = $wsp.Name
try
{
Write-Host -ForegroundColor White -BackgroundColor Blue "Working on $WSPFileName"
Write-Host -ForegroundColor Green "Retracting Solution"
Uninstall-SPSolution -AllWebApplications -Identity "$WSPFileName" -Confirm:$false 
sleep 100

Write-Host -ForegroundColor Green "Removing Solution from farm"
Remove-SPSolution -Identity "$WSPFileName" -Confirm:$false -Force
sleep 60

Write-Host -ForegroundColor Green "Adding solution to farm"
Add-SPSolution "$WSPFullFileName"  -Confirm:$false 
sleep 60
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:37:34.500

猜你可以试试

```
Start-Job -Name "jobname" -ScriptBlock { Uninstall-SPSolution -AllWebApplications -Identity "$WSPFileName" -Confirm:$false } 
```

和

```
Wait-Job -Name "jobname" -Timeout "maximum wait time" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:28:03.613

您可以尝试使用 -wait 开关启动进程：

```
 PS> $p="C:\windows\System32\WindowsPowerShell\v1.0\powershell.exe"
    PS> $params="-command &{ if ((Get-PSSnapin `"Microsoft.SharePoint.PowerShell`" -ErrorAction SilentlyContinue) -eq $null) 
{
    Add-PSSnapin `"Microsoft.SharePoint.PowerShell`"
}
Uninstall-SPSolution -AllWebApplications -Identity `"$WSPFileName`" -Confirm:$false}"
    PS> Start-Process $p $params -Wait 
```

# oracle10g - Oracle Data Modeler: How to create view my_view start with id = 0 connect by prior id = p_id

> ID：14686296
> 
> 赞同：0
> 
> 时间：2013-02-04T11:58:59.390
> 
> 标签：oracle10g, data-modeling

I have a table hierarhy as follows:

```
CREATE TABLE accounts
    (
     id NUMBER  NOT NULL ,
     p_id NUMBER ,
     acc_num NUMBER
    ) 
```

I can create view as follows:

```
CREATE VIEW my_view AS
 SELECT level lvl, id, p_id
   FROM accounts
   START WITH id = 0 CONNECT BY PRIOR id = p_id; 
```

I can't create this view in Oracle SQL Developer Data Modeler. How can I do this task?

# c# - 如何检查与 MySql Server 的连接详细信息是否有效？

> ID：14686301
> 
> 赞同：0
> 
> 时间：2013-02-04T11:59:11.190
> 
> 标签：c#, .net, mysql

我正在尝试编写一个函数来检查表单上给出的连接详细信息是否有效，因此它返回 True 否则返回 False ：

我怎样才能做到这一点？

我的代码如下：

```
 private bool checkConnectionSuccess(string host, string user, string pass, string dbname) {
        string strProvider = "Data Source=" + host + ";Database=" + dbname + ";User ID=" + user + ";Password=" + pass;
        MySqlConnection myConn = new MySqlConnection(strProvider);
        myConn.Open();  

        if (________) return true; else return false;

    } 
```

我应该怎么做才能根据给定的详细信息（用户、密码、数据库名、主机）检查连接是否成功

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:02:12.307

使用 try catch 块：

```
private bool checkConnectionSuccess(string host, string user, string pass, string dbname)
{
   string connectionString = "Data Source=" + host + ";Database=" + dbname + ";User ID=" + user + ";Password=" + pass;

   bool sucessful = true;

   using (MySqlConnection conn = new MySqlConnection (connectionString))
   {
     try
     {
       conn.Open();
     }
     catch (MySqlException ex)
     {
       sucessful = false;
     }
   }
    return sucessful;
} 
```

这是可能的，因为 MySQLConnection 可能会在大多数异常情况下失败，包括凭据错误或连接字符串无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:04:18.167

使用 try-catch 块，并设置一个标志来告诉它是否有效。

```
string strProvider = "Data Source=" + host + ";Database=" + dbname + ";User ID=" + user + ";Password=" + pass;
MySqlConnection myConn = new MySqlConnection(strProvider);

bool success = true;

try
{
    myConn.open();
}
catch (Exception e)
{
     success = false;
}

return success; 
```

# django - 使用 django celery 传输文件时如何更新数据库中的表？

> ID：14686305
> 
> 赞同：0
> 
> 时间：2013-02-04T11:59:21.500
> 
> 标签：django, django-celery

我在 Django 中有这样的任务：

```
from celery import task
import subprocess, celery

@celery.task
def file(password, source12, destination):
    return subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0] 
```

这会将文件从一台服务器传输到另一台服务器，使用`rsync`. 以下是我的看法：

```
def sync(request):
    """Sync the files into the server with the progress bar"""
    choices = request.POST.getlist('choice') 
    for i in choices:
        new_source = source +"/"+ i 
        start_date1 = datetime.datetime.utcnow().replace(tzinfo=utc)
        source12 = new_source.replace(' ', '') #Remove whitespaces
        result = file.delay(password, source12, destination)
        result.get()
        a = result.ready()
        start_date = start_date1.strftime("%B %d, %Y, %H:%M%p")

        extension = os.path.splitext(i)[1][1:] #Get the file_extension
        fullname = os.path.join(destination, i) #Get the file_full_size to calculate size
        st = int(os.path.getsize(fullname))
        f_size = size(st, system=alternative) 
```

我想更新数据库中要更新的表并将其显示给用户。传输文件时应更新该表。我怎样才能做到这一点`django-celery`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:12:22.347

对于 Django，Celery 没有什么特别之处。您可以像往常一样更新数据库。您可能需要考虑的唯一一件事是交易。

只是为了确保我会推荐使用手动提交或自动提交来更新数据库。尽管我建议使用 redis/memcached 而不是数据库来进行此类状态更新。它们更适合此目的。

# iphone - iOS 6 应用程序挂在启动画面 JQTouch + Phonegap

> ID：14686307
> 
> 赞同：0
> 
> 时间：2013-02-04T11:59:24.250
> 
> 标签：iphone, ios, cordova, jqtouch

我正在开发的应用程序有一个奇怪的问题`jQTouch and Phonegap`。该应用程序大部分时间都可以正常工作，但有时（似乎是随机的）该应用程序会卡在 SplashScreen。有时它仍然会在几分钟后打开。它只是加载`HTML, CSS`和`JS`文件（没有`Ajax`请求或其他）。有没有人熟悉这个问题，或者任何想法如何调试它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:39:11.320

我也是。我认为我们需要为我们的应用升级 phonegap。

# c# - “无法在清单资源中找到报告”.NET 4.0

> ID：14686309
> 
> 赞同：0
> 
> 时间：2013-02-04T11:59:32.473
> 
> 标签：c#, .net, crystal-reports

我知道以前有人问过这个问题。但是我已经尝试了其他问题的答案，但没有任何运气。我已经从 .rpt 文件引用中删除了 Namespacing，并将文件的构建操作设置为 Embedded Resource，但没有任何帮助，我仍然得到相同的错误。错误发生在这里：

```
 public override string FullResourceName {
            get {
                return "RptManifest3.rpt";
            } <--------
            set {
                // Do nothing
            }
        } 
```

当代码到达箭头时，我得到了错误。任何人都可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-04T11:01:09.490

最后我可以解决这个问题，只需转到参考资料并在那里选择所有以'crystalldesicion'开头的'dll'。全部选择后，在属性表中找到“复制本地”属性，现在将其值更改为“真”。构建项目并将其全部保存。现在它准备采取行动

# ios - xCode 安装旧的 iOS SDK

> ID：14686311
> 
> 赞同：4
> 
> 时间：2013-02-04T11:59:36.910
> 
> 标签：ios, xcode, sdk

我最近将 xCode 更新到了最新版本。（包括 iOS SDK 6.1） 问题是，我想让我的应用程序可用于所有 iOS 版本，从 5.0 版开始。这甚至可能吗？

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T12:02:02.603

转到 Xcode->Preferences->Downloads->install Simulators 以测试所有 iOS 版本。

要设置应用程序的最低 iOS 版本，请转到 Targets->Summary->Deployment Target->Set to 5.0

希望这可以帮助你..

# jqplot - 保存jqplot的空白图像

> ID：14686312
> 
> 赞同：0
> 
> 时间：2013-02-04T11:59:45.603
> 
> 标签：jqplot

我可以使用 jqplot 创建/绘制图表。当我右键单击它并将其另存为 PNG 时，它正在保存一个空白图像。这是图像数据：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbkAAAEeCAYAAAAXTWt+AAACAElEQVR4nO3BMQEAAADCoPVPbQ0PoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ4MtD8AAaRK8nUAAAAASUVORK5CYII= 
```

谁能让我知道这个图像数据是好的，我可以保存它吗？

太感谢了！

-帕拉梅什瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T17:28:39.150

我从图表中渲染图像没有任何问题......

```
 var imgData = $('#chart').jqplotToImageStr({}); 
```

然后我将 imgData var（包含 base64 图像）发送到 php 页面，以便直接下载它。我只想显示该图像，您只需将该 var 添加到图像标记的 src 属性中（或将其作为弹出窗口打开，将 var 作为窗口的 href 属性）

```
 window.open(imgData,"_blank","scrollbars=0"); 
```

无论如何，如果您将该 base64 代码传递给 php 页面，您可以使用该代码（和适当的标头）下载它：

```
 $data = $_POST['data']; //your base64 code
    $data = substr($data,22); //remove some unuseful chars
    $img=base64_decode($data); //decode data
    $out = "../tmp/report_".date("d-m-Y_His").".png"; //set output image location 
    file_put_contents($out, $img); //create file
    echo $out; //let user direct download it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T10:22:09.080

jqPlot 可以使用函数*jqplotToImageStr()*将其图表转换为图像 您必须运行 JavaScript 才能将动态图表转换为可保存的图像。

在这里查看答案： [JqPlot As Image](https://stackoverflow.com/questions/12182598/jqplot-as-image)

# php - PHP表单提交以获取所有选项值？

> ID：14686316
> 
> 赞同：1
> 
> 时间：2013-02-04T12:00:08.367
> 
> 标签：php, html

在这里，我只想讨论以下内容：

我的 HTML From 就像下面的代码：

```
<html>
<head>
<title>My Form</title>
</head>
<body>
<form id="sample" method="post" action="saveData.php">
Courses:
<input type="checkbox" name="check[]" Value="C++" />C++
<input type="checkbox" name="check[]" Value="PHP"/>PHP
<input type="checkbox" name="check[]" Value="MYSQL" />MYSQL
<input type="checkbox" name="check[]" Value=".Net"/>.Net
Gender:
<input type="radio" name="gen[]" Value="male"/>male
<input type="radio" name="gen[]" Value="female"/>Female
</form>
</body>
</html> 
```

我想要如下输出：

```
 foreach ($_POST as $key => $val) {
        $actVal .= "'".strtolower($key)."|".strtolower($val)."',";
        $sqlin .= " ".strtolower($key)." VARCHAR(255) , ";
                } 
```

但我得到了输出，就像在那个选项中点击了一样：

如下所示：

```
-----------------------------------------
male
C++ 
```

但我需要它，如下所示：

```
male,female
C++,PHP,MYSQL,.Net 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:17:58.723

当您遍历将成为数组的发布数据时，我相信这就是为什么只返回其中一个元素的原因。

您可能想尝试这样的事情：

```
foreach ($_POST as $key => $val) {
    if ($key == "check" || $key == "gen") { // If this is an array post field
        foreach ($val as $val2) { // We need to loop through again since they're array post fields
            $actVal .= "'" . strtolower($val2) . "'";
        }   
    } else {
        $actVal .= "'".strtolower($key)."|".strtolower($val)."',";
    }
    //$sqlin .= " ".strtolower($key)." VARCHAR(255) , "; // Worry about this separately, should be the same process
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:19:00.453

我想不出办法解决那个问题。但有一个替代方案：

```
<input type="checkbox" name="check" value="php" />PHP
<input type="hidden" name="checklist" value="php" />

<input type="checkbox" name="check" value="MySQL" />MySQL
<input type="hidden" name="checklist" value="MySQL" /> 
```

这个想法是将复选框/单选按钮的所有值的列表存储在隐藏的输入中，以便在提交表单时在服务器端获取这些值的列表。

顺便说一句，你为什么还需要它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:22:12.193

POST will send all values if you mark them as selected using javascript right before submitting. $_POST["check"] is an array. use a foreach and get all values from that array.

# security - 在不添加注册表项的情况下在浏览器中运行时为 Silverlight 5 应用程序启用提升的信任

> ID：14686317
> 
> 赞同：4
> 
> 时间：2013-02-04T12:00:15.017
> 
> 标签：security, browser, silverlight-5.0, elevated-privileges, full-trust

为了在浏览器内运行时启用对 Silverlight 5 应用程序的更高信任，我尝试了很多选项，例如[这里](http://www.pitorque.de/MisterGoodcat/post/Silverlight-5-Tidbits-Trusted-applications.aspx)（Goodcat 先生），并且只有在我添加注册表项**AllowElevatedTrustAppsInBrowser时它才能很好地与我们的 VeriSign****证书**配合使用。对于我们的客户来说，这不是一种选择，因为我们的应用程序必须以提升的权限运行，并且必须在浏览器外和浏览器内运行（并且它只能在更改注册表项后才能工作）。该应用程序将托管在我们的互联网网站上。

 **是否可以在不添加注册表项的情况下为浏览器启用提升的信任（例如，在服务器上添加一些配置，但不在客户端上添加一些配置？是否可以向用户询问提升的权限，例如在Silverlight 4 用于网络摄像头捕捉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T15:54:18.917

我过去也遇到过类似的问题。通过更改注册表设置配置应用程序后，它可以正常工作。但是客户质疑如果我们进行这样的设置会违反安全性。然后，我创建了一个 OOB 应用程序并使用 ClientAccessPolicy.xaml 文件来提升信任。在此之后，我不需要任何注册表更改或导入链接中提到的证书：http: [//www.mistergoodcat.com/post/Silverlight-5-Tidbits-Trusted-applications](http://www.mistergoodcat.com/post/Silverlight-5-Tidbits-Trusted-applications)

此外，如果有人可以详细说明更改注册表设置的安全问题。据我了解，因为我们只是为 Silverlight 应用程序进行更改。因此，任何其他恶意应用程序都无法运行，因为它可能没有安装受信任的证书（证书只能由管理员导入）

我使用这个 [链接] ( [http://msdn.microsoft.com/en-us/library/dd833073(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd833073(v=vs.95).aspx) ) 创建了一个 OOB 应用程序。另外，我创建了一个包含以下内容的 ClientAccessPolicy 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
  <Deployment.OutOfBrowserSettings>
  <OutOfBrowserSettings.SecuritySettings>
    <SecuritySettings ElevatedPermissions="Required" />
  </OutOfBrowserSettings.SecuritySettings>
  </Deployment.OutOfBrowserSettings>
</access-policy> 
```

然后我将我的应用程序发布到服务器，它作为 OOB 应用程序工作，无需修改注册表设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:26:45.710

我有同样的问题。像 jv42 的答案一样，您必须添加注册表项才能在浏览器中启用 Silverlight 5 应用程序的提升信任。所以，我的解决方案是添加一个 OOB 应用程序来更改同一解决方案中的注册表项。if(Application.Current.HasElevatedPermissions) 在浏览器中的应用程序中为 false，启动 OOB 应用程序并将 AllowElevatedTrustAppsInBrowser 注册表添加到客户端计算机。当客户第一次使用您的应用程序时，它只需要一次。我希望它对其他有同样问题的人有用。**

# javascript - 将 li 的内容居中对齐在 ul 中

> ID：14686318
> 
> 赞同：0
> 
> 时间：2013-02-04T12:00:15.840
> 
> 标签：javascript, html, css, image-gallery

这是一个垂直画廊。

```
http://www.braddockinfotech.com/demo/dvnonline/vod/ 
```

When a particular video in gallery is selected, the selection is left aligned.I hope the below picture makes it clear

![在此处输入图像描述](../Images/a06fab2215a75751bc2fb3882ea1562a.png)

如何使选择中心对齐。我的意思是目前选择触及容器的左边框而不是容器的右边框（橙色虚线）。我希望选择只选择内部视频图像而不是容器边框

这是html代码

```
 <body onkeydown="HandleKeyDown(event);">
    <table cellpadding="0px" cellspacing="0px" border="0px" class="sitewidth">
        <tr>
            <td align="left" valign="top" style="width:800px;">
                <div id='divVideoPlayer'></div>
            </td>
            <td align="center" style="width:140px;">
                <div id="divPlaylistContainer">
                    <div id="playlistNavPrev">
                        <a id="imgNavPrev" onclick="MoveToDirection('Up');"><span class="arrow">&nbsp;</span>
                        </a>
                    </div>
                    <div id="divPlaylist">
                        <!--playlist-->
                        <div id="spanSlider" style='top:0px; position:relative;'>
                            <ul id="ulSlider">
                                <?php $index=1 ; $firstVideoUrl='' ; $firstImageUrl='' ; $videoDetails=G
                                etVideoDetails(); echo "<script> var siteUrl = '".$siteUrl.
                                "' </script>"; while ($row=m ysql_fetch_array($videoDetails)) { echo
                                "<script>video[".$index. "]='";echo $row[3]. "';</script>"; echo "<script>image[".$index.
                                "]='";echo $row[2]. "';</script>"; //echo "<script>title[".$index. "]='";echo
                                $row[1]. "';</script>"; echo "<script>title[".$index. "]='";echo str_replace(
                                "'", "\'",$row[1]). "';</script>"; // 0 - id , 1 - Title , 2- ImageUrl, 3
                                - VideoUrl //echo $row[0].$row[1].$row[2].$row[3]. "<br/>"; //echo
                                "<li id='liButton_".$index. "'><a  onclick=\"ShowVideo( '".$index."');\
                                "><img id='ImageButton_".$index. "' title='".$row[1]. "' alt='".$row[1]. "' src=".$siteUrl.
                                "timthumb/timthumb.php?src=".$row[2]. "&amp;h=54&amp;w=109&amp;zc=1&amp;a=c></a></li>"; $index++;
                                } ?>
                            </ul>
                        </div>
                    </div>
                    <div id="playlistNavNxt">
                        <a id="imgNavNext" onclick="MoveToDirection('Down');"><span class="arrow">&nbsp;</span>
                        </a>
                    </div>
                </div>
            </td>
    </table>
</body> 
```

这是javascript代码

```
 var video = new Array();
 var image = new Array();
 var title = new Array();
 var noOfImagesCanShow = 6;
 var selected = 1;
 var slideNo = 1;

 String.prototype.trim = function () {
     return this.replace(/^\s+|\s+$/g, "");
 };

 function SetPlayList() {
     var listHtml = '';
     var lastIndex = slideNo * noOfImagesCanShow;
     var firstIndex = (slideNo * noOfImagesCanShow) - (noOfImagesCanShow - 1);
     var rowNo = 1;
     for (var i = firstIndex; i <= lastIndex; i++) {
         if (firstIndex >= 1 && lastIndex < title.length) {
             listHtml += "<li id='liButton_" + rowNo + "'><a  onclick=\"ShowVideo('" + i + "');\"><img id='ImageButton_" + i + "' title=\"" + title[i] + "\" alt='" + title[i] + "' src=" + siteUrl + "timthumb/timthumb.php?src=" + image[(i)] + "&amp;h=54&amp;w=109&amp;zc=1&amp;a=c></a></li>";
             rowNo++;
         }
     }
     document.getElementById('ulSlider').innerHTML = listHtml;
     document.getElementById('liButton_1').tabIndex = 2;
     document.getElementById('liButton_1').focus();
 }

 function ShowVideo(videoIndex) {
     var streamToBeUsed = "";
     var provideType = "";
     if (video[videoIndex].trim().substring(0, 7) == "http://") {
         streamToBeUsed = '';
         provideType = "http";
     } else {
         streamToBeUsed = "rtmp://cp87191.edgefcs.net/ondemand/";
         provideType = "rtmp";
     }
     var autostart = "true";

     if (jwplayer("divVideoPlayer") != null) {
         jwplayer("divVideoPlayer").stop();
     }

     jwplayer("divVideoPlayer").setup({
         file: streamToBeUsed + video[videoIndex].trim(),
         image: image[videoIndex],
         icons: "true",
         autostart: autostart,
         screencolor: "black",
         'width': '800',
         'height': '510',
         streamer: streamToBeUsed,
         provider: provideType,
         events: {
             onBeforePlay: function () {
                 document.getElementById('liButton_' + videoIndex).tabIndex = '2';
                 document.getElementById('liButton_' + videoIndex).focus();
             }
         }
     });
     // clearing all style
     var totalImages = noOfImagesCanShow;
     for (var i = 1; i <= totalImages; i++) {
         var imageId = (((slideNo * noOfImagesCanShow) - (noOfImagesCanShow)) + i).toString();
         if (document.getElementById('liButton_' + i) != null && document.getElementById('ImageButton_' + imageId) != null) {
             document.getElementById('liButton_' + i).className = 'inactiveli';
             document.getElementById('ImageButton_' + imageId).className = 'inactive';
         }
     }
     document.getElementById('liButton_' + videoIndex).className = 'activeli';
     document.getElementById('ImageButton_' + (((slideNo - 1) * noOfImagesCanShow) + parseInt(videoIndex)).toString()).className = 'active';

     SetButtonStatus(((slideNo - 1) * noOfImagesCanShow) + parseInt(videoIndex));

     document.getElementById('liButton_' + videoIndex).tabIndex = '2';
     document.getElementById('liButton_' + videoIndex).focus();
     document.getElementById('divVideoPlayer').tabIndex = '-1';

 }

 function SetButtonStatus(imageIndex) {
     if (imageIndex <= noOfImagesCanShow) {
         document.getElementById('imgNavPrev').className = 'disable_up';
         document.getElementById('imgNavPrev').tabIndex = '-1';
         document.getElementById('imgNavNext').tabIndex = '3';
     } else {
         document.getElementById('imgNavPrev').className = 'enable_up';
         document.getElementById('imgNavPrev').tabIndex = '1';
     }

     if (imageIndex > (image.length - noOfImagesCanShow)) {
         document.getElementById('imgNavNext').className = 'disable_down';
         document.getElementById('imgNavNext').tabIndex = '-1';
         document.getElementById('imgNavPrev').tabIndex = '1';
     } else {
         document.getElementById('imgNavNext').className = 'enable_down';
         document.getElementById('imgNavNext').tabIndex = '3';
     }
 }

 function MoveToDirection(direction) {
     if (direction == 'Down') {
         if (document.getElementById('imgNavNext').className != 'disable_down') {
             slideNo++;
             SetButtonStatus(slideNo * noOfImagesCanShow);
             SetPlayList();
         }
     } else if (direction == 'Up') {
         if (document.getElementById('imgNavPrev').className != 'disable_up') {
             slideNo--;
             SetButtonStatus(slideNo * noOfImagesCanShow);
             SetPlayList();
             document.getElementById('liButton_6').focus();
         }
     }
 }

 function HandleKeyDown(ev) {
     if (document.activeElement != null) {
         var element = document.activeElement;

         if (ev.keyCode == 13) {
             /*User Pressed Enter, Handle If required*/
             if (element.id == "imgNavNext" && element.className != "disable_down") {
                 MoveToDirection('Down');
             } else if (element.id == "imgNavPrev" && element.className != "disable_up") {
                 MoveToDirection('Up');
             } else if (element.id.indexOf("liButton_") > -1) {
                 var nameSections = element.id.split('_');

                 ShowVideo(nameSections[1]);
             }
         } else if (ev.keyCode == 40) {
             /*User Pressed Down*/
             if (element.id.indexOf("liButton_") > -1) {
                 var nameSections = element.id.split('_');

                 var nextIndexToFocus = (parseInt(nameSections[1])) + 1;
                 if (document.getElementById("liButton_" + nextIndexToFocus) != null) {
                     document.getElementById("liButton_" + nextIndexToFocus).tabIndex = element.tabIndex;
                     element.tabIndex = "-1";
                     document.getElementById("liButton_" + nextIndexToFocus).focus();
                 } else //need to focus in navNext
                 {
                     if (document.getElementById('imgNavNext').className != 'disable_down') {
                         document.getElementById('imgNavNext').focus();
                     }
                 }

             } else {
                 if (element.id.indexOf("imgNavPrev") > -1) {
                     document.getElementById("liButton_1").focus();
                 }
             }
         } else if (ev.keyCode == 38) {
             /*User Pressed Up Up*/
             if (element.id.indexOf("liButton_") > -1) {
                 var nameSections = element.id.split('_');

                 var nextIndexToFocus = (parseInt(nameSections[1])) - 1;
                 if (document.getElementById("liButton_" + nextIndexToFocus) != null) {
                     document.getElementById("liButton_" + nextIndexToFocus).tabIndex = element.tabIndex;
                     element.tabIndex = "-1";
                     document.getElementById("liButton_" + nextIndexToFocus).focus();
                 } else //need to focus in navPrev
                 {
                     if (document.getElementById('imgNavPrev').className != 'disable_up') {
                         document.getElementById('imgNavPrev').focus();
                     }
                 }
             } else /* To handle up button from imgNavNext */
             {
                 if (element.id.indexOf("imgNavNext") > -1) {
                     document.getElementById("liButton_6").focus();
                 }
             }
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:10:07.330

我想你已经对齐了。您可以通过删除两个**css- 类中给出的填充来尝试它**

```
#divPlaylistContainer {
    border: 1px solid #0080FF;
    border-radius: 5px 5px 5px 5px;
    box-shadow: 0 0 5px #888888;
    margin: 10px 0 0 20px;
   /* padding: 0 10px 0 0;  padding removed */
    width: 140px;
} 
```

`#divPlaylist`此外，可以删除填充。来源：[http ://css-tricks.com/removing-the-dotted-outline/](http://css-tricks.com/removing-the-dotted-outline/)

```
#divPlaylist ul li {
    list-style-type: none;
    /*padding: 5px 0 5px 15px; padding removed*/
} 
```

或者你可以设置`padding: 5px 15px;`为**li**。我希望这对你有用。

嗯...我已经编辑了答案。看看在你的 css 中为`li`and再添加一个属性`<a>`。单击 Href 时，它有一个虚线轮廓。

```
outline:0; 
```

可能它会删除周围的虚线边框`li`，它会很酷:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:01:53.243

添加`margin:0 auto`到`.sitewidth`

```
.sitewidth {
width: 960px;
margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:10:46.290

```
 .activeli 
   {
    margin:0 auto;
    width:500px;
   } 
```

# java - java - 检查字符串内容

> ID：14686321
> 
> 赞同：3
> 
> 时间：2013-02-04T12:00:33.563
> 
> 标签：java

我需要执行以下检查：

如果 myString.contains()

以外的任何字符

字母 az、AZ、“_”、“-”、数字 0-9

然后 .....

这种检查的正确java语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T12:02:55.077

你可以使用正则表达式

```
Pattern badChar = Pattern.compile("[^A-Za-z0-9_-]");
if(badChar.matcher(myString).find()) {
  // ...
} 
```

此模式将匹配除字母、数字、下划线和连字符之外的任何单个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:03:52.180

```
myString.matches("[^a-zA-Z0-9_-]*"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:47:47.390

这会做到的

字符串 str1 = "abc,pqr"; 模式模式 = Pattern.compile("^[a-zA-Z0-9._,-]+");

```
 Matcher matcher1 = pattern.matcher(str1);
    System.out.println(matcher1.matches()); 
```

# javascript - jQuery 导航 XML 父子节点并从每个子节点中选择适当的属性？

> ID：14686322
> 
> 赞同：-2
> 
> 时间：2013-02-04T12:00:40.077
> 
> 标签：javascript, jquery, xml, xml-parsing

我正在创建一个模板系统，该系统可以在客户端使用 Javascript 进行解释，以构建空白表单，例如给客户的一封信等。

我已经构建了模板并在伪代码中设置了逻辑，但是我对 jQuery 的不熟悉我可以使用一些方向来让我开始。

基本思想是在我的文本节点中有一个标记，它表示一个字段，例如 ${prologue}，然后将其添加到一个名为“fields”的数组中，然后该数组将用于在 xml 中搜索相应的节点名称。

**XML**

```
 <?xml version="1.0" encoding="UTF-8"?>
<message>

    <text>${Prologue} - Dear ${Title} ${Surname}. This is a message from FUBAR. An engineer called but was unable to gain access, a new appointment has been made for ${ProductName} with order number ${VOLNumber}, on ${AppointmentDate} between ${AppointmentSlot}.
Please ensure you are available at your premises for the engineer. If this is not convenient, go to fubar.com or call 124125121515 before 12:00 noon the day before your appointment. Please refer to your order confirmation for details on what will happen on the day. ${Epilogue} - Free text field for advisor input<
</text>

    <inputTypes>
        <textBox type="text" fixed="n" size="100" alt="Enter a value">
            <Prologue size="200" value="BT ENG Appt Reschedule 254159" alt="Prologue field"></Prologue>
            <Surname value="Hoskins"></Surname>
            <ProductName value=""></ProductName>
            <VOLNumber size="8" value="" ></VOLNumber>
            <Epilogue value=""></Epilogue>  
        </textBox>
        <date type="datePicker" fixed="n" size="8" alt="Select a suitable appointment date">
            <AppointmentDate></AppointmentDate>
        </date>
        <select type="select" >
            <Title alt="Select the customers title">
                <values>
                    <Mr selected="true">Mr</Mr>
                    <Miss>Miss</Miss>
                    <Mrs>Mrs</Mrs>
                    <Dr>Dr</Dr>
                    <Sir>Sir</Sir>                  
                </values>
            </Title>
            <AppointmentSlot alt="Select the appointment slot">
                <values>
                    <Morning>9:30am - 12:00pm</Morning>
                    <Afternoon>1:00pm - 5:00pm</Afternoon>
                    <Evening>6:00pm - 9:00pm</Evening>
                </values>
            </AppointmentSlot>
        </select>
    </inputTypes>
</message> 
```

**伪代码**

```
Get list of tags from text node and build array called "fields"
For each item in "fields" array:
Find node in xml that equals array item's name
Get attributes of that node
Jump to parent node
Get attributes of parent node
If attributes of parent node != child node then ignore
Else add the parent attributes to the result
Build html for field using all the data gathered from above 
```

**附录**

这个逻辑可以吗，是否可以从节点的父节点开始向下导航？

同样关于继承，我们可以获得父属性，如果子属性不同，那么将它们添加到结果中？如果父项中的属性数量不等于子项中的数量怎么办？

请不要提供完全编码的解决方案，只是一些让我开始的预告片。

这是我到目前为止从文本节点中提取标签的内容

```
//get value of node "text" in xml
    var start = $(xml).find("text").text().indexOf('$');
    var end = $(xml).find("text").text().indexOf('}');
    var tag = "";
    var inputType;

    // find all tags and add them to a tag array
    while (start >= 0)
    {
        //console.log("Reach In Loop " + start)
        tag = theLetter.slice(start + 2, end);
        tagArray.push(tag);
        tagReplaceArray.push(theLetter.slice(start, end + 1));
        start = theLetter.indexOf('$', start + 1);
        end = theLetter.indexOf('}', end + 1);
    } 
```

欢迎任何其他建议或类似问题的链接。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:50:55.837

我正在使用类似的技术来做 html 模板。

我发现使用字符串然后将其转换为 html 更容易，而不是使用元素。在您使用 jQuery 的情况下，您可以执行类似的操作：

将您的 xml 作为字符串：

```
var xmlString='<?xml version="1.0" encoding="UTF-8"?><message><text>${Prologue} - Dear ${Title} ${Surname}... '; 
```

遍历字符串以使用正则表达式进行替换（$1 是捕获的占位符，例如姓氏）：

```
xmlString.replace(/$\{([^}]+)}/g,function($0,$1)...} 
```

如果需要，转换为节点：

```
var xml=$(xmlString); 
```

正则表达式的好处：

*   更快（只是一个字符串，你不是在走 DOM）
*   全局替换（例如，如果姓氏出现多次），只需循环一次对象属性
*   简单的正则表达式 /${([^}]+)}/ 定位占位符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:29:14.637

这只是一个让你前进的框架，就像你问的那样。

第一个概念是使用正则表达式来查找 ${ } 的所有匹配项。它返回一个类似 ["${one}","${tw 0 }","${ three}"] 的数组。

第二个概念是 htmlGenerator json 对象映射“inputTypes-->childname”到负责 html 打印输出的函数。

第三是不要忘记自然的javascript。`.localname`会给你xml元素的名字，并且`node.attributes` [应该](http://www.w3schools.com/jsref/prop_node_attributes.asp)给你一个[namedNodeMap](http://www.w3schools.com/jsref/dom_obj_namednodemap.asp)（记住不要对jquery对象执行自然的javascript，确保你引用的是为你找到的节点元素jQuery）。

实际流程很简单。

找到所有的 '${}' 标记并将结果存储在一个数组中。

在 xml 文档中找到所有标记并使用它们的父信息，将 html 存储在`{"${one}":"<input type='text' .../>","${two}":"<select><option value='hello'>world!</option></select>" ...}`

遍历地图并将源文本中的每个标记替换为您想要的 html。

# javascript

```
 var $xmlDoc = $(xml); //store the xml document
    var tokenSource =$xmlDoc.find("message text").text(); 
    var tokenizer=/${[^}]+/g; //used to find replacement locations
    var htmlGenerators = {
      "textBox":function(name,$elementParent){
    //default javascript .attributes returns a namedNodeMap, I think jquery can handle it, otherwise parse the .attributes return into an array or json obj first.
      var parentAttributes = ($elementParent[0] && $elementParent.attributes)?$elementParent.attributes:null;
    //this may be not enough null check work, but you get the idea
      var specificAttributes =$elementParent.find(name)[0].attributes;
      var combinedAttributes = {};
      if(parentAttributes && specificAttributes){
    //extend or overwrite the contents of the first obj with contents from 2nd, then 3rd, ... then nth [$.extend()](http://api.jquery.com/jQuery.extend/)
          $.extend(combinedAttributes,parentAttributes,specificAttributes);
      }
      return $("<input>",combinedAttributes);
    },
      "date":function(name,$elementParent){
       //whatever you want to do for a 'date' text input
    },
      "select":function(name,$elementParent){
      //put in a default select box implementation, obviously you'll need to copy options attributes too in addition to their value / visible value.
    }
    };
    var html={};
    var tokens = tokenSource.match(tokenizer); //pull out each ${elementKey}
    for(index in tokens){
      var elementKey = tokens[index].replace("${","").replace("}"),"");//chomp${,}
      var $elementParent = $xmlDoc.find(elementKey).parent();//we need parent attributes.  javascript .localname should have the element name of your xml node, in this case "textBox","date" or "select".  might need a [0].localname....
      var elementFunction = ($elementParent.localname)?htmlGenerators[elementParent.localname]:null; //lookup the html generator function
      if(elementFunction != null){ //make sure we found one
        html[tokens[index]] = elementFunction(elementKey,elementParent);//store the result
      }
    }

      for(index in html){
       //for every html result, replace it's token
          tokenSource = tokenSource.replace(index,html[index]);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T03:16:31.573

## 从文本节点获取标签列表并构建名为“fields”的数组

要创建数组，我宁愿使用[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)，这是它的最佳用途之一（在我看来），因为我们确实在寻找一种模式：

```
var reg = /\$\{(\w+)\}/gm;
var i = 0;
var fields = new Array();

while (  (m = reg.exec(txt)) !== null)
{
    fields[i++] = m[1];
} 
```

## 对于“字段”数组中的每个项目

jQuery 提供了一些[实用功能](http://api.jquery.com/category/utilities/)：

要遍历您的字段，您可以这样做：`$.each(fields, function(index, value){});`

## 浏览节点并检索值

就像你已经在做的那样使用[jQuery 函数。](http://api.jquery.com/category/traversing/)

## 构建 HTML

我将为您负责的每种类型创建模板对象（在此示例中：`Text`，`Select`）

然后使用所述模板，您可以用模板的 HTML 替换标记。

## 显示 HTML

最后一步是解析结果字符串并将其附加到正确的位置：

```
var ResultForm = $.parseHTML(txt); 

$("#DisplayDiv").append(ResultForm); 
```

## 结论

就像你问的那样，我没有准备任何开箱即用的东西，我希望它能帮助你准备自己的答案。（然后我希望你能与社区分享）

# ruby-on-rails - Rails：对前一个响应的每个响应的新查询

> ID：14686324
> 
> 赞同：0
> 
> 时间：2013-02-04T12:00:50.153
> 
> 标签：ruby-on-rails

我有以下“注册”表：

![铭文表](../Images/7914eeb2ba3bc574e556e5040dee8482.png)

一个玩家可以加入多场比赛（如图所示，玩家#12 加入了#59 的比赛）。

现在我想向所有注册相同游戏的玩家展示`current_player`。

所以我虽然不得不：

1.  在哪里捕获所有 match_id`player_id = current_player`
2.  在每场比赛中抓住所有球员。

这是好方法吗？还是我应该知道一些魔法？我怎样才能做到这一点 ？谢谢你的帮助。

更新

我试过这个：

```
@matchs_du_joueur = Registrations.where(:player_id => current_user.id)  

@joueurs = Player.joins(:registrations).where(:registrations => { :match_id => @matchs_du_joueur.match_id }) 
```

我有这个错误：

```
undefined method `match_id' for #<ActiveRecord::Relation:0x6d8a3b0> 
```

但是，我已经定义了所有 has_many_and_belongs_to 。不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:08:17.967

是的，就是这样。我假设

```
class Match < ActiveRecord::Base
  has_many :registrations
  has_many :players, through: :registrations
end

class Player < ActiveRecord::Base
  has_many :registrations
  has_many :matches, through: :registrations
end

class Registration < ActiveRecord::Base
  belongs_to :match
  belongs_to :player
end 
```

那么您可以使用以下内容获取 current_player 与之匹配的所有玩家

```
Player.joins(:registrations).where(registrations: { match_id: current_player.match_ids }) 
```

# windows - 如何使 Windows 批处理脚本完全静默？

> ID：14686330
> 
> 赞同：64
> 
> 时间：2013-02-04T12:01:00.280
> 
> 标签：windows, batch-file, cmd, echo

这个问题的变种已经问了好几代了，但是尽管编写了一些相当复杂的 Windows 脚本，我似乎无法找到如何让它们真正保持沉默。

以下是我当前脚本之一的摘录：

```
@ECHO OFF
SET scriptDirectory=%~dp0
COPY %scriptDirectory%test.bat %scriptDirectory%test2.bat
FOR /F %%f IN ('dir /B "%scriptDirectory%*.noext"') DO (
del "%scriptDirectory%%%f"
)
ECHO 
```

结果是：

```
C:\Temp> test.bat
        1 file(s) copied.
File Not Found
Echo is off.

C:\Temp> 
```

而“已复制 1 个文件”。只是烦人，“找不到文件”让用户认为出了点问题（它没有 - 没有文件很好）。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-02-04T12:32:36.163

要禁止输出，请使用重定向到`NUL`.

控制台命令使用两种输出：

*   标准输出，`stdout`或

*   标准误，或`stderr`.

在这`stdout`两者中，内部命令（如`copy`）和控制台实用程序或*外部*命令（如`find`和其他）以及第三方控制台程序都更常使用。

`>NUL`抑制标准输出并且工作正常，例如抑制命令的`1 file(s) copied.`消息`copy`。另一种语法是`1>NUL`. 所以，

```
COPY *file1* *file2* **>NUL** 
```

或者

```
COPY *file1* *file2* **1>NUL** 
```

或者

```
**>NUL** COPY *file1* *file2* 
```

或者

```
**1>NUL** COPY *file1* *file2* 
```

抑制所有`COPY`的标准输出。

要抑制通常打印到的错误消息，请`stderr`改用`2>NUL`。因此，要抑制在找不到指定文件时打印的`File Not Found`消息，只需在命令行的开头或结尾添加：`DEL``2>NUL`

```
DEL *file* **2>NUL** 
```

或者

```
**2>NUL** DEL *file* 
```

尽管有时在尝试删除文件之前实际验证文件是否存在可能是一个更好的主意，就像您在自己的解决方案中所做的那样。但是请注意，您不需要使用循环逐个删除文件。您可以使用单个命令删除批次：

```
IF EXIST "%scriptDirectory%*.noext" DEL "%scriptDirectory%*.noext" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-04T18:41:59.847

如果您希望批处理脚本的所有正常输出都保持静默（就像在您的示例中一样），最简单的方法是使用重定向运行批处理文件：

```
C:\Temp> test.bat >nul 
```

此方法不需要修改脚本中的单行，它仍然会在屏幕上显示错误消息。要抑制*所有*输出，包括错误消息：

```
C:\Temp> test.bat >nul 2>&1 
```

如果您的脚本具有产生您希望出现在屏幕上的输出的行，那么将重定向添加到*这些*行而不是您想要保持沉默的所有行可能会更简单：

```
@ECHO OFF
SET scriptDirectory=%~dp0
COPY %scriptDirectory%test.bat %scriptDirectory%test2.bat
FOR /F %%f IN ('dir /B "%scriptDirectory%*.noext"') DO (
del "%scriptDirectory%%%f"
)
ECHO
REM Next line DO appear in the screen
ECHO Script completed >con 
```

安东尼奥

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T12:05:37.790

只需`>NUL`在生成消息的行末尾添加一个。

例如，

`COPY %scriptDirectory%test.bat %scriptDirectory%test2.bat >NUL`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T12:05:14.593

您可以将标准输出重定向到`nul`以隐藏它。

```
COPY %scriptDirectory%test.bat %scriptDirectory%test2.bat >nul 
```

只需添加`>nul`到要隐藏输出的命令。

[在这里](http://www.robvanderwoude.com/redirection.php)，您可以看到重定向 std 流的所有不同方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-28T06:57:20.677

以静默模式将名为**html**的目录及其所有内容复制到目标目录。如果目标目录不存在，它仍然会创建它。

```
@echo off
TITLE Copy Folder with Contents

set SOURCE=C:\labs
set DESTINATION=C:\Users\MyUser\Desktop\html

xcopy %SOURCE%\html\* %DESTINATION%\* /s /e /i /Y >NUL 
```

* * *

1.  /S 复制目录和子目录，除了空目录。

2.  /E 复制目录和子目录，包括空目录。与 /S /E 相同。可用于修改/T。

3.  /I 如果目标不存在并且复制多个文件，则假定目标必须是一个目录。

4.  /Y 禁止提示确认您要覆盖现有的目标文件。

# java - 这行在 Java 中是什么意思： boolean retry = id == 1;

> ID：14686332
> 
> 赞同：66
> 
> 时间：2013-02-04T12:01:02.017
> 
> 标签：java, syntax

我学习 Java 已经有一段时间了，还在学习新的语法技巧和东西。我在Android源代码中遇到了这个：

```
boolean retry = id == 1; 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-02-04T12:03:42.747

`id == 1`是一个布尔表达式，如果`id`等于`1`，则为真，否则为假。

`boolean retry = id == 1;`声明一个名为 的布尔变量`retry`，并将布尔表达式的值赋给`id == 1`该变量。

所以它声明了一个布尔变量，如果是`id == 1`，则为真，否则为假。

为了让它更清楚一点，你可以这样写：

```
boolean retry = (id == 1); 
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2013-02-04T12:01:35.290

`retry`is `true`if`id`的值为 1，否则`retry`为`false`。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-02-04T12:02:32.667

它与

```
boolean retry;
if (id == 1)
   retry = true;
else
   retry = false; 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2013-02-04T15:32:38.280

`==`等于谓词的优先级高于`=`赋值运算符的优先级。

因此，`id == 1`首先评估，然后将其值（真或假）分配给`retry`。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-02-04T12:03:23.897

布尔重试获取 true if 的值`id == 1`。

它与以下内容相同：

```
boolean retry;
if (id == 1) {
    retry = true;
} else {
    retry = false;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-02-04T12:03:39.043

首先 the`id`用 1 评估，所以大概`id`是 a `integer`。

之后，该值`retry`被赋予此评估，因此如果`id`等于 1，`retry`将变为`true`，并且对于任何其他值`id` `retry`将变为`false`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-04T17:35:52.790

我发现仅使用括号有助于消除此类复杂语句背后的混乱。

`boolean retry = (id == 1);`对我来说更有意义。很明显，这`(id == 1)`是一个正在评估的表达式，并且结果被分配给`boolean retry`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-04T12:34:35.733

此行创建一个布尔变量并将其设置为`true`如果`id`等于 1，`false`如果不是。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-04T14:45:28.177

`(x) ? true : false`在 C、C++、C# 等中，它的作用类似于三元运算；

类似的语法：

```
boolean retry = (id == 1)? true: false; 
```

或者它可以写成另一种方式：

```
boolean retry;
if (id == 1) {
    retry = true;
} else {
    retry = false;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-04T19:37:07.100

如果你这样看，可能更容易看到发生了什么：

```
boolean retry = (id == 1); 
```

所以基本上它检查 id 是否等于 1，然后将结果分配给变量 retry。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-02-04T14:16:37.823

这是一种定义布尔变量的方法。

当`id`是时`1`， 的值`retry`将是`true`。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-02-04T22:17:06.350

它与 基本相同`retry = (id == 1)`。它正在评估布尔表达式，并将其分配给`retry`.

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-02-04T15:53:12.777

`retry`分配一个表达式，它是真或假，就像`retry`a一样`boolean`。此外，`==`将首先解决，然后将其分配给`retry`。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-05-27T07:32:04.307

布尔变量`retry`将获得值`0`或`1`取决于表达式是否`id==1`返回`true`或`false`。

如果 的值为`id`，`1`则将`id==1`对应于`true`，因此`retry=1`。

如果 的值为`id`，`0`则`id==1`将对应于`false`，因此`retry=0`。

请注意，这`==`是一个比较运算符。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-28T13:17:43.700

```
1.int id = 1;
  boolean retry = id == 1; 
```

这意味着`retry = true;`。

```
2.int id = 2;
  boolean retry = id == 1; 
```

这意味着`retry = false;`。

简化 id == 1 可以认为是

```
if ( id == 1 ){
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-02-04T14:30:06.747

我的回答将基于**id**是 int 的假设，因此与 1 的比较是正确的，并且没有出现编译错误。 [==](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.21.1)是 Java 中的相等运算符，如 JLS 的第[15.21.1](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.21.1)节所述。作为布尔运算符， == 将输出一个[布尔](http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.5)值。 [=](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2)是 java 的赋值运算符，在这种特殊情况下，它是具有以下语法的[复合赋值运算符：](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2)

> 布尔 f = (op1 op op2)

在翻译中 = 将运算的输出值分配给`(op1 op op2)`左操作数，在本例中为**f**。

回顾您的示例，`id == 1`（如果 id 的值为 1，则为 true，否则为 false）的输出被分配给**retry**。

简而言之，您的示例具有以下含义：*只要 id 具有值 1 就重试*。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-03-17T06:10:16.623

代码可以这样写，那么就很容易理解了，你觉得呢？最后，感谢您给我机会回答问题！

```
boolean retry = (id == 1); 
```

# java - java gwt flowpanel总是换行

> ID：14686338
> 
> 赞同：3
> 
> 时间：2013-02-04T12:01:19.310
> 
> 标签：java, gwt, flowpanel

我正在尝试在 java gwt 中使用 flowpanel，但是当我添加不同的小部件时，面板会在新行中添加每个小部件，这是我设置 flowPanel 的方式

```
 public class Test extends Composite {
   public abstract class SomeWidget<T> extends Composite {
      ...
   }

   public class SomeStringWidget extends SomeWidget<String> {
      ...
   }

   public void setWidget() {
     FlowPanel fp = new FlowPanel();
     fp.setWidth("100%");
     fp.add(new SomeStringWidget());
     fp.add(new SomeStringWidget());
     ...
   }
 } 
```

为什么每个小部件都设置在新行中，而不是像流程面板那样，将小部件添加到一行中，直到没有更多空间，然后将它们添加到新行中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T12:40:01.827

Flow Panel 使用 Style GWT-FlowPanel 生成一个 DIV 元素。如果您希望您的内部小部件是内联的，请使用以下 CSS 制作内部小部件的 CSS：

```
.SomeStringWidget {
   display: inline;
} 
```

或者

```
.SomeStringWidget {
    display: inline-block; 
} 
```

或者

```
.SomeStringWidget {
   float: left;
} 
```

在您的小部件中，在构造函数中设置 CSS 类 .SomeStringWidget。

```
public SomeStringWidget {
    this.setStyleName("SomeStringWidget");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:09:51.807

我遇到了同样的问题并将样式分配给 FlowPanel 小部件以将小部件对齐一行。这将解决您的问题。

```
FlowPanel fp = new FlowPanel();
fp.setStyleName("flowPanel_inline"); 
```

样式.css

```
.flowPanel_inline
{
    display:inline;
} 
```

此外，您还必须在添加的元素中设置相同的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T08:11:02.803

If your SomeStringWidget is a Label, then it will always be a new line. If you don't want the newline, use InlineLabel.

# java - 无法加载类“org.slf4j.impl.StaticLoggerBinder

> ID：14686340
> 
> 赞同：1
> 
> 时间：2013-02-04T12:01:29.113
> 
> 标签：java, maven, slf4j

在构建 Maven 项目时，我收到一些错误，如下所示

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation 
```

我尝试了在堆栈溢出的类似帖子中找到的解决方案，但仍然出现错误。

这是我的 pom.xml

```
<dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.framework.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.batch</groupId>
            <artifactId>spring-batch-core</artifactId>
            <version>${spring.batch.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.batch</groupId>
            <artifactId>spring-batch-infrastructure</artifactId>
            <version>${spring.batch.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-beanutils</groupId>
            <artifactId>commons-beanutils</artifactId>
            <version>1.8.3</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.3.2.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.9.0.GA</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.2.2</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.8.4.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.3.0</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>1.8.0.7</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.8</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>1.6.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.1</version>
        </dependency>
    </dependencies> 
```

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:04:42.700

尝试删除以下依赖项

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-api</artifactId>
   `enter code here`<version>1.6.1</version>
</dependency> 
```

并且只保留`slf4j-log4j12`在你的 pom 中

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency> 
```

看起来这些工件相互冲突并且优先于另一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T00:45:14.503

首先，只要 slf4j-api 与 slf4j-log4j12 依赖项捆绑在一起，您就应该删除下面的依赖项。检查您的依赖层次结构（在 pom.xml 中），您将在 slf4j-log4j12 下看到 slf4j-api。

```
<dependency>
       <groupId>org.slf4j</groupId>
       <artifactId>slf4j-log4j12</artifactId>
       <version></version>
       <scope>compile</scope>
</dependency> 
```

其次，只要你提供了依赖，你仍然会得到 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。错误我假设您使用 Eclipse 作为开发环境。

Eclipse Juno 和 Indigo 在使用捆绑的 maven 版本 (m2e) 时，不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案以及有关此错误的更多详细信息，我相信该问题描述了您面临的相同问题。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:57:07.203

如果它是命令行应用程序，那么您需要以某种方式运行它。

它是否整体工作，唯一的问题是 slf4j/log4j？我想这可能不是 log4j 的唯一问题，但其他库无法访问。您是否使用其他依赖项创建 jar？你的清单文件里面有什么？

需要有关您的问题的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T14:02:26.777

另见[http://www.slf4j.org/codes.html#StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)

检查是否真的所有 slf4j 的 jar 都包含在您的最终工件中。还要检查一下，它们都使用相同的 slf4j 版本。也许其他一些依赖会覆盖 slf4j-api 的版本，但您仍然会加载它们较旧的 Log4j-Binding。

# ruby-on-rails-3 - Facebook 注册插件 - 删除撤消弹出窗口

> ID：14686344
> 
> 赞同：2
> 
> 时间：2013-02-04T12:01:38.703
> 
> 标签：ruby-on-rails-3, facebook, user-registration

在 Rails 应用程序中，我实现了 facebook 注册插件

但是，单击“注册”按钮后，用户会看到一个撤消对话框。我观察到几个网站也使用注册插件并且不显示此对话框。

请建议我删除此对话框的方法？

# php - 如何创建自动增量 ID 号

> ID：14686346
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:01:41.527
> 
> 标签：php, mysql, phpmyadmin

如何创建由年份和数字组成的自动增量 ID 号，例如：“2012-0001”如果我输入其他数据，它将自动增量为“2012-0002”。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:18:12.857

使用 MyISAM，您可以做到这一点...

```
CREATE TABLE myisam_example(year INT NOT NULL,id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(year,id)) ENGINE=MyISAM;

INSERT INTO myisam_example VALUES (2012,NULL);
INSERT INTO myisam_example VALUES (2012,NULL);
INSERT INTO myisam_example VALUES (2012,NULL);
INSERT INTO myisam_example VALUES (2012,NULL);
INSERT INTO myisam_example VALUES (2012,NULL);
INSERT INTO myisam_example VALUES (2013,NULL);
INSERT INTO myisam_example VALUES (2013,NULL);
INSERT INTO myisam_example VALUES (2013,NULL);
INSERT INTO myisam_example VALUES (2013,NULL);
INSERT INTO myisam_example VALUES (2013,NULL);

SELECT * FROM myisam_example;
+------+----+
| year | id |
+------+----+
| 2012 |  1 |
| 2012 |  2 |
| 2012 |  3 |
| 2012 |  4 |
| 2012 |  5 |
| 2013 |  1 |
| 2013 |  2 |
| 2013 |  3 |
| 2013 |  4 |
| 2013 |  5 |
+------+----+

SELECT * 
  FROM myisam_example 
 WHERE CONCAT(year,'-',LPAD(id,5,0)) = '2012-00004';
+------+----+
| year | id |
+------+----+
| 2012 |  4 |
+------+----+ 
```

——对可怜的指数进行片刻的沉思

```
SET @sql = CONCAT('SELECT * FROM myisam_example WHERE CONCAT(year,\'-\',LPAD(id,5,0)) = ?');

PREPARE stmnt1 FROM @sql;                
SET @a = '2012-00004';
EXECUTE stmnt1 USING @a;
+------+----+
| year | id |
+------+----+
| 2012 |  4 |
+------+----+
DEALLOCATE PREPARE stmnt1; 
```

...并更进一步（因为我认为是时候知道如何在存储过程中使用准备好的语句了）...

```
DROP PROCEDURE fetchid;
DELIMITER $$
CREATE PROCEDURE fetchid(IN a VARCHAR(10)) 
BEGIN
 SET @sql = CONCAT('SELECT * FROM myisam_example WHERE CONCAT(year,\'-\',LPAD(id,5,0)) = ?');
 PREPARE stmnt1 FROM @sql;                
 SET @a = a; 
 EXECUTE stmnt1 USING @a;
 DEALLOCATE PREPARE stmnt1;
END $$

DELIMITER ;

CALL fetchid('2012-00004');
+------+----+
| year | id |
+------+----+
| 2012 |  4 |
+------+----+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:23:30.030

你将不得不编写一个程序来做到这一点。Strawberry 的解决方案向您展示了在 SQL 端需要做什么，但是您必须编写接口（非 sql）来拆分输入，这样当用户输入 2012-0001 时，查询字符串会显示类似“WHERE年 = 2012 并且 ID = 0001"

如果您要问是否可以在表格中有一个可以包含连字符但自动递增的列，答案是否定的。

# jenkins - 如何将 phpunit 覆盖率导出到 xml（对于 jenkins 报告是必需的）

> ID：14686347
> 
> 赞同：1
> 
> 时间：2013-02-04T12:01:49.510
> 
> 标签：jenkins, phpunit

我正在使用 phpunit 和 jenkins，关键是 jenkins 通过使用带有测试结果的 xml 文件创建报告，但我不知道如何导出到 phpunit 中的 xml，现在我只看到了导出的选项HTML（用于覆盖）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:44:39.943

[Sebastian Bergmann 的这个项目](http://jenkins-php.org/)应该给你一些建议。它提到了 PHPUnit 的以下配置...

```
<logging>
 <log type="coverage-html" target="build/coverage" title="Name of Project"
      charset="UTF-8" yui="true" highlight="true"
      lowUpperBound="35" highLowerBound="70"/>
 <log type="coverage-clover" target="build/logs/clover.xml"/>
 <log type="junit" target="build/logs/junit.xml"
      logIncompleteSkipped="false"/>
</logging> 
```

...所以我认为您应该尝试`--coverage-clover`而不是`--coverage-html`获取 XML 文件。

# java - 从 senchatouch 调用 webservice restful 时出错

> ID：14686349
> 
> 赞同：0
> 
> 时间：2013-02-04T12:01:50.613
> 
> 标签：java, javascript, rest, extjs, sencha-touch-2

我花了几天时间试图解决这个问题，但没有办法。

**我想从我用 senchatouch 2.0 创建的 web 应用程序向我在 java 中创建的宁静 web 服务发出请求。**我研究了它以提出**跨域请求，唯一的选择是使用“Ext.data.JsonP.request** ”。我已经采取了这个**代码示例**：

```
Ext.data.JsonP.request({
        url: 'http://free.worldweatheronline.com/feed/weather.ashx',
        callbackKey: 'callback',
        params: {
            key: '23f6a0ab24185952101705',
            q: '94301', // Palo Alto
            format: 'json',
            num_of_days: 5
        },
        callback: function( data ) { console.log("callback" + data);},
        success: function(result, request) {
           console.log("success");
           var weather = result.data.weather;
           this.respuesta = 'The temperature in Palo Alto is <b>' + weather[0].tempMaxF + '° F</b>';
           return 'The temperature in Palo Alto is <b>' + weather[0].tempMaxF + '° F</b>';
        },
        failure: function(response) {
            console.log("failure");
            var json = Ext.decode(response.responseText);
            return 'fail';
        }

    }); 
```

**这很完美。现在我需要连接到我用 java (JAX-RS) 创建的 RESTful web 服务。这是我的方法：**

```
@GET
@Produces("application/json")
public String getJson(@QueryParam("texto") String cadenaTxt) {
    System.out.println(" -----request in getJson:"+ cadenaTxt + "-----");
    String json1 = "{'name:'George Koch', 'age':58}";
    String jsonPoutput = "callback("+ json1 + ");";
    return jsonPoutput;
} 
```

**发出 Web 服务请求的 JavaScript 代码是：**

```
Ext.data.JsonP.request({
        url: 'http://localhost:8080/proxySimplext/webresources/simplificar',
        callbackKey: 'callback',
        params: {
            format: 'json',
            texto: 'texto que envio'
        },
        callback: function( data ) { 
            console.log("callback" + data);
        },
        success: function(result, request) {
           console.log("success");
           return 'Sucesss';
        },
        failure: function(response) {
            console.log("failure");
            var json = Ext.decode(response.responseText);
            console.log('Fallo de conexion:' + json);
            return 'failure';
        }

    }); 
```

**不工作。**

请求到达 Web 服务，但跳过**JavaScript 代码中的超时**。我尝试了很多解决方案，但没有办法解决它。

控制台上的响应是：

```
Uncaught SyntaxError: Unexpected identifier 
failure Utils.js:105
Fallo de conexion:undefined 
```

会发生什么？欢迎任何想法给我

非常感谢！！

# iphone - 如何在 UITableView 中加载数据之前显示活动指示器？

> ID：14686351
> 
> 赞同：0
> 
> 时间：2013-02-04T12:01:53.460
> 
> 标签：iphone, objective-c, web-services, uitableview

我正在将数据加载到方法中的`UITableView`三个 WebServices 中`ViewDidLoad`。当来自 web 服务的数据很快返回时很好，但是当 Web 服务返回 null 时，`UITableView`加载的是空行。我想`UIActivityIndicator`在加载之前显示`UITableView`，如果 WebService 返回 NULL 值，那么`UITableView`不应该显示，而是应该显示一个弹出窗口。

提前致谢.....

```
- (void) viewDidLoad
{

     UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithFrame:frame];
     [indicator startAnimating];
     indicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
     [indicator sizeToFit];
     .......
     .......
     ....... 

     //code to read data from WebServices
     [indicator stopAnimating];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:04:54.727

试试下面的代码，但我给出的例子你应该修改它并根据你的需要使用：

```
alert= [[UIAlertView alloc] initWithTitle:@"Loading\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
                [alert show];

                UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

                indicator.center = CGPointMake(150, 100);
                [indicator startAnimating];
                [alert addSubview:indicator]; 
```

使用此行关闭指示器：

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

尝试。祝你好运。

# android - sencha touch 应用程序卡在闪屏上

> ID：14686353
> 
> 赞同：2
> 
> 时间：2013-02-04T12:01:53.850
> 
> 标签：android, sencha-touch-2, cordova

我使用 sencha build 命令（sencha app create）生成了一个简单的 sencha touch 应用程序。之后我在我的应用程序中包含了cordova 2.3.0。我的 index.html 文件如下：

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>SimpleApp</title>
    <style type="text/css">
         /**
         * Example of an initial loading indicator.
         * It is recommended to keep this as minimal as possible to provide instant feedback
         * while other resources are still being loaded for the first time
         */
        html, body {
            height: 100%;
            background-color: #1985D0
        }

        #appLoadingIndicator {
            position: absolute;
            top: 50%;
            margin-top: -15px;
            text-align: center;
            width: 100%;
            height: 30px;
            -webkit-animation-name: appLoadingIndicator;
            -webkit-animation-duration: 0.5s;
            -webkit-animation-iteration-count: infinite;
            -webkit-animation-direction: linear;
        }

        #appLoadingIndicator > * {
            background-color: #FFFFFF;
            display: inline-block;
            height: 30px;
            -webkit-border-radius: 15px;
            margin: 0 5px;
            width: 30px;
            opacity: 0.8;
        }

        @-webkit-keyframes appLoadingIndicator{
            0% {
                opacity: 0.8
            }
            50% {
                opacity: 0
            }
            100% {
                opacity: 0.8
            }
        }
    </style>

    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" charset="utf-8">
    function load() {
        document.addEventListener('deviceready', onDeviceReady, false);
    };

    function onDeviceReady() {
        alert('Phonegap is Ready Now');
    }
</script>
    <!-- The line below must be kept intact for Sencha Command to build your application -->
    <script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>
</head>
<body onload="load();">
    <div id="appLoadingIndicator">
        <div></div>
        <div></div>
        <div></div>
    </div>

</body>
</html> 
```

但是，每当我在 android 模拟器应用程序中加载此应用程序时，都会卡在默认的启动屏幕上。它不会被删除。即使在 5 分钟后，我只能看到应用程序加载指示器。

我正在使用eclipse来生成apk。我已将 cordova-2.3.0.jar 放在 libs 文件夹中。我正在针对 android 4.0 进行测试。

我怎么解决这个问题？

# php - 如何在 Windows 中杀死正在运行的 php 脚本

> ID：14686358
> 
> 赞同：6
> 
> 时间：2013-02-04T12:01:59.187
> 
> 标签：php

我有一个在无限循环中运行的 php 脚本，我需要在不重新启动 apache 的情况下将其杀死。

我可以通过远程桌面访问服务器。请指教。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T12:11:10.283

找到你想杀死的正在运行的脚本：

```
tasklist /v | find "php" 
```

记下进程 ID，使用以下命令将其终止：

```
taskkill /PID 3776 
```

与这样做相同：

```
ps aux | grep php

kill 3776 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:04:23.867

你有没有尝试过：

Windows 任务管理器-> 进程-> apache ？

它应该在那里，只需结束该过程。

**编辑 -**

刚刚看到您不想杀死apache。

我不确定这是否可能，因为我相信 PHP 作为 apache 模块运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:05:25.740

在任务管理器中寻找占用 100% CPU 的 apache “fork”，然后将其杀死。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:07:25.717

你可以试试这个： [https ://serverfault.com/questions/229435/how-to-break-from-infinite-loop-caused-by-php-script-running-as-root](https://serverfault.com/questions/229435/how-to-break-from-infinite-loop-caused-by-php-script-running-as-root)

为了将来，请确保对脚本有一些安全的文件锁定：

```
while(true)  //script loop
{
   if(file_exists("STOP")) {
     unlink("STOP");
     exit;
   }
   /*Do some work*/ 
```

}

# javascript - 在插入元素后在 contenteditable div 内设置插入符号

> ID：14686361
> 
> 赞同：1
> 
> 时间：2013-02-04T12:02:03.227
> 
> 标签：javascript, firefox, range, contenteditable, caret

我试图让我的应用程序在所有浏览器上运行，并且我需要将插入符号放置在 contenteditable div 中，就在用户从弹出窗口中选择的文本之后。到目前为止，我的应用程序在 IE 上运行，但我还需要让它在 Opera、Firefox 和 Chrome 上运行。我在 IE 上放置插入符号的 Javascript 代码如下所示：

```
 function setCaretPos()
  {
     if (document.selection) 
     {
         /* IE */
         var range = document.body.createTextRange();
         range.moveToElementText(editableDiv);
         var insertedSpan = document.getElementById('span' + count);
         var preCaretRange = document.body.createTextRange();
         preCaretRange.moveToElementText(insertedSpan);
         preCaretRange.moveEnd("character", 2);
         range.setEndPoint("EndToEnd", preCaretRange);
         range.collapse(false);
         range.select();
      }
      else
      {
         if (window.getSelection) {
         /* Firefox, Opera, Chrome */
         var sel = window.getSelection();
         if(sel.rangeCount)
         {
            var range = sel.getRangeAt(0);
            var insertedSpan = document.getElementById('span' + count);
            var pos = insertedSpan.innerHTML.length;
            range.selectNodeContents(insertedSpan);
            range.setEndAfter(insertedSpan);
            range.collapse(false);
            sel.removeAllRanges();
            sel.addRange(range);
         }
      }
 } 
```

如您所见，在 IE 上，我使用函数 moveEnd 将范围末尾向右移动 2 个字符，但我不知道在非 IE 浏览器上是否有任何等效的函数来移动范围末尾特定数量的字符。使用上面的代码，跨度内的文本被选中，但我的问题是插入跨度后插入符号没有显示，它只是消失了。

任何建议都非常感谢。谢谢！

# asp.net-mvc-3 - .net - 如何使用 klm 文件实现谷歌地图

> ID：14686364
> 
> 赞同：0
> 
> 时间：2013-02-04T12:02:07.813
> 
> 标签：asp.net-mvc-3, google-maps, implementation

我在工作中被分配了一项任务，以在我们的 Web 应用程序中实现搜索，当您（在单个字段中）输入州、城市和人的姓名（在应用程序中有注册）时，应用程序返回一个 google在发现这些人的地方标有旗帜的地图。

我知道这可能是一个相当复杂的功能（至少对我来说是这样）。但无论如何，我需要从某个地方开始。

我决定最好先学习如何使用 KLM 文件实现这些地图。我不知道如何实现这个功能。

我在 google.com 上找到了一些示例：[http ://maps.google.com/maps?f=q&hl=pt-BR&q=http%3A%2F%2Fkmlscribe.googlepages.com%2FSamplesInMaps.kml&ie=UTF8&ll =36.879621,-53.4375&spn=103.772916,208.476563&z=2&om=1](http://maps.google.com/maps?f=q&hl=pt-BR&q=http%3A%2F%2Fkmlscribe.googlepages.com%2FSamplesInMaps.kml&ie=UTF8&ll=36.879621,-53.4375&spn=103.772916,208.476563&z=2&om=1) 但找不到它们是如何实现的。

我正在使用.net MVC3。

如何在视图中渲染地图？如何使用我想要的数据加载地图？

如果您能给我一个带有一些示例数据的简单示例，那将有很大帮助。就这样我知道了如何使它工作，然后我将了解如何使搜索过滤器工作并将正确的数据传递给地图。

感谢大家的帮助和支持。

来自巴西的问候。

塞萨尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:23:49.380

我在这个网站上找到了一个非常好的演练。

我希望你喜欢它。

[http://www.gregjopa.com/2011/02/asp-net-mvc-3-with-jquery-mobile-and-google-maps/](http://www.gregjopa.com/2011/02/asp-net-mvc-3-with-jquery-mobile-and-google-maps/)

点击演示查看他的演示。

来自巴西的问候。

塞萨尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:06:36.093

[KML解释](https://developers.google.com/kml/documentation/)

[KML 教程](https://developers.google.com/kml/documentation/kml_tut)

我必须承认，我从未将 KML 文件用于 Google 地图，仅用于 Google 地球。如果您在 SO 上搜索，您将找到有关如何使用地理编码 API 设置和执行地址的大量信息。

# c# - 首先使用代码映射弱实体

> ID：14686367
> 
> 赞同：3
> 
> 时间：2013-02-04T12:02:18.870
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-5

嗨，我开发了非常适合我的模型，现在我想使用 EntityFramework 将它映射到数据库，这是其中的一部分：

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ProductType Type { get; set; }
}

public class Supplier
{
    public int Id { get; set; }
    public string OIB { get; set; }
    public string Name { get; set; }
}

public class SupplierProduct
{
    public double Price { get; set; }
    public string SupplierMark { get; set; }

    public virtual Product Product { get; set; }
    public virtual Supplier Supplier { get; set; }
} 
```

现在我的问题是如何在我的 DBContext 中的 ModelBuilder 上编写实体配置，以便它映射到 SupplierProduct 类 ForeignKeys Supllier.ID 和 Product.Id 作为数据库关系的主键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:10:33.310

我使用数据注释，但我希望您正在寻找以下内容：

`Product`为和`Supplier`in定义 ID 属性`SupplierProduct`，将这些 ID 字段指定为 FK，然后使用两个 ID 字段定义复合主键

```
modelBuilder.Entity<SupplierProduct>()
    .HasRequired( sp => sp.Product)
    .WithMany( p => SupplierProducts )
    .HasForeignKey( sp => sp.ProductId );

modelBuilder.Entity<SupplierProduct>()
    .HasRequired( sp => sp.Supplier)
    .WithMany( s => SupplierProducts )
    .HasForeignKey( sp => sp.SupplierId );

modelBuilder.Entity<SupplierProduct>()
    .HasKey(sp=> new { sp.ProductId, sp.SupplierId }); 
```

# php - 创建复杂的 SQL 语句 - CakePHP

> ID：14686368
> 
> 赞同：0
> 
> 时间：2013-02-04T12:02:25.973
> 
> 标签：php, mysql, cakephp-2.0

我正在尝试查找用户输入的日期是否与数据库上的任何日期重叠。

我已经把 SQL 语句写下来了（可能需要一些调整，将测试），但我正在努力将它正确地放入 cakePHP。

**我有什么**

```
$result = $this->find('all', array(
    'conditions' => array(
        'OR' => array(
            'AND' => array(
                array('BoardroomBooking.start_time >=' => $this->data['BoardroomBooking']['start_time']),
                array('BoardroomBooking.start_time <' => $this->data['BoardroomBooking']['start_time'])
            ),
            'AND' => array(
                array('BoardroomBooking.start_time <=' => $this->data['BoardroomBooking']['start_time']),
                array('BoardroomBooking.start_time >' => $this->data['BoardroomBooking']['end_time'])
            )
        )
    )
)); 
```

**它创造了什么**

```
SQL Query: SELECT `BoardroomBooking`.`id`, `BoardroomBooking`.`name`,
`BoardroomBooking`.`boardroom_id`, `BoardroomBooking`.`date`, 
`BoardroomBooking`.`start_time`, `BoardroomBooking`.`end_time`, 
`BoardroomBooking`.`notes`, `BoardroomBooking`.`recurrence_id`, 
`BoardroomBooking`.`created`, `BoardroomBooking`.`modified`, `Boardroom`.`id`, 
`Boardroom`.`name`, `Boardroom`.`created`, `Boardroom`.`modified` FROM 
`intraweb_db`.`boardroom_bookings` AS `BoardroomBooking` LEFT JOIN 
`intraweb_db`.`boardrooms` AS `Boardroom` ON (`BoardroomBooking`.`boardroom_id`
 = `Boardroom`.`id`) WHERE ((`BoardroomBooking`.`start_time` <= '12:55:00') AND 
(`BoardroomBooking`.`start_time` > '13:00:00')) 
```

**我想要的是**

```
SQL Query: SELECT `BoardroomBooking`.`id`, `BoardroomBooking`.`name`,
`BoardroomBooking`.`boardroom_id`, `BoardroomBooking`.`date`, 
`BoardroomBooking`.`start_time`, `BoardroomBooking`.`end_time`, 
`BoardroomBooking`.`notes`, `BoardroomBooking`.`recurrence_id`, 
`BoardroomBooking`.`created`, `BoardroomBooking`.`modified`, `Boardroom`.`id`, 
`Boardroom`.`name`, `Boardroom`.`created`, `Boardroom`.`modified` FROM 
`intraweb_db`.`boardroom_bookings` AS `BoardroomBooking` LEFT JOIN 
`intraweb_db`.`boardrooms` AS `Boardroom` ON (`BoardroomBooking`.`boardroom_id`
 = `Boardroom`.`id`) WHERE (`BoardroomBooking`.`start_time` >= '12:55:00' AND 
`BoardroomBooking`.`start_time` < '12:55:00') OR (`BoardroomBooking`.`start_time`
 <= '12:55:00') AND (`BoardroomBooking`.`start_time` > '13:00:00')) 
```

我已经阅读了有关如何[检索数据](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)的文档，但是对于我的生活来说，它无法按照我想要的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:51:54.347

现在，我可能不正确，但我相信您的问题在您的数组声明中：

```
 array(
    'AND' => array(
      ...
    ),
    'AND' => array(
      ...
    )
  ) 
```

就 PHP 而言，您刚刚在数组中声明了一个“AND”键，然后重新分配了它。根据[Cake Cookbook](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)，您需要在不同的数组中声明相同的字段：

```
'OR' => array(
  array('AND' => array (...)),
  array('AND' => array (...))
) 
```

这应该可以防止查询将您的两个条件视为同一事物并覆盖条目。

# c# - 字符串未被识别为有效的 DateTime C# 到 Sql 服务器

> ID：14686371
> 
> 赞同：5
> 
> 时间：2013-02-04T12:02:28.070
> 
> 标签：c#, sql-server

我将日期时间值从 C# 传递到 SQL Server SP。如果我通过格式`dd-MM-yyyy`，那么它工作正常，但即使有该日期的记录，也不会从 SP 返回任何值。如果我使用 format 运行 SP `MM-dd-yyyy`，则返回错误“将数据类型 nvarchar 转换为 datetime 时出错。”。SP是

`execute usp_detData '22/12/2012 00:00:00', '31/12/2013 23:59:59'`- - 错误

`execute usp_detData '12/22/2012 00:00:00', '12/31/2013 23:59:59'`--- 工作正常

你能告诉我解决方案吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:06:58.253

> 我将日期时间值从 C# 传递到 SQL Server SP。

我相信你是通过字符串连接传递它的。如果您使用[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)类型`DateTime` 并让服务器处理它会更好。

```
using (SqlCommand cmd = new SqlCommand(" usp_detData", conn))
{
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@StartDate", DateTime.Now.AddDays(-10));
    cmd.Parameters.AddWithValue("@EndDate", DateTime.Now);
    SqlDataReader dr = cmd.ExecuteReader();
    .....
} 
```

还可以考虑将代码中的[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)块与实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的对象一起使用。例如。`SqlCommand`,`SqlConnection`等`SqlDataReader`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:07:41.280

尝试这个 ：

```
DateTime.ParseExact("12/02/21 10:56:09", "dd/MM/YYYY HH:mm:ss", 
    CultureInfo.InvariantCulture
    ).ToString("MMM. dd, yyyy HH:mm:ss") 
```

或者通过这个问题[Convert DateTime to a specified Format](https://stackoverflow.com/questions/9371658/convert-datetime-to-a-specified-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:03:14.040

使用格式 'yyyy-MM-dd HH:mm:ss' 一切都会好起来的。

# netlogo - Netlogo代码问题，乌龟找不到patch-at 0,0

> ID：14686374
> 
> 赞同：4
> 
> 时间：2013-02-04T12:02:32.990
> 
> 标签：netlogo

我正在尝试按照与本视频相同的方式创建模拟 (1:29 - 1:45)

[https://www.youtube.com/watch?v=pqBSNAOsMDc](https://www.youtube.com/watch?v=pqBSNAOsMDc)

我认为实现无限循环过程的一种简单方法是让海龟面对 0,0，然后在半径 90 内寻找空的补丁（所以它们总是向右看。

我得到错误代码..

'没有定义从点 (3,-6) 到同一点的航向。'

有人可以用我的代码指出我正确的方向吗？

```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

turtles-own [ faction ]

to setup
  clear-all

  ask patches [ set pcolor white ]
  set-patch-size 7
  resize-world min-pxcor max-pxcor min-pycor max-pycor 

  ask patch 0 0
   [ ask patches in-radius ( max-pxcor * .6) with [  random-float 100 < density ]
     [ sprout 1
         [
         set shape "circle"
         assign-factions
         set color faction-color
         set size 1 ] ] ]

   ask turtles-on patch 0 0 [ die ]

   reset-ticks
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report faction-color
   report red + faction * 30
end

to assign-factions
   let angle 360 / factions
   foreach n-values factions [?] [
    ask patch 0 0 [ 
      sprout 1 [
        set heading ? * angle
        ask turtles in-cone max-pxcor angle [ set faction ? + 1 ]
        die ] ] ]
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to go 

  ask turtles
  [ set heading (towards patch-at 0 0)  ; adjusts heading to point to centre  
    let empty-patches neighbors with [not any? turtles-here]
    if any? empty-patches in-radius 90
      [ let target one-of empty-patches
        face target
        move-to target ] 
  ]

end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:29:38.230

在您的`go`过程中，您正在使用`set heading (towards patch-at 0 0)`，但会在*相*对于所询问的海龟[`patch-at`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#patch-at)的位置为您提供补丁。因此，如果您要求，您总是会得到海龟实际所在的补丁。朝向你自己的方向是不确定的，因此你得到的错误。*`patch-at 0 0`*

 *替换`patch-at 0 0`为`patch 0 0`（适用于绝对坐标）将解决一半的问题：您所询问的海龟仍然有可能已经在`patch 0 0`. 在这种情况下，您将收到与以前相同的错误。

解决方案：替换`set heading (towards patch-at 0 0)`为`face patch 0 0`. 如果您要求面对您已经在的位置，[`face`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#face)原语不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:13:06.820

这是因为`in-radius`可以[返回海龟本身](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#in-radius)。要解决此问题，只需更改行

```
ask patches in-radius ..... 
```

至

```
ask other patches in-radius ..... 
```*

# c# - 如何检查文件夹内的文件名

> ID：14686376
> 
> 赞同：4
> 
> 时间：2013-02-04T12:02:42.550
> 
> 标签：c#, winforms, visual-studio-2010

我尝试了我在[这个线程](https://stackoverflow.com/questions/6535166/how-to-check-for-file-names-in-a-folder)上找到的内容，但没有完全按照我想要的方式工作......我有一个名为`photos`它的文件夹是否`may`有图片。`picture's name`是`matriculation`客户的。我需要通过`matriculation`as`parameter`并检查是否有一个我通过 as`picture`的名称`matriculation``parameter`

我试过这个：

```
public void VerifyPhoto(string matriculation)
        {
            string path = Txt_PhotosPath.Text;
            var file = Directory.GetFiles(path, matriculation + ".jpg");

        } 
```

我如何检查它是否找到了图片？我试图比较这个，`file != null`但它不适用于`var`类型。任何提示？`debuging`我看到它找到了图片，因为有一个`String[1]`但我不知道`check`它...

---更新--- `path`:C:"\Users\admin\Desktop\photos" `matriculation`:"607659.jpg" 有一个同名的文件，但它不断返回`false`有什么问题？

```
 string path = Txt_PhotosPath.Text;
            string filename = string.Format("{0}.jpg", matriculation);
            if (Directory.Exists(path))
            {
                if (File.Exists(Path.Combine(path, filename)))
                {
                    return true;
                }
                else
                    return false;
            }
            else
                return false; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T12:04:15.190

```
if (File.Exists(Path.Combine(path, matriculation + ".jpg")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:09:43.353

使用`Path.Combine`和`Directory+File.Exists`：

```
public bool VerifyPhoto(string matriculation)
{
    string dir = Txt_PhotosPath.Text;
    if(Directory.Exists(dir))
    {
        string fileName = string.Format("{0}.jpg", matriculation);
        if(File.Exists(Path.Combine(dir, fileName)))
            return true;
        else
            return false;
    }
    else
        return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:08:29.890

这是官方文档所说的：http: [//msdn.microsoft.com/en-us/library/wz42302f.aspx](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)

> 如果没有文件，或者没有文件与 searchPattern 参数匹配，则此方法返回一个空数组。

因此，将返回一个空数组，而不是检查空数组检查 NULL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T12:33:19.963

它很容易的东西。以下函数将帮助您检查参数中指定名称的文件是否存在。

```
File.Exists(Path) 
```

*命名空间：System.IO*

如果文件存在，此函数返回 true。否则它返回一个假。参数是一个字符串，它是要检查的文件的完整路径。`eg: G:\Folder1\Filder2\File.jpg`.

它不会抛出任何异常，因为如果找不到文件，它会返回 false。

您不必将路径和所有内容结合起来，只需按照我的示例中所述提供文件的完整路径即可。

更多信息[请点击这里](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T12:06:09.210

而不是使用`var file`，使用`string[] files`。

要检查您是否找到任何文件，请执行`if (files.Length > 0)`

使用它通常是一个**非常**糟糕的主意`var`，所以如果你能避免它，就不要这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T12:11:00.860

要回答您的问题，您不能使用 != null 的原因是因为 GetFiles() 的底层代码创建了一个列表并调用了 ToArray() 扩展方法。

```
 return new List<string>(FileSystemEnumerableFactory.CreateFileNameIterator(path, userPathOriginal, searchPattern, includeFiles, includeDirs, searchOption, checkHost)).ToArray(); 
```

您将需要使用：-

```
file.Count()  file.Length 
```

# java - Android 的 utf-8 编码

> ID：14686381
> 
> 赞同：5
> 
> 时间：2013-02-04T12:02:51.843
> 
> 标签：java, android, encoding, utf-8

我对 utf-8 编码有疑问。

我使用 Java 从 UTF-8 格式的 MySQL 数据库中检索数据（带有很多中文符号），并将它们放在一些 txt 文件中：（这是一个示例..我有很多数据）

```
String name = null;
ResultSet res = stat.executeQuery("Some_SQL");
nomeImg = res.getString("value");

PrintWriter = new new PrintWriter(new FileOutputStream("file_name.txt"));
out.println(name); 
```

使用这些 txt 文件，我将创建一些 TextView，用于在我的 Android 应用程序上填充一些活动，但并非所有符号都正确显示：大多数符号是正确的，但有些无法识别，并且显示为黑色里面有一个白色问号的钻石。

我也试过这个：但我得到了最糟糕的结果

```
byte[] name = null;
ResultSet res = stat.executeQuery("Some_SQL");
nomeImg = res.getString("value").getBytes("UTF-8"):

BufferedWriter = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("file_name.txt"), "UTF-8"));
out.write(new String(name, "UTF-8")+"\n"); 
```

有人有什么主意吗？谢谢！

**编辑** 我连接到我的数据库：

```
Connection con = DriverManager.getConnection("jdbc:mysql://url:port?useUnicode=true&characterEncoding=utf-8", user, pass); 
```

当我在数据库上执行查询时：

```
SELECT default_character_set_name 
FROM information_schema.SCHEMATA S 
WHERE schema_name = "schema_name"; 
```

我得到结果

```
utf8 
```

所以我认为 DB 是用 UTF-8 编码的，我与它的连接可以处理 UTF-8

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T12:19:06.130

您需要弄清楚这发生在哪个阶段：1- 从数据库加载文本的位置，以及 2- 将它们写入文件的位置。

需要注意的一点是，您的数据库必须使用 UTF-8 编码创建，并且您的连接也必须支持它。支持 UTF-8 的 JDBC 连接 url 的示例可以是：

```
jdbc:mysql://hostname:port/schema?useUnicode=yes&characterEncoding=utf-8 
```

您在 getBytes("UTF-8") 中指定编码后观察到的症状清楚地表明您从数据库中获得的内容不是 UTF-8。

还可以尝试从您怀疑数据所在的编码转换（如 ISO-8859-1）：

```
new String(request.getParameter("value").getBytes("ISO-8859-1"), "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:27:16.410

@houman001 是对的。在这两个过程中，您应该小心。

此外：

几天前我对阿拉伯语文本也有同样的问题。但现在我已经解决了。我已经通过使用 UTF-8 编码将其写入数据库来解决它。并且还使用了我的字体开发人员提供的一些阿拉伯字体。这使我可以根据需要使用阿拉伯语文本。

因此，在解析和从一个数据传输到另一个数据时请小心，并确保它是 UTF-8 编码格式。

希望这件事对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:55:09.700

为了连接到数据库，我将它用于所有 UTF-8 并且效果很好

这是一个你可以使用的类，只需编辑关于你的用户名、密码和数据库名称的信息

```
String unicode = "?useUnicode=yes&characterEncoding=UTF-8";
    String driverName = "com.mysql.jdbc.Driver";
    String hostName = "localhost";
    String port = "3306";
    String databaseName = "yourDatabaseName";

String userName = "yourusername";
    String password = "yourpassword";
    String databaseType = "jdbc:mysql";
    public Connection con;

    public Database() {
        try {
            Class.forName("com.mysql.jdbc.Driver");
            con = (Connection) DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/yourdatabasename" + unicode,
                    "yourusername", "yourpassword");
        } catch (ClassNotFoundException e) {
            System.err
                    .println("exception Class (" + driverName + ") not found");
            e.printStackTrace();
        } catch (SQLException e) {
            System.err.println("exception Connection URL");
            e.printStackTrace();
        }
    } 
```

当您想将数据从服务器发送到 android 时，试试这个

```
ServletOutputStream out = response.getOutputStream();
out.println(URLEncoder.encode(yourString,"UTF-8")); 
```

在android（或任何数据接收者）上试试这个

```
String dd = URLDecoder.decode(yourReturnedData, "UTF-8"); 
```

### 编辑

对于你的代码，你可以添加这个

```
name = URLDecoder.decode(name, "UTF-8"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-27T06:14:32.317

如果您想读取 SD 卡中的文本文件：

```
public String readText(Uri fileUri){ String zS,sOut=""; boolean kE10=false; try {
    BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream(getContentResolver().openFileDescriptor(fileUri, "r").getFileDescriptor()), StandardCharsets.UTF_8));
    while ((zS = in.readLine()) != null){if (kE10){ sOut+=(char)10+zS; } else {sOut+=zS;} kE10=true;}
} catch (Exception e) {} return sOut;} 
```

# asp.net-mvc - 在 asp.net mvc4 smtp.Send(mail) 中发送邮件失败

> ID：14686383
> 
> 赞同：2
> 
> 时间：2013-02-04T12:02:55.597
> 
> 标签：asp.net-mvc, sendmail, smtpclient

我在stackoverflow中找到了关于这个问题的帖子数量，但我的问题仍然没有解决。我尝试使用以下代码发送邮件：

**在控制器中：**

```
try
         {
        MailMessage mail = new MailMessage();
        mail.To.Add("mailto@gmail.com");
        mail.From = new MailAddress("mailfrom@gmail.com");
        mail.Subject = "Feedback for Website";
        string Body = "Name:";
        mail.Body = Body;
        mail.IsBodyHtml = true;
        SmtpClient smtp = new SmtpClient();
        smtp.Host = "smtp.gmail.com";
        smtp.EnableSsl = true;
        smtp.Credentials = new System.Net.NetworkCredential("mailTo@gmail.com", "topassword");
        smtp.Send(mail);

    }
    catch (Exception ex)
    {
       Response.Write(ex.Message);

    } 
```

**网络配置：**

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="PickupDirectoryFromIis">
    <network defaultCredentials="true" host="localhost" port="25"/>
  </smtp>
</mailSettings> 
```

我也试过这个：

```
<smtp from="mymail@gmail.com">
 <network enableSsl="true" host="smtp.gmail.com" port="587" userName="mymail@gmail.com" password="mypassword" /> 
```

调试时在我的输出中：

```
Step into: Stepping over non-user code 'System.Net.Mail.MailMessage.MailMessage'
Step into: Stepping over non-user code 'System.Net.Mail.MailMessage.To.get'
Step into: Stepping over non-user code 'System.Net.Mail.MailAddress.MailAddress'
Step into: Stepping over non-user code 'System.Net.Mail.MailMessage.Subject.set'
Step into: Stepping over non-user code 'System.Net.Mail.MailMessage.Body.set'
Step into: Stepping over non-user code 'System.Net.Mail.MailMessage.IsBodyHtml.set'
Step into: Stepping over non-user code 'System.Net.Mail.SmtpClient.SmtpClient'
Step into: Stepping over non-user code 'System.Net.Mail.SmtpClient.Host.set'
Step into: Stepping over non-user code 'System.Net.Mail.SmtpClient.EnableSsl.set'
The thread '<Thread Ended>' (0x1f38) has exited with code 0 (0x0).
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Debugger.Runtime\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Runtime.dll'
Step into: Stepping over non-user code 'System.Net.NetworkCredential.NetworkCredential'
The thread '<No Name>' (0x23d8) has exited with code 0 (0x0).
Step into: Stepping over non-user code 'System.Net.Mail.SmtpClient.Send'
A first chance exception of type 'System.Net.Mail.SmtpException' occurred in System.dll
The thread '<Thread Ended>' (0x1474) has exited with code 0 (0x0). 
```

如何解决这个..请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:13:15.433

最后经过长时间的搜索，我解决了这个问题：

```
Host = "172.**.*.***",
Port = 25,
EnableSsl = false,

Changed host from smtp.gmail.com to "172.**.*.***"(my mail server IP)
port changed from 587 to 25
and set false to EnableSsl 
```

它适用于本地..通过使用本地服务器主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:26:09.933

尝试下一个设置。

在代码中启用 ssl：

```
smtp.EnableSsl = true; 
```

设置配置如下：

```
<mailSettings>
      <smtp deliveryMethod="Network" from="username@gmail.com">
        <network defaultCredentials="false" host="smtp.gmail.com" port="587" userName="mymail@gmail.com" password="mypassword" />
      </smtp>
</mailSettings> 
```

# html - 通过电子邮件发送多个参数

> ID：14686387
> 
> 赞同：0
> 
> 时间：2013-02-04T12:03:01.263
> 
> 标签：html, email, grails

大家好，我正在尝试通过电子邮件进行用户更改密码方法，我当前的代码是：

```
<html>
<body>
    <p>Hello ${userInstance.user.username}, your password will be set to ${userInstance.new_pass} to finalise your password request, please click the link below.</p>
    <h2><g:link controller="reset" action="reset" params="[id:userInstance.user.id]" absolute="true">Please change my password</g:link></h2>
</body> 
```

当前链接仅将用户 ID 参数发送到我在 grails 中的方法。我也希望将密码作为参数发送！通过此链接发送 userInstance.new_pass 的可能解决方案是什么？

ps 我正在使用 grails 邮件插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:07:06.853

你试过这个吗？

```
 <g:link controller="reset" action="reset" params="[id:userInstance.user.id;password:userInstance.user.password]" absolute="true">Please change my password</g:link> 
```

# javascript - Backbone.js 实用程序

> ID：14686401
> 
> 赞同：6
> 
> 时间：2013-02-04T12:03:33.713
> 
> 标签：javascript, jquery, backbone.js, requirejs, amd

我目前正在将 Backbone 视为一种组织我们的 javascript 文件并为我们的代码创建一个干净的结构的方法。

我的问题主要是“最佳实践”问题。

该库运行良好，我已经成功地使用 AMD 和 requirejs 设置了我的结构。我的问题与我正在运行的几个实用程序文件有关。从 XML 文档中获取数据并将其转换为 json 数据对象（因此可以本地化数据）。另一个是加载并连接到 Facebook 的实用程序。我将这两个都创建为“模型”。

可以说，这些模型在连接到服务时可能应该是“控制器”，但需要调用这些模型，而无需浏览到路由器（或控制器）文件中的 hashbang。

我应该为这两个实用程序文件扩展主干模型还是我应该做些什么来实现这样的实用程序文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:20:52.103

出于此目的使用s*客观*上没有任何问题`Backbone.Model`，但无论如何感觉很可疑。模型带有不属于“服务”或“实用程序”类型的额外行李。

相反，我为不太符合 Backbone Model-View-Collection-Router 范式的功能定义了一个更通用的事件基类。

```
define(['backbone', 'underscore'], function(Backbone, _) {

  var Class = function() {
    this.initialize.apply(this, arguments);
  };

  //give Class events and a default constructor
  _.extend(Class.prototype, Backbone.Events, {initialize: function() {}});

  //copy the extend feature from one of the backbone classes
  Class.extend = Backbone.Model.extend;

  return Class;
}); 
```

该类的行为类似于其他 Backbone 对象，因为它可以被`extend`编辑，它的实例具有`initialize`构造方法并且它们支持事件。您的示例之一，本地化服务，可能类似于：

```
var LocalizationService = Class.extend({
  initialize: function(url) {
    this.url = url;
    this.fetch();
  },

  fetch: function({
    var self = this;
    $.ajax({
      url:this.url,
      success: function(response) {
        self.response = response;
        self.trigger('fetch:complete', self, response);
        //etc...
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:37:17.683

Addy Osmani 有一本免费的bone.js 电子书“开发 Backbone.js 应用程序”：http: [//addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)

开头有一[章是关于 MVC 和 MV*](http://addyosmani.github.com/backbone-fundamentals/#fundamentals)的。

后面还有一[章介绍 requirejs 和 AMD](http://addyosmani.github.com/backbone-fundamentals/#organizing-modules-with-requirejs-and-amd)

# ruby - 您可以在此代码段中找到哪些 Ruby“风格”问题？

> ID：14686405
> 
> 赞同：0
> 
> 时间：2013-02-04T12:03:42.447
> 
> 标签：ruby

我最近申请了一份 Ruby 工作，并被要求编写一个方法来“编写一个名为“query_to_hash”的 Ruby 函数，该函数将单个字符串参数作为 HTTP 查询字符串（例如`foo=bar&abc=1%202%203`）并返回名称/值对的哈希，如下所示：

```
 {"foo" => "bar", "abc" => "1 2 3"} 
```

我提供了附加的代码示例，并得到了一些反馈，表明我的 Ruby 风格不是他们想要的。

我现在很想知道开发人员会在附件中看到哪些风格问题，并希望得到建设性的反馈。

```
require 'rubygems'
require 'uri'
require 'rack'

include Rack::Utils

$SAFE = 3

# HTTP Query string (from wikipedia)

#field1=value1&field2=value2&field3=value3...
# The query string is composed of a series of field-value pairs.
# Within each pair, the field name and value are separated by an equals sign. The equals sign may be omitted if the value is an empty string.
# The series of pairs is separated by the ampersand, '&' (or semicolon, ';' for URLs embedded in HTML and not generated by a <form>...</form>; see below).
# While there is no definitive standard, most web frameworks allow multiple values to be associated with a single field[3][4]:

# field1=value1&field1=value2&field1=value3...

def query_to_hash(qry, sep = '&')

  # assume input string conforms to spec (no validation)
  # assume only & or ; is used - not both
  # return a null string if value is not defined
  # return null hash if query is null string
  # return array of values in hash if field has multiple values

  #@qry = qry.gsub(/%20/, " ")
  @qry = URI.unescape(qry)

  rtn = Hash.new {|h,k| h[k]=[]}

  if @qry == "" then 
  # return an empty hash
  #
    return {}
  else
      qry_a = @qry.split(sep)     
  end

  qry_a.each do |fv_pair|
    pair = fv_pair.split('=')

    # append multiple values if needed and ensure that null values are accommodated
    #
    rtn[pair[0]] << pair[1] ||= ""
  end 

  # collapse array if it contains only one item
  #
  rtn.each{|k,v| rtn[k] = *v if v.length == 1}

end

puts "Using 'query_to_hash' method:"
puts
test_values  = %w[foo=bar&abc=1%202%203 
                  foo&abc=1%202%203
                  foo=&abc=1%202%203
                  foo=bar&foo=boo&abc=1%202%203
                 ]

test_values.each { |v| puts "#{sprintf("%30s",v)} is returned as #{query_to_hash(v).inspect}" }           

test_values = %w[ foo=bar;foo=boo;abc=1%202%203
                  foo=bar;foo=boo;abc=1%0A2%203
                  foo=bar;foo=boo;abc=1%092%0D3
                 ]

test_values.each { |v| puts "#{sprintf("%30s",v)} is returned as #{query_to_hash(v, ';').inspect}" }       

puts "#{sprintf("%30s", "null string")} is returned as #{query_to_hash("").inspect}"

# compare with Rack::Utils::parse_query
#
puts
puts "Using 'Rack::Utils::parse_query' method:"
puts
test_values  = %w[foo=bar&abc=1%202%203 
                  foo&abc=1%202%203
                  foo=&abc=1%202%203
                  foo=bar&foo=boo&abc=1%202%203
                 ]

test_values.each { |v| puts "#{sprintf("%30s",v)} is returned as #{parse_query(v).inspect}" }           

test_values = %w[ foo=bar;foo=boo;abc=1%202%203
                  foo=bar;foo=boo;abc=1%0A2%203
                  foo=bar;foo=boo;abc=1%092%0D3
                 ]

test_values.each { |v| puts "#{sprintf("%30s",v)} is returned as #{parse_query(v, ';').inspect}" }       

puts "#{sprintf("%30s", "null string")} is returned as #{parse_query("").inspect}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:26:42.637

我看不到任何对我尖叫“这是错误的”的东西。您的代码注释良好且非常清晰，并且您掌握了核心语言结构和基本 API。

是否给出了具体原因，还是他们只是使用了“我们不喜欢你的风格”？

免责声明：我是一名迁移到 ruby​​ 的 java 开发人员，所以我可能没有对正确的 ruby​​“风格”有最好的心理印象，但我可以说我们的系统中有更糟糕的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:33:32.887

只有两件事真正让我感到震惊。

```
qry_a = @qry.split(sep) 
```

上一行中的变量是局部变量，只存在于`else`子句中，但您稍后会再次引用它。

```
@qry = URI.unescape(qry) 
```

除非你有一个对象，否则不需要使用实例变量，我建议这是一个问题，因为它会立即打开方法之外的变量范围。就个人而言，我尽量使用当地人。

除此之外，我觉得还不错。也许您可以使用 Minitest 或 RSpec 之类的测试框架进行测试，但它的风格似乎不错。

我同意@mcfinnigan 的观点，更具体的观点会对您更有帮助。

* * *

我会补充一点（因为我有点仓促），直接使用数组索引也不是很好的风格，因为它很快就会变得混乱。例如，这看起来像 Perl 即线路噪音 :)

```
rtn[pair[0]] << pair[1] ||= "" 
```

您还习惯于`each`在类似`map`或`select`可能更好的情况下影响值，因为它们显式地影响值而不是作为副作用。在 Ruby (IMO) 中，清晰明确是一种很好的风格。

* * *

再想一想……（我的咖啡开始了：）因为这是一次工作面试，也许他们正在寻找除此之外的东西。例如，我看到规范的第一个想法是“为什么将字符串作为参数传递？” 您可能会更好地执行以下操作：

```
class String
  def query_to_hash( separator="&" )
    # more code 
```

然后可以从 调用它`"foo=bar&abc=1%202%203".query_to_hash`，这更像是*Rubyish*。

甚至比猴子补丁更好，继承（经常被忽视）。

```
class QueryString < String
  def to_hash( separator="&" )
    # some code that refers to `self` 
```

然后可以通过以下方式使用它：

```
QueryString.new("foo=bar&abc=1%202%203").to_hash 
```

这更易于阅读和理解，并使*您想要实现的目标*更加清晰。还有其他方法可以做到这一点，也许这就是让你与众不同的地方。

# iphone - UILongPressGestureRecognizer 不工作

> ID：14686406
> 
> 赞同：3
> 
> 时间：2013-02-04T12:03:47.733
> 
> 标签：iphone, ios, uiwebview, uigesturerecognizer

我想检测`UILongPressGestureRecognizer`轻按`UIWebView`并按住..这样当我长按近 3 秒时，下面的`if`条件应该`True`只是
`if (navigationType == UIWebViewNavigationTypeLinkClicked && longGesture )`，但它不起作用..它每次都在循环中继续..不检查 longPressGesture 时间...

即使我已经尝试过这种情况..

`if (navigationType == UIWebViewNavigationTypeLinkClicked && longGesture.minimumPressDuration> 3 )`

不工作..我在哪里犯错..

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{

UILongPressGestureRecognizer *longGesture = [[UILongPressGestureRecognizer alloc] init];

longGesture.numberOfTapsRequired = 1;
longGesture.numberOfTouchesRequired = 1;
longGesture.minimumPressDuration = 3
;
longGesture.delegate = self;
// longGesture.allowableMovement = 50;

[self.webView addGestureRecognizer:longGesture];

if (navigationType == UIWebViewNavigationTypeLinkClicked  && longGesture )
{
    // Call your custom actionsheet and use the requestURL to do what you want :)

    UIActionSheet *sheet = [[UIActionSheet alloc]
                            initWithTitle:@" OPTIONS "
                            delegate:self
                            cancelButtonTitle:nil
                            destructiveButtonTitle:nil
                            otherButtonTitles:nil];

    [sheet addButtonWithTitle:@"Open"];
    [sheet addButtonWithTitle:@"Copy"];

    // Set cancel button index to the one we just added so that we know which one it is in delegate call
    // NB - This also causes this button to be shown with a black background
    sheet.cancelButtonIndex = sheet.numberOfButtons-1;

    [sheet showInView:webView];
    return NO;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:14:56.507

您应该启用同时手势识别，因为 UIWebView 自己设置了一些识别器，您的被跳过：在您的代码中添加这个

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:48:43.543

您没有为手势识别器设置目标动作，是吗？

```
UILongPressGestureRecognizer *longGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressGestureUpdated:)]; 
```

如果手势触发或不触发，设置目标操作将通知您！我首先从这种方法开始检查是否正在调用“longPressGestureUpdated”方法。

试试下面的定义：

```
 longPGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressGestureUpdated:)];
    longPressGesture.numberOfTouchesRequired = 1;
    longPressGesture.delegate = self;
    longPressGesture.cancelsTouchesInView = NO; 
```

（并按照 MilKyWaY 的建议启用同时手势识别）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T06:49:18.403

```
- (void)viewDidLoad
{ 
  [super viewDidLoad];
  UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(handleLongPress:)];
  longPress.numberOfTouchesRequired = 1;
  [self.view addGestureRecognizer:longPress];
}

-(void)handleLongPress:(UILongPressGestureRecognizer *)gesture
{
  if (gesture.state == UIGestureRecognizerStateBegan) 
  {
   UIActionSheet *sheet = [[UIActionSheet alloc]
                        initWithTitle:@" OPTIONS "
                        delegate:self
                        cancelButtonTitle:nil
                        destructiveButtonTitle:nil
                        otherButtonTitles:nil];

  [sheet addButtonWithTitle:@"Open"];
  [sheet addButtonWithTitle:@"Copy"];

  // Set cancel button index to the one we just added so that we know which one it is in delegate call
  // NB - This also causes this button to be shown with a black background
  sheet.cancelButtonIndex = sheet.numberOfButtons-1;

  [sheet showInView:webView];
  }
} 
```

# jquery - jQuery 验证 docx

> ID：14686408
> 
> 赞同：0
> 
> 时间：2013-02-04T12:03:55.320
> 
> 标签：jquery, jquery-validate

我尝试使用 jQuery [Validation 插件](http://docs.jquery.com/Plugins/Validation)来验证 .docx 文件上传。

```
$("#my_form").validate({
  rules: {
    upload1: { required: true, accept: "docx"},
    upload2: { required: true, accept: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"},
  }
); 
```

但是，这两个规则都不起作用。*属性accept*的值应该是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:53:26.750

要测试文件的扩展名，您需要使用[此处文档](http://docs.jquery.com/Plugins/Validation/CustomMethods/extension#extension)`extension`中提到的规则。

前任：

```
$('#commentForm').validate({
    rules: {
        file: {
            required: true,
            extension: 'docx'
        }
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/QkATu/1/)

# arrays - 检查数组是否坐标相邻的循环数组点

> ID：14686422
> 
> 赞同：0
> 
> 时间：2013-02-04T12:04:33.677
> 
> 标签：arrays, cyclic, neighbours

我有一个尺寸为 M x N x L 的 3d 数组，它定义了循环卷上的值（即，如果我们是零索引，则第 M-1 个点在第 0 个点旁边）。如果给定一个点的坐标（X、Y、Z），我如何才能巧妙地找到所有相邻的点（即仅在一维中相距一维的点）？

我最初的解决方案只是对数组中的所有值进行循环（数组相当小），然后有类似的东西：

```
if abs(X-M) + abs(Y-N) + abs(Z-L) == 1
  do neighboring point stuff
end 
```

但这并没有考虑到循环方面。想一个快速、简洁的方法来做到这一点会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:32:11.390

这就是我最终为那些感兴趣的人所做的（不知道为什么我没有早点想到它）：

```
for dimension=1:3
  for direction=-1:2:1
    vec = zeros(3,1);
    vec(dimension) = direction;

    this_point = point + vec;
    this_point(dimension) = mod(this_point(dimension)-1,size(obj.int_ref,dimension))+1;
  end
end 
```

请注意，这是 matlab 代码，因此数组的索引从 1 开始（因此不寻常的 mod 行）。

# jquery - Jquery Animate 在输入提交按钮上工作？

> ID：14686424
> 
> 赞同：2
> 
> 时间：2013-02-04T12:04:43.980
> 
> 标签：jquery, jquery-animate

我有一个 href 按钮，上面有一段 javascript 动画，可以让篮子在悬停时上下跳跃。但是，我需要将 href 链接更改为输入提交按钮，我似乎无法让动画与输入按钮一起正常工作。

这是我用于动画的 javascript

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".button").hover(function(){
            $(":not(:animated)", this)
                // first jump  
                .animate({top:"-=6px"}, 200).animate({top:"+=6px"}, 200)
                // second jump
                .animate({top:"-=3px"}, 100).animate({top:"+=3px"}, 100)
                // the last jump
                .animate({top:"-=2px"}, 100).animate({top:"+=2px"}, 100);
        });
    })
</script> 
```

这是HTML

```
<div class="addbasketbut"> 
<a class="button" href="#">
    <img src="template_images/basketbutton.png" alt="" />Add to Basket
</a>
</div> 
```

[这是原始按钮http://jsfiddle.net/tcherokee/wkfrG/](http://jsfiddle.net/tcherokee/wkfrG/)的工作 Jsfiddle

我对 Jquery 不太熟悉，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:49:10.703

一种可能的方法：

对于输入按钮，您可以使用 CSS 中的背景图像来覆盖提交按钮（我认为这可能是唯一的方法）

为了使图像动画化，您可以`$('.button').animate({"backgroundPosition": POSITION})`在悬停时使用，您可以在其中更改提交按钮的背景图像位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:24:36.823

好的想通了。

我将 jquery 代码更新为此

```
$(document).ready(function () {
$(".addbasketbut").hover(function () {
    $(".image:not(:animated)", this)
    // first jump  
    .animate({
        top: "-=6px"
    }, 200).animate({
        top: "+=6px"
    }, 200)
    // second jump
    .animate({
        top: "-=3px"
    }, 100).animate({
        top: "+=3px"
    }, 100)
    // the last jump
    .animate({
        top: "-=2px"
    }, 100).animate({
        top: "+=2px"
    }, 100);
});
}) 
```

和这个的html

```
<div class="addbasketbut">
<img src="template_images/basketbutton.png" class="image" alt=""/>
<input class="button" type="submit" value="Submit">
</div> 
```

这似乎行得通。我不确定它是否是最优雅的解决方案......但它确实有效:)。

# php - 使用 jplayer 播放放置在根文件夹之外的 mp3 文件

> ID：14686427
> 
> 赞同：0
> 
> 时间：2013-02-04T12:04:57.783
> 
> 标签：php, javascript, .htaccess, jplayer

我已经在网上搜索了一个解决方案，我发现其中一些涉及基于 php 的解决方案，如分块或其他涉及 mod_xsendfile() 等的解决方案，但我找不到确切问题的解决方案。

这是问题：

我正在使用 jplayer 在我的网站上播放音乐。我想要的是当用户将歌曲添加到播放列表中时，它会添加到 jplayer 列表中（我已经测试过，没有问题，我通过将 JSON 对象传递给 java 脚本以将该歌曲添加到播放列表中来做到这一点（其中还涉及传递歌曲的完整 url））但我不希望用户看到 mp3 的确切 url。或者即使他能够看到它，他也不应该通过直接在浏览器中输入该 url 来访问它，但是我可以下载。

我使用 hostgator 作为虚拟主机，它使我可以将文件放在根文件夹之外，这可能是对其他主机（如 godaddy）的限制，但它仍然不支持共享主机上的 mod_xsendfile()，所以请避免与此相关的答案。

我对任何解决方案都很好，无论我需要将我的文件保存在根目录之外还是里面，但我只想保护对文件的直接访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:54:33.943

Jplayer 需要一个返回原始 MP3 数据的 URL。因此，它要么需要能够直接读取文件，要么需要以其他方式将其发送给它。

这里的经典解决方案（没有像 X-SendFile 这样的系统）是一个 PHP 脚本，它检查相关权限，然后发送所需的文件。如果有人没有权限，它可以发送一个不同的文件告诉他们，或者以其他方式通知用户。

执行您的验证检查，然后，如果没问题，使用文件路径调用[http://php.net/readfile](http://php.net/readfile)。它将从磁盘发送文件。您可能还需要首先为 mime 类型设置一些标题。

# java - 在 Java 中使用 become()

> ID：14686428
> 
> 赞同：10
> 
> 时间：2013-02-04T12:05:09.783
> 
> 标签：java, akka

我正在使用来自 Java 的 Akka。根据文档，*`context.become()`*作为`Procedure<Object>`参数。事实上，它预计*`PartialFunction<Object, BoxedUnit>`*这似乎是由许多具有奇怪名称的方法自动生成的。

从 Java中使用*become()*的正确方法是什么？

PS我正在使用Akka 2.0.3

更新：看起来有两种方法：context() 和 getContext()。第一个返回 ActorContext，第二个返回 UntypedActorContext。UntypedActorContext 有`become(Procedure<Object>)`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T16:39:36.117

您混淆了 Akka Java 和 Scala API。从技术上讲，您可以从 Java 代码中使用像 Akka 这样的 Scala 库，但它通常是冗长而繁琐的。因此 Akka 团队决定开发分离 API——Scala 和 Java 适配器中的原生 API。

在 Scala API 中，您扩展[`akka.actor.Actor`](http://doc.akka.io/api/akka/2.0.3/akka/actor/Actor.html)了具有`context`type 的字段[`akka.actor.ActorContext`](http://doc.akka.io/api/akka/2.0.3/akka/actor/ActorContext.html)。这`ActorContext.become()`接受[`PartialFunction`](http://www.scala-lang.org/api/current/index.html#scala.PartialFunction)，这是一个 Scala 特定的类。

另一方面，在 Java API 中，您扩展[`akka.actor.UntypedActor`](http://doc.akka.io/api/akka/2.0.3/akka/actor/UntypedActor.html)了（类 Java）方法`getContext()`，返回[`akka.actor.UntypedActorContext`](http://doc.akka.io/api/akka/2.0.3/akka/actor/UntypedActorContext.html). 这一个接受[`akka.japi.Procedure`](http://doc.akka.io/api/akka/2.0.3/akka/japi/Procedure.html)。

长话短说 - 如果您使用的是 Java API，请坚持使用它。Scala 和 Java 文档之间有明显的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T17:49:10.633

也有很多关于如何在 java 中执行此操作的好示例。希望此示​​例对您有所帮助：

```
Procedure<Object> angry = new Procedure<Object>() {
@Override
public void apply(Object message) {
  if (message.equals("bar")) {
    getSender().tell("I am already angry?", getSelf());
  } else if (message.equals("foo")) {
    getContext().become(happy);
  }
}
};

Procedure<Object> happy = new Procedure<Object>() {
@Override
public void apply(Object message) {
  if (message.equals("bar")) {
    getSender().tell("I am already happy :-)", getSelf());
  } else if (message.equals("foo")) {
    getContext().become(angry);
  }
 }
};

public void onReceive(Object message) {
if (message.equals("bar")) {
  getContext().become(angry);
} else if (message.equals("foo")) {
  getContext().become(happy);
} else {
  unhandled(message);
} 
```

} }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-28T23:31:07.200

简而言之，在使用 时`Java API`，请确保您正在调用`getContext()`方法而不是`context()`打算与 一起使用的方法`Scala API`。

签出[这个（java）](https://github.com/daggerok/sbt-examples/blob/master/akka-scala-vs-java/java/hello/src/main/java/com/github/daggerok/akka/quickstart/AkkaQuickStart.java#L38)

```
@Slf4j
@RequiredArgsConstructor
public class Greeter extends AbstractActor {

    private final ActorRef printer;

    public static Props props(ActorRef printer) {
        return Props.create(Greeter.class, printer);
    }

    @Override
    public Receive createReceive() {
        return withWhomToGreet(""); // initial state
    }

    private Receive withWhomToGreet(String name) {
        return receiveBuilder()
                .match(WhoToGreet.class, // changing actor state context
                       whoToGreet -> getContext().become(withWhomToGreet(whoToGreet.getWho())))
                .match(Greet.class, greet -> {
                    String msg = format("Hola, %s", name);
                    log.info("sending {} to {}", msg, printer);
                    printer.tell(Greeting.of(msg), self());
                })
                .matchAny(o -> {
                    log.error("unexpected: {}", o);
                    unhandled(o);
                })
                .build();
    }
} 
```

或者[这个（科特林）](https://github.com/daggerok/akka-kotlin-example/blob/master/src/main/kotlin/com/github/daggerok/akkakotlinexample/Counter.kt#L26)

```
class CounterActor : AbstractActor() {

    companion object Factory {
        sealed class Commands {
            override fun toString(): String = javaClass.simpleName

            object Increment : Commands()
            object Decrement : Commands()
            object GetState : Commands()
        }

        private val type = CounterActor::class.java
        val props: Props = Props.create(type) { CounterActor() }
        val name: String = type.simpleName
    }

    override fun createReceive(): Receive = withCounter(0) // init state

    private fun withCounter(counter: Int): Receive =
        receiveBuilder()
            .matchAny { cmd ->
                context.system.log().info("current: $counter, received: $cmd")
                when (cmd) {
                    is GetState -> sender.tell("counter value: $counter", self)
                    is Increment -> {
                        // switch context with new updated actor state,
                        // actor is still stateless, similarly like we
                        // doing in scala for context.become 
                        // Make sure with Java API you are calling
                        // getContext() method, not context()!
                        context.become(withCounter(counter + 1))
                    }
                    is Decrement -> // another change of actor state
                        context.become(withCounter(counter - 1))
                    else -> unhandled(cmd)
                }
            }
            .build()
} 
```

一切都可以用与 Scala 中相同的想法来完成

# php - Laravel 过滤器，设置变量

> ID：14686435
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:05:20.053
> 
> 标签：php, timezone, laravel

我不确定我这样做是否正确，但我想基本上使用过滤器来检查用户是否在每个 Web 请求之前设置了他们的时区，因此如果他们没有，我想加载一个弹出框，要求他们这样做。但是，我只知道如何在过滤器中重定向，有没有办法可以设置路由可以使用的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:11:59.300

没有更多信息 - 这是一个通用的解决方案：

```
$time_zone = // where ever you checking if the time_zone is set?

if (is_null($time_zone))
{
   redirect ('/somewhere/set_timezone');
}
else
{
   // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:18:27.120

如果您只是想在视图中添加一个变量，您可以在过滤器中这样做：

```
View::share('timezone_set', false); 
```

另一种方法是使用视图作曲家。

# spring - 如何将 GWT 部署到 Jboss 7 并将域分配给部署？

> ID：14686437
> 
> 赞同：0
> 
> 时间：2013-02-04T12:05:31.027
> 
> 标签：spring, hibernate, gwt, deployment, jboss

我有 GWT 应用程序使用 Hibernate 和 Spring 功能，我如何将它部署到 JBoss 7 并将我的域分配给这个部署 (www.mydomain.com)，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:22:43.850

在 Jboss 上部署 GWT 应用程序..

```
1)Compile you gwt web application
2)Copy  the war file 
3)Add all libraries(jar files) in lib folder of war file 
4)Rename your war as mydoamin.war
5)Put the war in jboss/standalone/deployments/
6)create a dodeploy file   like mydoamin.war.dodeploy (type should be file)
7)From command line  enter into Jboss/bin  folder
8)To run the jboss  type standalone.bat -b 0.0.0.0  
9)Then it start deploy all the dodeploy war files 
10)If jboss created the file mydoamin.war.deployed  ...successfully deploy .(you can acceess as http://localhost:8080/mydoamin)
11)If failed it will generate mydoamin.failed  ..  oops some thing went wrong ..check the console and resolve those exceptions 
```

一切顺利 。

# c++ - 无法在 C++ 中输入二维数组的值

> ID：14686441
> 
> 赞同：0
> 
> 时间：2013-02-04T12:05:41.850
> 
> 标签：c++

我正在为一堂课做作业，这是相当例行的。我以前在 Java 中做过这个，所以它对我来说并不是全新的，但是，我不完全确定这里出了什么问题。

基本上我需要为几行/列输入信息，然后打印列的总和，所有这些都不是特别困难。但是，每次我打印数组的内容时，无论如何都是 1。

我不确定出了什么问题，如果有人能告诉我为什么我会很感激。

哦，忘了说，我是用**g++**编译的。

```
#include <iostream>
#include <cstdio>
using namespace std;

const int ROWS = 4;
const int COLUMNS = 3;

void setupMatrix() {
    // Setup matrix
    double array[ROWS][COLUMNS];

    // Needed? Wouldn't think so.
    // for (int i = 0; i < COLUMNS; i++) {
    //      for (int j = 0; j < ROWS; j++) {
    //              array[i][j] = 0.0;
    //      }
    // }

    // Get array information from user
    for (int i = 0; i < COLUMNS; i++) {
            printf("Row %d\n", (i + 1));
            for (int j = 0; j < ROWS; j++) {
                    printf("Column %d ", (j + 1));
                    cin >> array[i][j];
            }
    }

    // Print array so I can see what's up first
    for (int i = 0; i < COLUMNS; i++) {
            // Row & column separation
            printf("\n");
            for (int j = 0; j < ROWS; j++) {
                    printf("%d ", array[j][i]);
            }
    }

}

int main () {
    setupMatrix();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T12:07:42.540

数组的第一个维度是 ROWS，第二个维度是 COLUMNS，您的循环顺序错误。还要`%lf`在 printf 中打印双重使用格式说明符。我不明白为什么您`printf`在阅读 using 时决定使用 using `cin`，更好地使用`cout`以保持一致性，因为这是典型的打印方式`C++`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:09:45.823

您正在使用：

```
array[i][j]); 
```

对于“cin”和

```
array[j][i]); 
```

打印：使用`cout<<array[j][i]);`

# ant - 与 cobertura 和 ant 的集成代码覆盖率

> ID：14686446
> 
> 赞同：0
> 
> 时间：2013-02-04T12:06:01.623
> 
> 标签：ant, sonarqube, cobertura

任何人都知道是否可以使用 cobertura 和 ant 将声纳上的单元覆盖和集成覆盖分开？如果可能的话，可以提供任何例子吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:24:55.337

这是不可能的AFAIK。对您来说最好的选择是使用 JaCoCo 而不是 Cobertura。您可以使用以下示例项目来帮助您：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/ant/it-jacoco-ant](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/ant/it-jacoco-ant)

# cart - Reg PHP 开源购物车软件 Zend cart

> ID：14686454
> 
> 赞同：0
> 
> 时间：2013-02-04T12:06:33.987
> 
> 标签：cart, zen

对于我们的一位客户，我们需要开发一个购物车应用程序。他们说他们不想要 Magento。所以我们要用 Zen cart 来做这件事。我们需要安装这个 Zen Cart 并且需要进行定制。我们还需要为此创建一个移动版本。

为了检查上面的内容，我们从[http://sourceforge.net/projects/zencart/files/](http://sourceforge.net/projects/zencart/files/)下载了 Zen Cart并安装在我们的本地机器上，这工作正常。

当我们尝试下载并检查此 Zen 购物车的移动版本时，我们无法从[http://mobilezencart.com/](http://mobilezencart.com/)下载。这要求我们注册。我们为此创建了帐户，根本没有回复，也无法下载。

请让我们知道此移动版本是否可用，是否免费以及我们可以下载。如果是，请提供参考链接或步骤

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T10:15:13.453

Zen cart 作为一种选择也不错，我知道他们想远离 magento，因为 magento 对于小商店来说是一种庞大的方式。

移动禅车网站是一个让您的禅车移动的插件。这就是 5 年前发生的情况，当时只有 2 到 5 种屏幕尺寸可用。这些天我们会使用一个响应式网站（你可以缩放浏览器窗口并查看较小屏幕尺寸发生的变化）。

查看[Themeforest](http://themeforest.net/category/ecommerce/zen-cart)以获得一些出色的响应式模板或 Zen Cart 的[下载](http://www.zen-cart.com/downloads.php?do=cat&id=2)页面。

因此，作为您问题的答案，您可以使用移动插件。但由于他们没有回复您的邮件，而且该网站看起来已经过时（看起来像 iPhone 3G/3Gs），我怀疑该插件是否仍然有效。

这把我巧妙地带到了另一点。目前我正在研究所有主要平台，我不得不说，Zen Cart 看起来就像一个试图看起来很酷的老爸。它基于 OsCommerce，似乎核心开发并没有真正快速发展，他们在设计和代码方面一直落后。就像没有内置的 API 功能......甚至没有所见即所得的编辑器。旁边的后端感觉就像 15 岁。不要误会我的意思，Zen Cart 会完成这项工作，只是不要指望花哨的新功能。

另一方面，如果你真的想要响应，去 Presta Shop！他们昨天发布了 v1.6，它具有全面的响应能力（都在店面作为后端）。

也就是说，如果您是一位经验丰富的编码员，请选择 Presta Shop（甚至 Magento，但由于客户不想要它，所以不在图片中），如果您更喜欢 DIY 编码员，那么 Zen Cart 是完美的。

# javascript - 带有许多输入的 jQuery 自动完成 - django-dynamic-formset

> ID：14686456
> 
> 赞同：1
> 
> 时间：2013-02-04T12:06:40.323
> 
> 标签：javascript, jquery, django, jquery-ui, django-forms

我正在使用 jQuery 自动完成功能 ( [http://jqueryui.com/autocomplete](http://jqueryui.com/autocomplete) ) 和 Django 动态表单集 ( [http://code.google.com/p/django-dynamic-formset/](http://code.google.com/p/django-dynamic-formset/) )。我的表单集字段之一需要使用自动完成功能，因此我使用（简化）附加它：

```
$('input[name$=select]').autocomplete({source:'my_url/', minLength: 3}); 
```

我在准备好文档时调用它，它工作正常（从 ajax 获取数据）。但是，如果我使用 django-dynamic-formset 添加新行并使用以下命令处理其“添加”事件：

```
function(row){
    $(row).find('input[name$=select]').autocomplete({source:'my_url/', minLength: 3});
} 
```

它不适用于新添加的行。怎么了？

更新：尝试改用类 - 没有结果 尝试使用 on()/live() - 没有结果 添加新行后尝试破坏自动完成 - 没有结果（它会破坏，但不会创建）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:04:06.993

我刚刚用 jquery.formset-1.2 测试了这段代码，它确实有效：

```
function enableAutocomplete(context) {
    $('input[name$=select]', context || null).autocomplete({source:'my_url/', minLength: 3});
}

$(document).ready(function() {
    $('.foo').formset({
        added: function(row) {
            enableAutocomplete(row);
        }
    });

    enableAutocomplete();
}); 
```

# php - 删除Web文件夹中的文件不起作用

> ID：14686458
> 
> 赞同：-2
> 
> 时间：2013-02-04T12:06:43.307
> 
> 标签：php

我试图从 web 文件夹中删除不相关的文件，并且脚本无法正常工作。

这是代码：

```
<?php

    if(isset($_REQUEST['delete_file'])){

        if(isset($_GET['file_id'])){

$file_id = mysql_real_escape_string(strip_tags($_GET['file_id']));

    $file_info_query = @mysql_query("select * from video where id='$file_id'");
    $file_info_row = @mysql_fetch_assoc($file_info_query);
    $filename = $file_info_row['filename'];

        $path = $_SERVER['DOCUMENT_ROOT'].'/test2/video/';

        $file_path = $path;
        $file_path .= $filename;

            if(unlink($file_path))
            {
            echo "<p>File deleted successfully.</p> ";
            }
            else
            {
            echo "<p>Unable to delete file. Try again shortly.</p> ";
            }       

        }

    }

    ?> 
```

将不胜感激让这个工作......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:09:30.017

取消链接功能需要文件的完整服务器路径。请将您的 $path 值更改为此：

```
$path = $_SERVER['DOCUMENT_ROOT'].'/test2/video/'; 
```

# vb6 - .vbp 无法加载，也不能在记事本中

> ID：14686459
> 
> 赞同：1
> 
> 时间：2013-02-04T12:06:49.713
> 
> 标签：vb6

截至昨天，我的 vbp 文件拒绝打开“.vbp 无法加载”。如果我尝试打开单个表单，其中一些可以工作（在 vb6 中打开），其中一些会产生带有两个类错误的错误 .log 文件：控件 mstTabArticles 的类 TabDlg.SSTab 不是加载的控件类。第 3672 行：控件 dtpTicketDate 的类 MSComCtl2.DTPicker 不是已加载的控件类。

我也无法在记事本中打开 vbp（=empty），在写字板中我只能得到小方块......

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:23:17.837

您的`.vbp`文件已损坏。您将需要从备份或源代码控制中恢复（您确实拥有这两个，不是吗？）。否则，您将需要从头开始重新创建项目文件并读取每个表单。不过，您需要弄清楚加载了哪些控件和引用。

至于加载表单文件时的错误，这是正常的，因为项目中没有添加控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:22:37.603

另一种可能性是使用十六进制编辑器打开您的文件。您也许可以从损坏的文件中挽救大量文本并将其复制到新文件中。

# clojure - 如何以高效且 DRY 的方式验证函数参数？

> ID：14686460
> 
> 赞同：1
> 
> 时间：2013-02-04T12:06:51.793
> 
> 标签：clojure

假设我有三个对矩阵进行操作的函数：

```
(defn flip [matrix] (...))
(defn rotate [matrix] (...))
(defn inc-all [matrix] (...)) 
```

想象一下，每个函数都需要一个整数向量向量（其中每个内部向量的长度相同）才能正常运行。

我可以提供一个断言矩阵函数来验证矩阵数据的格式是否正确：

```
(defn assert-matrix [matrix] (...) ) 
```

但是，翻转函数（例如）无法知道传递给函数的数据是否已经过验证（完全取决于用户是否会在将数据传递给函数之前对其进行验证）。因此，为了保证正确性，翻转需要定义为：

```
(defn flip [matrix]
    (assert-matrix matrix)
    (...)) 
```

这里有两个主要问题：

*   每次调用矩阵函数时都必须继续调用 assert-matrix 是低效的。
*   每当我创建一个矩阵函数时，我必须记住调用 assert-matrix。我很可能会忘记，因为重复这一点很乏味。

在面向对象的语言中，我将创建一个名为 Matrix 的类，它带有一个构造函数，该构造函数在创建实例时检查构造函数 args 的有效性。无需重新检查有效性的方法，因为它们可以确信在初始化类时数据已经过验证。

这将如何在 Clojure 中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:25:24.983

There are several ways to validate a data structure only once, you could for instance write a `with-matrix` macro along the lines of the following:

```
(defmacro -m> [matrix & forms]
  `(do
    (assert-matrix ~matrix
      (-> ~matrix
        ~@forms)) 
```

which would allow you to do:

```
(-m> matrix flip rotate) 
```

The above extends the threading macro to better cope with your use case.

There can be infinite variations of the same approach, but the idea should still be the same: the macro will make sure that a piece of code is executed only if the validation succeeds, with functions operating on matrices without any embedded validation code. Instead of once per method execution, the validation will be executed once per code block.

Another way could be to make sure all the code paths to matrix functions have a validation boundary somewhere.

You may also want to check out [`trammel`](https://github.com/fogus/trammel).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:03:55.603

您可以使用协议来表示矩阵上的所有操作，然后创建一个类似于矩阵的“构造函数”的函数：

```
(defprotocol IMatrix                                                                                                                                 
  (m-flip [_])                                                                                                                                       
  (m-rotate [_])                                                                                                                                     
  (m-vals [_]))                                                                                                                                      

(defn create-matrix [& rows]                                                                                                                         
  (if (apply distinct? (map count rows))                                                                                                             
    (throw (Exception. "Voila, what are you doing man"))                                                                                             
    (reify                                                                                                                                           
      IMatrix                                                                                                                                        
      (m-flip [_] (create-matrix rows))                                                                                                              
      (m-rotate [_] (create-matrix rows))                                                                                                            
      (m-vals [_] (vec rows))))) 

(def m (create-matrix [1 2 3] [4 5 6]))                                                                                                              
(m-flip m) 
```

# iphone - 如何在 MacBook Pro 上获得 Photo Booth Flash 效果

> ID：14686463
> 
> 赞同：0
> 
> 时间：2013-02-04T12:06:53.000
> 
> 标签：iphone, ios, xcode, flash, camera

我有一个白色闪光灯，它似乎在提醒用户拍摄了一张照片，但白色闪光灯并没有为我的照片增添光彩。无论我做了什么，我的照片仍然很暗。我已经改变了闪光的持续时间并在闪光 `[[self captureManager] captureStillImage];` 后开始拍照，但仍然没有运气。我查看了我的照相亭应用程序，`Macbook`似乎闪光灯在拍摄图像之前就出现了一点点，它为黑暗中的照片提供了光线。我想复制这个。谁能帮我？

```
- (IBAction)captureStillImage2:(id)sender
{
// Capture a still image
[[self stillButton] setEnabled:NO];

// Flash the screen white and fade it out to give UI feedback that a still image was taken
UIView *flashView = [[UIView alloc] initWithFrame:[[self videoPreviewView] frame]];
[flashView setBackgroundColor:[UIColor whiteColor]];
[[[self view] window] addSubview:flashView];

[UIView animateWithDuration:1.0f
                 animations:^{
                     [[self captureManager] captureStillImage];
                     [flashView setAlpha:0.f];
                 }
                 completion:^(BOOL finished){

                     [flashView removeFromSuperview];
                     [flashView release];
                 }
 ];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:51:24.053

`[[UIScreen mainScreen] setBrightness:1.0];`尝试使用类似iOS5+的东西来增加亮度。

但请记住，像 iphone 这样的小显示器上的效果无法与全尺寸 macbook pro 的效果相匹配（这完全取决于**亮度**和**背光区域**）。

# c# - 如何使用 C# 从 Windows Phone 中的列表选择器中获取项目名称

> ID：14686466
> 
> 赞同：1
> 
> 时间：2013-02-04T12:07:04.000
> 
> 标签：c#, silverlight, windows-phone-7

我使用了 Silverlight 的列表选择器控件，并使用 bean 类在其中添加了一些值，但我无法在 Selection Changed 事件中获取项目的名称。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:26:25.067

In the XAML:

```
<toolkit:ListPicker SelectionChanged="OnListPickerChanged" /> 
```

And in the code-behind:

```
private void OnListPickerChanged(object sender, SelectionChangedEventArgs e)
{
    var selectedItem = (sender as ListPicker).SelectedItem;
    // Do what you want with selectedItem
} 
```

# java - 设置 JXL 自定义字体

> ID：14686471
> 
> 赞同：4
> 
> 时间：2013-02-04T12:07:36.337
> 
> 标签：java, fonts, jxl, jexl

如何在 JXL 中添加自定义字体？除了默认可用的那个？

```
public static final FontName ARIAL = new FontName("Arial");
public static final FontName TIMES = new FontName("Times New Roman");
public static final FontName COURIER = new FontName("Courier New");
public static final FontName TAHOMA = new FontName("Tahoma"); 
```

该类`FontName`似乎是`private` `static`该类内部的一个内部`WritableFont`类。除了那里提到的字体，我如何添加字体？

问候， A Y。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-19T16:11:03.100

由于 FontName 构造函数是私有的，我们不能`FontName`直接实例化一个 new。相反，我们必须使用[`WritableFont.createFont`](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/jxl/write/WritableFont.html#createFont(java.lang.String)). 这是一种工厂方法，用于创建由提供的字体名称指定的字体。

请注意以下事项：

> 应谨慎使用此方法，因为用于创建字体名称的字符串必须由 Excel 的内部处理识别

* * *

要创建 Trebuchet MS 字体，您只需调用静态工厂方法。

```
public static final FontName TREBUCHET_MS = WritableFont.createFont("Trebuchet MS"); 
```

* * *

我创建了一个简单的字体工厂 API 来创建`WritableFont`以下对象：

# FontCreator.java

```
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import org.json.excel.parse.PathResolver;

import jxl.Workbook;
import jxl.format.Colour;
import jxl.format.RGB;
import jxl.format.UnderlineStyle;
import jxl.write.Label;
import jxl.write.WritableCell;
import jxl.write.WritableCellFormat;
import jxl.write.WritableFont;
import jxl.write.WritableFont.FontName;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;
import jxl.write.WriteException;
import jxl.write.biff.RowsExceededException;

public class FontCreator {
    // ========================================================================
    // Private Utilities
    // ========================================================================
    private static final Map<Integer, Colour> colorValueMap;
    private static final Map<String, Colour> colorNameMap;

    static {
        colorValueMap = new HashMap<Integer, Colour>();
        colorNameMap = new HashMap<String, Colour>();

        for (Colour color : Colour.getAllColours()) {
            RGB rgb = color.getDefaultRGB();
            int valueKey = (rgb.getRed() << 16) + (rgb.getGreen() << 8) + rgb.getBlue();
            String nameKey = color.getDescription();

            colorValueMap.put(valueKey, color);
            colorNameMap.put(nameKey, color);
        }
    }

    // ========================================================================
    // Global Values
    // ========================================================================
    public static final WritableFont TREBUCHET_MS = create("Trebuchet MS");
    public static final WritableFont CONSOLAS = create("Consolas", 9, "ocean blue", true, false, 0);

    public static final int NO_UNDERLINE = 0x0;
    public static final int SINGLE = 0x1;
    public static final int DOUBLE = 0x2;
    public static final int SINGLE_ACCOUNTING = 0x21;
    public static final int DOUBLE_ACCOUNTING = 0x22;

    public static void main(String[] args) {
        try {
            File exlFile = new File(PathResolver.resolve("${userprofile}/documents/excel-font-test.xls"));
            WritableWorkbook writableWorkbook = Workbook.createWorkbook(exlFile);
            WritableSheet writableSheet = writableWorkbook.createSheet("Sheet1", 0);
            WritableCellFormat cellFormat = new WritableCellFormat(FontCreator.CONSOLAS);

            WritableCell label = new Label(0, 0, "This is a test.", cellFormat);

            writableSheet.addCell(label);

            writableWorkbook.write();
            writableWorkbook.close();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (RowsExceededException e) {
            e.printStackTrace();
        } catch (WriteException e) {
            e.printStackTrace();
        }
    }

    public static WritableFont create(String name, int size, Colour color, boolean bold, boolean italic,
            int underline) {
        UnderlineStyle underlineStyle = UnderlineStyle.getStyle(underline);
        FontName font = WritableFont.createFont(name);

        if (bold) {
            return new WritableFont(font, size, WritableFont.BOLD, italic, underlineStyle, color);
        } else {
            return new WritableFont(font, size, WritableFont.NO_BOLD, italic, underlineStyle, color);
        }
    }

    public static WritableFont create(String name, int size, int color, boolean bold, boolean italic, int underline) {
        return create(name, size, lookupColor(color), bold, italic, underline);
    }

    public static WritableFont create(String name, int size, String color, boolean bold, boolean italic,
            int underline) {
        return create(name, size, lookupColor(color.toLowerCase()), bold, italic, underline);
    }

    public static WritableFont create(String fontName, int size, int color) {
        return create(fontName, size, color, false, false, NO_UNDERLINE);
    }

    public static WritableFont create(String fontName, int size, String color) {
        return create(fontName, size, color, false, false, NO_UNDERLINE);
    }

    public static WritableFont create(String fontName, int size) {
        return create(fontName, size, 0x000000);
    }

    public static WritableFont create(String fontName) {
        return create(fontName, WritableFont.DEFAULT_POINT_SIZE);
    }

    public static Colour lookupColor(int value) {
        return colorValueMap.containsKey(value) ? colorValueMap.get(value) : Colour.AUTOMATIC;
    }

    public static Colour lookupColor(String value) {
        return colorNameMap.containsKey(value) ? colorNameMap.get(value) : Colour.AUTOMATIC;
    }
} 
```

# 路径解析器.java

您可以忽略此文件，它仅用于解析上例中的路径（*“${userprofile}/documents/excel-font-test.xls”*）。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class PathResolver {
    private static final Pattern envVarRegex;

    static {
        String envVar = "[\\w\\(\\)]+";
        String expression = "\\$\\{(" + envVar + "+)\\}|\\$(" + envVar + ")";

        envVarRegex = Pattern.compile(expression);
    }

    public static String resolve(String path) {
        if (path == null) {
            return null;
        }

        Matcher m = envVarRegex.matcher(path);
        StringBuffer sb = new StringBuffer();

        while (m.find()) {
            String envVar = m.group(0);
            String envVarName = null == m.group(1) ? m.group(2) : m.group(1);

            m.appendReplacement(sb, resolveEnvVar(envVar, envVarName));
        }

        return m.appendTail(sb).toString();
    }

    private static String resolveEnvVar(String envVar, String name) {
        try {
            return Matcher.quoteReplacement(System.getenv(name));
        } catch (NullPointerException e) {
            System.err.println("Warning: Environment variable does no exist: " + name);
        }
        return Matcher.quoteReplacement(envVar);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:13:35.890

```
 WritableFont(WritableFont.FontName fn, int ps)
      Constructs of font of the specified face and of size given by the specified point size 
```

看[这里](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/jxl/write/WritableFont.html)

# html - 为什么 inline-block 在此代码示例中不呈现内联元素？

> ID：14686475
> 
> 赞同：1
> 
> 时间：2013-02-04T12:07:43.823
> 
> 标签：html, css

以下代码似乎在所有浏览器中将输入字段呈现在其标签下方的行上：

```
<html>
<head>
    <style type="text/css">
    label { display:inline-block; width:75px }
    </style>
</head>
<body>
    <form>
        <label>First Name <input type="text" name="first_name" size="30" maxlength="30"/></label>
    </form>
</body>
</html> 
```

这是它的外观：

名字
[输入字段]

我的理解是 inline-block 应该允许标签的固定宽度，同时仍然允许输入元素是内联的。这就是我期望它出现的方式：

名字 [输入字段]

为什么在这种情况下为标签添加固定宽度不允许两个元素内联显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:10:37.177

尽管您的版本在语义上是正确的，但您必须这样做才能获得所需的行为：

HTML

```
<form>
  <label for="first_name">First Name</label><input type="text" name="first_name" id="first_name" size="30" maxlength="30"/>
</form> 
```

CSS

```
label {
  display:inline-block;
  width:75px;
  cursor: pointer;
 } 
```

[小提琴](http://jsfiddle.net/v2Wnj/)

这样，the`label`和 the`input`彼此分离，可以自由流动。如果`label`持有`input`，则情况并非如此；即使设置`label`为`display: inline-block`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:13:30.453

您的标签包含输入。对于没有自动换行的文本和输入，75px 可能不够宽

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T12:12:07.833

这对我有用：让它显示：内联

```
 <style type="text/css">
    label { display:inline; width:75px }
    </style> 
```

# loops - 方案 - 为什么内存终止？

> ID：14686476
> 
> 赞同：0
> 
> 时间：2013-02-04T12:07:45.040
> 
> 标签：loops, scheme

有 3 个程序我试图了解堆栈和堆中发生了什么。都是无限循环

1.

```
 (let ((f (lambda () 'ok))
        (g (lambda (a b) (a a b))))
           (g g f)) 
```

所有应用程序都是尾递归 - 堆栈是好的。只创建了 2 个 lambda - 所以堆没问题。我对吗？

2.

```
 (let ((f (lambda (a b)
               (a a (lambda () 'ok)))))
     (f f (lambda () 'ok))) 
```

所有的应用程序都是尾递归 - 堆栈是好的。关于堆：创建了无限的 lambda (lambda () 'ok))。我对吗？- 那么为什么内存没有被终止呢？

最后一个：

3.

```
 (let ((f (lambda (a b)
                (a a (lambda () (b))))))
       (f f (lambda () 'ok))) 
```

2和3有什么区别？为什么在 2 内存终止？如果我underdatnd正确，在3后一个循环：

```
 we activate this: (lambda (a b)  (a a (lambda () (b)))
 on                (lambda (a b)  (a a (lambda () (b)))
 and this          (lambda () 'ok)  (becuse this is (b)..) 
```

这和2一样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:16:40.470

在智能编译器中，案例 1 和案例 2 是等价的。即使没有智能编译器，因此每次都会重新创建 lambda，案例 2 可能会创建无限数量的 lambda，但它们会立即被垃圾回收。所以结果是一样的：常量栈和堆使用。

在案例 3 中，每个新的 lambda 都包含对前一个 lambda 的自由引用，因此所创建的 lambda 都不是可垃圾回收的。您仍然有恒定的堆栈使用量，但堆使用量会激增。（一个非常聪明的编译器可以找出 lambda 实际上是未使用的，并完全消除它，但我关于自由引用的一般观点是成立的。）

如果编译器可以证明它已经是一个 nullary( `(lambda () (b))`-only ) 过程，和/或如果它可以证明生成的 lambda 只会以 nullary 方式调用（否则，它必须添加类型和arity 检查器）。同样，为了将其应用于您的示例，它需要一个非常智能的编译器。`b``b`

# java - 有条件地将特定天数添加到当前日期？

> ID：14686481
> 
> 赞同：0
> 
> 时间：2013-02-04T12:08:09.220
> 
> 标签：java, algorithm

所以问题是我从服务器获得了一个日期，我想根据当前日期和我从服务器获得的日期之间的差异添加特定的日期。

> 服务器日期 - 当前日期

**工作：**这就是我计算天数差异的方式，

```
String s=formater.format(currentDate);
long d1 = formater.parse(s).getTime();
long d2=formater.parse(serverDate).getTime();
int totaldays=(int)Math.abs((d1-d2)/(1000*60*60*24)); 
```

**工作：要添加一个从当前日期起 5 天的日期，**

```
 if(totaldays==5)
        {
        Calendar c=Calendar.getInstance();
        c.add(Calendar.DATE, 0);
        System.out.println("value of new server date "+c.getTime());
        }

   else if(totaldays==4)
        {
        Calendar c=Calendar.getInstance();
        c.add(Calendar.DATE, 1);
        System.out.println("value of new server date "+c.getTime());
        }

else if(totaldays==3)
        {
        Calendar c=Calendar.getInstance();
        c.add(Calendar.DATE, 2);
        System.out.println("value of date "+c.getTime());
        }

else if(totaldays==2)
        {
        Calendar c=Calendar.getInstance();
        c.add(Calendar.DATE, 3);
        System.out.println("value of new server date "+c.getTime());
        }

else if(totaldays==1)
        {
        Calendar c=Calendar.getInstance();
        c.add(Calendar.DATE, 4);
        System.out.println("value of new server date "+c.getTime());
        }

else if(totaldays==0)
            {
            Calendar c=Calendar.getInstance();
            c.add(Calendar.DATE, 0);
            System.out.println("value of new server date "+c.getTime());
            } 
```

**最终：**我可能需要修改这个用例**，总天数的差异很大**，所以在这种情况下，我需要增加比较次数，或者有什么技巧可以用来达到特定日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:16:11.797

例如，使用名为 MAX 的变量。在你的代码中应该像

```
int max = 5; 
```

然后你可以这样做：

```
c.add(Calendar.DATE, max - totaldays); 
```

或者

```
c.add(Calendar.DATE, 5 - totaldays); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:32:13.867

好的，从问题的评论中，我尝试重新表述一下要求：

`totaldays`(gap) 是和之间的`serverDate`差`currentDate`

*   如果gap<5，则使gap变为5
*   如果gap=5，什么都不做
*   如果 gap>5，则将 gap 添加到 serverDate

如果上面写的是真的

*   1、计算`totaldays`

那么一行就可以解决你的问题：

```
c.add(Calendar.DATE, totaldays>5?totaldays:5-totaldays); 
```

顺便说一句，您应该清楚地描述您在问题中需要什么。祝你好运！

# wpf - 焦点未设置在菜单项上

> ID：14686487
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:08:24.040
> 
> 标签：wpf, user-controls, focus, menuitem

我的视图上有一个菜单。当专注于菜单时按`F1`。这`F1`将打开一个浏览器页面。现在关闭浏览器。关闭浏览器后焦点不显示在菜单上。焦点仍应保留在菜单上，但在按下选项卡后会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:13:27.603

这只是 Windows 焦点系统的特性。焦点首先设置在那个“窗口”上。如果您想专注于菜单，请尝试`GotFocus`root 上的事件`<Window>`。

# android - getWindow setBackgroundDrawable Color.TRANSPARENT 使背景变黑

> ID：14686489
> 
> 赞同：2
> 
> 时间：2013-02-04T12:08:28.723
> 
> 标签：android, android-layout, colors, android-fragments, transparent

我有一个具有以下结构的活动

```
/////////////////////
/      Header       /
/////////////////////

/      Content      /

/////////////////////
/      Footer       /
///////////////////// 
```

内容部分在具有相同设计的新 Activity 中打开一个片段，我想做的是使这个片段透明以便能够在以前的 Activity 中显示该片段

我在第二个活动中尝试了这行代码，但它给了我一个黑色背景

```
getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT)); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:19:30.640

默认情况下，Android 活动是不透明的，您可以通过将此**主题**放在您想要透明的活动的清单中来做到这一点：

```
<activity
        android:name="com.blah.example"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" >
</activity> 
```

# objective-c - Objective C 发布变量和文件

> ID：14686491
> 
> 赞同：1
> 
> 时间：2013-02-04T12:08:31.033
> 
> 标签：objective-c, xcode, ios6, nsmutableurlrequest

我正在尝试在目标 c 中编写一个方法/函数以将数据发布到在线 php 脚本。一切顺利，它成功上传了我提供的尽可能多的文件，但我无法弄清楚将变量与这些文件一起发送。我现在已经花了几个小时浏览这个站点，但我找不到发布文件和变量的示例。

```
NSURL * postURL = [NSURL URLWithString:serverURL];
NSString * contentBoundary = @"-14737809831466499882746641449";
NSString * contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", contentBoundary];

// Build Request
NSMutableURLRequest * urlRequest = [NSMutableURLRequest requestWithURL:postURL];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData * postBody = [NSMutableData data];

NSMutableString * postString = [NSMutableString stringWithFormat:@""];
for(NSString * key in dataArray) [postString appendString:[NSString stringWithFormat:@"%@=%@&", key, [dataArray objectForKey:key]]];
[postString deleteCharactersInRange:NSMakeRange([postString length] -1, 1)]; // Trim trailing ampersand from string
NSData * postData = [postString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO];

[postBody appendData:[NSData dataWithData:postData]];

if(attachments != nil){
    for(NSString * filePath in attachments){
        NSString * fileName = [filePath lastPathComponent];
        NSData * attachedFile = [NSData dataWithContentsOfFile:filePath];
        [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", contentBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition:form-data;name=\"userfile[]\"; filename=\"%@\"\r\n", fileName] dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody appendData:[[NSString stringWithFormat:@"Content-Type:application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [postBody appendData:[NSData dataWithData:attachedFile]];
        [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", contentBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    }
}

NSString * postLength = [NSString stringWithFormat:@"%d", [postBody length]];
[urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
[urlRequest setHTTPBody:postBody]; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:18:45.930

您可以尝试通过以下方式将变量的值附加到发布的数据中：

```
// text parameter
    [postbody appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"applicationId\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    NSString *parameterValue1=[dict objectForKey:@"applicationId"];
    [postbody appendData:[parameterValue1 dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

希望这对你有用。以上代码只是文件上传时发送的参数示例。

# xcode - Xcode 和保存版本

> ID：14686495
> 
> 赞同：0
> 
> 时间：2013-02-04T12:08:56.430
> 
> 标签：xcode, multiple-versions

我对 Xcode 相对较新（我在 Lion 上使用 4.5.2）并且一直在努力寻找一种方法来做大多数应用程序中简单的事情，即用新名称保存项目的当前版本，以便如果它工作得更好，我可以退回到以前的版本。

我尝试使用快照功能，然后当我使用恢复快照选项时，我没有取回我正在恢复的快照中存在的代码。那么快照到底包括什么？无论如何，我如何才能实现这个看似简单的目标，即能够返回到项目的先前版本？

谢谢

# ruby-on-rails - 如何使用 DatabaseCleaner[:active_record].strategy = :transaction with selenium

> ID：14686499
> 
> 赞同：3
> 
> 时间：2013-02-04T12:09:11.780
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara

我已经编写了黄瓜测试用例，现在我需要回滚数据库而不是现有数据库。我已经使用 selenium web-driver 和 capybara 2.0.2。当我尝试过：

```
DatabaseCleaner[:active_record].strategy = :truncation 
```

它被删除了我的mysql表的所有记录。后来我改变了这是通过：

```
 DatabaseCleaner[:active_record].strategy = :transaction 
```

但这不是滚动数据库。

我的 database.rb 是：

```
require 'active_record'
require 'database_cleaner'
require 'database_cleaner/cucumber'

ActiveRecord::Base.establish_connection(
    :adapter => 'mysql2',
    :database => 'aq_test',
    :username => 'root',
    :password => 'manager'  )

class ActiveRecord::Base
    mattr_accessor :shared_connection
    @@shared_connection = nil

    def self.connection
        @@shared_connection || retrieve_connection
    end
end
ActiveRecord::Base.shared_connection = ActiveRecord::Base.connection
DatabaseCleaner[:active_record].strategy = :transaction 
```

但这也不是回滚数据库注意：我只想回滚由测试用例运行的最后一个事务

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:36:44.663

[database_cleaner](https://github.com/bmabey/database_cleaner) github页面说将该代码放入您的`features/support/database_cleaner.rb`文件中：

```
begin
  require 'database_cleaner'
  require 'database_cleaner/cucumber'

  DatabaseCleaner.strategy = :truncation
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

Before do
  DatabaseCleaner.start
end

After do |scenario|
  DatabaseCleaner.clean
end 
```

# c++ - 使用 Select() cpp 跟踪客户数据需求

> ID：14686508
> 
> 赞同：0
> 
> 时间：2013-02-04T12:09:37.647
> 
> 标签：c++, sockets, select, winsock2

首先，我对 C++ 还是很陌生。我正在尝试编写一个 GNSS 互联网广播播客程序。基本上，当客户端登录并被接受时，我的程序将客户端请求的数据流源存储在客户端类中。我打算使用两个数组的索引号来匹配一个 Client 对象数组和一个 clientSockets 数组，但是尝试使用 Select() 检查非阻塞套接字会使事情变得复杂。我找到了一些实现 Select() 的示例，但我不确定如何从我用来接受来自 listenSocket 的连接的数组中跟踪原始 clientSocket。

```
 class Client{
            public:
            std::string  source;
            std::string  user;   //stored in txt file as name:password
            boolean      connected;
            int          IndexNumber;

    };
typedef struct _MYSOCKET_INFORMATION{
  char Buffer[BUFFERSIZE];
  WSABUF DataBuf;
  SOCKET Socket;
  DWORD SendBytes;
  DWORD RecvBytes;
}SOCKET_INFORMATION, *LPSOCKET_INFORMATION;
// creates number of objects of this structure
LPSOCKET_INFORMATION SocketList[NUMBER_CLIENTS];

FD_SET Writer;
FD_SET Reader;
DWORD TotalSockets = 0;
DWORD Flags;
u_long NonBlock = 1;
timeval tv;
long tv_sec = 1;
long tv_usec = 0;
//intiate objects
Caster caster;
DataStream datastream[NUMBER_BASES]; //100 base stations max
Client client[NUMBER_CLIENTS];
SOCKET listenSocket;
SOCKET clientSocket[NUMBER_CLIENTS];
SOCKET serverSocket;
char recvArray[BUFFERSIZE];
using namespace std;
int main()
{
//initialize the Read and Write socket sets
    FD_ZERO(&Reader);
    FD_ZERO(&Writer);
    //check for connection attempt
    FD_SET(listenSocket, &Reader);
    FD_SET(serverSocket, &Reader);
    //set read and write state based on state of buffer

    for( unsigned int i=0; i<TotalSockets; i++){
        if( SocketList[i]->RecvBytes < SocketList[i]->SendBytes){
            FD_SET(SocketList[i]->Socket,&Writer);
        }
        else{
            FD_SET(SocketList[i]->Socket,&Reader);
        }
    }

    //Select returns number of sockets ready to be read/writen
    Total = select(0, &Reader, &Writer, NULL, &tv);
    if(Total == SOCKET_ERROR){
        printf("Error select function %d\n", WSAGetLastError());
        return 1;
    }
if( FD_ISSET(listenSocket, &Reader)){
        Total--;
        //set current client no
        while(client[current].connected == true){
            current++;
            if(current >= NUMBER_CLIENTS){
                current = 0;
                count++;
                if(count >= 2){//has cylcled twice all must be set to true, can add no more.
                    count =0;
                    printf("client limit reached.\n");
                    break;
                }
            }
        }
        clientSocket[current] = accept(listenSocket, NULL, NULL); //setup client connection for further use
        if( clientSocket[current] != INVALID_SOCKET){
        //set new client to non blocking
            check = ioctlsocket(clientSocket[current], FIONBIO, &NonBlock);
            if( check == SOCKET_ERROR){
                printf("Error setting client to nonblocking mode. %d.\n", WSAGetLastError());
                closesocket(clientSocket[current]);
                continue;
            }
            else{
                printf("Accepted client connection request \n");
            //recieve data
                check = recv(clientSocket[current], recvArray, BUFFERSIZE, 0);
                if( check == SOCKET_ERROR){  //close connection if error
                    printf("error recieving login data. %d \n", WSAGetLastError());
                    closesocket(clientSocket[current]);
                    continue;
                }
                if( check == 0){//no data is recieved then client disconnected
                    printf("ERROR no data, client dsiconnected.\n");
                    closesocket(clientSocket[current]);
                    continue;
                }
                else{

                    for(int n=0; n<check +1 ; n++){    //must be request message for data per NTRIP 1.0
                        clientRequest << recvArray[n]; //place read char bytes into stringstream object for parsing.
                    }
                    //if request is good returns a client requested source, username, and true false for data send.
                    checkClientRequest(clientSocket[current], client[current].source, client[current].connected, client[current].user);

                }
            }
        }
    }//end of check client listen socket
for(unsigned int i=0; Total>0 && i<TotalSockets; i++){
        LPSOCKET_INFORMATION SocketInfo = SocketList[i];
        //check if client sends GGA string
        if(FD_ISSET(SocketInfo->Socket, &Reader)){
            Total--;
            SocketInfo->DataBuf.buf = SocketInfo->Buffer;
            SocketInfo->DataBuf.len = BUFFERSIZE;
            Flags = 0;
            SocketInfo->RecvBytes = sizeof(SocketInfo->DataBuf);
            check = WSARecv(SocketInfo->Socket, &(SocketInfo->DataBuf), 1, &(SocketInfo->RecvBytes), &Flags, NULL, NULL);
            if( check == SOCKET_ERROR){
                FreeSocketInformation(i); //shuts down client socket if socket error
                continue;
            }
            else{
            memcpy(recvArray, SocketInfo->DataBuf.buf, SocketInfo->RecvBytes +1);
            //print data on screen change to sort lines
            printf("%s \n", SocketInfo->DataBuf.buf);
            }
        } 
```

它不仅限于此，但如何使用我的 clientSocket[] 跟踪结构 SocketInfo？

# scala - 在随机端口上选择远程参与者

> ID：14686509
> 
> 赞同：1
> 
> 时间：2013-02-04T12:09:42.153
> 
> 标签：scala, networking, port, actor, remoteobject

在 Scala 中，如果我使用 alive(0) 注册一个远程演员，该演员将在一个随机端口注册。我可以像这样进行注册： register('fooParActor, self) 在 act 方法中。

现在，在主服务器端，我可以通过提供端口来选择参与者。我是否需要手动扫描端口才能使用随机端口？

我要解决的问题是在一个节点上创建 n 个参与者，然后在主/服务器程序中选择它们，例如在节点 x 上启动 10 个从节点，并在节点 y 上获取 10 个远程参与者的列表。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:39:26.793

无需为演员注册各种端口。相反，您需要一个用于整个 actor 系统的端口——更准确地说是 akka 内核（服务器也需要知道）。有关所有这些如何详细工作，请参阅文档的[此页面。](http://doc.akka.io/docs/akka/2.1.0/scala/remoting.html)

为了选择一个远程actor，你可以通过它在远程actor系统中的路径来查找它，类似于这样：

```
context.actorFor("akka://actorSystemName@10.0.0.1:2552/user/someActorName/1") 
```

在这种情况下，您将创建`n`演员作为演员的孩子，并为`someActorName`他们命名（这样您就可以通过 获取其他演员，依此类推）。`1``n``.../someActorName/2``.../someActorName/3`

这里根本不需要随机化任何东西，鉴于您描述问题的方式，也不需要在其中进行随机化。您只需启动 10 个演员并将他们从 1 到 10 编号。任何随机数字只会使事情变得不必要地复杂化。

至于真正随机的端口，我只能同意 sourcedelica。您需要一个固定端口来与随机端口或其他一些通信方式进行通信。如果有人由于随机端口而不知道在哪里进行通信，那它根本就行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:18:03.210

您需要至少有一个具有众所周知端口的 ActorSystem。然后其他 ActorSystems 可以使用端口 0 让 Akka 分配一个随机端口。slave ActorSystems 将让 Actor 向 Master 上的 Actor 注册，因此它知道所有远程系统。

如果您绝对需要让您的主服务器使用随机端口，它将需要带外通信其端口（使用共享文件系统或数据库）。

# x86 - 在 x86 汇编编码中输入任何新函数时，堆栈指针地址是否必须被 8 整除？

> ID：14686511
> 
> 赞同：0
> 
> 时间：2013-02-04T12:09:43.543
> 
> 标签：x86

我对arm处理器使用了汇编编程，我观察到应用程序中有一些崩溃，而堆栈指针不能被8整除。当你输入一个新函数时，X86处理器是否也需要一个能被8整除的堆栈指针

os-windowsxp/7 arch- 80386 及以上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:18:22.543

x86 CPU 将在堆栈指针不是机器字的倍数的情况下正常工作（除了可能的性能影响），除非启用对齐检查功能，在这种情况下，所有未对齐的内存访问都会导致异常 (#AC) .

# c++ - 派生类构造函数中的数据驱动标志设置

> ID：14686520
> 
> 赞同：1
> 
> 时间：2013-02-04T12:10:11.110
> 
> 标签：c++, design-patterns, data-driven

假设我有一个基类，其中有一个标志，派生类必须设置：

```
struct Base
{
    bool flag;
    Base(bool flag):flag(flag) {}
}; 
```

我想以数据驱动的方式配置哪些派生类将标志设置为`true`/ `false`- 即我想从标题中配置它。

```
struct Derived1 : Base
{
    Derived1() : Base( expr ) {}
}; 
```

*能够从标题中获取信息的东西*（还不知道是什么）在哪里 - 判断`expr`应该是真还是假。理想情况下，如果我创建一个新的派生类但未能在标头中指定标志，我会收到错误消息，但这不是强制性的。这样我可以只修改一个中心位置来进行更改。*`Derived1``flag`*

 *什么是惯用的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:19:16.803

使用单个函数的替代版本可能更紧凑：

```
struct Derived1 : Base
{
    Derived1() : Base(theFlag(this)) {}
}; 
```

然后在标题中：

```
template <typename T>
bool theFlag(T*)
{
   if (typeid(T) == typeid(Derived1)) return true;
   if (typeid(T) == typeid(Derived2)) return false;
   if (typeid(T) == typeid(Derived3)) return true;

   throw std::runtime_error("No theFlag is given for this type");
} 
```

如果您与编译时检查结婚，那么您能做的最好的事情就是引入一些重复：

```
template <typename T>
bool theFlag(T*)
{
   static_assert(
      std::is_same<T, Derived1>::value ||
      std::is_same<T, Derived2>::value ||
      std::is_same<T, Derived3>::value,
      "No theFlag is given for this type"
   );

   if (typeid(T) == typeid(Derived1)) return true;
   if (typeid(T) == typeid(Derived2)) return false;
   if (typeid(T) == typeid(Derived3)) return true;
} 
```

`theFlag`这基本上依赖于 SFINAE -如果您使用不受支持的参数调用它，编译器将无法找到重载，本质上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:15:25.273

你可以写：

```
struct Derived1 : Base
{
    Derived1() : Base(Concept<Derived1>::theFlag) {}
}; 
```

您的标题可能具有以下内容：

```
template <typename T>
struct Concept
{};

template <>
struct Concept<Derived1>
{
   static const bool theFlag = true;
}; 
```

为每种类型重复专业化。

这是你的意思吗？当您没有为 some 提供标志值时，编译将失败`DerivedN`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T13:49:51.583

我会为标志编写一个特征类并使用宏来定义特化：

```
#include <type_traits>

template<typename T>
struct FlagTrait {
    static_assert(std::is_void<T>::value, "No flag defined for this type.");
};

#define DEFINE_FLAG(Type, Val)               \
        template<>                           \
        struct FlagTrait<class Type>         \
            : std::integral_constant<bool, Val> {};

template<typename T>
constexpr bool getFlag(T) { return FlagTrait<T>::value; }

#define GET_FLAG getFlag(*this) 
```

现在，我们需要为每个新的派生类添加一行，其中包含类名和标志值：

```
DEFINE_FLAG(Derived1, true)
DEFINE_FLAG(Derived2, false) 
```

用法：

```
struct Base
{
    bool flag;
    Base(bool flag):flag(flag) {}
};

struct Derived1 : Base
{
    Derived1() : Base(GET_FLAG) {}
};

struct Derived2 : Base
{
     Derived2() : Base(GET_FLAG) {}
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T12:29:14.787

这是一个纯编译时解决方案：

```
struct Derived1 ;
struct Derived2 ;
template <typename Derived> struct Bootstrap
{
    bool init(Derived1 *) { return true ; }
    bool init(Derived2 *) { return false ; }
    Bootstrap():flag(init(static_cast<Derived *>(this))){}
    bool flag ;
};
struct Derived1: public Bootstrap <Derived1> {};
struct Derived2: public Bootstrap <Derived2> {};
int main()
{
    Derived1 d1 ;
    Derived2 d2 ;
    std::cout<<d1.flag<<" "<<d2.flag<<std::endl ;
    return 0 ;
} 
```

**编辑**

正如“轨道中的亮度竞赛”所指出的，ctor 过程中的 static_cast 可能会导致未定义的行为 (UB)。这是一个更新的实现，它不需要 static_cast 运算符：

```
#include <iostream>
struct Derived1 ;
struct Derived2 ;
namespace BootstrapDetail
{
    template <typename Identifier> bool init();
    template <> bool init <Derived1>() { return true ; }
    template <> bool init <Derived2>() { return false ; }
}
template <typename Derived> struct Bootstrap
{
    Bootstrap(): flag(BootstrapDetail::init<Derived>()) {}
    bool flag ;
};
struct Derived1: public Bootstrap <Derived1> {};
struct Derived2: public Bootstrap <Derived2> {};
int main()
{
    Derived1 d1 ;
    Derived2 d2 ;
    std::cout<<d1.flag<<" "<<d2.flag<<std::endl ;
    return 0 ;
} 
```*

# bash - 执行 postinst bash 脚本时 deb 包失败

> ID：14686521
> 
> 赞同：0
> 
> 时间：2013-02-04T12:10:16.843
> 
> 标签：bash, debian, dpkg

我为 nagios 自定义插件和配置制作了一个 bash 脚本，为了简单起见，我使用 equivs

这是我的控制文件。

在 Files: section 中，我告诉文件将自己复制到正确的路径。

```
Files: check_cpu_loadx /usr/lib/nagios/plugins
 check_ipmi_sensors /usr/lib/nagios/plugins
 check_libreoffice_count /usr/lib/nagios/plugins
 check_ram_per_user /usr/lib/nagios/plugins
 check_ram_usage2 /usr/lib/nagios/plugins
 check_ram_usage_percentage /usr/lib/nagios/plugins
 check_tcptraffic /usr/lib/nagios/plugins
 nrpe_custom.cfg /etc/nagios 
```

在 postinst 部分，它是一个用于安装后的 bash 脚本

```
 File: postinst
     #!/bin/bash -e
     set -x
     echo 'configuring nrpe.conf file.'
     mv /etc/nagios/nrpe.cfg /etc/nagios/nrpe.original.backup
     mv /etc/nagios/nrpe_custom.cfg /etc/nagios/nrpe.cfg
     chmod -R +x /usr/lib/nagios/plugins
     echo 'Installing tcp-ip addon..'
     FLAG=0
     Interfaces=`ifconfig -a | grep -o -e "[a-z][a-z]*[0-9]*[ ]*Link" | perl -pe "s|^([a-z]*[0-9]*)[ ]*Link|\1|"`
     for Interface in $Interfaces; do
        INET=`ifconfig $Interface | grep -o -e "inet addr:[^ ]*" | grep -o -e "[^:]*$"`
        MASK=`ifconfig $Interface | grep -o -e "Mask:[^ ]*"      | grep -o -e "[^:]*$"`
        STATUS="up"
        #loopback
        if [ "$Interface" == "lo" ]; then
            continue
        fi
        #if eth is down
        if [ -z "$INET" ]; then
            continue
        fi
         #if eth ip not starts with 10\. or 192.
        if [[ "$INET" == 10.* ]]
        then
            ActiveEth=$Interface;
            break
        elif [[ "$INET" == 192.* ]]
        then
        ActiveEth=$Interface;
            break
        else
            echo "Ethernet Selection Failed!Configure nrpe.cfg manually.Change tcp_traffic plugin paramethers according to your current ethernet.";
            FLAG=1
            break
        fi    
     done
     if [[ "$FLAG" == 0 ]]
     then
         echo 'Selected Ethernet :'$ActiveEth
         sed -i -e "s/eth0/$ActiveEth/g" /etc/nagios/nrpe.cfg
     fi
     echo 'nrpe.conf changed.'
     echo 'Nagios-nrpe-server restarting.'
     service nagios-nrpe-server restart
     echo 'IPMI modules are loading.'
     modprobe ipmi_devintf
     modprobe ipmi_msghandler
     echo "IPMI modules are added to startup."
     #echo "ipmi_si" >> /etc/modules
     echo "ipmi_devintf" >> /etc/modules
     echo "ipmi_msghandler" >> /etc/modules 
```

这里的问题，当我将它编译为 deb 包时，我得到**“子进程安装后安装脚本返回错误退出状态 1”**

然后我添加了 set -x 进行调试。问题是用于配置 tcp-ip 插件，有些机器有不止一个以太网卡。所以我需要选择一个 ip 以 10.* 开头的机器。 192.*

在第二部分中，有一行 **INET=`ifconfig $Interface | grep -o -e "inet addr:[^ ]*" | grep -o -e "[^:]*$"`** 当以太网设备没有 ip 时，grep 返回 null 并且 INET 变量变为 null ，这就是为什么进程退出状态为 1\. 在该行之后，当我输入“$？” , 它说 1

所以这里的问题是，当我运行 dpkg -i 来安装该软件包时，bash 脚本在看到 INET 变为空后退出。

任何帮助，将不胜感激。我对这个 bash 事情很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:43:34.450

如果您想确保 bash 命令始终*成功*，即使最后一个程序给出非空返回值，只需添加一个“最后一个”命令即可成功。

就像是

```
INET=$(/sbin/ifconfig eth0 | grep -o -e "inet addr:[^ ]*" | grep -o -e "[^:]*$" || true) 
```

在这里我们调用`true`（一个总是成功的小程序），每当`grep`失败时（`||`意味着`OR`并且是一种根据前一个退出状态链接程序的方法）

但是，您的脚本有许多缺陷：

*   您的 grep 表达式“inet addr:”只会在英语语言环境中给出正确的结果；例如，在德语环境中运行时 ( `LANG=de`)，您可能会得到类似`inet Adresse: 192.168.7.10`(原文如此！)
*   您正在无条件地移动文件；如果这些文件不存在会怎样？
*   您正在无条件地将文件移动到`/etc`. `/etc`是系统管理员根据需要调整系统的地方；您不得删除或恢复系统管理员的配置。您应该记录如何正确配置系统（以便系统管理员可以自己完成）；如果你坚持通过自动配置系统来“帮助”，你应该使用像[debconf这样的东西](http://www.fifi.org/doc/debconf-doc/tutorial.html)
*   您假设安装了很多软件，并且该软件在您的路径中。您可能应该使用您正在使用的二进制文件的完全限定路径，例如，`/sbin/ifconfig`而不仅仅是`ifconfig`

# javascript - 点击时的Jquery动画，在多次点击时停止重复

> ID：14686522
> 
> 赞同：0
> 
> 时间：2013-02-04T12:10:24.107
> 
> 标签：javascript, jquery

我有这样的代码：

```
$("#ajax_stuff").load("/site/method", $('.myselector').serializeArray()).delay(100).fadeOut('slow').delay(20).fadeIn('slow'); 
```

基本上，每次有人单击复选框列表中的复选框时都会触发该事件。如果有人快速连续点击 20 个复选框，效果会重复 20 次。

理想情况下，我只希望它为他们单击的最后一个框做一个效果，然后停止。

我试过了

```
$("#ajax_stuff").load("/site/method", $('.myselector').serializeArray()).stop(true,true).delay(100).fadeOut('slow').delay(20).fadeIn('slow'); 
```

但这似乎没有任何作用。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:19:53.607

```
var delay = (function () {
 var timer = 0;
 return function(callback, ms){
 clearTimeout (timer);
 timer = setTimeout(callback, ms);
      };
    })();
$(function(){
    $("/*CHECKBOX SELECTOR*/").on("click",function(){
        delay((function(){
                      $("#ajax_stuff").load("/site/method", $('.myselector').serializeArray()).stop(true,true).delay(100).fadeOut('slow').delay(20).fadeIn('slow');}),1000);
});
}); 
```

我认为，在这种情况下，setTimeout 是您的朋友。我没有在单击复选框时使用它，但是您可能必须将事件处理程序从单击更改为选择或其他内容。我刚才试着把它放进去`jsfiddle`，但它可能已经崩溃了？无论如何都不加载。

# ember.js - 如何修改 ember-data 的 REST 适配器生成的 url？

> ID：14686527
> 
> 赞同：2
> 
> 时间：2013-02-04T12:10:53.500
> 
> 标签：ember.js, ember-data

我可以使用以下方法解释多元化：

```
DS.RESTAdapter.configure("plurals", {
  query: "queries"
}); 
```

但是我需要将“.json”附加到正在生成的所有路由上，因为如果不发生这种情况，我正在使用的 API 会引发错误。努力寻找有关 ember-data 的文档，最好的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T12:29:32.103

您可以覆盖`buildURL`适配器的方法，例如：

```
App.Adapter = DS.RESTAdapter.extend({
    buildURL: function(record, suffix) {
      return this._super(record,suffix) + '.json'
    }
}); 
```

请参阅[此小提琴](http://jsfiddle.net/adriencoquio/MtbuR/)以获取实时示例。

# javascript - 重新加载 div 内容并对表格元素进行排序

> ID：14686529
> 
> 赞同：0
> 
> 时间：2013-02-04T12:11:00.623
> 
> 标签：javascript, jquery, ajax, sorttable.js

我可以使用 ajax 重新加载 div 内容，但无法对表格内容进行排序。`sorttable.js`使用 ajax 重新加载 div 后无法正常工作。

我浪费了很多时间来寻找解决方案。请任何人建议我如何重新加载 div 内容并对表格进行排序。

```
xmlHttp.onreadystatechange = function(){ 
    if(xmlHttp.readyState==4){ 
        document.getElementById('displayarea').innerHTML = xmlHttp.responseText;
        setTimeout('AutoRefreshValid()',75*1000); // JavaScript function calls AutoRefresh() every 75 seconds 
    } 
} 

xmlHttp.open("GET","RPT_STATUS_AJAX_DIV_REAL_ADMIN.jsp?order=<%=strOrder%>&Order‌​By=<%=strOrderBy%>",true); 

xmlHttp.send(null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:28:45.330

当您的 ajax 调用完成时，请重新调用您的 sortable 函数。下面给出一个简单的原型。

```
$.ajax({
  url: 'your_url',
  success:function(resp) {
    // put content in div

    $('element').sortable();
  }
}); 
```

# php - PHP - 如果数字可以被 3 和 5 整除，则回显

> ID：14686533
> 
> 赞同：17
> 
> 时间：2013-02-04T12:11:30.377
> 
> 标签：php, math

我是 PHP 新手，并尝试创建以下内容，同时尽量减少所需的代码量。PHP 应该显示 100 的列表，如果数字是 /，则显示 3、5 或 3 和 5。如果不是，则不显示任何内容。

这是我到目前为止所得到的，但是任何帮助都会很棒，因为不确定 / by 3 和 5 位，如下所示。

```
<?php $var = range(0, 100); ?>
  <table>
<?php foreach ($var as &$number) {
 echo " <tr>
    <td>$number</td>
    <td>";

    if($number % 3 == 0)  {
    echo "BY3";
} elseif ($number % 5 == 0) {
    echo "BY5";
} elseif ($number % 3 and 5 == 0) {
        echo "BY3 AND 5";
}
 echo "</td></tr>";
}
?>

  </table> 
```

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-04T12:21:17.190

不...您应该首先检查它是否可被 15 (3x5)（或 3 和 5）整除，然后您可以进行其他检查：

```
if($number % 15 == 0)  {
    echo "BY3 AND 5";
} elseif ($number % 5 == 0) {
    echo "BY5";
} elseif ($number % 3 == 0) {
    echo "BY3";
}
 echo "</td></tr>";

?> 
```

因为每个可以被 15 整除的数字也可以被 3 和 5 整除。所以你的最后一次检查永远不会命中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T12:14:07.917

如果我正确阅读了您的问题，那么您正在寻找：

```
if ($number % 3 == 0 && $number %5 == 0) {
        echo "BY3 AND 5";
} elseif ($number % 3 == 0)  {
    echo "BY3";
} elseif ($number % 5 == 0) {
    echo "BY5";
} 
```

替代版本：

```
echo ($number % 3 ? ($number % 5 ? "BY3 and 5" : "BY 3") : ($number % 5 ? "BY 5" : "")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-16T10:46:34.737

```
$num_count = 100;
    $div_3 = "Divisible by 3";
    $div_5 = "Divisible by 5";
    $div_both = "Divisible by 3 and 5";
    $not_div = "Not Divisible by 3 or 5";

    for($i=0;$i<=$num_count;$i++)
    {
        switch($i)
        {
            case ($i%15==0):
            echo $i." (".$div_both.")</br>";
            break;
            case ($i%3==0):
            echo $i." (".$div_3.")</br>";
            break;
            case ($i%5==0):
            echo $i." (".$div_5.")</br>";
            break;
            default:
            echo $i."</br>";
            break;
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-02T21:30:07.370

无需执行三个 if 语句：

```
echo "<table border='1'>";

for ($i = 1; $i <= 100; $i++) {

    echo "<tr><td>{$i}</td><td>";

    if ($i % 3 == 0) echo "BY3 ";
    if ($i % 5 == 0) echo "BY5";

    echo "</td></tr>\n";
}
echo "</table>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T12:16:25.243

更新代码如下

```
<?php $var = range(0, 100); ?>
<table>
<?php foreach ($var as &$number)
{
echo " <tr>
<td>$number</td>
<td>";

if($number % 3 == 0 &&  $number % 5 == 0) 
{
   echo "BY3 AND 5";
} 
elseif ($number % 5 == 0) 
{
echo "BY5";
}
elseif ($number % 3 == 0) 
{
    echo "BY3";
}
echo "</td></tr>";
}
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T12:22:49.140

```
<?php

if($number % 5 == 0 && $number % 3 == 0)  {
    echo "BY3 AND 5";
} elseif ($number % 5 == 0) {
    echo "BY5";
} elseif ($number % 3 == 0) {
    echo "BY3";
} else{
    echo "NOT BY3 OR 5";
}   
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-04T12:36:21.113

```
if($number % 15 == 0)  
{
     echo "Divisible by 3 and 5";
} 
elseif ($number % 5 == 0) 
{
    echo "Divisible by 5";
} 
elseif ($number % 3 == 0) 
{
 echo "Divisible by 3";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-27T09:25:14.033

这是更整洁和完整的运行：

```
<?php

for ($i = 1; $i <= 100; $i++) { 
                if ($i % 15 == 0)
                {
                    echo"Divisible by 3 and 5</br>";
                }
                elseif ($i%3==0)
                {
                    echo"Divisible by 3</br>";
                }
                elseif ($i%5==0)
                {
                    echo"Divisible by 5</br>";
                }
                else
                {
                    echo $i,"</br>";
                }

}
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-20T06:56:53.330

```
 <?php

for ($i = 1; $i <= 100; $i++) {

    if ($i % 15 == 0) echo "This Number is Divisible by 3 and 5<br>";
    else if ($i % 3 == 0) echo "This Number is Divisible by 3 only<br>";
    else if ($i % 5 == 0) echo "This number is Divisible by 5 only<br>";
    else{
        echo "$i<br>";
    }

}

   ?> 
```

# c# - 使用委托的字段设置器/获取器

> ID：14686534
> 
> 赞同：1
> 
> 时间：2013-02-04T12:11:38.900
> 
> 标签：c#, delegates, mono, field, expression-trees

这是我的简单测试代码。我想在 2 个对象之间创建字段分配链接，并且该字段是在运行时通过缓存其 setter/getter 方法的委托使用反射确定的。但是，不知何故，它不起作用。任务不工作；也许我犯了一个愚蠢的错误。我哪里错了？

```
public static class AssignmentExpression
{
    public static Expression Create(Expression left, Expression right)
    {
        MethodInfo m = typeof(AssignmentExpression)
                  .GetMethod("AssignTo", BindingFlags.NonPublic | BindingFlags.Static)
                  .MakeGenericMethod(left.Type);

        return Expression.Call( null,m,left, right);
    }

    private static void AssignTo<T>(ref T left, T right)  
    {                                                     
        left = right;                                     
    }
}

public class FieldLink
{
    protected Delegate srcGetter;
    protected Delegate dstSetter;

    public FieldLink(FieldInfo srcObject, FieldInfo dstObject)
    {
        this.srcGetter = FieldLink.createGetter(srcObject);
        this.dstSetter = FieldLink.createSetter(dstObject);
    }

    public void update<T>(T dst, T src)
    {
        this.dstSetter.DynamicInvoke(dst, this.srcGetter.DynamicInvoke(src));
    }

    protected static Delegate createGetter(FieldInfo field)
    {
        ParameterExpression objParm = Expression.Parameter(field.DeclaringType, "obj");
        Type delegateType = typeof(Func<,>).MakeGenericType(field.DeclaringType, field.FieldType);
        MemberExpression fieldExpr = Expression.Field(objParm, field.Name);
        LambdaExpression lambda = Expression.Lambda(delegateType, fieldExpr, objParm);
        return lambda.Compile();
    }

    protected static Delegate createSetter(FieldInfo field)
    {
        ParameterExpression objParm = Expression.Parameter(field.DeclaringType, "obj");
        ParameterExpression valueParm = Expression.Parameter(field.FieldType, "value");
        Type delegateType = typeof(Action<,>).MakeGenericType(field.DeclaringType, field.FieldType);
        MemberExpression memberExpr = Expression.Field(objParm, field.Name);
        Expression assignExpr = AssignmentExpression.Create(memberExpr, valueParm);
        LambdaExpression lambda = Expression.Lambda(delegateType, assignExpr, objParm, valueParm);
        return lambda.Compile();
    }
}

public class Test
{
    public int fieldInt = 0;
}

public class TestClass
{
    public Test a = new Test();
    public Test b = new Test();
    public void Start()
    {
        a.fieldInt = 5;

        Debug.Log("before a = " + a.fieldInt + " b = " + b.fieldInt);
        FieldLink testLink = new FieldLink(this.a.GetType().GetField("fieldInt"),
                                           this.b.GetType().GetField("fieldInt"));
        testLink.update(this.b, this.a);
        Debug.Log("after  a = " + a.fieldInt + " b = " + b.fieldInt);
        //here a.fieldInt should be equal to b.fieldInt, but somehow its unchanged!
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:52:36.217

您的代码似乎可以正常工作，但可能并不完全符合您的预期。当您调用时，`update`您将`b.fieldInt`作为`left`参数和参数`a.fieldInt`传入`right`；然后，该`update`方法将`a.fieldInt`(5) 的值分配给该`b.fieldInt`字段，从而使两个对象的`fieldInt`值都为 5。如果反转参数，则两个字段最终都为零。这不是你所期望的吗？

顺便说一句-也许您有其他原因使用自己的`AssignmentExpression`课程-但您实际上可以替换：

```
Expression assignExpr = AssignmentExpression.Create(memberExpr, valueParm); 
```

...和：

```
Expression assignExpr = Expression.Assign(memberExpr, valueParm); 
```

...你会得到相同的结果。

# java - 内部类 Java

> ID：14686538
> 
> 赞同：0
> 
> 时间：2013-02-04T12:11:55.507
> 
> 标签：java, android

晚上好。我在获得回复方面遇到了一些麻烦。我有两个类：带有方法 get() 的 MyHttpClient 和用于响应的 String。

```
public class MyHttpClient {

private static final String BASE_URL = "http://pgu.com";
private static String response;

private static AsyncHttpClient client = new AsyncHttpClient();

 public static void get(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
      client.get(getAbsoluteUrl(url), params, responseHandler);
 }

 private static String getAbsoluteUrl(String relativeUrl) {
      return BASE_URL + relativeUrl;
  }

public static String getResponse() {
    return response;
}

public static void setResponse(String response) {
    response = response;
} 
```

}

在第二堂课中，我使用 GET 方法。Html 在 LogCat 中打印，但 setResponse 不起作用。如何获取响应字符串作为 MyHttpClient 的字段？

```
public class MyHttpClientUsage {

public MyHttpClientUsage(){

}

public void getInfoAbout() throws HttpException{

    RequestParams params = new RequestParams();
    params.put("a", "Static");
    params.put("content", "47");

    MyHttpClient.get("", params, new AsyncHttpResponseHandler(){
         @Override
            public void onSuccess(String response) {
                System.out.println(response);   
                            //Write HTML in LogCat(work) 
                MyHttpClient.setResponse(response); //doesn't work
            }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:13:30.593

您需要使用`this.response = response`in ，`MyHttpClient`因为目前您只是重置您发送到方法中的参数。

最好设置方法参数`final`以避免这种情况。

# python - Python Tkinter：将小部件添加到文件对话框

> ID：14686543
> 
> 赞同：4
> 
> 时间：2013-02-04T12:12:00.390
> 
> 标签：python, tkinter, filedialog

我正在使用`Tkinter`和`Python 2.6`编程`2.7`图形用户界面。

这些用户界面包含用于打开文件和保存`tkFileDialog`模块数据的对话框。我想调整对话框并添加一些进一步的条目小部件，例如让用户留下评论。

有没有办法这样做？

似乎文件对话框是直接取自操作系统的。`Tkinter`它们派生自模块中的 Dialog 类并`tkCommonDialog`调用`tk.call("tk_getSaveFile")`框架小部件的方法（在本例中用于保存数据）。

我找不到这个方法是在哪里定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:47:00.210

`call`方法在 中定义[`_tkinter.c`](http://fossies.org/dox/Python-2.7.3/__tkinter_8c_source.html#l01325)，但是对于您的特定任务没有什么有趣的。它只是调用一个 Tcl 命令，该命令`tk_getSaveFile`完成所有工作。

是的，当操作系统上有本机文件对话框时，*使用*`tk_getSaveFile`它们（例如`GetSaveFileName`在 Windows 上使用）。可以在那里添加小部件，但不能不篡改 Tk 的 C 源。如果您确定*您的*目标使用非本机 Tk 对话框，您可以通过`::tk::dialog::file::`从 Tk 中破解过程（请参阅 参考资料`library/tkfbox.tcl`）向其小部件层次结构添加一些内容。

我宁愿采用[tk_getSaveFile 的替代实现](http://wiki.tcl.tk/15897)，用纯 Tcl/Tk 编写，从不使用 OS 工具。这样，我们可以确保它的布局对于所有操作系统都是相同的，并且不会随着新版本的 Tk 突然改变。围绕它为 python 提供一个方便的 API 仍然远非易事，但至少，这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:05:32.470

我不得不摆脱 canvasx/y 声明。该行现在只是读取`set item [$data(canvas) find closest $x $y]`，效果很好。`$data(canvas) canvasx $x`因为它自己的作品很好，但与 无关`find closest`，如果它写成两行也不行。

# database - 数据库 dot com 数据库同步

> ID：14686551
> 
> 赞同：0
> 
> 时间：2013-02-04T12:12:30.310
> 
> 标签：database, cordova, salesforce, sync

我正在开发一个 phonegap 项目来构建一个跨平台的移动应用程序，并从一个网站上了解到可以使用“database.com”部署/构建该应用程序的数据库。该程序已得到很好的解释，但我有一个问题-

**如何将 database.com 上可用的数据库与本地服务器上的数据库同步？**

即例如，如果客户在他的本地服务器上有他的数据库（他的桌面应用程序）并且他现在需要一个相同的移动应用程序，那么在“database.com”中要遵循的过程是什么来同步他的服务器的数据库“database.com”上的数据库？

PS：我的数据库需要使用“database.com”，因为我想在云上维护它，我没有能力维护本地服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:39:34.047

如果要进行多次数据同步，您可能需要一项服务。我从事的项目正是这样做的。

[www.overcast-suite.com](http://www.overcast-suite.com)

否则，将您的表建模为 Salesforce 自定义对象，将本地服务器上的数据导出到 CVS 并使用[Data Loader](http://wiki.developerforce.com/page/Data_Loader)导入。

# sql - SQL 在提供范围列表时获取日期范围中的空白

> ID：14686553
> 
> 赞同：0
> 
> 时间：2013-02-04T12:12:36.817
> 
> 标签：sql, sql-server, date

我目前正在寻找针对以下问题的 SQL 解决方案：

[SQLFiddle](http://sqlfiddle.com/#!6/ced3c/1)作为指导：

我有一个不可为空的开始日期和可以为空的结束日期的列表。根据这个列表，我需要给定开始日期和结束日期之间的总间隔时间。

基于 SQLFiddle

如果我的数据库中只有情况 1，那么结果应该是 2 天。如果我的数据库中有情况 2 和 3，结果应该是 1 天。

我已经考虑了几天了......任何帮助将不胜感激！

问候，基尔

注意：我正在运行 SQL 2012（是否需要任何特殊的新功能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:22:51.117

最好的解决方案是创建“日期”表并从那里开始，否则解决方案将无法维护。对于指定范围内的每个日期，您可以检查它是否被 'dateranges' 表中的范围覆盖并获取未覆盖的日期计数。

像这样的东西：

```
SELECT COUNT(*)
FROM
  Dates d
WHERE
  d.Date BETWEEN @start AND @end
AND NOT EXISTS 
 (SELECT * 
  FROM dateranges r
  WHERE d.date BETWEEN r.startdate and ISNULL(r.enddate, d.date) 
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:38:07.877

```
 CREATE TABLE Dates (
 dt DATETIME NOT NULL PRIMARY KEY);

INSERT INTO Dates VALUES('20081204'); 
INSERT INTO Dates VALUES('20081205');
INSERT INTO Dates VALUES('20090608');
INSERT INTO Dates VALUES('20090609');

-- missing ranges
SELECT DATEADD(DAY, 1, prev) AS start_gap,
       DATEADD(DAY, -1, next) AS end_gap,
       DATEDIFF(MONTH, DATEADD(DAY, 1, prev), 
                       DATEADD(DAY, -1, next)) AS month_diff
FROM (
SELECT dt AS prev, 
      (SELECT MIN(dt) 
       FROM Dates AS B
       WHERE B.dt > A.dt) AS next
FROM Dates AS A) AS T
WHERE DATEDIFF(DAY, prev, next) > 1;

-- existing ranges
SELECT MIN(dt) AS start_range,
       MAX(dt) AS end_range
FROM (
SELECT dt, 
       DATEDIFF(DAY, ROW_NUMBER() OVER(ORDER BY dt), dt) AS grp
FROM Dates) AS D
GROUP BY grp;

DROP TABLE Dates; 
```

# iphone - 在 UITabbarController 中添加新的 TabBarItems

> ID：14686554
> 
> 赞同：1
> 
> 时间：2013-02-04T12:12:39.097
> 
> 标签：iphone, uitabbarcontroller, uitabbar, uitabbaritem

我有一个应用程序，其中`UITabbarController`只有一个`TabBarItem`，即“主页”。

现在的问题是当我在我的主页标签栏项目中时，我可以添加更多与`ViewControllers`我现有的不同的 TabbarItem `UITabbarcontroller`。

这是更详细的示例：

我只有一个“主页选项卡”。我在 Home Tab 上调用了一项服务，`ViewController1`然后服务器说. 然后我可以在运行时创建它。如果是的话，任何人都可以描述如何！`ViewController2``TabBar`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:26:36.820

```
 NewViewController* vc1 = [[NewViewController alloc] init];

   vc1.tabBarItem.image = [UIImage imageNamed:@"icon.png"];
   vc1.tabBarItem.title = @"Title";

   NSMutableArray* controllers = [NSMutableArray arraywithArray :tabBarController.viewControllers];
   [controllers addObject:vc1];
   tabBarController.viewControllers = controllers; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:39:43.033

您必须使用现有视图的副本创建一个新的 NSMutableArray，然后在最后添加新视图并将选项卡控制器视图设置为新副本。因此，如果您在现有的“单一”视图控制器中：

```
ViewController *newView = [[ViewController alloc]init];
NSMutableArray *views = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
[views addObject:newView];
self.tabBarController.viewControllers = views; 
```

# php - 如何使用 ImageMagick 和 php 将 pdf 转换为 jpeg

> ID：14686556
> 
> 赞同：0
> 
> 时间：2013-02-04T12:12:49.117
> 
> 标签：php, pdf, imagemagick, jpeg, imagemagick-convert

我很难在基于 wordpress 的网站上使用 php Imagick 库将 pdf 文件转换为 jpg。

我做了一些阅读，我想我需要安装 Ghostscript 来实现我的目标。是这样吗，或者我可以在没有 Ghostscript 的情况下做到这一点。

我的代码如下所示：

```
$img = new Imagick();
$img->setResolution(200,350);
$img->readImageFile($link.'[0]');
$img->setImageFormat('jpeg');
$img->destroy();
$img->clear(); 
```

我可以在没有 setImageFormat 的情况下成功运行上面的代码。setImageFormat 产生错误。所有其他命令都成功运行。

有任何想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:55:35.787

您需要安装 GhostScript。PDF 由 GhostScript 解释器处理。

# c# - 下载时从 HttpWebRequest 异步读取数据

> ID：14686560
> 
> 赞同：0
> 
> 时间：2013-02-04T12:13:18.357
> 
> 标签：c#, asynchronous, httpwebrequest

当请求正在下载资源时，如何异步读取从 HttpWebRequest 接收到的数据？

我想下载一个文件并立即开始处理接收到的字节。我找到了很多如何异步调用 HttpWebRequest 的示例，但是直到下载完成后才会读取数据：

```
HttpWebRequest webRequest;

void StartWebRequest()
{
    webRequest.BeginGetResponse(new AsyncCallback(FinishWebRequest), null);
}

void FinishWebRequest(IAsyncResult result)
{
    webRequest.EndGetResponse(result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:26:18.053

在线上

```
webRequest.EndGetResponse(result); 
```

您还没有阅读任何响应正文。[EndGetResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.endgetresponse.aspx)返回一个 HttpWebResponse ，您必须在其上调用[GetResponseStream](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)。流包含实际的响应主体，您可以使用标准流方法以任意快或慢的速度读取它。

# android - 使用麦克风接收听不见的音调？

> ID：14686562
> 
> 赞同：0
> 
> 时间：2013-02-04T12:13:21.920
> 
> 标签：android

我正在做一个项目。我想使用计算机的扬声器产生听不见的音调，并在智能手机上使用麦克风来接收这种音调。

1.有什么软件可以通过PC中的扬声器产生听不见的音调（18-20 Khz）？

2.一个代码android来接收和分析这个音的一些特征（频率，幅度，...）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:22:31.067

您可以自己生成正弦波作为原始数据声音。以整数计算频率的正弦值并重复它们。

您可以使用正确设置的 AudioTrack，并编写方法，可能多次或循环使用。

最大振幅可以从 MediaRecorder.getMaxAmplitude() 获得。但是对于频率，您必须对原始音频使用快速傅立叶变换。参见示例[如何从 fft 结果中获取频率？](https://stackoverflow.com/questions/7674877/how-to-get-frequency-from-fft-result)

我看到的大多数麦克风都不支持这么高的频率。您确定您的麦克风能够捕捉到如此高的频率吗？

# c# - 在 Metro 应用程序中发送电子邮件

> ID：14686563
> 
> 赞同：0
> 
> 时间：2013-02-04T12:13:22.087
> 
> 标签：c#, windows-phone-7, windows-8, microsoft-metro

> **可能重复：**
> [在 Metro 应用程序中发送电子邮件？](https://stackoverflow.com/questions/12969059/sending-an-email-in-metro-application)

在我使用 c# 和 xaml 的 Metro 风格应用程序中，我需要发送电子邮件。如何在类似于 Windows 手机中的 EmailComposeTask 的 Metro 应用程序中发送电子邮件。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:40:59.323

在 Windows 8 中，您可以使用[共享合同](http://msdn.microsoft.com/en-us/library/windows/apps/hh758315.aspx)，该合同允许您共享应用程序中的内容。

因此，安装的接受共享的应用程序（您可以选择不同的共享格式，如 HTML）可用于共享您的应用程序的内容，如邮件应用程序。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:27:20.000

您可以使用 Launcher 调用默认的电子邮件客户端

```
var mailto = new Uri("mailto:recipient@example.com"); 
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

也可以填写主题或文字

```
var mailto = new Uri("mailto:?to=recipient@example.com&subject=Your subject&body=Your text"); 
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

# android - 使用来自 sqlite 数据库的值创建 json 数组的问题

> ID：14686568
> 
> 赞同：0
> 
> 时间：2013-02-04T12:13:32.427
> 
> 标签：android, json

到目前为止我所做的是：我创建了一个这种格式的 json 对象：

`{ "checklist": {
"id": "1", "name": "shoppping", "desc":"description", "is_editable":"false", "item": [ {"id":"3","value": "dfdf", "desc": "wwe"}, {"id":"3","value": "dfdf", "desc": "wwe"}, {"id":"3","value": "dfdf", "desc": "wwe"} ] } }`

使用以下代码：

```
public static void sendjsontourl(String id) throws JSONException, IllegalStateException, IOException
{
 String title;
 String desc;
 String creator;
 Boolean is_editable;

 String[] itid;
 String[] itname;
 String[] itdesc;
 Boolean[] itchk;
 Integer count;

 title=DBInterface.getlistname(id);
 desc=DBInterface.getlistdesc(id);
 creator=DBInterface.getlistcreartor(id);
 is_editable=DBInterface.geteditablemode(id);     
 itid=DBInterface.getitemid(id);
 itname=DBInterface.getitemname(id);
 itdesc=DBInterface.getitemdesc(id);
 itchk=DBInterface.readdataitem(id);
 count=DBInterface.getitemcount(id);     

 JSONObject checklist = new JSONObject();
 JSONObject obj = new JSONObject();
 JSONArray item = new JSONArray();
 JSONObject reqObj = new JSONObject();   
 for(int i=0; i<count; i++)
 {

    reqObj.put( "id",""+itid[i]);
    reqObj.put( "value",""+ itname[i]);
    reqObj.put( "desc", ""+itdesc[i] );
    item.put( reqObj );
 }        
    obj.put( "item", item );
    obj.put("id",""+id);
    obj.put("name",""+title);
    obj.put("description",""+desc);
    obj.put("creator",""+creator);
    obj.put("is_editable",""+is_editable);      
    checklist.put("checklist",obj);
    Log.d("log_tag",String.valueOf(checklist));
} 
```

我的问题：您可以看到包含 json 数组项的 json 对象..每个项目的项目值都是相同的...从 sqlite 数据库中获取数据的部分是正确的..我不知道是什么问题以及为什么最后一个索引值只存储在 json 数组中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:54:58.287

您正在为 reqObj 使用相同的 JSONObject 实例，因此您覆盖了数据编辑：

```
for(int i=0; i<count; i++)
 {
    JSONObject reqObj = new JSONObject();
    reqObj.put( "id",""+itid[i]);
    reqObj.put( "value",""+ itname[i]);
    reqObj.put( "desc", ""+itdesc[i] );
    item.put( reqObj );
 } 
```

# c++ - 如何使用 Code::Blocks 创建 GUI 程序

> ID：14686573
> 
> 赞同：13
> 
> 时间：2013-02-04T12:13:43.457
> 
> 标签：c++

以前我使用 Visual Studio 进行 C++ 编程。但是一些成本影响我不得不改变我的 IDE，所以我选择了 Code::Clocks (12.11)。但是我找不到用 C::B 开发 GUI 应用程序的方法。有没有办法用 C::B 开发 GUI？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T12:23:40.870

是的，如果您有[GTK](http://www.gtk.org/) + 或[wxWidget](http://www.wxwidgets.org/)库，您可以使用 CodeBlocks 开发 GUI。您可以根据自己的选择使用其中之一。CodeBlocks 在您下载并安装它们之前无法使用它们，因此您必须执行一些操作以使它们在 CodeBlocks 中可用。对于 GTK+ 配置步骤，请参阅[此](http://forums.codeblocks.org/index.php?topic=16468.0)，对于 wxWidget，请参阅[此](http://wiki.wxwidgets.org/CodeBlocks_Setup_Guide)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-03T04:05:03.917

我一直使用 Code::Blocks 20.3（使用 MinGW-W64 项目编译器）创建 Win32 gui 应用程序，因为我使用 Win32 api 对它们进行编码。这是手动的做事方式，效果很好；缺点是你必须学习 Win32 api。（这是一个有抱负的挑战，但对于有经验的 C/C++ 程序员和一些 google 技能来说，这是可行的）许多程序员认为 gui 应用程序必须使用图形构建器（GTK+、wxWidgets 等）构建，但事实并非如此。事实上，在 20.3 Code::Blocks 的股票版本中，项目选项之一是 Win32 应用程序。它构建了一个“非常”最小的 cpp 文件，该文件显示一个空白窗口并启动消息循环......如果您从未见过产生空白窗口的 gui cpp 文本文件，这是一个很好的起点。您将需要学习 Win32 api 并学习如何使用消息循环，如何将控件（按钮等）添加到您的项目，以及如何调试它；这是一条学习曲线，但它是有益的教育。获取《Programming Windows》第五版这本书——确保它只是第五版！Microsoft 文档也非常适合学习 Win32 api，但是这本书是最好的方法。上课。
马库斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-09T13:06:48.580

如果您想开始使用“Code::Blocks”创建 GUI 程序，那么使用“Win32”方法看起来很有希望。

我最近才安装了“Code::Blocks 20.03”，使用默认安装目录和安装类型（完整），并且能够轻松创建基本的“Win32 GUI 项目”。

注意：我使用的是 Windows 10，基本项目并没有真正做任何事情。

有关一些 Microsoft 文档，请参阅

[https://docs.microsoft.com/en-us/windows/win32/learnwin32/learn-to-program-for-windows](https://docs.microsoft.com/en-us/windows/win32/learnwin32/learn-to-program-for-windows)

，请注意本页左下方的“下载 PDF”链接。

您可以从 pdf 的第 18 页开始，即“模块 1。您的第一个 Windows 程序”开始的地方，第 20 页很有启发性。

有关上一个答案中提到的“消息循环”的信息，请参见第 24 页。

可能值得记住对问题的“回复#3”

[https://forums.codeblocks.org/index.php?topic=19537.0](https://forums.codeblocks.org/index.php?topic=19537.0)

# mysql - 使用 Perl 程序在 MySQL 的列中插入多行

> ID：14686576
> 
> 赞同：2
> 
> 时间：2013-02-04T12:14:02.753
> 
> 标签：mysql, sql, perl, placeholder, multiple-entries

我想使用单个查询在单个列中插入多行数据。该程序适用于较少的数据。我有另一个包含 4000 行数据的天气监测 .txt 文件。我可以一次插入一个数据，但对于这么多数据值来说它变得乏味。

```
1\.     use DBI;
2\.     use DBD::mysql;
3\.     use warnings;

4\.     $connection = ConnectToMySql($database);

5\.   # Multiple Data inputs
6\.      $myquery = "INSERT INTO data(datatime,battery)
7\.           VALUES
8\.             (?,?),
9\.             ('16.01.2013','6.54'), #data corresponding to date and battery
10\.             ('17.01.2013','6.42'),
11\.             ('21.01.2013','6.24'),
12\.             ('22.01.2013','6.21'),
13\.             ('24.01.2013','6.17'),
14\.             ('25.01.2013','6.13'),
15\.             ('28.01.2013','6.00'),
16\.             ('29.01.2013','5.97'),
17\.             ('30.01.2013','5.94'),
18\.             ('01.02.2013','5.84')";
19\.    $statement2 = $connection->prepare($myquery);

20\.     $statement2->execute($myquery);

21\.    #--- start sub-routine
22\.    sub ConnectToMySql {
23\.       $database ="xxxx";
24\.       $user = "XXXX";
25\.       $pass = "XXXX";
26\.       $host="XXXX";
27\.    my $dbh = DBI->connect("DBI:mysql:$database:$host", $user, $pass);
28\.    } 
```

这段代码给了我以下错误：

> DBD::mysql::st 执行失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 C:/Users/User/workspace/DataBaseEntry/DataEntry.pl 第 20 行的第 2 行的 '' 附近使用正确的语法。
> DBD::mysql::st 执行失败：当 C:/Users/User/workspace/DataBaseEntry/DataEntry.pl 第 40 行需要 2 个时，使用 1 个绑定变量调用。

我无法确定问题所在。是占位符吗。我能做些什么来改进它？我对这些东西很陌生。所以你能保持简单吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:28:15.940

您应该将应该替换`(?, ?)`as 参数的数据值传递给`execute`. 您编写的代码仅将一个参数传递给`execute`，该参数是查询的 SQL 文本。

试试这个：

```
$myquery = "INSERT INTO data(datatime,battery) VALUES (?,?)";
my $sth = $connection->prepare($myquery);

$sth->execute('16.01.2013','6.54');
$sth->execute('17.01.2013','6.42');
$sth->execute('21.01.2013','6.24');
$sth->execute('22.01.2013','6.21');
$sth->execute('24.01.2013','6.17');
$sth->execute('25.01.2013','6.13');
$sth->execute('28.01.2013','6.00');
$sth->execute('29.01.2013','5.97');
$sth->execute('30.01.2013','5.94');
$sth->execute('01.02.2013','5.84'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:28:04.617

```
$connection->do(<<'EOT');
  INSERT INTO data (datatime, battery)
  VALUES
    ('17.01.2013', '6.42'),
    ('21.01.2013', '6.24'),
    ('22.01.2013', '6.21'),
    ('24.01.2013', '6.17'),
    ('25.01.2013', '6.13'),
    ('28.01.2013', '6.00'),
    ('29.01.2013', '5.97'),
    ('30.01.2013', '5.94'),
    ('01.02.2013', '5.84')
EOT 
```

我不确定您要在这里使用占位符做什么。

此外，您缺少`use warnings; use strict;`，并且您不应该在任何地方使用全局变量。

# c# - 如何通过查询获取某人工作过的所有工作项？

> ID：14686578
> 
> 赞同：2
> 
> 时间：2013-02-04T12:14:11.623
> 
> 标签：c#, tfs, tfs-sdk

我正在尝试（通过 wql）获取所有已完成的任务，这意味着有人为他们记录了时间。现在，我在内存中这样做：

```
foreach (WorkItem wi in workItems)
        {
            foreach (Revision item in wi.Revisions)
            {
                try
                {
                     // elided...
                     myTask.TimeSpent = item.Fields["Completed Work"].Value == null ?
                     0 : (double)item.Fields["Completed Work"].Value;
                }
            }
         } 
```

我希望能够在这样的初始查询中做到这一点：

```
 var query = "SELECT [System.Id] FROM WorkItems
 WHERE [System.TeamProject] = '@project'
 and [System.WorkItemType]='Task' *and [System.WorkItem.Completed_Work] <> 0*"; 
```

我尝试了不同的方法来钻入“已完成的工作”领域： `[System.WorkItemRevisions.Completed_Work],
[System.WorkItem[Revisions[Completed_Work]]],
[System.WorkItem.Revisions.[Completed Work]]`

但我总是得到一个例外。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:22:31.097

问题是您使用的参考名称`CompletedWork`，另一个问题是`@project`，因为该语句未在项目上下文中调用，因此`@project`不应工作。这是我如何使用它的示例：

```
string query = "SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = '" + SelectedTeamProject + "' AND [System.WorkItemType]='Task' AND [Microsoft.VSTS.Scheduling.CompletedWork] <> 0"; 
```

`Work Item Type Definition (WITD)`如果您安装了 TFS Power Tools，您可以通过在 Visual Studio 中检查来获得正确的参考名称：

```
Tools-> Process Editor-> Work Item Types-> Open WIT from Server
Choose the Team Project Collection and the TeamProject where the Task is in 
Open the Task definition and watch out for the Completed Work field and check the reference name for it 
```

# php - 在 webroot 文件夹中从 webroot 外部上传图像

> ID：14686579
> 
> 赞同：0
> 
> 时间：2013-02-04T12:14:15.727
> 
> 标签：php, file-upload, directory-structure

我有这样的文件夹结构

```
public_html
     /images

outside
    /file_uploader.php 
```

也`public_html`就是webroot文件夹。

`outside`位于 webroot 文件夹之外。

所以，我想在文件夹中上传文件 `public_html/images`。

我在文件中有`outside/file_uploader.php` 这段代码：

```
move_uploaded_file(
     $_FILES['img_name']['tmp_name'], 
     absolute/path/to/public_html/images/folder
); 
```

但这会返回错误，那个`Unable to access to public_html/images`文件夹。

问题：如何从`outside_of_webroot_file`in上传文件`webroot\folder`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:39:58.113

```
// see if you have permission to write to this folder
if(!is_writable(absolute/path/to/..)) {
    chmod()
}

move_uploaded_file() 
```

# ios - 可以在 testflight 的 buid 上添加额外的 UDID 吗？

> ID：14686580
> 
> 赞同：4
> 
> 时间：2013-02-04T12:14:19.533
> 
> 标签：ios, testflight

如何在 testflight 中添加一个带有 buid 的额外 UDID 而不是制作新的临时配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:22:13.247

您必须在苹果开发中心编辑临时配置文件并将新设备添加到其中。但是您可以通过试飞直接更新配置文件（而不是在 xcode 中更新配置文件并重新存档）。

更新配置文件后，您应该转到测试飞行中的构建，在权限选项卡（左侧）中，您将能够直接更新配置文件。测试飞行甚至会询问您是否要发送邮件到新添加的设备（以及自上次发布以来尚未安装的旧设备..）。

# c# - 从多个图像生成单个 PDF

> ID：14686581
> 
> 赞同：5
> 
> 时间：2013-02-04T12:14:30.257
> 
> 标签：c#, asp.net, pdf, pdf-generation

我需要从多个图像创建单个 pdf 文件。例如，我有 12 张图片，然后 pdf 将生成 3 页，其中包括 4 张图片，单页 2 张图片。

那么，有没有我可以用来从图像生成 pdf 的 dll 示例？![在此处输入图像描述](../Images/3e5ae3f6e38b31459b556f217953f467.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T12:42:56.250

有多个库对此提供支持：

1.  iTextSharp -[使用图像教程](http://www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images)：
2.  [pdfSharp](http://www.pdfsharp.net) -[使用图像教程](http://www.pdfsharp.net/wiki/Graphics-sample.ashx#Draw_an_image_in_original_size_20)
3.  [PDF小丑](https://pdfclown.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T11:19:01.810

谢谢，我已经使用表格在 pdf 的一页上创建了 6 个图像。

```
Public Function CreatePDF(images As System.Collections.Generic.List(Of Byte())) As String
        Dim PDFGeneratePath = Server.MapPath("../images/pdfimages/")
        Dim FileName = "attachmentpdf-" & DateTime.Now.Ticks & ".pdf"

        If images.Count >= 1 Then
            Dim document As New Document(PageSize.LETTER)
            Try
                ' Create pdfimages directory in images folder.
                If (Not Directory.Exists(PDFGeneratePath)) Then
                    Directory.CreateDirectory(PDFGeneratePath)
                End If

                ' we create a writer that listens to the document
                ' and directs a PDF-stream to a file
                PdfWriter.GetInstance(document, New FileStream(PDFGeneratePath & FileName, FileMode.Create))

                ' opens up the document
                document.Open()
                ' Add metadata to the document.  This information is visible when viewing the

                ' Set images in table
                Dim imageTable As New PdfPTable(2)
                imageTable.DefaultCell.Border = Rectangle.NO_BORDER
                imageTable.DefaultCell.HorizontalAlignment = Element.ALIGN_CENTER

                For ImageIndex As Integer = 0 To images.Count - 1
                    If (images(ImageIndex) IsNot Nothing) AndAlso (images(ImageIndex).Length > 0) Then
                        Dim pic As iTextSharp.text.Image = iTextSharp.text.Image.GetInstance(SRS.Utility.Utils.ByteArrayToImage(images(ImageIndex)), System.Drawing.Imaging.ImageFormat.Jpeg)

                        ' Setting image resolution
                        If pic.Height > pic.Width Then
                            Dim percentage As Single = 0.0F
                            percentage = 400 / pic.Height
                            pic.ScalePercent(percentage * 100)
                        Else
                            Dim percentage As Single = 0.0F
                            percentage = 240 / pic.Width
                            pic.ScalePercent(percentage * 100)
                        End If

                        pic.Border = iTextSharp.text.Rectangle.BOX
                        pic.BorderColor = iTextSharp.text.BaseColor.BLACK
                        pic.BorderWidth = 3.0F

                        imageTable.AddCell(pic)
                    End If
                    If ((ImageIndex + 1) Mod 6 = 0) Then
                        document.Add(imageTable)
                        document.NewPage()

                        imageTable = New PdfPTable(2)
                        imageTable.DefaultCell.Border = Rectangle.NO_BORDER
                        imageTable.DefaultCell.HorizontalAlignment = Element.ALIGN_CENTER
                    End If
                    If (ImageIndex = (images.Count - 1)) Then
                        imageTable.AddCell(String.Empty)
                        document.Add(imageTable)
                        document.NewPage()
                    End If
                Next
            Catch ex As Exception
                Throw ex
            Finally
                ' Close the document object
                ' Clean up
                document.Close()
                document = Nothing
            End Try
        End If

        Return PDFGeneratePath & FileName
    End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T12:32:36.027

看看[“iText in Action”](https://rads.stackoverflow.com/amzn/click/com/1935182617)一书，这或多或少也涵盖了 iTextSharp，它是 iText PDF 库的 .NET 版本。也就是说，您必须编写的 C# 几乎与 Java 代码示例相同。

[您可以从http://itextpdf.com/book/examples.php](http://itextpdf.com/book/examples.php)下载示例。一个特别有趣的示例（Java 代码）是关于[如何添加图像](http://itextpdf.com/examples/iia.php?id=70)的示例。可以在[SourceForge 上](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/)找到相应的 C# 示例。

祝你好运！

# php - 更新帖子不起作用

> ID：14686583
> 
> 赞同：1
> 
> 时间：2013-02-04T12:14:32.013
> 
> 标签：php, html, mysql

我最近编写了一个代码来更新我在博客上的帖子。它在本地主机上完美运行。但是当我把它上传到网上时，它不再起作用了。奇怪的是它甚至没有显示错误，所以我不知道在哪里看。有人可以帮帮我吗 ？

```
require('config.php');
$query = "SELECT * FROM project ORDER BY idproject DESC";
$result = mysqli_query($verbinding, $query ) or die (mysqli_error('kan geen verbinding maken met de database'));
if(isset($_POST['editBut'])){
    $editTitle = $_POST['editName'];
    $editThis = mysqli_query($verbinding, "SELECT * FROM project WHERE title = '".$editTitle."'");
    $values = mysqli_fetch_assoc($editThis);
}
if(isset($_POST['update'])){
    $editedTitle = $_POST['newTitle'];
    $editedText = $_POST['newTekst'];
    $oldTitle = $_POST['oldTitle'];
    $date = $_POST['datum'];
    $updater = mysqli_query($verbinding, "UPDATE Project SET title='".$editedTitle."', content='".$editedText."' WHERE title='".$oldTitle."' AND datum='".$date."'");
    echo $updater;
    header('location:editPost.php?id=1');
}
if(isset($_GET['id'])){
    echo 'post has been succesfully updated';
}

<?php if(isset($_POST['editBut'])){ ?>
            <form action="" method="post">
                Title: <input type="text" name="newTitle" value="<?php echo $values['title'] ?>"><br>
                Text: <textarea type="text" name="newTekst" id="newTekst"><?php echo $values['content'] ?></textarea><br>
                <input type="hidden" value="<?php echo $values['title'] ?>" name="oldTitle">
                <input type="hidden" value="<?php echo $values['datum'] ?>" name="datum">
                <input type="submit" name="update" value="Edit post">
            </form>
        <?php } else { ?>
            <p>Find the post you want to edit:</p>
            <form action="" method="post">
                <select name="editName">
                    <?php
                    while ($row = mysqli_fetch_assoc($result)) {
                       ?> <option value="<?php echo $row['title'] ?>"><?php echo $row['title'] ?></option>
                    <?php } ?>
                </select>
                <input type="submit" name="editBut" value="Choose">
            </form>
        <?php } ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T12:21:02.590

在更新查询中，用小写字母替换您的表名。

替换`Project`为`project`

# ios - iOS Zxing Widget 不再构建

> ID：14686586
> 
> 赞同：0
> 
> 时间：2013-02-04T12:14:48.630
> 
> 标签：ios, xcode, zxing

当我想构建包含 zxing 库的项目时，我收到以下错误消息：

```
clang: error: no such file or directory: '/Users/xxxx/Desktop/zxing-2.0/ZXingWidget_Prefix.pch'
clang: error: no input files
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

它只发生在我将 xcode 更新到 4.6 之后

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:37:00.500

您使用的是静态 zxing 库还是依赖项目？

如果是依赖项目，请尝试以下步骤：

1）选择项目**ZXingWidget.xcodeproj**

2) 选择目标**ZXingWidget**

3) 选择构建设置选项卡

4）搜索关键字“标题”。

5) 将“ **Precompile Prefix Header** ”字段设置为“ **Yes** ”。

6) 将“ **Prefix Header** ”字段设置为“ **ZXingWidget_Prefix.pch** ”。

7) 再次清理并构建您的项目。

希望这会有所帮助！

# javascript - 悬停不规律时，菜单和子菜单的行为不符合预期

> ID：14686591
> 
> 赞同：0
> 
> 时间：2013-02-04T12:14:55.587
> 
> 标签：javascript, jquery

我有一个水平菜单（设置为列表），当您将鼠标悬停在其中一个列表项上时，它会为作为列表项子项的下拉菜单设置动画。

如果您以“正常”速度将光标移动到菜单上，这将正常工作。如果您不规律地将光标移到菜单上，我遇到的问题是菜单的行为。它使先前悬停的元素仍然显示，我必须将鼠标悬停在 dropMenu 上方和上方，直到它们全部返回到初始状态（高度：0）。

我的菜单 jquery 如下：

```
$('#templateNav > ul > li').bind({
        mouseenter: function() {
            $(this).find(".dropMenu").clearQueue().animate({
                height: 250
            }, 200);
        },

        mouseleave: function() {
            $(this).find(".dropMenu").clearQueue().height(0);
        }
    }); 
```

这是我的菜单代码示例：

```
<div id='templateNav'>
    <ul>
        <li>Menu 1<span class='dropMenu'>...</span></li>
        <li>Menu 2<span class='dropMenu'>...</span></li>
        <li>Menu 3<span class='dropMenu'>...</span></li>
    </ul>
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:29:09.653

看到这个[http://jsbin.com/ukuqik/1](http://jsbin.com/ukuqik/1)

```
$('#templateNav > ul > li').bind({
    mouseenter: function() {
        $(this).find(".dropMenu").stop(true,true).animate({
            height: 250
        }, 200);
    },

    mouseleave: function() {
        $(this).find(".dropMenu").stop(true,true).animate({
            height: 0
        }, 200);
    }
}); 
```

而且好一点：http: [//jsbin.com/ukuqik/6](http://jsbin.com/ukuqik/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:25:35.980

这是一个解决方案：

使用一个变量，并在动画完成时设置它。像这样的东西：

```
var isAnimating = false;
mouseenter: function() {
  isAnimating = true; // Here we start
  $(this).find(".dropMenu").clearQueue().animate({
       height: 250
  }, 200, function (){isAnimating=false}); // Now we are done with animation
},
mouseleave: function() {
  if(isAnimating == false) $(this).find(".dropMenu").clearQueue().height(0);
} 
```

或者，您可以在使用 .stop() 将鼠标移出时停止动画。

# database - Hibernate @OneToMany 在更新父级时从列表中删除子级

> ID：14686595
> 
> 赞同：37
> 
> 时间：2013-02-04T12:15:15.507
> 
> 标签：database, hibernate, jpa, associations, one-to-many

我有以下实体：

团队

```
@Entity
@Table
public class Team {
[..]
private Set<UserTeamRole> userTeamRoles;

/**
 * @return the userTeamRoles
 */
@OneToMany(cascade = { CascadeType.ALL }, mappedBy = "team", fetch = FetchType.LAZY)
public Set<UserTeamRole> getUserTeamRoles() {
    return userTeamRoles;
}

/**
 * @param userTeamRoles
 *            the userTeamRoles to set
 */
public void setUserTeamRoles(Set<UserTeamRole> userTeamRoles) {
    this.userTeamRoles = userTeamRoles;
} 
```

}

和

USER_TEAM_ROLE

```
@Entity
@Table(name = "user_team_role")
public class UserTeamRole {

 @ManyToOne(cascade = CascadeType.MERGE, fetch = FetchType.LAZY)
 @JoinColumn(name = "FK_TeamId")
 public Team getTeam() {
    return team;
 }
} 
```

现在，当使用 {UTR1, UTR3} 更新包含例如 Team.userTeamRoles = {UTR1, UTR2} 的团队实体时，我希望删除 UTR2。但是我现在这样做的方式是，旧列表保持不变，它只将 UTR3 添加到列表中。

这就是我目前的做法：

```
 if (!usersDualListData.getTarget().isEmpty()) {
        // the role for each user within the team will be "employee"
        team.setUserTeamRoles(new HashSet<UserTeamRole>());
        Role roleForUser = roleService
                .getRoleByName(RoleNames.ROLE_EMPLOYEE.name());
        for (User user : usersDualListData.getTarget()) {
            UserTeamRole utr = new UserTeamRole();
            utr.setUser(user);
            utr.setTeam(team);
            utr.setRole(roleForUser);
            team.getUserTeamRoles().add(utr);
        }
    }

teamService.updateTeam(team); 
```

我认为通过这样做`team.setUserTeamRoles(new HashSet<UserTeamRole>());`，列表将被重置，并且由于级联，先前的列表将被删除。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-04T12:25:41.157

1.  而不是替换集合 ( `team.setUserTeamRoles(new HashSet<UserTeamRole>());`) 您必须替换为`clear()`现有集合。发生这种情况是因为如果 Hibernate 从 DB 加载实体（及其集合），它会“管理”它们，即。跟踪他们的变化。通常，在使用 Hibernate 时，最好**不要**为集合（列表、集合）创建任何设置器。只创建getter，并清除它返回的集合，即：

    `team.getUserTeamRoles().clear();`

2.  另一件事是您错过了孤立删除（即，从父对象的集合中删除子对象时删除子对象）。要启用它，您需要添加`@OneToMany(orphanRemoval=true)`拥有实体。

# perl - 将 split 作为参数传递给 splice

> ID：14686596
> 
> 赞同：1
> 
> 时间：2013-02-04T12:15:15.947
> 
> 标签：perl

我只需要字符串中的前两个名称。

`my $myNames = "Jacob, Michael, Joshua, Matthew, Ethan, Andrew";`

`my $meNewNames = join ( ',',splice( split(/,/,$myNames), 0, 2));`

如果其中有任何问题，请纠正我，或者我们可以通过其他方式实现它。

`print "$meNewNames\n";`

它抛出错误。要拼接的 arg 1 的类型必须是数组（不拆分）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:19:33.947

好吧，就像错误所说的那样，第一个参数必须是一个数组。可能的解决方案：

```
my $meNewNames = join ( ',',splice( [ split(/,/,$myNames) ], 0, 2)); 
```

从您的拆分返回值中创建一个匿名数组引用。但是，这只适用于 perl 5.14 及更高版本。你可以像这样更简单地做到这一点：

```
my $meNewNames = join ( ',', (split(/,/,$myNames))[0,1] ); 
```

使用下标来获取拆分的前两个值。在这种风格中，这样做可能更具可读性：

```
my @names = split /,\s*/, $myNames;
my $meNewNames = join ',', @names[0,1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:22:12.317

这更简单：

```
my $meNewNames = join ( ',', (split(/,/,$myNames))[0,1] ); 
```

此外，您可以使用正则表达式而不是加入/拆分：

```
$myNames =~ m!(\w+, *\w+)!;
# $1 => Jacob, Michael; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:21:09.887

您正在为 提供一个匿名列表`split`，但您确实需要一个真正的数组。这是解决此问题的一种方法：

```
 my @array = split(/,/,$myNames);
   my $meNewNames = join ( ',',splice( @array, 0, 2)); 
```

# android - 在 Android 中----我们如何获取文本到语音中正在说话的单词？

> ID：14686599
> 
> 赞同：5
> 
> 时间：2013-02-04T12:15:22.920
> 
> 标签：android, google-text-to-speech

有人帮我在文本到语音中提供提示吗？

我的目标是提示设备正在读取哪个单词。

文字转语音我的代码如下：-

```
TextToSpeech tts = new TextToSpeech(this,this);
if (txtText.getText().toString().length() == 0) 
        tts.speak("You haven't typed text", TextToSpeech.QUEUE_FLUSH, null);
     else
        tts.speak(txtText.getText().toString(), TextToSpeech.QUEUE_FLUSH,null); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:24:40.730

您需要逐字逐句地分解它，并突出显示提到的单词。例如，如果我们使用“您尚未输入文本”这样的句子：

```
 tts.speak("You", TextToSpeech.QUEUE_FLUSH, null);
/*Change size or color of "You" in your TextView for e.g.*/
 tts.speak("haven't", TextToSpeech.QUEUE_FLUSH, null);
/*Change size or color of "haven't" in your TextView for e.g.*/
 tts.speak("typed", TextToSpeech.QUEUE_FLUSH, null);
/*Change size or color of "typed" in your TextView for e.g.*/

... 
```

您可以通过使用`txtText.getText().toString().Split" ";`返回由空格分隔的单词的字符串数组来做到这一点。然后遍历这个数组以知道说出哪个单词并在 TextView 中突出显示它[，](https://stackoverflow.com/questions/1529068/is-it-possible-to-have-multiple-styles-inside-a-textview)例如

# json - 如何修改json文件和foreach循环结构

> ID：14686601
> 
> 赞同：0
> 
> 时间：2013-02-04T12:15:30.743
> 
> 标签：json, foreach, yii

我有 Yii 代码作为-

```
public function actionpublishPollResult()
    {
        $model=new Polloption();
        $json='{"pollId":2}';    
        $obj=json_decode($json);
        $model->pollId=$obj->pollId;
        $options=Polloption::model()->findAllByAttributes(array('pollId'=>$model->pollId));
        $total=0;

        foreach ($options as $option)
        {

            echo "option id :-".$option->optionId."<br>";
            $vote=new Pollvote();
            echo "Number of votes to option :".$option->optionId." "."is=".count($option->pollvotes)."</br>";
            $total=$total+count($option->pollvotes);
            $data[] =count($option->pollvotes);
        }
        echo "</br>";
        echo "Total number of votes obtained=".$total;
        foreach ($data as $votepercentage)
        {
            $percentageResult[]=$votepercentage/$total*100;
        }

        echo "</br>";
        echo CJSON::encode(array('options'=>$options,'percentagevotes'=>$percentageResult));

    } 
```

所以它给了我输出

{"options":[{"optionId"=>1,"option"=>"abc"},{"optionId"=>2,"option"=>"xyz"}],{"percentagevotes":[25 ,75]}}

但我只想在选项数组中添加这个百分比投票字段。那么我需要在上面的 foreach 结构中进行哪些更改。因为 $total 只有在执行整个选项循环后才会获得。所以如何计算和添加百分比投票字段仅在选项的 foreach 中。请指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:49:23.183

将您的第二个`foreach`循环编辑为

```
$toJson=array();
foreach ($data as $i=>$votepercentage)
        {
            $tmp=array();
            $tmp['optionId']=$option[$i]->optionId;
            $tmp['option']=$option[$i]->option;
            $tmp['percentageVote']=$votepercentage/$total*100;
            $toJson[]=$tmp;

        } 
```

然后

```
 echo CJSON::encode(array('options'=>$toJson)); 
```

# jquery - Kendo UI - 网格 - 未正确显示可分页

> ID：14686613
> 
> 赞同：0
> 
> 时间：2013-02-04T12:16:29.313
> 
> 标签：jquery, kendo-ui, kendo-grid

> **可能重复：**
> [Kendo UI 网格始终从第 0 页开始](https://stackoverflow.com/questions/14253912/kendo-ui-grid-always-starts-at-page-0)

设置一个 Kendo UI 网格，其中大部分工作正常，但在页面加载时，可分页数据未正确加载。（将每页项目更改为 10 后加载正确，使用右下角按钮刷新后再次加载不正确）

我的代码：

```
 <div id="example" class="k-content">
        <div id="clientsDb">

            <div id="grid"></div>

        </div>

        <script>
            $(document).ready(function() {
                $("#grid").kendoGrid({
            dataSource: {
                transport: {
                    read: "data/weight.php"
                },
                schema: {
                    data: "data",

                },

                pageSize: 5

            },      height: 250,
                    scrollable: true,
                    sortable: true,
                    filterable: true,
                    pageable: {
                        refresh: true,
                        pageSizes: true
                    },
                    groupable: true,
                    selectable: true,

                    columns: [ {
                            field: "w_user",
                            width: 50,
                            title: "User"
                        } , {
                            field: "w_weight",
                            width: 70,
                            title: "Weight"
                        }, {
                            field: "w_stamp",
                            title: "Stamp",
                            width: 160,
                            template: '#= kendo.toString(w_stamp,"dd MMMM yyyy") #'
                        }, {
                            field: "w_comment",
                            title: "Comments"
                        }
                    ]
                });
            });
        </script>
    </div> 
```

第一个屏幕（不正确）： http: [//www.informatiebron.nl/images/scr1.png](http://www.informatiebron.nl/images/scr1.png)

第二个屏幕（正确）： http: [//www.informatiebron.nl/images/scr2_correct.png](http://www.informatiebron.nl/images/scr2_correct.png)

有人有解决这个问题的想法吗？

* * *

[https://stackoverflow.com/a/14255509/2039657](https://stackoverflow.com/a/14255509/2039657) 有解决方案/解决方法。谢谢你的建议。就我而言，我需要该功能才能使其再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:18:34.660

也许添加总行数重截值会有所帮助，如下[所示](https://stackoverflow.com/a/14255509/2039657)：

# c# - 无法访问另一个 xaml 中的资源文件

> ID：14686614
> 
> 赞同：1
> 
> 时间：2013-02-04T12:16:30.693
> 
> 标签：c#, wpf, wpf-controls

我在 Themes 文件夹下的文件`styles`中定义了一个项目。`xaml`因此，我无法添加`resource`另一个位于 View 文件夹下的 xaml 文件。它显示“ `The file 'Controls\MyContentPaneDictionary.xaml`”不是项目的一部分，或者它的“ `Build Action`”属性未设置为资源。

我该如何解决这个问题？答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:25:07.007

将文件的**Build Action 设置为 Resource**并进行完全重建（以确保 Visual Studio 注意到资源的更改），或者您甚至可以删除构建文件，然后再次构建文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:00:33.573

将构建操作设置为“Page”，将 CustomTool 设置为“MSBuild:Compile”

# c# - 在 C# 元组中使用 Int64

> ID：14686615
> 
> 赞同：1
> 
> 时间：2013-02-04T12:16:30.943
> 
> 标签：c#, generics, tuples

我确信这很简单，但是在使用`.Create()`新`Tuple`类的方法时出现编译器错误。

```
Dictionary<long, Tuple<long, long>> test = new Dictionary<long, Tuple<long, long>>();
test.Add(1, Tuple.Create(1, 2)); // <-- compiler error 
```

错误是`Tuple.Create`具有无效参数，因为它期望长，并且我输入的数字被视为整数。

在这种情况下，是的，它们在 int 的范围内，但有时它们的值可能对于 int 来说太大了。

我可以强制`(long)1`转换以编译代码，但这似乎不对 - 我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T12:19:14.413

使用[`L`后缀](http://www.dotnetperls.com/suffix)指定您希望您的号码是类型`long`：

```
test.Add(1, Tuple.Create(1L, 2L)); 
```

如果没有后缀，.NET 假定这些数字为`int`s 并因此创建一个`Tuple<int, int>`实例而不是所需的`Tuple<long, long>`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T12:19:01.807

您的代码是等效的：

```
Tuple<long, long> yourTuple = Tuple.Create(1, 1); 
```

但是，因为`1`可以是`int`or `long`，所以默认情况下，编译器会`Tuple<int, int>`在调用时返回：

```
 Tuple.Create(1, 1) 
```

这就是你得到编译器错误的原因。因此，您需要使用泛型版本显式进行强制转换：

```
Tuple.Create<long, long>(1, 1); 
```

# c# - 匿名联合和嵌套结构转换为 C#

> ID：14686622
> 
> 赞同：0
> 
> 时间：2013-02-04T12:17:15.337
> 
> 标签：c#, struct, unions

我正在尝试在 C# 中创建下面的结构，以便可以与我的 Lumenera CCD 进行通信。下面的代码取自 c++ 头文件。主要问题是匿名联合和嵌套结构部分。非常感谢您的任何帮助。一个等效的例子会很棒。

```
typedef struct {
        FLOAT exposure;        
        FLOAT gain;            
        union {
         struct {
          FLOAT gainRed;     
          FLOAT gainBlue;     
          FLOAT gainGrn1;     
          FLOAT gainGrn2;     
         };
         struct {
          FLOAT gainMag;     
          FLOAT gainCyan;     
          FLOAT gainYel1;     
          FLOAT gainYel2;    
         };
        };
      union
      {
           BOOL useStrobe;        
         ULONG strobeFlags;   
      };

} LUCAM_SNAPSHOT; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:28:51.273

```
[StructLayout(LayoutKind.Explicit)] 
public struct LUCAM_SNAPSHOT
{
    [FieldOffset(0)] public float exposure;
    [FieldOffset(4)] public float gain;
    [FieldOffset(8)] public float gainRed;
    [FieldOffset(8)] public float gainGrn1;
    [FieldOffset(8)] public float gainGrn2;
    [FieldOffset(12)] public float gainMag;
    [FieldOffset(12)] public float gainGrn1;
    [FieldOffset(12)] public float gainGrn2;
    [FieldOffset(12)] public float gainMag;
    [FieldOffset(16)] public byte useStrobe;
    [FieldOffset(16)] public int strobeFlags;
} 
```

我认为它可能类似于上述内容。我还没有尝试过，但至少你有一个起点。

# forms - 使用 modal=true 和 appendToBody=true 时对话框未正确显示

> ID：14686624
> 
> 赞同：0
> 
> 时间：2013-02-04T12:17:17.977
> 
> 标签：forms, jsf, dialog, primefaces, modal-dialog

我阅读了许多有关此问题的帖子，但找不到解决方案。

我的 JSF 开头有一个带有命令按钮的表单，它应该打开对话框。Dialog 在 Dialog 内部有一个表单，以及属性 modal 和 appendToBody。我的页面只是重新加载自身并且不弹出对话框。

```
<ui:composition template="../templates/site.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:sec="http://www.springframework.org/security/tags">

    <ui:define name="content">
         <h:form>
                   <p:commandButton value="Button" id="myButton" onclick="myDialog.show()" />
        </h:form>

        <p:dialog id="dialog" widgetVar="myDialog"
                        header="Dialog" closable="true" resizable="false" width="600"
                        height="350" modal="true" appendToBody="true" dynamic="true">
                        <h:form>
                           ...
                        </h:form>
        </p:dialog>
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:39:37.403

`commandButton`将您的代码更改为：

```
<p:commandButton value="Button" type="button" id="myButton" onclick="myDialog.show()"/> 
```

这将创建一个普通的按钮（它只调用 JavaScript）并且不对服务器执行任何 AJAX 或非 AJAX 请求。按钮的默认类型是`submit`。

# javascript - 如何将 .stl 转换为 .js？

> ID：14686627
> 
> 赞同：1
> 
> 时间：2013-02-04T12:17:28.767
> 
> 标签：javascript, three.js, webgl

我想使用 WebGL 制作一个 3-D 查看器，我需要访问的导入模型是 STL 或 .stl 文件。我相信我需要将 STL 文件转换为 .js 以便它可以在 Web 浏览器中兼容。如何在保持 STL 文件的完整性和细节的同时进行转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:31:49.863

您实际上不必创建`.js`文件。您可以使用位于（从您的三个.js 的主要下载位置）中的文件`three.js loader`。`.stl`[`examples\js\loaders\STLLoader.js`](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/STLLoader.js)

此外，您可以查看[`examples\webgl_loader_stl.html`](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_stl.html)这是如何完成的。

# javascript - 如何比较 Enterprise Architect 的 JScript 中的日期对象？

> ID：14686633
> 
> 赞同：0
> 
> 时间：2013-02-04T12:17:47.003
> 
> 标签：javascript, vbscript, jscript, enterprise-architect

我制作了贯穿包中元素的 jscript，现在我需要添加 element.created 与今天的比较。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T03:53:43.777

请参考以下代码并进行相应修改

```
// get the date from the element
var dateCreated = new Date(theElement.Created);

// remove the hours, minutes, seconds, miliseconds
dateCreated.setHours(0,0,0,0);

// create the date object to compare
// input parameter is yyyy, mm, dd
// please note that the mm starts from 0 for January
var dateToCompare = new Date(2013, 0, 13);

// sample usage
if (dateCreated > dateToCompare)
{
    Session.Output("Creation date is newer");
}
else if (dateCreated < dateToCompare)
{
    Session.Output("Creation date is older");
}
else
{
    Session.Output("Creation date match");
} 
```

# spring - Spring Webflow：字段类型为必填项

> ID：14686640
> 
> 赞同：0
> 
> 时间：2013-02-04T12:18:14.137
> 
> 标签：spring, spring-mvc, tags, spring-webflow

我一直在努力解决以下错误。

```
java.lang.IllegalArgumentException: The field type is required 
```

我有一个设置了 3 个屏幕的基本屏幕流程。

*   屏幕一：身份

*   屏幕二：联系方式

*   屏幕 3：摘要

在屏幕 1 中，我输入如下文本字段：

```
<form:form modelAttribute="booking" action="${flowExecutionUrl}" method="post">
     User Name: 
     <form:input type="text" id="username" name="username" path="username"/>
     <input type="submit" name="_eventId_next" value="next" />
     <input type="submit" name="_eventId_cancel" value="Cancel" />
</form:form> 
```

这在它到达摘要时有效，因为我能够在摘要屏幕上显示 ${booking.username} 的内容。

但是在屏幕 2 上，当我尝试完全相同的事情但使用不同的数据字段时，会出现上面指定的错误。

屏幕 2：

```
<form:form modelAttribute="booking" action="${flowExecutionUrl}" method="post">
     Address 1:
     <form:input type="text" id="address1" name="address1" path="address1"/>
     <input type="submit" name="_eventId_next" value="Next"/>
     <input type="submit" name="_eventId_cancel" value="Cancel"/>
</form:form> 
```

表单标签指定如下：

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %> 
```

大部分代码可以在我之前的问题上查看：

[完整代码](https://stackoverflow.com/questions/14630546/sharing-object-across-screens-using-spring-webflow)

当我尝试将表单标签添加到选项下拉框字段时，也会发生同样的错误。

```
<form:select id="requestType" name="requestType" path="requestType">
    <form:option value="0"></option> 
    <form:option value="1">Oprion 1</option>
    <form:option value="2">Option 2</option>
</form:select> 
```

而不是选项标签我也试过

```
<form:input type="text" label="" value="0"/> 
```

都提出了相同的错误，将这些行作为错误。

谢谢你。

编辑：

堆栈跟踪：异常

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'enterContactDetails' of flow 'flow-config'
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'enterContactDetails' of flow 'flow-config'
    org.springframework.webflow.engine.impl.FlowExecutionImpl.wrap(FlowExecutionImpl.java:571)
    org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:262)
    org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.IllegalStateException: Exception occurred rendering view org.springframework.web.servlet.view.JstlView: name 'account/BookingContactDetailsScreen'; URL [/WEB-INF/views/account/BookingContactDetailsScreen.jsp]
    org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:191)
    org.springframework.webflow.engine.ViewState.render(ViewState.java:296)
    org.springframework.webflow.engine.ViewState.refresh(ViewState.java:243)
    org.springframework.webflow.engine.ViewState.resume(ViewState.java:221)
    org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
    org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

org.apache.jasper.JasperException: java.lang.IllegalArgumentException: The field type is required
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.webflow.mvc.servlet.ServletMvcView.doRender(ServletMvcView.java:50)
    org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:187)
    org.springframework.webflow.engine.ViewState.render(ViewState.java:296)
    org.springframework.webflow.engine.ViewState.refresh(ViewState.java:243)
    org.springframework.webflow.engine.ViewState.resume(ViewState.java:221)
    org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
    org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.IllegalArgumentException: The field type is required
    org.springframework.util.Assert.notNull(Assert.java:112)
    org.springframework.webflow.mvc.view.ConvertingPropertyEditorAdapter.<init>(ConvertingPropertyEditorAdapter.java:48)
    org.springframework.webflow.mvc.view.BindingModel.findSpringConvertingPropertyEditor(BindingModel.java:277)
    org.springframework.webflow.mvc.view.BindingModel.getFormattedValue(BindingModel.java:235)
    org.springframework.webflow.mvc.view.BindingModel.getFieldValue(BindingModel.java:142)
    org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:127)
    org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    org.apache.jsp.WEB_002dINF.views.account.BookingContactDetailsScreen_jsp._jspx_meth_form_005finput_005f0(BookingContactDetailsScreen_jsp.java:230)
    org.apache.jsp.WEB_002dINF.views.account.BookingContactDetailsScreen_jsp._jspx_meth_form_005fform_005f0(BookingContactDetailsScreen_jsp.java:127)
    org.apache.jsp.WEB_002dINF.views.account.BookingContactDetailsScreen_jsp._jspService(BookingContactDetailsScreen_jsp.java:85)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.webflow.mvc.servlet.ServletMvcView.doRender(ServletMvcView.java:50)
    org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:187)
    org.springframework.webflow.engine.ViewState.render(ViewState.java:296)
    org.springframework.webflow.engine.ViewState.refresh(ViewState.java:243)
    org.springframework.webflow.engine.ViewState.resume(ViewState.java:221)
    org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
    org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
    org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-10-21T19:05:24.140

You do not need to provide form action. You should have your form opening tag look like sample below:

```
<form:form method="POST" modelAttribute="booking"> 
```

# c - 来自 David M. Gay 的 dtoa.c 的 strtod() 函数

> ID：14686644
> 
> 赞同：3
> 
> 时间：2013-02-04T12:18:16.333
> 
> 标签：c

我正在使用来自[http://www.netlib.org/fp/dtoa.c](http://www.netlib.org/fp/dtoa.c)的 David M. Gay 的 dtoa() 函数在 Rebol3 解释器中实现 MOLD 函数。它运行良好，在 Linux ARM、Linux X86、Android ARM、MS Windows 和 OS X X86 下测试。

在此过程中，我还想使用上述源中的 strtod() 函数，假定的优势是在不同平台上获得一致的结果。但是，strtod 调用会导致内存保护问题。有人知道使该功能正常工作可能需要什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:11:43.253

您将需要以`strtod`适当的方式调用，特别是注意第二个参数。该参数应该是指向 char 的指针的地址，并且它被设置为指向输入字符串中未处理的第一个字符`strtod`。如果您传递指针而不是指针的地址，并且该指针未初始化为恰好是可写内存的东西（如`NULL`），则您可能会遇到运行时错误。

```
int
main(int argc, char *argv[])
{
    char *endptr, *str;
    double val;

    if (argc < 2) {
        fprintf(stderr, "Usage: %s str [base]\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    str = argv[1];
    errno = 0;    

    val = strtod(str, &endptr);

    if (errno != 0) {
        perror("strtod");
        exit(EXIT_FAILURE);
    }

    if (endptr == str) {
        fprintf(stderr, "No digits were found\n");
        exit(EXIT_FAILURE);
    }

    printf("strtod() returned %f\n", val);

    if (*endptr != '\0')        /* Not necessarily an error... */
        printf("Further characters after number: %s\n", endptr);

    exit(EXIT_SUCCESS);
} 
```

# jquery - Jquery slideDown弄乱了背景渐变

> ID：14686645
> 
> 赞同：1
> 
> 时间：2013-02-04T12:18:17.087
> 
> 标签：jquery, css, gradient

因此，当与 jQuery slideDown 函数结合使用时，我的渐变会出现令人讨厌的造型现象。

我怀疑正在发生的是我在每一页上都有一个全局渐变。在我使用以下内容的一页上：

```
function slideOnlyOne(studiesName) {
 $('.studies_detail#' + studiesName + '_box').slideDown(200);
 $('.studies_detail:not(#' + studiesName + '_box)').slideUp(600);
}; 
```

所以我正在加载几个 div 的完整数据，然后使用这个 jQuery 函数一次只显示一个。[这是该网站的](http://mpowered.site44.com/studies/)半成品版本，因此您可以看到我在说什么。在白皮书和信息图表之间切换时，您会看到背景具有奇怪的效果，例如渐变中的线条，就好像它以某种方式在某些地方重新加载它一样。但是，如果您滚动到页面底部并再次返回，它会以某种方式自行解决。

有没有其他人经历过这种性质的事情。我应该怎么做才能解决它？改变 jQuery?? 我唯一不能改变的是渐变..

```
background: -webkit-radial-gradient(rgb(255, 255, 255), rgb(190, 190, 190));
background: -moz-radial-gradient(rgb(255, 255, 255), rgb(190, 190, 190));
background: -o-radial-gradient(rgb(255, 255, 255), rgb(190, 190, 190));
background: -ms-radial-gradient(rgb(255, 255, 255), rgb(190, 190, 190));
background: radial-gradient(rgb(255, 255, 255), rgb(190, 190, 190)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:33:35.977

尝试设置

```
min-height: 200px;
height:auto; 
```

# android - 仅在条件满足时获取图像

> ID：14686646
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:18:21.233
> 
> 标签：android, image, drawable

我正在向用户显示许多图像但是，我需要根据某些条件从可绘制文件夹中获取图像。例如，如果用户将其性别设置为“男性”，则应向他显示仅供男性使用的产品图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:33:17.560

```
 if(condition)
  {
  image_view.getResources().getDrawable(R.drawable.male_img);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:23:20.267

### Java 活动

```
String gender ;
ImageView iv_image;
    If (gender.equals("Male") 

    iv_image = (ImageView) findViewById(R.id.imageID);

    else

    iv_image= (ImageView) findviewbyID(R.id.anotherImageID); 
```

### xml

```
<ImageView
android:id="@+id/imageID"
android:layout_width="50dip"
android:layout_height="50dip"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:18:04.927

我建议您将图像放在资产文件夹中并按性别命名。例如，watchwatch_male.png、watchwatch_female.jpeg 等。

然后您可以添加以下代码来检查性别并相应地显示图像：

```
String gender;
AssetManager assetMgr = null;
Vector<String> files = new Vector<String>();
assetMgr = this.getAssets();
String[] allFiles = assetMgr.list("");
if (gender.equalsIgnoreCase("Male"))
{
    for (int i = 0; i < allFiles.length; i++) {
        if (allFiles[i].contains("_male")) {
        files.add(allFiles[i]);
        }
    }
}
if (gender.equalsIgnoreCase("Female"))
{
    for (int i = 0; i < allFiles.length; i++) {
        if (allFiles[i].contains("_female")) {
        files.add(allFiles[i]);
        }
    }
}
for (int i = 0; i < files.size(); i++) {
    //Set image
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T16:15:33.050

将每个图像的名称设置为具有表示它是男性还是女性的前缀（或后缀）。

然后，每次尝试获取图像时，检查应用程序的设置，如果用户是男性还是女性，并根据结果获取资源。

按名称获取图像的示例：

```
String mDrawableName = "my_image";
String prefix=Settings.isMale()?"male_":"female_";
String newName=prefix+mDrawableName ;
int resId=getResources().getIdentifier(newName, "drawable", getPackageName());
.... 
```

# ruby - 如何在 3 行代码中将字符串格式的毫秒转换为 Ruby 中的 HH:MM:SS 格式？

> ID：14686649
> 
> 赞同：5
> 
> 时间：2013-02-04T12:18:23.773
> 
> 标签：ruby

```
@scores_raw.each do |score_raw|
  # below is code if time was being sent in milliseconds
  hh = ((score_raw.score.to_i)/100)/3600
  mm = (hh-hh.to_i)*60
  ss = (mm-mm.to_i)*60
  crumbs = [hh,mm,ss]
  sum = crumbs.first.to_i*3600+crumbs[1].to_i*60+crumbs.last.to_i
  @scores << {:secs => sum, :hms => hh.round.to_s+":"+mm.round.to_s+":"+ss.round.to_s}
  @scores_hash << {:secs => sum, :hms => hh.round.to_s+":"+mm.round.to_s+":"+ss.round.to_s}
  # milliseconds case end
end 
```

这是我当前的代码，但我讨厌它。看起来很乱 它不仅看起来很棒。也许某个红宝石专家可以通过链接收集、减少等并使其看起来不错来告诉如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:34:07.237

时间类 ruby​​ 提供了`at`从秒中获取时间的功能。使用它会治愈。

```
miliseconds = 32290928
seconds = miliseconds/1000

Time.at(seconds).strftime("%H:%M:%S") 
```

或获取UTC时间

```
#Get UTC Time
Time.at(seconds).utc.strftime("%H:%M:%S") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T12:54:19.583

您可以将其包装在辅助方法中：

```
def format_milisecs(m)
  secs, milisecs = m.divmod(1000) # divmod returns [quotient, modulus]
  mins, secs = secs.divmod(60)
  hours, mins = mins.divmod(60)

  [secs,mins,hours].map { |e| e.to_s.rjust(2,'0') }.join ':'
end

format_milisecs 10_600_00
=> "03:13:20" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T12:54:59.040

@Mike Woodhouse 给出的不错的解决方案：

使用`divmod`：

```
t = 270921000
ss, ms = t.divmod(1000)          #=> [270921, 0]
mm, ss = ss.divmod(60)           #=> [4515, 21] 
hh, mm = mm.divmod(60)           #=> [75, 15]
dd, hh = hh.divmod(24)           #=> [3, 3]
puts "%d days, %d hours, %d minutes and %d seconds" % [dd, hh, mm, ss]
#=> 3 days, 3 hours, 15 minutes and 21 seconds 
```

答案是 [如何将 270921sec 转换为天 + 小时 + 分钟 + 秒？（红宝石）](https://stackoverflow.com/questions/2310197/how-to-convert-270921sec-into-days-hours-minutes-sec-ruby)

# c# - .NET 中 PadLeft() 和 PadRight() 的 R 等效项是什么？

> ID：14686653
> 
> 赞同：4
> 
> 时间：2013-02-04T12:18:36.590
> 
> 标签：c#, .net, r

在 .NET 中，我可以使用[`string.PadLeft()`](http://msdn.microsoft.com/en-us/library/sfw3aeeb%28v=vs.71%29.aspx)和[`string.PadRight()`](http://msdn.microsoft.com/en-us/library/system.string.padright%28v=vs.71%29.aspx)在左侧/右侧填充带有空格的字符串。

```
var myString = "test";
Console.WriteLine(myString.PadLeft(10)); //prints "      test"
Console.WriteLine(myString.PadLeft(2)); //prints "test"
Console.WriteLine(myString.PadLeft(10, '.')); //prints "......test"    
Console.WriteLine(myString.PadRight(10, '.')); //prints "test......" 
```

R中的等价物是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T12:18:36.590

使用`sprintf`，它内置于 R 中：

```
# Equivalent to .PadLeft.
sprintf("%7s", "hello") 
[1] "  hello"

# Equivalent to .PadRight.
sprintf("%-7s", "hello") 
[1] "hello  " 
```

请注意，与 .NET 一样，指定的数字是我们希望将文本放入的总宽度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T12:26:00.080

您可以将长度作为参数传递：

```
PadLeft <- function(s, x) {
  require(stringr)
  sprintf("%*s", x+str_length(s), s)
}

PadRight <- function(s, x) {
  require(stringr)
  sprintf("%*s", -str_length(s)-x, s)
}

PadLeft("hello", 3)
## [1] "   hello"
PadRight("hello", 3)
## [1] "hello   " 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T13:38:27.627

使用`str_pad`来自`stringr`：

```
library(stringr)
str_pad("hello", 10)
str_pad("hello", 10, "right")
str_pad("hello", 10, "both") 
```

# teamcity - 在 TeamCity 中使用跨项目版本命名？

> ID：14686663
> 
> 赞同：0
> 
> 时间：2013-02-04T12:18:59.503
> 
> 标签：teamcity

如果项目**A**依赖于项目**B**是否可以在 B 中使用**{** *build.vcs.number}或***A**中的另一个变量？**例如， B**的打包版本收到与**A**相同的版本。

 *******我正在使用 TeamCity 7.1.3*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:24:55.497

如果 A 通过工件或快照依赖关系依赖 B，则 A 可以通过 %dep..% 属性使用 B 中可用的任何参数，但反之亦然，您不能在 B 中使用 A 参数。******

# sql-server-2008 - 如何处理在 SQL Server 中更新同一行的两个事务

> ID：14686671
> 
> 赞同：1
> 
> 时间：2013-02-04T12:19:17.803
> 
> 标签：sql-server-2008

我有以下情况，我想处理：

值表：

```
id int
val varchar(20)
used bit
flag int 
```

我想找到第一行 WHERE used = 0 AND flag IS NULL 并在'flag'中粘贴一些东西。一旦完成，任何其他用户将无法使用该行（因为标志不为空）

当然，这很简单：

```
UPDATE top (1) mytable
SET flag = someUniqueValue
WHERE used = 0
  AND flag IS NULL 
```

我想知道的是，如果两个用户同时运行相同的 UPDATE 会发生什么。显然，一个人会先到达那里。

我不知道如何去测试这个场景，所以无法找到自己。

第二个用户会覆盖第一个用户吗？（立即或在锁被释放后？）

第二个用户是否被锁定并出现错误？（如果是这样，我该如何检测错误？）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:13:32.900

第二个用户将覆盖第一个用户。除非包含在事务中，否则它不会被锁定。检查此[链接](https://dba.stackexchange.com/questions/9177/default-sql-server-2008-locking-behaviour)....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:15:30.413

好的，经过一番研究，我找到了自己的答案。

看来我必须锁定表，进行更新，然后释放表锁。以下 sql 一次性完成所有这些操作：

```
UPDATE top (1) mytable WITH (TABLOCKX)
SET flag = someUniqueValue
WHERE used = 0
  AND flag IS NULL 
```

为了测试它，我运行了两个循环（每个循环 10000 个循环 - 有点过头但成功了）。第一个循环插入一个值，第二个循环插入另一个值。最终结果表明，当两个循环都运行完毕时，表中的每个值正好有 10000 个。

# javascript - 将事件函数中的对象作为参数传递给另一个事件函数

> ID：14686673
> 
> 赞同：0
> 
> 时间：2013-02-04T12:19:29.470
> 
> 标签：javascript, backbone.js, backbone-events

我正在尝试将从 func1 中的服务器检索到的数据对象作为参数传递给 func2，但不能按我的意愿工作，请参阅代码：

```
var MyView = Backbone.View.extend({
    el: $("#page"),
    events: {
        "click #button1" : "func1",
        "click #button2" : "func2"
    },
    ......................,

    func1: function(){
         var registData = {myData: "123"};
         // post registData to server
         $.post('/', registData, function(data){
         // server response with a data
          this.func2(data);
    },

    func2: function(data){
        console.log(data);
    }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:21:20.020

`this`在您的回调中不是`func2`定义的对象。

你可以这样做 ：

```
func1: function(){
     var that = this;
     var registData = {myData: "123"};
     // post registData to server
     $.post('/', registData, function(data){
         // server response with a data
         that.func2(data);
     });
}, 
```

# php - 不能将 stdClass 类型的对象用作数组 magento

> ID：14686682
> 
> 赞同：2
> 
> 时间：2013-02-04T12:19:43.417
> 
> 标签：php, api, magento, soap

> **可能重复：**
> [调试 PHP SOAP 调用](https://stackoverflow.com/questions/3973979/debugging-php-soap-call)

这是我第一次使用soap api并且我已经准备了这个脚本但是我得到了
“不能使用stdClass类型的对象作为数组”错误，请告诉我检索数据的正确方法

```
<?php
// Magento login information 
$mage_url = 'http://localhost/magento//index.php/api/V2_soap?wsdl=1'; 
$mage_user = 'rohit'; 
$mage_api_key = '1234567890'; 
// Initialize the SOAP client 
$soap = new SoapClient( $mage_url ); 
// Login to Magento 
$session_id = $soap->login( $mage_user, $mage_api_key );
print_r($session_id);
 ?>

<?php 
$resources = $soap->resources( $session_id );
if( is_array( $resources ) && !empty( $resources )) { ?> 
<?php foreach( $resources as $resource ) { ?> 
<h1><?php echo $resource['title']; ?></h1> 
Name: <?php echo $resource['name']; ?><br/>
Aliases: <?php echo implode( ',', $resource['aliases'] ); ?> 
<table> 
    <tr> 
        <th>Title</th> 
        <th>Path</th> 
        <th>Name</th> 
    </tr> 
    <?php foreach( $resource['methods'] as $method ) { ?> 
    <tr> 
        <td><?php echo $method['title']; ?></td> 
        <td><?php echo $method['path']; ?></td> 
        <td><?php echo $method['name']; ?></td> 
        <td><?php echo implode( ',', $method['aliases'] ); ?></td> 
    </tr> 
    <?php } ?> 
</table> 
<?php } ?> 
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:21:15.947

你在哪一行得到错误？

[http://php.net/manual/ru/function.get-object-vars.php](http://php.net/manual/ru/function.get-object-vars.php)

```
$array = get_object_vars($object); 
```

# iphone - NSUserDefaults NSObject 和 NSArray 对象

> ID：14686683
> 
> 赞同：7
> 
> 时间：2013-02-04T12:19:45.273
> 
> 标签：iphone, nsuserdefaults, nscoding

我正在尝试将对象保存在 中`NSUserDefaults`，在此站点上遇到了许多问题，但无法解决问题，我`NSObject`有`NSMutableArray`另一个对象。就像这里的主要对象是`HotelDC`，它有一个数组“特征”一个`FeactureDC`对象数组。

这是我的代码：

```
- (id)initWithCoder:(NSCoder *)decoder {
self = [[HotelDC alloc] init];
if (self != nil) {

    self.hotel_id = [decoder decodeIntegerForKey:@"hotel_id"];
    self.name = [decoder decodeObjectForKey:@"name"];
    self.features = [decoder decodeObjectForKey:@"features"];

}
return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {

[encoder encodeInt:hotel_id forKey:@"hotel_id"];
[encoder encodeObject:name forKey:@"name"];
[encoder encodeObject:features forKey:@"features"];//its a mutable array
} 
```

我应该如何保存和检索？我收到错误

```
 Attempt to insert non-property value '<HotelDC: 0xa600fe0>' of class 'HotelDC'. 
 Note that dictionaries and arrays in property lists must also contain only property values. 
```

**解决方案 ：**

```
//Setting
NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:hotelObjSelected];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:myEncodedObject forKey:@"selectHotelObject"];

[[NSUserDefaults standardUserDefaults] synchronize];

// retrieving
NSData *data = [defaults objectForKey:@"selectHotelObject"];
hotelObjSelected = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:40:40.830

`NSUserDefaults`由属性列表支持。唉，属性列表不能包含序列化对象。引用[手册](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)：

> 默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。如果要存储任何其他类型的对象，通常应该将其归档以创建 NSData 的实例

您必须创建自己的序列化数据文件以直接保存对象，或将对象序列化为允许的类型之一。烦人的是，`NSUserDefaults`不调用`encodeWithCoder`- 它只是筛选传递给`setObject:forKey:`. 最好的办法是序列化`HotelDC`你自己的字段，或者将对象归档到一个`NSData`实例并存储它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:06:46.500

我通过以下方式做到了这一点。检查它。下面的代码在 for 循环中。

```
 NSMutableArray *newEventArray = [[NSMutableArray alloc] init];
                    [newEventArray addObject:title];
                    [newEventArray addObject:alarmDate];

 NSArray *iCalAlarmArray = [[NSUserDefaults standardUserDefaults] arrayForKey:@"alarmList"];
                    if(iCalAlarmArray == nil || [iCalAlarmArray count] <= 0)
                    {
                        iCalAlarmArray = [[NSMutableArray alloc] init];
                    }

iCalAlarmArray = [iCalAlarmArray arrayByAddingObject:newEventArray];

[[NSUserDefaults standardUserDefaults] setObject:iCalAlarmArray forKey:@"alarmList"];

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

愿这对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:38:32.993

您应该在FeatureDC中编写类似的编码和解码方法并将其存储在一个数组中，然后在此处进行编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T12:53:37.500

默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。如果要存储任何其他类型的对象，通常应该将其归档以创建 NSData 的实例

# ubuntu - Aws 实例显示比根卷更多的磁盘空间

> ID：14686689
> 
> 赞同：1
> 
> 时间：2013-02-04T12:20:06.870
> 
> 标签：ubuntu, amazon-web-services, amazon-ec2, ubuntu-10.04

我正在运行几个 aws ec2 ubuntu 实例，今天我刚刚检查了“df -h”，我发现卷中有一个分区，它说我有大约 355GB 的空间，它不是根卷。'/mnt' 卷安装在那个说 '/dev/sdb' 的特定卷中，只是出于好奇，我想知道它有什么作用？我可以从卷中删除该分区吗？或者我可以使用该分区来部署我的代码吗？帮我抬起头来。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:31:17.363

这就是 AWS 所说的临时卷或实例存储。它不是 EBS 卷，只是托管您的实例的机器上的空间。不同大小的 EC2 实例具有不同的可用存储量（微型实例没有）。一些 AMI 不会自动挂载这些卷；它看起来像你的 Ubuntu AMI。

继续将其用于暂存空间和部署之类的事情。实际上，您可以将它用于任何事情。但是要意识到它不如 EBS 卷那么健壮，并且只要您的实例停止，它就会消失。此外，AWS 表示，实例存储的随机访问行为比 EBS 卷更差，但顺序读取和写入行为更好。

# git - 错误推送后如何删除远程分支

> ID：14686692
> 
> 赞同：0
> 
> 时间：2013-02-04T12:20:18.357
> 
> 标签：git

我是 git 新手，在推送期间我在远程分支名称中犯了一个拼写错误。

```
git push remote/branch_with_typo_mistake. 
```

然后在远程服务器上创建了一个新分支。

我怎样才能从服务器中**完全**删除这个新的不需要的分支？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:23:49.363

使用`git push remote :branch_with_typo_mistake`.
注意分支名称前的冒号。

# javascript - 需要较少限制的 json 解析器

> ID：14686693
> 
> 赞同：2
> 
> 时间：2013-02-04T12:20:18.937
> 
> 标签：javascript, jquery, json, knockout.js

我需要将格式为 json 的不同字符串传递给 json 解析器。

问题是 jQuery.parseJSON() 和 JSON.parse() 只支持非常严格的 json 格式：

> 传入格式错误的 JSON 字符串可能会导致抛出异常。例如，以下都是格式错误的 JSON 字符串：
> 
> {test: 1} （test 周围没有双引号）。
> 
> {'test': 1} （'test' 使用单引号而不是双引号）。

是否有一个限制较少的解析器允许传递这样的值（不带引号或带单引号）？

顺便说一句，我使用的是 KO 2.2.1，所以如果它有类似的东西会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-09T16:12:41.330

有一个名为[json](https://github.com/rjrodger/jsonic)的节点模块可以解析非严格的 JSON。

```
npm install jsonic 
```

你也可以使用 eval：

```
var parsed = eval(json) 
```

小心，因为`eval`它也可以运行代码，所以你必须确保你知道你在解析什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:40:47.873

没有不那么严格的 JSON 解析器这样的东西。您要么处理格式正确的 JSON，要么根本不处理 JSON。要解析您的自定义格式，您可能需要查看[Crockford 的解析器](https://github.com/douglascrockford/JSON-js)源代码，并对其进行修改以满足您的需要。

或者，对于一个快速而肮脏的解决方案，您可能只是使用[`eval`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)（但请注意[它的使用具有安全隐患](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)）。

# c++ - 非双字对齐像素到双字对齐位图

> ID：14686694
> 
> 赞同：0
> 
> 时间：2013-02-04T12:20:22.350
> 
> 标签：c++, visual-c++, dword

我必须将不是 DWORD 对齐的原始像素数据（行 *col = 479 * 638）转换为 DWORD 对齐的位图数据。我几乎没有疑问。

1）当我说 d 字对齐时，它是关于分配 dword 对齐的总内存还是关于使宽度 DWORD 对齐？

2）说如果它是关于使实际宽度为 DWORD 对齐，那么由于 DWORD 对齐，我在末尾添加了额外的 2 个字节以使宽度 = 640。但是当我从源到目标进行 memcopy 时，它会留下深黑色底部的线。但我不想要这些暗线，因为它会与实际图像产生混淆。那么我怎样才能避免最后的这条黑线呢？

为了解决这个问题，我假设这是关于分配的总内存，它是双字对齐的。我分配了那么多双字对齐的内存。

```
bitmapData = (LPBYTE) GlobalAlloc(GMEM_FIXED, bmiHeader->biSizeImage); 
```

在哪里 `bmiHeader->biSizeImage = nrows * dowrdalignedwidth * BPP.`

在做实际的 memcopy 时，我正在复制和写入`rows*cols*BPP`. 这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:48:09.100

图像的 DWORD 对齐通常是针对步幅，即宽度，并且是以字节为单位，而不是像素。现在，您正在将像素数更改为 4 的倍数，但这将使每行的总字节数增加很多，实际上可能增加了 8 个字节。

您所做的是计算（列 * 每像素位数），然后将其对齐到 32 位以获得您的步幅或宽度。然后你可以将它乘以高度以获得完整的图像大小。

因此，对于 479 * 638 的图像，638 是列，因此是宽度。
如果您的图像是每像素 4 个字节，那么您不需要做任何特别的事情，因为 DWORD 是 4 个字节，所以您的总字节宽度是 4 个字节或 32 位的倍数，638 * 4 = 2552。所以只需乘以它通过高度来获得以字节为单位的总图像大小。

但是，如果您的图像是每像素 3 个字节，则 638 * 3 = 1914 和 1914 不是 4 的偶数倍。因此您需要将 1914 字节填充到下一个 4 的倍数。

我通常在 C# 中这样做，所以我使用的公式是：

((宽度 & bitsPerPixel) + 31) & ~31

然后将结果除以 8 以根据需要以字节而不是位来获得它。

因此，在您的情况下，如果您执行 (638 * 24) / 8 以获得 1914 字节，这不是 DWORD 对齐的值，但使用上面的公式您会得到 1916，它是 4 字节的偶数倍，并且是您的步幅的正确值.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-19T19:40:12.233

我会说 4bpp 意味着每像素 4 位而不是字节:) 因此，上面的数学会有所不同

# regex - 如何将 vCard 所有属性生成到正则表达式中？

> ID：14686696
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:20:39.963
> 
> 标签：regex, c#-4.0, vcf-vcard, argumentexception

我想为 vCard 属性生成正则表达式。

例如：

版本：

```
Regex regex = new Regex(@"(?<strElement>(VERSION))   (:(?<strVERSION>[^\n\r]*))", options);
 Match  m = regex.Match(s); 
```

如何编写其他 vcard proparty，如 ADR、AGENT、PHOTO、ETC...

[http://en.wikipedia.org/wiki/VCard#hCard_1.0](http://en.wikipedia.org/wiki/VCard#hCard_1.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:55:12.473

对于这种简单的格式，最好避免使用正则表达式并使用简单的字符串操作。例如，文本可以用 \n 分割，然后每一行可以用分号分割。

如果您想继续使用正则表达式，请尝试将 VERSION 替换为 \w+ 并将“” 替换为“*”。我也不确定第二个分组是否必要。此外，可以添加 ^ 和 $ （然后应该使用多行正则表达式选项）：

```
@"^(?<strElement>(\w+)) *:(?<strVERSION>.*)$" 
```

# jquery - jQuery UI Sortable - 防止放在一个特定的列表上

> ID：14686697
> 
> 赞同：5
> 
> 时间：2013-02-04T12:20:40.627
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有 3 个无序列表（例如和） `#list1`，目前，用户可以在这三个列表之间自由移动。我将如何防止任何物品被丢弃？`#list2``#list3``<li>``#list3`

用户应该能够在`#list1`和之间自由移动项目`#list2`，并且能够将项目*从* `#list3`任何其他列表中移动，但不能将项目放入`#list3`（无论它来自哪个列表）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:46:36.157

如果从`stop`or`beforeStop`方法返回 false，它将取消排序。

该`.ui-sortable-placeholder`元素在`beforeStop`被调用时仍然存在，因此这可能是检查该位置是否存在的最简单的地方`#list3`：

```
myElement.sortable({
    beforeStop: function (event, ui) {
        if ($("#list3").find('.ui-sortable-placeholder').length) {
            // about to drop item into #list3, so cancel the sort
            return false;
        }
    }
}); 
```

**交替：**

我不确定你是如何在多个列表上实例化可排序的（因为我之前没有使用过该`connectWith`选项），但如果你在每个列表上独立调用它，你甚至可能不需要`find()`检查：

```
$("#list1").sortable({
    connectWith: '#list2, #list3'
});
$("#list2").sortable({
    connectWith: '#list1, #list3'
});
$("#list3").sortable({
    connectWith: '#list1, #list3',
    stop: function() { return false; }
}); 
```

不确定第二种方法是否有效，但如果您的代码已经具有类似的结构，则可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:08:30.430

尝试

```
$("#list1,#list2,#list3").sortable({
    connectWith: "#list1, #list2"
}); 
```

（当然还有其他可排序的选项）

# java - 将数据传递给表单时重定向后获取？

> ID：14686700
> 
> 赞同：2
> 
> 时间：2013-02-04T12:20:50.180
> 
> 标签：java, servlets, redirect, scope, post-redirect-get

我有几个场景，其中 servlet 需要从数据库中检索到的记录将数据传递给 JSP 中的表单。目前，我将此信息存储在请求中，使用 RequestDispatcher 转发到页面，一切都很好。

但是，这不符合 PRG 模式 (AFAIK)，当然这意味着刷新生成的 JSP 意味着重新运行 servlet，这是不可取的。

我当然可以将这些值存储在会话中，但这意味着之后清除它们，甚至使用会话似乎有点像显示数据库中的记录的黑客行为。

我只是想知道在这种情况下最好的做法是什么？我应该继续使用请求、使用会话还是其他一些技术？

提前致谢。

**编辑：** 在阅读了几篇文章和堆栈溢出答案之后，我找不到任何其他选项，而不是在将数据从 servlet 传递到 JSP 时使用请求和调度程序。这对我来说似乎不对，但会议也不对。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:51:41.323

我不确定我是否完全理解这个问题，但有两种模式是最佳实践：

1.  总是通过一个控制器，它填充模型，将它存储在请求中，并分派到一个视图，该视图显示模型中的数据。这就是MVC模式
2.  始终在成功的非幂等请求（即 POST，如果您尊重 HTTP 协议）后重定向。这就是重定向后获取模式。

所以这意味着你应该拥有：

*   请求 1 转到一个 servlet。
*   servlet 获取要在表单中显示的数据并存储在请求中，然后转发给 JSP
*   JSP 显示表单
*   表单提交给 servlet（请求 2）
*   servlet 将数据存储在数据库中，为创建的数据生成一个 ID
*   servlet 重定向到类似的`/product?id=<generatedId>`URL`/product/<generatedId>`
*   浏览器向该 URL 发送请求（请求 3）。此请求转到 servlet
*   servlet 从数据库中获取由 ID 标识的数据。它将数据存储到请求中，并转发到 JSP
*   JSP 显示数据。

当然，您可以选择重定向到其他页面，例如产品列表。

如果在从 servlet 转发到 JSP 时使用请求存储数据让您感到困扰，那么这不应该困扰您：这是唯一干净的方法。数据将仅限于请求，并在处理请求时进行垃圾收集。

# iphone - 在 iOS 6 上的 UIWebView 中全屏播放 youtube 视频

> ID：14686701
> 
> 赞同：2
> 
> 时间：2013-02-04T12:20:50.720
> 
> 标签：iphone, ios, uiwebview, youtube, fullscreen

我在`UIWebView`. 默认情况下，视频是内联的。当我切换到全屏（本机播放器按钮）时，视频播放器被调整为全屏，然后退出播放并刷新页面。

这很好用，`iOS5`但不是`iOS6`。

这在 iPhone cos player 在视频开始播放后立即进入全屏模式时更为明显。因此，此视频无法在 iPhone 设备上使用`iOS6.x`.

我知道`Apple`改变了它关于 youtube 视频的政策。但这对我有什么帮助？如何确保视频也在全屏模式下播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:03:20.667

`-(void)viewWillDisappear`如果您以全屏模式播放视频，现在（iOS6）会调用

尝试注册 UIMoviePlayerControllerDidEnter*(/Exit)*FullscreenNotification 并修改 viewWillDisappear 就像[UIWebView 电影播放器​​被解雇 iOS 6 错误](https://stackoverflow.com/questions/12660857/uiwebview-movie-player-getting-dismissed-ios-6-bug)

# bash - 用于执行另一个脚本的用户输入的 Bash 脚本

> ID：14686710
> 
> 赞同：0
> 
> 时间：2013-02-04T12:21:23.133
> 
> 标签：bash

我正在创建一个脚本，但我被卡住了，因为我需要它来刺激用户输入另一个被调用的脚本。我可以通过以下方式回答第一个问题： echo "y" | othercommand.sh 但是我需要激发其他两个问题的答案，我该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:28:37.860

假设您要回答`y`, `y`,`n`三个问题，您可以使用如下所示的[here-doc ：](http://tldp.org/LDP/abs/html/here-docs.html)

```
othercommand.sh << END
y
y
n
END 
```

# ruby - Show tooltip programmatically in StockChart for multiples series (highchart)

> ID：14686719
> 
> 赞同：2
> 
> 时间：2013-02-04T12:22:13.373
> 
> 标签：ruby, tooltip, highcharts, highstock

I'm working on a stockchart and i would like to show the highstock tooltip programmatically as [asked here](https://stackoverflow.com/questions/14645780/show-tooltip-of-a-column-chart-programmatically-in-stockchart-highchart).

I managed to solve this problem but now, my goal is to show the tooltip for **all series** (the same behavior when i select a point with the mouse - please check [this example](http://www.highcharts.com/stock/demo/compare)).

Is that possible?

Here the key code ([more code](http://jsfiddle.net/JMarques/cf7wq/4/)):

```
xchart.tooltip.refresh([xchart.series[0].points[i]]);
//DOESN'T WORK
//chart.tooltip.refresh([chart.series.points[i]]);
//DOESN'T WORK ALSO
//chart.tooltip.refresh([chart.series[0].points[i]]);
//chart.tooltip.refresh([chart.series[1].points[i]]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:12:31.300

Just enable sharing for tooltip. And refresh both series's tooltip by giving the points of array that you want to show on the tooltip.

```
tooltip : {
          valueDecimals : 2,
          shared: true
}

xchart.tooltip.refresh([xchart.series[0].points[i], xchart.series[1].points[i]]); 
```

> [http://jsfiddle.net/cf7wq/5/](http://jsfiddle.net/cf7wq/5/)

And seems like showing two different tooltips without sharing is not possible through only api itself.

> [http://highslide.com/forum/viewtopic.php?f=9&t=12670](http://highslide.com/forum/viewtopic.php?f=9&t=12670)

# android - 尝试更改 Android 标题以使其看起来更好：requestWindowFeature

> ID：14686721
> 
> 赞同：2
> 
> 时间：2013-02-04T12:22:18.840
> 
> 标签：android

示例代码：

```
// activity contains different controls so inherits from Activity
public class Main extends Activity implements OnClickListener, TextWatcher  {

protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        boolean titleSupported = false;            
        if (true) { // for on/off testing
          titleSupported = this.requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        } 
        setContentView(R.layout.activity_main);

        // see: http://stackoverflow.com/questions/3438276/change-title-bar-text-in-android
        if (titleSupported)) {
          getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);
          final TextView myTitleText = (TextView) findViewById(R.id.myTitle);
          if ( myTitleText != null ) {
            myTitleText.setText("@string/app_name");                    
          }                  
        } 
```

当我包含“requestWindowFeature”时，应用程序在模拟器中停止/崩溃。我不明白为什么。我是 Eclipse 和 Android 的新手，但是从我可以搜索的内容来看，我正在以正确的顺序做事。对原因有任何想法吗？

**在“setContentView ”***之前*使用**“requestWindowFeature”** ，我得到：

 ***> 02-04 12:35:05.883: E/AndroidRuntime(755): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.xxx.yyy/com.xxx.yyy.Main}: android.util.AndroidRuntimeException: 你无法将自定义标题与其他标题功能结合使用

**在“requestWindowFeature”***之前*使用**“setContentView”** ，我得到：

 ***> 02-04 12:32:32.660: E/AndroidRuntime(784): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.xxx.yyy/com.xxx.yyy.Main}: android.util.AndroidRuntimeException: requestFeature () 必须在添加内容之前调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:26:57.520

在 setcontentview 之后进行 requestfeature 调用

```
 setContentView(R.layout.activity_main);
    titleSupported = this.requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T09:53:05.597

尝试设置

`<item name="android:windowNoTitle">false</item>`

在你的主题中。******

# ios - 在 IOS 中手写到文本转换 API

> ID：14686722
> 
> 赞同：0
> 
> 时间：2013-02-04T12:22:19.467
> 
> 标签：ios

我想知道任何在IOS（Objective C）中将手写转换为文本的API，或者一些用于转换的示例代码。我不想使用任何第三方 API，有人可以分享代码吗？

谢谢，莉拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:23:15.500

iOS 中没有内置的手写识别 API。您必须使用第 3 方代码（或自己编写）。

编辑：嗯，从技术上讲，一些图像键盘执行基本的字符识别，但西方语言肯定没有。

# list - 在 Haskell 中旋转字符矩阵图像

> ID：14686731
> 
> 赞同：2
> 
> 时间：2013-02-04T12:22:53.757
> 
> 标签：list, haskell, matrix, rotation

我目前正在为我的班级分配作业，其中一个要求是创建一个名为 rotate90 的函数。这个函数基本上接受一个 [[Char]] 并将其顺时针旋转 90 度。

例如：

```
type Picture = [[Char]]
pic :: Picture
pic = [ "123",
    "456",
    "789" ] 
```

变成：

```
[ "741",
  "852",
  "963" ] 
```

到目前为止，我的代码看起来像这样：

```
rotate90 :: Picture -> Picture
rotate90 (x:xs)
    | (x:xs) == []          = []
    | xs == [] && x /= []   = formRow ([[]]) (formCol x)
    | xs /= []              = formRow (rotate90 xs) (formCol x)

formCol :: [Char] -> [[Char]]
formCol y = [[a] | a <- y]

formRow :: [[Char]] -> [[Char]] -> [[Char]]
formRow (x:xs) (y:ys)
    | xs == [] || ys == []  = (x++y):[]
    | otherwise             = (x++y):formRow xs ys 
```

现在它只打印矩阵的第一“行”，在示例中是“741”。如何让它打印其余部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:29:16.520

一个简单的实现[`Data.List.transpose`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3atranspose)是

```
-- | Rotate clockwise
cw = map reverse . transpose
-- | Rotate counter-clockwise
cw = reverse . transpose 
```

转置原始图片会产生

```
147
258
369 
```

并反转每一行导致旋转的图片

```
741
852
963 
```

通常，您可以使用以下三个函数的组合来表示任意方向的镜像和旋转：

```
transpose
map reverse -- mirror left <-> right
reverse -- mirror top <-> bottom 
```

# javascript - 简单的 jQuery 函数不拾取点击函数

> ID：14686733
> 
> 赞同：0
> 
> 时间：2013-02-04T12:22:57.770
> 
> 标签：javascript, jquery, function

我正在尝试我的第一个 jQuery 函数。需要发生的是将表单分配给该功能。当用户单击提交按钮时，它需要首先对函数中的每个 :input 字段进行验证。

我正在分配一个表单作为我的函数的选择器：

```
 $("form[name='form_name']").validator(); 
```

然后将其传递给函数并分配给名为“selected_form”的函数属性。在我的 jQuery 函数中，我有另一个函数需要等待提交按钮被单击，然后它需要遍历所有 :input 表单元素并处理简单的验证。

现在的问题是：

a）在我的 jQuery 函数中，我正在调用`return validate();`Validate 然后检查按钮是否被单击。我怀疑由于该函数已运行并且没有单击任何按钮，它会继续并基本上将 validate() 函数返回为 false 而不进行任何检查。我想我需要自定义它以几乎等到按下按钮，但我真的不知道该怎么做。

b)`$(selected_form+" :input").each(function() { ... }`不起作用，因为它似乎无法将其用作选定对象。我需要遍历“selected_form”属性并仅选择 :input 字段。有什么帮助吗？

c）如果您对构建适当的 jQuery 函数有任何其他建议或最佳实践，请提供帮助，这是我的第一次尝试，我宁愿现在学习最佳实践，以遵循我自己的想法。

```
 (function($) {
$.fn.validator = function(user_options) {

    var default_options = {
        exclusions: false,
        rules: false,
        submit_btn_name: 'event_form_submit'
    };

    var selected_form = this;
    var selected_element = false;
    var element_type = false;

    var options = $.extend(default_options,user_options);

    function validate() {

        // Run only if form has been submitted: (this does not appear to work now, the form gets submitted without the return false;
        $("input[type='"+options.submit_name+"']").click(function(event) {

            event.preventDefault();

            // The selector here appears to be wrong?
            $(selected_form+" :input").each(function() {

                // Individual element validation will happen here, for now I am just looking to log the element types :)

                selected_element = this;
                console.log(get_element_type());

            });
            return false;
        });    
        return false;
    };

    function get_element_type() {
        return element_type = element.type;
    }

    return validate();

}
})(jQuery);

 // Run the validator: 
 $(document).ready(function() {
     $("form[name='tepg_form_processor']").validator(); 
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:00:47.583

正如 jalynn2 和其他人所提到的，我的选择器不正确。固定和工作:)

# lua - 在 Lua 中从外部源运行脚本指令

> ID：14686734
> 
> 赞同：1
> 
> 时间：2013-02-04T12:23:13.413
> 
> 标签：lua, minecraft, computercraft

好的，我想知道是否有一种方法可以使用 Lua 从外部源运行脚本。无论是 .txt 格式的另一个文件还是来自 pastebin 的文件，你有什么，运行代码并等待所述代码完成，然后继续执行其余的功能。我不太确定它是如何工作的，但这基本上是我的想法，并不是实际的代码。

```
function runStuff()
print("checking for stuff")
run.script(derp.txt)
wait for script
   if run.script == finished
   continue program
      elseif nil
   print("looks like this script sucks.")
   end
end
runStuff() 
```

例如，“derp.txt”包含的是：

```
function lookFile()
   if herp.txt exists then
      rename herp.txt to herp.lua
   else
      nil
   end
end
lookFile() 
```

我还是 Lua 的新手，所以我在这里像个白痴一样编码，但希望你能得到我的照片。我正在开发一个项目，该项目的作用类似于基于 pastebin 或其他任何提供 lua 脚本原始格式输出的存储库的安装程序包，我将使用这个想法来调用脚本运行外部。因此，当我提供程序的“首次运行”版本时，它会调用一个 lua 脚本，该脚本会调用另一个 lua 脚本并安装该脚本，然后关闭。

这是我的世界，请注意。ComputerCraft 让我对 Lua 产生了兴趣，但无论如何，希望你能明白我想要弄清楚的要点。希望这是可行的，如果没有，我只需要想出别的办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:07:33.503

要加载和执行 Lua 代码片段，您可以使用如下内容：

```
local http = require("socket.http")
local response, err = http.request("url to some Lua code")
if not response then error(err) end
local f, err = (loadstring or load)(response)
if not f then error(err) end
print("done with "..response)
-- make sure you read on (in)security implications of running remote code
-- f() -- call the function based on the remote code 
```

您可能需要使用[沙盒](http://lua-users.org/wiki/SandBoxes)。

# java - JProfiler 7.2.2 远程 JVM 崩溃

> ID：14686738
> 
> 赞同：1
> 
> 时间：2013-02-04T12:23:21.823
> 
> 标签：java, tomcat, profiling, jprofiler, jprobe

我将 Jprofiler 远程连接到 Linux 服务器。但是在连接最终远程JVM崩溃时。JProfiler GUI 的错误消息如下：

```
The network connection has been lost. The JVM might have terminated unexpectedly.

If the JVM has crashed, please try the following strategies:
*Reduce the -Xmx value of the profiled application.
*Change your profiling settings 
```

我的远程 JVM java 版本是 1.6.0_33 Java Hotspot(TM) 64-Bit Server VM

为什么说要减少已分析应用程序的 -Xmx 值，或者如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T11:58:36.000

I had similar problem with JProfiler 7.2.3 after specifying JVM GC settings for JBoss 4.2.3:

*-XX:+UseConcMarkSweepGC*

*-XX:+UseParNewGC*

It worked again for me after removal of these settings.

# search - Wicket dataprovider 查询/搜索时间

> ID：14686739
> 
> 赞同：1
> 
> 时间：2013-02-04T12:23:40.190
> 
> 标签：search, datatable, wicket, timing, provider

我正在使用`DataTable`. Datatable 使用 IDataProvider 填充工具栏和单元格。

我试图弄清楚进行查询所花费的时间。一个典型的查询涉及调用

*   `size(...)`
*   `iterator(...)`
*   `model(..)`

什么是计算这些方法花费的时间的好方法？我可以`System.currentTimeMillis()`在每个调用中实现类似的东西，但是这样做的“适当”位置是什么？

而且，我想在工具栏中显示这个时间，所以我应该确保“数据加载”部分何时完成。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:11:06.253

由于您实际上不是在测量 DataProvider，而是在 Lucene 方法返回结果，所以我宁愿在 dataprovider 调用的方法中记录时间（假设有类似搜索服务类的东西）。

作为一个优势，其他`DataProviders`调用相同方法的人也将被测量，而无需接触它们。也许有一个更中心的地方可以放置它？每个搜索请求都必须通过的单一方法？

就个人而言，我喜欢`StopWatch`来自[Apache Commons Lang](http://commons.apache.org/lang/)库，它使用起来非常不言自明。但是，如果您还不需要该库，那么仅将其添加用于时间测量可能会有点过大。`currentTimeMillies`工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:21:19.520

如果有的话我会测量`iterator()`方法中的时间。除非你真的有一个很大的清单并且时间`size()`很重要，否则我会说这已经足够了。我看不到一种方法可以为您提供在`iterator()`某处方法中测量的执行时间。

我知道有类似的东西：[http](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/devutils/inspector/RenderPerformanceListener.html) ://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/devutils/inspector/RenderPerformanceListener.html但我从未使用过它。

您也可以尝试挂接到`RequestCycle`. 有一种方法`getStartTime()` [http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/cycle/RequestCycle.html#getStartTime()](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/cycle/RequestCycle.html#getStartTime())。你可以结束测量`onEndRequest()`。

RequestCycle 也有监听器。[http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/cycle/IRequestCycleListener.html](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/request/cycle/IRequestCycleListener.html) 有`onBeginRequest`和`onEndRequest`方法。也许这会有所帮助。

# ios - 从加载器复制 bitmapData

> ID：14686741
> 
> 赞同：0
> 
> 时间：2013-02-04T12:23:45.507
> 
> 标签：ios, actionscript-3, flash, loader, bitmapdata

我正在尝试使用 Flash CS6 开发适用于 iOS 的应用程序。我已经使用加载器导入了图像。我现在希望能够创建加载器位图数据的重复实例，并且一直在尝试：

```
var my_loader:Loader = new Loader();
        my_loader.load(new URLRequest("cats.jpg"));
        my_loader.scaleX = 0.2;
        my_loader.scaleY = 0.2;
        addChild(my_loader);

        var duplicationBitmap:Bitmap = new Bitmap(Bitmap(my_loader.content).bitmapData);
        duplicationBitmap.x = 300;
        duplicationBitmap.y = 300;
        addChild(duplicationBitmap); 
```

不幸的是，当我测试代码时它不起作用。我得到了初始加载的图像，但没有重复，我还得到一个输出错误：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在主要（）

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:31:20.523

Bitmap(my_loader.content) 是一个显示对象，而不是位图，它会给你空指针错误。要复制 bitmapData，您应该使用 BitmapData。[克隆](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#clone%28%29)（）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:46:49.863

`BitmapData`您可以在加载程序初始化时将加载程序绘制到对象上，然后`Bitmap`在加载程序完成时简单地使用它来创建所需数量的对象。

```
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.Loader;
import flash.events.Event;

var loaderBitmapData:BitmapData;

var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.INIT, loaderInitEventHandler);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderCompleteEventHandler);
loader.load(new URLRequest("eXO-01.png"));

function loaderInitEventHandler(event:Event):void
{
    loader.contentLoaderInfo.removeEventListener(Event.INIT, loaderInitEventHandler);

    loaderBitmapData = new BitmapData(event.target.width, event.target.height);
    loaderBitmapData.draw(event.target.loader as Loader);
}

function loaderCompleteEventHandler(event:Event):void
{
    loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, loaderCompleteEventHandler);

    createBitmaps();
}

function createBitmaps():void
{
    var image1:Bitmap = new Bitmap(loaderBitmapData);
    image1.scaleX = image1.scaleY = 0.2;

    var image2:Bitmap = new Bitmap(loaderBitmapData);
    image2.scaleX = image2.scaleY = 0.4;
    image2.x = image2.y = 100;

    addChild(image1);
    addChild(image2);
} 
```

# algorithm - 警卫和需求

> ID：14686745
> 
> 赞同：7
> 
> 时间：2013-02-04T12:24:28.927
> 
> 标签：algorithm, dynamic-programming

你有 N 个守卫排成一列，每个守卫都需要硬币。只有当他的要求低于你在到达他之前支付的全部金额时，你才可以跳过支付警卫。找出你花费最少的硬币来越过所有守卫。

我认为这是一个 DP 问题，但无法提出公式。另一种方法是对答案进行二分搜索，但我如何验证是否有多个硬币是可能的答案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T13:26:42.450

这确实是一个动态规划问题。

考虑函数，如果有分配给你 cost 的第一个守卫`f(i, j)`，它是（一个） 。您可以在 size 的表中安排功能，其中是所有警卫需求的总和。`true``i``j``f(i, j)``n x S``S`

让我们表示`d_i`为警卫的需求`i`。`f(i+1)`如果您有，您可以轻松地计算列`f(i)`，只需扫描`f(i)`并指定`f(i+1, j + d_i)`为一个 if`f(i + 1, j)`为 true 和`j < d_i`，或`f(i + 1, j)`if `j >= d_i`。

这在`O(nS)`时间和`O(S)`空间上运行（您每次只需要保留两列），这只是伪多项式（如果需求以某种方式有界并且不随 增长，则类似于二次`n`）。

`B`降低 DP 问题复杂性的一个常见技巧是获得最优解值的上限。这样，您可以修剪不必要的行，获得时间复杂度`O(nB)`（嗯，甚至`S`是一个上限，但非常幼稚）。

事实证明，在我们的例子中，`B = 2M`，其中`M`是守卫的最大需求。事实上，考虑函数，它为您提供了通过第一个守卫`best_assignment(i)`的最少硬币数量。`i`让`j`有 需求 的 卫士`M`. 如果`best_assignment(j - 1) > M`，那么显然整个序列的最佳分配是向守卫支付第一个守卫的最佳分配`j-1`并跳过其他守卫，否则上限由 给出`best_assignment(j - 1) + M < 2M`。`best_assignment(j - 1)`但是在第一种情况下可以有多少？不能超过`2M`。这可以用反证法来证明。让我们假设`best_assignment(j - 1) > 2M`。在这个任务中，守卫`j-1`是有报酬的吗？不，因为`2M - d_{j-1} > d_{j-1}`，因此不需要支付。同样的论点适用于`j-2`,`j-3`, ... `1`，因此没有支付警卫，这是荒谬的，除非`M = 0`（一个非常幼稚的情况需要检查）。

由于上界被证明是，所以上面用列和行`2M`说明的 DP解决了这个问题，时间复杂度和空间复杂度为。`n``2M``O(nM)``O(M)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:03:30.900

```
function crossCost(amtPaidAlready, curIdx, demands){
    //base case: we are at the end of the line
    if (curIdx >= demands.size()){
        return amtPaidAlready;
    }

    costIfWePay = crossCost(amtPaidAlready + demands[curIdx], curIdx+1, demands);
    //can we skip paying the guard?
    if (demands[curIdx] < amtPaidAlready){
        costIfWeDontPay = crossCost(amtPaidAlready, curIdx+1, demands);
        return min(costIfWePay, costIfWeDontPay);
    }
    //can't skip paying
    else{
        return costIfWePay;
    }
} 
```

这在 O(2^N) 时间内运行，因为每次执行它可能会调用自己两次。[它是memoization](http://en.wikipedia.org/wiki/Memoization)的一个很好的候选者，因为它是一个没有副作用的[纯函数。](http://en.wikipedia.org/wiki/Pure_function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:08:22.510

这是我的方法：

```
int guards[N];
int minSpent;

void func(int pos, int current_spent){
    if(pos > N)
        return;
    if(pos == N && current_spent < minSpent){
        minSpent = current_spent;
        return;
    }

    if(guards[pos] < current_spent)      // If current guard can be skipped
        func(pos+1,current_spent);       // just skip it to the next guard
    func(pos+1,current_spent+guards[pos]);   // In either cases try taking the current guard
} 
```

以这种方式使用：

```
minSpent = MAX_NUM; 
func(1,guards[0]); 
```

这将尝试其 O(2^N) 的所有可能性，希望这会有所帮助。

# struts2 - 在 excel 中导出嵌套的 displaytag 表

> ID：14686748
> 
> 赞同：0
> 
> 时间：2013-02-04T12:24:35.977
> 
> 标签：struts2, export-to-excel, displaytag

我使用 display tag 显示了一个嵌套表。我的嵌套表的代码是：

```
<display:table export="true" name="detailsList" id="parent" requestURI="" pagesize="1">

    <display:column property="testcaseName"  />
    <display:column property="subject"  />
    <display:column property="description"  title="Comments" />

    <c:set var="nestedName"
        value="detailsList[${parent_rowNum -1}].testList" />

    <display:column title="TestCase Details" >

        <display:table name="${nestedName}" id="child${parent_rowNum}"
            class="SimpleSublist">

            <display:column property="stepName" />
            <display:column property="description" />
            <display:column property="inputField" />
            <display:column property="inputData" />
            <display:column property="expectedResult" />
            <display:column property="remarks" />

        </display:table>

    </display:column>

</display:table> 
```

我想有相同的导出选项......但我无法弄清楚如何做到这一点..是否有任何解决方法，因为内置导出在这里不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:36:53.647

您在说哪个内置导出？如果您想将某些内容导出到 excel，则必须使用诸如[apache poi](http://poi.apache.org/) [我已经使用它并发现它很棒] 及其[示例](http://poi.apache.org/spreadsheet/quick-guide.html)之类的库以编程方式进行操作。

**更新：**

我用谷歌搜索，发现这个[显示标签链接](http://demo.displaytag.org/displaytag-examples-1.1/example-nestedtables.jsp)说嵌套表不能通过显示标签导出:(（*检查最后一行限制*）

所以上面建议的解决方案对你有用..

# html - 绝对位置在黑莓手机应用程序中不起作用

> ID：14686750
> 
> 赞同：1
> 
> 时间：2013-02-04T12:24:42.810
> 
> 标签：html, css, jquery-mobile, blackberry, mobile-application

我固定位置绝对以全屏显示我的图像。但是在黑莓中，图像没有完全显示，它被剪掉了。也就是说，它是页面的一半......这是 ios、Windows 和 android 的通用代码。这个代码在除了黑莓之外的所有 3 个平台上都可以正常工作。如果我删除了位置：绝对它在黑莓中运行良好，但它会影响其他 3 个平台。即在其他 3 个平台中剪切的图像......这是我的代码..

HTML：

```
 <div class="imageBg" id="">
    <div class="ui-grid-a">
      <div class="ui-block-a">
        <span>Block a</span>
      <div>
      <div class="ui-block-b">
        <span>Block b</span>
      <div>
   </div> 
```

CSS：

```
.imageBg    {background: url(../images/texture_bg.png) repeat;width:100%;position: absolute;height:100%;} 
```

如果有任何其他方式可以将我的图像显示为页面的全屏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:08:32.657

问题在于高度而不是位置和所有。只需用最小高度替换高度。它会起作用的。

CSS：

```
.imageBg    {background: url(../images/texture_bg.png) repeat;width:100%;position: absolute;min-height:100%;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:57:04.573

您正在尝试哪个操作系统？我从痛苦的经历中知道，在 OS5 上 position:fixed 和 position:absolute 会产生奇怪的结果。这是因为 OS5 没有在其浏览器中使用 WebKit 引擎。

我会认真考虑尝试为 BlackBerries 使用一些自定义 CSS（特别是如果它是 OS5）。

# c++ - 如何使用#ifdef 进行数据类型切换

> ID：14686751
> 
> 赞同：2
> 
> 时间：2013-02-04T12:24:48.257
> 
> 标签：c++, c, macros, typedef, type-conversion

我正在使用 Visual Studio C++。我希望能够在 double 和 long long 之间切换。如何在以下程序中使用#ifdef？我想使用更简单的解决方案来处理多个 printf 的情况。

```
//#define TYPE_SWITCH
#ifdef TYPE_SWITCH
      typedef double myType;
#else
      typedef long long myType;
#end

.
.
.
int main()
{
     myType a;
     #ifdef TYPE_SWITCH
        printf ("my value is %lf",a);      // I have many printf or scanf and I want to use a simple macro here
     #else
        printf ("your value is %l",a/10);      // I have many printf or scanf and I want to use a simple macro here
     #endif

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:27:04.160

你可以使用类似的东西：

```
//#define TYPE_SWITCH
#ifdef TYPE_SWITCH
      typedef double myType;
      #def PATTERN_MY_TYPE "%lf"
      #def MODIFICATOR(a) (a)
#else
      typedef long long myType;
      #def PATTERN_MY_TYPE "%l"
      #def MODIFICATOR(a) (a/10)
#end
#def PATTERN_INT "%d"

//...

int main() {
     myType a;
     printf(PATTERN_MY_TYPE ", " PATTERN_INT, MODIFICATOR(a), 42);
} 
```

编译器可以在编译时连接字符串，因此您可以使用`"foo" "bar"`与定义相同的方法创建字符串`"foobar"`。(`"foo" PATTERN_INT "bar"`会产生`"foo%dbar"`.

# android - Android通知查看长文本？

> ID：14686755
> 
> 赞同：0
> 
> 时间：2013-02-04T12:24:59.003
> 
> 标签：android, notifications

我的通知在“大家好？”之类的小文本中还可以，但是当它是一个不适合屏幕尺寸的句子时，我看不到它。有什么办法吗？我很难知道该怎么做..远程视图是要走的路吗？

# php - 函数 session_is_registered() 和无法修改标头信息 - 标头已由

> ID：14686760
> 
> 赞同：0
> 
> 时间：2013-02-04T12:25:16.473
> 
> 标签：php

我正在尝试创建一个带有会话的管理页面。我从 admin.php 收到以下两个错误。

```
Deprecated: Function session_is_registered() is deprecated in /home/content/95/10216895/html/test/admin.php on line 4

Warning: Cannot modify header information - headers already sent by (output started at /home/content/95/10216895/html/test/admin.php:4) in /home/content/95/10216895/html/test/admin.php on line 7 
```

代码如下所示：

```
<?php
  //Start the session
  session_start();
  //Get the user name from the previously registered super global variable
  define(ADMIN, $_SESSION['name']);

  if (!session_is_registered("admin"))
  {
    //If session not registered, redirect to login.php page
    header("location:login.php");
  }
  else
  {
    header( 'Content-Type: text/html; charset=utf-8' );
  }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head> 
```

另一个文件 check_login.php 中用于设置变量的登录检查代码如下：

```
 $sql="SELECT * FROM login_admin WHERE user_name='$myusername' and user_pass=SHA1('$mypassword')";
    //echo '<p>'.$sql.'</p>';

    $result=mysqli_query($dbC, $sql);
    //echo '<p>'.$result.'</p>';

    // Mysql_num_row is counting table row
    $count=mysqli_num_rows($result);
    // If result matched $myusername and $mypassword, table row must be 1 row
    if ($count==1)
    {
      // Register $myusername, $mypassword and redirect to file "admin.php"
      session_start();
      $_SESSION['name'] = 'admin';
      $_SESSION['password'] = 'password';
      // session_register("admin");
      // session_register("password");
      // $_myusername= $myusername;
      $_SESSION['name']= $myusername;
      header("location:admin.php");
    } 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:31:34.110

首先你有一个错字：

```
define(ADMIN,$_SESSION['name']); 
```

应该：

```
define('ADMIN',$_SESSION['name']); 
```

第二：

问题源于您实际上正在向浏览器输出一些内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head> 
```

因为 PHP 文件末尾的静态 HTML 发送 text/html 标头。

您应该将所有 HTML 代码放在一个 .php/.html 文件中，然后将其包含在脚本的末尾。

第三你应该使用：

```
isset($_SESSION['admin']) 
```

代替：

```
session_is_registered('admin') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:32:16.963

这是由于您遇到的错误而引起的问题。当您收到错误输出时发送。所以修复错误因为它只是一个通知，如果你将你的 error_reporting 设置为 0 这将起作用。

参考：[如何修复 PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

`if (!session_is_registered("admin"))`改成`if (!isset($_SESSION["admin"]))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:32:50.050

因此，关于`session_is_registered("admin")`被弃用的警告是因为，不出所料，该函数已被弃用（实际上，已从 PHP 5.4+ 中删除）。您应该使用 . 检查变量是否存在`isset($_SESSION["admin"])`。

第二个是因为，不知何故，在您发送标头之前，输出会滑出。您的代码在给定的调用之前似乎没有发送任何内容`header`，但这可能只是您的`<?php`领导者之前的一个空白字符。仔细检查您的代码，以确保您的文件以 PHP 领导者开头，而*不是其他任何*内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:34:26.050

虽然两位发帖人所说的都是真的，但生成的输出实际上是使用 session_is_registered 的 E_DEPRECATED 错误。

一旦您将其更改为其他建议之一，您就不应该有问题。

此外，您绝对应该在标头重定向后立即放置“退出”。就目前而言，PHP 将执行整个页面，即使您尝试重定向非授权用户

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T12:37:19.090

请使用 isset 函数验证是否设置了会话标头已发送错误是因为警告被视为空白因此未执行标头函数

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-04T12:28:27.063

在您最近的编辑之后，您不应使用已弃用的功能，而应使用`isset();`

`session_start`当调用之前遇到一些输出时，就会出现这种情况。

一种解决方案是`ob_start();`在`session_start();`

# sql-server - SQL-Server 对自身结果的查询

> ID：14686761
> 
> 赞同：3
> 
> 时间：2013-02-04T12:25:24.230
> 
> 标签：sql-server, tsql, loops

我正在尝试确定从数据库中删除表的风险。

数据库很大，包含数百个表。

我有一个返回与表关联的外键的查询。所以我可以给它提供我想删除的表名，它会告诉我哪些表依赖于它拥有的列。所以我还必须删除返回的表。

我的问题是，因为我需要删除这些表，所以我想查看依赖于初始结果的任何其他表。

因此，我相信我需要我的查询循环调用它上次运行的结果，直到没有更多独特的结果。

这可能吗？有没有更简单的方法来做到这一点？

编辑：这是查询：

```
SELECT
      PK.TABLE_NAME AS PrimaryTable,
      FK.TABLE_NAME AS ForeignTable,
      PT.COLUMN_NAME AS PrimaryColumn,
      CU.COLUMN_NAME AS ForeignColumn,
      C.CONSTRAINT_NAME AS ConstraintName
FROM
INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
                  SELECT i1.TABLE_NAME, i2.COLUMN_NAME
                  FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
                  INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2 ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
                  WHERE i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
                  ) PT ON PT.TABLE_NAME = PK.TABLE_NAME
WHERE PK.TABLE_NAME IN
('Table1','Table2')
ORDER BY
1,2,3,4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:09:01.717

您可以尝试使用 CTE。我发现在最终的 select 语句上编写实际的 where 子句更容易，但如果性能是一个问题，我建议您在`relations`CTE上编写 where 子句*（在 UNION ALL 之上）*

**CTE 选择语句**

```
;WITH q AS (
  SELECT
        PK.TABLE_NAME AS PrimaryTable,
        FK.TABLE_NAME AS ForeignTable,
        PT.COLUMN_NAME AS PrimaryColumn,
        CU.COLUMN_NAME AS ForeignColumn,
        C.CONSTRAINT_NAME AS ConstraintName
  FROM
  INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
  INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
  INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
  INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
  INNER JOIN (
                    SELECT i1.TABLE_NAME, i2.COLUMN_NAME
                    FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
                    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2 ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
                    WHERE i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
                    ) PT ON PT.TABLE_NAME = PK.TABLE_NAME
)
, Relations AS (
  SELECT  PrimaryTable AS Root
          , *
  FROM    q
  UNION ALL
  SELECT  r.Root
          , q.PrimaryTable
          , q.ForeignTable
          , q.PrimaryColumn
          , q.ForeignColumn
          , q.ConstraintName
  FROM    q
          INNER JOIN Relations r ON r.ForeignTable = q.PrimaryTable
)
SELECT  *
FROM    Relations
WHERE   Root IN ('Table1','Table2')
ORDER BY
1,2,3,4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:32:06.363

我想你可以创建一个全局临时表，其中包含表名字段和已处理标志，并添加初始表名。使用要删除的表的初始种子调用您的代码。将结果插入临时表。然后遍历临时表中的值，将结果添加到临时表中，确保不插入重复项，并在完成后将每个项标记为已处理。继续，直到处理完表中的每条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:51:38.797

试试这样的..

```
DECLARE @tablename varchar
DECLARE @flag bit
SET @tablename = 'some_table_name'
SET @flag-1
WHILE EXISTS(SELECT PK.TABLE_NAME AS PrimaryTable,
  FK.TABLE_NAME AS ForeignTable,
  PT.COLUMN_NAME AS PrimaryColumn,
  CU.COLUMN_NAME AS ForeignColumn . . . where PK.TABLE_NAME = @tablename)
  begin
   SET @flag=0
   SET @tablename=<assign the tables with fk referred by primarykey tables>
  end
IF(@flag=1)
 <delete query> 
```

它只是解决您的场景的一个想法，而不是完整的解决方案。

# rdf - 如何使用 dotNetRDF 修改 Firefox 的 MimeTypes.rdf？

> ID：14686764
> 
> 赞同：0
> 
> 时间：2013-02-04T12:25:31.703
> 
> 标签：rdf, dotnetrdf

对于 Firefox 识别的每种内容类型，您可以选择 Firefox 将用来处理该类型内容的操作。它将这些操作存储在一个名为[MimeTypes.rdf](http://kb.mozillazine.org/MimeTypes.rdf)的文件中。

如何使用 C# 修改此文件？我还能如何教 Firefox 如何处理新的 MIME 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:36:15.103

为什么需要使用 C# 或 dotNetRDF 显式修改它们？

通常，您可以自己手动编辑它们，方法是转到`Preferences > Applications`

我不确定您是否可以使用 dotNetRDF 来编辑此文件，因为它使用`rdf:Seq`并且`rdf:li`被认为有些过时（尽管语法合法）。虽然您可以愉快地将该文件读入 dotNetRDF，但我认为我们不支持使用这些语法结构将其序列化，因此如果 Firefox 期望这些确切的结构，您将导致文件不可读。

# c# - 错误：字符串未被识别为有效的日期时间

> ID：14686765
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:25:33.323
> 
> 标签：c#, parsing, datetime

字符串未被识别为有效的日期时间。

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.FormatException：字符串未被识别为有效的 DateTime。

源错误：

```
{
   DateTime registrationDate = Convert.ToDateTime(frmclientcollection["regdate"].ToString());
   DateTime ContractPeriod = Convert.ToDateTime(frmclientcollection["ContractPeriod"].ToString());
   var clientModel = new ClientRegistration()
   {
   }
} 
```

这是我在转换`string`为`DateTime`. 字段的名称完全正确，如视图所示。请提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:59:34.583

考虑使用 DateTime.Tryparse：

```
 string strToParse = "04-02-2013";
           DateTime result;
           if(!DateTime.TryParse(strToParse, out result))
           {
             string error = strToParse+ " is not a valid date";
   } 
```

最有可能的问题是“ frmclientcollection["ContractPeriod"] ”没有返回您期望的字符串。

# ruby-on-rails - 在 Windows 7 上安装 jruby 时出错

> ID：14686768
> 
> 赞同：0
> 
> 时间：2013-02-04T12:25:38.503
> 
> 标签：ruby-on-rails, ruby, jruby, jrubyonrails

我正在尝试在我的系统中安装 JRuby，我按照以下步骤操作：

*   从 JRuby 下载页面下载最新 JRuby 的副本。
*   使用您的存档程序解压缩文件。如果您没有可用的软件，请下载 7-Zip。
*   将名为 jruby-1.7.2 的 JRuby 文件夹直接复制到“C:/”
*   在系统上设置环境变量。右键单击“我的电脑”转到“高级”然后“环境变量”。创建这些：`JRUBY_HOME = C:/jruby-1.7.2`
*   接下来，您必须编辑 PATH 变量。添加`;C:\jruby-1.1.5\bin;`到该变量的末尾。

然后我运行命令：

```
C:\Users\sitanshu\rubyApp\jruby-1.7.2>jruby -v 
```

然后它显示以下错误：

```
jruby 1.7.2 (1.9.3p327) 2013-01-04 302c706 on Java HotSpot(TM) Client VM 1.7.0-ea-b19 [Windows Vista-x86]
NameError: uninitialized constant Java::JavaLang::ProcessBuilder::Redirect
   const_missing at org/jruby/RubyModule.java:2677
  ProcessManager at file:/C:/Users/sitanshu/rubyApp/jruby-1.7.2/lib/jruby.jar!/jruby/kernel/jruby/process_manager.rb:12
           JRuby at file:/C:/Users/sitanshu/rubyApp/jruby-1.7.2/lib/jruby.jar!/jruby/kernel/jruby/process_manager.rb:6
          (root) at file:/C:/Users/sitanshu/rubyApp/jruby-1.7.2/lib/jruby.jar!/jruby/kernel/jruby/process_manager.rb:3
            load at org/jruby/RubyKernel.java:1046
          (root) at file:/C:/Users/sitanshu/rubyApp/jruby-1.7.2/lib/jruby.jar!/jruby/kernel.rb:1 
```

那么我哪里出错了，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:37:28.880

我会测试 java 是否已更新并正常工作

```
java -version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T02:50:18.853

在您的环境变量下，确保您有一个`JAVA_HOME`指向 JRE 根文件夹的变量，如下所示：

*   `C:\Program Files\Java\jre7\`

确保您的 Java JRE bin 文件夹也是`PATH`变量的一部分：

*   `;C:\Program Files\Java\jre7\bin\`

此外，当您将 jruby 添加到`PATH`变量时，请确保您引用了正确的文件夹位置。在您给出的示例中，您将 jruby 安装到`C:\jruby-1.7.2`，但实际上`C:\jruby-1.1.5`您在`PATH`配置中指的是这个不同的文件夹。

此外，当您定义 JRUBY_HOME 变量时，请确保您使用的是反斜杠`\`字符。在上面的示例中，您使用了正斜杠`/`字符。请记住，Windows 在文件夹之间使用反斜杠。

最后，在您完成所有环境变量更改后，请记住打开一个新的命令窗口以使您的更改生效。

# jquery - xmlHttp.getResponseHeader + 不适用于 CORS

> ID：14686769
> 
> 赞同：23
> 
> 时间：2013-02-04T12:25:39.097
> 
> 标签：jquery, wcf, authentication, wcf-security, cors

我在 .NET 4 上有一个 asp.NET WCF。该服务用于对用户进行身份验证。我们正在提交用户名和密码，然后应该返回一个包含身份验证 cookie 的 HTTP 标头。使用本地托管的测试页面可以正常工作。我现在正在尝试跨域访问标头信息。我已经在另一台机器上安装了我的测试页面并配置为调用 WCF。通话正常，通话中的“数据”回复正确。但是，我无法使用以下任一方法访问标头信息：

```
alert(xmlHttp.getAllResponseHeaders()); 
```

或者

```
alert(xmlHttp.getResponseHeader("Set-Cookie")); 
```

使用 IE 中的调试器和 Firefox 的“实时 HTTP 标头”插件，我可以看到正在返回标头信息。

在我的全局 ajax 页面中，我将响应设置为处理 CORS。

```
private void EnableCrossDomainAjaxCall()
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

    if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
    {

        HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE");
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");

        HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
        HttpContext.Current.Response.End();
    }

} 
```

这是我用来调用服务的 AJAX：

```
$("#btnLogin").click(function(e) {
    var geturl;
    geturl = $.ajax({
        // type: "POST",
        type: "GET",
        contentType: "application/json; charset=utf-8",
        url: 'http://10.0.4.66/AuthenticationService.svc/Login?Name=test&password=pwsd',
        // url: '../SecurityServer/AuthenticationService.svc/Login?Name=test&password=pwsd',
        dataType: "jsonp",
        error: function(request, status, error) {
            alert('Error Occured');
        },
        crossdomain: true,
        success: function(data, textStatus, xmlHttp) {
            // alert(xmlHttp.getResponseHeader("Content-Type"));
            document.write(xmlHttp.getResponseHeader("Content-Type") + "<br/>");
            alert(xmlHttp.getAllResponseHeaders());
            alert(xmlHttp.getResponseHeader("Set-Cookie"));
            var headers = '';
            var headerPair = xmlHttp.getAllResponseHeaders('wcfCookie').split("\r\n");
            var output = '';
            $.each(headerPair, function(key, line) {
                var parts = line.split(':');

                if (parts[0] == 'wcfCookie') {
                  ChocChip = parts[1]
                  return false
                }

            });
        }
    }); 
```

以下是从“实时 HTTP 标头”中获取的标头信息

```
Date: Mon, 04 Feb 2013 12:12:40 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
Access-Control-Allow-Origin: *
Set-Cookie: wcfCookie=8D38D5D6A0F138FEB595DD016F7694EDDF3E6757C82ED3D419F5047A5294974C1885487465CEC0A0BCC2B3802C7B03FF9F5370A05D4CCBDDDABCB1558C3816044BF4F78209BF38C6B1A7CAD34CD3C85C40B8515CFB1C2B2694BC78803D8DACB4
Content-Length: 65
Cache-Control: application/json; charset=utf-8
Content-Type: application/x-javascript 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-04T14:56:28.827

**首先，一点背景：**

您正在使用`Access-Control-Allow-Headers`它指定允许客户端*发送哪些**请求*标头，但您没有指定允许客户端*读取哪些**响应*标头。要允许客户端读取非简单响应标头，您需要使用. 从[HTML5 Rocks CORS 页面](http://www.html5rocks.com/en/tutorials/cors)：***`Access-Control-Expose-Headers`***

 ***> 在 CORS 请求期间，该`getResponseHeader()`方法只能访问简单的响应标头。简单的响应头定义如下：
> 
> *   缓存控制
> *   内容-语言
> *   内容类型
> *   过期
> *   最后修改
> *   编译指示
> 
> 如果您希望客户端能够访问其他标头，则必须使用`Access-Control-Expose-Headers`标头。此标头的值是您要向客户端公开的以逗号分隔的响应标头列表。

因此，鉴于这些新信息，您可能会这样做：

```
HttpContext.Current.Response.AddHeader("Access-Control-Expose-Headers", "Set-Cookie"); 
```

……但不止于此。

**现在，实际答案：**

这里还有一个更严重的问题：XHR 规范[明确禁止阅读`Set-Cookie`](http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders%28%29-method)。这是因为这在功能上是一种*跨域 cookie 窃取攻击*。

假设域 A 向域 B 发出跨域请求。当域 B 设置 cookie 时，它*​​只是为域 B*设置特定于域的 cookie 。域 A 读取域 B 的 cookie 的任何尝试都违反了 cookie 访问的同源策略。

我不知道 WCF，所以我不确定最好的方法来*实际*做你想做的事，但我猜解决方案可能是不通过 cookie 传递身份验证令牌（例如，`X-WCF-Auth`标题？）那个域A 读取然后设置它自己的 cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:28:17.643

浏览器的安全策略可能会阻止您的响应，因为您没有设置：

```
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Credentials","true"); 
```

如果这没有帮助，请尝试添加

```
xhrFields: { withCredentials: true } 
```

您的`ajax`选择也可能值得一试。***

# wpf - 安装 MahApps.Metro 时出错“试图将此包安装到以 '.NETFramework,Version=v3.5' 为目标的项目中”

> ID：14686773
> 
> 赞同：0
> 
> 时间：2013-02-04T12:25:52.777
> 
> 标签：wpf, windows

我正在尝试在我的 Visual Basic .NetFramework 3.5 项目上安装 MahApps.Metro [http://mahapps.com/MahApps.Metro/](http://mahapps.com/MahApps.Metro/)，但出现错误

```
Could not install package 'MahApps.Metro 0.10.0.1'. You are trying to install this package into a project that targets '.NETFramework,Version=v3.5', but the package does not contain any assembly references or content files that are compatible with that framework. For more information, contact the package author. 
```

我不明白我已经在 .NetFramework 3.5 上使用了 .. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:05:27.593

看来这个库需要 .NET 4+。升级到更高的 .NET 版本（4.0 或 4.5），它应该可以工作。

# c# - 在 TPH 架构中插入具有相关实体的实体

> ID：14686776
> 
> 赞同：1
> 
> 时间：2013-02-04T12:26:02.187
> 
> 标签：c#, sql, asp.net-mvc, entity-framework

我需要根据 TPH 架构插入一个`Picture`包含相关实体 ( ) 的实体 ()：`Ad`

`Picture`模型：

```
public class Picture
{
    // Primary properties
    public int Id { get; set; }
    public string Name { get; set; }
}

public class AdPicture : Picture
{
    public Ad Ad { get; set; }
} 
```

`Ad`模型：

```
public class Ad
{
    // Primary properties
    public int Id { get; set; }
    public string Title { get; set; }
}

public class AdCar : Ad
{
    public int? CubicCapacity { get; set; }
    public int? Power { get; set; }
} 
```

我想在 中插入一个新`Picture`的`AdCar`，我试过：

```
AdPicture picture = new AdPicture()
{
    Ad = _adRepository.GetById(adId),
    Filename = newFileName
};

_pictureService.CreateAdPicture(picture); 
```

创建广告图片：

```
public void CreateAdPicture(AdPicture adPicture)
{
    _adPictureRepository.Add(adPicture);
    _adPictureRepository.Save();
} 
```

但是实体框架说

> *无效的列名“AdCar_Id”。*

当我检查 SQL 命令文本时，我可以看到

```
insert [dbo].[Pictures]([Name], [Filename], [URL], [Rank], [Discriminator], [PictureType_Id], [AdCar_Id], [Ad_Id])
values (null, @0, null, @1, @2, @3, @4, null) 
```

它的投入`AdCar_Id`和`Ad_Id`，为什么？我怎样才能插入`Picture`相关的`AdCar`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:44:02.960

**首先：**您可能需要明确定义子类的键，`Ad_Id`就像它假设的那样`AdCar_Id`（反之亦然）。

在你的 DbContext 中是这样的：

```
 modelBuilder.Entity<AdPicture>()
            .HasRequired(o => o.Ad)
            .WithMany().Map(f => f.MapKey("Ad_Id")); 
```

**第二：**另外，只是为了检查 - 所有这些类都有完全独立的表 (TPH)，而不是只指定了附加属性的表 (TPH)，即 AdPicture 在 Picture 和 AdPicture 表中都没有数据？

没有完成 TPH（仅 TPT）我不确定实体框架是否以不同的方式处理子类化，但我怀疑它必须。如果您在那里遗漏了什么，其他人有望更好地回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:52:00.370

我发现了问题：

我在广告模型中定义了导航属性“public IList Pictures { get; set; }”，它在 SQL 命令“Ad_Id”中创建了一个附加字段。

我一删除它，问题就解决了，我对 TPH 的所有理论再次聚集在一起 :)

感谢您的反馈意见。

# vb.net - 如何在 Outlook 2003 的回复窗口中添加按钮/菜单

> ID：14686780
> 
> 赞同：-2
> 
> 时间：2013-02-04T12:26:09.953
> 
> 标签：vb.net, vba, outlook-addin, outlook-2003

我知道如何创建一个按钮，但我希​​望它出现在回复窗口或至少在每个新邮件项目窗口（回复或新邮件）上。我找不到任何方法来做到这一点。它与处理程序或资源管理器有什么关系吗？甚至可能在 Outlook 2003 上，或者微软没有提供任何对象来做到这一点？

环境：Visual Studio 2008 => xp 上的 Outlook 2003 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:23:49.477

添加按钮时，请检查 MailItem.Sent 属性是否为 false。

# java - 如何根据startswith分割文本文件

> ID：14686784
> 
> 赞同：0
> 
> 时间：2013-02-04T12:26:29.470
> 
> 标签：java, file

我想在基于序列的列表中将文件拆分为带有详细信息的标题。

想使用 Header 和 detail 拆分文本文件我尝试过这样的事情，但没有帮助。

我想调用迭代器的上一个迭代，但我不能......

**文件 ：**

> H>>>>>>
> 
> L>>>>>>>
> 
> L>>>>>>>
> 
> L>>>>>>>
> 
> H>>>>>>>
> 
> L>>>>>>>
> 
> L>>>>>>>
> 
> H>>>>>>>
> 
> L>>>>>>> ...

**我想了 ：**

> 清单 1 与 H 、 L 、 L 、 L
> 
> 清单 2 与 H ， L ， L
> 
> 清单 3 与 H , L

**代码尝试：**

```
 List<String> poString = new ArrayList<String>();
    if(poString !=null && poString.size() > 0)
            {      
               ListIterator<String> iter = poString.listIterator();
               while(iter.hasNext())
               {
                String tempHead = iter.next();
                List<String> detailLst = new ArrayList<String>();
                if(tempHead.startsWith("H"))
                 {
                    while(iter.hasNext())
                    {
                        String detailt = iter.next();
                        if(!detailt.startsWith("H"))
                          detailLst.add(detailt);
                        else
                        {
                            iter.previousIndex();
                        }
                    }
                 }
               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:09:26.697

试试这个，我自己尝试了一点，它有效

```
 BufferedReader br = new BufferedReader(new FileReader("file.txt"));
    ArrayList<ArrayList<String>> result = new ArrayList<> ();
    int numlines =0;
    try {
        StringBuilder sb = new StringBuilder();
        String line = br.readLine();
        while (line != null) {
            if (line.startsWith("H"))
            { 
                   result.add(new ArrayList<String>());
                   result.get(numlines).add("H");

                   line = br.readLine();

                   while(line != null && !line.startsWith("H")){
                       if(line.startsWith("L")) result.get(numlines).add("L");
                       line = br.readLine();
                   }
                   ++numlines;
            }        
            else line = br.readLine();
        }

    } finally {
        br.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:41:47.183

你可以用这个..

```
public static void main(String a[]) throws Exception
{
    ArrayList<String> headers=new ArrayList();
    ArrayList<String> lines=new ArrayList();
    HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>(); 
    File f= new File("inputfile.txt");
    Scanner scanner = new Scanner(f);
    try {
      while (scanner.hasNextLine()){
       String ss=scanner.nextLine();
       String key= String.valueOf(ss.charAt(0));
       if ( map.containsKey(key))
       {
           ArrayList<String> temp=(ArrayList) map.get(key);
           temp.add(ss);
           map.put(key, temp);
       }
       else
       {
           ArrayList<String> temp= new ArrayList();
           temp.add(ss);
           map.put(key, temp);
       }
      }
    }
      catch(Exception e)
      {
          throw e;
      } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:35:41.090

试试这个（未经测试）：

```
BufferedReader br = new BufferedReader(new FileReader("file.txt"));
try {
        List<StringBuilder> myList = new List<StringBuilder>();
        StringBuilder sb = new StringBuilder();
        String line = br.readLine();
        while (line != null) {
        if (line[0] == 'H')
        {
            myList.add(sb);  
            sb = new StringBuilder();                               
        }   
        sb.append(line[0]);        
        line = br.readLine();
    }
} finally {
    br.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:00:05.977

据我了解，最终`H..lines`你的文件中有多少`List<String>`，你想要多少。

如果您不知道确切的数字（在您的示例中为 3），那么您有一个 List 列表 ( `List<List<String>>`)。

```
//read the file, omitted

List<List<String>> myList = new ArrayList<<List<String>>();
List<String> lines = null;
boolean createList = false;
while (line != null) {
    if (line.startsWith("H")){
      myList.add(lines);
      lines = new ArrayList<String>();
    }
//if the 1st line of your file not starting with 'H', NPE, you have to handle it
   lines.add(line);
   line=readnextlineSomeHow(); //read next line
} 
```

上面的代码可能无法开箱即用，但它为您提供了思路。

# replication - 我们如何在 SQL Server 2012 上进行数据复制。详情请阅读下文

> ID：14686789
> 
> 赞同：0
> 
> 时间：2013-02-04T12:26:47.567
> 
> 标签：replication, sql-server-2012

> 我有一个数据库 现在我想要什么 如果在任何情况下我的数据库服务器出现故障，那么它会自动从另一台服务器获取数据。我想知道我们如何进行数据复制/镜像。
> 
> 任何人都可以分享我们如何做到这一点的想法吗？
> 
> 我在 Google 中进行了很多搜索，但没有找到 SQL Server 2012 上的数据复制的确切链接。非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:56:12.337

对于故障转移类型的方案，您希望使用镜像或始终开启，而不是复制。

有关镜像的详细信息，请参见此处：

[数据库镜像](http://msdn.microsoft.com/en-us/library/ms189852.aspx)

有关 Always On 的详细信息可在此处获得：

[SQL 2012 始终开启](http://msdn.microsoft.com/en-gb/library/ff877884.aspx)

如果主服务器发生故障，这两种解决方案都能够为应用程序提供自动故障转移到数据库的单独副本，AlwaysOn 是更好的解决方案（从 SQL 2012 开始，镜像现在显然已弃用）但有一些更复杂的要求，例如对windows集群的依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:35:51.693

SQL Server 复制的文档可以在[SQL Server 2012-SQL Server 复制联机丛书](http://msdn.microsoft.com/en-us/library/ms151198.aspx)中找到。

# php - 在 PHP (Wordpress) 中，如何更改此代码以使 Google+ 链接目标 = 空白，在新窗口中打开？

> ID：14686790
> 
> 赞同：0
> 
> 时间：2013-02-04T12:26:51.640
> 
> 标签：php, javascript, wordpress

我刚刚在 WP 中找到了一个我喜欢的小部件。但我不想让访问者离开我的博客。

我编辑了插件的 php 文件，但对 PHP 知之甚少，我试图弄清楚当他们访问我的 G+ 页面时如何在新窗口中打开以下链接。

我确定它来自 php 文件中的这些代码片段之一：

```
/**
 * Set the widget defaults
 */
private $widget_title = "Add WHI To Your Google Plus Circles";
private $googleplus_username = "https://plus.google.com/101536806553649165592";
private $googleplus_width = "250";
private $googleplus_header = "true"; 
```

或者

```
/* Our variables from the widget settings. */
$this->widget_title = apply_filters('widget_title', $instance['title']);

$this->googleplus_username = $instance['page_url'];
$this->googleplus_width = $instance['width'];
$this->googleplus_header = ($instance['show_header'] == "1" ? "true" : "false"); 
```

或者

```
/* Like Box */

?>
<div class="g-plus" data-width="<?php echo $this->googleplus_width; ?>"
data-href="<?php echo $this->googleplus_username ?>"
data-rel="publisher">

</div> 
```

这是当前的结果：

![谷歌加小部件](../Images/8d318853b737ed533001a3197986df36.png)

我只是认为它与 googleplus_username 有关，这些是文件中的 3 个实例。有人知道我如何配置代码以在新窗口中打开吗？感谢任何人都可以提供的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:23:41.693

小部件是在您的模板中插入 html 代码，还是 iframe？在后一种情况下，你搞砸了，你可能不得不等待谷歌修复它。

如果它插入 html，您总是可以在页面中添加一个 javascript/jquery 片段，强制 url 执行“target='_blank'”。

像这样的东西：

```
$("#widget_id a").attr("target","_blank"); 
```

# paypal - Paypal：即使成功创建定期付款，也收到无效的 IPN 响应

> ID：14686791
> 
> 赞同：1
> 
> 时间：2013-02-04T12:26:55.160
> 
> 标签：paypal

我的 paypalipn.php 文件看起来像，

```
<?php

$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];
} else if (strcmp ($res, "INVALID") == 0) {

}
?> 
```

我已经在我的应用程序中实现了 Paypal。我可以成功获得定期付款的个人资料 ID，但我从即时付款通知中获得的响应无效。只有那个原因是我得到的，而且我也没有收到任何关于此的错误消息。所以我一直在寻找你的帮助来获得这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:21:26.250

你在使用沙盒吗？实时站点不会验证来自沙盒的 IPN，反之亦然。如果 IPN 来自 Sandbox，则需要将其发送回 Sandbox 进行验证。

尝试更改此代码：

```
$ch = curl_init('https://www.paypal.com/cgi-bin/webscr'); 
```

对此：

```
if($myPost['test_ipn'] == "1") {
    $ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
} else {
    $ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
} 
```

# android - 在android中以编程方式设置按钮半径

> ID：14686794
> 
> 赞同：6
> 
> 时间：2013-02-04T12:27:06.300
> 
> 标签：android, button, cornerradius

我有一个按钮说`myButton`。我想以编程方式设置按钮的左上角半径。我正在寻找类似的东西

```
myButton.setTopLeftCornerRadius(10); 
```

我在eclipse中寻找了像'setcornerradius'这样的方法，但一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:31:23.640

按钮使用 ImageResources 绘制背景。

如果你想从代码中实现圆角，而不是使用 9-png 图像，你可以看看这里

[http://programmatic.blogs.ku.dk/2010/06/21/adding-a-background-with-rounded-corners-to-any-view/](http://programmatic.blogs.ku.dk/2010/06/21/adding-a-background-with-rounded-corners-to-any-view/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:33:27.070

您可以为此或圆角背景图像使用可绘制形状。有关形状可绘制的详细信息，请参阅此帖子。

[如何在java代码中设置按钮的圆角半径？](https://stackoverflow.com/questions/8709595/how-to-set-corner-radiuses-for-the-button-in-java-code)

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:37:14.230

试试这个代码来绘制圆角编辑文本：

[如何创建带有圆角的 EditText？](https://stackoverflow.com/questions/3646415/how-to-create-edittext-with-rounded-corners)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:33:16.967

Button 是 of 的类型，Android 中的`View`所有`View`s 都占据矩形区域。但是，您可以将按钮的背景设置为您喜欢的任何图像。就像一个带有圆角的[Shape Drawable 。](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

# javascript - Apache Wicket HTML 输出页面 - 自过期文本或隐藏文本

> ID：14686797
> 
> 赞同：1
> 
> 时间：2013-02-04T12:27:23.557
> 
> 标签：javascript, html, wicket, wicket-1.5

我正在开发一个应用程序，我想向前端网页显示信息性消息，例如**“新记录已添加、删除或更新”**等。我希望消息在几秒钟后消失（可能是 10-15 秒）。

如何处理它？该应用程序正在 Apache Wicket1.5 中开发。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:13:38.110

[编辑]：这是针对 Wicket 1.6 的。Wicket 1.5 有点棘手。我稍后会调查它。

我建议为此制作一个 Wicket 组件；并在需要渲染组件时添加 Jquery javascript。

您可以使用[http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/head/OnDomReadyHeaderItem.html](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/head/OnDomReadyHeaderItem.html)

```
 @Override
    public void renderHead(IHeaderResponse response) {
        response.render(OnDomReadyHeaderItem.forScript(yourMethod(..., component.getMarkupId())));
    } 
```

我认为 Wicket 1.5 提供了类似的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:55:57.487

对于纯粹的检票口方法，您可以附加一个[AjaxSelfUpdatingTimerBehavior](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/ajax/AjaxSelfUpdatingTimerBehavior.html)。在该`onTimer`方法中，您可以将消息设置为不可见和`stop()`计时器。

另一种方法是在 JavaScript 中实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:08:20.403

在我看到回复之前，我做了一个简单的技巧。

主要要求是在短时间内显示信息性消息。所以我用

```
 pr.getPage().info("Records details are updated successfully!");
            setResponsePage(pr.getPage()); 
```

pr 是从上一页传递的 PageReference 对象。

消息显示在下一页的 FeedbackPanel 上，我使用计时器在 10 秒后重新加载页面。所以消息消失了。

# javascript - CSS 样式仅适用于 iOS 网络应用程序？

> ID：14686800
> 
> 赞同：0
> 
> 时间：2013-02-04T12:27:37.940
> 
> 标签：javascript, ios, css, web-applications

有谁知道是否有可能让 CSS 专属于 iOS 网络应用程序？

IE。如果独立 Web 应用程序打开，则调用此样式（相对于 Safari 中移动网站 Web 的样式表）。我假设它是用 JS 完成的，但找不到文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:29:08.767

```
 //Lines split for easy reading only  

    if((navigator.userAgent.match(/iPhone/i))  || (navigator.userAgent.match(/iPod/i)(navigator.userAgent.match(/iPad/i)))
{
       //LINK TO YOUR STYLESHEET
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:58:59.497

您可以使用 css 文件创建 Html 文件。只需在 Web 视图中包含内容文件

```
NSString *fileString = [[NSBundle mainBundle] pathForResource: @"privacypolicy" ofType:@"html"];
myWebView = [[UIWebView alloc]init];
NSString *newHTMLString = [[NSString alloc] initWithContentsOfFile: fileString encoding: NSASCIIStringEncoding error: NULL];
NSURL *newURL = [[NSURL alloc] initFileURLWithPath: fileString]; 
```

它的工作正常

# android - AnimationDrawable 不适用于 2.3.6 android 版本

> ID：14686802
> 
> 赞同：6
> 
> 时间：2013-02-04T12:27:43.103
> 
> 标签：android, android-animation

AnimationDrawable 不适用于 2.3.6 android 版本。

是否有旧版本的支持库？

我的代码是：

```
iv = (ImageView) findViewById(R.id.splashnew);
BitmapDrawable f0 = (BitmapDrawable)getResources().getDrawable(R.drawable.s1); 
BitmapDrawable f1 = (BitmapDrawable)getResources().getDrawable(R.drawable.s2); 
BitmapDrawable f2 = (BitmapDrawable)getResources().getDrawable(R.drawable.s3);
int dur = 850; 
AnimationDrawable ad = new AnimationDrawable();
ad.addFrame(f0, dur); 
ad.addFrame(f1, dur); 
ad.addFrame(f2, dur);
ad.start();
ad.setOneShot(true); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T12:55:23.680

我得到了答案：

您应该在可运行文件中启动动画。

```
 iv.post(new Runnable(){
        public void run(){
             ad.start();
             ad.setOneShot(true); // use this if you want to run the animation only once
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:56:00.277

试试这个

```
iv = (ImageView) findViewById(R.id.splashnew);
BitmapDrawable f0 = (BitmapDrawable)getResources().getDrawable(R.drawable.s1); 
BitmapDrawable f1 = (BitmapDrawable)getResources().getDrawable(R.drawable.s2); 
BitmapDrawable f2 = (BitmapDrawable)getResources().getDrawable(R.drawable.s3);
int dur = 850; 
AnimationDrawable ad = new AnimationDrawable();
ad.addFrame(f0, dur); 
ad.addFrame(f1, dur); 
ad.addFrame(f2, dur);
iv.setBackgroundDrawable(ad);
iv.post(new Runnable(){
    public void rub(){
         ad.start();
}
} 
```

# ruby - 外部请求的 Ruby 错误处理

> ID：14686806
> 
> 赞同：1
> 
> 时间：2013-02-04T12:27:56.643
> 
> 标签：ruby, json, api

我正在发出一个外部请求并为 JSON 文件使用 HTTPARTY，然后解析它。
但是如果请求失败（文件不再存在或者是错误的 uri），我该如何处理错误，以便我仍然可以显示页面？
不确定如何最好地保护应用程序免受此故障点的影响，而且我在错误处理方面做得不多。

```
def api_fetch(url)
  JSON.parse HTTParty.get(url).response.body
end

api_fetch('http://example.com/data.json')['test'] 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:28:45.163

下面应该工作。当您调用它时，它将检查该方法是否返回 nil。

```
def api_fetch(url)
    begin
      JSON.parse HTTParty.get(url).response.body
    rescue
      nil
    end
  end 
```

# macros - 如何在 clojure 中制作这个宏变量？

> ID：14686807
> 
> 赞同：5
> 
> 时间：2013-02-04T12:28:02.793
> 
> 标签：macros, clojure

我想做一个叫做 ds 的东西

```
(let [a 2]
  (ds a)) 
```

->

```
 "a->2" 
```

和

```
(let [a 1 b 2 c 3]
    (ds a b c)) 
```

->

```
 "a->1, b->2, c->3" 
```

到目前为止，我已经做到了：

```
(defmacro ds3 [a b c] 
     `(clojure.string/join ", " 
          [(str '~a "->" ~a) 
           (str '~b "->" ~b) 
           (str '~c "->" ~c)])) 
```

这似乎有效：

```
 (let [ a 1 b 2 c 3]
     (ds3 a b c)) ; "1->1, 2->2, 3->3" 
```

显然我可以定义 ds1 ds2 ds3 等...，但我想知道如何使它可变参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T13:47:57.663

干得好：

```
(defmacro ds [& symbols]                                                                                                                             
  `(clojure.string/join ", "                                                                                                                         
                        ~(into [] 
                           (map (fn [s] `(str ~(name s) "->" ~s))  symbols)))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T20:38:47.867

Ankur 的回答可能是最实用的，但他将很多工作推迟到运行时，这可以在宏扩展时完成。这是一个有用的练习，并且很好地演示了宏可以带来的强大功能，以了解您在编译时可以完成多少工作：

```
(defmacro ds [& args]
  `(str ~(str (name (first args)) "->")
        ~(first args)
        ~@(for [arg (rest args)
                clause [(str ", " (name arg) "->") arg]]
            clause)))

(macroexpand-1 '(ds a b c))
=> (clojure.core/str "a->" a ", b->" b ", c->" c) 
```

这避免了在运行时构建任何临时对象，并且绝对最小数量的字符串连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-24T19:41:53.543

**编辑**：

感谢@amalloy 的建议，这里有一些改进的宏不使用“严重错误”`eval`并包括一些小测试：

```
(import 'java.lang.ArithmeticException)

(defmacro explain-expr
  "Produce a string representation of the unevaluated expression x, concatenated to
  an arrow and a string representation of the result of evaluating x, including
  Exceptions should they arise."
  [x]
  `(str ~(str x) " ~~> "
        (try ~x (catch Exception e# (str e#)))))

(println (explain-expr (* 42 42)))
(println (explain-expr (let [x 1] x)))
(println (explain-expr (/ 6 0)))
(println (let [x 1] (explain-expr x)))
(let [y 37] (println (explain-expr (let [x 19] (* x y)))))
(let [y 37] (println (explain-expr (let [y 19] (* y y))))) 
```

> ```
> (* 42 42) ~~> 1764
> (let [x 1] x) ~~> 1
> (/ 6 0) ~~> java.lang.ArithmeticException: Divide by zero
> x ~~> 1
> (let [x 19] (* x y)) ~~> 703
> (let [y 19] (* y y)) ~~> 361 
> ```

```
(defmacro explain-exprs
  "Produce string representations of the unevaluated expressions xs, concatenated
  to arrows and string representations of the results of evaluating each
  expression, including Exceptions should they arise."
  [& xs]
  (into [] (map (fn [x]
                  `(str ~(str x) " ~~> "
                        (try ~x (catch Exception e# (str e#)))))
                xs)))

(clojure.pprint/pprint
 (let [y 37]
   (explain-exprs
    (* 42 42)
    (let [x 19] (* x y))
    (let [y 19] (* y y))
    (* y y)
    (/ 6 0)))) 
```

> ```
> ["(* 42 42) ~~> 1764"
>  "(let [x 19] (* x y)) ~~> 703"
>  "(let [y 19] (* y y)) ~~> 361"
>  "(* y y) ~~> 1369"
>  "(/ 6 0) ~~> java.lang.ArithmeticException: Divide by zero"] 
> ```

```
(defmacro explanation-map
  "Produce a hashmap from string representations of the unevaluated expressions
  exprs to the results of evaluating each expression in exprs, including
  Exceptions should they arise."
  [& exprs]
  (into {}
        (map (fn [expr]
               `[~(str expr)
                 (try ~expr (catch Exception e# (str e#)))])
             exprs)))

(clojure.pprint/pprint
 (let [y 37]
   (explanation-map
    (* 42 42)
    (let [x 19] (* x y))
    (let [y 19] (* y y))
    (* y y)
    (/ 6 0)))) 
```

> ```
> {"(* 42 42)" 1764,
>  "(let [x 19] (* x y))" 703,
>  "(let [y 19] (* y y))" 361,
>  "(* y y)" 1369,
>  "(/ 6 0)" "java.lang.ArithmeticException: Divide by zero"} 
> ```

**已弃用**：

我把它留在里面作为不做什么的*说明*。

这是一种适用于任何表达方式的变体（我认为）

```
(defmacro dump-strings-and-values
  "Produces parallel vectors of printable dump strings and values. A dump string
  shows an expression, unevaluated, then a funny arrow, then the value of the
  expression."
  [& xs]
  `(apply map vector ;; transpose
          (for [x# '~xs
                v# [(try (eval x#) (catch Exception e# (str e#)))]]
            [(str x# " ~~> " v#) v#])))

(defmacro pdump
  "Print dump strings for one or more given expressions by side effect; return
  the value of the last actual argument."
  [& xs]
  `(let [[ss# vs#]
         (dump-strings-and-values ~@xs)]
     (clojure.pprint/pprint ss#)
     (last vs#)) 
```

一些样本：

> ```
> (pdump (* 6 7)) 
> ```

打印`["(* 6 7) ~~> 42"]`并返回`42`。

> ```
> (pdump (* 7 6) (/ 1 0) (into {} [[:a 1]])) 
> ```

印刷

```
["(* 7 6) ~~> 42"
 "(/ 1 0) ~~> java.lang.ArithmeticException: Divide by zero"
 "(into {} [[:a 1]]) ~~> {:a 1}"] 
```

并返回`{:a 1}`。

**编辑**：

我试图摆脱打印输出中的外括号，即

```
(defmacro vdump
  "Print dump strings for one or more given expressions by side effect; return
  the value of the last actual argument."
  [& xs]
  `(let [[ss# vs#]
         (dump-strings-and-values ~@xs)]
     (map clojure.pprint/pprint ss#)
     (last vs#))) 
```

不起作用，我不知道为什么*。*它不打印输出，但宏扩展看起来不错。可能是 nREPL 或 REPL 问题，但我放弃了，只使用上面的那个，不用太担心括号。

# silverlight - 在 Windows 手机上创建游戏循环？

> ID：14686810
> 
> 赞同：0
> 
> 时间：2013-02-04T12:28:02.913
> 
> 标签：silverlight, storyboard, windows-phone-8, game-loop

我想问一下我是否想在我的将在 Windows Phone 上运行的 2D Silverlight 游戏（像蛇这样的示例游戏）中创建一个游戏循环来控制运动，这样做的最佳做法是什么？我发现使用了不同的方法：1- CompositionTarget.Render()。2-调度定时器。3层板。

哪个更适合创建示例游戏循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:08:28.633

Windows Phone 上的 XNA 游戏循环基于 Silverlight 的 Dispatcher Timer。所以它绝对适合这种目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:21:32.483

在您列出的方法中，DISpatcher Timer 是创建游戏循环的最佳方法。

但是，如果您想创建游戏，我强烈建议您不要使用 Silverlight，而是使用 XNA API，即使对于像 Snake 这样的简单游戏，使用游戏架构编写游戏要容易得多，Silverlight 专为事件驱动应用程序而设计（普通应用程序）和 XNA 专为游戏设计（更新逻辑，然后在 GPU 上绘制 2D 或 3D 图像）。此外，如果您坚持使用 Silverlight，除非您使用使用合​​成线程的情节提要，那么您的绘图都不会是硬件加速的，并且会真正降低应用程序的性能。

此外，如果您专门针对 Windows Phone 8，您可以创建 Direct3D 应用程序并使用 DirectX 工具包在 C++ 中获取“xna”spritebatch 类。使用该方法会自动为您设置游戏循环和 2D 绘图代码。

# android - Android上Service和Activity之间的通信

> ID：14686812
> 
> 赞同：2
> 
> 时间：2013-02-04T12:28:05.220
> 
> 标签：android, service, android-activity

android上的Activity和Service之间的通信方式是什么？

今天我学习了如何通过从 Activity 发送 Intent 并使用 BroadcastRecevier 回复来进行通信。

我还有哪些其他选择？有没有人有关于这个的教程/参考？

这个问题的答案是：

活动与服务通信有多种方式，反之亦然。本节讨论了不同的方法并给出了使用的建议。

5.1。Activity绑定到本地服务如果Service和Activity在同一个进程中启动，Activity可以直接绑定到服务上。这是一种相对简单有效的沟通方式。

5.2\. 使用接收器 您还可以使用动态注册的接收器进行通信。例如，您的活动可以动态注册接收器，并且服务会发出相应的事件。

5.3\. 不同进程中服务的 AIDL 要绑定到在不同进程中运行的服务，您需要使用进程间通信 (IPC)，因为数据需要在不同进程之间发送。为此，您需要创建一个类似于 Java 接口但以 .aidl 文件扩展名结尾的 AIDL 文件，并且只允许扩展其他 AIDL 文件。

如果您的服务应该提供给其他应用程序，则需要这种方法，否则您应该更喜欢本地服务。

5.4\. 向服务发送 Intent 数据和 bundle 服务从启动的 Android 组件接收数据并且可以使用这些数据。

5.5\. Handler 和 Messenger 如果服务应该与 Activity 进行通信，它可以通过从 Activity 接收的 Intent 数据接收 Messenger 类型的对象。如果 Messenger 绑定到活动中的处理程序，则服务可以将消息类型的对象发送到活动。

Messenger 是可打包的，这意味着它可以传递给另一个进程，您可以使用此对象将消息发送到活动中的处理程序。

Messenger 还提供了 getBinder() 方法，该方法允许将 Messenger 传递给活动。因此，Activity 可以向服务发送消息。

感谢[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:47:19.747

将 Activity 连接到服务的方法：

1.  广播：最简单的方法，`BroadcastReciever`在每个中实现一个来监听其他人的动作。

2.  Messengers：非常适合多种类型的客户端，服务和客户端都有一个`Messenger`，服务提供它 Messenger in `onBind()`，客户端发送一条注册/注销消息，并带有自己`replyTo()`的消息中的信使。服务节省客户信使。现在两者都可以发送/接收消息。

3.  IBinder：如果您需要完整的远程 IPC。使用 AIDL 为服务定义一个接口，并将实现传递给`onBind()`.

Android[在线参考](http://developer.android.com/reference/android/app/Service.html)对每个都有解释。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-04T12:44:19.403

伙计们是对的，你真的应该用谷歌搜索答案！

但是，我最近学会了一种将意图发送到服务的巧妙方法。您可以简单地调用`startService(myIntent)`以向您的服务发送意图。如果服务没有运行，它将被启动。如果服务正在运行，您就有可能对新信息做出反应。

# android - onPause-onResume 后黑屏

> ID：14686815
> 
> 赞同：2
> 
> 时间：2013-02-04T12:28:15.473
> 
> 标签：android, opengl-es

我正在使用 OpenGL ES 2.0 开发一个安卓游戏。我的一些用户（约 5%）面临这样的问题：锁定/解锁设备后或按下主页按钮并恢复应用程序后出现灰屏。我的意思是这发生在调用 onResume 和 onPause 之后。

屏幕是灰色的，因为背景填充了这种颜色：

```
GLES20.glClearColor(.5f, .5f, .5f, 1f); 
```

这意味着在某些手机上没有任何东西在恢复应用程序之后。

我正在使用虚拟缓冲区对象（将所有缓冲区上传到 GPU）。它们在 onResume 之后重新创建，与所有纹理和着色器相同。

我还在活动的 onPause 和 onResume 中调用了 surfaceView.onPause 和 .onResume。

我不明白为什么我的应用程序在某些手机上恢复后没有绘制任何东西（在大多数手机上一切正常），我希望有人能给我一些关于为什么会发生这种情况的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:58:10.687

您需要向我们提供一些 logcat 输出，但看起来您的渲染路径的一部分正在被跳过（可能是因为您的渲染循环代码中存在异常）。如果没有进一步的数据，我们真的很难帮助您解决这个特定问题。

# android - 如何在 TextView 中设置文本的自动反转颜色？

> ID：14686818
> 
> 赞同：2
> 
> 时间：2013-02-04T12:28:28.987
> 
> 标签：android

例如，如果背景为白色，则文本颜色将为黑色。如果 BG 为黑色，则文本将为白色。蓝色BG、黄色文字等 **更新：**

```
// method in MyActivity class
void changeBackgroundColor(int newColor) {
    activityLayout.setBackgroundColor(newColor);
    int invertingColor = ColorInvertor.invert(newColor);
    someTextView.setTextColor(invertingColor);
} 
```

如果我打电话`activity.changeBackgroundColor(Color.WHITE)`，那么`someTextView`必须将文本颜色更改为黑色，即`ColorInvertor.invert(Color.WHITE) == Color.BLACK`，`ColorInvertor.invert(Color.BLACK) == Color.WHITE`等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:56:42.153

获取颜色的 rgb 值并从 255 中减去它们：

```
yourColor = Color.rgb(0,130,20);

invertedRed = 255 - 0;
invertedGreen = 255 - 130;
invertedBlue = 255 - 20;

text.setTextColor(Color.rgb(invertedRed,invertedGreen,invertedBlue)); 
```

如果要使用十六进制值，请参阅[如何从 java 中的十六进制颜色代码获取 RGB 值](https://stackoverflow.com/questions/7427141/how-to-get-rgb-value-from-hexadecimal-color-code-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:01:34.113

只需使用简单的条件即可：

1.获取颜色

2.检查条件

3.设置颜色

要获得颜色：

```
TextView tv1;
tv1=(TextView)findViewById(R.id.tv1);
ColorDrawable tv1color = (ColorDrawable) tv1.getBackground(); 
```

如果您使用的是 Android 3.0+，则可以获取颜色的资源 ID：

```
int tv1colorId = tv1color.getColor(); 
```

要设置颜色：

```
TextView tv2;
tv2=(TextView)findViewById(R.id.tv2);
tv2.setBackgroundColor(0xFF00FF00); 
```

然后根据需要设置条件：

```
if (tv1colorID == R.color.green) {
   tv2.setBackgroundColor(color.WHITE); // As your choice color
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T18:35:47.830

您可以使用这些功能反转颜色...

```
//color
public static String getHex(int intColor) {
    String hexColor = String.format("#%06X", (0xFFFFFF & intColor));
    return hexColor;
}

public static String getRGBStringfromHex(String hexColor) {
    int color = Color.parseColor(hexColor);
    int red = Color.red(color);
    int green = Color.green(color);
    int blue = Color.blue(color);
    return red + "," + green + "," + blue;
}

public static int[] getRGBStringtoRGBInt(String splits[]) {
    int list[] = new int[3];
    list[0]=Integer.parseInt(splits[0]);
    list[1]=Integer.parseInt(splits[1]);
    list[2]=Integer.parseInt(splits[2]);
    return list;
}

public static int getRGBColor(int rgb[]) {
    int color = Color.rgb(rgb[0],rgb[1],rgb[2]);
    return color;
}

public static String invertedRGBfromRGB(int rgb[]) {
    int invertedRed = 255 - rgb[0];
    int invertedGreen = 255 - rgb[1];
    int invertedBlue = 255 - rgb[2];
    return invertedRed + "," + invertedGreen + "," + invertedBlue;
}

public static int getColorFromRGBString(String color) {
    ArrayList<Integer> list = new ArrayList<>();
    String splits[] = color.split(Pattern.quote(","));
    list.add(Integer.parseInt(splits[0]));
    list.add(Integer.parseInt(splits[1]));
    list.add(Integer.parseInt(splits[2]));
    return Color.rgb(list.get(0), list.get(1), list.get(2));
} 
```

Ok now if you convert a int color...

```
String rgb[]=getRGBStringfromHex(getHex(colorThatWanttoInvert)).split(",");
int desireinvertedcolor=getColorFromRGBString(invertedRGBfromRGB(getRGBStringtoRGBInt(rgb))); 
```

Hope this will help.

# android - 广播新用户安卓wifi热点

> ID：14686822
> 
> 赞同：2
> 
> 时间：2013-02-04T12:28:38.220
> 
> 标签：android, android-broadcast

我试图在广播接收器中找到试图在android中使用我的wifi热点的用户macaddress。但是当有人登录我的wifi时接收器不起作用。我怎么能找到

```
<receiver android:name=".WifiReceiver"> 
                    <intent-filter android:priority="100"> 
                        <action android:name="android.net.wifi.supplicant.CONNECTION_CHANGE"></action>
                         <action android:name="android.net.wifi.WIFI_STATE_CHANGED"></action>
                          <action android:name="android.net.wifi.supplicant.STATE_CHANGE"></action>
                          <action android:name="android.net.wifi.SCAN_RESULTS"></action> <intent-filter> 
```

# c# - Lambda 表达式 - 评估双方的 OR 运算符

> ID：14686835
> 
> 赞同：0
> 
> 时间：2013-02-04T12:29:17.667
> 
> 标签：c#, lambda

我有以下代码与确切的文化或文化的通配符版本匹配。

使用“en-TH”的文化，返回的字符串应该是“en-**”，因为它已由通配符匹配。“en-US”文化将返回“en-US”，“ar-AK”文化将返回 null。

但是，使用下面的代码，“en-US”的文化会返回两个字符串：

```
"en-US"
"en-**" 
```

我想知道这是否是因为 OR 运算符在这种情况下没有进行“短路”评估？IE 我不想在这种情况下返回 'en-**'

```
string cultureToMatch = "en-TH";
IEnumerable<string> cultures = new string[] { "en-US", "en-**", "fr-**", "en-KH", "ar-AR" };

for (int i = 0; i < cultureToMatch.Length; i++)
{
    char searchChar = cultureToMatch[i];
    cultures = cultures.Where(w => w.IndexOf(searchChar, i, 1) >= 0 ||
                                   w.IndexOf('*', i, 1) >= 0)
                                    .ToList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:07:05.020

请尝试以下操作。它将首先尝试过滤实际字符，并且只有在没有匹配项时才会尝试使用通配符进行过滤。

```
string cultureToMatch = "en-US";
IEnumerable<string> cultures = new string[] { "en-US", "en-**", "fr-**", "en-KH", "ar-AR" };

for (int i = 0; i < cultureToMatch.Length; i++)
{
    char searchChar = cultureToMatch[i];
    var tempFilter = cultures.Where(w => w.IndexOf(searchChar, i, 1) >= 0);
    if (!tempFilter.Any())
        tempFilter = cultures.Where(w => w.IndexOf('*', i, 1) >= 0);
    cultures = tempFilter.ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:33:15.850

不，这是因为条件是针对每个项目单独评估的。

字符串`en-US`匹配条件的第一部分，字符串`en-**`匹配条件的第二部分。条件的第一部分对一个项目为真这一事实并不妨碍条件的第二部分对另一个项目进行评估。

如果要搜索最相关的匹配项，则必须对数据进行两次运行，或者根据相关性对结果进行排序并获得第一个匹配项。

# java - 如何在给定字符串中的四个空格后获取子字符串？

> ID：14686838
> 
> 赞同：5
> 
> 时间：2013-02-04T12:29:27.613
> 
> 标签：java

我有类似的字符串`"align is going to school sad may me"`。我想在四个空格之后获取子字符串。字符串将在运行时输入。任何人都可以建议我在一些空格后找到子字符串......

```
String st = "align is going to school sad may me";

int i = 0;
String [] strings = new String [15];
StringTokenizer stringTokenizer = new StringTokenizer (st, " ");

while (stringTokenizer.hasMoreElements ())
{
    strings [i]= (String)stringTokenizer.nextElement ();
    i++;
}
System.out.println ("I value is" + i);

for (int j=4; j<i; j++)
{
    System.out.print (strings[j] + " ");
} 
```

我已经尝试过这个并且它正在工作，您能否建议我在一些空格后找到 Sub 字符串的简单方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T12:35:07.940

```
st = st.replaceAll("^(\\S*\\s){4}", ""); 
```

`^`表示我们只从字符串的第一个字符中删除。

`\s`是任何空白。例如，它还将删除表格。

`\S`是任何非空白字符。

`*`表示该字符出现的任意次数。

因此，`\S*`在空白之前是任意数量的非空白字符。

`{4}`显然是因为您要删除 4 个空格。

您还可以使用：

```
st = st.replaceFirst("(\\S*\\s){4}", ""); 
```

这是相同的，但你不需要 `^`.

如果输入字符串的空格少于 4 个：

```
st = st.replaceAll("^(\\S*\\s){1,4}", ""); 
```

仅当字符串不以空格结尾时，才会返回字符串的最后一个单词。如果你先打电话，你可以确定这一点`trim`：

```
st = st.trim().replaceAll("^(\\S*\\s){1,4}", ""); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T12:32:05.253

使用拆分怎么样？

```
st.split (" ", 5) [4] 
```

它按空格将字符串拆分为不超过 5 个块。最后一个块（索引为 4）将包含第四个空格之后的所有内容。

如果不能保证字符串包含 4 个空格，则需要额外检查：

```
String [] chunks = st.split (" ", 5);
String tail = chunks.length == 5 ? chunks [4] : null; 
```

Tail 将包含第四个空格或 null 之后的所有内容，原始字符串中是否少于四个空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:24:11.680

```
public static void main(String[] args) {
    String st = "   align is going to school sad may me   ";
    String trim = st.trim(); // if given string have space before and after string.
    String[] splitted = trim.split("\\s+");// split the string into words.
    String substring = "";
    if (splitted.length >= 4) { // checks the condition
        for (int i = 4; i < splitted.length; i++)
            substring = substring + splitted[i] + " ";
    }
    System.out.println(substring);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:37:08.377

```
public class MySplit {
    public static void main(String agsp[]) {
        String oldString = "roma h totti milan kaka juve love";
        String[] allStrings = oldString.split("\\s");
        String newString = "";
        for (int i = 3; i < allStrings.length; i++)
            newString = newString + " " + allStrings[i];
        System.out.println(newString);
    }
} 
```

你也可以制作这样的功能

```
public String newSplit(String data, int index){
            String[] allStrings = data.split("\\s");
            String newString = "";
            for (int i = index; i < allStrings.length; i++)
                newString = newString + " " + allStrings[i];
            return newString
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T12:46:19.333

这可能有点矫枉过正，但它使用简单的字符串操作 ( `just str.indexOf(' ')`)。如果您需要学校项目或其他东西：

```
String str ="ada adasd dasdsa d adasdad dasasd";

int targetMatch = 4;
int offset = 0;
for(int i = 0 ; i < targetMatch; i++){
     int position = str.indexOf(' ', offset);
     if(position != -1){
          System.out.println("position: "+ position);
          offset = position+1;
        }
     }

String result = str.substring(offset);
System.out.println(result); 
```

对于真正的项目......高级正则表达式会更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T12:48:36.773

这是一个解决您的问题的简单而简单的实现：

```
String s = "I've tried this one and it's working can you please suggest";

int index = -1;
for (int i = 0; i < 4; i++) {
    index = s.indexOf(' ', index + 1);
}
System.out.println(s.substring(index + 1)); 
```

如果字符串以空格开头或包含空格序列，它将失败。但这是一个开始。

输出：`and it's working can you please suggest`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-31T11:07:09.527

使用这段代码的简单方法

```
String thisString="Hello world go to kashmir";

String[] parts = theString.split(" ");
String first = parts[0];//"hello"
String second = parts[1];//"World"
String first = parts[3];//"hello"
String second = parts[4];//"World" 
```

# c# - 私有设置属性在类中设置的正确方法？C＃

> ID：14686839
> 
> 赞同：0
> 
> 时间：2013-02-04T12:29:29.733
> 
> 标签：c#, oop, class, properties

> **可能重复：**
> [通过访问器或直接访问同一类的属性的最佳方法是什么？](https://stackoverflow.com/questions/355787/what-is-the-best-way-to-access-properties-from-the-same-class-via-accessors-or)

我还在学习 C#。无论如何，我有一个简单的问题，但我不确定这样做的正常方法。假设我在课堂上有以下内容

```
private int _questionNo;

public int QuestionNo

    {
        get
        {
            return _questionNo;
        }

        private set
        {
            _questionNo = value;
            PropChanged("QuestionNo");
        }

    } 
```

如果我想在类本身中设置属性，我应该使用

```
_questionNo = number; 
```

或者

```
QuestionNo = number; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:30:58.040

您应该始终使用公共 getter-setter，并且永远不要触摸远离 Getter-Setter 内部的私有支持字段，除非您当然不希望 Setter 内部的事件发生。

```
QuestionNo = number; 
```

这样做的原因是，如果您需要在 Setter 中更改您想要发生的某些内容，您将不必更改所有变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:31:21.173

You should probably use the `QuestionNo` property, unless there is some reason that you would not want `PropChanged` to fire

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:36:42.770

Use the `QuestionNo = number` property. I would rather suggest using a public method which you can access and specify the property, something like.,

```
public changemethod(int value)
{
    this.QuestionNo = value;
}
public int QuestionNo { get; set; } 
```

# jquery - 切换复选框以附加到 div - 复选框保持未选中状态

> ID：14686847
> 
> 赞同：0
> 
> 时间：2013-02-04T12:30:05.220
> 
> 标签：jquery, checkbox, append, toggle, prop

我正在构建我的第一个小 jquery 待办事项列表，每个列表项都有一个复选框，当它被选中时，它被移动到完成 div。这按预期工作，只是复选框始终未选中。我已经尝试过 .prop() 但它似乎没有任何影响。

这是HTML：

```
 <div class="form-container">
        <h2>To Do</h2>
        <form name="checkListForm">
        <input class="entry" type="text" name="checkListItem"/>
        <div id="button">Add!</div>
        </form>
    </div>
    <div class="list"></div>     
    <div class="done_name">Done
            <div class="done"></div>
    </div> 
```

和jQuery：

```
$('input[name=checkListContainer]').toggle(
    function () {
        $(".done_name").show();
        $(this).prop("checked", "checked");
        $(this).parents('.item_container').appendTo(".done");
        },
        function () {   
                $(this).parents('.item_container').appendTo(".list");
                    $(".done:empty").parent().hide();
        });
   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:31:29.777

[`.prop("checked")`](http://api.jquery.com/prop/)是真/假值：

```
$(this).prop("checked", true); 
```

# ajax - Restify 删除方法

> ID：14686853
> 
> 赞同：1
> 
> 时间：2013-02-04T12:30:27.103
> 
> 标签：ajax, node.js, backbone.js, restify

CORS 开始有点煎熬我的大脑。现在一切都很好，除了一种方法。我正在构建一个应用程序，前端带有主干，后端带有 node.js/restify。`server.coffee`看起来像这样：

```
server.get '/todos', todos.find_all
server.get '/todos/:id', todos.find_by_id
server.del '/todos/:id', todos.delete 
```

但是，每当主干中的模型调用`destroy`时，我都会收到这个相当烦人的错误：

`MLHttpRequest cannot load http://localhost:8080/todos/. Method DELETE is not allowed by Access-Control-Allow-Methods.`

我读了一点，并使用 restify 完成了以下操作：

```
unknownMethodHandler = (request, response) ->
    if(request.method.toLowerCase() == 'options')
        allowHeaders = ['Accept', 'Accept-Version', 'Content-Type', 'Api-Version']

        if(response.methods.indexOf('OPTIONS') == -1) then response.methods.push('OPTIONS')

        response.header 'Access-Control-Allow-Credentials', true
        response.header 'Access-Control-Allow-Headers', allowHeaders.join(', ')
        response.header 'Access-Control-Allow-Methods', ['GET', 'DELETE', 'TEST!']
        response.header 'Access-Control-Allow-Origin', request.headers.origin

        response.send 204
    else
        response.send new restify.MethodNotAllowedError()

server.on 'MethodNotAllowed', unknownMethodHandler 
```

但即便如此，我还是把它作为响应头：

```
HTTP/1.1 204 No Content
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version
Access-Control-Allow-Methods: GET, OPTIONS
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: X-Api-Version, X-Request-Id, X-Response-Time
Connection: Keep-Alive
Date: Mon, 04 Feb 2013 12:24:25 GMT
Server: restify
X-Request-Id: fbd4e15a-a22e-48b6-bf5c-a46b94926748
X-Response-Time: 0 
```

我只是不明白我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:13:15.623

如果您期待响应，则应使用“200”响应代码，而不是 204，因为那是无内容响应。有关详细信息，请参阅[W3C 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

> 9.7 删除
> 
> DELETE 方法请求源服务器删除由 Request-URI 标识的资源。此方法可能会被源服务器上的人工干预（或其他方式）覆盖。即使从源服务器返回的状态码表明操作已经成功完成，客户端也不能保证操作已经执行。但是，服务器不应指示成功，除非在给出响应时它打算删除资源或将其移动到无法访问的位置。
> 
> 如果响应包含描述状态的实体，则成功的响应应该是 200（OK），如果操作尚未制定，则为 202（已接受），如果操作已经制定但响应不包括，则应为 204（无内容）一个实体。
> 
> 如果请求通过缓存并且 Request-URI 标识了一个或多个当前缓存的实体，那么这些条目应该被视为陈旧的。对此方法的响应不可缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T11:45:03.297

您`Access-Control-Allow-Origin: *`在响应标头中看到 。这来自 .../restify/lib/router.js preflight() 方法。评论指出“用户需要定义自己的 .opts 处理程序”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-13T19:53:14.977

Use server.opts method to wirte your own handler for OPTIONS request. Below is the example you can use.

Also tell me if you are using set-credentials flag to true while making request from the browser. This handle in that case would have to respond with access cookies.

In the example below, I am returning the allowed origin for exact match. You can tweak it to be substring match also. But always return the exact value as found in request header origin in the response header 'Access-Control-Allow-Origin'. Its a good practice.

```
server.opts('/api/(.)*', (req, res) => {
const origin = req.header('origin');
const allowedOrigins = ['example.com', 'example.org'];
if (allowedOrigins.indexOf(origin) === -1) {
    //origin is not allowed
    return res.send(405);
}
//set access control headers to allow the preflight/options request
res.setHeader('Access-Control-Allow-Origin', header);
res.setHeader('Access-Control-Allow-Headers', 'Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version');
res.setHeader('Access-Control-Allow-Methods', 'GET,POST,PUT,PATCH,DELETE,OPTIONS');

// Access-Control-Max-Age header catches the preflight request in the browser for the desired
// time. 864000 is ten days in number of seconds. Also during development you may want to keep

   // this number too low e.g. 1.
    res.setHeader('Access-Control-Max-Age', 864000);
    return res.send(200);
  }); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-12-07T10:44:32.540

只需设置标题`res.setHeader('Access-Control-Allow-Methods', '*');`

这是答案：[https ://github.com/mcavage/node-restify/issues/296#issuecomment-12333568](https://github.com/mcavage/node-restify/issues/296#issuecomment-12333568)

# python - 从 Linux 连接到 Sun ONC RPC 服务器

> ID：14686861
> 
> 赞同：2
> 
> 时间：2013-02-04T12:31:07.170
> 
> 标签：python, c, linux, rpc

我正在寻找在 Linux 中创建可以连接到 Sun ONC RPC 服务器的 RPC 客户端的解决方案。
服务器是用 C 编写的。

我想知道我是否可以：

1.  在 Linux 中创建 RPC 客户端
2.  在 Python 中创建 RPC 客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:43:38.287

可以使用`.idl`文件和`rpcgen`. 最初的 RPC 协议比 SOAP 早了几年。

是的，您可以在 linux 中创建 RPC 客户端（参见 rpcgen）

是的，您可以在 python 中创建 RPC 客户端（请参阅 pep-0384）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:35:52.393

您可以使用开源[gsoap](http://sourceforge.net/projects/gsoap2/)：

您可以在 C 中使用 gsoap RPC(s) 创建。如果您想在 Python 中执行此操作，您只需在 C 中开发 api 模板，然后从 python 调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:07:58.397

可以办到。有几种方法可以做到这一点。

第一个是使用 Python 开发的 Sun ONC RPC 函数。看一眼

[http://svn.python.org/projects/python/trunk/Demo/rpc/rpc.py](http://svn.python.org/projects/python/trunk/Demo/rpc/rpc.py)

我相信它实现了其中的大部分。rpcgen 从 .x 文件生成的等效 C XDR 编码/解码例程需要用 Python 手工编写，即打包程序和解包程序。

第二种选择是采用由 rpcgen 生成的 Sun ONC RPC C 客户端函数并创建可与 Python 一起使用的扩展模块。

# javascript - 为 dojox.io.script.get 设置自定义 HTTP 标头

> ID：14686871
> 
> 赞同：0
> 
> 时间：2013-02-04T12:31:30.493
> 
> 标签：javascript, http-headers, cross-domain, jsonp, dojo

我有 Javascript 应用程序`dojox.io.script.get`用于向数据提供者域发出 GET 请求，这与我发出请求的域不同（因此我依赖 JSONP）。我需要发出 HTTP 请求以及自定义标头 ( `myHeader`)。

这是我的代码：

```
var args = {
    url: 'http://datadomain/path/to/data?f=json',
    callbackParamName: "handleData",
    headers: {                    #
      "myHeader": 'blablabla'     #  <-- DOESN'T SEEM TO WORK...
    },                            #
    error: function(error){
        //handle error
    }
};
dojo.io.script.get(args);

function handleData(data){
    //do something with "data"
} 
```

我测试了我的代码，但我从服务器收到一个错误代码，抱怨应该在自定义标头中的信息当前丢失。我阅读了[`dojox.io.script.get`文档](http://dojotoolkit.org/reference-guide/1.8/dojo/io/script.html)）但不幸的是，我身上没有光...

现在，可能只是我遗漏了一些东西或误解了 JSONP 工作流程，但是我如何使用 HTTP 自定义标头执行跨域数据请求呢？

使用 dojo 框架绝对有可能做到这一点吗？

提前致谢！

# linux - bash 和 ksh 之间的子 shell 区别

> ID：14686872
> 
> 赞同：8
> 
> 时间：2013-02-04T12:31:32.267
> 
> 标签：linux, bash, shell, scripting, ksh

我一直认为子shell不是子进程，而是同一个进程中的另一个shell环境。

我使用一组基本的内置插件：

```
(echo "Hello";read) 
```

在另一个终端上：

```
ps -t pts/0
  PID TTY          TIME CMD
20104 pts/0    00:00:00 ksh 
```

因此，kornShell (ksh) 中没有子进程。

输入 bash，给定相同的命令，它的行为似乎有所不同：

```
 PID TTY          TIME CMD
 3458 pts/0    00:00:00 bash
20067 pts/0    00:00:00 bash 
```

因此，bash 中的子进程。
通过阅读 bash 的手册页，很明显为子 shell 创建了另一个进程，但是它伪造了 $$，这很狡猾。

bash 和 ksh 之间的这种差异是预期的，还是我错误地阅读了症状？

编辑：附加信息：`strace -f`在 Linux 上的 bash 和 ksh 上运行显示 bash`clone`为示例命令调用了两次（它不调用`fork`）。所以 bash 可能正在使用线程（我试过`ltrace`但它核心转储了！）。KornShell 调用既不`fork`, `vfork`, 也不`clone`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T13:33:02.707

在 ksh 中，子 shell 可能会或可能不会导致新进程。我不知道条件是什么，但是 shell 已针对`fork()`比 Linux 通常更昂贵的系统的性能进行了优化，因此它尽可能避免创建新进程。规范说的是“新环境”，但环境分离可以在过程中完成。

另一个模糊相关的区别是管道使用了新工艺。在 ksh 和 zsh 中，如果管道中的最后一个命令是内置命令，它会在当前 shell 进程中运行，因此可以这样：

```
$ unset x
$ echo foo | read x
$ echo $x
foo
$ 
```

在 bash 中，第一个之后的所有管道命令都在子 shell 中运行，所以上面的方法不起作用：

```
$ unset x
$ echo foo | read x
$ echo $x

$ 
```

正如@dave-thompson-085 指出的那样，如果您关闭作业控制 ( `set +o monitor`) 并打开`lastpipe`选项 ( `shopt -s lastpipe`)，则可以在 bash 4.2 版及更高版本中获得 ksh/zsh 行为。但我通常的解决方案是使用进程替换：

```
$ unset x
$ read x < <(echo foo)
$ echo $x
foo 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-09T14:50:08.347

ksh93 非常努力地避免子shell。部分原因是避免使用 stdio 和广泛使用[sfio](http://www2.research.att.com/~gsf/download/ref/sfio/sfio.html)，它允许内置程序直接通信。另一个原因是 ksh 理论上可以有这么多的内置函数。如果使用 构建`SHOPT_CMDLIB_DIR`，则默认情况下会包含并启用所有 cmdlib 内置函数。我无法给出避免使用子外壳的位置的完整列表，但通常是在仅使用内置函数且没有重定向的情况下。

```
#!/usr/bin/env ksh

# doCompat arr
# "arr" is an indexed array name to be assigned an index corresponding to the detected shell.
# 0 = Bash, 1 = Ksh93, 2 = mksh
function doCompat {
    ${1:+:} return 1
    if [[ ${BASH_VERSION+_} ]]; then
        shopt -s lastpipe extglob
        eval "${1}[0]="
    else
        case "${BASH_VERSINFO[*]-${!KSH_VERSION}}" in
            .sh.version)
                nameref v=$1
                v[1]=
                if builtin pids; then
                    function BASHPID.get { .sh.value=$(pids -f '%(pid)d'); }
                elif [[ -r /proc/self/stat ]]; then
                    function BASHPID.get { read -r .sh.value _ </proc/self/stat; }
                else
                    function BASHPID.get { .sh.value=$(exec sh -c 'echo $PPID'); }
                fi 2>/dev/null
                ;;
            KSH_VERSION)
                nameref "_${1}=$1"
                eval "_${1}[2]="
                ;&
            *)
                if [[ ! ${BASHPID+_} ]]; then
                    echo 'BASHPID requires Bash, ksh93, or mksh >= R41' >&2
                    return 1
                fi
        esac
    fi
}

function main {
    typeset -a myShell
    doCompat myShell || exit 1 # stripped-down compat function.
    typeset x

    print -v .sh.version
    x=$(print -nv BASHPID; print -nr " $$"); print -r "$x" # comsubs are free for builtins with no redirections 
    _=$({ print -nv BASHPID; print -r " $$"; } >&2)        # but not with a redirect
    _=$({ printf '%s ' "$BASHPID" $$; } >&2); echo         # nor for expansions with a redirect
    _=$(printf '%s ' "$BASHPID" $$ >&2); echo # but if expansions aren't redirected, they occur in the same process.
    _=${ { print -nv BASHPID; print -r " $$"; } >&2; }     # However, ${ ;} is always subshell-free (obviously).
    ( printf '%s ' "$BASHPID" $$ ); echo                   # Basically the same rules apply to ( )
    read -r x _ <<<$(</proc/self/stat); print -r "$x $$"   # These are free in {{m,}k,z}sh. Only Bash forks for this.
    printf '%s ' "$BASHPID" $$ | cat # Sadly, pipes always fork. It isn't possible to precisely mimic "printf -v".
    echo
} 2>&1

main "$@" 
```

出去：

```
Version AJM 93v- 2013-02-22
31732 31732
31735 31732
31736 31732 
31732 31732 
31732 31732
31732 31732 
31732 31732
31738 31732 
```

所有这些内部 I/O 处理的另一个巧妙结果是一些缓冲问题就会消失。这是一个使用内置函数读取行的有趣示例`tee`（`head`不要在任何其他 shell 中尝试此操作）。

```
 $ ksh -s <<\EOF
integer -a x
builtin head tee
printf %s\\n {1..10} |
    while head -n 1 | [[ ${ { x+=("$(tee /dev/fd/{3,4})"); } 3>&1; } ]] 4>&1; do
        print -r -- "${x[@]}"
    done
EOF
1
0 1
2
0 1 2
3
0 1 2 3
4
0 1 2 3 4
5
0 1 2 3 4 5
6
0 1 2 3 4 5 6
7
0 1 2 3 4 5 6 7
8
0 1 2 3 4 5 6 7 8
9
0 1 2 3 4 5 6 7 8 9
10
0 1 2 3 4 5 6 7 8 9 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T13:03:02.497

bash 手册页内容如下：

> 管道中的每个命令都作为单独的进程执行（即，在子shell 中）。

虽然这句话是关于管道的，但它强烈暗示子外壳是一个单独的进程。

[维基百科的消歧页面](http://en.wikipedia.org/wiki/Subshell)还描述了子进程术语中的子外壳。子进程本身当然也是一个进程。

ksh 手册页（一目了然）并没有直接说明它自己对子shell 的定义，因此它并不意味着子shell 是一个不同的进程。

[*学习 Korn Shell*](http://homel.vsb.cz/~dvo25/reily/books/unix2/ksh/ch08_06.htm#KSH-CH-8-SECT-6.2)表示它们是不同的过程。

我会说你遗漏了一些东西（或者这本书是错误的或过时的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-05T19:31:53.820

Korn shell 不一定使用子shell 进行命令替换。它们通常在同一过程中处理。例外包括 I/O 操作

为了更进一步，我有一个命令，在 ksh93 中，从一个非常旧的脚本中给出了一个看起来像这样的变量值：

```
my_variable=(`cat ./my_file`) 
```

换句话说，反引号命令替换周围的括号。“my_file”是一个 4 位八进制数字的列表，一个到一行。

在 ksh93t 及更高版本中以这种方式提供时，会保留换行符，您可以使用计数器逐步遍历变量中的数字。例如，下面的代码将从上面讨论的列表中给出一个 4 位八进制数，之后，您将递增计数器：

```
data_I_want=$(echo "${my_variable[$my_counter]}") 
```

在 ksh93 中，变量的命令也可以这样完成：

```
my_variable=($(cat ./my_file)) 
```

最后，为了消除“无用的猫”，

```
my_variable=($(<./my_file)) 
```

如果命令的结构没有外圆括号，则换行符将被删除（POSIX 标准），并且变量的第一次使用包括文件中的所有数字。使用计数器对变量的后续调用返回空值。

将命令放在括号内会强制在新进程中使用子 shell，并避免使用 .reset 重置默认字段分隔符的必要性`IFS=""`。

很抱歉碰到这么旧的东西，但似乎值得包括这个，因为我没有看到其他地方讨论过这种特殊行为。

# mysql - 如何创建ID号由字母和数字组成的表

> ID：14686875
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:31:59.763
> 
> 标签：mysql, phpmyadmin

如何创建 ID 号由字母和数字组成的表。例如“AS-0001”，这样每次我搜索记录时，我只会使用 ID 号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:35:53.253

简单的：

```
$sql = "CREATE TABLE `table_name` (
id VARCHAR(7),
randomDataField VARCHAR(255),
PRIMARY KEY (id)
)"; 
```

然后 id 将是一个 var char，因此您可以存储数字和字母。

虽然，此 ID 不会自动增加，您需要手动分配 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:59:27.403

```
CREATE TABLE `AS-0001` (
id VARCHAR(7),
randomDataField VARCHAR(255),
PRIMARY KEY (id)
) 
```

# html - 拆分 HTML 页面，以便打印机将其拆分为单独的页面

> ID：14686883
> 
> 赞同：12
> 
> 时间：2013-02-04T12:32:25.407
> 
> 标签：html, printing, pdf-generation

我正在计划在线客户可用的价格表，我正在考虑简单的非常长的页面或 div 容器，其中包含一些锚链接以帮助跳转到不同的产品。

但是，如果有人想打印某些产品的价目表，我不希望打印所有页面，而只打印当前页面。是否有任何打印中断字符或标签？

以防万一有人有更好的想法，我想要实现的只是在 html 中使用价目表在一个地方更改它，但仍然能够将单独的产品价目表转换为 PDF 文件，以便通过电子邮件发送特定产品。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-04T12:35:07.063

使用这个 CSS：

```
@media print
{
      .page-break  { display:block; page-break-before:always; }

} 
```

然后在您希望页面中断的 HTML 中引用它：

```
<div class="page-break"></div> 
```

你去吧:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-19T20:33:23.520

[根据 w3schools](https://www.w3schools.com/cssref/pr_print_pageba.asp)，您还可以执行以下操作：

```
@media print {
  .page {page-break-after: always;}
} 
```

然后，在您的 HTML 中：

```
<div class="page">
  <!-- Page Contents -->
</div> 
```

或者，如果您在每一页下都有一个页脚（例如用于页码）：

```
@media print {
  footer {page-break-after: always;}
} 
```

# html - 刷新浏览器时 HTML5 视频不起作用

> ID：14686884
> 
> 赞同：0
> 
> 时间：2013-02-04T12:32:35.367
> 
> 标签：html, wordpress, video, mp4, webm

我必须创建一个带有全屏 dragdealer.js 幻灯片的网站，在其中一张幻灯片中嵌入 HTML5 视频作为背景。

我正在使用 Wordpress 和 video-js。所以我在 WP 帖子中硬编码以下代码：

```
<video height="450" width="800" poster="Absolute_poster_link" autoplay="autoplay" preload="metadata" loop="loop" class="video-js" id="bg_video" tabindex="0">
<source src="Absolute_mp4_link"  type="video/mp4"></source>
<source src="Absolute_webm_link" type="video/webm"></source>
<source src="Absolute_ogv_link"  type="video/ogg"></source>
</video> 
```

当页面被父链接触发时，页面正在加载，在后台显示视频以便它可以工作，但是当我在此页面上按 F5 或刷新浏览器（Firefox、Chrome ...）时，视频只是黑色的，一切正常...

有没有人解决这个问题？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:04:58.320

好吧，我找到了一种方法来完成这项工作。似乎 Wordpress 不适合在其帖子区域中发布具有自动播放属性的 HTML5 视频标签。所以我决定使用 javascript 函数和 .append() jQuery 方法创建 HTML5 标记，它对我有用！

我硬编码了这样的东西：

```
function appendVideo(){
    jQuery('#main').append('<div id="video-loop-wrapper"><div class="video-overlay "></div><div id="video-loop"></div></div>');
    jQuery('#video-loop').html('<video id="bg_video" width="800" height="450" loop="loop" preload="metadata" autoplay="autoplay" poster="poster_link"><source src="video_.mp4_link" type="video/mp4" /><source src="video_.webm_link" type="video/webm" /><source src="video_.ogv_link" type="video/ogg" /></video>');
    } 
```

# plone - 使用 funnelweb 导入而不更改 url

> ID：14686885
> 
> 赞同：2
> 
> 时间：2013-02-04T12:32:35.663
> 
> 标签：plone, plone-funnelweb

我已经从互联网上的一个站点将一些页面导入到我的克隆站点。现在的问题是，当导入到 plone 时，它​​会更改 url，从而导致 plone 无法找到文件。因此，在导入之前，以下是其中一个 url 的外观示例：

[http://wiki.scandiatransplant.org/?What_Is_Scandiatransplant](http://wiki.scandiatransplant.org/?What_Is_Scandiatransplant)

导入后，它看起来像这样：

```
http://localhost:8080/Scandiatransplant/wiki/index.html?What_Is_Scandiatransplant 
```

显然这是一个问题，因为没有名为 index.html 的选项？有没有办法解决这个问题？我在想也许可以通过在 pipeline.cfg 文件中添加一个告诉不要更改 url 的步骤来修复它？这只是一个猜测。而且我还没有制作 pipeline.cfg。该站点： http: [//plone.org/products/funnelweb/#using-a-local-pipeline-configuration](http://plone.org/products/funnelweb/#using-a-local-pipeline-configuration)解释说可以制作一个 pipeline.cfg 文件，但它没有说明该文件的放置位置。我应该把这个文件放在哪里？

最后......它可以通过正则表达式表示在导入过程中要忽略哪些文件，但我没有告诉 funnelweb 忽略任何文件。它仍然不导入图像、pdf 文件、xslt 等。有没有人也遇到过这种情况？

所以，总结一下我的问题。

1.  我应该将 pipeline.cfg 文件放在哪里？

2.  如何使 plone/funnel 不更改 url，但在导入时保留相同的 url？

3.  如何让 funnelweb 也导入图像和 pdf 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:49:50.823

1.  您可以将 pipeline.cfg 文件*放在任何地方*；你告诉`funnelweb`从命令行在哪里找到它：

    ```
    bin/funnelweb --pipeline=path/to/your/pipeline.cfg 
    ```

2.  这更复杂。您的目标站点是一个 Wiki，页面名称是那里的查询字符串的一部分。`?What_Is_Scandiatransplant`需要作为新Plone页面的id，其他页面使用的URL需要重写才能匹配。

    你当然可以在管道中做到这一点，但比这里容易写的要复杂一些。遵循文档`funnelweb`（该`urltidy`组件将帮助重写 URL），并随时就您在 SO 上遇到的问题提出具体问题。

3.  检查日志并查看 funnelweb 已经找到和上传的内容。您可能需要调整网络爬虫设置；这因站点而异。如果没有有关该站点的更多详细信息，我只能给您这个一般性提示。

# android - Android - 片段内的片段 - 保留状态

> ID：14686888
> 
> 赞同：2
> 
> 时间：2013-02-04T12:32:36.217
> 
> 标签：android, android-fragments, android-viewpager, android-tabs

我正在尝试在滑动视图片段（名为 BROWSE）中添加标签片段。当 BROWSE 被访问时，与远程服务器的连接完成，数据被检索并显示在选项卡内的 gridview 中，当单击不同的选项卡时，建立新连接，并且 gridview 填充新数据。

问题是我无法保存选项卡的状态，我不想每次都建立连接，只有在第一次单击选项卡时才建立与数据库的连接，如果再次单击选项卡我想要保留状态的gridview。

这是 BROWSE 片段的 onCreate 方法，在这个方法中，我正在初始化一个加载器以从远程服务器获取数据：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            if (t == 0) {
            Log.v("BROWSE","++++++++ Inside onCreate t = 0 ++++++++");

            tweets = Collections.emptyList();
            // This is our REST action.

            Uri twitterSearchUri = new Uri.Builder()
            .scheme("http")
            .authority(ip)
            .path("browse.php")
            .appendQueryParameter("SpecialOffer", "0")
            .build();

                Bundle params = new Bundle();
            //    params.putString("q", "android");
                params.get("salim slem");
                // These are the loader arguments. They are stored in a Bundle because
                // LoaderManager will maintain the state of our Loaders for us and
                // reload the Loader if necessary. This is the whole reason why
                // we have even bothered to implement RESTLoader.
                Bundle args = new Bundle();
                args.putParcelable(ARGS_URI, twitterSearchUri);
                args.putParcelable(ARGS_PARAMS, params);

            //For loading Images    
            //--------------------------------------------------    

                options = new DisplayImageOptions.Builder()
                .showStubImage(R.drawable.stub_image)
                .showImageForEmptyUri(R.drawable.image_for_empty_url)
                .cacheInMemory()
                .cacheOnDisc()
                .bitmapConfig(Bitmap.Config.RGB_565)
                .build();

            //--------------------------------------------------    

                // Initialize the Loader.
                getSupportLoaderManager().initLoader(LOADER_TWITTER_SEARCH, args, this);

            }

            if(t == 1) {

                Log.v("BROWSE","++++++++ Inside onCreate  t = 1 ++++++++");

                tweets = Collections.emptyList();
                // This is our REST action.

                Uri twitterSearchUri = new Uri.Builder()
                .scheme("http")
                .authority(ip)
                .path("browse.php")
                .appendQueryParameter("SpecialOffer", "1")
                .build();

                    Bundle params = new Bundle();
                //    params.putString("q", "android");
                    params.get("salim slem");
                    // These are the loader arguments. They are stored in a Bundle because
                    // LoaderManager will maintain the state of our Loaders for us and
                    // reload the Loader if necessary. This is the whole reason why
                    // we have even bothered to implement RESTLoader.
                    Bundle args = new Bundle();
                    args.putParcelable(TAB1_ARGS_URI, twitterSearchUri);
                    args.putParcelable(TAB1_ARGS_PARAMS, params);

                //For loading Images    
                //--------------------------------------------------    

                    options = new DisplayImageOptions.Builder()
                    .showStubImage(R.drawable.stub_image)
                    .showImageForEmptyUri(R.drawable.image_for_empty_url)
                    .cacheInMemory()
                    .cacheOnDisc()
                    .bitmapConfig(Bitmap.Config.RGB_565)
                    .build();

                //--------------------------------------------------    

                    // Initialize the Loader.
                    getSupportLoaderManager().initLoader(TAB1_LOADER_TWITTER_SEARCH, args, this);
                }
        } 
```

这是与 gridview 一起创建选项卡的 onCreateView 方法

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        Log.v("BROWSE", "Inside OnCreateView");

        View view = inflater.inflate(R.layout.gridview, container, false);

        gridView = (GridView) view.findViewById(R.id.gridViewImage);

        gridView.setAdapter(new ImageTextAdapter(view.getContext(), LOADING));

        // When an item in the gridview is clicked
        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                FragmentPosition = 2;
                Log.v("BROWSE: POSITION OF ITEM IN GRIDVIEW","## "+position+" ##");
                DialogFragment newFragment = new BrowseDialogFragment(position);
                newFragment.show(getSupportFragmentManager(), "missiles");

            }
        });

        // creating tabs
        mTabHost = (TabHost) view.findViewById(R.id.testtabhost1); 
        mTabHost.setup();
        mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1").setContent(R.id.gridViewImage)); 
        mTabHost.addTab(mTabHost.newTabSpec("tab_test2").setIndicator("TAB 2").setContent(R.id.gridViewImage)); 
        mTabHost.addTab(mTabHost.newTabSpec("tab_test3").setIndicator("TAB 3").setContent(R.id.gridViewImage)); 
        mTabHost.setCurrentTab(0); 

        mTabHost.setOnTabChangedListener(new OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {

            int i = mTabHost.getCurrentTab();
             Log.i("@@@@@@@@ ANN CLICK TAB NUMBER", "------" + i);

             if (i ==0) {
                 Bundle tempBundle = new Bundle();
                 t = 0;
                onCreate(tempBundle);
        }

             if (i ==1) {
                 Bundle tempBundle = new Bundle();     
                 t = 1;
                 onCreate(tempBundle);
                }

              }
            });

        return view;
    } 
```

我想我的问题是我不能从 onCreateView 给 onCreate 提供“savedInstanceState”。我的问题是，如何在选项卡中保存状态？也许使用提供给 onCreate 的包，但我还没有找到怎么做！

预先感谢您的帮助！！

这就是我正在谈论的 UI：

![在此处输入图像描述](../Images/92c6e235d47bf221bc68d81d78a522d1.png)

这就是再次按下选项卡时的 UI：

![在此处输入图像描述](../Images/b07ff650fc68d5d30f80dd5cff86ad18.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:37:39.663

尝试在这种情况下使用数据库。很容易意识到这一点： [教程](http://www.vogella.com/articles/AndroidSQLite/article.html)

所以你应该怎么做：

1.  获取远程数据
2.  将其保存在 SQLite DB 中
3.  创建一个 Methode，它检查数据库中数据的年龄。
4.  例如，如果数据超过 10 分钟，它应该获取远程数据并更新表。

我希望这有帮助。

此致

苹果浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:56:01.710

savedInstanceState 变量被传递给**onViewCreated方法，该方法在****onCreateView**之后立即调用。

您应该尝试仅在 onCreateView（gridView、mTabHost 等）中膨胀您的布局并初始化您的视图字段，并在 onViewCreated 中恢复状态（或设置默认状态）

# php - Goutte 禁用 Guzzle 缓存

> ID：14686889
> 
> 赞同：3
> 
> 时间：2013-02-04T12:32:39.567
> 
> 标签：php, symfony, goutte, guzzle

我遇到了 Goutte 的问题，或者实际上是 Goutte 的 Guzzle 部分。

Guzzle 确实会自动缓存每个 GET 调用，我试图禁用它，但我无法真正让它工作。

正如您在此处看到的，我将缓存参数直接解析到 Guzzle 构造函数中。

```
use Goutte\Client;
use Guzzle\Http\Client as GuzzleClient;

$client = new Client();

$client->setClient(new GuzzleClient('/', array(
    'curl.options' => array(
        CURLOPT_COOKIESESSION => true,
    CURLOPT_COOKIEJAR => 'cookie.txt',
        CURLOPT_FRESH_CONNECT => true,
        CURLOPT_TIMEOUT => 0
    ),
    'params.cache.override_ttl' => 0,
    'params.cache.default_ttl' => 0,
    'params.cache.revalidate'   => 'always'
))); 
```

但是，这不会进行任何更改。从缓存插件的文档开始（参见：[http](http://guzzlephp.org/guide/http/caching.html) ://guzzlephp.org/guide/http/caching.html ）

这段代码：

```
echo $client->getClient()->get('/')->getParams()->get('cache.override_ttl'); 
```

应该输出cache.override_ttl的当前值，这不会输出任何东西。

我相信这一定是关于 Goutte 包装的东西，我忽略了。有人有想法么？

# asp.net - 如何将初始“选择”值添加到 DropDownList

> ID：14686892
> 
> 赞同：8
> 
> 时间：2013-02-04T12:32:54.227
> 
> 标签：asp.net, drop-down-menu

如果我使用下拉列表：

```
 <asp:DropDownList ID="DropDownListSubContractors" runat="server" 
     DataTextField="Company_Name" DataValueField="id">
 </asp:DropDownList> 
```

我使用/设置什么属性允许我使用“---Select---”作为下拉菜单中的初始选项，而不是列表中的第一个值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T12:37:17.947

您可以使用

```
<asp:DropDownList ID="DropDownListSubContractors" runat="server" AppendDataBoundItems="true" DataTextField="Company_Name" DataValueField="id">
    <asp:ListItem Text="---Select---" Value="0" />   
</asp:DropDownList> 
```

或者您可以像这样在后面的代码中动态添加它

```
DropDownListSubContractors.Items.Add(new ListItem("---Select---", "0")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T12:34:20.227

```
<asp:DropDownList ID="DropDownListSubContractors" runat="server" AppendDataBoundItems="true" DataTextField="Company_Name" DataValueField="id">
    <asp:ListItem Text="---Select---" Value="" />   
</asp:DropDownList> 
```

您现在可以像往常一样在后面的代码中将 DropDown 绑定到数据源，并且此数据源不需要包含默认值项：

```
IEnumerable<MyViewModel> model = ...
DropDownListSubContractors.DataSource = model;
DropDownListSubContractors.DataBind(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:12:37.543

你可以这样做：

从后面的代码：

```
DropDownListSubContractors.Items.Insert(0, new ListItem("---Select---", string.Empty)); 
```

*注意：我们使用索引 0 使其成为列表中的第一个元素。*

# dynamics-crm-2011 - 在导入时注册 CRM 2011 插件

> ID：14686893
> 
> 赞同：2
> 
> 时间：2013-02-04T12:32:55.613
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

如何在导入时注册插件？
有消息“导入”和“全部导入”。它们是如何使用的？

我想在导入特定实体后创建一条记录。
我尝试使用“导入”，但我不知道是什么`context.InputParameters["Target"]`。导入 CSV 时插件没有触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T18:59:41.520

Import 正在创建/更新实体，因此您应该能够根据 Create 和 Update 消息触发插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T21:06:52.120

您可以使用*更新*和*创建*消息。现在，我了解到您希望将执行限制为单个（也是最后一个）实例。技术上，做不到。每个*更新*和*创建*都会单独调用插件。

**但是**，有解决方法。并不为此感到自豪，但是是的，我做到了。一次。

```
public void Execute(...)
{
  Entity entity = context.InputParameters["Target"] as Entity;
  bool isTheLast = entity["someField"] == "Viltersten is Godlike";
  if(!isTheLast)
    return;
} 
```

这可以缩短，在一行中完成。我只是想成为教学法。另外，我没有检查确切的语法，但你明白了。使您导入的最后一个东西命名为独特的东西。然后，让插件随心所欲地触发。只有一个实例可以通过。

如果您无法控制导入顺序，这将是 FUBAR。

就我而言，我做不到。我的解决方案是引入一个名为*Controller*的新实体。在所有导入之后，我创建了它的一个新实例。**在那里，我确实执行了其他**实体所需的所有操作。

吹牛？几乎不。可行吗？是的。

# eclipse-rcp - 如何将调色板中的图形拖放到 GEF 编辑器中？

> ID：14686895
> 
> 赞同：2
> 
> 时间：2013-02-04T12:33:01.553
> 
> 标签：eclipse-rcp, eclipse-emf, eclipse-gef

我正在研究 GEF 项目。在该项目中，我想将图形从调色板拖放到 GEF 编辑器中。我尝试添加一些侦听器，但仍然无法拖放。

**这是我的代码：**

```
public class OPMGraphicalEditor extends GraphicalEditorWithFlyoutPalette {

private Resource opdResource;
private ObjectProcessDiagram opd;

public OPMGraphicalEditor() {
    setEditDomain(new DefaultEditDomain(this));
}

@Override
protected PaletteViewerProvider createPaletteViewerProvider() {
    return new PaletteViewerProvider(getEditDomain()) {
        @Override
        protected void configurePaletteViewer(PaletteViewer viewer) {
            super.configurePaletteViewer(viewer);
            viewer.addDragSourceListener(new TemplateTransferDragSourceListener(
                    viewer));
        }
    };
}

@SuppressWarnings("deprecation")
private TransferDropTargetListener createTransferDropTargetListener() {
    return new TemplateTransferDropTargetListener(getGraphicalViewer()) {
        @SuppressWarnings("unchecked")
        @Override
        protected CreationFactory getFactory(Object template) {
            return new NodeCreationFactory((Class<OPMObject>) template, getModel());
        }

        private Object getModel() {

            return null;
        }
    };
}

@Override protected void initializeGraphicalViewer() {
    GraphicalViewer viewer = getGraphicalViewer();
    super.initializeGraphicalViewer();
    getGraphicalViewer().setContents(opd);
    getPaletteViewerProvider().getEditDomain().getPaletteViewer().addDragSourceListener(
            new TemplateTransferDragSourceListener(getPaletteViewerProvider().getEditDomain().getPaletteViewer()));

    // listen for dropped parts
    viewer.addDropTargetListener(createTransferDropTargetListener());
}

@Override
protected void setGraphicalViewer(GraphicalViewer viewer) {
    super.setGraphicalViewer(viewer);
    this.getGraphicalViewer().addDropTargetListener(new TemplateTransferDropTargetListener(getGraphicalViewer()));

}

@Override protected void configureGraphicalViewer() {
    super.configureGraphicalViewer();
    getGraphicalViewer().setEditPartFactory(new OPMEditPartFactory());
}

@Override
protected PaletteRoot getPaletteRoot() {
    PaletteRoot palette = new PaletteRoot();
    Activator activator = Activator.getDefault();
    IWorkbench workbench = activator.getWorkbench();
    IWorkbenchWindow workbenchWindow = workbench.getActiveWorkbenchWindow();
    ISelectionService selectionService = workbenchWindow
            .getSelectionService();
    ISelection selection = selectionService.getSelection();
    return new OPMGraphicalEditorPalette();

}

@Override public void doSave(IProgressMonitor monitor) {
    if(opdResource == null) {
        return;
    }

    try {
        opdResource.save(null);
    } catch(IOException e) {

        e.printStackTrace();
        opdResource = null;
    }
}

@Override public void init(IEditorSite site, IEditorInput input) throws PartInitException {
    super.init(site, input);

    loadInput(input);
}

private void loadInput(IEditorInput input) {
    OpmPackage.eINSTANCE.eClass(); // This initializes the OPMPackage singleton implementation.
    ResourceSet resourceSet = new ResourceSetImpl();
    if(input instanceof IFileEditorInput) {
        IFileEditorInput fileInput = (IFileEditorInput) input;
        IFile file = fileInput.getFile();
        opdResource = resourceSet.createResource(URI.createURI(file.getLocationURI().toString()));
        try {
            opdResource.load(null);
            ObjectProcessDiagram opd = (ObjectProcessDiagram) opdResource.getContents().get(0);
        }
        catch(IOException e) {
            e.printStackTrace();
            opdResource = null;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:10:11.213

你必须做两件事：

1.  将目标放置目标侦听器添加到图形查看器：`getGraphicalViewer().addDropTargetListener(new TemplateTransferDropTargetListener(getGraphicalViewer()));`
2.  向调色板添加一个拖动源侦听器侦听器： `getEditDomain().getPaletteViewer().addDragSourceListener( new TemplateTransferDragSourceListener(getEditDomain().getPaletteViewer()));`
3.  将您的创作工具更改为`CombinedTemplateCreationEntry`

更详尽的解释可以在[我为这个场合创建的博客文章中找到](http://www.vainolo.com/2013/02/06/creating-an-opm-gef-editor-part-23-drag-drop-from-the-palette/)

# mailchimp - 如何使用 MailChimp api 向群组发送电子邮件？

> ID：14686896
> 
> 赞同：9
> 
> 时间：2013-02-04T12:33:02.000
> 
> 标签：mailchimp

我想按“时事通讯”、“用户”和“成员”对我的用户进行分组，并通过 API 发送电子邮件，我怎样才能做到这一点： http: [//apidocs.mailchimp.com/api/1.3/index。 php](http://apidocs.mailchimp.com/api/1.3/index.php)

[将用户添加到组](https://stackoverflow.com/questions/7726281/how-to-listsubscribe-in-groups-mailchimp-api-1-3)似乎相当简单，但我似乎无法找到如何发送给他们。既`createCampaign`没有`campaignSendNow`也没有提到团体或如何发送给他们。

目前我正在通过 3 个单独的列表来处理这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T03:36:59.820

您需要使用`segment_opts`campaignCreate() 方法中的参数来选择要发送到的组（即段）。

使用该`segment_opts`参数，您可以选择特定组。像这样的东西：

```
// Assuming your interest group has an ID of 1.

$conditions = array();
$conditions[] = array('field'=>'interests-1', 'op'=>'one', 'value'=>'Newsletter');
$segment_opts = array('match'=>'all', 'conditions'=>$conditions);

$retval = $api->campaignCreate($type, $opts, $content, $segment_opts); 
```

# asp.net-mvc - ASP MVC 错误：对象引用未设置为对象的实例

> ID：14686898
> 
> 赞同：0
> 
> 时间：2013-02-04T12:33:14.213
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我的观点

```
<table>
                 <tr>
        <td>
            Middle Name : 
        </td>
        <td>
            @Html.EditorFor(model => @Model.EmployeeDetail.MiddleName)
        </td>
        <td>
            @Html.ValidationMessageFor(model => @Model.EmployeeDetail.MiddleName)
        </td>
    </tr>
    <tr>
        <td>
            Last Name : 
        </td>
        <td>
            @Html.EditorFor(model => @Model.EmployeeDetail.LastName)
        </td>
        <td>
            @Html.ValidationMessageFor(model => @Model.EmployeeDetail.LastName)
        </td>
    </tr>
    <tr>
        <td>
            Date of Birth  : 
        </td>
        <td>
            @Html.EditorFor(model => @Model.EmployeeDetail.DateOfBirth)
        </td>
        <td>
            @Html.ValidationMessageFor(model => @Model.EmployeeDetail.DateOfBirth)
        </td>
    </tr>
</table> 
```

我的控制器动作

```
 public ActionResult Index()
    {
        var id = 0;
        if (Session["id"] != null)
        {
            id = Convert.ToInt32((Session["id"].ToString()));
        }
        var empDetails = _empRepository.GetEmployeeDetails(id);
        var emp = new UserViewModel { EmployeeDetail = empDetails };
        return View(emp);
    } 
```

我的视图模型

```
public class UserViewModel
{
    public EmployeeDetail EmployeeDetail { get; set; }
} 
```

我的模型

```
public partial class EmployeeDetail
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public System.DateTime DateOfBirth { get; set; }
    public string IsAdmin { get; set; }
} 
```

在我看来，我在 @Html.ValidationMessageFor(model => @Model.EmployeeDetail.DateOfBirth) 获得对象引用

由于我从控制器操作传递给视图的视图模型“emp”为空，因此我收到此错误，因为我在数据库中没有该特定 ID 的任何数据。

如何避免此对象引用错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:34:27.270

代替

```
 @Html.EditorFor(model => @Model.EmployeeDetail.DateOfBirth) 
```

采用

```
 @Html.EditorFor(model => model.EmployeeDetail.DateOfBirth) 
```

你应该对所有线路都这样做......

```
 @Html.SomethingFor(model => model.EmployeeDetail.Something) // Not @Model.Something 
```

更新：

不要让 EmployeeDetail 为空。

```
public class UserViewModel
{
     private EmployeeDetail _employeeDetail = new EmployeeDetail();

     public EmployeeDetail EmployeeDetail 
     { 
        get { return _employeeDetail; }
        set { _employeeDetail = value ?? new EmployeeDetail(); } 
     }
} 
```

# jakarta-ee - 如何使用 servlet 对用户进行身份验证

> ID：14686902
> 
> 赞同：2
> 
> 时间：2013-02-04T12:33:18.557
> 
> 标签：jakarta-ee, authentication, servlets, login, web

我是 Java EE 的新手。我创建了一个登录表单和 servlet 来验证用户的凭据，但是当我`getRemoteUser()`在验证后使用方法检查远程用户时，我的代码不显示用户名。

我的登录 servlet 是：

```
String uname,pass;
PreparedStatement ps=null;
uname=request.getParameter("uname");
pass=request.getParameter("pass");

ResultSet rs = null;
Connection con = null;
try {
    con = prepareConnection();

    String Query="select uname,email from passmanager where pass=?";
    ps=con.prepareStatement(Query);

    ps.setString(1,pass);
    rs=ps.executeQuery();

    while(rs.next())
    {
        if (uname.equals(rs.getString("uname")) || uname.equals(rs.getString("email"))) 
        {
            rs.close();                                                              
            ps.close();                                                            
            ps = null;                                                             
            con.close();                                                            
            con = null;  
            HttpSession session = request.getSession(true); 
            session.setAttribute("currentSessionUser",uname); 
            RequestDispatcher dis = request.getRequestDispatcher("/user.html");
            dis.forward(request, response);
            break;
        }
    }
}
catch(Exception e)
{
    System.out.println(e);
} 
```

如果有任何需要更改/修改的内容，请告诉我并帮助我.....提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T12:43:01.890

它是容器管理身份验证的`HttpServletRequest#getRemoteUser()`一部分[，](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)基本上`<security-constraint>`只是`web.xml`.

但是你有一个完全自制的 servlet，它实际上在 DB 交互方面也做得很差（它在 Java 中而不是在 SQL 中通过`WHERE`用户名和密码的子句执行比较；此外，它还通过以下方式泄漏 JDBC 资源不关闭它们`finally`）。

你基本上有两个选择：

1.  不要自产身份验证。删除所有糟糕、低效和资源泄漏的代码，并使用容器管理的身份验证。您可以在此答案中找到一个启动示例：[Restrict JSP/Servlet access to specific users only](https://stackoverflow.com/questions/3134228/lite-protection-of-a-website-for-private-viewing/3134323#3134323)

2.  `session.getAttribute("currentSessionUser")`只需通过和/或获取登录用户，`${currentSessionUser}`然后自制一个 servlet 过滤器来限制访问。您可以在此答案中找到一个启动示例：[Authenticating the username, password by using filters in Java (contacting with database)](https://stackoverflow.com/questions/1945377/authenticating-the-username-password-by-using-filters-in-java-contacting-with/1946121#1946121)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:07:25.963

要添加到@BalusC 的响应，还有另一种容器管理身份验证方法，使用[Java Servlet 3.0](http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html)（[Java EE 6](http://www.oracle.com/technetwork/java/javaee/tech/index.html)的一部分）中的[javax.servlet.http.HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)中的安全方法-和. 它们是 HttpServletRequest 对象中的新方法，而且几乎没有引起注意（如果通过这些简化花费了这么多时间来获得这个 Java EE 版本，为什么会有不同呢？）。`login``logout``authenticate`

无论采用哪种方法（编程式或声明式），您最终都必须在应用程序服务器中配置用户存储库（该部分是特定于容器的），并可能定义一个领域以指向部署描述符中的用户存储库`web.xml`（默认情况下可能不适合您的需要 -`BASIC`或`FORM`) `CLIENT_CERT`。

在您的情况下，servlet 做的太多 - 负责检索用户的部分应该是应用程序服务器的自定义用户注册表处理程序的一部分（或者更好的是 - 重用应用程序服务器中已经可用的内容 - [WebSphere V8.5 Liberty Profile](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.wlp.nd.doc/ae/twlp_sec_authenticating.html)或[WebSphere V8.5](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/tsec_useregistry.html) ) 并且一旦它被定义用于`<security-constraint>`或`web.xml`以上新的安全方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:43:01.423

您没有以这种方式记录您的用户。您所做的是设置一个名为“currentSessionUser”的会话属性，并且容器没有将其识别为“经过身份验证的用户”。

搜索“领域配置（您的容器名称）”以查看如何进行此配置。每个容器都有自己的方式来做到这一点。:)

# android - Android 中的 Fitbit 帐户集成

> ID：14686906
> 
> 赞同：2
> 
> 时间：2013-02-04T12:33:30.390
> 
> 标签：android, callback, fitbit

我正在开发一个与医学相关的应用程序，我必须在我的应用程序中实现 FitBit 设备。

我正在关注 FitBit 开发人员工具，但我无法集成它，如果我在没有 FitBit 库的情况下手动执行此操作，我将无法在身份验证后返回我的应用程序。

我的代码如下 -

```
 private void login() {

            try {

                HttpResponse response = null;
                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, 20000);
                HttpConnectionParams.setSoTimeout(httpParameters, 20000);
                HttpClient client = new DefaultHttpClient(httpParameters);

                HttpGet request = new HttpGet(
                        "http://api.fitbit.com/oauth/request_token?oauth_consumer_key=7af733f021f649bcac32f6f7a4fe2e9a&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1358921319&oauth_nonce=456236281&oauth_callback=http://www.androidhub4you.com/&oauth_version=1.0&oauth_token=5cefb18d2a80073520211f03f8d75321&oauth_signature=QdVUzMvT6tveGyoPu%2BEevzvo07s%3D");
                response = client.execute(request);

                BufferedReader rd = new BufferedReader(new InputStreamReader(
                        response.getEntity().getContent()));

                String webServiceInfo = "";
                while ((webServiceInfo = rd.readLine()) != null) {
                    Log.e("****Step 1***", "Webservice: " + webServiceInfo);
                    authToken = webServiceInfo.substring(12, 44);
                    Log.e("Auth token:", "Webservice: " + authToken);

                }

            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

        } 
```

在获得 authToken 后，我打开了一个网页，但我无法再次返回我的应用程序。

```
 private void openURL() {
                webView.loadUrl("https://www.fitbit.com/oauth/authorize?oauth_token="
                        + authToken + "&display=touch");
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:26:17.797

最后我得到了我自己的问题的答案-

```
try {

            HttpResponse response = null;
            HttpParams httpParameters = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParameters, 20000);
            HttpConnectionParams.setSoTimeout(httpParameters, 20000);
            HttpClient client = new DefaultHttpClient(httpParameters);

            HttpGet request = new HttpGet(
                    "http://api.fitbit.com/oauth/request_token?oauth_consumer_key=7af733f021f649bcac32f6f7a4fe2e9a&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1358921319&oauth_nonce=456236281&oauth_callback=http://www.androidhub4you.com/&oauth_version=1.0&oauth_token=5cefb18d2a80073520211f03f8d75321&oauth_signature=QdVUzMvT6tveGyoPu%2BEevzvo07s%3D");
            response = client.execute(request);

            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));

            String webServiceInfo = "";
            while ((webServiceInfo = rd.readLine()) != null) {
                Log.e("****Step 1***", "Webservice: " + webServiceInfo);
                authToken = webServiceInfo.substring(12, 44);
                Log.e("Auth token:", "Webservice: " + authToken);

            }

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

在那之后-

```
 String fitUrl = "https://www.fitbit.com/oauth/authorize?oauth_token="
                    + authToken +"&display=touch";
            webView.loadUrl(fitUrl);
 Intent intent = new Intent(FitBitActivity.this, DashboardActivity.class);
            pActivity.finishChildActivity(intent); 
```

**编辑：** 您可以从这里下载邮政编码-

[http://www.androidhub4you.com/2013/11/fitbit-integration-in-android-login.html](http://www.androidhub4you.com/2013/11/fitbit-integration-in-android-login.html)

[https://github.com/manishsri01/FitbitIntegration](https://github.com/manishsri01/FitbitIntegration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T22:03:43.937

我使用这个和其他各种来源创建了一个使用 Scribe OAuth 库的示例“从 Android 连接到 Fitbit”项目。项目[在](https://github.com/pugwonk/FitbitAndroidSample)GitHub 上。这是一项正在进行的工作，但我确实让它为适当的用户进行身份验证并获取一些数据。

# javascript - Chrome：jQuery .height 问题

> ID：14686908
> 
> 赞同：0
> 
> 时间：2013-02-04T12:33:34.783
> 
> 标签：javascript, jquery, google-chrome, iframe, height

我一直在研究这个问题一段时间，但找不到任何解决方案。

**案子：**

我有一个 iframe，我需要根据内容重新调整大小（页面是 AJAX 密集型的，内容可以根据用户的操作增加和减少）。由于父页面和 iframe 中加载的页面都在同一个域上，我在父页面中编写了一个 js 函数，它需要一个整数值。然后通过js设置iframe的高度，如下所述。

```
document.getElementById('frameId').style.height = (height) + "px"; 
```

**问题：**

我正在使用 jQuery 来获取文档更改时的高度。

```
jQuery(document).height(); 
```

我遇到的问题是 Chrome 给我的高度比 Firefox/IE 高约 300 像素。我正在研究为什么会这样。在敲了敲头之后，我发现由于某种原因，在 Chrome 中，当我获得文档的高度时，它还包括在计算中那些 CSS 中“显示”设置设置为“无”的元素。我有一个在用户进行操作时显示的列表。现在它在我的计算中产生了问题。由于这个额外的高度，我得到的页面底部看起来是空的，感觉好像还没有加载一些东西（这不是很吸引人）。

任何帮助将不胜感激。

问候

杰汉则布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:07:50.057

你试过了吗：

```
$('#frameId').height( $(document).innerHeight() ); 
```

# sql - SQL 将 varchar 转换或强制转换为 datetime

> ID：14686910
> 
> 赞同：0
> 
> 时间：2013-02-04T12:33:41.803
> 
> 标签：sql, type-conversion

我有一个表格，其中有一`DATEDEPOT`列为`varchar(20)`.

里面的信息是这样的：`20020101`-我的意思是`YYYYMMDD`

我想将其转换为日期时间。

为此，我检查了其他帖子的答案，但没有什么对我有用。

这是我尝试过的：

```
select datedepot, cast(datedepot as datetime) as test from DessinsV2 
```

我收到这条消息：

> *Msg 241, Niveau 16, État 1, Ligne 1\.
> Échec de la conversion de la date et/ou de l'heure à partir d'une chaîne de caractères。*

我试过这个：

```
declare @Madate char(10)
SELECT @MaDate=datedepot from DessinsV2

select convert(datetime,left(@Madate,4)+substring(@Madate,5,2)+right(@Madate,2))as DATEDEPOTTEST from dessinsv2 
```

我得到：

> *Msg 241, Niveau 16, État 1, Ligne 1
> Échec de la conversion de la date et/ou de l'heure à partir d'une chaîne de caractères。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:09:08.057

```
select '20020101' as orignal_date,
       cast('20020101' as datetime) as converted_date 
```

这对我很好，请检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:10:21.427

您必须为转换函数指定日期输入格式，例如：

`select datedepot, convert(datetime, datedepot,112) as test from DessinsV2`

有关更多格式，请参见：http: [//msdn.microsoft.com/es-es/library/ms187928.aspx](http://msdn.microsoft.com/es-es/library/ms187928.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:27:50.300

谢谢大家帮忙。

我的查询很好，但是我查询了“分组依据”，发现了一些不规则的内容，例如特殊字符或特殊数字。这些信息无法转换。

所以我忽略了奇怪信息的行，我的查询工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:43:56.113

这可以在您的机器上运行吗？

```
DECLARE @var as nvarchar(20)
SELECT @var = '20020101'
SELECT CONVERT(datetime, @var) 
```

此查询适用于我，但如果我使用格式为“DDMMYYYY”的日期字符串则无效。

有关日期时间的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/ms187819.aspx](http://msdn.microsoft.com/en-us/library/ms187819.aspx)。

# asp.net - 在 ASP 经典窗口中强制 VBScript 代码在调用 ASP.NET 页面后等待

> ID：14686917
> 
> 赞同：1
> 
> 时间：2013-02-04T12:34:28.277
> 
> 标签：asp.net, asp-classic, vbscript, window, wait

我在 ASP 经典页面中有下一个场景（我无法更改）：

VBScript 代码 ....

```
var w
w=window.open(...) 
```

VBScript 代码 ....

在 window.open 中，我调用了一个 ASP.NET 窗口。我想要做的是在 javascript 块之后强制 VBScriptCode 等待并且不执行，直到 ASP.NET 窗口删除文件（因为实际上 ASP.NET 窗口在 VBScriptCode 第二块之后开始执行）。我尝试了接下来的两件事：

1)

```
while oFsoLocal.FileExists(filaAddress)     
wend 
```

2)

```
file_exist=True
while file_exist
    setTimeOut(file_exist=oFsoLocal.FileExists(fileAddress),1000)
wend 
```

但没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:15:07.700

假设这里有服务器端代码，并且如果您可以访问 MSSQL，则此函数假设您已经使用 my_conn 打开了数据库

```
Function waitfor(sleep) ' if you need more than 59 seconds, you will need to adjust the SQL
  sql = "WAITFOR DELAY '00:00:" & right(clng(sleep),2) & "'"
  my_conn.Execute sql,,129
End function 
```

# javascript - 按钮在 IE9 中未正确呈现

> ID：14686921
> 
> 赞同：2
> 
> 时间：2013-02-04T12:34:43.870
> 
> 标签：javascript, jquery, internet-explorer

我正在尝试为每个 jQuery 添加一个按钮。它在其他浏览器中完美运行，IE9 失败。

代码：

```
function AddUnsubscribeButton()
{
    var btn = $('<button/>',
    {
    type: 'button',
    text: 'Unsubscribe',
    id: 'btnUnsubscribe',
    click: function () { AddCurrentUserToSubscriptionList("Unsubscribe");return false; }
    });

    var divBtns = $(".divButtons").parent();
    divBtns.find('#btnSubscribe').remove();
    if(divBtns.first().children().length == 2)
    {   
    divBtns.first().append(btn);
    }
} 
```

在 IE9 页面源代码中显示：

```
< button id="btnUnsubscribe" type="button" jQuery17207435150102662105="16" > 
```

我错过了什么？

同样在页面中它不呈现为按钮，它仅显示按钮文本 - `Unsubscribe`。
但我需要它显示为一个按钮，就像它在其他浏览器中一样。

似乎 IE9 没有呈现结束标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:14:54.533

您实际上是错误地设置了元素的属性。按钮元素没有按钮类型，因此您应该使用具有 a`type=button`或删除类型的输入元素。

```
function AddUnsubscribeButton() {
    var btn = $('<button />', {text: 'Unsubscribe', id: 'btnUnsubscribe'});

    btn.on('click', function() {
        AddCurrentUserToSubscriptionList("Unsubscribe");
        return false;
    });

    var divBtns = $(".divButtons").parent();
    divBtns.find('#btnSubscribe').remove();

    if(divBtns.first().children().length == 2) {   
        divBtns.first().append(btn);
    }
} 
```

似乎直接在元素的属性中添加点击功能会在 IE 中添加一些奇怪的东西，正确的方法是使用点击事件处理程序，如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:35:00.577

adeneo 的解决方案适用于 jsFiddle，但不适用于我的 sharepoint 项目。出于某种原因，IE9 拒绝关闭按钮标签，而其他浏览器则可以正常工作。

这是起作用的：

```
function AddUnsubscribeButton() {

  var button = document.createElement('button');
  button.innerHTML = 'Unsubscribe';
  button.onclick = function(){
    AddCurrentUserToSubscriptionList("Unsubscribe");
    return false;
  };
  var divBtns = $(".divButtons").parent();
  divBtns.find('#btnSubscribe').remove();

  if(divBtns.first().children().length == 2) {   
    divBtns.first().append(button);
  } 
} 
```

希望有一天这会对某人有所帮助。

# dll - 如何将自定义 DLL 添加到 QTP

> ID：14686930
> 
> 赞同：0
> 
> 时间：2013-02-04T12:35:24.627
> 
> 标签：dll, vbscript, qtp, pdfbox

如何将自定义 DLL 添加到 QTP 中，实际上我需要在 DLL 文件中存在的 vbscript (QTP) 中使用某些方法，现在如何在 QTP 中引用该特定 DLL 是可能的

自从我刚接触 QTP 以来，任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:24:02.283

您可以使用`extern.Declare`来声明驻留在 dll 中的外部函数。用于`Extern.{name of function}`使用该功能。

查看光标是否显示为沙漏的示例：

```
extern.Declare micLong,"GetForegroundWindow","user32.dll","GetForegroundWindow" 
extern.Declare micLong,"AttachThreadInput","user32.dll","AttachThreadInput",micLong,
micLong,micLong 
extern.Declare micLong,"GetWindowThreadProcessId","user32.dll",
"GetWindowThreadProcessId",micLong,micLong 
extern.Declare micLong,"GetCurrentThreadId","kernel32.dll","GetCurrentThreadId" 
extern.Declare micLong,"GetCursor","user32.dll","GetCursor" 

function get_cursor() 
    hwnd = extern.GetForegroundWindow() 
    pid = extern.GetWindowThreadProcessId(hWnd, NULL) 
    thread_id=extern.GetCurrentThreadId() 
    extern.AttachThreadInput pid,thread_id,True 
    get_cursor=extern.GetCursor() 
    extern.AttachThreadInput pid,thread_id,False 
end function 

Msgbox get_cursor() 
```

更多使用方法可以随时参考QTP的帮助功能。它实际上非常好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:20:29.537

您可以在 vbscript 中实现相同的功能并将此函数库与您的测试相关联...

# qt - 退出代码 -11 'Segmentation Fault' 执行 pthread_create

> ID：14686935
> 
> 赞同：0
> 
> 时间：2013-02-04T12:35:41.210
> 
> 标签：qt, pthreads, segmentation-fault, argument-passing, ros

我试图通过使用单个参数执行 pthread_create 来创建一个新线程。

```
void P2FPanel::startRecording()
{
  qDebug() << "Start recording...";
  qDebug() << "_bag_list: " << _bag_list->size();
  pthread_create(&_playBags_t, NULL, playBags, _bag_list);
  qDebug() << ".... Started";
} 
```

此方法由按钮触发并创建 pthread。这里代码已经退出并出现错误-11（我认为这是分段错误）。调试行显示 _bag_list 不为空。

```
void* P2FPanel::*playBags(void* arg0)
{
  qDebug() << "Play Bags from _bag_list...";
  QList<BagRef*> *bag_list = (QList<BagRef*>*) arg0;
  qDebug() << "Play " << QString("%1").arg(bag_list->size()) << " Bags";
  //Do stuff
  qDebug() << "Finished playing";
  return 0;
} 
```

此方法应在新线程中运行。

```
class P2FPanel: public rviz::Panel
{

  private Q_SLOTS:
    void startRecording();

  private:
    QList<BagRef*> *_bag_list;
    void* (*playBags)(void* arg0);
    pthread_t _playBags_t;

}; 
```

头文件。

错误来自哪里？线程方法的声明是否正确？

在此先感谢，最好的问候， Josch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:55:31.353

据我记得，您不能将类方法传递给 pthread。考虑：[这个](https://stackoverflow.com/questions/86046/best-way-to-start-a-thread-as-a-member-of-a-c-class)和[那个](http://blog.emptycrate.com/node/270)。您应该使用静态方法。

# sql - 基于使用现有值的 Sql 插入

> ID：14686936
> 
> 赞同：0
> 
> 时间：2013-02-04T12:35:45.723
> 
> 标签：sql, sql-server-2008

表 A（ID（身份），col2，col3，col4）

鉴于 col4 = '(为 A 类中的每个人插入一条新记录，将它们放在 B 类中)'，我想为每个 ID 添加一个新条目。正在插入的新记录在 Col2 中的值必须与正在添加的值相同，并且不能硬编码到各个条目中。例子：

```
1)1,'Michael', 'Lamboux', 'class A'(initial record)
2)2,'Sarah', 'Johanson', 'class A' (initial record)
3)...
4)...
5)...
6)1024,'Michael','Lamboux','class B'(new value)
7)1025, 'Sarah', Johanson', 'class B'(new value) 
```

由于以前从未在 SQL 中做过这件事，我对如何做感到困惑。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:38:25.497

假设您的第一列是一个身份字段：

`insert into tableA (col2, col3, col4) select col2, col3, 'class B' from tableA where col4= 'class A'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:38:32.620

```
INSERT INTO [Table A] (col2, col3, col4)
SELECT col2, col3, 'class B' FROM [Table A]
WHERE col4='class A'; 
```

如果只是为每条记录添加一个新行

**编辑**

从你的评论

```
INSERT INTO tblEWF2  (E_ID,Media_ID, Min_Duration, Norm_Duration, CustDuration, Sec_ID, Task_ID, Schedule_Date, Active)
SELECT E_ID, 4845, Min_Duration, 0, CustDuration, Sec_ID, Task_ID, Schedule_Date, 1
FROM tblEWF2 
```

**从您最后的评论中**编辑 2 ;)****

 **```
INSERT INTO EWF2 (E_ID,Media_ID, Min_Duration, Norm_Duration, CustDuration, Sec_ID, Task_ID, Schedule_Date, Active)
SELECT E_ID,'4845',NULL, '0',NULL,'1','73',NULL,'1' 
FROM EWF2
GROUP BY E_ID 
```**

# java - Maven 在尝试连接到 cdh jar 位置的 cloudera url 时显示错误

> ID：14686939
> 
> 赞同：0
> 
> 时间：2013-02-04T12:35:54.307
> 
> 标签：java, eclipse, maven, hadoop

我想使用我想从 cloudera 站点下载的 hadoop cdh jar 运行字数统计程序。要连接到 cloudera 站点并下载，我使用以下 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>uk.co.arunhorne</groupId>
    <artifactId>hadoop-wordcount</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <properties>
        <jdkLevel>1.6</jdkLevel>
        <requiredMavenVersion>[2.1,)</requiredMavenVersion>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.build.outputEncoding>UTF-8</project.build.outputEncoding>
    </properties>

    <repositories>
        <repository>
            <id>cloudera-releases</id>
            <!-- <url>http://10.118.200.138/cloudera-jars/repodata/</url> -->
            <!--<url>https://repository.cloudera.com/content/repositories/releases/</url> -->
            <url>https://repository.cloudera.com/artifactory/cloudera-repos/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>0.20.2-cdh3u3</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.1</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>${jdkLevel}</source>
                    <target>${jdkLevel}</target>
                    <showDeprecation>true</showDeprecation>
                    <showWarnings>true</showWarnings>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2.1</version>
                <configuration>
                    <descriptors>
                        <descriptor>src/main/assembly/hadoop-job.xml</descriptor>
                    </descriptors>
                    <archive>
                        <manifest>
                            <mainClass>uk.co.arunhorne.mapred.wordcount.WordCount</mainClass>
                        </manifest>
                    </archive>
                </configuration>
                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

但是当我构建它时，我在控制台中收到以下错误：-

```
[WARNING] 
[WARNING] Some problems were encountered while building the effective settings
[WARNING] Unrecognised tag: 'repositories' (position: START_TAG seen ...</offline>\r\n<repositories>... @9:15)  @ D:\installations\apache-maven-3.0.4\conf\settings.xml, line 9, column 15
[WARNING] Unrecognised tag: 'repositories' (position: START_TAG seen ...</offline>\r\n<repositories>... @9:15)  @ C:\Users\Sailaja_Sahoo\.m2\settings.xml, line 9, column 15
[WARNING] 
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building hadoop-wordcount 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: https://repository.cloudera.com/artifactory/cloudera-repos/org/apache/hadoop/hadoop-core/0.20.2-cdh3u3/hadoop-core-0.20.2-cdh3u3.pom
Feb 4, 2013 5:55:04 PM org.apache.maven.wagon.providers.http.httpclient.client.protocol.RequestProxyAuthentication process
SEVERE: Proxy authentication error: Invalid name provided (Mechanism level: Could not load configuration file C:\Windows\krb5.ini (The system cannot find the file specified))
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.152s
[INFO] Finished at: Mon Feb 04 17:55:04 IST 2013
[INFO] Final Memory: 3M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project hadoop-wordcount: Could not resolve dependencies for project uk.co.arunhorne:hadoop-wordcount:jar:1.0-SNAPSHOT: Failed to collect dependencies for [org.apache.hadoop:hadoop-core:jar:0.20.2-cdh3u3 (provided), org.apache.commons:commons-lang3:jar:3.1 (compile)]: Failed to read artifact descriptor for org.apache.hadoop:hadoop-core:jar:0.20.2-cdh3u3: Could not transfer artifact org.apache.hadoop:hadoop-core:pom:0.20.2-cdh3u3 from/to cloudera-releases (https://repository.cloudera.com/artifactory/cloudera-repos/): Not authorized by proxy, ReasonPhrase:Proxy Authentication Required ( The ISA Server requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  ). -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

当我尝试创建本地目录并下载 jar 时，它构建成功。但是在尝试连接到 cloudera url 时出错，因为我只需要使用 cloudera url，而不是任何其他 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:52:38.123

尝试从 Maven Repo 使用它：

```
<dependency>
    <groupId>org.apache.hadoop</groupId>
    <artifactId>hadoop-core</artifactId>
    <version>1.1.1</version>
</dependency> 
```

**更新**

我认为您使用[此页面](http://blog.cloudera.com/blog/2012/08/developing-cdh-applications-with-maven-and-eclipse/)创建您的应用程序。

我创建了类似的项目并运行`mvn package`. Maven 从 cloudera 存储库下载所有必要的库，您可以看到[完整的 Maven 日志](https://gist.github.com/aleksei-bulgak/4722398)

我也给你[链接](http://rghost.net/43594862)到我的项目（也许对你有帮助）

所以看看这一切，我可以假设你的 Maven 配置有问题。

# maven - 尝试将一个 Nexus 存储库连接到另一个 Nexus 存储库时阻止代理

> ID：14686943
> 
> 赞同：0
> 
> 时间：2013-02-04T12:36:07.703
> 
> 标签：maven, repository, nexus

Bacially 我正在尝试将一个 repo nexus 连接到另一个 nexus repo。它与将远程代理连接到 nexus 应该没有太大区别。我只是不明白为什么 nexus 会阻止这个代理？有人认得情况吗？一个nexus repo 不能连接到另一个。也许网址不对？（我正在使用公共网址）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:35:01.550

不，这应该只是工作。与连接到 JBoss maven 存储库相比，该设置没有什么不同（它们也使用 nexus）。我认为即使是 maven central 也是基于 nexus 的。

日志是否告诉您任何信息（或系统在关系中提供的信息）连接被阻止的原因？

通常这是与身份验证相关的，或者服务器无法解析 url（在服务器没有 DNS 解析的 Intranet 中见过几次）

# c++ - Createsamples.exe 在哪里？- OpenCV 窗口

> ID：14686945
> 
> 赞同：4
> 
> 时间：2013-02-04T12:36:13.770
> 
> 标签：c++, opencv

我正在开发 Opencv 中的示例项目。我已经使用 objectmarker 创建了包含 imag 点的文本文件。现在我需要 Createsamples.exe 来创建矢量文件。但是“opencv”文件夹中没有这样的文件。只有 createsample.cpp 文件。请各位大侠帮帮我怎么办。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-07-11T08:03:20.780

您必须在[此处](https://sourceforge.net/projects/opencvlibrary/files/?source=navbar)下载并安装 OpenCV 发行版。
从 cpp 源构建它也给了我错误。

`createsamples.exe`将在以下路径中：`\opencv\build\x64\vc14\bin`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-09T14:50:55.457

我真的不明白为什么在这个问题中添加了赏金，Yuu 的回答非常接近正确，但做了一些修改：

`createsamples.exe`在较新版本的 OpenCV中不调用该可执行文件。通过任何默认下载和安装当前版本的 OpenCV，您将能够导航到安装文件夹，对我来说，正确的文件夹是：

`C:\libraries\opencv\build\install\x86\vc15\bin`

在此文件夹中，您将找到可执行文件的调试和发布版本：

*   'opencv_createsamples.exe - 发布
*   opencv_createsamplesd.exe - 调试

**更新 1.0**

[为了完整起见，我刚刚从这里](https://opencv.org/releases.html)下载并安装了 V3.4.0 的默认版本。我所做的只是下载并安装，你可以在`opencv_createsamples.exe`这里找到：

*   {MyChosenInstallFolder}\opencv\build\x64\vc15\bin
*   {MyChosenInstallFolder}\opencv\build\x64\vc14\bin

它不提供调试可执行文件。

**更新 2.0**

我刚刚完成了最新 V2.X 的相同下载和安装，您可以在此处找到“opencv_createsamples.exe”：

*   {MyChosenInstallFolder}\opencv\build\x64\vc14\bin
*   {MyChosenInstallFolder}\opencv\build\x86\vc14\bin

您可以看到只有 VC14 库是使用 2.X & VC15 & VC14 X64 for V3.X 创建的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T15:17:24.910

Windows 上 OpenCV 4.X 的小细节，该`opencv_createsamples`程序因从 C 移植到 C++ 而被删除。因此，如果您下载此版本，您将找不到它。但是，根据此[https://github.com/opencv/opencv/issues/13231#issuecomment-465621445](https://github.com/opencv/opencv/issues/13231#issuecomment-465621445)，您可以在 4.3 安装中使用 3.4 中的这些特定程序

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-04T14:43:39.347

寻找文件`opencv_createsamples.exe`。默认情况下它应该在

`<opencv-dir>/build/bin`或者

`<opencv-dir>/build/bin/Release`.

# vb.net - 创建数据集时出错

> ID：14686947
> 
> 赞同：0
> 
> 时间：2013-02-04T12:36:22.993
> 
> 标签：vb.net

我在运行时这个函数有错误

```
Private Sub adultPay()
sql = "SELECT adultRate FROM roomType WHERE roomType = " & rumType.ToString & ""
connectDatabase()
Using da As New OleDb.OleDbDataAdapter(sql, con)
Using ds As New DataSet
Try
da.Fill(ds, "AdultRate") 'error here
Dim adultRate As String = ds.Tables("AdultRate").Rows(0).Item(0).ToString
Dim adultTotal As Integer = txtNoOfAdults.Text * Val(adultRate)
txtAdultTotal.Text = adultTotal.ToString
Catch ex As Exception
MessageBox.Show(ex.ToString, "error")
Clipboard.SetDataObject(ex)
End Try
DisconnectDB()
End Using
End Using
End Sub 
```

该函数应该在放置成人数量后更改成人总数文本框的值。错误如下

```
System.Data.OleDb.OleDbException: No value given for one or more required parameters.
at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, String srcTable)
at Albergo.frmCheckIn.adultPay() in C:\Users\gman\Documents\Visual Studio 2008\Projects\Albergo\Albergo\frmCheckIn.vb:line 111 
```

第 111 行是您找到的子程序中的 da.Fill(ds, "AdultRate")

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:12:08.840

您将表的名称作为 WHERE 条件传递

它应该是：

```
"SELECT adultRate FROM roomType WHERE roomType_columnName = " & rumType.ToString & "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:19:41.140

我实际上发现了问题所在。房间类型需要作为一个字符串，例如

```
sql = "SELECT adultRate FROM roomType WHERE roomType = '" & rumType.ToString & "'" 
```

并不是

```
sql = "SELECT adultRate FROM roomType WHERE roomType = " & rumType.ToString & "" 
```

谢谢大家的帮助

# html - 从顶部或中心垂直移动图像

> ID：14686951
> 
> 赞同：1
> 
> 时间：2013-02-04T12:36:30.013
> 
> 标签：html, css, image

我有一个简单的正在建设中的页面，并且想将正在建设中的图像对齐到屏幕的中间。水平方向没问题，但垂直方向我什至无法定位图像。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>Page Under Construction</title>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<style type="text/css">
body {
background-color:#d7df29;
width: 100%;
height:  100%;

}
.img {

text-align: center;
margin: 0 auto
vertical-align: middle;
top:500;    

    }

#html5 {
position:absolute;
top:0;
right:0;
}

</style>
</head>
<body>
<div class="img"><img src="1.jpg" alt="Under Construction"></div>
<div id="html5"><img src="images/img_html5_FR.png" height="120" width="120" alt="" />    </div>
<img src="images/fb2.png" style="position: fixed; top: 350px; left: 0px;"     title="Bierzyk na Facebook'u" alt="Bierzyk na Facebook'u">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:43:26.417

如果您使您`.img`的高度为 100%，则可以将图像设置`background-image`为该 div （或`body`）的 a ，然后以这种方式垂直对齐。这应该可以工作，因为页面上的其他元素是绝对定位且固定的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:47:38.170

添加这个

```
.img {
    position:absolute;
    top:50%;  
    left:50% ;
     background:red;
    margin:-64px 0 0 -64px;
    } 
```

**[演示](http://jsbin.com/ixufos/1/edit)**

# mysql - 使用复合主键和简单索引在性能上有什么区别？

> ID：14686954
> 
> 赞同：0
> 
> 时间：2013-02-04T12:36:56.783
> 
> 标签：mysql, indexing, innodb, composite-primary-key

我正在使用 innodb mysql 表来存储数据。在我的项目中，我必须将 maxmind geoip 数据库存储在 mysql 中（以具有不同实体的本地外键）。

大多数教程如何在 mysql 中导入 maxmind geoip 数据库，建议遵循具有 ip 范围的表的表定义：

```
CREATE TABLE IF NOT EXISTS `GeoLiteCity_Blocks` (
  `startIpNum` int(10) unsigned NOT NULL,
  `endIpNum` int(10) unsigned NOT NULL,
  `locId` int(10) unsigned NOT NULL,
  PRIMARY KEY (`startIpNum`,`endIpNum`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

但是我使用的是 ORM，它需要一个主键（它自动为 CRUD 实体实现了许多方法），所以我想使用不同的表结构：

```
CREATE TABLE `ipblocks` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `startIpNum` int(10) unsigned NOT NULL,
  `endIpNum` int(10) unsigned NOT NULL,
  `locId` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IP_RANGE` (`startIpNum`,`endIpNum`),
  KEY (`locId`) // FOREIGN KEY
) ENGINE=InnoDB; 
```

对该表最常见的查询是：

```
SELECT locId FROM ipblocks
WHERE %IP_ADDRESS% BETWEEN startIpNum AND endIpNum
LIMIT 1 
```

理论上，这允许本地用作 ORM，就像使用表数据一样。我想问 - 这会严重降低性能（我不关心硬盘空间，性能对我来说更重要）？

带有 ip 块的表大约有 200 万行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:32:21.070

性能不会有明显下降。唯一真正起作用的是表中的数据是否会发生变化，但看起来数据基本上是静态的。使用的索引基本相同，但 InnoDB 使用聚集索引，所以它基本上需要做 2 次索引查找而不是 1 次，但花费的时间并不明显。

# sql - 如何制作 PrimaryRowId 和匹配 RowId 的列表

> ID：14686955
> 
> 赞同：1
> 
> 时间：2013-02-04T12:36:56.737
> 
> 标签：sql, excel, vba

在我之前的问题（[基于一系列列车编号选择不同的 RowId](https://stackoverflow.com/questions/14629325/select-a-distinct-rowid-based-on-series-of-trainnumbers)）中，我得到了一个不错的 RowId 列表。

现在我想让这个列表完整并且非常棒！:)

我的原始数据（Excel 2010）如下所示：

```
Time    Wagons     Delete     DayType    Plate    trainnumber   RowId
05.28    1                       1      0901-046     2          38676
08.20    2                       1      0901-003     2          18676
05.25    2            x          1      0901-046     2          28676
15.28    2                       1      0901-046     2          3676
23.20    3                       1      0601-001     2          3867
05.08    3                       1      0901-046     2          3876
00.28    L            x          1      0901-046     2          8676
00.00                            1      0901-046     2          367 
```

我需要一个列表，将 Primary RowIds（上一个问题的列表）与符合以下条件的 RowIds 分组：

*   在主要行和匹配行上，以下内容必须相同：
    *   车次
    *   日型
    *   时间
*   在主要行和匹配行上，板必须不同
*   Wagons 必须 MORE THAN 1 （该列包含带有数字、字母和任何内容的行）
*   删除必须为空

找到匹配项后，我需要匹配项的 RowId。

理想情况下是这样的数据集：

```
PrimaryRowId    Match#1    Match#2    Match#3    Match#4
15674            5465        456       5456        45656
5564             231         132       1321        7862 
```

每个 Primary RowId 可能有更多匹配项，但没关系。

我的 SQL 技能有些有限，所以这就是我问你们的原因。:)

我*认为*它可能是这样的：

```
SELECT RowId
FROM Conversion
WHERE trainnumber=trainnumber and daytype=daytype and 
      time=time and plate<>plate and Wagons>1 and delete="" 
GROUP BY RowId 
```

但它一次只会给我一 (1) 个 RowId。：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:50:03.547

克里斯，

要使用 SQL 来匹配这样的项目，您需要告诉 SQL 在一对表（实际上是同一个表的两个副本）中查找匹配项。这称为自联接。

```
SELECT A.Time,
       A.TrainNumber,
       A.DayType,
       MIN(A.Rowid) AS Master
FROM CONVERSION AS A
INNER JOIN CONVERSION AS B ON A.TrainNumber=B.TrainNumber
AND A.DayType=B.DayType
AND A.Time=B.Time
WHERE A.Wagons>"1"
  AND B.Wagons>"1"
  AND A.Plate<>B.Plate
  AND A.Delete IS NULL
  AND B.Delete IS NULL
GROUP BY A.Time,
         A.TrainNumber,
         A.DayType; 
```

Conversion 的两个副本被赋予别名 A 和 B。

在 INNER JOIN 行上，我们指定必须匹配的字段。

在 WHERE 行上，我们指定必须不同的字段，以及其他条件（必须为 A 和 B 指定）。

第一列给出每个匹配列车的最低行 ID，第二列给出其他匹配行 ID。

现在我们有一个主行列表，我们可以再次将其加入 Conversion 以生成一个从行列表：

```
SELECT D.Master,
       C.Rowid
FROM CONVERSION AS C
INNER JOIN
  (SELECT A.Time,
          A.TrainNumber,
          A.DayType,
          MIN(A.Rowid) AS Master
   FROM CONVERSION AS A
   INNER JOIN CONVERSION AS B ON A.TrainNumber=B.TrainNumber
   AND A.DayType=B.DayType
   AND A.Time=B.Time
   WHERE A.Wagons>"1"
     AND B.Wagons>"1"
     AND A.Plate<>B.Plate
     AND A.Delete IS NULL
     AND B.Delete IS NULL
   GROUP BY A.Time,
            A.TrainNumber,
            A.DayType) AS D ON C.TrainNumber=D.TrainNumber
AND C.DayType=D.DayType
AND C.Time=D.Time
WHERE C.Delete IS NULL
  AND D.Master<C.Rowid
ORDER BY D.Master,
         C.Rowid; 
```

[我已经用SQL Fiddle](http://sqlfiddle.com/#!2/db82f/16)上的一些额外测试数据对此进行了测试

# linux - 使用 grep 列出 cwd 中的所有可执行文件

> ID：14686956
> 
> 赞同：1
> 
> 时间：2013-02-04T12:37:00.030
> 
> 标签：linux, bash, shell, unix, sh

我想使用 grep 列出 cwd 中的所有可执行文件，我使用了以下内容：

```
ls -F -a | grep "[*]$" 
```

它有效，但为什么以下命令不起作用？它应该是等效的：

```
ls -F -a | grep -E "[*]\>" 
```

奇怪的是，如果我使用标准字符作为结束字母（如 grep -E "[a]>"），它就可以正常工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:40:27.223

您可以使用 find 实用程序，这比解析 ls 的输出更强大。

例如，列出当前目录中为用户设置了执行位的文件。

```
find . -maxdepth 1  -type f -perm -u=x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:57:45.430

```
ls -F | grep -E "[*]\>" 
```

这不会达到您的预期，因为`*`它不是“单词”字符，并且在没有意义之后立即寻找词尾边界。

```
ls -F -a | grep "[*]$" 
```

`*`将产生所有以指定结尾的行。这是有道理的。

您应该注意[@Adam 的建议](https://stackoverflow.com/a/14687017/78845)：您不应该解析`ls`.

# delphi - Delphi：更改 TJvDockTabHostForm 的选项卡图标

> ID：14686961
> 
> 赞同：0
> 
> 时间：2013-02-04T12:37:11.577
> 
> 标签：delphi, jedi, jvcl

有没有办法在 TJvDockVSPopupPanel 设置后更改它的选项卡图标？

问题是我想在我的程序通过...更改后将选项卡图标更改为验证图像

```
ImageList1: TImageList;

procedure TValidationWindow.UpdateIcon;
var
    i, topValidationError  : integer;
begin
    topValidationError := 3;

    {
        SECTION
        //Set topValidationError value to the specific error that has occurred
        SECTION END
    }

    // Set the Icon to the specific image.
    ImageList1.GetIcon(topValidationError, Self.Icon);
end; 
```

以上仅适用于第一次！有任何想法吗？

编辑：

经过进一步检查，我发现 TJvDockCustomTabControl 中有一个 FImages:TCustomImageList，但是我还没有找到访问 FImages 的方法，我假设必须有某种方法可以将我的图标添加到此列表中，然后只需更改使用 imageindex 的选项卡图标图像。

解决了：

所以最大的问题是访问图像列表，这可以通过允许访问 TJVDockTabControl 的 TJvDockVIDTabPageControl 来完成。

更改选项卡图标的代码是...

```
if (GetAncestors(Self, 3) is TJvDockTabHostForm) then
    if ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl is TJvDockVIDTabPageControl) then
    begin
        if FTabSheetIndex = - 1 then
            FTabSheetIndex := ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).PageSheets.IndexOf(TJvDockTabSheet(Self.Parent));
        ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Pages[FTabSheetIndex].ImageIndex := x// The icon you want to use
        ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Panel.Refresh;
    end; 
```

我已经包含了 FTabSheetIndex，因为对 DockHostWindow 的更改可能会导致选项卡发生更改，例如，在您更改的选项卡之前删除一个选项卡会导致选项卡索引顺序发生更改，因此可以轻松地将其设置为 -1 并再次找到。

可以在此处找到有关 GetAncestors() 的信息[如何判断 TJvDockServer 表单是取消固定还是固定？](https://stackoverflow.com/questions/14193967/how-can-you-tell-if-a-tjvdockserver-form-is-unpinned-or-pinned)

您还必须将您的图标添加到 TJvDockTabPageControl，最好在 FormShow 事件中完成...

```
if (GetAncestors(Self, 3) is TJvDockTabHostForm) then
    if ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl is TJvDockVIDTabPageControl) then
    begin
        FTabImageListCount := ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Images.Count;
        for i := 0 to ImageList1.Count - 1 do
        begin
            ImageList1.GetIcon(i,Icon);
            ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Images.AddIcon(icon);
        end;
    end; 
```

但是，如果表单没有在您的应用程序开始时显示，则图标更改功能可能无法正常工作，直到您专门单击选项卡以显示它。因此，最好在将表单添加到 TJvDockHostForm 后立即添加图标...这仍然是我正在研究的内容，但关键问题已得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:16:48.150

所以最大的问题是访问图像列表，这可以通过允许访问 TJVDockTabControl 的 TJvDockVIDTabPageControl 来完成。

更改选项卡图标的代码是...

```
if (GetAncestors(Self, 3) is TJvDockTabHostForm) then
    if ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl is TJvDockVIDTabPageControl) then
    begin
        if FTabSheetIndex = - 1 then
            FTabSheetIndex := ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).PageSheets.IndexOf(TJvDockTabSheet(Self.Parent));
        ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Pages[FTabSheetIndex].ImageIndex := x// The icon you want to use
        ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Panel.Refresh;
    end; 
```

我已经包含了 FTabSheetIndex，因为对 DockHostWindow 的更改可能会导致选项卡发生更改，例如，在您更改的选项卡之前删除一个选项卡会导致选项卡索引顺序发生更改，因此可以轻松地将其设置为 -1 并再次找到。

可以在此处找到有关 GetAncestors() 的信息[如何判断 TJvDockServer 表单是取消固定还是固定？](https://stackoverflow.com/questions/14193967/how-can-you-tell-if-a-tjvdockserver-form-is-unpinned-or-pinned)

您还必须将您的图标添加到 TJvDockTabPageControl，最好在 FormShow 事件中完成...

```
if (GetAncestors(Self, 3) is TJvDockTabHostForm) then
    if ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl is TJvDockVIDTabPageControl) then
    begin
        FTabImageListCount := ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Images.Count;
        for i := 0 to ImageList1.Count - 1 do
        begin
            ImageList1.GetIcon(i,Icon);
            ((GetAncestors(Self, 3) as TjvDockTabHostForm).PageControl as TJvDockVIDTabPageControl).Images.AddIcon(icon);
        end;
    end; 
```

但是，如果表单没有在您的应用程序开始时显示，则图标更改功能可能无法正常工作，直到您专门单击选项卡以显示它。因此，最好在将表单添加到 TJvDockHostForm 后立即添加图标...这仍然是我正在研究的内容，但关键问题已得到解决。

# javascript - 可变高度的推拉门按钮

> ID：14686966
> 
> 赞同：0
> 
> 时间：2013-02-04T12:37:27.073
> 
> 标签：javascript, html, css

我需要[将此图像](https://i.stack.imgur.com/lswk4.png)用作按钮的背景：

![背景图片](../Images/4ac7cf4e6fd1730adb7ed35c703c6bab.png)

[按钮应该具有动态宽度，如果我使用滑动门](http://css-tricks.com/examples/Sprites+SlidingDoors-Button/)技术，这不是问题。但是如果你仔细观察图像：顶部和底部边缘有点弯曲，所以它不起作用。

我试图拉伸图像，但边缘变得模糊。

有人知道这个问题的解决方案吗？
任何想法表示赞赏！

*编辑：*
一些页面已经有几个固定宽度/高度的按钮，每个按钮都是“个人”背景：所以它们看起来很清晰。如果我在“我的”按钮上使用图像拉伸技术，那么它们之间就会有对比，因为这个看起来不会那么锐利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:57:38.400

是的，你可以用 CSS 来做，如果你愿意的话，你可以保留图像：

```
button{
  height:50px;
  background-image:url("http://i.stack.imgur.com/lswk4.png");
  background-size: 100% 100%;
  border: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:18:39.793

尝试这个：

```
div{
  height:50px;
}
div img {
    position: relative;
    width: 100%;
    height: auto;
}

<div><img src="http://i.stack.imgur.com/lswk4.png" /></div> 
```

示例：http: [//jsfiddle.net/Q8f9t/4/](http://jsfiddle.net/Q8f9t/4/)

# php - 梨邮包的使用方法

> ID：14686967
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:37:32.257
> 
> 标签：php, pear

我是 php 新手。

我想通过我的脚本发送一些电子邮件。

我想发送 html 电子邮件可能很大，可能有大块的 html，也可能很小。但是我知道这个`mail()`功能，但我听说像梨包这样的东西很适合发送电子邮件。

我访问了 pear.php.net 但无法理解。我不知道这是什么。有人可以通过一些示例帮助如何使用这些软件包。请指导回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:43:00.063

您可能会发现[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)会满足您的需求。这是一个 PHP 电子邮件类，可以轻松发送带有 HTML 和附件的电子邮件

这是他们网站上关于如何使用 PHP Mailer 的示例：

```
<?php

require("class.phpmailer.php");

$mail = new PHPMailer();

$mail->IsSMTP();  // telling the class to use SMTP
$mail->Host     = "smtp.example.com"; // SMTP server

$mail->From     = "from@example.com";
$mail->AddAddress("myfriend@example.net");

$mail->Subject  = "First PHPMailer Message";
$mail->Body     = "Hi! \n\n This is my first e-mail sent through PHPMailer.<strong>You Can Use HTML!</strong>"; // You can put HTML tags in this string
$mail->WordWrap = 50;
$mail->IsHTML(true); // This allows you to use HTML in the body

if(!$mail->Send()) {
  echo 'Message was not sent.';
  echo 'Mailer error: ' . $mail->ErrorInfo;
} else {
  echo 'Message has been sent.';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:46:14.050

```
 mixed send ( mixed $recipients , array $headers , string $body )

    <?php
include('Mail.php');

$recipients = 'joe@example.com';

$headers['From']    = 'richard@example.com';
$headers['To']      = 'joe@example.com';
$headers['Subject'] = 'Test message';

$body = 'Test message';

$params['sendmail_path'] = '/usr/lib/sendmail';

// Create the mail object using the Mail::factory method
$mail_object =& Mail::factory('sendmail', $params);

$mail_object->send($recipients, $headers, $body);
?> 
```

这是他们给出的代码示例，足以解释，您可以将 $body 设置为批量 html 或要作为内容发送的消息

# winforms - 带有 Windows 窗体 WebBrowser 控件的 IEWebGL

> ID：14686969
> 
> 赞同：1
> 
> 时间：2013-02-04T12:37:35.607
> 
> 标签：winforms, .net-4.0, webbrowser-control, webgl

我有一个使用three.js 创建的网站，并且我已经在我的机器上安装了IEWebGL，并且在Firefox、Chrome 和IE9 中一切正常。但是，由于我们的要求以及与现有 Windows 窗体软件集成的需要，我们现在正尝试在 WebBrowser 控件中查看该网站。这会导致问题，因为尽管插件安装在机器版本的 IE 上，但它似乎不适用于 WebBrowser 并引发脚本错误：

```
Error: cannot create WebGL context. 
```

如果我没记错的话，这只是 IE9 在尝试使用没有插件的 WebGL 时抛出的标准错误。

所以我的问题是，有没有办法在 WebBrowser 控件中包含 IEWebGL 插件的使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:22:18.903

好吧，如果你强制网站使用 IE9 模式呈现

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

它运行良好，因为我相信它本机以怪癖模式呈现。

# javascript - Javascript最小化和最大化

> ID：14686970
> 
> 赞同：0
> 
> 时间：2013-02-04T12:37:37.390
> 
> 标签：javascript

我想将 div onclick 缩放到 25%，然后将 onclick 缩放到 50%。为什么不缩减到 50%？

```
var minimize = document.getElementById('minimize');
var container = document.getElementById('container');

minimize.onclick = function(){

    if(container.style.width = "50%") {
        container.style.width = "25%";
        container.style.height = "25%";
    }else{
        container.style.width = "50%";
        container.style.height = "50%";
    }

    console.log(container.style.width);
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:39:02.580

if 语句中有一个赋值而不是比较：

```
if (container.style.width = "50%") { 
```

应该：

```
if (container.style.width == "50%") { 
```

分配将返回分配的值 - “50%”。该值是真实的，因此 if 语句中的代码将被执行。

# java - JTextfield 应该触发所有键盘输入

> ID：14686972
> 
> 赞同：0
> 
> 时间：2013-02-04T12:37:44.157
> 
> 标签：java, swing, keyboard, jtextfield, keylistener

我想在 JTextField 中触发所有键盘输入（还有 strg、alt 和 tab）。

```
super.addKeyListener(new KeyListener() {

    @Override
    public void keyTyped(KeyEvent arg0) {
        System.out.println(arg0.getKeyChar());
    }

    @Override
    public void keyReleased(KeyEvent arg0) {

    }

    @Override
    public void keyPressed(KeyEvent arg0) {

    }
}); 
```

KeyListener 不会触发键盘输入，如 strg、alt 或 / 和 tab。

这种情况有解决方案吗？

我需要这个设置屏幕，用户可以在其中更改键，必须按下该键才能执行向前移动等操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:53:07.327

这对我有用，我必须禁用遍历才能抓住`Tab`钥匙。另请注意，对于,或之`keyTyped()`类的键永远不会调用该事件。但是您可以在使用or事件时捕获它们：`Alt``Shift``Control``keyPressed()``keyReleased()`

```
public class Scribble extends JFrame implements KeyListener {

    public Scribble(){
        this.setLayout(new BorderLayout());
        JTextField field = new JTextField();
        field.addKeyListener(this);
        /*
         * Disable tab, so we can catch it
         */
        field.setFocusTraversalKeysEnabled(false);
        this.add(field, BorderLayout.CENTER);
        this.pack();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setLocationRelativeTo(null);
        this.setVisible(true);
    }

    public void keyTyped(KeyEvent e) {
        System.out.println("Key typed: " + e.getKeyCode());
    }

    public void keyPressed(KeyEvent e) {
        System.out.println("Key pressed: " + e.getKeyCode());
    }

    public void keyReleased(KeyEvent e) {
        System.out.println("Key released: " + e.getKeyCode());
    }

    public static void main(String[] args) {
        new Scribble();
    }
} 
```

# deployment - Maven-glassfish-plugin：如何指定部署目标？

> ID：14686973
> 
> 赞同：1
> 
> 时间：2013-02-04T12:37:53.713
> 
> 标签：deployment, maven-3, glassfish-2.x, maven-glassfish-plugin

我将 Maven 3.0.4 与 maven-glassfish-plugin 2.1 ( [http://maven-glassfish-plugin.java.net/](http://maven-glassfish-plugin.java.net/) ) 和 Glassfish 2.1.1 一起使用。

相关 POM.XML 片段：

```
<profile>
        <id>deploy</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.glassfish.maven.plugin</groupId>
                    <artifactId>maven-glassfish-plugin</artifactId>
                    <version>2.1</version>
                    <configuration>
                        <glassfishDirectory>/home/user/glassfish</glassfishDirectory>
                        <domain>
                            <name>domain1</name>
                            <host>hostname</host>
                            <adminPort>4848</adminPort>
                        </domain>
                        <autoCreate>false</autoCreate>
                        <terse>true</terse>
                        <debug>false</debug>
                        <echo>true</echo>
                        <user>admin</user>
                        <passwordFile>/home/user/user.gfpass</passwordFile>
                        <components>
                            <component>
                                <name>${project.artifactId}</name>
                                <artifact>${project.build.directory}/${project.build.finalName}.war</artifact>
                            </component>
                        </components>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile> 
```

问题是，我部署到的 Glassfish 服务器为每个开发人员配置了一个独立实例，并且运行`mvn glassfish:deploy`原因：

```
[INFO] --- maven-glassfish-plugin:2.1:deploy (default-cli) @ project ---
[INFO] deploy --port 4848 --enabled=true --host hostanme --precompilejsp=false --verify=false --echo=true --upload=true --terse=true --generatermistubs=false --passwordfile /home/user/user.gfpass --interactive=false --availabilityenabled=false --name project --target server --force=true --user admin /home/user/git/project/target/project-1.0.0-SNAPSHOT.war
[ERROR] CLI171 Command deploy failed : Application project is already deployed on other targets. Please remove all references or specify all targets (if not using asadmin command line) before attempting redeploy operation
[ERROR] Deployment of /home/user/git/project/target/project-1.0.0-SNAPSHOT.war failed. 
```

注意`--target server`执行的命令。

如何在 POM 中指定`target`要部署到的实例（即）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:36:06.807

经过更多研究，答案是**否定的，我不能**。

我知道有两种选择：

1.  使用所需参数`exec-maven-plugin`调用`asadmin`，或
2.  Fork 你自己的版本，`maven-glassfish-plugin`需要更改（这就是我现在所做的）。

事实证明，该插件非常简单，我可以根据自己的需要对其进行修改。建造它更麻烦，但那是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T18:38:05.360

您好，我的解决方案是这样的：

我离开了 pom 作为重新部署执行

```
 <execution>
                <id>gf-deploy</id>
                <phase>package</phase>
                <goals>
                    <goal>redeploy</goal>
                </goals>
            </execution> 
```

然后我修改了 asadmin.bat 文件，在脚本调用 appserver-cli.jar 文件的行之后，我添加了 3 个新行，请注意 redeploy 调用了一个 undeploy 和一个 deploy 命令，所以这里的 maven glassfish 插件的技巧是当 undeploy 命令运行时打印一些东西（Tihs 会混淆 maven 插件，就好像 undeploy 命令总是成功一样），但是，当 asadmin 命令部署时，流程将正常运行。

```
:run
if NOT %1 == undeploy goto :end
%JAVA% -jar "%~dp0..\lib\client\appserver-cli.jar" %*
ECHO "TEST"
:end

if %1 == undeploy goto :end1
%JAVA% -jar "%~dp0..\lib\client\appserver-cli.jar" %*
:end1 
```

完成此修改后，relay 总是工作得很好！

# regex - 使用正则表达式检查字符串中的第三个字符

> ID：14686976
> 
> 赞同：0
> 
> 时间：2013-02-04T12:38:01.383
> 
> 标签：regex, cocoa, ios5, nspredicate

我必须检查字符串中的第三个字符。我正在尝试使用 NSPredicate 来做到这一点。我认为正则表达式应该是 ..3* 所以它会找到每个字符串都带有第三个字符 3。但它不起作用，我确实尝试了其他一些方法但没有成功:(。有人可以帮助我吗？

检查的简单代码

```
- (IBAction)btnCheckPerformClick:(id)sender {
_chkOk.state = NO;
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF like[c] %@", _txtRegExpression.stringValue];
NSLog(@"%@", predicate);
if([predicate evaluateWithObject:_txtCheckingText.stringValue])
    _chkOk.state = YES;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:40:50.937

你又少了一个 dot-use `..3.*`。您可能还想使用 . 将其锚定到字符串的开头和结尾`^..3.*$`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:41:05.863

`..3*`表示任何两个字符后跟一个可选的 3，在您输入的任何位置。You want `^..3`，这意味着任何两个字符后跟 3，从行首开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:41:07.170

```
..3* 
```

该正则表达式不能满足您的要求。

它说，任意两个字符，然后是任意数量的 3（包括没有 3）

这个怎么样？

```
^..3.*$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T12:46:07.523

谓词格式语言中的`LIKE`运算符只理解简单的通配符（`?`和`*`）。如果要`MATCHES`使用正则表达式，则需要使用。

有关更多详细信息，请参阅[谓词编程指南（字符串比较）](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-SW1)。

或者，使用`NSRegularExpression`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:38:16.800

您可能还考虑使用`NSString`方法`subStringWithRange:`代替？如果您对正则表达式不满意，请不要急于使用它。使用有效的东西。Cocoa 的正则表达式实现并不是最容易上手的。抓住你的字符串，然后将它与任何东西进行比较。您可以遍历字符串以轻松获取每个第三个字符。

```
NSString *aString = @"abc";
NSString *thirdCharacterOnly;
if (aString.length >= 3) {

    for (NSUInteger i = 2; i < aString.length; i += 3) {
        thirdCharacterOnly = [aString substringWithRange:NSMakeRange(2, 1)];
        if ([thirdCharacterOnly isEqualToString:@"3"]) {
                // Do something.
        }
    }

} else {
        // do something different.
} 
```

如果您想了解更多关于正则表达式的信息，请[阅读本书](https://rads.stackoverflow.com/amzn/click/com/B007I8S1X0)。3章让你快速上手。首先使用 Ruby、Python 或 Perl 学习正则表达式。它会拯救你的大脑。

# php - 获取xml中子节点的名称

> ID：14686983
> 
> 赞同：0
> 
> 时间：2013-02-04T12:38:38.360
> 
> 标签：php, xml, cakephp, dom

您好我正在使用 DOM 从 xml 文件中检索数据。下面的代码对于 xml 文件工作得很好，但我面临的主要问题是它只识别根节点，它不识别子节点。这是我的代码：-

```
 $dom = new DOMDocument();
    $dom->load($url);
    $link = $dom->getElementsByTagName($tag_name);
    $value = array();
for ($i = 0; $i < $link->length; $i++) {
            $childnode['name']=$link->item($i)->nodeName;
            $childnode['value']=$link->item($i)->nodeValue;
            $value[ $childnode['name']] = $childnode['value'];
        // echo $link->item($i)->nodeValue . '<br>';
       $k++;
    } 
```

这是我显示数据的视图文件

```
foreach($value as $node=>$value)
{
echo "<b> Node :</b>".$node."<br /><b>Value:</b>".$value."<br /><hr>";
} 
```

这是我的 xml 文件

```
<name>John</name>
<place>Australia</place>
<contact> 
<phone>8734563485</phone> 
<type>Mobile</type> 
</contact>
<mail>somedata</mail> 
```

我能够读取父节点，即姓名、地点、联系人、邮件。但我无法读取子节点，即电话、类型。任何人都可以帮助我的代码....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:51:12.743

因为您当然没有遍历子节点。我会创建一个函数并递归遍历它。

```
 function addNodesToValue($value,$nodelist) {
   for ($i = 0; $i < $nodelist->length; $i++) {
     $childnode['name']=$nodelist->item($i)->nodeName;
     $childnode['value']=$nodelist->item($i)->nodeValue;
     $value[ $childnode['name']] = $childnode['value'];
     // recursive traverse child nodes
     if($nodelist->item($i)->hasChildNodes()){
       $value = addNodesToValue($value,$nodelist->item($i)->childNodes);
     }
    }
    return $value;
 } 

//usage
$value = addNodesToValue($value,$link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:26:26.283

那这个呢？

```
function get_names($node) {
    $names = array();
    foreach ($node->childNodes as $child) {
        if ($child->nodeType == 1) {
            $names[] = $child->nodeName;
            if ($child->hasChildNodes()) {
                $names[] = get_names($child);
            }
        }
    }
    return array_filter($names);
}

$xml = '
<root>
    <name>John</name>
    <place>Australia</place>
    <contact> 
        <phone>8734563485</phone> 
        <type>Mobile</type> 
    </contact>
    <mail>somedata</mail>
</root>';
$names = get_names( DOMDocument::loadXML($xml)->firstChild );
print_r($names); 
```

输出;

```
大批
(
    [0] => 名称
    [2] => 地点
    [4] => 联系
    [5] => 数组
        (
            [0] => 电话
            [2] => 类型
        )

    [6] => 邮件
)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T03:17:41.047

解决了：

请注意，我的 XML 包含一个任意的“项目”节点，因此值得用您的 XML 进行测试。这是我的：

```
<news>
 <item>
  <date>9/2/2014</date>
  <title>Home Depot Breach</title>
  <content>NEW YORK (AP) - My store may be the latest retailer</content>
 </item>
 <item>
  <date>8/28/2014</date>
  <title>Dairy Queen</title>
  <content>Dairy Queen has the best ice cream</content>
 </item>
</news> 
```

我有一个页面列出了表格中的项目。当您单击其中一项时，它会将该项的 ID# 发送到 PHP 脚本中……这是我处理单击的“项”的方式：

```
$xml = DOMDocument::load('news.xml');
$id  = $_GET['i'];

$date    = $xml->getElementsByTagName('date')->item($id)->nodeValue;
$title   = $xml->getElementsByTagName('title')->item($id)->nodeValue;
$content = $xml->getElementsByTagName('content')->item($id)->nodeValue; 
```

# c# - 如何获取目标代码的实例是从

> ID：14686984
> 
> 赞同：-2
> 
> 时间：2013-02-04T12:38:38.637
> 
> 标签：c#, .net

> **可能重复：**
> [在 C# 中获取方法的调用者](https://stackoverflow.com/questions/1393758/getting-the-caller-of-a-method-in-c-sharp)

是否可以获取执行方法的对象的实例？

例如...

```
public class Person
{
    public string Name { get; set; }

    public void PrintMyName()
    {
        NamePrinter np = new NamePrinter();
        np.PrintName();
    }
}

public class NamePrinter
{
    public void PrintName()
    {
        Person p = ?;
        Console.Writeline(p.Name);
    }
}

public class Program
{
    static void Main()
    {
        Person person = new Person() { Name = "Brandon"; }
        person.PrintMyName();
    }
} 
```

有没有办法在 PrintName 方法中找到“p”？

编辑：上面这段代码中的问题可以很容易地解决很多不同的方法。请假设我并不愚蠢，这只是我能想出的最简单的代码，可以让我的问题变得清晰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:45:10.700

您不能这样做，因为：

*   没有办法知道它可能是从哪个对象类型调用的。仅仅因为您从名为 Person 的类的实例调用它并不意味着这是唯一可以调用它的方法。
*   它可能根本不会从对象实例中调用。它可以从静态方法中调用。

当调用类中的方法时，调用代码的任何内容都不会被压入堆栈（除了方法的参数），因此您根本无法获取以这种方式使用的信息。

我认为，在您的情况下，正确的解决方案是将 Person 类型的参数添加到 PrintName() （我想您已经考虑过？）

# javascript - 关于制作带有垂直溢出图像的响应式 jquery 轮播的建议

> ID：14686985
> 
> 赞同：1
> 
> 时间：2013-02-04T12:38:41.237
> 
> 标签：javascript, jquery, carousel

我正在从下面显示的 html 结构制作轮播。实际上有大约40张图片。

```
<div id="carousel">
    <div class="pris"><img src=""/></div>
    <div class="pris"><img src=""/></div>
    <div class="pris"><img src=""/></div>
    <div class="pris"><img src=""/></div>
    <div class="pris"><img src=""/></div>
    <div class="pris"><img src=""/></div>
</div> 
```

*   容器“旋转木马”垂直溢出而不是水平溢出。这是因为 .pris 向左浮动。我不认为这是我可以轻易改变的，因为它会破坏响应式设计并导致我需要支持的早期版本的 IE 做噩梦。

*   我可以计算出在父容器中可以显示多少个轮播图。最大值为 4，最小值为 1。

*   我需要以这种[方式](http://www.gmarwaha.com/jquery/jcarousellite/#demo)循环浏览图像，即一张一张。左右的图像适当地移入和移出容器。

我该怎么做呢，因为第一个类总是在容器的左上角，所以当它被隐藏/显示时，它总是出现在那个区域，而不是像较低级别的 div 那样水平穿过容器。

简而言之，当图像不是长的、1 图像高的水平线中的容器时，如何制作轮播？

编辑 - 我不知道为什么人们要求结束这个问题。很清楚：是否可以从垂直堆叠而不是水平堆叠的图像 div 中制作轮播，就像轮播通常那样。

编辑（一些测试代码）在循环时可以正常工作，但在回到开始时就不行。

右箭头：

```
$('#arrow_right a').click(function(e) {
var current = $('#pris').find('div.current');
var next = (current.next('.pris').length) ? current.next('.pris') :  $("div.pris:first");
current.removeClass('current');
current.hide();
next.addClass('current');
next.show();
show_next(getVisible());
e.preventDefault();
});

function show_next(no_visible)
{
current = $('#carousel').find('div.current');
 next_one = (current.next('.pris').length) ? current.next('.pris') : $("div.pris:first");
 next_two = (next_one.next('.pris').length) ? next_one.next('.pris') : $("div.pris:first");
 next_three = (next_two.next('.pris').length) ? next_two.next('.pris') : $("div.pris:first");

  switch(no_visible)
    {
    case 4:
    next_one.show();
    next_two.show();
    next_three.show();
    break;
    case 3:
    next_one.show();
    next_two.show();
    break;
    case 2:
    next_one.show();
    break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:50:44.773

是的，这是可能的。
你想垂直动画，对吧？鉴于它是关于响应式设计的提示，您需要计算窗口加载/+/调整一个图像的高度（或容器高度）并分别为您的轮播 scrollTop 属性设置动画（鉴于它是一个溢出隐藏元素。）

# android - Android - 本地视频演示

> ID：14686986
> 
> 赞同：2
> 
> 时间：2013-02-04T12:38:50.040
> 
> 标签：android, video, local, presentation

我需要创建一个将在 android 设备上运行的“演示文稿”。本质上，这需要是一个全屏背景视频循环，有两个显示动画的浮动容器，直到其中一个被点击。单击时，容器会在其中显示一个视频，当视频结束时，它会返回动画。

我已经将其作为在线网页进行了，但由于演示文稿需要在没有互联网连接的展览上显示在 android 设备上，我需要尝试在本地执行此操作。

最初，我认为这只是更改视频编解码器的问题，但唉，不是。

这是一件如此简单的事情，事实证明这是相当困难的。任何人都可以提供任何建议。

# ruby-on-rails - Rails 将 id 从一个模型复制到另一个模型

> ID：14686991
> 
> 赞同：0
> 
> 时间：2013-02-04T12:39:11.467
> 
> 标签：ruby-on-rails, foreign-keys, record, rails-activerecord

我有一个员工模型如下：

```
class Employee < ActiveRecord::Base
  attr_accessible :blood_group_id, :caste_id, :category_id, :emp_dob, :emp_email,     :emp_fathername, :emp_fname, :emp_full_name, :gender_id, :emp_id, :emp_lname, :emp_loc_master_id, :emp_mname, :emp_mobile_no, :emp_permanent_address, :emp_phone_no, :religion_id

  has_many:postings
  has_many:dependents
  has_many:qualifications

  belongs_to:gender
  belongs_to:category
  belongs_to:religion
  belongs_to:caste
  belongs_to:blood_group
end 
```

和一个资格模型：

```
class Qualification < ActiveRecord::Base
              attr_accessible :Remarks, :employee_id, :qualification_name_id, :qualification_type_id, :specialisation_id, :university_id, :year

              belongs_to:employee
              belongs_to:qualification_type
              belongs_to:qualification_name
              belongs_to:specialisation
              belongs_to:university
            end 
```

所有的关联都是正确的。现在我可以通过员工表格创建一个新员工，并且我可以通过转到资格表格（明确）并从下拉列表中选择员工并给他资格来给他资格。

但我想要做的是：创建一个“添加资格”按钮，允许我向正在观察的员工添加资格并隐式获取员工 ID，我只需要添加资格并单击创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:07:13.273

使用动态表单，向控制器发送数据，在服务器端解析数据。我建议为此使用 KnockoutJS，这是一个类似的示例：

[http://knockoutjs.com/examples/contactsEditor.html](http://knockoutjs.com/examples/contactsEditor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:56:25.513

感谢所有的帮助......

这就是最终奏效的方法：

我将此添加到我的资格控制器中...

```
class QualificationsController < InheritedResources::Base
def new
    @qualification = Qualification.new(:employee_id => params[:id])
end

def create
    @qualification = Qualification.new(params[:qualification])
        respond_to do |format|
          if @qualification.save
            format.html { redirect_to @qualification, notice: 'Qualification was successfully created.' }
            format.json { render json: @qualification, status: :created, location: @qualification }
          else
            format.html { render action: "new" }
            format.json { render json: @qualification.errors, status: :unprocessable_entity }
          end
        end
end
end 
```

然后我将此添加到我的employee_show 视图页面...

```
<%= link_to "Add A New Qualification for this Employee", new_qualification_url(:id => @employee.id) %> 
```

我将此添加到我的资格表中：

```
 <%= simple_form_for @qualification, :html => { :class => 'form-horizontal' } do |f| %>

  <%= f.association :employee,label_method: :emp_full_name, value_method: :id, include_blank: false, :as => :hidden%>
<%= f.association :employee,label_method: :emp_full_name, value_method: :id, include_blank: false, disabled: true%> 
```

在添加员工之后，这就是帮助我回到我来的员工的原因：

```
<%= link_to t('.back', :default => t("helpers.links.back")),
          employee_path(@qualification.employee_id), :class => 'btn'  %> 
```

我正在使用 simple_form，这是一个很棒的 DSL FTW :D :D :D .....

一切都很好:) ...谢谢大家的帮助...我在这里发帖这样像我的问题这样的人将来可以解决:D ...

问候

# actionscript-3 - swf 在加载时播放声音，然后在 as3 中将其添加到舞台上

> ID：14686992
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:39:13.470
> 
> 标签：actionscript-3, flash

我正在加载一个 swf，其中包含帧上的声音，并且声音在加载时开始播放，然后将其添加到舞台上......用于加载和添加 swf 的代码如下......

```
private function loadSWF(path:String):void
        {
            var _req:URLRequest = new URLRequest();
            _req.url = path;

            _swfLoader = new URLLoader();
            setupListeners(_swfLoader.contentLoaderInfo);

            _swfLoader.load(_req);
        }

private function setupListeners(dispatcher:IEventDispatcher):void
        {
            dispatcher.addEventListener(Event.COMPLETE, addSWF);
        }

        private function addSWF(event:Event):void
        {
            event.target.removeEventListener(Event.COMPLETE, addSWF);
            event.target.removeEventListener(ProgressEvent.PROGRESS, preloadSWF);

            _swfLoader.addEventListener(Event.ADDED_TO_STAGE, onLoadComp);

            _swfContent = event.currentTarget.content;
            stage.addEventListener("close", unloadSWF);

            stage.addChild(_swfLoader); 
        } 
```

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:22:54.823

尝试使用`ADDED_TO_STAGE`事件监听器，我认为它会起作用。

# visual-c++ - 如何更改组框文本颜色？

> ID：14686996
> 
> 赞同：0
> 
> 时间：2013-02-04T12:39:28.203
> 
> 标签：visual-c++, mfc, colors, groupbox

我在我的应用程序中创建组框运行时，在 Windows xp 中以蓝色显示标题，在 Windows 7 中显示黑色。如何以编程方式更改 MFC 中组框的默认标题颜色？这样它就可以在 Windows XP 和 Windows 7 中显示为黑色。

例如： ::CreateWindow( _T("Button"),_T("Fix Now"), WS_CHILD|WS_VISIBLE|BS_GROUPBOX , XPOSITION, YPOSITION, TOP_ALERTGROUP_WIDTH, 100, //Width, Height m_hWnd , 0 , GetModuleHandle(0), 0 );

如何将默认颜色指定为“黑色”..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:39:44.193

组框的颜色由 XP Themes 控制。[您可以通过调用此函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759827%28v=vs.85%29.aspx)来禁用控件的主题（您需要传递组框的 HWND）：

```
::SetWindowTheme(hwnd_GroupBox, _T(""), _T("")); 
```