# StackOverflow 问答 12690000-12690999

# jquery - Jquery fancybox 问题

> ID：12690000
> 
> 赞同：0
> 
> 时间：2012-10-02T12:13:50.207
> 
> 标签：jquery, fancybox

单击动态生成的标签时，我需要加载 jquery 花式框。当我第一次单击链接时，不会出现花哨的框，当它在第二次单击时加载。

你能给我一个解决方案吗？这是我的代码，

```
$(document).ready(function()
    {   
        $(".app a").live('click',function(e){

        e.preventDefault();
        var contentId = $(this).attr('id');

            $("#"+contentId).fancybox({            
                'titleShow'     : false,
                'padding'       : 0,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'elastic',
                'autoDimensions':false, 
                'width'     :380, 
                'height'        :500,
                'showCloseButton' : true,
                'hideOnOverlayClick' : false            
            });

        });
    });

<div class="app"> 
  <a href="#device_detection" id="apps_<?= $regUsers->id; ?>"> click here</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:24:51.647

按照[这篇文章](https://stackoverflow.com/questions/807271/how-to-launch-jquery-fancybox-on-page-load)
在第一次单击时，您只是在初始化fancybox，您需要通过执行此操作来触发fancybox 的事件侦听器

```
$("#"+contentId).fancybox({            
    'titleShow'     : false,
    ...
}).trigger("click"); 
```

# javascript - 为什么我不能在服务器端正确获取表单数据？

> ID：12690001
> 
> 赞同：0
> 
> 时间：2012-10-02T12:13:53.000
> 
> 标签：javascript, jsp, multipartform-data

我有以下带有 javascript 的表单，可将​​文件上传到服务器：

```
<h1>Upload Font</h1>                                                       
<form id="add" name="add" action="/font/add" method="POST" enctype="multipart/form-data">
  <div class="dialog">
    <table>
      <tbody>
        <tr class="prop">
          <td valign="top" class="name required">
            <label for="description">Font Description:</label>
          </td>
          <td valign="top">
            <input type="text" name="font.description" size="44" value="" id="name"/>      
          </td>
        </tr>
        <tr class="prop">
          <td valign="top" class="name required">
            <label for="description">Font File:</label>
          </td>
          <td valign="top">
            <input type="file" name="file" size="62" value="" id="fname" onchange="fileUpload('/pages/font/getFontTitle.jsp',value,this.files[0])"/>
          </td>
        </tr> 
        <tr class="prop">
          <td>
            <span class="button"><div align="right" id="wwctrl_add_0"><input type="submit" id="add_0" value="Submit"/></div></span>
          </td>
        </tr> 
      </tbody>
    </table>
  </div> 
</form>

<script type="text/javascript">

  function fileUpload(url,fileName,fileData)
  {
    try
    {    
      var fileSize=fileData.size;
alert('fileSize : '+fileSize); 
      if (window.XMLHttpRequest) xmlhttp=new XMLHttpRequest();                   // code for IE7+, Firefox, Chrome, Opera, Safari
      else xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");                       // code for IE6, IE5 
      xmlhttp.onreadystatechange=function() { if (xmlhttp.readyState==4 && xmlhttp.status==200) document.getElementById('name').value=xmlhttp.responseText; }
      xmlhttp.open("POST",url,true);
      var formdata=new FormData();
      formdata.append('fileName',fileName);
      formdata.append('file',fileData);
      xmlhttp.send(formdata);
    }
    catch(e) { alert(e.message); }
  }
</script> 
```

我在服务器端的程序 getFontTitle.jsp 如下所示：

```
<%@ page import="java.io.*" %>
<%@ page import="java.awt.*" %>

<%
  String contentType=request.getContentType(),Location="0.",                   // To get the content type information from JSP Request Header
             fontAttributes="",fontTitle="";
System.out.println("contentType = "+contentType);
  if ((contentType!=null) && (contentType.indexOf("multipart/form-data")>=0))  // Here we are checking the content type is not equal to Null and as well as the passed data from mulitpart/form-data is greater than or equal to 0
  {
Location+="1.";
    try
    {
      DataInputStream in=new DataInputStream(request.getInputStream());
      int formDataLength=request.getContentLength();                           // We are taking the length of Content type data
      byte dataBytes[]=new byte[formDataLength];
      int byteRead=0;
      int totalBytesRead=0;

      while (totalBytesRead<formDataLength)                                    // This loop converting the uploaded file into byte code
      {
        byteRead=in.read(dataBytes,totalBytesRead,formDataLength);
        totalBytesRead+=byteRead;
      }
System.out.println("dataBytes : "+dataBytes.length+"\n"+dataBytes.toString());

      String file=new String(dataBytes);
System.out.println("file = \n"+file);
System.out.println("file.length = "+file.length());

System.out.println("file.indexOf(filename=) = "+file.indexOf("filename=\""));
String saveFile=file.substring(file.indexOf("filename=\"")+10);          // For saving the file name
      Location+="2.";
      saveFile=saveFile.substring(0,saveFile.indexOf("\n"));
System.out.println("saveFile = "+saveFile);
      Location+="3.";
      saveFile=saveFile.substring(saveFile.lastIndexOf("\\")+1,saveFile.indexOf("\""));
      Location+="4.";
      int lastIndex=contentType.lastIndexOf("=");
      Location+="5.";
      String boundary=contentType.substring(lastIndex+1,contentType.length());
System.out.println(" boundary = "+boundary);
      int pos;
      Location+="6.";
      pos=file.indexOf("filename=\"");                                         // Extracting the index of file 
      Location+="7.";
      pos=file.indexOf("\n",pos)+1;
      pos=file.indexOf("\n",pos)+1;
      pos=file.indexOf("\n",pos)+1;
      Location+="8.";
      int boundaryLocation=file.indexOf(boundary,pos)-4;
      System.out.println(" boundaryLocation = "+boundaryLocation+"  filename = "+file.indexOf("filename=\""));
      int startPos=((file.substring(0,pos)).getBytes()).length;
      int endPos=((file.substring(0,boundaryLocation)).getBytes()).length;
      System.out.println(" startPos = "+startPos+" , endPos = "+endPos);

      Location+="9.";
      File f=new File(saveFile);
      FileOutputStream fileOut=new FileOutputStream(f);
//      fileOut.write(dataBytes,startPos,(endPos-startPos));
      fileOut.write(dataBytes);
      fileOut.flush();
      fileOut.close();

Location+="a.";
//      System.out.println("================================\nstartPos = "+startPos+" , endPos = "+endPos+"\nf = "+f+"\nf.getAbsolutePath() = "+f.getAbsolutePath()+"\n\n=== contentType ===\n\n"+contentType+"\n\n=== file ===\n\n"+file+"\n================================");
//    out.println(f+"<Br>"+file);
Location+="b.";
      Font createdFont=Font.createFont(Font.TRUETYPE_FONT,new FileInputStream(f));
Location+="c.";

//      System.out.println(createdFont);
Location+="d.";
      fontAttributes=createdFont.getAttributes().toString();                   // map of {family="A.C.M.E. Explosive Bold", weight=1.0*, width=1.0*, posture=0.0*, size=1.0, transform=null*, superscript=0*, tracking=0.0*[btx=null, ctx=null]}
      System.out.println(fontAttributes);
      fontTitle=fontAttributes.substring(fontAttributes.indexOf("\"")+1,fontAttributes.lastIndexOf("\""));
      out.println(fontTitle);
Location+="e.";

//      out.println("Done : "+saveFile);

    }
    catch (Exception e) { e.printStackTrace(); }
Location+="f.";
  }
  else if (contentType==null) out.println("Not a valid file");
  out.println(" [ "+Location+" ]");

  out.flush();

%>

The output look like this : [ 0.1.2.f. ]
There is error on line : saveFile=saveFile.substring(0,saveFile.indexOf("\n"));
There is no index of saveFile.indexOf("\n")
What did I do wrong ? Maybe it's not getting the data in the correct format ? 
```

===========================================

我已将代码更改为使用 FileUpload，它看起来像这样：

```
<%
  String contentType=request.getContentType(),Location="0.",                   // To get the content type information from JSP Request Header
             fontAttributes="",fontTitle="";
out.println("Done");
System.out.println("contentType = "+contentType);

  boolean isMultipart=ServletFileUpload.isMultipartContent(request);           // Check that we have a file upload request
  System.out.println("isMultipart = "+isMultipart);

  FileItemFactory factory=new DiskFileItemFactory();                           // Create a factory for disk-based file items
  ServletFileUpload upload=new ServletFileUpload(factory);                     // Create a new file upload handler
  List /* FileItem */ items=upload.parseRequest(request);                      // Parse the request

  Iterator iter=items.iterator();                                              // Process the uploaded items
  while (iter.hasNext())
  {
    FileItem item=(FileItem) iter.next();
    if (item.isFormField())                                                    // Process a regular form field
    {
        String name=item.getFieldName();
      String value=item.getString();
      System.out.println("name = "+name+"  value = "+value);
    }
    else
    {
      String fieldName = item.getFieldName();
      String fileName = item.getName();
      contentType = item.getContentType();
      boolean isInMemory = item.isInMemory();
      long sizeInBytes = item.getSize();
      System.out.println("isInMemory = "+isInMemory+"  sizeInBytes = "+sizeInBytes);

    }
  }

  if ((contentType!=null) && (contentType.indexOf("multipart/form-data")>=0))  // Here we are checking the content type is not equal to Null and as well as the passed data from mulitpart/form-data is greater than or equal to 0
  {
Location+="1.";
    try
    {
      DataInputStream in=new DataInputStream(request.getInputStream());
      int formDataLength=request.getContentLength();                           // We are taking the length of Content type data
      byte dataBytes[]=new byte[formDataLength];
      int byteRead=0;
      int totalBytesRead=0;

      while (totalBytesRead<formDataLength)                                    // This loop converting the uploaded file into byte code
      {
        byteRead=in.read(dataBytes,totalBytesRead,formDataLength);
        totalBytesRead+=byteRead;
      }
System.out.println("dataBytes : "+dataBytes.length+"\n"+dataBytes.toString()); 
```

……

```
 }
    catch (Exception e) { e.printStackTrace(); }
Location+="f.";
  }
  else if (contentType==null) out.println("Not a valid file");
  out.println(" [ "+Location+" ]");

  out.flush();

%> 
```

输出是：

```
contentType = multipart/form-data; boundary=---------------------------184228830106
isMultipart = true
dataBytes : 35918
[B@1c8365b
file =

file.length = 35918
file.indexOf(filename=) = -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:02:32.510

我很抱歉我的赞扬，我没有意识到你在哪里使用 ajax 进行上传（我虽然这是一个简单的帖子）。只是它不受支持，但大多数浏览器（[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)）。不过，使用更高版本的 Chrome 和 Mozilla 这可能是可能的（[jQuery 上传进度和 AJAX 文件上传](https://stackoverflow.com/questions/4856917/jquery-upload-progress-and-ajax-file-upload/4943774#4943774)）

您可以通过提交隐藏的 iframe 来实现文件上传的跨浏览器功能（这种技术实际上是 ajax 文件上传的实现）。

还有一些现成的插件，例如[http://www.phpletter.com/Demo/AjaxFileUpload-Demo/](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)和[https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)，您可以找到有用的

# php - Netbeans 和 Zend Framework 2 配置 - zh.sh 文件

> ID：12690005
> 
> 赞同：1
> 
> 时间：2012-10-02T12:14:04.200
> 
> 标签：php, netbeans-7, zend-framework2

我是 PHP 和 Zend Framework 2 的新手。

我目前正在阅读[ZF2 教程](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)。我已经运行了命令：

```
php composer.phar self-update
php composer.phar install 
```

然后打开最新的 Netbeans 版本。但是，当被要求提供文件时，我在文件夹`zh.sh`中的任何地方都找不到它。`zf2-tutorial`这个文件是我们需要创建的，还是默认存在于 ZF2 中？

如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:13:15.057

正如其他人所暗示的那样，NetBeans 还没有赶上 ZF2（ZF 只出现了几个星期）。

截至目前，ZF2 没有命令行工具（即：zf.sh）。相反，我们鼓励您使用 Skeleton Application 来开始工作。

尽管 NetBeans 没有任何特定的 ZF2 支持，但它仍然是开发 ZF2 项目时使用的出色 IDE。

只需跳过 ZF 特定的东西。获取 Skeleton App，并创建一个新的 NetBeans 项目（“来自现有资源”），然后开始 hack。

老实说，我不记得曾经在 netbeans 中使用过任何 ZF 特定的东西。该框架只是一堆 PHP 文件，无需任何特定于框架的知识，NetBeans 就可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:53:23.247

我不知道 zf.sh 的内容，但我在 windows 中使用了这个 zf.bat，因为它在 linux so 中应该是 zf.sh。这样我在创建项目阶段从netbeans获得了我的zend核心（没有错误）：

```
git clone git://github.com/zendframework/ZendSkeletonApplication.git
cd ZendSkeletonApplication
php composer.phar self-update
php composer.phar install 
```

*Zend 包含在 php.ini 中，并`COMPOSER_PROCESS_TIMEOUT=5000`设置在同一个文件中（也 set `max_execution_time=5000`）。这是因为将它放在命令行命令中对我不起作用。*

# c# - 使用 WinRT 检索设备的序列号

> ID：12690006
> 
> 赞同：2
> 
> 时间：2012-10-02T12:14:05.210
> 
> 标签：c#, c++, .net, api, windows-runtime

我们正在开发一个应用程序，该应用程序需要知道它正在运行的设备的序列号。该应用程序适用于保险公司，用户可以通过该公司直接获得设备保险。对于保险单，需要序列号。是否可以使用 WinRT 或任何可在 Metro 风格应用程序中使用的 API 检索设备的序列号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:25:51.480

我不知道它是否完全符合您的需要，但可以唯一地识别设备（从 Windows 8 RTM 开始）。

```
private string GetHardwareId()
{
    var token = HardwareIdentification.GetPackageSpecificToken(null);
    var hardwareId = token.Id;
    var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);

    byte[] bytes = new byte[hardwareId.Length];
    dataReader.ReadBytes(bytes);

    return BitConverter.ToString(bytes);
} 
```

# asp.net-mvc - asp.net mvc3，来自数据库的角色

> ID：12690007
> 
> 赞同：2
> 
> 时间：2012-10-02T12:14:07.050
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authorization

我正在创建一个 asp.net mvc 项目，我想管理数据库中的角色。

我有一个带有表的数据库，在名为 Premissions 的表中，我有一列 (AdministratorRole)，其中包含我的 mvc 项目的角色，该值将包含类似`'Domain\John Smith'`（用户）的内容。我希望我的 mvc 项目在每次启动时检查此列。

在我的 mvc 项目中，我在控制器中使用 Authorize 属性：

```
[Authorize(Roles = Roles.AdministratorRole)] 
```

我正在考虑创建一个接口，以便我可以使用 a`IQueryable`来查询数据库，然后在`application_start`方法的 Global.asax 文件中添加一些内容，以便它首先运行接口并检查所有角色。（我怎样才能做到这一点？）

这样我们就可以在数据库中而不是在项目的代码中维护角色。

请问我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:22:56.930

ASP.Net 对成员资格和角色使用提供者模型。如果您正在做一些定制的事情，那么您只需要创建一个[Custom RoleProvider](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:22:38.993

您可以实现[RoleProvider](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=VS.100%29.aspx)。

> ASP.NET 角色管理使您能够轻松地为您的 ASP.NET 应用程序使用许多不同的提供程序。您可以使用 .NET Framework 中提供的配置文件提供程序，也可以实现自己的提供程序。
> 
> 创建自定义角色提供程序有两个主要原因。
> 
> 您需要将角色信息存储在 .NET Framework 中包含的角色提供程序不支持的数据源中，例如 FoxPro 数据库、Oracle 数据库或其他数据源。
> 
> 您需要使用与 .NET Framework 附带的提供程序所使用的数据库架构不同的数据库架构来管理角色信息。一个常见的例子是公司或网站的 SQL Server 数据库中已经存在的授权数据。

# maven - Maven插件管理配置继承奇怪行为

> ID：12690012
> 
> 赞同：11
> 
> 时间：2012-10-02T12:14:40.817
> 
> 标签：maven, inheritance, build, maven-plugin, pom.xml

我`pluginManagement`在父级中使用 element`pom.xml`为其所有子级配置插件。例如，我有以下配置：

```
<pluginManagement>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4.3</version>
        <executions>
            <execution>
                <id>copy-artifacts</id>
                <phase>install</phase>
                <goals>
                    <goal>copy-resources</goal>
                </goals>
                <configuration>
                    <outputDirectory>some/where/else</outputDirectory>
                    <resources>
                        <resource>
                            <directory>some/another/resource</directory>
                        </resource>
                    </resources>
                </configuration>
            </execution>
        </executions>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.4</version>
        <executions>
            <execution>
                <id>copy-dependencies</id>
                <phase>install</phase>
                <goals>
                    <goal>copy-dependencies</goal>
                </goals>
                <configuration>
                    <outputDirectory>deps/dir</outputDirectory>
                </configuration>
            </execution>
        </executions>
    </plugin>
</pluginManagement> 
```

官方文档指出，`pluginManagement`仍然必须将配置的插件添加到`plugins`子 pom 中的元素中。事实上，如果我从子 pom 中删除它：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
</plugin> 
```

然后停止在相位`maven-dependency-plugin`发射。`install`但是，它似乎不影响其他一些插件，即`maven-resource-plugin`. 即使我没有

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
</plugin> 
```

在我的孩子 pom 中，它的`copy-resources`目标仍然在阶段触发`install`并执行它配置的工作。

为什么会出现这种行为？是否有一个总是继承的插件列表，或者我可能遗漏了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T13:30:43.850

整个 POM 不可见；但是鉴于您所描述的行为，这是一个罐子，战争或耳朵，对吗？默认情况下，资源插件是为这些包装类型定义的。它包括一个复制资源的执行（如@maba 所述）。

由于插件定义包含在您的子 POM 中（即使您没有直接将它放在那里），Maven 将在该`<pluginManagement>`部分中定义的执行与 Maven 提供的执行合并。

有按包装类型描述默认生命周期绑定的[文档。](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)注意`dependency`插件没有被提及；但是`resources`是；这就是你观察差异的原因。运行`-X`将显示插件执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:23:55.960

`src/main/resources`默认情况下，Maven 总是复制内部的资源。

来自[Maven 入门指南](http://maven.apache.org/guides/getting-started/index.html#How_do_I_add_resources_to_my_JAR)：

> Maven 采用的简单规则是：任何目录或放置在该`${basedir}/src/main/resources`目录中的文件都打包在您的 JAR 中，并且从 JAR 的基础开始具有完全相同的结构。

# c# - 分组 JSON 数据

> ID：12690013
> 
> 赞同：1
> 
> 时间：2012-10-02T12:14:47.413
> 
> 标签：c#, json, jquery

我是 JSON 架构的新手，在我的代码后面（ASP.Net 3.5）中，从 web 方法，我从数据表返回一个数组，如下所示：

```
身份证 | 数字
___________

1 | 200  
1 | 300  
2 | 400  
2 | 500  
3 | 600  

```

我将此表以数组的形式返回给 JSON 对象。
我想要做的是使用 JQuery 如下构造数据：

```
<div id="1">ID = 1</div>
    <div id="11">200</div>
    <div id="12">300</div>
</div>
<div id="2">ID = 2</div>
    <div id="21">400</div>
    <div id="22">500</div>
</div>
<div id="3">ID = 3</div>
    <div id="31">600</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:20:55.517

对于渲染本身，我会推荐一个[jsRender 之](https://github.com/BorisMoore/jsrender)类的 javascript 模板库。至于 JSON 格式，最好的办法是在服务器端对数据进行分组，并让每个属性都包含一个数组，因此您的 JSON 将如下所示：

```
var data = {
    "1": ["200", "300"],
    "2": ["400", "500"],
    "3": ["600"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:30:58.770

您应该手动执行此操作，使用对象对您的值进行分组。假设您的 JSON 对象反序列化为：

```
var myTable = [{ID: 1, Number:200}, {ID: 1, Number:300}, {ID: 2, Number:400}, {ID: 2, Number:500}, {ID: 3, Number:600}] 
```

然后此代码将对值进行分组：

```
var myObject = {};
$.each(myTable, function() {
    if (!myObject[this.ID]) myObject[this.ID] = [];
    myObject[this.ID].push(this.Number);
} 
```

然后你应该构建你的 html 代码结构......像：

```
var myHtml = $("");
$.each(myObject, function(ID, Numbers) {
    if (Numbers) {
        var divId = $("<div></div>").attr("id", ID);
        $.each(Numbers, function(index, number) {
            divId.append($("<div></div>").attr("id", ID.toString() + (index+1).toString()).html(number));
        }
        divId.appendTo(myHtml);
    }
} 
```

请注意，您的问题 html 中的 html 无效，它的结束标签太多`</div>`，因此您可以根据需要调整代码。

# spring - 构造函数之前的弹簧自动装配

> ID：12690014
> 
> 赞同：0
> 
> 时间：2012-10-02T12:14:48.133
> 
> 标签：spring, autowired

你好，我有一门课，我想测试。此类有一个自动装配的 DAO 对象，该对象已在`@PostConstruct`方法中使用，但我想使用模拟而不是真实对象有没有办法。这是一个例子：

```
@Autowired
PersonDao personDao;
//Constructor 
public Person()
{
    //Do stuff
}

@PostConstruct
void init()
{
    //I need it to be a mock
    personDao.add(new Person());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:21:08.887

如果你想使用 mocked`PersonDao`你有几个选择：

*   将`PersonDao`mock 定义为具有`primary="true"`属性的 Spring bean，以便它优先于普通 bean

*   将自动装配移动到构造函数并`Person`通过提供模拟手动创建：

    ```
    PersonDao personDao;

    @Autowired
    public Person(PersonDao personDao)
    {
        this.personDao = personDao;
    } 
    ```

    然后：

    ```
    new Person(personDaoMock) 
    ```

    并且不要依赖Spring。

*   您可以使用以下方法修改私有字段[`ReflectionTestUtils`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/test/util/ReflectionTestUtils.html)：

    ```
    ReflectionTestUtils.setField(person, "personDao", mock); 
    ```

# python - 具有不同文件的类并在函数之间传递变量

> ID：12690016
> 
> 赞同：1
> 
> 时间：2012-10-02T12:14:52.900
> 
> 标签：python

如何将许多变量传递给不同文件中的函数？

我注意到有些文件只有功能（它们被分组在单独的文件中）。例如，一个文件控制安装（具有新安装、更新安装等功能），另一个授予访问权限（创建新用户、删除用户、更新用户）。这些函数接收相当数量的变量， 举个例子：

```
access_tool.add_user(cur,con,env,family,iserver,version,login,
                           password,prefix,proxyUser,proxyPass,
                           proxyServer,user,pass) 
```

因此，access_tool（文件）和函数（get_add_info）从另一个文件接收这些变量，并且这些变量是动态的（来自数据库查询的结果）。如何优雅地将这些值传递给不同文件中的函数？

**例子：**

我们有 2 个重要文件：

1.  a.properties - 包含数据库信息和凭据
2.  mainfile.py - 主文件，调用以执行功能，例如：
    *   添加用户 ENV newuser newuserpass

add-user 从文件 access_tool.py 中调用一个名为 add_user 的函数。

mainfile.py 所做的是（对于这个用户创建示例）取决于通过输入发送的环境，它将查询数据库以选择 X 服务器来添加用户，并将结果存储到 vars (用于数组循环）：

```
cur,con,env,family,iserver,version,login,password,prefix,proxyUser,proxyPass,proxyServer 
```

因此，这些 vars 将从循环接收 5 、 10 或更多服务器来添加。唯一的静态变量是 newuser 和 newuserpass（从输入接收）

我唯一的问题是决定如何将变量传递（或共享）到另一个文件上的函数。

一些工作人员建议我将所有这些都保存在同一个文件中，而不是每个类都有很多文件，而只需一个包含所有类的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:26:47.400

**Python 中文件**的概念是模糊的。短语“文件中的变量”没有任何意义。您必须了解这些 var 是如何实例化的以及它们的作用域是什么。

Python 中的值不存在于文件中，它们存在于内存中，并由变量指向。

对于需要大量参数的函数，通常使用命名参数：

```
def fun(**args):
  param1 = args.get('param1', 'default_value')
  param2 = ... # etc

fun(param1='val1', param2 = 'val2') 
```

这可能是您正在寻找的优雅:)

因此，您的代码可能如下所示：

```
def main():
  #initialization 
  import access_tool
  con = database_connection()
  servers = query_database_for_servers()

  for server in servers:
    #assume server is a dict of values
    access_tool.add_user ( **server ) 
```

您的`add_user`功能可能会这样修改：

```
def add_user ( **params ):
   # connect to params['server'] using params['env']
   # and add user with other params[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:22:56.217

这取决于值的存储方式。例如，如果它们是从配置文件中读取的，并且您将配置值存储为字典，则可以使用字典解包将值传递到您的方法调用中。例如`access_tool.add_user(**settings)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:24:06.790

如果你想在许多函数之间传递变量，我建议你看看传递对象。 [在这里查看我的答案：](https://stackoverflow.com/a/12642948/492620)。如果你想做更复杂的事情，你绝对应该看看模块[ConfigParser 。](http://docs.python.org/library/configparser.html?highlight=configparser#ConfigParser)

# r - 提取元素名称相似的嵌套列表元素

> ID：12690017
> 
> 赞同：3
> 
> 时间：2012-10-02T12:14:54.833
> 
> 标签：r, list

我有一个嵌套列表，由一个函数产生。顶部元素名称在更下方的元素名称中重复出现。

```
$`1`
$`1`$`1`
[1] 0 0 0 0 0 0 0 1 0

$`1`$`2`
[1] 0 0 0 0 0 0 0 0 0

$`2`
$`2`$`1`
[1] 0 0 0 1 1 0 0 0 0

$`2`$`2`
[1] 0 1 0 0 0 1 0 0 0 
```

有没有办法使用应用函数（或其他）来提取元素和子元素名称匹配的那些向量。例如`1`$$`1`和`2`$$ `2`。我有一个巨大的列表（4000 个元素和 4000 个子元素），因此效率是必须的。

或者 - 我已经找到了使用“melt()”来摆脱这种混乱的方法，但是对于我的集合大小来说它太消耗了。但是，如果有人知道如何复制效果——给出一个包含 3 列的数据框，一列用于元素名称，一列用于子元素名称，一列用于向量——这也可以。

问候和感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:22:15.183

这是一种获取所需向量列表的方法：

```
lapply(names(dat), function(x) dat[[x]][[x]]) 
```

在数据框中：

```
do.call("rbind",
        lapply(names(dat),
               function(x) data.frame(element = x,
                                      subelement = x,
                                      values = dat[[x]][[x]])
        )
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:11:13.167

您可以`unlist`在不递归的情况下删除顶级列表结构，然后在此结果的名称上使用正则表达式辅助子集。

```
l <- list(`1`=list(`1`=rpois(6,1),`2`=rep(0,6)),`2`=list(`1`=rep(0,6),`2`=rpois(6,1)))
l2 <- unlist(l,recursive=F)
l2[grepl("([0-9]+)[.]\\1",names(l2))]
$`1.1`
[1] 2 0 2 4 1 0

$`2.2`
[1] 0 0 0 2 1 0 
```

# c# - 文件 * 已被 SHAREPOINT\system 修改

> ID：12690018
> 
> 赞同：1
> 
> 时间：2012-10-02T12:14:55.533
> 
> 标签：c#, sharepoint, sharepoint-2010

在当前场景中，我试图将文档集从一个库复制到另一个库，问题是我不能使用 DocumentSet.Import，因为我只需要 docset 属性而不是内容。

此代码的 System.Update 中会引发异常。

```
private void CopyAgendaPointToRootSite(SPListItem agendaPointItem, string oldReasonReturned)
        {

            try
            {
                if (agendaPointItem != null)
                {
                    SPWeb currentSite = agendaPointItem.ParentList.ParentWeb;
                    SPSecurity.RunWithElevatedPrivileges(delegate()
                    {
                        using (SPSite site = new SPSite(currentSite.Site.RootWeb.Url))
                        {
                            using (SPWeb elevatedTargetWeb = site.OpenWeb())
                            {
                                SPList targetList = GetAgendaPointProposedTargetLibrary(agendaPointItem, elevatedTargetWeb);
                                SPDocumentLibrary targetDocumentLibrary = (SPDocumentLibrary)targetList;

                                SPContentTypeId targetCTId = targetList.ContentTypes.BestMatch(new SPContentTypeId(MeetingsCommon.Constants.CONTENTTYPES_AGENDAPOINTPROPOSED_ID));
                                DocumentSet documentSet = DocumentSet.GetDocumentSet(agendaPointItem.Folder);
                                if (documentSet != null)
                                {
                                    string strAgendaPointTitle = agendaPointItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTTITLENL_NAME] +
                                        " / " + agendaPointItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTTITLEFR_NAME];

                                    SPListItemCollection colProposedItems = FindAgendaPointProposedItem((SPDocumentLibrary)targetList, documentSet.Item.Name);
                                    if (colProposedItems.Count > 0)
                                        throw new Exception(string.Format(HelperFunctions.GetResourceString(
                                            MeetingsCommon.Constants.RESOURCES_FILE_NAME,
                                            "Message_AgendaPointsEvents_ERROR_DocumentSetAlreadyExistsInRootSite2"), strAgendaPointTitle));

                                    using (DisableItemEventScope scope = new DisableItemEventScope())
                                    {
                                        DocumentSet docSetCreated = DocumentSet.Create(targetList.RootFolder, agendaPointItem.Name, targetCTId, new Hashtable(), true);
                                        SPListItem listItem = docSetCreated.Item;

                                        foreach (SPField field in agendaPointItem.Fields)
                                        {
                                            if (!field.ReadOnlyField && field.InternalName != "Attachments" &&      field.InternalName  != "TaxCatchAll")   
                                            {
                                                if (agendaPointItem[field.Id] != null)
                                                {
                                                    string targetFieldInternalName = field.InternalName;
                                                    if (listItem.Fields.ContainsField(field.InternalName))
                                                    {
                                                        listItem[targetFieldInternalName] = agendaPointItem[field.InternalName];
                                                    }
                                                }
                                            }
                                        }

                                        string reasonreturned = "---- <br/>Reason returned: " + currentSite.Title + " Rejected. " + "<br/> "
                                                                         + agendaPointItem.GetTaxonomyFieldValueByLanguage(site, MeetingsCommon.Constants.FIELDS_AGENDAPOINTDECISION_NAME, 1036) + "<br/> "
                                                                         + agendaPointItem.GetTaxonomyFieldValueByLanguage(site, MeetingsCommon.Constants.FIELDS_AGENDAPOINTDECISION_NAME, 1043) + "<br/> "
                                                                         + agendaPointItem.GetFieldValue(MeetingsCommon.Constants.FIELDS_AGENDAPOINTDECISIONCOMMENTSNL_NAME)
                                                                         + agendaPointItem.GetFieldValue(MeetingsCommon.Constants.FIELDS_AGENDAPOINTDECISIONCOMMENTSFR_NAME)
                                                                         + agendaPointItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTSREASONRETURNED_NAME] + "<br/>----";

                                        SPFieldUrlValue value = new SPFieldUrlValue();
                                        value.Description = currentSite.Title;
                                        value.Url = currentSite.Url;                                      
                                        listItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTPOSTPONEDFROM_NAME] = value;
                                        listItem[MeetingsCommon.Constants.FIELDS_MEETING_NAME] = null;
                                        listItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTSTATUS_NAME] = null;
                                        listItem[MeetingsCommon.Constants.FIELDS_AGENDAPOINTSREASONRETURNED_NAME] = reasonreturned;

                                        //Clear the category and status field
                                        listItem.ClearTaxonomyFieldValue(MeetingsCommon.Constants.FIELDS_AGENDAPOINTSTATUS_NAME);
                                        listItem.ClearTaxonomyFieldValue(MeetingsCommon.Constants.FIELDS_AGENDAPOINTDECISION_NAME);
                                        listItem.SystemUpdate(false);
                                    }                                           
                                }
                            }
                        }
                    });
                }
            }
            catch (Exception ex)
            {

                throw;
            }

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:43:45.630

我修复了它做以下

```
 DocumentSet docSetCreated = DocumentSet.Create(targetList.RootFolder, agendaPointItem.Name, targetCTId, new Hashtable(), true);
                                        int  listItemId = docSetCreated.Item.ID;
                                        SPListItem listItem = targetList.GetItemById(listItemId); 
```

显然在创建文档集之后，我不能再使用该对象的列表项了，我需要获得一个新的

# php - PHP中的后期静态绑定，子类之间共享变量

> ID：12690019
> 
> 赞同：0
> 
> 时间：2012-10-02T12:14:58.013
> 
> 标签：php, static, late-static-binding

也许我的问题已经被问过好几次了，但是......

我有以下代码

```
abstract class ParentClass
{
    protected static $count=0;
    public static function inc()
    {
        static::$count++;
    }
    public static function getCount()
    {
        return static::$count;
    }
}

class FirstChild extends ParentClass
{

}
class SecondChild extends ParentClass
{

} 
```

我就像这样使用它

```
FirstChild::inc();
echo SecondChild::getCount(); 
```

它向我显示“1”。你可能猜到我需要“0”:)

我看到两种方法：

1.  添加`protected static $count=0;`到每个派生类
2.  `$count`不是整数而是数组。`inc`并在和`getCount`方法中做一些这样的事情：

    静态::$count[get_call_class()]++;

和

```
return static::$count[get_called_class()]; 
```

但我认为这些方式有点丑陋。首先 - 让我复制/粘贴，我想避免。第二 - 好吧，我不知道:) 我只是不喜欢它。

有没有更好的方法来实现我想要的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:18:44.120

不，您已经准确地列出了两个最实用的选项来解决这个问题。PHP 不能变魔术；当你声明一个`static` `protected`属性时，你得到的正是：*一个*属性。如果您提供的语法确实有效，那么对于需要这样做的每个人来说可能是个好消息，但对于其他希望 PHP OOP 以某种理智的方式表现的人来说，这绝对是一个可怕的消息。

并且作为记录，如果您不需要为所有派生类设置一个单独的计数器，那么我认为`protected static $count = 0`派生类中确实需要一个单独的计数器是一个很好的解决方案：您想要自己的计数器，您要求一个，然后这个事实仍然写在代码中供大家查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:19:22.400

我认为对于您要尝试做的事情，在抽象类中只有一个接口方法（例如 getCount()），而在派生类中只有一个计数器，这是您的首选，是最不糟糕的选择。如果您不计算该计数的所有实例，那么在父类中具有抽象静态计数是没有意义的。

总的来说，我认为整个想法有点丑陋，因此实现也会很丑陋:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T21:02:34.943

您可以声明受保护的静态 $count=0; 对于每个子类，这样它对于每个子类都是唯一的，但对于类的所有实例都是通用的。这是解决他的问题的最优雅的方法。

```
abstract class ParentClass
{
    public static function inc()
    {
        static::$count++;
    }
    public static function getCount()
    {
        return static::$count;
    }
}

class FirstChild extends ParentClass
{
    protected static $count=0;
}
class SecondChild extends ParentClass
{
    protected static $count=0;
} 
```

# c# - 使用表达式比较属性和子属性上的对象

> ID：12690022
> 
> 赞同：0
> 
> 时间：2012-10-02T12:15:10.060
> 
> 标签：c#, expression-trees, expression

我有以下方法来比较 DTO。

```
bool Equals<T1, T2>(T1 t1, T2 t2, params Expression<Func<T1, object>>[] accessors)
{
  return !(
    from accessor in accessors 
    select ((MemberExpression) accessor.Body).Member.Name into propertyName 
    let p1 = typeof (T1).GetProperty(propertyName, BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly) 
    let p2 = typeof (T2).GetProperty(propertyName, BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly) 
    let p1val = p1.GetValue(t1, null) 
    let p2val = p2.GetValue(t2, null) 
    where !Equals(p1val, p2val) 
    select p1val
  ).Any();
} 
```

我可以使用（`a`并且`b`是按照惯例共享相同属性但不是相同对象的对象的实例）来调用它：

```
Equals(a, b, x => x.PropertyOne, x => x.PropertyTwo ); 
```

它按属性比较对象属性，这在大多数情况下都很好。

但是，我发现了一种情况，我需要比较具有复杂类型属性的对象，并且我想比较复杂类型而不是对象的属性。像这样的东西：

```
Equals(a, b, x => x.ComplexTypeProperty.ChildProp ); 
```

我意识到我需要离开舒适的反射比较并进入表达式领域，但这里的主要任务是能够通过复杂类型的属性来*表达*属性访问器和属性访问器，这就是我迷路的地方。

任何指针都会很好，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:53:51.240

任务并不复杂：

1.  确定由表达式给出的属性路径或表达式。例如，这个扩展方法会给你这个：

    ```
    public static IEnumerable<string> GetPropertiesNames<T, G>(this Expression<Func<T, G>> pathExpression)
    {
        List<string> _propertyNames = new List<string>();

        Expression expression = pathExpression.Body;

        if (expression.NodeType == ExpressionType.Convert)
        {
            var convert = (UnaryExpression)pathExpression.Body;
            expression = convert.Operand;
        }

        while (expression.NodeType == ExpressionType.MemberAccess)
        {
            MemberExpression memberExpression = (MemberExpression)expression;
              if(!(memberExpression.Member is PropertyInfo)) 
                    throw new InvalidOperationException();
            _propertyNames.Add(memberExpression.Member.Name);
            expression = memberExpression.Expression;
        }

        if (expression.NodeType != ExpressionType.Parameter)
            throw new InvalidOperationException();

        return _propertyNames;
    } 
    ```

2.  第二种类型的聚合表达式以创建将返回值的函数：

    ```
    var parameter = Expression.Parameter(typeof(T2));      
    var expressionToConvert =  accessors[0]; //for future loop

        var propertyChainDescriptor = expressionToConvert.GetPropertiesNames() 
             .Aggregate(new { Expression = (Expression)parameterCasted, Type = typeof(T2)},
                 (current, propertyName) =>
                 {
                     var property = current.Type.GetProperty(propertyName);
                     var expression = Expression.Property(current.Expression, property);
                     return new { Expression = (Expression)expression, Type = property.PropertyType };
                 });

        var body = propertyChainDescriptor.Expression;

        if (propertyChainDescriptor.Type.IsValueType)
        {
            body = Expression.Convert(body, typeof(object));
        }

        var t2PropertyRetriver = Expression.Lambda<Func<T2, object>>(body, parameter).Compile(); 
    ```

3.  现在执行检索值并进行比较的方法：

    ```
     var t1PropertyRetriver = accessor[0].Compile();
        var t1Value = t1PropertyRetriver(t1);
        var t2Value = t2PropertyRetriver(t2);

        var areEqual = object.Equals(t1Value,t2Value); 
    ```

好主意是添加一些生成方法的缓存，因为编译过程很昂贵。

# ruby - 在键中使用下划线对 ruby 哈希进行排序

> ID：12690027
> 
> 赞同：0
> 
> 时间：2012-10-02T12:15:31.063
> 
> 标签：ruby, ruby-1.8.7

`sort`我通常使用下面示例中给出的非常著名的方法对 ruby​​ 哈希进行排序。但是当字符串键中有下划线时，这非常失败。例如：

```
h = {"b" => 1, "a" => 2}
Hash[h.sort] 
```

完美地对哈希进行排序。但是当哈希类似于

```
h = {"b_d" => 1, "a_v" => 2} 
```

我没有得到所需的排序顺序。这里要注意的一点是`h.sort`对哈希进行排序并生成一个`Enumerable`对象。但是当我使用 将对象转换回 Hash 时`Hash[h.sort]`，它会丢失这里的顺序。任何有关更好流程的建议都可能会有所帮助。

**注意：**我正在使用`Ruby 1.8.7`，所以`OrderedHash`我的镜头中没有太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:00:44.370

在 Ruby 1.8.7 中，一旦您转换回 a `Hash`，您就必然会失去您的排序。你必须摆脱香草`Hash`才能让它发挥作用 - 也许尝试让`Enumerable`你远离`sort`并尽可能长时间地使用它？

# mysql - 如何使用flume从mysql中读取数据？

> ID：12690031
> 
> 赞同：3
> 
> 时间：2012-10-02T12:15:54.940
> 
> 标签：mysql, hadoop, hbase, flume

如何使用水槽从 mysql 连续读取以加载到 hbase？

我熟悉 sqoop，但我需要从 mysql 源不断地做到这一点。是否需要自定义源才能执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T05:40:00.727

Sqoop 适用于从 RDBMS 批量导入到 HDFS/Hive/HBase。如果它只是一次导入，那非常好，它实现了它在纸上的承诺。但是当您想要实时增量更新时，问题就来了。在 Sqoop 支持的两种增量更新之间：

追加，这个允许你重新运行 sqoop 作业，每个新作业都从上一个旧作业结束的地方开始。例如。第一个 sqoop 作业仅导入第 0-100 行，然后下一个作业将根据 --last-value=100 从 101 开始。但是即使 0-100 更新了，追加模式也不会再覆盖它们了。

last-modified，这个更糟糕的是恕我直言，它要求源表有一个时间戳字段，指示该行最后一次更新的时间。然后根据时间戳，进行增量更新导入。如果源表没有类似的东西，那么这个是没有用的。

我想说，如果您确实掌握了源数据库，则可以使用 Sqoop 进入最后修改模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:04:43.930

有很多方法可以做到这一点，但我会编写一个脚本，从 MySQL 获取数据并为每个生成一个[Avro](http://avro.apache.org/)事件。

然后，您可以使用内置的 Avro 源接收此数据，并将其发送到 HDFS 接收器。

# java - 常春藤 CleanCache 任务抛出 NullPointException

> ID：12690035
> 
> 赞同：1
> 
> 时间：2012-10-02T12:16:21.897
> 
> 标签：java, ant, ivy, slf4j

我有以下项目目录结构：

```
MyProject/
    src/main/java/
        All of my Java sources
    build/
        build.xml
        build.properties
        ivy.xml
        ivy-settings.xml
        ivy-settings.properties 
```

`build.xml`看起来像这样：

```
<project name="MyProject" default="audit" basedir=".." xmlns:ivy="antlib:org.apache.ivy.ant">
    <property file="build/build.properties"/>
    <property environment="env"/>

    <path id="ant.lib.path">
        <fileset dir="${env.ANT_HOME}/lib" includes="*.jar"/>
    </path>

    <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpathref="ant.lib.path"/>

    <target name="configIvy">
        <echo message="Configuring Ivy."/>
        <echo message="URL is: ${ivy.settings.home}"/>
        <ivy:settings url="${ivy.settings.home}"/>

        <!-- Clear/flush the Ivy cache. -->
        <echo message="Cleaning the local Ivy cache for the current build."/>
        <ivy:cleancache/>
    </target>
</project> 
```

当我运行时`ant -buildfile /<path-to-my-project>/MyProject/build/build.xml configIvy`，我得到以下控制台输出：

```
Buildfile: /<path-to-my-project>/MyProject/build/build.xml

configIvy:
    [echo] Configuring Ivy.
    [echo] URL is: file:////<path-to-my-project>/MyProject/build/ivy-settings.xml
[ivy:cleancache] :: Apache Ivy 2.3.0-rc1 - 20120416000235 :: http://ant.apache.org/ivy/ ::

BUILD FAILED
/<path-to-my-project>/MyProject/build/build.xml:85: java.lang.ExceptionInInitializerError
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.apache.ivy.util.url.URLHandlerRegistry.getHttp(URLHandlerRegistry.java:47)
    at org.apache.ivy.ant.IvyAntSettings.configureURLHandler(IvyAntSettings.java:367)
    at org.apache.ivy.ant.IvyAntSettings.createIvyEngine(IvyAntSettings.java:267)
    at org.apache.ivy.ant.IvyAntSettings.getConfiguredIvyInstance(IvyAntSettings.java:237)
    at org.apache.ivy.ant.IvyTask.getIvyInstance(IvyTask.java:92)
    at org.apache.ivy.ant.IvyTask.prepareTask(IvyTask.java:256)
    at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:276)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.NullPointerException
    at org.apache.log4j.Category.isDebugEnabled(Category.java:129)
    at org.apache.commons.logging.impl.Log4JLogger.isDebugEnabled(Log4JLogger.java:239)
    at org.apache.commons.httpclient.HttpClient.<clinit>(HttpClient.java:69)
    ... 25 more 
```

我的文件指定了托管在我的本地计算机 ( )`ivy-settings.xml`上的 Artifactory 存储库的 URL 解析器。`http://localhost:8080/artifactory/myrepo`我想知道 Ivy 是否在后台使用 HttpClient（正如堆栈跟踪所暗示的那样），并且由于某种原因，因为它是同一台机器上的 HTTP URL 而令人窒息？也许？！？*是*的，我确信 URL 是正确的，并且在我运行 Ant 构建时 Artifactory 正在运行！

谁能发现这里发生了什么？为什么会`<ivy-cleancache>`抛出NPE？我正在查看它的源代码，但似乎无法找到 NPE 的来源或原因。如果需要，我可以提供更多细节。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:44:13.443

我以为我对此做出了回应，但我在这里看不到它...

不要将项目的额外 jar 放入`$ANT_HOME/lib`. 有几个原因：

*   正如您所发现的，当每组可选任务尝试设置他们需要的类路径时，可能会发生 jar 冲突。是的，在执行 a 时不必设置类路径很好`<taskdef>`，但这还不错。
*   如果您将项目交给其他人，他们也必须安装所有可选的 jar，然后才能进行构建。

更好的方法是创建一个`${basedir}/ant.lib`目录，然后将每组 ant 任务 jar 放在自己的子目录中。例如，您将 Ivy 罐子放入`${basedir}/ant.lib/ivy`，并将 Checkstyle 罐子放入`${basedir}/ant.lib/checkstyle`. 然后，使用指向目录的类路径定义 taskdef，如下所示：

```
 <taskdef resource="org/apache/ivy/ant/antlib.xml" 
      uri="antlib:org.apache.ivy.ant">
      <classpath>
          <fileset dir="${basedir}/lib/ivy"/>
      </classpath>
 </taskdef> 
```

这样，常春藤就不会拿起错误的罐子。作为奖励，您还可以将您的项目提供给某人，并且 Ivy 已经为他们安装并运行。他们无需下载 Ivy 并在正确的类路径中设置 jar。

顺便说一句，`$ANT_HOME/lib`已经在 Ant 类路径中，所以如果你没有指定类路径，所有的 jars`$ANT_HOME/lib`都会被自动拾取。你可以简单地这样做：

```
 <taskdef resource="org/apache/ivy/ant/antlib.xml" 
      uri="antlib:org.apache.ivy.ant"/> 
```

不需要类路径。

# javascript - javascript 正则表达式 钱

> ID：12690036
> 
> 赞同：0
> 
> 时间：2012-10-02T12:16:27.567
> 
> 标签：javascript, jquery, ajax, regex, json

我正在尝试删除从 json 提要中提取的货币价值的十进制值：

如果我喜欢：**150,000**我只想拥有**150**

这是我的代码：

```
$.getJSON('/static/js/datatest.json', function (result){

  $.each(result.events, function(i, item){
    $('#isoContainer').append('<h3>&pound;<span class="value">' + item.value.replace(/\.0{0,2}$/, "") + '</span></h3>');               
  });   
}); 
```

为什么这不起作用**`item.value.replace(/\,0{0,3}$/, "")`**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:18:25.263

因为你转义了逗号，所以正确的版本是

```
/,0{0,3}$/ 
```

或者如果它没有走到行尾，就

```
/,0{0,3}/ 
```

编辑：

如果在 this 之后可以有非零值，那么`,`这是正确的

```
/,\d{0,3}/ 
```

编辑2：

还要检查您使用的“文化”中的 , 表示小数位的开头，而不是千位分隔符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:18:37.337

您提供的代码`.`在正则表达式中使用 a，而不是`,`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:18:54.193

这有效：

```
"150,000".replace(/,(0|00|000)$/, "") // "150" 
```

$ 表示字符串的结尾，除此之外，它是简单的正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T12:27:05.853

你为什么不使用`parseInt()`？

```
> parseInt("150,000");
150
> parseInt("150.000");
150 
```

# scripting - (DOORS/DXL) 可以使用 DXL 打开新的模块窗口吗？

> ID：12690038
> 
> 赞同：1
> 
> 时间：2012-10-02T12:16:32.600
> 
> 标签：scripting, ibm-doors

是否可以使用 DXL 以编程方式在新窗口中打开模块？此外，是否可以以编程方式滚动到模块中定义的对象？

如果是其中任何一个，您能否指出我应该使用的功能或方法？

谢谢，菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:29:02.463

是的，你可以做这两个

```
Module m = read("/PROJECT/MODULE NAME", true)
Object o = object(THE_OBJECT_ID, m)
current = o
refresh m 
```

THE_OBJECT_ID 只是您希望关注的对象的编号。

如果您遇到任何问题，请告诉我。

# jquery-ui - jquery：切换具有平滑效果的 div

> ID：12690053
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:17:19.487
> 
> 标签：jquery-ui

我在用

```
$('.show_hide').click(function(){
    //$(".slidingDiv").slideToggle();
    $('#slidingDiv').fadeOut('500');
}); 
```

但它崩溃的 div 非常快

这是我的脚本：

```
<div class="search-form" id="search-form">
    <div class="slidingDiv" id="slidingDiv">
        Content goes here
    </div>
    <a class="show_hide" id="show_hide" style="display: inline;">Search slider</a>
</div> 
```

当我点击底部的灰色条时，我想用慢/平滑的效果切换**slidingDiv** div 。`Up/Down`我尝试了所有代码，但它切换得非常快，尽管我也设置了时间延迟。 ![在此处输入图像描述](../Images/b2bc11e27d8662a03e850d7809eb59df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:26:50.750

您可以使用整数值而不是字符串来表示毫秒。

尝试：

```
$('.show_hide').click(function(){
    //$(".slidingDiv").slideToggle();
    $('#slidingDiv').fadeOut(1000);
}); 
```

数字越大，效果越慢。

# ios - 分组表视图中的中间动画看起来很糟糕

> ID：12690062
> 
> 赞同：1
> 
> 时间：2012-10-02T12:17:36.893
> 
> 标签：ios, cocoa-touch, uitableview, core-animation

我发现了[类似的问题](https://stackoverflow.com/questions/1195540/grouped-uitableview-row-animation-quirks)，但没有答案（对不起，答案不起作用）。

所以我对表格进行了分组，我想动画内容更新而不是做`[tableView reloadData]`. 我通过使用这段代码来做到这一点：

```
// Data source already updated here, but reloadData wasn't called
[self.tableView beginUpdates];
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationMiddle];
[self.tableView endUpdates]; 
```

我上传了 2 个动画示例：

*   平原：[http](http://cl.ly/3u1M3l1w3V3J) ://cl.ly/3u1M3l1w3V3J （慢动作）
*   分组：[http](http://cl.ly/1O3Z2M280n0z) ://cl.ly/1O3Z2M280n0z （慢动作）

正如你所看到的，差异是巨大的。我根本不改变我的代码，只是改变故事板中的 tableView 样式。

难道没有其他方法可以继承 UITableView 和 UITableViewCell 并使用 CoreAnimation 实现我自己的动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:27:37.180

在为表格的行设置动画时，不需要使用 CoreAnimation 实现您自己的动画。

UITableView 支持比简单地重新加载一个部分更高级的动画，我建议你看看它们。

由于您正在对视频中的行进行洗牌，因此您应该看一下`moveRowAtIndexPath:toIndexPath:`（在 UITableView 上）。你把对它的调用放在`beginUpdates`and`endUpdates`中。

通过了解重新洗牌前后的顺序，您可以将所有行移动到新位置并让它们滑入正确的位置。

弄清楚每一行应该去哪里需要一些思考，但这比滚动完全自定义的解决方案要容易得多。

# spring - 如何从命令行调用 bean 的方法

> ID：12690067
> 
> 赞同：0
> 
> 时间：2012-10-02T12:17:44.593
> 
> 标签：spring, command-line

我已经定义了一个 Spring-bean：

```
<bean id="myBean" class="package.MyBean">
    <property name="name1" ref="otherBean" />
    <property name="name2" vallue="2" />
</bean> 
```

而且我知道，它实现了某种方法，例如`MyBean.execute()`.

我可以从命令行启动此方法吗？如何？（有点像`java -jar ... myBean.execute`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:35:13.200

只需在 main 方法中加载它，查找 bean 并以这种方式调用该方法：

```
public class Main {
    public static void main(String[] args) {
        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext("classpath:yourcontext.xml");
        ctx.registerShutdownHook();
        MyBean myBean = ctx.getBean("myBean", MyBean.class);
        myBean.execute();
    }
} 
```

# java - Java中的日期比较

> ID：12690069
> 
> 赞同：-4
> 
> 时间：2012-10-02T12:17:52.457
> 
> 标签：java, date

我有一个日期 [格式 - dd/mm/yyyy]。我需要将其与当前日期进行比较，以便执行此逻辑

```
if(end date is in the future) {
//logic
} else {
//logic
} 
```

我们可以在 JAVA 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:19:06.563

看起来您是从字符串开始的，因此您可以使用[SimpleDateFormat.parse](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)将字符串转换为日期。

然后你可以在 Date 类上使用[compareTo](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)函数来查看它是否是过去的。

类似下面的东西（我还没有编译这个......）

```
if (new SimpleDateFormat("dd/MM/yyy").parse(yourSring).compareTo(new Date()) > 0) {
   ...
} 
```

如果可能的话，我会一直使用 JodaTime 思想而不是 Java Date 和 Calendar 类。它更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:23:27.433

一般来说，使用[Joda Time](http://joda-time.sourceforge.net/)：

```
DateTime.parse("...").isAfterNow(); 
```

您可能希望传递适当的`DateTimeFormatter`，例如`DateTimeFormat.forPattern("d/M/y")`，作为第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:26:17.417

使用 compareto 方法比较两个日期。在这里查看[日期 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)

```
if(curreDate.compareTo(thisdate)>0) {
// do your logic
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T12:21:12.240

```
if(endDate.after(new Date())){} 
```

只是比较一个新的日期，它将被创建一个现在的日期时间。

# vb.net - 执行程序时安装 4.5 .Net Framework（如果尚未安装）

> ID：12690076
> 
> 赞同：0
> 
> 时间：2012-10-02T12:18:11.907
> 
> 标签：vb.net, visual-studio-2010, .net-4.5, prerequisites

让我们开始吧，有没有办法在运行程序时部署 4.5 .Net Framework？

应该添加一些背景信息...我需要一种压缩一堆 PDF 的方法。现在，我正在创建一个调用 7zip 的进程，但意识到该程序需要安装在将执行该程序的每台机器上，这不是一个理想的解决方案。因此，从我发布的上一个问题[ZipFuntion_Within_Visual_Studio](https://stackoverflow.com/questions/12629544/zip-function-within-visual-studio)中，我询问了如何做到这一点，理想的解决方案是使用[ZipClass](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)，它仅在 4.5 .Net Framework 上可用。

有没有办法检查它是否已安装，如果没有，在运行程序时安装在需要它的机器上？我也可以指先决条件吗？

# jquery - Jquery匹配（）IP地址？

> ID：12690078
> 
> 赞同：0
> 
> 时间：2012-10-02T12:18:13.400
> 
> 标签：jquery, regex, match

我正在使用 jquery 脚本来验证表单字段。这很好用，但我想更改一个字段的验证以检查 IP 地址。

我想使用的正则表达式是：

```
\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

如何修改以下内容以使用此功能？（这是验证电子邮件地址的方式）

```
jQuery("#Email").validate({
                expression: "if (VAL.match(/^[^\\W][a-zA-Z0-9\\_\\-\\.]+([a-zA-Z0-9\\_\\-\\.]+)*\\@[a-zA-Z0-9_]+(\\.[a-zA-Z0-9_]+)*\\.[a-zA-Z]{2,4}$/)) return true; else return false;",
                message: "Should be a valid Email id"
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:24:22.030

"\" 字符在 javascript 中被认为是转义字符，应该加倍，因此它被逐字解释为 "\" 字符。引号也必须转义，尽管我看到您没有引号。

应用于您的正则表达式，它将是：

```
\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b 
```

在您的代码的上下文中，那将是：

```
jQuery("#Email").validate({
    expression: "if (VAL.match(/^\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b$/)) return true; else return false;",
    message: "Should be a valid Email id"
 }); 
```

请注意，我在开头留下了“^”，在结尾留下了“$”，这意味着您希望整个字符串与我假设的正则表达式匹配。如果不是这种情况，您应该删除它们。我尚未测试该正则表达式是否符合您的要求，但如果不是，您应该能够应用上面编写的规则将其插入到上面编写的代码中。

**编辑：** 如果您希望进行更高级的检查，例如确定用户是否正在尝试 IP 但失败或者是否完全是其他东西，那么您可以修改表达式代码，如下所示：

```
function isValidInput(str) {
    if (str.match(/^\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b$/)) {
        return true; 
    } else if (str.match(/[0-9]+(\.[0-9]+){2,}/)) {
        return false;
    } else { 
        return true;
    }
}
jQuery("#Email").validate({
    expression: "isValidInput(VAL)",
    message: "Should be a valid Email id"
}); 
```

Notice that the expression now calls existing function "isValidInput" and consequently the code is no longer an eval string, so all escapes have been removed. The 2nd match checks for `<number>.<number>.<number>+` in an attempt to catch someone attempting to insert a valid IP (but apparently not doing a very good job of it). Hope that helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:22:46.093

假设正则表达式适用于 IP 地址，并假设您输入的 IP 地址是真的`id="Email"`，这应该有效：

```
jQuery("#Email").validate({
    expression: "return (VAL.match(/^[^\\W][a-zA-Z0-9\\_\\-\\.]+([a-zA-Z0-9\\_\\-\\.]+)*\\@[a-zA-Z0-9_]+(\\.[a-zA-Z0-9_]+)*\\.[a-zA-Z]{2,4}$/));",
    message: "Should be a valid Email id"
}); 
```

# ios - 并行运行 App Store 和 Ad-Hoc 构建

> ID：12690080
> 
> 赞同：0
> 
> 时间：2012-10-02T12:18:15.097
> 
> 标签：ios, provisioning-profile

我希望我的测试人员能够在同一设备上拥有我的应用程序的 App Store 和 Ad-Hoc 版本。该应用程序需要一个明确的应用程序 ID，这反过来意味着捆绑 ID 也必须是固定的。（即，如果我只是将“-test”附加到它，签名将不起作用。）我是否正确地假设我必须创建一个单独的 App ID（例如，“com.mycompany.myapp-test”）来实现这一点？还是有其他方法？

归档应用程序时，Xcode 最初使用 App Store 配置文件，因为这是“分发”构建配置设置的内容。当我在管理器中单击“分发...”并选择“保存以供企业或临时部署”时，随后会要求我选择代码签名身份。在此处选择 Ad-Hoc 配置文件的身份是否会从存档中删除先前应用的分发配置文件并使用 Ad-Hoc 配置文件重新签名？或者我是否必须在创建存档时选择正确的配置文件，从而为 App Store 和 Ad-Hoc 分发保留单独的存档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:21:06.950

应用程序的 Bundle ID 唯一地标识它。在同一部 iPhone 上只能安装一个具有给定 BundleID 的应用程序，因为具有相同 BundleID 的两个应用程序被认为是相同的应用程序（最新版本的应用程序将替换旧的应用程序）。

所以是的，要在同一设备上同时拥有同一应用程序的 AppStore 和 AdHoc 版本，您的应用程序（AppStore 和 AdHoc）的每个变体都有自己的 Bundle ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:21:26.343

> 我是否正确地假设我必须创建一个单独的 App ID（例如“com.mycompany.myapp-test”）来实现这一点？

是的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:27:54.977

您可以使用通配符代替“com.mycompany. ***** ”，然后您可以使用 com.mycompany.whatEverYouWant

这很适合调试各种版本，但通配符无法使用应用内购买、游戏中心和推送通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:16:50.393

回答我的问题的第二部分：如果我在导出过程中不退出存档，（即使它已经使用 Ad-Hoc 分发配置文件签名），iOS 拒绝安装应用程序（说类似“错误：目前无法安装该应用程序。”）。但是，它确实安装了嵌入式 Ad-Hoc 分发配置文件！？

# ruby-on-rails - 在 Rails 中安装 json 1.7.5 时出错

> ID：12690081
> 
> 赞同：4
> 
> 时间：2012-10-02T12:18:20.303
> 
> 标签：ruby-on-rails, ruby, json, aptana

我正在尝试使用 gem bundle install 安装最新版本的 json 并导致错误。我正在尝试在 aptana studio 3 工作区中安装。

我收到以下错误 - 任何人都可以对这个问题有所了解 -

使用原生扩展安装 json (1.7.5) Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension。

安装 json (1.7.5) 时出错，Bundler 无法继续。`gem install json -v '1.7.5'`在捆绑之前确保成功。

看到这个错误后，我只运行了 install json 并且运行良好，但 json 似乎没有安装。

——桑德什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:33:39.767

在 ruby​​ 1.9.3 上的新 rails 3.2.9 应用程序上创建或执行捆绑安装时，我遇到了相同的 json 1.7.5 错误。这对我有用：

1.  获取最新版本的 Xcode（在我的例子中是 4.5.2）。打开 Xcode。转到首选项。转到下载，然后单击命令行工具上的安装。
2.  在你的终端做：`rvm reinstall 1.9.3`
3.  创建你的新 Rails 应用程序，你会得到相同的 json 1.7.5 错误，但没关系。然后打开应用程序并转到您的 Gemfile。在文件顶部，更改`source 'https://rubygems.org'`为`source 'http://rubygems.org'`
4.  跑`gem install json -v '1.7.5'`
5.  跑`bundle install`

这应该有效，就像我的情况一样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:36:56.853

我忘记了对不起。请检查以下问题：

[当我尝试 sudo gem install json 我收到以下错误](https://stackoverflow.com/questions/761521/when-i-try-sudo-gem-install-json-i-get-the-following-error)

[为什么 bundler 不在 OS X 10.8 上安装 json 1.7.4 gem？](https://stackoverflow.com/questions/11703030/why-wont-bundler-install-the-json-1-7-4-gem-on-os-x-10-8)

可能您需要安装 XCode 命令行工具。

# amazon-s3 - 何时创建 S3 存储桶

> ID：12690084
> 
> 赞同：2
> 
> 时间：2012-10-02T12:18:26.033
> 
> 标签：amazon-s3

我正在为我的客户端设置一个允许用户上传一两个视频的系统。这些视频将存储在我以前没有使用过的 Amazon S3 上。我不确定桶，以及它们代表什么。您认为我的应用程序只有一个存储桶，每个用户一个存储桶还是每个文件一个存储桶？

如果我只有一个桶，大概我必须有很长的、不合逻辑的文件名来防止文件名冲突。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T21:12:53.573

您可以在存储桶中存储的对象数量没有限制，因此通常每个应用程序都有一个存储桶，甚至跨多个应用程序。存储桶名称在 S3 中必须是全局唯一的，因此管理每个对象的存储桶肯定是不可能的。如果您有多个用户，每个用户的存储桶也将很困难。

有关存储桶的更多背景信息，您可以尝试阅读[使用 Amazon S3 存储桶](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingBucket.html)

您的应用程序应该为要添加到存储桶的对象生成唯一键。尽量避免使用数字升序的 id，因为它们被认为是低效的。简单地反转数字 id 通常可以生成有效的对象键。有关更详细的说明，请参阅[Amazon S3 性能提示和技巧。](http://aws.typepad.com/aws/2012/03/amazon-s3-performance-tips-tricks-seattle-hiring-event.html)

# bash - shell脚本：检查目录名并转换为小写

> ID：12690085
> 
> 赞同：4
> 
> 时间：2012-10-02T12:18:29.297
> 
> 标签：bash, shell, awk

我希望我的 bash 脚本检查运行它的目录的名称。就像是：

```
#!/bin/bash

path=eval 'pwd'

dirname=eval 'basename $path' 
```

但它不起作用：我明白了

```
./foo.sh: line 5: basename $path: command not found 
```

我该如何解决？此外，一旦我让 dirname 包含正确的 dirname，我想将其转换为小写，以进行测试。我可以使用 awk 在命令行上执行此操作：

```
echo $dirname | awk '{print tolower($0)}' 
```

但是如何将返回值捕获到变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:21:18.317

为什么不使用：

```
#!/bin/bash

path=`pwd`
dirname=`basename $path | awk '{print tolower($0)}'` 
```

或者，如果您想将其作为一个班轮：

```
dirname=`pwd | xargs basename | awk '{print tolower($0)}'` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:15:34.850

表格

```
x=y cmd 
```

意味着临时将环境变量设置`x`为 value`y`然后 run `cmd`，这就是这些行的解释方式：

```
path=eval 'pwd'
dirname=eval 'basename $path' 
```

也就是说，它们根本没有按照您的预期做，而是将环境变量设置为文字值`eval`，然后运行（或找不到）命令。正如其他人所说，将命令结果插入字符串的方法是将其放入`$(...)`（首选）或``...``（旧版）中。而且，作为一般规则，将它们包含在双引号中更安全（因为将任何插值引用包含在引号中更安全）。

```
path="$(pwd)"
dirname="$(basename "$path")" 
```

（从技术上讲，在这种情况下，外部引号并不是绝对必要的。但是，我想说这仍然是一个好习惯。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T12:22:55.960

您可以将其重写为

```
dirname=eval "basename $path" 
```

使用单引号，您不会获得 shell 扩展，但您希望`$path`得到扩展。

顺便说一句：我建议使用

```
path=$(basename $path) 
```

如果你做类似的事情，它会更通用，可读性更好

```
path=$(basename $(pwd)) 
```

或得到小写结果

```
path=$(basename $(pwd) | awk '{print tolower($0)}') 
```

或者

```
path=$(basename $(pwd) | tr 'A-Z' 'a-z' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T12:22:43.550

```
B=$(echo "Some text that has CAPITAL letters " | awk '{print tolower($0)}') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-26T20:27:02.593

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T12:28:20.233

eval 执行传递给它的命令，但它只返回命令退出状态码，所以你不能真正在 set 运算符中使用它。将命令嵌入到集合运算符中的方法是使用右单引号或`$()`

所以脚本将如下所示：

```
#!/bin/bash

curr_path=$(pwd)
echo $curr_path
curr_dir=$(basename $curr_path)
echo $curr_dir
echo $curr_dir | awk '{print tolower($0)}' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T13:22:10.903

您的代码不起作用，因为您使用单引号而不是双引号。单引号可防止变量扩展，因此`$path`不会扩展为您要使用的路径，而是按原样使用，就好像它是一个字符串一样。

由于同样的原因，您的 awk 调用也不起作用。

尽管您可以解决用双引号替换单引号的问题，如下所示：

```
#!/bin/bash

path=eval "pwd"
dirname=eval "basename $path" 
```

我建议改用重音（`). There's no reason to use`在这种情况下为 eval`。另外，您还可以使用它来收集您感兴趣的返回值：

```
#!/bin/bash

path=`pwd`
dirname=`basename $path`
variable=`echo $dirname | awk "{print tolower($0)}"` 
```

# foursquare - 我们是否需要定期调用foursquare Venue Categories API？

> ID：12690091
> 
> 赞同：0
> 
> 时间：2012-10-02T12:18:56.327
> 
> 标签：foursquare

请让我知道我们是否必须 定期调用foursquare [Venue Categories API](https://api.foursquare.com/v2/venues/categories)

或者我们只需要调用一次，以便我们可以将类别列表存储在数据库中并使用它们来搜索项目

如果在上述情况下类别 ID 没有发生变化，它对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:56:48.803

**是的，您应该定期调用类别端点**，但该间隔可能很大。

他们对类别进行更改——我们大约每月调用一次（实际上是手动），以更新我们缓存在我们这边的层次结构。

我们没有看到类别 ID 发生变化，但随着时间的推移会添加更多类别，并且可能会被删除（不太确定是否已删除）

这种情况很少发生，但是当我们可以识别我们无法识别的类别 id 时有时会出现错误，然后我们需要刷新类别列表并重建我们的缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:24:29.100

从 API 文档（[https://developer.foursquare.com/docs/venues/categories](https://developer.foursquare.com/docs/venues/categories)）：

“...请在每个会话中仅下载此列表一次，但也要避免将此数据缓存超过一周以避免过时的信息。”

因此，您可以将列表存储在数据库中，但您应该至少每周刷新一次此数据。

# java - 在双面模式下使用 Java 打印横向文档

> ID：12690097
> 
> 赞同：4
> 
> 时间：2012-10-02T12:19:12.470
> 
> 标签：java, printing, jasper-reports, duplex

我有一份要在双面打印机上以横向模式打印的*JasperReports报告。*在这一点上，我必须支持 PCL5 和 PCL6 打印驱动程序。

在互联网上搜索，我发现了以下代码片段来完成这项工作：

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.print.Book;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;

import javax.print.PrintService;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
import javax.print.attribute.standard.OrientationRequested;
import javax.print.attribute.standard.Sides;

public class PrintingTest {

    public static void main(String[] args) {
        try {
            //This are for configuration purpose
            String orientation = "LANDSCAPE";
            String duplexMode = "LONG_EDGE";

            int pageOrientation = 0;

            PrintRequestAttributeSet atr = new HashPrintRequestAttributeSet();
            if ("Landscape".equals(orientation)) {

                atr.add(OrientationRequested.LANDSCAPE);
                pageOrientation = PageFormat.LANDSCAPE;

            } else if ("Reverse_Landscape".equals(orientation)) {

                atr.add(OrientationRequested.REVERSE_LANDSCAPE);
                pageOrientation = PageFormat.REVERSE_LANDSCAPE;

            } else {
                atr.add(OrientationRequested.PORTRAIT);
                pageOrientation = PageFormat.PORTRAIT;
            }

            if ("LONG_EDGE".equals(duplexMode)) {
                atr.add(Sides.TWO_SIDED_LONG_EDGE);
            } else {
                atr.add(Sides.TWO_SIDED_SHORT_EDGE);
            }

            //Printing to the default printer
            PrintService printer = javax.print.PrintServiceLookup
                    .lookupDefaultPrintService();
            //Creating the printing job
            PrinterJob printJob = PrinterJob.getPrinterJob();

            printJob.setPrintService(printer);

            Book book = new Book();
            PageFormat pageFormat = printJob.defaultPage();

            pageFormat.setOrientation(pageOrientation);

            // Appending a exampledocument to the book
            book.append(new ExampleDocument(), pageFormat);

            // Appending another exampledocument to the book
            book.append(new ExampleDocument(), pageFormat);

            // Setting the Pageable to the printjob
            printJob.setPageable(book);

            try {
                // Here a could show the print dialog
                // printJob.printDialog(atr);

                // Here I pass the previous defined attributes
                printJob.print(atr);
            } catch (Exception PrintException) {
                PrintException.printStackTrace();
            }

        } catch (PrinterException ex) {
            ex.printStackTrace();
        }
    }

    public static final int MARGIN_SIZE = 72;

    private static class ExampleDocument implements Printable {

        public int print(Graphics g, PageFormat pageFormat, int page) {
            Graphics2D g2d = (Graphics2D) g;
            g2d.translate(pageFormat.getImageableX(),
                    pageFormat.getImageableY());
            // Only on the first two documents...
            if (page <= 1) {
                // Prints using one inch margin
                g2d.drawString("Printing page " + page + " - duplex...",
                        MARGIN_SIZE, MARGIN_SIZE);
                return (PAGE_EXISTS);
            }

            return (NO_SUCH_PAGE);
        }
    }
} 
```

这在**PCL6**上运行良好，但是在**PCL5**上进行测试时，我注意到 LONG_EDGE 和 SHORT_EDGE 规则被简单地忽略了。并且在这两种情况下，作业都作为**LONG_EDGE**发送。这不会是一个问题，除了*Java AWT*打印 API 通过将所有页面逆时针旋转 90º 来解决横向打印，从而造成它是在**SHORT_EDGE**模式下打印的印象。

Obs：通过使用*SWT API* ，我能够正确打印**SHORT_EDGE**和**LONG_EDGE**两种配置，纵向和横向。但我无法在兼容*SWT的打印请求中转换碧玉打印请求。*

 **我的问题是：有没有人遇到过这种情况？给出了哪种解决方案？

根据我的观察，我发现了这些可能的解决方案：

1.  与其让*AWT*翻页并发送纵向打印请求，不如强制它作为横向打印请求发送；

2.  当页面处于横向模式时，找到一种方法来反转**LONG_EDGE**和**SHORT_EDGE**命令。请注意，对于这一点，我有义务纠正两者都被视为**LONG_EDGE**请求的问题。

3.  将*JasperReports*转换为使用*SWT*打印*API*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T12:12:59.760

不确定它是否有帮助，但我在 6 年前遇到了这个问题，唯一的解决方案是使用打印机的 (Xerox) 功能通过 .xpf 文件接收打印指令。例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xpif SYSTEM "xpif-v02012.dtd">
<xpif cpss-version="2.01" version="1.0" xml:lang="en">
<xpif-operation-attributes>
    <job-name syntax="name" xml:lang="en" xml:space="preserve">job name</job-name>
    <requesting-user-name syntax="name" xml:space="preserve">domain user</requesting-user-name>
    </xpif-operation-attributes>
    <job-template-attributes>
        <copies syntax="integer">1</copies>
        <finishings syntax="1setOf">
        <value syntax="enum">3</value>
    </finishings>
    <job-recipient-name syntax="name" xml:lang="en-US" xml:space="preserve">domain user</job-recipient-name>
    <job-save-disposition syntax="collection">
        <save-disposition syntax="keyword">none</save-disposition>
    </job-save-disposition>
    <media-col syntax="collection">
        <media-type syntax="keyword">stationery</media-type>
        <media-hole-count syntax="integer">0</media-hole-count>
        <media-color syntax="keyword">blue</media-color>
        <media-size syntax="collection">
            <x-dimension syntax="integer">21000</x-dimension>
            <y-dimension syntax="integer">29700</y-dimension>
        </media-size>
    </media-col>
    <orientation-requested syntax="enum">3</orientation-requested>
    <sheet-collate syntax="keyword">collated</sheet-collate>
    <sides syntax="keyword">one-sided</sides>
    <x-side1-image-shift syntax="integer">0</x-side1-image-shift>
    <y-side1-image-shift syntax="integer">0</y-side1-image-shift>
</job-template-attributes>
</xpif> 
```

它与需要打印的文件一起发送到打印机。**

# android - JSONException：在字符 0 处输入结束

> ID：12690100
> 
> 赞同：1
> 
> 时间：2012-10-02T12:19:32.380
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

> **可能重复：**
> [Json 错误“org.json.JSONException: End of input at character 0 of”](https://stackoverflow.com/questions/8466915/json-error-org-json-jsonexception-end-of-input-at-character-0-of)

每当我调用 facebook api 时，有时我会得到这样的响应： `10-02 17:30:37.295: D/FACEBOOK(452): JSONException: End of input at character 0`. 当我再次执行它似乎工作。但首先为什么会发生这种情况。

# css - css - 如何确定特定 css 规则被覆盖的原因

> ID：12690102
> 
> 赞同：1
> 
> 时间：2012-10-02T12:19:38.473
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试解决 css 问题（使用 bootstrap.css 顺便说一句）。我创建了自己的自定义 css 文件，以便可以添加到/或在某些情况下替换引导规则。

我一直在使用 Firefox 中的“检查”工具 - 在 Web 开发人员选项下。我可以看到我认为应该应用于我的页面的样式已被划掉。我刚刚在 stackoverflow 上的另一篇文章中读到，这意味着样式已被覆盖。但我不明白为什么这会被覆盖或如何进一步解决这个问题。

css 规则本身是一个媒体查询 - 我正在尝试检查浏览器的大小，然后根据它的大小更改图像。我如何更改我的浏览器大小？我正在使用 Firefox 的响应式设计视图工具，而不是手动操作。

这是被覆盖的规则：

```
@media (max-width: 360px) {
.hero-unit h1 {
  margin-bottom: 0;
  font-size: 0.2em;
  line-height: 1em;
  letter-spacing: -5px;
  color: inherit;
}
.hero-unit p {
  font-size: 0.2em;
  font-weight: 50;
  line-height: 1em;
  color: inherit;
}   
.hero-unit {
  background: url("../img/1.jpg");
  padding: 1em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
}   
} 
```

这是正在应用的一个：

```
@media (max-width: 979px){
.hero-unit h1 {
  margin-bottom: 0;
  font-size: 2.0em;
  line-height: 1.5;
  letter-spacing: -1px;
  color: inherit;
}
.hero-unit p {
  font-size: 1.2em;
  font-weight: 20;
  line-height: 1.5em;
  color: inherit;
}   
.btn-large {
  padding: 6px 10px;
  font-size: 11px;
  line-height: normal;
  -webkit-border-radius: 5px;
     -moz-border-radius: 5px;
          border-radius: 5px;
}   
.hero-unit {
  padding: 1em;
  margin-bottom: 2em;
  background-color: #eeeeee;
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
}
h2 {
  font-size: 1.5em;
  line-height: 2em;
}   

 } 
```

你能告诉我哪里出错了吗？谢谢。

**编辑1：**

这是应该应用此 css 的实际 html：

```
 <div class="container"> 
    <div class="span8">
          <div class="hero-unit">
            <h1>&nbsp;</h1>
            <h1>&nbsp;</h1>
            <h1>&nbsp;</h1>
            <h1>&nbsp;</h1>
            <h1>&nbsp;</h1>
          </div>

           <div class="row-fluid">
                <div class="span4">
                    <h2>list 1 </h2>
                    <p>list</p>
                    <p><a class="btn" href="<?php echo base_url();?>index.php/list1/"><i class="icon-list-alt"></i> View details &raquo;</a></p>
               </div><!--/span-->

                <div class="span4">
                    <h2>list2</h2>
                    <p>some other list</p>
                    <p><a class="btn" href="<?php echo base_url();?>index.php/list2/"><i class="icon-globe"></i> View details &raquo;</a></p>
               </div><!--/span-->

                <div class="span4">
                    <h2>routes</h2>
                    <p>list of all routes</p>
                    <p><a class="btn" href="<?php echo base_url();?>index.php/routes/"><i class="icon-globe"></i> View details &raquo;</a></p>
                </div><!--/span-->          
            </div>      
        </div> 
```

它是在 CSS 中定义了背景图像的英雄单元。我不确定这是否是最好的方法，但在大多数情况下，它似乎是有效的。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:51:15.143

如果浏览器的宽度是 360px 并且`max-width: 979px`低于`max-width: 360px`CSS 中的 ，它将优先，因为两者都适用于 360px 的浏览器宽度。

移动`max-width: 360px`下面或设置一个`@media (max-width: 979px) and (min-width: 361px)`.

此外，这是一篇关于 CSS 优先级的好书，[http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

# jquery - 将悬停状态添加到图像的一小部分

> ID：12690104
> 
> 赞同：2
> 
> 时间：2012-10-02T12:19:41.003
> 
> 标签：jquery, html, css

下图是显示在常规 html 文件中的平面图。它只是一张大图像，在应用样式之前应该将编号元素块像素完美地放置在其上。

编号框需要有一个悬停状态，将其背景颜色变为橙色，并将其编号变为白色。

我想知道是否有可能实现这一目标而不必诉诸闪存。是吗？

![平面图](../Images/f461b1944e8413c1b6db79b7a254f661.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:20:32.140

这是完全可能的。通常 HTML 中的元素定位在“流”中，但您可以使用`absolute`定位将它们取出。这允许您为任何`top`, `left`, `bottom`,`right`属性提供基于百分比或像素的值，并且元素将定位在该位置偏移到它们最近的祖先元素的位置，位置设置为`relative`,`absolute`或`fixed`。

这是一个简化的示例，其中包含您图像中的几个房间。您应该能够通过复制和粘贴来扩展它，然后将新房间添加到标记中，并通过`#roomXXXX`在 CSS 中提供新的基于 ID 的规则来更改它们的形状和位置。

[http://jsfiddle.net/barney/kBvsr/](http://jsfiddle.net/barney/kBvsr/)

**编辑：**修改示例以允许在 IE6 中悬停，正如@Marcio 所指出的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:22:54.343

为所有带数字的框定义类名并使用CSS伪类如下

```
 .classname:hover
             {
            background-color:color;
              font-color:color;
               } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:30:20.117

如果整个事物（包括框和数字）都是图像，则无法使用 CSS 使用悬停属性并尝试更改颜色来更改图像本身。您可以覆盖 s 并让它们出现在上方，或者您可以使用图像覆盖每个框的另一个版本。使用 Photoshop/Image Ready，您可以分割图像并创建悬停效果；将整个内容导出为可用的网页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:18:24.383

我可以想到几种方法来做到这一点。不过，它们都依赖于 html5。我会使用放置在图像前面的透明画布。我的自然倾向是用彩色矩形覆盖图像，尽管直接访问图像中的像素并创建悬停区域的准确“负片”并不太麻烦。

在询问有关在悬停时突出显示 imgmap 区域标签的问题之后，我提出了以下解决方案。您可以单击以在右侧图像上定义点（对于有用的形状最少 3 个），单击添加多边形，然后将相同区域悬停在左侧图像上。

请更多地将其视为突出图像部分的示例，而不是如何制作图像地图区域定义工具.. :)

哦，在我忘记之前-您可以在开发人员模式下查看页面以复制创建的区域标签-我真的应该将它们复制到文本区域中以便于复制粘贴..

代码使用 Chrome 进行测试。

```
<!DOCTYPE html>
<html>
<head>
<script>
var canvas, hdc, markerImg;
var curPoints;

function byId(e){return document.getElementById(e);}

function canvasClick2(e)
{
    e = e || event;

    var x, y;

    x = e.offsetX;
    y = e.offsetY;

    curPoints.push(x);
    curPoints.push(y);

    hdc.drawImage(markerImg, x- markerImg.width/2, y-markerImg.height/2);

    n = curPoints.length;
    var str = ''
    for (i=0; i<n; i++)
    {
        if (i != 0)
            str += ', ';
        str += curPoints[i];
    }
    byId('coords').innerHTML = str;
}

function myInit()
{
    curPoints = new Array();
    canvas = byId('canvas1');
    hdc = canvas.getContext('2d');
    markerImg = new Image();

    // just a 5x5 pixel +
    markerImg.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2NkQID/QCYjiAsmoABFEMRBAThVYmgHAAhoBQWHhfyYAAAAAElFTkSuQmCC";

    canvas.addEventListener('click', canvasClick2, false);

    var img = byId('img1');
    canvas.setAttribute('width', img.width);
    canvas.setAttribute('height', img.height);
//  canvas.style.backgroundImage = 'url(img/gladiators.png)';
    canvas.style.backgroundImage = 'url(http://i.stack.imgur.com/Rw5pL.png)';

    var x,y, w,h;

    // get it's position and width+height
    x = img.offsetLeft;
    y = img.offsetTop;
    w = img.clientWidth;
    h = img.clientHeight;

    // move the canvas, so it's contained by the same parent as the image
    var imgParent = img.parentNode;
    var can = byId('canvas2');
    imgParent.appendChild(can);

    // place the canvas in front of the image
    can.style.zIndex = 1;

    // position it over the image
    can.style.left = x+'px';
    can.style.top = y+'px';

    // make same size as the image
    can.setAttribute('width', w+'px');
    can.setAttribute('height', h+'px');

    var ctx = can.getContext('2d');
    ctx.lineWidth = 3;
    ctx.strokeStyle = 'red';
}

function myClear()
{
    hdc.clearRect(0,0, canvas.width, canvas.height);
    curPoints.length = 0;
    byId('coords').innerHTML = '';
}

function myAddShapePoly()
{
    var src, tgt = byId('imgMap1'), coordStr;

    src = byId('coords');
    coordStr = src.innerHTML;

    var newArea = document.createElement('area');
    newArea.setAttribute('shape', 'polygon');
    newArea.setAttribute('coords', coordStr);
    newArea.setAttribute('title', 'polygon');

    newArea.setAttribute('onclick', 'alert("area clicked");');

    newArea.onmouseout = myLeave;
    newArea.onmouseover = function(){myHover2(this);};

    tgt.appendChild(newArea);
    myClear();
}

function myHover2(element)
{
    var hoveredElement = element;
    var coordStr = element.getAttribute('coords');
    var areaType = element.getAttribute('shape');

    switch (areaType)
    {
        case 'polygon':
        case 'poly':
            fillPoly(coordStr);
            break;

        case 'rect':
            fillRect(coordStr);
    }
//  byId('img1').style.cursor = 'pointer';
}

function myLeave()
{
    var canvas = byId('canvas2');
    var hdc = canvas.getContext('2d');
    hdc.clearRect(0, 0, canvas.width, canvas.height);
//  byId('img1').style.cursor = '';
}

function fillRect(coOrdStr)
{
    var canvas = byId('canvas2');
    var hdc = canvas.getContext('2d');

    var mCoords = coOrdStr.split(',');
    var top, left, bot, right;
    left = mCoords[0];
    top = mCoords[1];
    right = mCoords[2];
    bot = mCoords[3];
    var canvas = byId('myCanvas');
    var tmp = hdc.fillStyle;

    hdc.fillStyle = "rgba(255,0,0,0.3);";
    hdc.fillRect(left,top,right-left,bot-top);
    hdc.strokeRect(left,top,right-left,bot-top);
    hdc.fillStyle = tmp;
}
// takes a string that contains coords eg - "227,307,261,309, 339,354, 328,371, 240,331"
// draws a line from each co-ord pair to the next - assumes starting point needs to be repeated as ending point.
function fillPoly(coOrdStr)
{
    var mCoords = coOrdStr.split(',');
    var i, n;
    n = mCoords.length;
    var canvas = byId('canvas2');
    var hdc = canvas.getContext('2d');

    hdc.beginPath();
    hdc.moveTo(mCoords[0], mCoords[1]);
    for (i=2; i<n; i+=2)
    {
        hdc.lineTo(mCoords[i], mCoords[i+1]);
    }
    hdc.lineTo(mCoords[0], mCoords[1]);

    tmp=hdc.fillStyle;
    hdc.fillStyle = "rgba(255,0,0,0.3);";
    hdc.stroke();
    hdc.fill();
    hdc.fillStyle = tmp;
}

</script>
<style>
body
{
    background-color: gray;
}

#canvas1
{
    cursor: crosshair;
}
#canvas2
{
    pointer-events: none;       /* make the canvas transparent to the mouse - needed since canvas is position infront of image */
    position: absolute;
}
.heading
{
    font-weight: bold;
    font-size: 24px;
}
</style>
</head>
<body onload='myInit();'>
    <div align='center'>
        <img src='http://i.stack.imgur.com/Rw5pL.png' id='img1' usemap='#imgMap1'/>
            <map name='imgMap1' id='imgMap1'>
            </map>
        <canvas id='canvas2'></canvas>

        <canvas id='canvas1' width='200' height='200'></canvas>
        <br>
        <input type='button' onclick='myClear();' value='clear'/>
        <input type='button' onclick='myAddShapePoly();' value='addPolygon'/>
        <br>
        <span id='coords'></span>
    </div>
</body>
</html> 
```

# excel - Excel电子表格中的简单搜索算法

> ID：12690106
> 
> 赞同：1
> 
> 时间：2012-10-02T12:19:45.587
> 
> 标签：excel, vba

我有一张全是 wights 的桌子，行中的第一个单元格是价格，列标题是从 1 到 10 的数字 .. 像这样：

```
 1  2  3  4  5  6  ..
1$ 1g 9g 7g

2$ 4g 6g 8g 0g 0g 3g

3$ 4g 6g 8g 0g 0g 3g

4$ 4g 6g 8g 0g 0g 3g

.
. 
```

我需要在excel中的这张表中编写一个小算法，它需要2个参数（param1，param2）param1来过滤一些列，param 2来过滤一些行，然后选择所需的适当权重。我不是在问算法，但我问我如何在excel中做到这一点，我的办公技能不存在，所以如果我需要宏，你能给我一个很好的链接，解释宏指令读取单元格范围和类似的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:39:35.000

您不需要 VBA，但可以使用公式：

```
=INDEX($B$2:$G$5,MATCH(H6,INDEX(A2:A5,1,),0),MATCH(I6,INDEX(B1:H1,1,),0)) 
```

该`INDEX`函数将接受输入`INDEX(Range, row, column)`并返回值。所以我们要找到输入的行和列，这是通过`MATCH`.

```
MATCH(H6,INDEX(A2:A5,1,),0) 
```

查找包含的值`H6`并给出范围内的索引`A2:A5.`所以，如果包含的值`H6`是`3$`这个函数将返回3，表明你的目标值在第三行。

同样，对于以下

```
MATCH(I6,INDEX(B1:H1,1,),0) 
```

您正在寻找一个值，`I6`但现在正在搜索列标题。因此，如果`I6`= 4，这将返回值 4（因为它是第四列）。

把它放在一起，你现在有一个函数是

```
=INDEX($B$2:$G$5, 3, 4) 
```

它为您提供表中 Row = 3 和 Column = 4 中的值，由 给出`$B$2:$G$5`，或您的 lokup 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:29:25.407

这是一个非常全面的开始使用宏的链接：http: [//dmcritchie.mvps.org/excel/getstarted.htm](http://dmcritchie.mvps.org/excel/getstarted.htm)

如果您的过程将非常有条件，那么制作宏可能会更好，并且知道如何编写宏将是一项非常有价值的技能。

一旦你尝试了一些事情并编写了一些代码，你可以在这里发布它，我们可以在它不起作用的领域为你提供帮助，或者如果你不知道如何在你可以询问的领域开始另一个适当的问题。

# javascript - 克隆对象没有引用 javascript

> ID：12690107
> 
> 赞同：208
> 
> 时间：2012-10-02T12:19:53.537
> 
> 标签：javascript, oop, object

我有一个包含大量数据的大对象。我想在其他变量中克隆它。当我设置实例 B 的某些参数时，在原始对象中具有相同的结果：

```
var obj = {a: 25, b: 50, c: 75};
var A = obj;
var B = obj;

A.a = 30;
B.a = 40;

alert(obj.a + " " + A.a + " " + B.a); // 40 40 40 
```

我的输出应该是 25 30 40。有什么想法吗？

**编辑**

感谢大家。我更改了dystroy的代码，这是我的结果：

```
Object.prototype.clone = Array.prototype.clone = function()
{
    if (Object.prototype.toString.call(this) === '[object Array]')
    {
        var clone = [];
        for (var i=0; i<this.length; i++)
            clone[i] = this[i].clone();

        return clone;
    } 
    else if (typeof(this)=="object")
    {
        var clone = {};
        for (var prop in this)
            if (this.hasOwnProperty(prop))
                clone[prop] = this[prop].clone();

        return clone;
    }
    else
        return this;
}

var obj = {a: 25, b: 50, c: 75};
var A = obj.clone();
var B = obj.clone();
A.a = 30;
B.a = 40;
alert(obj.a + " " + A.a + " " + B.a);

var arr = [25, 50, 75];
var C = arr.clone();
var D = arr.clone();
C[0] = 30;
D[0] = 40;
alert(arr[0] + " " + C[0] + " " + D[0]); 
```

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-10-02T12:23:56.137

如果您使用语句为右侧的对象`=`赋值，则javascript不会复制而是引用该对象。`var`

剧透：使用`JSON.parse(JSON.stringify(obj))`可能有效但代价高昂，并且可能会抛出`TypeError`一个

```
const a = {};
const b = { a };
a.b = b;
const clone = JSON.parse(JSON.stringify(a));
/* Throws
Uncaught TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'Object'
    |     property 'b' -> object with constructor 'Object'
    --- property 'a' closes the circle
    at JSON.stringify (<anonymous>)
    at <anonymous>:4:6
*/ 
```

从 es2015 开始，如果您想要一个浅拷贝（克隆对象，但在内部结构中保留深层引用），您可以使用解构：

```
const obj = { foo: { bar: "baz" } };
const shallowClone = { ...obj }; 
```

`shallowClone`是一个新对象，但`shallowClone.foo`包含对与 相同的对象的引用`obj.foo`。

如果您无权访问扩展运算符，则可以使用[lodash](https://lodash.com/)的方法，该方法也是如此。`clone`

```
var obj = {a: 25, b: 50, c: 75};
var A = _.clone(obj); 
```

或者[lodash](https://lodash.com/)的`cloneDeep`方法，如果你的对象有多个对象级别

```
var obj = {a: 25, b: {a: 1, b: 2}, c: 75};
var A = _.cloneDeep(obj); 
```

或者[lodash](https://lodash.com/)的`merge`方法，如果你的意思是扩展源对象

```
var obj = {a: 25, b: {a: 1, b: 2}, c: 75};
var A = _.merge({}, obj, {newkey: "newvalue"}); 
```

或者你可以使用 jQuerys`extend`方法：

```
var obj = {a: 25, b: 50, c: 75};
var A = $.extend(true,{},obj); 
```

这是[jQuery](https://jquery.com/) 1.11 扩展方法的源代码：

```
jQuery.extend = jQuery.fn.extend = function() {
    var src, copyIsArray, copy, name, options, clone,
        target = arguments[0] || {},
        i = 1,
        length = arguments.length,
        deep = false;

    // Handle a deep copy situation
    if ( typeof target === "boolean" ) {
        deep = target;

        // skip the boolean and the target
        target = arguments[ i ] || {};
        i++;
    }

    // Handle case when target is a string or something (possible in deep copy)
    if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
        target = {};
    }

    // extend jQuery itself if only one argument is passed
    if ( i === length ) {
        target = this;
        i--;
    }

    for ( ; i < length; i++ ) {
        // Only deal with non-null/undefined values
        if ( (options = arguments[ i ]) != null ) {
            // Extend the base object
            for ( name in options ) {
                src = target[ name ];
                copy = options[ name ];

                // Prevent never-ending loop
                if ( target === copy ) {
                    continue;
                }

                // Recurse if we're merging plain objects or arrays
                if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
                    if ( copyIsArray ) {
                        copyIsArray = false;
                        clone = src && jQuery.isArray(src) ? src : [];

                    } else {
                        clone = src && jQuery.isPlainObject(src) ? src : {};
                    }

                    // Never move original objects, clone them
                    target[ name ] = jQuery.extend( deep, clone, copy );

                // Don't bring in undefined values
                } else if ( copy !== undefined ) {
                    target[ name ] = copy;
                }
            }
        }
    }

    // Return the modified object
    return target;
};

var item ={ 'a': 1, 'b': 2}
Object.assign({}, item); 
```

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2012-10-02T12:23:28.043

虽然这不是克隆，但获得结果的一种简单方法是使用原始对象作为新对象的原型。

您可以使用以下方法执行此操作`Object.create`：

```
var obj = {a: 25, b: 50, c: 75};
var A = Object.create(obj);
var B = Object.create(obj);

A.a = 30;
B.a = 40;

alert(obj.a + " " + A.a + " " + B.a); // 25 30 40 
```

这会在其中创建一个新对象，`A`该`B`对象*继承*自`obj`. 这意味着您可以在不影响原始属性的情况下添加属性。

为了支持遗留实现，您可以创建一个*（部分）*垫片来完成这个简单的任务。

```
if (!Object.create)
    Object.create = function(proto) {
        function F(){}
        F.prototype = proto;
        return new F;
    } 
```

它不会模拟 的所有功能`Object.create`，但它会满足您的需求。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-02T12:22:22.350

您可以定义一个克隆函数。

我用这个：

```
function goclone(source) {
    if (Object.prototype.toString.call(source) === '[object Array]') {
        var clone = [];
        for (var i=0; i<source.length; i++) {
            clone[i] = goclone(source[i]);
        }
        return clone;
    } else if (typeof(source)=="object") {
        var clone = {};
        for (var prop in source) {
            if (source.hasOwnProperty(prop)) {
                clone[prop] = goclone(source[prop]);
            }
        }
        return clone;
    } else {
        return source;
    }
}

var B = goclone(A); 
```

它不会复制原型、函数等。但是您应该根据自己的需要对其进行调整（并可能简化它）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-02T12:22:37.077

`A`和`B`引用同一个对象，所以`A.a`和`B.a`引用同一个对象的相同属性。

### 编辑

这是一个可以完成这项工作的“复制”功能，它可以进行浅层和深层克隆。请注意注意事项。它复制对象的所有可枚举属性（不是继承属性），包括那些具有错误值的属性（我不明白为什么其他方法会忽略它们），它也不复制稀疏数组的不存在的属性。

没有通用的复制或克隆功能，因为对于复制或克隆在每种情况下应该做什么有很多不同的想法。大多数排除主机对象，或除对象或数组以外的任何东西。这也复制了原语。函数应该发生什么？

所以看看下面的，这是一种与其他人略有不同的方法。

```
/* Only works for native objects, host objects are not
** included. Copies Objects, Arrays, Functions and primitives.
** Any other type of object (Number, String, etc.) will likely give 
** unexpected results, e.g. copy(new Number(5)) ==> 0 since the value
** is stored in a non-enumerable property.
**
** Expects that objects have a properly set *constructor* property.
*/
function copy(source, deep) {
   var o, prop, type;

  if (typeof source != 'object' || source === null) {
    // What do to with functions, throw an error?
    o = source;
    return o;
  }

  o = new source.constructor();

  for (prop in source) {

    if (source.hasOwnProperty(prop)) {
      type = typeof source[prop];

      if (deep && type == 'object' && source[prop] !== null) {
        o[prop] = copy(source[prop]);

      } else {
        o[prop] = source[prop];
      }
    }
  }
  return o;
} 
```

# php - JFolder::create: 无法创建目录 Joomla

> ID：12690108
> 
> 赞同：1
> 
> 时间：2012-10-02T12:19:56.250
> 
> 标签：php, joomla, joomla2.5

如果它不存在，我在这里使用下面的 PHP 代码来创建一个特定的文件夹。我正在使用 joomla 2.5

```
$path = my/path/goes/here;
$folder_permissions = "0755";
$folder_permissions = octdec((int)$folder_permissions);
//create folder if not exists
if (!JFolder::exists($path)){
     JFolder::create($path, $folder_permissions);          
} 
```

但是此代码会引发以下错误

```
JFolder::create: Could not create directory 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:26:42.233

我认为可能导致问题的两件事：

1.  你忘了一个`;`在结尾`octdec((int)$folder_permissions)`
2.  尝试删除整行`$folder_permissions = octdec((int)$folder_permissions)`

**更新：** 这是我用来创建一个简单文件夹的：

```
$destination = JPATH_SITE.'/'."modules/mod_login";
$folder_name = "new_folder";
JFolder::create($destination .'/'. $folder_name, 0755); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:25:56.743

可能是什么原因？简单：尝试创建该目录的用户没有权限（或您的 Joomla 已损坏）。

运行代码的用户可能是 www-data（在大多数 *nix/Apache 上）。'nobody' 或 'apache' 也是可能的。如果你有root权限试试这个：

1）成为网络用户（例如www-data）

2）跳转到目录my/path/goes/here

3) 类型：mkdir mynewdir

而且您可能会发现用户没有足够的权限这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T17:10:01.587

`configuration.php`在 Joomla 主目录下编辑您的文件，更改：

从：

```
var $tmp_path = '/home/public_html/your_name/tmp'; 
```

到：

```
var $tmp_path = 'tmp'; 
```

并且`tmp`应该有777权限

# objective-c - XCode 4不给出输出

> ID：12690110
> 
> 赞同：0
> 
> 时间：2012-10-02T12:20:02.520
> 
> 标签：objective-c, xcode, cocoa-touch, cocoa, xcode4

我正在关注 Stephen G. Kochan 的 Objective-C 编程一书。我正在尝试代码并自己改进类示例。我在 Mac OS X / Applications / Command Line Tool 中打开了一个项目，程序成功执行。

当我将项目作为 IOS / Framework & Library / Cocoa Touch Static Library 打开时，XCode 正常分离类和实现文件。当我尝试编译时，XCode 说它已成功构建，但控制台中没有输出。

我只是按照这本书，我确信 Class 或实现文件没有任何问题。“NSLog(@""); 文件保留在那里”。根据这本书，文件由 3 分隔：

1.  接口部分（类部分）
2.  实现部分（实例位于）
3.  int main (int argc, char *argv[]) 部分。

但是当我将项目作为可可静态库打开时，我只得到 1 个 *.m 文件。我无法使用 add -> new file 添加任何其他 *.m 文件。

我的问题是，我正在处理的文件结构是否存在任何相关问题？我是否还需要单独的实现部分和主要部分？

如果有人可以帮助解决这个问题，我将不胜感激。我真的被卡住了，很难继续本书的下一步，因为我不能再尝试代码示例了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:41:24.213

听起来您正在尝试运行静态库项目。你不能这样做 - 你需要制作一个使用你的静态库的应用程序才能运行并查看输出。

# vb.net - 在 vb.net 中使用兑换同步到 Outlook 2010

> ID：12690127
> 
> 赞同：3
> 
> 时间：2012-10-02T12:21:16.700
> 
> 标签：vb.net, outlook-redemption

我正在开发一个应用程序，我想在其中同步 Outlook 日历、邮件等。我身边的这段代码在 Outlook 2003、2007 中运行良好。但我不知道它对 Outlook 造成了什么问题2010\. 我使用以下内容：

redemption dll 5.4 版本-32 位
office 对象核心14 dll-32 位
office -32 位版本
visual studio 2008

我收到此错误：

> 无法创建 ActiveX 组件。

在以下行：

```
session = CreateObject("Redemption.RDOSession") 
```

会话在哪里：

```
Dim session As Redemption.RDOSession 
```

之后显示以下错误：

> 没有默认邮件客户端或当前邮件客户端无法满足消息传递请求

我尝试[了各种各样的东西](http://support.microsoft.com/kb/813745)，但都是一样的。我还重新安装，修复了outlook，修复了注册表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T21:25:17.203

这对我有用：

首先，我会说我使用兑换附带的 Customize.exe 创建了一个名为 ffloader.dll 的 dll

接下来，我将该dll注册如下（32位）regsvr32 ffloader.dll

最后在 vb.net 代码中，我创建了如下会话：

将会话调暗为 Redemption.RDOSession = CreateObject("ffloader.ffRDOSession")

希望有帮助！

# java - 如何在静态方法中实例化非静态内部类？

> ID：12690128
> 
> 赞同：133
> 
> 时间：2012-10-02T12:21:15.453
> 
> 标签：java, static, inner-classes

我有以下代码：

```
public class MyClass {

   class Inner {
     int s, e, p;
   }

   public static void main(String args[]) {
     Inner in;
   }
} 
```

到目前为止，代码都很好，但我无法像`in = new Inner()`显示的那样在 main 方法中实例化“in” `non static field cannot be referenced in static context`。

我有什么办法可以做到？我不想让我的`Inner`班级成为*静态*的。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-10-02T12:22:40.943

您还必须引用另一个外部类。

```
Inner inner = new MyClass().new Inner(); 
```

如果 Inner 是静态的，那么它将是

```
Inner inner = new MyClass.Inner(); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-02T13:25:12.603

“常规”内部类具有指向外部类实例的隐藏（隐式）指针。这允许编译器生成代码来为您追逐指针，而无需您键入它。例如，如果外部类中有一个变量“a”，那么内部类中的代码可以执行“a=0”，但编译器将为“outerPointer.a=0”生成代码，维护隐藏的指针封面。

这意味着当你创建一个内部类的实例时，你必须有一个外部类的实例来链接它。如果您在外部类的方法中进行此创建，则编译器知道使用“this”作为隐式指针。如果要链接到其他外部实例，则使用特殊的“新”语法（请参见下面的代码片段）。

如果您将内部类设为“静态”，则没有隐藏指针，并且您的内部类无法引用外部类的成员。静态内部类与常规类相同，但其名称在父类内部。

下面是一段代码，演示了创建静态和非静态内部类的语法：

```
public class MyClass {

    int a,b,c; // Some members for MyClass

    static class InnerOne {
        int s,e,p;
        void clearA() {
            //a = 0;  Can't do this ... no outer pointer
        }
    }

    class InnerTwo {
        //MyClass parentPointer;      Hidden pointer to outer instance
        void clearA() {         
            a = 0;
            //outerPointer.a = 0      The compiler generates this code
        }       
    }

    void myClassMember() {
        // The compiler knows that "this" is the outer reference to give
        // to the new "two" instance.
        InnerTwo two = new InnerTwo(); //same as this.new InnerTwo()
    }

    public static void main(String args[]) {

        MyClass outer = new MyClass();

        InnerTwo x = outer.new InnerTwo(); // Have to set the hidden pointer
        InnerOne y = new InnerOne(); // a "static" inner has no hidden pointer
        InnerOne z = new MyClass.InnerOne(); // In other classes you have to spell out the scope

    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T13:15:16.537

如果要从方法中创建`new Inner()`，请从类的实例方法中进行`MyClass`：

```
public void main(){
  Inner inner = new Inner();
}

public static void main(String args[]){
  new MyClass().main();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T05:44:56.603

阿列克谢·凯戈罗多夫的答案是正确的。他的解决方案允许您从静态方法中实例化内部类，例如同一类的 main()。否则，您无法在静态方法中实例化内部类。它不编译。Alexei 的解决方案确实可以编译，并且它允许您从静态方法实例化内部类。其他答案是有趣的旁注，但我发现它们对实际问题没有反应。

```
import java.awt.Graphics;
import java.awt.Color;
import javax.swing.JPanel;
import javax.swing.JFrame;

public class Example {
    public class InnerClass extends JPanel {
        public void paint(Graphics g) {
            g.setColor(Color.BLACK);
            g.fillRect(getX(),getY(),getWidth(),getHeight());
            g.setColor(Color.RED);
            g.fillRect(5, 20, 195, 20);
            g.setColor(Color.BLACK);
            g.drawString("This was written by an inner class.", 10, 35);
        }
    }

    public void demonstrate() {
        InnerClass sc = new InnerClass();//<---this is key
        JFrame jf = new JFrame();
        jf.add(sc);
        jf.setSize(220, 130);
        jf.setLocation(450, 450);
        jf.show();
    }

    public static void main(String[] params) {
        Example e = new Example();//<---so is this
        e.demonstrate();//<---and this is also key
    }
} 
```

# c# - 在 C# 中，我们可以将方法添加到公共 Behavior 类中而不触及它吗？

> ID：12690130
> 
> 赞同：2
> 
> 时间：2012-10-02T12:21:18.137
> 
> 标签：c#, behavior

在*Unity csharp*中，我想创建一个`GetOrAddComponent`方法，这将简化相应的`GetComponent`和`AddComponent`（我想没有充分的理由）。

通常的方法是这样的：

```
// this is just for illustrating a context
using UnityEngine;
class whatever : MonoBehavior {
public Transform child;
void whateverMethod () {

    BoxCollider boxCollider = child.GetComponent<BoxCollider>();
    if (boxCollider == null) {
        boxCollider = child.gameObject.AddComponent<BoxCollider>();
    }

}} 
```

现在我可以上这门课了。. . ：

```
public class MyMonoBehaviour : MonoBehaviour {

    static public Component GetOrAddComponent (Transform child, System.Type type) {
        Component result = child.GetComponent(type);
        if (result == null) {
            result = child.gameObject.AddComponent(type);
        }
        return result;
    }

} 
```

. . . 所以这有效：

```
// class whatever : MyMonoBehavior {

BoxCollider boxCollider = GetOrAddComponent(child, typeof(BoxCollider)) as BoxCollider; 
```

但我希望我可以这样写：

```
BoxCollider boxCollider = child.GetOrAddComponent<BoxCollider>(); 
```

我能想出的唯一想法太复杂了（用`Transform`a替换每个`MyTransform`），因此甚至不值得尝试。至少不仅仅是为了更好的语法。

但是是吗？或者还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:26:20.643

您是否尝试过使用[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)？您可以像这样声明它们：

```
public static class MyMonoExtensions {

    public static T GetOrAddComponent<T>(this Transform child) where T: Component {
        T result = child.GetComponent<T>();
        if (result == null) {
            result = child.gameObject.AddComponent<T>();
        }
        return result;
    }

} 
```

您可以像实例方法一样调用它，然后：

```
child.GetOrAddComponent<BoxCollider>(); 
```

有关扩展方法的更多详细信息，请参阅上面的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:25:39.460

从 c# 3.0 开始，您可以使用扩展方法

```
public static MonoBehaviourExtension
{
     public static void GetOrAdd(this MonoBehaviour thisInstance, <args>)
     {
           //put logic here
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:27:48.830

您可以使用扩展方法。

```
public static class Extensions
{
    public static T GetOrAddComponent<T>(this Transform child) where T : Component 
    {
            T result = child.GetComponent<T>();
            if (result == null) {
                result = child.gameObject.AddComponent<T>();
            }
            return result;
    }
} 
```

现在你可以使用`BoxCollider boxCollider = child.GetOrAddComponent<BoxCollider>();`

# python - 使用不同版本的python和空闲的windows7-64bit

> ID：12690133
> 
> 赞同：0
> 
> 时间：2012-10-02T12:21:29.150
> 
> 标签：python, windows-7-x64, python-idle

我的系统上安装了 Python 3.2 和 python 1.5.2（Windows 7 64 位）

我只能运行安装了 python 3.2 版本的 IDLE 1.5.2 的 IDLE 与 64 位系统不兼容

我需要专门为 1.5.2 版本测试一些代码我怎样才能让 IDLE 使用 1.5.2 解释器而不是 3.2

或任何其他方式在没有空闲的情况下测试 python 1.5.2 脚本

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:25:11.610

您可以从命令行（cmd.exe）使用给定的解释器运行脚本

```
c:\path\to\python1.5.2\python.exe your_python_script.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:39:30.200

您可以使用[适用于 Windows 的 Python Launcher](https://bitbucket.org/vinay.sajip/pylauncher/src/tip/Doc/launcher.rst)`your_python_script.py`使用不同的 Python 版本轻松运行。

此外，pylauncher 允许您在脚本中指示它期望的 Python 版本（在`#!`-line (shebang) 中）并自动运行它。

# ajax - jQuery 'on' 未在动态生成的模式弹出窗口中注册

> ID：12690142
> 
> 赞同：9
> 
> 时间：2012-10-02T12:22:13.653
> 
> 标签：ajax, click, modal-dialog, jquery

我的印象是 jQuery 的[`on`](http://api.jquery.com/on/)事件处理程序旨在能够“监听”动态创建的元素，并且它应该替换[`live`](http://api.jquery.com/live/). 但是，我所经历的是 using`on`没有捕获点击事件，而 using`live`是成功的！

我的情况的棘手方面是，我不仅在动态创建内容，而且通过 AJAX`.get()`调用来完成它，并将生成的 HTML 插入到模态`.dialog()`jQueryUI 弹出窗口中。

这是我试图完成的简化版本（包含在 中`$(document).ready(...)`）：

```
$.get("getUserDataAjax.php", queryString, function(formToDisplay) {
    $("#dialog").dialog({
        autoOpen: true,
        modal: true,
        buttons...
    }).html(formToDisplay);
});
$(".classThatExistsInFormToDisplay").on("click", function() {
    alert("This doesn't get called");
}); 
```

从我的文档中`on`我发现这就是我编写`on`活动的方式：

```
$("p").on("click", function(){
    alert( $(this).text() );
}); 
```

但是，由于某种原因，`live`它将按我的预期工作——而`on`我却失败了。

**这不是“我怎样才能让它工作”的问题，**因为我发现如果我*在*回调中声明`on`它会成功（捕获点击） 。*`function(formToDisplay)`*

 ***我的问题是：**`on`在模态弹出窗口中找不到我动态创建的元素有什么问题？我的 jQuery 实例是 jquery-1.7.2。jQueryUI 是 1.8.21。

这是两个近似该问题的jsFiddles。在两个实例中单击“测试”一词以查看不同的行为。代码的唯一区别是替换`on`for `live`。

点击被捕获的[位置](http://jsfiddle.net/mNZWH/)`live`。

未捕获[单击](http://jsfiddle.net/mNZWH/2/)的位置`on`（单击“测试-单击我”以查看没有任何反应）。

我意识到我可能只是使用`on`不当或要求它做一些不打算做的事情，但我想知道它**为什么**不起作用（但如果你有一些非常聪明的东西，请随时分享）。谢谢你的智慧！

**更新/回答/解决方案：**

根据用户“未定义”，不同之处在于`on`不是从`document`对象的顶部一直委托，而`live`确实/是。

正如克劳迪奥所提到的，`on`文档的某些部分引用了动态创建的元素*，并且*您在`$("")`查询部分中包含的内容**需要在运行时存在**。

这是我的新解决方案：捕获单击事件`on`我的模态对话框，虽然它在运行时创建事件时没有任何内容，但将能够找到我的内容和具有稍后生成的特殊类的元素。

```
$("#dialog").on("click", ".classThatExistsInFormToDisplay", function() {
    ... //(success! Event captured)
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T12:26:14.903

`live`从文档对象委托事件，但`on`不委托，如果要使用`on`方法委托事件，则应从元素或`document`对象的静态父对象之一委托事件：

```
$(document).on("click", ".clickHandle", function() {
    alert("Content clicked");
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T12:25:51.903

问题是您附加事件的元素必须存在。

您必须`on`像这样使用来捕获对`p`动态创建的标签的点击

```
$("#existingContainerId").on("click", "p", function(){
    alert( $(this).text() );
}); 
```

如果您没有相关的现有容器可供使用，您可以使用`$("body")`或`$(document)`

> 如果选择器被省略或为空，则事件处理程序被称为直接或直接绑定。每次在所选元素上发生事件时都会调用处理程序，无论它是直接发生在元素上还是来自后代（内部）元素的冒泡。
> 
> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。
> 
> **事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上**。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述

[查看此处的](http://api.jquery.com/on/)**直接和委托事件** 部分以 获取更多详细信息*

# mysql - 解决第 1274954 行的错误：较大 (100mb+) mysql .sql 文件中的未知命令“\”

> ID：12690147
> 
> 赞同：0
> 
> 时间：2012-10-02T12:22:27.387
> 
> 标签：mysql, mysql-error-1064

在 100mb+ 的文件上运行它时：

```
$ mysql -u xxxx -p dbname < /path/to/dump.sql 
```

我得到：

```
ERROR at line 1274954: Unknown command '\''. 
```

但是，当我这样做时：

```
head -1274964 /path/to/dump.sql | tail -20 
```

我只是得到（**'INSERT INTO address' 是第 1274954 行**，但是我在任何地方都没有看到错误）：

```
 updated, updated_by,
    status, person,
    profile, measurements)
    VALUES
    ('0000-00-00 00:00:00', '2517',
    '0000-00-00 00:00:00', '2517',
    3, '2517',
    'Team', 'Team');

INSERT INTO address
    (created, created_by, 
    updated, updated_by, 
    status_id, person_id, 
    org_id,
    street_1, street_2,
    city, state, 
    postal, lng,
    lat, country_code)
    VALUES
    ('0000-00-00 00:00:00', '2517', 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:38:27.317

尝试运行它

```
 mysql --verbose -u xxxx -p db < file 
```

这应该让您更好地了解这个问题 - 我不记得它是否计算行号（如果它是乱写的） - 例如空行可能不计算..

# android - 重复 AsyncTask.execute()

> ID：12690154
> 
> 赞同：0
> 
> 时间：2012-10-02T12:22:49.630
> 
> 标签：android, android-asynctask

我的应用程序包含一个长循环，它计算我的 UIThread 中的许多值，然后在屏幕上绘制它们。

如果我使用 将计算循环卸载到单独的线程上`AsyncTask`，我将无法根据文档多次运行 MyAsyncTask.execute()：“任务只能执行一次”。当我尝试运行代码时，我能够看到绘制了一个框架，但随后引发了异常：“无法执行任务：任务已经执行（任务只能执行一次）”。

在绘制循环的每次迭代期间创建一个新对象*不是*一个好主意`AsyncTask`，那么有没有办法重用相同的 AsyncTask 对象来再次运行 MyAsyncTask.execute() ？或者如果没有，使用什么方法更合适？其他形式的线程可以实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:32:05.963

每次要执行时创建 AsyncTask 类对象。

例子

```
 Task _task=new Task();
    _task.excute(); 
```

有关更多信息，请阅读本教程[链接](https://stackoverflow.com/questions/6531950/how-to-execute-async-task-repeatedly-after-fixed-time-intervals)

# android - 将 Android 项目转换为 Maven

> ID：12690163
> 
> 赞同：2
> 
> 时间：2012-10-02T12:23:05.733
> 
> 标签：android, maven, github

我希望在我接手的项目中使用 Roboelectric 和 roboguice。为此，我需要将当前项目转换为 maven。我一直在看这个

[http://code.google.com/p/maven-android-plugin/wiki/GettingStarted](http://code.google.com/p/maven-android-plugin/wiki/GettingStarted)

我想知道是否需要做任何不同的事情来转换项目，因为我不是从头开始的。

在将项目推送到 github 时，我还有什么特别需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:56:04.790

这就是我使用 Eclipse 创建的项目的方式。

首先，我将 ANDROID_HOME 添加到我的 /etc/launch.conf

```
setenv ANDROID_HOME /usr/local/Cellar/android-sdk/r12 
```

为了获取 SDK 的本地 jar 并放入本地 Maven 存储库，我使用了[maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)

只需克隆存储库并运行 mvn install （仅一个版本可选 add -P 4.2 ）

然后我使用了 roboelectric 的 pom.xml 作为示例，并编辑了我需要的东西。[机器人电动快速入门](http://pivotal.github.com/robolectric/maven-quick-start.html)

确保文件夹结构与 /src/main/java 和 /src/main/test 的 maven 文件夹结构相同

我的项目没有使用 RoboGuice，但应该只是包括

```
 <dependency>
    <groupId>org.roboguice</groupId>
    <artifactId>roboguice</artifactId>
    <version>2.0</version>
</dependency> 
```

这是我的 pom.xml 文件的内容，我使用目标 16 和 17 一样，我收到 Roboelectric 1.1 的错误。

```
<dependencies>
    <!-- To get this locally use https://github.com/mosabua/maven-android-sdk-deployer -->
    <dependency>
        <groupId>android</groupId>
        <artifactId>android</artifactId>
        <version>4.2_r1</version>
        <scope>provided</scope>
    </dependency>

    <!-- Make sure this is below the android dependencies -->

    <dependency>
        <groupId>com.pivotallabs</groupId>
        <artifactId>robolectric</artifactId>
        <version>1.1</version>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <artifactId>sqlite-jdbc</artifactId>
                <groupId>org.xerial</groupId>   
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<build>
    <finalName>${project.artifactId}</finalName>
    <pluginManagement>
        <plugins>
            <plugin>
                <!-- http://code.google.com/p/maven-android-plugin/ -->             <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.0</version>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <sdk>
                    <platform>16</platform>
                </sdk>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# javafx-2 - 自动将滚动条添加到 GridPane - JavaFX

> ID：12690168
> 
> 赞同：0
> 
> 时间：2012-10-02T12:23:14.870
> 
> 标签：javafx-2, gridpanel

我在执行`GridPane`期间将元素动态添加到 a 中，如何允许滚动条自动添加到此`GridPane`？

相关问题：如何固定所有单元格的单元格宽度和高度`GridPane`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:40:58.833

您可以将 GridPane 放在 ScrollPane 中。

# c++ - mciSendString 随机停止工作

> ID：12690169
> 
> 赞同：0
> 
> 时间：2012-10-02T12:23:17.087
> 
> 标签：c++, audio, mcisendstring

我的代码

```
 char MusicLoc [50][200];
    char Music [50][50];
    int MusicBox(int IndexMusic)
    {
    std::string rawloc = ((std::string)"open \""+MusicLoc[IndexMusic]+Music[IndexMusic]+"\"type mpegvideo alias "+Music[IndexMusic]);`
    mciSendString(rawloc.c_str(), NULL, 0, 0); 
    mciSendString(((std::string)"play "+Music[IndexMusic]).c_str(), NULL, 0, 0);
    return 0;
    } 
```

MusicLoc 包含路径，Music 包含文件名，所以 MusicLoc[1]+Music[1] 将是 C:\etc\etc\etc\audio.mp3 ，起初它工作正常，但后来它随机停止工作，我试过了一切都不起作用，所以我猜不推荐使用 mciSendString，所以有人知道一个好的轻量级音频库吗？

编辑：第一个 mciSendString 返回 266，第二个返回 275，如果它有任何用处，但我真的没有找到关于它们的好的文档。

GetLastError 也表示没有错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:07:50.090

如果没有错误，mciSendString 的返回值应该为零。您的问题表明您遇到了错误！

要很好地解码错误，请使用 mciGetErrorString

像这样的东西（从我的代码中提取，所以你必须调整变量名等）

```
 wchar_t cmd[250];
    swprintf(cmd,249,L"open %s alias an1",fname1.c_str());
    err = mciSendString(cmd, 0, 0, 0 );
    if( err ) throw err;

...

catch ( unsigned int& err ) {
    wprintf(L"Playing %s %s %s\n",fname1.c_str(),fname2.c_str(),fname3.c_str());
    wchar_t msg[128];
    mciGetErrorString( err, msg,128 );
    wprintf(L"%s\n",msg); 
```

# php - 如何使用 Joomla2.5 实例化 mail() 函数并发送电子邮件？

> ID：12690170
> 
> 赞同：7
> 
> 时间：2012-10-02T12:23:20.443
> 
> 标签：php, joomla, joomla2.5, joomla-extensions, mailer

基于Joomla！文档@ [http://docs.joomla.org/Sending_email_from_extensions](http://docs.joomla.org/Sending_email_from_extensions)，我正在尝试使用以下代码发送电子邮件：

```
function sendmail($file,$mailto)
{  
    $mailer =& JFactory::getMailer();
    //var_dump($mailer); exit;
    $config =&JFactory::getConfig();
    $sender = array( 
        $config->getValue( 'config.mailfrom' ),
        $config->getValue( 'config.fromname' )
    );

    $mailer->setSender($sender);         

    $recipient = array($mailto);           
    $mailer->addRecipient($recipient);

    $body   = "Your body string\nin double quotes if you want to parse the \nnewlines etc";
    $mailer->setSubject('Your subject string');
    $mailer->setBody($body);
    // Optional file attached

    $mailer->addAttachment(JPATH_BASE.DS.'CSV'.DS.$file);

    $send =&$mailer->Send();

    if ( $send !== true ) {
        echo 'Error sending email: ' . $send->message;
    } else {
        echo 'Mail sent';
    }
} 
```

（`$file`是文件 zip 的完整路径，`$mailto`是我的 gmail。）

但是，当我发送邮件时，我收到错误：

> 无法实例化邮件功能。
> 致命错误：无法访问第 142 行 /var/www/html/dai/components/com_servicemanager/views/i0602/view.html.php 中的受保护属性 JException::$message

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:04:39.097

请保持理智，不要尝试使用 Joomla 的邮件程序实现。正如您所经历的那样，它不仅不可靠，而且对不同的字符集和 HTML 内容的处理能力也很差。只需包含并使用[PHPMailer](http://phpmailer.worxware.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T05:12:54.907

改变

`echo 'Error sending email: ' . $send->message;`

至

`echo 'Error sending email:'.$send->get('message');`

然后再次运行您的代码。您得到的错误应该告诉我们为什么它没有实例化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T09:48:18.427

在 joomla 中发送带有附件文件的邮件

```
 $from="noreplay@gmail.com";//Please set Proper email id
   $fromname="noreplay";
   $to ='admin@gmail.com';
   // Set a you want send email to
   $subject = "Download";
   $message = "Thank you For Downloading";
   $attachment = JPATH_BASE.'/media/demo.pdf';
   // set a file path
   $res = JFactory::getMailer()->sendMail($from, $fromname, $to,$subject,     $message,$mode=1,$cc = null, $bcc = null, $attachment);
   if($res)
   {
        $errormsg = "Mail Successfully Send";
   }
   else
   {
     $errormsg ="Mail Not Send";
   } 
```

检查收件箱或垃圾邮件文件夹中的邮件后。
垃圾邮件文件夹中的邮件，因为从 id 中未正确设置电子邮件 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:26:16.657

经过几年的 Joomla 开发，我推荐使用[RSJOOMLA 的 RSFORM PRO](http://extensions.joomla.org/extensions/contacts-and-feedback/forms/4964)在您网站的访问者填写表格后为您发送邮件。它比处理内部邮件服务器要容易得多。

# database - 无法将数据保存到数据库

> ID：12690173
> 
> 赞同：1
> 
> 时间：2012-10-02T12:23:25.010
> 
> 标签：database, row, mdf

我正在通过 c# 和 Visual Studio 2k12 创建我的第一个数据库。我添加了新项目，扔掉了所有这些设置，最后看到了 *.mdf。然后我添加了新表，添加了数据并通过拖放添加了组件到表单。因为这里一切顺利。但后来我做了一个按钮，向数据库添加新行。在 datagridview 中似乎一切正常，出现了新行。然后我关闭窗口并查看数据库是否一切正常。然后我看到数据库断开连接，数据无处可去。我使用此代码添加新的原始代码。

```
private void button1_Click(object sender, EventArgs e)
    {
        Database1DataSet.MP3Row newMP3Row = database1DataSet.MP3.NewMP3Row();
        newMP3Row.path = "D://new/mp3";
        this.database1DataSet.MP3.Rows.Add(newMP3Row);
        this.mP3TableAdapter.Update(this.database1DataSet.MP3);
    } 
```

有人可以告诉我，我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:20:47.550

最后我完成了这个问题。我的代码是正确的，但是数据库有问题。我找到了 documentm，它帮助我解决了我的问题。这是链接，第 2 点：[常见问题解答：我的数据库没有被更新，但我的应用程序中没有发生错误](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/ad837d14-31ea-445f-b830-1a8682b69e68)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:27:47.023

看起来你需要一个 database1DataSet.Commit() 或 database1DataSet.SaveChanges()

VS2012 将向您显示所有可用的选项；）

# xml - 混合内容和字符串操作清理

> ID：12690177
> 
> 赞同：5
> 
> 时间：2012-10-02T12:23:33.793
> 
> 标签：xml, xslt, xslt-2.0

我正处于将基于 Word 的文档转换为 XML 的非常痛苦的过程中。我遇到了以下问题：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <p>
        <element>This one is taken care of.</element> Some more text. „&lt;hi rend="italics">Is this a
            quote</hi>?” (Source). </p>

    <p>
        <element>This one is taken care of.</element> Some more text. „&lt;hi rend="italics">This is a
            quote</hi>” (Source). </p>

    <p>
        <element>This one is taken care of.</element> Some more text. „&lt;hi rend="italics">This is
            definitely a quote</hi>!” (Source). </p>

    <p>
        <element>This one is taken care of.</element> Some more text.„&lt;hi rend="italics">This is a
            first quote</hi>” (Source). „&lt;hi rend="italics">Sometimes there is a second quote as
            well</hi>!?” (Source). </p>

</root> 
```

`<p>`节点具有混合内容。`<element>`我已经在之前的迭代中处理过。但现在问题在于部分出现在文本节点内`<hi rend= "italics"/>`和部分作为文本节点的引用和来源。

如何使用 XSLT 2.0 来：

1.  匹配`<hi rend="italics">`最后一个字符为“„”的文本节点之前的所有节点？
2.  输出`<hi rend="italics">`as的内容`<quote>...</quote>`，去掉引号（“„”和“””），但在`<quote/>`紧跟在`<hi rend="italics">`?的同级之后出现的任何问号和感叹号中包括
3.  将节点后面的“（”和“）”之间的文本节点转换`<hi rend="italics">`为`<source>...</source>`不带括号的节点。
4.  包括最后的句号。

换句话说，我的输出应该是这样的：

```
<root>
<p>
<element>This one is taken care of.</element> Some more text. <quote>Is this a quote?</quote> <source>Source</source>.
</p>

<p>
<element>This one is taken care of.</element> Some more text. <quote>This is a quote</hi> <source>Source</source>.
</p>

<p>
<element>This one is taken care of.</element> Some more text. <quote>This is definitely a quote!</hi> <source>Source</source>.
</p>

<p>
<element>This one is taken care of.</element> Some more text. <quote>This is a first quote</quote> <source>Source</source>. <quote>Sometimes there is a second quote as well!?</quote> <source>Source</source>. 
</p>

</root> 
```

我从来没有处理过像这样的混合内容和字符串操作，整个事情真的让我失望。我将非常感谢您的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:23:08.507

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "hi[@rend='italics'
     and
      preceding-sibling::node()[1][self::text()[ends-with(., '„')]]
      ]">

  <quote>
    <xsl:value-of select=
     "concat(.,
             if(matches(following-sibling::text()[1], '^[?!]+'))
              then replace(following-sibling::text()[1], '^([?!]+).*$', '$1')
              else()
             )
      "/>
  </quote>
 </xsl:template>

 <xsl:template match="text()[true()]">
  <xsl:variable name="vThis" select="."/>
  <xsl:variable name="vThis2" select="translate($vThis, '„”?!', '')"/>

  <xsl:value-of select="substring-before(concat($vThis2, '('), '(')"/>
  <xsl:if test="contains($vThis2, '(')">
   <source>
    <xsl:value-of select=
      "substring-before(substring-after($vThis2, '('), ')')"/>
   </source>
   <xsl:value-of select="substring-after($vThis2, ')')"/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
        <p>
            <element>This one is taken care of.</element> Some more text. „&lt;hi rend="italics">Is this a
                quote</hi>?” (Source). </p>

        <p>
            <element>This one is taken care of.</element> Some more text. „&lt;hi rend="italics">This is a
                quote</hi>” (Source). </p>

        <p>
            <element>This one is taken care of.</element> Some more text. „&lt;hi rend="italics">This is
                definitely a quote</hi>!” (Source). </p>

        <p>
            <element>This one is taken care of.</element> Some more text.„&lt;hi rend="italics">This is a
                first quote</hi>” (Source). „&lt;hi rend="italics">Sometimes there is a second quote as
                well</hi>!?” (Source). </p>

</root> 
```

**产生想要的正确结果**：

```
<root>
        <p>
            <element>This one is taken care of.</element> Some more text. <quote>Is this a
                quote?</quote> <source>Source</source>. </p>

        <p>
            <element>This one is taken care of.</element> Some more text. <quote>This is a
                quote</quote> <source>Source</source>. </p>

        <p>
            <element>This one is taken care of.</element> Some more text. <quote>This is
                definitely a quote!</quote> <source>Source</source>. </p>

        <p>
            <element>This one is taken care of.</element> Some more text.<quote>This is a
                first quote</quote> <source>Source</source>. <quote>Sometimes there is a second quote as
                well!?</quote> <source>Source</source>. </p>

</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:57:08.347

这是一个替代解决方案。它允许更多叙述风格的输入文档（引号内的引号，一个文本节点内的多个（源）片段，'„' 作为数据，当后面没有 hi 元素时）。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:so="http://stackoverflow.com/questions/12690177"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xsl xs so">
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="@*|comment()|processing-instruction()">
  <xsl:copy />
</xsl:template>

<xsl:template match="*">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:function name="so:clip-start" as="xs:string">
  <xsl:param name="in-text" as="xs:string" />
  <xsl:value-of select="substring($in-text,1,string-length($in-text)-1)" />
</xsl:function>

<xsl:function name="so:clip-end" as="xs:string">
  <xsl:param name="in-text" as="xs:string" />
  <xsl:value-of select="substring-after($in-text,'”')" />
</xsl:function>

<xsl:function name="so:matches-start" as="xs:boolean">
  <xsl:param name="text-node" as="text()" />
  <xsl:value-of select="$text-node/following-sibling::node()/self::hi[@rend='italics'] and
                        ends-with($text-node, '„')" />
</xsl:function>

<xsl:template match="text()[so:matches-start(.)]"    priority="2">
  <xsl:call-template name="parse-text">
   <xsl:with-param name="text" select="so:clip-start(.)" />
  </xsl:call-template>
</xsl:template>

<xsl:function name="so:matches-end" as="xs:boolean">
  <xsl:param name="text-node" as="text()" />
  <xsl:value-of select="$text-node/preceding-sibling::node()/self::hi[@rend='italics'] and
                        matches($text-node,'^[!?]*”')" />
</xsl:function>

<xsl:template match="text()[so:matches-end(.)]"   priority="2">
  <xsl:call-template name="parse-text">
   <xsl:with-param name="text" select="so:clip-end(.)" />
  </xsl:call-template>
</xsl:template>

<xsl:template match="text()[so:matches-start(.)][so:matches-end(.)]" priority="3">
  <xsl:call-template name="parse-text">
   <xsl:with-param name="text" select="so:clip-end(so:clip-start(.))" />
  </xsl:call-template>
</xsl:template>

<xsl:template match="text()" name="parse-text" priority="1">
  <xsl:param name="text" select="." />
  <xsl:analyze-string select="$text" regex="\(([^)]*)\)">
    <xsl:matching-substring>
      <source>
        <xsl:value-of select="regex-group(1)" />
      </source>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
      <xsl:value-of select="." />
    </xsl:non-matching-substring>
  </xsl:analyze-string>
</xsl:template>

<xsl:template match="hi[@rend='italics']">
  <quote>
    <xsl:apply-templates select="(@* except @rend) | node()" />
    <xsl:for-each select="following-sibling::node()[1]/self::text()[matches(.,'^[!?]')]">
      <xsl:value-of select="replace(., '^([!?]+).*$', '$1')" />
    </xsl:for-each>   
  </quote>
</xsl:template>

</xsl:stylesheet> 
```

# java - 在swing 1.5中指定时间后自动关闭非模态对话框

> ID：12690178
> 
> 赞同：1
> 
> 时间：2012-10-02T12:23:41.017
> 
> 标签：java, multithreading, swing, jdialog

在 Swing for Java 1.5 中，我想创建一个对话框，允许用户在后台执行其他操作。我希望这个对话框有一个按钮，你可以用它来关闭对话框。如果用户没有在 X 秒内关闭对话框，它应该自行关闭。在这两种情况下，都必须在对话框关闭后执行例程。

我尝试将 Swing Timer 与模态对话框一起使用，它可以工作。但是，正如我上面注意到的，我需要一个非模态对话框。当我将 modal-Property 设置为 false 时，对话框立即消失。

有人知道，为什么会这样？

```
JOptionPane pane =  new JOptionPane (text, JOptionPane.WARNING_MESSAGE);
pane.setOptions(new String[]{"Close"});
final JDialog dialog = pane.createDialog(frame, title);
//dialog.setModal(false);

Timer timer = new Timer(time, new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        dialog.setVisible(false);
    }
});
timer.setRepeats(false);
timer.start();

dialog.setVisible(true);

//routine to do after the dialog disappears 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:36:13.710

在此[示例](https://stackoverflow.com/a/12451673/230513)`JDialog`中，包含[*直接* `JOptionPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)的无模式在关闭前倒计时至零。`JFrame`包含标签的附近保持响应。

附录：正如@mKorbel 有用的评论，您的班级可以使用 a`PropertyChangeListener`来了解对话框的选项窗格何时关闭。这是 的一个方便的[功能](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，`JOptionPane`但您可以添加自己的支持，如此[处所示](https://stackoverflow.com/a/11832979/230513)。

![图片](../Images/6b2b0db14191a3410c9102eba7015048.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:30:32.080

1.  为了获得更好的帮助，请尽快发布[SSCCE](http://docs.oracle.com/javase/tutorial/uiswing/index.html)，没有关于`MultiThreading`

2.  不要`final JDialog dialog = pane.createDialog(frame, title);`在运行时创建，创建`JDialog`一次并将其重新用于另一个操作，和/或通过删除所有子项`ContentPane`

3.  [从WindowListener](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/event/WindowListener.html)覆盖适当的事件，您可以在此之前调用您的自定义代码`dipose()`，`setVisible()`ei

4.  （至第 2 点。）只需将[JDialog#setDefaultCloseOperation](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JDialog.html#setDefaultCloseOperation%28int%29)覆盖为`HIDE_ON_CLOSE`

5.  所有在运行时调用 new 的代码都`Top-Level Container`必须包装到`invokeLater()`中，尤其是`setVisible(true)`

6.  使用[@camickr 的应用程序不活动](http://tips4java.wordpress.com/2008/10/24/application-inactivity/)

# internet-explorer-9 - 边框半径和圆角在 IE9 中不起作用

> ID：12690179
> 
> 赞同：1
> 
> 时间：2012-10-02T12:23:55.447
> 
> 标签：internet-explorer-9, css

圆角在 Google Chrome 中显示正常，但在 IE9 中不显示。

这是我的 CSS 代码：

```
.post-labels{
    position:relative;
    float:right;
    text-align:right;
    border-style:solid;
    border-color:#452C28;
    padding:10px;
    background-color:#F0ECD5;
    border-radius:15px;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    -goog-ms-border-radius: 15px} 
```

我尝试添加元标记：

```
<meta content='IE=edge' http-equiv='X-UA-Compatible'/>
<meta content='IE=9' http-equiv='X-UA-Compatible'/> 
```

仍然没有。我究竟做错了什么？

[http://costumingdiary.blogspot.com](http://costumingdiary.blogspot.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:54:53.410

您的代码在没有任何`meta`标签的 IE9 上运行良好。[演示。](http://jsfiddle.net/dTnyr/)

只需删除所有与您的版本混淆的元元素并确保您的浏览器不处于兼容模式（按 F12 并确保浏览器模式和文档模式都是 IE9）。

# android - 如果我尝试发送附件获取 FileNotFoundException

> ID：12690183
> 
> 赞同：1
> 
> 时间：2012-10-02T12:23:59.133
> 
> 标签：android, android-intent, attachment, email-attachments

> **可能重复：**
> [如何在自定义邮件发件人中从文件浏览器和相机传递附件](https://stackoverflow.com/questions/12674360/how-to-pass-attachment-from-file-browser-and-camera-in-a-custom-mail-sender)

我有一个自定义邮件发件人，它使用,`activation.jar`向多个人发送电子邮件而无需用户交互。`additional.jar``mail.jar`

添加附件的代码块是

```
 try {
      m.addAttachment(filePah);

      if(m.send()) {
        Toast.makeText(Comunic.this, "Ok", Toast.LENGTH_LONG).show();
      } else {
        Toast.makeText(Comunic.this, "Error.", Toast.LENGTH_LONG).show();
      }
    } catch(Exception e) {
      Toast.makeText(Comunic.this, "Error Attachment.", Toast.LENGTH_LONG).show();
    } 
```

在行

```
m.addAttachment(filePath); 
```

我以这种形式传递文件路径

```
/mnt/sdcard/mnt/sdcard/AAAAAA/readme.txt 
```

`m`是一个`Mail Object`

```
Mail m = new Mail(username, password); 
```

邮件类是

```
 public class Mail extends javax.mail.Authenticator {
      private String _user;
      private String _pass;

      private String[] _to;
      private String _from;

      private String _port;
      private String _sport;

      private String _host;

      private String _subject;
      private String _body;

      private boolean _auth;

      private boolean _debuggable;

      private Multipart _multipart;

      public Mail() {
        _host = "smtp.gmail.com"; // default smtp server
        _port = "465"; // default smtp port
        _sport = "465"; // default socketfactory port

        _user = ""; 
        _pass = "";
        _from = ""; // email sent from
        _subject = ""; // email subject
        _body = ""; // email body

        _debuggable = false; // debug mode on or off - default off
        _auth = true; // smtp authentication - default on

        _multipart = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
        CommandMap.setDefaultCommandMap(mc);
      }

      public Mail(String user, String pass) {
        this();

        _user = user;
        _pass = pass;
      }

      public boolean send() throws Exception {
        Properties props = _setProperties();

        if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) {
          Session session = Session.getInstance(props, this);

          MimeMessage msg = new MimeMessage(session);

          msg.setFrom(new InternetAddress(_from));

          InternetAddress[] addressTo = new InternetAddress[_to.length];
          for (int i = 0; i < _to.length; i++) {
            addressTo[i] = new InternetAddress(_to[i]);
          }
            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

          msg.setSubject(_subject);
          msg.setSentDate(new Date());

          // setup message body
          BodyPart messageBodyPart = new MimeBodyPart();
          messageBodyPart.setText(_body);
          _multipart.addBodyPart(messageBodyPart);

          // Put parts in message
          msg.setContent(_multipart);

          // send email
          Transport.send(msg);

          return true;
        } else {
          return false;
        }
      }

  public void addAttachment(String filename) throws Exception {
    BodyPart messageBodyPart = new MimeBodyPart();
    DataSource source = new FileDataSource(filename);
    messageBodyPart.setDataHandler(new DataHandler(source));
    messageBodyPart.setFileName(filename);

    _multipart.addBodyPart(messageBodyPart);
  }

  @Override
  public PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(_user, _pass);
  }

  private Properties _setProperties() {
    Properties props = new Properties();

    props.put("mail.smtp.host", _host);

    if(_debuggable) {
      props.put("mail.debug", "true");
    }

    if(_auth) {
      props.put("mail.smtp.auth", "true");
    }

    props.put("mail.smtp.port", _port);
    props.put("mail.smtp.socketFactory.port", _sport);
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");

    return props;
  }

      public String getBody() {
        return _body;
      }

      public String getFrom() {
            return _from;
      }

      public String[] getTo() {
            return _to;
      }

      public String getSubject() {
            return _subject;
      }

      public void setBody(String _body) {
        this._body = _body;
      }

      public void setFrom(String _from) {
            this._from = _from;
      }

      public void setTo(String[] _to) {
            this._to = _to;
      }

      public void setSubject(String _subject) {
            this._subject = _subject;
      }

    } 
```

但我得到这个错误

```
Email(10235): javax.mail.MessagingException: IOException while sending message;
Email(10235):   nested exception is:
Email(10235):   java.io.FileNotFoundException: /mnt/sdcard/mnt/sdcard/AAAAAA/readme.txt (No such file or directory)
Email(10235):   at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:676)
Email(10235):   at javax.mail.Transport.send0(Transport.java:189)
Email(10235):   at javax.mail.Transport.send(Transport.java:118)
Email(10235):   at my.app.Mail.send(Mail.java:108) 
```

我使用获取文件路径

```
private void openFile() {
    Intent i = new Intent(Intent.ACTION_GET_CONTENT);
    i.setType("file/*");
    startActivityForResult(i, FILE_REQ_CODE);
} 
```

（在galaxy上显示我的文件管理器列表，但不是默认文件管理器，所以我使用了Astro）。

如何解决这个问题？我的代码有什么问题？

# objective-c - 当对象在里面时，UIScrollView 不滚动

> ID：12690184
> 
> 赞同：3
> 
> 时间：2012-10-02T12:24:00.850
> 
> 标签：objective-c, xcode, uiscrollview

我在`UIScrollView`里面做了一个我`UIViewController` **有 5 个 ViewControllers**`problem is in the 4th one`的.

当`UIScrollView`我注意到它时，我所做的确实滚动（所以没有标签，没有按钮，根本没有对象）但是当我在其中放置标签（或任何东西）时`UIScrollView`它停止工作。

编辑：

我尝试在一个新项目中做同样的事情，由于某种原因它确实有效，我认为这与它**在第四个 ViewController 中**的事实有关，而我制作的新项目是在第一个中制作**的自动制作 viewcontroller**。我还没有答案，请帮忙。

我的代码：viewcontroller.h

```
#import <UIKit/UIKit.h>

@interface viewcontroller : UIViewController
@property (weak, nonatomic) IBOutlet UIScrollView *ScrollerMdon;

@end 
```

视图控制器.m

```
@synthesize ScrollerMdon;

- (id)initWithNibName:(NSString *) nibNameOrNil bundle:(NSBundle *) nibBundleOrNil
{
    self = [super initWithNibName: nibNameOrNil bundle:nibBundleOrNil];
    if(self)
    {

    }
return self;
}

-(void)viewDidLoad
{
[ScrollerMdon setScrollEnabled:YES];
[ScrollerMdon setContentSize:CGSizeMake(320,1000)];
[super viewDidLoad];
}

@end 
```

在 xcode viewcontroller 连接检查器中，我的插座`ScrollerMdon`与* *Scroll View（* *我插入到我的 viewcontroller 中）连接

在 xcode`UIScrollView`连接检查器中，我的引用插座`ScrollerMdon`与视图控制器连接。

请帮助我，我已经尝试解决这个问题 5 个小时了。我再也受不了了。

编辑：

我尝试让单个视图控制器可以容纳 17 个文本框，`UIScrollView`如果有任何建议我会非常高兴，我认为没有其他方法可以做到这一点。

编辑2：

我已经尝试再次将同一个类放在不同的视图控制器上，反之，我有点重写了代码，一切都与我在另一个项目中所做的完全相同，但它不起作用。 （当一个物体在里面时..）

我的程序的 2 张照片。对不起，小而坏的图像，由于某种原因，他们未经我的许可就移动了，但我想这是足够的信息。（我使用带有 os x leopard 的 VMWare 8）

[照片 1](http://imgur.com/kG6h7,cDdj3#0)

[照片 2](http://imgur.com/kG6h7,cDdj3#1)

我滚动没有项目：imgur.com/cd16I

我拼命滚动项目：imgur.com/hNUl1

由于我只能发布 2 个超链接，您必须自己打开这些超链接。PS。如果您不知道答案，请点赞，因为我需要答案，如果点赞，可能会有更多的观众，ty。

编辑3：

我现在正在复制我的整个代码并在另一个项目中构建应用程序，希望这会起作用：S。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T14:09:36.663

我遇到了昨天遇到的完全相同的问题。让我疯了好几个小时……这是一个全新的项目，我大约一周前才开始。

问题是，我有另一个项目与我去年夏天开始的设置完全相同，没有任何问题。选项卡式应用程序，具有 UIScrollView 的 VC，其中包含许多 uiview、标签、图像等......效果很好。

那么从那个项目到这个项目有什么变化呢？我开始该项目的 Xcode 版本。去年夏天的项目没有启用 AutoLayout 作为选项。这个新的做了（Xcode 4.6）。

如果我为整个项目关闭“使用自动布局”，它的效果非常好。

在“实用程序”面板中，单击“文件检查器”选项卡。在“Interface Builder Document”部分，您会看到“Use AutoLayout”复选框。取消选择并重新构建您的应用程序。不超过 10 分钟前刚刚为我自己的项目找到了这个技巧——效果很好。

希望这适用于您的项目...祝您好运！

![在此处输入图像描述](../Images/11ffffa539ecf50138c8ffcda6005aec.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:25:08.797

我发现解决方案它可能不是完美的解决方案，但它确实有效。

问题似乎出在我的第一个项目中，因为我可以让它在其他项目中工作，所以我将整个项目复制到另一个项目中，这样它就可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:03:13.197

这个解决方案不会解释什么是错的，但我认为它会解决你的问题。

将您创建的新项目中的元素复制到旧项目中并替换受影响的视图控制器。也复制类。

您的连接一定有问题，但您提供的信息无法检查。

如果这不起作用，那么它必须是导航中的某些内容（怀疑）或您在类上的某些自定义代码（如果您拥有的所有代码都在 viewDidLoad 中，如您所示，则非常困难）。

# database - 如何在网络上获取 smartclient 示例？

> ID：12690189
> 
> 赞同：0
> 
> 时间：2012-10-02T12:24:30.503
> 
> 标签：database, web-applications, smartclient

我几乎完全迷路了。我在 smartclient 论坛上发了两次帖子，但没有得到任何帮助，所以也许这里的人比他们自己的员工更友好。（这真的让我很困扰，但他们似乎拥有我想做的最好的软件）

我正在努力思考如何在我的网络主机上获取他们的一个示例（我下载的演示展示等），只是想看看它是如何工作/使用它的，但我找不到任何关于此的论坛指南或视频等（文档对于那些不会说代码的人来说真的很糟糕）。

我的虚拟主机上是否需要一些特殊的后端？我在哪里可以弄清楚如何将这些东西链接在一起？我是否必须使用 java.. 等编译一些东西。我习惯于在 notepad++ 中编辑东西，上传它，然后点击刷新，但我猜 smartclient 不是那么简单，或者是吗？（我只是要用它从我可以过滤的excel电子表格中制​​作表格，就是这样，没有花哨的应用程序）。

真诚的，完全迷失的先生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:37:11.403

指南涵盖了所有内容（第 6 页）：[http ://www.smartclient.com/docs/8.2/docs/SmartClient_Quick_Start_Guide.pdf](http://www.smartclient.com/docs/8.2/docs/SmartClient_Quick_Start_Guide.pdf)

SmartClient 嵌入了所有需要的东西，你只需要一个有效的 JDK 安装和他们网站上提供的 zip。

# c++ - 类析构函数 SEGFAULT

> ID：12690192
> 
> 赞同：2
> 
> 时间：2012-10-02T12:24:54.203
> 
> 标签：c++, segmentation-fault, destructor, delete-operator

在我的项目中，我有两个类，`EarleyParser`类：

```
class EarleyParser
{

    public:

        EarleyParser();
        virtual ~EarleyParser();

        void initialize( string filePath, bool probabilityParse );

    private:

        bool probabilityParser;

        typedef unordered_map< string, list<Production> > productionHashTable;
        productionHashTable earlyHashTable;

}; 
```

和`Production`班级：

```
class Production
{
    public:

        Production();

        Production( float productionProbability, int productionLength, vector< string >* productionContent );

        Production( const Production& copy_me );

        virtual ~Production();

        float getProductionProbability();
        int getProductionLength();
        vector< string >* getProductionContent();

    private:

        float productionProbability;
        int productionLength;
        vector< string >* productionContent;

        void setProductionProbability( float productionProbability );
        void setProductionLength( int productionLength );
        void setProductionContent( vector< string >* productionContent );

}; 
```

正如你在上面看到的，这个`EarlyParser`类有一个成员元素是一个[`unordered_map`](http://www.cplusplus.com/reference/stl/unordered_map/)，它的关键元素是一个字符串，值是类[`list`](http://www.cplusplus.com/reference/stl/list/)中元素的一个`Production`。

代码可以正常工作，并且`unordered_map`和`list`被填充，但是在调用标准析构函数类时`EarleyParser`出现分段错误。

据我了解，默认析构函数`EarleyParser`应该调用的默认析构函数`unordered_map`应该调用其中一个`list`应该调用其每个元素的`Production`类的默认析构函数，如下所示：

```
Production::~Production()
{
    if( this->productionContent != NULL )
        delete this->productionContent; <- line 44
} 
```

使用 Valgrind 和 GDB 进行回溯并没有给我太多帮助来解决分段错误，这在`EarleyParser.cpp`析构函数的第 44 行中给出。

我应该实现析构函数类，还是默认析构函数可以？关于可能导致分段错误的任何想法？

**添加的副本构造函数**

```
Production::Production( const Production& copy_me )
{
    if( this->productionContent != NULL )
        this->productionContent = NULL;

    this->setProductionProbability( copy_me.productionProbability );
    this->setProductionLength( copy_me.productionLength );

    this->setProductionContent( copy_me.productionContent );

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:33:55.713

你的三法则不完整。由于您有一个指针成员，因此您要确保已实现*复制构造函数*、*复制赋值运算符*和*析构函数*。

现在，因为你有一个指向`vector`member 的指针，所以我要告诉你，你**不应该有 that**，而应该只有 a`std::vector<std::string>`或 a `std::unique_ptr<std::vector<std::string> >`。

我不知道您*为什么*决定需要保存指向容器的指针，但这通常不是一个好的理由，而且容易出错。

您可以持有对容器的*引用*，但您需要确保它已在 ctor 中初始化。

指针的问题在于它们太容易被抓住作为“解决方案”，但实际上极易出错且难以使用。如果您*不再考虑指针*并且不再倾向于在每一个转折点使用它们，那么您的时间就会轻松得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:30:33.500

有两种选择。

1.  要么在 中动态分配一个向量`Production`，在这种情况下，你需要一个赋值运算符来对向量指针进行深拷贝。您的复制构造函数也应该这样做。在这种情况下，您应该遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

2.  或者，您在构造函数中获取指向向量的指针`Production`并且不执行深度复制，在这种情况下`Production`不拥有该向量并且不应在析构函数中将其删除。

如果您有案例 1，我建议删除指针并按`std::vector`值保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:34:05.123

我没有看到 productionContent 变量的任何初始化。尝试使用初始化程序将其初始化为 NULL。未初始化的成员变量的默认值不为空。

这意味着 productionContent != NULL 将始终为真，因为它开始时不是 NULL。

在所有构造函数中尝试这样的事情：

```
Production::Production( const Production& copy_me ) : productionContent(NULL)
{
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:04:46.070

您对指针有任何好的或坏的理由，请使用 std::shared_ptr （作为成员和构造函数参数），您做的越少，您做的越多。std::shared_ptr 将为您生成 nullptr 和删除！

# android - 如何在android上全局捕获错误？

> ID：12690196
> 
> 赞同：0
> 
> 时间：2012-10-02T12:25:01.940
> 
> 标签：android

当发生异常时，我尝试将其报告给日志服务器。

我在使用时发现了一个继承 java.lang.RuntimeException 的异常`Thread.setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler handler)`。但我没有发现任何继承了 java.lang.Error 的子类。（例如 OutOfMemoryError、IOError、...）

所以我使用`Runtime.addShutdownHook(Thread hookThread)`，但该`hookThread.run()`方法从未被调用。

我如何在android上全局捕获错误？我不想使用其他进程.. 我只想尝试报告日志服务器上的错误。

对不起大家，我尝试继续捕获错误抛出，我知道 java.lang.Error 也被捕获。但未在 UncaughtExceptionHandler.uncaughtException() 中运行已实现的函数。

只是..打印日志以供检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:49:05.167

我解决它。只是我错了。我处理 Throwable 对象以获取日志信息。但我使用 Throwable.getCause() 方法，当发生 java.long.Error 时，它为空。

在 uncaughtException() 方法中，当发生异常时，不准确打印日志。

谢谢你，轴。

# c# - 如何将其放入 XML 标记中

> ID：12690209
> 
> 赞同：5
> 
> 时间：2012-10-02T12:25:58.910
> 
> 标签：c#, xml

我试图`<!CDATA>`在我的文件中放入一个特定的标签`XML`，但结果是`&lt;![CDATA[mystring]]&gt;`

有人可以帮助我吗？

编码

```
XmlProcessingInstruction pi = doc.CreateProcessingInstruction("xml", "version=\"1.0\" encoding=\"utf-8\""); 
```

我过得怎么样

```
texto.InnerText = "<![CDATA[" + elemento.TextoComplementar.ToString() + "]]>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:28:18.547

```
XmlNode xnode = xdoc.SelectSingleNode("entry/entry_status");

XmlCDataSection CData; 
```

`InnerText`执行任何需要的转义。

```
xnode.InnerText = "Hi, How are you..??"; 
```

如果您想与之合作`CDATA node`：

```
CData = doc.CreateCDataSection("Hi, How are you..??"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T12:28:32.343

您尚未解释如何创建 XML - 但它看起来像是通过`XmlDocument`.

因此，您可以使用[`CreateCDataSection`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createcdatasection.aspx).

首先创建 CData 节点，提供要放入其中的文本，然后将其作为子节点添加到 XmlElement。

您可能应该考虑使用[Linq to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)来处理 XML - 在我最谦虚的意见中，它有一个更自然的 API 来创建 XML，取消了 XML DOM 模型，取而代之的是允许您内联创建整个文档树的 API . 例如，这就是您如何创建具有属性和 cdata 部分的元素：

```
var node = new XElement("root", 
  new XAttribute("attribute", "value"),
  new XCData("5 is indeed > 4 & 3 < 4")); 
```

# javascript - 大图像和javascript

> ID：12690211
> 
> 赞同：1
> 
> 时间：2012-10-02T12:26:09.553
> 
> 标签：javascript, three.js

我正在使用使用 Three.js 的 pannellum (http://www.mpetroff.net/archives/2012/08/28/pannellum-1-2/)，我正在使用它来处理本地文件。它适用于小文件，但我拥有的图像是 5000 * 10000，它不会加载它们。有什么限制以及如何将其用于大图像。我可以使用 img 标签加载图像并将该图像注入应用程序吗？在代码中我发现我有：

```
var panoimage = new Image(); 
```

我可以用他的东西代替它吗？

```
 var panoimage = document.getElementById('PanImage'); 
```

Image() 的源代码在哪里？它是JS的一部分吗？我找不到关于这门课的任何信息。

## 编辑 1

我对 pannellum 进行了以下更改，因此它从 html 上的图像加载图像，而不是动态加载它。

在 pannellum.htm 我添加了以下 html：

```
 <img id='panimage' src="000063.jpg" style="visibility: collapse;"/> 
```

在 pannellum.js 中，我将第 104 行更改为：

```
var panoimage = document.getElementById('panimage'); 
```

我也注释掉了

```
panoimage.onerror = function() { 
```

所以应该在图像下载后立即调用的代码（因为当我们到达他的点图像已经下载时）

我还注释掉了设置图像来源的行。

它不下载图像。它只显示黑屏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:03:52.697

我发现各种浏览器会自行决定不渲染他们认为太大的图像（请参阅我不久前提出的[这个问题](https://stackoverflow.com/questions/9317112/are-there-any-arbitrary-restrictions-on-maximum-image-pixel-size-in-ie-and-webki)）。可悲的是，这取决于用户代理。Canvas 有时有处理这个问题的抽象，但上次我在 DHTML 中处理非常大的图像时，我不得不放弃（甚至将它们切成一口大小的小块，但一段时间后它们就无法渲染了）。

`new Image()`是一种旧的 DOM 方法，用于在文档之外从头开始生成图像元素——[在此处记录](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images)。你的第一行相当于：

```
var panoimage = document.createElement('img'); 
```

您已将其替换为有效的行会获取文档中已经存在的图像，而不是从头开始创建新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:15:57.240

看Pannellum源码，好像是用Three.js的WebGL渲染器。WebGL 对 GPU 施加的纹理大小（以及它可以渲染的图像大小）有限制。你可以在这里检查你的（“最大纹理大小”）：http: [//jsfiddle.net/DA7wr/](http://jsfiddle.net/DA7wr/)

想到的另一件事是使用非二次幂图像大小和[错误类型的纹理参数](https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support)，但由于 Pannellum 演示也有 NPOT 图像，我想这不是问题。

# events - 事件不会触发自定义属性 EPiServer

> ID：12690213
> 
> 赞同：0
> 
> 时间：2012-10-02T12:26:14.887
> 
> 标签：events, episerver, customproperty

由于某种原因，我的按钮不会触发点击事件。至于现在我只有一个带有 runat、OnClick 和 Id 属性的 asp:button。我检查了几次事件的名称与OnClick 属性的值。它确实会触发 Page_Load 事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:18:43.673

是你的方法名`ButtonId_Click`什么？

如果不是，请确保您已`AutoEventWireup="false"`在页面声明中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:58:15.027

Page_Load 在每个页面加载/回发时触发。因此，它会触发任何提交按钮。

您可以在代码隐藏中发布您的 HTML 以及事件处理程序吗？

# javascript - 如何在单独的帖子上满足或绕过 Asp.net WebForms 中的视图状态验证？

> ID：12690214
> 
> 赞同：0
> 
> 时间：2012-10-02T12:26:14.793
> 
> 标签：javascript, asp.net, validation, webforms, viewstate

我在 Webforms 页面中有一个链接，该链接在新窗口中打开，并发布到页面本身以外的表单。这样做是这样的：

**JS：**

```
var submitFunc = function(){
    document.forms[0].action = 'http://urlToPostTo/somePage.aspx';  
    document.forms[0].target = '_blank'; 
    document.forms[0].submit();
} 
```

**链接：**

```
<input type="hidden" id="myDataId" value="12345" />     
<a href="javascript:submitFunc();">Search</a> 
```

如您所见，这会覆盖 main 的目标`<form>`，并尝试发布到不同的页面。重点是这应该发布/提交到不同的页面，同时避免将“myDataId”的数据作为*Get*参数传递。

上面的代码可以工作，但由于视图状态验证而导致错误。

**问题**：我有什么方法可以满足这里的要求，或者以某种方式绕过视图状态验证，以便我可以以这种方式发布我的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:26:21.227

听起来您只需要更改**`PostBackUrl`**提交表单的按钮。

发布到**PostToPage2.aspx**（而不是回发）的简单示例**PostToPage1.aspx ：**

 **```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="text1" runat="server" /><br />
    <asp:TextBox ID="text2" runat="server" />
    <asp:Button ID="btn1" runat="server" PostBackUrl="~/PostToPage2.aspx" />
</div>
</form> 
```

然后，您可以检查`Request`in`PostToPage2.aspx`以检查它是否是 POST 等，然后访问in中的`Request.Form`集合。`Request``Page_Load`

**PostToPage2.aspx**的过度简化示例（添加适当的验证）：

```
if (!Page.IsPostBack && Request.RequestType == "POST")
    {
        if (Request.Form != null && Request.Form.Keys.Count > 0)
        {
           ..... 
```

嗯...**

# regex - VB.NET 用正则表达式替换字符串

> ID：12690220
> 
> 赞同：0
> 
> 时间：2012-10-02T12:26:30.723
> 
> 标签：regex, vb.net

我在 VB.NET 中遇到了正则表达式的一些问题。

我有一个这样的字符串：`"[Type=User][User=Hello]Thats the message"`

我想要这个`"Thats the message"`部分，所以我认为最好的方法是`"[Type=User][User=Hello]"`替换`""`.

笔记：

*   `"Thats the message"`总是在字符串的末尾，它可以是`""`（不带字符）。

*   `[Type=XXXX]`可以是任何东西，我的意思是，它可以是`[Type=Password]`，`[Type=Message]`...

所以，这就是我所做的：

```
Dim regOptions As RegexOptions = RegexOptions.IgnoreCase Or RegexOptions.Singleline
Regex.Replace(buffer, "^(.*)[^\]]*$", "", regOptions) 
```

它不起作用，字符串'buffer'没有被修改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:32:24.590

根据[该重载的文档，](http://msdn.microsoft.com/en-us/library/taz3ak2f%28v=vs.90%29.aspx)它将返回结果字符串（毕竟，在 .Net 中，字符串是不可变的）。

因此，请尝试：

```
buffer = Regex.Replace(buffer, "^(.*)[^\]]*$", "", regOptions) 
```

# android - 空指针访问：变量上下文在这个位置只能为空

> ID：12690221
> 
> 赞同：-2
> 
> 时间：2012-10-02T12:26:31.063
> 
> 标签：android

我一直在线收到此错误，但如果我删除空值，我会在上下文中收到错误，告诉我初始化变量..

```
nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE); 
```

**这是我的代码**

```
 public void createDialog(Enter_med enter_med) {
        // TODO Auto-generated method stub

        Context context = null;

        NotificationManager nm;
          nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);        
          CharSequence from = "VIPUL";
          CharSequence message = "Crazy About Android...";
          PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            new Intent(), 0);
          Notification notif = new Notification(R.drawable.ic_launcher,
            "Crazy About Android...", System.currentTimeMillis());
          notif.setLatestEventInfo(context, from, message, contentIntent);
          nm.notify(1, notif);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:38:02.060

您应该尝试`context`在您的`onCreate`.

```
Context context;
public void onCreate(...){
   ...
   context = this;
   ...
} 
```

然后你用它`nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);`

您的问题是您需要使用活动上下文来启动它，而不是`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:28:27.223

您正在使用 null 初始化上下文，然后使用它。
您应该使用活动上下文对其进行初始化

# jquery - jQuery.When 总是调用失败

> ID：12690226
> 
> 赞同：0
> 
> 时间：2012-10-02T12:26:47.883
> 
> 标签：jquery, jquery-deferred

我正在使用 jQuery.when 发出两个 ajax 请求，查看正在发出请求的萤火虫，似乎返回了状态代码为 200 的正确数据，但正在执行失败回调而不是完成回调。我究竟做错了什么？

```
function method1() {
    return $.ajax("/queryapp/query/asset-graph-data", {
        data: {
            assetId: 'e886c48b-77f9-4577-ab7b-b1c7245e2746'
        },
        dataType: 'application/json',
        headers : { 'X-Authentication' : authValue, 'X-Tenant' : 'cfd' }
    })
    .done(function(){
        console.log('1');
    })
    .fail(function(){
       console.log('fail 1');
    });
}

function method2() {
    return $.ajax("/queryapp/query/asset-graph-data", {
        data: {
            assetId: 'e886c48b-77f9-4577-ab7b-b1c7245e2746',
            start: '3445455',
            end: '90000'
        },
        dataType: 'application/json',
        headers : { 'X-Authentication' : authValue, 'X-Tenant' : 'cfd'}
        })
        .done(function(){
            console.log('2');
        })
        .fail(function(){
            console.log('fail 2');
        });
    }

    $.when(method2(), method1()).done(function (r1, r2) {
        var test = 'ksks';
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:33:40.783

`dataType`应该`"json"`，不是`'application/json'`。我认为这就是问题所在。

# php - 买家在magento产品页面填写的字段

> ID：12690228
> 
> 赞同：4
> 
> 时间：2012-10-02T12:26:55.030
> 
> 标签：php, ajax, magento

我一直在寻找，但找不到这样的东西。我需要创建一个产品页面，买家将在其中填写一些文本字段，然后再将产品添加到购物车。

最像这个页面的东西：http: [//bitly.com/Sw4jzR](http://bitly.com/Sw4jzR)

添加到购物车时，它也需要保存字段。

有人在magento中看到过这样的事情吗？有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T12:33:03.997

您需要使用*自定义选项*。这是[教程](http://www.magentoadvisor.com/magento-backup/complex-magento-products-part-2-simple-products-with-custom-options/)的链接。

# internet-explorer - IE9 中的 F12 开发人员工具未加载动态内容的样式选项卡信息

> ID：12690229
> 
> 赞同：3
> 
> 时间：2012-10-02T12:27:00.130
> 
> 标签：internet-explorer, internet-explorer-9, ie-developer-tools

I'm working on IE 7 and 8 HTML/CSS fixes, but when I use the Developer Tools and try to look at dynamically loaded HTML you first can't select the newly added elements, but then I read that you should hit the refresh in the toolbar which works. But, when you inspect any of the elements the style information in the style tab doesn't show properly.

All it shows is something like the following: inherited - html inherited - body inerhited - div inerhited - div inerhited - div

You can't expand these to see the actual attributes and values like you would with elements that aren't dynamically loaded.

Is there a workaround for this?

Regards, Jacques

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T10:32:05.603

有。

这是一个肮脏的解决方法，但应该允许您检查可能已动态添加到 dom 的元素。

请看下面的截图：

![选择元素和编辑按钮](../Images/99b355d91fe5621466ae480babc34202.png)

如果您无法选择元素（箭头按钮），请单击编辑按钮（使用铅笔），您将进入编辑模式。再次单击编辑退出编辑模式，现在应该可以选择元素。

> **“编辑模式”**
> 
> ![编辑模式](../Images/57e89901a18442a96c51ef9b1e17d3a6.png)

*有时进入和退出编辑模式可能会产生副作用，但这种技术适用于大多数情况。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:57:15.487

你试过 FireBug lite 吗？这是一个完全使用 JavaScript 编写的 FireBug 版本，它允许您在 IE 中使用大多数常见的 firebug 功能。它适用于 IE 6 及更高版本。

我过去在 iPad 上调试时成功使用过它，在 iOS 6 之前，无法检查 HTML。它同样适用于 IE。

你可以在这里阅读更多关于它的信息：http: [//getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:27:57.457

我自己也遇到过这个问题。

我使用[Head.js](http://headjs.com/)的扩展版本来加载样式表链接以及脚本文件。我现在有一个需要调查的特定 IE8 样式错误，但动态添加的样式不会出现在开发人员工具中。

要调试它，我想我将不得不暂时静态添加 css 文件。Chrome 和 Firefox 开发工具可以处理这种动态样式。如果我有通用样式问题，那很好，但是当它是特定于 IE 时，我必须跳过一些障碍。

我想不出对此的“解决方案”。不幸的是，我们受制于 IE 开发工具。也许 IE 10 开发工具更好，但我现在使用的是 Windows 7。

# python - python lib检测模糊图像

> ID：12690231
> 
> 赞同：4
> 
> 时间：2012-10-02T12:27:05.227
> 
> 标签：python, image, blur

有谁知道在python（或任何其他lib / app）中检测模糊图像的最后技术？

实际上我使用 ffmpeg 从视频中提取帧。这个想法是检查这些提取的帧并删除模糊的帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-02T05:16:19.727

对于问这个问题的人来说，这有点晚了。我在这里找到了一个链接，可以检测图像中的模糊量。

通过使用 OpenCV、Python 和拉普拉斯算子。

[使用 OpenCV 进行模糊检测](https://www.pyimagesearch.com/2015/09/07/blur-detection-with-opencv/)

可能对其他人有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:31:24.410

我不知道有什么库可以做到这一点，但我建议你看看[Image gradient](http://en.wikipedia.org/wiki/Image_gradient)。由于模糊图像没有“边缘”，因此模糊图像的梯度值之和低于同一非模糊图像的图像梯度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T16:01:56.510

我试过这个，效果很好。不完美但还不错。 [https://gist.github.com/shahriman/3289170](https://gist.github.com/shahriman/3289170)

# c# - 手动填充 ReportViewer

> ID：12690236
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:27:08.260
> 
> 标签：c#, mysql, reportviewer

我需要手动填写报告查看器，我的意思是不要通过向导创建数据集，而是全部通过代码创建。我正在使用 Visual Studio 2010 C# + MySql

实际上我需要创建一个带有过滤器的报告查看器（当前日期时间）如果您对我的问题有更好的建议，我会很感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:17:58.673

ReprotViewer 可以使用 DataTable 作为报告源，在您的一个问题中，您已经从 MYSQL 填充数据表，当您拥有包含数据的数据表时。然后你需要告诉报表查看器使用你的数据表作为数据源。
我建议您下载示例项目[http://gotreportviewer.com/Objectds.zip](http://gotreportviewer.com/Objectds.zip)和[http://gotreportviewer.com/InvoiceMaker.zip](http://gotreportviewer.com/InvoiceMaker.zip)，看看他们如何将数据源应用于报告。

# android - 手机间隙屏幕图像不适合屏幕

> ID：12690237
> 
> 赞同：2
> 
> 时间：2012-10-02T12:27:12.610
> 
> 标签：android, cordova

android 应用程序与手机差距，但 html 页面中的图像大于 android 屏幕。你能给我提供如何根据屏幕调整 html 页面中的图标大小的解决方案吗？请找到随附的代码。如何重置图像以适应屏幕。你可以在这里下载安卓源代码 [https://rapidshare.com/files/422996060/PhoneGap.zip](https://rapidshare.com/files/422996060/PhoneGap.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:30:50.740

我注意到您在代码中指定了绝对宽度。如果您只想将其留给浏览器来确定宽度，您可以执行类似[fiddle](http://jsfiddle.net/4m5xd/)的操作。

```
<img src="someImage.jpg" width="100%"> 
```

更改“结果”窗口的大小，您将看到图像扩展和收缩以适合页面。

如果你需要在你的 phonegap 应用程序中有精确的宽度，你可以使用[这个适用于 Android 的插件](https://github.com/raananw/PhoneGap-Image-Resizer)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T14:18:21.397

你甚至可以这样做：

```
img {
    height:100%;
    width:100%;
    } 
```

# sencha-touch-2 - 标签面板默认 应用再次登录后不显示标签

> ID：12690239
> 
> 赞同：1
> 
> 时间：2012-10-02T12:27:19.087
> 
> 标签：sencha-touch-2

我在 sencha touch 2.0 工作。我意外地在选项卡面板中遇到问题。在我的一个页面上，我有带有三个选项卡（按名称、按部门、按位置）的 TabPanel。它们工作正常，但是当我从应用程序中激活按部门和注销选项卡并再次进入此页面时，默认激活选项卡必须是按名称。但是活动选项卡是我之前激活以注销（按部门）的选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:44:52.270

你能发布一些代码吗？从选项卡面板开始。另外，检查您是否有“autodestroy: false”。如果您的配置中有它可能会导致问题。除此之外，如果不看看你是如何设置的，就很难说。听起来它没有被删除，而是被隐藏了，另一个页面在它上面。

# scala - LDAP 用于 Playframework 2.0 中的身份验证和授权

> ID：12690247
> 
> 赞同：7
> 
> 时间：2012-10-02T12:27:59.570
> 
> 标签：scala, authentication, ldap, authorization, playframework-2.0

我正在使用`Playframework`with开发一个小网站`Scala`，我需要向我的网站添加身份验证和授权。我的教授让我检查一下`LDAP`。[所以我查了一下，除了这里](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/-xZ9Ei037DI)的 Google 群组中的讨论外，我没有发现任何有趣的东西。

我也发现了这个模块 [https://github.com/t2v/play20-auth](https://github.com/t2v/play20-auth)但我不能很好地理解它的代码。

所以我问这个：是否可以`LDAP`与`Playframework`and一起使用`Scala`？如果是这样，是否有可以帮助我开始的教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:53:13.173

LDAP 可用于访问目录服务。目录/目录可用作用户名和密码的存储，但如果您只是存储用户名和密码，则可能有点矫枉过正，因为它们最适合企业规模并具有许多其他功能。我所知道的最正常的用例不是直接使用 LDAP 进行身份验证（尽管完全有可能），而是使用它进行授权以从例如获取用户的角色。Active Directory 与 SSO 相结合（例如 kerberos/ntlm 身份验证）。

要使用它，您应该在您的身份验证和/或授权代码中查看 ldap 客户端库（例如[http://www.springsource.org/ldap ）。](http://www.springsource.org/ldap)

您提到这是一个“小网站”，我认为 LDAP 对于您的情况来说可能是矫枉过正。如果它是一个小型站点，您应该使用您提到的现成模块，并使用散列和加盐密码持久保存到数据库。如果您想使用 LDAP，那么您应该查看 OpenDJ( [http://forgerock.com/what-we-offer/open-identity-stack/opendj/](http://forgerock.com/what-we-offer/open-identity-stack/opendj/) )，如果您正在寻找一个干净简单的 LDAP 目录服务。

# java - Java 库通过 ssh 在远程服务器上运行多个不相关的命令

> ID：12690248
> 
> 赞同：2
> 
> 时间：2012-10-02T12:28:00.397
> 
> 标签：java, shell, ssh, expectj

我的 Java 应用程序必须像这样工作：

1.  用户在 GUI 中选择 bash 命令并按“发送”。
2.  应用程序为每个命令返回不同且独立的答案（例如，我们可以将它们存储在不同的文件中）。
3.  每个命令都以交互方式运行，而不是批量运行（不能像“ls\n pwd \n”等）
4.  在每个命令之后，应用程序将检查结果是否正常。如果是这样，它将发送下一个命令。
5.  我们需要`su <user>`在远程主机上执行。

这将是一个更大应用程序的插件，因此“尝试其他”（即 RPC、Web 服务）之类的答案对我没有帮助:(

据我了解，我必须使用 SHELL 或至少保持通道连接。

我已经测试过 jsch 、 sshj 和 ethz.ssh2 但结果很糟糕。

我已经通过stackoverflow对以下问题的答案进行了挖掘：“sending-commands-to-server-via-jsch-shell-channel”等。但它们都专注于在一行中发送整个命令。我需要一个交互式的、持久的 SSH 会话。

我用过ExpectJ（对输出流做了一点修改）。它已经解决了第 1、3、4、5 点。

**但是**第 2 点存在问题。在我的应用程序中，我需要得到单独的答案。但我们不会知道它们的长度。命令提示符可以不同。任何人都知道如何“破解”ExpectJ，所以它会更加同步吗？我正在寻找这样的行为：**发送，等待完整答案，发送，等待......**我尝试了一些基本的同步技巧，但这通常会导致超时和连接丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:51:43.773

您应该使用[ExpectJ ，它](http://expectj.sourceforge.net/)[是Unix`expect`实用程序](http://www.nist.gov/el/msid/expect.cfm)的Java 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T16:13:07.903

不确定您是否还有问题，无论如何，它可能会影响其他人。

ExpectJ 确实是 Unix expect 的 Java 实现。你绝对应该买“探索期望书”然后看看它，这是值得的。

对于您的问题：当您生成一个进程时，您会听取返回输出，将其与提示匹配，然后发送一些命令。如果要分析输出，请缓冲该输出，并在下一次 send() 之前执行一些操作

为此，您需要使用您使用的 spawn 类的 interact() 方法。 [http://expectj.sourceforge.net/apidocs/index.html](http://expectj.sourceforge.net/apidocs/index.html)

以及交互及其工作原理：http: [//oreilly.com/catalog/expect/chapter/ch03.html](http://oreilly.com/catalog/expect/chapter/ch03.html) 查找这部分：“交互命令”

# c# - LINQ To SQL 部分类仅继承一个类而没有其关系

> ID：12690261
> 
> 赞同：0
> 
> 时间：2012-10-02T12:28:53.247
> 
> 标签：c#, linq-to-sql, partial-classes

我有一些 LINQ to SQL 实体表，它们之间存在关系。谁能告诉我一个快速的方法来创建一个只继承一个类而不包括其相关实体的部分类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:33:10.377

> 创建一个仅继承一个没有其相关实体的类的部分类

首先，当你声明一个类因为`partial`你没有*继承*任何东西时，你就是在*扩展*这个类。`partial`所做的只是允许您跨不同的文件构建一个类，因此本质上，当您向其添加属性/方法时，就像将其添加到原始声明中一样。

其次，它引出了一个问题，*为什么*要忽略相关的实体属性？它们会自动添加为便捷方法，因此您可以访问相关表中的数据。如果您不想要这种关系，我的建议是在设计时将其从上下文中删除（请记住，如果您从数据库中更新上下文，则关系将再次被拉下）。

# java - 模态对话框关闭窗口激活框架

> ID：12690267
> 
> 赞同：1
> 
> 时间：2012-10-02T12:29:20.830
> 
> 标签：java, swing, dialog, modal-dialog, parent

关闭文档模式 JDialog 时，是否可以使 Java Swing 激活父 JFrame？默认机制似乎激活了最后一个 JFrame 而不是父 JFrame。这可能会使用户感到困惑。

这是一些重现问题的示例代码：

1：按下按钮“步骤 1：按下这个”
2：按下按钮“步骤 2：按下这个”
3：将 JFrame 放在前面，标题为“步骤 3：激活这个”
4：关闭标题为“的 JDialog”第 4 步：关闭此“

=> 现在，带有文本“frame 1”的 JFrame 应该放在前面。
=> 相反，带有文本“第 3 步：激活此”的 JFrame 位于前面。
=> 对于用户来说，这很令人困惑，因为关闭的 JDialog 是第 1 帧的文档模式

```
 public static void main(String[] args) {
    final JFrame f1 = new JFrame("frame 1");
    f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f1.setLayout(new FlowLayout());
    f1.add(new JButton(new AbstractAction("step 1: press this") {

        @Override
        public void actionPerformed(ActionEvent e) {
            JFrame f2 = new JFrame("step 3: activate this");
            f2.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            f2.setLayout(new FlowLayout());
            f2.add(new JLabel("step 3: activate this"));
            f2.pack();
            f2.setVisible(true);
        }
    }));
    f1.add(new JButton(new AbstractAction("step 2: press this") {

        @Override
        public void actionPerformed(ActionEvent e) {
            JDialog d = new JDialog(f1, "step 4: close this", ModalityType.DOCUMENT_MODAL);
            d.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            d.setLayout(new FlowLayout());
            d.add(new JLabel("step 4: close this"));
            d.pack();
            d.setVisible(true);
        }
    }));
    f1.pack();
    f1.setVisible(true);
} 
```

有任何想法吗 ？（我不想手动调用 f1.toFront()，因为会导致窗口短暂“闪烁”）

最好的问候马塞尔

# javascript - 检测浏览器并显示其他内容

> ID：12690270
> 
> 赞同：1
> 
> 时间：2012-10-02T12:29:34.093
> 
> 标签：javascript, html, css, internet-explorer

我只用 CSS3 和 HTML5 建立一个网站。所以IE不能正确显示。我想向每个 Internet Explorer 用户展示一个内容简单的其他站点：请使用现代浏览器，例如 Google Chrome、Fire Fox ...

如何检测浏览器并显示其他站点？或者我可以为 Internet Explorer 用户构建一个文本，例如

```
<div style="display:none;">Please use a modern Browser!</div> 
```

并且只为 Internet Explorer 用户显示它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:32:02.547

你可以利用 IE 检测到 IE 本身推出。因此，将 div 放置为无显示，然后制作一个 ie 样式表并定位您想要的所有不同版本。

有关详细信息的更多信息：http: [//css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:25:45.687

有更好的选择，而不是添加新的样式表

```
<!doctype html>
<!--[if lt IE 7 ]> <html class="ie ie6" lang="en-US"> <![endif]-->
<!--[if IE 7 ]> <html class="ie ie7" lang="en-US"> <![endif]-->
<!--[if IE 8 ]> <html class="ie ie8" lang="en-US"> <![endif]-->
<!--[if IE 9 ]> <html class="ie ie9" lang="en-US"> <![endif]-->
<!--[if gt IE 9]><!-->
<html lang="en-US">
<!--<![endif]--> 
```

在样式表中只需为选择器添加一个类

```
.page {
    //some style for morden browsers
}
.ie .page {
    //some style for all ie versions
}
.ie6 .page {
    //some style for ie 6 only
}
.ie7 .page {
    //some style for ie 7 only
}
.ie8 .page {
    //some style for ie 8 only
}
.ie9 .page {
    //some style for ie 9 only
} 
```

它将使用单个样式表完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:33:40.587

`navigator.userAgent`

这里有一个很酷的脚本：[http ://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T12:37:18.863

您可以使用以下内容：

```
<?php
$u_agent = $_SERVER['HTTP_USER_AGENT']; 
if(preg_match('/MSIE/i', $u_agent)) 
{ 
    // Change http://www.othersite.com, by your other site URL
    header('Location: http://www.othersite.com'); 
} 
?> 
```

您还可以对 IE 使用条件注释。

# jsf - 为什么在 EL 中取消引用空指针时不引发异常？

> ID：12690271
> 
> 赞同：1
> 
> 时间：2012-10-02T12:29:37.893
> 
> 标签：jsf, null, el

我有这样的 facelets 代码：

```
<h:inputText id="name" value="#{userCreationManager.user.creatorAspect.name}" /> 
```

现在我很确定那`creatorAspect`是`null`在最初渲染视图的时候。但是我对此也不例外，并且`h:inputText`使用空的初始内容呈现。在回发时，我确实收到一个错误：

> 目标无法到达，“creatorAspect”返回 null

正如预期的那样。为什么会出现这种差异？

# php - Drupal：从节点正文字段的第一个 img-tag 创建视图图像字段

> ID：12690272
> 
> 赞同：1
> 
> 时间：2012-10-02T12:29:38.677
> 
> 标签：php, drupal, drupal-7, drupal-views

我在 Drupal 7 中有一个呈现节点队列的视图。现在我希望每个节点都使用标题、文本摘要和图像来呈现，如果该节点正文字段内有图像可用。

我正在考虑创建一个使用正则表达式的模块，例如：

```
/<img.+src="([^"]+)/i 
```

...在该节点的主体字段中找到第一个图像并将其呈现为视图字段并将该字段称为“内容：第一个图像”。

我还想拥有图像样式选项等。可用于已经存在的图像字段。

我应该如何创建这样的模块，我应该使用哪些钩子来使该字段可用于视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:17:12.223

我会使用字段模板来做到这一点。创建一个正文字段，然后在其上应用模板。像这样的东西：

```
<?php
preg_match_all("/<img[^']*?src=\"([^']*?)\"[^']*?>/", $output, $image);

if(isset($image[1][0]) && trim($image[1][0])!='') {
  echo theme('image_style', array('style_name' => 'Large', 'path' => $image[1][0]));
}
?> 
```

您也可以使用显示套件代码字段获得相同的结果。

# android - Android 小部件和两个不同的 PendingIntents

> ID：12690276
> 
> 赞同：0
> 
> 时间：2012-10-02T12:29:49.653
> 
> 标签：android

这是我想要实现的目标： 带有 3 个按钮的小部件： 1\. 查看文件夹 2\. 添加项目 3\. 添加项目并启动相机以将照片附加到项目。

我希望通过使用带有附加功能的 Intent 来实现 2&3，如果单击了第三个按钮，只需添加一个布尔额外的“照片”以保持真实，这是我的代码：

```
Intent intent = new Intent(Intent.ACTION_INSERT);
        intent.setData(Uri.parse("content://"
                + NoteProviderMetaData.AUTHORITY + "/folders/"
                + folderId));
intent.putExtra("photo", false);
intent.putExtra("kind", "NO PHOTO");
intent.setAction(Intent.ACTION_INSERT);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
views.setOnClickPendingIntent(R.id.imageButton2, pendingIntent);

Intent intentFolder = new Intent(Intent.ACTION_VIEW);
        intentFolder.setData(Uri.parse("content://"
                + NoteProviderMetaData.AUTHORITY + "/folders/"
                + folderId + "/notes"));
PendingIntent pendingIntentFolder = PendingIntent.getActivity(this, 0, intentFolder, 0);
Intent intentPhoto = new Intent(Intent.ACTION_INSERT);
intentPhoto.setData(Uri.parse("content://"
        + NoteProviderMetaData.AUTHORITY + "/folders/"
                + folderId));
intentPhoto.putExtra("photo", true);
intentPhoto.putExtra("kind", "PHOTO");
intentPhoto.setAction(Intent.ACTION_INSERT);
PendingIntent pendingIntentPhoto = PendingIntent.getActivity(this, 0, intentPhoto, 0);
views.setOnClickPendingIntent(R.id.imageButton3, pendingIntentPhoto); 
```

问题是，在我创建`pendingIntentPhoto`我的`pendingIntent`附加内容后，我的附加值立即被新值覆盖，并且我总是在我的活动中 获得`true`和值。意图有效，所以我想只使用另一个意图动作就可以了，但我想了解这个 PendingIntent 事情是如何工作的。`PHOTO``pendingFolder`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:42:44.023

我能够使用此方法的未记录功能来实现这一点：

`public static PendingIntent getActivity (Context context, int requestCode, Intent intent, int flags)`

从文档： `requestCode Private request code for the sender (currently not used).`

Apparently this code is currently used somehow. Supplying different requestCodes to this method calls allowed me to create different `PendingIntents` for the same widget.

# java - 为移动应用程序提供 html 的宁静资源

> ID：12690277
> 
> 赞同：0
> 
> 时间：2012-10-02T12:29:59.017
> 
> 标签：java, html, rest, jersey, templating

我们目前处理与后端 api* 和移动（ios 和 android）应用程序之间的通信。

对于一个愚蠢的类似横幅的东西，我们应该为这些应用程序提供一些它们将呈现的 HTML。

现在是这样完成的：

```
String html ="<html>.....{somePlaceHolder}...</html>";
html = html.replace("{somePlaceHolder}", "We're good");
Gson gson = gsonBuilder.create();
gson.toJson(html); 
```

这对我来说看起来很糟糕。在 json 中包装 html 是非常没用的。我相信一些模板引擎可以帮助我们。

我想知道最好的方法是什么。我想我可以有一些可以加载的 HTML 文件，然后让我的其余资源生成**application/xhtml+xml**或**text/html**这一次而不是 json。

任何人都对一些最佳实践有建议。

谢谢

*我们使用 jax-rs/jersey

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:49:26.747

不确定我是否正确理解了整个问题，但你为什么希望你的 RESTful 服务首先返回 HTML。

我想 RESTful 服务应该返回 JSON（或 XML，就此而言），但重点是，它应该只返回实际数据；根本没有 HTML，尤其是没有将 HTML 封装到 JSON 中。

调用 RESTful 服务的应用程序应该负责数据的显示，即将数据包装成 HTML。

# php - PHP：尝试并捕获异常

> ID：12690279
> 
> 赞同：0
> 
> 时间：2012-10-02T12:30:05.073
> 
> 标签：php, mysql

这是我在 PHP 中的尝试捕获

```
try{
    print (string)((int)$screenname+ 1);
    $query2 = 'SELECT * FROM callerdetail WHERE screenname="'.(string)((int)$screenname+ 1).'" AND status="0" AND agent = "'.$agent.'" LIMIT 1;';
    $result =   mysql_query($query2) or die (mysql_error());

}
catch(Exception $e){
    $query3 = 'SELECT * FROM callerdetail WHERE status="0" AND agent = "'.$agent.'" LIMIT 1';
    $result =   mysql_query($query3) or die (mysql_error());
} 
```

我正在尝试根据屏幕名称获取数据，如果它不可用，那么我想执行 catch 块 sql 语句。

不幸的是，它对我不起作用。我的数据库中有一个屏幕名称 = 2 的数据，但我没有获取该数据，而是获取代理的新数据

任何想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:35:12.940

从[文档](http://nl3.php.net/mysql_query)中：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

因此，您的 catch 块永远不会被调用，因为 mysql_query 不会引发异常。

使用`if`构造，或自己*抛出**异常*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:37:51.030

为什么会抛出“异常”？没有什么会导致“异常”。

if 语句不是更好吗？

```
$query2 = 'SELECT * FROM callerdetail WHERE screenname="'.(string)((int)$screenname+ 1).'" AND status="0" AND agent = "'.$agent.'" LIMIT 1;';
$result =   mysql_query($query2) or die (mysql_error());

if(mysql_num_rows($result) > 0 ){ // Got a result
    // Do something
) else {
    // Execute other query
    $query3 = 'SELECT * FROM callerdetail WHERE status="0" AND agent = "'.$agent.'" LIMIT 1';
    $result =   mysql_query($query3) or die (mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:37:43.900

您`;`在 try 块中有查询

```
$query2 = 'SELECT * FROM callerdetail WHERE screenname="'.(string)((int)$screenname+ 1).'" AND status="0" AND agent = "'.$agent.'" LIMIT 0,1'; 
```

并`limit`正确使用

# python - 在python中打开后检查打开的文件是否已被删除

> ID：12690281
> 
> 赞同：17
> 
> 时间：2012-10-02T12:30:08.960
> 
> 标签：python, filesystems

是否可以检查文件是否已在 python 中被删除或重新创建？

例如，如果您`open("file")`在脚本中执行了 a ，然后在该文件仍处于打开状态时执行`rm file; touch file;`，那么即使旧文件已被删除，该脚本仍将保留对旧文件的引用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T13:01:50.080

您应该`fstat`打开文件的文件描述符。

```
>>> import os
>>> f = open("testdv.py")
>>> os.fstat(f.fileno())
posix.stat_result(st_mode=33188, st_ino=1508053, st_dev=65027L, st_nlink=1, st_uid=1000, st_gid=1000, st_size=1107, st_atime=1349180541, st_mtime=1349180540, st_ctime=1349180540)
>>> os.fstat(f.fileno()).st_nlink
1 
```

好的，这个文件有一个链接，所以文件系统中有一个名称。现在删除它：

```
>>> os.unlink("testdv.py")
>>> os.fstat(f.fileno()).st_nlink
0 
```

没有更多的链接，所以我们有一个“匿名文件”，[只要我们打开它，它就会一直保持活动状态](https://stackoverflow.com/a/5219960/166749)。创建同名的新文件对旧文件没有影响：

```
>>> g = open("testdv.py", "w")
>>> os.fstat(g.fileno()).st_nlink
1
>>> os.fstat(f.fileno()).st_nlink
0 
```

当然，`st_nlink`有时可能是`>1`最初的，因此检查为零并不完全可靠（尽管在受控设置中，它可能已经足够好了）。`stat`相反，您可以通过比较结果来验证您最初打开的路径中的文件是否与您拥有文件描述符的文件相同：

```
>>> os.stat("testdv.py") == os.fstat(f.fileno())
False
>>> os.stat("testdv.py") == os.fstat(g.fileno())
True 
```

（如果您希望这是 100% 正确，那么您应该只比较结果中的`st_dev`和`st_ino`字段`stat`，因为其他字段，`st_atime`尤其是在调用之间可能会发生变化。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T12:40:37.440

是的。使用[该`os.stat()`功能](http://docs.python.org/library/os.html#os.stat)检查文件长度。如果长度为零（或函数返回错误“找不到文件”），则有人删除了该文件。

或者，您可以在每次需要向其中写入内容时打开+写入+关闭文件。缺点是打开文件是一个非常慢的操作，所以如果您需要写入大量数据，这是不可能的。

为什么？因为新文件不是您打开的文件。简而言之，Unix 文件系统有两个层次。一级是目录项（即文件名、文件大小、修改时间、指向数据的指针），二级是文件数据。

当您打开一个文件时，Unix 使用该名称来查找文件数据。之后，它只在第二级运行——对目录条目的更改对任何打开的“文件句柄”都没有影响。这正是您可以删除目录条目的原因：您的程序没有使用它。

使用 时`os.stat()`，您不会查看文件数据，而是再次查看目录条目。

从积极的方面来说，这允许您创建除了您的程序之外没有人可以看到的文件：打开文件，删除它然后使用它。由于该文件没有目录条目，因此没有其他程序可以访问该数据。

消极的一面是，你不能轻易解决你所遇到的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T12:49:04.977

是的——您可以使用该`inotify`工具检查文件更改等。还有一个 Python[绑定](http://pyinotify.sourceforge.net/)。使用 inotify 您可以监视文件或目录的文件系统活动。从手册中可以检测到以下事件：

```
IN_ACCESS         File was accessed (read) (*).
IN_ATTRIB         Metadata changed, e.g., permissions, timestamps, extended attributes, link count (since Linux 2.6.25), UID, GID, etc. (*).
IN_CLOSE_WRITE    File opened for writing was closed (*).
IN_CLOSE_NOWRITE  File not opened for writing was closed (*).
IN_CREATE         File/directory created in watched directory (*).
IN_DELETE         File/directory deleted from watched directory (*).
IN_DELETE_SELF    Watched file/directory was itself deleted.
IN_MODIFY         File was modified (*).
IN_MOVE_SELF      Watched file/directory was itself moved.
IN_MOVED_FROM     File moved out of watched directory (*).
IN_MOVED_TO       File moved into watched directory (*).
IN_OPEN           File was opened (*). 
```

从这里你可以用谷歌搜索自己的解决方案，但我认为你明白了整体的想法。当然，这可能仅适用于 Linux，但根据您的问题，我假设您正在使用它（参考`rm`和`touch`）。

# c# - System.IO.FileSystemWatcher 的 Created 事件是同步触发还是异步触发？

> ID：12690287
> 
> 赞同：1
> 
> 时间：2012-10-02T12:30:37.150
> 
> 标签：c#, .net, filesystemwatcher

如果在被监控的文件夹中同时创建 x 个新文件，Created 事件是同时触发 x 次还是一个接一个触发 x 次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:45:22.397

filesystemwatcher 类使用内部缓冲区来存储文件更改（这可能会溢出，这将导致事件丢失），这将一个接一个地调用订阅类型的事件，直到缓冲区为空。默认情况下这是异步运行的。只要[文档](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.synchronizingobject.aspx)中描述了 SynchronizingObject 属性，就会使用默认值。您可以通过设置 SynchronizingObject 来使其行为同步，如[本答案中所述。](https://stackoverflow.com/a/1360759/1694922)

另请注意，从文档中，即使有多个文件观察者正在观察同一个文件夹，也只有一个文件观察者会收到文件更改事件。

总结：默认情况下，这些事件存储在缓冲区中，然后由单独的线程快速连续触发，直到缓冲区为空。如果创建或更改的文件过多，则可能会由于缓冲区溢出而丢失某些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:32:01.643

它同时触发`x`多次。您可以让`Created`多个文件同时运行该事件。

# jqgrid - 如何将xml数据分配给jqgrid

> ID：12690289
> 
> 赞同：0
> 
> 时间：2012-10-02T12:30:52.640
> 
> 标签：jqgrid

```
jQuery("#assignfixtureTable").jqGrid({     
    url : successdata,
    datatype: "xml",
    height: 250, 
```

我想将 xml 数据分配给 jqgrid ，我不想调用 url 并将其分配给它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:55:17.570

您可以使用数据类型并使用该选项`xmlstring`传递您的 xml 数据。`datastr`这是[文档页面](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#xml_string)中的一个示例：

```
<script>
var mystr =
"<?xml version='1.0' encoding='utf-8'?>
<invoices>
    <rows>
        <row>
            <cell>data1</cell>
            <cell>data2</cell>
            <cell>data3</cell>
            <cell>data4</cell>
            <cell>data5</cell>
            <cell>data6</cell>    
        </row>
    </rows>
</invoices>";

jQuery(document).ready(function(){ 
  jQuery("#list").jqGrid({
    datatype: 'xmlstring',
    datastr : mystr,
    colNames:['Inv No','Date', 'Amount','Tax','Total','Notes'],
    colModel :[ 
      {name:'invid', index:'invid', width:55, sorttype:'int'}, 
      {name:'invdate', index:'invdate', width:90, sorttype:'date', datefmt:'Y-m-d'}, 
      {name:'amount', index:'amount', width:80, align:'right', sorttype:'float'}, 
      {name:'tax', index:'tax', width:80, align:'right', sorttype:'float'}, 
      {name:'total', index:'total', width:80, align:'right', sorttype:'float'}, 
      {name:'note', index:'note', width:150, sortable:false} ],
    pager: '#pager',
    rowNum:10,
    viewrecords: true,
    caption: 'My first grid'
  }); 
}); 
</script> 
```

# powerbuilder - PowerBuilder DataWindow 对象 编辑

> ID：12690291
> 
> 赞同：2
> 
> 时间：2012-10-02T12:30:58.943
> 
> 标签：powerbuilder, datawindow

我有一个带有一些列的 DataWindow。一列包含某个对象的编号。我想在此列上放置一个编辑（掩码？），以便当它大于 0 时，将列值更改为“可用”。

我怎样才能在设计视图中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:44:13.023

我会删除该列（放松...从 UI 中删除该列并不等同于从数据集中删除它）并将其替换为具有类似表达式的计算字段：

```
if (col > 0, "Available", "Unavailable") 
```

祝你好运，

特里。

# html - 引导下的表单在 FF/Chrome 中不统一

> ID：12690293
> 
> 赞同：1
> 
> 时间：2012-10-02T12:31:04.670
> 
> 标签：html, forms, firefox, twitter-bootstrap, cross-browser

我最近开始在我的项目中使用 Bootstrap。总而言之，这是一个非常有用的项目，但是我偶然发现了表单外观的问题。请查看我在 Firefox 中查看以下网页时制作的底部图片：http: [//bootstrap-forms.heroku.com/](http://bootstrap-forms.heroku.com/)

![复选框严重未对齐](../Images/fa32c8657ce5d5f1632ca4f44bfd45af.png) ![选择很丑](../Images/204a9db41c906eb51446c1dde8ce5f1e.png)

这是非常非常令人失望的，因为在 Chrome 上它看起来很完美。我不仅需要覆盖默认浏览器颜色——我在 KDE/openSUSE 中使用黑色主题，而且我还需要为 Firefox 手动对齐标签——我不想这样做！

对于跨浏览器修复这些表单的快速解决方案有什么建议吗？至少是对齐问题。

Firefox 报告版本为 15.0.1，Linux/openSUSE 版本为 12.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:17:04.920

解决方案是编辑`userContent.css`位于`.mozilla/firefox/<profile>/chrome/`目录中的文件。

我添加了以下内容：

```
* {
  -moz-appearance: none;
} 
```

默认情况下，此属性会导致 Firefox 在非样式按钮/收音机/复选框等上使用本机系统小部件。不幸的是，我的设置似乎有问题。有关详细信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance 。](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance)

# python - 如何使用python从某个获取内容？ 我有一些s，像这样： 10876151[yangfanhit](userstatus?user_id=yangfanhit)[s，像这样： 10876151](problem?id=)[yangfanhit](userstatus?user_id=yangfanhit)[3155](problem?id=3155)Accepted344K219MSC++3940B2012-10-02 16:42:45 10876150[BandBandRock](userstatus?user_id=BandBandRock)[2503](problem?id=2503)Accepted16348K2750MSG++840B2012-10-02 16:42:25 我想获取没有 html 标签的内容，例如： yangfanhit 3155 Accepted 344K 219MS C++ 3940B 2012-10-02 16:42:45 现在我正在使用以下代码来处理它： response = urllib2.urlopen('http://poj.org/status', timeout=10) html = response.read() response.close() pattern = re.compile(r'') match = pattern.findall(html) pat = re.compile(r'.*?') p = re.compile(r'<[/]?.*?>') for item in match: for i in pat.findall(item): print p.sub(r'', i) print '=================================================' 我是正则表达式的新手，也是 python 的新手。那么你能建议一些更好的方法来处理它吗？ 您真的不需要直接使用正则表达式来解析 html，请参阅此处的答案。 或者参见Dive into Python Chapter 8关于 HTML 处理。 pythonregex 4 4 回答 4 This answer is useful 1 您可以使用它BeautifulSoup来解析 html。以 csv 格式写入表格的内容： #!/usr/bin/env python import csv import sys import urllib2 from bs4 import BeautifulSoup # $ pip install beautifulsoup4 soup = BeautifulSoup(urllib2.urlopen('http://poj.org/status')) writer = csv.writer(sys.stdout) for tr in soup.find('table', 'a')('tr'): writer.writerow([td.get_text() for td in tr('td')]) 输出 Run ID,User,Problem,Result,Memory,Time,Language,Code Length,Submit Time 10876151,yangfanhit,3155,Accepted,344K,219MS,C++,3940B,2012-10-02 16:42:45 10876150,BandBandRock,2503,Accepted,16348K,2750MS,G++,840B,2012-10-02 16:42:25 于 2012-10-02T12:51:48.940 回答 This answer is useful 1 也看看PyQuery。如果你熟悉 jQuery，很容易上手。这是一个将表头和数据作为字典列表返回的示例。 import itertools from pyquery import PyQuery as pq # parse html html = pq(url="http://poj.org/status") # extract header values from table header = [header.text for header in html(".a").find(".in").find("td")] # extract data values from table rows in nested list detail = [[td.text for td in tr] for tr in html(".a").children().not_(".in")] # merge header and detail to create list of dictionaries result = [dict(itertools.izip(header, values)) for values in detail] 于 2012-10-02T14:02:59.383 回答 This answer is useful 0 当您已经拥有可以轻松为您完成工作的 HTML/XML 解析器时，为什么还要做这些事情 使用BeautifulSoup。考虑到上面问题中提到的你想要什么，它可以在 2-3 行代码中完成。 例子： >>> from bs4 import BeautifulSoup as bs >>> html = """ 10876151[yangfanhit](userstatus?user_id=yangfanhit)[3155](problem?id=3155)Accepted344K219MSC++3940B2012-10-02 16:42:45 10876150[BandBandRock](userstatus?user_id=BandBandRock)[2503](problem?id=2503)Accepted16348K2750MSG++840B2012-10-02 16:42:25 """ >>>soup = bs(html) >>>soup.td >>>10876151 于 2012-10-02T12:47:06.537 回答 This answer is useful 0 您真的不需要直接使用正则表达式来解析 html，请参阅此处的答案。 或者参见Dive into Python Chapter 8关于 HTML 处理。 于 2012-10-02T12:37:40.393 回答 Related 2 bash - Bash 脚本移交输入而不是退出 1 bash - shell脚本中的grep 1 ios - webkitcore 编译失败 2 javascript - 使用 jQuery 获取多个查询字符串值 1 java - Spring-Security OpenId 不起作用 2 php - 在 wordpress 中哪里可以找到 origing category.php 文件？ 2 javascript - 根据选择列表中的所选选项运行函数？（没有 jQuery 是首选） 4 java - java四舍五入到小数点后两位 0 macos - git svn 返回空存储库 0 linux - linux：使用clone的函数性能而不使用clone()或sys_clone，我可以这样做吗？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12690300
> 
> 赞同：0
> 
> 时间：
> 
> 标签：python, regex

我有一些`<tr>`s，像这样：

```
<tr align=center><td>10876151</td><td><a href=userstatus?user_id=yangfanhit>yangfanhit</a></td><td><a href=problem?id=3155>3155</a></td><td><font color=blue>Accepted</font></td><td>344K</td><td>219MS</td><td>C++</td><td>3940B</td><td>2012-10-02 16:42:45</td></tr>
<tr align=center><td>10876150</td><td><a href=userstatus?user_id=BandBandRock>BandBandRock</a></td><td><a href=problem?id=2503>2503</a></td><td><font color=blue>Accepted</font></td><td>16348K</td><td>2750MS</td><td>G++</td><td>840B</td><td>2012-10-02 16:42:25</td></tr> 
```

我想获取没有 html 标签的内容，例如：

```
yangfanhit
3155
Accepted
344K
219MS
C++
3940B
2012-10-02 16:42:45 
```

现在我正在使用以下代码来处理它：

```
response = urllib2.urlopen('http://poj.org/status', timeout=10)
html = response.read()
response.close()

pattern = re.compile(r'<tr align.*</tr>')
match = pattern.findall(html)
pat = re.compile(r'<td>.*?</td>')
p = re.compile(r'<[/]?.*?>')
for item in match:
    for i in pat.findall(item):
        print p.sub(r'', i)
    print '=================================================' 
```

我是正则表达式的新手，也是 python 的新手。那么你能建议一些更好的方法来处理它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:51:48.940

您可以使用它[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)来解析 html。以 csv 格式写入表格的内容：

```
#!/usr/bin/env python
import csv
import sys
import urllib2
from bs4 import BeautifulSoup # $ pip install beautifulsoup4

soup = BeautifulSoup(urllib2.urlopen('http://poj.org/status'))

writer = csv.writer(sys.stdout)
for tr in soup.find('table', 'a')('tr'):
    writer.writerow([td.get_text() for td in tr('td')]) 
```

### 输出

```
Run ID,User,Problem,Result,Memory,Time,Language,Code Length,Submit Time
10876151,yangfanhit,3155,Accepted,344K,219MS,C++,3940B,2012-10-02 16:42:45
10876150,BandBandRock,2503,Accepted,16348K,2750MS,G++,840B,2012-10-02 16:42:25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:02:59.383

也看看[PyQuery](http://packages.python.org/pyquery/)。如果你熟悉 jQuery，很容易上手。这是一个将表头和数据作为字典列表返回的示例。

```
import itertools
from pyquery import PyQuery as pq

# parse html
html = pq(url="http://poj.org/status")

# extract header values from table
header = [header.text for header in html(".a").find(".in").find("td")]

# extract data values from table rows in nested list
detail = [[td.text for td in tr] for tr in html(".a").children().not_(".in")]

# merge header and detail to create list of dictionaries
result = [dict(itertools.izip(header, values)) for values in detail] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:47:06.537

当您已经拥有可以轻松为您完成工作的 HTML/XML 解析器时，为什么还要做这些事情

使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。考虑到上面问题中提到的你想要什么，它可以在 2-3 行代码中完成。

例子：

```
>>> from bs4 import BeautifulSoup as bs
>>> html = """
<tr align=center><td>10876151</td><td><a href=userstatus?user_id=yangfanhit>yangfanhit</a></td><td><a href=problem?id=3155>3155</a></td><td><font color=blue>Accepted</font></td><td>344K</td><td>219MS</td><td>C++</td><td>3940B</td><td>2012-10-02 16:42:45</td></tr>
<tr align=center><td>10876150</td><td><a href=userstatus?user_id=BandBandRock>BandBandRock</a></td><td><a href=problem?id=2503>2503</a></td><td><font color=blue>Accepted</font></td><td>16348K</td><td>2750MS</td><td>G++</td><td>840B</td><td>2012-10-02 16:42:25</td></tr>
"""

>>>soup = bs(html)
>>>soup.td
>>><td>10876151</td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T12:37:40.393

您真的不需要直接使用正则表达式来解析 html，[请参阅此处的答案](https://stackoverflow.com/a/2950223/492620)。

或者参见[Dive into Python Chapter 8](http://www.diveintopython.net/html_processing/index.html)关于 HTML 处理。

# html - 使用 explorer 9 的 Mailto 操作 - 空白电子邮件

> ID：12690303
> 
> 赞同：1
> 
> 时间：2012-10-02T12:31:53.777
> 
> 标签：html, internet-explorer, outlook, mailto

我有一个 html 表单，我要发送给外部客户，以便他们填写并发送回给我。当他们单击表单上的提交按钮时会出现问题。

出于某种原因，在 Windows 7 64 位、Outlook 2010 和 explorer 9 中，mailto 操作对我不起作用。将显示一条空的 Outlook 消息，并且仅添加主题和收件人。没有附件，也没有正文。当我将默认浏览器更改为 FF 时，我会在正文部分收到我想要的文本，而不是作为附件 (postdata.att)。我不能使用服务器代码，因为 html 表单是由 Outlook 发送给外部客户的，所以 asp/php/cgi 对我来说无关紧要。外部客户无法访问组织的 Intranet，并且由于 html 表单作为电子邮件附件发送，因此它也不托管在 Internet 服务器上。

有没有人有解决方案？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:34:56.883

> mailto 操作对我不起作用。

mailto 取决于正确配置的浏览器和电子邮件客户端的特定组合。它不适合在动作属性中公开使用，因为支持太差了。

请改用服务器端进程。请注意，HTML 电子邮件中的表单支持也很差，因此您应该链接到 Web 上托管的表单。

> 我不能使用服务器代码，因为 html 表单是由 Outlook 发送给外部客户的，所以 asp/php/cgi 对我来说无关紧要。

您需要设置一个面向公众的网络服务器。

# azure - Azure队列：查找项目是否在队列中

> ID：12690307
> 
> 赞同：12
> 
> 时间：2012-10-02T12:32:04.217
> 
> 标签：azure, azure-storage

是否可以查询天蓝色队列以查找项目是否位于指定队列中的某个位置（基于某些关键属性）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:44:02.210

**Azure 队列**用于异步消息传递，而不是搜索。如果您需要索引支持，您应该使用**Azure 表**或**SQL Azure DB 。**

**Azure Queues**只会让您[**查看下一条消息**而无需出队](https://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/#peek-message)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-31T12:12:28.560

请检查[Microsoft Azure 存储](https://azure.microsoft.com/en-au/features/storage-explorer/)。这是管理内容的好工具。上传、下载和管理 blob、文件、队列、表和 Cosmos DB 实体。

队列消息可以如下图所示进行管理： [![在此处输入图像描述](../Images/1587b5cb9f43116b3cd5bd701e7fb40a.png)](https://i.stack.imgur.com/W6lHO.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T20:53:05.890

当然，在消息队列中执行搜索操作是非常糟糕的方法，但你可以尝试这样的事情：

```
 var qm = queue.GetMessages(20);
        if (!qm.Any(x => x.AsString.Contains(key_property)))
        {
            queue.AddMessage(message);
        } 
```

# javascript - javascript/jquery 的语法问题

> ID：12690308
> 
> 赞同：0
> 
> 时间：2012-10-02T12:32:04.513
> 
> 标签：javascript, jquery, html-lists

我正在用 jquery 创建一个列表

```
$('<li value="0" onclick="'if(cond){ }'"> </li>).appendTo('#ul list'); 
```

问题出在 onclick 部分，有人可以告诉我正确的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:34:22.973

既然你使用jQuery，那么就不要使用`onclick`属性。

```
$('<li>').attr('value', '0').click(function() {
  if (cond) {
    //...
  }
}).appendTo('#ul list'); 
```

# javascript - jQuery 点击除了 div 和它的子元素之外的所有东西

> ID：12690313
> 
> 赞同：10
> 
> 时间：2012-10-02T12:32:24.170
> 
> 标签：javascript, jquery

当我点击任何地方时，我想做一些事情，除非我点击一个 div 并且它是孩子。这是我迄今为止尝试过的，但它不起作用（点击它的孩子仍然执行括号内的内容。

```
$('body').on('click', '* :not(#calculator)',  function(e){ 
```

我不能使用这样的东西：

[jQuery - 选择除单个元素及其子元素之外的所有内容？](https://stackoverflow.com/questions/9173055/jquery-select-everything-except-a-single-elements-and-its-children)

```
$("body > *").not("body > #elementtokeep").remove(); 
```

因为`.not`函数不是我可以放在`.on()`函数内部的东西。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T12:39:15.977

使用 not 和逗号来同时拥有两个选择器：元素本身和子元素

```
jQuery(document.body).on("click", ":not(#calculator, #calculator *)", function(e){ 
    console.log(this); 
    e.stopPropagation(); 
});​​​​​​​ 
```

[jsFiddle](http://jsfiddle.net/ALANT/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T12:36:05.993

您可以在函数内部检查有问题的元素：

```
$('body').click( function(e){
    if (!$(e.target).is("#calculator") || $("#calculator").has(e.target).length ) {
        // do your stuff
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T07:42:58.583

我没有足够的要求来添加推荐，所以我需要在这里向**@epascarello 提问**。当我生了几个孩子时，A和B仍然受到影响。我不确定我是否错了，但我真的很想得到解决方案。

```
jQuery(document.body).on("click", ":not(#calculator, #calculator *)", function(e){ 
    console.log(this); 
    e.stopPropagation(); 
    alert('test');
}); 
```

[现场演示](http://jsfiddle.net/ALANT/28/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T12:56:56.940

代替

```
$('body').on('click', '* :not(#calculator)',  function(e){

});​ 
```

您可以使用（首选此版本，因为它性能更高）

```
$("body").on("click", ":not(#calculator, #calculator *)", function(e){ 

});​ 
```

或者

```
$("body :not(#calculator, #calculator *)").on("click", function(e){ 

});​ 
```

# jquery - 用jquery将子元素移动到最后一个位置的最干净的方法？

> ID：12690316
> 
> 赞同：1
> 
> 时间：2012-10-02T12:32:34.830
> 
> 标签：jquery

这就是我目前的做法：

```
function switchcontent(wait){
    //fade out image1
    $('#feature-img img:first-child, ').delay(wait).fadeOut('slow', function() {
        //fade in imag2
        $('#feature-img img:nth-child(2)').fadeIn('slow');
        var prev_img = ($(this).clone())
        $('#feature-img').append(prev_img);
        $(this).remove()
        switchcontent(wait);
    });
}; 
```

我对这个解决方案不是很满意，特别是因为我也想将它应用于子元素的另一个元素。

当前的 HTML：

```
<div class="images span7">
  <img src="featured_1.png">
  <img src="featured_2.png">
</div> 
```

我想要一些也适用于：

```
<div class="feature-text">
  <div>
    <h1>Lugn i din eknonomi</h1>
    <p>Zenconomy är smart fakturering, redovisning och rapportering på nätet. Vi underlättar vardagen för företagare, redovisningsbyråer och programmerare.</p>
  </div>
  <div>
    <h1>GRAPH</h1>
    <p>GRAPH OF APPROVAL!</p>
  </div>
</div> 
```

或任何其他带有子元素的元素:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:38:30.437

见[http://jsbin.com/ufahiy/1/edit](http://jsbin.com/ufahiy/1/edit)

```
$('div img:first').appendTo('div'); 
```

这会将第一个元素移动为 div 的最后一个元素

无需克隆和删除它：`append()`您要移动的一个元素就足够了。您可以使用 firebug 检查 DOM 并查看更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:39:39.440

```
$('#feature-img').append(prev_img);
        $(this).remove() 
```

你不需要克隆它来追加。直接附加它，它会被移动。

```
prev_img=$(this);
$('#feature-img').append(prv_img); 
```

# c# - 控件可见取决于数据库中存在的内容

> ID：12690317
> 
> 赞同：1
> 
> 时间：2012-10-02T12:32:35.137
> 
> 标签：c#, asp.net, mysql, data-binding

我需要帮助的是：我在数据库（MySql）中有一个名为`seq_orcamento`允许 null 的字段，当它不为 null 时，我需要 FormView 中的 LinkBut​​ton（它具有作为数据源的 SqlDataSource）可见。我在选择命令中所做的是

```
SELECT CASE seq_orcamento WHEN NOT NULL THEN '1' ELSE '0' END AS idc_seq FROM log_transacao 
```

`idc_seq = 1`它工作正常，但是有没有办法在 LinkBut​​ton 变得可见时进行某种绑定？

如果有必要，我使用代码隐藏没有问题，我使用的是 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:09:25.833

您可以使用 FromView 控件的 DataBound 事件

```
protected void FormView1_DataBound(object sender, EventArgs e)
    {
       DataRowView dataRow = ((DataRowView)FormView1.DataItem);
       LinkButton lb= (LinkButton )FormView1.FindControl("LinkButton ");

       if (Convert.ToBool(DataBinder.Eval(formview.DataItem, "idc_seq") ) )
        { lb.visible=true;     }
       else{lb.visible=false;}

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:50:20.230

我找到了一种方法：在 Visible 属性中我添加了代码

```
Visible='<%# Eval("idc_seq") == "1" ? true : false %>' 
```

不知道能不能用，因为我需要在网站发布的时候使用它，我稍后会尝试

# objective-c - 迁移到 Xcode 4.5 后与可达性相关的未定义符号

> ID：12690319
> 
> 赞同：3
> 
> 时间：2012-10-02T12:32:44.730
> 
> 标签：objective-c, ios, xcode, restkit, reachability

将我的 Xcode 项目从在 Xcode 4.2 上运行的 Mac 移动到另一台运行 Xcode 4.5 的 Mac 后，我收到以下错误。

```
 "_SCError", referenced from:
      -[RKReachabilityObserver scheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
      -[RKReachabilityObserver unscheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
  "_SCErrorString", referenced from:
      -[RKReachabilityObserver scheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
      -[RKReachabilityObserver unscheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
  "_SCNetworkReachabilityCreateWithAddress", referenced from:
      +[Reachability reachabilityWithAddress:] in Reachability.o
      +[Reachability reachabilityWithAddress:] in test1ViewController.o
      -[RKReachabilityObserver initWithAddress:] in libRestKit.a(RKReachabilityObserver.o)
  "_SCNetworkReachabilityCreateWithName", referenced from:
      +[Reachability reachabilityWithHostName:] in Reachability.o
      +[Reachability reachabilityWithHostName:] in test1ViewController.o
      -[RKReachabilityObserver initWithHost:] in libRestKit.a(RKReachabilityObserver.o)
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[Reachability connectionRequired] in Reachability.o
      -[Reachability currentReachabilityStatus] in Reachability.o
      -[Reachability connectionRequired] in test1ViewController.o
      -[Reachability currentReachabilityStatus] in test1ViewController.o
      -[RKReachabilityObserver getFlags] in libRestKit.a(RKReachabilityObserver.o)
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[Reachability startNotifier] in Reachability.o
      -[Reachability startNotifier] in test1ViewController.o
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[Reachability startNotifier] in Reachability.o
      -[Reachability startNotifier] in test1ViewController.o
      -[RKReachabilityObserver scheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
  "_SCNetworkReachabilitySetDispatchQueue", referenced from:
      -[RKReachabilityObserver scheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
      -[RKReachabilityObserver unscheduleObserver] in libRestKit.a(RKReachabilityObserver.o)
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[Reachability stopNotifier] in Reachability.o
      -[Reachability stopNotifier] in test1ViewController.o
ld: symbol(s) not found for architecture i386 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T13:13:03.033

SCError, SCErrorString, ... 都来自*SystemConfiguration.framework*，因此目标的“Link Binary With Libraries”设置中似乎缺少。

（在许多情况下，“未定义符号...”链接器错误可以通过在 XCode 文档浏览器中查找*不带前导下划线*的符号来解决。在文档页面的顶部，您可以找到定义符号的框架。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T07:12:11.433

我有一个类似的问题。添加 SystemComfiguration.framework 后，问题就解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:51:51.930

您忘记将 SystemConfiguration.framework 添加到您的项目中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-21T19:27:30.373

尝试创建一个新方案。我在 Xcode 6.3 中看到了类似的错误消息——这为我解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T12:37:26.413

看起来您可能忘记包含 RestKit。[添加库](http://cupsofcocoa.com/2012/06/16/adding-frameworks-to-an-xcode-project/)，看看您是否仍然遇到问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T12:59:12.220

问题很可能是该项目不包括 RestKit。转到您的 Target -> Build Phases -> Link 并验证您实际上是否有 RestKit。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-14T17:11:48.867

1.  添加`SystemComfiguration.framework`到您的目标。
2.  还添加`#import <SystemConfiguration/SystemConfiguration.h>`

# dojo - 禁用或启用 dojox 数据网格中选择性单元格的编辑

> ID：12690324
> 
> 赞同：2
> 
> 时间：2012-10-02T12:33:35.853
> 
> 标签：dojo, dojox.grid.datagrid, dojox.grid, xpages-extlib

如何禁用或启用 dojox 数据网格中选择性单元格的编辑，即

想象一下，我在数据网格中有两列（A，B）。我希望 B 的列值可以根据 A 列的值进行编辑。我在堆栈溢出中看到了一种解决方案，该解决方案特定于 DOJO 版本。我想知道是否有 API 可以实现上述目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:29:59.693

我的首选方法是覆盖

`canEdit: function(inCell, inRowIndex)`

数据网格的方法。从那里，你可以得到项目：

`this.getItem(inRowIndex)`

然后确定它是否应该是可编辑的，并返回真/假。

不过，这确实会覆盖列上的可编辑标志，因此如果需要，您需要对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:00:41.423

没有这样的 API。我最近也有类似的要求，这是我实现它的方式：

1) 最初 B 列是可编辑的，因为我在网格的字段部分中这样做了 2) 使用 onRowClick 捕获行的呈现。这样的事情应该做

```
dojo.connect(grid, "onRowClick", grid, function(evt){
  var idx = evt.rowIndex,
  item = this.getItem(idx);

  //  get a value out of the item
  msname = this.store.getValue(item, "msname");
  if(msname != null &U& (trim(msname) == trim(offsetName))) {
    dojox.grid.cells._Base.prototype.format(idx, item);
  }
}); 
```

然后，以下方法不允许对所需列进行内联编辑。我们将行索引和列索引传递给以下函数：

```
dojox.grid.cells._Base.prototype.format = function(inRowIndex, inItem){
    var f, i=grid.edit.info, d=this.get ? this.get(inRowIndex, inItem) : (this.value || this.defaultValue);
    d = (d && d.replace && grid.escapeHTMLInData) ? d.replace(/&/g, '&amp;').replace(/</g, '&lt;') : d;

                //Check inRowIndex and inItem to determine whether to be editable for this row here.

    if(this.editable && (this.alwaysEditing || (i.rowIndex==inRowIndex && i.cell==this))){
    return this.formatEditing(d, inRowIndex);
    }else{
    return this._defaultFormat(d, [d, inRowIndex, this]);
    }
} 
```

希望有帮助。可能您可以添加一个 jsfiddle，我们可以尝试修复它。

# c++ - C++ catch 由 PPL parallel_for 引发的错误

> ID：12690330
> 
> 赞同：2
> 
> 时间：2012-10-02T12:33:59.253
> 
> 标签：c++, exception, parallel-processing, try-catch, ppl

我编写了这段代码来捕获 ppl 发起的错误

```
 try
    {
        parallel_for (m_row_start, m_row_end + 1, [&functionEvaluation,varModel_,this](int i)
        {
             // do things
        });
    }
    catch(const std::exception error_)
    {
        QString t(error_.what());
    }

    try
    {
        return functionEvaluation.combine(plus<double>());
    }
    catch(const std::exception error_)
    {
        QString t(error_.what());
    } 
```

尽管我强烈怀疑它确实引发了异常，但没有发现任何错误（`try{}catch(...){}`它捕获一个更大的`std::exception`，没有明确的消息。

我对捕获 ppl 代码中引发的异常的语法是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:38:07.993

您的语法是正确的，尽管您没有理由无法通过引用来避免不必要的异常对象复制：

```
 catch(const std::exception & error_) 
```

1.  检查引发的异常是否实际源自`std::exception`.
2.  PPL 只允许在所有线程完成后传播异常，您是否有一个仍在运行的线程阻止您看到异常？

出于调试目的，您可以添加一个额外的 catch 块：

```
catch(...)
{
  cout << "Unknown exception" << endl;
} 
```

只是为了检查您是否抛出了任何类型的异常，但是我不会将其留在生产代码中，因为没有办法对异常有效地做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:38:19.033

首先，检查抛出的内容。如果你打错了catch，它不会反应。也许它只是 CONST 标记？const-type 与 non-const-type 不同，但实际上我不太记得 catch 是否对 const-volatile 敏感。

其次，除非出现强有力的理由，否则总是通过引用来捕捉：

```
catch(std::exception& error) 
```

如果不这样做，则会发生异常复制：http: [//www.parashift.com/c++-faq/what-to-catch.html](http://www.parashift.com/c++-faq/what-to-catch.html)复制是指对象复制，而不是重新提升；）

# delphi - 创造 *。Mht 文件（网络存档）

> ID：12690331
> 
> 赞同：4
> 
> 时间：2012-10-02T12:34:00.073
> 
> 标签：delphi, blocking, mhtml, imessage

使用以下函数表示从本地 html 文件生成 Web 存档

```
function TLessonConstructor2.CreateMHT( const FileName : string):boolean ;
 var
  oMSG:IMessage;
  oConfig: IConfiguration;
  sFileName: string;
  Stream: _Stream;
begin
  //CoInitializeEx(nil, COINIT_APARTMENTTHREADED);
  //CoInitialize(nil);
  try
    Result  := false;
    sFileName := ChangeFileExt(FileName, '.mht');
    DeleteFile(PAnsiChar(sFileName));
    try
    oConfig := CoConfiguration.Create();
    oMSG    := CoMessage.Create();
    oMSG.Configuration := oConfig;
    oMSG.CreateMHTMLBody(FileName,CdoSuppressNone,'','');
    Stream:=oMSG.GetStream;
    Stream.SaveToFile(sFileName,adSaveCreateOverWrite);
    Stream.Cancel;
    Stream.Close;
    Result := True;
    except
      on E: Exception do
      begin
       Result  := false;
       MessageDlg(E.Message, mtError, [mbOK], 0);
      end;
    end;
  finally
  //  CoUnInitialize;
    Stream:=nil;
    oConfig:=nil;
    oMSG:=nil;
  end;
end; 
```

**FileName** - html 的完整路径。

执行后**oMSG.CreateMHTMLBody (FileName, CdoSuppressNone,'','')** ; 只要基本过程完成，该文件就会被锁定。但是，此文件应在处理后删除。

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:45:55.660

CreateMHTMLBody 需要 URL，因此对于本地文件，请确保以`file:///`

```
CreateMHTMLBody(const URL: WideString; Flags: CdoMHTMLFlags; 
                          const UserName: WideString; const Password: WideString); safecall; 
```

# image - 主页上的幻灯片/缩略图未显示在 wordpress 3.4.2 上

> ID：12690334
> 
> 赞同：0
> 
> 时间：2012-10-02T12:34:08.787
> 
> 标签：image, wordpress, post, slideshow

我是 wordpress 的新手，目前我正在使用它建立一个网站。但是现在我很困惑为什么我的帖子的图片没有出现在主页的幻灯片/特色帖子上，但如果我打开那个帖子，它确实会出现在帖子中。我现在正在使用每周主题，但如果我更改为另一个主题，它也会返回相同的结果（图像不会显示）。如何解决这个问题？我需要添加任何特定代码还是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:26:18.323

如果无法看到发生了什么，这有点困难。你有网站的链接吗？或者你从哪里得到主题？

只是图像不会出现在幻灯片/特色区域中吗？还是文本也没有显示？
- 如果只是图像，那么您可能没有按照主题想要的方式设置图像。确保图像既“在”文章文本中，又使用编辑屏幕右侧的框设置为特色图像。

# asp.net-mvc-3 - 是否有从 MVC3 应用程序调用 REST API 的简单方法

> ID：12690335
> 
> 赞同：1
> 
> 时间：2012-10-02T12:34:20.663
> 
> 标签：asp.net-mvc-3, rest

您能否推荐一种从 ASP.NET MVC3 调用 REST API 服务的库/简单方法。在 Nuget，我看到了诸如 RESTSharp、Hammock、Craig 的实用程序库之类的东西。我正在寻找一个可以插入多个服务的通用助手。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:11:36.217

启动一个新的 MVC4 项目附带一些默认的 Microsoft WebApi 包，用于发布和与 REST API 通信 - 所以如果你有机会在 MVC4 中执行此操作，我会接受。

如果没有，您仍然可以将必要的 nuget 包引入 MVC3 项目以使用 api。

```
Install-Package Microsoft.Net.Http 
```

您可以在控制器/域层中执行以下操作：

```
var client = new HttpClient();
var uri = "http://www.myapi.com";
var content = client.GetAsync(uri).Result.Content; 
```

# javascript - 可从 ClojureScript 使用的 JavaScript GUI 库？

> ID：12690338
> 
> 赞同：11
> 
> 时间：2012-10-02T12:34:25.640
> 
> 标签：javascript, user-interface, clojurescript

在我正在进行的一个 Web 开发项目中，我们需要创建一个页面（实际上是它自己的迷你应用程序），该页面将具有交互式“Web 2.0”界面，更像是图形桌面应用程序，而不是典型的网页。

我希望使用一种更高级的语言，它可以编译成 JS 用于客户端逻辑，而不是直接在 JS 中编程，而 ClojureScript 是我的首选。

我正在寻找一个可以在 ClojureScript 中使用的 JS GUI 库，它支持类似于“桌面”GUI 库（如 Swing、QT、wxWidgets 等）的编程风格。它应该允许我创建弹出`<div>`“窗口”，放置按钮/标签/等小部件。在它们中，将事件处理程序附加到小部件，等等。你知道哪一种会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T10:46:55.303

Clojurescript 还很年轻——我不认为有这种口径的成熟框架（还没有？）。话虽如此，我正在使用以下组件构建 UI：

*   [Twitter Bootstrap](http://twitter.github.com/bootstrap/) + JQuery 用于视觉和 UI 元素
*   [Chas Emerick 的 Friend](https://github.com/cemerick/friend)用于服务器端身份验证
*   服务器的[Compojure](https://github.com/weavejester/compojure) + [Ring + Jetty](https://github.com/ring-clojure/ring)
*   用于生成 html/dom 的[Crate](https://github.com/ibdknox/crate) (Clojurescript [Hiccup )](https://github.com/weavejester/hiccup)
*   用于 JQuery 包装的[Jayq](https://github.com/ibdknox/jayq)
*   为客户端-服务器 RPC[获取](https://github.com/ibdknox/fetch)和/或[Shoreleave的远程](https://github.com/ohpauleez/shoreleave)
*   Shoreleave 的 pubsub 机制或 Clojure 的`add-watch`数据绑定机制

Clojure 和 Clojurescript 的一个很好的特性是它们支持通用数据结构上的简单函数。这就是为什么您倾向于看到几个较小的库可以完成一项特定的工作，但可以很好地协同工作，而不是具有对象模型的大型单体框架需要您完全采用一种思维方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T11:36:07.500

您应该考虑使用 Google Closure Library。它具有您要求的所有功能，并且绝对可以从 ClojuresScript 中使用，我已经使用它了。请参阅[http://closure-library.googlecode.com/svn-history/r1430/docs/index.html](http://closure-library.googlecode.com/svn-history/r1430/docs/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T09:13:59.637

我认为 ExtJS 最适合您的情况，即使这是纯 JS。这是目前最先进的 Web GUI 库，它可以以类似于使用桌面语言和 IDE 的方式创建 Web 应用程序。只需查看他们的[演示](http://www.sencha.com/products/extjs/examples/)。我认为 ClojureScript 在可预见的将来不会有类似的东西。

# iphone - 如何在 iPad App 中使用发光效果绘制线条

> ID：12690346
> 
> 赞同：4
> 
> 时间：2012-10-02T12:35:04.687
> 
> 标签：iphone, objective-c, ipad

我已经在我的应用程序中集成了画线。我没有使用过 OpenGL 或任何其他类似的框架。现在我想给这些线条一个**发光效果。**知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:40:27.613

使用 UIBezierPath 绘制线，如下面的代码......

您可以按如下方式初始化 UIBezierPath

```
 UIBezierPath *myPath=[[UIBezierPath alloc]init];
    myPath.lineWidth=10;
    brushPattern=[UIColor redColor]; //This is the color of my stroke 
```

然后你有 Touch 方法来处理和跟踪你的触摸坐标。当您在屏幕上开始触摸时，您要求 UIBezierPath 移动到该触摸点

```
UITouch *mytouch=[[touches allObjects] objectAtInd
[myPath moveToPoint:[mytouch locationInView:self]]; 
```

当您四处移动手指时，您可以通过以下方式在 TouchMoved 方法中的 BezierPath 中继续添加这些点

```
UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
[myPath addLineToPoint:[mytouch locationInView:self]]; 
```

由于我们需要不断的刷新屏幕，所以我们一绘制就出现在屏幕上，我们通过在 TouchMethod 中调用下面的方法来刷新 UIView 子类，这样一旦 BezierPath 有任何变化，它就会反映在屏幕。

```
[self setNeedsDisplay]; 
```

谈到为您完成所有绘图的 drawRect 方法，您需要在屏幕上设置笔画的颜色（笔画颜色是指在屏幕上完成绘画的颜色。）以及混合模式。您可以尝试不同的混合模式并查看结果。

```
- (void)drawRect:(CGRect)rect
{
    [brushPattern setStroke];
    [myPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];

} 
```

另请参阅下面的链接..

[http://soulwithmobiletechnology.blogspot.in/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html](http://soulwithmobiletechnology.blogspot.in/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html)

我希望这可以帮助你...

:)

# spring - Spring 应用程序有 Cglib2AopProxy 警告

> ID：12690349
> 
> 赞同：17
> 
> 时间：2012-10-02T12:35:29.550
> 
> 标签：spring, spring-aop, spring-transactions

在启动我的应用程序时，我收到了许多`o.s.aop.framework.Cglib2AopProxy 'Unable to proxy method [public final void org.springframework.jdbc.core.support.JdbcDaoSupport.setDataSource(javax.sql.DataSource)] because it is final: All calls to this method via a proxy will be routed directly to the proxy.'`关于大约十几个功能的警告。

现在我完全理解基于代理的方面不能应用于最终方法。但是，我没有（至少是故意的）尝试将任何方面编织到`JdbcDaoSupport`. 我怀疑它来自`<tx:annotation-driven />`. 我能做些什么来消除这些警告，或者更好的是，将这些类从方面编织中排除？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T19:49:06.813

这很可能是由`@Transactional`注释引起的，Spring 将您的 DAO 包装在代理中以添加事务行为。

我建议让你的 DAO 实现一个接口（**为你的 DAO 创建和使用一个接口**），这将允许 Spring 使用 JDK 动态代理，而不必使用 CGLib。

> 使用 CGLIB 有一个限制，即不能建议在目标类中标记为 final 的方法，因为最终方法不能被覆盖（CGLIB 在运行时创建目标类的子类），但是在使用 JDK 动态代理的情况下，这个限制就会消失。

[参考](http://thecafetechno.com/tutorials/spring/spring-proxying-mechanisms/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T14:03:31.317

也许您已经扩展`JdbcDaoSupport`并添加了`@Transactional`注释。

您可以将`Cglib2AopProxy`记录器设置为日志级别 ERROR 以避免警告消息。例如，如果使用 log4j 和 log4j.properties：

```
log.logger.org.springframework.aop.framework.Cglib2AopProxy = ERROR 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-29T09:13:07.897

Spring Boot 现在默认使用 CGLIB 代理，包括 AOP 支持。如果需要基于接口的代理，则需要将 spring.aop.proxy-target-class 设置为 false。

spring.aop.proxy-target-class=false

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-22T11:49:23.160

[您应该使用接口进行依赖注入，这里](https://stackoverflow.com/questions/8922135/why-always-have-single-implementaion-interfaces-in-service-and-dao-layers)和[这里](https://stackoverflow.com/questions/12899372/spring-why-do-we-autowire-the-interface-and-not-the-implemented-class)描述了这样做的最主要原因。

您可以阅读[有关代理机制](https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/core.html#aop)的文档，详细了解您看到此警告的原因。

请投票支持[IntelliJ 的功能检查请求，](https://youtrack.jetbrains.com/issue/IDEA-145408)这可能有助于我们避免此警告。顺便说一句，它还包含一个很好的解释。

# sql - 按周分组日期：打开、关闭、活动

> ID：12690351
> 
> 赞同：2
> 
> 时间：2012-10-02T12:35:39.143
> 
> 标签：sql

这是我的场景。我有一张这样的桌子：

```
-------------------------------------------------- ----------------
| 票 | 开始日期 | 完成日期 |
-------------------------------------------------- ----------------
| 123 | 12 年 4 月 1 日 | 2012 年 4 月 20 日 |
| 124 | 12 年 4 月 4 日 | 2012 年 4 月 28 日 |
| 125 | 2012 年 4 月 16 日 | 空 |
| 126 | 2012 年 4 月 28 日 | 12 年 5 月 4 日 |
| 127 | 12 年 5 月 2 日 | 空 |
-------------------------------------------------- ----------------

```

我需要得到这样的结果集：

```
-------------------------------------------------- ----------------
| 周 | 打开| 关闭| 活跃 |
-------------------------------------------------- ----------------
| 5 | 3 | 2 | 50 |
| 6 | 4 | 5 | 49 |
| 7 | 2 | 6 | 45 |
| 8 | 5 | 4 | 46 |
-------------------------------------------------- ----------------

```

基本上，我想查看在给定的一周内打开了多少张票，关闭了多少张，以及在那一周内有多少张只是处于活动状态（之前打开过，但尚未关闭）。

我想我可能已经想出了如何推导出打开和关闭，但我真的很难从中查询活动列。有任何想法吗？

更新：根据要求添加信息。

这是针对 SQL 的。

到目前为止我的查询是这样的，它还不包括活动：

```
    选择
    一周，
    a.创建，
    b.关闭
    从
    (
    选择
        DATEPART(WEEK, t.[start date]) AS week,
        COUNT(t.[ticket]) AS 打开
        FROM sqltable AS t
        WHERE [开始日期] > GETDATE() - 69 -- 过去 10 周
        通过...分组
        DATEPART(WEEK, t.[开始日期])
    ） 作为一个
    左连接
    (
        选择
        DATEPART(WEEK, t.[完成日期]) 作为周，
        COUNT(t.[ticket]) 已关闭
        FROM sqltable AS t
        WHERE [完成日期] > GETDATE() - 69 -- 过去 10 周
        通过...分组
        日期部分（周，t.[完成日期]）
    ) 作为乙
    ON a.week = b.week
    一周订购；

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:29:07.917

在任何数据库中，您都可以使用相关子查询来执行此操作。但是，数据库中的日期函数并不相同，所以让我假设您知道如何执行此操作。

```
select weeknum, sum(startweek) as starts, sum(endweek) as ends,
       (select count(*) as numstarts
        from t ts
        where DATEPART(WEEK, ts.[start date]) <= weeknum and
              datepart(week, ts.[end date]) >= weeknum
       ) as actives
from ((select DATEPART(WEEK, t.[start date]) AS weeknum, 1 as startweek, 0 endweek,
              t.[start date] as startdate, NULL as enddate
       from t
      ) union all
      (select DATEPART(WEEK, t.[end date]) AS weeknum, 0 as startweek, 1 as endweek,
              NULL, t.[end date] as enddate
       from t
      )
     ) t
group by weeknum
order by 1 
```

如果您使用的是 SQL Server 2012（或 Oracle），那么您也可以使用累积总和来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-11T08:13:58.900

有一种简单的方法可以使用 IF 语句并为累积总和的每个真实结果生成 +1：

```
SELECT
  DATE_FORMAT(startdate, "%U") as week,
  SUM(IF(startdate<>'', 1, 0)) as opened,
  SUM(IF(enddate<>'', 1, 0)) as closed,
  SUM(IF(startdate<>'' AND enddate<>'',  0, 1)) as active
FROM ticket
GROUP BY week; 
```

查询很简单，希望对您有所帮助

在 MySQL 5.6 中试过这个[SQLFiddle](http://sqlfiddle.com/#!9/96a24a/17)

# svn - 将本地 Subversion 复制到远程 Subversion

> ID：12690352
> 
> 赞同：3
> 
> 时间：2012-10-02T12:35:39.707
> 
> 标签：svn, version-control

我们在开发服务器上本地使用 Subversion。我们需要为我们的客户提供相同的访问权限。这可以通过让服务器在网络上发布它来实现，但由于其他一些我不想透露的原因，我们不想发布它。

我有兴趣知道的是，我是否可以在某个托管公司数据中心的互联网服务器上托管另一个 Subversion 实例以提高可靠性和更易于维护，并使两个 subversion 实例相互通信以同步更改. 我听说过复制 subversion 存储库/服务器，想知道这需要如何设置？更重要的是，它是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:09:59.237

如果您的客户只需要阅读存储库，另一个带有[SVN 外部定义](http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html "外部定义")的 Subversion 实例可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:53:08.487

您可以尝试为此使用**集市**（TortoiseBzr）。

1.  使用 bazaar 查看您当地的 SVN 项目。这会将其转换为 BZR 格式
2.  将其推送到您的 SVN 服务器
3.  瞧 :)

在 SVN 上使用 BZR：http:
[//doc.bazaar.canonical.com/migration/en/foreign/bzr-on-svn-projects.html](http://doc.bazaar.canonical.com/migration/en/foreign/bzr-on-svn-projects.html)

我已经提到了集市，但我相信你可以使用其他分布式 VCS 来做到这一点，如 git、mercurial ...

# c# - 从表单应用程序调用控制台应用程序的“Main”方法（通过按钮单击事件）

> ID：12690354
> 
> 赞同：6
> 
> 时间：2012-10-02T12:35:41.703
> 
> 标签：c#, winforms

**如何从属于**同一项目的 Windows 窗体访问和运行控制台应用程序。我有一个 Windows 窗体和一个控制台应用程序。我认为我可以发布控制台应用程序然后使用`Process.Start(path to console app)`，但这不是我想要的。我想`Main`在我的表单项目中访问和使用控制台应用程序的方法。此方法将在单击按钮时运行。

这给出了以下错误。

> InvalidOperationException 未处理 当任一应用程序没有控制台或控制台输入已从文件重定向时，无法读取密钥。试试 Console.Read。

```
private void buttonApplication_Click(object sender, EventArgs e)
{
  Ch15Extra_2.Program.Main();
} 
```

以下是方法。

控制台应用程序：

```
namespace Ch15Extra_2
{
  public class Program
  {
    public static void Main()
    {
      Console.WriteLine("Here the app is running");
      Console.ReadKey();
    }
  }
} 
```

表格1：

```
private void buttonApplication_Click(object sender, EventArgs e) { } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:19:26.320

如果您需要在没有 WinForms 应用程序的情况下运行控制台应用程序，并且有时您想在不运行控制台应用程序的情况下执行一些控制台代码，我有一个建议给您：

您可以将解决方案分为三个部分。

1.  WinForms 部分
2.  控制台部分
3.  dll库。

将 dll 链接到第一个和第二个项目。

然后，如果您需要从 WinFomrs 应用程序运行共享代码，您可以执行以下操作：

```
private void buttonApplication_Click(object sender, EventArgs e)
{
    var shared = new SharedClass();
    shared.Run();
} 
```

`SharedClass`将在第三个项目中实施。您也可以从控制台应用程序调用它。

* * *

*更新*

项目 1：类库。

```
public class SharedClass
{
    public int DoLogic(int x)
    {
        return x*x;
    }
} 
```

项目 2\. WinForms。参考项目 1

使用共享；

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        TextBox textBox = new TextBox();
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            var shared = new SharedClass();
            textBox.Text = shared.DoLogic(10).ToString();
        }
    }
} 
```

项目 3\. 控制台应用程序

```
 public class Program
    {
        public static void Main()
        {
            Console.WriteLine("Here the app is running");
            var shared = new Shared.SharedClass();
            Console.WriteLine(shared.DoLogic(10));
            Console.ReadKey();
        }
    } 
```

我刚刚检查过 - 它有效。

# svn - 有没有办法阻止 SVN 的任何变化？

> ID：12690356
> 
> 赞同：1
> 
> 时间：2012-10-02T12:35:58.540
> 
> 标签：svn, administration

我们想要检查版本而不是冻结项目（阻止 SVN 的任何更改）。有什么办法吗？我不想创建分支。我只想在几个小时内冻结项目。

最好的方法是这样说：如果您没有登录身份（allowLoginsUser 数组），那么“您还没有提交！” 并阻止其他“允许提交”并提交

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:37:21.547

你应该看看`svn lock`命令。

[您可以在SVN 书籍的“锁定”一章](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html)中找到有关它的更多信息。

通常，你会做类似的事情

```
svn lock -m "Freeze project for a few hours" PATH
# do what you need to do
svn unlock PATH 
```

您的存储库在哪里`PATH`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:58:53.190

你有几个选择：

1.  使用基于 authz 路径的授权并禁用所有用户的写访问权限
2.  使用预提交挂钩来禁用对特定存储库的 **所有写访问，方法是放置**

    1号出口；

    进去

3.  使用更复杂的预提交挂钩，检查更改的文件并在冻结项目发生时拒绝访问

他们从最简单的开始按难度和努力进行排名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:39:26.680

您可以暂时编辑 ./conf/passwd 文件（如果您使用密码用户身份验证）并注释掉其用户名前面的所有用户“#”。保存文件并重新启动 SVN 服务器。

然后取消注释他们的名字。

# c# - WPF 应用程序运行 SQL Server 脚本

> ID：12690358
> 
> 赞同：0
> 
> 时间：2012-10-02T12:36:06.623
> 
> 标签：c#, sql, wpf, sqlcommand

我经常需要为 SQL Server Management Studio 上的存储过程“生成脚本”。我需要创建一个 WPF 应用程序来获取生成的文件并执行它。我知道你可以这样做：

```
SqlCommand insert = new SqlCommand(sql, conn);
insert.ExecuteNonQuery(); 
```

如果我将整个脚本文件文本传递给 sql，这会执行所有操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:39:11.437

看看这个：[How to execute an .SQL script file using c#](https://stackoverflow.com/questions/650098/how-to-execute-an-sql-script-file-using-c-sharp)

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common;
using System.IO;
using System.Data.SqlClient; 
```

[...]

```
private void Execute(object sender, EventArgs e)
{
    string sqlConnectionString = @"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=ccwebgrity;Data Source=SURAJIT\SQLEXPRESS";

    FileInfo file = new FileInfo(@"E:\Project Docs\MX462-PD\MX756_ModMappings1.sql");

    string script = file.OpenText().ReadToEnd();

    SqlConnection conn = new SqlConnection(sqlConnectionString);

    Server server = new Server(new ServerConnection(conn));

    server.ConnectionContext.ExecuteNonQuery(script);
    file.OpenText().Close();    
} 
```

# sql - 如何从 2 CONNECT BY 提高 SQL 查询的速度

> ID：12690359
> 
> 赞同：1
> 
> 时间：2012-10-02T12:36:07.710
> 
> 标签：sql, oracle, plsql

我有 3 张桌子：t1、t2、t3。

t1 - 分层表（有 id 和 parent_id）

t1 与 t2 连接，t2 与 t3 连接（连接）

输入：一些 t1 的 id

有必要在这些标识符上构建一棵树（收集所有父节点）

然后向下构建一棵树，将 t2 和 t3 粘在一起

还需要恢复其孩子的 t3name（来自 t3）的价值，以用于父母顶部

输出：需要为每个 t3name 接收分层树

我的 SQL 请求，但它很慢：

[小例子： http](http://sqlfiddle.com/#!4/0b607/2) ://sqlfiddle.com/#!4/0b607/2

```
SELECT id, name, t3name FROM 
(SELECT distinct t1.id as id, 
                 t1.parent as parent, 
           t1.name as name, 
           connect_by_root(t3.name) as t3name
    FROM table1 t1
    LEFT OUTER JOIN table2 t2
        ON t1.t2_id = t2.id
    LEFT OUTER JOIN table3 t3
        ON t2.t3_id = t3.id
    START WITH t1.id in (83, 98, 9, 19, 4, 101)
        CONNECT BY PRIOR t1.parent = t1.id)
WHERE t3name IS NOT NULL
START WITH parent = 0
    CONNECT BY PRIOR id = parent and PRIOR t3name = t3name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:22:37.847

在不查看执行计划的情况下帮助您调整查询有点困难，但是如果我理解正确，那么您只需为`t3name`.

如果确实如此，那么首先尝试从 table1 获取分层数据并将结果连接到 table2 和 table3。

试试这样：

```
SELECT id, name, t3name FROM 
(SELECT distinct t1.id as id, 
                 t1.parent as parent, 
           t1.name as name, 
           t3.name as t3name
    FROM (select tt1.name, tt1.id, tt1.parent, connect_by_root(tt1.t2_id) t2_id
         from table1 tt1 
         START WITH tt1.id in (83, 98, 9, 19, 4, 101)
        CONNECT BY PRIOR tt1.parent = tt1.id) t1
    JOIN table2 t2
        ON t1.t2_id = t2.id
    JOIN table3 t3
        ON t2.t3_id = t3.id
    )
WHERE t3name IS NOT NULL
START WITH parent = 0
    CONNECT BY PRIOR id = parent and PRIOR t3name = t3name; 
```

我在你的小提琴中添加了一些主键（看看我是否可以让它使用索引）并放置两个查询。看[这里](http://www.sqlfiddle.com/#!4/75bb0/1)

# c# - 无法访问事件处理程序中的媒体元素如何将其设置为全局？

> ID：12690363
> 
> 赞同：0
> 
> 时间：2012-10-02T12:36:16.683
> 
> 标签：c#, wpf, mediaelement

我最近开始研究 C#，我很业余，请在下面描述的问题中提供任何帮助，这对我很有帮助

我想做的是在事件处理程序中也可以访问 video_panel 但现在我不知道该怎么做我试图将媒体元素声明为全局并将其值设置为 video_panel 但仍然没有用我应该做什么我想要而不是显示消息暂停当前正在播放的视频

```
namespace Play_pause
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

  static   int index = 0;
  static  System.Timers.Timer aTimer = new System.Timers.Timer();
    public MainWindow()
    {
        InitializeComponent();
       video_panel.Play();

        // Hook up the Elapsed event for the timer.
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

        // Set the Interval to 2 seconds (2000 milliseconds).
        aTimer.Interval = 2000;

        aTimer.Start();

    }

    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {

        index++;
        if (index %2==0)
        {
            MessageBox.Show("Can't access media element in the event handler/n how to    
            set it global?");

        }

    }    
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:43:27.830

[再次阅读这里](https://stackoverflow.com/questions/12607440/pausing-a-video-after-every-10s-in-c-sharp/12607558#12607558)的答案，它们展示了如何使变量成为全局变量。

But this wont solve your problem. Since your OnTimedEvent-method is static, you can access only static variables. I dont think your OnTimedEvent should be static, so try to remove the word "static" and now you can acess global variables (e.g. your video_panel).

# macos - Wii mote开发库要使用吗？

> ID：12690364
> 
> 赞同：0
> 
> 时间：2012-10-02T12:36:21.023
> 
> 标签：macos, wiimote

最好使用的 Wii mote 库是什么？我正在使用 Mac，我尝试使用 Darwiinmote 和 Wiimote 框架，但是缺乏文档和我在 Mac OS X 开发方面的经验让我陷入了一个陈旧的伙伴点，代码可能无济于事是为 OS X 10.5 编写的，我使用的是 Xcode 4.4.1，最小 OSX SDK 为 10.7。

我已经查看了 Java 替代品但无济于事（在 Mac 上）。

我只想取回与wii mote 的IR 相关的数据。我想用它来测试它的角度分辨率，看看我是否可以以视觉表示形式输出数据。以最小的开销实现简单的东西会很棒。

欢迎任何建议，即使它使用 Windows 实现/机器。

DarwiinRemote：http: [//sourceforge.net/projects/darwiin-remote/](http://sourceforge.net/projects/darwiin-remote/)

谢谢

# java - 仅在某些类中查看日志消息

> ID：12690365
> 
> 赞同：0
> 
> 时间：2012-10-02T12:36:26.663
> 
> 标签：java, logging, log4j

您好，我只在某些类中看到日志消息，不知道在哪里查看。我的日志模式有误吗？这是我的 log4j 配置，我将它与 sfl4j 一起使用：

```
<!-- Appenders -->
<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%t] (%13F:%L) - %m%n" />
    </layout>
</appender>

<!-- Application Loggers -->
<logger name="com.stackoverflow.test">
    <level value="info" />
</logger>

<!-- 3rdparty Loggers -->
<logger name="org.springframework.core">
    <level value="info" />
</logger>

<logger name="org.springframework.beans">
    <level value="info" />
</logger>

<logger name="org.springframework.context">
    <level value="info" />
</logger>

<logger name="org.springframework.web">
    <level value="info" />
</logger>

<!-- Root Logger -->
<root>
    <priority value="warn" />
    <appender-ref ref="console" />
</root> 
```

我正在创建这样的记录器，类字段：

```
private static final Logger logger = LoggerFactory.getLogger(DashboardController.class); 
```

并记录如下：

```
logger.info("this variable x has value -> {}", x); 
```

有什么想法吗 ？

**更新**

根据 Petar Minchev 的回答更改为信息，但我仍然没有得到任何记录。

**更新二**

现在在添加一些依赖项之后，这适用于某些类（仍然不适用于其他类）。有一些实现可运行的类，它们在多个线程中运行，我没有从这些类中获得日志消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:38:07.630

更改`<priority value="warn" />`为`<priority value="info" />`。

`logger.info``warn`使用优先级时不显示。

# java - 服务器端处理缺少客户端连接（由对等方重置）？

> ID：12690366
> 
> 赞同：1
> 
> 时间：2012-10-02T12:36:28.540
> 
> 标签：java, web-services, jakarta-ee, soap

我有一个网络服务和一个客户端。有时客户端连接，而不是立即获得返回值。稍后，如果从 WS 返回一个值并且同时客户端已关闭，我会收到我不知道如何处理的异常。

如何捕获对等异常重置的那些，以便网络服务器不会崩溃？

```
@Webservice
class MyWebservice {
    public boolean myWebserviceMethod() {
        //sleep, cut the client, then return.
        return false;
    }   
} 
```

Okt 2012 年 2 月 2 日下午 2:26:52 org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging

```
Warnung: Interceptor for {http://myproject.de/wsdl}ConnectionService#{http://myproject.de/wsdl}myWebserviceMethod has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Could not send Message.
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:64)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211)
    at org.apache.openejb.server.cxf.CxfWsContainer.onMessage(CxfWsContainer.java:73)
    at org.apache.openejb.server.webservices.WsServlet.service(WsServlet.java:98)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.tomee.catalina.OpenEJBValve.invoke(OpenEJBValve.java:45)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:346)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:306)
    at org.apache.catalina.connector.Response.flushBuffer(Response.java:568)
    at org.apache.catalina.connector.ResponseFacade.flushBuffer(ResponseFacade.java:307)
    at org.apache.openejb.server.httpd.ServletResponseAdapter.flushBuffer(ServletResponseAdapter.java:205)
    at org.apache.cxf.transport.http.AbstractHTTPDestination$WrappedOutputStream.close(AbstractHTTPDestination.java:684)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.AbstractHTTPDestination$BackChannelConduit.close(AbstractHTTPDestination.java:626)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    ... 24 more
Caused by: java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:215)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:462)
    at org.apache.coyote.http11.InternalOutputBuffer.flush(InternalOutputBuffer.java:119)
    at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:789)
    at org.apache.coyote.Response.action(Response.java:174)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:341)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:17:10.887

服务器确实崩溃了，还是您（错误地）通过见证堆栈跟踪得出服务器崩溃的结论？

堆栈跟踪在那里是因为 Catalina 无法对为与客户端通信而打开的套接字写入响应。这种情况下总会出现这个异常；Catalina 无法确切知道*为什么*它不能写入套接字——它只知道它不能写响应。它打印堆栈跟踪（因为这是一个可能对系统管理员有价值的错误条件，例如 - 用于性能调整目的），然后继续。

如果您的服务器确实在这种情况发生后崩溃，那么您可能会遇到更大的问题。我很难相信如果服务器无法对死 TCP/IP 套接字写入响应，它实际上会崩溃。

# java - 不确定，但我认为eclipse不会在tomcat服务器上运行我的应用程序

> ID：12690368
> 
> 赞同：1
> 
> 时间：2012-10-02T12:36:37.137
> 
> 标签：java, sockets, tomcat

好的，所以我已经被困几天的问题是 Tomcat 不运行我的应用程序。这是我第一次接触 Tomcat 和服务器编程，所以这很可能纯粹是我的错。但是几天后我自己无法击败它，所以我决定在这里发布一个问题。

我试过运行很多不同的设置，但现在我是最简单的一个，但仍然无法弄清楚。所以，我已经安装了：Eclipse IDE 1.5.0（Eclipse 平台 4.2.0），WST 3.4.1，Tomcat 7.0.12 通过 Eclipse 安装（也试过 7.0.30）。

我已经在 eclipse 中配置好 tomcat 服务器，所以当我运行它时 - 它确实按预期工作。

但是后来我得到了这段简单的代码，我从 oracle 的服务器套接字指南中获得：

```
import java.net.*;
import java.io.*;

import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Logger;

public class KnockKnockServer {
    private static final Logger logger = Logger.getRootLogger();

    public static void main(String[] args) throws IOException {
        BasicConfigurator.configure();
        ServerSocket serverSocket = null;
        try {
            serverSocket = new ServerSocket(4444);
            logger.debug("Socket opened");
            System.err.println("Port opened");
        } catch (IOException e) {
            logger.debug("Could not listen on port: 4444.");
            System.err.println("Port not opened");
            System.exit(1);
        }

        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
            logger.info("socket accepted");
        } catch (IOException e) {
            logger.info("Accept failed.");
            System.exit(1);
        }

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                clientSocket.getInputStream()));
        String inputLine, outputLine;
        KnockKnockProtocol kkp = new KnockKnockProtocol();

        outputLine = kkp.processInput(null);
        out.println(outputLine);

        while ((inputLine = in.readLine()) != null) {
             outputLine = kkp.processInput(inputLine);
             out.println(outputLine);
             if (outputLine.equals("Bye."))
                break;
        }
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    }
} 
```

当我执行“运行方式-> 在服务器上运行”启动时，这不起作用。我尝试将它添加到 WAR 并进行部署，但它产生了相同的结果 - 没有。这意味着我既不能使用另一个客户端应用程序（来自另一个 Eclipse 实例）连接到它，也不能产生任何表明它有效的消息（仅访问由 tomcat 生成的日志）。如您所见，我将 log4j 添加到代码中，以查看任何证明代码实际上在服务器上运行的消息（最初只有 System.err 和 System.out），我尝试配置控制台输出和文件输出。

同样，服务器本身按预期运行——我可以通过浏览器访问它、打开管理器应用程序、部署/取消部署应用程序等。

所以问题是：我做错了什么？我认为可能存在一些原始错误/未完成的步骤/无论我犯了什么，但在谷歌的帮助下，我在 2 天的战斗中无法弄清楚。

帮助将不胜感激。

**更新：**非常感谢大家！正如我所怀疑的那样 - 愚蠢的我 :) 不知道为什么我开始使用 Tomcat，但是是的，运行为应用程序工作正常。这些即时答案为我节省了很多时间。再次非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:42:54.110

我认为这里有一个误解。Tomcat 是一个 servlet 容器 - 它旨在运行由[servlet](http://en.wikipedia.org/wiki/Java_Servlet)组成的 Web 应用程序。

您`KnockKnockServer`是一个普通的 Java 应用程序，因此“在 Tomcat 上”运行它绝对没有意义。您应该将其作为独立应用程序运行。

实际上，有时在 Tomcat 上运行的 Web 应用程序中为某些特定协议启动服务器是有意义的。在这种情况下，您需要控制自定义服务器的生命周期`ServletContextListener`。但我不认为这是你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:49:09.430

尝试将其作为 java 应用程序运行。不是作为 Web 应用程序。它似乎不是 Java Web 应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:42:32.183

您尝试使用主类打开套接字。您不应该在服务器上运行您的应用程序，您的应用程序将是服务器本身。单击运行方式 > 运行方式应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:10:31.717

Tomcat 是一个 servlet 容器。用于运行 Web 应用程序。您正在尝试在容器中运行 java 类，这是不可能的。尝试将其作为独立应用程序运行。

# linux - 通过 linux 命令行显示特定行的周围行

> ID：12690369
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:36:45.027
> 
> 标签：linux, command-line

现在我正在运行：

```
head -1274954 /path/to/dump.sql | tail -1 
```

这向我显示了一条线，我想看到它上面的 10 行和下面的 10 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:39:01.030

为什么不只是：

```
$ head -1274964 /path/to/dump.sql | tail -20 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:01:39.250

查看`$ man head`

```
NAME
   head - output the first part of files 
```

查看`$ man tail`

```
NAME
   tail - output the last part of files 
```

您正在`(|)`将 head 命令的输出传递给 tail 命令。这就是为什么它从前 1274954 行打印最后一行。

```
$ head -1274964 /path/to/dump.sql | tail -20 
```

它将生成最多第 1274964 行的输出并将其通过管道传递给 tail 命令，该命令将打印 20 行，这些行位于 head 命令输出的底部。

# php - 按键数组过滤数组

> ID：12690371
> 
> 赞同：-3
> 
> 时间：2012-10-02T12:37:02.483
> 
> 标签：php, arrays, filtering

> **可能的重复：**
> [PHP 内置方法来获取给定键列表的数组值](https://stackoverflow.com/questions/1430708/php-built-in-method-to-get-array-values-given-a-list-of-keys)

PHP 是否有针对这个目的的内置函数？

我有两个数组，第一个与一些数据相关联。例如：

```
$data = array(
    'name'      => 'John',
    'last_name' => 'Smith',
    'address'   => 'NY, ...',
    'phone'     => '1234567'
); 
```

另一个带键的数组：

```
$keys = array(
    'name', 
    'last_name'
); 
```

应用此函数后，我仅从第一个数组中获取值，该数组具有来自第二个数组的键。

```
$result = function($data, $keys);
print_r($result);

// array(
//    'name'      => 'Jonh',
//    'last_name' => 'Smith'
// ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:39:16.073

试试下面的：

```
$result = array_intersect_key($data, array_fill_keys($keys, null)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:40:51.560

```
 $data = array(
      'name'      => 'John',
      'last_name' => 'Smith',
      'address'   => 'NY, ...',
      'phone'     => '1234567'
  );

  $keys = array('name', 'last_name');

 print_r(array_intersect_key($data, array_flip($keys))); 
```

# postgresql - Postgresql - 导入时将csv的时间和日期合并到时间戳

> ID：12690373
> 
> 赞同：2
> 
> 时间：2012-10-02T12:37:08.430
> 
> 标签：postgresql, date, time, import, timestamp

我正在尝试将数据从 csv 文件导入 postgresql，不幸的是它的格式不完美。

例子：

```
DATE,TIME,NUMERIC,NUMERIC,NUMERIC,NUMERIC,INTEGER 
```

我想将数据导入到包含列的表中：

```
timestamp with timezone, numeric, numeric, numeric, numeric, integer 
```

为了导入我使用副本的数据：

```
COPY tabledata FROM 'c:\Users\Public\Downloads\test.csv' DELIMITERS ',' CSV; 
```

当然它不起作用，因为日期和时间用''分隔，所以postgresql假定它们是2个独立的数据字段。

我已经设法将.csv导入到一个像.csv一样设置的表中，但是我需要稍后将日期和时间作为带有时区的时间戳，因为我将在导入后处理大量数据由于性能问题，转换将是我的最后选择。

我尝试在导入之前使用“sed 's/,/ /' EURUSD30.csv > EURUSD30E.csv”编辑 .csv 文件，但是我收到一条错误消息，指出命令“'s/”输入错误或可能找不到。我很无知，因为这似乎对其他人有用，但这也不是我的第一选择。

如果在导入时可以简单地告诉 postgresql 将时间和日期合并为一个时间戳值，那将更容易。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:36:37.913

你最好的选择是`COPY`将数据放到一个`TEMPORARY`或`UNLOGGED`表中，然后从那里做一个：

```
INSERT INTO real_table
SELECT col1, col2, col3, datecol + timecol, col6, ...
FROM temp_copy_table; 
```

您也可以在该过程中进行任何其他所需的数据按摩。

合并时考虑时区。`DATE`+`TIME`产生一个`timestamp without time zone`：

```
regress=# SELECT pg_typeof(DATE '2012-02-01' + TIME '10:00');
          pg_typeof          
-----------------------------
 timestamp without time zone
(1 row) 
```

并且您可能想要存储带有时区的时间戳，因此您可能想要告诉 Pg 将日期+时间解释为处于特定时区：

```
(datecol + timecol) AT TIME ZONE 'UTC' 
```

或时间戳的本地时区是什么。

# machine-learning - 非线性函数的神经网络

> ID：12690374
> 
> 赞同：0
> 
> 时间：2012-10-02T12:37:09.600
> 
> 标签：machine-learning, neural-network

我试图找到一个合适的神经网络结构来学习以下形式的函数： F(x1,x2,x3,x4,x5)= a*x1+b*(x2-x4)/(x3-x4) + c*x5。

我正在使用 matlab 的神经网络工具箱来创建一个前馈网络，但没有任何运气。

甚至有可能使用神经网络来学习这种功能吗？如果是，什么是合适的结构？如果没有，还有其他模型可以学习这种功能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:06:44.280

我建议您首先准备一个训练数据集，其中包含以下内容：

1- 数据集

x1、x6、x5；x6 = (x2 - x4) / (x3 - x4)

2- 目标标签 Y

Y = f(x1, x6, x5); 你可以假设 a,b,c 的一些值

因此，您有 3 个输入变量或特征和一个目标变量 Y。

然后，您将 ANN 定义为只有一个单层（单层感知器）并确保输出函数是线性的。

最后，训练 ANN 并根据 x1、x5 和 x6 为其赋予新值，并与实际函数进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:48:23.377

如果我理解正确，您正在尝试估计 a、b 和 c 的值。尽管函数相对于其输入不是线性的，但它相对于 a、b 和 c 是线性的。所以你应该能够用线性回归解决你的问题。

更准确地说，如果定义 x6 = (x2 - x4) / (x3 - x4)，则得到 F(x1, x5, x6) = a * x1 + b * x6 + c * x5，这是线性的。

# java - 尝试使用 Jackson 将 Idml 序列化为 Json 时出现 StackOverflowError

> ID：12690376
> 
> 赞同：1
> 
> 时间：2012-10-02T12:37:13.310
> 
> 标签：java, json, jackson, idml

一直在使用[IDMLlib](http://idmllib.com)将 IDML 文件加载到 POJO，但是当我尝试使用[Jackson JSON](http://wiki.fasterxml.com/JacksonHome)将生成的 java 对象序列化为 JSON时，我一直遇到无限递归的麻烦。

```
Caused by JsonMappingException: Infinite recursion (StackOverflowError)
(through reference chain: 
de.fhcon.idmllib.api.elements.preferences.Preferences["layoutAdjustmentPreference"]
->de.fhcon.idmllib.api.elements.preferences.LayoutAdjustmentPreference["parent"]
... etc

->>  539 | serializeFields in com.fasterxml.jackson.databind.ser.std.BeanSerializerBase 
```

这发生在解析期间的多个场合。
Idml.document -> Document.root -> Idml.document -> Document.root 是类似的。

我正在使用 Jackson 的 ObjectMapper 将 POJO 转换为 JSON：

```
Idml idml = new Idml("test.idml");
ObjectMapper mapper = new ObjectMapper();
String JSONstring = mapper.writeValueAsString(idml); 
```

IDMLlib 类已编译，因此我无法对它们进行任何更改。
任何人都知道我仍然可以使用 IDMLlib 返回的 java 对象而无需创建自己的方法吗？

编辑：
似乎在整个过程中都提到了“根”和“父”。所以基本上我要问的是是否有人知道如何能够序列化对象而不修改它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:46:50.480

当由于某些原因无法访问对象的某个属性或无法序列化其某个属性时，Jackson 倾向于抛出这种异常。

如果您没有在要序列化的对象上指定任何注释，杰克逊会尝试通过深入递归来序列化所有内容。

您是否有机会告诉杰克逊忽略某些属性或字段？

我有使用 Hibernate 初始化 Pojo 的经验，我应该将“@JacksonIgnore”添加到我使用 Hibernate 延迟加载的每个属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:19:45.533

如果引用是一个简单的父/子类型的东西（听起来很像），只需使用注释：

```
// on parent object
@JsonManagedReference
public ChildOb child;

// on child object
@JsonBackReference ParentOb parent; 
```

杰克逊将序列化事物，以便只写出“孩子”（父母没有）；反序列化时，它会重新链接事物。

# excel - VBA中是否有自动完成快捷方式？

> ID：12690377
> 
> 赞同：9
> 
> 时间：2012-10-02T12:37:15.217
> 
> 标签：excel, vba

我很确定 Excel/VBA 编辑器中有一个自动完成功能，但似乎找不到它。（例如 Eclipse 中的 Ctrl+Space）。

还是我在做梦？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T12:40:50.867

有，而且是`Ctrl`+ `Space`。

如果您按下它并且自动完成不会发生，那么有多种可能的选择并且您会看到它们。

此时，您可以使用箭头键浏览选项`↓</kbd> and `↑</kbd> and then press `Tab` to select your choice.``

另请参阅[是否有办法在 Access 和 Excel 2007 中获得完整的 IntelliSense for VBA？](https://stackoverflow.com/q/1065814/11683)，这几乎是重复的。

# design-patterns - 设计模式和语言适用性

> ID：12690383
> 
> 赞同：1
> 
> 时间：2012-10-02T12:37:31.440
> 
> 标签：design-patterns

我刚刚进入设计模式，我正在阅读的是模式*通常*独立于语言。

在编程中，我们有 OOP 和非 OOP（有非 OOP 的名称吗？）。

我最近一直在玩[模板模式](http://en.wikipedia.org/wiki/Template_method_pattern)，它​​似乎对 OOP 几乎是违反直觉的。事实上，它实际上只是一堆“转到方法”（在一定程度上让我想起了 Pascal），这似乎有点“反对”OOP 想要表现的方式。

这是否意味着某些模式更适合语言（我很欣赏有些东西不完全适合并不意味着它不适合）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:46:59.773

如果做得好，模板模式实际上是 OOP 的一个很好的例子，因为您可以通过它们的抽象类型引用一组相关的对象，并以类似的方式对它们进行操作，因为它们每个都实现了相同的方法“契约”。据说该模式定义了算法/程序结构，但在大多数基本情况下，它实际上只是[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

您可能会争辩说某些模式更适合其他语言，但您几乎可以在任何语言中使用任何模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:10:27.570

模式独立于语言，但通常特定于语言家族。有一些面向对象语言共有的模式，一些是函数式语言共有的，等等。

让我们以访问者模式为例：它在不支持多重分派（C++、Java、C# - short of `dynamic`s）的 OO 语言的子集中很流行。然而，在多重分派是一种语言特性的语言（Common Lisp、Clojure）中，它是完全没有必要的。

关于 OOP 与非 OOP，有多种非 OOP 范式：函数式语言、过程式语言等。许多是真正的多范式语言，例如 C++——它提供了面向对象、过程式和函数式语言的特性。另一方面，许多人并不认为它是一种真正的 OO 语言，因为类型不是 C++ 中的一等对象，而且它们可能是正确的。

# mysql - INNER JOIN 使用 AND？

> ID：12690394
> 
> 赞同：2
> 
> 时间：2012-10-02T12:37:58.940
> 
> 标签：mysql, sql, join

我正在尝试 INNER 加入 3 个表。1st JOIN（单独）完美运行并返回预期的 3 行。然后我添加另一个连接来匹配第三个表中的名称列。我希望再次只有 3 行，但没有。我得到了很多行。

我的问题是，JOIN 是相互建立的吗？1st INNER JOIN 给我们 results_1 ... results_1 上的 2nd INNER JOIN 给 results_2 ... results_2 上的 3rd INNER JOIN 等等？这是真的？

```
select
students.*
FROM classes
INNER JOIN students ON students.id = classes.id
INNER JOIN books ON books.obj_num_position = students.object_table_obj_num_pos_ref 
```

我发现自己回退到使用 FROM XYZ ... 和 WHERE x.id = z.id AND WHERE AND WHERE ..... 而不是显式连接，因为它更容易排除故障

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:41:42.130

将`INNER JOIN`返回与三个表中的匹配项一样多的行。在您的情况下，它似乎与`students.object_table_obj_num_pos_ref` 具有*一对多的*关系`books.obj_num_position`，因此返回每个`books.obj_num_position`匹配的任何`students.object_table_obj_num_pos_ref`具有前一个`students.id`返回的一个`JOIN`与`classes`。

如果您需要限制其中的一个子集，这样做的方法仍然是通过一个`WHERE`子句，您可以在其中指定限制条件。

顺便说一句，如果您使用除了子句中的连接条件之外没有其他条件的隐式连接`WHERE`，您将得到完全相同的结果。

# c# - 表格上的数字时钟应显示时间变化 Datetime.now 仅显示静止时间

> ID：12690400
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:38:13.433
> 
> 标签：c#, c#-4.0

我有一个 Windows 表单，我在 DateTime 类中使用下面的代码，但我想使用时间应该在表单上变化

```
 LblLocalTime.Text = DateTime.Now.ToString("MM/dd/yyyy HH:mm:ss");
        LblUTCTime.Text   = DateTime.UtcNow.ToString("MM/dd/yyyy HH:mm:ss"); 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T12:43:30.857

使用 Timer 类，设置您想要的间隔

```
private void Form1_Load()
{
      Timer tmr = new Timer();
      tmr.Interval = 1000;//ticks every 1 second
      tmr.Tick+=new EventHandler(tmr_Tick);
      tmr.Start();    
}

//change the label text inside the tick event
private void tmr_Tick(object sender, EventArgs e)
{
      LblLocalTime.Text = DateTime.Now.ToString("MM/dd/yyyy HH:mm:ss");
      LblUTCTime.Text   = DateTime.UtcNow.ToString("MM/dd/yyyy HH:mm:ss");          
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:41:10.953

你所做的只是设置文本一次。您必须不断更新您的标签以反映当前的日期时间。每隔一秒设置一个计时器并更新每个 Tick 事件的标签。

```
System.Timers.Timer timer = new System.Timers.Timer();
Timer.Elapsed += new System.Timers.ElapsedEventHandler(Timer_Elapsed);
Timer.Interval = 1000;

private void Timer_Elapsed(object sender, EventArgs e)
{
     LblLocalTime.Text = DateTime.Now.ToString("MM/dd/yyyy HH:mm:ss");
     LblUTCTime.Text   = DateTime.UtcNow.ToString("MM/dd/yyyy HH:mm:ss"); 
} 
```

# html - 为什么 W3C 验证服务说这不是有效的 XHTML？

> ID：12690401
> 
> 赞同：0
> 
> 时间：2012-10-02T12:38:14.343
> 
> 标签：html, forms, input, validation

有人能告诉我为什么 W3C 验证服务说此代码无效吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<title>this is the title of the web page</title>
</head>
<body>

<form action="formscript.php" method="post">
    first name:<input type="text" name="firstname" />

    <input type="submit" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:56:52.727

我尝试了这两个代码，验证器说问题代码作为 XHTML 1.0 Transitional 是有效的。

无论如何，这里的问题是您的`<fieldset>`内部没有`<form>`并且文本`<input>`没有`<label>`.

```
<form action="formscript.php" method="post" name="thisform">
  <fieldset>
    <label for="firstname">first name:</label>
    <input type="text" name="firstname" />

    <input type="submit" />
  </fieldset>
</form> 
```

并且不要忘记`DOCTYPE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:42:59.150

如果在开始时添加了 XHTML 1.0 过渡文档类型声明，则最初发布的标记会生成有效的 XHTML 1.0 过渡文档。

正如@adamjansch 所编辑，使用 XHTML 1.0 Strict 文档类型声明，它是无效的，并且可能是使用该文档类型声明进行了验证。然后第一条错误消息是“这里不允许使用字符数据”，并解释了一些*可能的*原因，包括“将文本直接放在文档的正文中，而不将其包装在容器元素（例如 a `<p>aragraph</p>`）中”。这接近了：问题是在 XHTML 1.0 Strict 中，一个`form`元素可能只有块级子级。

这意味着任何文本和文本级标记都`input`必须包装在一个或多个块容器中，例如`p`、`div`、`fieldset`或`table`。其中，`div`是唯一一个中性的，对渲染没有默认影响：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<title>this is the title of the web page</title>
</head>
<body>

<form action="formscript.php" method="post">
  <div>
    first name:<input type="text" name="firstname" />

    <input type="submit" />
  </div>
</form>

</body>
</html> 
```

# autocomplete - 选项卡自动完成路径 vim

> ID：12690405
> 
> 赞同：1
> 
> 时间：2012-10-02T12:38:22.217
> 
> 标签：autocomplete, tab-completion

有没有办法像命令行中的 /v [tab] -> /var/ 那样在 vim 中自动完成路径

我已经测试了 ctrl x ctrl f，但这并不是我想要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:39:54.723

Ctrl-X Ctrl-F 也可以在插入模式下使用。我认为它只是你想要的。

如果你想用 tab 完成所有事情（文件名完成以及 onmicompletion 和其他东西），我建议使用以下 vim 插件：“neocomplcache”。它具有许多自动完成选项，并且可以高度自定义。然而，这使得配置也有点复杂。

这是插件 github 页面的链接：[https](https://github.com/Shougo/neocomplcache) ://github.com/Shougo/neocomplcache 。

# interop - 使用 Word 互操作设置自定义文档属性

> ID：12690409
> 
> 赞同：6
> 
> 时间：2012-10-02T12:38:42.170
> 
> 标签：interop, ms-word, vsto, office-2010, office-addins

我想设置我在 C# 代码中创建的 word 文档的一些自定义文档属性。为此，我按照[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/4e0tda25.aspx)提出了以下代码：

```
using Word = Microsoft.Office.Interop.Word; // Version 12.0.0.0
word = new Word.Application();
word.Visible = false;
Word._Document doc = word.Documents.Add(ref missing, ref missing, ref missing, ref missing);
logger.Info("Setting document properties");
Core.DocumentProperties properties = (Core.DocumentProperties)doc.BuiltInDocumentProperties;
properties["Codice_documento"].Value = args[3];
properties["Versione_documento"].Value = args[4]; 
```

不幸的是，每当它到达代码时，我都会收到此错误：

> HRESULT：0x80004002（E_NOINTERFACE）

这是为什么？我完全按照我的 MSDN 中描述的方式使用了接口，为什么它不起作用？

我正在为 Office 2010 和 .net 3.5 使用 Interop

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:03:40.987

你需要使用[`CustomDocumentProperties`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.customdocumentproperties.aspx)，而不是[`BuiltInDocumentProperties`](http://msdn.microsoft.com/en-us/library/microsoft.office.core.documentproperty.aspx)。请参阅有关[在 Word 中使用自定义文档属性的 MSDN 参考](http://msdn.microsoft.com/en-us/library/dhxe2d75.aspx)（*以及[此处的 MSDN 视频](http://msdn.microsoft.com/en-us/vstudio/cc338010.aspx)*）。您还需要检查属性是否存在并在尝试分配其值之前创建它。

```
Core.DocumentProperties properties = (Core.DocumentProperties)this.Application.ActiveDocument.CustomDocumentProperties;
if (properties.Cast<DocumentProperty>().Where(c => c.Name == "DocumentID").Count() == 0)
  properties.Add("DocumentID", false, MsoDocProperties.msoPropertyTypeString, Guid.NewGuid().ToString());
var docID = properties["DocumentID"].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T07:52:05.640

[在MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/worddev/thread/463eddb5-c971-4216-a9c1-53f62f311549/)提问后，答案就出来了。问题是，我尝试的方式是特定于 VSTO 的。由于我不知道，我混淆了 VSTO、Interop 和其他定义，从而错误地标记了这个问题。

它现在使用以下代码工作：

```
logger.Info("Setting document properties");
object properties = doc.CustomDocumentProperties;
Type propertiesType = properties.GetType();

object[] documentCodeProperty = { "Codice_documento", false, Core.MsoDocProperties.msoPropertyTypeString, args[3] };
object[] documentVersionPoperty = { "Versione_documento", false, Core.MsoDocProperties.msoPropertyTypeString, args[4] };

propertiesType.InvokeMember("Add", BindingFlags.InvokeMethod, null, properties, documentCodeProperty);
propertiesType.InvokeMember("Add", BindingFlags.InvokeMethod, null, properties, documentVersionPoperty); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T21:42:50.457

SliverNinja 上面的回答是正确的。在我移植了一些旧的 VB 代码之前，我忘记了你必须添加到集合中。我必须设置和读取一堆文档属性，所以这里有几个扩展方法可以从 Word 中的 BuiltInDocumentProperties 或 CustomDocumentProperties 读取/写入。这是 NetOffice 代码，但您可以通过更改 using 语句将其转换为 VSTO。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NetOffice.OfficeApi;
using NetOffice.OfficeApi.Enums;
using NetOffice.WordApi;

namespace PalabraAddin {
    public static class ExtDocument {

        public static T GetCustomProperty<T>(this Document doc, string name, T defaultValue) {
            return doc.GetProperty(doc.CustomDocumentProperties, name, defaultValue);
        }

        public static T GetBuiltInProperty<T>(this Document doc, string name, T defaultValue) {
            return doc.GetProperty(doc.BuiltInDocumentProperties, name, defaultValue);
        }

        public static T SetCustomProperty<T>(this Document doc, string name, T value) {
            return doc.SetProperty(doc.CustomDocumentProperties, name, value);
        }

        public static T SetBuiltInProperty<T>(this Document doc, string name, T value) {
            return doc.SetProperty(doc.BuiltInDocumentProperties, name, value);
        }

        public static T GetProperty<T>(this Document doc, object collection, string name, T defaultValue) {
            var properties = (DocumentProperties) collection;
            foreach (var prop in properties.Where(prop => prop.Name == name))
                return (T) prop.Value;
            return defaultValue;
        }

        public static T SetProperty<T>(this Document doc, object collection, string name, T value) {
            var properties = (DocumentProperties) collection;
            foreach (var prop in properties.Where(prop => prop.Name == name)) {
                if (!((T) prop.Value).Equals(value))
                    prop.Value = value;
                return value;
            }

            MsoDocProperties propType;
            if (value is Boolean) 
                propType = MsoDocProperties.msoPropertyTypeBoolean;
            else if (value is DateTime)
                propType = MsoDocProperties.msoPropertyTypeDate;
            else if (value is double || value is Single)
                propType = MsoDocProperties.msoPropertyTypeFloat;
            else if (value is int)
                propType = MsoDocProperties.msoPropertyTypeNumber;
            else 
                propType = MsoDocProperties.msoPropertyTypeString;

            properties.Add(name, false, propType, value);
            return value;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-26T13:16:26.920

我用这个简单的代码解决了它：

```
foreach (var property in _WordDoc.CustomDocumentProperties)
{
   if(property.Name == target)
      property.Value = value;
} 
```

# android - 有没有办法以编程方式在 android API Level 10 上添加语音邮件

> ID：12690412
> 
> 赞同：2
> 
> 时间：2012-10-02T12:38:53.607
> 
> 标签：android, voicemail

有 VoicemailContract 在 API 级别 14 及以上添加语音邮件，但是有没有办法在 API 级别 10 上添加语音邮件？

# c++ - C++ XOR 运算符优先级

> ID：12690413
> 
> 赞同：-8
> 
> 时间：2012-10-02T12:38:56.130
> 
> 标签：c++, c

所以我在这里很困惑，是否：是

```
 a ^= b^c 
```

相当于

```
 a = a ^ (b ^ c) 
```

或者是`a = (a ^ b) ^ c`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:40:27.993

任何短格式运算符：

```
LHS OP= RHS; 
```

非常像：

```
LHS = LHS OP RHS; 
```

正如评论中所指出的，完成的评估次数等存在差异，因此如果您在评估 时开始产生副作用，那么`LHS`这种简单的等价就不再那么简单了。或同等学历。这就是为什么我重新措辞上述内容以使其不那么铁板一块。

所以是前者，即`a = a ^ (b ^ c)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:15:02.793

“C 和 C++”涵盖了很多领域，但举一个例子，C99 标准说 (6.5.16.2)：

> 形式的复合赋值`E1 op= E2`与简单赋值表达式的不同之处`E1 = E1 op (E2)`仅在于左值`E1`只计算一次。

在 C++ 中，运算符重载意味着第一个表达式可能不等于其他两个表达式，具体取决于操作数的类型。但是对于内置的复合运算符，同样的规则也适用。C++03 说（5.17/7）：

> 表单表达式的行为`E1 op= E2`等价于 只计算一次的`E1 = E1 op E2`除外。`E1`

请注意，只有 C 标准才费心包含必要的括号来直接回答您的问题：名义上是`a ^ (b ^ c)`而不是`(a ^ b) ^ c`.

但我认为我们可以假设，在 C++ 标准在这里使用的类似 BNF 的特殊语法语言中，BNF 非终结符`E2`总是被认为是它出现的表达式的子表达式。所以在一个案例中具有从左到右的关联性（并且所有具有复合赋值版本的运算符都从左到右关联），这将拆分`E2`以使其不再是子表达式，我们必须在心里插入足够的括号来防止这种情况发生。

在实践中，异或无关紧要，因为无论如何值都是相同的，*除非*您在此过程中生成陷阱表示，这会导致错误。这可能发生在 C 或 C++ 的非 2 补码实现上，并且即使它想要也无法计算这种情况的*实现*。非 2 的补码实现几乎不存在，但标准允许它们。`a ^= b^c``a = (a^b)^c`

重要的`a -= b - c`是，*不*等价于, ,是整数`a = (a - b) - c`的情况。除非等于。`a``b``c``c``0`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T12:55:20.427

想想异或真值表，试一试，这有关系吗？

```
x | y | XOR
-----------
0 | 0 |  0
1 | 0 |  1
0 | 1 |  1
1 | 1 |  0 
```

所以如果你说`b = 10; //1010`and `c = 7; //0111`and`a = 3; //0011`

```
b ^ c =     1010 ^ 0111 = 1101 
a ^ (b^c) = 0011 ^ 1101 = 1110 (14)

a ^ b =     0011 ^ 1010 = 1001
(a^b) ^c =  1001 ^ 0111 = 1110 (14) 
```

给定您的具体示例，假设没有运算符重载，并且仅使用关联 XOR 运算符……这并不重要。

首先应用不太具体 `^=`，所以：

`a ^= b^c`相当于`a = a ^ (b^c)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T12:45:21.653

这里没有运算符优先级。您的问题是关于关联性的，并且由于运算符是关联的，因此没有任何区别。

# wpf - WPF Grid：使用自动高度但防止滚动

> ID：12690416
> 
> 赞同：1
> 
> 时间：2012-10-02T12:39:02.823
> 
> 标签：wpf, scroll, autosize, grid-layout

如何在 WPF Grid 控件中使用自动行高，但将其限制在 Grid 不完全滚动的范围内？

这是我的用户界面：

*   第一行：自动高度，包含标签和文本输入（实际上还有更多这些行）
*   第2行：包含一个高度灵活的ListView，取决于项目的数量
*   第三行：自动高度，包含控制上面列表项的按钮

ListView 应该是自动调整大小的，因此它只占用与其项目行一样多的空间。添加一行时，ListView 的高度会增加。

ListView 下方的按钮应直接保留在 ListView 下方，中间没有可变间隙。ListView 和 Buttons 之间的空间应始终为 6 像素，以命名一个值。

随着更多项目添加到 ListView，按钮会随着 ListView 的高度向下移动。当窗口不够大而无法全部显示时，按钮必须在可用空间的最底部保持可见，并且 ListView 应该开始滚动其内容。

所以有了一个简短的列表，它就像这样： Grid 的所有行都是自动高度的，底部有很多空白空间。对于一个长列表，就像中间行是 1*-height，Grid 跨越整个窗口，按钮在底部可见，列表跨越剩余空间，自动滚动其内容。

我怎样才能做到这一点？

我找到了 RowDefinition.MaxHeight 属性，但它不接受 * 高度。否则我会尝试这样的事情：

```
<RowDefinition Height="Auto"/>
<RowDefinition Height="Auto" MaxHeight="*"/>
<RowDefinition Height="Auto"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:53:12.777

您可以为除第二个之外的所有 RowDefinitions 设置固定高度和最小高度，并在 ListView 周围放置一个滚动查看器。

编辑：好的，没有滚动查看器，ListView 可以自行滚动其内容。

# actionscript-3 - ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象

> ID：12690417
> 
> 赞同：0
> 
> 时间：2012-10-02T12:39:08.743
> 
> 标签：actionscript-3, flash, displayobject

我已经尝试过以下代码的变体，即从`stage`to`this.stage`或 even切换`root.stage`，但没有运气。

我得到的完整错误是：

```
 ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/setChildIndex()
at flash.display::Stage/setChildIndex()
at Banner/next_image_loaded() 
```

```
package {
    import flash.display.*;
    import flash.events.*;
    import flash.net.*;
    import flash.utils.*;
    import gs.*;
    import gs.easing.*;

public class Banner extends MovieClip
{
    var xml_url:URLRequest;
    var xml_loader:URLLoader;
    var img_loader:Loader;
    var img_data:Array;
    var img:Bitmap;
    var new_img:Bitmap;
    var strapline:strap;
    var banner:bottom_banner;
    var button:tech_button;
    var current_image:Number = -1;
    var done:Boolean = false;

    public function Banner()
    {
        this.xml_url = new URLRequest("Banner.xml");
        this.xml_loader = new URLLoader(this.xml_url);
        this.xml_loader.addEventListener(Event.COMPLETE, this.xml_loaded);
        this.xml_loader.addEventListener(IOErrorEvent.IO_ERROR, this.err);
        return;
    }// end function

    private function xml_loaded(event:Event)
    {
        this.img_data = new Array();
        var _loc_2:* = new XML(event.target.data);
        var _loc_3:* = 0;
        while (_loc_3 < _loc_2.image.length())
        {

            this.img_data.push(_loc_2.image[_loc_3]);
            _loc_3 = _loc_3 + 1;
        }
        this.img_data = this.randomise_array(this.img_data);
        this.next_content();
        return;
    }// end function

    private function randomise_array(param1:Array) : Array
    {
        var _loc_2:* = new Array();
        while (param1.length > 0)
        {

            _loc_2.push(param1.splice(Math.floor(Math.random() * param1.length), 1));
        }
        return _loc_2;
    }// end function

    private function next_content()
    {
        if (this.current_image == (this.img_data.length - 1))
        {
            this.current_image = 0;
        }
        else
        {
            var _loc_2:* = this.current_image + 1;
           this.current_image = _loc_2;
        }
        this.img_loader = new Loader();
        this.img_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, this.next_image_loaded);
        this.img_loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, this.err);
        this.img_loader.load(new URLRequest(this.img_data[this.current_image]));
        return;
    }// end function

    private function next_image_loaded(event:Event)
    {
        var _loc_2:Number = 0;
        this.new_img = event.target.content;
        stage.addChild(this.new_img);
        if (this.strapline)
        {
            stage.setChildIndex(this.strapline, (stage.numChildren - 1));
        }
        if (this.banner)
        {
            stage.setChildIndex(this.banner, (stage.numChildren - 1));
        }
        if (this.button)
        {
            stage.setChildIndex(this.button, (stage.numChildren - 1));
        }
        if (this.current_image == 0 && this.done != true)
        {
            this.button = new tech_button();
            this.button.x = 28;
            this.button.y = 257;
            //stage.addChild(this.button);
            var _loc_3:Boolean = true;
            this.button.buttonMode = true;
            this.button.useHandCursor = _loc_3;
            this.button.addEventListener(MouseEvent.CLICK, this.goToTechPage);
            TweenLite.from(this.button, 0.5, {alpha:0, delay:1.5});
            this.banner = new bottom_banner();
            this.banner.x = 0;
            this.banner.y = stage.stageHeight - 40;
            stage.addChild(this.banner);
            this.strapline = new strap();
            this.strapline.x = 232;
            this.strapline.y = 195;
            stage.addChild(this.strapline);
            TweenLite.from(this.strapline, 1, {x:stage.stageWidth, ease:Expo.easeOut, delay:0.75, onComplete:this.fade_strap});
            this.done = true;
        }
        else
        {
            _loc_2 = 0.75;
        }
        TweenLite.from(this.new_img, 1, {autoAlpha:0, ease:Expo.easeOut, onComplete:this.swap_clips, delay:_loc_2});
        return;
    }// end function

    private function goToTechPage(event:MouseEvent) : void
    {
        navigateToURL(new URLRequest("report.htm"), "_self");
        return;
    }// end function

    private function fade_strap()
    {
        TweenLite.to(this.strapline.bg_mc, 1.5, {alpha:0.85});
        return;
    }// end function

    private function remove_strap()
    {
        this.strapline.parent.removeChild(this.strapline);
        this.strapline = null;
        return;
    }// end function

    private function swap_clips()
    {
        if (this.img)
        {
            stage.removeChild(this.img);
        }
        this.img = this.new_img;
        this.new_img = null;
        setTimeout(this.next_content, 6500);
        return;
    }// end function

    private function err(event:IOErrorEvent)
    {
        if (this.img_data)
        {
            this.next_content();
        }
        return;
    }// end function

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:31:36.193

```
//stage.addChild(this.button); 
```

似乎“按钮”没有添加到舞台（在 next_image_loaded() 方法中），因此

```
if (this.button)
{
    stage.setChildIndex(this.button, (stage.numChildren - 1));
} 
```

抛出错误，虽然 'button' 可能存在 (!= null)，但它没有添加到舞台

尝试使用 if 语句，如下所示：

```
if(button != null && button.stage != null) 
```

编辑：正如维斯珀同时指出的那样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:52:47.240

这是很多人必须阅读的代码，您可以在代码中的关键点使用缩小错误发生`trace("trace 1")`的位置（每次更改数字）。当您执行代码时，输​​出窗口将显示您的跟踪，即：

```
trace 1
trace 2
trace 3
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller 
```

这告诉您错误发生在第三次跟踪之后的某个时间。您得到的错误告诉您它正在`next_image_loaded`函数中发生，因此请尝试在其中运行一些跟踪并使用结果更新您的帖子。

# c# - 单击 jQuery 选项卡时如何触发 c# 程序？

> ID：12690421
> 
> 赞同：4
> 
> 时间：2012-10-02T12:39:22.110
> 
> 标签：c#, jquery, asp.net, jquery-ui, webforms

我有 2 个标签。

*   第一个是最重要的，它加载内容非常快。
*   第二个不是很重要，加载它的内容（图表和摘要）需要很长时间

所以，我不想同时加载两个标签的内容。理想情况下，我只加载第一个选项卡内容，当用户单击第二个选项卡时，我将加载其相关内容（按需）。

为此，我需要在服务器端知道第二个选项卡已被单击，然后将所有相关信息发送回客户端。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:44:28.940

jQuery UI 选项卡控件支持[AJAX 内容](http://jqueryui.com/demos/tabs/#ajax)填充选项卡。只需将`href`选项卡链接设置为将返回 HTML 内容的服务器端 URL。

例如：

```
<div id="my-tabs">
    <ul>
        <li><a id="myfirst-link" href="/Server/One">First</a></li>
        <li><a id="mysecond-link" href="/Server/Another">Second</a></li>   
    </ul>
</div>

$('#my-tabs').tabs({
    load: function (event, ui) {           
        switch (ui.tab.id) {
            case 'myfirst-link':
                break;
            case 'mysecond-link':
                break;
        }
    },
    ajaxOptions: {
        success: function(result) {
        },
        error: function (xhr, status, index, anchor) {
        }           
    }
}); 
```

如果您需要在选项卡完成加载后运行任何 Javascript，则可以使用该`load`事件。如果您需要全局处理每个 ajax 调用的任何成功或错误，那么您可以使用`ajaxOptions`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:18:41.720

为此，您必须在客户端和服务器端进行更改。在服务器端（或代码隐藏），将方法设为静态并使用 [WebMethod] 属性对其进行装饰。

```
public partial class _Default : System.Web.UI.Page
{
    ...
    [WebMethod]
    public static void MethodToBeCalledUsingAjax(parameters)
    {
        //tab clicked logic goes here
    }
    ...
} 
```

在客户端，在选项卡单击功能内，使用 jquery ajax 如下

```
var req = $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Default.aspx/MethodToBeCalledUsingAjax",
            data: "{}",
            dataType: "json",
            success: function (msg) {
            }
        }); 
```

此 ajax 调用应按需通知服务器端单击选项卡并相应地处理代码。

请忽略样式...我是stackoverflow的新手:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:45:03.863

用于`jQuery-UI Tabs: Content via AJAX`填充选项卡。来源：http: [//jqueryui.com/demos/tabs/#ajax](http://jqueryui.com/demos/tabs/#ajax)

这是代码（从上面的链接中获取）：

```
<script>
    $(function() {
        $( "#tabs" ).tabs({
            ajaxOptions: {
                error: function( xhr, status, index, anchor ) {
                    $( anchor.hash ).html(
                        "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo." );
                }
            }
        });
    });
    </script>

<div class="demo">

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Preloaded</a></li>
        <li><a href="ajax/content1.html">Tab 1</a></li>
        <li><a href="ajax/content2.html">Tab 2</a></li>
        <li><a href="ajax/content3-slow.php">Tab 3 (slow)</a></li>
        <li><a href="ajax/content4-broken.php">Tab 4 (broken)</a></li>
    </ul>
    <div id="tabs-1">
        <p>Sample Text</p>
    </div>
</div>

</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:38:35.310

虽然我还没有找到如何在单击 jQuery 选项卡时在代码隐藏中触发事件，但是可以使用带有事件处理程序的[JuiceUI 选项卡来执行此操作](http://juiceui.com/controls/tabs)`SelectedTabChanged`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T13:49:25.010

您不应等待用户单击第二个选项卡。相反，您可以做的是填写 document.onReady 事件的第一个选项卡。它应该使用请求的 ajax 获取第一个选项卡的内容。

收到第一个 ajax 请求的回复后，在回复回调中，对第二个选项卡发出新请求。这样，当用户处理第一个选项卡时，它将在后台加载，当他/她切换到第二个选项卡时，它也将准备就绪。

在您的文档中使用它

```
 $(document).ready(function() {
  var req = $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Default.aspx/MethodToBeCalledUsingAjax",
            data: "{}",
            dataType: "json",
            success: function (msg) {
            }
        });
}); 
```

在success: 函数中，放置用于加载第二个选项卡的代码。

# javascript - 澄清在 Javascript 中传递参数

> ID：12690430
> 
> 赞同：3
> 
> 时间：2012-10-02T12:39:45.047
> 
> 标签：javascript

我目前正在学习javascript，对通过函数传递参数有点困惑，我希望有人能给出更清晰的解释

我有以下简单的代码

```
 //generate random number
     var number = Math.round(Math.random()*10 + 1);

     //Ask user for name
     var playerName = prompt("What is your name?");

     //Prompt for intro
    var weclome =   alert("Hello " + playerName + " Welcome to Guess the Number");
    console.log(number);

    var playerGuess = prompt("What is your guess ");

    if (playerGuess !== null) guess(playerGuess);

   function guess(pGuess){ 
    if(pGuess == number) {
     alert("Congratulations you have guessed correctly");
    } else {
     alert("Unlucky, please try again");
  }  
} 
```

如您所见，它只是一个简单的猜数字游戏。据我所知，到目前为止，我已经将变量 playerGuess 分配为提示输入的结果，我通过了guess 函数。我不明白的是我在guess 函数中调用了参数pGuess。我的理解是这不应该起作用，但它确实起作用了，pGuess 是如何知道从 playerGuess 中获取其价值的。

我是否以完全错误的方式看待这个，我真的很想了解这一点

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:41:27.957

> pGuess 如何知道从 playerGuess 中获取其价值

它没有。的值由函数调用`playerGuess`赋予函数，*而*不是函数从变量中获取。

`guess(playerGuess)`意思是“调用guess函数。将 的值`playerGuess`作为第一个参数传递。

`function guess(pGuess){`意思是“这是猜测函数。调用时将第一个参数的值赋给局部`pGuess`变量”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:45:12.707

你在用这一行做什么（注意`function`关键字）：

```
function guess(pGuess){ 
```

正在定义一个可重用的代码块（一个“函数”），它接受一个参数。当该参数到达时，可以`pGuess`在以下代码块中通过名称访问它，该代码块将持续到匹配的`}`.

你在用这一行做什么（注意我们没有`function`关键字了）：

```
guess(playerGuess); 
```

正在使用变量的当前值*调用*该函数`playerGuess`。因此，您将该值传递给函数，并将其放置在先前`pGuess`为该函数调用范围定义的变量中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:45:42.463

*   的值`prompt("What is your guess ");`被分配给变量`playerGuess`
*   该方法`guess`被调用，值为 `playerGuess`
*   `pGuess` is just the internal identifier the `guess` method uses for the argument - just another variable. In this case, containing the value of `playerGuess`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T12:41:58.083

这是对的。当你打电话`guess(playerGuess)`时，你`pGuess`在功能中进行设置。

# html - 带有透明部分的PNG图像上的CSS边框

> ID：12690444
> 
> 赞同：40
> 
> 时间：2012-10-02T12:40:59.937
> 
> 标签：html, image, css, png

我试图在我拥有的 PNG 图像上添加边框（包括示例）。问题是，当我当前添加边框时，它会将其添加到所有图像周围的框形上，而不是精确的矢量上（意味着它包括图像中的透明部分）。

是否有任何可能的方法来设置它不会考虑透明区域的边框配置。（即使不是在 CSS 中......也许是 HTML5/JS？）

![示例图片](../Images/e240127b1e1941a39388ff2d22b02cec.png)

![在此处输入图像描述](../Images/30e59ad451b03118905b36e09d7300d7.png)

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2015-01-31T20:00:40.883

截至目前（*2015 年 1 月 31 日*），有一种方法可以做到这一点，而无需使用画布，使用纯 CSS，并且只需 2 行代码。

诀窍是使用 css`filter`和`-webkit-filter`属性绘制两个没有模糊的阴影，一个用于正轴，一个用于负轴，它将环绕图像，这将提供（*希望*）所需的效果。

**注意**： IE 中根本不支持 css 过滤器（希望 Spartan 做得更好），这是一个[**兼容性表**](http://caniuse.com/#feat=css-filters)。

第一个片段（[**小提琴**](http://jsfiddle.net/mpdvmhcm/2/)）将应用**最简单的边框**。

```
img {
  -webkit-filter: drop-shadow(1px 1px 0 black)
                  drop-shadow(-1px -1px 0 black);
  filter: drop-shadow(1px 1px 0 black) 
          drop-shadow(-1px -1px 0 black);
}

body {
  background-color: lightcoral;
}
```

```
<img src="http://i.imgur.com/GZoXRjS.png" width="250">
```

正如你所看到的，一些图像（比如[**这个很棒的baymax渲染**](https://i.imgur.com/GZoXRjS.png)）需要更多的调整，你可以看到右边框比左边框小一点。

考虑到这一点，这是一个**完美的边框片段**（[**小提琴**](http://jsfiddle.net/mpdvmhcm/1/)），只有一个非常小的值调整。

```
img {
  -webkit-filter: drop-shadow(2px 1px 0 black)
                  drop-shadow(-1px -1px 0 black);
  filter: drop-shadow(2px 1px 0 black) 
          drop-shadow(-1px -1px 0 black);
}

body {
  background-color: khaki;
}
```

```
<img src="http://i.imgur.com/GZoXRjS.png" width="250">
```

这应该很好地覆盖边界，但我们仍然可以从中获得更多乐趣，看看这个令人敬畏的**亮度效果片段**（[**小提琴**](http://jsfiddle.net/mpdvmhcm/6/)）。

```
img{
    -webkit-filter: drop-shadow(1px 1px 0 black) 
                    drop-shadow(-1px -1px 0 white);
    filter:drop-shadow(1px 1px 0 black) 
           drop-shadow(-1px -1px 0 white);
}

body{
    background-color:lightblue;
}
```

```
<img src="http://i.imgur.com/GZoXRjS.png" width="250">
```

希望这可以帮助任何想知道半透明图像环绕边框的可能性的人！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-07-25T18:51:59.403

我扩展了最适合我使用的最佳答案。

```
-webkit-filter: drop-shadow(2px 2px 0 white)
                drop-shadow(-2px 2px 0 white)
                drop-shadow(2px -2px 0 white)
                drop-shadow(-2px -2px 0 white);

filter: drop-shadow(2px 2px 0 white)
        drop-shadow(-2px 2px 0 white)
        drop-shadow(2px -2px 0 white)
        drop-shadow(-2px -2px 0 white);
```

如果有人还需要它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-05T22:04:45.217

三年的问题仍然有效。因为我（最初）想要更粗的笔触，所以我最终使用了 8 个阴影（指南针的每个点一个）来让它看起来像这样。

奇怪的是，使用 x 和 y 偏移为 1px 的 8 个阴影会产生一个看起来大约 5px 宽的轮廓，但在颜色中引入透明度似乎有助于将其调回稍微柔和但非常吸引人的结果：

```
img {
    --stroke-pos: 1px;
    --stroke-neg: -1px;
    --stroke-color: rgba(0, 255, 0, 0.2);
    filter: drop-shadow(var(--stroke-pos) 0 0 var(--stroke-color)) 
      drop-shadow(var(--stroke-neg) 0 var(--stroke-color))
      drop-shadow(0 var(--stroke-pos) 0 var(--stroke-color))
      drop-shadow(0 var(--stroke-neg) 0 var(--stroke-color))
      drop-shadow(var(--stroke-pos) var(--stroke-pos) 0 var(--stroke-color)) 
      drop-shadow(var(--stroke-pos) var(--stroke-neg) 0 var(--stroke-color))
      drop-shadow(var(--stroke-neg) var(--stroke-pos) 0 var(--stroke-color))
      drop-shadow(var(--stroke-neg) var(--stroke-neg) 0 var(--stroke-color));   
} 
```

如您所见，CSS 变量在这里派上用场（或 Sass / Less）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T05:20:02.517

遇到需要自己做这个 - 想出了这个黑客。我的原件后面的一系列重叠图像彼此略微不同步。上下文 ctx3 是原始图像的副本，这将多次复制原始图像后面的白色轮廓。

```
 ctx3.shadowColor = "rgba(255,255,255,1)";
      ctx3.globalCompositeOperation = 'source-over';
      ctx3.shadowOffsetX = 2;
      ctx3.shadowOffsetY = 2;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = -2;
      ctx3.shadowOffsetY = -2;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = -2;
      ctx3.shadowOffsetY = 2;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = 2;
      ctx3.shadowOffsetY = -2;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = 0;
      ctx3.shadowOffsetY = 2;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = 0;
      ctx3.shadowOffsetY = -2;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = 2;
      ctx3.shadowOffsetY = 0;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0);
      ctx3.shadowOffsetX = -2;
      ctx3.shadowOffsetY = 0;
      ctx3.shadowBlur = 0;
      ctx3.drawImage(YourImageSource,0,0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-24T06:44:40.420

我通过一些调整实现了这项技术，结果如下：

[![在此处输入图像描述](../Images/3e956c24cb1edcb6db34215fb7a1b2e9.png)](https://i.stack.imgur.com/LNw7i.jpg)

[![在此处输入图像描述](../Images/7b20421707fb43895f327ea5a68597af.png)](https://i.stack.imgur.com/usKoQ.jpg)

如您所见，圆形图像看起来不错，其他形状的图标也是如此。

这是我的 css，我为四个边添加了四个规则，每个边有 5 个像素。

```
filter: drop-shadow(5px 0 0 white) 
        drop-shadow(0 5px 0 white)
        drop-shadow(-5px 0 0 white) 
        drop-shadow(0 -5px 0 white); 
```

因为我使用的是 scss，所以前缀会自动添加。

# asp.net-mvc - SQL Azure + 出现错误“已经有一个打开的 DataReader 与此命令关联..”，即使在设置“MultipleActiveResultSets = True”之后也是如此

> ID：12690453
> 
> 赞同：28
> 
> 时间：2012-10-02T12:41:50.140
> 
> 标签：asp.net-mvc, azure, azure-sql-database

我们在云上部署的应用程序版本面临一些问题。

我们的应用程序是一个带有 ADO .NET Entity Framework 的 ASP.NET MVC 3 项目。

根据 msdn 博客，我们需要在我们正确完成的数据库连接字符串中添加参数“MultipleActiveResultSets=True”（对于带有 SQL azure 的实体框架）。

从我们的应用程序执行数据库查询时，我们得到以下异常：“已经有一个打开的 DataReader 与此命令关联，必须先关闭它。”，我猜这与“MultipleActiveResultSets=True”属性非常相关。

该应用程序使用我们本地部署的数据库以及使用 SQL azure 数据库（在本地环境中）在本地环境中运行良好。

但是当我们部署我们的云应用程序时，我们会遇到上述错误。似乎没有从连接字符串中读取“MultipleActiveResultSets=True”属性。

我正在使用的连接字符串如下：

```
 <connectionStrings>
        <add name="#DBInstanceName#" connectionString="Data Source=tcp:#server#.database.windows.net,1433;Initial Catalog=#DBName#;User ID=”UserName#@#server#;Password=”#password#”;MultipleActiveResultSets=True" providerName="System.Data.SqlClient"/>
    </connectionStrings> 
```

我能够使用来自本地部署的应用程序的上述连接字符串连接到 SQL Azure 数据库，没有任何例外。但是，当使用相同的连接字符串在云上部署相同的应用程序时，会出现上述错误。

你能帮我们解决同样的问题吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-03T04:24:10.320

我刚遇到同样的问题。我尝试在 Web.config 连接中设置“MultipleActiveResultSets=True” - 没有结果。最后，我通过直接在网站的 Azure 仪表板手动编辑连接字符串解决了问题 - 在“配置”选项卡中有“连接字符串”设置，您应该在其中手动添加“MultipleActiveResultSets=True;” 细绳。在这样做之后，我终于让 MARS 工作了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-13T04:05:48.300

或者，您可以在使用 Visual Studio 中的发布功能时将“MultipleActiveResultSets=true”添加到连接字符串并更新目标 web.config。确保选择“在运行时使用此连接字符串（更新目标 web.config）”。![在此处输入图像描述](../Images/2ccff02e2448d5af6c6811911ee2fd16.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T19:05:21.863

您必须在连接字符串中设置 multipleresultsets=true 并重新启动。

删除的答案

> 编辑：这是有争议的！检查下面的评论...我还没有时间调查...
> 
> 我想它已经打开了。
> 
> 我找不到确切的来源，但 Faisal Mohamood（项目经理，实体框架）在 2010 年表示：“不用说，我们将确保在我们获得基于 SQL Azure 的应用程序时自动打开 MARS围绕发布产品的下一个更新。” 在这里找到它：http: [//blogs.msdn.com/b/adonet/archive/2010/06/09/remember-to-re-enable-mars-in-your-sql-azure-based-ef-apps。 aspx](http://blogs.msdn.com/b/adonet/archive/2010/06/09/remember-to-re-enable-mars-in-your-sql-azure-based-ef-apps.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-27T04:44:25.103

我们在新的 Azure 门户上也遇到了这个问题。MARS 适用于所有本地开发环境，但在 Azure 上抛出了同样令人讨厌的异常。我们验证了部署到 Azure 的物理 web.config 文件中的连接字符串包含`MultipleActiveResultSets=true;`，但应用程序似乎没有接受它。最终起作用的是应用服务实例 > 设置 > 数据连接，并删除与 web.config 中所讨论的同名的数据连接。我的猜测是 Azure 存储的那个胜过部署的 web.config 中的那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T14:52:43.603

尝试在代码中分配 MultipleActiveResultSets。是没读还是没用？

[SqlConnectionStringBuilder.MultipleActiveResultSets](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.multipleactiveresultsets.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-14T00:11:17.593

我有同样的问题，但我解决了来自发布助手的连接字符串中的 MultipleActiveResultSets=True，作为 irium

# c++ - Visual Studio C++ dll 库在 Qt 应用程序中崩溃

> ID：12690457
> 
> 赞同：9
> 
> 时间：2012-10-02T12:42:02.233
> 
> 标签：c++, qt, visual-c++, dll, abi

我在 MS Visual C++ DLL 库和 Qt 程序之间共享“std::string”数据时遇到问题。

# 我拥有的是：

*   用 Visual C++ 2010 Express 编写的 DLL 库，它导出一种方法：

    ```
    extern "C" __declspec(dllexport) int Init(ITest* commandTest); 
    ```

*   抽象接口“ITest”和实现它的类：

    ```
    class CTest: public ITest
    {
    public:
        CTest();
        virtual ~CTest();
        virtual void getVersion(std::string & version) const;
    }; 
    ```

*   Qt GUI 应用程序需要：

    ```
    * load the DLL dynamically
    * instantiate CTest and pass it to exported Init method. 
    ```

在 DLL 的“Init”中，调用了“CTest::getVersion()”方法。我希望它会填充“&version”字符串。当我用新字符串填充“&version”时，我得到的是在线崩溃。

# 我已经做了什么：

*   [从http://qt-project.org/downloads](http://qt-project.org/downloads)下载“Qt libraries 4.8.3 for Windows (VS 2010, 235 MB)” ，安装并在 QtCreator 的项目设置中选择它。

*   在 QtCreator 中，从 MinGW 工具链切换到安装了 MS Visual Studio 2010 Express 的工具链。

    我认为它会克服这个问题，因为我使用的是用 VS 2010 编译的 Qt 库，而 Qt GUI 也是用 VS C++ 工具链编译的。不幸的是问题并没有消失，所以我尝试了最后一步：

*   在 Visual Studio 中创建 Win32 控制台应用程序，通过 LoadLibrary 加载我的 DLL，使用“Init”方法，就像我在 Qt GUI 中所做的一样......它工作了！！

## 小观察

在“CTest::getVersion()”中，我正在打印这个通过引用传递给控制台的“版本”字符串。当使用 VS C++ 控制台应用程序作为主机时，它会正确打印出来。使用 Qt 应用程序时 - 打印“版本”字符串周围有一些垃圾（例如┌►☻qwerty27）

这让我觉得 Qt 应用程序的 ABI 和我的 DLL 仍然不兼容，即使使用上面提到的 Qt VS 2010 库也是如此。

# 问题：

*   使用 Windows (VS 2010) 的 Qt 库和 Visual Studio 工具链不足以克服 ABI 兼容性问题吗？
*   这是否意味着我应该自己编译 Qt 框架？
*   请帮助 - 欢迎任何想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:04:55.987

在一个项目中，我的情况与您的情况非常相似，两个 DLL，相同的编译器（VC++ 2010）。我将 std::string 从一个传递到另一个，并且发生了很多崩溃。

问题是一个 DLL 是使用**多线程调试 DLL (/MDd)**编译的，另一个是使用**多线程调试 (/MTd)**编译的，这导致两个 DLL 之间的二进制不兼容（崩溃）。此外，版本必须匹配，对两个 DLL 使用 DEBUG 或 RELEASE。

查看您的项目，两个 DLL 似乎都在使用**Multi-threaded Debug DLL (/MDd)**。这意味着两者都在使用**MSVCP100D.dll**。没关系，唯一的问题是QT网站的VC++版本的qt是在RELEASE模式下编译的，使用的是**MSVCP100.DLL**

我的建议是将您的运行时库更改为用于调试配置的**多线程 DLL (/MD) 。**

我的第二个建议是遵循 Rebert 的建议并使用**char***而不是 std::string。**char***无论如何都将兼容。

您还可以使用**多线程调试 DLL (/MDd)**重新编译 QT，并将该版本的 QT 用于您的调试配置（但这似乎需要很多工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:38:24.783

名义上，我不会冒险在应用程序和 DLL 之间传递复杂的数据（超出我的控制，代码方面）。我会求助于只传递 POD 结构，即我会将接口更改为此：

```
class CTest: public ITest
{
public:
    CTest();
    virtual ~CTest();
    virtual void getVersion(char* versionBuffer, unsigned length) const;
}; 
```

让生活更轻松；）

# ios - Apple 拒绝，因为 UIBackgroundMode = location

> ID：12690459
> 
> 赞同：14
> 
> 时间：2012-10-02T12:42:26.957
> 
> 标签：ios, cllocationmanager, appstore-approval

我提交了一个应用程序，它以用户选择的固定时间间隔（5 分钟、10 分钟、30 分钟、1 小时）跟踪用户的位置（并将其发送到服务器）。该应用程序也应该在后台运行（发送请求），我已将其声明为`UIBackgroundMode = location`. 我可以在后台以这些固定的时间间隔发送请求。苹果拒绝了它，建议如下：

> 我们发现您的应用使用后台模式，但不包含需要该模式持续运行的功能。此行为不符合 App Store 审核指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持位置，但不包括需要持久位置的功能。
> 
> 添加需要在应用程序处于后台时持续使用实时位置更新的功能或从 UIBackgroundModes 键中删除“位置”设置是合适的。如果您的应用程序不需要持久的实时位置更新，我们建议使用重大变化位置服务或区域监控位置服务。
> 
> 有关这些选项的更多信息，请参阅位置感知编程指南中的“启动显着变化位置服务”和“监控基于形状的区域”部分。
> 
> 如果您选择添加使用位置后台模式的功能，请在您的应用程序描述中包含以下电池使用免责声明：
> 
> “继续使用在后台运行的 GPS 会大大缩短电池寿命。”

如果我更改重大位置更改并`UIBackgroundMode`从中删除密钥`Info.plist`，则该应用程序将在后台被终止，并且仅在事件发生时才会唤醒。但是我必须每 5 分钟向服务器发送一次请求，并且我的应用程序在后台被终止（假设用户没有移动并且事件不是`trigger = no`请求被发送到服务器）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-06T11:42:03.940

要解决此问题，您必须在 Itunes Connect 的应用说明中添加免责声明“继续使用在后台运行的 GPS 会显着降低电池寿命。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T12:45:15.737

听起来苹果的抱怨是你的苹果认为你的应用*不需要*使用后台位置。如果您尝试做的事情是合法的 - 例如，您的用户希望应用程序在后台跟踪他们，这对他们来说很有用 - 您可以尝试在评论说明中解释为什么需要位置跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:45:06.863

我认为最好直接向 Apple 提出这些问题。我希望你这样做了。他们非常擅长沟通，只要您的回答专业而清晰。你的问题也是如此。

我很难相信有人能在这里为您提供帮助。

编辑：为您的应用添加描述。在给用户和苹果评论者的信息中要清楚。这似乎有很大帮助。记住，他们也是人。

# c# - C# 中接受字符串的 TrimEnd 或 TrimStart 方法？

> ID：12690462
> 
> 赞同：3
> 
> 时间：2012-10-02T12:42:33.767
> 
> 标签：c#, string

C# 是否有带有参数的`TrimEnd`or`TrimStart`方法`string`？不，即使我们使用`string.ToCharArray()`like`TrimEnd(str.ToCharArray());`它也表现不佳。

例如：

```
string sam = "Sammy";
sam = TrimEndOrStart(sam, "my", true); 
```

`sam`应该等于`"Sam"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:59:51.530

您可以使用 StartWith / EndWith 像：

```
static class StringTrimExtension {
    public static string TrimStart(this string value, string toTrim) {
        if (value.StartsWith(toTrim)) {
            int startIndex = toTrim.Length;
            return value.Substring(startIndex);
        }
        return value;
    }

    public static string TrimEnd(this string value, string toTrim) {
        if (value.EndsWith(toTrim)) {
            int startIndex = toTrim.Length;
            return value.Substring(0, value.Length - startIndex);
        }
        return value;
    }
}

static void Main(string[] args) {
        string s = "Sammy";
        Console.WriteLine(s);
        string trimEnd = s.TrimEnd("my");
        string trimStart = s.TrimStart("Sa");
        Console.WriteLine(trimEnd);
        Console.WriteLine(trimStart);
        Console.ReadLine();
} 
```

如果您需要 ignoreCase，您可以实现并覆盖您的修剪方法，并使用[StartsWith](http://msdn.microsoft.com/de-de/library/system.string.startswith%28v=vs.80%29.aspx) / [EndsWith](http://msdn.microsoft.com/de-de/library/system.string.endswith%28v=vs.80%29.aspx)方法中的覆盖。

**编辑：** 递归：

```
static class StringTrimExtension {
    public static string TrimStartRecursive(this string value, string toTrim) {
        string result = value;
        while (TrimStart(result, toTrim, out result)) {}
        return result;
    }

    public static string TrimEndRecursive(this string value, string toTrim) {
        string result = value;
        while (TrimEnd(result, toTrim, out result)) { }
        return result;
    }

    public static string TrimStart(this string value, string toTrim) {
        string result;
        TrimStart(value, toTrim, out result);
        return result;
    }

    public static string TrimEnd(this string value, string toTrim) {
        string result;
        TrimEnd(value, toTrim, out result);
        return result;
    }

    public static bool TrimStart(this string value, string toTrim, out string result) {
        result = value;
        if (value.StartsWith(toTrim)) {
            int startIndex = toTrim.Length;
            result= value.Substring(startIndex);
            return true;
        }
        return false;
    }

    public static bool TrimEnd(this string value, string toTrim, out string result) {
        result = value;
        if (value.EndsWith(toTrim)) {
            int startIndex = toTrim.Length;
            result = value.Substring(0, value.Length - startIndex);
            return true;
        }
        return false;
    }
}

    static void Main(string[] args) {
        string s = "Sammymymymy";
        Console.WriteLine(s);
        string trimEnd = s.TrimEndRecursive("my");
        string trimStart = s.TrimStartRecursive("Sa");
        Console.WriteLine(trimEnd);
        Console.WriteLine(trimStart);
        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-02T12:42:33.767

```
/// <summary>
/// Does a nice trim for your string
/// </summary>
/// <param name="Subject">The subject</param>
/// <param name="Search">What to trim on the string</param>
/// <param name="TrimEnd">If set to true we trim the end</param>
/// <returns></returns>
public static string TrimEndOrStart(string Subject, string Search, bool TrimEnd)
{
    if (TrimEnd)
    {
        if (Subject.EndsWith(Search) == false)
        {
            return Subject;
        }

        Subject = ReverseString(Subject);

        Start:
            string[] Array1 = Subject.Split(new string[] { ReverseString(Search) }, 2, StringSplitOptions.RemoveEmptyEntries);

        if (Array1.Length == 1)
        {
            if (Subject.Equals(Array1[0], StringComparison.Ordinal) == false)
            {
                Subject = Array1[0];
                goto Start;
            }
        }

        Subject = StaticMethods.ReverseString(Subject);
        return Subject;
    }

    if (Subject.StartsWith(Search) == false)
    {
        return Subject;
    }

    Start2:
        string[] Array2 = Subject.Split(new string[] { Search }, 2,  StringSplitOptions.RemoveEmptyEntries);

    if (Subject.Equals(Array2[0], StringComparison.Ordinal) == false)
    {
        Subject = Array2[0];
        goto Start2;
    }

    return Subject;
}

/// <summary>
/// Reverses a string array
/// </summary>
/// <param name="StrArray"></param>
/// <returns></returns>
public static string ReverseString(string Str)
{
    char[] ObjectArr = Str.ToCharArray();
    char[] NewObjectArr = new char[ObjectArr.Length];
    int counter = 0;

    for (int index = ObjectArr.Length - 1; index > -1; index--)
    {
        NewObjectArr[counter] = ObjectArr[index];
        counter = counter + 1;
    }

    Str = "";
    StringBuilder StrBu = new StringBuilder(1000);

    for (int index = 0; index < NewObjectArr.Length; index++)
    {
        StrBu.Append(NewObjectArr[index]);
    }

    Str = StrBu.ToString();
    return Str;
} 
```

# sql - 如何从数据库中获取保存的文本布局

> ID：12690463
> 
> 赞同：0
> 
> 时间：2012-10-02T12:42:32.800
> 
> 标签：sql, css, database

当我使用 textarea 将文本添加到我的 mysql 数据库时，文本的格式会以某种方式保存（换行符和空格）据我所知，此布局并未显示在数据库本身中。当我再次将此字符串从数据库加载到文本区域时，我得到的格式与我插入的格式相同。但是当我尝试将此字符串加载到 div 中时，它只会显示为一行。

所以我的问题是：如何在 div 中设置格式化文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:45:05.363

使用 nl2br 函数。

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:45:07.870

定义以使用与和使用`<div>`相同的空格。`<textarea>``<pre>`

```
div{
    white-space: pre;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:45:52.510

您使用什么语言将数据传输到网页？php?

如果是这样`htmlentities($mystring)`，会将换行符转换为`<br>`等。

你也可以把

```
<pre>
your text
</pre> 
```

这将显示它有点像普通的源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T12:47:15.020

有两种方法可以做到这一点：

第一种方法是使用 php 函数[nl2br()](http://de3.php.net/manual/en/function.nl2br.php)在 <br> 中设置 \n，第二种方法是给你的 div 一个类，用[CSS white-space格式化它](http://www.w3schools.com/cssref/pr_text_white-space.asp)

# http - 如果 POSTed 对象验证失败，则更正 HTTP 状态代码

> ID：12690466
> 
> 赞同：0
> 
> 时间：2012-10-02T12:42:51.747
> 
> 标签：http

如果在 POST 中验证对象失败，我应该设置什么状态代码。使用休息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:48:14.673

400 错误请求 - [http://restpatterns.org/HTTP_Status_Codes](http://restpatterns.org/HTTP_Status_Codes)

另请参阅：[验证失败或无效重复的 REST HTTP 状态代码](https://stackoverflow.com/questions/3290182/rest-http-status-codes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:47:57.453

最合适的可能是 400，“Bad Request”。4xx 状态代码对应于客户端错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:31:31.213

想到 422（见[http://greenbytes.de/tech/webdav/rfc4918.html#STATUS_422](http://greenbytes.de/tech/webdav/rfc4918.html#STATUS_422)）

# jquery - 使用 jQuery map 函数后如何将数组转换为字符串？

> ID：12690468
> 
> 赞同：5
> 
> 时间：2012-10-02T12:42:54.093
> 
> 标签：jquery, arrays, serialization

我正在使用[.map](http://api.jquery.com/jQuery.map/)函数将元素转换为数组，然后我想将此数组转换为字符串：

**javascript:**

```
var selectedElements = $('.data').map(function() {
    return $(this).hasClass('selected') ? 'true' : 'false';
});

var A = ['Sunday','Monday','Tuesday','Wednesday','Thursday']
A = A + "";

var string = selectedElements  + "";

console.log("\ndebug:");
console.log(selectedElements);
console.log(A);
console.log(string );​ 
```

**html:**

```
<div class='data'></div>
<div class='data selected'></div>
<div class='data selected'></div>
<div class='data'></div>
<div class='data'></div>
<div class='data'></div>
<div class='data'></div> 
```

**控制台输出：**

```
debug: fiddle.jshell.net:29
["false", "true", "true", "false", "false", "false", "false"]
Sunday,Monday,Tuesday,Wednesday,Thursday
[object Object] 
```

在这里小提琴：http: [//jsfiddle.net/F8ufE/](http://jsfiddle.net/F8ufE/)

如何将 selectedElements 转换为数组？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T12:45:06.207

根据[`.map()`文档](http://api.jquery.com/map/)：

> 由于返回值是一个 jQuery 对象，其中包含一个数组，因此在结果上调用 .get() 以使用基本数组是很常见的。

因此，如果您想获取实际的数组，可以使用`get`方法，如下所示：

```
var selectedElements = $('.data').map(function() {
    return $(this).hasClass('selected') + "";
}).get(); 
```

要将数组转换为字符串，您可以使用`join`方法：

```
selectedElements = selectedElements.join() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:42:54.093

像这样使用 jQuery 函数[.makeArray](http://api.jquery.com/jQuery.makeArray/)：

```
var selectedElements = $.makeArray($('.data').map(function() {
    return $(this).hasClass('selected') ? 'true' : 'false';
}));

var A = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday']
A = A + "";

var string = selectedElements + "";

console.log("\ndebug:");
console.log(selectedElements);
console.log(A);
console.log(string);​ 
```

[http://jsfiddle.net/U5LTK/](http://jsfiddle.net/U5LTK/)

# android - 如何在 Android 的 sqlite 数据库中创建新的原始数据？

> ID：12690473
> 
> 赞同：0
> 
> 时间：2012-10-02T12:43:12.853
> 
> 标签：android, sqlite

我在sqlite中有一个表，并且字段的ID名称有一个自动增量字段是“profile_id”。

现在我想添加一个新行，除了 profile_id 之外没有任何数据，我需要新创建的行的“profile_id”值，比我的查询应该做什么，请建议我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:50:57.920

您应该使用空值进行插入。插入命令返回 id: long id = db.insert(...);

# javascript - 尝试创建动态 JavaScript 移动测验

> ID：12690474
> 
> 赞同：0
> 
> 时间：2012-10-02T12:43:22.087
> 
> 标签：javascript, jquery, dom, jquery-mobile

我正在尝试创建一个动态的 java 脚本移动测验，用户可以在其中动态地为单个问题添加另一个（多个）答案，例如“你最喜欢的水果是什么？”

我在这里看到了 JavaScript 的示例：[Javascript Add Dynamic Input Field](https://stackoverflow.com/questions/5343991/javascript-add-dynamic-input-field)

但是我还没有看到在用户单击“提交并添加另一个水果”按钮后会删除输入字段的任何示例，以便他们可以输入：（在移动设备上工作）

*   苹果，点击提交并添加另一个水果
*   梨，单击提交并添加另一个水果
*   橙子，单击提交并添加另一个水果
*   猕猴桃，点击提交到下一个问题

我在想动态创建的输入字段名称是 question11.01, question11.02, question11.03, question11.04 或 question/part: q001p1, q001p2, q001p3, q001p4

该解决方案还需要使用返回提交按钮，以防用户意识到他不想将梨添加为第二个水果并将其更改为香蕉

我在用户“提交到下一个问题”之后隐藏了 div，然后使用 javascript 使下一个问题 div 可见，以在移动设备中提供下一页效果，用户觉得他正在参加一个动态测验，你会在DMV 计算机测试

```
<div class="questionquiz11" >

    <h2>Question 11</h2>
 <HR>

    <p>What is your favorite fruit(s)?   </p>

    <input type=text name="question11.01" >

 <BR> 

    <input type=submit id="backbutton"    value="Back">

    <input type=submit id="button"    value="Submit to next question">

    <input type=submit id="addfruit"  value="Submit and Add Another Fruit">

</div>

<div class="questionquiz12" style="display: none">

    <h2>Question 12</h2>
 <HR>

    <p>What is your favorite veggies(s)?   </p>

    <input type=text name="question12.01" >

 <BR> 

    <input type=submit id="backbutton"    value="Back">

    <input type=submit id="button"    value="Submit to next question">

    <input type=submit id="addveggies"  value="Submit and Add Another Veggie">

</div> 
```

更新：可能动态创建一个 div 类型的示例代码（用它做一些测试）

```
 var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]'>";
          document.getElementById(divName).appendChild(newdiv);
          counter++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:18:46.540

如果您想要同时具备添加输入字段和在问题之间导航的功能，请首先通过 mkyong 在`<div>`. 您可以通过将 jQuery[`.append(...)`](http://api.jquery.com/append/)函数与附加内的另一个输入框一起使用来完成此操作。

当用户导航到下一个问题[`.hide()`](http://api.jquery.com/hide/)时`<div>`，问题[`.show()`](http://api.jquery.com/show/)的和`<div>`下一个问题的。

# java - 无法连接到正确的 localhost/phpmyadmin

> ID：12690477
> 
> 赞同：0
> 
> 时间：2012-10-02T12:43:29.227
> 
> 标签：java, mysql, netbeans, phpmyadmin

我构建了一个 Netbeans 项目并通过 localhost wamp 服务器将其连接到 MySQL 数据库。

在它所在的计算机出现问题后，我不得不将项目转移到我的笔记本电脑上。

当我使用旧数据库运行项目时，它找不到它；但是，它会从 phpmyadmin 界面找到默认数据库（test、mysql、performance_schema、information_schema）。

```
public void chackData(){
        try {

    Class.forName("com.mysql.jdbc.Driver").newInstance();
    con = DriverManager.getConnection("jdbc:mysql://localhost:3306/mylibrary_db","root", "");
    String sql = "SELECT * FROM db ;";
            pst = con.prepareStatement(sql);
            rs = pst.executeQuery();
            String s ="";
            while(rs.next()){
                 s = rs.getString("Db");
            System.out.println(s);
            }
    con.close(); 
```

有人能停下来吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:16:29.320

我认为这是因为您在旧数据库中复制了密码已变得混乱，或者在我假设是新的 WAMP 安装期间旧数据库将其删除。如果您已直接将旧数据库复制到新的 wamp 安装，那么除非它使用相同的密码进行设置，否则您将在那里遇到问题，如果您不知道它们，很难将它们取回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:57:36.250

我知道这个问题看起来很愚蠢，但是您是否移动了笔记本电脑的 mysql 服务器上的旧数据库？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T15:24:26.467

```
st = con.createStatement();
ResultSet rs = st.executeQuery("SELECT * FROM db ;");
System.out.println("Connection stablished"); 
```

# math - 定义递归数据结构

> ID：12690480
> 
> 赞同：5
> 
> 时间：2012-10-02T12:43:39.643
> 
> 标签：math, haskell

我正在尝试学习 Haskell，认为这将是实现[组合博弈论](http://en.wikipedia.org/wiki/Combinatorial_game_theory)的完美语言。我在某种程度上用 Python 完成了这项工作，以自学 OOP 原则和运算符重载，但 Haskell 吸引我，因为它的语法似乎更数学化，并且具有我非常喜欢的数学背景。此外，懒惰地实现无限列表是非常了不起的。

无论如何，到目前为止我所拥有的是一个可以编译的数据结构，但是我使用它编写的第一个函数给了我：

```
Prelude> :l cgt
[1 of 1] Compiling Main             ( cgt.hs, interpreted )

cgt.hs:8:30:
    Couldn't match expected type `([Game], b0)' with actual type `Game'
    In the first argument of `fst', namely `b'
    In the second argument of `(:)', namely `(fst b)'
    In the expression: a : (fst b)
    Failed, modules loaded: none. 
```

这是我的代码...

```
--A game that is Zero (base case) is two empties
--Anything else must be two lists of games, a left list and a right list.

data Game = Zero
          | Position ([Game], [Game])

putL :: Game -> Game -> Game
putL a b = Position (a :(fst b), snd b) 
```

我意识到游戏有点像[Wikibook](http://en.wikibooks.org/wiki/Haskell/Other_data_structures#Trees)上讨论的树，但它们有额外的限制。

1.  一个位置（树节点的亲属）可以有许多可能的移动
2.  一个位置只能包含其他游戏
3.  有一个特殊的游戏，零，没有可能的动作。
4.  所有游戏都是使用零构建的。

所以当我写的时候`putL`，我说，“拿一个 Game`a`和另一个 Game `b`，然后将 cons`a`放入 的第一部分`b`，而将第二部分`b`单独留下，返回一个 Position （这是一种 Game）。” 至少，这就是我想要做的。相反，Haskell 认为我返回的类型是`([Game], b0)`，我不知道为什么。

谢谢！我感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T12:49:49.133

你不能在 type 的东西上使用`fst`and`snd`函数`Game`。由于您没有在数据构造函数中为字段声明名称，`Zero`并且`Position`，实际访问它们的唯一方法是通过模式匹配。（请注意，我还删除了`Position`构造函数中不必要的元组）

```
data Game
  = Zero
  | Position [Game] [Game]

putL :: Game -> Game -> Game
putL game Zero = ???
putL game (Position games1 games2) = Position (game : games1) games2 
```

现在，我显然不知道你想为`Zero`构造函数发生什么，所以你必须自己填写那些`???`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T13:24:58.903

dflemstr 的回答是正确的。我将解释您收到的错误消息。

*   `a : fst b`必须有类型`[Game]`——同意，是吗？
*   因此`a`必须具有类型`Game`...（确实如此，万岁）
*   ...并且`fst b`必须有类型`[Game]`
*   [`fst`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:fst)将一对作为输入，并产生对的第一个元素，所以......
*   ...`b` must have type `([Game], b0)` (for some type `b0` that we haven't worked out yet) (this is the *expected* type)
*   this is a problem because according to the type signature for `putL`, `b` must have type `Game` (this is the *actual* type) --- it can't be a pair

# php - 带校验和的唯一静态长度 ID

> ID：12690484
> 
> 赞同：0
> 
> 时间：2012-10-02T12:43:52.433
> 
> 标签：php, encryption, encoding, hash, checksum

数据库中有具有自动递增 ID (1,2,3,...999999) 的用户。我需要的是从 user_id 生成一个看起来随机的静态长度（例如 8 个或 10 个字符）ID，可以将其解码回原始 ID，很像哈希函数，但可逆，基本上看起来像编码/加密。不需要安全。为什么我需要这个？用户应该在终端输入自己的ID并进行小额现金支付，所以如果他的ID是5656并且他无意中输入了6565，那么他的付款将转到6565的帐户，因为有一个具有该ID的帐户。但是当他的 ID 是 3783479238 时，例如，37834792 是 5656 的编码版本，最后两位数 (38) 是校验和（为了检查完整性，条形码或信用卡号存在这种情况），有是没有办法为其他用户付费的。

PHP 函数/库会很棒，但如果你有它用于其他语言（c、java 等）或只是数学函数，我不介意。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:54:32.120

这完全取决于您希望支票的强度和持续时间：

*   最简单的说法是，如果将所有单独的数字相加，则该数字的模数为 9。这是对信用卡号码进行的检查。
*   在荷兰这里`11 check`用于银行帐号和社会安全号码。这是荷兰语的[解释](http://nl.wikipedia.org/wiki/Elfproef)，但你得到了数字。
*   在一个 40 英尺的集装箱上，有一个额外的数字表示集装箱编号也是模数检查。你必须用谷歌搜索那个。

# javascript - 如何在 JavaScript 中自动完成 API 调用的 JSON 响应？

> ID：12690485
> 
> 赞同：3
> 
> 时间：2012-10-02T12:43:53.633
> 
> 标签：javascript, json, autocomplete, getjson, phpstorm

我在玩 gihub api，想知道有什么方法可以使 IDE 知道静态（在包含属性返回的意义上）J​​SON 响应，以便我可以使用自动完成功能。

我试图欺骗 PhpStorm 认为响应具有以下语法，但`currentUser = user.data;`会重置对象并且其属性未显示在自动完成中

这是我的方法：

```
var githubUser = {
    avatar_url: null,
    bio: null,
    blog: null,
    company: null,
    created_at: null,
    email: null,
    followers: null,
    following: null,
    gravatar_id: null,
    hireable: null,
    html_url: null,
    id: null,
    location: null,
    login: null,
    name: null,
    public_gists: null,
    public_repos: null,
    type: null,
    url: null
};

var github =  {
    githubApiUrl: "https://api.github.com",

    getUserData: function(userName) {
        $.getJSON(this.githubApiUrl + "/users/" + userName + "?callback=?", function(user) {
            var currentUser = Object.create(githubUser);
            currentUser = user.data;
            console.log(currentUser.login); // this is where I want to be able to use autocompletion
        });
    }
};

github.getUserData("k0pernikus"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:32:09.947

```
currentUser = user.data; 
```

覆盖值。要从工作中获得`Object.create`-inheritance `githubUser`，您需要

```
$.extend(currentUser, user.data); 
```

# c# - windows phone skydrive 登录本地化

> ID：12690486
> 
> 赞同：0
> 
> 时间：2012-10-02T12:44:01.713
> 
> 标签：c#, vb.net

我有一个访问 SkyDrive 的 WP7 应用程序。我有一个`SignInButton`. `TextType = 'Signin'`显示为**'Sign in'**或**'Sign out'**的文本。

有没有办法针对不同的语言进行本地化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:12:57.140

MSDN 文档中描述了完成此操作所需的所有步骤。

[从Windows Phone 的全球化和本地化](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637522%28v=vs.92%29.aspx)开始以了解这些概念，您将找到[如何：为 Windows Phone 构建本地化应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637520%28v=vs.92%29.aspx)页面来描述您的问题。

[Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431744%28v=vs.92%29.aspx)`Globalization Sample`的代码示例页面中甚至还有一个完整的工作代码示例。

# php - 遍历 PHP SimpleXMLElementObject 的通用解决方案

> ID：12690490
> 
> 赞同：0
> 
> 时间：2012-10-02T12:44:28.297
> 
> 标签：php

> **可能重复：**
> [在 PHP 中按顺序解析 XML](https://stackoverflow.com/questions/11137204/parse-xml-sequentially-in-php)

我希望能够使用 PHP 遍历 SimpleXMLElementObject。但是，我希望能够在事先*不*知道标签名称的情况下做到这一点——我想要一个通用的解决方案，可以用作对象键名的发现机制。我尝试了一堆“foreach”类型的解决方案，但无法让它发挥作用。

示例代码：

```
$schema = new SimpleXMLElement("<activity></activity>");
$schema->addAttribute("default-currency","asdf");
$schema->addAttribute("last-updated-datetime","jkl;");
$schema->addChild('title', 'example title'); 
```

print_r($schema) 给出：

```
SimpleXMLElement Object ( 
    [@attributes] => Array ( 
        [default-currency] => asdf 
        [last- updated-datetime] => jkl; 
        ) 
    [title] => example title 
) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:49:44.707

使用`getName`SimpleXMLElement 的功能它会给你标签名称

[http://www.php.net/manual/en/simplexmlelement.getname.php](http://www.php.net/manual/en/simplexmlelement.getname.php)

例子

```
$sxe = new SimpleXMLElement("xml file");

echo $sxe->getName() . "\n";

foreach ($sxe->children() as $child)
{
    echo $child->getName() . "\n";
} 
```

# jquery-ui - 与 Facebook 好友一起引导 Typeahead

> ID：12690494
> 
> 赞同：2
> 
> 时间：2012-10-02T12:44:36.397
> 
> 标签：jquery-ui, twitter-bootstrap, typeahead

我有这个使用 jQuery UI 的自动完成功能： ![](../Images/2cfe9e0f8f586811f23fa2641d9c258f.png) 如何使用引导程序的 typeahead 完成相同的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:49:21.107

您可以在 typeahead 的源函数中加载您的 Facebook Graph JSON 对象。您必须解析 Facebook 返回的 JSON 对象并将其格式化为字符串数组，以便预先输入显示。在视觉上，您可以为预先输入显示的结果使用自定义模板。我建议阅读这两个链接以帮助您前进：

[https://github.com/twitter/bootstrap/pull/3682](https://github.com/twitter/bootstrap/pull/3682)

[https://github.com/twitter/bootstrap/issues/2441](https://github.com/twitter/bootstrap/issues/2441)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:44:14.253

或者也许你应该看看这个：

[https://github.com/tcrosen/twitter-bootstrap-typeahead](https://github.com/tcrosen/twitter-bootstrap-typeahead)

玩得开心 ！

# css - 使用 CSS 在浏览器中输出换行符

> ID：12690497
> 
> 赞同：0
> 
> 时间：2012-10-02T12:44:53.597
> 
> 标签：css

包裹在一个`<pre>`元素中，换行符在浏览器中呈现，并且`<br/>`不需要使用标签。`<div>`是否可以通过将 CSS 应用于元素来实现相同的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:46:35.593

CSS 属性

```
white-space: pre; 
```

将为您实现这一目标。请注意，此属性还有其他类似的值，这可能是您需要的更好解决方案，因此请查看文档。

参考：[CSS2](http://www.w3.org/TR/CSS21/text.html#white-space-prop)，[CSS3](http://www.w3.org/TR/css3-text/#white-space)

# c# - 在 C#.NET 中使用 Yahoo API 进行地理编码

> ID：12690498
> 
> 赞同：0
> 
> 时间：2012-10-02T12:44:55.113
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我对几天前正常工作的 csome 代码有一点问题。我正在使用 Yahoos API 来获取 PostCodes 的经度和纬度，代码如下：

```
string url = string.Format("http://where.yahooapis.com/geocode?flags=J&appid=xxxx&location={0}", postcode);

        decimal latitude = 0;
        decimal longitude = 0;
        Dictionary<string, decimal> geoCode = new Dictionary<string, decimal>();

        dynamic yahooResults = new Uri(url).GetDynamicJsonObject();
        foreach (var result in yahooResults.ResultSet.Results)
        {
            latitude = (decimal)result.latitude;
            longitude = (decimal)result.longitude;
        }

        geoCode.Add("latitude", latitude);
        geoCode.Add("longitude", longitude); 

        return geoCode; 
```

正如我所说，代码在几天前运行良好，但现在对数和纬度总是返回为 0。我在下面包含了雅虎的响应：

```
{
  "@lang": "en-US",
  "ResultSet": {
    "@version": "2.0",
    "@lang": "en-US",
    "Error": "0",
    "ErrorMessage": "No error",
    "Locale": "en-US",
    "Found": "1",
    "Quality": "60",
    "Result": {
      "quality": "60",
      "latitude": "51.62071",
      "longitude": "-0.23616",
      "offsetlat": "51.620708",
      "offsetlon": "-0.23616",
      "radius": "4200",
      "name": "",
      "line1": "",
      "line2": "London",
      "line3": "NW7",
      "line4": "United Kingdom",
      "house": "",
      "street": "",
      "xstreet": "",
      "unittype": "",
      "unit": "",
      "postal": "NW7",
      "neighborhood": "",
      "city": "London",
      "county": "Greater London",
      "state": "England",
      "country": "United Kingdom",
      "countrycode": "GB",
      "statecode": "ENG",
      "countycode": "LND",
      "uzip": "NW7",
      "hash": "",
      "woeid": "26787971",
      "woetype": "11"
    }
  }
} 
```

抱歉格式化 Stack 似乎不想把它格式化好！显然有一个逻辑和纬度返回。我确信这很简单，但我看不到它的爱或金钱，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:51:24.457

似乎雅虎不再返回`Result`数组。下面的代码有效

```
dynamic yahooResults =.....;

var latitude = (decimal)yahooResults.ResultSet.Result.latitude;
var longitude = (decimal)yahooResults.ResultSet.Result.longitude; 
```

# android - 我该如何解析以下内容？

> ID：12690510
> 
> 赞同：0
> 
> 时间：2012-10-02T12:45:26.083
> 
> 标签：android, json

我收到了这种格式的回复（整个回复）

到目前为止，我已经尝试了以下代码，但出现错误

```
private String connect(String url) {

    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    HttpResponse response;
    String returnString = null;
    try {
        response = httpclient.execute(httpget);
        if (response.getStatusLine().getStatusCode() == 200) {
            HttpEntity entity = response.getEntity();
            if (entity != null) {

                InputStream instream = entity.getContent();

                String res = convertStreamToString(instream);

                JSONObject jsonObj = new JSONObject(res);

                String f = jsonObj.getString("Result");

                f = f.trim();

                System.out.println("!!!!!!!!!!!!!!! "+f);

                String s= jsonObj.getString("About"); 
                System.out.println("@@@@@@ "+s); 

                JSONArray get = jsonObj.getJSONArray("Result");

                // lets loop through the JSONArray and get all the items 
                for (int i = 0; i < get.length(); i++) { 
                    // printing the values to the logcat 
                    System.out.println("&&&&&&&&&&"+get.getJSONObject(i).getString("About").toString()); 
                    System.out.println("&&&&&&&&&&"+get.getJSONObject(i).getString("AboutMeText").toString());  
                } 

                instream.close();
            }
        } else {
            returnString = "Unable to load page - "
                    + response.getStatusLine();
        }
    } catch (IOException ex) {
        returnString = "Connection failed; " + ex.getMessage();
    } catch (JSONException ex) {
        returnString = "JSON failed; " + ex.getMessage();
    }
    return returnString;
}

private static String convertStreamToString(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

每次我试图解析它时，它都会给我 json failed 异常，并表示没有任何价值。如果我在这里犯了任何错误，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:59:32.060

JSON 无效你想要这个吗？

```
{
"Result": [
    {
        "About": "",
        "AboutMeText": {}
    }
]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:04:29.187

更简单的方法是使用 GSON。（所有代码都来自内存，所以......）

因为`{Result: ["{"About":"","AboutMeText":[{}]]}` 我会创建一个类

```
public class Result {
 private String About;
 private String AboutMeText;
  //getters and setters
} 
```

然后为了反序列化

```
Gson gson = new Gson();
Result result = gson.fromJson(jsonString, Result.class); 
```

# asp.net-ajax - Web API Post 参数始终为 Null

> ID：12690514
> 
> 赞同：3
> 
> 时间：2012-10-02T12:45:31.683
> 
> 标签：asp.net-ajax, asp.net-web-api

有没有人找到合适的解决方案？我只是抱着很大的希望尝试了 WebAPI（在使用 KO 和 HTML5 在 php/restler 中成功实现了 rest api 之后）。获取就像魅力一样工作。在过去 20 多个小时内被困在岗位上，因为无论我的变量始终为空。我确实有 DTO 和存储库实现，这是我框架的一部分。我尝试了 FromBody 提示以及搜索中几乎所有可用的内容。我正在使用 Crest 和 Fiddler 对此进行测试。我什至可以获取原始 request.content，然后自己处理 json 加载等。这一点我只是感到沮丧并考虑回到 4.0 并使用 wcf 再次生成 ResT。任何帮助将非常感激 ...

```
DTO:
public class TestEntity
{
    public TestEntity() { } 
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

控制器：公共类 testController：ApiController

```
{
    // POST api/test
    public TestEntity PostTest([FromBody] TestEntity t)
    {
        var x = new TestEntity();
        if (!this.ModelState.IsValid)
        {

            return x;
        }
        else
        {
            return x;
        }
    } 
```

我正在通过 CREST 调用....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T09:53:58.627

当你使用 xml 类型调用 api 我认为你的问题来了，

Web API 默认使用 Json Serializer，因此您的应用程序在将内容类型更改为 JSON 后可以正常工作。

请参阅下面的代码并将其添加到您的 WebApiConfig.cs 中，它用于处理 XML 类型的请求。

config.Formatters.XmlFormatter.UseXmlSerializer = true;

并再次致电您的服务。它将解决此问题。

# c# - 以枚举为键绑定到字典中的值

> ID：12690515
> 
> 赞同：8
> 
> 时间：2012-10-02T12:45:35.763
> 
> 标签：c#, wpf, binding, dictionary, enums

我是一些应用程序，我想将一些文本框和检查框绑定到字典（枚举，字符串）的值字段。这可能吗？我该怎么做？

在 xaml 代码中我有这样的东西 - 它适用于以字符串为键的字典，但它无法正确绑定到带有枚举的键

```
<dxe:TextEdit EditValue="{Binding Properties[PrimaryAddress],  Mode=TwoWay}" />
<dxe:TextEdit EditValue="{Binding Properties[SecondaryAddress],  Mode=TwoWay}" />
<dxe:CheckEdit EditValue="{Binding Properties[UsePrimaryAddress], Mode=TwoWay}" /> 
```

..这就是我在枚举中所拥有的

```
public enum MyEnum
{
    PrimaryAddress,
    SecondaryAddress,
    UsePrimaryAddress
} 
```

在 ViewModel 字典中定义为：

```
public Dictionary<MyEnum, string> Properties 
```

我找到了带有枚举值的组合框的解决方案，但这不适用于我的情况。

有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T13:08:08.363

您必须在绑定表达式中为索引器的参数设置适当的类型。

查看型号：

```
public enum Property
{
    PrimaryAddress,
    SecondaryAddress,
    UsePrimaryAddress
}

public class ViewModel
{
    public ViewModel()
    {
        Properties = new Dictionary<Property, object>
        {
            { Property.PrimaryAddress, "123" },
            { Property.SecondaryAddress, "456" },
            { Property.UsePrimaryAddress, true }
        };
    }

    public Dictionary<Property, object> Properties { get; private set; }
} 
```

XAML：

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication5"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <TextBox Grid.Row="0" Text="{Binding Path=Properties[(local:Property)PrimaryAddress]}"/>
        <TextBox Grid.Row="1" Text="{Binding Path=Properties[(local:Property)SecondaryAddress]}"/>
        <CheckBox Grid.Row="2" IsChecked="{Binding Path=Properties[(local:Property)UsePrimaryAddress]}"/>
    </Grid>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    }
} 
```

有关详细信息，请参阅“[绑定路径语法](https://docs.microsoft.com/en-us/dotnet/framework/wpf/data/binding-declarations-overview#Path_Syntax)”。

# mysql - 积分设置表——如何设计？

> ID：12690518
> 
> 赞同：0
> 
> 时间：2012-10-02T12:45:40.513
> 
> 标签：mysql, database, database-design

我正在尝试提出每个类别都有不同类型的点计算的表格设计。

**第一个示例**：客户从 CPU 类别订购“Intel CPU Core i7 3770K”商品 - 点数将通过 (category_point / item_cost) 计算

**第二个示例**：客户从 SSD 类别订购“OCZ SSD”商品 - 积分将通过 ( `category_point`/ `item_cost`+ `bonus_point`+ `other_name_point`+ `other_name_point`)计算

我需要在表格中为`bonus_point`, `other_name_point`,`category_point`等指定固定值 它可以每个月左右更改一次。

**价格范围示例**（与上述不同） - 如果客户从主板类别订购任何商品 - 点数将根据商品成本范围计算，例如：

0.00 到 40 英镑 = 10 分

40.00 至 40 英镑 = 52 分

超过 40 英镑 = 64 分

我需要手动指定价格范围的点。这不是`category_point`/ `item_cost`+ `bonus_point`+ `other_name_point`+的一部分`other_name_point`

如何设计积分设置表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:03:37.117

可能是这样的：

**`Customers`：**

*   `Id`,
*   `Nam`e,
*   其他详情
*   ...

**`Orders`：**

*   `Id`,
*   `OrderDate`,
*   `CustomerId`,
*   ...

*`*ItemsOrders`:* *

*   `ItemId`,
*   `OrderId`,
*   ...

**`Items`：**

*   项目编号，
*   项目名称，
*   类别 ID，
*   `ITemCost`,
*   ...

**`Categories`：**

*   `CategoryId`,
*   `Name`,
*   ...

**`CategoryPoints`：**

*   `CategoryId`,
*   `PointId`,
*   ...

**`Points`:** :

*   `PointId`,
*   `PointNam`,
*   `PointCostTyp`e位（'固定'或'改变'），
*   ...

**`PointsCostsRanges`：**仅适用于不固定的品脱

*   `Id`（代理键）。
*   `PointId`,
*   `FromRange`.
*   `ToRange`.

**注意：**

*   你没有说每个类别有多少品脱类型？只有三个`bonus_point`：`other_name_point`和`other_name_point`？如果是这样，您可以摆脱表格`Points`并将三列添加到`CategoryPoints`表格中。
*   在您的示例中，10 分实际上意味着什么？这是否意味着该项目具有的点类型的计数？例如，如果一个 itemm 具有您的示例中的三种类型 ，`bonus_point`那么它有 3 个点还是什么？`other_name_point``other_name_point`
*   如果这些范围每个月都可以更改，则您可能需要添加日期范围。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-02T13:02:43.360

您的示例似乎是业务规则。业务规则应该在应用程序代码中，而不是在数据库中。

但是，可以将某些值保存在数据库表中以方便更改。以您的主板为例，您可以有一个结构如下的表：

```
Part Discount
-------------
Discount ID
Part ID
Cost
Discount 
```

此表中的值为：

```
1, 23, 4000, 10
2, 23, Max int, 64 
```

其中 23 是主板的部件号。

# sharepoint-2010 - 使用 SharePoint FormServer.aspx 的 InfoPath 查询字符串

> ID：12690521
> 
> 赞同：0
> 
> 时间：2012-10-02T12:45:45.347
> 
> 标签：sharepoint-2010, infopath2010

我正在尝试将数据推送到在 InfoPath 中开发的表单中，该表单是从 FormServices.aspx 加载的。

我知道如何使用`QueryString`SharePoints 编辑页面中的命令执行此操作，但必须使用浏览器中的 FormServer.aspx 命令加载表单。我想要做的是添加`&Ref=12345`到 URL 并添加`12345`到我的表单中名为 Ref_Number 的字段中。

我不能使用 VB 或 C# 来执行此操作，因为这里的 SharePoint 非常严格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:21:54.570

通过表单服务似乎不可能，但我已经能够通过使用`QueryString`for my创建一个页面来解决这个问题，`&Ref=12345`但也添加`&IsDlg=0`了删除功能区的页面。这是他们希望从表单服务中获得的效果，所以现在没有工作了。

# ruby - 将数据附加到本地范围内的变量的模式

> ID：12690526
> 
> 赞同：1
> 
> 时间：2012-10-02T12:46:09.827
> 
> 标签：ruby, puppet

我正在尝试为 Centrify Express 修改一个 puppet 模块，该模块与 Active Directory 集成。

我想基于每个节点将用户附加到允许列表，例如：

```
$centrifydc_groups_allow = ['admins', 'users'] 
```

然后在我的模板中，执行以下操作：

```
<% scope.lookupvar('centrifydc::groups_allow').each do |val| -%>
<%= val %>
<% end -%> 
```

我正在寻找一种干净一致的方式来定义访问配置文件，然后进行单个节点调整，添加更多应该具有访问权限的条目。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:00:39.333

您可以将 += 运算符附加到 puppet 中的数组。

```
$centrifydc_groups_allow = ['admins', 'users']
$centrifydc_groups_allow += ['webusers'] 
```

此外，如果您使用[stdlib 模块](http://forge.puppetlabs.com/puppetlabs/stdlib)，它会实现许多有用的函数来处理数组。

例如，如果存在可能在不同 pp 的数组中重复自己的风险，则可以在附加之前进行测试：

```
$centrifydc_groups_allow = ['admins', 'users']
if member($centrifydc_groups_allow,'webusers') == false {
  $centrifydc_groups_allow += ['webusers']
} 
```

此外，您还有一个合并数组的合并函数，通过 scope_function_merge 您可以在模板中使用它来代替附加到数组，为每个节点/类型/等重写一个默认数组和一个自定义数组。

# html - 条件语句未被拾取

> ID：12690527
> 
> 赞同：1
> 
> 时间：2012-10-02T12:46:11.570
> 
> 标签：html, conditional-comments

我已经阅读了有关使用条件语句的信息，但从未成功地让它们工作！这就是我所拥有的：

```
<!--[if !(IE)]><!-->
    <input type="text" value="" placeholder="First name" name="FNAME" class="required" id="mce-FNAME">
<!--<![endif]-->
<!--[if (gt IE 6)]-->
    <input type="text" value="First name" name="FNAME" class="required" id="mce-FNAME">
<!--<![endif]--> 
```

我希望它为除 IE 之外的所有其他浏览器显示第一个输入，并为 IE6 或更高版本显示第二个语句。

在最初在 Chrome 中测试它时，它只是同时显示它们！

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:49:43.880

您过早地关闭了 second `if`（随后不必要地重新打开了 second `endif`），这导致所有浏览器都看到了您的 second `input`。`gte IE 6`如果你想包含 IE6 ，它也需要：

```
<!--[if !(IE)]><!-->
    <input type="text" value="" placeholder="First name" name="FNAME" class="required" id="mce-FNAME">
<!--<![endif]-->
<!--[if (gte IE 6)]>
    <input type="text" value="First name" name="FNAME" class="required" id="mce-FNAME">
<![endif]--> 
```

# jquery - 如何简化这个 jquery 树遍历？

> ID：12690534
> 
> 赞同：1
> 
> 时间：2012-10-02T12:46:40.060
> 
> 标签：jquery, jquery-traversing

**HTML**

```
...
<a id="delete1" href="http://www.example.com">TEST</a>
<p>First</p>
<p>Second</p>
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
<div id="hidden-qsd">123</div>
... 
```

**JS**

```
var id = $('#delete1').nextUntil("div[id^='hidden']").next().last().attr('id'); 
```

我想获取位于链接“#delete1”之后的以“hidden”开头的最近“div”的ID。
以前的代码可以正常工作，但我认为有一种更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:51:22.240

```
$('#delete1').nextAll('[id^="hidden"]').attr('id') 
```

`nextAll()`足够

示例 jsbin：http: [//jsbin.com/usowej/3/edit](http://jsbin.com/usowej/3/edit)

注意：如果您有多个 id 开头的元素，请`hidden`使用

```
$('#delete1').nextAll('[id^="hidden"]:first').attr('id') 
```

要检索第一次出现，请参阅[http://jsbin.com/usowej/4/edit](http://jsbin.com/usowej/4/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:52:31.827

您可以使用`nextAll(selector)`获取元素之后的下一个兄弟姐妹：

```
var id = $('#delete1').nextAll("div[id^='hidden']").prop('id'); 
```

[http://api.jquery.com/nextAll/](http://api.jquery.com/nextAll/)

# javascript - jQuery/jQTouch - 你如何编写一个切换按钮？

> ID：12690535
> 
> 赞同：0
> 
> 时间：2012-10-02T12:46:41.150
> 
> 标签：javascript, jquery, html, jqtouch

我几乎完成了我的文档管理器的项目，但我被要求添加切换按钮。我已经链接了 javascript 和 css 代码，但我坚持使用 html 代码。我知道把

```
 <input type = 'checkbox' .... /> 
```

任何人都可以帮助填写其余部分吗？我真的被困住了。

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:21:08.953

```
<input type="checkbox" id="clickme" name="Notifications"> Notifications<br />    
<div id="notifications">Notifications</div>

$('#clickme').click(function() {
  $('#notifications').toggle('slow', function() {
    // some code after completion
  });
}); 
```

如果您想要一些其他效果，例如 CSS 更改或其他一些事件，可以用一些代码替换问号。这不是必需的，因此您可以改用它来删除它。

```
$('#clickme').click(function(){
    $('#notifications').toggle('slow');
}); 
```

使用上面的代码，您将有一个复选框，旁边是文本通知，当有人单击复选框时将执行 .click 函数，当发生这种情况时，将执行 .toggle 函数。.toggle 函数的作用是切换 #notifications 元素上的显示属性（因此您的 div 包含通知）。因此，当您单击复选框时，它将在隐藏和可见之间切换通知。

至于代码，“//完成后的一些代码”这是您可以放置​​更多您想要执行的代码的地方，如果您不确定那是什么，因为您可能不需要该部分所以你可以使用我放的第二个示例代码。您应该在您的 init 函数中的页面上的 javascript 标记中添加此代码，例如：

```
$(document).ready(function(){
     //the code I showed above
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:36:07.170

在不超出您对这个项目的教育范围的情况下，我建议从以下基础开始。您想要的确切按钮包含在 iOS 框架类**UISwitch**中，但在这里我们不要太过分了 :)

从创建前端 html 结构开始，在标签中包含 css 和 javascript 链接，创建一个 javascript 文件夹，并在其中创建一个 .js 文件。

在触发按钮单击事件的任何类型的表单中使用的按钮/复选框很常见，您需要确定选择了哪些按钮：

```
<head>
<link href="yourstylesheet.css" rel="stylesheet" type="text/css">
<link href="~/javascript/mobilejavascript.js" type="text/javascript" />
</head>

<input type="radio" name="radio1" class="radio_form" value="male"/>
<input type="radio" name="radio2" class="radio_form" value="female"/>

on submit of form...

var isMale = false;

$('.radio_form').each(function(){
     //perform some check or store information
     if($(this).val('male') == true)
     {
         isMale = true;
     }
     //and so on...
}); 
```

现在在您的样式表 (.css) 中：

```
.radio_form {
  //style properties will go here, such as radius, border, width, height, etc..
} 
```

如果这是您的标准，这应该可以帮助您朝着正确的方向开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:06:35.480

感谢您的澄清。像这样创建一个切换按钮：

[http://www.google.co.uk/imgres?num=10&hl=en&biw=1366&bih=643&tbm=isch&tbnid=CfXL9cv8l0CfvM:&imgrefurl=http://mitchjinfo.deviantart.com/art/iPhone-Toggle-Button-173878367&docid= KCfqyS-NlBl4eM＆imgUrl的HTTP =：//fc03.deviantart.net/fs71/f/2010/215/2/0/iPhone_Toggle_Button_by_mitchjinfo.png&w=400&h=300&ei=ffJqUMnTOcP80QXosYCwDA&zoom=1&iact=rc&dur=1&sig=117831312973390827386&page=1&tbnh=136&tbnw=224&start= 0&ndsp=23&ved=1t:429,r:0,s:0,i:71&tx=115&ty=55](http://www.google.co.uk/imgres?num=10&hl=en&biw=1366&bih=643&tbm=isch&tbnid=CfXL9cv8l0CfvM:&imgrefurl=http://mitchjinfo.deviantart.com/art/iPhone-Toggle-Button-173878367&docid=KCfqyS-NlBl4eM&imgurl=http://fc03.deviantart.net/fs71/f/2010/215/2/0/iPhone_Toggle_Button_by_mitchjinfo.png&w=400&h=300&ei=ffJqUMnTOcP80QXosYCwDA&zoom=1&iact=rc&dur=1&sig=117831312973390827386&page=1&tbnh=136&tbnw=224&start=0&ndsp=23&ved=1t:429,r:0,s:0,i:71&tx=115&ty=55)

您可以使用如下所示的代码：

```
<div id="toggleImage">
    <img id="toggleOn" class="toggle" src="on.jpg" />
    <img id="toggleOff" class="toggle" src="off.jpg" />
</div>

$(document).ready(function(){
    $('.toggle').click(function(){
        $(this).hide();
        $(this).sibbling('img').show();
        /* the code for whatever you are toggling goes here */
    });
}); 
```

您正在切换的代码可能包括显示或隐藏通知内容或您希望在页面上切换的任何内容。对于此 on.jpg 是切换“打开”图像，而 off.jpg 是切换“关闭”图像，就像 iphone 的按钮一样。

# javascript - 将页面动态加载到 HTML

> ID：12690543
> 
> 赞同：0
> 
> 时间：2012-10-02T12:47:01.030
> 
> 标签：javascript

我有一个 Web 应用程序，它由一个`index.html`包含`<iframe>`. 该`index.html`文件在`<iframe>`. 这些页面中的每一个都有自己独立的 Javascript 和 CSS。

到目前为止一切正常。

我现在正在考虑使用 Ajax 调用将这些页面加载到`<div>`index.html 中的 a 中，而不是将它们加载到`<iframe>`. 我已经做了一些测试，这是可能的，但有一个问题让我担心，因为我是这项技术的新手，我想也许这里的一些专家可以分享知识。

**问题 #1：**

将这些页面直接加载到文件`<div>`中的 a 时`index.html`，新页面将加载到与其自身相同的 DOM 中`index.html`。因此，元素类和页面 ID 之间可能存在冲突`index.html`，例如`$("#foo").hide();`从页面托管实际上会隐藏文件和页面中具有类的`foo`元素`index.html`。有什么办法，我可以将页面代码放在某种沙箱中以防止它影响`index.html`？

**问题 #2：**

当移除一个页面（可能用另一个页面替换它）时，它的代码的一部分仍然会留在内存中（[如这里提到的](http://www.javascriptkit.com/javatutors/loadjavascriptcss2.shtml)）。有什么办法可以防止这种影响吗？当然，对第一个问题的肯定回答将涵盖这个问题，因为如果页面在沙箱中运行，卸载页面也应该卸载其 javascript 代码。

**问题 #3：**

该页面是一个完整的 HTML 文件，具有自己的`<head>`,`<body>`和`<title>`元素。这意味着它也会受到托管`index.html`文件中的 CCS 规则的影响。我怎样才能防止这些负面影响？

无需重新加载整个页面的分页导航系统似乎是许多现代网站的常见交互机制。如何在没有这些副作用（没有`<iframe>`）的情况下动态加载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:11:19.250

你所说的听起来像是一个单页应用程序。在这种情况下，我建议使用解决您面临的所有问题的众多现有框架之一。

有几个存在，这些只是一对。

Knockout.js ( [knockoutjs.com](http://www.knockoutjs.com) )

Ember.js ( [emberjs.com](http://www.emberjs.com) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:18:24.993

**您无法安全地将具有副作用的页面注入您的页面。**

您将不得不以不依赖全局状态的风格编写代码，我认为这需要大量工作。

原则上，这意味着：

*   JavaScript 代码中没有全局变量
*   使用类名或唯一 ID 设置所有内容的样式，而不是标签名。
*   您有责任通过模板语言形式的代码或手动执行此操作来维护类名和 ID 的唯一性。

举个例子，你可以给内部 div 一个 id`"page-container"`并改变页面的所有 css 规则，以便它们都以`#page-container`选择器为前缀。

如果做不到这一点，Web 应用程序框架通常用于编写单页 Web 应用程序，并清楚地展示了解决您提到的问题的能力。然而，这将意味着对现有代码进行大量重组以实现这一目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:20:09.500

由于您可能会决定迁移到一个成熟的新框架（在并行答案中提到）可能是一种矫枉过正的做法，因此我发布了一个带有一些考虑因素的答案。

**问题 #1：**

将新内容直接加载到托管页面后，就无法进行沙盒。您需要详细说明防止 ID 之间发生冲突的命名约定。例如，动态加载的片段中的所有元素都应具有带有特定前缀的 ID。

**问题 #2：**

您负责清理加载过程中涉及的所有方面。

**问题 #3：**

将带有自己的头部、身体和标题的动态加载片段放入 div 中并不是一个好主意。您应该加载纯内容。而且您无法阻止托管页面的 CSS 影响新片段，除非您再次为您的 CSS 样式（类）制定命名约定。

# pdf - 如何从 viewjpeg.ps 文件在 PostScript 中设置 PDF 页面大小

> ID：12690554
> 
> 赞同：2
> 
> 时间：2012-10-02T12:47:39.283
> 
> 标签：pdf, jpeg, ghostscript, postscript

我使用 Ghostscript 将 JPEG 转换为 PDF：

```
gs -sDEVICE=pdfwrite -o d.pdf viewjpeg.ps -c "(Imgp3826.Jpeg) viewJPEG showpage 
```

这将创建具有默认页面大小和图像的 PDF，位于左下角。我需要修改脚本以创建具有正确尺寸的页面。

在本说明中：[https ://stackoverflow.com/a/6508854/907576](https://stackoverflow.com/a/6508854/907576)

他们使用*ImageMagick*执行此操作，但我不能使用它 - 我只能使用*Ghostscript*。

是否可以从中获取宽度-高度值`viewjpeg.ps`并将其设置为页面大小？

我看到`viewjpeg.ps`：

```
/height NextByte 8 bitshift NextByte add def
/width NextByte 8 bitshift NextByte add def 
```

看起来他们使用 JPEG 标头来读取此信息。

然后我可以重复使用它`<</PageSize [${dimension}]>>`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:13:00.723

FWIW，由于 viewJPEG 程序的编写方式，上面列出的简单添加不会单独起作用。

我建议用另一个过程来扩充 viewjpeg.ps：

```
/viewJPEGgetsize {      % <file|string> ==> width height
    save
    JPEGdict begin
    /saved exch def
    /scratch 1 string def
    dup type /stringtype eq { (r) file } if
    /F exch def

    readJPEGmarkers begin
    width height
    saved end restore
} bind def 
```

然后你可以这样称呼它：

```
gs -I../lib -sDEVICE=pdfwrite \
   -o stuff.pdf viewjpeg.ps   \
   -c "(image.jpg) <</PageSize 2 index viewJPEGgetsize 2 array astore>> setpagedevice viewJPEG" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:39:38.757

您不能将这些数字直接用作 /PageSize 的参数，因为它们是图像的高度和宽度（在图像样本中），而 PageSize 的参数以 PostScript 单位（1/72 英寸）为单位。

但是，您可以按当前分辨率缩放它们并使用缩放后的数字。

（宽度/分辨率）* 72 和（高度/分辨率）* 72 应该可以完成这项工作。

所以 ：

```
currentpagedevice /HWResolution get aload
height exch div 72 mul
exch width exch div 72 mul
exch 2 array 3 1 roll astore
<< /PageSize 3 -1 roll >> setpagedevice 
```

警告：我还没有时间真正尝试这个......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T06:43:05.817

```
 gs -sDEVICE=pdfwrite -o /pathTo/newPdf.pdf "/pathTo/viewjpeg.ps" -c "(/pathTo/jpgToPdf.JPG) << /PageSize [400 300] >> setpagedevice  viewJPEG" 
```

*   /pathTo/newPdf.pdf - 将生成的文件
*   /pathTo/jpgToPdf.JPG - 输入 jpg 文件
*   << /PageSize [400 300] >> setpagedevice viewJPEG - viewjpeg.ps 实用程序命令行参数
*   [400 300] - 通过公式（宽度/分辨率）* 72 和（高度/分辨率）* 72 计算的图像大小、宽度和高度

# javascript - 用jquery执行get

> ID：12690555
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:47:43.443
> 
> 标签：javascript, jquery

我执行这样的功能：

```
 var path2='//www.example.com/vids/getvid.php?sitename=mysite&amp;vidnum=2';

  $.get(path2,function(data){ }); 
```

并且如果响应是肯定的（没有失败）..

我将 path2www, 放入 iframe 以显示：

```
 $('#VideoTutorialTitle').after("<iframe class='video-iframe'  src='"+path2+"' border='0' scrolling='no' id='video_embed2' frameBorder='0'></iframe>"); 
```

但是，当我这样做时，它无法获取 url.. 是否存在编码问题.. 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:38:00.923

也许你应该检查你的网址！

```
$(function(){
var src = "http://www.youtube.com/v/XGSy3_Czz8k";
    $.get(src, function(data) {
       // alert(data);
       src = data;
    });
    $('#VideoTutorialTitle').after("<iframe class='video-iframe' src='" + src + "' border='0' scrolling='no' id='video_embed2' frameBorder='0'></iframe>");
}); 
```

jsfiddle：

[http://jsfiddle.net/6zsmk/6/](http://jsfiddle.net/6zsmk/6/)

# jquery - 平滑滚动jquery没有方法

> ID：12690556
> 
> 赞同：1
> 
> 时间：2012-10-02T12:47:43.990
> 
> 标签：jquery, smooth-scrolling

我正在尝试在我的网站上使用**smoothDivScroll**插件，因为我不了解 jQuery，我只是复制并粘贴了所有内容。第一个图像加载，热点出现，但滚动从未开始，我看不到任何其他图像。

我正在使用 google API 的库以及插件中的 3 个 jQuery 文件

这是我网站上我试图实现它的页面： [http ://www.belindabilly.com/shop/belindabilly.html](http://www.belindabilly.com/shop/belindabilly.html)

在 javascript 所在的第 16 行，我不断收到此错误消息： Uncaught TypeError: Object [object, Object] has no method "smoothDivScroll"

我已经浏览了所有文件，但无法真正确定它的正面或反面。我也用谷歌搜索了对象错误，但我能弄清楚的是在所有代码的某个地方，要么丢失了某些东西，要么加载了两次。就像我说的，我复制并粘贴了[http://www.smoothdivscroll.com/index.html](http://www.smoothdivscroll.com/index.html)上的示例，所以我不明白我怎么能把它搞得这么糟糕！

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:34:13.770

事实证明，我犯了几个错误，但最大的一个是我没有包含鼠标滚轮的脚本。它在网站上的显示方式以及在使用以前版本的其他网站的源代码中的方式是，jQuery 鼠标滚轮是可选的。它不是！另外，我可能错误地订购了脚本。

# mercurial - Mercurial / hg - 中止：未提交的未提交合并

> ID：12690557
> 
> 赞同：54
> 
> 时间：2012-10-02T12:47:45.143
> 
> 标签：mercurial

我在 host1 上有一个主存储库，并对 host2 上的一个存储库进行了更新。我`hg push`编辑了从 host2 到 host1 的更改

```
[mpenning@host2 login]$  hg push ssh://host1//opt/python/login 
```

但是，当我尝试更新或合并时，我得到

```
[mpenning@host1 login]$ hg update
abort: outstanding uncommitted merges
[mpenning@host1 login]$ hg merge
abort: outstanding uncommitted merges
[mpenning@host1 login]$ 
```

我也尝试了`hg pull`来自host1，但这也没有用......

```
[mpenning@host1 login]$ hg pull ssh://host2//opt/python/login
running ssh host2 'hg -R /opt/python/login serve --stdio'
mpenning@host2's password:
pulling from ssh://host2//opt/python/login
searching for changes
no changes found
[mpenning@host1 login]$ hg merge
abort: outstanding uncommitted merges
[mpenning@host1 login]$ 
```

我需要做什么才能使用来自 host2 的更改来更新我在 host1 上的主存储库？

* * *

有关 host1 上的 repo 的更多信息...

```
[mpenning@host1 login]$ hg parents
changeset:   27:6d530d533997
user:        Mike Pennington <d.pennington@foo.local>
date:        Wed Sep 26 11:44:51 2012 -0500
files:       mp_getconf.py
description:
fix issue where config retrieval was broken

changeset:   29:eaf3b5aacfe6
user:        Mike Pennington <d.pennington@foo.local>
date:        Wed Sep 26 11:43:15 2012 -0500
files:       mp_getconf.py
description:
fix artifact of using the script to run generic commands, but this broke config retrieval

[mpenning@host1 login]$ 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-02T12:47:45.143

`hg update --clean -r tip`解决了问题...

```
[mpenning@host1 login]$ hg update --clean -r tip
resolving manifests
getting Protocol.py
getting Session.py
getting mp_getconf.py
getting mp_runcmd.py
4 files updated, 0 files merged, 0 files removed, 0 files unresolved
[mpenning@host1 login]$ hg up
resolving manifests
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
[mpenning@host1 login]$ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-04T16:07:28.863

在某些时候你做了：

```
$ hg pull (or maybe someone pushed to you)
$ hg merge 
```

……然后继续。这使合并未提交。这就是“中止：未提交的合并”的意思。你不能做'x'，因为你还没有完成你开始的合并工作。

你应该做的是：

```
$ hg pull
$ hg merge
  <Sorted out any issues>
$ hg commit -m 'Merged the blah with wibble-wah' 
```

……然后继续。

`hg status`并且`hg summary`会显示出明显的变化。

# ios - 如何使用代码显示 SomeViewControler？

> ID：12690565
> 
> 赞同：0
> 
> 时间：2012-10-02T12:48:19.527
> 
> 标签：ios, cocoa-touch, ios5, ios6, segue

我是 Xcode 和 iOS 开发的新手。我试图弄清楚如何根据按钮单击打开/显示一些视图。我知道我可以使用 ctrl + 鼠标点击一些使用 segue 的 ViewController 来做到这一点，但我需要先添加一些逻辑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:56:20.263

有两种方法可以使 segues 工作。

您可以从一个按钮 ctrl 拖动到一个新的 ViewController（就像您所做的那样），或者您可以从一个 ViewController 到一个新的 ViewController 拖动 ctrl（从 VC 下方栏中的橙色小方形图标拖动）。

对于这两种方式，您都可以在创建的 segue 上设置标识符。这用于在代码中引用它。

当您执行第一种方式时，您会说“按下此按钮时，移动到此 ViewController”。这意味着无论何时按下该按钮，它都会移动到新的 VC。

第二种方式只是告诉情节提要，将有一个转移到新的 VC 的转场。要运行它，您需要将 IBAction 添加到您的按钮（而不是 segue）。

在按钮的操作中，您将拥有...

```
- (IBAction)buttonPressed:(id)sender
{
    if (someConditionToCheckMoveToNewVC)
    {
        [self performSegueWithIdentifier:@"mySegue" sender:nil];
    }
} 
```

只有当您检查的条件为真时，这才会执行该 segue。

您也可以像这样将信息传递给新的 VC...

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NewViewController *nvc = segue.destinationViewController;

    nvc.someProperty = @"blah";
} 
```

然后，这将在转换到新 VC 之前在新 VC 中设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:52:00.243

阅读苹果文档 -[开始开发应用程序](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)和[查看控制器基础知识](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html#//apple_ref/doc/uid/TP40007457-CH112-SW10)

# android - 在 Android 的 GridView 中拖放

> ID：12690568
> 
> 赞同：8
> 
> 时间：2012-10-02T12:48:32.263
> 
> 标签：android, gridview, drag-and-drop

如何在 Android GridView 中实现拖放功能。任何人都可以请提供相同的最佳链接吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T12:31:52.240

见[PagedDragDropGrid](https://github.com/mrKlar/PagedDragDropGrid)

上面的示例使用 ViewGroup 实现了一个带有拖放可移动项目**的分页网格。**

注意@*它支持 Android 2.2 (API 8) 及更高版本。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T12:50:16.250

[这](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)是我在 android 拖放 android 2.2 中见过的最好的例子。您使用的是哪个版本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:55:35.937

您可以在此处找到有关拖放的 google 文档，并[在此处](http://developer.android.com/guide/topics/ui/drag-drop.html)[找到](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)第三方示例。

您要做的是将gridView 中的每个视图设置为可点击并设置onTouchListener。在您的 onTouch 方法中，您将处理 ACTION_DOWN（用户在屏幕上按下）、ACTION_MOVE（用户在屏幕上移动手指）和 ACTION_UP（用户从屏幕上抬起手指）的适当操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-10T06:34:21.367

使用 WindowManager 尝试另一种方法：

```
 package com.example.cooldraganddrop;

    import android.content.Context;
    import android.graphics.Bitmap;
    import android.graphics.Color;
    import android.graphics.PixelFormat;
    import android.graphics.drawable.BitmapDrawable;

    import android.util.AttributeSet;
    import android.view.Gravity;
    import android.view.MotionEvent;
    import android.view.View;
    import android.view.WindowManager;
    import android.widget.AdapterView;
    import android.widget.ImageView;

    public class CoolDragAndDropGridView extends SpanVariableGridView implements `View.OnTouchListener {`

        private static final int ITEM_HOVER_DELAY = 450;

        private int mDragPointX;
        private int mDragPointY;
        private int mDragOffsetX;
        private int mDragOffsetY;
        private int mDragPosition = AdapterView.INVALID_POSITION;
        private int mDropPosition = AdapterView.INVALID_POSITION;
        private int mCurrentPosition = AdapterView.INVALID_POSITION;
        private Runnable mDelayedOnDragRunnable = null;

        ScrollingStrategy mScrollingStrategy = null;
        WindowManager mWindowManager = null;
        WindowManager.LayoutParams mWindowParams = null;
        private ImageView mDragImageView = null;
        private boolean mDragAndDropStarted = false;
        private DragAndDropListener mDragAndDropListener = null;
        private OnTrackTouchEventsListener mOnTrackTouchEventsListener = null;

        public static interface OnTrackTouchEventsListener {

                void trackTouchEvents(final MotionEvent motionEvent);

        };

        public static interface DragAndDropListener {

                void onDragItem(int from);

                void onDraggingItem(int from, int to);

                void onDropItem(int from, int to);

                boolean isDragAndDropEnabled(int position);
        }

        public CoolDragAndDropGridView(Context context) {
                super(context);

                initialize();
        }

        public CoolDragAndDropGridView(Context context, AttributeSet attrs, int defStyle) {
                super(context, attrs, defStyle);

                initialize();
        }

        public CoolDragAndDropGridView(Context context, AttributeSet attrs) {
                super(context, attrs);

                initialize();
        }

        private void initialize() {
                setOnTouchListener(this);
                setChildrenDrawingOrderEnabled(true);
        }

        public void startDragAndDrop() {

                mDragAndDropStarted = true;

        }

        public void setDragAndDropListener(DragAndDropListener dragAndDropListener) {

                mDragAndDropListener = dragAndDropListener;

        }

        private void destroyDragImageView() {

                if (mDragImageView != null) {

                        mWindowManager.removeView(mDragImageView);

                        BitmapDrawable bitmapDrawable = (BitmapDrawable) mDragImageView.getDrawable();
                        if (bitmapDrawable != null) {
                                final Bitmap bitmap = bitmapDrawable.getBitmap();
                                if (bitmap != null && !bitmap.isRecycled()) {
                                        bitmap.recycle();
                                }
                        }

                        mDragImageView.setImageDrawable(null);
                        mDragImageView = null;
                }

        }

        private ImageView createDragImageView(final View v, final int x, final int y) {

                v.destroyDrawingCache();
                v.setDrawingCacheEnabled(true);
                Bitmap bm = Bitmap.createBitmap(v.getDrawingCache());

                mDragPointX = x - v.getLeft();
                mDragPointY = y - v.getTop();

                mWindowParams = new WindowManager.LayoutParams();
                mWindowParams.gravity = Gravity.TOP | Gravity.LEFT;

                mWindowParams.x = x - mDragPointX + mDragOffsetX;
                mWindowParams.y = y - mDragPointY + mDragOffsetY;

                mWindowParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
                mWindowParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
                mWindowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                                | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN;

                mWindowParams.format = PixelFormat.TRANSLUCENT;
                mWindowParams.alpha = 0.7f;
                mWindowParams.windowAnimations = 0;

                ImageView iv = new ImageView(getContext());
                iv.setBackgroundColor(Color.parseColor("#ff555555"));
                iv.setImageBitmap(bm);

                mWindowManager = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE);// "window"
                mWindowManager.addView(iv, mWindowParams);
                return iv;

        }

        private void startDrag(final int x, final int y) {

                final View v = getChildAt(mDragPosition);

                destroyDragImageView();

                mDragImageView = createDragImageView(v, x, y);
                v.setVisibility(View.INVISIBLE);

                if (mDragAndDropListener != null) {

                        mDragAndDropListener.onDragItem(mDragPosition);
                }

        }

        @Override
        protected int getChildDrawingOrder(int childCount, int i) {
                if (mCurrentPosition == -1)
                        return i;
                else if (i == childCount - 1)
                        return mCurrentPosition;
                else if (i >= mCurrentPosition)
                        return i + 1;
                return i;
        }

        private void onDrop() {

                destroyDragImageView();

                removeCallbacks(mDelayedOnDragRunnable);

                View v = getChildAt(mDropPosition);
                v.setVisibility(View.VISIBLE);

                v.clearAnimation();

                if (mDragAndDropListener != null && mDropPosition != AdapterView.INVALID_POSITION) {

                        mDragAndDropListener.onDropItem(mDragPosition, mDropPosition);
                }

                mDragPosition = mDropPosition = mCurrentPosition = AdapterView.INVALID_POSITION;
                mDragAndDropStarted = false;
        }

        public void setScrollingStrategy(ScrollingStrategy scrollingStrategy) {

                mScrollingStrategy = scrollingStrategy;

        }

        private void onDrag(final int x, final int y) {

                if (mScrollingStrategy != null && mScrollingStrategy.performScrolling(x, y, this)) {

                        removeCallbacks(mDelayedOnDragRunnable);

                        return;
                }

                final int tempDropPosition = pointToPosition(mCurrentPosition, x, y);

                if (mDragAndDropListener != null && mDropPosition != tempDropPosition && tempDropPosition != AdapterView.INVALID_POSITION) {

                        removeCallbacks(mDelayedOnDragRunnable);

                        if (mDragAndDropListener.isDragAndDropEnabled(tempDropPosition)) {

                                mDropPosition = tempDropPosition;

                                mDelayedOnDragRunnable = new Runnable() {

                                        @Override
                                        public void run() {

                                                mDragAndDropListener.onDraggingItem(mCurrentPosition, tempDropPosition);
                                                performDragAndDropSwapping(mCurrentPosition, tempDropPosition);

                                                final int nextDropPosition = pointToPosition(tempDropPosition, x, y);

                                                if (nextDropPosition == AdapterView.INVALID_POSITION) {

                                                        mCurrentPosition = mDropPosition = tempDropPosition;

                                                }
                                        }
                                };

                                postDelayed(mDelayedOnDragRunnable, ITEM_HOVER_DELAY);

                        } else {

                                mDropPosition = mDragPosition;

                        }

                }

                if (mDragImageView != null) {

                        mWindowParams.x = x - mDragPointX + mDragOffsetX;
                        mWindowParams.y = y - mDragPointY + mDragOffsetY;
                        mWindowManager.updateViewLayout(mDragImageView, mWindowParams);
                }

        }

        public void setOnTrackTouchEventListener(OnTrackTouchEventsListener onTrackTouchEventsListener) {

                mOnTrackTouchEventsListener = onTrackTouchEventsListener;
        }

        @Override
        public boolean onInterceptTouchEvent(MotionEvent event) {

                if (mOnTrackTouchEventsListener != null) {
                        mOnTrackTouchEventsListener.trackTouchEvents(event);
                }

                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:
                case MotionEvent.ACTION_MOVE:

                        if (mDragAndDropListener != null && mDragAndDropStarted) {

                                mDragAndDropStarted = false;

                                getParent().requestDisallowInterceptTouchEvent(true);

                                return launchDragAndDrop(event);
                        }

                        break;

                default:
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_CANCEL:

                        mDragAndDropStarted = false;

                        getParent().requestDisallowInterceptTouchEvent(false);

                        break;
                }

                return super.onInterceptTouchEvent(event);
        }

        private boolean launchDragAndDrop(final MotionEvent event) {

                final int x = (int) event.getX();
                final int y = (int) event.getY();

                mCurrentPosition = mDragPosition = mDropPosition = pointToPosition(mDragPosition, x, y);

                if (mDragPosition != AdapterView.INVALID_POSITION && mDragAndDropListener.isDragAndDropEnabled(mDragPosition)) {

                        mDragOffsetX = (int) (event.getRawX() - x);
                        mDragOffsetY = (int) (event.getRawY() - y);

                        startDrag(x, y);

                        return true;
                }

                return false;
        }

        @Override
        public boolean onTouch(View view, MotionEvent event) {

                if (mDragPosition != AdapterView.INVALID_POSITION && mDragImageView != null) {

                        final int x = (int) event.getX();
                        final int y = (int) event.getY();

                        switch (event.getAction()) {

                        case MotionEvent.ACTION_MOVE:

                                mDragOffsetX = (int) (event.getRawX() - x);
                                mDragOffsetY = (int) (event.getRawY() - y);

                                onDrag(x, y);

                                break;

                        case MotionEvent.ACTION_UP:
                        case MotionEvent.ACTION_CANCEL:

                                onDrop();

                                resetLongClickTransition();

                                getParent().requestDisallowInterceptTouchEvent(false);

                                return false;

                        default:

                        }

                        return true;
                }

                return false;
        }
} 
```

使用这种拖放方法的示例[在这里](https://github.com/theredsunrise/AndroidCoolDragAndDropGridView)

# php - PHP = 将 0 附加到字符串的末尾

> ID：12690571
> 
> 赞同：2
> 
> 时间：2012-10-02T12:48:39.030
> 
> 标签：php

我有这个函数，它获取给予项目的平均用户评分并将其转换为相关类：

```
function get_user_rating_class($urate_ave){
    if($urate_ave==='0.0'){
        $user_rating_class='unrated_u';
    }else{
        $round_to = 0.5;
        $rounded = round($urate_ave / $round_to) * $round_to;
        $removedec = str_replace('.','',$rounded);
        if(strlen($removedec)<2){$removedec.'0';}
        $user_rating_class='rating_user_'+$removedec;
    }
    return $user_rating_class;
} 
```

不，当我在函数中输入一个值时，比如 3.0，它应该以 rating_user_30 的形式出现，但它却以 rating_user_3 的形式出现，所以这一行肯定有问题：

`if(strlen($removedec)<2){$removedec.'0';}`

我认为这可能是因为它将值 $removedec 视为数字而不是字符串，所以我尝试在它之前添加这一行，但没有改变：

```
$removedec = strval($removedec); 
```

有人可以告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T12:50:58.363

您应该使用`.=`而不是`.`将值附加到字符串*并将*变量设置为该值。单独的点运算符将附加值但不会更改变量的值。

```
$removedec .= '0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:51:26.673

是的，您是对的，那行是错误的，您忘记分配值，如下所示：

```
if(strlen($removedec)<2){$removedec=$removedec.'0';} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T22:14:21.460

假设有一个整数变量并且您不知道该值是什么：

```
$var = 0;
$str = "var is : " . ($var?$var:'0'); 
```

在字符串末尾附加值。

# php - PHP 故障排除，暴露正在使用的类，全局，会话

> ID：12690573
> 
> 赞同：0
> 
> 时间：2012-10-02T12:48:43.567
> 
> 标签：php, class

我正在尝试寻找一种工具或平台，让我能够有效地进行编程。尤其是在使用 WordPress 等平台时。

我希望能够查看正在加载哪些类、创建了变量、执行了方法等。

第一次使用库并掌握如何扩展该库而几乎没有时间记住所有内容时尤其困难。

我真正能想到的唯一接近的 IDE 是 ZEND St​​udio ......但当然，这需要 ZEND Server，我更喜欢使用更轻的 MAMP，甚至是 OS X 上的内置堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:52:47.833

您可以使用 Xdebug 与[Netbeans](http://wiki.netbeans.org/HowToConfigureXDebug)和 Eclipse 等 IDE 一起使用逐步调试。这是查看库中发生的事情的好方法，而且 ide 具有良好的自动完成功能。

# excel - 存在两个参考，但没有使用 Excel 显示答案

> ID：12690580
> 
> 赞同：2
> 
> 时间：2012-10-02T12:49:15.597
> 
> 标签：excel

我在列`S`和`T`达科他州 OOR 有一个公式。我正在使用并且过去曾经使用过，在 Dakota OOR 下面的工作表中有四个工作，在 Dakota Data 中，工作表中有相同的相同工作。

如果在 Dakota Data 中和在 Dakota Data 中都匹配，我会查看`B`和`E`in`Dakota OOR`和 Columns`A`和`D`in Dakota Data 来提取答案。`I``J`

现在，这种设计方式我认为它应该正确显示数据，但由于某种原因没有显示它。

有人可以为我验证`S`和`T`中的公式`Dakota OOR`是准确的吗？

以下是`S`和中的公式`T`：

**小号**

`=IFERROR(INDEX('Dakota Data'!$I$1:$I$600,MATCH(1,INDEX(ISNUMBER(FIND($B2,'Dakota Data'!$A$1:$A$600))*('Dakota Data'!$D$1:$D$600=$E2),0),0)),"")`

**吨**

`=IFERROR(INDEX('Dakota Data'!$J$1:$J$600,MATCH(1,INDEX(ISNUMBER(FIND($B2,'Dakota Data'!$A$1:$A$600))*('Dakota Data'!$D$1:$D$600=$E2),0),0)),"")`

链接在这里：

[http://www.kaboomlabs.com/excel/examples/TwoRefs.xlsx](http://www.kaboomlabs.com/excel/examples/TwoRefs.xlsx)

这是它显示的内容：

![节目](../Images/1e2c412aa0b727a928bbca158b81d57a.png)

这是数据：

![拉取自](../Images/05460307b9b2549ef49b78c387723091.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:29:44.667

您可以在公式中将所需的查找和匹配字符串都转换为 TEXT，以便所有内容都变为字符串类型

例如

`=IFERROR(INDEX(TEXT('Dakota Data'!$J$1:$J$526,"0"),MATCH(1,INDEX(ISNUMBER(FIND(TEXT($B3,"0"),TEXT('Dakota Data'!$A$1:$A$526,"0")))*(TEXT('Dakota Data'!$D$1:$D$526,"0")=TEXT(E3,"0")),0),0)),"")`

基本上取代

'达科他州数据'！$J$1:$J$526`TEXT('Dakota Data'!$J$1:$J$526,"0")`

$B3 与`TEXT($B3,"0")`

'达科他州数据'！$A$1:$A$526`TEXT('Dakota Data'!$A$1:$A$526,"0")`

和 E3 与`TEXT(E3,"0")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:59:41.083

尝试包装公式中处理公式的部分`PO`，`TEXT`如下所示：

```
=IFERROR(
    INDEX(
      'Dakota Data'!$I$1:$I$526,
      MATCH(
         1,
         INDEX(
             ISNUMBER(FIND(TEXT($B3, "General"),'Dakota Data'!$A$1:$A$526))*('Dakota Data'!$D$1:$D$526=TEXT(E3,"General")),
             0),
          0)),
  "") 
```

没有空格：

```
=IFERROR(INDEX('Dakota Data'!$J$1:$J$526,MATCH(1,INDEX(ISNUMBER(FIND(TEXT($B3, "General"),'Dakota Data'!$A$1:$A$526))*('Dakota Data'!$D$1:$D$526=TEXT(E3, "General")),0),0)),"") 
```

* * *

**手动方式**

不确定这是否是问题，但在您提供的工作表中，达科他州数据的 PO 列中的数字存储为字符串。如果单击左上角带有绿色箭头的单元格之一，请按`Ctrl+Space`，单击感叹号并按`Convert to Number`，它应该会更正它（至少在我的上有）。

![在此处输入图像描述](../Images/4a92a750babe30f13f2350405fdc2f59.png) ![在此处输入图像描述](../Images/06ed492030e592b95880ca957f8a920e.png) ![在此处输入图像描述](../Images/c88fdbf710b61d6edc6cca1a4a95e067.png)

# ios - 没有搜索的 iOS 范围栏

> ID：12690594
> 
> 赞同：7
> 
> 时间：2012-10-02T12:50:06.563
> 
> 标签：ios, element

是否可以在没有搜索字段的手机应用程序[http://d.pr/i/xTGQ](http://d.pr/i/xTGQ)中使用这样的范围栏？我想将它用作按钮，但 UITabBar 太大了。

感谢帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T12:53:34.977

我认为这只是一个 UISegmentedControl。您可以在 Interface Builder 中创建其中一个并像往常一样使用它。

# android - android：可以跨活动使用的sharedpreferences？

> ID：12690595
> 
> 赞同：2
> 
> 时间：2012-10-02T12:50:09.260
> 
> 标签：android, android-activity, sharedpreferences

我在一项活动中创建了共享首选项数据，是否可以在另一项活动中使用？如果是，如何做到这一点？

4个玩家的名字保存在NameIndex.java中，我想使用MainActivity.java中保存的4个玩家的名字

在 NameIndex.java 下：

```
 private void SaveNamesToFile(String Game1, String P1Name, String P2Name, String P3Name, String P4Name)
   // save the new row to the file, then refresh all Buttons
   {
      // originalScore will be null if we're modifying a slot that is existing already     
      String originalNameP1 = SavedNameP1.getString(Game1, null); // to return null if this preference does not exist. 
      String originalNameP2 = SavedNameP2.getString(Game1, null);
      String originalNameP3 = SavedNameP3.getString(Game1, null);
      String originalNameP4 = SavedNameP4.getString(Game1, null);

      // get a SharedPreferences.Editor to store new row data
      SharedPreferences.Editor preferencesEditorP1 = SavedNameP1.edit();
      SharedPreferences.Editor preferencesEditorP2 = SavedNameP2.edit();
      SharedPreferences.Editor preferencesEditorP3 = SavedNameP3.edit();
      SharedPreferences.Editor preferencesEditorP4 = SavedNameP4.edit();

      preferencesEditorP1.putString(Game1, P1Name);
      preferencesEditorP2.putString(Game1, P2Name);
      preferencesEditorP3.putString(Game1, P3Name);
      preferencesEditorP4.putString(Game1, P4Name);

      preferencesEditorP1.apply();
      preferencesEditorP2.apply();
      preferencesEditorP3.apply();
      preferencesEditorP4.apply();  
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:53:12.117

是的，它们可以跨活动共享。最简单的方法是使用：

```
context.getDefaultSharedPreferences() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:54:24.417

我正在这样使用它

```
 public class SharedPreferencesHelper {

        SharedPreferences myPrefs;
        SharedPreferences.Editor prefsEditor;

        private static SharedPreferencesHelper instance = null;

        public static synchronized SharedPreferencesHelper getInstance() {
            if (instance == null) {
                instance = new SharedPreferencesHelper();
            }

            return instance;
        }

private SharedPreferencesHelper() {
myPrefs  = MyApplication.getInstanse().getApplicationContext().getSharedPreferences("prefs", Context.MODE_WORLD_READABLE);
            prefsEditor = myPrefs.edit();
    }

        public void putValueForKey(String key, String value) {
            prefsEditor.putString(key, value);
            prefsEditor.commit();
        }

    }

    public class MyApplication extends Application {

        private static MyApplication instance;

        @Override
        public void onCreate() {
            super.onCreate();
            instance = this; 
        }

        public static MyApplication getInstanse(){
            if(instance ==null){
                throw new IllegalStateException("Application not created yet!");
            }
            return instance;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:56:58.377

我在活动之间使用了一个 SharedPreferences 文件，但我所做的是使用在两个活动内的不同私有变量中声明的相同文件名。[您可以在以下链接](https://stackoverflow.com/questions/12669707/load-sharedpreferences-in-mainactivity-and-update-in-an-secondary-activity)中查看我的代码。我不明白的是，为什么您只使用 4 个 SharedReferences 文件作为播放器的名称，而不是仅使用 1 个文件中的所有名称。这是可能的，因为我用它来保存超过 2 个变量。

# ios - iOS栏按钮更高分辨率的图像？

> ID：12690597
> 
> 赞同：2
> 
> 时间：2012-10-02T12:50:19.743
> 
> 标签：ios, uibarbuttonitem

uibarbuttonitem 的图像大小约为 15x15，但是在创建该大小的图像时，与默认图像（添加/搜索）相比，它们有些像素化。我正在使用 Photoshop 创建这些，并保存为 PNG 格式。有没有办法让这些图像与默认图像一样详细？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:51:58.600

您还需要创建 30x30 的版本，并将它们命名为 filename@2x.png。有特定于视网膜的图像版本。

# android - onActivityResult 没有被第二次调用

> ID：12690599
> 
> 赞同：2
> 
> 时间：2012-10-02T12:50:22.647
> 
> 标签：android, android-intent, android-activity

我的活动有一些问题。

我有一个主要活动，这里有两个由普通类调用的方法。

```
public class MainActivity extends Activity {

    public void selectUser(String users) {
    // Start select user screen
    Intent i = new Intent(this, SelectUserActivity.class);
    i.putExtra("users", users);
    //i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivityForResult(i, SELECT_USER_CODE);
}

public void showPincodeScreen(String userName, String residentName) {
    // Start pincode screen
    Intent i = new Intent(this, PincodeActivity.class);
    i.putExtra("userName", userName);
    i.putExtra("residentName", residentName);
    i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(i);
}

} 
```

在选择用户屏幕中，用户可以从列表中选择一个用户，该用户将返回到主活动的 onActivityResult 方法。这行得通。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_CANCELED) {

        switch (requestCode) {
        case SELECT_RESIDENT_CODE:
            if (data != null) {
                if (data.hasExtra("residentid")) {
                    loadingScreen("Taken worden opgehaald");
                    BroadcastSender.sendValue(
                            data.getStringExtra("residentid"), "1");
                }
            }
            break;

        case SELECT_USER_CODE:
            if (data != null) {
                if (data.hasExtra("userid") && data.hasExtra("username")) {
                    setTitle(data.getStringExtra("username"));
                    loadingScreen.hideMessage();
                    String userid = data.getStringExtra("userid");
                    BroadcastSender.sendValue(userid, "1");
                }
            }
            break; 
```

选择用户后，将调用 showPincodeScreen。但是当用户在 pincode 屏幕上按下某个按钮时，会再次调用 selectUser 方法并再次启动 selectUserActivity。

但是当我现在选择一个用户时，pincode屏幕跳回到前面，并且没有调用mainActivity的onActivityResult方法。

我已经尝试添加

```
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

到选择用户方法，但这不起作用。

可能是什么原因？

编辑：这是 selectUser Activity 的完成方法。但它是第一次工作，所以我认为问题不在这里。

```
 @Override
public void finish() {
    // Prepare data intent
    Intent data = getIntent();
    data.putExtra("userid", selectedItem.getItemID());
    data.putExtra("username", selectedItem.getItemName());
    // Activity finished ok, return the data
    setResult(RESULT_OK, data);
    super.finish();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:53:43.887

我找到了解决方案，我放置了

```
@Override
protected void onStop() {
    finish();
    super.onStop();
} 
```

在密码活动中。当用户现在单击按钮时，pincode 活动进入后台，因此调用 onStop 方法并完成活动。

现在调用 mainActivity 的 onActivityResult 并正确执行:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:07:58.127

首先，您应该在末尾添加，`SELECT_RESIDENT_CODE`以便可以捕获它的返回：`startActivity``showPincodeScreen``onActivityResult`

```
startActivity(i,SELECT_RESIDENT_CODE); 
```

当您从 pinCode 活动调用 selectUser 活动时，它将返回到调用它的活动 - pinCode 活动。您应该`onActivityResult`在那里实现并在其中调用 finish() 。

# google-maps - 如何修复 GeometryControls#getInfoWindowHtml 说：无法从模板错误中获取 html？

> ID：12690603
> 
> 赞同：0
> 
> 时间：2012-10-02T12:50:45.143
> 
> 标签：google-maps, polygon, google-maps-api-2

我已经从以下链接下载了用于绘制多边形的 gmaps 实用程序库示例的源文件。 [gmaps-实用程序库](http://gmaps-utility-library-dev.googlecode.com/svn/trunk/geometrycontrols/)

但是当我在本地主机中执行这些文件时，它向我显示以下错误：

```
GeometryControls#getInfoWindowHtml says: failed to get html from template 
```

这个问题的出现是因为 map_main.js 中的以下代码

```
 geometryControls.addControl(markerControl);
 geometryControls.addControl(polygonControl);
 geometryControls.addControl(polylineControl);
 map.addControl(geometryControls); 
```

谢谢你。

# c# - 如何使用 youtube .net api 获取视频 ID

> ID：12690605
> 
> 赞同：1
> 
> 时间：2012-10-02T12:50:56.000
> 
> 标签：c#, .net, api, youtube

我正在尝试找到一种方法为我的应用程序提供一个 YouTube URL（从浏览器的地址栏中复制）并从该 URL 中提取唯一的视频 ID。我想远离正则表达式或任何其他字符串操作作为解决方案，因为并非所有 YouTube URL 都是相同的并且可能会继续更改。

必须有某种方法可以使用 .NET 的 YouTube API（特别是我的解决方案的 C#）来简单地调用方法/函数，将视频的 URL 传递给该方法，最后该方法会将视频 ID 作为字符串返回.

我一直在尝试查找这方面的文档，到目前为止，我只能找到有关使用方法来检索基于已经拥有并提供视频 ID 的视频数据的信息——我目前还没有。

我知道 YouTube URL 的哪一部分标识了视频，但我的应用程序的用户不必担心这一点。

如果有人可以在这里帮助我找到解决方案，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:15:09.920

不幸的是，我认为这不会奏效。但话又说回来，我不明白您在使用 URL 时遇到的问题。URL 本身是一种 ID，并且 URL 的**v**属性指定它是哪个视频。看来你已经知道了。

关于使用 URL 的问题：

2.  并非所有 YouTube 网址都相同

R：不，但这没关系，因为使用 RegEx 您只会读取**v**属性（*v=-l6P7VFKnW8*），或者是缩写**变**体

3.  YouTube 网址可能会继续更改

R：是的，他们可能会。但是，YouTube 不太可能很快更改标识符，因为它会对 API 和其他基础设施产生影响。此外，如果您有一个纯模块化的通用解决方案，您将不必更改多个 RegEx 以符合新的 ID。

相关：[Youtube .NET 数据 API：仅检索 videoID？](https://stackoverflow.com/questions/10968099/youtube-net-data-api-retrieve-only-videoid)

相关：[C# 正则表达式通过 url 从 youtube 和 vimeo 获取视频 ID](https://stackoverflow.com/questions/3652046/c-sharp-regex-to-get-video-id-from-youtube-and-vimeo-by-url)

# sql - 修改表中每一行的最快方法

> ID：12690611
> 
> 赞同：0
> 
> 时间：2012-10-02T12:51:03.740
> 
> 标签：sql, sql-server, sql-update

更新相对较大的表（约 7000 万行）以用**不同**表的 id 替换外键列（由当前键间接链接）的推荐方法是什么？

假设我有三个表：

```
Person
  Id long,
  Group_id long   --> foreign key to Group table

Group
  Id long
  Device_id long  --> foreign key to Device table

Device
  Id long 
```

我想更新`Person`表以具有表的直接外键`Device`，即：

```
Person
  Id long,
  Device_Id long  --> foreign key to Device table

Device
  Id long 
```

查询看起来像这样：

```
-- replace Group_id with Device_id
update p from Person p
  inner join Group g
  on g.Id = p.Group_id
set p.Group_id = g.Device_id 
```

我将首先删除 FK 约束，然后重命名该列。

*   这行得通吗？
*   有没有更好的办法？
*   我可以加快速度吗？（当这个查询运行时，其他一切都将离线，服务器是 UPS 备份的，所以我想跳过任何事务更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:56:10.433

如果您正确编写了 UPDATE 它将起作用（假设这是 SQL Server）

```
update p
set p.Group_id = g.Device_id
from Person p
inner join Group g on g.Id = p.Group_id 
```

除此之外，重用，然后重命名列*是一个非常聪明的举措。想不出任何聪明的方法来使这更快，除非您希望使用 WHILE 循环和 person.Id 标记将更新分成批次。

`* -` [ALTER TABLE DROP 列不回收列占用的空间](http://sqlblogcasts.com/blogs/tonyrogerson/archive/2007/08/27/alter-table-drop-column-does-not-reclaim-the-space-the-column-took-it-s-a-meta-data-change-only.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:07:02.590

1.  删除您正在更新的表上的索引，并在更新完成后重新创建。
2.  更新完成后删除您正在更新的表上的约束并适当地重新创建（毕竟您正在更改引用）。
3.  关闭正在更新的表上的触发器，并在更新完成后启用。
4.  您可能需要考虑运行批处理。我个人会创建一个循环并一次批量更新 10k 行。这似乎在我的硬件上造成的问题最少（磁盘空间不足等）。您可以订购更新并跟踪 PK，这样您就知道自己在哪里。或者创建一个在更新特定记录时设置的位列；这种方法总体上可能会更容易，因为您根本不需要跟踪 PK。

这种循环的示例可能如下所示：

```
select top 1 * from table

DECLARE @MinPK BIGINT
DECLARE @MaxPK BIGINT
SET @MinPK=0
SET @MaxPK=0

WHILE @@ROWCOUNT>0
BEGIN
    SELECT
        @MaxPK=MAX(a.PK)
    FROM (
        SELECT TOP 3
            PK
        FROM Table
        WHERE PK>@MinPK
        ORDER BY PK ASC
    ) a

    --Change this to an update
    SELECT
        PK
    FROM Table
    WHERE PK>@MinPK
    AND PK<=@MaxPK

    SET @MinPK=@MaxPK
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:59:38.750

你的想法不会“奏效”，除非每组只有一个设备（这很荒谬，所以我认为不会）。

问题是您必须将许多 device_id 值塞入 person 表的一列中——这就是为什么您首先需要一个 group 表。

# sql-server - 检索 SQL Server 数据库中所有表的名称列

> ID：12690619
> 
> 赞同：3
> 
> 时间：2012-10-02T12:51:32.397
> 
> 标签：sql-server, stored-procedures, sql-server-2000

是否存在列出 SQL Server 2000 数据库中所有表的名称以及每个表中该表中所有列的名称的系统存储过程？我想将此数据导出到文档中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T12:57:36.777

我不知道是否存在系统存储过程，但我使用这个：

```
SELECT   SysObjects.[Name] as TableName,   
    SysColumns.[Name] as ColumnName,   
    SysTypes.[Name] As DataType,   
    SysColumns.[Length] As Length   
FROM   
    SysObjects INNER JOIN SysColumns   
ON SysObjects.[Id] = SysColumns.[Id]   
    INNER JOIN SysTypes  
ON SysTypes.[xtype] = SysColumns.[xtype]  
WHERE  SysObjects.[type] = 'U'  
ORDER BY  SysObjects.[Name] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:01:02.977

在 SQL-Server 2005+ 中，您可以使用系统视图[sys.columns](http://msdn.microsoft.com/en-us/library/ms176106.aspx)和[sys.tables 来完成](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.100%29.aspx)

```
SELECT t.name TableName, c.name ColumnName
FROM sys.tables t
     JOIN sys.columns c ON t.object_id=c.object_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:07:03.030

您还可以查询`INFORMATION_SCHEMA.COLUMNS`视图。

使用此视图也更安全。[微软表示](http://msdn.microsoft.com/en-us/library/aa933204%28v=sql.80%29.aspx)，“如果系统表在未来版本中发生更改，直接查询系统表可能无法提供准确的信息。这些视图提供了一个内部的、独立于系统表的 SQL Server 元数据视图。信息模式视图允许应用程序即使对系统表进行了重大更改，也可以正常工作。”

# javascript - 检查 touchend 是否在拖动后出现

> ID：12690620
> 
> 赞同：39
> 
> 时间：2012-10-02T12:51:35.103
> 
> 标签：javascript, jquery, ios, touch, touch-event

我有一些代码可以更改表的类。在手机上，有时表格对于屏幕来说太宽了，用户会拖动/滚动查看内容。但是，当他们触摸并拖动表格时，每次拖动都会触发 touchend。

如何测试触摸端是否是由于触摸拖动而出现的？我尝试跟踪 dragstart 和 dragend 但我无法让它工作，这似乎是一种不雅的方法。有什么我可以添加到下面的东西，基本上可以确定，“这个触摸端是在拖动结束时出现的吗？”

```
$("#resultTable").on("touchend","#resultTable td",function(){ 
        $(this).toggleClass('stay');
}); 
```

我提前感谢您的帮助。

PS - 使用最新的 jquery，虽然常规点击有效，但与 touchend 相比非常慢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-17T21:15:58.360

## 使用两个监听器：

首先将一个变量设置为 false：

```
var dragging = false; 
```

然后ontouchmove设置拖动为true

```
$("body").on("touchmove", function(){
      dragging = true;
}); 
```

然后在拖动完成时，检查拖动是否为真，如果是，则将其视为拖动触摸：

```
$("body").on("touchend", function(){
      if (dragging)
          return;

      // wasn't a drag, just a tap
      // more code here
}); 
```

touch end 仍然会触发，但会在您的 tap 脚本运行之前自行终止。

为确保您下次触摸时尚未将其设置为已拖动，请在触摸时将其重置为 false。

```
$("body").on("touchstart", function(){
    dragging = false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:06:38.577

看起来我的问题的一种解决方案在这里找到：

[http://alxgbsn.co.uk/2011/08/16/event-delegation-for-touch-events-in-javascript/](http://alxgbsn.co.uk/2011/08/16/event-delegation-for-touch-events-in-javascript/)

这段代码检测 touchstart 之后的任何移动，以便在 Tapend 之后中止点击行为。

```
var tapArea, moved, startX, startY;

tapArea = document.querySelector('#list'); //element to delegate
moved = false; //flags if the finger has moved
startX = 0; //starting x coordinate
startY = 0; //starting y coordinate

//touchstart           
tapArea.ontouchstart = function(e) {

    moved = false;
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
};

//touchmove    
tapArea.ontouchmove = function(e) {

    //if finger moves more than 10px flag to cancel
    //code.google.com/mobile/articles/fast_buttons.html
    if (Math.abs(e.touches[0].clientX - startX) > 10 ||
        Math.abs(e.touches[0].clientY - startY) > 10) {
            moved = true;
    }
};

//touchend
tapArea.ontouchend = function(e) {

    e.preventDefault();

    //get element from touch point
    var element = e.changedTouches[0].target;

    //if the element is a text node, get its parent.
    if (element.nodeType === 3) { 
        element = element.parentNode;
    }

    if (!moved) {
        //check for the element type you want to capture
        if (element.tagName.toLowerCase() === 'label') {
            alert('tap');
        }
    }
};

//don't forget about touchcancel!
tapArea.ontouchcancel = function(e) {

    //reset variables
    moved = false;
    startX = 0;
    startY = 0;
}; 
```

更多信息： [https ://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:22:54.260

我想说当用户拖动以查看更多内容或拖动元素时，您无法区分。我认为你应该改变方法。您可以检测它是否是移动设备，然后绘制一个启用/禁用元素移动的开关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-05T08:52:56.540

为了缩短@lededge 的解决方案，这可能会有所帮助。

```
$("body").on("touchmove", function(){
   dragging = true;
}).on("touchend", function(){
   if (dragging)
      return;
}).on("touchstart", function(){
   dragging = false;
}); 
```

# c++ - 调整c++数组的大小和复制

> ID：12690621
> 
> 赞同：0
> 
> 时间：2012-10-02T12:51:36.083
> 
> 标签：c++, arrays, visual-c++

例如，如果我有一个包含 5 个元素的指针数组（已满）并且我想在第二个位置插入另一个元素，我将不得不分配另一个数组（大小 + 1），从旧数组中复制第一个元素，插入新元素，然后复制剩余元素。此应用程序不能浪费任何空间。这是到目前为止的代码：

```
Sometype **newArray=new Sometype*[++Count];
size_t s=sizeof(Array);
memcpy(newArray,Array,s*position);
newArray[position]=new Sometype();
memcpy(newArray+position+1,Array+position,s*(Count-position-1));

delete [] Array;
Array=newArray; 
```

有没有更有效的方法来做这件事，因为这是我的应用程序的瓶颈？我是 C++ 新手，所以我不知道任何高级的东西。矢量可以用于此目的吗？我想我在某处读到它在调整大小时占用了以前使用的空间的两倍。这是真的还是可以修改这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:53:43.370

看看标准容器`std::vector`，`std::list`和`std::unordered_set``std::unordered_map`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T12:56:21.613

如果您不能浪费*任何*空间*并且*必须坚持使用顺序容器，那么恐怕这是最有效的方法。但我仍然不相信你*不能*浪费任何空间。如果您可以提前预料到以后需要再添加 5 个元素，那么从一开始就调整数组的大小会更有效。在任何情况下，您都应该使用向量来避免这种糟糕的 C 风格代码，并且更清楚您的意图。你可能想看看`std::vector<T>::reserve()`函数。向量在调整大小时是否采用先前的两倍是未指定的，并且因实现而异。

# objective-c - 检测任何连接的网络

> ID：12690622
> 
> 赞同：6
> 
> 时间：2012-10-02T12:51:37.250
> 
> 标签：objective-c, network-programming, foundation

如何检测是否连接了任何网络适配器？我只能找到使用 NSReachability 检测互联网连接的示例，但我什至想检测非互联网网络连接。在 eth0 上获取 IP 地址应该可以吗？我只在 Mac 上工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T16:05:00.883

在 Apple 的*技术说明 TN1145中*[获取所有 IP 地址的列表](http://developer.apple.com/library/mac/#technotes/tn1145/_index.html#//apple_ref/doc/uid/DTS10002984-CH1-SECGETTINGIPLIST)提到了 3 种获取网络接口状态的方法：

*   系统配置框架
*   开放传输 API
*   BSD 套接字

**系统配置框架：**这是Apple推荐的方式，TN1145中有示例代码。优点是它提供了一种获取接口配置更改通知的方法。

**Open Transport API：** TN1145中也有示例代码，否则我就不多说了。（Apple 网站上只有“遗留”文档。）

**BSD 套接字：**这似乎是获取接口列表和确定连接状态的最简单方法（如果您不需要动态更改通知）。

以下代码演示了如何查找所有“启动并运行”的 IPv4 和 IPv6 接口。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <ifaddrs.h>
#include <net/if.h>
#include <netdb.h>

struct ifaddrs *allInterfaces;

// Get list of all interfaces on the local machine:
if (getifaddrs(&allInterfaces) == 0) {
    struct ifaddrs *interface;

    // For each interface ...
    for (interface = allInterfaces; interface != NULL; interface = interface->ifa_next) {
        unsigned int flags = interface->ifa_flags;
        struct sockaddr *addr = interface->ifa_addr;

        // Check for running IPv4, IPv6 interfaces. Skip the loopback interface.
        if ((flags & (IFF_UP|IFF_RUNNING|IFF_LOOPBACK)) == (IFF_UP|IFF_RUNNING)) {
            if (addr->sa_family == AF_INET || addr->sa_family == AF_INET6) {

                // Convert interface address to a human readable string:
                char host[NI_MAXHOST];
                getnameinfo(addr, addr->sa_len, host, sizeof(host), NULL, 0, NI_NUMERICHOST);

                printf("interface:%s, address:%s\n", interface->ifa_name, host);
            }
        }
    }

    freeifaddrs(allInterfaces);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:03:41.137

您可以使用苹果提供的可达性代码。这是您可以获得“可达性”源代码的[链接：](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

你也可以下载这个文件：Github 中的 TestWifi。它将向您展示如何实现 Reachability 类。

希望这可以帮助你。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:48:22.433

`Reachability`（我假设您的意思是 Apple 的基于底层`SCNetworkReachability...`API 的演示类）适用于任何 IP 连接的主机，包括在您的本地网络上。您可以使用该`reachabilityForLocalWiFi`方法，尽管根据[此页面](http://blog.ddg.com/?p=24)，当网络处于活动状态但不可路由时，它将返回 YES。因此，您可能更喜欢`reachabilityWithAddress:`使用本地地址进行查询。

[这](http://blog.ddg.com/?p=24)`Reachability`是一些人推荐的替代品。

# javascript - 来自参考点的 Animate() div？

> ID：12690623
> 
> 赞同：0
> 
> 时间：2012-10-02T12:51:36.633
> 
> 标签：javascript, jquery-ui

我有 9 个 div，每行 3 个。当我单击其中一个时，我希望其他的 fadeOut（没关系，任何问题）然后我单击的那个从左、右、顶部和底部调整它需要的任何内容，直到它覆盖所有 9 个 div 空间。我得到了第一行的第一个 div，因为它在左上角，但是对于其他的，它们会转到左上角然后调整大小，我想在他们所在的地方调整它们的大小当我点击。然后当然是居中 div 的内部。

我正在用 jquery-ui 尝试它，我对此很陌生，所以我不知道它是否会非常复杂。我用谷歌搜索了“从参考点开始的 jquery animate()”，但我什么也没得到。

谢谢大家！

```
 <div id="row1" class="row-fluid">
    <p id="p1" class="hero-unit span4 ">P número 1</p>
    <p id="p2" class="hero-unit span4 ">P número 2</p>
    <p id="p3" class="hero-unit span4 ">P número 3</p>
    </div>

    <div id="row2" class="row-fluid">
    <p id="p4" class="hero-unit span4 ">P número 4</p>
    <p id="p5" class="hero-unit span4 ">P número 5</p>
    <p id="p6" class="hero-unit span4 ">P número 6</p>
    </div>

    <div id="row3" class="row-fluid">
    <p id="p7" class="hero-unit span4 ">P número 7</p>
    <p id="p8" class="hero-unit span4 ">P número 8</p>
    <p id="p9" class="hero-unit span4 ">P número 9</p>
    </div>

    $(document).ready(function() {
        $("p").click(function() {
            current = $(this);
            $("p").not(this).fadeOut(1000, function(){
                current.animate({
                    margin: "0px",
                    height: "420px",
                    width: "940px",
                }, 1000, function(){
                    current.removeClass("span4");
                }); 
            });
        });
    }); 
```

这就是我所拥有的，非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:21:33.213

它在调整大小之前跳到左上角的原因是因为所有其他`<p>`的都`display`设置为`none`。`<p>`解决方案是在调整大小之前将当前设置为绝对位置。

尝试这个！

将 HTML 包装在具有相对定位的 Div 中：

```
<div id='container' style="position: relative;">
    <div id="row1" class="row-fluid">
    <p id="p1" class="hero-unit span4 ">P número 1</p>
    <p id="p2" class="hero-unit span4 ">P número 2</p>
    <p id="p3" class="hero-unit span4 ">P número 3</p>
    </div>

    <div id="row2" class="row-fluid">
    <p id="p4" class="hero-unit span4 ">P número 4</p>
    <p id="p5" class="hero-unit span4 ">P número 5</p>
    <p id="p6" class="hero-unit span4 ">P número 6</p>
    </div>

    <div id="row3" class="row-fluid">
    <p id="p7" class="hero-unit span4 ">P número 7</p>
    <p id="p8" class="hero-unit span4 ">P número 8</p>
    <p id="p9" class="hero-unit span4 ">P número 9</p>
    </div>
</div>​​​​​

$(document).ready(function(){
$("p").click(function(){
    current = $(this);  
    var position = current.position();
    $("p").not(this).fadeOut(1000, function(){
        // set the current position to absolute with the top and left dimensions the same;
        current.css({
            'postition' : 'absolute',
            'left' : position.left,
            'top' : position.top,
        });
        current.animate({
            margin: "0px",
            height: "420px",
            width: "940px"
            top: "0px",
            left: "0px"
        }, 1000, function(){
            current.removeClass("span4");
        }); 
    });

});
});​ 
```

请注意，这些都不需要 jQuery.UI。它适用于普通的 jQuery :)

这里是一个 jsfiddle 来展示它：http: [//jsfiddle.net/Fgb9b/1/](http://jsfiddle.net/Fgb9b/1/)

享受！

# jquery - jquery datepicker 删除 .ui-state-highlight 类 onSelect 事件

> ID：12690626
> 
> 赞同：1
> 
> 时间：2012-10-02T12:51:49.400
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在开发 Web 应用程序，在这个应用程序中我使用了 jquery datepicker 插件。我使用日期选择器作为内联日期选择器。当我选择一个日期时，我试图删除一个 css 类`ui-state-highlight`，但没有反映在 datepicker 中。

```
 $("#start_date").datepicker({
    beforeShowDay: greySelectedDateRange, 
    maxDate: 0,
    onSelect: function (dateText, inst) {
        console.log(dateText);
        var toDaysDate = getCurrrentDate('mdy'); //function returning current date
        console.log(toDaysDate);
        //When the selected date is equal to current date 
        if (dateText == toDaysDate) {
            $(this).find('a.ui-state-active')
                   .removeClass('ui-state-highlight')
                   .find('.ui-datepicker-today a')); 
             //$(this).datepicker("refresh");
            //console.log($(this));
        }
    }
}); 
```

当我看到控制台`console.log($(this));`时，它已被删除，但是当我检查时，css class( `ui-state-highlight`) 仍然存在，请建议我一个解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T23:28:20.230

@Johan 和 @Stano 建议的方法有效 - 但是一旦您更改月份然后回到当前月份，今天的亮点就会返回。这个轻微的修改解决了这个问题：

```
$(function() {
   $( ".datepicker" ).datepicker({    
     beforeShow: function(input, inst) {clearToday(inst)},
     onChangeMonthYear: function(year, month, inst) {clearToday(inst)}
   });

   function clearToday(inst) {
        setTimeout(function() {
            inst.dpDiv.find('a.ui-state-highlight').removeClass('ui-state-highlight');
        }, 10);
} 
```

我发现我必须将超时时间减少到 10，否则一天的亮点会短暂闪烁并且可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:55:07.857

尝试

```
inst.dpDiv.removeClass('ui-state-highlight'); 
```

`inst.dpDiv`是生成的日期选择器 div。

[http://jsfiddle.net/abhMH/2/](http://jsfiddle.net/abhMH/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:12:11.293

我想知道他们是否在 onSelect 被触发后添加了 CSS 类。

您可以做的一件事是检查为 设置的属性，`ui-state-highlight`然后在代码的其他地方覆盖它们：

```
.ui-state-highlight {
  margin: 0 !important;
} 
```

# android - Android 在 AsyncTask 中调用多个 Web 服务

> ID：12690628
> 
> 赞同：0
> 
> 时间：2012-10-02T12:51:58.957
> 
> 标签：android, android-asynctask, android-handler

我正在处理`AsynTask`，单个 url 调用`AsynTask`很好，但我想一个接一个地调用两个 Web 服务`AsyncTask`，请你发送一些代码或想法。

我的代码：

```
public class GetInstructionItems extends AsyncTask<String, Void, Boolean> {

    public ProgressDialog myProgressDialog = null;
    private Boolean authenticationResult = false;
    private String LOG = SurgicalHistoryAsynTask.class.getName(); 
    private String responseString = "getInstructionItemsResult";
    JSONObject totalResult;

    protected Boolean doInBackground(String... params) 
    {
        return getRespose(params[0]);
    }

    protected void onPostExecute(Boolean result) {

        myProgressDialog.dismiss();
        if (result) 
        {
            Log.d(LOG, "Response ::result "+result);

        }else{

            showAlertMsg(getString(R.string.response_fail));
        }
    }
    protected void onPreExecute() {

        if (!authenticationResult) {
            myProgressDialog = new ProgressDialog(getActivity());
            myProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            myProgressDialog.setMessage("loading...");
            myProgressDialog.setCancelable(false);
            myProgressDialog.setProgress(100);
            myProgressDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            myProgressDialog.show();
        }
    }

    private boolean getRespose(String inputUrl){

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:27:43.410

```
protected Boolean doInBackground(String... params) 
{
    getRespose(params[0]);
    getRespose(params[1]);
    getRespose(params[2]);
    return true;
} 
```

或者

```
class Responces
{
     boolean r1, r2, r3;
}

protected Responces doInBackground(String... params) 
{
    Responces r = new Responces();

    r.r1 = getRespose(params[0]);
    r.r2 = getRespose(params[1]);
    r.r3 = getRespose(params[2]);
    return r;
} 
```

# c++ - 为什么这些函数模板都不匹配实例化？

> ID：12690631
> 
> 赞同：2
> 
> 时间：2012-10-02T12:52:17.293
> 
> 标签：c++, templates, c++11, sfinae, enable-if

以下代码无法使用 Intel C++ 2013 编译。

```
#include <type_traits>
#include <iostream>

template <
    typename T, 
    typename std::enable_if<std::is_integral<T>::value>::type
>
void myfunc( T a) 
{ 
    std::cout << a << std::endl;
}

template <
    typename T, 
    typename std::enable_if<!std::is_integral<T>::value>::type
>
void myfunc( T a) 
{ 
    std::cout << a << std::endl;
}

int main()
{
    double a;
    int b;
    myfunc(a);
    myfunc(b);

    return 0;

} 
```

这是错误输出：

```
ConsoleApplication1.cpp(33): error : no instance of overloaded function "myfunc" matches the argument list
1>              argument types are: (double)
1>      myfunc(a);
1>      ^
1>  
1>ConsoleApplication1.cpp(34): error : no instance of overloaded function "myfunc" matches the argument list
1>              argument types are: (int)
1>      myfunc(b);
1>      ^
1> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:04:47.597

在函数中使用的通常且正确的方法`enable_if`是将其粘贴在返回类型中。

```
template <typename T>
typename std::enable_if<std::is_integral<T>::value>::type myfunc(T a) {
    std::cout << a << " (integral)" << std::endl;
}

template <typename T>
typename std::enable_if<!std::is_integral<T>::value>::type myfunc(T a) {
    std::cout << a << " (non-integral)" << std::endl;
} 
```

* * *

对于您的变体，正确的方法是：

```
template <typename T,
          typename = typename std::enable_if<std::is_integral<T>::value>::type>
void myfunc(T a) {
    std::cout << a << " (integral)" << std::endl;
} 
```

...“enable_if”是*默认模板参数*。它不适用于您的情况，因为该功能没有重载。

# c# - VB.Net 到 C# 字节数组的问题

> ID：12690633
> 
> 赞同：1
> 
> 时间：2012-10-02T12:52:21.570
> 
> 标签：c#, vb.net-2010

我有一个已转换为 C# 的 VB.net 项目。代码的一部分在 C# 中给出了与在 VB.Net 中不同的结果。有人可以告诉我这里的 C# 代码有什么问题以及如何解决吗？

VB.Net：

```
Private Sub mco_GetDataReturn(ByVal TransactionNumber As Short, ByVal DataType As ModiconComunications.ModiconComObject.GetDataType, ByVal Success As Boolean, ByVal UserData() As Byte) Handles mco.GetDataReturn

        OrderNumber = ""
        HeatNumber = ""
        If UserData.GetUpperBound(0) < 17 Then
            'MsgBox("ModComm1_GetDataReturn - Not enough data returned from PLC read : " & UBound(UserData, 1) + 1 & " bytes")
            ReDim Preserve UserData(0 To 17)
        ElseIf UserData.GetUpperBound(0) > 17 Then
            'MsgBox("ModComm1_GetDataReturn - Too much data returned from PLC read : " & UBound(UserData, 1) + 1 & " bytes")
            ReDim Preserve UserData(0 To 17)
        End If

        OrderNumber = System.Text.Encoding.ASCII.GetChars(UserData, 0, 8)
        OrderRelease = System.Text.Encoding.ASCII.GetChars(UserData, 8, 2)
        HeatNumber = System.Text.Encoding.ASCII.GetChars(UserData, 10, 6)
        PieceNumber = UserData(16) * 256 + UserData(17)
    End Sub 
```

C＃：

```
private void mco_GetDataReturn(short TransactionNumber, ModiconComunications.ModiconComObject.GetDataType DataType, bool Success, byte[] UserData)
        {
            OrderNumber = "";
            HeatNumber = "";
            if (UserData.GetUpperBound(0) < 17)
            {
                Array.Resize(ref UserData, 18);
            }
            else if (UserData.GetUpperBound(0) > 17)
            {
                Array.Resize(ref UserData, 18);
            }

            OrderNumber = System.Text.Encoding.ASCII.GetString(UserData, 0, 8).ToString();
            OrderRelease = System.Text.Encoding.ASCII.GetString(UserData, 8, 2).ToString();
            HeatNumber = System.Text.Encoding.ASCII.GetString(UserData, 10, 6).ToString();
            PieceNumber = UserData[16] * 256 + UserData[17];
        } 
```

具体问题在于 PieceNumber 的最后一条语句。在 VB.Net 中，该语句产生实际的片数，但在 C# 代码中它产生 0（零）。这些陈述有何不同？PieceNumber 变量在两个项目中都声明为 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:04:01.107

在 VB.net 中，当您使用 new Array(10) 创建一个数组时，您指示其上限为 10，因此它包含 11 个元素。

在 C# 中，new Array(10) 将创建一个包含 10 个元素（从 0 到 9）的数组。我想这是你问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:00:57.230

它不取决于 的初始内容`UserData`吗？你确定你用相同的参数调用它吗？

如果它是 10 字节长，并且您将其调整为 18 字节，则“新”值将为零。

因此`UserData[16] * 256 + UserData[17]`== `0 * 256 + 0`=`0`

此外，在 VB 中，你有

```
OrderNumber = System.Text.Encoding.ASCII.GetChars(UserData, 0, 8) 
```

在 C# 中你有

```
OrderNumber = System.Text.Encoding.ASCII.GetString(UserData, 0, 8).ToString(); 
```

你对其他两个字符串也这样做吗？如果是简单的重写，为什么会有区别？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:14:03.820

以下代码（在 LinQPad 中）按预期工作。给我们一些样本数据来调查。

```
var testData = new Dictionary<string, int> {
   { "01234567890123", 0 },
   { "012345678901234", 0 },
   { "0123456789012345", 0 },
   { "01234567890123456", 13824 },
   { "012345678901234567", 13879 },
   { "0123456789012345678", 13879 },
   { "01234567890123456789", 13879 },
   { "012345678901234567890", 13879 }
};

foreach (var pair in testData){
    var testCase = pair.Key;
    var expected = pair.Value;

    var UserData = System.Text.Encoding.ASCII.GetBytes(testCase);

    if (UserData.GetUpperBound(0) < 17)
    {
        Array.Resize(ref UserData, 18);
    }
    else if (UserData.GetUpperBound(0) > 17)
    {
        Array.Resize(ref UserData, 18);
    }

    var OrderNumber = System.Text.Encoding.ASCII.GetString(UserData, 0, 8).ToString();
    var OrderRelease = System.Text.Encoding.ASCII.GetString(UserData, 8, 2).ToString();
    var HeatNumber = System.Text.Encoding.ASCII.GetString(UserData, 10, 6).ToString();
    var PieceNumber = UserData[16] * 256 + UserData[17];

    (new { 
        TestCase = testCase, 
        OrderNumber, 
        OrderRelease, 
        HeatNumber, 
        PieceNumber, 
        Success = PieceNumber == expected 
    }).Dump();  

} 
```

# java - add(Interface) 和 addConfigured(Interface) 方法真的有效吗？

> ID：12690635
> 
> 赞同：2
> 
> 时间：2012-10-02T12:52:41.303
> 
> 标签：java, ant

我正在尝试在自定义 Ant 标记中添加嵌套类型，如[http://ant.apache.org/manual/develop.html#nested-elements](http://ant.apache.org/manual/develop.html#nested-elements)中所述，但我不断收到异常`outer doesn't support the nested "innerone" element.`

我整个早上都在谷歌上搜索，但我找不到任何示例、教程或任何使用这种模式来解决这个问题的帮助，我开始怀疑它是否已经实现了！

我的构建文件：

```
<?xml version="1.0"?>
<project name="test" default="tester" basedir="../../..">
  <taskdef name="outer" classname="tester.Outer" classpath="target/classes"/>
  <typedef name="innerone" classname="tester.Outer$InnerOne" classpath="target/classes"/>
  <typedef name="innertwo" classname="tester.Outer$InnerTwo" classpath="target/classes"/>

  <target name="tester">
    <innerone/>
    <innertwo/>
    <outer>
      <innerone/>
      <innertwo/>
    </outer>
  </target>
</project> 
```

Java代码：

```
public class Outer extends Task
{
  private List<Inner> inners = new ArrayList<Inner>();
  public void add(Inner inner) {
    inners.add(inner);
    System.out.println("Add: ");
  }
  public void addConfigured(Inner inner) {
    inners.add(inner);
    System.out.println("AddConfigured: ");
  }
  public void execute() {
    for (Inner inner : inners) {
      System.out.println("Inner: " + inner.getMsg());
    }
  }

  public interface Inner {
    String getMsg();
  }
  public static class InnerOne implements Inner {
    public String getMsg() {
      return "One";
    }
  }
  public static class InnerTwo implements Inner {
    public String getMsg() {
      return "Two";
    }
  }
} 
```

使用这些方法`addInner(Inner inner)`并且`addConfiguredInner(Inner inner)`两者都有效，但我希望能够添加实现 Inner 接口的内部标记，而不必在 Outer 类中为它们显式创建方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:45:35.050

传统上，嵌套元素名称必须在方法名称中指定，例如将嵌套元素定义`<inner>`为`addInner(Inner inner)` or `addConfiguredInner(Inner inner)`（正如您所提到的，它可以工作）。

Ant 1.5 引入了`DynamicConfigurator`接口，它提供了一种动态定义属性和嵌套元素名称的机制。尽管这并不能完全提供您正在寻找的功能，但您可能仍然会发现它很有用。例如，您的`Outer`任务可以按如下方式实现。

```
import org.apache.tools.ant.BuildException;
import org.apache.tools.ant.DynamicConfigurator;
import org.apache.tools.ant.Task;

import java.util.ArrayList;
import java.util.List;

public class Outer extends Task implements DynamicConfigurator
{
  private List<Inner> inners = new ArrayList<Inner>();

  public void setDynamicAttribute(String name, String value)
      throws BuildException {
    throw new BuildException("Attribute " + name + " is not supported");
  }

  public Inner createDynamicElement(String elementName) {
    Inner newInner = null;
    if (elementName.equalsIgnoreCase("innerone")) {
      newInner = new InnerOne();
    } else if (elementName.equalsIgnoreCase("innertwo")) {
      newInner = new InnerTwo();
    } else {
      throw new BuildException("Unsupported nested element: " + elementName);
    }
    inners.add(newInner);
    return newInner;
  }

  public void execute() {
    for (Inner inner : inners) {
      System.out.println("Inner: " + inner.getMsg());
    }
  }

  public interface Inner {
    String getMsg();
  }

  public static class InnerOne implements Inner {
    public String getMsg() {
      return "One";
    }
  }

  public static class InnerTwo implements Inner {
    public String getMsg() {
      return "Two";
    }
  }
} 
```

## 构建文件（摘录）

```
<taskdef name="outer" classname="tester.Outer" classpath="target/classes"/>

<target name="outer-test">
  <outer>
    <innerone />
    <innertwo />
  </outer>
</target> 
```

## 输出

```
outer-test:
    [outer] Inner: One
    [outer] Inner: Two

BUILD SUCCESSFUL
Total time: 0 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:54:37.123

您的示例与您链接的示例非常相似，来自 ant 手册。它们之间有什么区别，一个有效，另一个无效？这是一段很长的路，但是一步一步地让它们越来越相似，我发现了区别。

**`typedef`里面必须有给定的`loaderRef`属性**，等于`classpath`。[typedef 任务](http://ant.apache.org/manual/Tasks/typedef.html)的文档说：

> 使用它允许使用同一个加载器加载多个任务/类型，以便它们可以相互调用。

可能使用 antlib 会使这个问题不存在，因为它是在一个 ant 脚本行中声明的。

最后答案是：是的，它们确实有效:)

# ibm-mq - z/OS 上的 Websphere MQ 7.1 和大消息

> ID：12690638
> 
> 赞同：1
> 
> 时间：2012-10-02T12:52:49.410
> 
> 标签：ibm-mq, middleware

如何在 z/OS 上处理大于 4MB 的消息？我不能使用分段，因为 z/OS 不支持它。

一些操作系统甚至以 kB 为单位有更大的限制。

在这种情况下，常见的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:10:14.150

您没有达到 z/OS 限制，而是达到了 WebSphere MQ 上的默认最大消息长度。请注意，[信息中心](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/sc11190_.htm)说“在 z/OS 上，指定范围从零到 100 MB（104 857 600 字节）的值”。

要解决此问题，请更改消息可能通过的任何队列和通道上的 MAXMSGL。不要忘记更新死信队列的 MAXMSGL 以及传输队列。

请注意，MAXMSGL 可以拯救您！许多人将该值设置为可能的最大大小，然后用完磁盘空间。如果应用程序达到诸如 MAXMSGL 或 MAXDEPTH 之类的软限制，则效果是有限的并且通常可以恢复。如果磁盘空间用完，整个 QMgr 就会突然停止，所有连接的应用程序都会受到影响。

有关这方面的更多信息，请参阅 developerWorks 上的[Mice and Elephants](http://ibm.co/iHlMg)文章。

**UDATE：**
根据询问 HP NonStop 和 WMQ V5.3 细节的评论进行更新。

[请参阅WMQ 文档库](http://ibm.co/WMQv53Docs)中的 WMQ V5.3 手册。第二个链接是 HP NonStop 上 WMQ V5.3 的系统管理指南。消息长度在 P4 上讨论：

> 默认的最大消息长度为 4 MB，但您可以将其增加到 100 MB 的最大长度（其中 1 MB 等于 1 048 576 字节）。在实践中，消息长度可能受以下限制：
> 
> *   为接收队列定义的最大消息长度
> *   为队列管理器定义的最大消息长度
> *   队列定义的最大消息长度
> *   发送或接收应用程序定义的最大消息长度
> *   消息可用的存储量

因此，HP NonStop 上或与 WMQ V5.3 相关联的最大消息长度没有任意小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:07:13.900

也许消息分组可以帮助你。当然，应用程序必须进行定制。

# c++ - __COUNTER__ 在变量名中

> ID：12690639
> 
> 赞同：2
> 
> 时间：2012-10-02T12:52:49.463
> 
> 标签：c++, macros, clang, c-preprocessor

我看过这个问题：

[如何使用宏在 C++ 中生成随机变量名称？](https://stackoverflow.com/questions/1082192/how-to-generate-random-variable-names-in-c-using-macros)

有以下答案：[https ://stackoverflow.com/a/1675203/551045](https://stackoverflow.com/a/1675203/551045)

我试图用clang来实现它。

这里是我的报关表：

```
#define TRACE(stream) FuncTrace x#__COUNTER__ (llvm::errs(), "hallo", 1) 
```

我尝试了所有变体`x##__COUNTER__; x ## __COUNTER__`等等，但似乎都没有奏效。

这可能是一个clang错误吗？clang[帮助](http://clang.llvm.org/docs/LanguageExtensions.html)页面说它有`__COUNTER__`宏。

最后我需要这样的宏：

```
#define TRACE(stream) FuncTrace x#__COUNTER__ (stream, __FUNCTION__, __LINE__) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T13:02:03.493

1.  要将两个标记连接成一个，请使用`##`运算符。`#`运算符用于将标记转换为字符串。

2.  `x ## __COUNTER__`只会产生`x__COUNTER__`. 您需要先完全扩展`__COUNTER__`。一种可能的方法是添加更多间接，例如

    ```
    #define YTRACE(x, y) FuncTrace x##y (llvm::errs(), __FUNCTION__, __LINE__)
    #define XTRACE(x, y) YTRACE(x, y)
    #define TRACE(x) XTRACE(x, __COUNTER__) 
    ```

# c++ - C++ 逻辑恒常性和从 const 方法按值返回

> ID：12690640
> 
> 赞同：1
> 
> 时间：2012-10-02T12:52:53.210
> 
> 标签：c++, constants

有一个类通过值返回的另一个连接类的对象公开其一些功能和数据。例如，通过 begin() 和 end() 方法返回迭代器类的容器类型。它按值返回迭代器，所以

```
iterator begin();
const iterator begin() const; 
```

不起作用，我们需要两个单独的类 iterator 和 const_iterator 但是代码重用的原则被违反了，因为我们需要在两个类中实现类似的功能。

有什么解决方法吗？如何在代码重用和保留恒定性之间找到折衷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:56:36.080

`const` 不。除了创建函数和类的非常量版本之外，我从未见过它以任何其他方式完成。

# c# - 如何查看视频链接是否存在或为空

> ID：12690641
> 
> 赞同：0
> 
> 时间：2012-10-02T12:52:53.620
> 
> 标签：c#, javascript, html5-video

我总是在播放从金融网站到我的网站的相同视频链接。每天链接中唯一的变化是视频的日期。实际一天的视频并不总是同时可用。我必须展示可用的最新视频。我的问题是查看今天的链接是否存在的代码是什么，以便我将使用今天的链接，或者如果为空，我将只显示最新的可用视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:58:34.960

**C＃**

最好从服务器而不是客户端执行此操作。查看该文件是否在 C# 中。如果不给它一个就是。[文件已存在](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

**JavaScript**

这不是很好，因为这意味着额外的 http 请求。如果文件在同一个域中，则对其进行 Ajax 调用。使用 HEAD 请求。如果它得到文件，你就知道它在那里。如果它出错，你知道它不存在。

# spring - spring mongo数据异常，通过xml配置

> ID：12690642
> 
> 赞同：4
> 
> 时间：2012-10-02T12:53:01.773
> 
> 标签：spring, mongodb

希望有人可以帮助我。我正在使用 mongo 处理 spring-data，但不知何故它给了我一个运行时错误：

> 2012 年 10 月 2 日 8:15:24 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh 信息：刷新 org.springframework.context.support.ClassPathXmlApplicationContext@54d57bcb：启动日期 [Tue Oct 02 20:15:24 SGT 2012]；上下文层次结构的根 2012 年 10 月 2 日 8:15:24 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions INFO：从类路径资源加载 XML bean 定义 [mongodb/configuration/mongo-config.xml] 线程中的异常“main” org.springframework.beans.factory.BeanDefinitionStoreException：从类路径资源 [mongodb/configuration/mongo-config.xml] 解析 XML 文档时出现意外异常；嵌套异常是 org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.mongodb.config. MongoNamespaceHandler] for namespace [http://www.springframework.org/schema/data/mongo]：处理程序类文件或依赖类的问题；嵌套异常是 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412) 中的 java.lang.NoClassDefFoundError: org/springframework.beans.factory 中的 org/springframework/data/repository/config/RepositoryConfigurationExtension。 xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334) at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302) at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader. java:174) 在 org.springframework.beans.factory.support。springframework.beans.FatalBeanException：命名空间 [http://www.springframework.org/schema/data/mongo] 的无效 NamespaceHandler 类 [org.springframework.data.mongodb.config.MongoNamespaceHandler]：处理程序类文件或依赖类有问题; 嵌套异常是 org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:139) 的 java.lang.NoClassDefFoundError: org/springframework.beans.factory 的 org/springframework/data/repository/config/RepositoryConfigurationExtension。 xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1426) 在 org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1421) 在 org.springframework.beans.factory.xml。

我的 mongo-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mongo="http://www.springframework.org/schema/data/mongo"
   xsi:schemaLocation="http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/data/mongo
      http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
<mongo:db-factory dbname="testuserexample" host="localhost" port="27017" />

<bean id="mongoTemplate">
    <constructor-arg ref="mongoDbFactory" />
</bean>

<mongo:repositories base-package="mongodb.repository" /> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:08:32.377

如果您使用的是 Maven，则应向 spring-data-mongodb 库添加依赖项

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-mongodb</artifactId>
    <version>1.1.0.M1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:17:11.210

我也遇到同样的错误。我为我找到了解决方案。问题是我已经更改了我的 pom.xml 并为两个依赖项明确设置了最后一个版本（1.1.0.RELEASE）：

1.  弹簧数据-MongoDB
2.  弹簧数据公共核心

我得到同样的异常： NoClassDefFoundError: ...RepositoryConfigurationExtension

我已经删除了 pom.xml 中的第二个依赖项，因为第一个“spring-data-mongodb”为第二个添加了隐式依赖项。所以，现在 Maven 自动抓取 spring-data-commons-core 依赖（1.4.0.RELEASE）并且它工作正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T11:49:27.437

如果您使用的是 Maven，这是唯一需要的依赖项：-

```
<dependency>
<groupId>org.springframework.data</groupId>
<artifactId>spring-data-mongodb</artifactId>
<version>1.2.0.RELEASE</version>
</dependency> 
```

应用程序上下文文件中需要的配置：-

```
 <bean id="mongo" class="org.springframework.data.mongodb.core.MongoFactoryBean">
        <property name="host" value="localhost" />
    </bean>
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg ref="mongo" />
        <constructor-arg value="test" />
    </bean> 
```

# java - 无法将 dom 文档写入 xml 文件

> ID：12690645
> 
> 赞同：2
> 
> 时间：2012-10-02T12:53:03.923
> 
> 标签：java, xml, xml-parsing

我有 spring mvc 项目，我上传 xml 文件并尝试通过 DOM 将其写入我的 xml，但遇到此异常。当我尝试在通常的项目中执行相同的过程时 - 一切正常。不明白为什么会这样。。

```
 type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

root cause 

java.lang.NullPointerException
    org.apache.xml.utils.TreeWalker.dispatachChars(TreeWalker.java:303)
    org.apache.xml.utils.TreeWalker.startNode(TreeWalker.java:447)
    org.apache.xml.utils.TreeWalker.traverse(TreeWalker.java:202)
    org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:343)
    com.mycompany.xmlloader.xmlHandler.DOMParser.saveToCatalog(DOMParser.java:147)
    com.mycompany.xmlloader.service.XMLServiceImpl.updateCatalog(XMLServiceImpl.java:48)
    com.mycompany.xmlloader.controller.XMLController.uploadToCatalog(XMLController.java:47)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

和代码片段：

```
TransformerFactory transfac = TransformerFactory.newInstance();
        Transformer trans = transfac.newTransformer();
        trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        trans.setOutputProperty(OutputKeys.INDENT, "yes");

        StreamResult result = new StreamResult(catalogFile.toURI().getPath());
        Source source = new DOMSource(doc);
        trans.transform(source, result); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-09T12:24:07.987

您的问题的可能原因是您的`Text`节点中的`Document`数据集为`null`. （有关该问题的讨论，请参见[此处](https://forums.oracle.com/forums/thread.jspa?threadID=1625122)和[此处](http://www.mail-archive.com/xalan-dev@xml.apache.org/msg00519.html)。）

您可以`Document`使用以下代码检查您的诊断是否正确：

```
public static void checkDoc(Node n) {
  if (n instanceof Text) {
    if (((Text) n).getData() == null) {
      System.err.println("null data!!!!");
    }
  }

  NodeList l = n.getChildNodes();
  for (int i = 0; i < l.getLength(); ++i) {
    checkDoc(l.item(i));
  }
} 
```

致电`checkDoc`您的`Document`：

```
checkDoc(doc); 
```

如果您看到任何输出，那么您现在知道 NPE 的直接原因。那么问题的解决方案是：不要使用空数据构建`Document`包含节点。`Text`

# c++ - 带有静态库的基于 Linux 的操作系统：我能做什么？

> ID：12690646
> 
> 赞同：0
> 
> 时间：2012-10-02T12:53:05.563
> 
> 标签：c++, c, linux, static-libraries

我有一个基于 linux 的操作系统，其中有很多编译为静态库的系统库。

如何在我的应用程序中使用这些库，并将它们*链接*到我的最终二进制文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:58:30.663

您可以像使用共享库一样使用它们，除了静态链接。[GCC 简介 - 共享库和静态库](http://www.network-theory.co.uk/docs/gccintro/gccintro_25.html)文章将帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:22:58.200

我很难理解。如果你正在链接类似的东西

```
g++ -o myprog myprog.o obj1.o obj2.o -L/path/to/lib -L/path2/to/lib -llib1 -llib2 -lib3 
```

如果库路径中存在 liblib1.so（/path/to/lib、/path2/to/lib 以及一组系统特定目录），则通过 gcc 或 g++ 包装器调用的链接器将执行“正确的事情（tm）”系统库可能在哪里），它将被动态链接，如果不是 liblib1.a 将被静态链接。唯一需要注意的是，如果静态库中存在相互依赖关系（lib1需要lib2，lib2需要lib1），可能需要重复几次或者使用ld的`--start-group`and`--end-group`选项标记需要的库一起考虑。

# security - 如何修复某些 Java 代码中的“路径操作漏洞”？

> ID：12690652
> 
> 赞同：17
> 
> 时间：2012-10-02T12:53:28.513
> 
> 标签：security, fortify, path-manipulation

下面的简单 java 代码得到 Fortify Path Manipulation 错误。请帮我解决这个问题。我挣扎了很久。

```
public class Test {
    public static void main(String[] args) {
        File file=new File(args[0]);
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-12-06T14:12:33.223

在使用之前尝试规范化 URL

[https://docs.oracle.com/javase/7/docs/api/java/net/URI.html#normalize()](https://docs.oracle.com/javase/7/docs/api/java/net/URI.html#normalize())

```
Path path = Paths.get("/foo/../bar/../baz").normalize(); 
```

或使用*org.apache.commons.io.FilenameUtils中的 normalize*

[https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FilenameUtils.html#normalize(java.lang.String)](https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FilenameUtils.html#normalize(java.lang.String))

```
Stirng path = FilenameUtils.normalize("/foo/../bar/../baz"); 
```

对于这两个结果将是`\baz`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-02T13:14:50.233

查看[路径操作](https://www.owasp.org/index.php/Path_Manipulation)的 OWASP 页面，它说

> 攻击者可以指定文件系统操作中使用的路径

您正在打开由用户给定输入定义的文件。您的代码几乎是漏洞的完美示例！任何一个

1.  不要使用上面的代码（不要让用户指定输入文件作为参数）
2.  让用户从您提供的文件列表中进行选择（带有整数选择的文件数组）
3.  根本不要让用户提供文件名，删除可配置性
4.  接受漏洞，但通过检查文件名来防范它（尽管这是最糟糕的事情 - 无论如何有人可能会绕过它）。

或者重新考虑您的应用程序的设计。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-14T16:51:03.390

即使路径/文件不像属性文件那样来自用户输入，Fortify 也会标记代码。处理这些问题的最佳方法是首先规范化路径，**然后**根据允许路径的白名单对其进行验证。

**坏的：**

```
public class Test {
    public static void main(String[] args) {
        File file=new File(args[0]);
    }

} 
```

**好的：**

```
public class Test {
    public static void main(String[] args) {
        File file=new File(args[0]);
        if (!isInSecureDir(file)) {
              throw new IllegalArgumentException();
            }
            String canonicalPath = file.getCanonicalPath();
        if (!canonicalPath.equals("/img/java/file1.txt") &&
            !canonicalPath.equals("/img/java/file2.txt")) {
           // Invalid file; handle error
        }

        FileInputStream fis = new FileInputStream(f);
    } 
```

来源：[https ://www.securecoding.cert.org/confluence/display/java/FIO16-J.+Canonicalize+path+names+before+validating+them](https://www.securecoding.cert.org/confluence/display/java/FIO16-J.+Canonicalize+path+names+before+validating+them)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T18:54:18.507

仅允许输入中的 alnum 和句点。这意味着您过滤掉会使您的文件易受攻击的控制字符“..”、“/”、“\”。例如，一个人应该无法输入 /path/password.txt。

完成后，重新扫描，然后运行 ​​Fortify AWB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T17:15:12.670

假设您正在针对 Web 应用程序运行 Fortify，在您对可能被标记为“不是问题”的 Fortify 漏洞进行分类期间。推理是 A) 显然这是测试代码和 B) 除非您有多重人格障碍，否则您在运行该测试应用程序时不会对自己进行路径操纵漏洞利用。

如果很常见的是，很少有测试实用程序提交到会产生这种误报的存储库。

至于您的编译错误，通常归结为类路径问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-19T15:17:37.083

我有一个解决 Fortify Path Manipulation 问题的方法。

它抱怨的是，如果您从外部来源获取数据，那么攻击者可以使用该来源来操纵您的路径。因此，使攻击者能够删除文件或以其他方式危害您的系统。

解决此问题的建议方法是使用可信目录的白名单作为有效输入；并且，拒绝其他一切。

此解决方案在生产环境中并不总是可行的。所以，我建议另一种解决方案。解析输入以获取可接受字符的白名单。从输入中拒绝任何您不希望出现在路径中的字符。它可以被删除或更换。

下面是一个例子。这确实通过了 Fortify 审查。重要的是要记住这里返回的是文字而不是被检查的字符。Fortify 会跟踪来自原始输入的部分。如果您使用任何原始输入，您仍然可能会收到错误。

```
public class CleanPath {

    public static String cleanString(String aString) {
        if (aString == null) return null;
        String cleanString = "";
        for (int i = 0; i < aString.length(); ++i) {
            cleanString += cleanChar(aString.charAt(i));
        }
        return cleanString;
    }

    private static char cleanChar(char aChar) {

        // 0 - 9
        for (int i = 48; i < 58; ++i) {
            if (aChar == i) return (char) i;
        }

        // 'A' - 'Z'
        for (int i = 65; i < 91; ++i) {
            if (aChar == i) return (char) i;
        }

        // 'a' - 'z'
        for (int i = 97; i < 123; ++i) {
            if (aChar == i) return (char) i;
        }

        // other valid characters
        switch (aChar) {
            case '/':
                return '/';
            case '.':
                return '.';
            case '-':
                return '-';
            case '_':
                return '_';
            case ' ':
                return ' ';
        }
        return '%';
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-26T09:43:42.497

我们有如下代码，它在 fortify 中引发了路径操作高类别问题。

```
String.join(delimeter,string1,string2,string2,string4); 
```

我们的程序是处理 AWS S3 存储桶，因此，我们进行了如下更改并且它有效。

```
com.amazonaws.util.StringUtils.join(delimeter,string1,string2,string2,string4); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-08-21T07:15:14.300

使用正则表达式验证文件路径和文件名

```
fileName = args[0];
final String regularExpression = "([\\w\\:\\\\w ./-]+\\w+(\\.)?\\w+)";
Pattern pattern = Pattern.compile(regularExpression);
boolean isMatched = pattern.matcher(fileName).matches(); 
```

# php - 在网页中添加文本

> ID：12690658
> 
> 赞同：0
> 
> 时间：2012-10-02T12:53:48.997
> 
> 标签：php, html

所以我做了一个有表单的网页，并找到了一些相对简单的代码来获取表单的内容，检查它是否有错误或不完整的部分，然后返回错误或发送它。不幸的是，它在新页面中返回错误，而不是在表单页面本身中返回，这正是我想要它做的。

HTML 表单：

```
 <form name="contactform" method="post" action="send_form.php">
        <table width="450px">
            <tr>
                <td valign="top">
                    <label for="first_name">First Name &#42</label>
                </td>
                <td valign="top">
                    <input type="text" name="first_name" maxlength="50" size="30">
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <label for="last_name">Last Name &#42</label>
                </td>
                <td valign="top">
                    <input type="text" name="last_name" maxlength="50" size="30">
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <label for="email">Email Address &#42</label>
                </td>
                <td valign="top">
                    <input type="text" name="email" maxlength="80" size="30">
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <label for="telephone">Telephone Number</label>
                </td>
                <td valign="top">
                    <input type="text" name="telephone" maxlength="30" size="30">
                </td>
            </tr>
            <tr>
                <td valign="top">
                    <label for="comments">Comments &#42</label>
                </td>
                <td valign="top">
                    <textarea name="comments" maxlength="1000" cols="25" rows="6"></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align:center">
                    <h6>An astrisk (&#42) denotes a required field.</h6>
                    <input type="submit" value="Submit" />
                </td>
            </tr>
        </table>
    </form> 
```

PHP代码：

```
if(isset($_POST['email'])) {

$email_to = "my@email.com";
$email_subject = "Comments";

function died($error) {
    //This is where I think the code that prints to the same webpage should be rather than putting on a new page, which is what I does now
    echo "There were error(s) found with the form you submitted. Please review these errors and resubmit.";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['first_name']) ||
    !isset($_POST['last_name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['telephone']) ||
    !isset($_POST['comments'])) {
    died('We are sorry, but there appears to be a problem with the form you submitted.');       
}

$first_name = $_POST['first_name']; // required
$last_name = $_POST['last_name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['telephone']; // not required
$comments = $_POST['comments']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'The Email Address you entered does not appear to be valid.<br />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message .= 'The First Name you entered does not appear to be valid.<br />';
}
if(!preg_match($string_exp,$last_name)) {
$error_message .= 'The Last Name you entered does not appear to be valid.<br />';
}
if(strlen($comments) < 2) {
$error_message .= 'The Comments you entered do not appear to be valid.<br />';
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Telephone: ".clean_string($telephone)."\n";
$email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  

<!-- email success html -->
<h4>Thank you for contacting us. We will be in touch with you very soon.</h4>
<h4><a class="submitSuccess" href="index.php">Return to Index</a></h4>

} 
```

我基本上希望它在文本框上方打印一行文本，说明表单未正确填写。现在它会创建一个带有错误的新网页。

旁注：应该有一些 php 括号，但是代码没有正确显示，所以我把它们拿出来了。不过，您会了解代码的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:25:07.887

查看您的代码，PHP 页面的基本行为是检查是否存在任何验证错误。如果是，则显示错误消息，否则发送电子邮件。

您要做的是显示带有验证错误的原始页面。

通常，至少在我知道的几乎每个框架中，这是通过使用重定向来完成的。基本上，如果没有错误，我们会将用户重定向到成功页面。

如果有错误，我们将错误信息+用户数据放在一个会话变量中并重定向到原始表单。

基本代码结构如下所示：

**验证脚本：**

```
if ( validate_form($_POST))
{
     /*
         Form validation succeeded, 
         Do whatever processing you want (Like sending an email)
     */    
     header('location: success.php'); // redirect to the success page
}
else
{
     /*
         Form validation failed        
     */
     session_start(); 
     $error = ...;
     $form_data = array('error' => $error, 'username' => $_POST['username'], ...);
     $SESSION['form_data'] = $form_data;
     header('location: form.php');

} 
```

**表单脚本：**

```
<?php
     session_start(); 
     if( isset($SESSION['form_data']))
     { 
         $username = $SESSION['form_data']['username'];
         $errors = $SESSION['form_data']['error'];
     }
     else
     {
         $username = '';
         $errors = '';          
     }

?>

<form name="contactform" method="post" action="send_form.php">
      <input type="text" name="username" value=<?php $username ?> >       
      <label for="errors"><?php $errors ?></label>   
</form> 
```

PS：这段代码是一个简单的演示，显然不是100%正确的。你必须添加更多的异常处理，更多的安全检查......但你明白了。

我建议您尝试使用轻量级 MVC 框架来了解如何以正确的方式完成此操作。您甚至可以查看这些框架的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:16:49.267

通过说：

```
<form name="contactform" method="post" action="send_form.php"> 
```

您正在告诉 HTML 表单转到 web 浏览器中的 send_form.php。然后，在 send_form.php 中，执行逻辑以查看表单的内容是否正确，因此它会在新页面上显示回显。

您将不得不在原始 HTML 页面中使用一些脚本 (javascript/php) 来检查表单是否填写正确。

看到这样的东西：[http ://www.thesitewizard.com/archive/validation.shtml](http://www.thesitewizard.com/archive/validation.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:09:36.583

当您的表单数据未通过您的验证服务器端时，您调用函数 dead() 并在最后使用 die()。请检查 PHP 帮助以确保 die() 满足您的需求。Cause die 告诉 PHP 停止解析 PHP 并将页面原样发送到客户端。所以你的表格永远不会出现。

Personnaly：我使用 die 函数仅用于调试目的

# php - PHP 数组值和 strpos 函数

> ID：12690662
> 
> 赞同：1
> 
> 时间：2012-10-02T12:54:09.330
> 
> 标签：php

我一直在使用这段代码来比较两个值，我得到了完全匹配的项目，唯一的问题是不匹配的项目。

```
$filter1 = "red,green,blue,yellow";         
$parts1 = explode(',', $filter1);

$filter2 = "red,green,blue";        
$parts2 = explode(',', $filter2);

for($i=0; $i< count($parts1); $i++)
{
  for($j=0; $j< count($parts2); $j++)
  {
    if(strpos($parts1[$i],$parts2[$j]) !== false)
    {
      $match[] = $parts1[$i];
    }
    else
    {
      $nomatch[] = $parts2[$j];
    }
  }
}

print_r($match);
echo "<br>";
print_r($nomatch); 
```

我得到的结果是

```
Array ( [0] => red [1] => green [2] => blue ) 
Array ( [0] => green [1] => blue [2] => red [3] => blue [4] => red [5] => green [6] =>     
red [7] => green [8] => blue ) 
```

数组 1 给出了完全匹配的值，但数组 2 给出了荒谬的结果而不是黄色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:00:36.990

干得好：

```
for($i=0; $i< count($parts1); $i++)
{
  $matched = false;
  for($j=0; $j< count($parts2); $j++)
  {
    if(strpos($parts1[$i],$parts2[$j]) !== false)
    {
      $match[] = $parts1[$i];
      $matched = true;
      break;
    }
  }
  if (!$matched)
  {
    $nomatch[] = $parts1[$i];
  }
} 
```

演示：[http ://codepad.org/J6lmOUVO](http://codepad.org/J6lmOUVO)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:58:19.637

因为您是嵌套循环，所以对于外循环的每次迭代，您必须遍历内循环的每个元素。您看到的不匹配的无关值都是那些额外的内部迭代。

如果您必须允许与 部分匹配，请`strpos()`使用以下命令：

```
foreach ($parts1 as $p) {
  // Flag that the current value has been matched
  $matched = FALSE;
  foreach ($parts2 as $p2) {
    if (strpos($p, $p2) !== FALSE) {
      $matches[] = $p;
      $matched = TRUE;
    }
  }
  // If the loop was proceed with no match, add to non-matches
  if (!$matched) {
    $nomatch[] = $p;
  }
}

var_dump($matches);
array(3) {
  [0] =>
  string(3) "red"
  [1] =>
  string(5) "green"
  [2] =>
  string(4) "blue"
}
var_dump($nomatch);
array(1) {
  [0] =>
  string(6) "yellow"
} 
```

# php - 将mysql查询结果分组到php生成的表中，并将表行的结果与相同的id一起添加

> ID：12690663
> 
> 赞同：0
> 
> 时间：2012-10-02T12:54:12.830
> 
> 标签：php, mysql

我有一个大的 MySQL 表，如下所示：

```
job_number        time_on        time_off
111               18:50:10       18:51:18
222               18:13:09       19:33:42
111               07:12:04       08:30:20
333               10:34:03       12:53:10
444               14:54:25       12:11:04
444               10:31:48       16:34:53
111               17:21:41       20:21:41
(type: Varchar)   (type: time)   (type: time) 
```

我想找到每个 job_number 的 time_on 和 time_off 字段之间的差异，并在 $total_time 列中回显它们。
如果有多行具有相同的 job_number (111, 444)，我希望能够找到该行的 time_on 和 time_off 之间的差异，但也可以将这些值相加。我想确保每个唯一工作编号只有一行，合并时间如下：

```
Job    Total Time // ($total_time = $time_off - $time_on)
111    04:19:34 // ((18:51:18 - 18:50:10) + (08:30:20 - 07:12:04) +  (20:21:41 - 17:21:41))
222    01:20:33 // (19:33:42 - 18:13:09)
333    02:19:07 // (12:53:10 - 10:34:03)
444    08:46:26 // ((16:34:53 - 10:31:48) + (14:54:25 - 12:11:04)) 
```

结果将被格式化为一个简单的表格，如下所示：

```
<table>  
    <tr>  
        <th>Job</th>  
        <th>Total Time</th>  
    </tr>  
    <tr>  
        <td>111</th>  
        <td>04:19:34</th>
    </tr>
    <tr>  
        <td>222</th>  
        <td>01:20:33</th>
    </tr>
    ...
</table> 
```

我该怎么做呢？我宁愿使用 PHP 来实现这一点。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:58:30.363

您可以在 SQL 中执行此操作：

```
SELECT   job_number,
         SEC_TO_TIME(SUM(TIME_TO_SEC(time_off) - TIME_TO_SEC(time_on)))
FROM     my_table
GROUP BY job_number 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/acbdd/1/0)上查看。

# javascript - 如何自动刷新数据表的页面？

> ID：12690664
> 
> 赞同：0
> 
> 时间：2012-10-02T12:54:13.803
> 
> 标签：javascript, jsf, jquery, datatable, primefaces

我正在使用 Primefaces 3.4。

当我在数据库中添加新数据时，我必须刷新数据表或页面才能看到更改。

如何让页面自动刷新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:03:47.830

在大多数情况下，在or的`update="datatableID"`属性中添加数据表 id`p:ajax``p:commandButton`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:11:21.203

如果您需要完全自动更新并且无需用户采取任何操作（例如按下按钮），则需要使用投票

“轮询组件在指定的时间间隔内进行 ajax 调用。”

```
<h:form id="form">  
<h:outputText id="txt_count" value="#{counterBean.count}" />  

<p:poll interval="3"   
        listener="#{counterBean.increment}" update="txt_count" />  
</h:form> 
```

这是 primefaces 展示示例，您可以从中获得灵感

# asp.net-mvc - Proxem 斯坦福解析器 asp MVC

> ID：12690665
> 
> 赞同：-1
> 
> 时间：2012-10-02T12:54:20.460
> 
> 标签：asp.net-mvc, parsing, stanford-nlp

我正在为斯坦福解析器使用 Proxem 包装器，并且在 ASP.NET MVC 3 和 4 应用程序中遇到解析问题。它抛出

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an      invocation. ---> System.NullReferenceException: Object reference not set to an instance of an object.
 at Proxem.Antelope.Parsing.Sentence.a(List`1 A_0)
 at Proxem.Antelope.Parsing.Sentence..ctor(SerializationInfo info, StreamingContext ctxt)
--- End of inner exception stack trace --- 
```

在 WPF 和控制台应用程序中它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T08:57:26.063

我修好了它。Constructor Parser(string path) 正在`Parser(string path, int poolsize)`使用 poolsize调用构造函数`value = 1`。使用`Parser(string path, int poolsize)`带值的构造函数 -> Parser(yourPath, 0) 使其适用于 MVC 和 WCF。

# java - 从 jforum 2.1.6 升级到 2.1.9 后缺少主题

> ID：12690667
> 
> 赞同：1
> 
> 时间：2012-10-02T12:54:28.620
> 
> 标签：java, forum

我刚刚升级到`Jforum 2.1.9`，我可以，`login`但是虽然它说`Our users have posted a total of 11,205`消息 ，但没有列出消息、主题或论坛。我正在使用`Tomcat 7.0.30`and `MySql 5.0.77`，我进行了如下升级：

*   在`mysqldump`我的数据库上运行

*   创建了一个新数据库并填充了`mysqldump`

*   修改了我现有的`2.1.6`安装以使用新数据库并检查它是否仍然有效

*   解压`jforum-2.1.9.zip`到本地目录

*   更改`2.1.6`安装以查看其原始数据库

*   针对`mysql_2.1.6_to_2.1.7.sql`新数据库运行

*   针对`mysql_2.1.7_to_2.1.8.sql`新数据库运行（无法看到 2.1.8 到 2.1.9 的升级脚本）

*   已创建`META-INF/context.xml`（它定义了新数据库的数据源，不确定是否需要）

*   `WEB-INF/config/jforum-custom.conf`从我的`2.1.6`安装复制到同一位置`WEB-INF/config`的`jforum2.1.9`目录中并修改为指向新数据库

*   修改了 forum.link 和 homepage 链接以指向新的部署路径

*   部署了这个修改后的版本

所以我现在已经部署了：

```
http://machinename/forum (2.1.6 pointing to old database)
http://machinename/forum2.1.9 (2.1.9 pointing to new database) 
```

正如我之前所说，我可以访问`http://machinename/forum2.1.9`并登录，但没有列出任何主题/消息等。同样，如果我进入管理控制面板用户和组看起来不错，但论坛是空的

如果我去数据库本身并查看 jforum_topics 和 jforum_forums 数据就在那里。

然后我注意到 Admin 中的 lucene 部分，并且文档数为零。所以我配置了一个日期范围并创建了一个新索引，文档数字段增加了。如果我然后回到论坛并进行搜索，搜索表明它找到了一些文档，但仍然没有显示任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:56:57.143

如果您从 2.1.6 升级到 2.1.9，并且您只是升级数据库更改，您还需要在您上传文档的数据目录中进行更改，并且所有内容都已上传。

所以下载 2.1.7 源代码，运行 2.1.6 到 2.17 脚本并检查它是否正常工作，如果这工作重复两次（2.1.7-> 2.18 和 2.1.8 -> 2.1.9。

并[检查这个](http://jforum.net/upgrading217to218.jsp)

# .net - 用于 twitter v1.1 API 的 .net 包装器

> ID：12690669
> 
> 赞同：3
> 
> 时间：2012-10-02T12:54:46.600
> 
> 标签：.net, twitter

我找不到 twitter 1.1 API 的任何 .net 库

是否有任何适用于 .net 的库可用于 twitter api 1.1 版？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:01:30.783

我最近将 LINQ to Twitter 升级到 Twitter v1.1 API： http: [//linqtotwitter.codeplex.com/](http://linqtotwitter.codeplex.com/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T13:05:01.137

[https://dev.twitter.com/docs/twitter-libraries#dotnet](https://dev.twitter.com/docs/twitter-libraries#dotnet) 还有：[http ://code-inside.de/blog/2009/04/20/howto-twittern-mit-c/](http://code-inside.de/blog/2009/04/20/howto-twittern-mit-c/)

# macos - pg gem 找不到本机扩展——使用 Homebrew 安装的 PostgreSQL

> ID：12690677
> 
> 赞同：0
> 
> 时间：2012-10-02T12:55:15.470
> 
> 标签：macos, postgresql, bundler, homebrew

我在 Mac OS X 10.8.2 上，几个小时前我重新安装了它，对随后的问题感到沮丧。

我已经安装了 Homebrew，当我运行时`brew doctor`，它说`Your system is raring to brew`.

我有带有命令行实用程序的最新 Xcode。

我已经使用 Homebrew 安装了 PostgreSQL。

```
steven$ ls /usr/local/Cellar/postgresql/9.2.1
COPYRIGHT           README              homebrew.mxcl.postgresql.plist  lib
INSTALL_RECEIPT.json        bin             include             share

steven$ psql --version
psql (PostgreSQL) 9.2.1
iMac-001EC20A3C44-5:9.2.1 steven$ which psql
/usr/local/bin/psql 
```

我的 Gemfile 中有一个 Rail 应用程序`gem 'pg'`，但我无法安装 gem：

```
steven$ bundle install
Fetching source index for http://rubygems.org/
Installing pg (0.14.1) with native extensions /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/installer.rb:482:in `build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-pg-config=/usr/pgsql-9.1/bin/pg_config
Using config values from /usr/pgsql-9.1/bin/pg_config
sh: /usr/pgsql-9.1/bin/pg_config: No such file or directory
sh: /usr/pgsql-9.1/bin/pg_config: No such file or directory
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

它似乎在寻找 pg_config 和 libpq，它们很容易找到：

```
steven$ ls /usr/local/Cellar/postgresql/9.2.1/bin
...     pg_config       ...
steven$ ls /usr/local/Cellar/postgresql/9.2.1/include
...     libpq           ... 
```

所以我尝试通过我能想到的每个配置选项，但没有一个工作：

```
steven$ sudo gem install pg -- --with-pg-config="/usr/local/Cellar/postgresql/9.2.1/bin"
Password:
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin
Using config values from /usr/local/Cellar/postgresql/9.2.1/bin
sh: /usr/local/Cellar/postgresql/9.2.1/bin: is a directory
sh: /usr/local/Cellar/postgresql/9.2.1/bin: is a directory
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

steven$ sudo gem install pg -- --with-pg-config="/usr/local/Cellar/postgresql/9.2.1/bin" --with-libpqlib="/usr/local/Cellar/postgresql/9.2.1/include"
Password:
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin --with-libpqlib=/usr/local/Cellar/postgresql/9.2.1/include
Using config values from /usr/local/Cellar/postgresql/9.2.1/bin
sh: /usr/local/Cellar/postgresql/9.2.1/bin: is a directory
sh: /usr/local/Cellar/postgresql/9.2.1/bin: is a directory
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -l/usr/local/Cellar/postgresql/9.2.1/include... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

steven$ sudo gem install pg --with-pg-config="/usr/local/Cellar/postgresql/9.2.1/bin" --with-libpqlib="/usr/local/Cellar/postgresql/9.2.1/include"
ERROR:  While executing gem ... (OptionParser::InvalidOption)
    invalid option: --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin

steven$ sudo gem install pg --with-pg-config="/usr/local/Cellar/postgresql/9.2.1/bin/" --with-libpqlib="/usr/local/Cellar/postgresql/9.2.1/include/"
ERROR:  While executing gem ... (OptionParser::InvalidOption)
    invalid option: --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/

steven$ sudo gem install pg --with-pg-config='/usr/local/Cellar/postgresql/9.2.1/bin/' --with-libpqlib='/usr/local/Cellar/postgresql/9.2.1/include/'
ERROR:  While executing gem ... (OptionParser::InvalidOption)
    invalid option: --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/

steven$ sudo gem install pg -- --with-pg-config='/usr/local/Cellar/postgresql/9.2.1/bin/' --with-libpqlib='/usr/local/Cellar/postgresql/9.2.1/include/'
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/ --with-libpqlib=/usr/local/Cellar/postgresql/9.2.1/include/
Using config values from /usr/local/Cellar/postgresql/9.2.1/bin/
sh: /usr/local/Cellar/postgresql/9.2.1/bin/: is a directory
sh: /usr/local/Cellar/postgresql/9.2.1/bin/: is a directory
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -l/usr/local/Cellar/postgresql/9.2.1/include/... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

steven$ sudo gem install pg --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/ --with-libpqlib=/usr/local/Cellar/postgresql/9.2.1/include
ERROR:  While executing gem ... (OptionParser::InvalidOption)
    invalid option: --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/
iMac-001EC20A3C44-5:testivate steven$ sudo gem install pg --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/pg_config

ERROR:  While executing gem ... (OptionParser::InvalidOption)
    invalid option: --with-pg-config=/usr/local/Cellar/postgresql/9.2.1/bin/pg_config 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:23:10.067

仅供参考，我最终通过卸载从 PostgreSQL 和 pg gem 到 Bundler、Homebrew 甚至 RVM 的所有内容来解决这个问题，然后一次又一次地安装每一件。可能我删除的内容超出了我必须删除的内容，但是一旦我将它们重新组合在一起，一切都会正常进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:10:17.450

我不知道这是否对其他人有帮助，但我在这里遇到了完全相同的问题，PG gem 没有编译。我的应用程序在 Heroku 上，在本地我使用 RVM、Homebrew，但对于 Postgres，我使用的是**Postgresapp.com**

我还使用**JewerlyBox**为我提供了一个围绕 RVM 的漂亮 GUI 包装器。我将我的 Ruby 1.9.3-p194 与 1.9.3-p286 进行了比较，发现我已将 286 设置为通用。我对卸载所有东西犹豫不决，所以我只是卸载了 Ruby 并重新安装了仅设置为 64 位的选项（平台：“x86_64-darwin12.2.0”）。

使用此选项重新安装 Ruby 后，PG gem 安装顺利，我又恢复了快乐。希望这可以帮助某人。

![在此处输入图像描述](../Images/6f6fce625b587b8992f4659453efa6be.png)

# postgresql - 原生扩展 Dart

> ID：12690680
> 
> 赞同：7
> 
> 时间：2012-10-02T12:55:30.390
> 
> 标签：postgresql, web, native, dart

我正在尝试在 dart 中为 postgresql 构建本机扩展。我已经在 .o 中编译了 CC 文件，然后在 .so 中编译（我猜是共享对象）。它现在命名为 libpsql.so，我将它放在与 .dart 文件相同的目录中。dart 文件的第一行是#import(dart-ext:libpsql); 但它一直告诉我资源不可用。

我的飞镖代码

```
#library("psql");

#import("dart-ext:libpsql_dart");

class Database {
  var mDb;
  var mUser;
  var mDbname;
  var mPasswd;
  var mHost;
  var mPort;
  var mTable;

  //String toString() => "<PostgreSQL: $user@$_host:$_port/$_table>";
  Database(host,user,passwd,dbname) : this.mUser = user, this.mHost = host, this.mPasswd = passwd, this.mDbname = dbname  {
    mDb = _connect(host,user,passwd,dbname);
  }

}
_connect(host,user,passwd,dbname) native 'Connect'; 
```

这是我的 C++ 代码。

```
#include <string.h>
#include <stdio.h>
#include <libpq-fe.h>
#include "dart_api.h"

Dart_NativeFunction ResolveName(Dart_Handle name, int argc);

DART_EXPORT Dart_Handle psql_dart_Init(Dart_Handle parent_library) {
  if (Dart_IsError(parent_library)) return parent_library;

  Dart_Handle result_code =
      Dart_SetNativeResolver(parent_library, ResolveName);
  if (Dart_IsError(result_code)) return result_code;

  return Dart_Null();
}

Dart_Handle HandleError(Dart_Handle handle) {
 if (Dart_IsError(handle)) Dart_PropagateError(handle);
 return handle;
}
void Connect(Dart_NativeArguments args) {
    Dart_EnterScope();
    PGconn *conn;
    const char *conninfo = "user=postgres;password=postgres;host=localhost;port=5432;dbname=reviewdb";
    conn = PQconnectdb(conninfo);

    /* Check to see that the backend connection was successfully made */
    if (PQstatus(conn) != CONNECTION_OK)
    {
        fprintf(stderr, "Connection to database failed: %s",
                PQerrorMessage(conn));
        PQfinish(conn);
    }

  Dart_Handle result = HandleError(Dart_NewInteger((int64_t) conn));
  Dart_SetReturnValue(args, result);

  Dart_ExitScope();
}

Dart_NativeFunction ResolveName(Dart_Handle name, int argc) {
  assert(Dart_IsString8(name));
  const char* cname;
  Dart_Handle check_error = Dart_StringToCString(name, &cname);
  if (Dart_IsError(check_error)) Dart_PropagateError(check_error);
  Dart_NativeFunction result = NULL;
  if (strcmp("Connect", cname) == 0) result = Connect;
  Dart_ExitScope();
  return result;
} 
```

Html 脚本包括

```
<script type="application/dart" src="web/lib/psql.dart"></script> 
    <script type="application/dart" src="web/test_dart.dart"></script> 
```

最后，我的编译命令行：

```
g++ -fPIC --verbose -I/home/{linux user}/Documents/dart/dart-sdk/include/ -lpq -I/usr/include/postgresql -c psql_dart.cc

gcc -shared -Wl,-soname,libpsql.so -o libpsql.so psql_dart.o 
```

测试新代码后，我评论了我的函数 Connect 如下：

```
void Connect(Dart_NativeArguments args) {
    Dart_EnterScope();
//    PGconn *conn;
//    const char *conninfo = "user=postgres password=postgres host=localhost port=5432";
//    conn = PQconnectdb(conninfo);
//
//    /* Check to see that the backend connection was successfully made */
//    if (PQstatus(conn) != CONNECTION_OK)
//    {
//        fprintf(stderr, "Connection to database failed: %s",
//                PQerrorMessage(conn));
//        PQfinish(conn);
//        exit(1);
//    }
//  PQfinish(conn);

  Dart_Handle result = HandleError(Dart_NewInteger( 0));
  Dart_SetReturnValue(args, result);

  Dart_ExitScope();
} 
```

输出 ：

```
worked?
Segmentation fault (core dumped) 
```

而且我仍然知道SegFault吗？

我的 gdb 堆栈跟踪：

```
Starting program: /home/<user>/Documents/dart/dart-sdk/bin/dart test_dart.dart
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
worked?

Program received signal SIGSEGV, Segmentation fault.
dart::Api::NewHandle (isolate=0x948a40, raw=0x7ffff7f80021) at runtime/vm/dart_api_impl.cc:114
114 runtime/vm/dart_api_impl.cc: No such file or directory.
(gdb) bt
#0  dart::Api::NewHandle (isolate=0x948a40, raw=0x7ffff7f80021) at runtime/vm/dart_api_impl.cc:114
#1  0x000000000042e121 in dart::Dart_Invoke (target=<optimized out>, name=0x959b90, number_of_arguments=<optimized out>, arguments=<optimized out>) at runtime/vm/dart_api_impl.cc:3543
#2  0x00000000004097ee in main (argc=<optimized out>, argv=<optimized out>) at runtime/bin/main.cc:724 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:28:43.243

在玩弄了一些代码并安装了 postgresql-dev-9.1 包之后，这就是我所在的位置。目前它仍然没有运行，但是它是由于链接错误而不是由于导入本身造成的。

请注意对您的 C++ 文件的更改：我将您的初始化函数从：重命名`psql_dart_Init`为`psql_Init`

```
// libpsql.cc
#include <string.h>
#include <stdio.h>
#include <libpq-fe.h>
#include "dart_api.h"

Dart_NativeFunction ResolveName(Dart_Handle name, int argc);

DART_EXPORT Dart_Handle psql_Init(Dart_Handle parent_library) {
  if (Dart_IsError(parent_library)) return parent_library;

  Dart_Handle result_code =
      Dart_SetNativeResolver(parent_library, ResolveName);
  if (Dart_IsError(result_code)) return result_code;

  return Dart_Null();
}

Dart_Handle HandleError(Dart_Handle handle) {
 if (Dart_IsError(handle)) Dart_PropagateError(handle);
 return handle;
}

void Connect(Dart_NativeArguments args) {
    Dart_EnterScope();
    PGconn *conn;
    const char *conninfo = "user=postgres;password=postgres;host=localhost;port=5432;dbname=reviewdb";
    conn = PQconnectdb(conninfo);

    /* Check to see that the backend connection was successfully made */
    if (PQstatus(conn) != CONNECTION_OK)
    {
        fprintf(stderr, "Connection to database failed: %s",
                PQerrorMessage(conn));
        PQfinish(conn);
    }

  Dart_Handle result = HandleError(Dart_NewInteger((int64_t) conn));
  Dart_SetReturnValue(args, result);

  Dart_ExitScope();
}

Dart_NativeFunction ResolveName(Dart_Handle name, int argc) {
  assert(Dart_IsString8(name));
  const char* cname;
  Dart_Handle check_error = Dart_StringToCString(name, &cname);
  if (Dart_IsError(check_error)) Dart_PropagateError(check_error);
  Dart_NativeFunction result = NULL;
  if (strcmp("Connect", cname) == 0) result = Connect;
  Dart_ExitScope();
  return result;
} 
```

以下是我的第一个飞镖文件：

```
// psql.dart
#library("psql");

#import("dart-ext:psql");

class Database {
  var mDb;
  var mUser;
  var mDbname;
  var mPasswd;
  var mHost;
  var mPort;
  var mTable;

  //String toString() => "<PostgreSQL: $user@$_host:$_port/$_table>";
  Database(host,user,passwd,dbname) : this.mUser = user, this.mHost = host, this.mPasswd = passwd, this.mDbname = dbname  {
    mDb = _connect(host,user,passwd,dbname);
  }

}
_connect(host,user,passwd,dbname) native 'Connect'; 
```

然后实际的非常小的应用程序（命令行而不是基于 dartium）来测试它。

```
// test.dart
#import('psql.dart');

main() {
  var database = new Database('localhost', 'mbutler', 'test', 'test');

  if(database != null) {
    print('worked?');
  }
} 
```

我使用以下命令一次性编译和链接，它确实可以正常工作。我出现了段错误，因为我没有要连接的有效数据库，但以下内容确实正确加载了本机库：

```
g++ -O2 -DDART_SHARED_LIB -I/home/<user>/dart/dart-sdk/include -rdynamic -fPIC -shared libpsql.cc -lpq -I/usr/include/postgresql -o libpsql.so 
```

（感谢[dart-sqlite](https://github.com/sam-mccall/dart-sqlite "飞镖-sqlite")构建脚本能够拼凑我需要的链接）

# c# - 如何拒绝特定用户的图像路径

> ID：12690684
> 
> 赞同：0
> 
> 时间：2012-10-02T12:55:44.927
> 
> 标签：c#, asp.net-mvc

我的网站有一个名为 uploads 的文件夹，其中每个客户都有一个文件夹。我的问题是，拒绝用户 A 查看来自用户 B 的上传的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:11:04.660

您可以通过更改 web.config 来做到这一点。请参阅此处的文档：http: [//support.microsoft.com/kb/815151](http://support.microsoft.com/kb/815151)

基本上你的 web.config 看起来像：

```
<?xml version="1.0"?>
<configuration>
    <location path="uploads/UserA">
        <system.web>
            <authorization>
                <allow users="UserA"/>
                <deny users="*"/>
            </authorization>
        </system.web>
    </location>
    <location path="uploads/UserB">
        <system.web>
            <authorization>
                <allow users="UserB"/>
                <deny users="*"/>
            </authorization>
        </system.web>
    </location>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:16:11.203

如果用户无权访问所请求的路径，也许可以考虑使用 HttpHandler 来拦截请求并生成 403（或您想要做的任何事情）。

或者，您可以将 Global.asax 中的逻辑放在 BeginRequest 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:20:26.817

您可以对文件夹使用 NTFS 权限，强制用户进行身份验证。我在 2000 年为一个网站做了这个。虽然在这种情况下，这就像用大炮杀死蚊子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:37:04.730

假设您可能具有以下数据结构：
您可以将文件名写入数据库列。
因此，您可以使用 True/False 添加一个名为“Allow-Anonymous”的列。

现在在从服务器访问您的内容时，检查 db 表，如果`Allow-Anonymous`是`False`并且`Visiting-User`是其他`owner`然后拒绝页面显示。否则，您可能会显示内容。

```
DataBase mock:
Id   Data    Path             OwnerId     AllowAnonymous    Status
1    Data-A  ~/upload/Data-A  1           False             True 
```

代码模拟：

```
if(AllowAnonymous == True && UserId == OwnerId && Status == True)
  // Show data on page
else
  // Redirect to deny page 
```

# asp.net-mvc - 如何使用 MVC（4）创建（图像）标题徽标

> ID：12690687
> 
> 赞同：5
> 
> 时间：2012-10-02T12:55:49.937
> 
> 标签：asp.net-mvc, razor, header, actionlink, graphical-logo

我正在为使用 MVC (4) 的 Razor 语法而苦苦挣扎，希望能找到可以帮助我解决问题的人。

我想要一个可点击的徽标（图像）并创建了以下代码。除了两件事之外，这有效。我没有看到图像显示，其次，当在另一个控制器中时，路由出错（http4 错误）。

这就是我现在的做法：

**剃刀：**

```
<h1>@Html.ActionLink("siteHeader", "Index", null, new { @class = "site-logo"})</h1> 
```

*或者*

```
<h1>@Html.ActionLink("siteHeader", "Index", "Home", new { @class = "site-logo"})</h1> 
```

例如，当在不同的控制器（帐户/购物车/等）中并单击徽标时，会导致 404。

**CSS：**

/*网站标题标志*/

```
a.site-logo  {     
 background: url(images/Solosoft.png) no-repeat top left;
 display: block;       
 width: 100px;       
 height: 100px;       
 text-indent: -9999px;  /*hides the link text*/ 
  } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:16:48.143

试试这个：

```
@Html.ActionLink("siteHeader", "Index", "Home", null, new { @class = "site-logo"}) 
```

这是：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

链接：[msdn](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:14:05.860

我得到了问题的原因！

我们的编码没有问题，问题是有一个类覆盖了我们的图像集

Site.css 中有这行

```
.site-title a, .site-title a:hover, .site-title a:active {
    *background: none;* <=comment this out and the bg will show or remove the .site-title a
    color: #c8c8c8;
    outline: none;
    text-decoration: none;
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T13:08:36.403

wizzardz说的是正确的。自定义 css 文件中的背景样式被 site.css 中的样式覆盖。

试试这个，`!important`- 用于优先显示网页中的样式。

在您的 custom.css 页面中，

```
a.site-logo  {     
     background: url(images/Solosoft.png) no-repeat top left **!important**;
     display: block;       
     width: 100px;    
     height: 100px;       
     text-indent: -9999px;  /*hides the link text*/ 
} 
```

无需更改 site.css 中的任何内容

# ant - Cobertura Ant 合并报告

> ID：12690688
> 
> 赞同：2
> 
> 时间：2012-10-02T12:55:55.303
> 
> 标签：ant, merge, cobertura

我需要合并 Cobertura 生成的 coverage.xml 报告。Cobertura 按以下结构创建报告：

```
./coberturaReports/module1/coverage.xml
./coberturaReports/module2/coverage.xml 
```

我从谷歌找到了一些零碎的东西，但我仍然无法理解它。有谁知道如何将这两个 Cobertura coverage.xml 文件合并为一个？

# sql - SQL Server - 返回 xml 列的 xml 子节点

> ID：12690689
> 
> 赞同：10
> 
> 时间：2012-10-02T12:55:56.130
> 
> 标签：sql, sql-server, xml, sqlxml

给定带有列的表 T：

```
ID UNIQUEIDENTIFIER
CreatedDate DATETIME
XmlData XML 
```

XmlData 的结构如下：

```
<application>
    <details firstname="first" lastname="last">
        <statement>statement</statement>
    </details>
    <educationHistory>
        <education subject="subject1" />
        <education subject="subject2" />
    </educationHistory>
    <experienceHistory>
        <examiningExperienceHistory>
            <examiningExperience module="module1" />
            <examiningExperience module="module2" />
        </examiningExperienceHistory>
        <teachingExperienceHistory>
            <teachingExperience module="module1" />
            <teachingExperience module="module2" />
        </teachingExperienceHistory>
    </experienceHistory>
</application> 
```

我需要像这样返回一个提取物：

```
ID Date       FirstName LastName Education    ExaminingExp TeachingExp
-----------------------------------------------------------------------
1  02-10-2012 First     Last     <xmlextract> <xmlextract> <xmlextract> 
```

到目前为止，我有：

```
SELECT ID,
       CreatedDate [Date],
       XmlData.value('(application/details/@firstname)[1]','varchar(max)') [FirstName],
       XmlData.value('(application/details/@lastname)[1]','varchar(max)') [LastName]
FROM T 
```

我正在与你最后三栏作斗争。对于每条记录，我需要列出教学/考试经验和教育。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T13:00:59.273

用于`.query`提取 xml。

例如

```
select 
XmlData.query('/application/educationHistory/*'),
XmlData.query('/application/experienceHistory/examiningExperienceHistory/*'),
XmlData.query('/application/experienceHistory/teachingExperienceHistory/*') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T13:06:30.440

试试这个：

```
SELECT ID, Created [DATE] 
XmlData.value('(application/details/@firstname)[1]','varchar(max)') [FirstName],
XmlData.value('(application/details/@lastname)[1]','varchar(max)') [LastName],
XmlData.query('/application/educationHistory'),
XmlData.query('/application/experienceHistory/examiningExperienceHistory'),
XmlData.query('/application/experienceHistory/teachingExperienceHistory')
FROM T 
```

# c++ - 异常可以通过异常指针“复制”吗？

> ID：12690698
> 
> 赞同：14
> 
> 时间：2012-10-02T12:56:25.437
> 
> 标签：c++, exception-handling, c++11

对于一些多线程代码，我想捕获所有异常并将它们传递给单个异常处理线程。这是消息传递框架：

```
#include <exception>

struct message
{
    virtual ~message() = default;
    virtual void act() = 0;
};

struct exception_message : message
{
    std::exception_ptr ep;

    virtual void act()
    {
        std::rethrow_exception(ep);
    }

    // ...
}; 
```

这是用例：

```
try
{
    // ...
}
catch (...)
{
    exception_message em { std::current_exception(); }
    handler_thread.post_message(em);
} 
```

处理程序线程遍历它的所有消息和调用`act()`，它可以安装自己的 try/catch 块来处理所有发布的异常。

现在我想知道如果我将此消息的副本发送给多个接收者会发生什么。一般来说，消息可能有任意数量的收件人，因此我不想对异常传播消息进行任意限制。这`exception_ptr`被记录为“共享所有权”智能指针，并且`rethrow_exception`“不会引入数据竞争”。

所以我的问题是：通过将活动异常存储在 中`exception_ptr`、复制指针并`rethrow_exception`多次调用来复制活动异常是否合法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T13:16:13.883

根据我对标准的理解，它是合法的。但是我会注意到，重新抛出*不会复制*异常，因此如果您修改它并同时从其他线程访问它，共享异常对象本身就会提交给数据竞争。如果异常是只读的（一旦抛出），那么您应该没有任何问题。

关于储存期限：

> **15.1 抛出异常[except.throw]**
> 
> *4*异常对象的内存以未指定的方式分配，除非在 3.7.4.1 中注明。如果一个处理程序通过重新抛出而退出，则控制权将传递给另一个处理程序以处理相同的异常。异常对象在异常的最后一个剩余活动处理程序以除重新抛出以外的任何方式退出，或`std::exception_ptr`引用异常对象的最后一个类型 (18.8.5) 的对象被销毁后销毁，以较晚者为准。在前一种情况下，销毁发生在处理程序退出时，在处理程序的异常声明中声明的对象（如果有）销毁之后立即发生。在后一种情况下，销毁发生在`std::exception_ptr`返回的析构函数之前。

关于数据竞赛：

> **18.8.5 异常传播[propagation]**
> 
> *7*为了确定是否存在数据竞争，对`exception_ptr`对象的操作应仅访问和修改`exception_ptr`对象本身，而不是它们引用的异常。使用引用相同异常对象`rethrow_exception`的`exception_ptr`对象不应引入数据竞争。[注意：如果`rethrow_exception`重新抛出相同的异常对象（而不是副本），则对该重新抛出的异常对象的并发访问可能会引入数据竞争。引用特定异常的对象数量的变化`exception_ptr`不会引入数据竞争。——尾注]

关于`rethrow`：

> `[[noreturn]] void rethrow_exception(exception_ptr p);`
> 
> *9 要求*：`p`不得为空指针。
> 
> *10 次抛出*：p 引用的异常对象。

# c# - 如何在不等待繁重进程完成的情况下显示 WPF 页面或窗口

> ID：12690699
> 
> 赞同：1
> 
> 时间：2012-10-02T12:56:29.243
> 
> 标签：c#, .net, wpf, xbap

我正在开发 WPF 浏览器应用程序。问题是我必须在开始时加载一些繁重的服务，这会导致在加载页面组件之前看到白页几秒钟。有没有办法通过加载页面而不等待繁重的进程完成来避免这种情况？

这是我现在正在尝试的事情，但它没有用：

```
 public Page1()
    {
        InitializeComponent();
    }

    private void Page_Loaded_1(object sender, RoutedEventArgs e)
    {
        // Initialize and configure kinect
        // This takes some seconds
    } 
```

我在想 page_loaded 事件是在页面的所有组件完成加载之后发生的。但它仍然在等待进程完成，并且在开始时我得到几秒钟的白页......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:34:35.950

您可以使用 BackgroundWorkers 来处理长时间运行的操作。这将在任务运行时保持 UI 响应。去这里了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:34:46.183

可以使用 BackGroundWorker 并且可以在任一事件中调用它。
您不能在后台构建或加载 UI 控件。
在后台构建数据和（非 UI）对象，然后绑定回调。

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# android - 有没有办法从 Robolectric 中删除影子类？

> ID：12690703
> 
> 赞同：2
> 
> 时间：2012-10-02T12:56:48.493
> 
> 标签：android, testing, shadow, robolectric

[Robolectric](http://pivotal.github.com/robolectric)有一个名为的影子类`ShadowMatrix`，但我不想使用它。如何将其从 robolectric 中移除？我希望改用原始`Matrix`课程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:27:05.220

它行不通。在 android.jar 中只有类和方法的存根（没有主体的方法）。这就是您使用 Robolectric 在 Android 系统之外运行测试的原因。

您可以做的是从[github 存储库](https://github.com/pivotal/robolectric)创建一个分支，更改 ShadowMatrix 实现，构建并在您的项目中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T12:12:07.930

`Matrix`这可能对有关`ShadowCountDownTimer`. 我能够通过提供一个不会改变/添加以下行为的替代阴影来绕过阴影`CountDownTimer`：

```
// Shadow with no additional behavior
@Implements(CountDownTimer.class)
public static class DefaultCountDownTimer {
}

// Use this shadow just for this test
@Config(shadows = DefaultCountDownTimer.class)
@Test
public void testSomething() {
} 
```

# ruby-on-rails-3 - 需要一种在 Rails 中跨多个属性的高效自动完成策略

> ID：12690709
> 
> 赞同：1
> 
> 时间：2012-10-02T12:57:04.723
> 
> 标签：ruby-on-rails-3, autocomplete

我有一个用于提交订单的表单，我需要一个自动完成字段来搜索相关客户模型中的三个属性：名字、姓氏和 customer_number（而不是 customer.id）。我知道在`rails3-jquery-autocomplete`这里找到的 gem [http://github.com/crowdint/rails3-jquery-autocomplete](http://github.com/crowdint/rails3-jquery-autocomplete)，并且让它运行良好，但我想到了一个问题——有没有更有效的方法来使自动完成工作没有每次都必须查询数据库？

我想到的另一个解决方案是在客户模型中创建一个新的索引属性——称之为 autocomplete_data。每当通过通常的新客户表单添加新客户时，`:after_create`回调可能会填充该字段。这会加快性能吗？还是我想多了？

**更新**

我很尴尬地说我只是第一次搜索不够努力——我认为这实际上回答了我的问题：
[Rails：通过名字和姓氏有效搜索](https://stackoverflow.com/questions/6147492/rails-efficiently-searching-by-both-firstname-and-surname)

# c++ - 尝试为 c++ 互操作自动生成我的库时出错

> ID：12690711
> 
> 赞同：0
> 
> 时间：2012-10-02T12:57:23.973
> 
> 标签：c++, python, pybindgen

我正在使用 pybindgen 创建 python 和 c++ 之间的链接代码。或者至少如果我可以让它与我的代码一起工作，我会这样做。python 文件在运行时会产生以下错误。我可以满足 pybindgen 或解决这些问题的任何方式都将非常有帮助。

```
pygccxml.parser.source_reader.gccxml_runtime_error_t: Error occured while running GCC-XML: In file included from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstdio:44,
                 from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/fstream:43,
                 from C:\Users\Richard\workspace\PyBindGen\src\/tokeniser.hpp:13,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:11,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdio.h:191: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
... [some recuring size_t errors removed because size too big]

c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdio.h:413: error: expected constructor, destructor, or type conversion before 'fwrite'
In file included from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/fstream:43,
                 from C:\Users\Richard\workspace\PyBindGen\src\/tokeniser.hpp:13,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:11,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstdio:109: error: '::fread' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstdio:115: error: '::fwrite' has not been declared
In file included from C:\Users\Richard\workspace\PyBindGen\src\/tokeniser.hpp:14,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:11,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:345: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:345: error: expected constructor, destructor, or type conversion before 'wcstombs'
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:348: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:348: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:348: error: 'size_t' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:349: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:349: error: expected constructor, destructor, or type conversion before 'mbstowcs'
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:350: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:350: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:350: error: 'size_t' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:355: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:355: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:355: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:355: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:355: error: initializer expression list treated as compound expression
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:356: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/stdlib.h:356: error: reference to 'size_t' is ambiguous
... [some recuring size_t errors removed because size too big]
In file included from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstring:44,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/lexical_cast.hpp:32,
                 from C:\Users\Richard\workspace\PyBindGen\src\/dataitem.hpp:9,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:24,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/string.h:36: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/string.h:36: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/string.h:36: error: 'size_t' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/string.h:37: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
... [some recuring size_t errors removed because size too big]
In file included from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/lexical_cast.hpp:32,
                 from C:\Users\Richard\workspace\PyBindGen\src\/dataitem.hpp:9,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:24,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstring:86: error: '::strcspn' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstring:88: error: '::strlen' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstring:92: error: '::strspn' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstring:94: error: '::strxfrm' has not been declared
In file included from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/ctime:44,
                 from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/bits/locale_facets_nonio.h:39,
                 from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/locale:43,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/lexical_cast.hpp:47,
                 from C:\Users\Richard\workspace\PyBindGen\src\/dataitem.hpp:9,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:24,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/time.h:124: error: reference to 'size_t' is ambiguous
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/stddef.h:212: error: candidates are: typedef unsigned int size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/mingw32/bits/c++config.h:155: error:                 typedef unsigned int std::size_t
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../include/time.h:124: error: expected constructor, destructor, or type conversion before 'strftime'
In file included from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/bits/locale_facets_nonio.h:39,
                 from c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/locale:43,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/lexical_cast.hpp:47,
                 from C:\Users\Richard\workspace\PyBindGen\src\/dataitem.hpp:9,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:24,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/ctime:74: error: '::strftime' has not been declared
In file included from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/assert.hpp:81,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/array.hpp:44,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/lexical_cast.hpp:146,
                 from C:\Users\Richard\workspace\PyBindGen\src\/dataitem.hpp:9,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:24,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstdlib:122: error: '::mbstowcs' has not been declared
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/include/c++/cstdlib:134: error: '::wcstombs' has not been declared
In file included from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/range/end.hpp:24,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/range/functions.hpp:19,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/range/iterator_range_core.hpp:26,
                 from C:/Users/Richard/Desktop/code/boost_1_51_0/boost/lexical_cast.hpp:155,
                 from C:\Users\Richard\workspace\PyBindGen\src\/dataitem.hpp:9,
                 from C:\Users\Richard\workspace\PyBindGen\src\/includes.hpp:24,
                 from C:\Users\Richard\workspace\PyBindGen\src\file.hpp:9:
C:/Users/Richard/Desktop/code/boost_1_51_0/boost/range/detail/implementation_help.hpp: In function 'const char* boost::range_detail::str_end(const char*, const char*)':
C:/Users/Richard/Desktop/code/boost_1_51_0/boost/range/detail/implementation_help.hpp:37: error: 'strlen' was not declared in this scope 
```

我的 .py 文件是

```
#! /usr/bin/env python

import sys
import os

import pybindgen
from pybindgen.typehandlers import base as typehandlers
from pybindgen import (ReturnValue, Parameter, Module, Function, FileCodeSink)
from pybindgen import (CppMethod, CppConstructor, CppClass, Enum)
from pybindgen.gccxmlparser import ModuleParser
from pybindgen.function import CustomFunctionWrapper
from pybindgen.cppmethod import CustomCppMethodWrapper

import generator_common

def my_module_gen():
    out = FileCodeSink(sys.stdout)
    pygen_file = open(sys.argv[2], "wt")
    module_parser = ModuleParser('eyon', '::')
    module_parser.enable_anonymous_containers = True

    module = module_parser.parse([sys.argv[1]], includes=['"file.hpp"'], pygen_sink=FileCodeSink(pygen_file),
                                 include_paths=["C:\\Users\\Richard\\Desktop\\code\\boost_1_51_0"])
    pygen_file.close()

    generator_common.customize_module(module)

    module.generate(out)

def main():
    if sys.argv[1] == '-d':
        del sys.argv[1]
        import pdb
        pdb.set_trace()
        my_module_gen()
    else:
        import os
        if "PYBINDGEN_ENABLE_PROFILING" in os.environ:
            try:
                import cProfile as profile
            except ImportError:
                my_module_gen()
            else:
                print >> sys.stderr, "** running under profiler"
                profile.run('my_module_gen()', 'foomodulegen-auto.pstat')
        else:
            my_module_gen()            

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:46:47.683

这不是一件容易的工作，但它就是这样。

我删除了所有“使用命名空间标准；” 以及我的代码中的任何其他“使用”项目，因此将“std::”用于标准库中的任何内容。这摆脱了 size_t 名称冲突问题。这似乎解决了很多问题，可能是标准库的 c++ 标准/MinGW 实现不能与 GCC_XML 很好地配合使用。换句话说，c++ 标准允许 GCC_XML 无法理解的命名空间声明，因此您会遇到冲突。

请注意，这似乎不会影响命名空间中的内容。所以这很好用。

```
namespace Hello
{
    void func()
    {
        printf("Hello World");
    }
} 
```

其他问题来自我没有向 pybindgen 声明关于 boost 库依赖的足够多的内容。这是修改后的 .py 文件。

```
#! /usr/bin/env python

import sys
import os

import pybindgen
from pybindgen.typehandlers import base as typehandlers
from pybindgen import (ReturnValue, Parameter, Module, param, Function, FileCodeSink)
from pybindgen import (CppMethod, CppConstructor, CppClass, Enum)
from pybindgen.gccxmlparser import ModuleParser
from pybindgen.function import CustomFunctionWrapper
from pybindgen.cppmethod import CustomCppMethodWrapper

import generator_common

def my_module_gen():
    out = FileCodeSink(sys.stdout)
    pygen_file = open(sys.argv[2], "wt")

    #setup the module
    module = Module('eyon', cpp_namespace='::')
    module.add_include('"file.hpp"')
    module.add_include('"boost/lexical_cast.hpp"')

    module_parser = ModuleParser('eyon', '::')
    module_parser.enable_anonymous_containers = True

    module = module_parser.parse([sys.argv[1]], includes=['"file.hpp"'], pygen_sink=FileCodeSink(pygen_file),
                                 include_paths=["C:\\Users\\Richard\\Desktop\\code\\boost_1_51_0"])
    pygen_file.close()

    module.generate(out)

def main():
    if sys.argv[1] == '-d':
        del sys.argv[1]
        import pdb
        pdb.set_trace()
        my_module_gen()
    else:
        import os
        if "PYBINDGEN_ENABLE_PROFILING" in os.environ:
            try:
                import cProfile as profile
            except ImportError:
                my_module_gen()
            else:
                print >> sys.stderr, "** running under profiler"
                profile.run('my_module_gen()', 'foomodulegen-auto.pstat')
        else:
            my_module_gen()            

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:32:16.590

只是猜测，但从您的错误消息来看，您可能遇到了路径问题。注意 src 和 tokeniser 之间的路径标记。`C:\Users\Richard\workspace\PyBindGen\src\/tokeniser.hpp:13`

# javascript - 带有自定义滚动条的彩盒

> ID：12690713
> 
> 赞同：0
> 
> 时间：2012-10-02T12:57:30.280
> 
> 标签：javascript, scrollbar, colorbox

我正在尝试使用带有自定义滚动条的颜色框的每个人。我正在使用 jquery_custom_scrollbar 自定义滚动条。当它通过颜色框弹出时，我遇到了问题。`$(".pop_me").colorbox({rel:'pop_me', width:"65%"})`

它会弹出，但滚动条是正常的，但是在静态时它会提供自定义滚动条

> 无论如何，我把事情搞砸了，我可以建议我如何为颜色框自定义滚动条。

谢谢你的帮助，陌生人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:22:27.417

在彩盒中

```
$(".pop_me").colorbox({rel:'pop_me', width:"65%", onComplete:function(){
// inistialise your scroll pane
}}); 
```

希望这会成功

# android - 如何从 developer.android.com 打开项目？

> ID：12690714
> 
> 赞同：0
> 
> 时间：2012-10-02T06:10:01.013
> 
> 标签：android, eclipse

[我从http://developer.android.com/training/basics/location/geocoding.html](http://developer.android.com/training/basics/location/geocoding.html)下载了“LocationAware.zip” 。现在如何在 Eclipse 中打开这个项目？

我想在 Eclipse 中打开它，然后点击运行，看看如何在模拟器中运行这个应用程序。

（Android 新手 - 如果问题太基本，请见谅）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:34:35.330

要运行您在 Eclipse 中提到的项目，点击
- File->New->Project
- 选择“Android Project From Existing Code”
- 选择根目录，点击完成。

创建项目后可能需要注意的一些额外步骤（如果有错误）
1\. 点击 Project->Clean（这样会自动生成资源“R”）
2\. 如果有一些 XML 错误，请尝试更改 Android构建目标（右键单击项目文件夹->属性->Android）

# android - 如果禁用网络，移动类型始终显示找到的网络

> ID：12690719
> 
> 赞同：0
> 
> 时间：2012-10-02T12:57:47.293
> 
> 标签：android

我修改了我的最后一个代码，但此代码仍然显示找到网络

```
final ConnectivityManager connMgr = (ConnectivityManager)       
  getSystemService(Context.CONNECTIVITY_SERVICE);

 final android.net.NetworkInfo mobile1 = 
                            connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (mobile1.isAvailable()) {
    Toast.makeText(LoginScreen.this," other Connection Found  
",Toast.LENGTH_LONG).show();
                   btnLogin.setOnClickListener(new OnClickListener() {

public  void onClick(View view) {
String pinemptycheck = pin.getText().toString();
String mobileemptycheck = mobile.getText().toString();
 if  (pinemptycheck.trim().equals("")||(mobileemptycheck.trim().equals("")))
    {

  Toast.makeText(getApplicationContext(), "Please Enter Correct Information",   
 Toast.LENGTH_LONG).show();

  } 

  else
 {

showProgress();
postLoginData();
 }

    }
        });
}

 else if (!mobile1.isAvailable()) {

Toast.makeText(LoginScreen.this,"No other Connection Found ",Toast.LENGTH_LONG).show();

    btnLogin.setOnClickListener(new OnClickListener() {
    public void onClick(View v)

    {

 Toast.makeText(LoginScreen.this," No other Connection Found", Toast.LENGTH_LONG).show();
    }

    });
    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:15:46.550

尝试这个：

```
final ConnectivityManager connMgr = (ConnectivityManager)       
                  getSystemService(Context.CONNECTIVITY_SERVICE);

                 final android.net.NetworkInfo mobile1 = 
                                            connMgr.getActiveNetworkInfo();

                   if (mobile1 != null  && mobile1.isConnected() && mobile1.isAvailable() && (mobile1.getType() == ConnectivityManager.TYPE_MOBILE)) {
                Toast.makeText(CheckBoxTest.this," other Connection Found ",Toast.LENGTH_LONG).show();

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:25:10.160

你可以尝试这样的事情：-

在您的 android 清单中获得以下权限-

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

在意图过滤器中有一个具有以下操作的广播接收器 -

```
 <action android:name="android.net.conn.CONNECTIVITY_CHANGE" /> 
```

在接收器的 onReceive 方法中使用以下代码：-

```
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
            final ConnectivityManager connMgr = (ConnectivityManager) context
                    .getSystemService(Context.CONNECTIVITY_SERVICE);

            final android.net.NetworkInfo wifi = connMgr
                    .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            final android.net.NetworkInfo mobile = connMgr
                    .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            if (wifi.isConnected() || mobile.isConnected()) {
                      Toast.makeText(LoginScreen.this," other Connection Found  
",Toast.LENGTH_LONG).show();

            }
else
{
Toast.makeText(LoginScreen.this,"No other Connection Found ",Toast.LENGTH_LONG).show();

}
        } 
```

}

# sql - 如何在此代码中插入另一个 UPDATE SQL 命令来执行，该命令使用另一个 SQL 命令删除一条或多条记录

> ID：12690720
> 
> 赞同：0
> 
> 时间：2012-10-02T12:57:51.310
> 
> 标签：sql, asp-classic, vbscript

当用户从复选框中选择订单时，我有此代码用于从订单表中删除一条或多条记录。现在我有了库存模块，一旦订单被取消，我希望我的库存记录更新数量（将产品数量添加回当前库存）。

实际上，如果代码是一次删除一条记录的实现，这应该不是问题。但是，这个删除代码是为了删除多条记录，以我的技能，我无法弄清楚如何添加另一个更新 Sql 命令。所以你能帮帮我吗？非常感谢。

以下是我现有的代码..

```
<%
    call navigation
    url = main_area & "?" & "page=" & page_current 
    return_page = "../backend/" &  url
    req_status = request("type")
    if req_status = "restore" then
        req_status = False
    else
        req_status = True
    end if

    record = request("bill_id")
    timestamp = now()
    record = trim(record)
    if len(record) > 3 then   ' multiple records was selected
        arrVals = split(record,",")             

        strSql = ""
        strSql = strSql & "DELETE * FROM tbl_bill_total WHERE "     
        for i = 0 to ubound(arrVals)
             if i = 0 then           
              strSql = strSql & "bill_id IN ("& trim(arrVals(i)) & "    "
             else
              strSql = strSql & ","& trim(arrVals(i)) & ""
             end if
        next
        strSql = strSql & ") "

        strSql2 = strSql2 & "DELETE * FROM tbl_order WHERE "    
        for t = 0 to ubound(arrVals)
             if t = 0 then
              strSql2 = strSql2 & " tbl_order.bill_id IN ("& trim(arrVals(t)) & "    "
             else
              strSql2 = strSql2 & ","& trim(arrVals(t)) & ""
             end if
        next
        strSql2 = strSql2 & "); "       

    else

        strSql  = "DELETE * FROM tbl_bill_total WHERE bill_id=" & record & " "  
        strSql2  = "DELETE * FROM tbl_order WHERE bill_id =" & record & " " 
    end if

Call DBConnOpen()
Set Rs = Server.CreateObject("ADODB.Recordset")
response.write strSql

conn.Execute strSql
conn.Execute strSql2
Call DBConnClose()

response.redirect return_page
%> 
```

这是我要添加的 SQL 语句。由于它需要 pd_id 执行，我认为这应该在执行上述 SQL 语句之前执行。

```
Set rsOrder = conn.Execute("SELECT * FROM tbl_order WHERE bill_id = " & record & "" )           
pd_id = rsOrder.fields.item("pd_id")
od_qty = rsOrder.fields.item("od_qty")

Set rsInventory = conn.Execute("UPDATE tbl_inventory SET inv_qty_act = inv_qty_act + " & od_qty & ", inv_date =  " & date() & " WHERE pd_id = '" & pd_id & "'"  ) 
```

**（工作代码）**
现在使用@John 提供的解决方案，它可以将选择的一个/多个记录的数量更新回数据库。

以下是消除添加')'的工作代码

```
<%
Call DBConnOpen()
Set Rs = Server.CreateObject("ADODB.Recordset")

    call navigation
    url = main_area & "?" & "page=" & page_current 
    return_page = "../backend/" &  url
    req_status = request("type")
    if req_status = "restore" then
        req_status = False
    else
        req_status = True
    end if

    record = request("bill_id")
    timestamp = now()
    record = trim(record)
    if len(record) > 3 then   ' multiple records was selected
        arrVals = split(record,",")             

        strSql = ""
        strSql = strSql & "DELETE * FROM tbl_bill_total WHERE "     
        for i = 0 to ubound(arrVals)
             if i = 0 then           
              strSql = strSql & "bill_id IN ("& trim(arrVals(i)) & "    "
             else
              strSql = strSql & ","& trim(arrVals(i)) & ""
             end if
        next
        strSql = strSql & ") "

        strSql2 = strSql2 & "DELETE * FROM tbl_order WHERE "    
        for t = 0 to ubound(arrVals)

        Set rsOrder = conn.Execute("SELECT * FROM tbl_order WHERE bill_id = " & arrVals(t) & "")     
            pd_id = rsOrder.fields.item("pd_id")  
            od_qty = rsOrder.fields.item("od_qty")  
                od_qty  = DzToPcs(od_qty)
        conn.Execute("UPDATE tbl_inventory SET inv_qty_act = inv_qty_act + " & od_qty & ", inv_date =  " & date() & " WHERE pd_id = '" & pd_id & "'"  ) 

             if t = 0 then
              strSql2 = strSql2 & " tbl_order.bill_id IN ("& trim(arrVals(t)) & "    "

             else
              strSql2 = strSql2 & ","& trim(arrVals(t)) & ""
             end if
        next
        strSql2 = strSql2 & "); "       

'   response.Write "strSql3 = " & strSql3
    else

        Set rsOrder = conn.Execute("SELECT * FROM tbl_order WHERE bill_id = " & record & " ")             
            pd_id = rsOrder.fields.item("pd_id")  
            od_qty = rsOrder.fields.item("od_qty")  
                od_qty  = DzToPcs(od_qty)   
        conn.Execute("UPDATE tbl_inventory SET inv_qty_act = inv_qty_act + " & od_qty & ", inv_date =  date() WHERE pd_id = '" & pd_id & "'"  ) 

        strSql  = "DELETE * FROM tbl_bill_total WHERE bill_id=" & record & " "  
        strSql2  = "DELETE * FROM tbl_order WHERE bill_id =" & record & " " 
    end if

'Call DBConnOpen() --> move to top line
'Set Rs = Server.CreateObject("ADODB.Recordset") --> move to top line
'response.write strSql2

conn.Execute strSql
conn.Execute strSql2
Call DBConnClose()

response.redirect return_page
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:40:32.393

我建议您在循环中进行库存冲销，如下所示：

```
<%
    call navigation
    url = main_area & "?" & "page=" & page_current 
    return_page = "../backend/" &  url
    req_status = request("type")
    if req_status = "restore" then
        req_status = False
    else
        req_status = True
    end if

    record = request("bill_id")
    timestamp = now()
    record = trim(record)
    if len(record) > 3 then   ' multiple records was selected
        arrVals = split(record,",")             

        strSql = ""
        strSql = strSql & "DELETE * FROM tbl_bill_total WHERE "     
        for i = 0 to ubound(arrVals)
             if i = 0 then           
              strSql = strSql & "bill_id IN ("& trim(arrVals(i)) & "    "
             else
              strSql = strSql & ","& trim(arrVals(i)) & ""
             end if
        next
        strSql = strSql & ") "

        strSql2 = strSql2 & "DELETE * FROM tbl_order WHERE "    
        for t = 0 to ubound(arrVals)

Set rsOrder = conn.Execute("SELECT * FROM tbl_order WHERE bill_id = " & arrVals(t)) & "" )             
pd_id = rsOrder.fields.item("pd_id")  
od_qty = rsOrder.fields.item("od_qty")  
conn.Execute("UPDATE tbl_inventory SET inv_qty_act = inv_qty_act + " & od_qty & ", inv_date =  " & date() & " WHERE pd_id = '" & pd_id & "'"  ) 

             if t = 0 then
              strSql2 = strSql2 & " tbl_order.bill_id IN ("& trim(arrVals(t)) & "    "
             else
              strSql2 = strSql2 & ","& trim(arrVals(t)) & ""
             end if
        next
        strSql2 = strSql2 & "); "       

    else

Set rsOrder = conn.Execute("SELECT * FROM tbl_order WHERE bill_id = " & record & "" )             
pd_id = rsOrder.fields.item("pd_id")  
od_qty = rsOrder.fields.item("od_qty")  
conn.Execute("UPDATE tbl_inventory SET inv_qty_act = inv_qty_act + " & od_qty & ", inv_date =  " & date() & " WHERE pd_id = '" & pd_id & "'"  ) 

        strSql  = "DELETE * FROM tbl_bill_total WHERE bill_id=" & record & " "  
        strSql2  = "DELETE * FROM tbl_order WHERE bill_id =" & record & " " 
    end if

Call DBConnOpen()
Set Rs = Server.CreateObject("ADODB.Recordset")
response.write strSql

conn.Execute strSql
conn.Execute strSql2
Call DBConnClose()

response.redirect return_page
%> 
```

# php - 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从

> ID：12690722
> 
> 赞同：10
> 
> 时间：2012-10-02T12:58:21.287
> 
> 标签：php, soap, wamp

我正在做一些 SOAP 练习

但是，我不能让它在 WAMP 上工作。

我得到的错误是：

> 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“ [https://www.creditsafe.fr/getdata/service/CSFRServices.asmx?WSDL:8080](https://www.creditsafe.fr/getdata/service/CSFRServices.asmx?WSDL:8080) ”加载：无法加载外部C:\wamp\www\GESTION\add_debiteur.php:128 中的实体“ [https://www.creditsafe.fr/getdata/service/CSFRServices.asmx?WSDL:8080](https://www.creditsafe.fr/getdata/service/CSFRServices.asmx?WSDL:8080) ” 堆栈跟踪：#0 C:\wamp\www \GESTION\add_debiteur.php(128): SoapClient->SoapClient(' [https://www.cre](https://www.cre) ...') #1 C:\wamp\www\GESTION\index.php(1360): include('C :\wamp\www\GES...') #2 {main} 在第 128 行的 C:\wamp\www\GESTION\add_debiteur.php 中抛出

```
$client = new SoapClient("http://footballpool.dataaccess.eu/data/info.wso?WSDL");
$wsdl = "https://www.creditsafe.fr/getdata/service/CSFRServices.asmx?WSDL";
$client = new SoapClient($wsdl); 
```

谷歌不知道答案。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T06:13:40.680

麻烦就解决了。事实上，当我使用 WAMP（橙色图标）出现如此错误时，我决定重新设置它。

所以我安装了最新版本的 WAMP，但没有与我之前使用的相同的 php.ini，事实上，问题在于我必须在 php.ini 上激活该行`;extension=php_openssl.dll`

所以我只是删除了`;`角色，这条线变得像`extension=php_openssl.dll`

现在它工作正常。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-06T12:38:17.690

你可以试试这个

```
echo file_get_contents($wsdl);
die(); 
```

如果您可以从 php 访问 $wsdl，您可以查看它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T04:52:08.983

我已经安装了 wamp server 3.0 并且我得到了同样的错误（致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法加载）。

为了解决这个问题，我在代码行下面的 php.ini 文件中取消了注释：

**;扩展=php_openssl.dll**

启用此行后，重新启动您的 Wamp 服务器。它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-21T00:37:08.013

ini_set("default_socket_timeout", "300");

或 php.ini 更改（default_socket_timeout）。工作

# php - htaccess 两个链接重写

> ID：12690723
> 
> 赞同：0
> 
> 时间：2012-10-02T12:58:26.243
> 
> 标签：php

在我的 htaccess 文件中，我将主 index_eng.php 页面中包含的所有页面重写为 .html 文件。

这是文件内容

```
RewriteEngine on
RewriteRule (.*)\.html$ index_eng.php?page=$1 [L]
# ErrorDocument 404 /404.html" 
```

它工作得很好。问题是我想在与 index_eng.php 相同的文件夹级别上拥有另一个页面，该页面将被称为 index_fr.php，当我添加 htaccess 代码时，它将在法语中具有相同的页面并且类似地工作。

```
RewriteRule (.*)\.html$ index_fr.php?page=$1 [L] 
```

只考虑第一个。第二个被忽略了。这个问题是否有任何解决方法，以便 htaccess 知道这两种语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:11:21.810

你可以做这样的事情..

```
RewriteEngine on
# If "lang" cookie is set, use it to get language preference
RewriteCond %{HTTP_COOKIE} ^lang=([a-z]{2,3})[-,;]? [OR]
# else use first language in HTTP Accept-Language request header
RewriteCond %{HTTP:Accept-Language} ^([a-z]{2,3})[-,;]?
# Rewrite home page requests to script, passing language preference in query string
RewriteRule ^$ /index.php?lang=%1 [L] 
```

这样，您可以使用用户偏好或查找他们的浏览器首选项，并使您的脚本足够智能以使用变量来选择正确的版本..

--编辑---回应评论中的问题。尝试这样的事情。

在您的 .htaccess 中包含最重要的条件，将其替换`RewriteRule`为

```
RewriteRule  (.*)\.html$ index_%1.php?page=$1 [L] 
```

然后移动`index_eng.php`到`index_en.php`你应该很好（如果 index_eng.php 用于任何直接链接，你可以将它们符号链接在一起）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:11:47.207

为什么不使用这样的重写？

```
RewriteEngine on
RewriteRule (.*)_en\.html$ index_eng.php?page=$1
RewriteRule (.*)_fr\.html$ index_fr.php?page=$1 
```

对用户来说更加透明，知道他现在在网站的 en/fr 版本上；并且您可以更轻松地管理重写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:13:11.450

首先，忽略第二条规则的原因是因为您正在使用`[L]`停止处理规则集的标志。[http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_l](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_l)

其次，你想定义两个匹配相同模式的规则，所以没有办法告诉哪个应该去英文索引文件，哪个应该去法语索引文件。您应该在规则中添加一些指示符，以便它知道选择哪种语言：

```
RewriteRule ^en/(.*)\.html$ index_en.php?page=$1 [L]
RewriteRule ^fr/(.*)\.html$ index_fr.php?page=$1 [L] 
```

这将匹配这样的网址`en/pagename.html`/ `fr/pagename.html`。或者：

```
RewriteRule ^(.*)_en\.html$ index_en.php?page=$1 [L]
RewriteRule ^(.*)_fr\.html$ index_fr.php?page=$1 [L] 
```

这将匹配这样的网址`pagename_en.html`/`pagename_fr.html`

# iphone - 我可以支持 iOS 3.0 到 6.0 版本吗？

> ID：12690729
> 
> 赞同：0
> 
> 时间：2012-10-02T12:58:35.077
> 
> 标签：iphone, ios, ios6, iphone-5

我更新了我的应用程序代码以支持 iOS 6（当然我安装了 xcode 4.5 和 iOS 6 SDK）。

我的部署目标仍然是 3.0 我创建了一个存档，但它没有验证并抱怨缺少架构 armv6，但我可以看到我的警告：

```
warning: architecture armv6 is not supported (current ARCHS = "armv7 armv7s armv6").
warning: iOS deployment targets lower than 4.3 are not supported (current IPHONEOS_DEPLOYMENT_TARGET = "3.0", ARCHS = "armv7 armv7s armv6"). 
```

所以呢？我是否被迫放弃 armv6 和所有运行 iOS < 4.3 的设备？没有办法支持从 3.0 到 6.0 的 iOS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:10:24.613

Xcode 4.5 不支持生成 ARM6 代码。当使用 Xcode 4.5 构建应用程序时，您确实必须放弃对这些设备的支持。

来自[Xcode 4.5 发行说明](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/_index.html)：

> 此版本的 Xcode 不生成 armv6 二进制文件。12282156

我仍然需要强调，旧项目仍然支持 iOS3。在构建新项目时，提供的最低 iOS 部署目标是 4.3。但话又说回来，这几乎是一条学术信息，因为只有 iPhone 3GS 在 ARM7 平台上运行，并且最初是在 2009 年随 iOS3 发布的（2G 和 3G 是 ARM6 平台设备）。3GS 最近停产（2012 年 9 月 12 日），但确实支持 iOS 的完整更新路径（直到并包括 iOS6 - 而该设备上缺少一些 iOS6 功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:14:35.403

您可以保留 XCode 4.3 的副本来构建您的 iOS 3 应用程序，这是唯一的方法。

Kinda Sucks 我认为您应该能够针对较低版本的操作系统，但我确实理解 Apple 认为只是在一段时间后停止支持的原因，这在大局中是我喜欢 iOS 而不是 Droid 的原因！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T15:22:06.240

even Xcode 5 can genereate binaries with armv6 support after light modify it. Look this answer for more information: [https://stackoverflow.com/a/12836808/751932](https://stackoverflow.com/a/12836808/751932)

# opencl - 我如何知道我的 OpenCL 内核正在 GPU 上运行？

> ID：12690730
> 
> 赞同：9
> 
> 时间：2012-10-02T12:58:35.500
> 
> 标签：opencl

我怎样才能 100% 确定我的 opencl 内核实际上是在 GPU 上而不是在 CPU 上运行的。我无法理解这一点，因为 openCL 内核也可以在 CPU 上运行。这里有任何指示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:41:06.677

创建 OpenCL 上下文时，您必须在计算机上可用的平台和设备之间进行选择。**您可以使用clGetPlatformInfo**和**clGetDeviceInfo**获取有关平台和设备的一些信息。您可以在 NVIDIA 和 AMD SDK 中找到示例代码以列出平台和设备。

对于 AMD (gDEBugger, Code XL)、NVIDIA (Visual Profiler) 和 Intel (Intel GPA) 设备，您可以使用分析工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T08:36:24.063

创建上下文时，使用[clCreateContextFromType](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clCreateContextFromType.html)可以传递标志**CL_DEVICE_TYPE_GPU**，它指定您只需要 GPU。像这样的东西**保证**了 GPU 的使用（你可以 100% 确定）：

```
cl_uint num_platforms = 0;
clGetPlatformIDs(0, NULL, &num_platforms);
cl_platform_id* platform = malloc(sizeof(cl_platform_id) * num_platforms);
cl_context_properties cprops[3] = { CL_CONTEXT_PLATFORM, (cl_context_properties)platform[0], 0 };
ctx = clCreateContextFromType(cprops, CL_DEVICE_TYPE_GPU, NULL, NULL, &err); 
```

如果您已经设置了上下文和设备，则可以像这样查询设备的类型：

```
cl_device_type dev_type;
clGetDeviceInfo(my_device, CL_DEVICE_TYPE, sizeof(dev_type), &dev_type, NULL);
if (dev_type == CL_DEVICE_TYPE_GPU) {
    printf("I'm 100%% sure this device is a GPU");
} 
```

您将排入在此设备上创建的命令队列的所有内容都将在 GPU 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:35:38.013

您可以简单地使用 TechPowerUp GPU-Z 来查看 GPU 上是否存在一些工作负载。另一种解决方案：您可以明确指定是否在设备类型 CL_Device_Type_GPU 中使用 GPU。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:49:10.437

我在我的 Macbook Pro 和 Mac Pro 上使用 MenuMeters——如果正在使用 CPU，那是显而易见的。（我不知道在 XCode 下使用 OpenCL 时，分析工具是否适合我......）

# iphone - RKRequest forcebasisauthentication unrecognized selector (property not fount)

> ID：12690734
> 
> 赞同：0
> 
> 时间：2012-10-02T12:59:11.300
> 
> 标签：iphone, objective-c, ios, xcode, restkit

我刚刚将restkit升级到0.10.2。我在这段代码中有一个错误：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/browse/authentication/#", address]];

RKRequest *request = [RKRequest requestWithURL:url delegate:self];
request.forceBasicAuthentication = YES;
request.username = [loginField text];
request.password = [passwordField text];
[request send]; 
```

错误：

```
[RKRequest setForceBasicAuthentication:]: unrecognized selector sent to instance 0x348420
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[RKRequest setForceBasicAuthentication:]: unrecognized selector sent to instance 0x348420' 
```

升级 restkit 后我没有更改任何代码。谢谢！

编辑：标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:16:07.653

通过这样做解决了代码完成错误`Product->Hold down option button->"Clean Build Folder"`:)

# php - 如何处理我自己的语法结束标签和属性？

> ID：12690736
> 
> 赞同：0
> 
> 时间：2012-10-02T12:59:14.330
> 
> 标签：php, syntax, attributes

这似乎有点奇怪，但我想为除 xml 或任何其他标准之外的应用程序创建自己的语法。

所以我想做的是这样的：

```
 [tag atr=|value| atr=|value value value|] 
    [tag atr=|value| atr=|value value value|] 
    [tag atr=|value| atr=|value value value|] 
```

然后循环槽并将 atr 放入变量或数组中

```
 $tag1 = Array ( [atr] => value [atr] => value )
    $tag2 = Array ( [atr] => value [atr] => value )
    $tag3 = Array ( [atr] => value [atr] => value ) 
```

我发现我需要在 [ 和 ] 之间找到一个字符串。将这些stings 放入一个数组循环槽中，然后查看用于触发特定操作的标签并将属性值与该操作一起发送。

如果有人有一些代码或提示，那将很有用。很抱歉重新发明轮子，但我需要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:24:53.150

我没有创建自己的语法或 dom，而是使用带有自己保留标签的 XML，这在当今的标准中不会出现。这样我就可以处理我制作的标签，而无需干预来自字符串的类似标签。

可以使用 php 函数（例如 simplexml_load_string）处理 XML。此函数将 XML 放入一个对象中，并使其成为一个巨大的数组，我可以处理 PHP 中的每个循环。

# jpeg2000 - 如果已经存在 kdu_transcode，为什么还要使用 JPIP？

> ID：12690745
> 
> 赞同：0
> 
> 时间：2012-10-02T13:00:03.603
> 
> 标签：jpeg2000

`kdu_transcode`提供仅从 JPEG2000 中选择某些代码块的功能。

为什么要使用 JPIP 而不仅仅是`kdu_transcode`（+ 一些开源缓存）的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:39:56.940

JPIP 相对于 kdu_transcode 的优势：

*   JPIP 支持小块发送数据
*   JPIP 以这样的顺序发送数据，即当仅接收到部分数据时，它已经可以显示，可能是低分辨率/低质量的图像。
*   您可以明确告诉 JPIP 您已经拥有哪些数据。

JPIP的缺点：

*   发送额外的标头，因此使用更多带宽
*   如果您在 Kakadu 中使用 JPIP 的实现，则必须使用提供的服务器和客户端，包括它们自己的缓存实现（除非您想从头开始实现协议的某些部分）。例如，除了 kdu_client 本身之外，没有其他代码用于剥离额外的标头。

所以一般来说，JPIP 仅在您想在图像仍在下载时显示部分数据时才有用。

# java - JavaCV：如何获取描述符的二进制字符串

> ID：12690747
> 
> 赞同：1
> 
> 时间：2012-10-02T13:00:14.573
> 
> 标签：java, image-processing, opencv, image-recognition, javacv

我正在尝试使用 JavaCV 使用 ORB 算法实现图像识别。根据一些论文[[1]](https://willowgarage.com/sites/default/files/orb_final.pdf)、[[2]](http://infoscience.epfl.ch/record/175537/files/2069.pdf)，ORB 关键点描述符是一个二进制字符串。那么，在获取图像的关键点后如何获取这个二进制字符串呢？

这是我获得关键点的代码

```
KeyPoint keypoints = new KeyPoint();
ORB orb = new ORB(MAX_FEATURES, (float) 1.2, 8, 1, 0, 2, 5, 31);
orb.detect(originalImg, greyScaleImg, keypoints); 
```

获取描述符的代码应该是：

```
DescriptorExtractor descriptor = orb.getDescriptorExtractor();
descriptor.compute(greyScaleImg, keypoints, descriptors); 
```

由于没有关于描述符函数的文档，javadocs 也没有。我不知道参数描述符应该是什么类型以及如何打印二进制字符串。不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:01:07.067

该`descriptors`参数应该是一个二维矩阵`Mat`（来自`org.opencv.core.Mat`）：

*   维度：`NxD`哪里`N = number of keypoints`（行）和`D = descriptor dimension = 32`（列），
*   type: `CV_8UC1`，即每个矩阵值都是一个字节（又名 8 位单通道矩阵）。

每个描述符可以通过将 32 个字节连接成一个由 256 位组成的字节数组来表示，这就是论文将其称为*二进制字符串*的原因。

有关`ORBDescriptorExtractorTest.java`更多详细信息，请参阅。

# c# - 在 NHibernate 中映射一个数组

> ID：12690748
> 
> 赞同：0
> 
> 时间：2012-10-02T13:00:31.940
> 
> 标签：c#, arrays, hibernate, nhibernate, map

我的数据库的单列中有一个数组。在 postgres 中它看起来像这样：

```
orientation double precision[] 
```

其中“方向”是列名。如何在 C# 中映射它？

`< property name="Orientation"/>`在我的 hbm.xml 文件中不起作用。我在 C# 中的类包含以下字段：

```
public virtual double[] Orientation { get; set; } 
```

这给了我一个例外：

> 无法将 Double[] 类型的字段 Orientat9_0_ 中的值转换为 SerializableType 类型。请检查以确保映射正确并且您的 DataProvider 支持此数据类型。

还有这个：

> 无法将“System.Double[]”类型的对象转换为“System.Byte[]”类型。

我不想在我的数据库中创建任何其他表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:35:36.173

您将需要编写自己的代码`IUserType`来处理此问题。

# iphone - 外观代理 - iOS 5 的 setShadowImage 替代方案？

> ID：12690753
> 
> 赞同：5
> 
> 时间：2012-10-02T13:00:48.213
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

您好，我正在使用此代码设置导航栏的阴影图像：

```
if ([self.navigationController.navigationBar respondsToSelector:@selector(shadowImage)]) {

    [[UINavigationBar appearance] setShadowImage:[UIImage imageNamed:@"nav-bar-shadow"]];

    [[UIToolbar appearance] setShadowImage:[UIImage imageNamed:@"tool-bar-shadow"]  forToolbarPosition:UIToolbarPositionAny];
} 
```

然而，这似乎只是 iOS 6（虽然我不能肯定地说 - 我在任何地方都找不到关于这个的文档）。它不适用于 iOS 5。

是否有某种替代方法 - 在导航栏下全局设置图像？我想到了自定义 UIView，但是如何在全球范围内做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:29:07.820

你可以：

1.  将包含阴影图像的子视图添加到您的`viewController.view`
2.  将包含阴影图像的子视图添加到您的`[[UIApplication sharedApplication] keyWindow]`，这将在您的窗口上全局添加图像。但是，它可能会变得有点难看，例如在显示模态视图控制器时。
3.  您可以子类`UINavigationBar`化，在其中使用子视图做一些魔术，然后通过以下方式初始化您的导航控制器`[[UINavigationController alloc] initWithNavigationBarClass:[YourNavBarSubclass class] toolbarClass:[UIToolbar class]]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:11:55.997

shadowImage 仅适用于 ios6：

```
@property(nonatomic,retain) UIImage *shadowImage NS_AVAILABLE_IOS(6_0) UI_APPEARANCE_SELECTOR; 
```

# css - 使用渐变和自定义箭头样式化 SELECT（选项）标签

> ID：12690754
> 
> 赞同：1
> 
> 时间：2012-10-02T13:00:50.740
> 
> 标签：css, drop-down-menu, gradient

你可以在这里看到我的整个 HTML。您可以将其复制/粘贴到本地的演示文档中，然后查看我所指的内容。

[http://chopapp.com/#ny9fxmtv](http://chopapp.com/#ny9fxmtv)

基本上，我想将框设置为在右侧同时具有渐变和自定义箭头。如上图所示。

问题是我得到的渐变是通过这个代码：

`background: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#ececec)) ;`

这是我上面代码中的第 21 行。但是因为“背景”属性已经被这一行占用了，我不能也包括一个“url（image.png）”标签来指定自定义的向下箭头图像，这是我的代码中的第 20 行。

有没有办法让我有渐变*和*向下箭头的图像？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:10:36.850

检查此**[链接](https://stackoverflow.com/a/2547064/1577396)**

```
background: #6cab26;
background: url(IMAGE_URL); /* fallback */
background: url(IMAGE_URL), -webkit-gradient(linear, left top, left bottom, from(#444444), to(#999999)); /* Saf4+, Chrome */
background: url(IMAGE_URL), -webkit-linear-gradient(top, #444444, #999999); /* Chrome 10+, Saf5.1+ */
background: url(IMAGE_URL),    -moz-linear-gradient(top, #444444, #999999); /* FF3.6+ */
background: url(IMAGE_URL),     -ms-linear-gradient(top, #444444, #999999); /* IE10 */
background: url(IMAGE_URL),      -o-linear-gradient(top, #444444, #999999); /* Opera 11.10+ */
background: url(IMAGE_URL),         linear-gradient(top, #444444, #999999); /* W3C */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:23:08.480

```
<div class="selectParent">
 <select>
      <option value="1">Option 1</option>
      <option value="2">Option 2</option>           
 </select>  
 </div>​

.selectParent{
width:80px;
overflow:hidden;
background: #d0e4f7;
background: -moz-linear-gradient(top,  #d0e4f7 0%, #73b1e7 24%, #0a77d5 50%, #539fe1 79%, #87bcea 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d0e4f7), color-stop(24%,#73b1e7), color-stop(50%,#0a77d5), color-stop(79%,#539fe1), color-stop(100%,#87bcea));
background: -webkit-linear-gradient(top,  #d0e4f7 0%,#73b1e7 24%,#0a77d5 50%,#539fe1 79%,#87bcea 100%);
background: -o-linear-gradient(top,  #d0e4f7 0%,#73b1e7 24%,#0a77d5 50%,#539fe1 79%,#87bcea 100%);
background: -ms-linear-gradient(top,  #d0e4f7 0%,#73b1e7 24%,#0a77d5 50%,#539fe1 79%,#87bcea 100%);
background: linear-gradient(to bottom,  #d0e4f7 0%,#73b1e7 24%,#0a77d5 50%,#539fe1 79%,#87bcea 100%);

}

.selectParent select{
width: 100px;
-webkit-appearance: none;
-moz-appearance: none;
appearance: none;
padding: 2px 2px 2px 2px;
border: none;
 background: transparent url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png") no-repeat 60px center;

 } 
```

[演示](http://jsfiddle.net/afshinprofe/qhCsJ/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:06:34.710

你能在框中使用一个列表吗

```
ul.className {list-style-image:url('someimage.gif');} 
```

然后根据需要放置您的盒子背景。

第二种选择只是在该 div 的顶部放置一个 div，并有一个渐变和顶部的箭头。类似的东西？

# c# - C# XML 反序列化为多个对象

> ID：12690759
> 
> 赞同：1
> 
> 时间：2012-10-02T13:01:14.817
> 
> 标签：c#, xml

我正在将给定的 XML 文件反序列化为一个对象，我工作得很好。但是，我现在要调整 XML 文件，以便我有额外的属性，这些属性应该被反序列化为一个单独的对象，所以从一个给定的 xml 文件中我可以填充两个对象，这可能在一个操作中实现吗？

这是我当前的代码和 XML：

XML 现在的样子：

```
<NameCollection>
   <Names>
      <Name>
        <description></description>
      <Name>
      <Name>
        <description></description>
      <Name>
   </Names>
</NameCollection> 
```

XML 如我所愿：

```
<NameCollection>
  <GenericName></GenericName>
  <GenericDescription></GenericDescription>
   <Names>
      <Name>
        <description></description>
      <Name>
      <Name>
        <description></description>
      <Name>
   </Names>
</NameCollection> 
```

代码：

```
NameCollection commands;

XMLSerializer serializer = new XMLSerializer(typeof(NameCollection));
StreamReader streamReader = new StreamReader(xmlpath);

commands = (NameCollection)serializer.Derserialize(streamreader);

streamReader.Close(); 
```

和当前对象：

```
[Serializable()]
public class TestCommand
{
   public string description{get;set;}
}

[Serializable()]
[XmlRoot("NameCollection")]
public class NameCollection
{
   [XmlArray("Commands")]
   [XmlArrayItem("Command", typeof(TestCommand))]
   public TestCommand[] TestCommand {get;set;}
} 
```

然后我希望将 GenericName 和 GenericDescription 属性添加到另一个单独的对象，这就是我坚持的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:22:49.527

我认为你的目标是让你的类反映 XML 的结构，而不是两个类。所以你想要一个像这样的结构：

```
public class TestCommand
{
   public string description{get;set;}
}

[XmlRoot("NameCollection")]
public class NameCollection
{
    public string GenericName {get; set;}
    public string GenericDescription {get; set;}

   [XmlArray("Commands")]
   [XmlArrayItem("Command", typeof(TestCommand))]
   public TestCommand[] TestCommand {get;set;}
} 
```

然后以完全相同的方式对其进行序列化，完成工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:23:04.253

使用您拥有的布局，唯一`XmlSerializer`想要放置这些额外值的地方是 on `NameCollection`，即

```
[XmlRoot("NameCollection")]
public class NameCollection
{
    public string GenericName {get;set:}
    public string GenericDescription {get;set:}

    [XmlArray("Names")]
    [XmlArrayItem("Name", typeof(TestCommand))]
    public TestCommand[] TestCommand {get;set;}
} 
```

如果您希望它继续作用于其他对象，则：`XmlSerializer`不会那样做。

# php - 转义有效的文件名/路径

> ID：12690763
> 
> 赞同：0
> 
> 时间：2012-10-02T13:01:31.800
> 
> 标签：php, security, file, escaping

所以我现在遇到了安全问题，我想知道使脚本安全的完美方法是什么。我的代码中有这个

```
$AdditionalPath = preg_replace("/^[A-Za-z0-9._-\/\\]/","",$AdditionalPath);
require $AdditionalPath."../xdata/php/website_config/mysql.php"; 
```

`$AdditionalPath`可能是一切，甚至是恶意代码，所以我对自己很严格，我应该让某些字符进入那个变量，比如`A-Z` `a-z` `0-9` `.` `/` `\`. 我说的对吗？而且我是否正确地制作了这个正则表达式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:07:09.063

为什么不使用[realpath](http://php.net/manual/en/function.realpath.php)而不是正则表达式：

```
$file = realpath( $AdditionalPath . "../xdata/php/website_config/mysql.php");
if( is_readable( $file ))
  require $file; 
```

**更新：**

从 realpath 的文档中：

> 注意：运行脚本必须对层次结构中的所有目录具有可执行权限，否则 realpath() 将返回 FALSE。

# android - Android 上 Flex 4.6 中的 TextArea 未显示

> ID：12690765
> 
> 赞同：1
> 
> 时间：2012-10-02T13:01:40.620
> 
> 标签：android, apache-flex, mobile, textarea, flex4.6

我的文本区域有时显示有时不显示，如果我进入屏幕保护程序然后它们显示。

任何想法如何驾驭这种行为？

问候克雷格

# android - 安卓背景

> ID：12690766
> 
> 赞同：1
> 
> 时间：2012-10-02T13:01:47.660
> 
> 标签：android, background

在我的应用程序中，我使用了背景图像 - 480x800，大小 - 464kb，但是当我尝试在 api <15 的模拟器中运行它时，我遇到了 OOM 错误，但如果我在没有背景的情况下运行它，一切正常。也许有人对此有一些解决方案？或者一些建议与背景一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:15:34.563

正如@Ram kiran 所说

用于`drawable-xhdpi`保存大尺寸图像。

对于具有不同尺寸的图像，`480x800`纵向和横向具有不同的外观，

所以更好用

```
 drawable-port-xhdpi for portable images 
```

（并使用）

```
 drawable-land-xhdpi for landscape image 
```

阅读[本文](http://developer.android.com/guide/practices/screens_support.html)以获得更多说明

# iphone - 在 iOS 6 Flash IPA 中具有黑色背景的 PNG

> ID：12690771
> 
> 赞同：1
> 
> 时间：2012-10-02T13:02:09.530
> 
> 标签：iphone, ios, ipad, png, flash-cs6

使用 Flash Professional CS6 我正在构建一个 iOS 应用程序。我直接在 SWF 中嵌入了一个透明的 PNG 图像（具有透明背景的图像）。在 Flash IDE 阶段，图像看起来很完美，但是当我在设备上编译和测试 IPA 时：

1.  如果我在 iPad/iOS 5 上测试，图像看起来很棒；
2.  如果我在 iPhone/iOS 6 上进行测试，图像的背景是黑色的，并且图像看起来被拉伸了一半；

我能做些什么？我尝试了任何一种 PNG（PNG-24、PNG-8、...），但问题始终存在。

[更新] GIF 图像也有同样的行为！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:36:04.760

您的问题看起来像在此线程中讨论的问题： [iOS 6 Safari backgrounds missing](https://stackoverflow.com/questions/12520364/ios-6-safari-backgrounds-missing)

也许您可以应用提到的技巧之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:53:39.920

折腾了好几天，今天我只下载了最新的AIR SDK（3.5）就解决了！

# c# - 无法访问asp.net updatepanel中的控制

> ID：12690773
> 
> 赞同：0
> 
> 时间：2012-10-02T13:02:18.267
> 
> 标签：c#, asp.net

我使用 Microsoft 的这个官方示例：

当我尝试在单击事件中从代码隐藏访问 MyLabel 时，MyLabel 为 NULL。

为什么这个？

```
<asp:ScriptManager ID="PageScriptManager" runat="server" />
<asp:Button ID="MyButton" Text="Click Me" runat="server" onClick="MyButton_Clicked" />
<asp:UpdatePanel ID="MyUpdatePanel" runat="server">
<Triggers> 
    <asp:AsyncPostBackTrigger ControlID="MyButton" EventName="Click" />
</Triggers>
    <ContentTemplate>
    <asp:Label ID="MyLabel" Text="OldText" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel>

private void MyButton_Clicked(object sender, EventArgs e) 
 {   
  MyLabel.Text = "NewText!";
 } 
```

**更新**此代码不起作用为什么？MyLabel 在服务器端始终为 NULL ??

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

  <asp:ScriptManager runat="server" ID="xx">  
  </asp:ScriptManager>

 <asp:ImageButton OnClick="OnClickRefreshButton" ID="RefreshImageButton" runat="server" Width="100px" />
<asp:UpdatePanel ID="MyUpdatePanel" runat="server"> 
    <Triggers>
         <asp:AsyncPostBackTrigger ControlID="RefreshImageButton" EventName="Click" /> 
    </Triggers> 
    <asp:ContentTemplate> 
      <asp:Label ID="MyLabel" Text="OldText" runat="server" />
    </asp:ContentTemplate>
</asp:UpdatePanel>  
</asp:Content>

protected void OnClickRefreshButton(Object sender, ImageClickEventArgs e) 
        {       

            MyLabel.Text = "NewText!";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:02:30.023

尝试将功能更改为`protected`and not `private`，它对我有用。希望它解决了你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:14:47.970

你可以适应 `UpdateMode="Conditional"`你的`Updatepanel`

链接：http : [//msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.updatemode.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.updatemode.aspx)

# c# - 将Resources.resx 中的BitmapImage 分配给Image.Source？

> ID：12690774
> 
> 赞同：20
> 
> 时间：2012-10-02T13:02:21.200
> 
> 标签：c#, wpf, uri

我想将`BitmapImage`我的 Resources.resx 中的a 分配给`Image`. 事先我将 .png 图像保存到 Resources.resx。该图像现在位于“/Resources/logo.png”中。

在阅读了几篇 SO 帖子和其他文章后，我现在有了这个：

```
logoImage.Source = new BitmapImage(new Uri(@"pack://application:,,,/Resources/logo.png")); 
```

不幸的是，它不起作用。我不知道如何解决这个问题。

我试图用完整路径替换`Pack-URI`它并且它工作但我想使用相对路径以便在绝对路径不正确的不同机器上使用相同的源。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-02T15:43:40.190

为了使 Uri 工作，文件 logo.png 必须包含在 VS 项目中名为“Resources”的文件夹中（参见第一张图片），并且它的 Build Action 必须设置为 Resource（参见第二张图片）。

![VS项目](../Images/8e217afed52359cec07149afa2eefed9.png)

![构建动作](../Images/be22643cfeec40a42b670289c8af6930.png)

此 Resources 文件夹与 Resources.resx 完全无关。您可以将其重命名为您喜欢的任何名称。

# mysql - 为什么 EF 为简单查询生成子查询？

> ID：12690775
> 
> 赞同：5
> 
> 时间：2012-10-02T13:02:21.690
> 
> 标签：mysql, linq, entity-framework

有一个简单的 Linq to EF：

```
var query = from p in _db.Posts
            where p.BlogtId == blogId
            select p; 
```

它以这种形式生成 SQL：

```
SELECT
`Extent1`.`PostId`, 
`Extent1`.`BlogId`, 
...
FROM `Posts` AS `Extent1`
 WHERE `Extent1`.`BlogId` = @p__linq__0 
```

但是当我向这个查询添加 order by

```
var query = from p in _db.Posts
            where p.BlogId == blogId
            orderby p.PublishDate
            select p; 
```

它生成这个查询

```
SELECT
`Project1`.`PostId`, 
`Project1`.`BlogId`, 
...
FROM (SELECT
`Extent1`.`PostId`, 
`Extent1`.`BlogId`, 
...
FROM `Posts` AS `Extent1`
 WHERE `Extent1`.`BlogId` = @p__linq__0) AS `Project1`
 ORDER BY 
`Project1`.`PublishDate` ASC 
```

为什么这会生成子查询？在 MySQL 中此查询存在性能问题。MySQL 正在尝试执行内部查询，该查询会拉回数据库中的所有记录，然后尝试对主题进行排序。

我需要一个解决方案来通过 linq 生成下面的 sql

```
SELECT
`Extent1`.`PostId`, 
...
FROM `Posts` AS `Extent1`
 WHERE `Extent1`.`BlogId` = @p__linq__0
 ORDER BY 
`Extent1`.`PublishDate` ASC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T18:02:57.687

这不是实体框架问题，尽管您的链接可能会告诉其他人。它与 MySqlConnector/net 有关。我可以证明！啊，没想到吧。

使用 MSSQL 数据库和连接器将这个确切的场景`System.Data`连接起来，您将看到格式正确的 SQL。这是 MySqlConnector 内部的投影问题。如果你想修复它，然后进入并自己编辑它。

以下是如何拥有 MySqlConnector/net 的本地编辑副本：[如何自定义 MySql Connector/net？](https://stackoverflow.com/q/12944570/1026459)

# java - 删除特定示例中的代码重复

> ID：12690777
> 
> 赞同：3
> 
> 时间：2012-10-02T13:02:31.810
> 
> 标签：java, code-duplication

我有三种重复代码的方法。前两种方法几乎完全重复。第三个有点不同，因为应该绘制更多关于火灾的信息。

我想删除这个重复的代码并考虑使用内部类的模板方法模式。这是正确的方法还是有更好的解决方案？

```
private void drawWaterSupplies(Graphics g) {
    double hScale = getWidth() / (double) groundMap.getWidth();
    double vScale = getHeight() / (double) groundMap.getHeight();

    int imageOffsetX = waterSupplyImage.getWidth() / 2;
    int imageOffsetY = waterSupplyImage.getHeight() / 2;
    for (Location l : groundMap.getWaterSupplyLocations()) {
        int x = (int) (l.getX() * hScale);
        int y = (int) (l.getY() * vScale);

        g.drawImage(waterSupplyImage, x - imageOffsetX, y - imageOffsetY,
                null);
    }
}

private void drawEnergySupplies(Graphics g) {
    double hScale = getWidth() / (double) groundMap.getWidth();
    double vScale = getHeight() / (double) groundMap.getHeight();

    int imageOffsetX = energySupplyImage.getWidth() / 2;
    int imageOffsetY = energySupplyImage.getHeight() / 2;
    for (Location l : groundMap.getEnergySupplyLocations()) {
        int x = (int) (l.getX() * hScale);
        int y = (int) (l.getY() * vScale);

        g.drawImage(energySupplyImage, x - imageOffsetX, y - imageOffsetY,
                null);
    }
}

private void drawFires(Graphics g) {
    double hScale = getWidth() / (double) groundMap.getWidth();
    double vScale = getHeight() / (double) groundMap.getHeight();

    int imageOffsetX = fireImage.getWidth() / 2;
    int imageOffsetY = fireImage.getHeight() / 2;
    for (Fire fire : groundMap.getFires()) {
        Location l = fire.getLocation();
        int x = (int) (l.getX() * hScale);
        int y = (int) (l.getY() * vScale);

        g.drawImage(fireImage, x - imageOffsetX, y - imageOffsetY, null);
        // TODO: draw status bar showing state of fire below
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:05:44.977

在我看来，您的对象集合（`Fire`等`WaterSupply`）并不像应有的那样聪明。理想情况下，您应该能够说：

```
for (Fire f : groundMap.getFires()) {
   f.draw(g);
} 
```

并且每个对象都能够定位自己（使用它的位置）、调整自身大小（因为 a`Fire`知道它将使用 a`FireImage`等）并将自己绘制到提供的 Graphics 对象上。

为了更进一步，我希望将一个`Graphics`对象传递给你的groundMap：

```
groundMap.drawFires(g); 
```

这个想法是，在 OO 中，您不应该询问对象的详细信息然后做出决定。*相反，您应该告诉对象为您做事*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:05:46.133

我将委托给另一个方法并为火、水和能源创建一个超类。这个超类将包含所有公共属性。例如`getLocation()`

例如

```
private void drawEverything(Graphics g, Image im, List<? extends SuperClassOfFireEtc> list, double w, double h) {
    double hScale = getWidth() / w;
    double vScale = getHeight() / h;

   int imageOffsetX = im.getWidth() / 2;
   int imageOffsetY = im.getHeight() / 2;
   for (SuperClassOfFireEtc f : list) {
       Location l = f.getLocation();
       int x = (int) (l.getX() * hScale);
       int y = (int) (l.getY() * vScale);

       g.drawImage(im, x - imageOffsetX, y - imageOffsetY, null); 
   } 
```

}

然后drawFire可以调用

```
 private void drawEverything(g, fireImage, groundMap.getFires(), groundMap.getWidth(), groundMap.getHeight()) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:14:31.247

怎么样：

```
private void drawImageAtLocations(Graphics g, Image i, Collection<Location> cl) {
    double hScale = getWidth() / (double) groundMap.getWidth();
    double vScale = getHeight() / (double) groundMap.getHeight();

    int imageOffsetX = i.getWidth() / 2;
    int imageOffsetY = i.getHeight() / 2;
    for (Location l : cl) {
        int x = (int) (l.getX() * hScale);
        int y = (int) (l.getY() * vScale);

        g.drawImage(i, x - imageOffsetX, y - imageOffsetY, null);
    }
} 
```

前两个开箱即用：

```
drawImageAtLocations(g, waterSupplyImage, groundMap.getWaterSupplyLocations());
drawImageAtLocations(g, energySupplyImage, groundMap.getEnergySupplyLocations()); 
```

第三个有点混乱，但仍然比原来的短：

```
Set<Location> derp = new HashSet<Location>();
for (Fire fire : groundMap.getFires()) derp.add(fire.getLocation());
drawImageAtLocations(g, fireImage, derp);
// drawImageAtLocations(g, fireStatusBarImage, derp); // TODO blah blah 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:06:06.863

首先，您似乎可以有一个接收`Graphics`、a`List<Location>`和图像的通用方法，因此第一种和第二种方法可以提取该列表并调用。

第三种方法可以提取 Fire 的列表，然后创建一个对应的`List<Location>`. 然后使用新方法。

```
private void drawImages(Graphics g, List<Location> where, Image imageToDraw) {
...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T13:06:56.993

我认为一个简单的解决方案是使用一种方法并传递图形和位置集合。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T13:07:11.330

你可以有一个方法。

```
private void drawImageAtLocations(Graphics g, Image image, List<Location> locations) {
    double hScale = getWidth() / (double) groundMap.getWidth();
    double vScale = getHeight() / (double) groundMap.getHeight();

    int imageOffsetX = image.getWidth() / 2;
    int imageOffsetY = image.getHeight() / 2;
    for (Location l : locations) {
        int x = (int) (l.getX() * hScale);
        int y = (int) (l.getY() * vScale);

        g.drawImage(image, x - imageOffsetX, y - imageOffsetY, null);
    }
}

private void drawWaterSupplies(Graphics g) {
    drawImageAtLocations(g, waterSupplyImage, groundMap.getWaterSupplyLocations());
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T13:19:56.813

这就是我的提议

```
enum  Supplies {FIRE(fireImage), WATER(waterImage), ENERGY(energyImage); 
private Bitmap image;
Supplies(Bitmap image)
 {
  this.image = image
 }

 public getImage()
 {
  return image;
 }

} 

private void draw(Graphics g,Supplies supply) {
    double hScale = getWidth() / (double) groundMap.getWidth();
    double vScale = getHeight() / (double) groundMap.getHeight();

    int imageOffsetX = supply.getImage.getWidth() / 2;
    int imageOffsetY = supply.getImage.getHeight() / 2;
    for (Location location : groundMap.getLocations(supply)) {

        int x = (int) (location .getX() * hScale);
        int y = (int) (location .getY() * vScale);

        g.drawImage(supply.getImage, x - imageOffsetX, y - imageOffsetY, null);
    }
} 
```

....您可以在 Map> 中保存的所有火、水、能源等位置，因此方法 getLocations(supply) 或多或少看起来像这样

```
List<Location> getLocations(Supplies supply)
{
return supplyMap.get(supply);
} 
```

如果您想添加或删除耗材和事故，此解决方案可为您提供更大的灵活性

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-02T13:21:56.690

不是最短的选择，但它使代码更干净，更容易扩展：

```
enum YourEnum {
    WATER,
    ENERGY,
    FIRE;
}

private void draw(Graphics g, YourEnum type) {
    Bitmap bitmap = getRightBitmap(type);
    double hScale = getWidth() / (double)groundMap.getWidth();
    double vScale = getHeight() / (double)groundMap.getHeight();

    int imageOffsetX = bitmap.getWidth() / 2;
    int imageOffsetY = bitmap.getHeight() / 2;
    for (Location l : getLocations(type)) {
        int x = (int)(l.getX() * hScale);
        int y = (int)(l.getY() * vScale);

        g.drawImage(bitmap, x - imageOffsetX, y - imageOffsetY,
                null);
    }
}

private Bitmap getRightBitmap(YourEnum type) {
    switch (type) {
        case WATER:
            return waterSupplyImage;
        case ENERGY:
            return waterSupplyImage;
        case FIRE:
            return fireImage;
    }
}

private Collection<Location> getLocations(YourEnum type) {
    switch (type) {
        case WATER:
            return groundMap.getWaterSupplyLocations();
        case ENERGY:
            return groundMap.getEnergySupCollections();
        case FIRE:
            Collection<Location> locations = new ArrayList<Location>();
            for (Fire fire : groundMap.getFires()) {
                locations.add(fire.getLocation());
            }
            return locations;
    }
} 
```

# c# - 从另一个表单加载面板

> ID：12690778
> 
> 赞同：1
> 
> 时间：2012-10-02T13:02:33.163
> 
> 标签：c#, winforms

我创建了 2 个表单，Form1 带有面板，Form2 带有面板。在 Form2 上，我想设计控件，然后在 Form1 中动态加载这些控件。我的想法是我可以使用 VS 设计任意数量的表单，然后使用表单内的这些面板动态加载到 Form1 中。

麻烦的是，form2 使用 Dataset + Databind，然后在加载到 Form1 时停止工作。

我在Form1中尝试过的方法：

```
 From2 from2 = new Form2();

        for (int i = 0; i < cf.Form2.Controls.Count; i++)
        {
            panel1.Controls.Add(cf.Form2.Controls[i]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:05:10.110

*这是假设我准确地阅读了你的意思*

正如您所发现的那样，这种方法是不可行的。

更好的方法是创建一个包含面板的[用户控件。](http://msmvps.com/blogs/deborahk/archive/2009/10/13/winforms-user-controls-101.aspx)在您的用户控件中，您可以公开一个名为 DataBind() 的公共方法，该方法将数据源作为输入参数，并在该方法中绑定数据。

动态加载用户控件比动态加载表单更容易。

在用户控件中，您只需添加一个这样的方法。（根据需要进行修改以满足您的需要）

```
public void BindData(System.Data.DataTable t)
{
   GridView1.DataSource = t;
   if(t.Rows.Count > 0)
   {
      FirstNameTextBox.Text = Convert.ToString(t.Rows[0]["FirstName"])
   }
} 
```

在您的表单中，您可以这样称呼它（当然，应该有错误处理等 - 这是一个关于如何做我所描述的事情的简单示例。）

```
System.Data.DataTable t = new System.Data.DataTable;
System.Data.SqlClient.SqlDataAdapter ad = new System.Data.DataAdapter(sql, connectionstring);
ad.Fill(t);

MyUserControl myControl= new MyUserControl();
myControl.BindData(t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:51:56.283

正如其他答案所述，您需要使用的解决方案是为这些类型的情况创建用户控件。您尝试做的事情不起作用的原因是控件专门设计为只能在单个表单上工作。如果您尝试将控件添加到多个表单，它将只能成功添加到一个。对于 UserControls 来说也是如此。你*不会*能够只制作一个用户控件，然后将其添加到两个表单中。用户控件的优点是您可以将用于创建、初始化和使用某些功能部分的所有代码放置在与表单不同的位置。您将希望创建两个单独的用户控件实例，您添加两个单独的表单。优点只是用于创建面板的代码，以及其中包含或处理它的所有内容，都可以重复使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:10:01.780

我不确定我是否 100% 理解你的意思，如果我错了，请纠正我。您想从各种表单加载子项并在 form1 上动态显示它们吗？我不确定你为什么要这样做。

为什么不使用用户控件，您可以根据需要制作不同的用户控件，并根据需要将这些控件加载到您的 form1 中。

如果您不确定如何执行此操作，请右键单击您的项目>添加新项目>用户控件并进行操作。

# javascript - 在 Google Maps v3 上加载多条路线

> ID：12690779
> 
> 赞同：3
> 
> 时间：2012-10-02T13:02:33.990
> 
> 标签：javascript, google-maps-api-3

我想在谷歌地图上渲染多条路线，例如，如果我点击一个路线的 A 点标记，它会渲染这条路线，如果我点击另一个标记，它会绘制另一条路线，我试过这样做，但它会在我的数据库上加载相同的路由，我有多个 ID，我想用它来定义我将呈现的路由。

所以，我会把我的例子和我的代码发布给你理解。

[这](http://www.inventoresdegaragem.com/dbteste/indexRotas.htm)是我创建路线的项目[这](http://www.inventoresdegaragem.com/dbteste/loadyRotasFred.htm)是加载路线的项目

这是我的加载项目脚本：

```
var map, ren, ser;
var data = {};
var data2 = {};
var directionsDisplay;
var directionResult = [];
var rotaArray = [];

var directionsService = new google.maps.DirectionsService();

var infowindow;

function goma() 
{
   map = new google.maps.Map( document.getElementById('mappy'), {'zoom':12, 'mapTypeId': google.maps.MapTypeId.ROADMAP, 'center': new google.maps.LatLng(-23.611654, -46.700329)});
      var infoWindow = new google.maps.InfoWindow;      

ren = new google.maps.DirectionsRenderer( {'draggable':true} );
ren.setMap(map);
ren.setPanel(document.getElementById("directionsPanel"));
ser = new google.maps.DirectionsService();

  downloadUrl("rotasXML.php", function(data) {

        var rotasXML = data.responseXML;
        var rotas = rotasXML.documentElement.getElementsByTagName("rota");

    for (var i = 0; i < rotas.length; i++ ) 

        {
          var id = rotas[i].getAttribute("id"); 

         var latA =   parseFloat(rotas[i].getAttribute("latA"));
         var lngA = parseFloat(rotas[i].getAttribute("lngA"));
          var latB =   parseFloat(rotas[i].getAttribute("latB"));
         var lngB = parseFloat(rotas[i].getAttribute("lngB"));

          var rotaB = new google.maps.LatLng(
              parseFloat(rotas[i].getAttribute("latB")),
              parseFloat(rotas[i].getAttribute("lngB")));

          var rotaA = new google.maps.LatLng(latA,lngA);

        var html = "<b> Marker " + id + "</b> <br/>", 
               html = html + "FROM  "+latA+" : "+lngA;
               html = html + "<br/>To  "+latB +" : "+lngB;
               var parameter = id+","+latA+","+lngA+","+latB+","+lngB;

               html = html + "<br/><button onclick='doIt("+id+ latA+ latB+ lngA+ lngB+")'>Load Route</button>";

             var wayA = new google.maps.Marker({
            map: map,
            position: rotaA
          });
           rotaArray.push(wayA);
           bindInfoWindow(wayA, map, infoWindow, html);
            }       
      });

      function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

       function downloadUrl(url2, callback) {
      var jax = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      jax.onreadystatechange = function() 
      {
        if (jax.readyState == 4) {
          jax.onreadystatechange = doNothing;
          callback(jax, jax.sts);
        }
      };

      jax.open('GET', url2, true);
      jax.send(null);  
       }

         function doIt(id,latA, latB, lngA, lngB){
      alert(id);

        ser.route({
        'origin':new google.maps.LatLng(latA, lngA),
        'destination':new google.maps.LatLng(latB, lngB), 
        'travelMode': google.maps.DirectionsTravelMode.DRIVING}, 
                    function(response){ 
        ren.setDirections(response);

            }); 

    }
      function setAllMap(map) {
        for (var i = 0; i < rotaArray.length; i++) {
          rotaArray[i].setMap(map);
        }
      }

      function clearOverlays() {
        setAllMap(null);
      }

      function deleteOverlays() {
        clearOverlays();
        rotaArray = [];
      }
} 
```

我想点击航点并渲染正确的路线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:38:21.127

要使标记被选中以显示路线，您将需要数组来保存标记

```
var markerArray  = []; 
```

和路线坐标

```
 var routeArray =[[],[],[],[],[]]; 
```

这是加载标记的代码

```
 // Change this depending on the name of your PHP file
    downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    alert(markers.length);
    for (var i = 0; i < markers.length+1; i++) {
      id = markers[i].getAttribute("id");
      var latA = parseFloat(markers[i].getAttribute("latA"));
      var lngA = parseFloat(markers[i].getAttribute("lngA"));
      var latB = parseFloat(markers[i].getAttribute("latB"));
      var lngB = parseFloat(markers[i].getAttribute("lngB"));
      //fill routeArray
      routeArray[i].push(id);
      routeArray[i].push(latA);
      routeArray[i].push(lngA);
      routeArray[i].push(latB);
      routeArray[i].push(lngB);
      var point = new google.maps.LatLng(latA,lngA);
      //Build html for Infowindow
      var html = "<b> Marker " + id + "</b> <br/>", 
           html = html + "FROM  "+latA+" : "+lngA;
           html = html + "<br/>To  "+latB +" : "+lngB;
           var parameter = id+","+latA.toString()+","+lngA.toString()+","+latB.toString()+","+lngB.toString();
           html = html + "<br/><button onclick='doIt("+id+")'>Load Route</button>";
       var marker = new google.maps.Marker({
        map: map,
        position: point,
      });
      //marker array to allow clearin markers
       markerArray.push(marker);
       bindInfoWindow(marker, map, infoWindow, html);

    }
  } 
```

以及加载路由的代码（从 doIt() 调用）

```
function calcRoute(latAa,lngAa,latBa,lngBa) {
var start = new google.maps.LatLng(latAa,lngAa);
var end =  new google.maps.LatLng(latBa,lngBa);
var request = {
    origin: start, 
    destination: end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.IMPERIAL
};
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
    var route = response.routes[0];
    var summaryPanel = document.getElementById("directions_panel");
    summaryPanel.innerHTML = "";
    // For each route, display summary information.
    i = 0;
      summaryPanel.innerHTML += "From "+route.legs[i].start_address + " <br /> ";
      summaryPanel.innerHTML += "To "+route.legs[i].end_address + "<br />";
      summaryPanel.innerHTML += "Distance: "+route.legs[i].distance.text + "<br />";
      distance = parseFloat(route.legs[i].distance.text)*rate;

    }
}); 
```

}

```
function doIt(id){
  //Convert for array zero index
  id = id-1;
  var latAa= routeArray[id][1];
  var lngAa= routeArray[id][2];
  var latBa= routeArray[id][3];
  var lngBa= routeArray[id][4];
  clearOverlays();
  calcRoute(latAa,lngAa,latBa,lngBa);
  } 
```

这个[DEMO](http://daviestrachan.co.uk/davie/markertest22.html)显示结果

您将不得不相应地修改您的代码。请注意，还有其他功能可以清除源代码中的标记

# jquery - 在 Razor 布局中呈现 ASP.NET MVC 视图会刷新整个站点

> ID：12690780
> 
> 赞同：0
> 
> 时间：2012-10-02T13:02:39.740
> 
> 标签：jquery, asp.net-mvc, razor

在 ASP.Net MVC 项目中，我使用 Razor 内置 _layout.cshtml 和带有页眉和页脚的经典两列布局。这个想法是在布局的右栏中显示我的应用程序视图，并在不重复代码的情况下对整个站点保持一致的外观......

问题是每次我调用一个视图并使用@RenderBody() 在我的布局右列中呈现它的内容时，整个布局都会刷新。这是正常行为吗？

这个 Razor 的布局概念中是否有任何内置机制来仅刷新呈现的视图内容而不是整个站点，或者我是否必须进行 jQuery Ajax 调用并用视图内容替换 div？

谢谢

艾蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:10:31.420

如果你想动态地切换你的内容，你必须通过 ajax 加载数据，然后替换你网站的右栏...... Razor 没有“自动模式”来做到这一点。=P

我有一些使用这种“方法”的项目。我将我的视图呈现为部分视图（在控制器中），然后我得到 html 并将其放在我想要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:10:48.190

**您可以在调用该页面时使用 iframe 而不是 @RenderBody() @{ Layout = null;}**

```
 <ul>
        <li class="LoadContent" data-url="http://api.jquery.com/not-selector/">Jquery-not-selector</li>
        <li class="LoadContent" data-url="http://api.jquery.com/contents/">Jquery-contents</li>
    </ul>
    <iframe src="" width="80%" height="600" id='frameDemo'></iframe> ​

  $(document).ready(function () {
        $('.LoadContent').click(function () {
             $('#frameDemo').attr('src', $(this).data('url'));
        });
    });​ 
```

用于[演示](http://jsfiddle.net/nanoquantumtech/XbRzF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:10:49.533

MVC 有一个内置的 ajax 机制，你可以使用：

[http://msdn.microsoft.com/en-us/library/dd505086(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd505086(v=vs.108).aspx)

以我的经验，它只对非常简单的事情真正有用；我通常只是最终使用 $.post()。

# android - 从一个 android webview 到另一个

> ID：12690782
> 
> 赞同：0
> 
> 时间：2012-10-02T13:02:42.183
> 
> 标签：android, android-activity, android-webview

我的 android 应用程序有一个可点击的欢迎页面，它通向一个带有多个图标的 web 视图。当我单击图标时，它会打开一个 HTML 文件，该文件存储在 assets 文件夹中。同样，单击其他图标会导致在同一 webview 实例中打开 HTML 资源。我的问题是，如果假设我在第三级导航并且我按下 android 设备后退按钮，我会回到欢迎页面（第一级导航）。如果我在第三级导航中按下后退按钮，我如何才能进入所有页面图标都存在的第二级导航。我的二级导航代码如下：

```
public class Home extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        WebView webview = (WebView) findViewById(R.id.webView1);
       webview.loadUrl("file:///android_asset/webpages/index.html");
       webview.getSettings().setBuiltInZoomControls(true);
       webview.getSettings().setSupportZoom(true);
       webview.getSettings().setJavaScriptEnabled(true);
    }

} 
```

index.html 包含用于导航到不同页面的图标，例如contact.html、feedback.html，如果假设我在contact.html 中并且我按下android 上的后退按钮，我应该到达index.html 而不是我的应用程序的第一个屏幕。

@Zyber 我是 java 和 android 开发的新手。我试过你的建议，但是当我按下后退按钮时，我得到强制关闭错误。我的代码如下：

```
 public class Home extends Activity {

    private WebView webview;

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {

                    webview.goBack();

            return true;
        }

        return super.onKeyDown(keyCode, event);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        WebView webview = (WebView) findViewById(R.id.webView1);
       webview.loadUrl("file:///android_asset/webpages/index.html");
       webview.getSettings().setBuiltInZoomControls(true);
       webview.getSettings().setSupportZoom(true);
       webview.getSettings().setJavaScriptEnabled(true);

    }

} 
```

我的 logcat 代码如下：

```
0-02 19:01:07.536: E/AndroidRuntime(4160): FATAL EXCEPTION: main
10-02 19:01:07.536: E/AndroidRuntime(4160): java.lang.NullPointerException
10-02 19:01:07.536: E/AndroidRuntime(4160):     at com.summit.mpidc.Home.onKeyDown(Home.java:21)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.view.KeyEvent.dispatch(KeyEvent.java:2553)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.app.Activity.dispatchKeyEvent(Activity.java:2329)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1825)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3340)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3313)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2473)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.os.Looper.loop(Looper.java:137)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at java.lang.reflect.Method.invokeNative(Native Method)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at java.lang.reflect.Method.invoke(Method.java:511)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
10-02 19:01:07.536: E/AndroidRuntime(4160):     at dalvik.system.NativeStart.main(Native Method) 
```

编辑代码：

```
public class Home extends Activity {

    private WebView webview;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        WebView webview = (WebView) findViewById(R.id.webView1);
       // WebView webview = new WebView(this);
       // setContentView(webview);

       webview.loadUrl("file:///android_asset/webpages/index.html");
       webview.getSettings().setBuiltInZoomControls(true);
       webview.getSettings().setSupportZoom(true);
       webview.getSettings().setJavaScriptEnabled(true);
       webview.getSettings().setUseWideViewPort(true);
       webview.setInitialScale(1);
       webview.canGoBack();

    }

    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack())
        {
            webview.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

我收到空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:07:55.713

如果我对您的理解正确，您可以尝试覆盖该`onKeyDown`功能并对后退按键做出反应。

```
WebView webview;
public void onCreate(...)
{
    ...
    webview = (WebView) findViewById(...);
    ...
}    

public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack())
    {
        webview.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

这将在您按下后退键时拦截，如果您的 webview 有历史记录，它将在历史记录中后退一步。如果您在加载的第一页并按回，它将终止 webview 活动并返回到您的欢迎活动。

编辑：

是的，你也可以使用`onBackPressed`，我想它会更合适。正如 njzk2 所指出的，另一种方法是。

```
@Override
public void onBackPressed()
{
    if(mWebView.canGoBack())
    {
        mWebView.goBack();          
    }
    else
    {
        super.onBackPressed();
    }
} 
```

# asp.net - MySQL 与 Asp.net 编码问题

> ID：12690785
> 
> 赞同：2
> 
> 时间：2012-10-02T13:03:06.333
> 
> 标签：asp.net, mysql

我有一个用 Latin-1 编码的旧 MySQL 数据库，它有阿拉伯文本..

将数据检索到 php 页面时，它显示正确.. 但是当在 asp.net 页面中查看数据时，它会显示奇怪的字符，例如“ÇáÅÚáÇä”.. 我尝试了很多修复，但没有一个解决我的问题.. 这让我头疼在过去的几天里，我将不胜感激，很多人都可以给我一个解决这个问题的方法。在此先感谢。

# cakephp - 获得最喜欢的帖子

> ID：12690789
> 
> 赞同：0
> 
> 时间：2012-10-02T13:03:15.053
> 
> 标签：cakephp

我有一个带有帖子和喜欢的系统（与模型正确链接）。我想获得最喜欢的帖子。

在查看 CakePHP 的文档后，我在 1.2 文档中找到了一些内容：`counterCache`. 但是，它似乎不再适用于 CakePHP 2.x。

那么，你有一个解决方案来获得最喜欢的帖子吗？

这些表是非常基础的：id 并为每个创建并与 post_id 链接以获取喜欢，这里是`likes`表：

```
========================================
|| *id* | created | post_id | user_id ||
======================================== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:43:10.317

[您可以使用CounterCache](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto)来实现这一点，但这意味着将 HABTM 替换为“ [hasMany through](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model) ”

你会有这样的事情：

```
<?php
class Post extends AppModel {
    public $hasMany = array('Like');
    // Note that the "posts" table must have a "like_count" integer field
}
class Like extends AppModel {
    public $belongsTo = array(
        'User',
        'Post' => array('counterCache' => true)
    );
}
class User extends AppModel {
    public $hasMany = array('Like');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:00:35.207

强制加入帖子和点赞，并查询`COUNT()`点赞数、`GROUP BY`计数器、`ORDER BY`计数器降序和`LIMIT x`顶部 x；

试试这个，我假设模型命名为`Post`，`Like`和一个连接表：

```
$options = array();
$options['joins'][] = array('table' => 'likes_posts', 'alias' => 'LikePost', 'conditions' => array('LikePost.post_id = Post.id'));
$options['joins'][] = array('table' => 'likes', 'alias' => 'Like', 'conditions' => array('LikePost.like_id = Like.id'));
$options['fields']  = array('COUNT(Like.id) AS counter', 'Post.*');
$options['group']   = 'Like.id';
$options['limit']   = 1; //you could easily get the top 3, top 5, top 10...
$options['order']   = 'counter DESC';
$data = $this->Post->find('all', $options);
$this->set('data', $data); 
```

# powershell - 遍历 PowerShell $input

> ID：12690791
> 
> 赞同：0
> 
> 时间：2012-10-02T13:03:27.150
> 
> 标签：powershell, foreach, comobject

将文件项传递给函数然后在 foreach 循环中使用 $input 时，我遇到了一些奇怪的行为（如在非确定性中）。

我这样调用我的函数...

```
get-childitem Stuff | Create-Zip C:\Stuff.zip 
```

其中“Stuff”包含一堆包含目录和子目录的文件夹。问题是，在重复运行时，一些顶级目录不会被复制，无论它们是否为空。

该功能几乎是[http://blogs.msdn.com/b/daiken/archive/2007/02/12/compress-files-with-windows-powershell-then-package-a-windows的直接副本-vista-sidebar-gadget.aspx](http://blogs.msdn.com/b/daiken/archive/2007/02/12/compress-files-with-windows-powershell-then-package-a-windows-vista-sidebar-gadget.aspx)

```
function Create-Zip
{
    param([string]$zipfile)
    set-content $zipfile ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
    (dir $zipfile).IsReadOnly = $false  

    $shellApplication = new-object -comObject Shell.Application
    $zipPackage = $shellApplication.NameSpace($zipfile)

    foreach($item in $input)
    { 
        $zipPackage.CopyHere($item.FullName)
        Start-sleep -milliseconds 500
    }
} 
```

问题似乎出在 Start-Sleep 行 - 如果我完全省略它，则 zip 文件是空的……如果我将它增加到 10 秒，则 zip 文件通常是满的。为什么会这样，有没有更好的方法来编写它而不依赖于睡眠值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:43:36.867

`$input`应该在脚本块的上下文中进行评估，`process {}`例如：

```
function Create-Zip
{
    param([string]$zipfile)
     set-content $zipfile ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
     (dir $zipfile).IsReadOnly = $false 

    $shellApplication = new-object -comObject Shell.Application
    $zipPackage = $shellApplication.NameSpace($zipfile)

    process {
        foreach($item in $input)
        { 
            $zipPackage.CopyHere($item.FullName)
            Start-sleep -milliseconds 500
        }
    }
} 
```

但是，如果您使用的是 PowerShell V2，这是传递与文件（字符串路径、FileInfo 等）相关的管道输入的更好方法：

```
function Verb-Noun
{
    [CmdletBinding(DefaultParameterSetName="Path")]
    param(
        [Parameter(Mandatory=$true, Position=0, ParameterSetName="Path", 
                   ValueFromPipeline=$true, ValueFromPipelineByPropertyName=$true,
                   HelpMessage="Path to ...")]
        [ValidateNotNullOrEmpty()]
        [string[]]
        $Path,

        [Alias("PSPath")]
        [Parameter(Mandatory=$true, Position=0, ParameterSetName="LiteralPath", 
                   ValueFromPipelineByPropertyName=$true,
                   HelpMessage="Path to ...")]
        [ValidateNotNullOrEmpty()]
        [string[]]
        $LiteralPath
    )

    Begin { Set-StrictMode -Version latest }

    Process {
        if ($psCmdlet.ParameterSetName -eq "Path")
        {
            # In the -Path (non-literal) case we may need to resolve a wildcarded path
            $resolvedPaths = @($Path | Resolve-Path | Convert-Path)
        }
        else 
        {
            # Must be -LiteralPath
            $resolvedPaths = @($LiteralPath | Convert-Path)
        }

        foreach ($rpath in $resolvedPaths) 
        {
            Write-Verbose "Processing $rpath"
            # ... Do something with the raw, resolved $rpath here ...
        }  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:58:13.487

我注意到 ParseName 在处理项目时返回 null，因此您可以使用以下代码：

```
function Create-Zip
{
    param([string]$zipfile)
         set-content $zipfile ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
         (dir $zipfile).IsReadOnly = $false 

    $shellApplication = new-object -comObject Shell.Application
    $zipPackage = $shellApplication.NameSpace($zipfile)

    foreach($item in $input)
    { 
             $zipPackage.CopyHere($item.FullName)
             do {
                $i = $zipPackage.ParseName($item.Name)
                Start-Sleep -milliseconds 10
            } while ($i -eq $null)
    }
} 
```

它在这里工作没有问题，即使没有 Start-Sleep 只是为了不烧坏 CPU。

# asp.net - 如何获得服务器和客户端页面的总加载时间？

> ID：12690793
> 
> 赞同：1
> 
> 时间：2012-10-02T13:03:30.380
> 
> 标签：asp.net, performance

我正在测量 ASP.NET 页面的性能。我需要测量两个部分：1）服务器页面加载时间（计算从数据库加载的数据绑定控件所需的时间）和 2）测量服务器的 PageLoad 事件启动的毫秒数和客户端已完成加载（因为我希望能够计算客户端浏览器下载和呈现 HTML 所花费的时间）。

使用 StopWatch 类可以轻松测量服务器端加载时间。我需要建议的部分是捕获客户端加载的日期和时间。

这是我按此顺序执行的操作：

*   一旦服务器页面加载事件运行，我将当前日期和时间写入隐藏字段。
*   在客户端，我`$(document).ready()`用来触发对返回服务器日期和时间的 WebMethod 的 AJAX 调用。
*   然后，我从存储在隐藏字段中的日期字符串和从 Webmethod 调用返回的日期字符串中解析日期和时间，并将它们的差异写入`span`页面上的元素。

我这样做是为了让客户端日期时间与服务器日期时间保持同步，因为某人的机器时间很容易被关闭几秒钟。但是，我认为 AJAX 调用本身会增加一点开销，这对性能测量会适得其反。

是否有使用 GMT 将客户端时间与服务器时间同步的准确方法，而无需向服务器报告以获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:06:00.077

关于服务器端，可以在 Page 指令中设置 Trace=true

[http://msdn.microsoft.com/en-us/library/94c55d08(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/94c55d08(v=vs.100).aspx)

# java - 通过 Groovy 在 Java 中解析 XML

> ID：12690794
> 
> 赞同：5
> 
> 时间：2012-10-02T13:03:34.030
> 
> 标签：java, xml, groovy

我正在尝试使用 Groovy 和 Java 的 ScriptEngine API 解析 XML。下面的代码正是这样做的，但我想知道是否有更好的方法来做同样的事情。以及是否有任何与此相关的性能影响？

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import javax.script.Invocable;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
/*
<books>
    <book id="1">
        <name>"Catcher In the Rye"</name>
        <author>J.D. Salinger</author>
    </book>
    <book id="2">
      <name>"KiteRunner"</name>
      <author>Khaled Hosseini</author>
    </book>
</books>
*/

public class XMLParsing{
  public static void main(String[] args) {
    Map<String, ArrayList<String>> resultMap 
                                     = new HashMap<String, ArrayList<String>>();
    resultMap = getBookDetails("c:\\temp\\book.xml");
    System.out.println(resultMap);
  }

  public static Map<String ArrayList<String>> getBookDetails(String scriptXml) {
    Map<String, ArrayList<String>> resultMap = 
                                       new HashMap<String, ArrayList<String>>();
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("groovy");
    String fact = "import java.util.HashMap;" 
                + "import java.util.ArrayList;" 
                + "def getBookInformation(n){" 
                + "def map1 = new HashMap();" 
                + "xmlDesc = new XmlSlurper().parse(n);" 
                + "xmlDesc.book.findAll{it}.each {"
                + "def list1 = new ArrayList();" 
                + "def id = it.@id;" 
                +
                //"println id;"+
                  "def name = it.name;" 
                + "def author = it.author;" 
                + "list1.add(name);" 
                +  "list1.add(author);" 
                + "map1.put(id, list1);" 
                + "};" 
                + "return map1;}";
    try {
      engine.eval(fact);
      Invocable inv = (Invocable) engine;
      Object[] params = {scriptXml};          
      resultMap = (Map<String,ArrayList<String>>)  
                  inv.invokeFunction("getBookInformation", params);
    } catch (ScriptException e) {
      e.printStackTrace();
    } catch (NoSuchMethodException e) {
      e.printStackTrace();
    }
    return resultMap;
  }
} 
```

输出：

```
{1=["Catcher In the Rye", J.D. Salinger], 2=["KiteRunner", Khaled Hosseini]} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T13:15:57.410

您的 Groovy 脚本可能是*“groovy-er”* ...

这做同样的事情：

```
 String fact = "def getBookInformation(n) {" +
                "  xmlDesc = new XmlSlurper().parse(n)\n" +
                "  xmlDesc.book.findAll().collectEntries {\n"+
                "    [ (it.@id):[ it.name, it.author ] ]\n" +
                "  }\n" +
                "}" ; 
```

实际上，您可以使用`GroovyShell`JVM 脚本引擎而不是 JVM 脚本引擎，这样您就可以：

```
import java.util.ArrayList;
import java.util.Map;
import groovy.lang.Binding ;
import groovy.lang.GroovyShell ;

public class XMLParsing {
  public static void main(String[] args) {
    Map<String, ArrayList<String>> resultMap = getBookDetails("test.xml");
    System.out.println(resultMap);
  }

  public static Map<String, ArrayList<String>> getBookDetails( String scriptXml ) {
    Binding b = new Binding() ;
    b.setVariable( "xmlFile", scriptXml ) ;
    GroovyShell shell = new GroovyShell( b ) ;
    Object ret = shell.evaluate( "new XmlSlurper().parse( xmlFile ).book.findAll().collectEntries { [ (it.@id):[ it.name, it.author ] ] }" ) ;
    return (Map<String, ArrayList<String>>)ret ;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:03:34.030

为了让 ScritpEngine 更高效，我们可以使用 Compilable 接口。下面的代码融合了 Tim 的评论和[此处](https://stackoverflow.com/questions/12220267/with-java-scriptengine-groovy-how-to-make-it-more-performant)的讨论的新颖性。

```
public static Map<String, ArrayList<String>> getBookDetails(String scriptXml) {
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("groovy");
    engine.put("xmlFile", scriptXml);
    try {
        if (engine instanceof Compilable) {
            CompiledScript script = ((Compilable) engine).compile( "new XmlSlurper().parse( xmlFile ).book.findAll().collectEntries { [ (it.@id):[ it.name, it.author ] ] }" );         
            return (Map<String, ArrayList<String>>)(script.eval());
        }
    } catch (ScriptException e) {
        e.printStackTrace();
    } 
    return null;
} 
```

输出：

```
{1=["Catcher In the Rye", J.D. Salinger], 2=["KiteRunner", Khaled Hosseini]} 
```

# .net - 为什么 Windows Azure 共享缓存如此缓慢？

> ID：12690802
> 
> 赞同：3
> 
> 时间：2012-10-02T13:03:48.567
> 
> 标签：.net, azure, distributed-caching, azure-caching

我们目前正在将我们的服务器迁移到 Windows Azure，并且我们希望利用 Windows Azure 共享缓存。

我们为缓存编写了一个提供程序，因此我们可以打开和关闭它（如果需要，切换到运行时缓存），但我们发现缓存比运行时缓存慢大约 1000 倍。

例如，从运行时缓存返回网站对象的总时间为 0.0053，其中 Azure 共享缓存的总时间为 73.6638，在某些情况下，总时间为 439.3367

不要误会我的意思，我希望会有一个小的网络延迟，但这是愚蠢的吗？完全无法使用？

该对象很小，缓存的总大小为 0.8mb，因此网站对象很小。

有没有人有什么建议？我应该使用半专用的缓存预览方法吗？如果它像这样无法使用，他们肯定不会有这个共享的吗？

我已经看到本地缓存在网络缓存之上工作，但是当缓存在本地重建时仍然会有延迟？

任何人都可以提供任何建议吗？

**已满足以下条件**

我们正在使用最新版本的 Azure DLL

我们正在使用与 Azure 缓存位于同一数据中心的网站进行测试

SQL Azure 与实例位于同一数据中心，因此数据检索不是问题

我是目前唯一访问该网站的人，所以我不认为并发是一个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:51:53.813

" "

您是否选中了角色属性中的启用缓存？客户端在哪里失败（在堆栈中）？

关于延迟时间，您在专用缓存上看到了什么价值，它很容易设置，不尝试将是犯罪:)

从缓存的角度来看，存储较小的值始终是一个优势，不仅可以节省传输和存储开销，还可以节省序列化和反序列化成本。您是否考虑过在专用缓存上使用本地缓存？如果延迟是您的主要痛苦，那么通常没有什么能比本地缓存更好。

如果您正在尝试 memcache 方案，这可能也值得一看：

[http://blogs.msdn.com/b/silverlining/archive/2012/10/09/using-memcache-to-access-a-windows-azure-dedicated-cache.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/10/09/using-memcache-to-access-a-windows-azure-dedicated-cache.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:49:00.193

为您遇到的问题道歉。Windows Azure 共享缓存之前已发布，并且正在生产中运行。只要您部署在与您配置的缓存相同的数据中心，它就应该为您提供良好的延迟。您的拓扑是什么，缓存在哪里以及您从哪里访问它？

就预览缓存而言，它将为您提供更好的延迟和对缓存的更多控制，因为您是运行它的人。由于您的应用程序是为 memcache 编写的，因此您可能也有兴趣使用我们的 memcache shim。

您可以在此处阅读有关协议支持和其他步骤的信息：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh914167.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh914167.aspx)

关于“我正在使用虚拟机，找不到有关连接它的文档！” ，你想在那里做什么？

# flash - 何时从显示列表中删除对象

> ID：12690805
> 
> 赞同：1
> 
> 时间：2012-10-02T13:03:55.807
> 
> 标签：flash, actionscript

我有一个由许多不同屏幕（登录、菜单、游戏等）组成的 Flash 游戏，每个屏幕都有自己的背景图像。

例如，在成功登录时，我可以执行：

```
addChild(new Menu()); 
```

这将在登录屏幕顶部创建一个菜单，并且登录屏幕将不再可见。同样，如果用户点击菜单中的“玩”，我可以调用`addChild(new Game())`来启动游戏。

我猜这会使显示树像这样

```
-Login page
  - Menu
    - Game 
```

我应该从显示树中删除以前的屏幕吗？例如，当用户单击菜单中的“播放”时。我应该先`removeChild(menu)`打电话`addChild(new Game())`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:09:53.293

是的，否则您会浪费宝贵的内存和 CPU 周期，删除未使用的屏幕的好处肯定超过将所有屏幕保留在显示列表中的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:12:48.330

这显然取决于您的游戏架构以及您如何管理资源。当您将问题标记为 flash 而不是 AIR 时，我将假设该游戏是用于使用网络浏览器进行消费的。

我要指出的第一件事是，通过首先创建对它们的引用来删除您的项目会容易得多：

```
var menu:Menu = new Menu();
addChild(menu);

// later
removeChild(menu); 
```

您需要做的是平衡维护对象的效率与重新创建对象的成本。

如果您有一个正在执行大量计算的对象，那么仅执行 removeChild 可能还不够，通常您在类中有一个 destroy() 方法来清理资源，然后您从头开始重新创建对象，从而允许垃圾收集器更有效地管理资源。

如果您的对象（例如示例中的菜单）没有做任何花哨的事情，那么将其保存在内存中并删除并重新附加到显示列表可能就可以了。

我希望这对您的游戏有所帮助。

# php - Kendo ui弹出网格在删除时没有在php文件中获取数据

> ID：12690806
> 
> 赞同：1
> 
> 时间：2012-10-02T13:03:56.723
> 
> 标签：php, parameters, return-value, json, kendo-ui

我对 kendoui 弹出网格编辑有疑问。当我从网格 parameterMap 中删除任何行时，不会将 ny 值返回到 php 文件。

我的 index.php 代码是

```
 <!DOCTYPE html> 
    <html> 
        <head> 
        <title>CRUD Using Kendo</title>

           <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.1.515/js/kendo.all.min.js"></script>
<link href="http://cdn.kendostatic.com/2012.1.515/styles/kendo.common.min.css" rel="stylesheet" />
<link href="http://cdn.kendostatic.com/2012.1.515/styles/kendo.default.min.css" rel="stylesheet" />

        </head>

<body> 

    <div id="grid"></div> 
     <script type="text/x-kendo-template" id="productsEditTemplate">            
            <form action="employee.php" method="post">
            <label for="price">firstname</label><input data-bind="value: FirstName" name="FirstName"/><br/>
            <label for="discounted">LastName</label><input data-bind="value: LastName" name="LastName"/><br/>
            <input type="hidden" name="pk_id" data-bind="value: pk_id" />           
            <input type="hidden" name="upload" id='uploadedFile' data-bind="value: image" />
            <input type="file" id="files" data-role="upload" 
                data-async='{"saveUrl": "upload.php","autoUpload": "true"}' data-success="onSuccess" name="files" />
                <input type="submit" value="update" />
                </form>
        </script>

<script type="text/x-kendo-template" id="template">

    <div class="subgrid"></div>

</script>

    <script>
        var del = "employee.php?";
        $(function() {
            $("#grid").kendoGrid({

                dataSource: {
                    transport: {
                        read: "employee.php",
            update: {
                url: "employee.php",
                type: "POST"
            },
            destroy: {
                url: "destroy.php",
                type: "POST",
                dataType:"json"
            },
            create: {
                url: "create.php",
                type: "POST"
                },
                parameterMap: function (options, operation) {
                        if (operation !== "read" && options.models) {
                            alert(options.pk_id);
                            return { data: {my: kendo.stringify(options.models)} };
                        }

                }

                    },
                     pageSize: 10,
                    error: function(e) {
                        alert(e.responseText);
                    },
                    schema: {
                        data: "data",
                        model:{
                            id:"pk_id",
                            fields:{
                                FirstName: { editable: true },
                    LastName: { validation: { required: true} },
                    image:{type: "string",defaultValue: ""}
                                }
                            }
                    }

                 },

                columns: [{ field: "FirstName",width: "100px" }, { field: "LastName",width: "50px" },{ command: [{text:"Edit", name:"edit"}, {text:"Delete", name:"destroy"}], title: " ", width: "110px" }],
                width: 510,
                toolbar: ["create"],
                detailTemplate: kendo.template($("#template").html()),
                detailInit: detailInit,
               editable:  {
                    mode: "popup",
                    template: kendo.template($("#productsEditTemplate").html())
                },
                height: 600,
                        filterable: true,
                        sortable: true,
                        pageable: {
                            input: true,
                            numeric: false
                        },
                save: function(e,c){
                        e.model.set("image",$("#uploadedFile").val());
                    }   

            });
        });

function onSuccess(e){  
                $("#uploadedFile").val(e.files[0].name);
        }
function detailInit(e) {
    // get a reference to the current row being initialized 
    var detailRow = e.detailRow;

    // create a subgrid for the current detail row, getting territory data for this employee

    detailRow.find(".subgrid").kendoGrid({
        dataSource: {
            transport: {
                 read: "terretories.php"
            },
            schema: {
                data: "data"
            },

            serverFiltering: true,
            filter: { field: "pk_id", operator: "eq", value:e.data.pk_id}
       },

       columns: [{ title: "Title", field: "title" },{ title: "Age", field: "age" },{ command: "destroy" }],

    });
}
    </script> 

</body>

</html> 
```

destroy1.php 是

```
 <?php
header("Content-type: application/json");
$con = mysql_connect("localhost", "root", "");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
} else {
    mysql_select_db("northwind") or die("Unable To Connect To Northwind");
    $json  = file_get_contents("php://input");
 $verb = $_SERVER["REQUEST_METHOD"];
 if ($verb == "POST") {
 // $employeeId = mysql_real_escape_string($_GET["pk_id"]);

$data  = json_decode($json, true);

  $employeeId = $data[0]['pk_id'];
  echo $data[0]['pk_id'];

 // $employeeId = $json->pk_id;

   $rs = mysql_query("DELETE FROM employees WHERE pk_id = " .$employeeId);
   if ($rs) {
        echo json_encode($rs);
  }
  else {
        header("HTTP/1.1 500 Internal Server Error");
        echo "Failed on delete: " .$employeeId;
  }

 }
   mysql_close($con);
}
?> 
```

现在我不明白为什么parametermap 没有向destroy.php 返回任何值？或者我的 php 文件中是否有任何语法错误？我很困惑请帮助我谢谢

# css - 位置固定 iframe 时忽略右下角

> ID：12690808
> 
> 赞同：3
> 
> 时间：2012-10-02T13:04:07.023
> 
> 标签：css, iframe, position

我有以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head></head>
   <body>
      <iframe src="http://jl.evermight.net" style="overflow:scroll; display:block; position:fixed; top:10px; bottom:10px; right:10px; left:10px;"></iframe>
   </body>
</html> 
```

为什么我的 iframe 没有填满整个浏览器窗口，在浏览器窗口的顶部、右侧、底部和左侧之间只留下 10 px 的空间？如果我用 ap 标签替换 iframe 标签，同时保持样式规则，那么它可以与 p 标签一起使用。

似乎 iframe 忽略了我的右侧和底部 CSS 规则。如何让 iframe 承认右下角规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:24:47.530

正如 Alan Shortis 建议的那样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head></head>
    <body>
        <div style="position:fixed; top:10px; bottom:10px; right:10px; left:10px;">    
            <iframe src="http://jl.evermight.net" style="overflow:scroll;width:100%;height:100%;"></iframe>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:14:19.313

和

```
 position:absolute; 
```

作品？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T10:16:41.223

如果由于某种原因您不想要周围的 div 并且您需要使用 position:fixed 而不是 absolute 您可以在宽度和高度设置中使用 calc 函数。

# javascript - 用于 html/javascript/ajax 的 ui 库和 ide 以创建桌面样式应用程序

> ID：12690810
> 
> 赞同：2
> 
> 时间：2012-10-02T13:04:29.053
> 
> 标签：javascript, ajax, html, jquery

由于多平台的原因，我希望使用 html/javascript/ajax 开发一个桌面应用程序。只是想知道是否有 UI 库和 Web IDE（如 webos enyo）供我构建 html/ajax 应用程序？

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:06:02.573

例如，您可以使用：[http ://www.sencha.com/](http://www.sencha.com/)

# c# - 具有 Web 服务的 .net 应用程序架构

> ID：12690812
> 
> 赞同：0
> 
> 时间：2012-10-02T13:04:41.377
> 
> 标签：c#, .net, architecture

我只需要一点帮助来组织我的代码。这不是哲学，而是真正的问题。我正在寻找一个可行的解决方案。例如在 php 和 symfony 框架中，如何组织代码非常清楚。在 c# .net 中，我感到迷茫。
我只想重新使用某些部分从头开始重写我的项目。

**描述**
首先，因为我的目标是许多平台 windows mobile 、 windows desktop 、 android 、 web ，所以我似乎应该将功能公开为 Web 服务，而不是直接与数据库通信。这个对吗 ？
然后我需要一些客户端应用程序。一个wpf，android和windows mobile。

在 wpf 我想我可以使用 MVVM 模式。

**问题**
我将 postgresql 与 ADO.NET 一起使用，与其他类似应用程序相比，其性能令人惊叹。我发现[Dapper](http://code.google.com/p/dapper-dot-net/)会有很大帮助，并且是我一直在寻找的东西。但是我在哪里放置sql代码时遇到了麻烦。好的，我有模型类.. 像 Customer ，Oder 等......那么我应该把 sql 代码放在哪里？我应该将 CRUD 代码放在单独的类中吗？目前我在控制器类中有一些代码，但是当我想要一些东西时，我一直在构造一个新的控制器类。这似乎并不好。
是否有任何模式如何组织数据库代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:22:06.867

您的后端部分需要提供以下功能：

1.  与客户端一起操作：处理来自客户端的请求并将响应发送回客户端。这里的主要问题是定义请求/响应格式。您可以使用 SOAP 或 REST，例如，.NET 框架服务框架（如 WCF）适用于这两种协议，但对我而言，它更面向 SOAP。WCF 使用类集来描述服务契约，所以我认为使用某些实体而不是纯 ADO.NET 会更好

2.  通知客户错误：包括验证错误和异常。验证消息需要在客户端显示，通常通过属性名称，也应该处理异常。处理与数据库相关的错误并将其转换为域模型错误也存在问题。

3.  WCF 架构基于`services`- 它是契约，它的实现由一组协议访问。由于 WCF 使用实体序列化和反序列化，因此将任何业务逻辑放入实体并不是一个好主意。将其放在单独的类 ( `repositories`) 中并从您的服务中调用存储库。所谓`anemic domain model`- 领域实体不包含任何业务逻辑 - 相反`rich domain model`- 实体包含业务逻辑。

4.  对数据库的访问通常被封装到一组称为**数据访问层**（或 DAL）的类中。DAL 提供了一组将实体持久化到数据库或从数据库加载实体所需的方法。该方法不应该包含业务逻辑，而是从业务逻辑层封装数据库细节和结构。实现该层常用的辅助工具：如 ORM（实体框架、BLToolkit 等）。

5.  业务逻辑层 (BLL) - 使用 DAL 中的方法来持久化实体。它不应该直接与数据库一起使用 - 只需从 DAL 调用方法。业务逻辑包含实体和实体集的所有操作——包括验证、计算、权限检查等。

**编辑**

为了支持事务，您可以使用与数据库类（如[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)）或 ORM 内置的事务支持分离。

让业务逻辑相对不依赖于 DAL 操作总是好的——即以它不知道实体的方式的业务层流程实体将被保存。如果可能的话，您可以将数据库事务封装在 DAL 中 - 但这可能必须让您拥有带有大量参数的丑陋方法，并传递大量实体和集合来保存内部事务。

但通常这是不可能的，业务逻辑层方法会多次调用 DAL 操作 - 加载和保存其他实体。在这种情况下，事务范围或它的 ORM 类似物是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:06:37.147

您可能想考虑一个使用业务逻辑层、数据访问层和用户界面的 N 层应用程序。更多细节：[http ://en.wikipedia.org/wiki/Multitier_architecture](http://en.wikipedia.org/wiki/Multitier_architecture)

我会这样做，并通过 DAL（数据访问层）访问我所有的存储过程或 SQL 代码（或 LINQ-To / EF）。

但是，如果您使用 Web 服务（我猜您将只有 UI 和 BL 层），这可能不是必需的 - 只需调用 Web 服务并执行您需要对结果执行的操作。

因此，您的应用程序将仅是 UI 和 BL。BL 调用 web 服务（如果你有一个，它会调用 DAL），检索数据并做它需要做的事情。

然后，您的 Web 服务将成为 BL 和 DAL，仅在 BL 处理请求/响应并与 DAL 通信以将数据传递回应用程序的情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:13:20.000

> 我应该把sql代码放在哪里，我应该把CRUD代码放在一个单独的类中吗？

是的，看看[Repository 模式](http://martinfowler.com/eaaCatalog/repository.html)——你的数据代码应该是独立的并返回对象，例如`Customer`. [Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)或[NHibernate](http://nhforge.org/)可以提供合适的功能并且是行业标准。

您还可以在其上放置一个[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)，从您的多个前端调用它。

确保在层之间使用[DI](http://martinfowler.com/articles/injection.html)以减少紧密耦合，我现在喜欢[StructureMap](http://docs.structuremap.net/)，但有很多好的框架。

顺便说一句，您还可以在 MVC 中使用 MVVM 模式。

# dependency-injection - 使用可以创建自身实例的类解决循环依赖

> ID：12690818
> 
> 赞同：2
> 
> 时间：2012-10-02T13:05:02.713
> 
> 标签：dependency-injection, inversion-of-control, ninject, ioc-container

我是 Dependency Injection 的新手，并且一直在玩 Ninject 尝试制作小型测试应用程序来了解这些概念。Mark Seemann 的[.NET 中的依赖注入](http://affiliate.manning.com/idevaffiliate.php?id=1150_236 ".NET 中的依赖注入")是我阅读列表中的下一个。

我在简短的测试中遇到的一个问题是，我不知道如何处理类可以实例化其类型的新实例的情况。一个示例是带有按钮的表单。当用户单击按钮时，表单会创建另一个相同类型的表单。

如果不使用 DI，在上述场景中，您只需`new`在原始表单的 click 事件处理程序中创建另一个表单实例。我的理解（我在这方面可能很天真）首选方法是使用抽象工厂来创建实例并让类依赖它。

下面是我尝试过的代码（与表单无关，只是普通类）由于循环依赖关系而无法工作，我确实明白为什么会发生这种情况。我只是想不出一个不需要我`new`手动完成的好解决方案。我觉得我错过了一个关键部分。

```
public interface IMainClass
{
    IMainClass CreateNew();
    void Do();
}

public interface IMainClassFactory
{
    IMainClass CreateNew();
}

public class MainClassFactory : IMainClassFactory
{
    private readonly IMainClass _mainClass;

    public MainClassFactory(IMainClass mainClass)
    {
        _mainClass = mainClass;
    }

    public IMainClass CreateNew()
    {
        return _mainClass;
    }
}

public class MainClass : IMainClass
{
    private readonly IMainClassFactory _mainClassFactory;

    public MainClass(IMainClassFactory mainClassFactory)
    {
        _mainClassFactory = mainClassFactory;
    }

    public IMainClass CreateNew()
    {
        return _mainClassFactory.CreateNew();
    }

    public void Do()
    {
        Console.WriteLine("Do from Main Class");
    }
}

public class Program
{
    public static void Main()
    {
        IKernel kernel = new StandardKernel();

        kernel.Bind<IMainClassFactory>().To<MainClassFactory>();
        kernel.Bind<IMainClass>().To<MainClass>();

        var mainClassFactory = kernel.Get<IMainClassFactory>();
        var mainClass = mainClassFactory.CreateNew();

        mainClass.Do();

        Console.WriteLine("Press <ENTER> to exit...");
        Console.ReadLine();
    }
} 
```

我知道这段代码不正确。

*   IMainClass 是否应该实现 IMainClassFactory？有关系吗？
*   `kernel.Bind<IMainClass>().To<MainClass>();`似乎不对，但我不知道该怎么办
*   `new`完全禁止你自己的对象吗？
*   我想我很好地掌握了不使用服务定位器反模式的方法。我不希望我的班级知道任何 IOC 容器。

我确信这些类型的场景一直在发生，所以我正在寻找一般情况下的首选解决方案。如果可能的话，我想避免使用任何特定于 Ninject 的奇异特性，以防我想转向不同的实现。

**编辑1：** [“检测到Autofac Circular Component Dependency”错误](https://stackoverflow.com/questions/10638241/autofac-circular-component-dependency-detected-error) 这个问题看起来很相似，但接受的答案似乎是在提倡服务定位器？也许我读错了，但看起来它违反了好莱坞原则

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:40:11.200

从纯 DI 的角度来看，抽象工厂将是正确的方法，但也许您在这里遗漏了一个模式：

> 当用户单击按钮时，表单会创建另一个相同类型的表单。

表单不应直接依赖于其他表单。这将它们硬连接在一起。应该有一个集中点来处理屏幕导航和应用程序的流程。换句话说，您缺少的是[Application Controller](http://martinfowler.com/eaaCatalog/applicationController.html)。

你的表格应该取决于一个`IApplicationController`或类似的东西。此应用程序控制器可能再次依赖于创建新表单的抽象工厂。

# c# - 外壳覆盖图标不显示

> ID：12690819
> 
> 赞同：1
> 
> 时间：2012-10-02T13:05:06.710
> 
> 标签：c#, .net, shell, icons, overlay

我正在尝试为我的应用程序实现自定义覆盖图标。这是（简化的）代码：

```
[ComVisible(true)]
[Guid("30BD35BE-D5CE-4751-A3B3-9D601F926E36")]
public abstract class OverlayIconBase : IShellIconOverlayIdentifier
{
    private const string OverlayIdentifiersKeyPath = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\ShellIconOverlayIdentifiers";
    private readonly string _iconFileName;
    protected OverlayIconBase()
    {
        _iconFileName = GetType().Assembly.Location;
    }

    protected static void Register(Type type, string registrationName)
    {
        string guid = type.GUID.ToString("B").ToUpper();

        string keyPath = OverlayIdentifiersKeyPath + "\\" + registrationName;
        using (var key = Registry.LocalMachine.CreateSubKey(keyPath))
        {
            key.SetValue(string.Empty, guid);
        }

        NativeMethods.SHChangeNotify(SHChangeNotifyEvents.AssocChanged, SHChangeNotifyFlags.IdList, IntPtr.Zero, IntPtr.Zero);
    }

    protected static void Unregister(Type type, string registrationName)
    {
        string keyPath = OverlayIdentifiersKeyPath + "\\" + registrationName;
        Registry.LocalMachine.DeleteSubKeyTree(keyPath, false);

        NativeMethods.SHChangeNotify(SHChangeNotifyEvents.AssocChanged, SHChangeNotifyFlags.IdList, IntPtr.Zero, IntPtr.Zero);
    }

    public int IsMemberOf(string path, uint attributes)
    {
        try
        {
            return ShouldDisplay(path) ? WinError.S_OK : WinError.S_FALSE;
        }
        catch
        {
            return WinError.E_FAIL;
        }
    }

    public int GetOverlayInfo(IntPtr pwszIconFile, int cchMax, out int iconIndex, out uint flags)
    {
        iconIndex = 0;
        flags = 0;
        if (string.IsNullOrEmpty(_iconFileName) || fileName.Length + 2 > cchMax)
            return WinError.E_FAIL;

        int count = Encoding.Unicode.GetByteCount(_iconFileName);
        byte[] bytes = new byte[count + 2];
        Encoding.Unicode.GetBytes(_iconFileName, 0, _iconFileName.Length, bytes, 0);
        Marshal.Copy(bytes, 0, pwszIconFile, bytes.Length);
        iconIndex = IconIndex;
        flags = (uint) (ShellIconOverlayIdentifierFlags.ISIOI_ICONFILE | ShellIconOverlayIdentifierFlags.ISIOI_ICONINDEX);
        return WinError.S_OK;
    }

    public int GetPriority(out int priority)
    {
        priority = Priority;
        return WinError.S_OK;
    }

    // 0-100 (0: highest); typically 0
    protected virtual int Priority { get { return 0; } }

    protected abstract bool ShouldDisplay(string path);
    protected abstract int IconIndex { get; }
}

[ComVisible(true)]
[Guid("76344480-04C1-4D15-A0A5-578881CEF415")]
public class MyOverlayIcon1 : OverlayIconBase
{
    private const string RegistrationName = "MyOverlayIcon1";

    [ComRegisterFunction]
    static void Register(Type t)
    {
        Register(t, RegistrationName);
    }

    [ComUnregisterFunction]
    static void Unregister(Type t)
    {
        Unregister(t, RegistrationName);
    }

    protected override bool ShouldDisplay(string path)
    {
        /* some logic to decide if the overlay should be displayed... */
    }

    protected override int IconIndex
    {
        get { return 0; }
    }
} 
```

这些图标使用 Win32Res 嵌入到 DLL 中，如此处[所述](http://blogs.msdn.com/b/astebner/archive/2006/02/28/541036.aspx)。

通过使用 附加到 explorer.exe `Debugger.Launch`，我能够确认`GetOverlayInfo`并按`IsMemberOf`预期工作，但是覆盖不会显示在资源管理器中。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:56:18.127

您可能遇到了与此线程中讨论的类似的问题。[Tortoise-svn 图标在 Windows 7 下不显示](https://stackoverflow.com/questions/1057734/tortoisesvn-icons-not-showing-up-under-windows-7)

# php - 如何在 PHP 中传递指向函数（及其参数！）的指针

> ID：12690820
> 
> 赞同：1
> 
> 时间：2012-10-02T13:05:08.663
> 
> 标签：php, function, pointers

过了一会儿，我终于能够像这样传递一个指向函数的指针：

```
function originalFunction($value) {
  print "I am in the function, with value $value";
}

function testFunctionPointer($functionName, $id) {
  $functionName($id);
}

$test = testFunctionPointer("originalFunction", 200); 
```

基本上，我意识到如果你传递一个 STRING 并将该字符串用作函数名，那么函数就会被执行。事实上，在上面的例子中，“originalFunction”被正确调用了。

但是我怎样才能让参数工作呢？它总是为零...

PS：我知道我正在做的事情不干净，不应该做，等等等等等等。但这只是我为自己做的一个内部项目，所以没有人会因此受到伤害；）

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:08:40.533

嗯，除了删除 ] 并放入 } 之外，这段代码对我有用，我知道我在函数中，值为 200

我正在运行 php 5.4.4

```
<?php 

function originalFunction($value) { 
  print "I am in the function, with value $value"; 
}

function testFunctionPointer($functionName, $id) { 
  $functionName($id); 
} 

$test = testFunctionPointer("originalFunction", 200); 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:12:39.050

您的代码对我来说执行得很好，`200`按预期输出。

你也可以像这样直接调用它：

```
call_user_func("originalFunction", 200); 
```

# javascript - XHTML 1.0 严格错误： 忘记关闭前一个元素。此消息的一个可能原因是您试图将块级元素（例如“< p>”或“”）放入内联元素（例如“”、“”或“”）中。关于我应该如何编写它以符合 W3C 的任何线索？谢谢 ！通常在不重新启动 CouchDB 的情况下随意移动文件就像在奶奶坐在椅子上时将椅子移动到椅子上一样。迟早，她会注意到.... 我猜您已经重新定位了 cou

> ID：12690822
> 
> 赞同：-2
> 
> 时间：2012-10-02T13:05:14.540
> 
> 标签：javascript, xhtml, onchange, w3c, validation

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:08:08.470

答案就在里面

> 文档类型不允许此处的元素“选择”；缺少“p”、“h1”、“h2”、“h3”、“h4”、“h5”、“h6”、“div”、“pre”、“address”、“fieldset”、“ins”之一, "del" start-tag 提到的元素不允许出现在你放置它的上下文中；其他提到的元素是唯一允许在那里并且可以包含提到的元素的元素。**这可能意味着您需要一个包含元素，或者您可能忘记关闭前一个元素。**此消息的一个可能原因是您试图放置块级元素（例如“< p>”或“”

我们无法为您提供更好的答案，因为您提供的代码只是选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:11:34.773

从互联网上看，听起来像是`<Select>`一个内联元素，需要在块元素中，如`<p>`or `<div>`。[请参阅此处](http://xhtml.com/en/xhtml/reference/select/)的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:08:06.443

错误消息的第一位是最重要的：

> 文档类型不允许此处的元素“选择”；

将`<select>`元素移动到允许的位置。

很难建议可能在哪里，因为您没有提供有关“这里”在哪里的任何详细信息。

# sql - 如何获得两行的总和

> ID：12690829
> 
> 赞同：1
> 
> 时间：2012-10-02T13:05:46.960
> 
> 标签：sql, oracle, select, insert

我在一个表中有两行。我想添加第三行来保存总值。

我的桌子是

```
SELECT 
CONTROLLED_PERCENTAGE, EL_CLIENT_ID, ID, 
   PERC_ADJ_UNITS_RECEIVED, PHY_DIG_OR_TOTAL, RECORDING_ID, 
   SUM_UNITS_RECEIVED, UNIT_TYPE
FROM EL_CLIENT_REC_UNITS; 
```

我将拥有`EL_CLIENT_ID`, `UNIT_TYPE`,`PHY_DIG_OR_TOTAL`将是“PHY”或“DIG”，我希望得到总数。我想将两条记录相加`SUM_UNITS_RECEIVED`，`PERC_UNITS_RECEIVED`其中`UNIT_TYPES`,`EL_CLIENT_ID`和`RECORDING_ID`s 是相同的。然后我想将其作为具有相同的新行插入`UNIT_TYPE`，`RECORDING_ID`但这次已`PHY_DIG_OR_TOTAL`设置为“TOTAL”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:25:57.437

尝试这样的事情：

```
SELECT 
    ID, 
    EL_CLIENT_ID, 
    RECORDING_ID, 
    UNIT_TYPE,
    PHY_DIG_OR_TOTAL, 
    CONTROLLED_PERCENTAGE, 
    SUM_UNITS_RECEIVED, 
    PERC_ADJ_UNITS_RECEIVED
FROM EL_CLIENT_REC_UNITS

UNION ALL -- concatenate sets

SELECT 
    NULL                         AS ID, -- No ID for this row
    EL_CLIENT_ID                 AS EL_CLIENT_ID, 
    RECORDING_ID                 AS RECORDING_ID, 
    UNIT_TYPE                    AS UNIT_TYPE, 
    'TOTAL'                      AS PHY_DIG_OR_TOTAL, 
    AVG(CONTROLLED_PERCENTAGE)   AS CONTROLLED_PERCENTAGE,  -- I don't know what to do with that
    SUM(PERC_ADJ_UNITS_RECEIVED) AS PERC_ADJ_UNITS_RECEIVED,
    SUM(SUM_UNITS_RECEIVED)      AS SUM_UNITS_RECEIVED
FROM EL_CLIENT_REC_UNITS
GROUP BY UNIT_TYPE, EL_CLIENT_ID, RECORDING_ID; 
```

尝试谷歌搜索`GROUP BY`SQL 语句以了解有关此语句的更多信息。

# php - mysql查询选择计数

> ID：12690841
> 
> 赞同：0
> 
> 时间：2012-10-02T13:06:39.753
> 
> 标签：php, mysql

我必须使用计数和组，我有点困惑。

我有 2 张桌子：

*   `users`

    ```
    id_user | 名字 | 姓氏 | 流派 | logo_src
    ```

和

*   `user_stalking`

    ```
    用户 ID | user_stalking_id
    ```

目前，我的查询如下所示：

```
SELECT   us.user_id, us.user_stalking_id, us.notification_viewed, u.id_user,
         u.firstname, u.lastname, u.logo_src, u.genre, us.id, us.date
FROM     users u, user_stalking us
WHERE    us.user_id = ".$_SESSION['user']['id_user']."
     AND us.notification_viewed = 0
     AND us.user_stalking_id = u.id_user
ORDER BY us.date DESC 
```

它返回：

```
约翰 | 琼森 | 图片1.png | 男性
```

现在我想接收在`user_stalking.user_id`and`user_stalking.user_stalking_id`字段中包含相同 ID 的所有行的计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:16:57.023

首先，我希望在此声明之前的某个地方你正在检查/清理 $_SEESION['user']['id_user'] 值，否则你会让自己对注入攻击敞开大门。

要回答您的问题，您可以通过像这样更改查询来检索这两个值（可能不是最有效的查询）。

```
SELECT  us.user_id, us.user_stalking_id, us.notification_viewed, u.id_user, u.firstname, u.lastname, u.logo_src, u.genre, us.id, us.date, 
    (SELECT COUNT(s.user_id) FROM user_stalking s WHERE s.user_id = u.user_id) AS stalking_count, 
    (SELECT COUNT(s2.user_id) FROM user_stalking s2 WHERE s2.user_stalking_id = u.user_id) AS being_stalked_count 
FROM    users u, user_stalking us 
WHERE   us.user_id = ".$_SESSION['user']['id_user']." 
    AND us.notification_viewed = 0 
    AND us.user_stalking_id = u.id_user ORDER BY us.date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:21:18.267

select count(*) AS count from users u, users_stalking us where u.user_id = us.user_stalking_id ??

（抱歉打错了，这是手机发的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:22:56.640

```
SELECT   COUNT(us.user_id)
FROM     users AS u
JOIN     user_stalking AS us ON (us.user_stalking_id = u.id_user)
WHERE    us.user_id = ".(int)$_SESSION['user']['id_user']."
          AND us.notification_viewed = 0
GROUP BY us.user_id
ORDER BY us.date DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:27:31.570

“现在我想在 user_stalking.user_id 和 user_stalking.user_stalking_id 字段中接收包含相同 ID 的所有行的计数。”

我猜你正在寻找的是一个 equi join/inner join 查询。

```
 select count(*) from users u, user_stalking us where us.user_id = ".$_SESSION['user']['id_user']."
 AND u.id_user=us.user_stalking_id 
```

# java - 注入构造函数属性

> ID：12690846
> 
> 赞同：1
> 
> 时间：2012-10-02T13:06:58.953
> 
> 标签：java, spring, code-injection

我正在注入一个列表，该列表将填充类中使用的地图。

但是，在注入流动属性时：

```
private List<?> srcSystemIDList; 
```

通过流动的 XML：

```
<bean id="transformerHelper" class="com.common.TransformerHelper">
        <property name="srcSystemIDList" value="#{ T(java.util.Arrays).asList('6','57','92','93','7','108','106','105','98','52','122','9','26','51','101','102','118') }" />
</bean> 
```

此方法使用它来设置地图：

```
 public void srcSystemIDListInit()
{
        Object[] srcSystemArray = srcSystemIDList.toArray();
        int j;
        for(int i = 0; i< srcSystemArray.length; i = i+2)
        {
            j = i + 1;

            if(j < srcSystemArray.length)
            {
                srcSystemIDMap.put(srcSystemArray[i].toString(), srcSystemArray[j].toString());
            }
        }
} 
```

我通过构造函数调用它。

```
public TransformerHelper()
{
    srcSystemIDListInit();
} 
```

但是，当构造函数调用该方法时，列表为空，抛出空指针异常。

如何通过注入列表填充地图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:17:43.887

如果你想通过构造函数注入，那么你应该将你的构造函数声明为

```
public TransformerHelper(List<?> srcSystemIDList)
{
    this.srcSystemIDList = srcSystemIDList;
    srcSystemIDListInit();
} 
```

你的bean定义应该是

```
<bean id="transformerHelper" class="com.common.TransformerHelper">
    <constructor-arg value="#{ T(java.util.Arrays).asList('6','57','92','93','7','108','106','105','98','52','122','9','26','51','101','102','118') }" />
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:20:24.150

你可以按照 Vikdor 说的做，或者你也可以采取其他一些方法。

1.  您可以调用此方法，而不是从构造函数，而是从您的 setter 方法`setSrcSystemIDList(...)`。这将需要最少的工作。（但实际上，所有这些建议都很容易......）
2.  您可以实现该[`InitializingBean`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html)接口，并从那里调用您的方法。
3.  您可以使用 注释该方法[`@PostConstruct`](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)。
4.  您可以向 xml 添加一个[`init-method`](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-lifecycle-initializingbean)属性`bean`，该属性指定要调用的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:19:02.230

您可以从属性设置器调用初始化：

```
public void setSrcSystemIDList(List<?> srcSystemIDList) {
    this.srcSystemIDList = srcSystemIDList;
    srcSystemIDListInit();
} 
```

并按原样使用您的弹簧配置。

或者定义一个带参数的构造函数：

```
public TransformerHelper(List<?> srcSystemIDList) {
    this.srcSystemIDList = srcSystemIDList;
    srcSystemIDListInit();
} 
```

并将列表作为构造函数参数传输到 spring 配置中：

```
<bean id="transformerHelper" class="com.common.TransformerHelper">
       <constructor-arg value="#{  T(java.util.Arrays).asList('6','57','92','93','7','108','106','105','98','52','122','9','26','51','101','102','118') }" />
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:19:30.793

你应该看看这样的东西

```
<bean id="transformerHelper" class="com.common.TransformerHelper">
    <constructor-arg><ref bean="yourListBean"></constructor-arg>
</bean> 
```

访问[源](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)以获取更多信息。

干杯，

# jsf - 将 inputText 元素动态添加到绑定的 dataTable 会清空其他 inputText

> ID：12690850
> 
> 赞同：0
> 
> 时间：2012-10-02T13:07:17.910
> 
> 标签：jsf, facelets

我正在设计一个表单制作器，用户可以在其中为他们的问题添加多个选项。因此，每个选项都有一个添加新选项按钮和一个删除按钮。我想`dataTable`在我的 Facelets 页面中使用 a 并将其与`HtmlDataTable`我的托管 bean 中的 an 绑定，以便动态添加/删除选项，因为我们不知道他们想要添加多少选项。所以我所做的是 my 的值`dataTable`是一个`List`字符串。我的输入文本（选项）被添加和删除，当他们添加整个问题时，它们被正确存储在我的数据库中。但是每次按下添加或删除按钮时，我的选项都是空的，因此用户必须再次输入它们。我的代码有点长，所以我会为您提供它们的简化版本。

在我的 Facelets 页面上，我有：

```
<h:dataTable value="#{questionMaker.selectOneOptionList}" var="option" binding="#{questionMaker.table}"> 
<h:column>                                                                                     
<h:inputText value="#{option}"/>
<h:commandLink value="remove option" action="#{questionMaker.removeRadioButtonOption}"/>                                           
</h:commandLink>
</h:column>
</h:dataTable> 
```

在我的托管 bean 中，上述变量是：

```
private HtmlDataTable table;
private List<String> selectOneOptionList; 
```

当然，他们也有 getter 和 setter。这是我的添加方法：

```
public void addRadioButtonOption() {
    String option = new String();
    selectOneOptionList.add(option);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:24:17.830

这种方法有几个（潜在的）问题：

*   为了使这个构造工作，bean 必须是视图范围的（不是请求范围或会话范围）。在请求范围内，`selectOneOptionList`将在每个请求上重新创建。你不想拥有那个。在会话范围内，bean 将在所有浏览器窗口/选项卡之间共享。你也不想拥有那个。

*   该`binding`属性在视图构建期间运行。因此，如果`#{questionMaker}`是视图范围，那么由于[JSF 问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790) ，它会成为隐式请求范围。

*   作为一个不可变对象，`String` 没有setter 方法。将`<h:inputText value="#{option}"/>`永远无法设置输入的值。

因此，要解决您的问题，您必须：

*   确保您的 bean 是`@ViewScoped`.
*   不要让`binding`属性指向视图范围的 bean 属性。
*   要么用`String`一个完整的 javabean 替换，要么按索引访问列表项。

所以，这应该可以（假设你`List<String>`出于某种原因仍然想坚持）：

```
<h:dataTable value="#{questionMaker.selectOneOptionList}" binding="#{table}"> 
  <h:column>                                                                                     
    <h:inputText value="#{questionMaker.selectOneOptionList[table.rowIndex]}"/>
    ...
  </h:column>
</h:dataTable>
<h:commandButton value="add" action="#{questionMaker.addRadioButtonOption}" /> 
```

和

```
@ManagedBean
@ViewScoped
public class QuestionMaker {

    private List<String> selectOneOptionList;

    @PostConstruct
    public void init() {
        selectOneOptionList = new ArrayList<String>();
    }

    public void addRadioButtonOption() {
        selectOneOptionList.add(new String());
    }

    public List<String> getSelectOneOptionList() {
        return selectOneOptionList;
    }

} 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)
*   [在 List<String> 上使用 <ui:repeat><h:inputText> 不会更新模型值](https://stackoverflow.com/questions/10780858/jsf-2-executing-values-in-uirepeat-doesnt-commit-the-values/10784078#10784078)

# java - 为什么我们在 char 数组而不是 String 中从控制台读取密码

> ID：12690861
> 
> 赞同：20
> 
> 时间：2012-10-02T13:08:11.140
> 
> 标签：java, console

> **可能重复：**
> [为什么 char[] 优先于密码字符串？](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords)

当我准备时，`OCPJP`我遇到了这个主题 - “从控制台读取用户输入”。

有一个例子，它`username`在`String`参考中读取，而`password`在`char[]`数组中，但我不明白为什么它使用 char 数组。这是代码： -

```
Console console = System.console();

String username = console.readLine("User Name? ");
char[] password = console.readPassword("Password? "); 
```

这让我产生了疑问。为什么我们不使用**字符串**引用来存储密码。由于**`Strings`**是**不可变的，**因此在字符串中读取密码必须更安全，因为它的内容无法更改。

那么，读取数组的重点是`password`什么`char[]`..

任何人都可以在这件事上有所了解吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T13:11:28.607

正如您所说，字符串是不可变的，这意味着一旦您创建了字符串，如果另一个进程可以转储内存，那么在 GC 启动之前，您无法摆脱数据（好吧，可能有反射）。

使用数组，您可以在使用完数据后显式擦除数据：您可以用您喜欢的任何内容覆盖数组，并且密码不会出现在系统中的任何位置，即使在垃圾收集之前也是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T13:12:20.493

来自[java.io.Console 的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)：

> **安全说明**：如果应用程序需要读取密码或其他安全数据，它应该使用`readPassword()`或`readPassword(String, Object...)`手动归零处理后返回的字符数组，以最大限度地缩短内存中敏感数据的生命周期。

这只是为了防止其他应用程序（如键盘记录器等）访问密码。

此外，如果您使用`String`，因为它们是不可变的，修改它们会在内存中创建副本。在这种情况下，使用`char[]`会拯救你。由于它们是可变的，它们不会创建副本，您可以在处理后将它们设为空。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T13:11:35.507

我相信这样您就可以在不再需要它们时通过覆盖它们来从内存中清除它们。至少在 Java 中，如果你使用 String，那么内存中可能会有剩余的副本。

如果您使用 for 循环覆盖 char 数组并将每个值设置为 0，我认为内存中不会有任何剩余副本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-02T13:11:00.867

由于字符串是不可变的，因此它们不能被覆盖并在应用程序处于活动状态时保留在内存中。`char`另一方面，数组可以清除所有密码信息。

# vb.net - 如何正确处置共享资源和 SQL 连接

> ID：12690862
> 
> 赞同：0
> 
> 时间：2012-10-02T13:08:21.127
> 
> 标签：vb.net, dispose, idisposable, sqlconnection, asp.net-1.1

我有一个流量相当大的 ASP.NET 1.1 网站。我在这个网站项目中有一个类，它处理我所有的数据库访问，称为 DBWrapper：

```
Public Class dbWrapper
Implements IDisposable

' the private _connVSC2000 property is used for all methods that return scalar and DataType types
Private _connVSC2000 As SqlConnection
Private _connectionString As String
Private _disposed As Boolean = False

Sub New(ByVal connectionString As String)
    _connectionString = connectionString
    _connVSC2000 = New SqlConnection(connectionString)
    _connVSC2000.Open()
End Sub

Public Overloads Sub Dispose() Implements IDisposable.Dispose
    Dispose(True)
    GC.SuppressFinalize(Me)
End Sub

Protected Overridable Overloads Sub Dispose(ByVal disposing As Boolean)
    If Not _disposed Then
        'If _connVSC2000.State = ConnectionState.Open Then _connVSC2000.Close()
        If disposing Then
            _connVSC2000.Dispose()
        End If
    End If
    _disposed = True
End Sub

Protected Overrides Sub finalize()
    Dispose(False)
    MyBase.Finalize()
End Sub

' Actual database access functions removed as they are not relevant to the question.
end class 
```

我还有一个类（实际上是几个），其中包含许多使用共享 dbWrapper 对象的共享函数：

```
Public Class SomeClass

Private Shared dbWrapper As New dbWrapper(ConfigurationSettings.AppSettings("VSCConnectionString"))

public shared Function SomeFunction()
    'function that utilizes the shared dbWrapper object.
end Function
End Class 
```

我遇到的问题是，一段时间后，连接池会填满，因为连接没有及时释放。我的问题有三个：

dbWrapper 类中的 SQLConnection 对象的处理是否正确实现？

在“SomeClass”中实现 dbWrapper 对象的处置以确保 dbWrapper 对象以及 SQLConnection 对象得到正确处置并且不会阻塞连接池的正确方法是什么？完成后是否需要显式调用 SomeClass.Dispose，还是会在超出范围时自动处理？

# google-places-api - 在下拉输入中设置 Google 地方信息“类型”

> ID：12690865
> 
> 赞同：1
> 
> 时间：2012-10-02T13:08:43.400
> 
> 标签：google-places-api, google-places

我正在使用 Google Places API 列出交通服务的接送地点。我们有两个字段，在输入时会自动提示结果。

当下拉菜单 #transport-type 设置为第一个选项 value = 1 时，输入字段 #pick-up-location 应将“types”机场添加到其结果中。

JS：

```
function transport_types() {
 if ($('#transport-type').val() == 1) { 
     var input = document.getElementById('pick-up-location');
     var options = { types: ['airport'] };
     autocomplete = new google.maps.places.Autocomplete(input, options);
 }
 if ($('#transport-type').val() == 2) {
     var input = document.getElementById('drop-off-location');
     var options = { types: ['airport'] };
     autocomplete = new google.maps.places.Autocomplete(input, options);
 }
 google.maps.event.addDomListener(window, 'load', initialize);
} 
```

下拉 HTML：

```
<select id="transport-type" name="TransNeeded" required="true" tabindex="101" onChange="transport_types();">
  <option value='0' selected='selected'>Where do you want to go?</option>
  <option value='1' onfocus="enableGoogle('', true);"  id="pick-up-type">Pick-Up Location is an Airport</option>
  <option value='2' onfocus="enableGoogle('', true);" id="drop-off-type">Drop-Off Location is an Airport</option>
  <option value='3' onfocus="enableGoogle('', true);" id="point-point-type">Point to Point or Charter</option>
</select> 
```

输入 HTML：

```
<input type="text" id="pick-up-location" name="PUFullAddress" tabindex="104" value="Pick-Up Location" required="true" 
  onblur="if(this.value.length==0) { $('#pick-up-location').attr('value', ''); }"
  onkeypress="delay(50);" 
  onfocus="enableGoogle('PU', false);" 
/>

<input id="drop-off-location" name="DOFullAddress" type="text" tabindex="105" value="Drop-Off Location" required="true" 
 onblur="if(this.value.length==0) { $('#drop-off-location').attr('value', ' '); }"
 onkeypress="delay(50);" 
 onfocus="enableGoogle('DO', false);" 
/> 
```

我不是最有经验的 jQuery 程序员，所以它甚至可能是语法问题。我很感激你们能提供的任何见解。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:13:16.910

您缺少一个右括号并有一个额外的 ; 尝试以下

```
 if ($('#transport-type').attr('value', '1')) { 
```

# ios - iCarousel 配置任务

> ID：12690866
> 
> 赞同：1
> 
> 时间：2012-10-02T13:08:53.997
> 
> 标签：ios, icarousel

我使用 iCarousel 库在我的屏幕上滚动许多 UIView。每个视图填满整个屏幕。

我需要以某种方式配置 iCarousel，以便通过短触仅滚动一个视图。

我现在有

```
carousel.scrollSpeed = 0.1; 
```

但是要从一个屏幕滚动到另一个屏幕，我需要将手指从屏幕的一侧滑到另一侧。如果我将`scrollSpeed`参数设置为更高的值，许多 UIView 会滚动，但我需要配置为每次触摸仅滚动一个 UIView。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T16:11:10.990

您最好的选择是禁用轮播本身的滚动并附加一个 UISwipeGestureRecognizer 以检测用户何时向任一方向滑动，然后如果他们向前滑动则调用 [carousel scrollByNumberOfItems:1 animated:YES] 和 [carousel scrollByNumberOfItems:-1 animated :YES] 如果他们向后滑动。

编辑：

实际上，如果视图填满屏幕，我认为更好的选择是让您使用我的 SwipeView 库而不是 iCarousel。SwipeView 与 iCarousel 具有相同的界面，但基于 UIScrollView，因此您可以启用分页，将 numberOfItemsPerPage 设置为 1 并使其行为与您描述的完全相同。

[https://github.com/nicklockwood/SwipeView](https://github.com/nicklockwood/SwipeView)

更新：

以上信息已过时。iCarousel 现在通过设置支持单页滑动`pagingEnabled=YES`。也就是说，如果这是您想要做的，SwipeView 可能仍然更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:07:39.323

实际上，这段代码可以解决问题。

```
carousel.decelerationRate = 0.3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T09:01:44.950

> 旋转木马在轻弹时减速的速率。较高的值意味着较慢的减速。默认值为 0.95。值应在 0.0（轮播在释放时立即停止）到 1.0（轮播无限期地继续而不会减速，除非它到达终点）的范围内。

您应该尝试 0 到 0.5 之间的值。它的行为与滚动视图不同，但这是你能得到的最接近的。参考（[https://github.com/nicklockwood/iCarousel/issues/94](https://github.com/nicklockwood/iCarousel/issues/94)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-02T11:09:50.997

你可以这样尝试---

```
self.iCarosoul.decelerationRate=0.65;
self.iCarosoul.scrollSpeed=3;
self.iCarosoul.stopAtItemBoundary=YES
self.iCarosoul.scrollToItemBoundary=YES; 
```

# xml - oracle中如何使用xmltable？

> ID：12690868
> 
> 赞同：9
> 
> 时间：2012-10-02T13:09:00.203
> 
> 标签：xml, oracle

我正在使用 Oracle 的 XML DB 创建用户配置文件。我将用户配置文件与表中的其他关系列（id、用户名、密码）一起存储在单个 XMLTYPE 列中。XML 格式如下：

```
<profile>
<subject>I
       <action>like
           <object>sports</object>
               ...
           <object>music</object
       </action>
    </subject>
</profile> 
```

我使用了以下查询，

```
SELECT *
FROM user,
XMLTABLE(
 '//profile'
 PASSING user.profile
 return COLUMNS action VARCHAR2(20) PATH '/subject/action',
         object VARCHAR2(30) PATH '/subject/action/object'
); 
```

这给了我什么。我怎样才能使这件事起作用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T14:13:20.260

`action`并且`object`在您的示例中不在同一级别，因此您的查询必须执行其他步骤。这是一个例子：

```
SQL> create table users (id number, profile xmltype);

Table created.

SQL> insert into users values (1, XMLTYPE('<profile>
  2      <subject>I
  3         <action>like
  4             <object>sports</object>
  5             <object>music</object>
  6         </action>
  7      </subject>
  8  </profile>'));

1 row created.

SQL> select u.id, x.action, x.object.getStringVal()
  2    from users u,
  3         XMLTABLE('/profile/subject/action'
  4                  passing u.profile
  5                  columns action VARCHAR2(30) PATH 'text()',
  6                          object XMLTYPE PATH 'object') x;

ID  ACTION  X.OBJECT.GETSTRINGVAL()
--- ------- --------------------------------------------------
1   like    <object>sports</object> <object>music</object> 
```

如您所见，我们得到了节点，而不是您真正想要的，因此我们添加了一个`XMLTABLE`：

```
SQL> select u.id, x.action, y.object
  2    from users u,
  3         XMLTABLE('/profile/subject/action'
  4                  passing u.profile
  5                  columns action VARCHAR2(30) PATH 'text()',
  6                          object XMLTYPE PATH 'object') x,
  7         XMLTABLE('/object'
  8                  passing x.object
  9                  columns object VARCHAR2(30) PATH '.') y;

ID  ACTION  OBJECT
--- ------- -------
1   like    sports
1   like    music 
```

# command-line - 使用路径从命令行启动 win 服务

> ID：12690869
> 
> 赞同：0
> 
> 时间：2012-10-02T13:09:01.407
> 
> 标签：command-line, windows-services

我正在编写脚本来自动安装和启动 Windows 服务。我想从命令行启动这个服务，但它的名字可能会改变，所以我想用它的路径启动它......适用吗谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:25:08.073

假设您在`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services` as中定义了一个服务`MyService`并具有属性 (String value) ，那么您可以使用如下命令`binPath=c:\myprogram1.exe`更改它的启动选项：`SC`

```
SC CONFIG MyService binPath=c:\myprogram2.exe obj=".\LocalSystem" password="" 
```

然后使用`net start MyService`启动您的服务。

在这里 ( [http://ss64.com/nt/sc.html](http://ss64.com/nt/sc.html) ) 您可以找到更多可用选项。

# c++ - 成员函数模板是否需要“内联”

> ID：12690870
> 
> 赞同：7
> 
> 时间：2012-10-02T13:09:03.820
> 
> 标签：c++, templates

如果我在非模板类中有一个成员函数模板并且想在类之外定义它 - 我必须使用“内联”吗？

例子：

```
class A
{
    template <class D>
    void someMethod(D param);
}

template <class D>
/* inline needed here? */ void A::someMethod(D param)
{
} 
```

该标准的第 3.2.5 节说功能模板不属于单一定义规则。在这方面，成员函数模板是函数模板吗？

编辑：链接器不会抱怨没有内联 - 但仍然 - 它是有效的 C++03 吗？

编辑：

到目前为止我所学到的：gcc（以及假设其他编译器）将隐式模板实例导出为*弱符号*，这意味着如果它们在多个翻译单元中实例化，则在链接时不会发生冲突。由于*弱符号*不是标准的一部分 - 标准是否以某种方式隐含地要求模板实例以这种方式运行，我是否可以期望与其他符合标准的编译器/链接器组合具有相同的行为？

由于*inline*基本上被忽略以进行优化，但允许在不同的翻译单元中定义多个函数，这隐含地转换为将这些函数导出为*弱符号*。这是否意味着将模板声明为*内联*是多余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:36:30.440

`inline`作为关键字，向编译器建议标记为这样的函数是具有相同名称的优化的良好候选者，并且作为实现这种优化的帮助，它要求以**相同的方式**定义函数- - 在每个使用它的 CU 中（如果编译器看到代码，它更容易进行优化，即使链接器能够进行相同的优化，这在 20 年前并不常见）。

您可能希望为函数模板提供此提示，从而将函数模板定义标记为内联。如果您不想给出该提示，则不需要 inline。

（现在有一段时间只考虑标记为 inline 的函数进行优化，但关键字还没有遇到 的命运`register`，即通常被编译器忽略，除了它的正式含义是防止获取变量的地址）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:26:41.960

无论成员函数模板是否是函数模板，它们肯定不是对象或非内联函数，因此不适用单一定义规则。

但它们实际上是函数模板，并且对于不特定于非成员函数模板的标准的其他应用程序来说确实如此。

# unicode - Unicode 中的横杆大写 I 字母

> ID：12690872
> 
> 赞同：2
> 
> 时间：2012-10-02T13:09:13.570
> 
> 标签：unicode

在漫画字母中，一些作者区分“带有横杆的大写字母 i”和“没有横杆的大写字母 i”，通常使用横杆版本作为第一个人称代词，而另一个用于普通词。[从戴夫·吉本（Dave Gibbon）在《守望者》中的文字中](http://media.creativebloq.futurecdn.net/sites/creativebloq.com/files/images/2012/08/comicsans2.jpg)可以看到一个例子。

我想知道是否存在与普通拉丁语不同的“带有横线的大写 i”字形的 Unicode 代码点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:44:23.860

[http://www.fileformat.info/info/unicode/char/49/index.htm](http://www.fileformat.info/info/unicode/char/49/index.htm)没有列出这样的相关信件。您可能会发现一个字体集，例如 ROMAN NUMERAL ONE 的呈现方式与常规 LATIN CAPITAL LETTER I 不同，但 Unicode 目前似乎没有一对具有这种精确区别的字形。

**更新：**根据[Wikipedia](https://en.wikipedia.org/wiki/%C9%AA#Encoding)，这是在 Unicode 9.0（2016）中引入的。感谢@pelson 的链接！

# android - 限制网格视图中的项目数

> ID：12690876
> 
> 赞同：3
> 
> 时间：2012-10-02T13:09:30.763
> 
> 标签：android, gridview

我正在Android中实现gridview，我的要求是我希望只有9个项目出现在一个页面上，如果gridview中有超过9个项目而不是其余的项目应该出现在下一页上。可能吗？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-28T17:23:33.763

您覆盖以在扩展基本适配器的自定义图像适配器中获取计数的方法。此方法给出要添加的项目数。

公共类 ImageAdapter 扩展 BaseAdapter{

```
@Override
public int getCount() {
    return imageList.size();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:34:39.740

将您的数据集分成九个块，将第一组九个给您用于`GridView`. `Button`让 for next page 将下一个数据集块提供给适配器，并告诉适配器数据集已更改。

# c++ - 如何授予对私有方法的访问权限

> ID：12690878
> 
> 赞同：3
> 
> 时间：2012-10-02T13:09:41.047
> 
> 标签：c++, object, private

> **可能重复：**
> [什么是访问说明符？我应该以私有、受保护还是公共继承？](https://stackoverflow.com/questions/5447498/what-are-access-specifiers-should-i-inherit-with-private-protected-or-public)

我正在寻找一些代码或设计模式来授予对另一个类（C++）的私有方法的访问权限。

假设我有 1 类 OBJ1 ：

```
class OBJ1
{
  public:
    void method1();
    void method2();
} 
```

还有另一个类 OBJ2，它实例化 OBJ1 ：

```
class OBJ2
{
  public:
    void method3()
    {
       my_obj.method1();
    }
  private:
    OBJ1 my_obj;
} 
```

有没有办法`OBJ2::my_obj.method2()`从其他类访问（仅限此方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:11:37.130

访问`method2`是可能的，因为它是公开的。`my_obj`无法直接访问该成员，因为它是`private`. 要授予其他类对其的访问权限，请将它们声明`friend`为`OBJ2`.

```
class OBJ2
{
  public:
    void method3()
    {
       my_obj.method1();
    }
  private:
    friend class X;
    OBJ1 my_obj;
} 
```

现在，`X`可以访问`OBJ2::my_obj`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:12:46.957

可能最好的方法是为此特定功能提供公共直通功能，就像您为`method3`：

```
class OBJ2 
{   
     public:
         void method3()     
         {
             my_obj.method1();
         }
         void method2()
         {
             my_obj.method2();
         }
     private:
         OBJ1 my_obj; 
} 
```

这会稍微改变语法——您是针对 OBJ2 实例而不是直接针对包含的 OBJ1 实例调用该方法，但效果将是您所要求的。

这里的另一个考虑因素是这种类型的习惯用法（公共包装函数）提供对包含成员的单个函数的无限外部访问。另一种方法（朋友声明）使单个外部类可以访问整个私有内部。如果您想要授予单个外部类对单个成员的访问权限，则最好使用代理对象或类似的东西组合这些方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:13:39.093

你已经回答了你自己的问题：看，它提供了一种通过封闭类`method3`调用的`method1`方法。可以添加类似的转发方法以允许访问.`my_obj``OBJ2``method2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:15:07.473

您需要的是一种调用成员的`public`方法。`OBJ2``method2``my_obj`

在这种情况下`friend`， ship 不会帮助您，因为它会授予对所有`my_obj`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T13:31:47.197

从设计的角度来看，该语言不提供控制每个成员访问的工具，虽然您可以破解它，但它只会使代码更加复杂，更难维护和管理编译器（更复杂代码意味着更难优化代码）。

*如果该成员与其余成员确实*不同并且访问它的对象不应访问该对象的其余部分，则一些替代方案将包括定义一个接口（多态）并在`OBJ1`. 然后，您可以提交对该接口的引用，该接口没有其他可用成员。

从技术的角度来看，有很多事情可以做，例如，您可以创建一个访问函数对象，该对象接受一个`OBJ1`as 参数并调用该方法。函子必须是`OBJ1`（假设所有其他成员都是私有的）的朋友，`operator()`（或执行调度并将其设为私有的命名函数），然后与`OBJ2`该中间调度程序成为朋友。

# c# - 带有 RadioButtonList 和其他自由格式选择的 ASP.Net MVC 视图

> ID：12690879
> 
> 赞同：4
> 
> 时间：2012-10-02T13:09:41.367
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在整理问卷以注册活动。

eventr注册问题之一是：

```
What is your main job function?
    Director/MD/Owner
    Manager
    Team Leader
    Other: Please state 
```

我希望它在我的视图中显示为下拉框或单选按钮列表，而且在“其他”单选按钮下方或旁边有一个文本框，以便可以输入自由形式的“其他”工作功能。在我看来，我将如何绑定它？

我怀疑我的模型将包含：

```
 [Display(Name = "What is your main job function?")]
    public string JobFunction { get; set; } 
```

...其中 JobFunction 由上面的选定项目填充。但是在我的控制器中，如果它是“其他”，我将如何覆盖所选项目并将其替换为视图上的文本框？

我敢肯定这已经做过很多次了——所以谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:08:59.487

许多方法中的一种是这样的：

看法：

```
 <div id="sample-dropdown">
    <select name="JobFunction " id="JobFunction" class="dropdown">
        <option value="Director/MD/Owner">Director/MD/Owner</option>
        <option value="Manager">Manager</option>
        <option value="Team Leader" selected="selected">Team Leader</option>
        <option value="Other">Other: Please state</option>   
    </select>
    <input name="JobFunctionOther" id="JobFunctionOther" />
</div>

<script type="text/javascript">
    $('input[name="JobFunctionOther"]').hide();
        $(function() {
                $("#JobFunction").change(
                    function() {
                        var val = $(this).val();
                        if (val =='Other') {
                            $('input[name="JobFunctionOther"]').show();

                        } else {
                            $('input[name="JobFunctionOther"]').hide();
                        }

                    }).change();
            });
</script> 
```

控制器：

```
public ActionResult DropDown(string jobFunction, string jobFunctionOther)
{
    if (!string.IsNullOrEmpty(jobFunctionOther)) jobFunction = jobFunctionOther;
    //do what you do
    return View(jobFunction);
} 
```

# assembly - nasm 程序：递归分段错误

> ID：12690882
> 
> 赞同：0
> 
> 时间：2012-10-02T13:09:49.793
> 
> 标签：assembly, recursion, x86, segmentation-fault, nasm

所以这是一个使用递归的斐波那契程序，但最后有一个“分段错误（代码转储）”。是什么原因造成的？编码：

```
_start:
mov eax, 4  ; ask for a number
mov ebx, 1
mov ecx, prompt
mov edx, promptLen
int 80h

mov eax, 3  ; scan input
mov ebx, 0
mov ecx, n
int 80h 

sub byte [n], 30h

mov esi, 1
push word 0
push word [n]
call fibo

exit:
    mov eax, 1
    mov ebx, 0
    int 80h

fibo:
    mov ebp, esp

    mov edi, [ebp+6]

    add byte [ebp+6],30h    
    mov eax, 4              ; print number
    mov ebx, 1
    lea ecx, [ebp+6]
    mov edx, 1
    int 80h
    sub byte [ebp+6],30h

    mov eax, 4  ; print space   
    mov ebx, 1
    mov ecx, space
    mov edx, 1
    int 80h

    cmp byte [ebp+4],0
    je bye

    add [ebp+6],esi
    mov esi, edi

    push word [ebp+6]

    dec word [ebp+4]
    push word [ebp+4]

    call fibo

    bye:
    ret 4 
```

样本输出：

```
Enter a number: 5
0 1 1 2 3 5 Segmentation fault (code dumped) 
```

输出数字是正确的，但是是什么导致了 seg 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:22:29.053

我看不到您向 esp 弹出或添加任何值。确保 esp 的值与调用开始时的值相同。您可以通过将基指针保存在堆栈中来做到这一点。在每个函数中记住这样做：

```
push ebp
mov ebp,esp
;at the end of the function
pop ebp 
```

在调用您推送了一些寄存器的函数后，请务必执行以下操作：

```
add esp, 4*x
;where x is the number of registers you pushed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:55:40.470

您正在将单词压入 32 位堆栈。这是“合法的”，但可能是个坏主意。您“可能”只是让它工作，但`add [ebp + 6], esi`正在杀死你。这会破坏堆栈上的 4 个字节，而不仅仅是您想要的 2 个字节。只需将其更改为`si`“可能”修复它，但我建议始终使用 dwords。您`ret 4`正在从堆栈中删除 2 个（单词！）参数 - 这是“stdcall”，这在 Linux 中不常见，但“应该”工作。我会按照coolbartek展示的方式来做。

# php - 从 Db 检索后输入字段中的额外选项卡

> ID：12690884
> 
> 赞同：1
> 
> 时间：2012-10-02T13:09:54.643
> 
> 标签：php, html, mysql

我正在尝试通过 PHP 从输入字段中的数据库中检索数据。如果数据存在，我想在输入字段中显示这个检索到的值，而不是占位符。我能够从数据库中检索数据，但它在实际输入之前添加了一些额外的选项卡。

```
<input type="text" name="title" id="title"  value="
<?php  
    $title='title';
    $clean = trim(retrieve_project_info($email,$title));
    echo $clean;
?>"> 
```

因此，如果数据库中的输入是“酷玩”。检索到的数据看起来像 '[tab][tab][tab]coldplay' 并且 url 中有很多 %09s。

我使用 trim 方法删除了空格。但是，修剪不会删除标签。知道如何删除这些标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:14:16.210

是的，删除选项卡很容易，但您最好找出它们存在的原因，而不是删除它们。但是你的代码：

```
<input type="text" name="title" id="title"  value="
<?php  
    $title='title';
    $clean = trim(retrieve_project_info($email,$title));
    echo $clean;
?>"> 
```

最好这样写：

```
<?php  
    $title='title';
    $clean = trim(retrieve_project_info($email,$title));    
?>
<input type="text" name="title" id="title"  value="<?php echo $clean; ?>"> 
```

这有助于删除你的标签吗？我建议这样做的原因是因为retrieve_project_info 可以输出选项卡。

另一个观察：如果 $clean 包含 " 你的代码会失败吗？

编辑：@palmi

我就是这样做的：

```
function doFormSafeHTMLEncode($someStr){
    return htmlspecialchars($someStr,ENT_QUOTES,'UTF-8'); 
} 
```

我在将原始代码输出到表单域的任何地方都调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T22:34:34.003

取出代码中的选项卡并将其放在屏幕的镶边上。我做到了，它对我有用。尽管拥有可读的代码很棒，但是这种方法现在有效，直到我找到另一个解决方案。

# networking - PhoneGap手机信号塔信息

> ID：12690886
> 
> 赞同：0
> 
> 时间：2012-10-02T13:09:58.910
> 
> 标签：networking, cordova, cell

有没有使用PhoneGap获取cellid、cell位置等蜂窝塔信息？我在 phoneGap 网站上找不到任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:16:52.113

您需要[编写一个插件](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)才能获取此信息。我知道在 Android 上，您可以使用[android.telephony](http://developer.android.com/reference/android/telephony/package-summary.html)包获取此信息。

# image-processing - 如何播放隔行视频，图片上半部分偶数行，下半部分奇数行？

> ID：12690888
> 
> 赞同：1
> 
> 时间：2012-10-02T13:10:03.497
> 
> 标签：image-processing, ffmpeg, h.264, interlacing

我有一些设备以以下格式流式传输 h264 视频：图片的上半部分是偶数行视频，图片下半部分是奇数行视频。所以问题是 - 我怎样才能在正常可见度下播放这个视频，例如使用标准播放器，ffplay。我知道 ffmpeg 中的“tinterlace:merge”插件，但它一张一张地结合了两张图片中的视频。所以我的任务是从单帧制作正确的视频。问候，阿列克谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:24:38.597

我最近不得不处理完全相同的问题。

有许多不同的方法，最佳解决方案完全取决于您的情况，

最简单最快的方法是将两个字段编织在一起，这非常适合固定部分，但会在移动对象中创建梳状效果。

更复杂的方法使用运动检测方法。

我所做的是合并两个字段，然后对移动段应用边缘线平均 (ELA) 以减少梳状效应。

检查[此链接](http://www.100fps.com/)以获取有关问题的详细说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:24:23.547

如果您能提供一个示例视频文件，那就太好了。您很好地描述了图片的外观，但该文件可能包含其他有助于播放的信息。

此外，您描述的格式听起来不像标准格式，因此您不太可能让普通播放器以您想要的方式播放它，开箱即用。如果您使用的是 ffplay，您可能必须编写自己的插件来重新排序扫描线，然后再显示它们。

或者，您可以使用 ffmpeg 将视频重新编码为标准格式（隔行或去隔行）。然后，您可以在任何常规播放器中播放它，例如 ffplay 或 VLC。

[最后，我建议您在ffmpeg 邮件列表中](http://ffmpeg.org/contact.html)提问。

# c++ - WM_TIMER 在 ATL ActiveX 控件中突然停止

> ID：12690899
> 
> 赞同：0
> 
> 时间：2012-10-02T13:10:52.963
> 
> 标签：c++, windows, activex, atl

我最初有一个 ActiveX 控件，它注册了一个`SetTimer()`每隔几秒触发一次的 Windows 计时器（带有 ）。到目前为止效果很好。现在为了实现全屏模式，我在控件中添加了一个子窗口，它应该显示内容，而控件本身管理所有 ActiveX 内容。

我用这种方法遇到的问题是我的 WM_TIMER 在某个时候突然停止触发。我已经将它追溯到`UIDeactivate()`在我的控件上被调用，但我不知道为什么在之前没有调用这个方法时调用它（我相信它与失去焦点有关）。

我还想知道为什么我的 WM_TIMER 事件突然停止，而其他一切似乎仍然正常。它与在子窗口中而不是在 ActiveX 控件本身上显示内容有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:29:58.057

计时器停止是有原因的。这可能是：

1.  你确实通过`KillTimer`电话停止计时器
2.  您的窗口已重新创建，但计时器未重新启用
3.  您的控件是无窗口的，实际上您没有`HWND`句柄
4.  定时器标识符有冲突，有其他东西（例如内部子类窗口）使用相同的标识符，它设置，终止定时器，你不再看到`WM_TIMER`你之前启用的消息
5.  窗口线程忙（冻结）了一些不包括消息调度的活动，因此计时器本身存在，健康且活跃，只是没有发送消息

要做的事情 - 没有关于手头问题的其他信息：

1.  检查你的窗口线程和你的 Set/KillTimer 调用以确保它们都有意义
2.  使用 Spy++ 工具检查为您的窗口和/或感兴趣的线程发布的消息，以确定您是否*真的*缺少`WM_TIMER`s，或者它们只是没有到达您的代码；你也可能会看到其他有趣的消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:29:48.777

这是 ATL 实现的摘录`CComControlBase`（我猜你的控件继承自它）。检查标有 的部分`<<<<<<<<<<<`：

```
inline HRESULT CComControlBase::IOleInPlaceObject_InPlaceDeactivate(void)
{
    if (!m_bInPlaceActive)
        return S_OK;

    if(m_bUIActive) {
        CComPtr<IOleInPlaceObject> pIPO;
        ControlQueryInterface(__uuidof(IOleInPlaceObject), (void**)&pIPO);
        ATLENSURE(pIPO != NULL);
        pIPO->UIDeactivate();
    }

    m_bInPlaceActive = FALSE;

    // if we have a window, tell it to go away.
    //
    if (m_hWndCD)
    {
        ATLTRACE(atlTraceControls,2,_T("Destroying Window\n"));
        if (::IsWindow(m_hWndCD))
            DestroyWindow(m_hWndCD);  <<<<<<<<<<<<<<<<<<<<<<<<<<<
        m_hWndCD = NULL;
    }

    if (m_spInPlaceSite)
        m_spInPlaceSite->OnInPlaceDeactivate();

    return S_OK;
} 
```

停用时，控制窗口被破坏。因此它不能再处理 WM_TIMER 了。

# f# - StructuredFormatDisplayAttribute 可以用作扩展方法的一部分吗

> ID：12690900
> 
> 赞同：4
> 
> 时间：2012-10-02T13:10:59.063
> 
> 标签：f#, formatting, type-extension

我不认为它可能，但你能做类似的事情来允许通过类型扩展进行自定义格式化吗？

```
[<StructuredFormatDisplayAttribute("Rate: {PrettyPrinter}")>]
type Rate with 
    member x.PrettyPrinter = x.Title + string x.Value 
```

*注意：它看起来可以作为内部扩展（相同的程序集），但不能作为可选扩展*。

如果不是，我猜这可能是一个功能请求，除非有人有一个不错的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:44:16.377

正如您所说，`StructuredFormatDisplayAttribute`仅适用于编译为属性的成员（包括标准属性、相同的程序集扩展，但不包括扩展成员）。在封面下，它是使用反射访问的（如您所见，它也可以是私有的）：

```
let getProperty (obj: obj) name =
    let ty = obj.GetType()
    ty.InvokeMember(name, (BindingFlags.GetProperty ||| BindingFlags.Instance ||| 
        BindingFlags.Public ||| BindingFlags.NonPublic), 
        null, obj, [| |],CultureInfo.InvariantCulture) 
```

如果您出于调试目的需要此属性，则该`DebuggerTypeProxy`属性可能是一种替代方法（请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/d8eyd8zc.aspx)）。这允许您将原始类型替换为用于在调试器中显示类型的代理类型。（但我认为属性仍然必须放在实际的类型定义上，而不是放在扩展上。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:07:35.523

不，这是不可能的。在 FSI 中，您可以使用[`fsi.AddPrinter`](http://msdn.microsoft.com/en-us/library/ee842576.aspx)自定义输出。

```
fsi.AddPrinter (fun (x: Rate) -> x.Title + string x.Value) 
```

编辑

对于一般字符串格式，您可以使用`Printf`格式`%a`说明符。一些额外的功能可以使这更方便。

```
[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
module Rate =
  let stringify (x: Rate) = x.Title + string x.Value
  let print rate = printf "%s" (stringify rate)

printf "Rate: %a" (fun _ -> Rate.print) rate
let formattedString = sprintf "Rate: %a" (fun _ -> Rate.stringify) rate 
```

# objective-c - 在 Objective-C 中，如果 [super message] 采用 [self super#message] 的形式，实际上会更好吗？

> ID：12690904
> 
> 赞同：0
> 
> 时间：2012-10-02T13:11:04.440
> 
> 标签：objective-c, oop

我研究了一些语言，然后看看 Objective-C 的

```
[super message]; 
```

事实上，如果有某种形式，不是更准确：

```
[self super#message]; 
```

? 那是因为我们仍然向同一个对象发送消息，即`self`，但消息是不同的，这是`message`超类中定义的。那么不改word`self`而是改`message`part不是更准确吗？

**更新：**这是 Javascript 方式之间的比较：

```
Author.superclass.call(this) 
```

和`Author`的超类是`Person`。所以跟`[this superclass's constructor]`_ _`[self super#init]``init`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:47:18.020

从纯粹的 API 角度来看（this 所指），这是没有意义的。如果您查看与向`self`vs发送消息相关的 API `super`，您会看到以下内容：

**[objc_msgSend](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_msgSend)**：

```
id objc_msgSend(id theReceiver, SEL theSelector, ...) 
```

在这种情况下，`theReceiver`is`self`和`theSelector`is `message`（之后是 args 列表，我们现在不会进入）。

将此与 **[objc_msgSendSuper](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_msgSendSuper)**进行比较：

```
id objc_msgSendSuper(struct objc_super *super, SEL op,  ...) 
```

等一下，接收器需要完全不同的类型！研究什么`super`手段给了我们以下声明：

```
struct objc_super
{
    id receiver;
    Class class;
}; 
```

精明的用户会注意到这个定义在 ARC 中是无效的，但这超出了本文的范围。

那么`struct objc_super`，允许我们做的是向继承链中某处的特定类发送特定消息，如果我们愿意，这实际上允许我们跳过大部分实现。

因此，话虽如此，您应该这样做的“真正”方式将是 Java 匿名类（或 C++）等价物：

```
[MySuperclass.self message]; 
```

但是，这是无效的，因为所有类型都`self`已经声明了消息，指向它们自己！因此，我们最终使用`super`关键字作为

```
&(struct objc_super) { self, [[self class] superclass] } 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:23:38.590

它不会是一样的。

首先，它会破坏 OOP 范式，因为您不需要在每次子类化时更改方法的名称。

接下来，假设您有这样的类层次结构：

*   类 A，方法 foo 和 superfoo 声明
*   B 类，继承 A 类，声明方法 foo
*   C类，继承B类，声明方法foo

然后调用 [instanceOfC superfoo] 将调用 A 中的方法，而不是 B 中的方法 foo。

如果你的意思是“ `super#`”只是一个构造逻辑，那也无济于事，因为Objective-C中方法的动态解析逻辑不会真正得到尊重。

无论如何，这只是语法问题。Objective-C 语言语法是这样定义的，你可以争辩说他们应该使用`parentClass`代替`super`或任何`super#`构造或其他任何东西，这只是语言定义，无论如何他们都必须做选择;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:13:19.460

Super 与 self 几乎相同，只是您不是调用在自己的类中定义的方法，而是调用您的超类。无论如何，在编程中添加主题标签似乎很糟糕......

# javascript - jQuery - 模拟页面查看计数器

> ID：12690906
> 
> 赞同：-3
> 
> 时间：2012-10-02T13:11:06.897
> 
> 标签：javascript, jquery, counter

我正在模拟一个带有图像的 8 位计数器，基于实数。

*   开始日期：10月1日
*   最后日期：10 月 31 日
*   天数增加：100 000 (DAYS)
*   人数按小时增加：10 000 (HOURS)
*   数字按分钟增加：1 000 (MIN)

假设用户在 10 月 5 日凌晨 3:10 打开页面

数学应该是这样的：(DAY)*5 + (HOURS)*3 + (MIN)*10。然后将此数字与图像一起显示（9 分隔图像）。

第二部分，为了让它更具动态性，如果用户停留在页面上并观看计数器，我希望数字从上到下动画以制作数字时钟效果。

我希望它以随机方式更新，而不是在固定的时间间隔内。因此，假设它可以在 10 秒到 1 分钟的延迟内发生变化。

我正在纠结从哪里/如何开始。有人能指出我正确的方向吗？

为了更清晰的参考，我想要这样的东西：http: [//demos.2lessons.info/flip-visitor-counter/](http://demos.2lessons.info/flip-visitor-counter/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:17:33.843

示例：[http ://www.littlewebthings.com/projects/countdown/](http://www.littlewebthings.com/projects/countdown/)

[Javascript 源代码](http://www.littlewebthings.com/projects/countdown/demo/js/jquery.lwtCountdown-1.0.js)

# image-manipulation - 在 Web 服务器上绘制带有扭曲三角形的图像

> ID：12690907
> 
> 赞同：7
> 
> 时间：2012-10-02T11:09:59.040
> 
> 标签：image-manipulation, cgi, imagemagick

### 场景

我当前项目的 Flash 前端会生成 Web 服务器需要组合成视频的图像。帧速率和帧分辨率都足够大，以至于将图像序列发送到后端是不可行的（在时间和客户端带宽方面）。相反，我们也在尝试在后端重新创建图像绘图。

### 正确而缓慢，或错误而快速

问题是这涉及到相当多的纹理三角形的绘制，我们在 Python 中找到的两个解决方案（[here](http://www.janeriksolem.net/2009/06/piecewise-affine-warping-using-scipy.html)和[there](https://github.com/TimSC/image-piecewise-affine)）效率很低，每帧绘制大约需要 60 秒，导致处理时间高达 7.5 小时30 秒剪辑的时间。不可接受。

当使用 PHP 模块向 ImageMagick 发送命令进行图像处理时，整个过程非常快（每帧十分之一秒），但是[ImageMagick 似乎无法](http://www.rubblewebs.co.uk/imagemagick/operators/distort.php)像我们在前端那样绘制三角形，所以最后的结果不匹配。不可接受。

我在这里要问的是，是否有人知道解决此问题的方法，以任何必要的方式在 Web 服务器上运行。

### 扭曲图像

先解释一下前端的流程：

1.  对图像中的点执行 Delaunay 计算，以获得均匀分布的三角形网格。
2.  偏移网格中的点/顶点，扭曲或扭曲图像。
3.  在新位图上绘制扭曲的三角形。

![左边是原图，右边是变形图](../Images/bfee5c3c0bdce3da93a605fba9c6d9e6.png)

我们可以将步骤 1 和 2 的结果（坐标）发送到后端，然后绘制扭曲的三角形并将其保存到磁盘上的图像中（或作为帧附加到视频中）。但最后一步是我需要帮助的。

### 问题

有没有可以在位图中绘制三角形的 ImageMagick 替代品？是否有其他库，例如 C 库，可以让我们这样做？或者我们是否可以通过切换后端技术（如 Ruby）更轻松地实现这种效果？（不幸的是，.Net 和 Java 目前还不是真正的选择）

非常感谢。EP。

*PS我很感激重新标记的努力，我不太清楚在这个问题上贴什么标签。谢谢！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:56:35.393

在双方使用相同的技术将使您获得最一致的结果和最简单的时间保持算法同步。如果你使用画布，你也可以在服务器上使用 nodecanvas 和 node.js 以同样的方式在服务器端进行图像生成。（不必切换所有内容。您可以只运行一个变形服务器进程）

[https://github.com/LearnBoost/node-canvas](https://github.com/LearnBoost/node-canvas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:38:29.113

Opencv 是一个 ac 库，支持多种类型的图像变形和合成。

# svn - 如何使用 SVN 分支修改后的工作副本？

> ID：12690920
> 
> 赞同：16
> 
> 时间：2012-10-02T13:11:40.313
> 
> 标签：svn, branch

我开始研究我认为对主干的一个小改动，离开了一个月，现在我意识到这确实是一个完整的副项目（充满了错误），确实需要它自己的分支。此外，一旦我对这些更改进行了分支，我想将我的工作副本重置回主干中的当前内容，这样我就可以在有时间的时候回到这个副项目之前帮助完成主要的开发工作和高优先级的项目。

所以：

1.  我想根据我的工作副本创建一个新分支，而无需签入我的工作副本（尽管它是最新的 HEAD 修订版）

2.  一旦我分叉了我的工作副本，我想基本上删除分支中的所有更改，并将其设置为与主干中当前的​​ HEAD 版本匹配。

程序是什么？我正在使用 TortoiseSVN，但即使是命令行指令也会有所帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T19:08:46.300

所以我尝试了两种方法来分支我的工作副本而不签入，不确定哪种方法最终会是最好的方法：

方法1：将整个目录复制到新分支

*   右键单击您的工作副本文件夹并选择 Tortoise SVN > Repo Browser
*   在 Repo Browser 中创建一个名为“branches”的新目录，与“trunk”处于同一级别
*   在“分支”目录中，使用您的分支的“名称”创建一个新目录（我的意思是“名称”是一个标识该分支的标签，例如：如果您正在处理此分支中的特殊通知系统分支，称之为“通知”等...）
*   现在，仍然在 Repo Browser 中右键单击并选择“添加文件夹”并选择您的本地工作副本
*   这需要一段时间，因为所有文件（包括 .svn 文件）都在被复制。这也会复制未受版本控制的文件和您已 svn:ignored 的文件，这可能不是我们想要的。

方法2：使用分支/标签

*   右键单击您的工作副本文件夹并选择 Tortoise SVN > 分支/标签...
*   它打开了回购浏览器，因此创建一个新目录“分支”，然后在其中创建一个带有分支“名称”的新目录
*   您在“在存储库中创建副本”部分中选择“工作副本”按钮。这就是将本地更改的差异提交到此分支的内容
*   这似乎只复制与 HEAD 修订版不同的文件。
*   但是，如果您随后再次使用 Repo 浏览器查看其中的内容，则整个 HEAD 修订版 + 您的本地更改都在其中

看起来方法2绝对是可取的。

然后，要清理，这是 Tortoise SVN > Revert... 和“删除所有未版本化”的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T06:46:34.393

在命令行中，您可以使用 subversion "diff" 命令创建补丁，然后使用 subversion "patch" 命令将其应用到新分支。（您可以通过执行 'svn help diff' 和 'svn help patch' 来了解这些命令）。假设您在同一个父目录中有主干和一个名为 new_branch 的分支。

```
cd trunk
svn diff > ..\my_stuff.diff 
```

现在你有了补丁，然后将它应用到你新创建的分支。

```
cd new_branch
svn patch ..\my_stuff.diff 
```

您可以通过在补丁命令中添加 --dry-run 标志来先干运行补丁，以查看在实际应用之前是否发生任何奇怪的事情。

```
svn patch ..\my_stuff.diff --dry-run 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-09T21:36:06.553

如果您希望继续在同一个文件夹中工作，这篇[文章将](https://stackoverflow.com/a/2783904/2787591)展示如何做。

基本上`svn copy`是创建一个分支`svn switch`以从同一工作副本指向新分支并`svn commit`提交您的更改。

确保您从您开始修改（检查）的同一分支/修订版中分支出来，`svn info`否则您可能会在切换后遇到许多冲突。

# ios - 捆绑无效。关键 UIRequiredDeviceCapabilities 包含“项目 0”。最低版本 4.3

> ID：12690923
> 
> 赞同：0
> 
> 时间：2012-10-02T13:12:01.713
> 
> 标签：ios, itunes, info.plist

我在at增加了`Item 0`价值。但是在上传到 iTunes 时，出现以下错误`UIRequiredDeviceCapabilities``Info.plist`

> 捆绑包无效。键 UIRequiredDeviceCapabilities 包含值“项目 0”，它与“4.3”的 MinimumOSVersion 值不兼容

我在资源 # [“警告：iPhone 应用程序应该包含 armv6 架构”之后添加了这个，即使有构建配置集](https://stackoverflow.com/questions/4198676/warning-iphone-apps-should-include-an-armv6-architecture-even-with-build-config)（来自 @ustinxreese 答案）。

如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:18:06.193

进入*info.plist*文件，去掉“Required background models”和“Required device capabilities”中的“Item 0”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:14:20.453

从 info.plist 中的所需功能中删除 ARM6 和 ARM7。

# php - 没有分隔符的 PHP 正则表达式不起作用

> ID：12690924
> 
> 赞同：0
> 
> 时间：2012-10-02T13:12:13.557
> 
> 标签：php, regex

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/converting-ereg-expressions-to-preg)

所以我有一些这种类型的字符串：

```
choose_from_library_something
choose_from_library_something2
choose_from_library_something3
... 
```

我需要搜索 choose_from_library_*

这是我不起作用的正则表达式：

```
}elseif (preg_match('choose_from_library_.*',$form_name)) { 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:14:10.500

您需要在正则表达式中添加分隔符：

```
preg_match('/^choose_from_library_.*/',$form_name) 
```

**编辑：**在正则表达式的开头添加了一个锚点`^`，以避免匹配`don't_choose_from_library_`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:19:09.997

在您的情况下，您最好使用爆炸并计数。

```
else if ( count ( explode("_" , $form_name) ) == 4 ) {

} 
```

要回答您的问题，您需要在图案周围加上斜线

```
/pattern/ 
```

此外，星号表示没有或更多，因此即使您没有文本，它仍然会匹配它。对于 explode 也是如此（但您可以查看最后一个元素中是否有空字符串并将其返回为 false）。

# vb.net - 获取两个 DateTimes 之间的月数

> ID：12690926
> 
> 赞同：2
> 
> 时间：2012-10-02T13:12:21.623
> 
> 标签：vb.net

```
mnth = DateDiff(DateInterval.Month, 8/30/2012, 10/1/2012) 
```

**给** `mnth = 2`. 但是当我们看时，**这些日期之间只有 32 天**。我**期待一个结果`mnth=1`**，因为**这几天之间只有 32 天**。

***请帮忙..***

在我的情况下，我可以将 15 天以上视为一个月，但如果小于 15 天，则不应考虑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:22:45.507

要获得完整的月数，您可以根据您的解释做不同的事情，

```
Public Function CompleteMonthsBetweenA( _
        ByVal start As DateTime, _
        ByVal end As DateTime) As Integer

    Dim invertor = 1

    If (start > end) Then
       Dim tmp = end
       end = start
       start = tmp
       invertor = -1
    End If

    Dim diff = ((end.Year - start.Year) * 12) + end.Month - start.Month

    If start.Day > end.Day Then
        Return (diff - 1) * invertor
    Else
        Return diff * invertor
    End If
End Function 
```

使用此函数，2011 年 5 月 31 日 (dd/mm/yy) 和 2011 年 6 月 30 日之间的完整月数为 0，但 2011 年 6 月 6 日至 2011 年 7 月 31 日之间的完整月数为 1。这可能是也可能不是成为你所期望的。

* * *

```
Public Function CompleteMonthsBetweenB( _
        ByVal start As DateTime, _
        ByVal end As DateTime) As Integer

    Dim invertor = 1

    If (start > end) Then
       Dim tmp = end
       end = start
       start = tmp
       invertor = -1
    End If

    Dim diff = ((end.Year - start.Year) * 12) + end.Month - start.Month

    Dim startDaysInMonth = DateTime.DaysInMonth(start.Year, start.Month)
    Dim endDaysInMonth = DateTime.DaysInMonth(end.Year, end.Month)

    If (start.Day / startDaysInMonth) > (end.Day / endDaysInMonth) Then
        Return (diff - 1) * invertor
    Else
        Return diff * invertor
    End If
End Function 
```

使用此功能可以计算比率`Day / DaysInMonth`，以便评估两个月的相对完成情况。

* * *

```
Public Function CompleteMonthsBetweenC( _
     ByVal start As DateTime, _
     ByVal enddate As DateTime) As Integer

    Dim invertor = 1

    If (start > enddate) Then
        Dim tmp = enddate
        enddate = start
        start = tmp
        invertor = -1
    End If

    Dim diff = ((enddate.Year - start.Year) * 12) + enddate.Month - start.Month

    Dim remainingDays = _
      (DateTime.DaysInMonth(start.Year, start.Month) - start.Day) + enddate.Day

    If remainingDays < 15 Then
        Return (diff - 1) * invertor
    Else
        Return diff * invertor
    End If
End Function 
```

此函数仅在剩余天数小于魔术数字 15 时向下舍入，我认为这是您在更新中所要求的。

* * *

```
Public Function CompleteMonthsBetweenD( _
        ByVal start As DateTime, _
        ByVal end As DateTime) As Integer

    Return end.Subtract(start).TotalDays \ 30.436875
End Function 
```

此函数采用更简单的方法，将总天数除以公历中每月的平均天数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:18:10.690

计算月差时不考虑日期的日部分。

例如，`8/31/2012`和之间的月差`9/1/2012`为 1，尽管这两个日期之间只有一天。

如果您想考虑日组件，您必须以天而不是月为单位获取日期差异，并计算您想要的月数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:10:38.820

这是我使用的类（它是 C#，但很容易转换为 VB.NET）。它适用于年、月、日……非常适合以#Y-#M-#D 格式显示年龄。

```
public class DateDifference
    {
        /// <summary>
        /// defining Number of days in month; index 0=> january and 11=> December
        /// february contain either 28 or 29 days, that's why here value is -1
        /// which wil be calculate later.
        /// </summary>
        private int[] monthDay = new int[12] { 31, -1, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };

    /// <summary>
    /// contain from date
    /// </summary>
    private DateTime fromDate;

    /// <summary>
    /// contain To Date
    /// </summary>
    private DateTime toDate;

    /// <summary>
    /// this three variable for output representation..
    /// </summary>
    private int year;
    private int month;
    private int day;

    public DateDifference(DateTime d1, DateTime d2)
    {
        int increment;

        if (d1 > d2)
        {
            this.fromDate = d2;
            this.toDate = d1;
        }
        else
        {
            this.fromDate = d1;
            this.toDate = d2;
        }
        /// 
        /// Day Calculation
        /// 
        increment = 0;

        if (this.fromDate.Day > this.toDate.Day)
        {
            increment = this.monthDay[this.fromDate.Month - 1];

        }
        /// if it is february month
        /// if it's to day is less then from day
        if (increment == -1)
        {
            if (DateTime.IsLeapYear(this.fromDate.Year))
            {
                // leap year february contain 29 days
                increment = 29;
            }
            else
            {
                increment = 28;
            }
        }
        if (increment != 0)
        {
            day = (this.toDate.Day + increment) - this.fromDate.Day;
            increment = 1;
        }
        else
        {
            day = this.toDate.Day - this.fromDate.Day;
        }

        ///
        ///month calculation
        ///
        if ((this.fromDate.Month + increment) > this.toDate.Month)
        {
            this.month = (this.toDate.Month + 12) - (this.fromDate.Month + increment);
            increment = 1;
        }
        else
        {
            this.month = (this.toDate.Month) - (this.fromDate.Month + increment);
            increment = 0;
        }

        ///
        /// year calculation
        ///
        this.year = this.toDate.Year - (this.fromDate.Year + increment);

    }

    public override string ToString()
    {
        //return base.ToString();
        return this.year + " Year(s), " + this.month + " month(s), " + this.day + " day(s)";
    }

    public int Years
    {
        get
        {
            return this.year;
        }
    }

    public int Months
    {
        get
        {
            return this.month;
        }
    }

    public int Days
    {
        get
        {
            return this.day;
        }
    }
} 
```

**用法：**

```
DateDifference diff = new DateDifference(date1, date2);
int months = (diff.Years*12) + diff.Months + diff.Days > 15 ? 1 : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:25:31.717

如果您想要完整月份的数量，那么您需要比较从壁橱月份开始的日期。

```
Sub Main()

    ' mnth = DateDiff(DateInterval.Month, 8/30/2012, 10/1/2012)  

    Console.WriteLine(GetCompleteMonthCount(New DateTime(2012, 8, 30), New DateTime(2012, 10, 1)))
    Console.ReadLine()

End Sub

Public Function GetCompleteMonthCount(ByVal d1 As DateTime, ByVal d2 As DateTime) As Integer

    If d1.Day <> 1 Then
        d1 = d1.AddMonths(1)
        d1 = New DateTime(d1.Year, d1.Month, 1)
    End If

    If d2.Day <> 1 Then
        d2 = New DateTime(d2.Year, d2.Month, 1)
    End If

    Return DateDiff(DateInterval.Month, d1, d2)
End Function 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-02T11:31:11.070

上面的解决方案都很好，但可能有点过于复杂，怎么样

```
Function wholeMonthsEd(d1, d2) As Integer

    ' determine the DateDiff function output
    ' which gives calendar month difference
    initMonths = DateDiff("m", d1, d2)

    ' do calcs on the Day of the month to deduct/not a calendar month
    If Day(d2) < Day(d1) Then
        initMonths = initMonths - 1
    End If

    wholeMonths = initMonths

End Function 
```

# jquery - 我的 jQuery 在 IE7 中完全崩溃

> ID：12690927
> 
> 赞同：-2
> 
> 时间：2012-10-02T13:12:22.403
> 
> 标签：jquery, validation, internet-explorer-7

题目说的差不多。很长一段时间以来，我一直在尝试重写东西，检查括号、分号、括号和所有爵士乐。仍然在 IE7 中完全中断。

我并不是说在这些事情上我是某种大师，我可以做一些基本的事情，但 90% 的时间我几乎都是复制/粘贴插件的东西。如果有人可以看看它，我将不胜感激。

在这里查看： http: [//snippi.com/s/9h7pf0b](http://snippi.com/s/9h7pf0b)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:16:31.673

`,`IE7以前不喜欢`}`这样：

```
 directionalNav  : false, 
```

应该成为

```
 directionalNav  : false 
```

所有其他事件都是一样的

# sql - 选择所有内容和总和？

> ID：12690928
> 
> 赞同：1
> 
> 时间：2012-10-02T13:12:24.943
> 
> 标签：sql

我有以下查询：

```
select *, sum(hrs.WPTOTT) as "Hours"
  from mstwmlt 
 inner join MSTWMPRD hrs
    ON hrs.WPOPID  = wtopid and hrs.WPTRAN = wtttyp 
       and (wttdte BETWEEN hrs.WPSDTE AND hrs.WPEDTE)
 where (wtwh = ? OR ? = '*ALL') 
   AND (wtopid = ? OR ? = '*ALL') 
   AND (wtttyp = ? OR ? = '*ALL')  
   and ((wtco|| '/' || wtdiv) = ?)
 order by wttdte, wtopid, wtttme, wtttyp 
```

我需要选择所有内容和总和，有没有办法在不为每个单独字段编写长选择查询的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:20:17.490

`SUM`如果不在这些列上使用 a，则不能与其他列一起应用和选择聚合函数`GROUP BY`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:54:17.827

在 MySQL 以外的几乎任何数据库中，您都可以执行以下操作：

```
with t as (
    select *
      from mstwmlt 
     inner join MSTWMPRD hrs
        ON hrs.WPOPID  = wtopid and hrs.WPTRAN = wtttyp 
           and (wttdte BETWEEN hrs.WPSDTE AND hrs.WPEDTE)
     where (wtwh = ? OR ? = '*ALL') 
       AND (wtopid = ? OR ? = '*ALL') 
       AND (wtttyp = ? OR ? = '*ALL')  
       and ((wtco|| '/' || wtdiv) = ?)
    )
 select t.*,
        (select sum(wpptott) from t) as Hours 
 from t
 order by wttdte, wtopid, wtttme, wtttyp 
```

不幸的是，我怀疑您使用的是 MySQL（因为它是唯一一个您的查询不会生成编译时错误的引擎，因为存在`SUM`无`GROUP BY`子句）。在这种情况下，您基本上有三个合理的选择：

1.  复制原始查询以获得总和。在相关子查询或 FROM 子句中执行此操作。
2.  使用 ROLLUP 获取另一行的总和。
3.  在数据库之外的应用层进行求和。

# android - 我可以将最新推荐的 Apache HttpCore 4.2.2 jar 与 HttpClient 4.2.1 库一起使用吗？

> ID：12690930
> 
> 赞同：1
> 
> 时间：2012-10-02T13:12:34.510
> 
> 标签：android, httpclient, apache-httpclient-4.x

Apache HttpClient 库的最新版本为 4.2.1，包括 httpcore-4.2.1.jar 核心库。但是，可以使用更新版本的核心 httpcore-4.2.2.jar。新内核的自述文件建议升级到新内核。

我的问题是，我应该将新的 httpcore-4.2.2.jar 与 httpclient-4.2.1 一起使用，还是应该坚持使用 HttpClient 包中包含的核心版本？

我正在将此软件包用于 Android 设备。

# c - 单行内的预处理器指令 if

> ID：12690934
> 
> 赞同：2
> 
> 时间：2012-10-02T13:12:37.893
> 
> 标签：c, compiler-construction

我有这个功能

```
TOKENP scan_line() {
    TOKENP cur, last = 0;

    while(cur = scan_opd())
        last = cur;

    if (cur = scan_comm())
    #if ENABLE_COMMENT_AS_TOKEN
        add_token(cur);
    #endif
    return last;
} 
```

如果`#if`指令为假，它会被编译为

```
if (cur = scan_comm())
    return last; 
```

或者

```
if (cur = scan_comm());
return last; 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T13:14:28.743

它将被编译，就好像禁用的行不存在一样，所以：

```
if (cur = scan_comm())
    return last; 
```

您应该使用大括号来明确您的意思。

```
if (cur = scan_comm())
{
    #if ENABLE_COMMENT_AS_TOKEN
    add_token(cur);
    #endif
}    
return last; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:49:25.203

它将编译出该代码，因此您的 return 语句将成为有条件的。意义：

```
if(cur = scan_comm())
  return last; 
```

Graham Borland，说得对，但我想确保您清楚问题所在。看看这个：

```
int somef(int a)
{
    if(a == 0)
#if something
    a++; 
#endif
    return 0;
}

int main() {
    int a = 3;
    int b = 10;

    b = somef(a); 

    printf("b is %d\n", b);
    ...do more useful stuff with b... 
```

如果你用`gcc -Werror -Wall`它编译这个代码应该会失败，比如“控制到达非无效函数的结尾”。这让您知道代码存在问题。

如果您在没有安全选项的情况下进行编译，它可能会在没有警告的情况下通过。现在您认为一切都很好，但是由于在此示例代码`something`中未定义，该代码已消失，我们不会从函数调用中返回“0”。在这种特定情况下，b 被分配了 3。

我们在这里遇到了一些未定义的行为。现在当我用 b 做“有用的东西”时，期望它最初是 0，我将**很难**理解为什么值是“3”。

有括号总是安全的：

```
if (cur = scan_comm())
    add_token(cur);

return last; 
```

对比

```
if (cur = scan_comm())
{
    add_token(cur);
}

return last; 
```

这两个工作相同，但第二个有助于防止愚蠢的错误。

# sql - 为什么 SQL Server 2008 Management Studio 没有“打开表”选项

> ID：12690938
> 
> 赞同：3
> 
> 时间：2012-10-02T13:12:50.857
> 
> 标签：sql, sql-server, ssms, sql-server-2008

我曾经有在 SQL Server 2005 Management Studio 中打开表的选项，但在 2008 版本中不再有该选项。有谁知道为什么这个选项被删除了？而且，如果 2008 版本中不再提供此功能，那么最好的替代方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:15:11.160

该选项仍然存在，它只是被重命名。我相信旧版本曾经试图获取表中的每条记录。默认情况下，修改后的 SSMS 将只获取前 200 个。

右键单击表并选择*编辑前 200 行*，如下所示：

![在此处输入图像描述](../Images/c75c16a444e1ba7eee4eca0cb61fb336.png)![在此处输入图像描述](../Images/d3ad90c74a9ffa55b3b47c2a79185690.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:17:03.780

现在是`Edit Top 200 rows`。他们这样做是因为人们不假思索地打开大桌子。如果要查看 2000 行，可以在右键单击 -> 窗格 -> SQL 时编辑选择查询。

![在此处输入图像描述](../Images/90a15ada7503d81df5c1e718da424b42.png)

然后在你的 sql 语句中你会看到`Top(200)`. 你只需要改变你需要的行数。

![在此处输入图像描述](../Images/93947c8ad0f33404af452554d351c546.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:31:06.923

像这样改变它很好 -

工具-> 选项-> SQL 服务器对象资源管理器-> 命令——在这我们可以编辑任何行..

# regex - 如何正则表达式匹配连字符的公司名称，连字符前没有空格？

> ID：12690939
> 
> 赞同：0
> 
> 时间：2012-10-02T13:12:58.503
> 
> 标签：regex

我的 c#.net 应用程序有一个启用布尔逻辑的公司名称搜索字段。因此，它应该允许用户搜索“Hewlett-Packard”以找到该公司或“Foo -tankers”，其中结果集是所有带有“Foo”一词但没有“tankers”一词的公司。

我应该使用什么正则表达式来区分连字符前没有空格的公司搜索与连字符前有一个或多个空格的公司搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:16:27.787

您想使用（否定的）lookbehind 断言。这匹配一个*不*跟在空格字符后面的连字符：

```
(?<!\s)- 
```

这匹配一个跟在空格字符后面的连字符*：*

```
(?<=\s)- 
```

总的来说，我会分别使用这两个表达式来查找公司名称和排除项：

```
\w[\w-]*

-\w[\w-]* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:39:40.150

据推测，用户可以在搜索字段中以任意顺序输入任意数量的术语。如果是这样，对整个字符串执行正则表达式可能不是最好的方法。

更好的方法是[将搜索文本拆分为单独的术语](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)，使用空格作为分隔符。

完成此操作后，很容易查看哪些术语以破折号开头。

# c++ - 推矢量 到向量上 >

> ID：12690941
> 
> 赞同：0
> 
> 时间：2012-10-02T13:13:04.773
> 
> 标签：c++, vector, compiler-errors

所以，我有这种情况：

```
vector<vector<double>> myVector; 
myVector.resize(somePreviousObject.size());
for(int i = 0; i < myVector.size(); i++)
{
    vector<double> tempVector;
    //Do some stuff that fills tempVector, in a loop
    //After loop:
    myVector[i].push_back(tempVector);
} 
```

但是，这会产生一个编译错误，指出：

```
no matching function for call to 'std:;vector<double, std::allocator<double > >::push_back(std::vector<double, std::allocator<double> >&)'
...stl_vector.h:733 note: candidates are: void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = double, _Alloc = std::allocator<double>] 
```

我意识到使用向量向量对性能不友好，但它仍然应该编译和执行，对吗？为什么不呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:43:17.000

在表达式中：

```
myVector[i].push_back(tempVector); 
```

子表达式`myVector`是 a `std::vector<std::vector<double>>`，`myVector[i]`是 a `std::vector<double>&`，并且`push_back`在该向量上需要 a `double`，而不是 a `std::vector<double>`。

看起来您想将第*i*个元素设置为，如果是这种情况，您应该这样做（假设您在此语句之后`tempVector`不需要）：`tempVector`

```
myVector[i].swap(tempVector); 
```

（虽然`myVector[i] = tempVector;`具有相同的净效果，但它会更昂贵，因为它会分配和复制所有内容。这`swap`将几乎免费将内容移入（三个指针*交换*）`tempVector`）`myVector[i]`

我知道有人会过来建议使用`myVector[i] = std::move(tempVector)`，这在 C++11 中也很好，但在 C++03 中不可用。两者的区别在于，在运行后保证`swap`原始内容在里面的情况下（这种情况下是空的，所以没关系）。另一方面，after的状态在标准中是未定义的，它可以让向量为空，或者可以交换它或者......唯一的保证是对象可以在移动后被销毁。`myVector[i]``tempVector``myVector[i]``tempVector``myVector[i] = std::move(tempVector);``tempVector`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:13:48.877

要么是

```
myVector[i] = tempVector; 
```

或者

```
myVector.push_back(tempVector); 
```

由于您事先调整了矢量的大小，我假设您想要第一个版本。

在您的代码中，请记住它`myVector[i]`本身就是 a `vector<double>`，这就是它不起作用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:43:22.810

```
vector<vector<double>> myVector; 
```

应该：

```
vector<vector<double> > myVector; 
```

接着

```
myVector[i].push_back(tempVector); 
```

应该

```
myVector.push_back(tempVector); 
```

# c# - 在 Vista 中使用 C# VS 2008 为 sql server 2008 创建用户组时出现错误号 2202

> ID：12690950
> 
> 赞同：0
> 
> 时间：2012-10-02T13:13:19.047
> 
> 标签：c#, sql-server

我正在尝试创建在 SQL Server 2008 中注册的用户组。

这是我的代码：

```
[DllImport("Netapi32.dll", CharSet=CharSet.Unicode)]
internal static extern int NetLocalGroupAdd([In, MarsharAS(UnmanagedType.LPWStr)]     string serverName,[In] int level, [In] reg NativeHeaders.LOCALGROUP_INFO_1 info0, out int     paramError);

internal struct LOCALGROUP_INFO_1
{
    public string lgrpi1_name;
    public string lgrpi1_comment;
}  

$ always return error number 2202( User name not valid )
Public void CreateWinAuthGroup ()
{
        var localgroup_info_ = new LOCALGROUP_INFO_1
        {
            lgrpi1_name = "TesUserGroup",
            lgrpi1_comment = "Group for My Application"
        }
         int error = NetLocalGroupAdd(serverName, 0, ref localgroup_info_, out paramerror);

} 
```

有没有其他人遇到过这个问题？这个源代码在我的独立测试应用程序上运行良好。但与主应用程序集成时总是返回错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:47:24.363

发现错误。这是因为我使用自定义字符串组用户名进行测试。所以它会运行良好。但在真正的课堂上，错误是因为用户名组格式无效。错误 2202 是：[终端服务器的错误号描述](http://support.microsoft.com/kb/186555)。所以问题就解决了。

# math - 威尔逊评分的未评级实体与负面评级实体 - 如何处理？

> ID：12690951
> 
> 赞同：3
> 
> 时间：2012-10-02T13:13:19.720
> 
> 标签：math, statistics, rating-system, scoring

读过[如何不按平均评分排序](http://www.evanmiller.org/how-not-to-sort-by-average-rating.html)后，我想我应该试一试。

```
CREATE FUNCTION `mydb`.`LowerBoundWilson95` (pos FLOAT, neg FLOAT)
RETURNS FLOAT DETERMINISTIC
RETURN
IF(
    pos + neg <= 0,
    0,
    (
        (pos + 1.9208) / (pos + neg)
        -
        1.96 * SQRT(
            (pos * neg) / (pos + neg) + 0.9604
        )
        / (pos + neg)
    )
    /
    (
        1 + 3.8416
        / (pos + neg)
    )
); 
```

运行一些测试，我发现具有`pos=0`和`neg>0`的对象得分非常小，但不是负数，而具有 的对象`pos=neg=0`得分为零，排名较低。

我认为应该将未评级的对象列在没有正面评级但有一些负面评价的对象之上。

我推断“个人评分都是偏离某个基线的真正表现，所以我会移动基线，我会给每个对象一个‘中性’的初始分数”，所以我想出了这个：

```
CREATE FUNCTION `mydb`.`AdjustedRating` (pos FLOAT, neg FLOAT)
RETURNS FLOAT DETERMINISTIC
RETURN
(
    SELECT `mydb`.`LowerBoundWilson95` (pos+4, neg+4)
); 
```

以下是一些示例输出`AdjustedRating`

```
 \  pos  0       1       2
neg
 0   | 0.215 | 0.188 | 0.168
 1   | 0.266 | 0.235 | 0.212
 2   | 0.312 | 0.280 | 0.235 
```

这更接近我想要的分数，作为一个数字技巧，我想它是可行的，但我无法在**数学上证明它的合理性**

有没有更好的方法，“正确”的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-07T20:59:42.287

问题的出现是因为这种近似（下置信界限）实际上是用于识别列表中评分最高的项目。如果您对排名最低的感兴趣，则可以取而代之的是置信上限。

或者，我们使用贝叶斯统计，这是您描述的第二种方法的形式化。埃文米勒实际上对此有一个[后续帖子](http://www.evanmiller.org/bayesian-average-ratings.html)，他说：

> 我之前提出的解决方案——使用均值周围的置信区间的下限——就是计算机程序员所说的 hack。它之所以有效，不是因为它是一个普遍最优的解决方案，而是因为它大致对应于我们希望在最佳评分列表顶部看到的直观感觉：在给定数据的情况下，坏概率最小的项目.
> 
> 贝叶斯统计让我们将这种直觉形式化......

使用贝叶斯排名方法，任何数据为零的点都会回落到先前的平均值（您称为初始分数），然后在收集数据时远离它。这也是 IMDB 用来计算其热门电影列表的方法。 [https://math.stackexchange.com/questions/169032/understanding-the-imdb-weighted-rating-function-for-usage-on-my-own-website](https://math.stackexchange.com/questions/169032/understanding-the-imdb-weighted-rating-function-for-usage-on-my-own-website)

您建议将每个对象记为 4 个赞成票和 4 个反对票的具体方法相当于将 0.5 的平均值与 8 票的权重放在一起。鉴于没有任何其他数据，这是一个合理的开始。拉普拉斯在[日出问题](http://en.wikipedia.org/wiki/Rule_of_succession)中著名地论证了事件应该被归为1个成功和1个失败。在项目排名问题中，我们有更多的知识，因此将先验均值设置为等于平均排名是有意义的。这个先验均值的权重（或作为数据函数的移动速度，也称为先验方差）可能难以设置。

对于 IMDB 的 Top 250 电影排名，他们使用 7.1 的平均电影排名，权重为 25000 票，这相当于将所有电影视为以 25000 个“免费”票开始，评分为 7.1

# javascript - 计算调整大小比例

> ID：12690953
> 
> 赞同：0
> 
> 时间：2012-10-02T13:13:24.173
> 
> 标签：javascript, computational-geometry

我有一个尺寸为 w 和 h 的文档。里面有一个尺寸为 w1 和 h1 的矩形，位于坐标 x 和 y 上。

要计算 x 和 y 以使矩形始终位于我使用的文档的中心：

```
x = (w / 2) - (w1 / 2)
y = (h / 2) - (h1 / 2) 
```

它有效！

但我也想动态地改变 w1 和 h1，使其始终与 w 和 h 成比例。例如，如果文档变得比矩形小，则矩形在缩小时应保持其比例。

那么，如何计算 w1 和 h1？

“文档”是 html5 画布，矩形是图像。我正在使用 JavaScript。

谢谢！

这是一个 JS Fiddle： http: [//jsfiddle.net/Saturnix/TkPX5/1/](http://jsfiddle.net/Saturnix/TkPX5/1/) 尝试缩放窗口：矩形始终位于中心。但如果窗口变小，它不会调整大小。我错过了计算 w1 和 h1 的公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:09:43.653

我编写了以下代码，它应该可以实现您想要的，并且基于您在评论中提供的 jsfiddle：

```
var w1 = 300;
var h1 = 400;
var WPROP = w1/g.width;
var PROP = h1/w1;
g.draw = function() {       
    // DOCUMENT WIDTH AND HEIGHT
    var w = g.width;
    var h = g.height;            

    w1 = WPROP*w;
    h1 = PROP*w1;

    // RECTANGLE
    var x =  (w / 2) - (w1 / 2);
    var y = (h / 2) - (h1 / 2);

    g.ctx.fillRect(x,y,w1,h1);

} 
```

请参阅[此处](http://jsfiddle.net/HRS4w/2)以了解此代码。

# join - 如何使用 cogroup 加入

> ID：12690954
> 
> 赞同：0
> 
> 时间：2012-10-02T13:13:28.970
> 
> 标签：join, apache-pig

我有这个加入。

```
A = Join smallTableBigEnoughForInMemory on (F1,F2) RIGHT OUTER, massive on (F1,F2);

B = Join anotherSmallTableBigforInMemory on (F1,F3 ) RIGHT OUTER, massive on (F1,F3); 
```

由于两个连接都使用一个公共键，我想知道 COGROUP 是否可以用于有效地连接数据。请注意，这是一个 RIGHT 外连接。

我确实考虑过在 F1 上进行联合分组，但是小表在单个键上有多个组合（200-300），所以我没有使用单键连接。

我认为分区可能会有所帮助，但数据有偏差，我不确定如何在 Pig 中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:38:29.303

您正在寻找 Pig 的片段复制连接实现。有关不同连接实现的更多详细信息，请参阅 O'Reilly 的书[Programming Pig 。](http://ofps.oreilly.com/titles/9781449302641/)（具体参见第 8 章，*让猪飞*起来。）

在片段复制连接中，不需要缩减阶段，因为大输入的每条记录都通过映射器流式传输，与小输入（完全在内存中）的任何记录匹配，然后输出。但是，您必须小心不要使用不适合内存的输入进行这种连接——Pig 会发出错误并且作业将失败。

在 Pig 的实现中，必须首先给出大输入，因此您实际上将进行左外连接。只需添加“使用'复制'”：

```
A = JOIN massive BY (F1,F2) LEFT OUTER, smallTableBigEnoughForInMemory BY (F1,F2) USING 'replicated'; 
```

B 的连接将是相似的。

# annotations - EJB：类级别注释的意义何在？

> ID：12690957
> 
> 赞同：3
> 
> 时间：2012-10-02T13:13:45.023
> 
> 标签：annotations, ejb

我正在阅读这本书*Pro JPA2: Mastering the Java Persistance API*，但我没有像这个例子中那样得到类级注释的用处：

```
@EJB(name="cart", beanInterface=ShoppingCart.class)
public class ShoppingCartServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        HttpSession session = request.getSession(true);
        ShoppingCart cart = (ShoppingCart) session.getAttribute("cart");
        //......
    }
} 
```

如果购物车变量的值不会自动注入其中并且您必须初始化 var，那么放置 @EJB 有什么意义。你自己？如果没有注释，代码是否也能正常工作？注释实际上做了什么？

我得到了其他类型注释的用处，比如当你把它放在方法或变量上时，它会自动注入东西。就在这里，在班级层面，它看起来毫无用处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:35:20.083

类级别@EJB（或@Resource）定义您的 ShoppingCartServlet 依赖于某些 EJB，在您的情况下为“购物车”。如果您想从非托管上下文（如 POJO）访问 EJB，则需要这样做。在这种情况下，您必须进行 JNDI 查找以获取对 EJB 的引用，您可以使用 ejb-ref (ejb-local-ref) 描述符或类级别的 @EJB 注释来定义该引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T13:22:54.460

这看起来像是类级别的注释而不是方法级别，我不知道为什么要将 servlet 注释为 EJB，但是如果使用得当，@EJB 注释将为该类免费提供许多不同的东西，例如事务ETC...

# ruby-on-rails - rails audit gem - audits.user_id 可能不为 NULL

> ID：12690958
> 
> 赞同：1
> 
> 时间：2012-10-02T13:13:48.380
> 
> 标签：ruby-on-rails, database, activerecord

我正在使用审核员 gem 来跟踪我的模型中的更改，并且我发现每当我尝试从控制台工作时都会收到此错误，这很烦人（我猜 user_id 是从 current_user 获取的并且它没有关联）。

我正在尝试创建一些用于开发的对象，并且每次都必须从 dbconsole 中进行。

我使用 'audit(:create, :update, :destroy)' 而不是 'audit!'。

有谁知道我是否可以抑制这些错误或禁用 user_id 空检查？（我不在乎如果在生产中我运行控制台并创建一个对象，我会在那里有一个 NULL ）。

非常感谢，扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:41:08.040

我遇到过同样的问题。问题是我没有声明任何 attr_accessible 。阅读：[https ://github.com/collectiveidea/audited#gotchas](https://github.com/collectiveidea/audited#gotchas)

编辑：另外，我必须为 current_user 定义一个方法：

```
def current_user
  User.find_by_username 'root'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:19:10.643

为什么不在审计工作之前将 current_user 设置为用户对象？

```
current_user = User.first
...your other code here 
```

# reporting-services - 如何在 List 控件中获取编号列表？

> ID：12690960
> 
> 赞同：1
> 
> 时间：2012-10-02T13:13:56.663
> 
> 标签：reporting-services

我有一个带有列表对象的子报告，其中显示了我想要编号的项目列表。我可以让它们成为项目符号，我认为这就像将其更改为编号一样简单，但是当我这样做时，数字变为 1.、1.、1.、... 而不是 1.、2.、 3., ...

有人可以帮我完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:28:35.563

发生这种情况的**原因**是因为您可能*在 list 内的文本框*上设置格式。列表本身不允许您设置“编号列表”格式。对于 List 控件中的每次迭代，文本框始终只显示 1 个项目。

有两种**方法**可以得到你想要的。第一个选项是使用表达式来显示数字。表达式将是这样的：

```
=RowNumber("DataSet1") & ". " & Fields!MyListValue.Value 
```

第二种解决方法（明显更骇人听闻！）可能是制作一个多值隐藏参数，填充数据集中的默认值。然后，您可以使用`Join`带有换行符的表达式，将其放在文本框中，并设置编号格式。虽然没有测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T14:50:49.880

这几乎对我有用，但我不得不使用 Tablix 编号，而不是在括号中使用 DataSet。可能是因为我的在子报告中……不确定。

前任：

```
=RowNumber("Tablix1") & ". " & Fields!MapSourceName.Value 
```

# ios - preferredInterfaceOrientationForPresentation 必须返回受支持的界面方向

> ID：12690963
> 
> 赞同：31
> 
> 时间：2012-10-02T13:14:05.803
> 
> 标签：ios, cocoa, ios6

此错误没有意义，因为首选方向`UIInterfaceOrientationLandscapeRight`由支持的方向返回

```
//iOS6

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationLandscapeRight | UIInterfaceOrientationLandscapeLeft);
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
} 
```

错误 ：

> 由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“preferredInterfaceOrientationForPresentation 必须返回受支持的界面方向！”

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-02T13:59:33.367

您的代码应如下所示：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
} 
```

此外，请确保在您`Info.plist`的应用程序中设置了正确的方向，因为您返回的方向与该方向`supportedInterfaceOrientations`相交，`Info.plist`如果它找不到一个共同的方向，那么您将收到该错误。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-23T15:53:04.977

仅当 shouldAutorotate 设置为 YES 时才调用supportedInterfaceOrientations

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
} 
```

对我来说最简单的方法就是设置 Info.plist

![信息列表](../Images/4b876ded022693bcf95cfa9f865473a9.png)

如果您想支持 iOS 5，请在您的视图控制器中使用此代码。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-02T13:53:53.840

这些是错误的枚举`supportedInterfaceOrientations`。你需要使用`UIInterfaceOrientationMaskLandscapeLeft`，等等（注意中间**的字掩码）**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T18:16:59.023

从文档中：

```
-(NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft; 
} 
```

请注意，正确的方向是“面具”！你试过这个吗？

# javascript - 垂直对齐绝对定位的 div

> ID：12690964
> 
> 赞同：0
> 
> 时间：2012-10-02T13:14:09.967
> 
> 标签：javascript, css

我有两个元素；输入字段和 div - 一个挨着另一个。Div 绝对定位在相对元素内部，并定位在输入的右侧。

输入具有固定高度，但 div 的高度取决于内容。

我想要实现的是在输入旁边居中垂直对齐 div。我不确定这是否可能是纯 CSS，所以这就是我添加 javascript 标记的原因。

**HTML：**

```
<td>
<input type="text"/>
<div id="rel" style='position:relative;'>
<div id="content">
content
</div>
</div>
</td> 
```

**CSS：**

```
#content {

position:absolute;
left:30px;

}

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:28:58.060

只需使用

```
td input {
    vertical-align:middle;
} 
```

很好，你已经有了一个表格，[通过 CSS 垂直居中](http://www.student.oulu.fi/~laurirai/www/css/middle/)并不容易。

顺便说一句：您可以使用而不是两个 div 和绝对定位`margin-left: -30px;`

# r - 如何使用包`RcppExamples`？

> ID：12690966
> 
> 赞同：-2
> 
> 时间：2012-10-02T13:14:13.517
> 
> 标签：r, rcpp

我是 Rcpp 的新手，想将一些 C++ 类导出到 R 中。我已经安装`RcppExmples`了打算学习一些代码片段。但我什至不知道如何使用它？`help(RcppExamples)`只得到：

> 描述：
> 
> ```
> This package shows some simple examples for the use of ‘Rcpp’.
> Both the older ('classic') and new API are documented.
> 
> It can also serve as a working template to create packages that
> use ‘Rcpp’ to interface C++ code or libraries. 
> ```

我在哪里可以获得示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:22:16.847

你看过[说明书](http://cran.r-project.org/web/packages/RcppExamples/RcppExamples.pdf)吗？我认为从这份文件中可以清楚地看到。但是DESCRIPTION文件说：

> 请注意，此包中的文档目前并未涵盖包中的所有功能。它甚至不接近。

所以我担心这就是你所能得到的——除了查看[源代码](http://cran.r-project.org/src/contrib/RcppExamples_0.1.4.tar.gz)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:23:36.593

包中示例的源代码在包本身中。

这是 Rcpp。它适用于 C++ 源代码和 R 代码。您不要像使用普通包一样使用它，而是使用它创建包。从源头。

# jquery - 我如何对fancybox导航缩略图进行分页

> ID：12690968
> 
> 赞同：0
> 
> 时间：2012-10-02T13:14:15.773
> 
> 标签：jquery, fancybox

我的fancybox 画廊中有很多照片，缩略图导航从页面一侧泄漏。

所以我想用箭头或沿着这些线的东西将可见的缩略图导航分页到 5 左右。

我不是最擅长 js（我正在学习），但我确实了解 html。

[http://ryansamul.com/dark/gallery-subject-new.html](http://ryansamul.com/dark/gallery-subject-new.html)

以下是我的代码的截断版本：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery(".fancybox-thumb").fancybox({
        prevEffect  : 'none',
        nextEffect  : 'none',
        helpers : {
            title   : {

                type: 'outside'
            },
            thumbs : {
                width : 100,
                height : 100
            }
        }
    });
});
    </script>

<div class="one-fifth">
                <p>
                    <a class="fancybox-thumb" rel="fancybox-thumb" href="images/gallery/subject/1.jpg" ><img src="images/gallery/subject/thumbs/1.png" width="158" height="158" alt=" "/></a>
                </p>
            </div>

            <div class="one-fifth">
                <p>
                    <a href="images/gallery/subject/2.jpg" class="fancybox-thumb" rel="fancybox-thumb"><img src="images/gallery/subject/thumbs/2.png" width="158" height="158" alt=" " /></a>
                </p>
            </div>
            <div class="one-fifth">
                <p>
                    <a href="images/gallery/subject/3.jpg" class="fancybox-thumb" rel="fancybox-thumb"><img src="images/gallery/subject/thumbs/3.png" width="158" height="158" alt=" " /></a> 
                </p>
            </div>
            <div class="one-fifth"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:36:34.423

如果您希望缩略图“适合”浏览器的宽度，您可以将一些 CSS 元素更改为 100% 的宽度。如果你改变这三个，你就会到达那里。

```
.center {
    width: 100%;
}

#content {
    width: 100%;
}

.portfolio-container {    
    width: 100%;
} 
```

然后，当您更改浏览器的宽度时，每行将容纳更少或更多的图像。

# django - 本地 Django webapp 的服务器选择？

> ID：12690969
> 
> 赞同：0
> 
> 时间：2012-10-02T13:14:16.943
> 
> 标签：django, webserver, localhost

我整理了一个 Django 应用程序，该应用程序旨在在 Pythonanywhere 上运行。但是，我很快发现 Pythonanywhere 的免费计划阻止了我打算与之交互的远程站点，因此我决定在本地计算机上运行该应用程序就足以满足我的目的。

现在，我知道 Django 的开发服务器并不打算在生产环境中运行。那么，我应该在老旧的 Windows 工作站上运行什么服务器守护进程，该应用程序可能会部署到该工作站上？阿帕奇、lighttpd、切诺基？还有什么？

我的首要任务是尽可能多地节省系统资源；我可能还会使用 Python 的内置 sqlite3 而不是 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:31:17.450

[我个人使用fcgi](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/)和[Nginx](https://code.djangoproject.com/wiki/DjangoAndNginx)部署 Django 。Nginx 提供了多种策略来节省系统资源；它作为[反向代理](https://serverfault.com/questions/30705/how-to-set-up-nginx-as-a-caching-reverse-proxy)的使用有据可查并被广泛使用。

[此处](https://stackoverflow.com/questions/10127342/nginx-flask-gunicorn-python-where-to-start/10127465)的问题/答案对可能会帮助您在部署 Django 时清除有关各种组件的一些初始问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:33:24.770

很遗憾听到您不能使用 PythonAnywhere 的免费版本 :-(

我将支持nginx的使用；这就是我们用作 PA 前端的东西。但是，我们使用 uwsgi 作为后端。它对我们非常有效，并且非常易于配置。

# google-chrome-extension - 在 js 中使用 console.log()

> ID：12690971
> 
> 赞同：0
> 
> 时间：2012-10-02T13:14:20.380
> 
> 标签：google-chrome-extension

> **可能重复：**
> [在 Chrome 扩展程序中从 background.js 读取控制台消息的位置？](https://stackoverflow.com/questions/10257301/where-to-read-console-messages-from-background-js-in-a-chrome-extension)

我正在尝试编写我的第一个 Google Chrome 扩展程序。我要做的就是创建一个扩展，当单击扩展的浏览器操作图标时，通过 console.log() 将字符串写入控制台。

这是我的 manifest.json：

```
{
  "name": "My Extension",
  "description": "My Extension",
  "version": "1.0",
  "permissions": ["tabs"],
  "background": {
    "scripts": ["test.js"]
  },
  "browser_action": {
    "default_title": "My Extension",
    "default_icon": "icon.png"
  },
  "manifest_version": 2
} 
```

这里是 test.js：

```
chrome.browserAction.onClicked.addListener(function(tab) { console.log('testing'); }); 
```

我在 Chrome 中打开了控制台，但是当我单击扩展程序的图标时，控制台中没有显示任何内容。我试过重新加载扩展，但没有帮助。

我显然做错了什么。

任何建议将不胜感激。LT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:22:49.717

您的脚本在后台页面中运行，因此消息将显示在后台页面的控制台中。

*   打开**扩展**页面。
*   确保选中**开发者模式。**
*   在**My Extension**下，单击**_generated_background_page.html**进行检查。
*   单击**控制台**选项卡。

# ruby - ruby - %w(%q(words in a row)) 返回错误的元素

> ID：12690982
> 
> 赞同：0
> 
> 时间：2012-10-02T13:14:54.833
> 
> 标签：ruby, arrays

我怎样才能让这个表达式返回一个单词数组？

```
%w(%q(words in a row)) 
```

我以为 %q 会给我一个字符串，然后 %w 会给我一个单词数组。Bt 相反，我得到

```
["%q(words", "in", "a", "row")"] 
```

这是一些较大代码的一部分，因此仅使用 %w 本身无济于事。
我希望能够首先插入 %q 表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:23:34.023

也许我误解了这个问题。但是如果你想插入字符串然后转换成一个单词数组，我相信这样`%W`做，注意大写（见[这里](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals)）。

```
%W(words in a row)
#=> ["words", "in", "a", "row"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:19:47.103

小写`%w`并且`%q`不会在内部插入变量。您将需要使用大写的`%W`and `%Q`，并且还需要将变量包装为 with`#{}`以进行插值。

您的工作代码版本：

```
%W{#{%q{words in a row}}} 
```

但是正如贾斯汀所说，我不明白这一点。您可以直接将不带引号的原始字符串放入`%w{}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:30:48.770

我怀疑做这种事情的用处，而且你的代码肯定有异味，但这里有一种方法：

```
eval("%w(#{%q(words in a row)})")
# => ["words", "in", "a", "row"] 
```

# c# - 在 DevExpress Grid Control 中正确格式化货币

> ID：12690985
> 
> 赞同：0
> 
> 时间：2012-10-02T13:15:04.343
> 
> 标签：c#, winforms, devexpress, currency, gridcontrol

因此，我已经看到了其他有关此问题的问题，但是我一生都无法将我的网格格式作为货币浮动。这是我的简单项目，它有一个名为 gridcontrol1 的网格控件，有 4 列，我希望最后一个是货币，其他 3 个是字符串。

```
public partial class Form1 : Form
{
    private DevExpress.XtraGrid.GridControl gridControl1;
    private DevExpress.XtraGrid.Views.Grid.GridView gridView1;
    private DevExpress.XtraGrid.Columns.GridColumn gridColumn1;
    private DevExpress.XtraGrid.Columns.GridColumn gridColumn2;
    private DevExpress.XtraGrid.Columns.GridColumn gridColumn3;
    private DevExpress.XtraGrid.Columns.GridColumn gridColumn4;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        ArrayList test = new ArrayList();
        test.Add(new MyObject() { myCurrency = 1.5F, prop1 = "hi", prop2 = "hi2", prop3 = "hi3" });

        gridColumn4.DisplayFormat.FormatString = "c";
        gridColumn4.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Custom;

        gridControl1.DataSource = test;
        gridControl1.MainView.PopulateColumns();
        gridControl1.RefreshDataSource();
    }
}

public class MyObject
{
    public string prop1 { get; set; }
    public string prop2 { get; set; }
    public string prop3 { get; set; }
    public float myCurrency { get; set; }
} 
```

我已经尝试了自定义和数字的“c”、“c2”、“N”、“N2”和 FormatType 格式字符串以及它们的任何组合，结果与在框中列出的“1.5”相同。我做错了什么简单的事情吗？这不可能那么难！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:54:33.420

请尝试以下方法（这对我来说很好）：

```
GridColumn colCurrency = gridView1.Columns["myCurrency"];
colCurrency.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Custom;
colCurrency.DisplayFormat.FormatString = "c"; 
```

相关链接：[GridColumn.DisplayFormat 属性](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsGridColumn_DisplayFormattopic)

同时删除该`ColumnView.PopulateColumns`命令，因为调用此方法时会清除 GridView.Columns 集合。因此，您在设计器中为列设置的显示格式不会影响新创建的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T14:32:09.280

代替

```
gridColumn4.DisplayFormat.FormatString = "c";
gridColumn4.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Custom; 
```

只需向上移动第二行：

```
gridColumn4.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Custom;
gridColumn4.DisplayFormat.FormatString = "c"; 
```

# php - 一些内容应该使用 window.print 在新页面上打印

> ID：12690989
> 
> 赞同：1
> 
> 时间：2012-10-02T13:15:10.840
> 
> 标签：php, jquery, printing

我正在做一个想要打印账单的项目。它运行成功，但现在我想在新页面上打印特定内容。

以下是打印屏幕图像，我想始终在新页面上显示条款和条件，目前它显示在同一页面上取决于账单内容。我是新手，任何帮助将不胜感激。提前致谢

![sdd](../Images/7ab02fc534302584a4a3b71be804ca15.png)

编辑 ：-

```
<script type="text/javascript">
            $(document).ready(function (){  

                $('.printpreview').click(function()
                {
                    $('.printpreview').hide()
                    window.print();

                });

            });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:20:48.000

不知道支持范围有多广

```
@media print { table {page-break-after:always}} 
```

或在javascript中

```
*object*.style.pageBreakAfter="always" 
```

更多信息可以[在 sitepoint 的 css 页面上](http://reference.sitepoint.com/css/page-break-after)找到！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:28:58.120

将一个类变成样式表。

```
.printbreak {
page-break-before: always;
} 
```

将您的条款和条件内容放入 div 并将这个类交给这个 div

```
<div class="printbreak">
//terms & condition
</div> 
```

如果您想了解更多信息，请查看[http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

# ruby-on-rails - exslt 功能在 ruby -xslt gem 中不起作用

> ID：12690991
> 
> 赞同：2
> 
> 时间：2012-10-02T13:15:17.163
> 
> 标签：ruby-on-rails, ruby, xslt, gem, bundler

我有一个 Rails 应用程序并使用 Bundler 来管理 gem。我使用 ruby​​-xslt gem 进行 XSLT 转换。gem 无法识别像 node-set() 这样的 exslt 功能。

这是我一直在测试的样式表

```
<xsl:stylesheet version="1.1" 
        xmlns="http://max.gov" 
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
        xmlns:pre="http://max.gov"
        xmlns:exslt="http://exslt.org/common">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

        <!--The fabricated xml I want to access with exslt:node-set()-->
        <xsl:variable name="PRE">
                    <root>
                                <item/>
                                <item/>
                    </root>
        </xsl:variable>

        <xsl:template match="/">
                    <results>
                                <run1 name="exslt:node-set($PRE)//pre:item">
                                            <results>
                                            <xsl:for-each select="exslt:node-set($PRE)//pre:item">
                                                        <success position="{position()}"/>
                                            </xsl:for-each>
                                            </results>
                                </run1>
                                <run2 name="exslt:node-set($PRE)//pre:item">
                                            <results>
                                            <xsl:for-each select="exslt:node-set($PRE)//pre:item">
                                                        <success position="{position()}"/>
                                            </xsl:for-each>
                                            </results>
                                </run2>
                    </results>
        </xsl:template>
</xsl:stylesheet> 
```

这是我在我们的应用程序中使用 XML::XSLT 时得到的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<results xmlns="http://max.gov" xmlns:pre="http://max.gov" xmlns:exslt="http://exslt.org/common">
   <run1 name="exslt:node-set($PRE)//pre:item">
    <results/>
  </run1>
</results> 
```

（请注意，不仅节点集功能不起作用，元素也被完全跳过。）代码基本上是这样的：

```
xslt = XML::XSLT.new()
xslt.xml = @xml         # @xml string
xslt.xsl = @record.xslt # xslt is stored in db
result = xslt.serve
render :xml => result 
```

这是预期的输出

```
<?xml version="1.0" encoding="UTF-8"?>
    <results xmlns="http://max.gov" xmlns:pre="http://max.gov" xmlns:exslt="http://exslt.org/common">
       <run1 name="exslt:node-set($PRE)//pre:item">
          <results>
             <success position="1"/>
             <success position="2"/>
          </results>
       </run1>
       <run2 name="exslt:node-set($PRE)//pre:item">
           <results>
             <success position="1"/>
             <success position="2"/>
           </results>
       </run2>
</results> 
```

执行以下任何操作时，我都会得到这个正确的结果……</p>

*   从命令行运行 xsltproc
*   在 Rails 控制台中运行以下命令

    > > xslt = XML::XSLT.new xslt.xml = File.read('data.xml')
    > > xslt.xsl = File.read('test.xsl') xslt.serve

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:50:18.723

我们最终用 Nokogiri 替换了 ruby​​-xslt，这解决了我们的问题

# javascript - 在模糊事件中隐藏日期选择器

> ID：12690992
> 
> 赞同：6
> 
> 时间：2012-10-02T13:15:20.247
> 
> 标签：javascript, twitter-bootstrap, jquery

我正在尝试在输入上添加事件模糊以隐藏日历。
我用来显示日历的插件是下面的[eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)。

这是源代码[http://jsfiddle.net/KLpq7/75/](http://jsfiddle.net/KLpq7/75/)

```
var inputs = $('.datepicker').datepicker({
    autoclose: true
});

inputs.on('blur', function () {
          console.log($(this));
          // I would like to hide just the date picker
          //$(this).hide();
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T15:47:40.800

你可以试试这个：

```
var inputs = $('.datepicker').datepicker({
format: 'yyyy-mm-dd',
autoclose: true}).on('changeDate', function (ev) {
         $(this).blur();
         $(this).datepicker('hide');
     }); 
```

小提琴：http: [//jsfiddle.net/KLpq7/82/](http://jsfiddle.net/KLpq7/82/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:23:24.923

```
 inputs.on('blur', function () {
        inputs.datepicker('hide');
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:02:49.163

这是一个[已知的错误](https://github.com/eternicode/bootstrap-datepicker/issues/202)* - 如果您使用“datepicker”作为输入的类，它将干扰 datepicker 代码，因为`datepicker`它也是用于选择器窗格的类。为你的选择器使用不同的类应该可以解决这个问题。

* 目前没有任何*开放*票，但它被确认为一个小错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T15:48:31.330

试试[这个](http://jsfiddle.net/KLpq7/84/)更新的小提琴。我认为由于您使用的是类选择器，因此模糊事件处理程序中存在一些冲突。我已经按 ID 分隔了每个日历选择器，现在它似乎工作正常。

# routing - emberjs动态路由，序列化给出未捕获的TypeError：无法调用未定义的方法'get'

> ID：12690993
> 
> 赞同：1
> 
> 时间：2012-10-02T13:15:22.173
> 
> 标签：routing, ember.js

`serialize function`为什么在行内抛出错误`id = context.get('id');` 特别是为什么当我加载索引路由时它甚至试图运行序列化。

`full demo:` [http://jsfiddle.net/mh8Xu/1/](http://jsfiddle.net/mh8Xu/1/)

```
 serialize: function(router, context) {
                    var rtnVal = {},
                        id = context.get('id');
                    if (context) {
                        rtnVal = {post_id: id};
                    }

                    return rtnVal;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:49:36.123

错误在`{{action goToShowPost context="post" href="false"}}`. 我相信它是向后兼容的，但似乎不是。现在您必须直接传递上下文，如下所示：

`{{action goToShowPost post href="false"}}`

# java - tomcat 7.0 嵌入式 + jax-ws：找不到 sun-jaxws.xml

> ID：12690997
> 
> 赞同：3
> 
> 时间：2012-10-02T13:15:35.350
> 
> 标签：java, jax-ws, tomcat7

我正在尝试让 JAX-WS 与嵌入式 tomcat 7.0 一起使用。
我遵循了一些关于标准 Tomcat 的教程（例如[http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)），但我无法找到一个特定的Tomcat embedded。

我确实成功地在服务器上运行了我自己的 servlet，但是当尝试使用包含所有 JAX-WS 注释的类启动它时（以及所有其他注释：web.xml 中的 WSServletContextListener + WSServlet，WEB-INF 中的 sun-jaxws.xml） ，我收到以下错误：

```
INFO: Initializing ProtocolHandler ["http-bio-80"]
2 oct. 2012 14:48:20 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Tomcat
2 oct. 2012 14:48:20 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
2 oct. 2012 14:48:21 org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment
INFO: No global web.xml found
2 oct. 2012 14:48:28 com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized
INFO: WSSERVLET12 : initialisation du processus découte de contexte JAX-WS
2 oct. 2012 14:48:28 com.sun.xml.ws.transport.http.servlet.WSServletContextListener parseAdaptersAndCreateDelegate
SEVERE: WSSERVLET11 : fail analyzing descriptor : javax.xml.ws.WebServiceException: execution descriptor  "/WEB-INF/sun-jaxws.xml" is missing
javax.xml.ws.WebServiceException: Le descripteur d'exécution "/WEB-INF/sun-jaxws.xml" is missing
at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.parseAdaptersAndCreateDelegate(WSServletContextListener.java:125)
at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:152) 
```

它看起来像一个路径问题，但我不明白缺少什么，因为同一文件夹 WEB-INF 文件夹中的 web.xml 已正确加载...这是我的应用程序的启动代码：尝试 {

```
 Tomcat tomcat = new Tomcat();
        tomcat.setBaseDir(".");
        tomcat.setPort(80);

        tomcat.getHost().setAppBase("src/main/webapp");
        Context context = tomcat.addWebapp("/Test", ".");
        File configFile = new File(tomcat.getHost().getAppBase() + "/META-INF/context.xml");
        context.setConfigFile(configFile.toURI().toURL());

        tomcat.enableNaming();

        StandardServer server = (StandardServer)tomcat.getServer();
        AprLifecycleListener listener = new AprLifecycleListener();
        server.addLifecycleListener(listener);

        tomcat.start();
        tomcat.getServer().await();

    } catch (Exception e) {

        e.printStackTrace();
    } 
```

感谢您的帮助或建议...

# javascript - 无法评估真/假时 JavaScript 中的条件运算符

> ID：12690998
> 
> 赞同：1
> 
> 时间：2012-10-02T13:15:35.707
> 
> 标签：javascript

在下面的代码中：

> console.log( (false || "test") ? "first" : "second") );

第一部分的 o/p 是 test (false || "test") ，那么我最后的 o/p 怎么样呢？当条件运算符无法将表达式计算为 True 或 False 时，通常会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:16:53.900

`||`是或。所以当需要一个布尔值时，`(false || "test")`相当于`"test"`. 并且在需要布尔值时`"test"`被强制（不会，不会，但会被视为）。`true``0``""``"0"``true`

[正如](http://interglacial.com/javascript_spec/a-12.html#a-12.5)ECMAScript 规范中所见， an使用[toBoolean](http://interglacial.com/javascript_spec/a-9.html#a-9.2)`if`将条件转换为布尔值：

![在此处输入图像描述](../Images/b85c8ba39cc739857711838cedc8ca6b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:19:05.760

javascript 中的每个值，无论其类型如何，都可以强制转换为布尔值。

强制要求`false`的值称为“假”，强制要求`true`的值称为“真”。

[这是一个演示这种强制的小提琴。](http://jsfiddle.net/QjSYG/9/)

在这种情况下：

```
(false || "test") ? "first" : "second") 
```

`(false || "test")`逻辑上等价于`("test")`since`false || X`等价于（如果您对逻辑感兴趣，`X`这称为[析取三段论）。](http://en.wikipedia.org/wiki/Disjunctive_syllogism)

javascript 中的任何非空字符串（包括 string `'false'`，对那个 bug 有乐趣）都会强制转换为`true`，因此第三条件评估为`true`并记录`'first'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:16:50.950

> *“当条件运算符无法将表达式评估为 True 或 False 时，一般会发生什么？”*

JavaScript 中的每个表达式都可以被评估为`true`or`false`因为每个类型都可以强制转换为布尔值。

在您的代码中，`"test"`操作数将被有效地评估为`Boolean("test")`，即`true`。

强制为 的值`false`是：

*   `false` *（明显地）*
*   `NaN`
*   `""` *（一个空字符串）*
*   `0`
*   `null`
*   `undefined`

其他一切都考虑在内`true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:17:45.113

如果`||`左侧为真，则运算符返回左侧，否则返回右侧。

因此`(false || "test")`是`"test"`。

`"test"`是一个*真实*的价值，所以你得到：

`"test" ? "first" : "second"`

`:`如果前面的值`?`是*真*值（即是），则三元运算符返回前面的值。

> 当条件运算符无法将表达式计算为 True 或 False 时，通常会发生什么？

任何表达式的结果都可以被评估为真值或假值，因此这永远不会发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T13:17:55.753

因为 Javascript 隐式转换`test`为`true`. 在将字符串转换为布尔值时，Javascript 将非空字符串转换为 ，将空字符串转换`true`为`false`.

因此，由于运算符的第一个操作数`||`是`false`，因此`false || "test"`表达式将返回第二个参数，然后将其转换为 true。所以你会得到`first`你的输出。