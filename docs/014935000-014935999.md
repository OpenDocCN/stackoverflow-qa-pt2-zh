# StackOverflow 问答 14935000-14935999

# php - 从动态填充的链接动态重定向 url

> ID：14935008
> 
> 赞同：1
> 
> 时间：2013-02-18T11:16:00.233
> 
> 标签：php, mysql, redirect, http-redirect, url-redirection

一个mysql数据库有以下三列：

```
id  url_href              url
1    yahoo         http://www.yahoo.com
2    google        http://www.google.com
3    bing          http://www.bing.com 
```

我使用以下查询来获取值

```
mysql_select_db($database_XYZ, $XYZ);
$query_urlencoder = "SELECT id, url_href, url FROM sites WHERE id >0 ORDER BY id DESC";
$urlencoder = mysql_query($query_urlencoder, $XYZ) or die(mysql_error());
$row_urlencoder = mysql_fetch_assoc($urlencoder);
$totalRows_urlencoder = mysql_num_rows($urlencoder); 
```

链接标签

```
<a href="redirect.php?encodeurl=<?php echo $row_urlencoder['url']; ?>" target="_blank"><?php echo $row_urlencoder['url_href']; ?></a> 
```

根据重复区域动态填充页面上的链接，例如，

```
yahoo
google
bing 
```

并单击上面的链接将用户分别带到

```
http://www.examplecom/redirect.php?encodeurl=http://www.yahoo.com
http://www.example.com/redirect.php?encodeurl=http://www.google.com
http://www.example.com/redirect.php?encodeurl=http://www.bing.com 
```

但那些实际上并没有重定向到相应的网址，如

```
http://www.yahoo.com
http://www.google.com
http://www.bing.com 
```

在这种情况下，如何将 href 链接重定向到上述网址？任何建议或参考将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:21:19.000

使用 urlencode php 函数

```
redirect.php?encodeurl=<?php echo urlencode($row_urlencoder['url']); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:40:00.473

试试这个。

```
<?php
while($row = mysql_fetch_assoc($urlencoder)){
echo '<a href="http://yoursite.com/redirect.php?encodeurl='.$row_urlencoder['url'].'" target="_blank">'.$row_urlencoder['url_href'].'</a>';
} ?> 
```

在你的 redirect.php

```
<?php 

sleep(20);

header('Location:'.$_GET['encodeurl'].'');

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:44:33.577

`rawurlencode( )`会帮助你。

需要转义编码的字符是控制、空格和保留字符：

`; / ? : @ & = + $ ,`

分隔符也必须编码：

```
< > # % " 
```

以下字符可能会导致网关和网络代理出现问题，也应进行编码：

```
{} | \ ^ [ ] ` 
```

PHP 提供了`rawurlencode( )`保护它们的功能。例如，`rawurlencode( )`可以构建`href`一个嵌入链接的属性：

```
echo '<a href="search.php?q=' .
      rawurlencode("100% + more") .
      '">'; 
```

结果是具有`<a>`正确编码的嵌入式 URL 的元素：

```
<a href="search.php?q=100%25%20%2B%20more"> 
```

PHP 还提供了与`urlencode( )`函数不同的`rawurlencode( )`函数，前者将空格编码为 + 符号，而后者将空格编码`encodes`为`%20`. 使用 + 字符对空格进行编码是一种早期的 HTTP 对空格进行编码的方法。

# php - 特定英国邮政编码区号所需的 preg_match 正则表达式

> ID：14935013
> 
> 赞同：2
> 
> 时间：2013-02-18T11:16:09.843
> 
> 标签：php, regex, preg-match

我的正则表达式知识不是最好的，虽然我一直在查看帖子以了解它，但我无法找到我正在寻找的东西。

我想使用以下内容（其中 $postcode 是用户输入的完整邮政编码）：

```
if(preg_match("AREA CODE REGEX GOES HERE", $postcode))
{
    //Do something   
} 
```

执行以下操作：

检查输入的邮政编码区号与以下 DN15,16,17,18,19,20,21,22,31,32,33,34,35,36,37,38,39,40,41 之一（所有DN）。

所以我正在寻找只匹配那些邮政编码的正则表达式。例如，它可以是 DN21 1AB 或 DN21 2AB，但它必须与 DN21 的第一部分仍然匹配。

我希望这是足够的信息，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T11:18:47.090

试试这个由英国政府自己提供的正则表达式模式：

```
(GIR 0AA)|((([A-Z-[QVX]][0-9][0-9]?)|(([A-Z-[QVX]][A-Z-[IJZ]][0-9][0-9]?)|(([A-Z-[QVX]][0-9][A-HJKSTUW])|([A-Z-[QVX]][A-Z-[IJZ]][0-9][ABEHMNPRVWXY])))) [0-9][A-Z-[CIKMOV]]{2}) 
```

因此，要将其应用于您的情况，您可以首先检查您是否处理的是有效的英国邮政编码，然后检查第一部分是否以“DN”开头，第二部分是否是接受范围内的任何一个 -数字数组：

```
$accepted_numbers = array_merge(range(15, 22), range(31, 41));

if (preg_match('#^(GIR ?0AA|[A-PR-UWYZ]([0-9]{1,2}|([A-HK-Y][0-9]([0-9ABEHMNPRV-Y])?)|[0-9][A-HJKPS-UW]) ?[0-9][ABD-HJLNP-UW-Z]{2})$#', $postcode) && substr($postcode, 0, 2) == 'DN' && in_array(substr($postcode, 2, 2), $accepted_numbers)) {
       // The UK post code is valid according to your criteria
} 
```

资料来源： http://webarchive.nationalarchives.gov.uk/+/http: [//www.cabinetoffice.gov.uk/media/254290/GDS%20Catalogue%20Vol%202.pdf](http://webarchive.nationalarchives.gov.uk/+/http://www.cabinetoffice.gov.uk/media/254290/GDS%20Catalogue%20Vol%202.pdf)（第 11 页）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:29:35.287

如果您只想匹配 DN15-DN41，因为我认为这就是“仅匹配那些邮政编码”的意思，您可以使用：

```
if(preg_match("/^DN(1[5-9]|[23][0-9]|4[01])/", $postcode))
{
    //Do something   
} 
```

# java - 如何在 Heroku 上使用 Mysql DB 部署 Spring MVC

> ID：14935014
> 
> 赞同：0
> 
> 时间：2013-02-18T11:16:12.640
> 
> 标签：java, mysql, hibernate, spring-mvc, heroku

任何人都可以帮助将托管在 bitbucket 或 githup 上的 web 应用程序部署到 heroku 基于 Spring MVC、Hibernate 的项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:52:44.597

Heroku 不直接支持 MySQL，您可以将 MySQL 数据库转换为 PostgreSQL 数据库

[https://devcenter.heroku.com/articles/heroku-mysql](https://devcenter.heroku.com/articles/heroku-mysql)

或将其托管在不同的提供商上。

Heroku 为此提供了 cleardb 插件：

[https://devcenter.heroku.com/articles/cleardb](https://devcenter.heroku.com/articles/cleardb)

或者您可以使用亚马逊 RDS 之类的服务：

[http://aws.amazon.com/rds/](http://aws.amazon.com/rds/)

我发现即使使用 ruby​​ 插件将数据转换为 PostgreSQL，他们认为这完全是一件麻烦事，除非您需要保存一堆已有的数据，否则不推荐使用它。（我已经计划切换到 PostgreSQL，所以这对我来说不是什么大不了的事）如果您没有要保存的数据并且愿意进行切换，它仍然不是超级容易，但它会更直接一些向前，因为您使用的是 Hibernate。

如果您的项目是使用 Maven 构建的，您只需从 bit bucket 中提取代码，然后将其推送到 Heroku，请记住添加 Heroku 使用的“Proc”文件，以便在时机成熟时告诉它应该执行什么。此处描述了此过程：

[https://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git)

如果你不使用 maven，你可以直接推送一个 war 文件：

[https://devcenter.heroku.com/articles/war-deployment](https://devcenter.heroku.com/articles/war-deployment)

至于 Spring，只要你在你的 maven POM 或 War 中包含所有相关的包，你应该没问题，它不应该有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T15:44:34.003

**我找到**了你可以通过在外部主机上托管你的数据库并部署 EAR 来执行它。Heroku 上的 WAR 但在部署您的 Ear 之前，请确保 DB 处于活动状态。

# java - 将结果集从 SQL 数组转换为字符串数组

> ID：14935016
> 
> 赞同：36
> 
> 时间：2013-02-18T11:16:26.327
> 
> 标签：java, arrays, postgresql, jdbc, resultset

我正在查询`information_schema.columns`我的 PostgreSQL 数据库中的表。使用表名，结果集会查找所有列名、类型以及是否可以为空（主键“id”除外）。这是正在使用的查询：

```
SELECT column_name, is_nullable,data_type FROM information_schema.columns
WHERE lower(table_name) = lower('TABLE1') AND column_name != 'id'
ORDER BY ordinal_position; 
```

对于每个结果，我都有一个字符串数组，我正在尝试使用 ResultSet 方法[`getArray(String columnLabel)`](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getArray-java.lang.String-)来避免循环遍历结果。我想将返回的数组存储在字符串数组中，但出现类型不匹配错误

```
Type mismatch: cannot convert from Array to String[] 
```

有没有办法将 SQL Array 对象转换或类型转换为 String[]？

相关代码：

```
String[] columnName, type, nullable;

//Get Field Names, Type, & Nullability 
String query = "SELECT column_name, is_nullable,data_type FROM information_schema.columns "
        + "WHERE lower(table_name) = lower('"+tableName+"') AND column_name != 'id' "
        + "ORDER BY ordinal_position";

try{
    ResultSet rs = Query.executeQueryWithRS(c, query);
    columnName = rs.getArray(rs.getArray("column_name"));
    type = rs.getArray("data_type");
    nullable = rs.getArray("is_nullable");
}catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-18T11:24:48.340

采用：

```
Array a = rs.getArray("is_nullable");
String[] nullable = (String[])a.getArray(); 
```

正如[这里所解释的](http://docs.oracle.com/javase/tutorial/jdbc/basics/array.html)

`Array`是 SQL 类型，`getArray()`返回一个要转换为 java 数组的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T11:22:57.357

将数组泛化为对象

```
 Object[] type; //this is generic can use String[] directly
    Array rsArray;

    rsArray = rs.getArray("data_type");
    type = (Object [])rsArray.getArray(); 
```

使用它循环作为字符串：

```
type[i].toString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-12T19:28:47.963

如何从 SQL 数组中设置 ArrayList 属性：

```
Array a = rs.getArray("col"); // smallint[] column
if (a != null) {
    yourObject.setListProperty(Arrays.asList((Integer[]) a.getArray()));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-11T14:49:29.940

**这可能会有所帮助**

```
Object[] balance = (Object[]) ((Array) attributes[29]).getArray();
        for (Object bal : balance) {

            Object [] balObj =(Object[]) ((Array) bal).getArray();
            for(Object obj : balObj){
                Struct s= (Struct)obj;
                if(s != null ){
                    String [] str = (String[]) s.getAttributes();
                    System.out.println(str);
                }

            }

        } 
```

# asp.net - 当有大量变量要存储时，使用 Viewstate 是否可以？

> ID：14935017
> 
> 赞同：0
> 
> 时间：2013-02-18T11:16:28.450
> 
> 标签：asp.net, viewstate, session-state

我知道 SessionState 和 ViewState 之间的区别：

1.  SessionState 在整个会话中持续存在，而 ViewState 是针对同一页面的。
2.  SesssionState 保留在服务器中，但 VewState 在客户端和服务器之间传输

现在考虑到上述情况，如果我有很多变量（这意味着很多带宽）需要通过回发保持，我应该选择哪一个？我卡在中间是因为：

1.  我知道我只会在一个页面中使用这些变量，而 ViewState 适合这种情况
2.  另一方面，由于变量很多，它似乎会占用很多带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:18:28.267

变量通常不会占用太多空间，`kbs`甚至更少，将数据不必要地放在会话中可能会降低服务器的性能，因为客户端数量增加了服务器机器上的负载*成倍增加*。另一方面，视图状态不会在服务器上保留空间，并且可以为其他有用的操作节省内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:26:03.407

除非您说的是几千个变量，否则没有什么可担心的。
大多数 asp.net 控件在 ViewState 中存储了大量的状态变量。

将变量放入 ViewState 后，您可以轻松地使用页面性能工具查看页面大小的增加。在大多数情况下，这不是什么值得担心的事情。

# c# - 如何从数据库货币字段c#中控制四个十进制值到两个

> ID：14935033
> 
> 赞同：1
> 
> 时间：2013-02-18T11:17:35.110
> 
> 标签：c#, datagridview, decimal

![在此处输入图像描述](../Images/fcd87e02487d64b70a63d45a8d82e059.png)我想将数据源附加到数据库中的dataGridvIew，该数据库具有货币字段![在此处输入图像描述](../Images/2e1a3a8ad658a46b666afaa05d1fe06e.png)

此处`nrdc_ItemPrice`和`nrdc_Lntotl`字段附加到 datagridview，如第一张图片所示

我怎样才能将它们控制到 .00 值。这是我的代码

```
dsEstmDtls = salesDCCls.ordrAckDataSet(estmID);
dtDCDtls = dsEstmDtls.Tables[1];
dgvDcNon.DataSource = dtDCDtls; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:21:17.490

更改`DataGridView`列格式：

```
dgvDcNon.Columns["ColumnName"].DefaultCellStyle.Format = "N2"; 
```

你也可以从设计师那里做到这一点。来自网络的示例：

![在此处输入图像描述](../Images/9afa5a6d0ad2ad5e9c541e4af89461b1.png)

# javascript - 图像 不能在 IE 中工作

> ID：14935035
> 
> 赞同：1
> 
> 时间：2013-02-18T11:17:44.407
> 
> 标签：javascript, jquery, internet-explorer

我的要求是在里面添加图片`<option>`。我使用下面的代码在 FF 中显示图像。

[脚本]

```
 var items = $("#ShipCountry option").children();    //dropdown options     

        for (i = 0; i < items.length; i++) {
            $(items[i]).html("<img src='/Images/" + $(items[i]).html() + ".gif'></img>"); // adding image

        } 
```

此代码适用于 FF，但不适用于其他浏览器。我不想使用 CSS 来实现这个逻辑，因为我需要显示大量图像（选项）。

对于所有浏览器，如果没有 CSS，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:53:05.163

无法跨浏览器进行这项工作，因为许多浏览器限制了您可以对`<option>`标签执行的操作。老实说，我很惊讶它在 Firefox 中有效。您可能想查看[Select2](http://ivaynberg.github.com/select2/)，它使这成为可能的跨浏览器，并且有很好的文档。

# javascript - Javascript/Canvas 预加载动画的数学和缓动

> ID：14935038
> 
> 赞同：2
> 
> 时间：2013-02-18T11:17:50.147
> 
> 标签：javascript, animation, canvas, easing

我正在构建一个图像预加载动画，这是一个绘制的圆圈/饼图。每个“切片”都是 totalImages / imagesLoaded。因此，如果有 4 张图像和 2 张已加载，它应该随着时间的推移绘制到 180。

我正在使用 requestAnimFrame，它工作得很好，而且我有一个 deltaTime 设置来限制动画的时间，但是我在数学上遇到了麻烦。我能得到的最接近的是它动画并缓和到它应该在的位置附近，但随后值增量变得越来越小。本质上它永远不会达到完成的价值。（例如，如果加载了一张图像，则为 90 度）。

```
var totalImages = 4;
var imagesLoaded = 1;
var currentArc = 0;

function drawPie(){
  var newArc = 360 / totalImages * this.imagesLoaded // Get the value in degrees that we should animate to
  var percentage = (isNaN(currentArc / newArc) || !isFinite(currentArc / newArc)) || (currentArc / newArc) > 1 ? 1 : (currentArc / newArc); // Dividing these two numbers sometimes returned NaN or Infinity/-Infinity, so this is a fallback
  var easeValue = easeInOutExpo(percentage, 0, newArc, 1);

  //This animates continuously (Obviously), because it's just constantly adding to itself:
  currentArc += easedValue * this.time.delta;

  OR

  //This never reaches the full amount, as increments get infinitely smaller
  currentArc += (newArc - easedValue) * this.time.delta;
}

function easeInOutExpo(t, b, c, d){
  return c*((t=t/d-1)*t*t + 1) + b;
} 
```

我觉得我拥有所有正确的元素和价值观。我只是将它们错误地放在一起。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:00:00.893

你有放松的想法。现实情况是，在某些时候你会限制价值。
如果你想学一点，你可以复习一下[芝诺的悖论](https://www.youtube.com/watch?v=u7Z9UnWOJNY)（这里合适的是阿喀琉斯和乌龟）——它真的很短……二分法悖论是同一枚硬币的另一面。

基本上，无论“这里”或“那里”可能在哪里，你都只是走到了一半，因此你永远无法迈出“最后”一步。
在处理分数时，例如使用缓动，这是非常正确的。你*总是*可以变小。

所以解决办法就是夹住它。设置您可以在更新中移动的最小量（2px 或 1px，或 0.5px... 或随意播放）。

另一种选择（最终相似，但可能有点跳跃）是设置阈值距离。说“一旦它在 home 4px 以内，就捕捉到最后”，或者切换到线性模型，而不是继续缓动。

# jquery - cakephp：jquery 在弹出 div 中打开地图

> ID：14935055
> 
> 赞同：1
> 
> 时间：2013-02-18T11:18:48.480
> 
> 标签：jquery, cakephp, popup

我在 cakephp n jquery 工作。我在 cakephp 中有一张图片，点击该图片我希望使用 jquery 在 div 弹出窗口中打开谷歌地图。我成功地在同一页面上的 div 中打开了地图，但我希望它在弹出窗口中。我怎么做？下面是我的代码：

//图片点击

```
<div class="for-route-img">
                                    <img class="fromid" id="fromId" src="/prjPool/images/route.png" />
                                </div> 
```

//地图加载到mapCanvas div中：

```
<div id="markerStatus"></i></div>
<b>Current position:</b>
<div id="info"></div>
<b>Closest matching address:</b>
<div id="address"></div> 
```

jquery 上的图片点击：

```
 $('#fromId').click(function(){
    var txtFrom = $("#RideofferPlace").val();

            $.ajax({ 
   url: "test",
   type: "POST",
   data:  txtFrom,
   success: function(data) {
 $("#RideofferPlace").val("");

     initialize(); // this function loads the map

},
error: function (request, status, error) {

    }
        }

    );

}); 
```

如何使用 jquery 在弹出窗口中显示 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:20:01.647

解决了！[我使用了来自http://dinbror.dk/bpopup/](http://dinbror.dk/bpopup/)的bPopup 我在 default.ctp n 中添加了 js n css，称为：

```
$('#mapCanvas').bPopup(); 
```

在jquery中查看。

# jquery - 固定表头不会浮动在页面顶部的固定菜单下

> ID：14935062
> 
> 赞同：0
> 
> 时间：2013-02-18T11:19:28.953
> 
> 标签：jquery, html

我正在寻找一些东西（可能是 jQuery 插件），它可以在滚动页面时使我的表头固定，并且**不会将其浮动在固定位置的菜单下**，而是将其停在菜单的底部。

此外，我不想指定表格（或其容器）的确切尺寸，强制表格显示滚动条。

这些我的请求无法满足我尝试过的任何插件。

* * *

**编辑：**

这是我的意思的一个小例子[http://jsfiddle.net/GLCdK/](http://jsfiddle.net/GLCdK/)

# android - 滚动 ListView 将 TextView 颜色更改回原始颜色

> ID：14935068
> 
> 赞同：1
> 
> 时间：2013-02-18T11:19:54.043
> 
> 标签：android, listview, colors, textview

基本上，我的问题与此类似：

[滚动 ListView 将所有内容从白色更改为黑色](https://stackoverflow.com/questions/3011945/scrolling-a-listview-changes-everything-from-white-to-black)

唯一的区别是我正在处理一个在滚动时改变颜色的 TextView（TextView 在 ListView 内）。

我查找了 TextView 是否有类似于 setCacheColorHint(Color.WHITE) 的方法 - 我没有找到。

也许我应该动态设置默认的TextColor？因为目前，它是在 XML 中设置的，然后在代码中进行了更改。

我该如何处理？

将颜色更改为蓝色的代码：

```
private void highlightSelectedFile(View vw)
{
    TextView fileName = (TextView) vw.findViewById(R.id.file_name);

    //Log.v("color: ", Integer.toString(fileName.getCurrentTextColor()));       

    if(fileName.getCurrentTextColor() == Color.BLACK) {
        fileName.setTextColor(Color.BLUE);

    } else {
        fileName.setTextColor(Color.BLACK);
        removeFromSelectedFiles(new File(fileName.getText().toString()));
    }
} 
```

在我滚动它们所在的 ListView 后，这些 TextView 会变回黑色：

```
 ListView lv = (ListView) ac.findViewById(android.R.id.list); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:36:34.147

在您的适配器中，您可能正在使用将数据应用于您的视图的数据项`Adapter`。当您滚动时，您`View`的 s 将被回收，并`getView()`使用不同的`View`对象调用您的。您的问题很容易解决。只需`int color;`在您的数据项中再添加一个变量并像这样使用它。

```
public View getView(int position, View convertView, ViewGroup parent) {
    // efficient stuff here

    // after applying your data
    fileName.setTextColor(data.color);
} 
```

也改变这个方法：

```
private void highlightSelectedFile(DataItem data) { 
    if(data.color == Color.BLACK) {
        data.color = Color.BLUE; 
    } else {
        data.color = Color.BLACK;
        removeFromSelectedFiles(new File(fileName.getText().toString()));
    }
   // to update ListView
    myAdapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:06:41.073

仅将此语句放在 XML 文件的列表中。android:scrollingCache="false" 它会解决你的问题。

# google-maps-api-3 - Google Geocoding API, HTTP, CSV-data in API v3

> ID：14935072
> 
> 赞同：5
> 
> 时间：2013-02-18T11:20:17.347
> 
> 标签：google-maps-api-3, google-maps-api-2

I'm developing embedded software for a gps-tracker. Until this time I used Google Maps v2 for reverse geocoding (to convert GPS-coordinates to address string). I used http-request and a short-response-form (csv) ([http://maps.googleapis.com/maps/geo?q=](http://maps.googleapis.com/maps/geo?q=)&output=csv&...). Now, when the support of API v2 is almost over, I try to migrate to v3, but I can't find a csv response-format in http-request settings. The response-size is a critical parameter for the device. How do I solve this problem? Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:32:04.283

According to the documentation you're stuck with JSON or XML.

```
A Geocoding API request must be of the following form:

http://maps.googleapis.com/maps/api/geocode/output?parameters
where output may be either of the following values: 
```

*   **json** (recommended) indicates output in JavaScript Object Notation (JSON)
*   **xml** indicates output as XML

**Example:** the query should look like this:

> [http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=Your+address+here](http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=Your+address+here)

or

> [http://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=Your+address+here](http://maps.googleapis.com/maps/api/geocode/xml?sensor=false&address=Your+address+here)

where **required** parameter `sensor` indicates you are calling from a location sensor enabled device or not.

# powershell - 用于将文件和文件夹（包括子文件夹）从一个位置移动到另一个位置超过 x 天的 PowerShell 脚本

> ID：14935076
> 
> 赞同：17
> 
> 时间：2013-02-18T11:20:37.300
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-1.0

我开发了一个 PowerShell 脚本，它工作得非常好。唯一的挑战是子文件夹中的文件没有移动到目的地。

```
get-childitem -Path "\\servername\location" |
    where-object {$_.LastWriteTime -lt (get-date).AddDays(-31)} |
    move-item -destination "C:\Dumps" 
```

我无法进一步自定义脚本。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T11:31:15.957

不要浪费时间尝试`robocopy`在 PowerShell 中重新发明。

```
robocopy \\servername\location C:\Dumps /e /mov /minage:31 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-18T11:30:14.990

使用命令`-Recurse`上的选项`Get-ChildItem`来访问子文件夹中的文件，然后通过管道将每个文件单独移动到`Move-Item`

```
Get-ChildItem -Path "C:\Test" -Recurse |
  Where-Object {$_.LastWriteTime -lt (Get-date).AddDays(-31)} |
  Move-Item -destination "C:\Dumps" 
```

这是一个屏幕截图：

[![截屏](../Images/c4434adc3bca87f572f88f139336ed74.png)](https://i.stack.imgur.com/dTS2m.jpg)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-19T03:11:01.697

上述简化
`robocopy A:\ B:\ /MIR /minage:31`
其中 A:\ 是您的来源 B:\ 是您的目的地

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T15:33:43.493

我需要一个快速的班轮将所有数据从一个驱动器转移到另一个驱动器上。这对我来说非常有效：

Get-ChildItem "E:" -Recurse | 移动项目-目的地“G：”

# android - 是否有任何保留的片段标签名称或格式？

> ID：14935079
> 
> 赞同：0
> 
> 时间：2013-02-18T11:20:43.853
> 
> 标签：android, android-fragments

我正在使用片段兼容性支持库并添加如下片段：

```
getSupportFragmentManager().beginTransaction()
        .replace(R.id.content, frag, fragmentTag)
        .commit(); 
```

where`fragmentName`用于标识片段，尤其是在像这样获取 Fragment 时：

```
getSupportFragmentManager().findFragmentByTag(fragmentTag); 
```

我的问题是，对可以是什么有任何限制`fragmentTag`，或者它必须是一个字符串吗？具体来说，使用 url 作为标签是否安全？

在回答这个问题时，最好有权威的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:11:52.423

我怀疑您使用的有任何限制`Strings`，因为`fragmentTag`它只是您的`Fragment`. 如何识别完全取决于您`Fragments`，您应该选择最适合您的应用程序需求的选项。将 URL 用作`Fragment`标识符 - 这很好，但我不建议使用这种方法来将这些标识符重用于其他目的。如果您需要 a 的唯一 URL `Fragment`，您可能希望在`Fragment`扩展类中创建一个专用字段以将其与您`Fragment`的`fragmentTag`标识符区分开来。希望这可以帮助。

# windows-phone-8 - WP8 公司中心和 AddPackageAsync()

> ID：14935086
> 
> 赞同：0
> 
> 时间：2013-02-18T11:21:12.800
> 
> 标签：windows-phone-8

我正在 WP8 模拟器上开发和测试公司中心，并使用 InstallationManager.AddPackageAsync() 来安装中心应用程序下载的包。目前，我正在测试的各种安装都无法安装并出现一般错误。我知道软件包已正确下载，因为我可以将它们从设备上拉下来，然后使用 xapdeploy 将它们成功部署到模拟器。

您正在安装的软件包是否需要签名并在模拟器上安装应用程序注册令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:16:38.257

您是否已成功将您的模拟器注册到您的 MDM 服务器。公司中心仅适用于已注册的设备

编辑：AFAIK 还需要使用您的证书对 XAP 包进行签名。

# java - 如何在从 servlet 过滤器执行 HTTP 重定向时保留请求正文

> ID：14935090
> 
> 赞同：1
> 
> 时间：2013-02-18T11:21:25.207
> 
> 标签：java, http-post, servlet-filters

我有一个 Java Web 应用程序部署在 2 台主机上，前面有一个 servlet 过滤器。我向一台主机上的应用程序发送了一个 POST 请求，该请求被过滤器拦截并重定向到另一台主机：

```
public void doFilter (ServletRequest request, ServletResponse response,
       FilterChain filterChain)
{
    ...
    if(shouldRedirect) {
        httpResponse.sendRedirect(redirectLocation);
    }
} 
```

在第二台机器上，请求通过过滤器并由资源类中的 REST API 处理。

```
@POST
public Response handleRequest(InputStream stream)
{
    ...
} 
```

该`stream`对象作为 POST 请求正文的一部分发送。重定向后，请求体没有发送过来，`stream`为空。重定向后如何保留请求正文（或至少是其中的这一部分）？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T06:39:29.673

我发现另一种可行的方法是 307（临时重定向）。这保留了原始请求的主体，因此在这种情况下有效。307 重定向有一些安全隐患，详见[此处](http://www.alanflavell.org.uk/www/post-redirect.html)，但是没有让原始主机充当阻塞 HTTP 请求的代理的好处。

```
public void doFilter(...)
{
    ...
    httpResponse.setStatus(TEMPORARY_REDIRECT);
    httpResponse.setHeader("Location", redirectLocation);
    return;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:28:23.130

`sendRedirect()`重新访问用户的浏览器并从浏览器访问重定向的 url。

话虽如此，POST 数据仅在`first request`已收到的初始主机上可用。即在这种情况下过滤。

你可以做什么 ：

修改您的重定向网址以包含 POST 数据作为`Request Parameters in GET url`

例如`host2\servlet?param=one&param2=two`

阅读有关[URL 重定向的更多信息](http://en.wikipedia.org/wiki/URL_redirection)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T11:28:27.110

我会改为向 redirectLocation 发布帖子。sendRedirect 告诉客户端更改其位置，以便您在该点开始一个新的 HTTP 请求。

当您执行重定向时，您可以让客户端向新 URL 发起原始 POST 请求。

# php - 包括自定义类

> ID：14935092
> 
> 赞同：0
> 
> 时间：2013-02-18T11:21:26.303
> 
> 标签：php, symfony

我刚刚安装了 Symfony 2，我正在考虑将我自己的类包含到我的项目中，但是在获得我想要的结果时遇到了麻烦。

我希望控制器能够调用“MyClass.php”并从中运行函数而无需使用包含。经过一番搜索，似乎需要将类放置在特定文件夹中，以便它们自动拾取并由“应用程序”使用。我目前认为它是项目包根目录中的“lib”文件夹。

目前我的项目位于 src/Bundle/ProjectBundle 中。

我已尝试将测试类存储在 ProjectBundle/lib 内的 Test.php 中，并尝试将其命名为“Test.php”和 Test.class.php，但我的控制器仍然无法找到该文件/类。

我在哪里放置我的类文件？

我应该如何命名我的类文件？（除了标准命名约定）

我是不是完全找错树了？

**编辑：**要调用的类。

```
<?php
class Test
{
    public function callMe()
    {
        return "FUNCTION 1 SUCCESSFULLY CALLED";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:30:49.797

您可以执行以下操作。将类放在项目的子目录中，并在控制器中用于`use`注册命名空间，如下所示：

```
// the last part is the class name you want to include
use Vendor\BundleNameBundle\Utility\Factory; 
```

该类将位于：`src/Vendor/BundleNameBundle/Utility/Factory.php`.

# udp - 使用 udpsink 通过 gstreamer ( c++ ) 流式传输 h264

> ID：14935093
> 
> 赞同：0
> 
> 时间：2013-02-18T11:21:31.437
> 
> 标签：udp, streaming, h.264, gstreamer

我正在尝试通过 UDP 使用 gstreamer（在 windows 中）通过网络流式传输 h264 视频。首先，如果我使用这样的管道，一切似乎都很好，我看到了测试模式：

videotestsrc, ffmpegcolorspace, x264enc, rtph264pay, rtph264depay, ffdec_h264, ffmpegcolorspace, autovideosink

现在我决定将此管道分为客户端和服务器部分，使用 udpsink 和 udpsrc 通过 udp 传输流。

```
Server: videotestsrc, ffmpegcolorspace, x264enc, rtph264pay, udpsink
Client: udpsrc, rtph264depay, ffdec_h264, ffmpegcolorspace, autovideosink 
```

在服务器上，我使用类似的东西：

```
source = gst_element_factory_make ("videotestsrc", "source");
ffmpegcolortoYUV = gst_element_factory_make ("ffmpegcolorspace", "ffmpegcolortoYUV");
encoder = gst_element_factory_make ("x264enc", "encoder");
rtppay = gst_element_factory_make ("rtph264pay", "rtppay");
udpsink = gst_element_factory_make ("udpsink", "sink");

g_object_set (source, "pattern", 0, NULL);
g_object_set( udpsink, "host", "127.0.0.1", NULL );
g_object_set( udpsink, "port", 5555, NULL ); 
```

然后我将元素添加到管道并运行，任何地方都没有错误。现在，如果我查找 UDP 端口 5555，它没有在监听！！！！

客户端部分也可以运行，但如果服务器端没有侦听 UDP 端口，它将无法工作。

编辑：事实上我非常接近解决方案......如果我启动客户端它可以工作，但是在可视化方面存在一些问题......我认为问题在于 x264enc 配置。任何人都知道如何更改 x264enc 参数，如速度预设或调整？？？我试图实例化 GstX264EncPreset 或 GstX264EncTune 但我没有这些结构的声明。任何人都知道以其他方式设置 x264enc 的任何方法，例如解析字符串或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-15T20:45:21.863

我知道这是一篇较旧的帖子，但您可以使用与预设值相对应的简单整数来设置 GstX264EncPreset 值。

`g_object_set(encoder, "speed-preset", 2, NULL);`为我工作。可以使用`gst-inspect-1.0 x264enc`和 找到这些值，如下所示：

```
 speed-preset        : Preset name for speed/quality tradeoff options (can affect decode compatibility - impose restrictions separately for your target decoder)
                        flags: readable, writable
                        Enum "GstX264EncPreset" Default: 6, "medium"
                           (0): None             - No preset
                           (1): ultrafast        - ultrafast
                           (2): superfast        - superfast
                           (3): veryfast         - veryfast
                           (4): faster           - faster
                           (5): fast             - fast
                           (6): medium           - medium
                           (7): slow             - slow
                           (8): slower           - slower
                           (9): veryslow         - veryslow
                           (10): placebo          - placebo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T18:35:11.407

尝试将 udpsrc 元素的上限设置为“application/x-rtp”。

# iphone - 所有视图控制器的通用 UIAcitivityIndi cator

> ID：14935096
> 
> 赞同：1
> 
> 时间：2013-02-18T11:21:53.847
> 
> 标签：iphone, objective-c, xcode, uiactivityindicatorview

我的应用程序中有多个视图控制器。

从服务器下载数据时，我可以启动一个`UIActivityIndicatorView`.

但问题是对于三个不同的视图控制器，我需要创建三个不同的`UIActivityIndicatorView`.

我只想`UIActivityIndicatorView`在某个地方初始化一次，以便显示或隐藏它。无需创建或初始化`UIActivityIndicatorView`与视图控制器一样多的视图控制器。

我怎样才能做到这一点？任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:29:43.680

像这样在 appdelgate 中的窗口上添加加载指示器

首先初始化你的加载视图

```
-(void)InitializeLoadingIndictor
 {
   loadingView = [[UIImageView alloc]initWithFrame:CGRectMake(300, 400, 150, 150)];
   [loadingView setBackgroundColor:[UIColor blackColor]];
   [loadingView setAlpha:0.6];
    [loadingView setHidden:YES];
   [loadingView.layer setCornerRadius:10];
    [_window addSubview:loadingView];
   loadingIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
   [loadingIndicator setFrame:CGRectMake(50, 50, 50, 50)];

  [loadingView addSubview:loadingIndicator];
} 
```

然后创建两个方法两个隐藏和显示它

```
+ (void)showLoading
 {
  [loadingView setHidden:NO];
  [loadingIndicator startAnimating];
 } 
```

把它藏起来

```
+ (void)hideLoading
 {
  [loadingView setHidden:YES];
 } 
```

然后在您的视图控制器中，将其称为

```
 [AppDelegate showLoading]; 
```

完成后隐藏它

```
 [AppDelegate hideLoading]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:01:40.760

谢谢你们的答案。下面的代码对我有用。

AppDelegate.m

```
-(void)StartLoading
{
    loader = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    loader.frame = CGRectMake(50, 14, 20, 20);
    [loader startAnimating];
    [self.window addSubview:loader];
    [self.window bringSubviewToFront:loader];
}

-(void)EndLoading
{
    for(UIView *subview in [self.window subviews])
    {
       if(subview==loader)
         [subview removeFromSuperview];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:35:06.403

您可以使用自定义 UIAlertView 来显示您的指标。我制作了两个自定义文件，您可以使用它们来显示指标，而无需一次又一次地对其进行初始化。

文件是：//头文件..

```
#import <UIKit/UIKit.h>

@interface ProgressIndicator : UIAlertView
{
    UIActivityIndicatorView *activityIndicator;
}

@end 
```

//实现文件

```
#import "ProgressIndicator.h"

@implementation ProgressIndicator

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        activityIndicator=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    [self addSubview:activityIndicator];
    [activityIndicator startAnimating];
    // Drawing code
}

@end 
```

//在你的控制器中使用这个文件..

```
#import "ProgressIndicator.h"

ProgressIndicator *progressIndicator=[[ProgressIndicator alloc] initWithTitle:@"Loading" message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
[progressIndicator show]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:29:34.240

请参考此[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)链接。您将获得所有视图的自定义活动指示器。

# r - 如何在 R 中循环数据矩阵？

> ID：14935097
> 
> 赞同：0
> 
> 时间：2013-02-18T11:22:01.807
> 
> 标签：r, loops, matrix, dataframe

我正在尝试为每个单独的 ID 标签“1”、“2”和“3”循环一个数据矩阵（请参阅底部的数据）。最终，我这样做是为了使用 ts() 函数将 X 和 Y 坐标转换为时间序列，但首先我需要在函数中构建一个循环，为每个单独的 ID 返回一个时间序列。当我对数据框使用以下代码时，循环本身工作得很好：

`for(i in 1:3){ print(na.omit(xyframe[ID==i,])) }`

返回以下输出：

```
 Timestamp X Y ID  
 1\. 0 -34.012 3.406 1  
 2\. 100 -33.995 3.415 1  
 3\. 200 -33.994 3.427 1

 Timestamp       X     Y ID  
 4\.          0 -34.093 3.476 2  
 5\.        100 -34.145 3.492 2  
 6\.        200 -34.195 3.506 2  

   Timestamp       X     Y ID  
 7\.         0 -34.289 3.522 3  
 8\.       100 -34.300 3.520 3  
 9\.       200 -34.303 3.517 3 
```

然而，当我想用​​相同的代码在矩阵中生成一个循环时：

`for(i in 1:3){ print(na.omit(xymatrix[ID==i,]) }`

它返回以下错误：

```
Error in print(na.omit(xymatrix[ID == i, ]) : 
  (subscript) logical subscript too long 
```

为什么它不能通过矩阵循环ID，而它对数据帧有效，我将如何解决它？此外，我是否读到循环需要更多的计算强度，然后基于向量做同样的事情，有没有办法基于这个向量？

***数据（真实数据的简化）：***

```
 Timestamp X Y ID  
 1\.   0 -34.012 3.406 1  
 2\. 100 -33.995 3.415 1  
 3\. 200 -33.994 3.427 1  
 4\.   0 -34.093 3.476 2  
 5\. 100 -34.145 3.492 2  
 6\. 200 -34.195 3.506 2  
 7\.   0 -34.289 3.522 3  
 8\. 100 -34.300 3.520 3  
 9\. 200 -34.303 3.517 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:45:24.657

该格式`xymatrix[ID==i,]`不适用于矩阵。试试这个方法：

```
for(i in 1:3){ print(na.omit(xymatrix[xymatrix[,'ID'] == i,])) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:51:33.480

通常，如果要将*函数*应用于数据框，并按某些因素*拆分*，那么您应该将`apply`函数族之一与`split`.

这是一些可重现的示例数据。

```
n <- 20  
some_data <- data.frame(
  x = sample(c(1:5, NA), n, replace= TRUE), 
  y = sample(c(letters[1:5], NA), n, replace= TRUE),
  id = gl(3, 1, length = n)
) 
```

如果你想打印出没有缺失值的行，按每个 ID 级别拆分，那么你需要这样的东西。

```
lapply(split(some_data, some_data$grp), na.omit) 
```

或更简洁地使用该`plyr`软件包。

```
library(plyr)
dlply(some_data, .(grp), na.omit) 
```

两种方法都返回这样的输出

```
# $`1`
   # x y grp
# 1  2 d   1
# 4  3 e   1
# 7  3 c   1
# 10 4 a   1
# 13 2 e   1
# 16 3 a   1
# 19 1 d   1

# $`2`
  # x y grp
# 2 1 e   2
# 5 3 e   2
# 8 3 b   2

# $`3`
   # x y grp
# 6  3 c   3
# 9  5 a   3
# 12 2 c   3
# 15 2 d   3
# 18 4 a   3 
```

# c# - 我如何用 RedirectToAction 做 '/controller/action/1#myid' 的等价物？

> ID：14935102
> 
> 赞同：1
> 
> 时间：2013-02-18T11:22:20.250
> 
> 标签：c#, asp.net-mvc, jquery-ui

我有一个 jquery-ui 选项卡式显示来显示一些数据，我想在从我拥有的某些操作返回时链接到其中的特定页面。

我目前有这个

```
return RedirectToAction("Action", "Controller", new { id = model.ID}); 
```

这导致了这个

```
/controller/action/1 
```

实现这一目标的最佳方法是什么？

```
/controller/action/1#mytab 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:01:12.670

这个问题是重复的，但对于首先在这里找到方式的任何人：

```
return Redirect(
            Url.RouteUrl(new 
            { 
                controller = "MyControllerName", 
                action = "MyActionName", 
                id = model.CustomerID 
            }) + "#mytabid"); 
```

# c - 读取函数读取的奇怪 int 值

> ID：14935109
> 
> 赞同：0
> 
> 时间：2013-02-18T11:22:52.933
> 
> 标签：c, matrix, posix

我正在做一个练习，您需要在 32 位小端机器上读取这种二进制文件：

> 30002000100020003000400050006000

这种文件描述了一个带有 int 元素的矩阵。前两个整数（3000 和 2000）描述了矩阵的行和列维度。
我遇到了一些麻烦，所以我开始进行一些调试，我发现

```
c = read(fd, &a, sizeof(int)); 
```

在 a 中写入奇怪的值，不是普通的 int，而是 808464435 之类的东西。我在 64 位机器上编程，Fedora 18，但我看到了

```
printf("%d\n", sizeof(int)); 
```

整数仍然是 4 字节。

这里是完整的代码

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int openFile(const char* path)
{
    int fd;
    fd = open(path, O_RDONLY);
    if(fd == -1)
    {
        perror("error in file opening\n");
        exit(EXIT_FAILURE);
    }
    return fd;
}

int readInt(int fd)
{
    int a,c;
    c = read(fd, &a, sizeof(int));
    if(c == -1)
    {
        perror("error in read\n");
        exit(EXIT_FAILURE);
    }
    return a;
}

void fillMatrix(int fd,int* matrix, int* rows, int* columns)
{
    *rows = readInt(fd);
    *columns = readInt(fd);
    matrix = calloc(((*rows) * (*columns)) + 1, sizeof(int));
    for(int i = 1; i <= (*rows) * (*columns); i++)
    {
        matrix[i] = readInt(fd);
    }
}

int main(int argc, char* argv)
{
    printf("%d\n", sizeof(int));
    exit(EXIT_SUCCESS);

    int fdA;
    int rowsA, columnsA;
    int *matrixA;
    fdA = openFile("/home/caterpillar/workspace/18Luglio2012/src/matrixA.txt");
    fillMatrix(fdA, matrixA, &rowsA, &columnsA);

    for(int i = 1; i <= rowsA * columnsA; i++)
    {
        printf("%d ", matrixA[i]);
    }

    close(fdA);
    return 0;
} 
```

# subquery - Hive 多个子查询

> ID：14935116
> 
> 赞同：6
> 
> 时间：2013-02-18T11:23:03.960
> 
> 标签：subquery, hive

我正在使用 Hive 0.9.0，我正在尝试执行查询，即

```
`SELECT a.id, b.user FROM (SELECT...FROM a_table) a, (SELECT...FROM b_table) b WHERE a.date   = b.date;` 
```

但它返回错误“循环（...）+不匹配输入......”。Hive 是否像 Oracle DB 一样支持 FROM 中的多个子查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T05:04:04.280

hive 中允许多个[子查询。](https://cwiki.apache.org/Hive/languagemanual-subqueries.html)

我用下面的代码进行了测试，它可以工作。

```
 select * from (select id from test where id>10) a 
join (select id from test where id>20) b on a.id=b.id; 
```

请发布您的确切代码，以便我提供相关解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:47:45.003

绝对支持加入子查询。

我认为关键问题是你使用`SELECT...FROM`.

正确的语法是`SELECT * FROM`

```
SELECT a.id, b.user 
FROM 
(SELECT * FROM a_table) a 
JOIN (SELECT * FROM b_table) b ON a.date = b.date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:04:34.710

如果您想在应用 WHERE 子句之前获得完整的笛卡尔积，请改为：

```
SELECT a.id, b.user FROM (SELECT...FROM a_table) a, (SELECT...FROM b_table) b WHERE a.date   = b.date; 
```

你应该在中间使用'join'，即

```
SELECT a.id, b.user FROM (SELECT...FROM a_table) a join (SELECT...FROM b_table) b WHERE a.date   = b.date; 
```

以上在严格模式下是不允许的。

# c# - 在 C# 中捕获异常的问题

> ID：14935119
> 
> 赞同：0
> 
> 时间：2013-02-18T11:23:25.700
> 
> 标签：c#, exception, combobox, buttonclick

我有一个包含两个项目的组合框。I also have a button that opens a new form when one of these items are selected. 但是，如果没有选择任何项目，则会出现异常（空指针）。我已尝试（无济于事）捕获此异常并显示一个提示用户选择其中一项的 mbox。

以下是按钮单击的代码：

```
if (labelGrid.Text == "Member" && cbTable.SelectedItem.ToString().Equals("Workout"))
        {
            string name;
            string ss;
            foreach (DataGridViewRow item in this.dtGrid1.SelectedRows)
            {
                ss = dtGrid1.CurrentCell.Value.ToString();
                name = dtGrid1.SelectedCells[1].Value.ToString();
                BookMemberWorkout bmw = new BookMemberWorkout(ss, name);
                bmw.Label2.Text = ss;
                bmw.Label1.Text = name;
                bmw.ShowDialog();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:26:06.407

在非异常情况下，您不应该使用异常进行流量控制。用户没有选择任何东西的情况当然也不例外。

正确的方法是简单的`null`检查：

```
if(cbTable.SelectedItem == null)
{
    // Show message box
}
else
{
    // Your current code
} 
```

* * *

^(为什么您的异常处理代码不起作用无法回答，因为您没有将它包含在您的问题中。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:26:54.317

我认为问题在于：

```
ss = dtGrid1.CurrentCell.Value.ToString(); 
```

您不能确定该值不为空，因此您应该在调用 .ToString() 之前对其进行检查。

您可以使用 RequiredValidator 来执行 javascript 验证，而不是使用消息框，从而避免无用的回发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:33:10.997

从性能和可读性的角度来看，我建议检查组合框中的选定值，而不是像这样捕获异常

```
if(cbTable.SelectedItem == null)
{
         MessageBox.Show("Please select a value in the combo box.");
         return;
}

if (labelGrid.Text == "Member" && cbTable.SelectedItem.ToString().Equals("Workout"))
        {
            string name;
            string ss;
            foreach (DataGridViewRow item in this.dtGrid1.SelectedRows)
            {
                ss = dtGrid1.CurrentCell.Value.ToString();
                name = dtGrid1.SelectedCells[1].Value.ToString();
                BookMemberWorkout bmw = new BookMemberWorkout(ss, name);
                bmw.Label2.Text = ss;
                bmw.Label1.Text = name;
                bmw.ShowDialog();
            }
        } 
```

但是，要回答您的特定查询，您可以像这样捕获[NullReferenceException](http://msdn.microsoft.com/en-gb/library/system.nullreferenceexception.aspx)：

```
 try{
        if (labelGrid.Text == "Member" && cbTable.SelectedItem.ToString().Equals("Workout"))
        {
            string name;
            string ss;
            foreach (DataGridViewRow item in this.dtGrid1.SelectedRows)
            {
                ss = dtGrid1.CurrentCell.Value.ToString();
                name = dtGrid1.SelectedCells[1].Value.ToString();
                BookMemberWorkout bmw = new BookMemberWorkout(ss, name);
                bmw.Label2.Text = ss;
                bmw.Label1.Text = name;
                bmw.ShowDialog();
            }
        }
    }
    catch(NullReferenceException ex)
    {
         MessageBox.Show("Please select a value in the combo box.");
    } 
```

# wpf - WPF 使用 UIElement 为所有元素设置样式

> ID：14935122
> 
> 赞同：3
> 
> 时间：2013-02-18T11:23:37.123
> 
> 标签：wpf, styling, uielement

这是我想做的事情：

```
<Application.Resources>
    <Style TargetType="{x:Type UIElement}">
        <Setter Property="Opacity"
                Value=".1" />
    </Style>
</Application.Resources> 
```

这样我就可以设置任何类型的样式（不仅仅是一些最终的具体 UI 类型）。我不是在寻找最佳实践，它更像是一个需要思考的问题。

我注意到 WPF 没有为`TargetType`( `UIElement`,`FrameworkElement`等) 中指定的任何超类设置样式。只有当`TargetType`等同于具体的 UI 类 ( `Button`, `Rectangle`) 时，它才会设置样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-26T09:56:53.523

如果您只想定义基本样式，则可以使用 BasedOn 属性。

```
<Style TargetType="FrameworkElement" x:Key="ElementBase">
    <Setter Property="Height" Value="24"/>
</Style>

<Style TargetType="TextBlock" BasedOn="{StaticResource ElementBase}">
</Style> 
```

这是一个多一点的工作，但也许它会有所帮助。

# javascript - 从 nodejs 中的 sqlite3 数据库构建字符串

> ID：14935125
> 
> 赞同：0
> 
> 时间：2013-02-18T11:23:42.270
> 
> 标签：javascript, node.js, sqlite

我想编写一个与 nodejs 一起使用并在 sqlite3 数据库上运行的 JS 脚本。计划是从数据库中获取数据，并使用“脚本”标签。我的片段如下：

```
var sqlite3 = require('sqlite3');
var db = new sqlite3.Database('/var/www/db/js.sqlite');

var MyRandomCode =
{
    code: "<script>"
}

function appendToCode(snippet) {
    MyRandomCode.code += snippet;
}

function printMe() {
    console.log(MyRandomCode.code);
}

function closeCode() {
    MyRandomCode.code += "</script>";
}

printMe();
randomNode("defun", MyRandomCode);
printMe();
closeCode();

function randomNode(name, MyRandomCode) {
    db.get("SELECT tag_value FROM tags WHERE tag_name=\"" + name + "\"", function(err, rows) {
        if (err) throw err;
        appendToCode(rows['tag_value']);
    });
} 
```

数据库只包含一个“测试”功能实现。预期结果是：

```
<script>
function test() {
    a = 5;
    c += a + b;
    "foo";
    var foo = 5;
    const bar = 6, baz = 7;
    switch ("foo") {
      case "foo":
        return 1;
      case "bar":
        return 2;
    }
    for (var i = 0; i < 5; ++i) {
        console.log("Hello " + i);
    }
    for (var i in [ 1, 2, 3 ]) {
        console.log(i);
    }
    for (var i = 0; i < 5; ++i) console.log("foo");
}
</script> 
```

尽管如此，我得到了

```
<script></script>function test() {
    a = 5;
    c += a + b;
    "foo";
    var foo = 5;
    const bar = 6, baz = 7;
    switch ("foo") {
      case "foo":
        return 1;
      case "bar":
        return 2;
    }
    for (var i = 0; i < 5; ++i) {
        console.log("Hello " + i);
    }
    for (var i in [ 1, 2, 3 ]) {
        console.log(i);
    }
    for (var i = 0; i < 5; ++i) console.log("foo");
} 
```

我不明白为什么字符串的顺序会改变。为什么“脚本”标签内没有函数字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:27:39.780

`db.get`是一个异步操作，因此`closeCode`将在 DB 操作完成之前运行。

您应该移动`closeCode`并`printMe`进入异步操作，以便它们在数据库更新工作后运行：

```
function randomNode(name, MyRandomCode) {
    db.get("SELECT tag_value FROM tags WHERE tag_name=\"" + name + "\"", function(err, rows) {
        if (err) throw err;
        appendToCode(rows['tag_value']);
        closeCode();
        printMe();
    });
} 
```

# python - 安装和使用 python-oauth2

> ID：14935126
> 
> 赞同：0
> 
> 时间：2013-02-18T11:23:43.073
> 
> 标签：python, oauth, oauth-2.0

我安装了oauth2：

```
$ pip install oauth2 
```

但是运行 python-oauth2/example/client.py 会返回：

```
Traceback (most recent call last):
  File "client.py", line 31, in <module>
    import oauth.oauth as oauth
ImportError: No module named oauth.oauth 
```

我测试了点冻结：

```
oauth2==1.5.211 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:06:03.597

事实证明，包`example`中的目录`oauth2`应该被忽略。就包而言，它是损坏的代码。

有关其他人发现此问题的示例，请参阅这些问题：

*   [https://github.com/simplegeo/python-oauth2/issues/33](https://github.com/simplegeo/python-oauth2/issues/33)

*   [https://github.com/simplegeo/python-oauth2/issues/12](https://github.com/simplegeo/python-oauth2/issues/12)

*   [https://github.com/simplegeo/python-oauth2/pull/64](https://github.com/simplegeo/python-oauth2/pull/64)

最后一个是拉取请求，其中包含要使用的*新示例。*

# hibernate - @OneToMany 与非主键 Hibernate 的关系

> ID：14935128
> 
> 赞同：0
> 
> 时间：2013-02-18T11:23:44.713
> 
> 标签：hibernate, jakarta-ee, entity-relationship, one-to-many, hibernate-onetomany

我有一个名为 Team 的**@Entity**

```
 @Entity
    @Table(name="projects_participants")
    public class Team {

        @Id`enter code here`
        @GeneratedValue(strategy = GenerationType.AUTO)
        @Column
        private int id;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @Column(name="participants_id")
    private int participants_id;

    public int getParticipants_id() {
        return participants_id;
    }

    public void setParticipants_id(int participants_id) {
        this.participants_id = participants_id;
    }

    /*
    @CollectionOfElements 
    private Set<Projects> projectsParticipant;

    @ManyToMany(fetch = FetchType.LAZY,mappedBy = "team")
    public Set<Projects> getProjectsParticipant() {
        return projectsParticipant;
    }

    public void setProjectsParticipant(Set<Projects> projectsParticipant) {
        this.projectsParticipant = projectsParticipant;
    }
        */
} 
```

我有另一个 bean 名称**项目**喜欢

```
@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
@JoinTable(name = "projects_participants", joinColumns = { 
        @JoinColumn(name = "project_id") }, 
        inverseJoinColumns = { @JoinColumn(name = "participants_id",referencedColumnName="participants_id")})
public Set<Team> getTeam() {
    return team;
}

public void setTeam(Set<Team> team) {
    this.team = team;
} 
```

它工作正常，但问题是 project_participants 表具有团队表的 project_id 和 id。但我想要 Team 表的 project_id 和 Participants_id。 **project_participants 表**如下

![在此处输入图像描述](../Images/ec22c6d0854186eee57e894ac32fee73.png)

**参与者表为 *** ![在此处输入图像描述](../Images/d54a8245770685507d0fb517af6fde66.png)

最后我想要的是表**project_participants**应该有**project_project_id**和**参与者**ID（不是 team_id）。Thanx 提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:52:53.210

在我看来，您正在尝试建模 am:n 关系，但没有使用正确的注释和原则。

1) 使用`@ManyToMany`结合使用`@JoinTable`来对 m:n 关系进行建模，如[jee5 api](http://docs.oracle.com/javaee/5/api/javax/persistence/ManyToMany.html)中所述。

2) 不要像使用`participants_id`. 使用 JPA，您可以使用对象，而不是使用它们的 ID，因此您的列将是`Participant`.

# firebase - 登录后显示文本

> ID：14935130
> 
> 赞同：0
> 
> 时间：2013-02-18T11:23:48.187
> 
> 标签：firebase

我正在使用 Firebase 设计一个数学问题网站，我想在有人登录时显示问题。

我想要的伪代码是，

```
if user logged in
document.write([problem])
else
document.write(Please login to see the problem) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:37:59.253

使用 Firebase 简单登录时，在实例化 FirebaseAuthClient 时，您将定义一个回调函数，该函数在用户登录状态发生变化时被调用。

来自[https://www.firebase.com/docs/security/simple-login-overview.html](https://www.firebase.com/docs/security/simple-login-overview.html)：

```
var chatRef = new Firebase('https://SampleChat.firebaseIO-demo.com');
var authClient = new FirebaseAuthClient(chatRef, function(error, user) {
  if (user) {
    // user authenticated with Firebase
  } else if (error) {
    // an error occurred authenticating the user
  } else {
    // user is logged out
  }
}); 
```

对于您的情况，如果您有用户对象，则可以隐藏任何与登录相关的 UI 并显示问题，否则，隐藏问题并显示任何与登录相关的 UI。

然后，要登录用户，请选择一个或多个 Firebase 简单登录身份验证提供程序，在 Forge 中配置该提供程序（通过 访问`https://<your-firebase>.firebaseio.com`）并尝试通过以下方式对用户进行身份验证：

```
authClient.login(<provider>, <options>); 
```

我希望这会有所帮助！

# php - sql查询在php pdo中不起作用

> ID：14935133
> 
> 赞同：0
> 
> 时间：2013-02-18T11:23:59.190
> 
> 标签：php, mysql, sql, pdo

这将返回结果：

```
$query = $dbh->prepare('SELECT * FROM groups WHERE id LIKE :id ORDER BY id');
$query->bindValue(':id', $this->id.'_'); 
```

这不会：

```
$query = $dbh->prepare('SELECT g.*, d.desc_text FROM groups g LEFT JOIN descriptions d ON d.desc_id=g.id WHERE g.id LIKE :id AND d.desc_type=1 ORDER BY g.id');
$query->bindValue(':id', $this->id.'_'); 
```

然而，如果我在 WebMin 中运行下面的 SQL 查询（“0002_”是上面绑定的值），那么我会得到结果。

```
SELECT g.*, d.desc_text FROM groups g LEFT JOIN descriptions d ON d.desc_id=g.id WHERE g.id LIKE "0002_" AND d.desc_type=1 ORDER BY g.id 
```

那么为什么 PDO 不喜欢我上面第二段代码中的查询呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:31:15.347

好吧，我搞定了：

正如我在最初的问题中所说，下面的代码不会返回结果：

```
$query = $dbh->prepare('SELECT g.*, d.desc_text FROM groups g LEFT JOIN descriptions d ON d.desc_id=g.id WHERE g.id LIKE :id AND d.desc_type=1 ORDER BY g.id');
$query->bindValue(':id', $this->id.'_'); 
```

此代码返回预期结果：

```
$query = $dbh->prepare('SELECT g.*, d.desc_text FROM groups g LEFT JOIN descriptions d ON d.desc_id=g.id AND d.desc_type=1 WHERE g.id LIKE :id ORDER BY g.id');
$query->bindValue(':id', $this->id.'_'); 
```

奇怪的是，当从 Webmin 中运行时，任何一个 SQL 查询都会返回结果，但似乎 PHP PDO 不喜欢将“AND d.desc_type=1”作为 WHERE 子句的一部分，并且需要在 LEFT JOIN ON 子句中使用它.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T11:27:17.297

> 为什么 PDO 不喜欢我上面第二段代码中的查询？

询问 PDO：

```
$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

如果 PDO 没有抛出任何错误 - 它“喜欢”您的查询并且**与问题无关。**检查您的数据、数据库和拼写错误。

作为最终检查省略绑定值部分

```
$stmt = $dbh->prepare('put your query from WEBMIN here');
$stmt->execute();
$res  = $stmt->fetch();
var_dump($res); 
```

如果它停用任何数据 - 如果没有，则责怪 PDO
- 检查您的数据、数据库和拼写错误。

# javascript - 关于在 javascript 中注册命名空间

> ID：14935134
> 
> 赞同：1
> 
> 时间：2013-02-18T11:23:58.743
> 
> 标签：javascript, namespaces, registration

我是 javascript 世界的新手。我正在分析[此处](http://blog.mozilla.org/addons/2009/01/16/firefox-extensions-global-namespace-pollution/)解释的代码，以避免在编写 firefox 扩展时在全局级别造成污染。
当代码

```
1\. // Namespace registration  
2\. this.ns = function(fn) {  
3\. var ns = {};  
4\. namespaces.push(fn, ns);  
5\. return ns;  
6\. }; 
```

正在执行 我不明白： 1）为什么代码在第 3 行
声明**ns = {}**
2）为什么代码在第 5 行**返回 ns**
3）哪个函数正在接收返回的 ns{} 以及该函数将如何使用它
4 ) ns{} 对于每个注册的命名空间总是相同的（？），那么为什么将与 fn 参数一起推送到命名空间数组中，然后在代码执行 fn.apply(ns) 时提供，因为它每次都会不同？
抱歉我的英语很差，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:39:31.300

这不是实现命名空间的最典型方式，但它是一种有趣的方式。我会尽量清楚地回答你的问题：

**1.**因为在数组命名空间中推送的函数需要有自己的上下文，不能污染全局命名空间。您可以声明：

```
extension.ns(function () {
   this.myVar = 5;
}); 
```

每次调用您的匿名函数时，`this`将是`ns`与给定函数对应的对象。这是因为调用函数的方式（使用`apply`）。

**2.**代码返回`ns`是因为您可能需要向上下文对象添加额外的属性或方法。

**3.**在给定的例子中没有。如果您使用：

```
function foo() {
   alert(this.bar);
}

var ns = extension.ns(foo);
ns.bar = 'foobar'; 
```

当`foo`从扩展调用函数时，您应该收到带有文本的警报：“foobar”（`this`在函数体中将是`ns`对象）。

**4.**每个`ns`都不一样。当你`ns = {};`每次使用创建不同的对象时，引用是指向不同的对象，所以每个声明的函数的每个上下文都是不同的（对于上下文你可以想到`ns`对象）。

# tfs - 错误提交+毫无根据的合并后如何清理分支

> ID：14935136
> 
> 赞同：0
> 
> 时间：2013-02-18T11:24:06.080
> 
> 标签：tfs

不久前，我错误地删除了一个文件夹“Data”，然后提交。问我的高级开发人员该怎么做，他说“我会再次添加文件”，事后看来这是错误的选择。TFS 将这些文件视为 2 个不同的文件，因此当我们合并时我们会遇到冲突。另一位开发人员（正在进行合并）灵机一动，决定重命名所有旧文件，然后合并。这是 6 个月前的事，渗透到我们所有的子分支。

现在我们有几个带有以下文件的分支

**父分支**
Actor.csv
Actor.csv.old

**子分支**
Actor.csv
Actor.csv.old

我通过在（父分支）actor.csv.old 到（子）actor.csv 和（父）actor.csv 到（子）actor.csv 之间进行毫无根据的合并解决了合并错误

但是现在该文件夹中到处都是 .old 文件。我该如何摆脱这些？将 .csv 文件与 .csv.old 文件合并？删除 .csv.old 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:08:43.673

In the end we just struggled through it. We deleted the .old files but then it would also delete the original files (since they were linked I'm guessing). Then after that delete we undeleted them and then merged. Problem solved. .old files were deleted and we were able to merge.

# python - 将没有源的包上传到 pypi repo

> ID：14935137
> 
> 赞同：1
> 
> 时间：2013-02-18T11:24:05.677
> 
> 标签：python, egg, pypi

抱歉，如果以前有人问过这个问题，但我一生都无法找到（对我而言）似乎是一个非常基本的问题的答案。

我有一组不包含源的 .egg 包（例如，没有 setup.py 文件）。我需要注册这些包并将其上传到我们内部的 pypi 存储库。除了手动将包复制到 pypi 存储库目录并手动将条目插入 pypi db 之外，有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:59:09.100

您需要手动注册这些。

但是，您可以使用 PyPI Web 界面来执行此操作。中央 PyPI 服务器`Package submission`在左侧菜单栏中有一个链接，指向`http://pypi.python.org/pypi?%3Aaction=submit_form`，大概您的本地安装具有相同的链接。

你`.egg`的 s 要么是目录，要么是 zip 文件。如果它不是目录，则需要解压缩文件以查看内部（创建一个您重命名为具有`.zip`扩展名的副本，如果这将使您的工具更容易将其识别为 zip 文件）。

你会`EGG-INFO`在 egg 里面找到一个子目录，在里面你会找到一个`PKG-INFO`文件。您可以将此文件上传到包提交表单以替换`setup.py register`命令。

注册后，Web UI 允许您导航到包，从那里导航到`files`特定包的部分并上传 egg 文件。

# css - 对齐文本中心然后向左

> ID：14935142
> 
> 赞同：0
> 
> 时间：2013-02-18T11:24:17.623
> 
> 标签：css

再会

我想在 div 的中心对齐文本。现在使用 text-align: center on parent div 很容易。

但是，如果我想将 div 内的文本左对齐到居中 div 的左侧，我该怎么做？

看我的小提琴：http: [//jsfiddle.net/DvXzB/5/](http://jsfiddle.net/DvXzB/5/)

HTML：

```
<div id="aboutContent" class="row-fluid">
    <div id="aboutHeaderText" class="span12"><span title="">About Us</span></div>
    <div id="aboutHeaderBody" class="span12">
        <p><a title="">asdasd</a> is a free mobile application available for <a href="#"
            title="">iOS</a>, <a href="#" title="">Android</a>and the <a href="#" title="">Blackberry</a> operating
            systems.</p>
        <p>sdefsadfsdfldflkjlj lkjlkjdlfsldfjlkj ljlsdjflj lkj ljklj lk; ;l;l; ;k;k
            l;kgjh jhg gjjh jhgjhgjh jhgjh gjg jgjhgjg</p>
        <div id="cities"><a title="">asdasdasd</a> currently only displays events and
            specials in <strong>asdasd</strong> (our hometown), but the following locations
            will be available before you know it:
            <ul>
                <li><span>asdg</span>

                </li>
                <li><span>asdwn</span>

                </li>
                <li><span>Pasdasdroom</span>

                </li>
                <li><span>Dasdaf</span>

                </li>
                <li><span>Bergrin</span>

                </li>
                <li><span>Sersch</span>

                </li>
                <li><span>Graergwn</span>

                </li>
            </ul>
        </div>
        <p>Visit our <a href="" title="" target="_blank">Facebook page</a> for more
            up to date information, and feel free to <a href="" title="">contact us</a> with
            any queries.</p>
        <br />
    </div>
</div> 
```

CSS：

```
#aboutContent {
    color: #222;
    margin-top: 50px;
    margin: 0 auto;
    text-align: center;
}
#aboutHeaderText span {
    font-family:"Kozuka Gothic Pr6N", sans-serif !important;
    color: #eeeeee;
    font-size: 26px;
    font-weight: bold;
}
#aboutHeaderText img {
    margin-top: -18px;
    margin-left: 8px;
}
#aboutHeaderBody {
    position: relative;
    padding: 0px;
    font-size: 16px;
}
#cities ul {
    list-style: none;
    margin-top: 10px;
}
#cities ul li {
    font-family:'Open Sans', sand-serif;
    padding: 3px 0px;
    font-size: 20px;
    color: #222;
} 
```

我希望页面中间的文本是对齐的，但是当我对齐或左对齐时，它会再次将它与绝对左对齐。如何在不使用固定填充或边距的情况下执行此操作？基本上我想要的是他们在此页面上的内容（请参阅“关于我们”部分）： http: [//www.villagebicycle.co.za/](http://www.villagebicycle.co.za/)

注意：我使用的是流体布局，所以固定填充等不起作用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:42:37.617

在将容器`margin:0 auto`的宽度设置为特定大小（如`width:400px`. 然后使用 . 分别对齐每个元素`text-align`。

看这个演示：http: [//jsfiddle.net/DvXzB/16/](http://jsfiddle.net/DvXzB/16/)

如果你希望你的容器有 100% 的宽度，那么不要使用`text-align:center`你的 parent `div`。相反，使用`width:100%`（可选）并`text-align`根据需要再次使用每个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:46:18.847

您必须使用**包装器**div 来包含所有内容。我做了一个[JsFiddle，](http://jsfiddle.net/newpatriks/DvXzB/15/)我认为这就是你要找的:)

```
.wraper {
    position: relative;
    width: 500px;
    margin:0 auto;   
} 
```

除此之外，您可以将 a 对齐`<p>`到左、右、对齐等，如您所见：

```
 p.left{text-align:left;}
    p.justify{text-align:justify;} 
```

以及用于测试的 HTML：

```
<div class="wraper">
        <p class="left">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>

    <p class="justify">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
    </ul>

</div> 
```

# haskell - 如何有效地使用高阶函数？

> ID：14935147
> 
> 赞同：1
> 
> 时间：2013-02-18T11:24:28.283
> 
> 标签：haskell

通过利用高阶函数，实现该函数的最佳方法是`makeCloths`什么？我希望实现的是`makeCloths`可以`methodsList`使用`materialList`. 这样以后如果在 中添加更多的方法`methodsList`，并且这些方法只使用 中的参数`materialList`，我们就不需要修改 中的代码`makeCloths`。

```
data Material = WhiteCloth Int
              | BlueCloth Int
              | RedCloth Int

makeWhiteShirt :: Material -> Clothe
makeWhiteShirt (WhiteCloth x) = .....

makeBluePants :: Material -> Clothe
makeBluePants (BlueCloth x) = .....

makeRedBlueDress :: Material -> Material -> Clothe
makeRedBlueDress (RedCloth x) (BlueCloth y) = ......

methodsList = [ makeWhiteShirt, makeBluePants, makeRedBlueDress ]
materialList = [ WhiteCloth 3, BlueCloth 2, RedCloth 2]

-- call makeCloths like so
-- listOfClothes = makeCloths methodsList materialList 
makeCloths :: [a] -> [b] -> [Clothe] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:52:11.670

首先，正如许多其他人所建议的那样，haskell 不允许您拥有一系列基数不匹配的函数。您可能希望 makeRedBlueDress 的类型为 Material -> Clothe。如果你真的想要这种多态性，没有什么能阻止我们为带有多个参数（或由多个材质组成）的材质定义额外的类型

一旦我们有了它，makeCloths 就是 zipWith 函数的一个特例。

```
makeCloths = zipWith $ \x y -> (x y) 
```

它的类型签名最有意义

```
zipWith $ \x y -> (x y) :: [b -> c] -> [b] -> [c] 
```

# svn - 带有 GUI 的便携式 SVN

> ID：14935148
> 
> 赞同：0
> 
> 时间：2013-02-18T11:24:37.450
> 
> 标签：svn, windows-xp, tortoisesvn

我没有管理权限，所以我想要运行 SVN，从主存储库下载 PHP 文件，对 PHP 文件进行更改，然后将这些更改发送到主存储库。就是这样。我应该使用什么工具？有 GUI 会更好，但如果没有 GUI，我会使用命令界面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:34:54.703

好吧，好吧。所以你想：

*   `svn checkout`工作副本，
*   对 PHP 文件进行一些更改，
*   `svn commit`您的更改返回到存储库。

所以我建议你使用 Subversion 命令行工具。[例如，在http://www.visualsvn.com/downloads/](http://www.visualsvn.com/downloads/)获得一个独立的 Apache Subversion 命令行工具包。

# php - 在magento中获取产品重量

> ID：14935152
> 
> 赞同：1
> 
> 时间：2013-02-18T11:25:03.470
> 
> 标签：php, magento, csv

我正在尝试为合作伙伴价格聚合系统制作一个 csv 导出脚本。我无法从 magento 中提取产品的重量。

```
$show_prodweight = (@$_GET['weight'] == "on") ? "on" : "off";
....
$product = Mage::getModel('catalog/product');
$product->setStoreId($storeId);
$product->load($product_id);

$prod_model = $product->getSku();   
$prod_id = $product->getId();
$prod_name = $product->getName();

if ( $show_prodweight =="on") {
    $prod_weight = $product->getWeight ();
    }
    else {
    $prod_weight == "2";
    }
....
print $PRODUCT['prod_weight'] . $datafeed_separator . 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:40:10.120

通过简单的代码解决它

```
$product = Mage::getModel('catalog/product');
$product->setStoreId($storeId);
$product->load($product_id);

$prod_model = $product->getSku();   
$prod_id = $product->getId();
$prod_name = $product->getName();
$prod_weight = $product->getWeight(); 
```

# c# - 为什么这个错误“局部变量不能在这个范围内声明，因为它......已经被使用了”？

> ID：14935155
> 
> 赞同：3
> 
> 时间：2013-02-18T11:25:13.890
> 
> 标签：c#, recursion, delegates, lambda, closures

我正在尝试运行[Eric Lippert 的博客文章中的代码“为什么递归 lambda 会导致明确的分配错误？”](http://blogs.msdn.com/b/ericlippert/archive/2006/08/18/why-does-a-recursive-lambda-cause-a-definite-assignment-error.aspx)

但不是运行（或给出编译“明确的分配错误”我得到：

> 不能在此范围内声明名为“t”的局部变量，因为它会给“t”赋予不同的含义，后者已在“父或当前”范围中用于表示其他内容

为什么？
它已在父范围或当前范围中使用在哪里？
尝试重命名它得到相同的错误
我应该如何更改代码以启动此代码？

```
using System;
namespace LippertRecursiveLambdaError
{
  class Program
  {
    static void Main(string[] args)
    {
      Tree<int> tree = new Tree<int>
      (3, new Tree<int>
             (4, new Tree<int>(1), null), 
          new Tree<int>(5));
      PrintTree(tree);
      Console.ReadLine();
    }

    delegate void Action<A>(A a);
    delegate void Traversal<T>(Tree<T> t, Action<T> a);

  static void DepthFirstTraversal<T>(Tree<T> t, Action<T> a)
  {
    if (t == null) return;
    a(t.Value);
    DepthFirstTraversal(t.Left, a);
    DepthFirstTraversal(t.Right, a);
  }
  static void Traverse<T>(Tree<T> t, Traversal<T> f, Action<T> a)
  {
    f(t, a);
  }
  static void Print<T>(T t)
  {
    System.Console.WriteLine(t.ToString());
  }
  /*static void PrintTree<T>(Tree<T> t)
  {
    Traverse(t, DepthFirstTraversal, Print);
  }*/

  static void PrintTree<T>(Tree<T> t)
  {
    //Traversal<T> df = (t, a)=>          **************
    Traversal<T> df = null;
    //========================================
//The next line gives compilation error
//A local variable named 't' cannot be declared in this scope 
//because it would give a different meaning to 't', 
//which is already used in a 'parent or current' scope to denote something else       
    df = (t,
      a) =>
     {
       if (t == null) return;
       a(t.Value);
       df(t.Left, a);
       df(t.Right, a);
     };
  Traverse(t, df, Print);
  }//PrintTree
  }//class
  class Tree<T>
  {
    public Tree<T> Left;
    public Tree<T> Right;
    public T Value;

    public Tree(T value) 
    { 
       Value = value; 
    }
    public Tree(T value, Tree<T> left, Tree<T> right) 
    { 
        Value = value; 
        Left = left; 
        Right = right; 
    }
  } 
}//namespace 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:28:29.333

```
 static void PrintTree<T>(Tree<T> t)
  {
    //Traversal<T> df = (t, a)=>          **************
    Traversal<T> df = null;
    //========================================

    df = (t,      a) =>
     {
       if (t == null) return;
       a(t.Value);
       df(t.Left, a);
       df(t.Right, a);
     };
    } 
```

那是因为`Tree<T> t`是一个声明并且`(t,a) =>` 是另一个声明..实际上与说的相同：

```
int someFunction(T t, U a)
//Assuming int is the return type 
```

无论如何要修复：更改`t`为另一个标识符..`n`例如

```
df = (n,a) =>{
           if (n == null) return;
           a(n.Value);
           df(n.Left, a);
           df(n.Right, a);
         };
        } 
```

# entity-framework - 将包含与实体框架相结合

> ID：14935158
> 
> 赞同：1
> 
> 时间：2013-02-18T11:25:32.257
> 
> 标签：entity-framework, lazy-loading

我通常使用通用存储库来样板化我的 EF 查询，因此我必须编写有限的代码并使用缓存。可以在[此处](https://github.com/JimBobSquarePants/EFBootstrap)找到存储库的源代码。

代码中的主干查询是下面的这个。`FromCache<T>()`是一种`IEnumerable<T>`扩展方法，它`HttpContext.Cache`使用 lambda 表达式的字符串化表示作为键来存储查询。

```
 public IQueryable<T> Any<T>(Expression<Func<T, bool>> expression = null)
    where T : class, new()
    {
        // Check for a filtering expression and pull all if not.
        if (expression == null)
        {
            return this.context.Set<T>()
                       .AsNoTracking()
                       .FromCache<T>(null)
                       .AsQueryable();
        }

        return this.context.Set<T>()
                           .AsNoTracking<T>()
                           .Where<T>(expression)
                           .FromCache<T>(expression)
                           .AsQueryable<T>();
    } 
```

虽然这一切都有效，但由于如果我要编写这样的查询，则相关表会遇到 N+1 问题：

```
var posts = this.ReadOnlySession.Any<Post>(p => p.IsDeleted == false)
                                .Include(p => p.Author); 
```

这`Include()`对我的查询没有影响，因为它已经运行以便缓存。

现在我知道我可以通过删除导航属性上的虚拟前缀来强制实体框架在我的模型中使用预先加载，但对我来说，这样做是错误的，因为你无法预测你将要进行的查询类型。对我来说，感觉就像我会在控制器类中做的事情。我想知道的是我是否可以将包含列表传递到我的`Any<T>()`方法中，然后我可以在调用时进行迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:18:28.147

你的意思是...

```
IQueryable<T> AnyWithInclude<T,I>(Expression<Func<T,bool>> predicate,
                                  Expression<Func<T,I>> includeInfo) 
{ 
  return  DbSet<T>.where(predicate).include(includeInfo);
} 
```

通话

```
Context.YourDbSetReference.AnyWithInclude(t => t.Id==someId, i => i.someNavProp); 
```

回答关于收藏的额外问题。

我很晚才意识到，Property 过载了。你可以只传递一个字符串

这可能有效，但调用并不容易。嗯，我觉得很难。

```
 IQueryable<T> GetListWithInclude<I>(Expression<Func<T, bool>> predicate,
                                        params Expression<Func<T, I>>[] IncludeCollection); 
```

所以我尝试了

```
 public virtual IQueryable<T> GetListWithInclude(Expression<Func<T, bool>> predicate, 
                                                 List<string> includeCollection)
    { var result = EntityDbSet.Where(predicate);
        foreach (var incl in includeCollection)
        {
            result = result.Include(incl);
        }
        return result;
    } 
```

并打电话给

```
 var ic = new List<string>();
 ic.Add("Membership");
 var res =  context.DbSte<T>.GetListWithInclude( t=>t.UserName =="fred", ic); 
```

像以前一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:12:26.157

为了清楚起见，我添加了我根据@soadyp 的回答提出的解决方案。

```
public IQueryable<T> Any<T>(Expression<Func<T, bool>> expression = null, 
                         params Expression<Func<T, object>>[] includeCollection)
    where T : class, new()
{
    IQueryable<T> query = this.context.Set<T>().AsNoTracking().AsQueryable<T>();

    if (includeCollection.Any())
    {
        query = includeCollection.Aggregate(query, 
                    (current, include) => current.Include(include));
    }

    // Check for a filtering expression and pull all if not.
    if (expression != null)
    {
        query = query.Where<T>(expression);
    }

    return query.FromCache<T>(expression, includeCollection)
                .AsQueryable<T>();
} 
```

用法：

```
// The second, third, fourth etc parameters are the strongly typed includes.
var posts = this.ReadOnlySession.Any<Post>(p => p.IsDeleted == false,
                                           p => p.Author); 
```

# string - 从 shell 脚本中的文件中选择特定单词

> ID：14935165
> 
> 赞同：0
> 
> 时间：2013-02-18T11:25:52.153
> 
> 标签：string, shell, grep

我有一个具有这种结构的文本文件：

```
....

"/home/letizia/Documents/SpanishSegmentation/Recordings/segmented/mfc/F001.0.rec"
COGE
LAS
HOJAS
Y
LAS
QUEMAS
TODAS
EN
EL
FUEGO
"/home/letizia/Documents/SpanishSegmentation/Recordings/segmented/mfc/F002.0.rec"
LA
LIGA
DE
PAZ
SE
REUNIO314201
PARA
TRATAR
EL
TEMA
.... 
```

我想选择“F0001.0”和“F0002.0”。

我在用：

```
 ID="F"
     if [[ "$LINE" == *Recordings* ]]
     then        
     SEGMENT=`echo $LINE | grep -o $ID.* | cut -d'.' -f1-2`
     fi 
```

但它不起作用。错误在哪里？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:48:10.737

尝试`sed`改用：

```
sed -n 's@^".*/Recordings/.*/\(.*\)"$@\1@p' file.txt 
```

快速演练：

1.  `-n``p`: 除非特别要求（最后），否则不要打印任何内容。
2.  `s@`: 将直到下一个`@`的部分替换为直到下一个的部分。
3.  `^".*/Recordings/.*/\(.*\)"$`：匹配以双引号开始和结束的行，包含/Recordings/，并吃掉所有内容，直到最后一个斜杠。
4.  `\1`：用最后一部分替换匹配的字符串（我们在括号中捕获）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:37:19.350

你需要一个`while`循环：

```
while IFS= read -r line; do
    id="F"
    if [[ "$line" =~ /Recordings/ ]]; then

        segment=$(echo $line | grep -o "$id.*" | cut -d '.' -f1-2)
        echo "$segment"
    fi
done < file.txt 
```

结果：

```
F001.0
F002.0 
```

* * *

但是，更好的方法是使用`sed`：

```
sed -n '/Recordings/s#.*/\(F[^\.]*\.[^\.]*\).*#\1#p' file.txt 
```

# android - 是否可以自动更改画布图像 Android？

> ID：14935167
> 
> 赞同：0
> 
> 时间：2013-02-18T11:25:54.007
> 
> 标签：android, animation, android-canvas, android-animation

我想**自动更改画布图像**。

意味着我希望画布图像应该一个接一个地连续设置。

我编写了只设置一次图像的代码。

但我不知道有关自动更改画布图像的代码，因此它会创建**对象在路上运行**的效果..

那么**在画布中创建这种动画的方法是什么？**

请给我一些想法来创建这样的 2D 动画。

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:33:31.167

我会这样做：

*   创建一个包含位图的自定义视图，并在`onDraw()`此位图中绘制在画布上
*   给这个自定义视图一个 setter，给它一个新的位图（可能是一个 ressouce-id 或类似的东西）
*   创建一个新线程（带有 UI 处理程序），每秒至少更改 24 次画布资源并`customView.invalidate()`通过调用`handler.post`

这对我有用

**编辑：代码**

**活动：**

```
package de.test.animation;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;

public class AnimationTestActivity extends Activity {
Button btn;
CustomView customView;
LinearLayout layout;

int[] imageIDs;

private void init(){    //array with my ressouce-IDs
    imageIDs = new int[]{
        R.drawable.pic1,    
        R.drawable.pic2,    
        R.drawable.pic3,    
        R.drawable.pic4,    
        R.drawable.pic5,    
        R.drawable.pic6,    
        R.drawable.pic7,    
        R.drawable.pic8,    
        R.drawable.pic9,    
        R.drawable.pic10,   
        R.drawable.pic11,   
        R.drawable.pic12,   
        R.drawable.pic13,   
        R.drawable.pic14,   
        R.drawable.pic15,   
        R.drawable.pic16,   
        R.drawable.pic17,   
        R.drawable.pic18,   
        R.drawable.pic19,   
        R.drawable.pic20,   
        R.drawable.pic21,   
        R.drawable.pic22,   
        R.drawable.pic23,   
        R.drawable.pic24    
    };
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    init();

    btn = (Button) findViewById(R.id.btnStart);
    layout = (LinearLayout)findViewById(R.id.layout);

    customView = new CustomView(this);
    customView.setNewImage(imageIDs[0]);
    layout.addView(customView);

    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Thread t = new Thread(){
                private final int FPS = 24; //How many frames will be dran per second
                private final int SLEEPTIME = 1000/FPS; //Time, the thread waits, before drawing the next picture

                @Override
                public void run() {
                    super.run();
                    for(int i=0;i<imageIDs.length;i++){
                        customView.setNewImage(imageIDs[i]);    //set next picture
                        customView.repaint();   //draw the picture on the canvas
                        try {
                            sleep(SLEEPTIME);   //wait, until the next picture can be drawn
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            };
            t.start();
        }
    });
}
} 
```

**自定义视图：**

包 de.test.animation；

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.view.View;

public class CustomView extends View {
private Bitmap image;   //image to be drawn on this view
private Context context;

public CustomView(Context context) {    //constructor
    super(context);
    this.context = context;
}

public void setNewImage(int r_id){  //method to set a new picture (via resouce-id)
    image = BitmapFactory.decodeResource(context.getResources(), r_id); //decode the image from the resouces
}

public void repaint(){  //method to repaint this view
    this.post(new Runnable(){   //posting via a new runnable (otherwhise you get a "calledByWrongThreadException"
        @Override
        public void run() {
            invalidate();   //Thread initiates UI-Thread to update this view
        }
    });
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawBitmap(image, 0, 0, new Paint()); //draw the picture in the view
}

} 
```

我希望这可以帮助你。那么祝你好运吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:31:08.763

看看这个帧动画教程：

[http://www.youtube.com/watch?v=iTKtT-R98EE](http://www.youtube.com/watch?v=iTKtT-R98EE)

更多信息可以在以下链接中找到：

[开始逐帧动画](https://stackoverflow.com/questions/2785336/starting-frame-by-frame-animation)

以下是分步过程：

在帧动画中，您将反复交换帧，以便它在人眼看来是连续的，我们觉得它是动画的。帧是指图像。因此，要实现帧动画，需要有一组图像来描述运动。

> 第 1 步 - 创建一个可绘制文件夹。

在其中创建一个 animation_list.xml 文件。

它包括：具有帧图像地址的项目列表。

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">

<item android:drawable="@drawable/blank" android:duration="210" />
<item android:drawable="@drawable/logo" android:duration="210" />
<item android:drawable="@drawable/logo1" android:duration="210" />
<item android:drawable="@drawable/logo2" android:duration="210" />
<item android:drawable="@drawable/logo3" android:duration="210" />
<item android:drawable="@drawable/logo4" android:duration="210" />
<item android:drawable="@drawable/logo5" android:duration="210" />
<item android:drawable="@drawable/logo6" android:duration="210" />
<item android:drawable="@drawable/logofinal" android:duration="210" />
</animation-list> 
```

> 第 2 步 - 创建一个 activity_main.xml 文件

它包括：图像视图

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageAnimation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true" />

</RelativeLayout> 
```

> 第 3 步 - 在 onCreate 方法之外：

声明 Image View 和 Animation Drawable

```
// Declaring an Image View and an Animation Drawable

ImageView view;
AnimationDrawable frameAnimation; 
```

> Step4- 在 OnCreate 方法中：

Typecast the Image view Typecast the Animation Drawable 在图像视图上设置可绘制背景

```
// Typecasting the Image View
view = (ImageView) findViewById(R.id.imageAnimation);

// Setting animation_list.xml as the background of the image view
view.setBackgroundResource(R.drawable.animation_list);

// Typecasting the Animation Drawable
frameAnimation = (AnimationDrawable) view.getBackground(); 
```

> Step5- 在 onCreate 方法之后：

动画应该只在它处于焦点时运行，即当它对用户可见时。因此在 onCreate 方法之后定义此方法。

```
// Called when Activity becomes visible or invisible to the user
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
      if (hasFocus) {
    // Starting the animation when in Focus
    frameAnimation.start();
    } else {
        // Stoping the animation when not in Focus
    frameAnimation.stop();
      }
} 
```

[资源](http://www.edureka.in/blog/frame-animation-in-android/)

# ruby-on-rails-3 - Rails ActiveRecord 在其他对象中定义数据库对象

> ID：14935172
> 
> 赞同：0
> 
> 时间：2013-02-18T11:26:01.230
> 
> 标签：ruby-on-rails-3, activerecord

我对 Rails 比较陌生，对数据库操作也很陌生。

我正在尝试在数据库中创建一个类，其中包含许多自定义对象。这些自定义对象也将存储在数据库中的单独表中。我设法将其设置如下

```
class MyClass < ActiveRecord::Base
  has_many :other_objects, :dependent => destroy
end

class OtherObject < ActiveRecord::Base
  belongs_to :my_class
  attr_accessible :some_stuff...
end 
```

我已经创建了适当的数据库表并设法让它工作。

现在我想做的是在我的类中有（四个）“OtherObject”的特定实例，可以通过一些简单的标识符来访问，比如

```
test = MyClass.new
...
test.instance_of_other_object.some_attribute = "blahblah" 
```

这样就可以更新关联对象的数据库条目。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:48:18.523

该`has_many`关联设置`MyClass#other_objects`（和[一堆其他方法](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)）允许您轻松处理关联记录。

你可能想要：

```
my_class.other_objects.each do |other_object|
  other_object.update_attributes(:foo => 'bar')
end 
```

如果要直接更新 SQL，可以使用[`update_all`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update_all)：

```
my_class.other_objects.update_all(:foo => 'bar') 
```

**更新**：

如果这是您需要的那种关联，您可以定义一个[`belongs_to`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)关联：

```
class MyClass < ActiveRecord::Base
  has_many :other_objects, :dependent => :destroy

  # uses :selected_other_object_id
  belongs_to :selected_other_object, :class_name => "OtherObject"
end

my_class = MyClass.first
my_class.selected_other_object = other_object  # Set the object.
# => #<OtherClass:...>
my_class.selected_other_object_id     # ID has been set.
# => 10
my_class.selected_other_object        # Retrieve the object.
# => #<OtherClass:...>
my_class.selected_other_object.save   # Persist ID and other fields in the DB.

my_class = MyClass.find(my_class.id)  # If you fetch the object again...
# => #<MyClass:...>
my_class.selected_other_object_id     # The ID is still there.
# => 10
my_class.selected_other_object        # You have the ID, you get the object.
# => #<OtherClass:...>

my_class.selected_other_object.foo = "bar"  # Access associated object this way.
another_variable = my_class.selected_other_object  # Or this way. 
```

但是请记住，这并不假定它`:selected_other_object`是 的子集`:other_objects`。

另请注意，设置关联时已经设置了`selected_other_object`和`selected_other_object=`方法，因此您不必自己定义这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:50:53.593

现在用于`object.dup`rails 3.1 及更高版本。

```
a = MyClass.first # finds the first instance of the model "MyClass"  

b = a.dup # duplicates the record.

c = a.dup # duplicates the record again.  

b.field_name = "blahblah"

c.fielf_name = "blahblah"

b.save # saves the record into the database for object b.

c.save # saves the record into the database for object c. 
```

如果您查看您的数据库，您可以看到已经创建了一条新记录。它与第一条记录相同，只是它有一个**新的 id**。

另请检查[复制模型](http://rubyrailsandwindows.blogspot.in/2011/09/duplicate-model-in-rails-31.html)以获取有关它的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:04:32.270

这不是一个完整的答案，但我想出了一些适用于获取对象的方法，但不适用于设置它。

```
class MyClass < ActiveRecord::Base
  has_many :other_objects, :dependent => destroy

  def particular_instance
    return OtherObject.find_by_id(self.particular_instance_id)
  end
end 
```

我的数据库架构看起来像这样

```
create_table "my_classs", :force => true do |t|
  t.integer "particular_instance_id"
end

create_table "other_objects", :force => true do |t|
  t.integer "my_class_id"
  t.string "some_attribute"
end 
```

**更新** 为了设置 other_object 类的属性，可以使用 update_attributes 方法

```
my_class.particular_instance.update_attributes(:some_attribute => "blah") 
```

# msbuild - MSBuild WriteLinesToFile 最后没有换行

> ID：14935175
> 
> 赞同：4
> 
> 时间：2013-02-18T11:26:07.333
> 
> 标签：msbuild

我想使用 WriteLinesToFile 在文本文件中写入一个数字，但任务是在末尾放置一个换行符，当我想在其他地方阅读或组合时这会给我带来麻烦

例子：

```
<WriteLinesToFile File="$(TextFile)" Lines="@(BuildNumber)" Overwrite="true"/> 
```

**更新为以下用户评论**：

我遇到的问题是我使用了一个非常简单的命令`Property`来读取文件的内容，`$([System.IO.File]::ReadAllText("$(TextFile)"))`我真的很想使用这个命令，但它还包括来自`WriteLinesToFiles`. 我最终使用了与您类似的解决方案，使用`ReadLinesFromFile`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T20:26:52.307

标题和描述之间有轻微的脱节。我本来希望将此“答案”作为编辑发布，但没有[足够的声誉点](https://meta.stackexchange.com/questions/19756/how-do-comments-work):) 您是否对文件末尾的换行符有问题，或者您是否有忽略该换行符的问题？你能澄清一下吗？

我认为您可以忽略该换行符的一种方式如下。

这段代码将构建号写入文件，然后将其读出，然后将读取的数字加 1。

```
<Target Name="Messing_around">
  <PropertyGroup>
      <StartBuildNumber>1</StartBuildNumber>
  </PropertyGroup>
  <ItemGroup>
      <AlsoStartBuildNumber Include="1"/>
  </ItemGroup>
  <!-- Use a property 
  <WriteLinesToFile File="$(ProjectDir)test.txt" Lines="$(StartBuildNumber)" Overwrite="true"/>      
  -->
  <WriteLinesToFile File="$(ProjectDir)test.txt" Lines="@(AlsoStartBuildNumber)" Overwrite="true"/>
  <ReadLinesFromFile File="$(ProjectDir)test.txt">
      <Output
          TaskParameter="Lines"
          ItemName="BuildNumberInFile"/>
  </ReadLinesFromFile>
  <PropertyGroup>
    <OldBuildNumber>@(BuildNumberInFile)</OldBuildNumber>
    <NewBuildNumber>$([MSBuild]::Add($(OldBuildNumber), 1))</NewBuildNumber>
  </PropertyGroup>
  <Message Importance="high" Text="Stored build number: @(BuildNumberInFile)"/>
  <Message Importance="high" Text="New build number: $(NewBuildNumber)"/>
</Target> 
```

这就是我所看到的

```
Output:
1>Build started xx/xx/xxxx xx:xx:xx.
1>Messing_around:
1>  Stored build number: 1
1>  New build number: 2
1>
1>Build succeeded. 
```

如果您尝试在 MSBuild 任务中读取仅包含来自带有尾随换行符的文件中的数字的单行，那么您应该没有问题。

作为旁注：由于手头的信息很少，我假设这`BuildNumber`是`Item`一个`ItemGroup`. 如果您只有一个内部版本号要处理，也许`Property`可能是一种选择。但话又说回来，我已经很久没有修补 MSBuild 了。因此，我愿意接受有关`Item`vs`Property`问题的反馈。

# c# - WinPhone8 Camera API 似乎在 dispose 调用后继续运行

> ID：14935176
> 
> 赞同：1
> 
> 时间：2013-02-18T11:26:11.400
> 
> 标签：c#, windows-phone-7, xaml, camera, windows-phone-8

我在使用[Camera API](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202956%28v=vs.105%29.aspx)时遇到了一个严重问题，即使我知道在 99.99% 的情况下，框架不应该受到责备，但我开始考虑在 Windows 中处理相机的方式可能存在问题电话。

# 问题

我的代码很简单，只有两个非常简单的页面：第一个是用于导航到第二个的按钮，它使用相机 API 并在屏幕上呈现预览缓冲区。在第一页上，我还添加了一个带有循环动画的矩形来旋转它，以强制应用程序更新帧速率。

配置文件会话的结果如下：

![测试应用程序生命周期](../Images/6e28c92dc81a1a35934cc90ee8c1c5a0.png)

只要我停留在第一页，帧率计数器就会显示坚如磐石的 60fps。一旦我启动以相机为特色的第二页，由于使用了系统相机，fps 会下降。但是，当我按下后退键时，相机已正确放置，但帧速率有点低（~53 fps）。**更令人印象深刻的是，图表数据显示某些东西仍在运行并损害性能！**内置分析告诉我，系统应用程序使用了 47% 的 CPU，与显示相机页面时相同！

这种行为是否有已知原因？

# 我的代码

我的第二页代码隐藏：

```
public partial class MyScannerView : PhoneApplicationPage {
    private PhotoCamera camera;

    public MyScannerView() {
        InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e) {
        base.OnNavigatedTo(e);

        camera = new PhotoCamera(CameraType.Primary);
        viewfinderBrush.SetSource(camera);
    }

    protected override void OnNavigatedFrom(NavigationEventArgs e) {
        base.OnNavigatedFrom(e);

        if (camera != null) {
            camera.Dispose();
            camera = null;
        }
    }
} 
```

第二页的我的 XAML：

```
<Canvas x:Name="viewfinderCanvas">
    <Canvas.Background>
        <VideoBrush x:Name="viewfinderBrush">
            <VideoBrush.RelativeTransform>
                <CompositeTransform x:Name="viewfinderTransform" CenterX="0.5" CenterY="0.5" />
            </VideoBrush.RelativeTransform>
        </VideoBrush>
    </Canvas.Background>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T10:02:23.043

我对使用相机的应用程序有类似的外观问题。设法通过使用不是 OnNavigatedFrom 而是 OnNavigatingFrom 覆盖并按以下顺序来克服它：

1.  退订活动
2.  处置（）；
3.  相机=空；

# php - 在 .bat 文件中调用未定义的函数 curl_init()

> ID：14935178
> 
> 赞同：0
> 
> 时间：2013-02-18T11:26:19.223
> 
> 标签：php, curl, windows-7, batch-file

我使用创建了我的 php 文件作为 .bat 文件

```
@ECHO OFF
php -f D:\wamp\www\scrapper\scrapper5.php 
```

我在 scrapper5.php 中使用了 cURL，当我手动运行 .bet 文件时出现错误

`call to undefined function curl_init()`在你的文件中

我进行了研究，发现 cURL 在 CLI 模式下不起作用。

我只是按照以下步骤操作，但无法成功。

[在 wamp 服务器中将 php 脚本作为后台进程运行](https://stackoverflow.com/questions/4231539/run-a-php-script-as-a-background-process-in-wamp-server)

如何使用 cURL 运行批处理文件？

谁能给我解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:55:07.810

我认为您必须在 wamp 服务器中启用 cUrl 功能。按照这些步骤可能会对您有所帮助： 1\. 转到位于任务栏中的 wamp 服务器托盘图标。2.打开PHP选项卡。3.PHP扩展。4.然后确保选择了 PHP_CURL。5.然后重启wamp服务器。 **希望对你有帮助！！！！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:43:47.657

从您发布的错误来看，您似乎没有安装 cURL。也许看看你的 PHP 的 CLI 配置，看看 curl 模块是否处于活动状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:45:05.087

默认情况下，Wamp 可能没有安装 cURL - 查看在您的系统上安装它的选项。

如果我没记错的话，你应该有一个菜单（右键单击 wamp 图标）来启用/禁用 apache 模块。在那里查看 cURL 并启用它。（对不起，如果这有点含糊，我现在在 Mac 上，在 Windows 上，自从我从 WAMP 迁移到 XAMPP 已经好几年了）

如果这不起作用，一些论坛似乎提到从这里下载 cURL 扩展名（在 Windows 上这是一个 .dll 文件）：[http ://www.anindya.com/php-5-4-3-and-php -5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)并将其放在 WAMP 安装目录下的 ext 文件夹中。只要确保您的版本正确，以确保稳定性。

# java - 如何编写用于在 linux 中安装 atg 的批处理脚本？

> ID：14935181
> 
> 赞同：0
> 
> 时间：2013-02-18T11:26:24.333
> 
> 标签：java, linux, batch-file, atg

如何编写跳过“下一步”按钮的脚本，包括批处理文件中的文件路径？**除了使用AUTOIT**或类似工具（在安装时记录击键）之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:10:57.943

不需要工具。运行以下命令：

exefilename /r *用于录制*，生成一个属性文件（默认路径与您的.exe文件相同）

要从命令行触发静默安装程序，请键入以下命令：

exefilename -i 静默

也可以从命令行指定属性文件：

exe文件名 -f

来源： http://kb.flexerasoftware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=Q000448& [sliceId =](http://kb.flexerasoftware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=Q000448&sliceId=)

# arrays - 如何为 redis 展平哈希

> ID：14935185
> 
> 赞同：0
> 
> 时间：2013-02-18T11:26:27.327
> 
> 标签：arrays, hash, redis

在redis中，我需要像这样创建hset：

```
@redis.hset key, param1, val1, param2, val2 
```

我有 n 哈希：

```
params = {:a => "x", :b => "y"} 
```

展平：

```
params = {:a => "x", :b => "y"}.flatten #=> [:a, "x", :b, "y"] 
```

但我不能这样做：

```
@redis.hmset key, params 
```

因为它正在传递一个数组：

```
@redis.hmset key, [:a, "x", :b, "y"] 
```

我需要用数组做一些事情来做到这一点：

```
@redis.hmset key, :a, "x", :b, "y" 
```

请问你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:28:42.177

你需要 splat 运算符

```
@redis.hset key, *params 
```

它将数组“展开”成单独的参数。

# ruby-on-rails - Ruby on rails .try() 无法正常工作

> ID：14935186
> 
> 赞同：0
> 
> 时间：2013-02-18T11:26:28.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试执行以下操作：

```
 <%= order.user.try(:first_name) %>
    <%= order.user.try(:last_name) %>
    <%= order.user.try(:email) %> 
```

但是，当我查看此页面的索引时，这有效，数据不会出现在表中。我还查看了日志，看到正在发布相关数据

> `carts`0 毫秒）选择.* 从`carts`哪里`carts`。`id`= 8 限制 1

所以我或者尝试做

```
 <%= order.user.first_name %>
    <%= order.user.last_name %>
    <%= order.user.email %> 
```

这样做导致

```
NoMethodError in Orders#index

Showing C:/Users/sites/e-smart/app/views/orders/index.html.erb where line #18 raised:

undefined method `first_name' for nil:NilClass 
```

我知道这个错误的结果是因为`first_name`是空的。

获取数据的最佳方法是什么。

**订单.rb**

```
class Order < ActiveRecord::Base
  attr_accessible :address, :card_expires_on, :card_type, :ip_address, :card_number, :first_mame, :last_name, :email, :quantity
  belongs_to :cart 
  has_many :line_items, :dependent => :destroy   
  belongs_to :user 
```

**用户.rb**

```
class User < ActiveRecord::Base

  has_and_belongs_to_many :roles
  has_many :role_users
  has_many :orders 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:37:03.297

你是说：

> 我了解此错误的结果是因为 first_name 为空。

这是不正确的。错误的原因是用户为零。这也符合行为或`try()`返回-blank-。

确保您有一个正确填写用户的订单。这意味着您的订单表必须有一个 user_id 并且必须正确分配用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:33:55.397

你在这里比较两个不同的东西 -`try`在你看来它工作正常，当你在 nil 上调用它时它返回 nil （`undefined method 'first_name' for nil:NilClass`是因为 order.user 是 nil，而不是因为`first_name`它是 nil。

这与您的 POST 无关 - 您在这里尝试解决的实际问题是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:41:02.767

让我先澄清一下这个错误的含义。

```
 NoMethodError in Orders#index

  Showing C:/Users/sites/e-smart/app/views/orders/index.html.erb where line #18 raised:

  undefined method `first_name' for nil:NilClass 
```

上述错误并不意味着user 的**first_name**为空，而是 user 对象本身为**nil**。这意味着，您的 @order.user 为**nil**而不是**@order.user.first_name**为空。

**因此，如果有与订单关联的用户**，则 order.user.try(:first_name) 应该被读取为打印下订单的用户的名字，否则什么都不做，但不抛出任何错误

 **The parameters in the form are being sent properly to your controller and may be you are missing something in the controller that associates the order and user records. Look into the controller action that is saving the object and make sure you are associating order and user properly.

Hope this helps**

# doxygen - 如何在 Ubuntu (12.04) 上使用 make 文件卸载 doxygen？

> ID：14935189
> 
> 赞同：2
> 
> 时间：2013-02-18T11:26:36.623
> 
> 标签：doxygen

我正在使用 Ubuntu 12.04。我已经使用 make install 安装了 doxygen 1.8.3.1。我想卸载 make 构建的 doxygen，但我没有找到任何使用 make 的方法（卸载或清理......）。在 Makefile 中没有提到卸载它的软件。:( 不幸的是，我无法使用 sudo apt-get remove doxygen，因为它没有安装。:( 我在互联网上找不到任何相关的东西。有人可以帮助我吗？

提前谢谢你，法比奥拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:40:48.450

没有“卸载”目标。你需要做一个“rm”。如果您使用标准前缀路径“/usr/local”，那么

```
rm /usr/local/bin/doxygen
rm /usr/local/man/man.1/doxygen.1 
```

（如果您安装文档是向导，则更多）。取决于用于安装的用户，您需要 sudo 来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-01T13:06:18.810

我知道这个问题很老，但由于它是谷歌的第一个结果，我想分享另一种卸载从源代码构建的 Doxygen 的方法。在您运行的构建目录中，`make`文件名应该是`install_manifest.txt`. 该文件包含使用`make install`命令安装的文件的路径。您需要做的就是运行以下命令：

```
sudo xargs rm < install_manifest.txt 
```

当然，这假设您保留了构建目录或至少保留了`install_manifest.txt`文件。如果不是，您需要按照有人已经建议的方式手动删除文件。

# jquery - 向 DOM 添加数据属性

> ID：14935191
> 
> 赞同：193
> 
> 时间：2013-02-18T11:26:43.873
> 
> 标签：jquery, html, custom-data-attribute

```
$('div').data('info', 1);

alert($('div').data('info'));
//this works    

$('div[data-info="1"]').text('222');
//but this don't work 
```

我在 jquery 中创建元素。之后，我想添加属性“数据”。他喜欢并被添加，但在 DOM 中，这并不明显，我无法获取该项目，使用

```
$('div[data-example="example"]').html() 
```

[**jsfiddle**](http://jsfiddle.net/jRFnV/)

* * *

## 回答 #1

> 赞同：489
> 
> 时间：2013-02-18T11:28:35.803

使用`.data()`方法：

```
$('div').data('info', '222'); 
```

请注意，这不会创建实际`data-info`属性。如果您需要创建属性，请使用`.attr()`：

```
$('div').attr('data-info', '222'); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-02-07T00:02:34.227

jQuery 的 .data() 做了几件事，但它不会将数据作为属性添加到 DOM。当使用它来获取数据属性时，它所做的第一件事就是创建一个 jQuery 数据对象并将对象的值设置为数据属性。之后，它基本上与数据属性分离。

例子：

```
<div data-foo="bar"></div> 
```

如果您使用 获取属性的值`.data('foo')`，它将返回“bar”，如您所料。如果您随后使用更改属性`.attr('data-foo', 'blah')`，然后再使用`.data('foo')`来获取值，即使 DOM 显示 . 它也会返回“bar” `data-foo="blah"`。如果您使用`.data()`设置值，它将更改 jQuery 对象中的值，但不会更改 DOM 中的值。

基本上，`.data()`用于设置或检查 jQuery 对象的数据值。如果您正在检查它并且它还没有，它会根据 DOM 中的数据属性创建值。`.attr()`用于设置或检查 DOM 元素的属性值，不会触及 jQuery 数据值。如果您需要同时更改它们，则应同时使用`.data()`和`.attr()`。否则，坚持一个或另一个。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-02-08T17:31:12.497

在 Jquery “**数据**”默认情况下不刷新：

```
alert($('#outer').html());
var a = $('#mydiv').data('myval'); //getter
$('#mydiv').data("myval","20"); //setter
alert($('#outer').html()); 
```

您将使用“ **attr** ”代替实时更新：

```
alert($('#outer').html());
var a = $('#mydiv').data('myval'); //getter
$('#mydiv').attr("data-myval","20"); //setter
alert($('#outer').html()); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-26T09:58:16.937

```
 $(document.createElement("img")).attr({
                src: 'https://graph.facebook.com/'+friend.id+'/picture',
                title: friend.name ,
                'data-friend-id':friend.id,
                'data-friend-name':friend.name
            }).appendTo(divContainer); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-07T00:13:08.313

使用`.data()`只会将数据添加到该元素的 jQuery 对象。为了将信息添加到元素本身，您需要使用 jQuery`.attr`或本机访问该元素`.setAttribute`

```
$('div').attr('data-info', 1);
$('div')[0].setAttribute('data-info',1); 
```

为了*访问*具有属性集的元素，您可以简单地根据您在帖子中注释的属性进行选择（`$('div[data-info="1"]')`），但是当您使用时，`.data()`您不能。为了根据`.data()`设置进行选择，您需要使用 jQuery 的过滤器功能。

***[`jsFiddle Demo`](http://jsfiddle.net/1g7pgppt/)***

```
$('div').data('info', 1);
//alert($('div').data('info'));//1

$('div').filter(function(){
   return $(this).data('info') == 1; 
}).text('222');
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div>1</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-01T17:25:22.540

从 a 中获取文本

```
<option value="1" data-sigla="AC">Acre</option>

uf = $("#selectestado option:selected").attr('data-sigla'); 
```

# c++ - 在多线程 c++0x11 程序中使用 zmq::poll 并结合 cntr +x 或 kill 信号

> ID：14935202
> 
> 赞同：1
> 
> 时间：2013-02-18T11:27:04.543
> 
> 标签：c++, signals, zeromq

对于自定义服务器，我打算使用`int zmq::poll( zmq_pollitemt_t * items`, `int nitems, long timeout = -1)`. 我认为它是围绕 unix poll 函数的包装器，但包含`zmq::socket_t`在文件描述符旁边。该功能按预期工作，直到我按 ctrl+x 或`$kill my_server_pid`在终端中运行。我希望民意调查以 -1 终止或抛出包含 a和消息的 a `zmq::error_t`（派生自）。这应该表明存在中断。然后我的服务器应该优雅地处理信号并保存一些数据并关闭。`std::exception``errno``strerr`

下面我有一段代码演示了这个问题。首先我展示一下我的环境以及我是如何编译它的：

```
 mja@gijs:~/Desktop/sample_programs/zeromq/poll$ g++ -v
    Using built-in specs.
    COLLECT_GCC=g++
    COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
    Target: x86_64-linux-gnu
    Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro      4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
    Thread model: posix
    gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
    mja@gijs:~/Desktop/sample_programs/zeromq/poll$ pkg-config --modversion `enter code here`libzmq
    2.2.0
    mja@gijs:~/Desktop/sample_programs/zeromq/poll$ g++ -pthread -std=c++0x -Wall -Wextra -pedantic -o poll polling.cpp $(pkg-config --cflags --libs libzmq )
    mja@gijs:~/Desktop/sample_programs/zeromq/poll$ 
```

现在是 polling.cpp 的代码：

```
#include <zmq.hpp>
#include <thread>
#include <cstdlib>
#include <string>
#include <iostream>
#include <signal.h>

const char* bind_addres = "tcp://*:2345";
const char* connect_addres = "tcp://localhost:2345";

inline void
send_str( zmq::socket_t& sock, const std::string& s) throw (zmq::error_t) {
    zmq::message_t msg ( s.size() );
    memcpy( msg.data(), s.c_str(), msg.size() );
    sock.send( msg );
}

inline void recv_str( zmq::socket_t& sock, std::string& s) throw( zmq::error_t) {
    zmq::message_t msg;
    sock.recv(&msg);
    s = std::string( static_cast<const char*>(msg.data()), msg.size());
}
static int interrupted = 0;

static void handle_signal ( int signal ) 
{
    interrupted = signal;
    std::cerr << "Interrupted by signal: " << signal << std::endl;
}

void catch_signals (void) 
{
    struct sigaction action;
    action.sa_handler = handle_signal;
    action.sa_flags = 0;
    sigemptyset(&action.sa_mask);

    sigaction(SIGINT,  &action, NULL);
    sigaction(SIGTERM, &action, NULL);
}

int get_interrupted(void)
{
    std::cout << "interrupted = " << interrupted << std::endl;
    return interrupted;
}

void req_thread ( zmq::context_t* c ){

    zmq::socket_t sock( *c, ZMQ_REQ);
    sock.connect(connect_addres);

    zmq::pollitem_t items[]{
        { sock, 0, ZMQ_POLLIN, 0}
    };

    while (true){
        try {
            // zmq 3.x.x takes ms instead of us so change to eg 1000 or be patient.
            int rc = zmq::poll(items, 1, 1000000);
            if (rc > 0){
                if ( items[0].revents & ZMQ_POLLIN){
                    std::string s;
                    recv_str(sock, s);
                    std::cout << s << std::endl;
                }
            }
            else if ( rc == 0){ //timeout
                send_str( sock, "Hello");
            }
            else{
                std::cout << __func__ << " " << __LINE__ << get_interrupted() << std::endl;
            }
        }
        catch( zmq::error_t& e ){
            std::cout << __func__ << " " << __LINE__ << e.what() << std::endl;
        }
    }
}

void rep_thread ( zmq::context_t* c ){

    zmq::socket_t sock( *c, ZMQ_REP);
    sock.bind(bind_addres);

    zmq::pollitem_t items[]{
        { sock, 0, ZMQ_POLLIN, 0}
    };

    while (true){
        try{
            int rc = zmq::poll(items, 1 , -1);
            if (rc > 0){
                if ( items[0].revents & ZMQ_POLLIN){
                    std::string s;
                    recv_str(sock, s);
                    s+=" world!";
                    send_str(sock, s);
                }
            }
            else{
                std::cout << __func__ << " " << __LINE__ << get_interrupted() << std::endl;
            }
        }
        catch( zmq::error_t& e ){
            std::cout << __func__ << " " << __LINE__ << e.what() << std::endl;
        }
    }
}

int main(){

    zmq::context_t context(1);
    catch_signals();

    std::thread t1 ( rep_thread, &context);
    std::thread t2 ( req_thread, &context);

    t1.join();
    t2.join();

    return 0;
} 
```

最后我展示了一些示例输出，说明我的问题`zmq_poll`似乎不受在终端中按 ctrl+c 的影响：

```
 mja@gijs:~/Desktop/sample_programs/zeromq/poll$ ./poll 
    Hello world!
    Hello world!
    Hello world!
    ^CInterrupted by signal: 2
    Hello world!
    Hello world!
    ^Z
    [1]+  Stopped                 ./poll
    mja@gijs:~/Desktop/sample_programs/zeromq/poll$ kill -9 %1

    [1]+  Stopped                 ./poll
    mja@gijs:~/Desktop/sample_programs/zeromq/poll$ 
```

所以这里可以通过终端上的输出看到没有 zmq::error_t 被抛出， zmq::poll() 也没有返回 -1；

它应该如何工作在下一个示例 simple_poll.cpp 中可以看到一个 zmq::error_t 被抛出：

```
#include<zmq.hpp>
#include<signal.h>
#include<iostream>

static int interrupted = 0;

static void handle_signal ( int signal ) 
{
    interrupted = signal;
    /*just to show that the signal handler works*/
    std::cerr << "Interrupted by signal: " << signal << std::endl;
}

void catch_signals (void) 
{
    struct sigaction action;
    action.sa_handler = handle_signal;
    action.sa_flags = 0;
    sigemptyset(&action.sa_mask);

    sigaction(SIGINT,  &action, NULL);
    sigaction(SIGTERM, &action, NULL);
}

using namespace std;

int main(){

    zmq::context_t context(1);
    catch_signals();
    zmq::socket_t sock( context, ZMQ_REP );
    /*listen on port 2346 on all available interfaces.*/
    sock.bind("tcp://*:2346");

    zmq::pollitem_t items[] = {
        {sock, 0 , ZMQ_POLLIN, 0}
    };

    try {
        /*wait for a event*/
        zmq::poll( items, 1, -1);
        /*for zmq users read message and respond*/
    }
    catch (zmq::error_t& e){
        cout << "error occured: " <<e.what() << endl;
        cout << "We were interrupted by: " << interrupted << endl;
    }
    return 0;
} 
```

这会在终端中的 ctrl+x 上产生以下结果，表明 zmq::error_t 已被捕获并且信号已被处理。

```
mja@gijs:~/Desktop/sample_programs/zeromq/poll$ ./simple_poll ^CInterrupted by signal: 2
error occured: Interrupted system call
We were interrupted by: 2
mja@gijs:~/Desktop/sample_programs/zeromq/poll$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:37:37.383

你有一个信号处理程序——但你没有在其中做任何事情。在您的处理程序中，中断轮询循环（而不是`true`检查您在信号处理程序中设置的某些条件。）

假设您使用的是 c++11，请尝试类似..

```
// Global which indicates that we are running..
std::atomic<bool> running = true;

// In your handler - reset this flag
static void handle_signal ( int signal ) {
  running = false;
} 
```

现在你的循环变成：

```
while (running)
{
:
} 
```

# xslt - xslt 1.0 更新正确的标题

> ID：14935203
> 
> 赞同：1
> 
> 时间：2013-02-18T11:27:04.927
> 
> 标签：xslt, xslt-1.0

下面给出了我的请求 XML，还给出了我正在使用的 XSLT 转换。

不幸的是，该`ordertotal`元素在转换后重复了两次。**如何更新`ordertotal`元素而不是重复它？**

请求 XML 是

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

XSLT 是

```
<xsl:output method="xml" indent="yes" />

<xsl:template match="*|@*">
    <xsl:copy>
        <xsl:apply-templates select="*|@*" />
    </xsl:copy>
</xsl:template>

<xsl:template match="return">
    <xsl:copy>
        <xsl:copy-of select="@*|*" />
        <ordertotal><xsl:call-template name="calculate-total" /></ordertotal>
    </xsl:copy>
</xsl:template>

<!-- Recursive template -->
<xsl:template name="calculate-total">
    <!-- Select by default the set of orderDetails from the current context -->
    <xsl:param name="orderDetails"
               select="orderDetails" />
    <!-- Param which is going to keep track of the result step by step -->
    <xsl:param name="total"
               select="'0'" />

    <xsl:choose>
        <!-- If we have remaining order details, recurse -->
        <xsl:when test="$orderDetails">
            <xsl:call-template name="calculate-total">
                <!-- Remove the current element for the next step -->
                <xsl:with-param name="orderDetails"
                                select="$orderDetails[position() > 1]" />
                <!-- Do the partial operation for the current element, and continue to the next step -->
                <xsl:with-param name="total"
                                select="$total + ($orderDetails[1]/itemPrice * $orderDetails[1]/itemQty)" />
            </xsl:call-template>        
        </xsl:when>
        <!-- Output the result -->
        <xsl:otherwise>
            <xsl:value-of select="$total" />
        </xsl:otherwise>
    </xsl:choose>

</xsl:template> 
```

响应 XML 显示重复标记是

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">

         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>217</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>925</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>100</ordertotal>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:59:12.193

您必须遵循您在此处发布的问题的相同想法：[XSLT - 更新标题](https://stackoverflow.com/questions/14933792/xslt-updating-the-header)

不匹配结果，而是匹配 ordertotal 并更改 XPath 表达式以选择 orderDetails 元素。

所以，改变这个：

```
<xsl:template match="return">
    <xsl:copy>
        <xsl:copy-of select="@*|*" />
        <ordertotal><xsl:call-template name="calculate-total" /></ordertotal>
    </xsl:copy>
</xsl:template> 
```

到：

```
<xsl:template match="ordertotal">
    <xsl:copy>
        <xsl:call-template name="calculate-total">
            <xsl:with-param name="orderDetails"
                            select="../orderDetails" />
        </xsl:call-template>
    </xsl:copy>
</xsl:template> 
```

然后，您可以从计算总计模板中删除第一个参数的默认值，删除 select="orderDetails" 属性。

此外，因为您没有使用 copy-of 元素，您必须将标识模板更改为：

```
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*" /> 
    </xsl:copy>
</xsl:template> 
```

所以完整的样式表将是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="ordertotal">
        <xsl:copy>
            <xsl:call-template name="calculate-total">
                <xsl:with-param name="orderDetails"
                                select="../orderDetails" />
            </xsl:call-template>
        </xsl:copy>
    </xsl:template>

    <xsl:template name="calculate-total">
        <xsl:param name="orderDetails" />
        <xsl:param name="total"
                   select="'0'" />

        <xsl:choose>
            <xsl:when test="$orderDetails">
                <xsl:call-template name="calculate-total">
                    <xsl:with-param name="orderDetails"
                                    select="$orderDetails[position() > 1]" />
                    <xsl:with-param name="total"
                                    select="$total + ($orderDetails[1]/itemPrice * $orderDetails[1]/itemQty)" />
                </xsl:call-template>        
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$total" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

# c# - 从 asp.net 中的数据库中检索图像

> ID：14935205
> 
> 赞同：11
> 
> 时间：2013-02-18T11:27:16.033
> 
> 标签：c#, asp.net, sql-server, httphandler

如何使用 c# 从 asp.net 中的 sql 数据库中检索图像。

我想从数据库中检索图像文件，然后在标签中显示图像。

我试试这段代码，但它不工作

## aspx

```
 <asp:Image ID="Image1" runat="server" ImageUrl="" Height="150px" Width="165px" /> 
```

## 后面的代码

```
 Byte[] bytes = (Byte[])ds.Tables[0].Rows[0]["image"];
 Response.Buffer = true;
 Response.Charset = "";
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
 Response.ContentType = "image/jpg";
 Response.BinaryWrite(bytes);
 Response.Flush();
 Response.End(); 
```

如何给`ImageUrl=""`这个图片的链接？？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T12:05:02.723

创建`generic http handler`如下

```
using System;
using System.Configuration;
using System.Web;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class ShowImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
       Int32 empno;
       if (context.Request.QueryString["id"] != null)
          empno = Convert.ToInt32(context.Request.QueryString["id"]);
       else
          throw new ArgumentException("No parameter specified");

       context.Response.ContentType = "image/jpeg";
       Stream strm = ShowEmpImage(empno);
       byte[] buffer = new byte[4096];
       int byteSeq = strm.Read(buffer, 0, 4096);

       while (byteSeq > 0)
       {
           context.Response.OutputStream.Write(buffer, 0, byteSeq);
           byteSeq = strm.Read(buffer, 0, 4096);
       }       
       //context.Response.BinaryWrite(buffer);
    }

    public Stream ShowEmpImage(int empno)
    {
         string conn = ConfigurationManager.ConnectionStrings["EmployeeConnString"].ConnectionString;
         SqlConnection connection = new SqlConnection(conn);
         string sql = "SELECT empimg FROM EmpDetails WHERE empid = @ID";
         SqlCommand cmd = new SqlCommand(sql,connection);
         cmd.CommandType = CommandType.Text;
         cmd.Parameters.AddWithValue("@ID", empno);
         connection.Open();
         object img = cmd.ExecuteScalar();
         try
        {
            return new MemoryStream((byte[])img);
        }
        catch
        {
            return null;
        }
        finally
       {
            connection.Close();
       }
    }

    public bool IsReusable
    {
        get
        {
             return false;
        }
    }

} 
```

并显示如下图像

```
 Image1.ImageUrl = "~/ShowImage.ashx?id=" + id; 
```

下面有一些链接
[在数据库中的 GridView 中显示图像？](https://stackoverflow.com/questions/13432381/showing-image-in-gridview-from-the-database)
[如何在 Asp.net 的图像控件中显示数据库中的图像？](https://stackoverflow.com/questions/2482104/how-to-show-a-image-in-database-in-the-image-control-of-asp-net)[使用 C# http://www.dotnetcurry.com/ShowArticle.aspx?ID=129](http://www.dotnetcurry.com/ShowArticle.aspx?ID=129)
[在 ASP.net 中显示数据库中的图像](https://stackoverflow.com/questions/6987433/display-image-from-database-in-asp-net-with-c-sharp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T11:41:42.777

我不认为这是正确的方法。您不应该将图像嵌入到 html 中，无论如何这不是正确的方法。

我建议添加一个 ashx （通用处理程序）并使用它从查询字符串生成图像，然后 ini 页面使用类似

```
<asp:Image ImageUrl='GetImage.ashx?id=12345' ... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T08:23:56.990

[![使用实体框架](../Images/8377bac0d63f3b81149f439e2c286944.png)](https://i.stack.imgur.com/tfR8d.png)

[使用 SQL（代码项目）](https://www.codeproject.com/Questions/1183317/How-to-display-image-on-aspx-page-from-database-in)

```
<asp:Image ID="ImgProfilePic" runat="server"  />

    byte[] imagem = (byte[])(dr["IMG"]);
string PROFILE_PIC = Convert.ToBase64String(imagem);
ImgProfilePic.ImageUrl = String.Format("data:image/jpg;base64,{0}", PROFILE_PIC); 
```

# algorithm - 查找两列之间的方程式

> ID：14935208
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:27:37.167
> 
> 标签：algorithm

我有一个表格作为 **输入**

```
A B 
3 20
5 30
6 35 
```

我需要一个算法来找出与 A 和 B 两列相关的公式（方程式）

**输出**

```
B=(A+1)*5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:39:25.480

一种相对简单的方法是对各种曲线族使用最小二乘曲线拟合（例如，最多 n-2 次的多项式、指数、幂律）并寻找具有最小残差的曲线。这会给你近似的公式（除非你只接受零残差的曲线），但也许这对你的应用程序没问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:49:25.790

**假设您想要的公式是多项式。**

我们知道什么？对于 A 值的列表，我们有它们的 B 值。对于“n”个 A 值，我们能找到的最佳多项式是 (n-1) 次。为什么？

基本上我正在解决一个线性系统，如下所示：

```
x + Ay + (A^2)z = B 
```

举个例子：

```
x + 3y + 9z = 20
x + 5y + 25z = 30
x + 6y + 35z = 35 
```

解决这个问题后，我们可以发现 (x, y, z) = (5, 5, 0)。这意味着我们的多项式是 5 + 5A + 0(A^2)，这与您在示例中显示的 B = (A+1)*5 基本相同。

我们可以用任何方法解决这个系统。不知道它是否会有所帮助，但我会在这里抛出一些代码来用高斯消除（在 Python 中）来解决它：

```
def solve(A, B):
    n = len(A)
    M = [[a**i for i in range(n)]+[b] for a,b in zip(A,B)]

    for i in range(n):
        M[i] = [x / M[i][i] for x in M[i]]

        for j in range(n):
            if j==i: continue
            M[j] = [xj - xi * M[j][i] for xi, xj in zip(M[i], M[j])]

    return [M[i][-1] for i in range(n)]

print solve([3,5,6], [20, 30, 35]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T11:38:03.607

如果公式是示例中的一阶线性，那么您正在寻找：

[http://en.wikipedia.org/wiki/Linear_regression](http://en.wikipedia.org/wiki/Linear_regression)

或者这个对于高阶线性方程

[http://en.wikipedia.org/wiki/Polynomial_regression](http://en.wikipedia.org/wiki/Polynomial_regression)

# ant - Ant 找不到 XML 目录解析器

> ID：14935209
> 
> 赞同：2
> 
> 时间：2013-02-18T11:27:40.123
> 
> 标签：ant, apache-commons

我的 Ant 1.8.2 构建开始失败，来自 W3C 网站的 HTTP 303 响应以响应对 SVG DTD 的请求。所以我试图引入一个 XML 目录来在本地解决它们。

如果我不更改类路径，我会得到：

警告：未找到 XML 解析器；外部目录将被忽略

如果我将 Apache XML Commons 1.2 中的 resolver.jar 添加到类路径中（例如，通过在 ant 调用上使用 -lib），我会得到

/Users/mike/../build.xml:123: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.tools.ant.types.XMLCatalog$ExternalResolver.processExternalCatalogs(XMLCatalog .java:1115) 在 org.apache.tools.ant.types.XMLCatalog$ExternalResolver.resolveEntity(XMLCatalog.java:960) 在 org.apache.tools.ant.types.XMLCatalog.resolveEntity(XMLCatalog.java:391)

这向我表明我正在使用的 resolver.jar 已经找到，但没有 Ant 所期望的接口。

我应该从哪里获得与 Ant 一起使用的正确 resolver.jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:21:09.287

我找到了解决方案（嗯，一种解决方法......）

InvocationTargetException 原来是一个红鲱鱼 - 一个次要错误。主要错误如下：我的目录文件catalog.xml 包含对DTD catalog.dtd 的相对引用，而Ant（或解析器）未能解析对catalog.dtd 的引用。它正在查找包含我的构建文件的目录，而不是包含目录的目录。这显然是某个地方的错误；如果我进一步调查，我的怀疑是 Ant 将目录文件传递给目录解析器而没有基本 URI，或者使用不正确的基本 URI，因此 XML 解析器必须猜测在哪里可以找到 DTD，并且猜测错误.

我的解决方案是删除对 DTD 的引用。在此之后，目录中列出的 URI 被正确解析为本地副本。有趣的是，对本地副本的引用也是相对于目录的，所以目录解析器似乎知道目录在哪里，但在解析它时没有人告诉 Xerces。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T08:52:39.520

我有同样的问题，但对我来说，从 Ant 1.8.1 升级到 1.9.4 解决了这个问题。

我的猜测是根本原因是[错误 52754](https://bz.apache.org/bugzilla/show_bug.cgi?id=52754)。

**编辑**：使用JDK 1.6.0_18，同样的问题以稍微不同的形式重新出现，堆栈跟踪如下：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.types.XMLCatalog$ExternalResolver.processExternalCatalogs(XMLCatalog.java:1116)
    at org.apache.tools.ant.types.XMLCatalog$ExternalResolver.resolve(XMLCatalog.java:1007)
    at org.apache.tools.ant.types.XMLCatalog.resolve(XMLCatalog.java:420)
    at net.sf.saxon.style.XSLGeneralIncorporate.getIncludedStylesheet(XSLGeneralIncorporate.java:104)
    at net.sf.saxon.style.XSLStylesheet.spliceIncludes(XSLStylesheet.java:754)
    at net.sf.saxon.style.XSLStylesheet.preprocess(XSLStylesheet.java:676)
    at net.sf.saxon.PreparedStylesheet.setStylesheetDocument(PreparedStylesheet.java:331)
    at net.sf.saxon.PreparedStylesheet.prepare(PreparedStylesheet.java:163)
    at net.sf.saxon.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:139)
    at org.apache.tools.ant.taskdefs.optional.TraXLiaison.readTemplates(TraXLiaison.java:300)
    at org.apache.tools.ant.taskdefs.optional.TraXLiaison.createTransformer(TraXLiaison.java:317)
    at org.apache.tools.ant.taskdefs.optional.TraXLiaison.transform(TraXLiaison.java:178)
    at org.apache.tools.ant.taskdefs.XSLTProcess.process(XSLTProcess.java:842)
    at org.apache.tools.ant.taskdefs.XSLTProcess.execute(XSLTProcess.java:432)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:435)
    at org.apache.tools.ant.Target.performTasks(Target.java:456)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
    at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
    at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:441)
    at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:435)
    at org.apache.tools.ant.Target.performTasks(Target.java:456)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
    at org.apache.tools.ant.Main.runBuild(Main.java:851)
    at org.apache.tools.ant.Main.startAnt(Main.java:235)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1937)
    at java.lang.String.substring(String.java:1904)
    at org.apache.xml.resolver.helpers.PublicId.normalize(Unknown Source)
    at org.apache.xml.resolver.Catalog.addEntry(Unknown Source)
    at org.apache.tools.ant.types.resolver.ApacheCatalog.addEntry(ApacheCatalog.java:118)
    at org.apache.xml.resolver.readers.OASISXMLCatalogReader.startElement(Unknown Source)
    at org.apache.xml.resolver.readers.SAXCatalogReader.startElement(Unknown Source)
    at org.apache.xml.resolver.readers.SAXParserHandler.startElement(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at org.apache.xml.resolver.readers.SAXCatalogReader.readCatalog(Unknown Source)
    at org.apache.xml.resolver.Catalog.parseCatalogFile(Unknown Source)
    at org.apache.xml.resolver.Catalog.parsePendingCatalogs(Unknown Source)
    at org.apache.xml.resolver.Catalog.parseCatalog(Unknown Source)
    at org.apache.tools.ant.types.resolver.ApacheCatalogResolver.parseCatalog(ApacheCatalogResolver.java:118)
 ... 47 more 
```

有趣的是，该错误只发生在 Windows 上，而且只是偶尔发生，可能七次左右出现一次。

该错误源于Apache Resolver 库中类的[`normalize`函数。](http://grepcode.com/file/repository.springsource.com/org.apache.xml/com.springsource.org.apache.xml.resolver/1.2.0/org/apache/xml/resolver/helpers/PublicId.java#57)`PublicId`

`normal.indexOf(" ")`有时会返回错误的值。例如，如果输入字符串是`-//OASIS//ELEMENTS DITA 1.x Programming Domain//EN`，则`pos`变量将`50`作为其值，即使公共 ID 字符串没有任何额外的空格。

这使我认为根本原因可能与[JDK 错误 #6967156 有关](http://bugs.java.com/view_bug.do?bug_id=6967156)，但我完全不能确定，因为在我们的案例中，错误是间歇性的，但错误报告中没有任何迹象表明这一点。

# jquery - 多个谷歌地图 iframe 性能问题？

> ID：14935213
> 
> 赞同：0
> 
> 时间：2013-02-18T11:27:47.103
> 
> 标签：jquery, performance, google-maps

在我的页面上，我有 12 个谷歌地图，你可以猜到这会大大减慢我的页面加载时间，因为它会分别调用 12 次来加载每个地图，有没有人可以加快速度的解决方案？

我能想到的只是摆脱地图并使用链接到谷歌地图本身的图像，我真的不想这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:41:10.830

您最初可以使用“空”iframe（没有 src 属性）并将 src 分配给位于`$(document).ready()`or的 iframe `$(window).load()`。

# sql - 过滤 GROUP BY 视图，如 HAVING

> ID：14935223
> 
> 赞同：1
> 
> 时间：2013-02-18T11:28:12.403
> 
> 标签：sql

我有一个这样的表销售：

```
CLIENT, PRODUCT, SALEDATE
Peter, Phone, 2013/02/01
Peter, Phone, 2012/11/15
Peter, Phone, 2010/01/01 
```

我有这个名为 LastSale 的视图：

```
SELECT Client, Product, MAX(SaleDate)
FROM Sales
GROUP BY Client, Product 
```

如果我们执行这个视图，结果一定是

```
Peter, Phone, 2013/02/01 
```

现在我的问题是我在 SaleDate 过滤的程序中使用了这个视图，例如：

```
SELECT *
FROM LastSale
WHERE SaleDate < '2013/01/01' 
```

这个 SQL 没有给我任何结果，因为 MAX(SaleDate) 不是 < '2013/01/01'，但有一个日期符合请求 (2012/11/15)。

我知道这可以通过视图中的 HAVING 子句来完成，但是在我的程序中我正在访问视图，所以我无法更改它。有什么办法可以得到我想要的结果？

在此先感谢，并原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:35:59.747

如果我做对了，您应该从原始表中选择，而不是从视图中选择：

```
SELECT *
FROM Sales
WHERE SaleDate < '2013/01/01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:44:45.810

如果您使用 MAX(salesdate) 它会自动为您提供最大值（1 行）

试试这个

```
 SELECT Client, Product,SaleDate
    FROM Sales
    WHERE SaleDate < '2013-01-01' 
```

[**在这里演示**](http://sqlfiddle.com/#!2/52cc8f/2)

如果你想分组`Client`然后试试这个给不同的客户

```
 SELECT Client, Product,SaleDate
 FROM Sales
 WHERE SaleDate < '2013-01-01'
 group by Client 
```

[**在这里演示**](http://sqlfiddle.com/#!2/52cc8f/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:42:45.027

您需要针对原始表的新请求，因为视图不符合条件。首先是 WHERE 子句，然后是 GROUP BY

```
SELECT Client, Product, MAX(SaleDate)
FROM LastSale
WHERE SaleDate < '2013/01/01'
GROUP BY Client, Product 
```

# arrays - 数组中选中的 as3 复选框

> ID：14935232
> 
> 赞同：0
> 
> 时间：2013-02-18T11:28:48.717
> 
> 标签：arrays, actionscript-3, checkbox, selected

我在数组中有 20 个复选框，而不是标记所有复选框。并且有3个动态文本。所有复选框启用为真。我希望，如果选择了任何复选框，则第一个文本字段选择的复选框名称写入。第二个和第三个选择同样的第二个和第三个文本文件写入。end of 17 复选框以启用 false

```
 import fl.controls.CheckBox;
   var arr:Array = [cb1,cb2,cb3,cb4,cb5,cb6,cb7,cb8,cb9,cb10,......]; //20 Checkbox

   // how do I find i = selected checkbox in array    

   i.addEventListener(MouseEvent.CLICK,myselect);
   function myselect(e:MouseEvent):void{
    trace(i.name);
       if (i.selected==true){
       yaz.text="Select"+" "+i.name;
}else {yaz.text="";}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:20:57.363

我认为您需要（文档类）：

```
package  {

    import fl.controls.CheckBox;
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import fl.controls.Label;

    public class Test extends Sprite {

        public var cbBox:Sprite;
        public var tfBox:Sprite;

        public function Test() {
            init();
        }

        public function init()
        {
            cbBox = new Sprite();
            cbBox.x = 10;
            addChild(cbBox);

            tfBox = new Sprite();
            tfBox.x = 200;
            addChild(tfBox);

            for (var i:uint=0; i<20; i++)
            {
                var cb:CheckBox = new CheckBox();
                cb.addEventListener(MouseEvent.CLICK, onClickHandler);
                cb.label = (i + 1).toString();
                cb.y = i* 20;
                cbBox.addChild(cb);
            }
        }

        public function onClickHandler(event:MouseEvent):void
        {
            if (tfBox.numChildren < 3)
            {
                var label:Label = new Label();
                label.width = 200;
                label.height = 20;
                label.y = tfBox.numChildren * 20;
                label.text = CheckBox(event.target).label;
                tfBox.addChild(label);
            }

            if (tfBox.numChildren == 3)
            {
                for (var i:uint = 0; i< cbBox.numChildren; i++)
                {
                    var ch:CheckBox = cbBox.getChildAt(i) as CheckBox;
                    if (!ch.selected) ch.enabled = false;
                }
            }
        }
    }
} 
```

# ios - 检查一个数组是否包含另一个数组的相同对象的最快方法

> ID：14935233
> 
> 赞同：25
> 
> 时间：2013-02-18T11:28:50.050
> 
> 标签：ios, objective-c, nsarray, fast-enumeration

目标是比较两个数组并检查它们是否包含相同的对象（尽可能快 - 数组中有很多对象）。无法检查数组，`isEqual:`因为它们的排序方式不同。

我已经尝试过此处发布的解决方案（[https://stackoverflow.com/a/1138417](https://stackoverflow.com/a/1138417) - 请参阅 Peter Hosey 的帖子的最后一个代码片段）。但这不适用于不同排序的数组。

我现在使用的代码如下：

```
+ (BOOL)arraysContainSameObjects:(NSArray *)array1 andOtherArray:(NSArray *)array2 {
    // quit if array count is different
    if ([array1 count] != [array2 count]) return NO;

    BOOL bothArraysContainTheSameObjects = YES;
    for (id objectInArray1 in array1) {
        BOOL objectFoundInArray2 = NO;
        for (id objectInArray2 in array2) {
            if ([objectInArray1 isEqual:objectInArray2]) {
                objectFoundInArray2 = YES;
                break;
            }
        }
        if (!objectFoundInArray2) {
            bothArraysContainTheSameObjects = NO;
            break;
        }
    }

    return bothArraysContainTheSameObjects;
} 
```

这可行，但这是两个嵌套的快速枚举。有没有办法进行更快的比较？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-18T11:45:57.577

根据您的代码，您对相同数量的元素是严格的，并且第一个数组的每个对象都应该在第二个数组中，反之亦然。

最快的方法是对数组进行排序并进行比较。

前任：

```
NSArray *array1=@[@"a",@"b",@"c"];
NSArray *array2=@[@"c",@"b",@"a"];

array1=[array1 sortedArrayUsingSelector:@selector(compare:)];
array2=[array2 sortedArrayUsingSelector:@selector(compare:)];

if ([array1 isEqualToArray:array2]) {
    NSLog(@"both have same elements");
}
else{
    NSLog(@"both having different elements");
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-18T11:36:31.537

如何将两个数组转换为集合并进行比较。

```
NSSet *set1 = [NSSet setWithArray:arr1];
NSSet *set2 = [NSSet setWithArray:arr2]; 
```

比较两者使用

```
if([set1 isEqualToSet:set2]) {

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T11:45:11.200

使用 containsObject: 方法而不是迭代整个数组。

```
NSArray *array;
array = [NSArray arrayWithObjects: @"Nicola", @"Margherita",                                       @"Luciano", @"Silvia", nil];
if ([array containsObject: @"Nicola"]) // YES
  {
    // Do something
  } 
```

像这样

```
+ (BOOL)arraysContainSameObjects:(NSArray *)array1 andOtherArray:(NSArray *)array2 {
    // quit if array count is different
    if ([array1 count] != [array2 count]) return NO;

    BOOL bothArraysContainTheSameObjects = YES;

    for (id objectInArray1 in array1) {

        if (![array2 containsObject:objectInArray1])
        {
            bothArraysContainTheSameObjects = NO;
            break;
        }

    }

    return bothArraysContainTheSameObjects;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-30T04:51:47.203

试图让接受的答案起作用，但它并不是最适合我的情况。

我找到[了这个答案](https://stackoverflow.com/questions/9242588/sortedarrayusingselector-what-is-it-doing)，所有的功劳都归功于该方法的@joel kravets。

基本上使用比较器进行排序使您可以更轻松地使用对象进行排序 - 因此我在尝试使用上述解决方案时遇到了问题。

```
NSArray * array1 = [NSArray arrayWithArray:users];
NSArray * array2 = [NSArray arrayWithArray:threadUsers];

id mySort = ^(BUser * user1, BUser * user2){
    return [user1.name compare:user2.name];
};

array1 = [array1 sortedArrayUsingComparator:mySort];
array2 = [array2 sortedArrayUsingComparator:mySort];

if ([array1 isEqualToArray:array2]) {
    NSLog(@"both are same");
}
else{
    NSLog(@"both are different");
} 
```

以前我曾尝试使用像上面那样的其他答案，使用 break 来遍历循环，但最后这个答案最容易出现，可能是因为它的速度，而且最后我们有 if 语句允许我们放置代码取决于如果它们相同或不同。

感谢 Anoop 让我走上正轨，感谢 Joel 帮助我提高效率

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-12T17:11:48.730

如果要检查两个数组是否包含相同的重复项，只需使用 NSCountedSet。它就像一个 NSSet，但集合中的每个对象也有一个计数，告诉你它被添加的频率。所以

```
BOOL same = (array1.count == array2.count);
if (same && array.count > 0)
{
    NSCountedSet* set1 = [[NSCountedSet alloc] initWithArray:array1];
    NSCountedSet* set2 = [[NSCountedSet alloc] initWithArray:array2];
    same = ([set1 isEqual: set2]);
} 
```

不管怎么做，都会比较费时间，所以可以考虑是否有特殊情况可以更快处理。这些数组通常是相同的，还是几乎相同的，或者它们在 99% 的情况下是不同的，并且在 99% 的情况下，array1 的随机元素不在 array2 中？数组经常排序吗？在这种情况下，您可以检查在相同位置是否有相同的对象，然后只考虑那些不相同的对象。如果一个数组包含对象 a、b、c、d、e，而另一个数组包含 a、b、x、d、y，则只需比较数组 [c, e] 与 [x, y]。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T11:36:28.963

这种方式的复杂性是 O(N^2)，如果你遵循这种方法，你就不能以较低的复杂性来做到这一点。相反，如果您对两个数组进行排序然后比较它们，则可以使用 O(N log(N)) 来完成。这样，在对它们进行排序后，您将在其他 N 操作中使用 isEqualToArray: 来完成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-18T11:39:55.063

```
[docTypes containsObject:@"Object"]; 
```

它适用于您的需求。尽快它会为它返回布尔值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-18T16:36:04.630

```
NSArray *filtered = [someArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"someParamter == %@", paramValue]]];
if (filtered.count) {

} 
```

主要优点是您可以将它用于任何类型的对象：自定义、系统、NSDictionary。例如我需要知道我的 UINavigationController 的堆栈是否包含 MySearchResultsVC 和 MyTopMenuItemsVC：

```
 NSArray *filtered = [self.navigationController.viewControllers filteredArrayUsingPredicate:
                                     [NSPredicate predicateWithFormat:@"class IN %@",
                                      [NSArray arrayWithObjects:
                                       [MySearchResultsVC class],
                                       [MyTopMenuItemsVC class],
                                       nil]]];
if (filtered) {
/* ok, now we can handle it! */
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-15T11:01:37.207

我知道已经晚了，但我只想分享我所做的..

```
NSString *stringArr1 = [NSString stringWithFormat:@"%@", array1];
NSString *stringArr2 = [NSString stringWithFormat:@"%@", array2];

if ([stringArr1 isEqual: stringArr2])
    NSLog(@"identical");
else
    NSLog(@"not"); 
```

这就像比较**"@[@1,@2,@3,@4]" == "[@3,@2,@1,@4]"** .. 这显然是错误的..

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2013-02-18T11:33:26.940

我想这会做：

```
[array1 isEqualToArray:array2]; 
```

返回布尔值；

# java - 如何在java中将字符串转换为corelabel？

> ID：14935237
> 
> 赞同：1
> 
> 时间：2013-02-18T11:29:00.873
> 
> 标签：java, casting, stanford-nlp

我正在使用`Stanford Parser`. 我收到一个错误：

> 无法将字符串解析为 Corelabel

这是一些代码：

```
List<CoreMap> sentences = annotation.get(CoreAnnotations.SentencesAnnotation.class);
for(CoreMap sentence: sentences) 
{
    CoreLabel temp=sentence.toString().replace(clust2, clust);
    sentences.set(m.sentNum-1,temp);              
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:31:20.777

你不能转换，虽然你可能可以转换，但这取决于是什么`CoreLabel`。在某些情况下，它可能是`CoreLabel coreLabel = new CoreLabel (string)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-22T19:57:29.303

以下函数存在于您可以使用的 CoreLabel.java 类下。

```
/** This is provided as a simple way to make a CoreLabel for a word from a String.
   *  It's often useful in fixup or test code. It sets all three of the Text, OriginalText,
   *  and Value annotations to the given value.
   *
   *  @param word The word string to make a CoreLabel for
   *  @return A CoreLabel for this word string
   */
  public static CoreLabel wordFromString(String word) {
    CoreLabel cl = new CoreLabel();
    cl.setWord(word);
    cl.setOriginalText(word);
    cl.setValue(word);
    return cl;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T12:06:11.627

```
public static void Parse() throws InvalidFormatException, IOException {
    // http://sourceforge.net/apps/mediawiki/opennlp/index.php?title=Parser#Training_Tool
    InputStream is = new FileInputStream("en-parser-chunking.bin");

    ParserModel model = new ParserModel(is);

    Parser parser = ParserFactory.create(model);

    String sentence = "Programcreek is a very huge and useful website.";
    Parse topParses[] = ParserTool.parseLine(sentence, parser, 1);

    for (Parse p : topParses)
        p.show();

    is.close();

    /*
     * (TOP (S (NP (NN Programcreek) ) (VP (VBZ is) (NP (DT a) (ADJP (RB
     * very) (JJ huge) (CC and) (JJ useful) ) ) ) (. website.) ) )
     */
} 
```

你可能无法转换。但这段代码对你有用

# javascript - Masonry + Infinite Scroll 和 PrettyPhoto 灯箱

> ID：14935238
> 
> 赞同：1
> 
> 时间：2013-02-18T11:29:01.123
> 
> 标签：javascript, ajax, jquery

这是一个重新发布，
我在 WordPress 博客上使用带有无限滚动插件的 Masonry 插件。我需要在这个博客上使用 PrettyPhoto 插件。PrettyPhoto 灯箱工作正常，但是当 Masonry 加载下一组帖子时（无限滚动插件在向下滚动时加载下一组帖子），PrettyPhoto 停止工作。
**注意：我使用的主题有嵌入式灯箱**
我不是 jQuery 专家，所以这里是在主题上使用的两个脚本
[https://dl.dropbox.com/u/89122367/plugins.js](https://dl.dropbox.com/u/89122367/plugins.js)
[https://dl .dropbox.com/u/89122367/scripts.js](https://dl.dropbox.com/u/89122367/scripts.js)
我需要在这个主题上使用 PrettyPhoto，需要专家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:06:16.707

它不起作用的原因是`Prettyphoto`不知道有一些新图像要“照顾”:)。上传新项目时，它们没有`Prettyphoto` `bind`. 我认为，最简单的方法是添加对 ajax 请求的检测，然后触发`Prettyphoto`新图像。

```
$(document).ajaxComplete(function() {
    $("a[rel^='prettyPhoto']").prettyPhoto(); // or any other way You use prettyPhoto
}); 
```

将 abowe 代码放在 Your page 的 head 部分，即：

```
<script>
    $(document).ajaxComplete(function() {
        $("a[rel^='prettyPhoto']").prettyPhoto(); // or any other way You use prettyPhoto
    }); 
</script> 
```

这应该可以帮助你

# php - Facebook like box 不允许来自 wordpress 网站的附加查询字符串？

> ID：14935250
> 
> 赞同：1
> 
> 时间：2013-02-18T11:29:47.810
> 
> 标签：php, wordpress, facebook-like, query-string

我无法使用 facebook api 在 facebook like box 中与我的自定义查询字符串共享 wordpress 页面。例如[http://www.example.com/?page_id=10&myquery=10](http://www.example.com/?page_id=10&myquery=10)从上面的 url 中删除点击按钮“myquery=10”后，只有我们得到“ [http://www.example.com/?page_id =10](http://www.example.com/?page_id=10) “在我的墙上。

谢谢&问候， Arunabathan.G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:13:40.723

这里的问题是您将页面设置为的规范 URL。

## 如何发现问题？

[如果您在 facebook url 调试器工具上](http://developers.facebook.com/tools/debug/og/object?q=http://breakbounce.com/lookbook/?slideID=4)查看您的 URL ，您会看到如果 url 带有查询字符串 ( [http://breakbounce.com/lookbook/?slideID=4](http://breakbounce.com/lookbook/?slideID=4) )，则获取的 URL，但规范 URL 没有有查询字符串（[http://breakbounce.com/lookbook/](http://breakbounce.com/lookbook/)）。

* * *

## 这是从哪里来的？

这个问题可能是由两个元标记引起的，要么`og:url`被定义为不同的 URL ，要么被`<link rel="canonical" ...>`定义（作为您的问题的最后一个，查看您的页面源并搜索您的代码`<link rel='canonical' href='http://breakbounce.com/lookbook/' />`）

* * *

## 如何解决？

在正常情况下，您需要更改或删除您在上一步中确定为有问题的标签。在您的情况下，您需要更改或删除`<link rel='canonical' href='http://breakbounce.com/lookbook/' />`标签。

**重要提示：**更改或删除标签后，您需要再次访问[facebook URL 调试器](http://developers.facebook.com/tools/debug)并输入您的 URL，以便从 Facebook 清除您的 url 缓存。

* * *

有什么让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T14:29:05.227

您也可以像这样修复它：

```
http://www.example.com/?page_id=10%26myquery=10 
```

**%26**等效于 & 符号。当我在查询中尝试其他参数时遇到了这个问题，这对我有用:)

# ruby - 从回溯中切断来自特定库的步骤

> ID：14935253
> 
> 赞同：1
> 
> 时间：2013-02-18T11:30:02.413
> 
> 标签：ruby, backtrace

有时，我们使用经过良好调试且通常不会导致错误的库。尽管如此，这些库仍可能由于我们滥用其 API 而返回错误。在这种情况下，这些库内部的步骤会显示在错误的回溯中，从使用库的程序员的角度来看，这只是垃圾，并且很难发现错误的原因。甚至核心 Ruby 中的一些方法也会在回溯中插入一些内部步骤。例如，每当您看到涉及 的回溯时`Enumerable#inject`，总是`Enumerable#each`会从中调用它，这会出现在回溯中并且很烦人。

1.  从回溯中删除某些给定库的内部步骤的好方法是什么？我目前正在通过解析回溯并按文件名过滤它。有更好的方法吗？

2.  当您自己编写库时，是否有一种好方法可以抑制出现在涉及使用该库的方法调用的回溯中的内部步骤？一种明显的方法可能是为要从库外部使用的每个方法插入一对`rescue`和`raise`，但这似乎不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:41:30.877

出色地...

1.  真的没有更好的过滤方法。但是，如果您可以获得回溯的完整文件路径，则可以按目录过滤，从而排除所有标准库和 gem。除此之外，它的麻烦多于它的价值。
2.  有一个更好的解决方案。但是，它要求您在库中捕获 Ruby 抛出的所有异常，然后在执行此操作后重新抛出它们（也对您自己的所有异常执行此操作）。所以用这个包装你的所有方法：

    ```
    begin
      ...
    rescue Exception
      e = $!  
      e.set_backtrace(caller(nesting_level))
      raise e
    end 
    ```

    这`nesting_level`是从该库中调用当前方法的方法的数量。如果它是直接从用户代码中调用的，则输入 0。如果它是由用户代码中调用的一种方法调用的，则输入 1，以此类推。

# sql - 使用带有 YII 框架的活动记录的多个连接

> ID：14935254
> 
> 赞同：1
> 
> 时间：2013-02-18T11:30:03.010
> 
> 标签：sql, activerecord, yii

我被 yii 的活动记录卡住了。

我为我的数据库中的每个表使用模型。

我尝试获取的 sql 是从 3 个表中查询和加入。

我想要完成的是相当于 sql 命令：

```
 SELECT  location_code as stopkey, bay_no bay_no, description stop_name, route_area_code route_area_code, latitude latitude, longitude, build_code build_code, message_time message_time, ip_address ip_address, route.route_code route, make make, last_impact last_impact, impact_count impact_count, last_bootup last_bootup, bootup_count bootup_count, last_active_hour last_active_hour, last_active_day last_active_day, operator.operator_code operator_code, routes routes, bearing  
                FROM snapshot_stop_status route
                JOIN  route_visibility ON route.route_id = route_visibility.route_id
                JOIN  operator ON operator.operator_id = route_visibility.operator_id
                WHERE usernm = 'me'

    ORDER BY  location_code 
```

这是我到目前为止所尝试的：

```
 public function relations() {

            return array(
              'RoutesVisibility' =>array(self::MANY_MANY,'route_visibility','route_id'),

            );
        } 
```

我如何使用模型中的关系函数来实现这一点？

任何形式的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:16:11.410

route_visibility 是将 operator 绑定到 snapshot_stop_status 的连接表。因此，在 yii 中，您可以指定执行关系的表：

```
'operators' =>array(self::MANY_MANY,'Operator','route_visibility(route_id,operator_id )'), 
```

在运算符中：

```
'routes' =>array(self::MANY_MANY,'Route','route_visibility(operator_id, route_id)'), 
```

然后你可以请求类似的东西：

```
$criteria = new CDbCriteria;
$criteria->with = array('operators' => array('condition' => 'usernm = "me"'));
$models => Route:model()->findAll($criteria); 
```

# sql - SQL Geography Polygon lat longs 异常

> ID：14935255
> 
> 赞同：0
> 
> 时间：2013-02-18T11:30:03.910
> 
> 标签：sql, sql-server, sql-server-2012, geospatial, spatial-query

我正在尝试解析包含空间引用的 xml 文件，并且在尝试创建以下多边形时陷入停顿。

为了尝试克服这个问题，我一直在使用 SSMS 来尝试调试我的问题。

我正在使用 SQL 2012 Express。

XML 源数据

```
<Polygon>
    <Position latitude="-62" longitude="-114" />
    <Position latitude="34" longitude="-114" />
    <Position latitude="34" longitude="62" />
    <Position latitude="-62" longitude="62" />
    <Position latitude="-62" longitude="-114" />
</Polygon> 
```

SQL 查询

```
DECLARE @geom geography

SELECT @geom = geography::STGeomFromText('POLYGON((
-62 -114,
34 -114,
34 62,
-62 62,
-62 -114
    ))',4326) 
```

SQL 异常

```
Msg 6522, Level 16, State 1, Line 13
A .NET Framework error occurred during execution of user-defined routine or aggregate     "geography": 
System.FormatException: 24201: Latitude values must be between -90 and 90 degrees. 
```

非常感谢亚当的任何信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:50:08.237

根据微软的示例代码，顺序显然是经度，纬度，而你交换了那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:10:52.967

正确的。我以错误的顺序输入这些。

谢谢大家！！

# php - 使用 strpos 比较 PHP 阿拉伯语文本

> ID：14935259
> 
> 赞同：1
> 
> 时间：2013-02-18T11:30:09.743
> 
> 标签：php, character-encoding, arabic, string-comparison, multibyte

我在 mysql 表中有一个阿拉伯语关键字，例如

```
 *#1591; *#1610; *#1585;*#1575;*#1606 
```

// 请考虑 & 代替 * ，带有 '&' 的值会自动转换为阿拉伯语。

Mysql表编码：utf8_general_ci

我从外部资源示例 twitter 中获取了一些字符串。

我想将关键字与我收到的推文相匹配。

```
 $tweet = 'وينج وأداسي الاماراتية توقعان اتفاقية تعاون لتوفير أنظمة الطائرات بدون طيا';

  $keyword = '*#1591; *#1610; *#1585;*#1575;*#1606'; //From db

  $status = strpos ($tweet, $keyword) 
```

$status 总是返回 false。

我已经检查了 utf8_encode()、utf_8_decode()、mb_strpos() 没有任何运气。

我知道在比较之前需要将两个字符串都转换为一种通用格式，但是我需要转换哪种格式？

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:34:20.623

由于阿拉伯符号是使用多字节字符编码的，因此您必须使用支持这种约束的函数：[grapheme_strpos](http://php.net/grapheme_strpos)和[mb_strpos](http://php.net/mb_strpos)（按此顺序）。

使用它们而不是普通的旧 strpos 就可以了。

另外，请记住，您可能必须在使用之前检查其可用性，因为并非所有托管环境都启用了它们：

```
if (function_exists('grapheme_strpos')) {
    $pos = grapheme_strpos($tweet, $keyword);
} elseif (function_exists('mb_strpos')) {
    $pos = mb_strpos($tweet, $keyword);
} else {
    $pos = strpos($tweet, $keyword);
} 
```

最后但并非最不重要的一点是，检查文档中函数采用的不同参数，作为字符串使用的编码。

# r - read.csv2.ffdf 正在导入一个数字（浮点）变量作为因子

> ID：14935261
> 
> 赞同：0
> 
> 时间：2013-02-18T11:30:11.530
> 
> 标签：r, bigdata

我有几个星期使用 ff 包，到目前为止它工作得很好，但是今天我意识到应该是数字的变量被读取为一个因素。数据有大约 900k 行和 800 列，所以要控制每一列都得到它应该得到的类并不容易......

```
matff <- read.csv2.ffdf(file = name,encoding = "UTF-8",next.rows=150000,colClasses=NA) 
```

我想知道为什么会发生这种情况以及如何解决它的想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:18:23.513

现在它应该可以工作了：

```
# matff <- data.frame(Col=c('a','b','c'),Mix1=c('a','1.2','c'),Mix2=c(1.1,2.1,3),Num1=c('1.2','2.3','3.4'),Num2=c('1,2','2,3','3,4')) # Data example

func <- function(x) {
 if (class(x) != 'numeric') {
  x <- levels(x)[x]
  if (length(grep('[a-zA-Z]',x,invert=T)) == length(x)) { x <- as.real(gsub(',','\\.',x)) }
  else { x <- factor(x) }
 }
 x
}

for (i in 1:ncol(matff)) {
 matff[,i] <- func(matff[,i])
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:07:19.283

您的数据有一些列显然是文本，而不是您期望的数字数据。

您可以使用 transFUN 参数 read.csv2.ffdf 来解决您的小数问题。如在

```
transFUN=function(x){
  x$mycolumn <- as.numeric(gsub(",", ".", as.character(x$mycolumn)))
  x
} 
```

或者使用适当的 read.table 参数。

# java - 拆分成句子 Java

> ID：14935263
> 
> 赞同：1
> 
> 时间：2013-02-18T11:30:16.227
> 
> 标签：java, regex

我想将文本分成句子。我的文字包含`\n`介于两者之间的字符。我希望在`\n`和`.`（点）处进行拆分。我不能将`BreakIterator`其用作拆分条件，因为它是一个空格，后跟一个句点（在我要拆分的文本中，这不是必需的）。

**示例**：

```
i am a java programmer.i like coding in java. pi is 3.14\n regex not working 
```

应该输出：

```
['i am a java programmer', 'i like coding in java', 'pi is 3.14', 'regex not working'] 
```

我尝试了一个简单的正则表达式，它在`\n`or上拆分`.`：

```
[\\\\n\\.] 
```

虽然这不起作用，但单独指定有效。

```
\\\\n
\\. 
```

那么任何人都可以给出一个将分裂的正则表达式`\n`吗`.`？

另一个问题是我不想在像*5.6*这样的小数的情况下进行拆分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T11:32:53.427

这个java正则表达式应该去：

```
"\n|((?<!\\d)\\.(?!\\d))" 
```

这里的要点：

*   `\n`你永远不需要逃跑
*   点周围那些看起来很奇怪的东西是负面的环顾四周，意思是“上一个/下一个字符不能是数字

这个正则表达式说：“换行符，或者不是在数字之前或之后的文字点

仅供参考，除了括号本身之外，您不需要转义字符类中的字符（在 [] 之间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:31:48.863

用于`string.split("[\n.]")`在`\n`或处拆分`.`

在字符类中，`.`没有特殊含义。所以没有必要逃避`.`

**编辑：** `string.split("\n|[.](?<!\\d)(?!\\d)")`避免十进制数的拆分。

在这里，对于每`.`一个后视和前瞻，都可以检查两边是否有数字。如果两者都不是数字，则应用拆分。

`\n|\\.(?!\\d)|(?<!\\d)\\.`避免`.`在两边用数字分开。

`\n|(?<!\\d)[.](?!\\d)`如果任何一侧有数字，则避免拆分

所以**你需要的可能是**

```
string.split("\n|\\.(?!\\d)|(?<!\\d)\\.") 
```

分裂`something.4`但不分裂`3.14`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:33:40.650

您不需要在`[]`块中的 Java 正则表达式中双重转义：

```
[.\n] 
```

应该管用。

# c - 根据整数因子对整数进行排序

> ID：14935264
> 
> 赞同：1
> 
> 时间：2013-02-18T11:30:17.923
> 
> 标签：c, sorting, integer, primes, factors

我有点卡住了如何根据它们的最大素数按升序对整数进行排序。例如，我们有 3 和 8。顺序应该是：8, 3，因为 8 的素数因数 (2) 小于 3 的素数因数 (3)。如果我们对 9 和 27 这样的 2 个数字有相同的最大素因数，那么较小的数字应该是第一个。按此顺序：9、27

好的，这是我的代码，但它需要一些修改。

[出于个人原因删除代码 - 以避免大学扫描仪可能的自我剽窃，但无论如何使用 qsort 更好]

同样重要的是要提到 integers[i] 的最大素因数存储为 primes[i]。素数已经全部设置好，这个东西只需要正确排序。

我希望你能帮助我。

谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:37:04.660

当然你只需要在`primes`某个地方使用。在您当前的代码中，您根本没有使用该变量，而且它应该放在哪里似乎很清楚。

额外提示：查找标准 C 库函数`qsort`。

# c# - 创建资源文件的工具

> ID：14935267
> 
> 赞同：0
> 
> 时间：2013-02-18T11:30:28.843
> 
> 标签：c#, .net, dll

在我们公司，我们有一个软件程序来操作我们生产的机器。在 WES7 OS 上运行的应用程序 (HMI) 是用 C# 编程的。由于我们的机器运往世界各地，因此可以通过单击语言按钮来调整 HMI 的语言。

HMI 软件是由第三家公司编写的，但我们现在可以自己控制它。我们交付的机器可能有项目特定的“故障”消息，必须添加到 HMI。这意味着必须将这些特定的“故障消息”添加到 resources.resx 文件中。但据我所知，这只能从 Visual Studio 完成，进行构建并使用所有翻译（多语言）创建一个新文件 ExternalResources.xap 文件。

我们不希望每个客户都有一个特定的应用程序，或者在项目上构建仅用于创建 ExternalResources.xap 文件。所以我想知道是否有可用的工具可以独立运行（不需要 Visual Studio）并且可以创建 ExternalResources.xap 文件。

我们不需要将源添加到资源文件中，而只需根据项目愿望更改源的值。我希望我的观点很清楚，有人知道解决方案。

**编辑：**

我需要生成 ExternalResources.xap 文件。当您打开此文件时，所有可用位置都显示在文件夹中，并且在此文件夹中，有 *.recourses.dll 文件。我需要生成这些文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:02:29.787

您可以使用[Resgen.exe](http://msdn.microsoft.com/en-us/library/ccec7sz1%28v=vs.80%29.aspx)
或为此开发一些工具，这里有一个有用的示例[Extended Strongly Typed Resource Generator](http://www.codeproject.com/Articles/13830/Extended-Strongly-Typed-Resource-Generator) 希望对您有所帮助。

# php - JQuery 日期选择器行为

> ID：14935268
> 
> 赞同：0
> 
> 时间：2013-02-18T11:30:29.550
> 
> 标签：php, jquery, css, wordpress, datepicker

最近几天我一直在努力让这件事发挥作用。有两个日期选择器，很像开始和结束日期演示，但不能让它们工作。此代码适用于页面正文，但不适用于我想要搜索栏的标题。

```
 <script type="text/javascript">
        $(function() {
            $( "#from" ).datepicker({
                dateFormat: "dd-mm-yy",
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 3,
                onClose: function( selectedDate ) {
                    $( "#to" ).datepicker( "option", "minDate", selectedDate );
                }
            });
            $( "#to" ).datepicker({
                dateFormat: "dd-mm-yy",
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 3,
                onClose: function( selectedDate ) {
                    $( "#from" ).datepicker( "option", "maxDate", selectedDate );
                }
            });
        });
    </script>
    <form method="post" name="top_search_form" action="<?php bloginfo('wpurl');?>/?page_id=13" style="z-index:inherit">
        <input type="hidden" name="a" value="dosearch"/>
        <input id="top_search_input" placeholder="Procurar..." style="z-index:inherit" type="text" name="keywordphrase" value=""/>
            <input type="text" id="from" name="searchstartdate" placeholder="Partida" class="from" style="z-index:inherit"/>
        <input type="text" id="to" name="searchenddate" placeholder="Chegada" class="to" style="z-index:inherit"/>
        <input id="top_search_button" type="submit" value="Search" style="z-index:inherit">
    </form> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:42:49.457

可能是您的标头具有不同的 php 页面。因此，在您的页眉中包含 .js 文件和 datepicker 的代码。希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:48:07.567

出于某种原因，将设置移到您正在使用的 function() 之外，日期选择器不喜欢这样/没有正确连接到框。

这就是我的做法，而且效果很好。

```
Start : <input type="text" name="startdate" id="startdate" value="<?php echo $startdate;?>" />
End : <input type="text" name="enddate" id="enddate" value="<?php echo $enddate;?>" />

<script>
//date popup instigation
$( "#startdate" ).datepicker({ dateFormat: 'yy-mm-dd', changeMonth: true, changeYear: true });
$( "#startdate" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
$( "#startdate" ).datepicker( "option", "showAnim", "blind" );
$( "#enddate" ).datepicker({ dateFormat: 'yy-mm-dd', changeMonth: true, changeYear: true });
$( "#enddate" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
$( "#enddate" ).datepicker( "option", "showAnim", "blind" );
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:53:56.223

我会使用类而不是 id，我还会放置 Javascript 和文档的末尾，这应该可以解决您的问题。

```
<form method="post" name="top_search_form" action="<?php bloginfo('wpurl');?>/?page_id=13" style="z-index:inherit">
  <input type="hidden" name="a" value="dosearch"/>
  <input id="top_search_input" placeholder="Procurar..." style="z-index:inherit" type="text" name="keywordphrase" value=""/>
  <input type="text" id="from" name="searchstartdate" placeholder="Partida" class="from" style="z-index:inherit"/>
  <input type="text" id="to" name="searchenddate" placeholder="Chegada" class="to" style="z-index:inherit"/>
  <input id="top_search_button" type="submit" value="Search" style="z-index:inherit">
</form>
<script type="text/javascript">
$(document).ready({
    $( ".from" ).datepicker({
        dateFormat: "dd-mm-yy",
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( ".to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( ".to" ).datepicker({
        dateFormat: "dd-mm-yy",
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( ".from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
});
</script> 
```

# c# - 代表和活动

> ID：14935275
> 
> 赞同：1
> 
> 时间：2013-02-18T11:30:51.867
> 
> 标签：c#, events, delegates

我有 2 个表格。

表格1：

```
public partial class Panel1
    {
        public void ShowExport(object sender, EventArgs e)
        {
           .......
        }
    } 
```

表格2：

```
public partial class Panel2
{
        public delegate void ShowExportReport(object sender, EventArgs e);
        public event ShowExportReport ShowExportClicked;

private void buttonExport_Click(object sender, RoutedEventArgs e)
        {         
           if (ShowExportClicked != null)
            {
                ShowExportClicked(sender, new EventArgs());
            }                     

        }
} 
```

当我单击**按钮**时-

```
button.Click = buttonExport_Click 
```

如何从**Panel2.buttonExport_Click调用****Panel1.ShowExport()**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:32:54.537

在 Panel1 中，您必须订阅该事件：

```
pnl2.ShowExportClicked += new ShowExportReport(ShowExport); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:33:21.090

您需要将 Panel 1 类中的 ShowExportClicked 事件的处理程序分配给 Panel 2 类对象。

```
 public partial class Panel1
        {
            Panel2 pnl2;
            public Panel1()
            {
               pnl2 = new Panel2();
               pnl2.ShowExportClicked += new ShowExportReport(ShowExport);    
            }

            public void ShowExport(object sender, EventArgs e)
            {
               .......
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:39:25.390

在 Form1 上创建您的活动。并在 Form2 中收听事件。

表格1：

```
public event EventHandler ShowExportChanged;

private void ShowExportChanged()
{
    var handler = ShowExportChanged;
    if(handler == null)
        return;

    handler(this, EventArgs.Empty);
}

public void ShowExport(object sender, EventArgs e)
{
  ShowExportChanged();
} 
```

表格2：

```
pnl1.ShowExportChanged+= new OnShowExportChanged(ShowExportChanged); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:36:45.763

```
pnl2.ShowExportClicked += ShowExport; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T11:41:31.457

> 如何从 Panel2.buttonExport_Click 调用 Panel1.ShowExport()？

通过在实例化 form2 时从 form1 传递（仅必要的）信息。

Form1.cs：

```
void ShowForm2_Click()
{
    var form2 = new Form2();
    form2.ShowExportClicked += ShowExport;
    form2.Show();
} 
```

现在从 Form2 你可以简单地调用`ShowExport`按钮点击。**

# javascript - 通过 ECMA 脚本在共享点列表中插入项目的访问被拒绝

> ID：14935279
> 
> 赞同：1
> 
> 时间：2013-02-18T11:31:04.020
> 
> 标签：javascript, sharepoint

无法通过具有访问者权限的 ECMA 脚本在共享点列表中插入项目。
我`<sharepoint:FormDigest>`在我的网站的母版页中添加了控件。
我可以通过系统帐户成功运行代码。
![在此处输入图像描述](../Images/a31f6a4cbda82a007214f1f2c772595a.png) 这是我的代码：

```
try {
        var context = new SP.ClientContext.get_current(); 
        id = "123";
        var nameOnly = "ABC";
        var lstFavouritePosts = context.get_web().get_lists().getByTitle('DEF');
        var itemCreateInfo = new SP.ListItemCreationInformation();
        this.newListItem = lstFavouritePosts.addItem(itemCreateInfo);
        newListItem.set_item('Title', id);
        newListItem.set_item('User', nameOnly); 
        newListItem.update();
        context.load(newListItem);
        context.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));
        return false;
    }
catch(msg)
        {
            alert(msg);
        }

function onQuerySucceeded() {
            alert('ABC');
        return false;
    }
function onQueryFailed(sender, args) {
    alert('Request failed. ' + args.get_message() + '\n' + args.get_stackTrace());
    return false;
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:24:19.580

我相信您需要提供上下文用户信息。这可能是请求被拒绝的原因。

尝试将 try 块中的代码更改为：

```
var context = new SP.ClientContext.get_current();
this.website = context.get_web();
this.currentUser = website.get_currentUser();
context.load(currentUser); 
id = "123";
var nameOnly = "ABC";
var lstFavouritePosts = context.get_web().get_lists().getByTitle('DEF');
var itemCreateInfo = new SP.ListItemCreationInformation();
this.newListItem = lstFavouritePosts.addItem(itemCreateInfo);
newListItem.set_item('Title', id);
newListItem.set_item('User', nameOnly); 
newListItem.update();
context.load(newListItem);
context.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));
return false; 
```

# c++ - 对 `_imp__apr_getopt_init@16' 的未定义引用

> ID：14935285
> 
> 赞同：0
> 
> 时间：2013-02-18T11:31:22.083
> 
> 标签：c++, c, linker-errors

我有一个要链接的库函数，但编译器通过在函数名称后面附加“（*imp* _）”前缀来引发链接器错误。

我不明白为什么编译器会在函数名称前加上“ *imp* _”前缀，而且我不明白底层的链接器问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:54:10.970

似乎是静态与动态链接问题。

如果编译器认为实际函数将被放置在*动态*库中，它会将函数引用为*impl _+funcname。*即实际的 foobar 实现在 dll 中，而*impl* _foobar 是一种使链接器快乐的存根（foobar 的地址在链接阶段不知道，只有在应用程序在运行时加载 dll 时才会知道）。

 **因此，请验证您应该如何链接到该库（通常库有静态和动态变体）并根据该链接链接到它。**

# facebook - Facebook Like 按钮未在任何浏览器中显示/显示

> ID：14935287
> 
> 赞同：2
> 
> 时间：2013-02-18T11:31:26.333
> 
> 标签：facebook, button, facebook-like, facebook-iframe, addthis

我们在此页面上遇到了 Facebook 赞按钮未显示/显示的问题：

[http://powertextblog.esvelte.net/](http://powertextblog.esvelte.net/)

似乎生成的 span 和 iframe 具有 width:0px 和 height:0px 的内联样式，我尝试覆盖它无济于事。

该按钮未在任何浏览器中显示。

这是我们在页面上使用的代码（来自 AddThis）来生成按钮。

```
<a class="addthis_button_facebook_like" fb:like:layout="button_count" addthis:url="http://www.facebook.com/PowerText"></a> 
```

我还尝试使用 Facebook 自己的按钮生成器插入 Facebook like 按钮，但发生了同样的问题（这表明它不是 AddThis 问题）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-18T01:46:49.290

我有同样的问题，尝试了一切，直到我发现那是非常愚蠢的事情。如果您的 facebook 页面有任何限制，例如国家/地区限制或年龄限制，如果您未登录，facebook 不会显示点赞按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:01:17.350

我认为这是导致问题的 Facebook 错误。

删除定义的 URL addthis:url="http://www.facebook.com/PowerText" 并改用站点域，解决了这个问题。

所以我认为存在某种 FB 错误，其中将 URL 定义为 Facebook 页面会导致它无法显示，因为没有它它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:47:50.117

试试这个 facebook 之类的代码，它应该可以工作。

```
<a class="addthis_button_facebook_like" fb:like:layout="button_count" fb:like:action="recommend" fb:like:width="135"></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T11:19:13.387

昨天遇到了同样的问题。[然后我在https://developers.facebook.com/docs/plugins/like-button](https://developers.facebook.com/docs/plugins/like-button)上玩了一会儿小部件。原来这只发生在 Facebook 页面 URL（喜欢的 URL）上。甚至[https://facebook.com/facebook](https://facebook.com/facebook)本身也无法正常工作了。简单地用 0px 渲染。所有其他 URL 都按预期工作。试图在 Twitter 上联系 FB，他们[将此链接](https://developers.facebook.com/bugs/1914581255449300/?sf88188590=1#_=_)发送到已提交的问题。这表示错误是已知的并且现在已修复。

所以我们只好等待。第二天早上一晚后，所有带有 Facebook 页面 URL 的“赞”按钮再次正确呈现。

# java - 部署后立即使用 MDB 中的 EJB 的运行时查找

> ID：14935288
> 
> 赞同：12
> 
> 时间：2013-02-18T11:31:26.217
> 
> 标签：java, jakarta-ee, jboss, jboss5.x

我有使用 JBoss 5.1 的 Java EE 5 项目和这样的问题。我必须使用由消息内容产生的字符串对 MDB 中的某些 EJB 进行某种运行时查找。它只是 MDB 中使用的一种服务定位器模式。现在，由于 MDB 在部署后开始使用，我有很多，`NameNotFoundException`因为隐式部署顺序在这里不能很好地工作（运行时查找）。你怎么看待这件事？使用 EJB 3.0 是否可以做到这一点？如果可以解决问题，我也可以使用任何供应商特定的东西（JBoss 5.1）。

一些可视化情况的代码片段：

```
@MessageDriven(mappedName="jms/Queue")
public class MessageBean implements MessageListener {

    @Resource
    private MessageDrivenContext mdc;

    public void onMessage(Message msg) {

        final String beanName = // extract somehow the bean's name from 'msg'
        final Context ctx = new InitialContext();
        final Object obj = ctx.lookup(beanName); // NameNotFoundException
        // do something with 'obj'
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:58:09.067

使用这四种不同方法中的一种。

1.  使用“@EJB”注释声明 EJB 依赖项（*EJB 引用*）（不要使用 JNDI 查找）。对于实体 bean 的引用，必须引用实体 bean 的 home 接口。容器必须确保在处理方法/消息侦听器之前注入所有依赖项：

    MessageDriven(mappedName="jms/Queue")
    公共类 MessageBean 实现 MessageListener {

    ```
    @EJB private EntityBeanHomeA entityBeanHomeA;    

    @EJB private EntityBeanHomeB entityBeanHomeB;    

    @EJB private EntityBeanHomeC entityBeanHomeC;    

    @EJB private SessionBeanD sessionBeanD;    

    @Resource
    private MessageDrivenContext mdc;

    public void onMessage(Message msg) {

        final String beanName = // extract somehow the bean's name from 'msg'
        final Object obj = getDependentEJB(beanName);
        // do something with 'obj'
    }

    private Object getDependentEJB(String beanName) {
        Object result = null;
        if ("EntityBeanHomeA".equals(beanName)) {
             result = entityBeanHomeA;
        else if ("EntityBeanHomeB".equals(beanName)) {
             result = entityBeanHomeB;
        else ("EntityBeanHomeC".equals(beanName)) {
             result = entityBeanHomeC;
        else ("SessionBeanD".equals(beanName)) {
             result = sessionBeanD;
        }
        return result;
    } 
    ```

    }

2.  使用 JNDI 查找，但通过 EJB 部署描述符声明 EJB 依赖项。同样，容器必须确保在处理方法/消息之前设置所有依赖项：

    @MessageDriven(mappedName="jms/Queue") 公共类 MessageBean 实现 MessageListener {

    ```
    // as given in the original Question... 
    ```

    }

    部署描述符：

    ```
    <enterprise-beans>
        <message-driven>
            ... 
            <ejb-name>MessageBean</ejb-name>
            <ejb-class>com.company.pkg.MessageBean</ejb-class> 
            <messaging-type>javax.jms.MessageListener</messaging-type>
            <message-destination-type>javax.jms.Queue</message-destination-type>
            <message-destination-link>ExpenseProcessingQueue</message-destination-link>
            <ejb-ref> 
                <description> This is a reference to an EJB 2.1 entity bean
                  that encapsulates access to employee records. 
                </description>
                <ejb-ref-name>ejb/EmplRecord</ejb-ref-name>
                <ejb-ref-type>Entity</ejb-ref-type>
                <home>com.wombat.empl.EmployeeRecordHome</home>
                <remote>com.wombat.empl.EmployeeRecord</remote> 
                <ejb-link>EmployeeRecord</ejb-link> <-- if in same EJB jar -->
                          <-- ../emp/emp.jar#EmployeeRecord   if in diff EJB jar -->
            </ejb-ref>
            <ejb-local-ref> 
                <description> This is a reference to the local business interface
                   of an EJB 3.0 session bean that provides a payroll service. 
                </description> 
                <ejb-ref-name>ejb/Payroll</ejb-ref-name>
                <local>com.aardvark.payroll.Payroll</local> 
                <ejb-link>Payroll</ejb-link> 
            </ejb-local-ref>
            <ejb-local-ref> 
                <description> This is a reference to the local business interface of an
                  EJB 3.0 session bean that provides a pension plan service. 
                </description>
                <ejb-ref-name>ejb/PensionPlan</ejb-ref-name>
                <local>com.wombat.empl.PensionPlan</local> 
                <ejb-link>PensionPlan</ejb-link> <-- if in same EJB jar -->
            </ejb-local-ref> 
            ...
        </message-driven>
        ... 
    </enterprise-beans> 
    ```

3.  使用 JNDI 查找，但不使用 @EJB 注释或 EJB 部署声明依赖关系 - 完全使用您自己的逻辑处理，无需容器帮助。使用延迟/错误处理。

4.  使用 JBoss 专有配置来控制部署顺序：

    [http://texnoblog.wordpress.com/2010/09/16/depends-in-jboss/](http://texnoblog.wordpress.com/2010/09/16/depends-in-jboss/)

    [如何在 JBoss 5 中订购 EJB 和 JMS 队列配置的部署？](https://stackoverflow.com/questions/4616078/how-to-order-deployment-of-ejbs-and-jms-queue-config-in-jboss-5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T07:53:18.250

一种方法是创建一个注入到 MDB 中的 dummy-ejb，这样在注入实际发生之前，您的 mdb 不会开始消耗。

如果 dummy-ejb 与您打算对其进行动态查找的 EJB 捆绑在一起，这应该可以工作

我[在这里](https://stackoverflow.com/questions/13142246/suspend-mdb-message-processing-until-startupbean-has-finished-initialization/13143637#13143637)的回答解决了一个类似的用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T02:42:32.230

我认为最好的方法是延迟 MDB 的部署，直到所有 EJB 都启动并运行。这基本上是上述答案中的方法 4。

“使用 JBoss 专有配置来控制部署顺序：

[http://texnoblog.wordpress.com/2010/09/16/depends-in-jboss/](http://texnoblog.wordpress.com/2010/09/16/depends-in-jboss/)

[如何在 JBoss 5 中订购 EJB 和 JMS 队列配置的部署？](https://stackoverflow.com/questions/4616078/how-to-order-deployment-of-ejbs-and-jms-queue-config-in-jboss-5)"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T03:26:53.727

您可以在查找调用周围实现一个带有回退的循环。

# php - ZF2 2 个模块，每个模块带有路由器主机名

> ID：14935292
> 
> 赞同：5
> 
> 时间：2013-02-18T11:31:31.997
> 
> 标签：php, zend-framework2

我正在尝试设置一个具有 2 个子域的应用程序，每个子域都有一个主机名路由和子路由，但没有运气。

有什么想法/例子吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:26:31.233

您可以使用名为“Hostname”的特定路由器类型（“Zend\Mvc\Router\Http\Hostname”类）。这是一个简单的例子：

```
'router' => array(
    'routes' => array(
        'example1' => array(
            'type' => 'Hostname',
            'options' => array(
                'route' => ':subdomain.mydomain.com',
                'constraints' => array(
                    'subdomain' => 'mysubdomain1',
                ),
                'defaults' => array(
                    'controller' => 'MyModule1\Controller\MyFirstController',
                    'action' => 'index',
                ),
            ),
        ),
        'example2' => array(
            'type' => 'Hostname',
            'options' => array(
                'route' => ':subdomain.mydomain.com',
                'constraints' => array(
                    'subdomain' => 'mysubdomain2',
                ),
                'defaults' => array(
                    'controller' => 'MyModule2\Controller\MySecondController',
                    'action' => 'index',
                ),
            ),
        ),
    ),
), 
```

我可能会将这个配置分成两部分，“example1”在我的第一个模块的配置中，“example2”在我的第二个模块的配置中。

[您将在此页面](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html)上找到有关该路由器类型和其他类型的完整信息。

# jquery - 输入错误数字时应禁用按钮

> ID：14935296
> 
> 赞同：0
> 
> 时间：2013-02-18T11:31:40.387
> 
> 标签：jquery

我在 div 中有一些数字列表。div 从文本字段中获取数字。每个号码都有唯一的 ID。我有一个搜索字段。其中搜索字段用于搜索 div 中的数字。如果我搜索错误的数字，它应该显示“未找到结果”。我的问题是：我有一个清除搜索按钮和一个搜索按钮。清除搜索应仅在搜索到正确号码时启用，其余时间清除搜索按钮应保持禁用状态。过去 3 天我一直在尝试使用此功能。

这是我的代码：

```
$("#wmclrsrch").attr("disabled", "disabled");  //#wmclrsrch is a Clear Search Button
function fieldDisable() {
    $('#search_number').keyup(function() {         //#search_number is Search field
        if($(this).val() != '') {
            $("#wmclrsrch").removeAttr("disabled", "disabled");
            $("#wmclrsrch").attr("enabled", "enabled");
        } else {
            $("#wmclrsrch").attr("disabled", "disabled");
        }
    });
}
fieldDisable();
$('#wmsearch').after(function() {         //'#wmsearch is a Search Button
    if($(this).val() != '') {
        $("#wmclrsrch").removeAttr("disabled", "disabled");
        $("#wmclrsrch").attr("enabled", "enabled");
    } else {
        $("#wmclrsrch").attr("disabled", "disabled");
    }
}); 
```

注意：我的搜索功能运行良好。请告诉我输入错误数字时如何禁用按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:54:52.177

您启用和禁用按钮的方式不太正确。[这个](http://jsfiddle.net/uvQGZ/)jsfiddle 显示了它应该被处理的方式。

```
if($(this).val() != ''){
    $('#wmclrsrch').removeAttr('disabled');
} else {
    $('#wmclrsrch').attr('disabled', 'disabled');   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:48:49.300

```
var num = $('#search_number').val();
if(num.indexOf("YOUR DIV HTML STRING")>-1){
// enable button
}else{
// disable button
} 
```

# java - 使用 JPanel 添加多个按钮

> ID：14935297
> 
> 赞同：0
> 
> 时间：2013-02-18T11:31:43.707
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我创建了一个简单的指南针程序，可以在屏幕上移动 GUI 框，现在我正在继续添加 NE、NW 等。

这涉及使用 JPanel，因为它允许多个对象。我的问题是我为单独的按钮制作了 9 个单独的面板，但我不知道如何将它们添加到 JFrame，因为我所做的一切似乎都不起作用。

任何想法，将不胜感激。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MovingCompassExtraJFrame extends JFrame implements ActionListener {

    private JButton north;
    private JButton east;
    private JButton west; 
    private JButton south;
    private JButton center;
    private JButton northEast;
    private JButton northWest;
    private JButton southEast;
    private JButton southWest;
    int screenHeight;
    int screenWidth;
    int height;
    int width;

    public MovingCompassExtraJFrame() 
   {
        super();

            width = 400;
            height = 300;

            setSize(width, height);
            setLocation(200, 100);
            setDefaultCloseOperation(EXIT_ON_CLOSE);

            getContentPane().setBackground(Color.RED); 
            getContentPane().setLayout(new GridLayout(3,3));

            setupNEPanel();
            setupNPanel();
            setupNWPanel();
            setupWPanel();
            setupCPanel();
            setupEPanel();
            setupSWPanel();
            setupSPanel();
            setupSEPanel();

            setVisible(true);

   }

   private JPanel setupNEPanel()
      { 
            northEast = new JButton("Move to North East");

            JPanel northEP = new JPanel();

            getContentPane().add(northEast);
            east.addActionListener(this);

            return northEP;
      }

    private JPanel setupNPanel()
      {
         north = new JButton("Move to North");

         JPanel northP = new JPanel();

         getContentPane().add(north);
         north.addActionListener(this);

         return northP;
      }

    private JPanel setupNWPanel()
      {
         northWest = new JButton("Move to North West");

         JPanel northWP = new JPanel();

         getContentPane().add(northWest); 
         west.addActionListener(this);

         return northWP;
      }

    private JPanel setupWPanel()
      {

            west = new JButton("Move to West");

            JPanel westP = new JPanel();

            getContentPane().add(west); 
            west.addActionListener(this);

            return westP;
      }

    private JPanel setupCPanel()
      {
            center = new JButton("Move to Center");

            JPanel centerP = new JPanel();

            getContentPane().add(center);
            center.addActionListener(this);

            return centerP;
      }

    private JPanel setupEPanel()
      {
            east = new JButton("Move to East");

            JPanel eastP = new JPanel();

            getContentPane().add(east);
            east.addActionListener(this);

            return eastP;

      }

    private JPanel setupSEPanel()
      {
            southEast = new JButton("Move to South East");

            JPanel southEP = new JPanel();

            getContentPane().add(southEast);
            east.addActionListener(this);

            return southEP;
      }

    private JPanel setupSPanel()
      {
            south = new JButton("Move to South");

            JPanel southP = new JPanel();

            getContentPane().add(south);
            south.addActionListener(this);

            return southP;
      }

    private JPanel setupSWPanel()
      {
            southWest = new JButton("Move to South West");

            JPanel southWP = new JPanel();

            getContentPane().add(southWest); 
            west.addActionListener(this);

            return southWP;
      }

    public void actionPerformed(ActionEvent e)
    {
        screenHeight = Toolkit.getDefaultToolkit().getScreenSize().height;
        screenWidth = Toolkit.getDefaultToolkit().getScreenSize().width;

        if (e.getSource() == north)
        {
            this.setLocation((screenWidth - width)/ 2, 0);
        }
        else if (e.getSource() == south)
        {
            this.setLocation((screenWidth - width)/ 2, (screenHeight-height)- 30);
        }
        else if (e.getSource() == east)
        {
            this.setLocation(screenWidth - width , (screenHeight-height)/2);
        }
        else if (e.getSource() == west)
        {
           this.setLocation(0, (screenHeight-height)/2); 
        }
        else if (e.getSource() == center)
        {
            this.setLocation((screenWidth-width)/2, (screenHeight - height)/2);
        }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T11:35:38.993

```
JFrame frame = new JFrame ("Compass");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.getContentPane().setLayout(new GridLayout(3, 3));
frame.add (new JButton ("NW"));
frame.add (new JButton ("N"));
frame.add (new JButton ("NE"));
frame.add (new JButton ("W"));
frame.add (new JButton (" "));
frame.add (new JButton ("E"));
frame.add (new JButton ("SW"));
frame.add (new JButton ("S"));
frame.add (new JButton ("SE"));
frame.pack();
frame.setVisible(true); 
```

# php - 使用 imap_fetchbody 检索 html

> ID：14935303
> 
> 赞同：1
> 
> 时间：2013-02-18T11:32:05.020
> 
> 标签：php, cakephp, imap, gmail-imap

我正在使用 imap 检索电子邮件。它适用于纯文本。但是获取html的问题，我使用`imap_fetchbody($connections,$email_number,1.2);`但它不起作用。它返回空值。但是，如果我尝试`imap_fetchbody($connections,$email_number,1.1);`使用纯文本`*`而不是 html 标签。

我很感激任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:13:39.427

根据 PHP 规范

```
 string imap_fetchbody ( resource $imap_stream , int $msg_number , string $section [, int $options = 0 ] ) 
```

请记住，数字应该是字符串而不是整数，因此您的命令将是

```
 imap_fetchbody($connections,$email_number,"1.2"); 
```

希望这能解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:06:16.707

您使用的 html 可能缺少 MIME 类型。您可以尝试`"<!DOCTYPE html> <html>"`在邮件内容的开头使用它。

# google-drive-api - Google Drive 的“每个文件”范围是否会级联到子文件夹/文件？

> ID：14935308
> 
> 赞同：2
> 
> 时间：2013-02-18T11:32:25.487
> 
> 标签：google-drive-api

我即将开始在 Google Drive API 之上构建一个小应用程序。

我有点担心给应用程序完全允许的范围来访问用户的驱动器，并且更愿意给它一个“每个文件”的访问范围。

基本思想是应用程序最初会在用户的驱动器中创建一个文件夹（我们称之为应用程序文件夹）。然后，我希望我的应用程序也可以访问该特定应用程序文件夹中的文件和子文件夹，无论它们是如何创建/上传到云端硬盘的（但无法访问用户云端硬盘的其余部分）。

所以，我的问题（在我构建这个东西之前）是这样的：“每个文件”范围是否还允许应用程序访问（读取/管理/移动）应用程序文件夹中不是由创建的任何子文件/子文件夹应用程序。

换句话说，“每个文件”范围是否从应用程序文件夹向下级联到子文件夹和文件？

或者，“每个文件”范围是否***仅***适用于应用程序本身*创建*的文件？

基本上，我所追求的是与 Dropbox 的“应用程序文件夹”等效的 Google Drive，如此处所述 --> [https://www.dropbox.com/developers/core/gs](https://www.dropbox.com/developers/core/gs)

任何人都知道 - 到目前为止，我一直在努力寻找答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:41:49.203

每个文件的范围适用于用户使用该应用程序创建或显式打开的文件。此权限不会**级联**，但当然，如果您的应用程序创建文件夹，它可以在其中创建文件，并且无权读取其他文件。

这与 Dropbox 应用程序文件夹不同，它是一个更严格的权限。Google 正在开发这方面的其他功能，敬请期待

# javascript - 在 HTML 列表中最多显示 X 个元素

> ID：14935311
> 
> 赞同：0
> 
> 时间：2013-02-18T11:32:49.720
> 
> 标签：javascript, jquery, html, css

我有 html 列表，其中包含可见和隐藏元素。可见性随时间动态变化（一些元素被隐藏，一些被显示）。

```
<ul>
   <li>  </li>
   <li style="display:none">  </li>
   <li>  </li>
   <li style="display:none">  </li>
   <li>  </li>
   <li>  </li>
   <li>  </li>
</ul> 
```

我想要的是最多显示 X 个元素的列表，因此`<li>`应该隐藏 X 之外的 s。实现这一目标的建议方法是什么？我提出了两个想法：

*   设置常量大小`<ul>`并添加`overflow: hidden`（开销`<li>`将不可见）。这很简单，但只有在`<li>`' 具有恒定大小并且您可以预测适合列表的元素数量时才有效。
*   使用 javascript（我使用 jQuery）来计算可见元素的数量并隐藏应该隐藏的元素。

如果有办法在纯 CSS 中做到这一点，你能建议首选方法或答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:37:15.517

使用[`gt()`](http://docs.jquery.com/Selectors/gt)选择器，以及[`:visible`](http://api.jquery.com/visible-selector/)

```
$('li:visible:gt(20)').hide() 
```

或者，使用`slice()`：

```
$('li:visible').slice(20).hide() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:24:14.680

使用第 n 个子选择器，您可以使用纯 css 实现它。但请注意，IE 不支持它。

在此示例中，我没有应用**display:none**，而是应用了**color:#ff0000**以便您可以欣赏结果。将 4 替换为需要显示的 LI 元素的数量。

```
<style> 
     ul li:nth-child(1n+4)
     {
       color:#ff0000;
     }
 </style>

<ul> 
  <li> a </li>
  <li> b  </li>
  <li> c </li>
  <li> d</li>
  <li> e </li>
  <li> f </li>
  <li> g </li>
 </ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:42:58.630

您可以制作一个控制隐藏可见元素的功能

```
function checkList()
{    
    $('ul li:visible:gt(X)').hide(); 
} 
```

并且您需要在每次更改 UL 时调用该函数，它是 LI。我建议对 UL 进行更多标识，也许是通过 ID 属性。

# r - 使用 R 中的 xlsx 包更新 excel 电子表格数字

> ID：14935312
> 
> 赞同：6
> 
> 时间：2013-02-18T11:32:51.010
> 
> 标签：r, excel

我有一个与 R 中的 xlsx 包有关的查询。我知道如何使用包中的大部分功能，并且直到现在还没有遇到任何问题。我将首先显示我的代码，然后提出我的问题。

```
#Code-Section1: 
library(xlsx) 
data1<-iris 
data1<-data1[,c(5,1:4)] 
wb <- createWorkbook() 
sheet1 <- createSheet(wb, sheetName="Sheet1") 
addDataFrame(data1, sheet1, startRow=1, startColumn=1,row.names=FALSE)  
saveWorkbook(wb, file="test.xlsx")  
rm(data1);rm(sheet1);rm(wb) 
#Code-Section1-end: 
```

这部分简单地获取虹膜数据集并将其放入名为 test.xlsx 的 Excel 电子表格中的 Sheet1 中。现在在 excel 中，我决定通过添加总行向电子表格添加更多内容，因此 excel 电子表格的最后两行是：

```
virginica   5.9     3.0     5.1     1.8
            876.5   458.6   563.7   179.9 
```

我要做的另一件事是在电子表格中再添加 4 列，其中包含每个数字占行总数的百分比。接下来，我想将 test.xlsx 加载到 R 工作簿中。我用一些随机的正常值定义了一个名为 temp 的新数据框。我的意图是更新 test.xlsx 文件中的数字，以便行总计和百分比随后也会发生变化。更新后的电子表格的最后两行应该有所不同，具体取决于 rnorm(150,5,1) 值的输出。我将数据框保存到一个名为 testa.xlsx 的新电子表格中。值已更新，但由于某种原因，行总计和百分比保持不变，即使它们的单元格的值仍然是“=sum(b2:b151)”或“=b2/b$152”。

```
#Code-Section2: 
temp <- data.frame(Sepal.Length=rnorm(150,5,1), Sepal.Width=rnorm(150,5,1), Petal.Length=rnorm(150,5,1), Petal.Width=rnorm(150,5,1)) 
wb<-loadWorkbook("test.xlsx") 
f<-getSheets(wb)[[1]] 
addDataFrame(temp, sheet=f, startRow=2, startColumn=2,row.names=FALSE,col.names=FALSE) 
saveWorkbook(wb, file="testa.xlsx") 
#Code-Section2-end: 
```

因此，我的问题是，如何加载工作簿、更新数字，以便随后更新包含公式的单元格，然后将其保存到新的 Excel 文件中。我可能可以用另一种方式做到这一点，但它需要更多的步骤，我不介意这样做，但只需更新数字以便其他单元格发生变化就会非常方便。与我所做的每篇文章一样，请原谅任何语法错误，如果您认为有必要，请随时更改此消息中的任何内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T12:14:54.883

在保存工作簿 ( `wb`) 之前，添加以下内容：

```
wb$setForceFormulaRecalculation(TRUE) 
```

如果它不起作用，这里还有一个 VBA 解决[方案](https://groups.google.com/forum/?fromgroups=#!topic/R-package-xlsx/uyqV4XVomdc)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-04T19:12:08.613

如果您想在打开 Excel 文件**之前更新公式，****而不**需要打开 Microsoft Excel，即“强制重新计算公式”；您可以使用[Apache POI](https://poi.apache.org/spreadsheet/eval.html#Recalculation+of+Formulas)的解决方案。适用于*R*：

```
library(xlsx)
wb<-loadWorkbook("test.xlsx")
sheets <- getSheets(wb)
sheet <- sheets[["Sheet1"]]
rows  <- getRows(sheet)
cells <- getCells(rows)
setCellValue(cells[["1.1"]], 999) # Change a number inside the file
wb$getCreationHelper()$createFormulaEvaluator()$evaluateAll() #This is the trick
saveWorkbook(wb,"test.xlsx") 
```

[在R-package-xlsx 谷歌网上论坛的](https://groups.google.com/forum/?fromgroups=#!topic/R-package-xlsx/uyqV4XVomdc)更多信息

# jquery - 使用 jquery 的 html 目标 iframe

> ID：14935315
> 
> 赞同：4
> 
> 时间：2013-02-18T11:32:57.950
> 
> 标签：jquery, html, css, jquery-ui

在提交表单后的以下代码中，我需要留在同一页面上，所以我说我的目标是 iframe。

但是在我得到回复后，我需要填充一个文本区域，我该怎么做。下面的代码有什么问题？

```
<script>
    //After I get a response
    $("#result").html("This is your result"); //Textarea not populated
</script>

<form  method="POST" enctype="multipart/form-data" id="contentform" action="/dg/execute_model/" target="upload_target" onsubmit="return validate();">{% csrf_token %}
    <b>
        <table class="cat-tab" cellspacing="0" cellpadding="0" border="0">
            <tr>
                <td><font>*</font>Test data</td>
                <td><input type="file" name="test_file" id="test_file" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="submit" value="Build" id="addbtn" /></td>
            </tr>
        </table>
</form>

<iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;border:0px solid #fff;">
    <b><br>Result:<br><br></b>
    <textarea rows="20" cols="100" name="result" id="result" ></textarea>
</iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:00:19.623

**为什么查询`$('#result')`在您的示例中不起作用**

默认情况下，jQuery 查询当前`document`对象的 DOM 树。由于`iframe`元素实际上嵌入了带有单独`window`对象的单独`document`对象，因此 textarea 根本不在您当前查询的范围内，因此找不到。

**如何`$('#result')`正确查询**

这意味着为了遍历嵌入的 DOM，`iframe`我们首先需要访问 iframe`window`和`document`对象。一种安全且跨浏览器的方法是使用 iframe 的`window`属性访问iframe `.contentWindow`，然后访问.`.document``window`

例如：

```
var target_document = $('#upload_target')[0].contentWindow.document;
var target_result   = $(target_document).find('#result');
target_result.val('This is your result'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:17:16.883

这对我有用：

```
$( "#result", $("#upload_target").contents() ).val("This is your result."); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:40:12.613

尝试这个 ：-

```
$('#upload_target').contents().find('#result').html('This is your result'); 
```

# android - IntetentService 中的 NetworkOnMainThreadException

> ID：14935317
> 
> 赞同：1
> 
> 时间：2013-02-18T11:33:20.527
> 
> 标签：android, intentservice, networkonmainthread

我有一个执行网络操作（HTTP POST）的 IntentService，但它显示了 NetworkOnMainThreadException。如果我是对的，IntentService 将在单独的线程上运行。谁能说出为什么会抛出这个异常？我的代码是：

```
public class UpdateService extends IntentService {
public static final int UPDATE_PROGRESS = 8344;
BroadcastReceiver broadcastReceiver;
public UpdateService() {
    super("UpdateService");
}
@Override
protected void onHandleIntent(Intent intent) {

        if (broadcastReceiver == null) {

            broadcastReceiver = new BroadcastReceiver() {

                @Override
                public void onReceive(Context context, Intent intent) {

                    Bundle extras = intent.getExtras();

                    NetworkInfo info = (NetworkInfo) extras.getParcelable("networkInfo");

                    State state = info.getState();
                    if (state == State.CONNECTED) {

                        onNetworkUp();

                    } else {

                    }
                }
            };

            final IntentFilter intentFilter = new IntentFilter();
            intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
            registerReceiver(broadcastReceiver, intentFilter);
        }
}

@Override
public void onDestroy(){
    unregisterReceiver(broadcastReceiver);
    }

void onNetworkUp(){
    String aDataRow = "";
    try {
        File myFile = new File( Environment.getExternalStorageDirectory().getPath() + "/myFile.txt");
        FileReader fr = new FileReader(myFile);
        BufferedReader myReader = new BufferedReader(fr);   
        while ((aDataRow = myReader.readLine()) != null) 
        updateLyne(aDataRow); //
        fr.close();
    } catch (Exception e) {
        Log.e("onNetworkUp",e.toString());
    }   

    void updateLyne(String aDataRow){
    JSONParser jsonParser = new JSONParser();
    String[] words = aDataRow.split(" ");
    pid = words[1];
    String rtime = aDataRow;
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair(TAG_PID, pid));
    params.add(new BasicNameValuePair(TAG_TIME, rtime));

    JSONObject json = null;
    if (words[0].equalsIgnoreCase("cancel")){
        json = jsonParser.makeHttpRequest(url_cancel, "POST", params);                  
    }
    else{
        Log.d("empty","file empty!!");
    }

    try {
        int success = json.getInt("success");

        if (success == 1) {
            delLine(aDataRow); // delete the line
        } else {
            Log.d("pid="+pid+" not on board", "failed in deleting");
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

}
} 
```

JSONParser.java 在下面给出

```
 public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:43:02.483

问题是您没有在 中运行网络请求`onHandleIntent()`，您只是在创建`BroadcastReceiver`并注册它的实例。实际的网络请求不会在那里运行。它会在`BroadcastReceiver`接收到消息时运行，这发生在 UI 线程上。这里一个正确的方案是在`BroadcastReceiver`其他地方创建你的，当收到一条消息时，启动一个`IntentService`，它在内部执行一个网络调用`onHandleIntent()`——然后它确实会在一个工作线程上运行。希望这可以帮助。

# android - 如何使用 MediaStore 仅显示 mp3 文件？

> ID：14935323
> 
> 赞同：4
> 
> 时间：2013-02-18T11:33:28.143
> 
> 标签：android

在我的应用程序中，我使用`MediaStore`and`ListAdaptor`和显示所有音频文件`CursorLoader`。但它显示所有音频文件（m4a、wav、ogg）。我只想显示 mp3 文件。我该怎么做？

```
String[] from = {MediaStore.MediaColumns.TITLE};
int[] to = {android.R.id.text1};

CursorLoader cursorLoader = new CursorLoader(this,sourceUri,null,null,null,MediaStore.Audio.Media.TITLE);
Cursor cursor = cursorLoader.loadInBackground();
startManagingCursor(cursor);
ListAdapter adapter = new SimpleCursorAdapter(this,android.R.layout.simple_list_item_1,cursor,from,to,CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T11:53:48.637

请尝试以下代码

```
ContentResolver cr = context.getContentResolver();

Uri uri = MediaStore.Files.getContentUri("external");

String[] projection = null;

String sortOrder = null;

String selectionMimeType = MediaStore.Files.FileColumns.MIME_TYPE + "=?";

String mimeType = MimeTypeMap.getSingleton().getMimeTypeFromExtension("mp3"); 

String[] selectionArgsMp3 = new String[]{ mimeType };

Cursor allmp3Files = cr.query(uri, projection, selectionMimeType, selectionArgsmp3, sortOrder); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T13:17:58.427

请参阅[此](http://alvinalexander.com/blog/post/java/how-implement-java-filefilter-list-files-directory)示例，该示例仅显示提供的文件扩展名列表。

# javascript - 如何在 plotBands 上显示工具提示或图例？

> ID：14935333
> 
> 赞同：3
> 
> 时间：2013-02-18T11:33:56.440
> 
> 标签：javascript, html, charts, highcharts

我想在量规带上有工具提示或图例。我画这样的乐队：

```
plotBands: [{
                from: 0,
                to: 10,
                color: '#55BF3B'
            }, {
                from: 10,
                to: 20,
                color: '#DDDF0D'
            }] 
```

我想看到鼠标悬停在乐队上的工具提示。

或者我想要的另一个解决方案是为每个乐队显示相关颜色的图例。有点的图例选项，但没有带的选项。

有没有类似`showInLegend:true`plotBands 的选项？或任何其他解决方案来获得这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-09T20:22:36.143

因为它*（例如）*不可能，你可以`subtitle`在图表下方放置一个（在我的例子中，一个仪表）。例如：

```
subtitle: {
    text: '<span style="background-color: #55BF3B; border-radius: 2px; padding: 1px 2px;">' +
              '0-10' +
          '</span>' +
          '<span style="background-color: #DDDF0D; border-radius: 2px; padding: 1px 2px;">' +
              '10-20' +
          '</span>',
    useHTML: true,
    verticalAlign: 'bottom'
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:38:03.367

通常 plotBands 没有任何工具提示或图例选项，但是可以向 plotBand 添加一些自定义事件，例如鼠标悬停。见：[http ://api.highcharts.com/highcharts#xAxis.plotBands.events](http://api.highcharts.com/highcharts#xAxis.plotBands.events)

因此，您可以为此创建自己的工具提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T09:08:53.267

实际上，通过将文本附加到由 Highcharts 生成的 svg 路径元素，可以为量规图带制作非常优雅的标签。通过这样做，您可以获得实际上遵循图带曲线的文本。具体查看在仪表初始化后触发的匿名函数中的代码。您需要获取正确的 plotband 对象，将 id 属性分配给 path 元素，然后插入 text 和 textPath 元素（使用 createElementNS）。然后使用 xlink 命名空间链接新创建的 textPath 元素。在我的示例中，我正在为四分位数应用标签，这些四分位数显示为仪表周围的图带。

例子：

```
 $(selector).highcharts({
             chart: {
                 type: 'gauge',
                 plotBackgroundColor: null,
                 plotBackgroundImage: null,
                 plotBorderWidth: 0,
                 plotShadow: false
             },
             title: {
                 //oConfig is my own config object
                 text: oConfig.TITLE,
                 style: {"color": "#333333", "fontSize": fontSize, "font-family": "Arial", "font-weight": "bold"}
             },
             pane: {
                 size: "100%",
                 startAngle: -150,
                 endAngle: 150,
                 background: [{
                     backgroundColor: '#FFF',
                     borderWidth: 0,
                     outerRadius: '100%',
                     innerRadius: '100%'
                 }]
             },
             /*the value axis*/
             yAxis: [{
                 min: oConfig.MIN,
                 max: oConfig.MAX,
                 minorTickInterval: 'auto',
                 minorTickWidth: 0,
                 minorTickLength: 10,
                 minorTickPosition: 'inside',
                 minorTickColor: '#666',
                 tickPixelInterval: 30,
                 tickWidth: 2,
                 tickPosition: 'inside',
                 tickLength: 10,
                 tickColor: '#666',
                 labels: {
                     step: 2,
                     rotation: 'auto'
                 },
                 title: {
                     text: null
                 },
                 plotBands: [{
                     from: oConfig.PB1FROM,
                     to: oConfig.PB1TO,
                     color: 'red',
                     outerRadius: "105%",
                     //innerRadius: "10%",
                     thickness : "5%"
                 }, {
                     from: oConfig.PB2FROM,
                     to: oConfig.PB2TO,
                     color: '#fdd01b',
                     outerRadius: "105%",
                     //innerRadius: "10%",
                     thickness : "5%"
                 }, {
                     from: oConfig.PB3FROM,
                     to: oConfig.PB3TO,
                     color: 'green',
                     outerRadius: "105%",
                     //innerRadius: "10%",
                     thickness : "5%"
                 }]
             }],
               credits: {
                    enabled: false
               },
             series: [{
                 name: name,
                 data: []/*,
                 tooltip: {
                      valuePrefix: 'Score: ',
                     valueSuffix: ' out of 5'
                 }*/
             }]
         },
         //Add some life
         function (chart) {
            var svgNS = "http://www.w3.org/2000/svg";
            var xlinkNS = "http://www.w3.org/1999/xlink";
            //I create a random id using my own helpers.makeid() method - you'll need to roll your own
            var id = helpers.makeid();

            //quartile 1
            var elem = chart.yAxis[0].plotLinesAndBands[1].svgElem.element;
            elem.setAttribute("id", id);
            var newText = document.createElementNS(svgNS,"text");
            newText.setAttributeNS(null,"font-family","Verdana");   
            newText.setAttributeNS(null,"font-weight","bold");
            newText.setAttributeNS(null,"font-size","10");
            newText.setAttributeNS(null,"dy","-5");
            newText.setAttributeNS(null,"fill","red");
            var newTextPath = document.createElementNS(svgNS, "textPath");
            newTextPath.setAttributeNS(null,"startOffset","10%");
            newTextPath.setAttributeNS(xlinkNS, "xlink:href", "#"+id);
            var textNode = document.createTextNode("Quartile 1 (0% to 25%)");
            newTextPath.appendChild(textNode);
            newText.appendChild(newTextPath);
            elem.parentNode.insertBefore(newText, elem.nextSibling);

            //interquartile range (middle 50)
            var elem2 = chart.yAxis[0].plotLinesAndBands[2].svgElem.element;
            id = helpers.makeid();
            elem2.setAttribute("id", id);
            var newText = document.createElementNS(svgNS,"text");
            newText.setAttributeNS(null,"font-family","Verdana");
            newText.setAttributeNS(null,"font-weight","bold");  
            newText.setAttributeNS(null,"font-size","10");
            newText.setAttributeNS(null,"dy","-5");
            newText.setAttributeNS(null,"fill","#fdd01b");
            newText.setAttributeNS(null,"x", 5);
            newText.setAttributeNS(null,"y", 5);
            var newTextPath = document.createElementNS(svgNS, "textPath");
            newTextPath.setAttributeNS(null,"startOffset","10%");
            newTextPath.setAttributeNS(xlinkNS, "xlink:href", "#"+id);
            var textNode = document.createTextNode("Middle 50 (25% to 75%)");
            newTextPath.appendChild(textNode);
            newText.appendChild(newTextPath);
            elem.parentNode.insertBefore(newText, elem.nextSibling);

            //quartile 3
            var elem3 = chart.yAxis[0].plotLinesAndBands[3].svgElem.element;
            id = helpers.makeid();
            elem3.setAttribute("id", id);
            var newText = document.createElementNS(svgNS,"text");
            newText.setAttributeNS(null,"font-family","Verdana");
            newText.setAttributeNS(null,"font-weight","bold");  
            newText.setAttributeNS(null,"font-size","10");
            newText.setAttributeNS(null,"dy","-5");
            newText.setAttributeNS(null,"fill","green");
            newText.setAttributeNS(null,"x", 5);
            newText.setAttributeNS(null,"y", 5);
            var newTextPath = document.createElementNS(svgNS, "textPath");
            newTextPath.setAttributeNS(null,"startOffset","10%");
            newTextPath.setAttributeNS(xlinkNS, "xlink:href", "#"+id);
            var textNode = document.createTextNode("Quartile 3 (75% to 100%)");
            newTextPath.appendChild(textNode);
            newText.appendChild(newTextPath);
            elem.parentNode.insertBefore(newText, elem.nextSibling);
        }); 
```

# javascript - 这是IE8的bug吗？table.rows 没有动态生成的表

> ID：14935335
> 
> 赞同：0
> 
> 时间：2013-02-18T11:34:01.473
> 
> 标签：javascript, html, html-table, internet-explorer-8

测试页面

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>testcase</title>
</head>
<body>
    <button onclick="Foo()">Eat me</button>
    <button id="bar"><-- Hit it</button>
    <table id="testTable" onchange="Bar()"></table>

    <script type="text/javascript">
        function Foo(){
            var table = document.getElementById("testTable");
            for(var i=0; i < 7; i++){
                var row = document.createElement("tr");
                for(var j=0; j < 7; j++){
                    var cell = document.createElement("td");
                    cell.innerHTML = i + "-" + j;
                    row.appendChild(cell);
                }
                table.appendChild(row);
            }
            Bar();
        }
        function Bar(){
            var bar = document.getElementById("bar");
            var table = document.getElementById("testTable");
            if(bar.textContent){
                bar.textContent = "table.rows.length = " + table.rows.length;
            }else{
                bar.innerText = "table.rows.length = " + table.rows.length;
            }
        }
    </script>
</body>
</html> 
```

在 Firefox 19, Chrome 26 或 IE9+ 上，后面的数字`table.rows.length =`是正确的，但是 IE8 总是`0`，`table.rows`本身也是空的（我不知道如何证明，IE 的调试工具不会显示 Javascript 对象的内容Chrome 和 Firefox 会）。似乎 IE8 在计算动态生成表的行数时有问题：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:03:05.480

你也可以这样做——

```
 <!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>testcase</title>
</head>
<body>
    <INPUT type="button" value="Add Row" onclick="addRow('testTable')" />    <button type="button" onclick="Bar()" id="bar">table.rows.length = 0</button>
    <table id="testTable">
</table>

    <script type="text/javascript">
        function addRow(tableID) {
 alert(tableID);
            var table = document.getElementById(tableID);
  for(var i=0; i < 7; i++){

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "checkbox";
            element1.name="chkbox[]";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;

            var cell3 = row.insertCell(2);
            var element2 = document.createElement("input");
            element2.type = "text";
            element2.name = "txtbox[]";
            cell3.appendChild(element2);
}

        }
        function Bar(){
alert(document.getElementById("testTable").rows.length);

            var bar = document.getElementById("bar");
            var table = document.getElementById("testTable");
            if(bar.textContent){alert("sdsds");
                bar.textContent = "table.rows.length = " + table.rows.length;
            }else{
                bar.innerText = "table.rows.length = " + table.rows.length;
            }
        }
    </script>
</body>
</html> 
```

# flash - 视频记录不是从 flex、webcam 和 red5 开始的

> ID：14935344
> 
> 赞同：0
> 
> 时间：2013-02-18T11:34:34.000
> 
> 标签：flash, apache-flex, webcam, red5

向用户流式传输视频工作正常。所有功能都可以正常工作。但我有一个问题。当我开始查看文件时： Video1.flv 这个视频不是从头开始的......我使用这个代码：

```
camera.setMode(640, 480, 25);
camera.setQuality(0, 85);                   
camera.setKeyFrameInterval(17);
ns.attachCamera(camera);
mic.rate = 44;
ns.attachAudio(mic);
ns.publish(video_name, record); 
```

# youtube-api - 为什么按频道搜索在 media$thumbnail 标签内返回 no_videos_140.png？

> ID：14935347
> 
> 赞同：1
> 
> 时间：2013-02-18T11:34:54.780
> 
> 标签：youtube-api

通过用户 ID 直接访问频道信息，[http](http://gdata.youtube.com/feeds/users/Lm-kPkFGRaV0t55q7-VwgQ?alt=json&safeSearch=strict&restriction=MY) ://gdata.youtube.com/feeds/users/Lm-kPkFGRaV0t55q7-VwgQ?alt=json&safeSearch=strict&restriction=MY ，我可以得到[http://s.ytimg.com/yts/ img/silhouette250-vflEqxKg9.png](http://s.ytimg.com/yts/img/silhouette250-vflEqxKg9.png)来自 media$thumbnail 标签 ![](../Images/c412af362dc9215800601af59a006bbf.png)

但是，按频道 API 查询搜索，[http](http://gdata.youtube.com/feeds/api/channels?alt=json&q=ghghghgh&start-index=1&max-results=1&v=2&safeSearch=strict&restriction=MY) ://gdata.youtube.com/feeds/api/channels?alt=json&q=ghghghgh&start-index=1&max-results=1&v=2&safeSearch=strict&restriction=MY ，我得到[http:// s.ytimg.com/yt/img/no_videos_140.png](http://s.ytimg.com/yt/img/no_videos_140.png)来自 media$thumbnail 标签 ![](../Images/4f939eac1e1ac74fe1b8b5552172ce98.png)

使用网络浏览器访问[https://www.youtube.com/results?search_query=ghghghgh&filters=channel&lclk=channel](https://www.youtube.com/results?search_query=ghghghgh&filters=channel&lclk=channel)，我可以看到[http://s.ytimg.com/yts/img/silhouette250-vflEqxKg9.png](http://s.ytimg.com/yts/img/silhouette250-vflEqxKg9.png) ![在此处输入图像描述](../Images/e1b2b27572a67d0cc281c96736b54d41.png)

我的问题是，我如何使用按频道 API 搜索[获得](http://gdata.youtube.com/feeds/api/channels?alt=json&q=)[http://s.ytimg.com/yts/img/silhouette250-vflEqxKg9.png（http://gdata.youtube.com/feeds/api/channels?alt](http://s.ytimg.com/yts/img/silhouette250-vflEqxKg9.png) [=json&q=](http://gdata.youtube.com/feeds/api/channels?alt=json&q=) )，而不是[http://s.ytimg.com/yt/img/no_videos_140.png](http://s.ytimg.com/yt/img/no_videos_140.png)？

**更新：我想知道如果用户有 yt$googlePlusUserId，那么它不会有问题，例如用户[http://gdata.youtube.com/feeds/api/users/UCBJ7AiDylXmwgUlSQFM2luw?alt=json&safeSearch=strict&restriction=MY&prettyprint=True&fields= yt:googlePlusUserId](http://gdata.youtube.com/feeds/api/users/UCBJ7AiDylXmwgUlSQFM2luw?alt=json&safeSearch=strict&restriction=MY&prettyprint=True&fields=yt:googlePlusUserId)**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:11:21.827

我建议使用 YouTube Data API v3。如果您对搜索资源进行以下调用，它将返回三个不同的缩略图供您选择。如果频道尚未上传缩略图，它将与您引用的剪影相同，但具有唯一的频道网址。使用此 url 作为您的 img 源的好处是，如果频道决定上传缩略图，您不必更改图像以反映该更改。

[https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&q=ghghghgh&type=channel&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&q=ghghghgh&type=channel&key=%7BYOUR_API_KEY%7D)

回复：

```
{
 "kind": "youtube#searchListResponse",
 "etag": "\"O7gZuruiUnq-GRpzm3HckV3Vx7o/PaWiOpjYBhvp7UVKUk3QeiagLtw\"",
 "pageInfo": {
  "totalResults": 33,
  "resultsPerPage": 2
 },
 "nextPageToken": "CAIQAA",
 "items": [
  {
   "id": {
    "kind": "youtube#channel",
    "channelId": "UCLm-kPkFGRaV0t55q7-VwgQ"
   },
   "kind": "youtube#searchResult",
   "etag": "\"O7gZuruiUnq-GRpzm3HckV3Vx7o/x_NADGr-4b04fqoDn_uRBGj99eQ\"",
   "snippet": {
    "publishedAt": "2006-03-13T04:10:45.000Z",
    "channelId": "UCLm-kPkFGRaV0t55q7-VwgQ",
    "title": "barrett90",
    "description": "",
    "thumbnails": {
     "default": {
      "url": "http://i.ytimg.com/i/Lm-kPkFGRaV0t55q7-VwgQ/1.jpg"
     },
     "medium": {
      "url": "http://i.ytimg.com/i/Lm-kPkFGRaV0t55q7-VwgQ/mq1.jpg"
     },
     "high": {
      "url": "http://i.ytimg.com/i/Lm-kPkFGRaV0t55q7-VwgQ/hq1.jpg"
     }
    }
   }
  } 
```

您可以在此处获取 API 密钥： [https ://code.google.com/apis/console](https://code.google.com/apis/console)

# c++ - std::bind 的奇怪行为

> ID：14935350
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:35:06.220
> 
> 标签：c++, visual-c++, c++11

我正在使用它`std::bind`来绑定类外的函数并给出一个奇怪的行为。

它在某种程度上控制私有成员变量的值。

```
//MClass.h
typedef std::function<void(void)> Action;

class MClass {

public:

  Action OnLeftClick;

//some other functions here

private:
  int totalContents;

  VScrollbar* _vscrollbar;

};

//MClass.cpp 
```

在这种实现中，它不会产生任何错误：

```
MClass::MClasss() {

  OnLefClick = std::bind(&VScrollbar::Scrolldown, this);

}

//but when I do this
//otherfile.h

MClass mclass;

void clickBar() {

  mclass.totalContents = 0;

}

void InitComponentns() {   

mclass.OnLeftClick = std::bind(clickBar, mclass);

} 
```

并且每当我调用分配给`OnLeftClick()`that的函数时`clickBar()`， 的值`totalContents`不会变为 0（totalContents 值由 MClass 的其他函数递增）。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:41:32.450

调用中的`this`参数`std::bind`实际上是函数的第一个参数。对于成员函数，这必须是该函数所属的类的实例，因为所有成员函数都有一个隐藏的第一个参数，即`this`指针。

因此，要使您的代码正常工作， 的第一个参数必须`VScrollbar::Scrolldown`是类的实例，而`VScrollbar`不是`this`. `MClass`像这样：

```
OnLefClick = std::bind(&VScrollbar::Scrolldown, _vscrollbar); 
```

对于第二次`std::bind`调用，您应该只将函数指针传递给它，因为它是一个不带参数（隐藏或不隐藏）的函数：

```
mclass.OnLeftClick = std::bind(clickBar); 
```

我很惊讶问题中的代码会构建，因为`totalContents`成员变量是私有的，并且不能从`clickBar`函数中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:47:31.593

好吧，对于初学者来说，您不能将 mclass 绑定到 clickBar，因为该函数不接受任何参数。您可以修改函数以引用`MClass`：

```
void clickBar(MClass& m) { m.totalContents = 42; } 
```

其次，即使可以，bind 也会复制 mclass。你可以通过一个`std::reference_wrapper`代替，使用`std::ref`：

```
#include <functional>

struct MClass { int totalContents = 0;};

void clickBar(MClass& m) { m.totalContents = 42; }

int main() {   
  MClass mclass;
  auto OnLeftClick = std::bind(clickBar, std::ref(mclass));
  OnLeftClick();
} 
```

# ios - 使用核心动画的链式动画

> ID：14935354
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:35:23.247
> 
> 标签：ios, xcode, ipad, core-animation

我有几个使用 CABasicAnimation、CATransition、CAKeyFrameAnimation 的动画。我希望这些动画依次为不同的图层制作动画。我尝试使用 CAAnimationGroup，但“CAAnimationGroup”用于为单层提供不同的动画效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:39:41.510

我发现使用 NSTimer 的对象可以链接动画。我发现这个过程有点模棱两可，但可以用作解决方法。

# jquery - 单击侦听器无法从生成的带有 jsondata 的 html 中工作

> ID：14935359
> 
> 赞同：1
> 
> 时间：2013-02-18T11:35:47.770
> 
> 标签：jquery, json

无法从元素获取单击侦听器的值。
当我点击“tagit”时，它什么也不会发生，也不知道为什么！！

我的 javascript 中有这段代码：

```
<script type="text/javascript">
function UpdateBuddyStat()
{
    $.getJSON('/update-buddies', function(jsonData){

     var counterjson = 0;
     var LI_list_html = '';

     $.each(jsonData, function(i,value){

      var count = counterjson++;
      var username = jsonData[i].name;
      var buddy = jsonData[i].buddyid;

      var DIV_html = username+' <div class="FunctionBuddyBox"><span class="TagBuddy" id="TagsBuddy_'+buddy+'" data-tagbuddyid="'+buddy+'">tagit</span></div>';

      LI_list_html = LI_list_html+'<li>'+DIV_html+'</li>';
     });

     $("#ShowBuddyList ul li").remove();
     $("#ShowBuddyList ul").html(LI_list_html);  
    })
}
setInterval("UpdateBuddyStat()", 3000);
</script> 
```

这就是我捕捉听众的方式：

```
$('[id^=TagsBuddy_]').click(function(){
    var buddyid = $(this).data('tagbuddyid');
    alert(buddyid);         
}); 
```

通过下面的代码（静态html）它可以正常工作：

```
<?php echo $value['name'] ?> <div class="FunctionBuddyBox">
<span class="TagBuddy" id="TagsBuddy_<?php echo $value['fb_id'] ?>" data-tagbuddyid="<?php echo $value['fb_id'] ?>">tagit</span>
</div> 
```

不知道为什么！有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:39:53.033

使用事件委托来处理事件：

```
$('#ShowBuddyList').on('click', '[id^=TagsBuddy_]', function() {
    var buddyid = $(this).data('tagbuddyid');
    alert(buddyid);         
}); 
```

另外，不要使用字符串`setInterval`：

```
setInterval("UpdateBuddyStat()", 3000); 
```

传递函数：

```
setInterval(UpdateBuddyStat, 3000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T11:40:24.797

您需要事件委托：

```
$("#ShowBuddyList").on('click', '[id^=TagsBuddy_]', function(){
    var buddyid = $(this).data('tagbuddyid');
    alert(buddyid);         
}); 
```

委托给 dom 中可用的最近的父级，或者`document`改为使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T11:41:23.140

当您动态加载 HTML 内容时，您必须将其`.on()`用作事件侦听器。尝试

```
$('#ShowBuddyList ul').on('click', '[id^=TagsBuddy_]', function(){
    var buddyid = $(this).data('tagbuddyid');
    alert(buddyid);         
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T11:39:11.550

改变

```
$('[id^=TagsBuddy_]').click(function(){
    var buddyid = $(this).data('tagbuddyid');
    alert(buddyid);         
}); 
```

到

```
$('#ShowBuddyList').on('click','[id^=TagsBuddy_]',(function(){
    var buddyid = $(this).data('tagbuddyid');
    alert(buddyid);         
}); 
```

该`click()`方法仅适用于页面加载期间添加的元素 - 您需要[`on()`](http://api.jquery.com/on/)用于动态添加的内容。请注意，`on()`方法的选择器需要在文档加载时出现，并且必须是`on()`方法内部使用的选择器的父元素（`'[id^=TagsBuddy_]'`在本例中）

# c# - 我们可以用汇编版本的次要值添加一个额外的字符吗？

> ID：14935364
> 
> 赞同：6
> 
> 时间：2013-02-18T11:36:12.037
> 
> 标签：c#, .net, wpf, visual-studio-2008

是否可以在汇编版本中添加字符？前`10.1.1.1a`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T11:38:03.987

没有。程序集版本（由 指定[`AssemblyVersionAttribute`](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx)）遵循[`System.Version`](http://msdn.microsoft.com/en-us/library/system.version.aspx)系统，*严格来说*是四个数字。

但是，您可以使用[`AssemblyInformationalVersionAttribute`](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyinformationalversionattribute.aspx)来提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:37:46.950

不：

> [程序集版本属性](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute(v=vs.110).aspx)：
> 
> 版本的所有组件必须是大于或等于 0 的整数。

# c# - 基于偏好百分比的 Sitecore 多变量测试

> ID：14935367
> 
> 赞同：2
> 
> 时间：2013-02-18T11:36:21.753
> 
> 标签：c#, sitecore, sitecore6, multivariate-testing, sitecore-dms

我正在用 C# 为 Sitecore 6.5（更新 5）MVT 编写一些代码，当前的 MVT 是 100% 随机的，管理员无法控制内容的随机性。

我想为管理员提供一个选项来配置具有随机性的 %。所以他们可以配置（80%-20%）或（60%-20%-20%）或（25-25-25-25）或任何组合。

我正在考虑的方法是保留一个计数器，然后根据百分比运行。因此，对于 80-20，每 5 个访问者将获得 B 版内容。但是有很多组合，我不想像我之前所说的那样对任何序列进行硬编码。

我想要这些百分比的纯结果，即我不想发送小于 0.2 的随机数作为 20% 的结果。这不是正确的百分比，因为它仍然超过 20% 的结果。请参考[我](https://stackoverflow.com/questions/4343049/divide-results-based-on-percentage)所说的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:46:31.823

如果您有足够的访问者，您可以从一个（恒定）袋子中随机抽取物品，这些物品具有编辑器配置的相对百分比（（80％-20％）或（60％-20％-20％） ) 或 (25-25-25-25) 或任何组合）。所以对于 80/20，你会生成一个 1..100 范围内的随机数。对于任何< 80，您显示版本一，其余版本二。此设置可以存储为参数模板。并且可以使用自定义规则或自定义表示逻辑来实现 MVT 逻辑。

# gsm - AT + STSF = 1 命令在激活 sim 工具包功能时返回错误

> ID：14935374
> 
> 赞同：1
> 
> 时间：2013-02-18T11:36:45.283
> 
> 标签：gsm, at-command, sim-card, sim-toolkit

最近我正在尝试使用 SIM 应用程序工具包。我想获取 SIM 提供的服务的菜单列表。为此，据我所知，我必须使用几个 GSM 开发人员指南所说的**AT+STSF=1 AT 命令激活 SIM 工具包功能。**

但是在给出该命令来设置功能时，我得到了一个错误结果。同时我正在使用支持 STK 的调制解调器。

这里的实际问题是什么？

或者是否有任何其他方式可以选择 SIM 提供的这些服务的菜单。

我已经用谷歌搜索了很多，但不幸的是没有得到真正的答案。

请在这方面帮助我。

提前致谢。

# replace - Notepad++ 查找和替换

> ID：14935376
> 
> 赞同：0
> 
> 时间：2013-02-18T11:36:46.837
> 
> 标签：replace, notepad++, add

我需要帮助以使用以下语法更改 100 多行代码：

```
Create3DTextLabel(text[], color, Float:X, Float:Y, Float:Z, Float:DrawDistance, virtualworld) 
```

对此：

```
CreateDynamic3DTextLabel(text[], color, Float:x, Float:y, Float:z, Float:DrawDistance, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, virtualworld, -1, -1, 100.0); 
```

这是示例行：

```
Create3DTextLabel("Bussijaam (A 1, 2, X1, N1)",0x66CC00FF,1785.36, -1836.29, 14.50,30.0,0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:45:43.337

按 ctrl+H 或导航到菜单栏>>搜索>>替换...菜单 在查找内容字段中键入“Create3DTextLabel”，在替换为字段中键入“CreateDynamic3DTextLabel”

取消选中“仅匹配整个单词”单击全部替换按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:20:29.360

我不确定虚拟世界是什么，我假设它是 0-1 标志，并且我使用以下值作为替换功能：

找什么：

```
Create3DTextLabel\("(.*)",([\sx0-9A-F]+),([\s-0-9.]+),([\s-0-9.]+),([\s-0-9.]+),([\s-0-9.]+),([01]+)\); 
```

用。。。来代替：

```
CreateDynamic3DTextLabel("\1",\2,\3,\4,\5,\6,INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0,\7,-1,-1,100.0); 
```

# matlab - 在均匀强度图像中检测物体

> ID：14935377
> 
> 赞同：7
> 
> 时间：2013-02-18T11:36:48.330
> 
> 标签：matlab, image-processing, computer-vision, edge-detection

我有Tiger's Pugmark（足迹印象）在泥土中的图像。我想检测 pugmark 的边界，但图像的强度是均匀的，即前景和背景无法根据强度变化来区分。我该怎么做才能区分 pugmark 和背景。！

[![老虎的pugmark](../Images/860da03bd1863138fedb74e69499efd6.png)](https://i.stack.imgur.com/ziQeD.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T14:42:25.420

在分段任务中，如果你有两者

1.  良好的标记；和
2.  感兴趣对象周围的强边缘

然后直接通过分水岭变换求解。当然，问题在于获得这些标记，以及根据需要增强相关边缘。获得这些可能涉及特定于问题的知识，我没有针对您的问题的知识。

不过，有一些通用方法可能有用。例如，数学形态学中的连接算子可用作合并和扩展平坦区域的一种方式。因此，也许它可以为我们提供相对较好的问题标记。在下图中，在原始图像（左图）的灰度版本中通过开运算（一种连接算子）进行了形态学重建，剩余的区域最大值显示在右侧。

![在此处输入图像描述](../Images/185bb4c1423a63e174abe4ac9500bad8.png) ![在此处输入图像描述](../Images/a9b7a6fb2c73fb2706ca3d2c33981893.png)

现在，我们可以得到上图左图的形态梯度。我们还可以在上图中用一个小圆盘进行空洞填充和膨胀，以获得更平滑的轮廓——这定义了我们的标记图像。然后，使用我们的标记图像在渐变图像中应用分水岭变换，然后扩展（侵蚀或扩张，取决于你如何看待它）分水岭线，我们得到以下图像：

![在此处输入图像描述](../Images/03c3fa7c3be5b3332fe277db91c2755e.png)

我怀疑您可以轻松丢弃太大和太小的区域。然后，如果您对爪子和手掌有一些粗略的预期尺寸，您可以丢弃不相关的区域。此时，只需将区域扩大以形成单个组件并在原始图像中显示生成的轮廓：

![在此处输入图像描述](../Images/61e97387cae76945963744a34d966c84.png)

执行每个步骤的示例代码（相关步骤也显示在注释的 Matlab 代码中）：

```
f = Import["http://imageshack.us/a/img407/4636/p1060993g.jpg"]
g = ColorConvert[f, "Grayscale"]                           (* g = rgb2gray(f); *)
(* First image shown: *)
geo = GeodesicOpening[g, DiskMatrix[5]]  (* geo = imreconstruct(imerode(g, ... *)
                                         (*         strel('disk', 6)), g);     *)
(* Second image shown: *)
marker = MaxDetect[geo]                        (* marker = imregionalmax(geo); *)

(* Watershed on gradient with markers. *)
mgrad = ImageSubtract[Dilation[geo, 1], Erosion[geo, 1]]; (* mgrad = ...       *)
          (* imdilate(geo,strel('square',3)) - imerode(geo,strel('square',3)); *)
ws = Image[           (* ws = watershed(imimposemin(mgrad, bwmorph(imfill(...  *)
 WatershedComponents[mgrad,      (* imregionalmax(geo),'holes'),'dilate'))));  *)
  Dilation[FillingTransform[marker], DiskMatrix[1]]]]

(* Third image shown: *)
wsthick = Erosion[ws // ImageAdjust, DiskMatrix[5]]

(* Connected component selection based on some supposed sizes. *)
ccs = SelectComponents[wsthick, "Count", 1000 < # < 3000 || 6000 < # < 10000 &]

(* Final image (thick border on binarized filled dilated ccs) *)
res = ImageAdd[f, Dilation[MorphologicalPerimeter[FillingTransform[
     MorphologicalPerimeter[Dilation[ccs, DiskMatrix[9]]]]], 2]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T18:15:00.760

@mmpg 答案中的方法可能不稳定，因为使用的算法需要设置参数，这些参数可能特定于每个图像。使用对形状具有先验知识的参数模型似乎可以更好地解决这个问题。

[主动形状模型](http://en.wikipedia.org/wiki/Active_shape_model)框架迭代地逼近形状的边界。首先，你用一些平均形状初始化它（图像只是插图，不是算法的实际输出）：

![形状的初始化](../Images/e741bd7a7af9d6dc8ed429b3ac5c78b1.png)

轮廓由锚点定义（由蓝色刻度显示，仅用于手掌以避免混乱）。在每次迭代中，算法考虑每个锚点的正交方向并估计每个距离处边界的概率（通常使用图像梯度，但在您的情况下它应该更复杂 - 可能是纹理的差异，例如[直方图之间的距离的文本](http://www.robots.ox.ac.uk/~vgg/research/texclass/with.html)）。此处红点突出显示该分布的 arg 最大值：

![边缘分布的模式](../Images/68a8df2671cf4aee2056f8653d25898b.png)

然后将新轮廓拟合到数据以最大化这些分布乘以形状的先验分布。假设先验均匀，新轮廓将如下所示：

![新的轮廓](../Images/35bb6a5db6afcc2d1ea488da7e00ea8d.png)

在实践中，您希望有一个非平凡的形状分布。要估计这一点，您将需要一组训练图像，其中 pugmark 掩码是手动标记的。

您可能想尝试[这个 MATLAB 实现](http://www.mathworks.com/matlabcentral/fileexchange/26706-active-shape-model-asm)。

# php - 使用 PHP 在特定计数中转换/调整数字

> ID：14935390
> 
> 赞同：1
> 
> 时间：2013-02-18T11:37:44.343
> 
> 标签：php, count, numbers

我有数字 1543，我想确保找到最接近 1543 的数字，每 100 计数一次。例如：

> 1527 = 1500
> 
> 1563 = 1600
> 
> 12034 = 12000
> 
> 12081 = 12100

我希望你能理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:41:45.727

使用[`round()`](http://php.net/manual/en/function.round.php)精度值为 的函数`-2`，

```
round( $number, -2); 
```

[键盘毒蛇演示。](http://codepad.viper-7.com/LPm36H)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:41:09.643

您可以通过将数字除以 100 并使用[round](http://www.php.net/manual/en/function.round.php)函数来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:42:11.410

```
<?php

    function foo($number, $d)
    {
        return round($number / $d) * $d;
    }

    echo foo(1527, 100) . "\n";
    echo foo(12081, 100) . "\n";

?> 
```

# java - 为什么列出 list = new ArrayList () this give TypeMismatch error List list = new ArrayList<string>() When I use the above line compiler gives me type mismatch error. But as I underst 问问题 问问题 2013-02-18T11:37:55.357 20687 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. List list = new ArrayList<string>() When I use the above line compiler gives me type mismatch error. But as I understand Object is super class of String and if I create list of object then it should also accept String. So why above statement is wrong. I am looking for an explanation. Just replace: List list = new ArrayList<string>() with List <string>list = new ArrayList<string>() or List list = new ArrayList() It is important here that you operate with the same data type Or you can also use List list = new ArrayList(); javacollectionsarraylistjava-6 4 5 回答 5 This answer is useful 6 One sentence, because Generic types are not polymorphic i.e., even though java.lang.String is a subtype of java.lang.Object polymorphism doesn't apply to generic types. It only applies to collection types. thus List list = new ArrayList<string>(); //this isn't valid   List list = new ArrayList(); //valid List list = new ArrayList<string>();//valid Why can't generic types be polymorphic? 于 2013-02-18T11:40:24.803 回答 This answer is useful 1 Because you define what possible list can be associated with. The correct way would be List list = new ArrayList<string>(); which is the same as List list = new ArrayList<string>(); 于 2013-02-18T11:44:23.497 回答 This answer is useful 1 A is a super type of B does not imply List is a super type of List**. If such proposition holds, consistency of type system will be violated. Consider the following case: // ! This code cannot pass compilation. List <string>list1 = new ArrayList<string>(); List list2 = list1; // Error // Previous conversion causes type contradiction in following statements. list2.add(new SomeOtherClass()); String v = list1.get(0); // list1.get(0) is not String! That's why List should not be super type of List<string>. 于 2013-02-18T12:07:12.840 回答 This answer is useful 0 The type of the variable declaration must match the type you pass to the actual object type. If you declare List <foo>foo then whatever you assign to the foo reference MUST be of the generic type . Not a subtype of <foo>. Not a supertype of <foo>. Simple Generic types are not polymorphic List <parent>myList = new ArrayList<child>() \\ Invalid 于 2013-02-18T11:44:40.587 回答 This answer is useful 0 只需更换： List list = new ArrayList<string>() 和 List <string>list = new ArrayList<string>() 或者 List list = new ArrayList() 在这里重要的是您使用相同的数据类型进行操作 或者你也可以使用 List list = new ArrayList(); 于 2013-02-18T11:40:01.897 回答 Related 1 ruby-on-rails - Twitter引导程序修复表格的查看区域 2 javascript - 将 json 对象传递给在 slickgrid 中查看和显示 2 c++ - 定义变量时存储整数文字 2 html - 需要谷歌地图帮助 5 android - 我们如何使用片段选项卡调用另一个活动？ 1 python - 尝试访问 python 脚本中的列时获取行 1 ssrs-2008 - SSRS 根据先前日期参数的选择将日期/时间参数设置为 NULL 2 php - 在 jquery 评论系统中，仅对新评论使用 hide() 和 fadeIn('slow') 而不是对所有评论 1 css - 为什么在 SASS 中 #{$var} 之后没有编译括号？ 3 php - 在php中为html表上的行添加删除按钮 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14935394
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, collections, arraylist, java-6

```
List<Object> list = new ArrayList<String>() 
```

When I use the above line compiler gives me type mismatch error. But as I understand Object is super class of String and if I create list of object then it should also accept String. So why above statement is wrong. I am looking for an explanation.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:40:24.803

One sentence, because

> Generic types are not polymorphic

i.e., even though `java.lang.String` is a subtype of `java.lang.Object` polymorphism doesn't apply to generic types. It only applies to collection types. thus

```
List<Object> list = new ArrayList<String>(); //this isn't valid
    List<Object> list = new ArrayList<Object>(); //valid
List<? extends Object> list = new ArrayList<String>();//valid 
```

**[Why can't generic types be polymorphic?](https://stackoverflow.com/questions/13993745/add-strings-through-use-of-generic-extends-causes-compiler-error/13993770#13993770)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:44:23.497

Because you define what possible list can be associated with.

The correct way would be

`List<?> list = new ArrayList<String>();`

which is the same as

`List<? extends Object> list = new ArrayList<String>();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:07:12.840

`A` is a super type of `B` does not imply `List<A>` is a super type of `List<B>`. If such proposition holds, consistency of type system will be violated. Consider the following case:

```
// ! This code cannot pass compilation.
List<String> list1 = new ArrayList<String>();
List<Object> list2 = list1;  // Error
// Previous conversion causes type contradiction in following statements.
list2.add(new SomeOtherClass());
String v = list1.get(0);  // list1.get(0) is not String! 
```

That's why `List<Object>` should not be super type of `List<String>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:44:40.587

The type of the variable declaration **must** match the type you pass to the actual object type. If you declare `List<Foo>` foo then whatever you assign to the foo reference **MUST** be of the generic type . Not a subtype of `<Foo>`. Not a `supertype` of `<Foo>`.

```
Simple Generic types are not polymorphic 
```

`List<Parent> myList = new ArrayList<Child>() \\ Invalid`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T11:40:01.897

只需更换：

```
List<Object> list = new ArrayList<String>() 
```

和

```
List<String> list = new ArrayList<String>() 
```

或者

```
List<Object> list = new ArrayList<Object>() 
```

在这里重要的是您使用相同的数据类型进行操作

或者你也可以使用

```
 List<?> list = new ArrayList<Object>(); 
```</string></string></string></child></parent></foo></foo></foo></string></string></string>**</string></string></string></string></string></string></string></string></string>

# c - 使用 void 指针和计算的偏移量为结构成员赋值

> ID：14935403
> 
> 赞同：2
> 
> 时间：2013-02-18T11:38:36.377
> 
> 标签：c, structure, offset, void

我正在尝试将值分配给函数中的结构成员，该函数接受 void * 作为参数，然后根据为结构成员计算的偏移量填充数据值。

```
 typedef struct
    {
       char C_BFR_LINK[1];
       char C_TABLE_DATA[1];
       double MF_COD_BALANCE;
       char C_TYPE_DT[1];
    }ANS; 
```

功能

```
void fillin( void *pp)  
{  

 double* FVAR;  
 char* CVAR;  
 CVAR = pp;  
 memcpy(CVAR,"I",1);  
 CVAR = (void *)(pp + 1);  
 memcpy(CVAR,"S",1);  
 FVAR = (void *)(pp + 2);  
 *FVAR = 234.96;  
 CVAR = (void *) (pp + 10);  
  memcpy(CVAR,"Z",1);  
  return ;   
} 
```

负责分别填写偏移量 1、2 和 10 处的值。

我在 main 中调用这个函数，如下
**

```
int main()  
 {  
   void* p ;
  ANS ans;  
  fillin(&ans);  
  return 0;  
 } 
```

**

我使用 gdb 进行了调试，在函数**fillin**中将值分配给成员，但是一旦**控件进入主程序，double 值就会丢失**并且不正确。

```
(gdb) p pp
$1 = (void *) 0xffffdabc    
(gdb) x /c 0xffffdabc  
0xffffdabc:     73 'I'  
(gdb) x /c 0xffffdabd    
0xffffdabd:     83 'S'  
(gdb) n  
32       *FVAR = 234.96;  
(gdb) n  
33      CVAR = (void *) (pp + 10);  
(gdb) **x /f 0xffffdabe**  
0xffffdabe:     234.96000000000001  
57       return 0;  
(gdb) **p ans**  
$2 = {C_BFR_LINK = "I", C_TABLE_DATA = "S",  
  **MF_COD_BALANCE = 1.9876540305898699e-268**, C_TYPE_DT = "\213"} 
```

谁能帮我吗？此代码是使用 gcc 4.4.6 20120305 构建的。非常感谢任何指针或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:07:32.560

正如其他人已经提到的那样，这是一个非常糟糕的主意，但是，如果您打包结构以避免填充并使用 a`char *`并且`sizeof()`您可能能够摆脱它，例如：

```
typedef struct {
   char C_BFR_LINK[1];
   char C_TABLE_DATA[1];
   double MF_COD_BALANCE;
   char C_TYPE_DT[1];
}__attribute__((__packed__)) ANS;

void fillin( void *pp)  
{  
    char* CVAR = pp;
    double FVAR = 234.96;
    /* sizeof(char) is always one */
    memcpy(CVAR, "I", sizeof(char));  
    CVAR += sizeof(char);
    memcpy(CVAR, "S", sizeof(char));  
    CVAR += sizeof(char);
    memcpy(CVAR, &FVAR, sizeof(double));
    CVAR += sizeof(double);
    memcpy(CVAR,"Z",1);  
}  
int main()  
{  
    ANS ans;  
    fillin(&ans);  
    printf("%c\n", ans.C_BFR_LINK[0]);
    printf("%c\n", ans.C_TABLE_DATA[0]);
    printf("%c\n", ans.C_TYPE_DT[0]);
    printf("%f\n", ans.MF_COD_BALANCE);
    return 0;  
} 
```

这打印：

```
I
S
Z
234.960000 
```

注意：这不适用于*不*支持未对齐内存访问的架构，可能还有其他我不知道的问题，因此，一种更便携的方法是让编译器填充结构并`offsetof`按照建议使用宏通过其他答案，计算成员从结构开头的偏移量，例如：

```
#define offsetof(type, member)  __builtin_offsetof (type, member)
CVAR + offsetof(ANS, C_BFR_LINK); //evaluates to 0
CVAR + offsetof(ANS, C_TABLE_DATA); //evaluates to 1
CVAR + offsetof(ANS, MF_COD_BALANCE); //evaluates to 8
CVAR + offsetof(ANS, C_TYPE_DT); //evaluates to 16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:51:31.593

编译器将添加“填充”以对齐结构中的某些类型。填充量取决于编译器、编译的处理器、使用的编译器设置等。

正如“展开”所提到的，提供了一些宏来计算结构的偏移量`offsetof(type, member)`，“做正确的事”。您的代码将浮点数填充到两个 char 变量和实际浮点变量之间的“nomansland”（填充）中，这就是为什么您得到“随机”结果的原因 [显然不是完全随机的 - 只是“不是你所期望的” - 这完全是如果您知道偏移量的差异并找出它提供的浮点值的位模式，则可以预测]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:51:44.163

编译有警告

```
CVAR = (void *)(pp + 1); 
```

这给你 `warning: pointer of type ‘void *’ used in arithmetic`

```
FVAR = (void *)(pp + 2);  
*FVAR = 234.96;  
CVAR = (void *) (pp + 10); 
```

假设`sizeof(double) == 8`不是一个好主意

# ios - 两个应用程序之间的 CoreData 迁移概念

> ID：14935405
> 
> 赞同：0
> 
> 时间：2013-02-18T11:38:46.693
> 
> 标签：ios, core-data, updates

在更新我的应用程序时，我遇到了很大的概念问题。这是我现在得到的：

1.  具有 CoreData 生成模型的应用程序，具有给定的捆绑包 ID 等。
2.  具有 CoreData 生成模型的第二个应用程序，具有与 1 中相同的包 ID。

应用程序版本 1 和 2 之间的模型在删除某些关系和不使用某些模型（也被删除）的方式上有所不同。我刚刚将用户设置移动到用户默认值，而不是从数据库中获取它们，这是一项昂贵的操作。

现在我想用我的第二个版本 (2) 来更新我的应用程序 (1)。我不知道如何在这种情况下进行迁移。我想保留用户设置并将它们从模型 (1) 移动到用户默认值并用模型 (2) 替换模型 (1)。

我已经阅读了关于核心数据迁移的内容，但是这些示例都反映了使用单个项目并创建另一个版本的核心数据模型，因为 (2) 完全是新项目（当然我有访问（1）的源代码）。

我正在考虑使用两个数据库（如果有更好的解决方案，请纠正我），从（1）获取用户设置并将它们写入用户默认值，然后删除数据库（1）并仅使用（2）。如果在我的情况下这是正确的方法，我如何在单个项目中使用两个不同的 xcdatamodeld 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:37:32.630

CoreData 轻量级迁移允许您在架构发生细微更改时轻松更新数据库。当您进行较大的更改时，您需要使用迁移映射过程。

Apple 在[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMigrationManager_class/Reference/NSMigrationManager.html#//apple_ref/occ/cl/NSMigrationManager中记录了该过程](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMigrationManager_class/Reference/NSMigrationManager.html#//apple_ref/occ/cl/NSMigrationManager)

`NSMigrationManager`是关键。您可以创建一个处理您认为合适的自定义迁移的子类。主要关注的方法是：

```
migrateStoreFromURL:type:options:withMappingModel:toDestinationURL:destinationType:destinationOptions:error: 
```

它允许您指定源数据库（您的版本 1）和目标数据库（版本 2）。

此引用`NSMappingModel`允许您定义两个数据库中的数据如何相互关联。Xcode 为这个过程提供了一个方便的图形界面。只需从新文件对话框中创建一个新的映射模型。

迁移完成后，您可以安全地删除旧的 CoreData 存储。

然后，当您创建新的持久存储协调器时，您可以检查原始存储是否存在，如果存在则执行迁移。

# javascript - 在上下文菜单中绑定树视图

> ID：14935406
> 
> 赞同：0
> 
> 时间：2013-02-18T11:38:48.587
> 
> 标签：javascript, jquery

我试图在上下文菜单中绑定树视图（使用 jquery）。

这是我的上下文菜单脚本：

```
$(function() {
    $.contextMenu({
        selector: '.context-menu-one', 
        callback: function(key, options) {
            var m = "clicked: " + key;
            window.console && console.log(m) || alert(m); 
        },
        items: {
            "edit": {
                name: "Closing on Click", 
                callback: function(){ return true; }
            },
            "cut": {
                name: "Open after Click", 
                callback: function(){ return false; }
            }
        }
    });
}); 
```

因为树视图是面向 ul li 的，如何在上下文菜单选项中包含它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:23:21.103

从代码我猜你使用[这个](http://medialize.github.com/jQuery-contextMen)插件

因此，根据您的 html（已更正）和您拥有的插件文档

```
<div id="myMenu">
    <ul> 
        <li><span>Submenu1</span>
            <ul> 
                <li><span>submenu 1.1</span></li> 
            </ul>
        </li> 
    </ul>
</div> 
```

和

```
$(function() { 
    $.contextMenu({
        selector: '#myMenu ul li',         
        items: {
            "edit": {
                name: "Closing on Click", 
                callback: function(){ return true; }
            },
            "cut": {
                name: "Open after Click", 
                callback: function(){ return false; }
            }
        }
    });
}); 
```

[jsfiddle](http://jsfiddle.net/XmMMg/1/)

# android - 安装 APK INSTALL_PARSE_FAILED_MANIFEST_MALFORMED 时出错 - Android

> ID：14935408
> 
> 赞同：3
> 
> 时间：2013-02-18T11:39:00.323
> 
> 标签：android, android-manifest

我遇到了这个错误，无法让我在任何设备上安装 apk：

> 安装错误：INSTALL_PARSE_FAILED_MANIFEST_MALFORMED

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example"
    android:versionCode="2"
    android:versionName="1.0.1" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.GET_TASKS" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
        <activity
            android:name="com.example.activities.MainTabs"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.apphance.android.LAUNCH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.activities.TourInfo"
            android:label="@string/title_activity_tour_info" >
        </activity>
        <activity
            android:name="com.example.TestActivity"
            android:label="@string/title_activity_test" >
        </activity>
        <activity
            android:name="com.example.activities.DiscoverTab"
            android:label="@string/title_activity_discover_tab_group" >
        </activity>
        <activity
            android:name="com.example.activities.MyToursTab"
            android:label="@string/title_activity_my_tours_tab_group" >
        </activity>
        <activity
            android:name="com.example.activities.SettingsTab"
            android:label="@string/title_activity_settings_tab_group" >
        </activity>
        <activity
            android:name="com.example.activities.Discover"
            android:label="@string/title_activity_discover" >
        </activity>
        <activity
            android:name="com.example.activities.MyTours"
            android:label="@string/title_activity_my_tours" >
        </activity>
        <activity
            android:name="com.example.activities.Settings"
            android:label="@string/title_activity_settings" >
        </activity>
        <activity
            android:name="com.example.activities.Topics"
            android:label="@string/title_activity_topics" >
        </activity>
        <activity
            android:name="com.example.activities.Places"
            android:label="@string/title_activity_places" >
        </activity>

        <activity-alias
            android:name="com.example.ApphanceLauncherActivity"
            android:targetActivity="com.apphance.android.LauncherActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" >
                </action>

                <category android:name="android.intent.category.LAUNCHER" >
                </category>
            </intent-filter>
        </activity-alias>

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="com.apphance.android.LauncherActivity"
            android:theme="@android:style/Theme.Translucent.NoTitleBar" >
        </activity>
        <activity
            android:name="com.apphance.android.ui.LoginActivity"
            android:launchMode="singleInstance" >
        </activity>
        <activity
            android:name="com.apphance.android.ui.TestCycleActivity"
            android:launchMode="singleInstance" >
        </activity>
        <activity
            android:name="com.apphance.android.ui.ProblemActivity"
            android:configChanges="orientation"
            android:launchMode="singleInstance" >
        </activity>
    </application>

    <instrumentation
        android:name="com.apphance.android.ApphanceInstrumentation"
        android:targetPackage="com.example" >
    </instrumentation>

</manifest> 
```

PS：我使用 Apphance API 已经有一段时间了，它从来没有给我带来任何问题。

**编辑：**我错误地运行了一个具有相同包名的项目，这导致我在第二个项目中出现了一些错误，所以我改变了它。它与这个项目中的错误有什么关系吗？

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T08:33:48.477

“活动的别名，由 targetActivity 属性命名。目标必须与别名在同一个应用程序中，并且必须在清单中的别名之前声明。”

将 LauncherActivity 放在 ApphanceLauncherActivity 前面

[活动别名元素](https://developer.android.com/intl/zh-CN/guide/topics/manifest/activity-alias-element.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:31:25.973

如果您进行开发，您将检查 Eclipse 问题窗口。如果您有标记错误，请在问题窗口中查看错误行和描述文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:09:38.520

它与 Apphance API 有关，当我将标签作为标签中的最后一个标签时，它工作得很好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T15:20:36.247

您的包裹名称应该以小写字母开头，而不是大写字母。

我通过以小写字母开头的包名来解决这个问题>>>相信我。

# scala - Scala导入多个包

> ID：14935409
> 
> 赞同：9
> 
> 时间：2013-02-18T11:39:04.290
> 
> 标签：scala, package

我有一些 Scala 类和对象，在它们自己的包中。每个包都有一个包对象定义一些隐式，例如从包中`import com.foo.bar._`导入所有隐式和类`bar`

我想知道的是，有没有办法定义一个“伞”进口，比如说`com.foo.all`，这样

```
import com.foo.all._ 
```

相当于

```
import com.foo.bar._
import com.foo.baz._
import com.foo.qux._
... 
```

我可以理解这可能有点不清楚，但是如果我们考虑我自己有大量包的情况，这显然会更简洁。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T11:44:26.057

我能想到的最短形式是：

```
import com.foo._, bar._, baz._, qux._ 
```

例如：

```
import scala.collection.mutable._, PriorityQueue._, ArrayBuffer._ 
```

**编辑**

[也许，正如@alex23 指出的那样](https://stackoverflow.com/a/14935545/298389)，您只想使用一些特定的东西，所以您可以这样写：

```
import com.foo.{foo, bar, baz}, bar._, baz._, qux._ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-18T11:45:46.070

从同一个包中导入多个类/对象的 Scala 方法是：

```
import scala.collection.immutable.{Map, HashMap, etc} 
```

很酷的 Scala 唯一技巧：别名/重命名

```
import java.util.{Collection => JavaCollection} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T15:01:01.360

目前你不能轻而易举地做到这一点，但你可以通过一些努力来接近。

如果您`package object all`为其他包中的每个类创建一个并设置类型别名，并为每个方法创建转发方法（如果其他方法是包对象），那么导入将执行您想要的操作。

已经有一些关于[导出功能](https://docs.google.com/document/d/1dlT6NgB9610jqLscCJW2LRB7TapDh3q4d2S3YA_q5zs/edit)的讨论可以使这变得非常容易，但它甚至还不是一个具体的提议，更不用说实施了。

无论如何，您不需要一遍`import`又一遍地重复：

```
import com.foo.bar._, com.foo.baz._, ... 
```

但是进一步缩短列表的所有方法都不会做完全相同的事情（例如，将导入名称`bar`本身，而不仅仅是其内容——这对您来说可能不是问题，但需要注意）。

也就是说，在导出机制出现之前，如果您在自己的行中输入所有内容，您的代码将具有最大的可读性和可维护性。当所有东西都卡在一条线上时，很难注意到缺少或多余的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T23:15:54.850

如果`bar._, baz._, qux._`构成一切，`com.foo`那么您可以简单地做`com.foo._`

# python - Django - 渲染时未捕获的缩进错误

> ID：14935410
> 
> 赞同：0
> 
> 时间：2013-02-18T11:39:10.233
> 
> 标签：python, django

错误发生在模板的以下行中，我无法理解为什么？

```
In template /usr/local/django/app/templates/main.html, error at line 51

<script type="text/javascript" src="{% url django.views.i18n.javascript_catalog %}"></script> 
```

准确的错误是：

**渲染时捕获 IndentationError：unindent 不匹配任何外部缩进级别（views.py，第 272 行）**

views.py 中的第 272 行是：

```
elif request.POST.get('hiddenField') == 'ad' and SettingsManager.get().ad_integ == 1:
    form = ADSettingsForm(request.POST)  # <-----line 272
    if form.is_valid():
        form.save() 
```

有任何想法吗？

**EDIT1** 项目中的任何文件都没有任何缩进错误。我用python的`py_compile`lib控制它。

**UPDATE1** 好吧，这非常非常尴尬：现在，我在另一台机器上遇到了完全不同的错误（我安装了我的项目副本）

**渲染时捕获 ViewDoesNotExist：无法导入 wauthportal.wauthapp.views。错误是：没有名为视图的模块**

```
In template /usr/local/django/wauthadmin/templates/main.html, error at line 51

<script type="text/javascript" src="{% url django.views.i18n.javascript_catalog %}"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:19:42.893

如果您混淆了制表符和空格，通常会发生这种情况。请注意您在每个缩进中使用了四个空格。如果你使用像 Sublime Text 这样的文本编辑器，按 ctrl+A 将显示空格。

# iphone - 密码强度库 - Objective C

> ID：14935412
> 
> 赞同：8
> 
> 时间：2013-02-18T11:39:13.423
> 
> 标签：iphone, ios, objective-c, macos, passwords

我正在寻找一个可以估计密码强度的开源组件。在网上搜索，我发现这很有趣：[https](https://github.com/lowe/zxcvbn) ://github.com/lowe/zxcvbn （以及有关它的更多详细信息：[https ://tech.dropbox.com/2012/04/zxcvbn-realistic-password-strength -估计/](https://tech.dropbox.com/2012/04/zxcvbn-realistic-password-strength-estimation/)）。

让我印象深刻的是能够将给定的密码与***“常见密码、常见的美国名字和姓氏、常见的英语单词以及常见的模式，如日期、重复 (aaa)、序列 (abcd) 和 QWERTY 模式”进行比较。***

有谁知道可以用于 iOS/Mac 应用程序的类似东西？如果没有，最好的开始方式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-06T08:22:42.227

所以，终于，一年多之后，伟大的 Mattt Thompson 刚刚在 GitHub 上发布了他自己的密码强度验证库，带有验证规则，并给出了强度评估。

这是：[https ://github.com/mattt/Navajo](https://github.com/mattt/Navajo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-07T16:05:51.910

看看 GitHub 上名为 的开源库`zxcvbn-ios`，它是为 Objective-C 重写的库：

[https://github.com/dropbox/zxcvbn-ios](https://github.com/dropbox/zxcvbn-ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:16:53.353

除了在密码上有可能使其容易受到字典攻击的实际英文单词之外，您还可以将其简单地分析为它对纯暴力攻击的抵抗力。

检查字典攻击的安全性必须使用一个大的词表。我还必须考虑实际的字典攻击如何工作并混合字典单词，以及它们是否会发生变化，例如将 A 换成 4 等。

让我们专注于蛮力攻击，我相信我可以帮助你。

对于蛮力攻击，您首先需要做的是定义攻击将用来生成密码的字符集。可能会很快获得许多密码的第一次尝试是只使用小写字母。

在只有小写字母（大约有 25 个，取决于语言）和 N 个字符的密码的情况下，您将有 25 次方的 N 个不同组合。例如，一个小写的 6 个字母密码有 244140625 种不同的可能性。

现在让我们添加大写字母，所以再添加 25 个（总共 50 个）。在 6 个字母的密码上，我们将有 50 的 6 个组合的幂，即 15625000000。

添加一些数字？所以还有10个字符。

如果您添加一些符号，您可以添加另外 20 个常见的符号（猜数字）。

所以基本上你要做的就是分析一个密码并检查它是否有小写字母（可能总是），所以你将 25 添加到字符集计数中。它有大写字母吗？再算上25个。它有数字吗？再数10个。它还有其他符号吗？再数20个。

使用小写、大写、数字和符号（约 80 个字符集）的 10 个字符的密码将有大约 10737418240000000000 种组合。

现在计算密码的大小并进行数学计算。characterSetCount 的 nCharacters 次幂。

因此，您将获得的数字是攻击者原则上必须检查以确保他可以找到正确密码的组合数。您还可以假设攻击者不必检查所有密码即可找到正确的密码。检查其中一半将大致给它找到它和找不到它的相同机会。所以保留一半的组合作为参考。

现在，使用哪种散列算法来存储密码？

让我们假设MD5。对于 MD5，我发现这个[http://bvernoux.free.fr/md5/index.php](http://bvernoux.free.fr/md5/index.php)说明每秒检查 2 亿个哈希值。

获取您的一半组合数并将其除以 2 亿，您将获得攻击者使用该硬件和方法获取您的密码所需的秒数。例如，我们讨论过的包含所有类型字符的 10 个字符的密码大约需要 26843545600 秒。大约425年。

有了这个，您可以分析最坏的情况。它不准确，但它可以给你一个估计。

要检查的另一件重要事情是密码散列是否使用了盐。使用盐来存储密码（[http://en.wikipedia.org/wiki/Salt_(cryptography)](http://en.wikipedia.org/wiki/Salt_(cryptography))）是当今的一种常见做法。如果你不使用这种方法，你很容易受到彩虹表攻击（[http://en.wikipedia.org/wiki/Rainbow_table](http://en.wikipedia.org/wiki/Rainbow_table)），在这种情况下，所有这些数学都是无用的，因为你的密码非常不安全。计算彩虹表的字符数非常高（16 个左右）。

希望能帮助到你！

# c# - C#方形程序

> ID：14935418
> 
> 赞同：3
> 
> 时间：2013-02-18T11:39:31.463
> 
> 标签：c#, .net, arguments

我在以下 C# 程序中有问题。编写代码时没有错误，但是当我调试它时，会抛出一个异常，即索引超出了数组绑定的范围。

这里有什么问题？

```
using System;
class secmain
{
    public static void squarearg(int i)
    {
        int m=i*i;
        Console.WriteLine("The Square of the argument is {0}",m);
    }
    static void Main(String[] param)
    {
     Console.WriteLine("this program will convert your string argument to int and display the square of the numbe");
     int k = Int32.Parse(param[0]);
      squarearg(k);
      }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T11:40:54.903

好吧，调试它*（通常）*不会得到[命令行参数](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)，`param`这就是你得到异常的原因。

您需要从命令行运行其可执行文件并从那里传递参数，例如在您的 dos 提示符下，*(cmd)*

```
C:\yourProjectPath\bin\debug> yourExecutable.exe 2 
```

*（在上面 2 中是您将在`param[0]`as 字符串中获得的命令行参数）*

或者您可以使用`Console.ReadLine`从控制台获取值，然后处理它而不是命令行参数。

如果您想在调试过程中传递参数，请检查以下问题：[调试时如何使用参数启动程序？](https://stackoverflow.com/questions/4791140/how-do-i-start-a-program-with-arguments-when-debugging)

转到项目属性并在命令行参数文本框中的调试选项卡下指定命令行参数，如下图所示。

![在此处输入图像描述](../Images/4bdfb7d2c8f9850b4825f138ec7da2ec.png)

以上将为您`4`提供争论的结果`2`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T11:41:53.067

如果单击项目属性，在 Debug 部分下，就在 Build 下方，您可以传入参数。

它看起来像这样：

```
/client:"Someclient.exe" 1 2 3 
```

这意味着主要参数`param`不会为空，即`param.Count > 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:41:35.310

这是因为这个语句 `int k = Int32.Parse(param[0]);`在运行时你没有传递任何值。并且您正在尝试使用`command-line argument`
这将指导您如何[在 C# 中传递命令行参数的值](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)

以这种方式运行你的程序

```
myfile.exe 125 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T11:41:42.280

使用`param`时会期望它是在命令行中给出的。尝试使用“secmain.exe 4”之类的东西运行它。或者你可以去`Project Properties->Debug-> Start Options->Command line arguments`那里输入一个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T11:41:43.593

```
int k = Int32.Parse(param[0]); 
```

我认为错误就在那里。您没有将任何参数传递给程序。

你可以做一个检查：

```
if (param.Length == 0)
{
   Console.WriteLine("No arguments have been passed into the program");
} 
```

[http://msdn.microsoft.com/en-us/library/aa664432(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664432(v=vs.71).aspx)

# ios - 从 Core Data 管理表视图中删除对象时出错

> ID：14935419
> 
> 赞同：1
> 
> 时间：2013-02-18T11:39:48.883
> 
> 标签：ios, objective-c, core-data, ios6, nsfetchedresultscontroller

我的应用程序使用了一个核心数据管理的表视图，我在 cimgf.com 的一些好人的帮助下实现了一种重新排序内容的方法。在此之前，我可以使用以下代码轻松删除对象：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        [self.tableView beginUpdates]; // Avoid  NSInternalInconsistencyException

        // Delete the person object that was swiped
        Step *stepToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];
        NSLog(@"Deleting (%@)", stepToDelete.name);
        [self.managedObjectContext deleteObject:stepToDelete];
        [self.managedObjectContext save:nil];

        // Delete the (now empty) row on the table
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self performFetch];

        [self.tableView endUpdates];

        [delegate stepChangedOnMaster:self];
    }
} 
```

添加以下代码后，当删除对象时，应用程序崩溃。

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}
- (void)tableView:(UITableView *)tableView
moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath
      toIndexPath:(NSIndexPath *)destinationIndexPath;
{
    NSMutableArray *things = [[__fetchedResultsController fetchedObjects] mutableCopy];

    // Grab the item we're moving.
    NSManagedObject *thing = [[self fetchedResultsController] objectAtIndexPath:sourceIndexPath];

    // Remove the object we're moving from the array.
    [things removeObject:thing];

    // Now re-insert it at the destination.
    [things insertObject:thing atIndex:[destinationIndexPath row]];

    // All of the objects are now in their correct order. Update each
    // object's displayOrder field by iterating through the array.
    int i = 0;
    for (NSManagedObject *mo in things)
    {
        NSLog(@"%i - %@", i, [mo valueForKey:@"name"]);
        [mo setValue:[NSNumber numberWithInt:i++] forKey:@"displayOrder"];
    }
    things = nil;
    [__managedObjectContext save:nil];
    // Save
      NSError *error = nil;
    if (![__managedObjectContext save:&error])
    {
        NSString *msg = @"An error occurred when attempting to save your user profile changes.\nThe application needs to quit.";
        NSString *details = [NSString stringWithFormat:@"%@ %s: %@", [self class], _cmd, [error userInfo]];
        NSLog(@"%@\n\nDetails: %@", msg, details);
    }

    // re-do the fetch so that the underlying cache of objects will be sorted
    // correctly
    NSError *errror = nil;
    if (![__fetchedResultsController performFetch:&errror])
    {
        NSLog(@"Unresolved error %@, %@", errror, [errror userInfo]);
        abort();
    }
    [self.tableView reloadData];
} 
```

我真的不明白为什么应用程序崩溃。有人可以给我一些关于如何解决这个问题的提示吗？谢谢！

这是我得到的错误： ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (0) 必须相等更新前该节中包含的行数 (1)，加上或减去从该节插入或删除的行数（0 插入，2 删除），加上或减去移入或移出该节的行数部分（0 移入，0 移出）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:57:27.270

在您调用之前，`deleteRowsAtIndexPath`您需要同步您的模型数据以对应于删除操作后您将在表视图中拥有的项目数，在您的情况下为 n-1。尽管您将其从持久存储中删除，但该项目可能仍缓存在数组中，该数组计算您在表视图的 section 方法中返回的行数。

# c# - 通过datagridview中的数据表在单元格中输入值时出错

> ID：14935423
> 
> 赞同：1
> 
> 时间：2013-02-18T11:39:54.447
> 
> 标签：c#, winforms, datagridview

我尝试使用以下代码在单元格中输入值以从数据表中获取值。但我得到一个错误。下面是错误：

> DataGridView 中发生以下异常： System.Exception: 0.91 不是 Int32 的有效值。--->

我不知道如何消除这个错误。需要帮忙。

编辑：-

```
private void DataGrid_CellEnter(object sender, DataGridViewCellEventArgs e)
    {if (DataGrid.CurrentCell.ColumnIndex == 6)
            {
                string getprice = "SELECT " + DataGrid.SelectedRows[0].Cells[3].Value.ToString() + " FROM " +
                    "" + DataGrid.SelectedRows[0].Cells[2].Value.ToString() + "_Mstr " +
                    "WHERE Size1 = '" + DataGrid.SelectedRows[0].Cells[4].Value.ToString() + "'";
                DataTable dt = globalData.q.select(getprice);
                double check;
                if (double.TryParse(dt.Rows[0][0].ToString(), out check))
                {
                    DataGrid.SelectedRows[0].Cells[6].Value = dt.Rows[0][0].ToString().Trim();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:49:23.137

当您期望一个 int 时，您的 SQL 可能是双精度的。更改数据类型或强制转换（即使用 Convert.ToInt32(xxx) 而不是 double.Parse）

# apache - 如何从本地机器访问托管在 Amazon Windows 机器上的 apache 服务器上的网站

> ID：14935425
> 
> 赞同：0
> 
> 时间：2013-02-18T11:39:59.327
> 
> 标签：apache, amazon-ec2, wamp

网站托管在**Amazon EC2 Windows 实例**上的 apache 服务器上。我想从本地机器访问它。尽管如果它托管在 Linux 实例上，则可以从其他机器访问它，但在 Windows 实例的情况下则不行。

我正在使用 wamp 服务器，并通过**httpd.conf**中的以下更改将服务器置于联机状态：

```
Listen *:80

<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Allow from all
    #Deny from all
</Directory> 
```

当我尝试从其他机器访问 url 时，它返回： **连接被拒绝**

我应该进行哪些配置更改以使其可以从其他机器访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:44:54.400

检查：安全组/[如果设置了您的实例的组的名称]/入站，并查看端口 80 是否被允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:28:47.333

Amazon EC2 提供您的实例所属的安全组，然后这允许您向您账户上的其他主机组或其他外部主机授予权限。

**安全组充当防火墙，控制允许到达一个或多个实例的流量。**

在 Amazon EC2 中，安全组规则始终是允许的，因此您不能创建任何拒绝访问端口的规则。此外，如果特定端口有多个规则，则始终应用最宽松的规则。所以我们只需要检查80端口是否打开，如果没有打开它。

如需更多参考，请参阅此链接：
[http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html)

# iphone - 如果发生条件，更改表格视图中新添加行的背景颜色？

> ID：14935433
> 
> 赞同：0
> 
> 时间：2013-02-18T11:40:21.787
> 
> 标签：iphone, ios, ipad

我有一个聊天应用程序，我在其中添加来自`NSMutableArray`. 我正在使用推送器 api。现在，当用户从频道中删除时，我放了一个`NSNotifications`，并且我正在更改布尔值的值，根据它的值我正在更改单元格的背景图像。在我的`cellForRowAtIndexpath:`方法中：

```
if([userid isEqualToString:uidstr])
    {
      if(offline==YES)
        {
         UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"chat_cellreply02.png"]];
            [cell setBackgroundView:img];
            [img release]; 
          }
        else
        {
       UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"chat_cellreply.png"]];
        [cell setBackgroundView:img];
        [img release]; 
        }
    } 
```

它正在工作，但这里的问题是所有单元格的背景都在变化。我只需要更改新添加的单元格的背景。有人可以指导我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:29:20.573

使您的`offline`变量属于您在可变数组中保存的结构。然后`cellForRowAtIndexPath`检查该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:17:33.183

只需检查表格视图的最后一行并在那里添加离线设计

```
NSInteger sectionsAmount = [tableView numberOfSections];
    NSInteger rowsAmount = [tableView numberOfRowsInSection:[indexPath section]];
    if ([indexPath section] == sectionsAmount - 1 && [indexPath row] == rowsAmount - 1) {
        // This is the last row  here do your process
       } 
```

# java - 带有参数的 HttpPost 对 ASP 服务器不起作用

> ID：14935438
> 
> 赞同：0
> 
> 时间：2013-02-18T11:40:29.057
> 
> 标签：java, android, http-post, httpclient

我需要创建一个带有两个参数的 HttpPost 请求。我同意有很多例子，但我相信我已经完成了我的研究，但我仍然没有得到 ASP 服务器的响应。我试过 NameValuePair 但我似乎无法获得响应页面。我猜这些参数没有被添加到 httpPost 对象中。

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("https://portal.sibt.nsw.edu.au/Default.asp");

List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
nameValuePair.add(new BasicNameValuePair("userID", id.getText().toString()));
nameValuePair.add(new BasicNameValuePair("password", pword.getText().toString()));

post.setEntity(new UrlEncodedFormEntity(nameValuePair));
HttpResponse response = client.execute(post);

String responseContent = EntityUtils.toString(response.getEntity());
Log.d("response to string", responseContent); 
```

我再次进入登录页面，此代码返回 NullPointerException：

```
String newURL = response.getFirstHeader("Location").getValue(); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:29:35.753

您不使用 .NET 网页，您必须创建 .NET Web 服务，因为只有 WebService 具有发布和获取方法。您不请求网页。网页没有收到您的消息和答复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:14:29.590

尝试这样的事情：

```
private static String urlAppendParams(String url, List<NameValuePair> lNameValuePairs) {
    if (lNameValuePairs != null) {
        List<NameValuePair> llParams = new LinkedList<NameValuePair>();
        for (NameValuePair nameValuePair : lNameValuePairs) {
            llParams.add(nameValuePair);
        }

        String sParams = URLEncodedUtils.format(llParams, "UTF-8");
        if (!url.endsWith("?")) {
            url += "?";
        }
        url += sParams;
    }
    return url;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:36:31.833

[当您使用浏览器 ( https://portal.sibt.nsw.edu.au/Default.asp](https://portal.sibt.nsw.edu.au/Default.asp) )到达主页时，服务器会打开会话（您可以使用网络检查器查看 set-cookie 标头）：

```
Set-Cookie:ASPSESSIONIDQCCCQQCQ=HJMMOCFAFILCLNCJIMNBACIB; path=/ 
```

可能您需要在 POST 登录之前向该页面发出 GET 请求。另外，您必须在 HttpClient 中启用 cookie 跟踪。我通常使用：

```
HttpClient client = new DefaultHttpClient();
client.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.BROWSER_COMPATIBILITY);
final HttpGet get = new HttpGet("https://portal.sibt.nsw.edu.au/Default.asp");
client.execute(get); //perform an initial GET to receive the session cookie

//now do the post...
HttpPost post = new HttpPost("https://portal.sibt.nsw.edu.au/Default.asp?Summit=OK");

List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
nameValuePair.add(new BasicNameValuePair("hcUserID", id.getText().toString()));
nameValuePair.add(new BasicNameValuePair("hcPassword", pword.getText().toString()));

post.setEntity(new UrlEncodedFormEntity(nameValuePair));
HttpResponse response = client.execute(post);

//I should be logged in.... Lets get the an internal webpage
get = new HttpGet("https://portal.sibt.nsw.edu.au/std_Alert.asp");
client.execute(get);

System.out.println(new String(get.getResponseBody())); 
```

由于我没有有效的用户/密码，我无法尝试此解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:57:54.673

我猜你只是`?`在你的网址末尾错过了

# codeigniter - 无法删除文件夹

> ID：14935439
> 
> 赞同：0
> 
> 时间：2013-02-18T11:40:30.210
> 
> 标签：codeigniter, codeigniter-2, pyrocms

从管理员那里，我可以从浏览器创建新文件夹，但无法删除创建的文件夹。

`http://localhost/<project>/admin/files`.

但是删除不起作用。当我右键单击文件夹并单击删除时，没有任何反应。如何删除它们？

![在此处输入图像描述](../Images/3f975aa1dd4a762c1026ca7ae5c2bb2d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:43:16.700

检查您的安全权限，看看是否只列出了系统。如果是这样，请使用 R/W/E 将权限设置为所有人重新创建文件夹。

# .net - 按枚举排序列表

> ID：14935440
> 
> 赞同：1
> 
> 时间：2013-02-18T11:40:33.197
> 
> 标签：.net, vb.net

我正在尝试按枚举订购列表，请参见下文：

```
Public Class AnimalsToProcess
Implements ICloneable

       Enum AnimalOrder
        Dog
        Cat
        Horse
        Fish
       End Enum

    Public Property _animalList As List(Of Animal)

    Public Sub New()

    End Sub

    Function Clone() As AnimalsToProcess

    End Function

    Private Function ICloneable_Clone() As Object Implements ICloneable.Clone
        Return Clone()
    End Function

    Public Sub Add(animalToAdd As Animal)
        _animalList.Add(animalToAdd)
    End Sub

    Public Sub GetAnimals() as list(of Animal)
        _animalList() 'this should be an ordered BY AnimalOrder Enum
    End Sub
End Class 
```

Add 方法由外部代码通过传递一个值来调用，例如：

```
animals.add(Fish)  
animals.add(Horse)  
animals.add(Cat)` 
```

但是当`GetAnimals`调用它时，它应该返回一个由`Enum AnimalOrder`.

因此列表应按猫、马、鱼的顺序包含以下动物

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:45:37.337

枚举在内部为每个值使用整数。如果您没有明确设置它们，它们会按照枚举中定义的顺序自动分配，从`0`.

您应该能够将您的 String 值转换为您的枚举并从那里转换为整数。像（未经测试）..

```
Public Function GetAnimals() as list(of Animal)
    Return _animalList.OrderBy(function(x) Cint(DirectCast(Enum.Parse(GetType(AnimalOrder), x), AnimalOrder)))
End Sub 
```

请注意，您将值称为类型`Animal`，但在 Q 中没有定义。如果您需要访问属性以获取与枚举匹配的值，请说`AnimalTypeString`...

```
Public Function GetAnimals() as list(of Animal)
    Return _animalList.OrderBy(function(x) Cint(DirectCast(Enum.Parse(GetType(AnimalOrder), x.AnimalTypeString), AnimalOrder)))
End Sub 
```

或者，如果`AnimalType`您的动物上的属性直接指向枚举值（这将是明智的），您可以跳过转换*为*枚举...

```
Public Function GetAnimals() as list(of Animal)
    Return _animalList.OrderBy(function(x) Cint(X.AnimalType))
End Sub 
```

# android - 使用 html 颜色参考更改背景 android 的颜色

> ID：14935443
> 
> 赞同：0
> 
> 时间：2013-02-18T11:40:36.510
> 
> 标签：android, html, layout, colors

我正在尝试使用 html 颜色参考更改布局的背景颜色。但我似乎无法让它工作。这是我正在尝试的方法

```
public class FormEngine {

Context context;
RelativeLayout relLayout;

FormEngine(Context ctx) {
    context = ctx;
    relLayout = new RelativeLayout(context);

}

public void clearScreen(int color) {
    relLayout.setBackgroundColor(color);
} 
```

这就是我如何称呼这个类

```
 FormEngine fEngine = new FormEngine(MainActivity.this);
    setContentView(fEngine.relLayout);
    fEngine.clearScreen(0x708090); 
```

现在，如果我只是尝试在 setBackground 颜色中使用 Color.Yellow 它可以按预期工作，但是当我传递这样的颜色值时，它只会显示白色背景。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:45:37.647

`0x708090`是一种完全透明的颜色。试试这个：

```
fEngine.clearScreen(0xFF708090); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:48:40.997

Android 颜色使用 ARGB，因此您使用 0x00 作为颜色的 alpha 部分，它是完全透明的。

采用

```
fEngine.clearScreen(0xff708090); 
```

反而。

请参阅[Android 中的十六进制颜色有时是 8 位数字。如何？](https://stackoverflow.com/questions/6909896/hex-colors-in-android-are-some-times-8-digits-how/6909935#6909935)有关更多信息[，#FFFFFF 和 #FFFFFF00 有什么区别。](https://stackoverflow.com/questions/6909896/hex-colors-in-android-are-some-times-8-digits-how/6909935#6909935)

# objective-c - 访问 Core Data 中的特定条目

> ID：14935445
> 
> 赞同：1
> 
> 时间：2013-02-18T11:40:45.213
> 
> 标签：objective-c, cocoa, core-data

我想阅读我的核心数据存储中的特定条目。

假设我有 20 个条目，我想读取条目的所有属性，例如`name = john`. 我想知道所有其他值，例如年龄、地址等。有没有办法直接访问这一行，就像它可以通过查询使用 SQL 完成一样？还是我必须遍历所有行，直到找到包含所需信息的行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:49:15.817

这根本不是问题。只需创建`NSFetchRequest`所需的实体。并在其中设置谓词，如下所示：

```
[request setPredicate:[NSPredicate predicateWithFormat:@"name == %@",name]] 
```

要制作更复杂的谓词，请查看[谓词编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/predicates.html)。

# android - GCM 使用 2 个不同的 regId 注册两次

> ID：14935446
> 
> 赞同：0
> 
> 时间：2013-02-18T11:40:45.383
> 
> 标签：android, google-cloud-messaging

在我的应用程序中，我有此代码可以注册到 GCM 服务：

### 服务器.java

```
protected void registerToGcm() {
    GCMRegistrar.checkDevice(mContext);
    GCMRegistrar.checkManifest(mContext);
    String regId = GCMRegistrar.getRegistrationId(mContext);
    if ("".equals(regId)) {
        GCMRegistrar.register(mContext, GCMIntentService.SENDER_ID);
    } else {
        registerToServer(regId);
    }
} 
```

### GCMIntentService.Java

```
public static final String SENDER_ID = "1111111111";
@Override
protected void onRegistered(Context context, String regId) {
    Log.d(TAG, "Registered to GCM with regId: " + regId);
    Server.registerToServer(regId);
} 
```

当我运行此代码时，我在服务器中看到我的设备使用 2 个不同的设备注册了两次`regIds`，并且当服务器发送推送时，设备收到 2 条消息。

这是正常现象吗？有没有办法确保只有一个`regId`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:22:23.537

注册时需要检查什么是

```
GCMRegistrar.checkDevice(getApplicationContext());
GCMRegistrar.checkManifest(getApplicationContext());

deviceToken = GCMRegistrar.getRegistrationId(getApplicationContext());

if (printLog == true)
    Log.i("Home", "Registration id =====  " + deviceToken);
if (deviceToken.equals("")) {
    GCMRegistrar.register(getApplicationContext(), SENDER_ID);
} else {
    if (printLog == true)
        Log.v("Home", "Device Already registered");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:52:17.847

您应该使用以下代码以确保仅在未注册到服务器时才将 RegId 注册到服务器。

```
public void GCMWebService(final String regId) {
        if (regId.equals("")) {
            Log.i(TAG,
                    "================Inside if in regId=null  GCMWebService==============================");
            // Automatically registers application on startup.
             GCMRegistrar.register(mContext, GCMIntentService.SENDER_ID);
            // GCMRegistrar.unregister(this);
        } else {
            Log.i(TAG,
                    "================Inside else in regId=null  GCMWebService==============================");
            // Device is already registered on GCM, needs to check if it is
            // registered on our server as well.
            if (GCMRegistrar.isRegisteredOnServer(this)) {
                // Skips registration.
                Log.i(TAG,
                        "================Inside else in regId=null Already register on Server GCMWebService=============================");
                // mDisplay.append(getString(R.string.already_registered) +
                // "\n");
            } else {
                Log.i(TAG,
                        "================Inside else in regId=null trying to  register on Server GCMWebService=============================");
                // Try to register again, but not in the UI thread.
                // It's also necessary to cancel the thread onDestroy(),
                // hence the use of AsyncTask instead of a raw thread.
                final Context context = this;
                mRegisterTask = new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        Log.i(TAG,
                                "================Inside doInBackground Method       GCMWebService==============================");
                           registerToServer(regId);
                        Log.i(TAG,
                                "================Server side REegistered or not?"
                                        + registered);
                        // At this point all attempts to register with the app
                        // server failed, so we need to unregister the device
                        // from GCM - the app will try to register again when
                        // it is restarted. Note that GCM will send an
                        // unregistered callback upon completion, but
                        // GCMIntentService.onUnregistered() will ignore it.
                        if (!registered) {
                            Log.i(TAG,
                                    "================Inside unregister inside Do in backgroound GCMWebService==============================");
                            GCMRegistrar.unregister(context);
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        Log.i(TAG,
                                "================Inside onPostExecute Method   GCMWebService==============================");
                        mRegisterTask = null;
                        if (!registered) {
                            /*
                             * final Toast tag = Toast .makeText( context,
                             * "Please Check Your Internet Connection and Try again \nOr\nWebservice is not Working now..."
                             * , Toast.LENGTH_SHORT);
                             */

                            new CountDownTimer(8000, 1000) {
                                public void onTick(long millisUntilFinished) {
                                    Toast.makeText(
                                            context,
                                            "Please Check Your Internet Connection and Try again \nOr\nWebservice is not Working now...",
                                            Toast.LENGTH_SHORT).show();
                                }

                                public void onFinish() {
                                }

                            }.start();
                        }
                    }

                };
                mRegisterTask.execute(null, null, null);
            }
        }

    } 
```

希望它会有所帮助。

# java - 为什么我得到包 javax.crypto 不存在

> ID：14935447
> 
> 赞同：17
> 
> 时间：2013-02-18T11:40:47.073
> 
> 标签：java, javax.crypto

当我使用编译一个类时，`javax.crypto.Mac`我得到这个错误信息？

> 包`javax.crypto`不存在

`jre/lib/jce.jar`我可以通过包含在我的编译类路径中来修复它。

为什么`jce.jar`不在默认的 jdk 类路径上？ `jre/lib/rt.jar`在类路径上，并包含其他`javax`包，但 jce 似乎很特别？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T12:38:08.427

OK, this was a mistake on my part. The Ant file I was using to compile the code had this attribute on the `javac` task:

```
bootclasspath="${java.home}/lib/rt.jar" 
```

Doh. You can add the JCE jar like this:

```
bootclasspath="${java.home}/lib/rt.jar:${java.home}/lib/jce.jar" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-16T19:33:57.543

谨防！此类仅包含在 oracle 的 jdk 中。这意味着您的程序将不能在不同的 jdk 之间移植（例如 openjdk） 最好在外部使用这个库，可以从[这里下载](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html#JCE-1_2_2-G-JS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T21:42:10.167

它对我有用，我下载了 zip 并将这 3 个文件粘贴到zip 文件中的`C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext`说明中`jce-1_2_2/jce1.2.2/INSTALL.html`。

*   `jce1_2_2.jar`
*   `US_export_policy.jar`
*   `local_policy.jar`

# pthreads - pthread_mutex 调用会将上下文切换到内核吗？

> ID：14935451
> 
> 赞同：0
> 
> 时间：2013-02-18T11:41:02.167
> 
> 标签：pthreads, mutex

当锁定和解锁互斥锁（我使用 pthread mutexes ）时，会有任何上下文切换到内核，这会降低性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:08:59.250

您几乎可以指望的是，实现可能会尽量减少开销。在您的代码中要担心的更好的事情是确保将锁争用保持在最低限度，这样 Mutex 开销就不会成为代码中的瓶颈。

# javascript - 禁用 CKEditor 烦人的工具提示？

> ID：14935458
> 
> 赞同：0
> 
> 时间：2013-02-18T11:41:18.223
> 
> 标签：javascript, ckeditor

在ckeditor上，当使用div content-editable=true（ckeditor内联编辑）时，当鼠标悬停在该div上时，会显示工具提示“富文本编辑器，the_id_of_that_div”，有人知道如何禁用它吗？

我有谷歌但是，还没有找到任何关于它的东西..

ckeditor 4.0版

为什么我认为那个工具提示很烦人？因为它覆盖了另一个输入框和ckeditor工具栏..

# ios - 带有 canBecomeFirstResponder YES 的自定义 UITableViewCell 不会在屏幕外取消选择

> ID：14935465
> 
> 赞同：0
> 
> 时间：2013-02-18T11:41:36.123
> 
> 标签：ios, cocoa-touch, uitableview

我最近碰巧在 UITableView 中发现了一些关于选择和取消选择功能的有趣错误。（mb这本身不是一个错误，但我发现这种情况非常反常）。

史前史：我试图创建一些自定义 TableViewCell 类，该类将能够使用 UIDatePicker 选择一些日期并将其放置在单元格的标签中。“ [CellDate”示例](http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html)对我来说不是很好。所以我试图将一些自定义 inputView 设置为单元格并使其成为第一响应者。After some time of researches I found the way to override readonly inputView property of my custom UITableViewCell subclass, and now it works perfectly: when the cell is selected I call `[self becomeFirstResponder]`on it and when the cell is deselected I call `[self resignFirstResponder]`so it works just fine, but有一些错误。

当我在屏幕上有我的自定义单元格（即没有滚动出屏幕）时，一切都是正确的，但如果我选择它

![选择自定义单元格](../Images/d893f828b9f9847d9ecac6ae7811b740.png)

向下滚动 tableView，使我的单元格不再出现在屏幕上

![向下滚动，自定义单元格不再出现在屏幕上](../Images/7c8beccffc311c30912778333545f6be.png)

然后选择另一个单元格

![在自定义单元格不再出现在屏幕上时选择其他单元格](../Images/a49f5958f0b4b68ea48769e492bdbe74.png)

我的自定义单元格不会被取消选择

![意外的结果](../Images/75b1ad6123a38f0ca628dde56602099e.png).

默认 UITableViewCell 功能的唯一主要变化是：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    if (selected)
    {
        [self becomeFirstResponder];
    }
    else
    {
        [self resignFirstResponder];
    }
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
} 
```

仅使用此方法覆盖会使此错误出现：当当前选择的自定义单元格不在屏幕上时，由于某种原因它不会取消选择。

我的问题是：有没有人经历过这样的事情，我能做些什么吗？因为除此之外，我对日期单元的问题有一个完美的解决方案。

这不是使用 UITableViewCells 的正确方法吗？我做错了什么吗？我刚开始学习iOS，所以我可能对它的某些方面不太熟悉。

PS对不起我的语言不好，我不是以英语为母语的人。

更新：

我发现了更多细节。经过一些研究，我发现，当您滚动 tableView 并在屏幕外隐藏一些 tableViewCell 时，它的（单元格）正在被破坏。当您向后滚动时，它会通过调用 tableView 的委托的 tableView:cellForRowAtIndexPath: 再次创建：除此之外，如果您尝试为行的 indexPath 调用 [tableView cellForRowAtIndexPath:indexPath]，即在屏幕外，tableView 将返回 nil .

但奇怪的是：当您的自定义单元格是 firstResponder 时，显然，它不会通过 tableView 的委托的 tableView:cellForRowAtIndexPath: 重新创建，也无法通过 [tableView cellForRowAtIndexPath:indexPath] 访问。

对我来说，这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:51:04.960

我自己找到了解决方案。It appears to be as simple as resigning first responder when other row is being selected. 顺便说一句，我用[这个答案](https://stackoverflow.com/questions/1823317/get-the-current-first-responder-without-using-a-private-api)来完成这个。

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:16:29.167

To directly answer the question, the UITableView does not deselect cells on it's own. In your TableView's controller, you need to override `-(void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath *)indexPath` and manually deselect the selected cell.

```
-(void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animate:YES];
} 
```

(apologies for editing, i accidentally saved while answering)

In your subclass of the UITableViewCell you should override `-(void)setEditing:(BOOL)editing animated:(BOOL)animated` in order to transition your cells into an editable state. (set your UITextField to editable) and then in your cell, you would make your textbox become/resign first responder.

First responder is used to become the next object to respond to the keyboard when something is editable.

For example, if you have cell c1, and cell c2\. both c1 and c2 have UITextFields in them. You are in c1, and you want the Return button in the keyboard to move the text cursor into c2, then when c1, would need to make the UITextField resign as the first responder, and tell c2 to make it's UITextField become the first responder. You would do this by making the custom cell be the delegate of it's UITextField, then implement `-(BOOL)textFieldShouldReturn:(UITextField *)textField` to have the textField resign as first responder, then you would tell your UITableView's controller to tell the next cell to make it's textfield become first responder.

# sublimetext2 - Sublime Text 2 创建 config.rb

> ID：14935466
> 
> 赞同：4
> 
> 时间：2013-02-18T11:41:40.953
> 
> 标签：sublimetext2, compass-sass, sass

今天，当保存 SCSS 文件时，**Sublime Text 2**`config.rb` (Windows)在同一目录中创建一个。奇怪的是，这从未发生过。我的项目的根目录中已经有一个`config.rb`与 Compass 一起使用的项目，所以另一个项目只会把事情搞砸。

*   是什么原因造成的，我该如何避免？

我已经检查了进程监视器，它是`sublime_text.exe`创建文件的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T20:39:20.257

好的 - 我想我解决了。

您（不幸的是）必须从 Sublime 中删除“LiveReload”包。我不能告诉你为什么它会导致这个问题，但删除这个包为我解决了这个问题。我什至重新安装了它，症状又回来了。

编辑：[在 LiveReload repo 上打开了一个问题](https://github.com/dz0ny/LiveReload-sublimetext2/issues/40)

# erlang - 包含从erlang中的两个表读取和写入的函数

> ID：14935467
> 
> 赞同：0
> 
> 时间：2013-02-18T11:41:40.367
> 
> 标签：erlang

我在 mnesia 中有两个表格，格式如下：

```
mnesia:create_table(person,
   [{disc_copies, [node()]},
    {attributes, record_info(fields, person)}]),
mnesia:create_table(person_backup,
   [{disc_copies, [node()]},
    {attributes, record_info(fields, person)},
    {record_name, person}]), 
```

我想开发一个具有此作用的功能：

从表 person 中读取所有数据，然后将这些数据写入表 person_backup

我尝试使用备份功能（这是您的代码）

```
testbackup()->

    mnesia:transaction(fun() ->
  Records = mnesia:select(person, [{'_', [], ['$_']}]),
  [ok = mnesia:write(person_backup, Record, write) || Record <- Records]
end). 
```

当我运行这个函数时，我有这个消息

```
 model:testbackup().
{atomic,[ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,ok,
         ok,ok,ok,ok,ok,ok,ok,ok,ok,ok|...]} 
```

它工作得很好，意味着在 person_backup 表中我有与表 person 相同的数据

但是当我做模型时：reset（）。

表 person 和 table person_backup 的数据将被删除

并且通常会删除人的数据

reset() 的代码是：

```
reset() ->
    stop(),
    destroy(),
    create(),
    start(),

    {ok}.

destroy() ->
    mnesia:start(),
    mnesia:delete_table(counter),
    mnesia:delete_table(person),
    mnesia:stop(),
    mnesia:delete_schema([node()]).

create() ->
    mnesia:create_schema([node()]),
    mnesia:start(),
    mnesia:create_table(counter, [{attributes, record_info(fields, counter)}, {disc_copies, [node()]}]),
    mnesia:create_table(person, [{attributes, record_info(fields, person)}, {disc_copies, [node()]}]),
  mnesia:create_table(person_backup,[{disc_copies, [node()]},{attributes, record_info(fields, person)},
    {record_name, person}]),
    mnesia:stop(). 
```

我尝试以另一种方式解决这个问题

我有一个函数**testcreate**

```
testcreate()->

    %% mnesia:create_schema([node()]),
    mnesia:start(),

    mnesia:create_table(person_backup, [{attributes, record_info(fields, person_backup)}, {disc_copies, [node()]}]). 
```

在我的记录中

```
-record(person, {id, token, password, pin, key, salt, pin_salt, subscription_date, first_name, last_name, alias, gender, status,
                 taxid, formid, idcard, birth_year, birth_month, birth_date}).
-record(person_backup, {id, token, password, pin, key, salt, pin_salt, subscription_date, first_name, last_name, alias, gender, status,
                 taxid, formid, idcard, birth_year, birth_month, birth_date}). 
```

当我运行函数**testbackup**我有这个消息

```
 2> model:testbackup().
    {aborted,{bad_type,{person,215,"97808233",
                               "bddcba13effb029e93aaab6fdc3c4587",
                               "d707aa5f940a468e149686b3eaafd946",
                               "230d8294d47f6fa2cc1761deab52a879",
                               "1360713353326653","1360713353326653",undefined,
                               "souad","sallami",[],"M.","preregistered",
                               undefined,"Z008022","04705808","CIN",[],
                               "d41d8cd98f00b204e9800998ecf8427e","0","user",0,
                               {{...},...},
                               undefined,...}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:24:19.790

像这样的东西：

```
mnesia:transaction(fun() ->
  Records = mnesia:select(person, [{'_', [], ['$_']}]),
  [ok = mnesia:write(person_backup, Record, write) || Record <- Records]
end). 
```

# c# - Microsoft.Office.Interop.Word：安装多个 Word 版本时，默认版本在哪里定义？

> ID：14935472
> 
> 赞同：3
> 
> 时间：2013-02-18T11:41:47.220
> 
> 标签：c#, ms-word, office-interop

我的机器上安装了多个版本的 Word（Word03 和 Word07）。目前 Word07 被设置为默认版本（我也在 Windows 注册表中检查过）。
在 C# 项目中，我`Microsoft.Office.Interop.Word`通过引用 Microsoft Word 12.0 对象库来使用该库。
但是当我通过调用创建一个新应用程序时

```
Application app = new Application(); 
```

无论如何都使用版本 11.0 (Word03)。所以我想知道默认版本是在哪里定义的，在创建新应用程序时使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:20:26.483

当您添加参考时，您会在那里找到它，即它必须像 8.0 或接近这个数字（对于 2003 版本），因此首先删除 12.0 版本的参考，然后添加提到的较小版本的参考

# opencv - 良好的预制立体相机和机器人车辆建议

> ID：14935473
> 
> 赞同：0
> 
> 时间：2013-02-18T11:41:53.217
> 
> 标签：opencv, camera, computer-vision, robotics, stereo-3d

我正在从事与自主导航相关的爱好项目。我想使用立体相机进行障碍物检测，然后控制机器人车辆的运动以避开障碍物。

(1) 我正在尝试寻找具有并行/串行/以太网端口与计算机接口的现成机器人车辆。我应该能够通过 PC 向车辆发送命令以向左/向右转、加速/减速、启动/停止。

市场上有没有好的、准确、可靠、便宜的机器人车辆？

(2) 我正在考虑制作立体相机。但是如果市场上有一个好的、准确的、可靠的、便宜的立体相机。我也准备买了。

注意：这是一个小型宠物项目，因此寻找“便宜但可靠”的立体相机和可以与 PC 连接的机器人车辆。

提前致谢。

PS：如果在印度有货就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:10:50.987

我在使用[Lejos](http://lejos.sourceforge.net/) OS 的 Lego Mindstorm 上取得了一些成功。这支持USB和蓝牙控制，所以你也可以使用手机。虽然我没有使用相机，但网上有很多教程表明这样做很简单。

它配备了一系列传感器和轮子（我买的套件有一个超声波测距仪和一个光传感器），所以如果你对编程比对电子产品更感兴趣，那么启动和运行一些东西真的很容易。

我现在桌上的立体相机是[Novo Minoru](http://nma.web.nitech.ac.jp/fukushima/minoru/minoru3D-e.html)。这是一个非常便宜的选择，但似乎适用于简单的视觉任务。它也符合 UVC 标准，因此似乎很容易与之交互。

# javascript - Ember.js 正确的记录创建方式

> ID：14935475
> 
> 赞同：0
> 
> 时间：2013-02-18T11:42:00.043
> 
> 标签：javascript, ember.js

干杯! 我有这样的模型结构：

```
App.Foo = DS.Model.extend({
  bars: DS.hasMany('App.Bar')
});

App.Bar = DS.Model.extend({
  number: DS.attr('number'),
  foo: DS.belongsTo('App.Foo')
}); 
```

可以先创建`App.Bar`记录吗？如果是，那么如何`App.Foo`在未来创建并以正确的方式将现有的 Bars 记录关联到它？我只是想知道，在这种情况下是否有类似“ember-way”的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:03:39.927

> 可以先创建 App.Bar 记录吗？

是的。

> 如果是，那么如何在未来创建 App.Foo 并以正确的方式将已经存在的 Bars 记录关联到它？

```
bar = store.createRecord(App.Bar);
store.commit();

//later
foo = store.createRecord(App.Foo);
store.commit();

//later
foo.get('bars').addObject(comment);
store.commit(); 
```

有关一些更详细的示例，请参阅[一对多关系测试](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/relationships/one_to_many_relationships_test.js)

# powershell-2.0 - 当 $ErrorActionPreference = "Stop" 时按顺序执行 finally 块

> ID：14935477
> 
> 赞同：0
> 
> 时间：2013-02-18T11:42:12.470
> 
> 标签：powershell-2.0, try-finally

我们正在使用`Start-Transcript`并`Stop-Transcript`记录 PowerShell 脚本的输出。

该脚本正在执行应用程序的安装，因此`$ErrorActionPreference = "Stop"`如果遇到任何错误，我们也会停止执行。

这样做的问题是，如果发生错误，脚本会在错误输出到控制台之前停止。这意味着错误不会包含在我们的日志文件中。即使我们使用`try...finally`如下方式也是如此：

```
Start-Transcript "$(Split-Path $MyInvocation.MyCommand.Path -Leaf)-$((Get-Date).toUniversalTime().ToString('yyyy-MM-ddTHH-mm-ss')).log"

$ErrorActionPreference = "Stop"

try
{
    Write-Host "various things happening"

    Write-Error "an error"
}
finally
{
    Stop-Transcript
} 
```

运行此脚本的控制台输出为：

```
E:\> .\Testing.ps1
Transcript started, output file is Testing.ps1-2013-02-18T11-39-27.log
various things happening
Transcript stopped, output file is ...
Write-Error : an error
At ... 
```

我们可以做些什么来确保错误消息包含在日志中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:13:42.490

也许这可以工作：

```
Start-Transcript "$(Split-Path $MyInvocation.MyCommand.Path -Leaf)-$((Get-Date).toUniversalTime().ToString('yyyy-MM-ddTHH-mm-ss')).log"    
$ErrorActionPreference = "Stop"
try
{    
  write-host " A million stuff to do..."    
  $a = 1/0    
}

catch [system.exception]
{
   Write-host "Exception String: "+ $($_.Exception.Message)
   Stop-Transcript
} 
 try{
  stop-transcript
}
catch [System.InvalidOperationException]{} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:14:05.330

我们为此找到了以下解决方案，如下所示：

```
Start-Transcript "$(Split-Path $MyInvocation.MyCommand.Path -Leaf)-$((Get-Date).toUniversalTime().ToString('yyyy-MM-ddTHH-mm-ss')).log"

$ErrorActionPreference = "Stop"

trap {
    Write-Error $error[0] -ErrorAction Continue
    Stop-Transcript
    exit 1
}

Write-Host "various things happening"
Write-Error "an error"

Stop-Transcript 
```

# f# - 缺少“.NETFramework,Version=v4.0,Profile=Profile47”的定位包

> ID：14935479
> 
> 赞同：4
> 
> 时间：2013-02-18T11:42:28.723
> 
> 标签：f#, visual-studio-2012, portable-class-library

[在尝试从 f# source code 编译 FSharp.Core](https://stackoverflow.com/questions/14791925/using-a-custom-version-of-fsharp-core-dll)的便携版本时，我遇到了一些问题。

为了解决这个问题，我创建了一些项目文件，以便能够在 Visual Studio 中打开它，而不必使用以下命令：

```
msbuild fsharp-library-build.proj /p:TargetFramework=portable-net4+sl4+wp71+win8 
```

当我`FSharp.Core.Portable.sln`从[这里](https://github.com/ovatsus/fsharp)打开时，我收到了这个非常奇怪的错误：

![错误](../Images/fb055303f477132e0b546183eea17392.png)

VS2012 没有这样的目标包，[它应该是开箱即用的](http://msdn.microsoft.com/en-en/hh487283.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T08:26:21.183

ZachBray 指出了我的问题。（在我得到一个不起作用的项目之后）

我将它与一个新的可移植类库进行了比较，问题就解决了。

对于大多数 C# PCL，以下行将起作用：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\Portable\$(TargetFrameworkVersion)\Microsoft.Portable.CSharp.targets" /> 
```

（所以在项目文件的最后，替换这个或更新的“导入”元素）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T13:59:53.930

我最近有这个问题。原来我在项目底部导入了错误的目标文件。

为了让它工作，我用这个代替了它：

`<Import Project="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.Portable.FSharp.Targets" />`

# entity-framework - 使用 EF Code First 处理模式而不是数据库

> ID：14935482
> 
> 赞同：0
> 
> 时间：2013-02-18T11:42:46.977
> 
> 标签：entity-framework

默认情况下，我曾经使用 EF 为我的 Code First 实体和 DataContext 创建的单独数据库。在其中一个项目中，我不允许为应用程序的唯一目的分配单独的数据库。但我可以在现有数据库中创建单独的模式。是否有可能，如果可以，如何配置 EF 以针对现有数据库中的单独模式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:41:57.457

如果您首先使用代码，这应该会有所帮助：[http ://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/](http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:46:58.273

模型构建器支持

```
 modelBuilder.entity<yourEntity>.ToTable("NameofTable",schemaToUse); 
```

# java - GWT 使用 RequestFactory 命中 HTTP servlet

> ID：14935484
> 
> 赞同：8
> 
> 时间：2013-02-18T11:42:49.317
> 
> 标签：java, gwt, servlets, requestfactory

如果可能，我想将 GWT`RequestFactory`用于所有客户端-服务器通信。我的理解是，您必须映射`/gwtServlet`到`RequestFactoryServlet`您的`web.xml`，然后使用`@Service`注释来告诉`RequestFactoryServlet`如何将客户端请求映射到其相应的服务。

**有人可以在客户端和服务器端**提供此过程的完整代码示例吗？**我想将一个`Widget`对象从客户端发送到`WidgetProcessor`服务器端的服务：**

 **```
public class Widget {
    // This is a domain object (POJO).
}

public class WidgetProcessor {
    public void processWidget(Widget w) {
        // Inspect the Widget. If certain properties contain certain
        // values, place it on a queue. Else "process" the Widget
        // and persist it to a DB.

        if(w.containsSpecialValues())
            QueueManager.sendToQueue(w);
        else {
            // Process widget...

            WidgetDAO.save(w);
        }
    }
} 
```

在非 GWT 上下文中，我只需定义 a `WidgetProcessorServlet`，将其映射到`/processWidget`，并使其看起来像：

```
@Override
public void doGet(HttpServletRequest request, HttpServletResponse response) {
    WidgetProcessor widgetProcessor = new WidgetProcessor();
    widgetProcessor.processWidget(getWidgetFromRequest(request));
} 
```

`RequestFactory`这在-land中如何工作？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:50:06.277

可以使用 RequestFactories，但也可以使用 GWT-RPC。我更喜欢 RequestFactories。

您将拥有以下类和接口：

在服务器上：

1.  小部件（Servlet）
2.  小部件处理器

在客户端：

1.  小部件代理
2.  小部件请求
3.  WidgetRequestFactory
4.  WidgetPresenter

小部件Servlet

```
package com.foo.bar.server;
public class Widget {
   //Your methods
    public void yourInstanceMethod(){
       //foo
    }
    public static void yourStaticMethod(){
       //bar
    }
    public static void processWidget(Widget w){
       WidgetProcessor widgetProcessor = new WidgetProcessor();
       widgetProcessor.processWidget(getWidgetFromRequest(request));
    }
} 
```

小部件处理器

```
package com.foo.bar.server;
public class WidgetProcessor {
    public void processWidget(Widget w) {
        // Inspect the Widget. If certain properties contain certain
        // values, place it on a queue. Else "process" the Widget
        // and persist it to a DB.

        if(w.containsSpecialValues())
            QueueManager.sendToQueue(w);
        else {
            // Process widget...

            WidgetDAO.save(w);
        }
    }
} 
```

小部件代理

```
package com.foo.bar.server;
import com.foo.bar.server.Widget;
@ProxyFor(value = Widget.class)
public interface WidgetProxy extends EntityProxy{
    //Your getter and Setter methods
} 
```

小部件请求

```
package com.foo.bar.client;
import com.foo.bar.server.Widget;
@Service(value = Widget.class)
public interface WidgetRequest extends RequestContext{
    InstanceRequest<WidgetProxy, Void> yourInstanceMethod();
    Request<Void> yourStaticMethod();
    Request<Void> widgetProcessor(WidgetProxy widget);
} 
```

WidgetRequestFactory

```
package com.foo.bar.client;
public interface WidgetRequestFactory extends RequestFactory{
    WidgetRequest widgetRequest();      
} 
```

WidgetPresenter

```
package com.foo.bar.client;
public class WidgetPresenter {
    private final WidgetRequestFactory rf = GWT.create(WidgetRequestFactory.class);
    public WidgetPresenter() {
        rf.initialize(new EventBus());
        rf.widgetRequest().widgetProcessor().fire(new Receiver<Void>() {
            @Override
            public void onSuccess() {

                //Do what you want to confirm to user...
            }
        });
    }
} 
```

**另外：如果您再次向用户响应已处理的小部件，您将使其如下所示：**

```
@Service(value = Widget.class)
public interface WidgetRequest extends RequestContext{
    ...
    Request<WidgetProxy> widgetProcessor(WidgetProxy widget);
}

public class Widget {
    ...
    public static void processWidget(Widget w){
       WidgetProcessor widgetProcessor = new WidgetProcessor();
       return widgetProcessor.processWidget(getWidgetFromRequest(request));
    }
}

public class WidgetProcessor {
    public Widget processWidget(Widget w) {
        // Inspect the Widget. If certain properties contain certain
        // values, place it on a queue. Else "process" the Widget
        // and persist it to a DB.

        if(w.containsSpecialValues())
            QueueManager.sendToQueue(w);
        else {
            // Process widget...

            WidgetDAO.save(w);
        }
        return w;
    }
}

public class WidgetPresenter {
    private final WidgetRequestFactory rf = GWT.create(WidgetRequestFactory.class);
    public WidgetPresenter() {
        rf.initialize(new EventBus());
        rf.widgetRequest().widgetProcessor().fire(new Receiver<WidgetProxy>() {
            @Override
            public void onSuccess(WidgetProxy response) {

                WidgetView v = new WidgedView(response);
                            RootPanel.get().add(view);
            }
        });
    }
}

package com.foo.bar.client;
public class WidgetView {

    public WidgetView(WidgetProxy widget) {

        //paint widget with widget
            // widget.getSomeProperty(); etc.

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T15:34:27.297

您对 RequestFactory 场景有些困惑。

您需要从这里开始 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)

浏览示例 RequestFactory 演示 @ DynatableRF 代码 - [http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/dynatablerf](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/dynatablerf)

下载示例 RequestFactory 演示 @ DynatableRF 代码 - [http://google-web-toolkit.googlecode.com/files/gwt-2.5.0.zip](http://google-web-toolkit.googlecode.com/files/gwt-2.5.0.zip)

**编辑 -** RequestFactory 示例与 MVP、活动和编辑器框架复杂。需要付出大量努力才能确定您的场景需要哪种 RF、编辑器、MVP 和 Activties 组合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T10:09:14.263

I think no need to do Brain Storming with `Request Factory` for this purpose.

It can be very simple With `Gwt RPC` as per *my opinion* .

In short the simple RPC structure as below :

```
GWT Code <===> InterfaceAsync <===> Interface (Synchronous)<===> Server Code 
```

I am trying to explain with you elements it self .

**The Synchronous Interface(central to the whole RPC):**

```
import com.google.gwt.user.client.rpc.RemoteService;
public interface WidgetRPCInterface extends RemoteService
{
    public Widget widgetProcessRPC(Widget myWidget);
} 
```

**The ASynchronous Interface(Key part on Client):**

```
import com.google.gwt.user.client.rpc.AsyncCallback;

public interface WidgetRPCInterfaceAsync
{
    public void widgetProcessRPCWidget myWidget, AsyncCallback callback);
} 
```

Here you go with the **`Service`(Equals to servlet) which implements "WidgetRPCInterface"**

```
public class WidgetRPCImpl extends RemoteServiceServlet implements RPCInterface
{
    private static final long serialVersionUID = 1L;

    public Widget widgetProcessRPCWidget myWidget)
    {
       //Process your widget  here (CRUD operations)
       //You can change return type and return what ever you want to client . 
    }

**you can override doget,doPost,doDelete....etc along with your methods 
} 
```

**Map the above class in your web.xml;**

```
 <servlet>
    <servlet-name>widgetrpc</servlet-name>
    <servlet-class>com.server.WidgetRPCImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>widgetrpc</servlet-name>
    <url-pattern>/widgetrpc</url-pattern>
  </servlet-mapping> 
```

Finally in your GWT Code .Use service as below

**Using in Code:**

*//register the service .*

```
 private final WidgetRPCInterfaceAsync widgetService = 
        GWT.create(WidgetRPCInterface.class);
        ServiceDefTarget endpoint = (ServiceDefTarget) service;
        endpoint.setServiceEntryPoint('widgetrpc'); 
```

*requesting server with callback*

```
widgetService.widgetProcessRPC(widgetFromClient, callback);
 AsyncCallback callback = new AsyncCallback()
    {
        public void onFailure(Throwable caught)
        {
           //Do on fail
        }

        public void onSuccess(Object result)
        {
           //Process successfully done with result (result is which you
           returned in impl class) .
        }
    }; 
```

P.S .Beware of package structures:

**WidgetRPCInterfaceAsync ,WidgetRPCInterface** should be in client* package

**Widget** class should be in shared* package

**WidgetRPCImpl** should be in server* package

And Have a look on [RPC](http://examples.roughian.com/index.htm#Tutorials~RPC_To_Java) Example

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T13:49:10.997

您的 Widget 类将在服务器端。在客户端，您将使用一个接口来表示一个 Widget；此接口将成为实际 Widget 对象的代理。您可以使用 @ProxyFor 注释将代理接口与类相关联。例如，如果你在服务器上有 Widget 类，你可以在客户端有 WidgetProxy 接口：

```
@ProxyFor(value = Widget.class)
public interface WidgetProxy extends EntityProxy {
} 
```

代理包含实体属性的 getter 和 setter，这些 getter 和 setter 镜像在服务器上的类中。请求工厂还需要一种方法来定位与代理关联的类，为此我使用“定位器”类（尽管还有其他方法）。定位器也在 @Proxy 注释中指定：

```
@ProxyFor(value = Widget.class, locator = WidgetLocator.class) 
```

WidgetLocator 类也在服务器端。对于您要插入或更新的每个小部件，您都需要创建一个 RequestContext。RequestContext 标识将对实体进行操作的方法。这些方法的实际实现再次在服务器端......您可以引入一个包含这些方法的单独类，或者将它们添加到实体类（在您的情况下为 Widget）。我更喜欢将它们分成一个“DAO”类，将实体类（即Widget）限制为一个简单的bean。（您的 DAO 类名为 WidgetProcessor）。客户端的RequestContext是一个扩展RequestContext接口的接口。您的 RequestContext 接口告诉请求工厂在哪里可以找到服务器上的 DAO，这就是您使用 @Service 注释的地方。

查看 Thomas Broyer 的博客以获得很好的介绍： [GWT 2.1.1 RequestFactory](http://tbroyer.blogspot.com/2013/02/gwt-211-requestfactory.html)。我还发现 GWT in Action (Second Edition) 一书是一个有用的资源。我根据我的学习经验创建了一个示例，它可能对您也有用：[A GWT Request Factory Journey](http://greatlogic.com/?p=33)；同样，这可能有用也可能没用！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T10:42:49.777

我刚刚为您的目的开发了一个简单的骨架项目。在 Github 上查看我的答案[小部件处理器](https://github.com/dobromyslov/widget-processor)。

该项目基于 Maven 构建器和 Java EE 平台 (GlassFish)。

项目模块：

1.  `ear`- 通用耳模块将其他模块集成在一个易于部署的 EAR 包中；
2.  `persistence`- 该模块只有一个文件`persistence.xml`，并将所有外部实体链接到一个数据源；
3.  `ejb`- 该模块具有实体`Widget`和无状态 EJB `WidgetProcessor`；
4.  `web`- 带有 RequestFactory 的通用 GWT 模块。

调整 Maven 构建过程以正确构建所有内容。该项目可以毫无问题地导入 IntelliJ Idea。并且可以使用标准的 Idea 工具在 Glassfish 中进行调试。

此外，我已将 GWT RF 和 Persistence 样板代码移至[Github上的](https://github.com/dobromyslov/bilionix-core)[外部`bilionix-core`](https://github.com/dobromyslov/bilionix-core)工件。**

# asp.net-mvc-4 - mvc4 范围验证器十进制

> ID：14935492
> 
> 赞同：0
> 
> 时间：2013-02-18T11:43:15.320
> 
> 标签：asp.net-mvc-4, data-annotations

我有

```
[Range(typeof(decimal), "75000", "300000")]
public decimal Importo { get; set; } 
```

或者

```
[Range(75000, 300000)]
public decimal Importo { get; set; } 
```

对于 db 上的字段：`decimal(10, 2)`

当我的页面加载时，如果我提交表单，我会在输入中得到 75000,00，我会收到错误消息

`The field Importo must be between 75000 and 300000`（我使用 globalize.js 将其本地化为意大利语）

但 75000,00 必须是有效值。

我阅读使用正则表达式。有希望只使用范围属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-05T02:00:47.257

尝试添加这个

```
[RegularExpression(@"^\d+.\d{0,2}$",ErrorMessage = "Price must can't have more than 2decimal places")] 
```

此行可以接受 2 位小数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:50:39.900

你应该看看这篇文章。 [http://jeffhandley.com/archive/2009/07/09/191.aspx](http://jeffhandley.com/archive/2009/07/09/191.aspx)

# javascript - PhoneGap InAppBrowser：无法打开带有“%”字符的链接

> ID：14935493
> 
> 赞同：2
> 
> 时间：2013-02-18T11:43:16.227
> 
> 标签：javascript, iphone, ios, cordova, webview

我正在为我的 iOS 项目使用 PhoneGap 2.4。

当我想通过在新的 webview 层中打开外部 URL 时`window.open(url, "_blank");`，这适用于“简单”URL，例如“ [http://www.google.com](http://www.google.com) ”。

**但**

包含空格和特殊字符的更复杂的 URL 是一个问题。为了避免这种情况，我通过这个 JavaScript 调用对它们进行 URL 编码：

```
url = encodeURIComponent(url); 
```

这不适用于 InAppBrowser 插件。相反，我收到一条错误消息：

> webView:didFailLoadWithError - 操作无法完成。（WebKitErrorDomain 错误 101。）

因此，我对此进行了调查，我注意到**如果 url 包含“%”字符**`window.open(url, "_blank");`，则调用失败并显示此错误消息，例如，如果空白字符被编码为“%20”。

 **我该如何解决这个问题？这不是一个错误吗？

* * *

**更新：**我刚刚在 Android 上使用 PhoneGap 2.3 测试了相同的应用程序。奇迹般有效。所以这要么是 iOS 问题，要么是最新的 PhoneGap 版本 2.4 的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:41:22.050

卧槽，我才发现问题。我的网址中有一个未编码的空格。我用“%20”替换了它，现在它可以工作了。

我想我变老了:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:08:29.220

尝试用转义键包围 %

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:02:11.900

尝试改用 encodeURI（参见快速示例）： [http ://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#window.open](http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#window.open)**

# heroku - Heroku 临时文件系统和临时文件

> ID：14935497
> 
> 赞同：2
> 
> 时间：2013-02-18T11:43:21.923
> 
> 标签：heroku, filesystems, temporary-files

据我了解 Herokus Ephemeral 文件系统仅允许您对临时文件夹进行写访问。当创建文件的 dyno 停止或重新启动时，该文件夹中创建的文件将被丢弃。

我不明白的是，如果测功机没有停止或重新启动会发生什么？一定时间后文件还会被丢弃吗？

我们目前正在构建一个生成pdf文件并通过邮件转发它们的系统（或者您可以下载文件）。我是否需要在发送/下载 pdf 文件后自己删除它们，还是我可以依靠 Heroku 自动删除它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T13:12:57.420

Dynos 每 24 小时循环一次，因此您的文件将永远不会持续更长时间。

因此，可以肯定地说，您不必担心将这些文件归档。

笔记; 只是一件小事。Cedar 可让您写入测功机上的任何位置。Bamboo 只允许您写入 /tmp。

# sql - 强制存储过程在将数据插入表之前进行检查

> ID：14935498
> 
> 赞同：0
> 
> 时间：2013-02-18T11:43:21.797
> 
> 标签：sql, sql-server-2005

我创建了这个存储过程，

现在我想做的是，如果表中存在类似类型的记录，则始终替换，

这是sp，

```
USE [DBName]
GO

CREATE procedure [dbo].[InsertDD]
(
    @ColumnA varchar(1000), 
    @ColumnB varchar(1000),
    @CurrentDateAndTime datetime

)
AS

INSERT Into TableName
(
    ColumnA,    
    ColumnB,
    CurrentDateAndTime
)
Values
(
    @ColumnA,   
    @ColumnB,
    @CurrentDateAndTime
) 
```

现在，如果表已经有 B 列值（不管字母的不同，例如大写或小写），那么只需更新`CurrentDateAndTime`值。

如果不是，那么只需添加三个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:48:23.980

进行更新，如果没有找到要更新的记录，请插入：

```
update TableName 
set CurrentDateAndTime = @CurrentDateAndTime
where ColumnB = @ColumnB

if (@@rowcount = 0) begin

  insert into TableName (
    ColumnA,    
    ColumnB,
    CurrentDateAndTime
  ) values (
    @ColumnA,   
    @ColumnB,
    @CurrentDateAndTime
  )

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:47:46.380

搜索 IF ... EXISTS 命令。最后，您还可以使用 MERGE 语句，该语句确定是否使用 SELECT 行已经存在并且您可以执行 UPDATE。

# c++ - 使用 ostream 和链接的运算符重载。为什么按引用返回？

> ID：14935502
> 
> 赞同：4
> 
> 时间：2013-02-18T11:43:35.943
> 
> 标签：c++, operator-keyword, ostream

对此有很多问题和答案，但我真的找不到*为什么*我们需要通过引用返回。

如果我们有（假设运算符已经为对象 MyObject 正确重载）：

```
 MyObject obj1;
    MyObject obj2;
    cout << obj1 << obj2; 
```

现在，会有像 ((cout << obj1) << obj2)); 这样的子表达式。问题是*为什么*我们不能按值返回？（好吧，假设它允许将 ostream 作为值返回）如果 cout << obj1 返回一个流对象而不是引用，有什么区别？那么为什么链接是不可能的呢？就像重载 '=' 运算符一样，如果我们按值返回，我们不能像 A=B=C=D 那样链接。为什么 ？

* * *

谢谢你的回答。我意识到我可以在不通过引用返回的情况下进行链接，但是重载'='时我的输出完全不同。如果我写：

```
 class Blah{
    public:
       Blah();
       Blah(int x, int y);
       int x;
       int y;
       Blah operator =(Blah rhs);
     };
     Blah::Blah(){}
     Blah::Blah(int xp, int yp){
       x = xp;
       y = yp;
     }
     Blah Blah::operator =(Blah rhs){
       Blah ret;
       ret.x = rhs.x;
       ret.y = rhs.y;
       return ret;
     }
    int main(){

      Blah b1(2,3);
      Blah b2(4,1);
      Blah b3(8,9);
      Blah b4(7,5);
      b3 = b4 = b2 = b1;
      cout << b3.x << ", " << b3.y << endl;
      cout << b4.x << ", " << b4.y << endl;
      cout << b2.x << ", " << b2.y << endl;
      cout << b1.x << ", " << b1.y << endl;
          return 0;
     } 
```

输出为：8,9 7,5 4,1 2,3

但是，如果我通过引用返回重载并将参数设置为引用，并在重载时修改并返回 *this，我得到：2,3 2,3 2,3 2,3

第一个示例中没有更改对象的原因是什么？是因为 lvalues vs rvalues 吗？相比之下，速记运算符怎么样？

* * *

好的，另一个更新。如前所述，正确的结果应该是所有人的 2,3。但是，如果我将重载运算符编写为：

```
 Blah Blah::operator =(Blah rhs){
       x = rhs.x;
       y = rhs.y;
       return *this;
     } 
```

然后，我会得到正确的结果。(2,3 2,3 2,3 2,3)。*this 会发生什么？重载运算符在重载函数中用 rhs 更新 lhs，但返回 *this 似乎毫无意义。*this 在哪里结束： b3 = b4 = b2 = b1 ？它会尝试返回左侧，因此当链到达 b3 时它实际上什么也不返回（这将尝试返回左侧）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T11:52:31.040

主要原因是因为按值返回会产生副本，而 iostream 对象是不可复制的。他们有状态和身份，并且不清楚复制它们应该意味着什么：对象包含（逻辑上，至少）它在流中的位置，所以如果我创建一个副本，我有两个对象将写入相同的位置流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:45:07.650

按值返回不会阻止链接。但是，如果您按值返回，您将返回一个*副本*，在这种情况下，这通常不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T13:31:19.023

```
Blah Blah::operator =(Blah rhs){
Blah ret;
ret.x = rhs.x;
ret.y = rhs.y;
return ret;
}-->(1)

Blah b1(2,3);
Blah b2(4,1);
Blah b3(8,9);
Blah b4(7,5); 
```

b3 = b4 = b2 = b1;---->(2)

通过调用 (2) 您将调用 =() 并且在上面的代码片段 (1) 中，您将返回一个临时对象。请注意，您不会更新实际对象的 x 值。例如，操作像这样开始 b2(x ,y) = b1(2,3) 并且您正在初始化临时对象 ret 中的值 2 和 3 并按值返回临时对象。因此临时对象现在将调用 b4 即 b4 = temp(2,3 ) 和同样的funda。你将复制 2 & 3 到 b4 并返回一个临时对象，它调用 b3 作为 b3 = temp(2,3)。现在如果你替换 (2) 像这样打印 cout << b3=b4 =b2=b1（提供实现<<重载），您将获得 2 & 3 作为输出，因为 2 & 3 仅在此行中可用。在您的示例中，您将在下一行打印此值不可用，这仅是因为您没有更新调用的对象中 x & y 的值。因此，要解决此问题，您应该返回 *this 作为参考，这意味着如果您执行 b2=b1 并返回 *this，您将返回调用函数的对象。也就是说，您正在返回实际对象，并且实际对象的 x,y 值正在更新，只要对象存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:46:40.330

```
Blah Blah::operator =(Blah rhs){
   Blah ret;
   ret.x = rhs.x;
   ret.y = rhs.y;
   return ret;
 }
  Blah b1(2,3);
  Blah b2(4,1);
  Blah b3(8,9);
  Blah b4(7,5);
  b3 = b4 = b2 = b1; 
```

`b3`将`b4`作为它的 rhs，但您实际上并没有修改 的值`b3`，而是创建了一个相同类型的新变量`Blah`并将其返回为 null（在这种情况下，null 意味着什么，因为`b3`.即使 的左边有什么东西，`b3`也不会有什么不同，因为另一个`Blah`变量会做同样的事情`b3`并且`b4`做。

事实上，如果你有另一个类（比如 CoolClass，它也有 x 和 y）并重载赋值运算符以接收一个 blah 变量并让它实际修改它自己的 x 和 y，你会发现。

```
coolObject = b3 = b4 = b2 = b1; //CoolObject.x = 2, CoolObject.y = 3 
```

我仍然不确定您对通过引用传递的主要抱怨是什么。这是我为 Blah 编写该运算符的方法。

```
Blah & Blah::operator = (const Blah & rhs) { x = rhs.x; y = rhs.y; return *this; } 
```

这保证了您的 rhs 是不可变的并且链接行为正常工作。

如果您正在寻找具有不同类型对象的更好行为，例如 ostream，则声明友元函数有时会有所帮助。这些是您可以在新类中声明但不直接属于该类的函数。这种方法的好处是有一个看起来像是来自 ostream 类的运算符，但它却在 Blah 类中。您仍然可以在朋友函数中使用私有成员和受保护成员，这使它们变得有用。

```
friend std::ostream & Blah::operator << (std::ostream & lhs, const Blah & rhs)
{ return lhs << "{" << rhs.x << ", " << rhs.y << "}"; } 
```

它的作用是传递同一个 ostream 对象并按优先顺序用数据填充它。您期望在常规文本和 ostream 中找到完全相同的行为。

使用您的第一个示例，您可以这样想。假设`obj1`和`obj2`都是`Blah`，`cout`对象`obj1`通过朋友函数接收并返回`cout`由 中的数据修改的相同对象`obj1`，然后新修改的`cout`对象再次`obj2`返回相同的修改`cout`对象，但现在它也被修改了`obj2`。

```
(cout << obj1) << obj2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-19T18:17:58.920

这是我在 learncpp.com 上创建的一个有趣的答案

ostream 是作为 C++ 的一部分提供的用于处理输出流的类。ostream 如何实现的细节非常复杂，但幸运的是完全没有必要有效地使用它。

由于 ostream 是一个类，因此 ostream& 是对 ostream 类的引用。请注意，我们还将 ostream& 作为参数。ostream 通常通过引用传递，因为我们不想在传递它时复制它。

所以基本上，我们的重载函数将 ostream 作为参数，向其中写入内容，然后返回相同的 ostream。这允许我们将`<<`调用链接在一起：

```
cout << cPoint1 << cPoint2 << cPoint3; 
```

这解决如下：

```
((cout << cPoint1) << cPoint2) << cPoint3; 
```

`cout < < cPoint1`首先解决，cout 成为 ostream& 参数。当这个重载函数完成对 out 参数的写入时，它会返回该 cout 以便下一次调用`<<`可以使用它。因此：

```
((cout << cPoint1) << cPoint2) << cPoint3; 
```

变成：

```
(cout << cPoint2) << cPoint3; 
```

变成：

```
cout << cPoint3; 
```

这最后一次调用了我们的重载函数。在此函数结束时，再次返回 cout。但是没有人可以使用它，所以返回值被忽略了。表达式结束，程序移至下一行。

# iphone - MPVolumeView 拇指图像不居中

> ID：14935508
> 
> 赞同：4
> 
> 时间：2013-02-18T11:43:59.020
> 
> 标签：iphone, ios, mpvolumeview

我正在使用`MPVolumeView`我的应用程序。我已经自定义了，`MPVolumeView`但存在一个问题，因为滑块的拇指图像设置不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:42:47.967

**编辑：**

所以事实证明，当使用 时`MPVolumeView`，iOS 实际上并没有像与其他图像一样垂直对齐您设置的图像。解决方案是创建一个稍微偏移的图像（如果您需要说服它图像更大，您可以始终使用 alpha）并将该图像仅用于`MPVolumeView`. 这有点痛苦，但效果很好。通常，您希望新图像的偏移量在 2-4 像素之间。

* * *

要设置音量拇指图像，您应该使用：

```
setVolumeThumbImage:forState: 
```

例如，如果您有一个名为的图像`myThumbImage.png`和一个名为的 MPVolumeView `myVolumeView`，您将使用：

```
[myVolumeView setVolumeThumbImage:
    [UIImage imageNamed:@"myThumbImage"] forState:UIControlStateNormal]; 
```

这将找到您项目中存在的任何命名图像`myThumbImage.png`，并将其用于滑块拇指。你应该注意这张图片是你想要的尺寸，25x25 通常有点大，但不是一个糟糕的起点。

当您点击它时， Apple`UISlider`会变暗并更改按钮的外观。为此，请创建另一个看起来您想要的图像（这可能是相同的图像，只是更暗或完全不同的图像），并将其设置为突出显示时为拇指显示的图像（即当你点击它时会发生什么）。

您将使用以下方法完成此操作：

```
[myVolumeView setVolumeThumbImage:
    [UIImage imageNamed:@"VolumeThumbHighlighted"] forState:UIControlStateHighlighted]; 
```

它将找到命名的图像`VolumeThumbHighlighted.png`并将其用于该目的。

* * *

请注意，您还可以使用可拉伸图像设置左右轨道图像，方法与典型图像略有不同`UISlider`。您将使用以下代码：

```
[myVolumeView setMinimumVolumeSliderImage:[[UIImage imageNamed:@"LeftTrackImage"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 0)]forState:UIControlStateNormal];
[myVolumeView setMaximumVolumeSliderImage:[[UIImage imageNamed:@"RightTrackImage"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 4)]forState:UIControlStateNormal]; 
```

这会将图像设置为边缘插入 4，您可以将其设为任何您想要的值。

我不会完全解释这部分，因为它不是您问题的直接一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:17:43.173

在 MPVolumeView 中，

它始终将音量值与您的设备硬件音量值一起使用。

如果您的硬件的最小音量为 0.2，那么您的 MPVolumeView 将滑块设置为 0.2。它使用 0.0 到 1.0 的音量值。

有关更多详细信息，请在此处下载示例代码，

[示例代码](http://blog.stormyprods.com/2008/12/mpvolumeview-demo-project.html)

您还可以自定义此卷视图

[帮助链接](https://stackoverflow.com/questions/3813625/how-to-customize-mpvolumeview)

如果您需要，请告诉我。

更新 ：

这里还有一个有用的链接，[MPVolumeView](http://tibr.me/2012/07/14/customizing-mpvolumeview-appearance/)

# c# - 无法在 Windows 服务上创建 Exchange 凭据

> ID：14935510
> 
> 赞同：0
> 
> 时间：2013-02-18T11:44:17.647
> 
> 标签：c#, windows-services, exchange-server

我必须连接到交换服务器邮件的收件箱并访问邮件中的附件。我有这部分代码，在控制台应用程序中调试时没有问题。我创建了一个 Windows 服务来检查邮箱并定期获取附件。但是，Windows 服务无法创建凭据会引发异常。请检查此程序并与我分享您的想法。我在 Windows 服务上调试和运行时有什么区别。

```
private FindItemsResults<Item> ConnectToInbox()
    {
        ExchangeService _service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
        _service.Credentials = new WebCredentials("username", "password");

        _service.AutodiscoverUrl("mail@mail.com");
        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
        FindItemsResults<Item> findResults = _service.FindItems(WellKnownFolderName.Inbox, new ItemView(1000));
        Logger.Write("There is/are " + (findResults.Items.Count) + " email(s) in Inbox");
        return findResults;
    } 
```

# javascript - 使用 Oauth 的无效客户端尝试访问 BigQuery

> ID：14935511
> 
> 赞同：1
> 
> 时间：2013-02-18T11:44:18.563
> 
> 标签：javascript, google-bigquery, google-oauth

我创建了一个小型 Bigquery 项目，现在我需要使用 OAuth 2 流通过简单的客户端 javascript 访问它。

现在我只是在 Aptana 中从我的电脑上运行测试，所以当我请求我的客户端 ID 时，我`http://localhost:8020`在“javascript origins”字段中指定了 url。当被问及我注册的是什么类型的应用程序时，我选择了“网络应用程序”。

我复制粘贴了此处显示的示例：

[https://developers.google.com/bigquery/docs/authorization#client-side-javascript](https://developers.google.com/bigquery/docs/authorization#client-side-javascript)

并用我自己的替换项目号和客户ID，如告知的那样。但是，gapi.auth() 失败，我收到一个弹出窗口，提示存在错误，即“无效客户端”。其他参数是：

```
scope=https://www.googleapis.com/auth/bigquery
response_type=token
redirect_uri=postmessage
proxy=oauth2relay1213926397
origin=http://127.0.0.1:8020
state=1100863975|0.29982968120843295
client_id=xxxxxxxxxxxx.apps.googleusercontent.com
authuser=0 
```

我三重检查了客户 ID 和项目编号是否正确，并且它们是正确的（至少，它们与我的控制台中的相同）。不过，我的客户 ID 似乎不存在。我究竟做错了什么？我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:19:12.330

尝试将您的 JavaScript 来源更改为“ `http://localhost`”

# sql-server-2008 - 类似于跑台概念

> ID：14935522
> 
> 赞同：0
> 
> 时间：2013-02-18T11:44:59.090
> 
> 标签：sql-server-2008

我有一张表，因为我想更新今天的期末余额应该显示为 tomarrows 期初余额，如果在特定日期发生任何期末余额更新，那么从该日期到当前日期期初余额应该得到更新，这里是我想要的样本输出如下；期初余额（今天）=期末余额（昨天）

```
date       opening_balance   closing_balance  accountformatid daybooktype
18-02-2013  12000               15000           1               240
19-02-2013  15000               14000           1               240
20-02-2013  14000               13000           1               240
21-02-2013  13000               10000           1               240
22-02-2013  10000               5000            1               240
23-02-2013  50000               1500            1               240 
```

这怎么能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:01:32.770

试试这个：

```
DECLARE @t TABLE (date DATETIME,      opening_balance  INT, closing_balance  INT,accountformatid INT,daybooktype INT)

INSERT @t 
SELECT CONVERT(DATE, a, 105), b,c,d,e
FROM (VALUES
('18-02-2013',12000  ,15000 ,1,240),
('19-02-2013',15000  ,14000 ,1,240),
('20-02-2013',14000  ,13000 ,1,240),
('21-02-2013',13000  ,10000 ,1,240),
('22-02-2013',10000  ,5000  ,1,240),
('23-02-2013',50000  ,1500  ,1,240)
) tbl(a,b,c,d,e)

SELECT  t1.*
        , t2.*
FROM    @t t1
LEFT JOIN   
        @t t2 ON t1.date = DATEADD(DAY, 1, t2.date)
AND     t1.opening_balance = t2.closing_balance
WHERE   t2.closing_balance IS NULL
-- this prevents first record to be falsely reported
AND     t1.date <> (SELECT MIN(date) FROM @t) 
```

这列出了不按日期和余额对应的两个后续记录中的第二个。

# arrays - D 中的矢量符号

> ID：14935523
> 
> 赞同：1
> 
> 时间：2013-02-18T11:45:01.203
> 
> 标签：arrays, d

我正在玩 D 数组，我偶然发现了这个：

当我编译这段代码

```
import std.stdio;

int main()
{
  int[] a, b;
  b ~= [2,3,4,5];
  a.length = b.length;
  a[] = b[] + 4;
  writeln(typeid(a),"\n",typeid(b));
  writeln(a,"\n",b);

  int[] c, d;  
  for (int n=10; n<20; ++n) {
    d ~= n;

  }
  c.length = d.length;
  c = d[] + 2;  //compile error
  writeln(typeid(c),"\n",typeid(d));
  writeln(c,"\n",d);

  return 0;
} 
```

编译时出现错误：

```
Error: Array operation d[] + 2 not implemented 
```

前几行与其余行之间的唯一区别是填充 b 和 d 的方式。

**如何在循环中填充数组时使用数组操作？**

还有一个问题：

前几行是正确的方法吗？这条线`a.length = b.length;`对我来说似乎有点奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:02:25.183

第一个问题：你只是忘`[]`了左边。`c[] = d[] + 2;`作品。

第二个问题：是的；矢量运算需要大小相等的数组，而设置`.length`是调整数组大小的一种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T12:03:41.943

> 前几行与其余行之间的唯一区别是填充 b 和 d 的方式。

不，不是。仔细看。

```
a[] = b[] + 4;
c = d[] + 2;  //compile error 
```

至于这个：

```
int[] a, b;
b ~= [2,3,4,5];
a.length = b.length;
a[] = b[] + 4; 
```

你也可以这样做：

```
int[] a = new int[4];
int[] b = [2, 3, 4, 5];
a[] = b[] + 4; 
```

# android - 微调器：如何减小微调器的尺寸

> ID：14935528
> 
> 赞同：6
> 
> 时间：2013-02-18T11:45:07.367
> 
> 标签：android

当我减少微调器的 layout_width 和 layout_height 时，项目名称会被剪切。我想在不影响项目名称的情况下减小微调器的大小。怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T11:59:54.593

在为您的 Spinner 创建适配器时，提供自定义布局而不是预定义的布局

创建名为 spinner_row.xml 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
 android:id="@+id/cust_view"  
    android:layout_width="match_parent" 
    android:textColor="@color/black"
    android:textSize="12dp"
    android:layout_height="36dp" 
    android:gravity="left|center_vertical"/> 
```

在这里，您可以通过修改此文本视图来更改微调器中元素的颜色文本大小和宽度和高度

创建适配器时像这样使用它

```
 ArrayAdapter<String> adapter=new ArrayAdapter<String>(context, R.layout.spinner_row,yourlist); 
```

最后一项任务是例行公事

```
spinner.setAdapter(adapter); 
```

我希望这能帮到您。

# php - 用户关闭浏览器时如何存储日志时间

> ID：14935531
> 
> 赞同：0
> 
> 时间：2013-02-18T11:45:13.013
> 
> 标签：php, session, cookies, phpmyadmin

我创建了一个小应用程序。在该应用程序中我想存储登录和注销时间。用户正确登录但在注销时用户直接关闭浏览器。如何存储注销时间..

在我的应用程序中，如果用户单击注销按钮没有问题，我创建了一个按钮注销。但是用户直接关闭浏览器而不单击注销按钮。在这种情况下如何存储日志- 用户的超时时间。

请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:49:07.987

如果我是对的，当用户关闭浏览器时，您将无法运行任何脚本。

您可以将时间存储到会话中：例如

```
$_SESSION['LAST_REQUEST_TIME'] = time() ; 
```

每次用户更新您网站上的页面时，都会设置一个新时间。

另外，将时间保存到数据库中，因为一旦用户关闭浏览器，会话就会被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:50:55.927

首先：没有可靠的方法来检测用户关闭浏览器（缺少一些始终运行的 ajax 心跳）。JavaScript 只是一点帮助，因为它不会捕获浏览器崩溃、网络连接丢失等问题。

也就是说，您可能真正想要的是登录会话中最后一个请求的时间戳——这很容易获得。您只需`last_seen`使用合适的会话 ID 更新每个请求的时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:51:38.877

您应该将上次请求时间存储到 db 并与新请求时间进行比较，如果它大于确定的时间（例如 15 分钟），您可以要求登录。

# android - 每次我在tabhost中切换到它时都会调用fragmen'ts onCreate

> ID：14935535
> 
> 赞同：0
> 
> 时间：2013-02-18T11:45:34.277
> 
> 标签：android, android-fragments, android-tabhost

我的主要活动中有一些标签，每个标签都是一个片段。

现在，在某个片段中，我做了这样的事情：

```
public class MyFragment extends Fragment{

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);

    ... initialization

    DownloadTask dvt = new DownloadTask();
    dvt.execute(new Void[]{});
    dvt = null;
} 
```

下载任务填充一个列表视图。现在，每次我从这个选项卡来回移动时，都会一遍又一遍地调用任务，但它不应该因为 onCreated 应该只在片段创建时被调用。我想第一次调用这个任务，然后用填充的列表视图保存片段。我检查了一下，发现没有调用 onDestroy ......所以发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:50:59.423

[如Fragment](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)的文档中所写，如果您调用`setRetainInstance(true)`您的`Fragment`,

> onAttach(Activity) 和 onActivityCreated(Bundle) 仍将被调用

因此，将`setRetainInstance()`调用和`AsyncTask`起始代码都放在您`Fragment`的 's`onCreate()`中以实现所需的行为。希望这可以帮助。

# mysql - 选择时操作数应包含 1 列 mysql 错误

> ID：14935536
> 
> 赞同：0
> 
> 时间：2013-02-18T11:45:37.760
> 
> 标签：mysql, sql, join

我正在使用 MySql。当我从表中选择多列时

> 负责人ID，职务

然后生成错误。所以我不会选择多列。请帮我解决这个问题。

```
 select id,
        title,
        responsible_id,
        project_id p_id,(select responsible_id,title from projects where p_id=projects.project_id) responsible_id,
        status,
        create_by,
        milestone_id from tasks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:46:43.370

通过这种方式，您不能从相关子查询中选择多个列。

`JOIN`而是两个表，如下所示：

```
 select 
   t.id,
   t.title AS TaskTitle,
   t.responsible_id,
   p.project_id p_id,
   p.responsible_id,
   p.title AS ProjectTitle,
   t.status,
   t.create_by,
   t.milestone_id
from tasks AS t
INNER JOIN projects AS p ON t.p_id = p.project_id 
```

# sql - 一个表的复合主键可以用作另一个表的复合主键的一部分吗？

> ID：14935539
> 
> 赞同：0
> 
> 时间：2013-02-18T11:45:38.820
> 
> 标签：sql, oracle

我已经创建了三个表。表 1 的唯一键与表 2 的唯一键一起用作表 2 的复合主键。我尝试在表 3 的组合键中使用表 2 的组合键部分。但是我做不到吗？谁能告诉我？

```
table 1: 
create table emp1( 
    associate_id number(5) not null, 
    associate_name varchar2(25), 
    salary decimal(10,2),
    doj date,
    grade varchar2(6),
    constraint emp1_cons unique(associate_id)
);

table 2:
create table project(
    associate_id number references emp1(associate_id) not null, 
    pm_id number(5), 
    project_id varchar2(10) unique,
    project_name varchar2(20),
    project_desc varchar2(20),
    status varchar2(20),
    grade varchar2(6),
    primary key(associate_id,project_id)
);

table 3:
create table department(
    dept_id varchar2(5), 
    project_id varchar2 references project(project_id), 
    dept_name varchar2(10), 
    dept_code number(5), 
    proj_startdate date, 
    proj_enddate date, 
    primary key(dept_id,project_id)
); 
```

执行时说缺少左括号....

如何使用另一个表的复合主键的一部分创建复合主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:09:40.137

您的架构设计似乎有点缺陷。你想做什么约束？

我不明白你为什么使用复合键。

```
create table emp1(
    associate_id number(5) not null, -- PK
    associate_name varchar2(25), 
    salary decimal(10,2), 
    doj date,
    grade varchar2(6),
    primary key(associate_id)
);

create table project(
    project_id varchar2(10), -- PK
    associate_id number references emp1(associate_id) not null, 
    pm_id number(5), 
    project_name varchar2(20), 
    project_desc varchar2(20),
    status varchar2(20),
    grade varchar2(6),
    primary key(project_id)
);

create table department(
    dept_id varchar2(5),  -- PK
    project_id varchar2 references project(project_id),
    dept_name varchar2(10), 
    dept_code number(5), 
    proj_startdate date, 
    proj_enddate date, 
    primary key(dept_id)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:11:32.300

如果您使用的是 Oracle（这很有帮助！），您忘记指定 department.project_id 的大小。

# java - 如何以静默/编程方式在 Lotus Notes 客户端中安装 eclipse 插件

> ID：14935540
> 
> 赞同：0
> 
> 时间：2013-02-18T11:45:40.230
> 
> 标签：java, eclipse-plugin, lotus-notes, silent

我需要在 Lotus Notes Client 8.5 中安装一个基于 eclipse 的插件。要求是这不应该有任何用户参与。我想知道有没有办法解决这种要求。如果系统是 Active Directory 的成员，这也是可能的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:17:36.143

Notes 8 为最终用户自动部署“小部件”提供了一个框架；一种类型的小部件是 Eclipse 插件。您可以设置 Widget Catalog 数据库，并且可以使用 Notes 策略强制特定最终用户属于 Widget 类别——该类别定义了哪些小部件（包括插件）将为用户推送和安装。因此，您基本上需要执行以下操作：

*   创建 Notes 更新站点数据库
*   创建 Notes 小部件目录数据库
*   将您的插件 jar 导入更新站点
*   创建一个指向您的更新站点和特定插件的包装小部件文档
*   将小部件文档放在小部件目录中的小部件类别中
*   定义指定窗口小部件类别的 Notes 桌面策略
*   将用户添加到新策略

注意 - 当用户收到一个 eclipse 插件的小部件时，他们将收到通知并要求他们重新启动 Notes 客户端。

有关每个步骤的详细信息，请查看 Simon 链接到的 IBM 站点。

# php - 访问返回的数组适用于 localhost 但不适用于服务器

> ID：14935543
> 
> 赞同：0
> 
> 时间：2013-02-18T11:45:42.277
> 
> 标签：php, arrays, function

这适用于 localhost 但不适用于服务器：

```
$x = preg_split("/#/", $val)[0]; 
```

我浪费了大约 4 个小时才注意到这是问题所在。在服务器上没有显示任何错误，并且 php 文件以一种非常奇怪的方式解释，如果我`die('ok')`在此行之前有一个它不会显示任何内容。

```
$x = preg_split("/#/", $val);
$x = $x[0]; 
```

也可以在服务器上工作。

这不是关于`preg_split`，它与每个返回数组的函数都是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:48:14.843

您在 localhost 上运行 php 5.4，但在服务器上运行 php 5.3（或其他）

在 php 5.4 上添加了函数数组取消引用，请参阅[此](http://php.net/manual/en/migration54.new-features.php)

# python - 两个常量字符串之间的正则表达式匹配文本

> ID：14935548
> 
> 赞同：1
> 
> 时间：2013-02-18T11:46:03.340
> 
> 标签：python, regex, python-2.7

我有一个这样的字符串：

```
Copied file D:\TROLOLO~2\MBF~2\PC\..\..\content\Application Folder\Blabla\FooFoo\bar.bar 
```

我想匹配

```
"D:\TROLOLO~2\MBF~2\PC\..\..\content\Application Folder" 
```

字符串“复制的文件”和“应用程序文件夹”都是已知且不变的。

我该怎么做呢？还请解释您使用的规则！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:53:13.380

试试这个：

```
^Copied file (.+?Application Folder) 
```

您想要的结果在第 1 组中

```
^                   : begining of string
Copied file         : litteral
(                   : start grouping
.+?                 : Any char one or more times non greedy
Application Folder  : litteral
)                   : end grouping 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:53:05.330

怎么样：

```
 re.findall('(?<=Copied file ).*?Application Folder',s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:01:08.587

不使用正则表达式的替代方法：

```
>>> text[12:text.index('Application Folder') + len('Application Folder')]
'D:\\TROLOLO~2\\MBF~2\\PC\\..\\..\\content\\Application Folder' 
```

# javascript - 资产的“导入”依赖解决方案

> ID：14935549
> 
> 赞同：1
> 
> 时间：2013-02-18T11:46:15.497
> 
> 标签：javascript, symfony, import, dependencies, assetic

我正在寻找一些使用 @import '*.js' 的解决方案，例如在 Symfony 2 项目的 less css 中。有什么插件吗？在文件中控制而不是在树枝中以正确的顺序硬写'javascripts'会很好。

如果我不清楚：

今天我们必须控制加载顺序以确保超类的预定义：

```
{% javascripts '@AcmeDemoBundle/Resources/public/js/app.base.js'
               '@AcmeDemoBundle/Resources/public/js/app.inheritancelevel1.js'
               '@AcmeDemoBundle/Resources/public/js/app.inheritancelevel2.js'
               '@AcmeDemoBundle/Resources/public/js/app.inheritancelevel3.js'
               '@AcmeDemoBundle/Resources/public/js/app.starter.js'
%}... 
```

我想要的是：

```
{% javascripts '@AcmeDemoBundle/Resources/public/js/app.starter.js' %}...

//.../app.starter.js
@import 'app.baseclasses1.js'
@import 'app.baseclasses2.js'
@import 'app.baseclassesN.js'
//.../app.baseclassesX.js
@import 'app.superbaseclassesX.js'
// an so on... 
```

我知道的唯一解决方案是将定义包装到函数中并使用很少的实用程序：

```
loadUtil.register('some.package', function(){ 
loadUtil.import('some.base.package');
MyClass=new Class({extends: SuperClassFromSomeBasePackage...});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:05:18.043

我发现RequireJSBundle：

[https://github.com/hearsayit/HearsayRequireJSBundle](https://github.com/hearsayit/HearsayRequireJSBundle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:43:09.473

以 CommonJS 格式编写您的 JavaScript 模块并使用[cjsDeliveryBundle](https://github.com/mattcg/cjsDeliveryBundle)。

假设您的客户端应用程序包含两个模块，pear 和 pip，其中 pip 需要 pear。pip.js 看起来像这样：

```
// pip.js
exports.message = 'I am a pip.'; 
```

pear.js 看起来像这样：

```
// pear.js
var pip = require('./pip'); // Assuming pip.js is in the same directory. Note that the .js extension is omitted in CommonJS.

console.log('I am a pear, but also, ' + pip.message); 
```

如果将其指向 pear.js，cjsDelivery 将自动解析依赖项并将整个模块化应用程序编译为单个 JavaScript 文件。

# settimeout - 长轮询和 setTimeout 的区别

> ID：14935552
> 
> 赞同：1
> 
> 时间：2013-02-18T11:46:30.157
> 
> 标签：settimeout, long-polling, polling

Long-Polling 和 setTimeout 之间有什么区别我发现这是用于长轮询，但它与 setTimeout 没有任何区别。

```
(function poll(){
    $.ajax({ url: "server", success: function(data){
        //Update your dashboard gauge
        salesGauge.setValue(data.value);

    }, dataType: "json", complete: poll, timeout: 30000 });
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T14:39:43.760

我猜你的代码所做的是正常的轮询。

长轮询使客户端请求保持打开状态，直到有新数据要发送给客户端。[维基百科](https://en.wikipedia.org/wiki/Push_technology#Long_polling)充其量是这样描述的：

> 使用长轮询时，客户端向服务器请求信息的方式与正常轮询完全相同，只是它以更慢的频率发出其 HTTP/S 请求（轮询）。如果服务器在收到轮询时没有任何信息可供客户端使用，则服务器不会发送空响应，而是保持请求打开并等待响应信息可用。一旦完成，服务器立即向客户端发送 HTTP/S 响应，完成打开的 HTTP/S 请求。以这种方式，通常与轮询客户端相关的响应延迟（信息首次可用与下一个客户端请求之间的时间）被消除。

# javascript - fabricjs路径的边界框偏移

> ID：14935556
> 
> 赞同：2
> 
> 时间：2013-02-18T11:46:51.560
> 
> 标签：javascript, path, fabricjs

我正在尝试使用 fabric.Path 创建一个形状，并且我希望能够围绕它的中心旋转它。问题是，边界框是偏移的，实际形状围绕其中心跳舞：

![在此处输入图像描述](../Images/118392d70b604e5d4fa96f8ef790c605.png)

```
this.canvas = new fabric.Canvas('c')
this.canvas.clear();

var triangle = new fabric.Triangle({
width: 20,
            height: 20,
            fill: '#35a2da',
left: 410,
top: 350,
angle: 90
});

var path = new fabric.Path(
  "M 200 175 A 25 25 0 1 0 217.678 217.678",
        {
        fill : '',
        stroke : '#35a2da',
        strokeWidth : 7,
        left: 200, 
        top:200
    });

var rotate = new fabric.Group([path, triangle], {left:200, top:200});

this.canvas.add(rotate); 
```

上面的代码可以在[这里](http://jsfiddle.net/HFHcN/)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T03:32:20.030

只要您`fabric.Path`根据您正在绘制的 SVG 弧线修复对象的尺寸，*并将*的尺寸固定为`fabric.Group`相同的尺寸，您应该能够使形状完全居中。

# [示例小提琴](http://jsfiddle.net/natchiketa/LFYMG/)

# 明确调整大小的原因

## `fabric.Path`

您要显式设置宽度和高度的`fabric.Path`原因是，否则默认大小将包括弧线笔划的附加大小。

## `fabric.Group`

显式设置大小的原因`fabric.Group`是因为`fabric.Triangle`定位在弧的起点，边界将延伸到您想要完全居中的那个圆之外。

# 如何动态计算旋转图标SVG路径

我编写了这个函数，它返回一个对象，其中包含渲染 SVG 弧所需的点，给定半径：

```
function rotatePoints(radius) {
    // Get 45 degrees in radians
    var angle = Math.PI / 4;
    return {
        radius: radius,
        startPos: {
            x: radius,
            y: 0
        },
        endPos: {
            x: radius + (radius * Math.cos(angle)),
            y: radius + (radius * Math.sin(angle))
        }
    }
} 
```

例如，给定半径为 30，您可以像这样构建 SVG 路径：

```
var pathPts = rotatePoints(30);
var pathSVG = [
    'M', pathPts.startPos.x, pathPts.startPos.y,
    'A', pathPts.radius, pathPts.radius,
    0, 1, 0,
    pathPts.endPos.x, pathPts.endPos.y
];    
pathSVG.join(' ') // result: "M 30 0 A 30 30 0 1 0 51.21320343559643 51.21320343559643" 
```

# 画布坐标与组坐标

请记住，一旦将`Path`and添加`Triangle`到`Group`，如果要设置其中任何一个的位置，则坐标相对于 的边界，而`Group`不是整个画布（有关如何调整其位置的示例，请参见小提琴）添加到`Group`.

# java - hornetq“listMessagesAsJson”不工作

> ID：14935557
> 
> 赞同：2
> 
> 时间：2013-02-18T11:46:53.923
> 
> 标签：java, jms, jmx, hornetq

我现在正在使用 hornetq 一段时间，直到最近还可以。我有一个这样的问题：我有一些消息“卡在”队列中（我正在使用客户端确认模式，所以问题可能是我的一些消费者持有消息并且没有发送确认） . 我正在使用 JConsole 查看队列，我可以看到消息计数器正在上升，但是当我尝试“listMessagesAsJson”时，我得到一个空结果以供参考，我尝试将它们发送到稍后死亡队列（事务模式并抛出 RuntimeExceptions故意）并且在DLQ中我实际上可以看到messageCounter和“listMessagesAsJson”实际上确实在DLQ上工作（我正在获取消息列表）但是，我无法理解DLQ和我的普通队列之间的区别。有谁可以帮我离开这里吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:28:48.837

我们添加了另一种名为 listDeliveringMessages 的方法，它可以为您提供飞行中的消息并让您了解正在发生的事情。

这是作为[https://issues.jboss.org/browse/HORNETQ-763的一部分完成的](https://issues.jboss.org/browse/HORNETQ-763)

您当前使用的是 2.2.14（根据我们在 hornetq 论坛上的讨论），其中不包含修复程序。

有关更多详细信息，您可以参考此 github 提交：[https ://github.com/hornetq/hornetq/commit/3812ee77100c473489f72f36e5078a56d37e5c19](https://github.com/hornetq/hornetq/commit/3812ee77100c473489f72f36e5078a56d37e5c19)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:42:16.273

我怀疑你对客户没有回复消息是正确的。队列中已经交付给消费者但尚未确认（或 TX 提交）的消息处于这种灰色状态，必须保留它们以防客户端回滚并且必须重新交付消息，但同时，它们'基本上其他任何人都无法使用，因为它们只能交付给一个消费者。我敢打赌，如果您的队列中有***n****条消息，但没有活跃的消费者，则listMessagesAsJson*操作将毫无问题地列出它们。

DLQ 起作用是因为运行时异常是终端的，并且代理知道消息已被消费者拒绝，因此它不在“灰色”区域中。

# python - dict() 和 add_csrf() 一样吗？

> ID：14935560
> 
> 赞同：0
> 
> 时间：2013-02-18T11:47:14.993
> 
> 标签：python, django

我有两个类似的功能，我想知道是否`dict`相同`add_csrf`？

它们是否都返回与模板中的变量相关的值？

```
def main(request):
    """Main listing."""
    forums = Forum.objects.all()
    return render_to_response("forum/list.html", dict(forums=forums, user=request.user))

def forum(request, pk):
    """Listing of threads in a forum."""
    threads = Thread.objects.filter(forum=pk).order_by("-created")
    threads = mk_paginator(request, threads, 20)
    return render_to_response("forum/forum.html", add_csrf(request, threads=threads, pk=pk)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:55:01.120

`add_csrf()`是一个返回字典的函数。它用于添加 csrf 令牌以及请求参数。

```
from django.core.context_processors import csrf

def add_csrf(request, **kwargs):
    """
        Add CSRF to dictionary.
    """
    d = dict(user=request.user, **kwargs)
    d.update(csrf(request))
    return d 
```

`dict()`用于创建字典的python内置函数在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:56:22.707

有点儿。

`dict()`是一个内置的 Python 函数（或者可能是一个类——我对我的 Python 细节不是很了解），它接受命名参数，并返回一个 Python 字典。

正如`render_to_response`预期的那样，将字典（或者更确切地说是 Django 上下文对象，但字典可以）作为它的第二个参数，您可以`dict()`在那里使用。您同样可以使用字典文字：

```
render_to_response("forum/list.html", {"forums":forums, "user":request.user}) 
```

我[在 Django 文档中](https://docs.djangoproject.com/search/?q=add_csrf&release=6)[找不到任何参考`add_csrf`](https://docs.djangoproject.com/search/?q=add_csrf&release=6)，所以我想它是某人编写的用于执行 CSRF 相关内容的辅助函数。（[@CrazyShezy 指出](https://stackoverflow.com/a/14935714/20578)它会将 CSRF 令牌添加到传递给模板的上下文中。）

由于它的结果作为第二个参数传递给`render_to_response`，它也必须返回一个字典（或 Django 上下文对象）。

# c# - 在 C# 中更新多维字节数组

> ID：14935562
> 
> 赞同：2
> 
> 时间：2013-02-18T11:47:17.893
> 
> 标签：c#, .net, multidimensional-array

我有一个二维字节数组，想从一维数组中更新/复制每个数据数组。

```
var multi = new byte[5, 200];

var single0 = new byte[200]; // initialized to some data

var single1 = new byte[200]; // initialized to some data

var single2 = new byte[200]; // initialized to some data

var single3 = new byte[200]; // initialized to some data

var single4 = new byte[200]; // initialized to some data

Buffer.BlockCopy(single0, 0, multi, 0, single0.Count());

Buffer.BlockCopy(single1, 0, multi, 1, single1.Count());

Buffer.BlockCopy(single2, 0, multi, 2, single2.Count());

Buffer.BlockCopy(single3, 0, multi, 3, single3.Count());

Buffer.BlockCopy(single4, 0, multi, 4, single4.Count()); 
```

但这并没有按预期工作。只有第一行被更新。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:51:31.343

你的第四个论点是错误的。它是目标数组中的偏移量。该目标数组实际上是 5 个连续的 200 字节的“块”。所以你会想要：

```
int stride = single0.Length; // Or multi.GetLength(1)
Buffer.BlockCopy(single0, 0, multi, stride * 0, stride);
Buffer.BlockCopy(single1, 0, multi, stride * 1, stride);
Buffer.BlockCopy(single2, 0, multi, stride * 2, stride);
Buffer.BlockCopy(single3, 0, multi, stride * 3, stride);
Buffer.BlockCopy(single4, 0, multi, stride * 4, stride); 
```

# windows-phone-8 - 如何在我的 WP8 应用程序中的地图上显示交通信息

> ID：14935569
> 
> 赞同：0
> 
> 时间：2013-02-18T11:47:37.887
> 
> 标签：windows-phone-8

我正在开发一个 Windows phone 8 应用程序来在地图上显示当前的交通信息，但我没有看到任何帮助来实现这一点。MS Dev Center 也没有提供帮助。我不能使用 Bing 地图或 Bing 地图任务 API，因为它现在已被弃用。所以我正在使用 Microsoft 的 MapsTask 类。电话。任务组装。但无法以编程方式显示交通信息。任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:39:42.307

您需要使用[流量 API](http://msdn.microsoft.com/en-us/library/hh441725.aspx)

这里有示例：[LINK](http://blog.jerrynixon.com/2012/06/easily-include-bing-map-data-in-your.html)（但适用于 Windows 8）

# ios - viewDidLoad 中的代码未执行

> ID：14935574
> 
> 赞同：0
> 
> 时间：2013-02-18T11:47:56.660
> 
> 标签：ios, xcode

在我的故事板用户界面中，我添加了一些`UIImageViews`和`UIScrollViews`. 我在 ViewdidLoad 中设置了这些的大小和位置，这样：

```
- (void)viewDidLoad
{
    [facebookSharing setFrame:CGRectMake(400, facebookSharing.frame.origin.y, facebookSharing.frame.size.width, facebookSharing.frame.size.height)];
    [bumpImage setFrame:CGRectMake(500, bumpImage.frame.origin.y, bumpImage.frame.size.width, bumpImage.frame.size.height)];
} 
```

问题是没有应用此代码。我有一个代码完全相同的按钮，当我按下它时，它确实可以正常工作。那么，有没有可能代码没有在`ViewDidLoad`. （即使`NSLog()`证明`ViewDidLoad`确实在运行）？

此外，我在`ViewDidLoad`特定`UIViewController`于 iPad 的代码中有此代码，并且代码在那里工作。它适用于任何控制器中的 iPad，但不适用于 iPhone。为什么是这样？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:55:08.263

在调用 viewDidAppear 之前，不会设置框架和边界。尝试将此代码移动到`viewDidAppear`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:10:50.307

正如其他答案中已经说明的那样，`viewDidLoad`对于这种任务来说，调用得太早了。 `viewDidAppear`但是，一般来说布局更改可能为时已晚，因为最终动画不再考虑这些更改。

我喜欢在其中做布局`viewDidLayoutSubviews`（如果视图本身还没有通过 autoSize/autoLayout/layoutSubviews/.. 处理子视图布局）

这可能会有所帮助：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AdoptingaFull-ScreenLayout/AdoptingaFull-ScreenLayout.html#//apple_ref/doc/uid/TP40007457-CH13-SW2](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AdoptingaFull-ScreenLayout/AdoptingaFull-ScreenLayout.html#//apple_ref/doc/uid/TP40007457-CH13-SW2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T12:04:13.250

提供后`IBOutlets`必须进行属性合成。所以我们需要使用

```
 - (void)viewDidLoad
   {
     [self.facebookSharing setFrame:CGRectMake(400, facebookSharing.frame.origin.y, facebookSharing.frame.size.width, facebookSharing.frame.size.height)];
     [self.bumpImage setFrame:CGRectMake(500, bumpImage.frame.origin.y, bumpImage.frame.size.width, bumpImage.frame.size.height)];
   } 
```

# wpf - 水平对齐 ListViewItem

> ID：14935575
> 
> 赞同：0
> 
> 时间：2013-02-18T11:48:05.600
> 
> 标签：wpf, alignment, listviewitem

我需要将我的 listviewitems 水平放置，但我找不到路，到目前为止我试过这个：

```
 <ListView Grid.Row="0" ItemsSource="{Binding Path=Cells, UpdateSourceTrigger=PropertyChanged}" 
                        ItemTemplate="{StaticResource CellGroupTemplate}"
                        Background="{StaticResource EnvLayout}"
                        HorizontalContentAlignment="Stretch">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="{x:Type ListViewItem}">
                            <Style.Resources>
                                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
                                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                            </Style.Resources>
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView> 
```

我的项目是其他 UI 控件，附加了它们的视图模型

```
 <DataTemplate DataType="{x:Type vm:CellItemViewModel}" x:Key="CellGroupTemplate">
        <vw:CellItemView/>
    </DataTemplate> 
```

有人可以告诉我如何将每个元素（数据模板）放在另一个旁边

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:54:13.953

您可以为*ListView*设置自定义项目面板：

```
 <ListView>
     <ListView.ItemsPanel>
         <ItemsPanelTemplate>
             <StackPanel Orientation="Horizontal" />
         </ItemsPanelTemplate>
     </ListView.ItemsPanel>
 </ListView> 
```

# python - 正确使用 Django Mixins

> ID：14935576
> 
> 赞同：4
> 
> 时间：2013-02-18T11:48:06.493
> 
> 标签：python, django, mixins

所以我刚开始将我的旧代码移植到基于类的视图中，我还是新手。我的问题与 Django mixin 有关，我有一个 mixin，我将在各种类中使用它来验证一些信息。问题是我不知道如何访问它返回的信息而不会出现 500 内部错误。

```
class CheckTokenMixin(object):
    def request_token(self,request):
        params = {'username':settings.OAUTH_USERNAME,'password':hashlib.sha256(settings.OAUTH_PASSWORD).hexdigest()}
        req = Request(settings.REMOTE_SERVER+'oauth', urllib.urlencode(params))
        return json.loads(urlopen(req).read())

    def get_valid_token(self):
        if datetime.datetime.now() > request.session['access_token'].creation_date + datetime.timedelta(days=1):
            temp = self.request_token(request)
            tokenobj = AccessToken.objects.all()[:1].get()
            tokenobj.access_token = temp['token']
            tokenobj.creation_date = datetime.datetime.now()
            tokenobj.save()
            request.session['access_token'] = tokenobj

        return request.session['access_token']

    def get_context_data(self, **kwargs):
        ctx = super(CheckTokenMixin, self).get_context_data(**kwargs)
        ctx['access_token'] = self.get_valid_token()
        return ctx

class RateAppView(LoginRequiredMixin, JSONResponseMixin, AjaxResponseMixin, CheckTokenMixin, View):

    @method_decorator(csrf_protect)
    def dispatch(self, *args, **kwargs):
        return super(RateAppView, self).dispatch(*args, **kwargs)

    def post_ajax(self, request, username):
        u = get_object_or_404(User, pk=current_user_id(request))
        city_obj = City.objects.get(id=request.POST.get('city_id', None))
        x = self.get_valid_token
        print "teste: " , x.access_token
        print "teste2: " , self.get_context_data.['access_token'].access_token 
```

我想要类似的东西

> self.get_valid_token

或者

> self.get_context_data.['access_token'].access_token

要从我的 mixin 访问数据，我该如何以正确的方式进行操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:03:08.817

`self.get_valid_token()`会是正确的。但是，您在该方法中有几个错误，这无疑是导致问题的原因：特别是，您`request`在任何时候都没有定义它。我希望你的意思是`self.request`。

# javascript - 访问变量的 Backbone Scope 最佳实践

> ID：14935580
> 
> 赞同：2
> 
> 时间：2013-02-18T11:48:11.193
> 
> 标签：javascript, backbone.js

有人可以在 Backbone 中向我解释范围吗？下面示例中使用 get 方法检索默认变量值的最佳方法是什么？

如果我不使用 get 方法，我的数组将显示为未定义。

```
App.Models.Site = Backbone.Model.extend({
    defaults: {
        testArray: [1, 2, 3]
    },

    initialize: function(){
        console.log('initialize', this.testArray); // logs undefined
        console.log('initialize', this.get('testArray')); // logs [1, 2, 3]

        this.test();
    },

    test: function(){
        console.log('initialize', this.testArray); // logs undefined
        console.log('test', this.get('testArray')); // logs [1, 2, 3]
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:49:55.867

您可以使用 访问该`defaults`值`App.Models.Site.prototype.defaults`。

如果您使用`get`（见下文），您将检索模型实例的当前`testArray`值。这在实例之间并不总是相同的。

* * *

模型属性存储在模型的`.attributes`属性中，而不是模型本身。检索模型属性值的唯一方法是使用`get(propertyName)`.

这样做的原因是因为`set`不仅会更改对象的值，还会触发事件以使用新值更新 UI 等。如果您可以这样做`this.testArray`，`this.get('testArray')`那么您也可以将值分配给`this.testArray`-但这会破坏事情。

出于这个原因，您也不应该使用`.attributes`来分配值 - 不会触发任何事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:15:44.317

几件事。

首先，在 中`defaults`，您要定义模型字段，而不是模型实例的（对象）字段。模型字段是序列化到您的数据存储的内容。您的对象字段只是您的对象的一部分，可用于您需要它们的任何目的。

其次，我认为使用构造默认值的方法可能会更好地编写默认值：

```
....
defaults: function(){
         return {
        testArray: [1, 2, 3]
         };
      }, 
... 
```

这样每个模型都以一个副本开头，`[1, 2, 3]`而不是每个模型共享对一个且唯一的数组的引用`[1, 2, 3]`（如果您的任何模型更改了该数组，比如说如果您这样做`this.get('testArray')[0]=4`了，默认值会突然看起来非常不同）。`set`当然，如果您只将字段设置为新的数组值，那将永远不会发生。

# php - 寻找一种有效的方法来查找哪些行受到 mysql UPDATE 操作的影响

> ID：14935585
> 
> 赞同：1
> 
> 时间：2013-02-18T11:48:27.690
> 
> 标签：php, mysql

我正在使用 php。

```
$sql = "UPDATE `table` SET `field` = 'value' WHERE `item_id` IN (comma separated list of item_ids)"; 
```

如果我执行上述查询，我​​怎样才能找出哪个 item_id 更新了？请注意，item_ids 的逗号分隔列表中的某些 id 不存在于“表”中，否则答案将是逗号分隔列表中的每个 id。

我正在使用通过 mysql_connect() 连接的 mysql api。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-18T11:52:07.983

使用`mysql_affected_rows()`. 它将返回在最后一个查询中受影响的表的递增 id 数组。

# iphone - 如何使用 XMPP 框架（iphone）向 Openfire 服务器上的号码发送聊天请求（订阅）并填充花名册？

> ID：14935586
> 
> 赞同：2
> 
> 时间：2013-02-18T11:48:28.030
> 
> 标签：iphone, xmpp, openfire, xmppframework

我让人们使用他们的手机号码注册到我的应用程序。我可以在管理面板上看到在线人员。但是除非我手动将他们添加到名册并订阅，否则他们无法互相聊天。我怎样才能做到这一点而不必手动添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:13:08.677

安装和配置[Openfire 的订阅插件](http://www.igniterealtime.org/projects/openfire/plugins.jsp)。

从[插件的自述文件](http://www.igniterealtime.org/projects/openfire/plugins/subscription/readme.html)：

> 该插件可以配置为自动接受或拒绝订阅请求。当设置为接受订阅请求时，用户将能够将某人添加到他们的名册（又名“好友列表”或“联系人”）中，而无需等待所请求用户的手动订阅接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T06:05:32.943

发送好友请求：

```
 XMPPJID *newBuddy = [XMPPJID jidWithString:@"Buddyname"];
 [xmppRoster addUser:newBuddy withNickname:nil]; 
```

接受请求：

```
 - (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence{

    if  ([presenceType isEqualToString:@"subscribe"]) {

        [xmppRoster acceptPresenceSubscriptionRequestFrom:presence.from andAddToRoster:YES];
    } 
```

# ios - 用于连续手势的 ShouldReceiveTouch

> ID：14935599
> 
> 赞同：1
> 
> 时间：2013-02-18T11:49:10.690
> 
> 标签：ios, objective-c, uigesturerecognizer, uibezierpath

我有一个 UIBezierPath，我想使用 containsPoint 方法对其执行命中测试。通过使用 UIGestureRecognizerDelegate 方法 shouldReceiveTouch，我可以通过这种方式检测实际贝塞尔路径上的触摸，并允许路径外的触摸向上传递到响应者链（这是所需的行为）。

这对点击非常有效，但是当涉及到连续手势（即平移）时会出现问题，因为 shouldReceiveTouch 不涵盖 touchesMoved 事件。

我可以使用 UIGestureRecognizerDelegate 方法gestureRecognizerShouldBegin 来阻止整个连续手势，但手势不会传递给下一个响应者。

是子类化 UIGestureRecognizer 并让 touchesMoved 调用 shouldReceiveTouch 的方法吗？或者我可以通过剪切路径来实现这一点，这是否也会导致在剪切区域之外传递事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:36:37.680

我最终在绘制贝塞尔路径的 UIView 子类中覆盖了 pointInside:withEvent 。这样我就能够处理离散和连续的手势并将事件转发到超级视图。

# java-me - 在 j2me 中设置图像

> ID：14935606
> 
> 赞同：1
> 
> 时间：2013-02-18T11:49:43.373
> 
> 标签：java-me, sprite, midp

我正在用 j2me 开发游戏。我将一个精灵用于 4 组图像，并通过使用[`sprite.setImage()`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/game/Sprite.html#setImage%28javax.microedition.lcdui.Image,%20int,%20int%29 "API 文档"). 我在运行时将图像随机设置为精灵。

如何知道精灵在运行时正在使用哪个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:02:30.513

简短版本：你不能也可能不应该。

长版：两种常见模式（我会同时使用它们）是：

*   始终为所有精灵（和瓷砖，以及其他一切）使用一张图像。然后通过改变它的帧或帧序列来修改精灵；

*   应用基本的模型/视图分离。不要将您的视图（精灵）视为有关游戏状态的知识来源，将其视为只写资源。游戏的状态存在于某个模型类中，该类非常清楚（也许在更抽象的层面上）哪个图像被设置到哪个精灵。这样的方法将解决更多的问题，其中一些在它们发生之前很难感知（例如精灵的逻辑和物理位置之间的差异，以防你在失去生命时发生任何动画等）。

# sql - 从 Postgres 中的数组列聚合的不同值的数组

> ID：14935608
> 
> 赞同：8
> 
> 时间：2013-02-18T11:49:44.303
> 
> 标签：sql, arrays, postgresql, aggregate-functions

假设我们（在 PostgreSQL 9.1 中）有一个带有一些标识符的表、一个整数类型的列和一些其他整数类型的列（至少一个，尽管可能有更多）（或任何其他可以求和的列）。

目标是为“summable”列的每个标识符总和和数组列的所有不同元素的数组提供一个聚合。

我能找到的唯一方法是在子查询中的数组列上使用 unnest 函数，然后将它与另一个聚合“summable”列的子查询连接起来。

一个简单的例子如下：

```
CREATE TEMP TABLE a (id integer, aint integer[], summable_val integer);
INSERT INTO a VALUES
(1, array[1,2,3], 5),
(2, array[2,3,4], 6),
(3, array[3,4,5], 2),
(1, array[7,8,9], 19);

WITH u AS (
SELECT id, unnest(aint) as t FROM a GROUP BY 1,2
),
d AS (
SELECT id, array_agg(distinct t) ar FROM u GROUP BY 1),
v as (
SELECT id, sum(summable_val) AS val
FROM a GROUP BY 1
)
SELECT v.id, v.val, d.ar
FROM v
JOIN d
ON   v.id = d.id; 
```

上面的代码符合我的意图，但问题是我们能做得更好吗？该解决方案的主要缺点是它读取和聚合表两次，这对于较大的表可能很麻烦。

一般问题的其他一些解决方案是避免使用数组列并为每个数组成员聚合“summable”列，然后`array_agg`在聚合中使用 - 但至少现在我想坚持这种数组方式。

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T18:32:29.687

查询可能会快一点（我想），但我看不到任何显着的优化：

```
select a.id, sum(summable_val) val, ar
from
    (select id, array_agg(distinct t) ar 
        from 
        (select id, unnest(aint) as t from a group by 1,2) u
    group by 1) x
    join a on x.id = a.id
group by 1,3 
```

# python - matlab fread到python的高效翻译

> ID：14935610
> 
> 赞同：0
> 
> 时间：2013-02-18T11:49:54.527
> 
> 标签：python, arrays, matlab, fread, skip

我需要将 Matlab fread 翻译成 python，特别是允许读取二维数组并在读取时跳过数据。我想出了以下方法，但我想可能有更有效和“pythonic”的方法来做到这一点（我绝不是程序员）。有什么建议吗？请注意，我无法读取整个文件，然后对数组进行二次采样，因为要读取的文件太大。

```
def FromFileSkip(fid, count=1, skip=0, dtype=np.float32):
    if np.ndim(count)==0:
        if skip>=0:
            data = np.zeros(count, dtype=dtype)
            k = 0
            while k<count:
                data[k] = np.fromfile(fid, count=1, dtype=dtype)
                fid.seek(skip, 1)
                k +=1
            return data
    elif np.ndim(count)==1:
        if skip>0:
            data = np.zeros(count, dtype=dtype)
            k = 0
            while k<count[1]:
                data[:,k] = np.fromfile(fid, count=count[0], dtype=dtype)
                fid.seek(skip, 1)
                k +=1
            return data
    else:
        raise ValueError('File can be read only into 1d or 2d arrays') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:40:02.707

这或多或少是你所拥有的，也许只是更清洁一点。

```
def fromfileskip(fid,shape,counts,skip,dtype):
  """
  fid    : file object,    Should be open binary file.
  shape  : tuple of ints,  This is the desired shape of each data block.
           For a 2d array with xdim,ydim = 3000,2000 and xdim = fastest 
           dimension, then shape = (2000,3000).
  counts : int, Number of times to read a data block.
  skip   : int, Number of bytes to skip between reads.
  dtype  : np.dtype object, Type of each binary element.
  """
  data = np.zeros((counts,)  + shape)
  for c in xrange(counts):
    block = np.fromfile(fid,dtype=np.float32,count=np.product(shape))
    data[c] = block.reshape(shape)
    fid.seek( fid.tell() + skip)

  return data 
```

# java - 基于 jtable 的事件触发器中的 Jcheckbox 值

> ID：14935621
> 
> 赞同：1
> 
> 时间：2013-02-18T11:50:23.273
> 
> 标签：java, swing, jtable, jcheckbox

我正在使用 netbeans 中的 java swings。我的表单中有一个 jtable，它将填充来自 mysql 数据库的值。该表根据用户选择的表不断变化。我在最后添加了一列复选框。现在无论显示什么表，我都只通过覆盖使最后一列可编辑是单元格可编辑功能。

所以现在复选框列是可编辑的。当与行对应的复选框被签入时，我想让剩余的几列成为可编辑的，并且我希望在复选框被签出后使该行不可编辑！ ！

我需要帮助来完成这项任务。如果需要任何其他详细信息，请询问。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:26:18.843

克利奥帕特拉当然是对的——不需要听众。您需要做的就是让模型检查感兴趣行的最后一列保存的布尔值并将其作为`isCellEditable()`值返回。

例如：

```
@SuppressWarnings("serial")
class MyTableModel extends DefaultTableModel {
   public static final String SELECT = "select";
   String tablename;

   public MyTableModel(Object[][] rowData, Object[] columnNames, String tableName) {
      super(rowData, columnNames);
      this.tablename = tableName;
   }

   @Override
   public Class<?> getColumnClass(int columnIndex) {
      if (getColumnName(columnIndex).equalsIgnoreCase(SELECT)) {
         return Boolean.class;
      }
      return super.getColumnClass(columnIndex);
   }

   @Override
   public boolean isCellEditable(int row, int col) {
      if (col == getColumnCount() - 1) 
         return true;
      else
         return ((Boolean) getValueAt(row, getColumnCount() - 1)).booleanValue();
   }

} 
```

可以通过以下方式进行测试：

```
import javax.swing.*;
import javax.swing.table.*;

public class TestBoolTableModel {
   public static final Integer[][] DATA = { { 1, 2, 3, 4 }, { 5, 6, 7, 8 },
         { 9, 10, 11, 12 }, { 13, 14, 15, 16 } };
   public static final String[] COL_NAMES = { "One", "Two", "Three", "Four",
         MyTableModel.SELECT };

   private static void createAndShowGui() {
      Object[][] rowData = new Object[DATA.length][];
      for (int i = 0; i < rowData.length; i++) {
         rowData[i] = new Object[DATA[i].length + 1];
         for (int j = 0; j < DATA[i].length; j++) {
            rowData[i][j] = DATA[i][j];
         }
         rowData[i][DATA[i].length] = Boolean.FALSE;
      }
      MyTableModel tableModel = new MyTableModel(rowData, COL_NAMES, "My Table");

      JTable table = new JTable(tableModel);
      JScrollPane scrollPane = new JScrollPane(table);

      JFrame frame = new JFrame("TestBoolTableModel");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(scrollPane);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# javascript - 如何使用 jquery 替换内容变量中的字符串？

> ID：14935624
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:50:44.677
> 
> 标签：javascript, jquery

```
$content = "Please find the student results where Date of birth **BETWEEN** 2012-02-18 00:00:00 AND 2013-02-18 00:00:00  AND  name != "John" AND marks **BETWEEN** 40 AND 75 AND grade = 'A' AND AGE > 24" 
```

我想用下面的字符串更改粗体字符串

`BETWEEN`到 `IS BETWEEN`

`!=`到 `IS NOT EQUAL TO`

`=`到 `EQUAL TO`

`>`到`IS GREATER THAN`

意味着这样的结果：

输出：`"Please find the student results where Date of birth **IS BETWEEN** 2012-02-18 00:00:00 AND 2013-02-18 00:00:00 AND name **IS NOT EQUAL TO** "John" AND marks **IS BETWEEN** 40 AND 75 AND grade **EQUAL TO** 'A' AND AGE **IS GREATER THAN** 24"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:51:46.503

使用[替换](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
$content = $content
    .replace(/BETWEEN/g, "IS BETWEEN")
    .replace(/!=/g, "IS NOT EQUAL TO")
    .replace(/=/g, "IS EQUAL TO")
    ... 
```

请注意`g`在正则表达式中使用标志来要求替换所有出现的位置。

* * *

请注意，顺序很重要，因为您不想`=`在之前被替换`!=`。也可以匹配`=`而不是`!=`与`.replace(/([^!])=/g, '$1IS EQUAL TO')`.

# z3 - 在 Z3 中使用量词消除时的 SegFault

> ID：14935625
> 
> 赞同：1
> 
> 时间：2013-02-18T11:50:46.770
> 
> 标签：z3

我在 MacOS X 10.8 下使用 Z3 4.3.1（来自 master 分支）。我在以下示例中遇到分段错误：

```
(declare-const a Int)
(declare-const b Int)

(assert
  (exists ((k Int))
    (and 
     (= (- (* 2 k) a) 0)
     (= (- (* 2 k) b) 0)
    )
  )
)

(check-sat-using qe) 
```

任何想法，关于如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:49:50.613

我设法重现了您使用 OSX 和 Z3 4.3.1 描述的错误。此错误已修复，将在下一个正式版本中提供。同时，您可以使用 OSX 的夜间构建或使用`unstable`(working-in-progress) 分支构建 Z3。

可以在以下位置下载每晚构建：http: [//z3.codeplex.com/releases](http://z3.codeplex.com/releases)。我们必须点击“计划中的”链接。我[在这里](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)写了一些说明。

顺便说一句，如果我们想检查可满足性，我们应该在 之后使用最终游戏策略（例如`smt`）`qe`，就像 Axel 发布的示例中一样。如果我们想检查 产生的结果`qe`，我们应该使用`(apply qe)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:08:18.347

以下在 Windows XP + Z3 4.3.0 下工作正常

```
(declare-const a Int)
(declare-const b Int)

(assert
  (exists ((k Int))
    (and 
     (= (- (* 2 k) a) 0)
     (= (- (* 2 k) b) 0)
    )
  )
)
(check-sat-using (then qe smt))
(get-model) 
```

# java - java如何计算double变量中所有数字的总和

> ID：14935632
> 
> 赞同：0
> 
> 时间：2013-02-18T11:51:08.987
> 
> 标签：java

我有这个代码，我设法数了数`77!`。但是我有点困惑如何计算双变量中所有数字的总和？

77！= 1.4518309202828584E113。而且我不能在这里使用整数数据类型。我该怎么办？

```
package org.kodejava.example.io;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.util.Arrays;

public class Many {
    public static void main(String[] args) {
        System.out.println(factorial(77))
    }

    public static double factorial(double n) {
        if (n == 0) return 1;
        return n * factorial(n-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:01:47.413

如下使用[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)怎么样，

```
public static BigInteger factorial(BigInteger n) {
    {
        if (n.compareTo(BigInteger.ZERO) > 0)
            return BigInteger.ONE;
        return n.multiply(factorial(n.subtract(BigInteger.ONE)));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:02:13.623

`BigInteger`是救援
你可以使用 BigInteger 来处理这种情况

```
BigInteger bigInteger1 = new BigInteger ("123456789");
BigInteger bigInteger2 = new BigInteger ("112334");
BigInteger bigIntResult = bigInteger1.multiply(bigInteger2); 
System.out.println("Result is  ==> " + bigIntResult); 
```

输出：

```
Result is ==> 13868394935526 
```

上面的示例将让您了解如何将两个数字相乘。您可以使用自己的逻辑来使您的代码正常工作:)

**添加**

```
BigInteger sum = BigInteger.valueOf(0);
for(int i = 2; i < 500; i++) {

        sum = sum.add(BigInteger.valueOf(i));

} 
```

**对于阶乘**

```
public static BigInteger factorial(BigInteger n) {
    BigInteger result = BigInteger.ONE;

    while (!n.equals(BigInteger.ZERO)) {
        result = result.multiply(n);
        n = n.subtract(BigInteger.ONE);
    }

    return result;
} 
```

**注意**BigInteger 是不可变的，因此您需要重新分配值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:57:37.200

您可以将 Double 转换为 String，然后将每个 char 转换为 int 并对这些值求和。像这样：

```
double x = 102.4000909;
String number = String.valueOf(x);
int sum = 0;
for(char c : number.toCharArray())
   sum += Integer.parseInt(String.valueOf(c));

System.out.println(sum); 
```

我猜你需要为 DecimalSeperator char 做一些 ErrorHandling。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T11:57:44.847

您可能应该使用`Long`或`BigInteger`为您的阶乘计算，因为您可能会在使用双精度的计算中失去精度。您也不需要任何小数值，这是浮点数的主要用例。一旦你有一个整数表示你的数字，它会让你更容易对数字求和。

```
String num = String.valueOf(bigInt);
int sum = 0;
for ( Character i : num.toCharArray() ) {
    sum += Integer.parseInt(String.valueOf(i));
} 
```

这样做的另一种方法是-

```
long n = factorial(6);
int sum = 0;
while (n > 0) {
    int p = n % 10;
    sum += p;
    n = n / 10;
} 
```

# c++ - 从 void * 转换时的 C++ 多态性问题

> ID：14935634
> 
> 赞同：0
> 
> 时间：2013-02-18T11:51:12.617
> 
> 标签：c++, windows, multithreading, inheritance, polymorphism

我有以下代码：

```
#include <windows.h>
#include <iostream>

static DWORD __stdcall startThread(void *);

class BaseClass {
private:

    void threadLoop() {
        // stuff ...
        std::cout << someStuff() << std::endl;
        // stuff ...
    }
protected:
    HANDLE handle;
    virtual int someStuff() {
        return 1;
    }
public:
    friend DWORD __stdcall startThread(void *);

    BaseClass() {
        handle = 0;
    };

    void start() {
        handle = CreateThread(NULL, 0, startThread, this, 0, NULL);
    }

    ~BaseClass() {
        if(handle != 0) {
            WaitForSingleObject(handle, INFINITE);
            CloseHandle(handle);
        }
    }
    // stuff
};

static DWORD __stdcall startThread(void *obj_) {
    BaseClass *obj = static_cast<BaseClass *>(obj_);

    obj->threadLoop();
    return 0;
}

class DerivedClass : public BaseClass {
public:
    virtual int someStuff() {
        return 2;
    };
};

int main() {
    BaseClass base;
    base.start();
    DerivedClass derived;
    derived.start();
} 
```

每个实例都使用 WINAPI 和辅助函数创建一个线程，该函数`startThread`将调用委托给`threadLoop`创建线程的对象的方法。现在的问题是`threadLoop`调用另一个虚拟方法，但是如果我创建一个具有虚拟方法的其他实现的派生类，多态性似乎不起作用。

为什么？我怎样才能解决这个问题？

**编辑**：我更新了代码，所以线程没有在构造函数中启动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:55:27.090

您在构建派生对象之前启动线程。这是未定义的行为（因为您可能会在新线程中访问对象，而您仍在创建线程中执行代码）。您必须将构造和启动线程分开。

编辑：

处理此类问题的一种方法：

```
class Threadable
{
public:
    virtual Threadable() {}
    virtual run() = 0;
};

DWORD __stdcall startThread( void* object )
{
    static_cast<Threadable*>( object )->run();
}

class Thread
{
    std::auto_ptr<Threadable> myThread;
    HANDLE myHandle;
public:
    Thread( std::auto_ptr<Threadable> thread )
        : myThread( thread )
        , myHandle( CreateThread( NULL, 0, startThread, myThread.get(), 0, NULL ) )
    {
    }
    ~Thread()
    {
        if ( myHandle != NULL ) {
            WaitForSingleObject( myHandle, INFINITE );
            CloseHandle( myHandle );
        }
    }
}; 
```

然后让你的`BaseClass`和`DerivedClass`派生自 `Threadable`，并将它们调用为：

```
Thread base( std::auto_ptr<Threadable>( new BaseClass ) );
Thread derived( std::auto_ptr<Threadable>( new DerivedClass ) ); 
```

这并不完美（我不喜欢析构函数中或多或少的无限等待），但它应该足以开始。（对上面代码中的任何拼写错误进行取模——我还没有测试过。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:53:41.900

您的代码存在几个问题，例如在构造对象时您正在创建和运行线程。这绝对是一个糟糕的设计。

一个干净的设计是将线程功能封装在一个名为 的抽象类`thread`中，然后从它派生，覆盖该`run`方法，例如：

```
class thread : public noncopyable
{
protected:
    HANDLE m_hthread;
    unsigned long m_id;
private:
    static unsigned long __stdcall start(void* args)
    {
        static_cast<thread*>(args)->run();
        return 0;
    }
public:
    thread();
    virtual ~thread();
    virtual bool start()
    {
        if ( m_hthread != nullptr && isrunning(m_hthread) ) 
        {
           throw std::logic_error("Cannot start thread, as it is already running.");
        }
    m_hthread = ::CreateThread(NULL, 0, start, this, 0, &m_id);
    return m_hthread != nullptr;
    }
    unsigned long get_id() const;
    virtual unsigned long wait();
protected:
    virtual void run() = 0;
}; 
```

并由此衍生：

```
class worker : public thread
{
  protected:
      virtual void run() override;
}; 
```

你会用它作为：

```
worker workerObject;
workerObject.start();

//do other works here
//maybe create few more threads;

workerObject.wait(); //wait for worker to complete! 
```

# razor - RazorEngine 模板化电子邮件

> ID：14935637
> 
> 赞同：0
> 
> 时间：2013-02-18T11:51:17.017
> 
> 标签：razor, razorengine

是否可以使用剃须刀引擎声明属性，例如

```
 Hello @customername 
```

而不是喜欢

```
 Hello @Model.customername 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:37:53.257

据我所知，您需要 @Model 来检索客户名称。您可以在代码的开头创建一个变量并使用 customerName 填充它，但无论哪种方式，您至少需要一次 @Model。

```
var customerName = @Model.customername;
Hello @customername 
```

# windows-phone-7 - 前台吐司通知

> ID：14935639
> 
> 赞同：0
> 
> 时间：2013-02-18T11:51:29.953
> 
> 标签：windows-phone-7, push-notification, toast, mpns

当我的应用程序在前台运行时，我应该让操作系统显示 toast 吗？我无法获得有关此的明确信息。我认为这是一个相当大的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:29:31.203

当您的应用在前台运行时，您无法收到 toast 通知。推送通知服务仅在应用程序处于后台时发送通知。如果你想在前台通知用户，你应该使用自定义通知。

可以在 Code4Fun 工具包中找到一个实现作为 ToastPrompt。链接在这里：

[http://coding4fun.codeplex.com/wikipage?title=Toast%20Prompt](http://coding4fun.codeplex.com/wikipage?title=Toast%20Prompt)

# unit-testing - 无法解析类型名称。请检查配置文件

> ID：14935645
> 
> 赞同：3
> 
> 时间：2013-02-18T11:51:41.467
> 
> 标签：unit-testing, unity-container, moq, unity2.0

尝试使用 moq 和 unity 对我的应用程序进行单元测试，但在我的服务是接口且无法解决的地方出现错误：

错误信息：

```
 Test method Ecommerce_Test.Tests.LoginSuccessfulRedirectToActionLoad threw exception: 
System.InvalidOperationException: The type name or alias Ecommerce_Test.AuthenticationMock could not be resolved. Please check your configuration file and verify this type name. 
```

错误堆栈跟踪：

```
 Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.TypeResolverImpl.ResolveType(String typeNameOrAlias, Boolean throwIfResolveFails) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\ConfigurationHelpers\TypeResolverImpl.cs: line 110
Microsoft.Practices.Unity.Configuration.RegisterElement.GetMappedType() in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\RegisterElement.cs: line 128
Microsoft.Practices.Unity.Configuration.RegisterElement.ConfigureContainer(IUnityContainer container) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\RegisterElement.cs: line 0
Microsoft.Practices.Unity.Configuration.ContainerElement.<>c__DisplayClass1.<ConfigureContainer>b__0(ContainerConfiguringElement element) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\ContainerElement.cs: line 114
Microsoft.Practices.ObjectBuilder2.EnumerableExtensions.ForEach[TItem](IEnumerable`1 sequence, Action`1 action) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity\Src\ObjectBuilder\Utility\EnumerableExtensions.cs: line 36
Microsoft.Practices.Unity.Configuration.ContainerElement.ConfigureContainer(IUnityContainer container) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\ContainerElement.cs: line 110
Microsoft.Practices.Unity.Configuration.UnityConfigurationSection.Configure(IUnityContainer container, String configuredContainerName) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\UnityConfigurationSection.cs: line 151
Microsoft.Practices.Unity.Configuration.UnityContainerExtensions.LoadConfiguration(IUnityContainer container, UnityConfigurationSection section, String containerName) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\UnityContainerExtensions.cs: line 35
Microsoft.Practices.Unity.Configuration.UnityContainerExtensions.LoadConfiguration(IUnityContainer container) in e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\UnityContainerExtensions.cs: line 63
Ecommerce.Controllers.HomeController.Login(LoginModel model) in C:\Users\avmin!\Documents\Visual Studio 2010\Projects\Ecommerce_Mock\Ecommerce\Controllers\HomeController.cs: line 45
Ecommerce_Test.Tests.LoginSuccessfulRedirectToActionLoad() in C:\Users\avmin!\Documents\Visual Studio 2010\Projects\Ecommerce_Mock\Ecommerce_Test\Tests.cs: line 80 
```

配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
  </configSections>
  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">

    <assembly  name="Ecommerce"/>
    <assembly  name="Ecommerce_Tests"/>

    <container>
      <register type="Ecommerce.Authentication.IAuthentication"
                mapTo="Ecommerce_Test.AuthenticationMock, Ecommerce_Test" />
    </container>
  </unity>
  <system.serviceModel>
      <bindings />
      <client />
  </system.serviceModel>
</configuration> 
```

用法：

```
public ActionResult Login(HomeModels.LoginModel model)
        {
            var unity = new UnityContainer().LoadConfiguration(); //error fired here!!!
            var proxy = unity.Resolve<IAuthentication>();

            if (ModelState.IsValid)
            {
                try
                {
                    Login log = new Login();
                    log.Username = model.Username;
                    log.Password = model.Password;
                    int result = proxy.Login(new Login { Username = log.Username, Password = log.Password });

                }
                catch (MemberAccessException e)
                {
                    ModelState.AddModelError("Login was not successful", e);
                }
            }
            return View("Login",model);
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T15:58:43.290

解决方案原来是将程序集的名称附加到 `mapTo`值的末尾。配置文件在上面更新以反映这一点。

右键单击找到的程序集名称`Ecommerce_Tests project > Properties`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-12T13:00:52.127

此外，如果您对注入的代码使用单独的 dll，请确保目标框架相同，并且包含注入的类的 dll 被复制到运行（调试）文件夹

# qt - QLabel Anywhere 自动换行还是字符换行？

> ID：14935646
> 
> 赞同：2
> 
> 时间：2013-02-18T11:51:42.480
> 
> 标签：qt, qt4

qlabel 中的自动换行模式仅适用于空格，但如果单个单词足够长，则它会被剪裁。
为了克服这个问题，我们可以使用 QTextEdit，它可以在任何地方提供自动换行功能，但是 QTextEdit 中没有可用的垂直对齐方式。那么是否有任何第三个好的选择或任何方式我可以在任何地方使用（固定大小）QLabel 中的自动换行或 QTextEdit 中的垂直对齐？

或者最后我必须手动打破 qlabel 中的单词。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-09-23T17:19:27.053

阅读文档。`QLabel::setWordWrap( bool )`正是您正在寻找的。

# assembly - 汇编 int10h 不闪烁

> ID：14935647
> 
> 赞同：0
> 
> 时间：2013-02-18T11:51:44.557
> 
> 标签：assembly, x86, bios

为什么显示字符不闪烁？我知道应该将较高位设置为 1，以便打开闪烁位。我打开它，但没有任何反应。

我在网上研究过，有时会出现这样的问题，有时会闪烁，有时则不会。谢谢

```
.model small
.stack 64
.data
msg db 09,'Steven J',08,'$'
.code
main proc far
mov ax,@data
mov ds,ax
mov ah,09h
mov al,'*'
mov bh,00h
mov bl,0f0h
mov cx,12
int 10h
mov ah,4ch
int 21h
main endp
end main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:31:35.863

确保您使用的是正确的视频模式，使用 int 0x10, AH=0x00 （据我所知，闪烁仅适用于文本模式）。您也可以随时尝试专门启用闪烁位，以防由于某种原因它已被禁用（使用[int 0x10, AX=0x1003](http://www.ctyme.com/intr/rb-0117.htm)）。

这也可能取决于您使用的系统 - 我相信一些模拟器还没有实现闪烁，这可能也适用于某些硬件 - 尽管我没有足够的经验来告诉你这个功能当然。

# sql - 如何显示未包含在 group by 子句中的列？

> ID：14935652
> 
> 赞同：1
> 
> 时间：2013-02-18T11:51:52.563
> 
> 标签：sql, oracle10g

如何显示未包含在 group by 子句中的列？

```
select  user_id,DecryptString(first_name) as first_name, DecryptString(last_name) as last_name, DecryptString(middle_name) as middle_name,count(*)
from mamt
where middle_name<>'9ZnIFajWgaw='
  group by first_name,middle_name,last_name having count(*) >1; 
```

在上面的查询中，user_id 不在 group by 子句中。但我希望它显示出来。怎么做到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:07:40.393

你也可以这样做：

```
select *
from (
select user_id, 
       DecryptString(first_name),
       DecryptString(middle_name),
       DecryptString(last_name), 
       count(*) over (partition by first_name,  middle_name, last_name) cn
from mamt
where middle_name<>'9ZnIFajWgaw=')
where cn > 1; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/5cf7c/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:13:36.877

像这样的东西

```
select  user_id, DecryptString(a.first_name),DecryptString(a.last_name), DecryptString(a.middle_name)
from mamt
inner join
(
select first_name, last_name,middle_name,count(*) as c
from mamt
where middle_name<>'9ZnIFajWgaw='
group by first_name,middle_name,last_name having count(*) >1
) a on a.first_name = mamt.first_name AND a.last_name = mamt.last_name AND a.middle_name = mamtmiddle_name 
```

# fortran - Fortran findloc 内在函数

> ID：14935656
> 
> 赞同：3
> 
> 时间：2013-02-18T11:52:09.283
> 
> 标签：fortran

我正在使用 Intel 的 Visual Fortran Composer XE 2011, 12.1.3537.2010 并且看起来`findloc`不支持内部函数（在 2008 fortran 中型扩展中添加）。

我想要做的是在数组中查找特定值并返回索引。大多数情况下，我使用小型数组。

我有两个问题：

1.  我想用这个功能替换线性和二进制搜索，当我在其他线程中阅读时，不清楚哪种算法更适合获得最佳性能。内在函数如何处理这个问题？
2.  由于我的编译器不支持此功能，因此模拟的方法`findloc`如下：

    ```
    minloc( (array-value)**2 ) 
    ```

    但是……性能呢？还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:19:06.290

如果我正确理解您的第一个问题，您想知道尚未实现的功能是如何实现的？具体来说，您想知道`findloc`与线性和二分搜索相比的性能特征，因为您可能已经自己实现了它们？语言标准中肯定没有任何内容规定如何实现该功能，因此您的问题的答案完全是编译器特定的。

至于你的第二个问题，我希望大多数编译器会创建一个临时数组来响应你的表达式`array-value`。创建这样一个临时的很可能是一个比较耗时的操作，并且会增加调用的执行时间`minloc`。`minloc`我不知道英特尔的实现是如何工作的，但我希望它是对阵列的线性扫描。内部函数无法知道数组已排序并且二进制搜索可能更快。

如果您的数组很小且未排序，我希望线性搜索是最快的选择。如果它们很小且已排序，您可能可以编写二进制搜索（或类似的）以优于线性搜索。我希望这两种方法的性能图会有一个交叉，这个交叉位于你对*小尺寸*的想法我不知道的地方。

但是，与性能问题一样，我（或其他任何人）认为是无用的，数据就是您需要的，您为什么不继续进行一些测量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:18:25.973

如果您关心性能，无论如何都要编写自己的，可能是多线程版本。`minloc`解决方法是众所周知的，已在 上讨论过多次，`comp.lang.fortran`但如果您想要性能，它对您确实不利。舍入或溢出也可能存在问题。

如果您有一个通用数组，则必须线性遍历它，如果它已排序且很大，则可以使用二进制搜索（但请注意，每次比较通常具有更大的开销）。

# sql-server-2008 - 如何在 postgresql 中编写索引查询

> ID：14935673
> 
> 赞同：2
> 
> 时间：2013-02-18T11:53:11.710
> 
> 标签：sql-server-2008, postgresql, indexing

在sql server索引查询中写成如下 `SELECT * FROM TabEmp WITH (INDEX(idx_TabEmp))`

以同样的方式如何在 postgresql 中编写查询以及如何在 postgresql 中使用索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:33:01.693

PostgreSQL 带有一个非常先进的计划器，它最好使用所有可能的方法以最有效的方式提供查询详细信息。

当涉及到索引时，只需在正确的列上创建它们，很可能是在`FROM`（显式表示法）`WHERE`或`ORDER BY`子句中使用的列。正如[文件](http://www.postgresql.org/docs/current/interactive/indexes-intro.html)所说：

> 一旦创建了索引，就不需要进一步的干预：当表被修改时，系统会更新索引，当它认为这样做比顺序表扫描更有效时，它会在查询中使用索引。

当然，您必须[`ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-analyze.html)查看表并查看[`EXPLAIN`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)输出，以了解数据库实际在做什么来处理您的查询。

* * *

**编辑**

我的主要日常工作是管理一组在 ORACLE 上运行的计费生产系统，所以我知道提示是什么。作为管理员，我非常了解我的架构和数据，并且在大多数情况下，我确实知道执行查询的最佳计划是什么。

现在，由于 ORACLE 提供*了许多*不同的功能，它的优化器根本无法“赶上”可能路径的数量。因此，他们采取了另一种方式并添加了提示。而且我确实使用它们，因为我没有其他方法可以强制执行我知道应该表现最好的具体计划，无论我如何处理相关关系的统计数据。

PostgreSQL 走了另一条路。他们没有提供提示，而是花费了大量时间来使规划器像今天一样好。我印象深刻，*这就是 PostgreSQL 将所有其他 RDBMS 踢出*圈的地方。恕我直言。

是的，并不是总能用 PostgreSQL 获得最好的计划。但是有办法达到目标。正如其他人已经指出的那样：

1.  你应该知道你的数据，你应该知道最好的计划是什么样的；
2.  使用适当的工具，`EXPLAIN (analyze, buffers)`例如[http://explain.depesz.com/](http://explain.depesz.com/)
3.  确保你有正确的统计数据；
4.  使用`enable_*`设置来真正获得正确的计划；
5.  如果仍然没有运气，请查看数据并*了解*所选计划不是最佳计划的原因。我假设您会发现与 PostgreSQL 为查询中涉及的某些特定属性收集统计信息的方式不匹配的数据分布偏差；
6.  调整`SET STATISTICS`您发现存在数据偏差的列；
7.  如果仍然没有运气，您可以使用其他技术，例如范围或列表分区、[部分索引](https://dba.stackexchange.com/a/22295/8017)、CTE，还有很多。

根据我使用 PostgreSQL 的经验，*从来没有*必要使用提示。尽管添加提示“又快又容易”，但我总是更喜欢通过常用方法解决性能不佳的查询，因为在数据分布或数据库使用模式发生变化的情况下提示可能会做得不好（很常见的场景）。

我看到提示的唯一地方*可能*有用：修复您正在使用/支持的闭源软件的生产问题。但是，如果您在推出新版本之前进行深入而彻底的 QA 和性能测试，情况也并非如此。

如果您仍然需要提示，请查看Oleg [Bartunov](http://www.sai.msu.su/~megera/wiki/plantuner)和 Teodor Sigaev 的 Plantuner。此扩展不在标准 PostgreSQL 发行版中，但鉴于 Oleg 和 Teodor 属于核心 PostgreSQL 开发团队（他们为项目创建了 GIN、GIST 和 FTS），我希望代码相当稳定。

# .htaccess - 重定向：如何删除所有 URL 中的某些单词

> ID：14935675
> 
> 赞同：0
> 
> 时间：2013-02-18T11:53:14.600
> 
> 标签：.htaccess, redirect

我想删除所有网址中的“/item/”，例如：

```
www.domain.com/it-news/item/4489
www.domain.com/software/item/4484
www.domain.com/it-news/snews/item/4480 
```

应该重定向到：

```
www.domain.com/it-news/4489
www.domain.com/software/4484
www.domain.com/it-news/snews/4480 
```

你能帮我解决吗 提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:07:33.073

我没有与 .htaccess 合作太多，但似乎它会像这样

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^(.*)/item/(.*)$ $1/$2 [R=301,L] 
```

根据[这个网站](http://kb.mediatemple.net/questions/85/Using+.htaccess+rewrite+rules#gs/-httpexamplecomfolder1-to-httpexamplecomfolder2--)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T12:20:24.883

尝试以下操作：

```
RewriteEngine On
RewriteRule ^(.*)/item/(.*)$ $1/$2 [R=301,L] 
```

# json - 将字符串转换为 Json 数组

> ID：14935677
> 
> 赞同：1
> 
> 时间：2013-02-18T11:53:18.160
> 
> 标签：json, jsonserializer

我有一个这样的字典：

```
Dictionary<string, string> // key value pair 
```

示例值为：

```
Dictionary<string, string> parameters = new Dictionary<string, string>();
parameters.Add("key1","value1");
parameters.Add("products","[{"name":"Widget A","qty":3},{"name":"Widget B","qty":1}]"); 
```

我如何将其序列化为：

```
vars={"key1":"value1",products":[{"name":"Widget A","qty":3},{"name":"Widget B","qty":1}]} 
```

当我尝试序列化时：

```
vars={"key1":"value1",products":**"**[{"name":"Widget A","qty":3},{"name":"Widget B","qty":1}]**"**} 
```

它附加双引号。使用 JSON.Net

我正在使用第三方 API，它接受 HashTable 作为参数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:30:45.270

将 Dictionary 对象定义为

`Dictionary<string, object>`

代替

`Dictionary<string, string>`.

# jsf - FacesFileNotFoundException

> ID：14935681
> 
> 赞同：0
> 
> 时间：2013-02-18T11:53:28.597
> 
> 标签：jsf

我正在尝试构建一个基本的 facelets 应用程序但是我得到以下异常

> com.sun.faces.context.FacesFileNotFoundException com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:232) com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:273) com .sun.faces.facelets.impl.DefaultFaceletFactory.getMetadataFacelet(DefaultFaceletFactory.java:209) com.sun.faces.application.view.ViewMetadataImpl.createMetadataView(ViewMetadataImpl.java:114) com.sun.faces.lifecycle.RestoreViewPhase.execute (RestoreViewPhase.java:230) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:113) com.sun.faces.lifecycle .LifecycleImpl.execute(LifecycleImpl.java:118) javax.faces.webapp.FacesServlet.service(FacesServlet.java:409)

我正在传递正确的 url，并且还将 servlet 请求映射到 web.xml 中的 .xhtml

# php - 如果这在 PHP 中是这样的吗？

> ID：14935682
> 
> 赞同：3
> 
> 时间：2013-02-18T11:53:30.870
> 
> 标签：php

我正在寻找一些速记 if/else 代码，但不像`$var ? $a : $b`它不需要类似“else”的返回值。我想要的基本上是这样，但更短：

```
$myVariable = "abc";
echo $myVariable ? $myVariable : "hello";
echo $myVariable ? "hello" : $myVariable; 
```

我有点习惯在 Lua 中做这样的事情，就像：

```
local myVariable = "abc"

-- In case myVariable is false, print "hello". Otherwise it prints "abc"
print ( myVariable or "hello" )

 -- In case myVariable does have something (So, true) print "goodday."
print ( myVariable and "goodday" ) 
```

所以我想知道，PHP 是否具有执行此类操作的功能？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:58:11.177

```
$myVariable ? $myVariable : ""; 
```

相当于：

```
$myVariable ?: ""; 
```

PS：你应该知道 PHP 确实在这里输入杂耍。这与以下内容基本相同：

```
if ($myVariable == TRUE) ... 
```

如果`$myVariable`碰巧是一个类似的字符串`0`，它将评估为假。但是`00`将评估为真。我发现这并不像看起来那么有用。在许多情况下，您需要先检查是否`$myVariable`已设置，或者进行类型比较并确保变量是布尔值...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:56:19.697

您不必使用 ternar 运算符的 else，您可以始终执行以下操作：

```
$myVariable = "abc";
echo $myVariable ? $myVariable : ""; 
```

不是 $myVariable 时什么都不打印

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T11:58:30.943

```
echo (!empty($myVariable)) ? $myVariable : "hello"; 
```

或者

```
echo (isset($myVariable)) ? $myVariable : "hello"; 
```

由于 PHP 是一种弱类型语言，`$myVariable`包含`0`or `""`, 可能会被视为[false](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)。您应该检查变量是否存在，或者至少确保它是字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T11:58:34.813

从 PHP 5.3 开始，您可以执行以下操作：

```
echo $myVariable ?: "hello"; 
```

女巫等于：

```
echo $myVariable ? $myVariable : "hello"; 
```

我认为第二种选择是不可能的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T11:58:53.373

```
$myVariable = "abc";
echo $myVariable ? : "hello"; 
```

它不会比 PHP 中的上述内容更短。那应该检查 $myVariable 是否有一个值并将其打印出来，否则打印出“hello”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-30T08:13:41.493

所有人都这样做。在 php 7 中甚至更短

```
$var = $var ?? $var; 
```

# windows-store - 如何在没有存储的情况下将 Metro 应用程序部署到 Windows rt 设备

> ID：14935692
> 
> 赞同：2
> 
> 时间：2013-02-18T11:53:56.697
> 
> 标签：windows-store, sideloading, windows-rt

我只为我的公司开发了一个地铁应用程序。所以我不打算将它上传到 Windows 商店。

我想在 Windows RT 设备（超过 400 台）上使用我的应用程序。我试图用 powershell 打开 appx 但 powershell 需要开发人员许可证

如何将我的应用程序部署到 rt 设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:55:30.663

因此，您需要 Windows 8 Enterprise，它使您能够直接在您的设备上“旁加载”应用程序

[http://blogs.technet.com/b/scd-odtsp/archive/2012/09/27/windows-8-sideloading-requirements.aspx](http://blogs.technet.com/b/scd-odtsp/archive/2012/09/27/windows-8-sideloading-requirements.aspx)

* * *

*   您必须启用允许所有受信任的应用程序安装组策略设置
*   您必须在运行 Windows 8 Enterprise 或 Windows® 8 Pro 的设备上激活旁加载产品密钥。您必须在运行 Windows RT 的设备上激活旁加载产品密钥

# asp.net-mvc-3 - 在 Ajax 中传递 URL 有哪些不同的方法？

> ID：14935701
> 
> 赞同：0
> 
> 时间：2013-02-18T11:54:22.963
> 
> 标签：asp.net-mvc-3, load, partial-views

我正在使用 Ajax 将数据传递给部分视图：

```
<script type="text/javascript">
    $(function () {

        $('#Request_For_Id').change(function () {
            var mdlno = document.getElementById("Request_For_Id").value;

            $.ajax({
                url: '/Search/MDLNoDataList/',

                type: "POST",
                data: {
                    id: mdlno
                },
                dataType: "html",
                success: function (data) {
                    $("#viewlist").html(data);
                },
                error: function () {
                    alert("No Records Found");
                    //$("#viewlist").html('No Records Found');
                }
            });

        });
    });
</script> 
```

我可以使用`Html.RenderPartial`or `Html.RenderAction`etc 来加载部分视图吗？

```
 url: '/Search/MDLNoDataList/', 
```

除了这个还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:01:48.303

您可以让您的控制器操作返回部分视图：

```
public ActionResult MDLNoDataList(string id)
{
    ...
    return PartialView();
} 
```

接着：

```
<script type="text/javascript">
    $(function () {
        $('#Request_For_Id').change(function () {
            var mdlno = $(this).val();
            $.ajax({
                // If you are using the WebForms view engine you should use:
                // url: '<%= Url.Action("MDLNoDataList", "Search") %>'
                url: '@Url.Action("MDLNoDataList", "Search")',
                type: 'POST',
                data: {
                    id: mdlno
                },
                success: function (data) {
                    $('#viewlist').html(data);
                },
                error: function () {
                    alert('No Records Found');
                }
            });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:08:57.047

```
url: '/Search/MDLNoDataList/', 
```

**除了这个还有其他方法吗？是的**

当您希望解析 url 并将其作为相对路径传递时，使用 Url.Content：

```
url: '@Url.Content("/Search/MDLNoDataList/")', 
```

Url.Action 用于解析来自控制器的操作，例如：

```
url: '@Url.Action("MDLNoDataList", "Search")', 
```

**我可以使用 Html.RenderPartial 或 Html。RenderAction 等加载部分视图？**

*您可以使用它来加载部分视图，而不影响整个视图，[检查它](http://www.arrangeactassert.com/when-to-use-html-renderpartial-and-html-renderaction-in-asp-net-mvc-razor-views/)以了解差异*

# java - Glassfish - ajax 不起作用

> ID：14935703
> 
> 赞同：2
> 
> 时间：2013-02-18T11:54:31.963
> 
> 标签：java, ajax, jsf, tomcat, glassfish

我已经完成了从 Tomcat 到 Glassfish 的迁移，现在我的 ajax 请求不起作用。我读[了这篇文章](https://stackoverflow.com/questions/6823719/making-glassfish-respond-to-ajax-request-jsf-2)，我更改了诸如那里的设置 glassfish-web.xml 文件，但没有帮助。我将 JSF 2 与 OpenFaces 一起使用。

```
<o:selectBooleanCheckbox id="addTitleC" value="#{ajaxBean.editTitle}">
    <o:ajax event="click" render=":form:titleText" />
</o:selectBooleanCheckbox> 
```

AjaxBean 源码：

```
public void setEditTitle(boolean editTitle) {
    this.editTitle = editTitle;
}

public boolean isEditTitle() {
    return editTitle;
} 
```

除了更改文件设置 glassfish-web.xml 我什么都没改变，一切都在 Tomcat 中工作。

编辑：这是我从 Glassfish 得到的：

```
<partial-response>
  <error>
   <error-name>class java.lang.IllegalStateException</error-name>
   <error-message>org.openfaces.component.ajax.AjaxHelper</error-message>
  </error>
  <changes>
    <extension ln="openfaces" ajaxResult="null" type="ajaxResult"></extension>
  </changes>
</partial-response> 
```

Glassfish 堆栈跟踪：

```
java.lang.InstantiationException: org.openfaces.component.ajax.AjaxHelper
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:325)
    at javax.faces.component.StateHolderSaver.restore(StateHolderSaver.java:150)
    at javax.faces.component.UIComponentBase.restoreAttachedState(UIComponentBase.java:1785)
    at javax.faces.component.UIComponentBase.restoreBehaviorsState(UIComponentBase.java:2136)
    at javax.faces.component.UIComponentBase.restoreState(UIComponentBase.java:1571)
    at javax.faces.component.UIOutput.restoreState(UIOutput.java:256)
    at javax.faces.component.UIInput.restoreState(UIInput.java:1404)
    at org.openfaces.component.OUIInputBase.restoreState(OUIInputBase.java:274)
    at org.openfaces.component.select.SelectBooleanCheckbox.restoreState(SelectBooleanCheckbox.java:348)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1336)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1351)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1351)
    at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1351)
    at javax.faces.component.UIViewRoot.processRestoreState(UIViewRoot.java:879)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:208)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

# nurbs - NURBS 曲面 - 寻找等距的点

> ID：14935705
> 
> 赞同：1
> 
> 时间：2013-02-18T11:54:37.243
> 
> 标签：nurbs

我有一个度为 p,q 的 NURBS 曲面，带有控制点和节点向量 U 和 V。
我需要检索曲面上在 u 方向上相距 xStep 毫米，在 v 方向上相距 xStepV 毫米的点。

我在互联网上搜索了这种算法，并在以下链接中找到了关于曲线、曲面细分的弧长近似的信息：

[http://www.saccade.com/writing/graphics/RE-PARAM.PDF](http://www.saccade.com/writing/graphics/RE-PARAM.PDF)

[http://www.dm.unibo.it/~casciola/html/papers/ripIJSM.pdf](http://www.dm.unibo.it/~casciola/html/papers/ripIJSM.pdf)

在阅读了那些文章（对于 1D）之后，我仍然感到困惑，我想知道这些是否是解决我的 2D 问题的正确方法。尤其是对于 NURBS，弧长似乎无法计算。是否可以将 NURBS 分解为分段贝塞尔曲面，然后通过计算这些曲面上的弧长来降低问题的难度？任何帮助将不胜感激:) 谢谢！

# asp.net-mvc - ASP.NET MVC Razor, Html.BeginForm, using 语句

> ID：14935707
> 
> 赞同：12
> 
> 时间：2013-02-18T11:54:47.403
> 
> 标签：asp.net-mvc, razor

对于 ASP.NET MVC 应用程序，有人可以向我解释为什么调用以`Html.BeginForm`语句开头`@using`吗？

例子 -

> @using (Html.BeginForm()) {
> 
> ```
>  //Stuff in the form 
> ```
> 
> }

我认为`@using`语句用于包含名称空间。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T12:21:13.590

[Using Statement](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)提供了一种方便的语法，可确保正确使用`IDisposable`对象。由于`BeginForm`助手实现了`IDisposable`接口，因此您可以使用`using`关键字。在这种情况下，该方法`</form>`在语句末尾呈现结束标记。您也可以使用`BeginForm`无`using`块，但是您需要标记表单的结尾：

```
@{ Html.BeginForm(); }
    //Stuff in the form
@{ Html.EndForm(); } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T12:13:55.777

[`using`](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx)as 语句用于定义 IDisposable 对象的范围。

```
@using (var form = Html.BeginForm()) {
    //Stuff in the form

} // here Dispose on form is invoked. 
```

Html.BeginForm 返回对象，该对象在处置期间呈现表单的结束标记：`</form>`

[`using`](http://msdn.microsoft.com/en-US/library/sf0df423(v=vs.80).aspx)包含命名空间是指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:29:10.087

当您`using`与 Html.BeginForm 一起使用时，助手会在调用 BeginForm 以及调用 return object implementation 期间发出结束标记和开始标记`IDisposable`。

当执行返回到视图中的 (Closing 花括号) using 语句的末尾时，助手发出关闭表单标记。`using`代码更简单优雅。

它不是强制性的，您应该`using`与`Html.BeginForm`.

你也可以使用

```
@{ Html.BeginForm(); }
   <input type="text" id="txtQuery"/>
   <input type="submit" value="submit"/>
@{ Html.EndForm(); } 
```

# c# - 包含最小值和最大值的 RNGCryptoServiceProvider

> ID：14935708
> 
> 赞同：4
> 
> 时间：2013-02-18T11:54:47.987
> 
> 标签：c#, random, rngcryptoserviceprovider

我需要一个方法，它返回从最小值到最大值的随机数，包括两个数字。我在文章[.NET Matters: Tales from the CryptoRandom from the CryptoRandom](http://msdn.microsoft.com/en-us/magazine/cc163367.aspx) from Stephen Toub 和 Shawn Farkas 中找到了一些代码，其中的方法如下所示：

```
// Note - maxValue is excluded!
public static int GetRandomIntBetween(int minValue, int maxValue)
{
    if (minValue > maxValue) throw new ArgumentOutOfRangeException("minValue");
    if (minValue == maxValue) return minValue;

    var rng = new RNGCryptoServiceProvider();
    var uint32Buffer = new byte[4];
    long diff = maxValue - minValue;

    while (true)
    {
        rng.GetBytes(uint32Buffer);
        uint rand = BitConverter.ToUInt32(uint32Buffer, 0);
        const long max = (1 + (long)int.MaxValue);
        long remainder = max % diff;
        if (rand < max - remainder)
        {
            return (int)(minValue + (rand % diff));
        }
    }
} 
```

我尝试使 maxValue 包含在内：

```
public static int GetRandomIntBetween(int minValue, int maxValue)
{
    if (minValue > maxValue) throw new ArgumentOutOfRangeException("minValue");
    if (minValue == maxValue) return minValue;

    // Make maxValue inclusive.
    maxValue++;

    var rng = new RNGCryptoServiceProvider();
    var uint32Buffer = new byte[4];
    long diff = maxValue - minValue;

    while (true)
    {
        rng.GetBytes(uint32Buffer);
        uint rand = BitConverter.ToUInt32(uint32Buffer, 0);
        const long max = (1 + (long)int.MaxValue);
        long remainder = max % diff;
        if (rand < max - remainder)
        {
            return (int)(minValue + (rand % diff));
        }
    }
} 
```

看起来很奇怪，但似乎我可以保持前两个检查原样，即使语义略有不同，它仍然有效。结果数据看起来也不错。我错过了什么还是我的改变可以吗？

PS - 我问这个是因为生成随机数显然是一件非常微妙的事情，并且想确保我的方法是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T00:20:25.130

[看看我的解决方案（点击那里）](https://stackoverflow.com/questions/16907820/rngcryptoserviceprovider-with-random-functionality-like-securerandom-class-in-j)

您可以向该类添加其他方法：

```
public int NextInclusive(int minValue, int maxValue) {
        return Next(minValue, maxValue + 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:14:00.103

您的更改是正确的，afaik 之间的随机整数是 .之间`[a,b]`的随机整数`[a,b+1[`。

只要 maxValue 不是 int.MaxValue，那么 ++ 就会溢出，所以不更改 maxValue 并将更改移动到 diff 的计算中会更安全：

```
long diff = (long)maxValue - minValue + 1; 
```

但是，原函数中的第二次检查显然是错误的，如果`minValue == maxValue`，返回的 minValue 不是 minValue 和 maxValue 之间的唯一值。

# android - 启动警报时出现问题

> ID：14935712
> 
> 赞同：0
> 
> 时间：2013-02-18T11:54:58.637
> 
> 标签：android

我正在做一个闹钟应用程序，根据日期选择器中的日期和时间，它必须播放闹钟。

我写的代码

```
 Calendar cal = Calendar.getInstance();
        cal.set(Calendar.YEAR, year);
        cal.set(Calendar.MONTH, month);
        cal.set(Calendar.DAY_OF_MONTH, day);
        cal.set(Calendar.HOUR, hour);
        cal.set(Calendar.MINUTE, min);

        //Create a new PendingIntent and add it to the AlarmManager
        Intent intent = new Intent(this, AlarmReceiverActivity.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this,
            0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager am = 
            (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                pendingIntent); 
```

除了在日历中设置值之外，如果我们对值进行硬编码，例如 cal.add(Calendar.SECOND, 5); 它播放警报..如果有人请帮我找到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:23:43.380

您可以尝试此代码块必须运行，因为我使用它。

```
 String str_date = "23:59:59";
            SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
            java.util.Date stringToDate = sdf.parse(str_date);
            long start_time = stringToDate.getTime();

            Intent __intent__ = new Intent(this, CleanService.class);
            PendingIntent __p_intent__ = PendingIntent.getService
                    (getApplicationContext(), 0, __intent__, 0);
            long interval_time = 86400000;

            AlarmManager alarm_manager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
            alarm_manager.setRepeating(AlarmManager.RTC_WAKEUP,
                    start_time, interval_time, __p_intent__); 
```

# jquery - 使用关联数组填充图表

> ID：14935717
> 
> 赞同：0
> 
> 时间：2013-02-18T11:55:13.317
> 
> 标签：jquery, jqplot

我正在尝试使用包含以下数据的数组（ dateVal ）填充 jqplot 图表：

```
console.log( index + " : " + dateVal[index]);

OUTPUT BELOW

February 01, 2013 : 12
February 02, 2013 : 12
February 03, 2013 : 12
February 04, 2013 : 43
February 05, 2013 : 45 
```

我正在尝试使用此代码，但它会引发未捕获的错误：

```
var plot = $.jqplot('chart1', [dateVal], {

    title:'Rubric Average Scores',
    gridPadding:{right:35},
    axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,
        tickOptions:{formatString:'%Y-%m-%d'},
        //tickOptions:{formatString:'%b-%y'},
        tickInterval:'1 month',
        angle: -30,
    }},
    yaxis:{label:'Average Score',},
    series:[{lineWidth:3, markerOptions:{style:'square'}}]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:59:11.940

我不得不让 dateVal 成为一个数组数组......

# c# - 如何将外部参数包含到列表中

> ID：14935719
> 
> 赞同：1
> 
> 时间：2013-02-18T11:55:18.577
> 
> 标签：c#, linq, list

我从不同的类中分别获取购物车数量，如下所示。我想从列表中包含的数量中减少购物车数量。那么如何在我的查询中包含它。任何人请建议我。

```
//int quantityinshoppingcart = classes.ShoppingCart.checkingQuantity(CustomerId,ItemId);

//Binds the data to the repeater control
rptcontrol.DataSource =   from p in l_List
      select new
      {
        ItemId = p.ItemId,
        ItemName = p.ItemName,
        Quantity = p.Quantity,                                                        
        //I want quantity as (Quantity = p.quantity - quantityinshoppingcart),
      };
      rptcontrol.DataBind(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:02:15.997

您可以`let`在查询中使用关键字：

```
var q = from p in l_List
        let quantityInShoppingCart = MethodThatGetsThisQuantity(p.ItemId)
        let computedQuantity = p.Quantity - quantityInShoppingCart
        select new { ItemId = p.ItemId,
                     ItemName = p.ItemName,
                     Quantity = computedQuantity 
                   }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:01:45.980

你可以试试这个，如果 l_List 完全加载就可以了（即，如果它试图在访问数据源时运行查询，它可能无法工作）。

```
//Binds the data to the repeater control
rptcontrol.DataSource =   from p in l_List
                                        select new
                                        {
                                            ItemId = p.ItemId,
                                            ItemName = p.ItemName,
                                            Quantity = p.Quantity - SampleProject._classes.ShoppingCart.checkingQuantity(CustomerId,p.ItemId)                                                
                                        }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:02:59.150

您是否尝试在 Linq Expression 中包含您的 quantityinshoppingcart 计算？像这样 ？

```
rptcontrol.DataSource =   from p in l_List
      select new
      {
        ItemId = p.ItemId,
        ItemName = p.ItemName,
        Quantity = p.Quantity - SampleProject._classes.ShoppingCart.checkingQuantity(CustomerId, p.ItemId),                                                        
        //I want quantity as (Quantity = p.quantity - quantityinshoppingcart),
      };
      rptcontrol.DataBind(); 
```

根据购物车和 l_List 的相对大小，以及访问购物车内容的成本，您可能希望在绑定期间使用预构建的 Dictionary 来快速访问购物车中的数量。

希望这会有所帮助

# c++ - 初始化是否需要左值到右值的转换？是`int x = x;` UB吗？

> ID：14935722
> 
> 赞同：57
> 
> 时间：2013-02-18T11:55:30.290
> 
> 标签：c++, initialization, undefined-behavior, language-lawyer

C++ 标准在 3.3.2，“声明点”中包含一个半著名的“令人惊讶的”名称查找示例：

```
int x = x; 
```

这`x`用自己初始化，它（作为原始类型）*未初始化*，因此具有不确定的值（假设它是一个自动变量）。

这实际上是未定义的行为吗？

根据 4.1“左值到右值的转换”，对未初始化的值执行左值到右值的转换是未定义的行为。右手是否`x`经历了这种转换？如果是这样，该示例实际上是否具有未定义的行为？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-20T23:20:02.330

**更新：** *在评论中的讨论之后，我在这个答案的末尾添加了更多证据。*

* * *

**免责声明**：*我承认这个答案相当投机。另一方面，当前 C++11 标准的表述似乎不允许更正式的答案。*

* * *

在**[本问答](https://stackoverflow.com/questions/14991219/what-is-the-value-category-of-the-operands-of-c-operators-when-unspecified/14991297#comment21055383_14991297)**的上下文中，C++11 标准未能正式指定每种语言结构所期望的**[值类别。](https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues)**在下文中，我将主要关注*内置运算符*，尽管问题是关于*初始化程序*的。最终，我会将我对运算符的情况得出的结论扩展到初始化程序的情况。

在内置运算符的情况下，尽管缺乏正式的规范，但在标准中发现（非规范性）证据表明，*预期*的规范是**让prvalues在需要值的地方被预期，当没有指定时否则**。

例如，第 3.10/1 段中的注释说：

> 第 5 章中对每个内置运算符的讨论表明了它产生的值的类别以及它所期望的操作数的值类别。例如，**内置赋值运算符期望左操作数是左值，右操作数是纯右值并产生左值作为结果。**用户定义的操作符是函数，它们期望和产生的值的类别由它们的参数和返回类型决定

另一方面，关于赋值运算符的第 5.17 节没有提到这一点。但是，再次在注释中提到了执行左值到右值转换的可能性（第 5.17/1 段）：

> 因此，函数调用不应干预**左值到右值的转换**以及与任何单个复合赋值运算符相关的副作用

当然，如果没有预期的右值，这个注释将毫无意义。

[正如Johannes Schaub](https://stackoverflow.com/users/34509/johannes-schaub-litb)在对链接问答的评论中指出的那样，在 4/8 中发现了另一个证据：

> 在某些情况下，某些转换会被抑制。例如，左值到右值的转换不是在一元 & 运算符的操作数上完成的。在这些运算符和上下文的描述中给出了特定的例外情况。

这似乎意味着左值到右值的转换是在内置运算符的所有操作数上执行的，除非另有说明。反过来，这意味着**除非另有说明，否则右值应作为内置运算符的操作数。**

* * *

**推测：**

尽管初始化不是赋值，因此运算符不参与讨论，但我怀疑规范的这个区域受到上述相同问题的影响。

甚至可以在第 8.5.2/5 段中找到支持这种信念的痕迹，关于*引用*的初始化（不需要左值初始化表达式的值）：

> **通常**的左值到右值 (4.1)、数组到指针 (4.2) 和函数到指针 (4.3) 标准转换是不需要的，因此在完成对左值的直接绑定时会被抑制。

“通常”一词似乎暗示在初始化非引用类型的对象时，将应用左值到右值转换。

因此，我认为，尽管对初始化器的期望值类别的要求没有明确说明（如果不是完全缺失的话），但基于所提供的证据，假设*预期*的规范是：

**只要语言结构需要一个值，除非另有说明，否则需要一个纯右值**。

在这种假设下，您的示例中需要进行左值到右值的转换，这将导致未定义的行为。

* * *

**其他证据：**

只是为了提供进一步的证据来支持这个猜想，让我们假设它是*错误*的，因此复制初始化确实不需要左值到右值的转换，并考虑以下代码（感谢[jogojapan](https://stackoverflow.com/users/777186/jogojapan)的贡献）：

```
int y;
int x = y; // No UB
short t;
int u = t; // UB! (Do not like this non-uniformity, but could accept it)
int z;
z = x; // No UB (x is not uninitialized)
z = y; // UB! (Assuming assignment operators expect a prvalue, see above)
       // This would be very counterintuitive, since x == y 
```

这种不统一的行为对我来说没有多大意义。IMO 更有意义的是，无论哪里需要一个值，都需要一个纯右值。

此外，正如[Jesse Good](https://stackoverflow.com/users/906773/jesse-good)在他的回答中正确指出的那样，C++ 标准的关键段落是 8.5/16：

> — 否则，被初始化对象的初始值是 **初始化表达式的（可能转换的）值**。**如有必要**，将使用标准转换（第 4 条）将初始化表达式转换为目标**类型**的 cv 非限定版本；不考虑用户定义的转换。如果无法完成转换，则初始化格式错误。[ 注意：“cv1 T”类型的表达式可以独立于 cv 限定符 cv1 和 cv2 初始化“cv2 T”类型的对象。

然而，虽然 Jesse 主要关注“*如果需要*”这一点，但我也想强调“**类型**”这个词。上面的段落提到“*如果需要*”将使用标准转换来转换为目标*类型*，但没有说明*类别*转换：

1.  如果需要，是否会执行类别转换？
2.  他们需要吗？

对于第二个问题，正如答案的原始部分所讨论的，C++11 标准目前没有指定是否需要类别转换，因为没有提到复制初始化是否需要一个纯右值作为初始化器. 因此，不可能给出明确的答案。但是，我相信我提供了足够的证据来假设这是*预期*的规范，因此答案是“是”。

至于第一个问题，我认为答案也是“是”似乎是合理的。如果它是“否”，那么显然正确的程序将是格式错误的：

```
int y = 0;
int x = y; // y is lvalue, prvalue expected (assuming the conjecture is correct) 
```

总结一下（A1 =“*对问题 1 的回答*”，A2 =“*对问题 2 的回答*”）：

```
 | A2 = Yes   | A2 = No |
 ---------|------------|---------|
 A1 = Yes |     UB     |  No UB  | 
 A1 = No  | ill-formed |  No UB  |
 --------------------------------- 
```

如果 A2 为“否”，则 A1 无关紧要：没有 UB，但第一个示例的奇怪情况（例如`z = y`，给出 UB，但`z = x`即使没有`x == y`）出现了。另一方面，如果 A2 为“是”，则 A1 变得至关重要；然而，已经提供了足够的证据来证明它会是“是”。

因此，**我的论点是 A1 = "Yes" 和 A2 = "Yes"，我们*应该*有 Undefined Behavior**。

* * *

**进一步的证据：**

此**[缺陷报告](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#616)**（由[Jesse Good](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#616)提供）提出了一项旨在在这种情况下提供未定义行为的更改：

> [...] 此外，4.1 [conv.lval] 第 1 段说，将左值到右值的转换应用于“未初始化的对象”会导致未定义的行为；**这应该用具有不确定值的对象来重新表述**。

特别是，第 4.1 段的拟议措辞说：

> 当在未计算的操作数或其子表达式中发生左值到右值的转换时（第 5 条 [expr]），包含在被引用对象中的值不会被访问。在所有其他情况下，转换结果根据以下规则确定：
> 
> — 如果 T 是（可能是 cv 限定的）std::nullptr_t，则结果是一个空指针常量（4.10 [conv.ptr]）。
> 
> — 否则，如果泛左值 T 具有类类型，则转换从泛泛值复制初始化类型 T 的临时值，并且转换的结果是临时值的纯右值。
> 
> — 否则，如果泛泛值引用的对象包含无效的指针值（3.7.4.2 [basic.stc.dynamic.deallocation]、3.7.4.3 [basic.stc.dynamic.safety]），则行为是实现定义的.
> 
> — 否则，如果 T 是（可能是 cv 限定的）无符号字符类型（3.9.1 [basic.fundamental]），并且泛左值所指的对象包含不确定值（5.3.4 [expr.new]，8.5 [dcl.init], 12.6.2 [class.base.init])，并且该对象没有自动存储持续时间，或者泛左值是一元 & 运算符的操作数，或者它被绑定到一个引用，结果是未指定的值。[脚注：每次将左值到右值转换应用于对象时，该值可能不同。分配给寄存器的具有不确定值的 unsigned char 对象可能会陷入陷阱。——结束脚注]
> 
> —**否则，如果泛左值所指的对象包含不确定值，则行为未定义。**
> 
> — 否则，如果泛左值具有（可能是 cv 限定的）类型 std::nullptr_t，则纯右值结果是一个空指针常量（4.10 [conv.ptr]）。否则，glvalue指示的对象中包含的值就是prvalue结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-07T16:52:31.880

表达式`e`到类型的隐式转换序列`T`被定义为等同于以下声明，使用`t`作为转换的结果（模值类别，将根据`T`4p3 和 4p6 定义）

```
T t = e; 
```

> 任何隐式转换的效果都与执行相应的声明和初始化，然后使用临时变量作为转换的结果相同。

在第 4 节中，表达式到类型的转换总是产生具有特定属性的表达式。例如，转换`0`为`int*`产生一个空指针值，而不仅仅是一个任意指针值。值类别也是表达式的特定属性，其结果定义如下

> 如果 T 是左值引用类型或对函数类型的右值引用，则结果是左值（8.3.2），如果 T 是对对象类型的右值引用，则结果是 xvalue，否则是纯右值。

因此我们知道在 中`int t = e;`，转换序列的结果是纯右值，因为`int`是非引用类型。所以如果我们提供一个glvalue，我们显然需要转换。3.10p2 进一步澄清，留下毫无疑问

> 每当一个泛右值出现在预期纯右值的上下文中时，该泛左值就被转换为一个纯右值；见 4.1、4.2 和 4.3。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-18T12:46:26.950

这不是未定义的行为。您只是不知道它的具体值，因为没有初始化。如果变量是全局和内置类型，那么编译器会将其初始化为正确的值。如果变量是本地的所以编译器不会初始化它，所以所有的变量都是自己初始化的，不要依赖编译器。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-02-26T23:16:47.873

行为不是未定义的。该变量是未初始化的，并且与任何随机值未初始化的值开始时保持一致。来自 clan'g 测试服的一个例子：

```
int test7b(int y) {
  int x = x; // expected-note{{variable 'x' is declared here}}
  if (y)
    x = 1;
  // Warn with "may be uninitialized" here (not "is sometimes uninitialized"),
  // since the self-initialization is intended to suppress a -Wuninitialized
  // warning.
  return x; // expected-warning{{variable 'x' may be uninitialized when used here}}
} 
```

您可以在[clang/test/Sema/uninit-variables.c](https://github.com/llvm-mirror/clang/blob/master/test/Sema/uninit-variables.c#L48)中找到该案例的明确测试。

# linq-to-sql - 基于表值函数创建返回类型

> ID：14935737
> 
> 赞同：3
> 
> 时间：2013-02-18T11:56:47.510
> 
> 标签：linq-to-sql, orm, user-defined-functions, return-type

我经常有一组表值函数，它们返回具有相同结构（相同的列名、类型和顺序）的数据集。

如果我只是将函数拖到 Linq2Sql 设计器中，设计器将为每个函数创建一个新的匿名结果类型，并且这些函数在结果方面将不兼容。

为了告诉设计者函数具有相同的结果类型，我需要将函数拖到现有的 Linq2Sql 类上。

这很好，但我每次都必须手动创建类（在设计器区域插入一个新表，按`Insert`多次插入列，输入列名、客户端数据类型和服务器端数据类型）。如果有许多列和许多函数，这可能非常耗时。

**有没有办法告诉设计人员通过查看表值函数来自动创建实体（表类）**，以便我可以将其余函数拖到该实体上？

我目前的解决方法是：

*   在服务器上创建一个视图：

    ```
    create view dbo.stupid_linq as select * from dbo.FunctionIWant(bogus_params); 
    ```

*   将该视图拖到设计器中，这将创建一个实体。

*   通过删除实体与数据库的`Source`.

*   重命名实体。

*   删除服务器上的视图。

*   将表值函数拖到实体上。

# r - 比较ggplot2中的比例

> ID：14935738
> 
> 赞同：0
> 
> 时间：2013-02-18T11:56:49.747
> 
> 标签：r, ggplot2

我有一个`df`像这样的数据框：

```
Id    Var1    Var2    Var3
001   yes     no      yes
002   no      no      yes
003   yes     yes     no 
```

我想创建一个带有 3 个条形图的条形图，它们代表`yes`和`no`for 的比例`Var1` `Var2` `Var3`。是否可以在`ggplot`不重塑数据框的情况下做到这一点？

谢谢，

科拉多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:19:32.253

正如已经提到的，最好重塑数据。

但是，如果您需要使用原始数据框，那么您应该`geom_bar()`为要出现在绘图上的每一列使用。`geom_bar()`你应该提供`x`将这些条分开的值 - 我使用变量名作为字符。`fill=`并`position="stack"`确保条码堆叠。`y=(..count..)/sum(..count..))`会计算比例。

```
df <- read.table(text=
"Id    Var1    Var2    Var3
 001   yes     no      yes
 002   no      no      yes
 003   yes     yes     no",header=T)

library(scales)
library(ggplot2
ggplot(df)+
  geom_bar(aes(x="Val1",fill=Var1,y=(..count..)/sum(..count..)),position="stack")+
  geom_bar(aes(x="Val2",fill=Var2,y=(..count..)/sum(..count..)),position="stack")+
  geom_bar(aes(x="Val3",fill=Var3,y=(..count..)/sum(..count..)),position="stack")+
  scale_y_continuous("Percents",labels = percent) + 
  scale_x_discrete("Values")+
  scale_fill_discrete("Legend_title") 
```

![在此处输入图像描述](../Images/4c78755da0591d2bb707446c9b7e88ed.png)

# android - Android在单击（+）按钮时添加edittext字段并通过单击（-）删除

> ID：14935739
> 
> 赞同：1
> 
> 时间：2013-02-18T11:56:50.043
> 
> 标签：android, android-edittext

我正在创建一个添加联系人活动。只有一个编辑文本和一个按钮 (+)，当单击按钮时，应添加另一个编辑文本，前一个按钮应变为 (-)。通过这种方法，我想添加和删除编辑文本字段。[像这样的东西。](http://www.google.co.in/imgres?q=android%20add%20contact&hl=en&safe=active&tbo=d&noj=1&tbm=isch&tbnid=SDkjnonb2GU7GM:&imgrefurl=https://stackoverflow.com/questions/9732783/android-add-contact-form-dynamically&docid=4NU7riH2qdlSVM&imgurl=http://i.stack.imgur.com/CCmqj.jpg&w=640&h=572&ei=eRgiUYvYFITrrQeqoICIBA&zoom=1&ved=1t:3588,r:3,s:0,i:90&iact=rc&dur=1806&sig=111728917285653940940&page=1&tbnh=171&tbnw=191&start=0&ndsp=24&tx=76&ty=79&biw=1366&bih=664)我正在这样做，但无法实现我想要的。任何的想法？

```
public class TextField extends Activity {

Context con;
TableLayout table;
TableRow tr[] = new TableRow[6];
EditText txt[] = new EditText[6];
//ImageView img[] = new ImageView[5];
Button img[]=new Button[6];
int count ;
int lastDeletedIndex;
int lastPopulatedIndex;
boolean isDel;
public void onCreate(Bundle obj) {
    super.onCreate(obj);
    // Log.d("","On Create");
    con = this;
    count = 1;

    table = new TableLayout(this);
    tr[count] = new TableRow(this);
    tr[count].setId(count);
    tr[count].setLayoutParams(new TableRow.LayoutParams(    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    txt[count] = new EditText(this);
    txt[count].setId(count);
    txt[count].setText("1");
    txt[count].setMaxLines(1);
    txt[count].setWidth(160);

        img[count] = new Button(this);
        img[count].setId(count);
        img[count].setText("+");
        img[count].setBackgroundResource(R.drawable.add);
        img[count].setPadding(5, 7, 20, 0);

    tr[count].addView(txt[count]);
    tr[count].addView(img[count]);
    tr[count].setPadding(20, 20, 0, 0);

    img[count].setOnClickListener(new OnClick(img[count]));

    table.addView(tr[count]);
    setContentView(table);

}

class OnClick implements OnClickListener {

    View view;

    Button addIcon;

    public OnClick(View view) {

        this.addIcon = (Button) view;

    }

    @Override
    public void onClick(View arg0) {

            int id=addIcon.getId();
        if(addIcon.getText().toString().equals("-"))
        {

            if ((id >1  )) {
                isDel=true;
                count=id;
                lastDeletedIndex=id;
                txt[count]=null;
                img[count]=null;
                table.removeView(tr[count]);
                tr[count]=null;
                Log.d("", "Cancel img Id" + addIcon.getId());
                }       

        } else {
            if (count <5) {
                if(table.getChildCount()!=5)
                {
                    addIcon.setBackgroundDrawable(getResources().getDrawable(R.drawable.delete));
                    addIcon.setText("-");

                addIcon.setId(count);
                if(!isDel) {
                    count++;
                }else
                {
                    count=lastDeletedIndex;
                }

                tr[count] = new TableRow(con);
                tr[count].setId(count);

                    img[count] = new Button(con);
                img[count].setId(count);
                img[count].setBackgroundDrawable(getResources().getDrawable(R.drawable.add));
                img[count].setText("+");
                img[count].setPadding(3, 7, 20, 0);
                img[count].setOnClickListener(new OnClick(img[count]));

                txt[count] = new EditText(con);
                txt[count].setId( count);
                txt[count].setText(""+count);
                txt[count].setMaxLines(1);
                txt[count].setWidth(160);

                tr[count].addView(txt[count]);

                tr[count].addView(img[count]);

                tr[count].setPadding(20, 20, 0, 0);
                table.addView(tr[count]);
                setContentView(table);
                isDel=false;

                lastPopulatedIndex=count;

                Log.d("", "Cancel img Id" + addIcon.getId());
                }
            } else
                ShowDialog.showAlert("Info","You can't add more than 5 contacts!", con);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:08:09.013

在您的活动中使用此代码：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    // TODO Auto-generated method stub

     if (event.getKeyCode() == KeyEvent.KEYCODE_PLUS)
     {
            if (event.getAction() == KeyEvent.ACTION_DOWN && event.getRepeatCount() == 0)
            {
                LinearLayout mLinearLayout = new LinearLayout(this);
                mLinearLayout = (LinearLayout)findViewById(R.id.mylinearlayout);

                                EditText lEditText = new EditText(this);
                            lEditText.SetText("Text Here");
                            mLinearLayout.addView(lEditText);

                    }
            }
    return super.dispatchKeyEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:24:46.390

```
private void addEditView() {
        // TODO Auto-generated method stub
          LinearLayout li=new LinearLayout(this);
          EditText et=new EditText(this);
          Button b=new Button(this);

          b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                int pos=(Integer) v.getTag();
                mainLayout.removeViewAt(pos);

            }
        });

          b.setTag((mainLayout.getChildCount()+1));
    } 
```

当您单击 addEditText 按钮时调用此函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:20:25.443

您应该创建 Android 布局（可能是 LinearLayout 或 TableLayout），然后在 java 代码中创建视图（Android Activity）

简单的例子；

视图**视图**= 新视图（此）；

如果视图创建成功，您可以添加此代码 --> .addView( **view** ); 或者如果已添加视图，您可以删除此代码示例 --> .removeView( **view** );

# compiler-optimization - 编译器优化

> ID：14935741
> 
> 赞同：2
> 
> 时间：2013-02-18T11:57:00.470
> 
> 标签：compiler-optimization

活变量分析应该在循环不变消除之前还是之后进行？我认为它应该在循环不变消除后执行，但不能证明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-30T10:35:42.230

后。一般来说，我会说应该在进行代码重新排序的任何操作**之后执行实时变量分析。**

# perl - Chomp 将我的字符串更改为 1

> ID：14935744
> 
> 赞同：1
> 
> 时间：2013-02-18T11:57:10.583
> 
> 标签：perl, chomp

在我的代码中，我分配了一个变量 disc 以等于`disc`我的 linux 系统上命令的结果。这将输出字符串 RESEARCH

```
my $disc = `disc`;
print "$disc\n";
$disc = chomp($disc);
print "$disc\n"; 
```

但是，当我使用 chomp 从字符串中删除换行符时，它会将字符串更改为 1。这是输出

```
RESEARCH

1 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T11:59:53.603

从[perldoc -f chomp](http://perldoc.perl.org/functions/chomp.html)：

```
chomp VARIABLE
chomp( LIST )
chomp   This safer version of "chop" removes any trailing string that
        corresponds to the current value of $/ (also known as
        $INPUT_RECORD_SEPARATOR in the "English" module). It returns the
        total number of characters removed from all its arguments. 
```

正确的用法是简单地提供一个将就地更改的变量或列表。返回值，即您使用的值，是它“压缩”其参数列表的次数。例如

```
chomp $disc; 
```

甚至：

```
chomp(my $disc = `disc`); 
```

例如，您可以 chomp 整个数组或列表，例如：

```
my @file = <$fh>;          # read a whole file
my $count = chomp(@file);  # counts how many lines were chomped 
```

当然，对于单个标量参数，chomp 返回值只能是 1 或 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T12:01:03.123

避免将 chomp 结果分配给您的变量：

```
$disc = chomp($disc); 
```

采用：

```
chomp($disc); 
```

这是因为 chomp 修改了给定的字符串并返回从其所有参数中删除的字符总数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T11:58:04.763

使用`chomp $disc`时不要做作，因为[chomp](http://perldoc.perl.org/functions/chomp.html)返回删除的字符数。

# matlab - 改变气缸壁厚以找到其他材料的匹配刚度？

> ID：14935746
> 
> 赞同：0
> 
> 时间：2013-02-18T11:57:17.313
> 
> 标签：matlab

早上好！所以我再次陷入困境......我正在尝试确定使用不同材料的圆柱体的最佳壁厚。我有一个电流管（铁），我知道这个的刚度（'k'）。我正在尝试使用 matlab 迭代不同的“d”（内部直径）值，并在刚度值 k 与铁管的 ki 相同（或相似）时停止（如果它确实收敛） ！）我试过while和for循环，但有些不对劲！任何建议表示赞赏，干杯

```
clc
Efe = 211e9;     % Youngs modulus for iron [GPa]
Eal = 69e9;      % Youngs modulus for Aluminium [GPa]
Esteel = 200e9;  % Youngs modulus for steel [GPa]

D = 53           % Outer diameter [mm]
dFe = 36         % Inner diameter [mm]
dguess = 36
disp('Second moment of area for Iron cylinder: ')
IFe = pi*(D.^4-dFe.^4)/64
    I = pi*(D.^4-dguess.^4)/64
disp('Stiffness for Iron: ')
Stiffness_Fe = Efe/IFe
disp('Stiffness for Aluminium: ')
Stiffness_Al = Eal/I

d=D;
while Stiffness_Fe>Stiffness_Al
    d=d-1
    I = pi*(D.^4-d.^4)/64;
    Stiffness_Al=Stiffness_Fe
        if d<0;
            disp('Gone negative, step out')
        break;
    end
end

d 
```

我希望 for 循环版本可以工作，但似乎我无法在此循环中正确使用 Stiffness_Al 变量....我可能可以在电子表格上完成此操作并过滤匹配的“k”值，但它通常更有趣使用 matlab （除非我遇到这样的基本问题！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:23:07.543

你的循环逻辑很不稳定；

```
while Stiffness_Fe>Stiffness_Al
    d=d-1
    I = pi*(D.^4-d.^4)/64;
    Stiffness_Al=Stiffness_Fe
        if d<0;
            disp('Gone negative, step out')
        break;
    end
end 
```

如所写，循环将继续直到`Stiffness_Fe`超过`Stiffness_Al`。当您的代码第一次遇到循环时，此语句是正确的。你设置的三个语句`Stiffness_Al`等于`Stiffness_Fe`。循环中的其他任何地方都没有修改这些值，因此在第一次迭代结束时，当`Stiffness_Fe>Stiffness_Al`再次评估表达式时，它将为假，并且控制将传递给循环之后的语句。

`while`以这样一种方式编写循环确实很奇怪：（a）它总是运行一次，（b）它从不运行两次。就循环而言，它不是一个循环。

我推测您要做的是计算一系列内径不同的铝管的刚度，并找到与您的铁管具有相同刚度的内径最小的铝管。我想我会：

1.  创建一个内径矢量，从某个最小值到比外径小 1mm，例如`inside_diameters = 12:52`。
2.  为该向量的每个元素计算管的刚度，例如`stiffnesses = Eal/(pi*(D.^4-inside_diameters.^4)/64)`
3.  `stiffnesses`找出超过铁管刚度的最小值。

如果您想覆盖更广泛的管厚度，您可以尝试 12:0.1:52。除非您想要或需要更精确的数字，否则 Matlab 将在您按下回车键的时间内生成您想要的数字。

是的，当你找到你正在寻找的值时，逐步增加厚度并从循环中中断可能会更优雅，但我建议你担心让你的代码工作，如果你有时间和倾向，把它擦亮。

# javascript - Meteor 中的用户注销回调

> ID：14935747
> 
> 赞同：8
> 
> 时间：2013-02-18T11:57:16.577
> 
> 标签：javascript, meteor

在我的项目中，我需要在 User -> Sign out 上调用回调函数，以便将 Session 值设置为“null”。

有没有办法覆盖`Meteor.logout()`行为？如何提供该回调函数？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T12:26:26.910

Meteor.logout() 有一个回调函数。

[http://docs.meteor.com/#meteor_logout](http://docs.meteor.com/#meteor_logout)

```
Meteor.logout(function(err) {
  // callback
  Session.set("ses",false);
}); 
```

--

```
Template.tplName.events
  "click #logout": (e, tmpl) ->
    Meteor.logout ->
      Session.set "ses", false 
```

# apache-kafka - 如何从Kafka中的旧偏移点获取数据？

> ID：14935755
> 
> 赞同：37
> 
> 时间：2013-02-18T11:57:47.747
> 
> 标签：apache-kafka, offset, zookeeper, apache-zookeeper

我正在使用 zookeeper 从 kafka 获取数据。在这里，我总是从最后一个偏移点获取数据。有没有办法指定偏移时间来获取旧数据？

有一个选项 autooffset.reset。它接受最小或最大。有人可以解释什么是最小和最大的。autooffset.reset 可以帮助从旧偏移点而不是最新偏移点获取数据吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-13T10:09:28.277

消费者始终属于一个组，对于每个分区，Zookeeper 都会跟踪分区中该消费者组的进度。

要从头开始获取，您可以删除与 Hussain 所指的进度相关的所有数据

```
ZkUtils.maybeDeletePath(${zkhost:zkport}", "/consumers/${group.id}"); 
```

您还可以指定所需的分区偏移量，如 core/src/main/scala/kafka/tools/UpdateOffsetsInZK.scala 中所指定

```
ZkUtils.updatePersistentPath(zkClient, topicDirs.consumerOffsetDir + "/" + partition, offset.toString) 
```

但是偏移量不是时间索引的，但是您知道每个分区都是一个序列。

如果您的消息包含时间戳（并注意此时间戳与 Kafka 收到您的消息的那一刻无关），您可以尝试做一个索引器，尝试通过将偏移量增加 N 来逐步检索一个条目，并存储元组（主题 X，第 2 部分，偏移量 100，时间戳）某处。

当您想从指定的时间检索条目时，您可以对粗略索引应用二进制搜索，直到找到您想要的条目并从那里获取。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-31T18:06:19.027

从Kafka[文档](https://cwiki.apache.org/confluence/display/KAFKA/0.8.0+SimpleConsumer+Example)中他们说“kafka.api.OffsetRequest.EarliestTime() 在日志中找到数据的开头并从那里开始流式传输，kafka.api.OffsetRequest.LatestTime() 只会流式传输新消息。不要假设偏移量 0 是开始偏移量，因为消息会随着时间的推移从日志中老化。”

在此处使用 SimpleConsumerExample：[https ://cwiki.apache.org/confluence/display/KAFKA/0.8.0+SimpleConsumer+Example](https://cwiki.apache.org/confluence/display/KAFKA/0.8.0+SimpleConsumer+Example)

类似问题：[Kafka High Level Consumer Fetch All Messages From Topic Using Java API (Equivalent to --from-beginning)](https://stackoverflow.com/questions/21762406/kafka-high-level-consumer-fetch-all-messages-from-topic-using-java-api-equivale/21842197#21842197)

这可能会有所帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-13T08:01:17.503

请参阅有关 kafka config 的文档：http: [//kafka.apache.org/08/configuration.html](http://kafka.apache.org/08/configuration.html)以查询偏移参数的最小值和最大值。

顺便说一句，在探索 kafka 时，我想知道如何为消费者重播所有消息。我的意思是，如果一个消费者组已经轮询了所有消息并且它想要重新获取这些消息。

可以实现的方式是从zookeeper中删除数据。使用 kafka.utils.ZkUtils 类删除 zookeeper 上的节点。下面是它的用法：

```
ZkUtils.maybeDeletePath(${zkhost:zkport}", "/consumers/${group.id}"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-06T03:49:16.253

**目前**

Kafka FAQ 给出了这个问题的答案。

> 如何使用 OffsetRequest 准确获取某个时间戳的消息偏移量？
> 
> Kafka 允许按时间查询消息的偏移量，并且以段粒度进行。timestamp 参数是 unix 时间戳，按时间戳查询偏移量会返回不晚于给定时间戳附加的消息的最新可能偏移量。时间戳有 2 个特殊值 - 最新和最早。对于 unix 时间戳的任何其他值，Kafka 将获取不晚于给定时间戳创建的日志段的起始偏移量。由于这个原因，并且由于偏移请求仅以段粒度提供服务，因此对于较大的段大小，偏移获取请求返回不太准确的结果。
> 
> 为了获得更准确的结果，您可以根据时间 (log.roll.ms) 而不是大小 (log.segment.bytes) 配置日志段大小。但是应该小心，因为这样做可能会由于频繁的日志段滚动而增加文件处理程序的数量。

* * *

**未来的计划**

Kafka 将为消息格式添加时间戳。参考

[https://cwiki.apache.org/confluence/display/KAFKA/Kafka+Enriched+Message+Metadata](https://cwiki.apache.org/confluence/display/KAFKA/Kafka+Enriched+Message+Metadata)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-01T06:47:50.920

Kafka Protocol Doc 是使用 request/response/Offsets/Messages 的绝佳来源： [https](https://cwiki.apache.org/confluence/display/KAFKA/A+Guide+To+The+Kafka+Protocol) ://cwiki.apache.org/confluence/display/KAFKA/A+Guide+To+The+Kafka+Protocol 您使用简单消费者示例正如以下代码演示状态的地方：

```
FetchRequest req = new FetchRequestBuilder()

        .clientId(clientName)

        .addFetch(a_topic, a_partition, readOffset, 100000) 

        .build();

FetchResponse fetchResponse = simpleConsumer.fetch(req); 
```

设置 readOffset 以开始初始偏移量。但是您需要检查最大偏移量，上述方法将根据 addFetch 方法的最后一个参数中的 FetchSize 提供有限的偏移量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-27T07:59:07.847

使用 KafkaConsumer，您可以使用 Seek、SeekToBeginning 和 SeekToEnd 在流中移动。

[https://kafka.apache.org/0100/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#seekToBeginning(java.util.Collection)](https://kafka.apache.org/0100/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#seekToBeginning(java.util.Collection))

此外，如果没有提供分区，它将寻找所有当前分配的分区的第一个偏移量。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-01-20T06:06:46.183

你试过这个吗？

bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning

它将打印出给定主题的所有消息，在本例中为“test”。

此链接的更多详细信息[https://kafka.apache.org/quickstart](https://kafka.apache.org/quickstart)

# jsf - valueChangeListner 不适用于 JSF 复选框

> ID：14935756
> 
> 赞同：0
> 
> 时间：2013-02-18T11:57:51.333
> 
> 标签：jsf, richfaces

我在为 h:selectManyCheckbox 调用 valueChangeListner 方法时遇到问题

这是我的代码

```
<h:selectManyCheckbox id="subscriptions" value="#{searchResults.customerSegmantSearchDetails}" layout="pageDirection" valueChangeListner="#{fxViewHelper.getCustomerSegmentList}">
<a4j:ajax event="valueChange" execute="@this" limitRender="true"/><f:selectItem id="item1" itemLabel="" itemValue="#{searchResults}"/> </h:selectManyCheckbox> 
```

这里 h:selectManyCheckbox 值包含 List 并且 f:selectItem 值包含 Object

在 ManageBean 我只是打印价值

```
public void getCustomerSegmentList(ValueChangeEvent event) {

    System.out.println(event.getNewValue());

} 
```

但什么都没有打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:00:26.920

你拼错了属性。更改`valueChangeListner="..."`为`valueChangeListener="..."`它应该可以工作。缺少一个“e”。

# dotcloud - 如何在 dotcloud 中明确销毁服务？

> ID：14935759
> 
> 赞同：1
> 
> 时间：2013-02-18T11:58:00.847
> 
> 标签：dotcloud

从 dotcloud.yml 删除 mondodb 服务并推送到 dotcloud 后，我收到以下警告：

```
Warning: Service mongo is no longer in your dotcloud.yml, but will continue running until you destroy it explictly. 
```

但是在 CLI 文档或 dotcloud 页面中，我不知道如何明确销毁服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:15:53.490

您将使用该`destroy`命令，在其中指定要销毁的应用程序和服务。

如果您只是放置应用程序，您将销毁整个应用程序，因此请务必小心并确保指定要销毁的服务。

这是一个例子。

*检查您的 dotcloud cli 版本以了解要使用的版本。*

```
$ dotcloud --version 
```

**CLI 版本 0.9.x**

```
# destroy the application
$ dotcloud destroy --application <app name>

# destroy a service in the application
$ dotcloud destroy --application <app name> <service name> 
```

有关更多信息，请参阅这些文档：http: [//docs.dotcloud.com/firststeps/in-depth/#deleting-services](http://docs.dotcloud.com/firststeps/in-depth/#deleting-services)

**CLI 版本 0.4.x**

```
# destroy the application
$ dotcloud destroy <app_name>

# destroy a service in the application
$ dotcloud destroy <app_name>.<service_name> 
```

有关更多信息，请参阅这些文档：http: [//docs.dotcloud.com/0.4/firststeps/in-depth/#deleting-services](http://docs.dotcloud.com/0.4/firststeps/in-depth/#deleting-services)

**注意**：您也可以使用仪表板。但是，看起来您只能销毁应用程序，并且不允许您销毁服务。所以这对你现在没有多大好处，但它可能会在未来被添加。

# jakarta-ee - 密码的正则表达式至少有一个大写字母，一个数字最少 7 和最多 15 个字符

> ID：14935763
> 
> 赞同：1
> 
> 时间：2013-02-18T11:58:15.843
> 
> 标签：jakarta-ee, struts2, struts-validation

我正在使用 struts 2 注释验证来验证密码字段，但是当我给出正确的编码时它显示错误

```
@RequiredStringValidator(message = "Please provide a password")
    @StringLengthFieldValidator(minLength="7",maxLength="15",message="The Password should be minmum 7 character and maximum 15 charcters")
    @RegexFieldValidator(expression = "^[0-9A-Z]+$", message = "Password atleast have one Capital and one Number") 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:36:16.283

我认为他真的需要（未经测试）：`^.*(?=.{7,15})(?=.*\d)(?=.*[a-zA-Z]).*$`

但我不会使用正则表达式......只需在您的操作中添加一个验证方法并根据您的要求在那里检查它，对于大多数人来说，一个简单的循环和计数器会比您自己发现困难的正则表达式更容易理解构建，以后会发现很难阅读。

例如，如果你想改变上面那个怪物怎么办？如果我看到一个字符串字符的循环，其中包含一个数字和字母计数器，这将非常容易理解并且很容易考虑添加大写字母、小写字母和符号，你应该选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:30:39.430

您正在寻找的正则表达式是：

```
^(.*[0-9].*[A-Z].*)|(.*[A-Z].*[0-9].*)$ 
```

你提供的那个：

```
^[0-9A-Z]+$ 
```

匹配*仅*由数字和/或大写字母组成的密码

# c# - 编辑一列数据网格视图

> ID：14935765
> 
> 赞同：0
> 
> 时间：2013-02-18T11:58:28.497
> 
> 标签：c#, gridview, datatable

我知道如何在数据网格视图中编辑整行，我想知道如何仅编辑一列以保持其余数据相同。我的当前代码如下所示，我想知道如何仅编辑一列并将该数据更新到数据表中。我只想编辑“ab”列。

代码

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateEditButton="True"
              OnRowEditing="Gridview1_rowediting"  
              OnRowUpdating="Gridview_RowUpdating"
             OnRowCancelingEdit="Gridview_EditCanceling" >
</asp:GridView> 
```

后面的 C# 代码

```
DataTable dt = new DataTable();

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
    add();
    }
}

private void add()
{

    dt.Columns.Add("ab", typeof(string));
    dt.Columns.Add("ac", typeof(string));
    dt.Columns.Add("av", typeof(string));
    dt.Columns.Add("ax", typeof(string));
    DataRow row = dt.NewRow();
    row["ac"] = "sndasbfb";
    row["av"] = "sndasbfb";
    row["av"] = "sndasbfb";
    row["ax"] = "sndasbfb";
    dt.Rows.Add(row);

    GridView1.DataSource = dt;
    //ProjectsGridView.DataSource = dt;
    //ReleasesGridView.DataSource = dt;
    GridView1.DataBind();
    //  ProjectsGridView.DataBind();
    // ReleasesGridView.DataBind();
}

protected void Gridview1_rowediting(object sender, GridViewEditEventArgs e)
{
    //GridView1.EditIndex = e.NewEditIndex;
}

protected void Gridview_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = GridView1.Rows[e.RowIndex];
}

protected void Gridview_EditCanceling(object sender, GridViewCancelEditEventArgs e)
{
    GridView1.EditIndex = -1;
    add();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:09:31.173

您可以在设计视图中或通过如下代码将列 ReadOnly 设置为 True：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        add();
    }

    //If you are using template field

    ((TemplateField)gvGridView.Columns[index]).EditItemTemplate = null;

    //If you are using boundfield

    ((BoundField)gvGridView.Columns[index]).ReadOnly = true;
} 
```

或者，您可以在设计视图中删除该列的编辑模板，将该列转换为模板。

检查此链接以获取更多信息：

[Gridview 在 1 列 asp.net 上禁用编辑](https://stackoverflow.com/questions/7171530/gridview-disable-edit-on-1-column-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:18:26.353

我在我的一个应用程序中尝试了此代码。

```
foreach (DataGridViewRow c in this.DataGrid.Rows)
                    c.Cells[0].Value = "Something"; 
```

这里“0”是ColumnIndex。现在您可以根据需要设置条件。

# python - Django：无效表单的重定向

> ID：14935769
> 
> 赞同：0
> 
> 时间：2013-02-18T11:58:42.067
> 
> 标签：python, django, forms

哪种 HttpResponse 方法可以帮助我做到这一点？我在某些视图中有一个表单验证代码：

```
if request.method == 'POST'
    form = SomeForm(request.POST)
    if form.is_valid():
        form.save()

    else:
        return HttpResponseRedirect('back.to.this.view')
        # I want to redirect to the same form page with a small error message 
        #below the form saying "This is an empty form" 
```

如何在页面中添加该消息？

我是 Django 和 Web 开发的新手

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:00:36.947

这将是一件奇怪的事情。

您不想重定向回当前视图。您要做的是重新显示现有页面，并通过调用自动生成错误`form.is_valid()`。您可以[按照文档中的示例视图来](https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view)执行此操作。

# android - 使用基础框架滚动安卓浏览器

> ID：14935770
> 
> 赞同：0
> 
> 时间：2013-02-18T11:58:45.967
> 
> 标签：android, web, scroll, zurb-foundation

我一直在构建一个*移动目标站点*，但希望它也可以在*桌面上*运行。由于某种原因，页面不会滚动。我可以放大页面，然后滚动，但显然需要这样做。不知道出了什么问题，也看不出我的代码有什么问题：

例如：[http ://damnationalley.vincentstephens.co.uk/](http://damnationalley.vincentstephens.co.uk/)

我是android开发的新手，非常欢迎任何和所有评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:16:25.700

网站和wap站点不同的技术如果你想在html中使用WebView，css ve jquery代码你测试[http://jquerymobile.com/](http://jquerymobile.com/)网站并创建你自己的wap代码，然后在assets目录和webview加载url**文件下复制：/ //android_asset/**

# jquery - 使用 jquery 解析 json 以填充数据列表

> ID：14935774
> 
> 赞同：1
> 
> 时间：2013-02-18T11:59:01.790
> 
> 标签：jquery, json, html, parsing, html-datalist

我想根据 JSON 数据填充数据列表以创建自动完成字段。

多亏了[这个教程](http://www.raymondcamden.com/index.cfm/2012/6/14/Example-of-a-dynamic-HTML5-datalist-control)，我已经成功地完成了以下工作：

这个json数据：

```
{"COLUMNS":["ARTNAME"],"DATA":[["Morning Forest"],["Morph"],["Mountains"],["Mom"]]} 
```

我可以使用以下代码进行解析： $(document).ready(function() {

```
if(document.createElement("datalist").options) {

    $("#search").on("input", function(e) {
        var val = $(this).val();
        if(val === "") return;
        //You could use this to limit results
        //if(val.length < 3) return;
        console.log(val);
        $.get("artservice.cfc?method=getart&returnformat=json", {term:val}, function(res) {
            var dataList = $("#searchresults");
            dataList.empty();
            if(res.DATA.length) {
                for(var i=0, len=res.DATA.length; i<len; i++) {
                    var opt = $("<option></option>").attr("value", res.DATA[i][0]);
                    dataList.append(opt);
                }

            }
        },"json");
    });

}

}) 
```

并且自动完成按照我链接到的示例工作。

我正在尝试将其解析为我的数据源：

```
{"responseHeader":{"status":0,"QTime":1,"params":{"q":"*a*","wt":"json"}},"response":{"numFound":2,"start":0,"docs":[{"id":"13","body":"Hi guys\r\n\r\nCould you please help me.\r\n\r\nCheers,\r\n\r\nTest Three","title":["Patience"],"_version_":1427207573191262208},{"id":"45","body":"Has been implemented!","title":["Validation"],"_version_":1427207573192310784}]}} 
```

我正在尝试让“正文”在数据列表中自动完成。我不确定如何让它与这个更复杂的 json 数据一起工作。

# java - 某些 url 在在线广播 android 中不起作用

> ID：14935776
> 
> 赞同：1
> 
> 时间：2013-02-18T11:59:05.373
> 
> 标签：java, android, media-player, android-mediaplayer

流式广播在线代码如下

```
 player = new MediaPlayer();
   player.setDataSource(RADIO_STATION_URL);
   player.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            player.start();
        }
    }); 
```

如果我把 url 代替 RADIO_STATION_URL 像[http://test1.leanstream-hd.com/CFHKFM](http://test1.leanstream-hd.com/CFHKFM)，它会给我一个错误

```
 02-18 17:12:34.035: E/MediaPlayer(1205): error (1, -2147483648) 
```

并且播放器不工作它会在许多 url 上工作，但在这种 url 的情况下它不工作:(

我已经用谷歌搜索了，我通过下面的链接得知媒体播放器不支持某些媒体格式

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

但是任何人都可以建议我如何找到**哪个 url 包含**我想要在该链接中制作 UNIVERSAL RADIO 应用程序的媒体格式来自动态的服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:18:29.067

在 vlc 中运行 URI 并转到`Tool --> Codec Information`检查详细信息。以下是[http://test1.leanstream-hd.com/CFHKFM](http://test1.leanstream-hd.com/CFHKFM) URI的屏幕截图

![在此处输入图像描述](../Images/a3cc514e93a30df905f2fd5b9d9722ca.png)

![在此处输入图像描述](../Images/301cadffd61c906df63ecbde48bc4f00.png)

# java - 如何将数组类型 InetAddress 转换为 String[]？

> ID：14935780
> 
> 赞同：0
> 
> 时间：2013-02-18T11:59:12.907
> 
> 标签：java, arrays, string, inetaddress

如何转换数组类型 InetAddress

```
InetAddress[] inetAddress 
```

进入字符串数组，如下所示！

```
String[] addrSplit = ?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:01:50.550

惯于

```
String[] addrSplit = new String[inetAddress.length];
for (int i = 0; i < addrSplit.length; i++) {
    addrSplit[i] = inetAddress[i].toString();
} 
```

工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:03:19.007

遍历`InetAddress`数组并在需要`InetAddress#getCanonicalHostName()`时返回[FQDN](http://en.wikipedia.org/wiki/Fully_qualified_domain_name)地址，或者 返回此 IP 地址的主机名。`String``InetAddress#getHostName()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:02:15.467

只需循环 inetaddress

```
 InetAddress[] inetAddress;
      String[] data= new String[inetAddress.length];
      for (int i = 0; i < inetAddress.length; i++) {
         data[i]=inetAddress[i].getHostAddress();
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:04:39.940

这个怎么样：

```
String[] addrSplit = new String[inetAddress.length];
for (int i = 0; i < addrSplit.length; i++) {
  addrSplit[i] = inetAddress[i].toString();
} 
```

# arrays - cakephp 将树放入数组中

> ID：14935781
> 
> 赞同：3
> 
> 时间：2013-02-18T11:59:19.053
> 
> 标签：arrays, cakephp, tree

我有一个表，其中的节点充当树。我有一个树结构：

```
Null
Null
-Child
--ChildofChild
--ChildofChild
-Child
Null 
```

ETC...

我想把它变成这样的数组结构：

```
array(
   0 => array( id => ''),
   1 => array( id => '', array( 
        0 => array( id => '', 
             0 => array(
                  id => '',
                 )
             1 => array (
                  id =>''),
        1 => array(id => '')      
   2 => array ( id => '') 
```

我错过了一些右括号，但我的想法是获取一个数组，其中包括其父数组中每个节点的数组。所有数组都将只包含节点的 id。我尝试使用 find('threaded) 但我无法按我的意愿得到它。有任何想法吗？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-11T21:23:28.353

这就是你要找的：

```
$categories = $this->Category->find('threaded', array(
    'fields' => array('id', 'parent_id', 'name'),
    'order' => array('lft ASC') // or array('id ASC')
)); 
```

# database - 显示属性之间关系的图表

> ID：14935786
> 
> 赞同：1
> 
> 时间：2013-02-18T11:59:28.373
> 
> 标签：database, entity-relationship, diagram, erd, er-diagrams

我正在寻找生成 ER 图的**免费工具。**我现在有很多东西可以在谷歌中找到，但我需要一些具体的东西，但找不到。

该工具应生成显示属性之间关系的 ER 图，如下图所示。请注意，此图显示了物理关系**table1.attributeX <----> table2.attributeY**

![](../Images/52967f4453facf5aec656f84959fafbc.png)

**注意：我不是要求生成此类图表的工具。该图没有明确显示属性之间的关系。**

[![](../Images/d4af41059db0c43bf31a2867f4063e68.png)](https://i.stack.imgur.com/GLCRJ.jpg)
[（来源：[philblock.info](http://www.philblock.info/hitkb/_images/erd-example2.jpg)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:20:21.367

据我所知，这是 MS Access 在他们的关系对话框/概述中使用的风格。这不是标准，所以我认为没有很多工具会支持这种表示法。我建议看看ms access。替代方案？我知道在[DeZign for Databases](http://www.datanamic.com/dezign/index.html)中，您可以将关系线拖动到实体框的一侧。这样，您可以手动将其指向正确的属性。不确定你是否想要那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T00:05:56.147

[SchemaCrawler](http://schemacrawler.sourceforge.net/)是一个免费工具，可以生成显示属性之间关系的图表。即有一条从主键列到外键列的关系线。这是一个[示例图](http://schemacrawler.sourceforge.net/images/diagram.png)：![SchemaCrawler 图](../Images/0bc04e4fa3f4d71b4ce24be85a7e6c16.png)

Sualeh Fatehi，[SchemaCrawler](http://schemacrawler.sourceforge.net/)

# alfresco - 从 Alfresco Share wiki 链接到 Alfresco Repository 中的目录

> ID：14935787
> 
> 赞同：0
> 
> 时间：2013-02-18T11:59:30.790
> 
> 标签：alfresco, alfresco-share

如何在 Alfresco Share wiki 页面中创建指向 Alfresco 存储库中目录的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T17:18:41.387

在共享->文档库中，单击要链接到的目录的项目菜单“查看详细信息”，然后复制剪贴板中“复制此链接以共享当前页面”下的链接。编辑您的维基页面和“插入/编辑链接”；将剪贴板粘贴到“URL 链接”字段中。

# php - PHP 适用于页面，但不适用于同一站点的其他页面

> ID：14935789
> 
> 赞同：0
> 
> 时间：2013-02-18T11:59:41.440
> 
> 标签：php, html, function

我是 PHP 新手，试图了解为什么 PHP 函数在一个页面上有效，但在同一站点的其他页面上无效。

在这里工作：http: [//soymusico.net/perfil/64-federico-barenboin](http://soymusico.net/perfil/64-federico-barenboin)
但不在这里工作：[http ://soymusico.net/comunidad/search/field?FIELD_CITY=Buenos%20Aires](http://soymusico.net/comunidad/search/field?FIELD_CITY=Buenos%20Aires)

```
<li><b>Nacionalidad</b>
        <?php  $city = CFactory::getUser($profile->id)->getInfo('FIELD_CITY'); ?>
        <?php  $country = CFactory::getUser($profile->id)->getInfo('FIELD_COUNTRY'); ?>
         <div><a href="comunidad/search/field?FIELD_CITY=<?php echo $city;?>"><?php echo $city; ?></a>,
              <a href="comunidad/search/field?FIELD_COUNTRY=<?php echo $country;?>"><?php echo $country; ?></a>
         </div>
</li> 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:04:39.533

PHP 正在工作，否则您已经看到 html 页面`<?php`在正文中显示标签。不起作用的是：

1.  CFactory 方法
2.  或读取这些字段的数据库连接。

我打赌它的 CFactory 方法。您是否包括所有必要的库？

# ios - 核心数据无法识别的选择器错误

> ID：14935790
> 
> 赞同：0
> 
> 时间：2013-02-18T11:59:45.397
> 
> 标签：ios, core-data, nsmanagedobject

我正在使用 Core Data 来保存一些字符串。我有以下名为Results的类

**结果.h**

```
#import <CoreData/CoreData.h>

@interface Results : NSManagedObject

@property(nonatomic, retain) NSString *lessondate;
@property(nonatomic, retain) NSString *lesson;
@property(nonatomic, retain) NSString *location;
@property(nonatomic, retain) NSString *start;
@property(nonatomic, retain) NSString *end;

@end 
```

**结果.m**

```
#import "Results.h"

@implementation Results

@dynamic lessondate;
@dynamic lesson;
@dynamic location;
@dynamic start;
@dynamic end;

@end 
```

以下是我执行保存的代码：

```
-(void)saveLesson{

Results *result = (Results *)[NSEntityDescription insertNewObjectForEntityForName:@"Diary" inManagedObjectContext:managedObjectContext];

result.lessondate = calendarDateString;
result.lesson = [NSString stringWithFormat:@"%@", lessonText.text];
result.location = [NSString stringWithFormat:@"%@", locationTest.text];
result.start = [NSString stringWithFormat:@"%@", startTimeText.text];
result.end = [NSString stringWithFormat:@"%@", endTimeText.text];
NSError *error;

// here's where the actual save happens, and if it doesn't we print something out to the console
if (![managedObjectContext save:&error])
{
    NSLog(@"Problem saving: %@", [error localizedDescription]);
}

[self dismissViewControllerAnimated:YES completion:nil]; 
```

}

但是当我尝试在应用程序中保存数据时，应用程序崩溃并显示这些错误

```
2013-02-18 11:46:25.705 After managedObjectContext: <NSManagedObjectContext: 0x1f892480>

2013-02-18 11:46:33.762 -[NSManagedObject setLesson:]: unrecognized selector sent to instance 0x1f80b380

2013-02-18 11:46:33.764  *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObject setLesson:]: unrecognized selector sent to instance 0x1f80b380' 
```

有人可以告诉我为什么会崩溃吗？完全相同的代码在另一个应用程序中并且运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:09:07.033

您正在创建一个与您期望不同的实体。

你在打电话

```
[NSEntityDescription insertNewObjectForEntityForName:@"Diary"
                              inManagedObjectContext:managedObjectContext]; 
```

创建实体`Diary`。作为`@"Results"`该方法的第一个参数。

当您将创建的`Diary`实体分配给一个`Results`对象时，它只是一个语法糖——下面的真实对象是您作为实体名称传递的对象。 `Diary`object 没有该`lesson`属性，您会得到异常。

# c# - 实体框架一对多生成异常

> ID：14935791
> 
> 赞同：2
> 
> 时间：2013-02-18T11:59:45.080
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个包含 2 个类的数据库，并且设置了一对多的关系。这被设置为商店（我正在运行我的代码的主要类，它在我的数据库中加入到商店销售的产品类别列表中。

所以桌子是;

```
shops 
int          id        //shopId & primaryKey
varchar(50) shopName  
...                    //other details left out.

ShopProductTypes
int          id       //Category id
int          ShopId   //Foreign Key to shop table
varchar(50)  CategoryName  
... 
```

这都是直截了当的，并且可以通过 sql 查看器等进行处理。

我已导入数据库模型，并取消选中 Pluralize / Singularize 框。

我的上下文是；

```
 public ReportingContext(string connectionString) : base(connectionString)
        {

            Database.SetInitializer<ReportingContext>(null);

        }

      protected override void OnModelCreating(DbModelBuilder modelBuilder)
      {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
      }

        public DbSet<AutoComp_Reporting.DAL.Shop> Shops{get; set;}

        public DbSet<AutoComp_Reporting.DAL.ShopProductTypes> ShopCategories { get; set; }

    } 
```

但是当我跑步时；

```
var foo = (from s in context.Shops
          where (s.Id == id).select s).toList(); 
```

我可以看到所有商店，但如果我尝试查看 QuickWatch 中的类别，我会得到以下异常

> {“执行命令定义时发生错误。有关详细信息，请参阅内部异常。”}

```
System.Data.EntityException {System.Data.EntityCommandExecutionException} 
```

最终揭示的放松；

```
 Message "Invalid column name 'Shops_Id'.\r\nInvalid column name 'Shops_Id'.\r\nInvalid column name 'Shops_Id'." 
```

I may well be doing something wrong as I am new to entity framework, but I cannot fix this error. I have got `MultipleActiveResultSets=True` in my database connection string.

So how do I track down the cause of this error, and / or fix it? I am guessing that the actual inner exception is down to the way that the framework is interpreting the properties, so may be a red herring..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:16:37.340

Changing the name of the Foreign Key in the table, and applying the ForeignKey attribute seems to have worked. However I am sure that this is not the correct solution, else it means that the framework only works out of the box if you have a database that has been built to a specific naming convention.

Bearing in mind this is a legacy application, how do I fix this issue once and for all?

# ajax - AJAX 调用不适用于 RESTful Web 服务？

> ID：14935801
> 
> 赞同：0
> 
> 时间：2013-02-18T12:00:20.253
> 
> 标签：ajax, rest, jquery

我有一个返回 json 的简单宁静服务。我想进行 ajax 调用以获取所需的数据。当我尝试使用 firefox 的 RestClient 时没有问题。服务返回 json，我可以在 rest 客户端上看到 json。但是当我使用 ajax 调用时它失败了。控制台显示`200 OK`，但错误函数在调用后执行。我搜索了这个，通常他们说这是一个跨域问题，但我没有解决这个问题。

这是错误函数的失败信息`{"readyState":0,"responseText":"","status":0,"statusText":"error"}`

AJAX 调用

```
$.ajax({
        type:"GET",
        url: "http://localhost:8080/myController/getInfo",
        dataType:"json",
        success: function(data){
            alert(JSON.stringify(data));
        },
        error: function(msg){
            alert("ERROR! \n" + JSON.stringify(msg));
        }
    }); 
```

Firefox 的控制台消息

```
Content-Type    application/json
Date    Mon, 18 Feb 2013 11:51:41 GMT
Server  Apache-Coyote/1.1
Transfer-Encoding   chunked

Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language tr-TR,tr;q=0.8,en-US;q=0.5,en;q=0.3
Host    localhost:8080
Origin  null
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0 
```

调用返回的数据：

```
{ "date": "1 hour ago", "photoUrl": "img/movie_detail/celal.jpg", "rating": "three", "title": "Celal ile Ceren" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:39:33.583

看起来您违反了[`same origin policy restriction`](http://en.wikipedia.org/wiki/Same_origin_policy)阻止您发送跨域 AJAX 调用的规定。您已用作`http://localhost:8080/myController/getInfo`url，但这仅在包含此 javascript 的 HTML 页面来自`http://localhost:8080/`. 否则浏览器将不允许您执行此 AJAX 调用。

作为一种可能的解决方法，您可以修改您的 REST 服务，以便它支持[`JSONP`](http://en.wikipedia.org/wiki/JSONP)JSON。然后您将能够向它发送 GET 请求（POST 不适用于 jQuery 的 JSONP 实现，因为它使用`<script>`标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:09:53.000

为此，您可以使用 CORS。

示例代码：

```
jQuery.support.cors = true; 

function CrosDom_ajax(url) {
        if (window.XDomainRequest
        && $.browser.msie
        && $.browser.version < 10) {
        xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
               alert(xdr.responseText);

            };
            xdr.open("get", url);
            xdr.send();
        }
        }
        else {
            $.ajax({
                url: url,
                success: function (response) {

                },
                error: function (data) {
                }
            });
         }
    } 
```

您还需要在服务器端编写以下代码，以允许跨域访问

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

# javascript - 在按钮单击时获取相应的 div

> ID：14935803
> 
> 赞同：0
> 
> 时间：2013-02-18T12:00:22.380
> 
> 标签：javascript, html

我`div`在 while 循环中有一个和相应的锚标记。我想要的是，当我点击锚标签时，应该只显示相应的 div。问题是它只显示循环的第一个 div。请帮我解决问题。这是我的代码

```
int i=0;
while(i<5){
  <div class="scroll_div04b1" align="center" id="chk">
    <a href="#" onclick="return hs.htmlExpand(this, { contentId: 'highslide-0' } )">
      <img src="images/buttons/chk.gif" border="0" />  
    </a>
    <div class="highslide-html-content" id="highslide-0">
    --------
    -------
    </div>
  </div>
  i++
} 
```

现在我将如何获得`highslide-0 div`与每个图像点击对应的，`highslide-0 div`是一个弹出窗口。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:05:49.470

```
$('a').click(function(){
   $('.highslide-html-content').hide();
   $(this).next().show();
}); 
```

这应该选择所有 highslide-html-content div 并在显示单击锚的下一个兄弟之前隐藏它们。（在这种情况下是 div）。您包含的 html-snippet 格式也不正确，您错过了一个结束 div ;)

这是 jquery(!) 要使其工作，您需要包含[jquery](http://www.jquery.com)

这是一个使用 jquery 的工作[jsfiddle](http://jsfiddle.net/YZx5R/)。不幸的是，我已经很久没有使用过 javascript，因此我无法制作一些平面 javascript。请注意，正如安迪所说，这是非常耗费资源的，其唯一目的是在点击时显示下一个兄弟姐妹:(

# ios - 设置 UILabel.text 属性会导致线程中的内存泄漏

> ID：14935804
> 
> 赞同：2
> 
> 时间：2013-02-18T12:00:26.170
> 
> 标签：ios, nstimer

我很困惑！

我有一个运行倒计时的计时器设置，在计时器内我用经过的时间更新 UILabels，这一切都很好，但奇怪的是，当我通过仪器进行测试时，文本的设置会导致内存泄漏。

定时器代码是

```
NSTimer* timer = [NSTimer timerWithTimeInterval:1.0f
                                    target:self
                                    selector:@selector(myTimer:)
                                    userInfo:nil
                                    repeats:YES];
self.pnTimer = timer;
[[NSRunLoop mainRunLoop] addTimer:self.pnTimer forMode:NSRunLoopCommonModes]; 
```

我的计时器方法有以下...

```
- (void)myTimer:(NSTimer*)timer {
  ...
  if (self.secondsPassed <=9) {
     [self.secondsLabel setText:[NSString stringWithFormat:@"0%i",self.secondsPassed]];
  } else {
     [self.secondsLabel setText:[NSString stringWithFormat:@"%i",self.secondsPassed]];
  }
  ...

} 
```

注释掉 [self.secondsLabel…并且反应迟钝（20 分钟左右）

标签定义为

```
 @property (weak, nonatomic) IBOutlet UILabel *secondsLabel; 
```

请注意，我也在使用 iOS 6.1 的 iPhone 5 设备上进行测试

有什么想法我可能在这里做错了吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:40:20.663

好的，发现它是什么。UI 还有一个光泽渐变按钮 UIButton+Glossy ( [http://www.mlsite.net/blog/?p=232](http://www.mlsite.net/blog/?p=232) )。我删除了按钮并更新标签不再导致内存泄漏。我假设每秒更新标签会导致完整的 UI 刷新，这也更新了有其自身问题的按钮！

谢谢

# java - 在使用 Maven 使用 TestNG 执行 Selenium 测试期间出现“java.lang.Error：未解决的编译问题”

> ID：14935807
> 
> 赞同：1
> 
> 时间：2013-02-18T12:00:35.917
> 
> 标签：java, maven, selenium, testng, selenium-firefoxdriver

我正在使用 Selenium 和 TestNG 进行自动化测试。我使用 Maven 作为软件项目管理和理解工具。我的类路径中有所有 Maven 依赖项。仍然我得到原因：java.lang.Error：未解决的编译问题：

导入 org.openqa.selenium.firefox.FirefoxDriver 无法解析。selenium.firefox.driver jar 存在于我的类路径中，其他依赖项也存在同样的问题。

如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:12:29.703

**尝试以下步骤：**

1.  右键单击项目
2.  转到`Maven`菜单
3.  点击`Update Project Configuration`

# ruby-on-rails - 在 Squeel 中使用 NOT 运算符？

> ID：14935812
> 
> 赞同：3
> 
> 时间：2013-02-18T12:00:53.700
> 
> 标签：ruby-on-rails, ruby, squeel

如何使用 Squeel 编写 SQL 查询？

```
 SELECT * FROM documents where (NOT document.deleted OR document.deleted IS NULL) 
```

我试过：

```
 Document.where { (-deleted) | (deleted == nil) } 
```

但得到这个错误：

```
 NoMethodError: undefined method `|' for deleted.-@:Squeel::Nodes::KeyPath 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:40:03.607

`NOT`将反转返回的集合，因此您必须定义要比较的内容。

```
(-deleted) #there is nothing to reverse 
```

根据您的评论，我认为您的意思是`deleted not equal true`，所以：

```
Document.where { -(deleted == true) | (deleted == nil) } 
```

然而，真的反转是假的，对吧？所以，你可以说：

```
Document.where { (deleted == false) | (deleted == nil) } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:41:34.250

值得注意的是，ActiveRecord 将布尔值作为字符串标志存储在数据库中。因此，在您提到的情况下，`document.deleted`equals`'f'`是一个*真值*。这就是为什么你不能简单地使用`NOT`操作符。

也许您正在寻找的是：

```
Document.where { deleted.eq(false) | deleted.eq(nil) } 
```

干杯

# java - 如何在我的java程序中使用graphviz来绘制状态图

> ID：14935816
> 
> 赞同：1
> 
> 时间：2013-02-18T12:01:13.420
> 
> 标签：java, mapping, graphviz, statechart

我想使用graphviz在我的java程序中绘制状态图来显示流程。如何在我的 java 程序中使用 Graphviz 程序来绘制状态图。

# ruby-on-rails-3 - 如何在一个视图中显示两种不同的翻译 - Rails？

> ID：14935822
> 
> 赞同：2
> 
> 时间：2013-02-18T12:01:31.153
> 
> 标签：ruby-on-rails-3, internationalization, rails-i18n

我有一个带有两个翻译的应用程序：：pl 和：en。我想用两种语言发送电子邮件（一个视图文件）

像这样的东西：

```
=t(".my_translation_key", :en)
=t(".my_translation_key", :pl) 
```

代替

```
-I18n.locale = :en
=t(".my_translation_key")

-I18n.locale = :pl
=t(".my_translation_key") 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:31:49.900

只需发送`:locale`选项：

```
= t(".my_translation_key", :locale => :en)
= t(".my_translation_key", :locale => :pl) 
```

# ios - 自动布局 - 使视图高度相对于超级视图的一半高度

> ID：14935825
> 
> 赞同：141
> 
> 时间：2013-02-18T12:01:43.493
> 
> 标签：ios, xcode, autolayout

最近一直在进入自动布局，我被困在一个看似非常微不足道的问题示例上。我有一个视图，我想坐在屏幕的顶部，并占据屏幕高度的一半。在自动布局之前很简单 - 只需将其固定到位并在超级视图调整大小时告诉它垂直扩展。

现在，我一辈子都看不到该怎么做。这是我尝试设置时得到的结果：

![自动布局蓝调](../Images/2d77b5ca11eff37aca872a51ade8a061.png)

底部空间约束设置为“等于 284”，当我更改为 iPhone4 布局时，这对我来说绝对无用，因为它在屏幕底部保留 284 点空间，并将视图缩小到不再是一半屏幕的大小。并且没有办法将该约束设置为等于任何其他视图高度的一部分。

挣扎了一段时间后，我能想到的唯一方法是在该视图下方引入另一个视图，固定它们的高度，让它们彼此上下放置，然后将第二个（底部）视图设置为不可见..这似乎有点难看！

我错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2014-11-02T14:41:51.620

**故事板解决方案，您可以在其中设置任何视图之间的精确比例：**

![设置高度相等约束](../Images/f763ee0a207707e873c41ea08a37a2f8.png)

**现在：**

![编辑约束的乘数](../Images/8e7eea5ca97d65d4148caf877d950ab3.png)

**利润！！！**

![结果](../Images/816396aab1dafca734df429f7b8cf621.png)

PS 另请注意，此方法适用于不同嵌套级别的视图，并且（显然）适用于宽度

PPS 有时可能有助于“反转第一项和第二项”约束或设置反向乘数（例如 2 而不是 0.5）（但如果您不了解视图之间的相互关系，这些方法将无济于事）。

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2014-06-19T18:43:40.897

从 [至少] Xcode 5.1.1 开始，现在这在 IB 中是可能的。虽然我花了一些时间才弄清楚它实际上非常简单：

首先创建一个基本的顶部对齐约束（您还需要像正常一样设置底部、左侧和右侧约束）。然后选择约束并导航到**属性**检查器：

![上述步骤的演示](../Images/f9569afe9339b7dd120bd4b5c3e2cd29.png)

然后你可以调整乘数。如果你想要它 50% 的超级视图将其保留在`1`，因为它与超级视图的中心对齐。这也是创建其他百分比的视图的好方法（例如 25% 的超级视图）

![上面第二步的演示](../Images/64284b58e2be7874ae153ff7501c5c6e.png)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-02-18T14:47:10.307

再过一段时间后，我想出了以下内容。

我注意到它是一个答案，但它不是很令人满意，因为它假设您实际上不能在 Interface Builder 中执行此操作，但是可以在代码中添加正确的约束，如下所示：

```
- (void) viewWillAppear:(BOOL)animated
{

    NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:upperview
                                                                 attribute:NSLayoutAttributeHeight 
                                                                 relatedBy:0 
                                                                    toItem:self.view
                                                                 attribute:NSLayoutAttributeHeight
                                                                multiplier:.5 
                                                                  constant:0];
    [self.view addConstraint:constraint];

} 
```

基本上，它对 self.view 的高度设置了 0.5 的乘数，作用于上视图。我不得不将 IB 中底部垂直空间约束的优先级设置为低于 1000，以避免出现一堆关于破坏约束的运行时消息。

因此，如果有人可以在 Interface Builder 中展示如何做到这一点，那将更好地回答我的问题，否则我想这已经很好了（目前）？？？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-02-08T23:05:48.137

比方法比 Fyodor Volchyok 的答案更容易和更直接。- 按住控制按钮并单击子视图。- 仍然按住命令按钮，将光标拖动到超级视图，然后单击超级视图。- 选择“纵横比”。

[![在此处输入图像描述](../Images/d6094fb3e789f3ffe4c30e53b47ceb72.png)](https://i.stack.imgur.com/zVcWY.png)

- 然后单击尺寸检查器。- 然后双击约束。 [![在此处输入图像描述](../Images/a646fb115a0b3f489f22585de1ae8203.png)](https://i.stack.imgur.com/n7uPG.png)

- 确保为这两个项目选择了“高度”。 [![在此处输入图像描述](../Images/62d6f643bbe9d924ad4a88d5db6d28f5.png)](https://i.stack.imgur.com/nkHHM.png)

- 然后将一半屏幕的“乘数”更改为 0.5，或者您想要的超级视图的任何部分。 [![在此处输入图像描述](../Images/5e6c0297c7ff44c3b370cf259b5d8ab6.png)](https://i.stack.imgur.com/dDTLw.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-05-03T09:40:51.210

如果您有 2 个视图应该具有相同的高度，我在代码中还有另一种可能性：只需将 view2 的高度设置为 view1 的高度（这里的技巧是不明确设置 view1 的高度）。

```
 [self.view addConstraints:[NSLayoutConstraint
        constraintsWithVisualFormat:@"V:[topLayoutGuide]-0-[_view1]-0-[_view2(==_view1)]-0-[bottomLayoutGuide]"
                            options:0
                            metrics:nil
                              views:viewsDict]]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-08T23:17:04.330

Mete 回答的 Swift 版本：

```
 override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view, typically from a nib.

    upperView.translatesAutoresizingMaskIntoConstraints = false

    var constraint = NSLayoutConstraint(item: upperView,
                                        attribute: NSLayoutAttribute.top,
                                        relatedBy: NSLayoutRelation.equal,
                                        toItem: self.view,
                                        attribute: NSLayoutAttribute.top,
                                        multiplier: 1,
                                        constant: 0)

    self.view.addConstraint(constraint)

    constraint = NSLayoutConstraint(item: upperView,
                                    attribute: NSLayoutAttribute.height,
                                    relatedBy: NSLayoutRelation.equal,
                                    toItem: self.view,
                                    attribute: NSLayoutAttribute.height,
                                    multiplier: 0.5,
                                    constant: 0)

    self.view.addConstraint(constraint)

    constraint = NSLayoutConstraint(item: upperView,
                                    attribute: NSLayoutAttribute.leading,
                                    relatedBy: NSLayoutRelation.equal,
                                    toItem: self.view,
                                    attribute: NSLayoutAttribute.leading,
                                    multiplier: 1,
                                    constant: 0)

    self.view.addConstraint(constraint)

    constraint = NSLayoutConstraint(item: upperView,
                                    attribute: NSLayoutAttribute.trailing,
                                    relatedBy: NSLayoutRelation.equal,
                                    toItem: self.view,
                                    attribute: NSLayoutAttribute.trailing,
                                    multiplier: 1,
                                    constant: 0)

    self.view.addConstraint(constraint)

} 
```

# iis - iis 7.5 重写为友好的 url 问题

> ID：14935831
> 
> 赞同：2
> 
> 时间：2013-02-18T12:01:59.543
> 
> 标签：iis, url-rewriting, iis-7.5, rewrite

我正在从 apache 迁移到 iis，并且遇到了 url 重写的问题。

我想要这样的所有请求：

```
http://192.168.0.44/aaa/bbb/ccc/testword 
```

查询这个不友好的网址：

```
http://192.168.0.44/aaa/bbb/ccc/index.php?word=testword 
```

所以我的 web.config 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
                    <match url="^192\.168\.0\.44/aaa/bbb/ccc/([^/]+)/?$" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="192.168.0.44/aaa/bbb/ccc/index.php?word={R:1}" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

但是当我访问这样的 url 时，我得到一个 404 not found 错误。细节：

```
Module  IIS Web Core
Notification    MapRequestHandler
Handler StaticFile
Error Code  0x80070002

Requested URL   http://192.168.0.44:80/aaa/bbb/ccc/testword
Physical Path   C:\inetpub\wwwroot\aaa\bbb\ccc\testword
Logon Method    Anonymous
Logon User  Anonymous 
```

我究竟做错了什么 ？

ps那里会有一个域而不是那个IP，只是我想先在本地测试它，然后再进行直播。

安装了重写模块2。我可以在 iis manager gui 中看到。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:24:54.913

我删除了这个位于顶层的重写规则，并以最简单的方式（没有长路径和 IP）在最深的文件夹（ ccc ）中实现它。它自动工作。

# active-directory - 使用 rfc2254 中指定的 objectGUID 编码的活动目录过滤器不起作用

> ID：14935832
> 
> 赞同：3
> 
> 时间：2013-02-18T12:02:01.000
> 
> 标签：active-directory, ldap, jndi, spring-ldap, active-directory-group

我正在使用 java ldap 访问活动目录，更具体地说是 spring ldap。当过滤器按照 rfc2254 中的指定进行编码时，按 objectGUID 进行的组搜索不会产生任何结果。

这是其十六进制表示形式的指南：

```
\49\00\f2\58\1e\93\69\4b\ba\5f\8b\86\54\e9\d8\e9 
```

spring ldap 像这样对过滤器进行编码：

```
(&(objectClass=group)(objectGUID=\5c49\5c00\5cf2\5c58\5c1e\5c93\5c69\5c4b\5cba\5c5f\5c8b\5c86\5c54\5ce9\5cd8\5ce9)) 
```

如[rfc2254](https://www.rfc-editor.org/rfc/rfc2254#page-5)和 microsoft [technet](http://social.technet.microsoft.com/wiki/contents/articles/5392.active-directory-ldap-syntax-filters.aspx#Special)中所述：

> 该字符必须编码为反斜杠 '' 字符 (ASCII 0x5c)，后跟表示编码字符的 ASCII 值的两个十六进制数字。两个十六进制数字的大小写无关紧要。块引用

所以反斜杠应该是 '\5c'

但我没有得到来自 AD 的上述过滤器的结果。另外，如果我将该过滤器放在 AD 管理控制台自定义过滤器中，它也不起作用。当我从过滤器中删除 5c 时，它可以在 java 和 AD 控制台中使用。

我在这里错过了什么吗？

当然，我可以在没有 5c 的情况下对过滤器进行编码，但我不确定它是否正确，我更喜欢让 spring 对过滤器进行编码，因为它知道很多我应该手动完成的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:44:52.397

我认为博客条目位于： http: [//www.developerscrappad.com/1109/windows/active-directory/java-ldap-jndi-2-ways-of-decoding-and-using-the-objectguid-from-windows -active-directory/](https://web.archive.org/web/20180226001713/http://www.developerscrappad.com/1109/windows/active-directory/java-ldap-jndi-2-ways-of-decoding-and-using-the-objectguid-from-windows-active-directory/)提供您需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-28T13:10:30.930

当我创建用户时，我找到了使用 php 获取具有 objectGUID etap 的用户的解决方案，我将他的 objectGuid 放在 bdd 中，您在广告 ex $guid_str = "31207E1C-D81C-4401-8356-33FEF9C8A"自己的函数来转换这个对象 id int hexadecimal

```
function guidToHex($guid_str){

$str_g= explode('-',$guid_str);

$str_g[0] = strrev($str_g[0]);
$str_g[1] = strrev($str_g[1]);
$str_g[2] = strrev($str_g[2]);

$retour = '\\';
$strrev = 0;
foreach($str_g as $str){
    for($i=0;$i < strlen($str)+2; $i++){
        if($strrev < 3)
            $retour .= strrev(substr($str,0,2)).'\\' ;
            else
                $retour .= substr($str,0,2).'\\' ;
                $str = substr($str,2);

    }
    if($strrev < 3)
        $retour .= strrev($str);
        else
            $retour  .= $str ;

            $strrev++;
}
return $retour; 
```

}

这个函数返回我一个字符串，如 \1C\7E\20\31\1C\D8\01\44\83\EF\9C\8A"\F9\ED\C2\7F 在这之后我把这个字符串放在我的过滤器和我得到用户

#

要获取 objectGuid 的格式，我使用我在互联网上找到的这个函数

```
function convertBinToMSSQLGuid($binguid)
{
    $unpacked = unpack('Va/v2b/n2c/Nd', $binguid);
    return sprintf('%08X-%04X-%04X-%04X-%04X%08X', $unpacked['a'], $unpacked['b1'], $unpacked['b2'], $unpacked['c1'], $unpacked['c2'], $unpacked['d']);
} 
```

我的意思是这种格式= 31207E1C-D81C-4401-8356-33FEF9C8A

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:51:00.937

传递一个字节数组，搜索应该可以工作。

# java - eclipse中检查样式的代码审查

> ID：14935833
> 
> 赞同：1
> 
> 时间：2013-02-18T12:02:01.943
> 
> 标签：java, eclipse

我正在使用**check style**审查我的代码。这是这个 ide 中的废物插件。

我不知道为什么我的代码总是显示`missing javadoc comment.`

即使我给出了正确的评论。

请问有什么方法可以以正确的方式查看代码。

**我可以制定自己的规则吗？**

**更新**

每一行都显示缺少 javadoc ...在发表评论之后

```
public class MyTest {

    /**
     * integer Variable I
     */
    public static int I = 10;

    /**
     * String Variable Name
     */
    public static String NAME = "XYZ";

    /**
     * Constructor
     */
    public MyTest() {
    }

    /**
     * Main method
     * @param args
     */
    public static void main(String[] args) {

        System.out.print(NAME+"\n"+I);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:14:43.377

您收到警告是因为缺少 javadoc 注释：示例

```
/**
 * Gets the distance between tw points.
 */
double getDistance(Point a, Point b); 
```

此注释不完整，因为未记录参数，但它是 checkstyle 将接受的最小值（在默认规则中）

课堂也必须这样做，有时也必须对领域进行。

您可以启用和禁用特定的检查样式规则，但首先尝试编写您的代码，以使默认规则（阳光检查）不会发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-17T18:02:23.037

您还需要在班级上方发表评论。

# c++ - 关于类设计异常处理的 C++ 帮助

> ID：14935835
> 
> 赞同：1
> 
> 时间：2013-02-18T12:02:11.830
> 
> 标签：c++, class, exception, exception-handling

我目前正在通过实现一个简单的地址簿应用程序来学习 C++ 并练习我的知识。
我从一个`Entry`类和一个`AddressBook`实现 STL Map 的类开始，以通过人员的姓氏访问条目。
现在我得到了以下代码：

```
Entry AddressBook::get_by_last_name(string last_name){
    if(this->addr_map.count(last_name) != 0){
        //What can I do here?
    } else {
        return addr_map[last_name];
    } 
```

在脚本语言中，我只会返回类似`-1, Error Message`（Python 中的列表）来指示函数失败。我不想抛出异常，因为它是应用程序逻辑的一部分。调用类应该能够通过在控制台上打印某些内容或打开消息框来响应请求。
现在我考虑通过在 Class 中引入某种 Invalid State 来实现 C++ 中的*脚本语言方法*`Entry`。但是在 C++ 中这不是不好的做法吗？会不会是我的全班设计不合适？我很感激任何帮助。请记住，我仍在学习 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:40:55.453

关于您的代码的一些快速说明：

```
if(this->addr_map.count(last_name) != 0){
    //What can I do here? 
```

你可能想要它的另一种方式：

```
if(this->addr_map.count(last_name) == 0){
    //handle error 
```

但你真正的问题在于：

```
return addr_map[last_name]; 
```

这里需要注意两点：

1.  for map 可以做两`operator[]`件事：如果元素存在，则返回它；如果元素不存在，它会`pair`使用指定的键和值的 default创建一个新的 (key,value) `constructor`。可能不是你想要的。但是，如果您`if`之前的陈述是正确的方式，那么后者将永远不会发生，因为我们会事先知道密钥存在。
    1.  在调用`count()`之前，您有效地告诉`map`尝试查找元素。通过调用`operator[]`，您是在告诉您`map`再次找到它。因此，您正在做两次工作来检索单个值。

一种更好（更快）的方法涉及迭代器和`find`方法：

```
YourMap::iterator it = addr_map.find(last_name); //find the element (once)
if (it == addr_map.end()) //element not found
{
    //handle error
}
return *it.second; //return element 
```

现在，**回到手头的问题**。如果`last_name`找不到怎么办？正如其他答案指出的那样：

*   最简单的解决方案是返回一个指针（如果没有找到则为 NULL）
*   使用`boost::optional`.
*   只需返回，`YourMap::iterator`但似乎您正试图向`map`用户“隐藏”，`AddressBook`所以这可能是一个坏主意。
*   `throw`一个`exception`。但是等等，现在您必须首先检查调用此方法是否“安全”（或`exception`在适当的时候处理）。此检查需要一个布尔方法，例如`lastNameExists`在调用之前必须调用该方法`get_by_last_name`。当然，然后我们回到方块 1。我们正在执行 2 次查找操作来检索单个值。它是安全的，但是如果您要进行大量调用，`get_by_last_name`那么这可能是一个使用不同解决方案进行优化的好地方（此外，可以说例外不是很有建设性：搜索不存在的东西有什么问题，嗯？）。
*   创建一个`dummy`成员来`Entry`表明这*不是一个真实的* `Entry`但那是非常糟糕的设计（难以管理、反直觉、浪费——你可以说出它的名字）。

如您所见，前两种解决方案是更可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:47:55.487

其他答案给出了各种方法，其中大多数是有效的。我还没有看到这个：

您可以添加具有**默认值**的第二个参数：

```
Entry AddressBook::get_by_last_name(string last_name, const Entry& default_value){
    if(this->addr_map.count(last_name) == 0){
        return default_value; 
    } else {
        return addr_map[last_name];
    } 
```

在这种特殊情况下，对于不存在的姓氏可能没有合理的默认值，但在许多情况下是有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:30:56.110

根据您的函数返回类型，抛出异常绝对是“正确”的 C++ 事情。

不过，您可能需要这样的功能来帮助您：

```
bool AddressBook::lastNameExists(const string &last_name)
{
    return addr_map.count(last_name) > 0;
} 
```

请注意，您当前的代码会“按值”返回条目，因此修改返回的条目不会更新地图。不知道这是意外还是设计...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T12:06:02.017

一个非常简单的选择是将返回类型更改为`Entry*`(or `const Entry*`)，然后如果找到则返回 Entry 的地址，否则返回 NULL。

如果您使用 Boost，您可以返回一个`boost::optional<Entry>`，在这种情况下您的成功代码将是相同的，但在未找到时您会说`return boost::none`. 这更漂亮，但与使用指针返回类型的作用大致相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T15:01:27.477

你可以做 std::map （和其他容器做的）。

您从搜索函数返回一个迭代器。
如果搜索未找到有用的值，则将迭代器返回到 end()。

```
class AddressBook
{
        typedef  <Your Container Type>  Container;
    public:
        typedef  Container::iterator   iterator;

        iterator get_by_last_name(std::string const& lastName) {return addr_map.find[lastName];}

        iterator end()                                         {return addr_map.end();}
}; 
```

您的通讯录是一个容器，如对象。
可能会在搜索中找不到项目，但它没有足够的上下文来包含错误处理代码（因为地址簿可以在很多地方使用，并且每个地方都有不同的错误处理想法）。

因此，您必须将未找到状态的测试从地址簿中移出。
就像“Python”一样，我们返回一个标记。在 C++ 中，这通常是 end() 的迭代器，调用代码可以检查并采取适当的操作。

```
 AddressBook&  ab = getAddressBookRef();
 AddressBook::iterator find = ab.get_by_last_name("cpp_hobbyist");
 if (find != ab.end())
 {
     Entity&  person *find;  // Here you have a reference to your entity.
     // you can now manipulate as you want.
 }
 else
 {
     // Display appropriate error message
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T12:41:16.583

除了每个姓氏可以有多个条目之外。

消除`getter`，您就解决了问题，或者至少将其转移到其他地方。

告诉`AddressBook`显示具有给定姓氏的人。如果没有，它什么也做不了。

```
AddressBookRenderer renderer;
AddressBook contacts;

contacts.renderSurnames("smith", renderer);
contacts.renderCompletions("sm", renderer);
//etc 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T12:18:41.563

在 C++ 中，您有几种方法可以表明您的函数中发生了问题。

您可以返回一个特殊值，调用代码会将其识别为无效值。如果函数应该返回一个指针，这可以是一个`NULL`指针，或者如果你的函数返回数组中的索引，则可以是一个负值，或者，在自定义类（例如你的`Entry`类）的情况下，你可以定义一个特殊`Entry::invalid`值或类似的东西可以通过调用函数检测到。

您的调用代码可能看起来像

```
if ( entryInstance->get_by_last_name("foobar") != Entry::invalid) 
{
  // here goes the code for the case where the name is valid
} else {
  // here goes the code for the case where the name is invalid
} 
```

另一方面，您可以使用 C++ 异常机制并使您的函数抛出异常。为此，您可以创建自己的异常类（或使用标准库中定义的一个，派生自`std::exception`）。您的函数将`throw`出现异常，并且您的调用代码必须使用`try`...`catch`语句来捕获它。

```
try
  {
    entryInstance->get_by_last_name("foobar")
  }
  catch (Exception e)
  {
    // here goes the code for the case where the name is invalid
  }
  // here goes the code for the case where the name is valid 
```

# javascript - jQuery（文档）.on（'焦点'）？

> ID：14935838
> 
> 赞同：5
> 
> 时间：2013-02-18T12:02:15.080
> 
> 标签：javascript, jquery, javascript-events

每当用户专注于点击输入时，我都想触发一个方法。我有以下代码：

```
jQuery(document).on('focus click', function(e){
        console.log("focused on " + $(e.target).attr('id'));
}); 
```

但每当我专注于一个元素时，它只会给出`focused on undefined`. 这段代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T12:03:02.367

[您使用on()](http://api.jquery.com/on/)错过了绑定事件中的输入选择器。

```
jQuery(document).on('focus click', 'input',  function(e){
        console.log("focused on " + $(e.target).attr('id'));
}); 
```

> *on()* .on( events [, selector ] [, data ], handler(eventObject) ) 的语法，[参考](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T12:03:40.033

尝试：

```
$(document).on('focus click', 'input',  function(e){
        console.log("focused on " + e.target.id);
}); 
```

也`e.target.id`够了。。

# laravel - Laravel 4：如何获取环境值？

> ID：14935846
> 
> 赞同：54
> 
> 时间：2013-02-18T12:02:29.233
> 
> 标签：laravel, laravel-4

我知道我可以使用全局`$env`变量访问环境值，但是有没有*正确的方法*来获取这个值？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-18T16:43:16.850

你很幸运 -[这是刚刚在 Beta 4 中添加的 - 请参阅此处了解详细信息](https://github.com/laravel/framework#beta-4)

> 添加了 App::environment 方法。

**编辑：**这些现在是从 Laravel 4.1 开始获取环境变量的多种方法

```
App::environment()
app()->environment()
app()->env
$GLOBALS['env'] // not recommended - but it is possible 
```

您还可以专门检查当前环境是否设置为“本地”

```
App::isLocal()
app()->isLocal() 
```

您还可以专门检查当前环境是否设置为“测试”

```
App::runningUnitTests()
app()->runningUnitTests() 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-24T01:12:18.003

您也可以使用`app()->env`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-06-24T20:19:20.423

在 Laravel 4 和 5 中，[Laravel 官方文档](http://laravel.com/docs/configuration#environment-configuration)建议使用：

```
$environment = App::environment(); 
```

> 您还可以将参数传递给 environment 方法以检查环境是否与给定值匹配：

```
if (App::environment('local'))
{
    // The environment is local
}

if (App::environment('local', 'staging'))
{
    // The environment is either local OR staging...
} 
```

# browser - 是否有任何可用于 WinRT 的嵌入式浏览器？

> ID：14935851
> 
> 赞同：0
> 
> 时间：2013-02-18T12:02:48.893
> 
> 标签：browser, windows-runtime, windows-store-apps

支持 IE 作为浏览器的 html + css 标准困难转化为将其用作 WebView 控件的一部分，其中对功能有进一步的限制。

其他困难包括：

***它呈现在 XAML 之上*** - 如果您的页面上有动态内容，则使用推荐的 WebViewBrush 方法不是有效的方案。

***它不支持 HTML5***

***您无法访问内容***

***您无法访问内容*** - 尝试使用它来调试问题几乎是不可能的。

是否有任何替代的可嵌入浏览器可用或正在开发中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:08:17.573

为了回答您的问题，我认为 Jim 是正确的，没有其他可嵌入的浏览器可用，这不是我希望看到的。

我还建议您查看[Windows 应用商店认证要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)，因为许多可能适用于这种情况，包括：

*   2.4 “您的应用程序提供的主要体验必须发生在应用程序内”（而不是来自网络）
*   3.6 “您的应用必须完全支持触摸输入，并且完全支持键盘和鼠标输入”，其中涵盖了对触摸的要求，包括需要您的应用的触摸支持与 Windows 8 触摸语言保持一致。

虽然跨平台重用内容显然很有吸引力，但同样重要的是要记住，这可能会导致最终用户体验下降。如果这些体验与 Windows 应用商店应用的既定行为相去甚远，它们也可能导致您的应用未能通过商店认证。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# java - java中的C# Type.GetType() 是否有任何等效的语法

> ID：14935858
> 
> 赞同：0
> 
> 时间：2013-02-18T12:03:09.933
> 
> 标签：java

`Type.GetType()`请让我知道java 中是否有 C# 的等效语法。

和java中的等效语法`Activator.CreateInstance()`。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:16:36.060

***Type.GetType() 等效***

使用[Object.getClass()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#getClass%28%29)或`instanceof`

***Activator.CreateInstance() 等效***

如果一个类有一个无参数的构造函数，那么从它的包限定类名创建一个对象通常是使用[Class.forName](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#forName%28java.lang.String%29)和[Class.newInstance](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#newInstance%28%29)完成的，如下所示

```
 Class clazz = Class.forName("test.Demo");
 Demo demo = (Demo) clazz.newInstance(); 
```

如果类 dosent 没有参数构造函数，则必须使用反射，如下所示

```
Class<?> clazz = Class.forName(className);
Constructor<?> ctor = clazz.getConstructor(String.class);
Object object = ctor.newInstance(new Object[] { ctorArgument }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:07:23.207

您可能会实现类似使用 Java 反射的功能

```
Class c - object.getClass();

object.getClass().getConstructors()[0].newInstance(initargs); 
```

# ffmpeg - ffplay 搜索功能

> ID：14935859
> 
> 赞同：1
> 
> 时间：2013-02-18T12:03:15.810
> 
> 标签：ffmpeg

我试图弄清楚在 ffplay 中使用左/右箭头的搜索功能是如何工作的但经过几次尝试后，我发现使用左箭头或右箭头后的电影位置并没有完全移动到我指定的值。

例如，如果我使用默认值 10，并且电影是在 00:10:00，在按下假设将电影移动到 00:20:00 的右箭头后，我得到类似 00:21:35 的内容不是恒定的。

我在各种电影上都试过了，每次都得到不同的结果。

有人知道我在做什么错吗？或者可以解释一下 ffplay 中的 seek 是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T07:58:17.300

视频搜索精度取决于多种因素，但主要是 PTS、DTS 和 GOP Length。GOP（图片组）以 I 帧（或固定图片）开始。当您寻找时，它可能只是试图找到 PTS（演示时间戳）大于 20 的最接近的 I 帧。更复杂的是，并非所有视频都有固定的 GOP 长度（也称为封闭 GOP），因此寻找 10不同位置的秒数并不总是增加 11.35 秒。

在 GOP 上查看这篇文章 [http://en.wikipedia.org/wiki/Group_of_pictures](http://en.wikipedia.org/wiki/Group_of_pictures)

# javascript - jQuery 找不到元素

> ID：14935861
> 
> 赞同：0
> 
> 时间：2013-02-18T12:03:24.403
> 
> 标签：javascript, jquery

我有这个js代码：

```
(function($, undefined) {
    $("a").click(function(event) { //or another elemtnt
        alert('Hello!');
    })
})(jQuery); 
```

当然还有链接：

```
<a href="http://google.ru/" target="_blank">Google</a> 
```

JS代码不起作用，但是如果我将其更改为：

```
(function($, undefined) {
    $("*").click(function(event) {
        alert('Hello!');
    })
})(jQuery); 
```

一切正常！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:07:26.667

如果您在`a`加载节点之前放置了 JavaScript，则效果将与您描述的一样。试试这个：

```
$(function () {
    $("a").click(function(event) { //or another elemtnt
        alert('Hello!');
    })
}); 
```

这将在 DOM 树准备好时调用匿名函数。这是[**JSFiddle**](http://jsfiddle.net/ttMHC/3/)中的一个示例。

当您使用`*`作为选择器时，jQuery 会向`html`元素添加点击处理程序，这就是您收到警报的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:09:36.560

为什么不尝试使用 document.ready？

```
$(document).ready( function (){
    $('a').click(function (){
        alert("a");
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T12:09:23.727

这是一个可能的解决方案：

```
$(document).ready(function() {
    // put all your jQuery goodness in here.
}); 
```

你为什么不给它一个ID并选择`$('#my-id')`设置事件？

# requirejs - 我的要求配置有什么问题

> ID：14935862
> 
> 赞同：2
> 
> 时间：2013-02-18T12:03:25.120
> 
> 标签：requirejs

我正在使用 require.js，一切都是正确的。我在文档中看到了 js 加载。在安慰的情况下，我得到了除 Backbone 之外的所有参数。为什么 Backbone 没有登录到控制台？

这是我的代码：

```
 requirejs.config({
        baseUrl : "scripts",
        paths   : {
                    "jquery"    :"lib/jquery-min",
                    "loDash"    :"lib/lodash-min",
                    "backBone"  :"lib/backbone-min" 
                        //this is exist load in document header, not console
                  }
    });

    require(["jquery","loDash","backBone"], function($,_,bB){
        console.log($,_,bB);//jquery, underscore console correctly.
// 3rd one "bB" - stand for backbone, it console as undefined - why?

    }); 
```

我在文档上加载了所有 js，包括 Backbone。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:40:34.103

我添加了垫片，它工作正常。

```
requirejs.config({
    baseUrl : "scripts",
    paths   : {
                "jquery"    :"lib/jquery-min",
                "loDash"    :"lib/lodash-min",
                "backBone"  :"lib/backbone-min"
              },
    shim    : {
                  "backBone":{
                    deps    :["loDash"],
                    exports :"Backbone"
                  }
              }
});

require(["jquery","loDash","backBone"], function ($,_,bB) {
    console.log($,_,bB);
}); 
```

# android - 如何使用android中录制视频的URI在我自己的媒体播放器上播放我录制的视频？

> ID：14935863
> 
> 赞同：2
> 
> 时间：2013-02-18T12:03:31.567
> 
> 标签：android, camera, media-player

我的应用程序使用手机摄像头录制视频，并将视频的 URI 添加到字符串类型的 ArrayList 中，这是我在列表中添加视频 URI 的代码。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
        {
            super.onActivityResult(requestCode, resultCode, data);

            if (resultCode == RESULT_OK)
            {
                if (requestCode == REQUEST_VIDEO_CAPTURED) 
                {
                    uriVideo = data.getData();

                    cameraVideoList.add(uriVideo.toString());
                    adapter.notifyDataSetChanged();
                }
            }
        } 
```

我将视频 URI 传递`(content://media/external/video/media/60)`给我的媒体播放器以播放录制的视频，但媒体播放器不播放视频。这是我的媒体播放器的代码。

```
public class PlayVideoCamera extends Activity 
{
    private static ProgressDialog progressDialog;
    VideoView videoView ;

    String videoURI =null;

    protected void onCreate(Bundle savedInstanceState)
    {

          super.onCreate(savedInstanceState);

            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); // Fixed
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); // orientation

            setContentView(R.layout.videoview);

            videoView = (VideoView) findViewById(R.id.video_view);

                Bundle bundle = getIntent().getExtras();
                videoURI= bundle.getString("VideoURI");

                progressDialog = ProgressDialog.show(PlayVideoCamera.this, "", "Loading...",true);
                progressDialog.setCancelable(true); 

                PlayVideo();

 //        setContentView(videoView);
    }
    private void PlayVideo()
    {
          try
          {    
                getWindow().setFormat(PixelFormat.TRANSLUCENT);
                MediaController mediaController = new MediaController(PlayVideoCamera.this);
                mediaController.setAnchorView(videoView);         

               // Toast.makeText(getApplicationContext(), "Video:\t"+videoIndex, Toast.LENGTH_LONG).show();

                Uri video = Uri.parse(videoURI);           
                videoView.setMediaController(mediaController);

                videoView.setVideoURI(video);
                videoView.requestFocus();            
                videoView.setOnPreparedListener(new OnPreparedListener()
                {

                      public void onPrepared(MediaPlayer mp)
                      {                 
                            progressDialog.dismiss();   
                            videoView.start();
                      }
                });

          }
          catch(Exception e)
          {
                progressDialog.dismiss();
                System.out.println("Video Play Error :"+e.toString());
                finish();
          } 

    }

} 
```

请帮我播放我录制的视频，我将非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:12:15.990

URI 包含协议名称而不是“内容”关键字。您可以尝试 file:// 或通过 Internet http:// 流式传输

试试这个 URI file:///media/external/video/media/60

# java - JSON - 是否有任何 XML CDATA 等价物？

> ID：14935866
> 
> 赞同：37
> 
> 时间：2013-02-18T12:03:42.763
> 
> 标签：java, json, .net-4.0, cdata

我正在寻找一种 json 解析将按原样获取信息的方式（就像它是 CDATA 一样） - 而不是尝试序列化它。我们同时使用 .net 和 java（客户端和服务器）——所以答案应该是关于 JSON 结构 有没有办法实现这种结构？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T12:16:32.077

JSON 中没有等效的 XML CDATA。但是您可以使用 base64 之类的方法将消息编码为字符串文字。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1443158/binary-data-in-json-string-something-better-than-base64)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-25T09:00:48.457

这是上述拉曼建议的发展。

我喜欢 JSON 格式，但有两件事我希望能够用它做而不能做：

1.  使用文本编辑器将一些任意文本粘贴到值中
2.  如果 XML 包含 CDATA 部分，则在 XML 和 JSON 之间进行透明转换。

该线程与这两个问题密切相关。

我建议通过以下方式克服这个问题，这不会破坏 JSON 的正式定义，我想知道如果我这样做是否会存储任何问题？

1.  定义一个与 JSON 兼容的字符串格式，如下所示：

    `"<![CDATA[ (some text, escaped according to JSON rules) ]]>"`

2.  用我最喜欢的编程语言编写一个 Unescape 例程，它将`<![CDATA[ and ]]>`. 这将在向我的文本编辑器提供任何 JSON 文件之前调用。

3.  `<![CDATA[ and ]]>`编写补充例程以在编辑文件后调用，该例程根据 JSON 规则重新转义两者之间的任何内容。

然后，为了将任意数据粘贴到文件中，我需要做的就是在 JSON 字符串中键入任意数据的开始和结束信号 `<![CDATA[ before and ]]>`。

这是在 Python3 中在文本编辑之前和之后调用的例程： lang-python3

```
escape_list = {
    8 : 'b',
    9 : 't',
    10: 'n',
    12: 'f',
    13: 'r',
    34: '"',
}   #List of ASCII character codes to escape, with their escaped equivalents

escape_char = "\\"  #this must be dealt with separately
unlikely_string = "ZzFfGgQqWw"

shebang = "#!/json/unesc\n"
start_cdata = "<![CDATA["
end_cdata = "]]>"

def escapejson(json_path):

    if (os.path.isfile(json_path)): #If it doesn't exist, we can't update it
        with open(json_path) as json_in:
            data_in = json_in.read()   #use read() 'cos we're goint to treat as txt
        #Set direction of escaping
        if (data_in[:len(shebang)] == shebang):   #data is unescaped, so re-escape
            data_in = data_in[len(shebang):] 
            unescape = False
            data_out = ""
        else:
            data_out = shebang
            unescape = True 

        while (data_in != ""):  #while there is still some input to deal with
            x = data_in.find(start_cdata)
            x1 = data_in.find(end_cdata)
            if (x > -1):    #something needs escaping
                if (x1 <0):
                    print ("Unterminated CDATA section!")
                    exit()
                elif (x1 < x):  #end before next start
                    print ("Extra CDATA terminator!")
                    exit()
                data_out += data_in[:x]
                data_in = data_in[x:]
                y = data_in.find(end_cdata) + len(end_cdata)
                to_fix = data_in[:y]    #this is what we're going to (un)escape
                if (to_fix[len(start_cdata):].find(start_cdata) >= 0):
                    print ("Nested CDATA sections not supported!")
                    exit()
                data_in = data_in[y:]   #chop data to fix from front of source
                if (unescape):
                    to_fix = to_fix.replace(escape_char + escape_char,unlikely_string)
                    for each_ascii in escape_list:
                        to_fix = to_fix.replace(escape_char + escape_list[each_ascii],chr(each_ascii))
                    to_fix = to_fix.replace(unlikely_string,escape_char)
                else:
                    to_fix = to_fix.replace(escape_char,escape_char + escape_char)
                    for each_ascii in escape_list:
                        to_fix = to_fix.replace(chr(each_ascii),escape_char + escape_list[each_ascii],)
                data_out += to_fix
            else:
                if (x1 > 0):
                    print ("Termination without start!")
                    exit()
                data_out += data_in
                data_in = ""

        #Save all to file of same name in same location
        try:
            with open(json_path, 'w') as outfile:
                outfile.write(data_out)
        except IOError as e:
            print("Writing "+ json_path + " failed "+ str(e))
    else:
        print("JSON file not found") 
```

对以下合法 JSON 数据进行操作

```
{
    "test": "<![CDATA[\n We can put all sorts of wicked things like\n \\slashes and\n \ttabs and \n \"double-quotes\"in here!]]>"
} 
```

...将产生以下内容：

```
#!/json/unesc
{
    "test": "<![CDATA[
 We can put all sorts of wicked things like
 \slashes and
    tabs and 
 "double-quotes"in here!]]>"
} 
```

在这种形式中，您可以在标记之间粘贴任何文本。再次调用例程会将其更改回原始的合法 JSON。

我认为这也可以在使用 CDATA 区域转换为 XML 或从 XML 转换时起作用。（接下来我要试试！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T02:00:36.143

您可以创建 YAML 文件并转换为 JSON。例如：

测试.yaml

```
storage:
  files:
  - filesystem: root
    path: /etc/sysconfig/network/ifcfg-eth0
    mode: 644
    overwrite: true
    contents:
      source: |
        data:,
        IPV6INIT=yes
        IPV6_AUTOCONF=yes 
```

...然后运行`yaml2json_pretty`（稍后显示），如下所示：

```
#!/bin/bash

cat test.yaml | yaml2json_pretty > test.json 
```

...产生：

测试.json

```
{
  "storage": {
    "files": [
      {
        "filesystem": "root",
        "path": "/etc/sysconfig/network/ifcfg-eth0",
        "mode": 644,
        "overwrite": true,
        "contents": {
          "source": "data:,\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\n"
        }
      }
    ]
  }
} 
```

这是 yaml2json_pretty 的源代码：

```
#!/usr/bin/env python3

import sys, yaml, json
print(json.dumps(yaml.load(sys.stdin.read(),Loader=yaml.FullLoader), sort_keys=False, indent=2)) 
```

更多与此类似的技巧：http `yaml2json_pretty`: [//github.com/frgomes/bash-scripts](http://github.com/frgomes/bash-scripts)

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2013-02-18T12:14:52.067

[http://www.json.org/](http://www.json.org/)详细描述了 JSON 格式。根据它，JSON 不支持“类似于 CDATA”的值类型。

要实现 CDATA 结构，您可以应用自定义逻辑来处理基于字符串的值（并且对于 .net 和 java 实现都以相同的方式进行）。例如

```
{ 
  "type" : "CDATA",
  "value" : "Value that I will handle with my custom logic on java and .net side"
} 
```

# php - PDO 提取语句问题

> ID：14935867
> 
> 赞同：0
> 
> 时间：2013-02-18T12:03:47.107
> 
> 标签：php, mysql, pdo

我的簿记应用程序有以下 PHP。它使用 PDO。

```
if (isset($_POST['lesson'])AND isset($_POST['page']))
{
   try {
      $options_pdo[PDO::ATTR_ERRMODE]=PDO::ERRMODE_EXCEPTION ;
      $DB= new PDO('mysql:host=localhost;dbname=mydb','jamie','admin',$options_pdo);
      $statement=$DB->query("SELECT data FROM teach_books where lesson=".$_POST['lesson']."AND page=".$_POST['page'] );

      while($results = $statement->fetch()){
         $results['data'];
         echo "<br>";
      }

   } catch(Exception $e) {
    die ('ERROR: '.$e->getMessage());
    exit;
  }

} 
```

但是，当我运行代码时，它会显示以下错误：

```
ERROR: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'page=dsas' at line 1 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:06:56.957

有几件事：

**1) 不要插入原始查询字符串：** 此代码极易受到 SQL 注入的影响。PDO 有一个称为“准备好的语句”的功能。这是你应该为你的 SQL 查询使用的 waht。不要只在查询字符串中注入一些 POST 参数，因为结果将是一个安全漏洞。您意外插入到查询中的引号很可能来自尝试 SQL 攻击的恶意用户。

**2)** 缺少空格：在 AND 之前有一个空格。解析器不知道如何理解术语 2AND，因此会产生错误。itemslf 的 SQL 扩展为类似的东西。

```
SELECT data FROM teach_books where lesson=2AND page=24; 
```

**3) 缺少引号：** 如果您要使用上述内容，则需要在查询末尾添加一些右引号。您还需要在选择中提供的字符串参数周围加上引号。

**4）ECHO DATA：** 你实际上并没有在循环中打印出任何东西。简单地在 PHP 中放置一个语句不会将其打印出来。你需要 echo 命令。

```
echo $results['data']; 
```

**5) 迭代对象：** 您不需要继续调用 fetch()，您可以使用 fetchAll() 然后迭代该结果集。实际上，除非您只需要数组中的行，否则您不应该调用任何“获取”方法。结果集对象是可迭代的并且可以循环。

```
$statement->execute(); 
foreach ($statement as $row) { 
    ... 
} 
```

**6) TRY-CATCH：** 您可能会删除“try-catch”代码，因为您在里面所做的事情就是异常会做的事情。

此外，我希望“管理员”不是您的实际密码。

很抱歉一直在补充我的答案。只是想自己发布 6 点，然后对其进行扩展。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:06:51.323

```
ERROR: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'page=dsas' at line 1 
```

问题可能是因为您没有为该值添加引号：

```
".... page='".$_POST['page']."'" 
```

字符串总是需要引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:06:35.343

你的SQL错了，试试看：

```
$statement=$DB->query("SELECT data FROM teach_books where lesson='".$_POST['lesson']."'AND page='".$_POST['page']."'" ); 
```

您正在比较字符串值，因此您需要在 sql 查询中使用 '' 。

# .net - 在 C# 中验证 XSD，就好像它是一个 XML：不给出预期的警告

> ID：14935868
> 
> 赞同：2
> 
> 时间：2013-02-18T12:03:51.603
> 
> 标签：.net, xml, visual-studio, xsd, xsd-validation

**短篇小说：**

我想在代码中使用 XSD 架构验证 XSD 文件（所有 XSD 本身都是 XML），并获得与 Visual Studio 在其（xml 作为文本）编辑器中打开相同 XSD 文件时显示的相同警告或错误。

Visual Studio 在其 xml 编辑器中显示警告（见下文）。

我的问题是，在代码中完成的验证是 100% 成功的。没有警告，什么都没有。我错过了什么？

**长篇大论：**

XSD 文件根据定义是一个 XML 文件，因此我正在使用针对 W3C xsd 模式的 XML 验证来验证我的自定义 XSD。

这是要验证的 XSD 和 VS 2010 显示的警告：（
单击 img 放大）

[![XML 警告](../Images/7f26ad4e16b8da5a4a602e59bbd99454.png)](https://i.stack.imgur.com/JfHGD.png)

为了避免你眯眼，这里有一些警告：

> 通配符“##any”允许元素“Com.Example.Config:permissionConfig”，并导致内容模型变得不明确。必须形成一个内容模型，以便*[... tl;dr]*

这是我的自定义 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema 
    xmlns:tns="Com.Example.Config" 
    elementFormDefault="qualified" 
    targetNamespace="Com.Example.Config" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="Com.Example.Config.PermissionConfigCT" />
  <xs:complexType name="Com.Example.Config.PermissionsCT">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="permissionConfig" type="tns:Com.Example.Config.PermissionConfigCT" />

      <!-- next line triggers the warning -->
      <xs:any minOccurs="0" processContents="lax" />

    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

检查 VS 用于验证的模式（从菜单 XML -> 模式）显示它正在使用：

*   `xsdschema.xsd`（FWIW，它源自[W3C 的 XSD 原始模式](http://www.w3.org/2001/XMLSchema.xsd)，*没有*DTD 部分）
*   `xml.xsd`（在上一个 xsd 中引用，由一个 relative `include`）

这两个文件都驻留在（在我的机器上）这里：

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\xml\Schemas`

我将它们都复制到与可执行文件相同的目录中，以便于参考。

为了完整起见，以下是`xsdschema.xsd`定义其命名空间的方式：

```
<xs:schema 
  targetNamespace="http://www.w3.org/2001/XMLSchema" 
  blockDefault="#all" 
  elementFormDefault="qualified"  
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xml:lang="EN" version="1.0"
  xmlns:vs="http://schemas.microsoft.com/Visual-Studio-Intellisense">

  <xs:import namespace="http://www.w3.org/XML/1998/namespace"/>

  <xs:complexType name="openAttrs">
  [...] 
```

...所以我继续编写了一些快速验证代码，使用与 VS 相同的 XSD。这是代码：

```
var configXsdPath = "XMLFile1.xml"; 
  //that's my custom XSD file, don't let the extension fool you

var xmlSchemaForXsdPath = "xsdschema.xsd";

var settings = new XmlReaderSettings
    {
        ValidationType = ValidationType.Schema,
        ValidationFlags = XmlSchemaValidationFlags.ReportValidationWarnings
                        | XmlSchemaValidationFlags.ProcessSchemaLocation
                        | XmlSchemaValidationFlags.ProcessIdentityConstraints
    };

using (var tr = XmlReader.Create(xmlSchemaForXsdPath))
{
    settings.Schemas.Add(XmlSchema.Read(tr, (i_sender, i_args) 
      => {throw new InvalidOperationException(
                 "The validating XSD is itself invalid");} ));
}

settings.ValidationEventHandler += (i_sender, i_args) 
  => { throw new Exception(i_args.Message); };

var reader = XmlReader.Create(configXsdPath, settings);
while (reader.Read())
//parse it all
{ } 
```

...并且没有任何异常弹出...

*更新*接下来我尝试提供完全无效的 XML：我在自定义 XSD 中的某处添加了这个元素：

```
<aaa!></aaa> 
```

并且代码给出了预期的错误*：

> [命名空间“ http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ”中的元素“模式”具有无效的子元素“aaa”。[预期的可能元素列表：名称空间“ http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ”中的“simpleType、complexType、组、attributeGroup、元素、属性、符号、注释” 。

--

*   我曾简要说明过添加无效 XML 不会产生任何错误。那是[PEBKAC](http://www.urbandictionary.com/define.php?term=pebkac)的一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:34:51.330

来自Petru Gardea的[回答的深刻见解](https://stackoverflow.com/a/14948129/11545)中获得了深刻的见解：仅在验证时将 XSD 视为 XML，因此将其视为 XSD，而不是（或除此之外）！

就这么简单：

```
var schemas = new XmlSchemaSet();
using (var tr = XmlReader.Create(xsdPath))
{
    schemas.Add(null, tr);
              //null means 'use the target namespace specified in the XSD'
}
//schemas.CompilationSettings.EnableUpaCheck = true; //it's true by default

schemas.Compile(); 
```

运行上面的代码会抛出`XmlSchemaException`Visual Studio 给出的确切描述：

> System.Xml.Schema.XmlSchemaException：通配符“##any”允许元素“Com.Example.Config:permissionConfig”，并导致内容模型变得不明确。必须形成一个内容模型，使得在元素信息项序列的验证过程中，直接、间接或隐含地包含在其中的粒子，用于依次尝试验证序列中的每个项目，可以唯一地确定，而无需检查其内容或属性。该项目，并且没有关于序列其余部分中的项目的任何信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T01:03:48.457

简而言之，你试图`next line triggers the warning`通过验证你的 XSD来实现 - 你的验证器 -`W3C xsd schema`永远不会工作。这就是所谓的[Unique Particle Attribution](http://www.w3.org/wiki/UniqueParticleAttribution)，这是 XSD 语言无法描述的。问题是，这只是开始；您最终使用的 XSD 功能越多，您提议的验证就越不可靠。

如果您真的想验证 XSD，至少在 .NET 上，请使用[XmlSchemaSet](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)。要打开和关闭 UPA 检查，您[就是](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemacompilationsettings.enableupacheck.aspx)这样做的。

# svn - SVN 提交什么也不做

> ID：14935874
> 
> 赞同：2
> 
> 时间：2013-02-18T12:04:14.343
> 
> 标签：svn, ubuntu-12.04

我在 Ubuntu 12.04 上安装了一个 svn repo，需要从 mac 和 windows 客户端使用 svn。我按照[本指南](https://help.ubuntu.com/community/Subversion)使用自定义 svn:// 协议运行 svn，并且可以成功签出我的 repo。结帐时服务器不要求任何身份验证???

在 mac 客户端 - 命令行 - 我提交，它应该说

```
$ svn commit -m "edit 3 svn test"
Sending        a
Transmitting file data .
Committed revision 3. 
```

但这就是实际发生的情况：

```
$ svn commit -m "added howto section." 
```

没有什么。svn 日志不表示任何更新。

如果我询问 svn 状态，我会得到我复制到本地工作副本并需要更新的所有目录的完整列表，但这些目录中没有文件：

```
$ svn status
?       app/Plugin/Metrics/Test
?       app/Plugin/Metrics/Model
?       app/Plugin/Metrics/Console
?       app/Plugin/Metrics/Controller
?       app/Plugin/Metrics/Config
?       app/Plugin/Metrics/Lib
?       app/Plugin/Metrics/View 
```

这 '？' 表示所有这些列出的目录都不受版本控制。但是，没有列出更改的文件。为了清楚起见 - 上面列出的这些目录中的大多数都包含我想要添加或提交到 repo 中的新文件。这些文件没有列出，只有目录。

如果我尝试“svn add”这些目录之一，具体来说，我得到

```
$ svn add app/Plugin/Metrics/Model
svn: warning: 'app/Plugin/Metrics/Model' is already under version control 
```

如果我手动尝试“svn add”一个我复制到本地工作副本中的这些目录之一的文件，我会得到

```
svn add app/Plugin/Metrics/Controller/MetricsMetricsController.php 
svn: warning: 'app/Plugin/Metrics/Controller/MetricsMetricsController.php' is already under version control 
```

如果我手动尝试提交同一个文件，我会得到

```
 svn ci app/Plugin/Metrics/Controller/MetricsMetricsController.php 
```

没有什么。客户端没有来自 svn 的反馈。我在前台的 ubuntu 盒子上运行 svnserve，看看它是否给了我任何调试信息，但它也没有显示任何内容。

```
svnserve -d --foreground -r /galaxypool/svn 
```

令人沮丧的问题。任何想法如何让 SVN 提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:18:50.627

我最终做了以下事情： - 将我的新目录树从本地工作副本移动到桌面。- 发布：

```
svn delete app/Plugin/Metrics
D         app/Plugin/Metrics 
```

然后提交 - 这从 repo 中删除了损坏的 Metrics 文件夹：

```
svn commit -m "delete metrics"
Deleting       app/Plugin/Metrics

Committed revision 16. 
```

然后我去了我的目录树并删除了所有隐藏的“.svn”文件夹，并将树复制回本地工作集。svn 状态 说

```
svn status
?       wezwa
?       app/Plugin/Metrics 
```

然后我使用 svn add 再次添加了树：

```
svn add app/Plugin/Metrics/
A         app/Plugin/Metrics
A         app/Plugin/Metrics/Config
A         app/Plugin/Metrics/Config/bootstrap.php
A         app/Plugin/Metrics/Config/cache.php ...etc 
```

并提交：

```
svn commit -m "upload metrics"
Adding         app/Plugin/Metrics
Adding         app/Plugin/Metrics/Config
Adding         app/Plugin/Metrics/Config/Schema
...etc 
```

从windows系统测试，它工作。这些文件在 repo 中是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:08:18.330

您首先需要为版本控制添加新文件。例如：

```
svn add app/Plugin/Metrics/Test 
```

之后，提交会导致这些文件置于版本控制之下。

但是，在处理另一个客户端之前，您需要在那里更新工作副本。

```
svn update 
```

这将为您提供存储库的实际状态。如果文件已在本地存在，您将遇到冲突。你将不得不以某种方式解决这些冲突。

**编辑**：由于手动移动 .svn 目录，您似乎有一个损坏的工作副本。尝试再做一遍；从存储库的全新工作副本开始。将要包含在新工作副本中的目录导出（而不是签出）并将它们复制过来。

请记住，这不是最好的做法；您可以使用外部与另一个存储库相关联，或者如果您需要更改某些内容，请使用“供应商分支”（如此处所述：http: [//svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr。 html](http://svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr.html) )

# c# - 用于 UID 和 MessageSize 列表的 IMAP 命令

> ID：14935879
> 
> 赞同：0
> 
> 时间：2013-02-18T12:04:35.493
> 
> 标签：c#, .net, imap

在 ac# .net 应用程序中编写一小部分 IMAP 功能，基本上列出了所有 UIDS 及其相应的消息大小。我查看了 IMAP RFC，但找不到获取此信息的理想解决方案。

我的做法：

1.  我使用 UID SEARCH ALL 的组合来给我所有的 UIDS，这很快。
2.  然后我尝试获取所有标题并从中读取大小。

第 2 步，太慢了 - 下载整个标题似乎有点傻，只是为了获取消息大小。

是否有一个简单和/或快速的解决方案可以在单个命令中获取 UIDS 列表和相应的消息大小？如果没有，是否有更快的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:16:03.887

IMAP 服务器在 fetch 命令中提供了各种选项，您也可以使用以下命令来获取邮件大小和相应的 uid

> a1 获取 uid 1:* RFC822.SIZE

更多参考： [https ://www.rfc-editor.org/rfc/rfc3501#section-6.4.5](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.5)

# r - R中的彩色点

> ID：14935885
> 
> 赞同：1
> 
> 时间：2013-02-18T12:04:57.263
> 
> 标签：r, plot

我有一个包含 3 个数字列的表格。其中两个是坐标，第三个是颜色。我的文本文件中有数百行。我想制作一张图片，其中第一个数字表示每个点的坐标，第三个是该点的颜色。较大的数字 - 较暗的点。我怎么能这样做？我的文件中的行示例：

```
99.421875   48.921875   0.000362286050144 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:38:44.657

Will this do?

```
require(ggplot2)
# assuming your data is in df and x,y, and col are the column names.
ggplot(data = df, aes(x = x, y = y)) + 
           geom_point(colour="red", size = 3, aes(alpha=col))

# sample data

set.seed(45) 
df <- data.frame(x=runif(100)*sample(1:10, 100, replace=T), 
                 y= runif(100*sample(1:50, 100, replace=T)), 
                 col=runif(100/sample(1:100))) 
```

Plot:

![ggplot2_alpha](../Images/62638612595d65fba58fe570d5c1f6d6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:19:22.873

一个`lattice`解决方案：

```
library(lattice)
mydata <- matrix(c(1,2,3,1,1,1,2,5,10),nrow=3)
xyplot(mydata[,2] ~ mydata[,1], col = mydata[,3], pch= 19 , 
                           alpha = (mydata[,3]/10), cex = 15) 
```

`alpha`这里控制透明度。

![在此处输入图像描述](../Images/792421277c06329c37c9884ebd538721.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:46:18.340

这是一个基本的 R 解决方案：

```
##Generate data
##Here z lies between 0 and 10
dd = data.frame(x = runif(100), y= runif(100), z= runif(100, 0, 10)) 
```

首先归一化 z：

```
dd$z = dd$z- min(dd$z)
dd$z = dd$z/max(dd$z) 
```

然后使用 z 的大小正常绘制阴影：

```
##See ?gray for other colour combinations
##pch=19 gives solid points. See ?point for other shapes 
plot(dd$x, dd$y, col=gray(dd$z), pch=19) 
```

![在此处输入图像描述](../Images/b5092c60c67f3076d811c7e7a603c42d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:47:18.280

另一种使用 base... 更改颜色的解决方案，您可以将一些 data[,3] 替换为 0 内`rgb()`

```
n <- 1000
data <- data.frame(x=runif(n),y=runif(n),col=runif(n))
plot(data[,1:2],col=rgb(data[,3],data[,3],data[,3],maxColorValue = max(data[,3])),pch=20) 
```

# android - 如何通过蓝牙从Android内部存储发送文本文件

> ID：14935886
> 
> 赞同：1
> 
> 时间：2013-02-18T12:04:59.057
> 
> 标签：android, bluetooth, share

我在内部存储中创建了一个文本文件，我想通过蓝牙与配对设备共享该文件。

我怎样才能做到这一点？我尝试了以下代码，但无法正常工作

```
private void WriteFile(String text, Context context, String deviceAddress)
    {
        try {

            FileOutputStream fos = context.openFileOutput("command.txt", Context.MODE_WORLD_WRITEABLE);
            fos.write(text.getBytes());
            fos.flush();
            fos.close();

            File file = new File(context.getFilesDir(), "command.txt");
            if (file.exists())
               Toast.makeText(context, "command file created successfully", Toast.LENGTH_LONG).show();
            else
                Toast.makeText(context, "command file not created.", Toast.LENGTH_LONG).show();

            ContentValues values = new ContentValues();
            values.put(BluetoothShare.URI, "content://" + Uri.fromFile(file));
            values.put(BluetoothShare.DESTINATION, deviceAddress);
            values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
            Long ts = System.currentTimeMillis();
            values.put(BluetoothShare.TIMESTAMP, ts);
            context.getContentResolver().insert(BluetoothShare.CONTENT_URI, values);

            Toast.makeText(context, "Command sent successfully", Toast.LENGTH_LONG).show();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

我收到文件未知，文件未发送错误。

我该怎么办？

任何帮助表示赞赏。

谢谢

# javascript - 控制 D3 云中的词放置——基于某些属性将词更紧密地捆绑在一起

> ID：14935887
> 
> 赞同：3
> 
> 时间：2013-02-18T12:05:01.997
> 
> 标签：javascript, d3.js, word-cloud

我正在研究 D3 标签云的交互式实现，它依赖于每个术语都有自己的类别或类。通过像这样修改 d3.layout.cloud.js，我设法将类别属性包含到术语中：

```
cloud.start = function() {
  var board = zeroArray((size[0] >> 5) * size[1]),
      bounds = null,
      n = words.length,
      i = -1,
      tags = [],
      data = words.map(function(d, i) {
    return {
      // Added by me
      epidem_category: d['epidem_category'],
      other_details: d['other_details'],
      id: d['id'],
      ///////
      text: text.call(this, d, i),
      size: ~~fontSize.call(this, d, i),
      font: font.call(this, d, i),
      rotate: rotate.call(this, d, i),
      padding: cloudPadding.call(this, d, i)
    };
  }).sort(function(a, b) { return b.size - a.size; }); 
```

我现在可以访问`d.epidem_category`以及`d.id`在绘制云时为某些类别提供不同的填充颜色或旋转值：

```
 canvas
 .selectAll("text")
 .data(words)
 .enter()
 .append("text")
 .style("font-size", function(d) { return d.size + "px"; })
 .style("font-family", 'Gentium Book Basic')
 .style("fill", function(d, i) { return entity_cloud.set_color(d.epidem_category);})
 .attr("text-anchor", "middle")
 .attr("transform", function(d) {
   return "translate(" + [d.x, d.y] + ")rotate(" + entity_cloud.set_rotation(d.epidem_category) ")";
   })
 .attr("class", function(d) { return d.epidem_category })
 .attr("id", function(d, i) { return d.id })
 .text(function(d) { return d.text; }) 
```

我的问题是我现在还想控制单词的位置——我希望同一类别的所有术语在云中捆绑在一起出现。我想也许我可以通过按类别重新排序输入数组来控制这一点，假设[Jason Davies 的标签云演示页面](http://www.jasondavies.com/wordcloud/#http://search.twitter.com/search.json?rpp=100&q=%7Bword%7D=cloud)上描述的算法：

> 尝试将单词放在某个起点：通常靠近中间，或位于中央水平线上的某处。

.. 因此，按照这种逻辑，如果前 10 个单词属于同一类别，它们应该在中间的某个地方捆绑在一起，其他类别将以循环模式跟随。然而，对此进行测试并没有产生预期的结果。事实上，我几乎看不到布局的任何变化。

有没有人对如何实现基于某些属性将术语捆绑在一起的布局有任何想法？

# sql - 如何添加列值或oracle数据库

> ID：14935889
> 
> 赞同：0
> 
> 时间：2013-02-18T12:05:04.373
> 
> 标签：sql, addition

我有 7 个具有相似列名（例如 jan1）的表，其中存在数值数据值（例如 1 或 0），并且想要总结这些表并在具有相似列名（例如 jan1）的其他表中更新它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:08:58.327

从表 WHERE bla = 5 中选择总和（大小）作为整体大小；

```
SELECT SUM(SIZE)
FROM Table
WHERE bla = '5' 
```

# .net - NServiceBus & WindsorCastle : 方法配置没有实现

> ID：14935890
> 
> 赞同：0
> 
> 时间：2013-02-18T12:05:12.013
> 
> 标签：.net, castle-windsor, console-application, nservicebus

使用这些包：

```
 <package id="Castle.Core" version="3.0.0.4001" targetFramework="net45" />
  <package id="Castle.Windsor" version="3.0.0.4001" targetFramework="net45" />
  <package id="log4net" version="1.2.10" targetFramework="net45" />
  <package id="NServiceBus" version="3.3.5" targetFramework="net45" />
  <package id="NServiceBus.CastleWindsor-CI" version="3.0.2223" targetFramework="net45" />
  <package id="NServiceBus.Interfaces" version="3.3.5" targetFramework="net45" />
  <package id="RavenDB.Client" version="2.0.2261" targetFramework="net45" /> 
```

我收到一个异常，指出“ ***ServiceBus.ObjectBuilder.CastleWindsor 的 Configure 方法没有实现***”

我用 DotPeek 检查了它，它有一个。我猜 NServiceBus 正在寻找另一个签名。

有趣的是，在配置总线时删除对*CastleWindsorBuilder()*的调用不会改变任何内容。似乎 NServiceBus 正在对应用程序文件夹中存在的所有程序集进行反射并寻找 ConfigureMethod。我怎样才能绕过这个过程来查看 NServiceBus.ObjectBuilder.CastleWindsor 组件？

当然，从我的 Bin 文件夹中删除该程序集确实有助于但让我远离集成我需要的 WindsroCastle 和 NServiceBus :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:12:25.970

升级到

```
 <package id="NServiceBus" version="3.3.5" targetFramework="net45" />
  <package id="NServiceBus.CastleWindsor" version="3.2.8" targetFramework="net45" />
  <package id="NServiceBus.CastleWindsor-CI" version="3.2.6" targetFramework="net45" />
  <package id="NServiceBus.Interfaces" version="3.3.5" targetFramework="net45" /> 
```

解决了问题

# c++ - opencv中Mat的结构？

> ID：14935892
> 
> 赞同：1
> 
> 时间：2013-02-18T12:05:23.317
> 
> 标签：c++, c, opencv, mat

我尝试**了 Mat 结构，**我的应用程序显示为“运行失败”。还有其他方法吗？

以下是我尝试过的代码，但它失败了。如何进行这种锻炼或其他方法？

**“普通.h”**

```
struct initialize {
      cv :: Mat G_Sm;
}; 
```

**“初始化.cpp”**

```
struct initialize* initfunction ( ) {
    struct initialize* initializemat = ( initialize* ) malloc(sizeof(*initializemat));
    initializemat -> G_Sm = Mat:: zeros ( 3,1, CV_8U );
    return (initializemat);
} 
```

**“主.cpp”**

```
int main () { 
   struct initialize* initializem = initfunction ();
   cout << initializem -> G_Sm << endl;

 return 0;
} 
```

如果我使用“int”，程序不会崩溃，而不是 Mat。如果它是结构中的“Mat”变量，程序就会崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T12:13:31.537

使用 C++ 而不是 C：

```
initialize* initfunction ( ) {
    initialize* initializemat = new initialize;
    return initializemat;
} 
```

您不应该使用`malloc`.
`malloc`不会为您调用任何构造函数，而未`G_Sm`初始化。

# maven - Maven - 使用 Assembly 插件将多个项目的依赖项打包到一个文件中

> ID：14935893
> 
> 赞同：1
> 
> 时间：2013-02-18T12:05:29.640
> 
> 标签：maven, dependencies, maven-assembly-plugin, multi-module

我正在开发一个由多个其他项目组成的项目。它具有以下结构：

```
MainProject

  --projectA

  --projectB

  --projectC

  --projectD

  --parent

  --projectE

  ...

  --projectX 
```

如您所见，父母是其中之一。我不确定这是否不寻常，但它就是这样，我必须处理它。

我希望使用 Assembly 插件从每个子项目中获取依赖项，并将它们全部压缩到一个文件夹中。例如，我想要一个 zip 文件，其中包含一个文件夹，该文件夹包含子项目的所有解压缩依赖项。

这是我到目前为止所拥有的：

assembly.xml（这是在父项目中）

```
[...]
    <id>package</id>
        <formats>
            <format>zip</format>
        </formats>
        <includeBaseDirectory>false</includeBaseDirectory>

        <moduleSets>
             <moduleSet>
             <includes>
                 <include>com.example:../one</include>
                 <include>com.example2:../two</include>
                 <include>com.exampleX:../three</include>
             </includes>
             <binaries>
                 <outputDirectory>/library/jars</outputDirectory>
                 <unpack>false</unpack>
             </binaries>
             </moduleSet>
        </moduleSets>

        <dependencySets>
            <dependencySet>
                <unpack>false</unpack>
                <scope>runtime</scope>
                <outputDirectory>library/jars</outputDirectory>
             </dependencySet>
        </dependencySets>
        <fileSets>
            <fileSet>
                <excludes>
                    <exclude>**.xml</exclude>
                </excludes>
            </fileSet>
        </fileSets>
</assembly> 
```

这是在父母`pom.xml`

```
[...]
    <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.4</version>
        <executions>
            <execution>
                <id>make-assembly</id>
                <phase>package</phase>
                <goals>
                    <goal>assembly</goal>
                </goals>
            </execution>
         </executions>
        <configuration>
            <descriptors>
                <descriptor>assembly.xml</descriptor>
            </descriptors>
        </configuration>
    </plugin>
[...] 
```

当我`mvn clean install`从 cmd 运行时，构建成功。但是，它不会创建一个包含我的`library/jars`目录的 zip 文件，该目录应该包含每个项目的所有依赖项。它只是在每个项目中创建 zip。这些 zip 不包含我想要的目录或任何依赖项，它们只是每个项目目录的 zip。谁能看到我做错了什么？

# php - PHP在MySQL错误中实现数据

> ID：14935894
> 
> 赞同：0
> 
> 时间：2013-02-18T12:05:36.890
> 
> 标签：php, mysql

我的代码有一些问题应该可以工作，但我找不到任何错误:(

**我的代码：**

```
function editPriv($id, $new, $edit, $arch)
{
     $toWhat = 5;//($new+$edit+$arch);
     $query ="UPDATE `Logs` SET `privileges` = '".$toWhat."' WHERE `id` = '".$id."'";    
     mysql_query($query) or  die("".mysql_error());     
} 
```

不知道为什么，但我收到了`500 internal server error`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:21:54.750

这也发生在我身上，主要原因是 windows/unix 文件的可比性。您必须将 windows PHP 文件加载到 Unix 系统。只需从 cpanel 创建一个新文件并在那里编写代码，不要使用复制和粘贴选项。如果错误未显示，则需要对 PHP 进行某些调整，请联系您的服务器服务提供商以相应地调整 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:33:53.283

代码看起来不错，尽管您不需要 die() 中的字符串 concat。如果您不想像建议的那样挖掘日志，我建议您在开发环境的 php.ini 中启用 display_errors。

简而言之，你会在 php.ini 中需要这个：

```
...
display_errors = on
error_reporting = E_ALL & ~E_NOTICE (or E_ALL | E_STRICT if you want notices included)
... 
```

本指南总结了您需要了解的关于 php.ini 中的错误报告设置： [php-ini-error-settings](http://www.phpknowhow.com/configuration/php-ini-error-settings/)

# java - 我的世界如何存储它的音乐文件？

> ID：14935896
> 
> 赞同：3
> 
> 时间：2013-02-18T12:05:46.567
> 
> 标签：java, audio, encryption, jar, minecraft

在 Minecraft 中播放的音乐文件最新存储在`minecraft.jar`哪里？

仅将 jar 文件提取为 zip 文件，不会显示任何音频文件，仅显示`.class`、`.png`、`.txt`和`.lang`一个`.bin`用于字体字形的文件。

Minecraft 如何加密音频文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T03:36:46.453

音频文件来自[这里](http://s3.amazonaws.com/MinecraftResources/)，它只是一个 XML 文件。它们没有加密，客户端会根据需要下载它们。不要做任何顽皮的事情，并通读 Minecraft[品牌指南](http://minecraft.net/brand)，其中涵盖了第三方对这些资源的使用。

# linux - 为什么我不能从符号链接中处理“..”中的文件？

> ID：14935898
> 
> 赞同：3
> 
> 时间：2013-02-18T12:05:48.460
> 
> 标签：linux, bash, command-line

我有以下目录结构：

```
misha@misha-lmd:~/tmp$ ls -l
total 4.0K
-rw-r--r-- 1 misha lmd 21 Feb 18 21:00 hello.py
lrwxrwxrwx 1 misha lmd 20 Feb 18 21:01 symlink -> /home/misha/nobackup/ 
```

接下来，我尝试以下操作：

```
misha@misha-lmd:~/tmp$ cd symlink
misha@misha-lmd:~/tmp/symlink$ cat ../hello.py 
cat: ../hello.py: No such file or directory 
```

为什么这不起作用？

如果我这样做：

```
misha@misha-lmd:~/tmp/symlink$ cd ..
misha@misha-lmd:~/tmp$ cat hello.py
print "Hello World!" 
```

那么一切都很好。cd 处理 .. 正确，但 cat 没有。这是什么魔法，我如何让事情按照我想要的方式运作？

**编辑**

好的，多亏了这里的一些答案，我对发生的事情有了更多的了解。首先，`cd`它实际上不是可执行文件，它是 shell 的内置命令（在本例中为 bash）：

```
misha@misha-lmd:~/tmp$ type cd
cd is a shell builtin 
```

如果你`man bash`，你可以找到所有关于 bash 用于其内务管理的环境变量，包括在目录中移动。还有其他内置函数，例如`pwd`，具有实际上是可执行文件的对应项：

```
misha@misha-lmd:~/tmp/symlink$ type pwd
pwd is a shell builtin
misha@misha-lmd:~/tmp/symlink$ /bin/pwd
/home/misha/nobackup
misha@misha-lmd:~/tmp/symlink$ /bin/pwd -L
/home/misha/tmp/symlink 
```

`/bin/pwd`可执行文件默认打印物理路径，但也可以打印给定“-L”开关的逻辑路径。同样，当我尝试这样做时：

```
misha@misha-lmd:~/tmp/symlink$ cat ../hello.py 
cat: ../hello.py: No such file or directory 
```

事情失败了，因为`..`被解释为*物理*父目录，而不是*逻辑*目录。这使我可以**将我的问题细化**为：

当我为可执行文件指定命令行参数时，我如何才能`..`表示逻辑父级，而不是物理父级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:09:07.923

因为`..`符号链接目录中的目录是您的主目录。

`../something`表示“转到`..`目录”，而不是“剥离最后一个路径组件”。

`pwd -P`更改为符号链接后，您可以尝试查看自己的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:10:17.807

它不起作用，因为没有`/home/misha/hello.py`. 符号链接不会创建新目录，而是指向链接的目录。所以当你 cd 到一个符号链接时，你实际上是 cd 到那个目录，

您是否期望 shell 会记住您来自符号链接的位置？好吧，不是那样工作的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:56:25.037

尝试

```
cat $(cd ..; pwd)/hello.pycat 
```

不知道对你有没有帮助。

**编辑：**
如果你**真的**需要它，这是一种方法（但它有点难看）：

```
$ lcat ( ) ( cd "${1%/*}"; cat "${1##*/}"; )
# use it like 'cat'
$ lcat ../hello.py 
```

对函数体使用`( ... )`而不是`{ ... }`使其`cd`在子 shell 而不是当前 shell 中执行。
当我尝试它时，它也适用于“文件名完成”。
但这只是解决问题`cat`，我认为用于其他命令也可能更复杂。

```
$ lcmd ( ) ( local cmd="$1"; shift; cd "${1%/*}"; $cmd "${1##*/}"; ) 
```

然后做例如`lcmd cat ../hello.py`

# angularjs - 通过 Angular 的 require 属性访问父级的父级控制器

> ID：14935900
> 
> 赞同：0
> 
> 时间：2013-02-18T12:05:58.317
> 
> 标签：angularjs, angularjs-directive

在下面的示例中，accordion-group 指令与父手风琴共享一个控制器和范围，使用手风琴组指令中的“require：'^accordion'”属性。

如果我想在手风琴组下创建一个子指令，它将如何访问手风琴控制器？要求 ^accordion 和 ^accordionGroup 似乎不起作用。

[https://github.com/angular-ui/bootstrap/blob/master/src/accordion/accordion.js](https://github.com/angular-ui/bootstrap/blob/master/src/accordion/accordion.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:06:05.663

它确实是这样工作的。我只是愚蠢。[在这里](http://jsfiddle.net/ehfeng/9DrcD/2/)为后人提琴。

```
'use strict';

angular.module('myApp', []).controller('OneController', function() {
    this.test = function(element) {
        element.css('color', 'red');
    }
}).directive('one', function() {
    return {
        restrict: 'E',
        transclude: true,
        replace: true,
        controller: 'OneController', 
        template: '<span ng-transclude>And a </span>',
    }
}).directive('two', function() {
    return {
        restrict: 'E',
        transclude: true,
        replace: true,
        require: '^one',
        template: '<span ng-transclude>and a </span>',
    }
}).directive('three', function() {
    return {
        restrict: 'E',
        transclude: true,
        replace: true,
        require: '^one',
        template: '<span ng-transclude>and a one two</span>',
        link: function(scope, element, attrs, ctrl) {
            ctrl.test(element);
        }
    }
}); 
```

# c# - 将值从行分配给属性的有效方法是什么

> ID：14935901
> 
> 赞同：0
> 
> 时间：2013-02-18T12:05:58.687
> 
> 标签：c#, asp.net, sql, linq

我正在使用 LINQ
我有一个配置表来存储键值，它在 30 行中有 30 个设置例如：

```
 setting       value
    A            2
    B           "xyz" 
    .
    .
    .
    .
    .
 and so on 
```

我创建了 Property 类来保存数据库中的所有值。

我想在属性类中保存这些设置

所以我可以通过哪种方式获取和设置所有这些属性。

我是否必须遍历所有行并一一设置属性

或者你有什么有效的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:10:15.737

阅读表格并将其加载到字典中。使用设置作为键和值作为值。

```
Dictionary<string, string> dictionary = new Dictionary<string, int>();
dictionary.Add("A", "2");
dictionary.Add("B", "xyz"); 
```

然后，当您需要设置时，您可以执行

```
var settingA = Int.Parse(dictionary["A"]);
var settingB = dictionary["B"] 
```

所以现在你可以这样做：

```
Objectset.SettingEntities.ForEach(x => dictionary.Add(x.setting, x.value)); 
```

这比将每个字段加载到它自己的属性中的开销更少，因为这样您就必须手动分配每个值并进行所需的检查。

# cakephp - 涉及 $date 变量 CAKEPHP 的 Foreach 循环

> ID：14935905
> 
> 赞同：0
> 
> 时间：2013-02-18T12:06:17.130
> 
> 标签：cakephp, foreach, cakephp-2.2

我是 cakephp 新手，我正在尝试为每个循环编写一个循环，该循环将获取小于或等于（<=）今天日期的每个事件。

首先，我不确定 for each 循环是否是解决此问题的最佳方法，我也一直在考虑使用 while 循环或 if 语句，但我不知道如何从数据库中获取每个条目.

所以这就是我到目前为止的地方。

数据库标题

`<?php foreach ($events['Event']['startDate'] <= $date): ?>`

数据库结果

不幸的是，我收到以下错误：（`Parse error: syntax error, unexpected ')' in /homepages/3/d439567456/htdocs/cakephp/app/View/Events/live.ctp on line 22`这是每个循环线。

任何帮助将不胜感激，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:14:46.033

你不能仅仅改变 PHP 的工作方式。

通常，事件还具有多个“事件”的数字索引。

```
foreach ($events as $event) {
    if ($event['Event']['startDate'] <= $date) {} else {}
} 
```

要直接访问特定的 startDate，例如第一个，您需要 0 作为键：

```
if ($events[0]['Event']['startDate'] <= $date) {} else {} 
```

但是，您不能以这种方式滥用 foreach。

# java - JasperReports - 字体扩展不起作用 - 导出为 PDF 时找不到字体

> ID：14935914
> 
> 赞同：1
> 
> 时间：2013-02-18T12:06:53.690
> 
> 标签：java, fonts, jasper-reports

我正在尝试在我的网络应用程序中将 Tahoma 字体添加到我的报告中。我使用字体扩展机制（通过 iReport 我导出了扩展 jar 并将其放在我的 web 应用程序 lib 目录中）。我的 font.xml 文件如下所示：

```
<fontFamily name="Tahoma">
   <normal><![CDATA[fonts/tahoma.ttf]]></normal>
   <bold><![CDATA[fonts/tahomabd.ttf]]></bold>
   <pdfEncoding><![CDATA[Cp1250]]></pdfEncoding>
   <pdfEmbedded><![CDATA[true]]></pdfEmbedded>
</fontFamily> 
```

和我的风格：

```
<style name="TAHOMA_FONT" fontName="Tahoma" pdfFontName="Tahoma" /> 
```

问题是当我尝试生成 PDF 时出现以下错误：

> 无法加载以下字体：pdfFontName：Tahoma pdfEncoding：Cp1250 isPdfEmbedded：true

在 iReports 中不会出现此问题。此外，当我将样式更改为以下样式时，不会发生问题：

```
<style name="TAHOMA_FONT" fontName="Tahoma" pdfFontName="fonts/tahoma.ttf" pdfEncoding="Cp1250" isPdfEmbedded="true" /> 
```

当我在 net.sf.jasperreports.engine.fonts.SimpleFontExtensionsRegistryFactory 类中放置断点时，我可以看到正在读取 Tahoma 系列。

我的 jasperreports 版本是 3.7.4。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:47:57.610

这是我的问题。font.xml 定义很好，但样式定义不是。它应该是：

```
<style name="TAHOMA_FONT" fontName="Tahoma" /> 
```

样式标签内的 pdfFontName、pdfEncoding、isPdfEmbedded 属性现已弃用，不应使用。

# android - 滑动时 ViewPager 不是以前的片段

> ID：14935918
> 
> 赞同：0
> 
> 时间：2013-02-18T12:07:04.963
> 
> 标签：android, viewpagerindicator

我正在开发一个由视图寻呼机组成的应用程序，而我正在刷视图寻呼机，所有片段都正确加载，但这是我的问题。当我再次使用相同的片段滑动查看寻呼机时，它会再次加载，但根据我的要求，之前加载的片段应该得到恢复。我尝试了以下两种方式的代码。

A) 这是我的视图寻呼机

```
mViewPager = (ViewPager)mMyPageFragment.findViewById(R.id.Viewpager);

        myAdapter = new MyAdapter(getFragmentManager());
        mViewPager.setAdapter(myAdapter);
        myAdapter.notifyDataSetChanged(); 
```

在适配器中，

```
public class MyAdapter extends FragmentStatePagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public Fragment getItem(int position) {
        System.out.println("MyAdapter="+position);
        switch (position) {
        case 0:
            return new MyPageFirstFragment1();
        case 1:
            return new MyPageFirstFragment2();
        case 2:
            return new MyPageFirstFragment3();

        default:
            return null;
        }
    }
} 
```

**第二种方法**

```
private static Hashtable<Integer, Fragment> fragmentItems = new Hashtable<Integer, Fragment>();

    @Override
    public Fragment getItem(int position) {
        System.out.println("MyAdapter=" + position);
        switch (position) {
        case 0: {
            if (!fragmentItems.containsKey(position)) {
                fragmentItems.put(position, new MyPageFirstFragment1());
            }
            return fragmentItems.get(position);
        }
        case 1: {
            if (!fragmentItems.containsKey(position)) {
                fragmentItems.put(position, new MyPageFirstFragment2());
            }
            return fragmentItems.get(position);
        }
        case 2: {
            if (!fragmentItems.containsKey(position)) {
                fragmentItems.put(position, new MyPageFirstFragment3());
            }
            return fragmentItems.get(position);
        }
        case 3: {
            if (!fragmentItems.containsKey(position)) {
                fragmentItems.put(position, new MyPageFirstFragment4());
            }
            return fragmentItems.get(position);
        }

        default:
            return null;
        }
    } 
```

这是我使用的代码，但我无法保留片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:00:47.220

you should not save your fragments into static object.. because fragment manager saves info about your fragments during device configuration changes and restores your fragments after that.. but into new Fragment objects. And your "old" static objects are becoming invalid. I prefer check in fragment activity onCreate() method if savedInstanceState != null and if it is I restore view pager fragments by there tags (findFragmentByTag) and create new adapter from restored fragments.. for Example `

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i( LOG_TAG, "onCreate()" );
        //setting view pager
        mViewPager = (ViewPager) findViewById( R.id.mainActivity_viewPager );

        //initializing activity
        if( savedInstanceState == null ) {
            Log.i( LOG_TAG, "onCreate() - savedInstanceState == null" );
            //activity first creation
        } else {
            Log.i( LOG_TAG, "onCreate(), savedInstanceState != null, it is activity start after device reconfiguration.. " );

            //recreating viewpager adapter
            mViewPager.setAdapter( recreateParentFragmentListAdapter() );

        } 
```

and
`

```
private ParentFragmentListAdapter recreateParentFragmentListAdapter() {
        List<BaseParentFragment> fragments = new ArrayList<BaseParentFragment>(3);
        for( int id = 0; id < 3; id++ ) {
            String fragmentTag = getFragmentTag( R.id.mainActivity_viewPager, id );//int -> long converting
            BaseParentFragment fragment = (BaseParentFragment) (getSupportFragmentManager().findFragmentByTag( fragmentTag ));

            Log.i( LOG_TAG, "onCreate() - finding fragment with tag {" + fragmentTag + "}, found fragment = " + (fragment == null ? "null" : fragment.toString() ) );

            if( fragment == null ){//creating it
                switch( id ) {
                case 0:
                    fragment = new Tab1Fragment();
                case 1:
                    fragment = new Tab2Fragment();
                case 2:
                    fragment = new Tab3Fragment();
                }
            } 
            fragments.add( fragment );
        }

        ParentFragmentListAdapter adapter = new ParentFragmentListAdapter( getSupportFragmentManager(), fragments );
        return adapter;
    } 
```

` and

```
private String getFragmentTag( int viewId, long id ) {
        return "android:switcher:" + viewId + ":" + id;
    } 
```

from sdk

# c++ - 即使目标存在也复制文件（在 Qt 中）

> ID：14935919
> 
> 赞同：26
> 
> 时间：2013-02-18T12:07:06.177
> 
> 标签：c++, qt, file-copying

在[QFile::copy](http://doc.qt.digia.com/qt/qfile.html#copy-2)文档中它说

> 如果名称为 newName 的文件已经存在，则 copy() 返回 false（即 QFile 不会覆盖它）。

但即使目标存在，我也需要复制文件。Qt 中有什么可用的解决方法吗？

删除文件是显而易见的解决方案，但它会引发竞争条件......

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-18T12:19:46.367

```
if (QFile::exists("/home/user/dst.txt"))
{
    QFile::remove("/home/user/dst.txt");
}

QFile::copy("/home/user/src.txt", "/home/user/dst.txt"); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-18T12:22:25.680

显而易见的解决方案当然是在复制之前删除文件（如果存在）。

但是请注意，这样做会将代码打开到经典的[竞争条件](http://en.wikipedia.org/wiki/Race_condition)，因为在典型的多任务操作系统上，不同的进程可能会在应用程序的删除和复制调用*之间重新创建文件。*这会导致复制仍然失败，所以你需要做好准备（也许重新尝试删除，但这可能会引入计数的需要，这样你就不会永远尝试，等等）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-08T05:06:32.817

我能想到的最简单的重试是：

```
while !QFile::copy("/home/user/src.txt", "/home/user/dst.txt")
{
    QFile::remove("/home/user/dst.txt");
} 
```

但这仍然不是一个真正的解决方案，因为某些竞争条件不会阻止删除。

我目前正在寻找一种方法来处理将网页编写为输出，但在删除和复制之间没有自动刷新。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-18T12:12:22.783

打电话`remove()`前先打电话`copy()`

# php - 如何让 mod_rewrite 与 EasyPHP 一起工作？

> ID：14935922
> 
> 赞同：4
> 
> 时间：2013-02-18T12:07:14.663
> 
> 标签：php, windows, apache, mod-rewrite, easyphp

我的 mod_rewrite 无法正常工作。这是 mod_rewrite 部分：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
# Options +SymLinksIfOwnerMatch
  RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

它在 Ubuntu 和 OS X 上就像一个魅力，但在 Windows 下的 EasyPHP 上却失败了。我在 apache 配置中取消了以下行的注释：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

而且我已经将每一个 AllowOverride 指令都设置为 All（它只是一个本地服务器，所以就安全性而言它是无关紧要的）。我希望 mod_rewrite 启用的特定 vhost 的 vhost 条目如下：

```
<VirtualHost 127.0.0.1>
    DocumentRoot "E:/Dropbox/Websites/mysite/public"
    ServerName myvhost.mysite
    <Directory "E:/Dropbox/Websites/mysite/public">
        Options FollowSymLinks Indexes
        RewriteEngine On        
        AllowOverride All
        Order allow,deny
        Allow from all
        #Deny from all
        Require all granted
    </Directory>
</VirtualHost> 
```

如果我在我的公共文件夹中的 index.php 文件的顶部放置一个“死”，它永远不会发生，所以显然 mod rewrite 甚至从未尝试将它重定向到 index.php。我得到的只是404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-30T12:07:49.163

看到这个答案：

[easyphp 和 .htaccess](https://stackoverflow.com/questions/8158770/easyphp-and-htaccess)

> EasyPHP 中默认安装的 Apache 没有激活使用 .htaccess 文件修改文件夹中的服务器配置的选项。
> 
> 您必须告诉 Apache 可以使用 .htaccess 文件更改哪些配置，以及在哪个文件夹中。要在主 Web 服务器上启用所有配置更改，您应该编辑 http.conf（在 Apache/conf 文件夹中），并查找

希望这可以帮助 ：）

# ruby-on-rails - Ruby/rails/bundler：只捆绑*一些*必需的 gem

> ID：14935926
> 
> 赞同：0
> 
> 时间：2013-02-18T12:07:27.067
> 
> 标签：ruby-on-rails, bundler, rpm, rhel

我需要部署一个打包为 RHEL RPM 的 Rails 应用程序。我想捆绑它需要的*一些*gem，但让其余的从生产机器的系统 gem 中得到满足。

作为最终结果（例如），我希望应用程序在应用程序的树中找到一些 gem（例如`versionomy`，例如） ，但在主机的系统范围的 gem 库中找到 Rails 、和其他 gem。`vendor``activerecord``actionpack`

到目前为止，我只找到了捆绑全有或全无的方法。谁能指出我解释如何使用 Bundler 的文档，但它`$:`是一个搜索路径，首先列出应用程序的捆绑 gem，然后是系统的 gem？或者如果它甚至可能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:27:12.280

您可能必须在构建机器上安装您不想提供的要求作为他们自己的 RPM。然后 RPM 构建过程将需要它们但不提供它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:28:39.373

在供应商目录中指定 gem 的路径

在 Gemfile 中：

```
gem 'versionomy', :path => 'vendor/extensions' 
```

更新

是的，它将在部署组中工作。您可以指定在开发、生产和测试中使用哪些 gem

```
group :development, :test do
  gem 'sqlite3'
  gem 'thin'
end

group :production do
  gem 'pg'
end 
```

就我而言，宝石的系统路径

```
/usr/local/lib/ruby/gems/1.9.1/gems/ 
```

检查您的安装路径`whereis gem`

如果您使用的是 rbenv

```
/home/username/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/ 
```

# android - Android 谷歌地图：地图视图初始化

> ID：14935933
> 
> 赞同：0
> 
> 时间：2013-02-18T12:07:44.390
> 
> 标签：android, android-mapview, google-maps-android-api-2

我正在尝试使用`MapView`该类在我的 Android 应用程序中显示一个简单的地图。我在我的活动中使用以下`onCreate`方法：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        MapsInitializer.initialize(this);
    } catch (GooglePlayServicesNotAvailableException e) {
        Log.e("Address Map", "Could not initialize google play", e);
    }

    MapView mapView = new MapView(this);
    CameraUpdate camPos = CameraUpdateFactory.newLatLng(new LatLng(11.562276,104.920292));
    mapView.getMap().moveCamera(camPos);
    setContentView(mapView);
} 
```

我有一个`NullPointerException`，因为方法`mapView.getMap()`返回`null`。不明白为什么，Google play 服务显然存在并已初始化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:18:02.453

无法`MapView`上班，我终于结束了上课`SupportMapFragment`。

对于那些可能有帮助的人，这是我的活动的完整代码：

```
public class AddressMap extends android.support.v4.app.FragmentActivity {

    private final static int FRAGMENT_ID = 0x101;
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.HORIZONTAL);
        layout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        SupportMapFragment fragment = SupportMapFragment.newInstance();
        layout.setId(0x101);
        {
            FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
            fragmentTransaction.add(FRAGMENT_ID, fragment);
            fragmentTransaction.commit();
        }

        setContentView(layout);

    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        if (mMap == null) {
            mMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(FRAGMENT_ID)).getMap();
            if (mMap != null) {
                mMap.moveCamera(
                    CameraUpdateFactory.newLatLngZoom(new LatLng(11.562276, 104.920292), 10));
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-10T10:40:53.693

此外，必须调用 mapView.onCreate()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:18:08.803

您正在尝试访问现已**弃用的**[Google Maps Android v1 Api](https://developers.google.com/maps/documentation/android/v1/)，请使用Google Maps Android [Api v2](https://developers.google.com/maps/documentation/android/)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T19:22:46.063

我像这样使用它并且它有效，这是新的api：

`compile 'com.google.android.gms:play-services-maps:10.2.6'`

```
public class MapViewFragment extends Fragment{
public static final String TAG = MapViewFragment.class.getSimpleName();

MapView mapView;
GoogleMap map;

static MapViewFragment instance;

public static MapViewFragment newInstance(){
    if(instance == null){
        instance = new MapViewFragment();
        return instance;
    }else{
        return instance;
    }
}

@Nullable
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
    Log.i(TAG, "onCreateView: " );

    View view = inflater.inflate(R.layout.map_view_fragment, container, false);
    mapView = (MapView) view.findViewById(R.id.mvMap);
    if(mapView != null){

        mapView.onCreate(null);  //Don't forget to call onCreate after get the mapView!

        mapView.getMapAsync(new OnMapReadyCallback() {
            @Override
            public void onMapReady(GoogleMap googleMap) {
                map = googleMap;
                //Do what you want with the map!!
            }
        });

        MapsInitializer.initialize(this.getActivity());
    }else{
        Log.i(TAG, "onCreateView: mapView is null");
    }

    return view;
}

@Override
public void onResume() {
    mapView.onResume();
    super.onResume();
}

@Override
public void onDestroy() {
    super.onDestroy();
    mapView.onDestroy();
}

@Override
public void onLowMemory() {
    super.onLowMemory();
    mapView.onLowMemory();
  }
} 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="match_parent"
android:layout_height="match_parent">

<com.google.android.gms.maps.MapView
    android:id="@+id/mvMap"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

</com.google.android.gms.maps.MapView>

</LinearLayout> 
```**

# javascript - 下拉onchange函数调用不起作用

> ID：14935935
> 
> 赞同：0
> 
> 时间：2013-02-18T12:07:55.717
> 
> 标签：javascript, jquery, html, onchange

在我的页面中，我使用了一个下拉菜单。当更改下拉值时，它将调用名为 sample 的函数。但是 onchange 功能不起作用。任何人都可以帮助我解决这个问题。

```
<!doctype html>    
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Combobox</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    .ui-combobox {
        position: relative;
        display: inline-block;
    }
    .ui-combobox-toggle {
        position: absolute;
        top: 0;
        bottom: 0;
        margin-left: -1px;
        padding: 0;
        /* support: IE7 */
        *height: 1.7em;
        *top: 0.1em;
    }
    .ui-combobox-input {
        margin: 0;
        padding: 0.3em;
    }
    </style> 
```

**JS文件**

```
 <script>
    (function( $ ) {
        $.widget( "ui.combobox", {
            _create: function() {
                var input,
                    that = this,
                    wasOpen = false,
                    select = this.element.hide(),
                    selected = select.children( ":selected" ),
                    value = selected.val() ? selected.text() : "",
                    wrapper = this.wrapper = $( "<span>" )
                        .addClass( "ui-combobox" )
                        .insertAfter( select );

                function removeIfInvalid( element ) {
                    var value = $( element ).val(),
                        matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( value ) + "$", "i" ),
                        valid = false;
                    select.children( "option" ).each(function() {
                        if ( $( this ).text().match( matcher ) ) {
                            this.selected = valid = true;
                            return false;
                        }
                    });

                    if ( !valid ) {
                        // remove invalid value, as it didn't match anything
                        $( element )
                            .val( "" )
                            .attr( "title", value + " didn't match any item" )
                            .tooltip( "open" );
                        select.val( "" );
                        setTimeout(function() {
                            input.tooltip( "close" ).attr( "title", "" );
                        }, 2500 );
                        input.data( "ui-autocomplete" ).term = "";
                    }
                }

                input = $( "<input>" )
                    .appendTo( wrapper )
                    .val( value )
                    .attr( "title", "" )
                    .addClass( "ui-state-default ui-combobox-input" )
                    .autocomplete({
                        delay: 0,
                        minLength: 0,
                        source: function( request, response ) {
                            var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                            response( select.children( "option" ).map(function() {
                                var text = $( this ).text();
                                if ( this.value && ( !request.term || matcher.test(text) ) )
                                    return {
                                        label: text.replace(
                                            new RegExp(
                                                "(?![^&;]+;)(?!<[^<>]*)(" +
                                                $.ui.autocomplete.escapeRegex(request.term) +
                                                ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                            ), "<strong>$1</strong>" ),
                                        value: text,
                                        option: this
                                    };
                            }) );
                        },
                        select: function( event, ui ) {
                            ui.item.option.selected = true;
                            that._trigger( "selected", event, {
                                item: ui.item.option
                            });
                        },
                        change: function( event, ui ) {
                            if ( !ui.item ) {
                                removeIfInvalid( this );
                            }
                        }
                    })
                    .addClass( "ui-widget ui-widget-content ui-corner-left" );

                input.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
                    return $( "<li>" )
                        .append( "<a>" + item.label + "</a>" )
                        .appendTo( ul );
                };

                $( "<a>" )
                    .attr( "tabIndex", -1 )
                    .attr( "title", "Show All Items" )
                    .tooltip()
                    .appendTo( wrapper )
                    .button({
                        icons: {
                            primary: "ui-icon-triangle-1-s"
                        },
                        text: false
                    })
                    .removeClass( "ui-corner-all" )
                    .addClass( "ui-corner-right ui-combobox-toggle" )
                    .mousedown(function() {
                        wasOpen = input.autocomplete( "widget" ).is( ":visible" );
                    })
                    .click(function() {
                        input.focus();

                        // close if already visible
                        if ( wasOpen ) {
                            return;
                        }

                        // pass empty string as value to search for, displaying all results
                        input.autocomplete( "search", "" );
                    });

                input.tooltip({
                    tooltipClass: "ui-state-highlight"
                });
            },

            _destroy: function() {
                this.wrapper.remove();
                this.element.show();
            }
        });
    })( jQuery );

    $(function() {
        $( "#combobox" ).combobox();
        $( "#toggle" ).click(function() {
            $( "#combobox" ).toggle();
        });
    });
function sample()
{
alert("testing");
}     
</script>
</head>
<body> 
```

**HTML 编码**

```
<div class="ui-widget">
    <label>Your preferred programming language: </label>
    <select id="combobox" onchange="sample();">
        <option value="">Select one...</option>
        <option value="ActionScript">ActionScript</option>
        <option value="AppleScript">AppleScript</option>
        <option value="Asp">Asp</option>
        <option value="BASIC">BASIC</option>
        <option value="C">C</option>
        <option value="C++">C++</option>
        <option value="Clojure">Clojure</option>
        <option value="COBOL">COBOL</option>
        <option value="ColdFusion">ColdFusion</option>
        <option value="Erlang">Erlang</option>
        <option value="Fortran">Fortran</option>
        <option value="Groovy">Groovy</option>
        <option value="Haskell">Haskell</option>
        <option value="Java">Java</option>
        <option value="JavaScript">JavaScript</option>
        <option value="Lisp">Lisp</option>
        <option value="Perl">Perl</option>
        <option value="PHP">PHP</option>
        <option value="Python">Python</option>
        <option value="Ruby">Ruby</option>
        <option value="Scala">Scala</option>
        <option value="Scheme">Scheme</option>
    </select>
</div>
<button id="toggle">Show underlying select</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:21:50.500

选择框的默认 onchange 事件将不起作用，因为它由 jquery UI 转换。

使用 jQuery UI 内置事件：

```
$( "#combobox" ).autocomplete({
change: function( event, ui ) { alert("testing");}
}); 
```

**参考：** [http ://api.jqueryui.com/autocomplete/#event-change](http://api.jqueryui.com/autocomplete/#event-change)

**- - 编辑 - -**

解决方案在这里：可能重复：[jquery UI Combobox ONCHANGE](https://stackoverflow.com/questions/4760285/jquery-ui-combobox-onchange)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:23:09.397

这是因为 jqueryUI（或您的代码？！）隐藏了原始组合框，将其替换为自己的。

使用 firebug 或类似工具来检查组合框。它是隐藏的！

您可以使用 js-eventlistener 来修复它，就像您在这里所做的那样：

```
$( "#toggle" ).click(function() {
 $( "#combobox" ).toggle();
}); 
```

然而，

```
$(".ui-combobox input").change(function(){
    sample();
}); 
```

这不起作用，因为更改不是由选择触发的。只能手动输入。所以你必须触发它：

```
select: function( event, ui ) {

                $(this).trigger("change"); // here
                            ui.item.option.selected = true;
                            that._trigger( "selected", event, {
                                item: ui.item.option
                            });
                        }, 
```

# python - 创建多行子字符串列表

> ID：14935939
> 
> 赞同：2
> 
> 时间：2013-02-18T12:08:07.237
> 
> 标签：python, list-comprehension

想象一下，我有以下列表：

```
result_lines = ['name1 age1 address1 email1',
                'name2 age2 address2 email2',
                'name3 age3 address3 email3'] 
```

我想打印以下字符串：

```
'age1:name1, age2:name2, age3: name3' 
```

注意：`,`字符串末尾没有！

**更新**：重要的不是顺序`age1:name1`。它也可能是`age1:email1:name1`。

到目前为止我尝试了什么：

```
print "".join((l.split(' ')[1], l.split(' ')[0]) for l in result_lines) 
```

但是，我收到以下错误消息：

```
TypeError: sequence item 0: expected string, tuple found 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T12:18:45.407

[`str.format()`](http://docs.python.org/2/library/stdtypes.html#str.format)是您的朋友在您想要展示 a`list`或的内容的情况下`tuple`：

```
>>> ', '.join(['{1}:{0}'.format(*line.split()) for line in result_lines])
'age1:name1, age2:name2, age3:name3' 
```

把它分解一下，因为那条线上发生了很多事情......

我们从简单的列表推导开始：

```
>>> [line for line in result_lines]
['name1 age1 address1 email1', 'name2 age2 address2 email2', 'name3 age3 address3 email3'] 
```

[`str.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)并使用（我们只需要拆分*一次*）将字符串拆分为空格：

```
>>> [line.split() for line in result_lines]
[['name1', 'age1', 'address1', 'email1'], ['name2', 'age2', 'address2', 'email2'], ['name3', 'age3', 'address3', 'email3']] 
```

引入[`str.format()`](http://docs.python.org/2/library/stdtypes.html#str.format)并[解包参数列表](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)：

```
>>> ['{0}:{1}:{2}:{3}'.format(*line.split()) for line in result_lines]
['name1:age1:address1:email1', 'name2:age2:address2:email2', 'name3:age3:address3:email3'] 
```

选择我们想要的元素：

```
>>> ['{1}:{0}'.format(*line.split()) for line in result_lines]
['age1:name1', 'age2:name2', 'age3:name3'] 
```

( `str.`)[`join`](http://docs.python.org/2/library/stdtypes.html#str.join)这一切与`', '`:

```
>>> ', '.join(['{1}:{0}'.format(*line.split()) for line in result_lines])
'age1:name1, age2:name2, age3:name3' 
```

量子点

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T12:13:56.490

要在没有多次调用 split 的情况下在一行上执行此操作，您需要反转和切片`.split()`结果，并嵌套您的字符串连接：

```
', '.join([':'.join(line.split()[:2][::-1]) for line in result_lines]) 
```

所以列表中的每个条目是：

*   在空白处拆分
*   切片仅给出姓名和年龄条目
*   已反转，因此年龄在名称之前`[::-1]`，用于就地反转。
*   加入`':'`到给`age?:name?`对。
*   我们使用列表推导 ( `[ ... for .. in ... ]`) 因为使用`str.join()`. 在内部，`.join()`在加入之前计算最终的字符串长度，并将生成器强制转换为*列表*。然后，理解以速度取胜。

然后将整个列表加入`', '`以提供一个很好的逗号分隔列表。因为我们只拆分*一次，*这将运行

这给出了：

```
>>> ', '.join([':'.join(line.split()[:2][::-1]) for line in result_lines])
'age1:name1, age2:name2, age3:name3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:11:35.233

这应该做的工作：

```
>>> result_lines = ['name1 age1 address1 email1', \
...                 'name2 age2 address2 email2', \
...                 'name3 age3 address3 email3']
>>> print ", ".join([l.split(' ')[1] + ': ' + l.split(' ')[0] for l in result_lines])
age1: name1, age2: name2, age3: name3 
```

# playframework - PlayFramework ~运行奇怪的错误

> ID：14935942
> 
> 赞同：6
> 
> 时间：2013-02-18T12:08:16.417
> 
> 标签：playframework, playframework-2.1

我正在使用 Play 2.1.0，突然一切都很好我收到这个奇怪的错误（附加快照），这是我`~run`从游戏控制台执行的时候。

环境：**Windows 7、IntelliJ12、Mysql、JDK 1.6**

快照：

![在此处输入图像描述](../Images/cd7cbdd5126120593b09d307b33d99b4.png)

错误声明：'不是目录，因此不能调用后代'

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T14:28:32.937

如果另一个进程已锁定，则会出现此问题`/logs/application.log`。例如，如果您在 Word 中打开日志文件，然后运行播放，您将看到错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T22:33:10.177

退出您的控制台或您正在使用的任何东西来启动您的应用程序。删除 application.log 文件。再次转到您的控制台屏幕。最后重新输入运行并回车。

该文件将被重新生成并且错误将消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T13:52:44.563

好像又是一场戏！应用程序在同一个端口上工作，对于 Windows，您可以终止应用程序并再次运行。

*   打开控制台（windows + r）
*   netstat -ano
*   查找哪个 pid 使用 '9000' 端口
*   taskkill /PID /f（在 中输入您的 PID）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-29T06:22:47.123

另一种解决方案是请从任务管理器中删除所有 java.exe 应用程序。因为其中之一已锁定“/logs/application.log”文件。之后，您可以删除“/logs/application.log”文件，当您运行项目时，它会再次自动生成。

# sql - 从 sql 文件创建图表

> ID：14935944
> 
> 赞同：1
> 
> 时间：2013-02-18T12:08:17.547
> 
> 标签：sql, charts

我有一个 sql 文件，其中包含有关潜在客户网站关键字的信息。我已经从 ipad SEO 应用程序中导出了这个文件并得到了一个 sql 文件。我希望能够将信息显示为图表或表格，但我以前从未使用过这种文件格式。是否有任何好的程序可以做到这一点，或者这是一个“铁杆程序员任务”？

谢谢！

从 sql 文件中提取的几行

```
 SQLite format 3@  Ô    Ô-‚%
‡‡bgÅÅ_tabledomainsdomainsCREATE TABLE domains (domain_name varchar(100), id INTEGER PRIMARY KEY, sort integer, country varchar(2))Å--Ågtablekeywords_historykeywords_historyCREATE TABLE keywords_history (position integer, date_added varchar(10), id INTEGER PRIMARY KEY, kid integer)^ÅatablekeywordskeywordsCREATE TABLE keywords (sort integer, domain_id integer, id INTÅÇ  tablekeywordskeywordsCREATE TABLE keywords (sort integer, domain_id integer, id INTEGER PRIMARY KEY, keyword_text varchar(500), country varchar(2))
ÉÓ◊¬∞ñÉliving.seSE-unifiedsweden.seSEes√§k.seSE#virotell.seSE)  mediaanalys.seSEapple.comUS˚˚≤£ìiT6 Ï› ¥ûÑo]D%÷¡•ëvW1·ƒ®˛ãtV)1hallm√∂bler malm√∂SE(#hallm√∂blerSE'/f√•t√∂ljer malm√∂SE%-belysning malm√∂SE#/
inredningskonsultSE"3heminredning malm√∂SE!%
heminredningSE$belysningSE$Atr√§dg√•rds m√∂bler malm√∂SE3
tr√§dg√•rds m√∂blerSE+  soffbord malm√∂SEsoffbordSE-k√∂ksbord malm√∂SEk√∂ksbordSE$Avardagsrums m√∂bler malm√∂SE&!f√•t√∂ljerSEsoffaSE3vardagsrums m√∂blerSE  )m√∂bler malm√∂SEm√∂blerSE  visitkortSE)webbutvecklingSE!webbdesignSE!web designSEadwordsSE
ppcSE
/sponsrade l√§nkarSE
seoSE   3s√∂kmarknadsf√∂ringSE
3s√∂kmotoroptimeringSE  !v√§rmepumpSE!abonnemangSEvirotellSE    mobilSE
teleSE
ppcSE   3s√∂kmotoroptimeringSEseoSE apple )˚˚∏•íÄn\J9&Ì⁄»∂§íÄn\J8&Ó€…∑•ìÅo]K9'ÒﬁÀ∏¶îÇp2!2013-02-07
1!2013-02-070!2013-02-07/!2013-02-07
.!  2013-01-24-!2013-01-24,!)2013-01-24+!2013-01-24
*!2013-01-24)!2013-01-24(!2013-01-24
'!2013-01-23&!2013-01-23%!2013-01-23
$!2013-01-23#!2013-01-23"!2013-01-23
!!2013-01-11
 !2013-01-11!2013-01-11!    2013-01-11!2013-01-11!)2013-01-11!2012-12-24!2012-12-24!2012-12-24!2012-12-24!2012-12-24!2012-12-24!2012-12-24
!2012-12-24!2012-12-24!2012-12-24
!2012-12-19 !   2012-12-19!2012-12-19!%2012-12-19
!2012-12-16!'2012-12-16 !   2012-12-16
!2012-12-16     !2012-12-16!2012-12-16!2012-12-16!2012-12-16!2012-12-14!)2012-12-14 !   2012-12-14! 2009-06-05! @2009-2
2pÓ‹À∏•íÄn\J9&Ì⁄»∂§íÄn\J8&Ó€…∑•ìÅo]K9'ÒﬁÀ∏¶îÇp2!2013-02-07
1!2013-02-070!2013-02-07/!2013-02-07
.!  2013-01-24-!2013-01-24,!)2013-01-24+!2013-01-24
*!2013-01-24)!2013-01-24(!2013-01-24
'!2013-01-23&!2013-01-23%!2013-01-23
$!2013-01-23#!2013-01-23"!2013-01-23
!!2013-01-11
 !2013-01-11!2013-01-11!    2013-01-11!2013-01-11!)2013-01-11!2012-12-24!2012-12-24!2012-12-24!2012-12-24!2012-12-24!2012-12-24!2012-12-24
!2012-12-24!2012-12-24!2012-12-24
!2012-12-19 !   2012-12-19!2012-12-19!%2012-12-19
!2012-12-16!'2012-12-16 !   2012-12-16
!2012-12-16     !2012-12-16!2012-12-16!2012-12-16!2012-12-16!2012-12-14!)2012-12-14 !   2012-12-14! 2009-06-05! @2009-06-01
!¶Ó‹ ∏¶îÇo]K'›À∏î¶Å9o]J8%Ó‹ ∏¶U!2013-02-180T!2013-02-18/S!2013-02-18.R!2013-02-18-Q!2013-02-18,P!2013-02-18+O!2013-02-18*N!
2013-02-18)M!2013-02-18(L!2013-02-18'K!2013-02-18&J!2013-02-18%H!2013-02-18#F!2013-02-18!G!2013-02-18"D!+2013-02-18C!2013-02-18B!2013-02-18A!2013-02-18@!2013-02-18?!2013-02-18>!2013-02-18I!2013-02-18$<!2013-02-18;!2013-02-18:!
2013-02-189!2013-02-188!2013-02-077!2013-02-076!2013-02-075!2013-02-074!2013-02-073!2013-02-07
'VÌﬂ¡≤£ìiT6 Ï› ¥ûÑo]D&÷¡•ëvW1·ƒ®˛ãtV)1hallm√∂bler malm√∂SE(#hallm√∂blerSE'/f√•t√∂ljer malm√∂SE%-belysning malm√∂SE#/
inredningskonsultSE"3heminredning malm√∂SE!%
heminredningSE$belysningSE$Atr√§dg√•rds m√∂bler malm√∂SE3
tr√§dg√•rds m√∂blerSE+  soffbord malm√∂SEsoffbordSE-k√∂ksbord malm√∂SEk√∂ksbordSE$Avardagsrums m√∂bler malm√∂SE&!f√•t√∂ljerSEsoffaSE1vardagsrumsm√∂blerSE   )m√∂bler malm√∂SEm√∂blerSE  visitkortSE)webbutvecklingSE!webbdesignSE!web designSEadwordsSE
ppcSE
/sponsrade l√§nkarSE
seoSE   3s√∂kmarknadsf√∂ringSE
3s√∂kmotoroptimeringSE  !v√§rmepumpSE!abonnemangSEvirotellSE    mobilSE
teleSE
ppcSE   3s√∂kmotoroptimeringSEseoSE apple macUS
[Ì”¡®ñ|[07sovrumsm√∂bler malm√∂SE/)sovrumsm√∂blerSE.sovrumSE-'mattor malm√∂SE,mattorSE+)matbord malm√∂SE*matbordSE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:12:15.707

[JFreeChart](http://www.jfree.org/jfreechart/)是一个用于图表生成的有用 Java 库。虽然我从未将它与 sql 文件一起使用，但我相信这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:32:44.383

该文件似乎是一个代表数据库的 SQLLite 文件。为了能够使用它，您需要安装一个像[这样](http://sourceforge.net/projects/sqlitebrowser/)的 SQLLite 数据库浏览器。我认为您可能必须将文件扩展名更改为 .db 才能打开它。如果这可行，我认为您最好的选择是查看表格数据，然后将其复制并粘贴到 Excel 或您熟悉的类似程序中以创建图表。

# android - 初学者：如何发送进度条内容？

> ID：14935945
> 
> 赞同：0
> 
> 时间：2013-02-18T12:08:17.223
> 
> 标签：android, bluetooth, seekbar

我有以下问题。我在应用程序 bluetoothChat 中添加了一些按钮，通过单击它们发送特定文本。为此，我输入了程序的名称，应该通过单击 onClick 属性中的按钮来启动。例如：onClick = haloClick。

我将此添加到代码中：

```
 public void halloClick(View view) {
     sendMessage("Hallo");
 } 
```

到目前为止，它完成了它的工作。每次我按下按钮“你好”都会发送。

现在我添加了一个按钮和一个搜索栏。我希望每次按下按钮时都会发送搜索栏的值。所以我将按钮的 onClick 设置为“sendValue”，并添加了我在 Internet 上找到的以下代码女巫：

```
 public void sendValue(View view) {
    sendMessage(seekBar1.getProgress ());
    } 
```

Eclipse 显示错误：seekBar1 无法解析。

我的错误在哪里？在 Layout 中，seekbar 是这样实现的：

```
 <SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:max="100"
    android:progress="0"/> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:08:37.360

您是否通过以下操作在您的应用程序中创建了 seekbar 的抽象对象，

```
public void sendValue(View view) {
     Seekbar seekBar1 = (SeekBar)findViewById(R.id.seekBar1);
     sendMessage(seekBar1.getProgress ());
} 
```

# objective-c - Objective - C - << 在枚举中的用法

> ID：14935947
> 
> 赞同：0
> 
> 时间：2013-02-18T12:08:19.403
> 
> 标签：objective-c, c, typedef, enumeration

我可以在 Apple 的文档中看到枚举有时是这样定义的

```
enum {
UICollectionViewScrollPositionTop = 1 << 0,
UICollectionViewScrollPositionBottom = 1 << 1
} 
```

<< 是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:09:40.943

这是[按位左移](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Bitwise_operators)运算符。它用于创建具有单个位集的值，当打算通过按位 OR 组合时非常常见。

对于这些值，您稍后可能会说：

```
const int top_and_bottom = UICollectionViewScrollPositionTop | UICollectionViewScrollPositionBottom; 
```

这将导致`top_and_bottom`设置为 3（二进制 11 [2]）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:09:39.673

`<<`代表左移。

它将二进制文件转移到指定的位，就像`4<<1`将是`8`和`4<<2`将是一样`16`。每次左移使值乘以 2。

1<<0 将是 1，而 1<<1 将是 2。

[在这里](http://msdn.microsoft.com/en-us/library/336xbhcz.aspx)检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:09:53.320

这里只是左位移位。所以这意味着`1<<0`=`1`例如。并且`1<<1`是两个。也许作者选择这种方式来初始化枚举是为了强调`UICollectionViewScrollPositionTop`只有最低有效位和`UICollectionViewScrollPositionBottom`只有倒数第二位的事实。我猜这个枚举的用途是以后以某种方式形成位掩码。

# eclipse-emf - 我可以使用java代码将ocl添加到ecore吗？

> ID：14935951
> 
> 赞同：2
> 
> 时间：2013-02-18T12:08:38.610
> 
> 标签：eclipse-emf, eclipse-emf-ecore, emf, ocl

我想用 java 代码将 ocl 添加到我的 .ecore 元模型中。但我找不到任何示例或教程。

所以我想问一下是否有可能或者我在哪里可以找到示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-09T12:26:11.367

你检查[过 OCLinEcore](https://wiki.eclipse.org/OCL/OCLinEcore)吗？它允许将 OCL 嵌入到您的 ecore 模型中，并像文本一样对其进行编辑，可以借助语法和语义验证以及完成建议对其进行编辑。

这是来自链接的摘录：

> OCL 可以使用注释嵌入到 Ecore 中。这些注释的维护由 OCLinEcore 编辑器自动执行……当指定了适当的委托功能时，嵌入式 OCL 变为活动状态。

委托功能分为三种类型：

1.  设置委托
2.  调用委托
3.  验证代表

还有不变量约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T05:36:14.173

我看到两种选择：

1.  使用 EVL（Epsilon Validation Language），它包含在 EMF（Eclipse Modeling Framework）中。这样，您只需右键单击 .ecore 模型并创建一个新的 EVL 验证（在 Epsilon 选项下）。EVL 语法在 Epsilon 书籍[https://www.eclipse.org/epsilon/doc/book/](https://www.eclipse.org/epsilon/doc/book/)中有详细记录。

2.  直接使用 OCL。为此，您需要在 EMF 上安装 OCL 组件。因此，如果您使用的是 Eclipse，请选择帮助 > 安装建模组件 > 查找：OCL。检查获得的结果。现在本教程可以帮助您[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.ocl.doc%2Fhelp%2FCompleteOCLTutorial.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.ocl.doc%2Fhelp%2FCompleteOCLTutorial.html)。

我希望这能有所帮助。

# storage - KVM virsh attach-disk 不支持设备号

> ID：14935953
> 
> 赞同：3
> 
> 时间：2013-02-18T12:08:47.110
> 
> 标签：storage, virtualization, virtual-machine, kvm

我使用以下命令将磁盘附加到正在运行的 KVM 虚拟服务器：

```
virsh attach-disk vps_89 /dev/nbd31 --target vdc --driver tap 
```

磁盘已正确连接。但是，该磁盘并未像`vdc`在虚拟服务器内部那样附加。我知道文档说该`--target`参数只是给虚拟服务器一个“提示”，但我真的不能相信没有办法强制将磁盘作为某个设备附加（至少在 Linux 上）。

我通过脚本控制我的虚拟服务器，我必须相信磁盘连接到我告诉它的确切设备。

当我使用这个分离磁盘时：

```
virsh detach-disk vps_89 --target vdc 
```

然后再次重新附加同一个磁盘，设备ID似乎每次都会增加，即，，，等`vdc`...... （完全忽略我的参数）`vdd``vde``vdf``--target`

有谁知道以可预测的方式将磁盘附加到 KVM 的好（可靠）方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T12:30:20.630

根据 RedHat [1] 和 libvirt [2]，这不是一个错误，而是一个特性：

> 指定的实际设备名称不能保证映射到来宾操作系统中的设备名称。将其视为设备订购提示。

唯一可用的解决方案是使用 UUID (/dev/disk/by-uuid/) 来处理虚拟机内的磁盘。

1.  [https://bugzilla.redhat.com/show_bug.cgi?id=693372](https://bugzilla.redhat.com/show_bug.cgi?id=693372)
2.  [http://libvirt.org/formatdomain.html](http://libvirt.org/formatdomain.html)

# ios - 我在保存单个对象时遇到问题，而不是将所有对象保存在 NSMangedObject 堆栈中？

> ID：14935954
> 
> 赞同：2
> 
> 时间：2013-02-18T12:08:49.130
> 
> 标签：ios, sqlite, core-data, nsmanagedobject, nsmanagedobjectcontext

我是 IOS 编程新手，目前正在学习核心数据，我开始运行代码，我只需要在核心数据中保存特定对象。那么我该怎么做呢？

根据场景，我有来自服务器的数据以及本地存储（核心数据），但是当用户关闭应用程序（进入后台）时，我想将数据存储在服务器中（如果网络可用），如果不是那么在本地存储（但仅选择 - 表示应存储特定数据，有些对象来自在线服务器，我不想存储在本地）。

如果可能的话，请让我知道任何解决方案。

问候尼萨尔·艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:49:42.460

我看到了两种方法来实现这一点：

1.  遍历插入和更新的对象，并恢复那些你不想保存的对象。插入的对象应该被删除，更新的应该被刷新：

    ```
    for (NSManagedObject* obj in [self.managedObjectContext insertedObjects]) {
        if (/*Shouldn't be saved*/) {
            [self.managedObjectContext deleteObject:obj];
        }
    }

    for (NSManagedObject* obj in [self.managedObjectContext updatedObjects]) {
        if (/*Shouldn't be saved*/) {
            [self.managedObjectContext refreshObject:obj mergeChanges:NO];
        }
    } 
    ```

2.  创建单独的托管对象上下文。重新创建要在新上下文中保存的对象，然后保存。

    ```
    NSManagedObjectContext* newContext = [[NSManagedObjectContext alloc] init];
    [newContext setPersistentStoreCoordinator:[self.managedObjectContext persistentStoreCoordinator]];
    for (NSManagedObject* obj in objectsWantToSave) {
        NSEntityDescription* entity = [obj entity];
        NSDictionary* valuesByKeys = [obj dictionaryWithValuesForKeys:[[entity attributesByName] allKeys]];
        NSManagedObject* objCopy = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:newContext];
        [objCopy setValuesForKeysWithDictionary:valuesByKeys];
    }
    [newContext save:NULL]; 
    ```

第二种方法对我来说更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:48:52.800

看看 UIManagedDocument - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIManagedDocument_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIManagedDocument_Class/Reference/Reference.html)

它处理了使用核心数据所涉及的许多样板文件。

# javascript - Ajax 加载器脚本两次调用 php 脚本

> ID：14935955
> 
> 赞同：0
> 
> 时间：2013-02-18T12:08:50.683
> 
> 标签：javascript, jquery, ajax

我在我的 html 页面上使用 ajax 从 db 加载数据 wo 重新加载并在某些事件上发送电子邮件通知，它的工作完美，同时我使用显示和隐藏 ajax 加载器图像的功能，但它调用我的 php 脚本两次，以便每个两次发送电子邮件的时间

```
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.js"></script>

<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","../getuser.php?q="+str,true);
xmlhttp.send();
}

// ajax loader image

  function getuser(str){
     $.ajax({
      url: "http://site.com/getuser.php?q="+str,
      beforeSend: function (XMLHttpRequest)
      {
         $("#loading").show();
      }
    }).done(function ( data ) {
     $("#txtHint").html(data);
     $("#loading").hide(); });
  }
$(document).ready(function(){
  $("select[name='users']").change(function () {
   getuser($("option:selected", this).val()); });
   });

</script> 
```

如何改进此功能以仅一次调用 php 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:13:29.667

```
 function getuser(str){
 $.ajax({
  url: "http://site.com/script.php?q="+str,
  beforeSend: function (XMLHttpRequest)
  {
     $("#loading").show();
  }
}).done(function ( data ) {
 //     $("#txtHint").html(data);
 $("#loading").hide(); });
}
$(document).ready(function(){
$("select[name='users']").bind('change',function () {
 getuser($("option:selected", this).val()); });
 }); 
```

# actionscript-3 - 加速掩码 AS3

> ID：14935958
> 
> 赞同：0
> 
> 时间：2013-02-18T12:09:02.250
> 
> 标签：actionscript-3

在将蒙版应用到 MovieClip 时，我目前正在执行以下操作：

```
mc1.cacheAsBitmap = true;
_mask.cacheAsBitmap = true;
mc1.mask = _mask; 
```

效果很好，但是...

mc1 是一个复杂的矢量动画，将其缓存为位图以掩盖它对我所看到的和已阅读的内存有相当大的影响。

他们是另一种实现口罩的方式吗？或者一种优化通常解决方案的方法？

谢谢

*编辑* mask 和 mc1 都是 MovieClips，并且它们已经被添加到 stage 中，mask 是一个渐变。我正在使用 Flash CS6，movieclip 和 mask 都被添加到时间轴中，它们正在被动画化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:49:31.467

您可以使用[http://www.greensock.com/blitmask/](http://www.greensock.com/blitmask/)

从文档中引用：

> **我不能将目标 DisplayObject 的 cacheAsBitmap 属性设置为 true 并获得相同的结果吗？为什么使用 BlitMask？**
> 
> *如果您将 DisplayObject 的 cacheAsBitmap 属性设置为 true，Flash 会对该对象进行位图捕获，以便在您移动它时（仅更改 x 和/或 y 属性），不需要再次重新光栅化文本和矢量在被渲染到屏幕之前。但是，如果您将它们屏蔽为仅显示区域的一小部分，Flash 仍然需要关注每一帧上的额外像素。然而，BlitMask 只关心较小的蒙版区域（当然是在初始捕获之后），这使 Flash 不必考虑额外的像素。*

# mysql - 将此 SQL 表示为 Mongo Query

> ID：14935962
> 
> 赞同：0
> 
> 时间：2013-02-18T12:09:16.127
> 
> 标签：mysql, sql, mongodb

我想找出我网站上最活跃的用户。

我有表格的记录

```
{
    "_id" : "db1855b0-f2f4-44eb-9dbb-81e27780c796",
    "createdAt" : 1360497266621,
    "profile" : { "name" : "test" },
    "services" : { "resume":
        { "loginTokens" : [{
                "token" : "82c01cb8-796a-4765-9366-d07c98c64f4d",
                "when" : 1360497266624
            },
            {
                "token" : "0e4bc0a4-e139-4804-8527-c416fb20f6b1",
                "when" : 1360497474037
            } ]
        },
        "twitter" : {
            "accessToken" : "9314Sj9kKvSyosxTWPY5r57851C2ScZBCe",
            "accessTokenSecret" : "UiDcJfOfjH7g9UiBEOBs",
            "id" : 2933049,
            "screenName" : "testname"
        }
    }
} 
```

我希望能够选择用户并按`loginTokens`. 其中`MySQL`会是这样的：

```
SELECT id, COUNT(logins) AS logins 
FROM users 
GROUP BY id ORDER BY logins DESC 
```

我已经在 querymongo.com 上尝试过，但出现错误（不能使用别名/不能按非列名排序）

Mongo 的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:38:05.680

Here is an example of what you said using the aggregation framework:

```
db.users.aggregate([
    {$unwind: '$services.resume.loginTokens'},
    {$group: {_id: '$_id', logins: {$sum: 1}}},
    {$sort: {logins: -1}}
]) 
```

This should do the trick.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:13:01.910

我刚刚转换：

```
SELECT id, COUNT(logins)
FROM users 
GROUP BY id 
```

至：

```
db.users.group({
    "key": {
        "id": true
    },
    "initial": {
        "countlogins": 0
    },
    "reduce": function(obj, prev) {
        prev.countlogins++;
    }
}); 
```

希望这可以帮助

# javascript - jQuery-UI ToolTip 位置

> ID：14935973
> 
> 赞同：5
> 
> 时间：2013-02-18T12:09:48.893
> 
> 标签：javascript, jquery-ui, jquery-ui-tooltip

无论如何，标准 JQuery-UI 工具提示（[http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)）的工具提示位置是否跟随鼠标而不是单元格？

目前，该位置基于包含“title”属性的页面元素，使用 JQuery-UI ( [http://api.jqueryui.com/position/](http://api.jqueryui.com/position/) ) 中的位置规则。

从我所看到的一切来看，这是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:40:06.390

查看[轨道](http://api.jqueryui.com/tooltip/#option-track%22track%22)选项。

> 工具提示是否应该跟踪（跟随）鼠标。

# content-management-system - 使用 umbraco 创建用于将 n 个产品添加到类别的界面

> ID：14935974
> 
> 赞同：0
> 
> 时间：2013-02-18T12:09:50.483
> 
> 标签：content-management-system, umbraco

我知道这个问题已经被问过很多次了，但我没有找到正确的解决方案，因此在这里写我的问题可能会再次出现......

我想为类别产品解决方案创建 CMS..我认为这个名称本身就很容易解释..

每个类别可以包含 n 个产品。但我无法通过 umbraco 做到这一点。我知道，我不能通过内联剃刀宏访问子节点，而是如何访问子节点内容......或者可能是其他一些正确的方式！

请不要给我逃跑模块的链接..我已经访问过它们...并且能理解的很少...

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:07:22.350

创建（如果您还没有）两种不同的[文档类型](http://our.umbraco.org/wiki/how-tos/working-with-document-types)；一个称为类别，另一个称为产品。（您还需要添加适当的属性。）在 Category 的 Structure 选项卡中，确保允许 Product （并且不要忘记允许 Category 在它将存在的任何类型下）。从这里，您应该能够创建 Category 节点，然后在每个节点下方创建 Product 节点。

# shell - 如何在 crontab 中使用 export 命令运行 shell 脚本

> ID：14935977
> 
> 赞同：1
> 
> 时间：2013-02-18T12:09:58.257
> 
> 标签：shell, cron, environment-variables

我有一个 shell 脚本，它在执行时**导出**变量的值。相同的值将在另一个脚本中使用。
如何在 cron中运行此脚本（ **test.sh ）。**

```
#!/bin/sh
export I="10"
echo $I 
```

我将为 cron 使用 root 访问权限。我试过这个命令：

```
*/5 * * * * /home/ubuntu/backup/.test.sh 
```

我检查了环境变量，没有更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:23:50.587

为什么`.test.sh`如果脚本只是`test.sh`？

无论如何...导出变量的生命在设置它的进程退出时结束。

在您的情况下，脚本退出`I`时 var 消失`test.sh`

如果您想让您的脚本访问该`I`值，您必须访问`source`该`test.sh`文件（例如`. /home/ubuntu/backup/test.sh`）而不是执行它。

否则，您可以将其设置为`.bashrc`文件

# android - Eclipse FindBugs 插件失败，Android 项目要求 java.rmi.remote

> ID：14935979
> 
> 赞同：2
> 
> 时间：2013-02-18T12:10:04.480
> 
> 标签：android, eclipse-plugin, findbugs

我在 Android 项目中为 eclipse Juno使用**FindBugs 插件 2.0.2.20121210 。**当它开始获取错误时，一切正常，但当它结束时，它在错误日志选项卡上显示一个错误，上面写着

```
"The following classes needed for findbugs analysis on project xx were
missing: java.rmi.remote" 
```

它没有显示任何错误，即使在执行分析时出现在进度对话框中的计数器显示了其中的一些错误。

有没有办法解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T08:30:21.793

我使用命令行并禁用了以下检测器，即访问者。

```
-chooseVisitors -FindUninitializedGet,-UnreadFields,-FindNullDeref,-BadAppletConstructor,-FindMaskedFields,-DontIgnoreResultOfPutIfAbsent,-ReadOfInstanceFieldInMethodInvokedByConstructorInSuperclass 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-19T15:33:10.917

只是为了记录，我设法回答了我的问题。我不得不在下面禁用一些**检测器配置**`Project properties->FindBugs->Detector Configuration`

# objective-c - 在Objective-C中调用另一个方法时如何保持Soap sessionid

> ID：14935986
> 
> 赞同：1
> 
> 时间：2013-02-18T12:10:24.767
> 
> 标签：objective-c, session, soap

我正在尝试对 web 服务进行一些调用，但是当我更改方法时，sessionId 与上次调用的方法不同。所以我想举行会议。我尝试了很多方法都没有结果。我几乎可以肯定我必须通过 SoapHeader 方法中的会话，如下所示：

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://xxx">
<soap:Header>
    <SessionHeader xmlns='http://xxx'>
        <sessionId>jsessionid=ABCDEFGHI:-1</sessionId>
    </SessionHeader>
</soap:Header> 
```

没有结果...

```
<?xml version="1.0"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Header/>
  <soapenv:Body>
    <p118:method1:p118="http://xxx"> 
```

在第二种方法中， sessionId 是一个新的会话：

```
<?xml version="1.0"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Header/>
  <soapenv:Body>
    <p118:method2 xmlns:p118="http://xxx"> 
```

我怎样才能做到这一点？非常感谢！

# installation - 我需要做什么才能使 msi 无法访问或不在 TEMP 文件夹中为那些条件不满足的人生成 msi？

> ID：14935990
> 
> 赞同：0
> 
> 时间：2013-02-18T12:10:37.093
> 
> 标签：installation, windows-installer, installshield

我创建了一个包含 msi 文件的可执行文件 (.exe)。我还设置了一些条件，以便安装程序仅在满足特定条件时运行。

但是，问题是当我运行 exe 时，无论是否满足条件，它都会将 msi 文件提取到临时目录。这意味着，如果您足够了解使用免费开放软件（如通用提取器）从 msi 中提取数据，任何人都可以访问我们的应用程序数据。

我需要做什么才能使此 msi 无法访问或不为那些条件不满足的人生成 msi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:58:36.473

意识到 MSI 是开放式书籍。这就是技术的全部意义——创建一种表示安装程序逻辑的标准方式，并允许最终用户（公司 IT）能够查看和转换行为。如果您对此真的不满意，那么其他项目类型（例如 InstallScript）或其他工具（例如 NSIS）可能更适合您。但是，您将失去 Windows Installer 的所有好处。

如果您有某种许可问题，我建议您将保护措施放在应用程序而不是安装程序中。

InstallShield / Windows Installer 不支持您的要求。

# c# - 如何删除具有 ASP.NET MVC4 SimpleMembership 角色的用户？

> ID：14935995
> 
> 赞同：4
> 
> 时间：2013-02-18T12:11:00.410
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, simplemembership

感谢您的关注。

# 背景

在我当前的项目中，客户希望我使用 ASP.NET MVC4 的简单成员资格。通常我不使用 .NET 成员资格类，所以也许我遗漏了一些简单的东西，但我似乎无法通过代码删除用户，因为`webpages_UsersInRoles`表和`UserProfile`表之间存在外键约束。

我已经尝试过使用`Membership.DeleteUser(id, true);`，因为“true”的设置应该级联删除，但如果有分配给用户的角色，即使这样也会失败。

我尝试`mdb`通过服务器资源管理器进入文件并将 FK 上的删除操作设置为`CASCADE`但删除操作的选项被禁用。

作为最后的努力，我从成员数据库创建了一个单独的实体类 (.edmx)，希望我可以通过 C# 破解成功删除的方法，但是 .edmx 的生成拒绝引入`webpages_UsersInRoles`表！

我正在使用 C#、.NET 4.5。

# 问题

使用 C#。如果已为该用户分配了一个或多个角色，如何从 MVC4 SimpleMembership 中删除该用户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T12:20:05.213

我无法很快找到为什么在用户被删除时，UsersInRoles 表上似乎没有删除级联规则，但也许[这个答案](https://stackoverflow.com/a/5439490/266143)有帮助：

```
void DeleteUserRoles(string username)
{
    foreach (var role in Roles.GetRolesForUser(username))
        Roles.RemoveUserFromRole(username, role);            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T14:37:04.717

另外使用 RemoveUserFromRoles（复数）

```
void DeleteUserRoles(string username)
{
    Roles.RemoveUserFromRoles(username, Roles.GetRolesForUser(username));
} 
```

# angularjs - 如何在 javascript 中使用过滤器而不是 Html

> ID：14935996
> 
> 赞同：52
> 
> 时间：2013-02-18T12:11:02.253
> 
> 标签：angularjs

我正在使用 AngularJS，它很棒。我在文档中找不到它 - Javascript 中与此 AngularJS 表达式等效的是什么：

```
<div>{{ (myList| filter:mySearch).length }}</div> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-18T12:41:13.720

它在 Angular 的[过滤器文档](http://docs.angularjs.org/api/ng.filter%3afilter)中：

## 在 HTML 模板绑定中

> {{ 过滤器表达式 | 过滤器：表达式}}

## 在 JavaScript 中

> $filter('filter')(数组，表达式)

在您的情况下，它看起来像`$filter('filter')(myList, mySearch)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T13:10:41.440

作为替代语法，您还可以直接注入过滤器，而无需通过`$filter`服务。例如，要将`filter`过滤器注入您的控制器，您可以编写：

```
MyCtrl = function($scope, filterFilter) {

  $scope.filtered = filterFilter(myArray, expression);
} 
```

[一个与如何在控制器中使用过滤器](https://stackoverflow.com/q/14302267/1418796)非常相似的问题？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-08T21:17:20.493

在你的 html

```
<input ng-model="search">
<div ng-repeat="thing in things | filter:searchResults"></div> 
```

在你的 JS

```
$scope.$watch('search', function (newValue, oldValue) {
  var searchResults = filterFilter($scope.things, $scope.search);
}); 
```

# java - 生成除某些值之外的随机数

> ID：14935997
> 
> 赞同：11
> 
> 时间：2013-02-18T12:11:02.370
> 
> 标签：java, random, arraylist

我想生成随机数，但不希望它们来自`exclude`数组。这是我的代码。

```
public int generateRandom(int start, int end, ArrayList<Integer> exclude) {
    Random rand = new Random();
    int range = end - start +1 - exclude.size();
    int random = rand.nextInt(range) + 1;

    for(int i = 0; i < exclude.size(); i++) {
        if(exclude.get(i) > random) {
            return random;
        }
      random++;
    }

    return random;
} 
```

我在 while 循环中使用这个函数，并且在每次迭代期间我添加一个新值到`exclude`. 有时它会返回属于 的数字`exclude`。有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T12:19:20.317

我认为有一些错误。

1) 范围应该是 end - start + 1，因为这是想要的范围。
2）如果你真的想要随机数（在计算机上尽可能“随机”），那么你不应该只得到下一个可用的数字。因为在这种情况下，您的随机数将具有排除数字密度/频率的特征。

```
public int generateRandom(int start, int end, ArrayList<Integer> excludeRows) {
    Random rand = new Random();
    int range = end - start + 1;
    int random;

    boolean success = false;
    while(!success) {
        random = rand.nextInt(range) + 1;
        for(Integer i: excludeRows) {
            if(i == random) {
                break;
            } else if (i > random) {
                success = true;
                break;
            }
        }
    }
    return random;
} 
```

**更新**

通过 Achintya Jha 的回答，我的代码可以得到改进（但请注意，也有一些评论）：

```
public int generateRandom(int start, int end, ArrayList<Integer> excludeRows) {
    Random rand = new Random();
    int range = end - start + 1;

    int random = rand.nextInt(range) + 1;
    while(excludeRows.contains(random)) {
        random = rand.nextInt(range) + 1;
    }

    return random;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T12:21:43.840

```
if(!exclude.contains(random))
    return random; 
```

每次都会尝试此操作，它将返回不排除在外的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T12:13:24.333

你检查：

```
for(int i = 0; i < exclude.size(); i++) {
    if(exclude.get(i) > random) {
        return random;
    } 
```

如果只有第一个更大，您将返回该值。你确定`exclude`是排序的？

您可以使用`if(exclude.contains(random ))`或以下算法：

如果`(end-start)`是一个合理的数字，并且您需要几乎所有值，您可以创建一个所有可接受数字的列表，并在此列表大小上使用 random 并选择随机值作为索引。然后从列表中删除不需要的数字并获得另一个随机索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-15T20:11:54.447

这对我有用：

```
 public int randomInt(int start, int end, int... exception) {
        int result = -1;
        Random rand = new Random();
        int range = end - start + 1;
        boolean equals = true;

        while(equals) {
            result = rand.nextInt(range);
            boolean differentOfAll = true;
            for(int i : exception) {
                if(result==i) {
                    differentOfAll = false;
                    break;
                }
            }
            if(differentOfAll) {
                equals = false;
            }
        }

        return result;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-10T23:18:07.043

实际上，我们不需要使用`contains(random)`while 循环。

为了简化问题，让我们看看如果我们只有一个排除值会发生什么。我们可以将结果分成`2`几部分。那么可能值的数量是`range-1`。如果随机数小于排除值，则返回它。否则，我们可以添加`1`.

对于多个排除值，我们可以将结果集拆分为多个`size+1`部分，其中`size`表示排除值的数量。那么可能值的数量是`range-size`。然后我们按升序对排除值进行排序。如果随机数小于排除值 minus `i`，那么我们只返回随机数 add `i`，其中`i`是排除值的索引。

```
public int generateRandomNumberWithExcepts(int start, int end, List<Integer> excepts) {
    int size = excepts.size();
    int range = end - start + 1 - size;
    int randNum = random.nextInt(range) + start;
    excepts.sort(null); // sort excluding values in ascending order
    int i=0;
    for(int except : excepts) {
        if(randNum < except-i){
            return randNum + i;
        }
        i++;
    }
    return randNum + i;
} 
```

# python - 如何在python中for循环的行之间跳转？

> ID：14935998
> 
> 赞同：1
> 
> 时间：2013-02-18T12:11:04.290
> 
> 标签：python, bioinformatics

我有一个序列信息文件，所以文件的结构是这样的，

```
[SEQUENCE ID]
atgctagctagatcga
[SEQUENCE ID]
agatcgatggctagatc 
```

我一直在做的是比较文件以查看共享哪些序列 ID，这很简单，但现在我想提取与 ID 关联的实际序列。我使用的文件很大（10 GB+），所以使用字典或任何涉及将所有行读入系统内存的东西都用完了。

基本上，代码的目的是如果文件 1 中的序列 ID 在文件 2 中找不到，则返回文件 1 中序列 ID 之后的行。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:13:20.977

所以你只需要第N行和第N+1行？在这种情况下，分两行读取文件。然后，您始终可以访问序列 ID 和序列。

```
from itertools import izip
with open('data.txt', 'r') as f:
    for line1, line2 in izip(*(iter(f),) * 2):
        print line1, line2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:24:43.587

简短的回答：您将不得不使用第三方 Python 库来保持其中一个数据序列的可搜索性优于 O(n)。

如果它们未排序，则必须至少对其中一个文件进行排序。可以这样想：我从文件 1 中获取序列 ID - 并检查它是否不存在于文件 2 中，我必须读取所有文件 - 比读取文件一次更不可行。

比 - 比排序更好，拥有一个可以将排序数据保存在磁盘上以提供快速搜索并且仍然能够增长的数据结构会很有用 - 这也将有助于排序，就像你们所有人一样第一步要做的是读取文件 2 中的条目，然后将其插入到这个增长排序的磁盘持久数据结构中。

虽然您当然可以滚动您自己的数据结构来执行此操作，但我建议使用**[ZODB](http://www.zodb.org/)** - ZOPE 的面向对象的 DATABSe，带有 btree 文件夹，并将您的“2 行数据”制作成您任务的最小对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:16:19.087

假设 [SEQUENCE ID] 确实适合内存，并且您的大部分数据实际上在序列行上（与提供的示例不同）-您可以选择解析文件（您的问题中的 file2），并且注释不仅 te [SEQUENCE ID] - 但每个此类标识符的文件位置。这种方法可以让您在不中断当前工作流程的情况下继续进行（例如，必须了解数据库）：

```
def get_indexes(filename):
    with open(filename, "rt") as file:
        sequences = {}
        while True:
            position = file.tell()
            id = file.readline()
            if not id:
                break()
            sequences[id.strip()] = position
            # skip corresponding data line:
            file.readline()
    return sequences

def fetcher(filename1, filename2, sequences):
    with open(filename1, "rt") as file1, open(filename2, "rt" as file2):
        while True:
            id = file.readline()
            data = file.readline()
            if not id:
                break
            id = id.strip()
            if id in sequences:
                # postion file2 reading at the identifier:
                file2.seek(sequences[id])
                # throw away id:
                file2.readline()
                data = file.readline()

            yield id, data

if __name__== "__main__":
    sequences = getindexes("/data/file2")
    for id, data in fetcher("/data/file1", "/data/file2", sequences):
        print "%s\n%s"% (id, data) 
```