# StackOverflow 问答 15218000-15218999

# cordova - Worklight - 如何使用 IBM Worklight Tabbar API？

> ID：15218001
> 
> 赞同：1
> 
> 时间：2013-03-05T07:22:41.670
> 
> 标签：cordova, mobile, tabbar, ibm-mobilefirst

如何使用 IBM Worklight Tabbar API 为 iPhone 和 Android 平台制作基于标签的移动应用程序，

我找到了 Tabbar API：[http ://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fapiref%2Fr_tab_bar_api.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fapiref%2Fr_tab_bar_api.html)

但是，没有得到如何在我的应用程序中使用标签栏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T07:47:57.963

查看[通用控件](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_07_1_-_Common_Controls.pdf)的入门模块。幻灯片 14-19 应该对您有所帮助。

这是 iOS 的一个简单示例：

```
var tb = WL.TabBar;
tb.init();
tb.addItem("0", func1 , "One",  { image : "images/1.png"});
tb.addItem("1", func2 , "Two",  { image : "images/2.png"});
tb.addItem("2", func3, "Three", { image : "images/3.png"});
tb.setVisible(true);
tb.setSelectedItem("0"); 
```

确保`func1`,`func2`和`func3`是先前在您的应用程序中定义的函数，并且传递的图像 (`1.png`和`2.png`)`3.png`也存在于您的`images`文件夹中。[你可以在这里](http://www.glyphish.com/download/glyphish-icons.zip)获得一些免费的图标，主站点在[这里](http://www.glyphish.com/)。

这是一个例子`func1`：

```
var func1 = function () { 
  alert('hello world');
} 
```

对于安卓：

**普通/[app].html**

在 body 标记后添加以下内容：

```
<div id="AppBody"> </div> 
```

**android/js/[app].js**

```
WL.TabBar.setParentDivId("AppBody");
WL.TabBar.init();
WL.TabBar.addItem("item1", function(){ alert("item 1 pressed"); },"item1 title",{
    image: "images/tabicon.png",
    imageSelected : "images/tabicon.png"
});   
WL.TabBar.addItem("item2", function(){ alert("item 2 pressed"); },"item2 title",{
    image: "images/tabicon.png",
    imageSelected : "images/tabicon.png"
});
WL.TabBar.addItem("item3", function(){ alert("item 3 pressed"); },"item3 title",{
    image: "images/tabicon.png",
    imageSelected : "images/tabicon.png"
});
WL.TabBar.addItem("item4", function(){ alert("item 4 pressed"); },"item4 title",{
    image: "images/tabicon.png",
    imageSelected : "images/tabicon.png"
});
WL.TabBar.addItem("item5", function(){ alert("item 5 pressed"); },"item5 title",{
    image: "images/tabicon.png",
    imageSelected : "images/tabicon.png"
});
WL.TabBar.setVisible(true); 
```

**安卓/图像/tabicon.png**

确保图像存在于您的项目中。

**代码示例**

[这里](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/module_07_1_CommonControls.zip)有一个有效的 Worklight 项目/代码示例，其中包含正确的 html、js 和图像。

# c# - 将 Object 转换为 urlencoded 字符串

> ID：15218006
> 
> 赞同：3
> 
> 时间：2013-03-05T07:23:04.033
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我有一堂课

```
class Example
{
    public int Prop1 { get; set; }
    public int Prop2 { get; set; }
    public String Prop3 { get; set; }
} 
```

如何*自动*将此对象转换为 urlencoded 字符串，然后将其附加到我的主机名？

Urlencoded 字符串：
`prop1=val1&prop2=val2&prop3=val3`

最后结果：
`http://example.com?prop1=val1&prop2=val2&prop3=val3`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T07:26:41.773

您可以使用[`UrlHelper`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper%28v=vs.108%29.aspx)：

```
var model = new MyClass
{
    Prop1 = 1,
    Prop2 = 2,
    Prop3 = "prop 3"
};
string url = Url.Action("index", "home", model);
// will generate /?Prop1=1&Prop2=2&Prop3=prop%203 
```

如果你想要一个绝对网址，只需使用[`proper overload`](http://msdn.microsoft.com/en-us/library/dd505232%28v=vs.108%29.aspx)：

```
string url = Url.Action("index", "home", model, "http"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:36:26.170

如果您使用的是 Asp.Net MVC，那么只需将 FormMethod 更改为 GET。否则，如果你想在代码中使用反射。（如下）

```
public class TestModel
{
    [Required]
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }

    public string Test()
    {
        TestModel model=new TestModel(){Name="Manas",Id=1};
        Type t = model.GetType();
        NameValueCollection nvc=new NameValueCollection();
        foreach (var p in t.GetProperties())
        {
            var name = p.Name;
            var value=p.GetValue(model,null).ToString();
            nvc.Add(name, value);
        }

       var result= ConstructQueryString(nvc);
       return result;
    }
    public string ConstructQueryString(NameValueCollection Params)
    {
        List<string> items = new List<string>();
        foreach (string name in Params)
            items.Add(String.Concat(name, "=", HttpUtility.UrlEncode(Params[name])));
        return string.Join("&", items.ToArray());
    }
} 
```

# c# - Deserialize JSON to Dictionary with DataContractJsonSerializer in Windows Phone

> ID：15218007
> 
> 赞同：2
> 
> 时间：2013-03-05T07:23:03.980
> 
> 标签：c#, json, windows-phone-7, dictionary, deserialization

I have a json string, for example

```
{"timestamp":1362463455, "features" : {"one":true, "two":false}} 
```

I want to deserialize it with `DataContractJsonSerializer` to my class:

```
[DataContract]
public class MyClass
{
    [DataMember(Name = "timestamp")]
    public int Timestamp { get; set; }

    [DataMember(Name = "features")]
    public Dictionary<string, bool> Features { get; set; }
} 
```

But I have a error in process `"ArgumentException"`. I have a problems with deserialize `Dictionary`, if deserialize only timestamp then I don't have errors. I thought is dictionary most suitable structure for this. But it don't work. I checked [this answer on SO](https://stackoverflow.com/questions/14980973/deserialize-json-to-dictionary-with-datacontractjsonserializer), but `Dictionary<string, object>` don't work too. Maybe because in example using:

```
DataContractJsonSerializerSettings settings =
        new DataContractJsonSerializerSettings();
settings.UseSimpleDictionaryFormat = true; 
```

But I can't use `DataContractJsonSerializerSettings` in Windows Phone.

Sorry, if my question is double.

Thank advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T05:39:26.300

@亚历山大

我正在为您编写代码，它将帮助您将对象从 json 反序列化为 yourClassCustomObject。

```
private async Task<List<MyClass>> MyDeserializerFunAsync()
{
    List<MyClass> book = new List<MyClass>();
    try
    {
       //I am taking my url from appsettings. myKey is my appsetting key. You can write direct your url.
       string url = (string)appSettings["mykey"];
       var request = HttpWebRequest.Create(url) as HttpWebRequest;
       request.Accept = "application/json;odata=verbose";
       var factory = new TaskFactory();
       var task = factory.FromAsync<WebResponse>(request.BeginGetResponse,request.EndGetResponse, null);
       var response = await task;
       Stream responseStream = response.GetResponseStream();
       string data;
       using (var reader = new System.IO.StreamReader(responseStream))
       {
           data = reader.ReadToEnd();
       }
       responseStream.Close();
       DataContractJsonSerializer json = new DataContractJsonSerializer(typeof(List<MyClass>));
       MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(data));
       book = (List<MyClass>)json.ReadObject(ms);
       return book;
   }
} 
```

上面的代码在我的 wp8 应用程序中运行，你可以尝试更快，它会对你有所帮助。我正在执行异步操作，但您可以使用 MyClass 返回类型创建简单的方法。

# arrays - Divide the set into group of two

> ID：15218010
> 
> 赞同：1
> 
> 时间：2013-03-05T07:23:08.653
> 
> 标签：arrays, algorithm, data-structures, set

Given is a set of elements. You have to divide them into groups of two, such that the difference between the sum of elements of an individual group is minimum.

example:

```
5
4 6 7 2 1 
```

two groups are: `{4,6}` and `{7,2,1}`.

My approach: I have come across only the brute force solution of this problem, i.e. generate all the subsets `(2^n)` of the set using bit shifting technique.

I am looking for a better solution.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:30:39.127

我不会给你解决方案，而是给你两个提示：

1.  计算所有元素的总和，而不是解决原始问题。表示这个`S`。解决如下所述的问题 - 找到总和不超过 的给定数字的子集`S/2`。剩余的数字将形成另一个子集。

2.  我上面描述的问题是非常简化的[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)，所有元素的成本相同。同样，它可以使用[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)来解决（但在这种情况下，它比用于经典背包问题的方法简单得多）

# jquery - 在 jqGrid 中显示测试

> ID：15218014
> 
> 赞同：0
> 
> 时间：2013-03-05T07:23:24.220
> 
> 标签：jquery, jqgrid

我正在使用 jQuery 和 jqGrid 来显示数据。

我想在网格中将“ **test ”显示为字符串值，但它会自动显示为****test**而不是正确的字符串值。我正在使用`jQuery("#notelist").jqGrid('addRowData')`将数据添加到网格中。

如何覆盖此行为？

* * *

我认为这个问题是不正确的。它自动变为粗体。我想显示“ `<b`>测试`<b`>”。而不是网格中的粗体“测试”。我已经找到了解决方案。在添加到网格之前，我已经对其进行了格式化。否则它会自动更改为在网格中**测试。**

```
inputVal.replace(/`>/g,' &gt;'); 
inputVal.replace(/`</g,' &lt;'); 
```

# jquery - Jquery 选择具有指定属性的元素，其值包含给定单词，由逗号分隔

> ID：15218016
> 
> 赞同：0
> 
> 时间：2013-03-05T07:23:32.957
> 
> 标签：jquery

嗨，我正在计划使用 jquery 进行字段级访问。逻辑是所有字段都应该被禁用，只有具有editable_by属性的字段应该被启用。editable_by 是一个逗号分隔的字符串，请提供您对此功能的见解

```
var user_group='3';
var user_role='lvl2';        
$(':input').attr("disabled","disabled");      
$('input[editable_by~="'+user_group+'"]').removeAttr("disabled");
.
.
.
.
.
<input type="text" editable_by="1,2,3" id="ReOrderLevel" value="3">
<input type="button" editable_by="lvl2"  id="btnUpdateReorderableStatus" value="Update Reorderable Status"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:00:37.360

你必须逃避“，”（逗号）......所以

```
 var user_group = "1,2,3".split(',');
    $('input[editable_by=' + user_group.join('\\,') + ']').prop('disabled', false); 
```

我可能误解了你..如果你只是想匹配可编辑的“某个部分”......那么。

```
 var user_group = "3"
    $('input[editable_by*=' + user_group + ']').prop('disabled', false); 
```

# performance - 使用“应用”加速模拟

> ID：15218017
> 
> 赞同：0
> 
> 时间：2013-03-05T07:23:33.143
> 
> 标签：performance, r, simulation, apply, systemtime

我有一个矩阵 z (3 x 20000)。将每一行视为一个随机变量，将每一列视为一个模拟。[我使用 apply 命令在R](http://en.wikipedia.org/wiki/R_%28programming_language%29)中编写了以下函数，以查找 3 维的经验累积分布函数 (EMP.CDF)。[此 k 变量经验 CDF 在此 pdf](http://www.idg.pl/mirrors/CRAN/web/packages/mecdf/vignettes/mecdf.pdf)第 2 页 的“多元 ECDF”部分下进行了解释。

```
EMP.CDF=function(z) {
# z is a matrix (3 x 20000) and each row is a realization of a random variable
q1=z[1,];q2=z[2,];q3=z[3,]
# qi = the realization of the ith random variable, i=1,2,3
# Now I am going to evaluate the empirical cumulative distribution function at
# each column of z
# Given each column, the function should return an empirical
# cumulative probability.

d=apply(z,2, function(x) sum(q1<=x[1] & q2<=x[2] & q3<=x[3])/(length(q1)))
return(d)}

> z=matrix(0,3,20000)
> z[1,]=runif(20000,1,2)
> z[2,]=runif(20000,3,5)
> z[3,]=runif(20000,7,9)

> system.time(EMP.CDF(z))
   user  system elapsed 
   30.18    0.01   30.39 
```

在上面的代码中 k=3。有什么方法可以对上述函数进行矢量化以减少系统时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:08:04.197

3 维累积分布函数是 3 个变量的函数。如果你在网格上估计它，它可以表示为一个 3 维数组，但它会不精确且很大（你的函数返回一个 1 维数组，所以它不是它正在计算的）。

给定一个点`x`，只计算所有坐标小于 的点的比例`x`。

```
z <- matrix(runif(60000), 3, 20000)
emp.cdf <- function(z)
  function(x) mean( apply( z <= x, 2, all ) )
emp.cdf(z)( c(.5,.5,.5) )  # Approximately 1/8 
```

以下重现了您引用的文档中的图：

```
n <- 10
z <- matrix(runif(2*n), 2, n)
f <- emp.cdf(z)
g <- function(u,v) f(c(u,v))
persp( outer( sort(z[1,]), sort(z[2,]), Vectorize(g) ) )

x <- seq(0,1,length=100)
persp( outer( x, x, Vectorize(g) ) ) 
```

如果你想评估初始点的累积概率分布，你可以使用`apply`（如果你想在网格上评估它，你可以使用`expand.grid`来构建它）。

```
n <- 100
z <- matrix(runif(3*n), 3, n)
f <- emp.cdf(z)
p <- apply( z, 2, f ) 
```

但是这个算法是二次的：有`n`概率要计算，对于每个概率，我们检查所有的`3*n`坐标。对于您的 20,000 点，这将需要一段时间。

您可以使用分而治之的方法来加快计算速度，但这并不简单：随机选取一个点，用它将空间分成 8 个八分圆，递归计算每个八分圆中的点数；然后，您可以使用生成的[树](http://en.wikipedia.org/wiki/Octree) 来计算任何点的概率，只需检查一小部分点。

这与用于计算[k 最近邻](http://en.wikipedia.org/wiki/Nearest_neighbor_search#Space_partitioning)或加速[n 体模拟](http://en.wikipedia.org/wiki/Barnes%E2%80%93Hut_simulation)的预处理步骤没有什么不同。

# c++ - 如何在 C 中使用 DirectX 9 渲染多个窗口？

> ID：15218020
> 
> 赞同：4
> 
> 时间：2013-03-05T07:23:42.907
> 
> 标签：c++, window, directx-9

我已经在[https://gamedev.stackexchange.com/questions/50374/how-can-i-render-multiple-windows-with-directx-9-in-c](https://gamedev.stackexchange.com/questions/50374/how-can-i-render-multiple-windows-with-directx-9-in-c)提出了这个问题，但我还没有收到回答。

我正在尝试使用 DirectX 9 和交换链渲染多个窗口，但即使我创建了 2 个窗口，我也只能看到我创建的第一个窗口。我的 RendererDX9 标题是这样的：

```
#include <d3d9.h>
#include <Windows.h>
#include <vector>

#include "RAT_Renderer.h"

namespace RAT_ENGINE
{
    class RAT_RendererDX9 : public RAT_Renderer
    {
    public:
        RAT_RendererDX9();
        ~RAT_RendererDX9();

        void Init(RAT_WindowManager* argWMan);
        void CleanUp();

        void ShowWin();

    private:
        LPDIRECT3D9           renderInterface; // Used to create the D3DDevice
        LPDIRECT3DDEVICE9     renderDevice;    // Our rendering device
        LPDIRECT3DSWAPCHAIN9* swapChain;       // Swapchain to make multi-window rendering possible
        WNDCLASSEX wc;

        std::vector<HWND> hwindows;

        void Render(int argI);
    };
} 
```

我的 .cpp 文件是这样的：

```
#include "RAT_RendererDX9.h"

static LRESULT CALLBACK MsgProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam );

namespace RAT_ENGINE
{
    RAT_RendererDX9::RAT_RendererDX9() : renderInterface(NULL), renderDevice(NULL)
    {
    }

    RAT_RendererDX9::~RAT_RendererDX9()
    {
    }

    void RAT_RendererDX9::Init(RAT_WindowManager* argWMan)
    {   
        wMan = argWMan;
        // Register the window class
        WNDCLASSEX windowClass =
        {
            sizeof( WNDCLASSEX ), CS_CLASSDC, MsgProc, 0, 0,
            GetModuleHandle( NULL ), NULL, NULL, NULL, NULL,
            "foo", NULL
        };

        wc = windowClass;

        RegisterClassEx( &wc );

        for (int i = 0; i< wMan->getWindows().size(); ++i)
        {
            HWND hWnd = CreateWindow( "foo", argWMan->getWindow(i)->getName().c_str(),
                                    WS_OVERLAPPEDWINDOW, argWMan->getWindow(i)->getX(), argWMan->getWindow(i)->getY(), 
                                    argWMan->getWindow(i)->getWidth(), argWMan->getWindow(i)->getHeight(),
                                    NULL, NULL, wc.hInstance, NULL );
            hwindows.push_back(hWnd);
        }

        // Create the D3D object, which is needed to create the D3DDevice.
        renderInterface = (LPDIRECT3D9)Direct3DCreate9( D3D_SDK_VERSION );

        // Set up the structure used to create the D3DDevice. Most parameters are
        // zeroed out. We set Windowed to TRUE, since we want to do D3D in a
        // window, and then set the SwapEffect to "discard", which is the most
        // efficient method of presenting the back buffer to the display.  And 
        // we request a back buffer format that matches the current desktop display 
        // format.
        D3DPRESENT_PARAMETERS deviceConfig;
        ZeroMemory( &deviceConfig, sizeof( deviceConfig ) );
        deviceConfig.Windowed = TRUE;
        deviceConfig.SwapEffect = D3DSWAPEFFECT_DISCARD;
        deviceConfig.BackBufferFormat = D3DFMT_UNKNOWN;
        deviceConfig.BackBufferHeight = 1024;
        deviceConfig.BackBufferWidth = 768;
        deviceConfig.EnableAutoDepthStencil = TRUE;
        deviceConfig.AutoDepthStencilFormat = D3DFMT_D16;

        // Create the Direct3D device. Here we are using the default adapter (most
        // systems only have one, unless they have multiple graphics hardware cards
        // installed) and requesting the HAL (which is saying we want the hardware
        // device rather than a software one). Software vertex processing is 
        // specified since we know it will work on all cards. On cards that support 
        // hardware vertex processing, though, we would see a big performance gain 
        // by specifying hardware vertex processing.
        renderInterface->CreateDevice( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hwindows[0],
                              D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                              &deviceConfig, &renderDevice );

        this->swapChain = new LPDIRECT3DSWAPCHAIN9[wMan->getWindows().size()];
        this->renderDevice->GetSwapChain(0, &swapChain[0]);

        for (int i = 0; i < wMan->getWindows().size(); ++i)
        {
            renderDevice->CreateAdditionalSwapChain(&deviceConfig, &swapChain[i]);  
        }

        renderDevice->SetRenderState(D3DRS_CULLMODE, D3DCULL_CCW); // Set cullmode to counterclockwise culling to save resources
        renderDevice->SetRenderState(D3DRS_AMBIENT, 0xffffffff);   // Turn on ambient lighting
        renderDevice->SetRenderState(D3DRS_ZENABLE, TRUE);         // Turn on the zbuffer
    }

    void RAT_RendererDX9::CleanUp()
    {
        renderDevice->Release();
        renderInterface->Release();
    }

    void RAT_RendererDX9::Render(int argI)
    {
        // Clear the backbuffer to a blue color
        renderDevice->Clear( 0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB( 0, 0, 255 ), 1.0f, 0 );
        LPDIRECT3DSURFACE9 backBuffer = NULL;

        // Set draw target
        this->swapChain[argI]->GetBackBuffer(0, D3DBACKBUFFER_TYPE_MONO, &backBuffer);
        this->renderDevice->SetRenderTarget(0, backBuffer);

        // Begin the scene
        renderDevice->BeginScene();

        // End the scene
        renderDevice->EndScene();
        swapChain[argI]->Present(NULL, NULL, hwindows[argI], NULL, 0);
    }   

    void RAT_RendererDX9::ShowWin()
    {
        for (int i = 0; i < wMan->getWindows().size(); ++i)
        {
            ShowWindow( hwindows[i], SW_SHOWDEFAULT );
            UpdateWindow( hwindows[i] );

            // Enter the message loop
            MSG msg;
            while( GetMessage( &msg, NULL, 0, 0 ) )

            {
                if (PeekMessage( &msg, NULL, 0U, 0U, PM_REMOVE ) )
                {
                TranslateMessage( &msg );
                DispatchMessage( &msg );
                }
                else
                {
                    Render(i);
                }
            }
        }
    }
}

LRESULT CALLBACK MsgProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam )
{
    switch( msg )
    {
        case WM_DESTROY:
            //CleanUp();
            PostQuitMessage( 0 );
            return 0;

        case WM_PAINT:
            //Render();
            ValidateRect( hWnd, NULL );
            return 0;
    }

    return DefWindowProc( hWnd, msg, wParam, lParam );
} 
```

我制作了一个示例函数来制作多个窗口：

```
void RunSample1()
{
    //Create the window manager.
    RAT_ENGINE::RAT_WindowManager* wMan = new RAT_ENGINE::RAT_WindowManager();

    //Create the render manager.
    RAT_ENGINE::RAT_RenderManager* rMan = new RAT_ENGINE::RAT_RenderManager();

    //Create a window.
    //This is currently needed to initialize the render manager and create a renderer.
    wMan->CreateRATWindow("Sample 1 - 1", 10, 20, 640, 480);
    wMan->CreateRATWindow("Sample 1 - 2", 150, 100, 480, 640);

    //Initialize the render manager.
    rMan->Init(wMan);

    //Show the window.
    rMan->getRenderer()->ShowWin();
} 
```

如何让多个窗口工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:29:58.757

与为多个屏幕创建多个设备相比，您用于渲染多个窗口的“交换链”方法听起来不错。

您是否检查了**codesampler**教程以使用**交换链渲染****多个窗口**。如果没有，请找到下面的链接，它有一个使用交换链渲染多个窗口的工作示例项目。此代码纯粹是特定于 Windows Directx 9 的，但您可以添加包装器以实现与平台无关。

 **1.  创建多个设备

2.  使用交换链

[http://www.codesampler.com/dx9src/dx9src_1.htm](http://www.codesampler.com/dx9src/dx9src_1.htm)**

# java - 为什么 Java 的 SSL 返回的 Google 证书上的序列号与 Firefox 和 Chrome 返回的不同？

> ID：15218021
> 
> 赞同：0
> 
> 时间：2013-03-05T07:23:44.020
> 
> 标签：java, firefox, ssl, ssl-certificate

我在 Java 中使用以下代码打印出 Google 证书的各种属性。

```
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.SSLSocket;
import javax.net.SocketFactory;

import java.io.*;
import java.math.*;
import java.net.*;
import java.security.*;

import javax.net.*;
import javax.security.cert.X509Certificate;

/*
 * Start an connection with google.com and submit to Google to figure out how to get the certificate.
 * Should not pull from artificial context.
 */
public class MWE{
    public static void main(String[] args) throws Exception{
        SSLContext sslContext = SSLContext.getDefault();
        SocketFactory clientSocketFactory = sslContext.getSocketFactory();

        String remoteHost = "google.com";
        int remotePort = 443;
        SSLSocket socket = null;
        try {
            //Lookup the "common name" field of the certificate from the remote server:
            socket = (SSLSocket) clientSocketFactory.createSocket(remoteHost, remotePort);
            socket.setEnabledCipherSuites(socket.getSupportedCipherSuites());
            socket.startHandshake();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        X509Certificate[] c = socket.getSession().getPeerCertificateChain();
        X509Certificate serverCertificate = c[0]; //can I control which instance of this is used?
        Principal serverDN = serverCertificate.getSubjectDN();
        BigInteger serverSerialNumber = serverCertificate.getSerialNumber();

        System.out.println(serverCertificate.getClass());
        System.out.println(serverDN);
        System.out.println(serverSerialNumber.toString(16));
        System.out.println(serverCertificate.getSigAlgName());

        System.out.println(serverCertificate.getNotBefore());
        System.out.println(serverCertificate.getNotAfter());
    }
} 
```

我得到的输出如下所示：

```
CN=*.google.com, O=Google Inc, L=Mountain View, ST=California, C=US
1484d9a3000000007d35
SHA1withRSA
Wed Feb 20 05:34:43 PST 2013
Fri Jun 07 12:43:27 PDT 2013 
```

但是，当我从 Firefox 或 Chrome 查看证书时，除了序列号外，其他所有内容都匹配。

![在此处输入图像描述](../Images/ed0549c935da500aae167033a4c91c76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:33:05.607

您的 Firefox 证书信息显示 的证书[`www.google.com`](http://www.sslshopper.com/ssl-checker.html#hostname=www.google.com)，而您的 Java 代码显示 的证书[`google.com`](http://www.sslshopper.com/ssl-checker.html#hostname=google.com)。

这两个站点具有不同的证书，因此具有不同的序列号。

# android - Android 4.1 / 4.2 (JellyBean) 上的 Apache Felix

> ID：15218025
> 
> 赞同：0
> 
> 时间：2013-03-05T07:24:05.280
> 
> 标签：android, osgi, classloader, android-4.2-jelly-bean, apache-felix

有没有人尝试在 Android 4.1 或 4.2 上运行 Apache Felix？对我来说，看起来好像 android 类加载器上的某些东西已经改变了，现在它不再起作用了。

我以编程方式启动 apache felix，如下所示：

> ```
>  config.put("felix.bootdelegation.implicit", "false");
>   config.put("felix.service.urlhandlers","false"); 
>   ... 
>   felix.start(); 
> ```

我的捆绑包也被“索引”了！

我收到此错误：

```
03-04 23:38:51.360: W/System.err(1431): org.osgi.framework.BundleException: Activator start error in bundle org.apache.felix.shell.remote [25].
...
03-04 23:38:51.360: W/System.err(1431):     at dalvik.system.NativeStart.main(Native Method)
03-04 23:38:51.360: W/System.err(1431): Caused by: java.lang.UnsupportedOperationException: can't load this type of class file
03-04 23:38:51.360: W/System.err(1431):     at java.lang.VMClassLoader.defineClass(Native Method)
03-04 23:38:51.360: W/System.err(1431):     at java.lang.ClassLoader.defineClass(ClassLoader.java:292)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.findClass(BundleWiringImpl.java:2128)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1432)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
03-04 23:38:51.360: W/System.err(1431):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.BundleWiringImpl.getClassByDelegation(BundleWiringImpl.java:1317)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4170)
03-04 23:38:51.360: W/System.err(1431):     at org.apache.felix.framework.Felix.activateBundle(Felix.java:1972)
03-04 23:38:51.360: W/System.err(1431):     ... 15 more 
```

有人可以证实吗？他们是解决方案吗？也许他们是一个必须在 apache felix 中更改的属性？！？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:22:43.753

我在错误报告系统中添加了一条新评论：[https ://issues.apache.org/jira/browse/FELIX-3854?focusedCommentId=13594757&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel #comment-13594757](https://issues.apache.org/jira/browse/FELIX-3854?focusedCommentId=13594757&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13594757)

# android - 即使应用程序未运行，如何使 Android 应用程序控制手机静音？

> ID：15218029
> 
> 赞同：0
> 
> 时间：2013-03-05T07:24:18.383
> 
> 标签：android

在应用程序中说，我希望手机从某个时间开始静音，然后在另一个时间结束。我知道如何使手机静音和取消静音，但是即使您使用任务管理器退出应用程序或使用任务杀手，手机仍然会在应该静音的时候静音，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:36:35.620

您可能想使用[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)它..查看[这个](https://stackoverflow.com/questions/4459058/alarm-manager-example)和[这个链接](http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/)了解更多信息..

# internet-explorer - 打印时在 IE8 兼容模式下是否支持 highcharts？

> ID：15218032
> 
> 赞同：1
> 
> 时间：2013-03-05T07:24:41.100
> 
> 标签：internet-explorer, highcharts

在 IE8 兼容（浏览器）模式下打印时，我遇到了一些关于 highcharts 的问题。图表未正确呈现，但标题、副标题、图例和轴可见。它在 IE8（浏览器）模式下完美运行。任何人都可以指导我如何解决这个问题。我尝试通过以所有可能的方式设置元标记来解决它，但找不到解决方案。提前致谢。

# apache - 仅将非 www 重定向到 www - 忽略所有子域

> ID：15218034
> 
> 赞同：2
> 
> 时间：2013-03-05T07:24:50.350
> 
> 标签：apache, .htaccess

我很惊讶谷歌搜索这并没有为我的问题返回任何有用的解决方案。

我只想将非 www 请求重定向到 www.. 但如果它是子域，我希望它忽略它。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain.com [NC] 
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

这会将非 www 重定向到 www，但如果我输入一个子域，它会附加一个“www”。在它面前..我需要停止这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:30:51.130

[这个答案应该做到](https://stackoverflow.com/a/2720415/1443717)

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

还要考虑 HTTPS：

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:19:45.523

我已经不得不做同样的事情，这对我有用

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# .net - 使用 IP (.net) 访问网站

> ID：15218042
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:25:17.197
> 
> 标签：.net, iis

我已经在 IIS 中配置了一个站点。在主机文件中，我映射了 10.10.73.98 mywebsite.com

我可以使用 mywebsite.com 访问它

我尝试从 IPOD 使用 10.10.73.98/mywebsite.com 访问它给出错误。

我想使用我的 IP 访问，即 10.10.73.98/

请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:58:48.603

右键单击该网站并按照下图添加一个新网站 ![在此处输入图像描述](../Images/6d4c61abb6cb1c4d566a32193736505e.png)

现在在您的浏览器中使用 IP 访问它

![在此处输入图像描述](../Images/e345ffc427288480162225e5765d2e08.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T07:34:14.680

您的服务器中可能存在防火墙。最简单的方法是关闭它。如果你使用 Linux，

```
$ /etc/rc.d/init.d/iptables stop 
```

键入此命令时，您使用 root 用户。

# javascript - Emberjs 模型查找方法未填充模板

> ID：15218046
> 
> 赞同：0
> 
> 时间：2013-03-05T07:25:37.723
> 
> 标签：javascript, ember.js

我的路线设置为

```
# ROUTER MAPPING
App.Router.map( ->
  this.resource("alertInstances", 
    path:"/"
  )

  this.resource("alertInstance", 
    path:"/:alertInstance_id"
  )
)

# ALERT INSTANCES ROUTE
App.AlertInstancesRoute = Ember.Route.extend(
  model: ->
    App.AlertInstance.all()

  setupController: (controller, model) ->
    controller.set("content", model)
)

# ALERT INSTANCE ROUTE
App.AlertInstanceRoute = Ember.Route.extend(
  model: (params) ->
    App.AlertInstance.find(params.alertInstance_id)

  setupController: (controller, model) ->
    controller.set("content", model)
) 
```

当我转到路线“/”时，我会得到所有“警报实例”的列表，然后单击一个，它会显示单个“警报实例”的详细信息。

我的模型对象设置如下。

```
# ALERT INSTANCE MODEL
App.AlertInstance = Ember.Object.extend()
App.AlertInstance.reopenClass(
  allAlertInstances: []
  currAlertInstance:null
  all: ->
    @allAlertInstances = []
    $.ajax
      url:base + "api/alert_instances"
      dataType: "JSON"
      context:this 
      success: (response) ->
    for i in response
      i.clinical = if i.alert_type is "clinical" then true else false
      @allAlertInstances.addObject App.AlertInstance.create(i)
    @allAlertInstances
) 
```

这一切都很好。但是当用户直接转到“/10”时（通过指定警报实例ID），由于没有从服务器检索到任何数据，因此没有任何内容可显示。

所以我添加了以下“查找”方法

```
find: (id) ->
  @currAlertInstance = null
  $.ajax 
    url:base + "api/alert_instance"
    dataType:"JSON"
    context:this
    data:
      id:id
      success: (response) ->
        @currAlertInstance = App.AlertInstance.create(response)
        @currAlertInstance
  @currAlertInstance 
```

但是视图是空的，什么也没有显示。

我可以在我的 Chrome 控制台网络中看到确实返回了一个警报实例 JSON 对象。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:35:10.497

在 Route 中使用 render 来渲染模板。

```
App.AlertInstancesRoute = Ember.Route.extend({
  render: function() {
    this.render([<handlebar_name>], {
       [outlet: <outlet_name>],
       [into: <template_name_to_render_to>]
    });
  },

  model: function(params) {
    App.AlertInstance.all();
  },

  setupController: function(controller, model) {
    controller.set("content", model);
  }
}) 
```

欲了解更多信息，请点击[此链接](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/system/route.js#L400)

# iphone - 在 COCOS2D 中启用 ARC 的问题

> ID：15218047
> 
> 赞同：3
> 
> 时间：2013-03-05T07:25:43.940
> 
> 标签：iphone, cocos2d-iphone, automatic-ref-counting

我按照以下步骤

[http://www.raywenderlich.com/23854/arc-and-cocos2d-v2-x](http://www.raywenderlich.com/23854/arc-and-cocos2d-v2-x)

我无法`-fno-objc-arc`为 ccCArray.h 设置……即使我已将 -fno-objc-arc 设置为该文件，编译器也会给出与 ARC 相关的警告和错误……比如

```
[WARN]warning: no rule to process file 'libs/cocos2d/Support/ccCArray.h' of type sourcecode.c.h for architecture i386

ARC forbids explicit message send of 'release' 
```

怎么了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:59:46.487

那是一个头文件，不应该编译任何头文件。您通常在 <file>.m 中包含 <file>.h。

要解决此问题，请在 Xcode 中单击您的项目，选择您的目标，然后检查该文件是否不存在于**Build Phases**选项卡中。还要确保你没有任何其他 <file>.h 在那里。

清理并构建项目。

# sql - 使用 GORM 创建多个唯一列时出现问题

> ID：15218062
> 
> 赞同：0
> 
> 时间：2013-03-05T07:26:41.740
> 
> 标签：sql, hibernate, grails-orm

我有这个 Grails 域类：

```
class MyClass {

    static auditable = true;

    String description;
    Boolean isActive=true;
    Date deletedAt;

    static constraints = {
        description size: 1..250, blank: false, unique:['deletedAt', 'isActive'], index:'myclass_idx'
        deletedAt nullable: true, index:'myclass_idx'
        isActive index:'myclass_idx'
    }
} 
```

我期望它做的是创建一个不允许重复记录的约束：

```
编号| 描述 | is_active | 删除_at  
1 | 描述1 | 真实 | （无效的）
2 | 描述1 | 真实 | （无效的）
```

但这仍然会发生。我在这里想念什么？

**UPD：**发现只有当空值相互比较时才会发生这种情况。如果`deleted_at`包含两个相等的日期值，则约束有效。

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:54:10.350

最后决定对`deletedAt`字段使用默认的非空值。

# mysql - 组功能使用无效（用于在选择中使用计数）

> ID：15218066
> 
> 赞同：0
> 
> 时间：2013-03-05T07:27:02.727
> 
> 标签：mysql, sql, mysql-error-1138

我在我的 sql 查询中得到一个错误输出，带有备注“组函数的无效使用”

这是我的查询

```
SELECT * FROM 
(SELECT project,tbl_nif.POno,tbl_custmon.so, tbl_nif.matcode, tbl_nif.prodesc, 
    COUNT(CASE WHEN WEEK(MAX(plannedGI))+1=6 THEN 1 ELSE NULL END) as `week 6`,
    COUNT(CASE WHEN WEEK(MAX(plannedGI))+1=2 THEN 1 ELSE NULL END) as `week 2`,
    COUNT(CASE WHEN WEEK(MAX(plannedGI))+1=3 THEN 1 ELSE NULL END) as `week 3`,
    COUNT(CASE WHEN WEEK(MAX(plannedGI))+1=4 THEN 1 ELSE NULL END) as `week 4` 
FROM tbl_nif,tbl_custmon,tbl_incoming 
WHERE tbl_nif.so=tbl_custmon.so AND tbl_nif.bill='521513' AND tbl_incoming.shipment!=tbl_custmon.shipment 
            AND plannedGI!='0000-00-00' 
GROUP BY tbl_custmon.so 
ORDER BY tbl_custmon.so) AS grid 
ORDER BY project ASC 
```

如果我没有在查询中包含“计数”，它将显示输出。

所以，请告诉我这个问题的想法。
非常感谢！

**结论**
将“Max”函数放在查询上可以自然地“分组”。
所以我将“Max”函数与另一个 SELECT 字段内联。
所以查询将是这样的

```
SELECT * FROM 
(SELECT project,tbl_nif.POno,tbl_custmon.so, tbl_nif.matcode, tbl_nif.prodesc, MAX(plannedGI),
    COUNT(CASE WHEN WEEK(plannedGI)+1=6 THEN 1 ELSE NULL END) as `week 6`,
    COUNT(CASE WHEN WEEK(plannedGI)+1=2 THEN 1 ELSE NULL END) as `week 2`,
    COUNT(CASE WHEN WEEK(plannedGI)+1=3 THEN 1 ELSE NULL END) as `week 3`,
    COUNT(CASE WHEN WEEK(plannedGI)+1=4 THEN 1 ELSE NULL END) as `week 4`
FROM tbl_nif,tbl_custmon,tbl_incoming 
WHERE tbl_nif.so=tbl_custmon.so AND tbl_nif.bill='521513' AND tbl_incoming.shipment!=tbl_custmon.shipment 
            AND plannedGI!='0000-00-00' 
GROUP BY tbl_custmon.so
ORDER BY tbl_custmon.so) AS grid 
ORDER BY project ASC 
```

输出将显示我需要的数据。
非常感谢你:)

# json - DOJO json布局结构不起作用

> ID：15218067
> 
> 赞同：3
> 
> 时间：2013-03-05T07:27:04.800
> 
> 标签：json, dojo, dojox.grid

我有这样的json响应

```
{
   "listResponse":
   {
      "page":0,
      "rows":10,
      "total":9,

      "items": [
         { "abbr": "ec", "name": "Ecuador", "capital": "Quito" },
         { "abbr": "eg", "name": "Egypt", "capital": "Cairo" },
         { "abbr": "sv", "name": "El Salvador", "capital": "San Salvador" },
         { "abbr": "gq", "name": "Equatorial Guinea", "capital": "Malabo" },
         { "abbr": "er", "name": "Eritrea", "capital": "Asmara" },
         { "abbr": "ee", "name": "Estonia", "capital": "Tallinn" },
         { "abbr": "et", "name": "Ethiopia", "capital": "Addis Ababa" } 
      ]
   }
} 
```

我需要使用 dojo data.ItemFileReadStore 执行。我用了

```
 var layout4 = [{

            field: 'abbr',
            name: 'Abbr',
            width: '200px'
        },
        {
            field: 'name',
            name: 'First Name',
            width: '200px'
        },
        {
            field: 'capital',
            name: 'Capital',
            width: '200px'
        } 
```

这是行不通的。请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:56:56.887

请试试 ;

```
var layout4 = {
items : [{

        field: 'abbr',
        name: 'Abbr',
        width: '200px'
    },
    {
        field: 'name',
        name: 'First Name',
        width: '200px'
    },
    {
        field: 'capital',
        name: 'Capital',
        width: '200px'
    }],
identifier :"field"
}; 
```

在“标识符”字段中，从您的“项目”中给出该字段的名称，该名称将始终具有唯一值。

# c# - 检查每个页面的权限

> ID：15218069
> 
> 赞同：1
> 
> 时间：2013-03-05T07:27:09.223
> 
> 标签：c#, asp.net

在我的网站中，我需要检查每一页的权限，我发现我自己每页都重复相同的代码。

这是我的一页

```
public partial class KitView : AmsBasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        IddUser user = new IddUser();
        user = (IddUser)Session["user"];

        bool isAdmin = user.roles.Where(IddRole => IddRole.R_ID.Equals(3)).First().IsInRole;
        bool isIddTeam = user.roles.Where(IddRole => IddRole.R_ID.Equals(2)).First().IsInRole;
        bool isProductionTeam = user.roles.Where(IddRole => IddRole.R_ID.Equals(1)).First().IsInRole;

        if (isAdmin)
        {
            hypAddComponent.Visible = true;
            hypAddComponent.NavigateUrl = "AddComponent.aspx?CKID=" + Request.QueryString["CKID"];
        }

    }
} 
```

拥有角色的最佳实践是：isAdmin，isIddTeam，isProductionTeam 在每个页面中，但不在每个页面代码中重复以下代码

```
IddUser user = new IddUser();
        user = (IddUser)Session["user"];

        bool isAdmin = user.roles.Where(IddRole => IddRole.R_ID.Equals(3)).First().IsInRole;
        bool isIddTeam = user.roles.Where(IddRole => IddRole.R_ID.Equals(2)).First().IsInRole;
        bool isProductionTeam = user.roles.Where(IddRole => IddRole.R_ID.Equals(1)).First().IsInRole; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:49:33.300

您应该将您的授权代码放在您的母版页（ASP.NET Web 窗体）或布局页（ASP.NET MVC）中。这样，您的授权逻辑将仅放置在一个位置并在每个页面上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:49:24.263

> 如果您想避免冗余代码，我建议您将`authorization`逻辑单独`class`编写，或者您甚至可以将`aurthorization`逻辑编写在 a 中（`MasterPage`如果有的话）。然后在你的`webforms`.
> 注意：在您的事件中，您`webforms`必须先运行来自继承的基类的事件。`override``page_load``authorization`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:02:52.157

如果你想避免重复授权码，你应该在一个中心位置进行。

可以有很多方法，但我可以建议你几个

*   使用母版页 - 并在母版页的 OnLoad 中编写授权代码
*   创建一个 HttpModule - 在 ASP.NET 页面事件管道中插入您自己的模块并处理所有授权和身份验证逻辑

现在这就是我在一个数百万美元的项目中所做的

*   创建一个从中继承的 PageBase.cs `System.Web.UI.Page`- 您已经在做
*   创建 PageBase 的构造函数，您可以在其中传递当前 Page 权限，即

    ```
     public void PageBase(AppActivityEnum PageView, AppActivityEnum PageEdit, AppActivityEnum PageDelete)
    {
      this.pageView = PageView;
      this.pageEdit=PageEdit;
      this.PageDelete=PageDelete;

      VerifyPermission();
    } 
    ```

其中验证权限（）是：

```
 public void VerifyPermission()
    {
        var currentUser= SessionHelper.GetCurrentUser();
        var permissions = Utility.GetUserPermissions(currentUser.RoleId);

            this.CanView=permissions.Contains((int)this.pageView);

            this.CanEdit=permissions.Contains((int)this.pageEdit);

            this.CanDelete=permissions.Contains((int)this.pageDelete);

    } 
```

现在这三个变量是 ie`CanView, CanEdit, CanDelete`中的公共属性`PageBase`，因此可用于您的所有页面（无论您继承了哪里）。您可以根据这些变量设置控件（添加按钮、删除按钮）、页面可见性。

所以基本上，您创建一个活动表来存储每个页面的参考。活动表的样子

*   ID
*   姓名
*   价值
*   家长

此表中的典型条目如下：

```
 1 Module-Master           MMaster       NULL 
  2 Module-Master-View      MMasterView    1 
  3 Module-Master-Edit      MMasterEdit    1 
  4 Module-Master-Delete    MMasterDelete  1 
```

并且您维护 RoleAppActivtyMapping （显然）：

```
 Id   RoleId  AppActivityId
   1    1        2
   1    1        3
   1    1        4 
```

所以 RoleId 一个拥有所有三个权限。

所以`GetUserPermissions(RoleId)`基本上得到了`RoleAppActivityMapping`与传递的角色对应的所有条目。

所以在每个页面上调用 PageBase 的构造函数来验证视图权限。您在构造函数中传递当前 Page 的 AppActivity Id。如果 CanView 为假：您在点击 url 时重定向到“UnAuthorized”页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:54:51.603

我在我的 AmsBasePage 类中添加了所有页面都继承自 . 这段代码

```
private bool _isAdmin;
    private bool _isIddTeam;
    private bool _isProductionTeam;

    protected bool isAdmin
    {
        get { return _isAdmin; }
        set { _isAdmin = value; }
    }

    protected bool isIddTeam
    {
        get { return _isIddTeam; }
        set { _isIddTeam = value; }
    }

    protected bool isProductionTeam
    {
        get { return _isProductionTeam; }
        set { _isProductionTeam = value; }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:00:24.970

检查您在母版页中的授权。这样，我将被检查一次，并且可以避免重复。

# c# - c# webclient从ssl上传和下载数据

> ID：15218072
> 
> 赞同：0
> 
> 时间：2013-03-05T07:27:20.977
> 
> 标签：c#, ssl, webclient

我在 Windows 上有一个 wamp 服务器。SSL 配置正确。在浏览器中，它正在工作抛出 https: 。我有一个脚本 test.php，我想下载一些 POST 数据并将其上传到它。我有我的 C# 代码：

```
WebClient client = new WebClient();
client.Encoding = Encoding.UTF8;
NameValueCollection values = new NameValueCollection();
values.Add("paramtest", "testval");
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
client.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
byte[] result;   
result = client.UploadValues("https://127.0.0.1./test.php", "POST", values); 
string htmlCode = Encoding.UTF8.GetString(result);
textBox1.Text = htmlCode; 
```

使用 http 运行此代码时，我得到了所有数据。输入 https 时，我从服务器收到错误消息：

> 400 错误请求
> 
> # 错误的请求
> 
> 您的浏览器发送了此服务器无法理解的请求。

你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:30:27.663

不确定这是否是原因，但您的网址有一个尾随“。” IP 地址后：

尝试

```
result = client.UploadValues("https://127.0.0.1/test.php", "POST", values); 
```

代替

```
result = client.UploadValues("https://127.0.0.1./test.php", "POST", values); 
```

# iphone - 是否有任何 Apple Direction API？

> ID：15218073
> 
> 赞同：4
> 
> 时间：2013-03-05T07:27:23.113
> 
> 标签：iphone, ios, mapkit

我需要知道，是否有任何苹果方向 api，我们可以通过它获得两点（坐标）之间的方向细节，就像我们可以通过谷歌 api 一样。

我需要在应用程序内的两点之间绘制路线。我不想使用新的 IOS SDK 6 MKMapItem 类打开苹果地图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T05:21:09.707

MKDirections
[Apple 类参考](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKDirections_class/Reference/Reference.html)
[教程](http://www.devfright.com/mkdirections-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:33:15.277

不，除非您可以将用户发送到地图应用程序以获取路线。您可以通过创建一个[MKDirectionRequest](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKDirectionsRequest_class/Reference/Reference.html#//apple_ref/doc/uid/TP40011745)对象来做到这一点。

如果您希望用户留在您的应用程序中，您需要自己进行路由，或者使用不同的 API。

# javascript - 从javascript中的元素中获取多值数据

> ID：15218075
> 
> 赞同：1
> 
> 时间：2013-03-05T07:27:26.957
> 
> 标签：javascript, arrays

我在要在 javascript 函数中使用的隐藏字段中累积值。

```
<input type="hidden" name="testing" value="10" />
<input type="hidden" name="testing" value="101" /> 
```

我相信分配给单个表单字段的多个值被视为 javascript 中的数组对象。当我尝试将值移动到这样的数组中时

```
var elemIDField = new Array();
elemIDField = document.formData.testing.value; 
```

我收到一条错误消息，告诉我数组未定义。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:33:28.907

您需要访问字段数组。在服务器之前它不是一个值数组

```
var elemIDField = document.formData.testing;
vals = [];
for (var i=0;i<elemIDField.length;i++) {
  vals.push(elemIDField[i])
}
alert(vals.join(",") 
```

# mysql - 是否存在 utf8_unicode_cs 排序规则？

> ID：15218077
> 
> 赞同：12
> 
> 时间：2013-03-05T07:27:31.103
> 
> 标签：mysql, utf-8, collation

有谁知道 MySQL 的 utf8_unicode_cs 排序规则是否存在？到目前为止，我的搜索已经枯竭。如果它根本不存在，那么创建一个是否相当简单？或者以某种方式使用 utf8_unicode_ci 或 utf8_bin 但“模拟”人们对 utf8_unicode_cs 排序规则的期望？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T03:26:20.953

我遇到了同样的问题，经过一些谷歌搜索，似乎 MySQL 不包含它。正如你所说，“模拟它”，

1）**为了确保在数据库中区分大小写：将表列设置为`utf8_bin`排序规则**
这允许：

*   严格的选择： `SELECT "Joe"`不会返回带有“joe”/“joE”/“jOe”/等的行
*   严格的 UNIQUE 索引：具有 UNIQUE 索引的列会将大小写差异视为不同的值。例如，如果使用 utf8_unicode_ci 排序规则，在已经有“joe”的表上插入“Joe”将触发“重复键”错误。如果使用 ut8_bin，插入“Joe”就可以了。

2)**要获得正确的结果排序：将排序规则添加到 SQL 查询中：**

```
SELECT ... ORDER BY column COLLATE utf8_unicode_ci 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-21T07:12:37.920

这是一个老问题，但似乎没有被任何其他问题所取代，所以我认为值得发布事情已经改变。

MySQL 版本 8 现在具有以下 utf8mb4 排序规则：

```
 utf8mb4_0900_ai_ci 
 utf8mb4_0900_as_ci
 utf8mb4_0900_as_cs
 ... and many language-specific variants of same. 
```

（据我所知，没有 _ai_cs，但这在任何情况下都不太有用：很少有理由将 [a] 和 [a-acute] 分组，然后将 [A] 和 [A-acute] 分别分组）。

utf8mb4_0900_as_cs 实现了原始问题假设的“utf8_unicode_cs”的目的。（0900 表示它使用 Unicode v 9.0.0，而不是 utf8_unicode_ci 使用的 4.0.0。）

要使用这些，您需要将字段从 utf8 更改为 utf8mb4 字符集 - 但这通常是一个好主意，因为旧的 3-byte-max 编码无法处理例如表情符号和其他非 BMP 字符。

来源：[https ://dev.mysql.com/doc/refman/8.0/en/charset-mysql.html](https://dev.mysql.com/doc/refman/8.0/en/charset-mysql.html)

# ios - 如何使用 UISplitViewController 获取详细视图控制器的主视图控制器？

> ID：15218080
> 
> 赞同：8
> 
> 时间：2013-03-05T07:27:46.613
> 
> 标签：ios, uisplitview

我有一个`UISplitViewController`主控制器和详细控制器：

```
MyMasterController *masterViewController = [[[MyMasterController alloc] initWithDirectory:directoryElement] autorelease];
MyDetailController *detailViewController = [[MyDetailController alloc] init];

masterViewController.detailViewController = detailViewController;

UISplitViewController *splitViewController = [[UISplitViewController alloc] init];
splitViewController.viewControllers = @[[[UINavigationController alloc] initWithRootViewController:masterViewController], [[UINavigationController alloc] initWithRootViewController:detailViewController]];
splitViewController.delegate = self; 
```

这`MyDetailController`是一个表格列表视图控制器，我希望主视图控制器在用户单击单元格时运行一种方法，那么如何获取主控制器详细控制器？

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [master some_method]; // how to get ?
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T09:25:24.030

我会改用通知，所以在你的主人：

```
-(void) viewDidLoad {

    ...
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(someMethod) name:@"DoSomeMethod" object:nil];

}

-(void) someMethod {

    ...

} 
```

并在您的详细信息中：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

   [[NSNotificationCenter defaultCenter] postNotificationName:@"DoSomeMethod" object:nil];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T11:21:09.540

虽然 jjv360s 的回答有很大帮助，但有些人肯定想将值传递给被调用的方法。以下教程帮助了我：

[http://www.devfright.com/nsnotificationcenter-tutorial/](http://www.devfright.com/nsnotificationcenter-tutorial/)

要传递 value `value`，您需要`value`在发送通知的类中公开为属性。接收方法需要将.`(id)`转换为暴露`value`.

# sahi - 使用双 UI 进行测试

> ID：15218082
> 
> 赞同：0
> 
> 时间：2013-03-05T07:27:54.407
> 
> 标签：sahi

我有一个基于浏览器的测试程序，用于测试基于浏览器的应用程序。这意味着我需要记录交替操作测试程序和应用程序的序列，以检查它是否正确反应，以便我可以执行自动化测试。

我应该如何使用 SAHI？

我看不到同时记录两个单独 URL 的方法。我尝试使用框架和 iframe 组合两个 UI，但我无法让 SAHI 记录在框架/iframe 中。

我可以修改测试程序，以便我可以从 SAHI 调用的脚本中调用它，但这反而违背了拥有自动化工具的目标......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:47:42.610

1) 使用 Sahi (script1) 记录第一个网页上的动作

2）记录第二个网页上的动作（script2）

3) 在 script1 中，执行此操作

```
// do steps for UI 1 as recorded in script1
_call(window.open("second url", "newWindow")); // open the second window
_selectWindow("newWindow"); // target the following steps on newWindow
// copy steps from script2 here
_selectWindow(); // return to base window
// perform further base window steps
// Use _selectWindow("newWindow") and _selectWindow() to switch between windows. 
```

希望这可以帮助。

问候，

# model-view-controller - 使用 App Harbor 和 BitBucket 获取 404

> ID：15218083
> 
> 赞同：0
> 
> 时间：2013-03-05T07:28:09.090
> 
> 标签：model-view-controller, connection-string, bitbucket, appharbor

我是 AppHarbour 的新手，我正在尝试在免费帐户上部署我的 MVC 应用程序。

我不断收到 404 错误。

该应用程序来自 Bit-bucket，并且已成功部署。在我的主机名部分，我看到以下内容

![在此处输入图像描述](../Images/36352c9ec90acb3fab92d0386ce906d9.png)

![在此处输入图像描述](../Images/c3dc0f92c9d35c67a4b0b5f14177c31e.png)

所以我在我的机器上的 Hosts 文件中添加了以下内容：176.34.122.158 camelotfaultmanagement.apphb.com

但我仍然得到一个 404 ..

我究竟做错了什么 ？还有一个后续问题我如何编辑其中一个文件以便能够编辑连接到我的数据库的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:26:52.430

看起来您可能还没有任何成功的构建 - 您必须推送到 Bitbucket 才能触发您的第一个构建。您可以在应用仪表板上查看构建列表：[https ://appharbor.com/applications/camelotfaultmanagement](https://appharbor.com/applications/camelotfaultmanagement)

要使用内置的 .apphb.com 域，您不必搞乱任何 DNS 设置。

# ruby - 解析 XML 以及如何处理嵌套数组和哈希

> ID：15218084
> 
> 赞同：0
> 
> 时间：2013-03-05T07:28:11.240
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用这个实例变量：

```
@response = HTTParty.get("http://www.bart.gov/dev/eta/bart_eta.xml") 
```

我正在尝试使用 rails 3.2 解析 xml：

```
<% @response.each do |r| %>
  <% r.each do |root| %>
    <%= root.class %>
  <% end %>
<% end %> 
```

输出是

```
String Hash 
```

我得到“root.class”的“字符串哈希”。我不明白它怎么可能是“字符串哈希”，我想实现另一种“每个”方法来深入 xml 层。
“字符串哈希”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:47:05.597

您的`@`响应对象是类型`HTTParty::Response`。

看起来它正在包装一个包含两个值的数组：第一个值是字符串，“root”，第二个值是哈希。

由于您的 ERB 代码中没有换行符，因此当您遍历数组时，它会在同一行打印出 String 和 Hash。

尝试使用`root.inspect`更深入地挖掘您实际迭代的值。

# javascript - Coffeescript 中井字游戏的 Minimax 解决方案的错误

> ID：15218088
> 
> 赞同：3
> 
> 时间：2013-03-05T07:28:21.720
> 
> 标签：javascript, algorithm, coffeescript, tic-tac-toe, minimax

*（注意：这不是 CS 作业）*

我已经尝试在 Coffeescript 中实现 minimax 游戏树搜索算法，并继续使用我的算法出错。似乎有两个主要问题：1）算法本身在 alpha-beta 修剪期间似乎没有返回正确的值（显然是更大的问题），以及 2）我的游戏板对象，由 9 个整数组成的数组表示，似乎附加到 DOM，使板的复制并将其作为参数传递给 minimax 搜索函数的递归调用有问题。

有 3 类：棋盘、机器人（极小极大算法所在的位置）和游戏。请注意，加载时会启动一个新游戏（相应地弹出调试警报），并且使用预先配置的播放来模拟板以简化调试。

您会注意到，我已经尝试了三个单独的极小极大解决方案尝试（在我的业余时间我一直在努力解决这个问题），后两个现在已被注释掉。在我的最终解决方案中，我一直在关注[这个伪代码](http://en.wikipedia.org/wiki/Alpha-beta_pruning)。

## 索引.html

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tic Tac Toe | JMS</title>
    <meta name="description" content="Tic-tac-toe using the minimax algorithm">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
  </head>
  <body>

    <h1 id="output">empty</h1>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script>

    <!-- <script src="js/main.js"></script> -->
    <script src="js/rules.js"></script>
    <script src="js/board.js"></script>
    <script src="js/game.js"></script>
    <script src="js/bot.js"></script>

    <!-- <script>
      var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script> -->
  </body>
</html> 
```

## board.coffee

```
class Board 
  constructor: ->
    @spaces = [0,1,2,3,4,5,6,7,8]

  reset: ->
    @spaces = [0,1,2,3,4,5,6,7,8]

  setSpace: (index, side) ->
    console.log "board.setSpace: played at index #{index} with side #{side}"
    @spaces[index] = side
    $('#output').text(@spaces)

  setSpaces: (array) ->
    @spaces = array

  getSpace: (index) ->
    @spaces[index]

  getSpaces: ->
    @spaces 
```

## 机器人咖啡

```
class Bot
  constructor: (side) ->
    console.log "created a new bot!"
    @name = "Gandalf"
    @infinity = 99
    @side = side

  calculateMove: (board) ->
    console.log "Bot.calculateMove with #{board.getSpaces()}"
    debugger 

    isBoardEmpty = (board) -> # works
      console.log "Bot.calculateMove: board is #{board.getSpaces()}"
      boardSpaces = board.getSpaces()
      for space in boardSpaces
        console.log "Bot.calculateMove: checking if space #{space} is empty"
        if typeof space is "string" 
          console.log "Bot.calculateMove: board isn't empty"
          return false
      return true

    return 4 if isBoardEmpty(board)

    boardCopy = jQuery.extend({}, board) # this copies the board 
                                         # but still refers to the same spaces 
                                         # in the copy. Necessary?
    console.log "about to call Bot.move"
    move = @search(boardCopy, @side, 0, -@infinity, +@infinity)

    return move

  search: (board, side, depth, alpha, beta)->
    # needs to return the index of the move
    debugger

    ##### TRY 1 #####
    #################    
    value = @nodeValue(board, side)
    if value isnt 0
      if value > 0 then return value - depth else return value + depth

    otherside = if side is 'X' then 'O' else 'X'
    moves = @generateMoves board

    boardSpaces = board.getSpaces()
    boardCopy = new Board()
    boardCopy.setSpaces(boardSpaces) 

    if side is 'O'
      for move in moves
        boardCopy.setSpace(move, side)
        score = @search(boardCopy, otherside, depth + 1, beta, alpha)
        alpha = score if score > alpha
        @undoMove(boardCopy, move)
        return alpha if alpha >= beta

    if side is 'X'
      for move in moves
        boardCopy.setSpace(move, side)
        score = @search(boardCopy, otherside, depth + 1, beta, alpha)
        beta = score if score < beta
        @undoMove(boardCopy, move)
        return beta if alpha >= beta

    ##### TRY 2 #####
    #################    
    # value = @nodeValue(board, side)
    # console.log "Bot.search: depth is #{depth}"
    # console.log "Bot.search: value is #{value}"

    # if value isnt 0
    #   if value > 0 then return value - depth else return value + depth

    # moves = @generateMoves board

    # return value if moves.length is 0

    # otherside = if side is 'X' then 'O' else 'X'

    # for move in moves
    #   console.log "Bot.search: #{move} in moves" 

    #   boardSpaces = board.getSpaces()
    #   boardCopy = new Board()
    #   boardCopy.setSpaces(boardSpaces) # This could be rolled into a optional argument 
    #                                    # on the board constructor

    #   @makeMove(boardCopy, move, side)
    #   potentialAlpha = -@search(board, otherside, depth + 1, -beta, -alpha)
    #   @undoMove(boardCopy, move)  # THINK ITS SOMETHING WITH THE BOARD BEING USED
    #   break if beta <= alpha

    #   if potentialAlpha > alpha
    #     alpha = potentialAlpha
    #     if depth is 0
    #       bestMove = move

    # if depth isnt 0 then return alpha else return bestMove

    ##### TRY 3 #####
    #################
    # value = @nodeValue(board, side)
    # console.log "Bot.search: depth is #{depth}"
    # console.log "Bot.search: value is #{value}"

    # if value isnt 0
    #   if value > 0 then return value - depth else return value + depth

    # moves = @generateMoves board

    # return value if moves.length is 0 # ?

    # otherside = if side is 'X' then 'O' else 'X'

    # boardSpaces = board.getSpaces()
    # boardCopy = new Board()
    # boardCopy.setSpaces(boardSpaces) # This could be rolled into a optional argument 
    #                                  # on the board constructor
    # if side is 'O'
    #   for move in moves

    #     boardCopy.setSpace(move, side)
    #     score = @search(boardCopy, otherside, depth + 1, beta, alpha)
    #     alpha = score if score > alpha
    #     return alpha if alpha >= beta
    #     break if beta > alpha

    # else
    #   for move in moves
    #     boardCopy.setSpace(move, side)
    #     score = @search(boardCopy, otherside, depth + 1, beta, alpha)
    #     beta = score if score < beta
    #     return beta if alpha >= beta
    #     break if alph > beta

  nodeValue: (board, side) ->
    console.log "Bot.nodeValue: board is #{board.getSpaces()} and side is #{side}"
    gameResult = checkGameOver board
    console.log "Bot.nodeValue: gameResult is #{gameResult}"
    if gameResult is false or gameResult is 'tie'
      console.log "returning 0 for nodeValue"
      return 0 
    else if gameResult is side
      console.log "returning #{@infinity} for nodeValue"
      return @infinity
    else
      console.log "returning #{-@infinity} for nodeValue"
      return -@infinity

  generateMoves: (board) ->
    console.log "Bot.generateMoves: board is #{board.getSpaces()}"
    moves = []
    boardSpaces = board.getSpaces()

    for space in boardSpaces
      if typeof space is "number"
        moves.push(space)

    console.log "Bot.generateMoves: moves are #{moves}"
    return moves

  makeMove: (board, move, side) ->
    console.log "makeMove: board before makeMove with move #{move} is #{board.getSpaces()}"
    board.setSpace(move, side)
    # board[move] = side
    console.log "makeMove: board after makeMove is #{board.getSpaces()}"

    return board                                   #####

  undoMove: (board, move) ->

    console.log board.getSpaces()
    boardSpaces = board.getSpaces()
    board.setSpace(move, move)
    console.log board.getSpaces()

    return board 

# minimax = (player, board) ->

# minimax (player, board) ->
#   winner if gameOver(currentPosition) 
```

## 规则.咖啡

```
checkGameOver = (board) ->
  opportunities = 8
  result        = false

  check = (space) ->
    board.getSpace(space)

  winningCombinations = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],
                         [1,4,7],[2,5,8],[0,4,8],[2,4,6]]

  for combo in winningCombinations
    firstPlay       = combo[0]
    secondPlay      = combo[1]
    thirdPlay       = combo[2]

    if typeof check(firstPlay) is "string" and 
    typeof check(secondPlay) is "string" and 
    typeof check(thirdPlay) is "string"
      opportunities -= 1
      console.log "checkGameOver: opportunities decreased to #{opportunities}"

    if check(firstPlay) is check(secondPlay) is check(thirdPlay)
      alert "Winner is #{board.getSpace(firstPlay)}"
      return result = board.getSpace(firstPlay)

    if opportunities is 0
      alert "tie"
      return result = "tie"

  return result 
```

## 游戏.咖啡

```
class Game
  constructor: ->
    @board = new Board()
    $('#output').text(@board.getSpaces())

  new: ->
    @board.reset()
    @result = false
    @side = "X"
    @bot = new Bot "O"
    @moves = 0

  firstTurn: ->
    # Production
    # space = prompt "What space are you playing?"
    # @makeMove space

    # Testing
    @board.setSpaces ['X',1,2,3,'O',5,6,7,8] # Testing – Bot should output 1 for calMove
    @makeMove 2

  makeMove: (space) =>
    @board.setSpace(space, @side)
    @moves += 1
    @concludeTurn()

  listenForMove: ->
    space = prompt "What space are you playing?"
    @makeMove space

  concludeTurn: ->
    @result = checkGameOver @board
    console.log "Result is #{@result}"

    if @result is 'X' or @result is 'O' or @result is 'tie'
      alert "Game.concludeTurn: game is over, heading into gameOver"
      return @gameOver @result 
    @changeTurn()

  changeTurn: ->
    @side = if @side is 'X' then 'O' else 'X'
    console.log "in change turn, side is now #{@side}"
    @listenForMove() if @side is 'X'

    console.log "Game.changeTurn: bot (#{@bot}) is about to calc move"
    @makeMove(@bot.calculateMove @board) if @side is 'O'

    # placement = @bot.calculateMove @board if @side is 'O'
    # console.log placement
    # @board.setSpace(placement, 'O') # give a secondary argument to makeMove and remove
    # @concludeTurn()

  gameOver: (winner) ->
    console.log "Game.concludeTurn: winner is #{@result}"
    return
    # answer = prompt "Winner is #{winner}! Would you like to play again?"
    # @playAgain answer

  # playAgain: (answer) ->
  #   alert "Suite yourself" if answer is false
  #   @new() if answer is true

# check if game is over
# check moves
#   if even then human
# else 
#   bot
# 
# increment moves?

# reset grid
# turn = "X"
# move = 0

g = new Game()
g.new()
g.firstTurn() 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:38:18.027

问题一：

`return value if moves.length is 0`在计算移动之后，您的尝试#1 就丢失了。当我测试您的尝试 #2 时，它完美无缺。我必须围绕该代码做很多工作才能使整个工作正常，但这与尝试#2 中的极小极大代码无关。在您的`bot.coffee`中，请禁用您的其他 2 次尝试，仅启用尝试 #2。然后`game.coffee`用下面的替换。

```
class Game
  constructor: ->
    @board = new Board()
    $('#output').text(@board.getSpaces())

  new: ->
    @board.reset()
    @result = false
    @side = "X"
    @bot = new Bot "O"
    @moves = 0

  firstTurn: ->
    # Production
    space = prompt "What space are you playing?"
    if space is null
      return
    @makeMove space

    # Testing
    #@board.setSpaces ['X',1,2,3,'O',5,6,7,8] # Testing – Bot should output 1 for calMove
    #@makeMove 2

  makeMove: (space) =>
    @board.setSpace(space, @side, true)
    @moves += 1
    @concludeTurn()

  listenForMove: ->
    space = prompt "What space are you playing?"
    if space is null
      return
    @makeMove space

  concludeTurn: ->
    @result = checkGameOver @board
    #alert "Result is #{@result}"

    if @result is 'X' or @result is 'O' or @result is 'tie'
      alert "Game.concludeTurn: game is over, heading into gameOver"
      return @gameOver @result 
    @changeTurn()

  changeTurn: ->
    @side = if @side is 'X' then 'O' else 'X'
    console.log "in change turn, side is now #{@side}"
    if @side is 'X'
      @listenForMove()
    else if @side is 'O'
      console.log "Game.changeTurn: bot (#{@bot}) is about to calc move"
      @makeMove(@bot.calculateMove @board)

    # placement = @bot.calculateMove @board if @side is 'O'
    # console.log placement
    # @board.setSpace(placement, 'O') # give a secondary argument to makeMove and remove
    # @concludeTurn()

  gameOver: (winner) ->
    console.log "Game.concludeTurn: winner is #{@result}"
    answer = prompt "Winner is #{winner}! Would you like to play again?"
    @playAgain answer

  playAgain: (answer) ->
    alert "Suite yourself" if answer is false
    @new() if answer is true

# check if game is over
# check moves
#   if even then human
# else 
#   bot
# 
# increment moves?

# reset grid
# turn = "X"
# move = 0

g = new Game()
g.new()
g.firstTurn() 
```

并`board.coffee`变成：

```
class Board 
  constructor: ->
    @spaces = [0,1,2,3,4,5,6,7,8]

  reset: ->
    @spaces = [0,1,2,3,4,5,6,7,8]

  setSpace: (index, side, print = false) ->
    #console.log "board.setSpace: played at index #{index} with side #{side}"
    @spaces[index] = side
    if print
      $('#output').text(@spaces)

  setSpaces: (array) ->
    @spaces = array

  getSpace: (index) ->
    @spaces[index]

  getSpaces: ->
    @spaces 
```

问题2：

游戏板对象未绑定到 DOM，但每次移动时都会将其打印出来。而且由于您使用它的实例来计算您的极小值，因此您总是在不应该打印的时候打印到屏幕上。所以我在`board.coffee`上面进行了更改，只添加了一个打印参数来解决这个问题。我不喜欢你写整个东西的方式，它在所有方面都是完全低效的，我永远不会那样写，但问题不在于效率，所以我会留在那里。

# php - 网络服务 XML 编码错误

> ID：15218096
> 
> 赞同：0
> 
> 时间：2013-03-05T07:29:00.810
> 
> 标签：php, xml, web-services

以下是我得到的错误，此页面包含以下错误：

> 第 1 列第 1 行错误：文档末尾有额外内容 第 1 列第 1 行错误：编码错误

下面是第一个错误之前的页面渲染。

以下是代码，

```
<?php

if (isset($_GET['itemno'])) {
    $number_of_posts = isset($_GET['number']) ? intval($_GET['number']) : 20;
    $format          = strtolower($_GET['format']) == 'json' ? 'json' : 'xml';
    $user_id         = intval($_GET['itemno']);
    /* connect to mysql database */
    $link = mysql_connect('localhost', 'root', '') or die('Can not connect to the Database');
    mysql_select_db('test', $link) or die('Can not select the Database');
    /* select records from the database */
    $query = "SELECT qty, price FROM postatusinfo WHERE itemno = $user_id";
    $result = mysql_query($query, $link) or die('Errant query:  ' . $query);
    /* create array of the records */
    $posts = array();
    if (mysql_num_rows($result)) {
        while ($post = mysql_fetch_assoc($result)) {
            $posts[] = array('post' => $post);
        }
    }
    /* output in required format */
    if ($format == 'json') {
        header('Content-type: application/json');
        echo json_encode(array('posts' => $posts));
    } else {
        header('Content-type: text/xml');
        echo '<posts>';
        foreach ($posts as $index => $post) {
            if (is_array($post)) {
                foreach ($post as $key => $value) {
                    echo '<', $key, '>';
                    if (is_array($value)) {
                        foreach ($value as $tag => $val) {
                            echo '<', $tag, '>', htmlentities($val), '</', $tag, '>';
                        }
                    }
                    echo '</', $key, '>';
                }
            }
        }
        echo '</posts>';
    }
    /* close database connection */
    @mysql_close($link);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:33:12.263

我认为这是文件编码的问题，尤其是[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)。

尝试使用显示 BOM 的编辑器（如 notepad++）打开，然后尝试将其删除。

# c# - WiX 引导程序：如何访问执行路径

> ID：15218101
> 
> 赞同：1
> 
> 时间：2013-03-05T07:29:21.050
> 
> 标签：c#, wpf, wix

我正在尝试从我的引导程序中访问我的 Setup.exe 的路径。但是 using`Assembly.GetExecutingAssembly().Location`总是返回可执行文件似乎被解包的临时路径。当我的 Setup.exe 从那里启动时，我怎样才能得到“c:\downloads”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:39:32.077

```
Application.StartupPath; 
```

这为您提供了启动程序的 exe 的路径：

[MSDN](http://msdn.microsoft.com/de-de/library/system.windows.forms.application.startuppath.aspx)

# javascript - 覆盖 CSS 规则

> ID：15218110
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:30:05.940
> 
> 标签：javascript, css, overriding

我想在我的 DOM 树中找到具有类名的节点：`ui-slider-handle ui-state-default ui-corner-all`. 当我找到他们时，我想用我的 CSS 覆盖他们的 CSS。但我不能让我的代码工作：

```
var p = document.getElementsByClassName("ui-slider-handle ui-state-default ui-corner-all");
        for( var i=0; i<p.length; p++) {
                p[i].style.width = 5 + "px !important";
                p[i].style.height = 5 + "px !important";
            }

<div class="ui-slider ui-widget ui-widget-content ui-corner-all dhSliderDesktop ui-slider-vertical" style="visibility: visible;"><div class="ui-slider-range ui-widget-header ui-slider-range-min" style="height: 100%;"></div><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="bottom: 100%;"></a></div> 
```

![在此处输入图像描述](../Images/47fc86526d895cb53b89b1e2cd38adb5.png) ![在此处输入图像描述](../Images/6c3c6bde4e85bf847a02ff13be1ce2f1.png)

我的元素创建：

```
var slider = document.createElement("div");
        $(slider).slider({
            orientation: "vertical",
            range: "min",
        });

        if(isMobile)
          $(slider).slider().addClass("dhSliderMobile");
      else
          $(slider).slider().addClass("dhSliderDesktop"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:52:17.190

如果你使用 jQuery

```
var slider = document.createElement("div");
$(slider).slider({
    orientation: "vertical",
    range: "min",
});

var items = $('.ui-slider-handle', slider);
console.log('Test: ', items.length, items)
console.log('HTML: ', slider.html())
$('.ui-slider-handle', slider).each(function(i, v){
    var style = $(this).attr('style');
    style += (style? ';' : '') + 'height: 5px !important; width: 5px !important;'
    $(this).attr('style', style)
}) 
```

另一个尝试的解决方案

```
var slider = document.createElement("div");
$(slider).slider({
    orientation: "vertical",
    range: "min",
});

$('.ui-slider-handle', slider).addClass('myoverride'); 
```

然后添加css规则

```
.myoverride {
    height: 5px !important;
    width: 5px !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:36:36.243

请注意，该`getElementsByClassName`方法不兼容跨浏览器。

您可以使用 jquery`$(".ui-slider-handle ui-state-default ui-corner-all")`选择器或编写自己的跨浏览器代码来按类名捕获节点，如下所示：

[http://javascript.ru/unsorted/top-10-functions#8-getelementsbyclass](http://javascript.ru/unsorted/top-10-functions#8-getelementsbyclass)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:54:30.557

1.  您的类名选择器将不起作用，因为它没有完整的类名。这是正确`ui-slider ui-widget ui-widget-content ui-corner-all dhSliderDesktop ui-slider-vertical`的。但如果这是由您的脚本生成的，那么我认为您将不得不求助于 jQuery 以获得更好的选择器。另外 getElementsByClassName 不是跨浏览器。

    jQuery 版本的选择器：

    ```
    $(".ui-slider-handle ui-state-default ui-corner-all") 
    ```

    或者您可以简单地为您的元素分配一个 ID 并使用`getElementByID`而不是类名来调用它。

2.  你的循环有点偏离。它应该是 i++ 而不是 p++。

3.  javascript 中的样式属性无法接收“！important”。

通过修复您的脚本，这应该可以工作。

```
var p = document.getElementsByClassName("ui-slider ui-widget ui-widget-content ui-corner-all dhSliderDesktop ui-slider-vertical");

for( var i=0; i<p.length; i++) {
     p[i].style.width = "5px";
     p[i].style.height = "5px";
     console.log(p[i].style);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:16:03.043

使用 Document.querySelector 浏览器兼容性：IE8+

```
alert(document.querySelectorAll(".ui-slider-handle.ui-state-default.ui-corner-all").length) 
```

# regex - 在 Perl 中获取不同格式的日期？

> ID：15218123
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:31:14.053
> 
> 标签：regex, perl, date

我需要获取可能采用 3 种可能格式的日期。

1.  2012 年 11 月 20 日
2.  11.20.2012
3.  2012 年 11 月 20 日

我怎么能在 Perl 中实现这一点。我正在尝试使用 RegEx 来获得我想要的东西。这是我的代码。

```
my @dates = ("Mon 11/20/2012","2012.11.20","20-11-2012"); #array values may vary in every run 
foreach my $date (@dates){
    $date =~ /[-.\/\d+]/g;
    print "Date: $date \n";
} 
```

我希望输出是。（上面的代码不打印任何东西）

```
Date: 11/20/2012
Date: 2012.11.20
Date: 20-11-2012 
```

我哪里错了？请帮忙。谢谢

注意：我想尽可能不使用任何 CPAN 模块来实现这一点。我知道有很多 CPAN 模块可以提供我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:07:55.490

你的代码几乎可以产生你想要的。我假设您的输入有点复杂，或者您发布了实际上并未运行的代码。

无论哪种方式，问题是这样的

```
$date =~ /[-.\/\d+]/g; 
```

首先，您的加乘数在字符类中：它应该在它之后。其次，它只是一个模式匹配，你需要在列表上下文中使用它，并存储它的返回值：

```
my ($match) = $date =~ /[-.\/\d]+/g;
print "Date: $match\n"; 
```

然后它将返回找到的第一个字符串，其中包含一个或多个破折号、句点、斜杠或数字。请注意，它也会匹配其他内容，因为它是一个相当不严格的正则表达式。

为什么它有效？`/g`因为当使用全局修饰符时，列表上下文中的模式匹配会返回匹配列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:35:38.420

我强烈推荐使用具有丰富功能的[DateTime::Format::Strptime模块。](http://search.cpan.org/perldoc?DateTime%3a%3aFormat%3a%3aStrptime)不仅要解析字符串，还要检查日期是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T07:36:45.307

为什么不一次搜索一种格式？

```
=~ m!(\d{2}/\d{2}/\d{2}|\d{4}\.\d{2}\.\d{2}|\d{2}-\d{2}-\d{4})! 
```

应该做的伎俩。除此之外，还有一个处理日期的模块称为[DateTime](http://search.cpan.org/perldoc?DateTime)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:14:17.117

尝试依次匹配格式。下面的正则表达式匹配您允许的任何分隔符（`/`、、`.`或`-`），然后通过反向引用（`\2`或`\3`）需要相同的分隔符。否则，您有三个可能的分隔符乘以一年中两个可能的位置，以在您的模式中做出*六个*备选方案。

```
#! /usr/bin/env perl

use strict;
use warnings;

#array values may vary in every run
my @dates = ("Mon 11/20/2012","2012.11.20","20-11-2012");

my $date_pattern = qr<
  \b  # begin on word boundary
  (
    (?:           [0-9][0-9] ([-/.]) [0-9][0-9] \2 [0-9][0-9][0-9][0-9])
  | (?: [0-9][0-9][0-9][0-9] ([-/.]) [0-9][0-9] \3 [0-9][0-9])
  )
  \b  # end on word boundary
>x;

foreach my $date (@dates) {
  if (my($match) = $date =~ /$date_pattern/) {
    print "Date: $match\n";
  }
} 
```

输出：

```
日期：2012 年 11 月 20 日
日期：2012.11.20
日期：20-11-2012
```

在我第一次尝试上面的代码时，我`\2`在 YYYY-MM-DD 替代方案中应该有`\3`，但无法匹配。为了避免我们计算括号，[版本 5.10.0 添加了命名的捕获缓冲区](http://perldoc.perl.org/perl5100delta.html#Named-Capture-Buffers)。

> *   **命名捕获缓冲区**
> 
> 现在可以在模式中命名捕获括号并按名称引用捕获的内容。命名语法是`(?<NAME>....)`. `\k<NAME>`可以使用语法反向引用命名缓冲区。在代码中，新的神奇哈希值`%+`可`%-`用于访问捕获缓冲区的内容。

使用这个方便的功能，上面的代码变成

```
#! /usr/bin/env perl

use 5.10.0;  # named capture buffers

use strict;
use warnings;

#array values may vary in every run
my @dates = ("Mon 11/20/2012","2012.11.20","20-11-2012");

my $date_pattern = qr!
  \b  # begin on word boundary
  (?<date>
    (?:           [0-9][0-9] (?<sep>[-/.]) [0-9][0-9] \k{sep} [0-9][0-9][0-9][0-9])
  | (?: [0-9][0-9][0-9][0-9] (?<sep>[-/.]) [0-9][0-9] \k{sep} [0-9][0-9])
  )
  \b  # end on word boundary
!x;

foreach my $date (@dates) {
  if ($date =~ /$date_pattern/) {
    print "Date: $+{date}\n";
  }
} 
```

并产生相同的输出。

上面的代码还是有很多重复的。使用[`(DEFINE)`](http://perldoc.perl.org/perlre.html#%28DEFINE%29)结合命名捕获的特殊情况，我们可以使模式更好。

```
#! /usr/bin/env perl

use 5.10.0;

use strict;
use warnings;

#array values may vary in every run
my @dates = ("Mon 11/20/2012","2012.11.20","20-11-2012");

my $date_pattern = qr!
  \b (?<date> (?&YMD) | (?&DMY)) \b

  (?(DEFINE)
    (?<SEP>  [-/.])
    (?<YYYY> [0-9][0-9][0-9][0-9])
    (?<MM>   [0-9][0-9])
    (?<DD>   [0-9][0-9])
    (?<YMD>  (?&YYYY) (?<sep>(?&SEP)) (?&MM) \k<sep> (?&DD))
    (?<DMY>  (?&DD)   (?<sep>(?&SEP)) (?&MM) \k<sep> (?&YYYY))
  )
!x;

foreach my $date (@dates) {
  if ($date =~ /$date_pattern/) {
    print "Date: $+{date}\n";
  }
} 
```

是的，名为 DMY 的子模式也匹配日期 int MDY 形式。现在它就足够了，[你不需要它](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)。

# google-maps-api-3 - IE 在 Google Maps Javascript API ver3 中加载 Main.js 时出错

> ID：15218125
> 
> 赞同：2
> 
> 时间：2013-03-05T07:31:21.003
> 
> 标签：google-maps-api-3

我正在使用 Google Maps Javascript API ver3 来显示世界位置。以下是我正在使用的示例代码：

```
<!DOCTYPE html> 
<html>
   <head>
     <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
     <style type="text/css">
       html { height: 100% }
       body { height: 100%; margin: 0; padding: 0 }
       #map_canvas { height: 100% }
     </style>
     <script type="text/javascript"       src="http://maps.googleapis.com/maps/api/js?sensor=true">
     </script>
     <script type="text/javascript">
        function addMarkers(location,locationDetail,map){

            var color = "#000000"

            if(locationDetail[1]=="A"){
                color = "#FF0000";
                scl = 3;
            }
            else if(locationDetail[1]=="B"){
                color = "#0000FF"
                scl = 4;
            }
            else if(locationDetail[1]=="C"){
                color = "#00FF00"
                scl = 5;
            }

            var marker = new google.maps.Marker({
                position: location,
                title: locationDetail[0],
                icon: { 
                    path: google.maps.SymbolPath.CIRCLE,
                    scale: scl,
                    fillColor: color,
                    fillOpacity:1,
                    strokeWeight:1
                }
            });

            // To add the marker to the map, call setMap();
            marker.setMap(map); 

    }
       function initialize() {

        //Marking Latitude and Longitude
        var myLatlng = [
                new google.maps.LatLng(24.466667,54.366667),
new google.maps.LatLng(-34.4,-58.24),
new google.maps.LatLng(-33.8641,151.0823)

                   ];
        var myLatlngDet = [
["Abu Dhabi","A"],
["Buenos Aires","B"],
["HOMEBUSH","C"]        
                  ];

        //Map Options to customize map
            var mapOptions = {
            zoom:2,
        center: new google.maps.LatLng(40,0),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapMaker: true,
        minZoom : 2,
        scrollwheel: false,
        mapTypeControl:true,
        mapTypeControlOptions: { 
            style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            position: google.maps.ControlPosition.BOTTOM_CENTER
        },
        scaleControl:true,
        scaleControlOptions: { 
            position: google.maps.ControlPosition.TOP_LEFT
        },
        streetViewControl:true,
        streetViewControlOptions: {
                position: google.maps.ControlPosition.LEFT_TOP     
        }, 
        overviewMapControl:false,
        zoomControl:true,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.LARGE,
            position: google.maps.ControlPosition.LEFT_CENTER
        },
        panControl:true,
        panControlOptions: {
            position: google.maps.ControlPosition.TOP_RIGHT 
        }
         };

     //Generating map in the div
         var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);

    for(i=0; i < myLatlng.length; i++){

        addMarkers(myLatlng[i],myLatlngDet[i],map);
    }

       }     
      </script>
   </head>

   <body onload="initialize()">
     <div id="map_canvas" style="height: 100%; width: 80%;">
     </div>   
   </body> 
</html> 
```

问题是 - 有时标记会正确显示，但有时我会收到一个 javascript 错误，如下所示：

'对方法或属性访问的意外调用' main.js

你能帮我找出问题的原因吗？

我正在使用 IE8。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:13:32.713

我的猜测是身体的 onload 并没有等到 googlemap 的脚本被加载。理论上，body 可以比 googlemap 脚本加载得更快（[相关讨论](https://stackoverflow.com/questions/11258068/is-it-possibile-to-wait-till-all-javascript-files-are-loaded-before-executing-ja)）。试着放

```
window.onload=initialize; 
```

在脚本的底部，而不是使用正文的 onload，看看这是否解决了您的问题。我很难重现这一点。

*更新* 您应该等到 googlemap 加载完毕，然后再加载窗口。看看这个问题：[如何检查谷歌地图是否已满载？](https://stackoverflow.com/questions/832692/how-to-check-if-google-maps-is-fully-loaded)

# vb.net - ITextSharp 包含输入文件中的所有页面

> ID：15218126
> 
> 赞同：0
> 
> 时间：2013-03-05T07:31:21.647
> 
> 标签：vb.net, pdf, adobe, itextsharp, itext

我通过使用 itextsharp 库将文本添加到 pdf 中使用了以下代码。（从链接[ITextSharp 将代码插入到现有 pdf](https://stackoverflow.com/questions/3992617/itextsharp-insert-text-to-an-existing-pdf)

```
 Dim reader As New PdfReader(oldFile)
    Dim size As iTextSharp.text.Rectangle = reader.GetPageSizeWithRotation(1)
    Dim document As New iTextSharp.text.Document(size)

    ' open the writer
    Dim fs As New FileStream(newFile, FileMode.Create, FileAccess.Write)
    Dim writer As PdfWriter = PdfWriter.GetInstance(document, fs)
    document.Open()

    ' the pdf content
    Dim cb As PdfContentByte = writer.DirectContent

    ' select the font properties
    Dim bf As BaseFont = BaseFont.CreateFont(BaseFont.ZAPFDINGBATS, BaseFont.CP1252, BaseFont.NOT_EMBEDDED)
    'cb.SetColorFill(GrayColor.DARK_GRAY)
    cb.SetFontAndSize(bf, 8)
    cb.BeginText()
    Dim Text As String = "l"
    ' put the alignment and coordinates here
    cb.ShowTextAligned(2, Text, 84, 729, 0)
    cb.EndText()

    Dim bf1 As BaseFont = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED)
    cb.SetFontAndSize(bf1, 8)
    cb.BeginText()
    Dim text1 As String = "Navaneeth A"
    cb.ShowTextAligned(1, text1, 65, 690, 0)
    cb.EndText()

    ' create the new page and add it to the pdf
    Dim page As PdfImportedPage = writer.GetImportedPage(reader, 1)
    cb.AddTemplate(page, 0, 0)

    ' close the streams and voilá the file should be changed :)
    document.Close()
    fs.Close()
    writer.Close()
    reader.Close() 
```

现在的问题是源pdf大约有5页。但是这段代码生成的输出文件只有第一页。那么如何在输出文件中包含源文件的所有页面？源pdf链接是[http://law.incometaxindia.gov.in/DITtaxmann/IncomeTaxRules/PDF/Ay-2012-2013/SAHAJ2012_14.pdf](http://law.incometaxindia.gov.in/DITTaxmann/IncomeTaxRules/PDF/Ay-2012-2013/SAHAJ2012_14.pdf)

* * *

```
 Dim reader As New PdfReader(oldFile)
    Using ms = New MemoryStream()
        Dim stamper As New PdfStamper(reader, ms)
        'Using stamper  'As New PdfStamper(reader, ms)
        stamper.RotateContents = False
        Dim canvas As PdfContentByte = stamper.GetOverContent(1)
        ColumnText.ShowTextAligned(canvas, Element.ALIGN_LEFT, New Phrase("Hello people!"), 36, 540, 0)
        'End Using

        Dim result As Byte() = ms.ToArray()
        File.WriteAllBytes(newFile, result)
        System.Diagnostics.Process.Start(newFile)
    End Using 
```

我做了以下更改，但它不起作用.result 文件只是一个 1kb 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:06:48.520

不幸的是，您发现了不应使用的示例代码。要操作现有的 PDF，您应该使用.`PdfStamper`而不是`PdfWriter`.

您的代码（即使在更正复制所有页面之后）不会复制交互式功能（表单、其他注释......）。相反，您应该将代码基于[iText in Action — 第 2 版的](http://itextpdf.com/book/index.php)[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)中解释的[Webified iTextSharp Example](http://kuujinbo.info/iTextInAction2Ed/index.aspx) [StampText.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=StampText)：

```
PdfReader reader = new PdfReader(resource);
using (var ms = new MemoryStream()) {
  using (PdfStamper stamper = new PdfStamper(reader, ms)) {
    stamper.RotateContents = false;
    PdfContentByte canvas = stamper.GetOverContent(1);
    ColumnText.ShowTextAligned(
      canvas,
      Element.ALIGN_LEFT, 
      new Phrase("Hello people!"), 
      36, 540, 0
    );
  }
  byte[] result = ms.ToArray();
} 
```

如果您像这样更改该代码，您也可以控制字体和颜色：

```
[...]
Font FONT = new Font(Font.FontFamily.HELVETICA, 12, Font.BOLD, new GrayColor(0.75f));
PdfContentByte canvas = stamper.GetOverContent(1);
ColumnText.ShowTextAligned(
  canvas,
  Element.ALIGN_LEFT, 
  new Phrase("Hello people!", FONT), 
  36, 540, 0
);
[...] 
```

**PS**如果您出于某些原因必须使用一些旧的 iTextSharp 版本，某些细节可能会有所不同（您的其他问题似乎暗示您使用的是 VB6 ......）。即使这样，您也应该切换到使用`PdfStamper`.

# grid - 剑道网格分组消息没有改变

> ID：15218128
> 
> 赞同：2
> 
> 时间：2013-03-05T07:31:23.273
> 
> 标签：grid, kendo-ui, message, grouping

您好，提前感谢您的任何建议。我正在使用 Kendo UI 中的分组选项，并且我想更改默认分组消息：将列标题拖放到此处... 所以我更改了 3 个名为 kendo.all.min 的 .js 文件中的文本。 js、kendo.web.min.js 和 kendo.groupable.min.js，添加到所需的文本并且文本不会更改。我想我错过了一些东西，因为当我分组和取消分组时，我看到我的消息一秒钟，但随后网格再次重新加载，我再次收到原始消息。消息是来自 dll 还是来自 java 脚本？希望有人可以帮助它真的很重要。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:47:57.387

如果您做得正确并且正在加载 JS 的修改版本，它应该可以工作，但这不是本地化消息的方式...... **KendoUI**（在最新版本中）已经支持它。你应该这样做：

```
groupable: {
    messages: {
        empty: "Custom message text"
    }
}, 
```

正如他们[在此处的文档中所示](http://docs.kendoui.com/api/web/grid#groupablemessagesempty-string)

请记住，如果您修改他们的代码，下次他们发布新版本时，您必须将他们的版本与您的版本合并，以获得 KendoUI 团队开发的修复和新功能以及您的更改。

**编辑**如果您想为文档中的每个 Grid 使用它，请将其放在 JavaScript 代码的开头：

```
kendo.ui.Groupable.prototype.options.messages =
        $.extend(kendo.ui.Groupable.prototype.options.messages,
                {empty: "Custom message text!"}
        ); 
```

# ios - 在IOS中水平拆分UITableview？

> ID：15218132
> 
> 赞同：1
> 
> 时间：2013-03-05T07:31:46.060
> 
> 标签：ios, uitableview

我在 IOS 中有一个用于 Ipad 的 SQLite 项目。数据库包含一张包含很多产品的表。我想做的是将这些产品分成几类。这样我就可以为每个类别制作一个单独的表格视图。所以我的问题是，我可以使用一个具有不同部分的表格视图，但将这些部分水平并排放置吗？该应用程序仅适用于横向模式。我希望这个问题足够清楚。谢谢。

![在此处输入图像描述](../Images/431691c2e36d1fbc00ebdef654686271.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:38:58.263

[您可以使用 UICollection 视图（仅限 iOS6+，但这里](https://github.com/steipete/PSTCollectionView)有一个开源的后端端口）来实现这一点，或者您可以使用滚动视图滚动您自己的视图。

集合视图水平滚动，并且有许多与目录中的部分相匹配的项目。

集合视图的每个单元格都包含一个标题和一个表格视图，其中包含相应部分的详细信息。

使用子视图控制器来保持你的代码干净——每个单元格的视图应该由它自己的视图控制器管理，它不需要知道它在一个集合视图单元格中。

# perl - 催化剂应用范围变量

> ID：15218133
> 
> 赞同：2
> 
> 时间：2013-03-05T07:31:50.057
> 
> 标签：perl, global-variables, catalyst

我希望能够在我的[Catalyst](http://www.catalystframework.org)应用程序中定义一个应用程序范围的（全局）变量，以便我可以在我所在的任何控制器中访问它。这样做的目的是我不会在我的应用程序周围重复用于大部分永远不会改变。目前我正在`my_app.pm`像这样定义变量：

```
our $GLOBAL_VAR = 'value'; 
```

然后在我的控制器中，我尝试像访问子程序一样访问变量：

```
my_app::$GLOBAL_VAR 
```

但是，这不起作用。有谁知道做到这一点的最佳方法，或者在 Catalyst 中实现这一目标的更好方法？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:59:40.977

在这里访问这样的全局变量是正确的语法：

```
say $my_app::GLOBAL_VAR; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T01:39:24.310

我可以看到已经提出并回答了这个问题，但是还有其他方法可以实现这个问题的目的。

就个人而言，我喜欢将这些东西放入主程序中：

```
=== my_app.pm ===

__PACKAGE__->config->{GLOBAL_VAR} = 'value';

=== a nearby controller ===

if($c->config->{GLOBAL_VAR} eq 'value'){ 
    # etc
} 
```

请注意，这两种方法都不是一成不变的，当您说“大多数情况下永远不会改变”时，您需要在拥有多个持久进程的 Web 服务器环境中非常小心。以编程方式更改这些值会影响该子进程处理的后续请求，而不会影响其他子进程。当然，您可能只是说“开发人员可能会不时更改此参数”。

希望这对某人有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-12T18:34:22.523

我喜欢通过 Catalyst 插件管理任何类型的全局状态。原因：

*   插件允许您通过访问器方法获取/设置数据。
*   这避免了使用 $package::variables 的一些安全问题
*   这将使用全局状态的代码与其存储位置的详细信息分离。
*   插件为放置可能与该全局状态相关的其他功能提供了方便的位置。
*   Catalyst 插件非常容易实现。

这是一个示例实现，基于 RET 使用**PACKAGE** ->config 的建议：

```
package YourApp::Catalyst::Plugin::MyGlobalState;

sub global_state {
  my $c = shift;
  if(@_) { # If passed an argument, set.
    $c->config->{global_state} = shift;
  }
  return $c->config->{global_state};
}

1; 
```

然后在您的主应用程序中：

```
package YourApp;

use Catalyst (
  ...
  '+YourApp::Catalyst::Plugin::GlobalState'
); 
```

然后在某处的控制器中：

```
sub my_action {
  my $c = shift;

  my $global_state = $c->global_state;
  $c->global_state('new state');
} 
```

# build - 它建立吗？- 成功构建软件包的 virtualbox 映像

> ID：15218134
> 
> 赞同：1
> 
> 时间：2013-03-05T07:31:55.843
> 
> 标签：build, build-process, virtualbox

我想建立一个最小的 Linux 系统，除了构建软件包之外别无他法。但可靠且成功！

**目标：** 建立并公开提供一个virtualbox镜像和一组主要软件包的说明，这些软件包清楚地成功地贯穿了整个构建过程，并为感兴趣的人开始了解软件包创造了可靠的基础。

**1\. 第一个重要问题。有什么东西已经存在了吗？**

多次发明轮子是没有意义的。我做了一些研究，但并没有真正找到适合我口味的东西。你知道已经存在的东西吗？

**2\. 我应该如何开始？**

**虚拟盒子。** 设置 Virtualbox 很容易。我在 Virtualbox 上做了很多工作。但这是正确的选择吗？

**基本的 Linux。** 有许多 linux 风格。尤其是在这种只需要建筑特征的情况下。绝对不需要 gui，因此占用空间可能会小很多。我首先想到的是 Mini Ubuntu，但后来想到这只是一个较小的 cd 映像，可以从互联网上安装整个 ubuntu。下一个想法是关于 ubuntu 服务器版本。那是一张 670 MB 的 CD。为什么这么大？我还记得我曾与 LFS 一起工作过……目标应该是创建一个可以毫无问题地构建主要软件包的系统的有限努力……

**3\. 更多建议如何进行？**

...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:30:33.577

您的目的与您可以[下载安装程序 ISO的](http://openbuildservice.org/download/)[Open Build Service](http://openbuildservice.org/about/)的目的几乎相同。然后，如果您愿意，您可以在 VirtualBox 中安装到虚拟硬盘上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:42:02.833

你可能可以在这里找到你需要的东西，

[http://virtualboxes.org/images/ubuntu/](http://virtualboxes.org/images/ubuntu/)

在您可以添加所需的工具并将其重新压缩以进行分发之后..

但是你应该添加更多关于你计划做什么的细节......什么样的包适合什么样的发行版......

# opencv - 在 Windows azure 上部署 OpenCV

> ID：15218137
> 
> 赞同：2
> 
> 时间：2013-03-05T07:32:10.117
> 
> 标签：opencv, azure

是否可以将 OpenCV 应用程序部署到 Windows azure？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:52:04.787

Open CV 属于可通过用户界面访问的客户端应用程序类别，也可用于后端处理。Windows Azure 云服务用于 Web 应用程序，因此 Open CV 不适合应用程序模型。对于后端处理，您可能会考虑将云服务用作工作人员，但这需要您做大量工作并且无法达到目的。

为了完整性和可能性，您肯定可以获得 Windows Azure 虚拟机以及 Windows 操作系统并在那里部署 OpenCV 应用程序。准备好后，您可以远程桌面到 VM 并使用它。您可以每月支付使用虚拟机的费用，但您肯定可以做到。但我相信这也不是你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-03T09:49:27.757

是的，我会说可以将 OpenCV 应用程序安装到 Azure。

检查以下[深度学习 VM](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/microsoft-ads.dsvm-deep-learning)

它带有预安装的软件。大多数机器学习库以及 OpenCV 项目都是预安装的

您还可以使用 API 在 Windows Azure 上托管您的模型

# c++ - 堆分配问题

> ID：15218142
> 
> 赞同：1
> 
> 时间：2013-03-05T07:32:34.300
> 
> 标签：c++, visual-c++, memory-management, visual-studio-2012, heap-memory

当我尝试在 Visual Studio 2012 中运行我的 C++ 程序时遇到内存错误。我认为这段代码是原因（因为当我删除它时，它运行良好）：

```
void GetMachineHash(CString &strHashHex) {
    CMD5 cMD5;
    BYTE *szHash = (BYTE*)malloc(48);
    LPBYTE szMachineNameHash, szNetworkAddressHash, szVolumeIdHash;

    TCHAR szMachineId[100];
    DWORD nMachineIdLen = 100;

    TCHAR szNetworkAddress[13];
    IP_ADAPTER_INFO *pAdapterInfo, *pAdapter = NULL;
    DWORD dwRetVal = 0;
    ULONG ulOutBufLen = sizeof(IP_ADAPTER_INFO);

    TCHAR szVolumeId[20];
    TCHAR szVolumeName[MAX_PATH];
    TCHAR szFileSystemName[MAX_PATH];
    DWORD dwSerialNumber = 0;
    DWORD dwMaxComponentLen = 0;
    DWORD dwFileSystemFlags = 0;

    ZeroMemory(szHash, 48);
    ZeroMemory(szMachineId, 100);
    ZeroMemory(szVolumeId, 20);
    ZeroMemory(szVolumeName, MAX_PATH);
    ZeroMemory(szFileSystemName, MAX_PATH);
    ZeroMemory(szNetworkAddress, 13);

    GetComputerName(szMachineId, &nMachineIdLen);

    cMD5.Calculate(szMachineId);
    szMachineNameHash = cMD5.Hash();

    pAdapterInfo = (IP_ADAPTER_INFO *) malloc(sizeof(IP_ADAPTER_INFO));
    if (pAdapterInfo == NULL) {
            TRACE(_T("Error allocating memory needed to call GetAdaptersinfo()"));
            szNetworkAddressHash = NULL;
    }

    // Make an initial call to GetAdaptersInfo to get the necessary size into the ulOutBufLen variable
    if (GetAdaptersInfo(pAdapterInfo, &ulOutBufLen) == ERROR_BUFFER_OVERFLOW) {
            free(pAdapterInfo);
            pAdapterInfo = (IP_ADAPTER_INFO *)malloc(ulOutBufLen);

            if (pAdapterInfo == NULL) {
                    TRACE(_T("Error allocating memory needed to call GetAdaptersinfo()"));
                    szNetworkAddressHash = NULL;
            }
    }

    if ((dwRetVal = GetAdaptersInfo(pAdapterInfo, &ulOutBufLen)) == NO_ERROR) {
            pAdapter = pAdapterInfo;

            while (pAdapter) {
                    if (pAdapter->Type != MIB_IF_TYPE_LOOPBACK) {
                            _stprintf_s(szNetworkAddress, 13, _T("%.2X%.2X%.2X%.2X%.2X%.2X"), 
                                    pAdapter->Address[0], 
                                    pAdapter->Address[1], 
                                    pAdapter->Address[2], 
                                    pAdapter->Address[3], 
                                    pAdapter->Address[4], 
                                    pAdapter->Address[5]
                            );

                            break;
                    }

                    pAdapter = pAdapter->Next;
            }
    } else {
            TRACE(_T("GetAdaptersInfo() call failed"));
            szNetworkAddressHash = NULL;
    }

    cMD5.Calculate(szNetworkAddress);
    szNetworkAddressHash = cMD5.Hash();

    if (GetVolumeInformation(
            NULL,
            szVolumeName,
            sizeof(szVolumeName),
            &dwSerialNumber,
            &dwMaxComponentLen,
            &dwFileSystemFlags,
            szFileSystemName,
            sizeof(szFileSystemName))) {
                    _stprintf_s(szVolumeId, 20, _T("%lu"), dwSerialNumber); 
    }

    cMD5.Calculate(szVolumeId);
    szVolumeIdHash = cMD5.Hash();

    // Calculate hash from hashes
    memcpy(szHash, szMachineNameHash, 16);
    memcpy(szHash+16, szNetworkAddressHash, 16);
    memcpy(szHash+32, szVolumeIdHash, 16);

    cMD5.Calculate(szHash, 48);

    strHashHex.Preallocate(33);
    strHashHex = cMD5.HexHash();

    free(szHash);
    free(pAdapterInfo);

    return;
} 
```

然后，如果我离开该功能并删除此代码：

```
 strHashHex.Preallocate(33);
    strHashHex = cMD5.HexHash(); 
```

然后它也可以正常工作。所以我想知道这是否是导致内存问题的代码，如果是，我该如何解决？

这是 CMD5 类（它利用 Windows API 生成 MD5 和）：

```
class CMD5
{
public:
    CMD5() {
        if(CryptAcquireContext(&m_hCryptProv, NULL, MS_ENHANCED_PROV, PROV_RSA_FULL, CRYPT_NEWKEYSET) == 0){
            if(GetLastError() == NTE_EXISTS){
                CryptAcquireContext(&m_hCryptProv, NULL, MS_ENHANCED_PROV, PROV_RSA_FULL, 0);
            }
        }
    }

    ~CMD5() {
        if(m_hCryptProv) 
            CryptReleaseContext(m_hCryptProv, 0);
        m_hCryptProv = NULL;
        free(m_szHash);
    }

    bool Calculate(LPCTSTR szText) {
        DWORD dwLen = sizeof(TCHAR) * _tcslen(szText);
        DWORD dwHashLen;
        DWORD dwHashLenSize = sizeof(DWORD);

        if (CryptCreateHash(m_hCryptProv, CALG_MD5, 0, 0, &m_hHash)) {
            if (CryptHashData(m_hHash, (const BYTE*)szText, dwLen, 0)) {
                if (CryptGetHashParam(m_hHash, HP_HASHSIZE, (BYTE *)&dwHashLen, &dwHashLenSize, 0)) {
                    if(m_szHash = (BYTE*)malloc(dwHashLen)) {
                        if (CryptGetHashParam(m_hHash, HP_HASHVAL, (BYTE*)m_szHash, &dwHashLen, 0)) {
                            CryptDestroyHash(m_hHash);
                        }
                    }
                }
            }
        }

        return false;
    }

    bool Calculate(const LPBYTE szText, DWORD dwLen) {
        DWORD dwHashLen;
        DWORD dwHashLenSize = sizeof(DWORD);

        if (CryptCreateHash(m_hCryptProv, CALG_MD5, 0, 0, &m_hHash)) {
            if (CryptHashData(m_hHash, (const BYTE*)szText, dwLen, 0)) {
                if (CryptGetHashParam(m_hHash, HP_HASHSIZE, (BYTE *)&dwHashLen, &dwHashLenSize, 0)) {
                    if(m_szHash = (BYTE*)malloc(dwHashLen)) {
                        if (CryptGetHashParam(m_hHash, HP_HASHVAL, (BYTE*)m_szHash, &dwHashLen, 0)) {
                            CryptDestroyHash(m_hHash);
                        }
                    }
                }
            }
        }

        return false;
    }

    LPBYTE Hash() const {
        LPBYTE szHash = new BYTE[16];

        ZeroMemory(szHash, 16);

        memcpy(szHash, m_szHash, 16);

        return szHash;
    }

    LPTSTR HexHash() const {
        LPTSTR szBuf = new TCHAR[33];

        ZeroMemory(szBuf, 33);

        for (int i=0; i<16; i++)
            _stprintf_s(szBuf+i*2, 33, _T("%02X"), m_szHash[i]);

        szBuf[32]=0;

        return szBuf;
    }
private:
    BYTE *m_szHash;
    DWORD m_hHash;
    HCRYPTPROV m_hCryptProv;
}; 
```

此外，我从 VS2012 得到的错误是`Critical error detected c0000374`，调用堆栈以对`HeapAlloc()`from的调用结束`_heap_alloc`。不确定是否重要，但此代码正在 DLL 中调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:17:54.083

看起来我能够通过将 CMD5::HexHash() 函数更改为来解决内存分配问题

```
 void HexHash(CString &strHash) {
        for (int i=0; i<16; i++)
            strHash += StringFormat(_T("%02X"), m_szHash[i]);

        return;
    } 
```

并通过调用它`cMD5.HexHash(strHashHex);`

# xml - 使用子子节点解析 xml

> ID：15218143
> 
> 赞同：0
> 
> 时间：2013-03-05T07:32:45.210
> 
> 标签：xml, xml-parsing

早上好。

我有下一个带有子子项的 xml 文件，我想读取它们以将数据填充到表中。现在，我知道如何以简单的方式使用子节点来完成它，但我真的不知道如何实现它来获取子子节点。

```
<Result>
<Record id="000231">
<AC_NPD/>
<Name>Company1</Name>
<AC_CPR>00003</AC_CPR>
<AC_ALM>00</AC_ALM>
<AC_FEC>12/01/2007</AC_FEC>
<AC_LNA ncols="6">
   <Row>
      <Column>000084</Column>
      <Column>1.230</Column>
      <Column/>
      <Column/>
      <Column/>
      <Column/>
   </Row>
</AC_LNA>
<AC_FSE>12/01/2007</AC_FSE>
<AC_AV/>
<AC_UFH ncols="3"/>
</Record>
</Result> 
```

现在，我使用以下脚本在表格中绘制结果：

```
 <script>
 if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
  }
else
 {// code for IE6, IE5
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

 xmlhttp.open("GET","xml/pruebas/resp2.asp",false);
 xmlhttp.send();
 xmlDoc=xmlhttp.responseXML; 

 document.write("<table class='table table-striped table-condensed table-bordered'  id='example'>");
document.write("<thead>");
    document.write("<tr class='odd gradeX'>");
  document.write("<th>Sale</th>");
    document.write("<th>Name</th>");
    document.write("<th>Date</th>");
    document.write("<th>Date Sale</th>");
    document.write("<th>Item</th>");
    document.write("<th>Quantity</th>");
    document.write("<th class='hidden-phone'>Price</th>");
    document.write("<th class='hidden-phone'>Total</th>");
    document.write("<th>Sale Item</th>");
    document.write("<th>Button</th>");
   document.write("</tr>");
   document.write(" </thead>");
var x=xmlDoc.getElementsByTagName("Record");

for (i=0;i<x.length;i++)
 { 

 document.write("<tr>");
 document.write("<td>");  document.write("</td>");
 document.write("<td>");  document.write(x[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue);  document.write("</td>");
 document.write("<td>");  document.write(x[i].getElementsByTagName("AC_FEC")[0].childNodes[0].nodeValue);  document.write("</td>");
 document.write("<td>");  document.write(x[i].getElementsByTagName("AC_FSE")[0].childNodes[0].nodeValue);  document.write("</td>");
 document.write("<td>"); document.write(x[i].getElementsByTagName("AC_LNA")[0].childNodes[0].nodeValue);   document.write("</td>");
 document.write("<td>");   document.write("</td>");
 document.write("<td>");   document.write("</td>");
 document.write("<td>");   document.write("</td>");
 document.write("<td>");  document.write("</td>");

document.write("<td> <a data-toggle='modal' class='btn' href='sale.asp?&number=");     document.write(x[i].getElementsByTagName("AC_FEC")[0].childNodes[0].nodeValue);    document.write("' data-target='#myModal'>  My Sale  </a> ");                document.write("   </td>");

 document.write("</tr>");
 }
document.write("</table>");
</script> 
```

因此，如果有人知道如何获取子子节点，我将不胜感激。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:48:28.963

首先，请注意您的 XML 无效：

1.  一些 <Column> 标签以 <Columna> 结尾。
2.  <AC_LNA> 标签未正确关闭。

在您解决此问题后，我会建议，这是您的一个选项，使用 XSLT 表将 XML 与您的演示文稿分开。请注意，在这里使用 XSLT 并不是唯一的选择，这只是我的建议。

如果您不想使用 XSLT，您始终可以使用以下示例访问子子节点：

```
var columns = x[i].getElementsByTagName('Column');
for ( var ci = 0; ci < columns.length; ci++ ) {
  // do something with columns[ci]
} 
```

如果您确实选择了 XSLT，Google 提供了一个名为[AJAXSLT](http://goog-ajaxslt.sourceforge.net/)的优秀库。您可以使用它将从服务器获取的 XML 转换为 HTML。

您的样式表看起来像这样（部分响应）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <table>
    <xsl:for-each select="Result/Record">
    <tr>
      <td><xsl:value-of select="Name"/></td>
      <td><xsl:value-of select="AC_CPR"/></td>
      <td>
        Columns: 
        <xsl:for-each select="AC_LNA/Row/Column[text() != '']">
          <xsl:value-of select="." />, 
        </xsl:for-each>
      </td>
    </tr>
    </xsl:for-each>
  </table>
</xsl:template>
</xsl:stylesheet> 
```

上面的代码创建来表（为简单起见没有 <thead>）并获取 <Record> 名称、AC_CPR 和每个 Row/Column 值。您可以轻松扩展它以检索更多信息。

# c# - 电子邮件中的附件丢失内容

> ID：15218154
> 
> 赞同：1
> 
> 时间：2013-03-05T07:33:16.683
> 
> 标签：c#, email, attachment

当我将文件附加到电子邮件时，它会在途中丢失其内容。

首先，我从表单（到 HttpPostedFile）中获取文件：

```
File file = Request.Files["file"]; 
```

然后我将它作为附件添加到电子邮件中。

```
if (file != null && file.ContentLength != 0)
{
       formData.File.InputStream.Position = 0;

       var attachedFile = new Attachment(file.InputStream,                                                                           
       file.FileName,                                                
       MediaTypeNames.Application.Octet);

       mailMessage.Attachments.Add(attachedFile);
} 
```

但是在其 contentlength 变为 0 的过程中。出了什么问题？我必须先对文件进行处理才能附加它吗？该文件以其文件名出现在电子邮件中，但没有内容。

# android - 无法接收来自 GCM 的通知

> ID：15218162
> 
> 赞同：2
> 
> 时间：2013-03-05T07:33:45.270
> 
> 标签：android, google-cloud-messaging

我正在使用 Android Hive[教程](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)。它以前工作得很好，但现在它不工作了。

当我注册我的设备时，它会被注册并且我可以在我的网页上看到注册的设备，但是当我发送消息时，我无法在设备上接收它。以下是我注册时收到的一些消息`GCM`：

```
03-05 12:18:09.200: E/GCMRegistrar(1008): internal error: retry receiver class not set yet
03-05 12:18:09.500: E/URL(1008): > http://10.0.2.2/gcm_server_php/register.php
03-05 12:18:09.960: D/dalvikvm(1008): GC_CONCURRENT freed 248K, 11% free 5975K/6663K, paused 14ms+7ms
03-05 12:18:15.040: V/GCMRegistrar(1008): Setting registeredOnServer status as true until 2013-03-12 12:18:15.041
03-05 12:18:15.160: V/GCMBaseIntentService(1008): Releasing wakelock
03-05 12:23:03.830: V/GCMRegistrar(1008): Unregistering receiver
03-05 12:23:03.830: E/UnRegister Receiver Error(1008): > Receiver not registered: com.google.android.gcm.GCMBroadcastReceiver@40ff0d88 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T09:37:17.570

您可能正在使用旧版本的`gcm.jar`文件。确保您使用的是最新版本的`gcm.jar`文件。您可以在[此处](https://code.google.com/p/gcm/wiki/ReleaseNotes)获取有关各种 GCM 版本更改的发行说明。

此外，为了解决此问题，您还可以查看[此处](https://code.google.com/p/gcm/source/diff?path=/gcm-client/src/com/google/android/gcm/GCMBroadcastReceiver.java&format=side&r=3f5dee16d86402b64251708815079a305bb9881b)以获取有关各种版本的`GCMBrodcaseReceiver`类的比较。

[您可以从此处](https://code.google.com/p/gcm/source/browse/#git/gcm-client/dist)获取最新版本的`gcm.jar`文件。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:07:47.937

你注册广播接收器了吗？

```
 <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.androidhive.pushnotifications" />
        </intent-filter>
    </receiver> 
```

# group-by - Group by with order by work ion Dql吗？

> ID：15218165
> 
> 赞同：0
> 
> 时间：2013-03-05T07:33:59.343
> 
> 标签：group-by, sql-order-by, dql

我正在尝试执行一个 DQL (Doctrine) 查询来检索不同医生的最新答案。我们有表答案、成员、位置（医生表）和许多其他与医生信息相关的表。但是我想得到最新的答案，但条件是医生的一个答案。我做了一些搜索，知道一些关于 group by 和 order by 不要一起工作！这是 DQL 中的查询：

```
 $query = Doctrine_Query::create() 
  ->select("a.answer_id as answer_id,m.member_is as member_id,a.member_id") 
  ->from('Answer a') 
  ->leftJoin('a.Member m on m.member_id = a.member_id') 
  ->orderBy('a.date_added DESC') 
  ->groupBy('m.member_id') 
  ->limit(5); 
```

* * *

但此查询返回不良结果。谁能告诉我错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:12:47.107

不幸的是，您需要为此执行子查询，根据[这个问题](https://stackoverflow.com/questions/9831985/selecting-from-subquery-in-dql)，DQL 不支持。但是，在该问题中，建议您发送本机查询。

# highcharts - 在服务器上渲染highcharts，但图像不清晰

> ID：15218166
> 
> 赞同：0
> 
> 时间：2013-03-05T07:34:05.630
> 
> 标签：highcharts, phantomjs

*   我正在使用 phantomjs + highcharts-convert.js 解决方案在 ubuntu 服务器上呈现 highcharts。
*   Bug 导出的图像不清晰，尤其是标签、标题。 [示例图像](https://docs.google.com/drawings/d/1GDrkClp_5pyqImEiwj19mOqCB5Svepy47gd6ucb0alk/edit?usp=sharing)
*   如你所见，背景是黑色的
*   系统信息：
    *   ubuntu 10.04 服务器 64bit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:21:06.100

我已经解决了这个问题。
“不清楚”的感觉是由黑暗的地面（jpg）或看不见的地面（png）造成的错觉。

导出 png 图像并将其放在白色背景上可以解决此问题。

# c# - C# 未处理异常：System.NullReferenceException：对象引用未设置为对象的实例

> ID：15218175
> 
> 赞同：0
> 
> 时间：2013-03-05T07:34:43.177
> 
> 标签：c#, casting, nullreferenceexception, gettype

**您好，我无法理解为什么这段代码：**

```
using System;

class Person
{
    public Person()
    {
    }
}

class NameApp
{
    public static void Main()
    {
        Person me = new Person();
        Object you = new Object();

        me = you as Person;
        //me = (Person) you;

        System.Console.WriteLine("Type: {0}", me.GetType()); //This line throws exception
    }
} 
```

**抛出此异常：**

未处理的异常：System.NullReferenceException：对象引用未设置为对象的实例。在 C:\Users\Nenad\documents\visual studio 2010\Projects\Exercise 11.3\Exercise 11.3\Program.cs:line 21 中的 NameApp.Main()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:36:25.633

你的线

```
me = you as Person; 
```

失败并将 null 分配给，`me`因为您无法将基类类型对象强制转换为子类。

[作为（C# 参考）](http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx)

> as 运算符类似于强制转换操作。但是，**如果无法进行转换，则 as 返回 null 而不是引发异常**。

您可能想要转换`person`为`object`, 因为`me`是一个`Object`, 但`you`不是一个人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:36:31.847

此代码将始终设置`me`为 null

```
 Object you = new Object();
   me = you as Person; 
```

因为`Obejct`不是人*_*

但人是`object`：

```
object you = new Person();
me = you as Person; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:36:41.703

```
Object you = new Object();
me = you as Person; 
```

`you`是一个对象，而不是一个人，所以`you as Person`只会返回 null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T07:36:55.837

```
me = you as Person; 
```

`me`是`null`if`you`不能被强制转换为`Person`（这就是在你的情况下发生的事情，因为`new Object()`不能被强制转换为`Person`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T07:37:28.053

如果对象不是您请求的类型， as 运算符将返回 null。

```
me = you as Person; 
```

你是一个对象，而不是一个人，所以（你作为人）是空的，因此我是空的。当你之后对我调用 GetType() 时，你会得到一个 NullReferenceException。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T07:37:56.607

```
public static void Main()
{
    Person me = new Person();
    Object you = new Object();

    // you as person = null
    me = you as Person;
    //me = (Person) you;

    System.Console.WriteLine("Type: {0}", me.GetType()); //This line throws exception
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-05T07:38:22.647

对象不能转换为 Person。它是面向对象编程的原则。

Object 是 Person 的父类。每个类都继承它，

您可以将 Person 转换为 Object，但不能将 Object 转换为 Person

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-05T07:43:55.377

如果您使用`as`关键字进行强制转换并且无法进行强制转换，则它会返回`null`. 然后在你的情况下，你现在打电话，`me.GetType()`所以抛出异常。`me``null`

如果你像施法一样施法`(Person) objectOfTypeThatDoesNotExtendPerson`，施法时会立即抛出异常。

# email - 以 TCPDF 格式发送邮件

> ID：15218177
> 
> 赞同：0
> 
> 时间：2013-03-05T07:34:44.047
> 
> 标签：email, tcpdf

我已经使用 tcpdf 函数创建了一个 PDF，然后我想将它作为附件发送到邮件中。我在 PDF 创建结束时使用了以下编码。但它在某些服务器上工作，但在其他一些服务器上不工作

```
$from = "manikandan@niral.us";
        $subject = "test";
        $message = $_REQUEST['msg'];

        // a random hash will be necessary to send mixed content
        $separator = md5(time());

        // carriage return type (we use a PHP end of line constant)
        $eol = PHP_EOL;
         // $eol = "\r\n";
        // attachment name
        $filename = "Yourinvices.pdf";

        // encode data (puts attachment in proper format)
        $pdfdoc = $pdf->Output('Patient'.$invnumserial.'.pdf', 'S');
        $attachment = chunk_split(base64_encode($pdfdoc)); 

        // encode data (multipart mandatory)
        $headers = "From: ".$from.$eol;
        $headers .= "MIME-Version: 1.0".$eol;
        $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
        $headers .= "Content-Transfer-Enconding: 7bit".$eol;
        $headers .= "This is a MIME encoded message.".$eol.$eol;

        // message
        $headers .= "--".$separator.$eol;
        $headers .= "Content-Type: text/html; charsrt=\"iso-8859-1\"".$eol;
        $headers .= $message.$eol.$eol;

        // attachment
        $headers .= "--".$separator.$eol;
        $headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
        //$headers .= "Content-Type: application/zip; name=\"".$filename."\"".$eol;
        $headers .= "Content-Transfer-Encoding: base64".$eol;
        $headers .= "Content-Disposition: attachment".$eol.$eol;
        $headers .= $attachment.$eol.$eol;
        $headers .= "--".$separator."--";

        // send message
       if(@mail($to, $subject, $message, $headers))
       {

         Redirect("../../patient_invoicelist.php?msg=1");   
      }

       else Redirect("../../patient_invoicelist.php?msg=2"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:21:50.513

用于`PHPMailer`发送`Emails with Attachments`。使用这个库发送带有附件的电子邮件将非常容易。从此链接

下载库。`PHPMailer`您还将找到使用此类的示例。

[http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/PHPMailer%20v5.1/](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/PHPMailer%20v5.1/)

```
$mail->SetFrom('noreply@test.com', 'test');
$mail->Subject    = $subject;
$mail->AddAttachment($Pdf_path_here);
$mail->MsgHTML($body);
$mail->AddAddress($to, "");

if(!$mail->Send()) 
{
   echo "sent";
} 
else 
{
   echo "error";
} 
```

# xcode - RestKit 映射错误“无法将对象集合映射到非可变集合。”

> ID：15218182
> 
> 赞同：0
> 
> 时间：2013-03-05T07:35:07.627
> 
> 标签：xcode, cocoa-touch, cocoa, restkit

好的，所以我有这段代码，我用它来映射来自 JSON API 的数据。一切运行良好，但随后出现此错误：

```
restkit.object_mapping:RKMapperOperation.m:76 Adding mapping error: Cannot map a collection of objects onto a non-mutable collection. Unexpected destination object type '__NSDictionaryI' 
```

这是我用于映射的代码

```
RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];

RKObjectMapping *classMapping = [RKObjectMapping mappingForClass:[GradePeriod class]];
[classMapping addAttributeMappingsFromDictionary: @{
 @"period" : @"period",
 @"class" : @"name",
 @"term" : @"term",
 @"teacher" : @"teacher",
 @"percent" : @"percent",
 @"grade" : @"grade",
 @"missing" : @"missing",
 @"update" : @"update",
 @"detail" : @"url"
 }];

// Create a Response Descriptor
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:classMapping
                                                                                   pathPattern: nil
                                                                                       keyPath: @"grades"
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:200]];
[objectManager addResponseDescriptor:responseDescriptor];
objectManager.requestSerializationMIMEType = RKMIMETypeJSON;

NSDictionary *queryParams;
queryParams = [NSDictionary dictionaryWithObjectsAndKeys:username, @"username", password, @"password", nil];

// Retrieve the Data
[objectManager postObject:queryParams
                     path:@""
               parameters:queryParams
                  success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                      grades = [NSMutableArray arrayWithArray: [mappingResult array]];
                      NSLog(@"Loaded Grades: %@", grades);
                      [self.tableView reloadData];
                  }
                  failure:^(RKObjectRequestOperation *operation, NSError *error) {
                      // Stuff removed for easier reading
                  }]; 
```

成绩是一个`NSMutableArray`

```
@property (nonatomic, retain) NSMutableArray *grades; 
```

GradePeriod 是这样定义的

```
@property (strong, nonatomic) NSString *period;
@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSString *term;
@property (strong, nonatomic) NSString *teacher;
@property (strong, nonatomic) NSString *percent;
@property (strong, nonatomic) NSString *grade;
@property (strong, nonatomic) NSString *missing;
@property (strong, nonatomic) NSString *update;
@property (strong, nonatomic) NSString *url; 
```

我不确定我做错了什么。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:44:35.823

我升级到最新版本的 RestKit 并自行修复。

# javascript - Jquery移动双范围滑块重新加载新范围

> ID：15218183
> 
> 赞同：3
> 
> 时间：2013-03-05T07:35:08.710
> 
> 标签：javascript, jquery-mobile

滑块适用于初始范围。这是滑块的 html，初始范围是 0 到 100

```
 <div data-role="rangeslider">       
    <input type="range" name="range-1a" id="range-1a" min="0" max="100" value="40">       
    <input type="range" name="range-1b" id="range-1b" min="0" max="100" value="80">
</div>

<button id="btnReload" onclick="reloadRangeSlider(200, 300)"></button> 
```

我想实现一个 javascript 函数，它可以帮助重新加载 200 到 300 等新范围的滑块。在我的情况下，想通过单击 btnRelaod 按钮重新加载滑块。

```
function reloadRangeSlider(min, max){
    //To do: reload functionality goes here 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:31:42.697

这是我的问题的答案

```
function reloadRangeSlider(min, max){
       $('#range-1a').attr("min", min).attr("max", max).val(min);
       $('#range-1b').attr("min", min).attr("max", max).val(max);          
       $('#range-1a').slider("refresh");
       $('#range-1b').slider("refresh");         
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T07:37:27.050

根据 JQuery Mobile Docs 如果您通过 JavaScript 操作滑块，则必须在其上调用 refresh 方法以更新视觉样式。这是一个例子：

```
$("#yourSlider").attr("min", min)
$("#yourSlider").attr("max", max)
$("#yourSlider").slider("refresh"); 
```

或者你可以使用

```
$("#yourSlider").attr("min", min).attr("max", max).slider("refresh"); 
```

# vba - 如何使用 Range 变量作为子程序参数

> ID：15218185
> 
> 赞同：1
> 
> 时间：2013-03-05T07:35:17.910
> 
> 标签：vba, excel

我有一个关于 VBA 子例程的非常基本的问题。我想做的是

1.  将 activeCell 设置为 Range 变量
2.  将该变量传递给子例程
3.  用 activeCell 做点什么

我试图做的是

```
Sub myMacro()

    Dim myCell As Range

    Set myCell = ActiveCell

    mySub(myCell)

End Sub

Sub mySub(cell As Range)
    ' Do something
End Sub 
```

我不断收到“需要对象”错误。
这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:29:02.013

将参数传递给函数时，不需要使用括号。例如：

```
 mySub myCell 
```

您也可以使用 Lance sugention 并使用`Call`AND 括号。（在 VBA 编辑器中按 F1`Call`以获得更多信息）

```
 Call mySub(myCell) 
```

无论哪种方式都是正确的，但是在学习 VBA 时，第一个表示法可能会更有帮助，因为论坛中的大部分答案都使用第一个表示法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:56:50.857

您需要在子例程上使用 Call 语句。

```
Call mySub(myCell) 
```

# python - 这是 Python 2.7.1 在数字比较中的错误吗？

> ID：15218189
> 
> 赞同：0
> 
> 时间：2013-03-05T07:35:35.770
> 
> 标签：python

考虑以下：

```
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> x = 2.0
>>> print x < 2.0
False
>>> 
>>> x = 2.2
>>> x -= 0.2
>>> print x < 2.0
False
>>> 
>>> x = 2.4
>>> x -= 0.2
>>> x -= 0.2
>>> print x < 2.0
True
>>> print x
2.0 
```

当 x 从 2.4 减少到 2.0 时，为什么最后第二条语句打印 True ？我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T07:43:12.403

You are missing the fact that neither 2.4 nor 0.2 have exact `float` representations:

```
In [31]: '%.20f' % 2.4
Out[31]: '2.39999999999999991118'

In [32]: '%.20f' % 0.2
Out[32]: '0.20000000000000001110' 
```

Thus:

```
In [33]: '%.20f' % (2.4 - 0.2 - 0.2)
Out[33]: '1.99999999999999977796' 
```

which is less than 2.0.

This is discussed further in the [tutorial](http://docs.python.org/2/tutorial/floatingpoint.html) (although it is worth noting that the issue is in no way Python-specific, but is a general limitation of floating-point numbers).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T07:49:37.130

正如评论所提到的，与定点数相比，浮点数通常不准确。您可以通过要求 Python 更精确地打印数字来获得更多提示：

```
>>> '%0.20g' % (2.4 - 0.2 - 0.2)
'1.999999999999999778' 
```

如您所见，这个数字小于 2。

如果要使用具有固定精度的数值数据类型，Python 提供了[Decimal](http://docs.python.org/2/library/decimal.html)数据类型。

```
>>> from decimal import Decimal
>>> Decimal('2.4') - Decimal('0.2') - Decimal('0.2')
Decimal('2.0')
>>> Decimal('2.0') < 2.0
False 
```

但请记住，十进制运算将比内置浮点运算慢，因此仅应在需要额外精度时使用（例如，在金融计算中）

# ruby-on-rails - LoadError：dlopen（digest/sha1.bundle）：找不到符号：_rb_Digest_SHA1_Finish

> ID：15218191
> 
> 赞同：9
> 
> 时间：2013-03-05T07:35:39.420
> 
> 标签：ruby-on-rails, ruby, macos, rvm, rbenv

**Ruby 最近停止在我兄弟的机器上工作。**

*   `gem`命令
*   `rails server`
*   `rails console`

全部失败并出现以下错误：

```
$ irb
irb(main):001:0> require 'digest/sha1'

LoadError: dlopen(~/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/x86_64-darwin12.2.0/digest/sha1.bundle, 9): Symbol not found: _rb_Digest_SHA1_Finish
  Referenced from: ~/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/x86_64-darwin12.2.0/digest/sha1.bundle
  Expected in: flat namespace

 in ~/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/x86_64-darwin12.2.0/digest/sha1.bundle - ~/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/x86_64-darwin12.2.0/digest/sha1.bundle
    from ~/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from ~/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from (irb):1
    from ~/.rbenv/versions/2.0.0-p0/bin/irb:12:in `<main>' 
```

*他尝试了不同版本的 Ruby。重新安装一切`rvm`。运行`rvm implode`并重新安装`rvm`。切换到`rbenv`. 通过`ruby-build`. `brew install ruby`.*

*所有人都有同样的问题。*

*如果他卸载了所有的红宝石，操作系统提供的版本就可以`/usr/bin/ruby`工作了。但它是 1.8.7。*

*经过数小时的故障排除后，我们得出了以下解决方案。我希望它可以帮助您避免一些痛苦。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T07:35:39.420

**可能的解决方案：**

1.  **`$ unset C_INCLUDE_PATH`**并重新安装 Ruby

    *这是对我有用的解决方案。*

    `$ echo $C_INCLUDE_PATH`

    如果`C_INCLUDE_PATH`设置，它将破坏 Ruby 构建。将其从您的环境中移除；可以暂时使用`$ unset C_INCLUDE_PATH`，也可以永久使用（可能在 .bashrc、.profile、.bash_profile 中）；然后重新安装红宝石。

2.  它可能与 OpenSSL、RVM、XCode 的命令行工具 (gcc) 或其他构建问题有关。

    如果以前的解决方案不起作用，请参阅[此答案。](https://stackoverflow.com/questions/3032601/loaderror-in-ruby)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-02T09:31:55.007

对于像我这样的任何人，因为这样的错误而来到这里：

```
LoadError: dlopen(/Users/sebkomianos/.rbenv/versions/2.0.0-p247/lib/ruby/2.0.0/x86_64-darwin13.0.0/openssl.bundle, 9): Symbol not found: _SSLv2_client_method
Referenced from: /Users/sebkomianos/.rbenv/versions/2.0.0-p247/lib/ruby/2.0.0/x86_64-darwin13.0.0/openssl.bundle
Expected in: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib 
```

一种解决方案（[取自此处](https://stackoverflow.com/questions/25492787/ruby-bundle-symbol-not-found-sslv2-client-method-loaderror/25493698#25493698)）可能是重新安装您的 ruby​​ 版本。例如：`rbenv install 2.0.0-p247`

# python-2.7 - 查找目录大小的高效python函数

> ID：15218192
> 
> 赞同：3
> 
> 时间：2013-03-05T07:35:41.093
> 
> 标签：python-2.7

```
def getSize(path):
    start_time = time.time()
    totalSize = 0
    if os.path.isdir(path):

        for dirpath, dirnames, filenames in os.walk(path):
            for fName in filenames:
                fp = os.path.join(dirpath, fName)
                totalSize += os.path.getsize(fp)
        print time.time() - start_time, "seconds"
        return totalSize

    else:
        return os.path.getsize(path) 
```

上面的函数大约需要 25 秒才能找到现在包含大量文件的目录的大小。谁能告诉我一些有效的功能来做同样的事情，这样找到尺寸的时间会更短吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:01:01.333

问题不在于数据的大小，而在于包含它的文件的数量（可能很小）。我没有看到显着优化您的方法的方法 - 系统实用程序，例如`du`使用相同的方法计算大小。然而，这里有几个建议，按照难度和有效性的增加排序：

*   对于一个小的加速，您可以滚动您自己的变体，从用于区分文件和目录`os.walk`的同一调用中获取文件大小。`os.stat`由于系统调用的数量减少，这可能会为您赢得一秒钟。

*   您可以`getSize`使用 Python/C 或 Cython 进行编码，以避免在检查大量文件和目录时产生解释器开销。充其量，这可能会让您多花几秒钟。

*   更改*写入*数据的代码以维护总大小或单个数据库（想想 sqlite）中的文件大小索引，该数据库本身可以被索引。这将使大小查找瞬间完成。

*   监视正在写入的目录 using[`inotify`](http://en.wikipedia.org/wiki/Inotify)或等效项，并像以前一样将结果保存到数据库中。只要与读取相比，写入不频繁，这将是一项净赢的工作。它更难实现，但它的好处是不需要更改编写代码的代码。

# ms-project - java - 如何在使用java生成mpp文件时添加当前日期作为开始日期？

> ID：15218194
> 
> 赞同：0
> 
> 时间：2013-03-05T07:35:45.547
> 
> 标签：ms-project, mpxj

我正在做一个小项目，我们需要从参考计划中生成 MPP 计划。在我的参考 mpp 文件中，我有一些旧日期。当我们生成新计划时，我们期望项目的开始日期应该是当前日期。我尝试探索 Calander 的可用方法（MPXJ 项目文件 calander）。我的要求是将任务的开始日期设置为当前日期。但是没有可用于设置测试开始日期的方法。如果我得到快速响应，将会很有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:12:40.843

```
java.util.Date now = new java.util.Date();
String today = new java.sql.Date(now.getTime())+"";
/* 
 *    if you want it in date format then
 *    java.util.Date today = new java.sql.Date(now.getTime());
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-12T20:55:50.687

目前 MPXJ 不支持写入 MPP 文件。您可以考虑使用[Aspose Tasks](https://products.aspose.com/tasks)将内容写入 MPP 文件。

*   请记住，它不是免费的。

# java - 如何使 web maven 项目以优化的方式依赖于另一个 web maven

> ID：15218195
> 
> 赞同：1
> 
> 时间：2013-03-05T07:35:52.430
> 
> 标签：java, maven, war

我们有使用 maven 的 web java ee 项目

这些项目共享通用网页及其代码，我希望能够以优化的方式运行每个项目（Hr、Payroll、..）以及聚合的项目 ERP

主要问题是 WAR 依赖关系 如果模块项目可以运行，所有 WAR 都将包含依赖关系，这将使 ERP 构建过程耗时

我们使用父 pom 中的变量制作了临时解决方案，以提供模块依赖项以使 ERP 构建更快，并将其关闭以使模块运行 ![在此处输入图像描述](../Images/55a0bf3e2102dca20634b3e1b5aeed6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:06:14.070

据我所知，没有团队喜欢让战争神器（网络项目）依赖于其他战争神器。如果要共享登录功能，最好集成单点登录模块。如果您只想在 webapp 中共享一些逻辑，建议将其 fork 并将其作为独立的 maven 项目。

# c# - 在特定目录中执行进程

> ID：15218199
> 
> 赞同：0
> 
> 时间：2013-03-05T07:36:15.223
> 
> 标签：c#, process

我需要在`c:\`. 当我使用`Process.Processstartinfo`它时，它不会执行`c:\`，因此无法找到它的依赖项。它改为在我的应用程序目录中运行。如何在`c:\`目录中运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:39:11.047

你设置了[WorkingDirectory](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)吗？

```
process.StartInfo.WorkingDirectory = @"MyWorkingDirectoryPath"; 
```

例如：

```
var psi = new ProcessStartInfo();
psi.WorkingDirectory =  @"MyWorkingDirectoryPath";

// set additional properties 

Process proc = Process.Start(psi); 
```

> 当该`UseShellExecute`属性为 false 时，获取或设置要启动的进程的工作目录。当`UseShellExecute`为真时，获取或设置包含要启动的进程的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:43:23.737

Set `ProcessStartInfo.WorkingDirectory` to the working directory of the process you want to launch, i.e. in your case `"C:\"`.

# jsf-2 - viewScoped 类的构造函数调用了两次

> ID：15218200
> 
> 赞同：1
> 
> 时间：2013-03-05T07:36:16.633
> 
> 标签：jsf-2, facelets

我已经为此苦苦挣扎了两天，但没有成功，我认为现在是时候寻求您的帮助了。但首先，这就是我正在使用的：

*   JSF 2 莫哈拉 2.1.1
*   Primefaces 3.4.2
*   网豆 7.1.1
*   雄猫 7.0.37

现在，问题是：我有一个主页，它由使用多个`<ui:include .. />`标签的其他几个页面组成，如下所示：

```
<ui:composition template="/resources/templates/template1.xhtml">          
    <ui:define name="appData">
        <p:panelGrid columns="1" id="contenidoAplicacion" styleClass="noborder">
            <h:form id="fNewPerson">
                <p:panel header="New employee" style="min-height:40em">
                    <ui:include src="./forms/personal.xhtml" />
                    <p:accordionPanel  styleClass="noborder" activeIndex="3">
                        <p:tab id="tabSomeData" title="Identidad profesional" >
                            <ui:include src="./forms/formSomeData.xhtml" />
                        </p:tab>
                         ....
                         ....
    </ui:define>
</ui:composition> 
```

personal.xhtm 文件如下所示：

```
<p:panelGrid>
    <p:row>
        <p:column >
            <h:outputLabel value="Field1"/>
            <p:inputText label="Field1" id="field1" value="#{dataBacking.selectedPerson.field1}" tabindex="1"
                         required="true" size="10" >
                <f:convertNumber for="field1" integerOnly="true" groupingUsed="false"/>
            </p:inputText>
            <p:inputText id="field2" value="#{dataBacking.selectedPerson.field2}" tabindex="2" required="true" size="1" maxlength="1" >
                <p:ajax event="keyup" listener="#{dataBacking.check}" 
                        process="field1 field2" partialSubmit="true" 
                        update="field1 field2 photo"/>
            </p:inputText>
        </p:column>
        <p:column rowspan="5" >
            <p:graphicImage id="photo" value="#{dataBacking.selectedPerson.photo}" width="90" />
        </p:column>
    </p:row>
    ...

</p:panelGrid> 
```

类中的`check()`方法`dataBacking`无关紧要，因为它只检查`field1`和 是否`field2`符合某些规则并且它是否正常工作。第一次加载主页时出现问题。在这种情况下，`<p:ajax />`personal.xhtml 中的组件不起作用。我必须重新加载页面（只需按 F5 键），这一次它可以正常工作。

我一直在更改组件的一些属性，但似乎没有任何效果。我真的不知道还能做什么。任何形式的帮助将不胜感激。

**已编辑**。又过了一天，我认为问题与组件无关`Primefaces ajax`，正如问题的标题所暗示的那样。我通过以下两个事实得出了这个结论：

*   组件的行为`<f:ajax .../>`保持不变。
*   我发现相对于我第一次加载页面时的视图没有持久化。我会试着解释一下自己。

DataBacking 类已定义其范围，`view`以便页面在向用户显示期间可以“看到”所有属性和方法。但是，我注意到构造函数被调用了两次：第一次加载页面（然后，没有成功调用类的方法）和刷新页面时。在最后一种情况下，页面和类的行为都是预期的。

# javascript - 我的剑道图表数据在页面加载时未正确显示

> ID：15218207
> 
> 赞同：1
> 
> 时间：2013-03-05T07:36:29.910
> 
> 标签：javascript, visual-studio-2010, kendo-ui

我的应用程序中有一个**剑道网格**和**剑道图表**。我正在为图形和网格使用共享数据源。我的问题是页面加载网格显示所有数据，但图表仅显示一些数据。

我的图表代码：

```
$("#Chart").kendoStockChart({
    theme         : $(document).data("kendoSkin") || "metro",
    dataSource    : DataSource,
    autoBind      : false,
    legend        : {
        position: "right", visible: true
    },
    dateField     : "date",
    seriesDefaults: { type: "line" },
    series        : [
        {
            field: "value",
            name : "value"
        }
    ],
    valueAxis: [
        {
            max    : 5.0,
            min    : 0,
            labels : {
                format: "{0}"
            },
            tooltip: { visible: true, format: "{0}" }
        }
    ],
    navigator: {
        series: [
            { field: "item", type: "area"}
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:41:55.753

更新到更新版本的 Kendo UI v2012.3.1315。

```
<script src="http://cdn.kendostatic.com/2012.3.1315/js/jquery.min.js"></script>
<script src="http://cdn.kendostatic.com/2012.3.1315/js/kendo.all.min.js"></script>
<link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.common.min.css" rel="stylesheet"/>
<link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.default.min.css" rel="stylesheet"/>
<link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.dataviz.default.min.css" rel="stylesheet"/> 
```

**编辑**：如果您在两个 Kendo UI 小部件之间共享一个 DataSource，您将共享*每个*选项，这包括`pageSize`. 因此，要么在 中显示所有结果，要么`grid`在 中的页面中仅显示那些项目`chart`。

我建议不要分享，而是*分享*`DataSource`. 我是说：

1.  像你现在所做的那样定义`DataSource`、 the`Grid`和 the 。`Chart`
2.  替换by`dataSource`中的值。`Grid``undefined`
3.  向*共享* `DataSource`定义添加一个`change`将数据分配给 的事件`Grid.dataSource`。

像这样的东西：

```
var sharedDataSource = new kendo.data.DataSource({
    type     : "odata",
    transport: {
        read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema   : {
        model: {
            fields: {
                OrderDate: { type: "date" }
            }
        }
    },
    change   : function (e) {
        grid.dataSource.data(e.items);
    }
}); 
```

检查这里运行的代码：http: [//jsfiddle.net/OnaBai/5bchz/](http://jsfiddle.net/OnaBai/5bchz/)

# java - tomcat 6读取另一个目录

> ID：15218217
> 
> 赞同：2
> 
> 时间：2013-03-05T07:37:13.780
> 
> 标签：java, tomcat

我有个问题。我的 Windows 8 系统中有 3 个 tomcat 目录：

```
D:/apache tomcat 6/
D:/apache tomcat 6_old/
D:/tomcat6/ 
```

最后两个文件夹又旧又脏。我想用新鲜的第一个；所以我正在尝试运行它。

```
D:/apache tomcat 6/bin/tomcat6.exe 
```

但奇怪的是，windows 在第三个（D:/tomcat6/）中运行带有配置和 webapps 的 tomcat。我在环境变量中设置了 CATALINA_HOME；但没有效果。

你能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:52:22.477

设置 CATALINA_HOME 会有所帮助，但您必须使用 startup.bat 来启动 Tomcat，而不是 tomcat6.exe

您也可以使用一个小批处理文件来执行此操作（我使用这种方式，因为我的计算机上安装了很多 tomcat。这是我的脚本之一：

```
setlocal
cd C:\mock\apache-tomcat-7.0.27\bin
set CATALINA_HOME=C:\mock\apache-tomcat-7.0.27
call startup.bat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:45:41.823

看不到为什么启动第一个 tomcat 会启动另一个 tomcat 的任何原因。

您可以删除未使用的 tomcat 目录，这样您就只有一个 Tomcat。还要确保杀死所有 java/tomcat 进程，然后启动所需的进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:16:51.070

改变你的`CATALINA_HOME`

从

```
D:/tomcat6/ 
```

**至**

```
D:/apache tomcat 6/ 
```

还要确保将以下内容添加到`path`变量中

```
 %CATALINA_HOME%\bin; 
```

# java - 类变量的检查样式

> ID：15218226
> 
> 赞同：0
> 
> 时间：2013-03-05T07:37:46.243
> 
> 标签：java, eclipse, performance, checkstyle

检查风格说，对于私有类变量“必须声明为 final”。

```
class Test {
    private int x=1;

    public void set(int x) {
        this.x = x;
    }
} 
```

在上述情况下，它调用将 x 声明为 final，但是将 x 声明为 final 会在构造函数中初始化它时出错。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:46:45.967

通过 setter 进行修改`private`和字段访问是一种糟糕的风格。`static`您必须执行以下操作之一：

1）为它制作字段`x` `final`并删除`set`方法。

任何一个

2）使字段`x`非静态（删除`static`关键字），则不需要 make 它`final`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:48:53.133

您不能更改静态最终字段的值。

如果您真的需要 x 是静态的，请将您的方法更改为

```
public static void setX(int newX){
    [...] 
```

请记住，在静态方法中不能使用“this”。

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:48:24.097

> 但是将 x 声明为 final 会在构造函数中初始化它时出错

要初始化静态字段，请使用[static block](https://stackoverflow.com/questions/2943556/static-block-in-java)。

而且，为什么应该是`final`......原因是

1.  它是`private static`并且不能从外部访问。
2.  如果不需要，`final`则无需制作`static`

所以，要么删除要么`static`使用`final private static`

现在，您的另一部分代码：

```
public void set(int x) {
    this.x = x;
} 
```

问题：

1.  `static`不应使用 访问字段`this`。
2.  使用静态块初始化静态字段。

# c# - 将 '[' 8 个字符 ']' 替换为空白

> ID：15218228
> 
> 赞同：1
> 
> 时间：2013-03-05T07:37:54.043
> 
> 标签：c#, .net, regex

我正在尝试用常规表达式替换字符串中的某些内容，但没有成功。

我正在尝试替换任何出现的**`[`**后跟**8**个字符并以**`]`**

例如**`[F2283D02]`**用**空格**替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:42:47.460

我认为您正在查看十六进制字符串，因此您的正则表达式将是

```
\[[0-9A-F]{8}\]
^            ^ escapes required as [ and ] are regex-metacharacters 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:43:46.760

```
string result = Regex.Replace(input, @"\[[^\]]{8}\]", ""); 
```

[ 寻找开头的 '['

[^]]{8} 查找不是 ']' 的 8 个连续字符

] 寻找结束的 ']'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:55:30.113

```
 string input = "Replace [fbzdkdf] with empty";
 input = Regex.Replace(input, @"\[\w{8}\]","");
 Console.WriteLine(input); 
```

**输出：替换为空**

解释

**[** ：反斜杠在正则表达式中转义了肉字符 [ 。
**\w{8}**：匹配任意 8 个字符。
**]** : 转义元字符 ]

*   转义意味着关闭下一个字符的特殊含义。反斜杠进行转义。

不要忘记使用

```
using System.Text.RegularExpressions; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:44:09.723

试试下面的表达式：

```
@"\[([a-zA-Z0-9]{8})\]" 
```

请参阅[沙盒](http://www.rubular.com/r/PQQaObx3gz)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T07:45:40.637

你试过什么？你试过dis：

```
(?<=\[).{8}(?=\]) 
```

一些解释：

`.{8}`- 任何类型的八个字符

`(?<=\[)`和`(?=\])`- 我们寻找被 '[]' 包围的字符，但我们不需要找到括号本身，只需要知道这些字符是否在括号中

[红色的](http://rubular.com/r/eGSoTQYuB9)

# php - 如何在 chrome 和 IE 上使用 php 下载 word 文件

> ID：15218231
> 
> 赞同：-4
> 
> 时间：2013-03-05T07:37:59.993
> 
> 标签：php, download, header, ms-word, readfile

使用 php header 和 readfile 函数下载 word 文件时出现问题。在 Mozilla Firefox 中下载时响应良好，但在使用 google chrome 和 IE 时效果不佳。请指导我解决此问题。

这是我的代码：

```
switch(strtolower($ext))
    {
        case "doc": $ctype="application/msword"; break; 
        case "docx": $ctype="application/vnd.openxmlformats-officedocument.wordprocessingml.document"; break;                       
        default: $ctype="application/octet-stream"; 
    }

    header('Content-Description: File Transfer');
    //header("Content-type: application/octet-stream");
    header("Content-Type: ".$ctype." "); 
    header('Content-Disposition: attachment; filename='.basename($rw['FINALDOCNAME']));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header('Pragma: private');
    header('Content-Length: ' . filesize($rw['FINALDOCNAME']));
    ob_clean();
    flush();
    readfile($filepath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:43:25.010

Try below code.

```
<?php
$fdl = @fopen($filePath,'rb');
header("Status: 200");
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT');
header("Pragma: hack");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private", false);
header("Content-Description: File Transfer");
header("Content-Type: application/force-download");
header("Content-Type: application/download");
header("Content-Type: $ctype");
header("Content-Disposition: attachment; filename=\"".$filename."\""); 
header("Content-Transfer-Encoding: binary");
header("Content-Length:".filesize($filePath));  
if($fdl)
{
    while(!feof($fdl)) {
        print(fread($fdl, filesize($filePath)));
        flush();
        if (connection_status()!=0) 
        {
            @fclose($fdl);
            die();
        }
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:48:21.593

```
<?php
$todayDate = date('d-m-Y');
$filename = 'untitled.docx';
header('content-type: application/octet-stream');
header('content-Disposition: attachment; filename='.$filename.'-'.$todayDate.'.xls');
header('Pragma: no-cache');
header('Expires: 0');
echo file_get_contents($filename);
?> 
```

# android - 联系人，包括 android 中的搜索选项

> ID：15218236
> 
> 赞同：0
> 
> 时间：2013-03-05T07:38:14.340
> 
> 标签：android

我试图在 android 中选择联系人 API。

*   当我使用以下方法（CONTENT_URI）时，它工作正常。
*   但我无法在联系人 API 中获得任何搜索选项。请任何人分享您所知道的信息。谢谢..

**代码在这里**

```
 public void onActivityResult(int reqCode, int resultCode, Intent data) {
 super.onActivityResult(reqCode, resultCode, data);

 switch (reqCode) {
 case (PICK_CONTACT) :
   if (resultCode == Activity.RESULT_OK) {

     Uri contactData = data.getData();
     Cursor c =  managedQuery(contactData, null, null, null, null);
     if (c.moveToFirst()) {

         String id =c.getString(c.getColumnIndexOrThrow(ContactsContract.Contacts._ID));

         String hasPhone =c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

           if (hasPhone.equalsIgnoreCase("1")) {
          Cursor phones = getContentResolver().query( 
                       ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null, 
                       ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ id, 
                       null, null);
             phones.moveToFirst();
             cNumber = phones.getString(phones.getColumnIndex("data1"));

             System.out.println("number is:"+cNumber);
           }
         /*name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

         Textcontact.setText(name);*/

         edt.setText(cNumber);

     }
   }
   break;
 }
 } 
```

**注意：** 我需要像 android 联系人搜索这样的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:14:31.247

您将不得不[创建一个搜索界面](http://developer.android.com/guide/topics/search/search-dialog.html)。

首先，您需要创建一个同时具有 EditText 和 ListView 的 XML 布局。

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<!-- Pretty hint text, and maxLines -->
<EditText android:id="@+building_list/search_box" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="type to filter"
    android:inputType="text"
    android:maxLines="1"/>

<!-- Set height to 0, and let the weight param expand it -->
<!-- Note the use of the default ID! This lets us use a 
     ListActivity still! -->
<ListView android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" 
     /> 

</LinearLayout> 
```

这将正确布置所有内容，ListView 上方有一个漂亮的 EditText。接下来，像往常一样创建一个 ListActivity，但在 onCreate() 方法中添加一个 setContentView() 调用，以便我们使用我们最近声明的布局。请记住，我们专门使用 android:id="@android:id/list" 标识了 ListView。这允许 ListActivity 知道我们要在声明的布局中使用哪个 ListView。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.filterable_listview);

    setListAdapter(new ArrayAdapter<String>(this,
                   android.R.layout.simple_list_item_1, 
                   getStringArrayList());
} 
```

现在运行应用程序应该会显示您以前的 ListView，上面有一个漂亮的框。为了让那个盒子做点什么，我们需要从中获取输入，并让那个输入过滤列表。虽然很多人尝试手动执行此操作，但大多数 ListView 适配器类都带有一个 Filter 对象，可用于自动执行过滤。我们只需要将 EditText 中的输入通过管道传输到 Filter 中。事实证明这很容易。要运行快速测试，请将此行添加到您的 onCreate() 调用

```
adapter.getFilter().filter(s); 
```

请注意，您需要将您的 ListAdapter 保存到一个变量中才能使这项工作 - 我已将之前的 ArrayAdapter 保存到一个名为“适配器”的变量中。

下一步是从 EditText 获取输入。这实际上需要一些思考。您可以将 OnKeyListener() 添加到您的 EditText。但是，此侦听器仅接收一些关键事件。例如，如果用户输入“wyw”，则预测文本可能会推荐“eye”。在用户选择“wyw”或“eye”之前，您的 OnKeyListener 不会收到按键事件。有些人可能更喜欢这个解决方案，但我发现它令人沮丧。我想要每个关键事件，所以我可以选择过滤或不过滤。解决方案是 TextWatcher。只需创建一个 TextWatcher 并将其添加到 EditText，并在每次文本更改时向 ListAdapter Filter 传递一个过滤器请求。记得删除 OnDestroy() 中的 TextWatcher！这是最终的解决方案：

```
private EditText filterText = null;
ArrayAdapter<String> adapter = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.filterable_listview);

    filterText = (EditText) findViewById(R.id.search_box);
    filterText.addTextChangedListener(filterTextWatcher);

    setListAdapter(new ArrayAdapter<String>(this,
               android.R.layout.simple_list_item_1, 
               getStringArrayList());
}

private TextWatcher filterTextWatcher = new TextWatcher() {

public void afterTextChanged(Editable s) {
}

public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
}

public void onTextChanged(CharSequence s, int start, int before,
        int count) {
    adapter.getFilter().filter(s);
}

};

@Override
protected void onDestroy() {
    super.onDestroy();
    filterText.removeTextChangedListener(filterTextWatcher);
} 
```

# ubuntu - 无法引导 ec2 ubuntu 实例

> ID：15218238
> 
> 赞同：0
> 
> 时间：2013-03-05T07:38:27.477
> 
> 标签：ubuntu, amazon-web-services, amazon-ec2, chef-infra

嗨，我正在尝试使用刀命令行工具引导一个 ubuntu ec2 实例，但是当我运行此命令时

```
knife ec2 server create -x ubuntu --region ap-southeast-1  -i ami-0cdf4965 -S key  --identity-file  ~/key.pem  -G default  -r 'recipe[apt],recipe[apache2],recipe[ntp],recipe[ruby]' 
```

我刀抛出一个错误

```
ERROR: You did not provide a valid 'Image' value 
```

并且当我使用 -I ami-id 时，它会告诉使用 -i 而不是 -I，但我可以在 us-east 区域引导实例，但在 ap-southeast 区域无法执行。

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:07:01.080

您的问题是 Amazon 系统映像 (AMI) 是特定于区域的。

根据可用 AMI[的云市场](http://thecloudmarket.com/image/ami-0cdf4965--ubuntu-images-ebs-ubuntu-quantal-12-10-amd64-server-20130206#/definition)目录，您尝试启动的 AMI - ami-0cdf4965 - 仅存在于该`us-east-1`区域，这解释了为什么您可以在那里启动 EC2 实例但不能在`ap-southeast-1`：

[根据此列表](http://thecloudmarket.com/owner/099720109477--canonical)，在您想要的区域中还有其他适用于 Ubuntu 的 AMI - 例如`ami-64cf8236`。您可以尝试启动其中一个。

但是，如果您确实需要在另一个区域中提供该确切的 AMI，您可以使用 AWS 控制台为该`us-east-1`区域中运行该 AMI 的实例拍摄快照，并将快照复制到“ap-southeast-1”区域。[这是亚马逊关于区域间 AMI 快照传输的文档](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-copy-snapshot.html)。该过程非常简单，但拍摄快照并将其传输到目标区域都需要一些时间。

需要注意的一点是，您可能会以正常的 AWS 使用率收取快照存储和区域之间的传输费用。

# spring - 使用 spring 3 +junit 4 +mybatis 测试中的错误自动装配服务

> ID：15218241
> 
> 赞同：0
> 
> 时间：2013-03-05T07:38:35.637
> 
> 标签：spring, junit, mybatis

我对使用 junit 4.10 和 mybatis 的 spring 3 测试有疑问。我无法在测试类中自动装配服务。

这是我得到的例外

```
Running it.infora.suap.service.MailReceiverAccountServiceTest
16:58:24,933  INFO TestContextManager:185 - @TestExecutionListeners is not present for class [class it.infora.suap.service.MailReceiverAccountServiceTest]: using defaults.
16:58:25,157  INFO XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [testApplicationContext.xml]
16:58:25,535  INFO GenericApplicationContext:500 - Refreshing org.springframework.context.support.GenericApplicationContext@17a6a4b: startup date [Mon Mar 04 16:58:25 CST 2013]; root of context hierarchy
16:58:25,740  INFO DefaultListableBeanFactory:581 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1a390f4: defining beans [mailReceiverAccountBean,mailReceiverAccountService,mailMessageService,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,transactionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,dataSource,sqlSessionFactory,sqlSession,org.mybatis.spring.mapper.MapperScannerConfigurer#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,mailMessageMapper,mailReceiverAccountMapper]; root of factory hierarchy
16:58:26,732 ERROR TestContextManager:324 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@823b18] to prepare test instance [it.infora.suap.service.MailReceiverAccountServiceTest@1f5c8d2]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'it.infora.suap.service.MailReceiverAccountServiceTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private it.infora.suap.service.MailReceiverAccountService it.infora.suap.service.MailReceiverAccountServiceTest.mailReceiverAccountService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [it.infora.suap.service.MailReceiverAccountService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private it.infora.suap.service.MailReceiverAccountService it.infora.suap.service.MailReceiverAccountServiceTest.mailReceiverAccountService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [it.infora.suap.service.MailReceiverAccountService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 32 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [it.infora.suap.service.MailReceiverAccountService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 34 more 
```

我试图在 springBean 文件中手动注册 bean，但它得到一个空值。

我的配置和课程是

pom.xml

```
<properties>
        <spring.version>3.1.2.RELEASE</spring.version>     
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <repositories>
        <repository>
            <id>JBoss repository</id>
            <url>http://repository.jboss.com/maven2/</url>
        </repository>
    </repositories>

    <dependencies>

        <!-- PostgeSQL -->
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901.jdbc4</version>
        </dependency>    

        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- JSP dependacy -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>

        <!-- Apache Commons Upload -->
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2.2</version>
        </dependency>

        <!-- Apache Commons Upload -->
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.1-b01</version>
        </dependency> 

        <!-- Ibatis -->  
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis-spring</artifactId>
            <version>1.2.0</version>
        </dependency>  
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>3.2.0</version>
        </dependency>        
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <!-- JUnit -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>MailClient</artifactId>
            <version>${project.version}</version>
        </dependency>     

    </dependencies> 
```

applicationContext.xml（用于测试）

```
<context:component-scan base-package="it.infora.suap" />

        <!-- enable autowire -->
    <context:annotation-config  />

    <!-- transaction manager, use JtaTransactionManager for global tx -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>    

        <!-- enable transaction demarcation with annotations -->
    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Declare a datasource that has pooling capabilities -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" p:driverClassName="org.postgresql.Driver" p:url="jdbc:postgresql://localhost:5432/suap"
        p:username="userSuap" p:password="us3rsu@p" p:defaultAutoCommit="false" />

        <!-- define the SqlSessionFactory -->
        <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="typeAliasesPackage" value="it.infora.suap.model"/>
            <!--property name="configLocation" value="META-INF/mybatis-config.xml" /-->
            <property name="typeHandlersPackage" value="it.infora.suap.handler"/>

        </bean>        

        <bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate">
         <constructor-arg index="0" ref="sqlSessionFactory" />
        </bean>        

        <!-- scan for mapper interface files and let them be autowired -->
     <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
      <property name="basePackage" value="it.infora.suap.persistence" />
     </bean> 
```

我的模特班

```
@Component
public class MailReceiverAccountBean implements MailReceiverAccount {

    private Integer id;
    private String username;
    private String password;
//    private String email;
    private String serverAddress;
    private Integer serverPort;
    private MailProtocol mailProtocol;
//    private String name;
    private Boolean encrypted;
    private MailEncryptionType encryptionType;
    private String accountName;

omitted getter and setter .... 
```

映射器类

```
@Repository
public interface MailReceiverAccountMapper {

    @Insert("INSERT INTO email_account(username, password, server_address, server_port, mail_protocol, account_name, encrypted, encryption_type)"
            + " VALUES(#{username}, #{password}, #{serverAddress}, #{serverPort}, #{mailProtocol, javaType=MailProtocol.class, jdbcType=JdbcType.VARCHAR, typeHandler=MailProtocolEnumHandler.class},"
            + " #{accountName}, #{encrypted}, #{encryptionType, javaType=MailProtocol.class, jdbcType=JdbcType.VARCHAR, typeHandler=MailEncryptionTypeEnumHandler.class})")
//    @Options(useGeneratedKeys = true, keyProperty = "id")
    public void insertEmailAccount(MailReceiverAccountBean mailReceiverAccountBean);

......... 
```

服务等级

```
@Service("mailReceiverAccountService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class MailReceiverAccountService implements DaoService<MailReceiverAccountBean>{

    @Autowired
    private SqlSession sqlSession;

    @Override
    public void save(MailReceiverAccountBean entity) {
        MailReceiverAccountMapper mailReceiverAccountMapper = sqlSession.getMapper(MailReceiverAccountMapper.class);
        mailReceiverAccountMapper.insertEmailAccount(entity);
    }
       ............ 
```

测试类

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="classpath:testApplicationContext.xml")
public class MailReceiverAccountServiceTest {

    @Autowired
    private MailReceiverAccountService mailReceiverAccountService;

    /**
     * Test of save method, of class EmailAccountService.
     */
    @Test
    public void testSave() {
        System.out.println("save");
        MailReceiverAccountBean ea = this.getFilledEntity();
        mailReceiverAccountService.save(ea);

        Assert.assertTrue(ea.getId() != 0);

        MailReceiverAccountBean created = mailReceiverAccountService.findById(ea.getId());
        Assert.assertNotNull(created);
        Assert.assertEquals(ea, created);        
    } 
```

怎么了？我失去了一些配置吗？提前致谢

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:38:16.013

### 解决了......问题是我试图在没有接口的情况下自动装配一个具体的bean

谢谢大家的回复:-)

安德烈亚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:06:03.087

将自动装配的代码从

```
@Autowired
private MailReceiverAccountService mailReceiverAccountService; 
```

到

```
@Autowired
private DaoService mailReceiverAccountService; 
```

如果您有多个 DaoService 实现类，请使用 @Qualifier 和 @Autowired 来区分它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:07:29.200

在上下文 xml 中，您没有提供用于扫描带注释组件的基本包。因此，您的服务类不会被扫描和自动装配。请将此条目添加到上下文中

```
<context:annotation-config />
<context:component-scan base-package="basepackage" /> 
```

# java - 控制台应用程序中的 OAuth 1.0

> ID：15218242
> 
> 赞同：1
> 
> 时间：2013-03-05T07:38:38.970
> 
> 标签：java, oauth, console

我想创建一个应用程序，它是一个必不可少的控制台命令行工具，用 java 编写，需要使用 OAuth 1.0 访问 API。

我可以看到周围有一些有用的库，例如 Scribe 和 JOauth，它们有助于协商，有些场景适用于 Web 应用程序和 android 应用程序。

搜索后，我找不到任何控制台应用程序可以在哪里启动默认 Web 浏览器，然后取回授权令牌的示例。我看到用于发布/更新 GAE 应用程序的 Google 应用程序引擎工具确实做到了这一点。任何人都可以提供如何完成此操作的任何示例代码或一些有用文档的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:35:37.903

[您可以使用java.awt.Desktop](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html)类启动用户的默认 Web 浏览器。例如：

```
URI uri = new URI("http://www.relevantserver.com");
java.awt.Desktop.getDesktop().browse(uri); 
```

# iphone - MutableArray 没有永久存储信息

> ID：15218244
> 
> 赞同：0
> 
> 时间：2013-03-05T07:38:44.217
> 
> 标签：iphone, ios, methods, nsmutablearray

`flickPhotosSearch`应该做评论的自我。图片行可以。如果我取消注释，它可以正常工作，但由于我需要它动态工作，我需要让 flickrPhotoSearch 做同样的事情。它将相同的信息保存到图像数组中，但是当它离开该方法时，它不再起作用。

```
[self flickrPhotosSearch:url];
/*    self.images = [[NSMutableArray alloc] initWithObjects:
                          [NSArray arrayWithObjects:@"http://farm6.staticflickr.com/5095/5426345292_40ec29d5ea.jpg", @"http://farm6.staticflickr.com/5095/5426345292_40ec29d5ea_s.jpg", nil], nil]; */

       NSLog(@"%@", self.images);

   }
   return self;
}

-(void)flickrPhotosSearch:(NSURL *) url {

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        NSDictionary *photos = [JSON objectForKey:@"photos"];
        self.picturesOfLocations = [photos objectForKey:@"photo"];

        for (NSDictionary * photo in self.picturesOfLocations ){

            NSString* flickrfarmID = [photo  objectForKey:@"farm"];
            NSString* flickrServer = [photo  objectForKey:@"server"];
            NSString* flickrID = [photo  objectForKey:@"id"];
            NSString* flickrSecret = [photo  objectForKey:@"secret"];

            NSString *stringURLOriginalImage = [[NSString alloc] initWithFormat:@"http://farm%@.staticflickr.com/%@/%@_%@.jpg",flickrfarmID,flickrServer, flickrID,flickrSecret];
            NSString *stringURLSmallImage = [[NSString alloc] initWithFormat:@"http://farm%@.staticflickr.com/%@/%@_%@_s.jpg",flickrfarmID,flickrServer, flickrID,flickrSecret];

            [self.images addObject:[NSArray arrayWithObjects:stringURLOriginalImage,stringURLSmallImage, nil]];

            NSLog(@"%@", self.images);

        }

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);

    }];
    [operation start];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:41:58.230

Change :

```
self.images = [[NSMutableArray alloc] initWithObjects: [NSArray arrayWithObjects:@"http://farm6.staticflickr.com/5095/5426345292_40ec29d5ea.jpg", @"http://farm6.staticflickr.com/5095/5426345292_40ec29d5ea_s.jpg", nil], nil]; 
```

To :

```
[self.images addObject:@"http://farm6.staticflickr.com/5095/5426345292_40ec29d5ea.jpg"];
[self.images addObject:@"http://farm6.staticflickr.com/5095/5426345292_40ec29d5ea_s.jpg"]; 
```

# iphone - 使用 willDisplayCell 注册 tableView 完成加载 - 不适用于 0 结果

> ID：15218245
> 
> 赞同：0
> 
> 时间：2013-03-05T07:38:50.300
> 
> 标签：iphone, ios, objective-c, xcode

如果我的 tableView 没有可显示的内容，我需要提醒用户有 0 个结果。我在 willDisplayCell 方法中执行此操作，但如果有 0 个结果，它不会注册。有谁知道如何修改这个？谢谢！

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell 
forRowAtIndexPath:(NSIndexPath *)indexPath {

if([indexPath row] == ((NSIndexPath*)[[tableView indexPathsForVisibleRows] 
lastObject]).row) {

    if ([self.listItems count] == 0) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Results" message:@"No 
        results found" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:42:36.163

`viewWillAppear`您可以在您的方法中显示警报您的`willDisplayCell`方法未调用，因为您的行数为 0，如果您仔细查看您的`willDisplayCell`方法，您会发现一个参数`forRowAtIndexPath`，这就是为什么它没有被调用，因为行数为零。

```
-(void)viewWillAppear:(BOOL)animated
 {

    if ([self.listItems count] == 0)
    {
       UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Results" message:@"No 
       results found" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
       [alert show];
    }
    else
    {
       [tableView reloadData];
    }
     [super viewWillAppear:animated];
 } 
```

# c# - 单击用户控件的按钮时，事件处理程序不会触发

> ID：15218248
> 
> 赞同：0
> 
> 时间：2013-03-05T07:39:02.287
> 
> 标签：c#, winforms

我有一个来自用户控件的按钮，并希望它在单击时通知我的表单。这是我的做法。这没用。有人可以告诉我它有什么问题吗？

在用户控制中

```
 public event EventHandler clicked;
    public string items;
    InitializedData data = new InitializedData();
    ArrayList list = new ArrayList();
    public DataInput()
    {
        InitializeComponent();
        clicked+= new EventHandler(Add_Click);

    }

    public void Add_Click(object sender, EventArgs e)
    {
        items = textBox1.Text.PadRight(15) + textBox2.Text.PadRight(15) + textBox3.Text.PadRight(15);

        if (clicked != null)
        {
            clicked(this, e);
        }
    } 
```

在 Form1 中

```
 UserControl dataInput= new UserControl();
    public void OnChanged(){
        dataInput.clicked += Notify;
        MessageBox.Show("testing");
    }

    public void Notify(Object sender, EventArgs e)
    {
        MessageBox.Show("FIRE");
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:49:10.860

`UserControls` `Button`Click 事件应该分配给`Add_Click`，我认为您不想将事件`UserControl` `clicked`分配给`Add_Click`

尝试`clicked += new EventHandler(Add_Click);`从您的 UserControl 中删除并将`UserControls` `Button` `Click`事件设置为，以便它会在您身上`Add_Click`触发`clicked``Form`

例子：

用户控制：

```
public partial class UserControl1 : UserControl
{
    public event EventHandler clicked;

    public UserControl1()
    {
        InitializeComponent();

        // your button
        this.button1.Click += new System.EventHandler(this.Add_Click);
    }

    public void Add_Click(object sender, EventArgs e)
    {
        if (clicked != null)
        {
           // This will fire the click event to anyone listening
            clicked(this, e);
        }
    }
} 
```

形式：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        // your usercontrol
        userControl11.clicked += userControl11_clicked;
    }

    void userControl11_clicked(object sender, EventArgs e)
    {

    }
} 
```

# c# - 在 Ms 图表控件中使用对数刻度

> ID：15218249
> 
> 赞同：1
> 
> 时间：2013-03-05T07:39:04.493
> 
> 标签：c#, asp.net, mschart

我试图创建一个图表，其 x 轴的对数刻度以 10 为底，范围从 1 到 1000。我似乎能够在设计时创建轴，但每当加载表单时，我都会收到一条错误消息，提示“图表面积轴 - 此轴不能使用对数刻度。

这是对 MSChart 控件的限制吗？为什么我无法在 X 轴上创建对数刻度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:45:45.527

这是因为对于对数刻度，值必须大于零。Charting.CHARt 将空图表视为由零组成（我知道这很奇怪）。此错误可能非常难以调试。因此，这意味着如果任何轴是对数刻度，则图形不能为空。我通常做的是将轴设置为线性并在图表上绘制后立即更改它（并检查对数刻度上没有零或负值）。另外，请记住在清除轴和绘图之前将轴更改为线性。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-23T21:02:18.943

我建议使用 SuppressExceptions 属性，该属性允许忽略一些异常，也就是与轴中的零点连接且具有对数刻度的异常。我认为这是针对这种情况的最佳解决方案，而不是操纵数据。

```
chart.SuppressExceptions = true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-24T11:11:27.340

这不仅关乎零，还关乎让您的值具有正确的数据类型。假设您正在使用数据表中的值填充图表。如果您没有指定类型，.NET 将自动假定它们是字符串，因此无法绘制对数刻度。

数据表的不完整规范：

```
 PP = New DataTable
        PP.Columns.Add("X-value")
        PP.Columns.Add("Y-value") 
```

完整规格：

```
 PP = New DataTable
        PP.Columns.Add("X-value", Type.GetType("System.Double"))
        PP.Columns.Add("Y-value", Type.GetType("System.Double")) 
```

在第一个示例中，将引发异常。在第二个它不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:50:24.087

并非所有图表类型都支持对数刻度；尝试将图表类型更改为折线图。

图表类型：http: [//msdn.microsoft.com/en-us/library/dd489233.aspx](http://msdn.microsoft.com/en-us/library/dd489233.aspx)

ChartType 属性：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.series.charttype.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.series.charttype.aspx)

# sitecore - Sitecore 查询未返回 9 级项目的结果

> ID：15218253
> 
> 赞同：2
> 
> 时间：2013-03-05T07:39:26.963
> 
> 标签：sitecore

我的站点核心项目层次结构是这样的，

/sitecore/content/Public/level1/level2/level3/Item1/Images/Image1

我在 X-Path builder 中尝试了以下查询 `/sitecore/content/Public/level1/level2/level3/Item1/Images/Image1/*` 不返回任何结果...

但是，上一级返回结果，（所有图像 Image1、Image 2 等） `/sitecore/content/Public/level1/level2/level3/Item1/Images/*`

在返回 Image1 之后， `/sitecore/content/Public/level1/level2/level3/Item1/Images//*`

（在主数据库中执行数据和查询）

这是一个站点核心查询限制，您无法查询超过 8 个级别的单个项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:29:53.293

检查`<setting name="Query.MaxItems" value="100" />`web.config 中的属性设置。标准设置为仅返回前 100 个项目。提高限制，看看这是否与您的问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:10:48.690

我不知道一些限制，并认为这应该有效。您的查询看起来也不错。您确定“Image1”下有一些可用的项目吗？如果您在“Image1”下只有描述的层次结构而没有子级，那么您将不会获得查询返回的任何项目。

您的最后一个查询（带有//*）也说只返回“Image1”。因为 // 定义了一个递归查询，如果有的话，也应该返回“Image1”的孩子。

# ember.js - 如何侧载 ember hasMany 和 belongsTo 关系？

> ID：15218257
> 
> 赞同：6
> 
> 时间：2013-03-05T07:39:47.390
> 
> 标签：ember.js, ember-data

我有一个人模型如下

```
 App.Person= DS.Model.extend({
      id: DS.attr('string'),   
      name: DS.attr('string'),
      visits: DS.hasMany('App.Visit'),
      events: DS.hasMany('App.Event') ,
      allergies: DS.hasMany('App.Allergies'),
      get_allergies : function(){
    return this.get('allergies').getEach('allergy_name').reduce(function(accum, item) {
      return (accum.length > 0) ? (accum +', '+ item) : (item);
    }, '');
  }.property('allergies.@each.allergy_name')    
    });

App.Visit = DS.Model.extend({
  visit_id: DS.attr('string'),
  date: DS.attr('date'),     
  admission: DS.belongsTo('App.Admission')
});

App.Admission = DS.Model.extend({
  loc: DS.attr('string'),
  admission_date: DS.attr('date'),
  care_team: DS.belongsTo('App.CareTeam')
}); 
```

正如你所看到的，Person hasMany "allergies"，以及 person，allergies 也为我加载，因为在 UI 中我调用 get_allergies 方法，而其他 hasMany 关系，如 "visits" 和 "events" 没有加载。

在用户界面 {{person.get_allergies}}

我试图侧载关系“访问”和“事件”（使用网络上的示例），但这不起作用？有人能告诉我什么是侧载 ember-data 的正确方法，因为除了关于 stackoverflow 本身的几个问题外，我在网上找不到任何合适的示例文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:41:24.167

根据[文档](http://emberjs.com/guides/models/the-rest-adapter/#toc_sideloaded-relationships)，您应该在服务器的响应中添加额外的访问和事件数据。

```
{
  "person": {
    "id": 1,
    ...
    "event_ids": [5, 6, 7]
  },

  "events": [{
    "id": 5,
    ...
  },
  {
    "id": 6,
    ...
  },
  {
    "id": 7,
    ...
  }]
} 
```

这里的要点是事件数据应该在人员数据之外。

你使用标准的 REST 适配器吗？您能否添加服务器返回的示例 json？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T14:27:56.733

为了在我的应用程序中侧载数据，我配置了 ember-data 以了解我将侧载的内容类型。例如，要加载事件和访问，请执行以下操作：

```
DS.RESTAdapter.configure('App.Event', {
    sideloadsAs: 'events'
});

DS.RESTAdapter.configure('App.Visit', {
    sideloadsAs: 'visits'
});

App.Store = DS.Store.extend({
    revision: 11
}); 
```

然后在你的 json 中看起来像这样：

```
{
  "person": {
    "id": 1,
    "event_ids": [5, 6, 7],
    "visit_ids": [1, 2, 3]
  },

  "events": [
    { "id": 5 },
    { "id": 6 },
    { "id": 7 }
  ],

  "visits": [
    { "id": 1 },
    { "id": 2 },
    { "id": 3 }
  ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T21:26:58.950

我有同样的问题，但设置有点不同。`visits`不知道他们`person`（即做不到`visit.get('person.name')`）。我必须添加一个序列化程序`visit`：

```
export default AppSerializer.extend({
  attrs: {
    person: 'personId'
  },
}); 
```

我的有效载荷如下所示：

```
{
  person: {
    id: 1,
    name: 'John',
    visitIds: [1, 2, 3]
  },

  visits: [
    { id: 1,
      personId: 1
    },
    { id: 2,
      personId: 1
    },
    { id: 3,
      personId: 1
    }
  ]
} 
```

`person`模型：

```
export default DS.Model.extend({
  name: DS.attr('string'),
  visits: DS.hasMany('visit')
}); 
```

`visit`模型：

```
export default DS.Model.extend({
  person: DS.belongsTo('person')
}); 
```

# php - 处理不同的 If/Else 块时如何使下拉列表保持不变？

> ID：15218259
> 
> 赞同：0
> 
> 时间：2013-03-05T07:39:50.630
> 
> 标签：php, html, mysql

我是 PHP-to-Mysql 的新手，所以我正在使用 mysql_* 其他人已经声明不再支持的函数。但我发现这个地方最适合问我的问题，因为我找不到任何有类似问题的人。

所以基本上，我的问题是如何使下拉列表保持在 IF/ELSE 块内。当它通过另一个 IF/ELSE 块传递一个值（提交）时，它基本上消失了，所以我正在尝试一个代码，我不必在下一个 IF/ELSE 块中重写整个下拉代码。因为我正在尝试根据下拉列表中选择的选项显示一个文本框（它具有自动提交功能）。这可能吗？或者我必须求助于其他库（jQuery、javascript 等）？

如果有帮助，这是代码的一部分：

```
elseif($_POST['question'] == edit ){
    $res = mysql_query("SELECT questionID FROM questions");

    echo "<form action='' method='post'>
    Edit Question No.
        <select name='question_select' onchange=this.form.submit()>
            <option  value=null selected>--</option>";

            while($row = mysql_fetch_array($res))
            {
                echo "<option value=\"".$row['questionID']."\">".$row['questionID']."</option>";
            }

    echo "</select></form>";
  }

//TEXTBOX TO BE DISPLAYED WHEN A NUMBER IS SELECTED IN EDIT EXISTING
if (isset($_POST['question_select'])){
    $res = mysql_query("SELECT question FROM questions WHERE questionID='{$_POST['question_select']}'");
    $row = mysql_fetch_assoc($res);     

    echo "Editing Question ",$_POST['question_select'],"<br>
    <form action='' method='post'>
        <textarea name='edited_question' rows='4' cols='50'>",$row['question'],"</textarea><br>
        <input type='submit' name='save' value='Save'>
        <input type='hidden' name='question_num' value='{$_POST['question_select']}'>
        <input type='submit' name='cancel' value='Cancel'>
    </form>";
}

//PASSING OF VALUES WHEN SAVE IS PRESSED
if (isset($_POST['save'])){
    $edited_question = trim($_POST['edited_question']);
    mysql_query("UPDATE questions SET question='$edited_question' WHERE questionID='{$_POST['question_num']}'") or die(mysql_error);
    header("Location:admin_questions.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:52:09.563

为此使用jquery。它易于使用。对于 depanding 下拉，jquery 代码是：

```
$(document).ready(function(e) {
  $("#abc").change(function()
    {
     var firstfeild= $("#firstfeild").val();
     $.post("getdata.php",{"firstfeild":firstfeild},function(data)
       {
        $("#abc").html(data);   
       });
   });
}); 
```

在 getdata.php 中，只需编写 mysql 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:05:31.220

```
function renderDropdown($res)
{
    echo "
    <select name='question_select' onchange=this.form.submit()>
        <option  value=null selected>--</option>";
        while($row = mysql_fetch_array($res))
        {
            echo "<option value=\"".$row['questionID']."\">".$row['questionID']."</option>";
        }
    echo "</select>";
}

if(1==1)
{
    echo "<form action='' method='post'>Edit If Question No.";
    renderDropdown($res);
    echo "</form>";
}
else
{
    // $someOtherRes
    echo "<form action='' method='post'>Edit Else Question No.";
    renderDropdown($someOtherRes);
    echo "</form>";
} 
```

# php - 从ajax输出获取字符串而不是数组

> ID：15218264
> 
> 赞同：0
> 
> 时间：2013-03-05T07:40:06.047
> 
> 标签：php, jquery

我得到的是字符串格式，而不是从 ajax 输出的数组格式

```
$.get('ajax/order_details.php?order_limit=true&order_limit_id=<?php echo $_GET['id']; ?>', function(data){
                                alert(data.toSource()); 
```

});

这是我在 php 文件 (order_details.php) 中使用的代码

```
if(isset($_GET['order_limit_id']) and isset($_GET['order_limit'])){
    $g_o = $mysql->query("SELECT * FROM ocreturn r, ocorder o WHERE o.order_id = '".$_GET['order_limit_id']."' and r.customer_id = o.customer_id");
    echo json_encode($g_o->rows);
} 
```

我得到的输出为

```
(new String("[{\"return_id\":\"129\",\"order_id\":\"126450\",\"parent_status\":\"0\"}]")) 
```

我希望输出为数组而不是字符串。

谁能给我这个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:55:02.383

您可以通过将字符串 'json' 作为第三个参数传递给函数来指示 jQuery 将响应解析为 JSON `$.get`：

```
$.get('ajax/order_details.php?order_limit=true&order_limit_id=<?php echo $_GET['id']; ?>', function(data){
  alert(data.toSource());
}, 'json'); 
```

如果你想使用 jQuery 的底层`$ajax`函数，你可以使用下面的：

```
$.ajax({
  url: ajax/order_details.php,
  data: {order_limit: true, order_limit_id: <?php echo $_GET['id']; ?>},
  success: function (data) {
    alert(data);
  },
  dataType: 'json'
}); 
```

这实际上与调用`$.get`. 请记住，$.get 方法只是 $.ajax 方法的简写。请参阅[jQuery 文档](http://api.jquery.com/jQuery.get/)。`$.get`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:48:34.340

你应该使用 JSON ，服务器应该返回 JSON 数组，jquery 应该解析这个 json 而不是字符串，请参见： http:
[//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

而且jquery应该是

```
$.getJSON("URL",function(msg){
     alert("result : "+msg);
}); 
```

# wpf - 将observerbaleCollection绑定到wpf组合框

> ID：15218266
> 
> 赞同：0
> 
> 时间：2013-03-05T07:40:12.437
> 
> 标签：wpf, wcf, data-binding, observablecollection

我有课堂通话应用程序。它`Observable collection`调用了**AvailableTypes**。我想将此 AvailableTypes 可观察集合绑定到 wpf `ComboBox`。加载表单时，这些 AppId 应该加载到组合框中。你能给我一个解决方案吗？

```
class Apps: INotifyPropertyChanged{

    ServiceReference1.AssetManagerServiceClient client;
    ObservableCollection<string> availableType;
    public ObservableCollection<string> AvailableTypes
    {
        get
        {
            if (availableType == null)
            {
                availableType = new ObservableCollection<string>();

            }
            client = new ServiceReference1.AssetManagerServiceClient();
            List<string> AssestList = client.GetAppIds().ToList<string>();

            foreach (string appid in AssestList)
            {
                availableType.Add(appid);
            }
            return availableType;

        }
        set
        {
            availableType = value;
            NotifyPropertyChanged("AvailableTypes");

        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:04:03.623

在您的 xaml 代码中，这是一个如何绑定到组合框的简单示例。

```
<ComboBox ItemsSource={Binding Path=AvailableTypes} /> 
```

您还需要将视图模型加载到窗口的 DataContext 中。

```
var window = new MainWindow
{
    DataContext = new Apps()
};
window.Show(); 
```

如果你想在 App 启动时打开窗口，你可以这样做

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        var window = new MainWindow
        {
            DataContext = new Apps()
        };

        window.Show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:48:51.603

不要重载属性获取器/设置器。让它更简单。

我建议使用自动属性和[NotifyPropertyWeaver](http://visualstudiogallery.msdn.microsoft.com/bd351303-db8c-4771-9b22-5e51524fccd3)或使用[PostSharp](http://www.richard-banks.org/2009/02/aspect-oriented-programming.html)构建后编译时注入指令来支持 INotifyPropertyChanged 接口。

这使您的视图模型更具可读性和易于管理/理解。

在 SL 中的“Loaded”事件或“NavigatedTo”表单中，您可以开始从您想要的任何位置加载数据并在加载完成后设置相应的属性（在回调/事件处理程序中，不要忘记在更新绑定属性时使用 UI 调度程序）

# android - 适用于 android 的 CI TeamCity 无法为具有库和默认 build.xml 的项目构建 .apk 文件

> ID：15218268
> 
> 赞同：2
> 
> 时间：2013-03-05T07:40:13.063
> 
> 标签：android, teamcity

我有一个项目，它的 lib 不是 .jar，而是一个 android 库项目。所以我想在我的工作流程中加入 CI。我设置了成功构建项目但不生成 .apk 文件的服务器。我遵循了 adbice 并在 TeamCity 向导的其中一个步骤中将“调试”设置为目标属性，似乎服务器开始尝试构建 .apk，但它抛出了一个异常，例如：

```
../Android_library resolve to a path with no project.properties file for project C:\TeamCity\buildAgent\work\df2ac20d908e5f7f 
```

我有两个应用程序的默认 eclipse build.xml 文件是通过命令生成的：

```
android update project -p ./ -t 6 -s (for library)
android update project -p ./ -t 6 -l ../Android_library -s (for main project) 
```

我能够在本地构建这个项目，并且下面的命令成功地完成了 Vuild 的单词：

```
ant debug clean 
```

但是当我运行 CI 时，构建失败了。

所有项目都位于同一根目录中。VCS root 是我的主项目的路径默认属性看起来包含这些行：

```
target=Google Inc.:Google APIs:14
android.library.reference.1=../Android_library

target=Google Inc.:Google APIs:14
android.library=true 
```

所以我被困住了。你知道问题出在哪里吗？所有帮助将不胜感激。

项目的 build.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="LoginActivity" default="help">

<!-- The local.properties file is created and updated by the 'android' tool.
     It contains the path to the SDK. It should *NOT* be checked into
     Version Control Systems. -->
<property file="local.properties" />

<!-- The ant.properties file can be created by you. It is only edited by the
     'android' tool to add properties to it.
     This is the place to change some Ant specific build properties.
     Here are some properties you may want to change/update:

     source.dir
         The name of the source directory. Default is 'src'.
     out.dir
         The name of the output directory. Default is 'bin'.

     For other overridable properties, look at the beginning of the rules
     files in the SDK, at tools/ant/build.xml

     Properties related to the SDK location or the project target should
     be updated using the 'android' tool with the 'update' action.

     This file is an integral part of the build system for your
     application and should be checked into Version Control Systems.

     -->
<property file="ant.properties" />

<!-- if sdk.dir was not set from one of the property file, then
     get it from the ANDROID_HOME env var.
     This must be done before we load project.properties since
     the proguard config can use sdk.dir -->
<property environment="env" />
<condition property="sdk.dir" value="${env.ANDROID_HOME}">
    <isset property="env.ANDROID_HOME" />
</condition>

<!-- The project.properties file is created and updated by the 'android'
     tool, as well as ADT.

     This contains project specific properties such as project target, and library
     dependencies. Lower level build properties are stored in ant.properties
     (or in .classpath for Eclipse projects).

     This file is an integral part of the build system for your
     application and should be checked into Version Control Systems. -->
<loadproperties srcFile="project.properties" />

<!-- quick check on sdk.dir -->
<fail
        message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
        unless="sdk.dir"
/>

<!--
    Import per project custom build rules if present at the root of the project.
    This is the place to put custom intermediary targets such as:
        -pre-build
        -pre-compile
        -post-compile (This is typically used for code obfuscation.
                       Compiled code location: ${out.classes.absolute.dir}
                       If this is not done in place, override ${out.dex.input.absolute.dir})
        -post-package
        -post-build
        -pre-clean
-->
<import file="custom_rules.xml" optional="true" />

<!-- Import the actual build file.

     To customize existing targets, there are two options:
     - Customize only one target:
         - copy/paste the target into this file, *before* the
           <import> task.
         - customize it to your needs.
     - Customize the whole content of build.xml
         - copy/paste the content of the rules files (minus the top node)
           into this file, replacing the <import> task.
         - customize to your needs.

     ***********************
     ****** IMPORTANT ******
     ***********************
     In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
     in order to avoid having your file be overridden by tools such as "android update project"
-->
<!-- version-tag: 1 -->
<import file="${sdk.dir}/tools/ant/build.xml" />
</project> 
```

库的 build.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="MainActivity" default="help">

<!-- The local.properties file is created and updated by the 'android' tool.
     It contains the path to the SDK. It should *NOT* be checked into
     Version Control Systems. -->
<property file="local.properties" />

<!-- The ant.properties file can be created by you. It is only edited by the
     'android' tool to add properties to it.
     This is the place to change some Ant specific build properties.
     Here are some properties you may want to change/update:

     source.dir
         The name of the source directory. Default is 'src'.
     out.dir
         The name of the output directory. Default is 'bin'.

     For other overridable properties, look at the beginning of the rules
     files in the SDK, at tools/ant/build.xml

     Properties related to the SDK location or the project target should
     be updated using the 'android' tool with the 'update' action.

     This file is an integral part of the build system for your
     application and should be checked into Version Control Systems.

     -->
<property file="ant.properties" />

<!-- if sdk.dir was not set from one of the property file, then
     get it from the ANDROID_HOME env var.
     This must be done before we load project.properties since
     the proguard config can use sdk.dir -->
<property environment="env" />
<condition property="sdk.dir" value="${env.ANDROID_HOME}">
    <isset property="env.ANDROID_HOME" />
</condition>

<!-- The project.properties file is created and updated by the 'android'
     tool, as well as ADT.

     This contains project specific properties such as project target, and library
     dependencies. Lower level build properties are stored in ant.properties
     (or in .classpath for Eclipse projects).

     This file is an integral part of the build system for your
     application and should be checked into Version Control Systems. -->
<loadproperties srcFile="project.properties" />

<!-- quick check on sdk.dir -->
<fail
        message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
        unless="sdk.dir"
/>

<!--
    Import per project custom build rules if present at the root of the project.
    This is the place to put custom intermediary targets such as:
        -pre-build
        -pre-compile
        -post-compile (This is typically used for code obfuscation.
                       Compiled code location: ${out.classes.absolute.dir}
                       If this is not done in place, override ${out.dex.input.absolute.dir})
        -post-package
        -post-build
        -pre-clean
-->
<import file="custom_rules.xml" optional="true" />

<!-- Import the actual build file.

     To customize existing targets, there are two options:
     - Customize only one target:
         - copy/paste the target into this file, *before* the
           <import> task.
         - customize it to your needs.
     - Customize the whole content of build.xml
         - copy/paste the content of the rules files (minus the top node)
           into this file, replacing the <import> task.
         - customize to your needs.

     ***********************
     ****** IMPORTANT ******
     ***********************
     In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
     in order to avoid having your file be overridden by tools such as "android update project"
-->
<!-- version-tag: 1 -->
<import file="${sdk.dir}/tools/ant/build.xml" />
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:40:52.060

最后我解决了我的问题。问题在于 CI 构建主干中的输入路径。将您的 VCS 路径定义为路径也很重要，该文件夹包含两个项目，但构建的路径设置为 /build.xml

# asp.net-mvc-3 - 我们可以在自定义脚手架中使用 tt 模板而不是 T4 模板吗

> ID：15218274
> 
> 赞同：1
> 
> 时间：2013-03-05T07:41:12.703
> 
> 标签：asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我们可以在自定义脚手架中使用 tt 模板而不是 T4 模板来生成控制器和视图。

或者我们是否有将 tt 模板转换为 t4 模板的工具？

请建议。

感谢和问候克里斯蒂娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:19:22.113

tt 模板是 t4 模板，只是文件扩展名是 tt。

查看文件的位置： [如何在 ASP.NET MVC 3 中创建自己的脚手架模板？](https://stackoverflow.com/questions/4692311/how-do-i-create-my-own-scaffold-template-in-asp-net-mvc-3)

# php - 使用 php 列出 mysql 数据库

> ID：15218277
> 
> 赞同：1
> 
> 时间：2013-03-05T07:41:24.807
> 
> 标签：php, mysql, phpmyadmin

我的 phpmyadmin 有这些数据库，看起来像这样：

```
demo_db_1
information_schema
mysql
performance_schema
demo_db_2
test_db_1
test_db_2 
```

如何获取所有自定义数据库的列表？

含义：当我运行文件 test.php 时，我希望看到一个类似的列表

```
demo_db_1
demo_db_1
test_db_1
test_db_2 
```

我不想连接到任何数据库。只想要所有创建的数据库的列表。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:42:42.950

Call a mysql query with `mysql_query("show databases;");`

You can get list of the databases you have access to with:

```
SHOW DATABASES; 
```

If you want to get the list for some other user than the user you're logged in as, you have to query the `mysql.db` table.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:30:07.723

您可以使用以下代码：

```
<?php
    //mysql_connect('HostName','UserName','Password');
    mysql_connect('localhost','root','');
    $database = mysql_query("show databases;");
    while($data = mysql_fetch_assoc($database))
    {
    $fetch[] = $data;
    }
    print "<pre>";
    print_r($fetch);
?> 
```

# android - 以编程方式切换具有相同 ssid 和不同 bssid 的 wifi

> ID：15218281
> 
> 赞同：1
> 
> 时间：2013-03-05T07:41:46.490
> 
> 标签：android, android-wifi, wifimanager, wifi

我有 2 个具有相同“SSID”和不同 bssid 的 WiFi，并且都是开放网络。我创建了一个程序，它将尝试通过设置不同的 bssid 来断开与第一个 WiFi 的连接并连接到第二个 WiFi。
它在 htc 和摩托罗拉手机上运行良好，但在三星手机上根本不起作用。而对于HTC和摩托罗拉，即使WiFi切换成功，如果我靠近第一个WiFi，原生WiFi会自动帮助我连接回第一个WiFi。
你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:30:58.407

你最好向我们展示 adb 日志。我对三星手机的行为一无所知——例如，它们可能有一些与您的应用程序冲突的特定漫游算法。

# clojure - 如何映射要执行的 Java 方法序列

> ID：15218282
> 
> 赞同：6
> 
> 时间：2013-03-05T07:41:47.943
> 
> 标签：clojure

以下将起作用：

```
(map #(%1 "21") [identity]) 
```

但是以下代码失败

```
(map #(%1 "21") [.toString]) 
```

如何创建 Java 方法的序列/集合？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T07:47:52.330

Java 方法不像 clojure 中的函数那样是一等公民。您不能将 java 方法作为参数传递、返回或存储在变量和集合中。但是您可以通过[memfn](http://clojuredocs.org/clojure_core/clojure.core/memfn)或只是包装原始方法调用的匿名函数创建函数

```
(map #(%1 21) [(memfn toString)])
=> ("21")

(map #(%1 21) [#(.toString %)])
=> ("21") 
```

# ssis - 循环中的重复错误 (SSIS)

> ID：15218284
> 
> 赞同：0
> 
> 时间：2013-03-05T07:41:56.110
> 
> 标签：ssis

我有一个 SSIS 包，我在其中`ForEach`循环处理一些文件。在循环中，我有一个执行处理的数据流任务。我已通过将`maxerror count`循环的 设置为`0`. 我尝试使用`ON ERROR`循环容器的事件处理程序上的脚本任务在消息框中捕获错误。我没有得到一个错误，而是得到三个。 `Popagate`设置为`false`数据流的`OnPostExecute`事件。请帮忙。

主包——循环任务——数据流任务 ![在此处输入图像描述](../Images/81dc2004f94fdcb74c81096661c4a7f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:28:51.123

您在`script task`for事件处理程序中收到 1 个或多个错误的原因`on Error`是，如果容器的子控件内部出现任何错误，事件`Data Flow task`会从在这种情况下不起作用，因为您在其子组件中设置了任何设置。`ForEach``package level``propogate``false``MaximumErrorCount``0 overrides``propogate`

通常，我尝试在脚本任务中为 DFT 的事件处理程序创建一个`ErrorCount`变量，我检查计数`type int`

```
if (int.Parse(Dts.Variables["User::ErrorCount"].Value.ToString ()) == 0)
        {
            Dts.Variables["User::ErrorCnt"].Value = 1;
            //Do your logging operation or any operation
        } 
```

因此，以这种方式第一次触发事件处理程序时，它将变量设置`ErrorCount`为 1，因此 DFT 中的后续错误将使脚本任务中的 IF 条件失败。

如果您在 ForEach 循环中只有一个组件，我建议您使用以下任一方法

1.  `MaxErrorCount`ForEach 循环的属性

2.  `event handler`为`DFT`.Set`propogate`变量创建一个`False`并编写上述代码以检查错误数。

我通常倾向于使用第二种方法而不是设置`MaxErrorCount`，因为这使我能够更灵活地处理单个组件级别的错误

有关更多详细信息，请查看[此](http://msdn.microsoft.com/en-us/library/ms140223.aspx)MSDN 链接，该链接解释了 SSIS 中的事件处理程序是如何工作的

# javascript - OpenLayers重绘不起作用

> ID：15218289
> 
> 赞同：1
> 
> 时间：2013-03-05T07:42:13.043
> 
> 标签：javascript, jquery, openlayers

一旦我在矢量上设置了新标签，我一直在谷歌搜索一段时间，试图让我的地图重绘。如果我放大和缩小标签确实可以正常工作，但我希望它在点击功能上刷新。

```
 $(".openlayerLabel").change(function(){
                    var theValue = $(this).val();
                    if($(this).is(':checked')) {
                        console.log('Checkbox checked');
                        plugins.search.setStyles(true);
                        plugins.search.selectLayer.refresh({force:true});
                    }
                    else {
                        console.log('Checkbox unchecked');
                    }
                }); 
```

什么不起作用是 .refresh （其余工作正常）。我看到有人写我应该使用 force:true 所以我确实尝试了这个，但实际上什么也没发生。我也尝试过 .redraw 但这给出了类似的结果。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:57:42.400

不久前我在一个 OpenLayers 项目上工作，所以我有点生疏了，但如果我没记错的话，您可能需要遍历层中的所有功能并显式调用`layer.drawFeature(feature)`所有这些功能。像这样的东西：

```
var features = plugins.search.selectLayer.features;
for(var i = 0; i < features.length; i++) {
  plugins.search.selectLayer.drawFeature(features[i]);
} 
```

此处的文档：[http ://dev.openlayers.org/apidocs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.drawFeature](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.drawFeature)

基层类上还有一个“重绘”方法，你可以试试：

```
plugins.search.selectLayer.redraw(); 
```

此处的文档：[http ://dev.openlayers.org/apidocs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.redraw](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.redraw)

希望这两种方法中的一种有效！

# android - 在android中自定义来电屏幕

> ID：15218290
> 
> 赞同：1
> 
> 时间：2013-03-05T07:42:19.143
> 
> 标签：android, phone-state-listener

我创建了一个应用程序，用于显示自定义呼叫屏幕，使用 phonsstatelistener。屏幕上有我创建的接听和结束按钮，分别用于接听和拒绝来电。但是，选择按钮在**android 版本 2.3+**中不起作用，给出了安全异常。

请提供任何其他方式在 android 的电话来电屏幕上显示数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:49:13.247

如需更多有用的演示，请查看以下演示：

[在通话中显示信息](https://stackoverflow.com/questions/10683841/show-the-information-in-the-middle-of-the-call)

也许这会在一定程度上帮助你。

并检查此链接是否有异常：

[如何为 Gingerbread 上运行的应用授予 MODIFY_PHONE_STATE 权限](https://stackoverflow.com/questions/4715250/how-to-grant-modify-phone-state-permission-for-apps-ran-on-gingerbread)

# javascript - XHR.send(file + params)?

> ID：15218292
> 
> 赞同：7
> 
> 时间：2013-03-05T07:42:26.020
> 
> 标签：javascript, ajax, html, xmlhttprequest

I am trying to figure out how to send a file and paramaters within the same XMLHttpRequest. Is this possible?

Obviously I can do xhr.send(file+params) or xhr.(file,params). And I don't think I can set two different request headers to do this...

```
xhr.setRequestHead('X_FILENAME', file.name)
xhr.send(file);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.send(params); 
```

Is there some way to send the params without having to use GET, or a secondary xhr request?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-08T03:45:44.027

如果您依赖支持的浏览器`FormData`，您可以使用以下代码（JavaScript）：

```
var formData = new FormData();
formData.append('param1', 'myParam');
formData.append('param2', 12345); 
formData.append('uploadDir', 'public-data');  
formData.append('myfile', file);

xhr.send(formData); 
```

然后，在您的服务器端，您可以使用以下代码（PHP）访问您的变量：

```
<?
  $param1 = $_POST['param1']; //myParam
  $param2 = $_POST['param2']; //12345
  $uploaddir = $_POST['uploadDir']; //public-data
  $fileName = $_FILES['myfile']['name'];
  $fileZise = $_FILES['myfile']['size'];
  $uploaddir = getcwd().DIRECTORY_SEPARATOR.$uploaddir.DIRECTORY_SEPARATOR;
  $uploadfile = $uploaddir.basename($fileName);       
  move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile);
  echo $fileName.' ['.$fileZise.'] was uploaded successfully!';
?> 
```

要获取 的所有参数`$_FILES['myfile']`，请使用`var_dump($_FILES["myfile"])`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T07:47:19.177

> 有什么方法可以发送参数而无需使用 GET 或辅助 xhr 请求？

是的，您可以将它们编码到 URL 中（就像`GET`），即使您正在执行`POST`. 例如：

```
xhr.open(yourUrl + "?foo=" + encodeURIComponent(foo) + "&bar=" + encodeURIComponent(bar));
// ...
xhr.send(file); 
```

我在上面假设您必须知道关于通过 XHR 发送文件的一些我不知道的事情。:-)

* * *

假设这`file`是文件的实际*内容*，通过[File API](http://www.w3.org/TR/FileAPI/)读取，那么它不只是另一个参数吗？所以：

```
xhr.send(
    "filedata=" + encodeURIComponent(file) +
    "&foo=" + encodeURIComponent(foo) +
    "&bar=" + encodeURIComponent(bar)
); 
```

# bash - 在 awk 中分配一个 bash 关联数组

> ID：15218301
> 
> 赞同：5
> 
> 时间：2013-03-05T07:42:55.743
> 
> 标签：bash, shell, awk

我的问题是，是否可以在 awk 脚本中分配 bash 变量。

即假设以下是我编写的shell脚本，

```
declare -A sample_associative_array
awk -F'=' '{$sample_associative_array[$2]=$1}'  /tmp/sample.txt 
```

给定 /tmp/sample.txt 有：

```
abc=0
def=1 
```

我试过

```
echo $sample_associative_array[0] 
```

它不起作用。

任何帮助，将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T14:27:25.757

不完全一样，但是您可以使用内置命令`awk`可以使用输出字符串来填充关联数组。不过，我不完全确定您为什么要这样做。`bash``declare`

```
$ declare $( awk -F'=' '{print "aa["$2"]="$1}' sample.txt )
$ echo ${aa[0]}
abc
$ echo ${aa[1]}
def 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:04:09.130

你不能那样做。awk 和 Bash 使用完全不同的变量范围，并且允许一个使用在另一个变量中声明的变量将是对进程主权的极大侵犯。

您可以通过使用参数扩展并删除前缀/后缀（例如`${parameter#word}`和`${parameter%word}`. 有关更多信息，请参阅 Bash 手册。

此外，Bash 中的数组引用使用其他语法 :`${sample_associative_array[0]}`是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:32:21.637

不可以。子进程不能分配给父进程中的变量，无论语言如何，您都会遇到此问题。 `awk`甚至无法直接*读取*`bash`关联数组，因为您无法从 bash（或我知道的任何其他 shell）导出数组。

尝试混合语言时，您总是会遇到这类问题。`bash`一般的提示是在或中写下全部内容`awk`，两者都非常强大。

# android - Best way to create a UI table in Android

> ID：15218302
> 
> 赞同：3
> 
> 时间：2013-03-05T07:42:59.707
> 
> 标签：android, user-interface, android-listview, grid, android-tablelayout

I'm trying to design a table UI for my activity. I would like three columns and a fixed number of rows (so that the view fill all allotted space). Each of the cells should be clickable, and able to host standard widgets such as textview of buttons. I also want to control the scrolling (virtual grid with infinite up/down data). Pretty much something like the image below.

![grid with fixed number of rows](../Images/ac6820f0e179476a8ecf44b5c7f43617.png)

What is the recommended way of making a UI like this?

1.  ListView?
2.  TableLayout with dynamically added rows?
3.  Custom class derived from View?
4.  OpenGL?

I tried both 1 & 2, but so far have not been happy (hard to control height of each row). Any comments and code samples welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:07:50.060

您的应用看起来可以与 DB 一起使用。如果这样`TableLayout`不适合与[内容提供者](http://developer.android.com/guide/topics/providers/content-providers.html)/[加载](http://developer.android.com/guide/components/loaders.html)器/......</ [`CursorAdapter`](http://developer.android.com/reference/android/widget/CursorAdapter.html)p> 之类的东西一起使用

自定义视图由您决定，但我认为，基于图像，`ListView`就足够了。让它自己管理行高，这没什么大不了的。

我不确定OpenGL。对于简单的事情，我会选择`ListView`/ `GridView`。

# qt - 为 KDE 应用程序配置 Qt 创建器

> ID：15218303
> 
> 赞同：3
> 
> 时间：2013-03-05T07:43:00.483
> 
> 标签：qt, qt4, qt-creator, kde

我想构建一些 KDE 应用程序。这是我到目前为止所做的：

1.  `sudo apt-get install kde-full`
2.  添加使用 KDE 库的项目`LIBS += -lkdeui`的`.pro`文件。

我正在使用 QtCreator，上面提到的步骤似乎还不够。错误信息：`KApplication: no such file or directory`。

配置我的系统以进行 KDE 应用程序开发的步骤是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:15:58.817

构建 KDE 项目的推荐方法是使用 CMake，而不是 QMake。我真的向您推荐这种方法，因为某些 KDE 应用程序，例如 plasmoid，无法使用 QMake 正确构建。

此外，您可以使用 KDevelop，但如果您更喜欢 Qt Creator，则可以将它与 CMake 项目一起使用而不会出现问题。

[http://techbase.kde.org/Development/Tutorials/CMake](http://techbase.kde.org/Development/Tutorials/CMake)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:09:24.513

`KApplication.h`通常位于`/usr/include/KDE`文件夹中。确保你有它在你的包含路径（即`INCLUDEPATH += /usr/include/KDE`）。

# mysql - Check a zipcode in range with sql

> ID：15218304
> 
> 赞同：0
> 
> 时间：2013-03-05T07:43:01.407
> 
> 标签：mysql, sql

I have data like this

```
Country_name   | zipcode_from  |  zipcode_to
United Kingdom     JE1 OAA         JE4 9ZZ
United Kingdom     GY1 1AA         GY9 3ZZ
Spain              52001           52080 
```

Now, I want to get row that have zipcode from range zipcode_from to zipcode_to. Example: if the zipcode is 52005, so the result is:

```
Spain              52001           52080 
```

If the zipcode is JE1 9AA, the result is

```
United Kingdom     JE1 OAA         JE4 9ZZ 
```

I use sql in mySql.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:49:43.080

```
SELECT * FROM ZipCodes WHERE zipcode_from <= '52005' AND zipcode_to >= '52005' 
```

但它将使用标准字符串比较来执行。

# php - can not compile a virtual file in PHP extension

> ID：15218305
> 
> 赞同：0
> 
> 时间：2013-03-05T07:43:02.420
> 
> 标签：php, c++, c, php-extension

i am coding a PHP extension , i modify the `zend_compile_file` to my own function here is the source code :

```
FILE *bravery_ext_fopen(FILE *fp)
{
struct  stat    stat_buf;
char    *datap, *newdatap;
int datalen, newdatalen;
char sign[] = "BRAVERY";
int cryptkey_len = sizeof(sign);

fstat(_fileno(fp), &stat_buf);
datalen = stat_buf.st_size -  sizeof(sign);
datap = (char*)malloc(datalen);
fread(datap, datalen, 1, fp);
fclose(fp);

fp = tmpfile();

fwrite(datap, datalen-1, 1, fp);

free(datap);

rewind(fp);
return fp;
}
zend_op_array *bravery_compile_file(zend_file_handle *file_handle, int type TSRMLS_DC)
{
FILE    *fp;
char sign[] = "BRAVERY";
char    buf[8];
char    fname[128];

memset(fname, 0, sizeof fname);
if (zend_is_executing(TSRMLS_C)) {
    if (get_active_function_name(TSRMLS_C)) {
        strncpy(fname, get_active_function_name(TSRMLS_C), sizeof fname - 2);
    }
}
if (fname[0]) {
    if ( strcasecmp(fname, "show_source") == 0
      || strcasecmp(fname, "highlight_file") == 0) {
        return NULL;
    }
}

fp = fopen(file_handle->filename, "r");
if (!fp) {
    return org_compile_file(file_handle, type TSRMLS_CC);
}

fread(buf, 7, 1, fp);
if (memcmp(buf, sign, 7) != 0) {
    fclose(fp);
    return org_compile_file(file_handle, type TSRMLS_CC);
}

if (file_handle->type == ZEND_HANDLE_FP) fclose(file_handle->handle.fp);
if (file_handle->type == ZEND_HANDLE_FD) close(file_handle->handle.fd);
file_handle->handle.fp = bravery_ext_fopen(fp);
file_handle->type = ZEND_HANDLE_FP;
//file_handle->opened_path = expand_filepath(file_handle->filename, NULL TSRMLS_CC);
file_handle->opened_path = NULL;
return org_compile_file(file_handle, type TSRMLS_CC);
} 
```

its works good on normal PHP files, BUT it gives me a `Fatal error: Unknown: Failed opening required 'C:\php5411\1.php' (include_path='.;C:\php\pear') in Unknown on line 0` error to me when the phpfile start with "BRAVERY"(this is what i am using to sign my php file).

here is the debug info of file_handle.Could any one help me? sorry for the google docs link cause i cannot post image here

[img link](https://docs.google.com/drawings/d/1oedSkx_MQce88rYdkYdSrvQajswbpUGLcC-b-RpHzkk/pub?w=960&h=720)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T02:04:19.087

这是 PHP 新手经常遇到的问题。我理解这种挫败感，因为当我是新手并且找不到答案时，这种情况发生在我身上。“require”语句要求您不要使用括号。如果您使用括号，它会将其视为逻辑语句。由于语句是 ("ThisIsAstring") 它被解释为 true 或 1（它不是一个空字符串）。删除括号。:D

编辑：作为说明，当您遇到这样的半模棱两可的错误时，您应该真正包含**所有**源代码。

这是在 stackoverflow 上找到的一个很好的答案：[我什么时候应该在 require/include 语句中使用括号？](https://stackoverflow.com/questions/10918598/when-should-i-use-parenthesis-in-require-include-statements)

# php - 爆炸价格标志和数字

> ID：15218307
> 
> 赞同：6
> 
> 时间：2013-03-05T07:43:04.030
> 
> 标签：php, regex

我怎样才能将`$123`或`USD123`或`CAD$123`或`元123`动态分解成

```
array [0] = "$"
array [1] = 123 
```

?

```
$keywords = preg_split("/[^0-9]/", "$123"); 
```

以上是我的测试代码，但我进不去`$`，`array[0]`知道吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T07:49:52.550

```
$string = '$123';

$string = preg_match('/^(\D+)(\d+)$/', $string, $match);

echo $match[1]; // $
echo $match[2]; // 123 
```

分解：

`^(\D+)`在字符串开头匹配 1 个或多个非数字

`(\d+)$`匹配 1 个或多个数字直到字符串结束

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T07:48:22.750

试试这个，它对所有人都有效。

```
$str = 'CAD$123';
$num = filter_var($str, FILTER_SANITIZE_NUMBER_INT);
$curr = explode($num,$str);

echo 'Your currency is '.$curr[0].' and number is '.$num; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:50:12.563

你可以用这个

```
$txt='$123';

  $re1='(\\$)'; # Any Single Character 1
  $re2='(\\d+)';    # Integer Number 1

  if ($c=preg_match_all ("/".$re1.$re2."/is", $txt, $matches))
  {
      $c1=$matches[1][0];
      $int1=$matches[2][0];
      print "($c1) ($int1) \n";
  } 
```

所有学分归[http://txt2re.com](http://txt2re.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-19T13:59:29.593

您可以将 preg_match 与以下正则表达式一起使用

```
preg_match('/([^0-9]*)([0-9\.]*)(.*)?/', '$20.99USD', $match);
var_dump($match); 
```

以上会产生

```
Array
(
    [0] => $20.99USD
    [1] => $
    [2] => 20.99
    [3] => USD
) 
```

它可以将 $、20.99、USD 解析为数组中的单独索引

# mysql - MySQL separate data to two new columns

> ID：15218310
> 
> 赞同：0
> 
> 时间：2013-03-05T07:43:08.590
> 
> 标签：mysql, sql

One column contains a comma between data and I want to show these different data in two new columns to my question. Examples of data, column CarAndYear: [Volvo, 1995] I want the 'Volvo' to be displayed in the column Cars and the year '1995 'in the column Year. I would be very grateful for help with this MySQL issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:08:09.943

假设你总是有前导和后括号：

```
SELECT TRIM(SUBSTR(CarAndYear, 2, INSTR(CarAndYear, ',') - 2)) Cars, 
       TRIM(SUBSTR(CarAndYear, INSTR(CarAndYear, ',') + 1, LENGTH(CarAndYear) - INSTR(CarAndYear, ',') -1)) `Year`
FROM (SELECT '[Volvo, 1995]' CarAndYear) n 
```

输出

```
+-------+-------+
| Cars  | Year  |
+-------+-------+
| Volvo |  1995 |
+-------+-------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:03:57.317

```
SELECT 
    SUBSTRING_INDEX(TRIM(LEADING '[' FROM `columnname`),',',1) as CARS,
    SUBSTRING_INDEX(TRIM(TRAILING ']' FROM `columnname`),',',-1) as Year 
FROM `tablename`; 
```

[mysql中的SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

[mysql中的TRIM](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)

# database - How to create trigger for multiple table via one table?

> ID：15218312
> 
> 赞同：1
> 
> 时间：2013-03-05T07:43:12.283
> 
> 标签：database, database-design, stored-procedures, phpmyadmin, triggers

I have 4 tables :

object:

```
object_id(p.k) | object_type
1              | post
2              | event 
```

Like:

```
like_id | uid | object_id | object_type 
```

post:

```
post_id | text | like_count 
```

event:

```
event_id | name | like_count 
```

I want to create a trigger in phpmyadmin which will increase the `like_count` in `post` and `event` table whenever there is an entry in like table.
Whenever a user will like post or event it will get insert to `like` table.
So I want Triggers structure like, if there is insert for `like` table then it should first check if `object_id`=1 then it will update `like_count` of `post` table and if `object_id`=2 then it will update `like_count` of `event` table

# c# - 编写 dcm 文件浏览器需要了解什么？

> ID：15218314
> 
> 赞同：0
> 
> 时间：2013-03-05T07:43:15.880
> 
> 标签：c#, dicom

我最近被要求编写一个简单的 dcm 文件浏览器（读取 .dcm 文件并使用一些放大/缩小功能进行显示）。我有一些 .net 经验（WPF、WinForm 等），但对 dicom 知之甚少。有没有简单的demo供学习？或者我应该知道什么才能完成这项工作？任何建议或提示都会有所帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:49:06.067

C# 的开源库：[EvilDicom](http://evildicom.rexcardan.com/)

图书馆：[GDCM](http://gdcm.sourceforge.net/wiki/index.php/Main_Page)

其他：[Dicom-CS](http://sourceforge.net/projects/dicom-cs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:49:20.460

我建议你看看[fo-dicom](https://github.com/rcd/fo-dicom)。在*示例*文件夹中有一个 Windows 窗体应用程序*DICOM 转储*，它提供您请求的功能。它应该作为您任务的良好起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:50:42.203

首先，您需要有关 DICOM 格式的知识，这些知识可以在 Internet 上轻松找到。就像一开始可以在 CodeProject上的[DICOM Image Viewer示例上有所了解。](http://www.codeproject.com/Articles/36014/DICOM-Image-Viewer)

剩下的就是耐心和时间的问题了，没那么复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:36:46.940

dicom 的世界是美丽的，并且在一组可靠的规范文档中得到了很好的定义。但是，如果您只对创建一个简单的查看器感兴趣，那么非常陡峭的学习曲线可能无法满足您的需求。

除非您计划以 dicom 为中心的完整职业生涯（或至少是一个非常大的项目），否则使用现成的库或工具包更有意义。快速搜索 DICOM SDK 的 CodeProject 后出现了这个示例：

[http://www.codeproject.com/Articles/453732/Developing-DICOM-Viewers-for-Real-World-Applicatio](http://www.codeproject.com/Articles/453732/Developing-DICOM-Viewers-for-Real-World-Applicatio)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:50:49.573

一个很好的起点可能是[ClearCanvas库，它可](http://www.clearcanvas.ca/dnn/)[在此处](https://github.com/ClearCanvas)作为开源获得。此外，为了更好地了解 DICOM 标准，您可以在[此处](http://medical.nema.org/standard.html)阅读该标准的某些部分，以了解您正在处理的数据类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T22:28:46.413

我使用过 Fo-Dicom 并且非常好，图像具有“缩放”属性，可以轻松实现放大/缩小功能。

# php - join query in CodeIgniter

> ID：15218315
> 
> 赞同：8
> 
> 时间：2013-03-05T07:43:16.323
> 
> 标签：php, sql, codeigniter, join

I am using join query in CodeIgniter and can't get it to work. It only displays one table data, but not the other. I am new to CodeIgniter and can't figure this out. Pleas someone help me. Tnanks in advance.

**view**

```
<?php foreach ($query as $row): ?>

    <?php echo $row->answerA;?><br>
    <?php echo $row->answerB;?><br>
    <?php echo $row->answerC;?><br>
    <?php echo $row->comment;?><br>
    <?php echo $row->name; ?>

<?php endforeach; ?> 
```

**controller**

```
function getall() {

    $this->load->model('result_model');
    $data['query'] = $this->result_model->result_getall();
    // print_r($data['query']);
    // die();
    $this->load->view('result_view', $data);

} 
```

**model**

```
function result_getall() {

    $this->db->select('tblanswers.*,credentials.*');
    $this->db->from('tblanswers');
    $this->db->join('credentials', 'tblanswers.answerid = credentials.cid', 'right outer'); 
    $query = $this->db->get();
    return $query->result();

} 
```

**EDIT**

The result of

```
print_r($data['query']);
die(); 
```

is an array as below:

```
Array ( [0] => stdClass Object ( [answerid] => [userid] => [questionid] => [answerA] => [answerB] => [answerC] => [comment] => [cid] => 83 [name] => Edvinas [second_name] => liutvaits [phone] => [email] => ledvinas@yahoo.ie ) [1] => stdClass Object ( [answerid] => [userid] => [questionid] => [answerA] => [answerB] => [answerC] => [comment] => [cid] => 84 [name] => Edvinas [second_name] => liutvaits [phone] => [email] => ledvinas@yahoo.ie ) [2] => stdClass Object ( [answerid] => [userid] => [questionid] => [answerA] => [answerB] => [answerC] => [comment] => [cid] => 85 [name] => Edvinas [second_name] => Liutvaitis [phone] => [email] => ledvinas@yahoo.ie ) [3] => stdClass Object ( [answerid] => [userid] => [questionid] => [answerA] => [answerB] => [answerC] => [comment] => [cid] => 86 [name] => EdvinasQ [second_name] => LiutvaitisQ [phone] => 12345678 [email] => ledvinas@yahoo.ie ) [4] => stdClass Object ( [answerid] => [userid] => [questionid] => [answerA] => [answerB] => [answerC] => [comment] => [cid] => 87 [name] => Edvinas [second_name] => Liutvaitis [phone] => 123456 [email] => ledvinas@yahoo.ie ) ) 
```

**table structure**

credentials

cid(PRIMARY), name, second_name, phone, email

tblanswers

answerid(PRIMARY), userid, questionid, answerA, answerB, answerC.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T07:53:56.363

试试这个：

```
$this->db->join('credentials', 'tblanswers.answerid = credentials.cid'); 
```

或者

```
$this->db->join('credentials', 'tblanswers.answerid = credentials.cid', 'inner'); 
```

并打印结果，看看是否是你想要的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T09:47:01.087

您要查询的主表是什么？好吧你可以试试这个，建议在使用joins时，必须为每个表指定一个别名：

```
 function result_getall(){

    // if you want to query your primary data from the table 'tblanswers',
    $this->db->select('a.*,b.*'); <-- select what you might want to select
    $this->db->from('tblanswers a');
    $this->db->join('credentials b', 'b.cid = a.answerid', 'left'); 
    $query = $this->db->get();
    return $query->result();

    // if you want to query your primary data from the table 'credentials',

    $this->db->select('a.*,b.*'); <-- select what you might want to select
    $this->db->from('credentials a');
    $this->db->join('tblanswers b', 'b.answerid = a.cid', 'left'); 
    $query = $this->db->get();
    return $query->result();

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T08:11:17.430

删除 select() 标记，因为您需要所有术语。

你可以修改代码

```
$this->db->join('credentials', 'tblanswers.answerid = credentials.cid', 'outer'); 
$query = $this->db->get('tblanswers');
return $query->result(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:56:00.280

如果你的两个表都有相关的，那么它应该可以工作。你为什么使用右外连接？只需使用内部联接或任何其他联接即可。请在此处阅读有关不同类型的 JOIN [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp) 和此处[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

希望这会有所帮助。

谢谢

# user-controls - Does a custom UserControl have to be compiled to an OCX?

> ID：15218319
> 
> 赞同：1
> 
> 时间：2013-03-05T07:43:30.643
> 
> 标签：user-controls, vb6

this is a pretty n00b question, but i cant seem to find the 'right answer', and i have looked ALL over..

**(vb6)**.. But i found a Custom User Control (.ctl & .ctx file Source) that wraps the MSComm control... (i also have a custom button control Source)

instead of compiling it as an .ocx and having to include it as a separate file... or as a .dll

can i just include the controls in my project and throw the control on my form and include it that way, without having to distribute a separate .ocx or .dll after i compile ??

i am asking because when i finish, will i have to distribute **ANY** other files or just .exe ??

Could someone please explain to me how this works ? i dont want to have to distribute any other files just my prog.exe

(and the user control for MSComm is a wrapper, i need it because, i cant seem to get around the MSComm 16 port limit, i need higher)

Thx...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:52:31.853

如果您的项目中有 .ctl 和 .ctx 文件，那么它们将像任何其他 .frm 或 .bas 一样内置到可执行文件中。如果他们引用外部文件（如 MSComm），那么该文件必须位于任何目标机器上（一种或另一种方式）。如果目标计算机没有 MSComm，那么您必须分发并注册它 ( [http://support.microsoft.com/kb/146219](http://support.microsoft.com/kb/146219) )

# mongodb - Is there any way to use MapReduce to replay a sequential financial transaction log?

> ID：15218322
> 
> 赞同：1
> 
> 时间：2013-03-05T07:43:34.057
> 
> 标签：mongodb, mapreduce, accounting, transaction-log, gaap

I'm working on a project that requires GAAP accounting conformance for deferred revenue collection. Cash is converted to a proprietary "currency" or credits. These credits may have different values based upon the purchase price at time of conversion (including exchange rate fluctuations).

As each purchase is made, the amount is deducted from the earliest "bucket" of credits until they are exhausted and the next eldest bucket is encountered. The valuation of the credits spent define the total revenue for that particular purchase... so it may differ for each product simply based upon the order of credits and debits / the value of each credit.

My sequential mind sees this as an easy imperative problem. With the data I'm capturing, I can replay the transaction logs and arrive at a daily total for revenue for each customer and each product... that can then be amortized for the services provided. No problem.

My data is in a sharded MongoDB cluster of replica sets. Dumping it and writing a post-processing script is easy, but I'd love to be able to report directly out of it.

I've played with simple MapReduce operations in the past. Is there any way to sequentially process a transaction log? While normal transaction logs can be processed in parallel, and I've done this, I just can't seem to find a way to twist MapReduce (MongoDB or Hadoop) to replay in order. I don't think it can be done. Am I wrong or just a n00b?

My only options at this point are post-processing replay, manipulating currency buckets at time of purchase or utilizing something I've overlooked... perhaps I'm not thinking enough outside the box here.

Any brief insights or pointers are greatly appreciated.

# python - Gmail 收件箱只读

> ID：15218323
> 
> 赞同：0
> 
> 时间：2013-03-05T07:43:35.497
> 
> 标签：python, gmail, imap

我在尝试让我的 IMAP STORE 命令与 Gmail 一起使用时遇到问题。从谷歌搜索看来，其他几个人也遇到了这个问题，有些人似乎找到了解决办法，但从未说出它是什么，有些人只是停止了。我不知道如何解决它。

当我连接到 Gmail 时，我只获得邮箱的只读访问权限

```
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] C: '0003 EXAMINE INBOX'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* FLAGS (\\Answered \\Flagged \\Draft \\Deleted \\Seen)'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* OK [PERMANENTFLAGS ()] Flags permitted.'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* OK [UIDVALIDITY 1] UIDs valid.'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* 22 EXISTS'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* 0 RECENT'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* OK [UIDNEXT 110] Predicted next UID.'
2013-03-05 01:22:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '0003 OK [READ-ONLY] INBOX selected. (Success)' 
```

所以当我选择收件箱时它是只读的

然后我稍后尝试删除一条消息，我收到此错误

```
2013-03-05 01:43:04-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] C: '000E STORE 2 FLAGS.SILENT (\\Deleted)'
2013-03-05 01:43:04-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '000E NO STORE attempt on READ-ONLY folder (Failure)' 
```

Twisted 报告此错误，STORE 尝试在 READ-ONLY 文件夹上，这是预期的，因为我只被授予只读访问权限。我如何获得读写访问权限；

```
Traceback (most recent call last):
Failure: twisted.mail.imap4.IMAP4Exception: STORE attempt on READ-ONLY folder (Failure) 
```

RFC 信息 [https://www.rfc-editor.org/rfc/rfc3501#section-6.3.1](https://www.rfc-editor.org/rfc/rfc3501#section-6.3.1)

```
 If the client is permitted to modify the mailbox, the server
  SHOULD prefix the text of the tagged OK response with the
  "[READ-WRITE]" response code.

  If the client is not permitted to modify the mailbox but is
  permitted read access, the mailbox is selected as read-only, and
  the server MUST prefix the text of the tagged OK response to
  SELECT with the "[READ-ONLY]" response code.  Read-only access
  through SELECT differs from the EXAMINE command in that certain
  read-only mailboxes MAY permit the change of permanent state on a
  per-user (as opposed to global) basis.  Netnews messages marked in
  a server-based .newsrc file are an example of such per-user
  permanent state that can be modified with read-only mailboxes. 
```

我知道 Gmail 的 IMAP 实现已损坏（[http://memegenerator.net/instance/35708036](http://memegenerator.net/instance/35708036)）但据我所知 Mail.app、Thunderbird 等能够删除邮件所以我缺少什么来获得读写访问权限……

删除代码

```
def delete_data(self, data_hash):
    if not self.hash_database.hash_in_list(data_hash):
        print "Data hash isn't uploaded yet"
        raise IOError("No such data hash uploaded")

    else:
        # delete it to prevent anyone from trying to download it while it is being deleted
        self.hash_database.delete_hash(data_hash)
        d = self.imap_connection.search("SUBJECT", "\"EMS Data ID: %s\"" % data_hash, uid = False)
        d.addCallback(self.delete_message)
        d.addErrback(self.deletion_error, data_hash)
        return d

def deletion_error(self, error, data_hash):
    print "Couldn't delete message hash %s" % data_hash
    print "========Deletion Error========"
    log.err(error)
    # restore hash to database
    self.hash_database.add_hash(data_hash)

    raise IOError("Couldn't delete message hash")

def delete_message(self, id):
    if len(id) == 0:
        raise IOError("Hash not found, however database indicates it was uploaded")
    d = self.imap_connection.setFlags(id[-1], ["\\Deleted"])
    d.addCallback(lambda result: self.imap_connection.expunge())
    return d 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:16:51.773

您需要选择您的收件箱而不是检查它。检查是只读打开邮箱的命令。

# iphone - how to set 15 textfield in one viewcontroller using scrollview

> ID：15218325
> 
> 赞同：0
> 
> 时间：2013-03-05T07:43:44.883
> 
> 标签：iphone, ios, ios6, uiscrollview

What I have is 15 text field and because of which I can't set them in one ViewController. I added 15 textfield to the scrollview . But scroll view goes up on removing finger from the screen.

Any idea how to stick to down when scrolled to down?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:50:15.963

在你的`ViewWillApear`设置你`UIScrollview` `contentSize`喜欢： -

```
-(void)viewWillAppear:(BOOL)animated
{

     srcScrollView.contentSize = CGSizeMake(320, 500);
    [super viewWillAppear:YES];
} 
```

你的 TextFiled 代表看起来像：-

```
-(void)textFieldDidBeginEditing:(FMTextField *)textField
{
    [srcScrollView setContentOffset:CGPointMake(0,textField.center.y-140) animated:YES];

}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];

     [srcScrollView setContentOffset:CGPointMake(0,0) animated:YES];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:46:29.313

您的 contentSize 似乎不足以显示整个内容。设置contensize如下

```
//Assuming you have a reference to the 15th textField 

CGRect textField15Frame = self.textField15.frame;

CGSize contentSize = self.scrollView.contentSize;
contentSize.height = textField15Frame.origin.y+textField15.size.height+5.0f;

[self.scrollView setContentSize:contentSize]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:50:28.813

你必须正确设置`contentSize`你的滚动视图。在您的情况下，您只需将内容高度设置为：

```
lastTextField.frame.origin.y + lastTextField.frame.size.height + 10 
```

其中 10 是您想要的下边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:55:14.533

下面解决了问题...

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];
    [self.scrollView setContentSize:CGSizeMake(320, 1200)];
} 
```

# jquery - jQuery EasyUI 的 JSON

> ID：15218331
> 
> 赞同：1
> 
> 时间：2013-03-05T07:44:15.340
> 
> 标签：jquery, json, jquery-easyui

我已经坚持了一段时间了。我在带有 spring MVC 的 JSP 中使用 EasyUI 树形网格。

在我的控制器中，我动态生成了一个 JSON 字符串，如果我将字符串保存为 json 文件，则网格效果很好。

看起来 EasyUI 将 url 作为 json 数据提供者。

在我的控制器中，我有以下内容

```
jsonString = ''''the json string dynamically generated''''

modelAndView.addObject("jsonData", jsonString); 
```

在 JSP 文件中，我如何为我的 EasyUI 引用这个 jsonData，我尝试了 `url: '${jsonData}'`，以及许多其他文件，但在 Google 上找不到任何东西。

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T14:12:55.003

请与：

var jsonData='${jsonData}';

jsonData=eval("("+jsonData+")");

$('#userDg').datagrid('loadData', jsonData);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T02:30:08.387

以这种方式尝试。如下创建一个实体

```
public class DataGrid implements java.io.Serializable {

    private Long total = 0L;
    private List rows = new ArrayList();

    public Long getTotal() {
        return total;
    }

    public void setTotal(Long total) {
        this.total = total;
    }

    public List getRows() {
        return rows;
    }

    public void setRows(List rows) {
        this.rows = rows;
    }

} 
```

并在您的控制器中添加此方法。这必须是您的数据网格的 url。

```
 @RequestMapping("/findList")
        @ResponseBody
        public DataGrid dataGrid(User user, PageHelper ph) {
            DataGrid dg = new DataGrid();
            dg.setRows(yourList);
        dg.setTotal(total items in your table)
        return dg;//this will return json format as{"total":some number,"rows":[{},{},{}]}
        } 
```

# xaml - 样式化滑块使其无效

> ID：15218334
> 
> 赞同：0
> 
> 时间：2013-03-05T07:44:30.733
> 
> 标签：xaml, windows-8, styles, slider, winrt-xaml

当我将我的样式从`Slider`控件中移除时，一切都变得一团糟（我不能再移动滑块了，而且它被卡住了）。

原始代码（有效）：

```
<Slider IsThumbToolTipEnabled="True" SmallChange="10" Orientation="Horizontal" StepFrequency="10" Minimum="900" Maximum="2500" Value="1300" /> 
```

我明白了，它按预期工作：

![我单击此处获取工具提示](../Images/37d834d3512b7c25e3db6d2153c1b9f0.png)

现在，如果我使用外部样式：

```
<Style x:Key="ELOSlider" TargetType="Slider">
      <Setter Property="IsThumbToolTipEnabled" Value="True"/>
      <Setter Property="SmallChange" Value="10"/>
      <Setter Property="Orientation" Value="Horizontal"/>
      <Setter Property="StepFrequency" Value="10"/>
      <Setter Property="Minimum" Value="900"/>
      <Setter Property="Maximum" Value="2500"/>
      <Setter Property="Value" Value="1300"/>
</Style> 
```

...

```
<Slider Style="{StaticResource ELOSlider}" /> 
```

它搞砸了（滑块卡住了，不能做任何事情）：

![我什至不能移动滑块](../Images/548a707ad551d9e03cffb4f4d571a06a.png)

它可以识别样式，否则它不会位于 900，但为什么滑块显示不正确？

我究竟做错了什么？这真的让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:51:59.583

我确实发现了这个问题。看起来样式引擎是`Setters`按顺序应用的。

当它尝试设置为时它必须失败`Minimum`，`900`因为默认情况下`Maximum`是在`1`。如果我`Setters`按如下方式反过来，它会很好地工作。有点违反直觉......特别是因为没有输出警告（我希望`900`被完全拒绝，而不是搞砸控制......）

```
<Style x:Key="ELOSlider" TargetType="Slider">
    <Setter Property="Maximum" Value="2500"/>
    <Setter Property="Value" Value="1300"/>
    <Setter Property="Minimum" Value="900"/>
    <Setter Property="IsThumbToolTipEnabled" Value="True"/>
    <Setter Property="SmallChange" Value="10"/>
    <Setter Property="Orientation" Value="Horizontal"/>
    <Setter Property="StepFrequency" Value="10"/>
</Style> 
```

# java - 如何使用 joptionpane 输入字母和数字

> ID：15218335
> 
> 赞同：0
> 
> 时间：2013-03-05T07:44:31.050
> 
> 标签：java, swing

我想输入类似： number23 使用**JOptionPane**，但我所知道的只是输入一个数字或输入一个字符串。
如何输入单词+数字？

到目前为止我所拥有的：

```
import javax.swing.JOptionPane;

public class morePractice {

    public static void main(String[] args) {
        String str;
        int num1;
        int total=0;
        char letter;

        str=JOptionPane.showInputDialog(null,"Enter phrase");

        for(int i=0;i<str.length();i++){
            letter=str.charAt(i);
            if(letter>='A'&&letter<='Z'){
                total++;
            }

        }
        JOptionPane.showMessageDialog(null,"There are " + total + " upper case letters");

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:52:44.633

使用正则表达式
试试这个方法

```
String s = "Number23";
System.out.print(s.replaceAll("[^0-9]","")); 
```

它只给你一个数字

或者`s.replaceAll("[^a-z]","")` 只给你字符

# zend-framework - 我应该为 symfony 1.4 项目使用哪个版本的 Zend？

> ID：15218336
> 
> 赞同：0
> 
> 时间：2013-03-05T07:44:34.680
> 
> 标签：zend-framework, lucene, symfony-1.4

我有一个遗留的 symfony 1.4 项目，我想在其中集成 Lucene，因为它在[jobeet](http://symfony.com/legacy/doc/jobeet/1_4/en/17?orm=Doctrine)教程中有所描述。

既然事情在发展，我想知道 symfony1.4 推荐哪个版本的 Zend Framework with Lucene？

我也可以使用 ZF2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:29:32.687

我不知道你是否可以在 symfony 1 项目中使用 ZF2（但它应该只是正确加载类并具有正确的 PHP 版本），但我可以告诉你[我的网站](http://www.j0k3r.net/search?query=zend)在 symfony 1.4 上运行，我有 ZF 1.10 就可以使用 Lucene。

看一下 svn，我可以看到外部源位于[http://framework.zend.com/svn/framework/standard/trunk/library/Zend/](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/)这是 1.10 ZF 分支。

如果我没记错的话，我使用了 Jobeet 教程中描述的相同方法来使用 Lucene。

# java - 在 LinkedList 中使用长类型 id

> ID：15218339
> 
> 赞同：0
> 
> 时间：2013-03-05T07:45:01.717
> 
> 标签：java

我想在我的类**OpenList中使用****LinkedList ，但我使用的是****long**类型的 id 。如何使用 带有 long **id的****LinkedList**。我问的是真的很**长的身份证**，**********`not (int) my_long_id`**********

 ******```
List.get(id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:55:15.097

抱歉，但是不可能用 interface `List`（及其所有继承）做你想做的事情，因为`List`interface 声明，其元素的索引只能是 type `int`。如果你想`long`在你的索引元素类型`List`，你必须创建新的接口（即）并创建（即`LongList`）的新类实现，因为你有原始类的来源。`LinkedList``LongLinkedList``LinkedList`******

# ios - 使用本地化时如何更改应用名称

> ID：15218344
> 
> 赞同：1
> 
> 时间：2013-03-05T07:45:17.230
> 
> 标签：ios, xcode, localization, localizable.strings, cfbundledisplayname

我在`InfoPlist.strings(English)`文件中写了这样的代码：

```
CFBundleDiaplayName="Lo Demo"; 
```

但它不起作用。我的应用程序名称`${PRODUCT_NAME}`在名为`xxx-info.plist`.

我试图删除该项目`"Bundle display name"`，但应用名称没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:01:59.163

你拼错了：

```
CFBundleDisplayName="Lo Demo";
          ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:01:47.227

正确的甲酸盐是

```
"CFBundleDisplayName" = "Lo Demo"; 
```

你失去了“”。这对我有用。

# ftp - ftp 命令 mget - 获取没有扩展名的文件，但避免与扩展名冲突的文件

> ID：15218346
> 
> 赞同：2
> 
> 时间：2013-03-05T07:45:21.430
> 
> 标签：ftp, terminal, sftp

***注意：****这不是[2597394](https://stackoverflow.com/questions/2597394/mget-on-file-without-extension)的副本。*

我有一个 FTP 服务器（Unix 或 Linux），其文件夹包含以下文件*（例如）*：

*   **文件名.txt**
*   **文件名.txt.abc**
*   **文件名**

当我向or发出`mget file*`命令时，我可以获取所有三个文件。我需要做的是只获取**文件名**文件（没有任何扩展名的文件）。`ftp``sftp`

 **我试过了`grep`，但是or命令提示符`|`无法识别这些。我也试过，但这里的 mget 甚至不支持任何选项。手册页是[这样](http://ss64.com/nt/ftp.html)的。`ftp``sftp``--exclude`

我该如何解决这个问题？我无法指定确切的文件名，因为它未知。它必须是一张外卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:05:49.910

虽然不是原始问题的确切解决方案，但我创建了如下解决方法。解决方法仍将获取所有三个文件，但随后将使用`rm`shell 命令删除带有扩展名的文件。

```
mget   file*
!rm -f file*.* 
```

操作完成后，只保留没有扩展名的文件。请注意，使用本地 shell`!`告诉`ftp`或`sftp`执行其右侧的内容。此解决方法的一个潜在问题是无意中删除了现有的本地文件。**

# matlab - matlab结构奇怪的行为以0为根

> ID：15218347
> 
> 赞同：1
> 
> 时间：2013-03-05T07:45:24.513
> 
> 标签：matlab, user-interface, structure

我有这个奇怪的问题。为了保存我的 gui 我需要的所有值，我使用结构。不好的部分是，如果我输入 S.var = 0，matlab 不会得到变量 var 为零，但它认为它是根对象！我怎样才能避免这种情况？我尝试谷歌搜索并在帮助文档中，但没有任何结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:47:10.930

尝试使用`false`函数而不是仅仅分配 0... 所以：

```
S.var = false; 
```

这将返回一个逻辑零，这应该是您想要的。

# c# - 如何检测nfc芯片的可写容量

> ID：15218348
> 
> 赞同：1
> 
> 时间：2013-03-05T07:45:25.603
> 
> 标签：c#, windows-phone-8, nfc, proximity

我想知道标签的可写容量。

我在做什么：

*   订阅消息

> m_proxdevice.SubscribeForMessage("WriteableTag", OnTagDetect);

*   接收消息

> 私人无效 OnTagDetect（ProximityDevice 发件人，ProximityMessage 消息）
> 
> ```
> {
> 
>    System.Diagnostics.Debug.WriteLine(message.Data.Capacity.ToString());
> 
> } 
> ```

但是每次容量只有4。我做错了什么，但是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:31:43.933

message.Data.Capacity 是错误的属性。

采用

```
int writeableSize = System.BitConverter.ToInt32(message.Data.ToArray(), 0); 
```

反而。

# c - Eclipse CDT。使用符号时出现“语法错误”

> ID：15218354
> 
> 赞同：1
> 
> 时间：2013-03-05T07:45:59.697
> 
> 标签：c, eclipse, syntax-error, eclipse-cdt

我正在为同一个目标开发两个非常相似的嵌入式项目（它们共享大部分代码）。为此，我创建了两个构建：构建 A 和构建 B。每个构建都有一些在符号中定义的细微差别：“DEVICE_TYPE=”根据项目包含或排除源代码。这样我就可以执行以下操作，

```
#if (DEVICE_TYPE == A)
[Code for build A]
#endif

#if (DEVICE_TYPE == B)
[Code for build B]
#endif 
```

我的问题是 Eclipse 的语法总是抛出错误，因为显然它总是认为 DEVICE_TYPE 等于 B。不过，两个构建都编译没有任何问题。

更新：

符号在 Project_Properties->C/C++ Build->Settings->Tool Settings->Compiler->Preprocessor->Define Syms (-D) 中定义如下：

在构建 A 的情况下

```
DEVICE_TYPE=A
A=0
B=1 
```

在构建 B 的情况下

```
DEVICE_TYPE=B
A=0
B=1 
```

这里的问题是，对于 Eclipse，无论选择哪个 Build，DEVICE_TYPE 始终为 B。这意味着其中的所有代码`#if (DEVICE_TYPE==A)`都是灰色的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:55:31.177

您是否尝试过此答案中提到的“使用活动构建设置”的 Eclipse 设置： [使用活动构建设置](https://stackoverflow.com/questions/2951855/eclipse-cdt-editor-not-picking-up-project-defined-symbols-in-coloring-ifdefed-o?rq=1)？

# collision-detection - 实现弹丸运动和碰撞检测 - 在 2D 自上而下游戏中的响应

> ID：15218355
> 
> 赞同：0
> 
> 时间：2013-03-05T07:46:06.383
> 
> 标签：collision-detection, topdown, projectile

在 2D 游戏中有很多关于弹丸运动的例子。

*   但是，在 2D 俯视图游戏中实现抛射运动的方程式是什么？例如，我们想踢一个球并增加它的高度（就像明智的足球一样）。

我读到可能有两个精灵，一个用于球，一个用于其阴影，可以产生球越来越高的错觉。

*   但是，当球击中柱子时，我们如何实现碰撞检测和响应呢？我们是否也必须使用 z 坐标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:43:04.443

您面临的问题说明了图形和逻辑之间的重要区别——即用户所看到的情况与该图像所反映的底层虚拟世界之间的区别。

2D 和 3D 世界的维度不必总是匹配。事实上，从根本上说，从 Pong 到 Skyrim，所有图形都是 2D 的。游戏开发者必须就维度做出的唯一决定是：

*   游戏逻辑是3D的吗？
*   如果是这样，3D 世界是如何投射到 2D 屏幕上的，从什么角度投射？

就您而言，第一个问题的答案似乎是肯定的，考虑到球可以在空中踢。这意味着您现在在成熟的“3D”图形领域工作，这种图形可能永远存在。您现在所说的“2D 自上而下”游戏可能是指“无深度的 3D 自上而下游戏”。这是使用正交或等距投影来完成的，如果您好奇，可以用谷歌搜索。

阴影效果是完成这种投影的一个很好的选择，因为非常简单的提示可以在玩家对空间的视觉感知中发挥很大作用。请记住，这不是幻觉，就像光环中的 3D 图形是幻觉一样。屏幕是平的，我们的视网膜是平的，图形也应该是平的。这并没有使世界，无论是虚拟的还是物理的，都不再是 3D 的。

对于第二个问题，您可能不会完全自上而下地进行投影。如果你是，阴影总是会被球遮住，你只能看到足球运动员的头顶。我猜你可能在谈论 45 度角的向下投影，它看起来更自然，并且从一开始就在游戏中使用。口袋妖怪就是一个典型的例子。这一切都在行动：

```
class SoccerBall extends GameObject3D {
    voic draw() {
        translate(x, y / 2); // the camera is at an angle, so we foreshorten in the y direction
        drawShadow();
        translate(0, z / 2);
        drawBall();
        // cleanup the changes we made to the graphics state
        translate(-x, -y / 2 - z / 2);
    }
} 
```

现在，回到你最初的问题，这主要是关于游戏逻辑的。通过将高度引入球的位置，您无疑引入了 z 维度。对于您的情况，可能很少使用此 z 维度。您可能希望将您的对象拆分为`GameObject`s 和`GameObject3D`s，前者有一个`x`and`y`后者有一个额外的`z`（或者可能是 a `height`，这可能会提供更多信息）。

弹丸运动非常简单。只需根据需要增加和减少高度

```
class SoccerBall extends GameObject3D {
    float vel_x;
    float vel_y;
    float vel_z;

    // most of the soccer ball class...

    void kick(angle direction, angle inclination, float force) {
        // calculate based on direction
        vel_x = force * cos(direction);
        vel_y = force * sin(direction);
        // take into account inclination
        vel_z = force * sin(inclination);
        vel_x *= cos(inclination);
        vel_y *= cos(inclination);
    }

    void movement_update(float delta_time) {
        // this function assumes our location
        // units are in meters
        // and our velocity units
        // are in meters/second

        // apply gravity
        vel_z -= 9.8 * delta_time; // EDIT: switched from += to -=.  += could be useful if you're playing soccer with a balloon for a ball!

        // move
        x += vel_x * delta_time;
        y += vel_y * delta_time;
        z += vel_z * delta_time;
    }
} 
```

对于碰撞检测，如果你只关心与地面的碰撞，你可以做一个简单的`if (z < 0) {z = 0; vel_z = 0}`检查。对于更复杂的情况，基于网格的系统始终是碰撞检测的好选择，因为计算对象的网格正方形很便宜（`floor(x), floor(y)`），然后您只需要检查正方形中的其他对象。这在 3D 中和在 2D 中一样容易，并且在 Internet 上的其他地方有很多很好的解释。

玩得开心你的游戏:)

# php - ajax行可编辑数据表

> ID：15218363
> 
> 赞同：3
> 
> 时间：2013-03-05T07:46:59.567
> 
> 标签：php, javascript, jquery, html, ajax

`{ "bSortable": false, "fnRender": function(oObj){return "<a href='main.php?do=labour&action=edit&sid=" + oObj.aData[12] + "'>Edit</a>"; } }`当我单击编辑按钮时，我试图弹出。

这是我的gui

![桂](../Images/62ebf25401da20322c8dc8c78897a1c9.png)

这是我的代码：

```
 <script type="text/javascript" charset="utf-8">
        var oTable;

        /* Formating function for row details */
        function fnFormatDetails ( nTr )
        {
            var aData = oTable.fnGetData( nTr );
            var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';
            sOut += '<tr><td>Name:</td><td style="color:blue;">'+aData[3]+' '+aData[4]+' '+aData[5]+'</td></tr>';
            sOut += '<tr><td>Tag ID:</td><td style="color:blue;">'+aData[1]+'</td></tr>';
            sOut += '<tr><td>ID #:</td><td style="color:blue;">'+aData[2]+'</td></tr>';
            sOut += '<tr><td>Course:</td><td style="color:blue;">'+aData[9]+'</td></tr>';
            sOut += '<tr><td>Department:</td><td style="color:blue;">'+aData[7]+'</td></tr>';
            sOut += '<tr><td>Contact:</td><td style="color:blue;">'+aData[8]+'</td></tr>';
            sOut += '<tr><td>Address:</td><td style="color:blue;">'+aData[9]+'</td></tr>';
            sOut += '<tr><td>Last Modified:</td><td style="color:blue;">'+aData[10]+'</td></tr>';
            sOut += '</table>';

            return sOut;
        }
        $(document).ready(function() {
            oTable = $('#example').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "scripts/server_processing.php",
                "aoColumns": [
                    { "sClass": "", "bSortable": false },
                    null,
                    null,
                    null,
                    { "sClass": "" },
                    { "sClass": "" },
                    { "bSortable": false, "fnRender":  function(oObj){return "<a href='main.php?do=labour&action=edit&sid=" + oObj.aData[12] + "'>Edit</a>"; } //heres is my problem }

                ],
                "aaSorting": [[1, 'asc']]
            } );

            $('#example tbody td img').live( 'click', function () {
                var nTr = $(this).parents('tr')[0];
                if ( oTable.fnIsOpen(nTr) )
                {
                    /* This row is already open - close it */
                    this.src = "examples_support/details_open.png";
                    oTable.fnClose( nTr );
                }
                else
                {
                    /* Open this row */
                    this.src = "examples_support/details_close.png";
                    oTable.fnOpen( nTr, fnFormatDetails(nTr), 'details' );
                }

            } );

        } );

    </script> 
```

帮助我的代码从 MySQL 数据库动态显示 jQuery 弹出窗口。显示所有行的弹出窗口，但未显示相同的 id，即正确的 id 未传递到弹出窗口。任何人都可以建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:33:45.910

```
 { "bSortable": false, "fnRender":  function(oObj){return "<a href='main.php?do=labour&action=edit&sid=" + oObj.aData[12] + "'>Edit</a>"; } 
```

不应该是 oObj.aData[2] 而不是 oObj.aData[12] 吗？

# java - Netty Server 接受连接并且什么都不做

> ID：15218365
> 
> 赞同：0
> 
> 时间：2013-03-05T07:47:01.730
> 
> 标签：java, mysql, netty

我没有找出这个错误的原因“我的 netty 服务器在以下异常后没有处理任何消息。”

```
 org.jboss.netty.channel.SimpleChannelHandler - EXCEPTION, please implement com.kakapo.unity.handler.RegistrationHandler.exceptionCaught() for proper handling.
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 223,384,284 milliseconds ago.  The last packet sent successfully to the server was 223,384,284 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
    at sun.reflect.GeneratedConstructorAccessor13.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3364)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1983)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293)
    at snaq.db.CachedPreparedStatement.executeQuery(CachedPreparedStatement.java:81)
    at com.kakapo.unity.handler.CustomIPFilterHandler.accept(CustomIPFilterHandler.java:46)
    at org.jboss.netty.handler.ipfilter.IpFilteringHandlerImpl.handleUpstream(IpFilteringHandlerImpl.java:118)
    at org.jboss.netty.handler.logging.LoggingHandler.handleUpstream(LoggingHandler.java:333)
    at org.jboss.netty.channel.Channels.fireChannelConnected(Channels.java:227)
    at org.jboss.netty.channel.socket.nio.NioWorker$RegisterTask.run(NioWorker.java:187)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processRegisterTaskQueue(AbstractNioWorker.java:430)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:329)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.SocketException: Connection timed out
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3345)
    ... 17 more 
```

但是我已经将 auto reconnect = true 放到我的 JDBC 中。并且还在使用 OrderedMemoryAwareThreadPoolExecutor

```
ExecutionHandler channelExecutionHandler = new ExecutionHandler(new OrderedMemoryAwareThreadPoolExecutor(Runtime.getRuntime()
                .availableProcessors(), 0, 0)); 
```

我使用 awaituninteruptable 函数来关闭一个频道。喜欢

```
ctx.getChannel().write(new ErrMessage(e.getChannel().getRemoteAddress().toString()).getEncodedMessage()) 
```

这是否会导致任何类型的无限循环活动。现在的情况是服务器接受连接并且不处理任何类型的消息。我们有工作线程和老板。但是日志处理程序工作正常。我正在使用 snaq.db.connection 池来维护数据库连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:10:12.547

您似乎非常直接地使用 MySQL 连接`DriverManager.getConnection()`。因此，您要么根本不关闭打开的连接，要么创建太多连接，从而超出 MySQL 服务器的限制。

在高度并发的环境中（Netty 肯定是为此实现的）我强烈建议使用数据库连接池：[c3p0](http://sourceforge.net/projects/c3p0/)或[commons-dbcp](http://commons.apache.org/commons-dbcp/)。通过适当的设置，您可以避免 MySQL 连接问题。

# asp.net - 获取gridview单元格DataFormatString

> ID：15218366
> 
> 赞同：1
> 
> 时间：2013-03-05T07:47:01.917
> 
> 标签：asp.net, gridview

如何获得gridview的特定单元格的应用DataFormatString？我正在遍历gridview的所有单元格，我需要检查单元格的dataformatstring。有什么办法得到吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:46:03.830

只需在 GridView 中指定 DataFormatString

```
<asp:BoundField HeaderText="Date" DataField="MyDate" 
     DataFormatString="{0:MM/dd/yy}"> 
```

进一步阅读
[http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx)

## 更多链接

[asp.net gridview中的日期时间格式](https://stackoverflow.com/questions/7235324/datetime-format-in-asp-net-gridview)
[GridView数据集中的日期时间字符串表示](https://stackoverflow.com/questions/4342657/format-datetime-string-representation-in-gridview-dataset)
[DataFormatString在gridview列中不起作用](https://stackoverflow.com/questions/15207693/dataformatstring-not-working-in-gridview-column)

# uitableview - 如何在ios6.1中将表格视图列表显示为封面流

> ID：15218377
> 
> 赞同：0
> 
> 时间：2013-03-05T07:47:49.647
> 
> 标签：uitableview, ios6, coverflow

我是 iOS 编程新手。我找到了将图像视图显示为封面流的教程，如链接[http://code4app.net/ios/iCarousel-for-Cover-Flow/4f87d2db06f6e79d32000000中所示](http://code4app.net/ios/iCarousel-for-Cover-Flow/4f87d2db06f6e79d32000000)

但我的要求是将表格视图列表显示为封面流。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:47:52.913

在这里，我使用了 iCarousel 视图。将 SDK(import iCarousel.h & iCarousel.m) 集成到您的应用程序后。在所有 icarousel 子视图中创建 ICarousel 视图和集成表视图。这是我的代码

在 .h 文件中

```
iCarousel *categorySubView; 
```

在 .M 文件中。

```
-(Void)createIcarousel{
                   categorySubView = [[iCarousel alloc]initWithFrame:CGRectMake(10, 108, 480, 125)];

                    // categorySubView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
                    categorySubView.delegate = self;
                    categorySubView.dataSource = self;
                    categorySubView.type=iCarouselTypeCoverFlow2;
                    [self.view addSubview:categorySubView];

    }

    -(NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
    {

        return 10;
    }

    - (UIView *) carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view{

        UITableView *sampleTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 150, 150) style:UITableViewStylePlain];
        sampleTable.dataSource = self;
        sampleTable.delegate = self;
        [sampleTable setBackgroundColor:[UIColor blackColor]];
        return sampleTable;

    }

    - (BOOL)carousel:(iCarousel *)carousel shouldSelectItemAtIndex:(NSInteger)index{

        return YES;
    }

    - (CGFloat)carouselItemWidth:(iCarousel *)carousel
    {
        //usually this should be slightly wider than the item views
        return 180;
    }

    #pragma Table view delegate Methods

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
        return 1;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        return 10;
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {

            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        }

        // Configure the cell...
    //    cell.textLabel.text = [yourarray objectAtIndex:indexPath.row];

        return cell;

    } 
```

它的工作正常输出是这样的......

![在此处输入图像描述](../Images/82c6664c01c49d45fa1c2e88e9180d09.png)

# symfony - symfony2中的ldap认证

> ID：15218381
> 
> 赞同：5
> 
> 时间：2013-03-05T07:47:54.230
> 
> 标签：symfony, ldap

我正在尝试在 Symfony2 中实现 ldap 身份验证，但我被卡住了。我要做的就是将用户的数据保存在数据库中，但通过 ldap 检查他们的密码是否有效，因此只有同时拥有用户表中的行和 ldap 帐户的用户才能访问我正在处理的应用程序.

我已经阅读了所有相关的文档（尤其是这个：[http](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html) ://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html ）并花了一些时间阅读 symfony 代码，但真的不知道该怎么做它。安全组件看起来很复杂，我仍然不明白它是如何工作的。有没有办法只切换身份验证提供程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:12:24.710

[FR3DLdapBundle](https://packagist.org/packages/fr3d/ldap-bundle)非常适合您的需求。它与 FOSUserBundle 集成，用于针对 DB 的用户管理和针对 LDAP 的身份验证

# java - 在 JMS 中使用 bytemessage 而不是 objectMessage

> ID：15218386
> 
> 赞同：0
> 
> 时间：2013-03-05T07:48:02.390
> 
> 标签：java, json, performance, jakarta-ee, jms

我在我的架构中以多种方式使用 JMS。

延迟和性能是我们架构中非常重要的因素。

我读过将 jms 与 ObjectMessage 一起使用以便在消息中传递整个 java 对象需要很多性能。

替代解决方案是转换为 json、protobuff 并将消息作为字节消息/文本消息发送。

你能帮我说清楚吗：

1.  如果我选择json。从 String 转换为 json 后，我应该将消息
    作为测试还是作为 ByteArray 发送？（有什么区别吗？）

2.  从发送方将 String 转换为 json 的总时间（
    反之亦然）是否会比仅发送 ObjectMessage 更少/更多？

谢谢，雷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:10:21.060

只是我的 2 美分

1) IMO ，您应该使用 TextMessage 以字符串形式发送数据并将其反序列化为 Json 对象。我不能告诉你确切的性能统计数据，但我猜序列化比编组更好，因为当你将它重建为对象时它的开销更少。

[比较编组和序列化](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29#Comparison_with_serialization)

2）此外，只需避免将数据作为对象流发送，消息就可以由非基于java的消息解决方案接收和处理

来自[Java Dzone](http://java.dzone.com/articles/marshalling-unmarshalling-java)

> Externalizable 的一大缺点是你必须自己维护这个逻辑——如果你在你的类中添加、删除或更改一个字段，你必须更改你的 writeExternal/readExternal 方法来解决它。

# php - php 无法读取会话值

> ID：15218405
> 
> 赞同：0
> 
> 时间：2013-03-05T07:49:25.970
> 
> 标签：php, session

我正在使用 login.php 页面。当用户登录成功时，系统会将他们的用户名保存到会话中。如下代码：

```
if ($user != null) {
    $_SESSION['username'] = $user["username"];
    $_SESSION['userid'] = $user["id"];
    return 0;
} 
```

然后页面将位于 main.php。Main.php 将读取会话，如下面的代码：

```
session_start();
if (isset($_SESSION['username']) == false || empty($_SESSION['username']))
{
    // transfer into login page
}
else
{
    echo $_SESSION['username'];
} 
```

主页无法读取 $_SESSION['username']，值为 null。我现在该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:54:10.433

您应该`session_start()`在`$user`检查条件页面添加。

```
session_start();
if ($user != null)
{
    $_SESSION['username'] = $user["username"];
    $_SESSION['userid'] = $user["id"];
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:56:44.847

`session_start()`使用 SESSION 变量时必须添加

```
session_start(); //at the beginning of file 

if ($user != null) {
    $_SESSION['username'] = $user['username'];
    $_SESSION['userid'] = $user['id'];
    return 0;
} 
```

进而

```
session_start();

if (isset($_SESSION['username'])) {
    // transfer into login page
}
else
{
    echo $_SESSION['username'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:08:22.623

如果您想使用会话变量。您必须在使用会话变量之前启动会话。

```
session_start();
if ($user != null) {
    $_SESSION['username'] = $user["username"];
    $_SESSION['userid'] = $user["id"];
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T06:29:23.997

```
session_start();
if (count($user)>0 and is_array($user)) {
    $_SESSION['username'] = $user["username"];
    $_SESSION['userid'] = $user["id"];

} 
```

# python-2.7 - Python 文件无法识别 IDLE

> ID：15218412
> 
> 赞同：1
> 
> 时间：2013-03-05T07:49:46.303
> 
> 标签：python-2.7, python-idle

我在我的系统上安装了 Python 2.6 和 2.7，我使用的 IDLE（通过右键单击 Python 文件并选择“使用 IDLE 编辑”）来自 2.6 版。出于某种原因，我不得不从我的系统中完全删除 Python 2.6。现在，即使安装了 IDLE 2.7，Python 文件也不会在右键单击时显示“使用 IDLE 编辑”。我也尝试过完全卸载 Python 2.7 并重新安装它。有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:50:44.873

我也发生过一次。安装 Python。然后打开 IDLE 并保存一个带有`.py`扩展名的空文件。然后关闭 IDLE。转到您刚刚保存的文件。然后右键单击>>打开方式>>选择默认程序。然后选择`python`。会有更多选项，例如`pythonw`但您只能选择`python`. 完成后，右键单击该文件，您将找到“使用 IDLE 编辑”
，就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-04T05:33:07.453

方法是右键单击该文件，然后选择在 PC 上查看另一个应用程序，然后转到 C:\Python27\Lib\idlelib 并选择空闲（Windows 的批处理文件）

# javascript - 为什么 inputStr === "" 总是假的？

> ID：15218415
> 
> 赞同：0
> 
> 时间：2013-03-05T07:49:54.277
> 
> 标签：javascript, visual-studio, resharper

我的应用程序中有这个 JavaScript 代码：

```
var boo = function(inputStr) {
    if (!inputStr || inputStr === "") {
        throw new Error("Input is null or empty.");
    }
    return new Aftamat(inputStr);
}; 
```

Resharper 说`inputStr === ""`总是这样`false`。为什么？这是 Resharper 错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:53:42.587

如果字符串为空，则有点假...所以`!inputStr`将返回true，实际上，`inputStr === ""`如果您的字符串为空，则永远不会检查您

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:56:14.050

可能是因为如果`inputStr === ""`为真，那么`!inputStr`也为真，但如果`!inputStr`为真，则`inputStr === ""`永远不会被检查。

即，只有在测试必须为真的情况下才能访问该代码。

# sed - 使用 sed 删除匹配模式

> ID：15218417
> 
> 赞同：1
> 
> 时间：2013-03-05T07:49:57.770
> 
> 标签：sed

我尝试从我的 xml 文件中删除所有出现的单词。我想删除的模式如下所示：

```
& lt;foo_bar&gt;300&lt;/foo_bar& gt; 
```

我不熟悉 sed，但我知道使用它是可行的。我尝试了类似的东西：

```
sed 's^&lt[foo_bar]&gt;$g' myfile.xml 
```

或者

```
sed 's/^&lt[foo_bar]&gt;$//' myfile.xml 
```

两者都失败并显示错误消息。那么你能帮我解决这个问题吗？操作系统是 Solaris 10，所以最有可能的标准版本是 sed 安装的，而不是 GNU 版本。请忽略表达式中 & 后的空格。实际表达中没有空格。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:00:10.740

至少，您使用字符类的方式`[foo_bar]`是错误的。`[foo_bar]`只能匹配`f,o,b,a,r,_`一次。而且您似乎没有尝试匹配`/`. 您拥有的第一个表达式缺少正则表达式分隔符。sed 将假定您正在`^`用作分隔符，但它缺少相应的分隔符，如`s^find^replace^g`.

这似乎有效：

```
sed 's!&lt;foo_bar&gt;[^&]*&lt;/foo_bar&gt;!!g' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:35:08.080

这可能对您有用（GNU sed）：

```
sed -r 's/&\s*lt;(foo_bar&)gt;[0-9]+&lt;\/\1\s*gt;//g' file 
```

# javascript - 正则表达式：拆分字符

> ID：15218420
> 
> 赞同：1
> 
> 时间：2013-03-05T07:50:08.053
> 
> 标签：javascript, regex

示例二字符串

> 上午 9:00 起床
> 下午 1:00 午餐时间

**使用AM**或**PM**
Desire 输出分隔：

> 上午 9:00，起床
> 下午 1:00，午餐时间

我应该使用什么正则表达式来分隔时间和字符串并保留分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:59:04.700

```
/\s*([AP]M)\s*/ 
```

通过将拆分正则表达式括在括号中，其匹配项将添加到结果数组中。（`\s*`组外）匹配周围的空格（如果存在），从而将它们从匹配中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:01:51.360

如果总是这样，那就简单点。只需使用空格（`' '`）将其拆分并获取前 2 个字符串数组值。忽略中间的其余空间。

例如：

```
9:00 AM Wake up 
```

在这里，拆分后将有 4 个字符串在拆分数组中`{"9:00","AM","Wake","up"}` 获取前 2 个元素，并将其余元素附加一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:03:28.157

试试下面的代码

```
public static void main(String[] args) {
        String input = "9:00 AM Wake up";
        input = input.replaceFirst("\\s+","\\,").replaceFirst("\\s+","\\,");
        System.out.println(input);

        input = "1:00 PM Lunch Time";
        input = input.replaceFirst("\\s+","\\,").replaceFirst("\\s+","\\,");
        System.out.println(input);
    } 
```

运行上面的代码输出后会。

> 上午 9:00，起床
> 
> 1:00，下午，午餐时间

# c++ - 使用 CImg：LNK1181：无法在 Windows 7 x64 上打开文件“m.lib”

> ID：15218426
> 
> 赞同：1
> 
> 时间：2013-03-05T07:50:29.653
> 
> 标签：c++, compilation, linker-errors, nvcc, cimg

在 CImg Makefile 中，我注意到一个标志“-lm”，我认为这指向 m.lib 文件。但由于某种原因，它在链接阶段找不到它。我正在使用以下命令编译代码：

```
nvcc -o FilledTriangles FilledTriangles.cu -I.. -O2 -lm -lgdi32 
```

“nvcc”只是 nvidia CUDA 编译器。它的功能应该类似于 g++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:58:08.957

-lm 指“libm.so”

通常，-lXYZ 是一种告诉链接器它应该针对 libXYZ.so 解析编译代码中的符号的方法（在找到它之后，通常在 /usr/lib 中）。

# iis-7.5 - 具有命名空间属性的 IIS 重写 2.0 自定义标签

> ID：15218427
> 
> 赞同：2
> 
> 时间：2013-03-05T07:50:29.640
> 
> 标签：iis-7.5, iis-8, urlrewriter.net, nuget-server

我正在托管一个位于负载均衡器后面的私有 NuGet 服务器。负载均衡器接受 ssl 流量 (442) 并转发到 Web 服务器上的端口 80。

NuGet 似乎正在检测请求协议并返回带有 http 与 https 的基本 href。

[因此，对https://nuget.privaterepo.org](https://nuget.privaterepo.org)的请求将返回以下内容：

```
<service xml:base="http://nuget.privaterepo.org/nuget/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns="http://www.w3.org/2007/app">
  <workspace>
    <atom:title>Default</atom:title>
    <collection href="Packages">
      <atom:title>Packages</atom:title>
    </collection>
  </workspace>
</service> 
```

这应该`<service xml:base="http://nuget.privaterepo.com/nuget/"...`引起`<service xml:base="https://nuget.privaterepo.com/nuget/"...`注意协议的差异。

所以......我正在尝试出站重写`service xml:base`with的值`https`。具有以下内容：

```
<configuration>
  <system.webServer>
    <rewrite>
      <outboundRules rewriteBeforeCache="true">
        <rule name="Rewrite Product Outbound" preCondition="IsHTML" enabled="true" stopProcessing="true">
          <match filterByTags="A, CustomTags" customTags="NuGet service base" pattern="http://" ignoreCase="true" />
          <action type="Rewrite" value="https://{HTTP_HOST}{REQUEST_URI}" />
        </rule>
        <preConditions>
          <preCondition name="IsHTML" logicalGrouping="MatchAny">
            <add input="{RESPONSE_CONTENT_TYPE}" pattern="^application/xml" />
            <add input="{RESPONSE_CONTENT_TYPE}" pattern="^application/atom+xml" />
          </preCondition>
        </preConditions>
        <customTags>
          <tags name="NuGet service base">
            <tag name="service" attribute="xml:base" />
            <tag name="feed" attribute="xml:base" />
          </tags>
        </customTags>
      </outboundRules>
    </rewrite>
  </system.webServer>
</configuration> 
```

我遇到的绊脚石是写作`<tag name="service" attribute="xml:base" />`，这似乎是正确的。但是，它不会用`https`协议重写值。

我已经使用 NuGet 服务器和使用相同输出的测试项目对此进行了测试。`xml:base`如果我更改为`base`重写规则，则使用测试项目将起作用。

# javascript - 关于命名、扩展或插件？

> ID：15218435
> 
> 赞同：0
> 
> 时间：2013-03-05T07:51:36.747
> 
> 标签：javascript, naming

我们正在设计一个javascript UI控件库，现在我们遇到了一个与命名有关的问题。

在我们的例子中，我们设计了这样一个架构，可以在我们的控制实例中“注入”一个特殊的对象，它们具有一些特性，例如：

*   它们是**每个实例**“注入”的，也就是说，它们不修改出控件`prototype`，它们只修改运行时实例
*   它们在构造出控件实例后被注册和激活，我们的控件在其生命周期中有一个特殊的阶段来激活和停用它们
*   他们可以**修改任何**他们喜欢的东西，包括**监听事件**、**覆盖某些方法**、**改变成员属性的值**等等。

所以在这种情况下，我们应该如何命名它们，我们有**Extension**和**Plugin**可供选择，我们也了解了**firefox 扩展**和**firefox 插件**之间的区别，但不认为它们是一个很好的参考。

# java - GC之后，内存中对象的地址发生了变化，为什么对象引用仍然有效？

> ID：15218438
> 
> 赞同：4
> 
> 时间：2013-03-05T07:51:53.343
> 
> 标签：java, garbage-collection

> Java 对象是在 Heap 中创建的，为了在 Java 中进行垃圾回收，Heap 分为三部分或代，这些部分称为年轻代、Tenured 或 Old Generation 和堆的 Perm 区域。新一代进一步分为伊甸园空间、幸存者 1 和幸存者 2 空间三个部分。当一个对象首次在堆中创建时，它会在 Eden 空间内的新一代中创建，如果对象幸存，则在随后的 Minor Garbage 收集之后将其移动到幸存者 1，然后在主要垃圾收集将该对象移动到旧代或终身代之前的幸存者 2。

阅读更多：http: [//javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html#ixzz2MeKK2gBA](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html#ixzz2MeKK2gBA)

所以我的问题是，在这些移动动作之后，内存中的地址应该改变，为什么对象引用仍然有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T07:55:26.110

如果 GC 决定移动一个对象，它有责任更新对该对象的所有引用。

这对 Java 程序员来说是透明的：他们可以将引用视为抽象句柄，而不用担心 JVM 如何管理对象存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T07:57:25.440

Java 中的对象引用是一个抽象概念。它们不仅仅是表示内存偏移量的整数，如 C++ 指针。Java 虚拟机抽象了对其指向的对象的访问，因此您不必担心 JVM 如何在内部管理其内存。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-05T08:00:27.727

地址不会改变，因为移动的是对象引用而不是对象。

# linux - Linux 中的 WCHAN=unix_s

> ID：15218440
> 
> 赞同：0
> 
> 时间：2013-03-05T07:51:54.560
> 
> 标签：linux, process, fork

WCHAN=unix_s 它表示什么？

我有一个分叉许多进程的进程。主进程卡在 unix_s 中，所有子进程都在 poll_s 中。

我还有几个进程卡在 futex_ 中，即信号量。但这究竟是什么意思？

还有sk_str。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:10:43.917

它主要表明实际的 WCHAN 值不适合`ps`输出列，因此被截断。您可以在调用时设置列宽`ps`，例如。

```
ps ax -O wchan:22 
```

# javascript - 获取json中某个键的索引

> ID：15218448
> 
> 赞同：30
> 
> 时间：2013-03-05T07:52:17.313
> 
> 标签：javascript, json

我有一个像这样的json：

```
json = { "key1" : "watevr1", "key2" : "watevr2", "key3" : "watevr3" } 
```

现在，我想知道一个键的索引，比如 json 中的“key2”——即 1。有没有办法？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-10-16T05:59:49.243

为时已晚，但它可能简单而有用

```
var json = { "key1" : "watevr1", "key2" : "watevr2", "key3" : "watevr3" };
var keytoFind = "key2";
var index = Object.keys(json).indexOf(keytoFind);
alert(index); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T08:11:35.833

您不需要对象键的数字索引，但许多其他人已经告诉过您。

以下是实际答案：

```
var json = { "key1" : "watevr1", "key2" : "watevr2", "key3" : "watevr3" };

console.log( getObjectKeyIndex(json, 'key2') ); 
// Returns int(1) (or null if the key doesn't exist)

function getObjectKeyIndex(obj, keyToFind) {
    var i = 0, key;

    for (key in obj) {
        if (key == keyToFind) {
            return i;
        }

        i++;
    }

    return null;
} 
```

尽管您可能只是在搜索我在此函数中使用的相同循环，但您可以遍历该对象：

```
for (var key in json) {
    console.log(key + ' is ' + json[key]);
} 
```

哪个会输出

```
key1 is watevr1
key2 is watevr2
key3 is watevr3 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-05T07:59:02.347

原则上，寻找键的索引是**错误的。**哈希映射的键是无序的，你永远不应该期望特定的顺序。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-05T07:56:23.457

你所拥有的是一个字符串，它代表一个 JSON 序列化的 javascript 对象。您需要将其反序列化回一个 javascript 对象，然后才能遍历其属性。否则，您将遍历该字符串的每个单独字符。

```
var resultJSON = '{ "key1" : "watevr1", "key2" : "watevr2", "key3" : "watevr3" }';
    var result = $.parseJSON(resultJSON);
    $.each(result, function(k, v) {
        //display the key and value pair
        alert(k + ' is ' + v);
    }); 
```

或者简单地说：

```
arr.forEach(function (val, index, theArray) {
    //do stuff
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T07:59:21.240

您所追求的是经典数组工作方式中的数字索引，但是 json 对象/关联数组没有这样的东西。

“key1”、“key2”本身就是索引，没有与之关联的数字索引。如果你想拥有这样的功能，你必须自己关联它们。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-05T08:07:52.627

试试这个

```
var json = '{ "key1" : "watevr1", "key2" : "watevr2", "key3" : "watevr3" }';
json = $.parseJSON(json);

var i = 0, req_index = "";
$.each(json, function(index, value){
    if(index == 'key2'){
        req_index = i;
    }
    i++;
});
alert(req_index); 
```

# jboss - Ejb 3 查找在 Jboss AS 6 中不起作用

> ID：15218454
> 
> 赞同：0
> 
> 时间：2013-03-05T07:52:30.877
> 
> 标签：jboss, glassfish, ejb-3.0, jboss6.x

我已将我的应用程序从 Glassfish 2.2.1 迁移到 JBoss AS 6。

以前我有一个用于查找 ejbs 的通用类，下面是代码：

```
public class BeanUtil {
    private static InitialContext ctx; 
    public static <T> T create(Class<T> type){
        try {
            ctx = new InitialContext();
            return (T)ctx.lookup(type.getName());
        } catch (NamingException e) {
            e.printStackTrace();
        }
        return null;
    }

} 
```

上面的类适用于 glassfish 中的查找。但是在将代码迁移到 JBoss AS 6 之后。我总是得到 javax.naming.NameNotFoundException

下面是我的 ejb 课程之一。

```
 @Remote
    public interface OperationPerformed {

        public void addRandomNo(String randomNos);

    }

    @Stateless
    @Remote(OperationPerformed.class)
    public class OperationPerformedImpl implements OperationPerformed {

        public void addRandomNo(String randomNos) {
        }

    } 
```

如果我给出 jboss 在部署我的应用程序期间创建的完整 jndi 名称，那么我可以轻松查找相同的名称。但我想要用于查找的通用代码。

下面是我为查找 bean 调用的代码：

> OperationPerformed operationPerformed = BeanUtil.create(OperationPerformed.class);

请建议我是否做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:26:27.910

一些建议：

1.  在接口和实现上同时使用@Remote 注解是很不寻常的。从你的无状态 bean 中移除这个注解，它是多余的。
2.  我同意其他海报：
    *   不要使用远程接口进行本地查找和注入，创建另一个接口并用@Local 标记它。
    *   当涉及到 JVM 本地操作时，@EJB 注入与手动 JNDI 查找相比要优越得多（请参阅对 http://stackoverflow.com/questions/12681436/ejb-annotation-vs-jndi-lookup 的回复以及关于 SO 的类似问题） .

总而言之：

创建`OperationPerformedLocal.java`：

```
@Local
public interface OperationPerformedLocal {
    public void addRandomNo(String randomNos);
} 
```

修改你的 SLSB：

```
@Stateless
public class OperationPerformedImpl implements OperationPerformedLocal, OperationPerformed {

    public void addRandomNo(String randomNos) {
    }
} 
```

并尽可能使用注入而不是 jndi 查找：

```
@EJB
private OperationPerformedLocal operationPerformed; 
```

在 WAR 模块的情况下，一些 CDI`@Injection`魔法应该可以工作，但我还没有任何真正的经验。

* * *

现在，如果您坚持使用纯 JNDI 查找并希望它们尽可能通用，我想出了这个解决方案：

```
public class BeanUtil {
    private static InitialContext ctx;
    public static <T, C> T create(Class<C> implType, Class<T> interfaceType) {
        try {
            ctx = new InitialContext();

            return (T)ctx.lookup(implType.getSimpleName()+"/local");
        } catch (NamingException e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

你可以这样使用它：

```
try {
    OperationPerformedLocal operationPerformed =
        BeanUtil.create(OperationPerformedImpl.class, OperationPerformedLocal.class);
    operationPerformed.addRandomNo("123");
} catch (Exception e) {
    e.printStackTrace();
} 
```

我知道这很难看，我有点不好意思发布它。

它不可移植，迫使您了解接口和实现类，并且“/local”部分是硬编码的，使其更加丑陋::sigh::。

将 EJB-JAR(s) 放入 EAR 会使事情变得更加复杂，jndi-name 将以 EAR 名称为前缀：

```
return (T)ctx.lookup("earName/" + implType.getSimpleName() + "/local"); 
```

此外，如果 SLSB 更改名称 ie ，它可能会中断`@Stateless(name="someNewName")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:01:37.430

我认为您可以将类名转换为 jndi 名称并正常查找

# javascript - javascript按顺序从txt文件中读取

> ID：15218456
> 
> 赞同：0
> 
> 时间：2013-03-05T07:52:45.093
> 
> 标签：javascript

得到了这个脚本，它将 txt 文件中的 urls 放入 i 框架并一个一个地加载它们：

```
<script type="text/javascript">
    $.get("imones.txt", function (data) {
        var array = data.split(/\r\n|\r|\n/);
        var beforeLoad = (new Date()).getTime();
        var loadTimes = []; 
        var beforeTimes = [];   
        $('#frame_id').on('load', function () {                                 
            beforeTimes.push(beforeLoad);
            loadTimes.push((new Date()).getTime()); 
            $('#frame_id').attr('src', array.pop()); 
            $.each(loadTimes, function (index, value) {
                var result = (value - beforeTimes[index]) / 1000; 
                if (result < 0) { 
                    result = result * (-1);
                }   
                $("#loadingtime" + index).html(result);
                beforeLoad = value;
            });
        }).attr('src', array.pop());
    });
</script> 
```

我的问题 - 它不是按顺序放置 url，我希望它从底部或顶部开始，然后按顺序排列。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:55:28.513

尝试这个

```
var txtFile = new XMLHttpRequest();
txtFile.open("GET", "imones.txt", true);
txtFile.onreadystatechange = function() 
{
 if (txtFile.readyState === 4)   // Makes sure the document is ready to parse.
 {
  if (txtFile.status === 200)   // Makes sure it's found the file.
   {
    allText = txtFile.responseText; 
   }
 }
} 
```

# java - 如何将 BMR 计算器输出更改为向上取整的数字？

> ID：15218458
> 
> 赞同：0
> 
> 时间：2013-03-05T07:52:46.457
> 
> 标签：java

我的家庭作业是：需要计算多少巧克力棒才能维持女性和男性的 BMR。我想在没有那么多小数点的情况下更改最终输出，但将其四舍五入或更好的建议。我也知道字符串、子字符串、字符等有多种格式。只是不知道如何正确使用它们。不要求答案，只是指导或向我展示示例会有所帮助。谢谢你。

```
import java.util.Scanner; 

public class BMR 
{ 
    public static void main(String[] args) 
    { 
        int age; 
        double weight, height, BMRw, BMRm; 

        System.out.println("Enter weight in lbs:"); 
        Scanner kb = new Scanner(System.in); 
        weight = kb.nextDouble(); 

        System.out.println("Enter height in inches:"); 
        height = kb.nextDouble(); 

        System.out.println("Enter age in years:");  
        age = kb.nextInt(); 

        BMRw = 655 + (4.3 * weight) + (4.7 * height) - (4.7 * age); 
        BMRm = 66 + (6.3 * weight) + (12.9 * height) - (6.8 * age); 

        System.out.println("BMR for woman is: " + BMRw); 
        System.out.println("BMR for man is: " + BMRm);  

        System.out.println("A typical Chocolate Bar contains about 230 calories");  

        System.out.println("No. of Chocolate Bars consumed to maintain your weight: "); 
        int choco = 230; 

        System.out.println(BMRw / choco); 
        System.out.println(BMRm / choco);   
   } 
} 
```

**输出**是： 以磅为单位输入体重：118 以英寸为单位输入身高：5.5 以岁为单位输入年龄：33 女性的 BMR 为：1033.15 男性的 BMR 为：655.95 一块典型的巧克力棒含有约 230 卡路里热量 维持消耗的巧克力棒数量你的体重： **4.491956521739131** **2.8519565217391305**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:55:52.240

使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)。

```
DecimalFormat df = new DecimalFormat("#.00000");
df.format(4.491956521739131);// your number. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T12:52:05.687

使用 Math.round() ("女性的 BMR 是：" + Math.round(BMRw))

# nosql - 使用 Bitcask 后端的每个密钥的 Riak 开销是多少？

> ID：15218460
> 
> 赞同：1
> 
> 时间：2013-03-05T07:53:03.697
> 
> 标签：nosql, riak, overhead

这是一个简单的问题，显然有很多答案。

调查结果的范围包括：

一种。根据 Basho 的文档，22 个字节：http: [//docs.basho.com/riak/latest/references/appendices/Bitcask-Capacity-Planning/](http://docs.basho.com/riak/latest/references/appendices/Bitcask-Capacity-Planning/)

湾。450~ 字节在这里： http: [//lists.basho.com/pipermail/riak-users_lists.basho.com/2011-August/005178.html](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-August/005178.html) [http://lists.basho.com/pipermail/riak-users_lists.basho .com/2011-May/004292.html](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-May/004292.html)

C。轶事记录表明开销在 45 到 200 字节范围内。

为什么没有直接的答案？我知道这是一个错综复杂的问题 - 上面的邮件列表条目之一说明了这一点！- 但即使想出一个*一致*的球场这么困难？为什么 Basho 的文档没有明确说明这一点？

我还有另一组问题与我如何根据关键开销构建逻辑（存储大量小值而不是在更大的结构中“收集”它们）有关，但我想这是另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:57:06.647

我们的容量规划器将静态开销表示为 22 字节，因为这是 C 结构的大小。如该页所述，容量规划器只是提供了一个*粗略*的大小估计。

您链接到的 Nico 邮件列表上的旧帖子可能是您能找到的关于 bitcask 内部的最佳完整说明，并且是准确的。在 8 字节中计算指向条目的指针和存储桶/密钥对上 13 字节的 erlang 开销，您在 64 位系统上得到 43 字节。

至于没有直接的答案……实际上询问我们（通过电子邮件、邮件列表、IRC、信鸽等）总是会得到一个实际的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:24:34.050

Bitcask 要求所有密钥都保存在内存中。据我所知，a) 中引用的开销是在估计由于此要求而在整个集群中需要的 RAM bitcask 总量时使用的开销。

将数据写入磁盘时，Riak 将实际值与各种元数据（例如矢量时钟）一起存储。b) 中提到的 450 字节的帖子似乎是对磁盘存储开销的估计，因此可能也适用于其他后端。

Nico 的帖子似乎包含了一个很好且准确的解释。

# java - 如何聚合来自多个服务的 JAX-RS 响应

> ID：15218462
> 
> 赞同：1
> 
> 时间：2013-03-05T07:53:07.050
> 
> 标签：java, rest, jax-rs, resteasy

我们有一个登录后显示的用户仪表板。仪表板由多个小部件组成。每个小部件从单独的 RESTful 服务中提取内容。例如： /news /mails /questions /alerts 。每个小部件在加载到页面后都会调用该服务。这样就有多个 web 服务调用。

有没有办法减少多次通话。

它应该工作的方式是当页面第一次加载时，服务应该在一次调用中返回所有小部件的聚合数据。

每个服务也应该独立可用，以便它可以用于刷新单个小部件，以及用于其他系统集成。

注意：在这种情况下，小部件是可以使用来自 restful 服务的 json 数据的任何 javascript portlet。所有服务都在一个 Web 应用程序中。

我们如何聚合来自多个服务的响应并组合成一个 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:36:31.110

如果您可以添加自己的 JAX-RS 服务，只需添加一个新服务，该服务调用每个其他服务并创建聚合响应。

例如：

```
GET http://myservice.com/rest/aggregate?service=news&service=mails&service=questions 
```

服务的 url 前缀可以作为单独的编码参数提供，也可以在聚合服务中提供。

如果所有这些都在同一服务器中运行，则只需使用其他服务的现有 API 来创建聚合响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:05:39.343

请记住，json 服务只是方法，因此要详细说明@Vengard 的答案（请接受之前的答案），您可以（创建一个如下所示的聚合方法：

```
@Path ("15218462")
class Test {
  @Path ("aggregate")
  public Map<String, Object> aggregate(@QueryParam("service") List<String> services) {
    Map<String, Object> result = new HashMap<>();       
      for (String serviceName : services) {
        if(serviceName.equals("mails") {
          result.put("mails", mails());
        }
        // ... etc 
      }
  }
  @Path
  public List<String> mails() {
    // .... processing code ...
  }
} 
```

如果服务不受您的控制，并且您不介意依赖第三方，您可能需要查看 Yahoo 管道（[http://pipes.yahoo.com/pipes/](http://pipes.yahoo.com/pipes/)）之类的东西

# python - 如何跨所有目录执行python脚本

> ID：15218465
> 
> 赞同：0
> 
> 时间：2013-03-05T07:53:25.937
> 
> 标签：python, regex

我编写了以下脚本来匿名化 txt 文件中的电子邮件地址：

```
import io, os, sys
import re

def main():

try:
    # Open the file.
    myfile = open('emails.txt', 'r')

    # Read the file's contents.
    content = myfile.read()
    content = re.sub(r'.+(?=@.+\.(com|edu))', "xxxx", content)

    myfile = open('emails.txt', 'w')
    myfile.write(content)   
    # Close the file.
    myfile.close()

except IOError:
    print('An error occured trying to read the file.')

except:
    print('An error occured.')

main() 
```

我想知道如何使目录及其子目录中的所有文件都可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:21:17.173

[`os.walk()`](http://docs.python.org/2.7/library/os.html#os.walk)是你想要的。我对您的代码段进行了更改以演示：

```
#!/usr/bin/env python

import re
from os import walk
from os.path import join

def main():
    for (dirpath, _, filenames) in walk('/path/to/root'):
        for filename in filenames:
            # Build the path to the current file.
            path_to_file = join(dirpath, filename)
            content = None
            # Open the file.
            with open(path_to_file, 'r') as myfile:
                print 'Reading {0}'.format(path_to_file)
                # Read the file's contents.
                content = myfile.read()
                content = re.sub(r'.+(?=@.+\.(com|edu))', "xxxx", content)

            with open(path_to_file, 'w') as myfile:
                myfile.write(content)

main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:02:42.383

使用 glob.glob

```
import io, os, sys
import re
import glob

def main():
    try:
        # Open the file.
        for f in glob.iglob('/path/to/root/*'):
            if not os.path.isfile(f):
                continue
            myfile = open(f, 'r')

            # Read the file's contents.
            content = myfile.read()
            content = re.sub(r'.+(?=@.+\.(com|edu))', "xxxx", content)

            myfile = open(f.replace('.txt', '.new.txt'), 'w')
            myfile.write(content)
            # Close the file.
            myfile.close()

        except IOError:
            print('An error occured trying to read the file.')
        except:
            print('An error occured.')

main() 
```

# c - Antlr C 解析器可以从无效令牌中恢复吗

> ID：15218468
> 
> 赞同：1
> 
> 时间：2013-03-05T07:53:42.130
> 
> 标签：c, antlr

我开发了一个**Antlr3.4**语法，它生成一个**AST**供以后解析。生成的解析器使用 Antlr 的 C 接口。当解析器遇到意外的标记时，它会添加

> “树错误节点”到 AST 令牌流并继续处理输入。（内部“树错误节点”表示 ANTLR3_TOKEN_INVALID。）

当我将解析器的输出传递给 AST 解析器时，它会在`"Tree Error Node"`. 无论如何处理 AST 流中的无效令牌？

我在用着：

> *   libantlr3c-3.4
> *   antlr3.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:33:53.270

我发现您可以覆盖树适配器方法“errorNode”以发出用户指定的令牌。然后可以在 AST 解析器中处理该令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:42:32.883

您需要使用上述方法覆盖 Match() 并执行解析器的恢复（这是 c# 伪代码）：

```
 public override object Match(IIntStream input, int ttype, BitSet follow)
    {
        if (needs recover)
        {
            ... Recover from mismatch, i.e. skip until next valid terminal.
        }

        return base.Match(input, ttype, follow);
    } 
```

此外，您需要从不匹配的令牌中恢复：

```
 protected override object RecoverFromMismatchedToken(IIntStream input, int ttype, BitSet follow)
    {
        if (needs recover)
        {
            if (unwanted token(input, ttype))
            {

                .. go to the next valid terminal
                .. consume as if ok
                .. return next valid token

            }

            if (missing token(input, follow))
            {
                .. go to the next valid terminal
                .. insert missing symbol and return
            }

            .. othwerwise throw
        }

        .. call base recovery(input, ttype, follow);
    } 
```

如果还有其他问题，请告诉我。

# android - 从 BroadcastReceiver 启动 Activity

> ID：15218476
> 
> 赞同：3
> 
> 时间：2013-03-05T07:54:12.417
> 
> 标签：android, android-intent

我有以下代码从扩展的类发送电子邮件`BroadcastReceiver`：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
S2Mconfig s2m = new S2Mconfig();
Log.d(TAG, "Create Intent for mail to " + address);
emailIntent.setType("plain/text");
emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, s2m.read(thisContext));
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, address);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);
Log.d(TAG, String.format("Sending mail %s", emailIntent.toString()));
thisContext.startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

是在`BroadcastReciever`中注册的`manifest`，我设置了`INTERNET`权限：

```
<uses-permission android:name="android.permission.INTERNET" />...

<receiver android:name=".SmsReceiver" android:exported="true" > 
        <intent-filter android:priority="1000"> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="android.provider.Telephony.MMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

日志确认`FLAG_ACTIVITY_NEW_TASK`在调用 之前设置了`startActivity()`。尽管如此，我仍然感到害怕`"Calling startActivity()... requires the FLAG_ACTIVITY_NEW_TASK flag...` 任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:02:25.233

```
@Override
public void onReceive(Context context, Intent intent){
    Context appContext = context.getApplicationContext(); 
```

和`appContext`你一起可以开始一个“正常”的活动。[这里](https://stackoverflow.com/questions/7746274/startactivity-within-a-subclass-of-application)描述的是一个例子

```
public void sendNotificationEmail(String emailBody) {
        Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.setType("text/html");
        emailIntent.putExtra(Intent.EXTRA_EMAIL, notificationRecipients);
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, "MyAppName Error");
        emailIntent.putExtra(Intent.EXTRA_TEXT, emailBody);
        Intent emailChooser = Intent.createChooser(emailIntent, "An error has occurred! Send an error report?");
        emailChooser.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        try {
            startActivity(emailChooser);
        } catch (ActivityNotFoundException e) {
            // If there is nothing that can send a text/html MIME type
            e.printStackTrace();
        }
    } 
```

所以添加`FLAG_ACTIVITY_NEW_TASK`到选择器意图而不是发送者！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:01:30.377

尝试添加以下标志

```
intent.addFlags(
          Intent.FLAG_ACTIVITY_NEW_TASK
        | Intent.FLAG_ACTIVITY_CLEAR_TOP
        | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

当你开始你的活动时，确保你正在使用`context.getApplicationContext()`喜欢

context.getApplicationContext().startActivity(intent);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:09:49.920

将您的代码从更改`emailIntent.setType("plain/text");`为`emailIntent.setType("text/plain");`

# r - R：对齐具有不同 x 范围的图

> ID：15218478
> 
> 赞同：-2
> 
> 时间：2013-03-05T07:54:19.003
> 
> 标签：r, ggplot2, dataframe

我有两个数据框`dataA`和`dataB`，它们都包含一个`time`和一个`value`列。时间列密切相关，但不相同。现在，我用 ggplot 生成两个图，例如：

```
plotA <- ggplot(dataA) + geom_line(aes(x = time, y = value))
plotB <- ggplot(dataB) + geom_line(aes(x = time, y = value)) 
```

如何使用`grid.arrange`或类似的功能来垂直显示两个图，以便 x 轴标签和网格线对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:18:31.407

您可以使用构面来对齐图。

首先，需要合并两个数据集：

```
dataAB <- rbind(dataA[c("time", "value")], dataB[c("time", "value")]) 
```

一个新列表示原始数据集：

```
dataAB$ind <- c(rep("A", nrow(dataA)), rep("B", nrow(dataB))) 
```

阴谋：

```
library(ggplot2)
ggplot(dataAB) + 
  geom_line(aes(x = time, y = value)) +
  facet_wrap( ~ ind, ncol = 1, scales = "free_y") 
```

# android - 为 Google 地图制作动画 (SupportMapFragement)

> ID：15218479
> 
> 赞同：1
> 
> 时间：2013-03-05T07:54:25.187
> 
> 标签：android, animation, google-maps-android-api-2, supportmapfragment

我`GoogleMap API V2`在我的应用程序中使用，现在我想为整个`map layout`使用`Fade_IN`和`Fade_OUT`动画制作动画，但是当我测试我的应用程序时，它只是为地图叠加层制作动画，我的意思是地图表面上存在的按钮，而不是整个地图。

如果有人知道如何为整个地图布局设置动画，请帮助我，任何帮助都是可观的。

```
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

transaction.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
// Commit the transaction
transaction.commit(); 
```

# scala - 为什么要通过@uV 禁用方差检查？

> ID：15218481
> 
> 赞同：5
> 
> 时间：2013-03-05T07:54:32.183
> 
> 标签：scala, annotations, type-safety

我刚刚偶然发现了（2.10.0）定义的以下方法`to`定义：[`TraversableLike`](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/collection/TraversableLike.scala)

```
override def to[Col[_]](implicit cbf: CanBuildFrom[Nothing, A, Col[A @uV]]): Col[A @uV] = {
  val b = cbf()
  b.sizeHint(this)
  b ++= thisCollection
  b.result
} 
```

根据[这个答案](https://stackoverflow.com/a/8761517/491216)，`@uV`禁用方差检查。这听起来很危险。我为什么要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:23:49.393

我想答案与这个问题的答案非常相似：[Scala 何时需要 @uncheckedVariance，为什么在 GenericTraversableTemplate 中使用它？](https://stackoverflow.com/questions/2454281/when-is-uncheckedvariance-needed-in-scala-and-why-is-it-used-in-generictravers?rq=1)

由于不可变（可能是协变）和可变（不变）集合存在构建器（隐式参数`cbf`），因此此处可能使用注释来使该`to`方法适用于两种类型的集合。

# intuit-partner-platform - 如何使用 API 在 QuickBooks Online UK 中导入增值税？

> ID：15218483
> 
> 赞同：3
> 
> 时间：2013-03-05T07:54:38.903
> 
> 标签：intuit-partner-platform, quickbooks-online

我想将订单从我的网站导入到 QuickBooks online UK。订单需要与增值税分离一起进口。我看不出有任何方法可以通过 API 完成这项工作。

请指教。

谢谢。克坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:54:32.913

QBO 的 V3 API 将开始支持此功能：http: [//ippblog.intuit.com/blog/2013/02/quickbooks-api-v3-webinar-recording.html](http://ippblog.intuit.com/blog/2013/02/quickbooks-api-v3-webinar-recording.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:10:11.050

截至 2013 年 3 月，Intuit 提供的 QuickBooks Online API 均不支持非美国版本的 QuickBooks。

您可以在以下论坛帖子中看到 Intuit 开发人员对此进行了确认：

*   [https://idnforums.intuit.com/messageview.aspx?catid=69&threadid=18683&enterthread=y](https://idnforums.intuit.com/messageview.aspx?catid=69&threadid=18683&enterthread=y)

具体来说，其中一位开发人员说：

> 目前尚无关于 IPP 何时可在美国以外用于 QBO 或 QBD 的估计。

因此，由于美国没有增值税，因此 API 中不支持增值税。关于这些坏消息我很遗憾！

# javascript - `if-in` 如何评估为真？（仅在铬）

> ID：15218491
> 
> 赞同：3
> 
> 时间：2013-03-05T07:55:15.007
> 
> 标签：javascript, google-chrome-devtools

调试别人的代码，发现了这个，

![在此处输入图像描述](../Images/1e54d63e09d8745288263f2a58bcfd79.png)

如何`if-in`评估为真？仅在 chrome 中发生，IE 评估为 false

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:57:05.190

之所以进行评估`true`，是因为`fileInput`DOM 元素`files`在 Chrome 上有一个属性。它是[File API](http://www.w3.org/TR/FileAPI/)的一部分。它`false`在 IE 上，因为[他们只在 IE10 中将 File API 添加到 IE 中](http://caniuse.com/#feat=fileapi)。我猜你必须使用 IE9 或更早版本。

这就是`in`操作符所做的：检查一个对象是否有一个具有给定名称的属性，无论是它自己的属性还是它从其原型对象继承的属性。

这是一个直接的 JavaScript 示例：

```
var obj = {foo: 42};
console.log('foo' in obj); // true
console.log('bar' in obj); // false 
```

您会看到这在特征检测中经常使用。例如，如果您想知道用户使用的浏览器是否支持`placeholder`在元素上使用属性`input`，您可以查找反射属性：

```
if ('placeholder' in document.createElement('input')) {
    // It supports the placeholder attribute
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T07:57:18.873

该`in`运算符可用于测试对象内部是否存在属性：

```
var obj = {
  foo: 'baz'
};

console.log('foo' in obj); // true 
```

更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)

# python - 是任何模块的“和”和“或”属性吗？

> ID：15218498
> 
> 赞同：0
> 
> 时间：2013-03-05T07:55:44.813
> 
> 标签：python, python-2.7

我需要以如下所示的前缀表示法评估条件语句：

```
condition = ('AND', 'NE','$type','email','EQ','$link','space') 
```

其中：- `'AND','NE', 'EQ'`等是逻辑运算符- `AND, Not equal to (NE), EQ (equal to`)

为了自动评估，除了“AND”和“OR”之外，我可以让操作员模块中的操作员休息。有人可以建议吗？下面有更多解释（如果可以更好地实施，请告诉我）：

在评估条件时，以 $ 开头的那些将从输入字典中替换为键等于字符串（在剥离 $' 之后）。

```
Input = {'type': 'email', 'link' : 'tab' } 
```

运算符模块可用于评估二元运算，例如：

```
subst_op = []
Inp = {'type': 'email', 'link' : 'tab' }

# substitute input parameters
for cond in condition:
    subst_op.append(Inp[cond[1:]] if '$' in cond else cond)

#while input, start from right pushing operands on to stack and if operator, pop two operands, evaluate with the operator and push on to stack (http://en.wikipedia.org/wiki/Polish_notation)
....
# for evaluation, use the operator module
if condition in ('NE','EQ' ..)
    getattr(operator, condition)(popped_operand1,popped_operand2) 
```

运算符没有“AND”和“OR”。请建议。

# android - 中止：NDK 环境上的堆内存损坏。（POCO 库、Sqlite3、Cocos2dx）

> ID：15218508
> 
> 赞同：4
> 
> 时间：2013-03-05T07:56:28.120
> 
> 标签：android, sqlite, android-ndk, cocos2d-x, poco-libraries

我面临环境`'ABORTING: HEAP MEMORY CORRUPTION'`问题`Android NDK`。

如果我用 回溯`ndk-gdb`，它主要发生在 长时间跟踪问题的`malloc/dlfree`函数中和之后，它主要发生在函数调用内部，这在env上绝对可以正常工作。`libc.so``sqlite3_xxx``iOS`

我只是找不到我必须深入的地方。

有没有人遇到过类似的问题并解决了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:22:16.287

1.  我见过内存问题，但不是`'ABORTING: HEAP MEMORY CORRUPTION'`你报告的。

2.  您必须找出损坏的堆：Java 堆或 C/C++ 堆。或者它可能是你的 sql。如果日志没有提供信息，您可以尝试在二进制文件中找到错误消息。

3.  如果是 C/C++ 堆，对我有用的是用我自己的版本替换标准的 malloc/calloc/free。

    ```
    #define malloc(x) myMalloc(x, __FILE__,__LINE__,__func__) 
    ```

    等等; myMalloc() 和朋友打印调试信息，以便您可以找出分配和释放内存的位置。我有库的源代码并且可以编译它。然后记录，记录，记录......

    ```
    #include <android/log.h>
    #define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG  , "~~~~~~", __VA_ARGS__)
    #define DLOG(...) __android_log_print(ANDROID_LOG_DEBUG  , "~~~~~~", __VA_ARGS__) 
    ```

    我还让 myMalloc() 将分配的内存归零——以防万一。另一个技巧是分配一个更大的卡盘并在其末尾放置一个保护值。如果该值损坏-您会看到。

4.  如果是 Java 堆，则必须记录本机函数调用（我本人从未见过 Java 堆中的问题，通常 Java 会抱怨其 JNI 特定的东西）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-13T01:18:21.520

对于我的程序，'ABORTING: HEAP MEMORY CORRUPTION' 会在出现线程安全问题时显示。特别是 Cocos2d-x 框架，它的`getFileData()`功能`ZipUtils`可能会在加载`.plist`图集`addImageAsync()`时同时在 Android 上崩溃。虽然代码在 iOS 上运行良好。

# java - JBoss bean 验证需要调用一个 EJB

> ID：15218511
> 
> 赞同：2
> 
> 时间：2013-03-05T07:56:46.950
> 
> 标签：java, jakarta-ee, jboss, jpa-2.0, bean-validation

我正在我的持久性模型上编写 bean 验证。我需要调用我的 EJB Bean 以便从 DB 中检索一些配置参数。我怎样才能做到这一点？

我试图将我的 EntityValidator 标记为 @Stateless 和 @LocalBean，但 JBoss 仍然将我的 EntityValidator 视为 POJO。我能做点什么吗？或者，我如何从 POJO 中检索 EJB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:01:19.507

从 Bean Validation 1.0 开始，您无法将 EJB 注入开箱即用的验证器中。不过，这将随着 Bean Validation 1.1 改变。

目前您有以下几种可能：

*   通过 JNDI 检索 EJB：`MyEjb myEjb = InitialContext.doLookup(myEjbName);`
*   实现一个自定义的[ConstraintValidatorFactory](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e2697)，它将 EJB 引用注入到创建的验证器对象中
*   使用[Seam Validation](http://www.seamframework.org/Seam3/ValidationModule)，它启用了验证器对象的依赖注入`@Inject`（免责声明：我是 Seam Validation 的作者）

使用 Bean 1.1，这将是[开箱即用的](http://beanvalidation.org/1.1/spec/1.1.0.cr1/#d0e11289)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:19:05.860

目前，注入在验证器中不起作用。

我已经[读到](http://beanvalidation.org/proposals/BVAL-238/)有计划未来扩展 bean 验证以启用该行为。

但是，应该有像 seam 或[deltaspike](http://incubator.apache.org/projects/deltaspike.html)这样的扩展，它可以让你提供注入。

检查这个： [验证器中的注入](http://docs.jboss.org/seam/3/latest/reference/en-US/html/validation-dependency-injection.html#d0e11441)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:10:38.527

我认为 jboss 不会将您的 bean 注入 JPA 验证器。

您可以使用 JDNI 为 POJO 查找 EJB。

# java - 通过访问 2 个 .csv 文件中的数据来创建条形图

> ID：15218514
> 
> 赞同：0
> 
> 时间：2013-03-05T07:56:54.117
> 
> 标签：java, csv, bar-chart

`.csv`文件 1 数据：

```
sampler_label,aggregate_report_count,average,aggregate_report_median,aggregate_report_90%_line
HTTP Request1,  750               ,26339           ,22644               , 40210
HTTP Request2,  750               ,8280       ,4781              ,21016 
```

`.csv`文件 2 数据：

```
sampler_label,aggregate_report_count,average,aggregate_report_median,aggregate_report_90%_line
HTTP Request1,  350               ,2539        ,2224                , 48410
HTTP Request4,  350               ,8736       ,9285              ,38217 
```

我想显示条形图，它应该描述每个采样器标签的两个文件的平均值。这里每个文件中有 2 个平均值。可能有 n 个值。在条形图中，我只想在一个图中显示文件 1 和文件 2 的值。请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:28:09.880

```
public JFreeChart createBarChartFromCSV() {     

csv csvReader = new csv();
        List<String[]> csvData1 = null;
                List<String[]> csvData2 = null;
        int indexOfAverage1 = 0;
                int indexOfAverage2 = 0;

        csvData1 = csvReader.getDataFromCSV1(csv.CSVFILENAME1);
                csvData2 = csvReader.getDataFromCSV2(csv.CSVFILENAME2);

        for(String[] columnArray : csvData1)
            for(int i = 0; i< columnArray.length; i++)
                if(columnArray[i].equalsIgnoreCase("average")){

enter code here

        indexOfAverage1 = i;
                    break;
                }

        if(indexOfAverage1 == 0){
            System.err.println("Error retrieving data from CSV File1 !!");
            System.exit(0);
        }

         for(String[] columnArray : csvData2)
            for(int j = 0; j< columnArray.length; j++)
                if(columnArray[j].equalsIgnoreCase("average")){
                    indexOfAverage2 = j;
            break;
                }

        if(indexOfAverage2 == 0){
            System.err.println("Error retrieving data from CSV File2 !!");
            System.exit(0);
}                

                JFreeChart barChart = generateBarChart(csvData1,csvData2, indexOfAverage1,indexOfAverage2);

        return barChart;
    }

    private JFreeChart generateBarChart(List<String[]> csvData1,List<String[]> csvData2, int columnIndex1, int columnIndex2){

        DefaultCategoryDataset dataSet = new DefaultCategoryDataset();

        final String YAXIS_NAME = csvData1.get(0)[columnIndex1]; //value returned is "average"
        final String XAXIS_NAME = csvData1.get(0)[0]; //value returned is "sampler_label"

        for(int i = 1; i < csvData1.size() - 1; i++){

            long averageValue1 = Long.parseLong(csvData1.get(i)[columnIndex1]);
            String columnKey1 = csvData1.get(i)[0];

            dataSet.setValue(averageValue1, YAXIS_NAME, columnKey1); // plot the graph
                        }

        for(int j = 1; j< csvData2.size() - 1; j++){

            long averageValue2 = Long.parseLong(csvData2.get(j)[columnIndex2]);
            String columnKey2 = csvData2.get(j)[0];

            dataSet.setValue(averageValue2, YAXIS_NAME, columnKey2); // plot the graph

        }

             System.out.println("created");

JFreeChart chart = ChartFactory.createBarChart("Comparison between the average of 2 values", XAXIS_NAME, YAXIS_NAME, dataSet, PlotOrientation.VERTICAL, true, true, false);      
        final CategoryPlot plot = chart.getCategoryPlot();
        chart.setBackgroundPaint(Color.white);       
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);
        BarRenderer renderer=new BarRenderer();

      System.out.print( "set the range axis to display integers only...");
        final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
        rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

          System.out.print( "disable bar outlines...");
        renderer = (BarRenderer) plot.getRenderer();
        renderer.setDrawBarOutline(false);
        renderer.setMaximumBarWidth(0.10);

          System.out.print( "set up gradient paints for series...");
    final GradientPaint gp0 = new GradientPaint(
            0.0f, 0.0f, Color.blue, 
            0.0f, 0.0f, Color.lightGray
        );
        final GradientPaint gp1 = new GradientPaint(
            0.0f, 0.0f, Color.green, 
            0.0f, 0.0f, Color.lightGray
        );

        renderer.setSeriesPaint(0, gp0);
        renderer.setSeriesPaint(1, gp1);

                return chart;
    } 
```

# java - java中包含空元素时如何克隆数组

> ID：15218518
> 
> 赞同：-3
> 
> 时间：2013-03-05T07:57:10.253
> 
> 标签：java, arrays, nullpointerexception, clone

如果我想克隆一个对象数组，但是数组中有一些空元素，如何实现clone()方法？例如：

```
class A {};

class B implements Cloneable {
    A[] arrayFoo = new A[maxNumber];
    // let some elements in arrayFoo be null
    // now I want to implement a clone method
    public B clone() throws CloneNotSupportedException {
        B result = (B) super.clone()
        return result;
    }
} 
```

这将引发空指针异常。如何修复这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:13:22.173

试试这个（它不会抛出 NullPointerException）：

```
class A {};

class B implements Cloneable {
    public static final int MAX_NUMBER = 42;
    A[] arrayFoo = new A[MAX_NUMBER];
    // let some elements in arrayFoo be null
    // now I want to implement a clone method
    public B clone() throws CloneNotSupportedException {
        B result = (B) super.clone();
        return result;
    }

    public static void main(String[] args) throws CloneNotSupportedException {
        B b1 = new B();
        B b2 = b1.clone();

        System.out.println("Done!");
    }
} 
```

**结论：** 当您发布这样的问题时，请**始终**准确指定 NullPointerException 发生在哪一行代码，并**始终**确保在问题中发布该特定行。

* * *

我的猜测（如果您来自 C++ 背景）是您在仅声明为的成员变量上调用 clone：

```
B b; 
```

那会抛出 NullPointerException，但不是因为`clone`实现。`B b;`不会在 Java 中实例化任何东西。它只是声明了一个可以指向一个`B`对象的引用。但是引用被初始化为`null`. 因此，调用 clone on`b`将尝试在不存在的对象上调用 clone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:35:27.353

克隆数组执行浅拷贝，并且正确复制空值。它不会产生任何 NullPointerException，除非数组变量本身为空。

# authentication - IT-Hit WebDav 服务器和客户端证书？

> ID：15218522
> 
> 赞同：3
> 
> 时间：2013-03-05T07:57:21.337
> 
> 标签：authentication, ssl, webdav, ithit-webdav-server

有谁知道 IT-Hit WebDav 服务器 ( [http://www.webdavsystem.com/server](http://www.webdavsystem.com/server) ) 是否可以接受和检查客户端证书？也许这是 IIS 在 IIS 中部署时为产品所做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:44:59.130

IT Hit WebDAV 服务器基于 IIS 或 HttpListener（两种不同的实现）。

IIS 支持客户端证书，这意味着基于 IIS 的 WebDAV Server 可以正常工作。您需要做的就是设置您的 IIS。

正如我从[这个问题](https://stackoverflow.com/questions/7153268/httplistenerrequest-is-not-returning-a-client-certificate)中看到的， HttpListener 也支持客户端证书。如果您缺少使其工作的东西（例如无法到达某些财产），请与我联系。

# jquery - 我可以在 jQuery 移动版 1.3.0 中使用 vClick 和 usefastclick 吗？

> ID：15218526
> 
> 赞同：1
> 
> 时间：2013-03-05T07:57:36.700
> 
> 标签：jquery, jquery-mobile

我读到了`vclick`和`click`。`vclick`比点击 jQuery Mobile 更快。所以我想使用`vclick`，但我很困惑 vclick 是否有效`jQuery mobile 1.3.0`？

我也想知道那是什么`$.mobile.useFastClick = false;`？这是在工作`jQuery mobile 1.3.0`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:07:13.290

是`jQuery mobile 1.3.0`的，支持`vclick`。您可以自己检查[文档](http://api.jquerymobile.com/vclick/)。官方问答的另一个[问题](http://view.jquerymobile.com/1.3.0/docs/faq/how-do-i-use-touch-mouse-events.php)

我摆弄了`$.mobile.useFastClick = false`一下，效果很好。所以我们可以假设`$.mobile.useFastClick = false`在`jQuery mobile 1.3.0`

在这里找到小提琴[http://jsfiddle.net/Q8f7E/](http://jsfiddle.net/Q8f7E/)

# liferay - 你能解释一下服务构建器的概念吗？

> ID：15218527
> 
> 赞同：2
> 
> 时间：2013-03-05T07:57:39.223
> 
> 标签：liferay, liferay-6

使用 .生成表和默认类更容易`liferay's service builder`。

但是我很难理解它生成的类的层次结构。

`LocalServiceImpl`除了根据我们的需要通过添加我们自己的功能来修改类之外，每个类的确切用途也是如此。

我已经阅读了[Service Builder doc](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/service-build-2)。所以我得到了一些基本知识，但想了解更多。

甚至链接“ [Liferay Service Builder](http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder) ”也很有用，但与当前的 Liferay 版本相比已经过时了。那么有没有人对上面的链接有更新或用示例/图表解释层次结构的好信息？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:28:22.610

要在 liferay 中实现外键概念，您必须应用自己的编码逻辑，因为 FK 的实现在服务构建器中不可用。所以我想你需要放一些代码。在 liferay 网站上阅读一些与服务构建器相关的论坛。它会给你更好的曝光。阅读 Liferay 在行动。这是一本好书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:54:34.070

这是我在 Liferay 6.1 中观察到的。

**`com.liferay.portlet.p_name.model`**：

这具有与此 portlet 相关（相关的表实体）的接口和类。

例如`com.liferay.portlet.announcements.model`会有

***接口：***

1.  公告进入
2.  公告EntryModel
3.  公告交货
4.  公告DeliveryModel
5.  公告标志
6.  公告FlagModel

***课程：***

在类部分，您将找到每个实体的包装类和肥皂类，例如：

1.  AnnouncementEntryWrapper
2.  公告EntrySoap
3.  公告FlagWrapper
4.  公告FlagSoap
5.  AnnouncementDeliveryWrapper
6.  公告交货肥皂

同样对于少数实体，您会发现常量条目的类 `AnnouncementsEntryConstants`，`AnnouncementsFlagConstants`例如等。

**`com.liferay.portlet.p_name.service`**：

这具有与此 portlet 相关（相关的表实体）的类和接口。例如`com.liferay.portlet.announcements.service`会有

***接口：***

1.  公告EntryService
2.  公告EntryLocalService
3.  公告DeliveryService
4.  公告DeliveryLocalService
5.  公告FlagService
6.  公告FlagLocalService

***课程：***

在类部分，您将拥有 Util 和 Wrapper 类。

1.  公告EntryServiceUtil
2.  公告EntryServiceWrapper
3.  公告EntryLocalServiceUtil
4.  公告EntryLocalServiceWrapper

等等.....

所以简而言之，以下是我在 Liferay 中观察到的结构

```
[In Model, I:+Model,(ModelName), C:Soap, Wrapper and Constants]

[In Service, I:Service,LocalService ; C:ServiceUtil,ServiceWrapper,LocalServiceUtil and LocalServiceWrapper]

[In Persistence, I:Finder(BlogsEntryFinder),Persistence(BlogsEntryPersistence); C:Util(BlogsEntryUtil, BlogsEntryFinderUtil)] 
```

笔记：

```
I --> Interface

C --> Class 
```

# c# - 从 CSV 填充 DataGridView 的一部分

> ID：15218534
> 
> 赞同：0
> 
> 时间：2013-03-05T07:58:10.243
> 
> 标签：c#, csv, datagridview

我想用 CSV 文件中的数据填充前几列

我正在使用的代码：

```
...
   DataTable dataTable = (DataTable)readCsvTable(openFileDialog1.FileName);
   if (dataTable != null) dataGridViewQuestions.DataSource = dataTable; 
...

 private DataTable readCsvTable(string filename) 
    {
        DataTable dtDataSource = new DataTable();

        try
        {
            string[] fileContent = File.ReadAllLines(filename);

            if (fileContent.Count() > 0)
            {
                //Create data table columns
                string[] columns = fileContent[0].Split(',');
                for (int i = 0; i < columns.Count(); i++)
                {
                    dtDataSource.Columns.Add(columns[i]);
                }

                //Add row data
                for (int i = 1; i < fileContent.Count(); i++)
                {
                    string[] rowData = fileContent[i].Split(',');
                    dtDataSource.Rows.Add(rowData);
                }
            }
        }
        catch (Exception ex) {
            ...
            //error msgbox
            ...
            return null;
        }
        return dtDataSource;
    } 
```

问题：

当 AutoGenerateColumns = true - 代码导致附加列（如果文件由同一应用程序导出，则与 DataGridView 中的前几列名称相同）被添加到 gridView 并填充适当的数据。

当 AutoGenerateColumns = false - 上面的代码将正确的行数添加到表中，并且没有添加新列但行是空的。

已经尝试过：

通过列的 HeaderText 和列的控件名称调用 CSV 文件中的列，制作与 DataGridView 列数相同的 CSV 文件和制作列数较少的文件，没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:12:50.200

我刚刚尝试过模拟它，它按预期工作。切换文件时是否抛出异常？

在尝试解析文件之前，您可以尝试将数据源设置为 null，以便查看它是否达到那么远？

```
dataGridViewQuestions.DataSource = null;
DataTable dataTable = readCsvTable(openFileDialog1.FileName);
if (dataTable != null) 
     dataGridViewQuestions.DataSource = dataTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:22:57.613

如果从“AutoGenerateColumns = true”填充的数据使用它。如果前面的列是您的问题，那么您可以为该 datagridview 创建新实例；

```
...
if (dataTable != null)
{
    dataGridViewQuestions = new DataGridView();
    dataGridViewQuestions.DataSource = dataTable;
}
... 
```

# java - 在java（日历）中获取正确的本地时间

> ID：15218542
> 
> 赞同：6
> 
> 时间：2013-03-05T07:58:50.977
> 
> 标签：java, android-calendar

我使用这种方法来获取当地时间：

```
 Calendar cal = Calendar.getInstance();

String time= new SimpleDateFormat("dd MMM yyyy HH:mm:ss").format(cal.getTime()); 
```

我的问题是那天下午这种方法给了我例如“11:15”但它已经是“23:15”了。我希望我的描述不会令人困惑。

我想取回下午的值，例如：12:MM、13:MM、14:MM ..etc 到 23:MM。. .

我应该改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:11:08.753

1.  您确定 PC 上的时间或您用于编程的任何时间是正确的吗？

2.  尝试使用公历：

    ```
    new GregorianCalendar().getTime() 
    ```

3.  确保你有这些导入：

    ```
    import java.util.Date;
    import java.util.GregorianCalendar; 
    ```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:02:20.363

你可以尝试这样的事情：

```
Date date=new Date();    
System.out.println(new SimpleDateFormat("yyyy.MM.dd  HH:mm").format(date)); 
```

输出示例：

> 2013.03.05 22:07

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:00:11.320

我猜你把时区弄混了。使用系统的默认语言环境获取日历：

```
Calendar cal = Calendar.getInstance(Locale.getDefault()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T15:46:32.373

您正在使用`HH`标志。尝试改用`kk`标志。

例如，`kk:mm`代替`HH:mm`.

# python - 一台机器上的多个工作人员执行不同的任务

> ID：15218543
> 
> 赞同：2
> 
> 时间：2013-03-05T07:58:57.670
> 
> 标签：python, celery, distributed

我正在尝试用芹菜构建一个分布式作业执行系统。

当我在一台机器（本地主机）上启动 2 个工作人员时，其中一个用于加法任务`add`，另一个用于减法任务`sub`，然后用于`add.delay()`启动多个加法任务，减法工作人员的终端出现错误：

`[2013-03-05 15:51:18,898: ERROR/MainProcess] Received unregistered task of type 'add_tasks.add'.`

在这个测试中，我启动了 2 个加法任务：一个被加法工作者捕获，另一个被减法工作者捕获，这导致了上面的错误。如何更改配置以使减法工作人员不会捕获第二个加法任务？谢谢。

这是代码：

`add_tasks.py:`

```
celery = Celery('add_tasks', backend='amqp', broker='amqp://guest@localhost//')

@celery.task
def add(x, y):
    sleep(20)
    return x + y 
```

`sub_tasks.py:`

```
celery = Celery('sub_tasks', backend='amqp', broker='amqp://guest@localhost//')

@celery.task
def sub(x, y):
    sleep(10)
    return x - y 
```

我通过 localhost 机器的两个终端启动了工作`celery -A add_tasks worker --loglevel=info -n worker1`人员`celery -A sub_tasks worker --loglevel=info -n worker2`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:52:14.517

最后我发现这个`ROUTER`功能可以解决我的问题。我把我的解决方案放在这里，希望它对其他有同样问题的人有用。

启动工作人员时，我们可以使用`-Q queue`选项来限制工作人员只接受`queue`. 在我的情况下，我使用了`celery -A add_tasks worker --loglevel=info -n worker1 -Q addition`.

另一方面，当开始一个新任务时，我们应该用队列参数明确指出，例如`add.apply_async(queue='addition',priority=0,args=[1,4])`and `sub.apply_async(queue='subtraction',priority=0,args=[1,4])`。那么加法任务将不会被减法工作者接受。

# php - 插入和搜索多个关键字

> ID：15218548
> 
> 赞同：0
> 
> 时间：2013-03-05T07:59:07.680
> 
> 标签：php, mysql

我正计划为当地博物馆的照片库设计一个 PHP MySQL 数据库。

现在让我害怕的一件事是如何为使用多种技术或材料来设计它们的项目实现为单个图像保存多个关键字，例如绘画技术：（衬里，擦拭，涂抹），使用的材料：（油，帆布，）。

理想情况下，我必须使用选择选项列表来为每条记录保存它们。但是，如果我想从同一个列表中保存两个或多个单词，我不能。

你有什么建议我可以考虑吗？

约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:14:16.857

您需要在图像表和关键字表之间实现一对多的关系。**一张**图片可以有**很多**关键词。关键字表中的每一行都需要通过外键引用图像表中的一行。例如：

```
images

id | asset
---------------
1  | image1.png 
2  | image2.png

keywords

id | image_id | keyword   | category
-----------------------------------------------
1  | 1        | liner     | painting techniques
2  | 1        | wiping    | painting techniques
3  | 1        | scumbling | painting techniques
3  | 2        | oil       | material used 
```

或类似的规定。这就是您允许一行（图像）与不同表中的多行（关键字）相关联的方式。

对于提交的每个关键字，您将在关键字表中添加另一行，确保引用关联的图像。

# php - 不使用 move_uploaded_file 上传文件

> ID：15218550
> 
> 赞同：1
> 
> 时间：2013-03-05T07:59:15.520
> 
> 标签：php, ajax

我可以不使用 move_uploaded_file 上传文件吗？

我的步骤：

*   使用通常的“文件”格式上传文件，然后存储临时文件的完整路径`/tmp/phpwcL9F3`。
*   `copy()`对该临时文件执行 AJAX 调用到我的上传文件夹。

我可以这样做吗？

**更新：** 我要实现的逻辑流程（实际上是来自我的客户）：

*   选择文件，按“提交”=> 处理。进程运行时会显示一个对话框。=> AJAX 文件上传。
*   如果文件存在。显示对话框确定，取消。如果按取消，则没有上传任何内容。**如果按 OK，它实际上会上传文件**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:08:54.787

您还应该看看`file_get_content`php 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:39:11.600

我找到了这个问题的解决方案：

1.  实际上将该文件上传到临时位置。
2.  确认后（按 OK），将文件移动到预期位置。
3.  最后删除临时文件。

在第 1 步之后，该文件确实存在，因此它具有名称和路径，因此我们可以检查它的存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:22:23.827

您可以使用此[Fine Uploader](http://fineuploader.com/)这会将文件上传到您使用分块指定的目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:30:02.120

就我而言，我有一个单独的 php 函数来检查文件是否存在（例如 fileExisting()）。当用户单击“上传”按钮时，ajax 将调用它（文件名也将被发送）。当 fileExisting() 返回 true 时，它​​会提示用户是否要覆盖文件。

如果用户选择了 OK，它现在将实际提交表单。

# android - 传输无法发送自动电子邮件

> ID：15218552
> 
> 赞同：0
> 
> 时间：2013-03-05T07:59:20.477
> 
> 标签：android, email, transport

我正在尝试在单击按钮时发送自动电子邮件，为此我从 xml 调用 sendEmail() 方法

```
android:onClick="sendEmail" 
```

和

```
 m = new Mail("blue@gmail.com", "####Password"); 
```

在上面的行中，我正在调用 Mail Class 的邮件构造函数

我的 sendEmail 方法如下-

```
 public void sendEmail(View view){ 
    String[] toArr = {"blue@gmail.com"}; // This is an array, you can add more emails, just separate them with a coma
    m.setTo(toArr); // load array to setTo function
    m.setFrom("blue@gmail.com"); // who is sending the email
    m.setSubject("subject");
    m.setBody("your message goes here");
     System.out.println(" Inside sendmail");
    try {
    //m.addAttachment("/sdcard/myPicture.jpg"); // path to file you want to attach 
    if(m.send()) {
    // success
    Toast.makeText(AutomaticEmailActivity.this, "Email was sent successfully.", Toast.LENGTH_LONG).show();
    } else {
    // failure
    Toast.makeText(AutomaticEmailActivity.this, "Email was not sent.", Toast.LENGTH_LONG).show();
    }
    } catch(Exception e) {
    // some other problem
    Toast.makeText(AutomaticEmailActivity.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show();
    }

    } 
```

我的邮件类别如下 -

```
 package com.kt.email;

      import java.sql.Date;
      import java.util.Properties;

      import javax.activation.CommandMap;
      import javax.activation.DataHandler;
      import javax.activation.DataSource;
      import javax.activation.FileDataSource;
     import javax.activation.MailcapCommandMap;
     import javax.mail.BodyPart;
     import javax.mail.Multipart;
    import javax.mail.PasswordAuthentication;
      import javax.mail.Session;
     import javax.mail.Transport;
    import javax.mail.internet.InternetAddress;
   import javax.mail.internet.MimeBodyPart;
     import javax.mail.internet.MimeMessage;
 import javax.mail.internet.MimeMultipart;

     public class Mail extends javax.mail.Authenticator {
private String _user;
private String _pass;

private String[] _to;
private String _from;
private Properties _properties;

private String _port;
private String _sport;

private String _host;

private String _subject;
private String _body;

private boolean _auth;

private boolean _debuggable;

private Multipart _multipart;

public Mail() {
_host = "smtp.gmail.com"; // default smtp server
_port = "993"; // default smtp port
_sport = "465"; // default socketfactory port
_properties = new Properties();
_user = ""; // username
_pass = ""; // password
_from = ""; // email sent from
_subject = ""; // email subject
_body = ""; // email body  

_debuggable = false; // debug mode on or off - default off
_auth = true; // smtp authentication - default on

_multipart = new MimeMultipart();

// There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added.
MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
CommandMap.setDefaultCommandMap(mc);
}

public Mail(String user, String pass) {
this();

_user = user;
_pass = pass;
}

public boolean send() throws Exception {
    System.out.println("Begning of send method");
Properties props = _setProperties();

if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) {
    System.out.println("inside if of send method");
javax.mail.Session session = Session.getInstance(props, this);

MimeMessage msg = new MimeMessage(session);

msg.setFrom(new InternetAddress(_from));

InternetAddress[] addressTo = new InternetAddress[_to.length];
System.out.println("inside if before for loop of send method");

for (int i = 0; i < _to.length; i++) {
addressTo[i] = new InternetAddress(_to[i]);
System.out.println("inside if inside for loop of send method");

}
msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

msg.setSubject(_subject);
msg.setSentDate(new Date(0));

// setup message body
BodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setText(_body);
System.out.println("inside if after body of send method");

_multipart.addBodyPart(messageBodyPart);
System.out.println("1");

// Put parts in message 
msg.setContent(_multipart);
System.out.println("2");

// send email
 Transport transport = session.getTransport("smtp");
 transport.connect(this._properties.getProperty("mail.smtp.host"), 
         Integer.parseInt(this._properties.getProperty("mail.smtp.port")),
         this._properties.getProperty("mail.smtp.user"),
         this._properties.getProperty("mail.smtp.password"));
    System.out.println("3");

 transport.sendMessage(msg, addressTo); 
//Transport.send(msg);
System.out.println("3");

System.out.println("End of send method");

return true;
} else {
    System.out.println("inside else of send method");

return false;
}

}

public void addAttachment(String filename) throws Exception {
BodyPart messageBodyPart = new MimeBodyPart();
DataSource source = new FileDataSource(filename);
messageBodyPart.setDataHandler(new DataHandler(source));
messageBodyPart.setFileName(filename);

_multipart.addBodyPart(messageBodyPart);
}

//@Override
public PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(_user, _pass);
}

private Properties _setProperties() {
Properties props = new Properties();

props.put("mail.smtp.host", _host);

if(_debuggable) {
props.put("mail.debug", "true");
}

if(_auth) {
props.put("mail.smtp.auth", "true");
}

props.put("mail.smtp.port", _port);
props.put("mail.smtp.socketFactory.port", _sport);
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.socketFactory.fallback", "false");

return props;
}

// the getters and setters
public String getBody() {
return _body;
}

public void setBody(String _body) {
this._body = _body;
}

public void setTo(String[] toArr) {
this._to = toArr;
}

public void setFrom(String string) {
this._from = string;
}

public void setSubject(String string) {
this._subject = string;
}

// more of the getters and setters ….. 
```

在上面的邮件类代码中，我认为邮件问题在下面的代码部分 -

```
 Transport transport = session.getTransport("smtp");
 transport.connect(this._properties.getProperty("mail.smtp.host"), 
         Integer.parseInt(this._properties.getProperty("mail.smtp.port")),
         this._properties.getProperty("mail.smtp.user"),
         this._properties.getProperty("mail.smtp.password"));
    System.out.println("3");

 transport.sendMessage(msg, addressTo); 
```

但是我还没有得到问题在哪里。我没有收到任何 log-cat 输出。请帮我解决这个问题。在此先感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:12:01.583

```
buttonSend.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

          String to = textTo.getText().toString();
          String message = textMessage.getText().toString();

          Intent email = new Intent(Intent.ACTION_SEND);
          email.putExtra(Intent.EXTRA_EMAIL, new String[]{ to});
          email.putExtra(Intent.EXTRA_TEXT, message);

          //need this to prompts email client only
          email.setType("message/rfc822");
          myoncreate1();
          startActivity(Intent.createChooser(email, "Choose an Email client :"));

        }

    }); 
```

# wordpress - 如何在下拉菜单中显示 wordpress 标签？

> ID：15218554
> 
> 赞同：1
> 
> 时间：2013-03-05T07:59:26.903
> 
> 标签：wordpress, drop-down-menu, tags, taxonomy

[此页面](http://www.wprecipes.com/how-to-create-a-dropdown-menu-of-tags)的代码片段是：

```
<h2><?php _e('Posts by Tags'); ?></h2>
<form action="<?php bloginfo('url'); ?>/" method="get">
<div>
<?php
$select = wp_dropdown_categories('taxonomy=post_tag&show_option_none=Select tag&show_count=1&orderby=name&echo=0');
$select = preg_replace("#<select([^>]*)>#", "<select$1 onchange='return this.form.submit()'>", $select);
echo $select;
?>
<noscript><div><input type="submit" value="View" /></div></noscript>
</div></form> 
```

当我尝试实现它并从下拉列表中选择一个选项时，它会转到一个页面网址，其格式为：

`http://sitename.com/?cat=5`

然后显示 404 错误。

所以我的问题是：

我如何才能选择链接到具有关联标签而不是类别的帖子的选项？

谢谢你。

**更新：**

我的解决方案是安装 wordpress[分类下拉小部件](http://wordpress.org/extend/plugins/tag-dropdown-widget)。

# java - 为这个 if else- 语句提供一个更优雅的方式

> ID：15218555
> 
> 赞同：-1
> 
> 时间：2013-03-05T07:59:29.073
> 
> 标签：java, if-statement

这看起来很笨拙，我知道有一种更优雅的方式，但我不知道它是如何调用的：

```
if (a.isSelected()) {
    a.setSelected(false);
}

else {
    a.setSelected(true);
} 
```

我怎样才能让这个更瘦？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:00:49.143

你可以这样做：

```
a.setSelected(!a.isSelected()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:00:50.210

尝试以下操作：

```
a.setSelected(!a.isSelected()); 
```

与`!`你可以协商你的`boolean`表达。所以`true`变成`false`了，反之亦然，就像你想在你的代码中实现的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:05:32.243

您应该分析您正在执行的条件和步骤。

在你的情况下：

```
Condition    Output
true         false
false        true 
```

这将向您表明您所做的一切都是`!(condition)`. 所以这应该给你的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:01:35.247

怎么样

```
a.setSelected(!a.isSelected()); 
```

# xpages - NotesMIMEHeader sendTo 字段中的 UTF-8

> ID：15218556
> 
> 赞同：2
> 
> 时间：2013-03-05T07:59:33.393
> 
> 标签：xpages, lotus-notes, xpages-ssjs

我使用 xSnippet 中的这个脚本通过 SSJS [http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-html-mails-in-ssjs-using-mime](http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-html-mails-in-ssjs-using-mime)发送电子邮件 它工作得很好，但是当我有带有特殊字符的电子邮件地址，它不起作用。

有没有为“to”mimeHeader 设置字符集的解决方案？

```
var mimeRoot:NotesMIMEEntity = doc.createMIMEEntity("Body");
var mimeHeader:NotesMIMEHeader;

//set to
if (this._to.length>0) {
  mimeHeader = mimeRoot.createHeader("To");
  mimeHeader.setHeaderVal( this._to.join(","));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:10:51.393

尝试使用 addValText() 文本方法代替 setHeaderVal，该方法接受两个参数。第一个是字符串值，可以是UTF-8，第二个是字符集——即“UTF-8”。当然，您需要确保您的字符串确实是 UTF-8。（我对 SSJS 不熟悉，所以我不知道它是否在内部将您的`this._to.join(",")`价值表示为 UTF-8。）

有关此内容的更多信息，请参阅[NotesMIMEHeader 类的文档。](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_NOTESMIMEHEADER_CLASS.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:23:38.310

据我所知，邮件标头必须仅包含 US-ASCII 字符（此信息可在 MIME 规范中找到）。必须对带有其他字符的标头进行编码。看起来多米诺骨牌默认情况下不对其进行编码。

您可以尝试使用 javax.mail.internet.MimeUtility.encodeText 但这可能需要将额外的 jar 放入项目（JavaMail）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T06:11:03.760

由于类似的问题，我刚刚对此进行了测试，@W_K 正确的是 MIME 标头不能是 UTF-8。我最终这样做了，这适用于我以前遇到问题的情况：

确保您对稍后要添加到 TO/CC/BCC MIME 标头的电子邮件地址进行 MIME 编码。我将此添加到例如[Tony McGuckin 的 emailBean](http://openntf.org/XSnippets.nsf/snippet.xsp?id=emailbean-send-dominodocument-html-emails-cw-embedded-images-attachments-custom-headerfooter)的 setSendTo() 方法中：

```
import com.sun.xml.internal.messaging.saaj.packaging.mime.internet.MimeUtility;

....

public void setSendTo(final String sendTo) {
    try {
        this.sendTo.add(MimeUtility.encodeText(sendTo.replace("[", "").replace("]", ""), "utf-8", null));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
} 
```

然后，我使用 setHeaderVal() 方法添加所需的 MIME 标头，但我不使用 UTF-8 编码，而是使用默认编码（其中 getSendTo() 只返回已经 MIME 编码的字符串）：

```
emailHeader = emailRoot.createHeader("To");
emailHeader.addValText(getSendTo()); 
```

# silverstripe - SilverStripe 3：在 CMS 之外加载/创建页面

> ID：15218557
> 
> 赞同：0
> 
> 时间：2013-03-05T07:59:33.817
> 
> 标签：silverstripe

是否可以在 cms 之外创建页面？

例如：

我想使用 jquery .load() 将段加载到当前页面中。

是否可以在主题文件夹中的某处创建一个 html 或 .ss 文件，例如：self-contained-page.html 所以如果我然后访问 www.domain.com/self-contained-paged.html 我将能够访问这个页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:11:33.437

虽然您当然可以提供静态文件，但您也可以“ajaxify”页面的某些部分。不确定这是否是您想要做的，但以防其他人试图做类似的事情。

虽然您可以使用一些花哨的工具，例如[pjax](https://github.com/defunkt/jquery-pjax)或[history.js](https://gist.github.com/balupton/854622)，但您也可以手动完成。我最近使用 SS 2.4 完成了此操作，但 SS 3 应该非常相似：

在您的控制器中，添加一个公共函数，以便您可以通过 /yourpage/load （或任何您想调用的名称）访问它：

```
 public function load(){
       return $this->renderWith(array('AjaxLoad'));
   } 
```

在您的模板/布局中添加一个文件 AjaxLoad.ss。

*   如果您只想通过 jQuery 提供该页面`.load()`，只需在文件中添加内容即可。
*   如果您想在常规页面上使用该内容并希望将其替换为 ajaxified 版本，请在常规页面和`<% include PageSnippet %>`ajaxified 页面上同时使用。然后只需在*templates/Include/PageSnippet.ss*中定义您的内容。

[您可以在http://www.contentaward.at/content-lab-vienna/608#details](http://www.contentaward.at/content-lab-vienna/608#details)看到它的实际效果（单击页面底部的小图像）。希望这可以说清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:34:36.993

从您的 silverstripe 安装中的任何位置提供静态 html 文件都没有问题，只需注意始终将文件扩展名添加到您的 url，否则 silverstripe 的 url 路由（使用 mod_rewrite，请参阅 .htaccess 文件）将启动。

另请注意始终使用文件的完整路径，因此如果您将文件放在“themes/mytheme/test.html”中，则 url 将是“ [http://www.domain.com/themes/mytheme/test.html”。 html](http://www.domain.com/themes/mytheme/test.html) '

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:36:15.163

您当然可以像使用 css 文件 fe 一样引用主题文件夹中的 html 文件：

> www.domain.com/themes/yourtheme/self-contained-paged.html

如果您不介意将其放在主题文件夹中，您也可以将其放入根目录。
或者您可以修改您的 .htaccess 并应用一些 mod_rewrite 或重定向规则以指向主题文件夹。

如果您想使用 .ss 文件，您可能必须使用 CMS 页面。

# windows-phone-7 - 更改 WMAppManifest.xml 中的默认语言

> ID：15218564
> 
> 赞同：0
> 
> 时间：2013-03-05T08:00:15.733
> 
> 标签：windows-phone-7, windows-phone, phonegap-build

我有一个 XAP 文件，但它没有指定语言，并且应用程序是荷兰语。XAP 由 PhoneGap Build 构建。

我下载了 xap 文件，解压缩并更改了 WMAppManifest.xml 文件。

我在规范中添加了：

```
<DefaultLanguage xmlns="" code="nl-NL" /> 
```

就像它说的那样：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769509 (v=vs.105).aspx#BKMK_DEFAULTLANGUAGEandLANGUAGESelements](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769509(v=vs.105).aspx#BKMK_DEFAULTLANGUAGEandLANGUAGESelements)

但是在上传 xap 文件后，它被拒绝了，因为那里不允许使用 DefaultLanguage。

已编辑；添加了完整的文件：

```
 <?xml version='1.0' encoding='UTF-8'?>
    <Deployment xmlns="http://schemas.microsoft.com/windowsphone/2009/deployment"    AppPlatformVersion="7.1">
    <DefaultLanguage xmlns="" code="nl-NL" />

    <App ProductID="{01bc12cd-49ae-bffa-004d-858ebc07ee7c}" RuntimeType="Silverlight"  Title="Gaandeweg" Version="1.0.2.0" Publisher="Bart Lamot" xmlns="" Genre="apps.normal"  Author="Bart Lamot" Description="Dit...">

<IconPath IsRelative="true" IsResource="false">ApplicationIcon.png</IconPath>
<Capabilities>
  <Capability Name="ID_CAP_CONTACTS"/>
  <Capability Name="ID_CAP_IDENTITY_DEVICE"/>
  <Capability Name="ID_CAP_ISV_CAMERA"/>
  <Capability Name="ID_CAP_LOCATION"/>
  <Capability Name="ID_CAP_MICROPHONE"/>
  <Capability Name="ID_CAP_NETWORKING"/>
  <Capability Name="ID_HW_FRONTCAMERA"/>
  <Capability Name="ID_CAP_WEBBROWSERCOMPONENT"/>
</Capabilities>

<Tasks>
  <DefaultTask NavigationPage="MainPage.xaml" Name="_default"/>
</Tasks>
<Tokens>
  <PrimaryToken TaskName="_default" TokenID="Cordova_1._5._0_Starter1Token">
    <TemplateType5>
      <BackgroundImageURI IsRelative="true" IsResource="false">Background.png</BackgroundImageURI>
      <Count>0</Count>
      <Title>Cordova_1._5._0_Starter1</Title>
    </TemplateType5>
  </PrimaryToken>
 </Tokens>
 </App>
 </Deployment>

<!-- WPSDK Version 7.1.7720.0 --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:21:53.190

由于您正在使用 Windows Phone 7.1 应用程序，`DefaultLanguage`因此 WMAppManifest.xml 中不支持元素。相反，您需要`[assembly: NeutralResourcesLanguageAttribute("en-US")]`在**AssemblyInfo.cs**中使用。

查看 XML 名称空间 - 对于 7.1，您有`http://schemas.microsoft.com/windowsphone/2009/deployment`。要使**DefaultLanguage**正常工作，您需要`http://schemas.microsoft.com/windowsphone/2012/deployment`（Windows Phone 8 应用程序）。

# ios - iphone 如何将今天的日期和时间转换为 GMTFormat（10 位数字）

> ID：15218565
> 
> 赞同：0
> 
> 时间：2013-03-05T08:00:16.620
> 
> 标签：ios

我有语言环境日期和时间我正在使用以下代码

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"d MMM yyyy hh:mm:ss a"];
NSString *currentTime = [dateFormatter stringFromDate:today];
NSLog(@"current time:%@",currentTime); 
```

在这里我得到了本地时间

现在我将本地时间转换为格林威治标准时间我正在使用以下代码

```
NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
[dateFormatter1 setDateFormat:@"hh:mm:ss  MM dd yyyy "];
NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
[dateFormatter1 setTimeZone:sourceTimeZone];
NSDate *dateFromString = [dateFormatter dateFromString:currentTime];
NSDate *dateFromString = [dateFormatter dateFromString:currentTime]; 
```

现在我的问题是我想将此 GMT 日期转换为 10 位格式，如 1362468453

为此我正在使用

```
[dateFormatter setDateFormat:@"d MMM yyyy hh:mm:ss a"]; 
```

如何以十位数格式获取 GMT 时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:59:34.750

使用`timeIntervalSince1970`函数获取您的日期`epoch time`。

```
NSLog(@"Epoch Time : %f", [dateFromString timeIntervalSince1970]); 
```

检查这个[NSDate 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSince1970)

# python - 如何捕获所有视图中的所有错误？

> ID：15218566
> 
> 赞同：2
> 
> 时间：2013-03-05T08:00:19.247
> 
> 标签：python, django, exception-handling

我知道我们可以使用 try 和 except 函数来捕获错误。但是每天我监视哨兵，系统总是在任何视图中出现异常。像往常一样，我尝试使用除以捕获视图中的错误。

我的问题是。是否有可能在一个函数中从任何视图中捕获所有错误？然后用户将重定向到另一个页面。最好的地方在哪里？我正在考虑中间件，但我对此一无所知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:07:13.913

是的，可以从任何视图处理所有异常。尝试谷歌搜索“django 中间件异常”，你会发现很多解决方案。

# sql - How to select 1 record and the associated records?

> ID：15218576
> 
> 赞同：-2
> 
> 时间：2013-03-05T08:00:49.230
> 
> 标签：sql

I work with a publishing database and we keep records of books. Books can have multiple authors. We maintain a table which holds records of the authorship of books. I need a SQL Query to select an author and then also select the other authors who worked with them on each of their books.

The Authorship table looks something like this:

```
+---------+--------+
| Author  | BookID |
+---------+--------+
|    1    |    1   |
|    2    |    1   |
|    1    |    2   |
|    2    |    2   |
|    3    |    2   |
|    4    |    2   |
|    5    |    3   |
|    5    |    4   |
+---------+--------+ 
```

So if I selected Author 1 I want to see the authors they worked with. The result would return me authors 2,3, and 4.

The idea here is that I can generate a report for an Author that shows who they have collaborated with in their publishing career.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:05:40.190

```
select a1.Author
from Authorship a
join Authorship a1 on a.BookID=a1.BookID
where a.Author=1

If you want to exclude the current author:

select a1.Author
from Authorship a
join Authorship a1 on a.BookID=a1.BookID
where a.Author=1 and a1.Author!=1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:06:13.023

Try this:

```
SELECT author
FROM AuthorsBooks 
WHERE bookid IN(SELECT bookid
                FROM AuthorsBooks
                WHERE author = 1); 
```

## [SQL Fiddle Demo](http://www.sqlfiddle.com/#!2/89f1f/5)

This will give you:

```
| AUTHOR |
----------
|      1 |
|      2 |
|      3 |
|      4 | 
```

**Or:** using `JOIN`:

```
SELECT DISTINCT b1.author
FROM AuthorsBooks AS b1
INNER JOIN AuthorsBooks AS b2  ON b1.bookid = b2.bookid
WHERE b2.author = 1; 
```

[**SQL Fiddle Demo**](http://www.sqlfiddle.com/#!2/89f1f/12)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:24:03.817

> Here is what you can do.

```
SELECT DISTINCT Author  
FROM Authorship 
WHERE BookID IN(  
            SELECT BookID   
            FROM Authorship  
            WHERE Author = 1  
           ) 
AND Author <> 1 
```

> [SQL FIDDLE DEMO](http://www.sqlfiddle.com/#!3/2ae6e/11)

# jsf-2 - Primefaces弹出对话框不起作用

> ID：15218579
> 
> 赞同：1
> 
> 时间：2013-03-05T08:00:53.660
> 
> 标签：jsf-2, primefaces

我有一个 jsf 页面，其中有一个弹出按钮，可打开以下对话框弹出窗口：

```
</h:form>
<p:dialog id="dialog" header="Select different user"
        widgetVar="dlg" appendToBody="true">

    <h:form id="form23">
        <h:panelGrid columns="2" cellpadding="5">
            <h:outputLabel for="username" value="Username:" />
            <p:inputText value="#{loginBean.username}" 
                id="username" required="true" label="username" />

            <h:outputLabel for="password" value="Password:" />
            <h:inputSecret value="#{loginBean.password}" 
                id="password" required="true" label="password" />

            <f:facet name="footer">
                <p:commandButton id="loginButton" value="Login" />
            </f:facet>
        </h:panelGrid>
    </h:form>
</h:form> 
```

但是，它不是作为弹出窗口打开，而是显示在页面本身之外。该对话框位于主窗体之外。帮助！！

* * *

我试过了，但同样的问题仍然存在..下面是我修改后的代码..

```
<h:form id="create-ticket">
    <p:dialog id="dialog" header="Select different user" widgetVar="dlg" appendToBody="true">

    <h:panelGrid columns="2" cellpadding="5">
        <h:outputLabel for="username" value="Username:" />
        <p:inputText value="#{loginBean.username}" 
                id="username" required="true" label="username" />

        <h:outputLabel for="password" value="Password:" />
        <h:inputSecret value="#{loginBean.password}" 
                id="password" required="true" label="password" />

        <f:facet name="footer">
            <p:commandButton id="loginButton" value="Login" 
                />
        </f:facet>
    </h:panelGrid>

 </p:dialog>
     <h:panelGroup>
     <h:outputLabel value="#{I18N['Create_Ticket_for_other_users']}" styleClass="atf-header"></h:outputLabel>
    </h:panelGroup>
    <h:panelGroup id="search_section" layout="block"
       styleClass="atf-content-area atf-separarot-botton">   <!-- This is the section where we get the grey background -->
         <h:panelGroup id="input_search_section" styleClass="">
            <h:outputText id="name" value="Siddharth Mishra"    
            labelStyleClass="atf-label">
            </h:outputText>
        </h:panelGroup>
    <h:panelGroup styleClass="atf-right atf-inline-block">
        <p:commandButton id="btn_search" value="select different user"
            styleClass="atf-button-search" onclick="dlg.show();" type="button"
            >

        </p:commandButton>
    </h:panelGroup>

</h:panelGroup> 
```

现在我只有一个表单，您可以看到弹出对话框部分+在 h:panelgroup 下调用弹出窗口的按钮。附加是表单当前外观的图像提前谢谢![在此处输入图像描述](../Images/4c8174ac09a036ef9c6a812a13aa5987.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:56:08.840

您需要重组代码。

*不要将表格嵌套在其他表格中。

*您没有 p:dialog 的结束标签。

```
<h:form>    
    <p:dialog id="dialog" header="Select different user"
            widgetVar="dlg" appendToBody="true">

          //Content ex inputtext

    </p:dialog>

<p:commandButton value="Show Dialog" onclick="dlg.show();" type="button" />  
</h:form> 
```

# php - HTML 表单发布操作

> ID：15218582
> 
> 赞同：1
> 
> 时间：2013-03-05T08:01:03.343
> 
> 标签：php, html

我有一个表格

```
<form name="frmRegCo" method="post" action="business_processor.php"> 
```

business_processor.php 将数据插入 mysql db 我想要的是，当我单击提交时，页面不应重定向到 business_processor.php 并保持在同一个表单窗口上，但必须将数据发送到 mysql DB 并且必须弹出一个框似乎数据发送成功，并且在弹出框后表单字段为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:05:11.717

这就是 AJAX 的出现。它在后台发送数据而不更改当前页面。

我建议看一下[jQuery AJAX API](http://api.jquery.com/jQuery.ajax/)，也许还可以看[一个简短的教程](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:05:47.603

你有两种方法。

1) 将 PHP 代码放在同一个文档中。

2) 使用 AJAX。[jQuery 阿贾克斯](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:06:01.190

使用[jquery ajax](http://api.jquery.com/jQuery.ajax/)：示例：

```
 $.ajax({
                    type: "GET",
                    url: business_processor.php,
                    async: true,
                    success: function(response){
                        if(response != '') {
                             //popup box message
                        } 
                    }
                }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:03:53.353

为此，您只需执行以下操作

```
<form name="frmRegCo" method="post" action=""> 
```

只需将您的`business_processor.php`代码复制到当前文件即可。

**或者**

采用`AJAX`

```
$.ajax({
    type: "GET",
    url: business_processor.php,
    async: true,
    success: function(response){
        if(response != '') {
            //popup box message
        } 
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:04:28.930

如果您想保留在同一个表单窗口中，请尝试此操作。在页面顶部定义此代码。

```
<?php
     if($_POST['submit'] == 'submit')
     {
         //insert query here
     }
?>

<form name="frmRegCo" method="post" action="">
     <input type="submit" name="submit" value="submit"/>
</form> 
```

**或者**你可以`AJAX`用来实现你想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T08:04:37.740

您可以使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)来做到这一点。JQuery 是一个很好的 java 脚本库，可以帮助您进行跨浏览器的功能开发。请参阅[jquery ajax](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T08:06:06.697

如果表单在同一页面内（即 business_processor.php），则只需声明如下表单，

```
<form action="" method = "" ></form> 
```

否则，如果不是同一页面，则添加下面的代码`business_processor.php`

```
form_process code
header('location: yourFormPage.php');
exit; 
```

# domain-driven-design - DDD 中的工厂、服务、存储库

> ID：15218583
> 
> 赞同：3
> 
> 时间：2013-03-05T08:01:20.113
> 
> 标签：domain-driven-design, factory-pattern, ddd-repositories, ddd-service

我对**DDD中的****工厂**、**存储库**和**服务**有一些疑问。我有以下实体：文件夹、文件、FileData。

 **在我看来，“文件夹”是一个**聚合根**，应该负责创建 File 和 FileData 对象。

所以我的第一个问题是我应该使用**工厂**来创建这个聚合还是由**存储库**决定？此时我有 2 个存储库，一个用于文件夹，另一个用于文件，但在我看来，我应该将它们合并在一起。以下代码片段显示了我的**Folder Repository**，它位于我的基础设施层中：

```
public class FolderRepository : IFolderRepository
{
    #region Fields

    private readonly IFolderContext _context;
    private readonly IUnitOfWork _unitOfWork;

    #endregion

    #region Constructor

    public FolderRepository(IUnitOfWork unitOfWork)
    {
        _unitOfWork = unitOfWork;
        _context = _unitOfWork.Context as IFolderContext;
    }

    #endregion

    public IUnitOfWork UnitOfWork
    {
        get { return _unitOfWork; }
    }

    public IQueryable<Folder> All
    {
        get { return _context.Folders; }
    }

    public Folder Find(Guid id)
    {
        return _context.Folders.Find(id);
    }

    public void InsertGraph(Folder entity)
    {
        _context.Folders.Add(entity);
    }

    public void InsertOrUpdate(Folder entity)
    {
        if (entity.Id == Guid.Empty)
        {
            _context.SetAdd(entity);
        }
        else
        {
            _context.SetModified(entity);
        }
    }

    public bool Delete(Guid id)
    {
        var folder = this.Find(id) ?? _context.Folders.Find(id);
        _context.Folders.Remove(folder);

        return folder == null;
    }

    public int AmountOfFilesIncluded(Folder folder)
    {
        throw new NotImplementedException();
        //return folder.Files.Count();
    }

    public void Dispose()
    {
        _context.Dispose();
    }
} 
```

接下来我在我的**应用层**创建了一个服务，称为“IoService”。我对服务的位置有疑问。是否应该将其移至**域层**？

```
public class IoService : IIoService
{
    #region Fields

    private readonly IFolderRepository _folderRepository;
    private readonly IFileRepository _fileRepository;
    private readonly IUserReferenceRepository _userReferenceRepository;

    #endregion

    #region Constructor

    public IoService(IFolderRepository folderRepository, IFileRepository fileRepository, IUserReferenceRepository userReferenceRepository)
    {
        if(folderRepository == null)
            throw new NullReferenceException("folderRepository");
        if(fileRepository == null)
            throw new NullReferenceException("fileRepository");
        if (userReferenceRepository == null)
            throw new NullReferenceException("userReferenceRepository");

        _folderRepository = folderRepository;
        _fileRepository = fileRepository;
        _userReferenceRepository = userReferenceRepository;
    }

    #endregion

    #region Folder Methods

    /// <summary>
    /// Create a new 'Folder'
    /// </summary>
    /// <param name="userReference"></param>
    /// <param name="name"></param>
    /// <param name="parentFolder"></param>
    /// <param name="userIds">The given users represent who have access to the folder</param>
    /// <param name="keywords"></param>
    /// <param name="share"></param>
    public void AddFolder(UserReference userReference, string name, Folder parentFolder = null, IList<Guid> userIds = null, IEnumerable<string> keywords = null, bool share = false)
    {
        var userReferenceList = new List<UserReference> { userReference };

        if (userIds != null && userIds.Any())
        {
            userReferenceList.AddRange(userIds.Select(id => _userReferenceRepository.Find(id)));
        }

        var folder = new Folder
        {
            Name = name,
            ParentFolder = parentFolder,
            Shared = share,
            Deleted = false,
            CreatedBy = userReference,
            UserReferences = userReferenceList
        };

        if (keywords != null)
        {
            folder.Keywords = keywords.Select(keyword =>
                new Keyword
                {
                    Folder = folder,
                    Type = "web",
                    Value = keyword,
                }).ToList();
        }

        //insert into repository
        _folderRepository.InsertOrUpdate(folder);

        //save
        _folderRepository.UnitOfWork.Save();
    }

    /// <summary>
    /// Get 'Folder' by it's id
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    public Folder GetFolder(Guid id)
    {
        return _folderRepository.Find(id);
    }

    #endregion

    #region File Methods

    /// <summary>
    /// Add a new 'File'
    /// </summary>
    /// <param name="userReference"></param>
    /// <param name="folder"></param>
    /// <param name="data"></param>
    /// <param name="name"></param>
    /// <param name="title"></param>
    /// <param name="keywords"></param>
    /// <param name="shared"></param>
    public void AddFile(UserReference userReference, Folder folder, FileData data, string name, string title = "", IEnumerable<string> keywords = null, bool shared = false)
    {
        var file = new File
        {
            Name = name,
            Folder = folder,
            FileData = data,
            CreatedBy = userReference,
            Type = data.Type
        };

        if (keywords != null)
        {
            file.Keywords = keywords.Select(keyword =>
                new Keyword
                {
                    File = file,
                    Type = "web",
                    Value = keyword,
                }).ToList();
        }

        folder.Files.Add(file);
        folder.Updated = DateTime.UtcNow;

        _folderRepository.InsertOrUpdate(folder);

        //save
        _folderRepository.UnitOfWork.Save();
    }

    /// <summary>
    /// Get 'File' by it's id
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    public File GetFile(Guid id)
    {
        return _fileRepository.Find(id);
    }

    #endregion
} 
```

总结一下：我是否应该使用该服务来创建文件夹对象。或者服务应该只使用一个**工厂**，它负责创建对象并将创建的对象发送到**存储库**？那么服务中的**依赖注入呢，我应该从 UI 层使用****Unity**等 IOC 容器注入我的服务，还是应该只对服务中的依赖项进行硬编码？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:37:35.980

> 所以我的第一个问题是我应该使用工厂来创建这个聚合还是由存储库决定？

工厂负责创建，而存储库负责持久性。重构后，存储库将有效地创建实例。然而，这个创建过程通常是通过反射完成的，并且不会通过工厂来防止只在创建时发生的初始化。

> 此时我有 2 个存储库，一个用于文件夹，另一个用于文件，但在我看来，我应该将它们合并在一起。

在 DDD 中，每个聚合都有一个存储库。该存储库将负责持久化作为聚合一部分的所有实体和值对象。

> 我对服务的位置有疑问。是否应该移到领域层？

IMO，可以将应用程序服务放置到域层中，因为它已经充当了外观，并且将它们保持在一起将带来凝聚力的好处。对此的一种想法`IoService`是，诸如`AddFile`通常由聚合身份而不是实例来参数化的方法。由于应用程序服务已经引用了一个存储库，它可以根据需要加载适当的聚合。否则，调用代码将负责调用存储库。

> 我是否应该使用该服务来创建文件夹对象。或者服务应该只使用一个工厂，它负责创建对象并将创建的对象发送到存储库？

`IoService`除了前面关于通过身份而不是实例进行参数化的评论外，看起来还不错。

> 那么服务中的依赖注入呢，我应该从 UI 层使用 Unity 等 IOC 容器注入我的服务，还是应该只对服务中的依赖项进行硬编码？

这是一个偏好问题。如果您可以从使用 IoC 容器中受益，请使用它。但是，不要仅仅为了使用它而使用它。您已经在进行依赖注入，只是没有花哨的 IoC 容器。

**样本**

```
class File
{
    public File(string name, Folder folder, FileData data,  UserReference createdBy, IEnumerable<string> keywords = null)
    {
        //...
    }
}

...

class Folder
{
    public File AddFile(string name, FileData data, UserReference createdBy, IEnumerable<string> keywords = null)
    {
        var file = new File(name, this, data, createdBy, keywords)
        this.Files.Add(file);
        this.Updated = DateTime.UtcNow;
        return file;
    }
}

...

public void AddFile(UserReference userReference, Guid folderId, FileData data, string name, string title = "", IEnumerable<string> keywords = null, bool shared = false)
{
    var folder = _folderRepository.Find(folderId);
    if (folder == null)
        throw new Exception();

    folder.AddFile(name, data, keywords);

    _folderRepository.InsertOrUpdate(folder);
    _folderRepository.UnitOfWork.Save();
} 
```

在此示例中，更多的行为被委托给文件夹聚合和文件实体。应用程序服务简单地调用聚合上的适当方法。**

# c# - 更改应用程序语言时更改文本框输入语言

> ID：15218595
> 
> 赞同：0
> 
> 时间：2013-03-05T08:01:56.210
> 
> 标签：c#, windows-8

我正在开发一个在应用程序中提供更改语言选项的 Metro 应用程序。我希望在更改语言文本框输入语言时也得到更改。它不应该依赖于系统语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T08:16:52.850

我使用这些代码： 首先你必须找到你想要的文化语言的名称。方法“GetInutLanguageByName”将返回您请求的语言然后您将检查您是否安装了请求的语言，如果是则返回请求的语言。然后很容易更改输入语言...

```
private static InputLanguage GetInutLanguageByName(string layOut)
    {
        foreach (InputLanguage lng in InputLanguage.InstalledInputLanguages)
        {
            if (lng.Culture.DisplayName == layOut)
            {
                return lng;
            }
        }
        return null;

    }

private void SetKeyboardLayout(InputLanguage Layout)
    {
        InputLanguage.CurrentInputLanguage = Layout;
    }

private void FirstNameTextBox_Enter(object sender, EventArgs e)
    {

        SetKeyboardLayout(GetInutLanguageByName("Persian"));

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T13:41:28.527

首先，您需要确保您想要的语言已安装在操作系统中，并且它在 INSTALLED INPUT LANGUAGES 列表中（检查控制面板中语言和区域设置下的语言栏）。如果它不在语言栏中，添加它.. 例如，您要将应用程序语言更改为“FRENCH”.. 您需要为您要在应用程序中更改的每种语言创建一个新资源文件，然后更改当前线程的文化属性.. 您熟悉吗资源文件（.resx）和文化信息类？？

# wordpress - Wordpress query_posts 为非管理员用户生成奇怪的 SQL 查询

> ID：15218598
> 
> 赞同：0
> 
> 时间：2013-03-05T08:02:06.610
> 
> 标签：wordpress

我正在使用 query_posts 获取特定作者的第 2 页，我的查询是

```
query_posts(array(
        'author' => $author_id,
        'paged' => $paged,
        'posts_per_page' => $posts_per_page,
        'post_status' => 'publish',
    )); 
```

对于管理员来说，它可以正常生成以下 SQL 查询：

```
SELECT SQL_CALC_FOUND_ROWS  wp_posts.ID FROM wp_posts  WHERE 1=1  AND (wp_posts.post_author = 13) AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'publish')  ORDER BY wp_posts.post_date DESC LIMIT 10, 10" 
```

但是对于任何其他未登录或未登录的用户，不会执行 SQL 查询并返回 null 生成以下查询：

```
SELECT SQL_CALC_FOUND_ROWS  wp_posts.* FROM wp_posts  WHERE 1=1  AND (wp_posts.post_author = 13) AND wp_posts.post_type = 'post' AND (( (  (  (  ( 1=2 )  )  )  ) AND wp_posts.post_status = 'publish' ))  ORDER BY wp_posts.post_date DESC LIMIT 20, 10" 
```

[“帖子”]=>

# android - 将 Android 风格与我自己的风格混合

> ID：15218600
> 
> 赞同：1
> 
> 时间：2013-03-05T08:02:10.023
> 
> 标签：android, xml, styles, xamarin.android

这就是我的 .axml 的样子：

```
 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    android:textSize="18dp"
    android:text="Kommentare"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

如您所见，我正在访问在样式主题 ( `?android:attr/listSeparatorTextViewStyle`)中定义的样式属性

现在我想分开我自己的风格：

```
 <style name="TextViewTitleBar" parent="android:Theme">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:paddingTop">2dip</item>
    <item name="android:paddingBottom">2dip</item>
    <item name="android:paddingLeft">5dip</item>
    <item name="android:textSize">18dp</item>
 </style> 
```

并像这样使用它：

`style="@style/TextViewTitleBar"`在我的 .axml 中，不丢失`?`开头的 android 定义的样式。

如何组合/混合这些风格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:34:38.033

您可以将父级设置为

```
@android:attr/listSeparatorTextViewStyle 
```

# iphone - 在 Xcode 中为 iOS5 和 iOS6 集成 Facebook SSO 时出错

> ID：15218601
> 
> 赞同：1
> 
> 时间：2013-03-05T08:02:18.490
> 
> 标签：iphone, ios, xcode, facebook

我正在开发我在过去 2 年完成的应用程序，并且我还使用 Facebook 集成来共享文本。现在客户想要处理这个应用程序的新版本，在新版本中，我必须在 iOS5 和 iOS6 上使用 Facebook 集成 SSO，在 xcode 4.6 中，我成功地在示例应用程序中进行了 Facebook 集成。但是，当我尝试在项目中做同样的事情（添加框架和少数 facebook 代表）时，它在添加框架后会产生很少的错误。

**框架是：**

*   社会框架
*   Accounts.framework
*   libsqlite3.0.dylib
*   FacebookSDK.framework
*   AddSupport.framework

**错误是：**

> /Applications/Xcode 4.6.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/System/Library/Frameworks/Accounts.framework/Headers/ACAccount.h:23：错误：预期“弱”之前的属性属性
> 
> /Applications/Xcode 4.6.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/System/Library/Frameworks/Accounts.framework/Headers/ACAccount.h:28：错误：预期“强”之前的属性属性
> 
> /Volumes/...../Code/code/iphone/Greggs/FacebookSDK.framework/Headers/FBRequest.h:70：错误：类“FBRequest”的重复接口声明
> 
> /Volumes/...../Code/code/iphone/Greggs/FacebookSDK.framework/Headers/FBRequest.h:83：错误：重新定义'struct FBRequest'
> 
> /Volumes/...../Code/code/iphone/Greggs/GreggsAppDelegate.m:126: 错误：预期 ':' 在 '.' 之前 令牌
> 
> /Volumes/...../Code/code/iphone/Greggs/GreggsAppDelegate.m:126：被早期的错误弄糊涂了

我在某处读到它的旧编译器问题，我正在为当前项目使用它，现在我打开最新的 xcode 4.6。但我找不到任何健康的解决方案。请帮助我。这对我来说会很棒。提前致谢。

# android-intent - 如何在不使用任何按钮的情况下在android中发送自动消息

> ID：15218602
> 
> 赞同：0
> 
> 时间：2013-03-05T08:02:20.330
> 
> 标签：android-intent

当我们打开或调用应用程序本身时，你能帮我从安卓应用程序自动发送短信吗....我不喜欢使用点击按钮将相同的短信发送到另一部手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:10:52.947

您的问题包括两部分：

1.  应用启动时调用代码
2.  发送短信。

首先，要在应用启动时调用代码，请使用 onCreate()、onResume() 或 onStart()，例如：

```
@Override
protected void onStart() {
  super.onStart();

  // code here
} 
```

使用哪一个取决于您和您的要求。请阅读[此说明](http://developer.android.com/reference/android/app/Activity.html)以获取更多信息。

二是发送短信。这个很简单：

```
SmsManager smsMgr = SmsManager.getDefault();
smsMgr.sendTextMessage(phone_number, null, text, null, null); 
```

请找到 SmsManager.sendTextMessage() 文档 [这里]( [http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#sendTextMessage(java.lang.String](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#sendTextMessage(java.lang.String) , java.lang.String, java. lang.String，android.app.PendingIntent，android.app.PendingIntent))。

因此，您的完整代码可能如下所示：

```
@Override
protected void onStart() {
  super.onStart();

  String phone_number = "44123456789"; // some phone number here
  String text = "SMS text here";

  SmsManager smsMgr = SmsManager.getDefault();
  smsMgr.sendTextMessage(phone_number, null, text, null, null);
} 
```

**注意：**您发送短信，您的应用需要[SEND_SMS 权限](http://developer.android.com/reference/android/Manifest.permission.html#SEND_SMS)。要声明它，将以下行添加到您的 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission> 
```

# android - 如何停止我的应用程序在 android 中的服务？

> ID：15218611
> 
> 赞同：0
> 
> 时间：2013-03-05T08:03:13.063
> 
> 标签：android, service

我写了一个服务和广播接收器类。此服务与任务绑定。我可以成功启动服务和广播接收器。我也可以停止广播接收器。但我不能停止我的服务。

这是我启动和停止服务的代码。

```
public class Pedometer extends Activity {

    private boolean mIsRunning;

    public static Context mContext;

    private StartAtBootServiceReceiver receiver;
    private SharedPreferences prefs;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mContext = getBaseContext();

        setContentView(R.layout.main);

        prefs = getApplicationContext().getSharedPreferences(
                  "com.sa.sademo", Context.MODE_PRIVATE);

        receiver = new StartAtBootServiceReceiver();
        IntentFilter filter = new IntentFilter(Intent.ACTION_BOOT_COMPLETED);
        mContext.registerReceiver(receiver, filter);

        Button stopServiceAndBR = (Button) findViewById(R.id.stopServiceAndBR);
        bankButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Pedometer.this.stopStepService();
            }
        });

        startStepService();
    }

    public static Context getContext() {
        return mContext;
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (mIsRunning) {
            bindStepService();
        }
    }

    @Override
    protected void onPause() {
        if (mIsRunning) {
            unbindStepService();
        }
        super.onPause();
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
    }

    private StepService mService;

    private ServiceConnection mConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            mService = ((StepService.StepBinder)service).getService();
        }

        public void onServiceDisconnected(ComponentName className) {
            mService = null;
        }
    };

    private void startStepService() {
        mIsRunning = true;
        startService(new Intent(Pedometer.this,
                StepService.class));
    }

    private void bindStepService() {
        bindService(new Intent(Pedometer.this, 
                StepService.class), mConnection, Context.BIND_AUTO_CREATE);
    }

    private void unbindStepService() {
        unbindService(mConnection);
    }

    private void stopStepService() {
        mIsRunning = false;
        if (mService != null) {
                PackageManager pm = mContext.getPackageManager();
                ComponentName component = new ComponentName(mContext, StartAtBootServiceReceiver.class);
                pm.setComponentEnabledSetting(component , PackageManager.COMPONENT_ENABLED_STATE_DISABLED , PackageManager.DONT_KILL_APP);

                unbindStepService();
                mIsRunning = false;
                if (mService != null) {
                    stopService(new Intent(Pedometer.this,
                          StepService.class));
                }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T21:06:34.253

在您的服务中，您可以执行以下操作：

```
//A variable to check
boolean cancel = false;

//a method to set this variable
public void cancel(){
   cancel = true;
}

//inside of some point of your service you do:

while (yourCondition){

  if (!cancel){

    //do the service work

  } else {

     throw new StopServiceException(); // you have to create it.
  }

} 
```

在您使用 Service 实例的应用程序中调用取消方法：

```
myService.cancel(); 
```

# asp.net - 编辑、删除和更新带有验证和文本框的gridview

> ID：15218613
> 
> 赞同：0
> 
> 时间：2013-03-05T08:03:14.920
> 
> 标签：asp.net, c#-4.0, gridview

我有四个文本框，两个按钮，一个网格视图和一个复选框，我在每个文本框上放置了需要字段验证，我有一个数据库，这样当我在文本框中输入值并按下提交按钮时，数据存储在数据库中并在我使用数据表时显示在网格中。我现在在我的网格视图中编辑、删除和更新链接，当我单击显示的编辑或删除链接验证错误消息时，我不会在我的网格中进行更改。谁可以帮我这个事。

提前致谢

我的aspx代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>

</head>
<body style="height: 191px">
<form id="form1" runat="server">
<div>
    <table class="style1">
        <tr>
            <td class="style3">
                FirstName</td>
            <td>
    <asp:TextBox ID="tFirstName" runat="server"></asp:TextBox>
    &nbsp;&nbsp;&nbsp;&nbsp;
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                    ControlToValidate="tFirstName" ErrorMessage="Enter First Name">*</asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td class="style3">
                Last name</td>
            <td>
    <asp:TextBox ID="tLastName" runat="server"></asp:TextBox>
    &nbsp;&nbsp;&nbsp;&nbsp;
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                    ControlToValidate="tLastName" ErrorMessage="Enter Last Name">*</asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td class="style3">
                Age</td>
            <td>
    <asp:TextBox ID="tAge" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
                    ControlToValidate="tAge" ErrorMessage="" dalega">*</asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td class="style7">
                Is Active</td>
            <td class="style8">
                <asp:CheckBox ID="dropActive" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="style3">
                Auto ID</td>
            <td>
                <asp:TextBox ID="autoID" runat="server"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
                ControlToValidate="autoID" ErrorMessage="Marzi hai teri">*</asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td class="style6">
                </td>
            <td class="style5">
       <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Sumit" ValidationGroup="abc"/>
    <input type="reset" />
                <br />   
                <asp:ValidationSummary ID="ValidationSummary1" runat="server" Height="72px" />
            </td>
        </tr>
        <tr>
            <td class="style4" colspan="2">
                 <asp:Label ID="lblMessage" runat="server" ForeColor="Green" EnableViewState="false" />
  <asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" GridLines="None" AutoGenerateColumns="false" Width="36%" OnRowEditing="EditRow" OnRowCancelingEdit="CancelEditRow" OnRowUpdating="UpdateRow" DataKeyNames="AutoId" OnRowDeleting="DeleteRow" AllowPaging="true" OnPageIndexChanging="ChangePage" AllowSorting="True">
<Columns>
    <asp:TemplateField HeaderText="Edit">
        <ItemTemplate>
            <asp:LinkButton ID="lnkEdit" runat="server" Text="Edit" CommandName="Edit" />
        </ItemTemplate>
        <EditItemTemplate>
            <asp:LinkButton ID="lnkUpdate" runat="server" Text="Update" CommandName="Update" />
            <asp:LinkButton ID="lnkCancel" runat="server" Text="Cancel" CommandName="Cancel" />
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:BoundField HeaderText="AutoId" DataField="AutoId" ReadOnly="true" />
    <asp:TemplateField HeaderText="First Name">
        <ItemTemplate>
            <%# Eval("FirstNAme") %></ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="txtFirstName" runat="server" Text='<%# Eval("FirstName") %>'/>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Last Name">
        <ItemTemplate>
            <%# Eval("LastName") %></ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="txtLastName" runat="server" Text='<%# Eval("LastName") %>'/>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Age">
        <ItemTemplate>
            <%# Eval("Age") %></ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="txtAge" runat="server" Text='<%# Eval("Age") %>' Columns="3" />
           <asp:RequiredFieldValidator ID="REw" runat="server" ControlToValidate="txtAge" Text="*" /> 
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Is Active?">
        <ItemTemplate>
            <%# Eval("Active").ToString().Equals("True") ? "Yes" : "No" %>
        </ItemTemplate>
        <HeaderStyle HorizontalAlign="Left" />
        <EditItemTemplate>
            <asp:DropDownList ID="dropActive" runat="server" SelectedValue='<%# Eval("Active") %>'>
            <asp:ListItem Text="Yes" Value="True" />
            <asp:ListItem Text="No" Value="False" />
            </asp:DropDownList>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Delete?">
        <ItemTemplate>
            <span onclick="return confirm('Are you sure to delete?')">
            <asp:LinkButton ID="lnkDelete" runat="server" Text="Delete" ForeColor="Red" CommandName="Delete" />
            </span>
        </ItemTemplate>
    </asp:TemplateField>
</Columns>
<AlternatingRowStyle BackColor="White" />
<EditRowStyle BackColor="#efefef" />
<FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
<HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
<PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
<RowStyle BackColor="#EFF3FB" />
<SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
<SortedAscendingCellStyle BackColor="#F5F7FB" />
<SortedAscendingHeaderStyle BackColor="#6D95E1" />
<SortedDescendingCellStyle BackColor="#E9EBEF" />
<SortedDescendingHeaderStyle BackColor="#4870BE" />
 </asp:GridView>
                    </table>
                    </div>
                    </form>
                   </body>
                   </html> 
```

aspx.cs 的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        PopulateData();
    }
}
protected void EditRow(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    this.PopulateData();
}
protected void CancelEditRow(object sender, GridViewCancelEditEventArgs e)
{
    GridView1.EditIndex = -1;
    this.PopulateData();
}
protected void DeleteRow(object sender, GridViewDeleteEventArgs e)
{
    var autoID = GridView1.DataKeys[e.RowIndex].Value;
    using (SqlConnection conn = new SqlConnection("Data Source=.;Initial Catalog=EMS;Integrated Security=True"))
    {
        string sql = "Delete from PersonalDetail" +" where AutoId = @AutoId";
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            cmd.Parameters.AddWithValue("@AutoId", autoID);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
    }
    lblMessage.Text ="Record has been deleted successfully !";
    lblMessage.ForeColor = System.Drawing.
    Color.Red;
    this.PopulateData();
}
protected void ChangePage(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    this.PopulateData();
}
protected void UpdateRow(object sendedr, GridViewUpdateEventArgs e)
{
    var autoID = GridView1.DataKeys[e.RowIndex].Value;
    GridViewRow row = GridView1.Rows[e.RowIndex] as GridViewRow;
    TextBox tFirstName = row.FindControl("txtFirstName") as TextBox;
    TextBox tLastName = row.FindControl("txtLastName") as TextBox;
    TextBox tAge = row.FindControl("txtAge") as TextBox;
    DropDownList dropActive = row.FindControl("dropActive") as DropDownList;
    using (SqlConnection conn = new SqlConnection("Data Source=.;Initial Catalog=EMS;Integrated Security=True"))
    {
        string sql = "Update PersonalDetail set FirstName = @FirstName,LastName=@LastName, Age= @Age, Active = @Active" + " where AutoId = @AutoId";
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            cmd.Parameters.AddWithValue("@FirstName", tFirstName.Text.Trim());
            cmd.Parameters.AddWithValue("@LastName", tLastName.Text.Trim());
            cmd.Parameters.AddWithValue("@Age", tAge.Text.Trim());
            cmd.Parameters.AddWithValue("@Active", dropActive.SelectedValue);
            cmd.Parameters.AddWithValue("@AutoId", autoID);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
    }
    lblMessage.Text ="Record updated successfully !";
    GridView1.EditIndex = -1;
    this.PopulateData();
}
private void PopulateData()
{
    DataTable table = new DataTable();
    using (SqlConnection conn = new SqlConnection("Data Source=.;Initial Catalog=EMS;Integrated Security=True"))
    {
        string sql = "Select * from PersonalDetail";
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            using (SqlDataAdapter ad = new SqlDataAdapter(cmd))
            {
                ad.Fill(table);
            }
        }
    }
    GridView1.DataSource = table;
    GridView1.DataBind();
}
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(@"Data Source=.;Initial Catalog=EMS;Integrated Security=True");
    con.Open();

    string FirstName = tFirstName.Text;
    string LastName = tLastName.Text;
    string Age = tAge.Text;
    string Active = dropActive.Text;
    string AutoId = autoID.Text;

    using (SqlCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "insert into PersonalDetail(FirstName,LastName,Age,Active,AutoId) values('" + FirstName + "','" + LastName + "','" + Age + "','" + Active + "','" + AutoId + "')";
        cmd.Parameters.AddWithValue("@FirstName", tFirstName.Text.Trim());
        cmd.Parameters.AddWithValue("@LastName", tLastName.Text.Trim());
        cmd.Parameters.AddWithValue("@Age", tAge.Text.Trim());
        cmd.Parameters.AddWithValue("@Active", dropActive.Text.Trim());

        cmd.Parameters.AddWithValue("@AutoId", autoID.Text.Trim());
        cmd.ExecuteNonQuery();
    }
    con.Close();
    tFirstName.Text = string.Empty;
    tLastName.Text = string.Empty;
    tAge.Text = string.Empty;
    dropActive.Text = string.Empty;
    tFirstName.Focus();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:00:53.250

> 您的`Validation`控件都没有`Validation Group`.
> 将此添加到您的所有`RequiredFieldValidator`.

```
ValidationGroup="SomeName" 
```

> 确保您`RequiredFieldValidator`的所有内容都相同`ValidationGroup`
> 现在最后将 添加 `ValidationGroup="SomeName"`到您的`Button`控件中，单击该控件会引发验证控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:26:08.557

我只是使用 this.populate(); 在 button1 上在文本框中输入详细信息后显示网格视图，感谢您的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:08:55.243

尝试从您的链接中删除验证检查`CauseValidation="false"`

```
<ItemTemplate>
    <asp:LinkButton CauseValidation="false" ID="lnkEdit" runat="server" Text="Edit" CommandName="Edit" />
</ItemTemplate> 
```

# java - 为一张表创建多个触发器

> ID：15218618
> 
> 赞同：0
> 
> 时间：2013-03-05T08:03:31.410
> 
> 标签：java, mysql

我想为 1 个表创建 2-3 个触发器。例如（这些是我的查询）：

```
DELIMITER $$

CREATE OR REPLACE TRIGGER IF EXISTS insert_before_update_slugrapat BEFORE UPDATE ON slugrapat
FOR EACH ROW 
BEGIN
INSERT INTO record_pemakaian_slug_rapat(rc_sr_size, rc_sr_stockawal, rc_sr_holling, rc_sr_store, rc_sr_sales, rc_sr_sisa, rc_sr_lastdate)
VALUES(new.sr_size, new.sr_stockawal, new.sr_holling, new.sr_store, new.sr_sales, new.sr_sisa, new.sr_lastdate); 
/
CREATE OR REPLACE TRIGGER IF EXISTS insert_before_update_slugrapat BEFORE UPDATE ON slugrapat
FOR EACH ROW
BEGIN
INSERT INTO so_slugrapat(sr_size, sr_sisa, sr_stockakhir, sr_stockopname, sr_lastdate)
VALUES(new.sr_size, new.sr_sisa, new.sr_stockakhir, new.sr_stockopname, new.sr_lastdate);
END $$

DELIMITER ; 
```

错误说：

```
Error code 1064, SQL state 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TRIGGER IF EXISTS insert_before_update_slugrapat BEFORE UPDATE ON slugrapat
FOR ' at line 1 
```

我尝试了许多已在stackoverflow上发布的方法，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:16:07.583

尝试两种解决方案。1.将所有代码放在一个触发器中，并使用多个开始和结束语句 2.删除分隔符、开始和结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:22:45.473

改为检查：

```
DROP TRIGGER insert_before_update_slugrapat;

DELIMITER $$

CREATE TRIGGER insert_before_update_slugrapat
   BEFORE UPDATE
   ON slugrapat
   FOR EACH ROW
BEGIN
   INSERT INTO record_pemakaian_slug_rapat(rc_sr_size,
                                           rc_sr_stockawal,
                                           rc_sr_holling,
                                           rc_sr_store,
                                           rc_sr_sales,
                                           rc_sr_sisa,
                                           rc_sr_lastdate)
   VALUES (new.sr_size,
           new.sr_stockawal,
           new.sr_holling,
           new.sr_store,
           new.sr_sales,
           new.sr_sisa,
           new.sr_lastdate);

   INSERT INTO so_slugrapat(sr_size,
                            sr_sisa,
                            sr_stockakhir,
                            sr_stockopname,
                            sr_lastdate)
   VALUES (new.sr_size,
           new.sr_sisa,
           new.sr_stockakhir,
           new.sr_stockopname,
           new.sr_lastdate);
END$$
DELIMITER; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:29:50.177

```
DELIMITER $$

DROP TRIGGER IF EXISTS insert_before_update_slugrapat;

CREATE  TRIGGER   insert_before_update_slugrapat BEFORE UPDATE ON slugrapat
FOR EACH ROW 
BEGIN
INSERT INTO record_pemakaian_slug_rapat(rc_sr_size, rc_sr_stockawal, rc_sr_holling, rc_sr_store, rc_sr_sales, rc_sr_sisa, rc_sr_lastdate)
VALUES(new.sr_size, new.sr_stockawal, new.sr_holling, new.sr_store, new.sr_sales, new.sr_sisa, new.sr_lastdate); 
END $$

DROP TRIGGER IF EXISTS insert_before_update_slugrapat_1;
CREATE TRIGGER  insert_before_update_slugrapat_1 BEFORE UPDATE ON slugrapat
FOR EACH ROW
BEGIN
INSERT INTO so_slugrapat(sr_size, sr_sisa, sr_stockakhir, sr_stockopname, sr_lastdate)
VALUES(new.sr_size, new.sr_sisa, new.sr_stockakhir, new.sr_stockopname, new.sr_lastdate);
END $$

DELIMITER ; 
```

# java - 从 json 文件中打印值

> ID：15218622
> 
> 赞同：0
> 
> 时间：2013-03-05T08:03:51.963
> 
> 标签：java, json, jackson, json-simple

我正在使用以下代码从文件中获取 JSON 数据，目前我能够在一个字符串中实现 JSON。我想将其解析为数组。json文件是这样的：

```
{
    "employee": [
        {
            "name": "joan",
            "lastname": "test",
            "age": 23
        }, 
```

我正在使用以下代码来获取数据，但我在一个字符串中获取它并且我想打印一些数据

```
JSONObject jsonObject = (JSONObject) parser
                .parse(new FileReader("C:\\MockData\\Json\\js.txt"));

        JSONParser parser1 = new JSONParser();
        ContainerFactory containerFactory = new ContainerFactory() {
            public List<?> creatArrayContainer() {
                return new LinkedList<Object>();
            }

            public Map<?, ?> createObjectContainer() {
                return new LinkedHashMap<Object, Object>();
            }

        };

        Map<?, ?> json = (Map<?, ?>) parser1.parse(jsonObject.toJSONString(), containerFactory);

        Iterator<?> iter = json.entrySet().iterator();
        System.out.println("==iterate result==");

        while (iter.hasNext()) {
            Map.Entry entry = (Map.Entry) iter.next();

            System.out.println(entry.getKey() + "=>" + entry.getValue());

        } 
```

**这是输出**

```
employee=[{age=23, name=joan, lastname=test}, {age=22, name=Alex, lastname=avz}, {age=65, name=Dan, lastname=severn}] 
```

这里**entry.getValue() 是返回**数组的一个连接字符串，while 只运行一次......但我想循环它以获取键值。我该怎么做？例如，如果我想在**22 岁时打印姓名 alex**，我应该怎么做？

**注意**：文件可以更改，所以我不知道键（现在它的名称，但可以是 firstName 和我需要通用解决方案的任何其他字段）。

如果有办法使用不同的解析器可以做到这一点，我打开了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:59:09.623

以下是您问题的完整解决方案。使用此代码，您可以将数据分解到每个员工，还可以分离员工属性。

```
 Set<String> keySet = jsonObject.keySet();
                Iterator keySetIterator = keySet.iterator();
                while(keySetIterator.hasNext()){
                    JSONArray array = (JSONArray)jsonObject.get(keySetIterator.next());

                        while(employeeKeySetIterator.hasNext()){
                            String employeeKey = employeeKeySetIterator.next().toString();
                            System.out.println(employeeKey + " : "+ employee.get(employeeKey));
                        }
                    }
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:21:43.590

您需要将内部 json 字符串转换为 JSONArray

```
JSONArray array = (JSONArray)jsonObject.get("employee");
Iterator<JSONObject> iterator = array.iterator();
while (iterator.hasNext()) {
    System.out.println(iterator.next().toString());
} 
```

# registry - 在没有管理员权限的情况下将程序添加到自动运行。RegSetValueEx() 返回 5 (ERROR_ACCESS_DENIED)

> ID：15218624
> 
> 赞同：0
> 
> 时间：2013-03-05T08:03:53.910
> 
> 标签：registry, access-denied, autorun, app-startup, admin-rights

我想将我的程序添加到自动运行。我知道它有一个注册表项，不需要管理员权限来编辑它。

它是

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run. 
```

我正在使用 unicode 图片。我编写了一个用于将程序添加到 autorn 的函数。

```
void AddToRegAutorun(const std::wstring& _valueName, const std::wstring& _path)    
{        
HKEY hkey;    
if (RegOpenKeyEx(HKEY_CURRENT_USER, TEXT("Software\\Microsoft\\Windows\\CurrentVersion\\Run"), 0, /*KEY_SET_VALUE*//*MAXIMUM_ALLOWED*/KEY_ALL_ACCESS, &hkey) == ERROR_SUCCESS)    
RegSetValueEx(hkey, _valueName.c_str(), 0, REG_SZ, (LPBYTE)_path.c_str(), ((DWORD)wcslen(_path.c_str()) + 1)* sizeof(wchar_t));    
RegCloseKey(hkey);    
} 
```

`RegOpenKeyEx()`返回`ERROR_SUCCESS.`但`RegSetValueEx()`返回`5`

`(ERROR_ACCESS_DENIED).`

有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T19:13:12.723

以管理员身份运行 .exe。

# html - 与特定内容共享 iframe

> ID：15218634
> 
> 赞同：0
> 
> 时间：2013-03-05T08:04:21.657
> 
> 标签：html, iframe, hyperlink, sharing

假设我有一个名为[http://123.com](http://123.com)的网站。

网站的 index.html 页面包含一个名为 theframe 的 iframe。我为 iframe 内容提供了三个不同的页面（1.html、2.html、3.html），当我单击站点中的特定按钮时，它们将显示出来。iframe 的默认内容是 1.html。

我的问题是，如果我需要与 iframe 上显示的 2.html 或 3.html共享[http://123.com ，我应该如何在 facebook/blog/IM 上写链接以共享？](http://123.com)有没有不修改网站的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:17:06.950

您在 iframe src 中有硬编码值

使用查询字符串

在你的 url 中创建一个名为`dstntn`palce的参数

```
http://123.com/?dstntn=your_url 
```

然后通过 $_REQUEST['dstntn']; 在 var 中获取它

并将 var 赋予 iframe src

然后通过将 dstntn 值更改为 1.html || 来更改 iframe 2.html

注意：读取查询字符串的编码和解码形式我认为点是不可接受的

# php - 提交表格前检查

> ID：15218637
> 
> 赞同：-2
> 
> 时间：2013-03-05T08:04:24.527
> 
> 标签：php, jquery

如何在提交前检查表格。

当用户输入输入或选中复选框时，我想输入任何数据。

我不能使用 jquery 来检查和管理提交表单，在刷新提交页面和空输入等之后。

**例如：**

```
$('form#myForm1').submit(function(){ ... }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:07:41.390

我建议使用服务器端检查，客户端检查可以操纵数据并发送任何数据......

对于您的问题，您可以使用插件来验证字段...示例：

```
$('#buy').submit(function() {
      if ($('#productSize').val().length < 1) {
            $('#error').html('My Error Message').show();
            return false;
      }
}); 
```

示例来自：http: [//forum.jquery.com/topic/checking-form-value-before-submit](http://forum.jquery.com/topic/checking-form-value-before-submit)

示例stackoverflow：[jquery在提交前检查值](https://stackoverflow.com/questions/10646264/jquery-check-values-before-submit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:07:59.363

只需使用

```
< form onsubmit="return javascriptFunciton();" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:08:48.110

您可以使用[HTML5 表单验证](http://www.the-art-of-web.com/html/html5-form-validation/#.UTWnoDDNjC8)。但是，由于验证是在用户端，因此您也应该始终在服务器端验证数据。绕过任何用户端验证都相当容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:12:11.910

有几种方法可以检查以确保输入已填满！

1-使用 jquery 你可以做这样的事情：

```
if(!$(#"input1").val()){do some thing} 
```

2-使用 Javascript 你可以做这样的事情：

```
if(document.getElementById("input1").value==""){do some thing} 
```

3- 使用一些 HTML5 属性，例如：“必需”，使输入字段需要填写。

但是，最好的方法是使用 PHP 完善的输入验证和安全功能来控制用户的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:12:18.530

您可以使用 jquery.validate 插件在您的 from 上添加验证规则，例如：

```
$('#myForm').validate({
    rules:
    {
        field1:
            {
                required: true              
            }

    },
    messages:
    {
        field1:
            {
                required: "<span class="error">Enter field1.</span>"                
            }
    }
}); 
```

[在jquery 表单验证](http://www.raymondcamden.com/index.cfm/2009/2/10/An-Introduction-to-jQuery-and-Form-Validation-2)中查看更多信息

# python - 使用 sqlite3 时，带有 win 服务的 py2exe 二进制文件无法启动

> ID：15218640
> 
> 赞同：-2
> 
> 时间：2013-03-05T08:04:28.003
> 
> 标签：python, sqlite, py2exe

我从 py2exe（Windows 服务和 namedpipe）生成的二进制文件无法启动，我在项目中所做的更改是“导入 sqlite3”和数据库操作（如插入、更新等）。这是否导致我的二进制文件无法启动，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:54:55.553

问题解决了。问题在于模块的导入。与 sqlite3 无关。

# naming - 这种Bug有名字吗？

> ID：15218645
> 
> 赞同：0
> 
> 时间：2013-03-05T08:04:51.110
> 
> 标签：naming

由不可能导致行为改变的代码更改引起的错误是否有特殊名称？

就像改变这个引起的错误一样

```
...
X x = (X)getX();
...
Object getX(){
    ...
    return someReturnValue;
} 
```

至

```
...
X x = getX();
...
X getX(){
    ...
    return (X)someReturnValue;
} 
```

# apache - 如果使用域 X，mod_rewrite 重定向到特定 URL？

> ID：15218646
> 
> 赞同：3
> 
> 时间：2013-03-05T08:04:56.877
> 
> 标签：apache, .htaccess, url, mod-rewrite, redirect

我有一个包含两个域的站点。我希望每当访问域 X 时（无论路径是什么...... /foo/bar/、root 或其他），浏览器都应该重定向到特定的 URL。

所以：

```
domainX.com -> domainX.com
domainY.com -> domainX.com/some/path 
```

以下有点工作，但它只匹配`domainY.com`, 所以`www.domainY.com`or`domainY.com/some/path`不工作。

```
RewriteCond %{HTTP_HOST} ^domainY\.com
RewriteRule ^(.*)$ http://domainX\.com/some/path [L] 
```

不过，它必须同时接受有和没有 www 的情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:33:18.087

您可以将正则表达式扩展为`HTTP_HOST`

```
RewriteCond %{HTTP_HOST} ^(?:www\.)?domainY\.com$
RewriteRule .* http://domainX.com/some/path [L] 
```

这是一个重写。如果要重定向客户端，则必须添加一个[`R`](https://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)标志

```
RewriteRule .* http://domainX.com/some/path [R,L] 
```

当一切正常时，您可以替换`R`为`R=301`. *永远不要*用[`R=301`](https://stackoverflow.com/a/9204355/1741542).

# perl - 为什么在午夜加上 6 天 7½ 小时会得到 8:30？

> ID：15218648
> 
> 赞同：6
> 
> 时间：2013-03-05T08:04:59.550
> 
> 标签：perl, datetime

此示例采用基准日期并添加 7½ 小时、1 天 7½ 小时、2 天 7½ 小时等。

```
use Date::Manip;
use DateTime;
use DateTime::Format::DateManip;

Date::Manip::Date_Init("TZ=America/New_York", "Language=English");

my $otime = DateTime->new(
    year      => 2013,
    month     => 3,
    day       => 4,
    hour      => 0,
    minute    => 0,
    second    => 0,
    time_zone => 'America/New_York',
);

my $t1 = UnixDate($otime, "%i:%M %p on %A, %B %e, %Y ");
print "original $t1\n";

for (my $i = 0; $i <= 20; $i++) {               
    my $dtw = $otime->clone();
    $dtw->add(
        minutes => (15) * 30,
        days    => ($i),
    ); 
    $t1 = UnixDate($dtw, "%i:%M %p on %A, %B %e, %Y ");
    print "$i days $t1\n";
} 
```

当添加 6 天 7½ 小时时，结果包含一个额外的小时。

```
2013 年 3 月 4 日星期一上午 12:00
0 天 2013 年 3 月 4 日星期一上午 07:30
1 天 2013 年 3 月 5 日星期二上午 07:30
2 天 2013 年 3 月 6 日星期三上午 07:30
3 天 2013 年 3 月 7 日星期四上午 07:30
4 天 2013 年 3 月 8 日星期五上午 07:30
5 天 2013 年 3 月 9 日星期六上午 07:30
6 天 2013 年 3 月 10 日星期日上午 8:30 # 为什么是 8:30 而不是 7:30？
7 天 2013 年 3 月 11 日星期一上午 07:30
8 天 2013 年 3 月 12 日星期二上午 07:30
9 天 2013 年 3 月 13 日星期三上午 07:30
10 天 2013 年 3 月 14 日星期四上午 07:30
11 天 2013 年 3 月 15 日星期五上午 07:30
12 天 2013 年 3 月 16 日星期六上午 07:30
13 天 2013 年 3 月 17 日星期日上午 07:30
14 天 2013 年 3 月 18 日星期一上午 07:30
15 天 2013 年 3 月 19 日星期二上午 07:30
16 天 2013 年 3 月 20 日星期三上午 07:30
17 天 2013 年 3 月 21 日星期四上午 07:30
18 天 2013 年 3 月 22 日星期五上午 07:30
19 天 2013 年 3 月 23 日星期六上午 07:30
20 天 2013 年 3 月 24 日星期日上午 07:30
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T08:13:03.527

因为夏令时在 America/New_York 时区从 2013 年 3 月 10 日开始。 [DateTime](http://search.cpan.org/perldoc?DateTime)首先添加`$i`天数（以获取 3 月 10 日的午夜），然后添加 450 分钟以获取上午 8:30（因为 3 月 10 日上午 1:59 之后的分钟为上午 3:00）。参数的顺序`add`没有意义；请参阅[向日期时间添加持续时间](http://search.cpan.org/perldoc?DateTime#Adding_a_Duration_to_a_Datetime)。

因为它分别添加天和分钟（并首先处理天），所以效果只发生在 DST 实际开始或结束的日期。如果你想要一个特定的时间，`set`直接使用它而不是使用`add`. 或者调用`add`两次，一次增加分钟，然后再次增加天数。

# python - 在 heroku python 应用程序中为 javascript/css 构建步骤

> ID：15218649
> 
> 赞同：1
> 
> 时间：2013-03-05T08:05:01.620
> 
> 标签：python, web-applications, heroku

我正在开发一个用 Python 构建的 Heroku 应用程序，但我找不到推荐的方法来添加部署步骤以连接/处理/缩小 JavaScript 和 CSS 资产。例如，我可能喜欢使用 r.js 或更少的工具。

我见过 Heroku 知道可以为 Django 应用程序运行的名为“collectstatic”的东西，但我的应用程序使用的是 web.py，而不是 Django。

一种不太完美的方法是在我的开发机器上本地使用这些工具来生成组合/压缩的静态资产。然后我可以将这些编译后的文件检入 git 存储库并将它们推送到 Heroku。

Heroku内置的这种步骤是否有任何支持？在 Python 中处理 Heroku Web 应用程序的 javascript/css 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:52:34.130

使用[buildpack-multi](https://github.com/ddollar/heroku-buildpack-multi/)，Heroku 允许您运行多个 buildpack。您可以创建我们自己的 buildpack 只执行您需要的资产编译，或者找到一个已经完成的构建包，然后使用 buildpack-multi 将其分层在 Python buildpack 之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:36:05.183

我通常会推荐您不太完美的方法，特别是如果您的文件数量很少。

简单总是比功能好。

# android - 如何在不等待状态更改的情况下检查手机的状态

> ID：15218655
> 
> 赞同：1
> 
> 时间：2013-03-05T08:05:26.353
> 
> 标签：android

在 Android 中，我目前使用 onCallStateChanged 来检测手机状态的任何变化。但是，我想知道手机的状态是什么，而不必等待状态的变化。例如，我希望应用程序自动拨打一个号码，但需要知道电话是否已在使用中（挂机）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:17:31.437

使用[TelephonyManager](https://developer.android.com/reference/android/telephony/TelephonyManager.html)。只要您声明了权限，您就可以随时查询它。

# android - 延迟我的按钮

> ID：15218658
> 
> 赞同：0
> 
> 时间：2013-03-05T08:05:39.343
> 
> 标签：android, button, lag

我制作了一个代码，允许我从麦克风录制音频。奇怪的是，当我**单击我的按钮**时，它似乎有**某种滞后**，按钮在视觉上保持按下半秒钟，然后启动它方法。这是有原因的，我该如何解决？

我现在拥有的：

```
private void onRecord(boolean start) {
        if (start) {
            startRecording();
        } else {
            stopRecording();
        }
    }

private void startRecording() {
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setOutputFile(mFileName);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

        try {
            mRecorder.prepare();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
        }

        mRecorder.start();
    }

    private void stopRecording() {
        mRecorder.stop();
        mRecorder.release();
        mRecorder = null;
    }
public void onClick(View v) {

        switch (v.getId()) {
case R.id.bRecord:

            if (mStartRecording) {
                mRecordButton.setText("Stop Recording");
                onRecord(true);
                mStartRecording = false;

            } else {
                mRecordButton.setText("Start Recording");
                mStartRecording = true;
                onRecord(false);

            }

            break;
} 
```

**编辑** 感谢您的帮助，我决定使用服务，但有点挣扎。我建立：

```
public class RecordService extends IntentService {

    private MediaRecorder mRecorder = null;
    private String mFileName;
    private static final String LOG_TAG = "RecordService";

    public RecordService() {
        super("RecordService");
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent intent) {

        mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
        mFileName += "/audiorecordtest.3gp";

        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setOutputFile(mFileName);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

        try {
            mRecorder.prepare();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
        }

        mRecorder.start();

    }
} 
```

和

```
case R.id.bRecord:

            if (mStartRecording) {
                mRecordButton.setText("Stop Recording");
                //onRecord(true);
                Intent service = new Intent(myContext, RecordService.class);
                myContext.startService(service); 
                mStartRecording = false;

            } else {
                mRecordButton.setText("Start Recording");
                mStartRecording = true;
                onRecord(false);

            }

            break; 
```

对此有疑问，我现在如何停止此服务（= 停止录制）（通过再次单击按钮）并将想法传达回活动？我试图在服务中添加一个停止功能，但是当我调用 service.stop() 来停止它时它似乎不起作用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:08:31.983

我的猜测是，由于您在与 UI 相同的线程中开始录制，因此 UI 不会响应，直到 startRecording() 中的所有代码都完成执行。您可能需要考虑在其自己的线程中调用 onRecord。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:15:00.150

*   您可以将[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)用于短操作*（最多几秒钟。）*
*   使用[服务](http://developer.android.com/reference/android/app/Service.html)进行长时间运行的操作

**注意：** `AsyncTask`为您处理线程处理。如果您编写一个`Service`，则必须生成自己的线程，否则它将在 UI 线程上运行。

几种方法之一：

**服务：**

```
@Override       
protected void onHandleIntent(Intent intent) {

    //your recorder code

    //get the messenger from intent
    Bundle extras = intent.getExtras();
    if (extras != null) {
       Messenger messenger = (Messenger) extras.get("MESSENGER");
       try {
          //send a message back to the activity
          messenger.send(...);
       } catch (android.os.RemoteException e1) {
          Log.w(getClass().getName(), "Exception sending message", e1);
       }
    }
} 
```

**活动：**

处理程序的定义

```
private Handler handler = new Handler() {
    public void handleMessage(Message message) {
      //do something with the message from the service 
    };
}; 
```

启动服务的代码

```
Intent intent = new Intent(this, YourService.class);
Messenger messenger = new Messenger(handler);
intent.putExtra("MESSENGER", messenger);
startService(intent); 
```

# javascript - 用 javascript 填写 PDF 表单

> ID：15218666
> 
> 赞同：3
> 
> 时间：2013-03-05T08:05:55.993
> 
> 标签：javascript, jquery, pdf, adobe

这就是我所拥有的：

*   用户填写很长的 html 表单
*   用户获取下载不同 pdf 的链接（这是可填写的表格），链接是使用 javascript 生成的
*   用户单击链接，生成 url（使用用户之前提交的数据），在表单中处理数据并完成字段 *这是使用表单内的 javascript 完成的）。
*   用户在完成字段的情况下返回 pdf。

我正在运行的问题是，在某些情况下，发送到表单所需的数据大约是 8000 个字符，而 IE 只允许 url 中的 2083 个字符。

根据客户的要求，我们需要在客户端做所有事情，这意味着无法访问 php、c#、java。我也在使用 Acrobat Pro X 来处理 pdf。

有没有办法提交发布请求，在 pdf 中处理该请求，填写表格并将填写的表格返回给用户？还有其他方法可以绕过 IE 的 2083 个字符限制吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T09:40:44.927

如果要在客户端填写表格，为什么需要向服务器发送8000个字符的数据？似乎您需要做的就是在 HTML 页面中的 JavaScript 和 PDF 中的 JavaScript 之间建立通信。这在这里解释：[PDF hostContainer 回调](https://stackoverflow.com/questions/13837002/pdf-hostcontainer-callback)

PS：我是摘录这本书的作者：[http ://www.javabeat.net/2011/04/javascript-communication-between-html-and-pdf-in-itext/](http://www.javabeat.net/2011/04/javascript-communication-between-html-and-pdf-in-itext/)

# vb.net - 已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭 VB.NET

> ID：15218671
> 
> 赞同：1
> 
> 时间：2013-03-05T08:06:15.317
> 
> 标签：vb.net

我收到此错误消息

> “已经有一个打开的 DataReader 与此连接关联，必须先关闭”

请帮助我
我的代码是：

```
Public Sub update_qty(ByVal qry1 As String) 
        Dim dr As MySqlDataReader 'SQLiteDataReader 
        Dim comm As MySqlCommand 'SQLiteCommand 

        Try

            comm = New MySqlCommand(qry1, conn)
            dr = comm.ExecuteReader()
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try

        Do While dr.Read()
            exe_query("call cargosys.paymentsAdd('" & var1 & "', " & dr("inNo") & ")")
        Loop

        dr.Close()
End Sub

Public Sub exe_query(ByVal qry As String) As String 

        Dim cmd As MySqlCommand 

        Try
            cmd = New MySqlCommand(qry, conn)
            cmd.ExecuteNonQuery()

        Catch ex As MySqlException
            MessageBox.Show(ex.ToString)      
        End Try

 End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:11:19.020

您的问题是您的代码打开 a`DataReader`然后`SqlCommand`在`DataReader`读取时执行

尝试更改此行：

```
 dr = comm.ExecuteReader() 
```

到：

```
 dr = comm.ExecuteReader(CommandBehavior.CloseConnection) 
```

更多：[DataReader 命令行为](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)

或者更改您的连接字符串以启用 MARS（多个活动结果集）。此设置将允许在同一连接上检索多个只进、只读的结果集。

例如 ：

```
connectionString=
"Data Source=.\SQLEXPRESS;
AttachDbFilename=|DataDirectory|Northwind.MDF;
Integrated Security=True;
User Instance=True;
MultipleActiveResultSets=True" 
```

更多：[火星](http://msdn.microsoft.com/en-us/library/h32h3abf.aspx)

**编辑**

由于不支持 MARS 关键字，请尝试将代码更改为：

```
Public Sub update_qty(ByVal qry1 As String) 
        Dim dr As MySqlDataReader 'SQLiteDataReader 
        Dim comm As MySqlCommand 'SQLiteCommand 

        Try

            comm = New MySqlCommand(qry1, conn)
            dr = comm.ExecuteReader()
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try

        Dim myList As New List(Of String)

        Do While dr.Read()
            myList.Add("call cargosys.paymentsAdd('" & var1 & "', " & dr("inNo") & ")")
        Loop

        dr.Close()
End Sub

Public Sub exe_query(myList As List(Of String)) 

        Dim cmd As MySqlCommand 

        For Each query As String In myList
            Try
                cmd = New MySqlCommand(query, conn)
                cmd.ExecuteNonQuery()

            Catch ex As MySqlException
                MessageBox.Show(ex.ToString)      
            End Try
        Next

 End Sub 
```

而不是同时执行`DataReader.Read`-> `SqlCommand.ExecuteNonQuery`，此代码将首先读取所有数据，然后运行`SqlCommand.ExecuteNonQuery`。

# mongodb - 从 MongoDB 迁移到 HBase

> ID：15218672
> 
> 赞同：1
> 
> 时间：2013-03-05T08:06:17.637
> 
> 标签：mongodb, hadoop, hbase

嗨，我对 HBase 数据库非常陌生。我下载了一些 Twitter 数据并存储到 MongoDB 中。现在我需要将这些数据转换为 HBase 以加速 Hadoop 处理。但我无法创建它的方案。在这里，我将推特数据转换为 JSON 格式-

```
{
"_id" : ObjectId("512b71e6e4b02a4322d1c0b0"),
"id" : NumberLong("306044618179506176"),
"source" : "<a href=\"http://www.facebook.com/twitter\" rel=\"nofollow\">Facebook</a>",
"user" : {
    "name" : "Dada Bhagwan",
    "location" : "India",
    "url" : "http://www.dadabhagwan.org",
    "id" : 191724440,
    "protected" : false,
    "timeZone" : null,
    "description" : "Founder of Akram Vignan - Practical Spiritual Science of Self Realization",
    "screenName" : "dadabhagwan",
    "geoEnabled" : false,
    "profileImageURL" : "http://a0.twimg.com/profile_images/1647956820/M_DSC_0034_normal.jpg",
    "biggerProfileImageURL" : "http://a0.twimg.com/profile_images/1647956820/M_DSC_0034_bigger.jpg",
    "profileImageUrlHttps" : "https://si0.twimg.com/profile_images/1647956820/M_DSC_0034_normal.jpg",
    "profileImageURLHttps" : "https://si0.twimg.com/profile_images/1647956820/M_DSC_0034_normal.jpg",
    "biggerProfileImageURLHttps" : "https://si0.twimg.com/profile_images/1647956820/M_DSC_0034_bigger.jpg",
    "miniProfileImageURLHttps" : "https://si0.twimg.com/profile_images/1647956820/M_DSC_0034_mini.jpg",
    "originalProfileImageURLHttps" : "https://si0.twimg.com/profile_images/1647956820/M_DSC_0034.jpg",
    "followersCount" : 499,
    "profileBackgroundColor" : "EEE4C1",
    "profileTextColor" : "333333",
    "profileLinkColor" : "990000",
    "lang" : "en",
    "profileSidebarFillColor" : "FCF9EC",
    "profileSidebarBorderColor" : "CBC09A",
    "profileUseBackgroundImage" : true,
    "showAllInlineMedia" : false,
    "friendsCount" : 1,
    "favouritesCount" : 0,
    "profileBackgroundImageUrl" : "http://a0.twimg.com/profile_background_images/396759326/dadabhagwan-twitter.jpg",
    "profileBackgroundImageURL" : "http://a0.twimg.com/profile_background_images/396759326/dadabhagwan-twitter.jpg",
    "profileBackgroundImageUrlHttps" : "https://si0.twimg.com/profile_background_images/396759326/dadabhagwan-twitter.jpg",
    "profileBannerURL" : null,
    "profileBannerRetinaURL" : null,
    "profileBannerIPadURL" : null,
    "profileBannerIPadRetinaURL" : null,
    "miniProfileImageURL" : "http://a0.twimg.com/profile_images/1647956820/M_DSC_0034_mini.jpg",
    "originalProfileImageURL" : "http://a0.twimg.com/profile_images/1647956820/M_DSC_0034.jpg",
    "utcOffset" : -1,
    "contributorsEnabled" : false,
    "status" : null,
    "createdAt" : NumberLong("1284700143000"),
    "profileBannerMobileURL" : null,
    "profileBannerMobileRetinaURL" : null,
    "profileBackgroundTiled" : false,
    "statusesCount" : 1713,
    "verified" : false,
    "translator" : false,
    "listedCount" : 6,
    "followRequestSent" : false,
    "descriptionURLEntities" : [ ],
    "urlentity" : {
        "url" : "http://www.dadabhagwan.org",
        "start" : 0,
        "end" : 26,
        "expandedURL" : "http://www.dadabhagwan.org",
        "displayURL" : "http://www.dadabhagwan.org"
    },
    "rateLimitStatus" : null,
    "accessLevel" : 0
},
"contributors" : [ ],
"geoLocation" : null,
"place" : null,
"favorited" : false,
"retweet" : false,
"retweetedStatus" : null,
"retweetCount" : 0,
"userMentionEntities" : [ ],
"retweetedByMe" : false,
"currentUserRetweetId" : -1,
"possiblySensitive" : false,
"urlentities" : [
    {
        "url" : "http://t.co/gR1GohGjaj",
        "start" : 113,
        "end" : 135,
        "expandedURL" : "http://fb.me/2j2HKHJrM",
        "displayURL" : "fb.me/2j2HKHJrM"
    }
],
"hashtagEntities" : [ ],
"mediaEntities" : [ ],
"truncated" : false,
"inReplyToStatusId" : -1,
"text" : "Spiritual Quote of the Day :\n\n‘I am Chandubhai’ is an illusion itself and from that are \nkarmas charged. When... http://t.co/gR1GohGjaj",
"inReplyToUserId" : -1,
"inReplyToScreenName" : null,
"createdAt" : NumberLong("1361801697000"),
"rateLimitStatus" : null,
"accessLevel" : 0
} 
```

这里如何将数据划分为列和列族？我想制作一个`"twitter" column-family`包含`source, getlocation, place, retweet etc...`和另一个`"user" column-family`包含`name, location etc...`（用户数据）。即每个内部级别子文档的新列族。

这种方法是否正确？现在我将如何区分`urlentity`和？`"user" column-family``"twitter" column-family`

以及如何处理那些包含子文档列表的键（例如`urlentity`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:01:47.177

在 HBase 中有很多方法可以对此进行建模，从将所有内容存储在单个列中，到为每个子实体使用不同的表以及用于“索引”的其他几个表。

一般来说，您根据您的读写访问模式对 hbase 中的数据进行建模。例如，列族存储在磁盘上的不同文件中。将数据分为两个列族的一个原因是，如果在很多情况下您需要来自一个而不是另一个的数据。等等

来自 HBaseCon 2012 的 Ian Varley 对 HBAse 模式设计进行了很好的演示，您可以在此处找到幻灯片[和](http://www.cloudera.com/content/cloudera/en/resources/library/hbasecon/video-hbasecon-2012-hbasecon-2012.html)[此处](http://www.slideshare.net/cloudera/5-h-base-schemahbasecon2012)的视频

# internet-explorer - Chrome 控制台不再显示对象属性

> ID：15218674
> 
> 赞同：1
> 
> 时间：2013-03-05T08:06:31.033
> 
> 标签：internet-explorer, google-chrome, firefox, browser

最近我注意到 chrome 没有显示任何对象的属性，它在 10 天前显示它们。然后我在 IE、Firefox 中检查了同样的东西，它们都没有显示任何属性。

例如 ：

```
var a={};  
a   // gives Object {} 
```

几天前，它至少显示了 chrome 中的所有属性。这种变化背后的可能原因是什么？

![在此处输入图像描述](../Images/66d0459ac19abb535d4064a1f29b1c88.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:51:17.417

显然，Chrome 过去默认模拟[dir](https://developers.google.com/chrome-developer-tools/docs/commandline-api#dirobject)功能，但现在它似乎模拟了[inspect](https://developers.google.com/chrome-developer-tools/docs/commandline-api#inspectobject)。

因此，要获取指定对象的所有属性的列表，

而不是`a`which 映射到`inspect(a)`，使用`dir(a);`

# php - 我捕获的引荐与 Google Analytics（分析）有很大不同

> ID：15218676
> 
> 赞同：0
> 
> 时间：2013-03-05T08:06:43.257
> 
> 标签：php, zend-framework, google-analytics, http-headers

我在我的网站上使用谷歌分析，现在我需要跟踪一些客户的推荐网址，即我需要查看他们来自的确切网址。我的客户在引用我的网站时使用了一个特殊的 url，因此我在该着陆页的脚本中设置了 HTTP_REFER 的捕获。客户使用的 url 是唯一的，因此用户不会意外键入该 url。

我面临的问题是，当我将 HTTP_REFER 记录到我的数据库时，我会收到很多没有引用的调用，但具有正确的 GUID 和其他参数。这意味着我知道它们来自前 www.client1.com，但我需要知道确切的引用，例如 www.client1.com/objectx。

当我将我的数据库与 Google Analytics 进行比较时，差异也很大。上个月，Analytics 表示大约 1100 次点击来自我的客户，但我记录的着陆页点击次数为 5400。我看不出我的捕获应该有什么问题。它的工作原理很简单。

1.  客户有一个指向我的页面的链接，该链接具有唯一的 GUID，例如
    www.mypage.com/api/123d-213-12321-23434
2.  当请求到达我的站点时，我检查 GUID 以查看它是否是有效的客户，然后将点击与 HTTP_REFER 一起保存在我的数据库中。
3.  然后我将它们重定向到我的起始页。

有谁知道为什么他们差异如此之大，而女巫一个是正确的？

# lwuit-resource-editor - 从 lwuit 资源编辑器错误生成 j2me netbeans 项目

> ID：15218686
> 
> 赞同：0
> 
> 时间：2013-03-05T08:07:34.677
> 
> 标签：lwuit-resource-editor

嗨，我试图从 lwuit 1.5 资源编辑器生成 netbeans 项目，但它给了我一个错误，说：

> 问题：该项目使用名为“Sun Java(TM) Wireless Toolkit 2.5.2 for CLDC”的Java平台，但没有找到该平台。解决方案：单击解决并创建名为“Sun Java(TM) Wireless Toolkit 2.5.2 for CLDC”的新平台。

如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:02:16.807

1- 打开 Netbeans IDE 7.xx

2-选择：工具，Java平台，点击文件夹J2ME

3-单击“添加平台”按钮

4- 选择 Java ME MIDP 平台模拟器，然后“下一步”

5- 将自动检测平台“C:\WTK2.5.2_01”。选择它，然后单击“下一步”

6- 在“描述”选项卡的“平台名称”文本字段中，准确填写名称：Sun Java(TM) Wireless Toolkit 2.5.2 for CLDC

# java - 在jsp中从Java文件运行代码？

> ID：15218699
> 
> 赞同：-1
> 
> 时间：2013-03-05T08:08:16.270
> 
> 标签：java, jsp, jakarta-ee, servlets

我有一个java文件

```
 public class Execute {

    public void run(){
        try{
            Runtime runtimeInstance = Runtime.getRuntime();
            Process p = runtimeInstance.exec("cmd /c D:\\Data\\Personal\\abu\\CobaAppFuse\\ExecuteCLI\\src\\java\\cli\\abu.bat");
            System.out.print(p);

        }catch(Exception ex){
            System.out.print(ex);
        }

    }
} 
```

我的jsp文件路径如何运行文件？

文件 JSP

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="abu.execute.cli.Execute" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <table align="center" border="3">
            <tr>
                <td><input type="submit" value="submit" name="submit"/></td>
            </tr>
        </table>

    </body>
</html> 
```

我想在按下提交按钮时运行java文件谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:21:53.160

我猜你想在有人访问 JSP-File x.jsp 时执行该过程。

虽然可以在 JSP 文件中运行 Java 代码表单，但我绝不会推荐它。你可能会问为什么，但是这比我在[这篇](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)文章中得到的记录要好。

要回答您的问题，您需要创建一个 servlet

```
@WebServlet("/YourServlet")
public class YourServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public YourServlet() {
        super();
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
      new Execute.run();
      request.getRequestDispatcher("/WEB-INF/_search.jsp").forward(request, response);
    }
} 
```

此外，您将不得不更改您的 web 应用程序的权限。记录在此[页面上](http://tomcat.apache.org/tomcat-6.0-doc/security-manager-howto.html)。

请注意，这是最基本的方法，而不是最干净的方法。通常，任何 java 代码*（控制执行计划）的执行*都是在服务中完成的。您可以通过（agian）声明一个 HttpServlet 并在那里声明一个服务来向您的应用程序添加一个服务。

```
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        new Execute.run();

        if (view.equals(request.getPathInfo().substring(1)) {
            request.getRequestDispatcher("/WEB-INF/" + view + ".jsp").forward(request, response);
        } else {
            response.sendRedirect(view);
        }
    } catch (Exception e) {
        throw new ServletException("Executing action failed.", e);
    }
} 
```

虽然我不知道下面的评论是什么意思，但我会将 html 代码添加到答案中以使其更完整。在实践中，这意味着：

提交时，html 需要向 servlet 发送 HTTP-Post。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <table align="center" border="3">
            <tr>
                <td><form action='Myactionhandle'><input type="submit" value="submit" name="submit"/></form></td>
            </tr>
        </table>
    </body>
</html> 
```

servlet 必须执行代码。

```
@WebServlet("/Myactionhandle")
    public class YourServlet extends HttpServlet {
        private static final long serialVersionUID = 1L;

        /**
         * @see HttpServlet#HttpServlet()
         */
        public YourServlet() {
            super();
        }

        /**
         * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
         */
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          new Execute.run();
          request.getRequestDispatcher("/WEB-INF/_search.jsp").forward(request, response);
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T08:40:35.943

在您的 JSP 中添加 javascript。单击按钮时，调用可以通过使用脚本创建对象来执行 java 类的函数。

# ruby-on-rails - rails Foo::Engine.config.something 没有定义？

> ID：15218700
> 
> 赞同：0
> 
> 时间：2013-03-05T08:08:17.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个这样命名的引擎的初始化程序`Foo`：

```
# config/initializer/foo.rb
class Foo::Engine < ::Rails::Engine
  config.bar = 'baz'
end 
```

但它以意想不到的方式表现：

```
Foo::Engine.config.bar # => 'baz' # expected
defined?(Foo::Engine.config.bar) # => nil, why? 
```

为什么是`defined?`零？

另外，当我做`Foo::Engine.config.inspect`很多事情时，会出现但`bar`无处可寻。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:16:56.990

如[Expressions@Programming Ruby](http://www.ruby-doc.org/docs/ProgrammingRuby/tut_expressions.html#definedandorandnot)中所述，

如果未定义其参数（可以是任意表达式），则运算符返回，否则返回该参数的描述`defined?`。`nil`

```
defined? 1 → "expression"
defined? dummy → nil
defined? printf → "method"
defined? String → "constant"
defined? $& → nil
defined? $_ → "global-variable"
defined? Math::PI → "constant"
defined? ( c,d = 1,2 ) → "assignment"
defined? 42.abs → "method" 
```

所以对于类：

```
ruby-1.9.2-p180 > defined? Person

 => nil

ruby-1.9.2-p180 > class Person

ruby-1.9.2-p180 ?>  end

 => nil

ruby-1.9.2-p180 > defined? Person

 => "constant" 
```

对于方法：

```
ruby-1.9.2-p180 > def cool

ruby-1.9.2-p180 ?>  puts "clear"

ruby-1.9.2-p180 ?>  end

 => nil

ruby-1.9.2-p180 > defined? cool

 => "method" 
```

**在你的情况下**，

`defined?(options)`正在调用 options 方法并将结果传递给`defined?`.

感谢@Stuart，如前所述，它不是真正的方法，而是由[method_missing](https://github.com/rails/rails/blob/c2193c11ad215d3a2d7d35960630b3e1902a5082/activeresource/lib/active_resource/base.rb#L1456)实现的，这里有一点魔力。

所以实际上你不应该期望方法选项被定义，因此得到 nil `baz`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:37:09.503

这是因为`#bar`不是真正的方法 on`Rails::Engine::config`而是通过`#method_missing`in实现的[`Rails::Railtie::Configuration`](https://github.com/rails/rails/blob/master/railties/lib/rails/railtie/configuration.rb)。如果它是一个真正的方法（用 实现`def bar`）`defined?`将返回`"method"`。

```
class Foo
  def bar
    'bar'
  end

  def method_missing(name, *args, &blk)
    if name == :baz
      'baz'
    end
  end
end

f = Foo.new
f.bar           # => "bar"
defined?(f.bar) # => "method"
f.baz           # => "baz"
defined?(f.baz) # => nil 
```

为了解决您问题的第二部分，`#inspect`不包括`bar`是因为配置选项存储在`@@options`类变量中，而不是`#inspect`通常看起来的实例变量中：

```
def method_missing(name, *args, &blk)
  if name.to_s =~ /=$/
    @@options[$`.to_sym] = args.first
  elsif @@options.key?(name)
    @@options[name]
  else
    super
  end
end 
```

# sql - 表的关系

> ID：15218702
> 
> 赞同：1
> 
> 时间：2013-03-05T08:08:19.900
> 
> 标签：sql, sql-server, tsql

我开发了简单的数据库，但我对下一个问题感到困惑：我为和分隔了实体（表`'Employe'`）。在“员工”表中，我有“约会”列，它可以包含一些特别的职业和（但它也可以包含另一个职业，例如，等等）。如何在我的数据库中实现它？我使用了哪些关系？`'Author'``'Manager'``'Author'``'Manager'``'Seller'``'CopyRighter'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:13:29.760

我认为您应该考虑将您的职业抽象到一张`Role`表格中。考虑以下结构：

```
RoleID | RoleName
   1   |  Author
   2   |  Manager  
   3   |  Copyrighter
etc... 
```

然后您`Appointment`的`Employee`表列将包含该表的外键 ( `RoleID`) `Role`：

# javascript - bing地图滚动功能访问的默认箭头

> ID：15218705
> 
> 赞同：0
> 
> 时间：2013-03-05T08:08:27.530
> 
> 标签：javascript, scroll, bing-maps, keyup

在我的页面中，我使用的是 bing 地图，但出现了一个问题，我什至尝试了几次都无法解决该问题。

```
function getMap() {

    map = new Microsoft.Maps.Map(document.getElementById('myMap'), {
        credentials: 'XXXX',
        showMapTypeSelector: false,
        enableSearchLogo: false
    });

    Microsoft.Maps.Events.addHandler(map, 'keydown', function (e) {
        if (e.keyCode === 40) {
            e.handled = true;
            return false;
        }
    });

    Microsoft.Maps.Events.addHandler(map, 'keyup', function (e) {
        if (e.keyCode === 38) {
            e.handled = true;
            return false;
        }
    });

    addPushpins();
} 
```

在该页面中，我注意到我的箭头键已被 Bing 地图劫持并且不再滚动页面。为了避免 bing 地图滚动，我为 keyup 和 keydown 添加了两个函数。

之后按下keydown时，主页正在滚动并且工作正常。

但是当我按下向上键时，它只会滚动 bing 地图。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:49:34.533

我找到了答案，只需将“keyup”替换为“keydown”即可。

```
function getMap() {

    map = new Microsoft.Maps.Map(document.getElementById('myMap'), {
        credentials: 'XXXX',
        showDashboard: false
    });

    Microsoft.Maps.Events.addHandler(map, 'keydown', function (e) {
        if (e.keyCode === 40 || e.keyCode === 38) {
            e.handled = true;
        }
    });
} 
```

# java - 字符串，模式匹配

> ID：15218713
> 
> 赞同：1
> 
> 时间：2013-03-05T08:08:54.807
> 
> 标签：java, android

我可以像这样构建字符串：

```
String str = "Phone number %s just texted about property %s";
String.format(str, "(714) 321-2620", "690 Warwick Avenue (679871)");

//Output: Phone number (714) 321-2620 just texted about property 690 Warwick Avenue (679871) 
```

我想要实现的是相反的。输入将跟随字符串

*电话号码 (714) 321-2620 刚刚发短信告知 690 Warwick Avenue (679871)*

我想从输入中检索“ *(714) 321-2620* ”和“ *690 Warwick Avenue (679871)* ”

谁能指点一下，如何在Java或Android中实现这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T08:20:21.190

使用正则表达式：

```
String input = "Phone number (714) 321-2620 just texted about property 690 Warwick Avenue (679871)";
Matcher m = Pattern.compile("^Phone number (.*) just texted about property (.*)$").matcher(input);
if(m.find()) {
  String first = m.group(1); // (714) 321-2620
  String second = m.group(2); // 690 Warwick Avenue (679871)
  // use the two values
} 
```

完整的工作代码：

```
import java.util.*;
import java.lang.*;
import java.util.regex.*;

class Main
{
  public static void main (String[] args) throws java.lang.Exception
  {
    String input = "Phone number (714) 321-2620 just texted about property 690 Warwick Avenue (679871)";
    Matcher m = Pattern.compile("^Phone number (.*) just texted about property (.*)$").matcher(input);
    if(m.find()) {
      String first = m.group(1); // (714) 321-2620
      String second = m.group(2); // 690 Warwick Avenue (679871)
      System.out.println(first);
      System.out.println(second);
  }
} 
```

还有[ideone](http://ideone.com/eJb3l4)上的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:19:44.567

这很容易，同时也很难。

基本上，您可以轻松地使用 String.split() 将字符串拆分为正则表达式或字符首次出现的部分。

但是，您需要有一个清晰的模式来检测电话号码和地址所在的位置。这取决于您自己对这些信息的可能性的定义。

# c# - 如何在gridview控件中显示空数据行

> ID：15218714
> 
> 赞同：2
> 
> 时间：2013-03-05T08:08:55.100
> 
> 标签：c#, asp.net, gridview

这里我正在使用 gridview 这里是 gidview 绑定

```
conn = new SqlConnection(strconnection);
string squery = "sql query";

da = new SqlDataAdapter(squery, conn);
ds = new DataSet();
da.Fill(ds, "tbl1");

GridView1.DataSource = ds;
GridView1.DataBind(); 
```

这是gridview控件的asp代码

```
<asp:GridView ID="GridView1" runat="server" GridLines="None" 
     HeaderStyle-CssClass="grid_header" 
     RowStyle-CssClass="grid_item" 
     RowStyle-Height="30px"  
     AutoGenerateColumns="false" Width="775px" EmptyDataText="Empty">
   <Columns>
      <asp:BoundField HeaderText="Order Code" DataField="ordercode" 
           HeaderStyle-HorizontalAlign="Left" 
           ItemStyle-HorizontalAlign="Left"  />
      <asp:BoundField HeaderText="Transation Code" DataField="transcode"  
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:BoundField HeaderText="Plan Name" DataField="product" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:BoundField HeaderText="Plan Started" DataField="Start_d" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:BoundField HeaderText="Plan Ending" DataField="End_d" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:CheckBoxField HeaderText="Payed" DataField="Payed" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:BoundField HeaderText="Pay Date" DataField="PayDate" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:BoundField HeaderText="Payed Amt" DataField="amtpaid" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
      <asp:BoundField HeaderText="Pay Amt" DataField="PayAmount" 
           HeaderStyle-HorizontalAlign="Center" 
           ItemStyle-HorizontalAlign="Center" />
   </Columns>
</asp:GridView> 
```

这是这样的结果emp

```
 Header1 header2 header3 header4 
     1       asdas   22sdas  asdasda
     2       sasa             asdasas
     3       asdas  
     4                         asdasas 
```

喜欢这个结果

这里我的问题是我想显示 NULL 地方只显示“EMPTY”消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:12:34.437

您可以使用`NullDisplayText="EMPTY"` [NullDisplayText 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx)

```
<asp:BoundField DataField="transcode"
        NullDisplayText="EMPTY"
        HeaderText="header2"/> 
```

如果来自数据库的内容不是`NULL`空字符串，则需要使用模板字段

```
<asp:TemplateField HeaderText="header2">
<ItemTemplate>
    <%# Eval("transcode").ToString() == "" ? "EMPTY" : Eval("transcode").ToString() %>
</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:13:50.137

查看[`BoundField.NullDisplayText`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx)

> 获取或设置当字段值为 null 时为字段显示的标题。

* * *

有时字段的值存储`null`在数据源中。`null`您可以通过设置`NullDisplayText`属性为具有值的字段指定要显示的自定义标题。

在您的情况下，您可以像这样使用它；

```
<asp:BoundField NullDisplayText="EMPTY" HeaderText="Order Code" DataField="ordercode" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="Left"  /> 
```

由于您没有编写 sql 查询，因此您可以[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)为列使用函数。

> 用指定的替换值替换 NULL。

例如;

```
SELECT ISNULL(Column1, "EMPTY") 
```

既然您问了，*如何更改空文本颜色？*您可以[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)在此过程中使用事件。例如;

```
<asp:GridView ID="gridview1" runat="server" OnRowDataBound="RowDataBound">
</asp:GridView>

protected void RowDataBound(Object sender, GridViewRowEventArgs e)
   {
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
       // Use for loop for based all rows.
       if(e.Row.Cells[i].Text == "EMPTY")
                e.Row.Cells[i].BackColor = Color.Red;

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:17:38.050

您只需要添加：

```
NullDisplayText="Empty" 
```

像：

```
<asp:BoundField HeaderText="Order Code" DataField="ordercode" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="Left" NullDisplayText="Empty" /> 
```

# php - 如何从mysql中分三个级别的php子组

> ID：15218717
> 
> 赞同：0
> 
> 时间：2013-03-05T08:08:56.603
> 
> 标签：php, mysql, foreach

这是我对子组 foreach 的情况：

```
$result = mysql_query("select group1, , group2, code, name, price1, price2, sumprice, persentage FROM table") or die(mysql_error());

$set = array();

while ($record = mysql_fetch_object($result)) {
  $set[$record->group1][$record->group2][]= $record;
}   

foreach ($set as $group1 => $record1) {
    echo "<tr><td></td>
        <td align='center'>{$group1}</font></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>";

  foreach ($record1 as $group2 => $record2 ) {
    echo "<tr><td></td>
        <td>{$group2}</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>";          

foreach ($record2 as $name) {
    echo"<tr><td>{$name->code}</td>
        <td>{$name->name}</td>
        <td align='right'>".number_format($name->price1, 0, ',', '.')."</td>
        <td align='right'>".number_format($name->price2, 0, ',', '.')."</td>
        <td align='right'>".number_format($name->sumprice, 0, ',', '.')."</td>
        <td align='center'>".number_format($name->percentage, 0, ',', '.')."%</td>
    </tr>";
      }

    $group2_price1= 0;
    $group2_price2 = 0;
    $group2_sumprice = 0;
    $group2_percentage = 0; 

  foreach($record2 as $group2){
      $group2_price1 += $group2->price1;
      $group2_price2 += $group2->price2;
      $group2_sumprice += $group2->sumprice;
      $group2_percentage += $group2->percentage;
  }

  echo "<tr><td></td><td>Summary of {$group2}</td>
    <td align='right'>".number_format($group2_price1 , 0, ',', '.')."</td>
    <td align='right'>".number_format($group2_price2 , 0, ',', '.')."</td>
    <td align='right'>".number_format($group2_sumprice , 0, ',', '.')."</td>
    <td align='center'>".number_format($group2_percentage , 0, ',', '.')."%</td>
    </tr>";
    }

    $group1_price1= 0;
    $group1_price2 = 0;
    $group1_sumprice = 0;
    $group1_percentage = 0; 

  foreach($record1 as $group1){
      $group1_price1 += $group1->price1;
      $group1_price2 += $group1->price2;
      $group1_sumprice += $group1->sumprice;
      $group1_percentage += $group1->percentage;
    }

echo "<tr><td></td><td>Jumlah {$group1}</td>
    <td align='right'>".number_format($group1_price1 , 0, ',', '.')."</td>
    <td align='right'>".number_format($group1_price2 , 0, ',', '.')."</td>
    <td align='right'>".number_format($group1_sumprice , 0, ',', '.')."</td>
    <td align='center'>".number_format($group1_percentage , 0, ',', '.')."%</td>
    </tr>";
    } 
```

错误 ：

```
Notice: Trying to get property of non-object in (
      foreach($record1 as $group1){
          $group1_price1 += $group1->price1;
          $group1_price2 += $group1->price2;
          $group1_sumprice += $group1->sumprice;
          $group1_percentage += $group1->percentage;
        }
). 
```

如何解决这个问题，我该怎么办？

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:13:47.223

我已经解决了，

```
foreach($record1 as $group1 => $value){
  foreach($value as $group1a){
  $group1_price1 += $group1a->price1;
  $group1_price2 += $group1a->price2;
  $group1_sumprice += $group1a->sumprice;
  $group1_percentage += $group1a->percentage;
}
} 
```

完毕 ！

谢谢

# php - 获取所有 url 类型的 youtube id

> ID：15218718
> 
> 赞同：2
> 
> 时间：2013-03-05T08:09:02.030
> 
> 标签：php, regex, preg-match

以下代码适用于除`youtu.be`. 一个例子是：`http://www.youtube.com/watch?v=ZedLgAF9aEg`将变成：`ZedLgAF9aEg`

我的问题是我如何才能使它与`http://youtu.be/ZedLgAF9aEg`. 我对正则表达式不是很好，所以非常感谢您的帮助。我的代码是：

```
 $text = preg_replace("#[&\?].+$#", "", preg_replace("#http://(?:www\.)?youtu\.?be(?:\.com)?/(embed/|watch\?v=|\?v=|v/|e/|.+/|watch.*v=|)#i", "", $text)); }
$text = (htmlentities($text, ENT_QUOTES, 'UTF-8')); 
```

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:15:15.667

```
//$url = 'http://www.youtube.com/watch?v=ZedLgAF9aEg';
$url = 'http://youtu.be/ZedLgAF9aEg';

if (FALSE === strpos($url, 'youtu.be/')) {
    parse_str(parse_url($url, PHP_URL_QUERY), $id);
    $id = $id['v'];
} else {
    $id = basename($url);
}

echo $id; // ZedLgAF9aEg 
```

适用于两个版本的 URL。**不要**为此使用正则表达式，因为 PHP 已经内置了用于解析 URL 的函数，正如我所展示的那样，这些函数更快、更强大，可以防止破坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:29:34.633

您的正则表达式似乎可以解决现在的问题？我没有在 php 中尝试过，但在我的编辑器中似乎可以正常工作。

正则表达式的第一部分`http://(?:www\.)?youtu\.?be(?:\.com)?/`匹配`http://youtu.be/`，第二部分`(embed/|watch\?v=|\?v=|v/|e/|.+/|watch.*v=|)`以`|)`这意味着它不匹配*任何内容*（使其可选）。换句话说，它会修剪掉`http://youtu.be/`只留下id。

一种更直观的编写方式是使整个 if 分组可选我想，但据我所知，您的正则表达式已经解决了您的问题：

```
 #http://(?:www\.)?youtu\.?be(?:\.com)?/(embed/|watch\?v=|\?v=|v/|e/|.+/|watch.*v=)?#i 
```

注意：您的正则表达式也适用于`www.youtu.be.com`域。它会被剥离，但如果你用它来验证输入，需要注意一些事情。

**更新：**

如果您只想匹配`[youtube][/youtube]`标签内的 url，您可以使用[look arounds](http://www.regular-expressions.info/lookaround.html)。类似于以下内容：

```
(?<=\[youtube\])(?:http://(?:www\.)?youtu\.?be(?:\.com)?/(?:embed/|watch\?v=|\?v=|v/|e/|[^\[]+/|watch.*v=)?)(?=.+\[/youtube\]) 
```

您可以通过使`.+`in the look ahead 仅匹配有效的 URL 字符等来进一步完善它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:13:51.840

试试这个，希望对你有帮助

```
function YouTubeUrl($url)
{
if($url!='')
{
    $newUrl='';
    $videoLink1=$url;
    $findKeyWord='youtu.be';
    $toBeReplaced='www.youtube.com';
    if(IsContain('watch?v=',$videoLink1))
    {
        $newUrl=tMakeUrl($videoLink1);
    }
    else if(IsContain($videoLink1, $findKeyWord))
    {
        $videoLinkArray=explode('/',$videoLink1);
        $Protocol='';
        if(IsContain('://',$videoLink1))
        {
            $protocolArray=explode('://',$videoLink1);
            $Protocol=$protocolArray[0];
        }

        $file=$videoLinkArray[count($videoLinkArray)-1];
        $newUrl='www.youtube.com/watch?v='.$file;
        if($Protocol!='')
            $newUrl.=$Protocol.$newUrl;
        else
            $newUrl=tMakeUrl($newUrl);
    }
    else
        $newUrl=tMakeUrl($videoLink1);
    return $newUrl;
}
return '';
}

function IsContain($string,$findKeyWord)
{
     if(strpos($string,$findKeyWord)!==false)
    return true;
     else
    return false;
}

function tMakeUrl($url)
{
$tSeven=substr($url,0,7);
$tEight=substr($url,0,8);
if($tSeven!="http://" && $tEight!="https://")
{
    $url="http://".$url;
}
return $url;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T06:21:49.247

您可以对任何 youtube URL 使用波纹管功能

我希望这能帮到您

函数 checkYoutubeId($id)

{

$youtube = " [http://www.youtube.com/oembed?url](http://www.youtube.com/oembed?url=) = "。$id ."&format=json";

$curl = curl_init($youtube);

curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$return = curl_exec($curl);

curl_close($curl);

返回 json_decode($return, true);

}

如果 ID 与 youtube 视频 ID 匹配，此函数将返回 Youtube 视频详细信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-15T19:40:35.893

@rvalvik 答案的一点改进是包括移动链接的情况（我在与使用 iPad 导航、复制和粘贴链接的客户合作时注意到了这一点）。在这种情况下，我们有一个`m`（移动）字母而不是`www`. 正则表达式然后变为：

```
#(https?://)?(?:www\.)?(?:m\.)?(?:youtu\.be/|youtube\.com(?:/embed/|/v/|/watch?.*?v=))([\w\-]{10,12}).*#x 
```

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-31T15:01:14.743

另一个答案的轻微改进：

```
if (strpos($url, 'feature=youtu.be') === TRUE || strpos($url, 'youtu.be') === FALSE ) 
{
    parse_str(parse_url($url, PHP_URL_QUERY), $id);
    $id = $id['v'];
} 
else 
{
    $id = basename($url);
} 
```

这考虑到 youtu.be 仍然在 URL 中，但不是 URL 本身（确实发生了！），因为它可能是引用功能链接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-09T19:53:05.050

其他答案错过了一些 youtube 链接是播放列表的一部分并且具有嵌入代码所需的列表参数的点。因此，要从链接中提取嵌入代码，可以尝试以下 JS 代码：

```
 let urlEmbed = "https://www.youtube.com/watch?v=iGGolqb6gDE&list=PL2q4fbVm1Ik6DCzm9XZJbNwyHtHGclcEh&index=32"

    let embedId = urlEmbed.split('v=')[1];
    let parameterStringList = embedId.split('&');

    if (parameterStringList.length > 1) {
      embedId = parameterStringList[0];

      let listString = parameterStringList.filter((parameterString) =>
        parameterString.includes('list')
      );

      if (listString.length > 0) {
        listString = listString[0].split('=')[1];
        embedId = `${parameterStringList[0]}?${listString}`;
      }
    }

    console.log(embedId) 
```

在这里试试：[https ://jsfiddle.net/AMITKESARI2000/o62dwj7q/](https://jsfiddle.net/AMITKESARI2000/o62dwj7q/)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-05T08:15:59.917

试试这个 ：

```
$string = explode("=","http://www.youtube.com/watch?v=ZedLgAF9aEg");
echo $string[1]; 
```

**会变成：`ZedLgAF9aEg`**

# iphone - 如何通过导航按钮类推送新视图？

> ID：15218724
> 
> 赞同：0
> 
> 时间：2013-03-05T08:09:22.323
> 
> 标签：iphone

我有一个名为的类`Button class`，它继承自`UINavigationController`。在这个类中，我在导航上定义了 4 个按钮，这些按钮是`Login Button`，共享按钮，喜欢按钮，选项按钮。在项目中有很多视图，我希望每个视图上都有这些按钮.

所以我所做的是在每个其他类中创建这个类的一个对象，并在每个类中调用它的`viewDidLoad`函数。当我单击登录按钮并尝试推送实际上并未发生的“登录视图”时，问题就在这里。

任何人都可以在这方面提供帮助吗？

# iphone - Xcode-organizer 不显示应用程序

> ID：15218728
> 
> 赞同：4
> 
> 时间：2013-03-05T08:09:47.580
> 
> 标签：iphone, ios, xcode, ipad, info.plist

我为 iPhone 开发了应用程序，现在我想将它提交到商店。

当我点击管理器 - 档案时，它只显示一件事`QRUI`，它没有显示我的应用程序..

![](../Images/55078af2159259245008297ef57638ed.png) 现在，我应该如何验证和分发我的应用程序？

***请帮忙，我是iOS新手..***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:18:51.327

它是一个组织`archive`类别。首先你像下面的步骤一样创建一个档案： -

在 xcode 运行项目选项中选择设备：- ![在此处输入图像描述](../Images/70bf0c3cc40513b1a80f040f6db0cfc7.png)

之后你转到产品-->

![在此处输入图像描述](../Images/c1f73e0e25c2b82a4bb2693b6f7ff04a.png)

等待xcode的处理

![在此处输入图像描述](../Images/5af0b81379f1ab72e2e39046708d8327.png)

完成后检查您的组织组织`archives`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:18:28.740

当您在项目中使用第三方项目或库时会出现此问题。

转到第三方库/项目目标的构建设置并设置跳过安装标志 YES。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:17:31.090

当您在项目中使用第三方项目或库时会出现此问题。

如果是这样的话。

转到第三方库/项目**目标的****Build Settings**并将**Skip Install**标志设置为**YES**。

 ******![跳过安装标志](../Images/655010bbcbe16ebbd7accccf8891fe83.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-22T11:42:16.440

您可以阅读一份技术说明，它解决了我的问题，请参见此处：在此处[输入链接描述](https://developer.apple.com/library/content/technotes/tn2215/_index.html)******

# python - 筛选 SQLAlchemy 关系

> ID：15218732
> 
> 赞同：5
> 
> 时间：2013-03-05T08:10:16.820
> 
> 标签：python, sqlalchemy, pyramid

我正在使用 Pyramid + SQLAlchemy 并进行了以下设置

```
from sqlalchemy import orm
from __init__ import user_table  
from device import Device

class User(object):
  def __repr__(self):
    return 'User: ' + self.username

orm.mapper(User, user_table, properties={
  'devices': orm.relation(Device, backref='owner')
}) 
```

访问时如何添加过滤器`user.devices`？当我尝试`user.devices.filter(Device.platform==1).all()`时，我收到以下错误：

```
'InstrumentedList' object has no attribute 'filter' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:25:45.357

您可以使用[启用查询的属性](http://docs.sqlalchemy.org/en/latest/orm/join_conditions.html#building-query-enabled-properties)：

```
class User(object):
    def __repr__(self):
        return 'User: ' + self.username

    # property
    @property
    def devices_filtered(self):
        return object_session(self).query(Device).with_parent(self).filter(Device.platform==1).all()

    # or simply a method
    def devices_filtered(self, platform):
        return object_session(self).query(Device).with_parent(self).filter(Device.platform==platform).all() 
```

或查看[动态关系加载器](http://docs.sqlalchemy.org/en/latest/orm/collections.html?highlight=dynamic%20relationship%20loaders#dynamic-relationship-loaders)：

```
orm.mapper(User, user_table, properties={
  'devices': orm.relation(Device, backref='owner', lazy='dynamic')
})

# ...
user = session.query(User).get(_some_user_id)
devices = user.devices.filter(Device.platform==platform).all() 
```

*只需阅读参考文档以获取有关主题的完整说明。*

# iphone - 如何在 iOS 中为 AVCaptureAudioDataOutput 设置音频设置

> ID：15218734
> 
> 赞同：6
> 
> 时间：2013-03-05T08:10:31.910
> 
> 标签：iphone, ios, avcapturesession

我想为 AVCaptureAudioDataOutput 设置以下音频设置，我该怎么做？

```
NSMutableDictionary *recordSettings = [[NSMutableDictionary alloc] initWithCapacity:10];
    [recordSettings setObject:[NSNumber numberWithInt: kAudioFormatLinearPCM] forKey: AVFormatIDKey];
    [recordSettings setObject:[NSNumber numberWithFloat:44100] forKey: AVSampleRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:1] forKey:AVNumberOfChannelsKey];
    [recordSettings setObject:[NSNumber numberWithInt:705600] forKey:AVEncoderBitRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];

```
self.audioRecorder = [[[ AVAudioRecorder alloc] initWithURL:[NSURL fileURLWithPath:self.audioRecorderDestinationFilePath] settings:recordSettings error:nil]autorelease]; 
```

[记录设置发布]；

```

# .htaccess - Prestashop - .htaccess URL 重写（添加个人链接）

> ID：15218736
> 
> 赞同：3
> 
> 时间：2013-03-05T08:10:44.723
> 
> 标签：.htaccess, url-rewriting, prestashop

我想知道为什么个人链接（用于 url 重写）不适用于 Prestashop ......

我做了一个测试（在文件末尾添加）：

```
RewriteRule ^test$ /index.php [L] 
```

但它不起作用。我在网上搜索，但没有找到任何东西... Prestashop 的默认 URL 重写有效，但我无法添加其他链接

你能帮助我吗 ？你需要更多信息 ？

谢谢

htaccess 文件：

```
# ~~start~~ Do not remove this comment, Prestashop will keep automatically the code outside this comment when .htaccess will be generated again
# .htaccess automaticaly generated by PrestaShop e-commerce open-source solution
# http://www.prestashop.com - http://www.prestashop.com/forums

<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule . - [E=REWRITEBASE:/]
RewriteRule ^api/?(.*)$ %{ENV:REWRITEBASE}webservice/dispatcher.php?url=$1 [QSA,L]

# Images
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$1$2$3.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$1$2$3$4.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$1$2$3$4$5.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$1$2$3$4$5$6.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$1$2$3$4$5$6$7.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$1$2$3$4$5$6$7$8.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$7/$1$2$3$4$5$6$7$8$9.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$7/$8/$1$2$3$4$5$6$7$8$9$10.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^c/([0-9]+)(\-[\.*_a-zA-Z0-9-]*)(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/c/$1$2$3.jpg [L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^c/([a-zA-Z_-]+)(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/c/$1$2.jpg [L]

# Dispatcher
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^.*$ - [NC,L]
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^.*$ %{ENV:REWRITEBASE}index.php [NC,L]
</IfModule>

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType text/javascript "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/x-javascript "access plus 1 week"
    ExpiresByType image/x-icon "access plus 1 year"
</IfModule>

FileETag INode MTime Size
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

#If rewrite mod isn't enabled
ErrorDocument 404 /index.php?controller=404

# ~~end~~ Do not remove this comment, Prestashop will keep automatically the code outside this comment when .htaccess will be generated again

## Ajout manuelle ##
# RewriteRule ^kit-chaine-afam.htm$ /content/6-kit-chaine-afam [L]
RewriteRule ^www.accessoires-de-la-moto.com/kit-chaine-afam.htm$ /index.php?id_cms=6&controller=cms [L]
RewriteRule ^/test$ /index.php [L]
RewriteRule ^www.accessoires-de-la-moto.com/test2$ www.accessoires-de-la-moto.com/index.php [L]

RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
RewriteRule ^test3$ %{ENV:REWRITEBASE}index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T21:11:12.143

您只需转到首选项-> SEO 和 URL。在设置 URL 部分中，将友好 URL 切换为是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:37:29.500

这两个

```
RewriteRule ^www.accessoires-de-la-moto.com/kit-chaine-afam.htm$ /index.php?id_cms=6&controller=cms [L]
RewriteRule ^www.accessoires-de-la-moto.com/test2$ www.accessoires-de-la-moto.com/index.php [L] 
```

无法工作，因为域不是 URL 路径模式的一部分。

这条规则*应该*有效

```
RewriteRule ^/test$ /index.php [L] 
```

但是上面的这条规则来自 Prestashop

```
RewriteRule ^.*$ - [NC,L] 
```

防止它。

您可以将规则移到 Prestashop 定义之上

```
RewriteRule ^test$ /index.php [L]

# ~~start~~ Do not remove this comment, Prestashop will keep automatically the code outside this comment when .htaccess will be generated again
# .htaccess automaticaly generated by PrestaShop e-commerce open-source solution
# http://www.prestashop.com - http://www.prestashop.com/forums

<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.accessoires-de-la-moto.com$
... 
```

然后，该`/test`规则将按预期工作。但请注意不要干扰 Prentashop 的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:22:21.363

您是否在 htacces 文件中尝试过简单的“RedirectPermanent”？

```
 RedirectPermanent /old_page_urlp /new_page_url 
```

它在工作吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-05T21:46:07.420

您可以从管理面板更改 URL 重写配置和规则：

> 首选项 -> SEO 和 URL -> URL 架构

[![在此处输入图像描述](../Images/09b1aa358174bbe98d471b73d28b633b.png)](https://i.stack.imgur.com/8DGbK.png)

# php - php代码中的img标签

> ID：15218737
> 
> 赞同：1
> 
> 时间：2013-03-05T08:10:45.170
> 
> 标签：php, image

如何在 php 代码中使用 img 标签？：

这是我到目前为止的代码：

```
$message = $message."...<br /><a href=\"".$mybb->settings['bburl']."/".$announcement['threadlink']."\">".$lang->messagemore."</a>"; 
```

我希望使用图像而不是， `".$lang->messagemore."` 但我不知道如何在 php 中使用 img 标签：| 我试过谷歌搜索，但我只从 html 中找到一些标签信息，但没有从 php 代码中找到。

```
<img src="/res/gif/bullet_info_sq.gif" alt="" /> 
```

但我希望在 php 中使用它，以便我可以使用您的帮助。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:13:37.023

tl;博士

代替：`$lang->messagemore`

和：`<img src="/res/gif/bullet_info_sq.gif" alt="" />`

* * *

当您用`img`标签替换 PHP 变量时，HTML 必须仍然保留在 PHP 字符串的引号内，因此您的`img`标签的实际引号必须被转义，就像您为`a`标签所做的那样。您也可以选择使用单引号，以避免转义。这应该会产生以下任何一个等效代码片段（为了便于阅读，我添加了空格）：

**双引号（带转义）：**

```
$message = $message . "...<br />
<a href=\"" . $mybb->settings['bburl'] . "/" . $announcement['threadlink'] . "\">
    <img src=\"/res/gif/bullet_info_sq.gif\" alt=\"\" />
</a>"; 
```

**HTML 属性的单引号：**

```
$message = $message . "...<br />
<a href='" . $mybb->settings['bburl'] . "/" . $announcement['threadlink'] . "'>
    <img src='/res/gif/bullet_info_sq.gif' alt='' />
</a>"; 
```

**PHP字符串的单引号：**

```
$message = $message . '...<br />
<a href="' . $mybb->settings['bburl'] . '/' . $announcement['threadlink'] . '">
    <img src="/res/gif/bullet_info_sq.gif" alt="" />
</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:12:55.737

只需在 PHP 中回显 HTML 代码（在您的情况下为`<img>`标签），就像您为`<a>`标签所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:13:23.120

你可以这样使用，

```
$message = $message."...<br /><a href=\"".$mybb->settings['bburl']."/".$announcement['threadlink']."\"><img src='/res/gif/bullet_info_sq.gif' alt='' /></a>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:13:48.520

用这个：

```
$message = $message."...<br /><a href=\"".$mybb->settings['bburl']."/".$announcement['threadlink']."\">".'<img src="/res/gif/bullet_info_sq.gif" alt="" />'."</a>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:15:38.990

用这个

```
$message = $message."...<br /><a href=\"".$mybb->settings['bburl']."/".$announcement['threadlink']."\"><img src=\"/res/gif/bullet_info_sq.gif\" alt=\"\" /></a>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T08:15:47.753

它是这样工作的：

```
$message = $message."...<br /><a href=\"".$mybb->settings['bburl']."/".$announcement['threadlink']."\">"."<img src='".$aImageURL."' alt="" /></a>"; 
```

只需将 de img src 替换为 PHP 变量即可。（$aImageURL 将是图像的 URI）

看一下引号（我只是在 src 属性中加上引号，你可以这样做）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T08:16:18.823

如此简单，不要用双引号造成混乱“PHP 最佳使用单引号”。在字符串中使用标准 html！

```
echo ' <img src="php.gif" /> '; 
```

# oracle - 使用 oracle dbca（oracle 数据库配置助手）创建新数据库

> ID：15218739
> 
> 赞同：0
> 
> 时间：2013-03-05T08:10:49.970
> 
> 标签：oracle

我将创建一个新数据库，并将其添加新表。我正在使用 Oracle Database Express 11g r2 版本。我在谷歌上搜索了如何创建一个新的数据库。他们正在使用 Oracle DBCA，但在我的 PC 上的 oracle 工具下找不到这个工具。

如何打开这个 Oracle DBCA？

# c# - RibbonTab IsSelected 不起作用

> ID：15218745
> 
> 赞同：1
> 
> 时间：2013-03-05T08:11:08.983
> 
> 标签：c#, wpf, xaml, mvvm, ribbon

我有几个应该`RibbonTab`根据`Content`.`TabControl`

问题是有时它不起作用，我的远程 Windows XP 上的错误似乎比我使用 Windows 7 的主计算机更频繁（可能是因为它更慢）。发生错误时，再次切换选项卡无济于事，并且对于共享相同的任何视图都不起作用`IValueConverter`。

```
<ribbon:RibbonWindow Title="{Binding DisplayName}"
    x:Name="RibbonWindow"
    x:Class="Abc.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ribbon="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    xmlns:c="clr-namespace:Abc.Converters">
<ribbon:RibbonWindow.Resources>
    <c:FoobarConverter x:Key="Foobar" />
    <c:FooConverter x:Key="Foo" />
    <c:BarConverter x:Key="Bar" />
</ribbon:RibbonWindow.Resources>
<DockPanel>
    <ribbon:Ribbon DockPanel.Dock="Top">
        <a:FoobarRibbonTab IsSelected="{Binding SelectedTab, Mode=OneWay, Converter={StaticResource Foobar}}" />
        <a:FooRibbonTab IsSelected="{Binding SelectedTab, Mode=OneWay, Converter={StaticResource Foo}}" />
        <a:BarRibbonTab IsSelected="{Binding SelectedTab, Mode=OneWay, Converter={StaticResource Bar}}" />
    </ribbon:Ribbon>
    <TabControl ItemsSource="{Binding Tabs}"
                SelectedItem="{Binding SelectedTab}"/>
</DockPanel> 
```

```
public class FooConverter : IValueConverter
{
    public List<Type> ValidTypes = new List<Type>();

    public FooConverter()
    {
        ValidTypes = new List<Type>
        {
            typeof(FooView),
            // etc...
        };
    }

    public virtual object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var tabItemBase = value as TabItemBase;

        return tabItemBase != null && tabItemBase.Content != null && ValidTypes.Contains(tabItemBase.Content.GetType());
    }

    public virtual object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

**更新**

每个`RibbonTab`都有自己的`Converter`，每个`View`只存在于一个`Converter`。当我使用`Ctrl + Tab`时，错误发生得更早。

# java - FileInputStream.read() 什么时候阻塞？

> ID：15218750
> 
> 赞同：5
> 
> 时间：2013-03-05T08:11:21.483
> 
> 标签：java, inputstream, blocking, java-io, fileinputstream

该问题类似于以下两个问题。

*   [Java InputStream 阻塞读取](https://stackoverflow.com/questions/611760/java-inputstream-read-blocking)
*   [为什么 FileInputStream read() 不阻塞？](https://stackoverflow.com/questions/3677862/why-is-the-fileinputstream-read-not-blocking)

但我仍然不能完全理解它。

到目前为止，我认为以下代码中的**read()**方法将由于空文件“test.txt”而阻塞。

```
FileInputStream fis = new FileInputStream("c:/test.txt");
System.out.println(fis.read());
System.out.println("to the end"); 
```

实际上它会打印-1，我想知道为什么。

**javadoc 说*This method blocks if no input is yet available*。**

“**没有可用的输入**”是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:16:04.027

您的问题的答案可以在[.read() 的 JavaDoc 中](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28%29)找到：

> 如果还没有输入可用，则此方法会阻塞。

和

> 返回： 数据的下一个字节，如果到达文件末尾，则返回 -1。

所以，一个空文件会让你立即`-1`（而不是`read()`阻塞）

*   有可用*的*输入，因为文件存在
*   ...但它是空的，所以立即EOF。

*......没有可用*的输入......情况可能会发生，例如。当一个人从命名管道而不是普通文件中读取时，管道的另一端还没有写任何东西。

干杯，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:21:28.740

`FileInputStream`可用于读取普通文件以外的内容。一个明显的例子是[命名管道](http://en.wikipedia.org/wiki/Named_pipe)：如果您在另一端写入管道之前尝试从管道读取，则读取操作将阻塞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:37:05.803

这可能会按如下方式进行交互：`FileInputStream.read`调用本机方法，本机方法进行*读取系统调用*并阻塞等待操作系统将字节从文件读取到缓冲区并在准备好时返回。也就是说，`FileInputStream.read`使用同步 I/O 从文件中读取数据，而不是使用非阻塞、异步 I/O。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:50:39.777

您不能将“没有可用的输入”解释为“您位于 EOF 并且将不再有可用的输入”。它们是不同的条件。后者返回-1。

通常，从文件中读取的*所有*内容都会阻塞，直到数据可用。磁盘必须绕到正确的位置，磁头必须寻找正确的轨道。您还需要考虑共享驱动器上的文件或命名管道的文件，这两者都涉及网络操作，也可能会阻塞。

# asp.net-mvc - 如何在 ASP.NET MVC 中组织控制器

> ID：15218751
> 
> 赞同：1
> 
> 时间：2013-03-05T08:11:22.773
> 
> 标签：asp.net-mvc

我有一个关于如何在 ASP.NET MVC 中组织控制器的问题。例如，假设您有一个用于联系人的数据库表和一个用于活动的数据库表。活动表具有 ContactId 的外键，因此您必须向现有联系人添加活动。

现在在 ASP.NET MVC 中。Contact 控制器是否也应该处理活动动作？或者我应该创建一个 ActivityController 并在其中添加、编辑、删除？

该过程可能会有所不同，但是否有任何最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:18:05.000

这实际上取决于您如何构建屏幕。

我不知道您是如何构建屏幕的，但我说我有一个编辑联系人页面，该页面的一部分显示了活动列表，然后允许您添加/编辑/删除活动。我将使用 Ajax 来处理这个问题，然后创建一个 Activity WebApi 控制器（如果您使用 MVC4）来处理 Ajax 调用。

如果您使用的是 MVC3，那么我会将这些方法添加到 Contact 控制器中。

编辑：

支持@Husein，他比我更好地展示了他的案例——这绝对是关于你想如何处理对象图。我上面的描述假设您不是孤立地处理活动 - 它们仅作为 Contact 对象的一部分处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:28:15.023

这实际上取决于活动和联系人是否可以相互分离，或者是否必须将它们视为一个。您通常希望遵循单一职责原则。基本上，你的控制器应该有一个职责，每个动作都应该做一个特定的操作。例如，您可能有`ContactsController`. 控制器有一项职责，即操作一种类型的对象，在本例中为联系人。作为此操作的一部分，您将拥有通过让每个操作执行某些 CRUD 操作来适应此操作的操作。

另一方面，您`Activities`对每个`Contact`. 您计划对活动做什么以及计划如何对待它们完全取决于您。是否有必要列出每个联系人的每个注册活动？如果是，则将其实现为具有自己的 CRUD 操作的活动控制器。此控制器中的某些操作将接收联系人 ID，以帮助将活动分配给联系人等。

如果上一个问题的答案是否定的，并且您不需要将活动视为一个单独的流程，那么请参阅以某种方式将其集成到联系人中，但老实说，我仍然会继续将两者分开。如果需求发生变化并且您意识到活动必须是一个单独的过程，请考虑一下未来。如果您将两个模型紧密集成在一起，您将很难将它们分开（好吧，可能不是那么难，但会让人头疼）。如果现在将它们分开，从长远来看，它们会更容易维护。除此之外，将两者分开将有助于您创建更轻量级的控制器。

# static-array - 将新项目添加到静态数组

> ID：15218753
> 
> 赞同：1
> 
> 时间：2013-03-05T08:11:34.477
> 
> 标签：static-array

我对编码非常陌生，并被要求执行以下操作：创建两个静态数组来保存总收入和净收入。用户将输入每个月的总收入，净额必须计算并保存。

现在iv到目前为止是这样的：

```
public partial class Form1 : Form
{
    public static double[] gross { get; set; }
    public static double[] net { get; set; }

    public Form1()
    {
        InitializeComponent();
    }

    private void btnEnter_Click(object sender, EventArgs e)
    {
        Gross g = new Gross();
        g.ShowDialog();
        gross = new double[] { g.grossTemp };
        net = new double[] { g.netin };
    }        
} 
```

但是每次我想添加新的总收入和净收入时，它都会替换旧的，而不是将新的添加到新的索引中。我认为问题在于我正在创建一个新实例，但我不知道还能做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T10:36:52.373

您可以将 List 用作私有类型，而公共类型可以保留为这样的数组：

```
public static double[] gross  get { return  _gross.ToArray()    }

private static List<double> _gross;

private void btnEnter_Click(object sender, EventArgs e)
{
    Gross g = new Gross();
    g.ShowDialog();
    _gross.Add(g.grossTemp );
} 
```

# javascript - jquery 对象没有实时方法

> ID：15218758
> 
> 赞同：1
> 
> 时间：2013-03-05T08:11:58.063
> 
> 标签：javascript, jquery, live

你好，我在 jquery 中有一个覆盖，我只使用版本 1.6，但我想添加最新的库 1.9.1，我有这个错误，Uncaught TypeError: Object [object Object] has no method 'live' at line 20在我的代码上，我的代码是这样的。

```
(function($) {

    $('a[data-reveal-id]').live('click', function(e) {
        e.preventDefault();
        var modalLocation = $(this).attr('data-reveal-id');
        $('#'+modalLocation).reveal($(this).data());
    });

    $.fn.reveal = function(options) {

        var defaults = {  
            animation: 'fadeAndPop', //fade, fadeAndPop, none
            animationspeed: 300, //how fast animtions are
            closeonbackgroundclick: true, //if you click background will modal close?
            dismissmodalclass: 'close-reveal-modal' //the class of a button or element that will close an open modal
        }; 

        var options = $.extend({}, defaults, options); 

        return this.each(function() {

            var modal = $(this),
                topMeasure  = parseInt(modal.css('top')),
                topOffset = modal.height() + topMeasure,
                locked = false,
                modalBG = $('.reveal-modal-bg');

            if(modalBG.length == 0) {
                modalBG = $('<div class="reveal-modal-bg" />').insertAfter(modal);
            }           

            modal.bind('reveal:open', function () {
              modalBG.unbind('click.modalEvent');
                $('.' + options.dismissmodalclass).unbind('click.modalEvent');
                if(!locked) {
                    lockModal();
                    if(options.animation == "fadeAndPop") {
                        modal.css({'top': $(document).scrollTop()-topOffset, 'opacity' : 0, 'visibility' : 'visible'});
                        modalBG.fadeIn(options.animationspeed/2);
                        modal.delay(options.animationspeed/2).animate({
                            "top": $(document).scrollTop()+topMeasure + 'px',
                            "opacity" : 1
                        }, options.animationspeed,unlockModal());                   
                    }
                    if(options.animation == "fade") {
                        modal.css({'opacity' : 0, 'visibility' : 'visible', 'top': $(document).scrollTop()+topMeasure});
                        modalBG.fadeIn(options.animationspeed/2);
                        modal.delay(options.animationspeed/2).animate({
                            "opacity" : 1
                        }, options.animationspeed,unlockModal());                   
                    } 
                    if(options.animation == "none") {
                        modal.css({'visibility' : 'visible', 'top':$(document).scrollTop()+topMeasure});
                        modalBG.css({"display":"block"});   
                        unlockModal()               
                    }
                }
                modal.unbind('reveal:open');
            });     

            modal.bind('reveal:close', function () {
              if(!locked) {
                    lockModal();
                    if(options.animation == "fadeAndPop") {
                        modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
                        modal.animate({
                            "top":  $(document).scrollTop()-topOffset + 'px',
                            "opacity" : 0
                        }, options.animationspeed/2, function() {
                            modal.css({'top':topMeasure, 'opacity' : 1, 'visibility' : 'hidden'});
                            unlockModal();
                        });                 
                    }   
                    if(options.animation == "fade") {
                        modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
                        modal.animate({
                            "opacity" : 0
                        }, options.animationspeed, function() {
                            modal.css({'opacity' : 1, 'visibility' : 'hidden', 'top' : topMeasure});
                            unlockModal();
                        });                 
                    }   
                    if(options.animation == "none") {
                        modal.css({'visibility' : 'hidden', 'top' : topMeasure});
                        modalBG.css({'display' : 'none'});  
                    }       
                }
                modal.unbind('reveal:close');
            });     

        modal.trigger('reveal:open')

            //Close Modal Listeners
            var closeButton = $('.' + options.dismissmodalclass).bind('click.modalEvent', function () {
              modal.trigger('reveal:close')
            });

            if(options.closeonbackgroundclick) {
                modalBG.css({"cursor":"pointer"})
                modalBG.bind('click.modalEvent', function () {
                  modal.trigger('reveal:close')
                });
            }
            $('body').keyup(function(e) {
                if(e.which===27){ modal.trigger('reveal:close'); } // 27 is the keycode for the Escape key
            });

            function unlockModal() { 
                locked = false;
            }
            function lockModal() {
                locked = true;
            }   

        });
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T08:14:39.463

[`live`自 v1.9起已从 jQuery](http://api.jquery.com/live/)中删除。它已被多个版本弃用（自 v1.7 起）。

以下是文档关于重写它以使用`delegate`或`on`（我在每个调用上方添加评论）的说法：

> `.live()`根据其后继者重写该方法很简单；这些是对所有三种事件附件方法进行等效调用的模板：

```
// `live`, now removed
$(selector).live(events, data, handler);                // jQuery 1.3+

// `delegate`, superceded but not deprecated
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+

// `on`, the latest 
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

所以在你的情况下，而不是：

```
$('a[data-reveal-id]').live('click', function(e) { // ... 
```

你想要

```
$(document).delegate('a[data-reveal-id]', 'click', function(e) { // ...
// Or
$(document).on('click', 'a[data-reveal-id]', function(e) { // ... 
```

但是，您通常可以找到一个更接近您要挂钩的元素的容器元素，如果是这样，您希望使用它而不是`document`. 例如，假设您所有的`data-reveal-id`锚点都在一个`div`带有`id` `"stuff"`. 而不是

```
$(document).on('click', 'a[data-reveal-id]', function(e) { // ... 
```

你最好把点击挂在离锚点更近的地方：

```
$('#stuff').on('click', 'a[data-reveal-id]', function(e) { // ... 
```

但是如果除了 之外没有合适的共同祖先元素`document`，您可以使用`document`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:17:10.423

如前所述，它已从 v1.9 中删除：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

但是，您可以将代码重构为：

```
$( document ).on( 'click', 'a[data-reveal-id]', function(e) { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:33:13.837

还有[迁移](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)插件。您可以使用它来检测已弃用和删除的功能。

# c# - 动态设置 SignalR Hub 名称

> ID：15218759
> 
> 赞同：2
> 
> 时间：2013-03-05T08:11:58.703
> 
> 标签：c#, signalr

根据我从 SignalR 的文档中收集到的信息，集线器的名称由其派生类名称或`HubName`属性定义。

有没有办法动态配置集线器名称？

# c++ - 我应该避免在 C++ 中使用#define 吗？为什么，我可以使用哪些替代品？

> ID：15218760
> 
> 赞同：3
> 
> 时间：2013-03-05T08:12:00.200
> 
> 标签：c++, c-preprocessor, preprocessor-directive

对于某些类型的程序，我需要使用恒定的高值来指示某些变量的某些属性。我的意思是`color[i] = 1000000;`如果`i`树中的节点未被探索，则让。但是我经常在最后写错 0 的数量，所以我只是想知道这样做是否更好：

```
#define UNEXPLORED 1000000;
color[i] = UNEXPLORED; 
```

我记得在某处我读到过，最好避免使用#define。这样对吗？你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:13:51.940

对于简单的常量，您可以使用或者使用`const`new [`constexpr`](http://en.cppreference.com/w/cpp/language/constexpr)：

```
constexpr unsigned int UNEXPLORED = 1000000; 
```

`const`在这种情况下，使用和没有区别`constexpr`。但是，标记的“变量”`constexpr`在编译时而不是在运行时进行评估，并且可以在仅接受文字的地方使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T08:13:04.510

例如使用常量。

```
const unsigned int UNEXPLORED = 1000000; 
```

或枚举

```
enum { UNEXPLORED = 1000000 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:42:31.353

在使用常量时，上面的两个答案是正确的，但`#define`不限于单独使用。另一个使用的例子`#define`是宏。

**宏**

宏是预处理器使用的代码片段，`#define`在这方面它们的工作方式与其他声明完全一样。预处理器将用宏的代码从字面上交换您定义的符号的出现。一个例子：

```
#define HELLO_MAC do{ std::cout << "Hello World" << std::endl; }while(false)

int main(int argc, char** argv)
{
     HELLO_MAC;
} 
```

这实际上会`HELLO_MAC`用我声明的代码替换符号。如果它是一个常数，它会做同样的事情。因此，您可以将`#define`用于常量的 s 视为一种特殊的宏。

使用宏您还可以传递参数，我发现它对于在代码上执行日志记录/异常策略特别有用。例如

```
#define THROW_EXCEPT( ex_type, ex_msg ) /
    do{ throw ex_type( buildExString( (ex_msg), __LINE__, __FILE__ ) ); }while(false)

... 
// somewhere else
THROW_EXCEPT( std::runtime_error, "Unsupported operation in current state" ); 
```

该代码允许我确保每个人都使用引发异常的文件行记录。

模板通常是比宏更好的选择，但我不能在这个例子中使用模板函数，因为我需要从 throw 的位置使用`__LINE__`and`__FILE__`函数，而不是从模板函数的位置。

哪里不应该使用宏？你可以在任何地方使用其他东西。像任何宏一样，宏`#define`是经过预处理的，因此编译器根本看不到它们。这意味着永远不会为`HELLO_MAC`or创建任何符号`THROW_EXCEPT`，因此在调试器中看不到它们。如果您遇到编译错误，它们也可能会令人困惑，尤其是当它们是长宏时。

# javascript - 获取多个选择标签的值组合

> ID：15218766
> 
> 赞同：0
> 
> 时间：2013-03-05T08:12:19.473
> 
> 标签：javascript, jquery, html

所以我有 2 个选择标签，一个选择数据类型，另一个选择该数据的形式。第一个标签`Données`

```
<select style="display: block;" name="Donnee" id="Donnee" onchange="getComboB(this)" required>
<option value="">Choisir ...</option>
<option value="Alphanumérique">Alphanumérique</option>
<option value="Numérique">Numérique</option>
<option value="Booléen">Booléen</option>
<option value="Date">Date</option>
</select> 
```

第二个标签`Saisie`

```
<select style="display: block;" name="Saisie" id="Saisie" onchange="getComboA(this)" required>
<option value="">Choisir ...</option>
<option value="Libre">Valeur Libre</option>
<option value="Multiples">Valeurs Multiples</option>
<option value="Intervalle">Intervalle</option>
</select> 
```

我需要获得两个选择标签的组合才能显示某个输入。解释更多：如果我在 Saisie 选择中选择 Intervalle，这意味着间隔数据类型只能是日期或数字（这是一个例子）。所以我这样做了：

```
value_Donnee='';
function getComboB(sel) {
    var value = sel.options[sel.selectedIndex].value; 
    value_Donnee = value;
    }
function getComboA(sel) {
    var value = sel.options[sel.selectedIndex].value; 

    if(value == "Libre")
    {
    $("#contain").html('');
    }

    else if(value == "Multiples")
    {
    $("#contain").html('');
    $("#contain").html('Multiples');
    }
    else
    {
    $("#contain").html('');
        if(value_Donnee == "Numérique")
            {
            $("#contain").html('');
            $("#contain").html('Num');
            }
        else if (value_Donnee == "Date")
            {
            $("#contain").html('');
            $("#contain").html('Date');
            }
        else
            {
            $("#contain").html('');
            $("#contain").html('Le type des données ne peut être que Date ou Numérique');
            }

    }

} 
```

问题是它没有考虑 getComboB 它只采用第一个值：/任何提示。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:31:25.210

我不确定你的逻辑，但你可以尝试这样的事情：

```
$('select').change(function(){
    var donnee = $('#Donnee').val();
    var saisie = $('#Saisie').val();

    if(saisie == "Libre")
    {
        $("#contain").html('');
    }
    else if(saisie == "Multiples")
    {
        $("#contain").html('Multiples');
    }
    else
    {
        if(donnee == "Numérique")
        {
            $("#contain").html('Num');
        }
        else if (donnee == "Date")
        {
            $("#contain").html('Date');
        }
        else
        {
            $("#contain").html('Le type des données ne peut être que Date ou Numérique');
        }
    }
}); 
```

小提琴[http://jsfiddle.net/Bb6sH/](http://jsfiddle.net/Bb6sH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:45:56.617

我确定您的 jquery 包括路径有问题。因为我换成`$("#contain").html`一个简单的`alert`，一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:01:34.387

我不知道这是不是你的意思，但你可以试试这个：

```
 $(document).ready(function(){
        $('#Donnee, #Saisie'). change(function(){
          $('#contain').html(test());
        });
      });

      function test(){
        var donnee = $('#Donnee option:selected').val();
        var saisie = $('#Saisie option:selected').val();
        if (donnee == 'Numérique'){
          donnee = 'Numérique';
        } else if (donnee == 'Date'){
          donnee = 'Date';
        } else {
          donnee = 'Le type des données ne peut être que Date ou Numérique';
        }
        return saisie + ' ' +donnee;
      } 
```

# java - 如何检查用户是否已登录 Windows Active Directory

> ID：15218767
> 
> 赞同：0
> 
> 时间：2013-03-05T08:12:21.810
> 
> 标签：java, authentication, active-directory

我遇到了一个问题，由于我是登录/身份验证的新手，所以我对在哪里可以找到答案没有清晰的认识。

这是问题：

我将创建 webapp（带有 primefaces + ejb3 的 jsf ），它允许用户在没有登录对话框的情况下登录它 - 这意味着，所有关于用户角色、组等的身份验证信息都必须从 Active Directory 收集。我怎么能得到那个？如果用户至少没有提供他或她的用户名，我如何获取用户信息？我必须问 Active Directory 域怎么样？

如果不工作，有人可以提供至少一个伪代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:25:28.423

如果您谈论的是 Windows 系统，Microsoft 提供了两种能够执行 SSO（单点登录）的协议，这正是您正在寻找的：NTLM 和 SPNEGO（Kerberos 的变体）。

您的问题的答案在一定程度上取决于您的应用程序将在其上运行的操作系统。如果是 Windows，那么有几个选项可以使用 Windows API 使其更容易。( [mod-auth-sspi](http://mod-auth-sspi.sourceforge.net) ,[华夫饼](http://waffle.codeplex.com))

如果您正在运行其他系统，则必须使用提供整个堆栈的库，例如[Jespa](http://www.ioplex.com)、[modauthkerb](http://modauthkerb.sourceforge.net)或其他。

# ios - UITextView 不播放点击声音

> ID：15218768
> 
> 赞同：1
> 
> 时间：2013-03-05T08:12:22.853
> 
> 标签：ios, objective-c, uitextview

在我的应用程序中，我创建了一个 UITextView 并添加到主视图，但是当它成为第一响应者并开始输入时，我听不到键盘点击声音。即使我在设置->声音中启用了它，但仍然无法正常工作。有人对此有想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:39:38.157

也许你在键盘上的推力不够？:)

SRSLY：声音不取决于UITextView，它取决于是否启用声音和音量。AFAIK 您无法以编程方式控制键盘的点击声音。

所以你需要检查你的设备声音设置。

# c# - 将我的服务安装程序嵌入到另一个应用程序安装程序中并静默安装

> ID：15218769
> 
> 赞同：1
> 
> 时间：2013-03-05T08:12:29.113
> 
> 标签：c#, windows-services, installation

我用 C# 开发了一个 Windows 服务并为它创建了 MSI 安装程序。现在我想要的是在安装另一个用 c# 编写的应用程序时静默安装我的服务。有没有可能做到这一点？

# c++ - 自制范围锁不锁

> ID：15218775
> 
> 赞同：4
> 
> 时间：2013-03-05T08:12:48.903
> 
> 标签：c++, pthreads

我为一个无法访问任何现代 C++ 线程库（如 boost）的项目创建了以下代码。我的愿望是能够让锁在离开范围时自动释放。

共享锁工作正常。如果一个线程获取它，则在第一个线程释放它之前，其他任何东西都无法获取它。Scoped 不起作用。

这是一些输出显示我的意思。我给每个线程一个不同的名称，让它们用相同的共享锁实例化作用域锁，打印“获取”，休眠五秒钟，打印“释放”，然后离开作用域。我没有得到我期望的获取/释放对，而是快速连续地得到四个“获取”，一个 5 秒的间隔，然后是“释放”。我什至将 Scoped 中的锁更改为指针，并在获取地址之前打印地址，以确保我没有发疯。看起来它是同一个共享对象，但锁并没有阻止多次访问。

```
Lock '140734928395200'.
acquired: !!!!!
Lock '140734928395200'.
acquired: -------
Lock '140734928395200'.
acquired: ***************
Lock '140734928395200'.
acquired: ##
released: !!!!!
released: -------
released: ***************
released: ## 
```

这是 Lock.h 的源代码：

```
#include <pthread.h>
namespace Lock
{
  class Shared
  {
  public:
    Shared()
    {
      ::pthread_mutex_init(&(this->mutex), nullptr);
    }
    ~Shared()
    {
    }
    void acquire()
    {
      ::pthread_mutex_lock(&(this->mutex));
    }
    void release()
    {
      ::pthread_mutex_unlock(&(this->mutex));
    }
  private:
    pthread_mutex_t mutex;
  };
  class Scoped
  {
  public:
    Scoped(Lock::Shared& lock) : lock(lock)
    {
      this->lock.acquire();
    }
    virtual ~Scoped()
    {
      this->lock.release();
    }
  private:
    Lock::Shared& lock;
  };
}; 
```

这是我用于测试的 main.cc 文件。我正在构建：

```
g++ -std=c++11 -o try -pthread main.cc && ./try 
```

在最新的 Ubuntu 系统上使用 g++4.7。

```
#include <pthread.h>
#include <iostream>
#include "Lock.h"
#include <unistd.h>
struct data
{
  data(std::string name, Lock::Shared& lock) : name(name), lock(lock) { ; }
  std::string name;
  Lock::Shared& lock;
};
void* doStuff(void* v)
{
  data* d = (data*)v;
  for (int i = 0; i < 5; i++)
  {
    Lock::Scoped(d->lock);
    //d->lock->acquire();
    std::cout << "acquired: " << d->name << std::endl;
    ::sleep(5);
    std::cout << "released: " << d->name << std::endl;
    //d->lock->release();
    ::sleep(1);
  }
}
int main(int argc, char* argv[])
{
  pthread_t fred;
  pthread_t barney;
  pthread_t wilma;
  pthread_t betty;
  Lock::Shared lock;
  data f("##", lock);
  data b("***************", lock);
  data w("-------", lock);
  data e("!!!!!", lock);
  ::pthread_create(&fred, nullptr, doStuff, (void*)&f);
  ::pthread_create(&barney, nullptr, doStuff, (void*)&b);
  ::pthread_create(&wilma, nullptr, doStuff, (void*)&w);
  ::pthread_create(&betty, nullptr, doStuff, (void*)&e);
  ::pthread_join(fred, nullptr);
  ::pthread_join(barney, nullptr);
  ::pthread_join(wilma, nullptr);
  ::pthread_join(betty, nullptr);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T08:54:45.710

问题是：

```
for (int i = 0; i < 5; i++)
{
    Lock::Scoped(d->lock); 
```

它创建了一个`Lock::Scoped`立即构造和销毁的临时数组，因此它没有预期的同步效果。改成：

```
for (int i = 0; i < 5; i++)
{
    Lock::Scoped lk(d->lock); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T08:57:40.537

问题在这里：

```
Lock::Scoped(d->lock); 
```

这会创建一个未命名的临时对象，该临时对象会立即超出范围。

要修复，请给它一个名称：

```
Lock::Scoped lck(d->lock); 
```

# javascript - CSS - 表格单元格边框的奇怪行为仅在 chrome 中

> ID：15218776
> 
> 赞同：2
> 
> 时间：2013-03-05T08:12:50.147
> 
> 标签：javascript, jquery, css, google-chrome

我有一个带有 css 的简单表格。当我在中间行添加底部边框时，下一行有一个非常奇怪的边框。它只发生在 chrome 中，我不知道为什么。

我应该说我使用javascript将底部边框应用于中间行（因为我事先不知道表格的大小）。我试图在没有 javascript 的情况下申请，它没有奇怪的问题。

这是表格的示例，请注意中间的边框： [http ://ri-cloud.appspot.com/super_tacticko?create](http://ri-cloud.appspot.com/super_tacticko?create)

这是我用来创建中间线的 javascipt：

```
// add the middle line
var half = height / 2; // it has to be zugi anyway
var $middle = $('tr').slice(half-1, half);
$middle.find('td').addClass('middle-td'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:00:37.823

如果调整窗口大小可以解决问题（就像在我的情况下一样），它很可能是一个渲染错误...... Chrome 有一些不时出现的问题，主要是因为它试图比其他所有东西都快通过偷工减料（imo）。

解决错误的唯一方法是不断尝试不同的方法，直到找到不会触发问题的方法，或者尝试在创建表/正文后以编程方式调整其大小，然后再次将其放回正确的大小——这可能会迫使 Chrome 正确重绘……并且应该发生得足够快，以至于用户不会注意到。第三种方法可能是完全用 JavaScript 构建表格，一旦正确形成，将其嵌入到页面中。

CSS 方法可能起作用的原因是因为它将在渲染过程中与 JavaScript 样式修改的不同点使用 Chrome 的渲染方法。

基本上，我已经看到 Chrome 做了一些非常奇怪的事情。我过去用来解决奇怪的 Chrome 问题的技巧是：

1.  在尺寸计算中使用小数——即`30.1px`代替`30px`
2.  不将不透明度设置为完全 - 即`0.99`而不是`1.0`
3.  `.`设置 cookie 时不要使用以 a 为前缀的 IP 地址
4.  用于`overflow: hidden`修复某些情况下的奇怪渲染。

*哦，只是为了记录，我正在通过 Chrome v25.0.1364.97 在 Windows 7 上查看*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-26T06:49:42.877

我在 Windows 10 上的 Chrome 中遇到了类似的问题。此问题的原因是 Chrome 无法正常使用 Windows 文本大小设置功能（恕我直言，在 Win OS 中更改 DPI）。当我从 125% 文本大小切换到 100% 文本大小时，Chrome 正在正确呈现我的 HTML 表格。据我一直在测试，其他浏览器都可以使用此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-26T07:30:35.330

最后我对这个问题做了一个快速修复，如下所示：

```
table {
  tr td {
    border-color: transparent !important;
    outline: 1px solid #666;
  }
} 
```

它不是防弹的，边框的大小是 2px，但总比没有好。

# image - 在没有用户注意的情况下替换图像

> ID：15218783
> 
> 赞同：1
> 
> 时间：2013-03-05T08:13:12.780
> 
> 标签：image, jakarta-ee, jsf-2, file-io

我正在使用 JSF 2.1.7 + Prime Faces + Prime Faces Mobile。

我有一个引用图像的页面：

```
<img src="/charts/chart1.png"/> 
```

有一个单独的后台进程运行以每 2 分钟更新一次 chart1.png。（它从特定的在线 url 获取图像）。这是我用来保存图像的代码：

```
 public static String saveImage(final String strurl, final String imageFileName){
    //assume the url for the image is valid
    try {
        URL url = new URL(strurl);
        HttpURLConnection  conn = (HttpURLConnection )url.openConnection();
        conn.setConnectTimeout(1000);   //1 sec timeout
        conn.connect();

        File file = new File(imageFileName);
        BufferedImage  image = ImageIO.read(conn.getInputStream());
        ImageIO.write(image, "png", file);
        return file.getAbsolutePath();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

ImageIO.write 将删除现有的图像文件并写出一个新的。我相信上面会导致图像文件不可用的几毫秒，因此网络用户将无法看到图像。

我的问题是：

1) 真的会有图片暂时不可用的时候吗？

2）如果是这种情况，有什么可能的解决方案来解决这个问题，以便用户始终拥有可用的图像？

提前致谢。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:45:22.153

继承人我会做什么

1）首先我没有替换图像，而是创建了一个新图像chart2.png

2）然后我会改变IMG标签中的url指向一个Servlet，

比如说![](../Images/695528e09a6db220d0ea246accb9e504.png) ，在那个将被映射到`/charts/showchart` 的 servlet 中，在 servlet 中我会检查最新的可用 PNG，并将其作为响应流式传输。

通过这种方式，您可以自定义显示图像的方式或内容。

# fbconnect - (#200) 此应用程序禁用向其他用户发布动态消息

> ID：15218784
> 
> 赞同：2
> 
> 时间：2013-03-05T08:13:13.317
> 
> 标签：fbconnect

我们正在通过 facebook graph api 发送邀请。并且我们的代码在几天前运行良好，但现在我总是发现错误（#200）在我们的应用程序中禁用了向其他用户发布的动态故事。

请向我建议任何人该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:06:54.947

Facebook 于 2 月 6 日将其删除。

[在此处](https://stackoverflow.com/questions/14792062/posting-to-friends-wall-with-graph-api-via-feed-connection-failing-since-feb)和[此处](https://stackoverflow.com/questions/14056046/feed-story-publishing-to-other-users-is-disabled-for-this-application)查看类似的问题。

# javascript - 理解 js 闭包中的迭代器

> ID：15218785
> 
> 赞同：0
> 
> 时间：2013-03-05T08:13:13.943
> 
> 标签：javascript

我不明白调用这个函数是如何工作的

```
function setup(x) {
    var i = 0;
    return function () {
        console.log(i);
        return x[i++];

    };
}

var next = setup(['a', 'b', 'c']);

console.log(next());//a
console.log(next());//b
console.log(next());//c 
```

`i`每次调用如何不重置为0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:45:23.320

在您的代码中：

```
> function setup(x) {
>     var i = 0; 
```

调用时`setup`，将使用局部变量`x`和`i`. 执行开始时，`x`为传递的数组分配一个值并`i`设置为零。

```
>     return function () {
>         console.log(i);
>         return x[i++];
>     }; 
```

返回此匿名函数。它对位于其作用域链上的外部执行对象有一个闭包（全局执行对象也是如此）。

`i`所以它对and都有一个闭包`x`，其值现在只能由函数更改。

```
> }
>
> var next = setup(['a', 'b', 'c']); 
```

返回的函数被分配给`next`，因此它不再是匿名的。

```
> 
> console.log(next());//a 
```

当此行执行时，`next`返回`x[0]`，即“a”，并递增`i`到 1。

```
> console.log(next());//b 
```

当该行执行时，`next`返回`x[1]`，即“b”，并递增`i`到 2。

```
> console.log(next());//c 
```

当此行执行时，`next`返回`x[2]`，即“c”，并递增`i`到 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:15:21.950

`i`不会重置，因为它是在分配给 的函数之外设置的`next`。实际上就在它的正上方。

# java - Java ws Jboss 7 肥皂头

> ID：15218786
> 
> 赞同：2
> 
> 时间：2013-03-05T08:13:17.617
> 
> 标签：java, xml, soap, jboss

我需要阅读 SOAP 标头。下面是发送的xml：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://services.com/" xmlns:ns2="http://tech.com/">
<SOAP-ENV:Header>
    <ns2:header id="ref1">
        <session_id>63949bc1878725afd28cc8283ec3252a</session_id>
        <ip_address>127.0.0.1</ip_address>
        <user_agent>Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0</user_agent>
        <last_activity>1362395880</last_activity>
        <user_data></user_data>
        <username>serge</username>
        <logged_in>true</logged_in>
    </ns2:header>
    <ns2:header href="#ref1"/>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
    <ns1:getInvo>
        <id>1</id>
    </ns1:getInvo>
</SOAP-ENV:Body> 
```

我需要阅读包含 session_id 等的 ns2:header 内部...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:18:04.643

您可以使用以下代码阅读

```
SOAPMessage soapMessage=  context.getMessage();
SOAPPart soapPart = soapMessage.getSOAPPart();
SOAPEnvelope soapEnvelope = soapPart.getEnvelope();
SOAPHeader soapHeader = soapEnvelope.getHeader(); 
```

我们可以直接在soapheader上应用解析，如下所示

```
NodeList nodes =soapHeader.getElementsByTagName("param"); 
```

# c++ - Qt4：单独线程块 GUI 中的 while 循环

> ID：15218794
> 
> 赞同：2
> 
> 时间：2013-03-05T08:13:31.540
> 
> 标签：c++, multithreading, qt4, qthread

所以我有一个简单的 Qt4 应用程序，它有一个开始按钮、一个停止按钮和一个文本字段。当按下 Start 按钮时，会生成一个新线程，该线程会不断增加一个计数器（在 while 循环中），并且更新文本字段以通过信号/插槽反映这一点。当按下停止按钮时，计数停止，直到再次按下开始按钮。

它工作......有点。它每秒只更新一次计数器；我希望它跑得更快，比如每秒 44100 次。但是，取消 sleep(1) 调用会导致 while 循环阻塞，无法识别任何 GUI 事件，并且应用程序会冻结。此外，停止按钮仅在第二次尝试时有效？

当我对 QThread 进行子类化时，这曾经工作得非常好，但我被告知不要这样做，所以我尝试使用子类化 QObject 然后将对象移动到 QThread 来制作解决方案......但它不能正常工作像以前一样。

这是代码：

**工人.h**

```
class Worker : public QObject
{
  Q_OBJECT

  public:
    Worker();

  public slots:
    void process();
    void stopRunning();

  signals:
    void signalValueUpdated(QString);

  private:
    bool running;
}; 
```

**工人.cpp**

```
#include "Worker.h"

void Worker::process()
{
    qDebug("Worker thread id %d",(int)QThread::currentThreadId());

    static int value=0;
    running = 1;
    while(running == 1)
    {
        QString string = QString("value: %1").arg(value++);
        sleep(1); //I want to take this out or make it way shorter but I can't without it crashing.

        emit signalValueUpdated(string);

        QCoreApplication::processEvents();       
    }
}

void Worker::stopRunning()
{
    qDebug("stopRunning() invoked");
    running = 0;
} 
```

**主窗口.h**

```
class MainWindow : public QWidget
{
  Q_OBJECT

  public:
    MainWindow(QWidget *parent = 0);

  private:
    //Widgets
    QHBoxLayout * boxLayout;
    QPushButton * startButton;
    QPushButton * stopButton;
    QLineEdit * lineEdit;

    //Thread where the worker lives
    QThread * workerThread;
    //Worker object itself
    Worker * worker;
}; 
```

**主窗口.cpp**

```
#include "MainWindow.h"

 MainWindow::MainWindow(QWidget *parent) : QWidget(parent)
{
    boxLayout = new QHBoxLayout(this);
    startButton = new QPushButton("Start Counter", this);
    stopButton = new QPushButton("Stop Counter", this);
    lineEdit = new QLineEdit(this);

    boxLayout->addWidget(startButton);
    boxLayout->addWidget(stopButton); 
    boxLayout->addWidget(lineEdit);

    qDebug("Thread id %d",(int)QThread::currentThreadId());

    workerThread = new QThread;
    worker = new Worker();
    worker->moveToThread(workerThread);

    connect( startButton, SIGNAL(clicked()), workerThread, SLOT(start()), Qt::QueuedConnection ); //When the start button is clicked, start the worker thread
    connect( startButton, SIGNAL(clicked()), worker, SLOT(process()), Qt::QueuedConnection ); //When the start button is clicked, start the worker thread
    connect( workerThread, SIGNAL(started()), worker, SLOT(process()), Qt::QueuedConnection ); //When the worker thread starts, begin the Worker object's process function
    connect( stopButton, SIGNAL(clicked()), worker, SLOT(stopRunning()), Qt::QueuedConnection ); //When the stop button is clicked, invoke the Worker's stopRunning()
    connect( worker, SIGNAL(signalValueUpdated(const QString&)), lineEdit, SLOT(setText(const QString&)), Qt::QueuedConnection ); //When the Worker emits a signalValueChanged, update the lineEdit to reflect this

} 
```

如果没有 Worker.cpp 中的 sleep(1) 和 processEvents()，整个事情就会崩溃，但是有了它们，速度就会变慢，每秒只更新一次数字，而不是 1000 或更多。如何使 while(running) 循环不阻塞？

提前致谢！仍在尝试围绕在 Qt 中进行多线程处理的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:22:21.317

1.  如果您不需要它，请在工作人员中删除`QCoreApplication::processEvents()`（为什么需要它？GUI 事件应该已经由主线程处理......）。这可能是您的问题的原因。

2.  以正确的方式连接线程信号：

    ```
    connect(workerThread, SIGNAL(started()), worker, SLOT(process()));
    connect(startButton, SIGNAL(clicked()), thread, SLOT(start())); 
    ```

    （去掉`startButton.clicked()`->的连接——`worker.process()`没用，不做评论里写的）

    ### 为什么要删除它？

    因为将按钮直接连接到worker中的进程是不对的。您应该将按钮连接到 Thread 的开头，然后将 Thread (with started) 连接到 worker `process()`。避免直接连接应该可以避免您面临的 GUI 冻结问题。

此外，每次单击按钮时，您都需要创建一个新线程并“触发”它。您可以通过将按钮连接到`SLOT`窗口中的 a 来执行此操作，并从中创建线程（在`MainWindow`构造函数中创建它将不起作用）。

* * *

取自我拥有的（工作）程序：

```
 // You need another slot in MainWindow, let it be "startProcessing()"
  // in MainWindow::MainWindow, connect the start button to startProcessing()
  connect(btnStart, signal(clicked(), this, SLOT(startProcessing())

  // inside the startProcessing slot
  void MainWindow::startProcessing() {
     ...
     Worker* worker = new Worker;
     QThread* thread = new QThread;

     // start the work
     worker->moveToThread(thread);
     connect(thread, SIGNAL(started()), worker, SLOT(process()));

     // Take care of cleaning up when finished too
     connect(worker, SIGNAL(finished()), thread, SLOT(quit()));
     connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));
     connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));

     thread->start(); 
  } 
```

您可能已经注意到，我还添加了代码来清理它（`deleteLater()`）。

停止按钮也会给您带来一些问题，但是您现在应该对如何继续有了一个好主意。

# perl - Selenium 和 Mozrepl 有什么区别？

> ID：15218799
> 
> 赞同：1
> 
> 时间：2013-03-05T08:13:38.613
> 
> 标签：perl, firefox, selenium

据我所知，mozrepl 使用 WWW::Mechanize::Firefox 来自动化 firefox。IE。您创建脚本并点击解释命令，将其作为输出发送到 firefox 浏览器。

另一方面，Selenium 允许您在浏览器中记录操作，并且您可以将操作输出为各种语言的脚本。

因此，本质上，mozrepl 将脚本（片段）作为输入，将输出作为浏览器操作。Selenium 接受浏览器操作并将它们作为脚本输出。

或者他们都可以执行这些功能吗？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:08:53.937

你误解了[`MozRepl`](https://github.com/bard/mozrepl/wiki)和[`WWW::Mechanize::Firefox`](https://metacpan.org/module/WWW::Mechanize::Firefox) 。`Mozrepl`是 Firefox 的一个扩展，它提供了一个 telnet 接口（默认情况下在端口 4242 上），可以直接访问 Firefox 的[Gecko 引擎](https://developer.mozilla.org/en-US/docs/Mozilla/Gecko)的内部功能，包括每个窗口的文档对象模型。

该接口可以直接在控制台使用，也可以由软件驱动，例如 Perl`WWW::Mechanize::Firefox`模块，它提供了与模块类似的接口`WWW::Mechanize`。还有一个[`MozRepl`](https://metacpan.org/module/MozRepl)Perl 模块以相同的方式连接到扩展，但提供了不同的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:23:11.777

然后可以运行 selenium 生成的脚本，因此它确实执行了这两个功能。

你有它倒退; WWW::Mechanize::Firefox 使用 mozrepl，而不是相反。

Selenium 在浏览器上用 javascript 实现，支持多种浏览器；它通常用于测试。

另一方面，WWW::Mechanize::Firefox 通常用于抓取或执行一些需要浏览器的操作，而不是测试。

# xml - 使用vbscript获取xml文件中的属性

> ID：15218800
> 
> 赞同：1
> 
> 时间：2013-03-05T08:13:43.980
> 
> 标签：xml, vbscript

我正在使用递归方法遍历 xml，并希望确定特定节点是否具有任何属性。这是我尝试过的

第一种方法：使用 foreach 循环获取所有属性的列表，但这种方法的问题是，如果任何节点没有任何属性，则会引发错误

第二种方法：通过作为参数传递的属性名称查找属性并验证它是否返回 null，但在这种情况下，我需要将所有属性名称放在手边，这永远不会让我继续使用递归方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:58:05.413

看过[这个](https://stackoverflow.com/a/14987356/603855)的人会买：

第一种方法是正确的。一个简单的实现：

```
 Dim oFS    : Set oFS = CreateObject("Scripting.FileSystemObject")
  Dim sFSpec : sFSpec  = oFS.GetAbsolutePathName("..\data\so15218800.xml")
  Dim oXML   : Set oXML = CreateObject("Msxml2.DOMDocument.6.0")
  oXML.load sFSpec
  If 0 = oXML.parseError Then
     recursiveTraversalAtt oXML.documentElement, 0
  Else
     WScript.Echo objMSXML.parseError.reason
  End If

Sub recursiveTraversalAtt(oElm, nIndent)
  WScript.Echo Space(nIndent), oElm.tagName
  If 0 < oElm.childNodes.length Then
     If 0 < oElm.attributes.length Then showAttr oElm, nIndent
     Dim oChild
     For Each oChild In oElm.childNodes
         recursiveTraversalAtt oChild, nIndent + 2
     Next
  Else
     If 0 < oElm.attributes.length Then showAttr oElm, nIndent
  End If
End Sub

Sub showAttr(oElm, nIndent)
  Dim oAttr
  For Each oAttr In oElm.attributes
      WScript.Echo Space(nIndent + 1), oAttr.name, oAttr.value
  Next
End Sub 
```

输出：

```
 TestSuites
   TestSuite
    SuiteName Regression
    TCName TestCase 1
     TestCase
      TCName TestCase 1
      abc 123
       TestStep
        TSName TestStep 1
       TestStep
        TSName TestStep 2
       NoAttr
         TestSuite
          SuiteName Regression
          TCName TestCase 1
           TestStep
            TSName TestStep 1
     TestCase
      TCName TestCase 2
       TestStep
        TSName TestStep 1
       TestStep
        TSName TestStep 2
   TestSuite
   TestSuite
    SuiteName Sanity 
```

# mysql - MySQL：如何确保对多个字段的唯一约束适用于 NULL 值？

> ID：15218801
> 
> 赞同：2
> 
> 时间：2013-03-05T08:13:45.037
> 
> 标签：mysql

这就像这个问题的第 2 部分：[An issue while creating multiple unique columns with GORM](https://stackoverflow.com/questions/15218062)

我创建了一个对多个字段（描述、is_active、deleted_at）具有*唯一约束的表。*原来它适用于这样的行：

```
编号| 描述 | is_active | 删除_at  
1 | 描述1 | 真实 | 2000 年 1 月 1 日
2 | 描述1 | 真实 | 2000 年 1 月 1 日
```

并且不像这样工作：

```
编号| 描述 | is_active | 删除_at  
1 | 描述1 | 真实 | 空值
2 | 描述1 | 真实 | 空值
```

而且我也不希望重复具有 NULL 值的行。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:48:02.913

> **[13.1.14。创建表语法](http://dev.mysql.com/doc/refman/5.6/en/create-table.html)**
> 
> UNIQUE 索引创建一个约束，使得索引中的所有值都必须是不同的。如果您尝试使用与现有行匹配的键值添加新行，则会发生错误。**对于所有引擎，UNIQUE 索引允许包含 NULL 的列有多个 NULL 值。**

作为一种解决方法，您可以尝试`deleted_at`使用默认值 0 使列不可为空

```
deleted_at NOT NULL DEFAULT 0 
```

并围绕它构建您的查询和应用程序逻辑。

另一种选择是使用触发器强制执行此约束。

# machine-learning - 小数据集多特征的决策融合

> ID：15218806
> 
> 赞同：0
> 
> 时间：2013-03-05T08:14:05.040
> 
> 标签：machine-learning, computer-vision

这不是一个很具体的问题，我只是想从这个论坛的同事那里收集想法。

我的问题是；

我从一个摄像头收集的视频数据中估计了人的身高、大小和衣服颜色，我们称之为这些特征，我有一组与另一个数据集相似的人，但从另一个摄像头收集。所以我想识别第二个数据集中的人，如果他们匹配第一个数据集中的特征（比如重新识别）但是，我对如何将这些特征融合在一起以及如何匹配或排列它们感到困惑（就像分类）。

请我需要建议和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:42:58.637

你可以试试[Canonical Correlation Analysis](http://en.wikipedia.org/wiki/Canonical_correlation)。维基页面的摘录：

在实验环境中，典型相关的典型用途是采用两组变量并查看两组变量的共同点。

典型相关结果的可视化通常是通过显示显着相关性的典型变量对的两组变量的系数的条形图。一些作者建议，最好将它们绘制为日光图，一种带有射线状条的圆形格式，每一半代表两组变量，例如[“典型相关分析：使用复合日光图表示多种模式”](http://ti.arc.nasa.gov/m/profile/adegani/Composite_Heliographs.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:51:39.343

我同意这听起来像是一个分类问题。不过，您将需要设置两个类，例如人类/非人类。

然后，您必须检查您选择的功能是否适合您的特定问题。您可以为数据库中的每个人绘制特征；这意味着，2D plot x = feature1, y = feature2，对整个数据库从特征 1 到 n 执行此操作。它将让您知道某个特征是否与将人类从其环境中分类的任务相关。

现在，看起来您正在尝试进行二进制分类：人类/非人类。[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)非常适合这样的任务，但如果您不熟悉它或一般的[机器学习](http://en.wikipedia.org/wiki/Machine_learning)，您可以从更简单的算法开始，例如[kNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)。

不要忘记在比方说 [0 1] 之间规范化您的数据，我认为原因很明显！一旦你选择了你的分类算法，你就必须量化你的算法在完成它的任务时有多好。为此，您可以尝试[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)（留一法...等），然后是[混淆矩阵](http://en.wikipedia.org/wiki/Confusion_matrix)。

玩得开心 ！

# real-time - VxWorks 6.6 性能

> ID：15218808
> 
> 赞同：2
> 
> 时间：2013-03-05T08:14:05.680
> 
> 标签：real-time, vxworks

我试图找到 vxworks 6.6 的特性。
我想知道什么是执行时间：

1.  上下文切换
2.  进程间通信 - 使用队列

我在“VxWorks 和 RTLinux 的性能分析”一文中发现了一些关于这个问题的有趣工作。但我想确认这个信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:23:56.733

您的问题无法给出准确的答案。执行时间与运行应用程序的硬件直接相关。

所有基准测试（不仅是 VxWorks）都应该提供精确的硬件配置，并且应该按原样进行。您无法推断给定软件在不同硬件上的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T13:00:50.630

现在我使用的是VxWorks 6.7，我写了一些测试用例来测量上下文切换时间，你也可以创建测试用例。步骤：首先创建两个任务（任务A，任务B），然后将任务A切换到任务B，您应该读取切换前和切换后之间的时间间隔。如果您使用奔腾，请使用 pentiumTscGet32() 记录时间，或者您可以使用示波器。如果您想查看更多详细信息，请访问网站[http://www.segger.com/embos-context-switching-time.html](http://www.segger.com/embos-context-switching-time.html)。我希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T00:56:10.490

上下文切换时间很大程度上取决于您正在执行的硬件。每个硬件都有自己的板级支持包，用于实现该特定系统的内核上下文切换。

# ios6 - 在使用 AFNetworking 的 curl http 标头上需要帮助

> ID：15218811
> 
> 赞同：0
> 
> 时间：2013-03-05T08:14:32.523
> 
> 标签：ios6, authorization, afnetworking

我无法使用 accesstoken 附加 curl 标头授权，如下所示：

```
curl -X GET -H "Authorization: AccessToken xxxxxxx" 
```

我尝试过使用以下内容：

```
NSString *baseurl = @"http://localhost.com:9000";
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:baseurl]];
[httpClient setAuthorizationHeaderWithToken:@"xxxxxxxxx"];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET"
                                                        path:@"ios/posts"
                                                  parameters:nil]; 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:07:44.623

您可以在[AFHTTPClient](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L422-L424)的代码中看到，当您调用`setAuthorizationHeaderWithToken`它时，它实际上所做的只是`setDefaultHeader:value`使用一些预定义的值进行调用。您想要的格式看起来与这些值不相符。您可能需要做的是这样的事情：

```
[httpClient setDefaultHeader:@"Authorization" value:[NSString stringWithFormat:@"AccessToken %@", @"xxxxxxx"]]; 
```

# mysql - 如何处理快速增长的mysql表

> ID：15218814
> 
> 赞同：1
> 
> 时间：2013-03-05T08:14:40.403
> 
> 标签：mysql, sql, database, performance, database-design

我在mysql数据库中有两个表

1.  tbl_comments
2.  tbl_votes

当用户点击评论下方的“喜欢”或“不喜欢”按钮时，会在 tbl_votes 中插入一个新行，其中包含 comment_id、user_id 和 vote_type。这意味着如果每天有 100 个用户在 100 条评论上单击“喜欢”或“不喜欢”按钮，它将在 tbl_votes 表中插入 10,000 行。因此，随着用户数量的增加和投票数量的增加，tbl_votes 将迅速增加。并且假设当 tbl_votes 中有 100,000,000 行时，它也会影响性能并减慢 sql 查询。

我该如何处理这个解决方案或任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:18:27.503

这是一个完美的解决方案。只要您将索引设置正确就可以了。（主键上的索引和帖子ID）

以stackoverflow为例，每个帖子，回复评论都有自己的投票系统，无论是向上还是向下，都会记住谁投票，他们有大约2亿多条消息+回复，每个人都有自己的投票，而且它仍然快速响应。

只要索引设置正确，它应该执行得很好。我可能会建议使用 bigint 作为主键...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:23:21.867

我不会担心`1 billion`可以将索引保留在内存中的机器上的行的应用程序性能。

性能取决于：

1.  这些查询做了多少连接
2.  您的索引设置得如何
3.  机器中有多少***RAM***
4.  速度和处理器数量
5.  硬盘驱动器的类型和主轴转速
6.  查询中返回的行大小/数据量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:23:31.757

一些结论：

如果您选择 rdbms：如果正确索引表以选择评论的总喜欢数，则插入表中的行数并不重要，当然您需要保持结果缓存。快速数据选择的另一种方法 - 是保持一些投票数据聚合，所以如果用户投票支持评论，那么您的表中将有 1 个插入/删除并在另一个表上更新，例如

```
comment_id
rate 
```

因此，您将为您需要的任何评论选择费率，并且聚合表的总行数会少得多。

另一个好方法是使用键值存储。假设您的键是comment_id，并存储原始数据的值

```
user_id
vote_type 
```

根据您选择或不选择Sql 存储，数据可能完全存储在内存中，并且所有选择/更新操作都会非常快速地工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T07:36:06.283

表的大小不影响`SELECT`查询并不完全正确。对于大表，我建议使用 TokuDB。

在这两种情况下，当您想要`DELETE`一些数据时都会出现问题。此时，您有 2 个选择：集群键或开始考虑不同的架构（水平分片可能是一个好方法）：

# ruby-on-rails-3 - rails：循环错误中的循环

> ID：15218815
> 
> 赞同：1
> 
> 时间：2013-03-05T08:14:42.227
> 
> 标签：ruby-on-rails-3

谁能告诉，为什么这段代码有效？

```
 <% @products.each do |p| %>
         <%= link_to p.name, product_path(p.id), :class => "title" %>
    <%end%> 
```

这不是吗？

```
 <% @products.in_groups_of(2).each do |product_array| %>
        <% product_array.each do |p| %>
          <%= link_to p.name, product_path(p.id), :class => "title" %>
        <% end %>
    <%end%> 
```

代码给出了 nil:NilClass 的未定义方法“名称”的错误。我没有得到它的线索。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:36:41.787

`nil`如果没有足够的记录，它会附加，这就是它给出`nil:NilClass`错误的原因

```
>> %w(1 2 3).in_groups_of(2)        # => [["1", "2"], ["3", nil]]
>> %w(1 2 3).in_groups_of(2,false)  # => [["1", "2"], ["3"]] 
```

见[in_groups_of(number, fill_with = nil)](http://apidock.com/rails/Array/in_groups_of)

```
<% @products.in_groups_of(2, false).each do |product_array| %>
    <% product_array.each do |p| %>
      <%= link_to p.name, product_path(p.id), :class => "title" %>
    <% end %>
<%end%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:32:07.180

听起来您的产品数量是奇数。如果您尝试将奇数分成两组，最后一组中的最终产品将为 nil。您可以添加：

```
unless p.nil?
  <%= link_to p.name, product_path(p.id), :class => "title" %>
end 
```

以确保您有一个实例。

# php - PHP Code Igniter Ion Auth - 无法成功创建新的用户层

> ID：15218819
> 
> 赞同：0
> 
> 时间：2013-03-05T08:15:06.460
> 
> 标签：php, codeigniter, ion-auth, codeigniter-helpers

我是 CodeIgniter 的新手，尤其是 Ion Auth。我正在构建一个具有三层用户的网站：用户、版主和管理员。我的目标是使用这个代码片段：

```
 if (!$this->ion_auth->in_group('moderator'))
    {
        //redirect them to the because they must be a moderator
        redirect($this->config->item('base_url'), 'refresh');
    } 
```

在授予访问权限之前检查用户是否是管理员。

我已经编辑了我的“组”表，如下所示：

（ID、姓名、描述）1 admin Administrator，2 位成员 General User，3 位版主 版主

我还更新了“user_groups”表中的一个用户，使其“group_id”为“3”。

但是，当我测试我的代码时，它总是允许我的管理员查看页面（这很好），但它会重定向我的版主。

我没有更改 ion_auth 库文件或任何模型中的任何内容，但我确实手动创建并插入到我的所有表中，因为 MySql 不喜欢它被加载。

编辑：我认为它可能连接到我的数据库，因为我试图通过更改“users_group”表中的“group_id”来将用户提升为管理员，而我的网站不会将他们识别为管理员。但是，我没有收到任何错误，但我的代码除了管理员之外没有识别任何人。

提前感谢您提供的任何帮助-我正在拔头发！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:50:50.367

我也在使用这个 ION Auth 并且非常适合我。我还创建了多访问用户。我所做的是我只修改了控制器。模型和库我没碰过。

你能更详细地阐述你的问题吗？你是什​​么意思它重定向你的版主（重定向到哪里）。

给出一个详细的问题。

# java - 为所有开发人员强加相同的代码格式是个好主意吗？

> ID：15218820
> 
> 赞同：0
> 
> 时间：2013-03-05T08:15:10.827
> 
> 标签：java, eclipse, code-formatting

我们正在考虑在我们的项目中采用单一的标准代码格式（在 eclipse 中使用保存操作自动格式化）。原因是目前几个 (>10) 开发人员使用的代码格式存在很大差异，这使得一个开发人员更难处理另一个开发人员的代码。同一个 Java 文件有时会使用 3 种不同的格式。

所以我相信优势很明显（可读性 => 生产力），但强加这个是个好主意吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:19:28.567

是的，为所有开发人员提供一种代码格式样式是件好事。

设计代码样式格式并将其导入所有开发人员 eclipse。

当我们`merging code`要`'Version controll'`系统时，这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:24:13.130

在我们的项目中，我们得到了解决方案。一件事是你的IDE应该是eclipse。然后它有“保存动作”：window->preference->java->editor->save 动作。每次开发者在保存java代码时，都会用配置好的模板对代码进行格式化。所以你只需要创建一个配置文件或者只是导出eclipse的默认文件并更改它，然后发送给其他开发人员。让他们导入它并打开保存操作。

# php - 序列化或内爆

> ID：15218827
> 
> 赞同：8
> 
> 时间：2013-03-05T08:15:36.427
> 
> 标签：php, performance, serialization, explode, implode

我需要在数据库中存储大量二维数组，但不知道该使用什么：`serialize`或`implode`. 所以我做了一些测试，找出哪个工作得更快，得出的结论是`serialize`：

```
Execution times: 1'000'000
Serialize: 1.4974119663239 seconds
Implode: 2.5333571434021 seconds
Explode: 4.0185871124268 seconds
Unserialize: 1.6835169792175 seconds 
```

所以问题是：为什么*implode+explode*比*serialize+unserialize*慢得多？

PS：我已经找到[了这个](https://stackoverflow.com/questions/13197255/serialize-vs-implode)问题，但这并不是我要问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:22:43.190

我的想法是`explode`/`implode`对字符串进行操作，这就是原因，而`serialize`/`unserialize`输出/输入字符串在结尾/开头。可能你的弦越多，你的弦`implode`越长`explode`，速度越慢，你试过吗？

我不知道该使用哪个，这取决于您以后是否希望处理输出字符串，我认为`serialize`d 字符串更难解析。但是要将其存储在数据库或文件中，我会使用`serialize`.

# c - SWIG、OpenCOBOL 和混合目标

> ID：15218829
> 
> 赞同：2
> 
> 时间：2013-03-05T08:15:44.033
> 
> 标签：c, swig, gnucobol

OpenCOBOL 在编译二进制文件的过程中使用中间 C 源代码，使其能够访问整个 libc 世界。以集中嵌入多个 SWIG 包装器为目标：

```
cobc -C nextbig.cob
swig -java nextbig.i
gcc nextbig.c nextbig_wrapper.c
gcc -shared ... 
```

gcc 构建了一个非常好的二进制文件，Java 和 COBOL 编译器的 C 输出很好地混合在一起。

仅测试`swig -tcl`, `-perl`,`-python`和`-java`到目前为止（`nextbig_wrapper.c`当然都不同）。

`swig -java`混合（例如）和`swig -python`跨越相同的`nextbig.c`和会涉及多少悲伤`nextbig.i`？`_wrapper.c`在管理两个或多个目标文件时，是否存在用于手动干预的已知习语？还是众所周知的事情不该做？

# php - 使用会话在网页中显示来自 mysql 数据库的数据

> ID：15218834
> 
> 赞同：1
> 
> 时间：2013-03-05T08:15:56.757
> 
> 标签：php, mysql, session

我只需要显示来自 mysql 数据库的数据。当用户提交表单时，所有数据都已经存储在数据库中。因此，在用户登录后的登录页面中，我需要显示用户全名以及数据库表中的其他一些列。本质上，我希望页面显示 Welcome *fullname*，然后在表格中显示数据库中的其他一些列。我应该如何使用会话对此进行编码？注意：我尝试在登录后使用会话显示用户的全名和当前余额。我的代码如下：

```
<?php
    // Connect to database display welcome Full name, then date, name, credit, debit, balance
    session_start();
    $fullname="";

    $currentbalance="";
    if (!isset($_SESSION)){
    session_start();
    }
    echo $_SESSION['fullname'];

    ?>
    Welcome <?php echo $_SESSION['fullname']; ?>.
    <table border ="1">
    <th>DATE </th>
    <th>'.$fullname.' </th>
    <th>CREDIT </th>
    <th>DEBIT</th>
    <th><?php echo $_SESSION['currentbalance']; ?</th>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:23:11.417

当您登录时，您需要存储`fullname`在`session`like

```
$_SESSION['fullname'] = $_REQUEST['fullname']; 
```

之后`login`，您可以`fullname`在主页上获得此信息。

```
$session_name = $_SESSION['fullname']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:26:31.063

```
<?php
    // Connect to database display welcome Full name, then date, name, credit, debit, balance
    if (!isset($_SESSION)){
    session_start();
    }
    $fullname="";
    $currentbalance="";

    $_SESSION['fullname']=$fullname;
$_SESSION['currentbalance ']=$currentbalance ; // Where $fullname and $currentbalance must be already defined by the query

    ?>
    Welcome <?php echo $_SESSION['fullname']; ?>.
    <table border ="1">
    <th>DATE </th>
    <th>'.$fullname.' </th>
    <th>CREDIT </th>
    <th>DEBIT</th>
    <th><?php echo $_SESSION['currentbalance']; ?</th>
    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:21:58.773

在登录过程中，只需将用户 ID 存储到会话中，这样您就可以通过该用户 ID 轻松地从数据库中获取所有信息。

```
"select * from `users` where id='".$_SESSION['userid']."'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-12T14:54:13.387

使用此代码，您将会话放在花括号中。

```
"select * from `users` where id={$_SESSION['userid']}" 
```

# matlab - 提取序列矩阵元素？

> ID：15218837
> 
> 赞同：0
> 
> 时间：2013-03-05T08:16:03.753
> 
> 标签：matlab, loops, matrix

我有一个矩阵，如下所示：

```
A=[2 4;1 3;8 6;5 1;4 9] 
```

现在我需要将矩阵 A 提取为两部分：

```
newpoint=[2 4];
rest=[1 3;8 6;5 1;4 9]; 
```

然后再次应用循环以将第二列提取为新点：

```
newpoint=[1 3];
rest=[2 4;8 6;5 1;4 9]; 
```

再次应用循环以将第三列号作为新点：

```
newpoint=[8 6];
rest=[2 4;1 3;5 1;4 9]; 
```

取行序列中的数字，直到最后一行。哪位好心人帮忙看看，谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:24:00.730

你说你想提取列，但给出了行的例子。我继续前进并假设您的意思是行。

您可以使用 for 循环来完成。

```
A = [2 4; 1 3; 8 6; 5 1; 4 9];

for idx = 1:size(A, 1)
    newpoint = A(idx, :);
    rest = A; % Copy A to rest
    rest(idx, :) = []; % Remove newpoint line
    % do stuff
end 
```

* * *

前两次迭代的结果：

```
newpoint =

     2     4

rest =

     1     3
     8     6
     5     1
     4     9

newpoint =

     1     3

rest =

     2     4
     8     6
     5     1
     4     9 
```

`A`如果您的矩阵很大，这不是一个好方法。

**编辑：**事实上，不要使用这种方法。George Aprilis 对其进行计时，发现 100000x2 矩阵需要 123 秒。我想我的电脑要慢得多。耗时 216 秒。我再说一遍，不要使用这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:10:20.977

除了 HebeleHododo 的回答，如果你有大矩阵，也许你可以试试这个：

```
A = [2 4; 1 3; 8 6; 5 1; 4 9];

B = zeros(size(A,1)-1,size(A,2));

for idx = 1:size(A, 1)
    newpoint = A(idx, :);
    B(1:idx-1,:) = A(1:idx-1,:);
    B(idx:end,:) = A(idx+1:end,:);
    % do stuff
end 
```

它并没有摆脱`for`循环，而是预先分配了临时B矩阵，并且A和B之间的副本清晰，这使得它更快。

对于`A = rand(100000,2);`HebeleHododo 的方法，在我的计算机中大约需要 123 秒，而上面的方法需要大约 85 秒。

**编辑：** *仅供参考，时间是使用`Intel Core i5-3450 CPU @ 3.10GHz`和`Matlab R2011b`*

# amazon-web-services - 一年的aws带宽报告如何？

> ID：15218839
> 
> 赞同：3
> 
> 时间：2013-03-05T08:16:04.523
> 
> 标签：amazon-web-services, amazon-ec2, bandwidth

我需要计算一年的 AWS 带宽使用情况，从账户活动中我看不到数据传输选项来获取统计信息，它如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:31:47.213

[单击AWS 控制台](https://console.aws.amazon.com)右上角的帐户名称。选择*账单和成本管理*、*报告*、*AWS 使用报告*，您几乎可以下载任何指标。

您可能要选择：

*   *服务：亚马逊弹性计算云*
*   *使用类型：DataTransfer-Out-Bytes*

然后，您可以以 XML 或 CSV 格式下载任何指定时间段的详细统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T07:24:29.977

转到`Billing & Cost Management`： [![aws 计费和成本管理](../Images/e053aed138707e372e970e42b96fd58e.png)](https://i.stack.imgur.com/ftosJ.png)

# c# - 将指定计数添加到信号量会导致它超过其最大计数错误

> ID：15218842
> 
> 赞同：1
> 
> 时间：2013-03-05T08:16:13.510
> 
> 标签：c#, database, linq-to-sql, semaphore

我正在使用以下代码访问本地 sql express 数据库：

```
using (MessageBoxDbDataContext db = new MessageBoxDbDataContext())
{
    var msg = (from msgs in db.messages 
               where id == msgs.id select msgs).FirstOrDefault();

    if (msg == null)
    {
        throw new Exception(
           string.Format("Message with id {0} was not found in db.", id));
    }

    msg.status = (int)status;
    msg.updated_at = DateTime.Now;

    db.SubmitChanges();
} 
```

有时我会在以下位置收到“将指定的计数添加到信号量会导致它超过其最大计数”错误：

```
var msg = (from msgs in db.messages
           where id == msgs.id select msgs).FirstOrDefault(); 
```

如果有人有想法，我正试图弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-13T12:23:00.443

一旦我们将“Pooling=False”条件添加到连接字符串，它将禁用连接池并运行应用程序而不会出现任何问题

# wix - 无论参数启用日志文件

> ID：15218852
> 
> 赞同：0
> 
> 时间：2013-03-05T08:16:59.790
> 
> 标签：wix, wix3.5

要写入日志文件，我知道必须将带有目标路径的参数 /l*v 附加到 msi 文件中。如果我希望在未提供参数的情况下进行日志写入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:48:33.453

您可以在系统注册表中指定日志记录策略，如果未指定命令行开关，所有包都将遵循它。有关更多详细信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369776.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:42:03.183

Windows Installer v4.5+ 支持[MsiLogging 属性](http://msdn.microsoft.com/en-us/library/aa370322%28v=VS.90%29.aspx)。旧版本的 MSI 需要设置命令行选项或使用[日志记录策略注册表项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369776%28v=vs.85%29.aspx)。

# selenium - 如何在 Fitnesse 中使用 Seleium/Xebium 场景创建决策表

> ID：15218853
> 
> 赞同：0
> 
> 时间：2013-03-05T08:17:00.103
> 
> 标签：selenium, fitnesse

我已经使用 Xebium/Selenium 在健身中创建了几个场景。他们工作得很好，但我想从我的一个场景中创建一个决策表。

所以我尝试以下方法：

```
| Verifiera ärendet | selenium driver fixture |
| tabellRadsNr | längd | bredd | grisar | höns | getter | får | kod | felbeskrivning |
| 19 | 50 | 20 | 201 | 0 | 0 | 0 | R110 | Nekad | 
```

最后是：

```
Could not invoke constructor for VerifieraÄrendet[1]
The instance decisionTable_25\. does not exist 
```

当我自己运行“Verifiera ärendet”场景时，它会起作用，所以我想我错过了一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:03:06.923

问题是我混淆了参数名称和它们的值名称。所以结构基本上是

```
| scenarioname parametername2 |
| parametervaluename1  | parametervaluename2 |
| row1value1 | row1value2 |
| row2value1 | row2value2 | 
```

# iphone - 仅在 reloadData 完成后调用函数

> ID：15218861
> 
> 赞同：0
> 
> 时间：2013-03-05T08:17:38.173
> 
> 标签：iphone, ios, objective-c, xcode

我有一个`tableView`并且需要`tableView`在重新加载后执行一个功能。我怎么知道是否`reloadData`已经完成？假设我有填充 的methodA `tableView`，一旦`[tableView1 reloadData]`完成，我想调用methodB。谁能帮我这个？我一直在寻找几个小时...谢谢！

```
- (void) methodA
{

    NSString *URLa = [NSString stringWithFormat:@"http://www.website.com/page.php?
    v1=%@&v2=%@&v3=%@",v1, v2, v3];

    NSURL *url = [NSURL URLa];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    (void) [[NSURLConnection alloc] initWithRequest:request delegate:self];

    [tableView1 reloadData];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:23:01.297

您可以在 UITableView 甚至子类 UITableView 上添加方法/类别：

```
-(void)reloadDataAndWait:(void(^)(void))waitBlock {
    [self reloadData];//if subclassed then super. else use [self.tableView
    if(waitBlock){
        waitBlock();
    }
} 
```

你需要把它用作

```
[self.tableView reloadDataAndWait:^{
    //call the required method here                                            
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T09:57:33.117

问题是您`reloadData`在启动 URL 请求后立即调用。这没有意义，因为此时请求尚未完成。

正确的方法是在使用 URL 请求的响应更新数据源之后调用`reloadData`and `methodB`in 。`connectionDidFinishLoading`此时您知道行数是否为零，并且无需*等待*表视图更新完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-14T10:51:23.370

一旦我从服务器获取我的表的更新数据。

当表重新加载完成时，我使用以下代码片段来隐藏进度条。

```
[UIView animateWithDuration:0 animations:^{
            [your_table_view reloadData];
        } completion:^(BOOL finished)
        {
            //Table reload completed TODO here
            //Hide progress bar etc.
        }]; 
```

# testng - Testng中的测试方法和测试标签有什么区别

> ID：15218863
> 
> 赞同：2
> 
> 时间：2013-03-05T08:17:49.457
> 
> 标签：testng

我现在使用 TestNG 已经有一段时间了，但我仍然不知道这两个（`@Test`以及`< test>`在 suite.xml 中）的预期目的是什么，以及它们要表达的抽象是什么。

此外，如果有人可以分享他们对 TestNG 中其他元素的行为差异。例如，由或`@AfterTest` `@BeforeTest`触发，其中一个进入最终执行报告。`@Test``<test>``@Test``< test>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:09:06.263

`@Test`表示测试方法。`<test>`是您如何在`testng.xml`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T20:00:50.250

在您的第二个问题上添加塞德里克的回答

@AfterTest 在 xml 之后运行

@AfterMethod 在您的 java 文件中的 @Test 之后运行。

例如。

```
public class TestCases{
@Test
public void test1()..
@Test
public void test2()..
}

public class MoreTestCases{
@Test
public void test1()..
@Test
public void test2()..
} 
```

所以你有 4 个用 @Test 注释的测试用例

现在，因为在 xml 中是您想要构建测试运行的方式

```
 <test>
   <classes>
    <class name = TestCases>
      <methods>
        <include name = test1/>
      </methods>
    </class>
   <class name = TestCases>
     <methods>
       <include name = test1/>
     </methods>
   </class>
  </classes>
</test> 
```

所以你现在只从你的两个班级运行 test1 。

术语在开始时有点混乱......但我希望它有助于澄清一些事情。

# javascript - JavaScript：异步下载js，下载失败时如何调用错误函数

> ID：15218865
> 
> 赞同：0
> 
> 时间：2013-03-05T08:17:59.987
> 
> 标签：javascript

一个常用的异步下载js函数如下。

但是当下载失败时，如何调用错误函数。

该函数将是：函数 loadScript(url, callback, errcb)。

```
function loadScript(url, callback){ 
    var script = document.createElement("script") 
    script.type = "text/javascript"; 
    if (script.readyState){ //IE 
        script.onreadystatechange = function(){ 
            if (script.readyState == "loaded" || script.readyState == "complete"){ 
                script.onreadystatechange = null; 
                callback(); 
            } 
         }; 
    } else { //Others: Firefox, Safari, Chrome, and Opera 
        script.onload = function(){ 
            callback(); 
        }; 
    } 
    script.src = url; 
    document.body.appendChild(script); 
} 
```

# android - 检查数据库中是否存在值

> ID：15218867
> 
> 赞同：1
> 
> 时间：2013-03-05T08:18:18.197
> 
> 标签：android

我想检查数据库中是否存在几个值。如果是这样，则如果光标为空，该方法应返回 TRUE 或 FALSE。但问题是，尽管值不在数据库中，但它始终返回 TRUE！我错过了什么？

```
 // This method check if the combination image path and contact name already exists in database
public boolean checkContentDatabase(String imageFilePath, String contactName) {

    String query = "Select * from " + DB_TABLE+ " where " + TABLE_IMAGE_PATH + "='" + imageFilePath + "' and " + TABLE_CONTACT_NAME + "='" + contactName +"' ;";

    Cursor c = db.rawQuery(query, null);

    if(c != null) // Exists in database
     {
     return true;
     }
     else
     {
         return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:25:22.927

将您的 if 条件替换为：

```
if(c.getCount() > 0)
 {
 return true;
 }
 else
 {
     return false;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:23:26.910

使用`c != null && c.getCount() > 0`而不是`c != null`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T08:25:25.633

```
 public boolean checkContentDatabase(String imageFilePath, String contactName) {

String query = "Select * from " + DB_TABLE+ " where " + TABLE_IMAGE_PATH      + "='"          +          imageFilePath + "' and " + TABLE_CONTACT_NAME + "='" + contactName +"' ;";

Cursor c = db.rawQuery(query, null);

           c.moveToFirst();
    if(c.isAfterLast() == false) {
       return true;
      }
     else
       {
      return false;
      }
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:21:45.953

游标不为空，因为它已成功创建。只有您的结果集不存在。尝试使用“SELECT 1 FROM ...”，然后检查结果是否等于 1。

# c# - 底层连接已关闭

> ID：15218868
> 
> 赞同：3
> 
> 时间：2013-03-05T08:18:26.303
> 
> 标签：c#, web-services, properties

我花了几个小时弄清楚为什么会收到以下消息：

`The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.`

我发现每当网络服务尝试发送具有基本获取/设置的属性时，我都会收到此消息。

例子：

```
public string Name {get;set;} //Works without problems

public string Name { get { return "test"; } } //Fails 
```

第一次尝试它给了我以下错误：

```
The underlying connection was closed: A connection that was expected to be kept alive was closed by the server. 
```

如果我再试一次，它会给我以下错误：

```
An error occurred while receiving the HTTP response to http://localhost/webapi3/ProductData.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details. 
```

在我的跟踪日志中，我发现以下错误：`No set method for property 'test' in type 'PS.Converter.ApiModel.DefaultBase'`

这是否意味着在使用 WCF 时属性必须始终有一个集合？或者这是某种可配置的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:39:05.673

该属性必须在 WCF 中有一个设置器 - 否则数据协定序列化程序无法反序列化它。如果您不希望该字段被序列化，您可以向其添加 IgnoreDataMember 属性。

如果您需要只读属性，只需添加一个私有设置器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:53:00.393

您可以提供私人二传手。除非我弄错了，否则应该使它（反）可序列化，但要防止值被覆盖：

```
public string Name { 
    get { return "test"; }
    private set{}
} 
```

# android - Android 如何避免 NullPointException

> ID：15218872
> 
> 赞同：0
> 
> 时间：2013-03-05T08:18:32.390
> 
> 标签：android, nullpointerexception

我的代码中有 NullPointException，这就是我的应用程序崩溃的原因......我是 Android 开发的新手，所以你能帮我避免这个 Null 异常吗？

这是一些代码，我认为是这个错误：

```
@Override
public void onClick(View v) {
    btn_skip = (Button) findViewById(R.id.btn_skip);
    // get data
    String email_txt = email.getEditableText().toString();
    String confirme_email = confirm_email.getEditableText().toString();

    //get IMEI
    TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    imei = telephonyManager.getDeviceId();

    if (v == btn_skip)
    {
        sendPostRequest(null, null, imei);
    }
    //if email is not valid then show errors
    else if (!checkEmail(email.getText().toString()) && v == btn_get_access)
    {
        email_error.setVisibility(View.VISIBLE);
        email.requestFocus();
        //Toast.makeText(getBaseContext(), "lkdjfgkdjg", Toast.LENGTH_LONG).show();
    }
    //else if (!confirme_email.equals(email_txt) && v == btn_get_access)
    else if (!email_txt.equals(confirme_email))
    {
        email_confirm_error.setVisibility(View.VISIBLE);
        confirm_email.requestFocus();
    }
    else 
    {
        email_error.setVisibility(View.GONE);
        email_confirm_error.setVisibility(View.GONE);
        sendPostRequest(email_txt, confirme_email, imei);
    }
} 
```

所以我是如何得到这个错误的：在我的应用程序中，我有 2 个活动，我可以通过按钮切换它们，第一个按钮发送一些我从服务器上的用户那里获得的数据（所有输入都填充了数据），第二个按钮我可以跳过输入填充并进入第二个屏幕（所有输入为空）；从第二个屏幕我可以在没有任何数据的情况下返回第一个屏幕（当我按下这个后退按钮时，我有这个空异常）。请帮我解决这个错误，因为我无法想象如何避免它......

**UPD LOGCAT**

```
03-05 10:01:07.214: W/ActivityThread(12011): Application com.vladimir.expert_suise is      waiting for the debugger on port 8100...
03-05 10:01:07.224: I/System.out(12011): Sending WAIT chunk
03-05 10:01:07.224: I/dalvikvm(12011): Debugger is active
03-05 10:01:07.424: I/System.out(12011): Debugger has connected
03-05 10:01:07.424: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:07.624: I/System.out(12011): waiting for debugger to settle...

03-05 10:01:07.814: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:08.014: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:08.215: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:08.415: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:08.615: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:08.815: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:09.015: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:09.226: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:09.426: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:09.626: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:09.826: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:10.026: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:10.226: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:10.427: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:10.627: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:10.827: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:11.027: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:11.227: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:11.428: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:11.628: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:11.828: I/System.out(12011): waiting for debugger to settle...
03-05 10:01:12.028: I/System.out(12011): debugger has settled (1463)
03-05 10:01:13.620: D/libEGL(12011): loaded /system/lib/egl/libGLES_android.so
03-05 10:01:13.800: D/libEGL(12011): loaded /system/lib/egl/libEGL_adreno200.so
03-05 10:01:14.080: D/libEGL(12011): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-05 10:01:14.080: D/libEGL(12011): loaded /system/lib/egl/libGLESv2_adreno200.so
03-05 10:01:14.401: I/Adreno200-EGLSUB(12011): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:14.561: D/memalloc(12011): ashmem: Mapped buffer base:0x520a0000 size:1536000 fd:61
03-05 10:01:14.591: D/OpenGLRenderer(12011): Enabling debug mode 0
03-05 10:01:15.141: D/OpenGLRenderer(12011): has fontRender patch
03-05 10:01:15.171: D/OpenGLRenderer(12011): has fontRender patch
03-05 10:01:15.211: D/OpenGLRenderer(12011): has fontRender patch
03-05 10:01:15.281: D/memalloc(12011): ashmem: Mapped buffer base:0x5251a000 size:1536000 fd:64
03-05 10:01:15.962: D/memalloc(12011): ashmem: Mapped buffer base:0x52691000 size:1536000 fd:67
03-05 10:01:19.996: I/Adreno200-EGLSUB(12011): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:20.006: D/memalloc(12011): ashmem: Mapped buffer base:0x52b08000 size:1536000 fd:76
03-05 10:01:20.316: D/memalloc(12011): ashmem: Mapped buffer base:0x52cff000 size:1536000 fd:79
03-05 10:01:20.647: I/Adreno200-EGLSUB(12011): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:20.657: D/memalloc(12011): ashmem: Mapped buffer base:0x52f76000 size:1536000 fd:82
03-05 10:01:20.797: D/memalloc(12011): ashmem: Mapped buffer base:0x530ed000 size:1536000 fd:88
03-05 10:01:20.957: D/memalloc(12011): ashmem: Mapped buffer base:0x53264000 size:1536000 fd:91
03-05 10:01:21.157: D/memalloc(12011): ashmem: Mapped buffer base:0x533db000 size:1536000 fd:94
03-05 10:01:21.177: D/OpenGLRenderer(12011): Flushing caches (mode 0)
03-05 10:01:21.207: D/OpenGLRenderer(12011): Flushing caches (mode 0)
03-05 10:01:22.999: I/Adreno200-EGLSUB(12011): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:23.019: D/memalloc(12011): ashmem: Mapped buffer base:0x5251a000 size:1536000 fd:63
03-05 10:01:23.309: D/memalloc(12011): ashmem: Mapped buffer base:0x52691000 size:1536000 fd:69
03-05 10:01:23.419: I/Adreno200-EGLSUB(12011): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:23.429: D/memalloc(12011): ashmem: Mapped buffer base:0x52a08000 size:1536000 fd:79
03-05 10:01:23.610: D/memalloc(12011): ashmem: Mapped buffer base:0x52cff000 size:1536000 fd:88
03-05 10:01:23.660: D/memalloc(12011): ashmem: Mapped buffer base:0x530ed000 size:1536000 fd:97
03-05 10:01:23.830: D/memalloc(12011): ashmem: Mapped buffer base:0x53552000 size:1536000 fd:100
03-05 10:01:23.850: D/OpenGLRenderer(12011): Flushing caches (mode 0)
03-05 10:01:23.870: D/OpenGLRenderer(12011): Flushing caches (mode 0)
03-05 10:01:25.291: I/Adreno200-EGLSUB(12011): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:25.301: D/memalloc(12011): ashmem: Mapped buffer base:0x5261a000 size:1536000 fd:63
03-05 10:01:25.451: D/memalloc(12011): ashmem: Mapped buffer base:0x52e76000 size:1536000 fd:82
03-05 10:01:25.481: D/OpenGLRenderer(12011): Flushing caches (mode 0)
03-05 10:01:25.882: D/memalloc(12011): ashmem: Mapped buffer base:0x52a08000 size:1536000 fd:79
03-05 10:01:27.603: D/AndroidRuntime(12011): Shutting down VM
03-05 10:01:27.603: W/dalvikvm(12011): threadid=1: thread exiting with uncaught exception (group=0x40ad9228)
03-05 10:01:27.633: E/AndroidRuntime(12011): FATAL EXCEPTION: main
03-05 10:01:27.633: E/AndroidRuntime(12011): java.lang.NullPointerException
03-05 10:01:27.633: E/AndroidRuntime(12011):    at com.vladimir.expert_suise.FirstScreen.onClick(FirstScreen.java:174)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at android.view.View.performClick(View.java:3549)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at android.view.View$PerformClick.run(View.java:14400)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at android.os.Handler.handleCallback(Handler.java:605)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at android.os.Looper.loop(Looper.java:154)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at android.app.ActivityThread.main(ActivityThread.java:4945)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 10:01:27.633: E/AndroidRuntime(12011):    at dalvik.system.NativeStart.main(Native Method)
03-05 10:01:30.747: D/Process(12011): killProcess, pid=12011
03-05 10:01:30.757: D/Process(12011): dalvik.system.VMStack.getThreadStackTrace(Native Method)
03-05 10:01:30.757: D/Process(12011): java.lang.Thread.getStackTrace(Thread.java:599)
03-05 10:01:30.757: D/Process(12011): android.os.Process.killProcess(Process.java:788)
03-05 10:01:30.757: D/Process(12011): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:104)
03-05 10:01:30.757: D/Process(12011): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
03-05 10:01:30.757: D/Process(12011): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
03-05 10:01:30.757: D/Process(12011): dalvik.system.NativeStart.main(Native Method)
03-05 10:01:30.757: I/Process(12011): Sending signal. PID: 12011 SIG: 9
03-05 10:01:31.307: D/libEGL(12216): loaded /system/lib/egl/libGLES_android.so
03-05 10:01:31.307: D/libEGL(12216): loaded /system/lib/egl/libEGL_adreno200.so
03-05 10:01:31.307: D/libEGL(12216): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-05 10:01:31.317: D/libEGL(12216): loaded /system/lib/egl/libGLESv2_adreno200.so
03-05 10:01:31.337: I/Adreno200-EGLSUB(12216): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:31.357: D/memalloc(12216): ashmem: Mapped buffer base:0x51fa0000 size:1536000 fd:61
03-05 10:01:31.367: D/OpenGLRenderer(12216): Enabling debug mode 0
03-05 10:01:31.417: D/OpenGLRenderer(12216): has fontRender patch
03-05 10:01:31.437: D/OpenGLRenderer(12216): has fontRender patch
03-05 10:01:31.467: D/OpenGLRenderer(12216): has fontRender patch
03-05 10:01:31.507: D/memalloc(12216): ashmem: Mapped buffer base:0x5241a000 size:1536000 fd:64
03-05 10:01:31.918: D/memalloc(12216): ashmem: Mapped buffer base:0x52691000 size:1536000 fd:67
03-05 10:01:47.313: D/AndroidRuntime(12216): Shutting down VM
03-05 10:01:47.313: W/dalvikvm(12216): threadid=1: thread exiting with uncaught exception (group=0x40ad9228)
03-05 10:01:47.313: E/AndroidRuntime(12216): FATAL EXCEPTION: main
03-05 10:01:47.313: E/AndroidRuntime(12216): java.lang.NullPointerException
03-05 10:01:47.313: E/AndroidRuntime(12216):    at com.vladimir.expert_suise.FirstScreen.onClick(FirstScreen.java:174)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at android.view.View.performClick(View.java:3549)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at android.view.View$PerformClick.run(View.java:14400)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at android.os.Handler.handleCallback(Handler.java:605)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at android.os.Looper.loop(Looper.java:154)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at android.app.ActivityThread.main(ActivityThread.java:4945)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 10:01:47.313: E/AndroidRuntime(12216):    at dalvik.system.NativeStart.main(Native Method)
03-05 10:01:49.064: D/Process(12216): killProcess, pid=12216
03-05 10:01:49.064: D/Process(12216): dalvik.system.VMStack.getThreadStackTrace(Native Method)
03-05 10:01:49.064: D/Process(12216): java.lang.Thread.getStackTrace(Thread.java:599)
03-05 10:01:49.064: D/Process(12216): android.os.Process.killProcess(Process.java:788)
03-05 10:01:49.064: D/Process(12216): com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:104)
03-05 10:01:49.064: D/Process(12216): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
03-05 10:01:49.064: D/Process(12216): java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
03-05 10:01:49.064: D/Process(12216): dalvik.system.NativeStart.main(Native Method)
03-05 10:01:49.064: I/Process(12216): Sending signal. PID: 12216 SIG: 9
03-05 10:01:49.545: D/libEGL(12233): loaded /system/lib/egl/libGLES_android.so
03-05 10:01:49.555: D/libEGL(12233): loaded /system/lib/egl/libEGL_adreno200.so
03-05 10:01:49.555: D/libEGL(12233): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-05 10:01:49.555: D/libEGL(12233): loaded /system/lib/egl/libGLESv2_adreno200.so
03-05 10:01:49.575: I/Adreno200-EGLSUB(12233): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:01:49.585: D/memalloc(12233): ashmem: Mapped buffer base:0x51fb9000 size:1536000 fd:62
03-05 10:01:49.585: D/OpenGLRenderer(12233): Enabling debug mode 0
03-05 10:01:49.645: D/OpenGLRenderer(12233): has fontRender patch
03-05 10:01:49.665: D/OpenGLRenderer(12233): has fontRender patch
03-05 10:01:49.685: D/OpenGLRenderer(12233): has fontRender patch
03-05 10:01:49.755: D/memalloc(12233): ashmem: Mapped buffer base:0x52466000 size:1536000 fd:65
03-05 10:01:50.135: D/memalloc(12233): ashmem: Mapped buffer base:0x526dd000 size:1536000 fd:68
03-05 10:01:51.347: D/OpenGLRenderer(12233): Flushing caches (mode 0)
03-05 10:01:51.447: W/IInputConnectionWrapper(12233): showStatusIcon on inactive InputConnection
03-05 10:01:51.447: W/IInputConnectionWrapper(12233): InputConnection = com.android.internal.widget.EditableInputConnection@40dd02e8, active client = false
03-05 10:01:51.647: D/OpenGLRenderer(12233): Flushing caches (mode 1)
03-05 10:02:00.155: D/OpenGLRenderer(12233): Flushing caches (mode 1)
03-05 10:02:08.814: D/OpenGLRenderer(12233): Flushing caches (mode 1)
03-05 10:02:08.994: D/OpenGLRenderer(12233): Flushing caches (mode 2)
03-05 10:02:32.427: W/ActivityThread(12468): Application com.vladimir.expert_suise is waiting for the debugger on port 8100...
03-05 10:02:32.447: I/System.out(12468): Sending WAIT chunk
03-05 10:02:32.447: I/dalvikvm(12468): Debugger is active
03-05 10:02:32.647: I/System.out(12468): Debugger has connected
03-05 10:02:32.647: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:32.847: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:33.047: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:33.247: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:33.448: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:33.648: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:33.848: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:34.048: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:34.248: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:34.449: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:34.649: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:34.859: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:35.049: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:35.249: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:35.450: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:35.650: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:35.850: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:36.050: I/System.out(12468): waiting for debugger to settle...
03-05 10:02:36.250: I/System.out(12468): debugger has settled (1356)
03-05 10:02:37.502: D/libEGL(12468): loaded /system/lib/egl/libGLES_android.so
03-05 10:02:37.532: D/libEGL(12468): loaded /system/lib/egl/libEGL_adreno200.so
03-05 10:02:37.582: D/libEGL(12468): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-05 10:02:37.582: D/libEGL(12468): loaded /system/lib/egl/libGLESv2_adreno200.so
03-05 10:02:37.652: I/Adreno200-EGLSUB(12468): <ConfigWindowMatch:2078>: Format RGBA_8888.
03-05 10:02:37.692: D/memalloc(12468): ashmem: Mapped buffer base:0x520a0000 size:1536000 fd:61
03-05 10:02:37.702: D/OpenGLRenderer(12468): Enabling debug mode 0
03-05 10:02:37.902: D/OpenGLRenderer(12468): has fontRender patch
03-05 10:02:37.922: D/OpenGLRenderer(12468): has fontRender patch
03-05 10:02:37.952: D/OpenGLRenderer(12468): has fontRender patch
03-05 10:02:38.002: D/memalloc(12468): ashmem: Mapped buffer base:0x5251a000 size:1536000 fd:64
03-05 10:02:38.312: D/memalloc(12468): ashmem: Mapped buffer base:0x52691000 size:1536000 fd:67
03-05 10:03:07.731: D/dalvikvm(12468): Debugger has detached; object registry had 776 entries
03-05 10:03:07.731: D/AndroidRuntime(12468): Shutting down VM
03-05 10:03:07.731: W/dalvikvm(12468): threadid=1: thread exiting with uncaught exception (group=0x40ad9228)
03-05 10:03:07.731: E/AndroidRuntime(12468): FATAL EXCEPTION: main
03-05 10:03:07.731: E/AndroidRuntime(12468): java.lang.NullPointerException
03-05 10:03:07.731: E/AndroidRuntime(12468):    at com.vladimir.expert_suise.FirstScreen.onClick(FirstScreen.java:174)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at android.view.View.performClick(View.java:3549)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at android.view.View$PerformClick.run(View.java:14400)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at android.os.Handler.handleCallback(Handler.java:605)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at android.os.Looper.loop(Looper.java:154)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at android.app.ActivityThread.main(ActivityThread.java:4945)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-05 10:03:07.731: E/AndroidRuntime(12468):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:35:19.857

尝试`Context`像这样删除：

```
TelephonyManager tManager = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
String IMEI = tManager.getDeviceId(); 
```

取自[Using Telephony Manager in android to find IMEI number](https://stackoverflow.com/questions/7514163/using-telephony-manager-in-android-to-find-imei-number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:08:44.380

您是否已在清单文件中获得许可？

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# sql - MVC：创建动态分组的最佳方式

> ID：15218873
> 
> 赞同：0
> 
> 时间：2013-03-05T08:18:44.360
> 
> 标签：sql, asp.net-mvc, linq, entity-framework, group-by

我得到了一个项目清单，每次都可以检查和通过不同的项目。选中的项目将被移动到包含这些选中项目的字符串列表中。

我想学习一种方法来帮助我创建按所选列分组所需的查询，例如，如果我检查“OperatorTypeName”和“CompanyName”，我将收到相关查询：

```
SELECT OperatorTypeName AS Group1, Company.CompanyName AS Group2, SUM(Adv.Price) 
AS SumPrice 
FROM Adv  (nolock) 
INNER JOIN Program (nolock) 
    ON Adv.ProgramID = Program.ProgramID 
INNER JOIN Operator (nolock)  
    ON Program.OperatorID = Operator.OperatorID 
INNER JOIN OperatorType (nolock)  
    ON Operator.OperatorTypeID = OperatorType.OperatorTypeID 
INNER JOIN CampaignVersion (nolock) 
    ON Adv.CampaignVersionID = CampaignVersion.CampaignVersionID 
INNER JOIN Campaign ON CampaignVersion.CampaignID = Campaign.CampaignID
INNER JOIN Campaign2Product (nolock) 
    ON Campaign.CampaignID = Campaign2Product.CampaignID 
INNER JOIN Product2Company (nolock) 
    ON Product2Company.ProductID = Campaign2Product.ProductID 
INNER JOIN Product2SubBranch (nolock) 
    ON Product2SubBranch.ProductID = Campaign2Product.ProductID 
INNER JOIN SubBranch (nolock) 
    ON SubBranch.SubBranchID = Product2SubBranch.SubBranchID
INNER JOIN Branch (nolock) 
    ON SubBranch.BranchID = Branch.BranchID
INNER JOIN Company (nolock) 
    ON Product2Company.CompanyID = Company.CompanyID 
INNER JOIN Company Manager (nolock) on Campaign.Manager =Manager.CompanyID 
             WHERE     (Adv.TransmitDate >= getdate()-7)
             GROUP BY  OperatorTypeName , Company.CompanyName 
```

如果只检查“OperatorTypeName”，将收到针对此条件的适当查询：

```
SELECT OperatorTypeName AS Group1, SUM(Adv.Price) AS SumPrice 
FROM Adv  (nolock) 
INNER JOIN Program (nolock) 
    ON Adv.ProgramID = Program.ProgramID 
INNER JOIN Operator (nolock)  
    ON Program.OperatorID = Operator.OperatorID 
INNER JOIN OperatorType (nolock)  
    ON Operator.OperatorTypeID = OperatorType.OperatorTypeID 
INNER JOIN CampaignVersion (nolock) 
    ON Adv.CampaignVersionID = CampaignVersion.CampaignVersionID 
INNER JOIN Campaign 
    ON CampaignVersion.CampaignID = Campaign.CampaignID
INNER JOIN Campaign2Product (nolock) 
    ON Campaign.CampaignID = Campaign2Product.CampaignID 
INNER JOIN Product2Company (nolock) 
    ON Product2Company.ProductID = Campaign2Product.ProductID 
INNER JOIN Product2SubBranch (nolock) 
    ON Product2SubBranch.ProductID = Campaign2Product.ProductID 
INNER JOIN SubBranch (nolock) 
    ON SubBranch.SubBranchID = Product2SubBranch.SubBranchID
INNER JOIN Branch (nolock) 
    ON SubBranch.BranchID = Branch.BranchID
INNER JOIN Company (nolock) 
    ON Product2Company.CompanyID = Company.CompanyID 
INNER JOIN Company Manager (nolock) on Campaign.Manager =Manager.CompanyID 
WHERE     (Adv.TransmitDate >= getdate()-7)
GROUP BY  OperatorTypeName 
```

我不想为每个条件创建每个查询，因为我可以使用大约 30 个可能的列创建一个组。每次有比上一个更大的查询时，我可能想调用 sql，但是如果我加载了 10 列，而我在下一次搜索中只加载了 2 列，我将无法从会话查询中对其进行分组，但是让我们从基础开始，如何在没有多个案例手动创建每个查询的情况下让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:39:38.610

这样的事情会做到这一点：

```
string res = SQL.createSQL("OperatorTypeName");
string res2 = SQL.createSQL("OperatorTypeName", "Company.CompanyName");

public static class SQL
{
    public static string createSQL(params string[] columns)
    {
        string top = string.Empty;
        string bottom = string.Empty;
        for (int i = 0; i < columns.Length; i++)
        {
            if (i > 0)
            {
                top += ", ";
                bottom += ", ";
            }
            top += columns[i];
            bottom += columns[i];
            top += string.Format(" AS Group{0}", i + 1);
        }

        string sql = string.Format("SELECT {0}, SUM(Adv.Price) AS SumPrice " +
            "FROM Adv  (nolock) " +
            "INNER JOIN Program (nolock) " +
                "ON Adv.ProgramID = Program.ProgramID " +
            "INNER JOIN Operator (nolock) " +
                "ON Program.OperatorID = Operator.OperatorID " +
            "INNER JOIN OperatorType (nolock) " +
                "ON Operator.OperatorTypeID = OperatorType.OperatorTypeID " +
            "INNER JOIN CampaignVersion (nolock) " +
                "ON Adv.CampaignVersionID = CampaignVersion.CampaignVersionID " +
            "INNER JOIN Campaign " +
                "ON CampaignVersion.CampaignID = Campaign.CampaignID " +
            "INNER JOIN Campaign2Product (nolock) " +
                "ON Campaign.CampaignID = Campaign2Product.CampaignID " +
            "INNER JOIN Product2Company (nolock) " +
                "ON Product2Company.ProductID = Campaign2Product.ProductID " +
            "INNER JOIN Product2SubBranch (nolock) " +
                "ON Product2SubBranch.ProductID = Campaign2Product.ProductID " +
            "INNER JOIN SubBranch (nolock) " +
                "ON SubBranch.SubBranchID = Product2SubBranch.SubBranchID " +
            "INNER JOIN Branch (nolock) " +
                "ON SubBranch.BranchID = Branch.BranchID " +
            "INNER JOIN Company (nolock) " +
                "ON Product2Company.CompanyID = Company.CompanyID " +
            "INNER JOIN Company Manager (nolock) on Campaign.Manager =Manager.CompanyID " +
            "WHERE     (Adv.TransmitDate >= getdate()-7) " +
            "GROUP BY {1}", top, bottom);

        return sql;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:26:57.687

最终代码如下所示：

具有更改的 Sql Query 构建方法：

```
public static class SQL
{
    public static string createSQL(params string[] columns)
    {
        string top = string.Empty;
        string bottom = string.Empty;
        for (int i = 0; i < 5; i++)
        {
            if (i > 0)
            {
                top += ", ";
                if (i < columns.Length)
                {
                    bottom += ", ";
                }
            }

            if (i < columns.Length)
            {
                top += columns[i];
                bottom += columns[i];
            }
            else
            {
                top += "null";
            }
            top += string.Format(" AS Group{0}", i + 1);
        }

        string sql = string.Format("SELECT newid() as ID, {0}, SUM(Adv.Price) AS SumPrice " +
            "FROM Adv  (nolock) " +
            "INNER JOIN Program (nolock) " +
                "ON Adv.ProgramID = Program.ProgramID " +
            "INNER JOIN Operator (nolock) " +
                "ON Program.OperatorID = Operator.OperatorID " +
            "INNER JOIN OperatorType (nolock) " +
                "ON Operator.OperatorTypeID = OperatorType.OperatorTypeID " +
            "INNER JOIN CampaignVersion (nolock) " +
                "ON Adv.CampaignVersionID = CampaignVersion.CampaignVersionID " +
            "INNER JOIN Campaign " +
                "ON CampaignVersion.CampaignID = Campaign.CampaignID " +
            "INNER JOIN Campaign2Product (nolock) " +
                "ON Campaign.CampaignID = Campaign2Product.CampaignID " +
            "INNER JOIN Product2Company (nolock) " +
                "ON Product2Company.ProductID = Campaign2Product.ProductID " +
            "INNER JOIN Product2SubBranch (nolock) " +
                "ON Product2SubBranch.ProductID = Campaign2Product.ProductID " +
            "INNER JOIN SubBranch (nolock) " +
                "ON SubBranch.SubBranchID = Product2SubBranch.SubBranchID " +
            "INNER JOIN Branch (nolock) " +
                "ON SubBranch.BranchID = Branch.BranchID " +
            "INNER JOIN Company (nolock) " +
                "ON Product2Company.CompanyID = Company.CompanyID " +
            "INNER JOIN Company Manager (nolock) on Campaign.Manager =Manager.CompanyID " +
            "WHERE     (Adv.TransmitDate >= getdate()-7) " +
            "GROUP BY {1}", top, bottom);

        return sql;
    }
} 
```

将除了 dbcontext 和构建的查询之外的枚举方法：

```
 public IEnumerable<GroupModel> GroupToEnum(DBS dbs, string query)
    {

        IEnumerable<GroupModel> grp = dbs.Groups.SqlQuery(query);

        return grp;
    } 
```

像这样从控制器调用这些方法：

```
 string res = SQL.createSQL(checked_strings);
        oGrp = qData.GroupToEnum(context, res); 
```

进行更多设置后返回视图：

```
return View("GroupTest", oGrp.ToPagedList(pageNumber, pageSize)); 
```

# java - 如何将for循环值添加到arraylist？

> ID：15218879
> 
> 赞同：0
> 
> 时间：2013-03-05T08:19:12.750
> 
> 标签：java, android, arraylist

我有一个活动，其中值是通过 JSON 获取的。`for`循环运行。我正在从 JSON 接收获取的对象中存在的所有值。但是，我想将所有值附加到`ArrayList`, 即`image_urls`. 任何人都可以帮助我吗？

```
public class AndroidJSONParsingActivity extends ListActivity {

    private static String url = "http://www.ttt.com/album_pro/array_to_encode";

    JSONArray folio = null;
    ArrayList<String> urlList = new ArrayList<String>();
    public static ArrayList<String> image_urls = new ArrayList<String>();

    @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);

        JSONParser jParser = new JSONParser();
        try {
            JSONObject json = jParser.getJSONFromUrl(url);
            // Log.v("URL",json.toString());

            JSONObject seo = json.getJSONObject("SEO");
            // Log.v("seo",seo.toString());
            JSONArray folio = seo.getJSONArray("Folio");
            Log("ARRAY-FOLIO0" + folio);

            JSONArray image_urls1 = new JSONArray();
            String s1 = seo.getString("Folio");
            for (int i = 0; i < folio.length(); i++) {
                String m = folio.getString(i);
                Log.v("M" + i, m);
                image_urls.add(folio.getString(i) + ",");
                Log("JSON-ARRAY-->" + image_urls.add(folio.getString(i)));
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void Log(String string) {
        Log.v("SEO-TEST", string);

    }
} 
```

以下是我得到的 logcat 响应

```
03-05 13:58:25.948: V/M0(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_a_grade_motor_school.html_a_poftfolio_2013_01_11.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M1(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arcticterntt_folio_portfolio_abc_tarps.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M2(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_able_scale.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M3(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_accent_aluminum_windows.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M4(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_access_health.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M5(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_acmeda__zipscreen.html_a_poftfolio_2013_01_11.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M6(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_aditya_birla_minerals.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M7(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_advanced_corporate_badges.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M8(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_aerotech_fans.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true
03-05 13:58:25.948: V/M9(3241): http://www.tt.com/media/imagepath/portfolio_images/http_arctictern.tt_folio_portfolio_agriculture_victoria_services_.html_a_poftfolio_2013_01_10.png
03-05 13:58:25.948: V/SEO-TEST(3241): JSON-ARRAY-->true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:46:12.037

您的 log cat 正在打印 true 因为您已经`"image_urls.add(folio.getString(i))"`输入了您的消息，如果项目添加成功，此行将返回 true.. 请现在检查如下

```
 ArrayList<String > image_urls1 = new JSONArray(); //Use arrayList here
                String s1 = seo.getString("Folio");
                for (int i = 0; i < folio.length(); i++) {
                    String m = folio.getString(i);
                    Log.v("M" + i, m);
                    image_urls1 .add(folio.getString(i) + ",");//adding here
                    Log("JSON-ARRAY-->" + image_urls1.get(i) ); // printing the current element
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:48:03.067

`true`表示您的添加成功。您必须通过数组创建额外`for`的循环才能获取附加值。还有这个

```
for (int i = 0; i < folio.length(); i++) {
    String m = folio.getString(i);
    Log.v("M" + i, m);
    image_urls.add(folio.getString(i) + ",");
    Log("JSON-ARRAY-->" + image_urls.add(folio.getString(i)));
} 
```

`StringBuilder`由于字符串连接，将在每次迭代中创建三个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:25:53.177

```
ArrayList<String> values = new ArrayList<String>();
for (int i=0; i<folio.size(); ++i) {
    values.add(folio.getString(i));
} 
```

# windows-phone-8 - Windows Phone 多背景音乐

> ID：15218884
> 
> 赞同：0
> 
> 时间：2013-03-05T08:19:31.537
> 
> 标签：windows-phone-8

我在 Windows Phone 的应用程序中继续播放背景音乐。从微软认证的角度来看，如果已经播放了音乐，则不能打开并行声音。

我应该怎么办？

我是不是该：

1.  检测任何背景音乐，如歌曲并提示用户停止我的应用程序背景或
2.  检测任何背景音乐并提示用户像任何歌曲一样停止在后台播放的音乐？或者
3.  我可以在用户许可的情况下同时播放两个背景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:21:29.747

听起来选项 1 和 2 只是您可以呈现给用户的一个选择：“我的音频或您现有的音频”。

但是，您开始播放音频的事实很可能会停止任何背景音频。所以你必须选择选项2。

谁会诚实地选择第三个选项？

# c# - C# 中的 Java SHA1 等效项

> ID：15218885
> 
> 赞同：0
> 
> 时间：2013-03-05T08:19:39.157
> 
> 标签：c#, java, xamarin.ios, sha1

在 Java Android 应用程序中，我得到以下代码来获取字符串的 SHA1。我如何在 C# 中拥有等价物？

```
/**
   * Utility method to convert an array of bytes to hex.
   * 
   * @param data
   * @return
   */
  private static String convertToHex(byte[] data)
  {
    StringBuilder buf = new StringBuilder();
    for (byte b : data)
    {
      int halfbyte = (b >>> 4) & 0x0F;
      int two_halfs = 0;
      do
      {
        buf.append((0 <= halfbyte) && (halfbyte <= 9) ? (char) ('0' + halfbyte) : (char) ('a' + (halfbyte - 10)));
        halfbyte = b & 0x0F;
      }
      while (two_halfs++ < 1);
    }
    return buf.toString();
  }

  /**
   * Hash a String using SHA1.
   * @param text
   * @return
   * @throws NoSuchAlgorithmException
   * @throws UnsupportedEncodingException
   */
  public static String SHA1(String text) throws NoSuchAlgorithmException, UnsupportedEncodingException
  {
    MessageDigest md = MessageDigest.getInstance("SHA-1");
    md.update(text.getBytes("iso-8859-1"), 0, text.length());
    byte[] sha1hash = md.digest();
    return convertToHex(sha1hash);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:21:52.547

.NET 中有一个[SHA1](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1.aspx)类，您可以使用它。

# java - 从另一个 java 程序运行一个 java 程序

> ID：15218892
> 
> 赞同：16
> 
> 时间：2013-03-05T08:19:54.570
> 
> 标签：java, runtime, runtime.exec

我正在开发一个简单的 java 程序。它只是编译并执行另一个 java 程序。我正在使用 Runtime.exec() 函数来编译和运行。编译没有问题。但是当它运行时，如果第二个程序需要一个输入来从键盘读取，我不能从主进程中给它。我使用了 getOutputStream() 函数。但这无济于事。我将提供我的代码。

```
public class sam {  
    public static void main(String[] args) throws Exception {  
        try { 
             Process p = Runtime.getRuntime().exec("javac sam2.java");
             Process p2 = Runtime.getRuntime().exec("java sam2");
             BufferedReader in = new BufferedReader(  
                                new InputStreamReader(p2.getInputStream()));

             OutputStream out = p.getOutputStream();
             String line = null; 
             line = in.readLine();
             System.out.println(line);
             input=input+"\n";
             out.write(input.getBytes());
             p.wait(10000);
             out.flush();
        }catch (IOException e) {  
             e.printStackTrace();  
        }  
    }  
} 
```

这是我的主程序（sam.java）。

以下是sam2.java的代码

```
public class sam2 {  
public static void main(String[] args) throws Exception {  

    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String str; 
    System.out.println("Enter the number..\n");
    str = br.readLine(); 
    System.out.println(Integer.parseInt(str));

    }  
} 
```

没有问题，如果我的第二个程序只有打印语句。但是当我必须从其他人那里读到一些东西时，问题就出现了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T08:30:09.953

这有点奇怪，但您可以在不分叉的情况下运行第二个程序。只需调用其中的主要方法。所以忘记运行时部分并执行以下操作：

```
sam2.main(new String[0]); 
```

当然这种方式你必须在编译时编译 sam2

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-05T09:40:21.717

每个进程都需要被允许运行和完成。您可以`Process#waitFor`用于此目的。同样，您需要同时使用该流程的任何输出。 `waitFor`将阻塞，因此您需要使用 a`Thread`来读取输入（如果需要，将输出写入进程）

根据 java/class 文件的位置，您可能还需要指定一个起始文件夹，进程的执行可以从该文件夹开始。

其中大部分使用起来更容易`ProcessBuilder`

```
import java.io.File;
import java.io.IOException;
import java.io.InputStream;

public class CompileAndRun {

    public static void main(String[] args) {
        new CompileAndRun();
    }

    public CompileAndRun() {
        try {
            int result = compile("compileandrun/HelloWorld.java");
            System.out.println("javac returned " + result);
            result = run("compileandrun.HelloWorld");
        } catch (IOException | InterruptedException ex) {
            ex.printStackTrace();
        }
    }

    public int run(String clazz) throws IOException, InterruptedException {        
        ProcessBuilder pb = new ProcessBuilder("java", clazz);
        pb.redirectError();
        pb.directory(new File("src"));
        Process p = pb.start();
        InputStreamConsumer consumer = new InputStreamConsumer(p.getInputStream());
        consumer.start();

        int result = p.waitFor();

        consumer.join();

        System.out.println(consumer.getOutput());

        return result;
    }

    public int compile(String file) throws IOException, InterruptedException {        
        ProcessBuilder pb = new ProcessBuilder("javac", file);
        pb.redirectError();
        pb.directory(new File("src"));
        Process p = pb.start();
        InputStreamConsumer consumer = new InputStreamConsumer(p.getInputStream());
        consumer.start();

        int result = p.waitFor();

        consumer.join();

        System.out.println(consumer.getOutput());

        return result;        
    }

    public class InputStreamConsumer extends Thread {

        private InputStream is;
        private IOException exp;
        private StringBuilder output;

        public InputStreamConsumer(InputStream is) {
            this.is = is;
        }

        @Override
        public void run() {
            int in = -1;
            output = new StringBuilder(64);
            try {
                while ((in = is.read()) != -1) {
                    output.append((char) in);
                }
            } catch (IOException ex) {
                ex.printStackTrace();
                exp = ex;
            }
        }

        public StringBuilder getOutput() {
            return output;
        }

        public IOException getException() {
            return exp;
        }
    }
} 
```

现在显然，您应该检查流程的返回结果，并且可能会产生更好的与流程交互的机制，但这是基本思想......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T08:32:02.733

您可以只调用第二类的主要方法。main 方法就像任何其他静态方法一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-03T00:44:11.563

这对我有用：

```
try {
    single.main(new String[0]);
} catch (Exception e) {
    JOptionPane.showMessageDialog(null, e);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-23T22:04:24.367

只需调用主类文件。例如，如果您的 java 类文件名为`xyz.java`，您可以在 java swing 应用程序中单击 a 调用并执行相同的文件`JButton`，代码为

```
private void Btn_createdatabaseActionPerformed(java.awt.event.ActionEvent evt) {                                                   
       xyz.main(new String[0]);
} 
```

就是这样...

# sql - SQL Server 代理发出的第一条语句将quoted_identifier 设置为关闭

> ID：15218893
> 
> 赞同：1
> 
> 时间：2013-03-05T08:19:56.280
> 
> 标签：sql, sql-server, sql-server-2008, tsql

正如我在 SQL Server Profiler 中看到的，SQL Server Agent 在开始执行作业步骤时发出的第一条语句是

```
select c.name, c.description 
from master.dbo.syscharsets c 
where c.id = convert(tinyint, databasepropertyex ( db_name() , 'sqlcharset'))  

set quoted_identifier off 
```

在我的工作步骤中，我总是需要`quoted_identifier`设置为 on。

我怎样才能改变这种行为？

服务器的默认连接设置设置为开。

```
select @@version 
```

输出：

```
Microsoft SQL Server 2008 (SP3) - 10.0.5500.0 (Intel X86) 
Sep 22 2011 00:28:06 
Copyright (c) 1988-2008 Microsoft Corporation
Enterprise Edition on Windows NT 5.2 <X86> (Build 3790: Service Pack 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:55:41.823

也许解决方法可能是在作业开始时添加“SET QUOTED_IDENTIFIER ON”。

# javascript - Internet Explorer 8 中的正则表达式问题

> ID：15218894
> 
> 赞同：0
> 
> 时间：2013-03-05T08:19:56.733
> 
> 标签：javascript, regex, internet-explorer-8

我正在尝试在 IE8 的控制台中执行以下操作

```
new RegExp(/(^(([+]?((([0-9\u0660-\u0669]+)([\,\.\-]?[\s]?))+))+){4,255}$)|(^[]{0,255}$)/).test('1234') 
```

并且我`"Expected ']'`在正则表达式中收到以下错误”，但是每当我在 Firefox 上尝试此操作时，它都会返回 true，没有任何错误。

我无法弄清楚问题出在正则表达式的哪个位置。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:41:19.063

为什么不使用 (^$) 来匹配空字符串？

```
new RegExp(/(^(([+]?((([0-9\u0660-\u0669]+)([\,\.\-]?[\s]?))+))+){4,255}$)|(^$)/).test('')
//true
new RegExp(/(^(([+]?((([0-9\u0660-\u0669]+)([\,\.\-]?[\s]?))+))+){4,255}$)|(^$)/).test('1234')
//true
new RegExp(/(^(([+]?((([0-9\u0660-\u0669]+)([\,\.\-]?[\s]?))+))+){4,255}$)|(^$)/).test('abc')
//false 
```

也就是说，除非您需要匹配 0 到 255 个空格以及数字部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T08:31:22.297

```
new RegExp(/(^(([+]?((([0-9\u0660-\u0669]+)([\,\.\-]?[\s]?))+))+){4,255}$)|(^[ ]{0,255}$)/).test('1234') 
```

在 at之间放置一个空格`[ ]`：`(^[ ]{0,255}$)/)`

# algorithm - 不明确的代表系统可以有效地解决吗？

> ID：15218895
> 
> 赞同：6
> 
> 时间：2013-03-05T08:19:58.107
> 
> 标签：algorithm, complexity-theory

我们有集合*S* [1] , *S* [2] , ..., *S [n]*。这些集合不必是不相交的。我们的任务是为每个集合选择一个有代表性的成员，使得选择的元素总数尽可能少。一个元素可能存在于多个集合中，并且可以代表它所包含的所有集合。有没有一种算法可以有效地解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T10:14:06.543

重述后更容易回答这个问题：让原始集合*S* [1]，*S* [2]，...，*S [n]*是宇宙的元素，让原始集合成员本身是集合：*T* [1]，*T* [2]，... , *T [m]*（其中*T* [i]包含元素 { *S* [j] }，它们是包含相应成员的原始集合）。

现在我们必须用集合*T* [1] , *T* [2] , ..., *T* *[m]**覆盖全域S* [1] , *S* [2] , ..., *S [n]*。这正是[Set cover problem](http://en.wikipedia.org/wiki/Set_cover_problem)。这是一个众所周知的 NP 难题，因此没有算法可以有效地解决它（除非 P=NP，正如理论家通常所说的那样）。从维基百科页面可以看到，有一个贪心逼近算法；它是有效的，但近似比不是很好。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:45:57.600

不是要窃取 Evgeny 的荣耀，但这里有一种相当直接的方式，可能更严格地表明，海报问题的一般情况是 NP 难的。

考虑[最小顶点覆盖问题，即从](http://en.wikipedia.org/wiki/Vertex_cover_problem)[简单图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29#Simple_graph)( *V* , *E* ) 中的顶点*V*中找到最小集合*X ，其中 E 中的每条边都与**X*中的至少一个顶点相邻。

 ***一条边可以由一个无序的二元素集合 { *v [a]* , *v [b]* } 表示，其中*v [a]*和*v [b]*是*V*中的不同元素。请注意，表示为 { *v* *[a]* , *v* *[b]* *} 的边e与**v* *[c]*相邻当且仅当*v* *[c]*是 { *v* *[a]* , *v* *[b]* } 的元素。

因此，最小顶点覆盖问题与找到*V的最小大小子集**X*相同，其中由*E*中的一条边定义的每个边集 { *v* *[a]* , *v* *[b]* }包含*X*中的元素。

 ***如果一个人有一种算法可以有效地解决原始陈述的问题，那么一个人就有一种算法可以有效地解决上述问题，因此也可以有效地解决最小顶点覆盖问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T15:50:24.810

我假设“有效地”是指多项式时间。

Evgeny Kluev 是正确的，问题是 NP-hard。它的决策版本被称为[命中集问题](http://www.wolframalpha.com/input/?i=hitting%20set%20problem)，并且在引入该概念后不久就被证明是我们现在所说的 NP 完全问题。虽然 Evgeny 的归约确实是从命中集合问题到集合覆盖问题，但不难看出显式的逆归约。

给定一个集合 C={C [1] ,C [2] ,...C [m] }，它的并集是 U={u [1] ,u [2] ,...,u [n] }，我们想要找到一个最小基数子集 C'，它的union 也等于 U。将初始问题中的S [i定义为 {C] [j] in C | u [i]是 C [j] } 的一个元素。[S={S 1] ,S [2] ,...,S [n] }的最小命中集等于我们想要的 C'。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T21:52:09.167

如果您可以使用接近最佳的解决方案（它们可能会为您提供最佳解决方案，但不一定），可以查看一些算法是模拟退火和遗传算法。模拟退火可以用于生产电子 CAD 自动贴装（因为我是 Wintek 自动贴装程序开发团队的一员）。********

# c# - 在 MS-Word 文档中查找多个字符串并突出显示这些字符串

> ID：15218899
> 
> 赞同：0
> 
> 时间：2013-03-05T08:20:22.570
> 
> 标签：c#, ms-word, highlight

假设我必须在 MS-Word 文档中搜索多个字符串。我想将多个关键字传递给 word api，并且我需要该 api 将通过 MS-word 打开该 doc 或 docx 文件，如果在我提供的 ms-word 文件中找到这些词，则突出显示这些词。在这里，我得到了一个用于在 ms-word 文件中突出显示单词的示例代码，但我发现的例程可能不会突出显示多个单词。另一个问题我注意到，当它突出显示文件并打开时，它工作正常，但是当我关闭 ms-word 时，它要求保存更改。我了解此例程会修改文档以制作我不想要的突出显示。我希望该例程将突出显示但不会修改 doc 文件....有什么办法可以做到这一点。请指导。谢谢

```
using Word = Microsoft.Office.Interop.Word;

private void btnFind_Click(object sender, EventArgs e)
{
object fileName = "audi.doc"; //The filepath goes here
string textToFind = "test1,test2,test3"; //The text to find goes here
Word.Application word = new Word.Application();
Word.Document doc = new Word.Document();
object missing = System.Type.Missing;
try
{
    doc = word.Documents.Open(ref fileName, ref missing, ref missing, 
    ref missing, ref missing, ref missing, ref missing, ref missing, 
    ref missing, ref missing, ref missing, ref missing, ref missing, 
    ref missing, ref missing, ref missing);
    doc.Activate();
    foreach (Word.Range docRange in doc.Words)
    {
        if(docRange.Text.Trim().Equals(textToFind,
           StringComparison.CurrentCultureIgnoreCase))
        {
            docRange.HighlightColorIndex = 
              Microsoft.Office.Interop.Word.WdColorIndex.wdDarkYellow;
            docRange.Font.ColorIndex = 
              Microsoft.Office.Interop.Word.WdColorIndex.wdWhite;
        }
    }
    System.Diagnostics.Process.Start(fileName.ToString());

}
catch (Exception ex)
{
    MessageBox.Show("Error : " + ex.Message);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:14:38.190

您可以使用[Range.Find 属性](http://msdn.microsoft.com/ru-ru/library/office/microsoft.office.interop.word.find_members.aspx)。

下面的代码以只读方式打开文档并选择您要查找的单词的所有匹配项，而无需更改文档。

这里有一些代码给你：

```
 private static void HighlightText()
    {
        object fileName = "C:\\1.doc";
        object textToFind = "test1";
        object readOnly = true;
        Word.Application word = new Word.Application();
        Word.Document doc = new Word.Document();
        object missing = Type.Missing;
        try
        {
            doc = word.Documents.Open(ref fileName, ref missing, ref readOnly,
                                      ref missing, ref missing, ref missing,
                                      ref missing, ref missing, ref missing, 
                                      ref missing, ref missing, ref missing, 
                                      ref missing, ref missing, ref missing, 
                                      ref missing);
            doc.Activate();

            object matchPhrase = false;
            object matchCase = false;
            object matchPrefix = false;
            object matchSuffix = false;
            object matchWholeWord = false;
            object matchWildcards = false;
            object matchSoundsLike = false;
            object matchAllWordForms = false;
            object matchByte = false;
            object ignoreSpace = false;
            object ignorePunct = false;

            object highlightedColor = Word.WdColor.wdColorGreen;
            object textColor = Word.WdColor.wdColorLightOrange;

            Word.Range range = doc.Range();

            bool highlighted = range.Find.HitHighlight(textToFind,
                                                       highlightedColor,
                                                       textColor,
                                                       matchCase,
                                                       matchWholeWord,
                                                       matchPrefix,
                                                       matchSuffix,
                                                       matchPhrase,
                                                       matchWildcards,
                                                       matchSoundsLike,
                                                       matchAllWordForms,
                                                       matchByte,
                                                       false,
                                                       false,
                                                       false,
                                                       false,
                                                       false,
                                                       ignoreSpace,
                                                       ignorePunct,
                                                       false);

            System.Diagnostics.Process.Start(fileName.ToString());
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error : " + ex.Message);
            Console.ReadKey(true);
        }
    } 
```

# ios6 - 访问 NSDictionary 值

> ID：15218900
> 
> 赞同：0
> 
> 时间：2013-03-05T08:20:22.683
> 
> 标签：ios6, nsdictionary

我有一个像这样的 JSON 对象

{

```
Attendance =     {
    Attendance =         (
                    {
            EmployeeCode = 7593;
            InDate = "27/02/2013";
            InTime = "08:11";
            InTime2 = "00:00";
            OutDate = "27/02/2013";
            OutDate2 = "01/01/1901";
            OutTime = "17:42";
            OutTime2 = "00:00";
            Present = 1;
        }
    );
    AttendanceCount = 1;
};
AuthPersons =     {
    WFAuthCount = 1;
    WfAuthPersons =         (
                    {
            LsAuthls =                 (
                                    {
                    AuthEmployeeName = "SAMPLE NAME";
                    EmployeeCode = 4813;
                }
            );
            RequestTypeCode = 5;
            WFID = 99;
            "WF_LevelID" = 2;
            WorkFlowName = "EHL - Group HR (Kanchana/Asitha)";
        }
    );
}; 
```

}

我想要的是分别获得这些员工代码，IntDate ... 所以我得到一个单独的`NSDictionary` `NSDictionary *summary = [resultJSON objectForKey:@"Attendance"];`

并将它返回到我`Viewcontroller method`的 Viewcontroller 内部，我已经这样做了。

```
` nsDicttendanceReqDate = [[ws GetWorkflowInfoAttendanceRequest:[NSString stringWithFormat:@"%d",usr.empCode] : @"5" :usr.stringRequestDate] copy];

 dicDates= [nsDicttendanceReqDate objectForKey:@"Attendance"] ;
//dicDates=[nsDicttendanceReqDatey JSONValue];

NSLog(@"%d",[dicDates count]);

NSLog(@"DIC DATES%@",dicDates);

NSLog(@"%@",nsDicttendanceReqDate);

 if ([nsDicttendanceReqDate count] > 0 ) {

    NSLog(@"TESTING---------- %@",[dicDates valueForKey:@"EmployeeCode"]);

    NSLog(@"TESTING---------- %@",[dicDates valueForKey:@"OutDate"] );

    NSLog(@"TESTING---------- %@",[dicDates valueForKey:@"InDate"] );` 
```

但这些正在进入括号内。我该如何解决这个问题。任何人都可以告诉我如何提取这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:45:24.710

试试这个。它可能会有所帮助。

NSDictionary *summary = [resultJSON valueForKey:@"Attendance"]objectAtIndex:0];

# unit-testing - 单元测试——应该对多复杂的方法进行单元测试？

> ID：15218901
> 
> 赞同：5
> 
> 时间：2013-03-05T08:20:32.040
> 
> 标签：unit-testing, complexity-theory

假设我正在测试以下类（~伪代码）：

```
// (...)
public Result Process(Image image)
{
    Image image2 = PreprocessImage(image);
    PartialResult r1 = Process1(image2);
    PartialResult r2 = Process2(r1);
    Result result = FinalProcessing(r2);

    return result;
}

public Image PreprocessImage(Image image)
{
    Image tmp1 = Resize(image);
    Image tmp2 = Blur(tmp1);
    Image tmp3 = Median(tmp2);
    Image tmp4 = ExtractSpecificAreas(tmp3);

    return tmp4;
}

public Image Median(Image image)
{
     // Actual image median algorithm
} 
```

为了使问题更加...有问题，我们假设大多数这些方法（例如 Process1、Process2、FinalProcessing、ExtractSpecificAreas）的结果很难预测——例如，有一些启发式/决定性算法试图从图像中提取特征：它可能在 90% 的情况下成功，这是可以接受的。

您将对这些方法中的哪一种进行单元测试？除了无效的输入/边框条件之外，您将如何对这些方法进行单元测试？对于单元测试来说，该方法应该有多基本（或有多复杂）才有意义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T08:33:53.023

单元测试的一般规则是测试您可以测试的最小可能部分。一个好的规则是，每个测试都应该使用公共 API 中的一个方法。

这意味着它应该只执行这个方法而不能执行其他方法，甚至不能暂时执行。因此，如果您想测试`foo()`并且它调用`bar()`，那么您应该模拟`bar()`而不是测试它。不过，调用内部私有方法`baz()`就可以了。

如果你的方法调用了数百个内部方法，那就需要[重构](http://en.wikipedia.org/wiki/Code_refactoring)。

原因是单元测试中的失败应该指出问题的确切位置。如果您要进行单元测试`main()`，那么失败只会告诉您项目代码中的某处存在错误。如果您对[String.length()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.length%28%29)进行单元测试并且该测试失败，那么您将非常准确地知道错误必须在哪里。

这也回答了您的问题：您有返回不可预测结果的方法。模拟它们将允许您始终返回已知的好/坏结果，因此您可以测试正确处理这些结果的方法。

对于不可预测的方法，您将不得不找到类似的策略。例如，我在这里假设您在某处有经过训练的神经网络。因此，测试可能是将一些训练图像传递给该方法 N 次，直到您确信图像在 90% 的时间内正确排序。

同样，您应该能够将这些方法拆分为可预测和不可预测的部分，然后您可以使用模拟或统计分析对其进行测试。

两个伟大的模拟框架是[Mockito](https://code.google.com/p/mockito/)和[PowerMock](https://code.google.com/p/powermock/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:48:14.060

我认为 Aaron Digulla 已经指出了最重要的一点：测试尽可能小的部分并使用模拟对象。

但是让我再补充一点：您可能还想测试您的整个应用程序，即小部分是否可以很好地协同工作（这将是**集成测试**而不是**单元测试**，但无论如何 - 您应该两者都做）。*为了测试启发式算法，我发现从一个容易*解决的任务开始很有用- 在你的情况下，这将是一个“简单”的图像。当然，这只是给你一个基线，它不能保证它在 90% 的情况下都能工作。但无论如何，它在开发过程中很有帮助，如果你愿意，你总是可以用更真实的样本来增强你的（集成）测试套件。

# asp.net - 部署到服务器后页面无法在 IE10 中运行

> ID：15218902
> 
> 赞同：0
> 
> 时间：2013-03-05T08:20:35.600
> 
> 标签：asp.net, internet-explorer-10

当我在本地的 IE10 中运行我的项目时，它运行良好。但是当我将它部署在服务器上时，我的页面没有按应有的方式显示，并且无法正常工作，尤其是那些使用 javascript 的部分。有谁能够帮我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:05:16.670

您是否在 .NET 中使用任何浏览器检测（即 HttpBrowserCapabilities）？如果是这样，可能是由于 IE 10 被视为 IE 1 的错误。尝试从此[页面应用您正在使用的 .NET 版本的修补程序](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:26:41.583

尝试运行像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的工具。可能是缺少 css 或 javascript。任何缺失的资源都将显示为红色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T19:07:11.650

我遇到了同样的问题，添加下面的行解决了这个问题

**<meta http-equiv="X-UA-Compatible" content="IE=edge" />**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:38:56.937

浏览器可能会使用旧版 IE 的引擎来显示它们。尝试在你的 html/asp 文件的头部添加这个：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# c# - 检查文本文件中是否包含字符排列

> ID：15218903
> 
> 赞同：0
> 
> 时间：2013-03-05T08:20:41.877
> 
> 标签：c#, permutation

快速提问。我正在编写一个程序来查找我输入到应用程序中的一组字符的所有排列。这部分工作完美。我的问题是我需要根据我用作字典的文本文件检查字符的所有排列。前任。如果我输入字符 TSTE，输出的输出是 tset,ttse,ttes,tets,test,stte,stet,sett... 我只想打印像 tset,sett,stet,test,tets 这样的有效单词。其中 ttse,ttes,stte 未打印。

我到目前为止的代码如下。在过去的几天里，我一直在我的双桨边缘抓挠，似乎找不到办法做到这一点。请问有什么你能看到我错过的吗？

谢谢

```
static void Main(string[] args)
        {
            Console.BufferHeight = Int16.MaxValue - 1;

            Console.WindowHeight = 40;
            Console.WindowWidth = 120;

            Permute p = new Permute();            
            var d = Read();
            string line;
            string str = System.IO.File.ReadAllText("Dictionary.txt");
            while ((line = Console.ReadLine()) != null)
            {                
                char[] c2 = line.ToArray();                
                p.setper(c2);
                           }
        }
        static Dictionary<string, string> Read()
        {
            var d = new Dictionary<string, string>();
            using (StreamReader sr = new StreamReader("Dictionary.txt"))
            {
                string line;
                while ((line = sr.ReadLine()) != null)
                {
                    string a = Alphabet(line);
                    string v;
                    if (d.TryGetValue(a, out v))
                    {
                        d[a] = v + "," + line;
                    }
                    else
                    {
                        d.Add(a, line);
                    }
                }
            }
            return d;
        }
        static string Alphabet(string s)
        {
            char[] a = s.ToCharArray();
            Array.Sort(a);
            return new string(a);
        }
        static void Show(Dictionary<string, string> d, string w)
        {
            string v;
            if (d.TryGetValue(Alphabet(w), out v))
            {
                Console.WriteLine(v);
            }
            else
            {
                Console.WriteLine("-----------");
            }
        }
    }
    class Permute
    {
        private void swap(ref char a, ref char b)
        {
            if (a == b) return;
            a ^= b;
            b ^= a;
            a ^= b;
        }
        public void setper(char[] list)
        {
            int x = list.Length - 1;
            go(list, 0, x);
        }
        public void go(char[] list1, int k, int m)
        {
            if (k == m)
            {

                Console.WriteLine(list1);
                Console.WriteLine(" ");

            }
            else
            {
                for (int i = k; i <= m; i++)
                {
                    swap(ref list1[k], ref list1[i]);
                    go(list1, k + 1, m);
                    swap(ref list1[k], ref list1[i]);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:11:12.887

you just missed Show(d, line); i loop.

change like this.

```
while ((line = Console.ReadLine()) != null)
        {
            char[] c2 = line.ToArray();
            p.setper(c2);
            Console.WriteLine(" combinations which are in Dictionary are:");
            Show(d, line);

        } 
```

then .. you didn't required dictionary

```
 use List<string> Dic=new List<string>();// declare it in globally

  Dic.add(line); //each line in dictionary 
```

before printing each word

```
 if(Dic.contains(word))
   print it; 
 else{ //no printing } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:35:04.263

感谢您的所有反馈。我终于想通了，并找到了解决我遇到的问题的方法。static void Main(string[] args) { Console.BufferHeight = Int16.MaxValue - 1;

```
 Console.WindowHeight = 40;
        Console.WindowWidth = 120;
        Console.WriteLine("Enter your caracters for the anagram: ");
        //var d = Read();
        string line;
        //string DictionaryInput = System.IO.File.ReadAllText("Dictionary.txt");
        while ((line = Console.ReadLine()) != null)
        {
            Console.WriteLine("Your results are: ");
            char[] charArray = line.ToArray();
            //Show(d, line);                    //Using this to check that words found are the correct words in the dictionary.
            setper(charArray);
            Console.WriteLine("-----------------------------------------DONE-----------------------------------------");
            Console.WriteLine("Enter your caracters for the anagram: ");
            File.Delete("Permutations.txt");
        }

    }

    static void swap(ref char a, ref char b)
    {
        if (a == b) return;
        a ^= b;
        b ^= a;
        a ^= b;
    }
    static void setper(char[] list)
    {
        int x = list.Length - 1;
        permuteWords(list, 0, x);
    }
    static void permuteWords(char[] list1, int k, int m)
    {

        if (k == m)
        {
            StreamWriter sw = new StreamWriter("Permutations.txt", true);
            sw.WriteLine(list1);
            sw.Close();
            Regex permutationPattern = new Regex(new string(list1));
            string[] permutations = File.ReadAllLines("Permutations.txt");
            Regex pattern = new Regex(new string(list1));
            string[] lines = File.ReadAllLines("Dictionary.txt");

            foreach (string line in lines)
            {
                var matches = pattern.Matches(line);
                if (pattern.ToString() == line)
                {
                    Console.WriteLine(line);
                }
            }
        }
        else
        {
            for (int i = k; i <= m; i++)
            {
                swap(ref list1[k], ref list1[i]);
                permuteWords(list1, k + 1, m);
                swap(ref list1[k], ref list1[i]);
            }
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:13:04.757

在当前状态下是不可能的。

这是可能的，因为

1.  如果“dictionary.txt”是您的输入，那么您没有定义什么是*有效词*。您至少需要另一个字典来定义那些*有效的单词*或一个算法来决定那些是什么，那些不是。

2.  如果输入来自 UI 并且“dictionary.txt”是定义的*有效单词*，则不需要置换输入，只需从“dictionary.txt”搜索输入。

但是，您的`Read`方法是可以改进的，例如

```
static Dictionary<String, String> Read(String path) {
    return (
        from line in File.ReadAllLines(path)
        where false==String.IsNullOrEmpty(line)
        group line by Alphabet(line) into g
        select
            new {
                Value=String.Join(",", g.ToArray()),
                Key=g.Key
            }
        ).ToDictionary(x => x.Key, x => x.Value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T21:11:05.747

尽管对于我在另一个答案中提到的*有效单词*，在您当前的状态下是不可能的，但我已经为您提供了非常清晰的代码。

它最后是代码，分为三部分。它们是`Permutable<T>`,`ConsoleHelper`并且`ConsoleApplication1.Program`具有实用程序`Permutation`类。

*   Permutable<T> (Permutable.cs)

    ```
    using System.Collections.Generic;
    using System.Collections;
    using System;

    public partial class Permutable<T>: IEnumerable {
        public static explicit operator Permutable<T>(T[] array) {
            return new Permutable<T>(array);
        }

        static IEnumerable Permute<TElement>(IList<TElement> list, int depth, int count) {
            if(count==depth)
                yield return list;
            else {
                for(var i=depth; i<=count; ++i) {
                    Swap(list, depth, i);

                    foreach(var sequence in Permutable<T>.Permute(list, 1+depth, count))
                        yield return sequence;

                    Swap(list, depth, i);
                }
            }
        }

        static void Swap<TElement>(IList<TElement> list, int depth, int index) {
            var local=list[depth];
            list[depth]=list[index];
            list[index]=local;
        }

        IEnumerator IEnumerable.GetEnumerator() {
            return this.GetEnumerator();
        }

        public IEnumerator<IList<T>> GetEnumerator() {
            var list=this.m_List;

            if(list.Count>0)
                foreach(IList<T> sequence in Permutable<T>.Permute(list, 0, list.Count-1))
                    yield return sequence;
        }

        protected Permutable(IList<T> list) {
            this.m_List=list;
        }

        IList<T> m_List;
    } 
    ```

*   ConsoleHelper (ConsoleHelper.cs)

    ```
    using System.Runtime.InteropServices;
    using System.Windows.Forms;
    using System.Drawing;

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    public static partial class ConsoleHelper {
        [StructLayout(LayoutKind.Sequential)]
        public struct RECT {
            public static explicit operator Rectangle(RECT rect) {
                return new Rectangle {
                    X=rect.Left,
                    Y=rect.Top,
                    Width=rect.Right-rect.Left,
                    Height=rect.Bottom-rect.Top
                };
            }

            public int Left;
            public int Top;
            public int Right;
            public int Bottom;
        }

        [DllImport("user32.dll", SetLastError=true)]
        static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int Width, int Height, bool repaint);

        [DllImport("user32.dll", SetLastError=true)]
        static extern bool GetWindowRect(IntPtr hWnd, out RECT rect);

        [DllImport("kernel32.dll", SetLastError=true)]
        static extern IntPtr GetConsoleWindow();

        public static void CenterScreen() {
            RECT rect;
            var hWnn=ConsoleHelper.GetConsoleWindow();
            var workingArea=Screen.GetWorkingArea(Point.Empty);
            ConsoleHelper.GetWindowRect(hWnn, out rect);
            var rectangle=(Rectangle)rect;

            rectangle=
               new Rectangle {
                   X=(workingArea.Width-rectangle.Width)/2,
                   Y=(workingArea.Height-rectangle.Height)/2,
                   Width=rectangle.Width,
                   Height=rectangle.Height
               };

            ConsoleHelper.MoveWindow(
                hWnn,
                rectangle.Left, rectangle.Top, rectangle.Width, rectangle.Height,
                true
                );
        }
    } 
    ```

*   ConsoleApplication1.Program & Permutation (Program.cs)

    ```
    using System.Collections;
    using System.IO;

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    public partial class Permutation {
        public static Permutation FromFile(String path) {
            return new Permutation(path);
        }

        public static String GetSortedAlphabet(String text) {
            var array=text.ToArray();
            Array.Sort(array);
            return new String(array);
        }

        public Dictionary<String, String> Dictionary {
            private set;
            get;
        }

        public FileInfo SourceFile {
            private set;
            get;
        }

        public Permutation(String path) {
            this.Dictionary=(
                from line in File.ReadAllLines(path)
                where false==String.IsNullOrEmpty(line)
                group line by Permutation.GetSortedAlphabet(line) into g
                select
                    new {
                        Value=String.Join(", ", g.Distinct().ToArray()),
                        Key=g.Key
                    }
                ).ToDictionary(x => x.Key, x => x.Value);

            this.SourceFile=new FileInfo(path);
        }
    }

    namespace ConsoleApplication1 {
        partial class Program {
            static void ProcessLine(IList<char> input) {
                Console.WriteLine();

                if(input.Count>0) {
                    var inputArray=input.ToArray();
                    var key=Permutation.GetSortedAlphabet(new String(inputArray));
                    var dict=Program.Permutation.Dictionary;
                    var hasKey=dict.ContainsKey(key);
                    var source=Permutation.SourceFile;

                    Console.WriteLine("Possible permutations are: ");

                    foreach(var sequence in (Permutable<char>)inputArray)
                        Console.WriteLine("{0}", new String(sequence.ToArray()));

                    Console.WriteLine("Acceptable in file '{0}' are: ", source.FullName);
                    Console.WriteLine("{0}", hasKey?dict[key]:"<none>");
                    Console.WriteLine();

                    input.Clear();
                }

                Console.Write(Prompt);
            }

            static void ProcessChar(IList<char> input, char keyChar) {
                Console.Write(keyChar);
                input.Add(keyChar);
            }

            static void ProcessExit(IList<char> input, char keyChar) {
                Console.WriteLine();
                Console.Write("Are you sure to exit? (Press Esc again to exit)");
                input.Add(keyChar);
            }

            static bool ProcessLast(IList<char> input, char keyChar) {
                var last=input.Count-1;

                if(0>last||input[last]!=(char)ConsoleKey.Escape)
                    return false;

                input.Clear();
                return true;
            }

            public static Permutation Permutation {
                private set;
                get;
            }

            public static String Prompt {
                private set;
                get;
            }
        }

        partial class Program {
            static void Main(String[] args) {
                Console.BufferHeight=short.MaxValue-1;
                Console.SetWindowSize(120, 40);
                ConsoleHelper.CenterScreen();

                var input=new List<char>(char.MaxValue);
                Program.Permutation=Permutation.FromFile(@"c:\dictionary.txt");
                Program.Prompt="User>\x20";
                Program.ProcessLine(input);

                for(; ; ) {
                    var keyInfo=Console.ReadKey(true);
                    var keyChar=keyInfo.KeyChar;
                    var keyCode=keyInfo.Key;

                    if(ConsoleKey.Escape==keyCode) {
                        if(Program.ProcessLast(input, keyChar))
                            break;

                        Program.ProcessExit(input, keyChar);
                        continue;
                    }

                    if(ConsoleKey.Enter==keyCode) {
                        Program.ProcessLine(input);
                        continue;
                    }

                    if(default(ConsoleModifiers)!=keyInfo.Modifiers)
                        continue;

                    if(0x1f>keyChar||keyChar>0x7f)
                        continue;

                    if(Program.ProcessLast(input, keyChar))
                        Console.WriteLine();

                    Program.ProcessChar(input, keyChar);
                }
            }
        }
    } 
    ```

该类`ConsoleHelper`仅用于您调整大小的控制台窗口，您可以更舒适地测试程序。该`Permutable`课程是我从您的原始课程中完全重新设计的；它现在带有`IEnumerable`置换，也是一个泛型类。

该类`Permutation`就像一个实用程序类，本身提供一个`FromFile`方法作为您的原始`Read`，并将 存储`Dictionary<String, String>`为属性。原始方法`Alphabet`被重命名`GetSortedAlphabet`以获得更多语义。

该类`Program`有四个主要的静态`ProcessXXX`方法，它们是

*   ProcessChar：`char`范围从`0x20`到的进程`0x7f`
*   ProcessLine：`Enter`压制流程
*   ProcessExit：`Excape`按下的进程
*   `ProcessLine`ProcessLast：对和的附加处理`ProcessExit`

是的，我的意思是让它们具有相同的名称长度。更重要的是，`Program`类有两个静态属性；`Permutation`用于存储 class 的实例`Permutation`，`Prompt`是用于提示用户的字符串。

当您的输入未在 中定义时`"c:\dictionary.txt"`，会提示`"Acceptable in file .."`您`"<none>"`。

退出命令是两次-Escape 按键，你会看到

> 你确定退出？（再次按 Esc 退出）

如果按`Enter`或其他键，则返回初始状态。

就这样。现在是时候发现您遇到的最终问题了。使用此程序进行测试后，您可能会更清楚地描述您的问题和问题。

祝你好运！

# android - Android：FragmentPagerAdapter：第一次调用两次 getItem 方法

> ID：15218904
> 
> 赞同：25
> 
> 时间：2013-03-05T08:20:45.070
> 
> 标签：android, android-pageradapter

在我的应用程序中，我使用了 ViewPager。像，

```
(say main.xml)

<android.support.v4.view.ViewPager
     android:id="@+id/viewPager"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:layout_above="@+id/register_header" /> 
```

并在 FragmentActivity 中创建 ViewPager 对象和 ViewPagerAdapter（扩展 FragmentPagerAdapter）对象。

```
_mViewPager = (ViewPager) findViewById(R.id.viewPager);

_adapter = new ViewPagerAdapter(getApplicationContext(),
         getSupportFragmentManager());

_mViewPager.setAdapter(_adapter); 
```

Adapter 类就像，

```
public class ViewPagerAdapter extends FragmentPagerAdapter {
    private Context _context;
    private FragmentManager manager;
    private Fragment f;
    private String classname="ViewPagerAdapter";
    public ViewPagerAdapter(Context context, FragmentManager fm) {
        super(fm);  
        _context=context;
        manager=fm;
        }
    @Override
    public Fragment getItem(int position) {
        Log.i(classname,"getItem called"+position);
        f = new Fragment();
        f=MyFragment.newInstance();
        Bundle args = new Bundle();
        args.putInt("position", position);
        f.setArguments(args);
        return f;
    }

    @Override
    public int getCount() {
        return User.getPageCount();
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }
} 
```

在 MyFragment 类中，

在 onResume 中，我必须将 wigets 对象存储到公共静态变量中。

```
public void onResume() {
        super.onResume();
        pageIndex = getArguments().getInt("position");      
        User.useTextview1=textview1;
        User.useTextview2= textview2;
        User.current_pageIndex=pageIndex;

    } 
```

我必须更新从 FragmentActivity 中的用户类获得的文本视图。 **我的问题是 getItem() 方法在第一次被调用两次** 事实上，模拟器中显示的视图是第 0 个索引，但在 FragmentActivity 中获得了第 1 个索引值。如果我第二次停止调用 getItem() 方法，我可以在 FragmentActivity 中获取第 0 个索引 TextView 引用。

请给我最好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T08:32:25.487

`FragmentPagerAdapter`开始时实例化 2 ，`Fragments`索引 0 和索引 1。如果要从`Fragment`屏幕上的 获取数据，可以使用`setOnPageChangeListener`获取`Pager`当前位置。然后有`SparseArray`你`WeakReference`的片段。`getItem`在调用中更新该数组。当`onPageSelected`被调用时，使用该位置来获取对权利的引用`Fragment`并更新`User`数据。

数组初始化：

```
private SparseArray<WeakReference<MyFragment>> mFragments = new SparseArray<WeakReference<MyFragment>>(3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T05:53:08.613

在 getItem 方法中我写了这个..

```
@Override
public Fragment getItem(int index) {
    EditFragment frag = new EditFragment();
    Bundle args = new Bundle();
    args.putSerializable("currentItem", itemsList.get(index));
    frag.setArguments(args);
    return (frag);
} 
```

这里 itemsList.get(index) 是我将在 EditFragment 类中使用的模型类对象。就是这样。

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    View result = inflater.inflate(R.layout.pager_fragment_layout, container, false);
    image = (ImageView)result.findViewById(R.id.pager_image);
    text = (TextView)result.findViewById(R.id.pager_item_desc);
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getActivity()).build();
    ImageLoader.getInstance().init(config);
    imLoader = ImageLoader.getInstance();

            ****NOTE
    final SwapItems itemList = (SwapItems) getArguments().getSerializable("currentItem");

    imagePath = itemList.getPaths().get(0);
    imLoader.displayImage(imagePath,image);
    text.setText(itemList.getItemDescription());

    image.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Fragment fragment = new ItemImagesFragment();
            FragmentManager fragmentManager = getActivity().getSupportFragmentManager();
            FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
            Bundle bundle = new Bundle();
            bundle.putSerializable("val", itemList);
            fragment.setArguments(bundle);
            fragmentTransaction.replace(R.id.content_frame, fragment);
            fragmentTransaction.addToBackStack(null);
            fragmentTransaction.commit();
        }
    });
    return result;
} 
```

注意：这里我从以前的 getItem 方法获取 swapitems 模型对象是“最终的”。这解决了我的问题。早些时候我用静态作为修饰符初始化了同一个对象。

希望你的也清楚

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-21T02:06:59.287

> 我的问题是 getItem() 方法在第一次被调用两次

这不是问题，这是`default feature of FragmentPagerAdapter`。从这个页面滑到下一个和上一个对你有好处。

> 模拟器中显示的视图是第 0 个索引，但在 FragmentActivity 中获得了第 1 个索引值

我遇到了同样的问题，我知道为什么。这是因为你`used same Fragment in View Pager`。

如何解决这个问题`separate Fragments by using different Fragment`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-08T10:22:11.717

我遇到了同样的问题 - getItem() 方法被调用了两次。我不知道您使用我的方法的目的是在出现新幻灯片时触发托管活​​动的更改。

好吧，首先 getItem() 不是获取新幻灯片出现事件的正确方法。

为此，我在 ViewPager 本身上使用了 ViewPager.OnPageChangeListener 侦听器。这是我所做的：

**在包含幻灯片片段的 Activity 中：**

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.signature_wizard_activity);

    // Instantiate a ViewPager and a PagerAdapter.
    mPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mPagerAdapter);
    mPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            onSlideChanged(position); // change color of the dots
        }
        @Override
        public void onPageSelected(int position) {}
        @Override
        public void onPageScrollStateChanged(int state) {}
    });
} 
```

每次幻灯片出现时都会调用 onPageScrolled()，作为参数，它会获取所显示幻灯片的当前位置。好消息是它在第一次出现时被调用，而不仅仅是在幻灯片更改时。

**什么时候可以使用？** 例如，如果您有一些使用 ViewPager 的向导活动，您可以在其中滑动带有一些提示的片段，您可能希望在滑块下方有一个带有灰色点的栏，表示幻灯片的总数，其中一个点会不同代表当前幻灯片的颜色。在这种情况下， ViewPager.OnPageChangeListener 和方法 onPageScrolled() 将是最佳选择。

或者，如果您有按钮 PREV。和 NEXT 更改幻灯片并且您要禁用 PREV。第一张幻灯片上的按钮并禁用最后一张幻灯片上的 NEXT 按钮。以下是您在 onPageScrolled() 方法中的操作方式：

```
 @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            if(position == 0){
                prevBtn.setTextColor(ContextCompat.getColor(SignatureWizardActivity.this, R.color.main_grey_500));
                prevBtn.setEnabled(false);
            }else{
                prevBtn.setTextColor(ContextCompat.getColor(SignatureWizardActivity.this, R.color.main_blue));
                prevBtn.setEnabled(true);
            }

            if(position == NUM_PAGES -1){
                nextBtn.setTextColor(ContextCompat.getColor(SignatureWizardActivity.this, R.color.main_grey_500));
                nextBtn.setEnabled(false);
            }else{
                nextBtn.setTextColor(ContextCompat.getColor(SignatureWizardActivity.this, R.color.main_blue));
                nextBtn.setEnabled(true);
            }
        } 
```

其中 NUM_PAGES 是幻灯片总数的常数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-21T12:00:53.253

您可以使用此方法更新您的视图

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);

    if (isVisibleToUser) {
        // Fetch data or something...
    }
} 
```

# c# - libvlc 0.8 用 C# 截图

> ID：15218905
> 
> 赞同：1
> 
> 时间：2013-03-05T08:20:49.903
> 
> 标签：c#, c, java-native-interface, libvlc

我需要在 C# 应用程序中使用`libvlc 0.8`.

截取屏幕截图的函数如下所示：

```
libvlc_video_take_snapshot( libvlc_input_t *p_input,
                            char *psz_filepath,
                            libvlc_exception_t *p_e ) 
```

它是从代码的 JNI 部分调用的。

第一个参数 ( `libvlc_input_t *p_input`) 取自以下函数：

```
libvlc_input_t * libvlc_playlist_get_input( libvlc_instance_t *p_instance,
                                            libvlc_exception_t *p_e ) 
```

这就是问题所在：`libvlc_instance_t *p_instance`取自 JNI 环境。

另一种方法是调用：

```
libvlc_instance_t * libvlc_new( int argc, char **argv,
                                libvlc_exception_t *p_e ) 
```

但是当前的设计不允许创建新实例。

那么，我怎样才能得到这个实例指针呢？

# cocoa - OSX 通过 USB/串口发送/接收数据

> ID：15218906
> 
> 赞同：1
> 
> 时间：2013-03-05T08:20:57.630
> 
> 标签：cocoa, usb, osx-lion, osx-mountain-lion, usbserial

我需要编写一个可可应用程序（狮子和山狮）来使用连接到 USB 端口的串行设备传输（发送/接收）数据。

我花了一些时间研究 osx 文档（i/o 工具包），并在 Google 上搜索了教程，但收效甚微。

谁能指出我的教程和一些示例代码？

感谢您的任何帮助。

# asp.net - IIS7 IUSR 帐户权限不适用于表单身份验证和文件上传

> ID：15218907
> 
> 赞同：0
> 
> 时间：2013-03-05T08:20:59.890
> 
> 标签：asp.net, iis-7, permissions

我正在尝试将 asp.net 4 应用程序部署到新的 microsoft server 2008 R2

我已经像之前做过几十次一样设置了应用程序，并适当地设置了文件夹权限。

我尝试直接设置应用程序池名称以获得写入权限我尝试设置 IUSR、IIS_IUSRS、NETWORK SERVICE 和用户。

我已确认禁用 Windows 身份验证并启用匿名以及启用表单身份验证。登录工作正常，我可以正常访问所有页面，除非我尝试写入文件夹。然后弹出一个密码框，看起来像 Windows 身份验证（即使它被禁用）

这里的每一篇文章都说，根据我过去的经验，如果我为 defaultidentity 应用程序池设置文件夹权限，它应该可以工作，但由于某种原因，这个服务器不会让我这样做！

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:39:18.503

Welp 这原来是一个非常奇怪的。由于某种原因，安装 SQL 报告服务时，无论您是否实际使用报告服务，它都会在任何 IIS Web 应用程序文件夹中保留文件夹名称“Reports”。它不是默认创建的或任何东西，但如果你碰巧创建了标题为“报告”的文件夹，不要期望从中访问任何东西。经过数小时的挫折后，事实证明这是一个随机保留，它不会引发任何错误，只是以某种方式覆盖您的身份验证协议以对其保留文件夹使用 Windows 身份验证。

感谢微软！

# c# - 无法在 C# 中登录我的 netsuite 帐户

> ID：15218909
> 
> 赞同：3
> 
> 时间：2013-03-05T08:21:07.223
> 
> 标签：c#, web-services, soap, netsuite

我在控制台应用程序中使用以下代码：

```
NetSuiteService service = new NetSuiteService();

Passport passport = new Passport();
passport.account = "TSTDRV976513";
passport.email = "hamzeh.soboh@para-solutions.com";
passport.password = "*******";

RecordRef role = new RecordRef();
role.internalId = "3";
passport.role = role;

Status status = service.login(passport).status; 
```

我收到以下错误：

```
 The request failed with the error message:

    <html><head><title>302 Moved Temporarily</title></head>
    --
    --
    </html> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T09:20:42.173

**快速修复**将 URL 更改为 webservices.na1.netsuite.com

**永久修复** [http://dreamxtream.wordpress.com/2012/11/23/new-data-centers-for-netsuite-accounts/](http://dreamxtream.wordpress.com/2012/11/23/new-data-centers-for-netsuite-accounts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T16:41:16.180

如上所述更改 URL 确实有效，或者您可以只允许您的服务代理跟踪重定向，NetSuite 会自动将您带到正确的 URL：

```
NetSuiteService service = new NetSuiteService();
service.AllowAutoRedirects = true; 
```

似乎为我工作。

# php - AJAX 响应类型。我不能使用 JSON。有什么选择吗？

> ID：15218911
> 
> 赞同：1
> 
> 时间：2013-03-05T08:21:13.310
> 
> 标签：php, jquery, ajax

我需要将表单值发布到 PHP 页面并期待 AJAX 响应。

我通常使用 JSON 执行此操作，但在当前情况下我无法使用 JSON。响应始终是 text/html 但我需要执行以下操作：

```
if(response.status == 'success')
     //success codes
else
     //error codes 
```

我怎样才能做到这一点？仅通过破解返回的 HTML 响应并在任何地方对“成功”字进行正则表达式？

PS。也没有 XML/YML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:23:13.370

简短的回答是的。

你可以简单地使用（而不是正则表达式）

```
function(data) {
 if(data.indexOf("success") != -1)
   {
   alert("we have something to work with!");
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:24:06.490

只是回显一个文本。

```
 echo "success"; 
```

然后是javascript。

```
 if(data === 'success')
 // do your thang 
```

# php - php postgres 更新：检查是否成功

> ID：15218914
> 
> 赞同：0
> 
> 时间：2013-03-05T08:21:19.687
> 
> 标签：php, postgresql

我正在尝试在 Heroku 上更新我的 postgres 表，但由于 UPDATE 语句的偏心而被阻止。

我最初的猜测是：

```
$query = pg_query($someDB, $updateQuery); 
```

然后检查它是否为假，但无济于事。这是麻烦的片段：

```
$update_query = "UPDATE jellybeans SET $form[1]=$data[1], $form[2]=$data[2] WHERE $form[0]='$data[0]'";
echo 'attempting update: ' . $update_query . '<br>';
$update = pg_query($connect, $update_query);
echo "Rows updated: ", pg_affected_rows($update);
//if update failed, push to the table 
```

如何检查 INSERTS、DELETES 等语句？我很惊讶affected_rows 没有返回任何有意义的东西。非常感激。

**编辑：**首先使用 SELECT 查询产生了最好的结果：

```
$exists_query = "SELECT * FROM jellybeans WHERE $form[0]='$data[0]'";
$exists = pg_query($connect, $exists_query);
                        if($row = pg_fetch_row($exists)){
                                $update_query = "UPDATE jellybeans SET $form[1]=$data[1], $form[2]=$data[2] WHERE $form[0]='$data[0]'  RETURNING *";
                                echo '<br>' . 'Attempting: ' . $update_query;
                                $update = pg_query($connect, $update_query);
                        }else{
                                $insert_query = "INSERT INTO jellybeans VALUES('$data[0]', $data[1], $data[2])";
                                echo '<br>' . 'Attempting: ' . $insert_query;
                                $insert = pg_query($connect, $insert_query);
                                pg_free_result($insert); 

                        }
                        pg_free_result($exists);
                        pg_free_result($update); 
```

从那里一个简单的 $row = pg_fetch_row($exists) 给出了一个可靠的存在检查。将来，最好将 IF FOUND 检查添加到查询本身中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:39:17.383

一种了解方法是获取更新的行：

```
UPDATE ... WHERE condition RETURNING *; 
```

这将返回更新的行集，只计算结果的数量。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-05T08:51:48.667

你为什么还要使用 pg_* 函数？您是否考虑过使用[PDO](http://php.net/manual/en/book.pdo.php)代替？[使用PDOStatement::rowCount](http://php.net/manual/en/pdostatement.rowcount.php)可能会更幸运。

# windows-phone-7 - 在隔离存储中保存和读取文件

> ID：15218916
> 
> 赞同：1
> 
> 时间：2013-03-05T08:21:32.540
> 
> 标签：windows-phone-7, isolatedstorage

我尝试将文件保存在 IsoStore 中。在 WP8 模拟器中文件已成功保存，但是当我在其他模拟器或手机（使用 WP7.8）中运行我的程序时，出现错误：“路径必须是有效的文件名”我这样做：

```
 var path = @"\Shared\Media\mapp\";
                         var imageName = guid from the server;

                            if (!_fileStorage.DirectoryExists(path))
                                _fileStorage.CreateDirectory(path);

//here I get a error      using (IsolatedStorageFileStream fileStream =
                                _fileStorage.OpenFile(path + imageName,
                                                      FileMode.OpenOrCreate))
                            {//do anything} 
```

我尝试设置 path = @"iso:\Shared\Media\mapp\" 或 @"isostore:\Shared\Media\mapp\" 或 @"files:\Shared\Media\mapp\" 或 @"file:\ Shared\Media\mapp\" 并且它不起作用。如果我在所有设备中设置 @"\Shared\Media\" 一切都很好。谁能告诉我为什么我不能创建目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:39:56.120

对于 Windows-Phone-7，您无法创建名称以“/”或“//”结尾的目录，这将导致“路径必须是有效的文件名”错误。

要解决您的问题，只需稍微更改您的代码：

```
 var path = @"\Shared\Media\mapp";
            var imageName = guid from the server;

            using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (!store.FileExists(path))
                {
                    store.CreateDirectory(path);
                }
                store.OpenFile(path + "\\" + imageName, FileMode.OpenOrCreate);
            } 
```

希望，这有帮助。

# performance - zend framework 2 性能：时间、内存和 cpu

> ID：15218922
> 
> 赞同：-1
> 
> 时间：2013-03-05T08:21:46.833
> 
> 标签：performance, zend-framework2

所以这是一件事。我的开发笔记本电脑上有 8GB RAM 和 8 核 CPU。在 Amazon EC2 小型实例（1.7 GB RAM 和 1 个虚拟内核和 1 个 EC2 计算单元）上部署网站后，我惊讶地发现，现在生成的页面不是像样的 ~200 毫秒，而是 ~600 毫秒。

当然，我分析了这个页面和其他页面，但似乎一切都运行得更慢。没有什么比别人更长的了。此页面消耗大约 12.5 MB 的内存，我认为如果它是 8GB 或一般只有 1.7，应该没有区别！

smb 能否给我一个线索，为什么尽管配置较弱但（我相信）比满足配置 PHP 的运行速度通常要慢约 3 倍？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:04:08.790

一个改进是在部署到 live 时构建一个类映射，而不是使用通常的类加载器，这可以带来很大的改进

如果您已经使用 composer 进行设置（您应该），那么您可以让 composer 为您生成一个类映射：

```
 php composer.phar dump-autoload -o 
```

使用 Zend 工具查看这里：[https ://github.com/zendframework/ZFTool](https://github.com/zendframework/ZFTool)

```
zf.php classmap generate <directory> <classmap file> [--append|-a] [--overwrite|-w] 
```

我会将它作为您的部署过程的一部分。还要确保您有某种操作码缓存，因为每个请求可能包含大量文件。

# html - 使用 HTML5 锚标记下载属性下载 .apk 或 .jar 文件

> ID：15218936
> 
> 赞同：1
> 
> 时间：2013-03-05T08:22:36.503
> 
> 标签：html

我正在开发基于 HTML5 的 Web 应用程序。在该 Web 应用程序中，我试图从服务器下载文件。我已经在 Chrome 和 Safari 桌面浏览器上对其进行了测试。它在桌面浏览器上运行良好。但是，当我尝试使用 Chrome 浏览器和 Android 默认浏览器在 Android 手机上使用 Web 应用程序下载文件时，文件会被下载，但文件扩展名和文件名错误（downloadApplication.bin）而不是（demo.bin）。 APK）。

# scala - 如果需要，Akka 演员可以从它的邮箱中删除消息吗？

> ID：15218937
> 
> 赞同：7
> 
> 时间：2013-03-05T08:22:41.540
> 
> 标签：scala, akka, actor

例如，如果我想从队列中删除多余的消息 - 这样当参与者收到`Connect`消息时，它应该检查它的邮箱并删除其他`Connect`消息，以便只进行一次连接而不是多次连接。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T10:04:54.920

是的，您可以将 Actor 调度程序配置为具有您选择的任何邮箱，因此如果您实现了这样的邮箱，您可以使用它，请参阅文档的以下部分：http: [//doc.akka.io/docs/akka /2.1.1/scala/dispatchers.html#Mailboxes](http://doc.akka.io/docs/akka/2.1.1/scala/dispatchers.html#Mailboxes)

# uitableview - -[__NSCFString objectAtIndex:] cellForRowAtIndexPath: 尝试访问数组时崩溃 objectAtIndex:indexPath.row

> ID：15218942
> 
> 赞同：0
> 
> 时间：2013-03-05T08:23:02.200
> 
> 标签：uitableview, ios6, xcode4.5

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0xa84a800' 
```

我正在`UITableView`从自定义`UITableViewCell`（**自己的类和 nib**）将数据加载到 a 。它工作得很好，直到我尝试访问`objectAtIndex:indexPath.row`某些数组。

我会先发布我的代码，这样你可能会更容易理解我的意思。

```
-(void)viewWillAppear:(BOOL)animated
{
self.navigationController.navigationBarHidden=YES;
if (managedObjectContext==nil) {
    MFAppDelegate *appDelegate = (MFAppDelegate *)[UIApplication sharedApplication].delegate;
    managedObjectContext = appDelegate.managedObjectContext;

}

NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Last" inManagedObjectContext:managedObjectContext];
[request setEntity:entity];
NSError *error = nil;
NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
if (mutableFetchResults == nil) {
    // Handle the error.
}

// Set self's events array to the mutable array, then clean up.
[self setFinal:mutableFetchResults];
lastdisarr=[mutableFetchResults valueForKey:@"lastdis"];
lastcalarr=[mutableFetchResults valueForKey:@"lastcal"];
lasttimearr=[mutableFetchResults valueForKey:@"lasttime"];
date=[mutableFetchResults valueForKey:@"lastspeed"];
lasticonarr=[mutableFetchResults valueForKey:@"iconwe"];
NSLog(@"LAst DISTANCE %@",lasticonarr);

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"cell";
Cell *cell = [table dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    [[NSBundle mainBundle]loadNibNamed:@"Cell" owner:self options:nil];

    cell=self.custom;
}

// Set up the cell...

cell.distance.text=[lastdisarr objectAtIndex:indexPath.row];
cell.timelab.text=[lasttimearr objectAtIndex:indexPath.row];
cell.callab.text=[lastcalarr objectAtIndex:indexPath.row];
cell.date.text=[date objectAtIndex:indexPath.row];
//cell.wether.image=[lasticonarr objectAtIndex:indexPath.row];

NSMutableArray *ar=[lasticonarr objectAtIndex:indexPath.row];
NSLog(@"%@",ar); 
```

**//问题就在这里**

**//我想在自定义单元格中显示图像并从核心数据获取路径....路径正在获取但图像未显示在单元格上**

```
NSURL *url1 = [NSURL URLWithString:[ar objectAtIndex:indexPath.row]];

NSLog(@"%@",url1);
NSData *data = [NSData dataWithContentsOfFile:[ar description]];

NSLog(@"%@",data);

return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:15:52.287

有两种选择：

1：你没有保留你的价值；

```
lastdisarr  = [[mutableFetchResults valueForKey:@"lastdis"] retain];
lastcalarr  = [[mutableFetchResults valueForKey:@"lastcal"] retain];
lasttimearr = [[mutableFetchResults valueForKey:@"lasttime"] retain]; 
```

2：如预期的那样`[mutableFetchResults valueForKey:@"lastdis"]`是一个`NSString`，而不是一个。`NSArray`

# java - 将密钥对转换为 RSAKey

> ID：15218944
> 
> 赞同：1
> 
> 时间：2013-03-05T08:23:05.257
> 
> 标签：java, cryptography, rsa, bouncycastle, jce

我正在尝试找出[KeyPair](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/KeyPair.html)的位长。在四处寻找有关如何执行此操作的解决方案时，我遇到了以下代码片段。

```
public boolean checkKey(RSAKey key) {
    if ( key.getModulus().bitLength() == 1024 )
        return true;
    return false;
} 
```

我期待的输入是“KeyPair”。有人可以指点我做的文档： -

1.  演示如何将 KeyPair 转换为[RSAKey](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/interfaces/RSAKey.html)
2.  或 演示如何计算 KeyPair 的位长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:27:13.497

这应该为 RSA 密钥执行（假设`keyPair`是一个`KeyPair`实例）：

```
PublicKey publicKey = keyPair.getPublic();

if (publicKey instanceof RSAPublicKey) {
  return ((RSAPublicKey) publicKey).getModulus().bitLength();
} 
```

如果您需要检查其他键类型，只需相应地检查文档和代码，例如：

```
if (publicKey instanceof DSAPublicKey) {
  return ((DSAPublicKey) publicKey).getY().bitLength();
} 
```

# iphone - 展开和折叠动画在 ios6 中不起作用

> ID：15218950
> 
> 赞同：0
> 
> 时间：2013-03-05T08:23:15.447
> 
> 标签：iphone, ios, objective-c, ipad, ios6

我正在努力`UIView`。此视图在按钮单击时展开和折叠。它适用于**iOS<=5**但不适**用于 iOS6**。您能否更正我的代码或解释一下。

谢谢。

我的代码：

```
 CGFloat x= 60,y = 391,w1=210,h1=48;
    [ViewShare setHidden:YES];
    [UIView beginAnimations:@"animationOff" context:NULL]; 
    [UIView setAnimationDuration:0.2f];
    [ViewShare setFrame:CGRectMake(x, y, w1, h1)];
    [UIView commitAnimations]; 
```

和[参考页](https://stackoverflow.com/questions/5151250/iphone-expand-and-collapse-a-uiview-programmatically)

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:49:12.883

Mani，你应该使用基于块的动画，因为在 iOS 4.0 之后不鼓励使用提交动画。

如果您尝试跨大量 IOS 并尝试使用“不推荐使用”的方法，则会有很多 GUI 错误代码。顺便说一句，您的代码是正确的。

如果你不使用4.0之前的IOS，请改用

```
animateWithDuration:animations:completion: 
```

这是一个例子：

```
[UIView animateWithDuration: 0.2f
     animations:^{
    [ViewShare setFrame:CGRectMake(60, 391, 210, 48)];
}
     completion:^(BOOL finished){ 
    // what you want when the animation is done
}]; 
```

请注意，有时，您需要根据 iOS 版本切换行为，它总是与 GUI 相关。这让我非常紧张。:)

# joomla2.5 - 如何在不创建帐户的情况下制作登录模块，忘记密码，忘记joomla 2.5中的用户名

> ID：15218953
> 
> 赞同：0
> 
> 时间：2013-03-05T08:23:23.093
> 
> 标签：joomla2.5, jumi

我正在使用 joomla 2.5，我只想进行管理员登录，这将直接从数据库中获取登录详细信息。所以我不需要创建新帐户、忘记密码和忘记用户名选项的选项。

是否有任何与此概念相同的模块。

请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:27:56.790

Joomla 有模板覆盖。概述： [http ://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

由于您没有提供模板信息 - 所以我使用了原子模板

1.  查找模块：“mod_login”，它应该在：templates/your_template/html/mod_login/default.html -

2.  例如，您可以删除以下详细信息以摆脱：

    *   忘记密码
    *   忘了用户名了吗
    *   允许注册

![第 57 - 74 行](../Images/9c1438e436df640c067e3a6c1bbd9776.png)

3.  这是禁用用户注册的正确方法：http: [//www.inmotionhosting.com/support/edu/joomla-25/users/disable-user-registration](http://www.inmotionhosting.com/support/edu/joomla-25/users/disable-user-registration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T11:18:53.557

我遇到了类似的问题并尝试了您的方法但失败了。但是，经过反复试验，我对位于不同文件夹中的文件进行了相同的编码。我编辑代码的文件夹是../modules/mod_login/tmpl/default.php，它工作得很好

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-01T18:01:53.843

在 Joomla 3.3 中，核心代码和模板代码之间没有覆盖。如果你想禁用这些选项，你肯定需要去 modules/mod_login/tmpl/default.php 并注释掉：

```
<li>
    <a href="<?php echo JRoute::_('index.php?option=com_users&view=remind&Itemid=' . UsersHelperRoute::getRemindRoute()); ?>">
                <?php echo JText::_('MOD_LOGIN_FORGOT_YOUR_USERNAME'); ?></a>
</li>
<li>
    <a href="<?php echo JRoute::_('index.php?option=com_users&view=reset&Itemid=' . UsersHelperRoute::getResetRoute()); ?>">
                <?php echo JText::_('MOD_LOGIN_FORGOT_YOUR_PASSWORD'); ?></a>
</li> 
```

就个人而言，我花了很多时间来了解 MOD_LOGIN_REGISTER 的值来自哪里，最后我意识到它保存在 en-GB.mod_login.ini 中，第 26 行。

# ios - 关闭动画时如何修复modalviewcontroller的框架？

> ID：15218957
> 
> 赞同：1
> 
> 时间：2013-03-05T08:23:36.347
> 
> 标签：ios

我试图将 modalviewcontroller 的动画设置为 false 并且帧调整不起作用，但是当我尝试打开动画时它会正常工作。有解决办法吗？以下是我的代码的上下文：

```
MyModal *modal = [[MyModal alloc] initWithNibName:@"MyModal" bundle:nil];
modal.modalPresentationStyle = UIModalPresentationFormSheet;

modal.view.superview.frame = CGRectMake(0, 0, 458, 230);
modal.view.superview.center = self.view.center;

[self.navigationController presentModalViewController:modal animated:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:41:07.757

你试图做的实际上是错误的。从您的代码中；

```
 MyModal *modal = [[MyModal alloc] initWithNibName:@"MyModal" bundle:nil];
    modal.modalPresentationStyle = UIModalPresentationFormSheet;

    modal.view.superview.frame = CGRectMake(0, 0, 458, 230);
    modal.view.superview.center = self.view.center;

    [self.navigationController presentModalViewController:modal animated:NO] 
```

上面的代码永远不会起作用，因为您正在设置尚未创建的视图的框架。

因此，您只能在创建或呈现新视图后设置框架。在您的`MyModal`视图控制器中，设置框架`viewDidAppear`（**注意不要这样做`viewWillAppear`**）

```
- (void) viewDidAppear:(BOOL)animated
 {
      // code to set the frame here

 } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:42:39.297

在我看来，你应该拿代码

```
modal.view.superview.frame = CGRectMake(0, 0, 458, 230);
modal.view.superview.center = self.view.center; 
```

到 MyModal 的 -(void)viewDidLoad 或 -(void)viewWillAppear 方法。

从 nib 启动视图比代码需要更多时间；在将视图启动到内存之前，nil modal.view 的框架已经重置，然后加载 nib 的框架。当您关闭动画时，动画需要时间显示，然后，框架可以调整大小。

# actionscript-3 - NetStream 关 闭后接收事件

> ID：15218970
> 
> 赞同：2
> 
> 时间：2013-03-05T08:24:09.373
> 
> 标签：actionscript-3, apache-flex, rtmp, netstream, wowza

我正在使用 Wowza 开发一个一对一的视频聊天应用程序。远程客户端停止发布后，我将断开传入的 NetStream。这是我的代码的要点：

```
incomingStream = new NetStream(netConnection);
incomingStream.addEventListener(NetStatusEvent.NET_STATUS, incomingStreamHandler);
incomingStream.play("media");

private function incomingStreamHandler(event:NetStatusEvent):void
{
    trace(event.info.code);
    if (event.info.code == "NetStream.Play.UnpublishNotify")
    {
        incomingStream.close();
        incomingStream.removeEventListener(NetStatusEvent.NET_STATUS, incomingStreamHandler);
        incomingStream = null;
    }
} 
```

这是问题所在：在 NetStream.Play.UnpublishNotify 事件触发并关闭传入流后，我收到以下运行时错误：

```
Error #2044: Unhandled NetStatusEvent:. level=error, code=NetStream.Play.StreamNotFound 
```

如果我在上面的incomingStreamHandler() 中注释掉removeEventListener() 行，我会看到NetStream.Play.UnpublishNotify 后面是NetStream.Play.StreamNotFound。**但是为什么即使在我关闭传入的 NetStream 之后这个事件仍然会触发？**

（最初，我在 NetStream.Play.StreamNotFound 而不是 NetStream.Play.UnpublishNotify 上断开传入流，但我发现前一个事件并不总是触发，所以我想依赖 NetStream.Play.UnpublishNotify 代替。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:05:53.390

尝试移动：incomingStream.removeEventListener(NetStatusEvent.NET_STATUS,incomingStreamHandler);

在跟踪（event.info.code）；

我希望它有效...

# forms - cake php habtm select 未设置选定值

> ID：15218978
> 
> 赞同：1
> 
> 时间：2013-03-05T08:24:53.467
> 
> 标签：forms, cakephp, helper, has-and-belongs-to-many

您好，我在使用 HABTM 和 Form 时遇到了一些问题。我正在使用 CakePHP 2.3 和 PHP 5.3.3

这是我理解场景的代码情况：与 HABTM 关系相关的专辑和单曲。专辑包含许多单曲，单曲属于许多专辑。

Model Album.php（不要关心葡萄干：是我个人的图片管理插件）

```
App::uses('Raisin', 'Raisins.Model');
App::uses('PastryBehavior', 'Raisins.Model/Behavior');

class Album extends AppModel
{
public $name = 'Album';

public $actsAs = array(
    'Tags.Taggable',
    'Utils.Sluggable' => array(
        'label'     => 'title'
    ),
    'Raisins.Pastry',
    'SrEngine.Indexable',
    'SrEngine.HitCounter'
);

public $hasOne = array(
    'Image' => array('className' => 'Raisins.Raisin')
);

public $hasAndBelongsToMany = array(

    'Single' 

);

public $belongsTo = array(
    'Users.User'
); 
```

}

控制器 AlbumsController.php（编辑部分）

```
$this->request->data = $this->Album->read(null, $id);
$this->set('singles',$this->Album->Single->find('list')); 
```

看法

```
<?php echo $this->Form->input('Single',array('class' => 'span12','label' => 'Singoli' ) ); ?> 
```

在视图中，我看到从来自控制器单打集的值填充的选择，但先前保存的选定项目未突出显示。考虑到数据库中的 habtm 表包含使用保存的数据填充的正确行。我在中间的某个地方读到，2.3 之前的一些以前版本的 cake 曾经有一些与 habtm 表单选择输入相关的问题。我非常坚持这一点，因为我几乎尝试了所有已知的解决方法，但没有对任何积极影响进行排序。任何帮助，提示将不胜感激。提前致谢

鲁迪

# delphi - 在 Firemonkey 中获取应用程序路径

> ID：15218979
> 
> 赞同：20
> 
> 时间：2013-03-05T08:24:56.850
> 
> 标签：delphi, delphi-xe3, firemonkey-fm2

因此，在 VCL 中，可以使用以下代码行来检索应用程序路径：

```
ExtractFilePath(Application.ExeName) 
```

我尝试了同样的 Firemokey，我注意到 ExeName 不再可用。我可以使用什么代码来替代它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-05T09:04:06.910

尝试使用 ParamStr(0) 而不是 Application.ExeName。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-11T09:05:53.933

我正在使用

```
showmessage(System.SysUtils.GetCurrentDir); 
```

并且像魅力一样工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-22T09:20:19.037

似乎 Android 是一个例外，查看此讨论：[https](https://titanwolf.org/Network/Articles/Article?AID=2e4a7d6e-2e78-4740-907c-a98dd8245837) ://titanwolf.org/Network/Articles/Article?AID=2e4a7d6e-2e78-4740-907c-a98dd8245837和相关源代码： [https ://gist.github.com/自由终止/2f7b2e29e40fa30ed3c4](https://gist.github.com/freeonterminate/2f7b2e29e40fa30ed3c4)

# java - 如何将星期一显示为第一天 CalendarView

> ID：15218983
> 
> 赞同：7
> 
> 时间：2013-03-05T08:25:18.983
> 
> 标签：java, android, calendar, calendarview

和：

```
Calendar cal = Calendar.getInstance();
cal.setFirstDayOfWeek(Calendar.MONDAY); 
```

您只是将星期一的整数值设置为 0，但我想让星期一显示为第一天（在左端，星期天在右边）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T08:36:16.997

将 xml 参数 android:firstDayOfWeek 与日历中的值一起使用。2 - 是星期一。

```
 <CalendarView
    android:id="@+id/calendarView1"
    android:firstDayOfWeek="2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="157dp" /> 
```

或者您可以从代码中指定它

```
 CalendarView calendarView = findViewById(R.id.calendarView1);
    calendarView.setFirstDayOfWeek(Calendar.MONDAY); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-05T08:31:00.550

```
String[] days = null;
DateFormatSymbols names = new DateFormatSymbols();
days = names.getWeekdays();

for (int i=1; i<8; ++i) {
    system.out.println(days[i]);
} 
```

# c++ - 如何修改没有窗口句柄的窗口类？

> ID：15218989
> 
> 赞同：1
> 
> 时间：2013-03-05T08:25:42.703
> 
> 标签：c++, winapi

我目前正在尝试使用 JNI 将一些 WIN32API 函数转换为 Java。其中一项功能是[RegisterClassEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633587%28v=vs.85%29.aspx)。通常，我认为您会为注册的每个窗口类指定不同的回调函数，但由于我也将回调转换为 Java，因此这不起作用。

所以目前的计划是将一个`jobject`（定义为`_jobject*`）附加到窗口类并在回调中使用它。问题是：您只能使用 HWND 更改附加到窗口类的数据。据我所知，MSDN 文档没有指定可以仅使用窗口类 ATOM 或名称修改窗口类的函数。

因此我的问题是：有没有办法更改窗口类（使用类似[SetClassLongPtr](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633589%28v=vs.85%29.aspx)的东西），而不必使用有效的 HWND？

**Java 端**（我最终会添加一个公共函数来完成我真正需要做的事情）：

```
public class c_winjni implements i_jnisystem {
    public interface i_wnd_proc {
        public int wnd_proc(long il_hwnd, int im_message, long im_wparam, long im_lparam);
    }

    private class c_wndclassex {
        public int im_style = 0;
        public i_wnd_proc ds_wnd_proc = null;
        public int im_cls_extra = 0;
        public int im_wnd_extra = 0;
        public long il_instance = 0L;
        public long il_icon = 0L;
        public long il_small_icon = 0L;
        public long il_cursor = 0L;
        public long il_background = 0L;
        public String str_menu_name = null;
        public String str_class_name = null;
    }

    private static native short registerClassEx(c_wndclassex ds_wcx, int[] imr_error);
} 
```

**C++ 方面**：

```
LRESULT CALLBACK default_window_callback_proc(HWND ds_hwnd, UINT im_message, WPARAM im_w_param, LPARAM im_l_param) {
    return DefWindowProc(ds_hwnd, im_message, im_w_param, im_l_param);
}

/*
 * Class:     c_winjni
 * Method:    registerClassEx
 * Signature: (Lc_winjni/c_wndclassex;[I)S
 */
JNIEXPORT_EX jshort JNICALL Java_c_1winjni_registerClassEx
    (JNIEnv *ads_env, jclass /*jds_class*/, jobject jds_wcx, jintArray jimr_error)
JNI_CPPEXCEPTION_TRAP_BEGIN {
    c_jnienv jds_env(ads_env);

    jint *aim_error = NULL;
    if (jimr_error && jds_env.get_array_length(jimr_error) > 0) {
        aim_error = jds_env.get_array_elements(jimr_error, NULL);
    }

    WNDCLASSEX ds_wcx;
    ds_wcx.cbSize = sizeof(WNDCLASSEX);
    ds_wcx.style = jds_env.get_int_field(jds_wcx, "im_style");

    // Imagine I'm checking whether field ds_wnd_proc in object jds_wcx is null.
    // If it is, use the default callback (as shown below).
    // If it isn't, set ds_wcx.lpfnWndProc to some other callback that reads
    // custom class data and calls a Java function of the object attached to the window class.
    ds_wcx.lpfnWndProc = default_window_callback_proc;

    ds_wcx.cbClsExtra = jds_env.get_int_field(jds_wcx, "im_cls_extra") + sizeof(LONG_PTR);
    ds_wcx.cbWndExtra = jds_env.get_int_field(jds_wcx, "im_wnd_extra");
    ds_wcx.hInstance = (HINSTANCE) jds_env.get_long_field(jds_wcx, "il_instance");
    ds_wcx.hIcon = (HICON) jds_env.get_long_field(jds_wcx, "il_icon");
    ds_wcx.hIconSm = (HICON) jds_env.get_long_field(jds_wcx, "il_small_icon");
    ds_wcx.hCursor = (HCURSOR) jds_env.get_long_field(jds_wcx, "il_cursor");
    ds_wcx.hbrBackground = (HBRUSH) jds_env.get_long_field(jds_wcx, "il_background");
    ct_jstring<TCHAR, 256> str_menu_name(ads_env, (jstring) jds_env.get_string_field(jds_wcx, "str_menu_name"));
    ds_wcx.lpszMenuName = str_menu_name.get_data();
    ct_jstring<TCHAR, 256> str_class_name(ads_env, (jstring) jds_env.get_string_field(jds_wcx, "str_class_name"));
    ds_wcx.lpszClassName = str_class_name.get_data();

    jshort result = RegisterClassEx(&ds_wcx);
    if (result == NULL && aim_error) {
        *aim_error = GetLastError();
    }

    // commit changes and invalidate pointer
    if (aim_error) {
        jds_env.release_array_elements(jimr_error, aim_error, 0);
    }
    return result;
} JNI_CPPEXCEPTION_TRAP_END2(ads_env, 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:17:17.893

您的问题的简单答案是只能使用`SetClassLongPtr`. 您需要一个有效的窗口句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:35:57.520

有趣的问题... WNDCLASSEX 是一个类，而 HWND 是窗口句柄。您可能将第一个视为 OO 类，第二个视为“指针”或“引用”对象（实例）。然而要修改这个类，你似乎必须通过那个类的一个实例......奇怪:)我可以想象这是最常见的场景（有 HWND）（顺便说一句，为什么你没有 HWND？ )

一个想法：使用 ATOM 创建一个窗口（隐藏）并使用返回的 HWND 作为“参考”是否可以接受`SetClassLongPtr`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T15:13:18.227

要获得注册类 ATOM 的有效 HWND，您可以使用[FindWindow 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)。

通过传递参数`NULL`，`lpWindowName`您将获得与该类匹配的第一个窗口的句柄。当然，如果没有窗口实例存在，您将失败。但在这方面，假设相应的窗口类尚未注册可能是件好事。

# android - Adobe AS3 关于菜单

> ID：15218994
> 
> 赞同：1
> 
> 时间：2013-03-05T08:26:02.177
> 
> 标签：android, adobe, action

我想用 Adob​​e AS3 创建一个关于菜单

我的应用程序完成了，我只想在按下 android 设备菜单键时弹出一个小窗口或 android 菜单。

我可以通过使用事件侦听器来调整符号的不透明度吗？

stage.addEventListener(KeyboardEvent.KEY_DOWN, handleKeyDown); stage.addEventListener(KeyboardEvent.KEY_UP, handleKeyUp);

提升键时调整符号参数以显示隐藏的内容。