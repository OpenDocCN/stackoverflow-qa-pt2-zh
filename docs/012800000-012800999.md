# StackOverflow 问答 12800000-12800999

# python - 为什么照片图像不存在？

> ID：12800007
> 
> 赞同：4
> 
> 时间：2012-10-09T12:25:52.563
> 
> 标签：python, image, tkinter

我将展示给我带来问题的代码的缩减部分。

`_tkinter.TclError: image "pyimageN" doesn't exist`- 其中 N 停留 1、2、3 等......

第一类使用背景中的图像显示菜单。

```
class MenuWindow():    #in this class we show the main part of the program
    def __init__(self):
        self.Menu=Tk()
        self.MCanvas=Canvas(self.Menu)
        self.MCanvas.bind("<ButtonPress-1>",self.MenuClick)

        #unuseful lines that configure the window and the canvas#

        self.Background=PhotoImage(height=600,width=700)#a simple tkinter.PhotoImage object

        #other unuseful lines that draw the photoimage ( without reading any file, with the method put())#

        self.MCanvas.create_image((x,y),image=self.Background,state="normal")

        #unuseful lines that continue the drawing of the canvas# 
```

第二个类显示另一个窗口，在背景中使用另一个图像。该类由第一个类通过函数self.MenuClick的点击绑定启动。

```
class EditorWindow():    #in this class we show the main part of the program
    def __init__(self):
        self.Eenu=Tk()
        self.ECanvas=Canvas(self.Eenu)

        #unuseful lines that configure the window and the canvas#

        self.Background=PhotoImage(height=600,width=700)

        #other unuseful lines that draw the photoimage ( without reading any file , with the method put() )#

        self.ECanvas.create_image((x,y),image=self.Background,state="normal")#in this line i get the error

        #unuseful lines that continue the drawing of the canvas# 
```

完整的回溯如下：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.1/lib/python3.1/tkinter/__init__.py", line 1399, in __call__
    return self.func(*args)
  File "/Users/albertoperrella/Desktop/slay.py", line 70, in MenuClick
    EditorWindow(self)
  File "/Users/albertoperrella/Desktop/slay.py", line 85, in __init__
    self.ECanvas.create_image((3,3),image=self.Background,state="normal",anchor="nw")
  File "/Library/Frameworks/Python.framework/Versions/3.1/lib/python3.1/tkinter/__init__.py", line 2140, in create_image
    return self._create('image', args, kw)
  File "/Library/Frameworks/Python.framework/Versions/3.1/lib/python3.1/tkinter/__init__.py", line 2131, in _create
    *(args + self._options(cnf, kw))))
_tkinter.TclError: image "pyimage2" doesn't exist 
```

这两个类的制作方式相似，所以我不知道为什么第二个类会出错。我确信这不是书写错误，例如（构造而不是构造）并且我使用的图像确实存在。

所以我认为：

*   我犯了一些概念错误，

*   或者它是 python 中的一个错误（或 Tkinter 的微妙行为）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:10:53.973

我解决了自己的问题：

我定义的第二个类是问题，因为它使用了另一个根窗口，别名 Tk()。与普通 Tk() 窗口等效的是 Toplevel() ，它与根相同，但没有自己的解释器上下文。

不久，为了解决这个问题，我不得不将EditorWindow 类的**init () 方法的第一行从**

```
 self.Eenu=Tk() 
```

到

```
 self.Eenu=Toplevel() 
```

# java - 安卓信号处理

> ID：12800011
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:26:04.203
> 
> 标签：java, android, signal-processing

我目前正在从事一个涉及在安卓手机上使用脑电图信号的项目。

我正在决定是否应该为 android 制作自己的信号处理库，因为我似乎无法在网上找到任何东西。

有没有人知道我可以使用的库，或者制作我自己的库会更容易和更快吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T02:41:51.467

我正在做一个类似的项目。我正在使用带有[Ketai 库的](http://code.google.com/p/ketai/)[NeuroSky MindSet EEG 耳机](http://store.neurosky.com/products/mindset)和 Processing IDE 。我无法让 NeuroSky Android API 与我的 Android 2.3.4 或 4.0.1 手机一起使用。在深入研究它为什么不起作用时，我迷失在他们的 API 库中，并决定自己读取数据可能会更容易。我修改了 Ketai 蓝牙程序以读取原始数据，但以一种随意的方式进行（没有执行校验和）。这是一个相当粗略的 hack，但我得到了要在屏幕上绘制的数据，并且已经有几个星期没有处理它了。在我对代码进行更多评论后，我可以将我的代码放在 github 上——如果能得到一些合作会很好。

顺便说一句，如果您不打算将其用于 processing.org 的处理 IDE，那么您很幸运。正如 Arcymag 所指出的那样，关键字“处理”可能会触发像我这样的人收到 processing.org 电子邮件的响应。在任何情况下，Processing IDE 都有一个 Android 模式，允许您在其 IDE 下对 Android 进行编程。如果您想在 Eclipse IDE 中开发您的程序，您可以导出您的项目并将 Processing 的所有功能作为一个库随身携带。导出后，您的代码将是完整的 Java。Java“正确”和Processing如何呈现Java（一些美学变化）之间只有一些微小的差异。我更喜欢使用处理的力量，因为我实际上不是一个“合适的”程序员，因为我的背景是物理学，和处理使编程成为一种乐趣。（关于 Java 本身和 Stackoverflow 上的处理之间的区别有几个问题。）

这是我在 stackoverflow 上的第一篇文章。我一直在寻找一种回馈方式，因为这个网站仅在这个项目上就为我节省了无数时间。如果你觉得我值得一票，你会让一个菜鸟非常高兴。我可以做一些事情，例如：发布两个以上的超链接并为答案投票。

# wordpress - 将超大图像显示在页面前面

> ID：12800023
> 
> 赞同：1
> 
> 时间：2012-10-09T12:26:27.073
> 
> 标签：wordpress, supersized

我在 Wordpress 中使用带有 tentyten 主题的 Supersized 插件，这是我女儿网站的外观。 [http://www.theeplblog.com/beauty-1/](http://www.theeplblog.com/beauty-1/) 但我只想显示图像，而不是当前在它前面的页面。我需要做什么 - 以便我的页面美女一和美女二只显示幻灯片图像？我正在为图像使用 NextGEN Gallery。我对 css 不太熟练 - 但非常感谢帮助。非常感谢。

# python - 正则表达式否定捕获组返回答案

> ID：12800027
> 
> 赞同：1
> 
> 时间：2012-10-09T12:26:40.010
> 
> 标签：python, regex, regex-negation

在 python 中，如何防止它返回空字符串列表？

```
>>> re.findall(re.compile("(?!lala)"),"lala")
['', '', '', ''] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:28:37.820

您正在寻找一个没有后跟 text 的空字符串，这是`lala`一个否定的前瞻断言。

由于有 4 个这样的位置带有一个空字符串（在字母之间和末尾），因此有 4 个空匹配。

它正在返回您正在寻找的东西，也许您正在寻找其他东西？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T12:32:29.090

首先：`(?!lala)`不是一个很好的正则表达式。（正如您自己发现的那样）其次，findall 将查找几乎可以找到的任何内容，并且由于您不是真的在寻找任何内容，并且您正在寻找 4 个字符的内容，因此您会得到 4 个空字符串。

要解决这个问题，你应该帮助你的正则表达式

试试这个链接[http://regexr.com?32dcm](http://regexr.com?32dcm)

我已经复制了你的正则表达式和一些随机行来给你看一个例子。也在下面：

`^(?!lala).*$`

将匹配任何不以 lala 开头的行。因为你没有明确你的确切期望，这就是我认为你正在尝试做的事情。

# php - 使用 PHP 通过 email() 发送的电子邮件中的文本方向和对齐方式

> ID：12800028
> 
> 赞同：5
> 
> 时间：2012-10-09T12:26:47.523
> 
> 标签：php, html, email, alignment, hebrew

我正在通过 php 发送一封自动电子邮件。该电子邮件包含方向是从右到左的希伯来语。这是构成消息正文部分的代码：

```
 $emailMessage ='
            <html lang="HE">
                <head>
                <title>
                    job-skills | הצורפות
                </title>
                </head>
                <body style="text-align:right; direction:rtl;">
                    <table>
                        <tr>
                            <td><h3>תודה על הצטרפותך</h4></td>
                        </tr>
                        <tr>
                            <td>על מנת להצטרף סופית לאתר עליך ללחץ על הלינק הבא:</td>
                        </tr>
                        <tr>
                            <td><a href="http://localhost/W-DB/php/registration_and_login/confirm_registration.php?email=' .$registrationEmail .'&tempPass=' . $tempPass . '>לחץ כאן</a></td>
                        <tr>
                        </tr>
                        <tr>
                            <td>בברכה,</td>
                        </tr>
                        <tr>
                            <td><h2>JOb-Skills</h2></td>
                        </tr
                    </table>
                </body>
            </html> 
```

仍然是左对齐的文本和从左到右的方向。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T12:22:15.833

这是我的代码：

```
<?php 
$to ="mail id";
$from = "mail id";
$sub = "Hebrew";
$message = '<html lang="HE">
                <head>
                <title>
                    job-skills | הצורפות
                </title>
                </head>
                <body style="text-align:right; direction:rtl;">
                    <table>
                        <tr>
                            <td><h3>תודה על הצטרפותך</h4></td>
                        </tr>
                        <tr>
                            <td>על מנת להצטרף סופית לאתר עליך ללחץ על הלינק הבא:</td>
                        </tr>
                        <tr>
                            <td>
    <a href="#">לחץ כאן</a></td>
                        <tr>
                        </tr>
                        <tr>
                            <td>בברכה,</td>
                        </tr>
                        <tr>
                            <td><h2>JOb-Skills</h2></td>
                        </tr
                    </table>
                </body>
            </html>';
$headers = "From:" . $from;
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
if(mail($to,$sub,$message,$headers)) echo "success";

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:38:39.063

尝试添加`dir="rtl"`到您的 HTML 标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T11:55:24.727

![在此处输入图像描述](../Images/069066c7baad0c56c4e1a69d266d4ca4.png)

它适用于我提到的代码。请查看所附图片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-15T13:22:46.537

请参考放置在正文中的样式@Varun：`<body style="text-align:right; direction:rtl;">` 只有在我将此样式添加到正文后，它也适用于 gmail，直到那时它只适用于 Outlook。

# php - 文件名中的空格？file_put_contents

> ID：12800029
> 
> 赞同：2
> 
> 时间：2012-10-09T12:26:48.843
> 
> 标签：php, wordpress, file-get-contents

> **可能重复：**
> [无法激活 CURLOPT_FOLLOWLOCATION](https://stackoverflow.com/questions/6352927/curlopt-followlocation-cannot-be-activated)

我在我的 WordPress 网站上使用 WordPress 插件来上传一系列图像。它总是可以正常工作，除非图像网址中有空格。我尝试使用 urlencode，但仍然出现错误。这是它中断的代码：

当我`echo`出去`$img`的时候

`"http://omodaimg.xcdn.nl/RM1000,1000/taupe-paul-green-sneakers-1157/PAUL GREEN/31024_1.png"`

没有引号。

```
foreach ($imgs as $img) {                                                                   
$image_filename = wp_unique_filename($uploads['path'], basename(parse_url(trim($img), PHP_URL_PATH)));
$image_filepath = $uploads['path'] . '/' . $this->url_title($image_filename);
if ( ! file_put_contents($image_filepath, @file_get_contents(trim($img)))) {
    if (! get_file_curl(trim($img), $image_filepath)) {
        $logger and call_user_func($logger, sprintf(__('<b>ERROR</b>: File %s cannot be saved locally as %s', 'pmxi_plugin'), trim($img), $image_filepath));
        unlink($image_filepath); // delete file since failed upload may result in empty file created
    }
} 
```

有人看到我没看到吗？非常感谢任何正确方向的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:44:48.937

它似乎更多是您的服务器配置中的问题，而不是您的代码中的问题。

尝试在 php.ini 文件中禁用安全模式。

# java - 如何从 JSpinner 结果值设置日历？

> ID：12800035
> 
> 赞同：1
> 
> 时间：2012-10-09T12:27:21.790
> 
> 标签：java, swing, jspinner, jcalendar

我正在尝试制作日历月份和年份选择器。

如何从两个 jspinner 设置日历？

jspinner 1 = 月值

jspinner 2 = 年份值

也许只是为了从 jspinner 获取 int 值.. 怎么做？

这是我的代码：（更新）

```
import java.awt.BorderLayout;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JSpinner;
    import javax.swing.SpinnerDateModel;
    import javax.swing.event.ChangeEvent;
    import javax.swing.event.ChangeListener;

    public class datepicker extends JFrame{
       JSpinner Smonth = new JSpinner();
       JSpinner Syear = new JSpinner();
       Calendar cal = Calendar.getInstance();
       Date date = cal.getTime();
       SimpleDateFormat sdf_Month = new SimpleDateFormat("MM");
       SimpleDateFormat sdf_Year = new SimpleDateFormat("yyyy");
       SimpleDateFormat sdf_final_Date = new SimpleDateFormat("MMMM yyyy");
       JLabel label = new JLabel();

       datepicker(){
          Smonth.setModel(new SpinnerDateModel(date, null, null, cal.MONTH));
          Smonth.setEditor(new JSpinner.DateEditor(Smonth, "MMMM"));
          Syear.setModel(new SpinnerDateModel(date, null, null, cal.YEAR));
          Syear.setEditor(new JSpinner.DateEditor(Syear, "yyyy"));

          Smonth.addChangeListener(new ChangeListener() {

                @Override
                public void stateChanged(ChangeEvent e) {
                   execute(); 

                }
            });

          Syear.addChangeListener(new ChangeListener() {

                @Override
                public void stateChanged(ChangeEvent e) {
                    execute();

                }
            });

          setLayout(new BorderLayout());
          add(Smonth, BorderLayout.WEST);
          add(label, BorderLayout.CENTER);
          add(Syear, BorderLayout.EAST);

          execute();
       }

           void execute(){

              cal.set(Integer.parseInt(sdf_Year.format(Syear.getValue())),
                  (Integer.parseInt(sdf_Month.format(Smonth.getValue())))-1,
                  1); 

              label.setText(sdf_final_Date.format(cal.getTime()));
           }

           public static void main(String[]args){
               new datepicker().setVisible(true);
           }    
    } 
```

我完整的简单日期选择器

```
 package Feature.Other;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import javax.swing.JDialog;
import javax.swing.JFormattedTextField;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerDateModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Calender extends JDialog{
    private Calendar cal=Calendar.getInstance();
    public  java.sql.Date initDate = new  java.sql.Date(cal.getTime().getTime());
    private  JPanel north = new JPanel();
    private JPanel center = new JPanel();
    private JLabel lFinalDate=new JLabel("tanggal");
    private JLabel lDate[]= new JLabel[49];
    private String day[]= {"SUN","MON","TUE","WED","THU","FRI","SAT"};
    private JSpinner smonth = new JSpinner();
    private JSpinner    sYear = new JSpinner();
    private DateFormat sdf = new SimpleDateFormat("dd MMMM yyyy");
    private DateFormat sdfM = new SimpleDateFormat("MM");
    private DateFormat sdfY = new SimpleDateFormat("yyyy");

    public Calender() {

        smonth.setModel(new SpinnerDateModel(initDate, null, null, cal.MONTH));
        smonth.setEditor(new JSpinner.DateEditor(smonth, "MMMM"));
        JFormattedTextField jft = ((JSpinner.DefaultEditor)smonth.getEditor()).getTextField();
        jft.setEditable(false);
        jft.setHorizontalAlignment(JLabel.LEFT);
        sYear.setModel(new SpinnerDateModel(initDate, null, null, cal.YEAR));
        sYear.setEditor(new JSpinner.DateEditor(sYear, "yyyy"));
        JFormattedTextField jft2 = ((JSpinner.DefaultEditor)sYear.getEditor()).getTextField();
        jft2.setEditable(false);

        smonth.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                dor(); 
            }
        });

        sYear.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                dor();   
            }
        });

        setLayout(new BorderLayout());
        setSize(500,300);
        init();
    }

    private void init(){

        add(north, BorderLayout.NORTH);
        add(center, BorderLayout.CENTER);
        north.setLayout(new GridBagLayout());
        center.setLayout(new GridLayout(7,7));

        addComponen(sYear, 2,0,1,1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        addComponen(smonth, 0,0,1,1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);
        addComponen(lFinalDate,1,0,1,1, GridBagConstraints.CENTER, GridBagConstraints.BOTH);

        for (int i=0;  i<49;  i++ ){
          lDate[i]= new JLabel("");
          center.add(lDate[i]);

          if(i<7){
              lDate[i].setText(day[i]);
                }
        }
        dor();
    }

    private void addComponen(Component component,int gridx, int gridy, int gridwid, int gridheig,int achor, int fill){

        GridBagConstraints gc = new GridBagConstraints(gridx, gridy, gridwid, gridheig, 1.0, 1.0, achor,fill,new Insets(0, 0, 0, 0), 0, 0);
        north.add(component, gc);
    }

    private void dor(){
        cal.set(Integer.parseInt(sdfY.format(sYear.getValue())),
                Integer.parseInt(sdfM.format(smonth.getValue()))-1,
                1);
        lFinalDate.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lFinalDate.setText(sdf.format(cal.getTime()));
        int dayMax = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
        int start = cal.get(Calendar.DAY_OF_WEEK);

        for (int i=7;  i<49;  i++ ){
          lDate[i].setText("");
          lDate[i].setForeground(Color.BLACK);
        }

        for (int a=6+start,b=1;b<=dayMax;a++,b++ ){
            final int selection = a;
            lDate[a].setText(""+b);
            lDate[a].addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent evt){
                    cal.set(Integer.parseInt(sdfY.format(sYear.getValue())),
                        Integer.parseInt(sdfM.format(smonth.getValue()))-1,
                        Integer.parseInt(lDate[selection].getText()));
                    initDate = new  java.sql.Date(cal.getTime().getTime());
                    for (int z=6;z<=42;z++){
                    lDate[z].setForeground(Color.BLACK);}
                    lDate[selection].setForeground(Color.blue);
                    lFinalDate.setText(sdf.format(initDate));    
                }
            });
        }
    }

    public static void main (String[]args){
        new Calender().setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:31:41.290

放置适当的参数类型，即：

```
 cal.set(Integer.parseInt(sdf_Year.format(Syear.getValue())), 
          Integer.parseInt(sdf_Month.format(Smonth.getValue())),
          1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:49:21.617

*   请阅读有关[JSpinner的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)

*   有关于`JSpinner`, `SpinnerDateModel`, inc 的详细说明。关于教程的代码示例

编辑

*   没有理由解析任何东西，使用正确的 SpinnerXxxModel，

*   您可以按照教程中的说明进行测试，拆分为三个 JSpinner，SpinnerDateModel 的简单代码

.

```
import java.awt.*;
import java.text.SimpleDateFormat;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;

public class TimeZoneSpinners {

    private final String[] zones = {"Asia/Tokyo", "Asia/Hong_Kong",
        "Asia/Calcutta", "Europe/Paris", "Europe/London",
        "America/New_York", "America/Los_Angeles"
    };
    private final JLabel[] labels = new JLabel[zones.length];
    private final SimpleDateFormat[] formats = new SimpleDateFormat[zones.length];
    private JSpinner spinner;
    private JSpinner spinnerDate;
    private JSpinner spinnerMonth;
    private JSpinner spinnerYear;
    private SpinnerDateModel model;
    private SimpleDateFormat format;
    private JPanel panel;
    private JFrame frame = new JFrame();

    public void makeUI() {
        Calendar cal = Calendar.getInstance();
        Date date = cal.getTime();
        model = new SpinnerDateModel();
        model.setValue(date);
        spinner = new JSpinner(model);
        spinner.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                Date date = (Date) ((JSpinner) e.getSource()).getValue();
                for (int i = 0; i < labels.length; i++) {
                    labels[i].setText(formats[i].format(date));
                }
            }
        });
        format = ((JSpinner.DateEditor) spinner.getEditor()).getFormat();
        format.setTimeZone(TimeZone.getTimeZone(zones[0]));
        format.applyPattern("yyyy-MM-dd HH:mm:ss");
        panel = new JPanel(new GridLayout(zones.length, 2, 10, 10));
        for (int i = 0; i < zones.length; i++) {
            formats[i] = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
            formats[i].setTimeZone(TimeZone.getTimeZone(zones[i]));
            JLabel label = new JLabel(zones[i]);
            labels[i] = new JLabel(formats[i].format(date));
            panel.add(label);
            panel.add(labels[i]);
        }
        frame.setLayout(new BorderLayout(10, 10));
        frame.add(spinner, BorderLayout.NORTH);
        frame.add(panel, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TimeZoneSpinners().makeUI();
            }
        });
    }
} 
```

# gps - 使用 WGS84 椭球的距离

> ID：12800045
> 
> 赞同：6
> 
> 时间：2012-10-09T12:27:58.337
> 
> 标签：gps, wgs84

考虑地球表面上的点 P1 (60°N, 20°E, 0) 和 P2 (60°N, 22°E, 0)

当使用 WGS-84 椭球模拟地球的形状时，点 P1 和 P2 之间的最短距离是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-03T17:30:09.433

不幸的是，Vincenty 的算法无法对某些输入进行收敛。 [GeographicLib](https://geographiclib.sourceforge.io/)提供了一种始终收敛的替代方案（并且也更准确）。提供了 C++、C、Fortran、Javascript、Python、Java 和 Matlab 中的实现。例如，使用 [Matlab 包](https://www.mathworks.com/matlabcentral/fileexchange/50605-geographiclib)：

```
format long;
geoddistance(60,20,60,22)
->
111595.753650629 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T16:13:39.440

正如对您的问题的评论中指出的那样，您应该使用文森蒂的逆问题公式。

您的问题的答案是：111595.75 米（或 60.257 海里）。

Vincenty 逆公式的 Javascript 实现，从[http://jsperf.com/vincenty-vs-havesine-distance-calculations](http://jsperf.com/vincenty-vs-haversine-distance-calculations)复制：

```
/**
 * Calculates geodetic distance between two points specified by latitude/longitude using 
 * Vincenty inverse formula for ellipsoids
 *
 * @param   {Number} lat1, lon1: first point in decimal degrees
 * @param   {Number} lat2, lon2: second point in decimal degrees
 * @returns (Number} distance in metres between points
 */

function distVincenty(lat1, lon1, lat2, lon2) {
  var a = 6378137,
      b = 6356752.314245,
      f = 1 / 298.257223563; // WGS-84 ellipsoid params
  var L = (lon2 - lon1).toRad();
  var U1 = Math.atan((1 - f) * Math.tan(lat1.toRad()));
  var U2 = Math.atan((1 - f) * Math.tan(lat2.toRad()));
  var sinU1 = Math.sin(U1),
      cosU1 = Math.cos(U1);
  var sinU2 = Math.sin(U2),
      cosU2 = Math.cos(U2);

  var lambda = L,
      lambdaP, iterLimit = 100;
  do {
    var sinLambda = Math.sin(lambda),
        cosLambda = Math.cos(lambda);
    var sinSigma = Math.sqrt((cosU2 * sinLambda) * (cosU2 * sinLambda) + (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda) * (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda));
    if (sinSigma == 0) return 0; // co-incident points
    var cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;
    var sigma = Math.atan2(sinSigma, cosSigma);
    var sinAlpha = cosU1 * cosU2 * sinLambda / sinSigma;
    var cosSqAlpha = 1 - sinAlpha * sinAlpha;
    var cos2SigmaM = cosSigma - 2 * sinU1 * sinU2 / cosSqAlpha;
    if (isNaN(cos2SigmaM)) cos2SigmaM = 0; // equatorial line: cosSqAlpha=0 (§6)
    var C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));
    lambdaP = lambda;
    lambda = L + (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));
  } while (Math.abs(lambda - lambdaP) > 1e-12 && --iterLimit > 0);

  if (iterLimit == 0) return NaN // formula failed to converge
  var uSq = cosSqAlpha * (a * a - b * b) / (b * b);
  var A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));
  var B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));
  var deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));
  var s = b * A * (sigma - deltaSigma);

  s = s.toFixed(3); // round to 1mm precision
  return s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:51:48.403

常用[Haversine公式](http://en.wikipedia.org/wiki/Haversine_formula)（误差<0.5%）

# android - 通过代码禁用 Android 浏览器“保存密码”功能

> ID：12800048
> 
> 赞同：0
> 
> 时间：2012-10-09T12:28:04.990
> 
> 标签：android, android-webview, android-browser

> **可能重复：**
> [如何禁用 Android WebView 上的“保存密码”对话框？](https://stackoverflow.com/questions/11531778/how-to-disable-the-save-password-dialog-on-an-android-webview)

有没有办法通过程序禁用android浏览器上的“保存密码”功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:31:03.460

如果您在谈论[WebView](https://developer.android.com/reference/android/webkit/WebView.html)，则关于文档，**无法**禁用此功能。

更新：Keyser 添加了一个[链接，显示如何在 WebView 中禁用密码保存。](https://stackoverflow.com/q/11531778/645270)

# c# - 如何使用亚马逊网络服务发送批量邮件？

> ID：12800052
> 
> 赞同：-3
> 
> 时间：2012-10-09T12:28:30.703
> 
> 标签：c#, asp.net, vb.net

我正在尝试使用 Amazon SES Web 服务发送群发邮件。但是，我在 .NET 中没有得到这样的参考。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:00:24.220

```
AmazonSimpleEmailServiceConfig amConfig = new AmazonSimpleEmailServiceConfig();
amConfig.UseSecureStringForAwsSecretKey = false;
AmazonSimpleEmailServiceClient amzClient = new    
    AmazonSimpleEmailServiceClient(ConfigurationManager.AppSettings["AKID"].ToString(),     
    ConfigurationManager.AppSettings["Secret"].ToString(), amConfig); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:03:38.617

```
SendEmailRequest ser = new SendEmailRequest("VERIFIED_EMAIL_HERE", dest, message);
SendEmailResponse seResponse = amzClient.SendEmail(ser);
SendEmailResult seResult = seResponse.SendEmailResult; 
```

（包括文本以通过 SO 的最低非空间要求）

# python - 多行 python 正则表达式

> ID：12800056
> 
> 赞同：7
> 
> 时间：2012-10-09T12:28:43.397
> 
> 标签：python, regex, multiline, regex-greedy

我有一个结构如下的文件：

```
A: some text
B: more text
even more text
on several lines
A: and we start again
B: more text
more
multiline text 
```

我正在尝试找到将像这样拆分我的文件的正则表达式：

```
>>>re.findall(regex,f.read())
[('some text','more text','even more text\non several lines'),
 ('and we start again','more text', 'more\nmultiline text')] 
```

到目前为止，我已经完成了以下操作：

```
>>>re.findall('A:(.*?)\nB:(.*?)\n(.*?)',f.read(),re.DOTALL)
[(' some text', ' more text', ''), (' and we start again', ' more text', '')] 
```

未捕获多行文本。我猜是因为惰性限定符真的很懒，什么也抓不到，但我把它拿出来，正则表达式变得非常贪婪：

```
>>>re.findall('A:(.*?)\nB:(.*?)\n(.*)',f.read(),re.DOTALL)
[(' some text',
' more text',
'even more text\non several lines\nA: and we start again\nB: more text\nmore\nmultiline text')] 
```

有人有想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T12:31:53.410

`A:`您可以告诉正则表达式在以（或字符串末尾）开头的下一行停止匹配：

```
re.findall(r'A:(.*?)\nB:(.*?)\n(.*?)(?=^A:|\Z)', f.read(), re.DOTALL|re.MULTILINE) 
```

# java - 谷歌应用引擎交易粒度

> ID：12800060
> 
> 赞同：0
> 
> 时间：2012-10-09T12:28:58.427
> 
> 标签：java, google-app-engine, transactions, objectify

我正在使用 objectify 作为数据存储接口在 Google App Engine(GAE) 上编写一个 java 应用程序。我需要使用事务来确保我的应用程序中的某些操作是原子的。但是我对数据库事务的粒度感到困惑，即如果我在线程的事务中使用特定的实体对象，那么以下哪一项是正确的？:-

1）我可以在不同线程的事务中同时使用同一实体的其他对象吗？

2）或者，是否一次我只能对特定实体类型的一个对象进行更改

如果 (2) 为真，那么如果我希望有多个请求来更新特定实体类型，即使它们将针对该实体类型下的不同对象，我该怎么办？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:28:00.447

请参阅此处的乐观并发部分：

[https://code.google.com/p/objectify-appengine/wiki/Concepts#Transactions](https://code.google.com/p/objectify-appengine/wiki/Concepts#Transactions)

# objective-c - NSSortDescriptor 问题

> ID：12800062
> 
> 赞同：4
> 
> 时间：2012-10-09T12:29:02.450
> 
> 标签：objective-c, xcode, core-data, nsfetchedresultscontroller

我正在制作一个通讯录应用程序，我从地址簿中获取名称并将它们存储在核心数据中，并使用`NSFetchedResultsController.However`第一个索引在表格上显示名称，出现的部分是 # 后跟字母。但我想像在本机联系人应用程序中那样做，即 #index 应该最后出现。
我使用了以下内容`NSortDescriptor`：

> sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"fullName" 升序：YES ];

这里的“fullName”是`key`通过连接名字和姓氏组成的核心数据。并且节标识符是“fullName”的第一个字母，如果`fullName`不以字母开头，则其节标识符是#。
我已经搜索过它并`NSDiacriticInsensitiveSearch`在`NSortDescriptor`比较器中使用了它，但它没有用。如果有人有任何想法，请告诉我。

这是我的代码：

```
NSString *special = @"\uE000";
if ([[self sectionName:contactName] isEqualToString:@"#"]) {                           
    sortName = [special stringByAppendingString:contactName];
}
else{
    sortName = contactName;
}
[newContact setValue:[self sectionIdentifier:sortName] forKey:@"sectionIdentifier"];
[newContact setValue:sortName forKey:@"sortName"]; 
```

这是排序描述符：

```
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sortName" ascending:YES]; 
```

`[self sectionIdentifier:sortName]`如果 sortName 以非字母开头，则此方法返回 #，否则返回其开头的字母。

newContact 是实体的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T18:24:05.297

`sortName`您可以在实体中存储一个附加属性，即`fullName`名称是否以字母开头，`<C>fullName`否则。`<C>`是一个比所有字母“更大”的固定字符。例如

```
NSString *special = @"\uE000";
if ("fullName starts with letter")
    sortName = fullName;
else
    sortName = [special stringByAppendingString:fullName]; 
```

现在您可以根据 进行排序，如果以特殊字符开头，`sortName`则部分标识符将为“#” 。`sortName`

缺点是您必须存储一个附加属性，优点是您可以继续使用获取的结果控制器（它只能使用持久属性进行排序）。

**更新：**实际上可以做得更容易一些。

创建新条目时，`sectionIdentifier`如果是字母，则设置为名称的第一个字符，否则设置为特殊字符：

```
NSString *special = @"\uE000";

if ([[NSCharacterSet letterCharacterSet] characterIsMember:[contact.contactName characterAtIndex:0]]) {
    contact.sectionIdentifier = [contact.contactName substringToIndex:1];
} else {
    contact.sectionIdentifier = special;
} 
```

获取的结果控制器`sectionIdentifier`用于对部分进行分组和排序。每个部分中的条目按以下顺序排序`contactName`：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Contact"];
NSSortDescriptor *sort1 = [NSSortDescriptor sortDescriptorWithKey:@"sectionIdentifier"
             ascending:YES selector:@selector(localizedStandardCompare:)];
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"contactName"
             ascending:YES selector:@selector(localizedStandardCompare:)];
[request setSortDescriptors:@[sort1, sort2]];
self.frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                   managedObjectContext:self.context
                     sectionNameKeyPath:@"sectionIdentifier"
                              cacheName:nil]; 
```

所有非字母条目现在都归入最后一部分。最后一步是显示`#`最后一节的正确节标题：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.frc sections] objectAtIndex:section];
    NSString *title = [sectionInfo name];
    if ([title isEqualToString:special])
        title = @"#";
    return title;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:58:56.020

您可以将结果分成两个数组，一个以字母字符开头，一个不以字母字符开头。然后只需将两者相加即可。假设您从一个名为的托管对象数组开始`results`：

```
//Create the sort descriptor array
NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"fullName" ascending:YES];
NSArray *descriptors = [NSArray arrayWithObject:sd];

//Create a sorted array of objects where fullName starts with an alpha character
//using a Regex

NSPredicate *pred = [NSPredicate predicateWithFormat:@"fullName MATCHES '^[a-zA-Z].*'"];

NSArray *alpha = [[results filteredArrayUsingPredicate:pred] sortedArrayUsingDescriptors:descriptors];

//Now use the alpha array to create an array of objects where the fullName does not
//start with an alpha character

NSMutableArray *nonAlpha = [results mutableCopy];

[nonAlpha removeObjectsInArray:alpha];

[nonAlpha sortUsingDescriptors:descriptors];

//Now put them back together again

NSArray *sortedResults = [alpha arrayByAddingObjectsFromArray:nonAlpha];

//And if you're not using ARC!
[nonAlpha release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:56:02.513

你可以这样做：

```
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"fullName" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]; 
```

只要确保它不会影响您的情况下的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T04:39:57.700

您可以尝试编写自己的比较器功能

假设它正在对 ManagedObjects 进行排序并且它们都具有 fullName 作为字段，那么以下内容可能会有所帮助。

```
[[NSSortDescriptor alloc] initWithKey:@"FullName" ascending:YES comparator:^NSComparisonResult(id obj1, id obj2) {
        return [[obj1 objectForKey:@"fullName"] compare:[obj2 objectForKey:@"fullName"] options:NSCaseInsensitiveSearch];
    }]; 
```

这样做的好处是您还可以为每次比较编写 NSLog 并查看发生了什么。

# c++ - 标记 ID 始终为 -1

> ID：12800064
> 
> 赞同：2
> 
> 时间：2012-10-09T12:29:10.097
> 
> 标签：c++, artoolkit

我正在用 ARToolkit plus 做一个小项目。我发现检测到的标记 id 始终为 -1 很奇怪，因为标记的置信度也始终为 0.0。我已经加载了标准 ARTK plus zip 提供的 patt.hiro 文件。下面的代码显示了我在做什么：

“DrawGLScene”函数的片段：

```
 //Render the webcam background
IplImage* img = showWebcam();   

// do the OpenGL camera setup
glMatrixMode(GL_PROJECTION);
glLoadMatrixf(tracker->getTracker()->getProjectionMatrix());

//Detect the markers in the video frame
ARToolKitPlus::ARMarkerInfo* markerinfo=0;
int nummarkers = detectMarkers(img, &markerinfo); 
```

'detectMarkers' 功能：

```
 int detectMarkers(IplImage* image, ARToolKitPlus::ARMarkerInfo** markerinfo){

 cvFlip(image, image, 0);

int nummarkers;
tracker->getTracker()->calc((uchar*)(image->imageData), -1, false, markerinfo, &nummarkers);

return nummarkers; 
```

该程序成功地检测到场景中的标记，但没有给它们任何 id 或置信度比，即使标记是内存中加载的标记。任何帮助都非常感谢！

# ruby - 执行包含多个模块同名的方法

> ID：12800066
> 
> 赞同：7
> 
> 时间：2012-10-09T12:29:20.457
> 
> 标签：ruby, inheritance, module

我有两个具有相同方法名称的模块。当我在某个类中包含两个模块时，只执行最后一个模块的方法。相反，我需要在初始化类时执行两者：

```
class MyClass
    include FirstModule
    include SecondModule

    def initialize
        foo # foo is contained in both modules but only the one in SecondModules is executed
    end
end 
```

可行吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T12:37:52.423

正如 Yusuke Endoh 所说，在 Ruby 中一切皆有可能。在这种情况下，你必须忘记说 'foo' 的便利性，并且你必须非常明确地说明你真正想要做什么，就像这样：

```
class MyClass
  include FirstModule
  include SecondModule
  def initialize
    FirstModule.instance_method( :foo ).bind( self ).call
    SecondModule.instance_method( :foo ).bind( self ).call
  end
end 
```

'FirstModule.instance_method...' 行可以用简单的 'foo' 代替，但通过明确说明，您可以确保无论如何，您都在从您认为的那个 mixin 中调用该方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T12:48:23.923

你能修改包含的模块吗？也许您只是调用`super`第二个模块？

```
module M1
  def foo
    p :M1
  end
end

module M2
  def foo
    p :M2
    defined?(super) && super
  end
end

class SC
  include M1
  include M2

  def initialize
    foo
  end
end

SC.new 
```

Or perhaps you actually want to do this?

```
module M1
  def bar; p :M1 end
end

module M2
  include M1
  def foo; bar; p :M2 end
end

class SC
  include M2
  def initialize; foo end
end 
```

## See [live demo here](http://cibox.org/slivu/stackoverflow?lang=ruby&file=execute-methods-with-the-same-name-of-multiple-modules-included.rb&run=true)

# php - 计算链接上的点击次数（没有 onclick）

> ID：12800067
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:29:21.617
> 
> 标签：php, javascript, mysql, onclick, hyperlink

我有这样的链接

```
"""<a href="http://xyz.com/pz/jjjjj/"><img src="http://xyzsho/mbd.com/42/1319/11110/" alt="" border="0"></a>"""" 
```

存储在 mysql 数据库中。用户从其他网站复制这些链接并将其上传到数据库。这些链接现在将显示在我们的网站上。如何计算和存储每个链接的点击次数。在这里我无法使用 onclick。

我正在使用 PHP 和 MySQL。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:33:21.550

您需要重写 URL 以首先访问可用于收集统计信息的其他服务器，然后将用户重定向到他们的初始 URL。

这是 Twitter 或 Facebook 在您点击其中一个站外链接时使用的那种东西。

本质上，您正在编写一个 URL 缩短器。

# pcre - 在字符串的前 100 个字符中搜索模式

> ID：12800069
> 
> 赞同：0
> 
> 时间：2012-10-09T12:29:26.463
> 
> 标签：pcre

我想显示字符串的前 1000 个字符（文字被特殊符号替换）。我正在使用 pcre 库来替换文字。替换每个文字后，我正在检查字符串的长度，如果它> 1000，则停止匹配并显示字符串。

我的问题是，假设我要发送一个长度为 1GB 的字符串，如果该字符串中没有文字，pcre 将检查整个字符串。我想在前 1000 个字符中搜索模式。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:20:50.760

只需剪切字符串的 1000 个字符的头部并使用替换它，而不是整个文本。

如果替换后得到的字符少于 1000 个，只需剪下另一个 1000 个字符的头，使用替换并连接两个结果。循环执行，直到获得 1000 个字符的字符串或到达整个文本的末尾。

# ruby-on-rails - 如何在 Rails 中说“除非 variable.HTTP Error 400”

> ID：12800072
> 
> 赞同：1
> 
> 时间：2012-10-09T12:29:34.707
> 
> 标签：ruby-on-rails, twilio

我正在尝试构建一个呼叫跟踪应用程序来学习 twilio 和 rails。现在，我正在添加购买电话号码的功能。

我想在我的创建操作中执行 if/else 语句，如果电话号码已保存到数据库中，并且实际购买了 twilio 号码，则执行此操作，否则执行此操作。

但是，twilio 数字不会返回 true 或 false。这是他们在[文档](http://www.twilio.com/docs/api/rest/incoming-phone-numbers#list-post)中所说的：

> HTTP POST
> 
> 为您的帐户购买一个新的电话号码。如果为您的请求找到电话号码，Twilio 会将其添加到您的帐户中，并向您收取电话号码第一个月的费用。如果 Twilio 找不到与您的请求匹配的电话号码，您将收到带有 Twilio 错误代码 21452 的 HTTP 400。

所以，我想做的是构建一个 if 语句，如果返回是 HTTP 400，那么执行 x.

这是我目前拥有的代码

```
 #This saves the Twilio number to the database, and buys it. 
  def create
    @user = current_user
    @phone = @user.phones.build(params[:phone])
    client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)
    number = client.account.incoming_phone_numbers.create({:phone_number => @phone.twilio_number, :voice_url => VOICE_URL, :voice_method => "POST"})
   if @phone.save && number.true
      flash[:success] = "Phone Number Created!"
      redirect_to user_path
    else
      render new_phone_path
      flash[:error] = "It looks like there were errors with the submission"
    end
  end 
```

我需要更改 && number.true 以引用 HTTP 400 错误吗？

我不确定这是否可能——所以如果你有想法，我会全神贯注:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-09T20:46:00.207

三年后，我只想分享我们在 Rails 中提供了一个功能齐全的呼叫跟踪教程，以帮助您更快地启动和运行：

[https://www.twilio.com/docs/tutorials/walkthrough/call-tracking/ruby/rails](https://www.twilio.com/docs/tutorials/walkthrough/call-tracking/ruby/rails)

该应用程序具有三个主要功能：

*   它从 Twilio 购买电话号码以用于不同的营销活动（如广告牌或公共汽车广告）
*   它将这些电话号码的来电转发给销售人员
*   它显示图表，显示有关电话号码和他们收到的电话的数据

在开始之前，您需要确保获取[Ruby 帮助程序库](https://www.twilio.com/docs/libraries/ruby)。

# windows-8 - 在 Windows 8 中安装 SharePoint 2010

> ID：12800082
> 
> 赞同：1
> 
> 时间：2012-10-09T12:30:09.583
> 
> 标签：windows-8

如何在 Windows 8 64 位企业评估版中安装 Sharepoint 2010？

我有以下软件 IDE

1)SharePoint 2010 Server 版 2)SQL Server 2008 R2 Express 版 3)Windows 8 企业评估版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:43:22.587

在 Windows 8 上安装 Sharepoint 与在 Windows 7 上安装相同。这是我关注的链接，但用于消费者预览， [http://blogs.technet.com/b/spweb/archive/2012/03/21/running-sharepoint-2010-on-windows-8-consumer-preview。 aspx](http://blogs.technet.com/b/spweb/archive/2012/03/21/running-sharepoint-2010-on-windows-8-consumer-preview.aspx)

# url-routing - 如何获取 angularjs 路由以在 IE 7 和 8 中显示部分内容？

> ID：12800084
> 
> 赞同：1
> 
> 时间：2012-10-09T12:30:14.383
> 
> 标签：url-routing, angularjs

我在一个项目中使用 AngularJS，并尝试使用包含的路由进行导航。我在 IE7 和 8 中遇到问题。当我转到其中一个页面时，控制器会触发并加载数据。（我可以看到在填充了所有数据绑定字段的情况下返回了部分。）问题是部分没有被添加/附加到 ng-view。我开始使用 AngularJS v1.0.1 但现在切换到 1.0.2 认为这可能是我使用的版本中的一个错误。任何帮助将不胜感激。

这是我用于路由的代码：

```
myApp.config(['$routeProvider', function($routeProvider, $location){
$routeProvider.when('/business/:query', {   templateUrl: 'partials/detail.html', controller: 'details'});
$routeProvider.when('', { templateUrl: 'partials/splash.html'});
$routeProvider.when('/results/:query', {    templateUrl: 'partials/list.html', controller: 'listController'});
$routeProvider.otherwise({redirectTo: ''});

}]); 
```

这是控制器的代码：

```
myApp.controller('listController', listController = function($scope, $routeParams, $http, $cookies){

var query = $routeParams.query;
var myQuery =  query.indexOf('-') > 0 ? $scope.removeDashes(query):query;

switch($scope.selected)
{
case 'name':
    $http({ method: 'jsonp',
       //URL to test service
        url: 'http://localhost:56119/PropertyAppraiser/PABusinessSearchService.asmx/searchBusinesses?NAME=' + myQuery + '&callback=JSON_CALLBACK',
        header: { 'Content-Type': 'application/json; charset=utf-8' }

    })
    .success(function(data){
        $scope.businesses = data;
    });
    break;

case 'address':
    $http({method:'jsonp',
    //URL to test service
    url:'http://localhost:56119/PropertyAppraiser/PABusinessSearchService.asmx/searchAddress?myAddress=' + myQuery + '&callback=JSON_CALLBACK',
    header:{'Content-Type':'application/json; charset=utf-8'}
    })
    .success(function(data){
        $scope.businesses = data;

    })
    .error(function(data){

        return false;
    })
    break;
}
})

myApp.controller('details', details  = function($scope, $http, $routeParams){

var query = $routeParams.query;
var myQuery =  query.indexOf('-') > 0 ? $scope.removeDashes(query):query;

$http({ method: 'jsonp',
    //URL to test service
    url: 'http://localhost:56119/PropertyAppraiser/PABusinessSearchService.asmx/searchBusinesses?FOLIO=' + myQuery + '&callback=JSON_CALLBACK',
    header: { 'Content-Type': 'application/json; charset=utf-8' }

})
.success(function(data){
    $scope.businesses = data;           
});
}); 
```

这是应用程序的 HTML：

```
<div id="ng-app" class="ng-app:myApp ng-cloak" ng-cloak ng-app="myApp"  ng-controller="businessSearchCtrl">

<div id="infoContainer" >
<h1 id="mainHeader">Personal Property Account Information</h1>

<div id="searchContainer">
<h3 style="background: none; margin: 0; padding: 0">Search By Folio, Business Name, or Address:</h3>

<select ng-model="chosen" ng-options="i.id as i.name for i in items">
    <option value=""></option>
</select>

<input id="searchBox" type="text" placeholder="Enter Business Name or Folio Number" ng-model="query" />
<input id="submit" type="button" ng:click="search()" value="Search"/>
</div>

<div class="ng-view">

</div>

</div>
<div style="clear:both; height:0">&nbsp;</div>
</div>

<div style="clear:both; height:0">&nbsp;</div>
</div> 
```

编辑：它适用于我测试过的所有其他浏览器，包括 IE9，我也没有收到任何错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:41:43.623

好的，我发布这个答案以防任何其他睡眠不足的父亲在那里犯同样类型的错误。包含的部分的 html 需要具有某种包含元素。显然，IE 7 和 8 不能将 html 附加到页面，除非它完全包含在块级元素中。

也许我已经知道这一点，只是忘记了。如果您现在正在阅读本文，也许您知道这一点。也许这就是为什么人们在问答网站上不使用真实姓名的原因。我可以肯定的是，前端开发可能是一个残酷、苛刻的情妇……

# jquery - JQuery 以像素为单位计算 DIV 宽度

> ID：12800089
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:30:22.153
> 
> 标签：jquery, css

是否有可能在使用w/out 插件`width`时获得任意的实际值？我对以下两种情况感兴趣：`DIV``pixels``JQuery`

1.  中指定的 DIV 的宽度`percents`，我需要沿着树向上走，记住填充和/或边距，找到宽度以像素为单位的第一个父级，然后向下走到我的元素应用这些填充和边距。

2.  DIV`absolutely`使用`top`, `right`,`bottom`和`left` `CSS`属性定位，与上一个类似，只是需要考虑这些属性。

对带有`width: 100%;`返回的 DIV 的简单调用`100`，这对我来说还不够好。

**更新 1 - 控件，我测量的宽度在我调用 control.width() 时被隐藏，就是这样。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:31:24.027

如果`width()`没有按预期工作（小提琴会有所帮助），请使用`offsetWidth`. 假设你有一个对元素的 jQuery 引用

```
$('div').get(0).offsetWidth; 
```

将返回元素的宽度（以像素为单位）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:33:33.387

它按预期工作检查[**演示**](http://jsfiddle.net/TDkLH/)

```
alert($('div').width()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:41:02.803

您可以使用此代码

```
 $(function () {
        alert($("#YourDivIdHere").css("width"))
 }) 
```

# android - android 铃声 - 如何添加从 URL 路径获取的铃声

> ID：12800092
> 
> 赞同：2
> 
> 时间：2012-10-09T12:30:33.713
> 
> 标签：android

我想知道当用户在 Activity 中长按铃声名称时，有什么方法可以设置从 url 路径获取的铃声。

波纹管代码我试图将最终路径从 R.raw.sound1 更改为 URL 路径，但仍然不能。

任何人都可以告诉我如何设置从 URL 获取文件的铃声？

# 这是我的代码

```
final MediaPlayer ring01 = MediaPlayer.create(this, R.raw.sound1);

// play sound files on clicks
    Button s01 = (Button) findViewById(R.id.btnring01); 
    s01.setText(this.getString(R.string.title01));
    s01.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
    try 
            {
        ring01.prepare();
    }
            catch (IllegalStateException e)
            {
        e.printStackTrace();
    } 
            catch (IOException e)
            {
        e.printStackTrace();
        }
    ring01.start();             
    }
});
    registerForContextMenu(s01);

public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
super.onCreateContextMenu(menu, v, menuInfo);  
        menu.setHeaderTitle("Save as...");  
        menu.add(0, v.getId(), 0, "Tab Here To Save As Ringtone");    
    }  

@Override  
public boolean onContextItemSelected(MenuItem item) {  
    if(item.getTitle()=="Tab Here To Save As Ringtone"){function1(item.getItemId());}  
    else {return false;}  
return true;  
}

public boolean function1(int ressound){

    String soundname = "";

    switch(ressound)
    {
        case R.id.btnring01:
        ressound=R.raw.aftermath;
        soundname = (this.getString(R.string.title01));
        break;
    }

  //and so on and so on.....
  byte[] buffer=null;
   InputStream fIn = getBaseContext().getResources().openRawResource(ressound);
   int size=0;

   try {
   size = fIn.available();
   buffer = new byte[size];
   fIn.read(buffer);
   fIn.close();
   } catch (IOException e) {
   // TODO Auto-generated catch block
   return false;
   }

   String path="/sdcard/media/audio/ringtones/";
   String filename=soundname+".ogg";

   boolean exists = (new File(path)).exists();
   if (!exists){new File(path).mkdirs();}

   FileOutputStream save;
   try {
   save = new FileOutputStream(path+filename);
   save.write(buffer);
   save.flush();
   save.close();
   } catch (FileNotFoundException e) {
   // TODO Auto-generated catch block
   return false;
   } catch (IOException e) {
   // TODO Auto-generated catch block
   return false;
   }
 File k = new File(path, filename);

   ContentValues values = new ContentValues();
   values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
   values.put(MediaStore.MediaColumns.TITLE, soundname);
   values.put(MediaStore.MediaColumns.SIZE, 215454);
   values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/ogg");
   values.put(MediaStore.Audio.Media.ARTIST, "Sokun Kanha");
   values.put(MediaStore.Audio.Media.DURATION, 230);
   values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
   //values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
   //values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
   //values.put(MediaStore.Audio.Media.IS_ALARM, true);
   //values.put(MediaStore.Audio.Media.IS_MUSIC, false);
   values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
   values.put(MediaStore.Audio.Media.IS_ALARM, false);
   values.put(MediaStore.Audio.Media.IS_MUSIC, false); 
```

# spring - 检索 Spring JPA 事务异常的更多错误信息

> ID：12800096
> 
> 赞同：1
> 
> 时间：2012-10-09T12:30:48.473
> 
> 标签：spring, jpa, transactions

当我们尝试保存对象和子对象时，我们会遇到一些奇怪的行为和与我们的事务不一致的情况。不幸的是，返回给我们的错误根本没有帮助我们。我想知道是否有办法获取有关此异常的更多信息。我们正在分析我们的模型类和 JPA 注释，以确保一切都正确配置。这目前正在从 jUnit 测试用例运行。在事务中保存对象时是否需要特别注意？我们不想做任何特别的事情。我们正在创建一个父对象以及多个子对象，并尝试将其持久化到数据库中。当我们只是得到一个通用的“无法提交 JPA”错误时，很难调试这个问题。任何帮助深表感谢。

```
org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Transaction rolled back because transaction was set to RollbackOnly.
at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:476)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:374)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy16.createIncident(Unknown Source)
at eg.test.IncidentTests.testCreateIncident(IncidentTests.java:135)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: javax.persistence.RollbackException: Transaction rolled back because transaction was set to RollbackOnly.
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:92)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:467) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:41:32.430

您可以尝试启用 sql 跟踪并观察执行的原始 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:41:37.913

我认为您捕获并忽略了导致某处回滚的异常。检查事务边界内的代码是否存在被忽略的异常。

`setRollbackOnly()`另一种可能性是通过调用on`EntityTransaction`或 on将事务明确标记为仅回滚`TransactionStatus`。

# java - ConcurrentHashMap 中的故障安全迭代器

> ID：12800098
> 
> 赞同：2
> 
> 时间：2012-10-09T12:30:56.210
> 
> 标签：java, collections

两者中的迭代器 `CopyOnWriteArrayList`和`ConcurrentHashMap` 都是故障安全的，不会抛出 CME。

IN`CopyOnWriteArrayList<E>`迭代器建立在原始底层数组的**快照之上。**所以这里的迭代器是**故障安全的**，也是**线程安全的。**

Javadcos 用于`CopyOnWriteArrayList<E>` 明确说明术语**快照**。

> “快照”风格的迭代器方法使用对创建迭代器时数组状态的引用。这个数组在迭代器的生命周期内永远不会改变，所以干扰是不可能的，并且迭代器保证不会抛出 ConcurrentModificationException。

`ConcurrentHashMap`迭代器是否也建立在原始底层地图的**快照上？**

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:32:56.010

不一定 - cf [javadoc（强调我的）](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)：

> 类似地，迭代器和枚举返回反映哈希表**在迭代器/枚举创建时或之后的某个时间点**的状态的元素。

如果您查看`values`,`entrySet`和`keySet`方法：

> 视图的迭代器 [...] 保证遍历构建迭代器时存在的元素，并且可能（但不保证）反映构建后的任何修改。

# windows-7 - 我们可以使用 Windows 7 开发 VB 6.0 应用程序吗？官方支持吗？

> ID：12800100
> 
> 赞同：0
> 
> 时间：2012-10-09T12:31:10.033
> 
> 标签：windows-7, vb6

> **可能重复：**
> [有人在 Windows 7 上使用 Visual Studio 6 取得成功吗？](https://stackoverflow.com/questions/2339536/has-anyone-had-success-with-visual-studio-6-on-windows-7)
> [在 Windows 7 上安装 VB6](https://stackoverflow.com/questions/10495680/installation-of-vb6-on-windows-7)

我们可以在 Windows 中开发 VB6.0 应用程序吗？微软支持吗？如果支持，请提供 Microsoft 的支持协议链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:12:48.527

我将以答案格式重复出色的评论：

**VB6 集成开发环境**

*   您可以在 Windows 7 （甚至[64 位](https://stackoverflow.com/questions/2501061/does-the-vb6-ide-run-on-windows-7-64-bit)） [上使用 VB6 IDE 。](https://stackoverflow.com/questions/2339536/has-anyone-had-success-with-visual-studio-6-on-windows-7)
    *   但是在 Windows 7 或其他任何地方[根本不支持IDE。](http://msdn.microsoft.com/en-us/vstudio/ms788708.aspx)如果您确实遇到 IDE 问题，Microsoft 不会帮助您。

**VB6 运行时**

*   所有当前版本的 Windows 都支持 VB6 运行时，[包括 7 和 8、32 位和 64 位](http://msdn.microsoft.com/en-us/vstudio/ms788708.aspx)。如果您在运行使用 VB6 构建的程序时遇到问题，可以[向 Microsoft 寻求帮助](http://msdn.microsoft.com/en-us/subscriptions/bb266240.aspx)。可能会有费用。

# python - Access数据库连接错误

> ID：12800101
> 
> 赞同：2
> 
> 时间：2012-10-09T12:31:19.863
> 
> 标签：python, sql, database, ms-access, ms-access-2007

我写了一个通过pyodbc连接到Access的程序，非常高兴。请帮帮我。

```
import pyodbc
#import kinterbasdb
import firebirdsql
import os, sys
import json,sqlite3,sql
sys.version_info
s1='''
create table CLIENTS
    (
       ID    INTEGER NOT NULL,
       COMPANY   VARCHAR(50),
       "LAST NAME"   VARCHAR(50),
       "FIRST NAME"   VARCHAR(50),
       "E-MAIL ADDRESS"   VARCHAR(50),
       "JOB TITLE"   VARCHAR(50),
       "BUSINESS PHONE"   VARCHAR(25),
       "HOME PHONE"   VARCHAR(25),
       "MOBILE PHONE"   VARCHAR(25),
       "FAX NUMBER"   VARCHAR(25),
       ADDRESS   BLOB SUB_TYPE 1,
       CITY   VARCHAR(50),
       "STATE/PROVINCE"   VARCHAR(50),
       "ZIP/POSTAL CODE"   VARCHAR(15),
       "COUNTRY/REGION"   VARCHAR(50),
       "WEB-SITE"   VARCHAR(25),
       NOTES   BLOB SUB_TYPE 1,
       INCLUDING   BLOB,
       CONSTRAINT PK_CLIENTS_ID PRIMARY KEY(ID)
    );
'''
s2='''create ascending index IDX_CLIENTS_CITY on CLIENTS (CITY);'''
#os.remove('D:/ThirdTask/test1.fdb')
conn=firebirdsql.create_database(host='localhost', database='/test1.fdb', user='sysdba', password='masterkey')
#con=firebirdsql.connect(host='localhost',database='D:/ThirdTask/test1.fdb', user='sysdba', password='masterkey')
cur=conn.cursor()
cur.execute(s1)
#cur.execute(s2)
conn.commit()
conAcc = pyodbc.connect('DRIVER={Microsoft Access Driver (*.accdb)};DBQ=Northwind.accdb')
conn.close() 
```

结果，我收到了一个令我非常困惑的错误。请帮帮我。我不知道错误的原因是什么

```
Traceback (most recent call last):
  File "D:\ThirdTask\connecttwo.py", line 39, in <module>
    conAcc = pyodbc.connect('DRIVER={Microsoft Access Driver (*.accdb)};DBQ=Northwind.accdb')
Error: ('IM002', '[IM002] [Microsoft][\xc4\xe8\xf1\xef\xe5\xf2\xf7\xe5\xf0 \xe4\xf0\xe0\xe9\xe2\xe5\xf0\xee\xe2 ODBC] \xc8\xf1\xf2\xee\xf7\xed\xe8\xea \xe4\xe0\xed\xed\xfb\xf5 \xed\xe5 \xed\xe0\xe9\xe4\xe5\xed \xe8 \xed\xe5 \xf3\xea\xe0\xe7\xe0\xed \xe4\xf0\xe0\xe9\xe2\xe5\xf0, \xe8\xf1\xef\xee\xeb\xfc\xe7\xf3\xe5\xec\xfb\xe9 \xef\xee \xf3\xec\xee\xeb\xf7\xe0\xed\xe8\xfe (0) (SQLDriverConnect)') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T07:24:08.027

您指定的驱动程序名称...

`DRIVER={Microsoft Access Driver (*.accdb)}`

...是不正确的。没有具有该名称的 ODBC 驱动程序。想要打开旧`.mdb`数据库文件的 32 位应用程序可以使用

`Driver={Microsoft Access Driver (*.mdb)}`

要从`.mdb`64 位应用程序打开`.accdb`文件，或从*任何*应用程序打开文件，您需要使用

`Driver={Microsoft Access Driver (*.mdb, *.accdb)}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:45:59.193

看起来您没有连接到数据库。也许你应该从一个较小的程序开始，只是为了连接。其他问题中的示例：[在 Python ODBC 中使用 Microsoft Access SQL 运算符](https://stackoverflow.com/questions/3956778/using-microsoft-access-sql-operators-in-python-odbc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T21:51:10.270

这可能会有所帮助。

```
import pyodbc

# Connect to your access database file

DBfile = 'Filename.mdb'  # Let your file name <Filename> and access extension .mdb
conn = pyodbc.connect('DRIVER={Microsoft Access Driver (*.mdb)};DBQ='+DBfile)  #    user/password can be used
cur = conn.cursor()

# Create new table in database

cur.execute ('CREATE TABLE CLIENTS (ID INTEGER, COMPANY STRING)')
conn.commit()

cur.close()
conn.close() 
```

# php - facebook登录不成立

> ID：12800102
> 
> 赞同：0
> 
> 时间：2012-10-09T12:31:20.697
> 
> 标签：php, facebook-php-sdk, facebook-login

我终于让我的 facebook 登录工作正常了，所以我可以从用户那里检索信息

```
<?php
    session_start();

    require_once 'facebook.php';

    $facebook = new Facebook(array(
        'appId'  => '19582352346693',
        'secret' => '44c21dde8d502ega23g287a751dea',
        'cookie' => true,
    ));

    $user_id = $facebook->getUser();

?>

<html xmlns:fb="http://www.facebook.com/2008/fbml">

<head>

<title>Picture</title>

</head>

<body>

<?php 

if($user_id) {

  // We have a user ID, so probably a logged in user.
  // If not, we'll get an exception, which we handle below.
  try {
    $test = null;
    $user_profile = $facebook->api('/me','GET');
    //$test = $user_profile['id'];
    echo "id: " . $user_profile['id'];

  } catch(FacebookApiException $e) {
    // If the user is logged out, you can have a 
    // user ID even though the access token is invalid.
    // In this case, we'll get an exception, so we'll
    // just ask the user to login again here.
    $login_url = $facebook->getLoginUrl(); 
    echo 'Please <a href="' . $login_url . '">login.</a>';
    error_log($e->getType());
    error_log($e->getMessage());
  }   
} else {

  // No user, print a link for the user to login
  $login_url = $facebook->getLoginUrl();
  echo 'Please <a href="' . $login_url . '">login.</a>';

}

?>

</div> 

</body>

</html> 
```

所有这些代码都会给我一个登录名，因为我没有登录到 APP（已验证）。当我按下按钮时，我可以看到我的信息，因为我回应了它。

然后当我按下页面上的另一个按钮时：

```
<form action="<?php echo 'single_picture.php?argument=' . $picture_id ?>" method="post">
<input type="submit" name="submit" value="Vote!">
</form> 
```

我再次打开同一页面，但登录按钮再次出现，忘记了我正在登录的所有信息。

我以为 if / else 正在检查我是否正在登录。

我还尝试打印出我的访问令牌

```
$access_token = $facebook->getAccessToken(); 
```

然后我把它放到：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

这表示访问令牌有效期为一小时

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:37:38.443

您需要将从 facebook 获得的访问令牌存储到某个地方。无论是会话、数据库表还是简单的文本文件。在 neyt 请求之前，您设置此令牌 ( `$facebook->setAccessToken($saved_access_token);`)，只要它仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:35:14.770

好吧，首先你的语法太混乱了。我想你忘了使用 session_start

```
<?php session_start() ?> 
```

或检查 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T05:07:27.873

我知道这不是你想要的，你给了我你的问题，我给你一个不同的答案，但请将此作为建议。使用 Facebook 登录时我所做的是创建自己的登录系统，对于 Facebook 用户，我有另一个存储用户 Facebook id 的表，然后我只使用 Facebook API 来检查我的数据库是否该信息有效。如果是，那么我将用户登录。如果不是，那么我将它们发送到错误页面或注册页面。

# powershell - PowerShell 帮助系统

> ID：12800106
> 
> 赞同：2
> 
> 时间：2012-10-09T12:31:24.587
> 
> 标签：powershell

所以在 PoSH 中有两种使用帮助的方法，对于高级功能，你可以使用基于注释的帮助，我的问题是当你使用基于注释的帮助时，它会产生 MAML 吗？至于原生 cmdlet 是帮助 XML 文件 MAML 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:51:17.510

基于注释的帮助由 Get-Help 解释，它不生成 MAML 文件。您可以使用 Cmdlet 帮助编辑器为管理单元或模块创建 MAML 文件。您可以在 CodePlex 上找到它：

[http://cmdlethelpeditor.codeplex.com/](http://cmdlethelpeditor.codeplex.com/)

# wpf - Wpf TreeView IsExpanded

> ID：12800111
> 
> 赞同：0
> 
> 时间：2012-10-09T12:31:31.437
> 
> 标签：wpf, xaml, binding, treeview, model-binding

我尝试使用另一个上下文绑定到 Hierarchical 模板中的 IsExpanded 属性。

```
 <HierarchicalDataTemplate  x:Key="TreeView1"  ItemsSource="{Binding Path=Folders}" >
    <StackPanel Margin="5,5,5,5" Orientation="Horizontal">
        <StackPanel Name="spinCont">
            <ModulesUpToDateChecker1:Spinner Width="20" x:Name="Spin" FolderContext="{Binding}"  StateContext="{Binding Path=State}"></ModulesUpToDateChecker1:Spinner>
            <Image x:Name="imgFolderIcon" Width="16" Visibility="Hidden" 
                               Source="/ModulesUpToDateChecker;component/Resources/FolderClosed16.png">
                <Image.Triggers>

                </Image.Triggers>
            </Image>
            <Image VerticalAlignment="Center" x:Name="imgFolderItem"
                                        Source="{Binding Path=State, Converter={StaticResource stateFolderConverter}}">
                <Image.Style>
                    <Style TargetType="{x:Type Image}">
                        <Style.Triggers>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding Path=IsLast}" Value="true"></Condition>
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Visibility" Value="Collapsed"></Setter>
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>
        </StackPanel>
        <StackPanel DataContext="{Binding Path=Modules}">
            <ModulesUpToDateChecker1:Spinner Width="20">
                <ModulesUpToDateChecker1:Spinner.Style>
                    <Style TargetType="{x:Type ModulesUpToDateChecker1:Spinner}">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=Animation}" Value="True" >
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ModulesUpToDateChecker1:Spinner.Style>
            </ModulesUpToDateChecker1:Spinner>
            <Image VerticalAlignment="Center"
                                        Source="{Binding Path=State, Converter={StaticResource stateImageConverter}}">
                <Image.Style>
                    <Style TargetType="{x:Type Image}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=Animation}" Value="True" >
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>
        </StackPanel>
        <TextBlock Text="{Binding Path=Name}" Margin="10,0,0,0"></TextBlock>
    </StackPanel>

    <HierarchicalDataTemplate.Triggers>
        <!--<Trigger Property="{Binding}" Value="true">
            <Setter TargetName="imgFolderIcon" Property="Source" Value="/ModulesUpToDateChecker;component/Resources/Error.png" />
        </Trigger>-->
        **<DataTrigger  Binding="{Binding Path=IsExpanded}" Value="true">
            <Setter TargetName="imgFolderIcon" Property="Source" Value="/ModulesUpToDateChecker;component/Resources/Error.png" />
        </DataTrigger>** 
```

> 不工作

```
 </HierarchicalDataTemplate.Triggers>
</HierarchicalDataTemplate> 
```

我有“文件夹”上下文（它的分层对象），但是如何绑定到 HierarchicalDataTemplate.Triggers 中的 TreeView 属性？当我启动它时，输出显示 Folder 对象中没有 IsExpanded 属性。所以，我有错误的上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:07:35.400

```
 <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=TreeViewItem}, Path=IsExpanded}" Value="true">
            <Setter  TargetName="imgFolderIcon"  Property="Source" Value="/Resources/FolderExpanded.png" />
        </DataTrigger> 
```

简单的

# jquery - Jquery 显示选定的元素

> ID：12800114
> 
> 赞同：0
> 
> 时间：2012-10-09T12:31:35.757
> 
> 标签：jquery, underscore.js

我使用**underscore.js**设计了一个模板，它遍历一个*分页*变量并显示相应数量的链接。代码是：

```
<% var paginate= 10 %>

<table>
    <tr>
        <td><a href="">&lt;</a></td>
        <% for(var i=0; i < paginate; i++){ %>

            <td>
                <a class="someclass" href="<%= i%>"><%= i%></a>
            </td>

        <% }%>
        <td><a href="">&gt;</a></td>
    </tr>
</table> 
```

调用后我得到了这个结果：

![在此处输入图像描述](../Images/b6e69cee9c7fb7b728700593a2dd24e3.png)

我想以**5 的块显示链接**。像“<0 1 2 3 4>”或“<4 5 6 7 8 9>”。

如何使用 jQuery 只显示 5 个并隐藏其余部分？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:09:06.870

看看这个[解决方案](http://jsfiddle.net/z5sUB/2/)。这是一个演示解决方案，您可以对其进行改进以满足您的要求。

```
var slide  = 0;
$('.page:gt(4)').hide();
$('.prev').hide();
if(len < 5) {
    $('.next').hide();
}

$('.prev a').on('click', function(e){
    e.preventDefault();

    slide--;
    var heigher= slide * 5 + 5;
    var lower = slide * 5;

    $('.page:gt(' + (heigher-1) + ')').hide();
    $('.page:lt(' + (heigher) + '):gt(' + (lower) + ')').show();
    $('.page:eq(' + (lower) + ')').show();

    if(slide == 0){
        $('.prev').hide();
    }
    if(len > 5){
        $('.next').show();
    }
});

$('.next a').on('click', function(e){
    e.preventDefault();

    var lower = slide * 5 + 5;
    slide++;
    var heigher = slide * 5 + 5;

    $('.page:lt(' + lower + ')').hide();
    $('.page:lt(' + (heigher) + '):gt(' + (lower-1) + ')').show();

    if(heigher >= len){
        $('.next').hide();
    }
    $('.prev').show();
}); 
```

我在[这里](http://jsfiddle.net/arunpjohny/z5sUB/4/)有一个更新解决方案，我相信它有一个更好的 jQuery 代码。

# django - Django 模型对象过滤器 - 多个关键字

> ID：12800115
> 
> 赞同：1
> 
> 时间：2012-10-09T12:31:37.390
> 
> 标签：django, django-models

你能像这样过滤模型对象吗？

Foo.objects.filter(name="这，那，那些")

因此过滤所有具有这些名称的对象；它将返回名称为 This、that 和 those 的所有对象。

如果我知道它只能说 3 个关键字，那么使用 OR 或 AND 将很容易。但就我而言，可能有 1 个或更多关键字

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T12:32:19.290

```
Foo.objects.filter(name__in=["This", "That", "Those"]) 
```

# c++ - 哪个 IDE 用于 Windows 8 上的 C++ 开发？

> ID：12800117
> 
> 赞同：2
> 
> 时间：2012-10-09T12:31:41.273
> 
> 标签：c++, windows, eclipse, visual-studio, ide

我在 Windows 8 上遇到了 Dev-C++ 和 CodeBlocks 的问题。实际上，我遇到了 g++ 的问题。那么，我应该使用哪个 IDE 在 Windows 8 上进行 C++ 开发？（64 位）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:33:18.820

[Visual Studio](http://msdn.microsoft.com/en-us/library/60k1461a.aspx)是用于 C++ 的最佳 IDE。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T12:34:08.880

您可以使用[Eclipse](http://www.eclipse.org/cdt/)。

或者它的更轻的版本：[Netbeans](http://netbeans.org/features/cpp/)。

对于 MFC 编程，请使用[Visual Studio](http://www.microsoft.com/visualstudio/)。

请注意，MFC 仅适用于 Windows，因此如果您想开发完全兼容的应用程序：不要使用它，而是使用 GTK。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T12:35:34.987

如果您想编写将与 Windows Store 一起分发的 win 8 应用程序（即 WinRT 应用程序），您只能使用 Visual Studio 来完成。如果您想编写常规的旧式原生应用程序，您可以使用您选择的任何 IDE，CodeBlocks、Eclipse、Visual Studio 或任何其他您喜欢的东西。

编辑：说实话，考虑到我不是那么大的开发经验（3 年），Visual Studio 是 Windows 下最稳定、可靠和灵活的 IDE。但它是有代价的，即它不像 Eclipse 之类的开源软件，并且您需要购买许可证才能将其用于商业目的（对于非 Express 版本）。

# xcode - Objective C Secure.h RSA 密钥对生成

> ID：12800119
> 
> 赞同：0
> 
> 时间：2012-10-09T12:31:52.477
> 
> 标签：xcode, macos, security, rsa, key-pair

[我试图通过示例代码询问有关此主题](https://stackoverflow.com/questions/10222524/rsa-implementations-in-objective-c)的后续问题，该示例代码说明了如何生成对我不起作用的 rsa 密钥，但由于某种原因它被版主删除了。因此，我将尝试再次发布一个新问题。

我对这个答案的问题是 Xcode 告诉我没有声明“kSecPrivateKeyAttrs”和“kSecPublicKeyAttrs”标识符。苹果开发者文档中提到了这些标识符，但它们似乎不存在于 Secure 框架中。

我正在使用 Xcode 4.5 和 OS X SDK 10.8。

感谢我能得到的任何帮助，我是一个相当新的 att OC 编程。如果我让它工作，我还想知道如何将 pubkey 和 privkey 作为 NSString 或 NSData。

谢谢

编辑：我仍然有这个问题，肯定还有其他人有同样的问题已经解决了它并且可以指出我正确的方向？

EDIT2 正如我所说，我正在尝试我发布的链接中的代码，但无论如何这里是完整的代码：

密钥对.h

```
#import <Security/Security.h>

@interface Keypair
{
    SecKeyRef publicKey;
    SecKeyRef privateKey;
    NSData *publicTag;
    NSData *privateTag;
 }
 - (void)generateKeyPair:(NSUInteger)keySize;
 @end 
```

密钥对.m

```
#import "Keypair.h"

@implementation Keypair

static const UInt8 publicKeyIdentifier[] = "com.XXXXXXX.publickey\0";
static const UInt8 privateKeyIdentifier[] = "com.XXXXXXX.privatekey\0";

+ (void)generateKeyPair:(NSUInteger)keySize {
    OSStatus sanityCheck = noErr;
    SecKeyRef publicKey = NULL;
    SecKeyRef privateKey = NULL;
    NSData *publicTag;
    NSData *privateTag;

    // Container dictionaries.
    NSMutableDictionary * privateKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary * publicKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary * keyPairAttr = [[NSMutableDictionary alloc] init];

    // Set top level dictionary for the keypair.
    [keyPairAttr setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [keyPairAttr setObject:[NSNumber numberWithUnsignedInteger:keySize] forKey:(__bridge id)kSecAttrKeySizeInBits];
    [keyPairAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];

    // Set the private key dictionary.
    [privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [privateKeyAttr setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
    // See SecKey.h to set other flag values.

    // Set the public key dictionary.
    [publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [publicKeyAttr setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
    // See SecKey.h to set other flag values.

    // Set attributes to top level dictionary.
    [keyPairAttr setObject:privateKeyAttr forKey:(id)kSecPrivateKeyAttrs];
    [keyPairAttr setObject:publicKeyAttr forKey:(id)kSecPublicKeyAttrs];

    // SecKeyGeneratePair returns the SecKeyRefs just for educational purposes.
    sanityCheck = SecKeyGeneratePair((__bridge CFDictionaryRef)keyPairAttr, &publicKey, &privateKey);
    if(sanityCheck == noErr  && publicKey != NULL && privateKey != NULL)
    {
        NSLog(@"Successful");
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T13:27:02.217

之后你能找回钥匙吗？我拿不回钥匙。就好像它们不在钥匙链中一样。调用 SecItemCopyMatching 返回错误，指出未找到密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T21:33:45.913

有点晚了，但由于我目前正在处理一个相关问题，所以我想我有所了解。

对于 iOS，您为私钥和公钥指定单独的字典，它们的属性可以不同。但是对于 Mac，您可以将所有属性直接放在一个字典中，并将它们应用于两个键。

# python - cython memoryview 比预期慢

> ID：12800121
> 
> 赞同：4
> 
> 时间：2012-10-09T12:31:59.427
> 
> 标签：python, numpy, cython, memoryview

我已经开始在 cython 中使用 memoryviews 来访问 numpy 数组。它们具有的各种优势之一是它们比旧的 numpy 缓冲区支持快得多： http: [//docs.cython.org/src/userguide/memoryviews.html#comparison-to-the-old-buffer-support](http://docs.cython.org/src/userguide/memoryviews.html#comparison-to-the-old-buffer-support)

但是，我有一个例子，旧的 numpy 缓冲区支持比 memoryviews 更快！怎么会这样？！我想知道我是否正确使用了内存视图？

这是我的测试：

```
import numpy as np
cimport numpy as np
cimport cython

@cython.boundscheck(False)
@cython.wraparound(False)
cpdef np.ndarray[np.uint8_t, ndim=2] image_box1(np.ndarray[np.uint8_t, ndim=2] im, 
                                               np.ndarray[np.float64_t, ndim=1] pd,  
                                               int box_half_size):
    cdef unsigned int p0 = <int>(pd[0] + 0.5)  
    cdef unsigned int p1 = <int>(pd[1] + 0.5)    
    cdef unsigned int top = p1 - box_half_size
    cdef unsigned int left = p0 - box_half_size
    cdef unsigned int bottom = p1 + box_half_size
    cdef unsigned int right = p0 + box_half_size    
    cdef np.ndarray[np.uint8_t, ndim=2] box = im[top:bottom, left:right] 
    return box 

@cython.boundscheck(False)
@cython.wraparound(False)
cpdef np.uint8_t[:, ::1] image_box2(np.uint8_t[:, ::1] im, 
                                    np.float64_t[:] pd,  
                                    int box_half_size):

    cdef unsigned int p0 = <int>(pd[0] + 0.5)  
    cdef unsigned int p1 = <int>(pd[1] + 0.5)    
    cdef unsigned int top = p1 - box_half_size
    cdef unsigned int left = p0 - box_half_size
    cdef unsigned int bottom = p1 + box_half_size
    cdef unsigned int right = p0 + box_half_size     
    cdef np.uint8_t[:, ::1] box = im[top:bottom, left:right]   
    return box 
```

计时结果如下：

image_box1：键入 numpy：100000 个循环，最好的 3 个：每个循环 11.2 us

image_box2：memoryview：100000 个循环，最好的 3 个：每个循环 18.1 us

这些测量是从 IPython 使用 %timeit image_box1(im, pd, box_half_size) 完成的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:22:05.153

好吧！我发现了问题。正如 seberg 指出的那样，内存视图看起来更慢，因为测量包括从 numpy 数组到内存视图的自动转换。

我使用以下函数从 cython 模块中测量时间：

```
def test(params):   
    import timeit
    im = params[0]
    pd = params[1]
    box_half_size = params[2]
    t1 = timeit.Timer(lambda: image_box1(im, pd, box_half_size))
    print 'image_box1: typed numpy:'
    print min(t1.repeat(3, 10))
    cdef np.uint8_t[:, ::1] im2 = im
    cdef np.float64_t[:] pd2 = pd
    t2 = timeit.Timer(lambda: image_box2(im2, pd2, box_half_size))
    print 'image_box2: memoryview:'
    print min(t2.repeat(3, 10)) 
```

结果：

image_box1：键入 numpy：9.07607864065e-05

image_box2：内存视图：5.81799904467e-05

所以内存视图确实更快！

请注意，我在调用 image_box2 之前将 im 和 pd 转换为 memoryviews。如果我不做这一步直接传im和pd，那么image_box2比较慢：

image_box1：键入 numpy：9.12262257771e-05

image_box2：内存视图：0.000185245087778

# android - 没有 QuickAction 的 Android EditText

> ID：12800122
> 
> 赞同：2
> 
> 时间：2012-10-09T12:32:02.710
> 
> 标签：android, android-edittext

我的问题是，当我在 EditText（4.0.3 版）中选择一些文本时，所选文本附近会出现一个 QuickAction（显示剪切、复制、粘贴等多个选项）。我不需要这个弹出窗口，所以我怎样才能关闭它或类似的东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:48:44.947

```
 edittext.setCustomSelectionActionModeCallback(new Callback() {      
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                 return false;             }            
  public void onDestroyActionMode(ActionMode mode) {                               }           
   public boolean onCreateActionMode(ActionMode mode, Menu menu) {                 return false;             }              public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                 return false;             }         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:58:11.453

您可以像这样为您的 editText 添加回调：

```
YOUR_EDITTEXT_OBJECT.setCustomSelectionActionModeCallback(new Callback() {

            public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
                return false;
            }

            public void onDestroyActionMode(ActionMode mode) {                  
            }

            public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                return false;
            }

            public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
                return false;
            }
        }); 
```

# ef-code-first - 使用实体框架的 MVC4 成员连接

> ID：12800123
> 
> 赞同：1
> 
> 时间：2012-10-09T12:32:03.143
> 
> 标签：ef-code-first, asp.net-membership, asp.net-mvc-4

我使用实体框架创建了一个 DbContext 连接，并在我的 web.config 文件中有“DbContext”连接字符串。

然后，我尝试登录，我的网站要求我有另一个“defaultConnection”字符串来创建用户表。

在这种情况下，我需要有两个连接吗？或者我应该通过某种方式将两者结合起来建立一个连接？

哪个性能更好？我开始使用 Internet 应用程序模板构建我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:30:49.100

默认情况下，对于成员资格和角色，ASP.net 基础结构使用默认成员资格和角色提供程序，将成员资格和角色数据存储在不同的数据库中。运行您的应用程序，如果您从登录页面注册用户，您可以在创建的“App_Data”文件夹位置看到数据库。数据库不同，因此连接字符串不同。您正在使用实体框架，因此有两种方法可以从这里开始。

1) 更改连接字符串并使用相同的默认 asp.net 成员资格和角色提供程序将数据存储在您的实体框架配置正在使用的数据库中。我的意思是默认成员资格和角色提供程序使用您 EF 配置指向的数据库。

2）使用EF管理成员和角色数据。因此，用户和组将是由`DBcontext`其他实体管理的实体。

我最近实施了第二种方法。ASP.net 成员提供挂钩（可扩展性）来实现您自己的提供程序并将它们注册到 web.config 文件中。然后创建 User 和 Role 实体并将它们包含在`DBContext`. 当然，在注册提供者之前，您需要首先通过派生类`MembershipProvider`和`RoleProvider`抽象类来实现它们。这些类位于“System.Web.Security”命名空间中。

您可以关注此项目以获取更多详细信息[http://codefirstmembership.codeplex.com/](http://codefirstmembership.codeplex.com/)

我相信与单独数据库的连接不会对性能产生任何影响。与在 Web 模型中一样，即使您对传入请求使用相同的数据库，我们也必须单独连接到数据库，并且传入请求可以并发。事实上，保持数据库独立将把数据库加载到另一台服务器上。但是现在您有 2 台服务器需要备份和维护。这将是不可维护的，除非您出于某些原因希望您的会员数据是分开的，例如它也被其他应用程序共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:49:09.547

我建议将两者结合起来，因为在某些时候，您可能需要从各种表到用户表的外键。

我会在 web.config 中有一个连接，“DefaultConnection”。

然后当你初始化你的时`DbContext`，使用`DbContext(string)`重载来使用 DefaultConnection，像这样：`var context = new YourDbContext("DefaultConnection");`

这样，您的数据和用户/角色表就可以幸福地生活在一起。

# c# - 使用带有工厂实例方法的 Microsoft Fakes

> ID：12800138
> 
> 赞同：0
> 
> 时间：2012-10-09T12:32:58.840
> 
> 标签：c#, testing, factory, shim, microsoft-fakes

我有一个看起来像这样的类：

```
public class MyClass
{
    int myNum;

    private MyClass() {}

    public static MyClass CreateInstance()
    {
        MyClass a = new MyClass();
        a.myNum=5;
        return a;
    }

    public bool IsBigger(MyClass b)
    {
        return this.myNum > b.myNum;
    } 
```

}

然后，我想制作一个垫片并想使用 IsBigger 方法，但默认情况下它返回 false。在这种情况下如何调用基本方法？

测试是这样的：

```
[TestMethod]
Public void test()
{
 ShimMyClass firstShim = new ShimMyClass();
 firstShim.myNumGet = () => { return 6; }

 ShimMyClass secondShim = new ShimMyClass();
 secondShim.myNumGet = () => { return 7; }

 Assert.IsTrue(secondShim.Instance.IsBiggerThan(firstShim.Instance);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:35:27.493

将 MyNum 设为属性：

```
public class MyClass
{
    public int MyNum { get; private set; }

    private MyClass() {}

    public static MyClass CreateInstance()
    {
        MyClass a = new MyClass();
        a.MyNum=5;
        return a;
    }

    public bool IsBigger(MyClass b)
    {
        return this.MyNum > b.MyNum;
    }

} 
```

在使用 ShimMyClass 之前创建 Shim 上下文：

```
using (ShimsContext.Create())
{ 
    ShimMyClass firstShim = new ShimMyClass();
     firstShim.MyNumGet = () => { return 6; }

     ShimMyClass secondShim = new ShimMyClass();
     secondShim.MyNumGet = () => { return 7; }

     Assert.IsTrue(secondShim.IsBiggerThan(firstShim);
} 
```

[MSDN 上的微软假货](http://msdn.microsoft.com/en-us/library/hh549175.aspx)

# spring - Grails 安全插件：在哪里存储额外的用户数据？

> ID：12800141
> 
> 赞同：0
> 
> 时间：2012-10-09T12:33:04.933
> 
> 标签：spring, security, grails

我想在我的应用程序中使用 Grails Spring Security 插件。它创建一个代表用户的域类。我在互联网上的研究表明，将所有数据放在这个类中是不好的，因为它一直在加载。

我对此的简单解决方案是将数据打包到一个附加类中，然后将其关联到安全用户类中。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:21:25.210

是的，这是一个很好的方法。我经常使用 Profile 类来附加额外的用户配置文件数据。我还直接向 User 类添加了其他属性。这可能取决于您在谈论多少额外的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:08:50.057

它不是“一直加载”，而是在您进行身份验证时加载。用户名、密码和角色名称用于构建`Authentication`存储在 HTTP 会话中的实例。这是检查您是否具有各种 URL 的访问权限。

但正如@Gregg 所描述的，将数据划分为与安全相关的用户类和关联的配置文件类是有意义的。

您可以使用自定义`userDetailsService`实现来缓存 User 类中的数据，`Authentication`以避免重复从数据库中加载整个内容；见[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsS​​ervice.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)

# java - 如何在 CertPath 验证中使用 OCSP 响应

> ID：12800148
> 
> 赞同：0
> 
> 时间：2012-10-09T12:33:31.197
> 
> 标签：java, cryptography, bouncycastle, pki, ocsp

我*不*希望 Java 验证器联系 OCSP 响应者。

我正在研究 XAdES 库，因此我需要使用有人保存在 XML 文档中的 OCSP 响应来验证签名在过去某个时间是否有效。这使得有必要以提供 CRL 的相同方式提供 OCSP 响应，`CertPathBuilder`并使其在过去的某个时间使用它们来验证证书。

Oracle 文档仅描述了如何使验证器联系[OCSP 响应者](http://docs.oracle.com/javase/6/docs/technotes/guides/security/certpath/CertPathProgGuide.html#AppC)，它没有描述如何使用 OCSP 响应进行验证。

是否可以使用 Java PKI API 或 Bouncy Caste Lightweight API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:37:44.360

在同一个链接中是[PKIXCertPathChecker](http://download.java.net/jdk8/docs/technotes/guides/security/certpath/CertPathProgGuide.html#PKIXCertPathChecker)部分，您可以实现它来执行 OCSP 检查。我查看了实现此合约的[OCSPChecker](http://www.docjar.com/html/api/sun/security/provider/certpath/OCSPChecker.java.html)类和底层实现类的[OCSP的代码。](http://www.docjar.com/html/api/sun/security/provider/certpath/OCSP.java.html)`OCSPChecker`似乎创建了一个实例，该实例由实现类`URI`转换为。不幸的是，它随后被直接用作 HTTP 连接的输入，因此如果您使用直接路由，您似乎会被 HTTP 卡住。`URL``OCSP`

现在这两个类当然都是 GPL 的，所以你可以简单地抓住它们并创建一个不同的实现，只要你遵守它附带的 GPL 许可证。否则你似乎别无选择，只能实施`PKIXCertPathChecker`自己......

# javascript - 在渲染器中捕获特定网格上的点击事件

> ID：12800150
> 
> 赞同：12
> 
> 时间：2012-10-09T12:33:39.147
> 
> 标签：javascript, three.js

我设置了一个包含两个网格（立方体）的画布渲染器。我需要做的是*`catch the click event on each cube`*为它调用方便的方法。

到目前为止，我可以在所有渲染器上捕获点击事件，这意味着当我点击 cube1 和 cube2 时，点击属于相同的，因为它绑定到`renderer`:)

我的问题是，如何在每个立方体上绑定点击事件？

我的相关代码如下：

```
 //dom
    var containerPopUp=document.getElementById('popup');
    //renderer
    var rendererPopUp = new THREE.CanvasRenderer();
    rendererPopUp.setSize(420,200);

    containerPopUp.appendChild(rendererPopUp.domElement);
    //Scene
    var scenePopUp = new THREE.Scene();
    //Camera
    var cameraPopUp = new THREE.PerspectiveCamera(50,60/60,1,1000);

    cameraPopUp.position.z = 220;
    cameraPopUp.position.y =  20;
    //
    scenePopUp.add(cameraPopUp);

    //Add texture for the cube
    //Use image as texture
    var img2D = new THREE.MeshBasicMaterial({ //CHANGED to MeshBasicMaterial
    map:THREE.ImageUtils.loadTexture('img/2d.png') 
    });
    img2D.map.needsUpdate = true; //ADDED
    //Add Cube
    var cubeFor2D = new THREE.Mesh(new THREE.CubeGeometry(40,80,40),img2D);
    cubeFor2D.position.x =- 60;
    cubeFor2D.position.y = 20;

    scenePopUp.add(cubeFor2D);
    //
    var img3D = new THREE.MeshBasicMaterial({ //CHANGED to MeshBasicMaterial
    map:THREE.ImageUtils.loadTexture('img/3d.png') 
    });
    img3D.map.needsUpdate = true;
    var cubeFor3D = new THREE.Mesh(new THREE.CubeGeometry(40,80,40),img3D);
    cubeFor3D.position.x = 60;
    cubeFor3D.position.y=20;

    scenePopUp.add(cubeFor3D);
    //
    rendererPopUp.render(scenePopUp,cameraPopUp);
    //
    animate();

    rendererPopUp.domElement.addEventListener('click',testCall,false);//Here the click event is bound on the whole renderer, means what ever object in the renderer is clicked, the testCall method is called. 
```

如您所见，cubeFor2D 和 cubeFor3D 包含在渲染器中。我需要在每个网格上绑定点击事件。我试过这个`threex.domevent.js`：

```
var meshes  = {};
        meshes['mesh1'] = cubeFor2D;
        meshes['mesh1'].on('mouseover', function(event){

              //response to click...
              console.log('you have clicked on cube 2D');

        }); 
```

但它不起作用，在控制台中，我收到了这个错误：

```
TypeError: meshes.mesh1.on is not a function 
```

当然，我包含了 API 源代码文件：

```
 <script src="threex.domevent.js"></script> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-09T21:53:57.593

您可以像这样生成回调。首先为每个对象定义你的回调函数：

```
mesh.callback = function() { console.log( this.name ); } 
```

然后遵循标准的拣货模式：

```
var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2();

function onDocumentMouseDown( event ) {

    event.preventDefault();

    mouse.x = ( event.clientX / renderer.domElement.clientWidth ) * 2 - 1;
    mouse.y = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;

    raycaster.setFromCamera( mouse, camera );

    var intersects = raycaster.intersectObjects( objects ); 

    if ( intersects.length > 0 ) {

        intersects[0].object.callback();

    }

} 
```

编辑：更新到three.js r.70

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T16:58:48.600

1.  创建点击处理程序

    ```
    window.addEventListener('click', onDocumentMouseDown, false); 
    ```

2.  定义onDocumentMouseDown函数，注意上面答案中raycaster的区别是点击对象的索引位置！

    ```
    var raycaster = new THREE.Raycaster();
    var mouse = new THREE.Vector2();
    function onDocumentMouseDown( event ) {
    event.preventDefault();
    mouse.x = ( event.clientX / renderer.domElement.clientWidth ) * 2 - 1;
    mouse.y = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;
    raycaster.setFromCamera( mouse, camera );
    console.log(scene.children);
    var intersects = raycaster.intersectObjects( scene.children );
    console.log(intersects[1]);
    if ( intersects.length > 0 ) {
        intersects[1].object.callback();
    }} 
    ```

3.  定义网格对象

    ```
    var mesh_menu_title = new THREE.Mesh(geometry_menu, materials_menu);
    mesh_menu_title.name = 'select_lang';
    mesh_menu_title.callback = function() { select_language();}
    scene.add(mesh_menu_title); 
    ```

4.  定义回调函数

    ```
    function select_language(){
    var selectedObject = scene.getObjectByName("select_lang"); 
    scene.remove( selectedObject );
    var selectedObject = scene.getObjectByName("start");
    scene.remove( selectedObject );
    var selectedObject = scene.getObjectByName("menu");
    scene.remove( selectedObject );
    } 
    ```

因此，上面的代码将处理在我的画布中单击的特定对象，然后回调一个函数，“mesh.callback”，它将从画布中删除一些场景子对象。

如果您使用 intersects[0].object.callback(); 则不起作用 因为在索引 0 处，存储的对象是顶点。

# mysql - 在mysql过程中的临时表中插入值

> ID：12800152
> 
> 赞同：1
> 
> 时间：2012-10-09T12:33:43.163
> 
> 标签：mysql, stored-procedures, prepared-statement, procedure

我有一个如下的程序

```
DROP PROCEDURE IF EXISTS mp_search_result;
CREATE PROCEDURE mp_search_result()                                                   
BEGIN
      CREATE TEMPORARY TABLE temp_projids(projid int);

       SET @strSearchSQL = 'SELECT DISTINCT project_id
                             FROM tblProjects'; 

      PREPARE stmt FROM @strSearchSQL;
      INSERT INTO temp_projids(projid) values ();
      EXECUTE stmt;
      DEALLOCATE PREPARE stmt;       

END; 
```

现在我想将上述查询返回的项目 ID 插入到临时表中。

我对在执行之前在哪里编写插入查询感到困惑。

请注意，我的要求与我上面发布的查询不同。

我使用许多 if 条件和连接来形成`@strSearchSQL`.

我删除了那些以防止代码的复杂性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:42:22.643

```
DROP PROCEDURE IF EXISTS mp_search_result;
CREATE PROCEDURE mp_search_result()                                                   
BEGIN
      CREATE TEMPORARY TABLE temp_projids(projid int);

       SET @strSearchSQL = 'INSERT INTO temp_projids(projid)  SELECT DISTINCT project_id
                             FROM tblProjects'; 

      PREPARE stmt FROM @strSearchSQL;
      EXECUTE stmt;
      DEALLOCATE PREPARE stmt;       

END; 
```

# database - 如何使用 Scala 从存储过程中检索多行？

> ID：12800156
> 
> 赞同：1
> 
> 时间：2012-10-09T12:33:59.063
> 
> 标签：database, scala, stored-procedures, squeryl

假设您有一个返回多行的存储过程或函数，如[如何从存储过程返回多行？（甲骨文 PL/SQL）](https://stackoverflow.com/questions/101033/how-to-return-multiple-rows-from-the-stored-procedure-oracle-pl-sql)

什么是使用 Scala 来“从表中选择 * (all_emps);”的好方法？（取自上面的 URL）并读取结果的多行数据？

据我所知，使用 Squeryl 是不可能做到这一点的。我可以使用像 Squeryl 这样的可扩展工具，还是必须使用 JDBC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:50:20.700

返回表的函数是 Oracle 特有的功能，我怀疑 ORM（无论是 Scala 还是 Java）是否支持这种专有扩展。所以我认为你或多或少是靠自己的:)。可能最简单的方法是使用普通的 JDBC java.sql.Statement 并使用 executeQuery 方法执行“select * from table (all_emps)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:35:15.393

为了解决您的问题的第二部分，即以更 scala-esque 的方式从表中进行选择的方法，我正在使用[Slick](http://slick.typesafe.com/)。引用他们的示例文档：

```
case class Coffee(name: String, supID: Int, price: Double)

implicit val getCoffeeResult = GetResult(r => Coffee(r.<<, r.<<, r.<<))

Database.forURL("...") withSession {
Seq(
Coffee("Colombian", 101, 7.99),
Coffee("Colombian_Decaf", 101, 8.99),
Coffee("French_Roast_Decaf", 49, 9.99)
).foreach(c => sqlu"""
insert into coffees values (${c.name}, ${c.supID}, ${c.price})
""").execute)

val sup = 101
val q = sql"select * from coffees where sup_id = $sup".as[Coffee]
// A bind variable to prevent SQL injection ^
q.foreach(println)
} 
```

虽然我不确定它是如何处理（如果有的话）存储的过程/函数的。

# android - 如何在对话框上应用动画？

> ID：12800163
> 
> 赞同：0
> 
> 时间：2012-10-09T12:34:25.710
> 
> 标签：android, android-animation

我有一个在单击按钮时打开的对话框。我想在对话框上放置动画，就像它从上到下等一样。我应用了 overridePendingTransition 但它不起作用。提前致谢...

# facebook - 尝试阅读 Facebook 主页消息时出现 OAuthErrors

> ID：12800164
> 
> 赞同：2
> 
> 时间：2012-10-09T12:34:30.670
> 
> 标签：facebook, facebook-graph-api, facebook-graph-api-v2.0

我正在尝试阅读 Facebook 页面的收件箱和发件箱。我的第一种方法是尝试直接访问`page`节点的收件箱。下面的 URI 指示我如何尝试获取它：

`/{page-id}/inbox`

这是错误消息：

> 您只能访问当前用户的“收件箱”连接。

然后我尝试按照某些地方的建议访问`conversations`和`threads`边缘，例如：

`/{page-id}/conversations`

`/{page-id}/threads`

两个 URI 都会产生以下错误：

> (#298) 你必须是应用程序的开发者

我完全不知道出了什么问题？Facebook 收到了一些与“#(298)”相关的错误报告，这些错误是几个月前报告的，但我不敢相信它到目前为止还没有得到修复。

欢迎任何替代方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-09T17:36:12.120

如果您使用用户访问令牌而不是页面访问令牌，则会出现此问题。

我在[Facebook Graph API Explorer](https://developers.facebook.com/tools/explorer)中执行此操作，我以为我正在使用页面访问令牌，但我没有。当我`{page-id}/conversations?access_token={page_access_token}`从 API Explorer 运行时，它在顶部`{user_access_token}`的*Access Token字段中。*这是在资源管理器发送的实际请求中发送的（如 Chrome 的开发工具中所示）。即，API Explorer 忽略了`{page_access_token}`我输入的内容，并使用了*Access Token*字段中的值。

清除*访问令牌*字段或`{page_access_token}`在该字段中输入会导致`{page_access_token}`发送预期的内容。在浏览器和 API Explorer 中执行一些步骤向我展示了方法。

这些是解决问题的步骤：

1.  ***通过单击 API Explorer 中的获取访问令牌*并选择指定的权限或访问下面的 URL，**获取用户访问令牌：**具有[`manage_pages`](https://developers.facebook.com/docs/graph-api/reference/v2.0/user/accounts#readperms)和[`read_page_mailboxes`](https://developers.facebook.com/docs/graph-api/reference/v2.0/page/conversations#readperms)权限* 。**

     ***```
    https://www.facebook.com/dialog/oauth?client_id={app-id}&redirect_uri={redirect-uri}&request_type=token&scope=manage_pages,read_page_mailboxes 
    ```*** 
****   **获取页面访问令牌：**通过`/me/accounts`从 API Explorer 运行或访问下面的 URL。

    ```
    https://graph.facebook.com/v2.0/me/accounts?method=GET&format=json&suppress_http_code=1&access_token={user-access-token} 
    ```

    *   **获取对话：**使用上述步骤中的页面访问令牌（如果使用 API Explorer，请将其粘贴到*访问令牌*`/{page-id}/conversations`字段中）通过运行或访问下面的 URL来获取对话** 。

    ```
    https://graph.facebook.com/v2.0/{page-id}/conversations?method=GET&format=json&suppress_http_code=1&access_token={page-access-token} 
    ```*** 

 ****`read_mailbox`不需要许可，这与我在上面的评论中所说的相反。实际上，错误消息是不正确的，尝试使用用户访问令牌不正确地访问页面边缘会导致用户访问错误，而不是无效的页面访问令牌错误。

** 用户必须是 Facebook 页面的管理员才能访问其对话。***

# grails - Grails 集成测试中的一对多关联数据绑定问题

> ID：12800166
> 
> 赞同：0
> 
> 时间：2012-10-09T12:34:41.327
> 
> 标签：grails, data-binding, integration-testing

我正在尝试创建一个集成测试，并且在关联绑定中遇到问题。

我正在尝试在控制器中测试保存方法。

我有域类事件

```
class Event {
...
..
.
Organizer organizer
} 
```

在控制器保存方法中，我有

```
def save() {
...
..
.
def passedOrganizerId = params.organizer.id  // (1)
//Some comprobations

// if comprobations pass
def event = new Event(params) // (2)
.
} 
```

该方法似乎工作正常，但我想创建一个集成测试。

```
class EventControllerTests  extends GroovyTestCase {
    void testSave() {          
        def params = [:]
        // Params setup (3)
        controller.params.putAll(params)
        controller.save()
        ...
        ..
        .
    }

} 
```

我尝试了几种方法来进行参数设置，但都失败了。

如果在测试方法行（3）我输入：`params.organizer.id = 3` 它失败，因为组织者为空

如果我输入 `params['organizer.id'] = 3`，那么它在第 (1) 行失败

如果我输入

```
params.organizer = [:]
params.organizer.id = 3 
```

它不会失败，但数据绑定不起作用。也就是说 event.organizer 在第 (2) 行之后为空

如何使数据绑定在测试方法中起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:26:11.427

您可以在测试中设置参数如下：

```
...
controller.params.organizer = Organizer.get(3)
controller.save()
... 
```

即直接使用域对象作为控制器参数

# php - 我可以在外部 URL 上使用 PHP opendir() 吗？

> ID：12800168
> 
> 赞同：2
> 
> 时间：2012-10-09T12:34:45.347
> 
> 标签：php, rackspace, opendir, akamai

> **可能重复：**
> [PHP - 另一台服务器上的 opendir](https://stackoverflow.com/questions/5292984/php-opendir-on-another-server)

像这样的东西：

`opendir(http://super.cdn.com/running_order_image/sale/587/)`

`opendir`用于检查 Rackspace Cloud Files Akamai 存储桶的内容。

我正在循环这样的结构

```
587/
587/587_rubyred
587/587_rubyred/front.jpg
587/587_rubyred/back.jpg 
```

我正在尝试退回`587_rubyred`零件。基本上，我的 MySQL 查询循环遍历 587 和 834 以及其他数字，然后我检查目录中的这些数字并返回第一个子文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:36:46.313

这是不可能的。大多数服务器都禁用了目录列表，并且不发送目录列表 opendir 用于本地目录。

[PHP - 另一台服务器上的 opendir](https://stackoverflow.com/questions/5292984/php-opendir-on-another-server)

您可以通过 ftp 或其他方式访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:36:58.080

不，URL 中没有目录的概念。

URL 可能会映射到服务器文件系统上的目录，但该映射不会被 HTTP 公开。

`http://example/running_order_image/sale/587/`可能会给您一个 HTML 文档，其中包含指向服务器目录中所有内容的链接，但您必须像访问任何其他资源一样访问它，然后解析 HTML 以获取这些资源的 URL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T12:46:29.020

如果您想连接到 rackspace 云文件，我建议使用位于[https://github.com/rackspace/php-cloudfiles的 API](https://github.com/rackspace/php-cloudfiles)

```
$auth = new CF_Authentication('<RACKSPACELOGIN>','<RACKSPACEKEY>');
$auth->authenticate();
$conn = new CF_Connection($auth);
$cloudFolder = $conn->get_container('<RACKSPACECONTAINER>');    
$cloudImages = $cloudFolder->get_objects();

foreach($cloudImages as $image)
{
  echo '<li>' . $image->name . '</li>';
} 
```

编辑：然后您将能够执行以下操作

```
$cloudImages = $cloudFolder->get_objects(0,NULL,NULL,'587/587_rubyred'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:38:02.673

为什么不看规格？

[http://nl3.php.net/manual/en/function.opendir.php](http://nl3.php.net/manual/en/function.opendir.php)

查看更新日志：

4.3.0 路径也可以是任何支持目录列表的 URL，但是在 PHP 4 中只有 file:// URL 包装器支持这一点

因此，这是否有效取决于您接近的服务器。我知道我的服务器不允许。;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:40:24.823

尝试在 PHP中使用[FTP 。](http://php.net/manual/en/book.ftp.php)这将允许您远程连接到服务器。当然只有在允许通过 FTP 连接的情况下。

# ios - ios中的GREE（Open feint）-更新分数在测试帐户中不起作用

> ID：12800169
> 
> 赞同：0
> 
> 时间：2012-10-09T12:34:46.270
> 
> 标签：ios, leaderboard, openfeint, gree

我正在测试与 GREE 的集成。排行榜中的更新分数在测试帐户中不起作用。任何人如果已经成功集成GREE，请帮助。GREEScore 对象调用 submitwithblock 方法后分数保持不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:07:27.857

我联系了格力，他们要求我创建新的测试应用程序和新的测试用户。这帮助我解决了这个问题。希望它对将来的某人有所帮助。

# c# - 托管到服务器时出现 WCF 错误

> ID：12800170
> 
> 赞同：2
> 
> 时间：2012-10-09T12:34:56.410
> 
> 标签：c#, wcf, iis, web-config

我创建了一个 wcf 服务，该服务在服务器上部署后出现错误，该服务在本地主机上运行良好，所以我不知道我错在哪里

![在此处输入图像描述](../Images/11632a9c7e4287ffb40d19df576438e7.png)

我的**Service.svc**是：

```
<%@ ServiceHost Language="C#" Debug="true" Service="mobile.Service" CodeBehind="Service.svc.cs" %> 
```

我的**web.config**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <!--Path for Photo Gallery Images-->
    <add key="PhotoGalleryPath" value="http://www.abc.com/photogallery/"/>
    <!--Path for Video Gallery Images-->
    <add key="VideoPath" value="http://www.abc.com/video/"/>
    <!--Path for Video URL-->
    <add key="VideoURLPath" value="http://ventunotech.com/watch/"/>
    <!--Path for Web URL for Share News through mail, FB, Twitter-->
    <add key="WebUrlforNews" value="http://www.abc.com/news.aspx?id="/>
    <add key="WebUrlforArticle" value="http://www.abc.com/article.aspx?id="/>
    <!--Folder Name with Path for News and Article Images (Change this according to Your Server Folder Path) and give this folder to write permission-->
    <add key="ImagePath" value="http://www.abc.com/mobile/images/"/>
  </appSettings>
  <connectionStrings>
    <add name="con" connectionString="Data Source=184.122.1.55;Initial Catalog=Data;Integrated Security=SSPI;"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <services>
      <service behaviorConfiguration="APIService.ServiceBehavior" name="APIService.Service">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" contract="APIService.IService"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="APIService.ServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <webHttpBinding>
        <binding name="web" maxBufferPoolSize="1500000" maxReceivedMessageSize="1500000" maxBufferSize="1500000">
          <readerQuotas maxArrayLength="656000" maxBytesPerRead="656000" maxDepth="32" maxNameTableCharCount="656000" maxStringContentLength="656000"/>
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel> 
```

我的**IService.cs**

```
namespace APIService
{
    [ServiceContract]
    public interface IService
    {
        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetCities", BodyStyle = WebMessageBodyStyle.WrappedRequest,
                    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        ItemList GetCities();

        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetStates", BodyStyle = WebMessageBodyStyle.WrappedRequest,
                    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        ItemList GetStates();  

 }
    [DataContract]
    public class Item
    {
        [DataMember]
        public string ID { get; set; }
        [DataMember]
        public string Name { get; set; }
    }
    [DataContract]
    public class ItemList
    {
        [DataMember]
        public List<Item> Items { get; set; }
    } 
```

}

我的**Service.svc.cs**

```
namespace APIService
{
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service : IService
    {
        SqlConnection offcon = new SqlConnection(ConfigurationManager.ConnectionStrings["con"].ToString());
        SqlDataAdapter adp;
        SqlCommand cmd;
        DataSet ds = new DataSet();
        DataSet ds1 = new DataSet();
        ItemList items = new ItemList();
        NewsList newslist = new NewsList();
        CommentList commentslist = new CommentList();
        UserProfile userPrf = new UserProfile();

        #region CityList
        public ItemList GetCities()
        {
            try
            {
                adp = new SqlDataAdapter("Select * from tblCity", offcon);
                adp.Fill(ds, "City");

                DataTable City = ds.Tables["City"];
                var item = (from d in City.AsEnumerable()
                            select new Item
                            {
                                ID = d.Field<Int32>("intCityId").ToString(),
                                Name = d.Field<string>("strTitle")
                            }).ToList();

                items.Items = item;
            }
            catch (Exception ex)
            {
                ex.Message.ToString();
            }
            return new ItemList { Items = items.Items };
        }
        #endregion

        #region StateList
        public ItemList GetStates()
        {
            try
            {
                adp = new SqlDataAdapter("select * from tblState ", offcon);
                adp.Fill(ds, "State");

                DataTable State = ds.Tables["State"];
                var item = (from d in State.AsEnumerable()
                            select new Item
                            {
                                ID = d.Field<Int32>("intStateId").ToString(),
                                Name = d.Field<string>("strTitle")
                            }).ToList();
                items.Items = item;
            }
            catch (Exception ex)
            {
                ex.Message.ToString();
            }
            return new ItemList { Items = items.Items };
        }
        #endregion
}
} 
```

我不知道我错在哪里，我尝试了以下链接的答案，但对我没有任何作用：

*   [链接1](https://stackoverflow.com/questions/720807/wcf-service-attribute-value-in-the-servicehost-directive-could-not-be-found)
*   [链接2](https://stackoverflow.com/questions/5283963/problem-with-type-of-service-in-servicehost-directive-in-wcf-service)

如果有人可以帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:08:51.327

该错误表示 IIS 无法找到该类型`mobile.Service`。无法找到类型的原因可能有很多。我建议您也在服务属性中指定程序集名称。

此外，您可以使用 . 检查程序集是否确实包含该类型`ILDasm`。

**更新**

尝试

```
<%@ ServiceHost Language="C#" Debug="true" Service="APIService.Service" CodeBehind="Service.svc.cs" %> 
```

# uml - OOAD 和 UML 的区别？

> ID：12800171
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:34:58.310
> 
> 标签：uml, ooad

我是软件领域的新手。我不知道 OOAD 和 UML 之间的区别。任何人都可以建议学习OOAD的教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:43:09.687

OOAD 是诗歌作者的想法，UML 是单词的集合

*   **面向对象的分析与设计**是进行应用程序设计的一种方式（一组原则、一个想法）。
*   **统一建模语言**是一种可以帮助您描述设计的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T12:26:44.210

OOAD 是面向对象的分析和设计，UML 是统一建模语言。UML 只不过是一种表达您将使用 OOAD 文献创建的设计的方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-10T02:03:14.963

我在软件行业很老了，我告诉你这些事情，花哨的术语并不重要。记住 Java 现在有函数式编程和 JShell，所以你可以理解我为什么这么说。UML 在设计具有关系的类、函数和数据类型时很有用，但一旦实现，它最终会发生变化。

最终把重点放在设计原则和你的编码技巧上，与代码设计相关的理论过多并没有多大用处。谢谢

# excel - 从 DB2 读取 Excel

> ID：12800174
> 
> 赞同：0
> 
> 时间：2012-10-09T12:35:10.807
> 
> 标签：excel, db2, oledb, external-tables, table-functions

我必须定期导入一些 Excel 数据。查看[DB2 文档](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.ref.doc%2Fdoc%2Fr0002170.html)可以通过外部函数直接访问 OLE DB 数据源。

但是我无法正确设置它。我获得了[Microsoft Access Database Enginge 2010](http://www.microsoft.com/en-us/download/details.aspx?id=13255)和修订包，并将其安装在数据库服务器上。

我将 excel 文件放在数据库服务器的本地目录中。( `C:\Temp\test.xls`)

excel有一个名为的工作簿`TEST1`和两行`ABC`，并`DEF`遵循一些数字数据：

```
ABC | DEF
---------
1   | 5
2   | 6
3   | 7
4   | 8 
```

为了创建表函数，我使用了以下语句：

```
CREATE OR REPLACE FUNCTION MYSCHEMA.test_excel ()
  RETURNS TABLE(ABC INTEGER,
            DEF INTEGER)
LANGUAGE OLEDB
EXTERNAL NAME '!TEST1!Provider=Microsoft.ACE.OLEDB.12.0;
      Data Source=C:\Temp\test.xls;
  Extended Properties="Excel 8.0;HDR=Yes"'; 
```

它似乎创建了该功能。但是，当查询数据时：

```
SELECT * FROM TABLE(MYSCHEMA.test_excel()) AS FUNCTABLE; 
```

我收到以下错误：

> 用户定义函数“MYSCHEMA.TEST_EXCEL”收到来自指定 OLE DB 提供程序的 OLE DB 错误。HRESULT="0x80040e37"。诊断文本：“Microsoft Access 数据库引擎”.. SQLCODE=-1183, SQLSTATE=38506, DRIVER=3.53.71

根据[文档](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.licensing.doc%2Fdoc%2Fr0053238.html)，错误意味着：`0x80040E37 The specified table does not exist.`

应该参考`!TEST!`工作簿，但是我不确定它是否是正确的语法。如何从 DB2 访问 Excel 工作表？有没有办法获得更详细的错误信息？有没有人正确的命名方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:08:24.333

命名似乎不正确。查看其他 oledb 示例，我发现缺少“$”。

`!TEST$!`在引用名为的工作表时用作外部名称`TEST`，我可以访问数据。

# java - 外部化资源适配器给出：java.lang.ClassCastException someclass 与 someclass 不兼容

> ID：12800178
> 
> 赞同：0
> 
> 时间：2012-10-09T12:35:17.103
> 
> 标签：java, websphere, classloader, websphere-7, classcastexception

我正在研究外部化资源适配器 rars。

早些时候，rar被打包在war的/lib中，一切正常。现在为了使战争变得轻松和通用，我想外部化资源适配器。

我已经做了什么

```
Removed rars from war 
installed rar externally through WAS7.0 Admin console
configured J2C connection factories for each RAR 
```

我做了一个干净的重启，我得到了一些 ClassNotFoundErrors。

为什么会出现这些错误：基本上 rars 使用 /lib 中存在的一些 jar。所以早些时候没有问题，但现在当我将它外部化时，我开始获得CNFE`s。

我是如何解决的：当我们通过 WAS 管理控制台安装 rar 时，可以选择提供类路径。我在那里提供了导致类路径问题的罐子。我可以部署并启动我的应用程序

**问题：**

当我登录我的应用程序时。其中一个 jar 中有一行代码（导致问题并被添加到资源适配器的类路径中，请注意，目前这存在于 war 中以及资源适配器的类路径中），正在执行类型转换。现在关于这个声明

我得到一个例外

```
java.lang.ClassCastException: com.csc.fs.ra.SimpleMappedRecord incompatible with com.csc.fs.ra.SimpleMappedRecord 
```

我挖出来发现一个可能的原因是同一个罐子的多个版本。这是我的情况。我在战争库中有一个 jar 版本，也在资源适配器的类路径上。

我在这里有点想法。如何解决这种情况。请帮忙

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:53:40.973

您可以检查[类加载器](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Futrb_classload_viewer.html)。它将显示所有已加载的罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:20:09.703

RAR 和 WAR 有它们自己的 ClassLoader，即使你使用相同版本的 jar，它们中的每一个都单独加载类，你会得到 ClassCastException。

在嵌入之前它可以工作，因为 RAR 使用相同的 ClassLoader。

如果 RAR 现在是分开的，我认为您必须将 jar 放在共享库中，以便由单个 ClassLoader 加载。

# plsql - PL/SQL - IN CLAUSE 中的逗号分隔列表

> ID：12800180
> 
> 赞同：3
> 
> 时间：2012-10-09T12:35:18.430
> 
> 标签：plsql, oracle-apex

我无法让一块 pl/sql 代码工作。在我的程序的顶部，我从我的 oracle apex 应用程序中获取了一些关于选中哪些复选框的数据。因为包含复选框的报告是动态生成的，所以我必须遍历

```
APEX_APPLICATION.G_F01 
```

列出并生成一个逗号分隔的字符串，如下所示

```
v_list VARCHAR2(255) := (1,3,5,9,10); 
```

我想稍后查询该列表并将 v_list 放在 IN 子句中，如下所示

```
SELECT * FROM users 
WHERE user_id IN (v_list); 
```

这当然会引发错误。我的问题是我可以将 v_list 转换为什么以便能够将其插入到 pl/sql 过程中查询的 IN 子句中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:03:44.697

如果`users`很小`user_id`且不包含逗号，则可以使用：

```
SELECT * FROM users WHERE ',' || v_list || ',' LIKE '%,'||user_id||',%' 
```

这个查询不是最优的，因为它不能在`user_id`.

我建议你使用一个流水线函数，它返回一个`NUMBER`你可以直接查询的表。例如：

```
CREATE TYPE tab_number IS TABLE OF NUMBER;
/
CREATE OR REPLACE FUNCTION string_to_table_num(p VARCHAR2)
   RETURN tab_number
   PIPELINED IS
BEGIN
   FOR cc IN (SELECT rtrim(regexp_substr(str, '[^,]*,', 1, level), ',') res
                FROM (SELECT p || ',' str FROM dual)
              CONNECT BY level <= length(str) 
                                  - length(replace(str, ',', ''))) LOOP
      PIPE ROW(cc.res);
   END LOOP;
END;
/ 
```

然后，您将能够构建查询，例如：

```
SELECT * 
  FROM users 
 WHERE user_id IN (SELECT *
                     FROM TABLE(string_to_table_num('1,2,3,4,5')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-31T12:04:38.617

您可以使用`XMLTABLE`如下

```
SELECT * FROM users 
WHERE user_id IN (SELECT to_number(column_value) FROM XMLTABLE(v_list)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:03:25.947

我也试图为此找到解决方案，但从未成功。您可以将查询构建为字符串，然后立即运行 EXECUTE，请参阅[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/dynamic.htm#i14500](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/dynamic.htm#i14500)。

也就是说，我突然想到 IN 子句的参数可以是子选择：

```
SELECT * FROM users 
WHERE user_id IN (SELECT something FROM somewhere) 
```

那么，是否可以将复选框值公开为存储函数？然后你也许可以做类似的事情

```
SELECT * FROM users
WHERE user_id IN (SELECT my_package.checkbox_func FROM dual) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:37:18.173

就个人而言，我喜欢这种方法：

```
with t as (select 'a,b,c,d,e' str from dual)
--
select val
from t, xmltable('/root/e/text()'
                 passing xmltype('<root><e>' || replace(t.str,',','</e><e>')|| '</e></root>')
                 columns val varchar2(10) path '/'
                ) 
```

这可以在[线程中的其他示例中找到：Split Comma Delimited String Oracle](https://forums.oracle.com/forums/thread.jspa?threadID=958898)

如果您想沉浸在更多选项中，请访问 OTN plsql 论坛。

# mule - 将消息有效负载设置为会话变量

> ID：12800183
> 
> 赞同：2
> 
> 时间：2012-10-09T12:35:28.580
> 
> 标签：mule

在我的 Mule 流程中，我有一条消息不断被编辑，以形成流程结束时所有处理的记录。有一次，我对 Web 服务进行 HTTP 调用以获取消息的一些详细信息。

我的问题如下： HTTP 响应被保存为消息负载，这需要我将主记录保存到会话变量中，以保存所有先前的处理。但是，当我设置会话变量时，会话变量的值是 java.class@d6883（java.class = 对象的类。必须编辑以符合我的行为准则）。如何将消息有效负载的值设置为会话变量而不是消息有效负载的内存位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:58:18.040

假设您放入 session 的对象是`Serializable`，您可以使用 MEL 实现此目的：

```
<set-session-variable variableName="tempCanonical" value="#[message.payload]" /> 
```

# mysql - 需要查询才能按月查找连续订单

> ID：12800184
> 
> 赞同：0
> 
> 时间：2012-10-09T12:35:30.970
> 
> 标签：mysql, aggregate-functions, mysql-5.5

我在编写此查询时遇到问题。

我需要获取连续几个月发货的当前订单数量。

示例：如果当前月份是 11 月，并且他们在 7 月、8 月、9 月、10 月、11 月下订单，则该用户将返回 5。如果他们在 11 月没有下订单，它将返回 0，因为他们的连胜记录已被打破。

我关心的表是`customer`、`order`和`date`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:56:44.797

```
Here you replace now and static date as per columnname :

select (case 
       when (month(now())=11 and 
            (month('2012-02-02')>=7 and month('2012-02-02')<=11)) 
       then 5 
       else
       0 end) as 'month'
       from tablename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:57:28.397

使用日期表和客户表之间的交叉连接来为每个客户/月份组合获取一行，然后将其与订单表左连接以获取详细信息，使用 group by 获取计数。

像这样的东西，尽管您需要修改它以处理作为保留字的列名。

```
SELECT customer.name, month.name, COUNT(order.id)
FROM customer
CROSS JOIN date
LEFT OUTER JOIN order
ON customer.id = order.customer_id
AND MONTH(date.date) = MONTH(order.date)
WHERE date.date BETWEEN startofdaterange AND endofdaterange
GROUP BY customer.name, month.name 
```

或者，如果我误读了这个问题，并且如果他们每个月都在该范围内订购，则需要计算订单数量，或者如果他们跳过一个月，则需要计算订单数量，然后类似这样的事情（未经测试，因此预计有错字或 2，需要表格def 测试）： -

```
SELECT name, CASE  WHEN MonthCount = MonthOrderCount THEN OrderCount ELSE 0 END AS ContinuousOrderMonths
FROM (
SELECT CustName, COUNT(MonthName) AS MonthCount, SUM(MonthOrderCount) AS OrderCount, SUM(CASE WHEN MonthOrderCount > 0 THEN 1 ELSE 0 END)
FROM (
SELECT customer.name AS CustName, month.name AS MonthName, COUNT(order.id) AS MonthOrderCount
FROM customer
CROSS JOIN date
LEFT OUTER JOIN order
ON customer.id = order.customer_id
AND MONTH(date.date) = MONTH(order.date)
WHERE date.date BETWEEN startofdaterange AND endofdaterange
GROUP BY customer.name, month.name )Sub1 ) Sub2
GROUP BY CustName 
```

如果您想要每月的客户列表和逗号分隔的订单列表：-

```
SELECT CustName, GROUP_CONCAT(CAST(MonthsOrder AS CHAR))
FROM (
SELECT customer.name AS CustName, month.name, COUNT(order.id) AS MonthsOrder
FROM customer
CROSS JOIN date
LEFT OUTER JOIN order
ON customer.id = order.customer_id
AND MONTH(date.date) = MONTH(order.date)
WHERE date.date BETWEEN startofdaterange AND endofdaterange
GROUP BY customer.name, month.name) Sub1
GROUP BY CustName 
```

您可能需要扩展它以获取每个月份的名称并强制排序

# html - HTML/CSS - 拥有部分扩展元素的最佳方式是什么？

> ID：12800188
> 
> 赞同：0
> 
> 时间：2012-10-09T12:35:52.330
> 
> 标签：html, css

假设我有一个 980px 居中的内容区域，但有一个背景元素从屏幕左侧一直扩展到内容区域的 80%。在没有 JavaScript 干预或在 body 上使用背景图像的情况下，你如何做到这一点？

编辑：

这是一个视觉概念的指导：http: [//i.imgur.com/36tCm.jpg](http://i.imgur.com/36tCm.jpg)。黄色标题扩展到窗口左侧，位于内容框区域之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:50:00.553

你用 css 处理这个问题

```
#inner{
   background:#fff;
   width:80%;
   position:absolute;
   left:0;
   top:0;
} 
```

你应该为它的父母设置这种风格

```
#parent{
   position:relative;
} 
```

例如 ：

```
<div id="parent">
<div id="inner"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:07:12.243

`#pageheader`您可以通过一些视觉技巧来实现这一点——即，通过使用两个黄色 div 来创建元素的视觉效果。

这是一个[说明效果的 JSFiddle](http://jsfiddle.net/sAmYP/)。

这是一些示例 HTML：

```
<body>
  <div id="yellowBar">
  <div id="content">
    <div id="pageHeader">
  <!--the rest of your HTML...--> 
```

然后，你的 CSS：

```
#yellowBar {
  height: (set appropriate height here);
  background: yellow (set appropriate hex code here); 
  position: absolute;
  top: (set appropriate top value so the #yellowBar nudges up against the #pageHeader visually);
  width: 50%;
  left: 0px;
}

#pageHeader {
  height: (same height as #yellowBar); 
  background: (same color as yellowBar); 
  width: 80%; 
  /*any other CSS rules*/ 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:07:16.963

您可以在 980px 容器之前使用 div 元素获得悬垂效果，并提供与标题元素所在位置相匹配的位置

[jsfiddle 示例](http://jsfiddle.net/eR3L3/1/)或[全屏示例](http://jsfiddle.net/eR3L3/1/show)

在[屏幕截图](http://i.imgur.com/36tCm.jpg)中，左侧有橙色悬垂，右侧有黑色悬垂，因此这是 HTML 结构（或者，您可以使用单个 div 和 css 渐变来创建悬垂，以创建高达 50% 的橙色，然后将另一个变为黑色50%)

```
<div class="container-outer">
    <div class="header-overhang header-left"></div>
    <div class="header-overhang header-right"></div>
    <div class="container">
        <div class="sidebar">
            sidebar area
        </div>
        <div class="header">
            PAGE HEADER
        </div>
        <div class="content">
            content text
        </div>
    </div>
</div>​ 
```

CSS：

```
.container-outer {background-color:#BDC7D2;border-top:60px solid #050912;}
.header-overhang {height:72px;width:50%;position:absolute;top:60px;}
.header-left {left:0;background-color:#FDC103;}
.header-right {right:0;background-color:#050912;}
.container {width:980px;margin:0 auto;position:relative;}

.sidebar {float:right;width:20%;height:220px;line-height:220px;text-align:center;border-top:5px solid #d7e0e9;border-bottom:3px solid #d7e0e9;background-color:#fff;}
.header {height:72px;line-height:72px;padding-left:40px;width:80%;background-color:#FDC103;}
.content {padding:50px 40px 120px 120px;background:#050912;color:#fff;} 
```

# iphone - 在目标 C 中处理肥皂信封

> ID：12800190
> 
> 赞同：1
> 
> 时间：2012-10-09T12:36:05.527
> 
> 标签：iphone, soap, nsstring, sudzc

我正在尝试使用 sudzc.com 在 iOS 中访问 SOAP Web 服务。看来我得到了肥皂信封作为回报。但我不确定如何处理结果。我可以以某种方式将结果放入 NSDictionary 中还是如何进行？

```
 - (void)run {
// Create the service
SDZDevices2Api* service = [SDZDevices2Api service];
service.logging = YES;
    // Returns NSString*. (added searchstring and max count values)
[service LocationFindSimple:self action:@selector(LocationFindSimpleHandler:) SearchString: @"Vejle" Max: 1 BankId: [NSMutableArray array] BankName: [NSMutableArray array] Id: [NSMutableArray array] Name: [NSMutableArray array] Icon: [NSMutableArray array] Zip: [NSMutableArray array] Attributes: [NSMutableArray array]];
   }

// Handle the response from LocationFindSimple.

- (void) LocationFindSimpleHandler: (id) value {

// Handle errors
if([value isKindOfClass:[NSError class]]) {
    NSLog(@"%@", value);
    return;
}

// Handle faults
if([value isKindOfClass:[SoapFault class]]) {
    NSLog(@"%@", value);
    return;
}

// Do something with the NSString* result
  NSString* result = (NSString*) value;
    NSLog(@"LocationFindSimple returned the value: %@", result);
} 
```

这是日志消息：

[http://pastebin.com/JycGq4Du](http://pastebin.com/JycGq4Du)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:06:47.560

我帮助了其他人：[这里](https://stackoverflow.com/questions/9829085/handling-sudzcs-response-result-nsmutablearray/9935832#9935832)

```
if( [value isKindOfClass:[NSError class]] || [value isKindOfClass:[SoapFault class]] ) 
{

NSLog(@"%@", [value description]);
return;
}

// Verify we're a dictionary
if( ![value isKindOfClass:[NSDictionary class]] ) {

NSLog(@"ERROR: Response not a dictionary");
return;
}

NSDictionary* dict = (NSDictionary*)value;
NSDictionary* resp = [dict objectForKey:@"E_AN"];
if( ( resp == nil ) || ![resp isKindOfClass:[NSDictionary class]] ) {

NSLog(@"ERROR: E_AN not a dictionary");
return;
}
dict = [resp objectForKey:@"item"];
if( ( dict == nil ) || ![dict isKindOfClass:[NSDictionary class]] ) {

NSLog(@"ERROR: item not a dictionary");
return;
}
resp = [dict objectForKey:@"MANDT"];
if( ( resp == nil ) || ![resp isKindOfClass:[NSDictionary class]] ) {

NSLog(@"ERROR: MANDT not a dictionary");
return;
} 
```

# php - 如何获取浏览按钮中显示的完整文件路径

> ID：12800192
> 
> 赞同：1
> 
> 时间：2012-10-09T12:36:14.387
> 
> 标签：php, javascript

> **可能重复：**
> [使用 jQuery 的文件输入](https://stackoverflow.com/questions/3489133/full-path-from-file-input-using-jquery)
> [的完整路径如何解析 C:\fakepath？](https://stackoverflow.com/questions/4851595/how-to-resolve-the-c-fakepath)

我在我的应用程序中使用多个文件上传，我想获取显示在浏览小部件中的完整文件路径。

例如，假设文件路径是“home/administrator/Pictures/bird.jpeg”。我只能获取文件名（bird.jpeg）。使用 PHP 和 Firefox 作为我的浏览器，除了获取完整的文件路径，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:37:22.970

由于浏览器安全设置，您无法获取它。

# matlab - 如何在 Matlab 的 for 循环中执行此操作

> ID：12800197
> 
> 赞同：2
> 
> 时间：2012-10-09T12:36:34.980
> 
> 标签：matlab, loops, for-loop, matrix

`W`我有一个大小为 3 维的矩阵，`160x170x18`我想计算 W 内每个连续矩阵之间的差异。

例如`diff1 = W(:,:,1) - W(:,:,2)`和`diff2 = W(:,:,2) - W(:,:,3)`等...

接下来我要选择结果矩阵的一些特殊部分，例如：

```
NewDiff1 = [diff1(20:50,110:140); diff1(60:90,110:140)]; 
```

其他矩阵也一样。最后我想计算每个矩阵的平均值和误差如下：

```
mean1 = mean(mean(NewDiff1));
er1 = 0.1-abs(mean1); 
```

我成功地为每个矩阵单独执行此操作，但更喜欢在 for 循环中一次完成所有操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:54:39.690

表达方式

```
diff1 = diff(W,1,3) 
```

在您的示例中，将返回一个`160*170*17`矩阵 where `diffW(:,:,1) = W(:,:,2) - W(:,:,1)`，这不是您想要的。但

```
diff1 = (-1)*diff(W,1,3) 
```

确实，如果我的算术很好，给你你想要的差异。从那里开始，您需要类似的东西：

```
newdiff1 = [diff1(20:50,110:140,:);diff1(60:90,110:140,:)]; 
```

和

```
means = mean(mean(newdiff1));
er1 = 0.1 - abs(mean1); 
```

我还没有在你正在使用的大小的矩阵上彻底测试这个，但它似乎在较小的测试上工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:39:39.903

将您的矩阵存储到一个[元胞数组](http://blogs.mathworks.com/loren/2006/06/21/cell-arrays-and-their-contents/)中，然后循环遍历元胞数组的内容并将相同的差分逻辑应用于每个事物。小心使用`{}`单元格数组的语法来获取其内容，而不是`()`在特定位置为您提供单元格。

# web - WIX 卸载不会删除 Windows Server 2008 R2 上的站点

> ID：12800207
> 
> 赞同：1
> 
> 时间：2012-10-09T12:37:07.953
> 
> 标签：web, wix, windows-installer, iis-7.5, uninstallation

我有设置网站的安装程序。安装程序使用 WIX 3.5 实现。组件安装站点如下：

```
 <DirectoryRef Id="TARGETDIR">
    <Directory Id="WWWROOT">
    </Directory>
  </DirectoryRef>

  <Property Id="WWWROOT" Value="C:\inetpub\wwwroot">
    <RegistrySearch Id="FindInetPubFolder" Root="HKLM" Key="SOFTWARE\Microsoft\InetStp" Name="PathWWWRoot" Type="directory" />
  </Property>

  <Component Id="CC_AppPoolConfigure" Guid="YOURGUID-9558-4CAE-A928-EACD27D69A0D" KeyPath="yes" Permanent="no">
    <iis:WebAppPool Id="CC_AppPool" Name="[SITE_APP_POOL]" ManagedRuntimeVersion="v4.0" ManagedPipelineMode="integrated" />
  </Component>

  <Component Id="CC_Iis6SiteConfigure" Guid="YOURGUID-13E2-4980-A55A-E37E3E06FB67" KeyPath="yes" Permanent="no">
    <Condition><![CDATA[Installed OR (IISMAJORVERSION AND (IISMAJORVERSION = "#6"))]]></Condition>
    <iis:WebSite Id="CC_WebSite_IIS6" Description="[SITE_NAME]"
                 AutoStart="yes" StartOnInstall="yes" ConfigureIfExists="yes"
                 Directory="WWWROOT" ConnectionTimeout="360" SiteId="[SITE_ID]">
      <iis:WebVirtualDir Id="CC_Site_IIS6_VDir" Directory="SITE_INSTALLDIR" Alias="[SITE_VIRT_DIR]">
        <iis:WebApplication Id="CC_IIS6_WebApp" Name="[SITE_APP_NAME]" WebAppPool="CC_AppPool"  >
          <iis:WebApplicationExtension Verbs="GET,HEAD,POST" CheckPath="no" Script="yes" Executable="[FRAMEWORKROOT]v4.0.30319\aspnet_isapi.dll" />
        </iis:WebApplication>

        <iis:WebDirProperties Id="CC_Site_IIS6_Properties" WindowsAuthentication="yes" AnonymousAccess="yes"/>
      </iis:WebVirtualDir>

      <iis:WebAddress Id="CC_Site_IIS6_Header_Bindings" Port="[SITE_PORT]" Header="[SITE_HEADER]" />
    </iis:WebSite>
  </Component>

  <Component Id="CC_IIS6_Config_Extentions" Guid="YOURGUID-009A-4545-8D4D-EC5437D7332F" KeyPath="yes" Permanent="yes">
    <Condition><![CDATA[IISMAJORVERSION AND (IISMAJORVERSION = "#6")]]></Condition>
    <iis:WebServiceExtension Id="CC_ExtensionASP4" Group="ASP.NET v4.0.30319" Allow="yes" File="[FRAMEWORKROOT]v4.0.30319\aspnet_isapi.dll" Description="ASP.NET v4.0.30319"/>
  </Component>

  <Component Id="CC_Iis7Site" Guid="YOURGUID-1738-476A-945F-A97721F5ECFC" KeyPath="yes" Permanent="no">
    <Condition><![CDATA[IISMAJORVERSION AND (IISMAJORVERSION >= "#7")]]></Condition>
    <iis:WebSite Id="CC_WebSite_IIS7" Description="[SITE_NAME]"
                 AutoStart="yes" StartOnInstall="yes" ConfigureIfExists="yes"
                 Directory="WWWROOT" ConnectionTimeout="360" SiteId="[SITE_ID]">

      <iis:WebVirtualDir Id="CC_Site_IIS7_VDir" Directory="SITE_INSTALLDIR" Alias="[SITE_VIRT_DIR]">
        <iis:WebApplication Id="CC_IIS7_WebApp" Name="[SITE_APP_NAME]" WebAppPool="CC_AppPool"></iis:WebApplication>

        <iis:WebDirProperties Id="CC_Site_IIS7_Properties" WindowsAuthentication="yes" AnonymousAccess="yes"/>

      </iis:WebVirtualDir>

      <iis:WebAddress Id="CC_Site_IIS7_Header_Binding" Port="[SITE_PORT]" Header="[SITE_HEADER]" />

    </iis:WebSite>
  </Component> 
```

如您所见，站点需要安装在 IIS 6、IIS 7 和 IIS 7.5 上。在所有列出的环境中都可以安装。安装程序执行每台机器的安装。我使用延迟自定义操作来启用所需的 IIS 组件等，因此安装程序首先在没有管理员权限的情况下运行，并在单击“安装”按钮时询问它们。

但是**使用用于安装产品的相同安装程序文件卸载产品时出现问题 - 站点和虚拟目录留在 IIS 上。它仅在启用 UAC 且仅在通过运行安装程序文件并在第一个对话框中选择“删除”选项进行卸载时才会出现在 Windows Server 2008 R2 (IIS 7.5) 上。**我在几个环境（Windows Server 2003、2003 R2、2008 x86、2008 x64、2008 R2）上对此进行了测试，看起来 2008 R2 是唯一存在问题的环境。其他调查表明，禁用 UAC 可以解决问题。通过控制面板卸载产品或使用卸载参数从命令行运行相同的 msi 也没有此问题。因此，存在问题的情况非常有限，但它仍然很重要。

我几乎可以肯定问题出在 UAC 限制：也许安装程序会在显示 UAC 对话框以授予权限之前尝试卸载站点。但我不明白我该如何解决它。任何帮助将不胜感激。

如果您有更好的方法在如此不同的环境中安装站点，我也会很高兴听到它——我发明的轮子可能不是最好的 =)。

如果您需要卸载日志，它在[这里](https://docs.google.com/document/d/1zAJFFt8Qg-N_a8km8RcQ-gdAgaWlwmMwR27QDWyntW4/edit)：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T10:32:17.377

我们遇到了同样的问题，并通过将包含网站和应用程序名称的属性更改为 Secure="yes" 来解决它。在您的情况下，请确保：

```
<Property Id="SITE_NAME" Secure="yes">
<Property Id="SITE_APP_NAME" Secure="yes"> 
```

# jquery - 无法对 Json Web 服务进行 Ajax 调用

> ID：12800212
> 
> 赞同：0
> 
> 时间：2012-10-09T12:37:23.123
> 
> 标签：jquery, ajax, json

我想调用一个返回 JSON 对象的 Web 服务，Web 服务规范如以下链接中所述：

[http://dev.joget.org/community/display/KB/JSON+API#JSONAPI-web%2Fjson%2Fworkflow%2Fpackage%2Flist](http://dev.joget.org/community/display/KB/JSON+API#JSONAPI-web%2Fjson%2Fworkflow%2Fpackage%2Flist)

我在我的 asp.net mvc3 Web 应用程序中有一个简单的视图，如下所示：

```
@{
    ViewBag.Title = "Home Page";
}
   <script src="@Url.Content("~/Scripts/f.js")" type="text/javascript"></script>

<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p>
<h1>The Processes are </h1>

<ul id="products"/> 
```

以及以下 f.js 调用 Web 服务并显示返回的 JSON 数据：

```
$(document).ready(function() {
    $.ajax({
        type: 'GET',
        url: 'http://localhost:8080/jw/web/json/workflow/package/list?loginAs=admin',
        dataType: 'json',
        success: function(data) {
            $.each(data, function(key, val) {
                alert("jsonData");
                // Format the text to display.
                var str = val.packageId + ': $' + val.packageName;

                // Add a list item for the product.
                $('<li/>', {
                    text: str
                }).appendTo($('#products'));

            });
        }
    });
});​ 
```

但问题是，当我导航到视图时，由于 AJAX 调用，视图上不会显示任何内容，请记住，如果我手动键入 URL：'http://localhost:8080/jw/web/ json/workflow/package/list?loginAs=admin' 在我的浏览器地址栏中，然后结果将成功显示在浏览器中？

那么可能出了什么问题？

**：：：更新：：：**

我将我的 JavaScript 更新为以下内容：

```
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "http://localhost:8080/jw/web/json/workflow/package/list?loginAs=admin",
        dataType: "JSONP",
        contentType: "application/json; charset=utf-8",
        success: function(data) {
            $.each(data, function(key, val) {

                // Format the text to display.
                var str = val.packageId + ': $ ' + val.packageName;

                // Add a list item for the product.
                $('<li/>', {
                    text: str
                }).appendTo($('#products'));

            });
        }
    });
});​ 
```

但 Web 服务调用的结果返回为：

```
- undefined: $ undefined 
```

而不是：

```
 {"activityId":"","processId":"289_process1"} 
```

那么阻止我的代码显示正确数据的问题是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T11:28:29.780

我将我的 JavaScript 代码修改为以下内容：-

```
//code goes here
success: function(result) {
$.each(result.data, function(key, val) {

//code goes here 
```

# linux - 如何在 phusion passanger 中设置 max、count、active 和 inactive 配置

> ID：12800213
> 
> 赞同：3
> 
> 时间：2012-10-09T12:37:22.397
> 
> 标签：linux, ruby-on-rails-3.1

我想在 phusion 乘客中设置以下配置。

```
max      = 6
count    = 2
active   = 2
inactive = 0
Waiting on global queue = 0 
```

你能告诉我在哪里设置这个。

# asp.net - 服务器端相当于“top.location.href”

> ID：12800219
> 
> 赞同：0
> 
> 时间：2012-10-09T12:37:39.543
> 
> 标签：asp.net, radwindow

我在“主页”页面。从那里在 radwindow 中调用“子”页面。现在在“儿童”页面的点击事件上，我想关闭 radwindow 并重新加载页面“主页”页面。

为了实现这一点，在“儿童”页面中定义的按钮的单击事件上。我正在调用一个 JavaScript 函数：-

```
function ReloadHome 
{
    var abc = 'Home.aspx';
    top.location.href = abc;
} 
```

**问题：-**如何关闭 radwindow，然后使用服务器端方法导航或重新加载“主页”页面。不是上面提到的javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:41:16.750

你可以试试

关 ：

```
Response.Write("<script language='javascript'> { window.close();}</script>") 
```

重定向：

```
Response.Redirect("...Your url"); 
```

# nhibernate - 外键不正确的流利映射错误

> ID：12800220
> 
> 赞同：0
> 
> 时间：2012-10-09T12:37:39.720
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我流利的映射是：

```
 HasOne(x => x.User).ForeignKey("fOM_User_Id").Cascade.None(); 
```

我的课是：

```
public class OrganizationMember
{
    public virtual int MemberId
    {
        get;
        set;
    }

    public virtual int OrganizationId
    {
        get;
        set;
    }

    public virtual int UserId
    {
        get;
        set;
    }

    public  virtual User User { get; set; }

    public virtual string Permissions
    {
        get;
        set;
    }

    public virtual System.DateTime DateAdded
    {
        get;
        set;
    }
} 
```

我运行查询：

```
 var assignableusers = _session.Query<OrganizationMember>().Where(x => x.OrganizationId == CurrentProject.OwnerID)
            .Select(x => x.User.Login); 
```

这产生了：

`select user1_.fU_Login as col_0_0_ from tOrganization_Members organizati0_ left outer join tUsers user1_ on **organizati0_.fOM_Id**=user1_.fU_UserID where organizati0_.fOM_Organization_Id=7`

但它应该是： `select user1_.fU_Login as col_0_0_ from tOrganization_Members organizati0_ left outer join tUsers user1_ on **organizati0_.fOM_User_Id** = user1_.fU_UserID where organizati0_.fOM_Organization_Id = 7`

如何在我的映射中解决这个问题？从**organizati0_.fOM_Id**到**organizati0_.fOM_User_Id**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:18:12.153

我不认为你们的关系是真正的一对一。

[http://www.jagregory.com/writings/i-think-you-mean-a-many-to-one-sir/](http://www.jagregory.com/writings/i-think-you-mean-a-many-to-one-sir/)

您可能应该改用`References`（多对一）。

```
References(x => x.User).Cascade.None(); 
```

# ios - 在 UIRefreshControl 中将颜色更改为属性标题

> ID：12800221
> 
> 赞同：6
> 
> 时间：2012-10-09T12:37:40.483
> 
> 标签：ios, ios6, nsattributedstring, uirefreshcontrol

我正在寻找一种改变颜色的方法`UIRefreshControl`。文本显示在 中`NSAttributedString`，所以我尝试使用`CoreText.framework`：

```
 NSString *s = @"Hello";
 NSMutableAttributedString *a = [[NSMutableAttributedString alloc] initWithString:s];
 [a addAttribute:(id)kCTForegroundColorAttributeName value:(id)[UIColor redColor].CGColor range:NSRangeFromString(s)];
 refreshControl.attributedTitle = a; 
```

文本显示正确，但颜色始终为默认灰色。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T18:39:15.757

你应该使用`NSForegroundColorAttributeName`，而不是`kCTForegroundColorAttributeName`。

* * *

此外，通过的范围应该是`NSMakeRange(0, [s length]);`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-09T22:20:23.623

在 Swift 中，您可以按如下方式设置*属性标题的颜色：*

```
self.refreshControl?.attributedTitle = NSAttributedString(string: "Pull to refresh", attributes: [NSForegroundColorAttributeName: UIColor(red: 255.0/255.0, green: 182.0/255.0, blue: 8.0/255.0, alpha: 1.0)]) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-24T01:33:29.300

简单版：

```
NSAttributedString *title = [[NSAttributedString alloc] initWithString:@"Refresh…" 
attributes: @{NSForegroundColorAttributeName:[UIColor redColor]}];
refreshControl.attributedTitle = [[NSAttributedString alloc]initWithAttributedString:title]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-04T04:54:17.840

您传递给“addAttribute”方法的“value”参数是 CGColor，使用 UIColor 代替它会起作用！[UIColor redColor] ~~.CGColor~~

```
NSString *s = @"Hello";  
NSMutableAttributedString *a = [[NSMutableAttributedString alloc] initWithString:s];  
[a addAttribute:kCTForegroundColorAttributeName value:[UIColor redColor] range:NSRangeFromString(s)]; 
refreshControl.attributedTitle = a; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-08T15:00:31.283

```
NSString *s = @"Hello";

NSMutableAttributedString *a = [[NSMutableAttributedString alloc] initWithString:s];

NSDictionary *refreshAttributes = @{
  NSForegroundColorAttributeName: [UIColor blueColor],
};

[a setAttributes:refreshAttributes range:NSMakeRange(0, a.length)];

refreshControl.attributedTitle = a; 
```

我在这里找到了答案：http: [//ioscreator.com/format-text-in-ios6-attributed-strings/](http://ioscreator.com/format-text-in-ios6-attributed-strings/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-05T09:37:41.513

斯威夫特版本 4 (iOS 11)

```
 let myString = "Pull to refresh"
        let myAttribute = [ NSAttributedString.Key.foregroundColor: UIColor.black ]
        let myAttrString = NSAttributedString(string: myString, attributes: myAttribute)
        refreshControl.attributedTitle = myAttrString 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-22T10:11:31.850

使用这种方法，

*   (id)initWithString:(NSString *)str 属性:(NSDictionary *)attrs;
*   (id)initWithAttributedString:(NSAttributedString *)attrStr;

所以，

```
NSMutableDictionary *attributes = [NSMutableDictionary dictionary];
[attributes setObject:[UIColor whiteColor] forKey:NSBackgroundColorAttributeName]; //background color :optional
[attributes setObject:[UIColor redColor] forKey:NSForegroundColorAttributeName];  //title text color :optionala
NSAttributedString *title = [[NSAttributedString alloc] initWithString:@"Refresh!!" attributes:attributes];

_refreshcontrol.attributedTitle = [[NSAttributedString alloc]initWithAttributedString:title]; 
```

# sqlite - 在 SQLite 中排序和创建列

> ID：12800223
> 
> 赞同：0
> 
> 时间：2012-10-09T12:37:44.383
> 
> 标签：sqlite

我是一名学生，正在做一个项目，我必须使用 SQLite，但是我是 SQLite 的新手。我在下面描述了我的问题。

我有一个表格（包含 60000 行），其格式如下所示。

```
Date_Time           Country_City Temperature
4-10-2012 12:10:10  USA_NYC        20
4-10-2012 12:10:10  USA_LA         17
4-10-2012 12:10:10  USA_DC         19
4-10-2012 12:40:10  USA_LA         18
4-10-2012 12:40:10  USA_DC         18 
```

我必须按如下所示对表格进行排序和创建，如果数据在 NYC 中丢失，则数据必须为“NaN”。如果所有行都包含单个时间戳的“NaN”，则必须将其删除。

```
Date_Time         USA_NYC USA_LA USA_DC
4-10-2012 12:10:10 20      17     19
4-10-2012 12:40:10 NaN     18     18 
```

你能告诉我如何创建它，我可以排序和排序，但我不知道如何在 SQLite 中创建这样的。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:46:57.227

您的问题当然不是特定于 SQLite 的，而是解决了正确 SQL 查询的公式。快速浏览一下您想要实现的目标后，我确信在普通 SQL-92 中是可能的。

目前，如果我发布解决方案，我不确定是否会回答家庭作业。因此，我将给出提示：结合连接/外部连接查看子查询（从...中选择 Date_Time、USA_NYC）。

关于 NaN 值，我不确定您是否想要它或者是否有 NULL 值。如果您确实需要字符串值“NaN”，则可以使用 case 构造将 NULL 值转换为“NaN”字符串。

我看到困难的地方：如果您不知道提前期待哪些列（例如，USA_NYC），它可能会变得更加棘手（告诉我们是否是这种情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:57:16.090

首先，这些查询获取所有可能的时间戳和城市值：

```
SELECT DISTINCT Date_Time FROM mytable
SELECT DISTINCT Country_City FROM mytable 
```

通过交叉连接结果，我们得到所有可能的组合（即使是表中不存在的组合）。然后，我们可以查找存在外连接的那些温度值：

```
SELECT t1.Date_Time,
       t1.Country_City,
       Temperature
FROM ((SELECT DISTINCT Date_Time    FROM mytable)
      JOIN
      (SELECT DISTINCT Country_City FROM mytable)) t1
     LEFT JOIN mytable t2
     ON t1.Date_Time = t2.Date_Time AND t1.Country_City = t2.Country_City 
```

结果如下所示：

```
t1.Date_Time        t1.Country_City  Temperature
------------------  ---------------  -----------
4-10-2012 12:10:10  USA_NYC          20
4-10-2012 12:10:10  USA_LA           17
4-10-2012 12:10:10  USA_DC           19
4-10-2012 12:40:10  USA_NYC                   <-- NULL
4-10-2012 12:40:10  USA_LA           18
4-10-2012 12:40:10  USA_DC           18 
```

如果没有 SQLite 所没有的枢轴函数，就不可能自动将城市作为列。

# django-templates - Django模板：比较两个日期，是同一个月吗？

> ID：12800229
> 
> 赞同：0
> 
> 时间：2012-10-09T12:37:55.783
> 
> 标签：django-templates

我有两个日期，我想看看他们是否有相同的月份。我在尝试：

```
{% if {{event.date_to|date:"m"}} = {{event.date_from|date:"m"}} %}
     <a>same!</a>
{%endif%} 
```

渲染时出现错误：无法解析剩余部分。date_to 和 date_from 都是 DateTimeField()。此时，我正在考虑在视图中进行比较并传递一个 is_same_date 值。但是，我想先问是否可以在模板中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:40:08.557

我想到了。这是一些愚蠢的错字之类的东西。这行得通。

```
{% if event.date_from|date:"m" == event.date_to|date:"m" %} 
```

它也适用于日期和月份等。“d m”

# amazon-s3 - 如何确保网络爬虫适用于托管在 AWS S3 上并使用 AJAX 的站点

> ID：12800233
> 
> 赞同：6
> 
> 时间：2012-10-09T12:38:10.853
> 
> 标签：amazon-s3, amazon-web-services, web-crawler, google-crawlers

谷歌站长指南解释说，网络服务器应该处理包含 _escaped_fragment_ 的 url 请求（爬虫将 www.example.com/ajax.html#!mystate 修改为 www.example.com/ajax.html?_escaped_fragment_=mystate）

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992)

我的站点位于 AWS S3 上，我没有 Web 服务器来处理此类请求。如何确保爬虫获取提要并且我的网站获取索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T12:37:02.183

S3 托管站点是静态 html。没有 POST 处理，没有 PHP 渲染，什么都没有……那么，您为什么关心 Google 索引 AJAX 网站？

对于静态网站，只需将格式正确的 robots.txt 和 sitemap.xml 文件上传到您的根路径。

# opengl - 如何在 OpenGL 3.0+ 中从模型空间移动到正交视图？

> ID：12800239
> 
> 赞同：0
> 
> 时间：2012-10-09T12:38:45.753
> 
> 标签：opengl, matrix, orthographic

我最近在 OpenGL 中完成了一些示例，这导致我在空间中绘制了一些三角形`-1 >= x <= 1`，`-1 >= y <= 1`. 我需要做什么才能移动到正交视图？我需要执行哪些转换？我假设生成的变换将作为统一变量设置到顶点着色器中，然后应用于任何传入的顶点。

使用像素作为视图的比例（即 1024x768）还是使用逻辑单位（例如像素 x1000）是否明智？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:04:36.663

> 我需要做什么才能移动到正交视图？我需要执行哪些转换？

您必须应用正交投影。请注意，到目前为止您使用的恒等变换已经是正交的。

将转换过程分解为投影和模型视图转换是一个好主意。每个都由一个 4×4 矩阵描述，你说得对，它作为制服传递给顶点着色器。

典型的顶点着色器布局看起来像

```
#version 120 /* or something later */

attribute vec4 position;

uniform mat4 proj;
uniform mat4 mv;

varying vec4 vert_pos; // for later versions of GLSL replace 'varying' with 'out'

void main()
{
    // order matters, matrix multiplication is not 
    vert_pos = proj * mv * position; commutative */
} 
```

投影矩阵本身必须由您提供。您可以查看较旧的固定功能 OpenGL 规范，了解它们是如何实现的。或者您使用一些现成的图形数学库，例如[→GLM](http://glm.g-truc.net/)或（自我广告）[→linmath.h](https://github.com/datenwolf/linmath.h)

### 因评论而更新

*模型视图*变换用于设置视点和绘制到场景中的几何图形的位置。一般来说，模型视图通常因绘制的每个模型而异。Modelview 本身可以分解为模型和视图。该视图是某些人使用某种“lookAt”功能设置的。模型是几何放置部分。

投影是 OpenGL 的“镜头”，负责“正交”或“透视”或任何外观。

*如上所述，要使用的特定投影是用户定义的，但通常遵循典型的转换矩阵，如旧 OpenGL 规范或图形数学库中的转换矩阵。*只需查看一些较旧的 OpenGL 规范（比如 OpenGL-1.5 左右）来定义*正交*和*截锥*矩阵（它们可以在固定函数 glOrtho 和 glFrustum 中找到）。

# .net - 对特定方法的所有可能调用

> ID：12800241
> 
> 赞同：0
> 
> 时间：2012-10-09T12:38:49.513
> 
> 标签：.net, winforms, c#-4.0

我有一个在 c# 中通过复选框处理 Checked Event 的方法，现在我想知道从我的系统对该方法的所有可能调用/调用。

注意：我试过在这个方法的第一行设置一个断点，但是用这种方法我必须像猴子测试一样做（按下所有按钮，复选框，......）

除注明的解决方案之外的任何可能的解决方案。

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:50:50.020

在 Visual Studio 中：将光标放在方法名称上并按 Shift + F12（或右键单击并选择“查找用法”）。

# ssis - SSIS 2005 包，长期生产，成功但文件写了一半

> ID：12800244
> 
> 赞同：1
> 
> 时间：2012-10-09T12:39:06.483
> 
> 标签：ssis

我有一个 SQL Server 2005 标准计划作业，该作业已投入生产多年，它使用 dtsx 文件执行 SSIS 2005 包。该包从单个表中创建一个文本文件导出。

昨晚作业顺利进行，用平时的时间完成；但是，生成的文件只有 4 MB，而不是通常的 130 MB。重新运行时，会生成完整的文件。什么可能导致文件停止写入中间进程？

# google-chrome - 选择，空选项选择，Chrome 与 Firefox 的区别

> ID：12800247
> 
> 赞同：2
> 
> 时间：2012-10-09T12:39:10.983
> 
> 标签：google-chrome, select, null, default

代码在下面和[http://jsfiddle.net/eCubeH/utBEs/1/](http://jsfiddle.net/eCubeH/utBEs/1/)

选择是必需的。因此，选择第一个空字符串值选项应该使其无效。

我使用 jquery 条件： ($(myChangeSelector + ":invalid").length > 0) 来识别无效状态。Firefox 15 正确返回值 1 以表明它是无效的。Chrome 21 返回 0，然后继续表现不一致。

对此我感到头疼，这是 Chrome 错误还是我缺少的东西？

- - - 编码 - - -

```
<select id="selDisbLocation" required="" tabindex="3">
    <option value="" >-</option>
    <option value="0" selected>Center</option>
    <option value="1" >Office</option>
</select>​

$(function() {
    $("select").live(
    "change",
    function(event) {
       myChangeSelector = "#" + event.target.id;
       alert(myChangeSelector);
       alert($(myChangeSelector).val());
       alert("Invalid Length: " + $(myChangeSelector + ":invalid").length);
    });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:49:55.523

根据[https://developer.mozilla.org/en-US/docs/CSS/:invalid](https://developer.mozilla.org/en-US/docs/CSS/:invalid)，CSS 伪类`:invalid`仅适用于`<input>`和`<form>`元素。这可能是您意外结果的原因。

我建议`<select>`改为使按值或索引无效。

# windows-8 - 对 Windows 8 Metro 应用程序的身份验证

> ID：12800249
> 
> 赞同：2
> 
> 时间：2012-10-09T12:39:33.930
> 
> 标签：windows-8

我正在寻找通过 Kerberos 或第三方系统（如 LDAP）对我的 Metro App 进行身份验证的方法。有没有办法做到这一点？为了概述我的应用程序需要什么，我的 Windows 8 系统已使用 LDAP 注册。因此，LDAP 用户能够登录系统。但现在我希望该特定用户在访问我的 Metro 应用程序时不会遇到任何挑战。休息任何未经授权的用户都应该接受挑战。这可以通过网站和共享点服务器上的 Kerberos 实现，但我不知道如何在我的 Metro 应用程序中使用此功能。

# c# - 使用并行查找素数

> ID：12800252
> 
> 赞同：3
> 
> 时间：2012-10-09T12:39:37.627
> 
> 标签：c#, math, parallel-processing, primes

因此，我创建了以下方法来查找不超过某个数字的所有素数。关于如何加快速度的任何建议？

# 我这样称呼它；

```
interval = (value + NOOFTHREADS - 1) / NOOFTHREADS;
int max = interval * NOOFTHREADS;

tickets = new List<int>(NOOFTHREADS);
for (int i = 1; i <= NOOFTHREADS; i++)
{
    tickets.Add(i * (max / NOOFTHREADS));
}

Enumerable.Range(1, NOOFTHREADS)
.AsParallel()
.ForAll(_ => findPrimes()); 
```

* * *

# 带有一些全局变量；

```
static List<int> vals = new List<int>();
static List<int> tickets;
static int interval = new int(); 
```

* * *

# 以及方法；

```
public static void findPrimes()
    {
        int myTicket;
        lock (tickets)
        {
            myTicket = (int)tickets.Last();
            tickets.RemoveAt(tickets.Count - 1);
        }
        var max = myTicket;
        int min = max - interval +1;
        int num;

        var maxSquareRoot = Math.Sqrt(max);
        var eliminated = new System.Collections.BitArray(max + 1);
        eliminated[0] = true;
        eliminated[1] = true;
        for (int i = 2; i < (max) / 2; i++)
        {
            if (!eliminated[i])
            {
                if (i < maxSquareRoot)
                {
                    num = ((min + i -1 )/i)*i;

                    if (num == i)
                        num = num + i;

                    for (int j =num; j <= max; j += i)
                        eliminated[j] = true;
                }
            }
        }
        for (int b = (int)min; b < max; b++)
        {
            if (!eliminated[b])
                lock(vals)
                    vals.Add(b);
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:08:48.597

Eratosthenes 的筛子可以很容易地并行化，您只需将其分成单独的块并单独筛选每个块。你已经开始了分裂，但还没有走得足够远以获得好的结果。让我们看看有什么问题`findPrimes()`

```
var max = myTicket;
int min = max - interval +1;
int num;

var maxSquareRoot = Math.Sqrt(max);
var eliminated = new System.Collections.BitArray(max + 1); 
```

您为每个线程创建一个新`BitArray`线程，涵盖从 0 到 的所有数字`max`。对于筛选第一个块的线程来说，这很好，但对于后面的线程，您分配的内存比需要的多得多。使用较高的上限和许多线程，这本身就是一个问题，您`(NOOFTHREADS + 1) * limit / 2`在只`limit`需要大约位的地方大致分配了位。对于更少的线程和/或更低的限制，您仍然会恶化局部性并且会有更多的缓存未命中。

```
eliminated[0] = true;
eliminated[1] = true;
for (int i = 2; i < (max) / 2; i++) 
```

您应该在`i > maxSquareRoot`. 然后循环体不再做任何有成效的事情，它只执行一次读取和一两次检查。每次迭代都不需要很长时间，但是如果是例如 10 ^(11)`i` ，那么对于所有from `√max`to`max`加起来都会这样做。仅对最后一个块执行此操作可能比单线程单块筛子花费更长的时间。`max`

```
{
    if (!eliminated[i]) 
```

`eliminated[i]`只能适用于`i >= min`(or `i < 2`)，这种情况只会在第一个块中遇到`i <= maxSquareRoot`（除非限制非常低）。所以对于其他块，你也消除了 4, 6, 8, 9, 10, 12, 14, ... 的倍数。很多浪费的工作。

```
 {
        if (i < maxSquareRoot) 
```

在`maxSquareRoot`恰好是素数的情况下，您没有消除它的平方，比较应该是`<=`。

```
 {
            num = ((min + i -1 )/i)*i;

            if (num == i)
                num = num + i;

            for (int j =num; j <= max; j += i)
                eliminated[j] = true;
        }
    }
} 
```

现在，当筛分完成后，你一步一步穿过大块的`BitArray`

```
for (int b = (int)min; b < max; b++)
{
    if (!eliminated[b])
        lock(vals)
            vals.Add(b);
} 
```

每当你找到一个素数时，你就会锁定列表`vals`并将素数添加到其中。如果有两个或更多线程几乎同时完成筛分，它们将在那里相互踩踏，锁定和等待将进一步减慢该过程。

为了减少空间使用，每个线程应该创建一个素数列表`maxSquareRoot`，并使用它来消除其块中的复合，以便`BitArray`只需要`max - min + 1`位。每个创建自己的列表的线程都会重复一些工作，但由于这里的上限很小，所以额外的工作并不多。我不知道如何处理并发读取访问，如果这不增加同步开销，您也可以只为所有线程使用一个列表，但我怀疑这会有所收获。

代码大致如下：

```
List<int> sievePrimes = simpleSieve(maxSquareRoot);
// simpleSieve is a standard SoE returning a list of primes not exceeding its argument
var sieve = new System.Collections.BitArray(max - min + 1);
int minSquareRoot = (int)Math.Sqrt(min);
foreach(int p in sievePrimes)
{
    int num = p > minSquareRoot ? p*p : ((min + p - 1)/p)*p;
    num -= min;
    for(; num <= max-min; num += p)
    {
        sieve[num] =true;
    }
} 
```

现在，为了避免在将素数添加到列表时线程互相踩到脚趾，每个线程都应该创建自己的素数列表并在一个步骤中附加它（我不能 100% 确定这比添加每个素数更快它自己的锁，但如果不是我会感到惊讶）

```
List<int> primes = new List<int>();
for(int offset = 0; offset <= max-min; ++offset)
{
    if (!sieve[offset])
    {
        primes.Add(min + offset);
    }
}
lock(vals) vals.AddRange(primes); 
```

（并且`vals`应该以大约预期素数数量的初始容量创建，以避免重新分配每个块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:55:35.557

是否有理由实施该教科书数学可读平方根算法？看看[素数算法](https://stackoverflow.com/questions/4809051/prime-number-algorithm?answertab=votes#tab-top)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:23:13.587

已经有很多关于并行代码与串行代码性能的文档。Microsoft 建议您在将代码转换为使用并行架构之前阅读他们关于使用并行功能的文档。

考虑阅读此处发布的以下 Q/AI：

[嵌套的 Parallel.ForEach 循环](https://stackoverflow.com/questions/12618338/nested-parallel-foreach-loops)

[.NET 中的性能分析](https://stackoverflow.com/questions/12629032/performance-profiling-in-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:39:25.863

我认为你所有的锁都可能有问题，你应该尽量避免使用锁，它们非常昂贵。我不知道你算法的细节，但我认为你应该尝试以某种方式移除锁。票可以输入吗？他们可以有自己的输出队列，当所有完成后合并？

# c++ - C11/C++11 内存模型

> ID：12800255
> 
> 赞同：10
> 
> 时间：2012-10-09T12:39:47.903
> 
> 标签：c++, gcc, c++11, memory-model, c11

我有两个问题：

1.  我想知道 C++11 和 C11 的标准是否会共享*相同*的内存模型规范。我读到是这样，事实上 C11 正在“继承”C++11 内存模型（无论出于何种历史原因，后者要么首先发生，要么同时发生/与同一个人发生，尽管我认为 Boehm，他是主要是 C++ 的家伙，有很多话要说。），但我想确保问一个更有知识的人。

2.  我的下一个问题是：GCC 会实现这个内存模型吗？我还没有看到这方面的路线图，并且想知道是否有人有“独家新闻”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T12:59:39.507

1.  内存模型是为 C++11 开发的，并被 C11 采用。Lawrence Crowl 做了很多工作来确保原子操作的接口尽可能接近。有很多人参与其中，但你是对的，Hans Boehm 就是其中之一。

2.  GCC 当前（4.7）实现了内存模型的合理近似。当然足够接近，大多数程序都无法区分。我相当肯定他们的计划完全符合，但不知道时间表，因为我没有参与。

# android - 如何限制动态编辑文本的输入时间？

> ID：12800256
> 
> 赞同：0
> 
> 时间：2012-10-09T12:39:47.080
> 
> 标签：android, android-widget

我必须允许用户在即时编辑文本中以##.## 格式输入时间，有什么方法可以实现吗？我使用了下面的代码，但它没有达到目的：

```
edit.setInputType(InputType.TYPE_DATETIME_VARIATION_TIME) 
```

但这允许一些字母也可以输入，它也允许像 67:344444 这样的值...我只需要 12:59(max) 格式，这意味着可以输入冒号最大值之前是 12，冒号之后最大值可以是59..不止于此。

如何实现？

注意：我不会使用 TimePicker 类，因为这里的要求是使用编辑文本并允许用户输入值作为时间。

请建议我实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:54:50.813

用于`InputFilter`控制用户输入：

```
 EditText editText;
    editText.setFilters(new InputFilter[] { new InputFilter() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            // here you can evaluate user input if it's correct or not
        }
    } }); 
```

这是可能的`filter`方法实现，但**未经测试**：

```
 if (source.length() == 0) {
                return null;//deleting, keep original editing
            }
            String result = "";
            result.concat(dest.toString().substring(0, dstart));
            result.concat(source.toString().substring(start, end));
            result.concat(dest.toString().substring(dend, dest.length()));

            if (result.length() > 5) {
                return "";// do not allow this edit
            }
            boolean allowEdit = true;
            char c;
            if (result.length() > 0) {
                c = result.charAt(0);
                allowEdit &= (c >= '0' && c <= '2');
            }
            if (result.length() > 1) {
                c = result.charAt(1);
                allowEdit &= (c >= '0' && c <= '9');
            }
            if (result.length() > 2) {
                c = result.charAt(2);
                allowEdit &= (c == ':');
            }
            if (result.length() > 3) {
                c = result.charAt(3);
                allowEdit &= (c >= '0' && c <= '5');
            }
            if (result.length() > 4) {
                c = result.charAt(4);
                allowEdit &= (c >= '0' && c <= '9');
            }
            return allowEdit ? null : ""; 
```

# c# - 我需要确认我对 IQueryable 和 IEnumerable 的理解

> ID：12800257
> 
> 赞同：3
> 
> 时间：2012-10-09T12:39:49.447
> 
> 标签：c#, ienumerable, iqueryable

**IQueryable** 据我了解，在 LINQ to SQL & Object 中，在执行查询之前，我可以添加更多表达式。

在此示例中，当我尝试执行 Query2 时，query1 和 Query2 成为最终查询。我对吗？或者如果“数字”是数据库，我是对的？

```
 int[] Numbers= new int[] { 1, 2, 3, 4 };
    IQueryable<int> Query1 = from X in Numbers.AsQueryable()
                             where X > 1
                             select X;
    IQueryable<int> Query2 = from X in Query1
                             where X > 2
                             select X;
    //if I do this: Query2.Count() -> before it executes this, those two queries become one query (FinalQuery)?
    IQueryable<int> FinalQuery = from X in Query2
                                 where X > 2
                                 select X; 
```

但是，如果我使用 IEnumerable，它会执行 Query1 并获得一个 IEnumerable。然后它会执行 Query2 并获得最终的 IEnumerable？; 它会执行 2 个查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:17:18.920

> 如果我使用 IEnumerable，它会执行 Query1 并获得一个 IEnumerable。那么它将执行 Query2 并获得最终的 IEnumerable？

是的。但它们将被串联执行，每个数字`X`将“流动”通过两个查询。这就是所谓的“惰性评估”或“延迟执行”。

> 它会执行 2 个查询吗？

是的。时间重叠。

> [Using IQueryable] 在它执行之前，这两个查询变成一个查询（FinalQuery）？

不。

`IQueryable<>`与with会发生完全相同的事情`IEnumerable<>`。没有涉及将优化的“智能”组件`where X > 1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:50:18.057

在您尝试实际使用结果之前，IEnumerable 和 IQueryable LINQ 查询都不会执行。它们都只是包含同名扩展方法的类。但它们都很“懒惰”，因为它们返回的是新查询，而不是实际结果。

一般的区别是 IEnumerable 使用 Funcs（本质上是委托）作为查询的底层存储，而 IQueryable 使用表达式树（例如，查询可以“翻译”为 SQL）。

# c# - 如何比较两个xml值并在c#中打印两者之间的差异

> ID：12800258
> 
> 赞同：0
> 
> 时间：2012-10-09T12:39:49.437
> 
> 标签：c#, xml, compare

我想比较两个xml文档。两个文档都有一些相似之处和不同之处。我想分别记下两个文档之间的差异。是否有任何C#函数来区分两个xml文档之间的差异或任何其他方式来做到这一点.请给我一些解决方案。提前致谢

# vb.net - 使用 selenium 网格使用 firefox 运行测试

> ID：12800260
> 
> 赞同：0
> 
> 时间：2012-10-09T12:39:53.070
> 
> 标签：vb.net, testing, selenium-rc, selenium-grid

我有用 vb.net 和 selenium 编写的测试。我配置了硒网格所以我可以使用硒网格一起运行几个dll。使用以下内容不会使会话运行。

```
using selenium.Setup("localhost", 4444, "*chrome C:\Program Files (x86)\Mozilla Firefox\firefox.exe", My.Settings.URL)

It is throwing the following error (TestFixtureSetUp):
SetUp : Selenium.SeleniumException : ERROR: Could not retrieve a new session 
```

我有 3 个可用的 RC，带有 firefox、chrome 和 iexplore 环境。使用 iexplore 可以正常工作，并且可以正常执行测试，但是在使用 firefox 时，它不会检索会话。请指导我在这里做错了什么。

编辑 1：使用 selenium-grid-1.0.8 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:31:11.927

通过将 seleniumProtocol=Selenium 参数传递给命令，修复了上述 makine rc work with grid 的问题

```
 java -jar selenium-server-standalone-2.25.0.jar -role rc -hubHost localhost -browser browserName=*firefox,maxInstances=3,platform=WINDOWS,seleniumProtocol=Selenium 
```

在测试中使用以下

```
selenium.Setup("localhost", 4444, "*firefox", URL) 
```

希望它会帮助某人

# c# - c#未知输入参数类型？

> ID：12800261
> 
> 赞同：2
> 
> 时间：2012-10-09T12:39:53.330
> 
> 标签：c#, generics

我有一个通用功能`static Log<T>(T Log)`。我想检查类型`T`并决定下一步做什么。

这是我到目前为止得到的：

```
public static void Log<T>(T log)
{
    switch (typeof(log))
    { ... }
} 
```

我究竟做错了什么？我的错误是 typeof(log) 不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:04:31.093

```
switch (expression)
{

} 
```

`expression`= 整数或字符串类型表达式（来自 MSDN）

[http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx)

`typeof`关键字都不返回这些。您不能使用`log.GetType()`，因为您需要满足上述`Type`不适合的标准。

为了安全起见，我会将其限制为`if`具有相应类型的语句，因为这将实现相同的目标。

```
static void a<T>(T b)
{
  if (typeof(T) == typeof(B))
    Console.WriteLine("T is B");
  else if(typeof(T) == typeof(C))
    Console.WriteLine("T is C");
} 
```

编辑：

如果你有争论，你有：

```
 public class Vehicle 
  {
    public virtual int MoveVehicle() 
    {
       //Do Logic
       return 0;
    }
  }
  public class Car : Vehicle { } 
```

你想要一个通用的方法来移动 Vehicle 你可以做一些叫做`generic type constraints`

```
static void a<T>(T b) where T : Vehicle
{
    int newPosition = b.MoveVehicle();
} 
```

[http://msdn.microsoft.com/en-us/library/bb384067.aspx](http://msdn.microsoft.com/en-us/library/bb384067.aspx)

T 现在必须是 Vehicle，因此您可以访问 Vehicle 中的方法。您可以将汽车传递给该方法，它仍然可以调用该`MoveVehicle`方法。

```
 a<Vehicle>(new Car()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T12:42:17.977

您需要询问 typeof`T`不是`log`- 并且开关必须在原始类型（或 a `string`）上，因此请查看类型`Name`或可能`FullName`

`switch(typeof(T).Name){...}`

您还可以调用`GetType`以下实例`T`：

`switch(log.GetType().Name){...}`

两者都会产生相同的结果

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T12:42:31.983

使用`GetType`功能

```
 switch(log.GetType().ToString()) {....} 
```

安装的 `typeof().`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:12:07.273

## 解决方案

您不能对 a 进行开关`System.Type`，也不能`typeof`对变量进行 a。你可以做的是：

```
static Dictionary<Type, TypeEnum> Types = new Dictionary<Type, TypeEnum>() { { typeof(TypeA), TypeEnum.TypeA } }; // Fill with more key-value pairs

enum TypeEnum
{
    TypeA
    // Fill with types
}

public static void Log<T>(T log)
{
    TypeEnum type;
    if (Types.TryGetValue(typeof(T), out type)) {
        switch (type)
        { ... }
    }
} 
```

这也是我所知道的最快的解决方案。字典查找非常快。您也可以使用`System.String`( via `Type.Name`or `Type.FullName`) 执行此操作，但它会更慢，因为`Equals`( sure ) 和 for `GetHashCode`( 取决于它们的实现) 的字符串方法更慢。

当您改用 String 时，编译器在使用 String 上的 switch 时所做的相同。

```
switch(typeof(T).FullName) // Converted into a dictionary lookup
{ ... } 
```

## 更多想法

根据您要归档的内容，您应该知道您也可以使用约束：

```
public interface ILogItem
{
    String GetLogData();
    LogType LogType { get; }
}

public void Log<T>(T item) 
    where T : ILogItem
{
    Debug.WriteLine(item.GetLogData());
    // Read more data
    switch (item.LogType)
    { ... }
} 
```

# .net - C++/CLI：公开模板类型

> ID：12800262
> 
> 赞同：2
> 
> 时间：2012-10-09T12:39:58.937
> 
> 标签：.net, c++-cli, managed

AFAIK`#pragma make_public`仅支持本机非模板类型。

但是，还有其他方法可以将模板类型设为公开吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:07:54.243

不，但请阅读此处了解一些解决方法：

*   [编译器错误 C2158 的最佳解决方法：make_public 不支持本机模板类型](https://stackoverflow.com/questions/4121249/best-workaround-for-compiler-error-c2158-make-public-does-not-support-native-te)

*   [http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/b43cca63-b0bf-451e-b8fe-74e9c618b8c4/](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/b43cca63-b0bf-451e-b8fe-74e9c618b8c4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:25:50.210

模板没有外部链接。不在本机 C++ 中，也不在 C++/CLI 中。你用同样的方法解决它，把它们放在一个 .h 头文件中，然后在你想使用模板的任何源文件中#include 。它们当然不适用于任何其他不是用 C++/CLI 编写的托管代码。

支持C++/CLI 中的**generic关键字，托管代码中的泛型***确实*具有外部链接的等价物。

# c# - 消息框显示多次

> ID：12800266
> 
> 赞同：3
> 
> 时间：2012-10-09T12:40:13.597
> 
> 标签：c#, wpf, kinect, messagebox, gestures

我正在使用 Kinect 开发使用 C# 和 WPF 的图像查看应用程序。当用户将双手举过头顶时，我会显示`Messagebox`询问用户他/她是否真的想退出：

```
 //Quit if both hands above head
    if (skeleton.Joints[JointType.HandLeft].Position.Y > skeleton.Joints[JointType.Head].Position.Y &&
        skeleton.Joints[JointType.HandRight].Position.Y > skeleton.Joints[JointType.Head].Position.Y)
    {
        pause = true;
        quit();
    } 
```

`quit()`功能如下：

```
 private void quit()
    {
        MessageBoxButton button = MessageBoxButton.YesNo;
        MessageBoxImage image = MessageBoxImage.Warning;
        MessageBoxResult result = MessageBox.Show("Are you sure you want to quit?", "Close V'Me :(", button, image);
        if (result == MessageBoxResult.Yes) window.Close();
        else if (result == MessageBoxResult.No)
        {
            pause = false;
        }

    } 
```

该`pause`变量用于在`MessageBox`仍处于活动状态时停止识别任何手势。（`pause`=`false`表示手势识别激活，否则没有。）

所以有两个问题：

1.  显示`MessageBox`两次。如果我单击`Yes`其中任何一个，则`window`关闭。行为还可以，但我不想要两个窗口。

2.  如果我单击`No`，`MessageBox`则会显示另一个。如果我单击`No`此框，则会打开另一个框。`No`这发生在我点击的每一个连续的地方。在大约显示 5-6 次后，它给了我想要的行为，即，它将`pause`变量的值更改为`false`，从而激活对其他手势的识别。

我到底做错了什么？我该怎么做才能停止一切并等待用户单击其中一个选项？另外为什么`MessageBox`显示多次（最初是两次，单击 时更多`No`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:48:34.277

如果不查看正在调试的代码，很难判断，但我猜测您的第一个代码块正在某种循环或事件处理程序中被调用，该处理程序正在处理最新的 Kinect 数据。

**检查暂停**

尝试在第一段代码上方添加类似这样的内容：

```
if (pause)
   return;

if (skeleton.Joints[JointType.HandLeft].Position.Y > skeleton.Joints[JointType.Head].Position.Y &&
    skeleton.Joints[JointType.HandRight].Position.Y > skeleton.Joints[JointType.Head].Position.Y)
{
    pause = true;
    quit();
} 
```

**超时**

如果这不起作用，您可能需要添加自上次提示用户以来的超时时间。

```
private void quit()
{
    if (DateTime.Now.Subtract(_lastQuitTime).TotalSeconds > 5)
    {

          //Prompt the user

          //Reset the timeout
          _lastQuitTime = DateTime.Now;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:49:35.480

在您的代码中，我看不到任何阻止两次调用 quit 方法的内容。只需在quit方法的开头设置一个全局变量为true，最后再设置为false，并在调用quit之前检查它是否为false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:50:53.467

我在猜测这段代码是如何工作的，但试试这个：

```
//Quit if both hands above head
if (skeleton.Joints[JointType.HandLeft].Position.Y > skeleton.Joints[JointType.Head].Position.Y &&
    skeleton.Joints[JointType.HandRight].Position.Y > skeleton.Joints[JointType.Head].Position.Y &&
    !pause)
{
    pause = true;
    quit();
}
else
{
    pause = false;
}

...

private void quit()
{
    MessageBoxButton button = MessageBoxButton.YesNo;
    MessageBoxImage image = MessageBoxImage.Warning;
    MessageBoxResult result = MessageBox.Show("Are you sure you want to quit?", "Close V'Me :(", button, image);
    if (result == MessageBoxResult.Yes) window.Close();
    else if (result == MessageBoxResult.No)
    {
        pause = false;
    }

} 
```

# cakephp - CakePHP 按数组过滤关联模型

> ID：12800276
> 
> 赞同：0
> 
> 时间：2012-10-09T12:40:43.187
> 
> 标签：cakephp, filtering, containable

我有模型：项目=>关键字

使用 HMBTM 关系（在两个模型中设置）。

关键字表充当树，即。关键字之间具有层次关系。

我正在使用可包含的行为。

用户选择关键字。

我希望返回的记录（项目）受所选关键字或该关键字的任何子项的限制。我正在尝试重用我的索引操作。如果未选择关键字，则呈现标准索引视图，如果选择了关键字，则查找所有子关键字，然后将返回的项目过滤到具有任何关键字 ID 的项目。

我曾尝试创建一组子（和原始）关键字 id，但我无法弄清楚如何让该数组成为我的查找操作中的过滤。

我试过使用：

```
$this->Project->find('all',
    array(
        'contain' => array('Keyword.id'=>array($childkeywords))     
    )
); 
```

其中 $childkeywords 是相关 id 的数组，使用 array_push 创建。但这不使用键值对，只使用每个 id 的 int 值。所以我认为它的结构不正确。

我觉得我想做一些很简单的事情，但感觉我离解决方案越来越远了。是否没有标准方法将记录限制为关联模型的 id 集合？

干杯

在 Paulo 的帮助下，我现在拥有：

```
$this->Project->find('all', array(
                                    'fields' => array('id','title','country', 'project_ref'),
                                    'type' => array('inner'),
                                    'contain' => array('Keyword' => array(
                                                                'conditions' => array('Keyword.id' => $childkeywords)                                               
                                                                            )
                                                    )
                                            )
                                ) 
```

但是使用类型内部并没有改变结果..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:43:42.637

你应该有这样的东西：

```
$this->Project->find('all', array(
    'contain' => array('Keyword' => array(
                'conditions' => array('Keyword.id' => $childkeywords)
            )
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:03:06.447

尝试这样的事情：

```
$this->Project->Keyword->find('all', array(
    'conditions' => array(
        'Keyword.id' => array(1, 2, 3, 4)
    )
)); 
```

在这种情况下，您不需要使用 Containable。

或者您可以尝试[TreeBehavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)。

# php - 将数组保存到数据库 mysql/php

> ID：12800279
> 
> 赞同：1
> 
> 时间：2012-10-09T12:40:56.753
> 
> 标签：php, mysql, database, arrays, save

我有一个由显示的数据库信息生成的表单。用户将能够对此数据进行一些修改，我想将其保存到数据库中，所以我有以下 forw（此代码是生成的）

```
 <form action="#" method="post">

      <input type="hidden" name="liasse" value="liasse_a"/>
      <input type="hidden" name="n_doss" value="120015660001"/>  
<table id="box-table-a" width="100%">
    <tr>
         <th scope="col"><input name="data[0][code_s]" type="text" value="CODE S" size="10" ></th>
         <th scope="col"><input name="data[0][libelle]" type="text" value="LIBELLE" size="30"></th>
          <th scope="col"><input name="data[0][action]" type="text" value="ACTION" size="15"></th>
         <th scope="col"><input name="data[0][libelle]" type="text" value="DESCRIPTION" size="40"></th>
          <th scope="col"><input type="text" name="data[0][date]" value="DATE D'ACTION" size="12"></th>   <th scope="col"><input type="text" name="data[0][date]" value="VALIDATION" size="12"></th>
          <th scope="col"><strong>ETAT</strong></th></tr>

      <tr>
         <td><input name="data[1][code_s]" type="text" value="5F" size="10" style="background-color:#FF0"><input type="hidden" name="data[1][id]" value="667"></td>
         <td><input name="data[1][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style="background-color:#FF0"></td>
         <td><input name="data[1][action]" type="text" value="RELANC1" size="15" style="background-color:#FF0"></td>
         <td><input name="data[1][description]" type="text" value="1ère relance" size="40" style="background-color:#FF0"></td>
         <td>   <input type="date" name="data[1][date]" class="date" id="date1" value="09-10-2012" size="12" style="background-color:#FF0"  readonly="readonly"></td>
 <td nowrap><input type="text" name="data[1][date_validation]" id="data[1][date_validation]" value="Non trait&eacute;" size="12" style="background-color:#FF0"></td>
         <td nowrap><a href="#" onClick="return confirm('Vous ne pouvez pas &eacute;diter ou changer la date d\'une action appartenant à votre passif !')"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=667&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="#" onClick="return confirm('Vous ne pouvez pas supprimer une action appartenant à votre passif !')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[2][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[2][id]" value="668"></td>
         <td><input name="data[2][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[2][action]" type="text" value="RELANC2" size="15" style=""></td>
         <td><input name="data[2][description]" type="text" value="2ème relance" size="40" style=""></td>
         <td>   <input type="date" name="data[2][date]" class="date" id="date2" value="17-10-2012" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[2][date_validation]" id="data[2][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=668&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal">img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=668&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=668&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[3][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[3][id]" value="669"></td>
         <td><input name="data[3][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[3][action]" type="text" value="MINITEL" size="15" style=""></td>
         <td><input name="data[3][description]" type="text" value="recherches CREDITSAFE" size="40" style=""></td>
         <td>   <input type="date" name="data[3][date]" class="date" id="date3" value="12-11-2012" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[3][date_validation]" id="data[3][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=669&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=669&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=669&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[4][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[4][id]" value="670"></td>
         <td><input name="data[4][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[4][action]" type="text" value="MEDLRAR" size="15" style=""></td>
         <td><input name="data[4][description]" type="text" value="mise en demeure LRAR" size="40" style=""></td>
         <td>   <input type="date" name="data[4][date]" class="date" id="date4" value="14-11-2012" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[4][date_validation]" id="data[4][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=670&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=670&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=670&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[5][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[5][id]" value="671"></td>
         <td><input name="data[5][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[5][action]" type="text" value="TRANSAV" size="15" style=""></td>
         <td><input name="data[5][description]" type="text" value="$ Transmission des pièces à l'avocat pour référé" size="40" style=""></td>
         <td>   <input type="date" name="data[5][date]" class="date" id="date5" value="10-12-2012" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[5][date_validation]" id="data[5][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=671&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=671&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=671&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[6][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[6][id]" value="672"></td>
         <td><input name="data[6][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[6][action]" type="text" value="POSITION" size="15" style=""></td>
         <td><input name="data[6][description]" type="text" value="RF procédure de référé en cours" size="40" style=""></td>
         <td>   <input type="date" name="data[6][date]" class="date" id="date6" value="10-12-2012" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[6][date_validation]" id="data[6][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=672&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=672&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=672&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[7][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[7][id]" value="673"></td>
         <td><input name="data[7][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[7][action]" type="text" value="AVOCA186" size="15" style=""></td>
         <td><input name="data[7][description]" type="text" value="Demande de date d'audience" size="40" style=""></td>
         <td>   <input type="date" name="data[7][date]" class="date" id="date7" value="28-12-2012" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[7][date_validation]" id="data[7][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=673&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=673&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=673&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[8][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[8][id]" value="674"></td>
         <td><input name="data[8][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[8][action]" type="text" value="CLI6108" size="15" style=""></td>
         <td><input name="data[8][description]" type="text" value="$ cette affaire sera appelée à l'audience du..." size="40" style=""></td>
         <td>   <input type="date" name="data[8][date]" class="date" id="date8" value="02-01-2013" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[8][date_validation]" id="data[8][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=674&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=674&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=674&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[9][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[9][id]" value="675"></td>
         <td><input name="data[9][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[9][action]" type="text" value="AVOCAT69" size="15" style=""></td>
         <td><input name="data[9][description]" type="text" value="Demande résultat dernière audience" size="40" style=""></td>
         <td>   <input type="date" name="data[9][date]" class="date" id="date9" value="28-01-2013" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[9][date_validation]" id="data[9][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=675&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=675&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=675&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[10][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[10][id]" value="676"></td>
         <td><input name="data[10][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[10][action]" type="text" value="CLIEN117" size="15" style=""></td>
         <td><input name="data[10][description]" type="text" value="Ordonnance de référé rendue en votre faveur" size="40" style=""></td>
         <td>   <input type="date" name="data[10][date]" class="date" id="date10" value="18-02-2013" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[10][date_validation]" id="data[10][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=676&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=676&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=676&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[11][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[11][id]" value="677"></td>
         <td><input name="data[11][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[11][action]" type="text" value="DEB6000" size="15" style=""></td>
         <td><input name="data[11][description]" type="text" value="$ Avons ordonnance de référé, menace d'exécution forcée si pas de règlement" size="40" style=""></td>
         <td>   <input type="date" name="data[11][date]" class="date" id="date11" value="08-03-2013" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[11][date_validation]" id="data[11][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=677&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=677&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=677&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  <tr>
         <td><input name="data[12][code_s]" type="text" value="5F" size="10" style=""><input type="hidden" name="data[12][id]" value="678"></td>
         <td><input name="data[12][libelle]" type="text" value="FRAIS A NOTRE CHARGE: référé" size="30" style=""></td>
         <td><input name="data[12][action]" type="text" value="SCENARIO" size="15" style=""></td>
         <td><input name="data[12][description]" type="text" value="EXF CHAINAGE VERS SCENARIO EXECUTION FORCEE " size="40" style=""></td>
         <td>   <input type="date" name="data[12][date]" class="date" id="date12" value="28-03-2013" size="12"  required="true" ></td>
 <td nowrap><input type="text" name="data[12][date_validation]" id="data[12][date_validation]" value="Non trait&eacute;" size="12" style=""></td>
         <td nowrap><a href="edit-action.php?id=678&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/gtk-edit.png" width="24" height="24"></a> <a href="validate-action.php?id=678&n_doss=120015660001&liasse=liasse_a&qualite=Débiteur Principal"><img src="images/go.gif" width="24" height="24"></a> <a href="delete-action.php?id=678&n_doss=120015660001&liasse=liasse_a" onClick="return confirm('voulez vous vraiment supprimer cette action ?')"><img src="images/trash-paper.png" width="24" height="24"></a></td>
    </tr>

  </td></tr></table>     

   <p align="center"><input type="submit" name="enreg" value="ENREGISTRER LES MODIFICATIONS &Eacute;FFECTU&Eacute;ES"></p>
  </form> 
```

我现在想做的是将此表保存到我的数据库中，实际上我只是想更新数据，所以我编写了以下代码：

```
<?php if(isset($_POST['enreg'])) { 
var_dump($_POST['data']) ;

$value = $_POST['data'] ; 

foreach($value as $key => $array)
{

        $sql = 'UPDATE agenda SET
        liasse = "'.mysql_real_escape_string($_GET['liasse']).'",
        code_s = "'.mysql_real_escape_string($array['code_s']).'",
        date_action = "'.date('Y-m-d',strtotime($array['date'])).'", 
        libelle = "'.mysql_real_escape_string($array['libelle']).'",
        action = "'.mysql_real_escape_string($array['action']).'",
        description = "'.mysql_real_escape_string($array['description']).'",
        n_doss = "'.mysql_real_escape_string($_GET['n_doss']).'",
        qualite = "'.mysql_real_escape_string($_GET['qualite']).'"
        WHERE id ="'.mysql_real_escape_string($array['id']).'"';
mysql_query($sql) or die(__LINE__.mysql_error().$sql);

}
echo "<div class=\"success\">Les modifications sont bien enregistr&eacute;es, vous pouvez poursuivre vos actions.</div>";
}?> 
```

var_dump 确实显示了这个结果：

```
1 => 
    array (size=7)
      'code_s' => string '5F' (length=2)
      'id' => string '667' (length=3)
      'libelle' => string 'FRAIS A NOTRE CHARGE: référé' (length=28)
      'action' => string 'RELANC1' (length=7)
      'description' => string '1ère relance' (length=12)
      'date' => string '09-10-2012' (length=10)
      'date_validation' => string 'Non traité' (length=10)
  2 => 
    array (size=7)
      'code_s' => string '5F' (length=2)
      'id' => string '668' (length=3)
      'libelle' => string 'FRAIS A NOTRE CHARGE: référé' (length=28)
      'action' => string 'RELANC2' (length=7)
      'description' => string '2ème relance' (length=12)
      'date' => string '17-10-2012' (length=10)
      'date_validation' => string 'Non traité' (length=10)
  3 => 
    array (size=7)
      'code_s' => string '5F' (length=2)
      'id' => string '669' (length=3)
      'libelle' => string 'FRAIS A NOTRE CHARGE: référé' (length=28)
      'action' => string 'MINITEL' (length=7)
      'description' => string 'recherches CREDITSAFE' (length=21)
      'date' => string '12-11-2012' (length=10)
      'date_validation' => string 'Non traité' (length=10)
  4 => 
```

等等。

现在，当我尝试保存它时，它会向我显示以下错误：

( ! ) 注意：未定义索引：第 237 行 C:\wamp\www\GESTION\edit_scenario.php 中的描述此行指的是：

```
description = "'.mysql_real_escape_string($array['description']).'", 
```

接下来：

注意：未定义索引：第 240 行 C:\wamp\www\GESTION\edit_scenario.php 中的 id

此行指的是：

```
WHERE id ="'.mysql_real_escape_string($array['id']).'"'; 
```

我真的不知道那里发生了什么，我所有的变量都被声明了。

任何形式的帮助或建议将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:51:12.777

您应该正确调用数组中的值。在数字上，您可以看到您有一个迭代器。

```
echo $array[0]['description'] 
```

或者

```
foreach ($array as $out) {
  echo $out['description];
} 
```

要将一些数据放入数据库，您可以序列化数组或对象并将序列化的字符串放入数据库字段。

```
serialize($array); 
```

[php.net 序列化](http://php.net/manual/en/function.serialize.php)

# c# - 使用 NAudio 播放自定义文件格式

> ID：12800282
> 
> 赞同：2
> 
> 时间：2012-10-09T12:41:16.713
> 
> 标签：c#, audio, naudio

我只是想尝试播放不同格式的音频文件。是否可以这样做，或者使用其他编解码器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:05:23.160

NAudio 可以通过使用`WaveFormatConversionStream`. 您需要自己弄清楚`WaveFormat`ACM 期望的结构，尽管 NAudio 确实为您提供了一些常见的 WaveFormat，例如 Mu 和 A-law。使用 NAudioDemo 应用程序检查系统上的 ACM 编解码器以及它们支持的 WaveFormats。

你还提到了ogg。Ogg 不支持开箱即用，但 Yuval Naveh 已在其[PracticeSharp](http://code.google.com/p/practicesharp/)应用程序中实现了对 NAudio 的 Ogg 支持。[请参阅此处](http://code.google.com/p/practicesharp/source/browse/#svn/trunk/NAudioOggVorbis)的代码。

# java - 将控制台数据写入文件并在新框架上显示相同的文件

> ID：12800283
> 
> 赞同：0
> 
> 时间：2012-10-09T12:41:17.330
> 
> 标签：java, swing, file, awt, jtextarea

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) throws IOException
{
String[] arg;
Runtime rt = Runtime.getRuntime();
System.out.println ("Connecting to router");
System.out.println(n1);
System.out.println(n2); 
jButton2.setText("Connecting");

File file = new File("out1.txt");
BufferedReader reader = null;

try

{
JSch jsch=new JSch();
String host=null;
String user= "pritam";
host = "172.16.12.1";
Session session=jsch.getSession(user, host, 22);
session.setPassword("passwrd");

ByteArrayInputStream bi = new ByteArrayInputStream("ssh -c ?\n".getBytes());                         
session.setUserInfo(ui);
session.connect(30000);   // making a connection with timeout.
Channel channel=session.openChannel("shell");                    
channel.setInputStream(bi);
channel.connect(3*1000);                          
// Saving the orginal stream
orgStream = System.out;
fileStream = new PrintStream(new FileOutputStream("out1.txt",true));     
// Redirecting console output to file
System.setOut(fileStream);
// Redirecting runtime exceptions to file
channel.setOutputStream(System.out);
System.setErr(fileStream);

String storeAllString = "";
JFrame frame= new JFrame(" Security Features");
frame.setSize(550,600);
frame.setVisible(true);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel panel=new JPanel();

JTextArea jt= new JTextArea(50,50);
JTextArea textArea=new JTextArea(storeAllString);
textArea.setLineWrap(true);
frame.add(panel);
panel.add(jt);                         
JScrollPane scrollBarForTextArea=new   JScrollPane(textArea,JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
frame.add(scrollBarForTextArea);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(500,500);
frame.setLocationRelativeTo(null);
frame.setVisible(true);

jt.setEditable(false);

String filePath = "/home/balki/Desktop/Desktop files/ScanModule/out1.txt";

BufferedReader r = new BufferedReader( new FileReader( filePath ) );

String line = r.readLine();

while ( line!=null )
{
storeAllString += line;
line = r.readLine();
}

r.close();

jt.setText( storeAllString );
jt.setVisible(true);

}

catch(Exception e)
{
  System.out.println(e);
}
}` 
```

我正在尝试将控制台输出重定向到一个文件中，然后获取该文件并将其显示在一个新框架中。输出正在写入文件，但通过 JtextArea 在框架中显示它不起作用..请检查代码并帮助我出去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:56:15.937

我猜想使用 PrintStream 将输出都重定向到 textarea 和 FileOutputStream，这应该可以。这是一个可以帮助您入门的片段（但我尚未对其进行测试）：

```
 final FileOutputStream fos = new FileOutputStream("/home/balki/Desktop/Desktop files/ScanModule/out1.txt");
    final JTextArea textArea = new JTextArea();
    final PrintStream ps = new PrintStream(fos) {

        private Formatter formatter;

        @Override
        public void write(int b) {
            textArea.append(String.valueOf((char) b));
            super.write(b);
        }

        @Override
        public void write(byte[] buf, int off, int len) {
            textArea.append(new String(buf, off, len));
            super.write(buf, off, len);
        }

        @Override
        public void print(boolean b) {
            textArea.append(String.valueOf(b));
            super.print(b);
        }

        @Override
        public void print(char c) {
            textArea.append(String.valueOf(c));
            super.print(c);
        }

        @Override
        public void print(int i) {
            textArea.append(String.valueOf((char) i));
            super.print(i);
        }

        @Override
        public void print(long l) {
            textArea.append(String.valueOf(l));
            super.print(l);
        }

        @Override
        public void print(float f) {
            textArea.append(String.valueOf(f));
            super.print(f);
        }

        @Override
        public void print(double d) {
            textArea.append(String.valueOf(d));
            super.print(d);
        }

        @Override
        public void print(char[] s) {
            textArea.append(new String(s));
            super.print(s);
        }

        @Override
        public void print(String s) {
            textArea.append(s);
            super.print(s);
        }

        @Override
        public void print(Object obj) {
            textArea.append(String.valueOf(obj));
            super.print(obj);
        }

        @Override
        public void println() {
            textArea.append(System.getProperty("line.separator"));
            super.println();
        }

        @Override
        public void println(boolean x) {
            print(x);
            println();
        }

        @Override
        public void println(char x) {
            print(x);
            println();
        }

        @Override
        public void println(int x) {
            print(x);
            println();
        }

        @Override
        public void println(long x) {
            print(x);
            println();
        }

        @Override
        public void println(float x) {
            print(x);
            println();
        }

        @Override
        public void println(double x) {
            print(x);
            println();
        }

        @Override
        public void println(char[] x) {
            print(x);
            println();
        }

        @Override
        public void println(String x) {
            print(x);
            println();
        }

        @Override
        public void println(Object x) {
            print(x);
            println();
        }

        @Override
        public PrintStream printf(Locale l, String format, Object... args) {
            // TODO Auto-generated method stub
            return super.printf(l, format, args);
        }

        @Override
        public PrintStream format(String format, Object... args) {
            synchronized (this) {
                if (formatter == null || formatter.locale() != Locale.getDefault()) {
                    formatter = new Formatter((Appendable) textArea);
                }
                formatter.format(Locale.getDefault(), format, args);
            }
            return super.format(format, args);
        }

        @Override
        public PrintStream format(Locale l, String format, Object... args) {
            synchronized (this) {
                if (formatter == null || formatter.locale() != l) {
                    formatter = new Formatter((Appendable) textArea, l);
                }
                formatter.format(l, format, args);
            }
            return super.format(l, format, args);
        }

        @Override
        public PrintStream append(CharSequence csq, int start, int end) {
            CharSequence cs = csq == null ? "null" : csq;
            textArea.append(cs.subSequence(start, end).toString());
            return super.append(csq, start, end);
        }

    }; 
```

另外不要忘记将您的代码移动到另一个线程！

# .net - 如何在 ASP.NET MVC 2 请求中使用异步委托？

> ID：12800285
> 
> 赞同：0
> 
> 时间：2012-10-09T12:41:27.757
> 
> 标签：.net, asp.net-mvc-2, asynchronous, delegates

我需要在异步模式下执行一个方法。我尝试创建一个委托，但请求完成后会话被销毁。此功能需要在此之后继续运行，才能使用`System.Web.HttpContext.Current.Session`。

是否有一种解决方法允许异步运行的方法在请求完成后继续执行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:56:50.163

您可以使用委托（例如 with `ThreadPool.QueueUserWorkItem`），但您需要获取对`HttpSessionStateBase`委托外部的引用：

```
HttpSessionStateBase session = Session;

ThreadPool.QueueUserWorkItem(delegate
{
    // You can access session variable here
    ...
}); 
```

在您持有参考之前，会话不会被销毁。这里有一个简单的示例：[Reporting server side operation progress with jQuery UI Progressbar](http://tpeczek.blogspot.co.uk/2010/07/reporting-server-side-operation.html)。

# vba - 如何从数据库中的 Excel 中显示°C 符号？

> ID：12800288
> 
> 赞同：1
> 
> 时间：2012-10-09T12:41:42.157
> 
> 标签：vba, excel, visual-studio-macros

我正在使用一个excel文件，它的单元格包含°C符号和其他字符串（例如.. -40°C）

我正在尝试使用该单元格的值

```
 Dim strIn As String
    strIn = Range("B2").Text 
```

一切正常，strIn 的值为“-40°C”，但一旦我更改了我的区域设置，如下所示..

![区域设置](../Images/741b5126186b7f5bc4a46722ce0b11d2.png)

它开始将 strIn 值显示为“-40?c”

![调试模式](../Images/d2cf5f087a1f187d29460fb4e1902cc8.png)

0° 符号更改为 ??

在此先感谢您的帮助.. Liyo Jose。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:40:19.837

这是 VBA IDE 中的一个限制。它总共只能显示 255 个不同的字符（其中一些不可打印）。这将是标准 Ansii 的前 128 个字符，然后其余的将由您的区域设置中的代码确定。

VBA 显示？因为它无法显示°（因为°不在您设置的字符代码列表中）。当您浏览其余代码时，它应该完全按照您的预期执行，并正确地将 ° 读取到您的工作表中。

如果要在 VBA 中使用°，则需要使用它的字符代码。根据我的测试，您`Chrw(176)`至少可以在我的计算机上生成它（是的，我确实为您将区域设置更改为泰语）。要检查代码，您可以循环运行它们。现在正如我之前所说，IDE 将显示 ?，但 Excel 将显示 °。

您可以通过在您的代码上运行此测试来确认这一点：

```
debug.print Instr(strIn, "?")
'Should be 0
debug.print Instr(strIn, chrw(176))
'Should be 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:28:08.203

假设您的符号永远不会影响价值，`val`应该为您提供您所追求的数据。

示例数据：

```
文本值（）
40°C 40
40?C 40
40%C 40
40℃ 40

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:45:38.030

一种快速的解决方案是替换“？” 字符串中的符号。像这样的声明

```
strIn = Replace(strIn, "?", "°") 
```

应该能解决你的问题

# hbase - HBase启动master失败（无法连接zookeeper）

> ID：12800290
> 
> 赞同：1
> 
> 时间：2012-10-09T12:41:56.073
> 
> 标签：hbase

我在本地机器上使用 hbase 并在独立模式下运行它（所以不是分布式或伪 d. 模式）但是当我在几秒钟后尝试启动 hbase 时崩溃，因为它无法正确启动 zookeeper。

我下载了这个版本的 hbase：[hbase](http://it.apache.contactlab.it/hbase/stable/) 做了 untar 并从 ./start-hbase.sh 开始（在配置之后）

这是日志：[log hbase](http://pastebin.com/2XendXwm)

然后在**hbase-site.xml**我有：

```
<configuration>

<property>
    <name>hbase.rootdir</name>
    <value>file:///home/raff0z/Scaricati/hbase/hbDATA/</value>
</property>

</configuration> 
```

在**hbase-env.sh**中有：

```
export HBASE_MANAGES_ZK=true 
```

# jquery - Twitter Bootstrap - 多个按钮组列表子菜单问题

> ID：12800293
> 
> 赞同：0
> 
> 时间：2012-10-09T12:42:04.840
> 
> 标签：jquery, twitter-bootstrap

我正在玩我购买的管理主题，但下拉列表有问题

这是有问题的代码：

```
 <div id="user-nav" class="navbar navbar-inverse">
     <ul class="nav btn-toolbar">
        <li class="btn btn-inverse dropdown" id="menu-accounts"><a href="#" data-toggle="dropdown" data-target="#menu-accounts" class="dropdown-toggle"><i class="icon icon-user"></i> <span class="text">Accounts</span> <b class="caret"></b></a>
           <ul class="dropdown-menu">
              <li><a class="sFindAccount" title="" href="#">Find Account</a></li>
              <li><div class="divider"></div></li>
              <li><a class="sNewAccount" title="" href="#">New Account</a></li>
           </ul>
        </li>
        <li class="btn btn-inverse dropdown" id="menu-services"><a href="#" data-toggle="dropdown" data-target="#menu-services" class="dropdown-toggle"><i class="icon icon-th-list"></i> <span class="text">Services</span> <b class="caret"></b></a>
           <ul class="dropdown-menu">
              <li><a class="sFindService" title="" href="#">Find Service</a></li>
              <li><a class="sNewService" title="" href="#">New Service</a></li>
           </ul>
        </li>
        <li class="btn btn-inverse"><a title="" href="#"><i class="icon icon-cog"></i> <span class="text">Settings</span></a></li>
        <li class="btn btn-inverse"><a title="" href="login.html"><i class="icon icon-share-alt"></i> <span class="text">Logout</span></a></li>
     </ul>
  </div> 
```

我还为 $(".dropdown-menu").dropdown() 激活 jquery

现在。帐户菜单按预期工作，您可以单击它并下拉 - 如果您单击其他任何位置，它就会消失（预期）。但是，如果您单击服务菜单，则单击它保留的帐户菜单。当您单击其他菜单项（如帐户菜单）时，它不会消失。

我似乎找不到任何遇到这个问题的人——我发现的任何事情都与没有激活我上面提到的 Jquery 有关。

对此的任何帮助都会很棒。如果您回答并且您有 PHP 问题 - 只需提供您的问题的链接，我很乐意尽我所能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:20:39.250

找到它，你不需要那个数据目标......由于某种原因我还不是 100% 确定它正在破坏 JS，仍在研究它。

只需删除它们，你就会让它像这样工作。

这是固定的：http: [//jsbin.com/ufixin/4/edit](http://jsbin.com/ufixin/4/edit)

# java - 自定义标签库不接受 JSP 表达式

> ID：12800294
> 
> 赞同：1
> 
> 时间：2012-10-09T12:42:05.940
> 
> 标签：java, jsp, jstl, taglib

我正在尝试将计数器作为值传递给我的自定义选项卡库的属性之一。不知何故，它不接受它。因此，自定义标签没有呈现在我的页面上。当我传递一个字符串文字时，它工作顺利。

我在这里所做的是，

```
<mytaglib:pagination totalRecords="<%= rsSize %>" /> 
```

上面的属性被定义为 a`String`并且 getter 和 setter 方法都可用于它。我试图在页面上打印它只是为了验证我得到了这个值。

我什至在我的**.tld**文件`<rtexprvalue>true</rtexprvalue>`中为这个特定属性添加了这一行。这是我根据这篇文章保留的

 **![在此处输入图像描述](../Images/59c4ba5c7e2d56f22aa464c32a01cb02.png)

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:00:34.807

`rsSize`是类型，我在我的标签库实现中`int`定义`totalRecords`为对象。`String`我将其更改为 int 并解决了问题。**

# postgresql - Postgres：插入后如何填充数组

> ID：12800296
> 
> 赞同：1
> 
> 时间：2012-10-09T12:42:14.903
> 
> 标签：postgresql, stored-procedures, insert

假设我们有一张简单的桌子

```
create table a (id serial, data text); 
```

和以下功能：

```
create or replace function f()
returns SETOF int As
$BODY$
DECLARE
  l_arr int[];
BEGIN

  insert into a(data) 
  values ('a') 
  returning array_agg(data) into l_arr; --THIS DOES NOT WORK

  RETURN l_arr;

END;
$BODY$
LANGUAGE 'plpgsql' VOLATILE SECURITY DEFINER
  COST 100 
```

如何在同一个 SQL 语句中将插入的值收集到一个数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:05:38.193

看来，可以在没有中间数组的情况下使用 RETURN QUERY：

```
create or replace function f()
returns SETOF int As
$BODY$
BEGIN
  RETURN QUERY
  insert into a(data) 
  values ('a') 
  returning id;
END;
$BODY$
LANGUAGE 'plpgsql' VOLATILE SECURITY DEFINER
  COST 100 
```

# macros - phpstorm 中的宏

> ID：12800298
> 
> 赞同：3
> 
> 时间：2012-10-09T12:42:19.477
> 
> 标签：macros, phpstorm

我意识到“宏” - 真的很有用。但我遇到了它的奇怪行为。

刚录完就可以了。几天后，空格从它那里消失了。

例如，我为键入创建了宏（和绑定的热键）`<?php echo [CURSOR] ?>`。在调用这个宏之后，只`<?phpecho [CURSOR] ?>`输入了几次。

有人知道为什么会这样吗？这不是一个大问题，但有点烦人。

提前致谢。

**UPD** @LazyOne：

不，这不是一回事。使用实时模板而不是宏对我来说并不方便。

如果我使用实时模板输入`<?php echo [CURSOR] ?>`我要输入，例如`e->c->o->TAB`（或任何其他独特的字符序列（！））

如果我使用宏，我输入`Ctrl+Shift+E`（如果我绑定热键）。对我来说，同时按三个键而不是按顺序按四个键要容易得多。

这是阻止我使用实时模板的唯一一件事。

如果可以通过热键调用实时模板，那就太好了。据我所知，这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:25:13.233

[我的另一个答案中描述了](https://stackoverflow.com/a/9639266/104891)一种解决方法。您可以创建一个实时模板，然后录制一个扩展此模板的宏，然后为宏分配键盘快捷键。

如果您有测试用例，删除宏中的空格似乎是一个[值得报告的错误。](http://youtrack.jetbrains.net/issues/IDEA)

# c# - C#中虚拟方法的签名随MSV2008发生变化时，如何自动更改被覆盖方法的签名？

> ID：12800306
> 
> 赞同：4
> 
> 时间：2012-10-09T12:42:46.157
> 
> 标签：c#, visual-studio-2008, parameters, refactoring

我有一个被多次覆盖的虚拟方法。我想为所有这些方法添加一个参数。

我们可以只为虚拟方法添加一个参数并使用重构来自动更新所有覆盖的方法吗？

我知道可以使用重构删除或重新排序参数，但我没有找到添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:14:03.617

该功能不包含在 Visual Studio 中。

正如评论中提到的，我相信您可以通过安装[Resharper](http://www.jetbrains.com/resharper/)之类的插件来实现这一点（请参阅有关[更改方法签名](http://www.jetbrains.com/resharper/webhelp50/Refactorings__Change_Signature.html)的文档）。

如果您不想安装插件（像我一样），我使用 Visual Studio 的功能来查找所有引用（通过右键单击该功能，或使用热键 Ctrl + K、R）。这至少使操作更容易：只需双击每个搜索结果并进行更改。

# gradle - 我们有任何用于 gradle 的数据库迁移插件吗？

> ID：12800308
> 
> 赞同：1
> 
> 时间：2012-10-09T12:42:52.460
> 
> 标签：gradle

我正在将一个 Maven 项目转换为 gradle。在 Maven 中，他们使用了 c5-db-migration 插件。我们在 gradle 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:52:08.870

You can use the [Flyway Ant Tasks](http://code.google.com/p/flyway/wiki/AntTasks). Also there is a gradle plugin in work (beta status).

Example:

```
configurations {
    flyway
}

task flywayMigrate(dependsOn: "build") << {
    ext.flyway_classpath = files(sourceSets.main.output.resourcesDir) + files(configurations.flyway)
    ant.taskdef(name: 'flywayMigrate', classname: 'com.googlecode.flyway.ant.MigrateTask', classpath: ext.flyway_classpath.asPath)
    ant.flywayMigrate(driver: 'oracle.jdbc.driver.OracleDriver', url: 'myurl', user: 'myusername', password: 'mypassword',
            encoding: 'Cp1252', baseDir: 'sql')
}

dependencies {
    compile "com.googlecode.flyway:flyway-core:1.7"
    compile "com.oracle:ojdbc6:11.2.0.1.0"
    flyway "com.oracle:ojdbc6:11.2.0.1.0"
    flyway "com.googlecode.flyway:flyway-ant:1.7"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:31:08.643

我写了一篇你可以找到的@（https://github.com/katta/gradle-flyway-plugin）

最简单的用法是这样的

```
buildscript {
  repositories {
    mavenCentral()
    maven {
        url uri('http://katta.github.com/repository')
    }
  }
  dependencies {
    classpath 'org.katta.gradle.api.plugins:flyway:1.3'
    classpath 'postgresql:postgresql:9.1-901.jdbc4'
  }
}

apply plugin: 'flyway'

## replace properties with the values with your database settings
flyway {
    driver='org.postgresql.Driver'
    url='jdbc:postgresql://127.0.0.1/flyway' 
    user='postgres'
    password='s#cRet'
} 
```

[这里](https://github.com/katta/gradle-flyway-plugin)的文档详细解释了如何使用它。如果您在使用它时遇到任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:14:42.957

There is a liquibase plugin for gradle available written by tim berglund. The plugin is available at github: [https://github.com/tlberglund/gradle-liquibase-plugin](https://github.com/tlberglund/gradle-liquibase-plugin)

Maybe that helps you.

cheers, René

# facebook - Facebook 应用中心错误：错误配置的应用

> ID：12800313
> 
> 赞同：4
> 
> 时间：2012-10-09T12:43:01.160
> 
> 标签：facebook, facebook-apps

我有一个尚未发布的 iOS 应用程序，它也应该有一个 Facebook 应用程序中心页面。Facebook App Center 页面已全部设置完毕，并且**在预览时可以正常工作**。但是，如果我尝试直接访问该页面（即通过`www.facebook.com/appcenter/myappname`），我会收到以下错误：

> 错误配置的应用程序 抱歉，由于应用程序配置错误，无法显示 MyAppName 的详细信息。

我的猜测是我看到这个是因为我还没有提交应用详细信息页面（“应用详细信息页面状态：未提交”），但我想在我们上线之前验证是否是这种情况。否则，人们可能会在这个损坏的页面上结束，而我们必须找出问题所在。

我显然已经尝试用谷歌搜索这个问题并查看 Facebook 文档，但没有找到任何答案。

一旦我提交了应用程序详细信息页面，有人可以**确认这将正常工作吗？**

*我之前设置了其他 App Center 页面，并且运行良好，但在这些情况下，我已经能够立即提交应用程序详细信息页面。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:14:08.407

这是正确的行为，因此您有一个预览功能来查看页面的外观。您必须将应用程序提交到应用程序中心，应用程序中心 URL 才能正常工作。

# directory - 在哪里安装混合的 32 位和 64 位应用程序包

> ID：12800316
> 
> 赞同：7
> 
> 时间：2012-10-09T12:43:07.500
> 
> 标签：directory, installation, default, 32bit-64bit, program-files

我知道在 64 位 Windows 上，32 位应用程序`C:\Program Files (x86)`默认进入，64 位进入`C:\Program Files`.

但是，如果您有一个更复杂的安装包，其中包括一个客户端组件（32 位）和一个服务器组件（64 位），可能还有一些帮助工具（32 位）。在这种情况下，默认安装路径应该是什么？

根据一些文章，微软和一些安装框架不鼓励混合位数：

*   [单个 MSI 安装正确的 32 或 64 位 c# 应用程序](https://stackoverflow.com/questions/3724956/single-msi-to-install-correct-32-or-64-bit-c-sharp-application)
*   [http://jpassing.com/2009/10/09/mixing-32-and-64-bit-components-in-a-single-msi](http://jpassing.com/2009/10/09/mixing-32-and-64-bit-components-in-a-single-msi)

我不明白为什么混合这些应该是一个很大的禁忌，考虑到 x64 平台运行 x86 应用程序的性能如何，甚至对于相同的二进制文件可以在两种模式下运行的托管代码更是如此。就我而言，75% 的随附库在客户端和服务器之间共享并且完全相同，因此将它们拆分是没有意义的。

那么鉴于此，对于这种 32 位和 64 位应用程序的混合，哪个是首选安装位置？`C:\Program Files (x86)`还是`C:\Program Files`？正如我所看到的，64 位位置是可取的。我将 Program Files (x86) 目录视为旧应用程序的遗留沙箱，这些旧应用程序从未考虑过为 64 位应用程序设计。在混合 32/64 位应用程序的情况下，存在 64 位感知，因此不应有遗留原因将 32 位文件与 64 位文件分开沙箱。对我来说，没有“(x86)”的路径在视觉上也更具吸引力，表明它是一个现代应用程序——适用于 64 位操作（在必要时）。

当作为一个应用程序安装在同一个安装程序包中时，是否有人知道支持或反对将 32/64 位混合可执行文件放入 64 位目录的其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T17:43:32.267

据我所知，不鼓励使用它的唯一原因是您提到的那个问题，它的默认安装路径在哪里？我同意你的看法，如果确定了默认路径，那么这将更容易协同两种位类型，并使更复杂的程序成为可能。希望这可以帮助！:)

# python - 如何将不同的元素添加到列表中的列表中？蟒蛇 3

> ID：12800319
> 
> 赞同：1
> 
> 时间：2012-10-09T12:43:24.707
> 
> 标签：python, arrays, list, append

```
f = open("sonad.txt",encoding="utf-8")
c = f.readlines()
blokk = [[]] * 15
for read in c:
    length = len(read.strip())
    blokk[length].append(read.strip()) 
```

sonad.txt 只有一些随机单词，我想将它们按如下顺序排列：

所有 1 个字母长的单词转到 blokk[1] 2 个字母长的转到 blokk[2] 等等......

但是我当前的代码所做的是它向 allL block[x] 添加了一个元素，因此 blokk[1] blokk[2] blokk[3] ..... 都是一样的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:45:07.977

该行`blokk = [[]] * 15`创建了一个列表，其中包含15 次*相同的空列表*。

您想改用列表推导：

```
blokk = [[] for _ in range(15)] 
```

自己试试吧：

```
>>> blokk = [[]]*15
>>> blokk
[[], [], [], [], [], [], [], [], [], [], [], [], [], [], []]
>>> blokk[0].append(1)
>>> blokk
[[1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]
>>> blokk = [[] for _ in range(15)]
>>> blokk
[[], [], [], [], [], [], [], [], [], [], [], [], [], [], []]
>>> blokk[0].append(1)
>>> blokk
[[1], [], [], [], [], [], [], [], [], [], [], [], [], [], []] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T12:44:37.787

```
 blokk = [[]]*15 
```

创建*对同一列表的*15 个引用。因此，如果您附加到`blokk[0]`or `block[1]`，这些更改将反映在任一列表中，因为它们是同一个列表。

也许这里更好的数据结构是`defaultdict`：

```
from collections import defaultdict
d = defaultdict(list)
with open('sonad.txt', encoding='utf-8') as fin:
    for line in fin:
        stripped = line.strip()
        d[len(stripped)].append(stripped)

print(sorted(d.items())) 
```

# ubuntu - 新贵中的钩子和方法事件之间的区别

> ID：12800322
> 
> 赞同：0
> 
> 时间：2012-10-09T12:43:31.657
> 
> 标签：ubuntu, upstart

新贵事件中的钩子和方法有什么区别。

据我了解，两者都强制发射器等待由于发射钩子或方法事件而启动的任务完成。但是它们之间有什么区别？

[http://upstart.ubuntu.com/cookbook/#system-job](http://upstart.ubuntu.com/cookbook/#system-job) - 第 4.3.12 和 4.3.13 节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:04:28.097

我看到一个 ASCII 文本脚注，其中第二个表提供了另一个细节。他们拼写不清楚。

[http://upstart.ubuntu.com/cookbook/#ubuntu-well-known-events-ubuntu-specific](http://upstart.ubuntu.com/cookbook/#ubuntu-well-known-events-ubuntu-specific)

```
Table 2: Event Types.

   +------------------------------------------------------------------------------------+
   | Ref | Event Type | Notes                                                           |
   |-----+------------+-----------------------------------------------------------------|
   |  H  | Hook       | Blocking. Waits for events that start on or stop on this event. |
   |-----+------------+-----------------------------------------------------------------|
   |  M  | Method     | Blocking task.                                                  |
   |-----+------------+-----------------------------------------------------------------|
   |  S  | Signal     | Non-blocking.                                                   |
   +------------------------------------------------------------------------------------+ 
```

表 1 说明了哪些标准事件属于哪个类别。

我可以想象方法返回一个退出代码，而钩子总是可以携带一个成功的代码。

我看到了另一个我在烹饪书中没有看到答案的问题。当 OR 在“start on”子句中连接钩子名称时，我可以想象被调用者立即返回对调用者线程的控制。但我不知道 AND 连接的钩子名称是否会阻止所有调用者，直到最后一个调用（发出）。这在单个子句中通过 AND 和 OR 连接的钩子名称变得更加模糊。

# rest - SpringMVC 分层 URI 模板

> ID：12800325
> 
> 赞同：1
> 
> 时间：2012-10-09T12:43:51.630
> 
> 标签：rest, spring-mvc

我正在使用 SpringMVC 来实现 REST API。在某些时候，我需要有一个分层 URI：

/文件夹/id/children/id/children/...id/children

具有可变深度。使用 RestEasy 可以递归地从顶部方法返回 Resource。有没有办法在 SpringMVC 中实现它？否则你有什么建议吗？

关键点是子 id 仅在同一级别是唯一的，因此：该文件夹不会有 2 个具有相同 id 的子项，但在整个树中，将存在多个具有相同 id 的项目。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:59:14.970

我认为Spring没有很好的方法来做到这一点。我能想到两种选择，但都有点难看......

1.  编写单独的控制器方法来捕获您将遇到的 URI 模式的每个“深度”，例如`@RequestMapping("/children/{id1}/children/{id2}")`. 然后，您可以调用一个通用方法来处理捕获`id`的可能是递归的 s。如果最大“深度”仅为 3，我可能会选择此选项，因为代码至少对于其他开发人员来说很容易阅读/理解，并且复制和粘贴的数量会最少。

2.  `@RequestMapping("/children/{restOfUrl:+}")`在模板模式中使用正则表达式（[请参阅文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates-regex)）并在单个字符串变量中捕获整个路径。然后，您需要自己的逻辑来分离重复单元。就作为一个生硬的工具而言，这不太灵活（捕获从开头`/children/`的`:+`所有内容`@RequestMapping`很容易错过，这使得其他人试图找出哪些 URI 与哪些控制器方法一起使用变得有点困难。

# python - 控制台中的 Python \xYZ 字符

> ID：12800326
> 
> 赞同：1
> 
> 时间：2012-10-09T12:43:53.733
> 
> 标签：python, string, escaping, hex

我正在构建一个需要两个文件的程序，经过一些处理，我必须比较文件的某些部分。

例如，当我打印要比较的两个字符串时，它看起来像这样：

```
CSV = 'UC013\. MANTER ITEM DE NOTA FISCAL / NOTA DE SERVI\xc3\x87O / RECIBO'
DOC = 'UC013\. MANTER ITEM DE NOTA FISCAL / NOTA DE SERVI\xc7O / RECIBO' 
```

两者应该相同：

```
'UC013\. MANTER ITEM DE NOTA FISCAL / NOTA DE SERVIÇO / RECIBO' 
```

如何在控制台中打印正确的字符并正确比较字符串？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:02:46.120

您有两个具有不同编码的文件，第一个是 utf-8 ( `CSV`)，第二个是 latin1 ( `DOC`)。如果要比较它们，则必须先将它们解码为 un​​icode：

```
CSV = 'UC013\. MANTER ITEM DE NOTA FISCAL / NOTA DE SERVI\xc3\x87O / RECIBO'
DOC = 'UC013\. MANTER ITEM DE NOTA FISCAL / NOTA DE SERVI\xc7O / RECIBO'
CSV = CSV.decode('utf-8')
DOC = DOC.decode('latin1')
print(CSV == DOC)    # True 
```

# mysql - 从 SQL Yog 连接到 MYSQL 服务器

> ID：12800327
> 
> 赞同：1
> 
> 时间：2012-10-09T12:43:54.380
> 
> 标签：mysql, localhost, sqlyog

我知道这个问题已经被问过很多次了，但是在看到所有相关问题后我无法解决我的问题。

我在 Windows 7 Dell Inspiron 笔记本电脑上安装了 Visual Studio 2012 Express 版本。因此，Microsoft SQL Server 也随之自动安装。

之后，我安装了 SQL Yog 社区版。第一次启动后，我尝试连接到 MYSQL 主机。我保持信息原样，即，

```
MySQL Host Address: localhost
Username: root
Port: 3306 
```

我没有输入任何密码。
完成这一切之后，当我说连接时，它给出了以下错误：

```
"Error No. 2003 Can't connect to MySQL Server on 'localhost' (10061)" 
```

毕竟，我认为问题出在我的机器上安装 SQL。因此，我下载了 Microsoft SQL Server 2012 Express Edition 并安装了它。但是，SQL Yog 仍然面临着同样的问题。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:55:18.160

*   您应该检查 MySQL 服务器是否已启动。
*   检查默认端口，是3306吗？
*   端口可能被禁止，检查防火墙是否启动。

尝试使用[TELNET](http://en.wikipedia.org/wiki/Telnet)程序测试地址 - localhost:3306 -

```
telnet localhost 3306 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:26:07.707

我不确定这一点，但你可以尝试使用 ** mysql 查询浏览器 ** [http://dev.mysql.com/downloads/gui-tools/5.0.html](http://dev.mysql.com/downloads/gui-tools/5.0.html) 而不是最初使用 sqlyog 连接我也遇到过与 sqlyog 相同的问题，但后来我能够使用 mysql 查询浏览器进行连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T12:50:24.037

In my case this worked:

> 1.  Installed Connector .net
> 2.  Installed Sql for Visual Studio
> 3.  In database (MySql on Ubuntu) you must change host in users - % - then u can remote access to ur database.
> 4.  hash bind address in cfg in /etc/my.conf

My version is Ultimate, but I want it on express version.

# javascript - 主干，解析 JSON，然后我如何触发渲染？

> ID：12800332
> 
> 赞同：1
> 
> 时间：2012-10-09T12:44:08.100
> 
> 标签：javascript, backbone.js, backbone-events

今天是我`backbone.js`在这里的第一天，所以请放轻松。我有 a `view`， a`collection`和 a`model`填充 a `select`。

我可以`select`用**硬编码** `array`的. 但我正在使用现有的 API，我需要先解析响应。这似乎也可以。

我不知道谁来告诉我发生了什么变化以呈现我新返回的结果/模型......如果这没有帮助，代码应该更有意义。

```
var UserGroup = Backbone.Model.extend();

var UserGroups = Backbone.Collection.extend({

    initialize:function(){
        this.fetch();
    },

    model: UserGroup,

    url: "http://myAPI/getUserGroups",

    parse: function(json){

        return json["GetUserGroups"]["Results"];
    }

});

var GroupSelectView = Backbone.View.extend({

    el: $("select"),

    initialize: function() {
        var that = this;

        this.collection = new UserGroups();

        this.render();

    },

    render: function(){
        _.each(this.collection.models, function(group){
            $("<option/>", { value: group.get("Id"), text: group.get("Name")} ).appendTo(this.el)
        }, this);
    },
});

var groupSelectView = new GroupSelectView(); 
```

你怎么看？我明白了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:06:05.023

为了更加灵活，您可以收听`reset`和`add`事件。

集合是`reset`当您`fetch`从服务器（或本地）收集时，但如果您`add`建模或`fetch`使用`add`选项，则会触发每个模型的添加事件。

[Backbone.js：获取](http://backbonejs.org/#Collection-fetch)

这应该有效：

```
var GroupSelectView = Backbone.View.extend({

    initialize: function() {
        var that = this;

        this.setElement($("select"));
        this.collection = new UserGroups();

        // listen to add and reset events but handle them differently
        // fired on collection.add(model) and collection.fetch({add: true})
        this.collection.on("add", this.renderItem, this);
        // fired on collection.fetch()
        this.collection.on("reset", this.render, this);

    },

    render: function(){
        // backbone collections already come with some underscore methods built in
        this.collection.each(this.renderItem, this);
    },

    renderItem: function(group) {
        this.$el.append($("<option/>", {
            value: group.get("Id"),
            text: group.get("Name")})
        );
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:54:58.303

你可以做休耕...

```
var GroupSelectView = Backbone.View.extend({

    el: $("select"),

    initialize: function() {
        var that = this;

        this.collection = new UserGroups();
        this.collection.on( 'change', this.render, this );

    //  You could try this too, 1 is for 1 item is added, the other, when all items are changed
    //  this.postCollection.on('add', this.addOne, this);
    //  this.postCollection.on('reset', this.addAll, this);

        this.render();

    },

    render: function(){
        _.each(this.collection.models, function(group){
            $("<option/>", { value: group.get("Id"), text: group.get("Name")} ).appendTo(this.el)
        }, this);
    },
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:01:22.903

您可以使用[Backbone.Events](http://backbonejs.org/#Events)发布/订阅更改。点击链接了解更多信息。

模型和集合具有针对常见用例触发的内置事件，例如模型的属性发生更改（“更改”）和集合的模型已获取（“重置”）。

要触发更改（发布）：

> myObject.trigger('事件');

订阅更改（订阅者）

```
myObject.on('event',myCallback,context); 
```

将 myCallback 设置为视图的渲染方法。

查看[这篇文章](http://aaronhardy.com/javascript/javascript-architecture-backbone-js-events/)，了解有关 Backbone 事件的更多详细信息。

# matlab - (MATLAB) 通过 2D 切片重建 3D CT 图像

> ID：12800333
> 
> 赞同：2
> 
> 时间：2012-10-09T12:44:13.373
> 
> 标签：matlab, dicom

我有 3D CT 图像的 2D 切片。它们是`DICOM`格式的，其中有 250 个。我想用 MATLAB 重建 3D 图像。我怎样才能在一个循环中做到这一点？

*   我在我的 Ubuntu 系统上使用 MATLAB R2010b。
*   图片的位置是：`/home/amadeus/Desktop/images`
*   图像命名为：

    ```
    IM-0001-0001.dcm
    IM-0001-0002.dcm
    IM-0001-0003.dcm
    ...
    IM-0001-0250.dcm 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:55:51.900

显然有一个函数只用于读取 DICOM 文件：[dicomread](http://www.mathworks.nl/help/images/ref/dicomread.html)，我建议使用它来加载图像，然后将它们存储在 3D 矩阵中。[sprintf](http://www.mathworks.nl/help/matlab/ref/sprintf.html)可用于构造图像的文件名（用于`%04d`生成带前导零的四位数字）。

假设所有图像都对齐并具有相同的大小：

```
N = 250;
img_dir = '/home/amadeus/Desktop/images'

% read the first image separately just to get the size
strfile = 'IM-0001-0001.dcm';
img = dicomread(fullfile(img_dir, strfile));
siz_img = size(img);

% create result matrix:
ct3d = NaN([siz_img N]);
ct3d(:,:,1) = img;    

% load all the remaining images and put them in the matrix
for ii=2:N
    strfile = sprintf('IM-0001-%04d.dcm',ii);
    ct3d(:,:,ii)= dicomread(fullfile(img_dir, strfile));
end 
```

编辑：这假设图像是灰度（2d）。如果它们是全彩色的（宽 x 高 x 3），您应该在分配给`ct3d`.

# jquery - jQuery each() 工作很奇怪

> ID：12800336
> 
> 赞同：0
> 
> 时间：2012-10-09T12:44:33.157
> 
> 标签：jquery, slideshow

我正在尝试获取一些嵌套图像的宽度。我有以下 HTML 代码：

```
<div class="slide" id="Slide1">
        <a href="#" title="Some Title" target="_blank">
             <img src="images/photo1.jpg" alt="Slide 1" class="slideImg">
        </a>
        <div class="caption" style="width: 476px">
            <h1>Stuff</h1>
            <p>Some Stuff Description</p>
        </div>
    </div>
<div class="slide" id="Slide2">
        <a href="#" title="Some Title" target="_blank">
             <img src="images/photo.jpg" alt="Slide 2" class="slideImg">
        </a>
        <div class="caption" style="width: 476px">
            <h1>Stuff</h1>
            <p>Some Stuff Description</p>
        </div>
    </div> 
```

使用 jQuery，我想获得每个 IMG 的宽度，然后我可以将（1024px - 那个宽度）设置为正确的“CAPTION DIV”（`<div class="caption">`）。这两个脚本都给了我第二张宽度为“0”的图像，这是不可能的事情。

```
$('.slideImg').each(function(){
    alert($(this).width());             
 });
$('.slide').each(function(){
    alert($(this).attr('id'));
    alert($(this).find('a').find('img').width());
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:50:26.857

我刚刚检查了它的工作正常。

```
 $(document).ready(function(){

      $('.slide').each(function(){
        alert($(this).attr('id'));
            alert($(this).find('a').find('img').width());
});

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:51:32.343

我也是，它对我有用。

您使用的是哪个浏览器？

我在 Chrome 22、IE 9、Firefox 15 中测试过

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:53:40.287

也许您还可以检查您的图像是否隐藏。因为 jquery 在计算隐藏元素的维度时存在问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:00:13.777

可能是您的 jQuery 运行时图像尚未完全加载。见这里：[在执行某事之前要求 jQuery 等待所有图像加载的官方方式](https://stackoverflow.com/questions/544993/official-way-to-ask-jquery-wait-for-all-images-to-load-before-executing-somethin)

此外，`clientWidth`将为您提供图像的实际渲染宽度

你可以试试：

```
$('.slide').load(function() {
  alert(this.clientWidth);
}) 
```

# c# - Asp.Net Asp Menu 更改所选项目的顺序

> ID：12800343
> 
> 赞同：0
> 
> 时间：2012-10-09T12:45:00.570
> 
> 标签：c#, asp.net, aspmenu

我的站点中有一个 aspmenu，我正在为与实际页面具有相同 url 的项目应用“选定”属性，因此我可以将 StaticSelectedStyle 应用于该项目。

问题是菜单上的选定项目（或项目组）总是在菜单的第一个位置，改变了原来的位置（需要控制）。

如何禁用此行为？

# hadoop - 设置 hadoop map-reduce 作业以从 Cassandra 数据库中检索数据

> ID：12800344
> 
> 赞同：0
> 
> 时间：2012-10-09T12:45:01.817
> 
> 标签：hadoop, mapreduce, cassandra

我已经`Cassandra`在四个集群和`hadoop`两个集群上进行了设置，现在我想设置 map reduce 作业，以便它可以从`Casandra`数据库中检索数据并进行分析。谁能告诉我在这里实现字数统计示例的分步程序？比如要更改哪些配置文件以及如何将我的`Cassandra`数据目录指向 map-reduce 作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:08:07.243

您可以使用 pig 来分析数据。 [http://frommyworkshop.blogspot.com/2012/07/single-node-hadoop-cassandra-pig-setup.html](http://frommyworkshop.blogspot.com/2012/07/single-node-hadoop-cassandra-pig-setup.html)

# c++ - 使用 Qt 显示 JPG 图像不适用于发布可执行文件

> ID：12800346
> 
> 赞同：4
> 
> 时间：2012-10-09T12:45:09.660
> 
> 标签：c++, qt, release, executable, jpeg

我在用 qt 显示 jpg 图像时遇到了一个烦人的问题。我在 Windows 7 中使用 Visual Studio 2008 开发并使用 Qt 版本 4.8.2。我现在将通过 Qt (../examples/graphicsview/collidingmice) 提供的“collidingmice”示例来描述我的问题。

我可以通过 Visual Studio IDE 或通过 Visual Studio 命令提示符构建此示例。在此示例中，jpg 用作背景，并在我执行调试可执行文件时正确显示。但在发布版本中，没有显示此背景 jpg。

我已经意识到，Qt 使用插件来加载/显示不同的图像。因此，我将 Qt 的插件文件夹的内容复制到了应用程序目录中（collidingmice.exe 所在的位置）。不幸的是，这并不能解决问题。

因此，我认为 Qt 构建和 jpeg 库一定有问题。因此，我通过在 Visual Studio 命令提示符中执行以下命令来重新配置 Qt：

```
nmake distclean
configure -debug-and-release -opensource -platform win32-msvc2008 -qt-libjpeg -no-webkit
nmake 
```

之后对示例进行了重建，但再次没有显示 jpg 图像。我不确定问题是什么，因为它在调试版本和发布中都有效，我想我只需要提供所需的插件 DLL。但显然我是不对的。

我希望任何人都可以帮助我，或者可以给我一些提示可能是问题所在。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:50:34.637

> 因此，我将 Qt 的插件文件夹的内容复制到了应用程序目录中（collidingmice.exe 所在的位置）。

您需要将插件放入“imageformats”子目录中，例如

```
bin
 ├── collidingmice.exe
 └── imageformats
       ├── qjpeg4.dll
       ├ ... 
```

另见[http://www.qtcentre.org/threads/46927-Location-of-imageformats-directory](http://www.qtcentre.org/threads/46927-Location-of-imageformats-directory)

* * *

原来，OP已经相应地设置了目录结构。根本原因是加载了错误的 QtGui4.dll。这可以通过*“将 DLL 直接复制到应用程序目录中或通过更改 PATH 环境变量中的路径顺序，以便将 Qt bin 目录放置在包含 QtGui4.dll 的所有其他路径之前”来解决。*

在任何情况下，[进程监视器](http://technet.microsoft.com/en-US/sysinternals/bb896645.aspx)都是追踪此类问题的好工具。

# mysql - 同时更新多个表

> ID：12800350
> 
> 赞同：0
> 
> 时间：2012-10-09T12:45:25.603
> 
> 标签：mysql, sql

所以我在 SQL 中有许多表，内容有一个名为“hashtag_id”的键，其中包含一个数字（在本例中为 1-5）。我想快速进入并将所有id为“1”的项目更改为“5”。

有没有办法自动做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:46:36.030

```
update table set hashtag_id = 5
where hashtag_id = 1; 
```

如果您有多个表，您可以在 phpmyadmin（或任何 mysql 管理工具）中执行类似的操作

这将查询[information_schema.columns](http://dev.mysql.com/doc/refman/5.6/en/columns-table.html)表（描述所有表和列），并为每个名为的列编写更新查询`hashtag_id`）

```
SELECT CONCAT('UPDATE ', 
               table_name, 
               ' SET ',
               column_name,
               ' = 5 WHERE ',
               column_name,
               ' = 1;' 
             )
FROM information_schema.columns
WHERE column_name = 'hashtag_id';
--maybe add  AND table_schema = <your_schema> 
```

复制并执行结果

这也可以在使用动态 sql 的存储过程中完成（在 MySQL 中不习惯，因此没有示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:46:59.837

对于每个表，您需要运行以下查询：

```
UPDATE yourtable
SET hashtag_id = 5
WHERE hashtag_id = 1 
```

这会找到所有`hashtag_id`为 1 的行并将其设置为 5。

* * *

要获取所有表的名称，您可以运行以下查询：

```
SELECT table_name
FROM information_schema.columns
WHERE table_schema = 'your_schema'
AND column_name = 'hashtag_id' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:47:33.083

```
UPDATE MyTable
SET hashtag_id=5
WHERE hashtag_id=1; 
```

# iphone - 核心数据谓词什么都不返回？

> ID：12800355
> 
> 赞同：0
> 
> 时间：2012-10-09T12:45:51.103
> 
> 标签：iphone, ios, core-data, uitableview

我有一个基于斯坦福讲座的 Core Data 应用程序。

在我的顶级视图控制器中，我创建了一个与“Day”具有一对多关系的“Trip”。所以它看起来像：

```
[Trip tripWithInfo:trip inManagedObjectContext:self.tripDatabase.managedObjectContext];

for (int i=0; i<someNumber; i++) {
    NSDictionary *dayInfo = [[NSDictionary alloc] initWithObjectsAndKeys:[trip copy], TRIP, [NSNumber numberWithInt:i], DAY_NUMBER, nil];
   [Day dayWithDayInfo:dayInfo inManagedObjectContext:self.tripDatabase.managedObjectContext];
} 
```

这次旅行工作正常，并在我的顶级视图控制器中正确显示。问题是当我选择一个行程时，应该继续使用 daytableviewcontroller（应该显示该行程的日期），daytableviewcontroller 是空白的。

我正在执行我的获取请求，如下所示：

```
 - (void)setupFetchedResultsController
    {
        NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:DAY];
        request.predicate = [NSPredicate predicateWithFormat:@"whichTrip.tripID = %@", self.trip.tripID];    
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:DAY_NUMBER ascending:YES]];

        self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                            managedObjectContext:self.trip.managedObjectContext
                                                                              sectionNameKeyPath:nil
                                                                                       cacheName:nil];
    } 
```

我认为tripID 是正确的（当我使用NSLog() 检查时完全相同），但是屏幕什么也不显示。当我不使用谓词时，会显示所有内容，因此我知道它在那里。我还应该提到，屏幕似乎在第一次或第二次添加 Trip 对象时随机显示正确的结果。

这个问题可能是什么原因造成的？

![顶部视图控制器](../Images/0ca9a0ffad9b6c210b2951d98fa26c40.png) ![第一次旅行对象](../Images/49419807c68e89e55a93d6019d4626e2.png) ![第二次旅行对象](../Images/f0315b3b0374a0da7f077ff92fbbc6f1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:41:35.633

最后我找到了答案。原来我在我的对象类别中添加了错误的谓词。我放了

```
request.predicate = [NSPredicate predicateWithFormat:@"dayNumber = %@", day.dayNumber]; 
```

但它真的应该是

```
request.predicate = [NSPredicate predicateWithFormat:@"dayNumber = %@", [Trip tripWithInfo:[dayInfo objectForKey:TRIP] inManagedObjectContext:context]]; 
```

# iphone - 调整 UIImageView 剪辑子层的大小

> ID：12800356
> 
> 赞同：0
> 
> 时间：2012-10-09T12:45:54.293
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个自定义`UIImageView`插入这样的子层：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        small_ = frame;
        float newX = self.center.x - ((self.frame.size.width*SELECTED_SCALE_VALUE)*0.5);
        float newY = self.center.y - ((self.frame.size.height*SELECTED_SCALE_VALUE)*0.5);
        big_ = CGRectMake(newX, newY, self.frame.size.width*SELECTED_SCALE_VALUE, self.frame.size.height*SELECTED_SCALE_VALUE);

        [self setupSubviews];
    }
    return self;
}

- (void)setupSubviews
{
    shadowImage_ = [[UIImage imageNamed:@"gallery_shadow_frame"] resizableImageWithCapInsets:UIEdgeInsetsMake(20, 20, 20, 20)];
    shadowImageView_ = [[UIImageView alloc] initWithFrame:[self shadowFrame]];
    shadowImageView_.image = shadowImage_;
    shadowImageView_.backgroundColor = [UIColor blueColor];
    [self.layer insertSublayer:[shadowImageView_ layer] atIndex:0];
} 
```

当我后来调整它的框架大小时，`UIImageView`它会剪辑子层：

```
- (void)makeBig
{
    self.frame = big_;
    // shadowImageView_.frame = [self shadowFrame];
}

- (void)makeSmall
{
    self.frame = small_;
    // shadowImageView_.frame = [self shadowFrame];
} 
```

为了给出一个完整的图片，还有这个：

```
- (CGRect)shadowFrame
{
    int x = -X_BORDER;
    int y = -Y_BORDER;
    int width = self.frame.size.width + X_BORDER * 2;
    int height = self.frame.size.height + Y_BORDER * 2;
    return CGRectMake(x, y, width, height);
} 
```

我如何调整大小`UIImageView`，但**防止**它剪裁它`shadowImageView_ sublayer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:55:04.980

你有没有尝试过

```
self.layer.masksToBounds = NO; 
```

?

# http - 在获取大量图像下载时在 Node.js http.get 中包含超时

> ID：12800357
> 
> 赞同：14
> 
> 时间：2012-10-09T12:45:57.133
> 
> 标签：http, node.js

这是我用来从 URL 下载图像的代码：

```
http.get(options, function (res) {
    res.on('data', function (data) {
        file.write(data);
    }).on('end', function () {
        file.end();
        console.log(file_name + ' downloaded ');
        cb(null, file.path);
    }).on('error', function (err) {
        console.log("Got error: " + err.message);
        cb(err, null);
    });
}); 
```

如何为每个请求添加超时，以便它不会一直等待大数据或无响应的响应？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-10T08:41:46.167

好的，您的问题至少有两种解决方案。一个简单的：

```
var request = http.get(options, function (res) {
    // other code goes here
});
request.setTimeout( 10000, function( ) {
    // handle timeout here
}); 
```

但可能不够灵活。更高级的：

```
var timeout_wrapper = function( req ) {
    return function( ) {
        // do some logging, cleaning, etc. depending on req
        req.abort( );
    };
};

var request = http.get(options, function (res) {
    res.on('data', function (data) {
        file.write(data);
        // reset timeout
        clearTimeout( timeout );
        timeout = setTimeout( fn, 10000 );
    }).on('end', function () {
        // clear timeout
        clearTimeout( timeout );
        file.end();
        console.log(file_name + ' downloaded ');
        cb(null, file.path);
    }).on('error', function (err) {
        // clear timeout
        clearTimeout( timeout );
        console.log("Got error: " + err.message);
        cb(err, null);
    });
});

// generate timeout handler
var fn = timeout_wrapper( request );

// set initial timeout
var timeout = setTimeout( fn, 10000 ); 
```

# java - 需要使用 Java 代码检索列表中的所有 excel 列名

> ID：12800361
> 
> 赞同：0
> 
> 时间：2012-10-09T12:46:02.953
> 
> 标签：java, xml, tibco

我需要从 excel 文件中获取所有列名，它可以是 .xls 或 .xlsx 在 java 代码的帮助下。我将提供文件名和文件目录作为输入，代码需要读取目录中的文件并捕获列表中的所有列并以 xml 格式发送输出。

下面是示例 xml 数据，列将比下面更多

```
Location ID Location Name   Product ID  Supplier Name   
Invoice Number  Sales Qty   Buy Qty Inventory Qty

2-LG2-344   ABC BBC CBC AK1234  5   4   3

2-LG2-344   ABC CBC CBC AK1235  2   6   5

2-LG2-344   ABC DBC CBC AK1236  3   2   3

the output should be like 
<ptnr_label_names>
<field_name>Location ID<field_name>
<field_name>Location Name<field_name>
<field_name>Product ID<field_name>
<field_name>Supplier Name<field_name>
<field_name>Invoice Number<field_name>
<field_name>Sales Qty<field_name>
<field_name>Buy Qty<field_name>
<field_name>Inventory Qty<field_name>
</ptnr_label_names> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:01:04.107

您可以使用[Apache POI](http://poi.apache.org/index.html)。一个简单的代码如下所示：

```
 FileInputStream fis = new FileInputStream("test.xls");
        Workbook wb = new HSSFWorkbook(fis); //or new XSSFWorkbook("test.xls")
        Sheet sheet = wb.getSheetAt(0);
        Row row = sheet.getRow(0); //assume first row is column header row
        System.out.println("<ptnr_label_names>");
        for(int col=0; col< numXolumns; col++){
           Cell cell = row.getCell(col);
           String columnName = cell.getStringCellValue();
           System.out.println("<field_name> "+columnName +"</field_name>");
       }
        System.out.println("</ptnr_label_names>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:28:52.473

如果我正确阅读：“excel文件中的所有列名，它可能是.xls”

我已按要求在列表中附加了一个带有列 ID 的 excel 字段。但是，由于 excel 的限制，无法使用这些创建自定义列表。

[Excel 列 ID](http://rapidshare.com/share/54D77B922474BB825F01963B5A1B73FB)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:03:37.320

*   创建一个 java bean 来表示您的数据结构。
*   使用 Apache POI [http://poi.apache.org/](http://poi.apache.org/)将 excel 读取到 bean。
*   使用 XStream [http://x-stream.github.io/](http://x-stream.github.io/)将 bean 扔到 XML。

祝你好运 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:52:07.027

在 excel 文件中找到列名所在的行，然后通过从一列移动到另一列来读取单元格。

```
 Row row=sheet.getRow(r);//r is the row number for your column names
    Cell cell=row.getCell(c);//c is the column number 
```

`c`您需要通过更改上面代码中的值来遍历每一列。

# sql - 如何使用 TOAD、oracle 从表中创建插入脚本？

> ID：12800363
> 
> 赞同：7
> 
> 时间：2012-10-09T12:46:27.123
> 
> 标签：sql, oracle, toad

我将 TOAD 用于 oracle 11g，我想从表中创建一个插入脚本。或者我想创建一个脚本文件，允许 eclipse 用他们的数据重建整个数据库。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-03T06:08:33.760

![在此处输入图像描述](../Images/2f1c638dec8311fb513df3f0992a4309.png)

运行您的查询 例如：`Select * from employee;`

在表格结果网格中 > 单击“**导出网格内容**”图标（在上图中标记为黄色）

选择**导出格式**为“**插入语句**”>单击**确定**

你完成了！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-09T14:48:40.950

解决方案是：

`data base > schema browser`

然后我选择一个表：

```
> my schema > tables > my_table 
```

导出脚本以允许您创建表：

> 脚本>（复制过去的`create table`部分）

导出阿拉数据：

```
>data > export dataset (blue icone) > export format : insert statement (and specify the output file) 
```

然后您可以将这两个脚本重新组合在一个 script.sql 中（按顺序）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-17T15:40:15.217

**在 Toad 中，有数据库级图标和表级图标。**

数据库图标是那些出现在顶部、就在下方的图标（例如：Toad For Oracle）。

它们从左到右开始，文件/编辑/搜索/编辑器/会话....

表格级别的图标是当您突出显示表格或部分数据时出现的图标

网格，（当数据出现在表格中时）。

您可以从数据库图标导入，也可以导出到 .dmp 文件

但您不能从数据库图标导出到 SQL LOADER 或 INSERT STATEMENT，所以使用

表级图标。请参阅以下步骤：

一个。

1.  突出显示表格
2.  右键单击表格
3.  导出表
4.  在导出格式中：选择插入语句

或者

B.

当表格有数据并且您选择了数据选项卡时，您将在下方

Column/Indexes/Constraints/Triggers/Data/Script tabs 几个图标，IE 一个过滤漏斗，

右侧的三个图标您将有一个数据库图标（蓝色）。

您可以单击它，然后选择您的导出格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-13T16:24:16.657

右键单击 Schemabrowser 中的表 -> 生成语句 -> 插入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T06:14:39.023

您可以使用toad生成插入脚本，在toad中写入表名并按F4然后右键单击表名并选择导出数据然后将打开新窗口，选择导出格式作为插入语句然后文件路径保存，脚本将生成在指定路径.....

# c# - 如何从它的扩展方法修改类？

> ID：12800365
> 
> 赞同：1
> 
> 时间：2012-10-09T12:46:29.317
> 
> 标签：c#, .net, c#-4.0, .net-4.0, extension-methods

我正在尝试创建两种方法来序列化/反序列化类使用`Json.Net`并将它们保存/加载到/从文件中，这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using Newtonsoft.Json;
using System.Security.Cryptography;
using System.Text.RegularExpressions;

namespace System
{
    public static class SystemExtentions
    {
        public static void SaveToFile(this object data, string FileName)
        {
            using (StreamWriter writer = new StreamWriter(FileName))
            {
                string s = JsonConvert.SerializeObject(data);
                writer.Write(s);
                writer.Close();
            }
        }

        public static void LoadFromFile<t>(t date,string FileName)
        {
            using (StreamReader reader = new StreamReader(FileName))
            {

                data = JsonConvert.DeserializeObject<t>(reader.ReadToEnd());
                reader.Close();
            }
        }
    }
} 
```

但在`LoadFromFile`方法`data = JsonConvert.DeserializeObject<t>(reader.ReadToEnd());`不起作用！这意味着如果我有这个代码：

```
Class1 c1=new Class1();
c1.LoadFromFile<Class1>("c1.clf"); 
```

代码运行后的属性`c1`不会改变。

**我想知道为什么以及是否有任何解决方案可以`LoadFromFile`以独立（独立于类类型和属性）（动态）方式修改类或设置它的属性（反序列化它！）？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:52:41.757

您的 LoadFromFile 方法采用`t`您在方法内部分配的类型参数。这根本不符合逻辑。相反，使用返回值：

```
public static T LoadFromFile<T>(string fileName)
{
    using (StreamReader reader = new StreamReader(FileName))
    {
       return JsonConvert.DeserializeObject<T>(WpfApplication.Helper.Decrypt(reader.ReadToEnd()));
    }
} 
```

这将允许您像这样使用此代码：

```
Class1 c1 = LoadFromFile<Class1>("c1.clf"); 
```

旁注：如果您使用该`using`构造，则无需显式关闭流阅读器

# asp.net - ASP.NET 中用于验证器的正则表达式

> ID：12800369
> 
> 赞同：1
> 
> 时间：2012-10-09T12:46:36.650
> 
> 标签：asp.net, regex, validation

我想要下面的 asp.net 验证器中的正则表达式：

```
2012T8 
```

1.  first 必须是截至目前的有效年份
2.  第二个必须是字符 T
3.  第三个必须是任何单个数字

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:49:06.970

我通常避免使用正则表达式，好像不是我的所有团队成员都熟悉它，我们的代码看起来很乱，并且遗漏了容易解决的错误，所以我们通常只编写匹配代码。

自然，正则表达式的速度非常快，如果您要匹配大量数据，这是最好的方法。

我想你需要的是这样的：

```
^[1-9]{1}[0-9]{3}[T][0-9]{1}$ 
```

{1} 规定了必须满足匹配的字符数量，因此对于大于 0 的数字它是 1 个字符，然后是 3 个字符是任意数字，然后是字母 T，然后是单个数字。

# ruby-on-rails - 回形针图像无法保存在生产轨道中

> ID：12800375
> 
> 赞同：0
> 
> 时间：2012-10-09T12:46:50.477
> 
> 标签：ruby-on-rails, file-upload, paperclip, production-environment

我刚刚部署了一个 rails 应用程序，它使用 Paperclip 处理文件上传到运行 apache2、passenger、rails 3.2.3 和 ruby​​ 1.9.3 的 linux ubuntu 10.04 服务器。

我的设置在开发中工作得非常好，但是现在在生产图像中永远不会保存。

我在 production.rb 中注释掉了以下几行，以便 rails 处理文件上传，并尝试使用和安装 XSendFile。

```
# Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx 
```

和我的图片.rb

```
attr_accessible :photo_file_name, :photo_file_size, :photo_content_type, :photo, :splash_image
  validates_presence_of :photo_file_name, :photo_content_type, :photo_file_size

  has_attached_file :photo,
    styles: {
      thumb: "150x150>"
    },
       url: "/assets/splash_images/:id/:style/:basename.:extension",
       path: ":rails_root/public/assets/splash_images/:id/:style/:basename.:extension"

    validates_attachment_size :photo, :less_than => 25.megabytes
    validates_attachment_content_type :photo, content_type: /image/ 
```

有谁知道会发生什么？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:02:15.213

如果 ImageMagick 未安装在默认路径上，则需要指定路径。对于 Windows 用户，在 initializers/paperclip.rb 中执行以下操作：

> 需要“回形针”需要“rbconfig” is_windows = (RbConfig::CONFIG['host_os'] =~ /mswin|mingw|cygwin/)
> 
> Paperclip.options[:command_path] = 'C:\ImageMagick' if is_windows Paperclip.options[:swallow_stderr] = false

在您的 imagemagick 路径中找到“识别”的位置并将其放在这里。当然，你需要把linux路径放在那里。(/usr/bin/ ...)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:44:30.247

感谢 Meduza 和 Hugo 为我指明了正确的方向。为了成功上传和保存图像，我必须在 linux 服务器上安装 Imagemagick 并为图像路径提供写权限，如下所示：

如果不是从 root 运行，则附加 sudo

```
 apt-get install imagemagick
 apt-get install libmagick9-dev
 gem install rmagick

 chmod -R 777 app/app_name/public/assets/image_folder 
```

# c# - Mp3文件隔离存储

> ID：12800377
> 
> 赞同：0
> 
> 时间：2012-10-09T12:46:54.200
> 
> 标签：c#, silverlight, windows-phone-7

我想影响我在 Microsoft.FrameWorck.Media.Song 中读取的隔离存储流，我已经完成了以下代码：

```
 public void Restory()
{
        `  Media.ClearValue(MediaElement.SourceProperty);
          using (IsolatedStorageFile ISF = solatedStorageFile.GetUserStoreForApplication())
          {
              if (ISF.FileExists(MainPage.filename))
                  using (IsolatedStorageFileStream FS = ISF.OpenFile(MainPage.filename,FileMode.Open))
                  {

                      this.Media.SetSource(FS);
                      Media.Play();
                  //Media is Mediaenlement But in this step
                     i want to put that stream in Microsoft.Xna.FrameWorck.Media.Song
                  }
          }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:13:04.603

那是不可能的。`Song`仅适用于存储在用户的[MediaLibrary](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx)、远程 URI 或 XAP 文件本身中的曲目，而不是存储在隔离存储中的曲目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:51:16.833

听起来像 tee-stream（为 2 个消费者拆分一个流）在这里可能很有用，尽管如果读取以不同的速率发生，您将消耗内存。

[这是一个实现](http://www.codeproject.com/Articles/3922/EchoStream-An-Echo-Tee-Stream-for-NET)，[这是另一个](http://www.cookcomputing.com/blog/archives/tee-stream-in-csharp)。

# html - HTML - 居中 DIV 内容

> ID：12800379
> 
> 赞同：5
> 
> 时间：2012-10-09T12:46:55.043
> 
> 标签：html, css

我正在尝试使用类 test1 跨越和居中 div 的内容。跨越整个页面宽度的 div 是可行的。但是将 div 中的内容居中不会。简单地使用 align=center 会发生什么？

```
<style>
    div.test1
    {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }
    div.test2
    {
        display: inline;
        float: left;
    }
</style>

<div class="test1">
    <div class="test2">This</div>
    <div class="test2">Is</div>
    <div class="test2">A</div>
    <div class="test2">Test</div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:56:32.420

```
div.test1 {
    text-align: center;
}
div.test2 {
    display: inline-block;
    *display: inline; /* IE7 fix for inline-block */
    *zoom: 1;         /* IE7 fix for inline-block */
} 
```

[jsfiddle 演示](http://jsfiddle.net/Matt_Coughlin/tCvPM/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T12:50:56.280

试试这个：

```
<style>
    div.test1
    {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }

</style>

<div class="test1">
    <div class="test2">This</div>
    <div class="test2">Is</div>
    <div class="test2">A</div>
    <div class="test2">Test</div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T12:51:36.400

> 简单地使用 align=center 会发生什么？

该`align`标签[已弃用](http://www.w3.org/TR/html4/present/graphics.html#h-15.1.2)。无论如何，在这种情况下它是行不通的。

使用`display: inline-block;`代替`float: left;`（当然，删除`display: inline;`部分）。浮动元素*不能*居中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-16T15:59:36.560

只需`<center>`在开始 div 之前和`</center>`关闭 div 之后放置。像这样：

```
<center>
    <div class="test1">
    <div class="test2">This</div>
    <div class="test2">Is</div>
    <div class="test2">A</div>
    <div class="test2">Test</div>
</div>
</center> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:54:22.610

您使用 css 代码：

```
.test1 .test2{
   width:100%;
   text-align:center;
 } 
```

最好的祝福

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T13:19:08.573

div 是块级元素。跨度是内联的。考虑一个更大的 div 并跨越内部的较小元素。

# opencv - opencv中的像素强度#

> ID：12800384
> 
> 赞同：4
> 
> 时间：2012-10-09T12:47:19.493
> 
> 标签：opencv

我是图像处理和 Opencv 的初学者。我正在尝试使用 OPENCV# 找出图像的各个像素强度。这里有帮助：[http](http://docs.opencv.org/doc/user_guide/ug_mat.html?highlight=pixel%20intensity) ://docs.opencv.org/doc/user_guide/ug_mat.html?highlight=pixel%20intensity针对同一问题。但我不确定如何在 OPENCV# 中使用它。我知道这是一个非常基本的查询。请尝试提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:22:03.017

像素强度与该像素的灰度值相同。要获得 BGR 图像的灰度（像素强度）版本，您可以执行以下操作：

```
cv::cvtColor(bgr_mat,gray_mat,CV_BGR2GRAY); 
```

现在 3 通道 BGR 图像已转换为 1 通道 GRAYSCALE 图像。要查找灰度图像中像素 (x,y) 的强度，您可以执行以下操作：

```
//NOTE: in OpenCV pixels are accessed in (row,col) format
int intensity = (int)gray_mat.at<uchar>(y,x); 
```

由于每个灰度像素都存储为 uchar，因此值的`intensity`范围为 (0-255)，其中 255 是最大强度（视为完全白色的像素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:08:17.067

在 emgu cv 中，您可以这样[做](http://www.codeproject.com/Questions/171302/does-anybod-know-how-to-access-pixel-data)。

```
//Color
//Red 
byte Red_val = My_Image.Data[y,x,0];
//Green 
byte Green_val = My_Image.Data[y,x,1];
//Blue 
byte Blue_val = My_Image.Data[y,x,2]; 
```

* * *

```
//Greyscale
byte Gray_val = My_Image.Data[y,x,0]; 
```

# ruby-on-rails - 在 Rails 网站上的 ruby 中运行 XNA 游戏

> ID：12800386
> 
> 赞同：2
> 
> 时间：2012-10-09T12:47:34.300
> 
> 标签：ruby-on-rails, ruby, xna

我想知道是否有任何方法可以在使用 ruby​​ on rails 构建的网站中运行 XNA 中构建的 2D 游戏。我对这两种语言都很熟悉，XNA 比 ruby​​ 多。

我可以在相当短的时间内制作一个游戏，我需要为一个网站制作一个，但我宁愿使用我熟悉的语言来做这件事。如果没有，是否有任何关于语言/引擎/游戏创建工具的建议，我可以使用它们来构建一个简单的 2D 游戏，该游戏将在网站上展示？

我在编程方面经验丰富，我知道先进的编程技术，所以任何建议都很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:52:57.963

Ruby on Rails 是一个服务器端框架。XNA 是一个客户端框架。它们并没有真正的互操作——也不需要。

您可以使用[ExEn](http://andrewrussell.net/exen/)在 Silverlight 3 或 4 插件中运行 2D XNA 游戏。您还可以使用 Silverlight 5，它具有与 XNA 匹配的 3D API 和音频 API，并且具有添加 2D XNA 等功能的可用[工具包](http://silverlight.codeplex.com/releases/view/88660)`SpriteBatch`，从而使大多数 XNA API 可用。然后，您只需将 Silverlight 控件嵌入到您的 HTML 中。

常规 XNA 游戏（即：使用官方库）是必须从您的网站下载的可执行文件。

# html - 如何让菜单直接出现在父 li 下方

> ID：12800390
> 
> 赞同：2
> 
> 时间：2012-10-09T12:47:50.863
> 
> 标签：html, css

嗨，我认为这很简单，但我已经尝试了很多年。我想要的只是顶部的菜单，然后是出现在其父级中心的子菜单下方。

我已经提供了一个例子......

[http://jsfiddle.net/uzi002/HA5jJ/2/](http://jsfiddle.net/uzi002/HA5jJ/2/)

它不会居中的原因是因为父 li 的长度是由字符的长度决定的，不能是固定的宽度。减边距有效，但随后会弄乱其他子菜单的外观。

关于我们的示例看起来不错，但我们的服务却没有

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:51:41.863

给你：http: [//jsfiddle.net/HA5jJ/3/](http://jsfiddle.net/HA5jJ/3/)

我对你的绝对定位做了一些改变：`left:50%; margin-left: -64px;`你的父母`<li>`现在也有了`position:relative;`

# xcode - 放大时在 MKAnnotationView 上未检测到触摸

> ID：12800395
> 
> 赞同：2
> 
> 时间：2012-10-09T12:48:25.447
> 
> 标签：xcode, touch, zooming, mkannotationview

我在 MKAnnotationView 上添加了一个 tapGestureRegognizer。我在地图上添加了图钉注释。

引脚周围有一定的区域，不可点击。当我放大地图时，这个区域会变大。在这个缓冲区/填充区域中，触摸根本不起作用。

这是正确的行为吗？请帮忙...

# jquery - 超级鱼菜单 jquery

> ID：12800397
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:48:30.550
> 
> 标签：jquery

在我的网页中，我使用 superfish 菜单。菜单效果非常好，但它在鼠标悬停（悬停）时滑动。在我的情况下，我需要，菜单将在鼠标左键单击时滑动。你有什么想法，怎么做？谢谢

这是我的代码：

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
    <script type="text/javascript" src="Scripts/superfish.js"></script>
    <script type="text/javascript" src="Scripts/hoverIntent.js"></script>
    <script type="text/javascript">
        jQuery(function () {
            jQuery('ul.sf-menu').superfish();
        });
    </script>

    <ul class="sf-menu">
    <li class="current">
    <a href="#a">menu item</a>
    <ul>
    <li>
           <a href="#aa">menu item that is quite long</a>
    </li>
    <li class="current">
    <a href="#ab">menu item</a>
    <ul>
    <li class="current"><a href="#">menu item</a></li>
    <li><a href="#aba">menu item</a></li>
    <li><a href="#abb">menu item</a></li>
    <li><a href="#abc">menu item</a></li>
    <li><a href="#abd">menu item</a></li>
    </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:51:33.097

我已将插件更改为这种模式：（请注意版本是 1.4！）尝试将插件代码更改为此模式，它可以正常工作！

```
/*
 * Superfish v1.4.8 - jQuery menu widget
 * Copyright (c) 2008 Joel Birch
 *
 * Dual licensed under the MIT and GPL licenses:
 *  http://www.opensource.org/licenses/mit-license.php
 *  http://www.gnu.org/licenses/gpl.html
 *
 * CHANGELOG: http://users.tpg.com.au/j_birch/plugins/superfish/changelog.txt
 */

;(function($){
    $.fn.superfish = function(op){

        var sf = $.fn.superfish,
            c = sf.c,
            $arrow = $(['<span class="',c.arrowClass,'"> &#187;</span>'].join('')),
            over = function(){
                var $this = $(this), menu = getMenu($this);
                clearTimeout(menu.sfTimer);
                $this.showSuperfishUl().siblings().hideSuperfishUl();
            },
            out = function(){
                var $this = $(this), menu = getMenu($this), o = sf.op;
                clearTimeout(menu.sfTimer);
                menu.sfTimer=setTimeout(function(){
                    o.retainPath=($.inArray($this[0],o.$path)>-1);
                    $this.hideSuperfishUl();
                    if (o.$path.length && $this.parents(['li.',o.hoverClass].join('')).length<1){over.call(o.$path);}
                },o.delay); 
            },
            getMenu = function($menu){
                var menu = $menu.parents(['ul.',c.menuClass,':first'].join(''))[0];
                sf.op = sf.o[menu.serial];
                return menu;
            },
            addArrow = function($a){ $a.addClass(c.anchorClass).append($arrow.clone()); };

        return this.each(function() {
          var $this = $(this);
            var s = this.serial = sf.o.length;
            var o = $.extend({},sf.defaults,op);
            o.$path = $('li.'+o.pathClass,this).slice(0,o.pathLevels).each(function(){
                $(this).addClass([o.hoverClass,c.bcClass].join(' '))
                    .filter('li:has(ul)').removeClass(o.pathClass);
            });
            sf.o[s] = sf.op = o;
      // CHANGED: by KARL SWEDBERG
            if ( (o.eventType === 'hoverIntent' && !$.fn.hoverIntent) || !(/^(?:hover|hoverIntent|toggle)$/).test(o.eventType) ) {
              o.eventType = 'hover';
            }
            $this.find('li:has(ul)')[o.eventType](over,out).each(function() {
                if (o.autoArrows) {
                  addArrow( $('>a:first-child',this) );
                 // this.addClass("yourClass");
                }
            })
            .not('.'+c.bcClass)
                .hideSuperfishUl();

            $this.find('a').each(function(i){
                var $a = $(this), $li = $a.parents('li');
                $a.focus(function(){over.call($li);}).blur(function(){out.call($li);});
                $a.click(function(event) {
                  event.preventDefault();
                  if ( !$a.hasClass("sf-with-ul") ) {
                    location.href = this.href;
                  }
                });
            });
            o.onInit.call(this);

        }).each(function() {
            var menuClasses = [c.menuClass];
            if (sf.op.dropShadows  && !($.browser.msie && $.browser.version < 7)) {
              menuClasses.push(c.shadowClass);
            }
            $(this).addClass(menuClasses.join(' '));
        });
    };

    var sf = $.fn.superfish;
    sf.o = [];
    sf.op = {};
    sf.IE7fix = function(){
        var o = sf.op;
        if ($.browser.msie && $.browser.version > 6 && o.dropShadows && o.animation.opacity!=undefined) {
            this.toggleClass(sf.c.shadowClass+'-off');
        }
        };
    sf.c = {
        bcClass     : 'sf-breadcrumb',
        menuClass   : 'sf-js-enabled',
        anchorClass : 'sf-with-ul',
        arrowClass  : 'sf-sub-indicator',
        shadowClass : 'sf-shadow'
    };
    sf.defaults = {
        hoverClass  : 'sfHover',
        pathClass   : 'overideThisToUse',
        pathLevels  : 1,
        delay       : 800,
        animation   : {opacity:'show'},     
        speed       : 'normal',
        closeAnimation: {opacity: 'hide'},
        closeSpeed: 0,
        autoArrows  : true,
        dropShadows : true,
    // CHANGED: by KARL SWEDBERG
        eventType   : 'toggle', // one of 'toggle', 'hover', or 'hoverIntent'
    // disableHI  : false,    // true disables hoverIntent detection
        onInit      : function(){}, // callback functions
        onBeforeShow: function(){},
        onShow      : function(){},
        onHide      : function(){}
    };
    $.fn.extend({
        hideSuperfishUl : function(){
            var o = sf.op,
                not = (o.retainPath===true) ? o.$path : '';
            o.retainPath = false;
            var $closingLi = $(['li.',o.hoverClass].join(''),this).add(this).not(not);
            var $ul = $closingLi
                    .find('>ul');
            $ul.animate(o.closeAnimation, o.closeSpeed, function() {
              $closingLi.removeClass(o.hoverClass);
        $ul.css('visibility','hidden');
      });
            o.onHide.call($ul);
            return this;
        },
        showSuperfishUl : function(){
            var o = sf.op,
                sh = sf.c.shadowClass+'-off',
                $ul = this.addClass(o.hoverClass)
                    .find('>ul:hidden').css('visibility','visible');
            sf.IE7fix.call($ul);
            o.onBeforeShow.call($ul);
            $ul.animate(o.animation,o.speed,function(){ sf.IE7fix.call($ul); o.onShow.call($ul); });
            return this;
        }
    });

})(jQuery); 
```

# haskell - 是的安装失败

> ID：12800399
> 
> 赞同：4
> 
> 时间：2012-10-09T12:48:35.337
> 
> 标签：haskell, yesod

我通常发现超过一半的大包的 cabal 安装失败，这对新用户来说是一个致命的缺陷！

这次我尝试安装yesod，有什么提示吗？

```
> cabal install yesod
  ...
Loading package time-1.2.0.5 ...

GHCi runtime linker: fatal error: I found a duplicate definition for symbol
   _get_current_timezone_seconds
whilst processing object file
   C:\Users\guthrie\AppData\Roaming\cabal\time-1.2.0.5\ghc-7.4.1\HStime-1.2.0.5.o
This could be caused by:
   * Loading two different object files which export the same symbol
   * Specifying the same object file twice on the GHCi command line
   * An incorrect `package.conf' entry, causing some object to be
     loaded twice.
GHCi cannot safely continue in this situation.  Exiting now.  Sorry.

cabal: Error: some packages failed to install:
authenticate-1.3.1.1 depends on http-conduit-1.6.1.1 which failed to install.
http-conduit-1.6.1.1 failed during the building phase. The exception was:
ExitFailure 1
yesod-1.1.1.2 depends on yesod-core-1.1.2.1 which failed to install.
yesod-auth-1.1.1.1 depends on yesod-core-1.1.2.1 which failed to install.
yesod-core-1.1.2.1 failed during the building phase. The exception was:
ExitFailure 1
yesod-form-1.1.3 depends on yesod-core-1.1.2.1 which failed to install.
yesod-json-1.1.0 depends on yesod-core-1.1.2.1 which failed to install.
yesod-persistent-1.1.0 depends on yesod-core-1.1.2.1 which failed to install. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:07:15.297

yesod 使用与 Haskell 平台不同版本的 alex 包。除了 ghc，我总是从我的发行版的包管理器中安装 alex 和快乐，然后使用 cabal。或者，您可以随时使用

```
cabal update && cabal install alex happy
cabal install yesod-platform 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:25:52.423

这很可能是由于尝试同时安装两个版本的 time 包而发生的。您可以尝试运行`cabal install yesod-platform`并查看问题是否仍然存在？

正如@Inaimathi 所说，这可能是由于旧版本的`cabal`. 或许也可以试试`cabal update && cabal install cabal-install`。

# shopify - 422 在履行 API 调用期间无法处理的实体

> ID：12800400
> 
> 赞同：1
> 
> 时间：2012-10-09T12:48:37.473
> 
> 标签：shopify

尝试通过 POST 将跟踪号添加到订单的履行中时，我收到 422 Unprocessable Entity 错误，该 POST 到下面的 url，消息正文如下。订单仍处于打开状态，所有行都应使用相同的跟踪号进行配送。收到的错误正文是“履行的所有行项目必须使用相同的履行服务”。我能够首先成功进行身份验证，并且此订单的 GET API 可以正常工作。

https://*.myshopify.com/admin/orders/{order id}/fulfillments.json

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:32:52.640

您不能创建单个履行，其中行项目不能包含在同一货件中。检查您尝试履行的订单项，如果其中一个使用不同的服务，您将无法创建该履行。

相反，您需要创建 N 个单独的履行，其中 N 是该订单中行项目的不同履行服务数量。

# objective-c - free() 和 release 的区别

> ID：12800405
> 
> 赞同：3
> 
> 时间：2012-10-09T12:49:04.860
> 
> 标签：objective-c, cocoa-touch, memory-management, free

> **可能重复：**
> [free、dealloc、release 和 autorelease 之间有什么区别？](https://stackoverflow.com/questions/3335350/what-are-the-differences-between-free-dealloc-release-and-autorelease)

我想摆脱在我的应用程序中使用的分配内存。我知道我需要使用，但是和`release`有什么区别？他们是一样的吗？`free()``release`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:53:18.703

`free()`是 C 标准库的一部分，所以它是一个函数。它立即释放使用 获得的分配内存`malloc()`，因此必须传递一个由 分配的指针`malloc()`，否则它会调用未定义的行为。

`- release`是类的**方法**（相对于函数）`NSObject`。它不会立即释放内存；它只会将对象的引用计数减一。然后它还检查它是否为 0 - 如果它为零，它会调用`- dealloc`（通常由子类覆盖以释放由构造方法分配的内存，`- init`或`free()`由 分配的内存`malloc()`）。

所以它们根本不一样，***甚至不要试图互换使用它们！***

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T13:03:02.200

更有趣的部分是 free 是如何工作的：（在这个方向上， malloc 也可以更好地理解）

在许多 malloc/free 实现中，free 通常不会将内存返回给操作系统（或至少在极少数情况下）。原因是，您的堆中会出现间隙，因此它可能会发生，您刚刚完成 2 或 4 GB 的虚拟内存有间隙。这当然应该避免，因为一旦虚拟内存完成，你就会遇到很大的麻烦。另一个原因当然是，操作系统只能处理具有特定大小和对齐方式的内存块。具体来说：通常操作系统只能处理虚拟内存管理器可以处理的块（通常是 512 字节的倍数，例如 4KB）。

所以将 40 字节返回给操作系统是行不通的。那么免费有什么用呢？

Free 会将内存块放入自己的空闲块列表中。通常它还会尝试将地址空间中的相邻块融合在一起。空闲块列表只是内存块的循环列表，其中当然有一些管理数据。这也是为什么使用标准 malloc/free 管理非常小的内存元素效率不高的原因。每个内存块都需要额外的数据，并且尺寸越小，碎片就越多。

free-list 也是第一个位置，malloc 在需要时寻找新的内存块。它在从操作系统调用新内存之前被扫描。当发现一个大于所需内存的块时，它只是分为两部分。一个返回给调用者，另一个被放回空闲列表。

**发布**：Cocoa 使用某些命名约定。任何以 alloc、new 或 copy 开头的东西都会返回一个 retainCount 为 1 的东西，你需要释放。当 release 被调用时， reatinCount 减 1

# c# - 如何根据数组中的值对列表进行排序

> ID：12800407
> 
> 赞同：0
> 
> 时间：2012-10-09T12:49:19.393
> 
> 标签：c#

我有

```
List<string> strs;
double[] values; 
```

其中`values`数组包含`strs`列表中每个字符串的值

```
Say strs={"abc","def","ghi"}
and values={3,1,2} 
```

这意味着“abc”的值为 3，依此类推。

我希望按 排序`strs`和`values`排序`values`，这样它就变成了

```
strs={"def","ghi","abc"}
values={1,2,3} 
```

有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:52:10.643

您可以使用`Enumerable.Zip`，然后对结果进行排序，然后提取字符串列表。

就像是：

```
var result = strs.Zip(values, (first, second) => new Tuple<string, double>(first, second))
            .OrderBy(x => x.Item2)
            .Select(x => x.Item1)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:53:07.877

```
var sortedStrs = strs.Select((i, s) => new {Value = values[i], Str = s})
                     .OrderBy(x => x.Value)
                     .Select(x => x.Str).ToList(); 
```

如果您可以在逻辑上将这些值作为类的属性，例如：

```
class NameAndOrder
{
    public string Name;
    public int Order;
} 
```

然后它会更好，更有条理，然后你可以这样做：

```
var items = new List<NameAndOrder>(strs.Count);

for (var i = 0; i < strs.Count; i++)
{
    items.Add(new NameAndOrder { Name = strs[i], Order = values[i] });
}

items.Sort((a, b) => a.Order.CompareTo(b.Order)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T12:53:30.207

你是如何设置这些集合的？或者你给了这两个参数？

您可以创建一个`StringAndOrder`类并使用**LINQ**：

```
public class StringAndOrder
{
    public string String { get; set; }
    public double Order { get; set; }
}

List<StringAndOrder> list; //create with this structure instead
var orderedStrings = list.OrderBy(item => item.Order).Select(item => item.String); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T12:56:34.407

该`Array.Sort`方法有一个重载，它接受两个数组并根据第一个数组中的值对两个数组进行排序，因此从列表中创建一个数组：

```
string[] strsArr = strs.ToArray(); 
```

然后对它们进行排序再简单不过了：

```
Array.Sort(values, strsArr); 
```

然后回到一个列表，如果你需要的话：

```
strs = strsArr.ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T12:54:52.453

你为什么不使用字典对象..

```
Dictionary<string, int> dictionary =
    new Dictionary<string, int>();
dictionary.Add("cat", 2);
dictionary.Add("dog", 1);
dictionary.Add("llama", 0);
dictionary.Add("iguana", -1);
// Acquire keys and sort them.
var list = dictionary.Keys.ToList();
list.Sort(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T12:55:10.677

```
var strs = new[] { "abc", "def", "ghi" };
var values = new[] { 3, 1, 2 };

var newArr = strs.Select((s, i) => new { s, i })
                 .OrderBy(x => values[x.i])
                 .Select(x => x.s)
                 .ToArray(); 
```

# jquery - 如何删除列表分隔符 li 一旦删除其所有子 li

> ID：12800411
> 
> 赞同：1
> 
> 时间：2012-10-09T12:49:23.827
> 
> 标签：jquery, listview, jquery-mobile

我正在使用带有数据拆分图标“删除”的 jquery 移动列表视图。在该列表视图中，我使用数据分隔器将 li 与不同的组分开。一旦所有 li 从该数据分隔符下的列表视图中删除，我想删除特定的数据分隔符。说示例：检查以下列表视图代码片段。

```
<ul data-role="listview" data-autodividers="true" data-theme="c" data-divider-theme="d" data-split-icon="delete" data-split-theme="c">
    <li id="group1" data-role="list-divider">Group 1</li>
    <li id="item1">
        <a href="animals.html" data-rel="dialog" class="ui-link-inherit">Cat</a>
        <a id="del_4" data-theme="c"></a>
    </li>
    <li id="item2">
        <a href="animals.html" data-rel="dialog" class="ui-link-inherit">Dog</a>
        <a id="del_5"></a>
    </li>

    <li id="group2" data-role="list-divider">Group 2</li>
    <li id="item1">
        <a href="animals.html" data-rel="dialog" class="ui-link-inherit">Fish</a>
        <a id="del_4" data-theme="c"></a>
    </li>
</ul> 
```

在上面的代码中，如果我删除 li "Fish"，我也想自动删除 "Group 2" list-divider li，因为该组下没有 "li"。我尝试单独删除“li”，但一旦删除所有子“li”，我就无法删除列表分隔符“li”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:07:51.920

首先获取组ID。

```
 var p_id=$(this).parent().parent().attr("id"); 
```

然后检查它的孩子

```
 var childDivs = $("#"p_id li); 
```

如果它不包含子元素，请删除。

```
 if(childDivs.length<1)
         $("#"p_id).remove(); 
```

# c - 将 C 转换为 MIPS64 程序集

> ID：12800412
> 
> 赞同：0
> 
> 时间：2012-10-09T12:49:29.737
> 
> 标签：c, gcc, mips, mips64

我已经用 C 编写了一些代码，需要将其转换为 MIPS 64，无论是否进行优化。我一直在尝试使用 gcc 将其转换，但这会将其转换为复杂得多的 x86。此外，我一直在尝试找到一个交叉编译器，但无法让任何编译器工作。任何帮助和建议将不胜感激。

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:32:41.020

下载并安装 MIPS 的 Codesourcery 代码台后，调用 MIPS 64 修订版 2 架构的 MIPS gcc 交叉编译器，如下所示：

```
C:\Program Files (x86)\CodeSourcery\Sourcery_CodeBench_Lite_for_MIPS_GNU_Linux\bin\mips-linux-gnu-gcc -march=mips64r2 foo.c -S 
```

这会在`foo.s`.

与 codebench 一起安装的文档将告诉您该`-march`选项的其他可能值。其他 gcc 标志喜欢`-S`并`-O`正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:51:00.430

如果您使用 MIPS 交叉编译器，而不是针对 x86 的 gcc，则可以完成此“转换”（编译）。如果您需要查找 MIPS 交叉编译器 (gcc)，您可以从 codesourcery.com 获得一个预构建的

您问题中的措辞似乎表明您不太关心输出是 MIPS，而是希望输出不如 x86 复杂。如果是这种情况，您还可以检查 ARM 输出。

# javascript - 通过javascript判断是否存在另一个URL

> ID：12800423
> 
> 赞同：0
> 
> 时间：2012-10-09T12:50:00.640
> 
> 标签：javascript

我正在使用一个提供图像的 servlet。但是，生成它需要大约 30 秒。完成后，它会出现在 OpenLayers 交互式地图上。

我正在尝试为 www.test.com 上的用户找到一种方法来确认图像正在处理或已完成，该图像位于 www.test2.com。如果我打开 test2.com，我可以看到页面正在尝试加载。完成后，该图像也会出现在我在 test.com 上的地图上。

但是，我不知道如何测试此图像是否存在。我正在寻找可能像

```
 if(image exists at http://test2.com) {alert("request is done"); 
```

或者可能

```
 if(http://test2.com is loading) {doing something); 
```

如果请求失败，我只是不希望用户坐在旁边。如果失败，url 将完成加载 - 但是，不会出现任何图像。任何指导将不胜感激！谢谢！

凯尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:52:55.790

如果它是不同的服务器，JavaScript 将无法向该服务器发出任何类型的 Ajax 请求以查看它是否存在。您必须在本地域上有一个代理，它可以向第二个域发出头部请求。

如果您要等到图像加载后才能使用它，您始终可以执行图像预加载器，但这将花费全部时间在 onload 事件触发之前渲染图像。

```
var img = new Image();
img.src = theUrl;
img.onload = function() {
    nextStep(this);
};
img.onerror = function() {
     imgLoadingError(this);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:55:25.870

如果您可以控制另一台服务器，则可以在该服务器上放置一个小图像并执行以下操作：（未经测试的代码，直接输入）

```
var img = new Image();
// Note the order of these two statements
img.onload = function()("The image loaded! Server must be up");
img.src = "http://example2.com/myflag.png"; 
```

# escaping - 如何在 Inno Setup 中转义“{”和“}”

> ID：12800425
> 
> 赞同：6
> 
> 时间：2012-10-09T12:50:09.243
> 
> 标签：escaping, registry, inno-setup

如何转义字符`{`并`}`在 Inno Setup 中使用该`[Registry]`部分中的字符？

`{`，`"{"`不编译。

`%7d`, `"%7d"`,`{%7d}`全部编译，但不工作，它们导致注册表中的值错误。

最好的祝福。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T12:54:35.937

`{`你可以通过加倍来逃脱。无需转义，`}`因为它仅在常量内使用。

从[帮助文件](http://www.jrsoftware.org/ishelp/topic_consts.htm)：

> “{”字符被视为常量的开始。如果要在支持常量的地方使用该实际字符，则必须使用两个连续的“{”字符。（您不需要将“}”字符加倍。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T07:34:47.227

我想转义引号（“）。将其翻倍并不能转义，

我能够通过使用强制十六进制代码`{%|%22}`。

在[http://www.jrsoftware.org/ishelp/index.php?topic=consts](http://www.jrsoftware.org/ishelp/index.php?topic=consts)这个转义显示为`{%NAME|DefaultValue}`. 留空`NAME`使其使用十六进制代码。

# c# - 在单行中对齐标签和 Ajax 评级控制

> ID：12800426
> 
> 赞同：0
> 
> 时间：2012-10-09T12:50:12.777
> 
> 标签：c#, asp.net, html, css, alignment

我无法在一行中对齐标签和 Ajax Rating Control。

代码是，

```
<label class="Informlabel" style="font-size: 13px; font-weight: bold; float: left;
                width: 100%; overflow: auto; display: block; vertical-align: top;">
                Rating :</label>
<asp:Rating ID="Rating1" runat="server" MaxRating="5" CurrentRating="0" CssClass="ratingStar"
                    StarCssClass="ratingItem" WaitingStarCssClass="Saved" FilledStarCssClass="Filled"
                    EmptyStarCssClass="Empty" AutoPostBack="false">
                </asp:Rating> 
```

这是评级工具的CSS

```
li 
{
      clear:both;
      margin-bottom:1em;
      border-bottom:1px solid #eee;
}
/* ****************** RatingStar ****************** */
.ratingStar
{
      white-space:nowrap;
      margin:1em;
      height:17px;
      vertical-align:top;
}
.ratingStar .ratingItem {
    font-size: 0pt;
    width: 20px;
    height: 16px;
    margin: 0px;
    padding: 0px;
    display: inline-block;
    background-repeat: no-repeat;
    cursor:pointer;
}
.ratingStar .Filled {
    background-image: url(Images/Rating/Selected.gif);
}
.ratingStar .Empty {
    background-image: url(Images/Rating/Empty.gif);
}
.ratingStar .Saved {
    background-image: url(Images/Rating/Hover.gif);
} 
```

你能帮我吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:54:46.497

这是因为您的标签上有 display:block，它应该`display: inline-block;`与 Ajax Rating Control 的输出相同

# jquery - bxslider displaySlideQty 问题

> ID：12800435
> 
> 赞同：1
> 
> 时间：2012-10-09T12:50:54.150
> 
> 标签：jquery, bxslider

我目前正在用 bxslider 构建一个滑块。我认为一切正常，直到我需要向当前幻灯片添加一个活动类。我得到了这个工作正常，但在我的源代码中，我注意到幻灯片被复制了两次，如果不是 3 次。我的滑块中只有 3 张幻灯片。我已将 displaySlideQty 设置为 3 并将 moveSlideQty 设置为 1。

问题是正在添加活动类，但没有从重复的幻灯片中删除。下面是我的 bxslider 的 jquery 代码：

```
 $(document).ready(function(){
  var slider = $('#slider1').bxSlider({
    controls: false,
    displaySlideQty: 3,
    moveSlideQty: 1,

    onBeforeSlide: function(currentSlideNumber, totalSlideQty, currentSlideHtmlObject){
        $('.pager').removeClass('active-slide');   
         $(currentSlideHtmlObject).next().addClass('active-slide');
 //     $('#sddf').html('<p class="check">Slide index ' + currentSlide + ' of ' + totalSlides + ' total slides has completed.');

    } 
```

这是我的html：

```
<ul id="slider1" style="overflow:hidden; margin:auto;">
     <li id="slidel" style="width:960px;">
      <?php include('includes/sliders/center.php'); ?>
    </li>

    <li id="slidec" style="width:960px;">
      <?php include('includes/sliders/left.php'); ?>
    </li>
    <li id="slider" style="width:960px;">
      <?php include('includes/sliders/right.php'); ?>
    </div>
  </ul> 
```

这是萤火虫的输出：

```
<ul id="slider1" style="overflow: hidden; margin: auto; width: 999999px; position: relative; left: -960px;">
<li id="slider" style="width: 960px; float: left; list-style: none outside none;">
<li id="slidel" class="pager" style="width: 960px; float: left; list-style: none outside none;">
<li id="slidec" class="pager active-slide" style="width: 960px; float: left; list-style: none outside none;">
<li id="slider" class="pager" style="width: 960px; float: left; list-style: none outside none;">
<li id="slidel" style="width: 960px; float: left; list-style: none outside none;" class="active-slide">
<li id="slidec" style="width: 960px; float: left; list-style: none outside none;">
<li id="slider" style="width: 960px; float: left; list-style: none outside none;">
</ul> 
```

请注意上面有 2 个活动课程。底部的不会改变。

iv 花了将近一天的时间，却一无所获！任何帮助将不胜感激

干杯，丹

# colors - qtreeview 根有色

> ID：12800436
> 
> 赞同：1
> 
> 时间：2012-10-09T12:50:54.437
> 
> 标签：colors, qtreeview

我有一个带有彩色背景的 QTreeView，但我还需要根颜色。我不能这样做。有人可以帮助我吗？这是代码..

谢谢

从 PyQt4 导入 QtGui，QtCore

HORIZONTAL_HEADERS = ("姓氏", "名字")

类 person_class(object): def **init** (self, sname, fname, isMale): self.sname = sname self.fname = fname self.isMale = isMale

类 TreeItem(object): def **init** (self, person, header, parentItem): self.person = person self.parentItem = parentItem self.header = header self.childItems = []

```
def appendChild(self, item):
    self.childItems.append(item)

def child(self, row):
    return self.childItems[row]

def childCount(self):
    return len(self.childItems)

def columnCount(self):
    return 2

def data(self, column):
    if self.person == None:
        if column == 0:
            return QtCore.QVariant(self.header)
        if column == 1:
            return QtCore.QVariant("")                
    else:
        if column == 0:
            return QtCore.QVariant(self.person.sname)
        if column == 1:
            return QtCore.QVariant(self.person.fname)
    return QtCore.QVariant()

def parent(self):
    return self.parentItem

def row(self):
    if self.parentItem:
        return self.parentItem.childItems.index(self)
    return 0 
```

类 treeModel(QtCore.QAbstractItemModel): def **init** (self, parent=None): super(treeModel, self)。**init** (parent) self.people = [] for fname, sname, isMale in (("John","Brown", 1), ("Fred", "Bloggs", 1), ("Sue", "Smith" , 0)): person = person_class(sname, fname, isMale) self.people.append(person)

```
 self.rootItem = TreeItem(None, "ALL", None)
    self.parents = {0 : self.rootItem}
    self.setupModelData()

def columnCount(self, parent=None):
    if parent and parent.isValid():
        return parent.internalPointer().columnCount()
    else:
        return len(HORIZONTAL_HEADERS)

def data(self, index, role):
    if not index.isValid():
        return QtCore.QVariant()

    item = index.internalPointer()
    if role == QtCore.Qt.DisplayRole:
        return item.data(index.column())
    if role == QtCore.Qt.UserRole:
        if item:
            return item.person
    if role == QtCore.Qt.BackgroundRole :
        return QtGui.QColor('pink') 

    return QtCore.QVariant()

#def headerData(self, column, orientation, role):
    #if (orientation == QtCore.Qt.Horizontal and
    #role == QtCore.Qt.DisplayRole):
        #try:
            #return QtCore.QVariant(HORIZONTAL_HEADERS[column])
        #except IndexError:
            #pass

    #return QtCore.QVariant()

def index(self, row, column, parent):
    if not self.hasIndex(row, column, parent):
        return QtCore.QModelIndex()

    if not parent.isValid():
        parentItem = self.rootItem
    else:
        parentItem = parent.internalPointer()

    childItem = parentItem.child(row)
    if childItem:
        return self.createIndex(row, column, childItem)
    else:
        return QtCore.QModelIndex()

def parent(self, index):
    if not index.isValid():
        return QtCore.QModelIndex()

    childItem = index.internalPointer()
    if not childItem:
        return QtCore.QModelIndex()

    parentItem = childItem.parent()

    if parentItem == self.rootItem:
        return QtCore.QModelIndex()

    return self.createIndex(parentItem.row(), 0, parentItem)

def rowCount(self, parent=QtCore.QModelIndex()):
    if parent.column() > 0:
        return 0
    if not parent.isValid():
        p_Item = self.rootItem
    else:
        p_Item = parent.internalPointer()
    return p_Item.childCount()

def setupModelData(self):
    for person in self.people:
        if person.isMale:
            sex = "MALES"
        else:
            sex = "FEMALES"

        if not self.parents.has_key(sex):                
            newparent = TreeItem(None, sex, self.rootItem)
            self.rootItem.appendChild(newparent)

            self.parents[sex] = newparent

        parentItem = self.parents[sex]
        newItem = TreeItem(person, "", parentItem)
        parentItem.appendChild(newItem) 
```

如果**名称**== “**主要**”：

```
app = QtGui.QApplication([])
model = treeModel()
dialog = QtGui.QDialog()
dialog.setMinimumSize(300,150)
layout = QtGui.QVBoxLayout(dialog)

tv = QtGui.QTreeView(dialog)
tv.setModel(model)
layout.addWidget(tv)

dialog.exec_()
app.closeAllWindows() 
```

# c# - 用EPPlus打开excel而不保存到文件

> ID：12800440
> 
> 赞同：3
> 
> 时间：2012-10-09T12:51:01.263
> 
> 标签：c#, excel, automation, epplus

现在我正在使用 System.Diagnostics.Process.Start(fileInfo); 打开 excel。

将我的包保存到文件后打开它。

是否可以打开excel而无需将文件保存到某个位置？我希望用户决定是否保存文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:59:03.970

如果您使用 EPPlus（或任何其他直接生成文件的库）自己生成文件，则需要先保存它，然后才能在 Excel 中打开它。我建议将其保存在临时目录中，然后将其显示给用户并让他们选择如何处理它。

如果使用 Office 自动化生成文件，则可以在保存之前将其显示给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-07T13:32:28.287

我认为这个答案将有助于新开发人员。我认为在不保存的情况下查看 Excel 的最佳选择是 Microsoft.Office.Interop.Excel

打开 Nuget 包控制台`Install-Package Microsoft.Office.Interop.Excel`

这里创建Excel文件是[Excel官方文档](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/interop/how-to-access-office-onterop-objects)

在填写 Excel 文件的最后只需键入`app.Visible = true;`app 是对象名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-10T12:37:07.027

我知道这已经晚了，但我遇到了同样的问题。

我曾经使用`Microsoft.Office.Interop.Excel`将数据导出到`xlsx`文件而不保存它。它会以**Book1.xlsx**的形式很好地呈现给最终用户，他们可以保存或关闭它而不需要保存。

我还迁移到**EPPlus**以提高我的导出速度，因此，正如您所经历的那样，如果不先保存打开的文件，就无法将其呈现给最终用户。

我采用的方法是使用**SaveFileDialog**组件在创建文件***之前***提示用户输入名称。`EPPlus`这至少允许最终用户确定文件应该保存在哪里，而不是使用“硬编码”目录。

```
Private Sub btnExportXlsxEPPlus_Click(sender As Object, e As EventArgs) Handles btnExportXlsxEPPlus.Click

    Try
        Dim filInf As FileInfo = New FileInfo(GetFileToSave())

        Using excelPackage As ExcelPackage = New ExcelPackage
            excelPackage.Workbook.Properties.Author = "enLIGHTen"
            excelPackage.Workbook.Properties.Title = "enLIGHTen Report"
            excelPackage.Workbook.Properties.Subject = "enLIGHTen export data"
            excelPackage.Workbook.Properties.Created = Date.Now

            Dim worksheet As ExcelWorksheet = excelPackage.Workbook.Worksheets.Add("Sheet 1")
            worksheet.Cells("A1").Value = "My EPPlus spreadsheet!"
            worksheet.Cells(1, 2).Value = "This is cell B1!"
            excelPackage.SaveAs(filInf)
        End Using

        Using excelPackage As ExcelPackage = New ExcelPackage(filInf)
            Dim firstWorksheet As ExcelWorksheet = excelPackage.Workbook.Worksheets(1)
            Dim namedWorksheet As ExcelWorksheet = excelPackage.Workbook.Worksheets("SomeWorksheet")
            Dim anotherWorksheet As ExcelWorksheet = excelPackage.Workbook.Worksheets.FirstOrDefault(Function(x) x.Name Is "SomeWorksheet")
            Dim valA1 As String = firstWorksheet.Cells("A1").Value.ToString
            Dim valB1 As String = firstWorksheet.Cells(1, 2).Value.ToString
            excelPackage.Save()
        End Using

        Dim proc As Process

        Try
            proc = New Process()
            Process.Start(filInf.FullName)
        Catch ex As Exception
            MsgBox("File cannot be opened", MsgBoxStyle.Information, "Cannot open file")
        End Try
    Catch

    End Try
End Sub

Public Function GetFileToSave()
    Dim strFilename As String = ""
    SaveFileDialog1.Filter = "Excel Workbook (*.xlsx)|*.xlsx"
    If SaveFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
        strFilename = SaveFileDialog1.FileName
        Return strFilename
    End If
End Function 
```

# android - 如何在android中使用数组创建ksoap请求

> ID：12800447
> 
> 赞同：0
> 
> 时间：2012-10-09T12:51:22.073
> 
> 标签：android, arrays, ksoap2

我知道一些关于 ksoap 请求的基础知识，如果它很简单，我可以做到没有问题。但我不知道如何提出将解析为如下所示的请求转储的请求：

```
<Organizer xsi:type="tns:Person"><name xsi:type="xsd:string">hisname</name>
<lastname xsi:type="xsd:string">hislast</lastname> 
```

人是这样定义的：

```
 <xsd:complexType name="Person"><xsd:all>
 <xsd:element name="name" type="xsd:string" nillable="true"/>
 <xsd:element name="lastname" type="xsd:string" nillable="true"/>
 </xsd:all></xsd:complexType> 
```

之后我需要发送一组人员。它应该看起来像

```
 <guests xsi:type="soap-enc:Array" soap-enc:arrayType="tns:Person[1]">
 <item xsi:type="tns:Person">
 <name xsi:type="xsd:string">mitja</name>
 <lastname xsi:type="xsd:string">last</lastname>
 </item></guests> 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:24:49.557

使用 KSoap2 处理数组可能很棘手，并且它以不同的方式执行，具体取决于您使用的 KSoap2 版本。在我们的案例中，我们定义了可扩展的 SoapObject (ExtendedSoapObject)，它在用作请求 DTO 时接受数组字段作为属性，并在用作响应 DTO 时克服了数组处理问题。

我们为 Ksoap2 的 Android 和 J2ME 版本定义了不同版本的 ExtendedSoapObject 对象。

这是安卓版本：

```
/**
 * Clase que extiende la funcionalidad de SoapObject para poder establecer
 * propiedades de tipo array dado que la implementación de KSoap2 tiene la
 * limitación de tratar los objetos de un array como múltiples propiedades con
 * el mismo nombre. Pero si intentamos recuperar la propiedad en cuestión a
 * partir del nombre sólo nos devuelve la primera instancia.
 * 
 * @author BIFMP
 */
public class ExtendedSoapObject extends SoapObject
{

    /**
     * Crea una instancia de {@link ExtendedSoapObject}
     * 
     * @param namespace
     *            namespace del objeto
     * @param name
     *            nombre del objeto
     */
    public ExtendedSoapObject(String namespace, String name)
    {
        super(namespace, name);
    }

    /**
     * Crea una instancia de {@link ExtendedSoapObject} a partir de una
     * instancia de la clase base.
     * 
     * @param o
     *            instancia de {@link SoapObject}
     */
    public ExtendedSoapObject(SoapObject o)
    {
        super(o.getNamespace(), o.getName());
        for (int i = 0; i < o.getAttributeCount(); i++)
        {
            AttributeInfo ai = new AttributeInfo();
            o.getAttributeInfo(i, ai);
            ai.setValue(o.getAttribute(i));
            addAttribute(ai);
        }

        for (int i = 0; i < o.getPropertyCount(); i++)
        {
            PropertyInfo pi = new PropertyInfo();
            o.getPropertyInfo(i, pi);
            pi.setValue(o.getProperty(i));
            addProperty(pi);
        }
    }

    /**
     * Permite pasar objetos de tipo array.
     */
    @Override
    public SoapObject addProperty(String name, Object value)
    {
        if (value instanceof Object[])
        {
            Object[] subValues = (Object[]) value;
            for (int i = 0; i < subValues.length; i++)
            {
                super.addProperty(name, subValues[i]);
            }
        }
        else
        {
            super.addProperty(name, value);
        }

        return this;
    }

    /**
     * Este método devuelve un objeto {@link SoapObject} o valor primitivo
     * {@link SoapPrimitive} o un array de los mismos. Puede devolver null si es
     * el valor que tiene la propiedad (porque fue lo que devolvió el método
     * remoto) o si no se encuentra la propiedad.
     */
    @Override
    public Object getProperty(String name)
    {
        List<Object> result = new ArrayList<Object>();

        for (int i = 0; i < properties.size(); i++)
        {
            PropertyInfo prop = (PropertyInfo) properties.elementAt(i);
            if (prop.getName() != null && prop.getName().equals(name))
            {
                result.add(unwrap(prop));
            }
        }

        if (result.size() == 1)
        {
            return result.get(0);
        }
        else if (result.size() > 1)
        {
            return result.toArray(new Object[0]);
        }
        else
        {
            return null;
        }
    }

    /**
     * Este método siempre devuelve un array de objetos.
     * 
     * @param name
     * @return
     */
    public Object[] getArrayProperty(String name)
    {
        Object o = getProperty(name);
        Object values[] = null;
        if (o != null)
        {
            if (o instanceof Object[])
            {
                values = (Object[]) o;
            }
            else
            {
                values = new Object[1];
                values[0] = o;
            }
        }

        return values;
    }

    Object unwrap(Object o)
    {
        if (o instanceof PropertyInfo)
        {
            return unwrap(((PropertyInfo) o).getValue());
        }
        else if (o instanceof SoapPrimitive || o instanceof SoapObject)
        {
            return o;
        }

        return null;
    }
} 
```

J2ME 版本：

```
/**
 * Clase que extiende la funcionalidad de SoapObject para poder establecer
 * propiedades de tipo array dado que la implementación de KSoap2 tiene la
 * limitación de tratar los objetos de un array como múltiples propiedades con
 * el mismo nombre. Pero si intentamos recuperar la propiedad en cuestión a
 * partir del nombre sólo nos devuelve la primera instancia.
 * 
 * @author BIFMP
 */
public class ExtendedSoapObject extends SoapObject
{

    /**
     * Crea una instancia de {@link ExtendedSoapObject}
     * 
     * @param namespace
     *            namespace del objeto
     * @param name
     *            nombre del objeto
     */
    public ExtendedSoapObject(String namespace, String name)
    {
        super(namespace, name);
    }

    /**
     * Crea una instancia de {@link ExtendedSoapObject} a partir de una
     * instancia de la clase base.
     * 
     * @param o
     *            instancia de {@link SoapObject}
     */
    public ExtendedSoapObject(SoapObject o)
    {
        super(o.getNamespace(), o.getName());

        for (int i = 0; i < o.getPropertyCount(); i++)
        {
            PropertyInfo pi = new PropertyInfo();
            o.getPropertyInfo(i, null, pi);
            addProperty(pi, o.getProperty(i));
        }
    }

    /**
     * Permite pasar objetos de tipo array.
     */
    public SoapObject addProperty(String name, Object value)
    {
        if (value instanceof Object[])
        {
            Object[] subValues = (Object[]) value;
            for (int i = 0; i < subValues.length; i++)
            {
                super.addProperty(name, subValues[i]);
            }
        }
        else
        {
            super.addProperty(name, value);
        }

        return this;
    }

    /**
     * Este método devuelve un objeto {@link SoapObject} o valor primitivo
     * {@link SoapPrimitive} o un array de los mismos. Puede devolver null si es
     * el valor que tiene la propiedad (porque fue lo que devolvió el método
     * remoto) o si no se encuentra la propiedad.
     */
    public Object getProperty(String name)
    {
        Vector result = new Vector();

        PropertyInfo info = new PropertyInfo();

        for (int i = 0; i < getPropertyCount(); i++)
        {
            getPropertyInfo(i, null, info);
            if (info.name != null && info.name.equals(name))
            {
                result.addElement(getProperty(i));
            }
        }

        if (result.size() == 1)
        {
            return result.elementAt(0);
        }
        else if (result.size() > 1)
        {
            Object resultArray[] = new Object[result.size()];
            result.copyInto(resultArray);
            return resultArray;
        }
        else
        {
            return null;
        }
    }

    /**
     * Este método siempre devuelve un array de objetos.
     * 
     * @param name
     * @return
     */
    public Object[] getArrayProperty(String name)
    {
        Object o = getProperty(name);
        Object values[] = null;
        if (o != null)
        {
            if (o instanceof Object[])
            {
                values = (Object[]) o;
            }
            else
            {
                values = new Object[1];
                values[0] = o;
            }
        }

        return values;
    }
} 
```

# c# - 如何显示最多 200 个字符的字符串并修剪最后几个字符直到空白

> ID：12800448
> 
> 赞同：0
> 
> 时间：2012-10-09T12:51:23.247
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 .Net C# 中截断整个单词的字符串](https://stackoverflow.com/questions/1613896/truncate-string-on-whole-words-in-net-c-sharp)

我必须显示新闻的简短描述，让我们说最多 200 个字符并修剪最后几个字符直到空白，我不确定如何在字符串上触发这种

示例文本

`sample news description of news sample news description of news sample news description of news sample news description of news sample news description of news sample news description of news sample news description of news.`

**输出代码如下**

`sample news description of news sample news description of news sample news description of news sample news description of news sample news description of news sample news description of news sample n`

```
 if (sDesc.Length > 200)
    {
        sDesc = sDesc.Substring(0, 200);
       // sDesc = sDesc + "...";
    } 
```

我怎样才能修剪最后几个字符，使其不显示单词的一部分。我希望你明白我想说什么。

**所需的输出**

新闻样本新闻描述 新闻样本新闻描述 新闻样本新闻描述 新闻样本新闻描述 新闻样本新闻描述 新闻样本新闻描述 新闻样本新闻描述

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T12:57:11.407

您应该在 200 索引之前找到该空间的索引。所以搜索所有出现，然后选择最接近 200 的索引。然后使用这个索引做一个子字符串，你应该很好去

```
string myString = inputString.Substring(0, 200);

int index = myString.LastIndexOf(' ');

string outputString = myString.Substring(0, index); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:04:28.613

```
if (sDesc.Length > 200)
{
    var str = sDesc.Substring(0, 200);
    var result = str.Substring(0, str.LastIndexOf(' '));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:55:15.990

作为公认的答案，这将更快，因为它通过不首先在 200 处切断，而是使用 LastIndexOf 的 start 和 count 参数来减少一次 stringcopy

```
 var lio = inputString.LastIndexOf(' ', 0, 200));
            if (lio==-1) lio = 200;
            var newString = inputString.Remove(lio); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:05:59.353

您可以找到 200 之后的空格并将子字符串取到索引 200 之后的第一个空格。

```
int i = 200;
for(i=200; i < sDesc.Length; i++)
{
      if(input[i] == ' ')
         break;
}

string res = sDesc.Substring(0, i); 
```

# visual-studio-2010 - 使用 powershell 安排 Visual Studio 负载测试给我 BSOD

> ID：12800449
> 
> 赞同：1
> 
> 时间：2012-10-09T12:51:24.187
> 
> 标签：visual-studio-2010, load-testing, schedule

我有一个 Visual Studio 负载测试，我想每小时运行一次，以便开始收集一些数据。

为此，我认为最好制作一个小 powershell 脚本并在其中放入如下命令：

> 调用表达式 -command "& '$env:VS100COMNTOOLS..\IDE\mstest.exe' /testcontainer: `"C:\Users\benb\Documents\Visual Studio 2010\Projects\BBPerformanceTest\bin\Debug\HomePageOnly.loadtest`""

该命令运行良好，但有时在运行时我会出现蓝屏死机。但是，当我通过 Visual Studio GUI 运行负载测试时，我从来没有遇到过 BSOD。

两个问题：

1.  是否有可能避免这种蓝屏死机？
2.  还有其他方法可以安排我的负载测试吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:28:21.270

我只是在计划任务中直接调用了 MStest.exe（而不是通过 powershell 脚本间接调用）。这似乎解决了问题。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:31:35.627

我的第一个建议是分析内存转储文件以找出崩溃的根本原因（它可能不是负载测试）。本文包含有关如何执行此操作的信息：http: [//support.microsoft.com/kb/315263](http://support.microsoft.com/kb/315263)

回答您的第二个问题：您还可以使用批处理文件而不是 powershell 脚本。

我希望这有帮助。

# android - GPS 数据 -> MySQL -> Android 排序的 ListView

> ID：12800459
> 
> 赞同：0
> 
> 时间：2012-10-09T12:51:44.297
> 
> 标签：android, mysql, sorting, gps

我正在编写一个 Android 应用程序，该应用程序通过 ListView 显示来自 MySQL 数据库的数据并进行一些排序：1）首先显示*通过 GPS 更接近 android 手机的项目*

如果有 2 个或更多*距离相等的项目，则应用第二**个*排序参数-time 。

2）时间较近的项目优先显示。

这是我想实施的流程方案：

![app - nysql 连接方案； 桌子](../Images/9e2d555ebb7659af221840a740b76d1e.png)

我的想法是将所有需要的行放入 Array，然后用它进行一些 PHP 操作，然后将排序后的 Array 拉到手机上。（如上图所示）

所以请告诉我什么是正确的方法？也许这个功能有更简单的方法？

或者也许我应该在编写 ListView 时完全在 Android 应用程序中进行所有排序，只从数据库中获取标准的“SELECT *”数组？那么，是否有机会创建一个基于计算值排序的 ListView？

# c# - 在 C# 中对 ListBox 进行数字排序

> ID：12800461
> 
> 赞同：0
> 
> 时间：2012-10-09T12:51:46.460
> 
> 标签：c#, arrays, listbox, arraylist

我试图对一个充满数字的列表框进行数字排序。为什么这不起作用？

```
 {
            ArrayList Sorting = new ArrayList();
            Sorting.Add (lbNumbers.Text);
            int[] items = new int[Sorting.Count];
            Sorting.CopyTo(items);
            Array.Sort(items);
            lbNumbers.Items.Add(items);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:53:39.253

可能是因为当您的数字表示为字符串时，它们不会按照您期望的方式排序。它们将排序为字符串而不是数字。

例如，如果您有一个列表，例如：

```
10
9
101 
```

它将被排序为：

```
10
101
9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:02:15.623

首先，解析字符串元素，然后排序。

```
// the itemList is your lbNumbers.Text
var itemList = new List<string> {"9", "1", "10", "11"};

// use TryParse if you're not sure if really all elements are numbers
var numberList = itemList.Select(int.Parse).ToList();
numberList.Sort(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:54:56.773

```
ArrayList Sorting = new ArrayList(); 

foreach (var o in listBox1.Items) {
    Sorting.Add(o);
} 

Sorting.Sort(); 

listBox1.Items.Clear();

foreach (var o in Sorting) {
    listBox1.Items.Add(o); 
} 
```

**添加：**对于按降序排序，

1.创建一个类ReverseSort，如下图：

```
// implementation:
public class ReverseSort : IComparer
{
    public int Compare(object x, object y)
    {
        // reverse the arguments
        return Comparer.Default.Compare(y, x);
    }    
} 
```

2.将Sort的代码行替换为这一行：

```
Sorting.Sort(new ReverseSort()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:55:00.043

您正在排序 lbNumbers.Text => 字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:55:35.277

您必须`clear`在排序之前

```
ArrayList arrayList = new ArrayList(); 
foreach (object o in lbNumbers.Items) 
{
   arrayList.Add(o);
}

arrayList.Sort(); 

lbNumbers.Items.Clear();

foreach(object o in arrayList)
{
    lbNumbers.Items.Add(o); 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T13:04:10.487

使用一点 LINQ

```
 string list = "1,24,3,10,12,11";

        //Split the string into the tokens containing the numbers
        string[] tokens = list.Split(',');

        //Parse each string representing an integer into an integer
        //return the resultant object as an array of integers
        int[] sorting = tokens.Select(x => int.Parse(x)).ToArray<int>();

        //Sort them numerically and return as an array of integers
        sorting = sorting.OrderBy(x => x).ToArray<int>();

        //Display them to convince ourselves it works.
        foreach (int x in sorting)
        {
            Console.WriteLine(x);
        }

        Console.ReadLine(); 
```

解析和排序可以在同一个语句中完成，但为了便于阅读，这里分开了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-09T13:21:55.387

试试这个例子：

```
 listBox1.Items.Add(3);
    listBox1.Items.Add(1);
    listBox1.Items.Add(2);

    ArrayList sort = new ArrayList();
    foreach (object item in listBox1.Items)
    {
        sort.Add(item);
    }
    sort.Sort();
    listBox1.Items.Clear();
    foreach (int item in sort)
    {
        listBox1.Items.Add(item);
    } 
```

您尝试做的是只阅读选定的文本。通过这种方式，您可以将列表框中的所有项目添加到数组列表中，对它们进行排序，然后将它们再次添加回列表框。

请记住，所有未排序的项目仍然存在，因此您需要先清除列表框。这就是它的`listBox1.Items.Clear();`作用

# mysql - Grails H2 数据库 DbConsole - 数据库备份

> ID：12800464
> 
> 赞同：1
> 
> 时间：2012-10-09T12:51:55.863
> 
> 标签：mysql, grails, h2, grails-2.0

我有 Grails 2.0，它带有 H2 数据库和 dbconsole。

我想从 dbconsole 获取数据库备份：

数据库网址：“jdbc:mysql://localhost/opal”

用户名：root

密码：（无）

在 dbconsole 的工具部分有一个备份数据库的选项。

它会问 3 件事

目标文件名：~/backup.zip（默认）

源码目录：

源数据库名称：蛋白石（我的数据库名称）

当我按下运行时，它给出了错误，

```
 No database files have been found in directory E:/Workspace/opal for the database opal 
```

任何人都可以建议如何进行数据库备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T07:46:38.697

我认为这个[网站](http://www.ibm.com/developerworks/library/j-grails07158/)会很有帮助。或者，在转储数据库并恢复数据库时，请尝试以下代码段：

```
mysqldump -u root -p my_database Table1 Table2 > /home/user/tablesDump.sql; 
```

并恢复表：

```
mysql -u root -p my_database_2  
mysql> source /home/user/tablesDump.sql; 
```

这两个表都是在 my_database_2 中创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:10:46.360

我从来没有让它工作。如果您只想要开发数据的快照（启动时加载），我发现使用 DBUnit 导出/导入数据对我来说非常有用。我写了一个脚本来导出它，我从控制台调用它：

```
 class DataExport {

    def ctx = SCH.servletContext.getAttribute(GA.APPLICATION_CONTEXT)   

    def exportData() {
        println "-->export"
        def ds = ctx.dataSourceUnproxied
        println ds.dump()

        Connection jdbcConnection = ctx.dataSourceUnproxied.getConnection()
        IDatabaseConnection connection = new DatabaseConnection(jdbcConnection);
        println connection.dump()
        ITableFilter filter = new DatabaseSequenceFilter(connection);
        IDataSet dataset = new FilteredDataSet(filter, connection.createDataSet());
        FlatXmlDataSet.write(dataset, new File("full.xml").newWriter());
        connection.close()
    }
} 
```

然后在引导程序中，您可以将其重新加载

```
Connection jdbcConnection
FlatXmlDataSet dataSet = new FlatXmlDataSetBuilder().build(new ClassPathResource('resources/data/full.xml').inputStream)

jdbcConnection = ctx.dataSource.getConnection()
IDatabaseConnection connection = new DatabaseConnection(jdbcConnection);
try {
     DatabaseOperation.INSERT.execute(connection, dataSet)
} catch(e) {
    e.printStackTrace()
    throw(e)
} finally {
    jdbcConnection.close()
}
log.info 'data loaded' 
```

# iphone - uitextfield 响应者的问题

> ID：12800465
> 
> 赞同：0
> 
> 时间：2012-10-09T12:52:01.840
> 
> 标签：iphone, objective-c, ios

我正在为我的应用程序创建登录名，但`UITextField's`响应者有问题。我有 2 个字段，其中一个用于电子邮件，另一个用于密码。第一个，有返回的“下一步”按钮，第二个是“完成”按钮。问题是我正在为这些按钮开发逻辑。`textfieldShouldReturn`方法是这样的：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{    
    if ([emailField isFirstResponder]) {
        NSLog(@"NEXT");
    } else if ([passwordField isFirstResponder]) {
        [passwordField resignFirstResponder];
    }
    return YES;
} 
```

关于字段的代码：

```
CGRect frame = CGRectMake(20, 0, 280, 44);

emailField = [[UITextField alloc] initWithFrame:frame];
[emailField setPlaceholder:@"Correo electronico"];
[emailField setKeyboardType:UIKeyboardTypeEmailAddress];
[emailField setReturnKeyType:UIReturnKeyNext];
[emailField setClearButtonMode:UITextFieldViewModeWhileEditing];
[emailField setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];
[emailField setAutocapitalizationType:UITextAutocapitalizationTypeNone];
[emailField setAutocorrectionType:UITextAutocorrectionTypeNo];
[emailField setDelegate:self];

passwordField = [[UITextField alloc] initWithFrame:frame];
[passwordField setPlaceholder:@"Contraseña"];
[passwordField setKeyboardType:UIKeyboardTypeDefault];
[passwordField setReturnKeyType:UIReturnKeyDone];
[passwordField setSecureTextEntry:YES];
[passwordField setClearButtonMode:UITextFieldViewModeWhileEditing];
[passwordField setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];
[passwordField setAutocapitalizationType:UITextAutocapitalizationTypeNone];
[passwordField setAutocorrectionType:UITextAutocorrectionTypeNo];
[passwordField setDelegate:self]; 
```

当我在`emailField`并按下下一个键时，没有任何反应，但如果我在`passwordField`并按下完成键，应用程序工作正常并隐藏键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:54:20.783

**这是我的代码**

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    if (textField == fieldUsername) {
        [fieldPassword becomeFirstResponder];
    } else if (textField == fieldPassword) {
        [self doLogin];
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:55:48.620

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{    
        if (textField == emailField) {
            NSLog(@"NEXT");
            [emailField resignFirstResponder];
            [passwordField becomeFirstResponder];
        }
        else if (textField == passwordField) {
            [passwordField resignFirstResponder];
        }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:56:42.723

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField
 {    
if ([emailField isFirstResponder]) {
    NSLog(@"NEXT");
   [passwordField becomefirstresponder];///add this 
} else if ([passwordField isFirstResponder]) {
    [passwordField resignFirstResponder];
}
return YES;
} 
```

# windows - 如何在 Windows 上配置 svn authz？

> ID：12800467
> 
> 赞同：2
> 
> 时间：2012-10-09T12:52:05.183
> 
> 标签：windows, svn, configuration, authz

我们想启动两个新的开发项目：`Project1`和`Project2`. 我们有两组开发人员：

*   `GroupA`应该对这两个项目具有完全（读+写）访问权限，并且
*   `GroupB`应该无权访问`Project1`，但可以完全访问`Project2`。

我按照[Jeff Atwood 的教程](http://www.codinghorror.com/blog/2008/04/setting-up-subversion-on-windows.html)成功地在 Windows Server 2003 上安装了[subversion 1.7.6](http://sourceforge.net/projects/win32svn/)作为 Windows 服务。我通过添加文件夹和文件并提交更改来测试系统，并且一切正常（客户端是[TortoiseSVN 1.7.9](http://sourceforge.net/projects/tortoisesvn/?source=dlp)）。

不幸的是，我无法弄清楚如何在`authz`. 开发人员可以连接到服务器，但`Authorization failed`在尝试提交某些内容时会收到消息。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:28:30.263

我建议您阅读[SVNBook（带有 Subversion 的版本控制）](http://svnbook.red-bean.com/en/1.8/)。[请参阅描述基于路径的授权](http://svnbook.red-bean.com/en/1.8/svn.serverconfig.pathbasedauthz.html)的章节。我认为这一章回答了你的问题。

下面提供了示例`authz`文件。请注意，我没有在存储库目录上为**GroupB明确设置***“禁止访问”*规则。我将*“所有人”*的根节点设置为*“无访问权限*” ，然后此权限将由其子项继承，除非您明确提供对文件夹或文件的访问权限。**`/repo/Project1`**

 ****```
[/]
*=

[groups]
GroupA=john,sally
GroupB=harry,george

[repo:/Project1]
@GroupA=rw

[repo:/Project2]
@GroupA=rw
@GroupB=rw 
```

我想指出，如果您使用[VisualSVN 服务器管理器](http://www.visualsvn.com/server/features/#console)，您可以大大简化管理 SVN 用户权限的过程。

*它提供了舒适的 UI 来管理用户权限，您会发现这非常有用：*![VisualSVN 服务器管理器](../Images/ce987561639ec443fac5d5f49a5bc5a9.png)

## 2016 年更新

要管理托管在 VisualSVN Server 上的 SVN 存储库的访问规则，您现在可以使用与 VisualSVN Server 一起打包的 PowerShell cmdlet。从 3.4 版开始，VisualSVN Server 包含 PowerShell 模块，可以帮助您完成此任务。您正在寻找的 cmdlet 是

*   [`Add-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Add-SvnAccessRule)
*   [`Get-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Get-SvnAccessRule)
*   [`Select-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Select-SvnAccessRule)
*   [`Set-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Set-SvnAccessRule)
*   [`Remove-SvnAccessRule`](https://www.visualsvn.com/support/topic/00088/#Remove-SvnAccessRule)

阅读文章[KB88：VisualSVN 服务器 PowerShell Cmdlet 参考](https://www.visualsvn.com/support/topic/00088/)以获取 VisualSVN 服务器 PowerShell cmdlet 的完整列表。****

# objective-c - 在 OS X 10.8 上不推荐使用 pi

> ID：12800478
> 
> 赞同：8
> 
> 时间：2012-10-09T12:53:04.803
> 
> 标签：objective-c, c, osx-mountain-lion, pi

`pi`OS X 10.8 上是否有 const 的替代品？

当我使用它时，我收到以下警告：

```
'pi' is deprecated: first deprecated on Mac OS X 10.8 
```

它有效，但我想摆脱那个警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T12:54:38.497

尝试包括`math.h`，它定义了 C 标准库宏`M_PI`。

# iphone - cocos2d iOS游戏录制视频，视频低分辨率，正常情况下高分辨率

> ID：12800482
> 
> 赞同：0
> 
> 时间：2012-10-09T12:53:26.317
> 
> 标签：iphone, cocos2d-iphone

我正在使用 cocos2d 的 CCRenderTexture 来录制我的游戏视频。但是如果以视网膜显示分辨率录制视频会消耗大量 CPU 和内存，所以我想使用低分辨率进行视频录制，但保持视网膜分辨率以进行正常游戏。是否可以？

我试过“[[CCDirector sharedDirector] enableRetinaDisplay:NO];” 在录制视频期间，但它似乎不起作用。生成的输出完全错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:20:41.117

**这是不可行的。**

您必须将每一帧渲染两次，一次在屏幕上，然后在渲染纹理上。即使您以某种方式降低渲染纹理的分辨率，帧率的严重下降也是不可避免的。

原因很简单，您还必须将每个渲染纹理作为图像写入闪存。这是非常缓慢的。您还将获得大量数据。如果每个 (PNG/JPG) 图像文件最终都是相当小的 50 KB，那么以 60 fps 记录的一秒数据将消耗 3 兆字节的闪存。一分钟大约是 180 兆字节。

要录制游戏演示，大多数游戏遵循简单的原则，即记录用户输入，然后像用户发出这些命令一样回放用户输入。这需要仔细规划，在更新应用程序（或使旧演示无效）时不进行重大更改，并且不使用非确定性随机化器（即随时间播种）。

如果您需要录制演示以制作预告片视频，周围有很多抓屏解决方案。有些人甚至专门从设备（通常需要源代码/库组件）或模拟器中抓取 iPhone 视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:20:42.810

您应该查看 Kamcord SDK 来录制游戏。检查[http://kamcord.com/](http://kamcord.com/)

Kamcord 具有适用于 iOS 的内置游戏视频和音频录制技术。它允许您（游戏开发者）使用 API 捕获游戏视频。然后，您的用户可以通过 YouTube、Facebook、Twitter 和电子邮件重播和分享这些游戏视频。

# android - Twitter 集成：请求已被理解，但已被拒绝。当请求因更新限制而被拒绝时使用此代码

> ID：12800483
> 
> 赞同：-2
> 
> 时间：2012-10-09T12:53:25.777
> 
> 标签：android, android-twitter

> **可能重复：**
> [发布更新的 Twitter API 速率限制](https://stackoverflow.com/questions/5121921/twitter-api-rate-limits-for-posting-updates)

我通过集成“httpclient-4.0.1.jar”、“signpost-commonhttp4-1.2.1.1.jar”、“signpost-core-1.2.1.1.jar”、“twitter4j-core-2.1”在我的应用程序中集成了 twitter。 11.jar”文件..

代码是：

```
 public class AndroidTwitterSample extends Activity {

private SharedPreferences prefs;
private final Handler mTwitterHandler = new Handler();
private TextView loginStatus;
String message="Hii";
final Runnable mUpdateTwitterNotification = new Runnable() {
    public void run() {
        Toast.makeText(getBaseContext(), "Tweet sent !", Toast.LENGTH_LONG).show();
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    this.prefs = PreferenceManager.getDefaultSharedPreferences(this);

    loginStatus = (TextView)findViewById(R.id.login_status);
    Button tweet = (Button) findViewById(R.id.btn_tweet);
    Button clearCredentials = (Button) findViewById(R.id.btn_clear_credentials);

    tweet.setOnClickListener(new View.OnClickListener() {
        /**
         * Send a tweet. If the user hasn't authenticated to Tweeter yet, he'll be redirected via a browser
         * to the twitter login page. Once the user authenticated, he'll authorize the Android application to send
         * tweets on the users behalf.
         */
        public void onClick(View v) {
            if (TwitterUtils.isAuthenticated(prefs)) {
                sendTweet();
            } else {
                Intent i = new Intent(getApplicationContext(), PrepareRequestTokenActivity.class);
                i.putExtra("tweet_msg",getTweetMsg());
                startActivity(i);
            }
        }
    });

    clearCredentials.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            clearCredentials();
            updateLoginStatus();
        }
    });
}

@Override
protected void onResume() {
    super.onResume();
    updateLoginStatus();
}

public void updateLoginStatus() {
    loginStatus.setText("Logged into Twitter : " + TwitterUtils.isAuthenticated(prefs));
}

private String getTweetMsg() {
    return message;
}   

public void sendTweet() {
    Thread t = new Thread() {
        public void run() {

            try {
                TwitterUtils.sendTweet(prefs,getTweetMsg());
                mTwitterHandler.post(mUpdateTwitterNotification);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }

    };
    t.start();
}

private void clearCredentials() {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Editor edit = prefs.edit();
    edit.remove(OAuth.OAUTH_TOKEN);
    edit.remove(OAuth.OAUTH_TOKEN_SECRET);
    edit.commit();
}
} 
```

常量类：

```
 public class Constants {

public static final String CONSUMER_KEY = "<key>";
public static final String CONSUMER_SECRET= "<secret>";

public static final String REQUEST_URL = "https://api.twitter.com/oauth/request_token";
public static final String ACCESS_URL = "https://api.twitter.com/oauth/access_token";
public static final String AUTHORIZE_URL = "https://api.twitter.com/oauth/authorize";

public static final String  OAUTH_CALLBACK_SCHEME   = "x-oauthflow-twitter";
public static final String  OAUTH_CALLBACK_HOST     = "callback";
public static final String  OAUTH_CALLBACK_URL      = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST;

} 
```

OAuthRequestToken 类：

```
public class OAuthRequestTokenTask extends AsyncTask<Void, Void, Void> {

final String TAG = getClass().getName();
private Context context;
private OAuthProvider provider;
private OAuthConsumer consumer;

/**
 * 
 * We pass the OAuth consumer and provider.
 * 
 * @param   context
 *          Required to be able to start the intent to launch the browser.
 * @param   provider
 *          The OAuthProvider object
 * @param   consumer
 *          The OAuthConsumer object
 */
public OAuthRequestTokenTask(Context context,OAuthConsumer consumer,OAuthProvider provider) {
    this.context = context;
    this.consumer = consumer;
    this.provider = provider;
}

/**
 * 
 * Retrieve the OAuth Request Token and present a browser to the user to authorize the token.
 * 
 */
@Override
protected Void doInBackground(Void... params) {

    try {
        Log.i(TAG, "Retrieving request token from Google servers");
        final String url = provider.retrieveRequestToken(consumer, Constants.OAUTH_CALLBACK_URL);
        Log.i(TAG, "Popping a browser with the authorize URL : " + url);
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
        context.startActivity(intent);
    } catch (Exception e) {
        Log.e(TAG, "Error during OAUth retrieve request token", e);
    }

    return null;
}

} 
```

PrepareRequestTokenActivity：

```
 public class PrepareRequestTokenActivity extends Activity {

final String TAG = getClass().getName();

private OAuthConsumer consumer; 
private OAuthProvider provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        this.consumer = new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        this.provider = new CommonsHttpOAuthProvider(Constants.REQUEST_URL,Constants.ACCESS_URL,Constants.AUTHORIZE_URL);
    } catch (Exception e) {
        Log.e(TAG, "Error creating consumer / provider",e);
    }

    Log.i(TAG, "Starting task to retrieve request token.");
    new OAuthRequestTokenTask(this,consumer,provider).execute();
}

/**
 * Called when the OAuthRequestTokenTask finishes (user has authorized the request token).
 * The callback URL will be intercepted here.
 */
@Override
public void onNewIntent(Intent intent) {
    super.onNewIntent(intent); 
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) {
        Log.i(TAG, "Callback received : " + uri);
        Log.i(TAG, "Retrieving Access Token");
        new RetrieveAccessTokenTask(this,consumer,provider,prefs).execute(uri);
        finish();   
    }
}

public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

    private Context context;
    private OAuthProvider provider;
    private OAuthConsumer consumer;
    private SharedPreferences prefs;

    public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,OAuthProvider provider, SharedPreferences prefs) {
        this.context = context;
        this.consumer = consumer;
        this.provider = provider;
        this.prefs=prefs;
    }

    /**
     * Retrieve the oauth_verifier, and store the oauth and oauth_token_secret 
     * for future API calls.
     */
    @Override
    protected Void doInBackground(Uri...params) {
        final Uri uri = params[0];
        final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

        try {
            provider.retrieveAccessToken(consumer, oauth_verifier);

            final Editor edit = prefs.edit();
            edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
            edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
            edit.commit();

            String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
            String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

            consumer.setTokenWithSecret(token, secret);
            context.startActivity(new Intent(context,AndroidTwitterSample.class));

            executeAfterAccessTokenRetrieval();

            Log.i(TAG, "OAuth - Access Token Retrieved");

        } catch (Exception e) {
            Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
        }

        return null;
    }

    private void executeAfterAccessTokenRetrieval() {
        String msg = getIntent().getExtras().getString("tweet_msg");
        try {
            TwitterUtils.sendTweet(prefs, msg);
        } catch (Exception e) {
            Log.e(TAG, "OAuth - Error sending to Twitter", e);
        }
    }
}   

} 
```

推特工具：

```
public class TwitterUtils {

public static boolean isAuthenticated(SharedPreferences prefs) {

    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token,secret);
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);

    try {
        twitter.getAccountSettings();
        return true;
    } catch (TwitterException e) {
        return false;
    }
}

public static void sendTweet(SharedPreferences prefs,String msg) throws Exception {
    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token,secret);
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);
    twitter.updateStatus(msg);
}   
} 
```

问题是在 2 条推文之后，它给了我一个例外：

```
 W/System.err(5104): 403:The request is understood, but it has been refused. An accompanying error message will explain why. This code is used when requests are being denied due to update limits (http://support.twitter.com/forums/10711/entries/15364).
    W/System.err(5104): error - Status is a duplicate.
    W/System.err(5104): request - /1/statuses/update.json
    W/System.err(5104): Relevant discussions can be on the Internet at:
     W/System.err(5104):    http://www.google.co.jp/search?q=15bb6564 or
     W/System.err(5104):    http://www.google.co.jp/search?q=010f3e5b
     W/System.err(5104): TwitterException{exceptionCode=[15bb6564-010f3e5b], statusCode=403, retryAfter=0, rateLimitStatus=null, version=2.1.11}
      W/System.err(5104):   at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:199)
      W/System.err(5104):   at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:75)
      W/System.err(5104):   at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:112)
      W/System.err(5104):   at twitter4j.Twitter.updateStatus(Twitter.java:593)
    W/System.err(5104):     at com.ecs.android.sample.twitter.TwitterUtils.sendTweet(TwitterUtils.java:38)
      W/System.err(5104):   at com.ecs.android.sample.twitter.AndroidTwitterSample$4.run(AndroidTwitterSample.java:84) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T13:16:16.403

从您的错误消息中：

```
error - Status is a duplicate. 
```

这意味着您不能两次发布相同的消息。如果您已经发布了该消息`HI`，那么您`cannot`将再次发布该消息（至少在那天 - 不确定）。你会得到`Status is a duplicate`错误

# ios - 发送推文后应用程序冻结

> ID：12800489
> 
> 赞同：7
> 
> 时间：2012-10-09T12:53:50.820
> 
> 标签：ios, xcode, freeze, social, slcomposeviewcontroller

嗨，我在 iOS 应用中有两个 UIButton。一是在推特上发帖，二是在脸书上发帖。facebook 按钮完美运行，但推文给我带来了一些问题，推文表将打开填充文本，但需要两次点击取消按钮才能关闭。如果我点击发送，则将发送推文并关闭工作表，但我的应用程序冻结并变得无响应。我已经包含了这两个代码

```
- (IBAction)postTweet:(id)sender {

// if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]){

    myTweet = [[SLComposeViewController alloc]init];

    myTweet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

    NSString *tweetString = [[NSString alloc]initWithFormat:@"%@\n%@\nvia @ValuatorApp", pdOne.text, pdTwo.text];

    [myTweet setInitialText:tweetString];

    [myTweet addURL:[NSURL URLWithString:@"http://sjb007.me/TheValuator"]];

    [self presentViewController:myTweet animated:YES completion:nil];
//   }
[myTweet setCompletionHandler:^(SLComposeViewControllerResult result) {

    NSString *output = [[NSString alloc]init];

    switch (result) {
        case SLComposeViewControllerResultCancelled:
            output = @"Twitter Post Cancelled";
            break;
        case SLComposeViewControllerResultDone:
            output = @"Twitter post Succesful";
            break;
        default:
            break;
    }
    NSLog(@"%@",output);

}];
}

- (IBAction)postFacebook:(id)sender {

// if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]){

    myTweet = [[SLComposeViewController alloc]init];

    myTweet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

if (pd3 != 0) {
    NSString *facebookString = [[NSString alloc]initWithFormat:@"%@\n%@\n%@", pdOne.text,pdTwo.text, pdThree.text];
    [myTweet setInitialText:facebookString];

}
else if (pd3 == 0){
    NSString *facebookString = [[NSString alloc]initWithFormat:@"%@\n%@\n", pdOne.text,pdTwo.text];
    [myTweet setInitialText:facebookString];

}

// [myTweet addImage:[UIImage imageNamed:@"Photo Jun 02, 22 46 37.jpg"]];

[myTweet addURL:[NSURL URLWithString:@"http://sjb007.me/TheValuator"]];

 [self presentViewController:myTweet animated:YES completion:nil];
 //   }
[myTweet setCompletionHandler:^(SLComposeViewControllerResult result) {

    NSString *output = [[NSString alloc]init];

    switch (result) {
        case SLComposeViewControllerResultCancelled:
            output = @"Facebook Post Cancelled";
            break;
        case SLComposeViewControllerResultDone:
            output = @"Facebook post Succesful";
            break;
        default:
            break;
    }
    NSLog(@"%@",output);

}];
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T08:22:05.070

您正在展示 ViewController “myTweet”

```
[self presentViewController:myTweet animated:YES completion:nil]; 
```

但是您的completionHandler 中没有dismiss...语句

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# javascript - 如何在 JQuery 中编写简化和通用的验证逻辑和规则

> ID：12800492
> 
> 赞同：0
> 
> 时间：2012-10-09T12:54:00.050
> 
> 标签：javascript, jquery, twitter-bootstrap, validation

我知道互联网上有大量信息可以验证 JavaScript 和 JQuery 中的表单。但我有兴趣自己写。基本上我想学这个东西。

所以这是我编写的验证脚本，它工作正常。

```
function validate() {

        var firstName = jQuery("#firstName").val();
        var lastName = jQuery("#lastName").val();
        var dateOfBirthy = jQuery().val("dateOfBirth");

        if (firstName.length == 0) {
            addRemoveValidationCSSclass("#firstName", false);
        } else {
            addRemoveValidationCSSclass("#firstName", true);
        }

        if (lastName.length == 0) {
            addRemoveValidationCSSclass("#lastName", false);
        } else {
            addRemoveValidationCSSclass("#lastName", true);
        }
    }

    function addRemoveValidationCSSclass(inputField, isValid) {
        var div = jQuery(inputField).parents("div.control-group");
        if (isValid == false) {
            div.removeClass("success");
            div.addClass("error");
        } else if (isValid == true) {
            div.removeClass("error");
            div.addClass("success");
        } else {
        }
    } 
```

我想实现几件事——

1.  添加验证消息
2.  处理每种形式的更通用的方法。
3.  我想添加验证规则，如长度、电子邮件验证、日期验证等。

现在我怎样才能实现这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:57:13.590

使用[jQuery 验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。它可以直接完成您想要的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:04:42.823

我做了类似的事情，除了我写了我的规则，`PHP`因为你需要一个服务器端备份。当 PHP 生成表单时，它还会生成一些简单的客户端验证，如下所示：

```
<!-- html field -->
<label for="first">
  First Name: <input type="text" name="first" id="first">
  <span id="first_message"></span>
</label> 
```

然后脚本是这样的：

```
<script>
  var formValid = true;
  var fieldValid = true;

  // Check first name
  fieldValid = doRequiredCheck("first");
  if (!fieldValid) {formValid = false};
  fieldValid = doCheckLength("first", 25);
  if (!fieldValid) {formValid = false};

  function doRequiredCheck(id) {
    var el = document.getElementById(id);
    var box = document.getElementById(id + "_message";
    if (el.value === "") {
      box.innerHTML = "**REQUIRED**";
    }
  }

  function doCheckLength(id,len) {
    var el = document.getElementById(id);
    var box = document.getElementById(id + "_message";
    if (el.value.length > len) {
      box.innerHTML = "Too long";
    }
  }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T00:53:38.710

创建一个简单的函数：

```
function validations(day, hour, tap1, tap2, employed){
if( day== "" | hour== "" | tap1== "" | tap2== "" | employed== "" ){
    return false;
} else {
    return true;
} 
```

# ios - XCode 4.3.2 应用程序可执行文件缺少所需的架构。以下armv7中的至少一种

> ID：12800493
> 
> 赞同：0
> 
> 时间：2012-10-09T12:54:04.000
> 
> 标签：ios, xcode, app-store

我在 Lion 10.7.3 上安装了 XCode 4.3.2 我尝试在 AppStore 中分发我的应用程序，但是当我验证时，我收到错误消息：“iPhone/iPod Touch：应用程序可执行文件缺少所需的架构。至少其中一个必须存在以下架构：armv7"，但我在目标设置中有此架构。

我在构建设置中将“armv6”添加到架构中（许多人推荐），但这对我不起作用。这是我的项目的构建设置：

---建筑---

架构 - 标准 (armv7)

发布 - 标准 (armv7)

基础 SDK - 最新 iOS (iOS 5.1.)

仅构建活动架构 - 否

支持的平台 - iphonesimulator iphoneos

有效架构 - armv7

---构建选项---

构建变体 - 正常

C/C++/Objective-C 的编译器 - 默认编译器（Apple LLVM 编译器 3.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:08:30.493

回复您评论中更新的问题：

要在 Xcode 4.5.x 下放弃对 armv6 的支持，请将 iOS 部署目标提升到 4.3 或更高版本，并从目标的构建架构和活动架构中删除 armv6。

补充：如果您包含任何仅支持 armv6 的 3rd 方库，则无法执行此操作，直到您获得更新的更新库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:28:27.000

我刚刚通过 Update 4 Hotfix 1 更新了 Firemonkey，并且全部编译完毕。 [http://blogs.embarcadero.com/ao/2012/04/12/39245](http://blogs.embarcadero.com/ao/2012/04/12/39245)

谢谢大家！

# java - Java MimeMail：解码后获得额外的字符

> ID：12800495
> 
> 赞同：0
> 
> 时间：2012-10-09T12:54:13.867
> 
> 标签：java, jakarta-mail

我正在使用标准 java javax.mail.internet.MimePartDataSource.getInputStream 来获取与电子邮件关联的附件。我面临的问题是：

`the size of the file attached is 10950 bytes(excel). The size of file i get using MimePartDataSource is 14810 bytes.`

如果我删除最后一个额外的字符并尝试打开它，它工作正常；但是如果我尝试打开而不删除多余的字节，则会生成一个弹出窗口，指示“想要恢复文件？” 然后如果我说是，它就可以了。

我在使用 excel 和 pdf 时遇到了这个问题。你能在里面放点光吗？

谢谢，阿林丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:09:00.743

You're probably using the available() method to determine how much data to save. That doesn't work. Use the approach described in the [JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#readattach).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:15:16.643

我正在使用另一种方法来处理这个问题并取得了成功。以前我使用的是 getInputStream ，它在以某种方式解码后添加了一些额外的数据。现在，我正在使用 getRawInputStream 获取数据并显式解码它，从而保留真正的附件。

# asp.net - asp.net url重写基于部分url？

> ID：12800497
> 
> 赞同：1
> 
> 时间：2012-10-09T12:54:15.860
> 
> 标签：asp.net, url-rewriting

目前我的网址如下所示：
www.mysite.com/venues/<venueid>/<venuename>
例如
www.mysite.com/venues/342/myvenue

通过检查“场地”的出现，很容易为此创建一个重写 url

```
<rule name="view venue">
<match url="^venues/([0-9]+)?/??([a-zA-Z0-9-]+)?$" />
<action type="Rewrite" url="locationdetails.aspx?id={R:1}" />
</rule> 
```

但是对于一个新站点，我希望我的 URL 看起来像这样：
www.mysite.com/<venuename>-<venueid>
例如
www.mysite.com/myvenue-342

我虽然创建了检查 url 中的数字并将其用作场地 ID 的重写规则，但如果场地场地名称和此友好 URL 包含一个数字，则会导致问题，例如“39 号码头”将变为“码头” -39-342"，或者有没有办法捕获友好 url 中的最后一个 id（所以最后一个破折号后的 id）并将其用作 R:1 的参数？

我已经看过这个博客：[http](http://weblogs.asp.net/owscott/archive/2010/04/20/url-parts-available-to-url-rewrite-rules.aspx) ://weblogs.asp.net/owscott/archive/2010/04/20/url-parts-available-to-url-rewrite-rules.aspx这似乎满足了我的需求，但是我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:08:12.960

这条规则似乎可以满足我的需要：

```
 <rule name="venue details">
      <match url="^([a-zA-Z0-9-]+)-([0-9-]+)$" />
      <action type="Rewrite" url="locationdetails.aspx?id={R:2}&amp;furl={R:1}" />
    </rule> 
```

# java - 在违反约束时静默失败

> ID：12800503
> 
> 赞同：0
> 
> 时间：2012-10-09T12:54:28.073
> 
> 标签：java, sql, spring, hibernate

我有 entity `Foo`，它映射到具有一些独特约束的 sql 表。因此保存`Foo`可能会失败。我`FooDao`用来保存`Foo`：

```
@Repository
public class FooDao
{
  @Autowired
  private SessionFactory sessionFactory;

  @Transactional
  @Override
   public void add(Foo item) {
    sessionFactory.save(item);
   }
} 
```

当我调用方法时`FooDao#add(Foo)`，它可能因两个原因而失败：要么是因为违反唯一约束（在这种情况下，我知道如何处理问题），要么是因为其他一些问题（在这种情况下，我可能应该传播异常）。我如何区分这两种情况？

我可以添加方法`find(Foo item)`并`FooDao`检查我试图添加的项目之类的东西是否是数据库。但这需要从数据库中进行额外的选择，我对此有点担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:03:19.747

这实际上是 SQLState。

做这样的事情

```
Catch(HibernateException he){
   SQLException sqe = he.getSQLEception();
   String sqlState = sqe.getSQLState();
   if(sqlState.equals("23000"){
       // Handle your exception
   } 
} 
```

Java 文档：SQLState - 标识异常的 XOPEN 或 SQL:2003 代码

我为 ISO sqlStates 找到的一个链接，

[参考链接](http://www.rosam.se/doc/atsdoc/Server%20-%20Messages%20and%20Codes/ADC5906BBD514757BAEE546DC6F7A4FA/0.htm)

但是寻找确切的参考和价值..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:05:09.063

一个明显（但可能很糟糕）的解决方案是您捕获 javax.persistence.PersistenceException 并将错误消息解析为“暴力”或“约束”。

从我的角度来看，您应该预先进行选择/查找。请记住，您使用的是 ORM！Hibernate 涉及缓存，因此选择/查找和键约束错误都不是实际数据库查询的结果，而是根据您已经在缓存中加载的数据计算 Hibernate 的结果。

塞巴斯蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:20:35.320

捕获 org.hibernate.JDBCException。这有 getErrorCode()。对于唯一约束违反其 ORA-00001。

-麦迪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:43:41.363

如果存在数据库异常，则会在[HibernateException](http://docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/HibernateException.html)中捕获，这是一个检查异常。`Spring`将此包装在未选中的[DataAccessException中。](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/dao/DataAccessException.html)此异常将一直运行到您`Controller`并运行到最后，`Servlet`并最终出现在浏览器和日志文件中的堆栈跟踪中。您可以捕获此异常并将其打印出来，以便查看发生了什么。这至少会让你知道什么是真正的破坏。

坏键可能是一个问题。但糟糕的价值观可能是另一回事。一些非空字段为空，或者某些内容不够长/短等。解决此问题可能涉及验证。您可以使用[Hibernate Validator](http://www.hibernate.org/subprojects/validator.html)。你给你的字段一些漂亮的注释，然后你在进入数据库之前就在java中得到验证错误——错误发生得更快。

# listviewitem - Windows 8 代码中的 ListViewItem

> ID：12800510
> 
> 赞同：1
> 
> 时间：2012-10-09T12:54:50.680
> 
> 标签：listviewitem

如何从 Windows 8 应用程序代码中的 ListViewItem 读取（获取）元素？

# javascript - Javascript Node.js Unicode 正则表达式

> ID：12800517
> 
> 赞同：2
> 
> 时间：2012-10-09T12:55:04.747
> 
> 标签：javascript, regex, node.js, unicode, xregexp

我需要输入验证，良好的输入验证以保持一切清洁。所以我想要一个严格的“全名”正则表达式，国际所以我需要Unicode支持。我下载了 XRegExp，它将“它们的格式”编译为正则表达式并支持 Unicode：

正确名称：

*   约翰·埃尔克杰德
*   安德烈·斯文森
*   马尔科·达尔梅达
*   克里斯托弗拉库尔

不正确的名字：

*   汉斯
*   H4nn3 安徒生
*   马丁亨里克森！

所以我需要：

1.  匹配 unicode 字母 (a, æ)
2.  匹配 unicode 重音符号（á、Ë 等）
3.  匹配 unicode 连字符（- _ 等）

在 PHP 中，我可以执行以下操作来匹配：

```
\p{L} (unicode letter)
\p{Mn} (unicode accents)
\p{Pd} (unicode hyphens) 
```

我发现，我可以用 XRegExp 做：

^\p{L}+$ 将匹配“日本”，因此只有第一个字母有效，但我怎样才能弄清楚如何处理这些 un​​icode 重音符号，连字符？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:38:53.233

看起来@lanzz 为您提供了一些关于名称验证潜在问题的良好反馈，但作为记录，您可以像使用 PHP 一样使用您在 XRegExp 中提到的 Unicode 类别。例如，`XRegExp('^[\\p{L}\\p{Mn}\\p{Pd} ]+$')`。这需要 XRegExp 的 Unicode 类别插件。请注意，由于 JavaScript 字符串文字转义规则，反斜杠被转义。

# iphone - 在 iphone 中插入特殊字符的数据库问题？

> ID：12800519
> 
> 赞同：2
> 
> 时间：2012-10-09T12:55:05.623
> 
> 标签：iphone, database, sqlite

我是 sqlite 数据库和 iPhone 开发的新手

我将数据插入数据库

```
am insert description string is like dz 
• 500 grams Chicken breasts
• 6-8 nos. Green chillies
• 2 tblsp Coriander leaves
• 2 tblsp Mint leaves
• 12 nos. Garlic
• 8-10 nos. Almonds
• 3/4 cup Fresh cream
• 1 inch Ginger
• 1 tblsp Lemon juice
• Oil
• Salt
this is code for inserting 

-(void)insertDataToFavourites:(int)pageid111 :(NSString *)description
{
    NSLog(@"%@",description);
    const char *sqlStatement = "INSERT INTO AddFavoritenew (Id,Description) VALUES (?,?)";
    sqlite3_stmt *compiled_statement;
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiled_statement, NULL) == SQLITE_OK)
    {
        sqlite3_bind_int(compiled_statement, 1, pageid111);
        sqlite3_bind_text(compiled_statement, 2, [description UTF8String] , -1, SQLITE_TRANSIENT);
        [ArrAddData addObject:[NSString stringWithFormat:@"%d", pageid111]];
        NSLog(@"ArrAddData record is:--> %@",ArrAddData);
    }

    if(sqlite3_step(compiled_statement) != SQLITE_DONE )
    {
        //        NSLog( @"Error: %s", sqlite3_errmsg(database) );
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert!"
                                                        message:@"alerady you added this sms to favorite list."
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }
    else
    {
        //        NSLog( @"Insert into row id = %lld", sqlite3_last_insert_rowid(database));
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert!"
                                                        message:@"Data saved to Favorite."
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }

    sqlite3_finalize(compiled_statement);    
} 
```

我正在将上述数据插入数据库，但问题是

当我显示从数据库中保存的数据时，它是否显示为

```
‚Ä¢ 500 grams Chicken breasts
‚Ä¢ 6-8 nos. Green chillies
‚Ä¢ 2 tblsp Coriander leaves
‚Ä¢ 2 tblsp Mint leaves
‚Ä¢ 12 nos. Garlic
‚Ä¢ 8-10 nos. Almonds
‚Ä¢ 3/4 cup Fresh cream
‚Ä¢ 1 inch Ginger
‚Ä¢ 1 tblsp Lemon juice
‚Ä¢ Oil
‚Ä¢ Salt 
```

获取最喜欢的列表代码为

```
-(void)getFavoriteList
{
    if([ArrFav count] > 0)
        [ArrFav removeAllObjects];

    ArrFav = [[NSMutableArray alloc] init];

    sqlite3_stmt *selectStatement=nil;  
    const char *sql ="SELECT Description FROM AddFavoritenew";
    int returnvalue;

    returnvalue = sqlite3_prepare_v2(database, sql, -1, &selectStatement, NULL);

    if(returnvalue==1)
    {
        NSAssert1(0, @"Error: failed to select the database with message '%s'.", sqlite3_errmsg(database));
    }

    if(returnvalue == SQLITE_OK)
    {                       
        while(sqlite3_step(selectStatement) == SQLITE_ROW)
        {   
            char *str = (char *)sqlite3_column_text(selectStatement,0);
            [ArrFav addObject:[NSString stringWithFormat:@"%s",str]];
            NSLog(@"Favorite data is:--> %s",str);
        }       
//        NSLog(@"Favorite data is:--> %@",ArrFav);
    }
} 
```

如何从数据库中获取数据，如“，”，请注意我的数据库描述是文本数据类型....我也尝试使用 varchar2 数据类型

但我想要像保存数据这样的输出..请帮帮我

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:59:51.143

初始字符串是 UTF8。

您正在使用它从数据库中重新创建它

```
[ArrFav addObject:[NSString stringWithFormat:@"%s",str]]; 
```

这只是`str`用天真的 ascii （`%s`格式说明符）转换

试试这个来强制它使用 UTF-8 来解码字符串：

```
[ArrFav addObject:[[NSString alloc] initWithCString:str encoding:NSUTF8StringEncoding]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:01:44.640

# c# - 查找添加到 TableLayoutPanel 的控件的行索引

> ID：12800520
> 
> 赞同：3
> 
> 时间：2012-10-09T12:55:09.043
> 
> 标签：c#, .net, winforms, controls, tablelayoutpanel

当控件添加到 Windows 窗体中的 TableLayoutPanel 时，我需要采取措施。我正在处理控件的 ParentChanged 事件以查明控件是否已添加到父级（此处为 TableLayoutPanel），但我收到的索引是-1。

TableLayoutPanel t;

```
private void button1_Click(object sender, EventArgs e)
{
    // this.Text = tableLayoutPanel1.Height.ToString();

    t = new TableLayoutPanel();
    t.Dock = DockStyle.Fill;
    //t.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
    t.AutoSize = true;
    //t.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
    t.RowStyles.Add(new RowStyle(SizeType.AutoSize));
    t.RowStyles.Add(new RowStyle(SizeType.AutoSize));
    t.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 50));
    t.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 50));
    panel1.Controls.Add(t);

    t.CellBorderStyle = TableLayoutPanelCellBorderStyle.Single;

    Label lbl = new Label();
    lbl.ParentChanged += new EventHandler(lbl_ParentChanged);
    lbl.Margin = new System.Windows.Forms.Padding(20, 150, 20, 20);
    lbl.Text = "Hello";
    t.Controls.Add(lbl, 0, 0);
}

void lbl_ParentChanged(object sender, EventArgs e)
{
    Label lbl = (Label)sender;
    int row = t.GetRow(lbl);//here I get row = -1 ??????
} 
```

我需要添加控件的行号。控件应采取独立于何时添加到 TableLayoutPanel 的操作。如何得到它？

```
 void t_ControlAdded(object sender, ControlEventArgs e)
    {
        int row = t.GetRow(e.Control);      //this also gives row = -1      
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:28:44.110

如果您`RowCount/ColumnCount`将新添加`RowStyles/ColumnStyles`到您的`TableLayoutPanel`. 在此之后，您可以轻松地使用该`GetPositionFromControl(Control value)`方法。

我认为，`ControlAdded`在这种情况下，Event 是更好的方法。试试看。

像这样做：

```
public partial class Form1 : Form
{
    private TableLayoutPanel panel;

    public Form1()
    {
        InitializeComponent();
        InitializeTableLayoutPanel();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        AddControl(0, 0);
        AddControl(0, 1);
        AddControl(1, 0);
        AddControl(1, 1);
        AddControl(2, 0);
        AddControl(2, 1);
        AddControl(3, 0);
        AddControl(3, 1);
    }

    private void InitializeTableLayoutPanel()
    {
        panel = new TableLayoutPanel();
        panel.Dock = DockStyle.Fill;
        panel.AutoSize = true;
        panel.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 50));
        panel.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 50));
        panel.ColumnCount = 2;
        panel.RowStyles.Add(new RowStyle(SizeType.AutoSize));
        panel.RowStyles.Add(new RowStyle(SizeType.AutoSize));
        panel.RowCount = 2;

        panel.CellBorderStyle = TableLayoutPanelCellBorderStyle.Single;
        panel.ControlAdded += new ControlEventHandler(OnControlAdded);

        this.Controls.Add(panel);
    }

    private void OnControlAdded(object sender, ControlEventArgs e)
    {
        if (e.Control != null)
        {
            int column = panel.GetPositionFromControl(e.Control).Column;
            int row = panel.GetPositionFromControl(e.Control).Row;

            MessageBox.Show(string.Format("Column: {0}, Row: {1}", column, row));
        }
    }

    /// <summary>
    /// Add Control to Panel
    /// </summary>
    /// <param name="column">column position</param>
    /// <param name="row">row position</param>
    private void AddControl(int column, int row)
    {
        Label label = new Label();
        label.Font = new Font(new FontFamily("Droid Sans"), 20, FontStyle.Bold);
        label.Name = "label";
        label.Text = "Whoop!";

        if (column < panel.ColumnCount && row < panel.RowCount)
            panel.Controls.Add(label, column, row);
        else
            throw new ArgumentOutOfRangeException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:13:21.353

留下消息后尝试做 button1_Click 的东西（windows messagequeue 消息）：

```
SynchronizationContext.Current.Post(new SendOrPostCallback(delegate(object state)
{
  //Your code here...
}), true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:36:59.143

从[msdn 页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.getrow.aspx)：

> 控件的行位置，如果控件的位置由 LayoutEngine 确定，则为 -1。

使用以下内容：

```
public void ControlAdded(object sender, EventArgs e)
{
    var row = layout.GetPositionFromControl(lbl);//0,0
} 
```

# c# - 为什么 ToPagedList 在一个空的 IQueryable 上需要半分钟，而底层 SQL 只需要一秒钟的时间？

> ID：12800524
> 
> 赞同：2
> 
> 时间：2012-10-09T12:55:30.907
> 
> 标签：c#, .net, sql, entity-framework, linq-to-entities

我有一段 Entity-to-SQL 代码组成一个`IQueryable`，`ToPagedList()`在其上运行，然后将结果传递到 MVC 视图中。

`ToPagedList()`运行 SQL 查询超时失败。我提取了生成的 SQL 查询（使用`IQueryable.ToString()`）并在服务器上运行它——它在不到一秒的时间内运行并且输出为空（这是正确的）。

因此，我`ToPagedList()`运行了一个查询，该查询将产生一个运行半分钟并超时的空结果，并且我拥有在同一台服务器上运行不到一秒的底层 SQL。

由于 SQL 查询输出为空，我不能将延迟归咎于过滤、检索或 EF 中的任何其他内容。

什么会导致产生空输出的快速 SQL 查询从内部运行极其缓慢`ToPagedList()`？

**UPD**

这个问题似乎已经自行解决了，所以看起来这是运行代码的机器和 SQL Server 机器之间的一些临时问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:29:21.510

确保在 SQL Server 上运行 TRACE 并查看 Entity 正在生成的查询，然后检查其执行计划。

大多数情况下，最新版本的 Entity 在创建健壮查询方面做得很好，但这并不意味着在您正在访问的表上放置好 INDEX 会显着加快速度。

享受！

# c++ - arm cortex a9 交叉编译奇怪的浮点行为

> ID：12800525
> 
> 赞同：7
> 
> 时间：2012-10-09T12:55:34.323
> 
> 标签：c++, c, floating-point, arm, cross-compiling

我正在尝试将更大的应用程序从 x86 移植到 arm cortex a9，但是在交叉编译应用程序时，像 modf 这样的浮点函数会出现奇怪的分段错误，其他 libc++ 函数似乎只是处理错误的浮点数，但不要崩溃（见下文）。

所以我尝试了这个小测试程序，它也可以触发错误。测试程序的输出（见下文）应该证明我的问题。

```
#include <iostream>
int main(int argc, char *argv[])
{
    double x = 80;
    double y = 0;
    std::cout << x << "\t" << y << std::endl;
    return 0;
} 
```

在arm cortex a9上编译：

```
@tegra$ g++ -Wall test.cpp -o test_nativ
@tegra$ ./test_nativ 
80      0 
```

交叉编译

```
@x86$ arm-cortex_a9-linux-gnueabi-g++ test.cpp  -o test_cc
@tegra$ ./test_cc
0       1.47895e-309 
```

使用“-static”链接器选项进行交叉编译。

```
@x86$ arm-cortex_a9-linux-gnueabi-g++ -static test.cpp  -o test_cc_static
@tegra$ ./test_cc_static 
80      0 
```

.

```
@x86$ arm-cortex_a9-linux-gnueabi-objdump -S test_cc
see: http://pastebin.com/3kqHHLgQ

@tegra$ objdump -S test_nativ
see: http://pastebin.com/zK35KL4X 
```

.

回答下面的一些评论：
- 为小端设置了交叉编译器，就像 tegra 机器上的本机编译器一样。
- 我不相信它是内存对齐问题，我在移植到 arm 时分享了这些，这些应该将 SIGBUS 发送到应用程序或记录到 syslog，请参阅 /proc/cpu/alignment 的文档。

我目前的解决方法是复制交叉编译的工具链并将其与 LD​​_LIBRARY_PATH 一起使用......不太好，但暂时足够好。

编辑：
感谢您的回答。
与此同时，我发现 tegra 设备上的 linux 发行版是使用“-mfloat-abi=softfp”编译的，尽管文档指出，需要使用“-mfloat-abi=hard”编译的工具链。
改变工具链带来了成功。

似乎在任何系统二进制文件上使用“readelf -A”可以看出硬和软文件之间的区别：
如果输出包含以下行：“Tag_ABI_VFP_args: VFP registers”，则使用“-mfloat-abi=hard”编译。如果缺少此行，则二进制文件很可能是使用“-mfloat-abi=softfp”编译的。
'Tag_ABI_HardFP_use: SP and DP' 行并不表示编译器标志 '-mfloat-abi=hard'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:28:21.070

查看汇编输出，我们可以看到两个文件中的差异。

在`test_nativ`：

```
86ec:       4602            mov     r2, r0
86ee:       460b            mov     r3, r1
86f0:       f241 0044       movw    r0, #4164       ; 0x1044
86f4:       f2c0 0001       movt    r0, #1
86f8:       f7ff ef5c       blx     85b4 <_init+0x20> 
```

这是传递一个`double`in`r2:r3`和`std::cout`in `r0`。

在`test_cc`：

```
86d8:       e28f3068        add     r3, pc, #104    ; 0x68
86dc:       e1c320d0        ldrd    r2, [r3]
86e0:       e14b21f4        strd    r2, [fp, #-20]  ; 0xffffffec
86e4:       e3010040        movw    r0, #4160       ; 0x1040
86e8:       e3400001        movt    r0, #1
86ec:       ed1b0b03        vldr    d0, [fp, #-12]
86f0:       ebffffa5        bl      858c <_init+0x20> 
```

这会传递一个`double`in `d0`（一个 VFP 寄存器）和`std::cout`in `r0`。观察这里`r2:r3`加载（由`ldrd`）与第二个打印输出的浮点值，即 0.0。因为动态链接`ostream::operator<<(double val)`需要它的参数 in `r2:r3`，所以首先打印出 0 。

我也可以解释第二个看起来很奇怪的浮动。这是打印第二个浮点数的位置：

```
8708:       e1a03000        mov     r3, r0
870c:       e1a00003        mov     r0, r3
8710:       ed1b0b05        vldr    d0, [fp, #-20]  ; 0xffffffec
8714:       ebffff9c        bl      858c <_init+0x20> 
```

看到`r3`设置为`r0`，地址`cout`。从上面看，`r0 = 0x011040`。因此，寄存器对`r2:r3`变为 0x0001104000000000，它以双精度形式解码为 1.478946186471156e-309。

所以问题是您的桌面 GCC 的库使用 VFP/NEON 指令，设备上的动态库不使用这些指令。如果您使用`-static`，您将获得 VFP/NEON 库，并且一切都会再次运行。

我的建议只是找出设备和编译器库不同的原因，然后解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:09:18.487

我的**猜测**：如果没有适当的开关指示 vfp 硬件支持，编译器将使用软件库在 arm 上进行浮点数学运算。如果您使用静态链接进行编译，这些库将包含在二进制文件中——结果：它可以工作。如果您使用正常（动态）链接模式，则不会包含库 - 结果：由于某种原因它不起作用。您的 tegra 系统上的库在某种程度上与您的交叉编译器生成的内容不兼容（可能是由于调用约定）。

# jquery - 使用 jquery 更改动画滑块以淡出

> ID：12800527
> 
> 赞同：0
> 
> 时间：2012-10-09T12:55:34.823
> 
> 标签：jquery, jquery-plugins, carousel

我有这个在图像之间滑动的 JS，但我想将它们更改为淡出 - 更改这些的最佳方法是什么？

这是一个完整的演示，因为它更好：http: [//jsfiddle.net/mJcTA/6/](http://jsfiddle.net/mJcTA/6/)

```
 animate: function () {
            var nextItem, pos;
            // check whether there are enough items to animate to
            if (this.itemIndex > (this.noOfItems - this.options.itemsPerPage)) {
                this.itemIndex = this.noOfItems - this.options.itemsPerPage; // go to last panel - items per transition
            }
            if (this.itemIndex < 0) {
                this.itemIndex = 0; // go to first
            }
            nextItem = this.items.eq(this.itemIndex);
            pos = nextItem.position();

            if (headache) {
                this.runner
.stop()
.animate({ left: -pos.left }, this.options.speed, this.options.easing);
            }
            else {
                this.mask
.stop()
.animate({ scrollLeft: pos.left }, this.options.speed, this.options.easing);
            }
            this.updateBtnStyles();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:08:38.073

你要改变的是里面的内容

```
.animate({HERE}.. 
```

它将**左侧**位置 css 属性更改为 0。如果要使其淡入淡出，则正确的动画是将不透明度更改为 1：

```
.animate({opacity:1}... 
```

请注意， opacity css 属性的解释方式因浏览器而异，因此您可能需要更改多个“不透明度”规则。

代码不完整，因为我没有太多时间阅读整个脚本，但这会让你继续......

# python - Django、ForeignKey 关系和 Q 或

> ID：12800529
> 
> 赞同：2
> 
> 时间：2012-10-09T12:55:39.807
> 
> 标签：python, django, django-models, relation, django-q

我有一些问题。考虑 DB 中的这个数据模式（为简单起见，我省略了一些东西）：

```
class Table1(Model):
   field1;
   field2;
   table2 = ForeignKey('Table2');

class Table2(Model):
   filed3; 
```

现在样本数据：

```
Table2:
{ id:1, field3: lola }
{ id:2, field3: disney }

Table1:
{ id:1, field1: foo, field2: bar, table2_id: 1 }
{ id:2, field1: lola, field2: bars, table2_id: null } 
```

主要部分：

SQL查询：

```
SELECT t1.*, t2.field3 
FROM table1 AS t1 LEFT JOIN table2 AS t2 ON t1.table2_id=t2.id 
WHERE t1.field1 ILIKE '%lola%' OR t2.field3 ILIKE '%lola%'; 
```

将在 Table1 中生成两行：id=1 和 id=2。

现在我想从 django 得到同样的结果，但是当我尝试时：

```
Table1.objects.filter( Q(filed1__icontains="lola") | Q(table2__filed3__icontains="lola") ); 
```

它仅返回 id=1，因为 table2_id 在 id=2 的行上为空。

它排除了 id=2 的行，因为它在第二个问题上失败了。在这种情况下，如何从 Django 获取两行？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:58:29.707

据我了解，数据库模式不是通过 django-orm 创建的。在你的情况下，Django make `INNER JOIN`. 利用：

```
table2 = ForeignKey('Table2', blank=True, null=True) 
```

# php - 1.7.0.2 中缺少 Magento rule_coupons.type 列

> ID：12800530
> 
> 赞同：3
> 
> 时间：2012-10-09T12:55:39.993
> 
> 标签：php, mysql, magento

我有一个从 1.6 升级到 1.7 的商店。当我尝试在前端使用优惠券时，我收到一封包含以下信息的调试电子邮件。这在 1.6 时没有发生。刚刚升级后。

到目前为止，有人见过这个问题吗？

URL： http: [//xxxxxxxxxx.com/checkout/cart/couponPost/](http://xxxxxxxxxx.com/checkout/cart/couponPost/) IP 地址：时间：2012-10-09 08:04:26 GMT 错误：SQLSTATE[42S22]：未找到列：1054 未知列'rule_coupons.type '在'where子句'中

痕迹：

```
#0 /home/hsstore/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /home/hsstore/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /home/hsstore/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /home/hsstore/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `main_ta...', Array)
#4 /home/hsstore/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `main_ta...', Array)
#5 /home/hsstore/public_html/lib/Zend/Db/Adapter/Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query('SELECT `main_ta...', Array)
#6 /home/hsstore/public_html/lib/Varien/Data/Collection/Db.php(734): Zend_Db_Adapter_Abstract->fetchAll('SELECT `main_ta...', Array)
#7 /home/hsstore/public_html/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(521): Varien_Data_Collection_Db->_fetchAll('SELECT `main_ta...', Array)
#8 /home/hsstore/public_html/lib/Varien/Data/Collection/Db.php(566): Mage_Core_Model_Resource_Db_Collection_Abstract->getData()
#9 /home/hsstore/public_html/lib/Varien/Data/Collection.php(268): Varien_Data_Collection_Db->load()
#10 /home/hsstore/public_html/app/code/community/TBT/Rewards/Model/Salesrule/Observer.php(167): Varien_Data_Collection->getFirstItem()
#11 /home/hsstore/public_html/app/code/core/Mage/Core/Model/App.php(1338): TBT_Rewards_Model_Salesrule_Observer->checkRedemptionCouponBefore(Object(Varien_Event_Observer))
#12 /home/hsstore/public_html/app/code/core/Mage/Core/Model/App.php(1317): Mage_Core_Model_App->_callObserverMethod(Object(TBT_Rewards_Model_Salesrule_Observer), 'checkRedemption...', Object(Varien_Event_Observer))
#13 /home/hsstore/public_html/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('controller_acti...', Array)
#14 /home/hsstore/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(532): Mage::dispatchEvent('controller_acti...', Array)
#15 /home/hsstore/public_html/app/code/core/Mage/Core/Controller/Front/Action.php(64): Mage_Core_Controller_Varien_Action->preDispatch()
#16 /home/hsstore/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(408): Mage_Core_Controller_Front_Action->preDispatch()
#17 /home/hsstore/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('couponPost')
#18 /home/hsstore/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#19 /home/hsstore/public_html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#20 /home/hsstore/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#21 /home/hsstore/public_html/index.php(87): Mage::run('', 'store')
#22 {main} 
```

# spring - @Transactional(readOnly = true) 导致 LazyInitializationException

> ID：12800531
> 
> 赞同：8
> 
> 时间：2012-10-09T12:55:46.140
> 
> 标签：spring, hibernate, transactions

我与链接表中的附加列存在多对多关系。我已经将它配置为拥有方让孩子们渴望（所以我没有得到`LazyInitializationException`），而在相反的方向它是懒惰的。这行得通。

我现在想微调事务（在`@Transactional`DAO 和服务类的类级别之前。我将方法设置`getById`为`readOnly = true`：

```
@Transactional(readOnly  = true)
public Compound getById(Long id) {
    return compoundDAO.getById(id);
} 
```

在此更改之后，我得到`LazyInitializationException`以下代码段：

```
Compound compound = compoundService.getById(6L);        
Structure structure = compound.getComposition().get(0).getStructure();
System.out.println("StructureId: "+ structure.getId()); // LazyInitializationException 
```

如果我删除`(readOnly = true)`这个作品！谁能解释这种行为？我使用 Spring + Hibernate。有点令人困惑，因为我看不出这会影响加载哪些数据的任何原因？

* * *

编辑：

关系定义的片段。这是在链接表中具有一列的多对多。

拥有方（例如 Compound 包含结构）：

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "pk.compound",
    cascade = CascadeType.ALL, orphanRemoval = true)
@OrderBy("pk.structure.id ASC")
private List<CompoundComposition> composition = new ArrayList<>(); 
```

属于方：

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.structure",
cascade = CascadeType.ALL)
@OrderBy("pk.compound.id ASC")
private List<CompoundComposition> occurence; 
```

@Embeddable ID 类中的多对一

```
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Compound getCompound() {
    return compound;
}

@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Structure getStructure() {
    return structure;
} 
```

编辑2：

堆栈跟踪

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:165) ~[hibernate-core-4.1.7.Final.jar:4.1.7.Final]
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:272) ~[hibernate-core-4.1.7.Final.jar:4.1.7.Final]
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185) ~[hibernate-core-4.1.7.Final.jar:4.1.7.Final]
    at org.bitbucket.myName.myApp.entity.Structure_$$_javassist_0.getId(Structure_$$_javassist_0.java) ~[classes/:na]
    at org.bitbucket.myName.myApp.App.main(App.java:31) ~[classes/:na] 
```

编辑 3：

另见我的评论：

日志与 readOnly 非常不同，它缺少加载关系的部分，例如。日志中缺少一些选择。

编辑4：

所以我厌倦了基本的 DriverManagerDataSource 和没有连接池。问题完全一样。对我来说，这看起来像是 Hibernate 中的一个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T06:37:37.667

这只是哇。我开始理解为什么有些人讨厌 ORM ......感觉就像我经常不得不花费数小时来解决一个奇怪的问题，而解决方案是一组非常具体的注释 + 一些代码来解决所说的限制注释。

首先是为什么会发生这种情况（为什么用哪些注释来表示，而不是在逻辑意义上，这是这里的实际问题，因为使用常识是没有用的。只有反复试验才有帮助）。在拥有方面，在@OneToMany 我有 orphanRemoval = true （我发现这是一致性所必需的。有人会认为数据库约束应该处理这个......只是可能让你发疯的众多事情之一。）。似乎如果事务不是只读的，那么这个设置会导致一些数据被获取，即使它是惰性的，即这里：

```
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Structure getStructure() {
    return structure;
} 
```

在只读事务中，不会发生这种获取。我猜是因为如果您无法更改任何内容，您也不必删除孤儿，因此只读 tx 中不需要此设置背后的逻辑所需的任何数据。

因此，显而易见的解决方案将与更改为 FetchType.EAGER 相关。错误的！如果这样做，您将无法使用 session.merge 更新拥有方（复合）。这将导致 StackOverFlowError。

真正的解决方案实际上已经提到过。只需保持配置不变，但在服务层中显式加载所需的关系：

```
@Transactional(readOnly = true)
@Override    
public Compound getById(Long id) {

    Compound  compound = compoundDAO.getById(id);
    for (CompoundComposition composition : compound.getComposition()){
        Hibernate.initialize(composition.getStructure());
    }        
    return compound;
} 
```

我承认我倾向于陷入过早的优化陷阱。这看起来效率不高，而且似乎首先破坏了 SQL 的工作方式。但是我很幸运，在大多数情况下 CompoundComposition 将只包含 1 或 2 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T01:49:07.307

也许你可以把

```
value.getComposition().get(i).getStructure(); 
```

在`getById()`方法的主体中，以便延迟加载发生在事务中。我意识到在这种情况下你必须循环`i`可能不方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T11:00:24.777

两件事情 ：-

Lazy fetch 适用于 Collections Interface。自从 ...

```
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Structure getStructure() {
    return structure;
} 
```

...这不是一个集合接口（就像`List<Structure>`本来那样），它将以 Eager fetch 模式获取。

将服务方法设为事务性。似乎从 dao 层获取后，您的结构以 NEVER 刷新模式分离。我猜这是潜在的 ORM 问题。

# html - 使用相对于位置元素的边距或位置

> ID：12800534
> 
> 赞同：3
> 
> 时间：2012-10-09T12:55:57.350
> 
> 标签：html, css

我一直使用边距将浮动 div 移动到父 div 中的正确位置（例如标题 div 中的徽标 div）。这一直有效，但这意味着您必须使用元素的各个高度，否则它将影响布局的其余部分向下。

我今天找到了另一种方法，那就是使徽标 div 位置：相对；然后使用示例 top: 20px; 移动元素，这似乎不会影响布局。

我不想在不知道可能有其他含义的情况下适应这一点，所以任何人都可以指出上述任何一种方法的常见缺陷或可能提出更好的解决方案吗？

```
 // Sample HTML
  <div id='header'>
        <div id='logo'>
              LOGO GOES HERE
        </div>      
  </div>

  // Sample CSS
  #header {
        height: 100px;
  }

  // Version 1
  #logo {
        float: left;
        margin-top: 20px;
  }

  // Version 2
  #logo {
        float: left;
        position: relative;
        top: 20px;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:03:39.067

[来自 Mozilla 开发人员：](https://developer.mozilla.org/en-US/docs/CSS/position)

> **relative** 布局所有元素，就好像该元素没有定位一样，然后调整元素的位置，而不更改布局（从而为如果没有定位的元素留下一个间隙）。position:relative 对 table-*-group、table-row、table-column、table-cell 和 table-caption 元素的影响是未定义的。

我希望这回答了你的问题。

有时它可能是正确的使用方法，有时则不是。这实际上取决于您的布局，如果您想进行响应式设计，最好留有余量。

在您的情况下，标题的高度是固定的，因此您可以使用相对高度。我认为使用保证金是一种更常见的做法。我只知道有关`position: fixed`移动设备的问题。

[您可以在此处了解有关 CSS 和定位的更多信息。](https://developer.mozilla.org/en-US/learn/css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:11:50.653

在绝对位置和固定当你使用顶部或底部或右侧或左侧时，你不能使用浮动，你必须为其父使用这种样式

```
postion:relative; 
```

此致

# javascript - 将大型应用程序转换为 SPA

> ID：12800537
> 
> 赞同：1
> 
> 时间：2012-10-09T12:56:05.487
> 
> 标签：javascript, asp.net-mvc-4, single-page-application

是否有将更大的应用程序构建为 SPA 的最佳实践？我正在处理目前有 50 个视图的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:02:30.017

您的问题可能过于广泛，但我建议您充分考虑这一点。单页应用程序不会只是一个页面，其中包含 50 个视图的所有功能，它可能需要彻底改变应用程序样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:39:05.017

Dove 有一个很好的观点，具有 50 个视图的 SPA 听起来非常大，并且可能没有灵丹妙药来转换您的应用程序。

一些值得探索/研究的方法......

*   将您的 50 个视图分成应用程序区域。然后使用 ASP.Net MVC Views & WebAPI 下推 manifest+scaffold 以创建您的视图。
    *   使用[JSViews+JSRender](http://borismoore.github.com/jsviews/demos/index.html) / [KendoUI](http://kendoui.com) + [KnockoutJS](http://knockoutjs.com/)使用 manifest/scaffold 在客户端构建东西。
*   它非常新，但为什么不检查一下[TypeScript](http://typescript.codeplex.com/)以使用 JavaScript 构建应用程序

此外，查看这 50 个视图，看看您是否能找到一种更智能的方法来提供相同的功能，但视图更少（而不是将其塞进同一个页面）。

# c - 结构 c 的 qsort

> ID：12800538
> 
> 赞同：0
> 
> 时间：2012-10-09T12:56:09.370
> 
> 标签：c, text, qsort

下面是我的代码：

我似乎无法有效地使用 qsort... 在填充了名称和开始时间后，它会将我的数组变成 0... 这是我的 qsort 调用的问题吗？或 qsort 本身。

带有结构的标题如下：

```
 /**
 * Simulation of a process scheduler
*/

//#ifndef SCHEDULER_H_
#define SCHEDULER_H_

#include <stddef.h>
#include <errno.h>
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <ctype.h>

/* types */
/** units of time */
typedef long time;
/** process identifier */
typedef int pid;

/** Information about a job of interest to the task scheduler */
struct job_data {

/* pid of this process */
    pid pid;
    /* time process starts */
    time start;
    /* time needed to finish */
    time finish;
    /* time spent processing so far */
    time scheduled;
    /* Number of lines */
    int lines;

};

struct job {

    /* Various parameters used by the scheduler */
    char job_id[20];
    struct job_data parameters;
    char *lines[20];

};  

      /* I/O Files */
        //static char *inputFile;
        char * in;
        static FILE *input;
        static FILE *cur;
        /*Scheduled jobs indexed by PID*/
        struct job list[20];

        /* the next job to schedule */
        //static struct job *job_next = NULL;

        /* Time */
        time clock;

        /*Comparison for qsort*/
        int compare_start(const void *x, const void *y)
        {
            const struct job *a = x;
            const struct job *b = y;

                printf("%ld, %ld\n", a->parameters.start, b->parameters.start);

             if (a->parameters.start < b->parameters.start) 
            {
                        return -1;
             }
             if (a->parameters.start > b->parameters.start) 
            {
                    return 1;
             }

            return 0;

        }

        /*Order Jobs*/
        static void order_jobs(void)
        {

            qsort(list, (sizeof list) / (sizeof list[0]), sizeof list[0], compare_start);   

        }

        /** Read and parse input from input file */
        static void parse_input(void) 
        {
            char    buffer[BUFSIZ];
            char    lines[BUFSIZ];
            int jobs = 0;
            struct  job *current;

            while( fgets(buffer, sizeof(buffer), input) )   
            {

                time start;
                char buf[BUFSIZ];
                sscanf(buffer,"./%s/", buf);
                cur = fopen(buf, "r" );

                int n_lines = 0;

                while( fgets(lines, sizeof(lines), cur) )
                {

                    if( n_lines == 0 )
                    {
                        current = &list[jobs];
                        strcpy(current->job_id, buf);
                        sscanf(lines,"%ld", &start);
                        current->parameters.start = start;              
                    }       

                    n_lines++;
                } 
                current->parameters.lines = n_lines;

                jobs++;

                fclose(cur);

            } 
            order_jobs();
            for (int i = 0; i < jobs; i++)
            {
                printf("%s %ld  %d\n", list[i].job_id, list[i].parameters.start, list[i].parameters.lines);
            }   

        }

int main(int argc, char **argv) 
{
    in = argv[1];
    if ( (input = fopen(in, "r")) == NULL ) {
        fprintf(stderr, "cannot open %s\n", argv[1]);
    }

    parse_input();

    fclose(input);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:58:49.503

您只`jobs`将条目加载到数组中，但您告诉`qsort()`对整个数组（20 个元素）进行排序。这可能会将未初始化的元素放在前面，然后打印。

# sql-server - 什么时候分配空间

> ID：12800539
> 
> 赞同：3
> 
> 时间：2012-10-09T12:56:08.833
> 
> 标签：sql-server, sql-server-2008-r2, diskspace, nvarchar

如果我将列声明为`nvarchar(max)`，我知道这将分配 2Gb 的空间，但是一旦我将更改保存到表中，它实际上是否会立即占用 2Gb 的磁盘空间？或者，是否注意到该列将允许在该列中填充 2Gb 的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:14:39.720

据我了解，在需要之前不会分配空间。

尝试以下查询：

```
CREATE TABLE SizeTest (

    MyID int primary key
)

INSERT INTO SizeTest SELECT 1
UNION SELECT 2 
UNION SELECT 3
UNION SELECT 4
UNION SELECT 5

EXEC sp_spaceused 'SizeTest'

ALTER TABLE SizeTest ADD MyBigText nvarchar(max)

EXEC sp_spaceused 'SizeTest'

UPDATE SizeTest SET MyBigText = 'This is big text' WHERE MyID = 1

EXEC sp_spaceused 'SizeTest'

DROP TABLE SizeTest 
```

通过执行此语句，您应该为所有三个`sp_spaceused`调用获得以下信息：

```
name        rows      reserved  data  index_size unused
SizeTest    5           16 KB   8 KB        8 KB    0 KB 
```

在任何时候都没有分配 2GB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:33:07.903

VARCHAR(MAX) 的最大存储大小为 2^31-1 字节（2,147,483,647 字节或 2GB - 1 字节）。存储大小是输入数据的实际长度 + 2 个字节。输入的数据长度可以是 0 个字符。由于 VARCHAR 数据类型中的每个字符使用一个字节，因此 VARCHAR(MAX) 数据类型的最大长度为 2,147,483,645。

NVARCHAR(MAX) 的最大存储大小也是 2^31-1 字节（2,147,483,647 字节或 2GB - 1 字节）。存储大小（以字节为单位）是输入字符数的两倍 + 2 个字节。输入的数据长度可以是 0 个字符。由于 NVARCHAR 数据类型中的每个 Unicode 字符使用两个字节，因此 NVARCHAR(MAX) 数据类型的最大长度为 1,073,741,822。

VARBINARY(MAX) 的最大存储大小与 VARCHAR(MAX) 和 NVARCHAR(MAX) 的最大存储大小相同，均为 2^31-1（2,147,483,647 字节或 2GB - 1 字节）。存储大小是输入数据的实际长度 + 2 个字节。输入的数据长度可以是 0 字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:58:54.983

将允许 2Gb 的数据 :) 我想是这样.. 它允许直到 2Gb 但它不会立即分配这个空间

# hibernate - Hibernate envers - 如何只存储更新的值

> ID：12800540
> 
> 赞同：2
> 
> 时间：2012-10-09T12:56:11.163
> 
> 标签：hibernate, hibernate-envers, post-update

我正在使用 Hibernate Envers 进行审计。更新后和插入后工作正常。

我有一个要求，我只需要审计审计表中的更新列（例如employee_aud）。默认情况下，envers 会将整个持久化实体插入到审计表中。

我只需要插入更新的值。

有没有可能这样做？

提前致谢。

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:29:40.513

如果您没有为插入后配置 envers 侦听器会发生什么？

我的意思是如果你从你的配置中取出插入后的监听器？

```
 <listener class="org.hibernate.envers.event.AuditEventListener" type="post-insert"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T01:24:45.290

当您使用 注释实体时`@Audited`，您可以控制 Envers 在发生更改时应检查哪些属性。然后将这些属性在旧状态和新状态之间进行比较，如果有任何不同，Envers 将使用所有已审计属性的新状态值写入新的审计记录。

换句话说，Envers 不会仅使用您为审计切换的修改后的属性编写新的审计行。如果其中任何一个发生更改，它将写入一个包含所有已审计属性的新审计行。

# .htaccess - Drupal .htaccess 重写/替换没有重定向

> ID：12800542
> 
> 赞同：1
> 
> 时间：2012-10-09T12:56:27.820
> 
> 标签：.htaccess, drupal, rewrite

我有一个如下 URL：`www.site.com/catalog/?type=6` 我需要将其重写为`www.site.com/white-wines/white-cases`.

重要的是它不是重定向，例如 URL 应保持`www.site.com/white-wines/white-cases`访问时的状态，但显示来自`www.site.com/catalog/?type=6`.

我当前的解决方案执行重定向，我正在努力解决这个问题。

```
RewriteRule ^white-wines/white-cases$ http://www.site.co.uk/catalog/?type=6 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:48:13.783

如果目标与当前主机名不同，则在目标中设置完整地址意味着重定向，而不是重写。尝试根相对路径。

```
RewriteRule ^white-wines/white-cases$ /catalog/?type=6 [L] 
```

您不能重新写入不同的主机名。

> 绝对网址
> 
> 如果指定了绝对 URL，mod_rewrite 会检查主机名是否与当前主机匹配。如果是这样，则方案和主机名将被删除，并且生成的路径将被视为 URL 路径。否则，将对给定 URL 执行外部重定向。要强制将外部重定向回当前主机，请参见下面的 [R] 标志。
> 
> 来源：[Apache 模块 mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# angularjs - 如何在 angularjs (ng-show) 中应用更改？

> ID：12800546
> 
> 赞同：6
> 
> 时间：2012-10-09T12:56:35.280
> 
> 标签：angularjs

我有表格

```
<form ng-controller="SessionController" name="login_form">
  <div class="hide" ng-show='invalid_credentials'>Invalid email/pass</div>
  <input type="submit" value="Login" ng-click='login()'>
</form> 
```

控制器：

```
utApp.controller('SessionController', ($scope, $cookieStore, ClientService) ->
  $scope.login = ->
    ...
    if something
      $scope.invalid_credentials = true
      return 
```

在某些情况下`$scope.invalid_credentials`设置为 true，但未显示带有错误消息的 div。如何展示它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T13:08:16.443

Angular 不会重新检查`invalid_credentials`变量的值。使用函数作为`ng-show`参数应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T15:21:08.187

接受的答案将起作用......但是，您真正需要做的是使用 $scope.$apply

```
utApp.controller "SessionController", ($scope, $cookieStore, ClientService) ->
  $scope.login = ->
    if something
      $scope.$apply (s) ->
        s.invalid_credentials = true 
```

通常，当您更新范围时，它不会更新 UI ......这是因为您需要使用[$apply](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)。

# iphone - 错误 CGImageCreate：无效的图像大小：0 x 0 带有（选择器）窗口旋转

> ID：12800549
> 
> 赞同：8
> 
> 时间：2012-10-09T12:56:45.400
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我在通用项目中使用 iOS 6 时遇到此错误`("CGImageCreate: invalid image size: 0 x 0")`，仅适用于新 iPad 模拟器（不适用于旧 iPad 模拟器或 iPhone），如果我加载一个`UIPickerViewController`超过 a`splitViewController`且仅纵向（而不是横向）的窗口。

当我旋转 iPad 时出现错误。

我不认为有可能产生错误的图像......为什么？

我用来加载选择器的代码：

```
- (void) pickerViewControllerDidFinish:(PickerViewController *)controller {
    if (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPad) {
        self.path = controller.path;             
        [self dismissViewControllerAnimated:YES completion:nil];
        FeedRootViewController *controllerF = [[FeedRootViewController alloc] initWithNibName:@"FeedRootViewController" bundle:nil];
        controllerF.path = self.path;
        controllerF.detailViewController = self.detailViewController;
        [self.navigationController pushViewController: controllerF animated:YES];
        [controllerF release];  
        NSString *urlAddress = [[NSBundle mainBundle] pathForResource:@"feeds" ofType:@"html"];
        NSURL *url = [NSURL fileURLWithPath:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [detailViewController.webView loadRequest:requestObj];
        [detailViewController.webView setScalesPageToFit:YES];
        [path release];
    }
} 
```

但是我不知道问题是否来自此代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T10:26:40.350

您的代码的最后一行`[path release];`看起来很可疑。如果**path**是一个局部变量，请确保它不会在**dealloc**方法中释放。如果它释放**FeedRootViewController的****路径**属性可能会变得未定义，你会得到一个错误。也不要将属性与局部变量混合，这可能会导致错误并使您的代码不可读。

# java - 使用线程进度更新检票页面

> ID：12800550
> 
> 赞同：0
> 
> 时间：2012-10-09T12:56:48.023
> 
> 标签：java, ajax, multithreading, wicket

我有一个案例，我需要根据在另一个线程中执行的操作来更新一个 gui 组件。为此，我有以下内容：

扩展 WebPage 并创建输入字段、表单和标签的类。提交表单时，将启动一个处理来自输入文件的数据的线程，并将 AbstractAjaxTimerBehavior 附加到页面，该页面使用线程的进度/状态更新标签。

因为我无法在 ajax 计时器的 onTimer () 方法中访问线程对象，所以我在创建线程时将类的引用传递给线程。然后线程用它的进度更新类的变量（状态）。ajax 计时器所做的是用状态值更新标签的值。

```
public int status;

@Override
public void onSubmit ()
{
    final Task task = new Task (ViewPage.this);
    Thread thread = new Thread (task);
    thread.start ();

    AbstractAjaxTimerBehavior timer = new AbstractAjaxTimerBehavior (Duration.milliseconds (1000))
    {
        private static final long serialVersionUID = 1L;

        @Override
        protected void onTimer (AjaxRequestTarget target)
        {
            System.out.println ("> Progress [" + status + "]");

            if (status == x)
            {
               // refresh page
               setResponsePage (getPage().getClass ());
            }
        }
    };

    getPage().add (timer);
} 
```

有没有一种方法可以通过直接从 ajax 计时器或以干净的方式访问线程对象来更新标签的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:31:31.727

你可以使用：

[http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxSelfUpdatingTimerBehavior.html](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxSelfUpdatingTimerBehavior.html)

我认为您可以将其附加到任何组件以在一定时间后重新渲染：

```
component.add(new AjaxSelfUpdatingTimerBehavior(Duration.seconds(5))); 
```

这将简单地重新呈现，您可以访问您的资源并更新标签。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:54:11.773

我在这里找到了一个很好的答案：[Wicket 倒计时计时器不会自我更新](https://stackoverflow.com/questions/7032620/wicket-countdown-timer-will-not-self-update)

我创建了一个具有状态成员的模型类。然后创建该类的一个实例并将其设置为Label的模型，并将其传递给线程以更新状态值。然后在 onTimer() 方法中添加要更新的标签。

```
public class ProgressModel implements IModel<String>
{
    private static final long serialVersionUID = 1L;

    public String status;

    @Override
    public void detach ()
    {
        // TODO Auto-generated method stub
    }

    @Override
    public String getObject ()
    {
        return status;
    }

    @Override
    public void setObject (String object)
    {
        status = object;
    }
} 
```

创建模型实例并将其设置为 Label 对象

```
pm = new ProgressModel ();
statusLbl = new Label ("statusLbl", pm);
statusLbl.setOutputMarkupId (true); 
```

在 AbstractAjaxTimerBehavior 的 onTimer() 方法中只需设置要更新的 Label 对象

```
@Override
protected void onTimer (AjaxRequestTarget target)
{
    target.add (statusLbl);
} 
```

在线程类中，我有：

```
class Task implements Runnable
{
    public Task (ProgressModel progressModel)
    {
        this.pm = progressModel;
    }

    @Override
    public void run ()
    {
        // some operations
        pm.status = x;
    }
} 
```

# sdk - 将印地语或卡纳达语用于 microsoft speech sdk

> ID：12800552
> 
> 赞同：2
> 
> 时间：2012-10-09T12:56:53.200
> 
> 标签：sdk, microsoft-speech-api

Microsoft Speech SDK 中是否有任何可用的印地语或卡纳达语语言包。印地语和卡纳达语是印度使用的语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:02:57.823

版本 11 支持的语言列表在[这里](http://msdn.microsoft.com/en-us/library/hh378476.aspx)，最接近您要求的是[英语-印度语运行时语言](http://download.microsoft.com/download/4/0/D/40D6347A-AFA5-417D-A9BB-173D937BEED4/MSSpeech_SR_en-IN_TELE.msi)。下载它并检查它是否有你需要的东西。

# iphone - 更改 reg-ex 以在 iphone 上进行电子邮件验证

> ID：12800554
> 
> 赞同：1
> 
> 时间：2012-10-09T12:57:02.487
> 
> 标签：iphone, objective-c, ios, regex

我正在尝试使用 reg-ex 验证电子邮件。这是代码...

```
+ (BOOL) stringIsValidEmail:(NSString *)checkString;
{
    NSString *emailRegEx =
    @"(?:[a-zA-Z0-9!#$%\\&'*+/=?\\^_`{|}~-]+(?:\\.[a-z0-9!#$%\\&'*+/=?\\^_`{|}"
    @"~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\"
    @"x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-"
    @"z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5"
    @"]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-"
    @"9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21"
    @"-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx]; 

    return [emailTest evaluateWithObject:checkString];
} 
```

现在我对正则表达式知之甚少，但这接受 a@ac 作为有效电子邮件。但情况并非如此，最后至少需要两个字符。我需要更改什么参数才能返回false。我已经打过并尝试过，但没有奏效。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:06:22.437

符号太多，你可以试试这个

```
- (BOOL) IsValidEmail:(NSString *)checkString {
    BOOL sticterFilter = YES; 
    NSString *stricterFilterString = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSString *laxString = @".+@.+\\.[A-Za-z]{2}[A-Za-z]*";
    NSString *emailRegex = sticterFilter ? stricterFilterString : laxString;
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
    return [emailTest evaluateWithObject:checkString];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:09:57.240

尝试将其用作正则表达式

```
NSString *emailRegex = @"[A-Z0-9a-z._]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
```

{2,4} 特别验证结束字符应该是字母并且数量超过两个

# c# - 段控制上的 iOS 捕获选择

> ID：12800558
> 
> 赞同：0
> 
> 时间：2012-10-09T12:57:05.813
> 
> 标签：c#, ios, xamarin.ios, uisegmentedcontrol

我是使用 MonoTouch 进​​行 iOS 和 iPhone 开发的新手。我有一个 UIViewController 并且在 XCode 中我在我的视图上放置了一个有 2 个选项的段控制器。我有一些问题。

1.  我应该与 XCode 中的段控制建立什么样的连接？
2.  如何在我的视图控制器中捕获响应？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:10:06.087

首先，因为您是 iOS 新手。我建议你不要使用 Monotouch，不是因为我认为它不好。但是如果你直接使用 Xcode 和 Objective-C 来做，你可以了解代码的底层管道。我这样说是因为有时 MonoTouch 可能会抛出错误，这对于在 Objective-C 级别本地工作的开发人员来说似乎很明显。

话虽如此，它`UISegmentedControl`的连接方式与 iOS 中几乎所有其他控件的连接方式相同。

（假设您正在使用带有 ARC 的情节提要）

将 a`UISegmentedControl`拖到所需的视图上。我还将假设您有一个与视图控制器关联的类。类似于下面的屏幕截图，左边是`ViewController`我的类，右边是与之关联的类（忽略命名，我只是截取了我现在正在处理的东西的屏幕）

![UIViewController 图像](../Images/6fa23fc23a6566be2b0764f53758bfe0.png)

要连接分段控件，请在文件中包含以下代码`ViewController.h`：

```
@property (retain, nonatomic) IBOutlet UISegmentedControl *segmentedControl; 
```

然后在你的`ViewController.m`文件中合成它们：

```
@synthesize segmentedControl; 
```

你的故事板应该有类似下面的截图。请注意，参考插座中的值。

![分段控制](../Images/076b59561687842a53fc3c6bb19ea7d7.png)

通过所有接线设置，您现在可以做不同的事情。示例屏幕截图如下所示：

![分段控制选项。](../Images/0e1722767984b80600e4f9e72d73abe5.png)

# height - Android中动态设置TextView的宽高

> ID：12800561
> 
> 赞同：6
> 
> 时间：2012-10-09T12:57:14.357
> 
> 标签：height, width, textview, android

我正在尝试使用`setWidth(width)`方法动态设置 TextView 宽度。

```
txtviewOne.setWidth(10);
txtviewTwo.setWidth(10); 
```

但不是成功。

请帮助我如何动态设置 textview 的宽度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T08:39:11.527

```
TextView tv;
----------------------
tv=new TextView(this);   // or  tv=new TextView(R.id.textview1);

LinearLayout.LayoutParams Params1 = new LinearLayout.LayoutParams(15,50);
tv.setLayoutParams(Params1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-24T10:29:33.070

我打电话`new TableRow()`，因为 textView 的父母是`TableRow`. 如果您父母的观点是`LinearLayout`，请将其替换为`new LinearLayout.LayoutParams`。

```
textView.setLayoutParams(
    new TableRow.LayoutParams(
        LayoutParams.WRAP_CONTENT, 
        LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T10:03:30.943

在父层次结构中有 ScrollView 的情况下，我遇到过类似的情况。无论我如何修改其中的布局，我的命令都被忽略了。如果是这种情况，请尝试在 ScrollView 上调用 RequestLayout 或删除并重新添加 ScrollView 的子视图。

# android - 单击列表视图中的项目时显示图像

> ID：12800566
> 
> 赞同：0
> 
> 时间：2012-10-09T12:57:41.833
> 
> 标签：android, android-intent

我正在使用 listview ...我尝试在 itemclicked 列表时打开图像并且在另一个活动中进行 diaply ...但它不工作...如果你知道的朋友请帮助我...谢谢....

```
 @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

// Find the ListView resource. 
mainListView = (ListView) findViewById( R.id.mainListView );
mainListView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> mainListView, View view, int pos,
            long id) {

        //Object obj = getFilesDir().getPath();
        //String value= obj.toString();

        Intent intent= new         Intent(SimpleListViewActivity.this,Nextclass.class);
        final String root = Environment.getExternalStorageDirectory().getAbsolutePath();
        intent.setData(Uri.parse(root + "/mnt/sdcard/dcim/100andro/koala_copy.jpg"));
        startActivity(intent);
    }

    private ArrayAdapter<String> getListAdapter() {
        // TODO Auto-generated method stub
        return null; 
    } 
```

我的 main.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ListView android:layout_width="fill_parent" 
  android:layout_height="fill_parent" 
  android:id="@+id/mainListView">
</ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:31:53.167

我们还需要查看`NextClass`'s 代码，因为这就是接收您正在启动的 Intent 的内容。它应该是 的子类`Activity`。然后在它的`onCreate`or`onResume`你调用`getIntent()`中，检查意图是否有你需要的额外/数据，并将图像加载到一个`ImageView`或其他东西中。

# java - 请解释 Java 泛型常见问题解答中的此声明

> ID：12800569
> 
> 赞同：10
> 
> 时间：2012-10-09T12:57:48.693
> 
> 标签：java, generics

有人可以解释以下语句的含义：

> 不允许创建具有不可具体化组件类型的数组。

这是在[Anjelika Langer 的 Java 泛型常见问题解答中编写的](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ300)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T13:06:03.160

> 不允许创建具有不可具体化组件类型的数组。

实际上意味着*创建通用数组*是非法的：

```
new T[...] // prohibited 
```

不允许使用通用数组，因为数组在运行时包含有关其组件的信息。这不适用于泛型。泛型在编译器级别实现。因此，在创建数组时必须事先知道组件类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T13:02:52.067

> Java 编程语言不允许创建参数化类型的数组，即不允许创建 new T []
> 
> 如果数组的元素类型不可具体化（第 4.7 节），则虚拟机无法执行上一段中描述的存储检查。这就是为什么禁止创建不可具体化类型的数组的原因。可以声明其元素类型不可具体化的数组类型的变量，但任何试图为它们赋值的尝试都会引发未经检查的警告（第 5.1.9 节）。

[你可以在这里](http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html)阅读更多关于它的信息 查看更多：

*   [不可具体化的类型](http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html)
*   [对泛型的限制](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html)
*   [具有不可具体化形式参数的 Varargs 方法的潜在漏洞](http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html#non-reifiable-types)

下面是代码示例，它显示了如果您将可变参数与泛型类型一起使用会出现什么问题。

```
public class ArrayBuilder {

public static <T> void addToList(List<T> listArg, T... elements) {
    for (T x : elements) {
        listArg.add(x);
    }
}

public static void faultyMethod(List<String>... l) {
    Object[] objectArray = l; // Valid
    objectArray[0] = Arrays.asList(42);
    String s = l[0].get(0); // ClassCastException thrown here
}

public static void main(String[] args) {

    List<String> stringListA = new ArrayList<String>();
    List<String> stringListB = new ArrayList<String>();

    ArrayBuilder.addToList(stringListA, "Seven", "Eight", "Nine");
    ArrayBuilder.addToList(stringListA, "Ten", "Eleven", "Twelve");
    List<List<String>> listOfStringLists = new ArrayList<List<String>>();
    ArrayBuilder.addToList(listOfStringLists, stringListA, stringListB);

    ArrayBuilder.faultyMethod(Arrays.asList("Hello!"),
            Arrays.asList("World!"));
}

} 
```

当编译器遇到可变参数方法时，它会将可变参数形式参数转换为数组。然而，`the Java programming language does not permit the creation of arrays of parameterized types`. 在方法 ArrayBuilder.addToList 中，编译器将 varargs 形参`T...`元素转换为形参`T[]`元素，一个数组。但是，由于类型擦除，编译器将`varargs`形式参数转换为`Object[]`元素。因此，存在堆污染的可能性。

以下语句将可变参数形式参数分配给`l`Object 数组 objectArgs：

```
Object[] objectArray = l; 
```

此语句可能会引入堆污染。与可变参数形式参数 l 的参数化类型匹配的值可以分配给变量 objectArray，因此可以分配给 l。但是，编译器不会在此语句处生成未经检查的警告。`List<String>`编译器在将可变参数形式参数... l 转换为形式参数l时已经生成警告`List[]`。本声明有效；变量 l 的类型`List[]`是 ，它是 的子类型`Object[]`。

因此，如果将任何类型的 List 对象分配给 objectArray 数组的任何数组组件，编译器不会发出警告或错误，如以下语句所示：

```
objectArray[0] = Arrays.asList(42); 
```

此语句将包含一个 Integer 类型对象的 List 对象分配给 objectArray 数组的第一个数组组件。

假设您使用以下语句调用 ArrayBuilder.faultyMethod：

```
 ArrayBuilder.faultyMethod(Arrays.asList("Hello!"), Arrays.asList("World!")); 
```

在运行时，JVM 在以下语句中抛出 ClassCastException：

```
 // ClassCastException thrown here
   String s = l[0].get(0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T13:03:18.037

如果您在该链接中进一步阅读，您会发现以下声明：-

```
Pair<String,String> is not a reifiable type, that is, it loses information as a 
result of type erasure and is at runtime represented as the raw type Pair 
instead of the exact type Pair<String,String> 
```

更多来自[JLS - 阵列](http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html)：-

> **讨论**
> 
> 如果数组的元素类型不可具体化（第 4.7 节），则虚拟机无法执行上一段中描述的存储检查。这就是为什么禁止创建不可具体化类型的数组的原因。可以声明其元素类型不可具体化的数组类型的变量，但任何试图为它们赋值的尝试都会引发未经检查的警告（第 5.1.9 节）。

# php - PHP 到 mySQL 查询错误

> ID：12800573
> 
> 赞同：1
> 
> 时间：2012-10-09T12:58:01.877
> 
> 标签：php, mysql, ios

我收到此错误：

```
Query failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' ,,)' at line 2 
```

在这个 PHP 代码上：

```
<?php

$id = $_POST['id'];
$longitude = $_POST['longitude'];
$latitude = $_POST['latitude'];
$timestamp = $_POST['stringFromDate'];

$link = mysql_connect('server', 'user', 'pass')
or die('Could not connect: ' . mysql_error());

mysql_select_db('db_name') or die('Could not select database');

// Performing SQL query
$query="INSERT INTO locatie (id, longitude, latitude, timestamp) 
VALUES ($id, $longitude,$latitude,$timestamp)";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);
?> 
```

我是初学者，所以我不知道我做错了什么

**编辑：这是写入 php 文件的代码：**

```
 - (void)myFuntionThatWritesToDatabaseInBackgroundWithLatitude:(NSString *)latitude  longitude:(NSString *)longitude date:

 (NSString *)stringFromDate {

_phonenumber = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

NSMutableString *postString = [NSMutableString stringWithString:kPostURL];
NSString*jsonString = [[NSString alloc] initWithFormat:@"{\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"}",_phonenumber, longitude , latitude, stringFromDate];

[postString appendString:[NSString stringWithFormat:@"?data=%@", jsonString]];
[postString setString:[postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString ]];
[request setHTTPMethod:@"POST"];

[[NSURLConnection alloc] initWithRequest:request delegate:self ];
NSLog(@"Post String =%@", postString);

//    LocationTestViewController*locationTestViewController = [[LocationTestViewController alloc]init];
//    phonenumber = locationTestViewController.telefoonnummer;
NSLog(@"HERE1 : %@", _phonenumber);

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:05:29.330

问题 1：您正在使用这些[`mysql_*`](http://php.net/mysql_connect)功能。它们有一个红色警告框，告诉您不要出于某种原因使用它们。

问题 2：您没有转义数据。这使您容易受到由意外输入引起的 XSS 攻击和 SQL 语法错误的攻击。

问题 3：您没有在 SQL 查询中引用您的数据。

所有这三个问题都可以通过使用需要现代 API（解决问题 1）并自动引用和转义数据（解决问题 2 和 3）的[**准备好的语句和参数化查询来解决。**](https://stackoverflow.com/a/60496/19068)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:01:15.993

我真的建议，就像@MichaelBerkowski 所说，你检查你的 POST 数据的内容。我很确定这些变量之一是完全空的：

```
$id = $_POST['id'];
$longitude = $_POST['longitude'];
$latitude = $_POST['latitude'];
$timestamp = $_POST['stringFromDate']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:07:12.153

也许您应该使用另一种表示法并防止 SQL 注入。

最好的方法是使用准备好的语句。

[http://php.net/manual/de/pdo.prepared-statements.php](http://php.net/manual/de/pdo.prepared-statements.php)

```
$id = $_POST['id'];
$longitude = $_POST['longitude'];
$latitude = $_POST['latitude'];
$timestamp = $_POST['stringFromDate'];

$stmt = $dbh->prepare("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES (?,?,?,?)");
$stmt->bindParam(1, $id);
$stmt->bindParam(2, $longitude);
$stmt->bindParam(3, $latitude);
$stmt->bindParam(4, $timestamp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:08:16.913

如果它们是文本，则需要添加引号：

```
$query="INSERT INTO locatie (id, longitude, latitude, timestamp) 
VALUES ($id, '$longitude','$latitude','$timestamp')"; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-09T13:08:38.783

您应该将变量放在单个 '' 引号内

$query="INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('$id', '$longitude','$latitude','$timestamp')";

# image - 将图像包装在 div 中，因此不超过最大宽度

> ID：12800577
> 
> 赞同：3
> 
> 时间：2012-10-09T12:58:22.937
> 
> 标签：image, html, word-wrap

我正在展示一些图像，我希望它们在达到 div 最大宽度限制时转到下一行。

我已经尝试了很多东西，但都没有奏效。

这就是问题所在，图像从 DIV 中出来：

[http://i.imgur.com/68bqa.png](http://i.imgur.com/68bqa.png)

我想把最后一个图标放在第一个图标下面，等等。我的意思是，我不希望它们超过 div 宽度。当他们到达限制时，自动遵守限制并转到下一行。

应该不难，就是不知道怎么弄。

这是html：

```
<div class="awards-member">
<a href="blabla"><img src="blabla.png"></a>
<a href="blabla1"><img src="blabla1.png"></a>
<a href="blabla2"><img src="blabla2.png"></a>
<a href="blabla3"><img src="blabla3.png"></a>
<a href="blabla4"><img src="blabla4.png"></a>
</div> 
```

这是CSS：

```
.awards-member {
    width: 150px;
    }

.awards-member img{
    display: inline-block;
    } 
```

任何的想法？非常感谢男人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:04:23.277

尝试

```
.awards-member {
    width: 150px;
    white-space:normal;
    } 
```

# c++ - 更新 MFC 的 CSliderCtrl

> ID：12800581
> 
> 赞同：1
> 
> 时间：2012-10-09T12:58:31.873
> 
> 标签：c++, mfc, slider

我正在开发一个 C++ MFC 项目并在以下方面遇到问题。我的表单上有一个 CSliderCtrl，我称之为 MFC_scKINECTANGLE。为了使它成为我想要的方式，使用下一段代码：

```
MFC_scKINECTANGLE = (CSliderCtrl * ) GetDlgItem(SC_kinectAngle);
MFC_scKINECTANGLE->SetRangeMax(27);
MFC_scKINECTANGLE->SetRangeMin(-27);        
MFC_scKINECTANGLE->SetPos(0); 
```

问题是程序开始时的滑块在栏的顶部，而它应该在中间，当你试图抓住它时，它突然跳到正确的位置，之后就可以正常工作了。如何确保滑块在程序开始时位于栏的中间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:14:08.830

根据 MSDN [`CSliderCtrl::SetRangeMax`](http://msdn.microsoft.com/en-us/library/144y7b24%28v=vs.80%29.aspx)（`CSliderCtrl::SetRangeMin`类似）：

```
void SetRangeMax(
   int nMax,
   BOOL bRedraw = FALSE 
); 
```

您需要将`bRedraw`参数设置`TRUE`为更新滑块。

另一个（可能更好的）变体 - 设置后强制重绘滑块。

但是由于 MS trackbar 实现中的错误（或功能？），您不能只调用[`CWnd::Invalidate`](http://msdn.microsoft.com/en-us/library/ax04k970%28v=vs.90%29)（用于延迟重绘）甚至[`CWnd::RedrawWindow`](http://msdn.microsoft.com/en-us/library/0fdz8ey6%28v=vs.90%29)（用于立即重绘）。这不会有任何影响。

幸运的是，有几个事件会强制跟踪栏重新绘制，例如启用/禁用窗口：

```
const BOOL isEnabled = MFC_scKINECTANGLE->IsWindowEnabled();

MFC_scKINECTANGLE->EnableWindow(!isEnabled);
MFC_scKINECTANGLE->EnableWindow(isEnabled); 
```

有关详细信息，请参阅[此讨论](http://www.microsoftfaqs.com/msg/14841210.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T21:31:53.220

我在对话框的构造函数中设置范围（0 - 100）和位置（50）。滑块最初一直显示在位置 0 处。如果我在 SetPos() 之后立即调用 GetPos()，它将返回 0 而不是 50。

使它对我有用的是覆盖 OnInitDialog() 并在那里而不是在构造函数中设置范围和位置。

```
BOOL CVolumeDlg::OnInitDialog()
{
    CDialogEx::OnInitDialog();

    m_VSliderBarNormal.SetRange(0, 100, TRUE);
    m_VSliderBarNormal.SetPos(50);

    return TRUE;  // return TRUE unless you set the focus to a control
                  // EXCEPTION: OCX Property Pages should return FALSE
} 
```

# c - 使用c代码的排列函数

> ID：12800584
> 
> 赞同：0
> 
> 时间：2012-10-09T12:58:40.283
> 
> 标签：c

我编写了一个程序，它打印给定字符串的所有排列。但它打印了一些奇怪的东西。代码如下：

```
#include <stdio.h>

void swap (char *x, char *y)
{
  char temp;
  temp = *x;
  *x = *y;
  *y = temp;
}

void permute(char *a, int i, int n)
{
  int j;
  if (i == n)
    printf("%d\n", a);
  else
  {
    for (j = i; j <= n; j++)
    {
      swap((a+i), (a+j));
      permute(a, i+1, n);
      swap((a+i), (a+j));
    }
  }
}

int main(void)
{
  char a[100];
  gets(a);

  int k;
  k=strlen(a);
  permute(a, 0, k-1);

  system("pause");
} 
```

它正在打印一些数字而不是给定的字符串..请帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:00:10.177

有你的问题：

```
 printf("%d\n", a); 
```

应该

```
 printf("%s\n", a); 
```

# facebook - 在 Facebook 中查找帖子

> ID：12800587
> 
> 赞同：2
> 
> 时间：2012-09-27T07:42:30.727
> 
> 标签：facebook, search

我正在我的个人 Facebook 帐户上制作一些信息图表。我想查询最近 2 年内我喜欢的某个朋友的所有帖子。

有人能帮我吗？

我不是 PHP 编码员，但我有 Java 和 Python 的背景。我试图在[这里](http://developers.facebook.com/docs/reference/php/)寻找一些东西，但没有找到合适的东西。也许是错误的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:05:09.500

是的，如果您不是 php 程序员，那绝对是错误的 API。你需要在这里查看 Facebook 的 Graph API：[Graph API](https://developers.facebook.com/docs/reference/api/)。那里有你需要的一切。还有实现 Graph API 的 python 模块，我认为一个例子是*pyfacebook*。

基本上你需要知道的是如何从 python 向*互联网*发出请求。

您拉帖子的方式是使用 Graph API 中的参数*提要*（在我发送的页面中查找），ID 是您的朋友（或任何用户）之一。

您还需要请求一个 Access_token，但这是另一点，关于它的帖子数以百万计。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:16:35.603

可以在[http://graph.facebook.com找到 Graph API 文档](http://graph.facebook.com)

[http://developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/)是一个使用 Facebook API的*SDK*

要获取您朋友的帖子，您将需要`read_stream`权限和对 API 的此调用

```
/FRIEND_ID/posts?fields=likes 
```

您需要获取所有分页数据才能从用户那里获取所有帖子

从那里，在 Python 中，查看`fields`您的 Facebook ID 的参数，以便您可以删除包含您所做的喜欢的帖子。

例如，使用 Facepy 库，你可以做一些*肮脏*的事情，比如

```
from facepy import GraphAPI

graph = GraphAPI('YOUR_ACCESS_TOKEN')

pages = graph.get("FRIEND_ID/posts?fields=likes,story", page=True)

for page in pages:
    for post in page["data"]:
        if "likes" in post:
            for person in post["likes"]["data"]:
                if person["id"] == "YOUR_ID":
                    if "story" in post:
                        print post["story"]
                    print post["id"] 
```

[有关使用 Python 进行分页的更多信息，请参见： http: [//philippeharewood.com/facebook/dealing-with-facebook-pagination-the-basic-sauce/](http://philippeharewood.com/facebook/dealing-with-facebook-pagination-the-basic-sauce/)]

# java - 如何从java中的URL计算文件大小

> ID：12800588
> 
> 赞同：24
> 
> 时间：2012-10-09T12:58:59.440
> 
> 标签：java, jakarta-ee

我正在尝试从 Web 服务中获取一堆 pdf 链接，并且我想为用户提供每个链接的文件大小。

有没有办法完成这个任务？

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-09T13:09:46.903

使用 HEAD 请求，您可以执行以下操作：

```
private static int getFileSize(URL url) {
    URLConnection conn = null;
    try {
        conn = url.openConnection();
        if(conn instanceof HttpURLConnection) {
            ((HttpURLConnection)conn).setRequestMethod("HEAD");
        }
        conn.getInputStream();
        return conn.getContentLength();
    } catch (IOException e) {
        throw new RuntimeException(e);
    } finally {
        if(conn instanceof HttpURLConnection) {
            ((HttpURLConnection)conn).disconnect();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-31T13:16:31.780

接受的答案很容易出现`NullPointerException`，不适用于大于 2GiB 的文件，并且包含对`getInputStream()`. 这是固定代码：

```
public long getFileSize(URL url) {
  HttpURLConnection conn = null;
  try {
    conn = (HttpURLConnection) url.openConnection();
    conn.setRequestMethod("HEAD");
    return conn.getContentLengthLong();
  } catch (IOException e) {
    throw new RuntimeException(e);
  } finally {
    if (conn != null) {
      conn.disconnect();
    }
  }
} 
```

**更新：**接受的答案得到修复。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-09T13:02:36.310

尝试使用 HTTP HEAD 方法。它仅返回 HTTP 标头。标题`Content-Length`应包含您需要的信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-09T13:22:37.353

HTTP 响应有一个 Content-Length 标头，因此您可以在 URLConnection 对象中查询该值。

打开 URL 连接后，您可以尝试以下操作：

```
List values = urlConnection.getHeaderFields().get("content-Length")
if (values != null && !values.isEmpty()) {

    // getHeaderFields() returns a Map with key=(String) header 
    // name, value = List of String values for that header field. 
    // just use the first value here.
    String sLength = (String) values.get(0);

    if (sLength != null) {
       //parse the length into an integer...
       ...
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-09T13:05:04.247

您是否已经尝试在 URL 连接上使用[getContentLength ？](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getContentLength%28%29)如果服务器响应一个有效的标题，你应该得到文档的大小。

但请注意，网络服务器也可能以块的形式返回文件。在这种情况下 IIRC 内容长度方法将返回一个块的大小 (<=1.4) 或 -1 (>1.4)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-28T09:11:17.337

如果您使用的是 Android，这里有一个 Java 解决方案：

```
/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/
@WorkerThread
public static long getUrlFileLength(String url) {
    try {
        final HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();
        urlConnection.setRequestMethod("HEAD");
        final String lengthHeaderField = urlConnection.getHeaderField("content-length");
        Long result = lengthHeaderField == null ? null : Long.parseLong(lengthHeaderField);
        return result == null || result < 0L ? -1L : result;
    } catch (Exception ignored) {
    }
    return -1L;
} 
```

在 Kotlin 中：

```
/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/
@WorkerThread
fun getUrlFileLength(url: String): Long {
    return try {
        val urlConnection = URL(url).openConnection() as HttpURLConnection
        urlConnection.requestMethod = "HEAD"
        urlConnection.getHeaderField("content-length")?.toLongOrNull()?.coerceAtLeast(-1L)
                ?: -1L
    } catch (ignored: Exception) {
        -1L
    }
} 
```

如果您的应用来自 Android N，您可以改用它：

```
/**@return the file size of the given file url , or -1L if there was any kind of error while doing so*/
@WorkerThread
fun getUrlFileLength(url: String): Long {
    return try {
        val urlConnection = URL(url).openConnection() as HttpURLConnection
        urlConnection.requestMethod = "HEAD"
        urlConnection.contentLengthLong.coerceAtLeast(-1L)
    } catch (ignored: Exception) {
        -1L
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-03T02:09:17.657

你可以试试这个。。

```
private long getContentLength(HttpURLConnection conn) {
    String transferEncoding = conn.getHeaderField("Transfer-Encoding");
    if (transferEncoding == null || transferEncoding.equalsIgnoreCase("chunked")) {
        return conn.getHeaderFieldInt("Content-Length", -1);
    } else {
        return -1;
    } 
```

# c# - 在代码中创建绑定 (WinRT)

> ID：12800595
> 
> 赞同：4
> 
> 时间：2012-10-09T12:59:25.230
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有以下课程

```
ImageViewModel: INotifyPropertyChanged
{ ...
   String Url;
}

AdViewModel: INotifyPropertyChanged
{ ...
    ImageViewModel Image
} 
```

AdViewModel 会定期更改 Image 属性（动画广告）。

当我有以下 XAML 时：

```
<Grid>
  <Image Source="{Binding Image.Url}"
           Width="{Binding Image.Width}"
           Height="{Binding Image.Height}" /> 
```

并将 Grids DataContext 设置为 AdViewModel 的实例，一切都按预期工作。但我需要在 C# 代码中创建 XAML 才能在其他地方使用它。创建一个 Grid 并附加一个 Image 作为它的孩子很容易，但是如何创建绑定呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:12:24.890

尝试一些类似的东西

```
AdViewModel vm = new AdViewModel;      
Binding binding = new Binding
{
    Path = new PropertyPath("Width"),
    Source = vm.Image
};
nameOfGridInXaml.SetBinding(Image.WidthProperty, binding); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:38:22.663

我找到了一个更简单的方法。我将 XAML 创建为 UserControl，并将其保存在文件 (Templates\SkyScrapper.xaml) 中。然后，无需在 C# 中创建控件，只需加载 XAML 文件

```
 var _Path = @"Templates\SkyScrapper.xaml";
 var _Folder = Windows.ApplicationModel.Package.Current.InstalledLocation;
 var _File = await _Folder.GetFileAsync(_Path);
 var _ReadThis = await Windows.Storage.FileIO.ReadTextAsync(_File);

 DependencyObject rootObject = XamlReader.Load(_ReadThis) as DependencyObject;
 var uc = (UserControl)rootObject; 
```

并设置它的 DataContext

```
uc.DataContext = ad; 
```

现在无需在 C# 中创建绑定，它们是在 XAML 文件中定义的。

# objective-c - 带有进度指示器的文件副本

> ID：12800596
> 
> 赞同：2
> 
> 时间：2012-10-09T12:59:28.273
> 
> 标签：objective-c, cocoa, osx-mountain-lion, nsprogressindicator

> **可能重复：**
> [如何在 10.8 中显示文件复制进度](https://stackoverflow.com/questions/12705491/how-to-display-file-copy-progress-in-10-8)

我找到了“ [COCOA TUTORIAL: FILE COPY WITH PROGRESS INDICATOR](http://www.cimgf.com/2008/05/03/cocoa-tutorial-file-copy-with-progress-indicator/) ”，但在本教程中使用了 OS X 10.8 中已弃用的文件管理器参考功能（FSFileOperationScheduleWithRunLoop ...）。有人知道如何用`NSProgressIdicator`对象复制文件吗？

# jquery - Django静态CSS JS图像文件未加载

> ID：12800597
> 
> 赞同：0
> 
> 时间：2012-10-09T12:59:34.057
> 
> 标签：jquery, django, django-staticfiles

它以前工作正常，我不知道发生了什么变化，但我现在在加载静态文件时遇到错误=（请帮助！

使用 Django 1.4

网址.py

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

设置.py

```
STATIC_ROOT = '/root/abc/abc_app/sitestatic'

# URL prefix for static files.
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    '/root/abc/static/',
    '/Users/blahusername/djangoproj/abc/static/',
) 
```

页眉.html

```
 <script type="text/javascript" src="/static/js/jquery-1.7.1.min.js"></script> 
```

浏览器中的错误：

```
GET file://localhost/static/js/jquery-1.7.1.min.js  
Unsafe JavaScript attempt to access frame with URL file://localhost/Users/blahusername/djangoproj/abc/abc_app/templates/index.html from frame with URL http://www.youtube.com/embed/yyy. Domains, protocols and ports must match. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:53:43.017

根据您显示的浏览器错误，这看起来不像 django-staticfiles 问题，而是浏览器跨域策略/iframe 和主机页面访问的问题。要确认：

*   在具有开发工具的浏览器（例如 Chrome 或 Safari）中，加载导致错误的页面。
*   单击“资源”选项卡，然后在 Frames >（主框架的名称）> Scripts 下查找 jquery 脚本。
*   单击网络选项卡后重新加载页面并检查 jQuery 文件请求的 HTTP 状态。

如果您可以在资源选项卡中看到 jquery-1.7.1.min.js 文件内容，并且加载它的请求在网络选项卡中的状态为 200 或 304，则问题不在于 django 的静态文件服务。

另一个观察：

*   浏览器错误中的 index.html URL 是 file:/// url ( file://localhost/Users/blahuusername/djangoproj/abc/abc_app/templates/index.html )。由于跨域资源共享限制，大多数浏览器通常不允许从一个来源加载的页面访问来自不同来源的资源。每个 file:/// URL 都被视为与其他每个 file:/// 不同，即使两者都引用同一文件系统文件夹中的资源。

# grails - 具有多个模块的 Grails / IntelliJ 设置

> ID：12800600
> 
> 赞同：1
> 
> 时间：2012-10-09T12:59:39.597
> 
> 标签：grails, intellij-idea, soa

我目前正在为我正在处理的项目定义项目结构。该项目是一个简单的 SOA 实现，因此有一个 grails 应用程序和许多不同的服务。

我想将这些服务打包到单独的模块（jar）中，以便它们可以轻松地单独部署，并且不存在成本污染类的风险。

项目结构和依赖关系可以可视化为：

```
Grails App (war)
|__ Service Gateway (jar)
    |__Service A (jar)
    |__Service B (jar) 
```

虽然这些服务最终将单独部署，但为了便于本地开发，我想将它们打包到单个 grails 应用程序中，直到有必要将它们分开。

我的最终目标是能够以与开发简单 grails 应用程序相同的方式开发这些服务，因为我将能够动态更改任何类（在任何模块内）并让它接受。

我正在努力寻找 IntelliJ 中表示这种结构的最佳方式。

我为上述每个模块创建了单独的模块并添加了它们之间的依赖关系，但显然 grails 在运行时不知道这一点。

我已经阅读并找到了以下可能的解决方案，所有这些目前都感觉有点不满意，因为需要构建一个 jar，这意味着无法动态重新加载类。

1.  将模块安装到本地 maven 存储库中，并在 grails 构建依赖项中引用它。
2.  将构建的 jar 放入 lib 目录。
3.  将它们添加为 grails 插件（似乎有点笨拙，因为它们不需要 grails 功能）。
4.  在 grails 类路径中找到包含这些模块的输出目录的其他方法（不确定最干净的方法）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:48:54.200

最后，我使用了多模块 Maven 构建。动态代码部署的关键是使用 JRebel 监视输出目录并在类发生更改时重新加载它们。

# c# - C# Excel 插件 - 从 ThisAddIn.cs 更改自定义任务窗格文本框

> ID：12800605
> 
> 赞同：0
> 
> 时间：2012-10-09T13:00:00.657
> 
> 标签：c#, event-handling, excel-addins

在“ThisAddIn.cs”文件中创建事件处理程序时，是否可以从自定义任务窗格访问控件？

我想允许用户手动输入单元格引用，或者只需单击一个单元格并让该引用值显示在我的用户控件的文本框中。我不确定如何在事件处理程序中实际访问我的控件。

我原以为它会很简单

```
myUserControl.txtMyTextBox.Text = active cell 
```

我一直在谷歌搜索，但觉得我可能没有使用正确的术语。

任何帮助将不胜感激！

编辑：这是一些实际的代码。我的措辞从来都不是最好的。

```
namespace MyExcelAddin
{
    public partial class ThisAddIn
    {
        private userCtrl myUserCtrl = new userCtrl();
        public Microsoft.Office.Tools.CustomTaskPane tskPaneUsers;

        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
               tskPaneUsers = this.CustomTaskPanes.Add(userCtrl, "My Control");
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {

        }

        void ThisAddIn_SheetSelectionChange(object sender, Excel.Range Target)
        {
            //This is where I want to access my textbox inside my usercontrol. 
            // Is it out of scope?  
        }

 private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
            Application.SheetSelectionChange += new Excel.AppEvents_SheetSelectionChangeEventHandler(ThisAddIn_SheetSelectionChange);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:09:27.567

`Excel.Application`您可以通过对象访问当前的 excel 组件。您可以在加载项加载过程中将其初始化为`ThisAddIn.Application`属性。

一旦您有权访问该`Excel.Application`对象，您就可以使用它来引用活动工作表和单元格类似的调用

```
ThisAddIn.Application.ActiveCell.Row
ThisAddIn.Application.ActiveCell.Column 
```

您还可以将`Row`和`Column`属性转换为`String`并将它们组合到您的 TextBox 文本中。

这个有帮助吗？

# c# - 在选择命令中返回行数 - 存储过程

> ID：12800607
> 
> 赞同：0
> 
> 时间：2012-10-09T13:00:06.413
> 
> 标签：c#, sql, sql-server

我正在使用存储过程对象执行一个查询。我想在执行查询后检索 Select 语句中返回的行数。

我在使用之间感到困惑`ExecuteReader() & ExecuteScalar()`

```
public static int getDuplicateEvent(string ATM, string Fault1, string Fault2, ref SqlConnection Connection)
{
    string sQuery = "";
    int result = 0;
    try
    {
        sQuery = /*Query With Format Select Code From A Union Select Code From B */
        using (SqlStoredProcedure sspObj = new SqlStoredProcedure(sQuery, Connection, CommandType.Text))
        {
            result = (int)sspObj.ExecuteScalar();
            sspObj.Dispose();
        }
    }
    catch (Exception xObj)
    {
        result = 0;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:02:13.590

[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx) returns the first column of the first row of the results

`ExecuteReader` returns a datareader that can be iterated through

You could also use `ExecuteNonQuery` or `Fill` into a `DataSet` or `DataTable`

Assuming you want the rows and the count, I would [fill a DataTable](http://imar.spaanjaars.com/406/filling-a-datatable-or-dataset-the-quick-way) and count the rows using `Rows.Count`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:07:15.047

在以下行中创建查询：

`SELECT COUNT(*) FROM dbo.Users`

然后使用`ExecuteScalar`接收行数。

[ExecuteScaler](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)执行查询，并返回查询返回的结果集中第一行的第一列。其他列或行将被忽略。

[ExecuteReader](http://msdn.microsoft.com/en-us/library/y6wy5a0f.aspx)将 CommandText 发送到 Connection 并构建 SqlDataReader。

# vb.net - 选中时的 TreeNode 更改前景色/背景色

> ID：12800608
> 
> 赞同：0
> 
> 时间：2012-10-09T13:00:06.793
> 
> 标签：vb.net, winforms, treeview

本质上，我试图找到一种方法来单击 TreeView 的某个区域并突出显示该区域。他们的问题似乎总是在选择另一个节点后不突出显示该区域。我一遍又一遍地玩弄和搜索.. 好吧.. 最后我问 b/c 我不能让它正常工作。我会展示我的代码，但它不仅仅是一堆令人讨厌的整合代码。有没有人有一个很好的工作例子？

澄清基础知识：

```
Private Sub TreeView1_AfterSelect(ByVal sender As Object, _
                                  ByVal e As TreeViewEventArgs) _
                                  Handles TreeView1.AfterSelect           
  'e.Node.BackColor = Color.Yellow 
End Sub 
```

我尝试使用多种方法通过循环遍历集合来设置和取消选择。它似乎永远不会工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:00:27.820

尝试将 TreeView 控件的 DrawMode 更改为`OwnerDrawText`并使用以下绘图代码：

```
Private Sub TreeView1_DrawNode(ByVal sender As Object, _
                               ByVal e As DrawTreeNodeEventArgs) _
                               Handles TreeView1.DrawNode
  If (e.State And TreeNodeStates.Selected) <> 0 Then
    e.Graphics.FillRectangle(Brushes.Yellow, e.Bounds)
    TextRenderer.DrawText(e.Graphics, e.Node.Text, e.Node.NodeFont, e.Bounds, _
                          Color.Black, Color.Empty, _
                          TextFormatFlags.VerticalCenter)
  Else
    e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds)
    TextRenderer.DrawText(e.Graphics, e.Node.Text, e.Node.NodeFont, e.Bounds, _
                          SystemColors.WindowText, Color.Empty, _
                          TextFormatFlags.VerticalCenter)
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:00:24.047

第一步——在表单中，放置一个文本框、一个标签和三个水平滚动条 第二步——下一步是设置每个控件的属性。

1.  label1-标题-背景
2.  text1-text-（留空）
3.  hscroll1-max-255
4.  hscroll2-max-255
5.  hscroll3-max-255

（上面给出的是控件，属性和设置） step3-这是最后一步。即编写代码。非常简单。

```
Private Sub HScroll1_Change()(note:end of line1)
  Text1.BackColor = RGB(HScroll1.Value, HScroll2.Value, HScroll3.Value)(note:end of line2)
End Sub

Private Sub HScroll2_Change()(note:end of line1)
  Text1.BackColor = RGB(HScroll1.Value, HScroll2.Value, HScroll3.Value)(note:end of line2)
End Sub

Private Sub HScroll3_Change()(note:end of line1)
  Text1.BackColor = RGB(HScroll1.Value, HScroll2.Value, HScroll3.Value)(note:end of line2)
End Sub 
```

# javascript - 从提升片段中获取 d3 中的 json 数据

> ID：12800612
> 
> 赞同：2
> 
> 时间：2012-10-09T13:00:14.060
> 
> 标签：javascript, scala, d3.js, lift, lift-json

我目前正在使用 d3 和数据的 json 对象实现一个图形。可以在此处找到此类图的工作示例：http: [//bl.ocks.org/950642](http://bl.ocks.org/950642)。如果你知道 d3，你当然可以直接跳到*我的问题*部分。

## 代码概览

所以，基本上在我的模板中，我有必要的最少代码：

```
<div id="main" class="lift:surround?with=default;at=content">
  <div class="lift:GraphVisual.showGraph"></div>
</div> 
```

然后在我的片段（`GraphVisual.scala`）中，我有以下内容：

```
def showGraph = {
  <h3>Bachelor 5/6 - Communication Systems</h3> ++
  <div id="graph-container" width="500px" height="100px">
    <script type="text/javascript" src="static/scripts/graph_script.js></script>
  </div> 
```

在定义图（`graph_script`）的javascript文件中，我主要有以下内容

```
var vis = d3.select("#graph-container").append("svg:svg")

d3.json("static/scripts/jsonData.json", function(json) {
  //Do stuff
} 
```

## 我的问题

如果我将我的 json 数据存储在一个文件中，如上所示，一切正常。现在我想用lift生成我的json对象。所以我想有一个函数在 Lift 中返回图形的 json 对象表示并在脚本中使用它（应该是静态的）。

## 我试过的

假设我有以下值定义我的图表：

```
val graph = JObject(JField("nodes", JArray(List(...))), JField("links", JArray(List))) 
```

我试图将此图定义为 d3 脚本上方脚本中的变量：

```
<script>{JsCrVar("myGraph", graph).toJsCmd}</script> 
```

使用这种方法，我有一个`myGraph`定义明确的变量，但我不知道如何访问它`graph_script.js`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:52:51.563

您可以将您的 json 数据检索移动到 REST API。

```
object MyGraphApi extends RestHelper {
   serve {
     case Req("graph" :: Nil, _, GetRequest)  => {
       JsonResponse(myGraphObject)
     }
   }
} 
```

然后，您可以使用 /graph url 将其 ajax 拉入页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:40:50.237

Lukasz 的解决方案，使用 REST API 工作得很好。在研究过程中，我还发现我的问题只是一个 javascript 问题：我不需要使用`d3.json(...)`.

所以我只需要删除该功能`d3.json(...)`并将其内部的所有内容都放在它之外。然后只需调用`mygraph.nodes`例如而不是`json.nodes`.

# java - Java中的内存映射集合

> ID：12800613
> 
> 赞同：1
> 
> 时间：2012-10-09T13:00:16.540
> 
> 标签：java, collections, memory-mapping

我正在填满 JVM 堆空间。

更改参数以向 JVM 提供更多堆空间，或更改代码中算法中的某些内容以不使用太多空间是最推荐的两个选项。

但是，如果这两个已经被尝试和应用过，并且我仍然会出现内存不足的异常，我想看看其他选项是什么。

我发现了这个“[使用内存映射文件来处理巨大的矩阵](http://vanillajava.blogspot.com/2011/12/using-memory-mapped-file-for-huge.html)”的例子和一个名为[HugeCollections](https://code.google.com/p/vanilla-java/wiki/HugeCollections)的库，这是解决我的问题的一种有趣的方法。不幸的是，这个库已经一年多没有更新了，而且它不在任何 Maven 存储库中——所以对我来说它不是一个真正可靠的库。

我的问题是，是否有任何其他库这样做，或者实现它的好方法（具有集合对象（列表和集合）内存映射）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T15:05:10.887

你不说你正在使用什么类型的集合，或者你使用它们的方式，所以很难给出建议。但是，请记住以下几点：

*   将对象保存在 Java 堆上始终是最简单的选择，而且 RAM 相对便宜。
*   盲目地移动到内存映射数据很可能会产生可怕的性能，尤其是当您在文件中移动和/或进行大量更改时。基于散列的集合类型是最差的，因为它们通过分发数据来工作。基于树的集合类型通常是更好的选择，线性集合可以双向使用。
*   一旦移出堆外，您需要一种将对象与 Java 相互转换的方法。对象序列化是最简单的，但会增加很多开销。通过字节缓冲区访问的二进制对象通常是更好的选择，但您需要具有线程意识。
*   您还必须为堆外对象管理自己的垃圾收集。如果您所做的只是创建/更新，这不是问题，但如果您要删除，很快就会变得很痛苦。
*   如果您有大量数据，并且需要以各种方式访问​​这些数据，那么数据库可能是您最好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:55:11.517

`Unluckily, the library hasn't seen an update for over a year, and it's not in any Maven repo - so for me it's not a really reliable one`我同意并写了。;)

我建议你看看[https://github.com/peter-lawrey/Java-Chronicle](https://github.com/peter-lawrey/Java-Chronicle)已经使用了更高的性能。它确实是为 List & Queue 设计的，但您可以将它用于带有其他数据结构的 Map 或 Set。

根据您的要求，您可以编写自己的库。例如，对于时间序列数据，我编写了一个不同的库，不幸的是它不是开源的，但可以非常干净地加载 500+ GB 的表。

> 它不在任何 Maven 存储库中

这也不是，但会很高兴有人添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:24:44.327

听起来您要么遇到内存泄漏问题，要么试图将太大的对象放入内存。

您是否尝试过粗略估计加载数据所需的内存量？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:32:17.550

假设您没有内存泄漏或其他问题，并且*确实*需要大量存储空间而无法将其放入堆中（我认为这不太可能），您基本上只有一个选择：

不要把你的数据放在堆上。就那么简单。现在，您使用哪种方法将数据移出非常取决于您的要求（什么样的数据、更新频率以及实际更新*的数量*？）。

注意：您可以在 64 位 VM 上使用非常大的堆，并在必要时扩大操作系统的交换空间。粗暴地增加最大堆大小（即使这意味着大量交换）可能是最简单的解决方案。在您概述的情况下，我当然会首先尝试。

# c# - 带有时区信息的日期时间转换 C#

> ID：12800617
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:00:29.350
> 
> 标签：c#, datetime

> **可能重复：**
> [使用 PST/CEST/UTC/等形式的时区解析 DateTime](https://stackoverflow.com/questions/241789/parse-datetime-with-timezone-of-form-pst-cest-utc-etc)

我有一个日期时间字符串 =“太平洋标准时间 10/09/2012 下午 5:00”如何使用 DateTime.ParseExact() 将其转换为 DateTime。我正在寻找与 PST 或 EST 匹配的文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:06:20.487

用 UTC 偏移量替换 PST，我认为它应该可以工作：

```
string value = "10/09/2012 5:00 pm PST";
value = value.Replace ("PST", "−8");

DateTime.ParseExact (value, "M/d/yyyy h:mm tt z", Culture....); 
```

# asp.net - 在不同的 URL 之间传递数据

> ID：12800620
> 
> 赞同：1
> 
> 时间：2012-10-09T13:00:36.523
> 
> 标签：asp.net, iis-7

我需要在加载页面之前检查传入请求的来源

前任：

```
for user to view www.mysite/page1.aspx

request should come through www.othersite/page1.aspx 
```

因此，在 mysite 中加载 page1 时，我需要检查请求是否来自 othersite 中的 page1。

我已经尝试过 Page.Request.UrlReferrer，但我看到一些帖子告诉每个浏览器可能不支持 Page.Request.UrlReferrer。

我无法在 URL 上传递可见参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:14:03.900

当您不想允许来自任意站点的请求时，这是一个常见问题。

您可以做的是，在会话中创建一个变量并将此变量放在 Page1.aspx 中。当页面回发时，您应该取回该变量，并且它也应该与会话中存储的变量相匹配。如果没有，您可以确定该请求来自其他服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:17:26.703

您可以`PostBackUrl`在起始页上使用

并`PreviousPage`在到达页面中访问您的参数

```
if (this.PreviousPage != null)
{
    var control = Page.PreviousPage.FindControl("..."); //Adjust your Id and add cast
} 
```

注意：这也是为了提供更大的安全重定向设置而创建的。

# weka - Weka 交叉验证错误结果

> ID：12800622
> 
> 赞同：1
> 
> 时间：2012-10-09T13:00:39.350
> 
> 标签：weka, test-data, cross-validation

我正在使用贝叶斯网络对 4 个类别的 5 分钟 EEG 数据进行分类。

应用交叉验证时，我得到 100% 正确的结果，而当我在单独的文件中使用训练和提供的测试数据（前 3.7 分钟用于训练，1.3 分钟用于测试）时，我得到的结果非常低（30%）。

我是 Weka 的新手，不知道这怎么可能。任何帮助将不胜感激:)

# marklogic - Marklogic：从元素词词典中获取字数

> ID：12800624
> 
> 赞同：0
> 
> 时间：2012-10-09T13:00:49.007
> 
> 标签：marklogic

我有两个示例 XML 文件，如下所示：

**abc.xml**

```
<data>
<text>i am a test user and doing testing here more and more. What are you doing?</text>
<data> 
```

**定义.xml**

```
<data>
<text>We are a doing nothing here you can say it time pass. what are you doing?</text>
<data> 
```

现在我已经为元素创建了元素词词典`<text>`。我对以下感兴趣：

1.  获取整个数据库中的所有唯一单词及其计数（仅具有以上两个文件）。
2.  获取给定文件的所有唯一词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:52:01.353

1）对于所有唯一词和匹配片段的数量：

```
for $w in cts:element-words(xs:QName('text'))
return 
element word {
    attribute count { 
      xdmp:estimate(cts:search(doc(), cts:word-query($w))
    },
    $w } 
```

这应该很快，但是要获得实际的字数而不仅仅是片段数，我认为您可能必须检查每个片段，这可能会变得非常慢：

```
sum(
  cts:search(doc(), cts:word-query($w))/cts:highlight(.,
    cts:word-query($w),<match/>)/count(//match)
  ) 
```

2）对于每个文件的所有唯一单词：

```
for $d in doc()
return element file {
    for $w in cts:element-words(xs:QName('text'), (), (),
        cts:document-query(xdmp:node-uri($d))
    return element word { $w }
} 
```

如果您启用了 URI 词典，那么您可以通过迭代`cts:uris()`而不是`doc()`将该值作为第四个参数传递给`cts:element-values()`，而不是调用`xdmp:node-uri`doc 来进一步优化 2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:48:45.820

请参阅[http://docs.marklogic.com/guide/search-dev/lexicon#chapter](http://docs.marklogic.com/guide/search-dev/lexicon#chapter)

# sorting - 在 Lua 中连接各种表

> ID：12800629
> 
> 赞同：0
> 
> 时间：2012-10-09T13:01:12.843
> 
> 标签：sorting, loops, lua

几天来我一直在寻找这个问题的答案我设法以某种方式使用一个技巧来省略这个 Concatenation 部分并使用几个单独的循环将不同的值重新插入同一个表中......但是我的问题是

> 默认情况下，table.sort 使用 < 来比较数组元素，因此它只能对数字数组或字符串数​​组进行排序。编写一个比较函数，允许 table.sort 对混合类型的数组进行排序。在排序后的数组中，给定类型的所有值都应该组合在一起。在每个这样的组中，数字和字符串应该像往常一样排序，而其他类型应该以某种任意但一致的方式排序。

```
A = { {} , {} , {} , "" , "a", "b" , "c" , 1 , 2 , 3 , -100 , 1.1 , function() end , function() end , false , false , true } 
```

正如我所说，我使用不同的 for 循环解决了这个问题，但是有没有办法只分析表的每个元素，然后将其分配给不同的表？？？比如：“Tables,Funcs,Nums,Strings,...”然后在分析完成后将它们连接在一起以在排序版本中拥有相同的表。

我对此的低效回答是：

```
function Sep(val)
local NewA = {}

   for i in pairs(val) do
      if type(val[i]) == "string" then
     table.insert(NewA,val[i])
      end
   end
for i in pairs(val) do
      if type(val[i]) == "number" then
     table.insert(NewA,val[i])
      end
   end

for i in pairs(val) do
      if type(val[i]) == "function" then
     table.insert(NewA,tostring(val[i]))
      end
   end

for i in pairs(val) do
      if type(val[i]) == "table" then
     table.insert(NewA,tostring(val[i]))
      end
   end

for i in pairs(val) do
      if type(val[i]) == "boolean" then
     table.insert(NewA,tostring(val[i]))
      end
   end

for i in pairs(NewA) do
   print(NewA[i])
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:55:43.210

据我了解，您希望先按类型然后按值对它们进行排序：您可以编写自己的自定义谓词并将其传递给排序

```
-- there would be need of custom < function since tables cannot be compared
-- you can overload operator < as well I suppose.
 function my_less (lhs, rhs)
    if (type (lhs) ~= "number" or type (lhs) ~= "string") then
        return tostring (lhs) < tostring (rhs) 
    else
        return lhs < rhs;
    end;
 end;

 -- the custom predicate I mentioned
 function sort_predicate (a,b)
    -- if the same type - compare variable, else compare types
    return (type (a) == type (b) and my_less (a, b)) or type (a) < type (b);
 end

 table.sort (A, sort_predicate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:14:32.400

```
A = { {}, {}, {}, "", "a", "b", "c", "2", "12", 1, 2, 3, -100, 1.1, 12, 11,
  function() end, function() end, false, false, true }

table.sort(A, function(a,b)
  if type(a) == type(b) and type(a) == 'number' then return a < b end
  return type(a)..tostring(a) < type(b)..tostring(b) end) 
```

会给你这个：

```
{false, false, true, function() end, function() end,
 -100, 1, 1.1, 2, 3, 11, 12, "", "12", "2", "a", "b", "c", {}, {}, {}} 
```

[根据@tozka 的评论更新]

# selenium - 如何识别 HTML 表格中的单元格（Selenium）

> ID：12800632
> 
> 赞同：0
> 
> 时间：2012-10-09T13:01:20.100
> 
> 标签：selenium

我的任务是右键单击并从 HTML 表格的下拉菜单中选择一个选项。

为此，我需要两件事的帮助：

1.  如何使用 selenium 识别表格内的唯一单元格？

2.  如何右键单击已识别的单元格？

此应用程序仅针对 IE 开发，表格示例代码如下：

```
table id="ctl00_ContentPlaceHolder1_dgvPatientList" class="grid" cellspacing="0" cellpadding="2" border="1" style="width:96%;border-collapse:collapse;" rules="all"> 
```

![这是 HTML 表格的代码][1] 感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:35:30.603

考虑到您的第一个问题，这里讨论了它（[使用 selenium 对表格单元进行操作](https://stackoverflow.com/questions/6198947/how-to-get-text-from-each-cell-of-an-html-table)）提供的代码（在代码示例中，我们从表格的每个单元格中获取文本）：

```
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.ie.InternetExplorerDriver;

public class WebTableExample 
{

    public static void main(String[] args) 
    {
        WebDriver driver = new InternetExplorerDriver();
        driver.get("http://localhost/test/test.html");

        WebElement table_element = driver.findElement(By.id("testTable"));
        List<WebElement> tr_collection=table_element.findElements(By.xpath("id('testTable')/tbody/tr"));

        System.out.println("NUMBER OF ROWS IN THIS TABLE = "+tr_collection.size());
        int row_num,col_num;
        row_num=1;
        for(WebElement trElement : tr_collection)
        {
            List<WebElement> td_collection=trElement.findElements(By.xpath("td"));
            System.out.println("NUMBER OF COLUMNS="+td_collection.size());
            col_num=1;
            for(WebElement tdElement : td_collection)
            {
                System.out.println("row # "+row_num+", col # "+col_num+ "text="+tdElement.getText());
                col_num++;
            }
            row_num++;
        }    
    }       
} 
```

考虑到你的第二个问题。调查了一个 lil bit 解决方法。一种可能性：

```
selenium.mouseDownRight(locator);
  selenium.mouseUpRight(locator); 
```

其他方式：

```
WebElement elem = driver.findElement(By.xpath(".blablabla..")); //the element we want to //right click on
new Actions(driver).contextClick(elem).perform(); 
```

另一种方法是使用javascript。

因此，您将表格单元格作为 webElement。然后你用鼠标右键点击它。希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-25T20:36:34.057

原始问题未指定语言，因此这可能适用也可能不适用，但如果您使用 C# 使用 .NET 版本的 WebDriver 编写测试，则可以使用 TableDriver 扩展（[https://github.com/ jkindwall/TableDriver.NET](https://github.com/jkindwall/TableDriver.NET)）用于定位表格中的特定单元格。

我不知道原始问题中表格的内容是什么样的，但举一个通用的例子，您想从“产品 ID”列中的值为“”的行中找到“价格”列中的单元格ABC123”，你可以使用这样的东西：

```
Table table = Table.Create(driver.FindElement(By.Id("ctl00_ContentPlaceHolder1_dgvPatientList")));
TableCell cell = table.FindCell("Product Id=ABC123", "Price"); 
```

**更新**

TableDriver.Java 现在可用。详情在这里：[https ://github.com/jkindwall/TableDriver.Java](https://github.com/jkindwall/TableDriver.Java)

# java - POI 在从 excel 读取数字数据时附加 .0

> ID：12800635
> 
> 赞同：6
> 
> 时间：2012-10-09T13:01:28.753
> 
> 标签：java, oracle, junit, apache-poi, dbunit

我正在使用 POI HSSF 来读取 excel 数据，并且正在使用 JUnit 来对照数据库 proc RefCursor 检查数据。

Junit 测试失败，因为来自 Refcursor 的数字数据（例如 100）与 Excel 表 100 中的数据进行比较，但它失败，因为 POI 将其读取为 100.0。

```
 InputStream fileInputStream = Testdb.class.getClassLoader().getResourceAsStream(fileName);
        //retrieve number of columns and rows
        int numRows=0, numCols=0, i, j, minColIndex=0, maxColIndex=0;
        POIFSFileSystem fsFileSystem = new POIFSFileSystem(fileInputStream);
        HSSFWorkbook workBook = new HSSFWorkbook(fsFileSystem);
        HSSFSheet hssfSheet = workBook.getSheetAt(0);
        Iterator rowIterator = hssfSheet.rowIterator();
        while (rowIterator.hasNext())
        {
            numRows++;
            HSSFRow hssfRow = (HSSFRow) rowIterator.next();
            Iterator iterator = hssfRow.cellIterator();
            List cellTempList = new ArrayList();
            if (numRows == 1)
            {
                minColIndex = hssfRow.getFirstCellNum();
                maxColIndex = hssfRow.getLastCellNum();
                numCols = maxColIndex;
            }
            for(int colIndex = minColIndex; colIndex < maxColIndex; colIndex++)
            {
                HSSFCell hssfCell = hssfRow.getCell(colIndex);
                cellTempList.add(hssfCell);

            }
            cellDataList.add(cellTempList);
        }

        String expected[][] = new String[numRows][numCols];
        String[] tableColumns = new String[numCols];
        System.out.println("Rows : " + numRows + "Columns : " + numCols);
        System.out.println("Min Col Index : " +minColIndex + "Max Col Index : " + maxColIndex);
        for (i=0; i<numRows; i++)
        {
            List cellTempList = (List) cellDataList.get(i);
            for (j=0; j < numCols; j++)
            {
                HSSFCell hssfCell = (HSSFCell) cellTempList.get(j);
                if (i == 0)
                {
                    tableColumns[j] = hssfCell.toString();
                    System.out.print(tableColumns[j] + "\t");
                }
                else
                {
                    if(hssfCell != null)
                    {
                        expected[i-1][j] = hssfCell.toString();
                    }
                    else
                    {
                        expected[i-1][j] = null;
                    }
                    System.out.print(expected[i-1][j] + "\t");
                }
            }
            System.out.println();
        } 
```

这是我正在构建的通用框架程序，因此该框架应该足够智能以忽略“.0”。关于如何解决这个问题的任何意见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:17:53.850

这实际上与这里的许多其他问题相同，例如[返回十进制而不是字符串（POI jar）](https://stackoverflow.com/questions/12526310/returning-decimal-instead-of-string-poi-jar)

[答案与我在这里给出](https://stackoverflow.com/questions/12526310/returning-decimal-instead-of-string-poi-jar/12527519#12527519)的答案相同：

POI 为您提供 Excel 存储在文件中的确切值。通常，如果您在 Excel 单元格中写入数字，Excel 会将其存储为带格式的数字。如果您需要，POI 支持为您进行格式化（大多数人不这样做 - 他们希望将数字作为数字，以便他们可以使用它们）

您正在寻找的课程是[DataFormatter](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)。您的代码将类似于

```
 DataFormatter fmt = new DataFormatter();
 for (Row r : sheet) {
    for (Cell c : r) {
       CellReference cr = new CellRefence(c);
       System.out.println("Cell " + cr.formatAsString() + " is " + 
                          fmt.formatCellValue(c) );
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T05:46:38.093

嗨，我的解决方案只是放置符号：

```
' 
```

在每个数字前面。然后将数字作为文本处理。

完成此操作后，您会看到小绿色三角形和警告： [![在此处输入图像描述](../Images/6af502d983eb839035323dbf10efb62a.png)](https://i.stack.imgur.com/jXn3g.png)

对我来说这不是问题，因为它有效。

# javascript - 检测固定位置 JavaScript 在 IE 中不起作用

> ID：12800636
> 
> 赞同：2
> 
> 时间：2012-10-09T13:01:32.863
> 
> 标签：javascript, html, css, internet-explorer

我将 YS 用于固定位置菜单，在 Firefox 中运行良好，但在 IE 中无法运行。

```
$(function(){                     // this is the shorthand for document.ready
  $(document).scroll(function(){    // this is the scroll event for the document

      scrolltop = $(document).scrollTop();  // by this we get the value of the scrolltop ie how much scroll has been don by user
      if(parseInt(scrolltop) >= 80)         // check if the scroll value is equal to the top of navigation
      { 
          $("#navbar").css({"position":"fixed","top":"0"});       // is yes then make the position fixed to top 0
      }
      else
      {
          $("#navbar").css({"position":"absolute","top":"80px"}); // if no then make the position to absolute and set it to 80
      }
  }
} 
```

有什么解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:14:37.537

您在[工作 jsfiddle](http://jsfiddle.net/yCrtG/2/)的代码中缺少 ')' （在 IE7 和 IE9 中测试）

```
$(function(){                     // this is the shorthand for document.ready
  $(window).scroll(function(){    // this is the scroll event for the document

      scrolltop = $(window).scrollTop();  // by this we get the value of the scrolltop ie how much scroll has been don by user
      if(parseInt(scrolltop) >= 80)         // check if the scroll value is equal to the top of navigation
      { 
          $("#navbar").css({"position":"fixed","top":"0"});       // is yes then make the position fixed to top 0
      }
      else
      {
          $("#navbar").css({"position":"absolute","top":"80px"}); // if no then make the position to absolute and set it to 80
      }
  }); //here
});//here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:40:34.573

对我来说，问题似乎是 IE 没有触发`.scroll`事件。至少，不在 jsfiddle 中。如果您明确触发该事件，那似乎确实可以解决问题。[这个小提琴在 IE8 中进行了测试，](http://jsfiddle.net/yCrtG/3/)并且可以正常工作。编码：

```
$(function()
{
    $(document).scroll(function()
    {//add var here, avoid evil globals:
        var scrolltop = $(document).scrollTop();  
        if(parseInt(scrolltop) >= 80)         
        { 
            $("#navbar").css({"position":"fixed","top":"0"});       
        }
        else
        {
            $("#navbar").css({"position":"absolute","top":"80px"});
        }
    });//close properly
    $(document).scroll();//explicit call
});//close this, too 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:08:00.593

对于位置修复，您的父元素必须具有此样式

```
position:relative; 
```

最好的祝福

# c# - 数据未加载到网格中（此错误发生不一致）

> ID：12800638
> 
> 赞同：1
> 
> 时间：2012-10-09T13:01:35.667
> 
> 标签：c#, javascript, asp.net, sql-server-2008, iis-7

在生产服务器的网格中加载数据时，我发现页面左下角出现以下脚本错误*（此错误仅在生产服务器上发生，在本地服务器中工作正常）* **此错误发生不一致**

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；BTRS123646；嵌入式 Web 浏览器来自：[http](http://bsalsa.com/) ://bsalsa.com/ ；.NET CLR 1.1.4322；.NET CLR 2.0.50727； .NET CLR 3.0.04506.648；.NET CLR 3.5.21022；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；.NET4.0C；.NET4.0E) 时间戳：2012 年 10 月 9 日星期二 12:11:23世界标准时间

消息：未终止的**字符串常量** 行：**111115201** 字符：187 代码：0

URI：XYXZ/MYApp/MyPage.aspx

以下是网格中绑定数据的代码

```
 try
            {
                conGetPost.ConnectionString = ConfigurationManager.ConnectionStrings["ConnStr"].ConnectionString;
                conGetPost.Open();
                SqlCommand cmdGetPost = new SqlCommand();
                cmdGetPost.CommandTimeout = 999999999;
                cmdGetPost.Connection = conGetPost;
                cmdGetPost.CommandType = CommandType.StoredProcedure;
                cmdGetPost.CommandText = "MySP";
                if (wdpfrom.Value.ToString() == "1/1/0001 12:00:00 AM" || wdpTo.Value.ToString() == "1/1/0001 12:00:00 AM")
                {
                    ShowMessage("Please select proper Date range");
                    wdgPost.DataSource = "";
                    wdgPost.DataBind();
                    return;
                }
                else
                {
                    cmdGetPost.Parameters.AddWithValue("@dateFrom", wdpfrom.Value);
                    cmdGetPost.Parameters.AddWithValue("@dateTo", Convert.ToDateTime(wdpTo.Value.ToString()).Add(new TimeSpan(23, 59, 59)));
                }
                cmdGetPost.Parameters.AddWithValue("@ID", ID);
                SqlDataAdapter daGetPost = new SqlDataAdapter();
                daGetPost.SelectCommand = cmdGetPost;
                daGetPost.Fill(dsGetPost);
                if (dsGetPost.Tables.Count > 0)
                {
                    if (dsGetPost.Tables[0].Rows.Count > 750)
                    {
                        ShowMessage("Maximum record found please reduce date range");
                        wdgPost.DataSource = "";
                        wdgPost.DataBind();
                        return;
                    }
                }
                wdgPost.ClearDataSource();
                wdgPost.DataSource = dsGetPost;
                wdgPost.DataBind();
                if (dsGetPost.Tables[0].Rows.Count == 0)
                {
                    ShowMessage("No records found");
                }
                Session["dsGetPost"] = dsGetPost;
            }
catch( Exception ex)
            {

                return;
            }
finally
            {
                if (conGetPost != null)
                {
                    conGetPost.Close();
                    conGetPost = null;
                }
            } 
```

如何知道我的 C# 代码中的行号？如何解决？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:04:47.333

尝试在两者之间添加一个 BindingSource，如下所示： Control.DataSource = new BindingSource(source, "");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:26:49.973

嗨，我终于解决了。

我是怎么追踪的？
启用脚本调试并使用 fiddler 2 工具，发现出了什么问题。我发现在日期解析时抛出了一些错误。

我做了什么来解决？我写了一个日期时间转换的方法

```
public static bool ValidateDate(string txtDate, string sDateFormat, ref string sErrMsg, ref DateTime dtDate)
        {
            if (txtDate == "")
            {
                sErrMsg = "Please Enter Date";
                return false;
            }
            else
            {
                System.Globalization.DateTimeFormatInfo dateInfo = new System.Globalization.DateTimeFormatInfo();
                dateInfo.ShortDatePattern = sDateFormat;

                try
                {
                    dtDate = Convert.ToDateTime(txtDate, dateInfo);
                    return true;
                }
                catch
                {
                    sErrMsg = "Please Enter Date In Correct Format";
                    return false;
                }
            }
        } 
```

然后我用作

```
string errMsg = string.Empty;
                Boolean IsFromDateValid = false;
                DateTime fromDate = new DateTime();
                IsFromDateValid = ValidateDate(wdpfrom.Text.Trim(), "dd/MM/yyyy", ref errMsg, ref fromDate);
                if (IsFromDateValid == false)
                {
                    ShowMessage(errMsg);
                    return;
                }
                Boolean IsToDateValid = false;
                DateTime toDate = new DateTime();
                IsToDateValid = ValidateDate(wdpTo.Text.Trim(), "dd/MM/yyyy", ref errMsg, ref toDate);
                if (IsToDateValid == false)
                {
                    ShowMessage(errMsg);
                    return;
                }
                else
                {
                    TimeSpan ts = new TimeSpan(23, 59, 59);
                    toDate = toDate.Add(ts);
                } 
```

最后将参数传递给SP

```
 cmdGetPost.Parameters.AddWithValue("@dateFrom", fromDate);
 cmdGetPost.Parameters.AddWithValue("@dateTo", toDate); 
```

# sql - 从存储过程调用 xp_cmdshell

> ID：12800639
> 
> 赞同：1
> 
> 时间：2012-10-09T13:01:37.507
> 
> 标签：sql, sql-server, sql-server-2000, xp-cmdshell

作为概念证明，我们尝试将`xp_cmdshell`命令插入现有解决方案。目前，一个应用程序在我们的数据库服务器上调用一个存储过程，在分析时看起来像：

```
 declare @P1 int
   set @P1=1
   exec Name_Of_The_SP @param1 = 3, @param2 = 'blah', @parametc = 'blahetc', @ID = P1 output
   select @P1 
```

SP 本质上是打开一个事务，插入一行，然后提交。在这里面我们添加了：

```
exec master..xp_cmdshell 'dir > c:\test.txt' 
```

然后，当我们在 SSMS 查询窗口中运行第一个代码块时，文件会按预期在服务器上生成。但是当我们使用应用程序调用它时，行会正常插入，但文件没有生成？

SQL Server 和 SQLAgent 用户是本地管理员和系统管理员，因此在那里看不到任何问题。尝试使应用程序用户也成为本地管理员，但无济于事，它已经是系统管理员。

这是 SQL Server 2000

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T14:03:14.043

我们设法弄清楚了这一点——我们（我）在分析器中忽略了执行官正在以不同的登录名进入。授予 master.dbo.xp_cmdshell 执行权限专门让它工作。向为此花费任何时间/精力的任何人道歉！

# php - 在 ajax 调用期间创建会话 (php-xajax)

> ID：12800653
> 
> 赞同：2
> 
> 时间：2012-10-09T13:02:15.310
> 
> 标签：php, session, xajax

除非完全有必要，否则我需要避免在应用程序中创建会话。

我注意到，如果会话未启动，xajax 调用将无法正常工作:(。我的第一种方法是在 xajax 函数开始时创建会话（如果它不存在），但是，它不起作用用户第一次调用调用（它在会话创建后第二次起作用）。

有什么方法可以处理/解决这种情况？

编辑：示例代码：

```
function example ($parameters) {
    if (!isset($_COOKIE["PHPSESSID"])) {
        session_start(); // we create the session if it didn't exist previously 
    }
    $response = new XajaxResponse();
    .....
    return $response;
} 
```

我的想法是在用户进行 ajax 调用时创建会话。在这种情况下，我第一次调用“示例”函数时它不起作用。第二个没问题，我认为是因为会话已创建。

编辑：您好，我注意到 chrome 和 explorer 下的一个问题 :(。第一个 ajax 调用没有收到（我没有接听）。这意味着用户需要单击两次才能收到正确的答案（弹出一个例子）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:24:21.717

问题似乎是您*没有*调用`session_start()`if`$_COOKIE['PHPSESSID']` *设置*，因此会话没有为当前的 ajax 请求初始化。您*必须*调用`session_start()`每个使用会话的脚本——它不仅仅是用于会话初始化。

```
function example ($parameters) {
    // If this function uses the session, you MUST call session_start()
    // Don't do it conditionally.
    session_start(); 

    $response = new XajaxResponse();
    .....
    return $response;
} 
```

如果您的所有 ajax 处理程序函数都使用会话，那么您不妨`session_start()`在包含它们的文件顶部调用。如果您不希望在 ajax 调用之前加载会话，则将它们隔离到它们自己的 PHP 脚本中，而不要调用`session_start()`它们最初加载的主脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:36:48.720

对于会话，您必须重新加载页面而不重新加载页面会话无法创建.....而 Ajax 对于不重新加载整个页面很有用。

# jquery - 将悬停添加到可选择的 JQuery UI

> ID：12800657
> 
> 赞同：0
> 
> 时间：2012-10-09T13:02:40.127
> 
> 标签：jquery, css, jquery-ui, jquery-ui-selectable

我正在使用[http://jqueryui.com/selectable/#default](http://jqueryui.com/selectable/#default)示例

一旦我悬停一个可选项目，是否可以添加悬停事件？

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />

    <style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
    </style>
    <script>
    $(function() {
        $( "#selectable" ).selectable();
    });
    </script>
</head>
<body>

<ol id="selectable">
    <li class="ui-widget-content">Item 1</li>
    <li class="ui-widget-content">Item 2</li>
    <li class="ui-widget-content">Item 3</li>
    <li class="ui-widget-content">Item 4</li>
    <li class="ui-widget-content">Item 5</li>
    <li class="ui-widget-content">Item 6</li>
    <li class="ui-widget-content">Item 7</li>
</ol>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:09:57.007

由于所有可选项目都有一个 class `.ui-widget-content`，因此可以使用`:hover`伪选择器轻松实现：

```
.ui-widget-content:hover {
    background-color: orange;
} 
```

如果您想在 JavaScript 中处理悬停事件，请使用以下内容：

```
$(".ui-widget-content").hover(function() {
    //what to do on hover
}, function() {
    //what to do when hover ends
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T08:56:10.960

Selectable 插件会自动将“ui-selectee”类添加到所有 Selectable 对象中，这就是您可以使用的原因：

```
.ui-selectee:hover {
    background-color: orange;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:07:01.840

```
$('#selectable li').hover(function(){
//CODE HERE
}); 
```

selectable 中的所有 li 都具有悬停功能。

# ios - iOS Tabbar - 更改为第一个选项卡和第一个 ViewController

> ID：12800658
> 
> 赞同：3
> 
> 时间：2012-10-09T13:02:42.343
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我需要一些关于我的 Tabbar 应用程序的帮助。

目前我的标签栏如下所示：

*   标签栏控制器
    *   选项卡1
        *   导航控制器
            *   视图控制器1
            *   视图控制器2
    *   选项卡2
        *   视图控制器3

假设 ViewController2 是当前显示的 ViewController。现在我切换到 ViewController3 并希望以编程方式切换到 ViewController1。

问题是，因为 Tab1 中的活动 ViewController 是 ViewController2

```
[self.tabBarController setSelectedIndex:0]; 
```

将始终切换到 ViewController2。但是在那种情况下我怎么能切换到 ViewController1 呢？

这对我也不起作用：

```
self.tabBarController.selectedViewController
= [self.tabBarController.viewControllers objectAtIndex:0]; 
```

会很高兴得到一些提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:07:21.460

您必须从导航控制器中弹出 viewController2。做就是了

```
[self.tabBarController setSelectedIndex:0];
[(UINavigationController*)[self.tabBarController.viewControllers objectAtIndex:0] popViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:07:39.657

设置好`selectedIndex`in 代码后，就可以弹回导航栈的根视图控制器：

```
self.tabBarController.selectedIndex = 0;
UINavigationController *navController = self.tabBarController.selectedViewController;
[navController popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T13:07:47.770

使用类似的东西

```
UINavigationController *navController=(UINavigationController*)[self.tabBarController.viewControllers objectAtIndex:0];
[navController popToRootViewControllerAnimated:YES]; 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T11:33:24.590

斯威夫特 3 版本

```
 self.tabBarController?.selectedIndex = 0
 let navController = self.tabBarController?.selectedViewController as! UINavigationController
 navController.popToRootViewController(animated: true) 
```

# css - css中的字体系列不起作用

> ID：12800660
> 
> 赞同：0
> 
> 时间：2012-10-09T13:02:47.993
> 
> 标签：css, fonts, font-face, webfonts

我`YanoneKaffeesatz`在我的 wordpress 网站中使用字体。因此，为了首先使用这种字体，我从[FontSquirrel](http://www.fontsquirrel.com/fontface/generator)生成了代码。然后我得到了这段代码

```
@font-face {
font-family: 'yanone_kaffeesatz_lightRg';
src: url('yanonekaffeesatz-light-webfont.eot');
src: url('yanonekaffeesatz-light-webfont.eot?#iefix') format('embedded-opentype'),
     url('yanonekaffeesatz-light-webfont.woff') format('woff'),
     url('yanonekaffeesatz-light-webfont.ttf') format('truetype'),
     url('yanonekaffeesatz-light-webfont.svg#yanone_kaffeesatz_lightRg') format('svg');
font-weight: normal;
font-style: normal;
} 
```

然后我将代码粘贴到我的 css 文件中，并将所有转换后的字体（.otf、.svg、.ttf）粘贴到我的网站文件夹中，但我的字体仍然没有更改。那么有人可以告诉我为什么会这样吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:04:43.913

字体文件是否与样式表位于同一目录中？您当前指向该目录。CSS 中的路径是相对于样式表的，而不是根。

```
root 
  -css/styles.css
  -images/
  -fonts/
  index.html 
```

使用上述结构，您将使用它作为您的 URL。

```
url('../fonts/your_font.font;); 
```

# https - 让 TortoiseSVN 请求证书

> ID：12800662
> 
> 赞同：0
> 
> 时间：2012-10-09T13:02:51.950
> 
> 标签：https, tortoisesvn

到目前为止，我一直在使用 SmartSVN 顺利访问我们受 https 保护的存储库。SmartSVN 只是要求我提供证书和密码并且很高兴。

现在我想要自动更新和提交，因此尝试使用 TortoiseSVN 衍生的**EasySVN 。**不幸的是，它没有要求我提供我的凭据，只是失败并显示“没有可用的证书”。

当我尝试在命令行 SVN 上执行更新时，它要求我提供证书和密码（为什么 TortoiseSVN 不能这样做？），但失败了：

```
E:\test>svn update
Updating '.':
Authentication realm: https://ourserver:8888
Client certificate filename: e:\path\to\my\certificate.p12
svn: E175002: Unable to connect to a repository at URL 'https://ourserver:8888/svn/my/checked/out/path'
svn: E175002: OPTIONS of 'https://ourserver:8888/svn/my/checked/out/path': SSL handshake failed: Secure connection truncated (https://ourserver:8888) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:30:06.497

这个[页面](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug.html#tsvn-dug-general-auth)告诉你在哪里存储 TortoiseSVN 的证书，但在 EasySVN 中似乎有一个问题，这里有一张票[（](https://public.assembla.com/spaces/easysvn-tortoise/tickets/105?comment=71423613)虽然有一段时间没有更新）

# extjs - Sencha Touch - 重定向到另一个视图

> ID：12800671
> 
> 赞同：1
> 
> 时间：2012-10-09T13:03:09.067
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在构建一个 Sencha Touch 应用程序，并在登录后努力重定向或更改另一个视图。登录后我需要把它带到主页。但是我***在登录控制器的 authenticateUser() 中的以下代码不起作用***。

也尝试过 Ext.Viewport.push(homePanel) ， Ext.Viewport.setActiveItem(homePanel) 。但没有任何效果。

**登录视图**

```
Ext.define("Mobile.view.LoginView", {
extend: "Ext.form.FormPanel",
alias: "widget.mylogin",
id: 'loginFormPanel',

config: {

    name: 'loginform',
    frame: true,
    url: 'login/Authenticate',
    title: 'Login',
    items: [

      {
          xtype: 'fieldset',
          itemId: 'LoginFieldset',
          margin: '10 auto 0 auto ',
          title: '',
          items: [

                {
                    //User Name field def
                },

                {
                    //Pwd Field Def
                }
            ]
      },
        {
            xtype: 'button',
            id: 'loginButton',           
            text: 'Login',
            action: 'login'
        }

    ]
}

}); 
```

**登录控制器**

```
Ext.define("Mobile.controller.LoginController", {
extend: "Ext.app.Controller",
views: ['LoginView', 'HomeView'],
models: ['UserModel'],
config: {
    refs: {
        loginForm: "#loginFormPanel"
    },
    control: {
        'button[action=login]': {
            tap: "authenticateUser"
        }
    }
},

authenticateUser: function (button) {
            loginForm.submit({
            method: 'POST',
            success: function (form, result) {
            //THIS IS NOT WORKING
                Ext.Viewport.add(Ext.create('Mobile.view.HomeView'));

            },
            failure: function (form, result) {                   
                console.log('Error');
                Ext.Msg.alert('Check the logic for login and redirect');
            }
        });
       }           
}); 
```

**主页视图**

```
Ext.define('Mobile.view.HomeView', {
extend: 'Ext.Container',
id: 'homescreen',
alias: "widget.homepanel",
 config: {
    layout: {
        type: 'card',
        animation: {
            type: 'flip'
        }
    },
    items: [
        {
            xtype: 'toolbar',
            docked: 'bottom',
            id: 'Toolbar',
            title: 'My App',
            items: [
                {
                    id: 'settingsBtn',
                    xtype: 'button',
                    iconCls: 'settings',
                    ui: 'plain',
                    iconMask: true
                }
            ]
        },
        {
            xclass: 'Mobile.view.ActionListView'
        }
    ]
},
}); 
```

**应用程序.JS**

```
Ext.application({
name: "Mobile",
controllers: ["LoginController", "HomeController"],
views: ['LoginView', 'HomeView', 'ActionListView'],
models: ['UserModel', 'OrganizationModel', 'ActionModel'],
stores: ['OrganizationStore', 'ActionStore'],
launch: function () {

    var loginPanel = Ext.create('Ext.Panel', {
        layout: 'fit',
        items: [
            {
                xtype: 'mylogin'
            }
        ]
    });
    Ext.Viewport.add(loginPanel);
}

}); 
```

有人知道吗？已经提到[使用 sencha touch 2.0 登录后加载另一个视图](https://stackoverflow.com/questions/10944351/load-another-view-after-login-with-sencha-touch-2-0)。但是没有答案。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T23:18:58.490

您需要为 HomeView 创建一个 ref：

```
 refs: {
        HomeView: {
            autoCreate: true,
            selector: 'HomeView',
            xtype: 'HomeView'
        },
    } 
```

并将此视图设置为活动状态：

```
 Ext.Viewport.setActiveItem(this.getHomeView()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:49:37.960

如果你使用 Sencha Touch 2，你应该使用 Route 重定向到另一个页面。所以，它会是这样的：

```
this.redirectTo('home'); 
```

然后创建一个具有路由“home”的控制器

有关路线的更多信息。[http://docs.sencha.com/touch/2-0/#!/guide/controllers-section-4](http://docs.sencha.com/touch/2-0/#!/guide/controllers-section-4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:41:46.130

试试这个。可能是这个作品。

```
authenticateUser: function (button) {
        loginForm.submit({
        method: 'POST',
        success: function (form, result) {

         var home= Ext.create('Mobile.view.HomeView');
         Ext.getCmp('loginFormPanel').destroy();
         Ext.Viewport.add(paneltab);

        } 
```

# android - Android 后台数据传输速率

> ID：12800674
> 
> 赞同：0
> 
> 时间：2012-10-09T13:03:10.733
> 
> 标签：android

有谁知道为什么我看到在 Android 4.1 设备上在后台运行的同一应用程序的数据传输速率比在 Android 4.03 设备上慢？

应用程序在前台时的数据传输率不受影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:58:11.203

我从来没有找到任何关于这方面的确切信息。我的假设是在后台可能会有一些处理器节流以保持电池寿命

# android - 应用程序图标从操作栏中消失

> ID：12800676
> 
> 赞同：3
> 
> 时间：2012-10-09T13:03:13.857
> 
> 标签：android

我正在为两种语言（英语和阿拉伯语）开发应用程序，我注意到将语言更改为阿拉伯语时，应用程序图标从操作栏中消失。

我通过反复试验找到了解决方案，这是由于两个文件夹**values/styles.xml**和**values-ar/styles.xml**中都包含多余的 styles.xml ，谁能解释为什么会发生这种情况？

还有另一个问题：我注意到图标应用程序和应用程序标题与操作栏的左侧对齐，如何在将语言更改为阿拉伯语时将对齐方式更改为右侧？如果是阿拉伯语，我不能通过使用某些主题来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T12:32:30.873

您可能已将图标的外观链接到翻译某些文本并在应用程序中给您带来问题。它发生了类似的事情，并且是由于这个原因。

希望能帮助到你。

# web-services - 在 WebService 上存储变量

> ID：12800678
> 
> 赞同：0
> 
> 时间：2012-10-09T13:03:18.067
> 
> 标签：web-services, variables

我记得遇到过允许您通过 XML/JSON 通信存储变量的网站服务。

简单的键/值存储。

这是一项免费服务。

我现在碰巧需要它，但我无法挖掘它。

你能推荐任何这样的服务吗？

**~更新**：找到了这个 Amazon SimpleDB，但我需要一个免费的服务来存储键/值对

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T13:25:18.800

好的，我找到了，[OpenKeyval](http://openkeyval.org/)

描述：“OpenKeyval 是一个完全开放的键值对数据存储，公开为一个非常简单的 Web 服务。目标是使其成为一种在 Web 应用程序中持久保存数据的非常简单的方法。”

# php - 显示某一日期与今天之间的天数

> ID：12800679
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:03:18.947
> 
> 标签：php, date

> **可能重复：**
> [如何使用 php 查找两个日期之间的](https://stackoverflow.com/questions/2040560/how-to-find-number-of-days-between-two-dates-using-php)
> [天数剩余天数 - 订阅到期？](https://stackoverflow.com/questions/12795088/days-left-subscription-expire)

我有代码应该回显从日期（2012-10-01）到今天有多少天。

```
$datetime1 = date_create('2012-10-01');
$datetime2 = date_create();

$day1 = date_format($datetime1, 'Y-m-d');
$day2 = date_format($datetime2, 'Y-m-d');    

$day = $day2 - $day1 / (60 * 60 * 24);
echo $day; 
```

我无法得到任何正确的解决方案，所以有什么想法我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:06:19.697

看看这个[找出两个日期之间的天数](https://stackoverflow.com/questions/2040560/)

下面的示例代码（适用于您的日期）：

```
$now = time();
$your_date = strtotime('2012-10-01');
$datediff = $now - $your_date;
echo floor($datediff/(60*60*24)); 
```

# android - 创建 Activity 时崩溃

> ID：12800687
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:03.857
> 
> 标签：android

晚上好堆栈！

我已经开始将学习 Android 开发作为一种爱好，现在我正在尝试开发我的第一个“真正的”应用程序（我已经从书本上制作了五个简单的应用程序）。

在这个应用程序中，我有两个按钮将“创建”同一个 Activity，但使用来自同一个基类的两个不同对象，因此允许我根据单击的按钮自定义应用程序的行为。但是，当我尝试创建 Intent 实例时，我的应用程序崩溃了。

这是基本 Activity 类的代码

```
public class BaseDictionnaryActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.basedictionnary);
    }

    public void onDestroy() 
    {   
        super.onDestroy();
    }
} 
```

这是崩溃的代码。该行是创建 Intent 对象的行。

```
public class DictionnaryActivity extends Activity 
{
    private BaseDictionnaryActivity jlpt1;
    private BaseDictionnaryActivity jlpt2;

    private Button btjlpt1 = null;
    private Button btjlpt2 = null;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dictionnary);

        jlpt2 = new BaseDictionnaryActivity();
        jlpt1 = new BaseDictionnaryActivity();

        btJLPT1 = (Button)findViewById(R.id.jlpt1);
        btJLPT1.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                Intent myIntent = new Intent(DictionnaryActivity.this,   
                                             jlpt1.getClass());
                jlpt1.this.startActivity(myIntent); 
            }
        }); 
        btJLPT2 = (Button)findViewById(R.id.jlpt2);
        btJLPT2.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                Intent myIntent = new Intent(DictionnaryActivity.this, 
                                             jlpt2.getClass());
                jlpt2.this.startActivity(myIntent); 
            }
        });
     }
     public void onDestroy() 
     {   
          super.onDestroy();
     }
} 
```

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:07:14.723

只是为了更正，

```
Intent myIntent = new Intent(DictionnaryActivity.this,   
                                         jlpt1.getClass()); 
```

在这第二个参数必须是，你的目标活动`BaseDictionnaryActivity.class`

所以，它看起来像，

```
Intent myIntent = new Intent(DictionnaryActivity.this,   
                                         BaseDictionnaryActivity.class);
startActivity(myIntent); 
```

另外请确保在您的应用程序清单文件中有 BaseDictionnaryActivity 条目，

看起来像，

```
<activity android:name=".BaseDictionnaryActivity"
         ....>
 </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:10:32.400

```
Maybe:
Intent myIntent = new Intent(DictionnaryActivity.this,   
                                         BaseDictionnaryActivity.class);
startActivity(myIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:06:47.613

改变这个

```
 Intent myIntent = new Intent(DictionnaryActivity.this, 
                                             NextActivity.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:09:08.703

```
Intent myIntent = new Intent(DictionnaryActivity.this, 
                                         jlpt2.class);
                                         ^^^^^^^^^^^^ 
```

您需要在 Intent 的第二个参数中提供下一个活动 .class。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T13:13:01.693

将 jlpt1.getClass() 替换为 NameOfClassToBeLaunched.class 在其他活动中创建 Activity 实例也是不好的做法。

# javascript - 如何对可变长度的文本进行分页？

> ID：12800690
> 
> 赞同：1
> 
> 时间：2012-10-09T13:04:13.373
> 
> 标签：javascript, pagination

是否可以将格式化的文本分成多个框，而无需某人准备文本？我发现了几个对这样的文本进行分页的 jQuery 插件：

```
<div>
  <p>page 1</p>
  <p>page 2</p>
</div>
$("div").paginate(); 
```

但我想根据页面高度和宽度对文本进行分页：

```
<p>page 1<br/>page 2</p>
$("p").paginate({ width: 20, height: 20 }); 
```

这种方式的分页是灵活的，没有人需要知道在哪里设置`<p></p>`。

更具体地说：我想将 html 格式的文本拆分为多个固定大小的页面（例如 100x200px）。问题是我不知道输出文本（解析的 html 文本）的实际高度，因此我不能将文本拆分为每个 x 字符（也因为这可能会破坏 html 标记）

示例文本（tinymce 输出）：

```
<div id="toPaginate">
<h2>Lorem ipsum dolor sit amet,</h2>
<p>consetetur sadipscing elitr, sed diam&nbsp;nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam</p>
<ul>
<li>erat,</li>
<li>sed</li>
<li>diam</li>
<li>voluptua.</li>
</ul>
<p>At vero eos et accusam et justo duo dolores et ea <strong>rebum</strong>. <em>Stet clita kasd gubergren, no sea takimata sanctus est</em> Lorem ipsum dolor sit amet.</p>
<h1>Lorem ipsum dolor sit amet,</h1>
<p>consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
</div>​​​​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:09:39.393

不确定我是否理解你在这里想要做什么。但是如果你想以特定的高度/文本长度分割一篇文章或类似的文章，你可能想尝试将文本的 X 字符插入到 ap 标签中，然后检查它的 innerHeight。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:25:54.197

基本上，您需要的内容可以写在一行中，假设全文最初包含在 one 中`<p>`，给该段落一个 id 并`.ready`以此开始您的回调：

```
$('#toPaginate').replaceWith('<p>'+$('#toPaginate').html().match(/(.{0,200})\b/g).join('</p><p>')+'</p>'); 
```

`toPaginate`包含文本的段落的 id 在哪里。如果有多个段落，只需使用一个类：

```
$('.toPaginate').each(function()
{
    $(this).replaceWith('<p>'+$(this).html().match(/(.{0,200})\b/g).join('</p><p>')+'</p>');
}); 
```

哦，这段代码会将您的文本分成最多 200 个字符的块。只需将正则表达式 ( ) 中的最大值`/(.{0,200})\b/`从 200 更改为您需要的任何长度。
我也用一些评论和一个使用 IIFE 的例子来设置[这个小提琴。](http://jsfiddle.net/KDyZy/4)

要使*“页面”*的大小取决于宽度和高度，您始终可以使用`em`测量值。`1em`=== 1 个字符的大小。换句话说：

```
function paginate(width, height)
{
    var maxChars = width*height;
    maxChars = new RegExp('(.{0,'+maxChars+'})\\b','g');
    $('#toPaginate').replaceWith('<p>'+$('#toPaginate').html().match(maxChars).join('</p><p>')+'</p>');
} 
```

使用类选择器，替换`$('toPaginate')`为`this`，并`paginate`用作回调函数，`.each`仅此而已，显然不会被传递，但是通过使用闭包，您可以正确设置它们：`width``height`

```
$('.toPaginate').each((function(width,height)
{
    var maxChars = new RegExp('(.{0,'+(width*height)+'})\\b','g');
    return function()
    {
        $(this).replaceWith('<p>'+$(this).html().match(maxChars).join('</p><p>')+'</p>');
    };
}(50, 20)));//pass dimensions here 
```

检查[这个更新的小提琴](http://jsfiddle.net/KDyZy/5/)以查看它的实际效果，这次我采取了先检查它的预防措施：s ...

# wpf - 从 DataGrid 的最后一个单元格/行检测“tab”键按下

> ID：12800691
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:13.540
> 
> 标签：wpf

在 WPF Datagrid 中，如何检测用户何时从最后一个单元格/行中按下“Tab”键？对于 KEY_DOWN 事件，所选单元格是未知的，对于 FOCUS_OUT 我们不知道按下的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:39:53.700

```
 private void dataGrid1_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Tab)
        {
            MessageBox.Show("now tab!!!");//Here u know the tab press
            MessageBox.Show(dataGrid1.SelectedIndex.ToString());//Here u know the cell/row!
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:35:48.880

您想要处理 DataGrid 本身的[PreviewKeyDown 事件](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.previewkeydown.aspx)。然后，您可以在处理程序中检查当前选择了哪个单元格。

# c# - 从 SPList 获取项目的 CAML 查询

> ID：12800694
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:28.813
> 
> 标签：c#, sharepoint-2010

我想更新部门列表中包含“财务”的列表中的名称字段。我编写了以下代码，但它会更新名称列中的每个项目，无论它是否包含“财务”。

我究竟做错了什么？

```
SPListItemCollection Items = RiskAssesment.GetItems(new SPQuery()
{
     Query = @"<where>
                   <Eq>
                       <FiledRef Name 'Department'/>
                       <Value Type='Text'>Finance </Value>
                   </Eq>
               </Where>"
});

foreach (SPListItem item in Items)
{
    item["Name"] = "abcdef";
    item.Update();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:15:55.767

**FiledRef**应该是**FieldRef**。而你忘记了等号，它应该是这样的：

`<FieldRef Name='Department' />`

**小编辑：** 我不确定 CAML 是否区分大小写，但如果是：将开头更改为`<Where>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:14:29.283

```
SPListItemCollection Items = RiskAssesment.GetItems(new SPQuery()
{
     Query = @"<Where>
     <Eq>
         <FieldRef Name='Department'/>
         <Value Type='Text'>Finance </Value></Eq></Where>"
 });

  foreach (SPListItem item in Items)
  {
         item["Name"]="abcdef";
         item.Update();
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T14:22:37.563

以下函数获取项目存储文件夹 = item.folder 的子文件夹的文件夹名称和 ID。

最初它将为空。

```
static string GetParentFolder(SPListItem itemToFind, SPFolder folder)  
        { 
            SPQuery query = new SPQuery(); 
           // query.Query =  "<OrderBy><FieldRef Name='Title'/></OrderBy>";
            query.Query = "<Where><Eq><FieldRef Name=\"ID\"/><Value Type=\"Integer\">"+ itemToFind.ID +"</Value></Eq></Where>";
            query.Folder = folder;
            query.ViewAttributes = "Scope=\"Recursive\"";
            SPListItemCollection items = itemToFind.ParentList.GetItems(query);
            int intpartentFolderID=0 ;
            if (items.Count > 0)
            {
            foreach (SPListItem item in items) 
            {

                SPFile f = item.Web.GetFile(item.Url);

                string test11 = f.ParentFolder.Name;
                intpartentFolderID = f.ParentFolder.Item.ID;

                //string test1 = item.File.ParentFolder.Name;

                 return (intpartentFolderID.ToString()); 

             }
            }
            return (intpartentFolderID.ToString());     
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T14:25:41.450

以下函数获取项目存储文件夹 = item.folder 的子文件夹的文件夹名称和 ID。最初它将为空。

```
static string GetParentFolder(SPListItem itemToFind, SPFolder folder)  
        { 
           SPQuery query = new SPQuery(); 
           // query.Query =  "<OrderBy><FieldRef Name='Title'/></OrderBy>";
            query.Query = "<Where><Eq><FieldRef Name=\"ID\"/><Value Type=\"Integer\">"+ itemToFind.ID +"</Value></Eq></Where>";
            query.Folder = folder;
            query.ViewAttributes = "Scope=\"Recursive\"";
            SPListItemCollection items = itemToFind.ParentList.GetItems(query);
            int intpartentFolderID=0 ;
            if (items.Count > 0)
            {
            foreach (SPListItem item in items) 
            {
                SPFile f = item.Web.GetFile(item.Url);

                string test11 = f.ParentFolder.Name;
                intpartentFolderID = f.ParentFolder.Item.ID;

                //string test1 = item.File.ParentFolder.Name;

                 return (intpartentFolderID.ToString()); 

             }
            }
            return (intpartentFolderID.ToString());     
        } 
```

* * *

谢谢Deva- Cheraideva

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-06T18:58:04.667

所以我刚刚看到这篇较旧的帖子，我没有足够的声誉来评论所选答案。

但我知道在 SharePoint 2013 中使用 CAML 时绝对区分大小写。

只是意味着开口`<where>`应该是`<Where>`。

希望你的问题得到解决！

# java - 将字符串转换为字符并按降序排序（ascii）

> ID：12800698
> 
> 赞同：3
> 
> 时间：2012-10-09T13:04:37.430
> 
> 标签：java, string, char

我正在创建一个程序，该程序将使用户输入整数（一个接一个），存储在数组中并按降序显示整数。该程序还要求用户输入一个字符串，使用 . 将其转换为 char `string.toCharArray()`。我已经正确地将整数显示为降序。问题是我不知道如何降序显示字符。

这是整数的代码：

```
for(i=0;i<nums.length;i++){
        System.out.print("Enter value for index["+i+"] here --> ");
        nums[i]=Integer.parseInt(br.readLine());}

while(pass<nums.length){
        for(i=0;i<(nums.length-pass);i++){
            if(nums[i]<nums[i+1]){
                temp=nums[i];
                nums[i]=nums[i+1];
                nums[i+1]=temp;
            }
        }
        pass++;
}
System.out.println("\n\nThe numbers when sorted descendingly are :\n");
    for(i=0;i<nums.length;i++){
        System.out.println(nums[i]); 
```

这是字符串到数组的代码。这是我遇到问题的地方。我在运行程序时没有错误，只是我不知道如何正确执行。

```
System.out.print("Input a string");
        String strValue= br.readLine();
        char[] chrValues;
        chrValues=strValue.toCharArray( );

while(flag<chrValues.length){
   for (c=0; c< (chrValues.length- flag); c++){
        if(chrValues[c]<chrValues[i+1]){
         tempo=chrValues[c];
                chrValues[c]=chrValues[c+1];
                chrValues[c+1]= tempo;}
   }
}
 flag++; 
 System.out.println("\n\nThe String when converted in character and sorted descendingly     are :\n");    
    for(c=0;i<chrValues.length;c++){
        System.out.println(chrValues[c]);} 
```

顺便说一句，我使用 flag 作为临时数组存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:13:54.443

你已经有内置的方法： -

```
 String str = "Rohit";
    char[] arr = str.toCharArray();

    System.out.println(arr);
    Arrays.sort(arr);   // Sort in Ascending order
    System.out.println(arr); 
```

对于降序，您可以定义 a`Comparator`并将其传递给`Arrays.sort()`方法..

您可以使用[Arrays#sort](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28short%5B%5D,%20int,%20int%29)和[ArrayUtils#toObject](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html#toObject%28char%5B%5D%29)在`Descending order`..

**这是它的工作原理： -**

```
 String str = "Rohit";
    char[] charArray = str.toCharArray();

    Character[] myCharArr = ArrayUtils.toObject(charArray);

    Arrays.sort(myCharArr, new Comparator<Character>() {

        @Override
        public int compare(Character char1, Character char2) {
            return char2.compareTo(char1);
        }
    });

    for (char val: myCharArr) {
        System.out.print(val);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:08:42.437

你可以试试

```
String str = "AbCdEf";
char[] arr = str.toCharArray();

for(int i = 0; i < arr.length; i++) System.out.print(arr[i]);
System.out.println();

Arrays.sort(arr); // sorted in ascending order

// print them backwards i.e. descending order.
for(int i = arr.length - 1; i >= 0; i--) System.out.print(arr[i]);
System.out.println(); 
```

印刷

```
AbCdEf
fdbECA 
```

# python - 无法从 web.py 中的登录页面获取值

> ID：12800700
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:42.483
> 
> 标签：python, authentication, web.py

我正在使用 python web.py 框架来创建一个小型 Web 应用程序，它刚刚

1.  登录画面（认证）

2.  显示记录列表的屏幕（成功登录后）

目前我正在尝试创建登录屏幕身份验证

我创建了一个`index.py`文件，代码如下

**索引.py**

```
import os
import sys
import web
from web import form
from web.contrib.auth import DBAuth

render = web.template.render('templates/')

urls = (
  '/',   'Login',
)

app = web.application(urls, globals())
db = web.database(dbn='mysql', db='Python_Web', user='root', pw='redhat')

class Login:

    login_form = form.Form( 
        form.Textbox('username', form.notnull),
        form.Password('password', form.notnull),
        form.Button('Login'),
        )

    def GET(self):
        form = self.login_form()
        return render.login(form)

    def POST(self):
#        if not self.login_form.validates():
#            return render.login(self.login_form)
        post = self.login_form()
        username = post['username'].value
        print username,">>>>>>>>>>>>>>>>>>>>>>username"
        password = post['password'].value
        ident = db.select('user', where='user_login=$username', vars=locals())

if __name__ == "__main__":
    web.internalerror = web.debugerror
    app.run() 
```

我的**login.html**代码

```
$def with (form)

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Log in</title>
</head>
<body>
<div id="container">
  <h1>Log in Details</h1>
  <form action="" method="post" accept-charset="utf-8">
    <p><label for="username">Username:
    <input type="text" name="username" id="username" maxlength="254" tabindex="1" />
    </label></p>
    <p><label for="password">Password:
    <input type="password" name="password" id="password" maxlength="254" tabindex="2" />
    </label></p>
    <p><label for="Login"></label><button id="Login" name="Login">Login</button></p>  
  </form>

</div>
</body> 
```

当我在浏览器中使用 url 运行上述文件时`www.localhost:9080`，我可以看到带有字段`username, password and login`按钮的屏幕，但是当我输入用户名和密码并单击`login`按钮并尝试打印用户名时，我无法从浏览器中获取任何数据，结果显示如下

```
None >>>>>>>>>>>>>>>>>>>>>>username
0.0 (1): SELECT * FROM user WHERE user_login=NULL 
```

谁能告诉我为什么我无法获取通过浏览器输入的详细信息？，我是否遗漏了上述代码中的任何内容，最后我的意图是

通过签入数据库来创建`login`页面和用户详细信息`validate`

如果用户退出，`redirect`则到下一页

我请求帮助我编写从浏览器获取详细信息并检查数据库并在用户存在时重定向到另一个 html 页面的代码。为了完成这个过程，我真的很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:30:25.827

确保在尝试访问任何输入之前验证表单

```
def POST(self):
    post = self.login_form()
    post.validates()
    username = post['username'].value
    print username,">>>>>>>>>>>>>>>>>>>>>>username"
    password = post['password'].value
    ident = db.select('user', where='user_login=$username', vars=locals()) 
```

之后更改代码对我有用。祝你好运！

# jquery - jQuery 自动完成器

> ID：12800704
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:53.317
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

在 Jquery 自动完成器中输入内容时，我收到了错误的建议。就像我输入“ja”一样，它应该只显示那些以“ja”开头的值，但它会显示全部。

我想将此自动完成器的值存储到某个隐藏字段，但我无法做到。下面是我生成的 JSON 格式。所以我想将名称显示为标签，并希望将值分配给一些隐藏的字段场地。 `[{"id":1,"name":"Java"},{"id":2,"name":"Liferay"},{"id":3,"name":".Net"}`

下面是我的代码片段。

```
$("input#auto").autocomplete({
    source:function( request, response ) {
        $.ajax({
            url: '<portlet:resourceURL />',
            dataType: "json",
            data: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            },
            success: function(data) {
                response($.map(data, function(item) {
                    return {
                        label: item.name, 
                        value: item.id, 
                    }                      
                }));
            },                                  
        });
    },
    minLength: 2,
    dataType: "json",           
    select: function (event, ui) {  
        $("#skillName").val(ui.item.value);           
    }
}); 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T05:09:47.477

自动完成代码似乎是正确的。看起来它可能是没有返回您正在寻找的结果的网络服务。

此外，如果您希望将名称显示为标签，则应将“名称”重命名为“标签”，因为这是 jquery 自动完成默认使用的键来显示下拉列表中的项目。

例如：

```
{"id":1,"name":"Java"},{"id":2,"name":"Liferay"},{"id":3,"name":".Net"} 
```

可能

```
{"id":1,"label":"Java"},{"id":2,"label":"Liferay"},{"id":3,"label":".Net"} 
```

或者

```
{"id":1,"name":"Java","label":"Java"},{"id":2,"name":"Liferay","label":"Liferay"},{"id":3,"name":".Net","label":".Net"} 
```

您可以做的另一件事是使用自定义渲染器通过执行以下操作来显示名称中的值：

```
Input.autocomplete()..data('autocomplete')._renderItem = function (ul, item) {
       return $('<li></li>')
        .data('item.autocomplete', item)
        .append('<a class="ui-corner-all">' + item.name + '</a>')
        .appendTo(ul);
       } 
```

# android - Android 使用 drawable 和 drawable-mdpi、ldpi 等的混合

> ID：12800707
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:56.340
> 
> 标签：android, graphics, android-image

目前，对于我的简单游戏，我在创建图形时考虑了“默认”尺寸（当前为 2048x1024，因此我的背景为 2048x1024，其他图形的尺寸为在该尺寸背景上看起来不错）。然后，我在代码中锻炼当前设备所需的规模。例如，如果当前设备是 1024x512（任意分辨率），我知道将所有图形缩放 50%。

这通常效果很好，但是（我相信你们中的一些人现在已经猜到了），问题出现在小屏幕上的较小图形上。具体来说，我有一种字体，当缩小以使用新的 xperia mini（中等分辨率但物理尺寸小）时，它看起来不太好。

所以我想要的是使用各种可绘制文件夹为“异常”情况提供图形。也就是说，我不想为每一个图形创建 ldpi、mdpi、hdpi 等版本，而是我想为大多数使用默认图形，然后为这种字体之类的东西使用特定图形。

我遇到的问题是因为其他图形仍然需要根据这个默认大小按比例缩小，这些特定图形在不需要时也会按比例缩小。

有人对我如何解决这个问题有任何建议吗？或者也许有一种方法可以告诉我android系统已经从mdpi文件夹中选择了这个图形（这样我就可以手动决定我想用它做什么）？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:12:12.123

据我所知，没有办法找出android用于获取资源的文件夹（在这里可以找到一些问题，但没有答案）。我想您可以使用一种资源（例如背景）来检测它的大小，并根据此了解您是否要调整它的大小。

# svn - 从 SVN 迁移到 Git 的问题

> ID：12800708
> 
> 赞同：0
> 
> 时间：2012-10-09T13:04:59.407
> 
> 标签：svn, git-svn

嗨，我无法使用“git svn”工具将我的存储库从 SVN 转移到 Git。

我面临以下错误

```
$ git svn fetch
Index mismatch: a93a7f4289f88b70ba85c8f6210e3c64b97447d5 != 20979407f93a6908d2dadee058774021b68f80af
rereading 44999ef977dddeed551f4822d25763b1c38a7307
        M       parser/service/src/main/java/service/Add.java
        M       parser/service/src/main/java/service/DependencyUtil.java
        M       parser/service/src/main/java/service/Log.java
        M       parser/service/src/main/java/service/ParseTableFilter.java
svn: In file 'subversion/libsvn_delta/text_delta.c' line 657: assertion failed (window->sview_len == 0 || (window->sview_offset >= ab->sbuf_offset && (window->sview_offset + window->sview_len >= ab->sbuf_offset + ab->sbuf_len)))
error: git-svn died of signal 6 
```

我该如何解决这个问题？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:32:07.860

您可以尝试[使用 SubGit](http://subgit.com)将 SVN 存储库导入 Git。此外，此工具允许在同一个存储库中同时使用 Subversion 和 Git。

以下是如何设置 SubGit 的基本说明：

```
$ subgit configure SVN_REPOS
# Adjust SVN_REPOS/conf/subgit.conf to specify your branches and tags
# Adjust SVN_REPOS/conf/authors.txt to specify git & svn authors mapping
$ subgit install SVN_REPOS
...
# INSTALLATION SUCCESSFUL 
```

安装后，您可以在 SVN_REPOS/.git 找到导入的 Git 存储库；从这一刻起，SubGit 会自动在每个`svn commit`和`git push`. 如果您不需要 SubGit 的镜像功能，只需运行以下命令：

```
$ subgit uninstall --purge SVN_REPOS 
```

此命令删除所有与 SubGit 相关的文件，因此您导入了不再与 SVN 同步的 Git 存储库。

[在SubGit 文档](http://subgit.com/documentation/)和[git-svn](http://subgit.com/documentation/gitsvn.html)比较页面中查找更多详细信息。

SubGit 是一款商业产品，但一次性转换是免费的。如果您对 SubGit 的镜像模式感兴趣，它对开源、学术和小型项目（最多 10 个提交者）是免费的。

免责声明：我是 SubGit 开发人员之一。

# asp.net - ASP.NET 页面在 EnableViewState = false 回发后保持状态

> ID：12800709
> 
> 赞同：1
> 
> 时间：2012-10-09T13:05:00.267
> 
> 标签：asp.net

在 ASP.NET 网页中，我已将页面和页面的所有控件的 EnableViewState 设置为 false。我仍然在控件中获取 PostBack 数据。

有什么办法可以去掉这个吗？我们如何删除页面生命周期事件，如恢复 PostBackData？实际上 _ViewState 是为所有控件维护的。我也没有从 MSDN 中得到澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:07:47.647

回发数据与 ViewState 无关。

如果您不想要 Postback 数据，为什么要使用 Post？你想达到什么目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:09:38.767

因为您在每次回发后重新绑定数据

您可以`!IsPostBack`在绑定中使用

```
if(!IsPostBack)
{
  //Bind your datas just for load, and disable your ViewState, that will erase your selected datas
} 
```

# grails - Grails spring-security-core 插件

> ID：12800718
> 
> 赞同：0
> 
> 时间：2012-10-09T13:05:28.953
> 
> 标签：grails, spring-security, grails-plugin

是否可以修改并让 grails spring-security-core 插件利用 /WEB-INF/applicationContext-security.xml 中定义的其他 bean？

有没有人能够成功运行例如 spring-security 的简约案例：

```
<http>
    <http-basic/>
    <intercept-url pattern="/**" access="ROLE_ADMIN" />
</http>
<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin" password="pass" authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

安装了 Grails spring-security-core 插件，以便 grails 插件不会重定向它并使用它自己的 bean？

在这种情况下，您在哪里以及如何指定它以使其成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:03:35.347

不要编辑`/WEB-INF/applicationContext-security.xml`- 这是 Grails 父应用程序上下文定义文件。如果您想使用 XML 语法而不是`resources.groovy`，请在同一文件夹中创建一个名为`resources.xml`的文件并将 bean 定义放在那里。格式与任何 Spring XML 文件相同。

但是您不能将 Spring Security XML bean 定义与插件混合，因为方法非常不同，特别是几个 bean 名称不一样。

# asp.net - 将文本框值传递给 ASP.NET 类

> ID：12800720
> 
> 赞同：1
> 
> 时间：2012-10-09T13:05:33.700
> 
> 标签：asp.net

我总是得到这个错误：编译器错误消息：CS0103：名称'txtUserName'在当前上下文中不存在

我的页面.aspx

```
<% @Page Language="C#" Inherits="myclass" Src="myclass.cs" %> 
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Login Form</title>
</head>
<body>
<form id="form1" runat="server">
<div>
<table>
<tr>
<td>
Username:
</td>
<td>
<asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>

</td>
</tr>

<tr>
<td>
</td>
<td>
<asp:Button ID="btnSubmit" runat="server" Text="Submit" onclick="Writedata" />
</td>
</tr>
</table>
</div>
</form>
</body>
</html> 
```

# 我的类.cs

```
using System;
using System.Data;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Net;
using System.Text;

public class myclass:Page 
{
    protected void WriteData(object sender, EventArgs e){

    string customer_id=txtUserName.Text;

    string postData="customer_id="+customer_id;

    byte[] data= Encoding.UTF8.GetBytes (postData);

    // Prepare web request...
    HttpWebRequest myRequest =
        (HttpWebRequest)WebRequest.Create("http://myserverurl.com/mypage.php");
    myRequest.Method = "POST";
    myRequest.ContentType="application/x-www-form-urlencoded";
    myRequest.ContentLength = data.Length;
    Stream newStream=myRequest.GetRequestStream();
    // Send the data.
    newStream.Write(data,0,data.Length);
    newStream.Close();
    }
} 
```

这里有什么帮助吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:13:32.967

尝试将您的类声明更改为“public partial class myclass:System.Web.UI.Page”。我相信，partial 关键字对于编译器了解类定义的平衡是在临时/中间文件中创建的至关重要，否则它不会知道。

# objective-c - UIScrollView 中每个按钮的具体操作

> ID：12800721
> 
> 赞同：0
> 
> 时间：2012-10-09T13:05:35.947
> 
> 标签：objective-c, ipad, uiscrollview, uibutton

我有一个`UIScrollView`页面。在这一点上`UIscrollView`，我在按钮中有不同的图像，你可以在下面的代码中看到它，我想在`UIWebView`按下按钮时加载这些图像，我的问题是我怎么知道点击了哪个按钮。你能给我一些实现这个的提示吗？

我是 Objective-C 的新手

这是我的动作：我想为每张图像设置一个动作，现在我对所有图像只有一个动作，我为每张图像设置一个动作

```
 - (IBAction)openAction:(id)sender {

  NSLog(@"test");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:20:45.217

实际的按钮被传递给 IBAction。在按钮上设置标签是一种方法。如果您在 Interface Builder 中为所有按钮创建了 outlet，您可以简单地执行以下操作：

```
- (IBAction)openAction:(id)sender {
    UIButton *b = (UIButton *)sender;

    if ([b isEqual:self.outletButton1]) {
        // Do something with button 1
    }
    else if ([b isEqual:self.outletButton2]) {
        // Do something with button 2
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:16:25.350

不要对按钮使用相同的标签。对不同的按钮使用不同的标签。例如 [btn setTag:1] 。你可以使用 [btn setTag:i]; 动态价值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:15:07.233

在您的代码或 Interface Builder 中为每个按钮指定一个唯一的标记。

然后在您的操作中，您可以执行以下操作：

```
- (IBAction)openAction:(id)sender {
   UIButton *b = (UIButton *)sender;
   NSLog(@"button %d is pressed", b.tag);
} 
```

我看到你已经给你的 imageviews 标签了。那些不是按钮！您应该创建内容为图像的 UIButton。参见 UIButton 的 setImage:forState:

编辑：针对您的问题，以下是一个示例：

```
NSMutableArray *bArray = [NSMutableArray arrayWithCapacity:kNumImages];
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"image%d.jpg", i];
    UIButton *btn = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
    btn setImage:imageName forState:UIControlStateNormal];
    btn.tag = 100+i;
    [bArray addObject:btn];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:56:39.183

您不必在 UIImageView 上添加 UIButton。相反，您可以像这样为 UIButton 设置图像。

```
 [btn setImage:[UIImage imageNamed:@"image1"] forState:UIControlStateNormal]; 
```

您可以像这样在操作中访问图像：

```
- (IBAction)openAction:(id)sender {
  if([[btn currentImage] isEqual:[UIImage imageNamed:@"image1"]]){

  }
  NSLog(@"test");
 } 
```

# php - 错误 (150) - 设计基本关系数据库时遇到问题

> ID：12800725
> 
> 赞同：1
> 
> 时间：2012-10-09T13:05:42.327
> 
> 标签：php, mysql, database-design, relational-database

我正在尝试为我正在使用 PHP 进行的一个小项目设计一个数据库。我没有太多使用数据库的经验（你很快就会注意到），所以现在我已经把自己投入了一点点。

我正在开发一个数据库，它将成为我用 PHP 编写的基本统计系统的基础。我得出的结论是，我将需要（至少）3 张桌子。

`TOURNAMENT`- >**一场比赛有很多场比赛**

```
tournamentID SMALLINT UNSIGNED PRIMARY KEY, 
```

`MATCH`->**一场比赛有很多球员**

```
tournamentID SMALLINT UNSIGNED,
matchID SMALLINT UNSIGNED, 
```

`PLAYER`->**一名球员有许多比赛和许多锦标赛**

```
tournamentID SMALLINT UNSIGNED,
matchID SMALLINT UNSIGNED,
playerID SMALLINT UNSIGNED, 
```

我尝试创建此数据库：

```
<?php
//Connect
$link = mysql_connect("localhost", "root", "password") or die(mysql_error());
mysql_select_db("stats") or die(mysql_error());

//Drop old tables
mysql_query('DROP TABLE PLAYERS');
mysql_query('DROP TABLE MATCHES');
mysql_query('DROP TABLE TOURNAMENT');
echo('Old tables dropped<br \>');

//Create new tables

// TOURNAMENT
mysql_query('CREATE TABLE TOURNAMENT(
tournamentID SMALLINT UNSIGNED PRIMARY KEY, 
)') or die(mysql_error());
echo('TOURNAMENT created...<br />');

// MATCHES
mysql_query('CREATE TABLE MATCHES(
    tournamentID SMALLINT UNSIGNED,
    matchID SMALLINT UNSIGNED,

    PRIMARY KEY (tournamentID, matchID),
    FOREIGN KEY (tournamentID) REFERENCES TOURNAMENT(tournamentID)
)') or die(mysql_error());
echo('MATCH created...<br />');

// PLAYERS
mysql_query('CREATE TABLE PLAYERS(
    tournamentID SMALLINT UNSIGNED,
    matchID SMALLINT UNSIGNED,
    playerID SMALLINT UNSIGNED,

    PRIMARY KEY (tournamentID, matchID),
    FOREIGN KEY (tournamentID) REFERENCES TOURNAMENT(tournamentID),
    FOREIGN KEY (matchID) REFERENCES MATCHES(matchID)
)') or die(mysql_error());
echo('PLAYERS created...<br />');

echo('Blank tables created');

mysql_close(); 
```

当我执行 PHP 脚本时，我收到 err 150，我认为这与我在 PLAYERS 表中的主键/外键引用有关：

```
Old tables dropped
TOURNAMENT created...
MATCH created...
Can't create table 'stats.players' (errno: 150) 
```

我已经阅读并查看了之前的一些问题，但我并没有真正理解实际问题（发生错误的原因）。显然我的数据库设计不正确，但我不确定我应该如何改进和修复它。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:46:25.750

除非人们在上面评论的表定义有任何问题，否则您收到错误 150 的原因是因为`Players`（显然有问题的表）无法创建，因为它不能`matchID`用作外键。为什么？因为您只能使用作为另一个表上的键的外键。

`PRIMARY KEY (one, two)`确实从这两列中创建了一个唯一的主键，但只会`one`将其视为一个键。

您可以通过将其添加到以下内容来轻松解决此问题`Matches`：

```
...
PRIMARY KEY (tournamentID, matchID),
KEY (matchID),
... 
```

# iphone - 3 UIScrollview 上的 UIWebView 在浏览时崩溃

> ID：12800726
> 
> 赞同：0
> 
> 时间：2012-10-09T13:05:58.857
> 
> 标签：iphone, ios, uiwebview, uiscrollview, uikit

我有3`UIWebView`个`UIScrollView`。用户可以从左到右和向后滚动这些网络视图（5-15 页）。当用户滚动一页时，我会移动 webviews 并将新内容加载到不可见的页面。我不会删除/发布 webview，只是更改框架和内容。有些页面已缓存，我正在使用

```
[self loadHTMLString:htmlString baseURL: url]; 
```

用于加载这些页面。

它工作正常但是：如果我快速滚动 - 那么我已经崩溃了应用程序并显示下一条消息：

> ***由于未捕获的异常“CALayerInvalidGeometry”而终止应用程序，原因：“CALayer 位置包含 NaN：[nan nan]”

如果我评论**loadHTMLString**行，那么应用程序可以正常工作......

为什么会发生？如何解决？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:04:52.103

您正在接收内存警告呼叫。您正在使用的一些保留对象刚刚被释放。检查您的 [viewDidLoad] / [viewDidUnload] 方法以检查您的数据何时被释放然后再次重用。

顺便说一句，webViews 正在使用大量的 ram

# php - 使用 PHP 获取当前日期时间

> ID：12800730
> 
> 赞同：2
> 
> 时间：2012-10-09T13:06:04.040
> 
> 标签：php, datetime

我想将内容添加到具有当前日期和时间的 MySQL 表中。
当我将内容插入数据库时​​，它显示正确的日期但错误的时间。

```
$date1 = date("Y-m-d H:i:s"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:12:50.870

```
date_default_timezone_set('Asia/Kolkata'); 

$date1 = date("Y-m-d H:i:s"); 
```

> 亚洲/加尔各答已更改为亚洲/加尔各答

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T13:08:23.173

[a] strftime()：根据区域设置格式化本地时间/日期

[b] date : 格式化本地时间/日期

例子

考虑以下简单示例：

```
<?php
print strftime('%c');
?> 
```

输出：

```
Mon Apr 23 01:22:58 2007 
```

您需要将 %c 等格式传递给 strftime() 以打印当前系统的日期和时间表示。您可以使用以下格式字符：

%m - 以十进制数表示的月份（范围 01 到 12） %d - 作为十进制数的月份中的日期（范围 01 到 31） %Y - 作为十进制数的年份，包括世纪 您可以查看完整的格式转换说明符online here 你也可以使用 date() 如下：

```
<?php
 print date('r');
 print "\\n";
 print date('D, d M Y H:i:s T');
 print "\\n";
?> 
```

输出：

```
Mon, 23 Apr 2007 01:29:56 +0530
Mon, 23 Apr 2007 01:35:14 IST 
```

# java - 尝试在 netbeans 上运行应用程序时出现 java.lang.NullPointerException 错误

> ID：12800732
> 
> 赞同：0
> 
> 时间：2012-10-09T13:06:09.477
> 
> 标签：java, swing, netbeans, jsr296

这是我的回溯

```
Oct 9, 2012 3:58:44 PM org.jdesktop.application.Application$1 run
SEVERE: Application class sampleapp.SampeAppApp failed to launch
java.lang.NullPointerException
        at sampleapp.SampeAppView.<init>(MusicDownloaderView.java:89)
        at sampleapp.SampeAppApp.startup(MusicDownloaderApp.java:18)    
at org.jdesktop.application.Application$1.run(Application.java:171)
            at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
            at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
            at java.awt.EventQueue.access$000(EventQueue.java:85)
            at java.awt.EventQueue$1.run(EventQueue.java:643)
            at java.awt.EventQueue$1.run(EventQueue.java:641)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
            at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
            at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
            at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
            at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
            at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
            at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
            at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
    Exception in thread "AWT-EventQueue-0" java.lang.Error: Application class musicdownloader.MusicDownloaderApp failed to launch
            at org.jdesktop.application.Application$1.run(Application.java:177)
            at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
            at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
            at java.awt.EventQueue.access$000(EventQueue.java:85)
            at java.awt.EventQueue$1.run(EventQueue.java:643)
            at java.awt.EventQueue$1.run(EventQueue.java:641)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
            at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
            at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
            at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
            at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
            at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
            at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
            at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
    Caused by: java.lang.NullPointerException 
```

我所有标记的事件也是

```
 jPanel1.removeAll(); 
```

第 89 行是

```
 jButton1.addActionListener(new ActionListener() { 
```

任何想法如何解决这个问题？我也在网上搜索以找到任何帮助，但我没有找到任何帮助。感谢所有答案。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:27:59.333

你初始化jButton1了吗？由于 NullPointerException 发生在第 89 行，因此 jButton1 可能为空。可以肯定的是，简单地尝试一下`System.out.println(jButton1);`，如果它打印出 Null，则意味着您没有正确初始化它。

我不知道是不是这样，但如果是这样，请避免`JButton jButton1 = null;`使用, 之类的变量声明`JButton jButton1;`，因为通过使用 null 初始化变量，您可以防止编译器在您忘记初始化对象时向您发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:31:47.473

你需要调试你的代码：

[基本的 Netbeans 调试](http://www.cs.uga.edu/~shoulami/sp2009/cs1301/tutorial/NetBeansDebuggerTutorial/NetBeansDebuggerTutorial.htm)

[使用 Netbeans 调试 Java 应用程序](http://manikandanmv.wordpress.com/2009/09/24/debugging-java-applications-with-netbeans/)

# php - 强制执行 RewriteBase / 时修改子文件夹中的重写规则

> ID：12800733
> 
> 赞同：1
> 
> 时间：2012-10-09T13:06:12.523
> 
> 标签：php, mod-rewrite

我正在尝试为我网站上的图像添加水印。它在我的本地测试 PC 上对我有用，但在托管上，他们强制执行

```
RewriteBase / 
```

这似乎使事情复杂了一点。

放在 /images/stories/virtuemart/product/ 文件夹中的 .htaccess 确实可以按预期工作，但我无法弄清楚修复它的方法。

一些最新版本是：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^images/stories/virtuemart/product/(.*)\.(jpeg|jpg)$ /watermark/watermark.php [QSA,NC] 
```

我也尝试将相同的内容放在根 .htaccess

在我的测试服务器上工作的原始版本没有 Rewritebase / 在根目录中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule \.(gif|jpeg|jpg)$ ../../../watermark/watermark.php [QSA,NC] 
```

我怀疑问题可能在于将 URI 与 watermark.php 相关联，或者可能需要在接收此请求的 php 中更改某些内容，例如这部分：

```
$path = $_SERVER['DOCUMENT_ROOT'].$_SERVER['REQUEST_URI'];
preg_match('@\.(gif|jpg|jpeg|png)$@i',$_SERVER['REQUEST_URI'],$m);
$ext = strtolower($m[1]);
$generated = CACHE.md5($_SERVER['REQUEST_URI']); 
```

或规则应该存储更多参数，例如：

```
RewriteCond %{REQUEST_URI}  ... 
```

任何帮助是极大的赞赏。

# ruby-on-rails - rails routing 显示操作嵌套资源

> ID：12800734
> 
> 赞同：6
> 
> 时间：2012-10-09T13:06:16.373
> 
> 标签：ruby-on-rails, resources, controller, routes, nested

是的，问题是，我创建了一个这样的嵌套资源：

```
resources :albums do 
  resources :elements
end 
```

并且 rake routes 命令显示：

```
album_element GET /albums/:album_id/elements/:id(.:format) elements#show 
```

因此，当我在 .../albums/1 时，我可以前往 .../albums/1/elements

这启动了元素控制器的索引操作，就好了。但是如果我将 index.html.erb 编辑为

```
<%= link_to 'Show', album_element_path %> 
```

我收到这样的错误：

```
Started GET "/albums/1/elements" for 176.221.47.67 at Tue Oct 09 14:25:39 +0200 2012
Processing by ElementsController#index as HTML
Parameters: {"album_id"=>"1"}
Rendered elements/index.html.erb within layouts/application (9.2ms)
Completed 500 Internal Server Error in 123ms

ActionController::RoutingError (No route matches {:controller=>"elements", :action=>"show"}):
app/views/elements/index.html.erb:29:in `_app_views_elements_index_html_erb___13604879__168097178'
app/views/elements/index.html.erb:18:in `each'
app/views/elements/index.html.erb:18:in `_app_views_elements_index_html_erb___13604879__168097178'
app/controllers/elements_controller.rb:7:in `index' 
```

所以它说没有路线匹配......但我实际上在我的 rake 路线中显示了它？我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T13:11:01.287

您需要为专辑元素路径提供两个必要的参数：

```
<%= link_to 'Show', album_element_path(@album, @element) %> 
```

# c++ - 带有输入无符号字符缓冲区 C++ 的 DeviceIoControl

> ID：12800738
> 
> 赞同：0
> 
> 时间：2012-10-09T13:06:25.133
> 
> 标签：c++, buffer, deviceiocontrol

我在使用`DeviceIOControl`将 128 字节缓冲区放入驱动程序时遇到问题，我使用以下代码：

```
int Initialize(unsigned char* public_signature, int size)
{
    int ret = DeviceIoControl( 
    DeviceFileHandle,
    2236440,
    public_signature,
    size,
    NULL,
    0,
    NULL,
    NULL);

    if(ret != 0)
        return 0;

    wprintf(L"Format message failed with 0x%x\n", GetLastError()); // always error 0x6!

    return 1;

} 
```

我总是收到 0x6 错误，我做错了什么？

**更新** 我的句柄创建功能：

```
int CreateFileHandle()
{
    DeviceFileHandle = CreateFile( L"\Device\test",
    GENERIC_WRITE,
    GENERIC_READ | GENERIC_WRITE,
    NULL,
    OPEN_EXISTING,
    0,
    0);
    if(DeviceFileHandle)
        return 0;
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:18:09.207

错误在 的第一个参数中`CreateFile`。在您的示例中，它将尝试打开文件，而不是设备。此外，您没有转义字符串中的反斜杠。`\t`和类似的被解释为 C++ 中的特殊字符。

设备名称应为`"\\\\.\\Device\\test"`.

# android - 显示键盘时调整 ListView 大小后 EditText 失去焦点

> ID：12800741
> 
> 赞同：1
> 
> 时间：2012-10-09T13:06:26.693
> 
> 标签：android, android-listview

我有一个 ListView 需要在显示键盘时手动调整大小。

这通过覆盖 onSizeChanged 方法并相应地更改视图的大小来工作。（感谢这篇文章[How to set size and layout in onSizeChanged?](https://stackoverflow.com/questions/6262265/how-to-set-size-and-layout-in-onsizechanged)）

但是，当列表视图的大小发生更改时，我单击的 EditText 失去了焦点，我无法输入任何文本。

编辑：我尝试设置之前具有焦点的 EditText 的焦点，但是，这并不总是有效，尽管该方法在调用请求焦点时返回 true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:16:14.360

在调整 ListView 大小后的 onSizeChanged() 中添加此行。

```
 editText.requestFocus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:16:55.473

使用 edittext.requestfocus() 方法：

```
requestFocus(); 
```

# java - java - 如何在函数返回之前等待调用某个回调方法？

> ID：12800744
> 
> 赞同：0
> 
> 时间：2012-10-09T13:06:40.370
> 
> 标签：java, cordova, callback

我正在写一个 phonegap 插件。我的代码大纲是这样的

```
public PluginResult execute(String action, JSONArray arg1, String arg2) {
      try{
        if (action.equals("authenticate")) {
           this.startlogin();
           return new PluginResult(PluginResult.Status.OK);
        }
        else {
            return new PluginResult(PluginResult.Status.INVALID_ACTION);
        }
       }catch(Exception e){}
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION); 

    } 
```

startlogin() 方法调用一个注册了回调方法的函数，该回调方法在某个事件后被调用。即 startlogin() 方法返回，但在异步事件发生后调用某个方法。

```
 public void startlogin(){

    login();//this has callback method
 } 
```

在我从执行方法返回之前如何等到该回调方法完成？java中最好的方法是什么？

PS：我无法更改执行方法原型，因为 phonegap 插件适用于执行方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:10:59.810

在我看来，您正在尝试将同步与异步混合......

你真正应该做的是让回调方法返回 PluginResult。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:10:17.410

最简单的方法：

```
if (this.startlogin()) ...

...

public boolean startlogin(){

    return login();
} 
```

# vsto - 在 VSTO 加载项中记录用户设置

> ID：12800745
> 
> 赞同：1
> 
> 时间：2012-10-09T13:06:44.057
> 
> 标签：vsto

有没有办法将客户端设置从插件使用本地存储到另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:21:15.527

这取决于您是希望设置与用户一起**漫游（***无论机器如何共享设置*）还是**依赖**机器（*因机器而异*）。请参阅[此相关的 SO 帖子，其中描述了 Outlook 存储的多种方式](https://stackoverflow.com/a/10175091/175679)。

如果您不使用 Outlook，[则始终可以利用`.settings`Keith 共享的文件](https://stackoverflow.com/questions/8332568/vsto-outlook-addin-need-to-save-settings-best-way)。

# php - 使用 php 获取 XML 属性的值

> ID：12800750
> 
> 赞同：0
> 
> 时间：2012-10-09T13:06:52.107
> 
> 标签：php, xml, xml-parsing, simplexml

我试图从一个属性中获取一个值并在一个数组中使用它来将它插入到 MySQL 表中。我的 XML 文件是：

```
 <?xml version="1.0"?>
<GetMatchingProductForIdResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductForIdResult Id="9780596515898" IdType="ISBN" status="Success">
<Products xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Product>
  <Identifiers>
    <MarketplaceASIN>
      <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
      <ASIN>B0026OR39Y</ASIN>
    </MarketplaceASIN>
  </Identifiers> 
```

并使用 php 我需要在 GetMatchingProductForIdResult 中提取 Id 的值。到目前为止，我的代码是这样的：

```
 $parsed_xml = ProductId_xml($isbn);
    $isbn13 =(string)$parsed_xml->GetMatchingProductProductForIdResult[0]->attributes();
echo $isbn13['Id']; die; 
```

即使我将它更改为 print_r 或 var_dump，我也没有从 echo 语句中得到任何结果。我也试过：

```
 $amazonResult = array(
                            'isbn' => $parsed_xml->GetMatchingProductProductForIdResult[0]['Id'], 
```

这也没有产生任何结果。我不知道从这里去哪里，任何帮助将不胜感激。

编辑：为了澄清这一点，每条记录的 Id 值都会改变。那么这次的“9780596515898”可能是下一条记录的Id="9780596312674"。我需要知道每一个是什么，这样我就可以将它们与我需要的其他信息一起插入到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:57:03.497

如果我关闭 XML，我可以访问属性 - 否则它所做的只是抛出错误。您可以访问所有属性，也可以通过 simplexml 单独访问：

```
$str = <<<XML
<?xml version="1.0"?>
<GetMatchingProductForIdResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductForIdResult Id="9780596515898" IdType="ISBN" status="Success">
<Products xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Product>
  <Identifiers>
    <MarketplaceASIN>
      <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
      <ASIN>B0026OR39Y</ASIN>
    </MarketplaceASIN>
  </Identifiers>
</Product>
</Products>
</GetMatchingProductForIdResult>
</GetMatchingProductForIdResponse>
XML;

$xml = simplexml_load_string($str);

foreach($xml->GetMatchingProductForIdResult->attributes() as $a => $b) {
    echo $a,'="',$b,"\"\n";
}

// Or access them directly:

echo $xml->GetMatchingProductForIdResult->attributes()->Id; 
```

**输出：**

```
Id="9780596515898" IdType="ISBN" status="Success" 9780596515898 
```

# objective-c - 'invalid context error 0x0'，在 iOS 6.0 中使用多字节键盘编辑 uitextfield

> ID：12800758
> 
> 赞同：8
> 
> 时间：2012-10-09T13:07:16.997
> 
> 标签：objective-c, ios6

我用 Xcode 4.5.1 更新了 iOS 6.0 SDK，在我的应用程序中使用多字节键盘（例如日文键盘）编辑 UITextField 时出现了无效的上下文错误 0x0。以下是错误：

```
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextSaveGState: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextDrawLinearGradient: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextFillRects: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextFillRects: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextFillRects: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextSaveGState: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextDrawLinearGradient: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextFillRects: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextFillRects: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct  9 21:46:44 example.com Example[2303] <Error>: CGContextFillRects: invalid context 0x0 
```

我试图创建新项目，但我遇到了这些错误。以下是新项目代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   // Override point for customization after application launch.
   self.window.backgroundColor = [UIColor whiteColor];
   [self.window makeKeyAndVisible];

   UITextField *foo = [[UITextField alloc] initWithFrame:CGRectMake(30, 30, 200, 50)];

   [self.window addSubview:foo];

   return YES;
} 
```

如果您使用美式键盘进行编辑，则不会出现错误。你知道如何避免这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T12:09:21.867

这个错误可以追溯到双击一个空的 uitextfield。这是iOS中的一个错误。将您的文本字段初始化为“”，错误将消失。

# php - 使用 PHP 和 jQuery 成功发布表单时如何显示警报？

> ID：12800760
> 
> 赞同：4
> 
> 时间：2012-10-09T13:07:28.627
> 
> 标签：php, jquery

jQuery modal 执行得很好，但是当表单被php成功执行时，我想显示警告消息时，我不知道我错过了什么？

```
$.post(
    'name.php', 
    { ime: ime, location: location }, 
    function(data){                     
        if (data.success) {
            alert("form posted!");
        }
        else {
            $("#dialog-form").dialog("open");
        } 
    },
    "json"
); 
```

==========================PHP============

```
if ($result == false) {
    echo json_encode(array('success' => false, 'result' => 0));
    exit;
}

echo json_encode(array('success' => true, 'result' => $result));
$sql2 = "DELETE FROM $names WHERE name='$ime'";
$result2 = mysql_query($sql2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:13:51.187

看起来好像 的值`data.success`没有返回为真或假（或像您期望的那样评估为布尔值）。

尝试：

```
$.post(
 'name.php', 
 { ime: ime, location: location }, 
function(data){                     
    if (data.success == 'true') {
        alert("form posted!");
    }
    else {
        $("#dialog-form").dialog("open");
    } 
},
"json" 
```

);

您还可以使用`FIDDLER`来查看从服务器返回的值。

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:13:50.093

成功有 3 个论据`success(data, textStatus, jqXHR)`

我相信你可能想要`textStatus`

```
.success: 
```

> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；**描述状态的字符串**；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。

```
$.post(
    'name.php', 
    { ime: ime, location: location }, 
    function(data, textStatus, jqXHR){                     
        if (textStatus == "success") {
            alert("form posted!");
        }
        else {
            $("#dialog-form").dialog("open");
        } 
    },
    "json"
); 
```

# html - CSS 页面布局，将文本保留在自己的 div 列中

> ID：12800761
> 
> 赞同：3
> 
> 时间：2012-10-09T13:07:34.343
> 
> 标签：html, css, layout

我有一个带有两个 div 的页面布局。它们都是 float:left ，因此显示为彼此相邻的列。我希望他们保持这种状态。但是，如果最右侧 div 中的文本太长，则整个文本会向下移动到最左侧列的下方。如果文本很短，也会发生这种情况，但我让浏览器窗口变小了。我想要的是长文本占用更多行，但仅在其自己的右列中。

CSS：

```
.left{float:left}
.right{float:left} 
```

HTML：

```
<div id="container">
    <div class = "left">
         <span>some text</span>
    </div>
    <div class = "right">
        <span>some long text....</span>
    </div>
</div> 
```

编辑：另外，左栏应该保持固定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:22:49.773

听起来你想做这样的事情：

[http://jsfiddle.net/VV4Hc/8/](http://jsfiddle.net/VV4Hc/8/)

外部容器指定了这两个 div 应该占据的宽度。如您所见，它们还具有百分比宽度，因此您可以更改容器的属性，而无需返回并更改 div。

警告的话，记得也要清除你的浮动，这样其他元素就不会被“抓住”在浮动中。为此，只需定义一个具有如下属性的元素`clear:both`：

```
.container {
  width: 1000px;
  margin: 0px auto; /* This will center the container on the page. */
 }
.left, .right {
   float: left; 
   width: 50%;
}
.clearfix {clear:both;}

<div class="container">
  <div class="left">...</div>
  <div class="right">...</div>
  <div class="clearfix"></div>
  <p>I won't get caught.</p>
</div> 
```

如果您希望为布局执行此操作，您可能需要考虑一个 CSS 框架，它可以根据指定的列数完美地衡量这些事情。看：

*   [引导](http://twitter.github.com/bootstrap/)/[踢腿](http://getkickstrap.com)
*   [960.gs](http://960.gs/)
*   [蓝图](http://www.blueprintcss.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:32:18.673

您可以为这些 div 设置位置，例如

```
.left{width: 50%; position:relative; top:0%; left:0%;}
.right{width: 50%; position:relative; top:0%; left:50%;} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-10T05:57:13.267

I was able to solve it with a table. When the window is made smaller, at first only the right column is made smaller and the words squeeze down on more lines until the column has disappeared. If the browser is made smaller than the width of the left column, then the left column starts disappearing, cutting off words. Works in my Chrome and IE although I don't know about older IE.

```
.td_right{vertical-align:top; max-width:300px;}
.td_left{vertical-align:top; min-width:300px; width:300}

<table >
    <tr> 
        <td class = "td_left">
            stuff here
        </td> 
        <td class = "td_right">
            stuff here 
        </td>
    </tr>
</table> 
```

# java - xpath 在 HtmlUnitDriver 中不起作用

> ID：12800766
> 
> 赞同：1
> 
> 时间：2012-10-09T13:07:49.983
> 
> 标签：java, htmlunit

我正在使用 XPath、HtmlUnitDriver 和 FirefoxDriver。

这是我单击登录按钮的 xpath。当我使用 XPath

```
//div[@id='mainPane']/form/table/tbody/tr[10]/td/a[2] 
```

单击登录按钮，然后它可以在 FirefoxDriver 中正常工作，但在 HtmlUnitDriver 中无法正常工作。我还启用和禁用了 HtmlUnitDriver 中的 javascript。但无法正常工作。

我收到错误：- 当我使用 HtmlUnitDriver 单击此登录按钮时，它不会重定向到下一页，但在 FirefoxDriver 中，它会重定向到下一页。这是我的代码：-

```
 HtmlUnitDriver driver = new HtmlUnitDriver(false);
 WebElement webElement = webDriver.findElement(By.xpath("//div[@id='mainPane']/form/table/tbody/tr[10]/td/a[2]"));
 webElement.click(); 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:12:43.653

正如@David Grant 建议的那样，您的问题可能与 Javascript 有关。在 HtmlUnitDrive 中启用您的 javascript -

```
HtmlUnitDriver driver = new HtmlUnitDriver(true); 
```

# spring - 用另一个上下文中的模拟版本替换一个上下文中的 spring bean

> ID：12800769
> 
> 赞同：11
> 
> 时间：2012-10-09T13:07:59.023
> 
> 标签：spring, testing, mocking, javabeans, context.xml

我正在编写一个集成测试，其中应用程序上下文 xml 在启动期间被初始化。测试类中有几个测试方法使用特定的 bean 'X'（已经在 xml 中定义）。我的实际要求是仅针对其中一种测试方法模拟 bean X。

在测试方法中：我尝试使用 ClassPathXMLApplicationContext 创建一个单独的应用程序上下文，其中只有模拟 bean 'M'。

现在我有两个应用程序上下文 (AC)：1\. 一个在测试用例启动期间创建（包含实际的 bean X）和 2\. 一个在测试方法中使用 ClassPathXMLApplicationContext 创建（它具有模拟 bean M）。

我想使用 AC:2 中的模拟 bean 定义“M”替换 AC:1 中的实际 bean 定义“X”。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T13:18:06.097

你可以 ：

*   如果您有 spring 3.1，请使用[Profile](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)注释。
*   使用[主要](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Primary.html)注释
*   使用[限定词](http://www.mkyong.com/spring/spring-filtering-components-in-auto-scanning/)
*   在 spring 上下文中自己连接 bean

我敢肯定还有更多选择。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-09T20:46:34.783

`ApplicationContext`除非您关闭它并再次刷新它，否则没有明确的方法可以在刷新中替换 aa bean 。

为了模拟它，常用的方法是使用一个`Proxy`要替换的 bean，并在运行时更改目标。

您可以使用框架 aop 支持类轻松完成此操作：

```
<bean id="realBean" class="RealClass" />
<bean id="mockBean" class="MockClass" />
<bean id="targetSource" class="org.springframework.aop.target.HotSwappableTargetSource">
    <constructor-arg ref="realBean" />
</bean>

<bean id="bean" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="targetSource" ref="targetSource" />
</bean> 
```

```
@Test
public void testWithMockBean() {
Object real = targetSource.swap(mock);
....
// do your test work
...
targetSource.swap(real);

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T17:23:59.540

创建一个 testApplicationContext

```
<beans>
    <import resource="classpath*:appContext.xml" />
    <bean id="mockbeanOfX" class=....../>
</beans> 
```

然后在您的测试用例中加载此测试应用程序上下文。现在您可以从应用程序上下文中获取模拟 bean 并将其传递到任何需要的地方。

# jquery - 水平无限滚动

> ID：12800771
> 
> 赞同：1
> 
> 时间：2012-10-09T13:08:05.050
> 
> 标签：jquery, horizontal-scrolling, infinite-scroll

我有一个水平图像列表，我希望在 div 中应用无限滚动。理想情况下，这只是窗口本身，但现在它是一个 div。

我认为这涉及对 Paul Irish 的无限滚动（？）的一点破解我知道我现在可以在 1.2 中将 localMode 设置为 true 以便它在 div 内工作，但我也知道（认为）我需要欺骗浏览器从“下一页”中思考内容。我不知道该怎么做。我已经搜索和搜索，现在我希望你们天才提供您的精彩想法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:10:35.410

如果您希望元素水平排列，您将需要一个提供`width`属性的容器。要使这种动态化，只需添加如下内容：

```
$(document).ready(function(){
  var totalWidth = 0;
  $('#container').children().each(function(){
    totalWidth += $(this).outerWidth();
  });
  $('#container').css('width', totalWidth);
}); 
```

如果您直接在您的下方使用该容器`body`并给您`body`一个`overflow:scroll`. 然后给两个容器，`body`以及`html`100% 的高度，这应该水平排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:49:48.113

Lazyload 正是我想要的。[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)。我在一个名为#image_list 的容器中有一个图像列表。

```
$(document).ready(function () {
    $("#image_list img").lazyload({
          effect : "fadeIn"

      });
}); 
```

这很不言自明。然后我没有做最好的解释工作的水平无限列表包含在这个 div 中：

```
#image_list {
 margin: 0 auto;
 white-space: nowrap;
 width: auto;
 overflow: auto;
 clear: both;
 position: relative;
} 
```

它实际上不是一个列表，因为 Firefox 拒绝不包装它！所以这是一个有无穷 td 的表行：

```
<table>
 <tbody>
  <tr>
   <td><img src="img1.jpg" /></td>
   <td><img src="img2.jpg" /></td>
        ...
   <td><img src="img34.jpg" /></td>
  </tr>
 </tbody>
</table> 
```

# jquery - 在 Ajax 调用中为参数创建重复值

> ID：12800772
> 
> 赞同：0
> 
> 时间：2012-10-09T13:08:15.337
> 
> 标签：jquery, jquery-ui, coldfusion

我正在尝试在调用 CFC 的表单上创建一个模式，以根据我在 Internet 上找到的示例和一些研究的组合来更新数据并返回结果。我已经或多或少地工作了，但是在定义我的参数时遇到了一个奇怪的问题，其中我传递的值作为我传递的值的逗号分隔字符串副本进入我的 CFC 函数。我的代码看起来像这样：

Javascript：

```
var amodal = $("##my-modal-form").dialog({
        bgiframe: true,
        modal: true,
        buttons: {
          'Update Data': function() { $("##modal-form-test").submit(); },
          Cancel: function() { $(this).dialog('close'); aform.resetForm(); }
       }
    });

submitHandler: function(form) {
            jQuery(form).ajaxSubmit({
                target: '##client-script-return-data',
                data: {
                    fullname: $('##fullname').val(),
                    email: $('##email').val() 
                },
                success: function() { $('##my-modal-form').dialog('close'); successEvents('##client-script-return-msg'); }
            });
        } 
```

冷融合：

```
<cffunction name="userModalTest" access="remote" output="false" returnformat="json">
    <cfargument name="fullname" type="any" required="true" default="" hint="unknown arg type" />
    <cfargument name="email" type="any" required="true" default="" hint="" />

    <cfset var testVar = '' />

    <cfset testVar = serializeJSON(arguments) />

    <cfreturn testVar />
</cffunction> 
```

当我传入我的文本字符串参数并转储结构时，我的全名和电子邮件参数是重复值，例如“全名：测试，测试”而不是“全名：测试”。我可以通过不定义 submitHandler 函数中的数据值或不定义 CFC 中的参数来阻止这一点，但据我了解，这些解决方案都不应该真正起作用，所以我不太明白发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:11:00.257

由于您正在提交表单，因此无需将`data`属性传递给`ajaxSubmit()`调用。

我认为这导致 ajax 提交提交一个名为`fullname`and的输入参数数组`email`。该数组在服务器中作为逗号分隔的字符串提交。

你可以删除`data`并尝试。

前任：

```
jQuery(form).ajaxSubmit({
    target: '##client-script-return-data',
    success: function() { $('##my-modal-form').dialog('close'); successEvents('##client-script-return-msg'); }
}); 
```

# c++ - visual studio 2008 解决方案发布版运行时致命错误

> ID：12800777
> 
> 赞同：0
> 
> 时间：2012-10-09T13:08:25.467
> 
> 标签：c++, debugging, visual-studio-2008, release, runtime-error

我有一个 Visual Studio 2008 解决方案，它由一些项目组成，并将 dll 与他们的标题一起使用。在调试版本中，它（解决方案）工作得非常好。在发布版本中它编译成功，但是在执行一些在 dll 文件中定义的函数时它失败了。

正如我所说，该解决方案在调试模式下运行良好，并且选项设置正确。试过关掉
优化，打开调试信息，也没有用。问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:56:42.337

我以前见过这种情况发生很多次。*几乎*在每一种情况下，问题都是在写入数组或其他数据结构时出现越界错误。在其他情况下，使用了未初始化的变量。

您的代码中有错误。这是肯定的。当您在调试设置下构建时，编译器会为您做很多事情来掩盖某些类型的问题。编译器将编写代码对一些东西进行零初始化，从而掩盖未初始化的变量问题。

我会尝试的第一件事是将警告级别提高到最高设置。无论如何，你应该一直这样做。这通常会揭示问题。只要确保*修复*编译器告诉你的问题。不要用`#pragma`s 或 chintzy 演员来掩盖他们。下一步通过您的代码来隔离问题。这可能既困难又耗时，但有一线希望。无论问题是什么，您重复该错误的可能性与识别和修复错误的时间和难度成反比。:)

# reference - 通过 TFS 构建服务执行时，MSBuild 找不到引用

> ID：12800778
> 
> 赞同：3
> 
> 时间：2012-10-09T13:08:31.077
> 
> 标签：reference, tfs, msbuild, continuous-integration

我有一个参考 Telerik 程序集的解决方案。参考版本已安装在构建服务器上。问题是持续集成构建始终成功，直到我在解决方案和构建服务器上升级 Telerik 程序集。构建现在失败给出经典：

> 无法解析此引用。

我检查了我的解决方案，所有内容都设置为引用特定版本。最令人惊讶的是，如果我在构建服务器上本地打开解决方案，一切都将毫无问题地构建......这意味着 Telerik 程序集已经以某种方式发布，但是由于未知原因，当调用 MSBuild 来编译解决方案时通过构建服务，它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:13:41.757

更新到 Q3 版本后，我遇到了同样的问题。

为了解决这个问题，我构建了将 Logging Verbosity 设置为 Diagnostic 的解决方案，发现 MSBuild 从不费心去查看 Telerik 文件夹。

因此，为了在构建中包含该文件夹，我们只需添加一个 MSBuild 参数即可：/p:ReferencePath="C:\Program Files\Telerik\RadControls for WPF Q3 2012\Binaries\WPF40"

它可能不是最好的，每次更新 RadControls 时都需要更新，但它确实有效。

我们在 x86 安装上运行构建服务器，因此 Telerik 位于 C:\Program Files 下，但如果您在 x64 上运行，它位于 C:\Program Files(x86) 下，因此如果您在两个 x64 上运行多个构建服务器和 x86 安装，您必须同时指定两个路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:58:24.293

我通常发现将引用的程序集复制到解决方案中并从那里引用它们会更好。然后构建服务器和其他开发人员无需担心安装该特定版本，您可以支持多个项目运行不同版本的组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:19:58.680

尝试删除-然后-添加对更新的 dll 的引用 - 如果与引用的程序集有任何差异，您可以在 proj 文件中查看。

为 msbuild 启用详细\诊断模式（/v:diag 命令行键）并检查构建日志。诊断模式有关于引用库搜索过程的非常详细的输出。

# php - 捕获 mysql pdo 错误

> ID：12800783
> 
> 赞同：1
> 
> 时间：2012-10-09T13:08:46.460
> 
> 标签：php, mysql, pdo

我正在努力掌握 pdo。我有以下功能：

```
 function get_editusers($db)  
  {    
    $result = $db->query("SELECT firstname, middlename,surname,fullname,gender, birthdate,homelanguage,department,employeetype,employeestatus,idnumber FROM Persons where employeeid='$employeeid'"); 
    return $result; 
  } 
  $useredit = get_editusers($db); 
```

我如何知道查询是否正确运行？如果不成功，我希望执行某个操作，但不确定如何“捕获”错误。

```
if($useredit="failed"){ action if failed} else { action if true} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:15:28.567

```
function get_editusers($db){    
    try {
         $result = $db->query("SELECT firstname, middlename,surname,fullname,gender, birthdate,homelanguage,department,employeetype,employeestatus,idnumber FROM Persons where employeeid='$employeeid'"); 
         return $result; 
    } catch(PDOException $ex) {
         return $ex;
    }
}

$result = get_editusers($db);
if(isset($result->errorInfo)){
    die($result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:19:46.100

一个简单的 try/catch 块就可以了：

```
 try{
        $result = $db - > query("SELECT firstname, middlename,surname,fullname,gender, birthdate,homelanguage,department,employeetype,employeestatus,idnumber FROM Persons where employeeid='$employeeid'");
    return $result;
    }
    catch(PDOException $exception){
        return $exception;
    } 
```

或者，如果您只想返回真/假值而不是特定异常：

```
 $result = $db -> query("SELECT firstname, middlename,surname,fullname,gender, birthdate,homelanguage,department,employeetype,employeestatus,idnumber FROM Persons where employeeid='$employeeid'");

    if (!$result){
        return false;
    }
    else{
        return true;
    }
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:15:35.953

PDO有一个函数，这个函数检索错误信息。也许它有帮助。

[PDO 错误信息](http://php.net/manual/en/pdo.errorinfo.php)

# r - 如何在 xtable.table 输出中获取暗名？

> ID：12800784
> 
> 赞同：9
> 
> 时间：2012-10-09T13:08:56.427
> 
> 标签：r, xtable

我想在我的`xtable`输出中标记尺寸。`xtable`但是，即使我手动指定维度标签，table 方法也不会输出维度标签`table`：

```
set.seed(10)
d <- data.frame(x=sample(1:4),y=sample(1:4))
tb <- with(d, table(d,dnn=c("Xs","Ys")))
> tb
   Ys
Xs  1 2 3 4
  1 0 0 0 1
  2 0 1 0 0
  3 1 0 0 0
  4 0 0 1 0
> xtable(tb)
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Tue Oct  9 09:06:10 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrrrr}
  \hline
 & 1 & 2 & 3 & 4 \\ 
  \hline
1 &   0 &   0 &   0 &   1 \\ 
  2 &   0 &   1 &   0 &   0 \\ 
  3 &   1 &   0 &   0 &   0 \\ 
  4 &   0 &   0 &   1 &   0 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

检查代码`xtable.table`不会产生任何秘密。除了使用 multirow 手动构建它们之外，还有什么方法可以标记尺寸吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:12:57.013

包装的一种解决方案`tables`：

```
library(tables) 

tblr <- tabular((Xs = as.factor(x)) ~ (Ys = as.factor(y)), data = d)
latex(tblr)

\begin{tabular}{lcccc}
\hline
 & \multicolumn{4}{c}{Ys} \\ 
Xs  & 1 & 2 & 3 & \multicolumn{1}{c}{4} \\ 
\hline
1  & $0$ & $0$ & $0$ & $1$ \\
2  & $0$ & $1$ & $0$ & $0$ \\
3  & $1$ & $0$ & $0$ & $0$ \\
4  & $0$ & $0$ & $1$ & $0$ \\
\hline 
\end{tabular} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T18:32:37.627

这不会根据维度的名称创建多行或多列标题，但至少可以显示它们。

```
print(xtable(format(ftable(tb))), 
      include.rownames=FALSE, include.colnames=FALSE,
      sanitize.text.function = function(x) {gsub('"',"",x)}) 
```

这使

```
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Tue Oct 09 11:28:33 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{llllll}
  \hline
  \hline
     & Ys & 1 & 2 & 3 & 4 \\ 
  Xs &      &     &     &     &     \\ 
  1  &      &   0 &   0 &   0 &   1 \\ 
  2  &      &   0 &   1 &   0 &   0 \\ 
  3  &      &   1 &   0 &   0 &   0 \\ 
  4  &      &   0 &   0 &   1 &   0 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

您也可以在“正确”位置恢复水平线：

```
print(xtable(format(ftable(tb))), 
      include.rownames=FALSE, include.colnames=FALSE,
      sanitize.text.function = function(x) {gsub('"',"",x)},
      hline.after = c(-1, 2, nrow(tb)+2)) 
```

给予

```
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Tue Oct 09 11:29:21 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{llllll}
  \hline
      & Ys & 1 & 2 & 3 & 4 \\ 
  Xs &      &     &     &     &     \\ 
   \hline
1  &      &   0 &   0 &   0 &   1 \\ 
  2  &      &   0 &   1 &   0 &   0 \\ 
  3  &      &   1 &   0 &   0 &   0 \\ 
  4  &      &   0 &   0 &   1 &   0 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

# windows-7 - 处理 Windows 7 Aero 主题上的卸载表单

> ID：12800788
> 
> 赞同：0
> 
> 时间：2012-10-09T13:09:17.970
> 
> 标签：windows-7, vb6, aero

> **可能重复：**
> [禁用对对话框的航空淡入效果](https://stackoverflow.com/questions/3897070/disable-aero-fade-in-effect-on-dialog)

当用户在表单上按 OK 时，我正在尝试截取应用程序的屏幕截图。当用户按下 OK 时，表单应该被卸载，然后截取 MDI 表单的屏幕截图。

但是，使用 Windows 7 Aero 主题时，表单不会立即消失，而是会淡出。所以截屏的代码发生在表单完全消失之前。

有什么方法可以让代码停止，直到表单 100% 消失。我曾想过睡觉，但希望有更优雅的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:16:25.950

您可以`DwmSetWindowAttribute()`使用`DWMWA_TRANSITIONS_FORCEDISABLED`属性调用。这应该让它立即消失。

在我的情况下，我在显示一个消息框后截屏，所以我不得不退回到 200ms `Sleep()`。

# lisp - 每个级别上的原子数，Scheme

> ID：12800789
> 
> 赞同：1
> 
> 时间：2012-10-09T13:09:20.077
> 
> 标签：lisp, scheme

请帮我做一个关于该计划的简单练习。

> 编写函数，返回列表中每个级别的原子数。例如：
> 
> (a (b (c (de (f) k 1 5) e))) –> ((1 1) (2 1) (3 2) (4 5) (5 1))

我的解决方案：

```
(define (atom? x)
  (and (not (pair? x)) (not (null? x))))
(define (count L)
  (cond ((null? L) 0)
        ((pair? (car L))
         (count (cdr L)))
        (else
         (+ 1 (count (cdr L))))))
(define (fun L level)
  (cons 
   (list level (count L))
   (ololo L level)))
(define (ololo L level)
  (if (null? L)
      '()
      (if (atom? (car L))
          (ololo (cdr L) level)            
          (fun (car L) (+ level 1)))))
(fun '(a (b (c (d e (f) k 1 5) e))) 1) 
```

它工作正常，但没有给出这个列表的正确答案：

```
(a (b (c (d e (f) (k) 1 5) e))) 
```

是：

```
((1 1) (2 1) (3 2) (4 4) (5 1)) 
```

但是我们假设“f”和“k”在一个层次上，答案必须是：

```
((1 1) (2 1) (3 2) (4 4) (5 2)) 
```

我应该如何编辑代码以使其正常工作？

* * *

UPD（29.10.12）：我的最终解决方案：

```
(define A '(a (b (c (d e (f) k 1 5) e))))

(define (atom? x)
  (and (not (pair? x)) (not (null? x))))

(define (unite L res)
  (if (null? L) (reverse res)
      (unite (cdr L) (cons (car L) res))))

(define (count-atoms L answ)
  (cond ((null? L) answ)
        ((pair? (car L))
         (count-atoms (cdr L) answ))
        (else
         (count-atoms (cdr L) (+ answ 1)))))

(define (del-atoms L answ)   
  (cond ((null? L) answ)
        ((list? (car L))
         (begin
         (del-atoms (cdr L) (unite (car L) answ))))
        (else
         (del-atoms (cdr L) answ))))

(define (count L)
(define (countme L level answ)
  (if (null? L)  (reverse answ)
      (countme (del-atoms L '()) (+ level 1) (cons (cons level (cons (count-atoms L 0) '())) answ))))
  (countme L 1 '()))

(count A) 
```

对此你能说什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:55:47.697

你知道如果你运行它会得到什么吗？

```
(fun '(a (b (c (d e (f) k 1 5) e)) (a (b (c)))) 1) 
```

你得到这个：

```
((1 1) (2 1) (3 2) (4 5) (5 1)) 
```

我在右侧添加的整个额外嵌套结构已被忽略。这就是为什么...

函数的每次递归都会做两件事：

1.  计算当前“级别”的所有原子
2.  向下移动直到找到一个成对的 s 表达式（嗯，不是原子）

一旦它找到一个嵌套对，它就会调用它自己。等等

当**fun**从第一个嵌套对返回时， **oLoLo**会发生什么？为什么，它回来了！它不会**继续**在列表中查找另一个。

 ****您的函数永远不会在任何级别找到超过第一个列表。如果是这样，您会怎么做呢？将该级别的第一个列表中的计数添加到第二个列表中？您需要仔细考虑如何通过包含多个嵌套列表的列表完全递归**，以及**如何在每个级别保存信息。有不止一种方法可以做到这一点，但你还没有找到任何一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:56:27.420

请注意，根据您的实现，此处使用的库可能需要以其他方式导入。可能很难找到必须导入的方式以及要使用的函数的确切名称。`filter`有些人会把它当作`reduce-left`代替。`require-extension`可能是也可能不是Guile特有的，我真的不知道。

```
(require-extension (srfi 1))
(define (count-atoms source-list)
  (define (%atom? x) (not (or (pair? x) (null? x))))
  (define (%count-atoms source-list level)
    (if (not (null? source-list))
        (cons (list level (count %atom? source-list))
                (%count-atoms (reduce append '()
                       (filter-map
                        (lambda (x) (if (%atom? x) '() x))
                        source-list)) (1+ level))) '()))
  (%count-atoms source-list 1)) 
```

当然，正如我之前提到的，最好使用哈希表来做到这一点。使用列表进行操作可能会产生一些教学效果。但我强烈反对那种让你写出本质上糟糕的代码的说教效果。****

# java - Cassandra：如何从集群中获取所有主机？

> ID：12800790
> 
> 赞同：3
> 
> 时间：2012-10-09T13:09:20.913
> 
> 标签：java, cassandra

是否有可能通过客户端 API 从 cassandra 集群中获取所有主机。我知道我们可以使用[nodetool](http://wiki.apache.org/cassandra/NodeTool)从控制台调用所有节点，并使用 NodeCmd 进行 JMX 访问以实现相同的功能，但我只需要主机和 ips 的列表，例如[Hector Client API的 ConnectionPool](https://github.com/hector-client/hector)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:16:43.590

您可以调用 describe_ring Thrift 方法，或者（在 1.2 中）`SELECT * FROM system.peers`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T11:39:50.007

在 Java 驱动程序中，信息可通过[`cluster.getMetadata().getAllHosts()`](https://docs.datastax.com/en/drivers/java/2.0/com/datastax/driver/core/Metadata.html#getAllHosts--).

其他驱动程序应该具有基本相同的 API，遵循它们的语言约定。

# django - 带有嵌套标记的 Django 国际化

> ID：12800791
> 
> 赞同：0
> 
> 时间：2012-10-09T13:09:24.267
> 
> 标签：django, localization, internationalization

我正在使用 Django。我想让以下标记可翻译：

```
You have <span class="blah">a flower</span> in your inbox. 
```

我会在翻译文件中有以下短语：

1.  “您的收件箱中有 {name}。”
2.  “一朵花”

当然，我不想在我的翻译文件中添加标记，但它应该出现在上面的网页中。

例如，在法语中，这将是：

```
Vous avez <span class="blah">une fleur</span> dans votre boite aux lettres. 
```

我找不到如何干净地实现这一目标。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T13:22:52.973

你看过[国际化：在模板代码中](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-template-code)

你可以这样做：

```
{% trans "You have " %} <span class="blah">{%trans "a flower" %} </span> {%trans " in your inbox." %} 
```

您还可以使用`{% blocktrans %} ... {%endtblockrans%}`标记要翻译的块。

# javascript - AngularJS：自定义字符串序列化的2路绑定

> ID：12800792
> 
> 赞同：2
> 
> 时间：2012-10-09T13:09:26.770
> 
> 标签：javascript, angularjs

# 简短的问题：

如何以编辑字符串更新模型的方式创建`<input type="text">`包含对象的自定义格式字符串序列化的对象，反之亦然？

我认为 AngularJS 的指令是要走的路，但我无法确定它。

# 长问题：

## 前传

我有一个对象，它是我的应用程序的“主模型”。它可以序列化为特定格式的字符串：

1.  它有 2-3 个属性，其序列化由“;”连接 （如果缺少第三个，则没有尾随“;”）

2.  属性 2 和 3 是对象列表，并通过用“，”连接这些对象进行序列化。

3.  对象的序列化只是它们的字符串属性之一，或者它们之间有两个“x”。

所以我有一个构造函数（接受规范字符串）和一个`toString`函数。下列的; 后者为清楚起见：

```
World.prototype.toString = function() {
    var spec = [];

    spec[0] = this.version;
    spec[1] = this.layers.map(function(layer) {
        var c = (layer.c > 1) ? layer.c + 'x' : '';
        return c + layer.id; //e.g. 'T' or '2xT'
    }).join(',');

    //spec[2] in python: ','.join(option.id for option in options if option.checked)

    var options = this.options.filter(function(option) {
        return option.checked;
    });
    if (options.length > 0)
        spec[2] = options.map(function(option) {
            return option.id;
        }).join(',');

    return spec.join(';');
}; 
```

我尝试使用的指令看起来如此，但`$watch`只有一次触发。

```
angular.module('layersApp', []).directive('spec', function() {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {
            scope.$watch('world', function(val) {
                element.val(val.toString());
                console.log('object updated', element.val());
            }, true);
            element.blur(function(e) {
                scope.world = new World(element.val());
            });
        }
    };
}); 
```

## 实际长问题

我想要的是一种简单的方法来完成这项工作，

```
<input type="text" data-ng-model="theWorld" spec> 
```

上面显示的自定义指令在哪里`spec`，设置双向绑定

## 外表

如果这会导致像这样使用通用的“序列化”指令，那就太棒了：

```
<input type="text" data-serialization="string2Foo, foo2String" data-ng-model="foo"> 
```

它将查找对象`foo`和函数`string2Foo`并`foo2String`设置自定义（反）序列化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:14:20.707

我认为您可以使用`$parsers`控制器`$filters`。`ngModel`这是执行此操作的最简单示例。 [http://plnkr.co/edit/13PJN2](http://plnkr.co/edit/13PJN2)

添加验证也应该很容易。

我试图让它接受来自父范围的自定义序列化程序，但没有这样做。不确定。

# python - 在 Python 中将本地服务器上一个目录中的多个文件传输到远程服务器上的不同目录

> ID：12800795
> 
> 赞同：1
> 
> 时间：2012-10-09T13:09:30.767
> 
> 标签：python, ssh, sftp, paramiko

Informatica 服务器上的目录中有一些文件。我需要根据文件名将这些文件传输到另一台服务器到不同的目录中。

假设有 2 个文件，`a.dat_1`并且位于Informatica 服务器上的`b.dat_2`一个目录中。`low`

我需要将此`low`目录传输到另一台服务器上，文件`a.dat_1`转到一个目录，`local`然后`b.dat_2`转到另一个名为`local2`. 这需要在 Python 中完成。

我使用 Paramiko 进行简单的传输，但没有使用目录。而不是在 local 和 local2 等单独的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:15:43.110

鉴于此 SO [Directory 在 paramiko 上传输](https://stackoverflow.com/questions/4409502/directory-transfers-on-paramiko)；您将无法将目录复制为批量操作。

如果是我，我会创建一个临时文件夹并首先将源文件复制到与您的目标要求兼容的目录结构中。然后按照[yakxxx](https://stackoverflow.com/users/1333325/yakxxx)的建议压缩它们，使用 Paramiko SFTP 通过网络发送压缩文件，并在另一端使用 Paramiko SSH 解压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:05:34.120

我每天为传输文件做类似的事情。正如 yakxxx 建议的那样，我压缩文件然后传输。我所做的示例（在 Windows 机器上）：

```
import zipfile
from glob import glob as gg

files = gg('path*.txt')
# open zip file (create it, or open if already exists)
zFile = zipfile.ZipFile('FileName.zip','w') 

# zip files on local machine
[zFile.write(r,r,zipfile.ZIP_DEFLATED) for r in files] 
```

或者，如果 zipfile 已经存在并且您想要添加新文件。

```
zFile = zipfile.ZipFile('FileName.zip','a')

# List files already zipped.  
done = zipfile.ZipFile('FileName.zip','r').namelist()

# zip file into zip file.  
[zFile.write(r,r,zipfile.ZIP_DEFLATED) for r in files if r not in done] 
```

现在通过 paramiko 将此 zip 文件推送到您的远程计算机。

# ---------------

编辑

仅供参考，在写入 zip 文件时，您需要小心。我写这个假设您在包含您要压缩的文件的目录中运行。如果不是，则需要使用：

```
import os
zFile.write(r,os.path.basename(r),zipfile.ZIP_DEFLATED) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:15:22.173

您可以`tar`从您的目录中创建一个存档。为此使用 shell 命令

```
tar -cvf archive_name.tar directory_name 
```

然后将此档案转移到另一台机器`untar`上：

```
tar -xvf archive_name.tar 
```

您还可以在 tar 文件中使用 gzip 或其他压缩器，以加快传输速度。

# php - 如何按标签名称删除一个元素，其中包含所有元素

> ID：12800811
> 
> 赞同：0
> 
> 时间：2012-10-09T13:10:27.293
> 
> 标签：php, xml, removeclass

我想在 php 中使用 dom removeChild 函数来删除标签之间的所有内容。

我的 xml 看起来像

```
<root>
  <element>text</element>

  <remove>
    text
    <morexml>text</morexml>
  </remove>
</root> 
```

现在我想删除标签，包括它的整个内部。我该怎么做呢？我没有头绪。我正在尝试使用我发现的唯一 dom 函数：removeChild。

删除后，它必须如下所示：

```
 <root>
      <element>text</element>

 </root> 
```

有没有一个 php dom 函数可以做到这一点？我在 google 或 stackoverflow 上找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:26:47.490

```
$dom = new DOMDocument;
$dom->loadXML($xml);
$dom->getElementsByTagName('root')->item(0)
   ->removeChild($dom->getElementsByTagName('remove')->item(0)); 
```

不过，这是非常具体的。如果您需要更多通用性，可以使用 XPath：

```
foreach ($xpath->query('//remove') as $node) {
   $node->parentNode->removeChild($node);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:13:38.793

您可以使用 XPath 并通过 XPath 删除节点。

[使用 DOM 和 XPath 从站点地图文件中删除节点](https://stackoverflow.com/questions/4752942/use-dom-and-xpath-to-remove-a-node-from-a-sitemap-file)

[PHP SimpleXML - 删除 xpath 节点](https://stackoverflow.com/questions/2442314/php-simplexml-remove-xpath-node)

Stackoverflow 上有很多帖子。也许你应该先在这里搜索。

# c# - 在 2 个侦听器之间桥接异步全双工 TCP 通信

> ID：12800813
> 
> 赞同：2
> 
> 时间：2012-10-09T13:10:32.830
> 
> 标签：c#, sockets, asynchronous, tcp

**我需要一个 C# 层来帮助在两个正在侦听的 TCP 端口之间交换数据。**

例如，有一个监听端口@192.168.1.2::5555 和另一个监听端口@192.168.1.4::6666。

我能够使用 socket.connect 建立与两个侦听器的连接我在创建 2 个线程期间感到困惑 1> Sock1.read()->convert to bytes ->sock2 .write() 2> Sock2.read() -> 转换为字节 -> Sock1.write()

我认为这是进入无限循环。有没有更好的方法通过建立到两个端口的连接在两个**监听端口之间交换数据包？**

我必须实现一个方法

```
Private void ExchangePackets(IpEndpoint ipe1,IpEndpoint ipe2)
{
//code here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:39:34.577

它可以是这样的：（未测试）

```
void ExchangePackets(IPEndPoint ipe1, IPEndPoint ipe2)
{
    TcpClient tcp1 = new TcpClient();
    tcp1.Connect(ipe1);

    TcpClient tcp2 = new TcpClient();
    tcp2.Connect(ipe2);

    Task.Factory.StartNew(() => ByPass(tcp1, tcp2), TaskCreationOptions.LongRunning);
    Task.Factory.StartNew(() => ByPass(tcp2, tcp1), TaskCreationOptions.LongRunning);
}

void ByPass(TcpClient tcp1, TcpClient tcp2)
{
    using (tcp1)
    using (tcp2)
    {
        Stream s1 = tcp1.GetStream();
        Stream s2 = tcp2.GetStream();
        byte[] buf = new byte[0x10000];

        int len = s1.Read(buf, 0, buf.Length);
        while (len > 0)
        {
            s2.Write(buf, 0, len);
            len = s1.Read(buf, 0, buf.Length);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:00:02.793

$终于实现了:-) $

```
 private void Form1_Load(object sender, EventArgs e)
    {
        RoutingClient=new TcpClient("127.0.0.1",5765);
        ServerClient = new TcpClient("127.0.0.1", 5766);
        rcStream = RoutingClient.GetStream();
        ScStream = ServerClient.GetStream();
        //start 2 threads
        Thread t1 = new Thread(()=>ExchangePackets(rcStream,ScStream));
        t1.Start();
        Thread t2 = new Thread(() => ExchangePackets(ScStream, rcStream));
        t2.Start();
    }

    private  static void ExchangePackets(NetworkStream FirstStream, NetworkStream SecondStream)
    {
        try
        {
            while (true)
            {
                if (FirstStream.CanRead)
                {
                    byte[] myReadBuffer = new byte[1024];
                    StringBuilder myCompleteMessage = new StringBuilder();
                    MemoryStream ms = new MemoryStream();
                    int numberOfBytesRead = 0;
                    int TotalBytesRead = 0;
                    // Incoming message may be larger than the buffer size. 
                    do
                    {
                        numberOfBytesRead = FirstStream.Read(myReadBuffer, 0, myReadBuffer.Length);
                        ms.Write(myReadBuffer, TotalBytesRead, numberOfBytesRead);
                        myCompleteMessage.AppendFormat("{0}", Encoding.ASCII.GetString(myReadBuffer, 0, numberOfBytesRead));
                        TotalBytesRead = TotalBytesRead + numberOfBytesRead;
                    }
                    while (FirstStream.DataAvailable);
                    MessageBox.Show("You received the following message : " +
                                                 myCompleteMessage);
                    if (SecondStream.CanWrite)
                    {

                        byte[] myWriteBuffer = ms.ToArray();
                        SecondStream.Write(myWriteBuffer, 0, myWriteBuffer.Length);
                    }
                    else
                    {
                        MessageBox.Show("Sorry.  You cannot write to this NetworkStream.");
                    }
                }
                else
                {
                    MessageBox.Show("Sorry.  You cannot read from this NetworkStream.");
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Routing to Server:" + ex.Message);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:13:42.233

**编辑**：仔细检查后，我认为我的回答不适合您的情况。您的问题描述了许多可能阻止您以这种方式实现它的固定约束。不过，我会将我的答案留给其他人，因为我确实认为这通常是正确的方法。

> 有没有更好的方法通过建立到两个端口的连接在两个监听端口之间交换数据包？

你不需要重新发明轮子:)

您可以使用[WCF使用](http://msdn.microsoft.com/en-us/library/ms731082.aspx)[TCP 传输](http://msdn.microsoft.com/en-us/library/ms733769.aspx)创建[全双工](http://msdn.microsoft.com/en-us/library/ms731064.aspx)服务吗？

# php - Yii 删除多个活动记录

> ID：12800815
> 
> 赞同：4
> 
> 时间：2012-10-09T13:10:54.337
> 
> 标签：php, mysql, transactions, yii

我正在寻求一些代码建议。我有两个相互依赖的模型。当其中一个模型被删除时，我想确保删除数据库中的两条记录。

我使用外键在一个方向上处理这个问题，所以如果父级被删除。但是由于这些行都相互依赖，我需要在孩子身上发生相同的功能。

在子模型中，我重载了 delete 方法，所以它看起来像这样：

```
 public function delete() {

    $cameraTransaction = $this->dbConnection->beginTransaction();

    try
    {
        $this->ftpuser->delete();
        if($this->beforeDelete())
        {
            $result=$this->deleteByPk($this->getPrimaryKey())>0;
            $this->afterDelete();
        }
        $cameraTransaction->commit();
    }
    catch(Exception $e) // an exception is raised if a query fails
    {
        $cameraTransaction->rollBack();
    }

} 
```

我已经测试过了，这似乎运作良好。我想知道专家/大师是否可以确认我是否做对了:)

谢谢

艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:38:19.440

我认为你做得对。你可以让它更通用。

每个模型都定义了关系，使一些（或全部）关系可删除。您必须将它们（以某种方式）与当前记录一起标记为可删除。

我会在模型中定义一个新函数`relations()`。

```
function deletableRelations() {
    return array('ftpuser', 'childs', .....);
} 
```

并定义一些通用函数（请在此函数中包含**数据库事务。）**

```
function DeleteRelationships($model) {
    foreach( $model->deletableRelations() as $relation ) {
        if( $model->$relation == null) continue;

        if( is_array($model->$relation)) {
            foreach( $model->$relation as $relRecord ) {
                $relRecord->delete();
            }
        }
        else {
            $model->$relation->delete();
        }
    }
} 
```

这个通用功能可以用于您的任何模型。 **确保**此处不会发生递归（即父级删除子级......但子级也尝试删除父级。**）**

# javascript - Pixel 2 CM 转换Javascript

> ID：12800821
> 
> 赞同：0
> 
> 时间：2012-10-09T13:11:02.887
> 
> 标签：javascript, dpi

我必须使用 javascript 将 px 转换为 cm

oneCM= 37.795276 每次都是真的吗？

DPI 在这里的作用是什么？

如果是显示器上的变量 CM（因素 DPI）我们如何找到 DPI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:47:04.100

你想要DPI还是PPI？- DPI 用于打印，PPI 用于屏幕。

如果您谈论的是屏幕上图像或网页的“真实”大小，我们谈论的是 PPI。常见的 PC 屏幕大约有。80ppi，macbook pro有220ppi。

如果你想转换这些，你首先必须将你想要的尺寸从厘米转换为英寸，然后将它与想要的 ppi 相乘。

```
1cm = 0.39inches
0.39inches * 80dpi = 31.5px 
```

反之亦然：

```
900px / 80ppi = 11.25inches
11.25inches = 28.575cm 
```

同样适用于 DPI 进行打印。您必须知道您的打印机的 DPI（普通打印机有 72dpi，商业打印机有 150 - 600dpi）。

# c++ - 带有 CWebBrowser2 -> ChromeFrame -> HTML5 应用程序的 C++ (MFC) 应用程序，如何将点击事件从 HTML5 获取到 C++ 应用程序？

> ID：12800822
> 
> 赞同：0
> 
> 时间：2012-10-09T13:11:02.913
> 
> 标签：c++, mfc, google-chrome-frame

我们有一个旧版 C++ (MFC) 应用程序。它的一部分承载了一个 CWebBrowser2 对象，我们在其中导航到一个 url，这是我们正在开发以添加到我们的应用程序中的一个新模块。该模块是一个 HTML5 应用程序。由于 CWebBrowser2 使用 IE（当前为 IE8），我们传递给它的 URL 会加载 Chrome Frame 并传递给另一个 URL，即我们的模块。

所以，url 是这样的（注意：用户不能输入这个，它是由我们每个站点配置的）：

```
http://server/ChromeFrameWrapper.htm?http://server/Module.htm?Param1=something&Param2=somethingElse 
```

在 ChromeFrameWrapper.htm 中，我们有可以获取 url 的代码，取第一个 ? 并将 chromeFrame.src 设置为此，因此我们的模块很好地显示在我们的 C++ 应用程序中。

现在的问题。在这个 HTML5 模块中，我们有一些导航按钮（注意：如果需要，它可以是一个锚点）。我们想要发生的是当用户单击这些按钮之一时，主应用程序（C++ MFC 应用程序）会收到单击通知。由于有几个按钮，我们需要知道它是哪个按钮，因为我们将根据点击的内容导航到 C++ 应用程序中的不同位置（我们确实有这样做的原因，这只是我们完全替换 C++ 应用程序的第一步）。

在 C++ 应用程序中，我能够获取 IHTMLDocument2 对象和标签集合，但这是针对 ChromeFrameWrapper HTML 的。到目前为止，我已经能够做到这一点。

1.  是否有可能连接一些东西，以便我们的 C++ 应用程序能够接收来自 HTML5 模块的点击事件？
2.  如果是这样，怎么做？我被困住了，找不到任何涉及 Chrome Frame 托管 HTML 和事件的示例。使用 MSHTML 是正确的方式，还是有别的方法？

这是 ChromeFrameWrapper.htm 的 SCRIPT 和主要 HTML。请注意，我们正在尝试证明它有效，因此除非它解决了我的问题，否则没有代码批评。

感谢您的帮助和洞察力。

```
<SCRIPT type="text/javascript"> 
function GetChromeFrame() {
    var chromeFrame = window.document.ChromeFrame
    return chromeFrame;
}

function onLoad() {
    var theUrl = window.location.href;

    // just grab the arguments and pass them as is
    var chromeFrameSource = GetArgumentsFromUrl(theUrl);  

    var chromeFrame = GetChromeFrame();
    chromeFrame.src = chromeFrameSource;
}

function GetArgumentsFromUrl(theUrl)
{
    if(theUrl.indexOf("?") != -1)
    {
        return theUrl.substring(theUrl.indexOf("?") + 1);
    }
    return "";
}
</SCRIPT>

<BODY onload="onLoad();">
<center>
<OBJECT ID="ChromeFrame" WIDTH=1060 HEIGHT=800 CODEBASE="http://www.google.com" CLASSID="CLSID:E0A900DF-9611-4446-86BD-4B1D47E7DB2A">
    <PARAM NAME="src" VALUE="http://www.google.com" />
    <embed ID="ChromeFramePlugin" NAME="ChromeFrame" SRC="http://www.google.com" TYPE="application/chromeframe"/>
</OBJECT>
</center>
</BODY> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:51:20.180

正如 Shane Holloway 所说，这是使用 WebSockets 完成的。我在 MFC 应用程序中打开了一个监听套接字，然后让 HTML5 应用程序打开一个 websocket 以连接到 MFC 应用程序中的套接字。

简单的。我在接近这一切都错了。不知道这是否对其他人有用的问题/答案，但我想我会分享我实施的解决方案，因为它工作得很好。

# testing - 如何将日志文件附加到 TAP 测试结果中？

> ID：12800823
> 
> 赞同：0
> 
> 时间：2012-10-09T13:11:03.387
> 
> 标签：testing, tap, automaton

我正在尝试使用 TAP（测试任何协议）作为我们的测试结果格式。但是，需要将一些日志文件附加到测试结果中。我正在寻找一种好的做法来实现这一目标。

例如，我有一个 tap 文件和两个日志文件：a.log、b.log

```
1..1
ok 1 - sample.MyFirstTest#testCurrentTime
  ---
  message: Hello
  logfile: a.log, b.log
  ... 
```

有没有什么好方法可以将日志文件内容插入到这个 tap 文件中？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:18:16.513

[Yamlish](http://testanything.org/wiki/index.php/YAMLish)是解决方案。我们可以将文件内容嵌入到tap文件中。文件内容可以编码为base64，有一个tap示例：

```
1..2
not ok 1
  ---
  Extensions:
    File-Name: test.log
    File-Type: text/plain
    File-Content: VGhpcyBpcyBhIGxvZyAK
  ...
ok 2 # SKIP test 1 failed 
```

# sql - SQL 存储动态数据

> ID：12800824
> 
> 赞同：2
> 
> 时间：2012-10-09T13:11:05.600
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, pivot

我有一个表，它链接到另一个表，指定键值对的值。然后 Value 表链接到一个包含名称（键）的表。这些表的定义（足够接近）如下：

```
---------------
Entity
---------------
EntityID
Name
Some other data

---------------
Value
----------------
ValueID
EntityID
Value

---------------
Key
---------------
KeyID
ValueID
Name 
```

每个实体可以有多个值，每个值都有一个键。每个实体可能没有相同数量的值。基本上，这种结构允许我动态添加表行，而无需修改实体表。

我想在实体表上选择 *，使用 Key.Name 字段作为列标题，并显示适当的 Value.Values

SQL 中是否有可用的动态结构，我可以对 Entity 中的每一行进行插入，然后返回一个选择？

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:25:49.453

根据您的描述，听起来您想要[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)数据。使用 PIVOT 有两种方法可以做到这一点，一种是您对要转换的列进行编码的静态 Pivot，另一种是在执行时确定列的动态 Pivot。

静态枢轴：

```
select *
from
(
  select e.entityid, v.value,
    e.name EntityName, k.name KeyName
  from value v
  left join entity e
    on v.entityid = e.entityid
  left join [key] k
    on v.valueid = k.valueid
) x
pivot
(
  max(value)
  for KeyName in ([name 1], [name 2], [name 3], [name 4], [name 5])
) p; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/72063/3)

Dynamic Pivot 在运行时确定列：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name) 
                    from [key]
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT entityid, EntityName, ' + @cols + ' from 
             (
                select e.entityid, v.value,
                  e.name EntityName, k.name KeyName
                from value v
                left join entity e
                  on v.entityid = e.entityid
                left join [key] k
                  on v.valueid = k.valueid
            ) x
            pivot 
            (
                max(value)
                for KeyName in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/72063/4)

这两个都可以放在存储过程中。如果您为每个表发布一些示例数据，然后发布所需的结果，则更容易确定正确的查询。

# android - 从 Web 服务器跟踪用户位置

> ID：12800828
> 
> 赞同：0
> 
> 时间：2012-10-09T13:11:14.413
> 
> 标签：android, maps, location, tracking

我想创建一个 android 应用程序，其中将有多个用户使用 android 手机，我必须从网站监控他们的位置。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:23:51.980

您需要做的就是编写一个接受用户位置信息的 Web 服务。现在创建一个与此 Web 服务通信并定期为其提供位置信息的 android 服务应用程序。

Android 应用程序将从 GPS 获取此位置信息 - 纬度和对数信息以及来自系统的时间，并在 Web 服务器上更新其状态。

在 Web 服务器上，您可以创建一个页面，该页面将根据数据库中的纬度和经度解析地名。

这样，您不仅可以知道用户的位置，还可以跟踪用户的移动。

# knockout.js - 交替上课的淘汰赛

> ID：12800832
> 
> 赞同：3
> 
> 时间：2012-10-09T13:11:26.053
> 
> 标签：knockout.js

如果我以正确的方式执行此操作，那么在淘汰赛方面更有知识的人可以告诉我吗？

我正在尝试在 foreach 指令中交替添加左浮动和右浮动类 - 这是我的绑定。我离题了吗？有更好的方法吗？

```
<a data-bind="css:{'pull-left':$index()%2 == 0,'pull-right':$index()%2 == 1}, attr:{href:$data.url}"> 
```

爱淘汰赛 - 顺便说一句

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:07:21.540

你这样做的方式会奏效。如果您想要一种更简洁的方式来做到这一点，那么您可以在您的视图模型上创建一个计算出的 observable 来返回正确的值，或者甚至更好地为您处理这个逻辑的自定义绑定。

自定义绑定的示例，您可以在其中传递要用作索引的内容，如下所示：

```
ko.bindingHandlers.float = {
    init: function(element, valueAccessor, allBindings, data, context) {
        var index, floatValue;

        index = valueAccessor();

        floatValue = ko.computed(function() {
           var left = ko.utils.unwrapObservable(index) % 2 === 0; 
           return left ? "left" : "right";
        });

        ko.applyBindingsToNode(element, { 
            style: {
                cssFloat: floatValue
            }                
        });
    }        
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/B8YHc/](http://jsfiddle.net/rniemeyer/B8YHc/)

如果你想使用引导程序的类，那么你可以这样做：http: [//jsfiddle.net/rniemeyer/VdLNQ/](http://jsfiddle.net/rniemeyer/VdLNQ/)。他们只是左右浮动，所以任何一种方式都应该没问题。

# c# - 在 XML 中查找一个节点下的值

> ID：12800833
> 
> 赞同：0
> 
> 时间：2012-10-09T13:11:26.247
> 
> 标签：c#, winforms, visual-studio-2008, xpath

下面是要搜索的词的 xml 文件格式。

```
<Book>
<Page id="1">
<Head>Preface</Head>
<Body>
<Paragraph>
    <Line>
        <Word>
            <Char>T</Char>
            <Char>h</Char>
            <Char>i</Char>
            <Char>s</Char>
        </Word>
        <Word>
            <Char>-</Char>
        </Word>
        <Word>
            <Char>i</Char>
            <Char>s</Char>
        </Word>
        <Word>
            <Char>-</Char>
        </Word>
        <Word>
            <Char>s</Char>
            <Char>a</Char>
            <Char>m</Char>
            <Char>p</Char>
            <Char>l</Char>
            <Char>e</Char>
        </Word>
        <Word>
            <Char>-</Char>
        </Word>
        <Word>
            <Char>t</Char>
            <Char>e</Char>
            <Char>x</Char>
            <Char>t</Char>
        </Word>
    </Line>
</Paragraph>
</Body>
</Page> 
```

我在 C# 中使用以下 XPath 表达式来查找 Char 节点的值。

```
XmlDocument objXmlDoc = new XmlDocument();
XmlNodeList objXmlNodeList;
objXmlDoc.Load(sFilePath);
objXmlNodeList = objXmlDoc.SelectNodes("//CHAR[translate(text(),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')='" + txtFindText.Text.ToUpper() + "']"); 
```

在这里，如何从上面的 XML 文件中用 XPath 得到一个完整的单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:18:05.003

我会使用 Linq2Xml

```
XDocument xDoc = XDocument.Parse(xml); //or XDocument.Load(fileName)
var words = xDoc.Descendants("Word")
                .Select(w => String.Join("",w.Descendants("Char").Select(c => c.Value)))
                .ToList(); 
```

- 编辑 -

对于@Y.Ecarri

```
var words2 = xDoc.XPathSelectElements("//Word")
                 .Select(w => String.Join("", w.Elements().Select(c => c.Value)))
                 .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:17:27.730

理论上是不可能的。原因是 XML/XPATH 不能确保顺序，因为查询的结果是“节点集”，根据定义，它是“无重复节点的无序集合”。

[http://www.w3.org/TR/xpath/](http://www.w3.org/TR/xpath/)

不过，您可以接近要求。例如，您可以获得第一个单词：

```
XmlDocument objXmlDoc = new XmlDocument();
XmlNodeList objXmlNodeList;
objXmlDoc.Load(sFilePath);
objXmlNodeList = objXmlDoc.SelectNodes("//Word");
string s = string.Empty;
XmlNodeList wordNodes = objXmlNodeList[0].ChildNodes;
foreach (XmlNode characterNode in wordNodes)
{
   s = s + characterNode.InnerText;
} 
```

# iphone - 可以封装故事板吗？

> ID：12800834
> 
> 赞同：1
> 
> 时间：2012-10-09T13:11:28.797
> 
> 标签：iphone, ios, ipad, encapsulation, uistoryboard

我想使用封装在 a 中的情节提要在`UIViewController`整个应用程序中提供一致的 UI。无论如何将故事板的第`UIViewController`一个嵌入到'master'`UIViewController`中，然后让segues和storyboard转换正常运行，都在'master'的区域内`UIViewController`？

谢谢你。

这是我希望嵌入的故事板/ ![复杂的故事板](../Images/9a6f34d7bf72c466ddf599fb122ee01d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:35:52.463

您可以为您的任务使用容器视图。

这个链接在这里：http: [//invasivecode.tumblr.com/post/12383262201/container-view-controllers-part-i-one-of-the](http://invasivecode.tumblr.com/post/12383262201/container-view-controllers-part-i-one-of-the)

它显示了用于创建容器视图的不同方法。如下图所示（图片来自[上面的链接](http://www.invasivecode.com/blogimages/hierarchy.jpg)）：

![在此处输入图像描述](../Images/95e49d2cd3d1e7ae0be4e75ba20dd9e1.png)

查看链接，希望对您有所帮助。

# python - 将带有列表的字典打印到文件中

> ID：12800836
> 
> 赞同：2
> 
> 时间：2012-10-09T13:11:41.090
> 
> 标签：python, list, dictionary

我在 python 中编写了一个脚本，其中我从一些文件中提取一些信息并将其传递到另一个文件中。

我有 2 个包含类元素列表的字典，我想将列表的每个元素写入 .csv 文件。

当我尝试将数据写入文件时，它以一种奇怪的方式出现。我希望数据以这种方式出现：

```
Sample_3 45526536 7010285 31195850 7320401 45500691 7186449 31021951 7292291  
Sample_1 48885783 7715654 33474067 7696062 48857972 7907873 33282945 7667154 
```

但相反，我得到了这个结果：

```
 Sample_3 ['45526536'] ['7010285'] ['31195850'] ['7320401'] ['45500691'] ['7186449'] ['31021951'] ['7292291']
 Sample_1 ['48885783'] ['7715654'] ['33474067'] ['7696062'] ['48857972'] ['7907873'] ['33282945']['7667154'] 
```

有谁知道为什么要在数字上加上 [´´] ？我尝试制作一个非常简单的方法来消除 [' '] 但我不会在文件中打印任何内容。

```
def correct_str(value):  
    new= str(value).strip("['")
    final= str(new).strip("']")
    return final 
```

这里的代码是我向字典中添加元素，字典是一个名为 stat_dict_l_u 的全局变量，名称是字典的键，在本例中为 Sample_1 和 Sample_2，列表值是一个包含数字 I 的列表从一个文件中得到。我相信也许我的问题来自我将值添加到字典的方式。

```
def processNumbersLeft(name,list_values):

    list_reads=[]

    for value in list_values:
        print value.total_reads
        list_reads.append(value.total_reads)

    list_aligned_once=[]
    for value in list_values:

        n=re.split(" ",value.aligned_once)
                 list_aligned_once.append(n[0])

    list_failed=[]
    for value in list_values:

        n=re.split(" ",value.failed)
        list_failed.append(n[0])

    list_aligned_several=[]
    for value in list_values:

        n=re.split(" ",value.aligned_several)

        list_aligned_several.append(n[0])

    stat_elem=Statistics(list_reads,list_aligned_once,list_failed,list_aligned_several)

    stat_dict_l_u[name]=stat_elem 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:14:26.610

尝试使用这种情况：

```
def to_file(d):
    return '\n'.join("%s %s" % (key, ' '.join(map(str, values))) for key, values in d.items()) 
```

使用：

```
>>> print to_file({'Sample_1': [1,2,3], 'Sample_2': [4,5,6]})
Sample_1 1 2 3
Sample_2 4 5 6 
```

请注意，如果您需要大量使用 csv 文件，请使用有用的模块[csv](http://docs.python.org/library/csv.html)。使用示例：

```
import csv
with open('eggs.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=' ', quoting=csv.QUOTE_MINIMAL)
    for key, values in d.items():
        spamwriter.writerow([key] + values) 
```

这个例子正是你需要的。有关更多信息，请阅读[文档](http://docs.python.org/library/csv.html#csv.writer)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:13:49.173

将数据写入文件时，它会将您的对象转换为字符串。该`['']`符号表示您的数据包含在列表中。

你想写`value[0]`而不是`value`为每个条目写。

为了显示：

```
>>> value = ['foobar']
>>> value
['foobar']
>>> str(value)
"['foobar']"
>>> value[0]
'foobar' 
```

# java - Java Web Service后台进程更新服务数据

> ID：12800842
> 
> 赞同：0
> 
> 时间：2012-10-09T13:12:10.500
> 
> 标签：java, web-services, background-process

我有一个简单的 Tomcat 7 服务器，我想在其中实现一个 Java Web 服务，它提供一些我可以通过手机获取的数据。关键是我希望服务器上的数据每隔一段时间更新一次。所以我需要一个更新数据的“后台进程”。

我首先尝试在绑定实现类的构造函数中启动一个新线程（它只实现我自己的服务 - 不是 HttpServlet 左右），比如

```
public NewBindingImpl(){   
  Thread informationFetcher = new InformationFetcher();   
  informationFetcher.start(); 
} 
```

但是我没有想到每次有人使用该服务时都会创建这个类。此外，这只会在我要求数据时更新数据。但是我怎么能更新它们让我们说每两个小时左右？

希望这里有人有想法。这对于“简单”的网络服务是否可行？

非常感谢，

托拜厄斯

**编辑： - -**

也许知道我在这里尝试了这个非常基本的教程会有所帮助：

[http://www.elearning.witnut.com/230/java-web-service-creation-using-top-development-approach/](http://www.elearning.witnut.com/230/java-web-service-creation-using-top-development-approach/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:15:01.077

为什么在`init()`调用 servlet 的方法时不初始化线程？`destroy()`调用相应方法时可以将其关闭。该线程将绑定到 servlet 的生命周期，并且由于`init()`只调用一次，因此您不必担心多个实例。

[这是关于init() 方法用法](http://www.ibm.com/developerworks/websphere/library/bestpractices/using_httpservlet_method.html)的简短教程。

由于您希望每两个小时运行一次，请查看[Timer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html)类。对于更复杂的场景， [Quartz](http://quartz-scheduler.org/)是一个有力的竞争者。

# iphone - Phonegap 中的 NSUserDefaults

> ID：12800844
> 
> 赞同：2
> 
> 时间：2012-10-09T13:12:14.577
> 
> 标签：iphone, xcode, cordova, nsuserdefaults

（我是本地 iPhone 开发人员 - Phonegap/Cordova 的新手）

对于某些设置或偏好，我们在原生 iOS 中使用 NSUserDefaults。使用 webviews 和 phonegap 时是否有等价物？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T10:43:59.353

有一个[应用程序偏好 Cordova 插件](https://github.com/apla/me.apla.cordova.app-preferences)。

[用法](https://github.com/apla/me.apla.cordova.app-preferences#synopsis)：

```
function ok (value) {}
function fail (error) {}

var prefs = plugins.appPreferences;

// cordova interface

// store key => value pair
prefs.store (ok, fail, 'key', 'value');

// store key => value pair in dict (see notes)
prefs.store (ok, fail, 'dict', 'key', 'value');

// fetch value by key (value will be delivered through "ok" callback)
prefs.fetch (ok, fail, 'key');

// fetch value by key from dict (see notes)
prefs.fetch (ok, fail, 'dict', 'key');

// remove value by key
prefs.remove (ok, fail, 'key');

// show application preferences
prefs.show (ok, fail);

// instead of cordova interface you can use promise interface
// you'll receive promise when you won't pass function reference
// as first and second parameter

// fetch the value for a key using promise
prefs.fetch ('key').then (ok, fail);

// support for iOS suites (untested)
var suitePrefs = prefs.iosSuite ("suiteName");
suitePrefs.fetch (...);
suitePrefs.store (...); 
```

# c# - 排序依据不起作用的嵌套父子列表

> ID：12800846
> 
> 赞同：0
> 
> 时间：2012-10-09T13:12:18.673
> 
> 标签：c#, linq

我有以下代码：

```
public class Navigation
{
    public Navigation()
    {
        SubNavigation = new List<Navigation>();
    }

    public int Order { get; set; }
    public string Text { get; set; }
    public string RouteName { get; set; }
    public IList<Navigation> SubNavigation { get; set; }
} 
```

然后我有：

```
IList<Navigation> list = new List<Navigation>(); 
```

我用一些数据填充列表。并非所有项目都有子导航。目前导航只深入一层。

现在我想按顺序对每个项目的导航和子导航进行排序。我尝试了各种方法，但无论我尝试什么，我都无法在不重新创建对象的情况下对子导航进行排序。以下代码有效：

```
IList<Navigation> result = list.OrderBy(l => l.Order)
                               .Select(n => new Navigation
                               {
                                   Order = n.Order,
                                   Text = n.Text,
                                   RouteName = n.RouteName,
                                   SubNavigation = n.SubNavigation.OrderBy(s => s.Order).ToList()
                               }).ToList(); 
```

我不喜欢这种方法，我的问题是使用 LINQ 和方法语法是否有任何更清洁/更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:30:59.500

您可以在对象上添加一个新属性：

```
public IList<Navigation> OrderedSubNavigation 
{ 
    get
    {
        return SubNavigation.OrderBy(s => s.Order).ToList();
    }

} 
```

然后，当您想要订购的时，您只需使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:17:45.113

> 我尝试了各种方法，但无论我尝试什么，我都无法在不重新创建对象的情况下对子导航进行排序。

好吧，不，你不能干净地 - 因为让子导航按特定顺序需要*修改*现有对象，而 LINQ 不是为此而构建的。LINQ 是为*查询*而构建的，它不应该改变他们处理的数据。

一种选择是仅在需要时对子导航进行排序 - 忍受它在 a 中无序的事实，`Navigation`然后当您真正*需要*子导航项（例如用于显示）时，您可以在该点订购。除此之外，如果您最终不显示子导航项，这将提高效率。

# .net - 在对象上生成负 ID 并防止整数溢出

> ID：12800852
> 
> 赞同：0
> 
> 时间：2012-10-09T13:12:47.557
> 
> 标签：.net, vb.net, integer, overflow

我有一个对象，说狗。对于每只狗，数据库都会生成一个唯一的标识符 - ID。

但在将 Dog 保存到数据库之前，我应该生成一个临时（负 ID）。

因此，我在类 Dog 中创建了一个共享（静态）_lastId = 0。

在 Dog 的构造函数中，我只是减少 lastId。

但是一旦我将狗保存在数据库中或狗“死”在垃圾收集器中，负 ID 不再用于该对象，因此可以被其他活着但未保存的狗使用。

因为 max Integer = `2,147,483,647`，如果我对 Dog's 的大型列表进行大量生成抑制，我可能会超过整数的最大限制......

```
Private Shared _LastId = 0

Public Sub New()
  Me.Id = _LastId - 1 
```

这里可以使用什么“回收”机制来防止溢出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:47:16.353

三个选项

1

使用单独的 TempID，即 Int64。

覆盖 Equals 和 == 以足够聪明地使用 TempID 或 ID。

但不要在对象获得真实 ID 时更改 Hash。

2

或者使用 Int64 作为 ID（临时和真实）。
从好的方面来说，您碰巧只使用 Int32。

3

在 Dog 上实施 Dispose 并在那里返回 -ID。

并在 Dog 获得正 ID 时返回 -ID。

在获得新的 -ID 之前，拥有回收的 -ID 的 HashSet 并从该列表中获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:16:30.610

为什么不将所有未保存的新对象保留为默认值 0？或者更好的是，使用像 NHibernate 或实体框架这样的 ORM 来处理这个问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:27:24.803

一旦达到可能的最低值，只需重置回 -1 可能会满足您的需求：

```
Public Sub New()
    If _LastId > Interger.MinValue Then
        Me.Id = _LastId - 1
    Else
        Me.Id = -1
    End if
    ' ... 
```

# javascript - 数字原型定义

> ID：12800858
> 
> 赞同：2
> 
> 时间：2012-10-09T13:13:06.160
> 
> 标签：javascript

有人可以解释我如何克服这件事吗？

```
String.prototype.one = 1;
"one".one; //returns 1

Number.prototype.one = 1;
1.one; //returns 'SyntaxError: Unexpected token ILLEGAL' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T13:14:12.660

这是因为解释器将`.`数字后面的 a 视为小数，而不是属性访问器，因此它认为它是这样的：

```
(1.)one  // SyntaxError 
```

再给它一个`.`，它会工作的。

```
1..one 
```

它现在认为它是这样的：

```
(1.).one 
```

其他解决方案：

```
1.0.one
1["one"]
(1).one 
```

# vba - 删除 Excel 行而不隐藏另一个 VBA

> ID：12800860
> 
> 赞同：2
> 
> 时间：2012-10-09T13:13:11.217
> 
> 标签：vba, excel

我有一个相当简单的电子表格应用程序，其中包含一些 VBA 代码，可以执行用户调用的简单行插入和删除。这是一个格式很重的电子表格，供没有 Excel 经验的人使用。插入和删除的代码很好。

该工作表使用 15 行，并且该点以下的每一行都已隐藏。但是，在删除完整的行时，接下来的每一行都会按照标准向上移动，留下一个“新”的空白行 15。我希望这种行为被否决并且**不**出现空白行。

可能很简单？防止这种行为的选项是什么，如果这是不可能的，是否有任何提示可以获取工作表的“最后可见”行的身份以便手动将其隐藏？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:16:35.943

而不是删除一行，而是清除它：

[msdn](http://msdn.microsoft.com/en-us/library/office/aa223828%28v=office.11%29.aspx)举了一个例子

```
Worksheets("Sheet1").Range("A1:G37").ClearContents 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:31:57.477

您可能需要根据自己的需要进行调整，但这应该可以。

```
Sub GetLastVisibleCell()

Dim rng As Range

Set rng = ActiveSheet.Columns(1).SpecialCells(xlCellTypeVisible).SpecialCells(xlCellTypeLastCell)

If rng = vbNullString Then rng.EntireRow.Hidden = True

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:01:28.613

最后一个可见行也可以用 end(xlup) 语法返回。假设您的 A 列有每个非空行的数据。

```
Sub GetLastVisibleCell()

Dim rng As Range

Set rng = cells(rows.count,1).end(xlup)
rng.EntireRow.Hidden = True

End Sub 
```

# python - 如何让 Django 使用 Gunicorn 提供静态文件？

> ID：12800862
> 
> 赞同：91
> 
> 时间：2012-10-09T13:13:16.830
> 
> 标签：python, django, gunicorn

我想在本地主机上的 gunicorn 下运行我的 django 项目。我安装并集成了 gunicorn。当我运行时：

```
python manage.py run_gunicorn 
```

它可以工作，但没有任何静态文件（css 和 js）

我在 settings.py 中禁用了 debug 和 template_debug（使它们为假），但它仍然是一样的。我错过了什么吗？

我称静态为：

```
{{ STATIC_URL }}css/etc.... 
```

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-10-09T13:27:09.723

在**开发**模式下以及*使用其他服务器进行本地开发*时，将其添加到您的 url.py

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# ... the rest of your URLconf goes here ...

urlpatterns += staticfiles_urlpatterns() 
```

更多信息[在这里](https://docs.djangoproject.com/en/1.4/howto/static-files/#serving-static-files-in-development)

在**生产**中，您永远不会将 gunicorn 放在前面。相反，您使用像 nginx 这样的服务器，它将请求分派到 gunicorn 工作人员池并提供静态文件。

看[这里](http://gunicorn.org/deploy.html)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-05-13T22:39:52.277

**白噪声**

**发布 v4.0**

[http://whitenoise.evans.io/en/stable/changelog.html#v4-0](http://whitenoise.evans.io/en/stable/changelog.html#v4-0)

> Django 的 WSGI 集成选项（涉及编辑 wsgi.py）已被删除。相反，您应该将 WhiteNoise 添加到 settings.py 中的中间件列表中，并从 wsgi.py 中删除对 WhiteNoise 的任何引用。有关更多详细信息，请参阅文档。（纯 WSGI 集成仍然可用于非 Django 应用程序。）

**前 v4.0**

Heroku 在以下网址推荐此方法：[https](https://devcenter.heroku.com/articles/django-assets) ://devcenter.heroku.com/articles/django-assets ：

> 您的应用程序现在将直接从 Gunicorn 在生产中提供静态资产。这对于大多数应用程序来说已经足够了，但是顶级应用程序可能想要探索使用带有 Django-Storages 的 CDN。

安装：

```
pip install whitenoise
pip freeze > requirements.txt 
```

`wsgi.py`：

```
import os
from django.core.wsgi import get_wsgi_application
from whitenoise.django import DjangoWhiteNoise

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "free_books.settings")
application = get_wsgi_application()
application = DjangoWhiteNoise(application) 
```

在 Django 1.9 上测试。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-09T13:26:12.917

gunicorn 应该用于为 python“应用程序”本身提供服务，而静态文件由静态文件服务器（例如 Nginx）提供服务。

这是我的配置之一的摘录：

```
upstream app_server_djangoapp {
    server localhost:8000 fail_timeout=0;
}

server {
    listen < server port goes here >;
    server_name < server name goes here >;

    access_log  /var/log/nginx/guni-access.log;
    error_log  /var/log/nginx/guni-error.log info;

    keepalive_timeout 5;

    root < application root directory goes here >;

    location /static {    
        autoindex on;    
        alias < static folder directory goes here >;    
    }

    location /media {
       autoindex on;
       alias < user uploaded media file directory goes here >;
    }

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;

        if (!-f $request_filename) {
            proxy_pass http://app_server_djangoapp;
            break;
        }
    }
} 
```

一些注意事项：

*   静态根目录、媒体根目录、静态文件路径前缀和媒体文件路径前缀在您的 settings.py 中设置
*   将 nginx 设置为从静态内容目录提供服务后，您需要在项目根目录中运行“python manage.py collectstatic”，以便可以将各种应用程序中的静态文件复制到静态文件夹

最后：虽然可以从 gunicorn 提供静态文件（通过启用仅调试的静态文件服务视图），但这在生产中被认为是不好的做法。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-09-21T19:53:35.930

我已经将它用于我的开发环境（使用 gunicorn）：

```
from django.conf import settings
from django.contrib.staticfiles.handlers import StaticFilesHandler
from django.core.wsgi import get_wsgi_application

if settings.DEBUG:
    application = StaticFilesHandler(get_wsgi_application())
else:
    application = get_wsgi_application() 
```

然后运行`gunicorn myapp.wsgi`。这与[@rantanplan 的答案](https://stackoverflow.com/a/12801140/107510)*类似*，但是，它在运行静态文件时不运行任何中间件。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-05T09:16:37.597

为了提供静态文件，正如[Jamie Hewland 所说](https://youtu.be/rdjtPTV_WWo?t=763)，通常使用 Nginx 将所有请求路由到 /static/

```
location /statis/ {

    alias /path/to/static/files;

} 
```

[![Nginx + Gunicorn + Django](../Images/316ba72f751c49b7243af5197646b195.png)](https://i.stack.imgur.com/loGN0.jpg)

换句话说，正如[科里沃德所说](https://stackoverflow.com/a/42702316/5675325)的 Gunicorn / Unicorn

> 并非旨在解决向客户提供文件所涉及的一系列问题

如果您考虑使用其他 WSGI 服务器（例如 uWSGI 而不是 Gunicorn），同样的推理也适用。在[uWSGI 文档中](https://uwsgi-docs.readthedocs.io/en/latest/tutorials/Django_and_nginx.html)

> 通过 uWSGI 提供静态文件效率低下。相反，直接从 Nginx 提供它们并完全绕过 uWSGI

* * *

[更简单的方法是使用非常易于设置的WhiteNoise](https://pypi.org/project/whitenoise/)库使用 Python 提供静态文件（您可能希望使用 CDN，以便大多数请求不会到达 Python 应用程序）。正如[Miguel de Matos 所说](https://stackoverflow.com/a/62162685/5675325)，你只需要

1.  收集静电

    ```
     python manage.py collectstatic 
    ```

2.  安装白噪声

    ```
     pip install whitenoise 
    ```

3.  `STATICFILES_STORAGE`在 settings.py 中添加以下内容

    ```
     STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage' 
    ```

4.  将以下内容添加到您`MIDDLEWARE`的 settings.py 中（如[mracette 所述](https://stackoverflow.com/users/3064334/mracette)，“根据白噪声文档，您应该将中间件放在后面`django.middleware.security.SecurityMiddleware`”）

    ```
     `MIDDLEWARE = [
       'django.middleware.security.SecurityMiddleware',
       'whitenoise.middleware.WhiteNoiseMiddleware',
       ...
     ] 
    ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-26T16:17:14.387

从 Django 1.3 开始，有 django/conf/urls/static.py 在 DEBUG 模式下处理静态文件：

```
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... the rest of your URLconf goes here ...
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

阅读更多[https://docs.djangoproject.com/en/2.0/howto/static-files/#serving-static-files-during-development](https://docs.djangoproject.com/en/2.0/howto/static-files/#serving-static-files-during-development)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-16T17:23:09.267

如果您使用的是 Apache/Gunicorn，那么这就是我的设置方式。

1.  在您的 Django 根目录（带有`manage.py`）中，创建目录`mkdir -p django_static/static`

2.  在您的项目`settings.py`中设置以下内容：

```
DEBUG = False
INSTALLED_APPS = [..., 'django.contrib.staticfiles', ...]
STATIC_URL = 'static/'
STATIC_ROOT = os.path.join(BASE_DIR, "django_static", "static") 
```

3.  运行`python manage.py collectstatic`。这会将静态内容输出到`django_static/static`

4.  使用（加选项）启动您的`gunicorn`服务器`gunicorn your_project_name.wsgi`

5.  假设您有默认的全局 Apache 设置，您需要创建一个指向`/var/www`静态目录的软链接： `sudo ln -s /path/to/your_django_project/django_static /var/www/your_django_project_static`

6.  对于您`www.example.com`希望指向 Django 应用程序的域，请在 apache 中配置以下虚拟主机，以便将所有提交到的请求代理到`https://www.example.com`除`127.0.0.1:8000` **路由之外**`www.example.com/static/`（在这种情况下，将文件提供给来自 的此类请求`django_static`）：

```
<VirtualHost *:443>
    ServerName www.example.com
    DocumentRoot /var/www/your_django_project_static
    <Location "/">
        ProxyPreserveHost On
        ProxyPass http://127.0.0.1:8000/
        ProxyPassReverse http://127.0.0.1:8000/
    </Location>
    <Location "/static/">
        ProxyPass "!"
    </Location>
</VirtualHost> 
```

瞧！

# sql - Postgresql - 带有可变数字列的交叉表或数据透视表

> ID：12800869
> 
> 赞同：0
> 
> 时间：2012-10-09T13:13:35.680
> 
> 标签：sql, postgresql

我需要使用带有列变量的数据透视表或交叉表进行查询。有可能吗？我有下表：

```
Data_Id ! Description_Column | Value
--------+--------------------+-------
1       ! Column1            ! value1
1       ! Column2            ! value2 
1       ! Column3            ! value3
1       ! Column4            ! value4
2       ! Column1            ! value5
2       ! Column2            ! value6
2       ! Column3            ! value7
2       ! Column4            ! value8 
```

我需要得到

```
Data_Id ! Column1 ! Column2 ! Column3 ! Column4
1       ! value1  ! value2  ! value3  ! value4
2       ! value5  ! value6  ! value7  ! value8 
```

但有时我会有：

```
Data_Id ! Description_Column | Value
--------+--------------------+-------
3       ! Column1            ! value1
3       ! Column2            ! value2 
4       ! Column1            ! value5
4       ! Column2            ! value6 
```

我需要得到

```
Data_Id ! Column1 ! Column2 
3       ! value1  ! value2  
4       ! value5  ! value6 
```

观察。我需要的行将通过连接来选择。所以我会有变量列的数量。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:22:39.610

您必须记住，SQL 计划程序需要在计划时知道返回行的粗略情况。所以你不能直接这样做。

第一个是您可以创建一个函数来执行您正在尝试执行的操作并在 refcursor 中返回结果。这可能是最简单的方法。使用`crosstab()`来自`tablefunc`contrib 模块/扩展的函数。您应该能够根据查询数据生成要运行的 SQL 查询，但这需要功能内动态 SQL，并且您必须再次返回一个引用。

# c++ - C++ 中的特定模板友谊

> ID：12800882
> 
> 赞同：7
> 
> 时间：2012-10-09T13:14:05.150
> 
> 标签：c++, templates, friend, access-control

我有一个关于 C++ 中特定模板友谊的问题。在C++ Primer一书中，具体的模板友情是这样写的：

```
 template <class T> class Foo3;
 template <class T> void templ_fcn3(const T&);
 template <class Type> class Bar {
     // each instantiation of Bar grants access to the
     // version of Foo3 or templ_fcn3 instantiated with the same type
     friend class Foo3<Type>;
     friend void templ_fcn3<Type>(const Type&);
     // ...
 }; 
```

特别的一点是有

```
<Type> 
```

在**friend**语句中的类或函数名之后。

但是，在实践中，如果我这样写：

```
template <class Type> class T_CheckPointer;
template <class T> T_CheckPointer<T> operator+(const T_CheckPointer<T> &, const size_t n);

template <typename Type>
class T_CheckPointer {

    // Specific Template Friendship
    friend T_CheckPointer<Type>
    operator+ <Type> (const T_CheckPointer<Type> &, const size_t n);

// other code...

} 
```

模板函数的实例化过程中会出错。

如果我改变

```
// Specific Template Friendship
friend T_CheckPointer<Type>
    operator+ <Type> (const T_CheckPointer<Type> &, const size_t n); 
```

至

```
// Specific Template Friendship
friend T_CheckPointer<Type>
    operator+ <> (const T_CheckPointer<Type> &, const size_t n); 
```

通过删除函数名称后面的单词**类型**，一切都会好起来的。

谁能告诉我原因？

* * *

有关信息，当我调用时**出现错误消息**

```
int iarr[] = {1, 2, 3, 4};
T_CheckPointer<int> itcp(iarr, iarr+4); 
```

错误信息：

```
/usr/include/c++/4.4/bits/stl_iterator_base_types.h: In instantiation of ‘std::iterator_traits<int>’:
/usr/include/c++/4.4/bits/stl_iterator.h:96:   instantiated from ‘std::reverse_iterator<int>’
../Classes/T_CheckPointer.hpp:31:   instantiated from ‘T_CheckPointer<int>’
../PE16.cpp:520:   instantiated from here
/usr/include/c++/4.4/bits/stl_iterator_base_types.h:127: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.4/bits/stl_iterator_base_types.h:128: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.4/bits/stl_iterator_base_types.h:129: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.4/bits/stl_iterator_base_types.h:130: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.4/bits/stl_iterator_base_types.h:131: error: ‘int’ is not a class, struct, or union type 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T17:05:23.193

这是一个最小的例子：

```
template<typename T> struct U { typedef typename T::X X; };
template<typename T> void foo(typename U<T>::X);

template<typename T> struct S;
template<typename T> void foo(S<T>);
template<typename T> struct S { friend void foo<T>(S<T>); };

template struct S<int>; 
```

声明失败的原因`friend`是，通过提供模板参数的完整列表，您要求编译器专门化所有可用的函数模板并选择与签名最匹配的模板。`foo`对结果的第一个定义的专门化是专门化`U`一个导致格式错误的程序的参数。

相反，如果您省略模板参数，它将从参数中推导出来。由于这样的模板参数推导是根据**14.8.2 [temp.deduct]**执行的，特别是 14.8.2p8 应用，这意味着在专业化中的替换失败`U`不是错误（SFINAE）。

这是在任何可以从上下文中推断出模板参数的地方（例如这里的函数或运算符参数类型）省略模板参数的一个很好的理由。请注意，您仍然需要提供`<>`方括号以确保将其`operator +`读取为*模板 ID*（**14.5.4 [temp.friend]**）。

# jquery - jQgrid subgrid - bad grid 或 cur 是未定义的错误

> ID：12800883
> 
> 赞同：0
> 
> 时间：2012-10-09T13:14:05.903
> 
> 标签：jquery, json, jqgrid, subgrid

这是我在这个问题上苦苦挣扎的第二天，似乎没有人在使用 subgrid，或者我在这里撒尿。

这是我的网格代码：

```
 jQuery("#gridTable").jqGrid({ 
        url: ROOT + '/admin/station/getPagedList.json',
        datatype: "json", 
        jsonReader : {
            cell: "",
            id: "0", 
            repeatitems: false,
    //      subgrid: { 
    //           root:"rows", 
    //           repeatitems: false, 
    //           cell:"cell" 
    //        } 
            },
        colNames:['ID', 'Esta&ccedil;&atilde;o', 'Sigla', 'Linha', 'Lote', 'Empresa'], 
        colModel:[ 
                  {name:'id',index:'id', width:50, editable:false, hidden: true}, 
                  {name:'name',index:'name', width:130, editable:true}, 
                  {name:'acronym',index:'acronym', width:35, editable:true}, 
                  {name:'line.name',index:'line.name', width:130, editable:true}, 
                  {name:'line.lot.name',index:'line.lot.name', width:130, editable:false}, 
                  {name:'line.lot.company.name',index:'line.lot.company.name', width:130, editable:false}, 
        ], 
        subGrid : true,
        subGridUrl: ROOT + '/admin/contact/getList.json',
        subGridModel: [{
            name : ['Nome','Contato'],
            width : [150, 150] 
        }],
        rowNum:30, 
        rowList:[30,50,75], 
        pager: '#pager', 
        sortname: 'name', 
        viewrecords: true, 
        imgpath: ROOT + '/css/jquery/cptm/images',
        caption:'Esta&ccedil;&otilde;es', 
        height:"auto",
        altRows:true,
        altclass:"jqgrow-alt",
        loadError : function(xhr,st,err) {
            if (xhr.status.toString() == '901') {
                jAlert('Sua sess&atilde;o expirou.<br>Por favor efetue o login novamente.', 'AVISO', function(){
                    location.href = ROOT + "/logout";
                });
            }
        },
    }); 
```

我已经调整了子网格 URL 以返回 Json 的几个变化，但这是我得到的最远的：

{“行”：[{“细胞”：“0987654321”}]} ![单元格元素的每个字符都像一列一样工作](../Images/3bbac21f1185014ce33553ee2c87c89a.png)

有人请帮助我。@Oleg，如果可以请看一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:53:33.427

我终于让它工作了。这是我所做的：

我在 subGridModel 中添加了一个映射，如下所示：

```
subGridModel: [{
    name : ['Nome','Contato'],
    mapping : ['name','contact'],
    width : [200, 200],
}], 
```

并调整我的 json bean 以返回如下内容：

```
{"rows":[{"name":"Segurança de plataforma","contact":"0987654321"}]} 
```

这终于成功了。

![子网格固定](../Images/02b61f625d9cd987522edd66241b3056.png)

# objective-c - 在 didSelectRowAtIndexPath 上添加可编辑的 TextView

> ID：12800884
> 
> 赞同：0
> 
> 时间：2012-10-09T13:14:07.513
> 
> 标签：objective-c, ios, ipad

作为我的第一个 Objective-C 项目，我需要在`didSelectRowAtIndexPath`

![在此处输入图像描述](../Images/0c6bf1a1bac5c7f75cabc41203185f73.png)

您可以忽略第二行显示“Sikkerhed”的所有内容。`UITableView`我想要的只是一个新视图，当我按下我的一个单元格时，它会随着键盘一起弹出。正在设置的数据和显示的文本将根据选择的行而改变。我该如何实施这样的事情？我需要一个新`UIViewController`的`view`吗？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    // Code
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:29:38.703

你不得不：

1.  创建一个 UITableViewController
2.  将 tableview 的样式设置为分组

    在您的代码中：

3.  像本教程中一样填写表格视图： [http ://windrealm.org/tutorials/uitableview_uitextfield_form.php](http://windrealm.org/tutorials/uitableview_uitextfield_form.php)

4.  在 didSelectRowAtIndexPath 中展示您的 viewController：

    *   创建 UINavigationController 的实例并将 modalPresentationStyle 设置为仅填充屏幕的一部分：

        ```
        navController.modalPresentationStyle = UIModalPresentationFormSheet; 
        ```

        [（您可以在此处](http://useyourloaf.com/blog/2010/05/03/ipad-modal-view-controllers.html)找到有关 modalViewControllers 和 ModalPresentionStyle 的更多信息）

    *   在导航控制器上推送自定义 UITableViewController 的实例：

        ```
        [self.navigationController pushViewController:anotherViewController]; 
        ```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:36:17.737

是的，你可以做

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   // find with cell has been pressed
   // with indexPath.row

   // instantiate your new viewController depending on the logic of the cell selected
   // for example
   MyCustomViewController* mcvc = [[MyCustomViewController alloc] initWithNibName:bundle]

   // do ur logic
   // Note, u should get your viewController embedded into a uinavigationContrlller, 
   // so you can
   [self.navigationController pushViewController: [mcvc autorelease] animated:YES];

} 
```

# android - 在不打开 web 视图的情况下在 Android 上更新 oAuth 令牌

> ID：12800887
> 
> 赞同：1
> 
> 时间：2012-10-09T13:14:23.637
> 
> 标签：android, security, oauth, twitter-oauth, facebook-oauth

我正在构建一个将与 facebook、twitter、instagram、g+、youtube 集成的应用程序。谷歌服务很简单，因为我可以向 AccountManager（甚至更简单的 GoogleAccountManager）请求令牌，`AccountManager.get(this).getAuthTokenByFeatures(...)`如果是第一次请求令牌，它将提示用户授权，并且 AccountManager 将处理所有进一步的访问任何令牌续订等，然后将令牌还给我。

但是对于基于 WebView 的身份验证（facebook、twitter、instagram），我正在做打开 webview 的常用方法，让用户对其进行授权，使用 localhost 作为 redirect_url 并使用 WebViewClient 来拦截调用，捕获令牌，然后完成网页浏览。

到目前为止，一切正常！

我面临的问题是令牌过期！这样，在令牌过期后，webview 将再次弹出，服务将加载，希望立即授权（因为服务记得用户已经授权它），重定向到 localhost，WebViewClient 拦截并关闭它。

那么现在想象一下用户在一周左右没有使用它的情况下回到一个应用程序并看到几个小快速弹出连续？至少可以说糟糕的用户体验。

关于如何处理的任何想法？？？？

# c# - ViewModel 与 Model 有不同的字段吗？

> ID：12800893
> 
> 赞同：0
> 
> 时间：2012-10-09T13:14:39.280
> 
> 标签：c#, html, asp.net-mvc, mvvm

我想知道典型 ViewModel 中的哪些属性、方法或变量使其与模型不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:18:30.607

在 MVVM 中，“模型”代表整个域模型，而 ViewModel 特定于特定视图，并且仅包含在视图中显示或修改的那些字段/属性。

另请参阅[http://en.wikipedia.org/wiki/Model_View_ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)和[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)（后者是关于在 WPF 中使用 MVVM - 就像在 ASP 中一样。 NET，通常使用 MVC 而不是 MVVM）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:20:19.860

MVVM 解释：

模型是关于您的域的。经典示例是客户、订单、订单详细信息等。这些对您的用户界面是无视的。模型通常不包含任何委托给某些服务的代码。

视图模型是关于您如何呈现视图模型中的内容。假设您有一个包含详细信息的订单视图。视图模型可能包含有关当前订单详细信息的状态和其他可见状态，例如是否应该启用删除按钮？它还引用视图模型呈现的模型，例如订单和订单详细信息的集合。视图模型还可以执行诸如删除当前订单详细信息等操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:19:18.093

视图模型被“优化”以绑定到视图。
因此，在 WPF 中，它们包含特定于表示层的属性，例如命令、图像源等。

此外，视图模型可以用数据注释属性装饰，这对*模型*来说是不好的做法；他们可以实现任何`IDataErrorInfo`旨在用于 UI 的接口（如 ）；或者他们可以实现任何撤消/重做功能。

所有这些东西对领域模型都是有害的。

# ruby-on-rails - RoR 模板丢失错误

> ID：12800894
> 
> 赞同：0
> 
> 时间：2012-10-09T13:14:40.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, missing-template

我遇到了一个非常奇怪的错误，它说明了以下内容：

```
Template is missing

Missing template /404 with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "c:/Sites/jobapp/app/views" * "C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views" 
```

这很奇怪，因为我的所有其他路线似乎都正常工作，除了以下几点：

`<%= Link_to "Add Job", new_user_job_path %>`

我的路线设置如下：

```
 JobappV2::Application.routes.draw do
  devise_for :users

  resources :newsletters

  get "pages/advertise"

  get "pages/contact"

  get "pages/about"

  get "pages/terms"

  resources :jobs do
    collection { post :search , to: 'jobs#index' }
  end

  resources :users do
     resources :jobs
  end

   root :to => 'jobs#index'

  end 
```

因此应该能够使用`localhost:3000/users/1/jobs/new`

在作业控制器中，我有：

```
 def new
  @user = current_user
  @job = @user.jobs.build
 end

 def create
   @user = current_user
   @job = @user.jobs.create(params[:job])
  if @job.save
    redirect_to jobs_path
  else
    render new_user_job_path(current_user.id)
  end
  end 
```

在我的工作新视图中，我正在使用以下表单方法：

```
 <%= form_for [@user, @user.jobs.build] do |f| %> 
```

如果有人知道这里可能出了什么问题，真的会非常感激，因为我已经挣扎了一段时间:(

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:19:25.753

“render new_user_job_path(current_user.id)”是罪魁祸首

做类似的事情

```
render "edit" 
```

# c++ - C++ Data-Url 作为字符串到 const 字节 *

> ID：12800896
> 
> 赞同：5
> 
> 时间：2012-10-09T13:14:53.893
> 
> 标签：c++, string, byte

我有一个文件的[Data-Url](http://de.wikipedia.org/wiki/Data-URL)作为 std:string。必须对 base64 编码数据进行解码，然后将其传递给此函数：

```
open (const byte *  data, long size) 
```

所以首先我提取编码数据

```
size_t pos = dataurl.find_first_of(',');
std::string encoded = dataurl.substr(spos + 1); 
```

然后我使用这个[base64解码器](http://www.adp-gmbh.ch/cpp/common/base64.html)

```
std::string decoded = base64_decode(encoded); 
```

那么，我怎样才能将字符串类型的“解码”转换为字节*？以下代码产生错误

```
open((byte *)decoded.c_str(), decoded.size() + 1);
//>>error: 'byte' was not declared in this scope 
```

/编辑：所以有一个 typedef

```
typedef uint8_t     byte 
```

编码数据是图像！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:44:09.597

看起来您正在删除`const`. `c_str()`返回一个`const char *`。你的演员应该是`(const byte *)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T13:18:46.560

byte 是一个无符号字符。尝试`open((unsigned char *)decoded.c_str(), decoded.size() + 1);`

是的，根据原始 base64 字符串中的编码内容，您可能需要使用不同的解码方法

# cuda - CUDA中有多少个网格

> ID：12800900
> 
> 赞同：6
> 
> 时间：2012-10-09T13:15:15.673
> 
> 标签：cuda, parallel-processing, gpu, nvidia

GPU 中可能有多少个 CUDA 网格？

两个网格可以同时存在于 GPU 中吗？还是一台 GPU 设备只有一个网格？

```
Kernel1<<gridDim, blockDim>>(dst1, param1);
Kernel1<<gridDim, blockDim>>(dst2, param2); 
```

上面的两个内核是同时运行还是顺序运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T14:32:16.193

如果两个内核如上所示发出，它们将被序列化（它们将按顺序运行）。这是因为没有任何其他代码（即切换流），两个内核将被发布到同一个 cuda 流。对同一流发出的所有 cuda 调用都按顺序执行，即使您认为您应该看到其他情况，因为您使用的是 cudaMemcpyAsync 或类似的东西。

当然可以让多个内核彼此异步运行（因此可能同时运行），但有必要使用 cuda 流 API 来完成此操作。

您可能需要查看[CUDA C 程序员指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)中的第 3.2.5 节“异步并发执行”以了解有关流和并发内核执行的更多信息。此外，nvidia [CUDA SDK](http://developer.nvidia.com/cuda/cuda-cc-sdk-code-samples)中有许多示例，例如[简单的流](http://developer.nvidia.com/cuda/cuda-cc-sdk-code-samples#simpleStreams)，它们将说明这些概念。[并发内核](http://developer.nvidia.com/cuda/cuda-cc-sdk-code-samples#concurrentKernels)示例展示了如何同时运行多个内核（使用流）。请注意，同时运行内核需要计算能力 2.0 或“更高”的硬件。

此外，要回答您的第一个问题，来自CUDA C 编程指南的[第 3.2.5.2 节](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#concurrent-kernel-execution)，“设备可以同时执行的内核启动的最大数量因设备而异，但对于某些设备可能高达 128”

作为参考，“网格”是与单个内核启动相关联的整个线程数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T04:45:05.823

为了详细说明 Robert 的回答，这里有一个示例，说明如何使用流使两个实例`Kernel1`同时运行：

```
cudaStream_t stream1; cudaStreamCreate(&stream1);
cudaStream_t stream2; cudaStreamCreate(&stream2);

Kernel1<<gridDim, blockDim, 0, stream1>>(dst1, param1);
Kernel1<<gridDim, blockDim, 0, stream2>>(dst2, param2); 
```

关于流并发执行的更多注意事项：

*   如果我们在没有指定流的情况下启动内核`Kernel1<<<g, b>>>()`，然后启动具有特定流的内核`Kernel2<<<g, b, 0, stream>>>()`，那么`Kernel2`将等待`Kernel1`完成。
*   当内核在没有流 ( `Kernel1<<<g, b>>>()`) 的情况下启动时，Nvidia 将其称为“使用 NULL 流”。
*   如果您使用`cudaEvents`，即使您将内核分布在多个流上，您的工作有时也会被序列化。

# xslt - 为什么 xslt 在中添加属性本身 ?

> ID：12800901
> 
> 赞同：2
> 
> 时间：2012-10-09T13:15:17.497
> 
> 标签：xslt, xslt-1.0, xhtml-1.0-strict

我使用 xslt 1.0 对 xhtml 文件进行一些操作。但我想从一个相同的副本开始。令我惊讶**的是，xsl 添加了原始文件中没有的属性**。请解释这个现象。我宁愿避免它，以便更容易比较源文件和结果文件。

我尝试了 xsltproc 和 msxsl。没有不同。我得到`rowspan`并`colspan`添加到所有`td`元素。

输入：

```
<?xml version="1.0" encoding="windows-1250" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250" />
<title>Anything</title>
</head>

<body>
<table>
<tr><td class="skl" >test</td><td class="kwota" >1 800,00</td></tr>
</table>
</body>                    

</html> 
```

xslt：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  >
  <xsl:output method="xml"
    omit-xml-declaration="no"
    encoding="windows-1250"
    doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
    doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
  />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates
        select="node()|@*|processing-instruction()|comment()" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

唯一的区别是这一行：

```
<tr><td class="skl" rowspan="1" colspan="1">test</td><td class="kwota" rowspan="1" colspan="1">1 800,00</td></tr> 
```

针对 dtd 验证源文件没有显示错误。我可以将这些属性插入源文件以解决该问题，但我很好奇造成这种混乱的原因。

**编辑：我使用从**[http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd) 下载的原始 dtd（延迟 20 秒）

```
<!ATTLIST td
  %attrs;
  abbr        %Text;         #IMPLIED
  axis        CDATA          #IMPLIED
  headers     IDREFS         #IMPLIED
  scope       %Scope;        #IMPLIED
  rowspan     %Number;       "1"
  colspan     %Number;       "1"
  %cellhalign;
  %cellvalign;
  > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:15:25.103

您的 XSLT 处理器的行为非常正确。没有添加新属性。通过 DTD 引用，行跨度属性始终位于您的输入文件中。行跨度的“1”值是作为显式属性序列化还是由您的 doctype 声明隐含对模型数据没有影响。

上面的 ATTLIST 显示 rowspan 和 colspan 的默认值是 1。没有**这些**属性，但仍然符合 XHTML 1.1 strict 是不可能的。注释为#IMPLIED 的其他属性表示它们是可选的。

我希望能解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:46:27.753

在我能够测试的处理器中禁用“功能”的几种方法。

## libxml

**xsltproc**： `--nodtdattr`

**libxslt / libxml** : 加载源时不要指定`XML_PARSE_DTDATTR`，例如在[xmlReadFile](http://www.xmlsoft.org/html/libxml-parser.html#xmlReadFile)

## msxml

**msxsl** : `-xe`- 不解析外部

**Msxml.DomDocument**：`doc.resolveExternals = False`和`doc.validateOnParse = False`之前`load`，也禁用整个 dtd

[解决外部](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762283%28v=vs.85%29.aspx)：

> 在 MSXML 3.0 和 MSXML 6.0 中，默认的 resolveExternals 值为 True。在 MSXML 6.0 中，默认设置为 False。

是的，这很愚蠢。但我只是从 MS 那里复制的。我猜应该是*3.0 和 4.0 True，6.0 False 。*

[6.0 SP1 中引入的PopulateElementDefaultValues 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms753786%28v=vs.85%29.aspx)有一个吸引人的描述，但它不适用于我的 dtds。

# mysql - MySQL 中的类别和子类别

> ID：12800910
> 
> 赞同：0
> 
> 时间：2012-10-09T13:15:39.830
> 
> 标签：mysql

我在 mysql 中设置了与本文相同深度的类别：http: [//sqllessons.com/categories.html](http://sqllessons.com/categories.html)

一切正常。问题是我只想显示实际上有一些东西的类别（产品）

类别示例：

```
Table 'categories':

id, parent_id, name
--------------------
85140, 800000, subcat1
85150, 800000, subcat2
85160, 800000, subcat3 
85170, 800000, subcat4 
851710, 85170, subsubcat_of_subcat_4 
```

我有另一个表，其中的产品与类别表中的 id 匹配

```
Table 'products':

product_id, id
---------------
1001, 85140
1002, 85140
1003, 85150
1004, 85170
1005, 851710 
```

从文章运行第一个查询时，我得到所有类别，但我不想包括“85160”，因为它是空的。如何修改查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:22:50.563

```
SELECT *
FROM categories ca
JOIN products pd
ON ca.id = pd.id; 
```

# javascript - 如何获取调用该函数的html元素的ID？(jQuery/Javascript)

> ID：12800913
> 
> 赞同：0
> 
> 时间：2012-10-09T13:15:43.557
> 
> 标签：javascript, jquery

我正在创建的网页可以有多个 div 元素，每个元素的 id 'product-info-div' 都附加一个数字。示例 - product-info-div1、product-info-div2、product-info-div3 等。这些 div 中的每一个都有一个分别称为 TagSelector1、TagSelector2 的元素。

此类 div 元素的确切数量是在运行时决定的。

我正在编写一个函数，只要在页面中创建这样的 div 就会调用该函数。现在它看起来像这样 -

```
$("#product-info-div*").ready(
        function () {
            $("#TagSelector1").chosen();
            $("#TagSelector2").chosen();
            $("#TagSelector3").chosen();
            $("#TagSelector4").chosen();
            $("#TagSelector5").chosen();
        }
    ); 
```

我想要做的是从调用此函数的 div 中获取数字，以便可以删除硬编码。像这样的东西-

```
$("#product-info-div*").ready(
        function () {
            var product_number = get_number_from(product-info-div*);
            $("#TagSelector"+product_number).chosen();
        }
    ); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:19:16.507

您的代码是您应该使用类选择器的完美示例。无需使用 id 选择器。

```
$(  
    function () {
        $(".aCommonClassOnAllElementsIWantToFind").chosen();
    }
); 
```

# asp.net-mvc-3 - 使用 .net MVC 上传 SWFUpload 需要 Windows 登录

> ID：12800914
> 
> 赞同：0
> 
> 时间：2012-10-09T13:15:48.300
> 
> 标签：asp.net-mvc-3, swfupload

我在 MVC 应用程序中使用 SWFUpload 时遇到问题。在某些工作站上，上传程序会显示 Windows 身份验证对话框。我不知道这意味着什么。项目部署在 IIS 7 上。对于某些客户端，它适用于另一个没有。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:39:37.663

您使用的是 Authorize 属性吗？Flash 上传不发送 auth cookie，所以你必须破解一点 [http://geekswithblogs.net/apopovsky/archive/2009/05/06/working-around-flash-cookie-bug-in-asp.net- mvc.aspx](http://geekswithblogs.net/apopovsky/archive/2009/05/06/working-around-flash-cookie-bug-in-asp.net-mvc.aspx)

# jquery - 下拉菜单不会在悬停时显示

> ID：12800919
> 
> 赞同：2
> 
> 时间：2012-10-09T13:16:13.097
> 
> 标签：jquery, html, css

大家好，我有这个下拉菜单：

```
<ul id="menu">
<li class="dropDown"><a>DropDown</a>
   <div id="container">
       <div class="col1">
          <h3 class="has3">CheckOn</h3>
          <ul>
            <li><a href="#">Link1</a></li>
            <li><a href="#">Link2</a></li>
            <li><a href="#">Link3</a></li>
            <li><a href="#">Link4</a></li>
          </ul></div>
        <div class="col1">
         <h3 class="has3">MasterLink</h3>
        <ul>
            <li><a href="#">Link5</a></li>
            <li><a href="#">Link6</a></li>
            <li><a href="#">Link7</a></li>
            <li><a href="#">Link8</a></li>
        </ul></div>

    <div class="col1">
                    <h3 class="has3">MasterLink</h3>
        <ul>
            <li><a href="#">link9</a></li>
            <li><a href="#">link10</a></li>
            <li><a href="#">link11</a></li>
            <li><a href="#">link12</a></li>
        </ul></div>

    <div class="col1">
                    <h3 class="has3">MasterLink</h3>
        <ul>
            <li><a href="#">link13</a></li>
            <li><a href="#">link14</a></li>
            <li><a href="#">link15</a></li>
            <li><a href="#">link16</a></li>
        </ul></div>
</div>
</li>
</ul> 
```

用这个CSS：

```
#menu{background:#9c7d9e; padding:10px;}

#container{
    width: 550px;
    height: 150;
    border: 1px solid #c5a0b7;
    margin: 0 auto;
    display:none;
}

#mainContainer.dropDown:hover ul{
  display: block;
}

.col1{
float:left;
    margin:5px 20px 0px 20px;
    border-right:1px solid #eaeaea;
}

h3{
width:50px;
border-bottom:1px solid #ccc;
margin-bottom:5px;
  }

a{
text-decoration:none;
padding:5px 0;
} 
```

不是序数菜单，因为不是 hidden `ul`，而是使用 a `div`with other `divs`inside that contains`uls`但是当光标从菜单越过 main 时，行为应该是相同的，`li`应该显示容器`div`

我不想更改 html 结构，因为我需要按原样设计菜单。

小提琴：http: [//jsfiddle.net](http://jsfiddle.net)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T13:26:31.190

您必须改为`#container`改为阻止

[http://jsfiddle.net/RwtHn/1416/](http://jsfiddle.net/RwtHn/1416/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T13:27:56.457

您在 :hover 之后处理了错误的元素。 [http://jsfiddle.net/RwtHn/1419/](http://jsfiddle.net/RwtHn/1419/)

在 li 中使用 div 是不受欢迎的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T13:28:29.833

将 .col1 替换为 div..

[http://jsfiddle.net/8SEma/](http://jsfiddle.net/8SEma/)

# mysql - 同一列中日期之间的Mysql时间差异

> ID：12800926
> 
> 赞同：0
> 
> 时间：2012-10-09T13:16:28.237
> 
> 标签：mysql, time, diff

我想为特定的ticket_id获取停滞（NewValue）和停滞（OldValue）之间的“创建”时间差

注意：这是我的第一篇文章。由于某些限制，我无法附上图片。

```
+-----------+----------+----------+---------------------+
| Ticket_id | OldValue | NewValue | Created             |
+-----------+----------+----------+---------------------+
| 20100     | new      | wip      | 2012-10-01 07:38:18 |
| 20100     | wip      | stalled  | 2012-10-01 10:12:14 |
| 20100     | stalled  | wip      | 2012-10-01 22:09:39 |
| 20100     | wip      | open     | 2012-10-02 01:03:26 |
| 20100     | open     | stalled  | 2012-10-02 01:03:26 |
| 20100     | stalled  | wip      | 2012-10-03 06:55:42 |
| 20100     | wip      | open     | 2012-10-03 19:24:53 |
| 20100     | open     | stalled  | 2012-10-03 19:24:53 |
| 20100     | stalled  | open     | 2012-10-04 19:28:48 |
| 20100     | open     | resolved | 2012-10-04 21:01:17 |
+-----------+----------+----------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:58:20.410

使用类似的东西：

```
SET @dte:=CURRENT_DATE();
SELECT DATEDIFF(Created, @dte),@dte:=Created FROM table ORDER BY Created 
```

这将显示两个值之间的差异（第一条记录除外）。您可以添加一个额外的 IF 或者只是不显示第一个日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:43:17.387

这是我想到的一个解决方案。我不确定你是否在使用 JIRA，但我是（看起来你可能是）。我需要找出特定 JIRA 票证保持在特定状态的时间（尽管它已更改的次数）。

```
SELECT
  ThisLog.issueid,
  b.NEWSTRING,
  SUM(TIMESTAMPDIFF(HOUR,ThisLog.created,PrevLog.created)*-1) AS "Status Time"
FROM
  changegroup    AS ThisLog
LEFT JOIN
  changegroup    AS PrevLog
    ON  PrevLog.issueid = ThisLog.issueid
    AND PrevLog.created = (SELECT MAX(created)
                          FROM changegroup
                          LEFT JOIN changeitem AS b1
                          ON changegroup.ID = b1.groupid
                          WHERE issueid = ThisLog.issueid
                          AND created < ThisLog.created
                          AND b1.field = "status"
                          AND b1.NEWSTRING = "Pending Customer")
LEFT JOIN changeitem AS b
ON ThisLog.ID = b.groupid
WHERE ThisLog.issueid = 82720 AND b.field = "status" AND b.NEWSTRING = "Pending Customer"; 
```

# objective-c - 自定义 UITableViewCell 不响应更改

> ID：12800931
> 
> 赞同：1
> 
> 时间：2012-10-09T13:16:57.177
> 
> 标签：objective-c, uitableview

我创建了一个自定义`UItableViewCell`. 我在情节提要的单元格中添加了一个标签，并与班级建立了联系。我想根据行索引更改标签的位置。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";
CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

// Configure the cell...

cell.titleLabel.frame = CGRectMake(100.0, 20.0, cell.titleLabel.frame.size.width, cell.titleLabel.frame.size.height);

cell.titleLabel.text = @"Test";

return cell; 
```

}

问题是标签没有改变位置，它在我把它放在故事板中的同一个地方。但是，当我上下滚动时，再次加载单元格并且标签移动到正确的位置。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:26:30.550

看来您实际上忘记了创建单元格（至少我没有看到创建单元格的代码）。这可能看起来像：

```
SPAccountHeaderCell * headerCell = (SPAccountHeaderCell *)[tableView dequeueReusableCellWithIdentifier:@"headerCell"];
if (headerCell == nil) {
     headerCell = [[SPAccountHeaderCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"headerCell"];
} 
```

# c# - Sharepoint 贡献权限问题

> ID：12800935
> 
> 赞同：0
> 
> 时间：2012-10-09T13:17:21.837
> 
> 标签：c#, sharepoint

我有一个 sharepoint webpart，其中将给出一个文本框和提交按钮。单击提交按钮应创建一组文件夹和子文件夹，并将权限分配给具有贡献权限的组。

一切正常，即使用户/组提供权限，他们也无法将文件上传到文档库。

我使用以下代码集动态添加对文件夹/子文件夹的权限。

```
 SPGroup oGroup = web.Groups.GetByID (oFieldUserValue.LookupId);                                        
   SPPrincipal principal = (SPPrincipal)oGroup;
   SPRoleAssignment roleAssignment = new SPRoleAssignment(principal);                                        
   permFolder.Item.BreakRoleInheritance(true);                                        
   roleAssignment.RoleDefinitionBindings.Add(web.RoleDefinitions["Contribute"]);
   permFolder.Item.RoleAssignments.Add(roleAssignment);
   permFolder.Item.Update();
   finalItem.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T11:21:44.087

您可以使用 SPRoleAssignment 对象执行此操作，例如

// 假设你已经有 SPWeb 和 SPList 对象...

```
SPRoleDefinition roleDefinition = web.RoleDefinitions.GetByType(SPRoleType.Contributor);
roleAssignment.RoleDefinitionBindings.Add(roleDefinition);
if (!myList.HasUniqueRoleAssignments)
{
    myList.BreakRoleInheritance(true); // Ensure we don't inherit permissions from parent
} 
myList.RoleAssignments.Add(roleAssignment);
myList.Update(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:42:48.543

如果出现添加新项目选项，您是否检查过从功能区菜单上传文档。对于对该特定文件夹具有贡献权限的所有用户。

# c# - sslstream“当另一个写操作挂起时，无法调用 BeginWrite 方法”

> ID：12800937
> 
> 赞同：0
> 
> 时间：2012-10-09T13:17:25.813
> 
> 标签：c#, sslstream

我在让 sslstream 相互发送多条消息时遇到了一些麻烦。

我打电话给客户发送数据的方式

```
client.Send(objectOne);
client.Send(objectTwo); 
```

我收到的错误消息是：

```
The BeginWrite method cannot be called when another write operation is pending 
```

我已经尝试了不同的解决方案来让它工作，但没有一个能让它工作。

基函数使用 await，并且该函数被调用

```
// client send
public void Send(object data)
{
    byte[] sendData = SerializationHelper.Serialize(data);
    base.Send(sendData);
}
// base send
protected async void Send(byte[] data)
{
    await stream.WriteAsync(data, 0, data.Length);
} 
```

基函数返回一个任务，并在客户端方法中使用 await

```
// client send
public async void Send(object data)
{
    byte[] sendData = SerializationHelper.Serialize(data);
    await base.Send(sendData);
}
// base send
protected async Task Send(byte[] data)
{
    await stream.WriteAsync(data, 0, data.Length);
} 
```

我仍然收到同样的错误，有人知道让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:25:43.103

我对任务并行库还不太熟悉，但是...通过创建`Send`一个`async`方法，您可以开始发送操作，但不要等待它完成。您需要等待`Send`完成。一种方法是同步运行它：

```
client.Send(objectOne).RunSynchronously();
client.Send(objectTwo).RunSynchronously(); 
```

相反，您也可以在客户端级别执行此操作，如下所示：

```
// client send
public void Send(object data)
{
    byte[] sendData = SerializationHelper.Serialize(data);
    base.Send(sendData).RunSynchronously();
}
// base send
protected async void Send(byte[] data)
{
    await stream.WriteAsync(data, 0, data.Length);
} 
```

# jquery-ui - 更改动态加载的隐藏表单元素的值

> ID：12800939
> 
> 赞同：0
> 
> 时间：2012-10-09T13:17:26.043
> 
> 标签：jquery-ui, jquery, jquery-selectors

我无法更改通过 ajax 动态加载的隐藏表单元素的值。当用户单击日期时，我希望一些隐藏的输入字段自动更新为日、月和年（为简化起见，代码中只显示了日）。

我想主要问题是如何选择通过 ajax 动态加载的元素。

简化代码：

**索引.php**

```
<a href="#" id="someLink">Click Me</a> 
```

**包含.js**

```
$(document).ready(function(){
    $('#someLink').click(function(){
        // Create modal dialog dynamically
        var modal = $('<div/>').attr({
            id:'new' + objectName + 'Modal',
            class:'modal hide fade',
            tabindex:'-1',
            role:'dialog',
        });

        // Ajax call to load modal
        $.ajax({
            url: "getModal.php",
        }).done(function ( data ) {
            modal.html(data);
        });

        // show form
        modal.modal('show');    

        return false;
    });

    // bind datepicker from jQuery UI to text input
    $("body").on({
        focus: function(){ 
             $('.datepicker').datepicker({
                onClose: function(dateText, inst) {
                    var inputName = $(this).attr("name"); //returns "startDate"
                    console.log($('#'+inputName+'_day')); // returns "[]"
                    $('#'+inputName+'_day').val(new Date(dateText).getDate());
                  }
            });
        }
    },'.datepicker');
}); 
```

**getModal.php**

```
echo <?php
echo "<form name='modalForm'>";
echo "<input type='hidden' name='startDate_day' id='startDate_day'>";
echo "<input type='text' class='datepicker' name='startDate' id='startDate'>";
echo "</form>";
echo ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:32:29.957

DOM 元素的加载方式应该没有问题，如果它存在的话 - jQuery 会找到它。

您应该通过`name`选择器选择您的元素

```
$('input[name="' + inputName + '"_day"]').val(...); 
```

或者给你加载的输入一个`id="startDate_day"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:42:45.567

您可以使用 Chrome 控制台或 Firebug 来尝试以下代码段。

```
console.log(inputName);
$('#'+inputName+'_day').val(); 
```

必须存在具有该名称的元素，否则 jQuery 将无法返回任何内容。

就像另一种调试技术一样，您可以尝试在页面视图源中搜索“表单”一词，以查看您想要的表单是否已加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:33:52.803

我能够找到问题的原因，希望对其他人有所帮助。

我使用 Grails/Rails，它会自动在 ID 中添加一个句点字符，但我忽略了这一点。我随后尝试使用 jQuery 来调用名称中带有句点的元素，这将不起作用（因为句点是为类名保留的）。

我确实创建了一个[jsfiddle](http://jsfiddle.net/vucaL/12/)，显示此问题中的详细信息成功运行。

# redhat - RHEL6 上的 Vncserver 无法启动，无法建立任何监听套接字

> ID：12800941
> 
> 赞同：1
> 
> 时间：2012-10-09T13:17:27.830
> 
> 标签：redhat, vnc-server

我之前在我的 RHEL6 上安装了 vncserver，并且可能让一些服务运行。然后我重新安装了它，但无法启动服务。显然有一些视图已经在运行，但它创建了一个视图：6，我能够从 Windows7 连接到我的 RHEL 机器。

为了解决我的上述问题，我停止了 vncserver 服务，转到我的 /tmp/.X11-unit/ 目录并从那里删除所有文件（X0-X6）

我现在尝试启动 vncserver，但出现以下错误。我可以使用参数“-nolisten tcp -localhost”成功启动它，但是当我尝试使用我的 VNC 客户端从 Windows7 连接时，它只会出现黑屏。

“警告：第一次尝试启动 Xvnc 失败，可能是因为未正确配置字体目录。尝试为此系统确定适当的字体路径并使用该字体路径重新启动 Xvnc ... 无法启动 Xvnc。

_XSERVTransSocketUNIXCreateListener：...SocketCreateListener() 失败 _XSERVTransMakeAllCOTSServerListeners：服务器已经在运行警告：Xalloc：请求大量内存：0 字节。

致命的服务器错误：无法建立任何侦听套接字 - 确保 X 服务器尚未运行 _XSERVTransSocketUNIXCreateListener：...SocketCreateListener() 失败 _XSERVTransMakeAllCOTSServerListeners：服务器已在运行 警告：Xalloc：请求令人不快的大量内存：0 字节。

致命的服务器错误：无法建立任何侦听套接字 - 确保 X 服务器尚未运行”

有想法该怎么解决这个吗？:) 我已经重新安装了 vncserver，并使用“ps -ef | grep vnc”检查没有其他 vnc 服务正在运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:40:09.760

我在 CentOS 6.4 中遇到过类似的问题。正如警告所说，真正的问题是 Xvnc 没有启动。Xvnc 依赖于其他几个服务来支持 Xwindow（例如 xfs 字体服务）。我付出了很多努力来寻找丢失的东西，但却空手而归。

所以我所做的是做一个完整的“yum update”（在 Centos 中），问题就解决了。

如果你想进一步挖掘，我建议关注 Xorg 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:49:14.290

如果他们的会话（或所有者）不再存在，您可以删除这些套接字和锁，通常他们有一个有效的用户，删除的用户可能有剩菜（ls -l 将显示一个 uid 而不是名称）

似乎对 DISPLAY 变量的编号候选进行了迭代。

还要验证此 rpm 是否存在：xorg-x11-fonts-misc [https://bugzilla.redhat.com/show_bug.cgi?id=498507](https://bugzilla.redhat.com/show_bug.cgi?id=498507)

# sql-server-2005 - 为更多类别创建表格

> ID：12800947
> 
> 赞同：-2
> 
> 时间：2012-10-09T13:17:42.690
> 
> 标签：sql-server-2005

我需要知道使用以下信息创建表的合适方法：ID、类别、子类别。

类别有更多的子类别，但我也可以添加新的子类别，将来的子类别，我尝试为类别和子类别创建两个表，但是当我需要添加新的子类别时，我将面临一个至关重要的问题子类。

那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:21:04.673

您不需要超过 2 列。

您只需要一个主键 (ID) 和一个外键 (Parent ID)

```
CategoryID_PK       INT
ParentCategory_FK   INT 
```

使用此设置，您可以拥有无​​限数量的关卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:21:21.677

由于您需要添加子子类别等，因此您只需要创建一个`categories`带有的表`ParentCategoryID`，例如：

**`Categories`**：

*   `Id`,
*   `Name`,
*   `ParentCategoryID`.

然后，您可以使用 CTE 使用递归查询来获取每个子类别的任何类别层次结构树。

# javascript - Javascript 适用于除 IE 9 以外的所有浏览器

> ID：12800953
> 
> 赞同：1
> 
> 时间：2012-10-09T13:17:57.363
> 
> 标签：javascript, internet-explorer, internet-explorer-9, compatibility, backwards-compatibility

当我单击一个按钮时，使用 onClick 功能，我将图像替换为另一个图像。代码是这样的

```
<a class="blue_button" onClick="javascript:loading.style.display='block';zip.style.visibility='hidden';"
href="javascript:getsupport('zip')" id="download">
<img id="zip" src="img/zip.png">
<img id="loading" src="img/loading.gif">
</a> 
```

在CSS中我有这个：

```
 .blue_button{
    display:block;
    height:30px;
    margin-right:20px;
    float:left;
    width:110px;
    color:#FFF;
    font-size:12px;
        border-radius:4px;
        padding:0 23px 0 20px;
    }

        .blue_button img{
            position:relative;

top:5px;
        margin-right:7px;
    }

    .blue_button img#loading{
        display:none;
        float:left;
        top:-17px;
    } 
```

它适用于所有浏览器，除了 IE9。如果我激活兼容模式，它可以工作，但我需要保持标准模式。

== 已解决 == 使用不显眼的 js。谢谢大家

```
window.onload = loading;
function loading()
{
    document.getElementById('download').onclick = function()
    {
        document.getElementById('zip').style.visibility = 'hidden';
        document.getElementById('loading').style.display = 'block';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:24:12.107

我想我发现了问题：

```
onClick="javascript:loading.style.display='block';zip.style.visibility='hidden';" 
```

onclick 事件不需要`javascript:`

如果您包含其余的 JavaScript，我也许可以对其进行测试。

你也有onclick和href。您可能只想使用其中之一。你可能想看看你可以[在这里](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)`addEventListener()`阅读更多关于它的信息。

另一方面，您的 CSS 类命名非常糟糕。你不想称它们为蓝色、红色等。这可以改变。你想保持它们的语义。

阅读：[什么是语义类名称？](http://css-tricks.com/semantic-class-names/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:38:02.387

您正在使用一个名为加载的对象。但它不存在它的 DOM id。所以你需要首先使用 document.getElementById("loading") （或 querySelector）从页面中检索它。

尝试将您的代码更改为

```
onClick="document.getElementById("loading").style.display='block';onClick="document.getElementById("zip").style.visibility='hidden';" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:55:06.847

正如@Allan 所说，你有太多事情要做，你依赖于副作用和范围重载

我会这样做：

纯JS

```
window.onload=function() {
  document.getElementById("download").onclick=function() {
    document.getElementById("loading").style.display='block';
   // use .display='none' to remove, 
   // visibility='hidden' to hide but leave the space
    document.getElementById("zip").style.display='none'; 
    getsupport('zip');
    return false;
  }
} 
```

jQuery：

```
$(function() {
  $("#download").on("click",function() {
    $("#loading").show();
    $("#zip").hide(); 
    getsupport('zip');
    return false;
  });
}); 
```

两种情况下的 HTML：

```
<a class="blue_button" href="#" id="download"><img id="zip" src="img/zip.png"><img id="loading" src="img/loading.gif"></a> 
```

# arrays - 索引超出了 Visual Basic 中的数组范围

> ID：12800954
> 
> 赞同：1
> 
> 时间：2012-10-09T13:18:01.307
> 
> 标签：arrays, vb.net, visual-studio-2010

这只是我的一段代码，但它给我带来了问题。代码的预期目的是获取用户输入并使其成为数组的大小。但是，无论我输入什么值，它都会给我错误“索引超出数组范围”。

这是代码：

```
Option Explicit On
Option Strict On

Imports System

Module numbers
    Sub Main()
        'index decides number of candidates.
        Dim index as integer
        Dim candidate(index) as integer

        Console.Write("Please enter the number of candidates in the election: ")
        index=Convert.toInt32(Console.Readline())

        Do Until candidate(index) >= 0
            Console.Write(" Enter the name of candidate: ")
            candidate(index)=Convert.toInt32(Console.Readline())

            candidate(index) -=1
        Loop
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:22:23.777

当仍然等于 0 时，您正在声明数组的大小。`index`您需要将数组声明移动到`index`设置为输入值的行下方：

```
' ...
Console.Write("Please enter the number of candidates in the election: ")
index=Convert.toInt32(Console.Readline())
Dim candidate(index) as integer
' ... 
```

就循环而言，我对您要完成的工作完全感到困惑，但看起来确实有更好的方法来做到这一点。如果您要解释您对该循环的意图，我可能会建议一个更好的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:22:41.687

你这里有几个问题。

首先，您需要在知道数组有多大**之后对其进行初始化。**

其次，你会发现 For 循环比 Do 循环更容易实现逻辑，因为你不需要手动跟踪循环计数器。

最后，您将候选名称转换为整数。大多数人的名字都不是数字！

```
Sub Main()
    'index decides number of candidates.
    Dim index as integer

    Console.Write("Please enter the number of candidates in the election: ")
    index=Convert.toInt32(Console.Readline())

    ' We now know how big the array needs to be so you can initialise it.
    Dim candidate(index) as integer

    ' We use a For loop so that we don't have to worry about the 
    ' loop counter ourselves.
    For i As Integer = 0 to (index - 1)
        Console.Write(" Enter the name of candidate: ")
        ' Your candidate names appear to be an integer - 
        ' Surely that's not right??! I think you meant
        ' candidate(i) = Console.Readline()
        candidate(i)=Convert.toInt32(Console.Readline())
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:24:31.833

如果我没看错，您正在使用 Index 给候选人一个大小。但是你在它从控制台获取值之前使用它。所以它的大小为 0。将 Dim 状态移到 readline 之后。此外，您应该使用 integer.tryparse 之类的东西来读取控制台。

另外，我不明白你 do while 的目的，a for i = to index 会更清楚......

# c# - 中继器不显示图像 - 解决 url 的问题

> ID：12800965
> 
> 赞同：1
> 
> 时间：2012-10-09T13:18:21.167
> 
> 标签：c#, asp.net, repeater

我有一个 aspx 页面，它使用 DS 的中继器显示数据。数据库中的一个填充是图像的路径。我希望显示图像本身。我也在尝试使用 c# 中的代码。

aspx的代码：

```
 <asp:Repeater ID="ExampleRepeater" runat="server" 
    DataSourceID="SqlDataSource1" onitemdatabound="ExampleRepeater_ItemDataBound" >
    <HeaderTemplate>
        <table>
            <tr>
                <th>   choose
                </th>
                <th>   product is
                </th>
                <th>   products
                </th>
                <th>   price
                </th>
                <th>   des
                </th>
                <th>   path
                </th>
                <th>   pic
                </th>
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:CheckBox ID="checkbox1" runat="server"  
                    CausesValidation="false"></asp:CheckBox>
            </td>
            <td>

                <asp:Label ID="lblID" runat="server" Text='<%# Eval("ProductID") %>'></asp:Label>

            </td>
            <td>
                <asp:Label ID="lblName" runat="server" Text='<%# Eval("ProductName") %>'></asp:Label>
            </td>

            <td>
                 <asp:Label ID="lblPrice" runat="server" Text='<%# Eval("Price") %>'></asp:Label>
            </td>

            <td>
                  <asp:Label ID="lblSum" runat="server" Text='<%# Eval("Summary") %>'></asp:Label>
            </td>

            <td>
            <asp:Label ID="lblPic" runat="server" Text='<%# Eval("picPath") %>'></asp:Label>
            </td>

            <td>
            <asp:HiddenField Value='<%# Eval("picPath") %>' ID="HiddenField1" runat="server" />
                <asp:Image ID="Image1" runat="server" />
            </td>

            </tr>
           </ItemTemplate>

    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

C#代码：

```
protected void ExampleRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        HiddenField hf = e.Item.FindControl("HiddenField1") as HiddenField;
        if (hf != null)
        {
            string val = hf.Value;
            Image img = e.Item.FindControl("Image1") as Image;
            img.ImageUrl =   val + ".jpg";
        }
    } 
```

它不工作，我错过了一些东西 - 我不知道。请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:30:46.103

您可以尝试使用 - 基于`Server.MapPath`以定义相对路径

```
img.ImageUrl = Server.MapPath(val + ".jpg"); 
```

# php - 多个文件和参数的重写规则

> ID：12800966
> 
> 赞同：1
> 
> 时间：2012-10-09T13:18:26.037
> 
> 标签：php, .htaccess, rewrite

目前我在我的 .htaccess 中有这个重写规则来`[value]`传递`http://www.site.com/[value]`给`/page?q=[value]`

```
RewriteRule ^([a-zA-Z0-9_-]+)$ page?q=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ page?q=$1 
```

我怎样才能实现以下额外的重写：

`http://www.site.com/foo/1`-> `http://www.site.com/page?param=1` `http://www.site.com/bar/1`-> `http://www.site.com/page?param2=1` `http://www.site.com/baz/1`->`http://www.site.com/page2?param=1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:21:34.597

由于级别较高，通过在旧的前面添加更多的重写，规则应该在旧的前面：

```
RewriteRule ^bar/([1-9])$                  page?param2=$1 [L]
RewriteRule ^baz/([1-9])$                  page2?param=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([1-9])$     page?param=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/$            page?q=$1  [L]
RewriteRule ^([a-zA-Z0-9_-]+)$             page?q=$1  [L] 
```

# php - 在 php 上创建 web 服务

> ID：12800967
> 
> 赞同：1
> 
> 时间：2012-10-09T13:18:29.087
> 
> 标签：php, web-services, web

我正在尝试创建一个 Web 服务，但我不明白这里有什么问题。

简单客户端.php

```
 <?php
include_once("nusoap.php");

try {

// Create a soap client using SoapClient class
// Set the first parameter as null, because we are operating in non-WSDL mode.
// Pass array containing url and uri of the soap server as second parameter.
$client = new SoapClient(null, array(
'location' => "http://www.example.com/SimpleServer.php",
'uri' => "http://www.example.com"));
// Read request parameter
$param = $_POST['name'];
// Invoke AddHello() method of the soap server (HelloServer)
$result = $client->AddHello($param);
echo $result; // Process the the result
echo "test";
}
catch(SoapFault $ex) {
$ex->getMessage();
echo 'test';
}
?> 
```

简单服务器.php

```
 <?php
include_once("nusoap.php");

// Simple Method get 1 parameter and return with Hello
function AddHello($name)
{
     return "Hello $name";
}
// Create SoapServer object using WSDL file.
// For the simplicity, our SoapServer is set to operate in non-WSDL mode. So we do not need a WSDL file
$server = new SoapServer(null, array('uri'=>'http://www.example.com'));
// Add AddHello() function to the SoapServer using addFunction().
$server->addFunction("AddHello");
// To process the request, call handle() method of SoapServer.
$server->handle();
?> 
```

简单视图.php

```
 <?php
echo "<h2>Welcome to PHP Web Service</h2>";
echo "<form action='SimpleClient.php' method='POST'/>";
echo "<input name='name' /><br/>";
echo "<input type='Submit' name='submit' value='Send'/>";
echo "</form>";
?> 
```

当我调用 www.example.com/SimpleView.php 并将其进程的任何单词输入到 SimpleClient.php 时，没有显示任何结果。

我正在关注[本教程](http://www.phpgang.com/create-a-web-service-with-php_43.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:59:29.093

我检查了您引用的教程，它对我有用，只需下载他们提供的代码并更改 SimpleClient.php 文件中的 uri 参数。

如果您的 apache 服务器托管在端口 80 以外，请正确指定。

我从那里下载了代码并粘贴到 Web_Service 目录中的 webroot 目录中。

所以 SimpleClient.php 看起来像端口 80

```
<?php
try {
// Create a soap client using SoapClient class
// Set the first parameter as null, because we are operating in non-WSDL mode.
// Pass array containing url and uri of the soap server as second parameter.
$client = new SoapClient(null, array(
'location' => "http://localhost/Web_Service/SimpleServer.php",
'uri' => "http://localhost/Web_Service/"));
// Read request parameter
$param = $_POST['name'];
// Invoke AddHello() method of the soap server (HelloServer)
$result = $client->AddHello($param);
echo $result; // Process the the result
}
catch(SoapFault $ex) {
$ex->getMessage();
}
?> 
```

如果您的服务器托管在不同的端口中，则像这样指定端口。这里我提到了 81 端口

```
<?php
try {
// Create a soap client using SoapClient class
// Set the first parameter as null, because we are operating in non-WSDL mode.
// Pass array containing url and uri of the soap server as second parameter.
$client = new SoapClient(null, array(
'location' => "http://localhost:81/Web_Service/SimpleServer.php",
'uri' => "http://localhost:81/Web_Service/"));
// Read request parameter
$param = $_POST['name'];
// Invoke AddHello() method of the soap server (HelloServer)
$result = $client->AddHello($param);
echo $result; // Process the the result
}
catch(SoapFault $ex) {
$ex->getMessage();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-10T13:15:12.607

在 SimpleServer 中：在使用 AddHello 函数之前，你需要 rigester 它

```
$server->register('AddHello',$name) 
```

有关 Web 服务的更多信息并解决您的问题，请查看此链接： http: [//www.codeproject.com/Tips/671437/Creating-Web-Service-Using-PHP-Within-Minutes](http://www.codeproject.com/Tips/671437/Creating-Web-Service-Using-PHP-Within-Minutes)

# asp.net - 当我使用 JSONValue 响应来自 SOAP WebService 的字符串时，NSDictionary 为空

> ID：12800973
> 
> 赞同：1
> 
> 时间：2012-10-09T13:18:45.857
> 
> 标签：asp.net, json, web-services, xcode4.2, asihttprequest

Currentyl 我正在使用 XCode4.2.1 开发 IOS 应用程序。我的应用程序正在从 asp.net Web 服务中获取 json 值。这是我获取 Web 服务的代码。

```
-(BOOL)GrabbingStudentsWebService{
NSURL *url=[NSURL URLWithString:@"http://www.cheaptal.com/easypft/Service1.asmx"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setRequestMethod:@"POST"];
[request addRequestHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];
[request addRequestHeader:@"SOAPAction" value:@"http://cheaptal.com/GetAllStudents"];

NSString *soapMsg= [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                    "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                    "<soap:Body>"
                    "<GetAllStudents xmlns=\"http://cheaptal.com/\" />"
                    "</soap:Body>"
                    "</soap:Envelope>"];

NSString *messageLength = [NSString stringWithFormat:@"%d",[soapMsg length]];
[request addRequestHeader:@"Content-Length" value:messageLength];
[request appendPostData:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]];
[request setDelegate:self]; 
[request startAsynchronous]; 

MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.labelText = @"Sync...";

return TRUE;} 
```

这是我的请求完成代码

```
- (void)requestFinished:(ASIHTTPRequest *)request{    
[MBProgressHUD hideHUDForView:self.view animated:YES];
if (request.responseStatusCode == 200) {

    NSString *response = [request responseString];
    txtview.text = response;
    NSDictionary *insidejson=[[NSDictionary alloc] init];
    insidejson = [response JSONValue]; //my problem is here.
} else {
    txtview.text = @"cannot retrieve data.";
}} 
```

这是来自网络服务的响应代码：

```
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetAllStudentsResponse xmlns="http://cheaptal.com/"><GetAllStudentsResult>[{"stu_name":"COEMAW","stu_sitreach":10.5,"stu_broadjump":12.3,"stu_napfarun":"11:54.32"},{"stu_name":"LINA","stu_sitreach":2.5,"stu_broadjump":5.3,"stu_napfarun":"10:54.22"},{"stu_name":"ULD27","stu_sitreach":6.5,"stu_broadjump":7.3,"stu_napfarun":"09:54.12"},{"stu_name":"MOTTA","stu_sitreach":7.5,"stu_broadjump":9.3,"stu_napfarun":"10:33.52"}]</GetAllStudentsResult></GetAllStudentsResponse></soap:Body></soap:Envelope> 
```

我的问题是，当我尝试使用**JSONValue** ( *insidejson = [response JSONValue]; ) 解析对***NSDictionary的****响应**字符串时， insidejson 变量中没有值。我仍然不知道为什么*insidejson*是空的。

 ******非常感谢您的帮助！飞镖蛙******

# php - 如何将加盐密码显示为字符串

> ID：12800974
> 
> 赞同：4
> 
> 时间：2012-10-09T13:18:46.393
> 
> 标签：php

我在下面有一段代码，它与加盐密码相呼应：

```
 $pass = rand();
            $pass = md5($pass);
            $pass = substr($pass, 0, 15);
            $pass = md5(md5("g3f".$pass."rt4")); 
```

现在，如果我回显 $pass，它将输出例如：

```
8723d9c8a8b2af798be25fd07ab0ff0a 
```

但我想要做的是回显密码本身，例如，它不会显示上面的内容，而是显示字符串“密码”。

如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T13:20:31.147

你不能。散列是一条单行道。如果要隐藏稍后需要显示的字符串，则需要使用加密。但是，在密码方面，这是一个禁忌。

为了解决问题的第二部分，您永远不应该通过电子邮件发送用户密码。实施服务器端解决方案（例如使用安全问题 + 验证他们的电子邮件）并在身份验证后允许用户直接在网站上更改他们的密码。

哦，还有一件事 -**忘记 MD5**！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:21:34.190

不要覆盖变量`$pass`；

```
 $pass = rand();
    $md5pass = md5($pass);
    $md5pass = substr($md5pass, 0, 15);
    $md5pass = md5(md5("g3f".$md5pass."rt4")); 
```

MD5 散列特别是使用盐是一种单向过程。你不能逆转它。

任何好的密码系统都不会存储原始密码，而是存储散列副本，然后通过散列输入并比较两者来验证用户输入的正确性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:21:47.217

```
 $pass = rand();
        $originalPass = $pass;
        $pass = md5($pass);
        $pass = substr($pass, 0, 15);
        $pass = md5(md5("g3f".$pass."rt4")); 
        echo $originalPass; 
```

或者

```
 $pass = rand();
    echo $pass;
    $pass = md5($pass);
    $pass = substr($pass, 0, 15);
    $pass = md5(md5("g3f".$pass."rt4")); 
```

# inno-setup - 使用 Inno Setup 安装额外的可再发行文件

> ID：12800977
> 
> 赞同：7
> 
> 时间：2012-10-09T13:18:59.577
> 
> 标签：inno-setup

我正在使用 Inno setup 将我的工具与一些 dll 一起安装。但是，我需要在安装过程中运行一个 microsoft redistributable .exe。如何将其嵌入到设置过程中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T13:41:03.687

如果您想在您的应用程序中安装其他可再发行组件，您可以使用带有标志的普通`[Files]`条目将它们添加到设置中。`dontcopy`

然后，您可以在`PrepareToInstall`事件函数期间使用该`ExtractTemporaryFile()`函数提取它并使用`Exec()`.

此方法还允许您检查退出代码并在需要时提示重新启动。

ISXKB wiki 上有各种[相关文章。](http://www.vincenzo.net/isxkb/index.php?title=Special%3ASearch&search=runtime&ns0=1&fulltext=Search)

# javascript - Google Map - 使用标记列表显示特定标记弹出窗口

> ID：12800979
> 
> 赞同：0
> 
> 时间：2012-10-09T13:19:01.403
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有以下代码：

```
<?php //include_once("connectionmarker.php");?>
<!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Cherrybird</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
         <script src="jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
   (function() {

    window.onload = function() {

        // Creating a new map
        var map = new google.maps.Map(document.getElementById("map"), {
          center: new google.maps.LatLng(50.8967,-1.40225),
          zoom: 18,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

    var customIcons = {
      Now: {
        icon: 'img/fourmarker.png',

      },
      Soon: {
        icon: 'img/marker.png',

      }
    };

        // Creating a global infoWindow object that will be reused by all markers
        var infoWindow = new google.maps.InfoWindow();

        var list = document.getElementById('list');

        $.getJSON("connectionmarker.php", function(data) { 

         for (var i = 0; i < data.length; i++ ){

            // Looping through the JSON data

                var datanew = data[i] 
                //alert (data[i].Availibility);
                latLng = new google.maps.LatLng(datanew.Lat, datanew.Lon);

                    var iconimage = datanew.Availibility;
                    var icon = customIcons[iconimage] || {};

                // Creating a marker and putting it on the map
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map,
                    icon: icon.icon,
                    title: datanew.Propertynanu
                });
                // add items
                var listItem= document.createElement('li')
                listItem.className = "content";
                listItem.innerHTML = "House:" + datanew.Propertynanu + "<br />" + datanew.Postcode + "<br />" + datanew.Availibility + "<br />" ;
                list.appendChild(listItem);

                // Creating a closure to retain the correct data
                (function(marker, datanew) {

                    // Attaching a click event to the current marker
                    google.maps.event.addListener(marker, "click", function(e) {

                    //"Id:" + data[i].Id + "<br /> Property Name/Number:" + data[i].Propertynanu + "<br /> Rooms:" + data[i].Rooms
                        infoWindow.setContent("House:" + datanew.Propertynanu + "<br />" + datanew.Postcode + "<br />" + datanew.Availibility + "<br />" );
                        infoWindow.open(map, marker);
                    });

                })(marker, datanew);

            }
        });
    }

})();

  </script>

  </head>

  <body>
    <div id="map" style="width: 1000px; height: 500px"></div>
    <ul id="list"></ul>
  </body>

</html> 
```

我想要做的是将列表项动态添加到 div 中的页面，然后允许用户单击每个 div，相关 infoWindow 将显示在地图上。我已经使用 openlayers 完成了此操作，但现在需要使用 Google 地图完成此操作。

我已经将列表添加到页面，其中包含以下内容：

```
// add items
                var listItem= document.createElement('div')
                listItem.className = "content";
                listItem.innerHTML = "House:" + datanew.Propertynanu + "<br />" + datanew.Postcode + "<br />" + datanew.Availibility + "<br />" ;
                list.appendChild(listItem); 
```

下一步是让它在列表中单击时显示相关标记的信息窗口。有人能帮忙吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T05:52:43.260

注册一个将显示信息窗口的事件侦听器。它基本上与从标记运行的代码相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:23:37.260

这是一个制作可点击侧边栏的示例（翻译自 Mike Williams 的 v2 教程）：

[http://www.geocodezip.com/v3_MW_example_map3.html](http://www.geocodezip.com/v3_MW_example_map3.html)

关键是保留一组标记，以便您可以访问它们以打开信息窗口。

# html - 具有直线过渡的两种颜色边框

> ID：12800980
> 
> 赞同：3
> 
> 时间：2012-10-09T13:19:02.897
> 
> 标签：html, css

我试图在我的底部实现不同颜色的边框`div`，但没有像这样的对角线边缘：

![在此处输入图像描述](../Images/caeedde328ff6cb456477013436b5b9f.png)

我已经查看了`:before`选择器，但我无法让它工作。如何在 css 中实现这一点。我也更喜欢兼容 IE7。

这是我创建的一个小小提琴。[http://jsfiddle.net/EYjCV/11/](http://jsfiddle.net/EYjCV/11/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:26:38.037

[**演示**](http://jsfiddle.net/gionaf/LA4Lh/)

HTML：

```
<div class="bordered">Hey Hey Hey</div>​ 
```

CSS：

```
.bordered {
    background-color: red;
    border: 5px solid blue;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 15px;
    width:100px;
    position:relative;
}
.bordered:before {
    position:absolute;
    bottom:-5px; left:0; right:0;
    content:" ";
    color: transparent;
    border-bottom: 5px solid lime;
}​ 
```

IE7 不支持伪元素。有一个很棒的 polyfill 叫做[**ie9.js**](http://code.google.com/p/ie7-js/)，或者你可以添加一个额外的`<span>`元素并按照下面的方法：

* * *

[**演示跨浏览器**](http://jsfiddle.net/gionaf/LA4Lh/)

HTML：

```
<div class="bordered">Hey Hey Hey<span></span></div>​ 
```

CSS：

```
.bordered {
    background-color: red;
    border: 5px solid blue;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 15px;
    width:100px;
    position:relative;
}
.bordered span {
    position:absolute;
    bottom:-5px; left:0; right:0;
    border-bottom: 5px solid lime;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:26:47.597

看到[这个 jsFiddle](http://jsfiddle.net/glee/kQmbb/)。

这是大纲，HTML：

```
<div class = "yourdiv">Glee is awesome!</div> 
```

CSS：

```
.yourdiv{
    border: 10px skyblue solid; /*or whatever your border definition is*/
    position: relative; /*necessary*/
    /*stuff for prettiness*/
    background: rgb(0, 162, 232);
    color: white;
    width: 200px;
    height: 200px;
}
.yourdiv:after {
    content: '';
    position: absolute;
    bottom: -10px; /*width of border, negated*/
    height: 10px; /*width of border*/
    left: 0;
    right: 0; /*make sure it spans the whole space horizontally*/
    background: orange; /*blue, in your case*/
} 
```

为了让它在**IE7**中工作（因为它[不支持](http://caniuse.com/css-gencontent) `:after`和伪选择器），在你的内部`:before`创建一个，给它一个类（假设它是），并使用与上面样式相同的东西来设置它的样式。`div``div``.borderdiv``.yourdiv:after`

适用于 IE7 的修改版本：[little link](http://jsfiddle.net/glee/X4JPb/)。

# android - Android中带低通滤波器的加速度计

> ID：12800982
> 
> 赞同：4
> 
> 时间：2012-10-09T13:19:14.947
> 
> 标签：android, accelerometer, lowpass-filter

我想在我的应用程序中使用 android 中的加速度计。在文档中给出如下：

```
 final float alpha = 0.8;

   // Isolate the force of gravity with the low-pass filter.

   gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0]; 
```

但低通滤波器的工作原理如下：

```
 output = alpha*input + (1-alpha)*previousoutput; 
```

我的问题是为什么我们将重力作为输入而将传感器事件作为先前的输出？它必须是其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:52:43.503

从技术上讲，它使用两个输入的线性混合：`mix(α,x,y) = α * x + (1-α) * y`.

现在`mix(α,x,y)`相当于`mix(1-α,y,x)`. 因此，您可以根据需要反转信号，制作`alpha = 0.2`并且一切都将正常工作。

# c# - 通过FTP c#将txt文件上传到位于服务器上的文件夹

> ID：12800987
> 
> 赞同：0
> 
> 时间：2012-10-09T13:19:19.527
> 
> 标签：c#, ftp, text-files

我用谷歌搜索了这个并遇到了很多教程，这些教程很好，但我收到一个小错误“远程服务器返回错误：（550）文件不可用（例如，找不到文件，无法访问）。”

这是我的代码

 `````
 try
            {
                // Get the object used to communicate with the server.
                FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://" + "XXX.XXX.XX.XXX/array1/Despatch");
                request.Method = WebRequestMethods.Ftp.UploadFile;

                // This example assumes the FTP site uses anonymous logon.
                request.Credentials = new NetworkCredential("UserName", "Password");

                // Copy the contents of the file to the request stream.
                StreamReader sourceStream = new StreamReader(Server.MapPath(System.Configuration.ConfigurationManager.AppSettings["DespatchExpressData"]));
                byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
                sourceStream.Close();
                request.ContentLength = fileContents.Length;

                Stream requestStream = request.GetRequestStream();
                requestStream.Write(fileContents, 0, fileContents.Length);
                requestStream.Close();

                FtpWebResponse response = (FtpWebResponse)request.GetResponse();

                Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

                response.Close();
            }
            catch (WebException e)
            {
                String status = ((FtpWebResponse)e.Response).StatusDescription;
            } 
````  `在调用上述方法之前，会创建一个文本文件并将其保存在我的项目解决方案中名为 DispatchDetails 的文件夹中，该 txt 文件称为 Data.txt 我使用 StreamReader 获取 txt 文件，然后尝试将其上传到 FTP 上的文件夹帐户

我什至尝试对流式阅读器部分进行硬编码，但仍然出现错误:(

它落在这条线上

 `````
Stream requestStream = request.GetRequestStream(); 
````  `任何帮助将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:44:03.617

看看[这里](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/8caa2570-f185-4c31-91b3-940ab7c7c3a2)

可能您必须为 设置正确的 URI `WebRequest.Create`，例如

```
WebRequest.Create("ftp://" + "XXX.XXX.XX.XXX//array1/Despatch"); 
```

而且，当然，请检查您是否有权写入:)````

# objective-c - 评估 NSString 并作为 Objective-C 代码执行

> ID：12800988
> 
> 赞同：3
> 
> 时间：2012-10-09T13:19:23.937
> 
> 标签：objective-c, loops, nsstring, concatenation

这可能是一个完全荒谬的问题，但是可以使用`NSString`a 代替一行代码吗？

```
for (int i = 0; i < 10: i++){    
    NSString *cam = @"locXCamProfileSwitch";
    ["%@", cam setOn:YES];
] 
```

也可以将索引`i`合并到替换中`X`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:27:05.413

这通常是不可能的（据我所知），但可以通过使用字符串来访问 ivars、属性、类和方法。

*   可以像这样访问实例变量和属性：

    ```
    [self valueForKey:@"key"]; 
    ```

*   类可以这样引用：

    ```
    Class cls = NSClassFromString(@"MyClass");
    [cls aClassMethod]; 
    ```

*   方法可以这样使用：

    ```
    SEL selector = NSSelectorFromString(@"myMethod:");
    [self performSelector:selector]; 
    ```

要将字符串中的占位符替换为数字，您可以使用格式化程序：

```
NSString *cam = [NSString stringWithFormat:@"loc%dCamProfileSwitch", i]; 
```

话虽如此，给变量名编号从来都不是一个好主意。

**改用数组：**

```
int switchCount = 10;
NSMutableArray *switches = [[NSMutableArray alloc] initWithCapacity:switchCount];
for (int i = 0; i < switchCount; i++) {
    CGRect rect = CGRectMake(10, 10+i*30, 70, 40); // or something like that.
    UISwitch *sw = [[UISwitch alloc] initWithFrame:rect];
    sw.tag = i;
    [sw addTarget:self action:@selector(switchChanged:) 
                 forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:sw];
    [switches addObject:sw];
}
self.switches = [NSArray arrayWithArray:switches];  // assuming you have a property "switches". 
```

然后你可以简单地迭代它：

```
for (UISwitch *switch in self.switches) {
    [switch setOn:YES];
} 
```

并在其中一个发生如下变化时收到通知：

```
- (void)switchChanged:(id)sender {
    UISwitch *theSwitch = (UISwitch *)sender; // the switch that changed.
    int tag = theSwitch.tag;  // number of switch that changed.
    // do something....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:28:35.363

按字符串名称查看[Objective C 对象？](https://stackoverflow.com/questions/2972607/objective-c-object-by-string-name)

但本质上你做错了。创建一个包含 10 个开关的数组并对其进行迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:25:29.160

将所有开关添加到数组中，并使用其索引对其进行迭代。

# java - 如何使用java解析html列表值

> ID：12800991
> 
> 赞同：1
> 
> 时间：2012-10-09T13:19:28.560
> 
> 标签：java, html, parsing

我只想从 html 文件中解析两个值。

![在此处输入图像描述](../Images/f65676ee96d8bb8f12144418f119286c.png)

html文件中会有几个列表元素，我想解析两个值

一种。1,100, 101 b。Swargate 到 Shivajinagar Circle 路线，Mnapa bhavan 到..，Kothrud 仓库到...

我已经使用下面的代码来解析它，但我没有得到所需的值，这里我只得到 href 值。

请给我上述问题的任何解决方案

```
 String html =

   "<li/><a href=r361.html>1</a> Swargate to Shivajinagar Circle route"+
  " <li/><a href=r511.html>100</a> Manpa bhavan to Hinjewadi phase 3"+
   "<li/><a href=r572.html>101</a> Kothrud depot to Kondhava Bu";

   Reader reader = new StringReader(html);
   HTMLEditorKit.Parser parser = new ParserDelegator();
   final List<String> links = new ArrayList<String>();

   parser.parse(reader, new HTMLEditorKit.ParserCallback(){
       public void handleStartTag(HTML.Tag t, MutableAttributeSet a, int pos) {
           if(t == HTML.Tag.A) {
               Object link = a.getAttribute(HTML.Attribute.HREF);
               if(link != null) {
                   links.add(String.valueOf(link));
               }
           }
       }
   }, true);

   reader.close();
   System.out.println(links); 
```

}

**更新：**

现在我正在使用下面的代码（使用 JSOUP Lib）获取 href 的值

AssetManagerassetManager = getAssets(); InputStream ims =assetManager.open("index.html"); 文档 doc = Jsoup.parse(ims, "UTF-8", "btc.com"); 元素 busNum = doc.getElementsByTag("a"); pTagString = busNum.html();

Log.i("hh"," onPostExecute ="+PTagString);

现在我想将值放在 a href 之外，例如：Swargate to shivajinagar circle route。

任何人都知道方法或任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:14:24.973

您甚至不需要为此使用解析。您可以使用正则表达式。

请参阅[本教程关于 Java 中的正则表达式](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

然后你需要这样的东西：

```
<a[^>]*>([^<]*)<[^>]*>(.*) 
```

作为你的正则表达式。然后，您将立即拥有所需的两个值。它比解析 html 性能要高得多。

# java - 通过电脑控制蓝牙耳机

> ID：12800993
> 
> 赞同：1
> 
> 时间：2012-10-09T13:19:39.647
> 
> 标签：java, bluetooth, volume, headset

我一直在到处搜索，但一直找不到答案——也许我只是使用了错误的搜索词，但我想知道是否有人知道是否有办法自动控制蓝牙耳机的音量？我正在考虑使用 Java，因为它们已经定义了一个堆栈，但对任何可能的工作都持开放态度。如果它也可以与Matlab集成，那就更好了。

任何帮助是极大的赞赏！

# php - 如何在 Drupal 的前面添加选项卡？

> ID：12800995
> 
> 赞同：5
> 
> 时间：2012-10-09T13:19:48.283
> 
> 标签：php, drupal-7

我应该如何在用户配置文件的前端添加选项卡。由于我在后端进行了更改，但我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:25:12.950

如果您想创建自己的模块，代码将如下所示：

```
function downloaded_menu(){ $items['user/%user/downloaded'] = array( 'title' => 'Downloaded', 'page callback' => 'downloaded_content_page', 'access arguments' => array('access content'), 'type' => MENU_LOCAL_TASK, 'weight' => 10, ); return $items; }

downloaded_content_page(){your code here} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:26:49.693

看看 hook_menu[这里](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)

你必须尝试不同的类型

```
'type' => MENU_LOCAL_TASK, 
```

# c# - C# 作为脚本语言

> ID：12800996
> 
> 赞同：7
> 
> 时间：2012-10-09T13:19:52.707
> 
> 标签：c#, c++, native, unity3d

> **可能重复：**
> [从非托管代码调用托管 .NET 代码的最佳方式](https://stackoverflow.com/questions/8406400/best-way-to-call-managed-net-code-from-unmanaged-code)

我很想知道是否可以将 C# 用作托管在 c++ 本机应用程序中的脚本语言。我已经在自己的游戏引擎上工作了 5 年，但我从未接触过它的脚本方面。我喜欢在 Unity 中为游戏中的不同对象编写 C# 脚本的方式。

我做了一些搜索，但找不到任何实际使用的东西。

请注意，我的问题与.Net 无关，而是与作为通用语言的 C# 有关。

只是为了确保，我会说明这一点：我不想从 C# 调用本机 c++。我想要反过来。

如果有人可以向我指出一些资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:40:56.400

是的，您要做的是在您自己的应用程序中托管 CLR。这是一篇 MSDN 文章。

[http://msdn.microsoft.com/en-us/magazine/cc301479.aspx](http://msdn.microsoft.com/en-us/magazine/cc301479.aspx)

那篇文章的作者还有一本书，涵盖了它的各个方面。一旦你在你的应用程序中启动并运行 CLR，如果你想要真正的脚本，你会想要动态编译代码，并且 cirrus 提供了一些关于如何做到这一点的链接。

您不可避免地还需要将部分主应用程序公开到 CLR 命名空间中。否则，您将无法访问主托管应用程序的任何特定功能。

编辑：当我说“真正的脚本”时，我的意思是您在运行时为您的脚本使用扩展名为 .cs 的文本文件。预先编译它们然后将 .DLL 包含在托管应用程序中会更有效，但是您可以两种方式都这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:34:25.400

看看 CodeDOM。现在还有 Reflection.Emit 和 Linq.Expressions - 这里有类似的问题；

[是否可以动态编译和执行 C# 代码片段？](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)

[使用 C# 动态编译代码](https://stackoverflow.com/questions/4718329/compiling-code-dynamically-using-c-sharp)

[编译运行动态代码，不生成EXE？](https://stackoverflow.com/questions/3188882/compile-and-run-dynamic-code-without-generating-exe)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:55:54.847

您可能想查看Rickard Nilsson的[CSRepl的来源。](https://bitbucket.org/rickardn/csrepl/wiki/Home)它是一个 C# 交互式解释器。它不托管 CLR，因为它是托管的，但会创建 C# 脚本环境。

# java - 从 DateTime 控件获取日期

> ID：12800998
> 
> 赞同：6
> 
> 时间：2012-10-09T13:20:01.857
> 
> 标签：java, swt

我知道这可能是一个简单的问题，但我是 Java 新手，我的经验主要是 PHP 或 C#。

我正在开发一个 Eclipse RCP 项目并使用 Google Window Builder。

我需要做的就是从一个名为的**DateTime**控件中获取日期：`dateTimeDOB`

如果日期或月份值是单个数字，则它必须以这种格式（dd/mm/yyyy）返回日期，它必须有一个前面的“0”。

我认为 DateTime 控件类型是

```
org.eclipse.swt.widgets.DateTime 
```

例如：

```
String strDate = dateTimeDOB.getDate("dd/mm/yyyy"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T13:47:33.990

更清洁的方法（恕我直言）：

```
Calendar instance = Calendar.getInstance();
instance.set(Calendar.DAY_OF_MONTH, dateTimeDOB.getDay());
instance.set(Calendar.MONTH, dateTimeDOB.getMonth());
instance.set(Calendar.YEAR, dateTimeDOB.getYear());
String dateString = new SimpleDateFormat("dd/MM/yyyy").format(instance.getTime()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T13:32:14.950

```
 DateTime dateTimeDOB = ...

    int day = dateTimeDOB.getDay();
    int month = dateTimeDOB.getMonth() + 1;
    int year = dateTimeDOB.getYear();

    String strDate = (day < 10) ? "0" + day + "/" : day + "/";
    strDate += (month < 10) ? "0" + month + "/" : month + "/";
    strDate += year; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:15:17.287

您还可以查看[`CDateTime`](http://www.eclipse.org/nebula/widgets/cdatetime/cdatetime.php)您拥有的小部件

```
Date date = cDateTime.getSelection(); 
```

和整体可用性。缺点是它不是 SWT 的一部分，而是一个附加库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:55:31.677

鉴于控件已经分别为您提供了年/月/日，您只需要格式化这些值，您可以使用`String.format`：

```
String text = String.format("%02d/%02d/%04d",
                            dateTimeDOB.getDay()
                            // getMonth() returns a value in the range [0, 11]
                            dateTimeDOB.getMonth() + 1,
                            dateTimeDOB.getYear());
System.out.println(text); // 03/06/2012 or whatever 
```

请注意，这种格式在美国会被误解，并且在其他文化中也可能不合适。这是否重要取决于您的应用程序。

根据 Tom Seidel 的回答，您是直接从单个值转到文本还是通过`Calendar`（或类似类型）部分取决于您的代码如何挂在一起。如果您*确实*想从 UI 控件转换为文本格式，并且两者之间的任何代码都不需要知道此信息作为日期，那么我所写的就可以了。但是，如果您需要在不同的方法等之间传递值，那么将其转换为更自然的数据类型是有意义的。我个人建议使用[Joda Time](http://joda-time.sf.net)，在这种情况下是它的`LocalDate`类型。这样，您就不必担心时区，除了其他任何事情。