# StackOverflow 问答 13583000-13583999

# jquery - 多个下拉切换

> ID：13583000
> 
> 赞同：0
> 
> 时间：2012-11-27T11:15:39.537
> 
> 标签：jquery, html, css, google-chrome, internet-explorer-8

我有以下部分工作的脚本。

**HTML：**

```
<div class="navigation3">
    click me
</div>
<div class="dropdown">
    <div class="items">icon Default 3</div>
</div> 
```

**jQuery：**

```
$('.navigation3').click(function(event) {
    $(this).toggleClass('active');
    $(".dropdown").toggle();
});​ 
```

`.active`零件的工作是单击`.navigtion3`的变为红色，如果我单击所有三个，则三个都变为红色。

不工作的位是`.dropdown`. 它应该直接放在`.navigtion3`div 下。另外，目前它一次只显示 1 `.dropdown`，如果所有`.navigation3`s 都是，它应该显示全部`.active`。

另外，根据用户的选择，我不知道用户屏幕上会显示多少个`.navigation3`s 和s。`.dropdown`

我似乎无法让它工作，并希望得到一些 jQuery 专家的帮助。

**jsFiddle：**

这是我目前拥有的：http: [//jsfiddle.net/MTESY/12/](http://jsfiddle.net/MTESY/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:35:22.297

像这样的东西怎么样[http://jsfiddle.net/chrismoutray/MTESY/16/](http://jsfiddle.net/chrismoutray/MTESY/16/)

```
$('.navigation3').click(function(event) {
    var $nav3 = $(this),
        $dd = $nav3.next('.dropdown');

    $nav3.toggleClass('active');

    var offset = 30,
        offsettop = $nav3.offset().top + $nav3.height() + offset,
        offsetleft = $nav3.offset().left;

    $dd.css({
        top: offsettop,
        left: offsetleft
    });

    $nav3.hasClass('active') ? $dd.show() : $dd.hide();
}); 
```

这里要关注的2位是；找到正确的*下拉*元素

```
$nav3.next('.dropdown'); 
```

并确保正确放置元素

```
$dd.css({
    top: offsettop,
    left: offsetleft
}); 
```

它并不完美，但它会让你开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:34:42.080

您可以根据当前光标位置附加您的部门

```
 $('.navigation3').click(function(event) {
        $(this).toggleClass('active');
        $(".dropdown").css('left',event.pageX-10);   
        $(".dropdown").css('top',event.pageY+10);  
        $(".dropdown").toggle();
    }); 
```

[http://jsfiddle.net/MTESY/14/](http://jsfiddle.net/MTESY/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:34:53.230

脚本中有错误：

```
$('.navigation3').click(function(event) {
   $(this).toggleClass('active');
   $(".dropdown").toggle(); // means toggle all the "dropdown". So if one is visible it will go invisible and vice-versa
});​ 
```

检查： http: [//jsfiddle.net/Agh3Z/](http://jsfiddle.net/Agh3Z/) 请注意，所有“下拉” div 都显示在同一位置。因此，您可以通过更改它们的位置来显示它们。

# javascript - 如何确定复选框是否与其初始选中状态不同

> ID：13583010
> 
> 赞同：2
> 
> 时间：2012-11-27T11:15:58.483
> 
> 标签：javascript, jquery

我知道我可以`defaultChecked`用来确定复选框的初始状态是否是什么，但是我如何确定其中一个是否已从默认状态更改？

我需要设置一个变量，这样我就可以根据这个结果来操作其他东西，这就是我目前拥有的：

```
// This checks if a checkbox has changed from being initially checked
$isModified = $(this).find('input')[0].defaultChecked !== $(this).find('input').prop('checked') ? true : false 
```

[编辑] 我需要检查复选框是否已从默认状态更改，无论它最初是否被选中。

这是我认为可能有效（但没有）的方法：

```
$isModified = $this.find('input')[0].defaultChecked !== $this.find('input')[0].defaultChecked ? true : false 
```

有没有人有办法解决吗？

谢谢

[编辑] 经过很多非常有帮助的..帮助。这是我的解决方案，当其中一个输入发生更改事件时触发：

```
$('#input-parent').each(function(i) {
    var $this = $(this),
        isModified
    ;

    $this.find('input').each(function() {
        var $this = $(this);
        if ( !isModified) {
            isModified = $this[0].defaultChecked !== $this[0].checked;
        }
    });

    if ( isModified ) {
        // Do something
    } else {
        // Do something else
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:37:02.300

在您的示例中，您正在与`defaultChecked`财产`defaultChecked`进行比较。你应该比较`defaultChecked`和`checked`属性。

```
$isModified = $this.find('input')[0].defaultChecked !== $this.find('input')[0].checked; 
```

# c# - Visual Studio 及其增强功能

> ID：13583012
> 
> 赞同：-3
> 
> 时间：2012-11-27T11:16:22.420
> 
> 标签：c#, .net, visual-studio-2010

也许这是那些“懒惰”的问题之一。

如果有答案，我可以将节省的时间用于其他有用的事情。

Visual Studio 发生了很大变化，有很多有用的插件和插件，但是在这方面有什么可以帮助我的吗？

我正在从 Visual Studio 运行应用程序代码。我可以看到 UI，有什么方法可以查看 UI 现在正在执行的操作背后的代码吗？

如果 UI 很大，我如何确定需要在哪里放置断点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:24:22.803

您**可能**正在搜索[http://www.codeproject.com/Articles/16481/NET-Object-Spy-and-InvokeRemote](http://www.codeproject.com/Articles/16481/NET-Object-Spy-and-InvokeRemote)。非常有用的工具，用于监听事件并从 Widnows Forms 应用程序的 UI 中查看属性。或多或少像“旧的，好的” *Spy+*所做的那样。

![在此处输入图像描述](../Images/f546d94b143c0ed29093847551cbbc62.png)

# javascript - 哪些 javascript 函数 f 满足：f(x,y) = f(a,b) IFF x = a 和 y = b？

> ID：13583013
> 
> 赞同：0
> 
> 时间：2012-11-27T11:16:24.137
> 
> 标签：javascript, design-patterns, tuples, equality, idioms

我正在使用[SlickGrid](https://github.com/mleibman/SlickGrid)和相关的 DataView 的 groupBy 功能。我想按一对列分组，但 groupBy 只允许按单个值分组。

为了解决这个问题（以 AFAICT 支持和预期的方式），我想向 DataView 传递一个函数`h(row) {return TUPLE(row.x, row.y)}`，其中`TUPLE`对应`f`于这个问题的标题：它应该返回一个对象，该对象的行为与平等有关，就好像它是一个二元组of`TUPLE`的第一个和第二个参数：[然后 DataView 将按`h(row)`]对行进行分组

我最好的解决方案是

```
x.toString().replace("," by "") + "," + y.toString().replace("," by "") 
```

更普遍：

1.  选择一个分隔符字符串 S（例如`,`）
2.  将每个参数转换为字符串
3.  从每个这样的字符串中删除所有出现的 S
4.  在所有字符串之间插入 S (a la `return theStrings.join(S)`)

我对这个解决方案的唯一抱怨是它感觉非常恶心。然而，这足以来这里询问我是否缺少某种语言习语、最佳实践或设计模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:30:22.750

如果两个参数都是数字（或可以转换为数字），则可以使用配对函数。

f(x, y) = (x + y) * (x + y + 1) / 2 + y

查看更多：[http ://en.wikipedia.org/wiki/Pairing_function](http://en.wikipedia.org/wiki/Pairing_function)

# delphi - Delphi读取非文本文件（二进制）

> ID：13583015
> 
> 赞同：3
> 
> 时间：2012-11-27T11:16:26.413
> 
> 标签：delphi, file-io

如何在 Delphi 中以非文本模式打开二进制文件？像 C 函数`fopen(filename,"rb")`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T11:31:25.000

有几个选项。

**1.使用文件流**

```
var
  Stream: TFileStream;
  Value: Integer;
....
Stream := TFileStream.Create(FileName, fmOpenRead or fmShareDenyWrite);
try
  Stream.ReadBuffer(Value, SizeOf(Value));//read a 4 byte integer
finally
  Stream.Free;
end; 
```

**2.使用阅读器**

您可以将上述方法与 a 结合起来，`TBinaryReader`使值的读取更简单：

```
var
  Stream: TFileStream;
  Reader: TBinaryReader;
  Value: Integer;
....
Stream := TFileStream.Create(FileName, fmOpenRead or fmShareDenyWrite);
try
  Reader := TBinaryReader.Create(Stream);
  try
    Value := Reader.ReadInteger;
  finally
    Reader.Free;
  end;
finally
  Stream.Free;
end; 
```

reader 类有很多函数可以读取其他数据类型。您可以使用二进制编写器朝相反的方向发展。

**3\. 旧式 Pascal I/O**

您可以声明一个类型的变量`File`并使用`AssignFile`,`BlockRead`等从文件中读取。我真的不推荐这种方法。现代代码和库几乎总是更喜欢流习语，通过自己做同样的事情，您将使您的代码更容易适应其他库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T11:37:55.023

您有不同的选择，其中两个是：

使用*老式*方法，例如您指出的 C 函数：

```
var
  F: File;
begin
  AssignFile(F, 'c:\some\path\to\file');
  ReSet(F);
  try
    //work with the file
  finally
    CloseFile(F);
  end
end; 
```

使用更现代的方法基于文件创建 TFileStream：

```
var
  F: TFileStream;
begin
  F := TFileStream.Create('c:\some\path\to\file', fmOpenRead);
  try
    //work with the file
  finally
    F.Free;
  end; 
```

# .net - 通用反序列化

> ID：13583019
> 
> 赞同：2
> 
> 时间：2012-11-27T11:16:42.247
> 
> 标签：.net, vb.net, generics, serialization, xml-serialization

请指导我如何从泛型类型参数中获取类型，在以下情况下：

```
 Public Function DerializeFromFile(Of T)(ByVal fileName As String) As T
    Dim serializer As New XmlSerializer(T.GetType()) '--------------- HELP !!!???
    Dim fileStream = New FileStream(fileName,
                    FileMode.Open, FileAccess.Read, FileShare.Read)
    Dim loadedObject As T = DirectCast(serializer.Deserialize(fileStream), T)
    Return loadedObject
  End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:31:28.530

Change it to:

```
Dim serializer As New XmlSerializer(GetType(T)) 
```

In VB, the `GetType` operator returns the `Type` object for the given type.

# python - 打印总和时的“内置方法总和”奇怪消息

> ID：13583027
> 
> 赞同：0
> 
> 时间：2012-11-27T11:16:55.180
> 
> 标签：python, numpy

使用 Python NumPy 计算矩阵列的总和：

```
import numpy
from StringIO import StringIO

fileName = 'test2.csv'
myFile = open(fileName,'r')
print "Reading data from '%s' ..." % fileName
data = myFile.read() 
myFile.close()

data = numpy.genfromtxt(StringIO(data), delimiter=',', usecols=(0,1,2))
print "Calculating ..."

print data[:,2]
sumA1 = data[:,2].sum
print "shape =", data.shape
print "sumA1 =", str(sumA1)
print "ok" 
```

然后内容`test2.csv`：

```
12,13,14,17
1,2,3,4
12,13,14,17
1,2,3,4
12,13,14,17
1,2,3,4
12,13,14,17
1,2,3,4
12,13,14,17 
```

我得到这个输出

```
Reading data from 'test2.csv' ...
Calculating ...
[ 14\.   3\.  14\.   3\.  14\.   3\.  14\.   3\.  14.]
shape = (9, 3)
sumA1 = <built-in method sum of numpy.ndarray object at 0x00FD8EF8>
ok 
```

为什么我不能得到“sumA1 = 82”这个奇怪的信息？我究竟做错了什么？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T11:22:25.320

您必须调用该`sum`函数。只需替换这段代码：

```
sumA1 = data[:,2].sum 
```

有了这个：

```
sumA1 = data[:,2].sum() 
```

# sql - 使用行连接表

> ID：13583028
> 
> 赞同：2
> 
> 时间：2012-11-27T11:16:57.193
> 
> 标签：sql, sql-server-2008, join

我正在尝试在 SQL Server 2008 R2 中加入三个表，我希望将第二个表中的项目添加为新列。

详细解释 - 我有 3 个表：

第一个表包含用户名和用户 ID

```
UserID UserName
1       Mike
2       John
3       George 
```

第二个表是带有职位名称的职位 ID

```
PositionID PositionName
1          RW
2          LW
3          DF
4          MDF
5          SS
6          CF
etc 
```

第三个表包含他们的首选位置，其中一个用户可以拥有多个

```
UserID  PositionId
1        1
1        3
2        2
2        3
2        5
3        2
3        7 
```

当我加入这些表时，我想为每个用户获得单行，其中包含所有首选位置，例如

```
UserID   UserName  PreferedPosition  PreferedPosition2 PreferedPosition3
1        Mike      RW                LW               
2        John      CMF               SS                CF
3        George    LW                MDF 
```

我不知道如何实现这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:30:11.810

如果你只有几个职位，你可以用`PIVOT`关键字来做

```
select
    UserID,
    UserName,
    [1] as Position1,
    [2] as Position2,
    [3] as Position3
from
(
    select
        U.UserID, U.UserName, P.PositionName,
        row_number() over (partition by U.UserID order by P.PositionName) as RowNum
    from Positions_Users as PU
        inner join Positions as P on P.PositionID = PU.PositionID
        inner join Users as U on U.UserID = PU.UserID
) as P
    pivot
    (
        min(P.PositionName)
        for P.RowNum in ([1], [2], [3])
    ) as PIV 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!3/d1542/9)

但是，如果您想要动态列数，则必须使用动态 SQL，如下所示

```
declare @stmt nvarchar(max), @stmt_columns1 nvarchar(max), @stmt_columns2 nvarchar(max)
declare @Temp_Data table (RowNum nvarchar(max))

insert into @Temp_Data
select distinct row_number() over (partition by U.UserID order by P.PositionName) as RowNum
from Positions_Users as PU
    inner join Positions as P on P.PositionID = PU.PositionID
    inner join Users as U on U.UserID = PU.UserID

select @stmt_columns1 = stuff((select ', [' + RowNum + ']' from @Temp_Data for xml path(''), type).value('.', 'nvarchar(max)'), 1, 2, '')
select @stmt_columns2 = stuff((select ', [' + RowNum + '] as Position' + RowNum from @Temp_Data for xml path(''), type).value('.', 'nvarchar(max)'), 1, 2, '')

select @stmt = '
select
    UserID,
    UserName,' + @stmt_columns2 + '
from
(
    select
        U.UserID, U.UserName, P.PositionName,
        row_number() over (partition by U.UserID order by P.PositionName) as RowNum
    from Positions_Users as PU
        inner join Positions as P on P.PositionID = PU.PositionID
        inner join Users as U on U.UserID = PU.UserID
) as P
    pivot
    (
        min(P.PositionName)
        for P.RowNum in (' + @stmt_columns1 + ')
    ) as PIV'

exec sp_executesql @stmt = @stmt 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!3/d1542/17)

# java - Android TCP 套接字客户端/服务器实现

> ID：13583029
> 
> 赞同：3
> 
> 时间：2012-11-27T11:17:00.000
> 
> 标签：java, android, sockets, tcp, inputstream

我是 Java 和 Android 的新手，我正在尝试创建一个服务器/客户端应用程序。目前我在 PC 上运行服务器，而客户端在 Android 设备上。通信发生并且一切正常，但我想区分来自客户端的传入消息，以便在服务器上执行不同的操作。这是服务器的代码。客户端非常简单并且运行良好。例如，当我从客户端发送“名称”时，服务应该用“Matteo”回答，但它总是用“其他东西”回答，我不明白为什么！我想问题出在声明中`if (dataInputStream.equals("Name")) {`

谢谢你。

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class Server1 {

 public static void main(String[] args){
  ServerSocket serverSocket = null;
  Socket socket = null;
  DataInputStream dataInputStream = null;
  DataOutputStream dataOutputStream = null;

  try {
   serverSocket = new ServerSocket(8888);
   System.out.println("Listening on port 8888");
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }

  while(true){
   try {
    socket = serverSocket.accept();
    dataInputStream = new DataInputStream(socket.getInputStream());
    dataOutputStream = new DataOutputStream(socket.getOutputStream());
    System.out.println(socket.getInetAddress() + " : " + dataInputStream.readUTF());

    if (dataInputStream.equals("Name")) {
        dataOutputStream.writeUTF("Matteo!");

    }
    else if (dataInputStream.equals("Surname")) {
        dataOutputStream.writeUTF("Rossi!");

    }
    else {
        dataOutputStream.writeUTF("Something else!");

    }
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
   finally{
    if( socket!= null){
     try {
      socket.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }

    if( dataInputStream!= null){
     try {
      dataInputStream.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }

    if( dataOutputStream!= null){
     try {
      dataOutputStream.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }
   }
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:41:01.153

`DataInputStream`表示来自套接字的数据流的句柄，而不是数据本身。所以`.equals()`将它与另一个`DataInputStream`而不是与 a进行比较`String`。您直接将其与一个字符串进行比较，该字符串显然返回`false`.

就像您正在使用 写入数据一样`writeUTF()`，您需要通过它从套接字连接读取数据`DataInputStream`。使用[此处](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)`read()`描述的方法之一，或者如果您知道您的客户端将发送整行，您可以将其包装在 a 中并使用以下内容：`BufferedReader`

```
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(dataInputStream));
String input = bufferedReader.readLine();
if (input.equals("Name")
{
  dataOutputStream.writeUTF("Matteo!");
}
else ... 
```

另一方面，在 Java 7 中，您也可以`switch`在 String 上使用语句，而不是`.equals()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:21:46.613

诀窍是您应该[*从*](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html#read%28byte%5B%5D%29)`DataInputStream`. 例如。

```
byte[] buffer = new byte[ 1024 ];
dataInputStream.read( buffer );
if ( new String( buffer ).equals( "Name" ) ) { /*  do your stuff */ } 
```

这是*很多*缩写，但你可以从那里工作。

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T04:28:34.590

也许研究一下，`ObjectInputStream`然后您可以读取对象并使用：

```
instanceof 
```

区分对象的关键字

# php - for 循环，$i 等于同一个循环中的两个不同的值

> ID：13583030
> 
> 赞同：0
> 
> 时间：2012-11-27T11:17:02.497
> 
> 标签：php, mysql

我有一个从 a 生成的小表单，`mysqli->query`并且我将每个输入名称设置为一个数组，例如`name="Shift_ID[]"`. 然后我有一个`for loop`意思是`UPDATE`在循环时一次记录一个。我遇到的问题是`$i`变量是同一个循环中的不同值，我不明白为什么。这是我的代码：

```
if(isset($_POST['update_submit']))
{
    $id = $_POST['Shift_ID'];
    $name = $_POST['Shift_Name'];
    $short_name = $_POST['Shift_Short_Name'];
    $color  = $_POST['Shift_Color'];
    $shift_total_records = "5";

    for($i = 0; $i <= $shift_total_records; $i++) 
    {
        $sql = ("UPDATE shift SET Shift_ID = '$id[$i]', Shift_Name = '$name[$i]', Shift_Short_Name = '$short_name[$i]', Shift_Color = '$color[$i]' WHERE Shift_ID = '$i'");

        echo "SQL: " . $sql . "<br>";

        if(!$result_shift_update = $mysqli->query($sql))
        {
            die ('There was an error updating the shift table [' . $mysqli->error . ']');
        }
    }
} 
```

`echo`返回这个：

```
SQL: UPDATE shift SET Shift_ID = '1', Shift_Name = 'Morning', Shift_Short_Name = 'AM', Shift_Color = '#FF0000' WHERE Shift_ID = '0' 
```

我期待`Shift_ID = '1'`和`WHERE Shift_ID = '1'`。有人可以解释为什么会这样吗？此外，在有人说之前，我确实知道这对注入攻击是开放的，我需要使用准备好的语句。

**编辑：**我拥有它的原因`Shift_ID = '$id[$i]'`是`WHERE Shift_ID = '$i'`因为我希望用户能够根据需要更改`Shift_ID`字段。关键是可以选择重新排列顺序。是`Shift_ID`，`PRIMARY KEY`所以如果他们尝试使用相同的数字两次，他们会得到一个错误，但是有没有办法让它做我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:19:41.793

第一个“1”`$id[$i]`不是`$i`——这里没有明显的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:27:24.187

```
for($i = 0; $i <= $shift_total_records; $i++) 
```

将 $i 设置为 0，当您回显 $id[$i] 时，您将获得 $id[0] 中的内容，即第一个 id，但是当您仅回显 $i 时，您会打印 0，因为您设置了 $id = 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:22:40.637

您在每个位置使用了不同的变量。你是这个意思吗：

```
$sql = ("UPDATE shift SET Shift_ID = '$id[$i]', Shift_Name = '$name[$i]', Shift_Short_Name = '$short_name[$i]', Shift_Color = '$color[$i]' WHERE Shift_ID = '$id[$i]'"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T11:20:42.183

第一次使用 $i 时，您按如下方式使用它，`$id[$i]`第二次使用`$i`....

# html - 这个 HTML 有什么问题？！使每个打印页有更多的填充

> ID：13583032
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:17:01.763
> 
> 标签：html, css

这是我的网站：

[http://shoutkey.com/embrace](http://shoutkey.com/embrace)

使用 Chrome，转到打印，然后选择无边距。

现在检查顶部填充以及第 1 页上的一切是否良好。

现在转到第 25 页。检查顶部填充，好像没有？我不明白，为什么它会慢慢地在顶部填充越来越少，然后像第 26 页一样再次增加，然后顶部填充越来越多。

我怎样才能解决这个问题？这让我发疯，3个多小时试图弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:43:09.763

使用分页符 ( `page-break-before: always`) 可在打印时分页。

这是解释[http://davidwalsh.name/css-page-breaks的链接](http://davidwalsh.name/css-page-breaks)

# c - 从 XCode 中的 C-Programm 到 SWI-Prolog 的接口

> ID：13583039
> 
> 赞同：0
> 
> 时间：2012-11-27T11:17:29.750
> 
> 标签：c, xcode, macos, swi-prolog

我想在 MAC OS X 下使用 XCode IDE 从 c 代码连接到 SWI-Prolog。

我已经包含了头文件并使用以下示例代码：

```
#include <stdio.h>
#include <SWI-Prolog.h>
#include <SWI-Stream.h>

int main(int argc, const char * argv[])
{

char *av[10];
int ac = 0;

av[ac++] = "/opt/local/lib/swipl-6.2.2/bin/i386-darwin12.2.1/swipl";
av[ac++] = "-x";
av[ac++] = "mystate";
av[ac]   = NULL;

#ifdef READLINE /* Remove if you don't want readline */
PL_initialise_hook(install_readline);
#endif

if ( !PL_initialise(ac, av) )
    PL_halt(1);

PL_halt(PL_toplevel() ? 0 : 1);

printf("done...\n");
return 0;
} 
```

我还在构建设置中链接到头文件和库路径：

标头搜索路径：/opt/local/lib/swipl-6.2.2/include

库搜索路径：/opt/local/lib/swipl-6.2.2/lib/i386-darwin12.2.1

但是在运行代码时出现以下错误：

```
Undefined symbols for architecture x86_64:
  "_PL_halt", referenced from:
      _main in main.o
  "_PL_initialise", referenced from:
      _main in main.o
  "_PL_toplevel", referenced from:
       _main in main.o
 ld: symbol(s) not found for architecture x86_64
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有谁可以帮助我让我的代码运行？

提前致谢和亲切的问候

索利克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:32:29.237

即使您在设置中设置了正确的路径，它也不会自动找到要链接的正确库。您还必须添加实际的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:10:58.800

我在 Ubuntu 中工作（是的，仍然在 Windows 中），我开始欣赏[pkg-config](http://www.freedesktop.org/wiki/Software/pkg-config)支持。

如果您已经习惯了，请注意在本地编译时，SWI-Prolog 会生成一个目录 ~/lib/pkgconfig。

然后您可以将该目录添加到 pkg-config 配置中，并使用具有（恕我直言）良好支持的 SW。

# java - 扫描仪的空字符串

> ID：13583045
> 
> 赞同：1
> 
> 时间：2012-11-27T11:17:45.150
> 
> 标签：java

我的申请有问题。我希望应用程序检测到如果用户没有为字符串输入任何值（换句话说，在被要求输入内容后只需按 Enter），应用程序就会询问他/她是否希望退出程序。
我做对了吗？

```
words = s.nextLine();   
if (words.equals(null)) { 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T11:19:21.993

不，你做的不对。

`nextLine()`如果用户只是点击返回，将返回一个*空*字符串。据我所知，它*永远不会*回来`null`。如果已经到达输入的末尾，它将抛出`NoSuchElementException`（与在`BufferedReader.readLine()`这种*情况*下返回 null 不同）。所以你要：

```
if (words.equals("")) 
```

或者

```
if (words.length() == 0) 
```

或者

```
if (words.isEmpty()) 
```

...`hasNextLine()`如果您想先检测输入的结束，请使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T11:21:17.837

不你不是。

如果用户只是按下回车键，你会得到一个空字符串，而不是`null`. 这可以检查为

```
if(words.equals("")) 
```

如果有空格，这将失败。在这种情况下

```
if(words.trim().equals("")) 
```

应该管用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T11:21:09.330

null 不正确，因为你得到的是一个空字符串：

使用： `words.isEmpty()` 或 `words.equals("")` 或 `words.length()==0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:19:13.430

这应该有效：

```
if (words == null || words.length() == 0) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:23:44.610

返回的字符串不是空的，它只是一个空字符串。

```
words.equals(""); 
```

应该是正确的

# python - 使用 python 处理电子邮件（引用问题）

> ID：13583053
> 
> 赞同：2
> 
> 时间：2012-11-27T11:18:09.813
> 
> 标签：python, parsing, email

我正在尝试用 python 处理我的电子邮件（但任何能完成我所描述的工作的东西都可以，真的）。

我可以连接到 imap 服务器，下载消息......一切都很好。

但是对于给定的邮件，如果它是对前一封邮件的回复，它可能会嵌入所有已经发生的对话。问题是我没有看到人们和软件处理这个问题的方式有任何模式。人们会做顶部/底部/中间引用，软件可能会使用 HTML 作为引用或纯文本（带有“>”）。

我的目标是仅区分用户在电子邮件中实际输入的内容。我不需要他或她所指的内容（标题可以帮助我）。

那里有可以帮助我的库吗？

# sql - Delphi 在运行时添加/删除字段

> ID：13583057
> 
> 赞同：0
> 
> 时间：2012-11-27T11:18:34.867
> 
> 标签：sql, delphi, components

我需要在我的 Delphi 应用程序中添加一个功能，允许用户在数据库表（SQL server 2008）中添加/删除字段，以便在表单上/从表单中自动创建/删除字段。

例如

用户右键单击表单和弹出菜单，例如：

> '添加字段 --> 字段名称 --> 字段类型 --> 允许 Null --> 等'

出现。用户选择所有变量后，该字段将添加到表格和表单中。我在各种项目中都看到了类似的功能。

是否有此类功能的组件/库？我用谷歌搜索了它，但我没有找到类似的东西。有什么建议吗？

# asp.net - 页面无法使用 asp.net 应用程序查看 Ipad 上的 .doc 文件

> ID：13583058
> 
> 赞同：1
> 
> 时间：2012-11-27T11:18:36.783
> 
> 标签：asp.net, .net

我有打印机页面，它将获取 .doc 格式的二进制文件，然后打印它

它在 IE、Firfox、chroom 上工作

但是当我试图在 ipad 上查看它时，它给了我空白页？？下面是代码：

```
 Dim filepath() As Byte
                filepath = Session(Request.QueryString("id"))
                Response.ClearHeaders()
                Response.ClearContent()
                Response.AddHeader("content-disposition", "attachment;filename=""MyFile.doc""")
                Response.AddHeader("Content-Description", "myfiles")
                Response.AppendHeader("Content-Type", "application/msword")
                Response.AppendHeader("Content-Transfer-Encoding", "binary")
                Response.AppendHeader("Pragma", "public")
                Response.AppendHeader("Cache-Control", "must-revalidate")
               Response.BinaryWrite(filepath)
                 Response.Flush()
                Response.End() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:54:51.073

尝试用ms word打开文档并以microsoft wod格式再次保存，然后检查

相同的代码：

```
 Dim filepath() As Byte
            filepath = Session(Request.QueryString("id"))
            Response.ClearHeaders()
            Response.ClearContent()
            Response.AddHeader("content-disposition", "attachment;filename=""MyFile.doc""")
            Response.AddHeader("Content-Description", "myfiles")
            Response.AppendHeader("Content-Type", "application/msword")
            Response.AppendHeader("Content-Transfer-Encoding", "binary")
            Response.AppendHeader("Pragma", "public")
            Response.AppendHeader("Cache-Control", "must-revalidate")
           Response.BinaryWrite(filepath)
             Response.Flush()
            Response.End() 
```

# sql - 存储过程被多次调用，而它应该只被调用一次

> ID：13583062
> 
> 赞同：2
> 
> 时间：2012-11-27T11:18:45.927
> 
> 标签：sql, wcf, iis-7, enterprise-library

我有一个奇怪的问题。我将首先解释一下解决方案的架构。

我们在 Android 和 iOS 上都有一个由 WCF RESTful Web 服务提供服务的移动应用程序。Web 服务由 IIS 7 托管，它们是作为 Windows 服务运行的服务层的代理。Web 服务使用 WCF TCP 绑定与服务层通信。

服务层调用 SQL Server 2008 实例中的存储过程。我们正在使用 .NET Framework 4 和 Microsoft Enterprise library 5.0 版。许多 Web 服务调用会导致存储过程调用。

现在，问题。其中一个 Web 服务导致单个存储过程在一秒钟内被多次调用，以用于单个 Web 服务调用。我们已经在 SQL Server 上使用了跟踪实用程序，我们可以看到使用相同的参数集多次调用存储过程。这在我们的网站上造成了巨大的性能问题。

我不知道是什么原因造成的。它是被多次调用的同一个存储过程。我查看了 IIS 日志，设备没有多次调用 Web 服务，所以它一定是内部错误。我已经查看了 Web 服务和服务层的实现，并且没有循环会导致存储过程被多次调用。

我将不胜感激对此的任何见解。我不知道是什么原因造成的，但我怀疑 WCF 或企业库中存在错误。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:39:55.443

为了确保存储过程实际上是从我们自己的源代码而不是其他层调用的，我添加了对 log4net 的调用以记录对 SP 的调用。神奇的是，这让问题消失了。我不明白为什么。一切都很好，但结局很好。

# http - 如何将 SOAP 请求转换为 HTTP GET？

> ID：13583063
> 
> 赞同：0
> 
> 时间：2012-11-27T11:18:45.300
> 
> 标签：http, soap, get, wso2

我正在尝试从传入的 SOAP 请求构造一个 REST 服务查询参数，并且我需要 GET 模式请求（`doGet:http://localhost:8888/XMPPService/recieveMsg?accessId=admin&accessSeq=admin&accessPwd=admin`）。我使用属性 REST_URL_POSTFIX。我的配置是：

```
<target>
      <inSequence>
           <property name="REST_URL_POSTFIX" value="?accessId=accessId&accessSeq=accessSeq" scope="axis2" />
           <send>
              <endpoint>
                <address uri="http://localhost:8888/XMPPService/recieveMsg" >   
              </endpoint>
           </send>
      </inSequence>
      <outSequence>
         <log level="full" />
         <send />
      </outSequence>
    </target>
    <publishWSDL key="XMPPService_wsdl" /> 
```

但也是POST方式的请求，它调用doPost方法，而不是GET方式的请求。接收消息也是：

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
    <soapenv:Body>
        <p:XMPPService xmlns:p="http://iag.sdp.coship.com/xmpp/">
            <accessId>admin</accessId>
            <accessSeq>admin</accessSeq>
            <accessPwd>admin</accessPwd>
        </p:XMPPService>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:21:27.303

我不清楚你在尝试什么。据我了解，您正在尝试从传入的 SOAP 请求构造 REST 服务查询参数。

如果是这种情况，请使用 REST_URL_POSTFIX 属性来设置查询参数。

我写了这篇[文章](http://vvratha.blogspot.com/2011/11/invoking-restful-service-via-wso2esb.html)，希望对你有所帮助。

# android - 使用 SAX 解析器获取属性值并将这些值映射在一起

> ID：13583065
> 
> 赞同：0
> 
> 时间：2012-11-27T11:18:51.027
> 
> 标签：android, xml-parsing, sax, ixmlserializable

在这里，我想在一个数组列表或哈希映射中解析 Map 值，我不知道哪种方法更好。

**这是我的 XML 文件**

我正在使用**SAX 解析器**来解析这个东西

```
<Navigation useNavi="1" auto="1" diable="0" >
<Map MapName="paris" MapPath="\Storage Card\PA\xyz" LoadAtStartup="1" />
<Map MapName="swiss" MapPath="\Storage Card\SW\abc" LoadAtStartup="0" />
<Map MapName="delhi" MapPath="\Storage Card\DE\del" LoadAtStartup="1" />
</Navigation> 
```

在这里，我想粘贴`Map`标签，我不能轻松地做到这一点，也无法获得它的属性值，但我想知道如何管理这个`Map`元素的属性值，例如`MapName`，`paris`我想在将来使用它各自的值，比如`LoadAtStartup`属性值。

我如何管理这 3 个地图值？

谢谢

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:26:02.583

创建一个类：

```
class MapObject
    public string MapName;
    public string MapPath;
    public boolean LoadAtStartup;

    public MapObject(string name, string path, boolean loadAtStartup){
       this.MapName = name;
       this.MapPath = path;
       this.LoadAtStartup = loadAtStartup;
    } 
```

以及类实例的容器：

```
List<MapObject> mapsObjects = new List<MapObject>(); 
```

以及 JSON 解析器中的新实例（伪代码，你已经有了）

```
 for each object in JSON data{
     mapObjects.add(new MapObject(name attribute, path attribute, loadAtStartup attribute);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:35:58.193

您的问题有不同的解决方案。也许以下将为您提供可能的解决方案：

```
 HashMap<String, Pair<String, Boolean>> mapEntries = new HashMap<String, Pair<String,Boolean>>();

    //Inside SAX callback
    String place = attrs.getValue("MapName");
    String path = attrs.getValue("MapPath");
    Boolean isLoadAtStartup = Integer.parseInt(attrs.getValue("LoadAtStartup")) == 1;
    mapEntries.put(place, new Pair<String, Boolean>(path, isLoadAtStartup)); 
```

以上使用`android.util.Pair`类。您也可以使用用户定义的容器类（如 @Simon 所示）。

# xml - WSO2 ESB 以 XML 为中心？

> ID：13583068
> 
> 赞同：3
> 
> 时间：2012-11-27T11:18:58.283
> 
> 标签：xml, rest, wso2, wso2esb, esb

WSO2 ESB 在其组件方面似乎非常以 XML 为中心。这是否意味着所有非 XML 数据都需要转换为 XML 才能获得 WSO2 的全部优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:32:45.783

如果需要处理消息，则需要在 ESB 中构建它。为此，有默认的消息生成器。但如果您需要 ESB 作为通道。或者可能只处理消息的一部分，你不必构建整个事情。见[1]。

[1] [http://docs.wso2.org/wiki/display/ESB451/Message+Relay+Building+Blocks](http://docs.wso2.org/wiki/display/ESB451/Message+Relay+Building+Blocks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:46:25.930

另请注意，WSO2 ESB 主要是传输二进制数据的总线。只有在需要处理数据时，才需要将数据解释成某种消息格式。确实，大多数现有的此类解释都是基于 XML。但在最新版本 4.5.1 中，它更多地支持非 XML 格式，如 JSON 和 REST API。请参阅[发行说明](http://dist.wso2.org/products/enterprise-service-bus/4.5.1/release-notes.html)。

# .htaccess - 在 Kayako 4 设置期间尝试了所有可能的方法来关闭 php_flag magic_quotes_gpc

> ID：13583075
> 
> 赞同：1
> 
> 时间：2012-11-27T11:19:22.013
> 
> 标签：.htaccess, magic-quotes-gpc

尝试了所有可能的方法..在 4 次设置期间
从`php.ini`to`.htaccess`到关闭，但都导致失败。`php_flag` `magic_quotes_gpc``Kayako`

我试过将“ `php_flag magic_quotes_gpc off`”放在`.htaccess`文件中。我在根目录中放置了一个`php.ini`文件，其中包含以下代码：

```
[PHP]
magic_quotes_gpc
Default Value: Off
Development Value: Off
Production Value: Off 
```

仍然设置显示“检查魔术引号`GPC is disabled FAILED`”

请帮帮我。

我使用基于 Parallels Plesk Panel 的 Windows 主机...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T12:55:03.937

您还需要在 php.ini 中为 PHP 参数赋值

[PHP] magic_quotes_gpc = 关闭

重新启动 Web 服务，以便可以反映更改！

# java - JDBC 驱动程序连接失败

> ID：13583076
> 
> 赞同：1
> 
> 时间：2012-11-27T11:19:27.080
> 
> 标签：java, mysql, netbeans, jdbc, database-connection

我正在尝试将 java 连接到 MySQL。当我尝试连接时，它显示错误消息：![在此处输入图像描述](../Images/603203daeed45d85207df62d6b789793.png)

但我不知道错误在哪里。我使用的是 Windows 7.Netbeans 6.5.1。请帮忙。当我点击开始时： ![在此处输入图像描述](../Images/29380010914b05ad323d41c84c3d2a06.png)

这会打开： ![在此处输入图像描述](../Images/2674ef5c8b267f7ffc222f1bdbb5a968.png)

在这个里面设置什么？？

**更新：**

奇怪的是德比正在建立联系：

![在此处输入图像描述](../Images/c34d423121d7558d09c68d488de9212a.png) ![在此处输入图像描述](../Images/411feee1c1107fd0050cb52d500fa4bc.png)

而且我没有提供任何用户名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:33:21.703

错误是“拒绝用户访问”，因此这意味着您提供的用户名/密码不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:36:14.837

[从以下链接http://heidisql.googlecode.com/files/HeidiSQL_7.0_Setup.exe](http://heidisql.googlecode.com/files/HeidiSQL_7.0_Setup.exe)下载 heidisql 并尝试使用 heidisql 连接到您的 mysql。如果成功，则在 netbeans 中也使用相同的属性（用户名、密码等）...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:46:15.307

可能你的配置有问题。重新创建连接并在单击之前对其进行测试`Finish`。

我刚刚尝试用我的本地 MySql 和 Netbeans 做到这一点：

![在此处输入图像描述](../Images/57a4c890df76f162f23e4ec51688e862.png)

连接成功。如果此时您无法成功连接，请检查数据库是否存在，并检查您为连接提供的用户名和密码。

# javascript - 我如何检查加载页面时是否加载了 .json 文件

> ID：13583085
> 
> 赞同：1
> 
> 时间：2012-11-27T11:20:03.130
> 
> 标签：javascript, json

> 我如何检查加载页面时是否加载了 .json 文件。
> 
> 有没有办法像我们在 python 中那样使用“console.log”来应用日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:25:08.677

是的。控制台.log(dataToLog)

在支持控制台的浏览器中（IE Chrome、Fireforx、Opera...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:37:49.973

在控制台中查看 ajax 调用

对于 WebKit，选择 Network 选项卡并单击 XHR

对于 Firefox，选择 Net 选项卡并单击 XHR

# php - 加密字符串与数据库字符串不匹配

> ID：13583091
> 
> 赞同：0
> 
> 时间：2012-11-27T11:20:32.850
> 
> 标签：php, c#-4.0

我已经从我正在解码的查询字符串中加密了字符串。解码后我试图与 db 字符串匹配，但这不起作用。这是我的代码

```
<?php
require_once("db.php");
$id="";
$emailrole="";
if($_GET){
    if(isset($_GET['id'])){
    $id = base64_decode($_GET['id']);
    $query = "select * from sfrole where email like('{$id}') LIMIT 1";
    $qryy = mysql_query($query);
    $cnt = mysql_num_rows($qryy);
    if($cnt > 0){
        $emailrole = mysql_fetch_array($qryy);
    }else{
        exit();
    }
    }else{
        exit();
    }
}else{
    exit();
}
?> 
```

如果像这样使用

```
$query = "select * from sfrole where email like('malik.adeel@shakarganj.com.pk') LIMIT 1"; 
```

然后它可以工作，如果从变量中使用它不会返回任何东西请帮助

**更新**

我正在加密 C# 中的字符串，就像我在 php 中使用的那样

```
Convert.ToBase64String(Encoding.Unicode.GetBytes(emailid)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:28:29.970

在查询中运行它之前，您需要对字符串进行转义。

[http://fr2.php.net/function.mysql-real-escape-string.php](http://fr2.php.net/function.mysql-real-escape-string.php)

```
<?php
require_once("db.php");
$id="";
$emailrole="";
if($_GET){
    if(isset($_GET['id'])){
    $id = base64_decode($_GET['id']);
    $query = "SELECT * FROM sfrole WHERE email LIKE '" . mysql_real_escape_string($id) . "' LIMIT 1";
    $qryy = mysql_query($query);
    $cnt = mysql_num_rows($qryy);
    if($cnt > 0){
        $emailrole = mysql_fetch_array($qryy);
    }else{
        exit();
    }
    }else{
        exit();
    }
}else{
    exit();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:26:44.533

试试这个查询：

```
select * from sfrole where email = '$id' LIMIT 1 
```

您使用花括号“{$id}”的原因是什么？我认为如果您想要加密，最好使用 md5，但加密电子邮件并不好。想象一下，您应该向用户发送电子邮件，但在发送之前您应该解密它们，它不可用并且性能更差。

更新：

抱歉，现在我知道您没有将其保存在 DB 中的 base64 中 :-) 尝试比较输入值和 DB 值以了解会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:29:01.447

您的选择查询不正确。请更改它。您还可以通过在查询前使用 echo 来检查您的查询。你应该用这个

```
$query="select * from sfrole where id='$id' and email LIKE 'example@gmail.com'  LIMIT 1"; 
```

# c - 转换为 int ** 后取消引用指针如何更改它指向的值？

> ID：13583092
> 
> 赞同：2
> 
> 时间：2012-11-27T11:20:34.357
> 
> 标签：c, pointers

```
#include<stdio.h>

int main()
{
  int *previous, *current ;
  int a[5] = {1,2,3,4,5};
  current =(int *) a ;
  previous = current ;
  current = *( (int**) current ) ; //my question is on this line

  printf ("\nprevious is 0x%x and current is 0x%x \n ", previous , current ) ;
  printf ("\nprev+1 0x%x ,  prev+4 0x%x \n", previous+1 , previous+4 ) ;
return 0;
} 
```

输出是：

```
bash-3.00$ ./a.out

previous is 0xffffd0f8 and current is 0x1

prev+1 0xffffd0fc ,  prev+4 0xffffd108 
```

我的问题是：“当前”以前指向数组的开头，然后再被引用和取消引用。下面的语句如何改变“current”的值？

```
current = *( (int**) current ) ; 
```

此外，如果我打印 *previous 它将打印 1 而 *current 将核心转储。这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:26:09.320

```
current = *( (int**) current ) ; 
```

首先，您`current`转换为 an `int**`，因此存储在`sizeof(int**)`从 at 开始的字节中的值`&current`将被解释为 an 的地址`int*`。然后你取消引用从强制转换中获得的指针。这意味着，`int**`假设存储在那里，并且该`sizeof(int*)`地址处的字节存储在`current`.

现在，`current`指向数组的第一个元素`a`，因此存储在开头的字节`a`被复制到`current`. 如果`sizeof(int*) == sizeof(int)`，则`int`存储的值 1`a[0]`被解释为地址。if `sizeof(int*) == 2*sizeof(int)`（另一种常见的情况），那么指针值是由两个`int`s 1 和 2 组成的。

`previous`指向 的第一个元素`a`，因此解引用`previous`产生值 1。解引用`current`现在尝试`int`从地址 1 读取一个（这是未定义的行为，所以无论发生什么其他事情都不会违反标准，但这是正常的过程），该过程通常无法访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:26:10.147

```
current =(int *) a ; 
```

叶`current`指向包含值的内存地址`1`。所以

```
(int**) current 
```

将此`1`值本身视为一个指针，并且取消引用会毫无疑问地导致段错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:40:48.540

这

```
(int **) current 
```

不是取消引用，这

```
*(ptr) 
```

不是参考。

**取消引用**

```
*current 
```

参考

```
&(ptr) 
```

**最后声明：**

```
current = &(*current); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:30:15.167

这很简单：你只是取消引用当前，所以

```
*((int**) current) 
```

是数组的第一个元素（即 0x1）转换为 int*。

取消引用 0x1 显然会导致段错误，因为在 99.9% 的系统中，用户进程无法读取此地址。

# javascript - 检查 DIV 的内容是否只是图像

> ID：13583097
> 
> 赞同：2
> 
> 时间：2012-11-27T11:21:08.953
> 
> 标签：javascript

我有一个 div，最初包含一个加载器图像标签。

```
 <img src="/images/indicator_big.gif" style="display:block;margin:auto"> 
```

我想检查 DIV 是否仅包含加载器图像，然后该函数应该触发 Ajax 请求。

如果我做一些事情，比如`div.innerHTML`我把它当作一个字符串。

测试 innerHTML 是否只是加载器图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:27:41.023

您可以检查元素中有多少元素

```
var children = document.querySelector("#yourDiv > *");
if (children.length == 1 && children[0].tagName.toLowerCase() == "img") {
    //you only have one child in here, and that's an image
} 
```

如果它只包含您的初始图像，它将为 1。

但请注意浏览器支持：[http ://www.quirksmode.org/dom/w3c_core.html#t13](http://www.quirksmode.org/dom/w3c_core.html#t13)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:28:29.300

这种方法会按照您的要求进行，尽管我不确定一般方法是否是最好的。

```
function hasOnlyImg(div) {
  if (div.children.length != 1)
    return false;
  return div.children[0].tagName == "IMG";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:01:12.893

我假设该加载程序图像的“style.display”会改变？你可以检查一下吗？

```
function checkDiv(div,func) {
    var thisDiv = div;
    var imgLink = thisDiv.getElementsByTagName("img");
    if (imgLink.length == 1 && imgLink[0].style.display !== "block") {
        func();
    }
}
checkDiv(document.getElementById("mydiv"),function() {
    //call ajax code
}); 
```

或者，如果您仍想检查 div 中 HTML 标记的数量，只需执行以下操作：

```
var allDivTags = mydiv.getElementsByTagName("*");
if (allDivTags.length == 1 && allDivTags.nodeName.toLowerCase() == "img") {
    //only 1 html element exists in the div, and it's an image.
    //run code
} 
```

希望这可以帮助。

# c# - 在 MVC 4 中我应该在哪里存储 SQL 查询？

> ID：13583099
> 
> 赞同：2
> 
> 时间：2012-11-27T11:21:11.293
> 
> 标签：c#, sql, asp.net-mvc, asp.net-mvc-4

我有一个基于 MVC4 的项目，其中包含一些 SQL 查询。它们当前存储在项目资源 (*.resx) 中，但在资源编辑器中编辑查询非常困难。

是否有专门的 SQL 查询存储？我应该在哪里存储我的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:25:21.110

您可以将查询作为存储过程放入数据库中。这为您提供了数据库逻辑的封装——“关注点分离”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T04:08:37.150

I solved it with [T4](http://msdn.microsoft.com/en-us/library/bb126445.aspx). Now I have `Queries` directory in my project and `SQLGenerator.tt` in it. Here is my template source code:

```
<#@ template  debug="true" hostSpecific="true" #>
<#@ output extension=".cs" #>
<#@ Assembly Name="System.Core" #>
<#@ Assembly Name="System.Windows.Forms" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #> 

<#var sqlScriptsContent = ReadSql(); #>

namespace MathApplication.SQL
{
public class Queries
{
<# foreach(var file in sqlScriptsContent) { #>
    public string <#= file.Key #> = @"<#= file.Value #>";
<# } #>
}
}

<#+ 
public Dictionary<string, string> ReadSql() {
    var filePaths = Directory.GetFiles(Host.ResolvePath("."));

    var result = new Dictionary<string, string>();

    foreach (var filename in filePaths) {
        if (filename.EndsWith(".sql")) {
            result[Path.GetFileNameWithoutExtension(filename)] = System.Text.RegularExpressions.Regex.Replace(File.ReadAllText(filename), @"\s+", " ").Replace("\"", "'");
        }
    }

    return result;
    }
#> 
```

This code assembles all `*.sql` files in `Queries` directory to one class.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:26:22.607

不，没有专门用于 SQL 查询的存储。

资源文件听起来有点不寻常，我宁愿将它们放在我的代码中的常量字符串中，封装在数据层中。可能在使用应用参数的 SQL 查询的每个方法中，等等。

但是，我真的建议避免使用普通的旧 SQL，而是使用 Entity Framework 或 LINQ2SQL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:24:47.550

为什么不使用实体框架作为 ORM？

在与 ASP.NET MVC 的链接中，这是一项很棒的技术。

您也可以将 SQL 移动到 MSSQL 中的存储过程。在这种情况下，我建议使用 Database Project 将您的 SQL 存储在您的解决方案中。

无论如何，将 SQL 存储在代码或资源中并不是一个好习惯。

# javascript - three.js 改变材质上的纹理

> ID：13583103
> 
> 赞同：9
> 
> 时间：2012-11-27T11:21:30.513
> 
> 标签：javascript, textures, three.js

我在 three.js 中的网格上设置纹理，当它加载时，它看起来也是我想要的：

```
 texture = THREE.ImageUtils.loadTexture("textures/hash.png");

        texture.needsUpdate = true;

        uniforms = {
            color: { type: "c", value: new THREE.Color( 0xffffff ) },
            texture: { type: "t", value: texture },
        },  

        vertexShader = "varying vec2 vUv; void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",

        fragmentShader = "uniform vec3 color; uniform sampler2D texture; varying vec2 vUv; void main() { vec4 tColor = texture2D( texture, vUv ); gl_FragColor = vec4( mix( color, tColor.rgb, tColor.a ), 1.0 );}",

        material = new THREE.ShaderMaterial({
            uniforms : uniforms,
            vertexShader    : vertexShader,
            fragmentShader  : fragmentShader
        }); 
```

但我想稍后改变这个网格上的纹理，我试过这个：

```
obj.mesh.material.uniforms.texture = THREE.ImageUtils.loadTexture("textures/1.png");
obj.mesh.material.uniforms.texture.needsUpdate = true; 
```

但这不会改变网格上显示的纹理，如何更改 THREE.ShaderMaterial 上的纹理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T14:27:34.987

将纹理分配给`obj.mesh.material.uniforms.texture.value`。还可以考虑`needsUpdate`在纹理成功加载后设置标志（通过订阅加载事件）。

# android - 保存和恢复 ArrayList > 关于活动简历

> ID：13583108
> 
> 赞同：0
> 
> 时间：2012-11-27T11:22:09.470
> 
> 标签：android, arraylist, hashmap

我有一个哈希映射的数组列表，在这个哈希映射的数组列表中，我在通过从 Web 服务下载数据创建活动时添加项目。我将它传递给 listview 的适配器，并希望在对活动的多次访问中保存并恢复它，以便每次恢复活动时它都不会下载数据。我有 onsavedInstanceState 和 onRestoreInstanceState 的想法，但我不知道如何保存和存储 hashmap 的数组列表。

任何人都可以提供帮助。提前谢谢了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:28:10.430

创建一个 Constant.java 文件并在此文件中声明 hashmap 数组列表，请参阅下面的代码以获取更多信息，它将解决您的问题。

```
public class Constants {
    public static ArrayList<HashMap<String, String>> mResults = new 
                        ArrayList<HashMap<String, String>>();
} 
```

# javascript - 如何使用一组不同的凭据/安全上下文进行 Ajax 调用

> ID：13583110
> 
> 赞同：0
> 
> 时间：2012-11-27T11:22:20.823
> 
> 标签：javascript, ajax, authentication, credentials, security-context

我正在寻找是否可以使用与进行 AJAX 调用的页面不同的身份验证/安全/会话上下文对给定网站进行 AJAX 调用，但理想情况下使用/访问服务器上的相同 Web 应用程序（和身份验证方案）

例如：浏览器请求并接收[https://web.server.com/admin_page.html](https://web.server.com/admin_page.html)（需要 AUTHENTICATION）并处理页面的 JavaScript，它指定了对类似[https://web.server.com/server_info的 Ajax 调用.html](https://web.server.com/server_info.html)（*不需要*凭据/身份验证）每 30 秒。

页面的 JavaScript 也会在一定时间后自动注销用户（基于服务器会话长度）。由于对服务器的每次调用都不会专门终止服务器端会话（例如最终的自动注销调用）本质上会重新启动用户的会话计时器，因此我希望能够继续进行 UNAUTHENTICATED server_info.html 调用每 30 秒一次，而不会影响用户的 AUTHENTICATED 服务器端会话。

我想我可以用服务器上的多个应用程序来做到这一点，这些应用程序碰巧访问相同的数据库和其他资源，但我更喜欢一种将它们全部保存在同一个应用程序中的方法。

我想问题是：为了做到这一点，我是否必须使用单独的服务器应用程序，或者我可以使用同一个应用程序，如果可能的话，它是否取决于所使用的服务器或应用程序技术？

# excel - 设置格式单元格颜色的主题颜色

> ID：13583113
> 
> 赞同：0
> 
> 时间：2012-11-27T11:22:26.920
> 
> 标签：excel, applescript, excel-2008

在 Office 2008 中，如何使用 AppleScript 以条件格式设置主题颜色？

```
tell format color of color scale criterion 1 of colorcellObject
set theme color to first accent theme color
end tell 
```

此脚本通过错误（未定义设置主题颜色对象）。

![SO13583113 问题示例](../Images/e051d8af54938a42643f190e585e9603.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:25:10.030

我没有使用 Applescript 的经验（我自己在 Windows 中使用 VBA），但我建议对 RGB 颜色使用 {[0-255],[0-255],[0-255]} 代码。

如果您事先知道代码，则可以对这些代码进行硬编码，可能您可以使用 Excel 的一小部分来应用适当的颜色并参考脚本中的颜色。

对于脚本，请遵循以下内容： [AppleScript：设置 Microsoft Excel 单元格的背景颜色](https://stackoverflow.com/questions/2616872/apple-script-microsoft-excel-cells-back-ground-color)

# java - 带有自定义标题的 Android TimePicker

> ID：13583114
> 
> 赞同：0
> 
> 时间：2012-11-27T11:22:31.020
> 
> 标签：java, android, android-layout, android-widget

我在弹出对话框中有 TimePicker .. 这是代码..

```
@Override
protected Dialog onCreateDialog(int id) 
{
    switch (id) 
    {
    case TIME_DIALOG_ID:
        // set time picker as current time
        final TimePickerDialog tmp = new TimePickerDialog(this, timePickerListener, hour, minute, true);
        tmp.setTitle("Helo");
        tmp.setOnKeyListener(new OnKeyListener() 
        {

            @Override
            public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) 
            {
                tmp.setTitle("Hello");

                return false;
            }
        });

        return tmp;

    }
    return null;
} 
```

我在这里使用示例.. [http://www.mkyong.com/android/android-time-picker-example/](http://www.mkyong.com/android/android-time-picker-example/)

现在我想从对话框中删除标题..并设置我的自定义标题..在这种情况下我使用
timepicker.setTitle("Hello"); 但是当我更改时间选择器的值时..标题会自动更改为时间值..我该如何维护标题？或检测时间变化..？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:32:28.237

您可以在 TimePickerDialog() 构造函数中传递 OnTimeSetListener 并通过覆盖 onTimeSet() 方法来监听时间变化。

```
OnTimeSetListener listener = new TimePickerDialog.OnTimeSetListener(){
            @Override
            public void onTimeSet(TimePicker timePicker, int hourOfDay, int minute) {
             mDialog.setTitle("Hello");
            }
        }; 
```

# jquery - 选中复选框时更改颜色

> ID：13583118
> 
> 赞同：0
> 
> 时间：2012-11-27T11:22:39.897
> 
> 标签：jquery, html-table

目前我使用 twig 和 Symfony2。在我的一个树枝文件中，我创建了一个用 for 循环动态填充的表。

所以它创建了几个看起来像这样的条目：

```
<td>
<input type='checkbox' name='somename'>
</td> 
```

现在，如果选中该复选框，我希望更改 td 背景颜色。我已经尝试了几个我发现的 JSFiddles ......但没有成功。

它们看起来都是这样的：

[http://jsfiddle.net/YQD7c/1/](http://jsfiddle.net/YQD7c/1/) 或多或少......但我只能在这里发布 1 个链接。

这是我的完整表格：

```
<table class="index" cellpadding="5px">
            <thead>
            <tr>
                <th>....</th>
                <th>....</th>
                <th>....</th>
                <th>....</th>
                <th>....</th>
                <th>....</th>
                <th>....</th>
            </tr>   
            </thead>    
            <tbody>
                {% for l in list %}
                    <tr>
                        <td >
                            {{some.other.things.in.list}}
                        </td>
                        <td >
                            ...
                        </td>
                        <td >
                            ...
                        </td>
                        <td>
                            ...
                        </td>
                        <td >
                            ...
                        </td>
                        <td>
                            <input type='checkbox' name='box[{{l.id}}]'>
                        </td>
                        <td>
                            <a href="...">Edit</a>
                        </td>
                {% endfor %}
            </tbody>
        </table> 
```

我试图`<div>`在复选框周围制作一个，并复制并粘贴 js fiddles ......但没有任何东西对我有用。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:29:12.723

也许您没有做的是将您的 javascript 链接到您的 HTML。

只需复制粘贴您的代码和您发布的 jsFiddle，结果就[可以](http://jsfiddle.net/Dnmwu/)正常工作。

因此，您可能需要做的是在您的 html 文件中创建一个脚本块，该文件具有要链接到的 javascript，或者直接：

```
<html>
<body>
    <script language="javascript">
        //code here
    </script>
</body>
</html> 
```

或通过链接 javascript 文件：

```
<head>
<script type="text/javascript" src="script.js"></script>    
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:39:10.973

您需要为`<td>`内部 for 循环定义“id”属性。然后使用 jquery 选择器读取选中复选框的值，并为该特定`<td>`元素设置所需的颜色。

# java - ActiveMq 不会自动创建队列

> ID：13583119
> 
> 赞同：1
> 
> 时间：2012-11-27T11:22:40.357
> 
> 标签：java, jms, activemq

我创建了一个这样的目的地：

```
 Destination destination = session.createQueue("queue_name"); 
```

在这种情况下，如果名为“queue_name”的队列不存在，它将被创建。

我想形成一个队列的目的地，如果它不存在，**我不想创建它**。

有没有办法仅在队列存在时才连接到队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:28:29.830

您必须使用 ActiveMQ 中的安全功能来限制允许创建目标的用户。然后，您可以在 ActiveMQ 配置中配置一组始终创建的目标。请参阅有关该主题的此[页面](http://activemq.apache.org/how-do-i-create-new-destinations.html)以及有关配置安全性 的此[页面。](http://activemq.apache.org/security.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:31:50.280

我认为您应该能够使用 DestinationSource 从您的连接中获取可用队列的列表。您可以查看队列是否存在。

Havnt 尝试过，但认为它看起来像这样：

```
 ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
        ActiveMQConnection connection = (ActiveMQConnection)connectionFactory.createConnection();
        DestinationSource ds = connection.getDestinationSource();
        Set<ActiveMQQueue> queues = ds.getQueues(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:31:51.203

您可以通过客户端（消费者/生产者）的安全配置来做到这一点。

或者，您可以通过获取可用队列列表并仅在它在列表中时进行连接，以编程方式进行操作。ActiveMQ 为此提供了一个类，但它不是 JMS 的一部分（因此您将受限于 ActiveMQ 特定的实现）。

[http://activemq.apache.org/maven/5.5.0/activemq-core/apidocs/org/apache/activemq/advisory/DestinationSource.html](http://activemq.apache.org/maven/5.5.0/activemq-core/apidocs/org/apache/activemq/advisory/DestinationSource.html)

# jquery - 如何使用 jQuery 在 iF rame 中执行“execCommand”？

> ID：13583124
> 
> 赞同：2
> 
> 时间：2012-11-27T11:22:53.497
> 
> 标签：jquery, iframe, execcommand

例如：

我点击一个按钮。一个 div 正在改变一些东西

```
$('#change').click(function(){ //the button
  $('#myframe').contents().find('#makeit').css("do Someting") //the div in a frame
}); 
```

到目前为止我已经明白了。

我需要知道，我怎样才能执行 execCommand（可能像“粗体”）而不是 .css() 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:48:48.987

[我在这里](https://stackoverflow.com/questions/2365851/execcommand-for-iframe-dont-work/)找到了答案。

在我的情况下（jQuery）。看起来像

```
$('#change').click(function(){
   document.getElementById("myframe").contentWindow.document.execCommand('bold', false, null);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:51:08.937

您想将 execCommand() 定位在 id 为“makeit”的元素上吗？

恐怕这是不可能的，因为它是`document.execCommand(String commandName, Bool showUI, Variant value)`根据选择/插入符号焦点执行命令的。

阅读例如。[https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla](https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla)了解详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:57:28.490

我忘了提到 div 是可竞争的 =“true”。我想更改 div(id="makeit") 中的内容。在 iframe 中

# sql - 同一张表的值之间的 SQL CASE

> ID：13583127
> 
> 赞同：0
> 
> 时间：2012-11-27T11:23:05.280
> 
> 标签：sql, sql-server, tsql, case

我有以下@temp 表：

```
SELECT * 
FROM @temp
WHERE LinkingID = 1

------------------------------------------------------------------
|Condition_ID   LinkingID   Operator   Variable1    Variable2    |
|     1             1          ==        25             2        |
|     2             1          <>        3              7        |
|     3             1          ==        4              4        |
------------------------------------------------------------------ 
```

我想实现一个`CASE`（ ??? ），它将检查**Variable1** `OPERATOR` **Variable2**是否为真，检查所有行，如果所有行都为真，则执行某些操作，否则中断并中止。

我在想这样的事情（我不确定如何在 T-SQL 中表达，所以我使用伪语言）：

```
CASE 
    WHEN Operator LIKE '=='
        THEN IF Variable1 == Variable2 THEN TRUE
        ELSE THEN FALSE
    WHEN Operator LIKE '<>'
        THEN IF Variable1  <> Variable2 THEN TRUE
        ELSE THEN FALSE
FROM @temp 
```

如果所有行的结果都为真，那么做一些事情，否则做其他事情

在上面的场景中：
Row1 将返回 Row2 将`FALSE`
返回`TRUE`
Row3 将返回`TRUE`

因此结果是`FALSE`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:27:10.183

## 在整个表上累积比较结果

检查整个表是否为所有行返回 true 最好计算 false 并检查该数字是否大于等于 0。如果为 0，则表示所有行匹配，否则数字表示失败的行数

注意与值相比的**倒置**比较`Operator`以捕捉否定：

```
declare @NonMatched int

select
    @NonMatched = sum(
        case
            when [Operator] = '==' and Variable1 <> Variable2 then 1
            when [Operator] = '<>' and Variable1 = Variable2 then 1
            else 0
        end
    )
from @temp
where LinkingID = 1

if @NonMatched = 0
begin
    -- execute your stored procedure or whatever else set of statements
end 
```

这里还有一个基于上层代码[的 SQLFiddle 。](http://sqlfiddle.com/#!6/d5bae/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:33:23.390

我会四处走动，并猜测您正在尝试对条件评估为真的所有行做*一些事情。*`variable 1 [operator] variable2`这可能是选择它们，也可能是删除它们——实际上并没有什么区别。

我将使用 select 作为示例：

```
SELECT * 
FROM @temp
WHERE LinkingID = 1
AND CASE Operator
    WHEN '==' THEN Variable1 = Variable2
    WHEN '<>' THEN Variable1 <> Variable2
END 
```

如果您想删除这些记录，可以使用相同的 where 子句。

**编辑**要聚合这个集合并在特定条件的所有条件`LinkingID`评估为真时做某事，这样的事情将起作用：

```
IF EXISTS(
  SELECT LinkingID FROM temp
  WHERE LinkingID = 1
  GROUP BY LinkingId
  HAVING SUM(CASE 
    WHEN Operator = '==' AND Variable1 = Variable2 THEN 1 
    WHEN Operator = '<>' AND Variable1 <> Variable2  THEN 1
    ELSE 0
  END) = count(*)
)
BEGIN
  -- Do something
END 
```

在这里玩的实时示例：[http](http://www.sqlfiddle.com/#!6/26d72/6) ://www.sqlfiddle.com/#!6/26d72/ 6 在该示例中，我设置了 LinkingID=2，其中所有条件都为真。将 更改`LinkingId=1`为`=2`以查看`do something`消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:53:40.810

我会写这样的东西：

```
SELECT 
    CASE WHEN NOT EXISTS
           ( SELECT *
             FROM @temp
             WHERE LinkingID = 1
               AND NOT ( Operator = '=='  AND  Variable1 = Variable2
                      OR Operator = '<>'  AND  Variable1  <> Variable2
                       )
           ) THEN 'TRUE' 
             ELSE 'FALSE'
     END AS Result ; 
```

# asp.net-mvc-3 - 如何在使用 jTemplate 时将字符串呈现为 html

> ID：13583128
> 
> 赞同：1
> 
> 时间：2012-11-27T11:23:07.083
> 
> 标签：asp.net-mvc-3, jtemplates

我正在使用 asp.net C# MVC [jTemplate](http://jtemplates.tpython.com/)将 Announcements 集合绑定到我认为的模板。其中一个公告在其描述中具有 html 字符串。

现在的问题是如何将该字符串呈现为 html

我的看法是

```
<textarea id="dashAnnoucement_Template" 
       data-template-name="dashAnnoucement_Template" class="hidden">
{#foreach $T as Announcement}
   <li id='{$T.Announcement$iteration}'>
   {#if !$().compare($T.Announcement.Category,
          @Convert.ToInt32(UI.Entities.AnnouncementCategory.RichText))}
      <div  class="card large flipped">
      <div class="pic">
      {#if $T.Announcement.LinkOff} 
         {#if $T.Announcement.Image.IsVideo}
           <a href="{$T.Announcement.LinkOff.Target}" class="play">
             <span>{$T.Announcement.Image.AltText}</span>
             <img alt="{$T.Announcement.Image.AltText}" 
                  src="{$T.Announcement.Image.Source}" class="thumb"/> 
           </a>
         {#else} 
           <a href="{$T.Announcement.LinkOff.Target}">
             <img alt="" src="{$T.Announcement.Image.Source}" class="thumb"/> 
           </a>
         {#/if} 
      {#else} 
        <img alt="" src="{$T.Announcement.Image.Source}" class="thumb"/>      
      {#/if}                       
      </div>
      <div class="content"><h3>   
      {#if $T.Announcement.LinkOff}                  
        <a href="{$T.Announcement.LinkOff.Target}" 
           target="{#if $T.Announcement.LinkOff.IsExternal}_blank{#else}_self{#/if}">
          {$T.Announcement.Title}</a>
      {#else}      
        {$T.Announcement.Title}                           
      {#/if}
      </h3>
      <p>{$T.Announcement.Summary}</p>
      </div>
      </div>
   {#else}
      {$T.Announcement.Description}
      @*Need to render this as html*@
   {#/if}
   </li>
{#/for}
</textarea> 
```

jquery代码就像

```
$(Container).empty()
            .setTemplateElement(Template)
            .processTemplate(announcementsCollection); 
```

我的 Json 数据即公告集合就像

```
[   {     "Category": 1,     "Title": "White Space Announcement Title",     "Description": "",     "Summary": "Join us Fri,April 24 in Atlanta,GA to mingle with Solavei members & hear top earner success stories",     "Image": {       "Source": "http://slvdev.blob.core.windows.net/media/1463/whitespace_1.jpg",       "AltText": "",       "Target": "",       "IsVideo": false     },     "Date": "\/Date(-62135596800000)\/",     "LinkOff": {       "Target": "http://solavei.com/",       "Text": "Learn More >",       "IsExternal": true     }   },   {     "Category": 1,     "Title": "Got Questions?",     "Description": "",     "Summary": "Access Member Support for information on your phone, your Solavei Membership, and your Solavei Mobile Service.",     "Image": {       "Source": "http://slvdev.blob.core.windows.net/media/7323/equipment-support-224x168.jpg",       "AltText": "",       "Target": "",       "IsVideo": false     },     "Date": "\/Date(-62135596800000)\/",     "LinkOff": {       "Target": "http://support.solavei.com",       "Text": "Learn More >",       "IsExternal": true     }   },   {     "Category": 4,     "Title": "html",     "Description": "<div class=\"imageBox shadowBox\" style=\"float: right; margin: -20px -20px 0px 20px;\">                                            \t                        <a target=\"_blank\" href=\"https://support-uat.solavei.com\">\t\t                        \t\t                        <img class=\"fullImage\" alt=\"\" src=\"http://slvdev.blob.core.windows.net/media/35985/neon.jpg\" style=\"height:170px\">\t                        </a>                                                                  </div>\n<div class=\"contents\">                                                            <h2>                                                    <a target=\"_blank\" href=\"https://support-uat.solavei.com\">                                                    Rich text                        </a>                        </h2>                                                                        <p>Access Member Support for information on your phone, your Solavei Membership, and your Solavei Mobile Service.</p>                                            </div>",     "Summary": "<div><img src='https://slvdev.blob.core.windows.net/media/35985/neon.jpg' wid/>\n<p>Test Message</p></div>",     "Date": "\/Date(-62135596800000)\/"   } ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T21:32:48.477

我知道这是一篇旧帖子，但是，首先您必须将`JSon`数据转换为`Html`代码，然后使用`Html.Raw("")`将代码显示为`Html`.

```
@Html.Raw("Your html in here") 
```

# marklogic - marklogic 中的内存元素是什么？

> ID：13583130
> 
> 赞同：6
> 
> 时间：2012-11-27T11:23:26.827
> 
> 标签：marklogic

我有几个文件在`xdmp:node-replace()`某些​​元素上不起作用。还有一些其他文档集几乎与有问题的文档相似，但`xdmp:node-replace`在它们上运行得非常好。尝试了所有可能出错但徒劳的可能性。阅读一些该功能在“**内存元素**`xdmp:node-replace`”中不起作用的地方。

 **因此，为了验证问题是否与“**内存元素**”有关，我想知道它到底是什么。

任何点亮它都会有很大帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T17:15:02.653

在查询中构造的任何内容都是内存中的元素。例如，这个 XQuery 产生一个内存元素：

```
<test/> 
```

一些函数调用也返回内存中的元素：`xdmp:unquote`这是一个明显的例子。任何不是来自当前数据库的节点都将被视为内存节点。

此查询产生一个数据库元素（如果存在），可以使用以下命令进行修改`xdmp:node-replace`：

```
doc('fubar')/test 
```

这是一个典型的内存更新错误：

```
xdmp:node-replace(<x/>, <y/>) 
```

对于 MarkLogic 6.0-1.1，错误代码为`XDMP-UPCONSTNODES`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T21:04:31.370

如果您想通过使用类似的函数调用来更新内存中的节点，就像它们在数据库中一样，那么有一个实用程序库可以做到这一点：

[https://github.com/marklogic/commons/tree/master/memupdate](https://github.com/marklogic/commons/tree/master/memupdate)

主库还在 App Services 下随 MarkLogic Server 一起提供：

appservices/utils/in-mem-update.xqy

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T12:11:21.343

如果您使用`in memory elements`导入以下模块

`import module namespace mem = "http://xqdev.com/in-mem-update" at "/MarkLogic/appservices/utils/in-mem-update.xqy";`

而不是使用`xdmp:node-replace`你可以使用`mem:node-replace(<x/>, <y/>)`**

# ajax - DELETE 请求会影响 Safari 中任何类型的下一个请求

> ID：13583131
> 
> 赞同：1
> 
> 时间：2012-11-27T11:23:33.677
> 
> 标签：ajax, safari, jqxhr

我的应用程序中有一个奇怪的问题，它只发生在 Safari 浏览器中。

在以 204 成功状态完成 DELETE 请求后，以下请求（可能是 PUT、GET、任何类型）也得到 204 状态作为响应，而不是预期的 200。所有 next 请求都可以，只是 DELETE 之后的第一个请求有问题。

请注意，这种情况不会出现在任何其他浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:04:54.420

答案找到了。没有 Safari 奇怪的行为。问题在于请求兑现。

# java - 如何从android中的图像路径获取缩略图路径？

> ID：13583137
> 
> 赞同：1
> 
> 时间：2012-11-27T11:23:41.960
> 
> 标签：java, android

基本上我的图像路径看起来像这样：/mnt/sdcard/Pictures/image.jpg 我需要以最快的方式从中获取缩略图的路径。

我正在尝试使用 MediaStore.Images.Thumbnails.queryMiniThumbnail，但无论我通过什么，我都会得到空光标。谢谢！

**编辑：** 这是带来所有图像路径和缩略图路径并将它们存储在字符串中的函数。我需要的是一个返回特定图像路径（/mnt/sdcard/Pictures/image.jpg）的缩略图路径的函数。谢谢

```
public String getThumbPaths(ThumbContext ctx) {
    Uri uri = MediaStore.Images.Thumbnails.getContentUri("external");

    Cursor cursor = MediaStore.Images.Thumbnails.queryMiniThumbnails(ctx
            .getActivity().getContentResolver(), uri,
            MediaStore.Images.Thumbnails.MINI_KIND, null);

    int columnIndex = cursor.getColumnIndex(Thumbnails.IMAGE_ID);

    String[] filePathColumn = { MediaStore.Images.Media.DATA };

    StringBuilder stringBuilder = new StringBuilder();

    String id = MediaStore.Images.Media._ID + "=?";

    String orientation="1";

    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {

        String imageId = cursor.getString(columnIndex);

        Cursor images = ctx.getActivity().managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                filePathColumn, id,
                new String[] { imageId }, null);

        String filePath = "";
        if (images != null && images.moveToFirst()) {
            filePath = images.getString(images
                    .getColumnIndex(filePathColumn[0]));
        }

        ExifInterface exifReader;
        try {
            exifReader = new ExifInterface(filePath);
            orientation=exifReader.getAttribute(ExifInterface.TAG_ORIENTATION);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
        }

        stringBuilder.append(cursor.getString(1) + ";");
        stringBuilder.append(filePath + ";");
        stringBuilder.append(orientation + ";");
        orientation="1";

    }
    //cursor.close();
    return stringBuilder.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:28:19.017

如果我理解正确，您的图像不在媒体数据库中。您可以使用

```
ThumbnailUtils.extractTumbnail() 
```

它只需要一个位图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T11:26:57.557

试试看。它将帮助您将图像的缩略图设置为 ImageView。

```
 im=(ImageView)findViewById(R.id.imageView1);

    byte[] imageData = null;

    try 
    {

    final int THUMBNAIL_SIZE = 64;
    //InputStream is=getAssets().open("apple-android-battle.jpg");
    FileInputStream fis = new FileInputStream("/sdcard/apple.jpg");
    Bitmap imageBitmap = BitmapFactory.decodeStream(fis);

    Float width = new Float(imageBitmap.getWidth());
    Float height = new Float(imageBitmap.getHeight());
    Float ratio = width/height;
    imageBitmap = Bitmap.createScaledBitmap(imageBitmap, (int)(THUMBNAIL_SIZE * ratio), THUMBNAIL_SIZE, false);

    ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
    imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    imageData = baos.toByteArray();
    im.setImageBitmap(imageBitmap);
    }
    catch(Exception ex) {

    } 
```

希望它会帮助你。

# c - 一核专用单进程

> ID：13583146
> 
> 赞同：69
> 
> 时间：2012-11-27T11:24:12.323
> 
> 标签：c, linux, linux-kernel, cpu, scheduling

Linux中是否有任何方法可以将一个CPU内核分配给特定的给定进程，并且不应在该内核上安排任何其他进程或中断处理程序？

我已经阅读了 Linux **Binding Processes to CPUs using the taskset 实用程序**中的进程关联性，但这并没有解决我的问题，因为**它只是尝试将给定进程与该核心关联，但其他进程可能会安排在该核心上**，这是我想避免的。

我们应该更改内核代码以进行调度吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-27T13:32:19.937

就在这里。事实上，有两种不同的方法可以做到这一点:-)

现在，完成您想要的最佳方法是执行以下操作：

1.  在引导期间从引导加载程序将参数 isolcpus=[cpu_number] 添加到 Linux 内核命令行。这将指示 Linux 调度程序不要在该 CPU 上运行任何常规任务，除非使用 cpu 亲和性特别要求。

2.  使用 IRQ 亲和性来设置其他 CPU 来处理所有中断，这样你的隔离 CPU 就不会收到任何中断。

3.  使用 CPU 亲和性将您的特定任务固定到隔离的 CPU。

这将为您提供 Linux 在 CPU 隔离方面可以提供的最佳性能，而无需树外和开发中的补丁。

您的任务仍会不时被 Linux 代码中断，包括其他任务 - 例如计时器滴答中断和调度程序代码、来自其他 CPU 的 IPI 以及工作队列内核线程之类的东西，尽管中断应该非常小。

有关（几乎）完整的中断源列表，请查看我的页面[https://github.com/gby/linux/wiki](https://github.com/gby/linux/wiki)

另一种方法是使用 cpusets，它更加优雅和动态，但在此时存在一些弱点（例如，没有计时器迁移），这使我推荐旧的、粗略但有效的 isolcpus 参数。

请注意，Linux 社区目前正在开展工作以解决所有这些问题，并提供更好的隔离。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T12:01:04.010

有[Redhat文章](https://access.redhat.com/knowledge/solutions/15482)谈论它。它修改了引导参数*isolcpus*。

还有罗伯特·洛夫写的[一篇旧文章。](http://www.linuxjournal.com/article/6799)那篇文章中有解决方案。

> 一个进程的所有子进程都收到与其父进程相同的 CPU 关联掩码。
> 
> 然后，我们需要做的就是让 init 将自己绑定到一个处理器。所有其他进程，本质上是进程树的根，因此是所有进程的超父进程，然后同样绑定到一个处理器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-11T07:38:15.090

将整个 CPU 内核专用于特定程序

虽然任务集允许将特定程序分配给某些 CPU，但这并不意味着不会在这些 CPU 上安排其他程序或进程。如果您想防止这种情况并将整个 CPU 内核专用于特定程序，您可以使用“isolcpus”内核参数，它允许您在引导期间保留 CPU 内核。

在引导期间将内核参数“isolcpus=”添加到引导加载程序或 GRUB 配置文件。然后 Linux 调度程序不会在保留的 CPU 内核上调度任何常规进程，除非任务集特别要求。例如，要保留 CPU 内核 0 和 1，请添加“isolcpus=0,1”内核参数。启动后，然后使用任务集将保留的 CPU 内核安全地分配给您的程序。

来源

1.  [http://xmodulo.com/2013/10/run-program-process-specific-cpu-cores-linux.html](http://xmodulo.com/2013/10/run-program-process-specific-cpu-cores-linux.html)
2.  [http://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/re46.html](http://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/re46.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-29T07:31:30.540

即使您按照 gby 答案中的步骤操作，内核任务也会在隔离的 CPU 内核上执行。linux RT_PREEMPT 实时项目的工作正在进行中以改进这一点。因此，如果您不使用来自 RP_PREEMPT 的前沿实时内核，则可能无法**完全**隔离 CPU 内核。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:30:38.100

根据[文档](http://linux.die.net/man/1/taskset)

> Linux 调度程序将遵循给定的 CPU 亲和性，并且该进程不会在任何其他 CPU 上运行。

没有提到特定的处理器将被专门处理。

# python - 如何缩放图像的一部分并在 matplotlib 的同一图中插入

> ID：13583153
> 
> 赞同：57
> 
> 时间：2012-11-27T11:24:35.883
> 
> 标签：python, image, matplotlib

我想缩放一部分数据/图像并将其绘制在同一个图中。它看起来像这个数字。

![放大图](../Images/c3fda09382740f5fb2eb54fe0f9a978e.png)

是否可以在同一个图中插入一部分缩放图像。我认为可以用 subplot 绘制另一个图形，但它会绘制两个不同的图形。我还阅读了添加补丁以插入矩形/圆形，但不确定将一部分图像插入图中是否有用。我基本上从文本文件中加载数据并使用如下所示的简单绘图命令对其进行绘图。

[我在这里](http://matplotlib.org/examples/pylab_examples/axes_demo.html)从 matplotlib 图像库中找到了一个相关示例，但不确定它是如何工作的。非常感谢您的帮助。

```
from numpy import *
import os
import matplotlib.pyplot as plt
data = loadtxt(os.getcwd()+txtfl[0], skiprows=1)
fig1 = plt.figure()
ax1 = fig1.add_subplot(111)
ax1.semilogx(data[:,1],data[:,2])
plt.show() 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-27T14:11:26.960

使用可运行代码是学习 Python 的最快方法之一。

因此，让我们[从 matplotlib 示例库中的代码](http://matplotlib.org/examples/pylab_examples/axes_demo.html)开始。

鉴于代码中的注释，代码似乎分为 4 个主要节。第一节生成一些数据，第二节生成主图，第三和第四节创建插入轴。

我们知道如何生成数据并绘制主图，所以让我们关注第三节：

```
a = axes([.65, .6, .2, .2], axisbg='y')
n, bins, patches = hist(s, 400, normed=1)
title('Probability')
setp(a, xticks=[], yticks=[]) 
```

将示例代码复制到一个名为`test.py`.

如果我们改变`.65`to会发生什么`.3`？

```
a = axes([.35, .6, .2, .2], axisbg='y') 
```

运行脚本：

```
python test.py 
```

您会发现“概率”插图向左移动。因此该`axes`函数控制插图的位置。如果你多玩一些数字，你会发现 (.35, .6) 是插图左下角的位置，而 (.2, .2) 是插图的宽度和高度。数字从 0 到 1，(0,0) 位于图的左下角。

好的，现在我们正在做饭。在下一行，我们有：

```
n, bins, patches = hist(s, 400, normed=1) 
```

您可能会将其识别为[用于绘制直方图的 matplotlib 命令](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hist)，但如果不是，将数字 400 更改为例如 10，将生成具有更粗的直方图的图像，因此再次使用数字您很快就会弄清楚这条线与插图内的图像有关。

你会想在`semilogx(data[3:8,1],data[3:8,2])`这里打电话。

该行`title('Probability')` 显然会在插图上方生成文本。

最后我们来了`setp(a, xticks=[], yticks=[])`。没有数字可玩，所以如果我们通过在行首放置 a 来注释整行会发生什么`#`：

```
# setp(a, xticks=[], yticks=[]) 
```

重新运行脚本。哦！现在插入轴上有很多刻度线和刻度线标签。美好的。所以现在我们知道这`setp(a, xticks=[], yticks=[])`会从轴上删除刻度线和标签`a`。

现在，理论上您有足够的信息可以将此代码应用于您的问题。但还有一个潜在的绊脚石：matplotlib 示例使用 `from pylab import *` 而您使用`import matplotlib.pyplot as plt`.

[matplotlib 常见问题解答](http://matplotlib.org/faq/usage_faq.html#matplotlib-pylab-and-pyplot-how-are-they-related)说`import matplotlib.pyplot as plt` 是在编写脚本时使用 matplotlib 的推荐方法，同时 `from pylab import *`用于交互式会话。因此，您以正确的方式进行操作（尽管我建议您也使用`import numpy as np`而不是`from numpy import *`）。

那么我们如何将 matplotlib 示例转换为运行`import matplotlib.pyplot as plt`呢？

进行转换需要一些使用 matplotlib 的经验。通常，您只需在诸如and`plt.`之类的裸名称前添加，但有时函数来自 numpy，有时调用应该来自轴对象，而不是来自模块。需要经验才能知道所有这些功能的来源。谷歌搜索函数的名称和“matplotlib”会有所帮助。阅读示例代码可以积累经验，但没有捷径可走。`axes``setp``plt`

因此，转换后的代码变为

```
ax2 = plt.axes([.65, .6, .2, .2], axisbg='y')
ax2.semilogx(t[3:8],s[3:8])
plt.setp(ax2, xticks=[], yticks=[]) 
```

你可以像这样在你的代码中使用它：

```
from numpy import *
import os
import matplotlib.pyplot as plt
data = loadtxt(os.getcwd()+txtfl[0], skiprows=1)
fig1 = plt.figure()
ax1 = fig1.add_subplot(111)
ax1.semilogx(data[:,1],data[:,2])

ax2 = plt.axes([.65, .6, .2, .2], axisbg='y')
ax2.semilogx(data[3:8,1],data[3:8,2])
plt.setp(ax2, xticks=[], yticks=[])

plt.show() 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-05-20T14:16:51.380

最简单的方法是结合“zoomed_inset_axes”和“mark_inset”，其描述和相关示例可以在这里找到： [AxesGrid 工具包概述](http://matplotlib.org/1.3.1/mpl_toolkits/axes_grid/users/overview.html)

![在此处输入图像描述](../Images/52a98b98e5f230f0205ae71f584c58aa.png)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-04-10T13:09:12.867

我所知道的最好的方法是使用 mpl_toolkits.axes_grid1.inset_locator （matplotlib 的一部分）。

这里有一个很好的源代码示例：![在此处输入图像描述](../Images/0a67161bf0c066858222ed9e09f296ed.png)[https ://github.com/NelleV/jhepc/tree/master/2013/entry10](https://github.com/NelleV/jhepc/tree/master/2013/entry10)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-07-03T12:36:50.460

使用 matplotlib 放大图形的一部分的基本步骤

```
import numpy as np
from matplotlib import pyplot as plt

# Generate the main data
X = np.linspace(-6, 6, 1024)
Y = np.sinc(X)

# Generate data for the zoomed portion
X_detail = np.linspace(-3, 3, 1024)
Y_detail = np.sinc(X_detail)

# plot the main figure
plt.plot(X, Y, c = 'k')  

 # location for the zoomed portion 
sub_axes = plt.axes([.6, .6, .25, .25]) 

# plot the zoomed portion
sub_axes.plot(X_detail, Y_detail, c = 'k') 

# insert the zoomed figure
# plt.setp(sub_axes)

plt.show() 
```

[![在此处输入图像描述](../Images/76b88658b9843cf06cd2976e7e930193.png)](https://i.stack.imgur.com/G3JKL.png)

# makefile - makefile链接问题

> ID：13583157
> 
> 赞同：0
> 
> 时间：2012-11-27T11:24:56.483
> 
> 标签：makefile, g++, linker-errors

我有一个小问题.. 我正在尝试修改一个工作 Makefile 以链接我决定在我的代码中添加的函数 simpletrial.cpp（该函数是 IniFile.cpp） 我的旧工作 Makefile 是：

```
include Makefile.arch
TESTS           := simpletrial.cpp
TESTO           := $(TESTS:.C=.o)
TEST            := simpletrial

OBJ             = $(TESTO)
PROGRAMS        = $(TEST)

CXXFLAGS      += 
CXXFLAGS      += 
GLIBS         += 

.SUFFIXES: .$(SrcSuf) .$(ObjSuf) .$(DllSuf)

all:            $(PROGRAMS)

$(TEST):        $(TESTO)
        $(LD) $(LDFLAGS) $^ $(GLIBS) $(OutPutOpt)$@
        @echo "$@ done"

clean:
        @rm -f $(OBJ) $(TESTO) core *~ src/*~ include/*~

.$(SrcSuf).$(ObjSuf):
        $(CXX) $(CXXFLAGS) -c $< -o $@ 
```

我尝试编译和链接 IniFile.cpp 没有成功，但我总是收到错误“未定义对 'IniFile:: 等的引用，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:00:18.457

您的链接行如下：

```
$(LD) $(LDFLAGS) $^ $(GLIBS) $(OutPutOpt)$@ 
```

在这里，您使用 $^ 链接，这是规则的所有先决条件，在本例中是 $(TESTO)，即 simpletrial.o，您似乎没有 IniFile.cpp，所以它赢了不要与它链接。要修复它，只需将 IniFile.cpp 添加到您的测试中，如下所示：

```
TESTS           := simpletrial.cpp InFile.cpp 
```

然后它应该将两个文件编译并链接在一起，并产生 simpletrial 作为结果。

此外，我认为您的 TESTO 线可能也需要更改：

```
TESTO           := $(TESTS:.cpp=.o) 
```

这应该取 $(TESTS) 变量中的值并将后缀从 .cpp 更改为 .o，当前定义只会将 .C 更改为 .o...

# sorting - 使用重复键存储自排序列表的正确数据结构是什么？

> ID：13583159
> 
> 赞同：2
> 
> 时间：2012-11-27T11:24:58.700
> 
> 标签：sorting, data-structures, time-complexity

我需要一些可以在 O(log(n)) 复杂度下工作的东西，我考虑过 AVL 树，但问题是某些键可能会重复自己（例如一个人的分数），所以我想不出如何将其实现为一棵树。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-24T23:01:05.733

有很多可用的选项。大多数类型的二叉搜索树都可以很容易地修改以允许具有重复值的节点，因为平衡操作（通常）纯粹由旋转组成，它使序列保持有序。对于这样的情况，您只需进行正常的 BST 插入，但每次看到重复值时，您只需随意向左或向右移动并继续，就好像该值不同一样。

跳过列表特别容易更新以支持每个键的多个副本，因为它们不会对插入或删除进行任何复杂的结构更新。

如果您没有与每个键关联的辅助信息，那么另一个更简单的选择是存储标准的二叉搜索树，但使用“计数”字段来扩充每个节点，以指示该字段存在多少逻辑副本。每次插入时，如果键不存在，则使用计数 1 创建它。如果它已经存在，则只需增加现有节点中的计数。删除将类似地实施。

当然，如果您不想滚动自己的数据结构，只需找到一个好的多映射或多集实现，它应该可以很好地为您完成工作。根据您选择的编程语言，您甚至可以在标准库中找到这些。:-)

# asp.net-mvc - 在 Asp.Net MVC 应用程序中创建用户控件并注册

> ID：13583164
> 
> 赞同：0
> 
> 时间：2012-11-27T11:25:16.983
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, user-controls, wrapper

我正在 Asp.Net MVC 3 中创建可重用的用户控件，这些控件将用于不同的 MVC 项目。我知道我们可以在 MVC 中创建 Helper。但我想使用部分视图。因为我们可以在 Asp.Net 中创建用户控件库并在所有应用程序中使用它。我想在 MVC 3 中做同样的事情。

我发现下面的文章解释得很清楚。我试图实现它，但它看起来已经过时了

> 在 nuget 中找不到 PrecompiledMvc​​Engine。

谁能解释我如何在 MVC3 中做到这一点。

[可重用的 UI 控件](http://ofps.oreilly.com/titles/9781449320317/ch_ReusableUI.html) 我也使用了[Razor Generator](http://razorgenerator.codeplex.com/)，但它只会在类中创建我的视图代码。在那种情况下，控制器怎么样。另外如何在当前应用程序中引用其他程序集视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:17:10.997

**更新**

我认为这是一个更受欢迎和更流行的解决方案，它使用 MVC 区域的内置功能，将来会省去很多麻烦，

[http://nileshhirapra.blogspot.com/2012/02/aspnet-mvc-pluggable-application.html](http://nileshhirapra.blogspot.com/2012/02/aspnet-mvc-pluggable-application.html)

我认为这是首选，因为您可以使用

```
@Html.ActionLink("SomeAction", "SomeController", new {area = "SomePluginArea"}) 
```

使用 AreaRegistration 在插件中注册自定义路由

**旧答案**

这是一篇旧文章，但同样的原则仍然适用我认为这就是你想要实现的目标吗？

[http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/](http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/)

代码示例：

[http://www.wynia.org/download/aspnetmvc-plugin-poc/POC.MVCPluginDemo.zip](http://www.wynia.org/download/aspnetmvc-plugin-poc/POC.MVCPluginDemo.zip)

# factorial - 如何计算出阶乘的结果应该占多少位？

> ID：13583169
> 
> 赞同：2
> 
> 时间：2012-11-27T11:25:26.703
> 
> 标签：factorial

结果，阶乘函数可能会返回一个非常大的数字。

我怎样才能计算出由于阶乘而必须返回的数据的大小？是否有一个函数可以根据我们正在计算阶乘的数字 n 快速给我数据的大小？

例如，阶乘 (5) = 5 * 4 * 3 * 2 = 120

数字 120 将是​​ 120 = 0b1111000，其中 0b 表示这是一个二进制数。至少，我需要 7 位来表示结果和概率，我想将其放入 8 位中作为一个字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:33:58.800

您需要计算`log2(factorial(N))`，四舍五入到下一个更高的数字，以获得表示结果所需的位数。如果您不确定是否可以使用当前设置计算或表示阶乘结果，您可以尝试计算从 2 到 N（包括 2 和 N）范围内`log2(i)`的所有的总和。`i`

作为示例，让我们计算 的位数`factorial(5)`：

```
log2(120) = 6.906, rounded up become 7 (bits) 
```

否则，

```
log2(2) + log2(3) + log2(4) + log2(5) = 6.906, which gives same result 
```

# jakarta-ee - 如何使用 Apache Tomcat 将 JSP 项目部署到 LAN

> ID：13583170
> 
> 赞同：0
> 
> 时间：2012-11-27T11:25:31.643
> 
> 标签：jakarta-ee, deployment, web-deployment

我想在本地在线部署我的 JSP 项目。我希望可以通过使用网站类型 url 从 LAN 上的其他计算机访问我的应用程序。任何人请帮助我如何部署我的项目。我希望可以使用 www.online.attendance.com.pk 访问我的应用程序如何像这样部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:36:17.520

在本地可以使用您的 IP 地址访问它。或者在本地网络上，您可以更新您的名称服务器以映射到您的 IP 地址，以便其他人可以使用更简单的名称访问它。

如果您希望它可以从 Internet 访问，那将不是很简单。

1.  如果您自己托管它，您将需要一些东西，例如 NS 条目、应用程序的公共主机（公共 IP 或端口转发）、适当的 DNS 条目等。

2.  您可以为您的应用程序找到主机提供商。您仍然需要添加上述内容，例如 C 名称记录等。但您的应用托管服务可能会为您进行必要的配置。

# c++ - 自动变量及其类型

> ID：13583172
> 
> 赞同：9
> 
> 时间：2012-11-27T11:25:53.747
> 
> 标签：c++, c++11, auto

我在一篇文章中找到了如何使用迭代器从容器中删除元素。迭代时：

```
for(auto it = translationEvents.begin(); it != translationEvents.end();)
    {
        auto next = it;
        ++next; // get the next element
        it->second(this); // process (and maybe delete) the current element
        it = next; // skip to the next element
    } 
```

为什么`auto`不使用类型 in `auto next = it;`？

我使用 VS10，而不是 C++11！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T11:30:27.060

`auto`在 C++11 中的含义与以前不同。在早期的标准中，`auto`是用于自动存储持续时间的存储说明符 - 对象在其范围结束时被销毁的典型存储。在 C++11 中，`auto`关键字用于变量的类型推导。变量的类型是从用于初始化它的表达式推导出来的，与模板参数可以从模板函数的参数类型推导出的方式非常相似。

当键入丑陋的长类型没有好处时，这种类型推导很有用。通常，类型在初始化程序中是显而易见的。它对于类型可能取决于它出现在模板的哪个实例化的变量也很有用。

许多 C++11 特性在 VC10 中默认支持，并且`auto`是其中之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T11:26:50.757

它是较新版本的 C++ 中的简写，它允许我们避免笨拙的迭代器表示法，因为编译器能够推断出实际类型应该是什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T11:30:18.870

这称为[类型推断](http://en.wikipedia.org/wiki/C%2B%2B11#Type_inference)。auto 变量的类型由初始化器的类型推导出来。

例如，这减少了大型和复杂模板类型的类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T11:28:37.613

它称为[Type Inference](http://en.wikipedia.org/wiki/C++11#Type_inference)，有关详细信息，另请参阅[此问题](https://stackoverflow.com/questions/8542873/c11-auto-semantics)。C++11 中的新功能，旨在简化许多冗长且不必要的代码，尤其是对于迭代器和函数绑定。

# jquery - jQuery滚动到页面底部

> ID：13583180
> 
> 赞同：15
> 
> 时间：2012-11-27T11:26:10.940
> 
> 标签：jquery

当您单击某个链接时，我使用以下内容滚动到页面顶部。

```
$('.myLinkToTop').click(function () {
    $('html, body').animate({scrollTop:0}, 'slow');
    return false;
}); 
```

我想创建另一个滚动到页面底部的链接。以下工作正常。我认为它会尝试将页面向下滚动 1000 像素，因此如果页面较短，则它的滚动速度会比应有的快，如果页面较高，则它不会一直滚动到底部。如何用窗口高度替换“1000”？谢谢

```
$('.myMenuLink').click(function () {
    $('html, body').animate({scrollTop:1000}, 'slow');
    return false;
}); 
```

我知道这段代码会跳转到页面底部，但它不会像我需要的那样平滑滚动：

```
$(document).scrollTop($(document).height()); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-27T11:43:12.457

您可以通过以下代码实现动画和移动到文档底部的要求

**HTML**

```
<html>
<head>
</head>
<body>
    <div style="height:1500px">
        <button class="myLinkToTop" id="but1" >1</button>
    </div>
        <button class="myMenuLink" id="but1" >2</button>
</body>
</html> 
```

**JS**

```
$('.myLinkToTop').click(function () {
    $('html, body').animate({
        scrollTop: $(document).height()
    }, 'slow');
    return false;
});

$('.myMenuLink').click(function () {
    $('html, body').animate({
        scrollTop:0
    }, 'slow');
    return false;
}); 
```

参考这个链接

[http://jsfiddle.net/q6Wsp/6/](http://jsfiddle.net/q6Wsp/6/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-27T11:40:21.433

您需要从 scrollHeight 中减去视口高度：

```
$('#goToBottom').click(function(){

  var WH = $(window).height();  
  var SH = $('body').prop("scrollHeight");
  $('html, body').stop().animate({scrollTop: SH-WH}, 1000);

}); 
```

```
body{height:2000px;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id="goToBottom">GO TO BOTTOM</button>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T11:33:54.637

试试这个代码

```
$(function () {
     $('#scrlBotm').click(function () {
         $('html, body').animate({
             scrollTop: $(document).height()
         },
         1500);
         return false;
     });

     $('#scrlTop').click(function () {
         $('html, body').animate({
             scrollTop: '0px'
         },
         1500);
         return false;
     });
 }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-19T17:27:15.770

**对于很长的 html 文档**scrollTop:$(document).height() 失败，在这些情况下你可以使用：

```
$('html, body').animate({
    scrollTop: $('#endOfPage').offset().top
}, 1000); 
```

在页面末尾放一个：

```
<div id="endOfPage">&nbsp;</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-11T11:21:36.450

代码顺利跳转到页面底部：

> $(文档).ready(函数 () {
> 
> $('#selector').click(function () { $('html, body').animate({ scrollTop: $(document).height() }, 1000); }); });

使用此代码可以轻松向下滚动页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-21T10:10:26.547

要滚动到页面底部，请尝试以下操作：

```
 $('html, body').animate({
            scrollTop: $('html, body').height()
        }, 'slow'); 
```

# java - java - 如何在java中验证JSpinner textField的最小值和最大值集？

> ID：13583185
> 
> 赞同：0
> 
> 时间：2012-11-27T11:26:18.873
> 
> 标签：java, swing, jspinner

我有两个`JSpinner`设置最小值，另一个设置最大值。

我只希望如果 min 设置了某个值，那么用户不能在最大文本字段中输入小于最小文本字段值，`JSpinner`反之亦然。

如何使用 keylistner 和另一个技巧进行验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:33:02.493

您可以设置自定义微调器模型。数字试试

```
new JSpinner(new SpinnerNumberModel(initvalue,minvalue,maxvalue)); 
```

[http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:34:45.003

您需要将 a 附加`ChangeListener`到每个微调器（模型）。

当`stateChanged`事件被触发时，您需要确定事件发生自哪个模型并相应地更新另一个模型。

因此，如果事件来自最小模型，您需要更新最大模型最小值。

请注意，这可能会导致一系列级联更新，因此您需要为此做好准备

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T11:28:29.460

您可以使用`SpinnerNumberModel`where 设置最小值和最大值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T14:46:32.870

正如*MadProgrammer*建议的那样，`ChangeListener`是正确的方法。

这是一个简单的代码示例：

```
 //class fields
    JSpinner lowSpin = new JSpinner(new SpinnerNumberModel()); 
    JSpinner highSpin = new JSpinner(new SpinnerNumberModel());

    ChangeListener spinListener = new ChangeListener() {
        public void stateChanged(ChangeEvent e) {
            int low = (int) lowSpin.getValue();
            int high = (int) highSpin.getValue();
            if(high < low)
                JOptionPane.showMessageDialog(null, "HIGH should not be less than LOW."); //you can change 'null' to the name of your JFrame
        }
    };

    lowSpin.addChangeListener(spinListener);
    highSpin.addChangeListener(spinListener); 
```

# php - 覆盖函数不兼容

> ID：13583192
> 
> 赞同：6
> 
> 时间：2012-11-27T11:26:45.223
> 
> 标签：php, overriding, arrayobject

## TL;博士

我想这样重写：`offsetSet($index,$value)`但它会产生一个致命错误（“声明必须兼容”）。`ArrayObject``offsetSet($index, MyClass $value)`

## 什么为什么

我正在尝试创建一个`ArrayObject`强制所有值都属于某个对象的子类。我的计划是通过覆盖所有添加值的函数并给它们一个类型提示来做到这一点，所以除了值之外你不能添加任何东西`MyClass`

## 如何

第一站：`append($value);`
来自 SPL：

```
/**
 * Appends the value
 * @link http://www.php.net/manual/en/arrayobject.append.php
 * @param value mixed <p>
 * The value being appended.
 * </p>
 * @return void 
 */
public function append ($value) {} 
```

我的版本：

```
/**
 * @param MyClass $value
 */
public function append(Myclass $value){
    parent::append($value);
} 
```

**似乎像魅力一样工作。**

[你可以在这里找到这个工作的例子](http://ideone.com/TRj1aP)

第二站：`offsetSet($index,$value);`

同样，来自 SPL：

```
/**
 * Sets the value at the specified index to newval
 * @link http://www.php.net/manual/en/arrayobject.offsetset.php
 * @param index mixed <p>
 * The index being set.
 * </p>
 * @param newval mixed <p>
 * The new value for the index.
 * </p>
 * @return void 
 */
public function offsetSet ($index, $newval) {} 
```

我的版本：

```
/**
 * @param mixed $index
 * @param Myclass $newval
 */
public function offsetSet ($index, Myclass $newval){
    parent::offsetSet($index, $newval);
} 
```

但是，这会产生以下致命错误：

> 致命错误：Namespace\MyArrayObject::offsetSet() 的声明必须与 ArrayAccess::offsetSet() 的声明兼容

[你可以在这里看到这个不工作的版本](http://ideone.com/lK2EAx)

如果我这样定义它，那很好：

```
public function offsetSet ($index, $newval){
    parent::offsetSet($index, $newval);
} 
```

[你可以在这里看到这个工作的一个版本](http://ideone.com/vF1vQ6)

## 问题

1.  为什么覆盖不能`offsetSet()`使用上面的代码，但是`append()`呢？
2.  如果我在 and 的旁边添加了 next 的定义，我是否拥有添加对象的所有`exchangeArray()`功能？`append()``offsetSet()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:37:23.200

API 永远不应该变得更具体。

事实上，我认为这`append(Myclass $value)`是一个不是致命错误的错误。我认为您的致命错误`offsetSet()`是正确的。

这样做的原因是简单的：

```
function f(ArrayObject $ao) { 
    $ao->append(5); //Error
} 

$ao = new YourArrayObject(); 
```

如果`append`有类型要求，那将出错。不过看起来没什么问题。您已经有效地使 API 更加具体，并且不再能够假定对基类的引用具有预期的 API。

基本上可以归结为，如果 API 更加具体，则该子类不再与其父类兼容。

这种奇怪的差异可以通过以下方式看到`f`：它允许您将 a 传递给它，但随后将在执行`Test`时失败。`$ao->append(5)`如果 a`echo 'hello world';`在它之上，那将执行。我认为这是不正确的行为。

在像 C++、Java 或 C# 这样的语言中，这就是泛型发挥作用的地方。在 PHP 中，恐怕没有一个很好的解决方案。运行时检查会令人讨厌且容易出错，并且滚动您自己的类将完全消除将 ArrayObject 作为基类的优势。不幸的是，希望将 ArrayObject 作为基类也是这里的问题。它存储混合类型，因此您的子类也必须存储混合类型。

您也许可以在自己的类中实现该 ArrayAccess 接口，并清楚地标记该类仅用于某种​​类型的对象。不过，我担心这仍然有点笨拙。

如果没有泛型，就没有运行时实例样式检查的通用同构容器的方法。唯一的方法是拥有一个 ClassAArrayObject、ClassBArrayObject 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T11:42:42.850

```
abstract public void offsetSet ( mixed $offset , mixed $value ) 
```

由[ArrayAccess](http://docs.php.net/manual/en/class.arrayaccess.php)接口声明，`public void append ( mixed $value )`但没有对应的接口。显然，在后一种情况下，php 比接口更“宽容”/宽松/无论如何。

例如

```
<?php
class A {
    public function foo($x) { }
}

class B extends A {
    public function foo(array $x) { }
} 
```

"only" 打印警告

```
Strict Standards: Declaration of B::foo() should be compatible with A::foo($x) 
```

尽管

```
<?php
interface A {
    public function foo($x);
}

class B implements A {
    public function foo(array $x) { }
} 
```

与

```
Fatal error: Declaration of B::foo() must be compatible with A::foo($x) 
```

# c# - 在服务器端反序列化 json 格式的字符串

> ID：13583193
> 
> 赞同：1
> 
> 时间：2012-11-27T11:26:47.583
> 
> 标签：c#, jquery, json, deserialization, stringify

我正在将我的数组数组从客户端发送到服务器。`stringify`像这样使用jQuery ajax方法

```
JSON.stringify({ list: FinalList }) 
```

在服务器端我得到它是这样的

```
{\"list\":[[\"Full Name\"],[\"Select any one\",\"Option 1\",\"Option 2\",\"Option 3\"],[\"address\"],[\"contact name\"]]} 
```

但我无法再次将其更改为原始形式。我尝试使用`JavaScriptSerializer`，但无法获得所需的结果。它给了我一个`object`.

我将如何将其反序列化为原始形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:40:59.917

[JavaScriptSerializer](http://msdn.microsoft.com/library/system.web.script.serialization.javascriptserializer.aspx)中的**Deserialize< T >(String)**方法需要一个 Type 参数，该参数告诉它要反序列化到哪个类型。

您必须有一个与您的 javascript 对象具有相同结构的类（具有名称为“list”的 List 或 Array 属性），例如**MyType**。然后使用**Deserialize< MyType >(text)**获取正确的**MyType**实例。

**MyType**类应该是这样的：

```
public class MyType
{
    public IList<string[]> List { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T18:45:23.337

我有一个类似的问题，最终需要不同的解决方案。我有一个包含多个嵌套模型的复杂模型，虽然我有默认/无参数构造函数（如果你不这样做，它实际上会给你一个很好的 500 错误）我没有在默认构造函数中更新我的嵌套模型。一旦我在每个默认构造函数中实例化了这些，反序列化器就能够完美地构建我的对象。

# asp.net - VB.net 有条件地将隐藏字段值设置为数据表列名

> ID：13583198
> 
> 赞同：0
> 
> 时间：2012-11-27T11:26:58.083
> 
> 标签：asp.net, vb.net

我有一组 asp 隐藏字段控件，我希望根据我的数据表列名设置值，返回的列数不同，所以如果不使用，我将未使用的隐藏字段设置为 0。以下是我迄今为止所做的尝试，只是努力相应地设置正确的隐藏字段。

VB-

```
 Dim dt As DataTable
            Dim ds As New DataSet()
            ds = Getdata(4)
            dt = ds.Tables(0)

            Dim ColCnt As String = dt.Columns.Count 'Current ColCnt is 3
            For Each column As DataColumn In dt.Columns
                Select Case ColCnt
                    Case 2
                        hxValue.Value = column.ColumnName 'set to 1st Column Name
                        hxValue1.Value = 0 'Not used
                        hyValue.Value = column.ColumnName 'Set To 2nd Column Name
                    Case 3
                        hxValue.Value = column.ColumnName 'set to 1st Column Name
                        hxValue1.Value = column.ColumnName 'set to 2nd Column Name
                        hyValue.Value = column.ColumnName 'set to 3rd Column Name
                End Select
            Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:39:30.740

试试这个，我认为你不需要`For Each`循环：

```
Dim ColCnt As Int = dt.Columns.Count 'Current ColCnt is 3    
Select Case ColCnt
    Case 2
        hxValue.Value = dt.Columns[0].ColumnName 'set to 1st Column Name
        hxValue1.Value = 0 'Not used
        hyValue.Value = dt.Columns[1].ColumnName 'Set To 2nd Column Name
    Case 3
        hxValue.Value = dt.Columns[0].ColumnName 'set to 1st Column Name
        hxValue1.Value = dt.Columns[1].ColumnName 'set to 2nd Column Name
        hyValue.Value = dt.Columns[2].ColumnName 'set to 3rd Column Name
End Select 
```

# grails - 是否可以从 webflow 控制器操作访问视图状态？

> ID：13583201
> 
> 赞同：0
> 
> 时间：2012-11-27T11:27:21.357
> 
> 标签：grails, action, spring-webflow, grails-controller

我有一个不在 webflow 上但需要将其重定向到 weblflow 的控制器。问题是我需要访问的视图位于 webflow 的操作中。

这是我的网络流

类 EditSpouseContactInfoController {

```
def index = { redirect(action:"editSpouseContact") }

def editSpouseContactFlow = {

    start{
        action {

           //some codes here
        }

        on("success").to("editSpouseContact")
        on(Exception).to("editSpouseContact")
    }

    editSpouseContact {

        /************************************/
        // Veteran Marital History Processing
        /************************************/
        on("addMaritalHistory"){

            flow.contactInstance.properties = params

            if(!flow.maritalHistoryLst){
                flow.maritalHistoryLst = []
            }
            conversation.maritalHistoryInstance = new MaritalHistory()
            conversation.maritalHistoryInstance.isVeteranMaritalHistory = false

        }.to("editSpouseMaritalHistory")

    }
} 
```

这是我的非 weblow 控制器：

```
 def addMaritalHistory={
        MySession session = MySession.getMySession(request, params.id)

        def caseInstance = CmCase.get(params.cmCaseIdCmCase.id as Long)
        redirect(controller: "editSpouseContactInfo",  action: "editSpouseContact ", id:caseInstance.id)
    } 
```

上面的行有效，但我是否可以直接访问**addMaritalHistory**内的 editSpouseContact?like 而不是使用上述操作，它会是 action: **"addMaritalHistory"**吗？当然它不起作用，但有没有办法将其称为行动？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:37:25.713

网络流的全部意义在于，您不能从外部直接跳到流的中间。您必须在初始启动状态中添加一些逻辑，以检查传入的某些参数`params`并从那里跳转到适当的状态。

# web-services - http-security-filter 在 mule 中不起作用

> ID：13583208
> 
> 赞同：1
> 
> 时间：2012-11-27T11:27:54.953
> 
> 标签：web-services, mule

我使用 Mule Server 3.3.0 CE，生成以下代码：

```
 <mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:spring="http://www.springframework.org/schema/beans" xmlns:http="http://www.mulesoft.org/schema/mule/http"
xmlns:pattern="http://www.mulesoft.org/schema/mule/pattern"
xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security"
xmlns:ss="http://www.springframework.org/schema/security"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.3/mule.xsd
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.3/mule-http.xsd
    http://www.mulesoft.org/schema/mule/pattern http://www.mulesoft.org/schema/mule/pattern/3.3/mule-pattern.xsd
    http://www.mulesoft.org/schema/mule/spring-security
    http://www.mulesoft.org/schema/mule/spring-security/3.3/mule-spring-security.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<mule-ss:security-manager>
    <mule-ss:delegate-security-provider
        name="memory-dao" delegate-ref="authenticationManager" />
</mule-ss:security-manager>

<spring:beans>
    <ss:authentication-manager alias="authenticationManager">
        <ss:authentication-provider>
            <ss:user-service id="userService">
                <ss:user name="sepideh" password="16978413" authorities="ROLE_ADMIN" />
            </ss:user-service>
        </ss:authentication-provider>
    </ss:authentication-manager>
</spring:beans>

<pattern:web-service-proxy name="myService"
    wsdlLocation="http://ws.acme.com:6090/wsdl/weather-forecast">
    <http:inbound-endpoint address="http://localhost:8090/service">
        <mule-ss:http-security-filter realm="mule-realm" />
    </http:inbound-endpoint>
    <http:outbound-endpoint address="http://ws.acme.com:6090/weather-forecast" />
</pattern:web-service-proxy> 
```

我运行这个项目，我有以下异常：

```
ERROR 2012-11-27 14:31:25,456 [[web_service].connector.http.mule.default.receiver.02] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Registered authentication is set to org.mule.module.spring.security.filters.http.HttpBasicAuthenticationFilter but there was no security context on the session. Authentication denied on endpoint http://localhost:8090/service. Message payload is of type: String
Code                  : MULE_ERROR-54999
--------------------------------------------------------------------------------
Exception stack is:
1\. Registered authentication is set to org.mule.module.spring.security.filters.http.HttpBasicAuthenticationFilter but there was no security context on the session. Authentication denied on endpoint http://localhost:8090/service. Message payload is of type: String (org.mule.api.security.UnauthorisedException)
org.mule.transport.http.filters.HttpBasicAuthenticationFilter:160 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/security/UnauthorisedException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.mule.api.security.UnauthorisedException: Registered authentication is set to org.mule.module.spring.security.filters.http.HttpBasicAuthenticationFilter but there was no security context on the session. Authentication denied on endpoint http://localhost:8090/sevice. Message payload is of type: String
    at org.mule.transport.http.filters.HttpBasicAuthenticationFilter.authenticateInbound(HttpBasicAuthenticationFilter.java:160)
    at org.mule.security.AbstractEndpointSecurityFilter.authenticate(AbstractEndpointSecurityFilter.java:58)
    at org.mule.security.AbstractAuthenticationFilter.doFilter(AbstractAuthenticationFilter.java:56)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything) 
```

新的 wsdl 地址显示给我，但我不能使用这个地址来创建 Web 服务。[此页面](http://forum.mulesoft.org/mulesoft/topics/how_to_configure_spring_securitymanager_with_cxf_webservice)的所有解决方案链接，但我不知道如何将 SoapUI 更改为真实值。我应该在我的配置中更改什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-09T04:47:37.840

发布此内容可能会对某些人有所帮助。将 HTTP 连接器从 Mule 较低版本迁移到 3.6+ 或 3.7 的人（因为，我在升级时遇到了这个错误）。请按照链接 [https://docs.mulesoft.com/mule-user-guide/v/3.6/configuring-the-spring-security-manager](https://docs.mulesoft.com/mule-user-guide/v/3.6/configuring-the-spring-security-manager)（我们不能`mule-realm`像在版本 3.3 中那样配置 HTTP 侦听器）。当您尝试从 SOAP UI 中点击它时，您会发现上述错误`Registered authentication is set to org.mule.module.spring.security.filters.http.HttpBasicAuthenticationFilter but there was no security context on the session`。这不是 Mule 配置文件的问题。需要更改 SOAPUI 设置

解决此错误的 2 种方法：

转到 SOAPUI->File->Preference->HTTP settings-> enable 选项`Authenticate Preemptively`
或
在 SOAPUI
Authorization->Basic -> Pre-emptive auth -> enable中设置基本身份验证时`Authenticate Pre-emptively`。默认情况下，它将是“使用全局首选项”，需要更改为`Authenticate Pre-emptively`

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:11:31.820

似乎相关，你得到的错误是一个红鲱鱼。即使正在记录，您是否会收到成功响应？ [http://www.mulesoft.org/jira/browse/MULE-5607](http://www.mulesoft.org/jira/browse/MULE-5607)

# sql - SQL Like 语句在 Visual Basic 中不起作用

> ID：13583209
> 
> 赞同：-3
> 
> 时间：2012-11-27T11:27:54.853
> 
> 标签：sql, vb.net, dataset, sql-like

```
Dim strText As String = tbRefine.Text
Dim sql As String = "SELECT user_name,forename,surname,game_cash,reg_group FROM tblGame WHERE user_name LIKE '" + strSearchText + "' & '*'"
Dim dsRefine As New DataSet
GetDataset(sql, "tblGame", dsRefine)

MsgBox(dsRefine.Tables("tblGame").Rows(0).Item(2).ToString) 
```

这不起作用，它崩溃并说数据集中没有任何内容。我知道数据集函数像以前一样成功地工作。当我将 sql 语句打印到 microsoft access 中时，它工作正常。我究竟做错了什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T11:29:53.423

试试这个：

```
"SELECT user_name,forename,surname,game_cash,reg_group
 FROM tblGame
 WHERE user_name LIKE '%" + strSearchText + "%'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-29T21:00:19.367

尝试`RTRIM()`在您的行中使用该功能：

`Dim sql As String = "SELECT user_name,forename,surname,game_cash,reg_group FROM tblGame WHERE RTRIM(user_name) LIKE '" + strSearchText + "' & '*'"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:30:46.300

你喜欢的前导或尾随 % 符号怎么样？

目前，您将得到一个 where 子句，例如：

```
LIKE 'searchtext''*' 
```

这看起来有点奇怪（我假设是 SQL 服务器？）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:34:41.530

使用 SQL 参数更明智，因为您的方法对 SQL 注入开放。下面的链接将帮助您了解如何格式化 SQL 语句。我还建议通过存储过程进行操作，但帽子是可选的...

[http://forums.asp.net/t/1256985.aspx](http://forums.asp.net/t/1256985.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-11T00:44:15.317

我认为还有一件事要提到：“*”通配符适用于 VB/VBA/MS-Access 中的“Like”运算符，但不适用于 T-SQL。T-SQL 中“Like”运算符的正确通配符是“%”。这就是为什么这个 T-SQL 语句：

```
Select... WHERE ... LIKE 'sText*' 
```

在 MS-SQL（使用 T-SQL）中没有返回没有任何语法错误的数据，但在 MS-Access 中有效。

# android - 使用 JavaCV 读取/写入流

> ID：13583217
> 
> 赞同：2
> 
> 时间：2012-11-27T11:28:18.283
> 
> 标签：android, video, ffmpeg, javacv

我正在尝试将 JavaCV 用于 android。我想创建一个由屏幕截图组成的视频流。我发现我可以使用 FFmpegFrameRecorder 写入文件，但除了文件之外，我无法写入流、数组、缓冲区或其他任何内容。

接下来是我发现了一段代码，其中包含使用“avio_alloc_context”和读/写/搜索回调的自定义 FrameRecorder。不幸的是，它只是一个片段，它是在 C++ 中的。android 上的 'avio_alloc_context' 方法采用 Read_packet、Read_packet 和 Seek 回调，因此我无法传递 Write_packet 回调。此外，在“avio_alloc_context”调用之后，我对传递给“avio_alloc_context”的所有对象都调用了“finalize”。

```
final VideoOutputStream videoOutputStream = new VideoOutputStream(stream);

Read_packet read_packet = new Read_packet() {
    @Override
    public int call(Pointer arg0, BytePointer arg1, int arg2) {
        VideoOutputStream videoStream = (VideoOutputStream) arg0;
        try {
            videoStream.write(arg1.getStringBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
        return arg2;
    }
};

AVIOContext pb = avio_alloc_context(new MBytePointer(av_malloc(video_outbuf_size)), video_outbuf_size, 1,videoOutputStream, null, read_packet, null);

oc.pb(pb); 
```

使用上面的代码不会崩溃也不会报告错误。我只是不断收到空文件。

我的问题是——你们中有人设法让它工作吗？你知道在 JavaCV 的 FrameRecorder/Grabber 中初始化自定义读/写的正确方法吗？

# ssh - Raspberry Pi 图形通过 ssh 和本地

> ID：13583222
> 
> 赞同：1
> 
> 时间：2012-11-27T11:28:27.517
> 
> 标签：ssh, raspberry-pi, x11

我有一个树莓派，其代码使用 OpenGL 进行图形输出。当我进入 ssh 时，我得到了图形的 X 窗口输出。但是，当我在 pi 上运行它时，输出不显示。有没有人有任何想法？

我已经比较了两者的 printenv 详细信息，除了 ssh 之外的所有内容都是相同的。它正在运行“raspbian wheezy”-“Linux raspberrypi 3.2.27+ #160 PREEMPT Mon Sep 17 23:18:42 BST 2012 armv6l GNU/Linux”

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T00:37:33.640

尝试使用[xtruss 之类的跟踪器跟踪您的程序正在进行的 X11 调用](http://www.chiark.greenend.org.uk/~sgtatham/xtruss/)

X11 上的 OpenGL 对本地和非本地连接的工作方式不同。对于本地连接：

*   [客户端要求 DRI2 扩展](http://cgit.freedesktop.org/mesa/mesa/tree/src/glx/indirect_glx.c)分配显存缓冲区
*   所有进一步的请求都是本地函数调用，OpenGL 库 -> 视频驱动程序 -> 内核，绕过 X 服务器

对于非本地连接 - 每个 GL 命令都是[GLX 扩展中的相应请求](http://cgit.freedesktop.org/xcb/proto/tree/src/glx.xml?id=HEAD)

另见[DRI wiki 文档](http://www.x.org/wiki/DRI2)

# git - 推送一个“未签出”分支

> ID：13583231
> 
> 赞同：113
> 
> 时间：2012-11-27T11:28:59.200
> 
> 标签：git

我想推送一个分支（不是当前的）而不必先检查它，我该如何实现呢？

这就是我的做法：

```
#currently in master
git checkout feature
git push origin feature
git checkout master 
```

但是签出功能可能会导致冲突，我不能只推送另一个分支而不是当前分支吗？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-11-27T11:39:37.603

简单地：

```
git push origin feature:feature 
```

或更短：

```
git push origin feature 
```

# google-app-engine - 无法授权我的谷歌应用访问我的 Cloud SQL 实例

> ID：13583240
> 
> 赞同：5
> 
> 时间：2012-11-27T11:29:28.030
> 
> 标签：google-app-engine, google-cloud-sql

我已经在 App Engine 上部署了一个应用程序。现在我正在尝试授予对该应用程序的访问权限，以便能够访问我的 Cloud SQL 实例。该步骤简单明了，如下所述：

[https://developers.google.com/cloud-sql/docs/access_control](https://developers.google.com/cloud-sql/docs/access_control)

但是，当我填写应用程序 ID 并推送“保存更改”时，我收到错误：

“发生了意外错误。我们正在调查。”

有人对这个问题有想法吗？

更新：

在这个问题上花了一些时间后，我做了以下观察：

我位于欧盟。因此，我在欧盟区域创建了一个 Cloud SQL 实例。当我尝试将授权应用程序添加到我的 SQL 实例时，我收到上面发布的错误：“发生了意外错误。我们正在调查它。” 然后我在美国创建了一个新的 SQL 实例。然后，我能够授权该实例的应用程序。但是我的应用程序无法访问美国 SQL 实例，因为我猜我的应用程序部署在欧盟的某个地方。

谷歌支持团队的人能否确认我的观察并解释我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:44:24.540

您的 GAE 应用和 Cloud SQL 实例必须位于同一位置： [https ://developers.google.com/cloud-sql/faq#location](https://developers.google.com/cloud-sql/faq#location)

目前（2012 年 11 月 27 日）只有当您是主要客户时，您才能在欧盟创建 GAE 应用程序。 [https://developers.google.com/appengine/docs/premier/location](https://developers.google.com/appengine/docs/premier/location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:20:10.340

这是 Cloud SQL 的一个已知问题 - 目前应用和 Cloud SQL 位置必须匹配。不幸的是，您目前无法拥有（免费）欧盟应用程序。因此，如果您选择了 EU Cloud SQL，那么它的第 22 个问题。您需要删除当前的 SQL 实例并添加一个位于美国的新实例。

但是，这并不能解释您的第二个问题-如果实例允许您添加应用程序，则该应用程序必须在美国，并且您面临不同的问题。另请注意，如果您有免费应用程序，那么它在美国的定义是 - 您目前无法在免费版本上选择应用程序位置。

顺便说一句，我不是 Google 支持人员：D 此信息来自 google 组中的 Google 人员对我的回复。

# c# - 为什么 Worker 线程在 Metro 应用程序中初始化 UI？

> ID：13583245
> 
> 赞同：1
> 
> 时间：2012-11-27T11:29:41.897
> 
> 标签：c#, microsoft-metro

在一个简单的 .Net 4.5 WPF 应用程序 MainThread（我相信它是 UI 线程）中初始化 UI，如下图所示

![在此处输入图像描述](../Images/b736bb864d318015acb8e0bbbbca63e7.png)

但在 Metro 应用程序中，工作线程正在初始化 UI。为什么呢？在这种情况下是 Worker Thread 是 UI 线程吗？主线程可能不是 UI 线程是否正常？

![在此处输入图像描述](../Images/091304aa1f756718f92fe53346282844.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:18:30.777

“工作线程”是您的 UI 线程。

“主线程”只是按照惯例。它只是意味着创建的第一个线程，但从 Windows 的角度来看，所有线程都是等效的。

取自[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d4db53e7-b1fa-4d14-b430-0256367f5192)

# apache - 尝试添加一个虚拟主机

> ID：13583252
> 
> 赞同：0
> 
> 时间：2012-11-27T11:29:56.407
> 
> 标签：apache, vhosts

我有一个带有网站的 Web 服务器，我想添加另一个地址以供预生产使用。

这里存在：

httpd.conf：

```
ServerAdmin support@toto.com
ServerName www.toto.com:80
DocumentRoot "/home/tutu/var/www/html" 
```

模块/vhost.conf：

```
<VirtualHost *:80>
    ServerAdmin support@toto.com
    ServerName www.toto.com:80
    DirectoryIndex index.php

    ErrorLog /home/tutu/var/log/httpd/error-mod_log
    LogLevel warn
    CustomLog /home/tutu/var/log/httpd/access-mod_log common-cookie

   <Location /server-status>
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
  </Location>
</VirtualHost> 
```

我试图添加另一个 VirtualHost 但新地址不起作用：

```
<VirtualHost *:80>
    ServerAdmin support@toto.com
    ServerName www2.toto.com:80
    DirectoryIndex index.php

    ErrorLog /home/tutu/var/log/httpd/error-www2_log
    LogLevel warn
    CustomLog /home/tutu/var/log/httpd/access-www2_log common-cookie
    DocumentRoot "/home/tutu/var/www2/html"
</VirtualHost> 
```

地址 www2.toto.com 无效。你有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:38:02.573

您是否已将 www2.toto.com 添加到 DNS 中？它尚未添加到公共 DNS。（但 www.toto.com 是）

“不工作”不是很具体。您是否获得了该站点的默认 Apache 网页，或者您没有访问服务器？如果是后者，DNS 查找可能是您真正的问题，而不是 Apache 配置。

Apache-config 看起来不错，但您不需要指定 :80 作为别名端口。

# iphone - 将 NSstring 日期转换为 UTC 日期

> ID：13583253
> 
> 赞同：3
> 
> 时间：2012-11-27T11:30:03.653
> 
> 标签：iphone, objective-c, ios, xcode

我需要将我拥有的一些日期转换`NSString`为`NSString`这种格式：`yyyy-MM-dd HH:mm:ss zzz` 我写了这段代码：

**日期输入：日期---> 27/03/2012**

```
-(NSString *)setDateStringFormat:(NSString *)date 
 {
     NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
     [formatter setDateFormat:@"dd/MM/yyyy"];
     [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
     //[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
     NSDate *dateFormatted = [formatter dateFromString:date];

     [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"];
     [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
 return [formatter stringFromDate:dateFormatted];
 } 
```

**输出：格林威治标准时间 2012-03-27 00:00:00**

你们都可以看到我得到了日期，`GMT`而不是`UTC` 有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T11:36:10.050

试试这个方法。。

```
-(NSString *)getUTCFormateDate:(NSString *)localDate
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd/MM/yyyy"];

    NSDate *dateFormatted = [dateFormatter dateFromString:localDate];
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    [dateFormatter setTimeZone:timeZone];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *dateString = [dateFormatter stringFromDate:dateFormatted];
    [dateFormatter release];
    return dateString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:52:12.623

我认为，这里 GMT 显示标准时间，GMT 和 UTC 都相同。请查看以下链接： [http](http://wwp.greenwichmeantime.com/) ://wwp.greenwichmeantime.com/ http://www.worldtimeserver.com/convert_time_in_UTC.aspx

谢谢

# .net - 如何监视/分析正在运行的 .net 程序集

> ID：13583254
> 
> 赞同：1
> 
> 时间：2012-11-27T11:30:04.800
> 
> 标签：.net, profile, .net-assembly, probe

我们有一个始终运行的基于 .net 的 Windows 服务。我想制作一个 .net win 应用程序，它将探测这个正在运行的 .net 进程并告诉我当前正在执行哪个方法。

我有可用于我喜欢监控的 .net windows 服务的源代码。但是，我不允许对现有源代码进行任何更改并插入任何检查点/日志条目。

蚂蚁探查器是做类似事情的东西。但我不想要任何性能/内存分析。我只是想知道 .Net C# 中是否有任何方法，以便我可以探测正在运行的 .net 进程并找到当前正在执行的方法。

# java - Java 绘制仅在窗口（未？）聚焦时更新

> ID：13583257
> 
> 赞同：0
> 
> 时间：2012-11-27T11:30:09.853
> 
> 标签：java, netbeans

我的 Java 代码有点问题。对于一个学校项目，我们必须编写一个简单的 Java 程序。我有一些编程经验，但没有 Java。

我们正在使用 Netbeans，我们必须制作一个 JFrame，其中包含一个包含小程序的面板。小程序应该是一个简单的红绿灯（红/橙/绿），JFrame 应该包含三个按钮“红”、“橙”和“绿”，它们应该更新红绿灯。

我得到了大部分工作：我有一个小程序，它根据布尔值红色、橙色和绿色绘制交通信号灯，并且使用按钮进行更新也可以。

问题是只有当我将窗口隐藏在其他人后面时屏幕才会重绘，然后再让它出现。我对绘画在 Java 中的工作原理的理解非常有限，而且我在互联网上找不到任何解决这个问题的方法。谁能帮我？

这是我的代码：

DeFrame.java

```
package my.AppletInPanel;

public class DeFrame extends javax.swing.JFrame {

private DeApplet applet;

/** Creates new form DeFrame */
public DeFrame() {
    initComponents();
    applet = new DeApplet();
    jPanel1.add(applet);
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// [Generated code]

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    applet.SetDaColor(true, false, false);
}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    applet.SetDaColor(false, true, false);
}

private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
    applet.SetDaColor(false, false, true);
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new DeFrame().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JPanel jPanel1;
// End of variables declaration
} 
```

和 DeApplet.java：

```
package my.AppletInPanel;

import java.applet.Applet;
import java.awt.*;

public class DeApplet extends Applet {

public boolean rood = true, oranje = false, groen = false;

public DeApplet(){
    setLayout(null);
    setSize(50, 150);
}

public void SetDaColor(boolean r, boolean o, boolean g){
    rood = r;
    oranje = o;
    groen = g;
}

public void paint(Graphics g){
    super.paint(g);

    g.setColor(Color.white);
    g.drawRect(0, 0, 50, 150);
    g.fillRect(0, 0, 50, 150);

    if(rood){
        g.setColor(Color.red);
        g.fillOval(0 , 0, 50 ,50);
    }
    if (oranje){
        g.setColor(Color.orange);
        g.fillOval(0 , 50, 50 ,50);
    }
    if (groen){
        g.setColor(Color.green);
        g.fillOval(0 , 100, 50 ,50);
    }

    String s1 = (new Boolean(rood).toString());
    String s2 = (new Boolean(oranje).toString());
    String s3 = (new Boolean(groen).toString());

    g.setColor(Color.black);
    g.drawString(s1, 25, 25);
    g.drawString(s2, 25, 75);
    g.drawString(s3, 25, 125);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:40:41.063

尝试重新粉刷面板和/或框架

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    applet.SetDaColor(false, true, false);
    applet.repaint();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:41:13.893

您应该看看[Java Swing revalidate() 与 repaint()](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)，其中讨论了对您很重要的方法。

由于这是为学校准备的，我还想指出，使用[Java Enums](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)将大大改进您的“显示哪种颜色”逻辑，在这种情况下，您不会陷入奇怪的状态，例如 groen 和 rood 都是真的同时。

# c# - 获取列表 来自列表 使用 linq

> ID：13583259
> 
> 赞同：7
> 
> 时间：2012-11-27T11:30:11.060
> 
> 标签：c#, linq, c#-3.0

我有列表`customer`并希望它`id`在单独的列表中`List<int>`。

我尝试使用：

```
customerList.Cast<int>.Distinct().ToList() 
```

但它不起作用。我还想要不同的客户 int 列表。

我怎样才能使用`LINQ`语法来做到这一点？我应该在查询中做哪些更改？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T11:33:36.970

试试这个：

```
List<int> customerIds = customerList.Select(c => c.Id).Distinct().ToList(); 
```

该代码假定您的客户对象具有返回 int 的 Id 属性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T11:31:29.540

从您的客户列表中选择 ID，然后使用[ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx)获取 Id 列表。

```
var IdList = customerList.Select(r=> r.ID).ToList(); 
```

要获得不同的 ID，请尝试：

```
var IdList = customerList.Select(r=> r.ID).Distinct().ToList(); 
```

# c# - 如何将带有句点字符的字符串转换为int？

> ID：13583264
> 
> 赞同：-2
> 
> 时间：2012-11-27T11:30:19.640
> 
> 标签：c#, string

如何将带有句点字符的字符串转换为 int？

我必须将像“ `1924.912`”这样的字符串转换为int，但是`int.Parse()`and`Convert.ToInt32()`方法在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:37:14.767

试试这个：

```
var str = "1924.912";
var mass = str.Split('.').Select(x => x).ToArray(); 
```

或这个：

```
var str = "1924.912";
var mass = str.Split('.'); 
```

要让所有像 int 一样的小数，接下来使用：

```
var str = "1924.912";
var mass = str.Replace(".",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:32:22.763

您可以使用 Double.Parse() 然后将结果转换为 int。

```
var result = (int)Double.Parse("1924.912"); 
```

您可以选择指定小数分隔符，因为它是本地特定的。

如果您想从“1924.912”中获取 1924912，您可以通过替换“.”来实现。经过 ””：

```
 string s = "1924.912";
  int result = int.Parse(s.Replace(".", ""));
  result.Dump(); 
```

将打印 1924912。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:32:44.420

做这个

```
string value = "34690.42724";
Convert.ToInt64(Math.Round(Convert.ToDouble(value))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:39:29.570

```
double.Parse(textBox1.Text.Replace(".",",")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:18:24.907

如果要将字符串转换为不考虑句点`"1924.912"`的整数`1924912`，则可以使用此表达式，您只需在进行转换之前删除字符串中的任何句点：

```
Int32.Parse("1924.912".Replace(".", String.Empty)) 
```

# jquery - jQuery - 删除 cookie

> ID：13583271
> 
> 赞同：1
> 
> 时间：2012-11-27T11:30:27.653
> 
> 标签：jquery

如何删除包含字符串的 cookie

> 显示名称

名义上？它只有一个带有这个字符串的 cookie，但我不知道所有名称，只知道部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:34:04.027

如果您不知道 cookie 的全名，您可以通过检查整个 cookie 集合轻松找到：

```
var names = document.cookie.split(';')
   .map(function(c) { return c.split('=')[0]; })
   .filter(function(c) { return c.indexOf('displayName') > -1; }); 
```

在这里，`names`将包含`displayName`其名称中的所有 cookie。如果您确定这只会是一个，请继续删除`names[0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:39:44.260

```
var cookies = document.cookie.split(";");
for (i = 0; i <= cookies.length; i++) {
    if (cookies[i].indexOf(name) != -1)
        document.cookie = name + "=" + value + "; 01 Jan 1970 00:00:01 GMT; path=/";
} 
```

这将删除所有`name`名称中包含 的 cookie。这是纯 Javascript，不涉及 JQuery。

我设置日期的原因`01 Jan 1970 00:00:01 GMT`是，因为我们已经过了那个日期，所以浏览器会删除 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:38:48.473

删除cookie：

```
function Delete_Cookie( name, path, domain ) 
{
   if ( Get_Cookie( name ) )
   document.cookie=name+"="+((path) ? ";path="+path:"")+((domain)?";domain="+domain:"") +
                                   ";expires=Thu, 01 Jan 1970 00:00:01 GMT";
} 
```

或者

```
function del_cookie(name)
{
    document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
} 
```

来源：[javascript - 删除 cookie](https://stackoverflow.com/questions/2144386/javascript-delete-cookie)

# python - QProgressDialog 的尸体徘徊 - 有时

> ID：13583275
> 
> 赞同：3
> 
> 时间：2012-11-27T11:30:46.913
> 
> 标签：python, qt, pyqt, pyside

```
 progress = QtGui.QProgressDialog("Parsing Log", "Stop", 0,numberOfLinesInFile , self)
    progress.setWindowModality(QtCore.Qt.WindowModal)

    for lineNumber, line in enumerate(file):
        # yield a bit to the Qt UI handler
        QtGui.QApplication.processEvents()
        progress.setValue(lineNumber + 1) # lineNumber is zero-based so need the plus one to match the more literal numberOfLinesInFile
        if progress.wasCanceled():
            progressWasCancelled = True
            break

        # ...read and parse lines from file (20mb takes ~10 seconds)

    # crank the progress bar through to completion to get rid of it
    # this seems to forgo the opportunity to use progress.wasCanceled() subsequently?
    progress.setValue(numberOfLinesInFile)

    if not progressWasCancelled:
        self.updateTable(self.requestRoster) 
```

在此之后，无论进度对话是否被取消，进度对话都会被隐藏（它会滑回工具栏）。但是，如果我切换应用程序（Mac 上的“命令选项卡”）然后切换回我的应用程序，QProgressDialog 的幽灵就出现在主应用程序窗口的前面！它的进度条为 100%，停止按钮为蓝色但不闪烁。它没有反应。如果我移动应用程序窗口，它就会消失。

如果我在 progress.setValue(numberOfLinesInFile) 之后调用 progress.destroy() 似乎有帮助。但是从文档中复制示例并被咬似乎令人担忧，而且我不知道 destroy() 的后果。

我正在使用 PySide，我切换到 PyQt 和同样的东西。

此外，有时会`progress.setValue(numberOfLinesInFile)`导致后续读取`progress.wasCancelled()`返回 false（但有时返回 true！），这就是我设置自己的`progressWasCancelled`. 它的随机性令人不安。

我在 Mac 10.6.8、Qt 4.8.2、Python 2.7 上。尝试使用 PySide 1.1.0 和 PyQt 4.9.4。

我做这一切都错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T21:59:31.383

I can't test on a Mac, but I'll try to make a few suggestions which could help solve your issues.

Firstly, if you use a *modal* progress dialog, there's no need to call `processEvents()`, as the dialog will handle this itself.

Secondly, this line in your code:

```
 progress.setValue(lineNumber + 1) 
```

is problematic, because to quote the [Qt docs](http://qt-project.org/doc/qt-4.8/qprogressdialog.html#value-prop):

> For the progress dialog to work as expected, you should **initially set this property to 0** and **finally set it to QProgressDialog::maximum()**; you can call setValue() any number of times in-between.

so you should either call `progress.setValue(0)` before the loop, or just avoid adding the offset altogether. Also, on the final iteration, `lineNumber + 1` will equal the maximum, which will [reset](http://qt-project.org/doc/qt-4.8/qprogressdialog.html#reset) the dialog at that point (unless [autoReset](http://qt-project.org/doc/qt-4.8/qprogressdialog.html#autoReset-prop) has been set to False). It is for this reason that the Qt example calls `setValue(maximum)` *after* the loop has completed.

Finally, there is no problem with calling `destroy()` or `deleteLater()` after you've finished with the progress dialog - in fact, it's a good idea. When you pass `self` to the QProgressDialog constructor, it will become the parent of the dialog and *keep a reference to it*. So, unless you explicitly delete it, a new child dialog (plus all it's child objects) will be added every time you call the function that uses it (which could potentially waste a lot of memory).

Here's a demo script that may be improvement:

```
import sys, time
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.button = QtGui.QPushButton('Test', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.button)

    def handleButton(self):
        file = range(30)
        numberOfLinesInFile = len(file)
        progressWasCancelled = False
        progress = QtGui.QProgressDialog(
            "Parsing Log", "Stop", 0, numberOfLinesInFile, self)
        progress.setWindowModality(QtCore.Qt.WindowModal)
        progress.setMinimumDuration(0)
        for lineNumber, line in enumerate(file):
            progress.setValue(lineNumber)
            if progress.wasCanceled():
                progressWasCancelled = True
                break
            time.sleep(0.05)
        progress.setValue(numberOfLinesInFile)
        print 'cancelled', progress.wasCanceled(), progressWasCancelled
        progress.deleteLater()

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# html - 按钮上的 Twitter 引导跨度类

> ID：13583278
> 
> 赞同：0
> 
> 时间：2012-11-27T11:31:04.830
> 
> 标签：html, css, twitter-bootstrap

我非常喜欢 twitter bootstrap css/less 框架，但最近发现了一个小问题。

当我戴上`.spanX`按钮时，它们的宽度不会与 div 相同。

请参阅此[Jsfiddle](http://jsfiddle.net/S8zu9/1/)以查看我的意思的示例。在下图中，两者都是`.span4`。

![它们都是 .span4 但宽度不同](../Images/8911e504a1609607b5cd2f4059af505b.png)

我是否使用了 span 类错误，或者这可能是一个错误？

* * *

编辑：

我在 mac osx the-new-cat 上使用 chrome 23.0.1271.64。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:33:43.363

Twitter Bootstrap 为此提供了 BLOCK-LEVEL 按钮类。

查看[http://twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons) - 将找到一个将 .btn-block 类与 .btn-block 类结合使用的示例`<button>`。

基本上，您可能必须将您的包装`<button>`在 a 中`<div>`，如下所示：

```
<div class="span12">
    <button class="btn btn-block">my wide button</button>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:34:52.170

`.alert`添加`padding: 8px 35px 8px 14px;`负责大小差异的内容要么覆盖它，要么删除 .alert 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:38:54.470

即使在调整浏览器窗口大小后，它们的宽度也一样。

您可以清除浏览器缓存以检查它是如何工作的，也可以尝试使用与您当前使用的浏览器不同的浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:41:52.907

我找到了这个解决方案，你可以看到这篇文章：

[https://github.com/twitter/bootstrap/issues/3824](https://github.com/twitter/bootstrap/issues/3824)

[https://github.com/twitter/bootstrap/pull/5198](https://github.com/twitter/bootstrap/pull/5198)

# javascript - JavaScript：一一执行异步函数

> ID：13583280
> 
> 赞同：5
> 
> 时间：2012-11-27T11:31:15.527
> 
> 标签：javascript, asynchronous

我有一个简单的“异步”JS 函数：

```
function asyncFunc(i) {
    setTimeout(function () {
        console.log(i);
    }, 1000);
} 
```

如果我想在 for 循环中执行此 asyncFunc 5 次，即每秒记录 1 - 5 次，总共花费 5 秒。

1

2

3

4

5

我知道 jQuery 的 when().done() 可以做到这一点，但是如果我在没有 3rd 方 JS 库的环境中， **那么实现这一点的最简单和优雅的方法是**什么？

实际上例如我想写一个 util 函数，它接受一个异步函数数组，并且这个 util 函数可以一个一个地执行传入的函数：

```
function execAsyncTasks([asyncTask1, asyncTask2, asyncTask3]) {
    asyncTask1();
    // Wait until asyncTask1 finished
    asyncTask2();
    // Wait until asyncTask2 finished
    asyncTask3();
    // Wait until asyncTask3 finished
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T11:47:42.367

您的所有任务都必须实现某种回调机制，因为这是您知道异步任务已完成的唯一方法。有了它，您可以执行以下操作：

```
function executeTasks() {
    var tasks = Array.prototype.concat.apply([], arguments);
    var task = tasks.shift();
    task(function() {
        if(tasks.length > 0)
            executeTasks.apply(this, tasks);
    });
}

executeTasks(t1, t2, t3, t4); 
```

[演示](http://jsfiddle.net/5X7hH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:35:13.653

您可以使用异步模块：

[https://github.com/caolan/async](https://github.com/caolan/async)

```
async.parallel([
    function(){ ... },
    function(){ ... }
], callback);

async.series([
    function(){ ... },
    function(){ ... }
]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:38:01.287

这是许多方法中的一种

```
function execAsyncTasks(asyncTask1, asyncTask2, asyncTask3) {
  var count = 0;

  function nextCommand() {
    switch (count) {
      case 0:
        asyncTask1();
        break;
      case 1:
        asyncTask2();        
        break;
      case 2:
        asyncTask3();
      default:
        return;
    }
    count++;
    setTimeout(nextCommand, 1000);
  }
  nextCommand();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:52:25.913

你可以有一个使用回调和递归函数调用的同步机制：[见 http://jsfiddle.net](http://jsfiddle.net/dVdks/3/)

```
function asyncFunc(i, callback) {
  setTimeout(function() {
    document.body.innerHTML += '<p>' + i + '</p>';
    callback();
  }, 1000);
}

var args = [0, 1, 2, 3, 4];

function loopThroughArgs(callback) {
  if (args.length == 0) {
    callback();
  } else {
    asyncFunc(args[0], function() {
      args.splice(0, 1); //remove the first item from args array
      loopThroughArgs(callback);
    });
  }
}

loopThroughArgs(function() {
  document.body.innerHTML += '<p>done !</p>';
});
```

# mysql - Mysql Join 表 - 最佳实践？

> ID：13583286
> 
> 赞同：2
> 
> 时间：2012-11-27T11:31:54.073
> 
> 标签：mysql, sql

有5张桌子

1.  用户个人数据（用户_记录=120000）。
2.  工作的用户（users_positions_record=150000）。
3.  组织（组织_记录=2500）。
4.  分区（分区_记录=3500）。
5.  职位（职位_记录=4500）。

我想加入这些表，但最好的查询是什么？

我写了这个查询，但它很慢：

```
SELECT 
  * 
FROM
  (SELECT 
    p.* 
  FROM
    `user_positions` p 
    LEFT JOIN `organizations` u_o 
      ON u_o.`id` = p.`org_title` 
    LEFT JOIN `divisions` u_d 
      ON u_d.`id` = p.`division` 
    LEFT JOIN `positions` u_p 
      ON u_p.`id` = p.`position` 
      WHERE u_o.`status` = 1 
  GROUP BY p.`PRN`) u_a 
  LEFT JOIN `users` u 
    ON u.`PRN` = u_a.`PRN` 
```

示例 - 简单结构

```
table users
-- PRN --- FirstName --- Age....
-- 001 --- david --- 24 ....
-- 052 --- george --- 27 ....

table users_positions
-- PRN --- Organization_ID --- Division_ID --- Positionn_ID....
-- 001 --- 1 --- 5 --- 1....
-- 001 --- 2 --- 10 --- 5....
-- 052 --- 1 --- 1 --- 1....

table organizations
-- ID --- Name ....
-- 1 --- test 1 ....
-- 2 --- test 2 ....

table divisions
-- ID --- Name --- Age....
-- 1 --- IT Department ....
-- 5 --- Sale Department ....
-- 10 --- Administration Department ....

table positions
-- ID --- Name --- Age....
-- 1 --- Programmer ....
-- 5 --- Manager .... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:45:23.303

我不确定您为什么`GROUP BY`在查询中使用 a 。A`GROUP BY`通常在查询中有聚合函数时使用。但我想说你也许可以使用以下内容：

```
select *
from users u
left join users_positions up
  on u.PRN = up.PRN
left join positions p
  on up.id = p.position
left join organizations o
  on p.org_title = o.id
left join divisions d
  on p.division = d.id 
```

使用您提供的示例数据进行编辑，这是您可以使用的查询示例：

```
select u.prn,
  u.firstname,
  u.age,
  o.name orgName,
  p.name positionName,
  d.name divisionName
from users u
left join users_positions up
  on u.PRN = up.PRN
left join organizations o
  on up.Organization_ID = o.id
left join positions p
  on up.Positionn_ID = p.id
left join divisions d
  on up.Division_ID = d.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7434b/9)

这个查询的结果是：

```
| PRN | FIRSTNAME | AGE | ORGNAME | POSITIONNAME |              DIVISIONNAME |
------------------------------------------------------------------------------
| 001 |     david |  24 |  test 1 |   Programmer |           Sale Department |
| 001 |     david |  24 |  test 2 |      Manager | Administration Department |
| 052 |    george |  27 |  test 1 |   Programmer |             IT Department | 
```

如果您只想为每个用户返回一个组织等，那么您需要决定如何确定要返回的正确结果。例如，如果您只想返回`max(Organization_ID)`每个用户，那么您可以使用类似于以下内容的内容：

```
select u.prn,
  u.firstname,
  u.age,
  o.name orgName,
  p.name positionName,
  d.name divisionName
from users u
left join
(
  select max(Organization_ID) Organization_ID, PRN
  from users_positions
  group by PRN
) up1
  on u.PRN = up1.PRN
left join users_positions up2
  on up1.PRN = up2.prn
  and up1.Organization_ID = up2.Organization_ID
left join organizations o
  on up2.Organization_ID = o.id
left join positions p
  on up2.Positionn_ID = p.id
left join divisions d
  on up2.Division_ID = d.id 
```

看[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7434b/8)

结果：

```
| PRN | FIRSTNAME | AGE | ORGNAME | POSITIONNAME |              DIVISIONNAME |
------------------------------------------------------------------------------
| 001 |     david |  24 |  test 2 |      Manager | Administration Department |
| 052 |    george |  27 |  test 1 |   Programmer |             IT Department | 
```

# textmate - Sublime2 Plugin：如何在编辑器中打开多个文件？

> ID：13583288
> 
> 赞同：2
> 
> 时间：2012-11-27T11:32:09.707
> 
> 标签：textmate, sublimetext2, sublimetext

我正在编写一个插件，它有一个创建 3 个文件的命令。

我希望在 Sublime 中打开和标记这 3 个文件。

我认为这可以解决问题，但只打开一个文件。

```
self.view.window().open_file(view_path, 1)
self.view.window().open_file(controller_path, 1)
self.view.window().open_file(base_coffee, 1) 
```

请问有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:46:13.660

最后我找到了它：

```
initial_window = self.view.window()
initial_window.open_file(view_path,       1)
initial_window.open_file(controller_path, 1)
initial_window.open_file(base_coffee,     1) 
```

# c - 为变量分配了多少内存？

> ID：13583296
> 
> 赞同：2
> 
> 时间：2012-11-27T11:32:39.380
> 
> 标签：c, variables, variable-names

> **可能重复：**
> [任何编程语言中的变量名是否占用内存空间](https://stackoverflow.com/questions/3777857/whether-variable-name-in-any-programming-language-takes-memory-space)

我只是在阅读有关内存分配的内容，不禁想知道这个问题：

两者都做

```
int x = 4; 
```

和

```
int this_is_really_really_long_name_for_an_integer_variable = 4; 
```

占用相同数量的**内存**（*变量占用的***总**内存。不只是）*`sizeof(int)`*

 *我知道这个问题与“编程语言和编译器构造”有关。但是，我不必研究它:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T11:34:41.843

在 C? 是的，这些变量将占用相同数量的空间。变量名仅由编译器在编译时使用。

但是有些语言在运行时存储变量名。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T11:37:23.307

一般来说，它们占据相同数量的空间，即`sizeof(int)`. 但是，有人可能会争辩说，在构建带有用于调试的附加符号的目标文件时，比率是不同的。变量存储的数据量不变，但调试符号在变量名较长的情况下占用更多空间。考虑以下示例。

```
$ cat short.c && gcc -c short.c && wc -c short.o
int x = 0;
927 short.o
$ cat long.c && gcc -c long.c && wc -c long.o
int this_is_really_really_long_name_for_an_integer_variable = 0;
981 long.o 
```

大小的差异正是变量名称长度的差异。

不过，从运行时效率和内存使用的角度来看，这并不重要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T11:37:03.953

变量名的长度与为其保留的存储量无关；在大多数情况下，变量名不会保留在生成的机器代码中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T11:36:11.880

32 位，因为编译器不会存储你的名字。它将仅将其作为地址处理。int 容器仅占用 32 位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T11:37:21.250

变量名仅用于编译时的地址绑定。
变量名称在词法处理中存储在符号表中，这是编译器过程的一个阶段，一旦完成地址绑定，就不会使用变量名称，并且变量名称的长度无关紧要。它只需要 32 位*

# php - 如何为已选择的单选按钮编写事件？

> ID：13583300
> 
> 赞同：0
> 
> 时间：2012-11-27T11:32:47.600
> 
> 标签：php, javascript, radio-button

我的单选按钮代码片段是 -

```
<input type="radio" name="isPush" id="isPushYes" <? if($isPush) {?>checked="checked"<?}?> value="<?= $isPush;?>" > <? echo "Yes"?></input>
<input type="radio" name="isPush" id="isPushNo" <? if(!$isPush) {?>checked="checked"<?}?> value="<?= $isPush;?>" > <? echo "No"?></input>
<table id="emailTable"><tr><td>...</td></tr></table> 
```

**isPush**的值将是 0 或 1。所以我的单选按钮之一将始终被选中。最初选择任何一个单选按钮都不在我手中。

现在，对于表格，我想设置`display: none`何时选择第二个单选按钮并设置`display: visible`何时选择第一个单选按钮。

那么我应该放置哪个**事件**？我当然不能放*onclick*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:38:44.340

我认为这就是你想要的：

```
<label><input type="radio" name="myradio" value="1" checked="true" onchange="hideActive(this.name);" /> radio 1</label>
<label><input type="radio" name="myradio" value="2" onchange="hideActive(this.name);" /> radio 2</label>
<label><input type="radio" name="myradio" value="3" onchange="hideActive(this.name);" /> radio 3</label>
<script type="text/javascript">
    function hideActive(radioGroupName) {
        var all = document.getElementsByName(radioGroupName);
        for(var n = 0; n < all.length; n++) {
            if(true === all[n].checked) {
                all[n].setAttribute('style', 'display: none;');
            }
            else {
                all[n].removeAttribute('style');
            }

        }
    }

    hideActive('myradio');
</script> 
```

如果你支持 jquery 试试这个

```
<label><input type="radio" name="myradio" value="1" checked="true" /> radio 1</label>
<label><input type="radio" name="myradio" value="2" /> radio 2</label>
<label><input type="radio" name="myradio" value="3" /> radio 3</label>
<script type="text/javascript">
    jQuery(function() {
        var all = jQuery('input[name=myradio]');
        var change = function() {
            all
                .show()
                .filter(':checked').hide();
        };
        all.change(function(){
            change();
        });

        //call init
        change();

    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:49:54.283

您需要检查所选电台的 onload 以及 onchange。`No`这意味着如果默认选中，表格将被隐藏。

**[jsFiddle 演示](http://jsfiddle.net/SKb3r/2/)**

```
function checkRadio()
{
        var tbl = document.getElementById("emailTable");

        if(document.getElementById("isPushYes").checked)
        {
           tbl.style.display = "";
        }
        else
        {
            tbl.style.display = "none";
        }   
}

window.onload = function()
{
    document.getElementById("isPushYes").onchange = checkRadio;
    document.getElementById("isPushNo").onchange = checkRadio;

    checkRadio();
}​ 
```

另一个选项是没有 onload 事件，你用 PHP 设置显示：

```
<table id="emailTable" <?php if(!$isPush) echo 'style="display:none"'; ?>><tr><td>...</td></tr></table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:34:56.430

您希望在用户选中单选按钮时执行一些操作，因此您需要为该`onchange`事件绑定一个处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:38:59.827

这是小提琴.. [http://jsfiddle.net/vfuV5/2/](http://jsfiddle.net/vfuV5/2/)

例如：

```
if($('input:radio[name="isPush"]:checked').val() == 'Yes')  // used yes u can use 1 here
{
        $('#emailTable').show();                            
}else{
    $('#emailTable').hide();
}

$("input[name='isPush']").change(function() {
  if($('input:radio[name="isPush"]:checked').val() == 'Yes')  // used yes u can use 1 here
  {
        $('#emailTable').show();                            
  }else{
    $('#emailTable').hide();
  }
}); 
```

**或者**

做一个函数

```
function checkRadioValue()
{
    if($('input:radio[name="isPush"]:checked').val() == 'Yes')  // used yes u can use 1 here
    {
        $('#emailTable').show();                            
    }else{
       $('#emailTable').hide();
    }
} 
```

在 document.ready 和 onchange 函数上调用此函数

```
$(document).ready(function(){
    checkRadioValue();
    $("input[name='isPush']").change(function() {
          checkRadioValue();
    });

}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:39:55.723

我个人会查看 onChange，这将捕获所选值更改的情况。如果在 jquery 中执行此操作，我会执行以下操作：

```
$('input[type=radio][name=isPush]').bind('change', function(e){
 console.log('We had a change');
}); 
```

请注意，如果该项目是动态添加的，您应该将绑定更改为实时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T11:40:01.797

您应该编写一个更改显示属性的 javascript 函数，然后在 2 个地方调用它。

1- 文件加载时。

> window.onload = function () { javascript_function(); }

如果你有 JQuery，你可以这样做：

```
$(document).ready(function(){
    javascript_function();
)}; 
```

2-当单选按钮发生变化时。

设置一个`onchange="javascript_function"`或使用 JQuery。

```
$(document).ready(function(){
    javascript_function();
    $("#radio_id").change(javascript_function());
)}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T11:40:03.547

它是一个测试。随心所欲地改变它

```
 <script type="text/javascript">
function fnc(myid,otherid)
{
if(document.getElementById(myid).checked)
{document.getElementById(otherid).disabled='disabled';}
}
</script>

<input type="radio" name="isPush" id="isPushYes" onchange="fnc(this.id,'isPushNo')">
<input type="radio" name="isPush" id="isPushNo" onchange="fnc(this.id,'isPushYes')"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-27T11:40:26.980

Onchange，例如（在 JQuery 中）：

```
$('input[name="isPush"]').change(function() {
// your code
}); 
```

或者：

```
<input onchange="myFunction();" type="radio" name="isPush" id="isPushYes" <? if($isPush) {?>checked="checked"<?}?> value="<?= $isPush;?>" > <? echo "Yes"?></input>
<input onchange="myFunction();" type="radio" name="isPush" id="isPushNo" <? if(!$isPush) {?>checked="checked"<?}?> value="<?= $isPush;?>" > <? echo "No"?></input> 
```

# python - python：迭代非序列错误

> ID：13583314
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:33:36.347
> 
> 标签：python, iteration

刚刚开始项目 euler 的问题 164，我想要一个函数来输出 20 位数字中每组 3 个连续数字的总和的列表。这是我的功能。

```
 def func(n):
    sumlist = []
    m = str(n)
    for i in range(0,18):
         sumlist.append(sum(int(m[i])+int(m[i+1])+int(m[i+2])))
    return sumlist 
```

我不断在非序列错误上进行迭代，我不知道为什么我应该这样做。任何帮助将不胜感激，谢谢。

**编辑**

完整的追溯是：

```
Traceback (most recent call last): 
  File "peproblem164.py", line 8, in ? print func(11201201201201201201) 
  File "peproblem164.py", line 5, in func    
    sumlist.append(sum(int(m[i])+int(m[i+1])+int(m[i+2]))) 
TypeError: iteration over non-sequence' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:36:47.927

那是因为

```
int(m[i]) + int(m[i+1]) + int(m[i+2]) 
```

不是一个序列。这是一个`int`. 我相信你的意思是：

```
sumlist.append(sum((int(m[i]), int(m[i+1]), int(m[i+2])) 
```

这会起作用，因为

```
(int(m[i]), int(m[i+1]), int(m[i+2])) 
```

*是*一个序列。

总而言之，使用整数列表而不是字符串会更容易，因此首先转换`m`为`int`s 是有意义的：

```
m = map(int, str(n)) 
```

然后使用 Python 的切片语法来获取子序列和：

```
for i in range(18): #Leaving out the start argument is equivalent to range(0, 18)
    sumlist.append(sum(m[i:i+3])) 
```

*并且使用列表理解*会更加pythonic （更不用说*更快*了）：

```
sumlist = [m[i:i+3] for i in range(18)] #same thing as the for loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:39:26.620

你真的不需要 sum 调用。代替

```
sumlist.append(sum(int(m[i])+int(m[i+1])+int(m[i+2]))) 
```

和

```
sumlist.append(int(m[i])+int(m[i+1])+int(m[i+2])) 
```

# ios - 如何将数据传递给其他 iOS 应用程序？

> ID：13583321
> 
> 赞同：0
> 
> 时间：2012-11-27T11:33:59.647
> 
> 标签：ios, share

如何将一些数据（例如 PDF 或图像）从我的 iOS 应用程序共享到其他应用程序。我的意思是当用户可以选择合适的应用程序来共享我的数据时如何调用模式屏幕？我找不到任何 API，但我很确定它存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:37:29.210

使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)：

```
UIDocumentInteractionController* docController = [[UIDocumentInteractionController alloc] init];
docController.URL = urlToFile; 
```

然后呈现

```
[docController presentOptionsMenuFromBarButtonItem:barBtnItem animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:49:30.030

应用程序之间的通信使您的应用程序有机会利用其他应用程序的功能，在应用程序之间发送和接收数据，并提供“正常工作”的丰富用户体验。

查看本教程[iOS SDK：使用 URL 方案](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)可能对您有所帮助。

# mysql - Group BY 和 ORDER BY 优化

> ID：13583322
> 
> 赞同：0
> 
> 时间：2012-11-27T11:34:02.620
> 
> 标签：mysql, optimization, query-optimization

我正在尝试优化对 180 000 行表的查询。

```
 SELECT
            qid

            FROM feed_pool
            WHERE (
                (feed_pool.uid IN
                    (SELECT uid_followed
                        FROM followers
                        WHERE uid_follower = 123 AND unfollowed = 0) AND feed_pool.uid != 123)
                    OR feed_pool.tid IN (SELECT tid FROM follow_tags WHERE follow_tags.uid = 123)
                )
                GROUP BY feed_pool.qid ORDER BY feed_pool.id DESC LIMIT 20 
```

这个查询最糟糕的部分不是 WHERE 子句，而是 GROUP BY 和 ORDER BY 部分。

实际上，如果我只做 GROUP BY，就可以了。只是 ORDER BY 也很好。问题是当我同时使用两者时。

我尝试了不同的索引，现在我在 feedpool.qid 和 feedpool.uid 上使用了一个索引。

一个好的技巧是首先选择最后 20 行（ORDER BY），然后执行 GROUP BY。但显然这不是我想要做的，在某些情况下我最终没有 20 行。

我真的不知道该怎么办。如果它优化了我的请求（20 秒......），我可以改变我的结构。真的，每一个小费都将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:48:29.900

你听说过`JOIN`吗？子查询总是不利于性能。尝试这样的事情：

```
SELECT feed_pool.qid, followers.uid as fuid, follow_tags as ftuid
FROM feed_pool
    LEFT JOIN followers
        ON feed_pool.uid = followers.uid_followed 
            AND followers.uid_follower = 123 
            AND followers.unfollowed = 0 
            AND feed_pool.uid != 123
    LEFT JOIN follow_tags
        ON feed_pool.tid = follow_tags.tid 
        AND follow_tags.uid = 123
WHERE
    fuid IS NOT NULL
    OR ftuid IS NOT NULL
ORDER BY feed_pool.id DESC 
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:09:22.137

试试这个

```
 GROUP BY feed_pool.qid ORDER BY 1 DESC LIMIT 20 
```

# javascript - 入门

> ID：13583324
> 
> 赞同：0
> 
> 时间：2012-11-27T11:34:04.590
> 
> 标签：javascript, google-app-engine, channel-api, webrtc, videochat

我想创建一个像[https://apprtc.appspot.com/?r=04188292](https://apprtc.appspot.com/?r=04188292)这样的应用程序。我对 webrtc 有点了解，但无法掌握 google app-engine。如何为 javascript 设置它并开始编码？我试过这个，但没有用

```
<script src="https://talkgadget.google.com/talkgadget/channel.js"></script>
//for inclusion of channel api
...
console.log(create_channel(1));
//gave an error "Uncaught ReferenceError: create_channel is not defined 
```

任何教程/帮助将不胜感激 有没有其他使用通道 api 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:59:43.110

你为什么不使用[PUBNUB](http://www.pubnub.com/)？

我在[这个 JavaScript ONLY WebRTC Experiment中使用](https://webrtc-experiment.appspot.com/javascript/)[了 PUBNUB](http://www.pubnub.com/)。见[源代码](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/JavaScript-Only)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T00:37:50.370

那里有很多教程。如果您正在研究 .NET 堆栈，您可能会查看 XSockets 人员放在一起的示例：

[http://xsocketswebrtc.codeplex.com/](http://xsocketswebrtc.codeplex.com/)

现在有点过时了，因为它还没有更新为使用最新版本的 XSockets 或 WebRTC 规范。我分叉了它来解决这些问题，并在我使用它时将 JS 部分移植到 TypeScript：

[https://bitbucket.org/smithkl42/xsockets.webrtc/overview](https://bitbucket.org/smithkl42/xsockets.webrtc/overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:58:18.300

[https://developers.google.com/appengine/docs/java/channel/](https://developers.google.com/appengine/docs/java/channel/)

Channel API 仅适用于 Google App Engine 应用程序。由于最大消息大小为 32k，因此您不太可能将其用于媒体传输。

正确配置后，应用程序会提供所需的 Javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T11:25:41.010

Ken 在移动“旧”webRTC 实验方面做得很好！我们 XSockets.NET 团队即将发布一个新版本，我们在其中嵌入了一组不错的 WebRTC 东西，一个易于使用的用于 WebRTC 目的的 JsApi，

我们最近刚刚发布了一个演示，基于那个片段，

[http://browsermeeting.com](http://browsermeeting.com)

在[http://xsockets.net](http://xsockets.net)，您很快就会找到更多信息！

# python - 如何在 ipython 并行处理中获得中间结果？

> ID：13583326
> 
> 赞同：2
> 
> 时间：2012-11-27T11:34:12.353
> 
> 标签：python, parallel-processing, ipython

我的工作是处理大量的 xml；为了获得更快的结果，我想使用 ipython 的并行处理；下面是我的示例代码。因为我只是在使用`celementTree`模块查找 xml/xsd 的元素数量。

```
>>> from IPython.parallel import Client
>>> import os
>>> c = Client()
>>> c.ids
>>> lview = c.load_balanced_view()
>>> lview.block =True
>>> def return_len(xml_filepath):
        import xml.etree.cElementTree as cElementTree
        tree = cElementTree.parse(xml_filepath)
        my_count=0
        file_result=[]
        cdict={}
        for elem in tree.getiterator():
            cdict[my_count]={}
            if elem.tag:
                cdict[my_count]['tag']=elem.tag
            if elem.text:
                cdict[my_count]['text']=(elem.text).strip()
            if elem.attrib.items():
                cdict[my_count]['xmlattb']={}
                for key, value in elem.attrib.items():
                    cdict[my_count]['xmlattb'][key]=value
            if list(elem):
                cdict[my_count]['xmlinfo']=len(list(elem))
            if elem.tail:
                cdict[my_count]['tail']=elem.tail.strip()
            my_count+=1
        output=xml_filepath.split('\\')[-1],len(cdict)
        return output
        ## return cdict
>>> def get_dir_list(target_dir, *extensions):
        """
        This function will filter out the files from given dir based on their extensions
        """
        my_paths=[]
        for top, dirs, files in os.walk(target_dir):
            for nm in files:
                fileStats = os.stat(os.path.join(top, nm))
                if nm.split('.')[-1] in extensions:
                    my_paths.append(top+'\\'+nm)
        return my_paths
>>> r=lview.map_async(return_len,get_dir_list('C:\\test_folder','xsd','xml')) 
```

为了获得最终结果，我必须这样做 `>>> r.get()`，当过程完成时我会得到结果

我的问题是我是否能够在它们完成时获得中间结果；
例如，如果我将我的工作应用到包含 1000 个 xmls/xsds 文件的文件夹，那么在处理完特定文件后，我可以立即获得结果。不喜欢`1st file is done--> show its result... 2nd file is done---> show its result........ 1000th file is done--> show its result`上面的当前工作；`wait till final file get finished`然后它将显示所有这 1000 个文件的完整结果。
还要处理我在函数`import`内部定义的导入/命名空间错误`return_len`；有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:52:52.937

当然。AsyncMapResult（map_async 返回的类型）是立即可迭代的，迭代产生的项目与最终产生的列表相同`r.get()`。所以在你这样做之后：

```
amr = lview.map_async(return_len, get_dir_list('C:\\test_folder','xsd','xml')) 
```

你可以做：

```
for r in amr:
    print r 
```

或使用 enumerate 保留索引

```
for i,r in enumerate(amr):
    print i, r 
```

`reduce`或使用内置执行缩减：

```
summary_result = reduce(myfunc, amr) 
```

*所有这些都将在您到达*时遍历您的结果。如果您不关心顺序并且每个任务的时间差异很大，您可以通过`map_async(...,ordered=False)`. 如果您这样做，当您遍历 AMR 时，您将在先到先得的基础上获得单独的结果，而不是保留提交顺序。

[ipython 文档中](http://ipython.org/ipython-doc/rel-0.13.1/parallel/asyncresult.html#map-results-are-iterable)有更多信息。

> 为了处理导入/命名空间错误，我在 return_len 函数中定义了导入；有没有更好的方法来解决这个问题？

是和不是。有几种方法可以设置引擎命名空间，例如使用模块、`@parallel.require("module")`装饰器或简单地使用 显式执行导入`%px import xml.etree.cElementTree as cElementTree`，每种方法在某些情况下都有好处。但我经常发现将导入放在函数中是最简单的方法，而且意外最少。

# ruby-on-rails - 使用延迟作业发送时事通讯

> ID：13583329
> 
> 赞同：1
> 
> 时间：2012-11-27T11:34:28.397
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, delayed-job

我有并且`admin_mailer`：

```
class AdminMailer < ActionMailer::Base
 def send_message_to_all_users(user, subject, body, locale)
    @user = user
    @body = body
    @locale = locale
    mail(:to => user.email, :subject => subject)
  end
end 
```

在我对控制器用户的操作中：

```
def send_email_to_all_users

   users = User.all
   subject = params[:subject]
   body = params[:body]
   locale = params[:locale]
   for user in users
    User.delay(queue: "Email", priority: 20).send_message_to_all_users(user, subject, body, locale)
   end

   respond_to do |format|
    .........
   end
end 
```

在我的模型中`User`

```
class User
 include Mongoid::Document
 include Mongoid::Timestamps::Created
.
.
.

#delayed jobs methods
  def self.send_message_to_all_users(user, subject, body, locale)
     AdminMailer.send_message_to_all_users(user, subject, body, locale).deliver
  end

 def deliver
  sleep 15
 end

end 
```

邮件列表`users`非常长，超过 20.000 个电子邮件帐户。

**我的问题是，以这种方式发送带有大邮件列表的时事通讯是否正确，或者我可以以更好的方式完成这项任务。**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:04:34.003

看看[resque_mailer](https://github.com/zapnap/resque_mailer)和这个[问题](https://stackoverflow.com/questions/10125663/how-de-we-send-out-5000-emails-per-hour-using-actionmailer-in-ruby-on-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:30:30.087

如果您被锁定使用delayed_job，请查看此[railscast](http://railscasts.com/episodes/171-delayed-job)。演员表专门解决了延迟邮寄问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:27:18.530

我认为您应该在这里查看 find_in_batches 方法：http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

在您的情况下，您可以首先批量查找所有用户，然后从那里将每个批次分配给您的 send_email_to_all_users 方法调用（将 User.all 替换为每个批次。

或者，更好的是，您可以将整个时事通讯流程移动到它自己的类中并稍微封装一下（因此，仍然从控制器调用方法，但运行类中的所有逻辑。）

无论如何，我认为 find_in_batches 是你需要的。

# database - PL/SQL : UTL_FILE.FOPEN 这个文件会在客户端还是服务器端打开

> ID：13583330
> 
> 赞同：1
> 
> 时间：2012-11-27T11:34:32.407
> 
> 标签：database, oracle, file, stored-procedures, plsql

这个问题是`UTL_FILE.FOPEN`在PL/SQL中执行命令。

将`UTL_FILE.FOPEN`在客户端或服务器端打开文件？

假设我在 MACHINE A 中运行 Oracle 客户端 10，并且正在连接 MACHINE B（即服务器）。

当我通过Java应用程序在机器A中执行以下存储过程时，

```
DECLARE
  fileHandler UTL_FILE.FILE_TYPE;
BEGIN
  fileHandler := UTL_FILE.FOPEN('/app/dir', 'test.txt', 'W');
  UTL_FILE.PUTF(fileHandler, 'Writing TO a file\n');
  UTL_FILE.FCLOSE(fileHandler);
END;    
/ 
```

**问题是目录`/app/dir`应该在 MACHINE A(client) 或 MACHINE B(Server)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:44:34.240

```
utl_file.fopen 
```

只会打开由 DBA 设置的目录中的文件，并且这些目录位于数据库所在的同一台服务器上。MachineB 在您的问题中。和。你不能访问任何你想要的旧目录。

DBA 可以通过两种方式来控制它——一个 init.ora 参数`utl_file_dir` 或通过创建目录对象。

要查看`utl_file_dir` 是否可以从 V$PARAMETERS 中选择，请尝试

```
select value 
 from v$parameters
where name='utl_file_dir'; 
```

要查看可以在 pl/sql 中访问的目录对象：

```
SELECT owner, directory_name, directory_path
  FROM all_directories; 
```

这是两个截然不同的东西。utl_file_dir 是一项旧功能，目录对象较新。

# ruby-on-rails - Ruby on rails 错误

> ID：13583332
> 
> 赞同：-2
> 
> 时间：2012-11-27T11:34:36.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

有人可以看看这个吗？

安装 nokogiri (1.5.2) 时出错，Bundler 无法继续。`gem install nokogiri -v '1.5.2'`在捆绑之前确保成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:42:46.093

你可以试试这个教程：----- [http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)

# java - 如何使用 Twilio TwiML 从应答端收集密钥？

> ID：13583338
> 
> 赞同：1
> 
> 时间：2012-11-27T11:34:44.333
> 
> 标签：java, xml, twilio, twilio-twiml

我认为问题的标题毫无意义。让我在这里解释一下你的情况：

1）我打电话`Twilio Broker bumber`。

2）`Twilio`使用以下代码将呼叫转移到给定号码。

```
#callToRN.XML
<?xml version="1.0" encoding="UTF-8" ?>
     <Response>     
       <Play>https://kaar-ma.com/1.wav</Play>
       <Dial action = "_actionURL">442-333-xxxx</Dial> 
     </Response>
</xml> 
```

这连接给定的数字，即`442-333-xxxx`。现在我想在我的应用程序中添加一个新功能，即：

```
a) Someone picked the call.
b) He started to talk the caller.
c) Now he/she can transferred the call to  another four-five person simultaneously after pressing "#" key.
d) Or he/she can satisfy the caller and end the call. 
```

为了捕捉这种情况，我`TwiML`在以下代码中调用了另一个`Java`：

```
TwilioEnum reqst= TwilioEnum.valueOf(reqst);
    try {
        switch (reqst) {
        case hunting:
            output = CallHunting(request);
            break; 
```

我将`_actionURL`in `<Dial action = "_actionURL">442-333-xxxx</Dial>`替换为`baseURL + TwilioEnum.hunting`where`baseURL`是`Twilio`响应 in的 URL `#callToRN.XML`。

方法定义`hunting`如下：

```
hunting(){
  FileBase = "/twilio.CallToAll.xml";
  output = readFile(FileBase );
  return output
} 
```

现在请告诉我我应该在`CallToAll.xml`TwiML 文件中进行哪些更改以便它允许我做`a,b and c`点？

```
#CallToAll.xml:
<?xml version="1.0" encoding="UTF-8" ?> 
<Response>     
  <Play>https://kaar-ma.com/1.wav</Play>
<Dial>4x2-xxx-7271</Dial>
<Dial>4x2-xxx-7271</Dial>
.....
</Response> 
```

请建议我一个解决方案。

PS：一切`Twilio Configuration`都是正确的，因为调用/结束过程在应用程序中运行良好。

# django - Django - 在表单中获取参数时出现类型错误

> ID：13583344
> 
> 赞同：0
> 
> 时间：2012-11-27T11:35:06.083
> 
> 标签：django, django-forms, django-views, django-class-based-views

**注：已解决，最后解决。**

我正在尝试将请求值传递给表单我必须过滤表单中的字段，但它一直返回 TypeError，我认为代码没问题。

视图.py：

```
class AddProposalSet(FormView):

    """
    Create a new prpoposal set, it can be related to a debate or be in free mode,
    which is not linked to anything. If it's linked to a debate, people can
    make their proposals related to the debate notes.

    .. versionadded: 0.1.5

    :rtype: Form object
    :context: form, get_place
    """
    #form_class = ProposalSetForm
    template_name = 'proposals/proposalset_form.html'

    def get_success_url(self):
        space = self.kwargs['space_url']
        return reverse(urln_space.SPACE_INDEX, kwargs={'space_url':space})

    def get_form_class(self):
        """
        The reason for overriding "form_class" is that we pass here the
        request to the form, that way we can filter the debates based on the
        current space.
        """
        return ProposalSetForm(self.kwargs['space_url'])

    def form_valid(self, form):
        self.space = get_object_or_404(Space, url=self.kwargs['space_url'])
        form_uncommited = form.save(commit=False)
        form_uncommited.space = self.space
        form_uncommited.author = self.request.user
        form_uncommited.save()
        return super(AddProposalSet, self).form_valid(form)

    def get_context_data(self, **kwargs):
        context = super(AddProposalSet, self).get_context_data(**kwargs)
        self.space = get_object_or_404(Space, url=self.kwargs['space_url'])
        context['get_place'] = self.space
        return context

    @method_decorator(permission_required('proposals.add_proposalset'))
    def dispatch(self, *args, **kwargs):
        return super(AddProposalSet, self).dispatch(*args, **kwargs) 
```

表格.py

```
class ProposalSetForm(ModelForm):

    """
    ProposalSetForm is a basic form autogenerated form from ProposalSet model.
    Returns an empty form to create a new proposal set.

    :rtype: HTML Form

    .. versionadded:: 0.1.5b
    """
    class Meta:
        model = ProposalSet

    def __init__(self, *args, **kwargs):
        super(ProposalSetForm, self).__init__(*args, **kwargs)
        get_place = get_object_or_404(Space, url=args[0])
        if self.instance:
            self.fields['debate'].queryset = Debate.objects.filter(end_date__lte=datetime.date.today(), space=get_place) 
```

错误：

```
TypeError at /en-gb/spaces/test/proposal/add/set/
'ProposalSetForm' object is not callable 
```

我无法找到可能发生的事情，我错过了什么吗？

**解决方案：**

视图.py

```
class AddProposalSet(FormView):

    """
    Create a new prpoposal set, it can be related to a debate or be in free mode,
    which is not linked to anything. If it's linked to a debate, people can
    make their proposals related to the debate notes.

    .. versionadded: 0.1.5

    :rtype: Form object
    :context: form, get_place
    """
    form_class = ProposalSetForm
    template_name = 'proposals/proposalset_form.html'

    def get_success_url(self):
        space = self.kwargs['space_url']
        return reverse(urln_space.SPACE_INDEX, kwargs={'space_url':space})

    def get_form_kwargs(self, **kwargs):
        kwargs = super(AddProposalSet, self).get_form_kwargs(**kwargs)
        kwargs['initial']['space'] = self.kwargs['space_url']
        return kwargs

    def form_valid(self, form):
        self.space = get_object_or_404(Space, url=self.kwargs['space_url'])
        form_uncommited = form.save(commit=False)
        form_uncommited.space = self.space
        form_uncommited.author = self.request.user
        form_uncommited.save()
        return super(AddProposalSet, self).form_valid(form)

    def get_context_data(self, **kwargs):
        context = super(AddProposalSet, self).get_context_data(**kwargs)
        self.space = get_object_or_404(Space, url=self.kwargs['space_url'])
        context['get_place'] = self.space
        return context

    @method_decorator(permission_required('proposals.add_proposalset'))
    def dispatch(self, *args, **kwargs):
        return super(AddProposalSet, self).dispatch(*args, **kwargs) 
```

表格.py

```
class ProposalSetForm(ModelForm):

    """
    ProposalSetForm is a basic form autogenerated form from ProposalSet model.
    Returns an empty form to create a new proposal set.

    :rtype: HTML Form

    .. versionadded:: 0.1.5b
    """
    class Meta:
        model = ProposalSet

    def __init__(self, *args, **kwargs):
        super(ProposalSetForm, self).__init__(*args, **kwargs)
        get_place = get_object_or_404(Space, url=kwargs['initial']['space'])
        if self.instance:
            self.fields['debate'].queryset = Debate.objects.filter(end_date__lte=datetime.date.today(), space=get_place)
            print self.fields['debate'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:44:09.623

该`get_form_class()`方法应该返回类而不是表单类的对象/实例。所以你的方法可以更新为

```
def get_form_class(self):
    return ProposalSetForm 
```

但是，我不确定这将如何传递您需要`__init__()`的类参数。

可能是您可以定义`get_form()`而不是`get_form_class()`返回适当的表单实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:43:52.103

看起来 ProposalSetForm 在您的一个模板中被称为函数

# xul - 如何更改 xul 中的进度表形状和图像？

> ID：13583346
> 
> 赞同：1
> 
> 时间：2012-11-27T11:35:10.437
> 
> 标签：xul

默认进度表形状是矩形，是否可以更改形状或为进度表添加我们自己的图像？

我需要一个箭头进度表，箭头在进度时应该继续填充。

# ruby - Firefox 上的运行时错误（自动测试）

> ID：13583352
> 
> 赞同：0
> 
> 时间：2012-11-27T11:35:21.877
> 
> 标签：ruby, watir, watir-webdriver

我正在使用 watir-webdriver 进行测试。

我似乎遇到了一个相当奇怪的问题，我的一个测试通过谷歌浏览器通过但在 Firefox 上失败，我只是得到一个运行时错误，似乎没有比这更多的信息了。

-> 错误：发生错误（RuntimeError）

该功能只是从两个输入列表中选择两个选项

代码

```
def selectSprint(team, sprint)
    @browser.div(:id, "sprintTitle").click  #Navigate to the Team/Sprint drop down boxes
    @browser.div(:id, "teamTitle").wait_until_present
    @browser.div(:id, "teamTitle").select_list(:id, "Select").select("#{team}")  
    @browser.div(:id, "sprintTitle").wait_until_present  #Move to Sprint drop down box  
    @browser.div(:id, "sprintTitle").select_list(:id, "Select").select("#{sprint}")     
    $log.debug("Team and sprint successfully selected")
    @browser.div(:id => "mainBoard").wait_until_present #checks if page has updated
    rescue => e
    puts "Error: #{e}"
    return true
    $log.info("Method "+"#{__method__}"+" has finished ")
    return true
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:18:55.200

等待和存在方法不适用于 Firefox 17，因此您暂时必须恢复到 Firefox 16。我听说下周将发布 watir-webdriver 的更新，以解决 Firefox 17 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:46:50.520

如果您的脚本在一个浏览器中成功运行，那么它应该全部运行，这可能是由于您使用的 Firefox 浏览器版本而发生的，即使我遇到了此类问题，然后我更新了浏览器，并且在该问题得到解决之后。

更新您的 Firefox，然后再次尝试运行您的测试。

# iphone - 如何在url中使用变量

> ID：13583353
> 
> 赞同：1
> 
> 时间：2012-11-27T11:35:20.830
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我在 android 中看到如果 userid 是一个变量，那么我们像[http://abc.com/user/](http://abc.com/user/) "+userid+"/bookmarks 一样使用它来获取 url 的 web 服务。如何在 iPhone 中完成同样的事情。我已经尝试了上述方法以及这个[http://abc.com/user/userid/bookmarks.bt](http://abc.com/user/userid/bookmarks.bt)没有得到任何东西。所以，任何人都可以告诉我如何去做这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:05:57.513

```
//Use thie code FBRequestWrapper.m 

- (void)request:(FBRequest *)request didLoad:(id)result {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    NSLog(@"Parsed Response: %@", result);

    if ([self.delegate respondsToSelector:@selector(finishedPublishingPost:)])
        [self.delegate finishedPublishingPost:self];
} 
```

# html - css水平导航问题

> ID：13583354
> 
> 赞同：0
> 
> 时间：2012-11-27T03:56:33.087
> 
> 标签：html, css, navigation

我有一个关于某种 css 导航技术的小问题，其中一个最终列表项一直向左或向右推。查看上面的浅蓝色导航以查看我正在谈论的示例。浅蓝色导航有 1 个列表项，它一直推到右侧。我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:22:40.033

有两个导航菜单包含在自己的 div 中。一个向左浮动，另一个“提问”向右浮动。两者都在一个 div 中，其 ID hmenus 设置了宽度。您可以使用 Chrome 开发者工具、firebug 查看元素和样式，或者只查看源代码并遵循 CSS 样式。

# java - 应使用无线时降低功耗

> ID：13583357
> 
> 赞同：0
> 
> 时间：2012-11-27T11:35:30.860
> 
> 标签：java, android

我现在正在写我的硕士论文。本论文有一个相关的应用程序，应该由android开发。该研究的目标之一是关于使用无线在手机之间同步数据。同时，我必须考虑功耗，这意味着在使用无线时降低功耗。我正在考虑这个应用程序的 3 种可能的无线技术：

*   wifi direct (p2p wifi) - 快速、可靠，但在许多手机上不受支持（即使是 Android >=4.0 的手机）（您可能还需要两台设备来测试/开发它）
*   常规 wifi - 快速、可靠，但至少需要一个接入点（即一些基础设施，或其他部分充当接入点但不需要互联网接入的移动设备），代码与 wifi direct 部分兼容
*   蓝牙 - 速度慢，不可靠，大多数设备都支持，不需要基础设施（也可能需要两个设备来开发），代码最少

关于这些提到的无线技术，我有以下几个问题（请考虑我需要可接受的证据或文件来支持我的想法）：

1.  这些技术中哪一种消耗更少的电力？
2.  如何降低安卓手机的功耗？
3.  无论编码如何，在这种情况下是否有任何实用的策略可用？例如在应用程序的设置中考虑某事还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:59:19.350

> 我现在正在写我的硕士论文。

我的建议是不要陷入电源优化问题。你的**主要**目标应该是完成你的论文......并进行任何*直接*需要的必要编码来实现这一目标。通过阅读您的问题，我得到的印象是功耗最小化充其量只是一个外围问题（不是双关语）。假设我的印象是正确的，你不应该在这上面浪费你有限的时间。

现在，如果您的主要目标是生产产品质量的软件，我的建议会有所不同......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:52:11.617

我建议调查低功耗蓝牙，或者也称为[蓝牙智能。](http://en.wikipedia.org/wiki/Bluetooth_low_energy)此外，还有[ANT+](http://en.wikipedia.org/wiki/ANT+)。这两者在电源使用方面都非常保守。

# performance - 导入与链接到 Excel 电子表格

> ID：13583358
> 
> 赞同：2
> 
> 时间：2012-11-27T11:35:35.430
> 
> 标签：performance, excel, ms-access, import, hyperlink

我目前链接到六个 Excel 电子表格，主要是因为用户在 Excel 中编辑数据更容易/更好（他们从未使用过 Access），并且任何更改都会立即反映，包括是否添加了新列然后可以立即供查询使用。

但是链接而不是导入这些数据是否会降低性能？我的一些查询很慢，1-2 分钟，有时只需要 2-3 分钟就可以保存一个查询。每次打开数据库时，我将如何设置 Access 以导入这些工作表的新版本，是否值得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:37:16.187

关于链接电子表格的性能，您会立即想到 4 个因素：

1.  网络性能
2.  电子表格链接的数量（你说大约 6 个）
3.  查询的复杂性
4.  数据集的大小（猜测如果人们经常编辑它，可能远低于 10,000 行）

鉴于保存查询通常很慢，我猜#1 是您的主要瓶颈。是的，使用链接而不是导入对性能的影响很小，但是您的用例（小数据集，没有太多链接）会使这种损失非常小。另一方面，慢速网络会减慢每个操作，包括将更改保存到 Access 数据库本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:28:41.037

我将提出我最终得到的解决方案，因为它几乎解决了我上面遇到的问题，包括自动更新数据：

具有用于查询的适当访问表，例如 tblStoreDetails、tblPromotions

仍然使用电子表格来维护数据，因为这是更新/查看这些内容的最灵活方式，无需在 Access 中构建表单/前端，这真的不值得花时间，因为没有其他人会使用数据库直接地。

链接到 Access 中的这些表，例如 excelStoreDetails、excelPromotions

设置一个在启动时运行的 Autoexec 宏（假设单击了启用宏按钮），使用 Delete 查询清空 Access 表，并使用 Append 查询将链接的 Excel 表中的行添加到 Access 表中。

这解决了由删除/重新导入表引起的问题，主要是它们最终都在 Unassigned Objects 组中；或尝试使用导入规范并最终导致类型不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:47:35.157

您可以通过 ADODB 连接连接到 excel 文件并在 ADODB.recordset 中打开它。它非常非常快。事实上，它可以像连接到“真实”数据库一样快。

实施这种解决方案的可能性取决于您将查询“翻译”成记录集的能力。您需要对 VBA 和 ADODB 对象有一定的了解，因为您必须编写代码来生成记录集，然后在屏幕上（或在报告中）显示它们的内容。

# c# - 需要动态更改标题透视项目的前景色

> ID：13583359
> 
> 赞同：2
> 
> 时间：2012-11-27T11:35:40.003
> 
> 标签：c#, silverlight, foreground, pivotitem

我有这个：

```
<controls:Pivot.HeaderTemplate>
    <DataTemplate>
        <ContentPresenter>
             <TextBlock Text="{Binding}" Foreground="{Binding}" />
        </ContentPresenter>
    </DataTemplate>
</controls:Pivot.HeaderTemplate> 
```

但是 Foreground="{Binding}" 不起作用。我怎样才能做到这一点？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T12:36:54.783

你可以用后面的代码做到这一点：

XAML：

```
<Pivot x:Uid="AppTitle" x:Name="MyPivot" Title="" Foreground="White">
    <PivotItem>
        <PivotItem.Header>
            <TextBlock x:Uid="HeaderTextFromResources" Foreground="White" Text="" />
        </PivotItem.Header>
   ... 
```

C＃：

```
private void Pivot_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    foreach (PivotItem pivotItem in MyPivot.Items)
    {
        if (pivotItem == MyPivot.Items[MyPivot.SelectedIndex])
        {
            // Header of the selected item to white
            ((TextBlock)pivotItem.Header).Foreground = new SolidColorBrush(Windows.UI.Color.FromArgb(255, 255, 255, 255));
        }
        else
        {
            // Headers of other items to slightly darker
            ((TextBlock)pivotItem.Header).Foreground = new SolidColorBrush(Windows.UI.Color.FromArgb(255, 230, 230, 230));
        }
    }
} 
```

# python - 循环导入的函数中的模块导入是否会循环导入？

> ID：13583363
> 
> 赞同：1
> 
> 时间：2012-11-27T11:35:50.660
> 
> 标签：python

我还没有达到我有工具（或知道如何开发或使用它们）来测试和分析看似简单的事情（比如我的问题）的水平，所以我求助于你。

我有一个检查条件的函数，并根据该条件选择最好的数学工具（不同的模块），但这个函数应用于数组的窗口，因此是循环的。从一个窗口到另一个窗口可能会发生不同的导入，但这让我想知道导入是否真的被循环了，这是否是一个性能问题。

这是来自 matplotlib 源的示例

```
def pause(interval):
    """
    Pause for *interval* seconds.

    If there is an active figure it will be updated and displayed,
    and the GUI event loop will run during the pause.

    If there is no active figure, or if a non-interactive backend
    is in use, this executes time.sleep(interval).

    This can be used for crude animation. For more complex
    animation, see :mod:`matplotlib.animation`.

    This function is experimental; its behavior may be changed
    or extended in a future release.

    """
    backend = rcParams['backend']
    if backend in _interactive_bk:
        figManager = _pylab_helpers.Gcf.get_active()
        if figManager is not None:
            canvas = figManager.canvas
            canvas.draw()
            show(block=False)
            canvas.start_event_loop(interval)
            return

    # No on-screen figure is active, so sleep() is all we need.
    import time
    time.sleep(interval) 
```

如果我在循环中交替打开和关闭数字，是否会每隔一次迭代导入一次？或者只是在第一次调用导入时导入而忽略后续导入？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:39:51.353

成功完成后`import`，导入的模块会被缓存，`sys.modules`后续`import`语句会在其中找到模块，`sys.modules`因此不会重新导入模块。`reload`您可以使用内置函数强制重新导入模块。

从[文档中](http://docs.python.org/3/reference/import.html#the-module-cache)：

> 导入搜索期间检查的第一个位置是`sys.modules`. 此映射用作先前已导入的所有模块的缓存，包括中间路径。因此，如果`foo.bar.baz`之前已导入，`sys.modules`将包含`foo`、`foo.bar`和的条目`foo.bar.baz`。

[PEP 8](http://www.python.org/dev/peps/pep-0008/#imports)（Python 风格指南）建议导入应该在文件的顶部，而不是在方法中。打破此规则（给出“延迟导入”）的正当理由是，如果模块导入很昂贵并且在您的程序中很少使用（并且在典型的执行中根本不使用），或者解决循环导入依赖关系（尽管在那个如果您应该尝试通过更好地拆分模块功能来解决循环问题）。对于像`time`Python 这样的内置模块，几乎没有理由使用延迟导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:42:08.727

的实际操作[`import`](http://docs.python.org/2/reference/simple_stmts.html#grammar-token-import_stmt)只发生一次（这就是为什么[`reload`](http://docs.python.org/2/library/functions.html#reload)当您确实希望再次导入它时明确需要这样做的原因）——解释器检查它是否已经被导入。

但是将所有导入放在模块的顶部通常更符合[pythonic 。](https://stackoverflow.com/questions/6372159/what-is-the-most-pythonic-way-to-import-modules-in-python)

# bash - Bash-是否可以仅将 -uniq 用于一行的一列？

> ID：13583365
> 
> 赞同：6
> 
> 时间：2012-11-27T11:35:57.303
> 
> 标签：bash, sorting, uniq

```
 1.gui  Qxx  16
    2.gu   Qxy  23
    3.guT  QWS  18
    4.gui  Qxr  21 
```

我想根据第三列中的值对文件进行排序，所以我使用：

```
sort -rnk3 myfile

2.gu   Qxy  23
4.gui  Qxr  21
3.guT  QWS  18
1.gui  Qxx  16 
```

现在我必须输出为：（以 3.gui 开头的行已退出，因为 4.gui 的行具有更大的值）

```
2.gu   Qxy  23
4.gui  Qxr  21
1.guT  QWS  18 
```

我不能使用`-head`，因为我有数百万行而且我不知道在哪里剪切，我想不出一种使用方法，`-uniq`因为它将一行视为一个整体，并且由于我无法告诉我`-uniq`查看第一列，它计算了一行具有独特性，它输出它-这是正常的-。我知道`-uniq`可以忽略许多字符，但正如您从示例中看到的第一列可能有各种字符数..

请指教..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T11:43:34.563

试试这个：

```
sort -rnk3 myfile | awk -F"[. ]" '!a[$2]++' 
```

awk 根据第二列删除重复项。这实际上是一种著名的 awk 删除重复项的语法。维护了一个数组，其中维护了第二个字段的记录。每次打印记录之前，都会检查数组中的第二个字段。如果不存在，则打印它，否则将其丢弃，因为它是重复的。这是使用 ++ 实现的。第一次，当遇到记录时，这个 ++ 将自其后修复以来将计数保持为 0。后续出现将增加值，当否定时变为假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:51:17.067

干得好：

```
sort -rnk3 file | awk -F'[. ]' '{ if (a[$2]++ == 0) print }' 

2.gu   Qxy  23
4.gui  Qxr  21
1.guT  QWS  18 
```

这用于`awk`检查第二个字段中的重复值，其中字段分隔符是空格或句点。所以这就是它将第二个字段视为：

```
$ awk -F'[. ]' '{ print $2 }' file

gu
gui
guT
gui 
```

在`awk`变量`$0`中代表整行，`$1`代表第一个字段，以此类推..

`awk -F'[. ]' '{ if (a[$2]++ == 0) print }'`这些`-F`选项让您指定字段分隔符，在这种情况下，它是空格或句点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T18:29:55.830

因此，我通过功能强大且令人惊叹的 Google 发现了这一点——我的小脚本构建了 @sudo_O 的答案，因为它向您显示找到的所有重复行......，而不是没有重复的文件。

我在第三列（端口）中找到所有重复项的文本位于名为 master.txt 的文件中

```
awk '{if (a[$3]++ > 0) print}' master.txt | 同时读取站点线程端口
做
  grep $port master.txt
完毕

```

# php - 在for循环PHP中获取列名和值

> ID：13583367
> 
> 赞同：2
> 
> 时间：2012-11-27T11:36:00.130
> 
> 标签：php, mysql

我想从特定表中获取所有列名和值。此表中的字段不是固定的，因此有时用户会添加一个字段，也可以将其删除。我想要做的是检索所有列名并获取它的值。就我现在而言，正在检索列名并从中获取一个值。我知道为什么我会得到这个结果，但我不知道如何解决它。

```
//I edited this sql, normally the table value and id are variable
$sql = "SELECT * FROM ".$_POST['moduleName']." WHERE modItemID= ".$_POST['modItemID']; 
$query = mysql_query($sql); 
$columns = mysql_num_fields($query); 
for($i = 1; $i < $columns; $i++) { 

//read field name
  $fieldName = mysql_field_name($query,$i);
  while($row = mysql_fetch_assoc($query,$i)){
    echo $fieldName."=".$row[$fieldName];   
  }

} 
```

结果：naam=Ketting

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T11:39:34.360

实际上，解决您的问题的真正简单方法是使用 foreach 循环，如下所示：

```
while($row = mysql_fetch_assoc($query))
{
    foreach($row as $key => $value)
    {
        echo "$key=$value";
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T11:38:50.953

`mysql_fetch_assoc`返回一个关联数组。您可以使用`foreach`循环来检索数组中每个项目的键=>值。

```
$sql = "SELECT * FROM products WHERE modItemID= 14"; 
$query = mysql_query($sql); 
$columns = mysql_num_fields($query); 
for($i = 1; $i < $columns; $i++) { 

//read field name
  $fieldName = mysql_field_name($query,$i);
  while($row = mysql_fetch_assoc($query,$i)){
    foreach($row as $column=>$value) {
      echo "$column = $value\n";
    }
    echo $fieldName."=".$row[$fieldName];   
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-06T11:51:32.977

只需输入您的数据库名称、用户名、密码和表名。

您从主数据库中获取所有数据（带有列名）

```
<?php 

function qry($q){

    global $qry;
    try {   
    $host = "?";
    $dbname = "?";
    $username = "?";
    $password = "?";
    $dbcon = new PDO("mysql:host=$host; 
    dbname=$dbname","$username","$password");
}
catch (Exception $e) {

    echo "ERROR ".$e->getMEssage();

}

    $qry = $dbcon->query($q);
    $qry->setFetchMode(PDO:: FETCH_OBJ);

    return $qry;

}

echo "<table>";

/*Get Colums Names in table row */
$columns = array();

$qry1= qry("SHOW COLUMNS FROM Your_table_name");

while (@$column = $qry1->fetch()->Field) {
    echo "<td>".$column."</td>";
    $columns[] = $column;

}

echo "<tr>";

/* Fetch all data into a html table *

$qry2 = qry("SELECT * FROM Your_table_name");

while ( $details = $qry2->fetch()) {

    echo "<tr>";
    foreach ($columns as $c_name) {
    echo "<td>".$details->$c_name."</td>";

}

}

echo "</table>";

?> 
```

# php - 使用 phpflickr 为 flickr 中的照片添加评论

> ID：13583370
> 
> 赞同：1
> 
> 时间：2012-11-27T11:36:12.670
> 
> 标签：php, flickr, phpflickr

我开始知道如何使用 phpflickr 在我的 flickr 帐户中检索对照片的评论。但我无法通过相同的方式向照片添加评论。我试过：

`$phpflickr->photos_comments_addComment($photo_id,"TestCK");`

但我没有看到我对照片的评论。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:21:00.187

知道了...！我必须在 flickr 上授权我的应用程序并通过将页面重定向到 getToken.php 并将令牌存储到 $token 来获取令牌。然后我只需要添加以下行：`

```
$f = new phpFlickr($apiKey, $apiSecret, true);
$f->setToken($token);
$f->auth();
$f->photos_comments_addComment($photoid,$comment); 
```

:)

# post - 使用 capybara 测试特定的帖子请求（表单黑客、权限保护）

> ID：13583375
> 
> 赞同：3
> 
> 时间：2012-11-27T11:36:22.293
> 
> 标签：post, rspec, capybara

我刚刚将一个 Rails 应用程序包从 capybara 2.0.0.beta2 更新到当前的 2.0.1 版本。（只是碰巧还在测试版中。）我还将 Rspec 从 2.11.0 更新到 2.12.0 以兼容对如何包含 url 帮助程序的一些更改。

在此更新之前，我进行了一些测试，以验证非管理员用户无法创建新用户以及类似的权限/表单黑客基础知识。我还有一些规范来验证是否涵盖了批量分配攻击。这很容易，而且效果很好，但现在对我来说已经坏了。

```
context "non-admin users can" do
  before(:each) do
    login_as_user
  end
  it "Not create new users" do
    page.driver.post users_path, { :params => {
      user_name: "user1",
      user_email: "name@example.com",
      user_password: "124mgldkg3",
      user_role: "user"
    } }
    page.status_code.should be 302
  end
end 
```

它声明只尝试去（访问）某处未经授权的工作就好了，但我不能再对不应允许此类用户发布的表单进行操纵发布。对于所有这些请求，我现在都会收到 404。

我完全不确定 Capybara 和/或 Rspec 发生了什么变化。这当然可能是一些小细节导致我的请求“脱离上下文”。它看起来是在没有与访问和表单帖子相同的会话和请求上下文的情况下执行请求。

我想：

*   使用*自定义*参数发布，而不是用户可见的表单。
*   仍然在现有会话和请求*上下文中*（子域...）

我还没有找到替代技术。我从 Rack::Test 路径开始，但后来我肯定回到了第 1 格，没有登录或会话.... 这表明可能有某种方法可以检查这些常见的*黑客*尝试，而无需*手动*设置所有水豚为我处理的会话上下文内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:29:05.477

在深入研究 Capybaras 内部之后，我发现当前执行自定义发布请求的工作方式是执行以下操作：

```
context "User class users can" do
  before(:each) do
    login_as_user
  end
  it "Not create new users" do
    page.driver.browser.reset_host! # just to be safe
    page.driver.browser.process(:post, users_path, { params: {
      user_name: "user1",
      user_email: "name@example.com",
      user_password: "124mgldkg3",
      user_role: "user"
    }})
    page.status_code.should be 302
  end
end 
```

这在行为上等同于我的原始代码（问题上方）。

# windows-7 - 我的注册表项去哪了？视窗 7、win64

> ID：13583379
> 
> 赞同：0
> 
> 时间：2012-11-27T11:36:32.310
> 
> 标签：windows-7, registry, win64

Windows7和Win64是我的新平台，编程明智，所以不知道发生了什么，我使用以下命令在windows7 64位的Windows注册表中保存了一个键，问题是相同的代码能够返回REG_OPENED_EXISTING_KEY返回值，这意味着密钥创建成功并且该函数能够在后续调用中读取/打开密钥，但是当我尝试在 regedit.exe 的位置中找到密钥时，我不能它根本没有显示在树既不在 HKLM_LOCAL_MACHINE/Software/MyProject 也不在 HKLM_LOCAL_MACHINE/Software/Wow6432Node/MyProject

有人可以澄清这里发生了什么吗？

```
 HKEY hKey ;
 HKEY  key = HKEY_LOCAL_MACHINE;
 DWORD disValue ;
 string subKey = "Software\\MyProject\\";

 LONG retValue = RegCreateKeyEx( key, subKey.c_str(), 0, 0, REG_OPTION_NON_VOLATILE, KEY_ALL_ACCESS, 0, &hKey, &disValue ) ;
 if ( retValue == ERROR_SUCCESS )
 {
    if ( disValue == REG_CREATED_NEW_KEY )// new key created. This value will change to REG_OPENED_EXISTING_KEY if the key already existed, the function then simply open the key.
       return true;
    return false;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:04:28.017

如果您的进程没有以管理员身份运行，它将无法访问`HKLM\SOFTWARE`. 出于兼容性原因，Windows Vista 和 Windows 7 将应用称为“[注册表虚拟化](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa965884%28v=vs.85%29.aspx)”的东西。这会将对 HKLM\SOFTWARE 的访问重定向到您的进程*可以*访问的位置。它对尝试写入`C:\Program Files`.

Windows 如何确定您的应用程序是“旧版”并需要此兼容性破解？你需要一个[应用程序清单](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa374191%28v=vs.85%29.aspx)来告诉 Windows 你的进程是 Windows Vista 感知的并且你不想被黑客入侵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:53:37.683

我将以下清单文件添加到项目中，并将**CREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST "MyProject.exe.Manifest"**添加到 resource.rc 文件中。瞧。

```
**MyProject.exe.Manifest**

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly
  xmlns="urn:schemas-microsoft-com:asm.v1"
  manifestVersion="1.0">

<compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1"> 
    <application> 
      <!--This Id value indicates the application supports Windows Vista functionality -->
    <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/> 
      <!--This Id value indicates the application supports Windows 7 functionality-->
    <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
    </application> 
</compatibility>

<assemblyIdentity
    name="MyCompany.Apps.MyProject"
    processorArchitecture="*"
    version="1.0.0.0"
    type="win32"/>
<description>App description</description>
<dependency>
    <dependentAssembly>
    <assemblyIdentity
        type="win32"
        name="Microsoft.Windows.Common-Controls"
        version="6.0.0.0"
        processorArchitecture="*"
        publicKeyToken="6595b64144ccf1df"
        language="*"
    />
    </dependentAssembly>
</dependency>

<trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
<security>
    <requestedPrivileges>
        <requestedExecutionLevel
        level="requireAdministrator"
        uiAccess="false"/>
    </requestedPrivileges>
</security>
</trustInfo>
</assembly> 
```

# asp.net - 从用引号和逗号表示的字符串中捕获参数

> ID：13583397
> 
> 赞同：0
> 
> 时间：2012-11-27T11:37:24.807
> 
> 标签：asp.net, vb.net

嗨，我有一个这样的字符串

`"81.213.224.141","81.213.224.141","UAE","United Emirates","D3","Dubai","WildWadi","","32.100000","3.200100","Telecom","Eutelsat - SanComm"`. 我目前正在做的是只获取引号之间的数据，同时避免逗号并将它们存储在不同的字符串中。所以字符串 1 有第一个 IP，字符串 2 有第二个 IP，字符串 3 有国家代码等等。

因为`"Eutelsat - SanComm"`我想将它分成两部分并将它们存储在两个字符串中。所以第一个字符串会有`Eutelsat`，第二个会有`SanComm`.

到目前为止，我已经成功地拆分了字符串，但是它不仅在引用之间获取数据，而且它没有完全查看`Telecom`，例如仅从整个信息中查看。

代码：

```
str_Info = TextBox1.Text.Split(" ") //str_Info is a string having the TextBox 
                                      Which in turn has the string shown above

    For Each str_get As String In str_Info

    Next
End Sub 
```

我认为我的拆分不能满足我的要求。有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:52:52.310

我建议使用 Textfieldparser：

```
 Dim tfp As New TextFieldParser("data.txt")
    With tfp
        .HasFieldsEnclosedInQuotes = True
        .SetDelimiters(",")
    End With
    Dim fields = tfp.ReadFields
    For Each field In fields
        Debug.Print(field)
    Next 
```

现在你可以对每个字段做你想做的事。如果您希望它的类型更强大，您可以使用[www.filehelpers.net](http://www.filehelpers.net)在那里您可以创建一个类，然后从您的输入中“反序列化”。

使用 Filehelper，它可能看起来像：

```
Private Class SatlistConverter
    Inherits ConverterBase

    Public Overrides Function StringToField(from As String) As Object
        Return Strings.Split([from], " - ").ToList
    End Function
End Class

<DelimitedRecord(",")>
Private Class TheRecord
    <FieldQuoted>
    Public IP1, IP2, ISOCountry, Country, Something, City, Region, SomethingElse, Lattitude, Longitude, Provider As String
    <FieldQuoted, FieldConverter(GetType(SatlistConverter))>
    Public Satlist As List(Of String)
End Class

    Private Sub foo()

    Dim e As New FileHelperEngine(Of TheRecord)
    Dim records = DirectCast(e.ReadFile("data.txt"), TheRecord())
    For Each r In records
        Debug.Print(r.IP1)
        Debug.Print(r.IP2)
        For Each s In r.Satlist
            Debug.Print(s)
        Next
    Next

End Sub 
```

Filehelper 有更多可能，但作为一个快速启动它可能就足够了。

就个人而言，我喜欢获得更强类型的东西的想法（请注意，您可以使用内置转换器使“2”成为整数），而不仅仅是字符串数组。

**编辑**更新示例以显示 CustomConverter 的使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:45:26.417

这应该这样做

```
 Dim noQuotes = Textbox1.Text.Replace("""", "") ' Remove quotes
    Dim split = noQuotes.Split(",") ' Split on commas

    Dim result As New List(Of String)()

    For Each str_get As String In split
        Dim splitStr = str_get.Split("-") ' Perform secondary split on dash
        For Each str_split As String In splitStr
            result.Add(str_split.Trim()) ' Enter into result list
        Next
    Next 
```

您的值列表将在`result`

# spring - Jaxb2Marshaller 的 classesToBeBound 属性

> ID：13583399
> 
> 赞同：2
> 
> 时间：2012-11-27T11:37:38.850
> 
> 标签：spring, jaxb, jaxb2

我正在尝试`Jaxb2Marshaller`如下配置：

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.test.response1.ResponseType1</value>
            <value>com.test.response2.ResponseType2</value>
            <value>com.test.request.Request</value>
        </list>
    </property>
</bean> 
```

它有效。

`classesToBound`混淆是物质中提到的类的顺序吗？

如果我将其更改为：

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
                        <value>com.test.request.Request</value>
            <value>com.test.response1.ResponseType1</value>
            <value>com.test.response2.ResponseType2</value>
        </list>
    </property>
</bean> 
```

一切都完全相同，我得到以下异常：

```
org.springframework.beans.TypeMismatchException: Failed to convert value of type 'com.test.response2.ResponseType2' to required type 'com.test.request.Request' 
```

正在使用的版本`spring`是：`3.1.2.RELEASE`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:43:41.363

除非在 Spring 3.1.0 和 3.1.2 之间发生了变化，否则如果您正在处理 JAXB 生成的类，则顺序无关紧要。如果您是手动创建/注释对象，那可能是另一回事——也许如果您发布它们，我们可以提供帮助。另一方面，我强烈建议使用另一种机制来指向`Jaxb2Marshaller`要编组的类，使用`contextPaths`or`packagesToScan`属性。请记住`contextPath`/`contextPaths`需要`ObjectFactory`由 JAXB 编译器生成的类。

# events - gwt如何触发自己的loadevent

> ID：13583401
> 
> 赞同：1
> 
> 时间：2012-11-27T11:37:42.247
> 
> 标签：events, gwt

我创建了一个显示 svg 图像的小部件。包括一个浏览器分支以交替显示 png。

在加载的情况下，`png`我正在使用`Image`类并重新触发其加载事件。`svg-xml`字符串是通过`RequestBuilder`（见[这里](https://stackoverflow.com/questions/13230972/how-to-create-an-gwt-widget-for-svg-image-properly)）从服务器获取的。现在我想解雇一个新`LoadEvent` `onResponseReceived`的和一个`ErrorEvent` `onError`.

但是如何创建一个`LoadEvent`（Javadoc 说我应该从 a 创建一个，`NativeEvent`但这也没有构造函数）。

我目前看到的唯一方法是创建我自己的`LoadEvent`，但这不应该是必要的，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:48:18.630

```
NativeEvent loadEvent = Document.get().createLoadEvent();
DomEvent.fireNativeEvent(loadEvent, source); 
```

替换`source`为您的小部件。

与`Document.get().createErrorEvent()`错误事件相同。

# testing - 减慢以太网连接

> ID：13583404
> 
> 赞同：1
> 
> 时间：2012-11-27T11:37:53.510
> 
> 标签：testing, ethernet, trafficshaping

我有一个基于以太网的设备，我需要对其进行一些网络连接测试。

理想情况下，我既想降低带宽（低至 10 秒的 Kb/s），又想尽可能在​​被测设备和服务器之间的网络连接中引入延迟（一秒左右）。

关于我将如何做到这一点的任何想法？我在考虑可能以 QoS 为起点的路由器，但不确定我是否可以得到一个既会引入延迟又会减少带宽的路由器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:03:15.803

您应该使用流量整形器（直接在机器上或上游）。现代整形服务（如[`dummynet`](http://www.freebsd.org/cgi/man.cgi?query=dummynet&sektion=4&apropos=0&manpath=FreeBSD+8.0-RELEASE)FreeBSD 或 Linux上的）[`tc`](http://www.tldp.org/HOWTO/Traffic-Control-HOWTO/)直接带有常见的操作系统，它们应该能够满足您的需求：

> dummynet 系统工具通过应用带宽和队列大小限制、实施不同的调度和队列管理策略以及模拟延迟和丢失，允许控制通过各种网络接口的流量。

与集线器相比，最大的优势是您可以*准确地*配置*不同的*场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:40:55.297

似乎减少带宽的最简单方法是在服务器和测试设备之间插入一个较旧的 10Base-T 集线器。

要引入比我更聪明的头脑，需要咨询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:46:54.363

QOS 不够好，因为它可能不会影响延迟，带宽也不是很可控。

理想情况下，您需要在网络堆栈中插入某种软件组件，该组件将拦截数据包并添加您需要的东西 - 即时计算吞吐量并在超过所需带宽时拒绝数据包并根据您想要的延迟停止数据包. 我不知道那里是否有这样的软件，但值得搜索 inet。

使用硬件设备也可以实现类似的效果，该设备将位于您的物理线路上。不知道市面上有没有这种设备。

# spring-annotations - spring注解如何选择类注入？

> ID：13583407
> 
> 赞同：1
> 
> 时间：2012-11-27T11:38:00.250
> 
> 标签：spring-annotations

我已经下载了一个 Spring annotations 示例，但我看不到它如何选择注入哪个类，这里​​是代码和配置。首先是 IWriter 接口的几个实现（未显示）

```
package writers;
import org.springframework.stereotype.Service;

@Service
public class NiceWriter implements IWriter {
    public void writer(String s)    {
        System.out.println("Nice Writer - " + s);
    }
}

package writers;
import org.springframework.stereotype.Service;

@Service
public class Writer implements IWriter{
    public void writer(String s)    {
        System.out.println("Writer - "+s);
    }
}

package testbean;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import writers.IWriter;

    @Service
    public class SpringBeanWithDI{
        private IWriter writer;

        @Autowired
        public void setWriter(IWriter writer)   {
            this.writer = writer;
        }

        public void run()   {
            String s = "This is my test";
            writer.writer(s);
        }
    } 
```

测试豆：-

```
package main;

import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import testbean.SpringBeanWithDI;

public class TestBean  {
    public static void main(String[] args)  {
        ApplicationContext context = new ClassPathXmlApplicationContext("META-INF/beans.xml");
        BeanFactory factory = context;
        SpringBeanWithDI test = (SpringBeanWithDI) factory.getBean("springBeanWithDI");
        test.run();
    }
} 
```

和 beans.xml 文件：-

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/aop
           http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd">

  <context:component-scan base-package="testbean" />
  <context:component-scan base-package="Writers" />

</beans> 
```

一切都非常简单，但为什么它总是注入 'Writer' 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:39:03.423

从文档中我发现了这个：-

“对于回退匹配，bean 名称被视为默认限定符值。这意味着 bean 可以使用 id “main”而不是嵌套限定符元素定义，从而导致相同的匹配结果。

但是，请注意，虽然这可以用来通过名称引用特定的 bean，但 @Autowired 从根本上讲是关于带有可选语义限定符的类型驱动注入。这意味着限定符值，即使在使用 bean 名称回退时，也总是在类型匹配集中具有缩小语义；它们不会在语义上表达对唯一 bean id 的引用。”因此在我的示例中，字段“writer”用于查找名为“Writer”的类。

私人 IWriter 作家；

聪明的 ！（也许太聪明了！）

# jquery - Jeditable + keytables clickevent

> ID：13583410
> 
> 赞同：0
> 
> 时间：2012-11-27T11:38:19.117
> 
> 标签：jquery, jeditable

我为我的表使用插件 keyTables 和 jeditable。

我可以在网格中导航并通过返回激活 jeditable。但是如果一旦激活一个单元格，我只需单击一下单元格就可以启用 jeditable 。

出问题了。

[http://datatables.net/release-datatables/extras/KeyTable/editing.html](http://datatables.net/release-datatables/extras/KeyTable/editing.html)

这是演示，工作正常。

我的小提琴：http: [//jsfiddle.net/jGC4J/](http://jsfiddle.net/jGC4J/)

这是演示代码和我使用的代码：

```
$(document).ready( function () {
var keys = new KeyTable( {
    "table": document.getElementById('example')
} );

/* Apply a return key event to each cell in the table */
keys.event.action( null, null, function (nCell) {
    /* Block KeyTable from performing any events while jEditable is in edit mode */
    keys.block = true;

    /* Initialise the Editable instance for this table */
    $(nCell).editable( function (sVal) {
        /* Submit function (local only) - unblock KeyTable */
        keys.block = false;
        return sVal;
    }, { 
        "onblur": 'submit', 
        "onreset": function(){ 
            /* Unblock KeyTable, but only after this 'esc' key event has finished. Otherwise
             * it will 'esc' KeyTable as well
             */
            setTimeout( function () {keys.block = false;}, 0); 
        }
    } );

    /* Dispatch click event to go into edit mode - Saf 4 needs a timeout... */
    setTimeout( function () { $(nCell).click(); }, 0 );
} );
} ); 
```

代码和插件是一样的。我应该只能通过单击来编辑带有返回事件的单元格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:51:23.213

简单的..

添加

```
 $(nCell).editable('destroy'); 
```

到

```
/* Apply a return key event to each cell in the table */
            keys.event.action( null, null, function (nCell) {
                /* Block KeyTable from performing any events while jEditable is in edit mode */
                keys.block = true;

                /* Initialise the Editable instance for this table */
                $(nCell).editable( function (sVal) {
                    /* Submit function (local only) - unblock KeyTable */
                    keys.block = false;
                    // INSERT HERE //
                    return sVal;
                }, { 
                    "onblur": 'submit', 
                    "onreset": function(){ 
                        /* Unblock KeyTable, but only after this 'esc' key event has finished. Otherwise
                         * it will 'esc' KeyTable as well
                         */
                        setTimeout( function () {keys.block = false;}, 0); 
                    }
                } );

                /* Dispatch click event to go into edit mode - Saf 4 needs a timeout... */
                setTimeout( function () { $(nCell).click(); }, 0 );
            } ); 
```

会让它工作。

# python - 在 openerp 报告中检索含税的产品价格

> ID：13583411
> 
> 赞同：0
> 
> 时间：2012-11-27T11:38:21.387
> 
> 标签：python, openerp

我正在写一份[Aeroo](http://www.alistek.com/wiki/index.php)报告来打印 OpenERP 产品标签。

我设法打印了产品的名称、描述、图像、条形码……但我在价格方面遇到了麻烦。我可以打印产品的基本价格，不含税：

```
<o.price> 
```

但是我还需要打印带有税款和税款的价格，我该如何实现呢？

编辑：这可行，但必须是更好的方法：

```
<o.list_price * ( 1 + sum([t.amount for t in o.taxes_id]))> 
```

并且不考虑折扣

谢谢， 路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:24:00.983

解决了创建模块并将 pvp 方法添加到使用 tax.compute_all 的 product_product

```
from osv import fields, osv

class product_product(osv.osv):
    _name = "product.product"
    _inherit = "product.product"

    def _pvp(self, cr, uid, ids, field_name, arg, context=None):
        """Return calculated PVP with taxes
        """
        res = {}
        tax_obj = self.pool.get('account.tax')
        for product in self.browse(cr, uid, ids, context):
            t = tax_obj.compute_all(cr, uid, product.taxes_id, product.list_price, 1)['total_included']
            res[product.id] = "{0:.2f}".format(t)
        return res

    _columns = {
        'pvp': fields.function(_pvp, type="string", method=True, string="PVP"),  # calculates PVP with taxes
    }

product_product() 
```

# javascript - 如何确认href标签中链接的导航？

> ID：13583415
> 
> 赞同：7
> 
> 时间：2012-11-27T11:38:45.803
> 
> 标签：javascript, html

我正在为管理面板使用简单的链接，但如果用户不小心点击了删除用户的链接，应该会弹出一个确认弹出窗口来避免这种情况。

可能如您所知，href 标记与 javascript 不完全兼容。所以，我使用 span 标签来表示“onclick”，但效果并不好：

```
<script type="text/javascript">
function confirm_click()
{
return confirm("Are you sure ?");
}

</script> 
```

这是链接的html代码：

```
 <span onclick="confirm_click();">    <a title="Delete User" href="http://www.google.com"><i class="icon-remove-sign">DELETE</i></a></span> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T11:40:25.897

尝试...

```
<a title="Delete User" onclick="return confirm_click();" href="http://www.google.com"><i class="icon-remove-sign">DELETE</i></a> 
```

...反而。

您需要*返回*方法的值，并且在 onclick 事件中返回 false 会阻止默认行为（在这种情况下是导航到 href）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T11:44:40.027

尝试

```
<a href='/path/to/action' onclick="return confirm('Are you sure ?')">Delete</a> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T11:48:10.777

这是我的代码：

```
<a title="Delete User" id="delete" href="http://www.google.com"><i class="icon-remove-sign">DELETE</i></a>
<script type="text/javascript">
document.getElementById('delete').onclick = function(e){
    if( !confirm('Are you sure?') ) {
        e.preventDefault();
    }
}
</script> 
```

我认为我们避免在 HTML 中使用 'onclick' 等以使 HTML 和 JavaScript 分开

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:44:34.987

```
<body onunload="return confirm_click()"> 
```

当页面将被卸载时，系统会提示您确认消息

关于卸载事件的资源：http: [//www.w3schools.com/jsref/event_onunload.asp](http://www.w3schools.com/jsref/event_onunload.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:41:25.807

这个 javascript 将完成这项工作

```
function confirmDelete(delUrl) 
    {
        if (confirm("Sample message")) 
        {
            document.location = delUrl;
        }
    } 
```

显然你必须把它

```
<a href="javascript:confirmDelete('yourPath')">Delete</a> 
```

# c - Arduino中断替代方案

> ID：13583419
> 
> 赞同：0
> 
> 时间：2012-11-27T11:38:55.257
> 
> 标签：c, embedded, arduino, microcontroller, interrupt

根据我的阅读，我的问题的解决方案是使用中断，但如果我理解正确，我不能在中断调用的例程中使用延迟。我有一个大按钮[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)开关。我希望它在闲置时有心跳，但是一旦它被推动，保持绿色并执行代码。

如果我按下按钮的次数足够多，我可以打破它`heartbeat()`（我假设在它完成一个循环时在正确的时间获得状态更改`heartbeat`），但我被困在如何让它在第一次点击时工作。有没有其他方法可以做我正在尝试的事情？

```
void loop(){

heartbeat();                                    //Make LED beat.
buttonVal = digitalRead(buttonPin);             //Check the button.
    if (buttonVal != buttonState) {               //If the button state changed.
        if (buttonVal == HIGH){                   //Check if the button is pressed.
            analogWrite(greenPin, 255);         //Button stays green once pushed.
            functionA                           //Has some delays in it.
            functionB                           //Has some other delays.
        }
    }
}

void heartbeat(){
    for(i = 0; i < pmw; i++) {
        analogWrite(greenPin,i);
        delay(((60000/rate)*.1)/pmw);
    }

    for (i = pmw; i > 0; i--){
        analogWrite(greenPin,i);
        delay(((60000/rate)*.2)/pmw);
    }

    for(i = 0; i < pmw; i++) {
        analogWrite(greenPin,i);
        delay(((60000/rate)*.1)/pmw);
    }

    for (i = pmw; i > 0; i--){
        analogWrite(greenPin,i);
        delay(((60000/rate)*.6)/pmw);
    }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T13:16:56.200

你的大部分假设都是正确的。处理此问题的正确方法是使用中断，在中断服务例程 (ISR) 中延迟不是一个好主意。因此，您要做的是在 ISR 中设置一个标志并在主循环中检查该标志。

```
// Flag needs to be volatile if used in an ISR
volatile int buttonFlag = 0; 

void loop()
{
    if (buttonFlag == 0)
    {
        heartbeat();                        //make led beat
    }
    else
    {
        analogWrite(greenPin, 255);         //button stays green once pushed
        functionA                           //has some delays in it
        functionB                           //has some other delays
        buttonFlag = 0;                     //clear flag after executing code
    }

}

// Interrupt Service Routine attached to INT0 vector
ISR(EXT_INT0_vect)
{
    buttonFlag = digitalRead(buttonPin);    //set flag to value of button
} 
```

由于中断只会在按钮状态发生变化时触发，因此您无需检查。

确保您的标志变量是全局变量，并且已声明[`volatile`](http://tigcc.ticalc.org/doc/keywords.html#volatile)为在 ISR 中使用。并确保您使用正确的中断向量与您正在使用的引脚一起使用。

这是一个关于 Arduino 中断的[好教程。](http://www.engblaze.com/we-interrupt-this-program-to-bring-you-a-tutorial-on-arduino-interrupts/)这是您尝试做的另一个[很好的例子。](http://gonium.net/md/2006/12/20/handling-external-interrupts-with-arduino/)

根据您使用的开关类型，您可能还想研究如何消除[您的开关压力。](https://electronics.stackexchange.com/questions/41674/switch-debouncing-would-toggle-switch-still-bounce/41690#41690)如果不是错过第一次印刷，而是印刷太多，则需要实施某种类型的去抖动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-03T12:19:26.663

我是一名专业程序员，但我是 Arduino 世界的新手。我注意到许多Arduino所有者不了解编程的基础知识，并且在使用这项令人惊叹的技术时无法取得良好的效果。

特别是，如果没有必要，我想建议不要使用 Arduino 中断，因为它们只有两个，即使你可以为单个传感器或执行器编写“漂亮”的代码，当你必须实现一个更复杂的项目，你不能使用它们。当然，您使用中断来处理单个按钮是正确的，但是如果您有四个按钮需要管理呢？

出于这个原因，我使用“时间片”或“单步”技术重写了“心跳”草图。使用这种技术，每次执行循环功能时，您只运行控制功能的“单步”，因此您可以根据需要插入任意数量，并且对您正在使用的所有传感器同样快速和响应。为此，我为必须实现的每个控制功能使用全局计数器，并且每次执行循环功能时，我都会执行每个功能的一个步骤。这是新草图：

```
// Interrupt.ino - this sketch demonstrates how to implement a "virtual" interrupt using
// the technique of "single step" to avoid heavy duty cycles within the loop function.

int maxPwm = 128;   // max pwm amount
int myPwm = 0;      // current pwm value
int phase = 1;      // current beat phase
int greenPin = 11;  // output led pin
int buttonPin = 9;  // input button pin
int buttonFlag = 1; // button flag for debounce

int myDir[] = {0,1,-1,1,-1}; // direction of heartbeat loop
int myDelay[] = {0,500,1000,500,3000}; // delay in microseconds of a single step

void setup()
{
   pinMode(buttonPin, INPUT); // enable button pin for input
   // it's not necessary to enable the analog output
}

void loop()
{
   if(phase>0) heartbeat(); // if phase 1 to 4 beat, else steady
   buttonRead(); // test if button has been pressed
}

// heartbeat function - each time is executed, it advances only one step
// phase 1: the led is given more and more voltage till myPwm equals to maxPwm
// phase 2: the led is given less and less voltage till myPwm equals to zero
// phase 3: the led is given more and more voltage till myPwm equals to maxPwm
// phase 4: the led is given less and less voltage till myPwm equals to zero
void heartbeat() 
{
   myPwm += myDir[phase];
   analogWrite(greenPin, myPwm);
   delayMicroseconds(myDelay[phase]);
   if(myPwm==maxPwm||myPwm==0) phase = (phase%4)+1;
}

// buttonRead function - tests if the button is pressed; 
// if so, forces phase 0 (no beat) and enlightens the led to the maximum pwm
// and remains in "inoperative" state till the button is released
void buttonRead()
{
   if(digitalRead(buttonPin)!=buttonFlag)   // if button status changes (pressed os released)
   {
      buttonFlag = 1 - buttonFlag; // toggle button flag value
      if(buttonFlag) // if pressed, toggle between "beat" status and "steady" status
      {
         if(phase) myPwm = maxPwm; else myPwm = 0;
         phase = phase==0;
         analogWrite(greenPin, myPwm);
      }
   }
} 
```

如您所见，代码非常紧凑且执行速度很快。我将心跳循环分为四个“阶段”，由 myDelay 数组调节，其计数方向由 myDir 数组调节。如果没有任何反应，pwm led 引脚的电压在每一步都增加，直到达到 maxPwm 值，然后循环进入阶段 2，在此阶段电压减少到零，依此类推，实现原始心跳。

如果按下按钮，则环路进入零相（无心跳），并且 LED 会以 maxPwm 电压供电。从现在开始，循环保持稳定的 LED，直到释放按钮（这实现了“去抖动”算法）。如果再次按下按钮，buttonRead函数会重新启动心跳函数，使其再次进入阶段1，从而恢复心跳。

如果再次按下按钮，心跳停止，依此类推。完全没有任何兴奋或弹跳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T17:50:19.283

Arduino 确实只能使用 attachInterrupt 进行 2 个中断，但其他板如 Arduino Mega / Due / ... 有更多引脚可用于使用 attachInterrupt 进行中断。最重要的是，如果您使用直接寄存器写入（低级操作）而不是 attachInterrupts，您可以使用 Arduino Uno 上的任何数字输入进行中断处理。请参阅[https://thewanderingengineer.com/2014/08/11/arduino-pin-change-interrupts/以获得对引脚更改中断和](https://thewanderingengineer.com/2014/08/11/arduino-pin-change-interrupts/)[https://ukmars.org/projects/ukmarsbot/developer-notes/encoders](https://ukmars.org/projects/ukmarsbot/developer-notes/encoders-on-ukmarsbot/)的良好解释[-on-ukmarsbot/](https://ukmars.org/projects/ukmarsbot/developer-notes/encoders-on-ukmarsbot/)有关外部中断的信息。这种直接方法也比 attachInterrupt 更快，因此我可以将它与 Uno 一起使用，以计算高达 100kcounts/sec 的正交编码器输入，同时执行 pid 循环/串行通信等其他操作。在主循环中轮询数字线路是不可能的。

# c++ - 获取块设备 Linux/Windows 的大小

> ID：13583420
> 
> 赞同：1
> 
> 时间：2012-11-27T11:38:57.143
> 
> 标签：c++, linux, windows, qt

我的任务是获取块设备的大小，它必须是跨平台应用程序（Linux/Windows）所以我使用 Qt，我可以使用 Qt 标准类（如 QFile 和 QFileInfo）获取块设备的文件大小吗？我的草图程序无法正常工作：

```
#include <QtCore/QCoreApplication>
#include <iostream>
#include <QFileInfo>

int main(int argc, char *argv[])
{
   QCoreApplication a(argc, argv);
   QFileInfo info("/dev/sda5");
   if(info.isReadable())
       std::cout<<"/dev/sda1 isReadable\n";
   else
       std::cout<<"Cant read /dev/sda5";

   std::cout<<info.size()<<"\n";

   return a.exec();
} 
```

它显示“/dev/sda5 isReadable”并且大小为零，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:44:03.660

您必须[`statfs`](http://linux.die.net/man/2/statfs)在 Linux 和[`GetDiskFreeSpaceEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364937.aspx)Windows 上使用。Qt 似乎没有包装该函数，但它是一段相当短的代码。

设备节点通过通常的 stat 调用报告大小为零。这是事实，您对此无能为力。无论如何，这并不有趣，因为要找出哪个设备安装在某个路径上，需要做很多特定于 unix 的工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T14:14:36.267

在 Linux 方面，有两个实用程序可以帮助枚举附加的存储分区，具体取决于您的发行版： **blkid**和**vol_id**。我已经使用这些来识别 Samba 服务器设置脚本的可能分区（及其类型）。可以将他们的输出重定向到一个文本文件并在您的 C 代码中解析结果。HTH。

# c - 如何在 Cprogram 中显示当前时间，在 CodeVisionAVR 中编译

> ID：13583422
> 
> 赞同：0
> 
> 时间：2012-11-27T11:39:00.467
> 
> 标签：c

我正在尝试在 C 程序中显示当前时间。我正在使用 CodeVisionAVR 编译器。我有闲置代码

```
#include <time.h>
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <math.h>
#include <delay.h>

void continious(viod)
 {
 time_t now;
 time(&now);
 printf("%s", ctime(&now));

 ------------
 --------------
 }

 void runtime(viod)
 {
  unsigned char c; 
        c=getchar();      
    switch(C){
        case '1':
              continious();
        case '2':
        -----
        default:
     }

 int main (void){
       while (1){

        if(rx_counter0) runCom(); 
       }
      } 
```

上面的代码在添加时间函数之前正常执行现在我想包括当前时间，所以我已经尝试过。我想在输入 CASE'1' 时显示当前时间。我已经尝试了上面的代码，但问题是我收到了类似的错误

> 无法打开#include 文件：time.h

请任何人建议我如何克服这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:46:29.060

您正在为嵌入式平台编程，其库不包含`time.h`. 平台上可能也没有任何保证的时钟。

您需要调查您的硬件和库支持什么，或自行实现相关功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:55:18.097

**用TIME**查看它是一个宏常量。它适用于我不确定嵌入式系统的计算机的 C 编译器。

```
int main(){
    printf("%s",__TIME__);
    getch();
    return 0;
} 
```

# iphone - 在 iOS 中清除内存警告中的 url 缓存

> ID：13583423
> 
> 赞同：3
> 
> 时间：2012-11-27T11:39:06.960
> 
> 标签：iphone, ios, didreceivememorywarning, nsurlcache

`NSURLCache`收到内存警告时清除共享是一种好习惯吗？像这样的东西：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    [[NSURLCache sharedURLCache] removeAllCachedResponses];
} 
```

我是否正确地假设这也会不必要地清除磁盘缓存？

如果是这样，是否可以只清除内存缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-11T09:37:02.660

当出现内存警告时，您只需要清除内存缓存而不是磁盘缓存。问题`removeAllCachedResponses`是它会清除两者。从我的测试来看，这似乎只清除了内存缓存。

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {

    NSURLCache * const urlCache = [NSURLCache sharedURLCache];
    const NSUInteger memoryCapacity = urlCache.memoryCapacity;
    urlCache.memoryCapacity = 0;
    urlCache.memoryCapacity = memoryCapacity;
} 
```

我唯一关心的是线程问题。[本文](http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/)底部有一个脚注。

> StackOverflow 上有很多关于通过重新创建来清除 NSURLCache 的建议，但是，我们已经看到，当在重新创建缓存时另一个线程上发生请求时，这会导致偶尔崩溃。因此，我们的建议是在应用程序启动时创建一次缓存，并在适当的时候清除它。

上面的解决方案不会重新创建缓存，但是它可能仍然会遇到同样的问题，我没有对此进行广泛的测试。

# character-encoding - Outlook 页脚字符集 - 如何使用波兰语标志？

> ID：13583427
> 
> 赞同：0
> 
> 时间：2012-11-27T11:39:18.937
> 
> 标签：character-encoding, outlook, footer, polish

我在为我父亲的公司查看电子邮件时遇到了页脚问题。我已经设法让它看起来像我想要的那样，但我对波兰标志有问题。

这是代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250" />
<title>www.kssssssssssss.com</title>

</head>

<body lang="pl">
<table width="100%" align="center">
    <tr>
        <td colspan="4" style="width:100%; height:5px; background-color:#818285; font-size:5px; color:#818285;">Ksślłżżeęlłoó Ubezpieczenia</td>
    </tr>

    <tr style="color: #818285; padding:5px;" align="center">   

        <td width="20%"></td>
        <td align="right" width="24%">
                <div style="text-align:left; width:180px; right:0%; color:#818285;">

                <a style="color:#818285; text-decoration:none;" href="http://krSssssssssssss.com/o-nas" target="_blank">Marcjusz Ksślłżżeęlłoó</a><br>
                +48 500 000 000<br>
                <a style="color:#818285; text-decoration:none;" href="mailto:marcjusz@kSsssss.com">marcjusz@ssssssssssssss.com</a>
                </div>

        </td>    

        <td align="center" width="4%" style="font-size:2em; color:#818285;"></td>

        <td align="left" width="52%">
            <a style="color:#818285; text-decoration:none; border:none;" href="http://sssssssssss.com/" target="_blank"><img src="http://ssssssssssss.pl/tem/logo-poziom300.jpg"></a>
        </td>

    </tr>

    <tr><td colspan="4" style="font-size:11px; background-color:#818285; color:#FFF;    text-align:center; padding: 5px; ">
        <span> sślłżżeęlłoó Ubezpieczenia Sp.J. &nbsp;|&nbsp; 31-475 Krak&oacute;w ul. STREET 1 &nbsp;|&nbsp; 32-700 Bochnia ul. STREET 2 &nbsp;|&nbsp; 32-800 Brzesko ul. STREET 3 &nbsp;|&nbsp; <a style="color:#FFF; text-decoration:none;" href="http://ksssssssssssy.com/" target="_blank">www.sssssssss.etc.com</a></span>
    </td></tr>
</table>

</body>
</html> 
```

这里看起来如何（不好的迹象）： ![http://oi45.tinypic.com/2d1s6c4.jpg](../Images/d883a3971de70d05ca540ae6cbbd05f8.png) 我能用它做什么？为什么它不能正常工作？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:24:37.800

如果字符不经常出现（例如，在英语消息中的波兰语符号中，与完全用波兰语的消息相反），那么您可以在使用 HTML 格式时使用字符引用。例如，“ś”是`&#x15b;`或等价地，`&#347;`。您可以在 Alan Wood 的[Latin Extended-A](http://www.alanwood.net/unicode/latin_extended_a.html)页面上找到您需要的字符编号。这些引用独立于字符编码工作。

警告：HTML5 草稿包含一长串“命名字符引用”，例如`&sacute;`. 它们看起来更容易记忆，但它们是最近的发明，不受 2011 年之前的软件支持。

PS我不知道为什么直接使用字符会失败，但我怀疑它们是使用声明的字符编码（windows-1250）以外的字符编码（例如UTF-8）输入到文档中的。但是使用字符引用可以避免此类问题。

# jython - 如何使用 Jython 设置 WebSphere 7 中的“使用单元的节点名称为新别名添加前缀”？

> ID：13583437
> 
> 赞同：2
> 
> 时间：2012-11-27T11:39:54.470
> 
> 标签：jython, websphere-7

在 WebSphere 7（修订包 25）中，我想设置以下值：

'用单元的节点名称为新别名添加前缀'

不幸的是，在使用 WebSphere 'Integrated Solutions Console' 时，这似乎没有使用管理脚本记录下来。

有人可以让我知道如何使用 jython 设置此设置。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T17:38:35.783

我不知道如何直接设置属性，但是您可以通过另一种方式获得您正在寻找的行为。您可以使用 AdminConfig.create，而不是使用 AdminTask.createAuthDataEntry。

`security = AdminConfig.getid('/Cell:'+AdminControl.getCell()+'/Security:/') AdminConfig.create('JAASAuthData',security, [["alias", "aliasWithoutPrefix"],["userId", "myUser"],["password", "myPassword"]])`

这将创建一个别名为“aliasWithoutPrefix”的 J2C 身份验证条目。

希望这可以帮助！

# matplotlib - y-log 比例中的 matplotlib stepfilled hist 无法正确显示

> ID：13583443
> 
> 赞同：4
> 
> 时间：2012-11-27T11:40:07.570
> 
> 标签：matplotlib, histogram

当使用 histt​​ype='stepfilled' 和 log=True 两个选项时，我在 matplotlib 中显示直方图时遇到问题。我在 matplotlib 版本 1.1.0 中遇到了这个问题，发现这仍然存在于版本 1.2.0 中。

不幸的是，我无权发布图片，但您可以使用以下简单代码检查此行为：

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt

mu, sigma = 200, 25
x = mu + sigma*np.random.randn(10000)
n, bins, patches = plt.hist(x, 50, normed=1, histtype='bar',log=True)
plt.savefig("test1.png")
plt.clf()
n, bins, patches = plt.hist(x, 50, normed=1, histtype='stepfilled',log=True)
plt.savefig("test2.png") 
```

第一个图正确显示，而在第二种情况下，使用选项 histt​​ype='stepfilled' 而不是 'bar'，没有。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:51:45.887

如果你使用

```
plt.hist(x, 50, normed=1, histtype='stepfilled')
plt.semilogy() 
```

您会得到预期的结果，但需要注意的是，对于零值的 bin，它看起来很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:26:47.337

这是 matplotlib 中的一个开放错误。也许您可以模拟`stepfilled`操纵第一个图形中条形的样式。

github上的问题：

*   [https://github.com/matplotlib/matplotlib/issues/196](https://github.com/matplotlib/matplotlib/issues/196)

# asp.net-mvc-4 - 在 ASP.NET MVC 4 中以 HTML 4 呈现 SSRS 报告

> ID：13583444
> 
> 赞同：1
> 
> 时间：2012-11-27T11:40:13.643
> 
> 标签：asp.net-mvc-4, ssrs-2008

根据[http://msdn.microsoft.com/en-us/library/ms365156.aspx#Features](http://msdn.microsoft.com/en-us/library/ms365156.aspx#Features)上的列表，在使用高级服务运行 SQL Server Express 2008 R2 时，应该可以在 HTML 4 中呈现 SSRS 报告。但是，当我尝试这样做时，我得到了一个 ReportProcessingException。

真的可以这样做还是MSDN文章中的信息不正确？我可以毫无困难地导出到其他列出的格式，但由于某种原因，它不适用于 HTML40。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:00:31.040

危机解除！我刚刚忘记在 4 和 0 之间加一个点！:) 我们这些在导出 SSRS 报告时遇到奇怪问题的人可能想查看 C:\program files\microsoft sql server\MSRS10_50.SQLEXPRESS\Reporting Services\ReportServer 中的 rsreportserver.config，该部分包含所有可用的渲染扩展您，尽管其中一些将无法使用，具体取决于您运行的 SQL Server 版本。msdn.microsoft.com/en-us/library/ms365156.aspx#Features 有一个按版本列出的功能限制列表。

# android - 调用 onDoubleTapEvent 时如何排除 onTouch 方法（在网格视图中）？

> ID：13583447
> 
> 赞同：2
> 
> 时间：2012-11-27T11:40:23.813
> 
> 标签：android, events, double, ontouchlistener, tap

我需要一个日历网格视图上的触摸监听器。它应该有一个 onTouch 方法来从日历上拖动获取数据，以及一个 onDoubleTapEvent 来删除条目。我还实现了自定义类 MyGestureListener，它扩展了 SimpleOnGestureListener 来执行此操作。部分代码如下所示：

```
calendarGridView.setOnTouchListener(new MyGestureListener(getApplicationContext()) {
    //Touch Listener on every gridcell
    public boolean onTouch(View v, MotionEvent event) {
    super.onTouch(v, event);
        ....
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN: {
            ....
            }
            case MotionEvent.ACTION_UP : {
            ....
            }
            case MotionEvent.ACTION_CANCEL: {
            ....
            }
        }
   //Save the data
   return true;
   }

   public boolean onDoubleTapEvent(MotionEvent event) {
   .... //delete the entry, save data
   return true;
   } 
```

自定义手势监听类：

```
public class MyGestureListener extends SimpleOnGestureListener implements OnTouchListener{

Context context;
GestureDetector gDetector;

public MyGestureListener(Context context) {
    super();

    if (gDetector == null) {
        gDetector = new GestureDetector(context, this);
    }
    this.context = context;
}

public MyGestureListener(Context context, GestureDetector gDetector) {

    if (gDetector == null) {
        gDetector = new GestureDetector(context, this);
    }
    this.context = context;
    this.gDetector = gDetector;
}

public boolean onTouch(View v, MotionEvent event) {

    return gDetector.onTouchEvent(event);
}

public GestureDetector getDetector() {

    return gDetector;
} 
```

}

这里的问题是，当我双击日历单元格时，它会调用 onDoubleTapEvent，但也会调用 onTouch 方法（考虑 ACTION_DOWN、ACTION_UP 和 ACTION_DOWN、ACTION_UP）。我怎样才能将它们分开？

# delphi - 如何将 ScanLine 属性用于 24 位位图？

> ID：13583451
> 
> 赞同：35
> 
> 时间：2012-11-27T11:40:30.090
> 
> 标签：delphi, image-processing

如何使用[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性进行 24 位位图像素操作？为什么我更喜欢使用它而不是经常使用的[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)属性？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-27T11:40:30.090

## 一、简介

在这篇文章中，我将尝试解释[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)仅适用于 24 位位图像素格式的属性用法以及您是否确实需要使用它。首先看看是什么让这个属性如此重要。

## 2\. ScanLine 与否...？

您可以问自己为什么要使用像使用[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性这样的棘手技术，因为您可以简单地使用[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)来访问位图的像素。答案是即使在相对较小的像素区域上执行像素修改时也会出现明显的性能差异。

该[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)属性在内部使用 Windows API 函数 -[`GetPixel`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144909%28v=vs.85%29.aspx)和[`SetPixel`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145078%28v=vs.85%29.aspx), 用于获取和设置设备上下文颜色值。技术上的性能不足[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)是您通常需要在修改它们之前获取像素颜色值，这在内部意味着调用两个提到的 Windows API 函数。该[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性赢得了这场比赛，因为它提供了对存储位图像素数据的内存的直接访问。直接内存访问比两个 Windows API 函数调用快。

但是，这并不意味着该[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)属性是完全不好的，并且您应该避免在所有情况下使用它。例如，当您偶尔只修改几个像素（不是大区域）时，[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)这对您来说可能就足够了。但是，当您要使用像素区域进行操作时，请不要使用它。

## 3\. 像素深处

### 3.1 原始数据

位图的像素数据（我们现在称它们为*原始数据*）您可以将其想象为一维字节数组，其中包含每个像素的颜色分量的强度值序列。位图中的每个像素都由固定数量的字节组成，具体取决于使用的像素格式。

例如，对于红色、绿色和蓝色通道，24 位像素格式的每个颜色分量都有 1 个字节。下图说明了如何想象这种 24 位位图的*原始数据字节数组。*这里的每个彩色矩形代表一个字节：

![24 位位图的原始数据示例](../Images/a2e0d353784339da30eecce86b9c4ca0.png)

### 3.2 案例研究

想象一下，您有一个 24 位 3x2 像素（宽 3 像素；高 2 像素）的位图并将其牢记在心，因为我将尝试解释一些内部结构并展示其[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性使用原理。它是如此之小，只是因为内部深视图需要空间（对于那些有明亮视线的人来说，这里是 png 格式的此类图像的绿色示例 ↘ ![在此处输入图像描述](../Images/06066443468555a7faa327eb861d953e.png)↙ :-)

### 3.3 像素构成

首先让我们看看我们的位图图像的像素数据是如何在内部存储的；看看*原始数据*。下图显示了*原始数据*字节数组，您可以在其中看到我们的小位图的每个字节及其在该数组中的索引。您还可以注意到，3 个字节的组如何形成单个像素，以及这些像素位于我们的位图上的哪些坐标上：

![案例研究位图的原始数据数组](../Images/1f742285beddce18bd21b698eaad2f64.png)

相同的另一个视图提供了以下图像。每个框代表我们想象中的位图的一个像素。在每个*像素中，您可以从**原始数据*字节数组中看到其坐标和 3 字节组及其索引：

![案例研究位图的原始像素插图](../Images/54a8808f43a1efe95a5c8d75e552cb67.png)

## 4\. 与色彩共存

### 4.1。初始值

我们已经知道，我们虚构的 24 位位图中的像素由 3 个字节组成 - 每个颜色通道有 1 个字节。当您在想象中创建此位图时，所有像素中的所有这些字节都已违背您的意愿初始化为最大字节值 - 255。这意味着所有通道现在都具有最大颜色强度：

![初始通道值](../Images/11536edc79efca9e50973f1ce62d8bfb.png)

当我们看一下每个像素的这些初始通道值混合了哪种颜色时，我们会看到我们的位图是[`entirely white`](http://www.wolframalpha.com/input/?i=R=255;%20G=255;%20B=255). 因此，当您在 Delphi 中创建 24 位位图时，它最初是白色的。好吧，默认情况下，白色将是每种像素格式的位图，但它们的初始*原始数据*字节值可能不同。

## 5\. ScanLine的秘密生活

通过以上阅读，我希望您了解位图数据是如何存储在*原始数据*字节数组中的，以及这些数据是如何形成单个像素的。现在继续讨论[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性本身以及如何在直接*原始数据*处理中发挥作用。

### 5.1。扫描线用途

这篇文章的主菜，[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性，是一个只读索引属性，它返回指向*原始数据*字节数组的第一个字节的指针，该数组属于位图中的指定行。换句话说，我们请求访问给定行的*原始数据*字节数组，我们收到的是指向该数组第一个字节的指针。此属性的 index 参数指定我们要获取这些数据的行的基于 0 的索引。

下图说明了我们想象的位图和我们[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)使用不同行索引的属性获得的指针：

![具有不同参数的 ScanLine 调用](../Images/f0300056f1da48c2a7de3ca3331b218b.png)

### 5.2\. 扫描线优势

所以，据我们所知，我们可以总结一下，它[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)给了我们一个指向某个行数据字节数组的指针。*使用原始数据*的行数组，我们可以工作 - 我们可以读取或覆盖它的字节，但只能在特定行的数组边界范围内：

![扫描线行数组](../Images/764fe3547dae6c55272c9a28c64e4792.png)

好吧，我们有一个特定行的每个像素的颜色强度数组。考虑这种数组的迭代；将这个数组循环一个字节并仅调整一个像素的 3 个颜色部分中的一个会不太舒服。更好的是循环遍历像素并在每次迭代时一次调整所有 3 个颜色字节 - 就像[`Pixels`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCustomCanvas.Pixels)我们过去所做的那样。

### 5.3\. 跳过像素

为了简化行数组循环，我们需要一个与像素数据匹配的结构。幸运的是，对于 24 位位图，有这样的[`RGBTRIPLE`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162939%28v=vs.85%29.aspx)结构。在 Delphi 中翻译为`TRGBTriple`. 简而言之，这个结构看起来像这样（那里的每个成员代表一个颜色通道的强度）：

```
type
  TRGBTriple = packed record
    rgbtBlue: Byte;
    rgbtGreen: Byte;
    rgbtRed: Byte;
  end; 
```

由于我试图容忍那些 Delphi 版本低于 2009 的人，并且因为它使代码在某种程度上更易于理解，所以我不会使用指针算法进行迭代，而是在以下示例中使用带有指向它的指针的固定长度数组（指针在下面的 Delphi 2009 中，算术的可读性会降低）。

所以，我们有`TRGBTriple`一个像素的结构，现在我们为行数组定义一个类型。这将简化位图行像素的迭代。这是我刚从 ShadowWnd.pas 单元借来的（无论如何，这是一个有趣的课程的所在地）。这里是：

```
type
  PRGBTripleArray = ^TRGBTripleArray;
  TRGBTripleArray = array[0..4095] of TRGBTriple; 
```

如您所见，它的一行限制为 4096 像素，对于通常较宽的图像来说应该足够了。如果这对您来说还不够，只需增加上限。

## 6\. 实践中的扫描线

### 6.1。将第二行设为黑色

让我们从第一个例子开始。我们将想象的位图具体化，将其设置为适当的宽度、高度和像素格式（或者，如果您愿意，可以设置位深度）。然后我们使用[`ScanLine`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)行参数 1 来获取指向第二行的*原始数据*字节数组的指针。我们得到的指针我们将分配给`RowPixels`指向数组的变量`TRGBTriple`，所以从那时起我们可以把它当作一个行像素数组。然后我们在位图的整个宽度上迭代这个数组，并将每个像素的所有颜色值设置为 0，这导致位图的第一行为白色（默认情况下为白色，如上所述）以及使第二行变为黑色的原因. 然后将这个位图保存到文件中，但是当你看到它时不要感到惊讶，它真的很小：

```
type
  PRGBTripleArray = ^TRGBTripleArray;
  TRGBTripleArray = array[0..4095] of TRGBTriple;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  Bitmap: TBitmap;
  Pixels: PRGBTripleArray;
begin
  Bitmap := TBitmap.Create;
  try
    Bitmap.Width := 3;
    Bitmap.Height := 2;
    Bitmap.PixelFormat := pf24bit;
    // get pointer to the second row's raw data
    Pixels := Bitmap.ScanLine[1];
    // iterate our row pixel data array in a whole width
    for I := 0 to Bitmap.Width - 1 do
    begin
      Pixels[I].rgbtBlue := 0;
      Pixels[I].rgbtGreen := 0;
      Pixels[I].rgbtRed := 0;
    end;
    Bitmap.SaveToFile('c:\Image.bmp');
  finally
    Bitmap.Free;
  end;
end; 
```

### 6.2\. 使用亮度的灰度位图

作为一个有意义的例子，我在这里发布了一个使用亮度对位图进行灰度化的过程。它使用从上到下的所有位图行的迭代。然后为每一行获得指向*原始数据*的指针，并像以前一样作为像素数组。然后通过以下公式计算该阵列的每个像素的亮度值：

```
Luminance = 0.299 R + 0.587 G + 0.114 B 
```

然后将此亮度值分配给迭代像素的每个颜色分量：

```
type
  PRGBTripleArray = ^TRGBTripleArray;
  TRGBTripleArray = array[0..4095] of TRGBTriple;

procedure GrayscaleBitmap(ABitmap: TBitmap);
var
  X: Integer;
  Y: Integer;
  Gray: Byte;
  Pixels: PRGBTripleArray;
begin
  // iterate bitmap from top to bottom to get access to each row's raw data
  for Y := 0 to ABitmap.Height - 1 do
  begin
    // get pointer to the currently iterated row's raw data
    Pixels := ABitmap.ScanLine[Y];
    // iterate the row's pixels from left to right in the whole bitmap width
    for X := 0 to ABitmap.Width - 1 do
    begin
      // calculate luminance for the current pixel by the mentioned formula
      Gray := Round((0.299 * Pixels[X].rgbtRed) +
        (0.587 * Pixels[X].rgbtGreen) + (0.114 * Pixels[X].rgbtBlue));
      // and assign the luminance to each color component of the current pixel
      Pixels[X].rgbtRed := Gray;
      Pixels[X].rgbtGreen := Gray;
      Pixels[X].rgbtBlue := Gray;
    end;
  end;
end; 
```

以及上述程序的可能用法。请注意，您只能将此过程用于 24 位位图：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Bitmap: TBitmap;
begin
  Bitmap := TBitmap.Create;
  try
    Bitmap.LoadFromFile('c:\ColorImage.bmp');
    if Bitmap.PixelFormat <> pf24bit then
      raise Exception.Create('Incorrect bit depth, bitmap must be 24-bit!');
    GrayscaleBitmap(Bitmap);
    Bitmap.SaveToFile('c:\GrayscaleImage.bmp');
  finally
    Bitmap.Free;
  end;
end; 
```

## 7.相关阅读

*   [Leonel Togniolli：如何使用扫描线](http://edn.embarcadero.com/article/29173)
*   [Earl F. Glynn：使用 Delphi 的 ScanLine 属性操作像素](http://www.efg2.com/Lab/ImageProcessing/Scanline.htm)

# iphone - 动画不能与 UIIView 子类一起播放（DrawRect 方法）

> ID：13583455
> 
> 赞同：2
> 
> 时间：2012-11-27T11:40:35.287
> 
> 标签：iphone, objective-c, animation, uiview, drawrect

我有一个带有 Tap 手势识别器的视图。当我触摸它时，会出现一个修改背景颜色的动画。我的问题是，当我将我的视图子类化以覆盖 drawRect 方法时，我的动画不再播放......我该如何解决这个问题？对不起我的英语并提前感谢=）

```
- (void)drawRect:(CGRect)rect
  {

    [super drawRect:rect];

    NSLog(@"DrawRect test");
    //H Black line
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGFloat black[4] = {0.0f, 0.0f, 0.0f, 0.5f};
    CGContextSetStrokeColor(c, black);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 319.0f, 0.0f);
    CGContextAddLineToPoint(c, 319.0f, 55.0f);
    CGContextStrokePath(c);

    //H White Line
    c = UIGraphicsGetCurrentContext();
    CGFloat white[4] = {1.0f, 1.0f, 1.0f, 0.1f};
    CGContextSetStrokeColor(c, white);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 0.0f, 1.0f);
    CGContextAddLineToPoint(c, 320.0f, 1.0f);
    CGContextStrokePath(c);

    //V White Line
    c = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColor(c, black);
    CGContextBeginPath(c);
    CGContextMoveToPoint(c, 0.0f, 54.0f);
    CGContextAddLineToPoint(c, 320.0f, 54.0f);
    CGContextStrokePath(c);
} 
```

还有我的动画：

```
 //Debut
if (sender.state == UIGestureRecognizerStateBegan) {
    [UIView animateWithDuration:0.7 animations:^{
        [self.foreView setBackgroundColor:RGBA(RED_CELL, GREEN_CELL, BLUE_CELL, 0.6f)];
    }];
}

//Fin
if (sender.state == UIGestureRecognizerStateEnded) {
    [UIView animateWithDuration:0.4 animations:^{
        [self.foreView setBackgroundColor:[UIColor clearColor]];
    }];
} 
```

我的子视图是如何添加的

```
 //foreView
    _foreView  = [[ForeViewCell alloc] initWithFrame:CGRectMake(0, 0, 320, 55)];
    [self.foreView setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.foreView setBackgroundColor:[UIColor clearColor]];
    [self.contentView addSubview:self.foreView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:28:18.070

尝试更换

```
[self.foreView setBackgroundColor:RGBA(RED_CELL, GREEN_CELL, BLUE_CELL, 0.6f)];
[self.foreView setBackgroundColor:[UIColor clearColor]]; 
```

至

```
[self.foreView.layer setBackgroundColor:[RGBA(RED_CELL, GREEN_CELL, BLUE_CELL, 0.6f) CGColor]];
[self.foreView.layer setBackgroundColor:[[UIColor clearColor] CGColor]]; 
```

# python - 在浏览器中运行 python cgi 脚本没有错误

> ID：13583458
> 
> 赞同：0
> 
> 时间：2012-11-27T11:40:41.797
> 
> 标签：python, browser, cgi, http-status-code-404

我正在尝试在**localhost**上运行它。一个简短的介绍。我在发布之前阅读过的一些链接： [如何运行 Python CGI 脚本](https://stackoverflow.com/questions/7929848/how-to-run-python-cgi-script) [如何在我的 Web 服务器上运行 Python CGI 脚本？](https://stackoverflow.com/questions/6611608/how-can-i-run-python-cgi-scripts-on-my-web-server) 最精确：[需要帮助配置 apache 服务器以运行用 Python 编写的 CGI 脚本](https://stackoverflow.com/questions/8044232/need-help-to-configure-apache-server-to-run-cgi-script-written-in-python) 以及官方[http://httpd.apache.org/docs/1.3/misc/FAQ.html#CGIoutsideScriptAlias](http://httpd.apache.org/docs/1.3/misc/FAQ.html#CGIoutsideScriptAlias) [http://www.editrocket.com/文章/python_apache_windows.html](http://www.editrocket.com/articles/python_apache_windows.html) 和其他...

* * *

他们建议为 .cgi 和 .py 脚本配置 Apache 的所有步骤：1）

> 安装 libapache2-mod-wsgi

[完成] 2) 检查脚本是否可执行并且可用于 apache ~$ ls -lah /var/www/cgi-bin/cgi101.py

```
-rwxrwxr-x 1 user user 318 2012-11-27 03:03 /var/www/cgi-bin/cgi101.py 
```

3）编辑/etc/apache2/sites-available/default[**更新为实际**]：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
#   <Directory /var/www>
    <Directory /var/www/cgi-bin>
        Options Indexes FollowSymLinks MultiViews ExecCGI
        AllowOverride None
        Order allow,deny
        allow from all
        AddHandler cgi-script .cgi .py
#       AddHandler wsgi-script .wsgi
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

或与

```
<Directory /var/www/cgi-bin> 
```

然后重新启动 Apache

```
sudo /etc/init.d/apache2 restart 
```

最后，尝试脚本。像[**更新为实际**]：

```
#!/usr/bin/python3

import cgi
form = cgi.FieldStorage()
# parse form data
print('Content-type: text/html\n')
# hdr plus blank line
print('<title>Reply Page</title>')
# html reply page
if not 'user' in form:
  print('<h1>Who are you?</h1>')
else:
  print('<h1>Hello <i>%s</i>!</h1>' % cgi.escape(form['user'].value)) 
```

在输出我得到

> **404 未找到**

错误。什么？我已经尝试过和/var/www。还有我到 python3 的 python 路径：

```
~$ ls -lah /usr/bin/python*
...
lrwxrwxrwx 1 root root    9 2011-10-05 23:53 /usr/bin/python3 -> python3.2
lrwxrwxrwx 1 root root   11 2012-10-20 06:17 /usr/bin/python3.2 -> python3.2mu
-rwxr-xr-x 1 root root 2.8M 2012-10-20 06:17 /usr/bin/python3.2mu
... 
```

这就是我使用的原因

```
#!/usr/bin/python3 
```

提前致谢！

* * *

[**更新**] /var/log/apache2/error.log

```
[Tue Nov 27 13:47:56 2012] [error] [client 127.0.0.1] script not found or unable to stat: /usr/lib/cgi-bin/script.py, referer: http://localhost/cgi1$ 
```

为什么它在 /usr/lib/ 中寻找 script.py ？

* * *

[**更新**]我在阅读台词时闭上了眼睛

```
 ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin"> 
```

它必须是 /var/www/cgi-bin 中可执行 .cgi 或 .py 的路径。谢谢埃弗特和大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:55:15.603

猜测一下，您的脚本在`/var/www/cgi-bin/cgi101.py`.

但是你的 Apache 配置有这个：

```
ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory> 
```

并在那里添加`AddHandler`指令：

```
ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
        AddHandler cgi-script .cgi .py
    </Directory> 
```

（也许删除这个上面的部分，用于`/var/www`目录。）

然后，我会将您的脚本放在`/usr/lib/cgi-bin/cgi101.py`，然后再试一次。

[Apache 教程](http://httpd.apache.org/docs/2.2/howto/cgi.html)似乎对此非常清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:51:43.780

首先，您必须确保您的脚本可以由 Python/OS 运行。在您的情况下，您尝试使用 Python3，我看到您使用旧形式的`print`. 对于 Python3，您必须使用`print()`as 函数。当您尝试从命令行执行脚本时，您的脚本必须运行。确保它具有`execute`属性。

当您的脚本将从命令行运行时，您可以尝试通过 CGI 运行它。遇到问题时检查`http`服务器日志。他们可能会在`/var/log/http`而且应该有`error.log`。核实。

还要确保您的文件使用 unix 类型的 EndOfLine，即仅 LF，而不是来自 DOS/Windows 的 CRLF。如果您使用 CRLF，则第一行（shebang）已损坏。

此外，您必须使用空行将 HTTP 标头与内容分开。所以而不是

```
print("Content-Type: text/html") 
```

采用：

```
print("Content-Type: text/html\n") 
```

# javascript - jQuery javascript - scrollTop 动画

> ID：13583459
> 
> 赞同：0
> 
> 时间：2012-11-27T11:40:45.760
> 
> 标签：javascript, jquery, jquery-animate, scrolltop

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<script src="jquery.js"></script>
<script type="text/javascript">
    var index = "index";
    var park = "park";
    $(document).ready(function() {
        $("button").click(function() {
            url="http://openAPI.seoul.go.kr:8088/4150495f32313037XXXXX/json/SearchParkInfoService/1/20"
            $.getJSON(url,function(result) {
                var jsonObject = result.SearchParkInfoService;
                var totalCount = jsonObject.list_total_count;
                var row = jsonObject.row;
                document.write("<span id='topOfArticle'><b>원하는 공원을 목록에서 찾아보세요~</b></span>");
                document.write("<form> <select name = 'parkList'>");
                for (var i = 0 ; i < row.length ; i++) {
                    document.write("<option value = '" + row[i].P_IDX + "'>" + row[i].P_PARK + "</option>");
                }
                document.write("</select><input type='button' value='보러가기' onClick='checkIt(this.form)'>");
                for (var i = 0 ; i < row.length ; i++) {
                    document.write("<p id=" + row[i].P_IDX + "><h3><b>" + (i+1) + ". " + row[i].P_PARK + " (공원번호 " + row[i].P_IDX + ")</b></h3></p>");
                    document.write("<p><img src='" + row[i].P_IMG + "' width=150px border=1dp></p>");
                    document.write("<b>공원 설명 : </b><blockquote>" + row[i].P_LIST_CONTENT + "</blockquote>");
                    document.write("<p><b>위치(GRS80TM) : </b>경도 " + row[i].G_LONGITUDE + " / 위도 " + row[i].G_LATITUDE + "</p>");
                    document.write("<p><b>위치(WGS84) : </b>경도 " + row[i].LONGITUDE + " / 위도 " + row[i].LATITUDE + "</p>");
                    document.write("<p><b>주소 : </b>" + row[i].P_ADDR + "</p>");
                    document.write("<p><a href=http://maps.google.com/maps/api/staticmap?center="+row[i].LATITUDE+","+row[i].LONGITUDE+"&zoom=14&size=400x400&markers=color:blue%7Clabel:S%7C"+row[i].LATITUDE+","+row[i].LONGITUDE+"&sensor=true target=_blank> 지도에서 찾아보기(Google Maps) </a></p>");
                    document.write("<p><b>지역 및 관리부서 : </b>" + row[i].P_ZONE + " " + row[i].P_DIVISION + "</p>");
                    document.write("<p><b>전화번호 : </b>" + row[i].P_ADMINTEL + "</p>");
                    document.write("<font align='right'><a href='#top'> Top으로 가기 </a></font>");
                    document.write("<hr color=#cd67ff>");
                }
            });
        });
    });

    function checkIt(form) {
        var targetOffset = $(form.parkList.selectedIndex+1).offset().top;
        $('html, body').animate({scrollTop:targetOffset}, 'fast');
    }

</script>
</head>
<body>
    <h2>서울시 공원 정보를 조회하세요!</h2>
    <button>정보보러 가긔~</button>
</body>
</html> 
```

我想单击按钮“보러가기”，一个选项值按钮，然后滚动到同一窗口中的 selectedIndex 列表。

在`function checkIt(from)`,

有错误，

```
Uncaught TypeError: Cannot read property 'top' of undefined. 
```

我不知道我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:44:59.027

错误是说`$(form.parkList.selectedIndex+1)`未定义，即它为空。尝试在其中设置一个断点，看看选择器是否返回任何内容。我也认为你可以使用`offsetTop()`而不是`offset().top`，但我不是 100% 的。

`$('#'+form.parkList.selectedIndex+1)`如果您尝试按 id 或`$('.'+form.parkList.selectedIndex+1)`按类选择，您可能还想尝试类似的方法。也可能是您想要类似的东西：

```
var index = form.parklist.selectedIndex+1;
$('#list').eq(index) ... 
```

等等，如果你试图选择列表中的第 n 个元素。

# ssh - 作曲家回归？？？在 CloudLinux 上 ssh

> ID：13583461
> 
> 赞同：0
> 
> 时间：2012-11-27T11:40:50.663
> 
> 标签：ssh, cloud-hosting, composer-php

我刚刚通过 ssh 在 CloudLinux 服务器上安装了作曲家，但它返回？？？使用时。我安装了它

```
curl -s getcomposer.org/installer | php -d detect_unicode=Off 
```

因为我的服务器显然有`detect_unicode=On`

这基本上就是我打字时吐出的内容`php composer.phar`

```
????username@myserver.com [~/public_html/somefolder] 
```

我是不是忘记了什么？这是因为`detect_unicode`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:20:12.467

这是因为detect_unicode。您很可能不需要此设置，并且启用它会破坏 phar 处理。

# php - 在数据库的 mediumblob 文件中搜索单词？

> ID：13583467
> 
> 赞同：0
> 
> 时间：2012-11-27T11:40:58.670
> 
> 标签：php, database, file, search

我的数据库中有：

```
name               mime        size       data

Untitled.txt     text/plain    bigint(20)    Mediumblob 
```

我想在我的文件中搜索我为搜索命令获得的单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:53:02.997

也许从数据库中提取文件并使用 fopen/fread 函数。

添加一个文本格式的新列可能会更好。因此，在添加记录时，请使用 fopen/fread 从文件中获取数据并将其插入到 TEXT 列中。然后通过该字段进行搜索。

```
SELECT * FROM table WHERE textmime LIKE '%searchinput%' 
```

其中“textmime”是存储文件文本版本的列。

只是一个想法

# oracle - ODP.net（负整数）主键唯一约束（PK_X）违反

> ID：13583469
> 
> 赞同：1
> 
> 时间：2012-11-27T11:41:00.153
> 
> 标签：oracle, odp.net, negative-number

尝试插入记录时

*2，'测试'*

在下表中

*CREATE TABLE X (ID INT NOT NULL CONSTRAINT PK_X PRIMARY KEY,DESCRIPTION CHAR(10) NOT NULL) /*

其中有这些记录：

*-1, 'A'

-2，“乙”

1, 'C'*

Oracle.DataAccess.Client.OracleException ORA-00001: 在 Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean 处违反了唯一约束 (X.PK_X) b检查）

看起来消极的 id 与积极的 id 发生冲突。如果删除 -2 记录，则不会抛出错误。

上述错误仅发生在 ODP.NET 上，并且与 Microsoft Oracle 提供商一起工作正常

数据库是Oracle 11g，程序在c#.Net v3.5上运行

任何解决方案/修复？

PS：以上数据及名称均为样本。此外，以上描述了桌子设计等方面的实际要求，因此请不要建议更改这些内容。

# android - 锚定 PopupWindow 和 SOFT_INPUT_ADJUST_RESIZE android

> ID：13583473
> 
> 赞同：4
> 
> 时间：2012-11-27T11:41:20.770
> 
> 标签：android, popupwindow

我有一个 PopupWindow 锚定在一个按钮（在顶部）。PopupWindow 包含一个 ScrollView。PopupWindow 处于 SOFT_INPUT_ADJUST_RESIZE 模式并使用偏移量定位

代码 ：

```
 window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
    window.showAtLocation(parent, Gravity.NO_GRAVITY, xPos, yPos); 
```

屏幕 ：

[基本画面 http://imageshack.us/a/img38/7771/basescreen.png](http://imageshack.us/a/img38/7771/basescreen.png)

当软键盘出现时，我有这个（顶部按钮被隐藏）：

[我有什么屏幕 http://imageshack.us/a/img21/6396/whatihavescreen.png](http://imageshack.us/a/img21/6396/whatihavescreen.png)

我想拥有：

PopupWindow 锚定在 Button 上并调整大小。

[我有什么屏幕 http://imageshack.us/a/img805/3302/whatiwantscreen.png](http://imageshack.us/a/img805/3302/whatiwantscreen.png)

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:16:09.187

自己的努力......这不是我开发的最佳解决方案，但无论如何......它有效......

**第 1 部分：**当软键盘出现时调整 PopupWindow 的大小

*   在内容视图上使用 OnGlobalLayoutListener

    ```
    contentView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        int baseHeight = 0;

        @Override
        public void onGlobalLayout() {
            if(resized) {
                return;
            }
            if(baseHeight <= 0) {
                baseHeight = contentView.getHeight();
                return;
            }

            final int diff = baseHeight - contentView.getHeight();
            if(diff > 0) {
                // keyboard is visible
                window.update( - 1, baseHeight - diff - yPos);
                resized = true;
            }
        }
    }); 
    ```

完成此操作后，即使 SoftKeyboard 隐藏，PopupWindow 也会保持调整大小。GlobalLayout 事件不会被触发，因为 PopupWindow 较小。

**第 2 部分：**使用假的 PopupWindow 来了解 SoftKeyboard 是否隐藏（脏 :()

*   用真实的 PopupWindow 高度构建假的 PopupWindow
*   当真人被解雇时，不要忘记解雇假人
*   在真品之前展示假货

    ```
    buildFakePopupWindow(rootHeight);
    window.setOnDismissListener(new OnDismissListener() {

        @Override
        public void onDismiss() {
            if(fakeWindow != null) {
                fakeWindow.dismiss();
            }
        }
    });
    fakeWindow.showAtLocation(parent, Gravity.NO_GRAVITY, xPos, yPos); 
    ```

*   在假的上注册一个 GlobalLayoutListener

    ```
     final View fakeContentView = fakeWindow.getContentView();
    fakeContentView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        int baseHeight = 0;

        @Override
        public void onGlobalLayout() {
            if(baseHeight <= 0) {
                baseHeight = fakeContentView.getHeight();
                return;
            }
            final int diff = baseHeight - fakeContentView.getHeight();
            if(diff <= 0 && resized) {
                window.update( - 1, WindowManager.LayoutParams.WRAP_CONTENT);
                resized = false;
            }
        }
    }); 
    ```

**我很确定这是一个肮脏的解决方案，但我没有找到另一种方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:41:21.720

就像我说的，有一个更简单的解决方案：`showAsDropDown`. 当软键盘出现时，此方法可以完成工作......

与之相比，唯一需要改变的`showAtLocation`是 xoff 和 yoff 计算。

# php - 处理静态但可扩展列表的最佳方法

> ID：13583476
> 
> 赞同：0
> 
> 时间：2012-11-27T11:41:28.267
> 
> 标签：php, mysql, database-design

我的数据库结构是这样的：

```
'Article'
 title
 text
 user_id
 language_id

 'User'
 id
 language_id

 'language'
 id
 language name 
```

使用 mysql 数据库管理这样的语言列表是一种好习惯吗？

我是一名设计师，但据我所知，减少对数据库的查询会更好。由于语言或多或少是静态的，逐渐扩展，但会在网站上的几个地方加载（用户选项、撰写文章、更改网站语言等），我认为我的结构很糟糕。我不知道如何把它拉下来，也不知道它会如何取代我当前的列表。我在想JSON。

在开始重写所有内容之前，我想得到某种确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:47:50.683

我能看到的唯一问题是：如果用户用一种以上的语言写作怎么办？如果是这种情况，您不应该将语言 ID 存储在用户表中，因为查询 Article 表以查找用户撰写文章的所有语言会更简单：

```
'Article'
 id
 title
 text
 user_id
 language_id

 'User'
 id

 'Language'
 id
 language name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:45:35.797

这完全取决于翻译列表的大小。最快的解决方案是将语言存储在文件中，并根据用户的选择包含正确的文件。

编辑：我可能完全误解了这一点。我的印象是您正在构建一个翻译列表，以便用户可以选择以不同语言查看网站。你需要澄清。

# json - 当浏览器中的网页加载时，我如何以及在哪里应用日志来检查 JSON 文件是否被加载？

> ID：13583478
> 
> 赞同：2
> 
> 时间：2012-11-27T11:41:34.360
> 
> 标签：json

当浏览器中的网页加载时，我如何以及在哪里应用日志来检查 JSON 文件是否被加载？

我正在使用浏览器：- Firefox / Internet Explorer

我必须在哪个代码或文件中应用“console.log”？

我的页面是静态的。

# c# - C# 中的命名空间和子命名空间

> ID：13583480
> 
> 赞同：5
> 
> 时间：2012-11-27T11:41:44.133
> 
> 标签：c#, namespaces

初学者关于 C# 的问题。

在每个程序中，我必须包含几个命名空间，例如：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text; 
```

为什么我必须包括：

```
using System.Collections.Generic;
using System.Linq;
using System.Text; 
```

...因为它们包含在第一个中：

```
using System; 
```

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T11:43:53.550

因为嵌套命名空间不包含在父命名空间中。有关详细信息，请参阅[使用指令](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)文档

> **using**指令不允许您访问嵌套在您指定的命名空间中的任何命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:44:47.920

`System`和`System.IO`命名空间是不同的。

您可以将“子命名空间”视为对象模型中的父子关系。如果您可以访问“汽车”对象并不意味着您可以访问汽车的车轮。

`System`是一个巨大的命名空间，包含数百个嵌套的命名空间和数千个类。您应该分别指定所有嵌套的命名空间，以说明您对模块的哪一部分感兴趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T11:45:12.737

`System`并且`System.Text`是两个不同的命名空间。这`System.Text`似乎`System`是我们作为程序员投入其中的语义的一部分。从平台视图来看，没有嵌套命名空间之类的东西。

但即使不是这样，如果你有

```
namespace MySystem{
   namespace Foo{
       class Bar {...}
   }

   class Bar{...}
}

using MySystem;
class MyClass{
    private Bar _myBar; //Which one is it MySystem.Foo.Bar or MySystem.Bar?     
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T11:47:52.240

想象这些命名空间与这些类（姓氏是一个类）：

*   `A.B.Class1`
*   `A.Class2`

**现在您有以下内容：**

`using A` - 允许您直接引用 Class2……但不能引用 Class1。

`using A.B`- 允许您直接引用 Class1 而不是 Class2。

如果你想在你的代码中直接引用这两个类，你需要两个 using。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:44:23.023

由于您是初学者，让我澄清一下`namespace`C# 和`package`Java 中的一件事是不同的。无需合并它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T11:52:52.863

并非 .net 中的所有类都在一个大容器中。这样做会增加类名冲突的机会，并且一开始看起来并不好。命名空间是试图保持库清洁并更有意义的容器。拥有一个FTP 类和 String 类放在一个容器下在逻辑上没有任何意义。它们做两种不同的事情，它们应该放在不同的容器中。

命名空间也可以嵌套。有时命名空间可以只有另一个命名空间，没有任何类。所以要访问一个类，您需要先限定完整的命名空间，然后才能使用它。

在您的情况下，您使用不同的类，它们位于不同的容器上。因此，如果您需要它们，则需要使用它们的命名空间来限定它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T11:53:11.117

只是一个附加的例子，让你清楚地理解。

不能通过调用父命名空间来访问子命名空间

```
Namespace Main  //only code and classes are accessible
{
  //code for Main Namespace
  Namespace subMain     //only code and classes are accessible
  {
     //code for subMain
     Namespace verySubMain  //only code and classes are accessible
     {
        //code for verySubMain
     }
     Namespace otherVerySubMain  //only code and classes are accessible
     {
        //code for otherVerySubMain
     }
  }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-27T11:52:17.097

如果您想在不使用 using 语句的情况下访问 System.Text 中的类，则每次您希望使用它时都必须输入 Text."Name of class/function"。

这样你就可以调用“类/函数的名称”。

不确定您是否是初学者，但这是我能描述的最简单的方式。

# objective-c - IOS 6 和 NSDateFormatter

> ID：13583481
> 
> 赞同：5
> 
> 时间：2012-11-27T11:41:47.700
> 
> 标签：objective-c, ios, ios6, nsdateformatter

这是代码：

```
NSString * str = @"2012-11-23Fri09:00:00+0100";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
NSLocale *locale= [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[formatter setLocale:locale];

[formatter setDateFormat:@"yyyy-MM-ddEEEHH:mm:ssZ"];

NSDate *result = [formatter dateFromString:str];
NSLog(@"str :%@ -- NSDate :%@", str, result); 
```

这是输出：

```
str :2012-11-23Fri09:00:00+0100 -- NSDate :1999-12-31 08:00:00 +0000 
```

为什么`NSDate`错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:54:08.420

请参阅此链接，这可能会对您有所帮助，

[OS X v10.8 和 iOS 6.0 中的格式化程序](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)

[iOS 5.0-5.1 中的格式化程序](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)

谢谢，

纳文山

# android - 如何通过 android 应用程序将带有 url 的消息发送到 twitter 帐户？

> ID：13583485
> 
> 赞同：3
> 
> 时间：2012-11-27T11:42:02.863
> 
> 标签：android, twitter, message

我需要通过应用程序向用户的 Twitter 朋友发送带有 URL 链接的直接消息。该消息未使用我当前的代码成功发送：

```
 public void sendTwitterfriends()
 {
     HttpClient httpClient = new DefaultHttpClient();
     HttpPost request = new HttpPost("https://api.twitter.com/1/direct_messages/new.format");
     List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                    postParameters.add(new BasicNameValuePair("user_id", "friendsuserid"));
      postParameters.add(new BasicNameValuePair("text", "Hi Testing"));
      try {
          UrlEncodedFormEntity entity = new UrlEncodedFormEntity(postParameters);
          request.setEntity(entity);       
          HttpResponse response= httpClient.execute(request);
      }catch (Exception e) {
                // TODO: handle exception
      }
} 
```

谢谢

# parallel-processing - 并行python中的缓存错误

> ID：13583486
> 
> 赞同：1
> 
> 时间：2012-11-27T11:42:03.813
> 
> 标签：parallel-processing, python-2.7, parallel-python

使用并行 python 模块时，我遇到了透明缓存问题。我更改了由并行代码调用的模块中的方法签名。当我执行代码时，它给了我一个错误，说它需要旧的方法签名。

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/ppworker.py", line 90, in run
    __result = __f(*__args)
  File "<string>", line 12, in run_grn
TypeError: __init__() takes at most 2 arguments (3 given) 
```

我删除了 .pyc 文件，以防它正在使用它们，但仍然没有乐趣。当我将模块重命名为其他内容时，它又开始工作了，所以我只能假设并行 python 正在某处存储模块的旧副本。我检查了文档，但它没有提到缓存是如何工作的。有什么办法可以清除缓存吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:39:06.557

更新：经过一番挖掘，我发现它在 dist-packages 文件夹中复制了我的文件，并且没有覆盖它（可能是因为权限）。当我删除文件时，解决了问题

# android - 如何通过 Google Cloud Messaging (GCM) 触发推送通知？

> ID：13583487
> 
> 赞同：1
> 
> 时间：2012-11-27T11:42:05.533
> 
> 标签：android, google-cloud-messaging

我有Android客户端，用户与另一个用户（或X用户）交谈，并且收到的每条新消息都会被通知“新消息到达”。消息在PHP Web服务器中管理，该服务器应该将通知发送到客户端Android。

我一直在使用 Google Cloud Messaging，它通过 Google 的服务器通过我们的网络服务器将请求推送到我们的客户端 Android。这项工作似乎很简单。

问题是：**我们的网络服务器如何在适当的时候“唤醒”并发送通知？做这个的最好方式是什么？**

如果用户 X 有新消息通知，服务器应该如何激活？

除了在服务器上进行轮询之外，我无法想象一种基本的方法！任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:58:45.187

看到这是完整的教程

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

```
and 
```

[http://developer.android.com/guide/google/gcm/gcm.html#arch](http://developer.android.com/guide/google/gcm/gcm.html#arch)

谢谢

当设备 Y 启动应用程序时，第一次调用服务将 dev.ID 保存到服务器。现在，将 dev.Id 与每条消息一起发送到服务器。在服务器上，当消息将收到带有 dev.Id 和消息的通知时。

# svn - Hgsubversion：没有可用的兼容绑定

> ID：13583492
> 
> 赞同：3
> 
> 时间：2012-11-27T11:42:30.900
> 
> 标签：svn, mercurial, hgsubversion

我必须将我的工作签入到一个主要的 svn 存储库中，所以我必须为 Mercurial 设置 hgsubversion 插件。没关系，我从 bitbucket 克隆了插件，添加了 [extensions] hgsubversion = /path/to/hgsubversion，但是当我想使用它时，出现以下错误：

```
abort: no compatible bindings available:

Subversion 1.5.0 or later required, but no bindings were found
Subvertpy 0.7.4 or later required, but 0.7.3 found

Please install either Subvertpy or the Subversion Python SWIG bindings! 
```

我的工作站使用 SVN 1.6.1，昨天系统管理员为我安装了最新的 subverpty (0.9.0) 数据包。

我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:30:52.017

这个问题的答案可能与您的设置相当具体。

首先，一些上下文：尽管 Mercurial 是用 Python 编写的，但它并不完全依赖`PYTHONPATH`于查找其库的常规逻辑。相反——为了更像一个普通的实用程序——安装的脚本将修改 Python`sys.path`以确保包含 Mercurial 库的目录首先出现。因此，如果 Mercurial 扩展程序尝试导入第三方库，它将首先找到与 Mercurial 安装在同一位置的库。

那么，谁安装了 Mercurial 和 Subvertpy 0.7.3？也许它们都来自 中的系统包`/usr`，并且 Subvertpy 0.9.0 是定制并安装到的`/usr/local`？如果是这样，请让您的管理员卸载 Subvertpy 0.7.3。

或者，您可以要求管理员为 Subversion 安装常规 (SWIG) 绑定。对于长时间运行的转换，它们会稍微慢一些并泄漏内存，但除此之外它们应该可以正常工作。

# vb.net - 更改富文本框中的行或单词的颜色？

> ID：13583494
> 
> 赞同：3
> 
> 时间：2012-11-27T11:42:38.700
> 
> 标签：vb.net, colors, richtextbox, richtext

我可以更改一行和/或一个单词的颜色，以保留richtextbox 中的其他颜色吗？

例如，我想将“Processing: ...”行更改为黄色，这可能吗？

谢谢你的阅读

![在此处输入图像描述](../Images/25b02e980f96091542aff25a3f440a84.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-14T19:43:37.253

这可能有点晚了，但是您需要做的就是将 selectioncolor 设置为您想要的颜色，然后再将文本附加到richtextbox，然后再恢复为原始颜色，例如

```
With RichTextBox1
  .SelectionColor = Color.Yellow
  .AppendText("Processing: ")
  .SelectionColor = Color.LimeGreen
  .AppendText("el senor de los anillakos.avi" & vbCr)
End With 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T11:48:12.130

这希望应该为您解决问题，例如，如果该行包含`"Processing..."`

```
 for(int i=0; i<rtb.Lines.Length; i++) 
{ 
   string text = rtb.Lines[i];
   rtb.Select(rtb.GetFirstCharIndexFromLine(i), text.Length); 
   rtb.SelectionColor = colorForLine(text); 
} 

private Color colorForLine(string line)
{
    if(line.Contains("[Processing...]", StringComparison.InvariantCultureIgnoreCase) return Color.Green; 
```

顺便说一句，我知道您说这是针对 vb.net，但您应该能够使用转换器将您的代码转换为 vb.net 这是一个链接

[C# 到 VB](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

我不知道这是否正确，但我认为它在 vb 中看起来有点像这样

```
Private Sub Test()
    For Each i As Integer In RichTextBox1.Lines.Length

        Dim Text As String = RichTextBox1.Lines(i)
        RichTextBox1.Select(RichTextBox1.GetFirstCharIndexFromLine(i), Text.Length)
        RichTextBox1.SelectionColor = ColorForLine(Text)
    Next
End Sub

Private Function ColorForLine(Line As String) As color
    If Line.Contains("Processing", ) Then
        Return ColorForLine.Green
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-18T23:15:16.997

我意识到这是较旧的，但是当我需要类似的解决方案时，AltF4_ 提出的 vb.net 代码不起作用，因此我对其进行了修改以使其起作用。ColorForLine 函数提供了运行多个测试并根据所需内容返回多种颜色的能力。

```
Private Sub CheckLineColorsOfRichTextBox1()
    Dim i As Integer = 0
    For Each Line As String In RichTextBox1.Lines
        RichTextBox1.Select(RichTextBox1.GetFirstCharIndexFromLine(i), Line.Length)
        RichTextBox1.SelectionColor = ColorForLine(Line)
        i += 1
    Next
End Sub
Private Function ColorForLine(Line As String) As Color
    If Line.Contains("Processing: ") Then
        Return Color.Yellow
    Else
        Return Color.LimeGreen
    End If
End Function 
```

# interop - 解决跨项目的互操作依赖关系

> ID：13583496
> 
> 赞同：1
> 
> 时间：2012-11-27T11:42:42.917
> 
> 标签：interop, ninject, excel-interop

另一个电报式的问题。首先，我的 NinjectModule：

```
using Ninject.Modules;
using Microsoft.Office.Interop.Word;

namespace NinjectSample.Util.Injection
{
    public class SampleModule : NinjectModule
    {
        public override void Load()
        {
            Bind<_Application>().ToMethod(ctx => GetApp());
        }

        public _Application GetApp()
        {
            return new Application();
        }
    }
} 
```

第一件事（有效！）：

```
 IKernel kernel = new StandardKernel(new SampleModule());
        var foo = kernel.Get<_Application>(); 
```

将此更改为

```
 IKernel kernel = new StandardKernel(new SampleModule());
        var foo = kernel.Get<BusinessClass>(); 
```

`BusinessClass`在另一个程序集中定义，代码：

```
namespace BusinessClassLibrary
{
    public class BusinessClass
    {
        private _Application _app;

        [Inject]
        public BusinessClass(_Application application)
        {
            _app = application;
        }
    }
} 
```

这将导致：

```
Error activating _Application
No matching bindings are available, and the type is not self-bindable.
Activation path:
  2) Injection of dependency _Application into parameter application of constructor of type BusinessClass
  1) Request for BusinessClass

Suggestions:
  1) Ensure that you have defined a binding for _Application.
  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
  3) Ensure you have not accidentally created more than one kernel.
  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
  5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

我对互操作并不太了解，但我对 .Net 的基本了解让我偶然发现了以下内容：

*   `Application`是一个接口，就像它的 base 一样`_Application`。尽管如此，还是可以调用它的构造函数。为什么？

*   我告诉 Ninject 使用工厂方法，当依赖项位于定义内核的程序集中时，这似乎可以工作。为什么当它位于另一个程序集中时，它会尝试通过自绑定来解决依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:51:51.310

> Application 是一个接口，就像它的基础 _Application 一样。尽管如此，还是可以调用它的构造函数。为什么？

这是一个编译器技巧；有关正在发生的事情的信息，请参阅[在 C# 中创建接口实例。](https://stackoverflow.com/questions/2482508/creating-instance-of-interface-in-c-sharp)当您在代码中遇到它时，它肯定看起来很奇怪。不幸的是，目前无法帮助您解决问题的实际 Ninject 部分。

# java - 如何与 Eclipse 中的菜单进行比较

> ID：13583498
> 
> 赞同：2
> 
> 时间：2012-11-27T11:42:42.783
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我正在尝试为 Eclipse 中的 Compare With 菜单贡献一个动作，但我找不到用于我的动作的`menuPath`.

1.  与菜单比较的 id 是什么？
2.  如果你想为一个菜单项贡献一个动作，你如何找到其他 id？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:20:04.227

“比较”的 menuPath 是`menu:compareWithMenu?`Use Plugin Spy to find menu-IDs，它是快捷方式`Shift`+ `Alt`+`F2`

# caching - Nginx，如果未设置，如何添加标头

> ID：13583501
> 
> 赞同：15
> 
> 时间：2012-11-27T11:42:48.883
> 
> 标签：caching, header, nginx, http-headers

我只想`Cache-control`在未设置的情况下在 nginx 中添加标头（）。

在某些情况下，我需要通过 nginx 中的标头增加缓存时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-06-26T14:07:37.713

您可以使用`map`来填充变量`$cachecontrol`。如果`$http_cache_control`（来自客户端的标头）为空，则设置自定义值。否则（默认）重用来自客户端的值。

```
map $http_cache_control $cachecontrol {
    default   $http_cache_control;
    ""        "public, max-age=31536000";
} 
```

之后，您可以使用该变量发送上游标头。

```
proxy_set_header X-Request-ID $cachecontrol; 
```

* * *

[对于jmcollin92](https://stackoverflow.com/users/1616656/jmcollin92)的后续问题，我在 SO 文档中写了以下内容，现在转录在这里。

# X-请求-ID

## nginx

反向代理可以检测客户端是否提供 X-Request-ID 标头，并将其传递给后端服务器。如果没有提供这样的标头，它可以提供一个随机值。

```
map $http_x_request_id $reqid {                                                 
    default   $http_x_request_id;                                               
    ""        $request_id;                                                      
} 
```

上面的代码将请求 ID 存储在变量`$reqid`中，随后可以在日志中使用它。

```
log_format trace '$remote_addr - $remote_user [$time_local] "$request" '        
                 '$status $body_bytes_sent "$http_referer" "$http_user_agent" ' 
                 '"$http_x_forwarded_for" $reqid'; 
```

它还应该传递给后端服务

```
location @proxy_to_app {
    proxy_set_header X-Request-ID $reqid;
    proxy_pass   http://backend;
    access_log /var/log/nginx/access_trace.log trace;
} 
```

# visual-studio-2010 - 附加到进程：断点不会被命中。没有为此文档加载任何符号

ID：13583502

赞同：4

时间：2012-11-27T11:42:57.113

标签：visual-studio-2010, debugging, attach-to-process

# neo4j - neo4j 不在密码中重用现有顶点创建唯一查询

> ID：13583504
> 
> 赞同：0
> 
> 时间：2012-11-27T11:43:13.720
> 
> 标签：neo4j, cypher

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:25:32.413

第一个问题是您正在属性图中构建属性图。这是可能的，但很尴尬，并不总是一个好的选择。

你的例子： [http ://console.neo4j.org/r/evl77k](http://console.neo4j.org/r/evl77k)

如果理解正确，您希望能够更改值节点并重新使用相同的属性节点，对吗？

问题在于，在您的第二个查询中，您要求 Cypher 查找具有与图中已有属性不同的属性的值节点。Cypher 找不到这样的节点，因此为您创建了一个。然后它会尝试从新创建的节点中找到传出的 ATTRIBUTE 关系，当然它没有找到任何关系。所以它为你创造了一个新的关系和属性。

如果您想继续使用相同的属性节点，您只需从值节点中省略属性值，如下所示：

```
START  o=node(0) 
CREATE UNIQUE o-[:VALUE]->(v)-[:ATTRIBUTE]->(a {name:'Colour'}) 
SET    v.value = 'Green' 
RETURN v 
```

这将找到您的颜色属性节点，然后为您设置属性，而不是每次都创建新路径。

说得通？

安德烈斯

# android - Android，Phonegap - 在建议列表播放商店搜索框中找不到我的应用程序名称

> ID：13583506
> 
> 赞同：1
> 
> 时间：2012-11-27T11:43:30.133
> 
> 标签：android, cordova

我们的应用程序未在 Play 商店建议框中列出，当我输入匹配的关键字时，它会返回一些与该键匹配的其他应用程序名称。

例如：当我输入关键字“easym”时，它会在搜索框中建议一些其他应用程序名称。但我的应用程序没有在那里列出。请找到随附的屏幕截图。[检查附加的图像链接](http://i.stack.imgur.com/oNSxK.png)

我厌倦了 android sony xperia(version 4), android samsung(2.3,2.2) & 在 google play store 也[玩 store link](https://play.google.com/store/)

# c# - 在 PictureBox 图像上使用线程绘图

> ID：13583510
> 
> 赞同：1
> 
> 时间：2012-11-27T11:43:38.903
> 
> 标签：c#, multithreading, gdi

我正在尝试使用线程在 PictureBox 中的图像上绘制多个椭圆，但是当我与表单交互（例如移动它）时，GDI 会在我克隆当前图像时抛出 InvalidOperationException （当前正在使用的对象）线。

我想要实现的是能够在画布上为一些形状设置动画，并让用户在与表单交互（以及放大图像等）时获得流畅的体验。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:57:37.183

在与 PictureBox 交互之前，您可能需要调用 BeginInvoke 以进入 GUI 线程。

像这样...

```
form.BeginInvoke(ManipulatePictureBox); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:10:30.280

保留与后台线程交互的单独图像，然后在有新内容要显示时将其克隆到 UI 线程。克隆应该通过 BeginInvoke 完成

# android - 如何通过一个 apk 安装两个实例？

> ID：13583511
> 
> 赞同：2
> 
> 时间：2012-11-27T11:43:42.580
> 
> 标签：android, android-install-apk

我为android开发了一个应用程序，但是我需要安装它的两个实例，一个用于我的日常使用，另一个用于调试/开发，我没有太多用于调试的手机，只有一部手机，不想要在模拟器上调试，因为它与真实手机相比太慢了。

或者有什么我们可以在 APK 文件上更改的东西，然后我们可以将它安装为另一个应用程序，例如更改它的包名？

目前，我在代码中更改了包名，然后将它们制作成两个应用程序，可以安装在同一部手机上，但这种方式不方便。寻求简单的方法。

更新：是否有任何工具可以在打包（apk 文件）之后直接修改 androidmanifest.xml 中的包名？然后我们只需要解压缩apk，修改androidmanifest.xml，再次压缩apk。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:49:38.110

你自己已经回答了这个问题。您必须更改清单中的包名称，否则 Android 将覆盖旧应用程序（或无法安装，如果证书不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:00:24.360

尝试从资源文件夹 @string/app_name 更改 strings.xml 中的应用程序名称，以拥有同一应用程序的多个实例。并且必须更改包名称，以免覆盖现有应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:00:50.890

我会将原始应用程序设为库项目并创建一个使用库项目的新项目。

优势：

*   你可以同时运行，因为你的新项目应该有不同的包名
*   通过覆盖新项目中的应用程序名称轻松识别（只需向其添加“beta”）
*   两个版本都可以并行安装在一个设备/模拟器上
*   如果您尝试验证应用程序的更新过程，则设置非常好
*   不会与版本控制系统混淆 - 重命名包会导致开发分支发生可怕的非实际更改

坏处：

*   您需要先“取消选中”库设置，然后才能发布原始项目
*   您可能需要更改两个清单文件中的一些内容，这将以较小的方式提高可维护性

如果您确实需要在您的设备上安装应用程序的市场版本，则此方法是最简单的方法，因为包重命名很可能会导致更差的可维护性。

*编辑*：

您可以将项目标记为`project preferences -> Android`. 之后，您可以将该库项目链接到同一位置的另一个普通 android 项目，只需单击`add`按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:06:35.283

您可以复制您的项目并更改副本中的包名称。您可以使用相同的 SVN 路径将更改应用于两个项目。

或者，您可以使用带有参数的 ANT build.xml 文件自动执行不同的构建。在 Google 中有几个关于如何为 Android 执行此操作的示例。ref:[一个 android 应用程序，一个启动视图，两个图标](https://stackoverflow.com/q/13491909/1817673)

# signals - 如何将我的 m 文件粘贴到 simulink 中？

> ID：13583514
> 
> 赞同：1
> 
> 时间：2012-11-27T11:43:48.683
> 
> 标签：signals, simulink, matlab

我创建了一个程序并想在`simulink`. 我怎样才能将我的粘贴`m-file`到`simulink`？

该程序外推输入信号。

```
Input: N-vector (need to collect N values ​​of input signal)
Output: number (value of input function in future) 
```

然后重复；

我怎样才能得到`N-vector`离散`signal`化时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:46:07.543

2010b之后的simulink中有一个块叫做“嵌入式matlab代码”，你可以在里面定义一个典型的matlab函数，运行simulink的每一个计算步骤。那是你需要的吗？我认为你也可以给你一个“启用”信号块（如果没有，手动做一个输入）只在你想要的时候运行你的代码。希望能帮助到你

# java - 在Java中加入两个数组？

> ID：13583521
> 
> 赞同：17
> 
> 时间：2012-11-27T11:44:08.057
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中连接两个数组？](https://stackoverflow.com/questions/80476/how-to-concatenate-two-arrays-in-java)

我有两个对象

```
HealthMessage[] healthMessages1;
HealthMessage[] healthMessages2;

HealthMessage[] healthMessagesAll;

healthMessages1 = x.getHealth( );   
healthMessages2 = y.getHealth( ); 
```

我应该如何加入这两个对象，所以我只能返回一个：

```
return healthMessagesAll; 
```

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-27T11:47:50.777

使用 Apache Commons Collections API 是一个好方法：

```
healthMessagesAll = ArrayUtils.addAll(healthMessages1,healthMessages2); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-27T11:47:04.060

我会分配一个总长度为`healthMessages1`and的数组，`healthMessages2`并使用`System.arraycopy`or 两个`for`循环来复制它们的内容。这是一个示例`System.arraycopy`：

```
public class HelloWorld {

     public static void main(String []args) {

        int[] a = new int[] { 1, 2, 3};
        int[] b = new int[] { 3, 4, 5};
        int[] r = new int[a.length + b.length];
        System.arraycopy(a, 0, r, 0, a.length);
        System.arraycopy(b, 0, r, a.length, b.length);

        // prints 1, 2, 3, 4, 5 on sep. lines
        for(int x : r) {
            System.out.println(x);
        }            
     }         
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-27T11:53:52.603

这写起来更直观，您不必处理数组索引：

```
Collection<HealthMessage> collection = new ArrayList<HealthMessage>();
collection.addAll(Arrays.asList(healthMessages1));
collection.addAll(Arrays.asList(healthMessages2));

HealthMessage[] healthMessagesAll = collection.toArray(new HealthMessage[] {}); 
```

..但不要问我与..相比它的表现`System.arraycopy`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-27T12:51:27.443

我会去`System.arraycopy`

```
private static HealthMessage[] join(HealthMessage[] healthMessages1, HealthMessage[] healthMessages2)
{
    HealthMessage[] healthMessagesAll = new HealthMessage[healthMessages1.length + healthMessages2.length];

    System.arraycopy(healthMessages1, 0, healthMessagesAll, 0, healthMessages1.length);
    System.arraycopy(healthMessages2, 0, healthMessagesAll, healthMessages1.length, healthMessages2.length);

    return healthMessagesAll;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:51:04.567

数组是固定长度的，因此您有多种选择。这里有一对：

a）创建一个具有其他大小的新数组并手动复制所有元素。

```
healthMessagesAll = new HealthMessage[healthMessages1.length + healthMessages2.length];
int i = 0;
for (HealthMessage msg : healthMessases1)
{
   healthMessagesAll[i] = msg;
   i++;
}

for (HealthMessage msg : healthMessages2)
{
   healthMessagesAll[i] = msg;
   i++;
} 
```

b) 使用[Arrays](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)类提供的方法。您可以将数组转换为列表，或批量复制元素。查看它提供的功能并选择适合您的功能。

**更新**

看到你关于重复的评论。你可能想把所有东西都放在一个[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)保证唯一性的地方。如果两次添加相同的元素，则不会添加第二次。然后，如果您明确需要具有自己`toArray()`方法的数组，则可以将 Set 转换回数组。

正如其他受访者所建议的那样，[System.arraycopy()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)也可以帮助您复制元素的内容，因此它是我上面的替代方案 (a) 的较短版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T12:04:51.907

对于最复杂但最不占用内存的解决方案，您可以将它们包装在一个对象中。这个提供了一个`Iterator<T>`跨越所有项目的`copyTo`方法和一种复制到新数组的方法。它可以很容易地增强以提供 getter 和 setter。

```
public class JoinedArray<T> implements Iterable<T> {
  final List<T[]> joined;

  // Pass all arrays to be joined as constructor parameters.
  public JoinedArray(T[]... arrays) {
    joined = Arrays.asList(arrays);
  }

  // Iterate across all entries in all arrays (in sequence).
  public Iterator<T> iterator() {
    return new JoinedIterator<T>(joined);
  }

  private class JoinedIterator<T> implements Iterator<T> {
    // The iterator across the arrays.
    Iterator<T[]> i;
    // The array I am working on. Equivalent to i.next without the hassle.
    T[] a;
    // Where we are in it.
    int ai;
    // The next T to return.
    T next = null;

    private JoinedIterator(List<T[]> joined) {
      i = joined.iterator();
      a = nextArray();
    }

    private T[] nextArray () {
      ai = 0;
      return i.hasNext() ? i.next() : null;
    }

    public boolean hasNext() {
      if (next == null) {
        // a goes to null at the end of i.
        if (a != null) {
          // End of a?
          if (ai >= a.length) {
            // Yes! Next i.
            a = nextArray();
          }
          if (a != null) {
            next = a[ai++];
          }
        }
      }
      return next != null;
    }

    public T next() {
      T n = null;
      if (hasNext()) {
        // Give it to them.
        n = next;
        next = null;
      } else {
        // Not there!!
        throw new NoSuchElementException();
      }
      return n;
    }

    public void remove() {
      throw new UnsupportedOperationException("Not supported.");
    }
  }

  public int copyTo(T[] to, int offset, int length) {
    int copied = 0;
    // Walk each of my arrays.
    for (T[] a : joined) {
      // All done if nothing left to copy.
      if (length <= 0) {
        break;
      }
      if (offset < a.length) {
        // Copy up to the end or to the limit, whichever is the first.
        int n = Math.min(a.length - offset, length);
        System.arraycopy(a, offset, to, copied, n);
        offset = 0;
        copied += n;
        length -= n;
      } else {
        // Skip this array completely.
        offset -= a.length;
      }
    }
    return copied;
  }

  public int copyTo(T[] to, int offset) {
    return copyTo(to, offset, to.length);
  }

  public int copyTo(T[] to) {
    return copyTo(to, 0);
  }

  @Override
  public String toString() {
    StringBuilder s = new StringBuilder();
    Separator comma = new Separator(",");
    for (T[] a : joined) {
      s.append(comma.sep()).append(Arrays.toString(a));
    }
    return s.toString();
  }

  public static void main(String[] args) {
    JoinedArray<String> a = new JoinedArray<String>(
            new String[]{
              "One"
            },
            new String[]{
              "Two",
              "Three",
              "Four",
              "Five"
            },
            new String[]{
              "Six",
              "Seven",
              "Eight",
              "Nine"
            });
    for (String s : a) {
      System.out.println(s);
    }
    String[] four = new String[4];
    int copied = a.copyTo(four, 3, 4);
    System.out.println("Copied " + copied + " = " + Arrays.toString(four));

  }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-27T11:52:35.663

沿着这条路怎么办：

```
 List<String> l1 = Arrays.asList(healthMessages1);
    l1.addAll(Arrays.asList(healthMessages2));
    HealthMessage[] result = l1.toArray(); 
```

（需要一点泛化... :)

# r - 使用函数 duplicated() 时为重复的 NA 值返回 FALSE

> ID：13583523
> 
> 赞同：10
> 
> 时间：2012-11-27T11:44:12.283
> 
> 标签：r, comparison, duplicates, missing-data

只是想知道为什么重复的行为与 NA 的行为方式相同：

```
> duplicated(c(NA,NA,NA,1,2,2))
[1] FALSE  TRUE  TRUE FALSE FALSE  TRUE 
```

实际上在哪里

```
> NA == NA
[1] NA 
```

有没有办法像这样实现重复的标记 NAs 为假？

```
> duplicated(c(NA,NA,NA,1,2,2))
[1] FALSE  FALSE  FALSE FALSE FALSE  TRUE 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-27T11:52:57.270

您可以像这样使用`incomparables`函数的参数`duplicated`：

```
> duplicated(c(NA,NA,NA,1,2,2))
[1] FALSE  TRUE  TRUE FALSE FALSE  TRUE
> duplicated(c(NA,NA,NA,1,2,2),incomparables=NA)
[1] FALSE FALSE FALSE FALSE FALSE  TRUE 
```

它确定无法比较的值（在这种情况下`NA`）并返回`FALSE`这些值。也可以看看`?duplicated`

# spring - Spring annotations - @Configuration 调用 spring bean 自动构建

> ID：13583524
> 
> 赞同：4
> 
> 时间：2012-11-27T11:44:13.540
> 
> 标签：spring, spring-annotations

如果我使用@Bean 声明一个类，然后对该类进行组件扫描，spring 将通过调用它的构造函数并注入构造函数参数并注入任何标有@Inject 的字段来实例化该类。为简单起见，我们将此称为 spring 自动构建。

我不喜欢组件扫描并希望完全避免它（我不想讨论我不喜欢它的原因）。我想改用 @Configuration 对象，但仍然希望我可以使用自动构建功能。是否可以调用 spring 来自动构建我的对象，而不是显式地传递我的 @Configuration 对象中的所有构造函数参数？

假设我有一个 bean：

```
public class MyServiceImpl implements MyService {
    public MyServiceImpl(Dependency1 d1, Dependency d2) { ... }
    ....
} 
```

我可以像这样定义一个配置对象：

```
@Configuration
public class MyConfiguration {
    // lets assume d1 and d2 are defined in another @Configuration
    @Inject
    Dependency1 d1; 

    @Inject
    Dependency2 d2;

    @Bean
    public MyService myService() { 
        // I dislike how I have to explicitly call the constructor here
        return new MyServiceImpl(d1, d2);
    }
} 
```

但是现在，我必须自己明确地调用 MyServiceImpl 构造函数，所以我必须不断更新它，因为我的构造函数会随着时间的推移而发生变化。

我希望我可以声明一个抽象方法，以便可以进行春季自动构建：

```
@Configuration
public abstract class MyConfiguration {
    @Bean
    public abstract MyServiceImpl myService();
} 
```

但这不起作用。***有没有一种方法可以在不***使用组件扫描的情况下调用 spring 自动构建？

在 Google Guice 中，这可以通过 Binder 完成： [https ://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Binder.html](https://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Binder.html)

在 Tapestry IOC 中，这可以通过 ServiceBinder 完成： http: [//tapestry.apache.org/ioc-cookbook-basic-services-and-injection.html#IoCCookbook-BasicServicesandInjection-SimpleServices](http://tapestry.apache.org/ioc-cookbook-basic-services-and-injection.html#IoCCookbook-BasicServicesandInjection-SimpleServices)

**更新**

根据 spod 的回答，我能够实现我所追求的（谢谢！）。为任何想要做同样事情的人提供测试用例：

```
import java.util.Date;
import javax.inject.Inject;
import junit.framework.Assert;
import org.junit.Test;
import org.springframework.beans.factory.config.AutowireCapableBeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

public class AutoBuildConfigurationTest {
    @Configuration
    public static class MyConfiguration {
        @Inject
        private AutowireCapableBeanFactory beanFactory;

        @Bean
        public Date date() {
            return new Date(12345);
        }

        @Bean
        public MyService myService() {
            return autoBuild(MyService.class);
        }

        protected <T> T autoBuild(Class<T> type) {
            return type.cast(beanFactory.createBean(type, AutowireCapableBeanFactory.AUTOWIRE_CONSTRUCTOR, true));
        }
    }

    public static class MyService {
        private Date date;

        public MyService(Date date) {
            this.date = date;
        }

        public Date getDate() {
            return date;
        }
    }

    @Test
    public void testAutoBuild() {
        ApplicationContext appContext = new AnnotationConfigApplicationContext(MyConfiguration.class);
        MyService myService = appContext.getBean(MyService.class);
        Assert.assertEquals(12345, myService.getDate().getTime());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T12:30:05.410

基于 java 的容器配置不依赖于以任何方式进行组件扫描。它只是基于 XML 的组件配置的不同方法。使用 XML 配置，您只需要使用 MyServiceImpl 类声明您的 bean，以防它已经被 @inject 注释。Spring 会识别注释并处理它们。如果您真的想在不自己调用构造函数的情况下从 @Configuration java 类中实例化 MyServiceImpl，那么您必须使用 bean 工厂（没有测试过，试一试）：

```
@Configuration
public class MyConfiguration {

    @Autowired AutowireCapableBeanFactory beanFactory;

    @Bean public MyService myService() { 
        return beanFactory.createBean(MyServiceImpl.class, AutowireCapableBeanFactory.AUTOWIRE_CONSTRUCTOR, true);
    }
} 
```

# mbprogresshud - 如何将 MBProgressHUD 与 MKNetworkKit 一起使用？

> ID：13583527
> 
> 赞同：0
> 
> 时间：2012-11-27T11:44:18.110
> 
> 标签：mbprogresshud, mknetworkkit

我使用带有协议和委托的 MKNetworkKit 来发送服务调用并获得 json 响应。现在我想实现 MBProgressHUD 以在 UITable 视图上获取和加载数据时显示一个繁忙的指示器。

我在 viewDidLoad 中发送请求；

```
 - (void)viewDidLoad
            {
                [super viewDidLoad];
                // Do any additional setup after loading the view from its nib.

                [[DataEngine sharedEngine]setFetchUserDataDelegate:self];
                [[DataEngine sharedEngine]fetchUserData:@"1"]; 
             } 
```

Data Engine 是我声明 fetchUserData 方法的单例类。

我已经包含了所需的文件，即；MBProgressHUD.h & MBProgressHUD.m 在我的项目中。

现在我应该编写哪个代码来启动和停止忙碌指示器，我应该在哪里编写该代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:39:11.027

1) 从这里下载项目文件：[https](https://github.com/jdg/MBProgressHUD) ://github.com/jdg/MBProgressHUD 2) 将 MBProgressHUD.h 和 MBProgressHUD.m 文件包含到您的项目目录中。3) 在您的 .h 文件中创建一个实例变量，例如：MBProgressHUD *progressHUD。4）在.m文件中，编写以下代码；

```
progressHUD = [[MBProgressHUD alloc]initWithView:self.view];
[progressHUD show:YES];
[self.view addSubView:progressHUD]; 
```

5) 停止进度指示器写入；

```
[progressHUD hide:YES]; 
```

# c++ - C++中数学测验的输出累加器

> ID：13583537
> 
> 赞同：1
> 
> 时间：2012-11-27T11:44:39.043
> 
> 标签：c++

好的，所以我正在创建一个数学测验。现在只是一些基本的东西，但是在我的 while 循环结束时，我想累积输出，这意味着如果你做 5 个加法问题，输出将存储所有 5 个问题的表达式，并使用条件运算符来判断答案是正确的还是错误的，它会显示在最后。

我在 Java 中有相同的程序，但我想将它切换到 C++，因为我真的很喜欢 C++，并且想要更多它，这就是我想弄清楚这个的原因。

爪哇：

```
output += "\n" + number1 + " - " + number2 + " = " + answer + ((number1 - number2 == answer) ? " CORRECT" : " WRONG"); 
```

我的 while 循环带有 C++ 中的输出累加器：

```
while (count <= NUMBER_OF_QUESTIONS) {

    num1 = 1 + rand() % 50;
    num2 = 1 + rand() % 50;

    if (num1 < num2) {
        temp = num2;
        num2 = num1;
        num1 = temp;
    }

    cout << "\n"<< num1 << " + " << num2 << " = " << endl;
    cin >> answer;

    if (num1 + num2 == answer) {
        cout << "Right!" << endl;
        correctCount++;
    }
    else
        cout << "Wrong! Should be " << (num1 + num2) << endl;

// Increase count
count++;

    // Prepare all questions if correct or wrong, for output
    output += // The rest...
} 

//and for final output

cout << output; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:07:18.180

不使用任何 STL 库：只需将变量存储在数组中。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <iostream>

#define NUMBER_OF_QUESTIONS 5

int main()
{
    srand ( time(NULL) );
    int count = 0;
    //Init a
    int output[NUMBER_OF_QUESTIONS][4];

    while (count <= NUMBER_OF_QUESTIONS) {

        int num1 = 1 + rand() % 50;
        int num2 = 1 + rand() % 50;
        int answer = 0;

        if (num1 < num2) {
            int temp = num2;
            num2 = num1;
            num1 = temp;
        }

        std::cout << "\n"<< num1 << " + " << num2 << " = " << std::endl;
        std::cin >> answer;

        if (num1 + num2 == answer) {
            std::cout << "Right!" << std::endl;
            //correctCount++;
        }
        else
        {
            std::cout << "Wrong! Should be " << (num1 + num2) << std::endl;
        }

        // Prepare all questions if correct or wrong, for output
        output[count][0] = num1;
        output[count][1] = num2;
        output[count][2] = answer;
        output[count][3] = (num1 + num2 == answer);

        // Increase count
        count++;
    } 
    for (int i =0; i < NUMBER_OF_QUESTIONS; i++)
    {
        std::cout << "Q" << i << " : " ;
        std::cout << output[i][0] << " + " << output[i][1];
        std::cout << " = " << output[i][2] << " . ";
        if (output[i][3])
            std::cout << "Right Answer ! " << std::endl;
        else
            std::cout << "Wrong! Should be " << (output[i][0] +  output[i][1]) << std::endl;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:07:53.273

所以，如果我没看错的话，你想遍历一下让我们说 5 个问题。
所以你会有类似...
5+12 =
用户输入
13+32 =
用户输入
31 + 1 =
用户输入
27+ 15 =
用户输入
11+11 =
用户输入

然后程序将输出以下内容：

5+12 = 17
正确
13+32 = 45
正确
31 + 1 = 33
错误
27+ 15 = 42
正确
11+11 = 11
错误

如果这就是你想要的，那么你可以尝试这样的事情：

```
#define MAX_QUESTIONS 5
#define OPERANDS 2
#define LEFT 0
#define RIGHT 1 
int main()
{
   int ques[MAX_QUESTIONS][OPERANDS];
   int ans[MAX_QUESTIONS];
   for(int i=0; i < MAX_QUESTIONS; i++)
   {
      ques[i][LEFT] = 1 + rand() % 50;
      ques[i][RIGHT] = 1 + rand() % 50;
      if (ques[i][LEFT] < ques[i][RIGHT]) 
      {
         int temp = ques[i][RIGHT];
         ques[i][RIGHT] = ques[i][LEFT];
         ques[i][LEFT] = temp;
      }
      cout << "\n" << ques[i][LEFT] << " + " << ques[i][RIGHT] << " = " << endl;
      cin >> answer[i];
   }

   for(int i = 0; i < MAX_QUESTIONS; i++)
   {
      cout << "\n" << ques[i][LEFT] << " + " << ques[i][RIGHT] << " = " << answer[i] << "\n" << (((ques[i][LEFT] + ques[i][RIGHT]) == answer[i])?"CORRECT":"WRONG") << endl;
   }
} 
```

# sql-server-2008 - SQL Server 2008 中的复杂 UPDATE 查询，从 Oracle 10g 重写

> ID：13583539
> 
> 赞同：0
> 
> 时间：2012-11-27T11:44:41.303
> 
> 标签：sql-server-2008, oracle10g

我需要重新编写以下*Oracle 10g*查询才能在*SQL Server 2008中工作*

这是一个更新查询，其中一些字段是从 a 中检索的，`SELECT`而一些是给定的（来自代码）。

```
UPDATE "BMAN_SQL"."CELLS_GLIST" 
   SET ("GLIST_ID", "GLIST_VALUE_ID") = (

                                         SELECT "GLIST_ID", "GLIST_VAL_ID"
                                         FROM "BMAN_SQL"."GLISTS_VAL_UOR"
                                         WHERE ("UOR_ID"=3)
                                         AND ("GLIST_CODE"='X')

                                        ), 
       "SESSION_ID" = 1553245736,
       "USER_ID" = 13

WHERE EXISTS ( SELECT * FROM ... ) 
```

请注意，我**需要**使用`UPDATE SET ... WHERE EXIST ...`与 Oracle 兼容的结构（查询由 QueryBuilder 类为每个特定的 DBMS 自动构建）。

我也**不能**写：

```
UPDATE "BMAN_SQL"."CELLS_GLIST" 
   SET ("GLIST_ID", "GLIST_VALUE_ID", "SESSION_ID", "USER_ID") = (

                        SELECT "GLIST_ID", "GLIST_VAL_ID", 1553245736, 13
                        FROM "BMAN_SQL"."GLISTS_VAL_UOR"
                        WHERE ("UOR_ID"=3)
                        AND ("GLIST_CODE"='X')

       )

WHERE EXISTS ( SELECT * FROM ... ) 
```

因为（根据这个旧线程[Oracle "Cannot update to NULL"](https://stackoverflow.com/questions/11523213/oracle-cannot-update-to-null)`SELECT` ）如果没有获取任何记录，它会返回错误。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:04:05.933

在这种情况下，您需要加入更新查询。请参阅下面的语法。`<Your condition here>`在此处用您的加入条件替换此部分。

```
UPDATE m 
SET 
    GLIST_ID = r.GLIST_ID
    ,GLIST_VALUE_ID = r.GLIST_VAL_ID
    , SESSION_ID= 1553245736
    , USER_ID = 13
from BMAN_SQL.CELLS_GLIST m
inner join BMAN_SQL.GLISTS_VAL_UOR r on <Your condition here>
WHERE 
r.UOR_ID=3 AND (r.GLIST_CODE='X') AND
EXISTS ( SELECT * FROM ... ) 
```

**编辑**

```
UPDATE BMAN_SQL.CELLS_GLIST 
SET 
GLIST_ID = (SELECT TOP 1 GLIST_ID FROM BMAN_SQL.GLISTS_VAL_UOR WHERE (UOR_ID=3) AND (GLIST_CODE='X'))
,GLIST_VALUE_ID = (SELECT TOP 1 GLIST_VAL_ID FROM BMAN_SQL.GLISTS_VAL_UOR WHERE (UOR_ID=3) AND (GLIST_CODE='X'))
,SESSION_ID = 1553245736
,USER_ID = 13
WHERE EXISTS ( SELECT * FROM ... ) 
```

# count - groupby，计数和拥有

> ID：13583540
> 
> 赞同：1
> 
> 时间：2012-11-27T11:44:43.117
> 
> 标签：count, group-by

我有一张这样的桌子

```
acct_no   code
==============
12        A  
12        B  
13        A  
14        Z  
15        w 
```

表中还有其他列。

我试图找出哪个 acct_no 有多个代码。就像上面的12应该是结果。

我的查询

```
Select acct_no,code,count(code)
from dbo.cas
group by acct_no
having count(code)>1 
```

我想知道这是否会正常工作。数据库非常大，查询执行时间过长。我希望它完全正确。

# html - HTML：同一页面锚定并使用 Tab 键

> ID：13583543
> 
> 赞同：0
> 
> 时间：2012-11-27T11:44:49.383
> 
> 标签：html

我正在使用链接跳转到页面的内容部分。它工作正常；但是，在 IE 和 Chrome 中，如果我按 Tab 跳转后，它会返回到 .

关联 ：`<a href="#anchortext">Skip to Content</a>`

内容位置`<a id="anchortext" class='hidden'>Content</a>`

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:59:00.083

我怀疑它与页面上现有 html 元素的选项卡索引有关 - 单击您在上面指定的锚标记会将您带到相关部分，但随后按选项卡将带您到第一个可用选项卡停止（通常是链接或表单输入项），它可以很容易地回到页面顶部。

如果您刷新页面并按一次标签，您将被带到页面的第一个启用标签索引的元素 - 我猜这可能与您在原始问题中被带到的部分相同......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T19:14:28.287

AFAIK 仅使用 html 无法做到这一点。

因此，我使用 jquery 制作了一个 javascript 脚本。当用户单击跳转项目时，我会在特定元素内查找下一个链接或下一个链接并将焦点放在它上面。这解决了我对 Chrome (>25) 和 IE (>7) 的问题，当然 Firefox 在正确解释选项卡操作方面做得非常出色。

```
$("#jumpToMenu").on("keydown", function(e) {
    var keyCode = e.keyCode || e.which;
    if(keyCode == 13) { 
        e.preventDefault();
        e.stopPropagation();
        $("#myMenuToJump").find('a:first').focus();
    }
}).on("click", function(e) {
    e.preventDefault();
    e.stopPropagation();
    $("#myMenuToJump").find('a:first').focus();
}); 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:54:05.533

这似乎是浏览器中内部链接处理方式不同的问题，并且似乎属于规范中未定义的行为类别，因此取决于浏览器。

当您专注于一个链接（通常使用制表符）并按 Enter 以跟随该链接时，浏览器可能会或可能不会保留焦点。您可以使用 CSS 规则（如`:focus { background: yellow; }`.

如果焦点被保留（这有点不合逻辑，因为焦点元素很可能不在视线范围内），一个选项卡会将您带到页面上的下一个可焦点元素（“下一个”在选项卡顺序的意义上）。

如果焦点丢失，它可能被视为将焦点赋予整个页面（IE 奇怪），或者没有焦点。无论哪种方式，点击选项卡都会将您带到页面上的第一个可聚焦元素（根据选项卡顺序）。

恐怕您无法在页面上做任何事情来改变这一点。它在用户和浏览器之间。

# ms-word - 使用元数据将对象插入 Word 2010

> ID：13583546
> 
> 赞同：3
> 
> 时间：2012-11-27T11:45:02.537
> 
> 标签：ms-word, openxml

请原谅我对这个主题的无知，我对此很陌生。

我需要能够将包含表格数据的图像和 html 从 Word 插件插入到 Word 文档中。我已经设法使用 InsertFile 方法以最基本的形式做到了这一点。Word 将 html 转换为其本机语法 wordprocessingML，这很好。

但是，我需要能够为每个插入的对象存储一些元数据，以便它可以在外部重新生成并在用户请求时在文档中替换。我一直在研究 Open XML，但也可以看到它是如何实现的，或者是否可行。

请您指出我如何才能最好地实现这一目标的正确方向。

提前致谢。

# android - Android textview 使用作为标签和值

> ID：13583549
> 
> 赞同：24
> 
> 时间：2012-11-27T11:45:09.433
> 
> 标签：android, android-layout

我想将两个文本视图分组在一个组中，并像标签和值一样使用。是否有任何组件可以在 android 中对两个文本视图进行分组？如何在android布局中完成？

![样本标签值](../Images/1b6f5759449c022eff68bdb03eb30cd6.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-27T11:51:16.800

您可以使用`<LinearLayout>`水平分组元素。您还应该使用样式来设置边距、背景和其他属性。这将允许您不为您使用的每个标签重复代码。这是一个例子：

```
<LinearLayout
                    style="@style/FormItem"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">
                <TextView
                        style="@style/FormLabel"
                        android:layout_width="wrap_content"
                        android:layout_height="@dimen/default_element_height"
                        android:text="@string/name_label"
                        />

                <EditText
                        style="@style/FormText.Editable"
                        android:id="@+id/cardholderName"
                        android:layout_width="wrap_content"
                        android:layout_height="@dimen/default_element_height"
                        android:layout_weight="1"
                        android:gravity="right|center_vertical"
                        android:hint="@string/card_name_hint"
                        android:imeOptions="actionNext"
                        android:singleLine="true"
                        />
            </LinearLayout> 
```

您还可以根据上面的布局创建自定义视图。你看过[创建自定义视图](http://developer.android.com/training/custom-views/create-view.html)吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:56:56.943

您应该实现一个自定义列表视图，以便您定义一次布局并为列表视图中的每一行绘制它。

# sql - 我怎么能有像 SELECT id, (id in(2,3,4) ) as idIs234 from Messageset

> ID：13583554
> 
> 赞同：2
> 
> 时间：2012-11-27T11:45:24.860
> 
> 标签：sql, sql-server, tsql

如何在 sql server 中创建这样的查询？

```
SELECT id, (id in(2,3,4) ) as idIs234 from Messageset 
```

我想要这样的结果

```
id idIs234 
-----------
1 false
2 true
3 true
4 true
5 false
6 false 
```

这段代码不起作用，但我希望有一个我不知道的替代方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:55:57.857

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/cf41b/2)**

```
SELECT 
id,
CASE WHEN id in(2,3,4) 
      THEN 'TRUE'
      ELSE 'FALSE'
  END AS ids
FROM Messageset 
```

结果：

```
| ID |   IDS |
--------------
|  1 | FALSE |
|  2 |  TRUE |
|  3 |  TRUE |
|  4 |  TRUE |
|  5 | FALSE |
|  6 | FALSE | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:56:06.467

您可以使用以下`CASE`语句：

```
select id,
  case when id in (2,3,4) then 'true' else 'false' end result
from Messageset 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1b8ef/1)

结果：

```
| ID | RESULT |
---------------
|  1 |  false |
|  2 |   true |
|  3 |   true |
|  4 |   true |
|  5 |  false |
|  6 |  false | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:50:16.387

你没有提到你正在使用什么数据库服务器，也没有标准的方法，所以我会告诉你如何使用 MySQL 来做到这一点[`IF function`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)，就像这样：

```
SELECT id, IF(id IN ( 2, 3, 4 ) ,  'true',  'false' ) AS idIs234
FROM Messageset 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T11:51:46.897

### 假设 - 2,3,4 不是硬编码列表......而只是一个简短列表的简单示例。

其他解决方案对`2, 3 or 4`. 我假设你有一个简短的列表..所以我强调你如何检查`NULL`如果你做了一个`LEFT OUTER JOIN`.

```
-- Setup the subquery / sub table.
-- In this case, it's a variable table.
DECLARE @TempData TABLE (Id INTEGER PRIMARY KEY NOT NULL)
INSERT INTO @TempData VALUES (2)
INSERT INTO @TempData VALUES (3)
INSERT INTO @TempData VALUES (4)

-- Outer join the two tables. If there's no join, then the second table 
-- will be NULL.
SELECT a.Id AS Id, 
    CASE WHEN b.Id IS NULL THEN 'False' 
        ELSE 'True' END 
        AS Idls234
FROM [dbo].[Messageset] a
    LEFT OUTER JOIN @TempData b ON a.Id = b.Id 
```

通过[hvd](https://stackoverflow.com/users/743382/hvd)的帮助进行修复。

请参阅[带有演示的 Sql Fiddle](http://sqlfiddle.com/#!3/1b8ef/5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:00:15.887

现在没事了

```
SELECT id, 
case when id in(2,3,4) then 'true'
else 'false'
end idIs234 from Messageset 
```

# xaml - 将 BindingSource 的名称插入字符串？

> ID：13583556
> 
> 赞同：1
> 
> 时间：2012-11-27T11:45:29.823
> 
> 标签：xaml, binding, datatemplate, datatrigger, tabitem

我想使用 DataTemplate 来更改一些 TabItems 的 Header。到目前为止，我有这个代码，它工作正常：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"  x:Class="SFgame.MainWindow"
        Title="SoccerFusion" Height="600" Width="1000" ResizeMode="NoResize" WindowStartupLocation="CenterScreen">
    <Grid>
        <TabControl TabStripPlacement="Bottom">
            <TabControl.Resources>
                <Style TargetType="{x:Type TabPanel}">
                    <Setter Property="HorizontalAlignment" Value="Center" />
                </Style>
                <DataTemplate x:Key="mmHeaderTemplate">
                    <Image Name="mmItem1" />
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                            <Setter TargetName="mmItem1" Property="Source" Value="data\Images\Menu\ActiveItem.png" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                            <Setter TargetName="mmItem1" Property="Source" Value="data\Images\Menu\InactiveItem.png" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </TabControl.Resources>
            <TabItem Height="32" Width="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" IsSelected="True">
                <Grid Background="#FFE5E5E5"/>
            </TabItem>
            <TabItem Height="32" Width="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" >
                <Grid Background="#FFE5E5E5"/>
            </TabItem>
            <TabItem Height="32" Width="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" >
                <Grid Background="#FFE5E5E5"/>
            </TabItem>
            <TabItem Height="32" Width="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" >
                <Grid Background="#FFE5E5E5"/>
            </TabItem>
        </TabControl>
    </Grid>
</Window> 
```

唯一的问题是，现在所有 TabItem-Headers 都有相同的图片。所有 TabItems 都应该有不同的图片 fpr 活动和非活动对。

所以我想我会将图片的路径作为参数传递，但我就是不知道它是如何工作的。

我唯一能找到的是：“无法传递参数”。

如果真的不行的话。有替代方案吗？例如，给 TabItem 一个名称，如“TabItem1”，并使用路径“data\Images\Menu\Tabitem1_active.png”和“data\Images\Menu\Tabitem1_inactive.png”作为源？我可以将绑定源的名称插入字符串吗？

编辑：我更接近解决方案

```
<Setter TargetName="mmItem1" Property="Source">
    <Setter.Value>
        <MultiBinding StringFormat="{}{0}{1}{2}">
            <Binding Mode="OneTime" Source="data\Images\Menu\" />
            <Binding Mode="OneTime" Source="??????" />
            <Binding Mode="OneTime" Source="inactive.png" />
        </MultiBinding>
    </Setter.Value>
</Setter> 
```

使用此代码而不是上面的代码，我可以连接三个字符串。我现在唯一需要的是源控制/绑定源的名称

下一个编辑：我想我更接近一点。通过使用 TabItem 的 Header，我成功地将一个字符串从我的 tabitem 获取到模板。

代码现在看起来像这样：

```
<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="SoccerFusion" Height="400" Width="400">
  <Grid>
    <TabControl TabStripPlacement="Bottom">
        <TabControl.Resources>
            <Style TargetType="{x:Type TabPanel}">
                <Setter Property="HorizontalAlignment" Value="Center" />
            </Style>
            <DataTemplate x:Key="mmHeaderTemplate">
              <Grid>
                <Image Name="mmImg" />
                <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, StringFormat='{}{0}'}" />
              </Grid>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                    ????? HERE COMES THE PROBLEM ??????
                        <Setter TargetName="mmImg" Property="Source" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, StringFormat='{}{0}active.png'}" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                    ????? HERE COMES THE PROBLEM ??????
                        <Setter TargetName="mmImg" Property="Source" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content, StringFormat='{}{0}inactive.png'}" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </TabControl.Resources> 
        <TabItem Height="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" IsSelected="True" Header="mmItem1">
            <Grid Background="#FFE5E5E5"/>
        </TabItem>
        <TabItem Height="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" Header="mmItem2" >
            <Grid Background="#FFE5E5E5"/>
        </TabItem>
        <TabItem Height="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" Header="mmItem3" >
            <Grid Background="#FFE5E5E5"/>
        </TabItem>
        <TabItem Height="32" HeaderTemplate="{StaticResource mmHeaderTemplate}" Header="mmItem4" >
            <Grid Background="#FFE5E5E5"/>
        </TabItem>
    </TabControl>
  </Grid>
</Page> 
```

问题是：我生成一个字符串并将其作为源提供给图像。哪个工作正常。但是 Source 需要一个 URI 并且不能对 String 做任何事情

有任何想法吗？

# php - 如何检查这种格式的字符串：+xxx-yyyy-zzzz？

> ID：13583561
> 
> 赞同：-6
> 
> 时间：2012-11-27T11:45:51.303
> 
> 标签：php

X、y、z 都是数字。除了知道如何检查字符串是否为 14 个字符长之外，我不想迭代每个字符并检查字符是否匹配 [0-9]。

有更聪明的方法吗？没有正则表达式请......我害怕它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:51:52.500

你不必害怕正则表达式。正则表达式只是以下内容的集合：

1.  可用于表示任何一组字符的符号，以及
2.  指示如何对这些符号进行分组的运算符。

例如，符号`\d`匹配数字集中的任何字符 ( `0-9`)。操作符`{n}`指示之前符号`n`时间的重复。

有了这些知识，让我们试着用短语来定义你的问题：

**第 1 部分：**匹配一个加号，后跟 3 位数字

翻译成正则表达式，这是：`\+\d{3}`

* * *

**第 2 部分：**匹配连字符，后跟 4 位数字

翻译成正则表达式，这是：`-\d{4}`

* * *

**第 3 部分：**匹配另一个连字符，后跟 4 个数字

翻译成正则表达式，这是：`-\d{4}`

* * *

**共**

把它们放在一起，你有：

`\+\d{3}-\d{4}-\d{4}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:55:37.293

您可以使用`sscanf`：

*   [sscanf — 根据格式解析来自字符串的输入](http://php.net/manual/en/function.sscanf.php)

例子：

```
print_r( sscanf("+123-1234-1234", "+%3d-%4d-%4d") ); 
```

将输出：

```
Array ( [0] => 123 [1] => 1234 [2] => 1234 ) 
```

但是，这并不能保证输入字符串的有效性。像 +1-1-1 这样的字符串将导致数组的所有三个值都为 1。因此您仍然必须分别验证三个数组值。

查看[支持的格式列表](http://publib.boulder.ibm.com/infocenter/comphelp/v9v111/index.jsp?topic=/com.ibm.xlcpp9.aix.doc/standlib/formattedinput.htm)（虽然不确定 PHP 是否支持所有这些格式）。

但说真的，`^\+\d{3}-\d{4}-\d{4}$`这不是什么可怕的事情。这相当简单。Regex Land 的情况更糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:51:25.710

正则表达式就是答案。
这是模式：

```
^\+[0-9]{3}-[0-9]{4}-[0-9]{4}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:55:22.620

没有办法查看每个角色。即使是正则表达式也必须这样做（在幕后）。正则表达式也没什么好害怕的。事实上，这实际上相当容易，尤其是在这样的情况下：

```
$ok = preg_match('/^\+\d{3}-\d{4}-\d{4}$/', $text); 
```

至于实际的正则表达式：

*   `/`在这里用作分隔符，在您想要添加修饰符（如不区分大小写）之前，它们并不重要。
*   `^`匹配文本（或行；取决于标志）的开头。
*   `\+`是一个`+`字符。转义很重要，因为`+`这意味着“至少一次匹配前一个表达式”。
*   `\d`表示任意数字（一个字符）。
*   `{n}`要求前面的表达式（这里`\d`：）准确地重复`n`次数。
*   `$`匹配文本（或行；取决于标志）的结尾。

它看起来有点复杂，进行经典比较可能会快一点：

```
$ok = strlen($text) == 14 && ($text[0] == '+') && is_numeric($text[1]) && is_numeric($text[2]) && ... 
```

我不确定您`is_numeric()`在谈论“检查字符是否匹配 [0-9]”时是否指的是调用，但这是我能想到的“最简单”的方法之一。

# asp.net-mvc - Telerik MVC 扩展如何呈现模板列

> ID：13583562
> 
> 赞同：1
> 
> 时间：2012-11-27T11:45:55.660
> 
> 标签：asp.net-mvc, telerik-mvc

我一直在查看 Telerik MVC 扩展的源代码，但我一生都无法弄清楚模板列是如何工作的。我可以**让**它们正常工作，但我试图了解幕后发生的事情，因为我认为它们真的很有用。我已经浏览了源代码，但我仍然有点困惑。这是源代码示例项目中的一个示例。

```
 Html.Telerik().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Template(c => { 
            %><img 
                alt="<%= c.CustomerID %>" 
                src="<%= Url.Content("~/Content/Grid/Customers/" + c.CustomerID + ".jpg") %>" 
              /><% 
        }).Title("Picture");
        columns.Bound(c => c.ContactName).Title("Name");
        columns.Bound(c => c.Phone);
    })
    .Sortable()
    .Scrollable(scrolling => scrolling.Height(250))
    .Pageable()
    .Render(); 
```

columns => {} 委托的类型`Action<GridColumnFactory<T>>` 是 Model `IEnumerable<T>`，而 c=>{} 委托的类型是`Action<TModel>`。我明白了，GridColumnFactory 上的 Template 方法被赋予了一个动作作为参数。

**此操作如何用于呈现所需的 HTML？**

谢谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:52:53.700

这里的神奇之处在于 Telerik 使用了这样一个事实，即 ASP.NET 网页中的任何内容（HTML、JavaScript 等）实际上[`Response.Write`](http://msdn.microsoft.com/en-us/library/1463ysyw.aspx)都被页面编译器转换为类似的调用。

例如;

```
<% Action action = () => { %><h1>Title</h1><% }; %> 
```

将被翻译成类似这样的 C# 代码：

```
Action action = () => { Response.Write("<h1>Title</h1>"); }; 
```

一旦你理解了这一点，它与其他方法没有什么不同：对于每个单元格，Telerik 只是简单地调用你编写的，而没有意识到它，其中包含编译器生成的`Action`一个或多个调用。`Write`

# ajax - 在 ASP.NET MVC 4 中，用户在 ajax 发布请求期间被随机注销并转发到 /Account/LogOff

> ID：13583567
> 
> 赞同：0
> 
> 时间：2012-11-27T11:46:12.577
> 
> 标签：ajax, authentication, asp.net-mvc-4

在 MVC 4 中我使用 ajax post 来调用一个简单的方法

```
[HttpPost]
    public void Create(Task task)
    {
      if (ModelState.IsValid)
      {
      var userName = User.Identity.Name;
      task.Author = userName;
      db.Tasks.Add(task);
      db.SaveChanges();
      }
    } 
```

甚至在方法完成之前（我使用调试），Web 服务器启动另一个进程，在 AccountController 中执行 LogOff 方法并将浏览器转发到 /Account/LogOff url。这是一个基于 Internate 模板的简单项目。Web.config 包括表单身份验证的基本设置。大约 70% 的情况会发生这种情况。看起来 SimpleMembership 提供者感觉到危险并将用户注销。

[类似案例](http://forums.asp.net/t/1860856.aspx/1/10?Re%20MVC%203%20ASPNET%20Auth%20Almost%20Randomly%20Redirecting%20To%20Account%20LogOff)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:05:14.060

你检查过你的 web.config 文件了吗？

```
<configuration>
<system.web>     
    <authentication mode= "Forms">
        <forms name="MyLoginCookie" loginUrl="account/login" protection="[All/None/Encryption/Validation]" timeout="30" path="/” />
    </authentication>
</system.web> 
```

# php - 显示来自内部联接的数据

> ID：13583569
> 
> 赞同：2
> 
> 时间：2012-11-27T11:46:15.097
> 
> 标签：php, sql, inner-join

我需要帮助在两个不同的列表中显示这个

```
$domains_sql = mysql_query("SELECT domains_id, domains_url, keywords_id, keywords_word, domains_comments_comment

     FROM
     (
     SELECT domains_id,domains_url
     FROM domains
     ORDER BY RAND()
     LIMIT 1
     ) as d

     INNER JOIN domains_comments
     ON domains_comments_domain = domains_id

     INNER JOIN domains_keywords
     ON domains_keywords_website = domains_id

     INNER JOIN keywords
     ON domains_keywords_keyword = keywords_id
         ORDER BY keywords_word ASC") or die (mysql_error());

$num = mysql_num_rows($domains_sql);

$current_price = "";

for($i=0;$i<$num;$i++){

$domains_result = mysql_fetch_array($domains_sql);

$domains_id = $domains_result['domains_id'];
$domains_url = $domains_result['domains_url'];
$domains_name = preg_replace('#^https?://www.#', '', $domains_url);                

$keywords_id = $domains_result['keywords_id'];
$keywords_word = $domains_result['keywords_word'];

$domains_comments = $domains_result['domains_comments_comment'];

if($domains_url != $current_price) {

echo $domains_name."<br /><br />";

$current_price = $domains_url;

}

echo $keywords_word."<br />";
echo $domains_comments."<br />";
} 
```

打印出来：

> MS Office
> 域 1
> MS Office
> 域 1 - 第 1 部分
> MySQL
> 域 1
> MySQL
> 域 1 - 第 1 部分
> PHP
> 域 1
> PHP
> 域 1 - 第 1 部分
> Visual Basic
> 域 1
> Visual Basic
> 域 1 - 部分

我需要它是：

（来自关键字的信息）

> MS Office
> MySQL
> PHP
> Visual Basic

（来自评论的信息）

> 域 1
> 域 1 - 第 1 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:26:33.350

我不确定我是否看到您的域评论和关键字是如何相关的，如果您只是想要两个列表，或者您是否想要每个关键字一个评论列表。

无论如何，您可以重写您的查询逻辑以对关键字进行主要查询，然后对评论运行更简单的查询（对所有人或每个关键字一个），但如果您的查询时间和数据集是您喜欢做的它在单个查询中，您可以在多级数组中重构数据。

另外，我想您只想列出每个项目一次。

```
$keywords = array();
$comments = array(); //if you want all comments in one list
for($i=0;$i<$num;$i++){
  $domains_result = mysql_fetch_array($domains_sql);

  //Stores complete row data, only keeps the last, if the same value is fetched from the db several times
  $keywords [$domains_result['keywords_word']] = $domains_result;
  $comments[$domains_result['domains_comments_comment']] = $domains_result;
}
//Now you have the two list, could be printed several ways, to only print the values
print implode("<br />\n",array_keys($keywords));
print "<br />";
print implode("<br />\n",array_keys($comments));

//Loop trough
foreach ($keywords as $keyword=>$data) {
  print "$keyword<br>\n";
  print $data['keywords_word']."<br>\n";
  print_r($data);
} 
```

# oracle - Oracle - 此范围内不存在名称为 X 的函数

> ID：13583574
> 
> 赞同：4
> 
> 时间：2012-11-27T11:46:44.270
> 
> 标签：oracle, oracle-cursor

该函数显然在那里，因为我可以使用 SQL Developer 导航到它并且它编译得很好，但是当我尝试使用带有或不带有“调用”的函数时，它会抛出：

> 错误（36,24）：PLS-00222：此范围内不存在名称为“x”的函数

这是函数的样子：

```
create or replace function testfunction
  (
    somevalue in varchar2 
  )
  return varchar2
  AS
  cursor testcursor IS 
  select column1, column2 from table1 t
  where t.column1 = somevalue; 
  testcursorrec testcursor %rowtype;
  messaget VARCHAR2(500);
  begin
       open testcursor ; 
       fetch testcursor into testcursorrec ; 
       close testcursor ; 
       messaget := testcursor.column1;
      return messaget ;
  end; 
```

这就是我所说的：

```
messaget := testfunction(somevalue); 
```

其中 messageT 和 somevalue 都被声明为 varchar2 类型。

函数内部是否不允许使用游标或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:58:33.047

错误将是`messaget := testcursor.column1;`因为此时光标已关闭（您应该只使用`testcursorrec.column2`.

你的代码没有检查没有行，也没有检查重复的行。您可以将其简化为

```
create or replace function testfunction
  (
    somevalue in table1.column1%type
  )
  return table1.column2%type
  AS
  messaget table1.column2%type; -- use %type where possible.
  begin
    select t.column2
      into messaget
      from table1 t
     where t.column1 = somevalue
       and rownum = 1;--only if you dont care if theres 2+ rows. 
    return messaget;
  exception 
    when no_data_found
    then 
      return null; -- if you want to ignore no rows.
  end; 
```

# c++ - 可以从此函数中删除递归吗？

> ID：13583580
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:47:02.103
> 
> 标签：c++, c, recursion

分析指出这个函数是一个性能下降器，因为递归潜得很深

```
Func(unsigned eff_id)
{

  if (eff_id == 0) return 1;

  if (eff_id == 1) return 0;

 XCodeRuleNode rn(m_IH_rn_ri.get_key(eff_id));   // Initialize 
  {
  rn.t_id = Func(rn.t_id);
  rn.f_id = Func(rn.f_id);
  //
  }

  return RegCodeRuleNode(rn);   // Inserting the object in a hash table
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:54:28.733

只是为了回答您的问题：是的，它可以转换（另请参见[Can each recursion are convert into iteration？](https://stackoverflow.com/questions/931762/can-every-recursion-be-converted-into-iteration)）。

但是：递归本身（如果有的话，示例中没有显式递归）可能不是降级器，而是递归的深度，或者在“循环术语”中是迭代次数，所以只需用迭代替换递归可能无法解决您的问题，您可能不得不寻找其他解决方案（例如，记忆、查找表格、使用其他公式或算法，甚至可能是多线程；有太多可能的优化，无法在此处一一列举）。

[旁注：您的评论似乎已过时，在 中`return RegCodeRuleNode(rn); // Inserting the object in a hash table`，我没有看到任何插入的内容]

# bash - 命令行批量重命名

> ID：13583583
> 
> 赞同：2
> 
> 时间：2012-11-27T11:47:07.867
> 
> 标签：bash, unix, ubuntu, rename

我在多个子文件夹中有文件，我想将它们全部移动到一个文件夹中。然后我喜欢重命名这些文件。

```
/foo/A1000-foobar1412.jpg
/foo/A1000-foobar213.jpg
/foo/A1000-foobar314.jpg
/foo1/B1001-foobar113.jpg
/foo2/C1002-foobar1123.jpg
/foo2/C1002-foobar24234.jpg 
```

我想得到的是：

```
../bar/A1000-1.jpg
../bar/A1000-2.jpg
../bar/A1000-3.jpg
../bar/B1001-1.jpg
../bar/C1002-1.jpg
../bar/C1002-2.jpg 
```

所以到目前为止我所做的是：

```
find . -name "*.jpg" -exec mv {} ../bar/ \; 
```

但现在我坚持重命名文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:01:39.817

这是一个脚本，它只采用文件的所需基本名称，并根据目标目录中已存在多少具有相同基本名称的文件附加一个增量索引：

```
for file in $(find . -name "*.jpg")
do
  bn=$(basename $file)
  target_name=$(echo $bn | cut -f 1 -d "-")
  index=$(($(find ../bar -name "$target_name-*" | wc -l) + 1))
  target="${target_name}-${index}.jpg"

  echo "Copy $file to ../bar/$target"
  # mv $file ../bar/$target
  cp $file ../bar/$target
done 
```

使用此解决方案，您不能只在 mv 前面放置一个 echo 来测试它，因为代码依赖于目标目录中的真实文件来计算索引。而是使用 cp（或 rsync），并在您对结果满意后立即手动删除源文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:58:49.653

试试这个（未测试）：

```
for file in `find . -name "*.jpg" `
do
  x=$(echo $file | sed 's|.*/||;s/-[^0-9]*/-/;s/-\(.\).*\./-\1./')
  mv $file ../bar/$x
done 
```

# image - 使用 node.js 显示保存到 mongodb gridfs 中的图像

> ID：13583587
> 
> 赞同：0
> 
> 时间：2012-11-27T11:47:29.550
> 
> 标签：image, node.js, mongodb, gridfs, geddy

我正在将我的应用程序的图像保存到 gridfs 中。当我需要显示图像时，问题就出现了。我不知道我该怎么做。我正在使用 node.js、geddy 框架和 mongodb。

```
 this.show = function (req, resp, params) {
var self = this;
    var GridFS = require('GridFS').GridFS;
    var myFS = new GridFS('resources');

    //recupero la imagen
    myFS.get(params.id,function(err,data){

    });

    myFS.close(); 
```

params.id 是图像 ID。当我做 console.log(data) 我收到：

```
Buffer <90 f8 w8 dj 4f....> 
```

如何将 png 格式的图像响应视图？多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:44:52.587

我从来没有使用过geddy，但你可能想看看这个：

[使用 Node + Jade + Express 渲染存储在 Mongo (GridFS) 中的图像](https://stackoverflow.com/questions/9844564/render-image-stored-in-mongo-gridfs-with-node-jade-express?rq=1)

基本思想是设置正确的“Content-Type”标头（“image/png”应该可以）并简单地用图像数据回复请求。

如果您`<img src="/url/to/your/image/request/handler">...`在 html 中使用标签，您的浏览器可以呈现图像。

抱歉，您无法`console.log`使用大多数 shell/命令行对数据进行映像。;)

# ruby - 在不破坏锚点和别名的情况下读写 YAML 文件

> ID：13583588
> 
> 赞同：4
> 
> 时间：2012-11-27T11:47:30.277
> 
> 标签：ruby, parsing, yaml, psych, emit

之前有人问过这个问题：在[不破坏锚点和别名的情况下读写YAML文件？](https://stackoverflow.com/questions/11665897/read-and-write-yaml-files-without-destroying-anchors-and-aliases)

我想知道如何用许多锚点和别名来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T16:08:42.757

这里的问题是， Yaml 中的[锚点和别名](http://yaml.org/spec/1.1/#id863390)是序列化细节，因此在解析后不是数据的一部分，因此在将数据写回 Yaml 时不知道原始锚点名称。为了在往返时保留锚名称，您需要在解析时将它们存储在某处，以便稍后在序列化时可用。在 Ruby 中，任何对象都可以有与之关联的实例变量，因此实现这一点的一种简单方法是将锚名称存储在相关对象的实例变量中。

继续[前面问题](https://stackoverflow.com/a/12964176/214790)中的示例，对于散列，我们可以更改重新定义的`revive_hash`方法，以便如果散列是锚，那么除了在`@st`变量中记录锚名称以便以后可以识别别名之外，我们将它添加为实例散列上的变量。

```
class ToRubyNoMerge < Psych::Visitors::ToRuby
  def revive_hash hash, o
    if o.anchor
      @st[o.anchor] = hash
      hash.instance_variable_set "@_yaml_anchor_name", o.anchor
    end

    o.children.each_slice(2) { |k,v|
      key = accept(k)
      hash[key] = accept(v)
    }
    hash
  end
end 
```

请注意，这只影响作为锚点的 yaml 映射。如果您想让其他类型保留它们的锚名称，您需要查看[`psych/visitors/to_ruby.rb`](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/to_ruby.rb)并确保在所有情况下都添加了名称。大多数类型都可以通过覆盖来包含，[`register`](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/to_ruby.rb#L250-253)但还有一些其他类型；搜索`@st`.

现在散列具有与其关联的所需锚名称，您需要让 Psych 在序列化它时使用它而不是对象 id。这可以通过子类化来完成[`YAMLTree`](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/yaml_tree.rb)。当`YAMLTree`处理一个对象时，它[首先检查该对象是否已经被看到，如果有，则为其发出一个别名](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/yaml_tree.rb#L74-80)。对于任何新对象，它都会[记录它已经看到该对象，以防以后需要创建别名](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/visitors/yaml_tree.rb#L404-407)。`object_id`用作其中的键，因此您需要覆盖这两个方法来检查实例变量，并在它存在时使用它：

```
class MyYAMLTree < Psych::Visitors::YAMLTree

  # check to see if this object has been seen before
  def accept target
    if anchor_name = target.instance_variable_get('@_yaml_anchor_name')
      if @st.key? anchor_name
        oid         = anchor_name
        node        = @st[oid]
        anchor      = oid.to_s
        node.anchor = anchor
        return @emitter.alias anchor
      end
    end

    # accept is a pretty big method, call super to avoid copying
    # it all here. super will handle the cases when it's an object
    # that's been seen but doesn't have '@_yaml_anchor_name' set
    super
  end

  # record object for future, using '@_yaml_anchor_name' rather
  # than object_id if it exists
  def register target, yaml_obj
    anchor_name = target.instance_variable_get('@_yaml_anchor_name') || target.object_id
    @st[anchor_name] = yaml_obj
    yaml_obj
  end
end 
```

现在您可以像这样使用它（与上一个问题不同，在这种情况下您不需要创建自定义发射器）：

```
builder = MyYAMLTree.new
builder << data

tree = builder.tree

puts tree.yaml # returns a string

# alternativelty write direct to file:
File.open('a_file.yml', 'r+') do |f|
  tree.yaml f
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:10:58.950

这是一个稍作修改的版本，用于更新版本的 psych gem。在它给我以下错误之前：

```
NoMethodError - undefined method `[]=' for #<Psych::Visitors::YAMLTree::Registrar:0x007fa0db6ba4d0> 
```

该`register`方法移入 的子类`YAMLTree`，因此现在对于马特在回答中所说的所有内容都有效：

```
class ToRubyNoMerge < Psych::Visitors::ToRuby
  def revive_hash hash, o
    if o.anchor
      @st[o.anchor] = hash
      hash.instance_variable_set "@_yaml_anchor_name", o.anchor
    end

    o.children.each_slice(2) { |k,v|
      key = accept(k)
      hash[key] = accept(v)
    }
    hash
  end
end

class MyYAMLTree < Psych::Visitors::YAMLTree
  class Registrar
    # record object for future, using '@_yaml_anchor_name' rather
    # than object_id if it exists
    def register target, node
      anchor_name = target.instance_variable_get('@_yaml_anchor_name') || target.object_id
      @obj_to_node[anchor_name] = node
    end
  end

  # check to see if this object has been seen before
  def accept target
    if anchor_name = target.instance_variable_get('@_yaml_anchor_name')
      if @st.key? anchor_name
        oid         = anchor_name
        node        = @st[oid]
        anchor      = oid.to_s
        node.anchor = anchor
        return @emitter.alias anchor
      end
    end

    # accept is a pretty big method, call super to avoid copying
    # it all here. super will handle the cases when it's an object
    # that's been seen but doesn't have '@_yaml_anchor_name' set
    super
  end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-14T22:28:56.810

我不得不进一步修改@markus 发布的代码以与 Psych v2.0.17 一起使用。

这就是我最终的结果。我希望它可以帮助其他人节省相当多的时间。:-)

```
class ToRubyNoMerge < Psych::Visitors::ToRuby
  def revive_hash hash, o
    if o.anchor
      @st[o.anchor] = hash
      hash.instance_variable_set "@_yaml_anchor_name", o.anchor
    end

    o.children.each_slice(2) do |k,v|
      key = accept(k)
      hash[key] = accept(v)
    end
    hash
  end
end

class Psych::Visitors::YAMLTree::Registrar
  # record object for future, using '@_yaml_anchor_name' rather
  # than object_id if it exists
  def register target, node
    @targets << target
    @obj_to_node[_anchor_name(target)] = node
  end

  def key? target
    @obj_to_node.key? _anchor_name(target)
  rescue NoMethodError
    false
  end

  def node_for target
    @obj_to_node[_anchor_name(target)]
  end

  private

  def _anchor_name(target)
    target.instance_variable_get('@_yaml_anchor_name') || target.object_id
  end
end

class MyYAMLTree < Psych::Visitors::YAMLTree
  # check to see if this object has been seen before
  def accept target
    if anchor_name = target.instance_variable_get('@_yaml_anchor_name')
      if @st.key? target
        node        = @st.node_for target
        node.anchor = anchor_name
        return @emitter.alias anchor_name
      end
    end

    # accept is a pretty big method, call super to avoid copying
    # it all here. super will handle the cases when it's an object
    # that's been seen but doesn't have '@_yaml_anchor_name' set
    super
  end

  def visit_String o
    if o == '<<'
      style = Psych::Nodes::Scalar::PLAIN
      tag   = 'tag:yaml.org,2002:str'
      plain = true
      quote = false

      return @emitter.scalar o, nil, tag, plain, quote, style
    end

    # visit_String is a pretty big method, call super to avoid copying it all
    # here. super will handle the cases when it's a string other than '<<'
    super
  end
end 
```

# java - 如何通过运行配置在 Eclipse 中指定属性文件的路径？

> ID：13583590
> 
> 赞同：0
> 
> 时间：2012-11-27T11:47:32.100
> 
> 标签：java, xml, eclipse, run-configuration

我正在尝试运行一个示例 java 文件，该文件需要指定属性文件（在本例中为 XML 文件）的路径作为 Eclipse 中运行配置下的第一个参数。XML 文件位于我的 Eclipse 项目之外。

```
If I go to Run > Run Configurations > Arguments 

Option 1: C:\FILEPATH\filename.xml
Option 2: C:/FILEPATH/filename.xml 
```

路径应该是第一还是第二？我都试过了，它们似乎都不起作用。这就是我需要指定的所有内容，以便将属性文件列为运行配置下的第一个参数吗？

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:14:58.230

您要询问的参数是 Java 中的命令行参数，它们始终是字符串，如[什么是“String args []”中所述？主要方法 Java 中的参数](https://stackoverflow.com/questions/890966/what-is-string-args-in-java)。

Eclipse 允许您在 IDE 中为特定的运行配置定义它们。

字符串的格式取决于它的用法。你能展示你的例子的代码吗？

要查看您在应用程序中获得的参数，您可以从[文档](http://java.sun.com/docs/books/tutorial/essential/environment/cmdLineArgs.html)中运行以下示例：

```
public class Echo {
    public static void main (String[] args) {
        for (String s: args) {
            System.out.println(s);
        }
    }
} 
```

# facebook - 添加非好友的 Facebook 应用管理员

> ID：13583591
> 
> 赞同：4
> 
> 时间：2012-11-27T11:47:33.757
> 
> 标签：facebook, facebook-graph-api, roles, accounts

多次搜索本节后，我很难找到我认为简单的答案：

创建了一个应用程序后，如果没有先加好友，我就无法将其他经过 Facebook 验证的开发人员帐户添加为该应用程序的管理员。

这是一个专业的应用程序（我们正在使用它通过 Facebook 服务提供登录），我找不到添加其他同事而不使他们成为 Facebook 朋友的方法。

我试过了：

> 角色 > 管理员 > 添加：

*   电子邮件地址
*   用户标识符
*   链接到个人资料 URI
*   名称搜索

我要么一无所获，要么通知该用户不是 facebook 用户（尽管他们显然是，我毕竟可以将他们添加为朋友）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T08:53:13.783

1) 您必须通过以下方式访问应用程序：[https](https://developers.facebook.com/apps) ://developers.facebook.com/apps并选择您的应用程序。UI最近更新了：

![在此处输入图像描述](../Images/f6fc0051e81634700bc0a5142153ce81.png)

2) 如果用户不是您的朋友，您必须使用 facebook 用户 ID 添加他们，否则将无法使用。

这可以通过[http://findmyfacebookid.com/](http://findmyfacebookid.com/)获得，它将他们的个人资料 url 变成一个 id。

3) 用户还必须[验证](https://www.facebook.com/help/verify)他们的帐户。但是，当您尝试添加它们时，它会告诉您这一点。

4) 然后他们将收到他们必须接受的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:22:51.580

您是否与用户核实过他们是否收到了通知？（例如你应该收到我的请求）

这是待处理请求的外观。

![待处理请求](../Images/7f10198151a9484a11660cc38a878425.png)

# javascript - 如何避免 IE7 中的 URL 长度限制？

> ID：13583597
> 
> 赞同：-4
> 
> 时间：2012-11-27T11:47:54.240
> 
> 标签：javascript, internet-explorer

我需要使用 javascript 发送超过 2300 个字符的 URL 字符串。如何避免 IE7 中的 URL 长度限制。我知道 IE 中的 URL 长度限制为 2048。但我需要避免。给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:50:48.937

最可靠的方法是通过 POST 方法发送数据。

# php - XQuery 中的导入模块 (PHP + Zorba)

> ID：13583603
> 
> 赞同：1
> 
> 时间：2012-11-27T11:48:12.960
> 
> 标签：php, xpath, xquery, zorba

我正在用 php 编写一个应用程序来使用 Zorba XQuery 处理器（v2.6.0）查询巨大的 xml 文件（GB），为此我正在尝试使用此处描述的 XML 流：

[http://www.zorba-xquery.com/html/entry/2012/05/31/XML_Streaming](http://www.zorba-xquery.com/html/entry/2012/05/31/XML_Streaming)

这是代码：

```
<?php

require_once 'XQueryProcessor.php';

$xquery = new XQueryProcessor();

$query = '

    import module namespace file = "http://expath.org/ns/file";     
    import module namespace p = "http://www.zorba-xquery.com/modules/xml";
    import schema namespace opt = "http://www.zorba-xquery.com/modules/xml-options";:)

    let $raw-data as xs:string := file:read-text("C:\TEMP\traces\2011_03\Orders201103.xml")
    let $pages := p:parse($raw-data, <opt:options>
                                         <opt:parse-external-parsed-entity opt:skip-root-nodes="1"/>
                                     </opt:options>)

    for $page in $pages
    return
        $page
   ';

$xquery->importQuery($query);

$result = $xquery->execute();

echo $result;
?> 
```

上面的代码不起作用。没有错误代码，没有堆栈跟踪，根本不会向 Web 浏览器返回任何内容。

我认为问题在于它不会导入命名空间，因为当我执行没有导入的简单查询时，它会成功执行，而当我添加导入语句时，它会失败。当它失败时，网络浏览器会告诉我，如果 URI 没有找到这里所说的资源：

*如果在搜索所有 URI 路径目录后，没有找到与给定 URI 匹配的内容，Zorba 将默认回退到将 URI 解释为 URL 并通过 HTTP 加载资源（假设 URI 具有 http: 方案）*

[http://www.zorba-xquery.com/html/documentation/2.7.0/zorba/uriresolvers](http://www.zorba-xquery.com/html/documentation/2.7.0/zorba/uriresolvers)

我还查看了 zorba 安装文件夹和导入 URI 的转换方式（在上面的链接中），似乎一切正常。

例如文件模块位于以下路径中（注意它是核心模块）：

C:\Program Files\Zorba XQuery 处理器 2.6.0\share\zorba\uris\core\2.6.0\org\expath\ns\file.xq

我正在 Windows 上开发，并为 Apache 和 PHP 使用标准 WAMP 安装。

有人知道我的代码或环境有什么问题吗？

编辑：我刚刚注意到查询从命令行运行正常，所以可能不是 URI 转换

# powershell - 有没有办法以编程方式将别名添加到 Powershell Cmdlet？

> ID：13583604
> 
> 赞同：4
> 
> 时间：2012-11-27T11:48:17.950
> 
> 标签：powershell, alias, cmdlets

我正在为我的应用程序编写自定义 Powershell cmdlet，我需要为某些 cmdlet 提供别名。因此，假设我有 cmdlet Get-DirectoryListing，并且我想将别名（比如“gdl”）添加到此 cmdlet。我怎样才能做到这一点？

AliasAttribute 在这里不起作用，因为它仅适用于属性、索引器或字段声明。另外我知道我们可以使用 Set-Alias 命令，但不知道放在哪里。

是否可以以编程方式向 cmdlet 添加多个别名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:58:08.577

您需要创建一个 psm1 文件（[powershell 模块](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878310%28v=vs.85%29.aspx)），在其中使用您的 cmdlet 指定您的 dll，以便以这种方式加载和添加别名：

在您的模块文件夹中（`Get-ModuleFolder`如果您有更多的默认文件夹，请列出所有文件夹，在我的示例中，我使用第一个）创建一个**与您的 .dll 具有相同名称的文件夹** 和一个包含以下内容的**SameNameOfYourDll.psm1**：

```
Import-module "$((Get-ModulePath)[0])mycustomcmdlet\mycustomcmdlet.dll"
set-alias gdl Get-DirectoryListing -scope Global 
```

对于更多的提余模块构建，还请查看[模块清单](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878337%28v=vs.85%29.aspx)

[模块清单是带有自定义 cdmlets 的 .dll 的首选方式](http://kungfukode.blogspot.it/2011/05/write-your-first-powershell-cmdlet-in-c.html)。

# iphone - UISplitViewController 中的 UITableViewController

> ID：13583607
> 
> 赞同：2
> 
> 时间：2012-11-27T11:48:24.347
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

当用户在主视图中选择一个单元格时，我正在尝试加载一个特定`UITableViewController`的细节视图；`UISplitViewController`但有一些问题。当我选择单元格时，它只显示一个没有表格视图控制器的空白窗口。

但是，如果我将 App Delegate 更改为仅加载`UITableView`控制器而不使用`UISplitViewController`它，它工作正常，所以我知道这是我编码方式的问题`UISplitViewController.`

**视图层次结构：**

```
UISplitViewController 
--> 
    UINavigationController 
    --> UITableViewController (DetailViewController)

    UINavigationController
    --> UIViewController (ColorViewController) 
```

用户选择一个单元格`ColorViewController`，这应该改变`DetailViewController.`

在`AppDelegate.m`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{

self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];

self.viewController = [[ViewController alloc] init];

self.window.rootViewController = [self.viewController splitViewController];

[self.window makeKeyAndVisible];

return YES;

} 
```

在`ViewController.m`：

```
- (UIViewController *) splitViewController {

// Create the navigation-run root view
ColorViewController *rootVC = [ColorViewController controller];

UINavigationController *rootNav = [[UINavigationController alloc] initWithRootViewController:rootVC];

// Create the navigation-run detail view
DetailViewController *detailVC = [DetailViewController controller];

UINavigationController *detailNav = [[UINavigationController alloc] initWithRootViewController:detailVC];

// Add both to the split view controller
svc = [[UISplitViewController alloc] init];

svc.viewControllers = [NSArray arrayWithObjects: rootNav, detailNav, nil];

svc.delegate = detailVC;

return svc;

} 
```

在`ColorViewController.m`：

```
@interface ColorViewController : UITableViewController

...    

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

UIViewController *controller = (UIViewController *)self.splitViewController.delegate;

TableViewController *tvc = [[TableViewController alloc] init];

[controller.view addSubview:tvc.view];

} 
```

更改 Detail 视图的最佳方法是`UISplitViewController`什么？我应该将替换视图添加到`UIViewController`上面还是有更好的方法？也许这就是我的问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:31:50.930

Since you have a navigation controller handling the detail side of your split view, your strategy should be to use it to push your new table view controller. When I've done this, I've kept references to both navigation controllers as properties in the app delegate so that I can use one or the other for push operations.

I'm not sure what the real purpose of your `ViewController` class is but if you move its `splitViewController` method into the app delegate it would be easier to change the navigation controllers from local variables to properties in a place where they can be easily accessed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:45:33.093

我要回答我自己的问题..

出于某种原因，在主视图（ColorViewController）中，细节对象`TableViewController *tvc`需要声明为实例变量，而不是方法中的变量。

之后，它可以正常工作并正确显示表格。

我真的不明白为什么，如果有人想解释一下。

干杯，

# ios - 如何从情节提要文件中获取现有的控制器对象？

> ID：13583608
> 
> 赞同：0
> 
> 时间：2012-11-27T11:48:25.797
> 
> 标签：ios, cocoa-touch, storyboard, viewcontroller, popover

我是 iOS 中故事板文件的新手。

据我所知，我拖入情节提要的对象（包括视图控制器对象）是现有实例，而不是虚拟类。

但是，谁拥有应用程序中的这些实例？应用代理？还是其他人？

现在我正在尝试从情节提要文件中获取一个控制器对象，并使用弹出框显示该控制器的视图。（我不想完全拖拽对象之间的关系线，`-addSubView:`用来实现popover视图中的所有子对象。）我认为必须有一种方法可以访问stroyboard文件中的独立控制器。

有什么建议么？

如果我在类中实现视图控制器`MyViewController`并使用 初始化一个新对象`[MyViewController new]`，我认为这将是另一个我不想要的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:11:42.940

从您的视图控制器中，您可以访问情节提要并实例化新的视图控制器：

```
NewViewController *newVC = [self.storyboard instantiateViewControllerWithIdentifier:@"MyNewViewController"]; 
```

然后，您可以在弹出窗口中使用它。

# php - Dropbox api - 你可以挂钩到 Dropbox 中的文件吗？- PHP

> ID：13583611
> 
> 赞同：0
> 
> 时间：2012-11-27T11:48:31.100
> 
> 标签：php, dropbox-api

我正在研究与另一个 api 集成的 Dropbox 可能性。

1.  你能在 dropbox 中获得一个文件的钩子吗？例如 - 一个 URL 来打开并重新保存文件的新内容。
2.  如果之前已授予权限，您还可以使用 Dropbox api 创建文件吗？也许是 .txt 或 .xls 文件等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:54:48.703

我相信保管箱使用本地文件夹来存储文件，然后使用某种后台守护程序来监视所述文件夹的更改。如果是这种情况，您可以简单地更改该文件夹中的文件，其余的应该是自动的。

如果我错了，请纠正我。

# java - java中的杰克逊JSON映射异常

> ID：13583620
> 
> 赞同：0
> 
> 时间：2012-11-27T11:49:06.280
> 
> 标签：java, json, mapping, jackson

我正在处理有时会发生变化的 json 数据。有时Segment只是一个列表，有时segment先是一个对象，然后是一个列表。我从一个 url 流式传输 json 数据，所以几天前我将它保存到一个 txt 文件中，这就是为什么今天的日期没有显示。编辑：更新了更改的 json 数据并添加了我拥有的所有片段。这是两个不同的 json 字符串： **这里的段只是一个列表**

```
{
  "timetableresult": {
    "ttitem": [
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BLT",
                "#text": "Buss"
              },
              "carrier": {
                "name": "Vasttrafik",
                "url": "http://www.vasttrafik.se/",
                "id": 279,
                "number": 100
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 20:10"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 21:10"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 21:10"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 21:13"
            }
          }
        ]
      },
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BLT",
                "#text": "Buss"
              },
              "carrier": {
                "name": "Vasttrafik",
                "url": "http://www.vasttrafik.se/",
                "id": 279,
                "number": 100
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 20:40"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 21:40"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 21:40"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 21:43"
            }
          }
        ]
      },
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BXB",
                "#text": "Expressbuss"
              },
              "carrier": {
                "name": "Swebus",
                "url": "http://www.swebus.se/",
                "id": 690,
                "number": 830
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "remarks": {
              "remark": [
                {
                  "@id": "A7",
                  "#text": "Djur ej tillatet"
                },
                {
                  "@id": "AA",
                  "#text": "Endast 2 klass"
                }
              ]
            },
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 20:50"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 21:55"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 21:55"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 21:58"
            }
          }
        ]
      },
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BLT",
                "#text": "Buss"
              },
              "carrier": {
                "name": "Vasttrafik",
                "url": "http://www.vasttrafik.se/",
                "id": 279,
                "number": 100
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 21:10"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 22:10"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 22:10"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 22:13"
            }
          }
        ]
      },
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BLT",
                "#text": "Buss"
              },
              "carrier": {
                "name": "Vasttrafik",
                "url": "http://www.vasttrafik.se/",
                "id": 279,
                "number": 100
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 21:40"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 22:40"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 22:40"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 22:43"
            }
          }
        ]
      },
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BLT",
                "#text": "Buss"
              },
              "carrier": {
                "name": "Vasttrafik",
                "url": "http://www.vasttrafik.se/",
                "id": 279,
                "number": 101
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 21:55"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 23:01"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 23:01"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 23:04"
            }
          }
        ]
      },
      {
        "segment": [
          {
            "segmentid": {
              "mot": {
                "@displaytype": "B",
                "@type": "BLT",
                "#text": "Buss"
              },
              "carrier": {
                "name": "Vasttrafik",
                "url": "http://www.vasttrafik.se/",
                "id": 279,
                "number": 100
              }
            },
            "direction": "Goteborg Nils Ericsonterminal",
            "departure": {
              "location": {
                "@id": 7400300,
                "@x": 12.932004,
                "@y": 57.720838,
                "name": "Boras Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 22:10"
            },
            "arrival": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 23:10"
            }
          },
          {
            "segmentid": {
              "mot": {
                "@displaytype": "G",
                "@type": "G",
                "#text": "Gang"
              },
              "distance": 218
            },
            "departure": {
              "location": {
                "@id": 7420483,
                "@x": 11.971856,
                "@y": 57.710275,
                "name": "Goteborg Nils Ericsonterminal"
              },
              "datetime": "2012-11-26 23:10"
            },
            "arrival": {
              "location": {
                "@id": 7400002,
                "@x": 11.973479,
                "@y": 57.708895,
                "name": "Goteborg Centralstation",
                "stationinfo": {
                  "@exists": "true"
                }
              },
              "datetime": "2012-11-26 23:13"
            }
          }
        ]
      }
    ]
  }
} 
```

由于字符有限，继续显示得稍微靠下一点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-11T15:45:13.883

只需使用 Json 节点即可：

```
public class Demo {

    public static void main(String[] args) throws IOException {
        String json = "{\n" +
                "  \"timetableresult\": {\n" +
                "    \"ttitem\": [\n" +
                "      {\n" +
                "        \"segmentId\": 1,\n" +
                "        \"value\": \"someVal\"\n" +
                "      },\n" +
                "      {\n" +
                "        \"segmentId\": 2,\n" +
                "        \"value\": \"someAnotherVal\"\n" +
                "      }\n" +
                "    ]\n" +
                "  }\n" +
                "}";

        ObjectMapper mapper = new ObjectMapper();
        JsonNode node = mapper.readValue(json, JsonNode.class);
        JsonNode jsonArray = node.get("timetableresult").get("ttitem");
        System.out.println(jsonArray.get(1)); //will return null if it couldn't find
    }
} 
```

它将自动创建一个包含所有需要的 json 映射的树结构。

Jackson 的最佳 maven 依赖项：

```
<dependency>
        <groupId>com.fasterxml.jackson.datatype</groupId>
        <artifactId>jackson-datatype-jsr310</artifactId>
        <version>${jackson.version}</version>
</dependency> 
```

文档： http: [//fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/JsonNode.html](http://fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/JsonNode.html)

# c - 使用 fork() 进行拆分过程-程序有什么问题

> ID：13583622
> 
> 赞同：0
> 
> 时间：2012-11-27T11:49:13.537
> 
> 标签：c, linux, fork

我真的很希望您能帮助我理解为什么在使用`fork()`命令后进程没有到达“子进程”。我正在尝试编写一个运行另一个程序的程序，但似乎该程序甚至没有到达子进程。我可以说，因为“子进程”没有被打印到屏幕上，我真的很想知道为什么。

这是代码的草图-我什至无法检查它是否正常，因为正如我所说，它甚至没有到达儿子进程，我总是得到“儿子退出错误”。

```
#include <sys/types.h>
#include <sys/wait.h>
#include <stdlib.h>
#include <assert.h>
#include <signal.h>
#include <string.h>
#include <stdio.h>
#include <dirent.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <fcntl.h>
#include <errno.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/time.h>
#include <time.h>

#define MAXARGV 5;

int main() {
    char* cmd;

    int child_status;

    char* s;
    char** argv;
    int counter;

    cmd= (char*) calloc( 5, sizeof(char)*20);
    s=(char*) calloc(1,sizeof(char)*20);
    argv=(char**) calloc(5, sizeof(char*)*20);

    printf("Please write a command\n");

    gets(cmd);

    counter = 0;

    while (strcmp(cmd, "exit") != 0) {

        int pid = fork();

        if (pid == 0) {
            printf("son process");

            while (sscanf(cmd, "%s", s) == 1) {

                strcpy(argv[counter], s);
                counter++;
            }

            execv(argv[0], argv);

            printf("the command is not legal");
            assert(0);

        }

        else {

            if (wait(&child_status) == -1) {
                printf("error waiting for pid=%d\n", pid);
                exit(-1);
            }

              if(WIFEXITED(child_status)!=0)
                    printf("son status=%d\n", WEXITSTATUS(child_status));
                else
                    printf("son exited with error\n");

        }

        printf("Please write a command");

        gets(cmd);

    }

    free(s);
    free(cmd);
    free(argv);
    printf("here as well");
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:07:42.040

1.  程序达到了`printf("son process")`很好，但这只是将字符串放在进程内部的缓冲区中，并且由于您没有这样`fflush()`做，因此它不会出现在屏幕上，并且在`exec`调用中与进程的其余内存一起被丢弃. 请注意，这`stdout`通常是行缓冲的，因此如果您在那里有换行符，它将自动刷新。默认情况下也是`stderr`无缓冲的，更适合调试打印 ( `fprintf(stderr, "child process")`)。
2.  您正在尝试组装从标准输入中读取的命令`argv`，但它只有内存用于给您的实际参数，因此您超出了此内存并出现分段错误。
3.  如果`WIFEXITED`给出零，您应该使用`WIFSIGNALED`and`WTERMSIG`来确认错误确实是 SIGSEGV。
4.  `assert(0)`不是在出错后终止进程的好方法。`exit(1)`是。断言仅适用于指示代码本身存在错误的条件，如果它们发生并且通常`NDEBUG`从生产代码中消除（通过定义）。

# node.js - Socket.io 的broadcast.emit 在这里使用不正确？

> ID：13583626
> 
> 赞同：1
> 
> 时间：2012-11-27T11:49:28.137
> 
> 标签：node.js, events, socket.io, broadcast

我正在练习的这个聊天应用程序（对 Node 和 Socket.IO 不熟悉）运行良好，只是我无法让服务器向所有客户端广播消息。我已经检查了不一致的变量（并且可能在玩耍时创建了一些变量，我很抱歉；P）但它不起作用？我很困惑，因为我没有收到任何控制台错误或类似的东西，这使得调试起来非常困难。可能是我第一次遇到回调如何以不需要的方式嵌套？

无论如何，这里有一些代码：

**应用程序.js：**

```
// Require dependencies
var express = require('express');
var app = express();
var http = require('http');
var server = http.createServer(app);
var io = require('socket.io').listen(server);

// Listen for connections
io.sockets.on('connection', function(client) {

  console.log("Someone is connecting...");

  client.on('join', function(name) {
    client.set('nickname', name);
    console.log(name+" has connected!");
    client.broadcast.emit('connected', name + " has connected");
  });

  // Receive messages from the client and broadcast them to everyone
  client.on('messages', function(data) {

    client.get('nickname', function(err, name) {
      client.broadcast.emit("chat", name + ": " + data);
    });

  });
});

// Without this line, the CSS will not work
app.use('/public', express.static(__dirname + '/public'));

// Route index.html to the root path
app.get('/', function(request, response) {
    response.sendfile(__dirname + "/index.html");
});

// Listen for GET requests to the server
server.listen(3000);
console.log("Listening on port 3000"); 
```

**索引.html：**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Chatapp</title>
        <link rel="stylesheet" type="text/css" href="public/default.css"></link>
    </head>
    <body>
        <h1 class="title">Chatapp</h1>

        <div id="wrapper">
            <div id="online">

            </div>

            <div id="body">
                <div id="status"></div>
                <div id="chat">

                </div>
            </div>

            <div id="input">
                <form id="chatform">
                    <input type="text" id="message"></input>
                    <input type="submit" id="send" value="Send!"></input>
                </form>
            </div>
            <div class="clear"></div>
        </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            // Wait until DOM is ready
            $(document).ready(function() {

                // Establish a connection to the server
                var server = io.connect('http://localhost:3000');

                // On submit, send the chat form message to the server, prevent default redirect and reset the chat form
                $('#chatform').submit(function(e) {
                    e.preventDefault();
                    var message = $('#message').val();
                    server.emit('messages', message);
                    $('#chatform')[0].reset();
                });

                server.on('connect', function(data) {
                    nickname = prompt('What is your nickname?');
                    $('#status').html('Connected to Chatapp as ' +nickname);
                    server.emit('join', nickname);
                });

                server.on('connected', function(data) {
                    $('<p>'+data+'</p>').appendTo('#chat');
                });

                // Listen for messages broadcasted to every client by the server - this does not work for some reason.
                server.on('chat', function(data) {
                    $(data).appendTo('#chat');
                });
            });
        </script>
    </body>
</html> 
```

**/public/default.css：**

```
body {
  margin:  0;
  padding:  0;
  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
}

a {
  color: #00B7FF;
}

#wrapper {
    margin: 0 auto;
    width:  940px;
    height: 500px;
    padding: 0;
    border: 1px solid #000;
}

#online {
    float: left;
    width: 188px;
    height: 480px;
    padding: 10px;
    border-right: 1px solid #000;
    background: #3d3d3d;
    color: #eee;
    box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #fff;
}

#body {
    float: left;
    width: 731px;
    height: 439px;
    padding: 0;
    border-bottom: 1px solid #000;
}

#status {
    color: #eee;
    height: 30px;
    border-bottom: 1px solid #000;
    background: #3d3d3d;
    padding-left: 10px;
    line-height: 30px;
    box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #fff;
}

#chat {
    background: #c4f2eb;
    height: 388px;
    padding: 10px;
    box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #fff;
}

#input {
    float: left;
    height: 60px;
    width: 731px;
}

.clear {
    clear: both;
}

h1.title {
    text-align: center;
}

input#message {
    float: left;
    margin: 0;
    width: 640px;
    height: 58px;
    border: none;
    font-size: 28px;
    padding-left: 10px;
    box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3);
}

input#message:focus {
    border: none;
    outline: none;
    box-shadow: inset 1px 1px 3px #55ba57, inset -1px -1px 3px #55ba57;
}

input#send {
    float: left;
    background: #55ba57;
    color: #fff;
    border: none;
    height: 60px;
    margin: 0;
    width: 81px;
    border-left: 1px solid #000;
    box-shadow: inset 1px 1px 0px #fff, inset -1px -1px 0px #fff;
}

input#send:hover {
    background: #489949;
    cursor: pointer;
}

input#send:active {
    background: #1e7520;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:29:32.247

好的，让我们把这个问题分解成许多小问题；）

1.  当你说你不能登录（或警告）`data`时，你在什么时候尝试这个？（来自您的评论的问题）

    如果这是在`server.on('connect', function(data) {...`你将永远不会得到任何数据。该`connect`事件纯粹是信息性的。

2.  这两者都不会将数据发送回客户端`connected\chat`。

    ```
    client.broadcast.emit('connected', name + " has connected");
    client.broadcast.emit("chat", name + ": " + data); 
    ```

    因此，如果您希望它们打印在同一个客户端窗口中，您还必须`client.emit`直接在它们下方，将消息发送到导致操作的客户端窗口。

    编辑：这来自文档：广播意味着向其他所有人发送消息，除了启动它的套接字。

3.  您的服务器广播`chat`事件，但您的客户端仅侦听`messages`事件。（固定的）

如果您有任何其他问题，请告诉我。

*   我不会将您在客户端上创建的套接字和服务器上的“客户端”称为“服务器”。让这一切有点混乱。;)

# ruby-on-rails-3 - 设置时间框的默认值

> ID：13583641
> 
> 赞同：0
> 
> 时间：2012-11-27T11:50:05.363
> 
> 标签：ruby-on-rails-3, jquery-mobile, datebox

我在 Rails 应用程序中使用 Datebox(timebox mode) jquerymobile 插件来选择几个小时。我正在尝试使用 defaultPickerValue 设置默认值，但我不知道如何添加它。

我只能找到有关它的文档 [http://dev.jtsage.com/jQM-DateBox1/demos/api/matrix.html#&ui-page=1-2](http://dev.jtsage.com/jQM-DateBox1/demos/api/matrix.html#&ui-page=1-2)

我已经尝试了很多这样的变化：

```
 <%= builder.text_field :start_time, "data-role" => "datebox", "data-options" => '{"mode": "timebox", "minuteStep": 15, "defaultPickerValue": "[12,0]" }'  %> 
```

和

```
<%= builder.text_field :end_time, "data-role" => "datebox", "defaultPickerValue" => "[12,0]",  "data-options" => '{"mode": "timebox", "minuteStep":15 }'%> 
```

是否只能在加载时通​​过脚本设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:09:28.577

您可以随时进行操作。

看看这个例子：

```
var defaultPickerValue = [12, 0, 0]; // 12 hour, 0 minutes, 0 seconds
$('#datePickerID').data('timebox').options.defaultPickerValue = defaultPickerValue; 
```

使用此格式设置任何其他需要的选项。

或者最好这样[做](http://jsfiddle.net/Gajotres/3x5PZ/8/)。这是一个更简单的解决方案。

# objective-c - Remove UIColor CGColor - KVC warning

> ID：13583644
> 
> 赞同：2
> 
> 时间：2012-11-27T11:50:14.553
> 
> 标签：objective-c, ios, key-value-coding, kvc, cgcolor

How to remove `[[UIColor grayColor] CGColor]` stupid warning?

```
[self setValue:
     [[UIColor grayColor] CGColor] 
          forKeyPath:[NSString stringWithFormat:@"_View_%@%d.layer.borderColor", 
              i>=10?@"":@"0", i]]; 
```

> Incompatible pointer types sending 'CGColorRef' (aka 'struct CGColor *') to parameter of type 'id'

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:52:04.353

cast CGColor to id type:

```
[self setValue:
     (id)[[UIColor grayColor] CGColor] 
          forKeyPath:[NSString stringWithFormat:@"_View_%@%d.layer.borderColor", 
              i>=10?@"":@"0", i]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T12:24:43.033

This will perform same as above code.

```
[self setValue:
 (id)[[UIColor grayColor] CGColor] 
      forKeyPath:[NSString stringWithFormat:@"_View_%02d.layer.borderColor", i]]; 
```

# c# - 删除孩子的父母

> ID：13583646
> 
> 赞同：0
> 
> 时间：2012-11-27T11:50:22.957
> 
> 标签：c#, xaml, windows-phone

```
<ListBox>
    <Grid>
        <Button Name="button1" Click="buttonDelete_Click"></Button>
    </Grid>
    <Grid>
        <Button Name="button2" Click="buttonDelete_Click"></Button>
    </Grid>
    <Grid>
        <Button Name="button3" Click="buttonDelete_Click"></Button>
    </Grid>
    <Grid>
        <Button Name="button4" Click="buttonDelete_Click"></Button>
    </Grid>
</ListBox> 
```

我正在使用按钮单击事件，我想`Grid` `((Button)sender).Parent`从列表框中删除，这样做我还删除了网格的所有子项，包括按钮本身。

请注意，在我的应用程序中，我使用 c# 在代码中的网格上添加了 19 个控件（包括按钮）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:10:54.087

```
Grid grid =   (((Button)sender).Parent) as Grid;
if(grid != null)
{
   ListBox listbox = grid.Parent as ListBox;
   if(listbox != null)
   {
     listbox.Children.Remove(grid);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:44:51.287

myListbox.Items.Remove(((sender as FrameworkElement).Parent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:00:18.597

试试这个

```
Grid _grid =   (Grid)(((Button)sender).Parent);
ListBox box = _grid.Parent as ListBox;
box.Children.Remove(_grid); 
```

# openerp - 如何在模块 B 中使用模块 A 的字段

> ID：13583647
> 
> 赞同：0
> 
> 时间：2012-11-27T11:50:26.140
> 
> 标签：openerp

我有两个模块机会和工作职位。我试图在“机会”模块中仅使用“职位”名称员工的一个字段。

我是 openerp 的新手，对 python 一无所知。所以我正在使用 openerp 的开发人员选项。我附上了我的两个模块文件。

是否有任何字段或其他属性，因此我的字段将使用其他模块值的值，例如：-

crm.lead xml 文件：-

```
<field name="name" module="hr.job" /> 
```

这里模块没有使用“hr.job”的值和使用“crm.lead”的值。如果我使用其他名称，它会给我“未找到字段”错误。

请专家帮助我 ![在此处输入图像描述](../Images/4e236c2444eec878e9e9702c6fd93516.png)

![在此处输入图像描述](../Images/48f5d36540fe0664f5c5981c673668c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:40:17.573

你似乎很困惑。您附加的是模块的**视图文件**，例如其中之一是名为 hr.job 的对象的表单视图。这不是您所说的“模块文件”。

您需要做的是从您想要的引用对象到您需要的目标对象创建一个**many2one**（或**many2many ）字段，这意味着在相应的****py 文件**中添加一个字段到您需要的任何类的列，而不是查看。一个名为opportunity_opportunity 的类的非常简单的示例：

```
class opportunity_opportunity (osv.osv):  
        _name = "opportunity.opportunity"  
        _columns = {  
                'name' : fields.char('Name', size=64),  
                'employee_id': fields.many2one('job.position','name')  
                 }  
opportunity_opportunity() 
```

您可以稍后将其添加到机会视图.xml 文件中作为任何其他字段：

`<field name="employee_id" string="Employee"/>`

更重要的是，我认为你需要先认真阅读和理解开发者书籍：[OpenERP 6.1 Developer Book](http://doc.openerp.com/v6.1/developer/index.html)

**编辑：**我刚刚注意到你昨天已经在这里[链接](https://stackoverflow.com/questions/13579178/one-module-fields-use-in-other-module)发布了同样的问题，这在stackoverflow中非常不受欢迎。在发布问题之前，请花点时间阅读 openerp 文档。

# python - 您将如何使用 Chef 安装 python 模块？

> ID：13583649
> 
> 赞同：7
> 
> 时间：2012-11-27T11:50:45.607
> 
> 标签：python, chef-infra, engineyard

我们使用默认安装了 Python 的 EngineYard。但是，当我们启用 SSL 时，我们从 logentries 厨师食谱中收到以下错误消息。

“警告：“ssl”模块不存在。使用不可靠的解决方法，无法验证主机身份。如果可能，请安装“ssl”模块或更新版本的 Python (2.6)。”

我正在寻找一种方法来安装带有厨师食谱的 SSL 模块，但我没有足够的经验。有人能指出我正确的方向吗？

资源：Logentries 厨师食谱：[https ://github.com/logentries/le_chef](https://github.com/logentries/le_chef)

Logentries 安永文档：[https ://logentries.com/doc/engineyard/](https://logentries.com/doc/engineyard/)

SSL 模块： http: [//pypi.python.org/pypi/ssl/](http://pypi.python.org/pypi/ssl/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-18T16:07:22.100

现在似乎有一个具有更好社区支持的解决方案（基于它记录在[opscode 网站](http://docs.opscode.com/lwrp_python.html)上的事实）。

你可以试试：

```
include_recipe 'python'
python_pip 'ssl' 
```

如记录：[here](https://supermarket.getchef.com/cookbooks/python)或[here](https://github.com/poise/python)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T23:51:25.070

我刚刚为此编写了一个配方，现在可以在 EngineYard 上运行最新的 Logentries 客户端。干得好：

```
file_dir = "/mnt/src/python-ssl"
file_name = "ssl-1.15.tar.gz"
file_path = File.join(file_dir,file_name)
uncompressed_file_dir = File.join(file_dir, file_name.split(".tar.gz").first)

directory file_dir do
  owner "deploy"
  group "deploy"
  mode "0755"
  recursive true
  action :create
end

remote_file file_path do
  source "http://pypi.python.org/packages/source/s/ssl/ssl-1.15.tar.gz"
  mode "0644"
  not_if { File.exists?(file_path) }
end

execute "gunzip ssl" do
  command "gunzip -c #{file_name} | tar xf -"
  cwd file_dir
  not_if { File.exists?(uncompressed_file_dir) }
end

installed_file_path = File.join(uncompressed_file_dir, "installed")

execute "install python ssl module" do
  command "python setup.py install"
  cwd uncompressed_file_dir
  not_if { File.exists?(installed_file_path) }
end

execute "touch #{installed_file_path}" do
  action :run
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:41:38.793

您可以使用 PythonBrew 安装新的 Python：[https](https://github.com/utahta/pythonbrew) ://github.com/utahta/pythonbrew 。只是让你在构建之前安装 libssl，否则它仍然无法使用 SSL。但是，根据警告，似乎 SSL*可能*有效，但无法验证主机。当然，这是 SSL 的主要目的之一，所以这很可能是行不通的。

高温高压

# java - 通过 SmartWatch 控件滚动

> ID：13583652
> 
> 赞同：3
> 
> 时间：2012-11-27T11:51:06.713
> 
> 标签：java, scroll, sony, sony-smartwatch

我非常喜欢 Sony 的具有滚动功能的 SmartWatch 扩展的外观和感觉，我希望在我的应用程序中也有同样的东西。是否有任何示例或指南如何实现这一点？

如果这些功能是 Utils 库的一部分，那就太好了，因为我认为没有必要浪费时间和脑力来实现今天每个程序员都认为理所当然的东西。我宁愿专注于我想开发的一些独特功能。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:24:06.923

您提到的滚动功能是在 SmartWatch 的固件中实现的，并且仅适用于 Notification 扩展。由于手表硬件的限制，目前无法将其应用于控制扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T12:41:06.293

FWIW我发现我可以通过将文本渲染到内存中的位图来模拟可滚动文本，然后显示位图列表，每个位图都是从位图中提取的块。

[http://damianblog.com/2014/01/12/sw2-scrollable-text/](http://damianblog.com/2014/01/12/sw2-scrollable-text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T20:30:26.317

SmartWatch 1 无法实现，但可以通过 SmartWatch 2 中的列表和画廊来实现。这是迄今为止唯一的方法。

# css - 粘性页脚在调整大小时会破坏布局

> ID：13583657
> 
> 赞同：2
> 
> 时间：2012-11-27T11:51:17.613
> 
> 标签：css

我正在使用来自（[Ryan Fait 网站](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)）的粘性页脚脚本，效果很好，但是当我调整浏览器大小（或最小化它）时，页脚会推到其他文本的顶部，并完全中断。

我在（[体育和活动网站](http://www.sportsandevents.co.za)）有一个活生生的例子

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:57:57.790

定义您的**ID** `#mian_content :overflow:hidden;`

**像这样**

```
#main_content {
    overflow: hidden;
} 
```

**结果是这个**

![在此处输入图像描述](../Images/56f3f8834f2048cd6501a4a97da582a9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:58:15.437

您忘记添加`clear:both`到您的`#footer, .push`规则。如下添加css，它将起作用。

```
#footer, .push {
    height: 202px;
    clear: both; /* add this */
} 
```

# asp.net - 我的 .net 路由有什么问题？

> ID：13583667
> 
> 赞同：0
> 
> 时间：2012-11-27T11:51:50.093
> 
> 标签：asp.net, asp.net-routing

我已经在线学习了一些教程，它们似乎都显示了使用 ASP.net Web 表单的 .net 路由的相同逻辑。当我执行下面的 URL 时，出现 404 错误。Test.aspx 位于此应用程序的根文件夹中。

[http://www.mydomain.com/member/abc](http://www.mydomain.com/member/abc)

这是我的 global.asax 内容：

```
 <%@ Application Language="C#" %>
<%@ Import Namespace="System.Web.Routing" %>

<script runat="server">

    void RegisterRoutes(RouteCollection routes)
    {
        routes.MapPageRoute(
            "TestABC",
            "member/{name}",
            "~/Test.aspx");
    }               

    void Application_Start(object sender, EventArgs e) 
    {
        RegisterRoutes(RouteTable.Routes);
    }

    void Application_End(object sender, EventArgs e) 
    {
        //  Code that runs on application shutdown

    }

    void Application_Error(object sender, EventArgs e) 
    {

    }

    void Session_Start(object sender, EventArgs e) 
    {
        // Code that runs when a new session is started

    }

    void Session_End(object sender, EventArgs e) 
    {
        // Code that runs when a session ends. 
        // Note: The Session_End event is raised only when the sessionstate mode
        // is set to InProc in the Web.config file. If session mode is set to StateServer 
        // or SQLServer, the event is not raised.

    }

</script> 
```

我的 web.config 文件有什么需要做的吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:43:39.300

我猜你的路由模块在你访问 iis 服务器时没有被触发。作为验证这是原因的测试：更改您的 webconfig 以根据请求运行所有托管模块。你需要设置这个：

```
<modules runAllManagedModulesForAllRequests="true"> 
```

如果解决了它，您可以阅读[此资源](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)，了解为什么不这样做:)

# jquery - 将 div 标签与另一个 div 标签对齐

> ID：13583669
> 
> 赞同：1
> 
> 时间：2012-11-27T11:51:53.483
> 
> 标签：jquery, css

感谢[Chris Moutray](https://stackoverflow.com/users/81053/chris-moutray) ，我有以下脚本几乎可以完美运行。

**jQuery：**

```
$('.navigation3').click(function(event) {
    var $nav3 = $(this),
        $dd = $nav3.next('.dropdown');

    $nav3.toggleClass('active');

    var offset = 20,
        offsettop = $nav3.offset().top + $nav3.height() + offset,
        offsetleft = $nav3.offset().left;

    $dd.css({
        top: offsettop,
        left: offsetleft
    });

    $nav3.hasClass('active') ? $dd.show() : $dd.hide();
});​ 
```

**问题：**

唯一的问题是`.dropdown`'s 出现了，所以 's 的左上角`.dropdown`紧挨着 's 的左下角`.navigation3`。

所以基本上，`.dropdown`'s 的唇应该在左侧。此刻，嘴唇在右侧。

**问题：**

如何让`.dropdown`s' 的右上角与 s' 的右下角对齐`.navigation3`？

**jsfiddle 示例：**

[http://jsfiddle.net/MTESY/19/](http://jsfiddle.net/MTESY/19/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:16:31.467

你可以这样尝试：

```
var leftoffset = $dd.width() - $nav3.width();

var offset = 20,
    offsettop = $nav3.offset().top + $nav3.height() + offset,
    offsetleft = $nav3.offset().left-leftoffset ; 
```

[http://jsfiddle.net/MTESY/20/](http://jsfiddle.net/MTESY/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:19:39.463

您可能需要考虑一种更语义化的方式来使用更少的 CSS 和 jQuery 编写菜单 - [**DEMO**](http://jsfiddle.net/MTESY/25/)

***HTML***

```
<ul id="menu">
    <li>click me 1
        <ul>
            <li>icon Default 1</li>
        </ul>
    </li>
    <li>click me 2
        <ul>
            <li>icon Default 2</li>
        </ul>
    </li>
    <li>click me 3
        <ul>
            <li>icon Default 3</li>
        </ul>
    </li>
</ul> 
```

***jQuery***

```
$("#menu > li").on("click", function() {
    var $ul = $(this).find("ul");
    if ( $ul.is(":hidden") ) { $ul.show(); } else { $ul.hide(); }
}); 
```

​</p>

***​CSS***

 *```
#menu {
    float: right;
    background:#555;
}

#menu li {
    float:left;
    padding:10px;
    cursor:pointer;
    position: relative;
}

#menu li ul {
    display: none;
    position: absolute;
    top: 40px;
    right: 0;
    white-space: nowrap;
    background: #c00;
} 
```*

# java - 如何使用递归将对象添加到具有已知路径的父级中

> ID：13583676
> 
> 赞同：0
> 
> 时间：2012-11-27T11:52:09.217
> 
> 标签：java

我有一些我无法弄清楚的问题。我正在使用简单模型实现的目录来模拟文件系统`Directory.java`

```
public class Directory  {

    public Directory(String name, List<Directory> directory) {
        this.name = name;
        this.directory = directory;
    }

    private String name;

    private List<Directory> directory; 
```

我的问题是我必须将新目录添加到具有指定路径的现有目录中（例如 test/test2/newdir）。我试图使用递归，但它并没有解决我的问题，因为当我更改目标目录时，root 保持不变。有人可以帮帮我吗？

翁德雷

编辑：我的递归方法

```
private static Directory _digIn(Directory dir, List<String> path, int depth) {
        if (depth < path.size()) {
            if (dir.getDirectory() != null) {
                for (Directory d : dir.getDirectory()) {
                    if (d.getName().equalsIgnoreCase(path.get(depth))) {
                        return _digIn(d, path, ++depth);
                    }
                }
            }
        } else {
            return dir;
        }
        return null;
    } 
```

此方法返回我所需的目录，我可以向其中添加新目录，但此更改不会反映在根目录中。

EDIT2：我的插入方法

```
public static void insertNewObject(Directory dirToSave, List<String> path) {
        Root root = getRoot(xmlFile);
        Directory dir = _digIn(root.toDir(), path, 0);
        if (dir.getDirectory() != null) {
            dir.getDirectory().add(dirToSave);
        } else {
            List<Directory> dirList = new ArrayList<>();
            dirList.add(dirToSave);
            dir.setDirectory(dirList);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:01:26.127

问题是，当您进行`root.toDir()`调用时，您很可能会创建一个**新** `Directory`对象，它是一个不同的对象，因此对此所做的所有更改`Directory`都不会反映在`root`.

我会提出两个选项来解决这个问题：

**1.让你的`Root`持有最高`Directory`。**

```
 class Root{
        Directory rootDir;
        public Directory toDir(){
            return rootDir;
        }
    } 
```

这将为您返回一个对`Directory`存储在其中的对象的引用`root`，因此当您执行插入方法时，这`Directory`将被更改并且更改将反映在`root`

**2.创建一个`Directory.createRoot()`可以给你一个新`root`元素的方法。**

在这种情况下，您可以使用`root.toDir()`仍会返回最顶层`Directory`( `dir`) 的当前方法。在你调用它的插入方法之后，只需执行一个`root = dir.createRoot();`这很可能会给你一个新`root`的关于目录结构的最新数据。

# javascript - 为什么我的一个模块的主干集合“未定义”而不是另一个？

> ID：13583680
> 
> 赞同：1
> 
> 时间：2012-11-27T11:52:17.617
> 
> 标签：javascript, ruby-on-rails, backbone.js, js-amd

我有以下两条路线。这个按预期工作：

```
panel:function(){
  app.layout.setView("div#content", new Answer.Views.Panel({
    collection:this.answers,
    useTemplate:"panels/"+path
  }));
  app.layout.render();
}, 
```

这个没有：

```
parkingNonDowntown:function() {
  var panel = new(Answer.Views.Panel.extend(ParkingNonDowntown.Views.Calculator.prototype))({
    collection: this.answers,
    useTemplate: "panels/requirements/city/parking_non_downtown"
  });
  app.layout.setView("div#content", panel);
  app.layout.render();
}, 
```

我可以从前者的模板访问集合，例如：

`<% answers.field_name %>`

但是相同的代码`undefined`在使用第二条路线的模板中给出。

我不认为该集合在 ParkingNonDowntown.Views.Calculator 中被覆盖 - ParkingNonDowntown 模块仅扩展 Backbone.View。

`this.answers`设置为`new Answer.collection()`，如下所示：

```
// Default collection.
Answer.Collection = Backbone.Collection.extend({
  model: Answer.Model,
  url: '/answers',      
}); 
```

我意识到这可能没有足够的信息，但有人有任何指示吗？（如果有帮助，代码是[开源](https://github.com/codeforamerica/opencounter/tree/master/app/assets/javascripts/app)的。）

# jakarta-ee - 用户取消基本认证后的空白页面

> ID：13583682
> 
> 赞同：2
> 
> 时间：2012-11-27T11:52:19.627
> 
> 标签：jakarta-ee, tomcat, basic-authentication, spring-security-kerberos

我在谷歌上搜索了很多关于这个问题的信息，但仍然没有找到，为什么会这样。当用户在浏览器中取消 BASIC auth 表单时，会出现空白页面。

在 Tomcat webapp 中设置了 401 页面，在 Firebug 中我可以看到 401 Unauthorized。

也许响应中缺少一些标题？

请帮忙！提前非常感谢。

更新我认为，我的帖子信息量不够：还有 BASIC auth 和 Spring Kerberos auth 的组合，当出现空白页时，标题是：

WWW-Authenticate Negotiate Basic realm="MyRealm"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:48:15.257

您可以尝试将错误代码自定义添加到您的`web.xml`.

```
<error-page>
  <error-code>401</error-code>
  <location>/errors/401.jsp</location>
</error-page> 
```

这将允许您正确处理错误并向用户提供转义...

HIH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T23:18:26.470

[在 Firefox 中启用 Kerberos 身份验证](http://docs.oracle.com/cd/E38689_01/pt853pbr0/eng/pt/tsec/task_EnablingKerberosAuthenticationinFirefox-836673.html)。设置参数

*   *network.negotiate-auth.delegation-uris；*
*   *network.negotiate-auth.trusted-uris；*

到*http://*所有 http url`s

# geometry - 具有偶数像素的直径的中点算法？

> ID：13583683
> 
> 赞同：2
> 
> 时间：2012-11-27T11:52:21.557
> 
> 标签：geometry, bresenham

使用[中点圆算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)，您可以绘制对称圆，每个像素只访问一次。由于算法的性质，它只能绘制奇数直径（2 * r + 1）的圆。是否可以扩展此算法，使其可以成功绘制直径为*偶数*像素的圆？

算法的一些要求：

*   像素只能绘制一次。
*   RAM非常昂贵。

如果确实不能修改中点圆算法来处理这个问题，那么下面的解决方案就可以了：

```
void DrawCircle(int x, int y, int diameter)
{
    if (diameter % 2 == 0)
        EvenWidthCircle(x, y, diameter / 2);
    else
        MidpointCircle(x, y, diameter / 2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:04:12.383

您可以对偶数直径使用中点算法，但您必须做一些修改，对于直径为 8 的圆，使用中点算法做一个直径为 7 的圆，然后：

```
2 | 1
-----
3 | 4 
```

对于象限 1 中的八分圆，什么都不做。对于 2，左移 1。对于 3，左移和下移。对于 4，向下移动，然后填充缺失的像素/块/无论你用什么做圆圈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T00:55:37.003

一般的想法是将每个像素分成 2x2 的子像素，使直径加倍，使其均匀。

# iphone - IOS Facebook SDK上传照片时如何使用UIProgressView

> ID：13583685
> 
> 赞同：1
> 
> 时间：2012-11-27T11:52:27.867
> 
> 标签：iphone, ios

我正在尝试使用 facebook 展示 een 照片上传的进度。上传工作正常。但我不知道如何显示进度。

当前的上传代码是这样的：

```
- (IBAction)delenFacebook:(id)sender {

  NSLog(@"share image");
  UIImage *img = _postImage.image;

  // if it is available to us, we will post using the native dialog
  BOOL displayedNativeDialog = [FBNativeDialogs presentShareDialogModallyFrom:self
                                                                initialText:nil
                                                                      image:img
                                                                        url:nil
                                                                    handler:nil];
  if (!displayedNativeDialog) {
    [self performPublishAction:^{

        [FBRequestConnection startForUploadPhoto:img
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                   [self showAlert:@"Photo Post" result:result error:error];

                               }];

    }];
  }
} 
```

# vb.net - Datagridviewrow 使用列名而不是索引

> ID：13583687
> 
> 赞同：2
> 
> 时间：2012-11-27T11:52:34.790
> 
> 标签：vb.net, datagridview

这是我在下面使用的代码

```
Dim lname As New DataGridViewColumn

lname.Name = "LastName"
lname.DataPropertyName = "LastName"
DataGridView1.Columns.Add(lname)

Dim itrow = New DataGridViewRow    
itrow.CreateCells(DataGridView1)                
itrow.Cells(0).Value = empcoll.Item(i).LastName <<works
itrow.Cells("LastName").Value = empcoll.Item(i).LastName <<error column name can't be found 
```

我在使用`datagridviewrow.cells("column name")`. 任何人都可以启发或帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:46:23.620

试试这个（如果它有效，我会稍微改变一些东西来尝试代码）：

```
 Dim lname As New DataGridViewColumn
  lname.Name = "LastName"
  lname.DataPropertyName = "LastName"
  lname.CellTemplate = New DataGridViewTextBoxCell 'I had to add this to my code

  DataGridView1.Columns.Add(lname)

  Dim itrow As New DataGridViewRow
  itrow = DataGridView1.Rows(DataGridView1.Rows.Add())
  itrow.Cells("LastName").Value = "Give here your Value" 
```

# mysql - 如何合并两个查询？

> ID：13583692
> 
> 赞同：1
> 
> 时间：2012-11-27T11:52:53.793
> 
> 标签：mysql, sql

这是第一个查询：

```
SELECT 
    SUM(otkupbody_mobile.bruto) AS bruto,
    SUM(otkupbody_mobile.neto) AS neto,
    SUM(otkupbody_mobile.muvla) AS muvla,
    COUNT(*) AS broj_bali
FROM otkupbody_mobile,
     otkupheader_mobile 
WHERE
(
    (otkupheader_mobile.unique_id=otkupbody_mobile.unique_id) 
) 
```

这是第二个：

```
SELECT
    SUM(otkupbody.bruto) AS bruto,
    SUM(otkupbody.neto) AS neto,
    SUM(otkupbody.muvla) AS muvla,
    COUNT(*) AS broj_bali
FROM otkupbody,
     otkupheader
WHERE
(
    (otkupheader.unique_id=otkupbody.unique_id) 
) 
```

我怎样才能进行一个查询，它会给我两个查询的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:55:30.693

尝试：

```
SELECT 
SUM(otkupbody_mobile.bruto) AS bruto,
SUM(otkupbody_mobile.neto) AS neto,
SUM(otkupbody_mobile.muvla) AS muvla,
COUNT(*) AS broj_bali
FROM otkupbody_mobile,
otkupheader_mobile 
WHERE
(
(otkupheader_mobile.unique_id=otkupbody_mobile.unique_id) 
)
UNION ALL
SELECT 
SUM(otkupbody.bruto) AS bruto,
SUM(otkupbody.neto) AS neto,
SUM(otkupbody.muvla) AS muvla,
COUNT(*) AS broj_bali
FROM otkupbody,
otkupheader
WHERE
(
(otkupheader.unique_id=otkupbody.unique_id) 
) 
```

如果您不需要重复，而不是`UNION ALL`使用普通`UNION`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:59:35.137

如果您想将*列*合并在一起，您可以简单地使用它。输出将是包含所有提及列的一行**：**

```
Select  A.*
,   B.*
    From    (
    SELECT  SUM(otkupbody_mobile.bruto) AS bruto,
        SUM(otkupbody_mobile.neto) AS neto,
        SUM(otkupbody_mobile.muvla) AS muvla,
        COUNT(*) AS broj_bali
        FROM otkupbody_mobile,
        otkupheader_mobile 
        WHERE   otkupheader_mobile.unique_id=otkupbody_mobile.unique_id
    )   As  A
    ,   (
    SELECT  SUM(otkupbody.bruto) AS bruto,
        SUM(otkupbody.neto) AS neto,
        SUM(otkupbody.muvla) AS muvla,
        COUNT(*) AS broj_bali
        FROM otkupbody,
        otkupheader
        WHERE
        (
        (otkupheader.unique_id=otkupbody.unique_id) 
        )
    )   As  B 
```

`UNION`或者，如果要合并行，可以在查询之间使用子句。使用`union`时应注意两个结果必须具有相同的列。输出将是**两**行，其中包含**第一个**查询的列。像这样：

```
 SELECT  SUM(otkupbody_mobile.bruto) AS bruto,
        SUM(otkupbody_mobile.neto) AS neto,
        SUM(otkupbody_mobile.muvla) AS muvla,
        COUNT(*) AS broj_bali
        FROM otkupbody_mobile,
        otkupheader_mobile 
        WHERE   otkupheader_mobile.unique_id=otkupbody_mobile.unique_id
UNION
    SELECT  SUM(otkupbody.bruto) AS bruto,
        SUM(otkupbody.neto) AS neto,
        SUM(otkupbody.muvla) AS muvla,
        COUNT(*) AS broj_bali
        FROM otkupbody,
        otkupheader
        WHERE
        (
        (otkupheader.unique_id=otkupbody.unique_id) 
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:57:02.713

使用 UNION ALL。总而言之，对结果使用 SUM。像这样：

```
select sum(bruto), sum(neto), sum(muvla), sum(broj_bali) from (
  SELECT 
  SUM(otkupbody_mobile.bruto) AS bruto,
  SUM(otkupbody_mobile.neto) AS neto,
  SUM(otkupbody_mobile.muvla) AS muvla,
  COUNT(*) AS broj_bali
  FROM otkupbody_mobile,
  otkupheader_mobile 
  WHERE
  (
  (otkupheader_mobile.unique_id=otkupbody_mobile.unique_id) 
  )
    UNION ALL
  SELECT 
  SUM(otkupbody.bruto) AS bruto,
  SUM(otkupbody.neto) AS neto,
  SUM(otkupbody.muvla) AS muvla,
  COUNT(*) AS broj_bali
  FROM otkupbody,
  otkupheader
  WHERE
  (
  (otkupheader.unique_id=otkupbody.unique_id) 
  ) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/e4d11/4)

# jquery - 使用 Javascript 突出显示多个 HTML 元素

> ID：13583694
> 
> 赞同：1
> 
> 时间：2012-11-27T11:52:57.440
> 
> 标签：jquery, html, css

使用 jQuery，我可以通过向元素添加 css 来突出显示单个 HTML 元素，如下所示：

```
$("div:contains('simple')").css("border", "4px solid blue"); 
```

我想知道是否可以同时突出显示多个元素，例如

```
<h2>A title here</h2>
<div>Some content here</div>
<h2>A another title here</h2>
<div>Some more content here</div> 
```

我怎样才能突出第一个`h2`和第一个`div`？

我知道我可以创建一个父级`div`来保存元素，但是新创建的`div`可能会影响原始布局，例如

```
<p>I want to highlight <span>this</span> <strong>and this</strong></p> 
```

我需要根据上下文`display`为父级设置属性，对吗？`div`有没有更好的方法来实现目标？

提前谢谢了。

**编辑**

我可以为这两个元素获得一个突出显示框（或其他突出显示效果，如背景）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:57:18.460

您可以用逗号分隔不同的选择器：

```
$("div:contains('simple'), h2:contains('simple')").css("border", "4px solid blue"); 
```

以下是相关文档： [http ://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

> 我可以为这两个元素获得一个突出显示框（或其他突出显示效果，如背景）吗？

这在很大程度上取决于您的 HTML。以您的 h2/div 示例为例，一旦 H2 和 div 具有相同的宽度，您就可以使它看起来具有共同的边框： CSS：

```
div.highlighted, h2.highlighted {
   border:4px solid blue;
}
div.highlighted {
    border-top:none;/*remove top border for a div*/
}
div.highlighted {
    border-bottom:none;/*remove bottom border for a h2*/
} 
```

而不是 JS：

```
$("div:contains('simple'), h2:contains('simple')").addClass("highlighted"); 
```

在其他情况下，您可能需要做其他事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:57:29.867

有几种方法可以实现这一点。一种方法是将类添加到第一个 h2 和 div，并将其用作您的选择器：

```
$(".class-name-that-you-have-added").css("border", "4px solid blue"); 
```

一个很好的读物是这样的：[jQuery 选择器](http://api.jquery.com/category/selectors/)

# knockout.js - 使用相同的 obervable knockoutjs 绑定多个输入以执行相同的操作

> ID：13583697
> 
> 赞同：5
> 
> 时间：2012-11-27T11:52:59.250
> 
> 标签：knockout.js

我想用相同的 observable 绑定多个文本输入（相同的操作）

```
<input id="test1" name="test1" type="text" data-bind="value: searchQuantity"/>
<input id="test2" name="test2" type="text" data-bind="value: searchQuantity"/>

var viewModel = {
        searchQuantity: ko.observable(),
    };

<p>You have typed: <span id="spantest1" data-bind="text: searchQuantity"></span></p>
<p>You have typed: <span id="spantest2" data-bind="text: searchQuantity"></span></p> 
```

但是当我更改输入 test1 的值时，它会更改 test2 的值。

我想对两个输入执行相同的操作，但我想更改对应跨度的值。（这只是一个示例，因此我可以在带有文本框的网格上执行相同的操作；我希望在更改文本框时重新计算包含更改后的文本框的同一列上所有文本框的总和。）

* * *

我想我没有很好地解释我的问题。

请看一下截图
![在此处输入图像描述](../Images/09373384c2515499e1e0104fb97e701e.png)

我真正想要的是在更改红色文本框中的值时，绿色单元格将使用列的总和进行更新（总和将按年份计算）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:24:40.020

请看一下我为您创建的[这个演示。](http://jsfiddle.net/pkysylevych/7fUGw/)
**HTML 代码**

```
<input id="test1" name="test1" type="text" data-bind="value: searchQuantity1, valueUpdate:'afterkeydown'"/>
<input id="test2" name="test2" type="text" data-bind="value: searchQuantity2, valueUpdate:'afterkeydown'"/>

<p>Test1 value is : <span id="spantest1" data-bind="text: searchQuantity1"></span></p>
<p>Test2 value is : <span id="spantest2" data-bind="text: searchQuantity2"></span></p>
<p>Sum: <span id="spantest3" data-bind="text: spans"></span></p> 
```

**Javascript代码**

```
var viewModel = function(data) {
  var self = this;
  self.searchQuantity1 = ko.observable(1);
  self.searchQuantity2 = ko.observable(2);
  self.spans = ko.computed(function() {
      return Number(self.searchQuantity1 ())+Number(self.searchQuantity2 ());
  }, self);
};

ko.applyBindings(new viewModel()); 
```

它回答你的问题了吗？
谢谢。

# sql - pl/pgsql 函数性能低下

> ID：13583700
> 
> 赞同：0
> 
> 时间：2012-11-27T11:53:03.770
> 
> 标签：sql, performance, postgresql, plpgsql

我有一个不稳定的 pl/pgsql 函数。这是来源：

```
DECLARE
l RECORD;
events_for_machine integer;
before_event "PRD".events_log;
machines_ids integer[];
island_controller RECORD;
before_order "PRD".events_log;
before_detail "PRD".events_log;
before_pallete "PRD".events_log;
before_operation "PRD".events_log;
timer timestamp;
timer2 timestamp;

BEGIN
machines_ids = string_to_array(machines_ids_g,',')::integer[];
for l in 
select m.*
from
    "PRD".machines m
    inner join
    unnest(machines_ids) n(id) on n.id = m.id
where
    m.start_work_date < begin_date_g
order by m.id
LOOP

SELECT * INTO island_controller FROM "STRUCT".island_machines WHERE machine_id=l.id;

RAISE NOTICE 'pobieram zdarzenie before dla maszyny %',l.id;

    SELECT * INTO before_event FROM "PRD".events_log WHERE plc_time < begin_date_g AND (((event_type_id IN (1,51) AND machine_id = island_controller.controller_id AND island_id = island_controller.island_id))
    OR (event_type_id IN (2000,2001) AND machine_id=l.id)) ORDER BY plc_time DESC LIMIT 1;

IF before_event.plc_time IS NOT NULL THEN    

RAISE NOTICE 'Getting info about first machine work time struct element';
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 113 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 102 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 111 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 1010 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN NEXT before_event;

END IF;
RAISE NOTICE 'generuje zdarzenia wlasciwe dla maszyny %',l.id;
    RETURN QUERY SELECT * FROM "PRD".events_log WHERE 
            (event_type_id = ANY ('{1,51}'::integer[]) AND (machine_id=island_controller.controller_id AND island_id = island_controller.island_id) AND (plc_time BETWEEN begin_date_g AND end_date_g))
            OR (event_type_id = ANY ('{2000,2001,107}'::integer[]) AND machine_id=l.id AND (plc_time >= begin_date_g AND plc_time <= end_date_g))
            OR ((event_type_id = ANY ('{101,102,103,301,1010}'::integer[]) OR ((event_type_id >= 5000) AND (event_type_id <= 5999))) AND machine_id=l.id AND plc_time >= begin_date_g AND plc_time <= end_date_g) ORDER BY plc_time;

RAISE NOTICE 'koniec dla maszyny %',l.id;
END LOOP;

END; 
```

对于相同的参数，有时函数执行时间约为 9 秒，有时约为 40 秒。它取决于什么？
什么会如此低效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:06:24.197

问题不止一个。我不能说有什么问题，但是当它在缓存（postgresql，文件系统）中找到必要的数据时可能会很快，如果没有的话会很慢（取决于有多少循环）。

怎么了：

无用的加入

```
machines_ids = string_to_array(machines_ids_g,',')::integer[];
for l in 
select m.*
from
    "PRD".machines m
    inner join
    unnest(machines_ids) n(id) on n.id = m.id 
```

你可以写

```
for l in
   select *
      from "PRD".machines m
     where m.id = ANY(string_to_array(machines_ids_g,',')::integer[])
loop 
```

很多重复的查询

```
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 113 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 102 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 111 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1;
RETURN QUERY SELECT * FROM "PRD".events_log WHERE event_type_id = 1010 AND machine_id=l.id AND plc_time < before_event.plc_time ORDER BY plc_time DESC LIMIT 1; 
```

它可以替换为

```
RETURN QUERY SELECT *
                FROM "PRD".events
               WHERE (event_type_id, plc_time) = (SELECT max(plc_time), event_type_id
                                                     FROM "PRD".events
                                                    WHERE event_type_id IN (113,102,111,1010)
                                                    GROUP BY event_type_id); 
```

可能复合索引（event_type_id，plc_time）应该有帮助

注意力：

图案：

```
FOR n IN SELECT
   SELECT .. WHERE ..=n
END FOR 
```

当循环太多时可能会很慢，并且在可能的情况下最好使用一个查询

# maven - Maven 发布插件错误

> ID：13583704
> 
> 赞同：1
> 
> 时间：2012-11-27T11:53:23.467
> 
> 标签：maven, jenkins, maven-3, classnotfoundexception, maven-release-plugin

我正在使用[Jenkins M2 发布插件](https://wiki.jenkins-ci.org/display/JENKINS/M2+Release+Plugin)，它在内部调用**maven-release-plugin 2.3.2**。我收到了这个错误：

```
 Waiting for Jenkins to finish collecting data
    mavenExecutionResult exceptions not empty
    message : Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare (default-cli) on project pms: Execution default-cli of goal org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare failed: A required class was missing while executing org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare: org.sonatype.plexus.components.cipher.PlexusCipher
    realm =    plugin>org.apache.maven.plugins:maven-release-plugin:2.3.2
    strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
...

    cause : Execution default-cli of goal org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare failed: A required class was missing while executing org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare: org.sonatype.plexus.components.cipher.PlexusCipher
    -----------------------------------------------------
    realm =    plugin>org.apache.maven.plugins:maven-release-plugin:2.3.2
    strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
    urls[0] = file:/opt/.../repository/org/apache/maven/plugins/maven-release-plugin/2.3.2/maven-release-plugin-2.3.2.jar
    urls[1] = file:/opt/.../repository/org/apache/maven/release/maven-release-manager/2.3.2/maven-release-manager-2.3.2.jar
...

    Number of foreign imports: 1
    import: Entry[import  from realm ClassRealm[maven.api, parent: null]]

    -----------------------------------------------------

        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:127)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 27 more
    Caused by: org.apache.maven.plugin.PluginContainerException: A required class was missing while executing org.apache.maven.plugins:maven-release-plugin:2.3.2:prepare: org.sonatype.plexus.components.cipher.PlexusCipher
    -----------------------------------------------------
    realm =    plugin>org.apache.maven.plugins:maven-release-plugin:2.3.2
...

    Caused by: java.lang.ClassNotFoundException: org.sonatype.plexus.components.cipher.PlexusCipher
        at java.lang.ClassNotFoundException.<init>(ClassNotFoundException.java:76)
        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:38)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
        ... 169 more
    channel stopped
    Finished: FAILURE 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:13:31.850

理想情况下，您不应该在向全世界发布的稳定 Maven 版本中获得此类 java 依赖异常。如果你仍然这样做，机会是

1.  要么这是一个有据可查的错误，而且应该很容易使用搜索引擎找到。
2.  如果您无法到达这样的地方，那么至少值得这样做一次：清除所有内容并从头开始，然后再在 QA 网站上提出此问题。

在上述情况下，对我有帮助的是选项 2。

# javascript - 使用 goog.events.listen 传递参数

> ID：13583706
> 
> 赞同：2
> 
> 时间：2012-11-27T11:53:27.330
> 
> 标签：javascript, events, click, google-closure, google-closure-library

我正在使用 Google Closure 的事件处理，如下所示：

```
goog.events.listen(this.contentElement, goog.events.EventType.CLICK, this.openEditor); 
```

但我需要将一个字符串作为参数传递给函数`this.openeditor`

我浏览了文档，但似乎无法弄清楚如何做到这一点，有人有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T13:36:37.093

尝试使用[goog.partial](https://closure-library.googlecode.com/svn/docs/namespace_goog.html#goog.partial)，如下所示：

```
goog.events.listen(this.contentElement, goog.events.EventType.CLICK, goog.partial(this.openEditor,'the string you want to pass it')); 
```

当`this.contentElement`被点击时，`this.openEditor`将被调用。第一个参数是字符串，第二个参数是事件对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-14T13:47:27.847

约书亚的上述回答是正确的 - 只是想添加更多信息。

**在 base.js 中定义的**goog.bind 与 goog.partial****

 **在 goog.partial 中，上下文设置为当前上下文 - 它返回一个在当前上下文中执行的函数。

```
goog.partial = function(fn, var_args) {
  var args = Array.prototype.slice.call(arguments, 1);
  return function() {
    // Clone the array (with slice()) and append additional arguments
    // to the existing arguments.
    var newArgs = args.slice();
    newArgs.push.apply(newArgs, arguments);
    return fn.apply(this, newArgs);
  };
}; 
```

在 goog.bind （实际上检查绑定的本机实现）中，您可以将上下文作为第二个参数传递

```
goog.bind = function(fn, selfObj, var_args) {
  //defined in base.js  
  ....
  ....
  return function() {
    return fn.apply(selfObj, arguments);
  };

} 
```**

# ruby-on-rails-3 - 尝试使用 Ruby on Rails 和 databasedotcom 对 OAuth2 和 Salesforce.com 进行身份验证

> ID：13583710
> 
> 赞同：1
> 
> 时间：2012-11-27T11:54:11.957
> 
> 标签：ruby-on-rails-3, oauth-2.0, databasedotcom-gem

我正在尝试使用 databasedotcom gem 通过 Salesforce.com 对我的应用程序进行身份验证。文档很薄弱，我是 OAuth 的新手。我已经在 Salesforce.com 中配置了我的应用程序并拥有我的密钥和密钥。我正在从我的环境中进行配置：

```
client = Databasedotcom::Client.new(:client_id => ENV['SALESFORCE_CONSUMER_KEY'], :client_secret => ENV['SALESFORCE_CONSUMER_SECRET']) 
```

现在我应该得到一个令牌并用它来进行身份验证。我如何获得令牌？有用于外部访问令牌的选项和使用用户名和密码获得的选项，但我不确定下一步该做什么或我应该如何获取令牌。文件继续，好像我已经拥有它并且应该知道它来自哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:21:40.850

If all you need is to access the REST API of SFDC.

you can do this:

```
client.authenticate :username => 'user@example.com', :password => '123' 
```

and then:

```
users = client.materialize('User').all 
```

for example the above will return all the users in the user's Org.

however...if you want follow the Oauth approach, and authenticate the databasedotcom gem using Oauth tokens, you can read more about oauth here: [http://help.salesforce.com/help/doc/en/remoteaccess_oauth_web_server_flow.htm](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_web_server_flow.htm)

i crafted my own oauth access flow using the above link (i used Net::HTTP class)

# ios6 - 使用 addObjectsFromArray 从 NSMutableArray 中检索值

> ID：13583713
> 
> 赞同：0
> 
> 时间：2012-11-27T11:54:16.910
> 
> 标签：ios6, nsmutablearray, nsdictionary

BookmarksPlist 是一个 NSMutableArray，它作为字典存储在 Plist 文件中。以下代码...

```
bookmarks = [[NSMutableArray alloc] init];
NSLog(@"BOOKMARKPLIST ----==== %@", BookmarksPlist);
[bookmarks addObjectsFromArray:BookmarksPlist];
NSLog(@"BOOKMARK ----==== %@", bookmarks); 
```

...产生：

```
2012-11-27 11:34:33.592 BOOKMARKPLIST ----==== {
    01Otabkey14tabkey1 = "Genesis 14";
    01Otabkey8tabkey1 = "Genesis 8";
    01Otabkey9tabkey1 = "Genesis 9";
}
2012-11-27 11:34:33.592 *** -[NSMutableArray addObjectsFromArray:]: array argument is not an NSArray
2012-11-27 11:34:33.593 BOOKMARK ----==== (
    01Otabkey8tabkey1,
    01Otabkey9tabkey1,
    01Otabkey14tabkey1
) 
```

所以问题是如何让书签数组获取 BookmarksPlist 数组的值而不是键？所以它看起来像这样：

```
2012-11-27 11:34:33.593 BOOKMARK ----==== (
    "Genesis 14",
    "Genesis 8",
    "Genesis 9"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:01:45.247

`BookmarksPlist`可能是一本字典。您可以从字典中获取键，使用 获取`allKeys`值`allValues`。

# web-services - 首次调用 JAX-WS Web 服务太慢

> ID：13583721
> 
> 赞同：10
> 
> 时间：2012-11-27T11:54:50.963
> 
> 标签：web-services, jaxb, axis2, websphere-7

## 概述：

目前我们有一个包含多个模块的 Web 应用程序。我们正在使用以下技术堆栈

1.  JAX-WS
2.  Spring框架（除了spring MVC）
3.  JSF
4.  休眠

***应用服务器：*** IBM Websphere 7.0（生产）、Apache Tomcat 7.0.X（开发） 我们使用 JAX-WS 注释将类标记为 Web 服务，除此之外，我们不在数据对象中使用任何 JAXB 注释，我们将离开ws 运行时的这个任务。

## 问题陈述：

一旦我们在 Apache Tomcat 上部署应用程序，Web 服务就不会在 AS 上发布。作为解决方案，我们需要在 spring 上下文文件中添加“org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter”属性，然后 Web 服务开始正常工作。但是当我们在 WAS 上部署应用程序时，Web 服务会在没有设置上述属性的情况下发布。当我们向 Web 服务发出第一个请求时，它响应缓慢，在这个问题的研发过程中，我们发现了以下情况；

1.  IBM 使用 AXIS2 Web 服务引擎
2.  JAXB 实现加载类，就像`className_used_in_web_service_method$JaxbAccessorM_getFieldName_setFieldName_java_util_Set from: <unknown>`层次结构中的所有类一样。这只是第一次发生。我们试图在应用程序启动时加载这些，但未能成功。谁能帮助我们解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:23:19.547

在 web.xml 中尝试 AxisServlet load-on-startup

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:57:00.883

您是否尝试使用`SimpleHttpServerJaxWsServiceExporter`而不是`SimpleJaxWsServiceExporter`？

似乎`SimpleHttpServerJaxWsServiceExporter`在完成端点配置后立即启动 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T13:56:45.193

您可以创建自己的实现`ServletContextListener`

例如：

```
package kernel.flowcontrol;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class WsLifecycleListener implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {

    // some init work ...

    }

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) {}
} 
```

并将其添加到`web.xml`：

```
<listener>
    <listener-class>kernel.flowcontrol.WsLifecycleListener</listener-class>
</listener> 
```

# java - 比较从同一基础派生的不同类的对象

> ID：13583724
> 
> 赞同：2
> 
> 时间：2012-11-27T11:55:08.890
> 
> 标签：java, inheritance, comparison

我有两个类，比如说 DerivedOne 和 DerivedTwo，它们派生自基类 Base。

假设我有这些：

```
DerivedOne d1;
DerivedTwo d2; 
```

当我比较 d1 和 d2 时，我希望 d1 总是更小，换句话说，DerivedOne 的对象应该比 DerivedTwo 的对象具有更高的优先级。最好/最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:57:37.847

我不知道这是否是最好的，但我建议`instanceof`在比较器中使用运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:58:29.753

在超类中声明一个变量为优先级。

在子类构造函数中，初始化它。

```
class A
{
int priority;
}

class Derived1
{
 Derived1()
 {
  priority=1;
 }
}

class Derived2
{
Derived2()
{
priority=0;
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T11:59:37.020

很可能是正确实施[`java.util.Comparator<YourSuperClass>`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T12:02:51.283

使两个对象都实现[`Comparable<Derivedparent>` `interface`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)（或父实现和子类覆盖），然后在 CompareTo 方法中放置如下内容：

```
public class DerivedOne{

public int compareTo(DerivedParent dp){
 if (dp.instanceOf(DerivedTwo){
  return -1;
 }
 //More comparisons
}
}

public class DerivedTwo{

public int compareTo(DerivedParent dp){
 if (dp.instanceOf(DerivedOne){
  return 1;
 }
 //More comparisons
}
} 
```

# android - 在地图上为一组坐标创建最佳路线

> ID：13583726
> 
> 赞同：0
> 
> 时间：2012-11-27T11:55:15.460
> 
> 标签：android, google-maps, geolocation, location

我有一组坐标，我将从一个位置的地址中提取。现在，我的任务是为这些点生成一条最佳路径。我怎样才能完成这项任务？我已经看到了为两点生成路线的示例。但是当有多个目的地要覆盖时，我无法想象它的规模更大。我正在将此功能用于 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:13:22.443

如果您必须按特定顺序访问它们，则问题可以简化为求解两点的路径：只需使用相邻的坐标对以相同的方式解决问题，然后将连接起点和终点的路径缝合在一起。

如果您必须以任何顺序访问它们并优化行驶距离，那么您正在解决实际上是 NP-Hard的[旅行商问题。](http://en.wikipedia.org/wiki/Travelling_salesman_problem)唯一确切的解决方案是尝试所有排列，实际上，它与前面的情况类似，但是对于大量点的练习将花费太多时间。首先，求解每对点的最短路径，只保留距离以节省内存。这将需要 n(n-1)/2 次操作。接下来，生成坐标集的每个排列，并使用先前计算的数据计算与它们关联的路径。距离最短的排列（以及与之相关的路径）将是您的最佳序列。使用第一段中提到的方法再次生成路径。

算法的第一步可能看起来很耗时，但实际上第二步是非多项式的。有运行速度更快的非精确解决方案，但它们的可靠性各不相同。您将不得不使用反复试验来确定它们是否适合您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:59:15.600

这是一个“寻路”或“路由”问题：

[http://en.wikipedia.org/wiki/Pathfinding](http://en.wikipedia.org/wiki/Pathfinding)

并且经常遇到 Dijikstra 的算法：

[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

或将其概括称为“A* 算法”：

[http://en.wikipedia.org/wiki/A-star_algorithm](http://en.wikipedia.org/wiki/A-star_algorithm)

最近几年，这些东西已经演变成“收缩层次”算法：

[http://en.wikipedia.org/wiki/Contraction_hierarchies](http://en.wikipedia.org/wiki/Contraction_hierarchies)

这更快，更有效。

那里有一些寻路/路由引擎。最好的可以说是开源路由机：

[http://project-osrm.org/](http://project-osrm.org/)

你可以在那里找到更多的引擎。只需谷歌搜索“地图路由”或“寻路”。

通常，引擎是您必须通过网络访问的（RESTful）Web 服务，而不是可以嵌入到 Java/Android 项目中的库。

# c - C：将字符串数组作为函数参数传递

> ID：13583736
> 
> 赞同：8
> 
> 时间：2012-11-27T11:55:58.713
> 
> 标签：c, arrays, string, function, arguments

所以我有一个文件**main.c**，其中包括我制作的头文件**utils.h**，其中包含对源文件**utils.c中函数的前向引用**

### 在 utils.c 中：

我有一个接受字符串数组作为参数的函数，并将其作为菜单打印出来：

```
void showMenu(const char *menu[])
{
    int menulen = sizeof(menu)/sizeof(*menu);

    int i;
    for(i = 0; i < menulen; i++)
    {
        printf("[%d] .. %s\n", (i+1), menu[i]);
    }
} 
```

### 在 main.c 中：

我简单地调用这个函数：

```
const char *menu[] =
{
        "Customers",
        "Orders",
        "Products"
};

int main(void)
{
    showTitle("Customer Orders System");
    int menulen = sizeof(menu)/sizeof(*menu);
    showMenu(menu);
    getch();
} 
```

### 我的问题：

我的**showMenu**函数正在计算数组的长度，然后遍历它，打印字符串。当函数位于**main.c**时，这曾经可以工作，但我需要在单独的文件中组织这个项目。

现在计算长度为1。经过一些调试，我认为这是一个与指针相关的问题，但我似乎解决了它。**调用后showMenu**的参数是类型

```
const char** menu 
```

只有我的原始数组的第一个元素。

我尝试推迟参数，将数组的指针传递给它，并且同时传递两者。
奇怪的是，同一行代码在 main 函数中工作。我真的不想通过向函数添加一个数组参数长度来解决这个问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T11:58:13.483

这是因为数组在传递给像您这样的函数时会*衰减*为指向其第一个元素的指针，并且没有保留有关元素数量的信息。在声明数组的范围内，这种衰减没有发生，所以`sizeof`有效。

您必须添加数组长度作为额外参数，或者确保数组以适当的*标记*值终止。一个流行的这样的值是`NULL`，即您确保最后一个有效索引包含一个值为 的字符串指针`NULL`，然后指示“没有更多数据，停止”：

```
const char *menu[] =
{
    "Customers",
    "Orders",
    "Products",
    NULL /* This is a sentinel, to mark the end of the array. */
}; 
```

# c++ - 如何打开数据感知表单 RAD Studio C++ 的多个实例

> ID：13583737
> 
> 赞同：1
> 
> 时间：2012-11-27T11:56:00.063
> 
> 标签：c++, ado

我在 中创建了一个应用程序`RAD Studio XE C++`，现在我需要打开我使用`ADO`连接创建的数据感知表单的多个实例，每个实例都需要彼此独立的数据。

我可以使用以下代码打开表单的多个实例：

```
TFR_Form1 *FR_Form1 = new TFR_Form1(this); 
```

并且不在项目管理器中将表单设置为活动状态。问题在于，一个表格上的任何数据更改都会反映在所有其他表格上。

# android - 按下按钮时如何重复执行某些操作？

> ID：13583742
> 
> 赞同：8
> 
> 时间：2012-11-27T11:56:37.420
> 
> 标签：android, button, touch-event, ontouchlistener

我正在使用特定中间件（不重要）在 Android 中开发 TV-Remote Simulator 应用程序。

对于音量按钮（音量+和音量-），我要做的是在按下按钮时重复发送“音量调高”信号。

这就是我最后尝试的（其中一个按钮的代码，除了名称之外，另一个必须相同）：

1.  声明一个布尔变量

    ```
    boolean pressedUp = false; 
    ```

2.  使用以下 AsyncTask 声明了一个内部类：

    ```
    class SendVolumeUpTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... arg0) {
            while(pressedUp) {
                SendVolumeUpSignal();
        }
        return null;
    } 
    ```

    }

3.  将监听器添加到按钮：

    ```
    final Button buttonVolumeUp = (Button) findViewById(R.id.volup);
    buttonVolumeUp.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:

                if(pressedUp == false){
                    pressedUp = true;
                    new SendVolumeUpTask().execute();
                }

            case MotionEvent.ACTION_UP:

                pressedUp = false;

        }
            return true;
        }
    }); 
    ```

我还尝试使用简单的线程，例如[按下按钮时的增量 - 减量计数器，](https://stackoverflow.com/questions/7852360/increment-decrement-counter-while-button-is-pressed)但都没有工作。该应用程序适用于其余按钮（通道等），但完全忽略了音量变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:36:29.777

您忘记添加休息时间；在 MotionEvent.ACTION_DOWN: 案例的末尾。这意味着行pressedUp = false; 即使在那个动作上也会被执行。正确的做法是：

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    switch (event.getAction()) {

    case MotionEvent.ACTION_DOWN:

        if(pressedUp == false){
            pressedUp = true;
            new SendVolumeUpTask().execute();
        }
    break;
    case MotionEvent.ACTION_UP:

        pressedUp = false;

}
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:02:07.587

你有没有考虑过

*   [在onKeyDown](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)事件上开始你的重复任务
*   [在onKeyUp](http://developer.android.com/reference/android/view/View.html#onKeyUp%28int,%20android.view.KeyEvent%29) 事件上停止任务？

# mongodb - MongoDB非关系数据库问题？

> ID：13583746
> 
> 赞同：0
> 
> 时间：2012-11-27T11:57:03.403
> 
> 标签：mongodb, database

我有 mysql 的知识，但我正在尝试学习/理解 mongodb，到目前为止我遇到的问题是非关系数据库的想法。没有加入，这有点麻烦（但我明白为什么）。我希望您回答我的是以下问题的解决方案：

假设我们有帖子和评论。我们在 mongodb 中创建了两个对象，如果我们想显示某个用户对某个帖子的评论，我们只需查询每个对象，然后按 id 组合表。我不明白的是，如果已经评论过几个帖子的用户更改了他的昵称会发生什么。那么我们将如何解决这个问题。我是否必须更改用户曾经评论过的所有帖子和评论？

数据库架构：

```
POSTS
    text
    id

COMMENT
    text
    post_id
    author_name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:10:50.577

首先，我认为您提出了正确的问题。您是对的，作为一个非关系型数据库，MongoDB 不会为您管理参照完整性问题。如果确实存在引用完整性问题，这可能会让人有些头疼，因为如果您的某个用户修改了您的一条信息，您会发现自己处于可能需要更新大量文档的情况'已存储在您的所有文档中。让我们以你的例子为例，除了翻译成我通常期望的第一次尝试如何在 MongoDB 上设置它......

```
db.posts.save({
    author:"susan@yahoo.com",
    name:"Susan Person",
    text:"This is my first post. Isn't it fancy?",
    comments:[
         { author:"john@google.com", name:"John", text:"What a great post!" },
         { author:"sally@email.com", name:"Sally", text:"You really put some thought into this." }
    ]
});

db.authors.save({
    _id:"susan@yahoo.com",
    name:"Susan Person",
    favorite_icecream:"Chocolate",
}); 
```

我比你的例子更充实了一些东西，但我希望这能帮助你明白我要说什么。

所以。在没有听起来过于禅宗的情况下，我认为回答您问题的唯一方法是问另一个问题：*您真的需要用新昵称更新所有现有评论吗？*

根据我的经验，答案可能是否定的。但是，如果帖子的原作者（在这种情况下是苏珊）更改了他们的用户名，您可能想要这样做。那么你是怎么做到的呢？您首先修改作者文档，然后选择所有带有 { author:"susan@yahoo.com" } 的文档并更新这些帖子的作者。

使用您的经验和您对系统将如何使用的知识*来*决定您的架构。如果您确实需要确保评论的名称反映作者集合中的条目，那么您还必须为所有这些条目做额外的工作。

您的问题还有一些更高级的解决方案。例如，您可能决定需要快速访问帖子的前 10 条评论，然后您可以让用户等待，同时将其余评论从数据库中异步拉出并进行相关匹配将数据拉到一起。在这种情况下，您的架构看起来与上述类似，但您不会存储超过 10 条评论，并将名称复制到帖子上，您可能会将所有剩余评论存储在仅引用用户的附加集合中电子邮件。然后，当您去查找评论时，您可以对用户集合中的电子邮件进行第二次查询，并确保您获得最新的名称。随着时间的推移，评论会滚动，

有关您可能想要选择的不同选项的更详细比较，请参阅以下链接：

[http://www.alvinonmongodb.com/2012/07/schema-design-3-embedding-versus.html](http://www.alvinonmongodb.com/2012/07/schema-design-3-embedding-versus.html)

正如文章作者所说：

> 问题并不是真正的嵌入或链接，而应该是“我的用例和访问模式是什么”。如果你知道这一点，那么嵌入、链接或混合模型的决定就更容易做出了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:12:21.043

有不同的方法可以实现您想要的：

*   **使用 _id 代替名称**：这与 SQL 中的外键几乎相同，但您没有任何检查相关对象是否存在等等。当然，如果要显示用户名，则必须查询每个用户名。使用这意味着开销，但如果您的 MongoDB 上的负载不高，则应该不会太多。更好的是，根据你有多少用户，你可以在 id 和 username 上建立一个索引，这样用户名就保留在 RAM 中，这意味着读取速度很快。

*   **更新所有评论**：您可以在重命名后更新某个用户名的所有评论。为此，您可能希望将 user_id 存储在评论集合中的用户名旁边，然后查询 id 并更改用户名。我猜 MongoDB 有办法快速做到这一点。

*   **使用嵌入式集合**：MongoDB 中有嵌入式集合，可以解决其中一些问题并创建其他问题。您不想在评论中嵌入用户，但对于其他用例，这非常方便。我只是在这里提一下。

**使用 MongoDB**

总体问题是，在使用 NoSQL 数据库时，您必须考虑您的用例。不是“我们规范化我们的数据，然后看看我们如何编写查询”，而是“我们想这样那样使用数据，我们需要如何存储数据”。因此，从上述情况来看，可能还有其他更方便的解决方案。

也许它使用了一个特殊的 id 和前面的用户名（记住，id 可以是任何东西），然后使用应用程序来提取用户名。或者，它可能会保留某种合并文档的重复集合，其中评论和用户信息一起存储在他们自己的集合旁边，如果发生变化，可以重新生成。

习惯这种工作方式需要一些时间，但你会习惯的。如果您刚刚开始，您可能不会开发一个每秒点击 100000 次的平台，因此您可以只存储对象 id 并在需要时对该 id 进行第二次查询以获取用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:00:59.973

即使它是一个关系数据库，也不是一个很好的模式。您将在评论文档中使用 author_id 而不是 author_name。该 ID 对于该用户来说是唯一的。然后创建一个关联 author_name 和 author_id 的用户文档。

现在，当您更改作者时，它只会发生在一个文档中。

# qt - QTPropertyAnimation 未正确完成

> ID：13583748
> 
> 赞同：0
> 
> 时间：2012-11-27T11:57:19.680
> 
> 标签：qt, animation

我想要一个带有单击事件的按钮，该按钮可以打开带有动画的框架。在我升级到 QT 5 Beta 2 之后，框架刚好停在最后，留下一条细线。

![之前-期间-之后](../Images/b88aaf70f595c61b86f6113cb2683aac.png)

我有一个 QProperty 动画，每次单击按钮时，我都会这样做：

```
if(this->isOpen) {
    this->animation->setStartValue(this->openRect);
    this->animation->setEndValue(this->closedRect);
} else {
    this->animation->setStartValue(this->closedRect);
    this->animation->setEndValue(this->openRect);
}
this->isOpen = !this->isOpen;

this->animation->start(); 
```

`openRect`(300x300) 和`closedRect`(0x100) 在 init 中设置并且永远不会更改。

有人知道发生了什么吗？？

编辑

当我在窗口外单击时，小线消失了

# wpf - 根据选中或未选中的 DataGridCheckBoxColumn 清除数据网格单元格的内容

> ID：13583756
> 
> 赞同：1
> 
> 时间：2012-11-27T11:57:40.373
> 
> 标签：wpf, datagrid

我有一个包含 2 个单元格的数据网格。一个是DataGridCheckBoxColumn，另一个是DataGridTextColumn。当 DataGridCheckBoxColumn 未选中时，我想清除 DataGridTextColumn 的内容。数据来自数据库，但用户可以编辑它。请告诉我该怎么做

```
<DataGrid Name="--" ItemsSource="{Binding Saukhtemauns}">
   <DataGrid.Columns>
    <DataGridCheckBoxColumn  Header="--"   Binding="{BindingShenaseDarad}">                                                                
    </DataGridCheckBoxColumn>

    <DataGridTextColumn Header="--"  Binding="{Binding IDTakhribi}"/>                                                                                                                                
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:19:08.653

如果您分配为 DataGrid 源的类实现 INotifyPropertyChanged，您可以在视图模型端轻松执行此操作

内部 bool 属性更改将文本属性设置为空

```
public string StrPropertyThatBindedToGridColumn
{
   get{return _strProp;}
   set{_strProp = value; OnPropertyChanged("StrPropertyThatBindedToGridColumn");}
}

public bool BoolPropertyThatBindedToGridColumn
{
   get{return _bProp;}
   set{
        _bProp = value; 
        OnPropertyChanged("BoolPropertyThatBindedToGridColumn");
        if(value)
            StrPropertyThatBindedToGridColumn = null;
   }
} 
```

如果您正确处理 INotifyPropertyChanged，网格将跟随更改并更新 UI

# ldap - plone.app.ldap 为某些用户缓存错误的“默认用户角色”

> ID：13583773
> 
> 赞同：1
> 
> 时间：2012-11-27T11:58:37.073
> 
> 标签：ldap, plone

我有一个刚刚从 Plone 3.3 升级到 Plone 4.2 的 Intranet。不允许匿名访问，登录由 plone.app.ldap 处理。（ldap 服务器运行良好，因为它已经在 Plone3.3 上运行良好，并且也成功用于邮件和其他服务）

在 LDAP 配置中，我将“默认用户角色”设置为“Authenticated,Member”（以前，我不小心将其设置为“ **Anonymous** ,Authenticated,Member”，但后来又删除了 false Anonymous 角色）

对于一些用户（大约 300 个中的大约 5 个）我有以下问题：这 5 个用户可以登录但看不到导航，他们没有“最近修改”的 portlet，其他东西对他们来说是不可见的......事实证明，这 5 个用户在所有其他角色旁边还分配了“匿名”角色，尽管几天前我已经将其禁用为默认角色。

我确实已经转到 LDAP 配置的“缓存”选项卡并单击“清除缓存”。我还告诉用户删除他们所有的 Cookie。没有任何帮助。

在“缓存”选项卡下，我注意到所有有登录问题的用户都将“已验证”的值作为“缓存类型”，而没有问题的用户将“匿名”作为“缓存类型”。我不知道这是否相关，但由于有问题的用户仍然具有错误的默认用户角色 - 无论我为 ldap 配置什么“默认用户角色”，我认为这可能是相关的。

有什么提示吗？我不知道如何进一步调试它。

# java - 使用 PHP 使用 JSONP 返回对象而不是结果

> ID：13583774
> 
> 赞同：0
> 
> 时间：2012-11-27T11:58:36.877
> 
> 标签：java, php, jquery, arrays, ms-access

我来自远程域的 JSONP 响应是：

```
jQuery183012824459988766945_1354016515353([{"StudentID":"BA1122","LastName":"BAG","FirstName":"RON"},{"StudentID":"B770","LastName":"BAEN","FirstName":"AI"},{"StudentID":"B994","LastName":"BALD","FirstName":"AARON"},{"StudentID":"B580","LastName":"Balzstin","FirstName":"Manda"},{"StudentID":"B932","LastName":"BAR","FirstName":"ABBAS"},{"StudentID":"B139","LastName":"BANES","FirstName":"ALAN"},{"StudentID":"B718","LastName":"Baen","FirstName":"Alex"},{"StudentID":"B524","LastName":"BAER","FirstName":"ANA"}]) 
```

我正在尝试通过以下方式使用数据：

```
$.getJSON('http://www.remote_domain.com/json.php?callback=?',function(res){
    ParseJson(res);
    function ParseJson(data){
        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                alert(key + " -> " + data[key]);
            }
        }
    }
}); 
```

我似乎没有得到数据只是对象？

更新：

```
 $num_columns = $rs->Fields->Count ();
 $arrColumns = array();

 for ($i=0; $i < $num_columns; $i++) {
         $arrColumns[] = $rs->Fields($i);
         $newArr[] = $rs->Fields($i)->name; 
 }

 $arrResult = array();

 while (!$rs->EOF) {
     $arrRow = array();
     for ($i=0; $i < $num_columns; $i++) {
        $arrRow[$newArr[$i]] = $arrColumns[$i]->value;
     }
     $arrResult[] = $arrRow;

     $rs->MoveNext();
 }

 echo $_GET['callback'] . '(' . json_encode($arrResult) . ')'; 
```

我的 JSON 返回如下： [{"First":"John"},{"Last":"Doe"}] 包裹在对象中的数组。我需要返回一个对象或一个数组，这样我就可以在我的客户端处理： {"First":"John"},{"Last":"Doe"}

```
<script>
    $.getJSON('http://remote.domain.com/json.php?callback=?',function(res){
        alert('Results: '+res.Last);
    });
</script> 
```

我认为这可能是我的方式 json_encode($Array); 并且不使用课程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:10:30.737

试试这个

```
$.ajax({
    url: 'http://www.remote_domain.com/json.php',
    dataType: 'jsonp',
    success: function(data){

        $.each(data, function(k, v){
            console.log('key: ' + k + ' val: ' + v);
        });
    }
}); 
```

# jquery-ui - Jquery themeroller 图标作为输入文本背景

> ID：13583775
> 
> 赞同：0
> 
> 时间：2012-11-27T11:58:37.870
> 
> 标签：jquery-ui, css, jquery-ui-theme

如何在左侧插入一个主题滚轮图标`<input type="text">`，作为 a `background-image`？

我无法直接访问图像，因为主题是动态的。在运行时不知道哪个主题是当前的。我只能依赖类名，如`ui-icon`,`ui-icon-email`等。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T14:40:21.360

没有直接的 CSS 解决方案，使用 background-position 属性显示 JQuery UI 图标以选择正确的“图标地毯”偏移量，因此添加 background-size 属性会引发它不呈现图标。

也许您可以尝试更复杂的解决方案，例如 INPUT 和 SPAN 元素之间没有边界，并将背景图标放在最新的位置。

我希望我能提供更多帮助，对不起。

# java - 获取在java中连接usb调制解调器的com端口

> ID：13583777
> 
> 赞同：0
> 
> 时间：2012-11-27T11:58:39.350
> 
> 标签：java, serial-port, usb, modem, javax.comm

如何在 java 程序中获取连接 USB 边缘调制解调器的 com 端口。需要快速帮助。请告诉我使用哪个库来获取 com.. 除了 javax.comm。我试过但失败了。我没有找到正确安装它的方法，它不断地向我显示错误。:(

```
package commtest;

import java.io.InputStream;
import java.io.OutputStream;
import java.util.Enumeration;
import java.util.Formatter;
import org.smslib.helper.CommPortIdentifier;
import org.smslib.helper.SerialPort;

public class CommTest
{
    private static final String _NO_DEVICE_FOUND = "  no device found";

    private final static Formatter _formatter = new Formatter(System.out);

    static CommPortIdentifier portId;

    static Enumeration<CommPortIdentifier> portList;

    static int bauds[] = { 9600, 14400, 19200, 28800, 33600, 38400, 56000, 57600, 115200 };

    /**
     * Wrapper around {@link CommPortIdentifier#getPortIdentifiers()} to be
     * avoid unchecked warnings.
     */
    private static Enumeration<CommPortIdentifier> getCleanPortIdentifiers()
    {
        return CommPortIdentifier.getPortIdentifiers();
    }

    public static void main(String[] args)
    {
        System.out.println("\nSearching for devices...");
        portList = getCleanPortIdentifiers();
        while (portList.hasMoreElements())
        {
            portId = portList.nextElement();
            if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL)
            {
                _formatter.format("%nFound port: %-5s%n", portId.getName());
                for (int i = 0; i < bauds.length; i++)
                {
                    SerialPort serialPort = null;
                    _formatter.format("       Trying at %6d...", bauds[i]);
                    try
                    {
                        InputStream inStream;
                        OutputStream outStream;
                        int c;
                        String response;
                        serialPort = portId.open("SMSLibCommTester", 1971);
                        serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_RTSCTS_IN);
                        serialPort.setSerialPortParams(bauds[i], SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
                        inStream = serialPort.getInputStream();
                        outStream = serialPort.getOutputStream();
                        serialPort.enableReceiveTimeout(1000);
                        c = inStream.read();
                        while (c != -1)
                            c = inStream.read();
                        outStream.write('A');
                        outStream.write('T');
                        outStream.write('\r');
                        Thread.sleep(1000);
                        response = "";
                        StringBuilder sb = new StringBuilder();
                        c = inStream.read();
                        while (c != -1)
                        {
                            sb.append((char) c);
                            c = inStream.read();
                        }
                        response = sb.toString();
                        if (response.indexOf("OK") >= 0)
                        {
                            try
                            {
                                System.out.print("  Getting Info...");
                                outStream.write('A');
                                outStream.write('T');
                                outStream.write('+');
                                outStream.write('C');
                                outStream.write('G');
                                outStream.write('M');
                                outStream.write('M');
                                outStream.write('\r');
                                response = "";
                                c = inStream.read();
                                while (c != -1)
                                {
                                    response += (char) c;
                                    c = inStream.read();
                                }
                                System.out.println(" Found: " + response.replaceAll("\\s+OK\\s+", "").replaceAll("\n", "").replaceAll("\r", ""));
                            }
                            catch (Exception e)
                            {
                                System.out.println(_NO_DEVICE_FOUND);
                            }
                        }
                        else
                        {
                            System.out.println(_NO_DEVICE_FOUND);
                        }
                    }
                    catch (Exception e)
                    {
                        System.out.print(_NO_DEVICE_FOUND);
                        Throwable cause = e;
                        while (cause.getCause() != null)
                        {
                            cause = cause.getCause();
                        }
                        System.out.println(" (" + cause.getMessage() + ")");
                    }
                    finally
                    {
                        if (serialPort != null)
                        {
                            serialPort.close();
                        }
                    }
                }
            }
        }
        System.out.println("\nTest complete.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:27:59.010

这与 USB、AT 命令等无关……如果您仔细阅读错误消息，您就会得到答案：

```
win32com.dll: Can't load IA 32-bit .dll on a AMD 64-bit. 
```

该主题已在此处解决：[Javax.comm API on 64-bit Windows](https://stackoverflow.com/questions/3959743/problem-of-using-the-javax-comm-api-on-windows-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T18:12:48.523

此方法对我有用。此代码将自动检测与 GSM 调制解调器连接的端口并发送 SMS。

```
public class ModamSMS {

public void sendMessage(String num, String massage) throws Exception {

    SerialModemGateway gateway = new SerialModemGateway("", "COM5", 9600, "", "");
    gateway.setInbound(true);
    gateway.setOutbound(true);
    OutboundNotification outboundNotification = new OutboundNotification();
    InboundNotification inboundNotification = new InboundNotification();
    Service service = Service.getInstance();
    service.setOutboundMessageNotification(outboundNotification);
    service.setInboundMessageNotification(inboundNotification);
    service.addGateway(gateway);
    service.startService();

    OutboundMessage msg = new OutboundMessage(num, massage);
    service.sendMessage(msg);
}

public ArrayList sendBulkMessage(ArrayList<String> numbers, String massage)
        throws IOException, InterruptedException, SMSLibException {

    ArrayList list = new ArrayList();
    String connectedport = getConnectedport(numbers.get(0), massage);
    System.out.println(connectedport + " port in bulsksmssend method");
    if (connectedport != null) {
        BasicConfigurator.configure();

        SerialModemGateway gateway = new SerialModemGateway("", connectedport, 9600, "", "");

        try {

            // gateway.setInbound(true);
            gateway.setOutbound(true);

            OutboundNotification outboundNotification = new OutboundNotification();

            // InboundNotification inboundNotification = new
            // InboundNotification();
            Service service = Service.getInstance();
            service.setOutboundMessageNotification(outboundNotification);
            // service.setInboundMessageNotification(inboundNotification);
            service.addGateway(gateway);
            service.startService();

            for (int i = 1; i < numbers.size(); i++) {

                String num = (String) numbers.get(i);
                OutboundMessage msg = new OutboundMessage(num, i + " " + massage);
                System.out.println(i + " " + massage);
                Thread.sleep(1000);

                service.sendMessage(msg);
                list.add(num + " Sms send succes");

            }
            Service.getInstance().stopService();

        } catch (SMSLibException | IOException | InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            StringWriter sw = new StringWriter();
            e.printStackTrace(new PrintWriter(sw));

            writfile(sw.toString());
        }

        Service.getInstance().removeGateway(gateway);
    } else {
        JOptionPane.showMessageDialog(null, "Please make ! \n Modam is correctly inseted\nYou hava SMS package\n ");
    }
    return list;
}

public class InboundNotification implements IInboundMessageNotification {
    // @Override
    // Get triggered when a SMS is received
    public void process(AGateway gateway, Message.MessageTypes messageTypes, InboundMessage inboundMessage) {
        System.out.println(inboundMessage);
        try {
            gateway.deleteMessage(inboundMessage);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public class OutboundNotification implements IOutboundMessageNotification {

    // Get triggered when a SMS is sent
    public void process(AGateway gateway, OutboundMessage outboundMessage) {
        System.out.println(outboundMessage);
    }
}

public String getConnectedport(String num, String msge)
        throws TimeoutException, GatewayException, SMSLibException, IOException, InterruptedException {

    ArrayList<String> allports = new ArrayList<>();

    Enumeration ports = CommPortIdentifier.getPortIdentifiers();
    while (ports.hasMoreElements()) {
        CommPortIdentifier port = (CommPortIdentifier) ports.nextElement();
        String type;
        switch (port.getPortType()) {
        case CommPortIdentifier.PORT_PARALLEL:
            type = "Parallel";
            break;
        case CommPortIdentifier.PORT_SERIAL:
            allports.add(port.getName());
            type = "Serial";
            break;
        default: /// Shouldn't happen
            type = "Unknown";
            break;
        }
        System.out.println(port.getName() + ": " + type);
        allports.add(port.getName());
    }
    String connectedport = null;
    for (int a = 0; a < allports.size(); a++) {
        connectedport = getport(allports.get(a), num, msge);
        if (connectedport != null) {
            a = allports.size();
            System.out.println(connectedport + " port in for loop");

        }

    }

    return connectedport;

}

private String getport(String port, String num, String msge)
        throws TimeoutException, GatewayException, SMSLibException, IOException, InterruptedException {
    String returnport = null;

    SerialModemGateway gateway = new SerialModemGateway("", port, 9600, "", "");
    gateway.setInbound(true);
    gateway.setOutbound(true);
    OutboundNotification outboundNotification = new OutboundNotification();
    InboundNotification inboundNotification = new InboundNotification();
    Service service = Service.getInstance();
    service.setOutboundMessageNotification(outboundNotification);
    service.setInboundMessageNotification(inboundNotification);
    try {
        service.addGateway(gateway);
        service.startService();

        OutboundMessage msg = new OutboundMessage(num, msge);
        service.sendMessage(msg);
        returnport = port;
        System.out.println(returnport + " port in port finding method");

    } catch (GatewayException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (TimeoutException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SMSLibException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Service.getInstance().stopService();
    Service.getInstance().removeGateway(gateway);
    return returnport;

}

public static void main(String args[]) {

    BasicConfigurator.configure();

    ModamSMS app = new ModamSMS();
    ArrayList<String> numbers = new ArrayList<>();
    numbers.add("+923075142199");
    numbers.add("+923075142199");

    try {
        // app.sendMessage("+923075142199","plz Allah it shoud work");
        app.sendBulkMessage(numbers,
                "hy this is me Abdulrehman javed .Who are you and how are you.This is testing sms so do not worry");

    } catch (Exception e) {
        e.printStackTrace();
        e.printStackTrace();
        StringWriter sw = new StringWriter();
        e.printStackTrace(new PrintWriter(sw));

        writfile(sw.toString());
    }
}

public static void writfile(String content) {

    BufferedWriter bw = null;
    FileWriter fw = null;

    try {

        fw = new FileWriter("Error.txt");
        bw = new BufferedWriter(fw);
        bw.write(content);

        System.out.println("Done");

    } catch (IOException e) {

        e.printStackTrace();

    } finally {

        try {

            if (bw != null)
                bw.close();

            if (fw != null)
                fw.close();

        } catch (IOException ex) {

            ex.printStackTrace();

        }

    }
}
} 
```

# delphi - TGMDirection 脚本错误

> ID：13583783
> 
> 赞同：1
> 
> 时间：2012-11-27T11:58:56.573
> 
> 标签：delphi, google-maps, direction, gmlib

我使用 TGMDirection 来显示我点击的两个标记之间的路线。与这里的想法相同，但在 Delphi 中使用 GMLib 1.8： [http ://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexB.html](http://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexB.html)

第一方向 它显示没有任何错误。当我再次单击另一个标记时，它会弹出并脚本错误：行：539 个字符：9 错误：无法检索属性关闭的值：对象为空或未定义代码：0 URL：关于：空白

你有什么主意吗 ？我使用的代码是：

```
procedure TForm1.GMMarker1DblClick(Sender: TObject; LatLng: TLatLng;
Index: Integer; LinkedComponent: TLinkedComponent);
begin
  if legcount = 0 then
  begin
    marker1index :=Index;
    legcount:=legcount+1;
  end
  else if legcount = 1 then 
  begin
    legcount:=0;
    marker2index :=Index;

    GMDirection1.DirectionsRequest.Origin.LatLng := GMMarker1.Items[marker1index].Position;
    GMDirection1.DirectionsRequest.Destination.LatLng := GMMarker1.Items[marker2index].Position;
    GMDirection1.Execute;

    if GMDirection1.DirectionsResult[routenr].Status = dsOK then 
    begin

      GMDirection1.Free;
    end;
    routenr:=routenr+1;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:43:14.453

我在 InfoWindowCloseAll JavaScript 函数中发现了一个错误。您有两种选择来解决这个问题。

1.- 简单：创建标记时，将 Marker.InfoWindow.CloseOtherBeforeOpen 属性设置为 False；

2.- 复杂：您需要修改 HTML 代码并重新编译资源和组件。为此，请使用文本编辑器（如 Notepad++）打开 .\Resources\map.html 搜索 InfoWindowCloseAll 函数并使用以下代码对其进行修改：

```
function InfoWindowCloseAll() {
  for (i = 0; i < linkedCompList.length; i++) {
    if (linkedCompList[i] instanceof google.maps.InfoWindow) {
      linkedCompList[i].close();
      linkedCompList[i].GMLibIWIsOpen = false;
    }
    else {
      if (!(linkedCompList[i] instanceof google.maps.DirectionsRenderer)) {
        linkedCompList[i].GMLibInfoWin.close();
        linkedCompList[i].GMLibInfoWin.GMLibIWIsOpen = false;
      }
    }
  }
} 
```

使用 .\Resources\rc.cmd 保存更改并编译资源 现在，重新编译 GMLib 组件和您的应用程序

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:16:00.450

做到这一点非常容易。您需要 3 个 GMLib 组件（一个 TGMMap、一个 TGMMarker 和一个 TGMDirection）和一个链接在一起的 TWebBrowser。将 GMDirection1.HiddeOthers 属性设置为 false 并在 OnClick GMMap 事件中放入这行代码

```
procedure TForm1.GMMap1Click(Sender: TObject; LatLng: TLatLng; X, Y: Real);
begin
  GMMarker1.Add(LatLng.Lat, LatLng.Lng);
  if GMMarker1.Count mod 2 = 0 then
  begin
    GMDirection1.DirectionsRequest.Origin.LatLng.Assign(GMMarker1[GMMarker1.Count -   2].Position);
    GMDirection1.DirectionsRequest.Destination.LatLng.Assign(GMMarker1[GMMarker1.Count - 1].Position);
    GMDirection1.Execute;
  end;
end; 
```

这就是全部;-)

问候

# wpf - 数据无效时的 WPF 动态数据显示线图行为

> ID：13583784
> 
> 赞同：1
> 
> 时间：2012-11-27T11:58:56.870
> 
> 标签：wpf, dynamic-data-display

我正在开发一个实时显示距离（距离）测量值的 WPF 应用程序。我使用图表绘图仪显示折线图并以 10Hz 左右的频率刷新。Y 轴（距离）是固定的，x 轴（数据样本）是“滚动的”。

我的问题是这个。当突然没有目标时，我想简单地打破情节，直到再次收到有效的范围测量。

目前，当没有目标时，我添加了一个超过最大值的值，但这会导致图表超出比例尺，然后当目标在范围内时，它会再次击落。我想简单地在情节中留出空白来表示没有目标。

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:32:09.243

到目前为止，我看到的唯一这样做是结束当前的折线图，当中断结束时，实例化一个新折线图并将其再次添加到图表中，并使用与前一个相同的属性。我不确定您是否使用图例，如果是这样，可能会为您的图例添加额外的图表，但我确信有一种简单的编程方式可以做到这一点。在该解决方案之外，我不确定是否有一个简单的解决方案。（除了自己修改库！如果你最终这样做了，请确保你在这里分享它，我很想看看。）

# java - 是否可以根据模型更改动态更新 SWT StyledText 小部件？

> ID：13583788
> 
> 赞同：0
> 
> 时间：2012-11-27T11:59:10.183
> 
> 标签：java, swt, listener, styledtext

我正在研究 SWT`StyledText`小部件。我通过提供文本尝试了`setStyleRanges()`方法和方法。`LineStyleListener`

现在我想知道是否有可能`StyledText`不使用字符串作为输入，而是使用自定义对象，然后使其`Styledtext`能够在自定义对象之一更改时自动更新。

例如，我有一个 Content 类，它有一个 text 属性和一个 boolean 属性 ( `isBold`)。我会设置一个 Content 对象列表作为输入，`StyledText`当其中一个对象的`isBold`属性设置为 true 时，`StyledText`将刷新 并且将文本字体设置为粗体。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:07:42.283

不，我不这么认为。您可以使用 a`TextViewer`并在其文档上添加更改侦听器，以使您的工作更轻松，以便您仅将样式范围应用于新添加的修改。但是您需要自己设置样式范围。

```
TextViewer viewer = new TextViewer();
viewer.getDocument().addDocumentListener(new IDocumentListener() {
    @Override
    public void documentChanged(final DocumentEvent event) {
        // use event.fText, event.fOffset etc to apply changes to document
        ...
    }
}); 
```

# c# - 文本框自动完成未正确显示建议

> ID：13583790
> 
> 赞同：1
> 
> 时间：2012-11-27T11:59:16.613
> 
> 标签：c#, winforms, visual-studio-2010

我在 C# Windows 窗体应用程序中有一个文本框。我使用建议作为用户在 TextBox 中使用`TextChanged()`事件的类型。`AutoCompleteResoure`每次`TextChanged()`调用时我都会动态创建。问题是：假设我在 TextBox 中输入“j”，它显示了 3 个结果，第二个建议是我想去的地方。当我按键盘上的向下箭头键转到第二个建议时，所有建议都被删除，TextBox 中的文本更改为第一个建议。这意味着我不能使用键盘低于第一个建议，因为当我按下 Down 键时，TextBox 中的文本被建议替换并且`TextChanged()`事件被调用，因此没有其他建议。如何使用键盘浏览所有建议？我已经设置`AutoCompeleteMode`为`Suggest`. 这是代码。

```
private void searchTb_TextChanged(object sender, EventArgs e){
     AutoCompleteStringCollection resource = new AutoCompleteStringCollection();
     string searchTerm = (sender as TextBox).Text;    
     searchTb.AutoCompleteCustomSource = getResource(searchTerm);
} 
```

`Key.Down`当用户按下箭头键时，我尝试使用事件，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:13:49.063

这应该工作..

```
//In KeyUp or Keypress or KeyDown Event
if keypress == DownArrow or UpArrow
  //Unhook TextChanged event
else
  //hook TextChanged event 
```

曾经也看看这个[`link`](https://stackoverflow.com/q/12759177/1577396)。[不知何故相关]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T16:32:41.310

不要使用 TextChanged 事件。它不应该在 TextChanged 事件中。您应该只分配一次...而不是在 Form_load 中使用此代码

```
private void Form1_Load(object sender, EventArgs e)
{
     AutoCompleteStringCollection resource = new AutoCompleteStringCollection();
     string searchTerm = (sender as TextBox).Text;    
     searchTb.AutoCompleteCustomSource = getResource(searchTerm);
} 
```

试试 tis .. 希望它会 YouHelp

# java - 获取 SimpleDateTime 格式的异常

> ID：13583792
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:59:24.773
> 
> 标签：java, swing, date-format, simpledateformat

在一切正常之前突然我得到了例外

```
 Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Unterminated quote
at java.text.SimpleDateFormat.compile(SimpleDateFormat.java:859)
at java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:659)
at java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:585)
at java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:560)
at Utilities.Utility.DateColumnFormatParser(Utility.java:2149)
at jewelleryerpapplication.GUI.Gold.IssueToAssembling$9.actionPerformed(IssueToAssembling.java:921) 
```

格式有什么问题

对于代码

```
String currentFormat= "dd'-'MM'-'yyyy' 'hh':'mm':'ss' 'a'";
SimpleDateFormat fromUser = new SimpleDateFormat(currentFormat); 
```

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:01:02.700

有一个`Unterminated quote`。字符串中的第一个字符必须是`'`：

```
String currentFormat = "'dd'-'MM'-'yyyy' 'hh':'mm':'ss' 'a'"; 
```

我不确定格式中是否允许使用这些单引号。尝试从表达式中去除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:01:50.177

您在格式字符串的开头缺少一个单引号：

```
String currentFormat= "'dd'-'MM'-'yyyy' 'hh':'mm':'ss' 'a'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:03:50.893

如果你引用破折号等。我认为你的模式需要是`"dd'-'MM'-'yyyy' 'hh':'mm':'ss' 'a"`

即你有一个尾随单引号。

事实上，我不确定你是否需要引号。以下工作正常。

```
String currentFormat = "dd-MM-yyyy hh:mm:ss a"; 
```

从文档：

> 在日期和时间模式字符串中，从 'A' 到 'Z' 和从 'a' 到 'z' 的不带引号的字母被解释为代表日期或时间字符串的组成部分的模式字母。可以使用单引号 (') 引用文本以避免解释

而且你不需要引用你的空格、破折号等。

# iphone - zbar sdk无法使用相机模拟器在iphone模拟器上工作

> ID：13583800
> 
> 赞同：2
> 
> 时间：2012-11-27T11:59:41.673
> 
> 标签：iphone, ios5, barcode-scanner, zbar-sdk

我必须在我的项目上支持条形码扫描。我为此使用zbar sdk。我已经集成了代码并使用iphone模拟器运行。我正在使用相机模拟器扫描条形码。它可以正确打开条形码图像。但条形码扫描不起作用。有人用过这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T12:07:41.567

您可以在 iPhone 模拟器上测试条形码，

1 - 将条形码保存到你的模拟器，打开safari并将条形码图像拖放到safari中然后长按图像，我会要求你保存图像。

2 - 运行模拟器，当在条形码扫描屏幕上按“optons+threefingres long tap”时，它将打开图库，您可以在其中选择保存的条形码图像，然后它会扫描该图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:03:46.910

除非您在相机不可用时测试代码路径，否则您将需要一个实际设备来测试使用 zbar sdk 的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:42:03.500

修复。这是条形码图像的问题。我尝试了几个小条形码图像，一个有效。所以尝试多个小条形码，最后一个可以工作。更重要的是图像的方向应该是这样的。![在此处输入图像描述](../Images/3b75290a04691638bdac78996c97e86d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T21:12:14.520

就像附加信息一样：

我将图像放在模拟器上并使用两指长按打开它们（正如已经指出的那样），但根据我的经验，在 zbar 可以识别它们之前，您似乎需要在图像周围有足够的空间。

因此，在图像周围添加足够的空白区域，它可能会开始工作。

# android - 在 viewpager 中检测触摸/点击事件

> ID：13583804
> 
> 赞同：10
> 
> 时间：2012-11-27T11:59:51.870
> 
> 标签：android, android-viewpager

我对android开发很陌生，目前我正在使用viewpager，试图了解如何处理触摸/点击事件。我整个上午都在寻找这个问题的答案，但我似乎找不到任何对我有帮助的东西。

基本上我有一个带有 5 个片段的 viewpager，它们都使用相同的布局。我想要做的就是能够检测到静止视图上何时有点击/触摸（我不希望在拖动视图时发生任何检测）。

据我所知，ViewPager 默认拦截所有触摸事件似乎存在问题。我相信这可以通过使用来解决：

```
myPager.requestDisallowInterceptTouchEvent(true); 
```

起初我涉足 OnTouchListener 并尝试记录是否曾经点击过 onTouch 方法 - 它似乎没有。我也看到了 GestureDetector 类作为解决这个问题的方法，但坦率地说，我感到不知所措，我不确定我应该在这里使用哪些类/接口。

我想做的就是在使用 ViewPager 时获取简单的触摸/点击事件。

目前我正在使用来自 android 开发者网站的动画教程代码的修改版本。这就是我的**MainActivity.java**文件中的内容：

```
package com.example.pbinteractive;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;

public class MainActivity extends FragmentActivity {
    /**
     * The number of pages (wizard steps) to show in this demo.
     */
    private static final int NUM_PAGES = 5;

    /**
     * The pager widget, which handles animation and allows swiping horizontally to access previous
     * and next wizard steps.
     */
    private ViewPager mPager;

    /**
     * The pager adapter, which provides the pages to the view pager widget.
     */
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Instantiate a ViewPager and a PagerAdapter.
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
        mPager.setAdapter(mPagerAdapter);       
    }   

    /**
     * A simple pager adapter that represents 5 {@link ScreenSlidePageFragment} objects, in
     * sequence.
     */
    private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(FragmentManager fm) {
            super(fm);
        }        

        @Override
        public Fragment getItem(int position) {
            return MyPageFragment.create(position);
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }
    }   
} 
```

这就是我的**MyPageFragment.java**文件中的内容：

```
package com.example.pbinteractive;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;

public class MyPageFragment extends Fragment implements OnTouchListener {
    /**
     * The argument key for the page number this fragment represents.
     */
    public static final String ARG_PAGE = "page";

    /**
     * The fragment's page number, which is set to the argument value for {@link #ARG_PAGE}.
     */
    private int mPageNumber;

    /**
     * Factory method for this fragment class. Constructs a new fragment for the given page number.
     */
    public static MyPageFragment create(int pageNumber) {
        MyPageFragment fragment = new MyPageFragment();
        Bundle args = new Bundle();
        args.putInt(ARG_PAGE, pageNumber);
        fragment.setArguments(args);
        return fragment;
    }

    public MyPageFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mPageNumber = getArguments().getInt(ARG_PAGE);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout containing a title and body text.
        ViewGroup rootView = (ViewGroup) inflater
                .inflate(R.layout.fragment_slide, container, false);

        // Set the title view to show the page number.
        //((TextView) rootView.findViewById(android.R.id.text1)).setText(
        //        getString(R.string.title_template_step, mPageNumber + 1));

        return rootView;
    }

    /**
     * Returns the page number represented by this fragment object.
     */
    public int getPageNumber() {
        return mPageNumber;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        return false;
    }   
} 
```

仅供参考，我已经检查了这两种资源，因为它们似乎经常被引用为我所面临问题的最佳解决方案（据我所知）：

[android: ViewPager 和 Horizo​​ntalScrollVIew](https://stackoverflow.com/questions/6920137/android-viewpager-and-horizontalscrollview)

[网格布局上的 Fling 手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

但我无法从他们那里得到太多帮助。就像我说的那样，我对使用 android 很陌生，所以我真的很想熟悉基础知识！

谢谢

编辑：澄清一下，我想在每个**片段**中获取触摸事件，因为一旦我克服了这个障碍，我希望一些片段能够使触摸事件工作，而其他片段只会显示无响应的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T12:15:37.487

```
 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
// Inflate the layout containing a title and body text.
ViewGroup rootView = (ViewGroup) inflater
                .inflate(R.layout.fragment_slide, container, false);
LinearLayout layout = (LinearLayout)rootView.findViewById(R.id.layout)// get your root  layout
layout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.v(null, "TOUCH EVENT"); // handle your fragment number here
            return false;
        }
    });
      return rootView;
    } 
```

# javascript - 带有 iframe 视频 javascript 的环形交叉路口滑块

> ID：13583805
> 
> 赞同：0
> 
> 时间：2012-11-27T11:59:52.423
> 
> 标签：javascript, jquery, iframe

我从这个位置提取了一个环形交叉路口滑块`http://www.joezimjs.com/demos/roundabout-demo/`。我使用 iframe 视频而不是图像。如果我使用视频，则滑块无法正常工作，也就是说，如果我单击它开始播放而不是滚动的视频。我需要在单击视频时滚动播放的两个动作。

请参考小提琴`http://jsfiddle.net/6rA32/1/`

有没有可能？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:12:49.380

是的，我认为这是可能的。

只需将 iframe 包装在相对定位的 div 中，在其旁边放置一个“层”div，使其宽度和高度与 iframe 相同；绝对定位。确保它具有比 iframe 更高的 z-index。

您可以使用已通过回旋处添加的类来隐藏和显示“层”div。因此，当视频不在焦点上时，您单击的只是“图层”，而不是 iframe。

应该可以工作但未经测试。

# java - Hibernate：继承映射到 Legacy-Database

> ID：13583809
> 
> 赞同：1
> 
> 时间：2012-11-27T12:00:06.183
> 
> 标签：java, hibernate, orm

我在尝试将我们的旧版 Oracle 数据库映射到 Hibernate 时遇到了一些问题。更具体地说，我无法让正确的继承映射工作。我一直在使用的示例是人员-员工-关系。在我们的数据库中，表是分开的，所以唯一的 Mapping-Strategy 将被加入。现在的问题是 Employee 的 PK 由 EmployeeId 和 CompanyId 组成，而 PersonId 只是一个普通的 FK。如果不破坏当前运行的系统，就无法改变这一点。
这是 Person 和 Employee 的当前代码：

人物类

```
@Entity
@Table (name = "personas")
@Inheritance (strategy = InheritanceType.JOINED)
public class Person {
    private String personId;
    private boolean physical;
    private String name;
    private String fantasyName;
    private char gender;

    @Id
    @Column (name = "cod_persona")
    public String getPersonId() {
        return personId;
}

    public void setPersonId(String personId) {
        this.personId = personId;
    }

    //rest of setters and getters
} 
```

员工类：

```
@Entity
@Table (name = "rh_empleados")
@PrimaryKeyJoinColumn (name = "cod_persona")
public class Employee extends Person {
    private Company company;
    private String employeeId;
    private Integer finalSalary;
    private Branch branch;

    @Basic (optional = false)
    @ManyToOne
    @JoinColumn (name = "cod_empresa")
    public Company getCompany() {
        return company;
    }

    public void setCompany(Company company) {
        this.company = company;
    }

    @Basic (optional = false)
    @Column (name = "cod_empleado")
    public String getEmployeeId() {
        return employeeId;
}

    public void setEmployeeId(String employeeId) {
        this.employeeId = employeeId;
    }

    //rest of setters and getters
} 
```

已经有效的方法：创建或删除新员工或人员 无效的方法：选择已经存在的员工或人员，我没有遇到异常，或者某些东西没有返回任何内容。

它必须与继承有关，因为对于不在继承层次结构中的另一个实体，它可以完美地工作。

任何提示/想法/解决方法还是我搞砸了？
一切将不胜感激。
提前致谢。

编辑：显然现在创建或删除员工也不起作用，这更有意义。我收到“无法转换为内部表示”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:11:52.027

这确实是一个烦人的问题！

一种解决方案是不将 Employee-Person 关系建模为继承。他们的主键的差异反对这一点。

相反，您可以将其建模为组合，其中 Employee[有一个](http://en.wikipedia.org/wiki/Has-a)人。如果您希望能够更统一地处理员工和人员，那么您可以定义如下接口：

```
public interface Individual {
    public Person self();
} 
```

通过 Person 实现：

```
 public Person self() {
        return this;
    } 
```

和员工：

```
 public Person self() {
        return person;
    } 
```

虽然这会有点奇怪。

# asp.net-mvc-3 - 使用我自己的 sql server 进行程序认证

> ID：13583810
> 
> 赞同：0
> 
> 时间：2012-11-27T12:00:05.513
> 
> 标签：asp.net-mvc-3, visual-studio, sql-server-2008

当我创建一个新的 mvc 项目时，VS 会为我创建模型和控制器以让我登录我的应用程序。

我想将此应用程序连接到 sql server，并使用此 sql server 进行应用程序身份验证。

过去，我已经使用 MySQL 做到了这一点。为此，我必须单击由 MySQL 创建的工具（编辑：MySQL WebSite Configuration）。在这个工具上，我能够告诉 VS 将模型上传到数据库中。我查了一些，如果没有这个工具，我真的不知道如何做到这一点。

请原谅我的英语不好，我不是英语母语者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:21:01.747

为此，您需要创建一个自定义成员资格提供程序。这里有一个[关于如何做到这一点的教程](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)。自定义成员资格提供程序将允许您将 ASP.NET 中的现有安全框架与您设计的自定义数据库一起使用。

# javascript - 如何创建 javascript 链接，以便 google 不会将它们识别为链接？

> ID：13583811
> 
> 赞同：4
> 
> 时间：2012-11-27T12:00:11.137
> 
> 标签：javascript, hyperlink

我想通过 javascript 在图像上创建链接，Google 不会将它们识别为链接。任何有用的答案都将是可观的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:03:00.723

向搜索引擎发出信号不要抓取链接的正确方法是`ref='nofollow'`

```
<a href="http://www.example.com/" rel="nofollow">Link text</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:02:42.183

你为什么要这个？如果您不希望 Google 为您网页的特定部分编制索引，请尝试将 a`robots.txt`放在根文件夹中。

使用此文件，您可以告诉搜索引擎，它们应该索引哪些文件夹，哪些不应该索引。
[http://en.wikipedia.org/wiki/Robots_exclusion_standard](http://en.wikipedia.org/wiki/Robots_exclusion_standard)

如果网络中的任何其他页面链接到隐藏在链接后面的页面，这足以让 Google 找到并索引它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:03:40.393

我不确定“无法识别”是什么意思，但如果您想“隐藏”实际的*URI*，您可以将*click 事件处理程序*绑定到*锚节点*并通过`location.href`.

```
document.getElementsByTagName( 'a' )[ 0 ].addEventListener('click', function( e ) {
    location.href = this.getAttribute( 'data-myurl' );
    e.preventDefault();
}, false); 
```

实际的 HTML 标记看起来像

```
<a href='#' data-myurl='http://www.google.com'>click me</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:26:01.877

如果您真的不想要/不需要链接（没有 javascript 的用户的后备），您可以剥离链接标签并将您的点击处理程序附加到图像。

前：

```
<a id="my-link" href=".."><img src="..."></a>

<script>
  document.getElementById('my-link').onClick = function() ...
</script> 
```

后：

```
<img id="my-link" src="...">

<script>
  document.getElementById('my-link').onClick = function() ...
</script> 
```

# r - 在 mts 对象上使用 Apply 系列函数

> ID：13583817
> 
> 赞同：7
> 
> 时间：2012-11-27T12:00:20.797
> 
> 标签：r, apply

在发送到函数时，在 mts 对象上使用 apply（或 sapply）会删除其时间序列属性。我应该如何在 mts 对象中的每个时间序列上应用相同的函数（使用 ts 输入和 ts 输出）并返回它（最好作为 mts）[我的意思是除了使用 for 循环]？

例如假设我编写了一个返回时间序列趋势的函数（使用 stl）

```
myfunc <- function(x) {
      return(stl(x,"per")$time.series[,2])
} 
```

现在为示例 mts

```
z <- ts(matrix(rnorm(90), 30, 3), start=c(1961, 1), frequency=4)
class(z) 
```

仅发送一个时间序列可以正常工作：

```
myfunc(z[,1]) # works correctly, returns the trend of first series 
```

我的函数不是为多个时间序列设计的，所以：

```
myfunc(z) # will not work returning the error below

Error in stl(x, "per") : only univariate series are allowed 
```

在 mts 对象上使用 apply 将每个时间序列作为向量发送，而不保留其时间序列属性 (tsp)：

```
apply(z,2,myfunc) # will not work returning the error below

Error in stl(x, "per") : 
series is not periodic or has less than two periods 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T12:44:56.673

解决此问题的一种简单方法是使用索引而不是 clean `apply`：

```
sapply(seq_len(ncol(z)),function(i) myfunc(z[,i])) 
```

`apply`将干净的向量放入函数中，因为它首先将对象转换为矩阵。通过使用`[`为时间序列对象定义的函数，您可以确保每次都提取一个有效的时间序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:42:18.137

我更改 myfunc 以检查它是否有一个 ts 对象作为参数 x。

如果 x 不是 ts ，则将其转换为 ts 对象，因为**stl**需要此参数类型。

```
 myfunc <- function(x,...){
        y <- x
       if(class(x) != 'ts') {
         dots <- c(...)
         y <- ts(x,start=c(dots[1], dots[2]), frequency=dots[3])
       }
       return(stl(y,"per")$time.series[,2])
     }
  ## no need to conversion (already ts object)
  myfunc(z[,1])

  ## mts object ( here we give parameter necessary for conversion)
  apply(z,2,myfunc,1961,1,4) 
```

# android - 在 Android 内存中复制文件

> ID：13583820
> 
> 赞同：1
> 
> 时间：2012-11-27T12:00:58.757
> 
> 标签：android, android-resources, android-assets

我正在编写一个 Android 应用程序，我需要将 2 个文件复制到设备的内部存储中。目前，我可以在使用 DDMS 手动复制设备的“/data/data/[my_package_name]/files”文件夹下的这两个文件后运行我的应用程序。在设备上安装我的应用程序时，我需要将这两个文件放入该文件夹（或任何文件夹）中。这里的[提示](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)说“res/raw/”目录中的文件将被部署到设备上，并且可以通过 openRawResource() 访问，但它没有说明这些文件将放在内部存储器中的什么位置。总结一下，我的项目文件夹中有两个文件（资产、原始文件夹、任何其他文件夹），我需要将这两个文件复制到内部存储器的路径中。我怎样才能做到这一点？我的 AndroidManifest.xml 是否需要包含任何权限？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:36:05.303

没什么大不了的。有几种方法可以做到这一点，但可能比这更短。

```
InputStream is = AssetManager.open("somefile.txt");
File outputFile = new File(getExternalFilesDir(), "somefile.txt");
OutputStream os = new FileOutputStream(outputFile);

//Now copy is to os. I'd recommend using Apache Commons IO
org.apache.commons.io.IOUtils.copy(is, os)); 
```

是的，您需要写入 SD 卡 (WRITE_EXTERNAL_STORAGE) 的权限。

更新：
只是为了澄清：提示说的是：

*提示：如果要在编译时在应用程序中保存静态文件，请将文件保存在项目 res/raw/ 目录中。您可以使用 openRawResource() 打开它，传递 R.raw。资源标识。此方法返回一个 InputStream，您可以使用它来读取文件（但您不能写入原始文件）。*

assets 文件夹中的文件包含在 apk 中，但这些文件是只读的，它们永远不会部署到内部或外部内存中。如果你需要这样做，你必须自己做，如上例所示。

# facebook-graph-api - FQL 返回 Null 值

> ID：13583822
> 
> 赞同：0
> 
> 时间：2012-11-27T12:01:01.270
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-fql

我得到以下 FQL 查询的 NULL 结果

```
$fql="SELECT uid, page_id from page_fan where uid=me()";
$user_frnd = $facebook->api("/fql?q = " . urlencode($fql)); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:02:22.673

尝试使用：

```
$params = array(
'method' => 'fql.query',
'query' => "SELECT uid, page_id from page_fan where uid=me()",
);

//Run Query
$JSON = $facebook->api($params); 
```

# android - AudioRecord - 写入 PCM 文件

> ID：13583827
> 
> 赞同：7
> 
> 时间：2012-11-27T12:01:08.443
> 
> 标签：android, audiorecord

我正在尝试使用 AudioRecord 类录制一些声音，然后将其写入输出 .pcm 文件。我希望我的程序继续录制，直到按下停止按钮。不幸的是，无论我录制多长时间，输出文件大小始终为 3528 字节，持续时间约为 20 毫秒。同样根据 Toolsoft Audio Tools，该文件的属性是：44100Hz，16 位，立体声，即使我使用的是具有完全不同采样频率的单声道。

```
Thread recordingThread;
boolean isRecording = false;

int audioSource = AudioSource.MIC;
int sampleRateInHz = 44100;
int channelConfig = AudioFormat.CHANNEL_IN_MONO;
int audioFormat = AudioFormat.ENCODING_PCM_16BIT;
int bufferSizeInBytes = AudioRecord.getMinBufferSize(sampleRateInHz, channelConfig, audioFormat);

byte Data[] = new byte[bufferSizeInBytes];

AudioRecord audioRecorder = new AudioRecord(audioSource,
                                            sampleRateInHz, 
                                            channelConfig, 
                                            audioFormat, 
                                            bufferSizeInBytes);
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);   
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}    

public void startRecording(View arg0) {
    audioRecorder.startRecording();
    isRecording = true;
    recordingThread = new Thread(new Runnable() {
        public void run() {
            String filepath = Environment.getExternalStorageDirectory().getPath();
            FileOutputStream os = null;
            try {
                os = new FileOutputStream(filepath+"/record.pcm");
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            while(isRecording) {
                audioRecorder.read(Data, 0, Data.length);
                try {
                    os.write(Data, 0, bufferSizeInBytes);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                try {
                    os.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    });
    recordingThread.start();
}

public void stopRecording(View arg0) {
    if (null != audioRecorder) {
        isRecording = false;
        audioRecorder.stop();
        audioRecorder.release();
        audioRecorder = null;
        recordingThread = null;
    }
} 
```

我可以请你告诉我有什么问题吗？我希望答案不会是“一切”:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-19T00:10:01.237

```
try {
                os.write(Data, 0, bufferSizeInBytes);
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

这就是问题所在。只需一次写入，您就关闭了 FileOutputStream (os.close())。将其移出 while 循环：

```
while(isRecording) {
            audioRecorder.read(Data, 0, Data.length);
            try {
                os.write(Data, 0, bufferSizeInBytes);
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
      try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:14:31.357

`Change your sample rate to 8000`，因为在**模拟器**中你`cant test with 44100 sample rate.`

使用`AudioRecord`如图所示的源在模拟器中播放

```
private static final int RECORDER_SAMPLERATE = 8000;
private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

AudioRecord audio_record = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS,
            RECORDER_AUDIO_ENCODING, BufferElements2Rec * BytesPerElement);

int BufferElements2Play = 1024; // want to play 2048 (2K) since 2 bytes we use only 1024
int BytesPerElement = 2; // 2 bytes in 16bit format 
```

**[如果它不起作用，请转到此博客。它可以很好地记录和存储`.pcm`文件中的数据。](http://audiorecordandroid.blogspot.in/)**

# java - java jbutton文本不适合不同的环境

> ID：13583830
> 
> 赞同：0
> 
> 时间：2012-11-27T12:01:17.147
> 
> 标签：java, swing, ubuntu, centos, jbutton

我在 Jpanel 中有一个 jbutton，它具有带有尾随对齐的 FlowLayout。这段代码实际上在 ubuntu 环境中工作，但是当我在 centos 环境中运行它时，文本不适合按钮。

```
JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.TRAILING));
myButton = new JButton("My Text");
buttonPanel.add(myButton); 
```

然后我添加以下几行：

```
JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.TRAILING));
myButton = new JButton("My Text");
int width=myButton.getFontMetrics(exportButton.getFont()).stringWidth(myButton.getText());
int height=myButton.getFontMetrics(myButton.getFont()).getHeight()+10;
myButton.setPreferredSize(new Dimension(width+30, height));
buttonPanel.add(myButton); 
```

这些额外的行有所帮助，但似乎解决方案并不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:07:32.160

*   `FlowLayout`默认情况下接受`PreferredSize`来自`JComponents`

*   `JButton`默认情况下不需要重新计算`PreferredSize`，让我们正确地工作`LayoutManager`，`FlowLayout`只接受`PreferredSize`

*   最重要的是在容器（，...）`pack()`之前调用（构造函数中的最后一行代码）`setVisible(true)``JFrame``JDialog`

*   每个都`JComponent`可以返回自己的正确`PreferredSize`值，然后没有理由覆盖或设置此值，在某些情况下，对于空`JPanel`（专业定制绘画）或`JScrollPane`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:05:39.067

~~由于使用了不同的系统字体，这很可能发生。您可以尝试使用自定义外观来覆盖原生外观。您可能会发现[此链接](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)很有用。~~

# c# - 如何在写入数据库之前从可编辑的gridview存储数据

> ID：13583831
> 
> 赞同：0
> 
> 时间：2012-11-27T12:01:17.137
> 
> 标签：c#, gridview

我有一个从数据库填充的gridview，我想允许用户编辑并添加到gridview。一旦他们完成了更改/添加，然后将其提交到数据库。有人可以帮我怎么做吗？

到目前为止，这是我的代码

```
 <asp:GridView ID="Grd" runat="server" AutoGenerateColumns="False" OnRowEditing="Grds_RowEditing"
    OnRowCancelingEdit="Grd_RowCancelingEdit" OnRowUpdating="Grd_RowUpdating" Width="500px">
    <Columns>
        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <asp:HiddenField ID="NameID" runat="server" Value='<%# Bind("ID")%>' />
                <asp:Label ID="LblName" runat="server" Text='<%# Bind("Name")%>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Date">
            <EditItemTemplate>
                <asp:TextBox ID="TxtDate" runat="server" Text='<%# Bind("Date") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="LblDate" runat="server" Text='<%# Bind("Date")%>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowEditButton="True" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
</asp:GridView><asp:Button ID="btnok" Text="OK" Height="25" Width="25" runat="server" /> 
```

和后面的代码

```
protected void Page_Load(object sender, EventArgs e)
        {
            BindGrid(int.Parse(hfID.Value));
      }

        protected void BindGrid(int iPerson)
        {
            DataContext dc = new DataContext(ConfigurationManager.ConnectionStrings["DB"].ConnectionString);

            var qry = from p in dc.GetDetails(iPerson)
                      select p;

            Grd.DataSource = qry;
            Grd.DataBind();
        }
   protected void Grd_RowEditing(object sender, GridViewEditEventArgs e)
        {
            Grd.EditIndex = e.NewEditIndex;
            //Bind data to the GridView control.
            BindGrid(int.Parse(hfID.Value));

        }
        protected void Grd_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
        {
            Grd.EditIndex = -1;
            BindGrid(int.Parse(hfID.Value));
        }

        protected void Grd_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {

        }

 protected void btOK_Click(object sender, EventArgs e)
        {
//update the database with changes
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:32:36.330

在您的按钮单击中尝试此操作，*dtCurrentTable*是您的 gridview 绑定数据表。

```
int rowIndex = 0;
StringCollection sc = new StringCollection(); 

for (int i = 1; i <= dtCurrentTable.Count; i++)
{
//extract the TextBox values
Label box1 = (Label)GridView2.Rows[rowIndex].Cells[0].FindControl("lblbedroom");
DropDownList box2 = (DropDownList)GridView2.Rows[rowIndex].Cells[0].FindControl("ddpAccomodates");
DropDownList box3 = (DropDownList)GridView2.Rows[rowIndex].Cells[0].FindControl("ddpBathroom");
DropDownList box4 = (DropDownList)GridView2.Rows[rowIndex].Cells[0].FindControl("ddpBedType");
TextBox box5 = (TextBox)GridView2.Rows[rowIndex].Cells[0].FindControl("txtPrices");
DropDownList box6 = (DropDownList)GridView2.Rows[rowIndex].Cells[0].FindControl("ddpMiniStay");
//get the values from the TextBoxes
//then add it to the collections with a comma "," as the delimited values
sc.Add("Private Room" + box1.Text + "," + box2.SelectedItem.Value + "," + box3.SelectedItem.Value + "," + box4.SelectedItem.Value + "," + box5.Text + "," + box6.SelectedItem.Value);
rowIndex++;
}

InsertToDb(sc); 
```

然后

```
private void InsertToDb(StringCollection sc)
    {
        string[] splitItems = null;
        foreach (string item in sc)
        {
         //split and save in to db here
        }
    } 
```

# android - onItemClicklistner(); 不适用于android中的自定义listView

> ID：13583832
> 
> 赞同：2
> 
> 时间：2012-11-27T12:01:22.983
> 
> 标签：android, listview, onitemclicklistener, custom-lists

我有一个自定义 listView.xml 有一个 listView 作为。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@null" >

    <ListView
        android:id="@+id/searchList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtSearchFor"
        android:background="@color/Black" >
    </ListView>

</RelativeLayout> 
```

此列表视图包含一个 ImageView、2 个 TextView 和一个 RatingBar (item_list.XML)，如下所示。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <RelativeLayout
        android:id="@+id/rel_SearchLayout01"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <ImageView
            android:id="@+id/img_searchBookCoverPhoto"
            android:layout_width="70dp"
            android:layout_height="100dp"
            android:layout_margin="5dp"
            android:background="@drawable/rounded_image_borders"
            android:focusable="false"
            android:src="@drawable/book1" />

        <TextView
            android:id="@+id/txt_searchBookTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/img_searchBookCoverPhoto"
            android:layout_marginTop="10dp"
            android:layout_toRightOf="@+id/img_searchBookCoverPhoto"
            android:focusable="false"
            android:text="The Basic Doctrine Of Islam"
            android:textColor="@color/White"
            android:textSize="16sp" />

        <TextView
            android:id="@+id/txt_searchAutherName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_searchBookTitle"
            android:layout_marginTop="2dp"
            android:layout_toRightOf="@+id/img_searchBookCoverPhoto"
            android:focusable="false"
            android:text="By: Andrew J Newman"
            android:textColor="@color/SkyBlue"
            android:textSize="14sp" />

        <RatingBar
            android:id="@+id/searchRatingbar"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_searchAutherName"
            android:layout_marginTop="12dp"
            android:layout_toRightOf="@+id/img_searchBookCoverPhoto"
            android:focusable="false"
            android:isIndicator="false"
            android:numStars="5"
            android:rating="5"
            android:stepSize="1" />
    </RelativeLayout>

</RelativeLayout> 
```

*   我的问题是我有一个 Listview 的点击事件，如下所示

![在此处输入图像描述](../Images/79e5823183abb8518076e36a790b8f5a.png)

但它不起作用，我真的很惊讶，为什么会这样

正如你所看到的，我也设置了这个

```
android:focusable="false" 
```

对于我的自定义 listView 中的所有视图。

这里也是自定义适配器的代码。

```
public class BookSearchResultActivity extends Activity {

    static final String URL = "http://www.shiaislamiclibrary.com/requesthandler.ashx";
    static final String KEY_ITEM = "Book"; // parent node
    static final String KEY_BOOKAUTHOR = "BookAuthor";
    static final String KEY_BOOKTITLE = "BookTitle";
    static final String KEY_BOOKCODE = "BookCode";
    static final String KEY_BOOKIMAGE = "BookImage";

    ArrayList<String> BookTitle = new ArrayList<String>();
    ArrayList<String> BookCoverPhotos = new ArrayList<String>();
    ArrayList<String> BookAuther = new ArrayList<String>();
    ArrayList<String> ImageByte = new ArrayList<String>();
    ArrayList<Bitmap> bitmapArray = new ArrayList<Bitmap>();

    ListView lv;
    ListView listView;
    Activity act = this;

    LayoutInflater inflater = null;

    TextView txtSearchedKeywords;
    TextView txtSearchFor;
    TextView txtBooksCount;
    String keyWordsSearch;
    String language;

    URL bookImageURL = null;
    Bitmap bitMapImage = null;
    Context context = BookSearchResultActivity.this;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.book_search_layout);

        txtSearchedKeywords = (TextView) findViewById(R.id.txtKeyWordSearched);
        txtSearchFor = (TextView) findViewById(R.id.txtSearchFor);
        txtBooksCount = (TextView) findViewById(R.id.txtNmbrOfBooksFound);
        listView = (ListView) findViewById(R.id.searchList);

        Intent getInfoIntent = getIntent();
        keyWordsSearch = getInfoIntent.getStringExtra("SEARCH_KEYWORDS");
        language = getInfoIntent.getStringExtra("LANG");

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        // checking for availbe internet Connection
        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {

            new UIThread().execute(URL, keyWordsSearch, language);

        }

        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {
                Toast.makeText(context, BookTitle.get(pos).toString(),
                        Toast.LENGTH_SHORT).show();
            }
        });
    }

    private class UIThread extends AsyncTask<String, Integer, String> {

        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            progressDialog = ProgressDialog.show(getParent(),
                    "Search in Progress...",
                    "This may Take a few seconds.\nPlease Wait...");

            txtSearchFor.setText("Searching in Progress...!");
            txtBooksCount.setVisibility(View.INVISIBLE);

        }

        @Override
        protected String doInBackground(String... params) {

            String URL = params[0];
            String searchKeywords = params[1];

            XMLParser parser = new XMLParser();
            String XMLString = parser.getXmlFromUrl(URL, searchKeywords,
                    language);
            // Log.i("XML Response", XMLString);

            Document doc = parser.getDomElement(XMLString);

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                Element e = (Element) nl.item(i);

                BookTitle.add(parser.getValue(e, KEY_BOOKTITLE));
                BookCoverPhotos.add("http://shiaislamicbooks.com/books_Snaps/"
                        + parser.getValue(e, KEY_BOOKCODE) + "/1_thumb.jpg");
                BookAuther.add(parser.getValue(e, KEY_BOOKAUTHOR));
                Log.i("URLs", BookCoverPhotos.toString());
            }
            for (int i = 0; i < BookAuther.size(); i++) {

                try {
                    bookImageURL = new URL(BookCoverPhotos.get(i));
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                    Log.i("URL", "ERROR at image position" + i + "");
                }

                try {
                    bitMapImage = BitmapFactory.decodeStream(bookImageURL
                            .openConnection().getInputStream());
                    bitmapArray.add(bitMapImage);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.i("BITMAP", "ERROR" + i);
                }
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            progressDialog.dismiss();
            txtSearchFor.setText("Results For");
            txtSearchedKeywords.setText("\"" + keyWordsSearch + "\"");
            txtBooksCount.setVisibility(View.VISIBLE);
            txtBooksCount.setText(bitmapArray.size() + " Book(s) found");
            ImageAdapter adapter = new ImageAdapter(getBaseContext(), act);
            listView.setAdapter(adapter);

        }

    }

    public class ImageAdapter extends BaseAdapter {

        public ImageAdapter(Context c) {
            context = c;
        }

        // ---returns the number of images---
        public int getCount() {
            return bitmapArray.size();
        }

        public ImageAdapter(Context ctx, Activity act) {
            inflater = (LayoutInflater) act
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        // ---returns the ID of an item---
        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        // ---returns an ImageView view---
        public View getView(int position, View convertView, ViewGroup parent) {

            // ImageView bmImage;

            final ViewHolder holder;
            View vi = convertView;
            if (convertView == null) {
                vi = inflater.inflate(R.layout.list_style, parent, false);
                holder = new ViewHolder();
                holder.txt_BooksTitle = (TextView) vi
                        .findViewById(R.id.txt_searchBookTitle);

                holder.img_BookCoverPhoto = (ImageView) vi
                        .findViewById(R.id.img_searchBookCoverPhoto);
                holder.txt_BooksAuthor = (TextView) vi
                        .findViewById(R.id.txt_searchAutherName);

                holder.ratingBar = (RatingBar) vi
                        .findViewById(R.id.searchRatingbar);

                vi.setTag(holder);
            } else {

                holder = (ViewHolder) vi.getTag();
            }
            holder.txt_BooksTitle.setText(BookTitle.get(position) + "");
            holder.img_BookCoverPhoto.setImageBitmap(bitmapArray.get(position));
            holder.txt_BooksAuthor.setText(BookAuther.get(position) + "");
            holder.ratingBar.setRating(3);
            return vi;
        }
    }

    class ViewHolder {
        TextView txt_BooksTitle;
        TextView txt_BooksAuthor;
        ImageView img_BookCoverPhoto;
        RatingBar ratingBar;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:13:23.423

您可以做的其他选择是`getView()`您可以使用您`ConvertView`来实现`OnclickListener`类似

```
convertView.(new View.OnClickListener(){

     @Override
     public void onClick(View view) 
    {
      //write your code here
    }
}); 
```

请让我知道这种替代方法是否有效

```
public View getView(final int position, View convertView, ViewGroup parent)
    {

            if(convertView == null) /* Create a new row view */
            {
                convertView = inflater.inflate(R.layout.simplerow, null);
            }

        convertView.setOnClickListener(new View.OnClickListener()
            {
                @Override
                public void onClick(View v)
                {
                    //your implementation.
                }
            }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:51:56.373

请更新以下`item_list.xml`文件代码，它将解决您的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/rel_SearchLayout01"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <ImageView
            android:id="@+id/img_searchBookCoverPhoto"
            android:layout_width="70dp"
            android:layout_height="100dp"
            android:layout_margin="5dp"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/txt_searchBookTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/img_searchBookCoverPhoto"
            android:layout_marginTop="10dp"
            android:layout_toRightOf="@+id/img_searchBookCoverPhoto"
            android:text="The Basic Doctrine Of Islam"
            android:textSize="16sp" />

        <TextView
            android:id="@+id/txt_searchAutherName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_searchBookTitle"
            android:layout_marginTop="2dp"
            android:layout_toRightOf="@+id/img_searchBookCoverPhoto"
            android:text="By: Andrew J Newman"
            android:textSize="14sp" />

        <RatingBar
            android:id="@+id/searchRatingbar"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txt_searchAutherName"
            android:layout_marginTop="12dp"
            android:layout_toRightOf="@+id/img_searchBookCoverPhoto"
            android:numStars="5"
            android:rating="5"
            android:stepSize="1" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:14:14.113

[这](http://tausiq.wordpress.com/2012/08/22/android-listview-example-with-custom-adapter/)可能对你有用。

如果您想为不同的视图组件设置不同的侦听器，请这样做

```
sqView.ticker.setOnClickListener(new OnClickListener(){

                    @Override
                    public void onClick(View view) {
                        // TODO Auto-generated method stub
//write your code here
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:40:49.440

添加两个 android:clickable="false" android:focusable="false"

在你的 item_list.XML

我认为问题会解决

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:45:18.527

在主 Activity 类中实现 OnItemClickListener。

```
public class BookSearchResultActivity extends Activity implement OnItemClickListener {

//now implement unimplemented methods 
//and 
listView.setOnItemClickListener(this);
} 
```

我希望这能帮到您。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-12T13:25:38.297

在自定义 ListView 中的所有小部件的 xml 文件中使 false 可点击和可聚焦

# html - 如何更改句子中间的字体颜色

> ID：13583833
> 
> 赞同：15
> 
> 时间：2012-11-27T12:01:33.733
> 
> 标签：html, css

更改句子中单个单词或一组单词的颜色或字体的正确方法是什么？我正在使用 Twitter Bootstrap 并希望继承`<div>`'s 类的所有属性，但只稍微调整它们。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-27T15:53:55.107

离开`Chords`评论，您可以创建一个`<span>`围绕您要更改的文本的标签。您可以轻松地将多个类添加到单个跨度，以实现您想要的外观。

这是[一个小提琴](http://jsfiddle.net/PR6Pt/)，展示了如何在单个跨度上使用多个类。

**CSS**

```
.bold { font-weight: bold; }
.red { color: #FF0000; }
.yellow-background { background-color: Yellow; }​ 
```

**HTML**

```
Here is <span class="bold">some text</span> that we are going to apply 
<span class="bold red">different styles</span> to. You can see how 
<span class="bold yellow-background">multiple classes</span> can be used to 
change the <span class="red bold yellow-background">look and feel</span> 
of the text.​ 
```

# jquery - 使用 jQuery 隐藏和显示 html 元素

> ID：13583835
> 
> 赞同：0
> 
> 时间：2012-11-27T12:01:38.757
> 
> 标签：jquery, html

我有一个如下所示的 html 图像元素，默认情况下应该隐藏

```
<img 
  id="leftL" 
  src="anchors/Left.png"  
  style="
    width: 30px; 
    height: 24px;
    position:absolute;
    cursor:w-resize;
    visibility:hidden
  "
/> 
```

但在某些情况下，我需要显示图像。

我试过 jQuery`$("#leftL").css('visibility','visible')`和`$("#leftL").show()`.

两者都不适用于我的情况。但是，如果我`visibility:hidden`从样式中删除并使用`$("#leftL").css('visibility','hidden')`.

我在我的页面中加载大图像，所以当我使用时`$("#leftL").css('visibility','hidden')`会`Left.png`看到一段时间。

有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:05:22.593

`visibility`使用属性而不是 CSS`display`属性。

这就是 jQuery `.show()`&`.hide()`的变化，所以你的可见性状态将是一致的。

> 这大致相当于调用 .css('display', 'block')，除了 display 属性恢复到最初的样子

[http://api.jquery.com/show/](http://api.jquery.com/show/)

* * *

因此，而不是：

*   `visibility:visible`采用`display:block`
*   `visibility:hidden`采用`display:none`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:09:20.087

您的代码必须像

```
<img 
  id="leftL" 
  src="anchors/Left.png"  
  style="
  width: 30px; 
  height: 24px;
  position:absolute;
  cursor:w-resize;
  display:none;
  "
/> 
```

并且在 jQuery 中喜欢`$("#leftL").show();`或`$("#leftL").hide();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:05:37.623

jQuery`show()`和`hide()`方法适用于显示样式属性，而不是可见性。所以你可能想要使用`display:none`而不是`visibility:hidden`在图像上，然后你可以使用 jQuery 的显示和隐藏方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:06:21.010

查看[http://api.jquery.com/hide/](http://api.jquery.com/hide/)似乎 .hide() 编辑了 css 属性“显示”

> 如果在您的样式中使用 !important，例如 display: none !important，如果您希望 .show() 正常工作，则必须使用 .css('display', 'block !important') 覆盖样式。

是否使用

```
<div style="display:none"></div> 
```

解决这个问题？

# .net - 在没有 SQL Server 的情况下连接到数据库 mdf

> ID：13583842
> 
> 赞同：0
> 
> 时间：2012-11-27T12:02:00.067
> 
> 标签：.net, sql-server, database

我使用带有本地数据库（mdf）的.net webservice。在我将所有文件按原样移动到另一台计算机并在 iis 上创建一个新应用程序之前，这个所有网站都运行良好。这个网络服务上的所有方法都工作得很好，只是需要连接和查询数据库的方法我得到以下错误：

```
System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Data.Linq.SqlClient.SqlConnectionManager.UseConnection(IConnectionUser user)
   at System.Data.Linq.SqlClient.SqlProvider.get_IsSqlCe()
   at System.Data.Linq.SqlClient.SqlProvider.InitializeProviderMode()
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.Table`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.ElementAt[TSource](IQueryable`1 source, Int32 index) 
```

我更改了几次 Web 配置连接字符串，但没有防火墙保护。

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:29:47.003

如果您使用的是 MDF 文件，则必须在原始计算机上安装 SQL Server 或 SQL Server Express。

正如您所说，您已将文件移动到另一台计算机上，您的配置显然不再有效。您必须调整所有路径信息以适应新的安装文件夹。

此外，您必须确保新计算机上有一个正在运行的 SQL Server 或 SQL Server Express 实例，并使其指向 MDF 数据库文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:36:17.683

MDF 是标准的 SQL Server 扩展，并且您使用 SqlClient 进行连接，因此您肯定使用的是 SQL Server，但您连接的是本地数据库 (MDF) 文件，而不是实际的 SQL Server 服务。

*   确保运行 Web 应用程序的帐户有权访问 MDF 文件。

*   绝对确定连接字符串是连接的。至少把它贴在这里，这样我们就可以提供帮助。

*   要开始进行故障排除，请*暂时*授予每个人组对 MDF 文件的访问权限，看看是否有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:10:35.757

我建议进行一些基础设施检查，有时比只关注代码更好：

1.  确保您的 SQL 服务器具有正确的 LAN 连接
2.  从托管 Web 服务的服务器向托管 SQL Server 的服务器执行 ping 操作
3.  使用 MAnagement Studio 从不同的服务器查询数据库对象（可能是网络管理员无意中阻止了重要端口）

如果可能的话，检查两次你的连接字符串，有时分号会毁掉整个事情。

***编辑***

连接字符串

```
<add name="gatewayConnectionString" 
connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=c:\Projects\p\file.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True" 
providerName="System.Data.SqlClient"/> 
```

希望能帮助到你，

# ssrs-2008 - 导出到 Excel 详细值时的 SSRS 报告应显示在单行中

> ID：13583844
> 
> 赞同：0
> 
> 时间：2012-11-27T12:02:01.907
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix, ssrs-grouping

我有一个表，其中包含一个父组行和一个详细行，如下面的屏幕截图所示。
![在此处输入图像描述](../Images/4a438cdd72f199544d470f7ec882e96e.png)

我有一个要求，当导出到 excel 时，详细行中的值应该连接并显示在单行中，如下面的屏幕截图所示。
![在此处输入图像描述](../Images/825a8f745e33bd83c13b4ccd8f95309a.png)

请提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:16:57.747

尝试使用查找集并加入结果，作为您的详细表达式：

```
=Join(LookupSet(DataSet!GroupID.Value, DataSet!GroupID.Value, DataSet!Sno.Value, "Dataset"),",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:39:42.207

对不起，我误解了你的问题。

您可以使用 Lookupset 方法使用 =Join(LookupSet(Fields!State_ID.Value, Fields!State_ID.Value,Fields!city.Value,"DataSet2"),VBCRLF) 等表达式来实现您的要求。

看看这篇文章[http://www.bi-rootdata.com/2012/10/lookup-function-in-ssrs.html](http://www.bi-rootdata.com/2012/10/lookup-function-in-ssrs.html) 有一个带有查找函数详细信息的示例报告供下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:39:16.723

如果我正确理解了您的问题，即您希望在报告预览中以表格形式查看，但是当您将其导出到 excel 中时，列（SNO、名称）将出现在一行中。如果是这种情况，您可以尝试以下步骤，但需要 SSRS R2 版本：

1.  在报告和设计上放置要在报告预览中显示的表格
2.  现在对于您的 excel 导出部分，放置一个矩阵并在 Group1 列上进行行摸索，并在 SNO 和名称列上进行列分组
3.  现在放置一个显示 =IIF(Globals!RenderFormat.Name="EXCEL",FALSE,TRUE) 的矩阵可见性表达式。您可以查看[http://www.bi-rootdata.com/2012/10/efficient-way-of-handling-excel.html](http://www.bi-rootdata.com/2012/10/efficient-way-of-handling-excel.html)以了解有关 RenderFormat 的更多详细信息。

如果有任何疑问，请告诉我。

# ruby-on-rails - Ruby on Rails - 拍摄当前屏幕截图并保存

> ID：13583848
> 
> 赞同：0
> 
> 时间：2012-11-27T12:02:09.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我想在我们的一个网站上添加一个按钮，允许用户使用我们的错误跟踪系统提交错误。

其中一项功能要求是发送相关页面的屏幕截图。

1.  可能吗 ？（通过使用任何宝石）

帮忙解决一下。。。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:26:39.000

[capybara-screenshot](https://github.com/mattheworiordan/capybara-screenshot)似乎相当受欢迎。

我不熟悉任何其他默认提供此功能的 Ruby Gems，但我知道[Selenium](http://seleniumhq.org/)与*rSpec*配合得很好并启用了屏幕捕获功能。[在这里](https://stackoverflow.com/questions/1821167/selenium-screenshots-using-rspec)可以找到类似的问题。

同样，[CasperJS 也](http://casperjs.org/api.html#casper.captureSelector)提供了这个功能。

# facebook-opengraph - 通过 object_id 获取 link_id

> ID：13583851
> 
> 赞同：2
> 
> 时间：2012-11-27T12:02:28.957
> 
> 标签：facebook-opengraph, facebook-fql

如何通过 FQL 或 OpenGraph 通过 object_id 获取 link_id ？我正在尝试执行此查询：

```
FB.api('fql', {
    'q'     : '{'+
        '"object_url":"SELECT id, url,type FROM object_url WHERE url IN (SELECT url FROM url_like WHERE user_id=me())",' +                            
        '"link":"SELECT link_id, url FROM link WHERE link_id IN (SELECT id FROM #object_url WHERE type=\\\"link\\\")",' +                
    '}'
}, 
```

但link_id 与object_url.id 不同

# php - 如何使用 ajax 向 php xml_rpc 服务器发送请求

> ID：13583856
> 
> 赞同：0
> 
> 时间：2012-11-27T12:02:50.343
> 
> 标签：php, javascript, cordova, xml-rpc

我需要从 phonegap 应用程序向我的 xml_rpc php 服务器发送 xml_rpc 请求。想要使用 ajax 向服务器发送请求。请求必须包括，方法，参数等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T06:56:21.857

解决了 ！使用 Rest Controller，找到下面的教程

[http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

# jquery - document.ready 很慢，加载大约需要 2 分钟

> ID：13583857
> 
> 赞同：0
> 
> 时间：2012-11-27T12:02:55.757
> 
> 标签：jquery

我在使用 document.ready 时遇到了一些问题，它有时会减慢加载时间长达两分钟。

我看到了这个链接：[http ://encosia.com/dont-let-jquerys-document-ready-slow-you-down/](http://encosia.com/dont-let-jquerys-document-ready-slow-you-down/)

所以我的问题是，我怎样才能使用这种方法而不是 document.ready ？

这是我在 custom.js 文件中的 document.ready 函数。

```
$(document).ready(function () {
  setBudgetPeriodReadOnly();
  adjustTablePerBudgetNiva(budgetNiva);
  disableDeletedAccounts();
  allowedKeyCodes();
  showHideZeroRowsEvent();
  removeZeroOnClick();
  bindMouseOverOutEvent();
  bindTableRowEvents();
  returnAsTabEvent();
  budgetNivaChangedEvent(); 
```

});

如您所见，它包含一些函数，以及那些使用子函数的函数等等。

这是一个使用 live 的函数示例

```
function bindMouseOverOutEvent() {    
$('#budgetTable tr').live({
    mouseover: function () {
        $(this).find('td:eq(6)')
               .removeClass('budgetBelopp')
               .end().toggleClass('budgetTable-hover');
    },
    mouseout: function () {
        $(this).find('td:eq(6)')
               .addClass('budgetBelopp')
               .end().toggleClass('budgetTable-hover');

    }
}); 
```

}

但它不起作用，因为它包装在一个函数中，我希望它们被包装，所以我在函数名上看到函数在做什么。

我也是 jQuery 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:01:05.337

您可以在 haad 声明您的脚本文件，例如`<script async defer src="..."></script>`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T12:05:06.097

将javascript放在网站底部

# c - struct中的枚举，C中不完整元素的编译错误

> ID：13583859
> 
> 赞同：1
> 
> 时间：2012-11-27T12:02:57.103
> 
> 标签：c

在这个程序中，我想打印出有关人员的信息：

*   名字
*   他们的年龄
*   他们的工作类型
    *   学生
    *   职员
    *   或者两者都不

如果工作类型是学生，学生将拥有一门课程。如果工作类型是员工，那么它将有一个演讲室。

我希望这由`enum typeofpeople`. 然后我想调用`insert`将元素放入列表中，然后在`main()`.

我收到以下错误：

```
 error: array type has incomplete element type
 part5.c:9:27: error: 'student' undeclared here (not in a function)
 part5.c:9:44: error: 'staff' undeclared here (not in a function)
 part5.c:9:56: error: 'neither' undeclared here (not in a function) 
```

这是我的代码：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>

 char names[][7]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
  "Harriet"};
 int ages[7]= {22, 24, 106, 6, 18, 32, 24};

 enum typeofpeople type[]={student, student,staff,staff,neither,student,staff};

 char* course[]={"java1","java2","java3"};
 char* rooms[]={"lab1","lab2","lab3"};

 //a coutc for course, and room
 int countc, countr;

 union nextinfo{
   char* course;
   char* rooms;
 };

 /* declare your struct for a person here */
 typedef struct Record{
   char *name;
   int age;
   enum typeofpeople type;
   struct Record *next;
   union nextinfo info;
 }Record;

 //set the head pointer at the start of the list
 Record *headptr = NULL;

 /* compare two string */
 char compare_people_by_name(char *a, char *b)
 {

   return strcmp(a, b);
 }

 int compare_people_by_age(int a, int b)
 {
   if (a<b)
     return -1;
   else if (a>b)
     return 1;
   else
     return 0;  
 }

 void insert (char *s, int n, enum typeofpeople type,int(*compar)(int a, int b)) {

 Record *t, *pnew, *prv;

 prv=NULL;

 pnew=(Record *)malloc(sizeof(struct Record));

 if(pnew == NULL){  
    abort();
    printf("memory allocation fail"); 
    exit(1);  
}else{
    printf("memory allocation to person  - %s - \n", s);      
}

 pnew->name = s;
 pnew->age = n;
 pnew->next = NULL;
 pnew->type=type;

 //check type of people
 if(type==staff){      
   pnew->info.rooms=rooms[countr];
   countr++;
 }else(type==student){   
   pnew->info.course=course[countc];
   countc++;
 }

 //if the list is empty
 if (headptr==NULL)
 { 
    //add the first into the list
    headptr = pnew;
    return;
 }

 // look for the right place to insert
 for (t=headptr;t!=NULL;t=t->next) { 
     if (compar(n,t->age)<0) {        
        pnew->next=t;
        if (prv!=NULL)
           prv->next = pnew;
        else
           headptr=pnew;
        return;
     }
     //break the for loop.
     prv=t; 
 }
 prv->next=pnew;
 return;       
 }

 int main(int argc, char **argv) {

   Record *p, *q;

    countr=0;
    countc=0;

   for (int i=0; i < 7; i++) {
      insert (names[i], ages[i],type[i],compare_people_by_age);
   }

    printf("\n");
   Record *display;
   display=headptr;

   for (p = headptr; p!=NULL; p = p->next) {
     printf("The name is: %s, the age is:%i\n", p->name, p->age);

     if(display->type=staff){

  printf("room is %s\n",rooms);
}else if(display->type=student){
  printf("course is %s\n",course);

}else{
  printf("neither");

}
display=display->next;
   }

   /* To free your linked list: */

   p = headptr;

   while (p!=NULL){

q = p;
p = p->next;
free(q);
   }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T12:07:00.240

这条线是问题所在：

```
enum typeofpeople type[]={student, student,staff,staff,neither,student,staff}; 
```

你需要这样的东西：

```
enum typeofpeople {
   student,
   staff,
   neither
} type[]={student, student,staff,staff,neither,student,staff}; 
```

* * *

下一个问题：

这一行是错误的：

```
if(display->type=staff){ 
```

你真的想要：

```
if(display->type==staff){ 
```

# android - 数据库和多线程问题android

> ID：13583861
> 
> 赞同：0
> 
> 时间：2012-11-27T12:02:58.693
> 
> 标签：android, multithreading

我正在制作一个应用程序，我需要有 2 个线程同时访问数据库。作为一种理想的做法，我使用单例类来处理数据库。但是，我在[很多](https://stackoverflow.com/questions/2493331/what-are-the-best-practices-for-sqlite-on-android/3689883#3689883)地方读到，即使在单例类中，如果两个线程尝试同时写入，其中一个也会失败。我应该如何解决这个问题或者有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:52:54.577

SQLite 为您执行此操作，其他线程等待当前线程插入/更新，并且有一种方法[`isDbLockedByCurrentThread()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#isDbLockedByCurrentThread%28%29)可以知道您是否锁定了 DB。我仍然建议使用同步锁来确保并避免其他死锁和竞争条件。创建一个特殊的网关类，在一个地方定义所有更新/插入方法，制作这些方法`synchronized`。

# java - Antlr 语法 Java 代码

> ID：13583865
> 
> 赞同：0
> 
> 时间：2012-11-27T12:03:06.243
> 
> 标签：java, antlr

我已经使用 Antlr3 定义了一种语法语言。ANTLRWorks 生成词法分析器和解析器代码。

下面是一个示例语法：

```
grammar i;

@header {
package com.data;
}

elements    : (value (',' value)*)?;
insert      : 'INSERT INTO table' 'VALUES' '('elements')'';';
WS      : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; // handle white space between keywords 
```

上面的语法只是一个例子。我实际上正在为我的公司开发一个大语法。

我已将语法导入项目的 com.data 包中，可以使用生成的 Lexer 和 Parser。我想知道的：

*   Java 代码是否必须在语法中编写？
*   我更喜欢使用 Lexer 和 Parser，并在另一个类中而不是在语法中编写 Java 代码。

根据以下帖子：[ANTLR：有一个简单的例子吗？](https://stackoverflow.com/questions/1931307/antlr-is-there-a-simple-example)它显示了一个简单的示例。但是，在我的情况下，语法很大，并且希望语法被导入和使用。我有很多规则：

例如，上面的语法生成以下代码：

```
public void insert() throws RecognitionException; 
```

处理这个问题的最佳方法是什么？我有很多规则，它们是 void 的返回类型。

每条规则在 Java 术语中都有特定的含义。我认为最好的方法不是获取语法然后检查调用我的代码。例如：

```
String input = "INSERT INTO table VALUES (null);";
if(input.equals("INSERT INTO table VALUES (null);") {
     insertData();
}

public void insertData() {
   // insert data into database
} 
```

检查每种语法并调用我的代码是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:07:22.327

你的两个问题的答案：

1.  不，Java 代码不必嵌入到语法中。您可以改为生成 AST。我的语法很简单，所以我不这样做。
2.  生成的 AST 可以使用 Observer/Vistor 模式进行处理。谷歌应该为你提供一些东西。

# c++ - 通用的“越界”、“结束”迭代器

> ID：13583866
> 
> 赞同：0
> 
> 时间：2012-11-27T12:03:15.370
> 
> 标签：c++, tree, iterator

在我的应用程序中，我有一个（不平衡的）树数据结构。这棵树只是由“std::list of std::lists”组成 - 节点包含子节点的任意“列表”。使用它而不是单个列表使应用程序的其余部分变得更加容易。（该程序是关于将移动节点从一棵树更改为另一棵树/树中的另一部分/到它自己的树）。

现在一个明显的任务是在“树”中找到一个子树。对于非递归搜索，它很简单：

```
subtree_iterator find_subtree(const N& n) {         
    auto iter(subtrees.begin());
    auto e(subtrees.end());
    while (iter != e) {
        if ((*iter)->name == n) {
            return iter;
        }
        ++iter;
    }
    return e;
} 
```

它将迭代器返回到子树位置。然而，当我尝试实现多级搜索时，问题就开始了。即，我希望搜索`hello.world.test`点标记新级别的位置。

搜索工作正常

```
subtree_iterator find_subtree(const pTree_type& otree, std::string identify) const {
    pTree_type tree(otree);
    boost::char_separator<char> sep(".");
    boost::tokenizer<boost::char_separator<char> > tokens(identify, sep);
    auto token_iter(tokens.begin());
    auto token_end(tokens.end());

    subtree_iterator subtree_iter;
    for (auto token_iter(tokens.begin()); token_iter != token_end; ++token_iter) {
        std::string subtree_string(*token_iter);
        subtree_iter = tree->find_subtree_if(subtree_string);
        if (subtree_iter == tree->subtree_end()) {
            return otree->subtree_end()
        } else {
            tree = *subtree_iter;
        }
    }
    return subtree_iter;
} 
```

乍一看，它似乎“正确”工作，但是当我尝试使用它时，它失败了。使用它就像

```
auto tIn(find_subtree(ProjectTree, "hello.world.test"));
if (tIn != ProjectTree->subtree_end()) {
    //rest
} 
```

但是，这会导致调试断言错误“列表迭代器不兼容”。这并不太奇怪：我正在比较来自不同列表的迭代器。但是我可以实现这样的事情吗？我的“备份”选项将返回一个`std::pair<bool,iterator>`布尔部分确定树是否实际存在的位置。除了制作整个树的单个列表之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:49:24.933

您不应该在内部使用迭代器。改为使用节点。

```
template <typename T>
struct Node {
 T item;
 Node<T>* next;
}; 
```

然后将您的节点封装在一个迭代器外观中，如下所示：

```
template<typename T>
class iterator {
private:
  Node<T>* node;
public:
  ...
}; 
```

然后使用在达到或返回 end() 时返回的通用无效节点（当节点为 nullptr 时）。请注意，我建议的是单链表（不是标准的双链表）。这是因为您不能从指向无效空节点的无效通用 end() 迭代器返回。如果您不在算法中使用迭代器运算符--()，这应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:25:19.870

`std::vector<list_iterator>`堆栈遍历？堆栈的哪里`.back()`是唯一允许等于`end()`前一个的，并且`.front()`是根的迭代器`list`？

# java - 从表面视图开始新活动

> ID：13583867
> 
> 赞同：2
> 
> 时间：2012-11-27T12:03:15.557
> 
> 标签：java, android, android-intent, android-activity

试图从我的类 GameView.class 开始一个新的活动，它扩展了 SurfaceView。有了这个（在 Stackoverflow 上找到它）：

```
Context context = GameView.this.getContext();
context.startActivity(new Intent(context, ScoreScreen.class)); 
```

我把它放在一个从单独的线程中调用的方法中。当它被触发时，应用程序就会冻结。我尝试将它直接放在 onTouch 事件中（以跳过整个游戏并更快地测试它）并且它与以下内容一起崩溃：

```
11-27 08:00:00.430: W/dalvikvm(1772): threadid=12: thread exiting with uncaught exception (group=0x41e7b300)
11-27 08:00:00.430: E/AndroidRuntime(1772): FATAL EXCEPTION: Thread-598
11-27 08:00:00.430: E/AndroidRuntime(1772): java.lang.NullPointerException
11-27 08:00:00.430: E/AndroidRuntime(1772):     at com.tricky.puzzlepoker.GameView.onDraw(GameView.java:173)
11-27 08:00:00.430: E/AndroidRuntime(1772):     at com.tricky.puzzlepoker.MainThread.run(MainThread.java:38)
11-27 08:00:02.505: I/Process(1772): Sending signal. PID: 1772 SIG: 9 
```

我不知道该怎么办了，需要帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:34:46.497

SurfaceView 类从 View 扩展而来，没有 onCreate() 方法。但是构造函数需要一个上下文，在创建 GameView 对象时你必须放弃它。所以我建议你将上下文存储到一个全局变量中，以便以后在这个类中使用：

```
 private class GameView extends SurfaceView {
     private Context mContext;
     ...
     public GameView(Context context, AttributeSet attrs, int defStyle){
       super(context, attrs, defStyle);
       this.mContext = context;
       ...
     }
     ...
    } 
```

否则，您可以通过以下方式在 GameView 类中的其他任何地方获取上下文：

```
 mContext = getContext(); 
```

有了这个上下文，您可以稍后开始您的活动：

```
 Intent intent = new Intent(mContext, ScoreScreen.class);
    mContext.startActivity(intent); 
```

# ios - Nsstring 转换为 const char 删除引号

> ID：13583869
> 
> 赞同：-2
> 
> 时间：2012-11-27T12:03:19.880
> 
> 标签：ios, sqlite, nsstring

从 NSString 转换为 const char* 后，我遇到了引号问题 我在 NSString 中有一个 sql 查询，例如 SQLite3_exec 的
**INSERT INTO table VALUES("one","two","three")**
我需要一个 cons char，我试图通过
[queryS UTF8String]
或
[queryS Cstring]转换字符串，
但它会从文本中删除所有引号，并且看起来像
**INSERT INTO table VALUES(one,two,three)**
我如何从 NSString 使用引号生成 const char？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:12:07.417

你在逃避 NSString 吗？我刚刚执行了这个：

```
NSString* queryS = @"INSERT INTO table VALUES(\"one\",\"two\",\"three\")";
NSLog(@"%@", queryS);

const char* st = [queryS UTF8String];
NSLog(@"%s", st); 
```

得到了这个：

```
2012-11-27 09:08:09.926 INSERT INTO table VALUES("one","two","three")
2012-11-27 09:08:09.926 INSERT INTO table VALUES("one","two","three") 
```

# ajax - google gadget 的 Ajax 更新

> ID：13583871
> 
> 赞同：1
> 
> 时间：2012-11-27T12:03:37.790
> 
> 标签：ajax, google-gadget

我们正在嵌入一个外汇图表谷歌小工具，以在网页中显示股票数据。

```
<script src="//www.gmodules.com/ig/ifr?url=http://hosting.gmodules.com/ig/gadgets/file/100840413740199312943/stock-charts.xml&ampteh names;up_stockList=CSCO&amp;up_chart_period=1&amp;synd=open&amp;w=280&amp;h=140&amp;title=&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script> 
```

用户可以更改网站上的语言（通过单击标志图像），这会发送一个 ajax 请求，以适当的语言返回页面的正文内容（包括小工具的链接）。

我们遇到的问题是页面更新正常，但图表小工具消失了。

是否应该设置 innerHTML 重新加载小工具，或者我们必须在返回页面时以某种方式执行它？

# c# - Asp.net 配置默认发送邮件

> ID：13583872
> 
> 赞同：0
> 
> 时间：2012-11-27T12:03:37.243
> 
> 标签：c#, asp.net, webforms

嗨，我正在尝试在 asp.net wbforms 中创建密码恢复系统，但我设法做到了，发送的电子邮件很神秘，我不明白新密码应该是什么：

这是我收到的：

```
 X-Sender: forum@forum.com
X-Receiver: aly_aleczandru@yahoo.com
MIME-Version: 1.0
From: forum@forum.com
To: aly_aleczandru@yahoo.com
Date: 27 Nov 2012 13:41:57 +0200
Subject: Password
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Please return to the site and log in using the following informat=
ion.=0AUser Name: aleczandru=0APassword: c/x5jCAP;.x:T#=0A=0A 
```

似乎旧密码不再起作用我已经尝试过：c/x5jCAP;.x:T#=0A=0A 但它不起作用。在这种情况下，新密码应该是什么？以及如何配置此电子邮件以使其更加用户友好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:07:41.850

`=0A`是带引号的可打印消息中的换行符。如果您在标准电子邮件客户端中打开邮件，您应该会看到邮件正文已解码，并且密码应该更明显。

# alfresco - 从 alfresco 检索内容的示例 rest url

> ID：13583878
> 
> 赞同：8
> 
> 时间：2012-11-27T12:03:55.340
> 
> 标签：alfresco

我想使用 restful 在露天目录文件夹中检索 sample.html 的内容。

从 alfresco 文档中，我得到了以下 url 来检索文档的内容。但我不知道究竟什么是财产`stor_type`、、、`store_id`和。`id``attach`

```
GET /alfresco/service/api/node/content{property}/{store_type}/{store_id}/{id}?a={attach?} 
```

如果有人向我解释上述其余 url 属性并提供一个示例，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T21:02:07.277

[CMIS Web Scripts Reference](http://wiki.alfresco.com/wiki/CMIS_Web_Scripts_Reference)和[Repository RESTful API Reference](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference)提供了更多信息（但没有示例）。

*   `property`是为了获取内容而要遵循的节点的属性 - 这将默认为`cm:content`so 通常可以省略
*   `store_type`通常将是实时应用程序数据的“工作区” - 请参阅有关商店类型等的[论坛讨论](https://forums.alfresco.com/en/viewtopic.php?t=63)
*   `store_id`将是普通文件的“SpacesStore” - 请参阅其他商店的[论坛讨论](https://forums.alfresco.com/en/viewtopic.php?t=10459)
*   `id`是节点的唯一标识符（在给定存储中），例如`986b162e-0867-4a7b-9f4f-0e3837cdc97b`
*   `attach` - 如果为真，则强制将内容下载为附件（默认为假） - 我认为这是在浏览器中触发“另存为...”而不是直接流式传输内容？

示例 GET URL（未经测试 - 当然您需要使用有效的主机、端口和`id`）

```
http://my.example.com:8080/alfresco/service/api/node/content/workspace/SpacesStore/986b162e-0867-4a7b-9f4f-0e3837cdc97b 
```

和一起形成唯一[标识节点的 a](http://wiki.alfresco.com/wiki/NodeRef_cookbook)`store_type`，例如`store_id``id``NodeRef`

```
workspace://SpacesStore/f1a5e908-80cb-4c6e-b919-cc80fe53b835 
```

[Jeff Potts 的Curl 和 web 脚本教程](http://ecmarchitect.com/archives/2009/04/10/959)中有几个示例（尽管不是这个确切的 API 调用）。

如果您想按名称和路径（不知道节点 ID）下载文件，那么您将需要使用另一个 API，因为您使用的 API 要求您知道节点 ID。

[此页面](http://wiki.alfresco.com/wiki/URL_Addressability#DownloadContentServlet)提到接受路径和文件名的直接下载 URL，例如

```
/alfresco/download/direct?path=/Company%20Home/My%20Home%20Space/myimage.jpg 
```

根据访问控制，您可能需要在此 URL 中添加[登录票证](http://wiki.alfresco.com/wiki/URL_Addressability#Ticket_URL_Argument)参数，例如，[登录 URL](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Login)提供的安全票证`&alf_ticket=1234567890`在哪里。`1234567890`

* * *

注意：虽然我参考了上面的 CMIS Web 脚本参考，但另请参阅[此帖子](https://forums.alfresco.com/en/viewtopic.php?f=45&t=46473)和[Jira 票证](https://issues.alfresco.com/jira/browse/ALF-12667)，指出不推荐使用 CMIS Web 脚本 URL，即 (`/alfresco/service/cmis`和`/alfresco/cmis`)

# sql - 无法在查询中从 TextBox 进行部分匹配

> ID：13583880
> 
> 赞同：3
> 
> 时间：2012-11-27T12:04:06.697
> 
> 标签：sql, ado.net

我有一列包含像“Tom Hardy”这样的数据，我添加了一个新查询来在这个列中搜索，如下所示：

```
SELECT  Number, Name, Business, [Tax File No], Phone
FROM            Archive
WHERE        (Name = @Name) 
```

当我输入像“Tom Hardy”这样的全名时它可以工作，但我想通过搜索“Tom”或“Hardy”来查找结果。

我也试过：

```
SELECT  Number, Name, Business, [Tax File No], Phone
FROM            Archive
WHERE        (Name IN (@Name)) 
```

都不工作。

将 Visual Studio 2010 与连接到它的 C# 和 SQL 数据库一起使用。

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:40:12.003

戴夫是对的，除了你还想检查小写/大写的场景，也许这就是你没有收到好的结果的原因

喜欢 ：

```
SELECT  Number, Name, Business, [Tax File No], Phone
FROM            Archive
WHERE        (LOWER(Name) like '%' + LOWER(@Name) + '%') 
```

此语句将两个值都转换为小写，并且比较再次有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:04:56.357

您需要在参数中添加通配符

```
WHERE Name LIKE '%' + @Name + '%' 
```

所以

```
SELECT  Number, Name, Business, [Tax File No], Phone
FROM            Ahrcive
WHERE        (Name COLLATE UTF8_GENERAL_CI like '%' + @Name + '%') 
```

[我不认为你可以使用 'in' 关键字来做到这一点](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)。

# asp.net - RowDataBound 下拉列表

> ID：13583882
> 
> 赞同：0
> 
> 时间：2012-11-27T12:04:21.643
> 
> 标签：asp.net, vb.net

我有一个`RowDataBound`看起来像这样的事件处理程序：

```
Public Sub CustomersGridView_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles GVHistoricNames.RowDataBound 'RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim hyperlinkUSNHyperlink As HyperLink = CType(e.Row.FindControl("USNHyperlink"), HyperLink)
        Dim ddl As DropDownList = CType(e.Row.FindControl("ddlUsercode"), DropDownList)
        If ddl.SelectedValue = "" Then 'labLastUserCode.Text = "" Then
            hyperlinkUSNHyperlink.NavigateUrl = ""
        End If
    End If
 End Sub 
```

...以及`RowCreated`如下所示的事件处理程序：

```
Public Sub CustomersGridView_RowCreated(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles GVHistoricNames.RowCreated 'RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim ddl As DropDownList = CType(e.Row.FindControl("ddlUsercode"), DropDownList)
        ddl.Items.Add("")
        ddl.Items.Add(strUserName)
    End If
End Sub 
```

...以及`RowUpdating`如下所示的事件处理程序：

```
Protected Sub GVHistoricNames_RowUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles GVClearcoreHistoricNames.RowUpdating
    Try
        Dim ddl As DropDownList = CType(GVHistoricNames.Rows(e.RowIndex).FindControl("ddlUsercode"), DropDownList)
        SQLHistoricNames.UpdateParameters("UserCode").DefaultValue = ddl.SelectedValue

    Catch ex As Exception

    Finally

    End Try
End Sub 
```

请参阅`RowUpdating`事件处理程序的第三行。该`SelectedValue`属性的值永远不会正确，因为`RowDataBound`事件处理程序是在事件处理程序*之后*调用的`RowUpdating`。我如何访问`SelectedValue`？我想将其设置为更新参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:16:00.023

一种方法可能是查看实际的请求数据。例如，在`GVHistoricNames_RowUpdating`代码中，使用

```
Dim ddl As DropDownList = CType(GVHistoricNames.Rows(e.RowIndex).FindControl("ddlUsercode"), DropDownList)
SQLHistoricNames.UpdateParameters("UserCode").DefaultValue = Request(ddl.UiniqueID) 
```

当在将发布数据加载到控件之前需要控件值时（或者在以后的事件中动态添加/绑定控件时），我经常使用这种变通方法。

**编辑**

ASP.NET 使用[Control.UniqueId](http://msdn.microsoft.com/en-us/library/system.web.ui.control.uniqueid.aspx)来表示相应 html 元素的 name 属性。它（以及 ClientID）通常是通过将控件的 id 附加到父级（命名容器的父级）的唯一 id 来构造的，因此您会为网格中的多个下拉列表获得不同的唯一 id（和客户端 id）（因为每一行充当命名容器）

就您的问题而言，您可能正在设计时模板中创建下拉列表，同时您正在创建的行中加载列表项。然而，在行创建事件被触发之前，下拉列表已经被添加到页面控制树并且它的 POST 事件已经被处理。在这种情况下，此时下拉列表中将没有项目来设置选择。因此问题。

# android - 操作栏选项卡不填满选项卡栏

> ID：13583885
> 
> 赞同：9
> 
> 时间：2012-11-27T12:04:33.940
> 
> 标签：android, actionbarsherlock, android-tabs

经过数小时的尝试，我终于找到了一种手动将操作栏标签栏与操作栏分开的方法。 [如果没有空间，操作栏将选项卡转换为列表导航](https://stackoverflow.com/questions/13566493/actionbar-convert-tabs-to-list-navigation-if-there-is-no-room) 但是现在还剩下一个问题。选项卡不填充选项卡栏。 ![在此处输入图像描述](../Images/70b32e01658d7d2ec47db61d8d93c288.png)

**编辑** 选项卡通过以下方式添加到操作栏： ActionBar.Tab relatieTab = actionBar.newTab().setText("Relaties"); actionBar.addTab(relatieTab);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T02:52:48.553

尝试切换父级。如果这不起作用，请尝试访问此帖子：[Stacked ActionBar tab bar not rolling parent](https://stackoverflow.com/questions/14979327/stacked-actionbar-tab-bar-not-filling-parent)

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:36:33.210

使用以下内容自定义操作栏中的选项卡：

```
<style name="MyAppActionBarTabStyle" parent="@android:style/Widget.ActionBar.TabView">
    <item name="android:background">@drawable/actionbar_tabindicator</item>
    <item name="android:minWidth">40dip</item>
    <item name="android:maxWidth">40dip</item>
    <item name="android:layout_width">0dip</item>
    <item name="android:layout_weight">1</item>
</style> 
```

确保您设置这些导航选项卡的活动在其@android:theme 中有以下内容

```
<style name="MyAppTheme" parent="android:style/Theme.Holo.Light">
    <item name="android:actionBarTabStyle">@style/MyAppActionBarTabStyle</item>
</style> 
```

我仍然不知道如何检测标签栏是单独的，即在主操作栏下方还是合并（在横向或更大的屏幕中，即使是纵向）

另一个有趣的事情是如何防止标签栏在空间不足时折叠成微调器。

当我找到上述问题的答案时，将更新帖子。在那之前希望这些风格对其他人有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T18:45:31.927

我今天刚刚解决了这个问题。
他们的钥匙是`<item name="android:padding">0dp</item>`这样使用的......

```
<style name="MyActionBar"
    parent="@android:style/Widget.Holo.Light.ActionBar">
</style>

<style name="LoginActionBar"
    parent="@style/MyActionBar">
    <item name="android:actionBarTabStyle">@style/LoginActionBarTabs</item>
</style>

<style name="LoginActionBarTabs"
    parent="@android:style/Widget.Holo.ActionBar.TabView">
    <item name="android:padding">0dp</item>
</style> 
```

您不需要那么多样式，但我不想取出任何块，这可能会导致混乱。

我还看到您已经解决了这个问题，但我想我会为下一个来寻找这个的人添加我的答案。

# widget - 如何禁用 Sitefinity Post 博客单项

> ID：13583886
> 
> 赞同：2
> 
> 时间：2012-11-27T12:04:45.793
> 
> 标签：widget, blogs, sitefinity, sitefinity-5

我的网站在页脚中有我博客的最后 5 篇文章摘要。

问题：

当我阅读一篇文章时，我的页脚显示的是同一篇文章，而不是显示摘要。

我想从页脚禁用单个项目。是否可以这样做，或者我是否必须为我的页脚创建一个小部件？

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:19:43.183

请查看此博客文章以获取答案：

[http://www.sitefinity.com/blogs/slavo-ingilizovs-blog/2011/12/15/url_filtering_with_multiple_content_widgets_per_page](http://www.sitefinity.com/blogs/slavo-ingilizovs-blog/2011/12/15/url_filtering_with_multiple_content_widgets_per_page)

希望这能解决您的问题。

伊万

# mysql - 如何将 MS SQL 查询转换为 MySQL 查询

> ID：13583892
> 
> 赞同：1
> 
> 时间：2012-11-27T12:04:55.340
> 
> 标签：mysql, sql-server, converter

我有一个 MSSQL 查询文件（.sql），现在我需要将其转换为 MYSQL 查询。请帮我。像这样的脚本：

```
CREATE TABLE [dbo].[Artist](
    [ArtistId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](120) NULL,
PRIMARY KEY CLUSTERED 

(
    [ArtistId] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:12:02.683

如果您想手动转换 DDL，那么您可以通过根据具体情况建立规则来做到这一点，例如如下：

*   `[]`需要用反引号替换
*   IDENTITY(1,1) 可以替换为`AUTO_INCREMENT`
*   大多数 ANSI 选项和设备设置可以忽略（这些似乎只是因为表已被重新编写）
*   wrt `dbo`，MySQL 没有以与 SQL [Server](https://stackoverflow.com/questions/1219711/mysql-create-schema-and-create-database-is-there-any-difference)相同的方式实现模式- 您需要将模式分离到数据库中，或者删除模式，或者将模式名称更改为表名（例如作为前缀）

这将为您留下如下内容：

```
CREATE TABLE `Artist`(
    `ArtistId` int NOT NULL AUTO_INCREMENT,
    `Name` nvarchar(120) NULL,
    PRIMARY KEY CLUSTERED 
    (
       `ArtistId` ASC
    )
); 
```

[在这里提琴](http://www.sqlfiddle.com/#!2/ca37f)

[但是，使用迁移工具](http://dev.mysql.com/tech-resources/articles/move_from_microsoft_SQL_Server.html)执行此迁移通常要容易得多- 搜索“如何”部分`Transition from SQL Server to MySQL`

# javascript - 仅选择未选择的组合框jquery

> ID：13583898
> 
> 赞同：1
> 
> 时间：2012-11-27T12:05:15.233
> 
> 标签：javascript, jquery, combobox

带有组合框生成功能的代码（运行良好）

```
<script>
$('#combos').on('change', '.combo', function() {
var selectedValue = $(this).val();

if (selectedValue !== '' && $(this).find('option').size() > 2) {
var newComboBox = $(this).clone();
var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
var newComboBoxIndex = thisComboBoxIndex + 1;
$('.parentCombo' + thisComboBoxIndex).remove();

newComboBox.attr('data-index', newComboBoxIndex);
newComboBox.attr('id', 'combo' + newComboBoxIndex);
newComboBox.addClass('parentCombo' + thisComboBoxIndex);
newComboBox.find('option[value="' + selectedValue + '"]').remove();
$('#combos').append(newComboBox);
}
});</script> 
```

html 和 php（运行良好）

```
<form id="myForm">
<div id="combos"><select id="combo1" class="combo" data-index="1">
<option></option>
<?php
while($r = mysql_fetch_array($result))
{
echo "<option value=\"" .$r['id'] . "\">".$r['field'] ." ------</option>";
}
?>
</select>
</div>
<input type="button"  id="button_submit" value="Show">
</form> 
```

此代码应仅选择未选择的组合框。但不工作。我认为仅适用于该函数找到的第一个非选定值。 [请看图片](http://s11.postimage.org/48bdfwb1d/combo.png)

```
<script>
$('#button_submit').click(function() 
{

var combo_box_values = $('#combo1 option:not(:selected)').map(function () 
{
return parseInt(this.value);
}).get();

});
</script> 
```

问：有可能吗？我的代码在哪里丢失？

干杯

**编辑：源代码**

```
<h4>Data Options</h4></center>
<div id="combos"><select id="combo1" class="combo" data-index="1">
<option></option>
<option value="1">uptime ------</option>
<option value="2">score ------</option>
    <option value="3">gender ------</option>
<option value="4">age ------</option>
    <option value="5">angry ------</option>
<option value="6">happy ------</option>
    <option value="7">sad ------</option>
<option value="8">surprised ------</option>
    <option value="9">location ------</option></select>
    <select id="combo2" class="combo parentCombo1" data-index="2">
    <option></option>
    <option value="1">uptime ------</option>
    <option value="2">score ------</option>
    <option value="4">age ------</option>
    <option value="5">angry ------</option>
    <option value="6">happy ------</option>
    <option value="7">sad ------</option>
    <option value="8">surprised ------</option>
<option value="9">location ------</option></select>
    <select id="combo3" class="combo parentCombo1 parentCombo2" data-index="3">
    <option></option>
    <option value="1">uptime ------</option>
    <option value="4">age ------</option>
    <option value="5">angry ------</option>
    <option value="6">happy ------</option>
    <option value="7">sad ------</option>
    <option value="8">surprised ------</option>
    <option value="9">location ------</option></select>
    <select id="combo4" class="combo parentCombo1 parentCombo2 parentCombo3" data-index="4">
    <option></option>
    <option value="1">uptime ------</option>
    <option value="5">angry ------</option>
    <option value="6">happy ------</option>
    <option value="7">sad ------</option>
    <option value="8">surprised ------</option>
    <option value="9">location ------</option></select></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:21:00.857

如果您想检查*所有*元素中所有未选择的选项，我认为选择器的前导部分`.map()`需要提供，`#combos`而不是。例如，`#combo1`*`<select>`*

 *```
var combo_box_values = $('#combos option:not(:selected)').map(function() {
    return parseInt(this.value);
}).get(); 
```

**编辑：**根据评论中的反馈和更新的问题，这可能对您有用，但是我确信存在更好的解决方案，因为这*感觉很*笨重。

```
$('#button_submit').click(function() {
  var combo_box_values = $('#combos .combo').filter(function() {
    return this.selectedIndex === 0;
  }).map(function () {

    return $('option:not(:selected)', this).map(function() {
      return parseInt(this.value);
    }).get();
  }).get();

  console.log(combo_box_values);
  return false;
}); 
```

我认为要理解的关键部分是[`.filter()`](http://api.jquery.com/filter/)排除`<select>`用户已选择选项的 s ，只留下未选择的那些。从那里，找到所有未选择的选项并提取 value 属性的情况。

如果您想要*选择*的选项，您可以使用`$('option', this)`而不是`$('option:not(:selected)', this)`在上面的代码中。

在[**演示**](http://jsfiddle.net/Fnuke/)中，这应该显示`2,3,4,5,6,7,8,9`是否在第一个中选择了*正常运行时间*`<select>`，`1,2,3,4,5,6,7`如果在第一个中选择了*惊讶*，在第二个中选择了*位置*。

希望这可以帮助！*

# list - 将一个列表中的副本复制到新列表中

> ID：13583900
> 
> 赞同：0
> 
> 时间：2012-11-27T12:05:22.170
> 
> 标签：list, f#

我有这个函数，它需要一个列表并检查重复项，如果发现任何重复项，它们将被添加到一个新列表中，如下所示：

```
let foo1 z list = list |> List.filter (fun e -> e <= z) 
```

这给了 foo1 1 [2;3;4;1;5;1;6;1] => [1;1;1] 问题是我不想在 f# 中使用任何内置函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:17:48.793

您已经就列表处理提出了一些基本的 F# 问题，因此我建议您先阅读一些介绍，然后自己尝试一下。

*   [使用功能列表](http://msdn.microsoft.com/en-us/library/hh297099%28v=vs.100%29.aspx)解释了 F# 列表的工作原理
*   F# 简介有一个关于列表和[模式匹配与递归的](http://msdn.microsoft.com/en-us/vs2010trainingcourse_introtofsharp_topic6#_Toc281930838)[教程](http://msdn.microsoft.com/en-us/vs2010trainingcourse_introtofsharp_topic5#_Toc281930836)

使用内置函数是解决实际问题的正确方法。如果您想学习 F# 并了解递归，请先阅读上述内容。然后你应该能够写出类似的东西：

```
let rec duplicates z = function
  // If the list is empty, return empty list of duplicates
  | [] -> []
  // If it starts with 'z' then return one duplicate and recursively process the rest
  | x::xs when x = z -> x::(duplicates x xs)
  // If it starts with something else, then skip the first element and process the rest
  | x::xs -> duplicates z xs 
```

有许多 F# 介绍解释了如何`filter`实现类似的功能。F# wikibook 涵盖了这个[主题](http://en.wikibooks.org/wiki/F_Sharp_Programming/Lists#Filter_A_List)，您会在大多数 F# 书籍中找到它（请参阅[fsharp.org 上的列表](http://fsharp.org/about/learning.html)） ，www.tryfsharp.org 上的[工作列表](http://www.tryfsharp.org/Tutorials.aspx#)部分也涵盖了这个主题。

# windows-8 - 媒体播放器框架中的自动显示搜索栏

> ID：13583903
> 
> 赞同：0
> 
> 时间：2012-11-27T12:05:27.483
> 
> 标签：windows-8, windows-runtime, winrt-xaml, windows-store-apps

我在我的 Windows 商店应用程序中使用 Player Framework

[http://playerframework.codeplex.com/](http://playerframework.codeplex.com/)

我只想将它用于音频文件（没有视频）。现在我希望当用户使用搜索器启动跟踪栏时，暂停/播放，音量可见。我实现了，当您将鼠标移到它上面时，它会显示它不会消失。但我需要在开始时显示它。我怎样才能做到这一点 ？

在我的应用中看起来像这样

```
<mmppf:MediaPlayer Name="TrackPlayer" Width="400" Height="50" AudioCategory="BackgroundCapableMedia" AutoHideBehavior="None" IsDurationVisible="True" AutoHide="False" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:14:38.527

只需设置**IsInteractive="True"**：

```
<mmppf:MediaPlayer Name="TrackPlayer" Width="400" Height="50" AudioCategory="BackgroundCapableMedia" IsInteractive="True" IsDurationVisible="True" AutoHide="False"  /> 
```

# jquery - 获取 jQuery-Autocomplete 的真正价值

> ID：13583906
> 
> 赞同：1
> 
> 时间：2012-11-27T12:05:30.237
> 
> 标签：jquery, jquery-ui, autocomplete

我需要像这样与 jquery-autocomplete 一起使用的选择框中的“真实”值...

我从[http://jqueryui.com/autocomplete/#combobox获得了整个功能](http://jqueryui.com/autocomplete/#combobox)

所以，现在我已经改变了这个：

```
select: function( event, ui ) {
   ui.item.option.selected = true;
   that._trigger( "selected", event, {
       item: ui.item.option
   });
}, 
```

至...

```
select: function(event, ui) {
   var selectedObj = ui.item;
   alert(selectedObj.value);
}, 
```

我的“原始”选择框看起来像：

```
<div class="ui-widget">
    <select id="combobox" onclick="">
        <option value="0">...</option>
        <option value="value_i_want_to_get" >Text</option>
    </select>
</div> 
```

因此，如果我更改选择，我会从警报中获得“文本”，`alert(selectedObj.value);`但我需要选项的值，而不是文本。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:44:59.520

就是这样，andyb！这对我有用：

```
select: function(event, ui) {
   var selectedObj = ui.item.option.value;
   alert(selectedObj);
}, 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:16:05.397

试试这个

```
$(this).find("option:value").text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:24:19.663

所选选项已作为参数提供给 as`select`函数`ui.item.option`，因此可以使用以下方式访问所选选项的 value 属性：

```
console.log(ui.item.option.value); 
```

或访问的文本

```
console.log(ui.item.option.text); 
```

# php - 添加少于比较器时mysqli准备语句的致命错误

> ID：13583908
> 
> 赞同：1
> 
> 时间：2012-11-27T12:05:33.357
> 
> 标签：php, mysqli, prepared-statement

我正在使用此代码选择一些日期小于某一天的行。当我`<=`在 sql 中放入（小于）时，会抛出一个致命错误。仅添加`=`.

我正在使用来自[https://github.com/ajillion/PHP-MySQLi-Database-Class的 PHP-MySQLi-Database-Class](https://github.com/ajillion/PHP-MySQLi-Database-Class)

```
$params = array($id, $day, $day);
$results = $db->rawQuery("
       SELECT * 
       FROM `forecasts` 
       WHERE `geonameid`=? and (DAY(time_from) <= DAY(?) 
       OR DAY(time_to) <= DAY(?))", $params); 
```

> 致命错误：准备查询时出现问题 (SELECT * FROM `forecasts`WHERE `geonameid`=? and (DAY(time_from) ) 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 '' 附近使用的正确语法

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:20:36.053

看起来是 PHP-MySQLi-Database-Class 问题。第 101 行，函数 rawQuery

```
$this->_query = filter_var($query, FILTER_SANITIZE_STRING); 
```

此功能剥离标签，您的查询结果是

```
SELECT * FROM `forecasts` WHERE `geonameid`=? and (DAY(time_from) 
```

所以你可以用

```
$this->_query = $query; 
```

# asp.net - 获取磁盘空间错误，但有足够的可用磁盘空间

> ID：13583916
> 
> 赞同：1
> 
> 时间：2012-11-27T12:06:09.317
> 
> 标签：asp.net, diskspace, quota

我遇到了网站问题。
最初 Access 数据库文件丢失，并开始在网站上导致 500 错误，因为它找不到数据库文件。

我找到了数据库的备份并将其复制回文件夹并收到“磁盘空间不足错误”。

我删除了同一网站不同目录中的一些图片以释放一些空间，然后能够将数据库文件复制回它所属的目录。

尝试将图片复制回来时，我再次收到磁盘空间错误。

该驱动器没有任何配额，并且该驱动器被格式化为 NTFS。

在我看来，这个网站上设置了 100MB 的限制，但我找不到在哪里。

一些信息：

*   操作系统：Windows Server 2003 R2
*   C盘可用空间：508GB
*   C 盘属性：配额已禁用 [未勾选]
*   网站目录：c:\myhostedsite\something.org.za\www\
*   Asp.net 版本 1.1.4322

错误信息：

> 复制文件或文件夹时出错 无法复制 XXXXXXX：
> 可用磁盘空间不足。删除一个或多个文件以释放磁盘空间，然后
> 重试。要通过委派旧文件或
> 不必要的文件来释放此驱动器上的空间，请单击磁盘清理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:01:51.963

所以这似乎是一个配额问题，而不是硬盘驱动器上的配额。

在服务器上你必须去：

```
Start->
Programs->
Administrative Tools->
File Server Resource Manager 
```

打开左侧的配额管理选项卡。选择配额

我遇到问题的网站出现在列表中。它设置了 100MB 的配额

增加配额有效！

将文件复制回后将配额减少回 100MB 会再次破坏站点。

所以配额必须大于目录的大小。

感谢所有可能一直在为我寻找答案的人。

# spring - 泽西和弹簧型材

> ID：13583917
> 
> 赞同：2
> 
> 时间：2012-11-27T12:06:11.250
> 
> 标签：spring, jersey

我应该创建仅适用于某些弹簧配置文件的 Jersey 端点。我试图通过以下方式做到这一点：

```
<beans profile="teamcity">
    <bean id="impactRadiusEndpoint" class="com.jingit.api.service.ImpactRadiusEndpoint">
        <constructor-arg ref="impactRadiusQueueProcessor"/>
        <constructor-arg ref="messagesReceiver"/>
    </bean>
</beans> 
```

但是，当我使用其他一些配置文件启动应用程序并调用此端点时，Jersey 会忽略弹簧配置文件并尝试启动。我在日志中找到以下输出：

```
SEVERE: Missing dependency for constructor public     com.jingit.api.service.ImpactRadiusEndpoint(com.jingit.commons.queue.service.QueueProcessor,com.jingit.commons.queue.service.QueueMessagesReceiver) at parameter index 0
SEVERE: Missing dependency for constructor public com.jingit.api.service.ImpactRadiusEndpoint(com.jingit.commons.queue.service.QueueProcessor,com.jingit.commons.queue.service.QueueMessagesReceiver) at parameter index 1 
```

这个问题也破坏了其他端点。有人知道如何解决吗？

# java - 如何使用普通的 java 类访问 Web 服务？

> ID：13583918
> 
> 赞同：7
> 
> 时间：2012-11-27T12:06:11.010
> 
> 标签：java, web-services

```
**My Web service class**

import javax.jws.WebMethod;
import javax.jws.WebService;

/**
 * @author edward
 *
 */
@WebService
public class HelloWeb {

    @WebMethod
    public String sayGreeting(String name) {
        return "Greeting " + name + "....!";
    }

} 
```

* * *

**我的服务器 java 类**

```
import javax.xml.ws.Endpoint;

public class Server {
    public static void main(String[] args) {
        Endpoint.publish("http://localhost:9090/HelloWeb", new HelloWeb());
        System.out.println("Hello Web service is ready");
    }
} 
```

服务器运行正常，我可以使用返回 WSDL 代码的 url 访问服务。但我想使用 java 中的唯一 URL 访问服务器。我有以下客户端 java 代码。

**客户端访问 HelloWeb 服务**

```
import java.net.URL;

import javax.xml.namespace.QName;
import javax.xml.rpc.Service;
import javax.xml.rpc.ServiceFactory;

public class WebClient {
    String wsdl = "http://172.21.1.65:9090/HelloWeb?wsdl";
    String namespace = "http://helloweb.com";
    String serviceName = "HelloWebService";

    QName serviceQN = new QName(namespace, serviceName);

    {
        try{

        ServiceFactory serviceFactory = ServiceFactory.newInstance();
        Service service = serviceFactory.createService(new URL(wsdl), serviceQN);

        }catch (Exception e) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:41:06.247

试试这个，注意我在“test”包中编译并运行了你的服务器，这很重要。这只是从 JAX-WS 开始的一个基本示例。

```
package test;

import java.net.URL;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;

public class WebClient {

    @WebService(name = "HelloWeb", targetNamespace = "http://test/")
    public interface HelloWeb {
        @WebMethod
        String sayGreeting(String name);
    }

    public static void main(String[] args) throws Exception {
        Service serv = Service.create(new URL(
                "http://localhost:9090/HelloWeb?wsdl"), 
                new QName("http://test/", "HelloWebService"));
        HelloWeb p = serv.getPort(HelloWeb.class);
        System.out.println(p.sayGreeting("John"));
    }
} 
```

# java - 从父文件夹中忽略 SVN 中的文件

> ID：13583919
> 
> 赞同：1
> 
> 时间：2012-11-27T12:06:15.820
> 
> 标签：java, linux, svn, version-control

是否可以忽略嵌套在项目树内的文件夹中的文件？当我使用“svn propedit svn:ignore”添加此类条目时。在我的根文件夹中：

```
src/folder1/folder2/folder3/File1.java 
```

SVN 仍然将文件显示为未版本化（带有“？”标记）并且不会忽略它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:23:26.673

svn:ignore 属性仅适用于它所设置的文件夹的内容，而不适用于它的任何子文件夹，请参阅： [使用 Subversion 进行版本控制，章节“忽略未受版本控制的项目”](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.ignore.html)

为了忽略 File1.java，在 folder3 而不是根文件夹上设置 svn:ignore。

# php - cjuidialog 模态窗口上的验证

> ID：13583921
> 
> 赞同：2
> 
> 时间：2012-11-27T12:06:31.550
> 
> 标签：php, jquery, mysql, ajax, yii

我有一个类似的解决方案，与 [此处的 wiki 上发布的类似](http://www.yiiframework.com/wiki/72/cjuidialog-and-ajaxsubmitbutton)

但我无法让我的验证规则按预期工作。当我单击提交按钮时，模式窗口会关闭，如果我没有填写所有必填字段，则不会保存任何内容。

知道我在这里缺少什么吗？我在动作和视图上都“开启”了 ajax 验证。

这是我的一些代码：

模型机构.php

```
 public function actionAddnew() {
        $model=new Institution;
        // Ajax Validation enabled
        $this->performAjaxValidation($model);
                $flag=true;
        if(isset($_POST['Institution']))
        {       $flag=false;
            $model->attributes=$_POST['Institution'];

            if($model->save()) {
                //Return an <option> and select it
                            echo CHtml::tag('option',array (
                                'value'=>$model->id,
                                'selected'=>true
                            ),CHtml::encode($model->name),true);
                        }
                }
                if($flag) {
                    Yii::app()->clientScript->scriptMap['jquery.js'] = false;
                    $this->renderPartial('createDialog',array('model'=>$model,),false,true);
                }
    } 
```

文件 createDialog.php

```
<?php 
$this->beginWidget('zii.widgets.jui.CJuiDialog',array(
                'id'=>'institutionDialog',
                'options'=>array(
                    'title'=>Yii::t('institution','Institution'),
                    'autoOpen'=>true,
                    'modal'=>'true',
                    'width'=>'auto',
                    'height'=>'auto',
                ),
                ));
echo $this->renderPartial('_formDialog', array('model'=>$model)); ?>
<?php $this->endWidget('zii.widgets.jui.CJuiDialog');?> 
```

最后是 _formDialog.php 的一部分

```
 <div class="form" id="institutionDialogForm">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'institution-form',
    'enableAjaxValidation'=>true,
)); 
?>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'name'); ?>
        <?php echo $form->textField($model,'name',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'name'); ?>
    </div>

....
    <div class="row buttons">
        <?php echo CHtml::ajaxSubmitButton(Yii::t('institution','Create'),CHtml::normalizeUrl(array('institution/addnew','render'=>false)),array('success'=>'js: function(data) {
                        $("#User_institutionid").append(data);
                        $("#institutionDialog").dialog("close");
                    }'),array('id'=>'closeInstitutionDialog')); ?>
    </div>

<?php $this->endWidget(); ?>

</div> 
```

任何想法？在此示例中，我希望在此处也需要已根据规则要求设置的“名称”。请注意，在 gii 生成的默认 crud 文件上，这可以正常工作。而且我正在尝试使用模式窗口实现一个向导，以在填充向导时添加新的项目。

更清楚地说，我想避免提交模式窗口，以便在点击模式窗口上的提交按钮之前要求填写必填字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:17:35.807

这里的问题是您正在根据`success`ajax 调用关闭对话框，而不是验证成功，即以下行：

```
$("#institutionDialog").dialog("close"); 
```

`ajaxSubmitButton`无论表单的验证状态如何，总是在单击时执行。

要仅在成功通过验证时关闭对话框，您必须更改`success`jquery ajax 的回调函数，以及在控制器操作中处理表单的方式。

首先，您必须检测模型是否已成功验证。要在您的控制器操作中执行此操作，请传递一个指示验证状态的附加字段：

```
if($model->save()) {
    echo CJSON::encode(
        array(
            'data' => CHtml::tag('option',array (
                          'value'=>$model->id,
                          'selected'=>true
                          ), CHtml::encode($model->name),true),
            'status'=>'success'
        )
    );
} 
```

然后更改您`ajaxSubmitButton`的 ajax 选项（即`success`回调和`dataType`）：

```
<?php echo 
    CHtml::ajaxSubmitButton(
        // ... old code
        array(
            'dataType'=>'json',
            'success'=>'function(data) {
                if(data != null && data.status == "success") {
                    $("#User_institutionid").append(data.data);
                    $("#institutionDialog").dialog("close");
                }

            }'),
        // ... old code
    ); 
?> 
```

# .net - 如何减小滚动条的拇指大小

> ID：13583922
> 
> 赞同：2
> 
> 时间：2012-11-27T12:06:33.157
> 
> 标签：.net, wpf

我有一个录制文件，其大小可以通过 WPF 滚动条滚动（滚动条的最大值和最小值以毫秒为单位）。

我使用了一个计时器控件，它将继续查询重新编码文件的大小。每秒钟记录文件的大小都会增加。它最多可以持续 12 小时，或者用户可以在两者之间停止它。

我的要求是：

1.  当我们开始录制时，滚动条的缩略图大小应该是完整视口（可滚动区域）的长度。
2.  随着记录的进展，拇指大小应该减小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:11:08.233

默认滚动条为您提供了此功能，不是吗？请务必在 ScrollBar 上设置 ViewportSize 属性。

您需要的 ScrollBar 属性是

*   最小值：可能为零。
*   最大值：录制的当前长度。
*   ViewportSize：视口可以看到的记录时间长度。

![在此处输入图像描述](../Images/233e3832e4a1849e4d61007fee99a241.png)

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="99" Width="418">

    <Grid Margin="0,0,2,0">
        <Slider Minimum="0" Maximum="1000" Name="slider1" Margin="61,27,0,0" Height="27" VerticalAlignment="Top" HorizontalAlignment="Left" Width="338" />
        <TextBlock Text="{Binding Value, ElementName=slider1}" Margin="10,32,0,0" Height="16" VerticalAlignment="Top" HorizontalAlignment="Left" Width="46"/>
        <ScrollBar Orientation="Horizontal"  Minimum="0" Maximum="{Binding Value, ElementName=slider1}" Margin="10,10,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Width="388" Height="1" SmallChange="1" LargeChange="10" ViewportSize="10"/>                                                                                                
    </Grid>
</Window> 
```

# ruby-on-rails-3 - 我们可以强制 rspec stub_model 将 created_at 列填充到 Time:now

> ID：13583928
> 
> 赞同：3
> 
> 时间：2012-11-27T12:07:02.263
> 
> 标签：ruby-on-rails-3, rspec, rspec-rails, twitter-bootstrap-rails

我正在使用 twitter bootstrap gem 生成在索引页面中显示 created_at 列的视图。与脚手架一起生成的 rspec 测试使用 stub_model 来测试索引视图。这些测试失败，因为 created_at 列为零。

就像 stub_model 生成为 dummy id 一样，它是否也可以将 created_at 列设置为 Time.now。可以通过配置完成吗？或者我们是否需要在创建存根时每次都指定它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T13:54:55.833

从[源代码](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/mocks.rb#L210)来看，默认情况下这似乎是不可能的。这给您留下了几个选择：

**1.**`created_at`每次创建模型存根时指定值：

```
m = stub_model(MyModel, :created_at => Time.now) 
```

**2.**创建自己的辅助方法，`created_at`在初始化存根后设置属性：

```
module Helpers
  def stub_model_with_timestamp(model_class, stubs={})
    stub_model(model_class, { :created_at => Time.now }.merge(stubs))
  end
end 
```

然后只需包含该模块，`spec_helper.rb`以便它在所有规格中都可用：

```
RSpec.configure do |config|
  include Helpers
  ...
end 
```

**3.**如果您真的想按`stub_method`原样使用，您可以通过重新打开模块并为原始方法设置别名来对 rspec-rails 进行猴子补丁以使其按照您想要的方式工作：

```
module RSpec::Rails::Mocks
  def stub_model_with_timestamp(model_class, stubs={})
    stub_model_without_timestamp(model_class, { :created_at => Time.now }.merge(stubs))
  end

  alias_method_chain :stub_model, :timestamp
end 
```

把它放在一个文件中`spec/support/`，它会自动加载，所以当你存根模型时，它会自动设置`created_at`时间戳。

最后一点，我认为这是其他人可能也想使用的有用功能，因此您可以考虑实际向[rspec-rails](https://github.com/rspec/rspec-rails/pulls)发出拉取请求，将默认设置添加为配置选项。（我想如果你这样做，你可能也想设置`updated_at`，以保持完整性。）

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T22:18:50.177

我在我的 spec_helper.rb 中添加了以下内容：

```
module RSpec::Rails::Mocks
  def stub_model_with_timestamp(*args)
    stub_model_without_timestamp(*args).tap{|o| o.created_at ||= Time.now }
  end

  alias_method_chain :stub_model, :timestamp
end 
```

另一个解决方案在“*args, :created_at => Time.now”方面存在问题，因为它向存根调用添加了一个附加参数。

# iphone - Iphone 数据库保存图像

> ID：13583929
> 
> 赞同：-2
> 
> 时间：2012-11-27T12:07:06.440
> 
> 标签：iphone, objective-c, xcode

我正在保存名称（TextField）和图像（UIImage - 来自照片库），当我单击按钮（LoadImage - 视图）时，iphone的照片库打开，然后我从中选择一张照片，然后我输入文本字段中的名称，然后单击视图上的保存（按钮）以保存名称以及与名称相关的图像被保存到数据库中，但我无法做到这一点，我从未在数据库中保存图像（BLOB (编码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:29:38.447

所以你想学习如何在 iOS 中使用数据库管理？我建议你在 iTunes U 上[学习斯坦福大学的这门课程](https://itunes.apple.com/fr/itunes-u/ipad-iphone-application-development/id480479762)。它解释得很好，并向你展示了如何做事的具体示例和演示。你想看的讲座是 13\. Core Data 和 14\. Core Data demo。

# mongodb - 如何自动杀死缓慢的 MongoDB 查询？

> ID：13583933
> 
> 赞同：6
> 
> 时间：2012-11-27T12:07:23.157
> 
> 标签：mongodb, performance, nosql

有没有一种方法可以保护我的应用程序免受 MongoDB 中慢速查询的影响？我的应用程序有很多过滤器的可能性，我正在监视所有这些查询，但同时我不想因为缺少索引定义而影响性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T21:28:55.297

现在有了版本，`2.6`这是可能的。在他们的[新闻稿中](http://www.mongodb.com/press/announcing-mongodb-26-quantum-leap-world%E2%80%99s-fastest-growing-database)，您可以看到以下内容：

> 使用 MaxTimeMS 操作员和开发人员可以指定自动取消查询，从而更好地控制资源利用率；

因此，您可以使用[MaxTimeMS指定允许执行查询的时间。](http://docs.mongodb.org/manual/reference/operator/meta/maxTimeMS/)例如，我不希望特定查询运行超过 200 毫秒。

```
db.collection.find({
  // my query
}).maxTimeMS(200) 
```

最酷的是，您可以为不同的操作指定不同的超时时间。

**在评论中回答 OP 的问题**。没有针对此的全局设置。一个原因是不同的查询可以有不同的最大容忍时间。例如，您可以通过 ID 查找 userInfo 的查询。这是非常常见的操作，应该运行得非常快（否则我们做错了什么）。所以我们不能容忍它运行超过 200 毫秒。

但是我们也有一些聚合查询，我们每天运行一次。对于此操作，运行 4 秒即可。但我们不能容忍它超过 10 秒。所以我们可以把 10000 作为 maxTimeMS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T21:01:10.473

正如@ghik 提到的，“notablescan”选项将阻止您运行由于不使用索引而导致的缓慢查询。但是，该选项对服务器来说是全局的，不适合在生产环境中使用。除了表扫描之外，它也不会保护您免受任何其他缓慢查询的影响。

不幸的是，我认为现在没有办法直接做你想做的事。有一张 JIRA 票建议添加 $maxTime 或 $maxScan 查询参数，这听起来对你有帮助，所以请投票给它：[https](https://jira.mongodb.org/browse/SERVER-2212) ://jira.mongodb.org/browse/SERVER-2212 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-30T18:36:15.257

*客户*端有可用的选项（maxTimeMS 从 2.6 版本开始）。

在服务器端，没有吸引人的全局选项，因为它会影响所有数据库和所有操作，甚至是系统需要长时间运行以进行内部操作的操作（例如拖尾 oplog 进行复制）。此外，您的某些查询可以按设计长时间运行。

解决此问题的正确方法是通过脚本监视当前正在运行的查询并杀死那些长时间运行*和*用户/客户端启动的查询 - 然后您可以为设计上长时间运行的查询构建异常，或者具有不同的阈值不同的查询/集合/等。

然后，您可以使用[db.currentOp() 方法](http://docs.mongodb.org/manual/reference/method/db.currentOp/)（在 shell 中）查看所有当前正在运行的操作。字段“secs_running”表示操作已经运行了多长时间。注意不要杀死任何不是由您的应用程序/客户端启动的长时间运行的操作 - 这可能是一项必要的系统操作，例如分片集群中的块迁移（仅作为一个示例）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T21:54:43.517

我想目前不支持通过传递时间参数来终止查询。尽管在您的开发方面，您可以将探查器级别设置为 2。它将记录已发出的每个查询。从那里你可以看到哪些查询需要多少时间。我知道这不是您真正想要的，但它有助于深入了解所有查询是胖的，然后在您的应用程序逻辑中，您可以有一些方法来优雅地处理这些查询可能起源的情况。我通常采用这种方法，它会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T15:14:43.780

只是把它放在这里，因为我一直在苦苦挣扎：

这是在 python3 中执行的方法 在 mongo 版本 4.0 和 pymongo 版本 3.11.4 上测试

```
import pymongo

client = pymongo.MongoClient("mongodb://mongodb0.example.com:27017")
admin_db = client.get_database("admin")

milliseconds_running = 10000

query = [
    {"$currentOp": {"allUsers": True, "idleSessions": True}},
    {
        "$match": {
            "active": True,
            "microsecs_running": {
                "$gte": milliseconds_running * 1000
            },
            "ns": {"$in": ["mydb.collection1", "mydb.collection2"]},
            "op": {"$in": ["query"]},
        }
    },
]

ops = admin_db.aggregate(query)

count = 0

for op in ops:

    admin_db.command({"killOp": 1, "op": op["opid"]})

    count += 1

logging.info("ops found: %d" % count) 
```

[我在这里](https://github.com/Kasahs/mongokillslow)为它写了一个更健壮和可配置的脚本。它还有一个 Dockerfile 文件，以防有人想将它用作容器。我目前将其用作定期运行的清理任务。

# php - Web应用程序与服务器程序双向交互？

> ID：13583941
> 
> 赞同：3
> 
> 时间：2012-11-27T12:07:47.590
> 
> 标签：php, ajax, linux, command-line, bidirectional

我想编写一个 Web 应用程序来与 Crafty 引擎下棋。我对 PHP 和 javascript 并不陌生，但必须学习如何与服务器进程交互：Web 应用程序和/或 (jQuery) ajax 如何与服务器上运行的 (linux) 程序进行双向交互？

目前我正在（Apache）本地主机上开发。Crafty 安装在我的 Ubuntu PC 上。这个著名的国际象棋引擎没有GUI，它通过命令在终端中运行

> $ /usr/games/狡猾

所以你可以和它下棋，甚至可以看到它的计算：

![狡猾的终端](../Images/d97efc5b8b68b78aa5e27f10651bf380.png)

我可以使用函数 proc_open() 或 exec() 让 Crafty 由 PHP 运行，并且我发现的大多数文档都指出输出流应该是一个文件.. 但我想我不想要这样的设置，因为那时网页应该不断地轮询该文件（例如通过ajax）以查看是否附加了一些新数据，对吗？

Crafty 怎么能直接与网页对话，说“我已经计算了另一个变化”或“我已经决定了一个动作”等，然后在网页上显示这些信息并让用户给出一些反击，就像在终端中一样。难道不能使用一些会话/流/侦听器吗？

我完全不知道，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:20:17.133

我建议您使用 fifos 和`&`操作员 - 原因如下：

*   您不想在每个 PHP 请求上都开始狡猾，您只想在每个游戏中启动一次
*   你不想在你的请求结束时有狡猾的结局
*   您的移动请求将希望与这个已经运行的实例进行交互。

所以我会做的是：

*   使用准备一对 FIFO `mkfifo`- 您可以从 PHP 或从 shell 执行此操作
*   在游戏开始时，运行类似`/usr/games/crafty <stdin.fifo >stdout.fifo 2>stderr.fifo &`
*   对于您的移动，将 AJAX PHP 请求写入`stdin.fifo`
*   对于服务器移动，使用 AJAX 进行长轮询，在服务器端打开`stdin.fifo`，然后`stream_select()`

# java - 包含日期范围检查在 Joda 时间

> ID：13583944
> 
> 赞同：25
> 
> 时间：2012-11-27T12:07:55.980
> 
> 标签：java, date, datetime, jodatime

我正在使用 Joda Time 2.1 库。

我已经编写了一种方法来比较给定日期是否在日期范围之间。我希望它包含开始日期和结束日期。我已经使用`LocalDate`过，因为我不想只考虑时间部分。

下面是它的代码。

```
isDateBetweenRange(LocalDate start,LocalDate end,LocalDate target){

       System.out.println("Start Date : "
              +start.toDateTimeAtStartOfDay(DateTimeZone.forID("EST"));

       System.out.println("Target Date : "
              +targettoDateTimeAtStartOfDay(DateTimeZone.forID("EST"));

       System.out.println("End Date : "
              +end.toDateTimeAtStartOfDay(DateTimeZone.forID("EST"));

       System.out.println(target.isAfter(start));

       System.out.println(target.isBefore(end));
} 
```

上述方法的输出是：

```
Start Date: 2012-11-20T00:00:00.000-05:00
Target Date: 2012-11-20T00:00:00.000-05:00
End Date : 2012-11-21T00:00:00.000-05:00
target.isAfter(start) : false
target.isBefore(end) : true 
```

`target.isAfter(start)`即使`target`日期和`start`值相同，我的问题也是错误的。

我想要那个，`target >= start`但在这里它只考虑`target > start`.
我希望它具有包容性。

这是否意味着该`isAfter`方法仅找到匹配项？

我已经浏览了 Joda Time 的 javadoc，但没有找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-27T12:12:26.277

是的，`isAfter`是排他的，否则它可能应该被命名`isEqualOrAfter`或类似的东西。

解决方法：用“not before”代替“after”，用“not after”代替“before”。

```
boolean isBetweenInclusive(LocalDate start, LocalDate end, LocalDate target) {
    return !target.isBefore(start) && !target.isAfter(end);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-06T21:42:24.770

# ruby-on-rails-3 - 多租户 Rails 应用程序的管理

> ID：13583947
> 
> 赞同：1
> 
> 时间：2012-11-27T12:08:28.150
> 
> 标签：ruby-on-rails-3, multi-tenant

我们有一个多租户 Rails 应用程序，它非常类似于 Ryan Bates 解释/教授的“从头开始”方法。

从头开始进行身份验证。

从头开始的多租户。

我们有一个帐户模型，它具有子域属性并使用范围来分隔数据。

```
#ApplicationController
around_filter :scope_current_account  

private

  def current_account
    if request.subdomain.present? && request.subdomain != 'www' && request.subdomain != 'ndt-staging'
      @account ||= Account.find_by_subdomain!(request.subdomain)
    end
  end
  helper_method :current_account

  def scope_current_account
    if request.subdomain.present? && request.subdomain != 'www' && request.subdomain != 'ndt-staging'
      Account.current_id = current_account.id   
    end
    yield
  ensure
    Account.current_id = nil
  end 
```

型号：

```
#Account.rb
has_many :users, :inverse_of => :account, :dependent => :destroy

#User.rb
belongs_to :account, :inverse_of => :users
default_scope { where(account_id: Account.current_id) } 
```

*我的问题是：在整个应用程序*范围内管理用户的最佳方式是什么……意思是 User.scoped*和*User.unscoped？

首先想到的是在 User 模型中添加一个 admin_password 属性。使用环境变量设置密码，并在创建用户/帐户时将管理员密码值添加到隐藏字段中。

（帐户新操作也建立一个用户并创建一个用户帐户）

```
#AccountsController
def new
  @account = Account.new
  @account.users.build(params[:user])
end 
```

我看到这种方法的最大问题是身份验证。我需要重写一些东西，以便如果 admin_password 正确，则不会检查正常的密码属性。如果 admin_password 不正确，将使用密码属性。

附带说明一下，我查看了诸如 act_as_tenant 和 devise 之类的插件，但我更愿意自己构建这些部分。

我可能在这里走错了路，这就是为什么我要求推荐的解决方案/想法。提前谢谢你的那些:)

```
#SessionsController
def create
  user = User.find_by_email(params[:email].downcase)
  if user && user.authenticate(params[:password])
    sign_in user
    redirect_to welcome_path
  else
    flash.now[:error] = 'Invalid email/password combination' # Not quite right!
    render 'new'
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:48:00.890

我使用 cancan gem 解决了这个问题，并在帐户创建操作中创建了一个管理员用户。

# .net - 来自本地文件 VB.net 的 InputStream

> ID：13583948
> 
> 赞同：0
> 
> 时间：2012-11-27T12:08:28.370
> 
> 标签：.net, vb.net, inputstream, fileinputstream

我正在尝试使用 API 服务将文件上传到网络，但我无法将本地文件传递到`InputStream`.

我该怎么做？我使用 a`FileWebRequest`但不起作用。

```
Dim uri As New Uri("C:/Captura.PNG")
Dim myFileWebRequest As FileWebRequest = WebRequest.Create(uri)
Dim myFileWebResponse As FileWebResponse = myFileWebRequest.GetResponse()
Dim receiveStream As Stream = myFileWebResponse.GetResponseStream() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:32:14.117

You shouldn't get local file via http.
Use [`File.Open`](http://msdn.microsoft.com/en-us/library/b9skfh7s.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1) method:

```
Dim fs As FileStream = File.Open("C:/Captura.PNG", _
        FileMode.Open, _
        FileAccess.Write, _
        FileShare.None) 
```

Since `FileStream` is `Stream`, you'll get your file.

# javascript - getHours() 时的 NaN 值

> ID：13583950
> 
> 赞同：0
> 
> 时间：2012-11-27T12:08:35.653
> 
> 标签：javascript, datetime, nan

我试图从日期中获取小时和分钟，但我得到了 NaN 值。这里有什么问题？

```
var date= cars.getAttribute("myLastDate");
var hour= date.getHours();
alert (hour); 
```

提前谢谢你。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:12:03.463

尝试这个 ：

```
var date= cars.getAttribute("myLastDate");
var d = new Date(date);
var n = d.getHours(); 
```

# iphone - 按名称搜索数组中的对象

> ID：13583952
> 
> 赞同：1
> 
> 时间：2012-11-27T12:08:44.297
> 
> 标签：iphone, objective-c, xcode, arrays, object

是否有可能按名称检查数组中的对象。在我的应用程序的某个时刻，我需要访问 plist 并提取存储在我通过其名称找到的对象下的信息。我需要这样做的原因是因为我没有在我的数组中放置对象的整数。

我已经开始了通常的程序，但我没有得到任何地方。也许对我来说有点太晚了......

这就是我的 plist 的样子

```
Array
 Dictionary
      title ...
      text ...
      ect ...
 Dictionary
      title ...
      text ...
      ect ...
  Dictionary
      title ...
      text ...
      ect ... 
```

到目前为止，我的代码根本没有帮助。我肯定做错了什么。

```
-(NSString*)nameFromPlist:(NSString*)name {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"Orte.plist"];
_regionArray = [NSArray arrayWithContentsOfFile:writableDBPath];

NSString *string = [[NSString alloc]init];

for(NSDictionary *dict in _regionArray) {
    string = [[dict objectForKey:name] valueForKey:@"title"];

}

return [NSString stringWithFormat:@"%@",string]; 
```

}

我的字符串只是返回空值。

有什么想法吗？非常感谢！

回答：

这是每个人的代码：

-(NSString*)nameFromPlist:(NSString*)name {

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *tmpFileName = [[NSString alloc] initWithFormat:@"Orte.plist"];
NSString *path = [documentsDirectory stringByAppendingPathComponent:tmpFileName];

NSString *string;
NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile:path];

NSDictionary *dict = [[NSDictionary alloc] init];
NSString *title;
for (int i=0; i<[array count]; i++) {
    dict = [array objectAtIndex:i];
    title = [dict valueForKey:@"title"];

    if([title isEqualToString:name]) {
        string = [dict valueForKey:@"title"];
        NSLog(@"Titel: %@", string);
    }        
}

return [NSString stringWithFormat:@"%@",string]; 
```

}

非常感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:37:44.687

First you don't need to alloc the NSString, 'cause you'll get a different one from valueForKey.

Then if I understood right what you want to get a better code may be something that make use of `NSPredicate` or the block-based `indexOfObjectPassingTest`. Both iterate across the array and perform a test on the elements to get you the matching elements (or the index of them).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:06:24.147

```
NSString* plistPath = [[NSBundle bundleForClass:[self class]] pathForResource:@"<PlistFileName>" ofType:@"plist"];
NSArray *array = [[NSArray alloc] initWithContentsOfFile:plistPath];
NSMutableArray* titles = [[NSMutableArray alloc] init];
for (NSDictionary* d in array)
    [titles addObject:[d objectForKey:@"title"]];
NSLog(@"Object found at index %i", [a indexOfObject:@"<Your object name>"]); 
```

确保您正在针对 NSNotFound 进行测试以查找失败，而不是（比如说）0。

# git - 从 git 分支派生 maven 工件版本

> ID：13583953
> 
> 赞同：67
> 
> 时间：2012-11-27T12:08:57.263
> 
> 标签：git, maven, mavanagaiata

我们有一个工作流要求，本质上意味着我们需要从 git 中的当前分支外部定义模块的工件版本。

即，如果我们在 git 的 master 分支上，我需要`<version>master-...</version>`，如果我们在 bugfixX 分支上，我需要`<version>bugfixX-....</version>`为这个 pom.xml 生成的工件。

我之前发现[https://github.com/koraktor/mavanagaiata](https://github.com/koraktor/mavanagaiata)可以提供 SHA-1 哈希作为属性，并且从文档中可以看出它也可以提供分支，所以如果它可以在足够早的时候运行我们可以设置属性并放入`<version>${our.version}</version>`pom 的过程。如果这是可能的，我非常希望看到一个可以工作的 pom.xml（并为此奖励 500 点赏金）。

如果没有，我想我们要么进入预处理，要么“git checkout”用一些钩子做额外的魔法（我还没有尝试过，工作代码也会很棒）。

我们有一个顶级 pom，可以运行它以在“..”中生成一个属性文件，然后再构建我要询问的这个功能需要去的模块。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-20T12:54:28.133

事实上，Maven 不能在一次运行中更改它自己项目的版本与其他目标。最重要的是，据我所知，Maven 不支持`<version>`标签中的任意属性。因此，需要单独执行来运行将更改 POM 版本的目标。有各种插件可以做到这一点 - 对于这种情况，可能会使用插件中的`versions:set`目标`versions`- [http://mojo.codehaus.org/versions-maven-plugin/set-mojo.html](http://mojo.codehaus.org/versions-maven-plugin/set-mojo.html)

因此，可以按如下方式执行它，例如：

```
mvn versions:set -DgenerateBackupPoms=false -DnewVersion=$branch-SNAPSHOT 
```

其中`$branch`变量必须包含当前 Git 分支名称；它可以用 提取`git rev-parse`，如下所示：

```
branch=$(git rev-parse --abbrev-ref HEAD) 
```

但是，仍然需要以某种方式执行它。你可以手动做，但是很麻烦。所以，我的猜测是，确实最强大的解决方案是从 Git 方面解决这个问题。那就是——一个 Git 钩子。这是完成这项工作的完整 Git`post-checkout`钩子（与上面的代码相同，只是在签出分支时运行钩子，而不是单个文件）：

```
#!/bin/bash

echo 'Will change the version in pom.xml files...'

# check if the checkout was to checkout a branch
if [ $3 != '1' ]
    then echo 'git checkout did not checkout a branch - quitting';exit
fi

# get current branch name
branch=$(git rev-parse --abbrev-ref HEAD)
version=$branch-SNAPSHOT

# run maven versions plugin to set new version
mvn versions:set -DgenerateBackupPoms=false -DnewVersion=$version

echo 'Changed version in pom.xml files to $version' 
```

将此内容放入文件`PROJECTDIR\.git\hooks\post-checkout`文件中。请注意，挂钩文件应该是可执行的以运行它（`chmod +x post-checkout`）。

关于`versions`插件的一些注意事项 - 它非常灵活并且支持许多选项并且几乎没有其他可能有帮助的目标，具体取决于您的项目结构（您是否使用父 pom，孩子是否有自己的版本或者它们是否来自父， ETC。）。因此，可以通过使用`versions`插件中的其他目标或指定其他参数来稍微修改上面的钩子以支持您的特定情况。

优点：

*   强大的
*   无需更改 pom.xml 文件本身中的任何内容即可完成此工作
*   只需停用挂钩（删除或使其不可执行）即可关闭此“功能” - 同样，不需要在 pom.xml 中进行任何更改

缺点：

*   不能强制其他人使用钩子——它应该在克隆 repo 后手动安装（或者，如果假设的 Git 用户害怕接触 .git 目录中的东西，你可以提供一个脚本来安装钩子）。

**更新**

之后是更复杂的钩子版本，它不仅会将版本设置为分支名称，还会保留旧版本的后缀。例如，提供旧版本`master-1.0-SNAPSHOT`，切换到`feature1`分支会将项目的版本更改为`feature1-1.0-SNAPSHOT`. 这个 bash 脚本存在一些问题（需要名称中没有短划线符号 ( `-`) 的分支名称，并且只采用根 pom 的版本），但可以了解如何扩展钩子：给定 mvn 和bash 命令可以提取和更新 POM 中的大量信息。

```
#!/bin/bash

echo 'Will change the version in pom.xml files...'

# check if the checkout was to checkout a branch
if [ $3 != '1' ]
    then echo 'git checkout did not checkout a branch - quitting';exit
fi

# get current branch name
branch=$(git rev-parse --abbrev-ref HEAD)

# get current version of the top level pom
current_version=$(mvn help:evaluate -Dexpression=project.version | grep -v '\[.*')

# extract version suffix
suffix=$(echo $current_version | cut -d \- -f 2)

# build new version
version=$branch-$suffix

# run maven versions plugin to set new version
mvn versions:set -DgenerateBackupPoms=false -DnewVersion=$version

echo 'Changed version in pom.xml files to $version' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-06-24T07:41:14.507

很抱歉重新提出这个问题并最近发布了另一个解决方案，但确实可以动态更改 maven 版本并使用一些 git 功能，有点像`git describe`这样做。

执行此操作的项目是[jgitver-maven-plugin](https://github.com/jgitver/jgitver-maven-plugin) *（免责声明；我是作者）*，它使用[jgitver](https://github.com/jgitver/jgitver)一个基于 jgit 的库，以便从 git 信息派生 maven 项目版本。

[![在此处输入图像描述](../Images/934e5ed17ff5a55b4123329786e682d4.png)](https://i.stack.imgur.com/OdT3Q.gif)

它很容易用作 maven 扩展

```
...
  <build>
      <extensions>
          <extension>
              <groupId>fr.brouillard.oss</groupId>
              <artifactId>jgitver-maven-plugin</artifactId>
              <version>0.1.0</version>
          </extension>
      </extensions>
     ...
  </build>
... 
```

该扩展也可以用作插件扩展，然后允许更多配置，例如在您不想使用 SNAPSHOTS 的情况下。有关完整使用场景的描述，请参阅[项目](https://github.com/jgitver/jgitver-maven-plugin)页面。

还有一个可用的[gradle 插件](https://github.com/jgitver/gradle-jgitver-plugin)或多或少是相同的。

* * *

***[编辑 1]***：回答 Thorbjørn Ravn Andersen 评论

该插件不会修改原始 pom 文件或 build.gradle 文件。
对于 maven 插件，修改在 maven 对象模型的内存中完成，并写入临时目录中的临时文件。计算仅基于 git 元数据（标签、提交等）。
这种非修改允许不污染 git 历史记录。当您对 git 提交感到满意时，标记它`git tag -a x.y.z`并`mvn deploy`: 仅此而已。
项目文件中的版本现在无用，例如可以设置为 0。

截至今天，由于[IDEA-155733](https://youtrack.jetbrains.com/issue/IDEA-155733) ，只有 IntelliJ 的最新 EAP 版本才能与 maven 插件一起使用。Eclipse & Netbeans 没有问题。

* * *

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-10-16T04:59:14.467

免责声明：我是作者

我的 maven 核心扩展将根据当前分支或标签虚拟设置版本。您可以根据需要配置自定义版本格式模式。

[https://github.com/qoomon/maven-branch-versioning-extension](https://github.com/qoomon/maven-branch-versioning-extension)

**版本格式示例** [![在此处输入图像描述](../Images/b42fb25d96e19d5010d0db2debb4bedd.png)](https://i.stack.imgur.com/kFEum.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-22T16:51:04.220

如果在工件文件名中设置 git 标记和版本信息就足够了，可以使用[maven-jgit-buildnumber-plugin](https://github.com/alx3apps/jgit-buildnumber)：

```
<build>
  <finalName>${artifactId}-${git.buildnumber}</finalName>
  <plugins>
    <plugin>
      <groupId>ru.concerteza.buildnumber</groupId>
      <artifactId>maven-jgit-buildnumber-plugin</artifactId>
      <version>1.2.7</version>
      <executions>
        <execution>
          <id>git-buildnumber</id>
          <goals>
            <goal>extract-buildnumber</goal>
          </goals>
          <phase>prepare-package</phase>
        </execution>
      </executions>
    </plugin>
    <!-- more plugins -->
  </plugins>
</build> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-22T15:51:00.700

从**maven-3.5.0开始，***版本*标签内支持 ${revision}、${sha1} 和 ${changelist} 属性。如果您想将 Git 分支名称合并到 CI 构建作业的版本中，则此功能可能足以满足您的目的。请参阅[Maven CI 友好版本](https://maven.apache.org/maven-ci-friendly.html)

基本上，在您的 pom.xml 中，将固定版本替换为：

```
<version>${revision}${changelist}</version> 
```

通过创建包含以下内容的文件，在项目根目录中设置*修订*和*变更列表*`.mvn/maven.config`的默认值：

```
-Drevision=1.2.3
-Dchangelist=-SNAPSHOT 
```

将此文件检查到版本控制中，当您遇到项目修订时更新它。

然后，在您的 CI 系统中，您可以使用 Git 分支名称的清理表示覆盖*changelist变量，例如。*

```
# sed regex replaces non-(alphanumeric, dot or dash) char sequences with a dash
BRANCHNAME=$(git rev-parse --abbrev-ref HEAD | sed -E -e 's@[^0-9A-Za-z.-]+@-@g')
mvn clean install -Dchangelist="-${BRANCHNAME}" 
```

*（您可能更喜欢`git symbolic-ref --short HEAD`获取分支名称，YMMV）*

CI 系统为分支构建的工件`feature/branchname`将具有版本化分支后缀，例如：

```
yourproject-1.2.3-feature-branchname.jar 
```

而不使用任何覆盖的开发人员仍将其构建为：

```
yourproject-1.2.3-SNAPSHOT.jar 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-27T15:02:13.353

您是否检查过[buildnumber-maven-plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/)，它使您有机会使用 git 的修订号。但是你需要一些不同的东西。此外，我建议做这样的事情：

```
 1.0.0-SNAPSHOT 
   1.0.0-SNAPSHOT 
```

蜂拥而至

在分支上，您可以简单地将版本更改为

```
 1.0.0-BF-SNAPSHOT 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-20T15:37:19.557

你试过使用这个插件吗？：[https](https://github.com/ktoso/maven-git-commit-id-plugin) ://github.com/ktoso/maven-git-commit-id-plugin 。您可以将其配置为生成一个包含有关您的 repo 状态的所有相关信息的属性文件：

> *   分支
> *   描述
> *   提交 ID
> *   构建用户名
> *   建立用户邮箱
> *   构建时间
> *   提交用户名
> *   提交用户电子邮件
> *   commitMessageShort
> *   commitMessageFull
> *   提交时间

# spring - 控制器之间的对象数据丢失

> ID：13583958
> 
> 赞同：1
> 
> 时间：2012-11-27T12:09:29.500
> 
> 标签：spring, model-view-controller, modelattribute

我`modelAttribute`在控制器之间以某种形式传输对象（作为 a ）及其值时遇到问题。我有一个表格`modelAttribute`，比如说`"myObject"`，它有一些成员。我`modelAttribute "myObject"`在第一个控制器中添加了一个模型。

我能够`"myObject"`在视图中读取和显示值的值，例如，我可以通过 获取值`${myObject.memberName}`，但是当涉及到将对象作为参数的第二个控制器时（我的意思是：）`modelAttribute("myObject")` `MyObject myObject`成员被设置为默认值，主要为空！

一些值在表单中设置（它们工作正常），其余值在第一个控制器中设置。我想在第二个控制器中获取第一个控制器中设置的值，但它们丢失了。

我应该如何传输`modelAttribute`对象的值以免在控制器之间丢失它们？我应该把它们放在参数中`HttpRequest`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:34:09.947

HTTP 是一种无状态协议。因此，您可以期望参数不会在请求之间徘徊。

> 我应该将它们放在 HttpRequest 参数中吗？

是的，如果您希望处理下一个请求的控制器可以使用这些值，您需要将它们作为请求的一部分传递/以某种形式数据发布。

如果您希望将数据提供给许多请求，您可以考虑将模型放在 HttpSession 中。

# java - 未使用印度的地理编码和地图 API 获取邮政编码

> ID：13583961
> 
> 赞同：1
> 
> 时间：2012-11-27T12:09:38.330
> 
> 标签：java, android, google-maps, location

我没有从 Android 中的地理编码器和地图 API 获取邮政编码。

地理编码器返回空值，我正在使用以下代码：

```
List<Address> addresses = gc.getFromLocation(12.45454, 80.26565, 1);
addresses.get(0).getPostalCode(); 
```

或者，我也在尝试以下方法，

[https://maps.googleapis.com/maps/api/geocode/json?latlng=12.45454,80.26565&sensor=true](https://maps.googleapis.com/maps/api/geocode/json?latlng=12.45454,80.26565&sensor=true)

我没有收到邮政编码。

# java - 合并 XML 文件时出错

> ID：13583962
> 
> 赞同：0
> 
> 时间：2012-11-27T12:09:39.473
> 
> 标签：java, xml, xml-parsing

这是我试图合并合并多个 XML 文件的代码。

```
public static void mergeXml(String directory) throws Exception {
    File dir = new File(directory);
    File[] rootFiles = dir.listFiles();
    XMLEventWriter eventWriter;
    XMLEventFactory eventFactory;
    XMLOutputFactory outputFactory = XMLOutputFactory.newInstance();
    XMLInputFactory inputFactory = XMLInputFactory.newInstance();
    eventWriter = outputFactory.createXMLEventWriter(new FileOutputStream("temp/testMerge1.xml"));
    eventFactory = XMLEventFactory.newInstance();

    // Create and write Start Tag
    StartDocument startDocument = eventFactory.createStartDocument("ISO-8859-1");
    eventWriter.add(startDocument);

    for(File rootFile : rootFiles){
        XMLEventReader test = inputFactory.createXMLEventReader(new StreamSource(rootFile));
        while(test.hasNext()){
            XMLEvent event= test.nextEvent();
            //avoiding start(<?xml version="1.0"?>) and end of the documents;
            if (event.getEventType()!= XMLEvent.START_DOCUMENT && event.getEventType() != XMLEvent.END_DOCUMENT)
                eventWriter.add(event);         

            test.close();
        }           

        eventWriter.add(eventFactory.createEndDocument());
        eventWriter.close();
    }

} 
```

我遇到了两个问题

1.  输出文件没有任何编码
2.  当我试图解析此代码创建的文件时，出现以下异常

```
[Fatal Error] :1:2493: The markup in the document following the root element must be well-formed.
org.xml.sax.SAXParseException: The markup in the document following the root element must be well-formed.
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at SplitMain.validateInputFile(SplitMain.java:139)
    at SplitMain.main(SplitMain.java:76) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:48:21.440

```
// Create and write Start Tag
StartDocument startDocument = eventFactory.createStartDocument("ISO-8859-1");
eventWriter.add(startDocument); 
```

这不会为输出 XML 文档创建根元素，它只是编写`<?xml`声明。之后`StartDocument`你还需要添加一个合适的`StartElement`：

```
StartElement startRootElt = eventFactory.createStartElement("", "http://example.com", "root");
eventWriter.add(startRootElt); 
```

下一个问题是您正在关闭`eventWriter`for 循环内部：

```
 eventWriter.add(eventFactory.createEndDocument());
    eventWriter.close();
} 
```

您需要将其移出`for`循环，并结束我们在上面开始的根元素

```
}
eventWriter.add(eventFactory.createEndElement("", "http://example.com", "root"));
eventWriter.add(eventFactory.createEndDocument());
eventWriter.close(); 
```

此外，如果您的任何 XML 文件有一个`<!DOCTYPE`，您可能会遇到问题。您可以像当前忽略开始和结束文档事件一样忽略 DTD 事件，但是这是否有效取决于该 DTD 中声明的确切内容。你得试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:23:52.003

我认为您的问题可能是您试图盲目地将 XML 节点添加到目标文档中，因此最终会得到多个根元素。这在 XML 中是不允许的。

您可以在输出文档中创建一个新的顶级元素，并将 XML 节点附加到该元素。

# c# - 阻止用户选择但允许以编程方式选择

> ID：13583964
> 
> 赞同：2
> 
> 时间：2012-11-27T12:09:50.107
> 
> 标签：c#, winforms, listview

我的 Windows 应用程序中有一个 listview 控件，其中填充了一些项目。我将通过将`ListViewItem.Selected`属性设置为 true 以编程方式选择项目。但我想阻止用户在列表视图中选择一个项目。即，应始终以编程方式选择它。我可以通过禁用控件来阻止用户选择，但是禁用控件也会禁用不正确的滚动条。

即使我创建了一个自定义列表视图控件并`ItemSelectionChanging`使用 WndProc[检查链接](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_24634062.html)实现了一个事件处理程序，使用它我可以取消事件，如下所示，

```
private void lstLiveTables_ItemSelectionChanging(object sender, ListViewExItemSelectionChangingEventArgs e)
{
    e.Cancel = true;
} 
```

但同样，这将取消该事件，即使对于以编程方式选择的项目也是如此。我的问题是，无论如何要确定选择是手动（由用户）还是以编程方式`SelectedIndexChanged`或使用`WndProc`Message.

注：如果需要，我会上传CustomListView控件的代码。

**更新 1**

谢谢埃马特尔。这是个好主意。即使我试图通过仅在选择项目之前订阅事件并在选择后立即将其删除来实现相同的目的。通过这种方式，一旦选择，事件将立即触发并继续。这工作正常。

```
this.lstTables.SelectedIndexChanged += new System.EventHandler(this.lstTables_SelectedIndexChanged);
item.Selected = true;
this.lstTables.SelectedIndexChanged -= new System.EventHandler(this.lstTables_SelectedIndexChanged); 
```

但是我又遇到了一个问题，如果用户手动选择一个项目，什么都不会发生（不会触发任何事件），但该项目将被突出显示。一旦一个项目被突出显示，并且如果我尝试以编程方式选择相同的项目，则没有发生任何事情，即，该`SelectedIndexChanged`项目不会触发该事件，因为它已经被突出显示。

注意：即使我遵循您建议的 Flag 方法，也会有相同的行为。

**更新 2**

我可以通过拥有自己的方法而不是按照 emartel 的建议处理事件来解决这个问题。但我的问题是，根据我的更新 1，`SelectedIndexChanged`当项目被突出显示但未实际选择时，是否有触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-11T12:02:53.677

```
public FrmTest()
{
    list.ItemSelectionChanged += list_ItemSelectionChanged;
}

private bool changing;

private void list_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
{
    if (changing)
        return;

    if (e.Item == nonSelectableListItem) 
    {
        changing = true;
        nonSelectableListItem.Selected = false;
        changing = false;
    }
} 
```

**样本：**

[![在此处输入图像描述](../Images/5c9cbc520197f189ee59302d6b60af42.png)](https://i.stack.imgur.com/GhDMk.gif)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:02:19.383

好吧，一个简单的解决方案是保留一个标志，说明您正在以编程方式更改选择并允许事件通过，并在完成后重置标志

**编辑：**如果您，并且只有您，可以更改选择，并且您以编程方式执行此操作，因此您可以*控制*发生这种情况的地点和时间，为什么您甚至需要`EventHandler`? 为什么不调用一个方法来做任何你想做的处理？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:08:22.350

一种*肮脏*的方法是保留所选项目的列表并在每次更改时刷新选择，而不是从您的代码中更改。

还有一个**ItemSelectionChanged**事件，它为选择状态已更改的每个项目单独引发。您可能可以在此事件中将选择状态翻转回来。

您还可以查看[Better ListView Express](http://www.componentowl.com/better-listview-express)控件。它具有只读模式，因此用户无法更改选择。它的设置非常简单：

```
listView.ReadOnly = true; 
```

[完整版](http://www.componentowl.com/better-listview)还支持自定义不可选择的项目。简单设置：

```
listView.Items[0].Selectable = false; 
```

使第一个不可选择（由用户）。

当然，您仍然可以从代码中选择项目。

下图显示了不可选择的项目（它们用灰色标记）：

![在此处输入图像描述](../Images/36e1996306f8cb55be3375fef7e9b2c6.png)

# java - 使用字符串数组的子集程序没有输出

> ID：13583968
> 
> 赞同：0
> 
> 时间：2012-11-27T12:10:26.877
> 
> 标签：java, arrays, string, multidimensional-array, dynamic-memory-allocation

下面的程序应该显示元素由“|”分隔的子集。这里我使用静态字符串数组分配。但它不显示数组大小> 19的输出。它没有抛出异常。如何解决这个问题？

```
class kkk
{
        static int set[]={3,4,9,14,15,19,28,37,47,50,54,56,59,61,70,73,78,81,92,95,97,99};
        static int arr_size=(int)Math.pow((double)2,(double)set.length);
        static String []abc=new String[arr_size+10];
        static String wwf="";
        static void subset(int x)
        {
            if(abc[0].equals("END"))
            {
                abc[0]=""+x;
            }
            else
            {
                int i,len=0,count=0;
                for(i=0;i<abc.length;i++)
                {
                    if(!abc[i].equals("END")){len=len+1;}
                }
                count=len;
                wwf="";
                for(i=0;i<len;i++)
                {
                    wwf=abc[i];
                    wwf=wwf+"|"+x;
                    abc[count]=wwf;
                    count++;
                }
                abc[count]=""+x;
            }
        }
        static void sub()
        {
            int len=set.length,i;
            for(i=0;i<len;i++)
            {
                subset(set[i]);
            }
            int count=0;
            for(i=0;i<abc.length;i++)
            {
                System.out.println("count:"+count+++"-----"+abc[i]);
            }
        }
        public static void main(String args[])
        {
            for(int i=0;i<abc.length;i++)
            {
                abc[i]="END";
            }
            sub(); 
        }
    } 
```

对于 ivanovic：以下程序的输出是什么？

```
class kkk
    {
        static int  valid_subset()
        {
            int count=0,len=abc.length,subset_count=0;
            for(int i=0;i<len;i++)
            {
                if(!abc[i].equals("END"))
                {
                    count=count+1;
                }
            }
            String www="";
            for(int i=0;i<count;i++)
            {
                int temp_large=0,sum=0,x=0;

                www=abc[i];
                String fgr="";
                for(int j=0;j<www.length();j++)
                {
                    if(!(""+www.charAt(j)).equals("|"))
                    {
                        fgr=fgr+www.charAt(j);
                        x=Integer.parseInt(fgr);
                    }
                    else
                    {
                        if(x>temp_large)
                        {
                            temp_large=x;
                        }
                        fgr="";
                    }
                }
                if(x>temp_large)
                {
                    temp_large=x;
                }
                fgr="";
                for(int j=0;j<www.length();j++)
                {
                    if(!(""+www.charAt(j)).equals("|"))
                    {
                        fgr=fgr+www.charAt(j);
                        x=Integer.parseInt(fgr);
                    }
                    else
                    {
                        if(x!=temp_large)
                        {
                            sum=sum+x;
                        }
                        fgr="";
                    }
                }
                if(x!=temp_large)
                {
                    sum=sum+x;
                }
                if(temp_large==sum)
                {
                    subset_count=subset_count+1;
                }
            }
            return subset_count;
        }
        static int set[]={3,4,9,14,15,19,28,37,47,50,54,56,59,61,70,73,78,81,92,95,97,99};
        static int arr_size=(int)Math.pow((double)2,(double)set.length);
        static String []abc=new String[arr_size+10];
        static String wwf="";
        static void subset(int x)
        {
            if(abc[0].equals("END"))
            {
                abc[0]=""+x;
            }
            else
            {
                int i,len=0,count=0;
                for(i=0;i<abc.length;i++)
                {
                    if(!abc[i].equals("END")){len=len+1;}
                }
                count=len;
                wwf="";
                for(i=0;i<len;i++)
                {
                    wwf=abc[i];
                    wwf=wwf+"|"+x;
                    abc[count]=wwf;
                    count++;
                }
                abc[count]=""+x;
            }
        }
        static void sub()
        {
            int len=set.length,i;
            for(i=0;i<len;i++)
            {
                subset(set[i]);
            }
            /*int count=0;
            for(i=0;i<abc.length;i++)
            {
                System.out.println("count:"+count+++"-----"+abc[i]);
            }*/
        }
        public static void main(String args[])
        {
            for(int i=0;i<abc.length;i++)
            {
                abc[i]="END";
            }
            sub(); 
            System.out.println(valid_subset());
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:22:50.590

您在 i 上循环，但没有在第 28 行的表达式中使用 i。

将第 28 行从：

```
if(!abc[0].equals("END")){len=len+1;} 
```

至

```
if(!abc[i].equals("END")){len=len+1;} 
```

# sql - Sql Pivot Table 我如何制作它？

> ID：13583973
> 
> 赞同：1
> 
> 时间：2012-11-27T12:10:47.137
> 
> 标签：sql, group-by, pivot, cube, rollup

嗨，我想问一些关于我的工作的事情

```
select * from 
  (Select m.Brand,u.Color,Count(Unit)as [Total unit] 
   from Brands m 
   inner join Products u on m.BrandID=u.ProductID 
   Group by m.Brand ,u.Color 
   with cube
   )as Pvt 
   PIVOT ( Sum([total unit]) 
   For Color IN ( [Black],[White],[Gray],[Silver],[Orange],[Dark Blue] ) 
   )AS Pivot_Table 
```

我想显示总品牌和总颜色，但这段代码只计算每种颜色并计算每个品牌的每种颜色

我如何获得 Total Brand 和 Total Color ？

# linux - 如何为指定目录的所有现有文件和新文件设置权限

> ID：13583980
> 
> 赞同：0
> 
> 时间：2012-11-27T12:11:11.857
> 
> 标签：linux, ftp, chmod

我有一个 Ubuntu 服务器，我有一个目录`/testftp/`。在此目录中，我有许多其他目录和文件，如何设置此目录中所有现有和新目录和文件的权限- `755`？

`/testftp/`组是`testclient`

谢谢！

**upd** 使用 `chmod -R 755 /testftp/`一切正常，但是当我创建/上传新文件或目录时，它具有`600`权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:15:35.207

检查以下手册页

```
man chmod
man umask 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:16:46.743

尝试`chmod -R 755 /testscript/`

`-R`表示递归，它适用于所有子目录。

# c++ - 使用 Core Audio 忽略 __cxa_throw 是否安全？

> ID：13583984
> 
> 赞同：6
> 
> 时间：2012-11-27T12:11:31.843
> 
> 标签：c++, objective-c, xcode, exception-handling, core-audio

有人问了一个类似的[问题](https://stackoverflow.com/questions/12861748/how-do-i-know-when-safe-to-ignore-cxa-throw-on-an-all-exceptions-breakpoint)..但我想让它更具体到核心音频..因为我们中的一些人可能已经注意到核心音频几乎没有出错的余地。

正如上述问题的[答案](https://stackoverflow.com/a/12861939/766570)所解释的，__cxa_throw 是一个 C++[未处理异常](http://www.cocoabuilder.com/archive/xcode/272954-exception-breakpoint-failure.html)，可以忽略（这个问题似乎是 Xcode 4.5.1 的新问题。我以前也从未见过）

我们可以对核心音频说同样的话吗？让我紧张的是，它与音频的格式有关。我的很多代码都依赖于：

我正在尝试将 AAC 文件转换为 lPCM ..

**输出格式：**

```
// set up the PCM output format for conversion
streamer->PCMoutputFormat.mSampleRate = 44100.0;
streamer->PCMoutputFormat.mFormatID = kAudioFormatLinearPCM;
streamer->PCMoutputFormat.mFormatFlags = kAudioFormatFlagsCanonical;
streamer->PCMoutputFormat.mBytesPerPacket = 4;
streamer->PCMoutputFormat.mFramesPerPacket = 1;
streamer->PCMoutputFormat.mBytesPerFrame = 4;
streamer->PCMoutputFormat.mChannelsPerFrame = 2;
streamer->PCMoutputFormat.mBitsPerChannel = 16; 
```

**输入格式：**

```
mSampleRate = 44100
mFormatID = 1633772320 (AAC)
mFormatFlags = 0
mBytesPerPacket = 0 
mFramesPerPacket = 1024
mBytesPerFrame = 0
mChannelsPerFrame = 2
mBitsPerChannel = 0 
```

**实例变量：**

游戏.h

```
@interface Game : NSObject <GKSessionDelegate>
{
    AudioStreamer *streamer;
}

@property (nonatomic, assign) AudioStreamBasicDescription mediaItemInputFormat; 
```

audioStreamer.h

```
@interface AudioStreamer : NSObject
{
    @public
        AudioStreamBasicDescription PCMoutputFormat;
        AudioConverterRef audioConverter;
} 
```

**在 game.m 中设置转换器命令**（这是抛出 __cxa_throw 未处理异常的地方！）

```
// set up converter
OSStatus result = AudioConverterNew(&_mediaItemInputFormat,
                                    &streamer->PCMoutputFormat,
                                    &streamer->audioConverter); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:32:55.957

如果异常没有终止应用程序，那么其他一些代码会处理它。如果你相信任何一段代码，那么就没有什么好担心的了。

# c# - MSbuild 和具有相同类库引用的多个项目

> ID：13583998
> 
> 赞同：0
> 
> 时间：2012-11-27T12:12:22.020
> 
> 标签：c#, msbuild, visual-studio-2012

我有一个带有类库和几个 Windows 服务的解决方案文件。所有服务都具有对类库的项目引用。

在我的构建文件中，我以发布模式构建每个服务，压​​缩文件并将 zip 文件复制到网络服务器，我们的生产服务器可以从中下载 zip 文件。

问题是只构建和部署了第一个服务。所有其他人都因 CSC 失败：错误 CS0006：找不到元数据文件“classlibrary.dll”。

我已经制作了一个重现问题的测试解决方案。一个空的类库和两个空的控制台应用程序，都引用了类库。

是因为临时目录是一样的吗？它适用于 Web 项目和相同的临时目录。

然后是这个构建文件。

```
 <?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <MSBuildCommunityTasksPath>$(MSBuildProjectDirectory)\Tools\MSBuildCommunityTasks</MSBuildCommunityTasksPath>
  </PropertyGroup>
  <Import Project="Tools\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />
  <PropertyGroup>
    <ExtensionTasksPath>$(MSBuildProjectDirectory)\Tools\MSBuild.ExtensionPack\</ExtensionTasksPath>
  </PropertyGroup>
  <Import Project="Tools\MSBuild.ExtensionPack\MSBuild.ExtensionPack.tasks" />

  <PropertyGroup>
    <ProjectName>MSbuild test</ProjectName>
  </PropertyGroup>

  <Target Name="DeployAll" >
    <Message Text="DeploymentPackage $(ProjectName)" />

    <PropertyGroup>
      <TempDeploymentDirectory>$(MSBuildProjectDirectory)\DeploymentPackage\</TempDeploymentDirectory>      

      <ProjectFile1>ConsoleApplication1\ConsoleApplication1.csproj</ProjectFile1>
      <ProjectFile2>ConsoleApplication2\ConsoleApplication2.csproj</ProjectFile2>

    </PropertyGroup>

    <RemoveDir Directories="$(TempDeploymentDirectory)" />

    <MSBuild Projects="$(ProjectFile1)" Properties="Configuration=Release;OutDir=$(TempDeploymentDirectory)" Targets="Clean;Build"/>

    <!-- Zipping copying files removed for readability -->

    <RemoveDir Directories="$(TempDeploymentDirectory)" />    

    <MSBuild Projects="$(ProjectFile2)" Properties="Configuration=Release;OutDir=$(TempDeploymentDirectory)" Targets="Clean;Build"/>

  </Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:20:42.050

在每个应用程序为演示项目工作之前构建 classLibrary，但不适用于实际项目。

我项目中的解决方案是为每个服务使用不同的输出目录。

# xaml - 标签在 WPF 2010 中未正确显示

> ID：13583999
> 
> 赞同：0
> 
> 时间：2012-11-27T12:12:24.047
> 
> 标签：xaml

我有一个 TabControl，它有四个标签。它的xml是：

```
![enter image description here][1]<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TabControl Height="282" HorizontalAlignment="Left" Name="tabControl1"      
     VerticalAlignment="Top" Width="503">
        <TabItem Header="tabItem1" Name="tabItem1">
            <Grid >
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="101*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="367"/>
                    <ColumnDefinition Width="125*" />
                </Grid.ColumnDefinitions>
                <Label Content="Library:" Height="28" HorizontalAlignment="Left" Margin="309,15,0,0" Name="label1" VerticalAlignment="Top" Width="49" />
                <Label  Content="Museum:" Height="28" HorizontalAlignment="Left" Margin="303,13,0,0" Name="label2" VerticalAlignment="Top" Width="58" Grid.Row="1" />
                <Label Content="Cinema:" Height="28" HorizontalAlignment="Left" Margin="309,11,0,0" Name="label3" VerticalAlignment="Top" Width="50" Grid.Row="2" />
                <Label Content="Embankment:" Height="28" HorizontalAlignment="Left" Margin="281,30,0,0" Name="label4" VerticalAlignment="Top" Width="81" Grid.Row="3" />
            </Grid>
        </TabItem>
    </TabControl>
</Grid> 
```

当程序运行时，一些字母、标志消失了，我不明白为什么。例如，在此屏幕截图中，可以看到单词“Cinema”的冒号未绘制。我做了一个网格，但是，它没有帮助。我应该怎么做才能使我的程序正常工作？它经常发生。我希望我的所有标签都能正确显示。

可以看出没有画出“Cinema”这个词的**冒号**。

![两个木偶](../Images/b72289b890c5df6b70e106e4fb7cf98f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:13:33.520

尝试删除标签的“宽度”并允许内容调整控件的大小

```
<Grid>
        <TabControl Height="282" HorizontalAlignment="Left" Name="tabControl1"      
     VerticalAlignment="Top" Width="503">
            <TabItem Header="tabItem1" Name="tabItem1">
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="50"/>
                        <RowDefinition Height="50"/>
                        <RowDefinition Height="50"/>
                        <RowDefinition Height="101*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="367"/>
                        <ColumnDefinition Width="125*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Library:" Height="28" HorizontalAlignment="Left" Margin="309,15,0,0" Name="label1" VerticalAlignment="Top"  />
                    <Label  Content="Museum:" Height="28" HorizontalAlignment="Left" Margin="303,13,0,0" Name="label2" VerticalAlignment="Top"  Grid.Row="1" />
                    <Label Content="Cinema:" Height="28" HorizontalAlignment="Left" Margin="309,11,0,0" Name="label3" VerticalAlignment="Top"  Grid.Row="2" />
                    <Label Content="Embankment:" Height="28" HorizontalAlignment="Left" Margin="281,30,0,0" Name="label4" VerticalAlignment="Top"  Grid.Row="3" />
                </Grid>
            </TabItem>
        </TabControl>
    </Grid> 
```